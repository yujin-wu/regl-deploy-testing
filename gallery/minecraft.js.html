<!DOCTYPE html>
      <html>
        <head>
          <title>example/minecraft.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global?global:d}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return"jscomp_symbol_"+d+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();if(d[$jscomp.global.Symbol.iterator])return d[$jscomp.global.Symbol.iterator]();var h=0;return{next:function(){return h==d.length?{done:!0}:{done:!1,value:d[h++]}}}};
$jscomp.arrayFromIterator=function(d){for(var h,r=[];!(h=d.next()).done;)r.push(h.value);return r};$jscomp.arrayFromIterable=function(d){return d instanceof Array?d:$jscomp.arrayFromIterator($jscomp.makeIterator(d))};
$jscomp.inherits=function(d,h){function r(){}r.prototype=h.prototype;d.prototype=new r;d.prototype.constructor=d;for(var a in h)if($jscomp.global.Object.defineProperties){var c=$jscomp.global.Object.getOwnPropertyDescriptor(h,a);c&&$jscomp.global.Object.defineProperty(d,a,c)}else d[a]=h[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(d,h){d instanceof String&&(d=String(d));var r=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},c=(a.next=function(){if(r<d.length){var a=r++;return{value:h(a,d[a]),done:!1}}c.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return c},a);return c};
$jscomp.array.findInternal_=function(d,h,r){d instanceof String&&(d=String(d));for(var a=d.length,c=0;c<a;c++){var A=d[c];if(h.call(r,A,c,d))return{i:c,v:A}}return{i:-1,v:void 0}};
$jscomp.array.from=function(d,h,r){h=void 0===h?function(c){return c}:h;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(d[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();d=d[Symbol.iterator]();for(var c;!(c=d.next()).done;)a.push(h.call(r,c.value))}else{c=d.length;for(var A=0;A<c;A++)a.push(h.call(r,d[A]))}return a};$jscomp.array.of=function(d){for(var h=[],r=0;r<arguments.length;++r)h[r-0]=arguments[r];return $jscomp.array.from(h)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(d,h){return[d,h]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(d){return d})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(d,h){return h})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(d,h,r){var a=this.length;d=Number(d);h=Number(h);r=Number(null!=r?r:a);if(d<h)for(r=Math.min(r,a);h<r;)h in this?this[d++]=this[h++]:(delete this[d++],h++);else for(r=Math.min(r,a+h-d),d+=r-h;r>h;)--r in this?this[--d]=this[r]:delete this[d];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(d,h,r){null!=r&&d.length||(r=this.length||0);r=Number(r);for(h=Number((void 0===h?0:h)||0);h<r;h++)this[h]=d;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(d,h){return $jscomp.array.findInternal_(this,d,h).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(d,h){return $jscomp.array.findInternal_(this,d,h).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(d){d=void 0===d?[]:d;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(d){d=$jscomp.makeIterator(d);for(var h=d.next();!h.done;h=d.next())h=h.value,this.set(h[0],h[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var d=$jscomp.global.Map;if(!d||!d.prototype.entries||!Object.seal)return!1;try{var h=Object.seal({x:4}),r=new d($jscomp.makeIterator([[h,"s"]]));if("s"!=r.get(h)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var a=r.entries(),c=a.next();if(c.done||c.value[0]!=h||"s"!=c.value[1])return!1;c=a.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!a.next().done?!1:!0}catch(A){return!1}};
$jscomp.Map.createHead_=function(){var d={};return d.previous=d.next=d.head=d};$jscomp.Map.getId_=function(d){if(!(d instanceof Object))return String(d);$jscomp.Map.key_ in d||d instanceof Object&&Object.isExtensible&&Object.isExtensible(d)&&$jscomp.Map.defineProperty_(d,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in d?d[$jscomp.Map.key_]:" "+d};
$jscomp.Map.prototype.set=function(d,h){var r=this.maybeGetEntry_(d),a=r.id,c=r.list,r=r.entry;c||(c=this.data_[a]=[]);r?r.value=h:(r={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:h},c.push(r),this.head_.previous.next=r,this.head_.previous=r,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(d){var h=this.maybeGetEntry_(d);d=h.id;var r=h.list,a=h.index;return(h=h.entry)&&r?(r.splice(a,1),r.length||delete this.data_[d],h.previous.next=h.next,h.next.previous=h.previous,h.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(d){return!!this.maybeGetEntry_(d).entry};
$jscomp.Map.prototype.get=function(d){return(d=this.maybeGetEntry_(d).entry)&&d.value};$jscomp.Map.prototype.maybeGetEntry_=function(d){var h=$jscomp.Map.getId_(d),r=this.data_[h];if(r)for(var a=0;a<r.length;a++){var c=r[a];if(d!==d&&c.key!==c.key||d===c.key)return{id:h,list:r,index:a,entry:c}}return{id:h,list:r,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(d){return[d.key,d.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(d){return d.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(d){return d.value})};$jscomp.Map.prototype.forEach=function(d,h){for(var r=$jscomp.makeIterator(this.entries()),a=r.next();!a.done;a=r.next())a=a.value,d.call(h,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(d){var h=this,r=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(r){for(;r.head!=h.head_;)r=r.previous;for(;r.next!=r.head;)return r=r.next,{done:!1,value:d(r)};r=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(d,h,r){Object.defineProperty(d,h,{value:String(r)})}:function(d,h,r){d[h]=String(r)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(d){d=Number(d)>>>0;if(0===d)return 32;var h=0;0===(d&4294901760)&&(d<<=16,h+=16);0===(d&4278190080)&&(d<<=8,h+=8);0===(d&4026531840)&&(d<<=4,h+=4);0===(d&3221225472)&&(d<<=2,h+=2);0===(d&2147483648)&&h++;return h};$jscomp.math.imul=function(d,h){d=Number(d);h=Number(h);var r=d&65535,a=h&65535;return r*a+((d>>>16&65535)*a+r*(h>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1};
$jscomp.math.log10=function(d){return Math.log(d)/Math.LN10};$jscomp.math.log2=function(d){return Math.log(d)/Math.LN2};$jscomp.math.log1p=function(d){d=Number(d);if(.25>d&&-.25<d){for(var h=d,r=1,a=d,c=0,A=1;c!=a;)h*=d,A*=-1,a=(c=a)+A*h/++r;return a}return Math.log(1+d)};$jscomp.math.expm1=function(d){d=Number(d);if(.25>d&&-.25<d){for(var h=d,r=1,a=d,c=0;c!=a;)h*=d/++r,a=(c=a)+h;return a}return Math.exp(d)-1};$jscomp.math.cosh=function(d){d=Number(d);return(Math.exp(d)+Math.exp(-d))/2};
$jscomp.math.sinh=function(d){d=Number(d);return 0===d?d:(Math.exp(d)-Math.exp(-d))/2};$jscomp.math.tanh=function(d){d=Number(d);if(0===d)return d;var h=Math.exp(2*-Math.abs(d)),h=(1-h)/(1+h);return 0>d?-h:h};$jscomp.math.acosh=function(d){d=Number(d);return Math.log(d+Math.sqrt(d*d-1))};$jscomp.math.asinh=function(d){d=Number(d);if(0===d)return d;var h=Math.log(Math.abs(d)+Math.sqrt(d*d+1));return 0>d?-h:h};
$jscomp.math.atanh=function(d){d=Number(d);return($jscomp.math.log1p(d)-$jscomp.math.log1p(-d))/2};
$jscomp.math.hypot=function(d,h,r){for(var a=[],c=2;c<arguments.length;++c)a[c-2]=arguments[c];d=Number(d);h=Number(h);for(var A=Math.max(Math.abs(d),Math.abs(h)),G=$jscomp.makeIterator(a),c=G.next();!c.done;c=G.next())A=Math.max(A,Math.abs(c.value));if(1E100<A||1E-100>A){d/=A;h/=A;G=d*d+h*h;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c)/A,G+=c*c;return Math.sqrt(G)*A}A=d*d+h*h;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c),A+=
c*c;return Math.sqrt(A)};$jscomp.math.trunc=function(d){d=Number(d);if(isNaN(d)||Infinity===d||-Infinity===d||0===d)return d;var h=Math.floor(Math.abs(d));return 0>d?-h:h};$jscomp.math.cbrt=function(d){if(0===d)return d;d=Number(d);var h=Math.pow(Math.abs(d),1/3);return 0>d?-h:h};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(d){return"number"!==typeof d?!1:!isNaN(d)&&Infinity!==d&&-Infinity!==d};
$jscomp.number.isInteger=function(d){return $jscomp.number.isFinite(d)?d===Math.floor(d):!1};$jscomp.number.isNaN=function(d){return"number"===typeof d&&isNaN(d)};$jscomp.number.isSafeInteger=function(d){return $jscomp.number.isInteger(d)&&Math.abs(d)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(d,h){for(var r=[],a=1;a<arguments.length;++a)r[a-1]=arguments[a];r=$jscomp.makeIterator(r);for(a=r.next();!a.done;a=r.next())if(a=a.value)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d};$jscomp.object.is=function(d,h){return d===h?0!==d||1/d===1/h:d!==d&&h!==h};$jscomp.Set=function(d){d=void 0===d?[]:d;this.map_=new $jscomp.Map;if(d){d=$jscomp.makeIterator(d);for(var h=d.next();!h.done;h=d.next())this.add(h.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var d=$jscomp.global.Set;if(!d||!d.prototype.entries||!Object.seal)return!1;var h=Object.seal({x:4}),d=new d($jscomp.makeIterator([h]));if(d.has(h)||1!=d.size||d.add(h)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var d=d.entries(),r=d.next();if(r.done||r.value[0]!=h||r.value[1]!=h)return!1;r=d.next();return r.done||r.value[0]==h||4!=r.value[0].x||r.value[1]!=r.value[0]?!1:d.next().done};
$jscomp.Set.prototype.add=function(d){this.map_.set(d,d);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(d){d=this.map_["delete"](d);this.size=this.map_.size;return d};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(d){return this.map_.has(d)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(d,h){var r=this;this.map_.forEach(function(a){return d.call(h,a,a,r)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(d,h){if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(d){for(var h=[],r=0;r<arguments.length;++r)h[r-0]=arguments[r];for(var r="",h=$jscomp.makeIterator(h),a=h.next();!a.done;a=h.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),r+=String.fromCharCode(a&1023|56320))}return r};
$jscomp.string.repeat=function(d){var h=this.toString();if(0>d||1342177279<d)throw new RangeError("Invalid count value");d|=0;for(var r="";d;)if(d&1&&(r+=h),d>>>=1)h+=h;return r};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(d){var h=this.toString(),r=h.length;d=Number(d)||0;if(0<=d&&d<r){d|=0;var a=h.charCodeAt(d);if(55296>a||56319<a||d+1===r)return a;d=h.charCodeAt(d+1);return 56320>d||57343<d?a:1024*(a-55296)+d+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(d,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(d,"includes");return-1!==this.toString().indexOf(d,h)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(d,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(d,"startsWith");var r=this.toString();d+="";for(var a=r.length,c=d.length,A=Math.max(0,Math.min(h|0,r.length)),G=0;G<c&&A<a;)if(r[A++]!=d[G++])return!1;return G>=c};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(d,h){$jscomp.string.noRegExp_(d,"endsWith");var r=this.toString();d+="";void 0===h&&(h=r.length);for(var a=Math.max(0,Math.min(h|0,r.length)),c=d.length;0<c&&0<a;)if(r[--a]!=d[--c])return!1;return 0>=c};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function d(h,r,a){function c(l,m){if(!r[l]){if(!h[l]){var f="function"==typeof require&&require;if(!m&&f)return f(l,!0);if(A)return A(l,!0);f=Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f;}f=r[l]={exports:{}};h[l][0].call(f.exports,function(f){return c(h[l][1][f]||f)},f,f.exports,d,h,r,a)}return r[l].exports}for(var A="function"==typeof require&&require,G=0;G<a.length;G++)c(a[G]);return c}return d})()({1:[function(d,h,r){h=document.body.appendChild(document.createElement("canvas"));
r=d("canvas-fit");var a=d("../regl")(h),c=d("gl-mat4"),A=d("canvas-orbit-camera")(h);window.addEventListener("resize",r(h),!1);A.rotate([0,0],[0,-.4]);A.zoom(15);var G=[[[-.5,.5,.5],[.5,.5,.5],[.5,-.5,.5],[-.5,-.5,.5]],[[.5,.5,.5],[.5,.5,-.5],[.5,-.5,-.5],[.5,-.5,.5]],[[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,-.5],[.5,-.5,-.5]],[[-.5,.5,-.5],[-.5,.5,.5],[-.5,-.5,.5],[-.5,-.5,-.5]],[[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5]]],l=[[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,.5],[.5,
.5],[.5,1],[0,1]],[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,0],[.5,0],[.5,.5],[0,.5]]],m=[[[0,0,1],[0,0,1],[0,0,1],[0,0,1]],[[1,0,0],[1,0,0],[1,0,0],[1,0,0]],[[0,0,-1],[0,0,-1],[0,0,-1],[0,0,-1]],[[-1,0,0],[-1,0,0],[-1,0,0],[-1,0,0]],[[0,1,0],[0,1,0],[0,1,0],[0,1,0]]],f=function(b,g){return Math.round(2*Math.sin(94.2*b)*Math.sin(188.4*g)+3*Math.cos(376.8*b+2.1)*Math.sin(471*g+.9)+1*Math.cos(753.6*b+43.43)*Math.cos(282.6*g+34.3))},k=[],b=[],q=[],I=[];h=function(g,e,c){for(var a=q.length,w=0;5>w;w++)if(!(0===
w&&e<=f(g,c+1)||1===w&&e<=f(g+1,c)||2===w&&e<=f(g,c-1)||3===w&&e<=f(g-1,c))){var y;for(y=0;y<G[w].length;y++){var d=G[w][y];q.push([d[0]+g,d[1]+e,d[2]+c])}for(y=0;y<m[w].length;y++)d=m[w][y],I.push([d[0],d[1],d[2]]);for(y=0;y<l[w].length;y++)d=l[w][y],k.push([d[0],d[1]]);b.push([2+a,1+a,0+a]);b.push([2+a,0+a,3+a]);a+=4}};for(r=-40;40>=r;r++)for(var w=-40;40>=w;w++){var e=f(r,w);h(r,e,w)}var g=a({cull:{enable:!0,face:"back"},context:{view:function(){return A.view()}},frag:"\n  precision mediump float;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform sampler2D atlas;\n\n  void main () {\n\n    vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));\n    vec3 tex = texture2D(atlas, vUv).rgb;\n    vec3 ambient = 0.3 * tex;\n    vec3 diffuse = 0.7 * tex * clamp( dot(vNormal, lightDir ), 0.0, 1.0 );\n\n    gl_FragColor = vec4(ambient + diffuse, 1.0);\n  }",
vert:"\n  precision mediump float;\n\n  attribute vec3 position, normal;\n  attribute vec2 uv;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform mat4 projection, view;\n\n  void main() {\n    vUv = uv;\n    vNormal = normal;\n    gl_Position = projection * view * vec4(position, 1);\n  }",uniforms:{view:a.context("view"),projection:function(b){return c.perspective([],Math.PI/4,b.viewportWidth/b.viewportHeight,.01,1E3)},atlas:a.prop("atlas")},attributes:{position:a.prop("position"),uv:a.prop("uv"),
normal:a.prop("normal")},elements:a.prop("elements")});d("resl")({manifest:{atlas:{type:"image",src:"assets/atlas.png",parser:function(b){return a.texture({mag:"nearest",mipmap:!0,min:"linear mipmap linear",data:b})}}},onDone:function(e){var f=e.atlas;a.frame(function(){g({position:q,elements:b,uv:k,normal:I,atlas:f});A.tick()})}})},{"../regl":82,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59,resl:78}],2:[function(d,h,r){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var c=d("./util/sorted-object-keys"),A=d("./util/check"),G=d("./util/values"),l=d("./constants/dtypes.json"),m=d("./util/is-typed-array"),f=d("./util/is-ndarray"),k=d("./constants/primitives.json"),b="attributes elements offset count primitive instances".split(" ");h.exports=function(q,I,w,e,g,p,n){function t(b){if(b!==h.currentVAO){var g=I.oes_vertex_array_object;b?g.bindVertexArrayOES(b.vao):g.bindVertexArrayOES(null);
h.currentVAO=b}}function v(b){if(b!==h.currentVAO){if(b)b.bindAttrs();else{for(var g=I.angle_instanced_arrays,e=0;e<H.length;++e){var f=H[e];f.buffer?(q.enableVertexAttribArray(e),f.buffer.bind(),q.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offfset),g&&f.divisor&&g.vertexAttribDivisorANGLE(e,f.divisor)):(q.disableVertexAttribArray(e),q.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}n.elements?q.bindBuffer(34963,n.elements.buffer.buffer):q.bindBuffer(34963,null)}h.currentVAO=b}}function D(){G(ta).forEach(function(b){b.destroy()})}
function y(){this.id=++la;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=I.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;ta[this.id]=this;this.buffers=[]}function d(){I.oes_vertex_array_object&&G(ta).forEach(function(b){b.refresh()})}var u=w.maxAttributes,H=Array(u);for(w=0;w<u;++w)H[w]=new a;var la=0,ta={},h={Record:a,scope:{},state:H,currentVAO:null,targetVAO:null,restore:I.oes_vertex_array_object?d:
function(){},createVAO:function(n){function q(e){var n;if(Array.isArray(e))n=e,t.elements&&t.ownsElements&&t.elements.destroy(),t.elements=null,t.ownsElements=!1,t.offset=0,t.count=0,t.instances=-1,t.primitive=4;else{A("object"===typeof e,"invalid arguments for create vao");A("attributes"in e,"must specify attributes for vao");if(e.elements){var v=e.elements;t.ownsElements?("function"===typeof v&&"elements"===v._reglType?t.elements.destroy():t.elements(v),t.ownsElements=!1):p.getElements(e.elements)?
(t.elements=e.elements,t.ownsElements=!1):(t.elements=p.create(e.elements),t.ownsElements=!0)}else t.elements=null,t.ownsElements=!1;n=e.attributes;t.offset=0;t.count=-1;t.instances=-1;t.primitive=4;t.elements&&(t.count=t.elements._elements.vertCount,t.primitive=t.elements._elements.primType);"offset"in e&&(t.offset=e.offset|0);"count"in e&&(t.count=e.count|0);"instances"in e&&(t.instances=e.instances|0);"primitive"in e&&(A(e.primitive in k,"bad primitive type: "+e.primitive),t.primitive=k[e.primitive]);
A.optional(function(){for(var g=c(e),f=0;f<g.length;++f)A(0<=b.indexOf(g[f]),'invalid option for vao: "'+g[f]+'" valid options are '+b)});A(Array.isArray(n),"attributes must be an array")}A(n.length<u,"too many attributes");A(0<n.length,"must specify at least one attribute");var v={},w=t.attributes;w.length=n.length;for(var y=0;y<n.length;++y){var D=n[y],d=w[y]=new a,G=D.data||D;if(Array.isArray(G)||m(G)||f(G)){var la;t.buffers[y]&&(la=t.buffers[y],m(G)&&la._buffer.byteLength>=G.byteLength?la.subdata(G):
(la.destroy(),t.buffers[y]=null));t.buffers[y]||(la=t.buffers[y]=g.create(D,34962,!1,!0));d.buffer=g.getBuffer(la);d.size=d.buffer.dimension|0;d.normalized=!1;d.type=d.buffer.dtype;d.offset=0;d.stride=0;d.divisor=0;d.state=1;v[y]=1}else g.getBuffer(D)?(d.buffer=g.getBuffer(D),d.size=d.buffer.dimension|0,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):g.getBuffer(D.buffer)?(d.buffer=g.getBuffer(D.buffer),d.size=(+D.size||d.buffer.dimension)|0,d.normalized=!!D.normalized||
!1,"type"in D?(A.parameter(D.type,l,"invalid buffer type"),d.type=l[D.type]):d.type=d.buffer.dtype,d.offset=(D.offset||0)|0,d.stride=(D.stride||0)|0,d.divisor=(D.divisor||0)|0,d.state=1,A(1<=d.size&&4>=d.size,"size must be between 1 and 4"),A(0<=d.offset,"invalid offset"),A(0<=d.stride&&255>=d.stride,"stride must be between 0 and 255"),A(0<=d.divisor,"divisor must be positive"),A(!d.divisor||!!I.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in D?(A(0<y,"first attribute must not be a constant"),
d.x=+D.x||0,d.y=+D.y||0,d.z=+D.z||0,d.w=+D.w||0,d.state=2):A(!1,"invalid attribute spec for location "+y)}for(la=0;la<t.buffers.length;++la)!v[la]&&t.buffers[la]&&(t.buffers[la].destroy(),t.buffers[la]=null);t.refresh();return q}var t=new y;e.vaoCount+=1;q.destroy=function(){for(var b=0;b<t.buffers.length;++b)t.buffers[b]&&t.buffers[b].destroy();t.buffers.length=0;t.ownsElements&&(t.elements.destroy(),t.elements=null,t.ownsElements=!1);t.destroy()};q._vao=t;q._reglType="vao";return q(n)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var e=0;e<H.length;++e){var g=H[e];g.buffer===b&&(q.disableVertexAttribArray(e),g.buffer=null)}},setVAO:I.oes_vertex_array_object?t:v,clear:I.oes_vertex_array_object?D:function(){}};y.prototype.bindAttrs=function(){for(var b=I.angle_instanced_arrays,e=this.attributes,g=0;g<e.length;++g){var f=e[g];f.buffer?(q.enableVertexAttribArray(g),q.bindBuffer(34962,f.buffer.buffer),q.vertexAttribPointer(g,f.size,f.type,f.normalized,f.stride,f.offset),
b&&f.divisor&&b.vertexAttribDivisorANGLE(g,f.divisor)):(q.disableVertexAttribArray(g),q.vertexAttrib4f(g,f.x,f.y,f.z,f.w))}for(b=e.length;b<u;++b)q.disableVertexAttribArray(b);(b=p.getElements(this.elements))?q.bindBuffer(34963,b.buffer.buffer):q.bindBuffer(34963,null)};y.prototype.refresh=function(){var b=I.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=null,b.bindVertexArrayOES(null))};y.prototype.destroy=function(){if(this.vao){var b=I.oes_vertex_array_object;
this===h.currentVAO&&(h.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);ta[this.id]&&(delete ta[this.id],--e.vaoCount)};return h}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(d,h,r){function a(b){return w[Object.prototype.toString.call(b)]|
0}function c(b,e){for(var g=0;g<e.length;++g)b[g]=e[g]}function A(b,e,g,f,c,k,a){for(var p=0,q=0;q<g;++q)for(var m=0;m<f;++m)b[p++]=e[c*q+k*m+a]}var G=d("./util/sorted-object-keys"),l=d("./util/check"),m=d("./util/is-typed-array"),f=d("./util/is-ndarray"),k=d("./util/values"),b=d("./util/pool");r=d("./util/flatten");var q=r.flatten,I=r.shape,w=d("./constants/arraytypes.json"),e=d("./constants/dtypes.json"),g=d("./constants/usage.json"),p=[];p[5120]=1;p[5122]=2;p[5124]=4;p[5121]=1;p[5123]=2;p[5125]=
4;p[5126]=4;h.exports=function(n,t,v,w){function y(b){this.id=la++;this.buffer=n.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;v.profile&&(this.stats={size:0})}function d(b,e,g){b.byteLength=e.byteLength;n.bufferData(b.type,e,g)}function u(e,g,k,p,n,t){e.usage=k;if(Array.isArray(g)){if(e.dtype=p||5126,0<g.length)if(Array.isArray(g[0])){n=I(g);for(var v=p=1;v<n.length;++v)p*=n[v];e.dimension=p;g=q(g,n,e.dtype);d(e,g,k);t?e.persistentData=
g:b.freeType(g)}else"number"===typeof g[0]?(e.dimension=n,n=b.allocType(e.dtype,g.length),c(n,g),d(e,n,k),t?e.persistentData=n:b.freeType(n)):m(g[0])?(e.dimension=g[0].length,e.dtype=p||a(g[0])||5126,g=q(g,[g.length,g[0].length],e.dtype),d(e,g,k),t?e.persistentData=g:b.freeType(g)):l.raise("invalid buffer data")}else if(m(g))e.dtype=p||a(g),e.dimension=n,d(e,g,k),t&&(e.persistentData=new Uint8Array(new Uint8Array(g.buffer)));else if(f(g)){n=g.shape;var w=g.stride,v=g.offset,y=0,D=0,G=0,u=0;1===n.length?
(y=n[0],D=1,G=w[0],u=0):2===n.length?(y=n[0],D=n[1],G=w[0],u=w[1]):l.raise("invalid shape");e.dtype=p||a(g.data)||5126;e.dimension=D;n=b.allocType(e.dtype,y*D);A(n,g.data,y,D,G,u,v);d(e,n,k);t?e.persistentData=n:b.freeType(n)}else g instanceof ArrayBuffer?(e.dtype=5121,e.dimension=n,d(e,g,k),t&&(e.persistentData=new Uint8Array(new Uint8Array(g)))):l.raise("invalid buffer data")}function H(b){t.bufferCount--;w(b);var e=b.buffer;l(e,"buffer must not be deleted already");n.deleteBuffer(e);b.buffer=null;
delete ta[b.id]}var la=0,ta={};y.prototype.bind=function(){n.bindBuffer(this.type,this.buffer)};y.prototype.destroy=function(){H(this)};var h=[];v.profile&&(t.getTotalBufferSize=function(){var b=0;G(ta).forEach(function(e){b+=ta[e].stats.size});return b});return{create:function(k,w,D,d){function G(b){var c=35044,k=null,a=0,q=0,t=1;Array.isArray(b)||m(b)||f(b)||b instanceof ArrayBuffer?k=b:"number"===typeof b?a=b|0:b&&(l.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in
b&&(l(null===k||Array.isArray(k)||m(k)||f(k),"invalid data for buffer"),k=b.data),"usage"in b&&(l.parameter(b.usage,g,"invalid buffer usage"),c=g[b.usage]),"type"in b&&(l.parameter(b.type,e,"invalid buffer type"),q=e[b.type]),"dimension"in b&&(l.type(b.dimension,"number","invalid dimension"),t=b.dimension|0),"length"in b&&(l.nni(a,"buffer length must be a nonnegative integer"),a=b.length|0));W.bind();k?u(W,k,c,q,t,d):(a&&n.bufferData(W.type,a,c),W.dtype=q||5121,W.usage=c,W.dimension=t,W.byteLength=
a);v.profile&&(W.stats.size=W.byteLength*p[W.dtype]);return G}function la(b,e){l(e+b.byteLength<=W.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+e+" to a buffer of size "+W.byteLength);n.bufferSubData(W.type,e,b)}t.bufferCount++;var W=new y(w);ta[W.id]=W;D||G(k);G._reglType="buffer";G._buffer=W;G.subdata=function(e,g){var k=(g||0)|0,n;W.bind();if(m(e)||e instanceof ArrayBuffer)la(e,k);else if(Array.isArray(e)){if(0<
e.length)if("number"===typeof e[0]){var p=b.allocType(W.dtype,e.length);c(p,e);la(p,k);b.freeType(p)}else Array.isArray(e[0])||m(e[0])?(n=I(e),p=q(e,n,W.dtype),la(p,k),b.freeType(p)):l.raise("invalid buffer data")}else if(f(e)){n=e.shape;var t=e.stride,v=p=0,w=0,y=0;1===n.length?(p=n[0],v=1,w=t[0],y=0):2===n.length?(p=n[0],v=n[1],w=t[0],y=t[1]):l.raise("invalid shape");n=Array.isArray(e.data)?W.dtype:a(e.data);n=b.allocType(n,p*v);A(n,e.data,p,v,w,y,e.offset);la(n,k);b.freeType(n)}else l.raise("invalid data for buffer subdata");
return G};v.profile&&(G.stats=W.stats);G.destroy=function(){H(W)};return G},createStream:function(b,e){var g=h.pop();g||(g=new y(b));g.bind();u(g,e,35040,0,1,!1);return g},destroyStream:function(b){h.push(b)},clear:function(){k(ta).forEach(H);h.forEach(H)},getBuffer:function(b){return b&&b._buffer instanceof y?b._buffer:null},restore:function(){k(ta).forEach(function(b){b.buffer=n.createBuffer();n.bindBuffer(b.type,b.buffer);n.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:u}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(d,h,r){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(d,h,r){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(d,h,r){h.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(d,h,r){h.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(d,h,r){function a(b){return Array.isArray(b)||w(b)||e(b)}function c(b){return b.sort(function(b,
e){return"viewport"===b?-1:"viewport"===e?1:b<e?-1:1})}function A(b,e,g,f){this.thisDep=b;this.contextDep=e;this.propDep=g;this.append=f}function G(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function l(b){return new A(!1,!1,!1,b)}function m(b,e){var g=b.type;if(0===g)return g=b.data.length,new A(!0,1<=g,2<=g,e);if(4===g)return g=b.data,new A(g.thisDep,g.contextDep,g.propDep,e);if(5===g)return new A(!1,!1,!1,e);if(6===g){for(var f=g=!1,c=!1,k=0;k<b.data.length;++k){var a=b.data[k];1===a.type?
c=!0:2===a.type?f=!0:3===a.type?g=!0:0===a.type?(g=!0,a=a.data,1<=a&&(f=!0),2<=a&&(c=!0)):4===a.type&&(g=g||a.data.thisDep,f=f||a.data.contextDep,c=c||a.data.propDep)}return new A(g,f,c,e)}return new A(3===g,2===g,1===g,e)}var f=d("./util/sorted-object-keys"),k=d("./util/check"),b=d("./util/extend"),q=d("./util/codegen"),I=d("./util/loop"),w=d("./util/is-typed-array"),e=d("./util/is-ndarray"),g=d("./util/is-array-like"),p=d("./dynamic"),n=d("./constants/primitives.json"),t=d("./constants/dtypes.json"),
v=["x","y","z","w"],D="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),y={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},W="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
u={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},H={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},la={frag:35632,vert:35633},ta={cw:2304,ccw:2305},S=new A(!1,!1,!1,function(){});h.exports=function(e,w,d,h,r,K,ka,aa,ma,na,Qa,Cb,ea,Oa,X){function P(b){return b.replace(".","_")}function O(b,e,g){var f=P(b);
ca.push(b);F[f]=M[f]=!!g;za[f]=e}function U(b,e,g){var f=P(b);ca.push(b);Array.isArray(g)?(M[f]=g.slice(),F[f]=g.slice()):M[f]=F[f]=g;Aa[f]=e}function pa(){var b=q(),e=b.link,g=b.global;b.id=mc++;b.batchId="0";var c=e(Ka),a=b.shared={props:"a0"};f(Ka).forEach(function(b){a[b]=g.def(c,".",b)});k.optional(function(){b.CHECK=e(k);b.commandStr=k.guessCommand();b.command=e(b.commandStr);b.assert=function(b,g,f){b("if(!(",g,"))",this.CHECK,".commandRaise(",e(f),",",this.command,");")};C.invalidBlendCombinations=
W});var n=b.next={},p=b.current={};f(Aa).forEach(function(b){Array.isArray(M[b])&&(n[b]=g.def(a.next,".",b),p[b]=g.def(a.current,".",b))});var t=b.constants={};f(C).forEach(function(b){t[b]=g.def(JSON.stringify(C[b]))});b.invoke=function(g,f){switch(f.type){case 0:var c=["this",a.context,a.props,b.batchId];return g.def(e(f.data),".call(",c.slice(0,Math.max(f.data.length+1,4)),")");case 1:return g.def(a.props,f.data);case 2:return g.def(a.context,f.data);case 3:return g.def("this",f.data);case 4:return f.data.append(b,
g),f.data.ref;case 5:return f.data.toString();case 6:return f.data.map(function(e){return b.invoke(g,e)})}};b.attribCache={};var v={};b.scopeAttrib=function(b){b=w.id(b);if(b in v)return v[b];var g=na.scope[b];g||(g=na.scope[b]=new ja);return v[b]=e(g)};return b}function Q(b){var e=b["static"];b=b.dynamic;var g;if("profile"in e){var f=!!e.profile;g=l(function(b,e){return f});g.enable=f}else if("profile"in b){var c=b.profile;g=m(c,function(b,e){return b.invoke(e,c)})}return g}function Ob(b,e){var g=
b["static"],f=b.dynamic;if("framebuffer"in g){var c=g.framebuffer;return c?(c=aa.getFramebuffer(c),k.command(c,"invalid framebuffer object"),l(function(b,e){var g=b.link(c),f=b.shared;e.set(f.framebuffer,".next",g);f=f.context;e.set(f,".framebufferWidth",g+".width");e.set(f,".framebufferHeight",g+".height");return g})):l(function(b,e){var g=b.shared;e.set(g.framebuffer,".next","null");g=g.context;e.set(g,".framebufferWidth",g+".drawingBufferWidth");e.set(g,".framebufferHeight",g+".drawingBufferHeight");
return"null"})}if("framebuffer"in f){var a=f.framebuffer;return m(a,function(b,g){var e=b.invoke(g,a),f=b.shared,c=f.framebuffer,n=g.def(c,".getFramebuffer(",e,")");k.optional(function(){b.assert(g,"!"+e+"||"+n,"invalid framebuffer object")});g.set(c,".next",n);f=f.context;g.set(f,".framebufferWidth",n+"?"+n+".width:"+f+".drawingBufferWidth");g.set(f,".framebufferHeight",n+"?"+n+".height:"+f+".drawingBufferHeight");return n})}return null}function ab(b,g,e){function f(b){if(b in c){var n=c[b];k.commandType(n,
"object","invalid "+b,e.commandStr);var p=!0,q=n.x|0,t=n.y|0,v,w;"width"in n?(v=n.width|0,k.command(0<=v,"invalid "+b,e.commandStr)):p=!1;"height"in n?(w=n.height|0,k.command(0<=w,"invalid "+b,e.commandStr)):p=!1;return new A(!p&&g&&g.thisDep,!p&&g&&g.contextDep,!p&&g&&g.propDep,function(b,g){var e=b.shared.context,f=v;"width"in n||(f=g.def(e,".","framebufferWidth","-",q));var c=w;"height"in n||(c=g.def(e,".","framebufferHeight","-",t));return[q,t,f,c]})}if(b in a){var y=a[b],p=m(y,function(g,e){var f=
g.invoke(e,y);k.optional(function(){g.assert(e,f+"&&typeof "+f+'==="object"',"invalid "+b)});var c=g.shared.context,a=e.def(f,".x|0"),n=e.def(f,".y|0"),p=e.def('"width" in ',f,"?",f,".width|0:","(",c,".","framebufferWidth","-",a,")"),q=e.def('"height" in ',f,"?",f,".height|0:","(",c,".","framebufferHeight","-",n,")");k.optional(function(){g.assert(e,p+">=0&&"+q+">=0","invalid "+b)});return[a,n,p,q]});g&&(p.thisDep=p.thisDep||g.thisDep,p.contextDep=p.contextDep||g.contextDep,p.propDep=p.propDep||g.propDep);
return p}return g?new A(g.thisDep,g.contextDep,g.propDep,function(b,g){var e=b.shared.context;return[0,0,g.def(e,".","framebufferWidth"),g.def(e,".","framebufferHeight")]}):null}var c=b["static"],a=b.dynamic;if(b=f("viewport")){var n=b;b=new A(b.thisDep,b.contextDep,b.propDep,function(b,g){var e=n.append(b,g),f=b.shared.context;g.set(f,".viewportWidth",e[2]);g.set(f,".viewportHeight",e[3]);return e})}return{viewport:b,scissor_box:f("scissor.box")}}function T(b,g){var e=b["static"];if("string"===typeof e.frag&&
"string"===typeof e.vert){if(0<f(g.dynamic).length)return null;var e=g["static"],c=f(e);if(0<c.length&&"number"===typeof e[c[0]]){for(var a=[],n=0;n<c.length;++n)k("number"===typeof e[c[n]],"must specify all vertex attribute locations when using vaos"),a.push([e[c[n]]|0,c[n]]);return a}}return null}function B(b,g,e){function f(b){if(b in c){var g=w.id(c[b]);k.optional(function(){Qa.shader(la[b],g,k.guessCommand())});var e=l(function(){return g});e.id=g;return e}if(b in a){var n=a[b];return m(n,function(g,
e){var f=g.invoke(e,n),c=e.def(g.shared.strings,".id(",f,")");k.optional(function(){e(g.shared.shader,".shader(",la[b],",",c,",",g.command,");")});return c})}return null}var c=b["static"],a=b.dynamic,n=f("frag"),p=f("vert"),q=null;G(n)&&G(p)?(q=Qa.program(p.id,n.id,null,e),b=l(function(b,g){return b.link(q)})):b=new A(n&&n.thisDep||p&&p.thisDep,n&&n.contextDep||p&&p.contextDep,n&&n.propDep||p&&p.propDep,function(b,g){var e=b.shared.shader,f;f=n?n.append(b,g):g.def(e,".","frag");var c;c=p?p.append(b,
g):g.def(e,".","vert");var a=e+".program("+c+","+f;k.optional(function(){a+=","+b.command});return g.def(a+")")});return{frag:n,vert:p,progVar:b,program:q}}function oa(b,g){function e(b,f){if(b in c){var n=c[b]|0;f?q.offset=n:q.instances=n;k.command(!f||0<=n,"invalid "+b,g.commandStr);return l(function(b,g){f&&(b.OFFSET=n);return n})}if(b in p){var a=p[b];return m(a,function(g,e){var c=g.invoke(e,a);f&&(g.OFFSET=c,k.optional(function(){g.assert(e,c+">=0","invalid "+b)}));return c})}if(f){if(w)return l(function(b,
g){return b.OFFSET=0});if(t)return new A(v.thisDep,v.contextDep,v.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(t)return new A(v.thisDep,v.contextDep,v.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var c=b["static"],p=b.dynamic,q={},t=!1,v=function(){if("vao"in c){var b=c.vao;null!==b&&null===na.getVAO(b)&&(b=na.createVAO(b));t=!0;q.vao=b;return l(function(g){var e=
na.getVAO(b);return e?g.link(e):"null"})}if("vao"in p){t=!0;var g=p.vao;return m(g,function(b,e){var f=b.invoke(e,g);return e.def(b.shared.vao+".getVAO("+f+")")})}return null}(),w=!1,y=function(){if("elements"in c){var b=c.elements;q.elements=b;if(a(b)){var e=q.elements=K.create(b,!0),b=K.getElements(e);w=!0}else b&&(b=K.getElements(b),w=!0,k.command(b,"invalid elements",g.commandStr));e=l(function(g,e){if(b){var f=g.link(b);return g.ELEMENTS=f}return g.ELEMENTS=null});e.value=b;return e}if("elements"in
p){w=!0;var f=p.elements;return m(f,function(b,g){var e=b.shared,c=e.isBufferArgs,e=e.elements,n=b.invoke(g,f),a=g.def("null"),c=g.def(c,"(",n,")"),p=b.cond(c).then(a,"=",e,".createStream(",n,");")["else"](a,"=",e,".getElements(",n,");");k.optional(function(){b.assert(p["else"],"!"+n+"||"+a,"invalid elements")});g.entry(p);g.exit(b.cond(c).then(e,".destroyStream(",a,");"));return b.ELEMENTS=a})}return t?new A(v.thisDep,v.contextDep,v.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+
b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),D=e("offset",!0),I=function(){if("primitive"in c){var b=c.primitive;q.primitive=b;k.commandParameter(b,n,"invalid primitve",g.commandStr);return l(function(g,e){return n[b]})}if("primitive"in p){var e=p.primitive;return m(e,function(b,g){var c=b.constants.primTypes,a=b.invoke(g,e);k.optional(function(){b.assert(g,a+" in "+c,"invalid primitive, must be one of "+f(n))});return g.def(c,"[",a,"]")})}return w?G(y)?y.value?
l(function(b,g){return g.def(b.ELEMENTS,".primType")}):l(function(){return 4}):new A(y.thisDep,y.contextDep,y.propDep,function(b,g){var e=b.ELEMENTS;return g.def(e,"?",e,".primType:",4)}):t?new A(v.thisDep,v.contextDep,v.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),d=function(){if("count"in c){var b=c.count|0;q.count=b;k.command("number"===typeof b&&0<=b,"invalid vertex count",g.commandStr);return l(function(){return b})}if("count"in
p){var e=p.count;return m(e,function(b,g){var f=b.invoke(g,e);k.optional(function(){b.assert(g,"typeof "+f+'==="number"&&'+f+">=0&&"+f+"===("+f+"|0)","invalid vertex count")});return f})}if(w){if(G(y)){if(y)return D?new A(D.thisDep,D.contextDep,D.propDep,function(b,g){var e=g.def(b.ELEMENTS,".vertCount-",b.OFFSET);k.optional(function(){b.assert(g,e+">=0","invalid vertex offset/element buffer too small")});return e}):l(function(b,g){return g.def(b.ELEMENTS,".vertCount")});var f=l(function(){return-1});
k.optional(function(){f.MISSING=!0});return f}var n=new A(y.thisDep||D.thisDep,y.contextDep||D.contextDep,y.propDep||D.propDep,function(b,g){var e=b.ELEMENTS;return b.OFFSET?g.def(e,"?",e,".vertCount-",b.OFFSET,":-1"):g.def(e,"?",e,".vertCount:-1")});k.optional(function(){n.DYNAMIC=!0});return n}return t?new A(v.thisDep,v.contextDep,v.propDep,function(b,g){return g.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),u=e("instances",!1);return{elements:y,primitive:I,count:d,
instances:u,offset:D,vao:v,vaoActive:t,elementsActive:w,"static":q}}function da(b,e){var c=b["static"],n=b.dynamic,a={};ca.forEach(function(b){function p(e,g){if(b in c){var f=e(c[b]);a[q]=l(function(){return f})}else if(b in n){var k=n[b];a[q]=m(k,function(b,e){return g(b,e,b.invoke(e,k))})}}var q=P(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return p(function(g){k.commandType(g,
"boolean",b,e.commandStr);return g},function(e,g,f){k.optional(function(){e.assert(g,"typeof "+f+'==="boolean"',"invalid flag "+b,e.commandStr)});return f});case "depth.func":return p(function(g){k.commandParameter(g,u,"invalid "+b,e.commandStr);return u[g]},function(e,g,c){var n=e.constants.compareFuncs;k.optional(function(){e.assert(g,c+" in "+n,"invalid "+b+", must be one of "+f(u))});return g.def(n,"[",c,"]")});case "depth.range":return p(function(b){k.command(g(b)&&2===b.length&&"number"===typeof b[0]&&
"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",e.commandStr);return b},function(b,e,g){k.optional(function(){b.assert(e,b.shared.isArrayLike+"("+g+")&&"+g+".length===2&&typeof "+g+'[0]==="number"&&typeof '+g+'[1]==="number"&&'+g+"[0]<="+g+"[1]","depth range must be a 2d array")});var f=e.def("+",g,"[0]"),c=e.def("+",g,"[1]");return[f,c]});case "blend.func":return p(function(b){k.commandType(b,"object","blend.func",e.commandStr);var g="srcRGB"in b?b.srcRGB:b.src,f="srcAlpha"in b?b.srcAlpha:
b.src,c="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;k.commandParameter(g,y,q+".srcRGB",e.commandStr);k.commandParameter(f,y,q+".srcAlpha",e.commandStr);k.commandParameter(c,y,q+".dstRGB",e.commandStr);k.commandParameter(b,y,q+".dstAlpha",e.commandStr);k.command(-1===W.indexOf(g+", "+c),"unallowed blending combination (srcRGB, dstRGB) = ("+g+", "+c+")",e.commandStr);return[y[g],y[c],y[f],y[b]]},function(g,e,c){function n(p,q){var t=e.def('"',p,q,'" in ',c,"?",c,".",p,q,":",c,".",
p);k.optional(function(){g.assert(e,t+" in "+a,"invalid "+b+"."+p+q+", must be one of "+f(y))});return t}var a=g.constants.blendFuncs;k.optional(function(){g.assert(e,c+"&&typeof "+c+'==="object"',"invalid blend func, must be an object")});var p=n("src","RGB"),q=n("dst","RGB");k.optional(function(){g.assert(e,g.constants.invalidBlendCombinations+".indexOf("+p+'+", "+'+q+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var t=e.def(a,"[",p,"]"),v=e.def(a,"[",n("src","Alpha"),"]"),
w=e.def(a,"[",q,"]"),m=e.def(a,"[",n("dst","Alpha"),"]");return[t,w,v,m]});case "blend.equation":return p(function(g){if("string"===typeof g)return k.commandParameter(g,ua,"invalid "+b,e.commandStr),[ua[g],ua[g]];if("object"===typeof g)return k.commandParameter(g.rgb,ua,b+".rgb",e.commandStr),k.commandParameter(g.alpha,ua,b+".alpha",e.commandStr),[ua[g.rgb],ua[g.alpha]];k.commandRaise("invalid blend.equation",e.commandStr)},function(g,e,c){var n=g.constants.blendEquations,a=e.def(),p=e.def(),q=g.cond("typeof ",
c,'==="string"');k.optional(function(){function e(b,c,k){g.assert(b,k+" in "+n,"invalid "+c+", must be one of "+f(ua))}e(q.then,b,c);g.assert(q["else"],c+"&&typeof "+c+'==="object"',"invalid "+b);e(q["else"],b+".rgb",c+".rgb");e(q["else"],b+".alpha",c+".alpha")});q.then(a,"=",p,"=",n,"[",c,"];");q["else"](a,"=",n,"[",c,".rgb];",p,"=",n,"[",c,".alpha];");e(q);return[a,p]});case "blend.color":return p(function(b){k.command(g(b)&&4===b.length,"blend.color must be a 4d array",e.commandStr);return I(4,
function(g){return+b[g]})},function(b,g,e){k.optional(function(){b.assert(g,b.shared.isArrayLike+"("+e+")&&"+e+".length===4","blend.color must be a 4d array")});return I(4,function(b){return g.def("+",e,"[",b,"]")})});case "stencil.mask":return p(function(b){k.commandType(b,"number",q,e.commandStr);return b|0},function(b,g,e){k.optional(function(){b.assert(g,"typeof "+e+'==="number"',"invalid stencil.mask")});return g.def(e,"|0")});case "stencil.func":return p(function(g){k.commandType(g,"object",
q,e.commandStr);var f=g.cmp||"keep",c=g.ref||0;g="mask"in g?g.mask:-1;k.commandParameter(f,u,b+".cmp",e.commandStr);k.commandType(c,"number",b+".ref",e.commandStr);k.commandType(g,"number",b+".mask",e.commandStr);return[u[f],c,g]},function(b,g,e){var f=b.constants.compareFuncs;k.optional(function(){function c(){b.assert(g,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(e+"&&typeof ",e,'==="object"');c('!("cmp" in ',e,")||(",e,".cmp in ",f,")")});var c=g.def('"cmp" in ',e,"?",f,"[",
e,".cmp]",":",7680),n=g.def(e,".ref|0"),a=g.def('"mask" in ',e,"?",e,".mask|0:-1");return[c,n,a]});case "stencil.opFront":case "stencil.opBack":return p(function(g){k.commandType(g,"object",q,e.commandStr);var f=g.fail||"keep",c=g.zfail||"keep";g=g.zpass||"keep";k.commandParameter(f,H,b+".fail",e.commandStr);k.commandParameter(c,H,b+".zfail",e.commandStr);k.commandParameter(g,H,b+".zpass",e.commandStr);return["stencil.opBack"===b?1029:1028,H[f],H[c],H[g]]},function(g,e,c){function n(p){k.optional(function(){g.assert(e,
'!("'+p+'" in '+c+")||("+c+"."+p+" in "+a+")","invalid "+b+"."+p+", must be one of "+f(H))});return e.def('"',p,'" in ',c,"?",a,"[",c,".",p,"]:",7680)}var a=g.constants.stencilOps;k.optional(function(){g.assert(e,c+"&&typeof "+c+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,n("fail"),n("zfail"),n("zpass")]});case "polygonOffset.offset":return p(function(b){k.commandType(b,"object",q,e.commandStr);var g=b.factor|0;b=b.units|0;k.commandType(g,"number",q+".factor",e.commandStr);
k.commandType(b,"number",q+".units",e.commandStr);return[g,b]},function(g,e,f){k.optional(function(){g.assert(e,f+"&&typeof "+f+'==="object"',"invalid "+b)});var c=e.def(f,".factor|0"),n=e.def(f,".units|0");return[c,n]});case "cull.face":return p(function(b){var g=0;"front"===b?g=1028:"back"===b&&(g=1029);k.command(!!g,q,e.commandStr);return g},function(b,g,e){k.optional(function(){b.assert(g,e+'==="front"||'+e+'==="back"',"invalid cull.face")});return g.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return p(function(b){k.command("number"===
typeof b&&b>=h.lineWidthDims[0]&&b<=h.lineWidthDims[1],"invalid line width, must be a positive number between "+h.lineWidthDims[0]+" and "+h.lineWidthDims[1],e.commandStr);return b},function(b,g,e){k.optional(function(){b.assert(g,"typeof "+e+'==="number"&&'+e+">="+h.lineWidthDims[0]+"&&"+e+"<="+h.lineWidthDims[1],"invalid line width")});return e});case "frontFace":return p(function(b){k.commandParameter(b,ta,q,e.commandStr);return ta[b]},function(b,g,e){k.optional(function(){b.assert(g,e+'==="cw"||'+
e+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return g.def(e+'==="cw"?2304:2305')});case "colorMask":return p(function(b){k.command(g(b)&&4===b.length,"color.mask must be length 4 array",e.commandStr);return b.map(function(b){return!!b})},function(b,g,e){k.optional(function(){b.assert(g,b.shared.isArrayLike+"("+e+")&&"+e+".length===4","invalid color.mask")});return I(4,function(b){return"!!"+e+"["+b+"]"})});case "sample.coverage":return p(function(b){k.command("object"===typeof b&&b,
q,e.commandStr);var g="value"in b?b.value:1;b=!!b.invert;k.command("number"===typeof g&&0<=g&&1>=g,"sample.coverage.value must be a number between 0 and 1",e.commandStr);return[g,b]},function(b,g,e){k.optional(function(){b.assert(g,e+"&&typeof "+e+'==="object"',"invalid sample.coverage")});var f=g.def('"value" in ',e,"?+",e,".value:1"),c=g.def("!!",e,".invert");return[f,c]})}});return a}function Da(b,e){var c=b["static"],n=b.dynamic,a={};f(c).forEach(function(b){var f=c[b],n;if("number"===typeof f||
"boolean"===typeof f)n=l(function(){return f});else if("function"===typeof f){var p=f._reglType;"texture2d"===p||"textureCube"===p?n=l(function(b){return b.link(f)}):"framebuffer"===p||"framebufferCube"===p?(k.command(0<f.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',e.commandStr),n=l(function(b){return b.link(f.color[0])})):k.commandRaise('invalid data for uniform "'+b+'"',e.commandStr)}else g(f)?n=l(function(g){return g.global.def("[",I(f.length,function(e){k.command("number"===
typeof f[e]||"boolean"===typeof f[e],"invalid uniform "+b,g.commandStr);return f[e]}),"]")}):k.commandRaise('invalid or missing data for uniform "'+b+'"',e.commandStr);n.value=f;a[b]=n});f(n).forEach(function(b){var g=n[b];a[b]=m(g,function(b,e){return b.invoke(e,g)})});return a}function Ga(b,e){var c=b["static"],n=b.dynamic,p={};f(c).forEach(function(b){var n=c[b],q=w.id(b),m=new ja;if(a(n))m.state=1,m.buffer=r.getBuffer(r.create(n,34962,!1,!0)),m.type=0;else{var y=r.getBuffer(n);if(y)m.state=1,
m.buffer=y,m.type=0;else if(k.command("object"===typeof n&&n,"invalid data for attribute "+b,e.commandStr),"constant"in n){var D=n.constant;m.buffer="null";m.state=2;"number"===typeof D?m.x=D:(k.command(g(D)&&0<D.length&&4>=D.length,"invalid constant for attribute "+b,e.commandStr),v.forEach(function(b,g){g<D.length&&(m[b]=D[g])}))}else{y=a(n.buffer)?r.getBuffer(r.create(n.buffer,34962,!1,!0)):r.getBuffer(n.buffer);k.command(!!y,'missing buffer for attribute "'+b+'"',e.commandStr);var I=n.offset|
0;k.command(0<=I,'invalid offset for attribute "'+b+'"',e.commandStr);var d=n.stride|0;k.command(0<=d&&256>d,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',e.commandStr);var G=n.size|0;k.command(!("size"in n)||0<G&&4>=G,'invalid size for attribute "'+b+'", must be 1,2,3,4',e.commandStr);var u=!!n.normalized,A=0;"type"in n&&(k.commandParameter(n.type,t,"invalid type for attribute "+b,e.commandStr),A=t[n.type]);var la=n.divisor|0;k.optional(function(){"divisor"in n&&(k.command(0===
la||Z,'cannot specify divisor for attribute "'+b+'", instancing not supported',e.commandStr),k.command(0<=la,'invalid divisor for attribute "'+b+'"',e.commandStr));var g=e.commandStr,c="buffer offset divisor normalized type size stride".split(" ");f(n).forEach(function(e){k.command(0<=c.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+b+'" (valid parameters are '+c+")",g)})});m.buffer=y;m.state=1;m.size=G;m.normalized=u;m.type=A||y.dtype;m.offset=I;m.stride=d;m.divisor=la}}p[b]=l(function(b,
g){var e=b.attribCache;if(q in e)return e[q];var c={isStream:!1};f(m).forEach(function(b){c[b]=m[b]});m.buffer&&(c.buffer=b.link(m.buffer),c.type=c.type||c.buffer+".dtype");return e[q]=c})});f(n).forEach(function(b){var g=n[b];p[b]=m(g,function(e,c){function n(b){c(w[b],"=",a,".",b,"|0;")}var a=e.invoke(c,g),p=e.shared,q=e.constants,t=p.isBufferArgs,m=p.buffer;k.optional(function(){e.assert(c,a+"&&(typeof "+a+'==="object"||typeof '+a+'==="function")&&('+t+"("+a+")||"+m+".getBuffer("+a+")||"+m+".getBuffer("+
a+".buffer)||"+t+"("+a+'.buffer)||("constant" in '+a+"&&(typeof "+a+'.constant==="number"||'+p.isArrayLike+"("+a+".constant))))",'invalid dynamic attribute "'+b+'"')});var w={isStream:c.def(!1)},y=new ja;y.state=1;f(y).forEach(function(b){w[b]=c.def(""+y[b])});var D=w.buffer,I=w.type;c("if(",t,"(",a,")){",w.isStream,"=true;",D,"=",m,".createStream(",34962,",",a,");",I,"=",D,".dtype;","}else{",D,"=",m,".getBuffer(",a,");","if(",D,"){",I,"=",D,".dtype;",'}else if("constant" in ',a,"){",w.state,"=",
2,";","if(typeof "+a+'.constant === "number"){',w[v[0]],"=",a,".constant;",v.slice(1).map(function(b){return w[b]}).join("="),"=0;","}else{",v.map(function(b,g){return w[b]+"="+a+".constant.length>"+g+"?"+a+".constant["+g+"]:0;"}).join(""),"}}else{","if(",t,"(",a,".buffer)){",D,"=",m,".createStream(",34962,",",a,".buffer);","}else{",D,"=",m,".getBuffer(",a,".buffer);","}",I,'="type" in ',a,"?",q.glTypes,"[",a,".type]:",D,".dtype;",w.normalized,"=!!",a,".normalized;");n("size");n("offset");n("stride");
n("divisor");c("}}");c.exit("if(",w.isStream,"){",m,".destroyStream(",D,");","}");return w})});return p}function zb(b){var g=b["static"],e=b.dynamic,c={};f(g).forEach(function(b){var e=g[b];c[b]=l(function(b,g){return"number"===typeof e||"boolean"===typeof e?""+e:b.link(e)})});f(e).forEach(function(b){var g=e[b];c[b]=m(g,function(b,e){return b.invoke(e,g)})});return c}function La(b,g,e,c,n){function a(b){var g=m[b];g&&(y[b]=g)}var p=b["static"],q=b.dynamic;k.optional(function(){function b(e){f(e).forEach(function(b){k.command(0<=
g.indexOf(b),'unknown parameter "'+b+'"',n.commandStr)})}var g="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ca);b(p);b(q)});var t=T(b,g),v=Ob(b,n),m=ab(b,v,n),w=oa(b,n),y=da(b,n),D=B(b,n,t);a("viewport");a(P("scissor.box"));var I=0<f(y).length,v={framebuffer:v,draw:w,shader:D,state:y,dirty:I,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};v.profile=Q(b,n);v.uniforms=Da(e,n);v.drawVAO=v.scopeVAO=w.vao;if(!v.drawVAO&&D.program&&!t&&d.angle_instanced_arrays&&
w["static"].elements){var l=!0;b=D.program.attributes.map(function(b){b=g["static"][b];l=l&&!!b;return b});if(l&&0<b.length){var G=na.getVAO(na.createVAO({attributes:b,elements:w["static"].elements}));v.drawVAO=new A(null,null,null,function(b,g){return b.link(G)});v.useVAO=!0}}t?v.useVAO=!0:v.attributes=Ga(g,n);v.context=zb(c,n);return v}function Y(b,g,e){var c=b.shared.context,n=b.scope();f(e).forEach(function(f){g.save(c,"."+f);var a=e[f].append(b,g);Array.isArray(a)?n(c,".",f,"=[",a.join(),"];"):
n(c,".",f,"=",a,";")});g(n)}function nb(b,g,e,f){var c=b.shared,n=c.gl,a=c.framebuffer,k;fa&&(k=g.def(c.extensions,".webgl_draw_buffers"));var p=b.constants,c=p.drawBuffer,p=p.backBuffer;b=e?e.append(b,g):g.def(a,".next");f||g("if(",b,"!==",a,".cur){");g("if(",b,"){",n,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&g(k,".drawBuffersWEBGL(",c,"[",b,".colorAttachments.length]);");g("}else{",n,".bindFramebuffer(",36160,",null);");fa&&g(k,".drawBuffersWEBGL(",p,");");g("}",a,".cur=",b,";");f||
g("}")}function ga(b,g,e){var c=b.shared,n=c.gl,a=b.current,k=b.next,p=c.current,q=c.next,t=b.cond(p,".dirty");ca.forEach(function(g){g=P(g);if(!(g in e.state)){var f,c;if(g in k){f=k[g];c=a[g];var v=I(M[g].length,function(b){return t.def(f,"[",b,"]")});t(b.cond(v.map(function(b,g){return b+"!=="+c+"["+g+"]"}).join("||")).then(n,".",Aa[g],"(",v,");",v.map(function(b,g){return c+"["+g+"]="+b}).join(";"),";"))}else f=t.def(q,".",g),v=b.cond(f,"!==",p,".",g),t(v),g in za?v(b.cond(f).then(n,".enable(",
za[g],");")["else"](n,".disable(",za[g],");"),p,".",g,"=",f,";"):v(n,".",Aa[g],"(",f,");",p,".",g,"=",f,";")}});0===f(e.state).length&&t(p,".dirty=false;");g(t)}function ra(b,e,n,a){var k=b.shared,p=b.current,q=k.current,t=k.gl;c(f(n)).forEach(function(f){var c=n[f];if(!a||a(c)){var k=c.append(b,e);if(za[f]){var v=za[f];G(c)?k?e(t,".enable(",v,");"):e(t,".disable(",v,");"):e(b.cond(k).then(t,".enable(",v,");")["else"](t,".disable(",v,");"));e(q,".",f,"=",k,";")}else if(g(k)){var w=p[f];e(t,".",Aa[f],
"(",k,");",k.map(function(b,g){return w+"["+g+"]="+b}).join(";"),";")}else e(t,".",Aa[f],"(",k,");",q,".",f,"=",k,";")}})}function cc(b,g){Z&&(b.instancing=g.def(b.shared.extensions,".angle_instanced_arrays"))}function pc(b,g,e,f,c){function n(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function a(b){m=g.def();b(m,"=",n(),";");"string"===typeof c?b(t,".count+=",c,";"):b(t,".count++;");Oa&&(f?(y=g.def(),b(y,"=",w,".getNumPendingQueries();")):b(w,".beginQuery(",t,");"))}
function k(b){b(t,".cpuTime+=",n(),"-",m,";");Oa&&(f?b(w,".pushScopeStats(",y,",",w,".getNumPendingQueries(),",t,");"):b(w,".endQuery();"))}function p(b){var e=g.def(v,".profile");g(v,".profile=",b,";");g.exit(v,".profile=",e,";")}var q=b.shared,t=b.stats,v=q.current,w=q.timer;e=e.profile;var m,y;if(e){if(G(e)){e.enable?(a(g),k(g.exit),p("true")):p("false");return}e=e.append(b,g);p(e)}else e=g.def(v,".profile");q=b.block();a(q);g("if(",e,"){",q,"}");b=b.block();k(b);g.exit("if(",e,"){",b,"}")}function jc(b,
g,e,c,n){function a(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function p(e,f,c){function n(){g("if(!",w,".buffer){",k,".enableVertexAttribArray(",t,");}");var e=c.type,a;a=c.size?g.def(c.size,"||",f):f;g("if(",w,".type!==",e,"||",w,".size!==",a,"||",D.map(function(b){return w+"."+b+"!=="+c[b]}).join("||"),"){",k,".bindBuffer(",34962,",",m,".buffer);",k,".vertexAttribPointer(",[t,a,e,
c.normalized,c.stride,c.offset],");",w,".type=",e,";",w,".size=",a,";",D.map(function(b){return w+"."+b+"="+c[b]+";"}).join(""),"}");Z&&(e=c.divisor,g("if(",w,".divisor!==",e,"){",b.instancing,".vertexAttribDivisorANGLE(",[t,e],");",w,".divisor=",e,";}"))}function a(){g("if(",w,".buffer){",k,".disableVertexAttribArray(",t,");",w,".buffer=null;","}if(",v.map(function(b,g){return w+"."+b+"!=="+y[g]}).join("||"),"){",k,".vertexAttrib4f(",t,",",y,");",v.map(function(b,g){return w+"."+b+"="+y[g]+";"}).join(""),
"}")}var k=q.gl,t=g.def(e,".location"),w=g.def(q.attributes,"[",t,"]");e=c.state;var m=c.buffer,y=[c.x,c.y,c.z,c.w],D=["buffer","normalized","offset","stride"];1===e?n():2===e?a():(g("if(",e,"===",1,"){"),n(),g("}else{"),a(),g("}"))}var q=b.shared;c.forEach(function(c){var q=c.name,t=e.attributes[q],v;if(t){if(!n(t))return;v=t.append(b,g)}else{if(!n(S))return;var w=b.scopeAttrib(q);k.optional(function(){b.assert(g,w+".state","missing attribute "+q)});v={};f(new ja).forEach(function(b){v[b]=g.def(w,
".",b)})}p(b.link(c),a(c.info.type),v)})}function td(b,e,f,c,n,a){for(var p=b.shared,q=p.gl,t,v=0;v<c.length;++v){var m=c[v],y=m.name,D=m.info.type,d=f.uniforms[y],m=b.link(m)+".location",l;if(d){if(!n(d))continue;if(G(d)){var u=d.value;k.command(null!==u&&"undefined"!==typeof u,'missing uniform "'+y+'"',b.commandStr);if(35678===D||35680===D)k.command("function"===typeof u&&(35678===D&&("texture2d"===u._reglType||"framebuffer"===u._reglType)||35680===D&&("textureCube"===u._reglType||"framebufferCube"===
u._reglType)),"invalid texture for uniform "+y,b.commandStr),d=b.link(u._texture||u.color[0]._texture),e(q,".uniform1i(",m,",",d+".bind());"),e.exit(d,".unbind();");else if(35674===D||35675===D||35676===D){k.optional(function(){k.command(g(u),"invalid matrix for uniform "+y,b.commandStr);k.command(35674===D&&4===u.length||35675===D&&9===u.length||35676===D&&16===u.length,"invalid length for matrix uniform "+y,b.commandStr)});var d=b.global.def("new Float32Array(["+Array.prototype.slice.call(u)+"])"),
A=2;35675===D?A=3:35676===D&&(A=4);e(q,".uniformMatrix",A,"fv(",m,",false,",d,");")}else{switch(D){case 5126:k.commandType(u,"number","uniform "+y,b.commandStr);t="1f";break;case 35664:k.command(g(u)&&2===u.length,"uniform "+y,b.commandStr);t="2f";break;case 35665:k.command(g(u)&&3===u.length,"uniform "+y,b.commandStr);t="3f";break;case 35666:k.command(g(u)&&4===u.length,"uniform "+y,b.commandStr);t="4f";break;case 35670:k.commandType(u,"boolean","uniform "+y,b.commandStr);t="1i";break;case 5124:k.commandType(u,
"number","uniform "+y,b.commandStr);t="1i";break;case 35671:k.command(g(u)&&2===u.length,"uniform "+y,b.commandStr);t="2i";break;case 35667:k.command(g(u)&&2===u.length,"uniform "+y,b.commandStr);t="2i";break;case 35672:k.command(g(u)&&3===u.length,"uniform "+y,b.commandStr);t="3i";break;case 35668:k.command(g(u)&&3===u.length,"uniform "+y,b.commandStr);t="3i";break;case 35673:k.command(g(u)&&4===u.length,"uniform "+y,b.commandStr);t="4i";break;case 35669:k.command(g(u)&&4===u.length,"uniform "+y,
b.commandStr),t="4i"}e(q,".uniform",t,"(",m,",",g(u)?Array.prototype.slice.call(u):u,");")}continue}else l=d.append(b,e)}else{if(!n(S))continue;l=e.def(p.uniforms,"[",w.id(y),"]")}35678===D?(k(!Array.isArray(l),"must specify a scalar prop for textures"),e("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}")):35680===D&&(k(!Array.isArray(l),"must specify a scalar prop for cube maps"),e("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}"));k.optional(function(){function g(f,
c){b.assert(e,f,'bad data or missing for uniform "'+y+'".  '+c)}function f(b){k(!Array.isArray(l),"must not specify an array type for uniform");g("typeof "+l+'==="'+b+'"',"invalid type, expected "+b)}function c(e,f){Array.isArray(l)?k(l.length===e,"must have length "+e):g(p.isArrayLike+"("+l+")&&"+l+".length==="+e,"invalid vector, should have length "+e,b.commandStr)}function n(e){k(!Array.isArray(l),"must not specify a value type");g("typeof "+l+'==="function"&&'+l+'._reglType==="texture'+(3553===
e?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(D){case 5124:f("number");break;case 35667:c(2,"number");break;case 35668:c(3,"number");break;case 35669:c(4,"number");break;case 5126:f("number");break;case 35664:c(2,"number");break;case 35665:c(3,"number");break;case 35666:c(4,"number");break;case 35670:f("boolean");break;case 35671:c(2,"boolean");break;case 35672:c(3,"boolean");break;case 35673:c(4,"boolean");break;case 35674:c(4,"number");break;case 35675:c(9,"number");break;case 35676:c(16,
"number");break;case 35678:n(3553);break;case 35680:n(34067)}});d=1;switch(D){case 35678:case 35680:d=e.def(l,"._texture");e(q,".uniform1i(",m,",",d,".bind());");e.exit(d,".unbind();");continue;case 5124:case 35670:t="1i";break;case 35667:case 35671:t="2i";d=2;break;case 35668:case 35672:t="3i";d=3;break;case 35669:case 35673:t="4i";d=4;break;case 5126:t="1f";break;case 35664:t="2f";d=2;break;case 35665:t="3f";d=3;break;case 35666:t="4f";d=4;break;case 35674:t="Matrix2fv";break;case 35675:t="Matrix3fv";
break;case 35676:t="Matrix4fv"}if("M"===t.charAt(0)){e(q,".uniform",t,"(",m,",");var m=Math.pow(D-35674+2,2),la=b.global.def("new Float32Array(",m,")");Array.isArray(l)?e("false,(",I(m,function(b){return la+"["+b+"]="+l[b]}),",",la,")"):e("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",I(m,function(b){return la+"["+b+"]="+l+"["+b+"]"}),",",la,")");e(");")}else{if(1<d){for(var A=[],K=[],W=0;W<d;++W)Array.isArray(l)?K.push(l[W]):K.push(e.def(l+"["+W+"]")),a&&A.push(e.def());a&&
e("if(!",b.batchId,"||",A.map(function(b,g){return b+"!=="+K[g]}).join("||"),"){",A.map(function(b,g){return b+"="+K[g]+";"}).join(""));e(q,".uniform",t,"(",m,",",K.join(","),");")}else k(!Array.isArray(l),"uniform value must not be an array"),a&&(d=e.def(),e("if(!",b.batchId,"||",d,"!==",l,"){",d,"=",l,";")),e(q,".uniform",t,"(",m,",",l,");");a&&e("}")}}}function zc(b,g,e,f){function c(n){var a=v[n];return a?a.contextDep&&f.contextDynamic||a.propDep?a.append(b,e):a.append(b,g):g.def(t,".",n)}function n(){function b(){e(l,
".drawElementsInstancedANGLE(",[m,D,I,y+"<<(("+I+"-5121)>>1)",d],");")}function g(){e(l,".drawArraysInstancedANGLE(",[m,y,D,d],");")}w&&"null"!==w?u?b():(e("if(",w,"){"),b(),e("}else{"),g(),e("}")):g()}function a(){function b(){e(q+".drawElements("+[m,D,I,y+"<<(("+I+"-5121)>>1)"]+");")}function g(){e(q+".drawArrays("+[m,y,D]+");")}w&&"null"!==w?u?b():(e("if(",w,"){"),b(),e("}else{"),g(),e("}")):g()}var p=b.shared,q=p.gl,t=p.draw,v=f.draw,w=function(){var c=v.elements,n=g;if(c){if(c.contextDep&&f.contextDynamic||
c.propDep)n=e;c=c.append(b,n);v.elementsActive&&n("if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=n.def(),n(c,"=",t,".","elements",";","if(",c,"){",q,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",p.vao,".currentVAO){",c,"=",b.shared.elements+".getElements("+p.vao,".currentVAO.elements);",sa?"":"if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),m=c("primitive"),y=c("offset"),D=function(){var c=v.count,n,a=g;if(c){if(c.contextDep&&f.contextDynamic||
c.propDep)a=e;n=c.append(b,a);k.optional(function(){c.MISSING&&b.assert(g,"false","missing vertex count");c.DYNAMIC&&b.assert(a,n+">=0","missing vertex count")})}else n=a.def(t,".","count"),k.optional(function(){b.assert(a,n+">=0","missing vertex count")});return n}();if("number"===typeof D){if(0===D)return}else e("if(",D,"){"),e.exit("}");var d,l;Z&&(d=c("instances"),l=b.instancing);var I=w+".type",u=v.elements&&G(v.elements)&&!v.vaoActive;Z&&("number"!==typeof d||0<=d)?"string"===typeof d?(e("if(",
d,">0){"),n(),e("}else if(",d,"<0){"),a(),e("}")):n():a()}function ba(b,g,e,c,f){var n=pa();f=n.proc("body",f);k.optional(function(){n.commandStr=g.commandStr;n.command=n.link(g.commandStr)});Z&&(n.instancing=f.def(n.shared.extensions,".angle_instanced_arrays"));b(n,f,e,c);return n.compile().body}function N(b,g,e,f){cc(b,g);e.useVAO?e.drawVAO?g(b.shared.vao,".setVAO(",e.drawVAO.append(b,g),");"):g(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(g(b.shared.vao,".setVAO(null);"),jc(b,g,e,f.attributes,
function(){return!0}));td(b,g,e,f.uniforms,function(){return!0},!1);zc(b,g,g,e)}function ha(b,g){var e=b.proc("draw",1);cc(b,e);Y(b,e,g.context);nb(b,e,g.framebuffer);ga(b,e,g);ra(b,e,g.state);pc(b,e,g,!1,!0);var c=g.shader.progVar.append(b,e);e(b.shared.gl,".useProgram(",c,".program);");if(g.shader.program)N(b,e,g,g.shader.program);else{e(b.shared.vao,".setVAO(null);");var n=b.global.def("{}"),a=e.def(c,".id"),k=e.def(n,"[",a,"]");e(b.cond(k).then(k,".call(this,a0);")["else"](k,"=",n,"[",a,"]=",
b.link(function(e){return ba(N,b,g,e,1)}),"(",c,");",k,".call(this,a0);"))}0<f(g.state).length&&e(b.shared.current,".dirty=true;");b.shared.vao&&e(b.shared.vao,".setVAO(null);")}function Ha(b,g,e,f){function c(){return!0}b.batchId="a1";cc(b,g);jc(b,g,e,f.attributes,c);td(b,g,e,f.uniforms,c,!1);zc(b,g,g,e)}function tb(b,g,e,f){function c(b){return b.contextDep&&a||b.propDep}function n(b){return!c(b)}cc(b,g);var a=e.contextDep,k=g.def(),p=g.def();b.shared.props=p;b.batchId=k;var q=b.scope(),t=b.scope();
g(q.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",p,"=","a0","[",k,"];",t,"}",q.exit);e.needsContext&&Y(b,t,e.context);e.needsFramebuffer&&nb(b,t,e.framebuffer);ra(b,t,e.state,c);e.profile&&c(e.profile)&&pc(b,t,e,!1,!0);f?(e.useVAO?e.drawVAO?c(e.drawVAO)?t(b.shared.vao,".setVAO(",e.drawVAO.append(b,t),");"):q(b.shared.vao,".setVAO(",e.drawVAO.append(b,q),");"):q(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(q(b.shared.vao,".setVAO(null);"),jc(b,q,e,f.attributes,n),jc(b,t,e,f.attributes,c)),
td(b,q,e,f.uniforms,n,!1),td(b,t,e,f.uniforms,c,!0),zc(b,q,t,e)):(g=b.global.def("{}"),f=e.shader.progVar.append(b,t),p=t.def(f,".id"),q=t.def(g,"[",p,"]"),t(b.shared.gl,".useProgram(",f,".program);","if(!",q,"){",q,"=",g,"[",p,"]=",b.link(function(g){return ba(Ha,b,e,g,2)}),"(",f,");}",q,".call(this,a0[",k,"],",k,");"))}function cd(b,e){function g(b){return b.contextDep&&n||b.propDep}var c=b.proc("batch",2);b.batchId="0";cc(b,c);var n=!1,a=!0;f(e.context).forEach(function(b){n=n||e.context[b].propDep});
n||(Y(b,c,e.context),a=!1);var k=e.framebuffer,p=!1;k?(k.propDep?n=p=!0:k.contextDep&&n&&(p=!0),p||nb(b,c,k)):nb(b,c,null);e.state.viewport&&e.state.viewport.propDep&&(n=!0);ga(b,c,e);ra(b,c,e.state,function(b){return!g(b)});e.profile&&g(e.profile)||pc(b,c,e,!1,"a1");e.contextDep=n;e.needsContext=a;e.needsFramebuffer=p;a=e.shader.progVar;if(a.contextDep&&n||a.propDep)tb(b,c,e,null);else if(a=a.append(b,c),c(b.shared.gl,".useProgram(",a,".program);"),e.shader.program)tb(b,c,e,e.shader.program);else{c(b.shared.vao,
".setVAO(null);");var k=b.global.def("{}"),p=c.def(a,".id"),q=c.def(k,"[",p,"]");c(b.cond(q).then(q,".call(this,a0,a1);")["else"](q,"=",k,"[",p,"]=",b.link(function(g){return ba(tb,b,e,g,2)}),"(",a,");",q,".call(this,a0,a1);"))}0<f(e.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function Nc(b,e){function n(g){var c=e.shader[g];c&&a.set(k.shader,"."+g,c.append(b,a))}var a=b.proc("scope",3);b.batchId="a2";var k=b.shared,p=k.current;Y(b,a,e.context);
e.framebuffer&&e.framebuffer.append(b,a);c(f(e.state)).forEach(function(c){var f=e.state[c].append(b,a);g(f)?f.forEach(function(e,g){a.set(b.next[c],"["+g+"]",e)}):a.set(k.next,"."+c,f)});pc(b,a,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(g){var c=e.draw[g];c&&a.set(k.draw,"."+g,""+c.append(b,a))});f(e.uniforms).forEach(function(g){var c=e.uniforms[g].append(b,a);Array.isArray(c)&&(c="["+c.join()+"]");a.set(k.uniforms,"["+w.id(g)+"]",c)});f(e.attributes).forEach(function(g){var c=
e.attributes[g].append(b,a),n=b.scopeAttrib(g);f(new ja).forEach(function(b){a.set(n,"."+b,c[b])})});e.scopeVAO&&a.set(k.vao,".targetVAO",e.scopeVAO.append(b,a));n("vert");n("frag");0<f(e.state).length&&(a(p,".dirty=true;"),a.exit(p,".dirty=true;"));a("a1(",b.shared.context,",a0,",b.batchId,");")}function L(b){if("object"===typeof b&&!g(b)){for(var e=f(b),c=0;c<e.length;++c)if(p.isDynamic(b[e[c]]))return!0;return!1}}function E(b,e,g){function c(b,e){k.forEach(function(g){var c=n[g];p.isDynamic(c)&&
(c=b.invoke(e,c),e(w,".",g,"=",c,";"))})}var n=e["static"][g];if(n&&L(n)){var a=b.global,k=f(n),q=!1,t=!1,v=!1,w=b.global.def("{}");k.forEach(function(e){var g=n[e];if(p.isDynamic(g))"function"===typeof g&&(g=n[e]=p.unbox(g)),e=m(g,null),q=q||e.thisDep,v=v||e.propDep,t=t||e.contextDep;else{a(w,".",e,"=");switch(typeof g){case "number":a(g);break;case "string":a('"',g,'"');break;case "object":Array.isArray(g)&&a("[",g.join(),"]");break;default:a(b.link(g))}a(";")}});e.dynamic[g]=new p.DynamicVariable(4,
{thisDep:q,contextDep:t,propDep:v,ref:w,append:c});delete e["static"][g]}}var ja=na.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};d.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var Z=d.angle_instanced_arrays,fa=d.webgl_draw_buffers,sa=d.oes_vertex_array_object,M={dirty:!0,profile:X.profile},F={},ca=[],za={},Aa={};O("dither",3024);O("blend.enable",3042);U("blend.color","blendColor",[0,0,0,0]);U("blend.equation","blendEquationSeparate",[32774,32774]);U("blend.func","blendFuncSeparate",
[1,0,1,0]);O("depth.enable",2929,!0);U("depth.func","depthFunc",513);U("depth.range","depthRange",[0,1]);U("depth.mask","depthMask",!0);U("colorMask","colorMask",[!0,!0,!0,!0]);O("cull.enable",2884);U("cull.face","cullFace",1029);U("frontFace","frontFace",2305);U("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);U("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);U("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);U("stencil.mask",
"stencilMask",-1);U("stencil.func","stencilFunc",[519,0,-1]);U("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);U("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);O("scissor.enable",3089);U("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);U("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var Ka={gl:e,context:ea,strings:w,next:F,current:M,draw:Cb,elements:K,buffer:r,shader:Qa,attributes:na.state,vao:na,uniforms:ma,framebuffer:aa,
extensions:d,timer:Oa,isBufferArgs:a},C={primTypes:n,compareFuncs:u,blendFuncs:y,blendEquations:ua,stencilOps:H,glTypes:t,orientationType:ta};k.optional(function(){Ka.isArrayLike=g});fa&&(C.backBuffer=[1029],C.drawBuffer=I(h.maxDrawbuffers,function(b){return 0===b?[0]:I(b,function(b){return 36064+b})}));var mc=0;return{next:F,current:M,procs:function(){var b=pa(),e=b.proc("poll"),c=b.proc("refresh"),n=b.block();e(n);c(n);var a=b.shared,k=a.gl,p=a.next,q=a.current;n(q,".dirty=false;");nb(b,e);nb(b,
c,null,!0);var t;Z&&(t=b.link(Z));d.oes_vertex_array_object&&c(b.link(d.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var v=0;v<h.maxAttributes;++v){var w=c.def(a.attributes,"[",v,"]"),m=b.cond(w,".buffer");m.then(k,".enableVertexAttribArray(",v,");",k,".bindBuffer(",34962,",",w,".buffer.buffer);",k,".vertexAttribPointer(",v,",",w,".size,",w,".type,",w,".normalized,",w,".stride,",w,".offset);")["else"](k,".disableVertexAttribArray(",v,");",k,".vertexAttrib4f(",v,",",w,".x,",w,".y,",w,
".z,",w,".w);",w,".buffer=null;");c(m);Z&&c(t,".vertexAttribDivisorANGLE(",v,",",w,".divisor);")}c(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");f(za).forEach(function(g){var f=za[g],a=n.def(p,".",g),t=b.block();t("if(",a,"){",k,".enable(",f,")}else{",k,".disable(",f,")}",q,".",g,"=",a,";");c(t);e("if(",a,"!==",q,".",g,"){",t,"}")});f(Aa).forEach(function(f){var a=Aa[f],t=M[f],v,w,m=b.block();m(k,".",a,"(");g(t)?(a=t.length,v=b.global.def(p,".",f),w=b.global.def(q,
".",f),m(I(a,function(b){return v+"["+b+"]"}),");",I(a,function(b){return w+"["+b+"]="+v+"["+b+"];"}).join("")),e("if(",I(a,function(b){return v+"["+b+"]!=="+w+"["+b+"]"}).join("||"),"){",m,"}")):(v=n.def(p,".",f),w=n.def(q,".",f),m(v,");",q,".",f,"=",v,";"),e("if(",v,"!==",w,"){",m,"}"));c(m)});return b.compile()}(),compile:function(e,g,c,n,a){var k=pa();k.stats=k.link(a);f(g["static"]).forEach(function(b){E(k,g,b)});D.forEach(function(b){E(k,e,b)});var p=La(e,g,c,n,k);ha(k,p);Nc(k,p);cd(k,p);return b(k.compile(),
{destroy:function(){p.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(d,h,r){function a(c,a){this.id=m++;this.type=c;this.data=a}function c(f){if(0===f.length)return[];var a=f.charAt(0),b=f.charAt(f.length-1);if(1<f.length&&a===b&&('"'===a||"'"===
a))return['"'+f.substr(1,f.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(f))return c(f.substr(0,a.index)).concat(c(a[1])).concat(c(f.substr(a.index+a[0].length)));a=f.split(".");if(1===a.length)return['"'+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];f=[];for(b=0;b<a.length;++b)f=f.concat(c(a[b]));return f}function A(f){return"["+c(f).join("][")+"]"}function G(c,k){if("function"===typeof c)return new a(0,c);if("number"===typeof c||
"boolean"===typeof c)return new a(5,c);if(Array.isArray(c))return new a(6,c.map(function(b,c){return G(b,k+"["+c+"]")}));if(c instanceof a)return c;l(!1,"invalid option type in uniform "+k)}var l=d("./util/check"),m=0;h.exports={DynamicVariable:a,define:function(c,k){return new a(c,A(k+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof a},unbox:G,accessor:A}},{"./util/check":21}],10:[function(d,h,r){var a=d("./util/check"),c=d("./util/is-typed-array"),A=d("./util/is-ndarray"),
G=d("./util/values"),l=d("./constants/primitives.json"),m=d("./constants/usage.json");h.exports=function(f,k,b,q){function d(b){this.id=p++;g[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function w(e,g,n,p,q,t,w){e.buffer.bind();var m;g?((m=w)||c(g)&&(!A(g)||c(g.data))||(m=k.oes_element_index_uint?5125:5123),b._initBuffer(e.buffer,g,n,m,3)):(f.bufferData(34963,t,n),e.buffer.dtype=m||5121,e.buffer.usage=n,e.buffer.dimension=3,e.buffer.byteLength=t);m=w;if(!w){switch(e.buffer.dtype){case 5121:case 5120:m=
5121;break;case 5123:case 5122:m=5123;break;case 5125:case 5124:m=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=m}e.type=m;a(5125!==m||!!k.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=q;0>g&&(g=e.buffer.byteLength,5123===m?g>>=1:5125===m&&(g>>=2));e.vertCount=g;g=p;0>p&&(g=4,p=e.buffer.dimension,1===p&&(g=0),2===p&&(g=1),3===p&&(g=4));e.primType=g}function e(b){q.elementsCount--;a(null!==b.buffer,"must not double destroy elements");
delete g[b.id];b.buffer.destroy();b.buffer=null}var g={},p=0,n={uint8:5121,uint16:5123};k.oes_element_index_uint&&(n.uint32=5125);d.prototype.bind=function(){this.buffer.bind()};var t=[];return{create:function(g,f){function k(b){if(b)if("number"===typeof b)p(b),t.primType=4,t.vertCount=b|0,t.type=5121;else{var e=null,g=35044,f=-1,q=-1,v=0,D=0;if(Array.isArray(b)||c(b)||A(b))e=b;else if(a.type(b,"object","invalid arguments for elements"),"data"in b&&(e=b.data,a(Array.isArray(e)||c(e)||A(e),"invalid data for element buffer")),
"usage"in b&&(a.parameter(b.usage,m,"invalid element buffer usage"),g=m[b.usage]),"primitive"in b&&(a.parameter(b.primitive,l,"invalid element buffer primitive"),f=l[b.primitive]),"count"in b&&(a("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),q=b.count|0),"type"in b&&(a.parameter(b.type,n,"invalid buffer type"),D=n[b.type]),"length"in b)v=b.length|0;else if(v=q,5123===D||5122===D)v*=2;else if(5125===D||5124===D)v*=4;w(t,e,g,f,q,v,D)}else p(),t.primType=4,t.vertCount=0,
t.type=5121;return k}var p=b.create(null,34963,!0),t=new d(p._buffer);q.elementsCount++;k(g);k._reglType="elements";k._elements=t;k.subdata=function(b,e){p.subdata(b,e);return k};k.destroy=function(){e(t)};return k},createStream:function(e){var g=t.pop();g||(g=new d(b.create(null,34963,!0,!1)._buffer));w(g,e,35040,-1,-1,0,0);return g},destroyStream:function(b){t.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof d?b._elements:null},clear:function(){G(g).forEach(e)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(d,h,r){var a=d("./util/sorted-object-keys"),c=d("./util/check");h.exports=function(d,G){function l(b){c.type(b,"string","extension name must be string");b=b.toLowerCase();var f;try{f=m[b]=d.getExtension(b)}catch(a){}return!!f}for(var m={},f=0;f<G.extensions.length;++f){var k=G.extensions[f];if(!l(k))return G.onDestroy(),G.onDone('"'+k+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}G.optionalExtensions.forEach(l);return{extensions:m,restore:function(){a(m).forEach(function(b){if(m[b]&&!l(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(d,h,r){var a=d("./util/check"),c=d("./util/values"),A=d("./util/extend"),G=[6407,6408],l=[];l[6408]=4;l[6407]=3;var m=[];m[5121]=1;m[5126]=4;m[36193]=2;var f=[32854,32855,36194,35907,34842,34843,34836],k={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};h.exports=function(b,q,d,w,e,g){function p(b,e,g){this.target=b;this.texture=e;this.renderbuffer=g;var c=b=0;e?(b=e.width,c=e.height):g&&(b=g.width,c=g.height);this.width=b;this.height=c}function n(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function t(b,e,g){if(b){if(b.texture){b=b.texture._texture;var c=Math.max(1,b.height);a(Math.max(1,b.width)===e&&c===g,"inconsistent width/height for supplied texture")}else b=
b.renderbuffer._renderbuffer,a(b.width===e&&b.height===g,"inconsistent width/height for renderbuffer");b.refCount+=1}}function v(e,g){g&&(g.texture?b.framebufferTexture2D(36160,e,g.target,g.texture._texture.texture,0):b.framebufferRenderbuffer(36160,e,36161,g.renderbuffer._renderbuffer.renderbuffer))}function D(b){var e=3553,g=null,c=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(e=b.target|0));a.type(f,"function","invalid attachment data");b=f._reglType;"texture2d"===b?(g=f,a(3553===e)):
"textureCube"===b?(g=f,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===b?(c=f,e=36161):a.raise("invalid regl object for attachment");return new p(e,g,c)}function y(b,g,c,f,n){if(c)return b=w.create2D({width:b,height:g,format:f,type:n}),b._texture.refCount=0,new p(3553,b,null);b=e.create({width:b,height:g,format:f});b._renderbuffer.refCount=0;return new p(36161,null,b)}function W(b){return b&&(b.texture||b.renderbuffer)}function u(b,e,g){b&&(b.texture?b.texture.resize(e,g):b.renderbuffer&&
b.renderbuffer.resize(e,g),b.width=e,b.height=g)}function H(){this.id=K++;ka[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function la(b){b.colorAttachments.forEach(n);n(b.depthAttachment);n(b.stencilAttachment);n(b.depthStencilAttachment)}function ta(e){var c=e.framebuffer;a(c,"must not double destroy framebuffer");b.deleteFramebuffer(c);e.framebuffer=null;g.framebufferCount--;
delete ka[e.id]}function h(e){var g;b.bindFramebuffer(36160,e.framebuffer);var c=e.colorAttachments;for(g=0;g<c.length;++g)v(36064+g,c[g]);for(g=c.length;g<d.maxColorAttachments;++g)b.framebufferTexture2D(36160,36064+g,3553,null,0);b.framebufferTexture2D(36160,33306,3553,null,0);b.framebufferTexture2D(36160,36096,3553,null,0);b.framebufferTexture2D(36160,36128,3553,null,0);v(36096,e.depthAttachment);v(36128,e.stencilAttachment);v(33306,e.depthStencilAttachment);e=b.checkFramebufferStatus(36160);b.isContextLost()||
36053===e||a.raise("framebuffer configuration not supported, status = "+k[e]);b.bindFramebuffer(36160,z.next?z.next.framebuffer:null);z.cur=z.next;b.getError()}function R(b,e){function c(b,e){var g;a(z.next!==n,"can not update framebuffer which is currently in use");var k=0,p=0,v=!0,w=!0;g=null;var u=!0,A="rgba",K="uint8",H=1,ta=null,ka=null,R=null,aa=!1;if("number"===typeof b)k=b|0,p=e|0||k;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(p=b.shape,a(Array.isArray(p)&&
2<=p.length,"invalid shape for framebuffer"),k=p[0],p=p[1]):("radius"in b&&(k=p=b.radius),"width"in b&&(k=b.width),"height"in b&&(p=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||q.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(H=b.colorCount|0,a(0<H,"invalid color buffer count"));"colorTexture"in b&&(u=!!b.colorTexture,A="rgba4");if("colorType"in b){K=b.colorType;if(u)a(q.oes_texture_float||!("float"===K||"float32"===
K),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(q.oes_texture_half_float||!("half float"===K||"float16"===K),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===K||"float16"===K)a(q.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),A="rgba16f";else if("float"===K||"float32"===K)a(q.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
A="rgba32f";a.oneOf(K,V,"invalid color type")}"colorFormat"in b&&(A=b.colorFormat,0<=r.indexOf(A)?u=!0:0<=J.indexOf(A)?u=!1:a.optional(function(){if(u)a.oneOf(b.colorFormat,r,"invalid color format for texture");else a.oneOf(b.colorFormat,J,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)aa=!(!b.depthTexture&&!b.depthStencilTexture),a(!aa||q.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?v=b.depth:
(ta=b.depth,w=!1));"stencil"in b&&("boolean"===typeof b.stencil?w=b.stencil:(ka=b.stencil,v=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?v=w=b.depthStencil:(R=b.depthStencil,w=v=!1))}else k=p=1;var ma=null,Ga=null,zb=null,La=null;if(Array.isArray(g))ma=g.map(D);else if(g)ma=[D(g)];else for(ma=Array(H),g=0;g<H;++g)ma[g]=y(k,p,u,A,K);a(q.webgl_draw_buffers||1>=ma.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(ma.length<=d.maxColorAttachments,
"too many color attachments, not supported");k=k||ma[0].width;p=p||ma[0].height;ta?Ga=D(ta):v&&!w&&(Ga=y(k,p,aa,"depth","uint32"));ka?zb=D(ka):w&&!v&&(zb=y(k,p,!1,"stencil","uint8"));R?La=D(R):!ta&&!ka&&w&&v&&(La=y(k,p,aa,"depth stencil","depth stencil"));a(1>=!!ta+!!ka+!!R,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");v=null;for(g=0;g<ma.length;++g)t(ma[g],k,p),a(!ma[g]||ma[g].texture&&0<=G.indexOf(ma[g].texture._texture.format)||ma[g].renderbuffer&&0<=f.indexOf(ma[g].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+g+" is invalid"),ma[g]&&ma[g].texture&&(w=l[ma[g].texture._texture.format]*m[ma[g].texture._texture.type],null===v?v=w:a(v===w,"all color attachments much have the same number of bits per pixel."));t(Ga,k,p);a(!Ga||Ga.texture&&6402===Ga.texture._texture.format||Ga.renderbuffer&&33189===Ga.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");t(zb,k,p);a(!zb||zb.renderbuffer&&36168===zb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
t(La,k,p);a(!La||La.texture&&34041===La.texture._texture.format||La.renderbuffer&&34041===La.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");la(n);n.width=k;n.height=p;n.colorAttachments=ma;n.depthAttachment=Ga;n.stencilAttachment=zb;n.depthStencilAttachment=La;c.color=ma.map(W);c.depth=W(Ga);c.stencil=W(zb);c.depthStencil=W(La);c.width=n.width;c.height=n.height;h(n);return c}var n=new H;g.framebufferCount++;c(b,e);return A(c,{resize:function(b,g){a(z.next!==
n,"can not resize a framebuffer which is currently in use");var e=Math.max(b|0,1),f=Math.max(g|0||e,1);if(e===n.width&&f===n.height)return c;for(var k=n.colorAttachments,p=0;p<k.length;++p)u(k[p],e,f);u(n.depthAttachment,e,f);u(n.stencilAttachment,e,f);u(n.depthStencilAttachment,e,f);n.width=c.width=e;n.height=c.height=f;h(n);return c},_reglType:"framebuffer",_framebuffer:n,destroy:function(){ta(n);la(n)},use:function(b){z.setFBO({framebuffer:c},b)}})}var z={cur:null,next:null,dirty:!1,setFBO:null},
r=["rgba"],J=["rgba4","rgb565","rgb5 a1"];q.ext_srgb&&J.push("srgba");q.ext_color_buffer_half_float&&J.push("rgba16f","rgb16f");q.webgl_color_buffer_float&&J.push("rgba32f");var V=["uint8"];q.oes_texture_half_float&&V.push("half float","float16");q.oes_texture_float&&V.push("float","float32");var K=0,ka={};return A(z,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof H)?b:null},create:R,createCube:function(b){function e(b){var c;a(0>
g.indexOf(z.next),"can not update framebuffer which is currently in use");var f={color:null},n=0,k=null;c="rgba";var p="uint8",t=1;if("number"===typeof b)n=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(n=b.shape,a(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),a(n[0]===n[1],"cube framebuffer must be square"),n=n[0]):("radius"in b&&(n=b.radius|0),"width"in b?(n=b.width|0,"height"in b&&a(b.height===n,"must be square")):"height"in b&&(n=b.height|0));
if("color"in b||"colors"in b)k=b.color||b.colors,Array.isArray(k)&&a(1===k.length||q.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in b&&(t=b.colorCount|0,a(0<t,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,V,"invalid color type"),p=b.colorType),"colorFormat"in b&&(c=b.colorFormat,a.oneOf(b.colorFormat,r,"invalid color format for texture")));"depth"in b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=
b.depthStencil)}else n=1;if(k)if(Array.isArray(k))for(b=[],c=0;c<k.length;++c)b[c]=k[c];else b=[k];else for(b=Array(t),k={radius:n,format:c,type:p},c=0;c<t;++c)b[c]=w.createCube(k);f.color=Array(b.length);for(c=0;c<b.length;++c)t=b[c],a("function"===typeof t&&"textureCube"===t._reglType,"invalid cube map"),n=n||t.width,a(t.width===n&&t.height===n,"invalid cube map shape"),f.color[c]={target:34069,data:b[c]};for(c=0;6>c;++c){for(t=0;t<b.length;++t)f.color[t].target=34069+c;0<c&&(f.depth=g[0].depth,
f.stencil=g[0].stencil,f.depthStencil=g[0].depthStencil);if(g[c])g[c](f);else g[c]=R(f)}return A(e,{width:n,height:n,color:b})}var g=Array(6);e(b);return A(e,{faces:g,resize:function(b){var c=b|0;a(0<c&&c<=d.maxCubeMapSize,"invalid radius for cube fbo");if(c===e.width)return e;var f=e.color;for(b=0;b<f.length;++b)f[b].resize(c);for(b=0;6>b;++b)g[b].resize(c);e.width=e.height=c;return e},_reglType:"framebufferCube",destroy:function(){g.forEach(function(b){b.destroy()})}})},clear:function(){c(ka).forEach(ta)},
restore:function(){z.cur=null;z.next=null;z.dirty=!0;c(ka).forEach(function(e){e.framebuffer=b.createFramebuffer();h(e)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(d,h,r){var a=d("./util/sorted-object-keys"),c=d("./util/pool");h.exports=function(d,G){var l=1;G.ext_texture_filter_anisotropic&&(l=d.getParameter(34047));var m=1,f=1;G.webgl_draw_buffers&&(m=d.getParameter(34852),f=d.getParameter(36063));var k=!!G.oes_texture_float;if(k){k=d.createTexture();d.bindTexture(3553,
k);d.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var b=d.createFramebuffer();d.bindFramebuffer(36160,b);d.framebufferTexture2D(36160,36064,3553,k,0);d.bindTexture(3553,null);if(36053!==d.checkFramebufferStatus(36160))k=!1;else{d.viewport(0,0,1,1);d.clearColor(1,0,0,1);d.clear(16384);var q=c.allocType(5126,4);d.readPixels(0,0,1,1,6408,5126,q);d.getError()?k=!1:(d.deleteFramebuffer(b),d.deleteTexture(k),k=1===q[0]);c.freeType(q)}}q=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(q=d.createTexture(),b=c.allocType(5121,36),d.activeTexture(33984),d.bindTexture(34067,q),d.texImage2D(34069,0,6408,3,3,0,6408,5121,b),c.freeType(b),d.bindTexture(34067,null),d.deleteTexture(q),q=!d.getError());return{colorBits:[d.getParameter(3410),d.getParameter(3411),d.getParameter(3412),d.getParameter(3413)],depthBits:d.getParameter(3414),stencilBits:d.getParameter(3415),subpixelBits:d.getParameter(3408),extensions:a(G).filter(function(b){return!!G[b]}),
maxAnisotropic:l,maxDrawbuffers:m,maxColorAttachments:f,pointSizeDims:d.getParameter(33901),lineWidthDims:d.getParameter(33902),maxViewportDims:d.getParameter(3386),maxCombinedTextureUnits:d.getParameter(35661),maxCubeMapSize:d.getParameter(34076),maxRenderbufferSize:d.getParameter(34024),maxTextureUnits:d.getParameter(34930),maxTextureSize:d.getParameter(3379),maxAttributes:d.getParameter(34921),maxVertexUniforms:d.getParameter(36347),maxVertexTextureUnits:d.getParameter(35660),maxVaryingVectors:d.getParameter(36348),
maxFragmentUniforms:d.getParameter(36349),glsl:d.getParameter(35724),renderer:d.getParameter(7937),vendor:d.getParameter(7936),version:d.getParameter(7938),readFloat:k,npotTextureCube:q}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(d,h,r){var a=d("./util/check"),c=d("./util/is-typed-array");h.exports=function(d,G,l,m,f,k,b){function q(q){var e;null===G.next?(a(f.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(a(null!==G.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=G.next.colorAttachments[0].texture._texture.type,a.optional(function(){k.oes_texture_float?(a(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&a(b.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var g=0,p=0,n=m.framebufferWidth,t=m.framebufferHeight,v=null;c(q)?v=q:q&&(a.type(q,"object","invalid arguments to regl.read()"),g=q.x|0,p=q.y|0,a(0<=g&&g<m.framebufferWidth,"invalid x offset for regl.read"),a(0<=p&&p<m.framebufferHeight,"invalid y offset for regl.read"),n=(q.width||m.framebufferWidth-g)|0,t=(q.height||m.framebufferHeight-p)|0,v=q.data||null);v&&(5121===e?a(v instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&a(v instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<n&&n+g<=m.framebufferWidth,"invalid width for read pixels");a(0<t&&t+p<=m.framebufferHeight,"invalid height for read pixels");l();q=n*t*4;v||(5121===e?v=new Uint8Array(q):5126===e&&(v=v||new Float32Array(q)));a.isTypedArray(v,"data buffer for regl.read() must be a typedarray");a(v.byteLength>=q,"data buffer for regl.read() too small");d.pixelStorei(3333,4);d.readPixels(g,p,n,t,6408,e,v);return v}function I(b){var e;
G.setFBO({framebuffer:b.framebuffer},function(){e=q(b)});return e}return function(b){return b&&"framebuffer"in b?I(b):q(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(d,h,r){var a=d("./util/sorted-object-keys"),c=d("./util/check"),A=d("./util/values"),G=[];G[32854]=2;G[32855]=2;G[36194]=2;G[33189]=2;G[36168]=1;G[34041]=4;G[35907]=4;G[34836]=16;G[34842]=8;G[34843]=6;h.exports=function(d,m,f,k,b){function q(e){this.id=g++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;b.profile&&(this.stats={size:0})}function I(b){var e=b.renderbuffer;c(e,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(e);b.renderbuffer=null;b.refCount=0;delete p[b.id];k.renderbufferCount--}var w={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};m.ext_srgb&&(w.srgba=35907);m.ext_color_buffer_half_float&&(w.rgba16f=34842,w.rgb16f=34843);m.webgl_color_buffer_float&&(w.rgba32f=34836);var e=[];a(w).forEach(function(b){e[w[b]]=
b});var g=0,p={};q.prototype.decRef=function(){0>=--this.refCount&&I(this)};b.profile&&(k.getTotalRenderbufferSize=function(){var b=0;a(p).forEach(function(e){b+=p[e].stats.size});return b});return{create:function(g,a){function v(g,n){var a=0,k=0,p=32854;"object"===typeof g&&g?("shape"in g?(k=g.shape,c(Array.isArray(k)&&2<=k.length,"invalid renderbuffer shape"),a=k[0]|0,k=k[1]|0):("radius"in g&&(a=k=g.radius|0),"width"in g&&(a=g.width|0),"height"in g&&(k=g.height|0)),"format"in g&&(c.parameter(g.format,
w,"invalid renderbuffer format"),p=w[g.format])):"number"===typeof g?(a=g|0,k="number"===typeof n?n|0:a):g?c.raise("invalid arguments to renderbuffer constructor"):a=k=1;c(0<a&&0<k&&a<=f.maxRenderbufferSize&&k<=f.maxRenderbufferSize,"invalid renderbuffer size");if(a!==m.width||k!==m.height||p!==m.format)return v.width=m.width=a,v.height=m.height=k,m.format=p,d.bindRenderbuffer(36161,m.renderbuffer),d.renderbufferStorage(36161,p,a,k),c(0===d.getError(),"invalid render buffer format"),b.profile&&(m.stats.size=
G[m.format]*m.width*m.height),v.format=e[m.format],v}var m=new q(d.createRenderbuffer());p[m.id]=m;k.renderbufferCount++;v(g,a);v.resize=function(g,e){var n=g|0,a=e|0||n;if(n===m.width&&a===m.height)return v;c(0<n&&0<a&&n<=f.maxRenderbufferSize&&a<=f.maxRenderbufferSize,"invalid renderbuffer size");v.width=m.width=n;v.height=m.height=a;d.bindRenderbuffer(36161,m.renderbuffer);d.renderbufferStorage(36161,m.format,n,a);c(0===d.getError(),"invalid render buffer format");b.profile&&(m.stats.size=G[m.format]*
m.width*m.height);return v};v._reglType="renderbuffer";v._renderbuffer=m;b.profile&&(v.stats=m.stats);v.destroy=function(){m.decRef()};return v},clear:function(){A(p).forEach(I)},restore:function(){A(p).forEach(function(b){b.renderbuffer=d.createRenderbuffer();d.bindRenderbuffer(36161,b.renderbuffer);d.renderbufferStorage(36161,b.format,b.width,b.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(d,h,r){var a=d("./util/sorted-object-keys"),
c=d("./util/check"),A=d("./util/extend"),G=d("./util/values");h.exports=function(d,m,f,k){function b(b,g,e,c){this.name=b;this.id=g;this.location=e;this.info=c}function q(b,g){for(var e=0;e<b.length;++e)if(b[e].id===g.id){b[e].location=g.location;return}b.push(g)}function I(b,e,f){var n=35632===b?g:p,a=n[e];if(!a){var k=m.str(e),a=d.createShader(b);d.shaderSource(a,k);d.compileShader(a);c.shaderError(d,a,k,b,f);n[e]=a}return a}function w(b,g){this.id=v++;this.fragId=b;this.vertId=g;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;k.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(g,e,f){var n;n=I(35632,g.fragId);var a=I(35633,g.vertId),p=g.program=d.createProgram();d.attachShader(p,n);d.attachShader(p,a);if(f)for(n=0;n<f.length;++n)a=f[n],d.bindAttribLocation(p,a[0],a[1]);d.linkProgram(p);c.linkError(d,p,m.str(g.fragId),m.str(g.vertId),e);f=d.getProgramParameter(p,35718);k.profile&&(g.stats.uniformsCount=f);a=g.uniforms;for(n=0;n<f;++n)if(e=d.getActiveUniform(p,
n))if(1<e.size)for(var t=0;t<e.size;++t){var v=e.name.replace("[0]","["+t+"]");q(a,new b(v,m.id(v),d.getUniformLocation(p,v),e))}else q(a,new b(e.name,m.id(e.name),d.getUniformLocation(p,e.name),e));f=d.getProgramParameter(p,35721);k.profile&&(g.stats.attributesCount=f);g=g.attributes;for(n=0;n<f;++n)(e=d.getActiveAttrib(p,n))&&q(g,new b(e.name,m.id(e.name),d.getAttribLocation(p,e.name),e))}var g={},p={},n={},t=[],v=0;k.profile&&(f.getMaxUniformsCount=function(){var b=0;t.forEach(function(e){e.stats.uniformsCount>
b&&(b=e.stats.uniformsCount)});return b},f.getMaxAttributesCount=function(){var b=0;t.forEach(function(e){e.stats.attributesCount>b&&(b=e.stats.attributesCount)});return b});return{clear:function(){var b=d.deleteShader.bind(d);G(g).forEach(b);g={};G(p).forEach(b);p={};t.forEach(function(b){d.deleteProgram(b.program)});t.length=0;n={};f.shaderCount=0},program:function(b,k,q,v){c.command(0<=b,"missing vertex shader",q);c.command(0<=k,"missing fragment shader",q);var m=n[k];m||(m=n[k]={});var I=m[b];
if(I&&(I.refCount++,!v))return I;var G=new w(k,b);f.shaderCount++;e(G,q,v);I||(m[b]=G);t.push(G);return A(G,{destroy:function(){G.refCount--;if(0>=G.refCount){d.deleteProgram(G.program);var b=t.indexOf(G);t.splice(b,1);f.shaderCount--}0>=m[G.vertId].refCount&&(d.deleteShader(p[G.vertId]),delete p[G.vertId],delete n[G.fragId][G.vertId]);a(n[G.fragId]).length||(d.deleteShader(g[G.fragId]),delete g[G.fragId],delete n[G.fragId])}})},restore:function(){g={};p={};for(var b=0;b<t.length;++b)e(t[b],null,
t[b].attributes.map(function(b){return[b.location,b.name]}))},shader:I,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(d,h,r){h.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(d,h,r){h.exports=function(){var a={"":0},c=[""];return{id:function(d){var G=a[d];if(G)return G;G=a[d]=c.length;c.push(d);
return G},str:function(a){return c[a]}}}},{}],19:[function(d,h,r){function a(b){return"[object "+b+"]"}function c(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function A(b){return Array.isArray(b)&&0!==b.length&&n(b[0])?!0:!1}function G(b){return Object.prototype.toString.call(b)}function l(b){if(!b)return!1;var g=G(b);return 0<=ia.indexOf(g)?!0:c(b)||A(b)||e(b)}function m(b,e){36193===b.type?(b.data=p(e),g.freeType(e)):b.data=e}function f(b,e,g,c,f,n){b="undefined"!==typeof V[b]?
V[b]:u[b]*J[e];n&&(b*=6);if(f){for(c=0;1<=g;)c+=b*g*g,g/=2;return c}return b*g*c}var k=d("./util/sorted-object-keys"),b=d("./util/check"),q=d("./util/extend"),I=d("./util/values"),w=d("./util/is-typed-array"),e=d("./util/is-ndarray"),g=d("./util/pool"),p=d("./util/to-half-float"),n=d("./util/is-array-like"),t=d("./util/flatten"),v=d("./util/is-pow2");r=d("./constants/arraytypes.json");var D=d("./constants/arraytypes.json"),y=[9984,9986,9985,9987],W=[0,6409,6410,6407,6408],u={};u[6409]=u[6406]=u[6402]=
1;u[34041]=u[6410]=2;u[6407]=u[35904]=3;u[6408]=u[35906]=4;var H=a("HTMLCanvasElement"),la=a("OffscreenCanvas"),ta=a("CanvasRenderingContext2D"),S=a("ImageBitmap"),R=a("HTMLImageElement"),z=a("HTMLVideoElement"),ia=k(r).concat([H,la,ta,S,R,z]),J=[];J[5121]=1;J[5126]=4;J[36193]=2;J[5123]=2;J[5125]=4;var V=[];V[32854]=2;V[32855]=2;V[36194]=2;V[34041]=4;V[33776]=.5;V[33777]=.5;V[33778]=1;V[33779]=1;V[35986]=.5;V[35987]=1;V[34798]=1;V[35840]=.5;V[35841]=.25;V[35842]=.5;V[35843]=.25;V[36196]=.5;h.exports=
function(a,d,h,J,r,ia,V){function ea(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Oa(b,e){b.internalformat=e.internalformat;b.format=e.format;b.type=e.type;b.compressed=e.compressed;b.premultiplyAlpha=e.premultiplyAlpha;b.flipY=e.flipY;b.unpackAlignment=e.unpackAlignment;b.colorSpace=e.colorSpace;b.width=e.width;b.height=e.height;b.channels=e.channels}
function X(e,g){if("object"===typeof g&&g){"premultiplyAlpha"in g&&(b.type(g.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=g.premultiplyAlpha);"flipY"in g&&(b.type(g.flipY,"boolean","invalid texture flip"),e.flipY=g.flipY);"alignment"in g&&(b.oneOf(g.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=g.alignment);"colorSpace"in g&&(b.parameter(g.colorSpace,zc,"invalid colorSpace"),e.colorSpace=zc[g.colorSpace]);if("type"in g){var c=g.type;b(d.oes_texture_float||
!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");b(d.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");b(d.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");b.parameter(c,ba,"invalid texture type");e.type=
ba[c]}var f=e.width,a=e.height,n=e.channels,c=!1;"shape"in g?(b(Array.isArray(g.shape)&&2<=g.shape.length,"shape must be an array"),f=g.shape[0],a=g.shape[1],3===g.shape.length&&(n=g.shape[2],b(0<n&&4>=n,"invalid number of channels"),c=!0),b(0<=f&&f<=h.maxTextureSize,"invalid width"),b(0<=a&&a<=h.maxTextureSize,"invalid height")):("radius"in g&&(f=a=g.radius,b(0<=f&&f<=h.maxTextureSize,"invalid radius")),"width"in g&&(f=g.width,b(0<=f&&f<=h.maxTextureSize,"invalid width")),"height"in g&&(a=g.height,
b(0<=a&&a<=h.maxTextureSize,"invalid height")),"channels"in g&&(n=g.channels,b(0<n&&4>=n,"invalid number of channels"),c=!0));e.width=f|0;e.height=a|0;e.channels=n|0;f=!1;"format"in g&&(f=g.format,b(d.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),b.parameter(f,N,"invalid texture format"),a=e.internalformat=N[f],e.format=ua[a],f in ba&&!("type"in g)&&(e.type=ba[f]),f in ha&&(e.compressed=!0),f=!0);
!c&&f?e.channels=u[e.format]:c&&!f?e.channels!==W[e.format]&&(e.format=e.internalformat=W[e.channels]):f&&c&&b(e.channels===u[e.format],"number of channels inconsistent with specified format")}}function P(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function O(){ea.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function U(f,a){var k=null;l(a)?
k=a:a&&(b.type(a,"object","invalid pixel data type"),X(f,a),"x"in a&&(f.xOffset=a.x|0),"y"in a&&(f.yOffset=a.y|0),l(a.data)&&(k=a.data));b(!f.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){b(!k,"can not specify copy and data field for the same texture");var q=r.viewportWidth,v=r.viewportHeight;f.width=f.width||q-f.xOffset;f.height=f.height||v-f.yOffset;f.needsCopy=!0;b(0<=f.xOffset&&f.xOffset<q&&0<=f.yOffset&&f.yOffset<v&&0<f.width&&f.width<=
q&&0<f.height&&f.height<=v,"copy texture read out of bounds")}else if(!k)f.width=f.width||1,f.height=f.height||1,f.channels=f.channels||4;else if(w(k))f.channels=f.channels||4,f.data=k,"type"in a||5121!==f.type||(f.type=D[Object.prototype.toString.call(k)]|0);else if(c(k)){f.channels=f.channels||4;q=k;v=q.length;switch(f.type){case 5121:case 5123:case 5125:case 5126:v=g.allocType(f.type,v);v.set(q);f.data=v;break;case 36193:f.data=p(q);break;default:b.raise("unsupported texture type, must specify a typed array")}f.alignment=
1;f.needsFree=!0}else if(e(k)){q=k.data;Array.isArray(q)||5121!==f.type||(f.type=D[Object.prototype.toString.call(q)]|0);var v=k.shape,d=k.stride,I,y,u,K;3===v.length?(u=v[2],K=d[2]):(b(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),K=u=1);I=v[0];y=v[1];v=d[0];d=d[1];f.alignment=1;f.width=I;f.height=y;f.channels=u;f.format=f.internalformat=W[u];f.needsFree=!0;I=K;k=k.offset;u=f.width;K=f.height;y=f.channels;for(var ka=g.allocType(36193===f.type?5126:f.type,u*K*y),F=0,B=0;B<K;++B)for(var E=
0;E<u;++E)for(var N=0;N<y;++N)ka[F++]=q[v*E+d*B+I*N+k];m(f,ka)}else if(G(k)===H||G(k)===la||G(k)===ta)G(k)===H||G(k)===la?f.element=k:f.element=k.canvas,f.width=f.element.width,f.height=f.element.height,f.channels=4;else if(G(k)===S)f.element=k,f.width=k.width,f.height=k.height,f.channels=4;else if(G(k)===R)f.element=k,f.width=k.naturalWidth,f.height=k.naturalHeight,f.channels=4;else if(G(k)===z)f.element=k,f.width=k.videoWidth,f.height=k.videoHeight,f.channels=4;else if(A(k)){q=f.width||k[0].length;
v=f.height||k.length;d=f.channels;d=n(k[0][0])?d||k[0][0].length:d||1;I=t.shape(k);u=1;for(K=0;K<I.length;++K)u*=I[K];u=g.allocType(36193===f.type?5126:f.type,u);t.flatten(k,I,"",u);m(f,u);f.alignment=1;f.width=q;f.height=v;f.channels=d;f.format=f.internalformat=W[d];f.needsFree=!0}5126===f.type?b(0<=h.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===f.type&&b(0<=h.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function pa(b,e,g,c,f){var n=b.element,k=b.data,p=b.internalformat,q=b.format,t=b.type,v=b.width,d=b.height;P(b);n?a.texSubImage2D(e,f,g,c,q,t,n):b.compressed?a.compressedTexSubImage2D(e,f,g,c,p,v,d,k):b.needsCopy?(J(),a.copyTexSubImage2D(e,f,g,c,b.xOffset,b.yOffset,v,d)):a.texSubImage2D(e,f,g,c,v,d,q,t,k)}function Q(){return Z.pop()||new O}function Ob(b){b.needsFree&&g.freeType(b.data);O.call(b);Z.push(b)}function ab(){ea.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function T(b,e,g){var c=b.images[0]=Q();b.mipmask=1;c.width=b.width=e;c.height=b.height=g;c.channels=b.channels=4}function B(e,g){var c=null;if(l(g))c=e.images[0]=Q(),Oa(c,e),U(c,g),e.mipmask=1;else if(X(e,g),Array.isArray(g.mipmap))for(var f=g.mipmap,a=0;a<f.length;++a)c=e.images[a]=Q(),Oa(c,e),c.width>>=a,c.height>>=a,U(c,f[a]),e.mipmask|=1<<a;else c=e.images[0]=Q(),Oa(c,e),U(c,g),e.mipmask=1;Oa(e,e.images[0]);!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==
e.internalformat&&33779!==e.internalformat||b(0===e.width%4&&0===e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function oa(b,e){for(var g=b.images,c=0;c<g.length&&g[c];++c){var f=g[c],n=e,k=c,p=f.element,q=f.data,t=f.internalformat,v=f.format,d=f.type,m=f.width,w=f.height;P(f);p?a.texImage2D(n,k,v,v,d,p):f.compressed?a.compressedTexImage2D(n,k,t,m,w,0,q):f.needsCopy?(J(),a.copyTexImage2D(n,k,v,f.xOffset,f.yOffset,m,w,0)):a.texImage2D(n,
k,v,m,w,0,v,d,q||null)}}function da(){var b=fa.pop()||new ab;ea.call(b);for(var e=b.mipmask=0;16>e;++e)b.images[e]=null;return b}function Da(b){for(var e=b.images,g=0;g<e.length;++g)e[g]&&Ob(e[g]),e[g]=null;fa.push(b)}function Ga(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function zb(e,g){if("min"in g){var c=g.min;b.parameter(c,td);e.minFilter=td[c];0<=y.indexOf(e.minFilter)&&!("faces"in g)&&(e.genMipmaps=!0)}"mag"in
g&&(c=g.mag,b.parameter(c,jc),e.magFilter=jc[c]);var c=e.wrapS,f=e.wrapT;if("wrap"in g){var a=g.wrap;"string"===typeof a?(b.parameter(a,pc),c=f=pc[a]):Array.isArray(a)&&(b.parameter(a[0],pc),b.parameter(a[1],pc),c=pc[a[0]],f=pc[a[1]])}else"wrapS"in g&&(c=g.wrapS,b.parameter(c,pc),c=pc[c]),"wrapT"in g&&(f=g.wrapT,b.parameter(f,pc),f=pc[f]);e.wrapS=c;e.wrapT=f;"anisotropic"in g&&(c=g.anisotropic,b("number"===typeof c&&1<=c&&c<=h.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=g.anisotropic);
if("mipmap"in g){c=!1;switch(typeof g.mipmap){case "string":b.parameter(g.mipmap,cc,"invalid mipmap hint");e.mipmapHint=cc[g.mipmap];c=e.genMipmaps=!0;break;case "boolean":c=e.genMipmaps=g.mipmap;break;case "object":b(Array.isArray(g.mipmap),"invalid mipmap type");e.genMipmaps=!1;c=!0;break;default:b.raise("invalid mipmap type")}!c||"min"in g||(e.minFilter=9984)}}function La(b,e){a.texParameteri(e,10241,b.minFilter);a.texParameteri(e,10240,b.magFilter);a.texParameteri(e,10242,b.wrapS);a.texParameteri(e,
10243,b.wrapT);d.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(e))}function Y(b){ea.call(this);this.mipmask=0;this.internalformat=6408;this.id=sa++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ga;V.profile&&(this.stats={size:0})}function nb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=ca[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function ra(e){var g=e.texture;b(g,"must not double destroy texture");var c=e.unit,f=e.target;0<=c&&(a.activeTexture(33984+c),a.bindTexture(f,null),ca[c]=null);a.deleteTexture(g);e.texture=null;e.params=null;e.pixels=null;e.refCount=0;delete M[e.id];ia.textureCount--}var cc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,clamp:33071,mirror:33648},jc={nearest:9728,linear:9729},td=q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},jc),zc={none:0,browser:37444},ba={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},N={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ha={};d.ext_srgb&&(N.srgb=35904,N.srgba=35906);d.oes_texture_float&&(ba.float32=ba["float"]=5126);d.oes_texture_half_float&&(ba.float16=ba["half float"]=36193);d.webgl_depth_texture&&(q(N,{depth:6402,"depth stencil":34041}),q(ba,{uint16:5123,uint32:5125,
"depth stencil":34042}));d.webgl_compressed_texture_s3tc&&q(ha,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});d.webgl_compressed_texture_atc&&q(ha,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});d.webgl_compressed_texture_pvrtc&&q(ha,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});d.webgl_compressed_texture_etc1&&(ha["rgb etc1"]=36196);var Ha=Array.prototype.slice.call(a.getParameter(34467));
k(ha).forEach(function(b){var e=ha[b];0<=Ha.indexOf(e)&&(N[b]=e)});var tb=k(N);h.textureFormats=tb;var cd=[];k(N).forEach(function(b){cd[N[b]]=b});var Nc=[];k(ba).forEach(function(b){Nc[ba[b]]=b});var L=[];k(jc).forEach(function(b){L[jc[b]]=b});var E=[];k(td).forEach(function(b){E[td[b]]=b});var ja=[];k(pc).forEach(function(b){ja[pc[b]]=b});var ua=tb.reduce(function(b,e){var g=N[e];6409===g||6406===g||6409===g||6410===g||6402===g||34041===g||d.ext_srgb&&(35904===g||35906===g)?b[g]=g:32855===g||0<=
e.indexOf("rgba")?b[g]=6408:b[g]=6407;return b},{}),Z=[],fa=[],sa=0,M={},F=h.maxTextureUnits,ca=Array(F).map(function(){return null});q(Y.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var g=0;g<F;++g){var c=ca[g];if(c){if(0<c.bindCount)continue;c.unit=-1}ca[g]=this;e=g;break}e>=F&&b.raise("insufficient number of texture units");V.profile&&ia.maxTextureUnits<e+1&&(ia.maxTextureUnits=e+1);this.unit=e;a.activeTexture(33984+e);a.bindTexture(this.target,this.texture)}return e},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ra(this)}});V.profile&&(ia.getTotalTextureSize=function(){var b=0;k(M).forEach(function(e){b+=M[e].stats.size});return b});return{create2D:function(e,g){function c(e,g){var a=n.texInfo;Ga.call(a);var k=da();"number"===typeof e?"number"===typeof g?T(k,e|0,g|0):T(k,e|0,e|0):e?(b.type(e,"object","invalid arguments to regl.texture"),zb(a,e),B(k,e)):T(k,1,1);a.genMipmaps&&(k.mipmask=(k.width<<1)-1);n.mipmask=k.mipmask;Oa(n,k);b.texture2D(a,
k,h);n.internalformat=k.internalformat;c.width=k.width;c.height=k.height;nb(n);oa(k,3553);La(a,3553);ga();Da(k);V.profile&&(n.stats.size=f(n.internalformat,n.type,k.width,k.height,a.genMipmaps,!1));c.format=cd[n.internalformat];c.type=Nc[n.type];c.mag=L[a.magFilter];c.min=E[a.minFilter];c.wrapS=ja[a.wrapS];c.wrapT=ja[a.wrapT];return c}var n=new Y(3553);M[n.id]=n;ia.textureCount++;c(e,g);c.subimage=function(e,g,f,a){b(!!e,"must specify image data");g|=0;f|=0;a|=0;var k=Q();Oa(k,n);k.width=0;k.height=
0;U(k,e);k.width=k.width||(n.width>>a)-g;k.height=k.height||(n.height>>a)-f;b(n.type===k.type&&n.format===k.format&&n.internalformat===k.internalformat,"incompatible format for texture.subimage");b(0<=g&&0<=f&&g+k.width<=n.width&&f+k.height<=n.height,"texture.subimage write out of bounds");b(n.mipmask&1<<a,"missing mipmap data");b(k.data||k.element||k.needsCopy,"missing image data");nb(n);pa(k,3553,g,f,a);ga();Ob(k);return c};c.resize=function(b,e){var g=b|0,k=e|0||g;if(g===n.width&&k===n.height)return c;
c.width=n.width=g;c.height=n.height=k;nb(n);for(var p=0;n.mipmask>>p;++p){var q=g>>p,t=k>>p;if(!q||!t)break;a.texImage2D(3553,p,n.format,q,t,0,n.format,n.type,null)}ga();V.profile&&(n.stats.size=f(n.internalformat,n.type,g,k,!1,!1));return c};c._reglType="texture2d";c._texture=n;V.profile&&(c.stats=n.stats);c.destroy=function(){n.decRef()};return c},createCube:function(e,g,c,n,k,p){function q(e,g,c,a,n,k){var p,m=t.texInfo;Ga.call(m);for(p=0;6>p;++p)d[p]=da();if("number"!==typeof e&&e)if("object"===
typeof e)if(g)B(d[0],e),B(d[1],g),B(d[2],c),B(d[3],a),B(d[4],n),B(d[5],k);else if(zb(m,e),X(t,e),"faces"in e)for(e=e.faces,b(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),p=0;6>p;++p)b("object"===typeof e[p]&&!!e[p],"invalid input for cube map face"),Oa(d[p],t),B(d[p],e[p]);else for(p=0;6>p;++p)B(d[p],e);else b.raise("invalid arguments to cube map");else for(e=e|0||1,p=0;6>p;++p)T(d[p],e,e);Oa(t,d[0]);b.optional(function(){h.npotTextureCube||b(v(t.width)&&v(t.height),"your browser does not support non power or two texture dimensions")});
t.mipmask=m.genMipmaps?(d[0].width<<1)-1:d[0].mipmask;b.textureCube(t,m,d,h);t.internalformat=d[0].internalformat;q.width=d[0].width;q.height=d[0].height;nb(t);for(p=0;6>p;++p)oa(d[p],34069+p);La(m,34067);ga();V.profile&&(t.stats.size=f(t.internalformat,t.type,q.width,q.height,m.genMipmaps,!0));q.format=cd[t.internalformat];q.type=Nc[t.type];q.mag=L[m.magFilter];q.min=E[m.minFilter];q.wrapS=ja[m.wrapS];q.wrapT=ja[m.wrapT];for(p=0;6>p;++p)Da(d[p]);return q}var t=new Y(34067);M[t.id]=t;ia.cubeCount++;
var d=Array(6);q(e,g,c,n,k,p);q.subimage=function(e,g,c,f,a){b(!!g,"must specify image data");b("number"===typeof e&&e===(e|0)&&0<=e&&6>e,"invalid face");c|=0;f|=0;a|=0;var n=Q();Oa(n,t);n.width=0;n.height=0;U(n,g);n.width=n.width||(t.width>>a)-c;n.height=n.height||(t.height>>a)-f;b(t.type===n.type&&t.format===n.format&&t.internalformat===n.internalformat,"incompatible format for texture.subimage");b(0<=c&&0<=f&&c+n.width<=t.width&&f+n.height<=t.height,"texture.subimage write out of bounds");b(t.mipmask&
1<<a,"missing mipmap data");b(n.data||n.element||n.needsCopy,"missing image data");nb(t);pa(n,34069+e,c,f,a);ga();Ob(n);return q};q.resize=function(b){b|=0;if(b!==t.width){q.width=t.width=b;q.height=t.height=b;nb(t);for(var e=0;6>e;++e)for(var g=0;t.mipmask>>g;++g)a.texImage2D(34069+e,g,t.format,b>>g,b>>g,0,t.format,t.type,null);ga();V.profile&&(t.stats.size=f(t.internalformat,t.type,q.width,q.height,!1,!0));return q}};q._reglType="textureCube";q._texture=t;V.profile&&(q.stats=t.stats);q.destroy=
function(){t.decRef()};return q},clear:function(){for(var b=0;b<F;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ca[b]=null;I(M).forEach(ra);ia.cubeCount=0;ia.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<F;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null)}I(M).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var e=0;32>e;++e)if(0!==(b.mipmask&1<<e))if(3553===b.target)a.texImage2D(3553,e,b.internalformat,b.width>>
e,b.height>>e,0,b.internalformat,b.type,null);else for(var g=0;6>g;++g)a.texImage2D(34069+g,e,b.internalformat,b.width>>e,b.height>>e,0,b.internalformat,b.type,null);La(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<F;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(d,h,r){h.exports=function(a,c){function d(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function G(b,c,e){var g=f.pop()||new d;g.startQueryIndex=b;g.endQueryIndex=c;g.sum=0;g.stats=e;k.push(g)}if(!c.ext_disjoint_timer_query)return null;var l=[],m=[],f=[],k=[],b=[],q=[];return{beginQuery:function(b){var f=l.pop()||c.ext_disjoint_timer_query.createQueryEXT();
c.ext_disjoint_timer_query.beginQueryEXT(35007,f);m.push(f);G(m.length-1,m.length,b)},endQuery:function(){c.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:G,update:function(){var a,d;a=m.length;if(0!==a){q.length=Math.max(q.length,a+1);b.length=Math.max(b.length,a+1);b[0]=0;var e=q[0]=0;for(d=a=0;d<m.length;++d){var g=m[d];c.ext_disjoint_timer_query.getQueryObjectEXT(g,34919)?(e+=c.ext_disjoint_timer_query.getQueryObjectEXT(g,34918),l.push(g)):m[a++]=g;b[d+1]=e;q[d+1]=a}m.length=a;for(d=
a=0;d<k.length;++d){var e=k[d],p=e.startQueryIndex,g=e.endQueryIndex;e.sum+=b[g]-b[p];p=q[p];g=q[g];g===p?(e.stats.gpuTime+=e.sum/1E6,f.push(e)):(e.startQueryIndex=p,e.endQueryIndex=g,k[a++]=e)}k.length=a}},getNumPendingQueries:function(){return m.length},clear:function(){l.push.apply(l,m);for(var b=0;b<l.length;b++)c.ext_disjoint_timer_query.deleteQueryEXT(l[b]);m.length=0;l.length=0},restore:function(){m.length=0;l.length=0}}}},{}],21:[function(d,h,r){function a(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function c(b){b=Error("(regl) "+b);console.error(b);throw b;}function A(b,e){b||c(e)}function G(b){return b?": "+b:""}function l(b,e){switch(e){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function m(b,e,g){0>e.indexOf(b)&&c("invalid value"+
G(g)+". must be one of: "+e)}function f(b,e){for(b+="";b.length<e;)b=" "+b;return b}function k(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function b(b,e){this.number=b;this.line=e;this.errors=[]}function q(b,e,g){this.file=b;this.line=e;this.message=g}function I(){var b=Error(),b=(b.stack||b).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return e?e[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function w(){var b=Error(),b=(b.stack||b).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return e?e[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function e(e,g){var c=e.split("\n"),f=1,n=0,p={unknown:new k,0:new k};p.unknown.name=p[0].name=g||I();p.unknown.lines.push(new b(0,""));for(var q=0;q<c.length;++q){var t=c[q],v=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(t);if(v)switch(v[1]){case "line":if(v=/(\d+)(\s+\d+)?/.exec(v[2]))f=v[1]|0,v[2]&&(n=v[2]|0,n in p||(p[n]=new k));break;case "define":if(v=/SHADER_NAME(_B64)?\s+(.*)$/.exec(v[2]))p[n].name=
v[1]?a(v[2]):v[2]}p[n].lines.push(new b(f++,t))}y(p).forEach(function(b){var e=p[b];e.lines.forEach(function(b){e.index[b.number]=b})});return p}function g(b){var e=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);g?e.push(new q(g[1]|0,g[2]|0,g[3].trim())):0<b.length&&e.push(new q("unknown",0,b))}});return e}function p(b,e){e.forEach(function(e){var g=b[e.file];if(g){var c=g.index[e.line];if(c){c.errors.push(e);g.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(e)})}function n(b){b._commandRef=I()}function t(b,e){var g=w();c(b+" in command "+(e||I())+("unknown"===g?"":" called from "+g))}function v(b,e,g,c){l(b,e)||t("invalid parameter type"+G(g)+". expected "+e+", got "+typeof b,c||I())}function D(b,e){return 32820===b||32819===b||33635===b?2:34042===b?4:H[b]*e}var y=d("./sorted-object-keys"),W=d("./is-typed-array");d=d("./extend");var u="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
H={};H[5120]=H[5121]=1;H[5122]=H[5123]=H[36193]=H[33635]=H[32819]=H[32820]=2;H[5124]=H[5125]=H[5126]=H[34042]=4;h.exports=d(A,{optional:function(b){b()},raise:c,commandRaise:t,command:function(b,e,g){b||t(e,g||I())},parameter:function(b,e,g){b in e||c("unknown parameter ("+b+")"+G(g)+". possible values: "+y(e).join())},commandParameter:function(b,e,g,c){b in e||t("unknown parameter ("+b+")"+G(g)+". possible values: "+y(e).join(),c||I())},constructor:function(b){y(b).forEach(function(b){0>u.indexOf(b)&&
c('invalid regl constructor argument "'+b+'". must be one of '+u)})},type:function(b,e,g){l(b,e)||c("invalid parameter type"+G(g)+". expected "+e+", got "+typeof b)},commandType:v,isTypedArray:function(b,e){W(b)||c("invalid parameter type"+G(e)+". must be a typed array")},nni:function(b,e){0<=b&&(b|0)===b||c("invalid parameter type, ("+b+")"+G(e)+". must be a nonnegative integer")},oneOf:m,shaderError:function(b,c,a,n,k){if(!b.getShaderParameter(c,b.COMPILE_STATUS)){c=b.getShaderInfoLog(c);b=n===
b.FRAGMENT_SHADER?"fragment":"vertex";v(a,"string",b+" shader source must be a string",k);var q=e(a,k);a=g(c);p(q,a);y(q).forEach(function(b){function e(b,g){c.push(b);a.push(g||"")}var g=q[b];if(g.hasErrors){var c=[""],a=[""];e("file number "+b+": "+g.name+"\n","color:red;text-decoration:underline;font-weight:bold");g.lines.forEach(function(b){if(0<b.errors.length){e(f(b.number,4)+"|  ","background-color:yellow; font-weight:bold");e(b.line+"\n","color:red; background-color:yellow; font-weight:bold");
var g=0;b.errors.forEach(function(c){c=c.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(a){var n=a[1];c=a[2];switch(n){case "assign":n="="}g=Math.max(b.line.indexOf(n,g),0)}else g=0;e(f("| ",6));e(f("^^^",g+3)+"\n","font-weight:bold");e(f("| ",6));e(c+"\n","font-weight:bold")});e(f("| ",6)+"\n")}else e(f(b.number,4)+"|  "),e(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(c.join("")):(a[0]=c.join("%c"),console.log.apply(console,a))}});A.raise("Error compiling "+
b+" shader, "+q[0].name)}},linkError:function(b,g,c,f,a){b.getProgramParameter(g,b.LINK_STATUS)||(b=b.getProgramInfoLog(g),c=e(c,a),f='Error linking program with vertex shader, "'+e(f,a)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+b),A.raise(f))},callSite:w,saveCommandRef:n,saveDrawInfo:function(b,e,g,c){function f(b){return b?c.id(b):0}function a(b,
e){y(e).forEach(function(e){b[c.id(e)]=!0})}n(b);b._fragId=f(b["static"].frag);b._vertId=f(b["static"].vert);var k=b._uniformSet={};a(k,e["static"]);a(k,e.dynamic);e=b._attributeSet={};a(e,g["static"]);a(e,g.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,e,g){b.texture?m(b.texture._texture.internalformat,e,"unsupported texture format for attachment"):m(b.renderbuffer._renderbuffer.format,g,"unsupported renderbuffer format for attachment")},
guessCommand:I,texture2D:function(b,e,g){var c=e.width,f=e.height,a=e.channels;A(0<c&&c<=g.maxTextureSize&&0<f&&f<=g.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||A(!(c&c-1)&&!!c&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==c&&1!==f&&A(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(A(!(c&c-1)&&!!c&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),
A(e.mipmask===(c<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&A(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),A(!b.genMipmaps,"mipmap generation not supported with float textures"));var n=e.images;for(g=0;16>g;++g)if(n[g]){var k=c>>g,p=f>>g;A(e.mipmask&1<<g,"missing mipmap data");var q=n[g];A(q.width===k&&q.height===p,"invalid shape for mip images");A(q.format===e.format&&q.internalformat===
e.internalformat&&q.type===e.type,"incompatible type for mip image");!q.compressed&&q.data&&(k=Math.ceil(D(q.type,a)*k/q.unpackAlignment)*q.unpackAlignment,A(q.data.byteLength===k*p,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||A(0===(e.mipmask&1<<g),"extra mipmap data");e.compressed&&A(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,e,g,c){var f=b.width,a=b.height,n=b.channels;A(0<f&&f<=c.maxTextureSize&&
0<a&&a<=c.maxTextureSize,"invalid texture shape");A(f===a,"cube map must be square");A(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(c=0;c<g.length;++c){var k=g[c];A(k.width===f&&k.height===a,"inconsistent cube map face shape");e.genMipmaps&&(A(!k.compressed,"can not generate mipmap for compressed textures"),A(1===k.mipmask,"can not specify mipmaps and generate mipmaps"));for(var p=k.images,q=0;16>q;++q){var t=p[q];if(t){var v=f>>q,d=a>>q;A(k.mipmask&1<<q,"missing mipmap data");
A(t.width===v&&t.height===d,"invalid shape for mip images");A(t.format===b.format&&t.internalformat===b.internalformat&&t.type===b.type,"incompatible type for mip image");t.compressed||t.data&&A(t.data.byteLength===v*d*Math.max(D(t.type,n),t.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(d,h,r){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(d,h,r){function a(c){return Array.prototype.slice.call(c)}var c=d("./extend"),A=d("./compiled-fns");h.exports=function(){function d(){var b=[],k=[];return c(function(){b.push.apply(b,a(arguments))},{def:function(){var c="v"+f;f++;k.push(c);0<arguments.length&&(b.push(c,"="),b.push.apply(b,a(arguments)),b.push(";"));return c},toString:function(){return a([0<k.length?"var "+k.join(",")+";":"",a(b).join("")]).join("")}})}function l(){function b(e,g){k(e,
g,"=",f.def(e,g),";")}var f=d(),k=d(),e=f.toString,g=k.toString;return c(function(){f.apply(f,a(arguments))},{def:f.def,entry:f,exit:k,save:b,set:function(e,g,c){b(e,g);f(e,g,"=",c,";")},toString:function(){return e()+g()}})}var m=0,f=0,k={},b={};return{global:d(),link:function(b){var c="$"+m,f=!1;"object"===typeof b&&b.name&&(c=b.name.replace(/ /g,"_"),f=!0);if(c in k)return c;k[c]=b;f||m++;return c},block:d,proc:function(f,k){function d(){var b="a"+e.length;e.push(b);return b}var e=[];k=k||0;for(var g=
0;g<k;++g)d();var g=l(),p=g.toString;return b[f]=c(g,{arg:d,toString:function(){return a(["function(",e.join(),"){",p(),"}"]).join("")}})},scope:l,cond:function(){var b=a(arguments).join(""),f=l(),k=l(),e=f.toString,g=k.toString;return c(f,{then:function(){f.apply(f,a(arguments));return this},"else":function(){k.apply(k,a(arguments));return this},toString:function(){var c=g();c&&(c="else{"+c+"}");return a(["if(",b,"){",e(),"}",c]).join("")}})},compile:function(){var b=[],c=[];Object.keys(k).sort(function(b,
e){var c="$"===b.charAt(0),f="$"===e.charAt(0);return c||f?c&&f?+b.slice(1)<+e.slice(1)?-1:1:c&&!f?-1:1:b.localeCompare(e)}).forEach(function(e){var f=k[e];b.push(e);c.push(f)});for(var f=0,e=b.length-1;-1<e;e--)if("$"===b[e].charAt(0)){f=e;break}f=b.slice(f).join();e=A[f];if(!e)throw Error("missing precompiled function with key: "+f);return e.apply(null,c)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(d,h,r){h.exports={$0:function(a){var c,d,G,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,H,h,ta,S,
R,z,r,J,V;c=a.attributes;d=a.current;G=a.framebuffer;l=a.gl;m=a.next;f=a.vao;k=m.blend_color;b=d.blend_color;q=m.blend_equation;I=d.blend_equation;w=m.blend_func;e=d.blend_func;g=m.colorMask;p=d.colorMask;n=m.depth_range;t=d.depth_range;v=m.polygonOffset_offset;D=d.polygonOffset_offset;y=m.sample_coverage;W=d.sample_coverage;u=m.scissor_box;H=d.scissor_box;h=m.stencil_func;ta=d.stencil_func;S=m.stencil_opBack;R=d.stencil_opBack;z=m.stencil_opFront;r=d.stencil_opFront;J=m.viewport;V=d.viewport;return{poll:function(){var c,
f,a,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da;d.dirty=!1;f=m.blend_enable;a=m.cull_enable;ma=m.depth_enable;na=m.dither;Qa=m.polygonOffset_enable;Cb=m.sample_alpha;ea=m.sample_enable;Oa=m.scissor_enable;X=m.stencil_enable;P=m.cull_face;O=d.cull_face;U=m.depth_func;pa=d.depth_func;Q=m.depth_mask;Ob=d.depth_mask;ab=m.frontFace;T=d.frontFace;B=m.lineWidth;oa=d.lineWidth;da=m.stencil_mask;Da=d.stencil_mask;c=G.next;c!==G.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),
G.cur=c);f!==d.blend_enable&&(f?l.enable(3042):l.disable(3042),d.blend_enable=f);a!==d.cull_enable&&(a?l.enable(2884):l.disable(2884),d.cull_enable=a);ma!==d.depth_enable&&(ma?l.enable(2929):l.disable(2929),d.depth_enable=ma);na!==d.dither&&(na?l.enable(3024):l.disable(3024),d.dither=na);Qa!==d.polygonOffset_enable&&(Qa?l.enable(32823):l.disable(32823),d.polygonOffset_enable=Qa);Cb!==d.sample_alpha&&(Cb?l.enable(32926):l.disable(32926),d.sample_alpha=Cb);ea!==d.sample_enable&&(ea?l.enable(32928):
l.disable(32928),d.sample_enable=ea);Oa!==d.scissor_enable&&(Oa?l.enable(3089):l.disable(3089),d.scissor_enable=Oa);X!==d.stencil_enable&&(X?l.enable(2960):l.disable(2960),d.stencil_enable=X);if(k[0]!==b[0]||k[1]!==b[1]||k[2]!==b[2]||k[3]!==b[3])l.blendColor(k[0],k[1],k[2],k[3]),b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3];if(q[0]!==I[0]||q[1]!==I[1])l.blendEquationSeparate(q[0],q[1]),I[0]=q[0],I[1]=q[1];if(w[0]!==e[0]||w[1]!==e[1]||w[2]!==e[2]||w[3]!==e[3])l.blendFuncSeparate(w[0],w[1],w[2],w[3]),e[0]=
w[0],e[1]=w[1],e[2]=w[2],e[3]=w[3];if(g[0]!==p[0]||g[1]!==p[1]||g[2]!==p[2]||g[3]!==p[3])l.colorMask(g[0],g[1],g[2],g[3]),p[0]=g[0],p[1]=g[1],p[2]=g[2],p[3]=g[3];P!==O&&(l.cullFace(P),d.cull_face=P);U!==pa&&(l.depthFunc(U),d.depth_func=U);Q!==Ob&&(l.depthMask(Q),d.depth_mask=Q);if(n[0]!==t[0]||n[1]!==t[1])l.depthRange(n[0],n[1]),t[0]=n[0],t[1]=n[1];ab!==T&&(l.frontFace(ab),d.frontFace=ab);B!==oa&&(l.lineWidth(B),d.lineWidth=B);if(v[0]!==D[0]||v[1]!==D[1])l.polygonOffset(v[0],v[1]),D[0]=v[0],D[1]=
v[1];if(y[0]!==W[0]||y[1]!==W[1])l.sampleCoverage(y[0],y[1]),W[0]=y[0],W[1]=y[1];if(u[0]!==H[0]||u[1]!==H[1]||u[2]!==H[2]||u[3]!==H[3])l.scissor(u[0],u[1],u[2],u[3]),H[0]=u[0],H[1]=u[1],H[2]=u[2],H[3]=u[3];if(h[0]!==ta[0]||h[1]!==ta[1]||h[2]!==ta[2])l.stencilFunc(h[0],h[1],h[2]),ta[0]=h[0],ta[1]=h[1],ta[2]=h[2];da!==Da&&(l.stencilMask(da),d.stencil_mask=da);if(S[0]!==R[0]||S[1]!==R[1]||S[2]!==R[2]||S[3]!==R[3])l.stencilOpSeparate(S[0],S[1],S[2],S[3]),R[0]=S[0],R[1]=S[1],R[2]=S[2],R[3]=S[3];if(z[0]!==
r[0]||z[1]!==r[1]||z[2]!==r[2]||z[3]!==r[3])l.stencilOpSeparate(z[0],z[1],z[2],z[3]),r[0]=z[0],r[1]=z[1],r[2]=z[2],r[3]=z[3];if(J[0]!==V[0]||J[1]!==V[1]||J[2]!==V[2]||J[3]!==V[3])l.viewport(J[0],J[1],J[2],J[3]),V[0]=J[0],V[1]=J[1],V[2]=J[2],V[3]=J[3]},refresh:function(){var a,ka,aa,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob;d.dirty=!1;ka=m.blend_enable;aa=m.cull_enable;ma=m.depth_enable;na=m.dither;Qa=m.polygonOffset_enable;Cb=m.sample_alpha;ea=m.sample_enable;Oa=m.scissor_enable;X=m.stencil_enable;P=m.cull_face;
O=m.depth_func;U=m.depth_mask;pa=m.frontFace;Q=m.lineWidth;Ob=m.stencil_mask;(a=G.next)?l.bindFramebuffer(36160,a.framebuffer):l.bindFramebuffer(36160,null);G.cur=a;a=c[0];a.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=c[1];a.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(1,
a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=c[2];a.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(2),l.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=c[3];a.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,
a.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=c[4];a.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=c[5];a.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(5),
l.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=c[6];a.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=c[7];a.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,a.x,a.y,a.z,
a.w),a.buffer=null);a=c[8];a.buffer?(l.enableVertexAttribArray(8),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=c[9];a.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=c[10];a.buffer?
(l.enableVertexAttribArray(10),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=c[11];a.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=c[12];a.buffer?(l.enableVertexAttribArray(12),
l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=c[13];a.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(13),l.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=c[14];a.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,a.buffer.buffer),
l.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=c[15];a.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);f.currentVAO=null;f.setVAO(f.targetVAO);ka?l.enable(3042):l.disable(3042);d.blend_enable=ka;aa?l.enable(2884):
l.disable(2884);d.cull_enable=aa;ma?l.enable(2929):l.disable(2929);d.depth_enable=ma;na?l.enable(3024):l.disable(3024);d.dither=na;Qa?l.enable(32823):l.disable(32823);d.polygonOffset_enable=Qa;Cb?l.enable(32926):l.disable(32926);d.sample_alpha=Cb;ea?l.enable(32928):l.disable(32928);d.sample_enable=ea;Oa?l.enable(3089):l.disable(3089);d.scissor_enable=Oa;X?l.enable(2960):l.disable(2960);d.stencil_enable=X;l.blendColor(k[0],k[1],k[2],k[3]);b[0]=k[0];b[1]=k[1];b[2]=k[2];b[3]=k[3];l.blendEquationSeparate(q[0],
q[1]);I[0]=q[0];I[1]=q[1];l.blendFuncSeparate(w[0],w[1],w[2],w[3]);e[0]=w[0];e[1]=w[1];e[2]=w[2];e[3]=w[3];l.colorMask(g[0],g[1],g[2],g[3]);p[0]=g[0];p[1]=g[1];p[2]=g[2];p[3]=g[3];l.cullFace(P);d.cull_face=P;l.depthFunc(O);d.depth_func=O;l.depthMask(U);d.depth_mask=U;l.depthRange(n[0],n[1]);t[0]=n[0];t[1]=n[1];l.frontFace(pa);d.frontFace=pa;l.lineWidth(Q);d.lineWidth=Q;l.polygonOffset(v[0],v[1]);D[0]=v[0];D[1]=v[1];l.sampleCoverage(y[0],y[1]);W[0]=y[0];W[1]=y[1];l.scissor(u[0],u[1],u[2],u[3]);H[0]=
u[0];H[1]=u[1];H[2]=u[2];H[3]=u[3];l.stencilFunc(h[0],h[1],h[2]);ta[0]=h[0];ta[1]=h[1];ta[2]=h[2];l.stencilMask(Ob);d.stencil_mask=Ob;l.stencilOpSeparate(S[0],S[1],S[2],S[3]);R[0]=S[0];R[1]=S[1];R[2]=S[2];R[3]=S[3];l.stencilOpSeparate(z[0],z[1],z[2],z[3]);r[0]=z[0];r[1]=z[1];r[2]=z[2];r[3]=z[3];l.viewport(J[0],J[1],J[2],J[3]);V[0]=J[0];V[1]=J[1];V[2]=J[2];V[3]=J[3]}}},$3:function(a,c,d,G){var l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,h,la,ta,S,r,z,ia,J,V,K,ka,aa,ma,na,Qa;l=a.context;m=a.current;f=a.framebuffer;
k=a.gl;b=a.next;q=a.shader;I=a.vao;w=b.blend_color;e=m.blend_color;g=b.blend_equation;p=m.blend_equation;n=b.blend_func;t=m.blend_func;v=b.colorMask;D=m.colorMask;y=b.depth_range;W=m.depth_range;u=b.polygonOffset_offset;h=m.polygonOffset_offset;la=b.sample_coverage;ta=m.sample_coverage;S=b.scissor_box;r=m.scissor_box;z=b.stencil_func;ia=m.stencil_func;J=b.stencil_opBack;V=m.stencil_opBack;K=b.stencil_opFront;ka=m.stencil_opFront;aa=b.viewport;ma=m.viewport;na={};Qa={};return{batch:function(a,d){var l,
A,P,O,U;l=f.next;l!==f.cur&&(l?k.bindFramebuffer(36160,l.framebuffer):k.bindFramebuffer(36160,null),f.cur=l);if(m.dirty){l=b.dither;l!==m.dither&&(l?k.enable(3024):k.disable(3024),m.dither=l);l=b.blend_enable;l!==m.blend_enable&&(l?k.enable(3042):k.disable(3042),m.blend_enable=l);l=w[0];P=w[1];O=w[2];U=w[3];if(l!==e[0]||P!==e[1]||O!==e[2]||U!==e[3])k.blendColor(l,P,O,U),e[0]=l,e[1]=P,e[2]=O,e[3]=U;l=g[0];P=g[1];if(l!==p[0]||P!==p[1])k.blendEquationSeparate(l,P),p[0]=l,p[1]=P;l=n[0];P=n[1];O=n[2];
U=n[3];if(l!==t[0]||P!==t[1]||O!==t[2]||U!==t[3])k.blendFuncSeparate(l,P,O,U),t[0]=l,t[1]=P,t[2]=O,t[3]=U;l=b.depth_enable;l!==m.depth_enable&&(l?k.enable(2929):k.disable(2929),m.depth_enable=l);l=b.depth_func;l!==m.depth_func&&(k.depthFunc(l),m.depth_func=l);l=y[0];P=y[1];if(l!==W[0]||P!==W[1])k.depthRange(l,P),W[0]=l,W[1]=P;l=b.depth_mask;l!==m.depth_mask&&(k.depthMask(l),m.depth_mask=l);l=v[0];P=v[1];O=v[2];U=v[3];if(l!==D[0]||P!==D[1]||O!==D[2]||U!==D[3])k.colorMask(l,P,O,U),D[0]=l,D[1]=P,D[2]=
O,D[3]=U;l=b.cull_enable;l!==m.cull_enable&&(l?k.enable(2884):k.disable(2884),m.cull_enable=l);l=b.cull_face;l!==m.cull_face&&(k.cullFace(l),m.cull_face=l);l=b.frontFace;l!==m.frontFace&&(k.frontFace(l),m.frontFace=l);l=b.lineWidth;l!==m.lineWidth&&(k.lineWidth(l),m.lineWidth=l);l=b.polygonOffset_enable;l!==m.polygonOffset_enable&&(l?k.enable(32823):k.disable(32823),m.polygonOffset_enable=l);l=u[0];P=u[1];if(l!==h[0]||P!==h[1])k.polygonOffset(l,P),h[0]=l,h[1]=P;l=b.sample_alpha;l!==m.sample_alpha&&
(l?k.enable(32926):k.disable(32926),m.sample_alpha=l);l=b.sample_enable;l!==m.sample_enable&&(l?k.enable(32928):k.disable(32928),m.sample_enable=l);l=la[0];P=la[1];if(l!==ta[0]||P!==ta[1])k.sampleCoverage(l,P),ta[0]=l,ta[1]=P;l=b.stencil_enable;l!==m.stencil_enable&&(l?k.enable(2960):k.disable(2960),m.stencil_enable=l);l=b.stencil_mask;l!==m.stencil_mask&&(k.stencilMask(l),m.stencil_mask=l);l=z[0];P=z[1];O=z[2];if(l!==ia[0]||P!==ia[1]||O!==ia[2])k.stencilFunc(l,P,O),ia[0]=l,ia[1]=P,ia[2]=O;l=K[0];
P=K[1];O=K[2];U=K[3];if(l!==ka[0]||P!==ka[1]||O!==ka[2]||U!==ka[3])k.stencilOpSeparate(l,P,O,U),ka[0]=l,ka[1]=P,ka[2]=O,ka[3]=U;l=J[0];P=J[1];O=J[2];U=J[3];if(l!==V[0]||P!==V[1]||O!==V[2]||U!==V[3])k.stencilOpSeparate(l,P,O,U),V[0]=l,V[1]=P,V[2]=O,V[3]=U;l=b.scissor_enable;l!==m.scissor_enable&&(l?k.enable(3089):k.disable(3089),m.scissor_enable=l);l=S[0];P=S[1];O=S[2];U=S[3];if(l!==r[0]||P!==r[1]||O!==r[2]||U!==r[3])k.scissor(l,P,O,U),r[0]=l,r[1]=P,r[2]=O,r[3]=U;l=aa[0];P=aa[1];O=aa[2];U=aa[3];if(l!==
ma[0]||P!==ma[1]||O!==ma[2]||U!==ma[3])k.viewport(l,P,O,U),ma[0]=l,ma[1]=P,ma[2]=O,ma[3]=U;m.dirty=!1}if(l=m.profile)A=performance.now(),c.count+=d;P=q.program(q.vert,q.frag);k.useProgram(P.program);I.setVAO(null);O=P.id;(U=Qa[O])||(U=Qa[O]=G(P));U.call(this,a,d);I.setVAO(null);l&&(c.cpuTime+=performance.now()-A)},draw:function(a){var l,G,X,P,O;l=f.next;l!==f.cur&&(l?k.bindFramebuffer(36160,l.framebuffer):k.bindFramebuffer(36160,null),f.cur=l);if(m.dirty){l=b.dither;l!==m.dither&&(l?k.enable(3024):
k.disable(3024),m.dither=l);l=b.blend_enable;l!==m.blend_enable&&(l?k.enable(3042):k.disable(3042),m.blend_enable=l);l=w[0];X=w[1];P=w[2];O=w[3];if(l!==e[0]||X!==e[1]||P!==e[2]||O!==e[3])k.blendColor(l,X,P,O),e[0]=l,e[1]=X,e[2]=P,e[3]=O;l=g[0];X=g[1];if(l!==p[0]||X!==p[1])k.blendEquationSeparate(l,X),p[0]=l,p[1]=X;l=n[0];X=n[1];P=n[2];O=n[3];if(l!==t[0]||X!==t[1]||P!==t[2]||O!==t[3])k.blendFuncSeparate(l,X,P,O),t[0]=l,t[1]=X,t[2]=P,t[3]=O;l=b.depth_enable;l!==m.depth_enable&&(l?k.enable(2929):k.disable(2929),
m.depth_enable=l);l=b.depth_func;l!==m.depth_func&&(k.depthFunc(l),m.depth_func=l);l=y[0];X=y[1];if(l!==W[0]||X!==W[1])k.depthRange(l,X),W[0]=l,W[1]=X;l=b.depth_mask;l!==m.depth_mask&&(k.depthMask(l),m.depth_mask=l);l=v[0];X=v[1];P=v[2];O=v[3];if(l!==D[0]||X!==D[1]||P!==D[2]||O!==D[3])k.colorMask(l,X,P,O),D[0]=l,D[1]=X,D[2]=P,D[3]=O;l=b.cull_enable;l!==m.cull_enable&&(l?k.enable(2884):k.disable(2884),m.cull_enable=l);l=b.cull_face;l!==m.cull_face&&(k.cullFace(l),m.cull_face=l);l=b.frontFace;l!==m.frontFace&&
(k.frontFace(l),m.frontFace=l);l=b.lineWidth;l!==m.lineWidth&&(k.lineWidth(l),m.lineWidth=l);l=b.polygonOffset_enable;l!==m.polygonOffset_enable&&(l?k.enable(32823):k.disable(32823),m.polygonOffset_enable=l);l=u[0];X=u[1];if(l!==h[0]||X!==h[1])k.polygonOffset(l,X),h[0]=l,h[1]=X;l=b.sample_alpha;l!==m.sample_alpha&&(l?k.enable(32926):k.disable(32926),m.sample_alpha=l);l=b.sample_enable;l!==m.sample_enable&&(l?k.enable(32928):k.disable(32928),m.sample_enable=l);l=la[0];X=la[1];if(l!==ta[0]||X!==ta[1])k.sampleCoverage(l,
X),ta[0]=l,ta[1]=X;l=b.stencil_enable;l!==m.stencil_enable&&(l?k.enable(2960):k.disable(2960),m.stencil_enable=l);l=b.stencil_mask;l!==m.stencil_mask&&(k.stencilMask(l),m.stencil_mask=l);l=z[0];X=z[1];P=z[2];if(l!==ia[0]||X!==ia[1]||P!==ia[2])k.stencilFunc(l,X,P),ia[0]=l,ia[1]=X,ia[2]=P;l=K[0];X=K[1];P=K[2];O=K[3];if(l!==ka[0]||X!==ka[1]||P!==ka[2]||O!==ka[3])k.stencilOpSeparate(l,X,P,O),ka[0]=l,ka[1]=X,ka[2]=P,ka[3]=O;l=J[0];X=J[1];P=J[2];O=J[3];if(l!==V[0]||X!==V[1]||P!==V[2]||O!==V[3])k.stencilOpSeparate(l,
X,P,O),V[0]=l,V[1]=X,V[2]=P,V[3]=O;l=b.scissor_enable;l!==m.scissor_enable&&(l?k.enable(3089):k.disable(3089),m.scissor_enable=l);l=S[0];X=S[1];P=S[2];O=S[3];if(l!==r[0]||X!==r[1]||P!==r[2]||O!==r[3])k.scissor(l,X,P,O),r[0]=l,r[1]=X,r[2]=P,r[3]=O;l=aa[0];X=aa[1];P=aa[2];O=aa[3];if(l!==ma[0]||X!==ma[1]||P!==ma[2]||O!==ma[3])k.viewport(l,X,P,O),ma[0]=l,ma[1]=X,ma[2]=P,ma[3]=O;m.dirty=!1}if(l=m.profile)G=performance.now(),c.count++;X=q.program(q.vert,q.frag);k.useProgram(X.program);I.setVAO(null);P=
X.id;(O=na[P])||(O=na[P]=d(X));O.call(this,a);I.setVAO(null);l&&(c.cpuTime+=performance.now()-G)},scope:function(b,e,g){var f,a;if(f=m.profile)a=performance.now(),c.count++;e(l,b,g);f&&(c.cpuTime+=performance.now()-a)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
c,d,G,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,h,la,ta,r,R,z,ia,J,V,K,ka,aa,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra,cc,pc,jc,td,zc,ba,N,ha,Ha,tb,cd,Nc,L,E,ja,ua,Z,fa,sa){var M,F,ca,za,Aa,Ka,C,mc,Fb,qa,Gb,yb,Ye,xd,ge,je,we,ue,Od,fe,ve,yd,Dd,zd,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb,hd,Hb,nc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb;M=a.attributes;F=a.context;ca=a.current;za=a.draw;Aa=a.elements;Ka=a.framebuffer;C=a.gl;mc=a.next;
Fb=a.shader;qa=a.uniforms;Gb=a.vao;yb=mc.blend_color;Ye=ca.blend_color;xd=mc.blend_equation;ge=ca.blend_equation;je=mc.blend_func;we=ca.blend_func;ue=mc.colorMask;Od=ca.colorMask;fe=mc.depth_range;ve=ca.depth_range;yd=mc.polygonOffset_offset;Dd=ca.polygonOffset_offset;zd=mc.sample_coverage;Ad=ca.sample_coverage;xe=mc.scissor_box;Me=ca.scissor_box;Qe=mc.stencil_func;Bd=ca.stencil_func;Be=mc.stencil_opBack;Vd=ca.stencil_opBack;Wd=mc.stencil_opFront;ae=ca.stencil_opFront;Yd=mc.viewport;qd=ca.viewport;
nd={};vd={};ad=new Float32Array(16);sd=new Float32Array(16);Tc=new Float32Array(16);Ed=new Float32Array(16);Oc=new Float32Array(16);Ic=new Float32Array(16);qc=new Float32Array(16);gb=new Float32Array(16);hd=new Float32Array(16);Hb=new Float32Array(16);nc=new Float32Array(16);Xa=new Float32Array(16);Qc=new Float32Array(16);ac=new Float32Array(16);lc=new Float32Array(16);Id=new Float32Array(16);rd=new Float32Array(16);Fc=new Float32Array(16);dc=new Float32Array(16);Cc=new Float32Array(16);Xc=new Float32Array(16);
Zb=new Float32Array(16);Gc=new Float32Array(16);Ya=new Float32Array(16);Ea=new Float32Array(16);ud=new Float32Array(16);Ib=new Float32Array(16);Ua=new Float32Array(16);Vb=new Float32Array(16);cb=new Float32Array(16);Dc=new Float32Array(16);Xb=new Float32Array(16);return{batch:function(c,a){var d,y,u,h;d=Ka.next;d!==Ka.cur&&(d?C.bindFramebuffer(36160,d.framebuffer):C.bindFramebuffer(36160,null),Ka.cur=d);if(ca.dirty){var W,A,H,z,la,ka,r,ta,J,S,R,qa,K,V,ia,aa,ma,gb,Ba,Fb,Xa,yb,Hb,Ta,ac;W=ue[0];A=ue[1];
H=ue[2];z=ue[3];if(W!==Od[0]||A!==Od[1]||H!==Od[2]||z!==Od[3])C.colorMask(W,A,H,z),Od[0]=W,Od[1]=A,Od[2]=H,Od[3]=z;la=mc.frontFace;la!==ca.frontFace&&(C.frontFace(la),ca.frontFace=la);ka=mc.polygonOffset_enable;ka!==ca.polygonOffset_enable&&(ka?C.enable(32823):C.disable(32823),ca.polygonOffset_enable=ka);r=yd[0];ta=yd[1];if(r!==Dd[0]||ta!==Dd[1])C.polygonOffset(r,ta),Dd[0]=r,Dd[1]=ta;J=mc.sample_alpha;J!==ca.sample_alpha&&(J?C.enable(32926):C.disable(32926),ca.sample_alpha=J);S=mc.sample_enable;S!==
ca.sample_enable&&(S?C.enable(32928):C.disable(32928),ca.sample_enable=S);R=zd[0];qa=zd[1];if(R!==Ad[0]||qa!==Ad[1])C.sampleCoverage(R,qa),Ad[0]=R,Ad[1]=qa;K=mc.stencil_enable;K!==ca.stencil_enable&&(K?C.enable(2960):C.disable(2960),ca.stencil_enable=K);V=mc.stencil_mask;V!==ca.stencil_mask&&(C.stencilMask(V),ca.stencil_mask=V);ia=Qe[0];aa=Qe[1];ma=Qe[2];if(ia!==Bd[0]||aa!==Bd[1]||ma!==Bd[2])C.stencilFunc(ia,aa,ma),Bd[0]=ia,Bd[1]=aa,Bd[2]=ma;gb=Wd[0];Ba=Wd[1];Fb=Wd[2];Xa=Wd[3];if(gb!==ae[0]||Ba!==
ae[1]||Fb!==ae[2]||Xa!==ae[3])C.stencilOpSeparate(gb,Ba,Fb,Xa),ae[0]=gb,ae[1]=Ba,ae[2]=Fb,ae[3]=Xa;yb=Be[0];Hb=Be[1];Ta=Be[2];ac=Be[3];if(yb!==Vd[0]||Hb!==Vd[1]||Ta!==Vd[2]||ac!==Vd[3])C.stencilOpSeparate(yb,Hb,Ta,ac),Vd[0]=yb,Vd[1]=Hb,Vd[2]=Ta,Vd[3]=ac}C.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;C.disable(3042);ca.blend_enable=!1;C.blendEquationSeparate(32774,32774);ge[0]=32774;ge[1]=32774;C.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;C.enable(2884);ca.cull_enable=
!0;C.cullFace(1029);ca.cull_face=1029;C.enable(2929);ca.depth_enable=!0;C.depthFunc(513);ca.depth_func=513;C.depthMask(!0);ca.depth_mask=!0;C.depthRange(0,1);ve[0]=0;ve[1]=1;C.disable(3024);ca.dither=!1;C.lineWidth(2);ca.lineWidth=2;C.enable(3089);ca.scissor_enable=!0;y=ca.profile;ca.profile=!1;C.useProgram(Cb.program);var Ic,Oc,qc,wa,xe,Ma,Tc,fb,ib,xa,Qc,Fa,qb,rb,Za,$a,hd,lc,sd,Wa,Mb,nc,Ia,ad,Sa,Ca,lb,vb,Db,sb,Ed,wb,na;Gb.setVAO(null);Ic=cc.location;Oc=M[Ic];Oc.buffer||C.enableVertexAttribArray(Ic);
if(Oc.type!==G.dtype||4!==Oc.size||Oc.buffer!==G||!1!==Oc.normalized||0!==Oc.offset||0!==Oc.stride)C.bindBuffer(34962,G.buffer),C.vertexAttribPointer(Ic,4,G.dtype,!1,0,0),Oc.type=G.dtype,Oc.size=4,Oc.buffer=G,Oc.normalized=!1,Oc.offset=0,Oc.stride=0;qc=pc.location;wa=M[qc];wa.buffer||C.enableVertexAttribArray(qc);if(wa.type!==l.dtype||4!==wa.size||wa.buffer!==l||!1!==wa.normalized||0!==wa.offset||0!==wa.stride)C.bindBuffer(34962,l.buffer),C.vertexAttribPointer(qc,4,l.dtype,!1,0,0),wa.type=l.dtype,
wa.size=4,wa.buffer=l,wa.normalized=!1,wa.offset=0,wa.stride=0;xe=jc.location;Ma=M[xe];Ma.buffer||C.enableVertexAttribArray(xe);if(Ma.type!==m.dtype||4!==Ma.size||Ma.buffer!==m||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)C.bindBuffer(34962,m.buffer),C.vertexAttribPointer(xe,4,m.dtype,!1,0,0),Ma.type=m.dtype,Ma.size=4,Ma.buffer=m,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;Tc=td.location;fb=M[Tc];fb.buffer||C.enableVertexAttribArray(Tc);if(fb.type!==f.dtype||4!==fb.size||fb.buffer!==f||!1!==fb.normalized||
0!==fb.offset||0!==fb.stride)C.bindBuffer(34962,f.buffer),C.vertexAttribPointer(Tc,4,f.dtype,!1,0,0),fb.type=f.dtype,fb.size=4,fb.buffer=f,fb.normalized=!1,fb.offset=0,fb.stride=0;ib=zc.location;xa=M[ib];xa.buffer||C.enableVertexAttribArray(ib);if(xa.type!==k.dtype||4!==xa.size||xa.buffer!==k||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)C.bindBuffer(34962,k.buffer),C.vertexAttribPointer(ib,4,k.dtype,!1,0,0),xa.type=k.dtype,xa.size=4,xa.buffer=k,xa.normalized=!1,xa.offset=0,xa.stride=0;Qc=ba.location;
Fa=M[Qc];Fa.buffer||C.enableVertexAttribArray(Qc);if(Fa.type!==b.dtype||4!==Fa.size||Fa.buffer!==b||!1!==Fa.normalized||0!==Fa.offset||0!==Fa.stride)C.bindBuffer(34962,b.buffer),C.vertexAttribPointer(Qc,4,b.dtype,!1,0,0),Fa.type=b.dtype,Fa.size=4,Fa.buffer=b,Fa.normalized=!1,Fa.offset=0,Fa.stride=0;qb=N.location;rb=M[qb];rb.buffer||C.enableVertexAttribArray(qb);if(rb.type!==q.dtype||4!==rb.size||rb.buffer!==q||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(qb,
4,q.dtype,!1,0,0),rb.type=q.dtype,rb.size=4,rb.buffer=q,rb.normalized=!1,rb.offset=0,rb.stride=0;Za=ha.location;$a=M[Za];$a.buffer||C.enableVertexAttribArray(Za);if($a.type!==I.dtype||4!==$a.size||$a.buffer!==I||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)C.bindBuffer(34962,I.buffer),C.vertexAttribPointer(Za,4,I.dtype,!1,0,0),$a.type=I.dtype,$a.size=4,$a.buffer=I,$a.normalized=!1,$a.offset=0,$a.stride=0;hd=Ha.location;lc=M[hd];lc.buffer||C.enableVertexAttribArray(hd);if(lc.type!==w.dtype||4!==
lc.size||lc.buffer!==w||!1!==lc.normalized||0!==lc.offset||0!==lc.stride)C.bindBuffer(34962,w.buffer),C.vertexAttribPointer(hd,4,w.dtype,!1,0,0),lc.type=w.dtype,lc.size=4,lc.buffer=w,lc.normalized=!1,lc.offset=0,lc.stride=0;sd=tb.location;Wa=M[sd];Wa.buffer||C.enableVertexAttribArray(sd);if(Wa.type!==e.dtype||4!==Wa.size||Wa.buffer!==e||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)C.bindBuffer(34962,e.buffer),C.vertexAttribPointer(sd,4,e.dtype,!1,0,0),Wa.type=e.dtype,Wa.size=4,Wa.buffer=e,Wa.normalized=
!1,Wa.offset=0,Wa.stride=0;Mb=cd.location;nc=M[Mb];nc.buffer||C.enableVertexAttribArray(Mb);if(nc.type!==g.dtype||4!==nc.size||nc.buffer!==g||!1!==nc.normalized||0!==nc.offset||0!==nc.stride)C.bindBuffer(34962,g.buffer),C.vertexAttribPointer(Mb,4,g.dtype,!1,0,0),nc.type=g.dtype,nc.size=4,nc.buffer=g,nc.normalized=!1,nc.offset=0,nc.stride=0;Ia=Nc.location;ad=M[Ia];ad.buffer||C.enableVertexAttribArray(Ia);if(ad.type!==p.dtype||4!==ad.size||ad.buffer!==p||!1!==ad.normalized||0!==ad.offset||0!==ad.stride)C.bindBuffer(34962,
p.buffer),C.vertexAttribPointer(Ia,4,p.dtype,!1,0,0),ad.type=p.dtype,ad.size=4,ad.buffer=p,ad.normalized=!1,ad.offset=0,ad.stride=0;Sa=L.location;Ca=M[Sa];Ca.buffer||C.enableVertexAttribArray(Sa);if(Ca.type!==n.dtype||4!==Ca.size||Ca.buffer!==n||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)C.bindBuffer(34962,n.buffer),C.vertexAttribPointer(Sa,4,n.dtype,!1,0,0),Ca.type=n.dtype,Ca.size=4,Ca.buffer=n,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;lb=E.location;vb=M[lb];vb.buffer||C.enableVertexAttribArray(lb);
if(vb.type!==t.dtype||4!==vb.size||vb.buffer!==t||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)C.bindBuffer(34962,t.buffer),C.vertexAttribPointer(lb,4,t.dtype,!1,0,0),vb.type=t.dtype,vb.size=4,vb.buffer=t,vb.normalized=!1,vb.offset=0,vb.stride=0;Db=ja.location;sb=M[Db];sb.buffer||C.enableVertexAttribArray(Db);if(sb.type!==v.dtype||4!==sb.size||sb.buffer!==v||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)C.bindBuffer(34962,v.buffer),C.vertexAttribPointer(Db,4,v.dtype,!1,0,0),sb.type=v.dtype,
sb.size=4,sb.buffer=v,sb.normalized=!1,sb.offset=0,sb.stride=0;Ed=Oa.location;wb=M[Ed];wb.buffer||C.enableVertexAttribArray(Ed);if(wb.type!==D.dtype||4!==wb.size||wb.buffer!==D||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)C.bindBuffer(34962,D.buffer),C.vertexAttribPointer(Ed,4,D.dtype,!1,0,0),wb.type=D.dtype,wb.size=4,wb.buffer=D,wb.normalized=!1,wb.offset=0,wb.stride=0;C.uniform1i(ua.location,ea.bind());(na=za.elements)?C.bindBuffer(34963,na.buffer.buffer):Gb.currentVAO&&(na=Aa.getElements(Gb.currentVAO.elements))&&
C.bindBuffer(34963,na.buffer.buffer);for(u=0;u<a;++u){h=c[u];var je,fe,Yd,Id,Qa,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,xd,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be;nd.height=h.viewportHeight;nd.width=h.viewportWidth;nd.x=h.viewportX;nd.y=h.viewportY;je=nd.x|0;fe=nd.y|0;Yd="width"in nd?nd.width|0:F.framebufferWidth-je;Id="height"in nd?nd.height|0:F.framebufferHeight-fe;Qa=F.viewportWidth;F.viewportWidth=Yd;Wb=F.viewportHeight;
F.viewportHeight=Id;C.viewport(je,fe,Yd,Id);qd[0]=je;qd[1]=fe;qd[2]=Yd;qd[3]=Id;vd.height=h.scissorHeight;vd.width=h.scissorWidth;vd.x=h.scissorX;vd.y=h.scissorY;bc=vd.x|0;Qb=vd.y|0;Ja="width"in vd?vd.width|0:F.framebufferWidth-bc;$b="height"in vd?vd.height|0:F.framebufferHeight-Qb;C.scissor(bc,Qb,Ja,$b);Me[0]=bc;Me[1]=Qb;Me[2]=Ja;Me[3]=$b;mb=h.dim0A;C.uniformMatrix4fv(P.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(rd[0]=mb[0],rd[1]=mb[1],rd[2]=mb[2],rd[3]=mb[3],rd[4]=mb[4],rd[5]=
mb[5],rd[6]=mb[6],rd[7]=mb[7],rd[8]=mb[8],rd[9]=mb[9],rd[10]=mb[10],rd[11]=mb[11],rd[12]=mb[12],rd[13]=mb[13],rd[14]=mb[14],rd[15]=mb[15],rd));xb=h.dim1A;C.uniformMatrix4fv(Q.location,!1,Array.isArray(xb)||xb instanceof Float32Array?xb:(Fc[0]=xb[0],Fc[1]=xb[1],Fc[2]=xb[2],Fc[3]=xb[3],Fc[4]=xb[4],Fc[5]=xb[5],Fc[6]=xb[6],Fc[7]=xb[7],Fc[8]=xb[8],Fc[9]=xb[9],Fc[10]=xb[10],Fc[11]=xb[11],Fc[12]=xb[12],Fc[13]=xb[13],Fc[14]=xb[14],Fc[15]=xb[15],Fc));Nb=h.dim0B;C.uniformMatrix4fv(O.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(dc[0]=Nb[0],dc[1]=Nb[1],dc[2]=Nb[2],dc[3]=Nb[3],dc[4]=Nb[4],dc[5]=Nb[5],dc[6]=Nb[6],dc[7]=Nb[7],dc[8]=Nb[8],dc[9]=Nb[9],dc[10]=Nb[10],dc[11]=Nb[11],dc[12]=Nb[12],dc[13]=Nb[13],dc[14]=Nb[14],dc[15]=Nb[15],dc));Rb=h.dim1B;C.uniformMatrix4fv(Ob.location,!1,Array.isArray(Rb)||Rb instanceof Float32Array?Rb:(Cc[0]=Rb[0],Cc[1]=Rb[1],Cc[2]=Rb[2],Cc[3]=Rb[3],Cc[4]=Rb[4],Cc[5]=Rb[5],Cc[6]=Rb[6],Cc[7]=Rb[7],Cc[8]=Rb[8],Cc[9]=Rb[9],Cc[10]=Rb[10],Cc[11]=Rb[11],Cc[12]=Rb[12],Cc[13]=
Rb[13],Cc[14]=Rb[14],Cc[15]=Rb[15],Cc));fc=h.dim0C;C.uniformMatrix4fv(U.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(Xc[0]=fc[0],Xc[1]=fc[1],Xc[2]=fc[2],Xc[3]=fc[3],Xc[4]=fc[4],Xc[5]=fc[5],Xc[6]=fc[6],Xc[7]=fc[7],Xc[8]=fc[8],Xc[9]=fc[9],Xc[10]=fc[10],Xc[11]=fc[11],Xc[12]=fc[12],Xc[13]=fc[13],Xc[14]=fc[14],Xc[15]=fc[15],Xc));hc=h.dim1C;C.uniformMatrix4fv(ab.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Zb[0]=hc[0],Zb[1]=hc[1],Zb[2]=hc[2],Zb[3]=hc[3],Zb[4]=hc[4],Zb[5]=
hc[5],Zb[6]=hc[6],Zb[7]=hc[7],Zb[8]=hc[8],Zb[9]=hc[9],Zb[10]=hc[10],Zb[11]=hc[11],Zb[12]=hc[12],Zb[13]=hc[13],Zb[14]=hc[14],Zb[15]=hc[15],Zb));xd=h.dim0D;C.uniformMatrix4fv(pa.location,!1,Array.isArray(xd)||xd instanceof Float32Array?xd:(Gc[0]=xd[0],Gc[1]=xd[1],Gc[2]=xd[2],Gc[3]=xd[3],Gc[4]=xd[4],Gc[5]=xd[5],Gc[6]=xd[6],Gc[7]=xd[7],Gc[8]=xd[8],Gc[9]=xd[9],Gc[10]=xd[10],Gc[11]=xd[11],Gc[12]=xd[12],Gc[13]=xd[13],Gc[14]=xd[14],Gc[15]=xd[15],Gc));xc=h.dim1D;C.uniformMatrix4fv(T.location,!1,Array.isArray(xc)||
xc instanceof Float32Array?xc:(Ya[0]=xc[0],Ya[1]=xc[1],Ya[2]=xc[2],Ya[3]=xc[3],Ya[4]=xc[4],Ya[5]=xc[5],Ya[6]=xc[6],Ya[7]=xc[7],Ya[8]=xc[8],Ya[9]=xc[9],Ya[10]=xc[10],Ya[11]=xc[11],Ya[12]=xc[12],Ya[13]=xc[13],Ya[14]=xc[14],Ya[15]=xc[15],Ya));yc=h.loA;C.uniformMatrix4fv(zb.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(Ea[0]=yc[0],Ea[1]=yc[1],Ea[2]=yc[2],Ea[3]=yc[3],Ea[4]=yc[4],Ea[5]=yc[5],Ea[6]=yc[6],Ea[7]=yc[7],Ea[8]=yc[8],Ea[9]=yc[9],Ea[10]=yc[10],Ea[11]=yc[11],Ea[12]=yc[12],Ea[13]=
yc[13],Ea[14]=yc[14],Ea[15]=yc[15],Ea));Ac=h.hiA;C.uniformMatrix4fv(oa.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(ud[0]=Ac[0],ud[1]=Ac[1],ud[2]=Ac[2],ud[3]=Ac[3],ud[4]=Ac[4],ud[5]=Ac[5],ud[6]=Ac[6],ud[7]=Ac[7],ud[8]=Ac[8],ud[9]=Ac[9],ud[10]=Ac[10],ud[11]=Ac[11],ud[12]=Ac[12],ud[13]=Ac[13],ud[14]=Ac[14],ud[15]=Ac[15],ud));Kc=h.loB;C.uniformMatrix4fv(La.location,!1,Array.isArray(Kc)||Kc instanceof Float32Array?Kc:(Ib[0]=Kc[0],Ib[1]=Kc[1],Ib[2]=Kc[2],Ib[3]=Kc[3],Ib[4]=Kc[4],Ib[5]=
Kc[5],Ib[6]=Kc[6],Ib[7]=Kc[7],Ib[8]=Kc[8],Ib[9]=Kc[9],Ib[10]=Kc[10],Ib[11]=Kc[11],Ib[12]=Kc[12],Ib[13]=Kc[13],Ib[14]=Kc[14],Ib[15]=Kc[15],Ib));$c=h.hiB;C.uniformMatrix4fv(da.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Ua[0]=$c[0],Ua[1]=$c[1],Ua[2]=$c[2],Ua[3]=$c[3],Ua[4]=$c[4],Ua[5]=$c[5],Ua[6]=$c[6],Ua[7]=$c[7],Ua[8]=$c[8],Ua[9]=$c[9],Ua[10]=$c[10],Ua[11]=$c[11],Ua[12]=$c[12],Ua[13]=$c[13],Ua[14]=$c[14],Ua[15]=$c[15],Ua));Rc=h.loC;C.uniformMatrix4fv(Y.location,!1,Array.isArray(Rc)||
Rc instanceof Float32Array?Rc:(Vb[0]=Rc[0],Vb[1]=Rc[1],Vb[2]=Rc[2],Vb[3]=Rc[3],Vb[4]=Rc[4],Vb[5]=Rc[5],Vb[6]=Rc[6],Vb[7]=Rc[7],Vb[8]=Rc[8],Vb[9]=Rc[9],Vb[10]=Rc[10],Vb[11]=Rc[11],Vb[12]=Rc[12],Vb[13]=Rc[13],Vb[14]=Rc[14],Vb[15]=Rc[15],Vb));Lc=h.hiC;C.uniformMatrix4fv(Da.location,!1,Array.isArray(Lc)||Lc instanceof Float32Array?Lc:(cb[0]=Lc[0],cb[1]=Lc[1],cb[2]=Lc[2],cb[3]=Lc[3],cb[4]=Lc[4],cb[5]=Lc[5],cb[6]=Lc[6],cb[7]=Lc[7],cb[8]=Lc[8],cb[9]=Lc[9],cb[10]=Lc[10],cb[11]=Lc[11],cb[12]=Lc[12],cb[13]=
Lc[13],cb[14]=Lc[14],cb[15]=Lc[15],cb));Kb=h.loD;C.uniformMatrix4fv(nb.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(Dc[0]=Kb[0],Dc[1]=Kb[1],Dc[2]=Kb[2],Dc[3]=Kb[3],Dc[4]=Kb[4],Dc[5]=Kb[5],Dc[6]=Kb[6],Dc[7]=Kb[7],Dc[8]=Kb[8],Dc[9]=Kb[9],Dc[10]=Kb[10],Dc[11]=Kb[11],Dc[12]=Kb[12],Dc[13]=Kb[13],Dc[14]=Kb[14],Dc[15]=Kb[15],Dc));Eb=h.hiD;C.uniformMatrix4fv(Ga.location,!1,Array.isArray(Eb)||Eb instanceof Float32Array?Eb:(Xb[0]=Eb[0],Xb[1]=Eb[1],Xb[2]=Eb[2],Xb[3]=Eb[3],Xb[4]=Eb[4],Xb[5]=
Eb[5],Xb[6]=Eb[6],Xb[7]=Eb[7],Xb[8]=Eb[8],Xb[9]=Eb[9],Xb[10]=Eb[10],Xb[11]=Eb[11],Xb[12]=Eb[12],Xb[13]=Eb[13],Xb[14]=Eb[14],Xb[15]=Eb[15],Xb));Mc=h.resolution;Ec=Mc[0];gc=Mc[1];u&&Sc===Ec&&Vc===gc||(Sc=Ec,Vc=gc,C.uniform2f(Z.location,Ec,gc));gd=h.viewBoxPos;kd=gd[0];Wc=gd[1];u&&md===kd&&bf===Wc||(md=kd,bf=Wc,C.uniform2f(fa.location,kd,Wc));Zd=h.viewBoxSize;ke=Zd[0];me=Zd[1];u&&se===ke&&Md===me||(se=ke,Md=me,C.uniform2f(sa.location,ke,me));Kd=h.maskHeight;u&&id===Kd||(id=Kd,C.uniform1f(ga.location,
Kd));Bc=h.drwLayer;u&&od===Bc||(od=Bc,C.uniform1f(B.location,Bc));ld=h.contextColor;bd=ld[0];Gd=ld[1];te=ld[2];Ae=ld[3];u&&pd===bd&&Hd===Gd&&ze===te&&ne===Ae||(pd=bd,Hd=Gd,ze=te,ne=Ae,C.uniform4f(X.location,bd,Gd,te,Ae));(ee=h.maskTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);de=ee._texture;C.uniform1i(ra.location,de.bind());pe=h.offset;if(be=h.count)na?C.drawElements(1,be,na.type,pe<<(na.type-5121>>1)):C.drawArrays(1,pe,be),F.viewportWidth=Qa,F.viewportHeight=Wb,de.unbind()}ea.unbind();
ca.dirty=!0;Gb.setVAO(null);ca.profile=y},draw:function(c){var a,u,x,h,W,H;a=Ka.next;a!==Ka.cur&&(a?C.bindFramebuffer(36160,a.framebuffer):C.bindFramebuffer(36160,null),Ka.cur=a);if(ca.dirty){a=ue[0];H=ue[1];u=ue[2];x=ue[3];if(a!==Od[0]||H!==Od[1]||u!==Od[2]||x!==Od[3])C.colorMask(a,H,u,x),Od[0]=a,Od[1]=H,Od[2]=u,Od[3]=x;a=mc.frontFace;a!==ca.frontFace&&(C.frontFace(a),ca.frontFace=a);a=mc.polygonOffset_enable;a!==ca.polygonOffset_enable&&(a?C.enable(32823):C.disable(32823),ca.polygonOffset_enable=
a);a=yd[0];H=yd[1];if(a!==Dd[0]||H!==Dd[1])C.polygonOffset(a,H),Dd[0]=a,Dd[1]=H;a=mc.sample_alpha;a!==ca.sample_alpha&&(a?C.enable(32926):C.disable(32926),ca.sample_alpha=a);a=mc.sample_enable;a!==ca.sample_enable&&(a?C.enable(32928):C.disable(32928),ca.sample_enable=a);a=zd[0];H=zd[1];if(a!==Ad[0]||H!==Ad[1])C.sampleCoverage(a,H),Ad[0]=a,Ad[1]=H;a=mc.stencil_enable;a!==ca.stencil_enable&&(a?C.enable(2960):C.disable(2960),ca.stencil_enable=a);a=mc.stencil_mask;a!==ca.stencil_mask&&(C.stencilMask(a),
ca.stencil_mask=a);a=Qe[0];H=Qe[1];u=Qe[2];if(a!==Bd[0]||H!==Bd[1]||u!==Bd[2])C.stencilFunc(a,H,u),Bd[0]=a,Bd[1]=H,Bd[2]=u;a=Wd[0];H=Wd[1];u=Wd[2];x=Wd[3];if(a!==ae[0]||H!==ae[1]||u!==ae[2]||x!==ae[3])C.stencilOpSeparate(a,H,u,x),ae[0]=a,ae[1]=H,ae[2]=u,ae[3]=x;a=Be[0];H=Be[1];u=Be[2];x=Be[3];if(a!==Vd[0]||H!==Vd[1]||u!==Vd[2]||x!==Vd[3])C.stencilOpSeparate(a,H,u,x),Vd[0]=a,Vd[1]=H,Vd[2]=u,Vd[3]=x}nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;u=nd.x|0;x=nd.y|
0;h="width"in nd?nd.width|0:F.framebufferWidth-u;W="height"in nd?nd.height|0:F.framebufferHeight-x;a=F.viewportWidth;F.viewportWidth=h;H=F.viewportHeight;F.viewportHeight=W;C.viewport(u,x,h,W);qd[0]=u;qd[1]=x;qd[2]=h;qd[3]=W;C.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;C.disable(3042);ca.blend_enable=!1;C.blendEquationSeparate(32774,32774);ge[0]=32774;ge[1]=32774;C.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;C.enable(2884);ca.cull_enable=!0;C.cullFace(1029);ca.cull_face=
1029;C.enable(2929);ca.depth_enable=!0;C.depthFunc(513);ca.depth_func=513;C.depthMask(!0);ca.depth_mask=!0;C.depthRange(0,1);ve[0]=0;ve[1]=1;C.disable(3024);ca.dither=!1;C.lineWidth(2);ca.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;u=vd.x|0;x=vd.y|0;h="width"in vd?vd.width|0:F.framebufferWidth-u;W="height"in vd?vd.height|0:F.framebufferHeight-x;C.scissor(u,x,h,W);Me[0]=u;Me[1]=x;Me[2]=h;Me[3]=W;C.enable(3089);ca.scissor_enable=!0;u=ca.profile;ca.profile=
!1;C.useProgram(d.program);Gb.setVAO(null);x=cc.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==G.dtype||4!==h.size||h.buffer!==G||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,G.buffer),C.vertexAttribPointer(x,4,G.dtype,!1,0,0),h.type=G.dtype,h.size=4,h.buffer=G,h.normalized=!1,h.offset=0,h.stride=0;x=pc.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==l.dtype||4!==h.size||h.buffer!==l||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,
l.buffer),C.vertexAttribPointer(x,4,l.dtype,!1,0,0),h.type=l.dtype,h.size=4,h.buffer=l,h.normalized=!1,h.offset=0,h.stride=0;x=jc.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==m.dtype||4!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,m.buffer),C.vertexAttribPointer(x,4,m.dtype,!1,0,0),h.type=m.dtype,h.size=4,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;x=td.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==f.dtype||
4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,f.buffer),C.vertexAttribPointer(x,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;x=zc.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,k.buffer),C.vertexAttribPointer(x,4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,h.normalized=!1,h.offset=0,
h.stride=0;x=ba.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==b.dtype||4!==h.size||h.buffer!==b||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,b.buffer),C.vertexAttribPointer(x,4,b.dtype,!1,0,0),h.type=b.dtype,h.size=4,h.buffer=b,h.normalized=!1,h.offset=0,h.stride=0;x=N.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==q.dtype||4!==h.size||h.buffer!==q||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(x,
4,q.dtype,!1,0,0),h.type=q.dtype,h.size=4,h.buffer=q,h.normalized=!1,h.offset=0,h.stride=0;x=ha.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==I.dtype||4!==h.size||h.buffer!==I||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,I.buffer),C.vertexAttribPointer(x,4,I.dtype,!1,0,0),h.type=I.dtype,h.size=4,h.buffer=I,h.normalized=!1,h.offset=0,h.stride=0;x=Ha.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==w.dtype||4!==h.size||h.buffer!==w||!1!==h.normalized||
0!==h.offset||0!==h.stride)C.bindBuffer(34962,w.buffer),C.vertexAttribPointer(x,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;x=tb.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==e.dtype||4!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,e.buffer),C.vertexAttribPointer(x,4,e.dtype,!1,0,0),h.type=e.dtype,h.size=4,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;x=cd.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);
if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,g.buffer),C.vertexAttribPointer(x,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;x=Nc.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==p.dtype||4!==h.size||h.buffer!==p||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,p.buffer),C.vertexAttribPointer(x,4,p.dtype,!1,0,0),h.type=p.dtype,h.size=4,h.buffer=p,h.normalized=
!1,h.offset=0,h.stride=0;x=L.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,n.buffer),C.vertexAttribPointer(x,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,h.normalized=!1,h.offset=0,h.stride=0;x=E.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==t.dtype||4!==h.size||h.buffer!==t||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,t.buffer),
C.vertexAttribPointer(x,4,t.dtype,!1,0,0),h.type=t.dtype,h.size=4,h.buffer=t,h.normalized=!1,h.offset=0,h.stride=0;x=ja.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==v.dtype||4!==h.size||h.buffer!==v||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,v.buffer),C.vertexAttribPointer(x,4,v.dtype,!1,0,0),h.type=v.dtype,h.size=4,h.buffer=v,h.normalized=!1,h.offset=0,h.stride=0;x=Oa.location;h=M[x];h.buffer||C.enableVertexAttribArray(x);if(h.type!==D.dtype||4!==h.size||
h.buffer!==D||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,D.buffer),C.vertexAttribPointer(x,4,D.dtype,!1,0,0),h.type=D.dtype,h.size=4,h.buffer=D,h.normalized=!1,h.offset=0,h.stride=0;x=c.dim0A;C.uniformMatrix4fv(P.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(ad[0]=x[0],ad[1]=x[1],ad[2]=x[2],ad[3]=x[3],ad[4]=x[4],ad[5]=x[5],ad[6]=x[6],ad[7]=x[7],ad[8]=x[8],ad[9]=x[9],ad[10]=x[10],ad[11]=x[11],ad[12]=x[12],ad[13]=x[13],ad[14]=x[14],ad[15]=x[15],ad));x=c.dim1A;C.uniformMatrix4fv(Q.location,
!1,Array.isArray(x)||x instanceof Float32Array?x:(sd[0]=x[0],sd[1]=x[1],sd[2]=x[2],sd[3]=x[3],sd[4]=x[4],sd[5]=x[5],sd[6]=x[6],sd[7]=x[7],sd[8]=x[8],sd[9]=x[9],sd[10]=x[10],sd[11]=x[11],sd[12]=x[12],sd[13]=x[13],sd[14]=x[14],sd[15]=x[15],sd));x=c.dim0B;C.uniformMatrix4fv(O.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Tc[0]=x[0],Tc[1]=x[1],Tc[2]=x[2],Tc[3]=x[3],Tc[4]=x[4],Tc[5]=x[5],Tc[6]=x[6],Tc[7]=x[7],Tc[8]=x[8],Tc[9]=x[9],Tc[10]=x[10],Tc[11]=x[11],Tc[12]=x[12],Tc[13]=x[13],Tc[14]=
x[14],Tc[15]=x[15],Tc));x=c.dim1B;C.uniformMatrix4fv(Ob.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Ed[0]=x[0],Ed[1]=x[1],Ed[2]=x[2],Ed[3]=x[3],Ed[4]=x[4],Ed[5]=x[5],Ed[6]=x[6],Ed[7]=x[7],Ed[8]=x[8],Ed[9]=x[9],Ed[10]=x[10],Ed[11]=x[11],Ed[12]=x[12],Ed[13]=x[13],Ed[14]=x[14],Ed[15]=x[15],Ed));x=c.dim0C;C.uniformMatrix4fv(U.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Oc[0]=x[0],Oc[1]=x[1],Oc[2]=x[2],Oc[3]=x[3],Oc[4]=x[4],Oc[5]=x[5],Oc[6]=x[6],Oc[7]=x[7],Oc[8]=x[8],Oc[9]=
x[9],Oc[10]=x[10],Oc[11]=x[11],Oc[12]=x[12],Oc[13]=x[13],Oc[14]=x[14],Oc[15]=x[15],Oc));x=c.dim1C;C.uniformMatrix4fv(ab.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Ic[0]=x[0],Ic[1]=x[1],Ic[2]=x[2],Ic[3]=x[3],Ic[4]=x[4],Ic[5]=x[5],Ic[6]=x[6],Ic[7]=x[7],Ic[8]=x[8],Ic[9]=x[9],Ic[10]=x[10],Ic[11]=x[11],Ic[12]=x[12],Ic[13]=x[13],Ic[14]=x[14],Ic[15]=x[15],Ic));x=c.dim0D;C.uniformMatrix4fv(pa.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(qc[0]=x[0],qc[1]=x[1],qc[2]=x[2],qc[3]=
x[3],qc[4]=x[4],qc[5]=x[5],qc[6]=x[6],qc[7]=x[7],qc[8]=x[8],qc[9]=x[9],qc[10]=x[10],qc[11]=x[11],qc[12]=x[12],qc[13]=x[13],qc[14]=x[14],qc[15]=x[15],qc));x=c.dim1D;C.uniformMatrix4fv(T.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(gb[0]=x[0],gb[1]=x[1],gb[2]=x[2],gb[3]=x[3],gb[4]=x[4],gb[5]=x[5],gb[6]=x[6],gb[7]=x[7],gb[8]=x[8],gb[9]=x[9],gb[10]=x[10],gb[11]=x[11],gb[12]=x[12],gb[13]=x[13],gb[14]=x[14],gb[15]=x[15],gb));x=c.loA;C.uniformMatrix4fv(zb.location,!1,Array.isArray(x)||x instanceof
Float32Array?x:(hd[0]=x[0],hd[1]=x[1],hd[2]=x[2],hd[3]=x[3],hd[4]=x[4],hd[5]=x[5],hd[6]=x[6],hd[7]=x[7],hd[8]=x[8],hd[9]=x[9],hd[10]=x[10],hd[11]=x[11],hd[12]=x[12],hd[13]=x[13],hd[14]=x[14],hd[15]=x[15],hd));x=c.hiA;C.uniformMatrix4fv(oa.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Hb[0]=x[0],Hb[1]=x[1],Hb[2]=x[2],Hb[3]=x[3],Hb[4]=x[4],Hb[5]=x[5],Hb[6]=x[6],Hb[7]=x[7],Hb[8]=x[8],Hb[9]=x[9],Hb[10]=x[10],Hb[11]=x[11],Hb[12]=x[12],Hb[13]=x[13],Hb[14]=x[14],Hb[15]=x[15],Hb));x=c.loB;C.uniformMatrix4fv(La.location,
!1,Array.isArray(x)||x instanceof Float32Array?x:(nc[0]=x[0],nc[1]=x[1],nc[2]=x[2],nc[3]=x[3],nc[4]=x[4],nc[5]=x[5],nc[6]=x[6],nc[7]=x[7],nc[8]=x[8],nc[9]=x[9],nc[10]=x[10],nc[11]=x[11],nc[12]=x[12],nc[13]=x[13],nc[14]=x[14],nc[15]=x[15],nc));x=c.hiB;C.uniformMatrix4fv(da.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Xa[0]=x[0],Xa[1]=x[1],Xa[2]=x[2],Xa[3]=x[3],Xa[4]=x[4],Xa[5]=x[5],Xa[6]=x[6],Xa[7]=x[7],Xa[8]=x[8],Xa[9]=x[9],Xa[10]=x[10],Xa[11]=x[11],Xa[12]=x[12],Xa[13]=x[13],Xa[14]=
x[14],Xa[15]=x[15],Xa));x=c.loC;C.uniformMatrix4fv(Y.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Qc[0]=x[0],Qc[1]=x[1],Qc[2]=x[2],Qc[3]=x[3],Qc[4]=x[4],Qc[5]=x[5],Qc[6]=x[6],Qc[7]=x[7],Qc[8]=x[8],Qc[9]=x[9],Qc[10]=x[10],Qc[11]=x[11],Qc[12]=x[12],Qc[13]=x[13],Qc[14]=x[14],Qc[15]=x[15],Qc));x=c.hiC;C.uniformMatrix4fv(Da.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(ac[0]=x[0],ac[1]=x[1],ac[2]=x[2],ac[3]=x[3],ac[4]=x[4],ac[5]=x[5],ac[6]=x[6],ac[7]=x[7],ac[8]=x[8],ac[9]=x[9],
ac[10]=x[10],ac[11]=x[11],ac[12]=x[12],ac[13]=x[13],ac[14]=x[14],ac[15]=x[15],ac));x=c.loD;C.uniformMatrix4fv(nb.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(lc[0]=x[0],lc[1]=x[1],lc[2]=x[2],lc[3]=x[3],lc[4]=x[4],lc[5]=x[5],lc[6]=x[6],lc[7]=x[7],lc[8]=x[8],lc[9]=x[9],lc[10]=x[10],lc[11]=x[11],lc[12]=x[12],lc[13]=x[13],lc[14]=x[14],lc[15]=x[15],lc));x=c.hiD;C.uniformMatrix4fv(Ga.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Id[0]=x[0],Id[1]=x[1],Id[2]=x[2],Id[3]=x[3],Id[4]=
x[4],Id[5]=x[5],Id[6]=x[6],Id[7]=x[7],Id[8]=x[8],Id[9]=x[9],Id[10]=x[10],Id[11]=x[11],Id[12]=x[12],Id[13]=x[13],Id[14]=x[14],Id[15]=x[15],Id));x=c.resolution;C.uniform2f(Z.location,x[0],x[1]);x=c.viewBoxPos;C.uniform2f(fa.location,x[0],x[1]);x=c.viewBoxSize;C.uniform2f(sa.location,x[0],x[1]);C.uniform1f(ga.location,c.maskHeight);C.uniform1f(B.location,c.drwLayer);x=c.contextColor;C.uniform4f(X.location,x[0],x[1],x[2],x[3]);(x=c.maskTexture)&&"framebuffer"===x._reglType&&(x=x.color[0]);x=x._texture;
C.uniform1i(ra.location,x.bind());C.uniform1i(ua.location,y.bind());(h=za.elements)?C.bindBuffer(34963,h.buffer.buffer):Gb.currentVAO&&(h=Aa.getElements(Gb.currentVAO.elements))&&C.bindBuffer(34963,h.buffer.buffer);W=c.offset;if(c=c.count)h?C.drawElements(1,c,h.type,W<<(h.type-5121>>1)):C.drawArrays(1,W,c),ca.dirty=!0,Gb.setVAO(null),F.viewportWidth=a,F.viewportHeight=H,ca.profile=u,x.unbind(),y.unbind()},scope:function(c,a,d){var y,A,C,B,E,N,M,L,ba,O,P,Q,U,T,Y,Z,fa,ha,X,ja,da,ga,oa,Aa,ua,Ea,pc,gb,
Ka,sa,Xa,wa,Ha,ea,Zb,Ad,Hb,xa,Oc,Fa,Gb,Ya,Wd,ac,Cc,Ic,pa,dc,Ua,Gc,Ia,qc,Sa,Ca,lc,Xc,td,ra,Ib,cb,Tc,nc,Bd,Vd,ad,Qc,hd,Fc,Vb,Ja,tb,mb,xb,qd,sd,ae,cd,Xb,Ed,zc,ud,Dc,Od,Da,rd,Kb,Eb,Ye,ge,yd,Me,Be,Ga,Id,cc,Oa,Qe,ab,jc,zd,ue,nb,Dd,we,Bc,Ob,ve,La,Nc,zb,Cb,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,
Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;y=nd.x|0;A=nd.y|0;C="width"in nd?nd.width|0:F.framebufferWidth-y;B="height"in nd?nd.height|0:F.framebufferHeight-A;E=F.viewportWidth;F.viewportWidth=
C;N=F.viewportHeight;F.viewportHeight=B;M=Yd[0];Yd[0]=y;L=Yd[1];Yd[1]=A;ba=Yd[2];Yd[2]=C;O=Yd[3];Yd[3]=B;P=yb[0];yb[0]=0;Q=yb[1];yb[1]=0;U=yb[2];yb[2]=0;T=yb[3];yb[3]=0;Y=mc.blend_enable;mc.blend_enable=!1;Z=xd[0];xd[0]=32774;fa=xd[1];xd[1]=32774;ha=je[0];je[0]=770;X=je[1];je[1]=771;ja=je[2];je[2]=1;da=je[3];je[3]=1;ga=mc.cull_enable;mc.cull_enable=!0;oa=mc.cull_face;mc.cull_face=1029;Aa=mc.depth_enable;mc.depth_enable=!0;ua=mc.depth_func;mc.depth_func=513;Ea=mc.depth_mask;mc.depth_mask=!0;pc=fe[0];
fe[0]=0;gb=fe[1];fe[1]=1;Ka=mc.dither;mc.dither=!1;sa=mc.lineWidth;mc.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;Xa=vd.x|0;wa=vd.y|0;Ha="width"in vd?vd.width|0:F.framebufferWidth-Xa;ea="height"in vd?vd.height|0:F.framebufferHeight-wa;Zb=xe[0];xe[0]=Xa;Ad=xe[1];xe[1]=wa;Hb=xe[2];xe[2]=Ha;xa=xe[3];xe[3]=ea;Oc=mc.scissor_enable;mc.scissor_enable=!0;Fa=ca.profile;ca.profile=!1;Gb=c.offset;Ya=za.offset;za.offset=Gb;Wd=c.count;ac=za.count;za.count=Wd;Cc=
za.primitive;za.primitive=1;Ic=c.contextColor;pa=qa[24];qa[24]=Ic;dc=c.dim0A;Ua=qa[3];qa[3]=dc;Gc=c.dim0B;Ia=qa[5];qa[5]=Gc;qc=c.dim0C;Sa=qa[7];qa[7]=qc;Ca=c.dim0D;lc=qa[9];qa[9]=Ca;Xc=c.dim1A;td=qa[4];qa[4]=Xc;ra=c.dim1B;Ib=qa[6];qa[6]=ra;cb=c.dim1C;Tc=qa[8];qa[8]=cb;nc=c.dim1D;Bd=qa[10];qa[10]=nc;Vd=c.drwLayer;ad=qa[23];qa[23]=Vd;Qc=c.hiA;hd=qa[12];qa[12]=Qc;Fc=c.hiB;Vb=qa[14];qa[14]=Fc;Ja=c.hiC;tb=qa[16];qa[16]=Ja;mb=c.hiD;xb=qa[18];qa[18]=mb;qd=c.loA;sd=qa[11];qa[11]=qd;ae=c.loB;cd=qa[13];qa[13]=
ae;Xb=c.loC;Ed=qa[15];qa[15]=Xb;zc=c.loD;ud=qa[17];qa[17]=zc;Dc=c.maskHeight;Od=qa[22];qa[22]=Dc;Da=c.maskTexture;rd=qa[25];qa[25]=Da;Kb=qa[26];qa[26]=W;Eb=c.resolution;Ye=qa[19];qa[19]=Eb;ge=c.viewBoxPos;yd=qa[20];qa[20]=ge;Me=c.viewBoxSize;Be=qa[21];qa[21]=Me;Ga=u.buffer;u.buffer=D;Id=u.divisor;u.divisor=0;cc=u.normalized;u.normalized=!1;Oa=u.offset;u.offset=0;Qe=u.size;u.size=0;ab=u.state;u.state=1;jc=u.stride;u.stride=0;zd=u.type;u.type=D.dtype;ue=u.w;u.w=0;nb=u.x;u.x=0;Dd=u.y;u.y=0;we=u.z;u.z=
0;Bc=h.buffer;h.buffer=G;Ob=h.divisor;h.divisor=0;ve=h.normalized;h.normalized=!1;La=h.offset;h.offset=0;Nc=h.size;h.size=0;zb=h.state;h.state=1;Cb=h.stride;h.stride=0;te=h.type;h.type=G.dtype;ze=h.w;h.w=0;Ae=h.x;h.x=0;ne=h.y;h.y=0;ee=h.z;h.z=0;de=la.buffer;la.buffer=l;pe=la.divisor;la.divisor=0;be=la.normalized;la.normalized=!1;he=la.offset;la.offset=0;wc=la.size;la.size=0;Uc=la.state;la.state=1;qe=la.stride;la.stride=0;le=la.type;la.type=l.dtype;Ld=la.w;la.w=0;Pd=la.x;la.x=0;Qd=la.y;la.y=0;Rd=la.z;
la.z=0;ie=ta.buffer;ta.buffer=m;vf=ta.divisor;ta.divisor=0;Ce=ta.normalized;ta.normalized=!1;oe=ta.offset;ta.offset=0;Re=ta.size;ta.size=0;Se=ta.state;ta.state=1;Ne=ta.stride;ta.stride=0;re=ta.type;ta.type=m.dtype;Fe=ta.w;ta.w=0;He=ta.x;ta.x=0;Ie=ta.y;ta.y=0;Je=ta.z;ta.z=0;Ge=r.buffer;r.buffer=f;Nd=r.divisor;r.divisor=0;Ud=r.normalized;r.normalized=!1;$d=r.offset;r.offset=0;ce=r.size;r.size=0;Ke=r.state;r.state=1;Cd=r.stride;r.stride=0;Sd=r.type;r.type=f.dtype;De=r.w;r.w=0;Le=r.x;r.x=0;cf=r.y;r.y=
0;af=r.z;r.z=0;Te=R.buffer;R.buffer=k;Oe=R.divisor;R.divisor=0;$e=R.normalized;R.normalized=!1;Xe=R.offset;R.offset=0;Ue=R.size;R.size=0;Ve=R.state;R.state=1;Td=R.stride;R.stride=0;Xd=R.type;R.type=k.dtype;We=R.w;R.w=0;jf=R.x;R.x=0;nf=R.y;R.y=0;ff=R.z;R.z=0;kf=z.buffer;z.buffer=b;lf=z.divisor;z.divisor=0;mf=z.normalized;z.normalized=!1;rf=z.offset;z.offset=0;of=z.size;z.size=0;sf=z.state;z.state=1;Cf=z.stride;z.stride=0;Df=z.type;z.type=b.dtype;Pe=z.w;z.w=0;Ee=z.x;z.x=0;pf=z.y;z.y=0;qf=z.z;z.z=0;
Ef=ia.buffer;ia.buffer=q;Hf=ia.divisor;ia.divisor=0;Bf=ia.normalized;ia.normalized=!1;Ff=ia.offset;ia.offset=0;Gf=ia.size;ia.size=0;xf=ia.state;ia.state=1;yf=ia.stride;ia.stride=0;wf=ia.type;ia.type=q.dtype;zf=ia.w;ia.w=0;Af=ia.x;ia.x=0;Jf=ia.y;ia.y=0;Kf=ia.z;ia.z=0;Lf=J.buffer;J.buffer=I;Mf=J.divisor;J.divisor=0;tf=J.normalized;J.normalized=!1;Rf=J.offset;J.offset=0;If=J.size;J.size=0;uf=J.state;J.state=1;dg=J.stride;J.stride=0;Sf=J.type;J.type=I.dtype;Tf=J.w;J.w=0;qg=J.x;J.x=0;gf=J.y;J.y=0;df=J.z;
J.z=0;Nf=V.buffer;V.buffer=w;Of=V.divisor;V.divisor=0;eg=V.normalized;V.normalized=!1;fg=V.offset;V.offset=0;gg=V.size;V.size=0;hg=V.state;V.state=1;ig=V.stride;V.stride=0;Wf=V.type;V.type=w.dtype;Uf=V.w;V.w=0;Xf=V.x;V.x=0;Yf=V.y;V.y=0;Zf=V.z;V.z=0;jg=K.buffer;K.buffer=e;rg=K.divisor;K.divisor=0;sg=K.normalized;K.normalized=!1;tg=K.offset;K.offset=0;ug=K.size;K.size=0;vg=K.state;K.state=1;wg=K.stride;K.stride=0;xg=K.type;K.type=e.dtype;yg=K.w;K.w=0;zg=K.x;K.x=0;Ag=K.y;K.y=0;Bg=K.z;K.z=0;hf=ka.buffer;
ka.buffer=g;ef=ka.divisor;ka.divisor=0;Pf=ka.normalized;ka.normalized=!1;Qf=ka.offset;ka.offset=0;kg=ka.size;ka.size=0;lg=ka.state;ka.state=1;mg=ka.stride;ka.stride=0;ng=ka.type;ka.type=g.dtype;og=ka.w;ka.w=0;$f=ka.x;ka.x=0;Vf=ka.y;ka.y=0;ag=ka.z;ka.z=0;bg=aa.buffer;aa.buffer=p;cg=aa.divisor;aa.divisor=0;pg=aa.normalized;aa.normalized=!1;Cg=aa.offset;aa.offset=0;Dg=aa.size;aa.size=0;Eg=aa.state;aa.state=1;Fg=aa.stride;aa.stride=0;Gg=aa.type;aa.type=p.dtype;Hg=aa.w;aa.w=0;Ig=aa.x;aa.x=0;Jg=aa.y;aa.y=
0;Kg=aa.z;aa.z=0;Lg=ma.buffer;ma.buffer=n;Mg=ma.divisor;ma.divisor=0;Ng=ma.normalized;ma.normalized=!1;Og=ma.offset;ma.offset=0;Pg=ma.size;ma.size=0;Qg=ma.state;ma.state=1;Rg=ma.stride;ma.stride=0;Sg=ma.type;ma.type=n.dtype;Tg=ma.w;ma.w=0;Ug=ma.x;ma.x=0;Vg=ma.y;ma.y=0;Wg=ma.z;ma.z=0;Xg=na.buffer;na.buffer=t;Yg=na.divisor;na.divisor=0;Zg=na.normalized;na.normalized=!1;$g=na.offset;na.offset=0;ah=na.size;na.size=0;bh=na.state;na.state=1;ch=na.stride;na.stride=0;dh=na.type;na.type=t.dtype;eh=na.w;na.w=
0;fh=na.x;na.x=0;gh=na.y;na.y=0;hh=na.z;na.z=0;ih=Qa.buffer;Qa.buffer=v;jh=Qa.divisor;Qa.divisor=0;kh=Qa.normalized;Qa.normalized=!1;lh=Qa.offset;Qa.offset=0;mh=Qa.size;Qa.size=0;nh=Qa.state;Qa.state=1;oh=Qa.stride;Qa.stride=0;ph=Qa.type;Qa.type=v.dtype;qh=Qa.w;Qa.w=0;rh=Qa.x;Qa.x=0;sh=Qa.y;Qa.y=0;th=Qa.z;Qa.z=0;uh=Fb.vert;Fb.vert=2;vh=Fb.frag;Fb.frag=1;ca.dirty=!0;a(F,c,d);F.viewportWidth=E;F.viewportHeight=N;Yd[0]=M;Yd[1]=L;Yd[2]=ba;Yd[3]=O;yb[0]=P;yb[1]=Q;yb[2]=U;yb[3]=T;mc.blend_enable=Y;xd[0]=
Z;xd[1]=fa;je[0]=ha;je[1]=X;je[2]=ja;je[3]=da;mc.cull_enable=ga;mc.cull_face=oa;mc.depth_enable=Aa;mc.depth_func=ua;mc.depth_mask=Ea;fe[0]=pc;fe[1]=gb;mc.dither=Ka;mc.lineWidth=sa;xe[0]=Zb;xe[1]=Ad;xe[2]=Hb;xe[3]=xa;mc.scissor_enable=Oc;ca.profile=Fa;za.offset=Ya;za.count=ac;za.primitive=Cc;qa[24]=pa;qa[3]=Ua;qa[5]=Ia;qa[7]=Sa;qa[9]=lc;qa[4]=td;qa[6]=Ib;qa[8]=Tc;qa[10]=Bd;qa[23]=ad;qa[12]=hd;qa[14]=Vb;qa[16]=tb;qa[18]=xb;qa[11]=sd;qa[13]=cd;qa[15]=Ed;qa[17]=ud;qa[22]=Od;qa[25]=rd;qa[26]=Kb;qa[19]=
Ye;qa[20]=yd;qa[21]=Be;u.buffer=Ga;u.divisor=Id;u.normalized=cc;u.offset=Oa;u.size=Qe;u.state=ab;u.stride=jc;u.type=zd;u.w=ue;u.x=nb;u.y=Dd;u.z=we;h.buffer=Bc;h.divisor=Ob;h.normalized=ve;h.offset=La;h.size=Nc;h.state=zb;h.stride=Cb;h.type=te;h.w=ze;h.x=Ae;h.y=ne;h.z=ee;la.buffer=de;la.divisor=pe;la.normalized=be;la.offset=he;la.size=wc;la.state=Uc;la.stride=qe;la.type=le;la.w=Ld;la.x=Pd;la.y=Qd;la.z=Rd;ta.buffer=ie;ta.divisor=vf;ta.normalized=Ce;ta.offset=oe;ta.size=Re;ta.state=Se;ta.stride=Ne;ta.type=
re;ta.w=Fe;ta.x=He;ta.y=Ie;ta.z=Je;r.buffer=Ge;r.divisor=Nd;r.normalized=Ud;r.offset=$d;r.size=ce;r.state=Ke;r.stride=Cd;r.type=Sd;r.w=De;r.x=Le;r.y=cf;r.z=af;R.buffer=Te;R.divisor=Oe;R.normalized=$e;R.offset=Xe;R.size=Ue;R.state=Ve;R.stride=Td;R.type=Xd;R.w=We;R.x=jf;R.y=nf;R.z=ff;z.buffer=kf;z.divisor=lf;z.normalized=mf;z.offset=rf;z.size=of;z.state=sf;z.stride=Cf;z.type=Df;z.w=Pe;z.x=Ee;z.y=pf;z.z=qf;ia.buffer=Ef;ia.divisor=Hf;ia.normalized=Bf;ia.offset=Ff;ia.size=Gf;ia.state=xf;ia.stride=yf;ia.type=
wf;ia.w=zf;ia.x=Af;ia.y=Jf;ia.z=Kf;J.buffer=Lf;J.divisor=Mf;J.normalized=tf;J.offset=Rf;J.size=If;J.state=uf;J.stride=dg;J.type=Sf;J.w=Tf;J.x=qg;J.y=gf;J.z=df;V.buffer=Nf;V.divisor=Of;V.normalized=eg;V.offset=fg;V.size=gg;V.state=hg;V.stride=ig;V.type=Wf;V.w=Uf;V.x=Xf;V.y=Yf;V.z=Zf;K.buffer=jg;K.divisor=rg;K.normalized=sg;K.offset=tg;K.size=ug;K.state=vg;K.stride=wg;K.type=xg;K.w=yg;K.x=zg;K.y=Ag;K.z=Bg;ka.buffer=hf;ka.divisor=ef;ka.normalized=Pf;ka.offset=Qf;ka.size=kg;ka.state=lg;ka.stride=mg;ka.type=
ng;ka.w=og;ka.x=$f;ka.y=Vf;ka.z=ag;aa.buffer=bg;aa.divisor=cg;aa.normalized=pg;aa.offset=Cg;aa.size=Dg;aa.state=Eg;aa.stride=Fg;aa.type=Gg;aa.w=Hg;aa.x=Ig;aa.y=Jg;aa.z=Kg;ma.buffer=Lg;ma.divisor=Mg;ma.normalized=Ng;ma.offset=Og;ma.size=Pg;ma.state=Qg;ma.stride=Rg;ma.type=Sg;ma.w=Tg;ma.x=Ug;ma.y=Vg;ma.z=Wg;na.buffer=Xg;na.divisor=Yg;na.normalized=Zg;na.offset=$g;na.size=ah;na.state=bh;na.stride=ch;na.type=dh;na.w=eh;na.x=fh;na.y=gh;na.z=hh;Qa.buffer=ih;Qa.divisor=jh;Qa.normalized=kh;Qa.offset=lh;Qa.size=
mh;Qa.state=nh;Qa.stride=oh;Qa.type=ph;Qa.w=qh;Qa.x=rh;Qa.y=sh;Qa.z=th;Fb.vert=uh;Fb.frag=vh;ca.dirty=!0}}},$1:function(a,c){var d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,H,la,r,S,R,z,ia,J,V,K;d=a.attributes;h=a.current;l=a.framebuffer;m=a.gl;f=a.next;k=a.vao;b=f.blend_color;q=h.blend_color;I=f.blend_equation;w=h.blend_equation;e=f.blend_func;g=h.blend_func;p=f.colorMask;n=h.colorMask;t=f.depth_range;v=h.depth_range;D=f.polygonOffset_offset;y=h.polygonOffset_offset;W=f.sample_coverage;u=h.sample_coverage;
H=f.scissor_box;la=h.scissor_box;r=f.stencil_func;S=h.stencil_func;R=f.stencil_opBack;z=h.stencil_opBack;ia=f.stencil_opFront;J=h.stencil_opFront;V=f.viewport;K=h.viewport;return{poll:function(){var c,a,k,d,A,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga;h.dirty=!1;a=f.blend_enable;k=f.cull_enable;d=f.depth_enable;A=f.dither;Cb=f.polygonOffset_enable;ea=f.sample_alpha;Oa=f.sample_enable;X=f.scissor_enable;P=f.stencil_enable;O=f.cull_face;U=h.cull_face;pa=f.depth_func;Q=h.depth_func;Ob=f.depth_mask;
ab=h.depth_mask;T=f.frontFace;B=h.frontFace;oa=f.lineWidth;da=h.lineWidth;Da=f.stencil_mask;Ga=h.stencil_mask;c=l.next;c!==l.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null),l.cur=c);a!==h.blend_enable&&(a?m.enable(3042):m.disable(3042),h.blend_enable=a);k!==h.cull_enable&&(k?m.enable(2884):m.disable(2884),h.cull_enable=k);d!==h.depth_enable&&(d?m.enable(2929):m.disable(2929),h.depth_enable=d);A!==h.dither&&(A?m.enable(3024):m.disable(3024),h.dither=A);Cb!==h.polygonOffset_enable&&
(Cb?m.enable(32823):m.disable(32823),h.polygonOffset_enable=Cb);ea!==h.sample_alpha&&(ea?m.enable(32926):m.disable(32926),h.sample_alpha=ea);Oa!==h.sample_enable&&(Oa?m.enable(32928):m.disable(32928),h.sample_enable=Oa);X!==h.scissor_enable&&(X?m.enable(3089):m.disable(3089),h.scissor_enable=X);P!==h.stencil_enable&&(P?m.enable(2960):m.disable(2960),h.stencil_enable=P);if(b[0]!==q[0]||b[1]!==q[1]||b[2]!==q[2]||b[3]!==q[3])m.blendColor(b[0],b[1],b[2],b[3]),q[0]=b[0],q[1]=b[1],q[2]=b[2],q[3]=b[3];if(I[0]!==
w[0]||I[1]!==w[1])m.blendEquationSeparate(I[0],I[1]),w[0]=I[0],w[1]=I[1];if(e[0]!==g[0]||e[1]!==g[1]||e[2]!==g[2]||e[3]!==g[3])m.blendFuncSeparate(e[0],e[1],e[2],e[3]),g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=e[3];if(p[0]!==n[0]||p[1]!==n[1]||p[2]!==n[2]||p[3]!==n[3])m.colorMask(p[0],p[1],p[2],p[3]),n[0]=p[0],n[1]=p[1],n[2]=p[2],n[3]=p[3];O!==U&&(m.cullFace(O),h.cull_face=O);pa!==Q&&(m.depthFunc(pa),h.depth_func=pa);Ob!==ab&&(m.depthMask(Ob),h.depth_mask=Ob);if(t[0]!==v[0]||t[1]!==v[1])m.depthRange(t[0],
t[1]),v[0]=t[0],v[1]=t[1];T!==B&&(m.frontFace(T),h.frontFace=T);oa!==da&&(m.lineWidth(oa),h.lineWidth=oa);if(D[0]!==y[0]||D[1]!==y[1])m.polygonOffset(D[0],D[1]),y[0]=D[0],y[1]=D[1];if(W[0]!==u[0]||W[1]!==u[1])m.sampleCoverage(W[0],W[1]),u[0]=W[0],u[1]=W[1];if(H[0]!==la[0]||H[1]!==la[1]||H[2]!==la[2]||H[3]!==la[3])m.scissor(H[0],H[1],H[2],H[3]),la[0]=H[0],la[1]=H[1],la[2]=H[2],la[3]=H[3];if(r[0]!==S[0]||r[1]!==S[1]||r[2]!==S[2])m.stencilFunc(r[0],r[1],r[2]),S[0]=r[0],S[1]=r[1],S[2]=r[2];Da!==Ga&&(m.stencilMask(Da),
h.stencil_mask=Da);if(R[0]!==z[0]||R[1]!==z[1]||R[2]!==z[2]||R[3]!==z[3])m.stencilOpSeparate(R[0],R[1],R[2],R[3]),z[0]=R[0],z[1]=R[1],z[2]=R[2],z[3]=R[3];if(ia[0]!==J[0]||ia[1]!==J[1]||ia[2]!==J[2]||ia[3]!==J[3])m.stencilOpSeparate(ia[0],ia[1],ia[2],ia[3]),J[0]=ia[0],J[1]=ia[1],J[2]=ia[2],J[3]=ia[3];if(V[0]!==K[0]||V[1]!==K[1]||V[2]!==K[2]||V[3]!==K[3])m.viewport(V[0],V[1],V[2],V[3]),K[0]=V[0],K[1]=V[1],K[2]=V[2],K[3]=V[3]},refresh:function(){var a,aa,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab;h.dirty=
!1;aa=f.blend_enable;ma=f.cull_enable;na=f.depth_enable;Qa=f.dither;Cb=f.polygonOffset_enable;ea=f.sample_alpha;Oa=f.sample_enable;X=f.scissor_enable;P=f.stencil_enable;O=f.cull_face;U=f.depth_func;pa=f.depth_mask;Q=f.frontFace;Ob=f.lineWidth;ab=f.stencil_mask;(a=l.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);l.cur=a;a=d[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):
(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(0,a.divisor);a=d[1];a.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(1,a.divisor);a=d[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(2,a.divisor);a=d[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(3,a.divisor);a=d[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,
a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(4,a.divisor);a=d[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(5,a.divisor);a=d[6];a.buffer?
(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(6,a.divisor);a=d[7];a.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(7,
a.divisor);a=d[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(8,a.divisor);a=d[9];a.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);c.vertexAttribDivisorANGLE(9,a.divisor);a=d[10];a.buffer?(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(10,a.divisor);a=d[11];a.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),
m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(11,a.divisor);a=d[12];a.buffer?(m.enableVertexAttribArray(12),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(12,a.divisor);a=d[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(13,a.size,a.type,a.normalized,
a.stride,a.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(13,a.divisor);a=d[14];a.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(14,a.divisor);a=d[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),
m.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(15,a.divisor);k.currentVAO=null;k.setVAO(k.targetVAO);aa?m.enable(3042):m.disable(3042);h.blend_enable=aa;ma?m.enable(2884):m.disable(2884);h.cull_enable=ma;na?m.enable(2929):m.disable(2929);h.depth_enable=na;Qa?m.enable(3024):m.disable(3024);h.dither=Qa;Cb?m.enable(32823):m.disable(32823);h.polygonOffset_enable=Cb;ea?
m.enable(32926):m.disable(32926);h.sample_alpha=ea;Oa?m.enable(32928):m.disable(32928);h.sample_enable=Oa;X?m.enable(3089):m.disable(3089);h.scissor_enable=X;P?m.enable(2960):m.disable(2960);h.stencil_enable=P;m.blendColor(b[0],b[1],b[2],b[3]);q[0]=b[0];q[1]=b[1];q[2]=b[2];q[3]=b[3];m.blendEquationSeparate(I[0],I[1]);w[0]=I[0];w[1]=I[1];m.blendFuncSeparate(e[0],e[1],e[2],e[3]);g[0]=e[0];g[1]=e[1];g[2]=e[2];g[3]=e[3];m.colorMask(p[0],p[1],p[2],p[3]);n[0]=p[0];n[1]=p[1];n[2]=p[2];n[3]=p[3];m.cullFace(O);
h.cull_face=O;m.depthFunc(U);h.depth_func=U;m.depthMask(pa);h.depth_mask=pa;m.depthRange(t[0],t[1]);v[0]=t[0];v[1]=t[1];m.frontFace(Q);h.frontFace=Q;m.lineWidth(Ob);h.lineWidth=Ob;m.polygonOffset(D[0],D[1]);y[0]=D[0];y[1]=D[1];m.sampleCoverage(W[0],W[1]);u[0]=W[0];u[1]=W[1];m.scissor(H[0],H[1],H[2],H[3]);la[0]=H[0];la[1]=H[1];la[2]=H[2];la[3]=H[3];m.stencilFunc(r[0],r[1],r[2]);S[0]=r[0];S[1]=r[1];S[2]=r[2];m.stencilMask(ab);h.stencil_mask=ab;m.stencilOpSeparate(R[0],R[1],R[2],R[3]);z[0]=R[0];z[1]=
R[1];z[2]=R[2];z[3]=R[3];m.stencilOpSeparate(ia[0],ia[1],ia[2],ia[3]);J[0]=ia[0];J[1]=ia[1];J[2]=ia[2];J[3]=ia[3];m.viewport(V[0],V[1],V[2],V[3]);K[0]=V[0];K[1]=V[1];K[2]=V[2];K[3]=V[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,c,d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,H,la,r,S,R,z,ia,J,V,K,ka,aa,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab){var T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra,cc,pc,jc,
td,zc,ba,N,ha,Ha,tb,cd,Nc,L,E,ja,ua,Z,fa,sa,M,F,ca,za,Aa,Ka,C,mc,Fb,qa,Gb,yb;T=a.attributes;B=a.buffer;oa=a.context;da=a.current;Da=a.draw;Ga=a.elements;zb=a.extensions;La=a.framebuffer;Y=a.gl;nb=a.isBufferArgs;ga=a.next;ra=a.shader;cc=a.uniforms;pc=a.vao;jc=ga.blend_color;td=da.blend_color;zc=ga.blend_equation;ba=da.blend_equation;N=ga.blend_func;ha=da.blend_func;Ha=ga.colorMask;tb=da.colorMask;cd=ga.depth_range;Nc=da.depth_range;L=ga.polygonOffset_offset;E=da.polygonOffset_offset;ja=ga.sample_coverage;
ua=da.sample_coverage;Z=ga.scissor_box;fa=da.scissor_box;sa=ga.stencil_func;M=da.stencil_func;F=ga.stencil_opBack;ca=da.stencil_opBack;za=ga.stencil_opFront;Aa=da.stencil_opFront;Ka=ga.viewport;C=da.viewport;mc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Fb={};Fb.buffer=d;Fb.divisor=1;qa={};qa.buffer=h;qa.divisor=1;Gb={};Gb.buffer=l;Gb.divisor=1;yb={};yb.buffer=m;yb.divisor=1;return{batch:function(b,a){var f,n,k,p,q,t;f=La.next;f!==La.cur&&(f?Y.bindFramebuffer(36160,
f.framebuffer):Y.bindFramebuffer(36160,null),La.cur=f);if(da.dirty){var d,v,l,m,h,y,D,I,u,G,W,A,H,r,la,N,ta,S,R,Z,Ka,Oc,Ic,qc,gb,ra,Hb,nc,Xa,Qc,ac,lc,zc;d=ga.dither;d!==da.dither&&(d?Y.enable(3024):Y.disable(3024),da.dither=d);v=ga.depth_func;v!==da.depth_func&&(Y.depthFunc(v),da.depth_func=v);l=cd[0];m=cd[1];if(l!==Nc[0]||m!==Nc[1])Y.depthRange(l,m),Nc[0]=l,Nc[1]=m;h=ga.depth_mask;h!==da.depth_mask&&(Y.depthMask(h),da.depth_mask=h);y=Ha[0];D=Ha[1];I=Ha[2];u=Ha[3];if(y!==tb[0]||D!==tb[1]||I!==tb[2]||
u!==tb[3])Y.colorMask(y,D,I,u),tb[0]=y,tb[1]=D,tb[2]=I,tb[3]=u;G=ga.cull_enable;G!==da.cull_enable&&(G?Y.enable(2884):Y.disable(2884),da.cull_enable=G);W=ga.cull_face;W!==da.cull_face&&(Y.cullFace(W),da.cull_face=W);A=ga.frontFace;A!==da.frontFace&&(Y.frontFace(A),da.frontFace=A);H=ga.lineWidth;H!==da.lineWidth&&(Y.lineWidth(H),da.lineWidth=H);r=ga.polygonOffset_enable;r!==da.polygonOffset_enable&&(r?Y.enable(32823):Y.disable(32823),da.polygonOffset_enable=r);la=L[0];N=L[1];if(la!==E[0]||N!==E[1])Y.polygonOffset(la,
N),E[0]=la,E[1]=N;ta=ga.sample_alpha;ta!==da.sample_alpha&&(ta?Y.enable(32926):Y.disable(32926),da.sample_alpha=ta);S=ga.sample_enable;S!==da.sample_enable&&(S?Y.enable(32928):Y.disable(32928),da.sample_enable=S);R=ja[0];Z=ja[1];if(R!==ua[0]||Z!==ua[1])Y.sampleCoverage(R,Z),ua[0]=R,ua[1]=Z;Ka=ga.stencil_enable;Ka!==da.stencil_enable&&(Ka?Y.enable(2960):Y.disable(2960),da.stencil_enable=Ka);Oc=ga.stencil_mask;Oc!==da.stencil_mask&&(Y.stencilMask(Oc),da.stencil_mask=Oc);Ic=sa[0];qc=sa[1];gb=sa[2];if(Ic!==
M[0]||qc!==M[1]||gb!==M[2])Y.stencilFunc(Ic,qc,gb),M[0]=Ic,M[1]=qc,M[2]=gb;ra=za[0];Hb=za[1];nc=za[2];Xa=za[3];if(ra!==Aa[0]||Hb!==Aa[1]||nc!==Aa[2]||Xa!==Aa[3])Y.stencilOpSeparate(ra,Hb,nc,Xa),Aa[0]=ra,Aa[1]=Hb,Aa[2]=nc,Aa[3]=Xa;Qc=F[0];ac=F[1];lc=F[2];zc=F[3];if(Qc!==ca[0]||ac!==ca[1]||lc!==ca[2]||zc!==ca[3])Y.stencilOpSeparate(Qc,ac,lc,zc),ca[0]=Qc,ca[1]=ac,ca[2]=lc,ca[3]=zc}Y.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;Y.enable(3042);da.blend_enable=!0;Y.blendEquationSeparate(32774,32774);
ba[0]=32774;ba[1]=32774;Y.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;Y.disable(2929);da.depth_enable=!1;Y.enable(3089);da.scissor_enable=!0;if(n=da.profile)k=performance.now(),c.count+=a;Y.useProgram(z.program);p=zb.angle_instanced_arrays;var rd,Fc,dc,Cc,Xc,Zb,Gc,Ya;pc.setVAO(null);rd=Qa.location;Fc=T[rd];Fc.buffer||Y.enableVertexAttribArray(rd);if(5126!==Fc.type||2!==Fc.size||Fc.buffer!==w||!1!==Fc.normalized||0!==Fc.offset||24!==Fc.stride)Y.bindBuffer(34962,w.buffer),
Y.vertexAttribPointer(rd,2,5126,!1,24,0),Fc.type=5126,Fc.size=2,Fc.buffer=w,Fc.normalized=!1,Fc.offset=0,Fc.stride=24;0!==Fc.divisor&&(p.vertexAttribDivisorANGLE(rd,0),Fc.divisor=0);dc=ea.location;Cc=T[dc];Cc.buffer||Y.enableVertexAttribArray(dc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==e||!1!==Cc.normalized||8!==Cc.offset||24!==Cc.stride)Y.bindBuffer(34962,e.buffer),Y.vertexAttribPointer(dc,2,5126,!1,24,8),Cc.type=5126,Cc.size=2,Cc.buffer=e,Cc.normalized=!1,Cc.offset=8,Cc.stride=24;0!==Cc.divisor&&
(p.vertexAttribDivisorANGLE(dc,0),Cc.divisor=0);Xc=aa.location;Zb=T[Xc];Zb.buffer||Y.enableVertexAttribArray(Xc);if(5126!==Zb.type||2!==Zb.size||Zb.buffer!==g||!1!==Zb.normalized||16!==Zb.offset||24!==Zb.stride)Y.bindBuffer(34962,g.buffer),Y.vertexAttribPointer(Xc,2,5126,!1,24,16),Zb.type=5126,Zb.size=2,Zb.buffer=g,Zb.normalized=!1,Zb.offset=16,Zb.stride=24;0!==Zb.divisor&&(p.vertexAttribDivisorANGLE(Xc,0),Zb.divisor=0);(Gc=Da.elements)?Y.bindBuffer(34963,Gc.buffer.buffer):pc.currentVAO&&(Gc=Ga.getElements(pc.currentVAO.elements))&&
Y.bindBuffer(34963,Gc.buffer.buffer);Ya=Da.offset;for(q=0;q<a;++q){t=b[q];var Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,cc,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,jc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc;Ea=t.viewport;ud=Ea.x|0;Ib=Ea.y|0;Ua="width"in Ea?Ea.width|0:oa.framebufferWidth-
ud;Vb="height"in Ea?Ea.height|0:oa.framebufferHeight-Ib;cb=oa.viewportWidth;oa.viewportWidth=Ua;Dc=oa.viewportHeight;oa.viewportHeight=Vb;Y.viewport(ud,Ib,Ua,Vb);C[0]=ud;C[1]=Ib;C[2]=Ua;C[3]=Vb;Xb=t.viewport;cc=Xb.x|0;kc=Xb.y|0;Sb="width"in Xb?Xb.width|0:oa.framebufferWidth-cc;x="height"in Xb?Xb.height|0:oa.framebufferHeight-kc;Y.scissor(cc,kc,Sb,x);fa[0]=cc;fa[1]=kc;fa[2]=Sb;fa[3]=x;Tb=ia.call(this,oa,t,q);Gb.offset=Tb;Pa=!1;ob=null;ub=0;hb=!1;jc=Ra=0;Yb=1;jd=0;db=5126;jb=ic=Yc=oc=0;nb(Gb)?(Pa=!0,
ob=B.createStream(34962,Gb),db=ob.dtype):(ob=B.getBuffer(Gb))?db=ob.dtype:"constant"in Gb?(Yb=2,"number"===typeof Gb.constant?(Yc=Gb.constant,ic=jb=oc=0):(Yc=0<Gb.constant.length?Gb.constant[0]:0,ic=1<Gb.constant.length?Gb.constant[1]:0,jb=2<Gb.constant.length?Gb.constant[2]:0,oc=3<Gb.constant.length?Gb.constant[3]:0)):(ob=nb(Gb.buffer)?B.createStream(34962,Gb.buffer):B.getBuffer(Gb.buffer),db="type"in Gb?mc[Gb.type]:ob.dtype,hb=!!Gb.normalized,jc=Gb.size|0,Ra=Gb.offset|0,jd=Gb.stride|0,ub=Gb.divisor|
0);kb=P.location;va=T[kb];if(1===Yb){va.buffer||Y.enableVertexAttribArray(kb);pb=jc||2;if(va.type!==db||va.size!==pb||va.buffer!==ob||va.normalized!==hb||va.offset!==Ra||va.stride!==jd)Y.bindBuffer(34962,ob.buffer),Y.vertexAttribPointer(kb,pb,db,hb,jd,Ra),va.type=db,va.size=pb,va.buffer=ob,va.normalized=hb,va.offset=Ra,va.stride=jd;va.divisor!==ub&&(p.vertexAttribDivisorANGLE(kb,ub),va.divisor=ub)}else if(va.buffer&&(Y.disableVertexAttribArray(kb),va.buffer=null),va.x!==Yc||va.y!==ic||va.z!==jb||
va.w!==oc)Y.vertexAttrib4f(kb,Yc,ic,jb,oc),va.x=Yc,va.y=ic,va.z=jb,va.w=oc;ya=J.call(this,oa,t,q);yb.offset=ya;Va=!1;bb=null;Ba=0;eb=!1;Bb=Na=0;Ab=1;Ta=0;Hc=5126;wa=Ub=Lb=Jb=0;nb(yb)?(Va=!0,bb=B.createStream(34962,yb),Hc=bb.dtype):(bb=B.getBuffer(yb))?Hc=bb.dtype:"constant"in yb?(Ab=2,"number"===typeof yb.constant?(Lb=yb.constant,Ub=wa=Jb=0):(Lb=0<yb.constant.length?yb.constant[0]:0,Ub=1<yb.constant.length?yb.constant[1]:0,wa=2<yb.constant.length?yb.constant[2]:0,Jb=3<yb.constant.length?yb.constant[3]:
0)):(bb=nb(yb.buffer)?B.createStream(34962,yb.buffer):B.getBuffer(yb.buffer),Hc="type"in yb?mc[yb.type]:bb.dtype,eb=!!yb.normalized,Bb=yb.size|0,Na=yb.offset|0,Ta=yb.stride|0,Ba=yb.divisor|0);Jd=O.location;Ma=T[Jd];if(1===Ab){Ma.buffer||Y.enableVertexAttribArray(Jd);Pb=Bb||2;if(Ma.type!==Hc||Ma.size!==Pb||Ma.buffer!==bb||Ma.normalized!==eb||Ma.offset!==Na||Ma.stride!==Ta)Y.bindBuffer(34962,bb.buffer),Y.vertexAttribPointer(Jd,Pb,Hc,eb,Ta,Na),Ma.type=Hc,Ma.size=Pb,Ma.buffer=bb,Ma.normalized=eb,Ma.offset=
Na,Ma.stride=Ta;Ma.divisor!==Ba&&(p.vertexAttribDivisorANGLE(Jd,Ba),Ma.divisor=Ba)}else if(Ma.buffer&&(Y.disableVertexAttribArray(Jd),Ma.buffer=null),Ma.x!==Lb||Ma.y!==Ub||Ma.z!==wa||Ma.w!==Jb)Y.vertexAttrib4f(Jd,Lb,Ub,wa,Jb),Ma.x=Lb,Ma.y=Ub,Ma.z=wa,Ma.w=Jb;fb=V.call(this,oa,t,q);qa.offset=fb;ib=!1;xa=null;ec=0;Fa=!1;rb=qb=0;Za=1;$a=0;rc=5126;Mb=Wa=tc=dd=0;nb(qa)?(ib=!0,xa=B.createStream(34962,qa),rc=xa.dtype):(xa=B.getBuffer(qa))?rc=xa.dtype:"constant"in qa?(Za=2,"number"===typeof qa.constant?(tc=
qa.constant,Wa=Mb=dd=0):(tc=0<qa.constant.length?qa.constant[0]:0,Wa=1<qa.constant.length?qa.constant[1]:0,Mb=2<qa.constant.length?qa.constant[2]:0,dd=3<qa.constant.length?qa.constant[3]:0)):(xa=nb(qa.buffer)?B.createStream(34962,qa.buffer):B.getBuffer(qa.buffer),rc="type"in qa?mc[qa.type]:xa.dtype,Fa=!!qa.normalized,rb=qa.size|0,qb=qa.offset|0,$a=qa.stride|0,ec=qa.divisor|0);Zc=Cb.location;Ia=T[Zc];if(1===Za){Ia.buffer||Y.enableVertexAttribArray(Zc);vc=rb||4;if(Ia.type!==rc||Ia.size!==vc||Ia.buffer!==
xa||Ia.normalized!==Fa||Ia.offset!==qb||Ia.stride!==$a)Y.bindBuffer(34962,xa.buffer),Y.vertexAttribPointer(Zc,vc,rc,Fa,$a,qb),Ia.type=rc,Ia.size=vc,Ia.buffer=xa,Ia.normalized=Fa,Ia.offset=qb,Ia.stride=$a;Ia.divisor!==ec&&(p.vertexAttribDivisorANGLE(Zc,ec),Ia.divisor=ec)}else if(Ia.buffer&&(Y.disableVertexAttribArray(Zc),Ia.buffer=null),Ia.x!==tc||Ia.y!==Wa||Ia.z!==Mb||Ia.w!==dd)Y.vertexAttrib4f(Zc,tc,Wa,Mb,dd),Ia.x=tc,Ia.y=Wa,Ia.z=Mb,Ia.w=dd;Sa=K.call(this,oa,t,q);Fb.offset=Sa;Ca=!1;lb=null;vb=0;
Db=!1;uc=sb=0;wb=1;wd=0;sc=5126;fd=ed=Jc=Fd=0;nb(Fb)?(Ca=!0,lb=B.createStream(34962,Fb),sc=lb.dtype):(lb=B.getBuffer(Fb))?sc=lb.dtype:"constant"in Fb?(wb=2,"number"===typeof Fb.constant?(Jc=Fb.constant,ed=fd=Fd=0):(Jc=0<Fb.constant.length?Fb.constant[0]:0,ed=1<Fb.constant.length?Fb.constant[1]:0,fd=2<Fb.constant.length?Fb.constant[2]:0,Fd=3<Fb.constant.length?Fb.constant[3]:0)):(lb=nb(Fb.buffer)?B.createStream(34962,Fb.buffer):B.getBuffer(Fb.buffer),sc="type"in Fb?mc[Fb.type]:lb.dtype,Db=!!Fb.normalized,
uc=Fb.size|0,sb=Fb.offset|0,wd=Fb.stride|0,vb=Fb.divisor|0);Wb=na.location;bc=T[Wb];if(1===wb){bc.buffer||Y.enableVertexAttribArray(Wb);Qb=uc||4;if(bc.type!==sc||bc.size!==Qb||bc.buffer!==lb||bc.normalized!==Db||bc.offset!==sb||bc.stride!==wd)Y.bindBuffer(34962,lb.buffer),Y.vertexAttribPointer(Wb,Qb,sc,Db,wd,sb),bc.type=sc,bc.size=Qb,bc.buffer=lb,bc.normalized=Db,bc.offset=sb,bc.stride=wd;bc.divisor!==vb&&(p.vertexAttribDivisorANGLE(Wb,vb),bc.divisor=vb)}else if(bc.buffer&&(Y.disableVertexAttribArray(Wb),
bc.buffer=null),bc.x!==Jc||bc.y!==ed||bc.z!==fd||bc.w!==Fd)Y.vertexAttrib4f(Wb,Jc,ed,fd,Fd),bc.x=Jc,bc.y=ed,bc.z=fd,bc.w=Fd;Ja=ka.call(this,oa,t,q);$b=Ja[0];xb=Ja[1];Rb=Ja[2];hc=Ja[3];q&&mb===$b&&Nb===xb&&fc===Rb&&Ze===hc||(mb=$b,Nb=xb,fc=Rb,Ze=hc,Y.uniform4f(ab.location,$b,xb,Rb,hc));xc=t.lineWidth;q&&yc===xc||(yc=xc,Y.uniform1f(Oa.location,xc));Ac=t.capSize;q&&Kc===Ac||(Kc=Ac,Y.uniform1f(ma.location,Ac));$c=t.scale;Rc=$c[0];Kb=$c[1];q&&Lc===Rc&&Eb===Kb||(Lc=Rc,Eb=Kb,Y.uniform2f(U.location,Rc,Kb));
Mc=t.scaleFract;Ec=Mc[0];gc=Mc[1];q&&Sc===Ec&&Vc===gc||(Sc=Ec,Vc=gc,Y.uniform2f(pa.location,Ec,gc));gd=t.translate;kd=gd[0];Wc=gd[1];q&&md===kd&&bf===Wc||(md=kd,bf=Wc,Y.uniform2f(Q.location,kd,Wc));Zd=t.translateFract;ke=Zd[0];me=Zd[1];q&&se===ke&&Md===me||(se=ke,Md=me,Y.uniform2f(Ob.location,ke,me));Kd=t.opacity;q&&id===Kd||(id=Kd,Y.uniform1f(X.location,Kd));Bc=t.count;0<Bc?Gc?p.drawElementsInstancedANGLE(4,36,Gc.type,Ya<<(Gc.type-5121>>1),Bc):p.drawArraysInstancedANGLE(4,Ya,36,Bc):0>Bc&&(Gc?Y.drawElements(4,
36,Gc.type,Ya<<(Gc.type-5121>>1)):Y.drawArrays(4,Ya,36));oa.viewportWidth=cb;oa.viewportHeight=Dc;Pa&&B.destroyStream(ob);Va&&B.destroyStream(bb);ib&&B.destroyStream(xa);Ca&&B.destroyStream(lb)}da.dirty=!0;pc.setVAO(null);n&&(c.cpuTime+=performance.now()-k)},draw:function(a){var n,t,d,v,l,m,h,y,D,u,G,W,A,H,r,z,la,N,J,ta,S,R,K,Z,V,ia,Ka,ra,Oc,Ic,qc,gb,zc,Hb,nc,Xa,Qc,ac,lc,ka,cc,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,jc,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,
Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec;n=La.next;n!==La.cur&&(n?Y.bindFramebuffer(36160,n.framebuffer):Y.bindFramebuffer(36160,null),La.cur=n);if(da.dirty){var Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb;Fa=ga.dither;Fa!==da.dither&&(Fa?Y.enable(3024):Y.disable(3024),da.dither=Fa);qb=ga.depth_func;qb!==da.depth_func&&(Y.depthFunc(qb),da.depth_func=qb);rb=cd[0];Za=cd[1];if(rb!==Nc[0]||Za!==Nc[1])Y.depthRange(rb,Za),Nc[0]=rb,Nc[1]=Za;$a=
ga.depth_mask;$a!==da.depth_mask&&(Y.depthMask($a),da.depth_mask=$a);rc=Ha[0];dd=Ha[1];tc=Ha[2];Wa=Ha[3];if(rc!==tb[0]||dd!==tb[1]||tc!==tb[2]||Wa!==tb[3])Y.colorMask(rc,dd,tc,Wa),tb[0]=rc,tb[1]=dd,tb[2]=tc,tb[3]=Wa;Mb=ga.cull_enable;Mb!==da.cull_enable&&(Mb?Y.enable(2884):Y.disable(2884),da.cull_enable=Mb);Zc=ga.cull_face;Zc!==da.cull_face&&(Y.cullFace(Zc),da.cull_face=Zc);Ia=ga.frontFace;Ia!==da.frontFace&&(Y.frontFace(Ia),da.frontFace=Ia);vc=ga.lineWidth;vc!==da.lineWidth&&(Y.lineWidth(vc),da.lineWidth=
vc);Sa=ga.polygonOffset_enable;Sa!==da.polygonOffset_enable&&(Sa?Y.enable(32823):Y.disable(32823),da.polygonOffset_enable=Sa);Ca=L[0];lb=L[1];if(Ca!==E[0]||lb!==E[1])Y.polygonOffset(Ca,lb),E[0]=Ca,E[1]=lb;vb=ga.sample_alpha;vb!==da.sample_alpha&&(vb?Y.enable(32926):Y.disable(32926),da.sample_alpha=vb);Db=ga.sample_enable;Db!==da.sample_enable&&(Db?Y.enable(32928):Y.disable(32928),da.sample_enable=Db);sb=ja[0];uc=ja[1];if(sb!==ua[0]||uc!==ua[1])Y.sampleCoverage(sb,uc),ua[0]=sb,ua[1]=uc;wb=ga.stencil_enable;
wb!==da.stencil_enable&&(wb?Y.enable(2960):Y.disable(2960),da.stencil_enable=wb);wd=ga.stencil_mask;wd!==da.stencil_mask&&(Y.stencilMask(wd),da.stencil_mask=wd);sc=sa[0];Fd=sa[1];Jc=sa[2];if(sc!==M[0]||Fd!==M[1]||Jc!==M[2])Y.stencilFunc(sc,Fd,Jc),M[0]=sc,M[1]=Fd,M[2]=Jc;ed=za[0];fd=za[1];Wb=za[2];bc=za[3];if(ed!==Aa[0]||fd!==Aa[1]||Wb!==Aa[2]||bc!==Aa[3])Y.stencilOpSeparate(ed,fd,Wb,bc),Aa[0]=ed,Aa[1]=fd,Aa[2]=Wb,Aa[3]=bc;Qb=F[0];Ja=F[1];$b=F[2];mb=F[3];if(Qb!==ca[0]||Ja!==ca[1]||$b!==ca[2]||mb!==
ca[3])Y.stencilOpSeparate(Qb,Ja,$b,mb),ca[0]=Qb,ca[1]=Ja,ca[2]=$b,ca[3]=mb}t=a.viewport;d=t.x|0;v=t.y|0;l="width"in t?t.width|0:oa.framebufferWidth-d;m="height"in t?t.height|0:oa.framebufferHeight-v;h=oa.viewportWidth;oa.viewportWidth=l;y=oa.viewportHeight;oa.viewportHeight=m;Y.viewport(d,v,l,m);C[0]=d;C[1]=v;C[2]=l;C[3]=m;Y.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;Y.enable(3042);da.blend_enable=!0;Y.blendEquationSeparate(32774,32774);ba[0]=32774;ba[1]=32774;Y.blendFuncSeparate(770,771,
773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;Y.disable(2929);da.depth_enable=!1;D=a.viewport;u=D.x|0;G=D.y|0;W="width"in D?D.width|0:oa.framebufferWidth-u;A="height"in D?D.height|0:oa.framebufferHeight-G;Y.scissor(u,G,W,A);fa[0]=u;fa[1]=G;fa[2]=W;fa[3]=A;Y.enable(3089);da.scissor_enable=!0;if(H=da.profile)r=performance.now(),c.count++;Y.useProgram(f.program);z=zb.angle_instanced_arrays;pc.setVAO(null);la=k.call(this,oa,a,0);Gb.offset=la;N=!1;J=null;ta=0;S=!1;K=R=0;Z=1;V=0;ia=5126;Ic=Oc=ra=Ka=0;nb(Gb)?
(N=!0,J=B.createStream(34962,Gb),ia=J.dtype):(J=B.getBuffer(Gb))?ia=J.dtype:"constant"in Gb?(Z=2,"number"===typeof Gb.constant?(ra=Gb.constant,Oc=Ic=Ka=0):(ra=0<Gb.constant.length?Gb.constant[0]:0,Oc=1<Gb.constant.length?Gb.constant[1]:0,Ic=2<Gb.constant.length?Gb.constant[2]:0,Ka=3<Gb.constant.length?Gb.constant[3]:0)):(J=nb(Gb.buffer)?B.createStream(34962,Gb.buffer):B.getBuffer(Gb.buffer),ia="type"in Gb?mc[Gb.type]:J.dtype,S=!!Gb.normalized,K=Gb.size|0,R=Gb.offset|0,V=Gb.stride|0,ta=Gb.divisor|
0);qc=P.location;gb=T[qc];if(1===Z){gb.buffer||Y.enableVertexAttribArray(qc);zc=K||2;if(gb.type!==ia||gb.size!==zc||gb.buffer!==J||gb.normalized!==S||gb.offset!==R||gb.stride!==V)Y.bindBuffer(34962,J.buffer),Y.vertexAttribPointer(qc,zc,ia,S,V,R),gb.type=ia,gb.size=zc,gb.buffer=J,gb.normalized=S,gb.offset=R,gb.stride=V;gb.divisor!==ta&&(z.vertexAttribDivisorANGLE(qc,ta),gb.divisor=ta)}else if(gb.buffer&&(Y.disableVertexAttribArray(qc),gb.buffer=null),gb.x!==ra||gb.y!==Oc||gb.z!==Ic||gb.w!==Ka)Y.vertexAttrib4f(qc,
ra,Oc,Ic,Ka),gb.x=ra,gb.y=Oc,gb.z=Ic,gb.w=Ka;Hb=b.call(this,oa,a,0);yb.offset=Hb;nc=!1;Xa=null;Qc=0;ac=!1;ka=lc=0;cc=1;Fc=0;dc=5126;Gc=Zb=Xc=Cc=0;nb(yb)?(nc=!0,Xa=B.createStream(34962,yb),dc=Xa.dtype):(Xa=B.getBuffer(yb))?dc=Xa.dtype:"constant"in yb?(cc=2,"number"===typeof yb.constant?(Xc=yb.constant,Zb=Gc=Cc=0):(Xc=0<yb.constant.length?yb.constant[0]:0,Zb=1<yb.constant.length?yb.constant[1]:0,Gc=2<yb.constant.length?yb.constant[2]:0,Cc=3<yb.constant.length?yb.constant[3]:0)):(Xa=nb(yb.buffer)?B.createStream(34962,
yb.buffer):B.getBuffer(yb.buffer),dc="type"in yb?mc[yb.type]:Xa.dtype,ac=!!yb.normalized,ka=yb.size|0,lc=yb.offset|0,Fc=yb.stride|0,Qc=yb.divisor|0);Ya=O.location;Ea=T[Ya];if(1===cc){Ea.buffer||Y.enableVertexAttribArray(Ya);ud=ka||2;if(Ea.type!==dc||Ea.size!==ud||Ea.buffer!==Xa||Ea.normalized!==ac||Ea.offset!==lc||Ea.stride!==Fc)Y.bindBuffer(34962,Xa.buffer),Y.vertexAttribPointer(Ya,ud,dc,ac,Fc,lc),Ea.type=dc,Ea.size=ud,Ea.buffer=Xa,Ea.normalized=ac,Ea.offset=lc,Ea.stride=Fc;Ea.divisor!==Qc&&(z.vertexAttribDivisorANGLE(Ya,
Qc),Ea.divisor=Qc)}else if(Ea.buffer&&(Y.disableVertexAttribArray(Ya),Ea.buffer=null),Ea.x!==Xc||Ea.y!==Zb||Ea.z!==Gc||Ea.w!==Cc)Y.vertexAttrib4f(Ya,Xc,Zb,Gc,Cc),Ea.x=Xc,Ea.y=Zb,Ea.z=Gc,Ea.w=Cc;Ib=q.call(this,oa,a,0);qa.offset=Ib;Ua=!1;Vb=null;cb=0;Dc=!1;jc=Xb=0;kc=1;Sb=0;x=5126;ub=ob=Pa=Tb=0;nb(qa)?(Ua=!0,Vb=B.createStream(34962,qa),x=Vb.dtype):(Vb=B.getBuffer(qa))?x=Vb.dtype:"constant"in qa?(kc=2,"number"===typeof qa.constant?(Pa=qa.constant,ob=ub=Tb=0):(Pa=0<qa.constant.length?qa.constant[0]:0,
ob=1<qa.constant.length?qa.constant[1]:0,ub=2<qa.constant.length?qa.constant[2]:0,Tb=3<qa.constant.length?qa.constant[3]:0)):(Vb=nb(qa.buffer)?B.createStream(34962,qa.buffer):B.getBuffer(qa.buffer),x="type"in qa?mc[qa.type]:Vb.dtype,Dc=!!qa.normalized,jc=qa.size|0,Xb=qa.offset|0,Sb=qa.stride|0,cb=qa.divisor|0);hb=Cb.location;Ra=T[hb];if(1===kc){Ra.buffer||Y.enableVertexAttribArray(hb);Pc=jc||4;if(Ra.type!==x||Ra.size!==Pc||Ra.buffer!==Vb||Ra.normalized!==Dc||Ra.offset!==Xb||Ra.stride!==Sb)Y.bindBuffer(34962,
Vb.buffer),Y.vertexAttribPointer(hb,Pc,x,Dc,Sb,Xb),Ra.type=x,Ra.size=Pc,Ra.buffer=Vb,Ra.normalized=Dc,Ra.offset=Xb,Ra.stride=Sb;Ra.divisor!==cb&&(z.vertexAttribDivisorANGLE(hb,cb),Ra.divisor=cb)}else if(Ra.buffer&&(Y.disableVertexAttribArray(hb),Ra.buffer=null),Ra.x!==Pa||Ra.y!==ob||Ra.z!==ub||Ra.w!==Tb)Y.vertexAttrib4f(hb,Pa,ob,ub,Tb),Ra.x=Pa,Ra.y=ob,Ra.z=ub,Ra.w=Tb;Yb=I.call(this,oa,a,0);Fb.offset=Yb;jd=!1;db=null;oc=0;Yc=!1;jb=ic=0;kb=1;va=0;pb=5126;Ba=bb=Va=ya=0;nb(Fb)?(jd=!0,db=B.createStream(34962,
Fb),pb=db.dtype):(db=B.getBuffer(Fb))?pb=db.dtype:"constant"in Fb?(kb=2,"number"===typeof Fb.constant?(Va=Fb.constant,bb=Ba=ya=0):(Va=0<Fb.constant.length?Fb.constant[0]:0,bb=1<Fb.constant.length?Fb.constant[1]:0,Ba=2<Fb.constant.length?Fb.constant[2]:0,ya=3<Fb.constant.length?Fb.constant[3]:0)):(db=nb(Fb.buffer)?B.createStream(34962,Fb.buffer):B.getBuffer(Fb.buffer),pb="type"in Fb?mc[Fb.type]:db.dtype,Yc=!!Fb.normalized,jb=Fb.size|0,ic=Fb.offset|0,va=Fb.stride|0,oc=Fb.divisor|0);eb=na.location;Na=
T[eb];if(1===kb){Na.buffer||Y.enableVertexAttribArray(eb);Bb=jb||4;if(Na.type!==pb||Na.size!==Bb||Na.buffer!==db||Na.normalized!==Yc||Na.offset!==ic||Na.stride!==va)Y.bindBuffer(34962,db.buffer),Y.vertexAttribPointer(eb,Bb,pb,Yc,va,ic),Na.type=pb,Na.size=Bb,Na.buffer=db,Na.normalized=Yc,Na.offset=ic,Na.stride=va;Na.divisor!==oc&&(z.vertexAttribDivisorANGLE(eb,oc),Na.divisor=oc)}else if(Na.buffer&&(Y.disableVertexAttribArray(eb),Na.buffer=null),Na.x!==Va||Na.y!==bb||Na.z!==Ba||Na.w!==ya)Y.vertexAttrib4f(eb,
Va,bb,Ba,ya),Na.x=Va,Na.y=bb,Na.z=Ba,Na.w=ya;Ab=Qa.location;Ta=T[Ab];Ta.buffer||Y.enableVertexAttribArray(Ab);if(5126!==Ta.type||2!==Ta.size||Ta.buffer!==w||!1!==Ta.normalized||0!==Ta.offset||24!==Ta.stride)Y.bindBuffer(34962,w.buffer),Y.vertexAttribPointer(Ab,2,5126,!1,24,0),Ta.type=5126,Ta.size=2,Ta.buffer=w,Ta.normalized=!1,Ta.offset=0,Ta.stride=24;0!==Ta.divisor&&(z.vertexAttribDivisorANGLE(Ab,0),Ta.divisor=0);Hc=ea.location;Jb=T[Hc];Jb.buffer||Y.enableVertexAttribArray(Hc);if(5126!==Jb.type||
2!==Jb.size||Jb.buffer!==e||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)Y.bindBuffer(34962,e.buffer),Y.vertexAttribPointer(Hc,2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=e,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(z.vertexAttribDivisorANGLE(Hc,0),Jb.divisor=0);Lb=aa.location;Ub=T[Lb];Ub.buffer||Y.enableVertexAttribArray(Lb);if(5126!==Ub.type||2!==Ub.size||Ub.buffer!==g||!1!==Ub.normalized||16!==Ub.offset||24!==Ub.stride)Y.bindBuffer(34962,g.buffer),Y.vertexAttribPointer(Lb,
2,5126,!1,24,16),Ub.type=5126,Ub.size=2,Ub.buffer=g,Ub.normalized=!1,Ub.offset=16,Ub.stride=24;0!==Ub.divisor&&(z.vertexAttribDivisorANGLE(Lb,0),Ub.divisor=0);wa=p.call(this,oa,a,0);Y.uniform4f(ab.location,wa[0],wa[1],wa[2],wa[3]);Y.uniform1f(Oa.location,a.lineWidth);Y.uniform1f(ma.location,a.capSize);Jd=a.scale;Y.uniform2f(U.location,Jd[0],Jd[1]);Ma=a.scaleFract;Y.uniform2f(pa.location,Ma[0],Ma[1]);Pb=a.translate;Y.uniform2f(Q.location,Pb[0],Pb[1]);fb=a.translateFract;Y.uniform2f(Ob.location,fb[0],
fb[1]);Y.uniform1f(X.location,a.opacity);(ib=Da.elements)?Y.bindBuffer(34963,ib.buffer.buffer):pc.currentVAO&&(ib=Ga.getElements(pc.currentVAO.elements))&&Y.bindBuffer(34963,ib.buffer.buffer);xa=Da.offset;ec=a.count;0<ec?ib?z.drawElementsInstancedANGLE(4,36,ib.type,xa<<(ib.type-5121>>1),ec):z.drawArraysInstancedANGLE(4,xa,36,ec):0>ec&&(ib?Y.drawElements(4,36,ib.type,xa<<(ib.type-5121>>1)):Y.drawArrays(4,xa,36));da.dirty=!0;pc.setVAO(null);oa.viewportWidth=h;oa.viewportHeight=y;H&&(c.cpuTime+=performance.now()-
r);N&&B.destroyStream(J);nc&&B.destroyStream(Xa);Ua&&B.destroyStream(Vb);jd&&B.destroyStream(db)},scope:function(b,a,f){var k,p,q,d,l,m,h,I,G,A,z,C,F,E,J,M,L,ca,ba,O,P,K,Q,U,T,Y,fa,ha,V,X,ia,ja,aa,Aa,ua,pc,za,sa,ma,Ha,ea,Cc,pa,Zb,Gc,Ya,Ea,td,Ib,Ua,ka,cb,tb,cd,na,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Ga,Yb,Oa,db,ab,Qa,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Ob,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,La,sc,Nc,Jc,zb,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Cb,
xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd;k=b.viewport;p=k.x|0;q=k.y|0;d="width"in k?k.width|0:oa.framebufferWidth-p;l="height"in k?k.height|0:oa.framebufferHeight-q;m=oa.viewportWidth;oa.viewportWidth=d;h=oa.viewportHeight;oa.viewportHeight=l;I=Ka[0];Ka[0]=p;G=Ka[1];Ka[1]=q;A=Ka[2];Ka[2]=d;z=Ka[3];Ka[3]=l;C=jc[0];jc[0]=0;F=jc[1];jc[1]=0;E=jc[2];jc[2]=
0;J=jc[3];jc[3]=0;M=ga.blend_enable;ga.blend_enable=!0;L=zc[0];zc[0]=32774;ca=zc[1];zc[1]=32774;ba=N[0];N[0]=770;O=N[1];N[1]=771;P=N[2];N[2]=773;K=N[3];N[3]=1;Q=ga.depth_enable;ga.depth_enable=!1;U=b.viewport;T=U.x|0;Y=U.y|0;fa="width"in U?U.width|0:oa.framebufferWidth-T;ha="height"in U?U.height|0:oa.framebufferHeight-Y;V=Z[0];Z[0]=T;X=Z[1];Z[1]=Y;ia=Z[2];Z[2]=fa;ja=Z[3];Z[3]=ha;aa=ga.scissor_enable;ga.scissor_enable=!0;if(Aa=da.profile)ua=performance.now(),c.count++;pc=Da.count;Da.count=36;za=b.count;
sa=Da.instances;Da.instances=za;ma=Da.primitive;Da.primitive=4;Ha=b.capSize;ea=cc[5];cc[5]=Ha;Cc=b.lineWidth;pa=cc[4];cc[4]=Cc;Zb=b.opacity;Gc=cc[10];cc[10]=Zb;Ya=b.range;Ea=cc[18];cc[18]=Ya;td=b.scale;Ib=cc[6];cc[6]=td;Ua=b.scaleFract;ka=cc[7];cc[7]=Ua;cb=b.translate;tb=cc[8];cc[8]=cb;cd=b.translateFract;na=cc[9];cc[9]=cd;kc=n.call(this,oa,b,f);Sb=cc[3];cc[3]=kc;x=t.buffer;t.buffer=g;Tb=t.divisor;t.divisor=0;Pa=t.normalized;t.normalized=!1;ob=t.offset;t.offset=16;ub=t.size;t.size=0;hb=t.state;t.state=
1;Ra=t.stride;t.stride=24;Ga=t.type;t.type=5126;Yb=t.w;t.w=0;Oa=t.x;t.x=0;db=t.y;t.y=0;ab=t.z;t.z=0;Qa=v.call(this,oa,b,f);Fb.offset=Qa;ic=!1;jb=null;kb=0;va=!1;ya=pb=0;Va=1;bb=0;Ba=5126;Ab=Bb=Na=eb=0;nb(Fb)?(ic=!0,jb=B.createStream(34962,Fb),Ba=jb.dtype):(jb=B.getBuffer(Fb))?Ba=jb.dtype:"constant"in Fb?(Va=2,"number"===typeof Fb.constant?(Na=Fb.constant,Bb=Ab=eb=0):(Na=0<Fb.constant.length?Fb.constant[0]:0,Bb=1<Fb.constant.length?Fb.constant[1]:0,Ab=2<Fb.constant.length?Fb.constant[2]:0,eb=3<Fb.constant.length?
Fb.constant[3]:0)):(jb=nb(Fb.buffer)?B.createStream(34962,Fb.buffer):B.getBuffer(Fb.buffer),Ba="type"in Fb?mc[Fb.type]:jb.dtype,va=!!Fb.normalized,ya=Fb.size|0,pb=Fb.offset|0,bb=Fb.stride|0,kb=Fb.divisor|0);Ta=D.buffer;D.buffer=jb;Hc=D.divisor;D.divisor=kb;Jb=D.normalized;D.normalized=va;Lb=D.offset;D.offset=pb;Ub=D.size;D.size=ya;wa=D.state;D.state=Va;Ob=D.stride;D.stride=bb;Ma=D.type;D.type=Ba;Pb=D.w;D.w=eb;fb=D.x;D.x=Na;ib=D.y;D.y=Bb;xa=D.z;D.z=Ab;ec=y.buffer;y.buffer=w;Fa=y.divisor;y.divisor=
0;qb=y.normalized;y.normalized=!1;rb=y.offset;y.offset=0;Za=y.size;y.size=0;$a=y.state;y.state=1;rc=y.stride;y.stride=24;dd=y.type;y.type=5126;tc=y.w;y.w=0;Wa=y.x;y.x=0;Mb=y.y;y.y=0;Zc=y.z;y.z=0;Ia=W.call(this,oa,b,f);qa.offset=Ia;vc=!1;Sa=null;Ca=0;lb=!1;Db=vb=0;sb=1;uc=0;wb=5126;Jc=Nc=sc=La=0;nb(qa)?(vc=!0,Sa=B.createStream(34962,qa),wb=Sa.dtype):(Sa=B.getBuffer(qa))?wb=Sa.dtype:"constant"in qa?(sb=2,"number"===typeof qa.constant?(sc=qa.constant,Nc=Jc=La=0):(sc=0<qa.constant.length?qa.constant[0]:
0,Nc=1<qa.constant.length?qa.constant[1]:0,Jc=2<qa.constant.length?qa.constant[2]:0,La=3<qa.constant.length?qa.constant[3]:0)):(Sa=nb(qa.buffer)?B.createStream(34962,qa.buffer):B.getBuffer(qa.buffer),wb="type"in qa?mc[qa.type]:Sa.dtype,lb=!!qa.normalized,Db=qa.size|0,vb=qa.offset|0,uc=qa.stride|0,Ca=qa.divisor|0);zb=u.buffer;u.buffer=Sa;fd=u.divisor;u.divisor=Ca;Wb=u.normalized;u.normalized=lb;bc=u.offset;u.offset=vb;Qb=u.size;u.size=Db;Ja=u.state;u.state=sb;$b=u.stride;u.stride=uc;mb=u.type;u.type=
wb;xb=u.w;u.w=La;Nb=u.x;u.x=sc;Rb=u.y;u.y=Nc;fc=u.z;u.z=Jc;hc=H.buffer;H.buffer=e;Cb=H.divisor;H.divisor=0;xc=H.normalized;H.normalized=!1;yc=H.offset;H.offset=8;Ac=H.size;H.size=0;Kc=H.state;H.state=1;$c=H.stride;H.stride=24;Rc=H.type;H.type=5126;Lc=H.w;H.w=0;Kb=H.x;H.x=0;Eb=H.y;H.y=0;Mc=H.z;H.z=0;Ec=la.call(this,oa,b,f);Gb.offset=Ec;Sc=!1;gc=null;Vc=0;gd=!1;md=kd=0;Wc=1;bf=0;Zd=5126;Md=me=se=ke=0;nb(Gb)?(Sc=!0,gc=B.createStream(34962,Gb),Zd=gc.dtype):(gc=B.getBuffer(Gb))?Zd=gc.dtype:"constant"in
Gb?(Wc=2,"number"===typeof Gb.constant?(se=Gb.constant,me=Md=ke=0):(se=0<Gb.constant.length?Gb.constant[0]:0,me=1<Gb.constant.length?Gb.constant[1]:0,Md=2<Gb.constant.length?Gb.constant[2]:0,ke=3<Gb.constant.length?Gb.constant[3]:0)):(gc=nb(Gb.buffer)?B.createStream(34962,Gb.buffer):B.getBuffer(Gb.buffer),Zd="type"in Gb?mc[Gb.type]:gc.dtype,gd=!!Gb.normalized,md=Gb.size|0,kd=Gb.offset|0,bf=Gb.stride|0,Vc=Gb.divisor|0);Kd=r.buffer;r.buffer=gc;id=r.divisor;r.divisor=Vc;Bc=r.normalized;r.normalized=
gd;od=r.offset;r.offset=kd;ld=r.size;r.size=md;bd=r.state;r.state=Wc;pd=r.stride;r.stride=bf;Gd=r.type;r.type=Zd;Hd=r.w;r.w=ke;te=r.x;r.x=se;ze=r.y;r.y=me;Ae=r.z;r.z=Md;ne=S.call(this,oa,b,f);yb.offset=ne;ee=!1;de=null;pe=0;be=!1;wc=he=0;Uc=1;qe=0;le=5126;Rd=Qd=Pd=Ld=0;nb(yb)?(ee=!0,de=B.createStream(34962,yb),le=de.dtype):(de=B.getBuffer(yb))?le=de.dtype:"constant"in yb?(Uc=2,"number"===typeof yb.constant?(Pd=yb.constant,Qd=Rd=Ld=0):(Pd=0<yb.constant.length?yb.constant[0]:0,Qd=1<yb.constant.length?
yb.constant[1]:0,Rd=2<yb.constant.length?yb.constant[2]:0,Ld=3<yb.constant.length?yb.constant[3]:0)):(de=nb(yb.buffer)?B.createStream(34962,yb.buffer):B.getBuffer(yb.buffer),le="type"in yb?mc[yb.type]:de.dtype,be=!!yb.normalized,wc=yb.size|0,he=yb.offset|0,qe=yb.stride|0,pe=yb.divisor|0);ie=R.buffer;R.buffer=de;vf=R.divisor;R.divisor=pe;Ce=R.normalized;R.normalized=be;oe=R.offset;R.offset=he;Re=R.size;R.size=wc;Se=R.state;R.state=Uc;Ne=R.stride;R.stride=qe;re=R.type;R.type=le;Fe=R.w;R.w=Ld;He=R.x;
R.x=Pd;Ie=R.y;R.y=Qd;Je=R.z;R.z=Rd;Ge=ra.vert;ra.vert=2;Nd=ra.frag;ra.frag=1;da.dirty=!0;a(oa,b,f);oa.viewportWidth=m;oa.viewportHeight=h;Ka[0]=I;Ka[1]=G;Ka[2]=A;Ka[3]=z;jc[0]=C;jc[1]=F;jc[2]=E;jc[3]=J;ga.blend_enable=M;zc[0]=L;zc[1]=ca;N[0]=ba;N[1]=O;N[2]=P;N[3]=K;ga.depth_enable=Q;Z[0]=V;Z[1]=X;Z[2]=ia;Z[3]=ja;ga.scissor_enable=aa;Aa&&(c.cpuTime+=performance.now()-ua);Da.count=pc;Da.instances=sa;Da.primitive=ma;cc[5]=ea;cc[4]=pa;cc[10]=Gc;cc[18]=Ea;cc[6]=Ib;cc[7]=ka;cc[8]=tb;cc[9]=na;cc[3]=Sb;t.buffer=
x;t.divisor=Tb;t.normalized=Pa;t.offset=ob;t.size=ub;t.state=hb;t.stride=Ra;t.type=Ga;t.w=Yb;t.x=Oa;t.y=db;t.z=ab;ic&&B.destroyStream(jb);D.buffer=Ta;D.divisor=Hc;D.normalized=Jb;D.offset=Lb;D.size=Ub;D.state=wa;D.stride=Ob;D.type=Ma;D.w=Pb;D.x=fb;D.y=ib;D.z=xa;y.buffer=ec;y.divisor=Fa;y.normalized=qb;y.offset=rb;y.size=Za;y.state=$a;y.stride=rc;y.type=dd;y.w=tc;y.x=Wa;y.y=Mb;y.z=Zc;vc&&B.destroyStream(Sa);u.buffer=zb;u.divisor=fd;u.normalized=Wb;u.offset=bc;u.size=Qb;u.state=Ja;u.stride=$b;u.type=
mb;u.w=xb;u.x=Nb;u.y=Rb;u.z=fc;H.buffer=hc;H.divisor=Cb;H.normalized=xc;H.offset=yc;H.size=Ac;H.state=Kc;H.stride=$c;H.type=Rc;H.w=Lc;H.x=Kb;H.y=Eb;H.z=Mc;Sc&&B.destroyStream(gc);r.buffer=Kd;r.divisor=id;r.normalized=Bc;r.offset=od;r.size=ld;r.state=bd;r.stride=pd;r.type=Gd;r.w=Hd;r.x=te;r.y=ze;r.z=Ae;ee&&B.destroyStream(de);R.buffer=ie;R.divisor=vf;R.normalized=Ce;R.offset=oe;R.size=Re;R.state=Se;R.stride=Ne;R.type=re;R.w=Fe;R.x=He;R.y=Ie;R.z=Je;ra.vert=Ge;ra.frag=Nd;da.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
c,d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,H,r,ta,S,R,z,ia,J,V,K,ka,aa,ma,na,Qa){var Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra,cc,pc,jc,td,zc,ba,N,ha,Ha,tb,cd,Nc,L,E,ja,ua,Z,fa,sa,M,F;Cb=a.attributes;ea=a.buffer;Oa=a.context;X=a.current;P=a.draw;O=a.elements;U=a.extensions;pa=a.framebuffer;Q=a.gl;Ob=a.isBufferArgs;ab=a.next;T=a.shader;B=a.uniforms;oa=a.vao;da=ab.blend_color;Da=X.blend_color;Ga=ab.blend_equation;zb=X.blend_equation;La=ab.blend_func;Y=X.blend_func;nb=ab.colorMask;
ga=X.colorMask;ra=ab.depth_range;cc=X.depth_range;pc=ab.polygonOffset_offset;jc=X.polygonOffset_offset;td=ab.sample_coverage;zc=X.sample_coverage;ba=ab.scissor_box;N=X.scissor_box;ha=ab.stencil_func;Ha=X.stencil_func;tb=ab.stencil_opBack;cd=X.stencil_opBack;Nc=ab.stencil_opFront;L=X.stencil_opFront;E=ab.viewport;ja=X.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Z={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};sa={divisor:1,
offset:16,stride:8};M={divisor:1,offset:16,stride:8};F={divisor:1,offset:0,stride:4};return{batch:function(b,e){var g,a,f,n,k,p;g=pa.next;g!==pa.cur&&(g?Q.bindFramebuffer(36160,g.framebuffer):Q.bindFramebuffer(36160,null),pa.cur=g);if(X.dirty){var t,q,d,h,w,I,G,A,B,E,ba,T,da,Ga,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc;t=ab.dither;t!==X.dither&&(t?Q.enable(3024):Q.disable(3024),X.dither=t);q=ab.depth_func;q!==X.depth_func&&(Q.depthFunc(q),X.depth_func=q);d=ra[0];h=ra[1];if(d!==cc[0]||
h!==cc[1])Q.depthRange(d,h),cc[0]=d,cc[1]=h;w=ab.depth_mask;w!==X.depth_mask&&(Q.depthMask(w),X.depth_mask=w);I=nb[0];G=nb[1];A=nb[2];B=nb[3];if(I!==ga[0]||G!==ga[1]||A!==ga[2]||B!==ga[3])Q.colorMask(I,G,A,B),ga[0]=I,ga[1]=G,ga[2]=A,ga[3]=B;E=ab.cull_enable;E!==X.cull_enable&&(E?Q.enable(2884):Q.disable(2884),X.cull_enable=E);ba=ab.cull_face;ba!==X.cull_face&&(Q.cullFace(ba),X.cull_face=ba);T=ab.frontFace;T!==X.frontFace&&(Q.frontFace(T),X.frontFace=T);da=ab.lineWidth;da!==X.lineWidth&&(Q.lineWidth(da),
X.lineWidth=da);Ga=ab.polygonOffset_enable;Ga!==X.polygonOffset_enable&&(Ga?Q.enable(32823):Q.disable(32823),X.polygonOffset_enable=Ga);Ad=pc[0];xe=pc[1];if(Ad!==jc[0]||xe!==jc[1])Q.polygonOffset(Ad,xe),jc[0]=Ad,jc[1]=xe;Me=ab.sample_alpha;Me!==X.sample_alpha&&(Me?Q.enable(32926):Q.disable(32926),X.sample_alpha=Me);Qe=ab.sample_enable;Qe!==X.sample_enable&&(Qe?Q.enable(32928):Q.disable(32928),X.sample_enable=Qe);Bd=td[0];Be=td[1];if(Bd!==zc[0]||Be!==zc[1])Q.sampleCoverage(Bd,Be),zc[0]=Bd,zc[1]=Be;
Vd=ab.stencil_mask;Vd!==X.stencil_mask&&(Q.stencilMask(Vd),X.stencil_mask=Vd);Wd=ha[0];ae=ha[1];Yd=ha[2];if(Wd!==Ha[0]||ae!==Ha[1]||Yd!==Ha[2])Q.stencilFunc(Wd,ae,Yd),Ha[0]=Wd,Ha[1]=ae,Ha[2]=Yd;qd=Nc[0];nd=Nc[1];vd=Nc[2];ad=Nc[3];if(qd!==L[0]||nd!==L[1]||vd!==L[2]||ad!==L[3])Q.stencilOpSeparate(qd,nd,vd,ad),L[0]=qd,L[1]=nd,L[2]=vd,L[3]=ad;sd=tb[0];Tc=tb[1];Ed=tb[2];Oc=tb[3];if(sd!==cd[0]||Tc!==cd[1]||Ed!==cd[2]||Oc!==cd[3])Q.stencilOpSeparate(sd,Tc,Ed,Oc),cd[0]=sd,cd[1]=Tc,cd[2]=Ed,cd[3]=Oc}Q.blendColor(0,
0,0,0);Da[0]=0;Da[1]=0;Da[2]=0;Da[3]=0;Q.enable(3042);X.blend_enable=!0;Q.blendEquationSeparate(32774,32774);zb[0]=32774;zb[1]=32774;Q.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;Q.enable(3089);X.scissor_enable=!0;Q.disable(2960);X.stencil_enable=!1;if(a=X.profile)f=performance.now(),c.count+=e;Q.useProgram(v.program);n=U.angle_instanced_arrays;var Ic,qc,gb,hd,Hb;oa.setVAO(null);Ic=ia.location;qc=Cb[Ic];qc.buffer||Q.enableVertexAttribArray(Ic);if(5126!==qc.type||1!==qc.size||
qc.buffer!==l||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)Q.bindBuffer(34962,l.buffer),Q.vertexAttribPointer(Ic,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=l,qc.normalized=!1,qc.offset=0,qc.stride=8;0!==qc.divisor&&(n.vertexAttribDivisorANGLE(Ic,0),qc.divisor=0);gb=J.location;hd=Cb[gb];hd.buffer||Q.enableVertexAttribArray(gb);if(5126!==hd.type||1!==hd.size||hd.buffer!==m||!1!==hd.normalized||4!==hd.offset||8!==hd.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(gb,1,5126,!1,8,4),
hd.type=5126,hd.size=1,hd.buffer=m,hd.normalized=!1,hd.offset=4,hd.stride=8;0!==hd.divisor&&(n.vertexAttribDivisorANGLE(gb,0),hd.divisor=0);(Hb=P.elements)?Q.bindBuffer(34963,Hb.buffer.buffer):oa.currentVAO&&(Hb=O.getElements(oa.currentVAO.elements))&&Q.bindBuffer(34963,Hb.buffer.buffer);for(k=0;k<e;++k){p=b[k];var nc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,La,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,
xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd;nc=p.viewport;Xa=nc.x|0;Qc=nc.y|0;ac="width"in nc?nc.width|0:Oa.framebufferWidth-Xa;lc="height"in nc?nc.height|0:Oa.framebufferHeight-Qc;Id=Oa.viewportWidth;Oa.viewportWidth=ac;rd=Oa.viewportHeight;Oa.viewportHeight=lc;Q.viewport(Xa,Qc,ac,lc);ja[0]=Xa;ja[1]=Qc;ja[2]=ac;ja[3]=lc;(Fc=D.call(this,
Oa,p,k))?Q.enable(2929):Q.disable(2929);X.depth_enable=Fc;dc=p.viewport;Cc=dc.x|0;Xc=dc.y|0;Zb="width"in dc?dc.width|0:Oa.framebufferWidth-Cc;Gc="height"in dc?dc.height|0:Oa.framebufferHeight-Xc;Q.scissor(Cc,Xc,Zb,Gc);N[0]=Cc;N[1]=Xc;N[2]=Zb;N[3]=Gc;Z.buffer=p.positionBuffer;Ya=!1;Ea=null;ud=0;Ib=!1;Vb=Ua=0;cb=1;Dc=0;Xb=5126;x=Sb=kc=La=0;Ob(Z)?(Ya=!0,Ea=ea.createStream(34962,Z),Xb=Ea.dtype):(Ea=ea.getBuffer(Z))?Xb=Ea.dtype:"constant"in Z?(cb=2,"number"===typeof Z.constant?(kc=Z.constant,Sb=x=La=0):
(kc=0<Z.constant.length?Z.constant[0]:0,Sb=1<Z.constant.length?Z.constant[1]:0,x=2<Z.constant.length?Z.constant[2]:0,La=3<Z.constant.length?Z.constant[3]:0)):(Ea=Ob(Z.buffer)?ea.createStream(34962,Z.buffer):ea.getBuffer(Z.buffer),Xb="type"in Z?ua[Z.type]:Ea.dtype,Ib=!!Z.normalized,Vb=Z.size|0,Ua=Z.offset|0,Dc=Z.stride|0,ud=Z.divisor|0);Tb=W.location;Pa=Cb[Tb];if(1===cb){Pa.buffer||Q.enableVertexAttribArray(Tb);ob=Vb||2;if(Pa.type!==Xb||Pa.size!==ob||Pa.buffer!==Ea||Pa.normalized!==Ib||Pa.offset!==
Ua||Pa.stride!==Dc)Q.bindBuffer(34962,Ea.buffer),Q.vertexAttribPointer(Tb,ob,Xb,Ib,Dc,Ua),Pa.type=Xb,Pa.size=ob,Pa.buffer=Ea,Pa.normalized=Ib,Pa.offset=Ua,Pa.stride=Dc;Pa.divisor!==ud&&(n.vertexAttribDivisorANGLE(Tb,ud),Pa.divisor=ud)}else if(Pa.buffer&&(Q.disableVertexAttribArray(Tb),Pa.buffer=null),Pa.x!==kc||Pa.y!==Sb||Pa.z!==x||Pa.w!==La)Q.vertexAttrib4f(Tb,kc,Sb,x,La),Pa.x=kc,Pa.y=Sb,Pa.z=x,Pa.w=La;sa.buffer=p.positionBuffer;ub=!1;hb=null;Ra=0;Pc=!1;jd=Yb=0;db=1;oc=0;Yc=5126;va=kb=jb=ic=0;Ob(sa)?
(ub=!0,hb=ea.createStream(34962,sa),Yc=hb.dtype):(hb=ea.getBuffer(sa))?Yc=hb.dtype:"constant"in sa?(db=2,"number"===typeof sa.constant?(jb=sa.constant,kb=va=ic=0):(jb=0<sa.constant.length?sa.constant[0]:0,kb=1<sa.constant.length?sa.constant[1]:0,va=2<sa.constant.length?sa.constant[2]:0,ic=3<sa.constant.length?sa.constant[3]:0)):(hb=Ob(sa.buffer)?ea.createStream(34962,sa.buffer):ea.getBuffer(sa.buffer),Yc="type"in sa?ua[sa.type]:hb.dtype,Pc=!!sa.normalized,jd=sa.size|0,Yb=sa.offset|0,oc=sa.stride|
0,Ra=sa.divisor|0);pb=H.location;ya=Cb[pb];if(1===db){ya.buffer||Q.enableVertexAttribArray(pb);Va=jd||2;if(ya.type!==Yc||ya.size!==Va||ya.buffer!==hb||ya.normalized!==Pc||ya.offset!==Yb||ya.stride!==oc)Q.bindBuffer(34962,hb.buffer),Q.vertexAttribPointer(pb,Va,Yc,Pc,oc,Yb),ya.type=Yc,ya.size=Va,ya.buffer=hb,ya.normalized=Pc,ya.offset=Yb,ya.stride=oc;ya.divisor!==Ra&&(n.vertexAttribDivisorANGLE(pb,Ra),ya.divisor=Ra)}else if(ya.buffer&&(Q.disableVertexAttribArray(pb),ya.buffer=null),ya.x!==jb||ya.y!==
kb||ya.z!==va||ya.w!==ic)Q.vertexAttrib4f(pb,jb,kb,va,ic),ya.x=jb,ya.y=kb,ya.z=va,ya.w=ic;fa.buffer=p.positionFractBuffer;bb=!1;Ba=null;eb=0;Na=!1;Ab=Bb=0;Ta=1;Hc=0;Jb=5126;Jd=wa=Ub=Lb=0;Ob(fa)?(bb=!0,Ba=ea.createStream(34962,fa),Jb=Ba.dtype):(Ba=ea.getBuffer(fa))?Jb=Ba.dtype:"constant"in fa?(Ta=2,"number"===typeof fa.constant?(Ub=fa.constant,wa=Jd=Lb=0):(Ub=0<fa.constant.length?fa.constant[0]:0,wa=1<fa.constant.length?fa.constant[1]:0,Jd=2<fa.constant.length?fa.constant[2]:0,Lb=3<fa.constant.length?
fa.constant[3]:0)):(Ba=Ob(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),Jb="type"in fa?ua[fa.type]:Ba.dtype,Na=!!fa.normalized,Ab=fa.size|0,Bb=fa.offset|0,Hc=fa.stride|0,eb=fa.divisor|0);Ma=u.location;Pb=Cb[Ma];if(1===Ta){Pb.buffer||Q.enableVertexAttribArray(Ma);fb=Ab||2;if(Pb.type!==Jb||Pb.size!==fb||Pb.buffer!==Ba||Pb.normalized!==Na||Pb.offset!==Bb||Pb.stride!==Hc)Q.bindBuffer(34962,Ba.buffer),Q.vertexAttribPointer(Ma,fb,Jb,Na,Hc,Bb),Pb.type=Jb,Pb.size=fb,Pb.buffer=Ba,Pb.normalized=
Na,Pb.offset=Bb,Pb.stride=Hc;Pb.divisor!==eb&&(n.vertexAttribDivisorANGLE(Ma,eb),Pb.divisor=eb)}else if(Pb.buffer&&(Q.disableVertexAttribArray(Ma),Pb.buffer=null),Pb.x!==Ub||Pb.y!==wa||Pb.z!==Jd||Pb.w!==Lb)Q.vertexAttrib4f(Ma,Ub,wa,Jd,Lb),Pb.x=Ub,Pb.y=wa,Pb.z=Jd,Pb.w=Lb;M.buffer=p.positionFractBuffer;ib=!1;xa=null;ec=0;Fa=!1;rb=qb=0;Za=1;$a=0;rc=5126;Mb=Wa=tc=dd=0;Ob(M)?(ib=!0,xa=ea.createStream(34962,M),rc=xa.dtype):(xa=ea.getBuffer(M))?rc=xa.dtype:"constant"in M?(Za=2,"number"===typeof M.constant?
(tc=M.constant,Wa=Mb=dd=0):(tc=0<M.constant.length?M.constant[0]:0,Wa=1<M.constant.length?M.constant[1]:0,Mb=2<M.constant.length?M.constant[2]:0,dd=3<M.constant.length?M.constant[3]:0)):(xa=Ob(M.buffer)?ea.createStream(34962,M.buffer):ea.getBuffer(M.buffer),rc="type"in M?ua[M.type]:xa.dtype,Fa=!!M.normalized,rb=M.size|0,qb=M.offset|0,$a=M.stride|0,ec=M.divisor|0);Zc=r.location;Ia=Cb[Zc];if(1===Za){Ia.buffer||Q.enableVertexAttribArray(Zc);vc=rb||2;if(Ia.type!==rc||Ia.size!==vc||Ia.buffer!==xa||Ia.normalized!==
Fa||Ia.offset!==qb||Ia.stride!==$a)Q.bindBuffer(34962,xa.buffer),Q.vertexAttribPointer(Zc,vc,rc,Fa,$a,qb),Ia.type=rc,Ia.size=vc,Ia.buffer=xa,Ia.normalized=Fa,Ia.offset=qb,Ia.stride=$a;Ia.divisor!==ec&&(n.vertexAttribDivisorANGLE(Zc,ec),Ia.divisor=ec)}else if(Ia.buffer&&(Q.disableVertexAttribArray(Zc),Ia.buffer=null),Ia.x!==tc||Ia.y!==Wa||Ia.z!==Mb||Ia.w!==dd)Q.vertexAttrib4f(Zc,tc,Wa,Mb,dd),Ia.x=tc,Ia.y=Wa,Ia.z=Mb,Ia.w=dd;F.buffer=p.colorBuffer;Sa=!1;Ca=null;lb=0;vb=!1;sb=Db=0;uc=1;wb=0;wd=5126;ed=
Jc=Fd=sc=0;Ob(F)?(Sa=!0,Ca=ea.createStream(34962,F),wd=Ca.dtype):(Ca=ea.getBuffer(F))?wd=Ca.dtype:"constant"in F?(uc=2,"number"===typeof F.constant?(Fd=F.constant,Jc=ed=sc=0):(Fd=0<F.constant.length?F.constant[0]:0,Jc=1<F.constant.length?F.constant[1]:0,ed=2<F.constant.length?F.constant[2]:0,sc=3<F.constant.length?F.constant[3]:0)):(Ca=Ob(F.buffer)?ea.createStream(34962,F.buffer):ea.getBuffer(F.buffer),wd="type"in F?ua[F.type]:Ca.dtype,vb=!!F.normalized,sb=F.size|0,Db=F.offset|0,wb=F.stride|0,lb=
F.divisor|0);fd=ta.location;Wb=Cb[fd];if(1===uc){Wb.buffer||Q.enableVertexAttribArray(fd);bc=sb||4;if(Wb.type!==wd||Wb.size!==bc||Wb.buffer!==Ca||Wb.normalized!==vb||Wb.offset!==Db||Wb.stride!==wb)Q.bindBuffer(34962,Ca.buffer),Q.vertexAttribPointer(fd,bc,wd,vb,wb,Db),Wb.type=wd,Wb.size=bc,Wb.buffer=Ca,Wb.normalized=vb,Wb.offset=Db,Wb.stride=wb;Wb.divisor!==lb&&(n.vertexAttribDivisorANGLE(fd,lb),Wb.divisor=lb)}else if(Wb.buffer&&(Q.disableVertexAttribArray(fd),Wb.buffer=null),Wb.x!==Fd||Wb.y!==Jc||
Wb.z!==ed||Wb.w!==sc)Q.vertexAttrib4f(fd,Fd,Jc,ed,sc),Wb.x=Fd,Wb.y=Jc,Wb.z=ed,Wb.w=sc;Qb=p.scale;Ja=Qb[0];mb=Qb[1];k&&$b===Ja&&xb===mb||($b=Ja,xb=mb,Q.uniform2f(K.location,Ja,mb));Nb=p.scaleFract;Rb=Nb[0];hc=Nb[1];k&&fc===Rb&&Ze===hc||(fc=Rb,Ze=hc,Q.uniform2f(ka.location,Rb,hc));xc=p.translate;yc=xc[0];Kc=xc[1];k&&Ac===yc&&$c===Kc||(Ac=yc,$c=Kc,Q.uniform2f(ma.location,yc,Kc));Rc=p.translateFract;Lc=Rc[0];Eb=Rc[1];k&&Kb===Lc&&Mc===Eb||(Kb=Lc,Mc=Eb,Q.uniform2f(na.location,Lc,Eb));Ec=p.thickness;k&&
Sc===Ec||(Sc=Ec,Q.uniform1f(aa.location,Ec));gc=p.depth;k&&Vc===gc||(Vc=gc,Q.uniform1f(z.location,gc));gd=y.call(this,Oa,p,k);kd=gd[0];Wc=gd[1];Zd=gd[2];se=gd[3];k&&md===kd&&bf===Wc&&ke===Zd&&me===se||(md=kd,bf=Wc,ke=Zd,me=se,Q.uniform4f(Qa.location,kd,Wc,Zd,se));Md=p.dashLength;k&&Kd===Md||(Kd=Md,Q.uniform1f(S.location,Md));id=p.opacity;k&&Bc===id||(Bc=id,Q.uniform1f(V.location,id));(od=p.dashTexture)&&"framebuffer"===od._reglType&&(od=od.color[0]);ld=od._texture;Q.uniform1i(R.location,ld.bind());
bd=p.count;0<bd?Hb?n.drawElementsInstancedANGLE(5,4,Hb.type,0<<(Hb.type-5121>>1),bd):n.drawArraysInstancedANGLE(5,0,4,bd):0>bd&&(Hb?Q.drawElements(5,4,Hb.type,0<<(Hb.type-5121>>1)):Q.drawArrays(5,0,4));Oa.viewportWidth=Id;Oa.viewportHeight=rd;Ya&&ea.destroyStream(Ea);ub&&ea.destroyStream(hb);bb&&ea.destroyStream(Ba);ib&&ea.destroyStream(xa);Sa&&ea.destroyStream(Ca);ld.unbind()}X.dirty=!0;oa.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(b){var e,g,a,n,k,p,t,q,v,w,y,D,I,B,E,ba,T,da,
Ga,La,zd,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb,hd,Hb,nc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,ye,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb;e=pa.next;e!==pa.cur&&(e?Q.bindFramebuffer(36160,e.framebuffer):Q.bindFramebuffer(36160,null),pa.cur=e);if(X.dirty){var rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb;rb=ab.dither;
rb!==X.dither&&(rb?Q.enable(3024):Q.disable(3024),X.dither=rb);Za=ab.depth_func;Za!==X.depth_func&&(Q.depthFunc(Za),X.depth_func=Za);$a=ra[0];rc=ra[1];if($a!==cc[0]||rc!==cc[1])Q.depthRange($a,rc),cc[0]=$a,cc[1]=rc;dd=ab.depth_mask;dd!==X.depth_mask&&(Q.depthMask(dd),X.depth_mask=dd);tc=nb[0];Wa=nb[1];Mb=nb[2];Zc=nb[3];if(tc!==ga[0]||Wa!==ga[1]||Mb!==ga[2]||Zc!==ga[3])Q.colorMask(tc,Wa,Mb,Zc),ga[0]=tc,ga[1]=Wa,ga[2]=Mb,ga[3]=Zc;Ia=ab.cull_enable;Ia!==X.cull_enable&&(Ia?Q.enable(2884):Q.disable(2884),
X.cull_enable=Ia);vc=ab.cull_face;vc!==X.cull_face&&(Q.cullFace(vc),X.cull_face=vc);Sa=ab.frontFace;Sa!==X.frontFace&&(Q.frontFace(Sa),X.frontFace=Sa);Ca=ab.lineWidth;Ca!==X.lineWidth&&(Q.lineWidth(Ca),X.lineWidth=Ca);lb=ab.polygonOffset_enable;lb!==X.polygonOffset_enable&&(lb?Q.enable(32823):Q.disable(32823),X.polygonOffset_enable=lb);vb=pc[0];Db=pc[1];if(vb!==jc[0]||Db!==jc[1])Q.polygonOffset(vb,Db),jc[0]=vb,jc[1]=Db;sb=ab.sample_alpha;sb!==X.sample_alpha&&(sb?Q.enable(32926):Q.disable(32926),X.sample_alpha=
sb);uc=ab.sample_enable;uc!==X.sample_enable&&(uc?Q.enable(32928):Q.disable(32928),X.sample_enable=uc);wb=td[0];wd=td[1];if(wb!==zc[0]||wd!==zc[1])Q.sampleCoverage(wb,wd),zc[0]=wb,zc[1]=wd;sc=ab.stencil_mask;sc!==X.stencil_mask&&(Q.stencilMask(sc),X.stencil_mask=sc);Fd=ha[0];Jc=ha[1];ed=ha[2];if(Fd!==Ha[0]||Jc!==Ha[1]||ed!==Ha[2])Q.stencilFunc(Fd,Jc,ed),Ha[0]=Fd,Ha[1]=Jc,Ha[2]=ed;fd=Nc[0];Wb=Nc[1];bc=Nc[2];Qb=Nc[3];if(fd!==L[0]||Wb!==L[1]||bc!==L[2]||Qb!==L[3])Q.stencilOpSeparate(fd,Wb,bc,Qb),L[0]=
fd,L[1]=Wb,L[2]=bc,L[3]=Qb;Ja=tb[0];$b=tb[1];mb=tb[2];xb=tb[3];if(Ja!==cd[0]||$b!==cd[1]||mb!==cd[2]||xb!==cd[3])Q.stencilOpSeparate(Ja,$b,mb,xb),cd[0]=Ja,cd[1]=$b,cd[2]=mb,cd[3]=xb}g=b.viewport;a=g.x|0;n=g.y|0;k="width"in g?g.width|0:Oa.framebufferWidth-a;p="height"in g?g.height|0:Oa.framebufferHeight-n;t=Oa.viewportWidth;Oa.viewportWidth=k;q=Oa.viewportHeight;Oa.viewportHeight=p;Q.viewport(a,n,k,p);ja[0]=a;ja[1]=n;ja[2]=k;ja[3]=p;Q.blendColor(0,0,0,0);Da[0]=0;Da[1]=0;Da[2]=0;Da[3]=0;Q.enable(3042);
X.blend_enable=!0;Q.blendEquationSeparate(32774,32774);zb[0]=32774;zb[1]=32774;Q.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;(v=d.call(this,Oa,b,0))?Q.enable(2929):Q.disable(2929);X.depth_enable=v;w=b.viewport;y=w.x|0;D=w.y|0;I="width"in w?w.width|0:Oa.framebufferWidth-y;B="height"in w?w.height|0:Oa.framebufferHeight-D;Q.scissor(y,D,I,B);N[0]=y;N[1]=D;N[2]=I;N[3]=B;Q.enable(3089);X.scissor_enable=!0;Q.disable(2960);X.stencil_enable=!1;if(E=X.profile)ba=performance.now(),c.count++;
Q.useProgram(h.program);T=U.angle_instanced_arrays;oa.setVAO(null);Z.buffer=b.positionBuffer;da=!1;Ga=null;La=0;zd=!1;xe=Ad=0;Me=1;Qe=0;Bd=5126;ae=Wd=Vd=Be=0;Ob(Z)?(da=!0,Ga=ea.createStream(34962,Z),Bd=Ga.dtype):(Ga=ea.getBuffer(Z))?Bd=Ga.dtype:"constant"in Z?(Me=2,"number"===typeof Z.constant?(Vd=Z.constant,Wd=ae=Be=0):(Vd=0<Z.constant.length?Z.constant[0]:0,Wd=1<Z.constant.length?Z.constant[1]:0,ae=2<Z.constant.length?Z.constant[2]:0,Be=3<Z.constant.length?Z.constant[3]:0)):(Ga=Ob(Z.buffer)?ea.createStream(34962,
Z.buffer):ea.getBuffer(Z.buffer),Bd="type"in Z?ua[Z.type]:Ga.dtype,zd=!!Z.normalized,xe=Z.size|0,Ad=Z.offset|0,Qe=Z.stride|0,La=Z.divisor|0);Yd=W.location;qd=Cb[Yd];if(1===Me){qd.buffer||Q.enableVertexAttribArray(Yd);nd=xe||2;if(qd.type!==Bd||qd.size!==nd||qd.buffer!==Ga||qd.normalized!==zd||qd.offset!==Ad||qd.stride!==Qe)Q.bindBuffer(34962,Ga.buffer),Q.vertexAttribPointer(Yd,nd,Bd,zd,Qe,Ad),qd.type=Bd,qd.size=nd,qd.buffer=Ga,qd.normalized=zd,qd.offset=Ad,qd.stride=Qe;qd.divisor!==La&&(T.vertexAttribDivisorANGLE(Yd,
La),qd.divisor=La)}else if(qd.buffer&&(Q.disableVertexAttribArray(Yd),qd.buffer=null),qd.x!==Vd||qd.y!==Wd||qd.z!==ae||qd.w!==Be)Q.vertexAttrib4f(Yd,Vd,Wd,ae,Be),qd.x=Vd,qd.y=Wd,qd.z=ae,qd.w=Be;sa.buffer=b.positionBuffer;vd=!1;ad=null;sd=0;Tc=!1;Oc=Ed=0;Ic=1;qc=0;gb=5126;Xa=nc=Hb=hd=0;Ob(sa)?(vd=!0,ad=ea.createStream(34962,sa),gb=ad.dtype):(ad=ea.getBuffer(sa))?gb=ad.dtype:"constant"in sa?(Ic=2,"number"===typeof sa.constant?(Hb=sa.constant,nc=Xa=hd=0):(Hb=0<sa.constant.length?sa.constant[0]:0,nc=
1<sa.constant.length?sa.constant[1]:0,Xa=2<sa.constant.length?sa.constant[2]:0,hd=3<sa.constant.length?sa.constant[3]:0)):(ad=Ob(sa.buffer)?ea.createStream(34962,sa.buffer):ea.getBuffer(sa.buffer),gb="type"in sa?ua[sa.type]:ad.dtype,Tc=!!sa.normalized,Oc=sa.size|0,Ed=sa.offset|0,qc=sa.stride|0,sd=sa.divisor|0);Qc=H.location;ac=Cb[Qc];if(1===Ic){ac.buffer||Q.enableVertexAttribArray(Qc);lc=Oc||2;if(ac.type!==gb||ac.size!==lc||ac.buffer!==ad||ac.normalized!==Tc||ac.offset!==Ed||ac.stride!==qc)Q.bindBuffer(34962,
ad.buffer),Q.vertexAttribPointer(Qc,lc,gb,Tc,qc,Ed),ac.type=gb,ac.size=lc,ac.buffer=ad,ac.normalized=Tc,ac.offset=Ed,ac.stride=qc;ac.divisor!==sd&&(T.vertexAttribDivisorANGLE(Qc,sd),ac.divisor=sd)}else if(ac.buffer&&(Q.disableVertexAttribArray(Qc),ac.buffer=null),ac.x!==Hb||ac.y!==nc||ac.z!==Xa||ac.w!==hd)Q.vertexAttrib4f(Qc,Hb,nc,Xa,hd),ac.x=Hb,ac.y=nc,ac.z=Xa,ac.w=hd;fa.buffer=b.positionFractBuffer;Id=!1;rd=null;Fc=0;dc=!1;Xc=Cc=0;Zb=1;Gc=0;Ya=5126;Ua=Ib=ud=Ea=0;Ob(fa)?(Id=!0,rd=ea.createStream(34962,
fa),Ya=rd.dtype):(rd=ea.getBuffer(fa))?Ya=rd.dtype:"constant"in fa?(Zb=2,"number"===typeof fa.constant?(ud=fa.constant,Ib=Ua=Ea=0):(ud=0<fa.constant.length?fa.constant[0]:0,Ib=1<fa.constant.length?fa.constant[1]:0,Ua=2<fa.constant.length?fa.constant[2]:0,Ea=3<fa.constant.length?fa.constant[3]:0)):(rd=Ob(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),Ya="type"in fa?ua[fa.type]:rd.dtype,dc=!!fa.normalized,Xc=fa.size|0,Cc=fa.offset|0,Gc=fa.stride|0,Fc=fa.divisor|0);Vb=u.location;
cb=Cb[Vb];if(1===Zb){cb.buffer||Q.enableVertexAttribArray(Vb);Dc=Xc||2;if(cb.type!==Ya||cb.size!==Dc||cb.buffer!==rd||cb.normalized!==dc||cb.offset!==Cc||cb.stride!==Gc)Q.bindBuffer(34962,rd.buffer),Q.vertexAttribPointer(Vb,Dc,Ya,dc,Gc,Cc),cb.type=Ya,cb.size=Dc,cb.buffer=rd,cb.normalized=dc,cb.offset=Cc,cb.stride=Gc;cb.divisor!==Fc&&(T.vertexAttribDivisorANGLE(Vb,Fc),cb.divisor=Fc)}else if(cb.buffer&&(Q.disableVertexAttribArray(Vb),cb.buffer=null),cb.x!==ud||cb.y!==Ib||cb.z!==Ua||cb.w!==Ea)Q.vertexAttrib4f(Vb,
ud,Ib,Ua,Ea),cb.x=ud,cb.y=Ib,cb.z=Ua,cb.w=Ea;M.buffer=b.positionFractBuffer;Xb=!1;ye=null;kc=0;Sb=!1;Tb=x=0;Pa=1;ob=0;ub=5126;Yb=Pc=Ra=hb=0;Ob(M)?(Xb=!0,ye=ea.createStream(34962,M),ub=ye.dtype):(ye=ea.getBuffer(M))?ub=ye.dtype:"constant"in M?(Pa=2,"number"===typeof M.constant?(Ra=M.constant,Pc=Yb=hb=0):(Ra=0<M.constant.length?M.constant[0]:0,Pc=1<M.constant.length?M.constant[1]:0,Yb=2<M.constant.length?M.constant[2]:0,hb=3<M.constant.length?M.constant[3]:0)):(ye=Ob(M.buffer)?ea.createStream(34962,
M.buffer):ea.getBuffer(M.buffer),ub="type"in M?ua[M.type]:ye.dtype,Sb=!!M.normalized,Tb=M.size|0,x=M.offset|0,ob=M.stride|0,kc=M.divisor|0);jd=r.location;db=Cb[jd];if(1===Pa){db.buffer||Q.enableVertexAttribArray(jd);oc=Tb||2;if(db.type!==ub||db.size!==oc||db.buffer!==ye||db.normalized!==Sb||db.offset!==x||db.stride!==ob)Q.bindBuffer(34962,ye.buffer),Q.vertexAttribPointer(jd,oc,ub,Sb,ob,x),db.type=ub,db.size=oc,db.buffer=ye,db.normalized=Sb,db.offset=x,db.stride=ob;db.divisor!==kc&&(T.vertexAttribDivisorANGLE(jd,
kc),db.divisor=kc)}else if(db.buffer&&(Q.disableVertexAttribArray(jd),db.buffer=null),db.x!==Ra||db.y!==Pc||db.z!==Yb||db.w!==hb)Q.vertexAttrib4f(jd,Ra,Pc,Yb,hb),db.x=Ra,db.y=Pc,db.z=Yb,db.w=hb;F.buffer=b.colorBuffer;Yc=!1;ic=null;jb=0;kb=!1;pb=va=0;ya=1;Va=0;bb=5126;Bb=Na=eb=Ba=0;Ob(F)?(Yc=!0,ic=ea.createStream(34962,F),bb=ic.dtype):(ic=ea.getBuffer(F))?bb=ic.dtype:"constant"in F?(ya=2,"number"===typeof F.constant?(eb=F.constant,Na=Bb=Ba=0):(eb=0<F.constant.length?F.constant[0]:0,Na=1<F.constant.length?
F.constant[1]:0,Bb=2<F.constant.length?F.constant[2]:0,Ba=3<F.constant.length?F.constant[3]:0)):(ic=Ob(F.buffer)?ea.createStream(34962,F.buffer):ea.getBuffer(F.buffer),bb="type"in F?ua[F.type]:ic.dtype,kb=!!F.normalized,pb=F.size|0,va=F.offset|0,Va=F.stride|0,jb=F.divisor|0);Ab=ta.location;Ta=Cb[Ab];if(1===ya){Ta.buffer||Q.enableVertexAttribArray(Ab);Hc=pb||4;if(Ta.type!==bb||Ta.size!==Hc||Ta.buffer!==ic||Ta.normalized!==kb||Ta.offset!==va||Ta.stride!==Va)Q.bindBuffer(34962,ic.buffer),Q.vertexAttribPointer(Ab,
Hc,bb,kb,Va,va),Ta.type=bb,Ta.size=Hc,Ta.buffer=ic,Ta.normalized=kb,Ta.offset=va,Ta.stride=Va;Ta.divisor!==jb&&(T.vertexAttribDivisorANGLE(Ab,jb),Ta.divisor=jb)}else if(Ta.buffer&&(Q.disableVertexAttribArray(Ab),Ta.buffer=null),Ta.x!==eb||Ta.y!==Na||Ta.z!==Bb||Ta.w!==Ba)Q.vertexAttrib4f(Ab,eb,Na,Bb,Ba),Ta.x=eb,Ta.y=Na,Ta.z=Bb,Ta.w=Ba;Jb=ia.location;Lb=Cb[Jb];Lb.buffer||Q.enableVertexAttribArray(Jb);if(5126!==Lb.type||1!==Lb.size||Lb.buffer!==l||!1!==Lb.normalized||0!==Lb.offset||8!==Lb.stride)Q.bindBuffer(34962,
l.buffer),Q.vertexAttribPointer(Jb,1,5126,!1,8,0),Lb.type=5126,Lb.size=1,Lb.buffer=l,Lb.normalized=!1,Lb.offset=0,Lb.stride=8;0!==Lb.divisor&&(T.vertexAttribDivisorANGLE(Jb,0),Lb.divisor=0);Ub=J.location;wa=Cb[Ub];wa.buffer||Q.enableVertexAttribArray(Ub);if(5126!==wa.type||1!==wa.size||wa.buffer!==m||!1!==wa.normalized||4!==wa.offset||8!==wa.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Ub,1,5126,!1,8,4),wa.type=5126,wa.size=1,wa.buffer=m,wa.normalized=!1,wa.offset=4,wa.stride=8;0!==wa.divisor&&
(T.vertexAttribDivisorANGLE(Ub,0),wa.divisor=0);Jd=b.scale;Q.uniform2f(K.location,Jd[0],Jd[1]);Ma=b.scaleFract;Q.uniform2f(ka.location,Ma[0],Ma[1]);Pb=b.translate;Q.uniform2f(ma.location,Pb[0],Pb[1]);fb=b.translateFract;Q.uniform2f(na.location,fb[0],fb[1]);Q.uniform1f(aa.location,b.thickness);Q.uniform1f(z.location,b.depth);ib=f.call(this,Oa,b,0);Q.uniform4f(Qa.location,ib[0],ib[1],ib[2],ib[3]);Q.uniform1f(S.location,b.dashLength);Q.uniform1f(V.location,b.opacity);(xa=b.dashTexture)&&"framebuffer"===
xa._reglType&&(xa=xa.color[0]);ec=xa._texture;Q.uniform1i(R.location,ec.bind());(Fa=P.elements)?Q.bindBuffer(34963,Fa.buffer.buffer):oa.currentVAO&&(Fa=O.getElements(oa.currentVAO.elements))&&Q.bindBuffer(34963,Fa.buffer.buffer);qb=b.count;0<qb?Fa?T.drawElementsInstancedANGLE(5,4,Fa.type,0<<(Fa.type-5121>>1),qb):T.drawArraysInstancedANGLE(5,0,4,qb):0>qb&&(Fa?Q.drawElements(5,4,Fa.type,0<<(Fa.type-5121>>1)):Q.drawArrays(5,0,4));X.dirty=!0;oa.setVAO(null);Oa.viewportWidth=t;Oa.viewportHeight=q;E&&(c.cpuTime+=
performance.now()-ba);da&&ea.destroyStream(Ga);vd&&ea.destroyStream(ad);Id&&ea.destroyStream(rd);Xb&&ea.destroyStream(ye);Yc&&ea.destroyStream(ic);ec.unbind()},scope:function(a,f,d){var v,h,y,D,u,G,W,A,H,r,z,la,N,J,L,ta,S,R,O,K,Q,U,Y,ha,V,ia,ja,aa,ga,oa,pc,ma,Ha,pa,ra,td,Oc,Ic,qc,gb,zc,Hb,nc,Xa,ka,ac,lc,tb,cd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,cc,Ib,Ua,Vb,cb,Da,Xb,na,jc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Qa,Yb,nb,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Nc,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,
tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,zb,sc,Cb,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe;v=a.viewport;h=v.x|0;y=v.y|0;D="width"in v?v.width|0:Oa.framebufferWidth-h;u="height"in v?v.height|0:Oa.framebufferHeight-y;G=Oa.viewportWidth;Oa.viewportWidth=D;W=Oa.viewportHeight;
Oa.viewportHeight=u;A=E[0];E[0]=h;H=E[1];E[1]=y;r=E[2];E[2]=D;z=E[3];E[3]=u;la=da[0];da[0]=0;N=da[1];da[1]=0;J=da[2];da[2]=0;L=da[3];da[3]=0;ta=ab.blend_enable;ab.blend_enable=!0;S=Ga[0];Ga[0]=32774;R=Ga[1];Ga[1]=32774;O=La[0];La[0]=770;K=La[1];La[1]=771;Q=La[2];La[2]=773;U=La[3];La[3]=1;Y=k.call(this,Oa,a,d);ha=ab.depth_enable;ab.depth_enable=Y;V=a.viewport;ia=V.x|0;ja=V.y|0;aa="width"in V?V.width|0:Oa.framebufferWidth-ia;ga="height"in V?V.height|0:Oa.framebufferHeight-ja;oa=ba[0];ba[0]=ia;pc=ba[1];
ba[1]=ja;ma=ba[2];ba[2]=aa;Ha=ba[3];ba[3]=ga;pa=ab.scissor_enable;ab.scissor_enable=!0;ra=ab.stencil_enable;ab.stencil_enable=!1;if(td=X.profile)Oc=performance.now(),c.count++;Ic=P.offset;P.offset=0;qc=P.count;P.count=4;gb=a.count;zc=P.instances;P.instances=gb;Hb=P.primitive;P.primitive=5;nc=a.dashLength;Xa=B[23];B[23]=nc;ka=a.dashTexture;ac=B[24];B[24]=ka;lc=a.depth;tb=B[22];B[22]=lc;cd=a.id;Fc=B[31];B[31]=cd;dc=a.miterLimit;Cc=B[32];B[32]=dc;Xc=b.call(this,Oa,a,d);Zb=B[33];B[33]=Xc;Gc=a.opacity;
Ya=B[10];B[10]=Gc;Ea=Oa.pixelRatio;cc=B[34];B[34]=Ea;Ib=a.scale;Ua=B[6];B[6]=Ib;Vb=a.scaleFract;cb=B[7];B[7]=Vb;Da=a.thickness;Xb=B[21];B[21]=Da;na=a.translate;jc=B[8];B[8]=na;Sb=a.translateFract;x=B[9];B[9]=Sb;Tb=q.call(this,Oa,a,d);Pa=B[3];B[3]=Tb;Z.buffer=a.positionBuffer;ob=!1;ub=null;hb=0;Ra=!1;Yb=Qa=0;nb=1;db=0;oc=5126;kb=jb=ic=Yc=0;Ob(Z)?(ob=!0,ub=ea.createStream(34962,Z),oc=ub.dtype):(ub=ea.getBuffer(Z))?oc=ub.dtype:"constant"in Z?(nb=2,"number"===typeof Z.constant?(ic=Z.constant,jb=kb=Yc=
0):(ic=0<Z.constant.length?Z.constant[0]:0,jb=1<Z.constant.length?Z.constant[1]:0,kb=2<Z.constant.length?Z.constant[2]:0,Yc=3<Z.constant.length?Z.constant[3]:0)):(ub=Ob(Z.buffer)?ea.createStream(34962,Z.buffer):ea.getBuffer(Z.buffer),oc="type"in Z?ua[Z.type]:ub.dtype,Ra=!!Z.normalized,Yb=Z.size|0,Qa=Z.offset|0,db=Z.stride|0,hb=Z.divisor|0);va=I.buffer;I.buffer=ub;pb=I.divisor;I.divisor=hb;ya=I.normalized;I.normalized=Ra;Va=I.offset;I.offset=Qa;bb=I.size;I.size=Yb;Ba=I.state;I.state=nb;eb=I.stride;
I.stride=db;Na=I.type;I.type=oc;Bb=I.w;I.w=Yc;Ab=I.x;I.x=ic;Ta=I.y;I.y=jb;Hc=I.z;I.z=kb;fa.buffer=a.positionFractBuffer;Jb=!1;Lb=null;Ub=0;wa=!1;Ma=Nc=0;Pb=1;fb=0;ib=5126;qb=Fa=ec=xa=0;Ob(fa)?(Jb=!0,Lb=ea.createStream(34962,fa),ib=Lb.dtype):(Lb=ea.getBuffer(fa))?ib=Lb.dtype:"constant"in fa?(Pb=2,"number"===typeof fa.constant?(ec=fa.constant,Fa=qb=xa=0):(ec=0<fa.constant.length?fa.constant[0]:0,Fa=1<fa.constant.length?fa.constant[1]:0,qb=2<fa.constant.length?fa.constant[2]:0,xa=3<fa.constant.length?
fa.constant[3]:0)):(Lb=Ob(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),ib="type"in fa?ua[fa.type]:Lb.dtype,wa=!!fa.normalized,Ma=fa.size|0,Nc=fa.offset|0,fb=fa.stride|0,Ub=fa.divisor|0);rb=w.buffer;w.buffer=Lb;Za=w.divisor;w.divisor=Ub;$a=w.normalized;w.normalized=wa;rc=w.offset;w.offset=Nc;dd=w.size;w.size=Ma;tc=w.state;w.state=Pb;Wa=w.stride;w.stride=fb;Mb=w.type;w.type=ib;Zc=w.w;w.w=xa;Ia=w.x;w.x=ec;vc=w.y;w.y=Fa;Sa=w.z;w.z=qb;sa.buffer=a.positionBuffer;Ca=!1;lb=null;vb=
0;Db=!1;uc=sb=0;wb=1;zb=0;sc=5126;fd=ed=Jc=Cb=0;Ob(sa)?(Ca=!0,lb=ea.createStream(34962,sa),sc=lb.dtype):(lb=ea.getBuffer(sa))?sc=lb.dtype:"constant"in sa?(wb=2,"number"===typeof sa.constant?(Jc=sa.constant,ed=fd=Cb=0):(Jc=0<sa.constant.length?sa.constant[0]:0,ed=1<sa.constant.length?sa.constant[1]:0,fd=2<sa.constant.length?sa.constant[2]:0,Cb=3<sa.constant.length?sa.constant[3]:0)):(lb=Ob(sa.buffer)?ea.createStream(34962,sa.buffer):ea.getBuffer(sa.buffer),sc="type"in sa?ua[sa.type]:lb.dtype,Db=!!sa.normalized,
uc=sa.size|0,sb=sa.offset|0,zb=sa.stride|0,vb=sa.divisor|0);Wb=e.buffer;e.buffer=lb;bc=e.divisor;e.divisor=vb;Qb=e.normalized;e.normalized=Db;Ja=e.offset;e.offset=sb;$b=e.size;e.size=uc;mb=e.state;e.state=wb;xb=e.stride;e.stride=zb;Nb=e.type;e.type=sc;Rb=e.w;e.w=Cb;fc=e.x;e.x=Jc;hc=e.y;e.y=ed;Ze=e.z;e.z=fd;M.buffer=a.positionFractBuffer;xc=!1;yc=null;Ac=0;Kc=!1;Rc=$c=0;Lc=1;Kb=0;Eb=5126;gc=Sc=Ec=Mc=0;Ob(M)?(xc=!0,yc=ea.createStream(34962,M),Eb=yc.dtype):(yc=ea.getBuffer(M))?Eb=yc.dtype:"constant"in
M?(Lc=2,"number"===typeof M.constant?(Ec=M.constant,Sc=gc=Mc=0):(Ec=0<M.constant.length?M.constant[0]:0,Sc=1<M.constant.length?M.constant[1]:0,gc=2<M.constant.length?M.constant[2]:0,Mc=3<M.constant.length?M.constant[3]:0)):(yc=Ob(M.buffer)?ea.createStream(34962,M.buffer):ea.getBuffer(M.buffer),Eb="type"in M?ua[M.type]:yc.dtype,Kc=!!M.normalized,Rc=M.size|0,$c=M.offset|0,Kb=M.stride|0,Ac=M.divisor|0);Vc=g.buffer;g.buffer=yc;gd=g.divisor;g.divisor=Ac;kd=g.normalized;g.normalized=Kc;md=g.offset;g.offset=
$c;Wc=g.size;g.size=Rc;bf=g.state;g.state=Lc;Zd=g.stride;g.stride=Kb;ke=g.type;g.type=Eb;se=g.w;g.w=Mc;me=g.x;g.x=Ec;Md=g.y;g.y=Sc;Kd=g.z;g.z=gc;F.buffer=a.colorBuffer;id=!1;Bc=null;od=0;ld=!1;pd=bd=0;Gd=1;Hd=0;te=5126;ee=ne=Ae=ze=0;Ob(F)?(id=!0,Bc=ea.createStream(34962,F),te=Bc.dtype):(Bc=ea.getBuffer(F))?te=Bc.dtype:"constant"in F?(Gd=2,"number"===typeof F.constant?(Ae=F.constant,ne=ee=ze=0):(Ae=0<F.constant.length?F.constant[0]:0,ne=1<F.constant.length?F.constant[1]:0,ee=2<F.constant.length?F.constant[2]:
0,ze=3<F.constant.length?F.constant[3]:0)):(Bc=Ob(F.buffer)?ea.createStream(34962,F.buffer):ea.getBuffer(F.buffer),te="type"in F?ua[F.type]:Bc.dtype,ld=!!F.normalized,pd=F.size|0,bd=F.offset|0,Hd=F.stride|0,od=F.divisor|0);de=p.buffer;p.buffer=Bc;pe=p.divisor;p.divisor=od;be=p.normalized;p.normalized=ld;he=p.offset;p.offset=bd;wc=p.size;p.size=pd;Uc=p.state;p.state=Gd;qe=p.stride;p.stride=Hd;le=p.type;p.type=te;Ld=p.w;p.w=ze;Pd=p.x;p.x=Ae;Qd=p.y;p.y=ne;Rd=p.z;p.z=ee;ie=n.buffer;n.buffer=l;vf=n.divisor;
n.divisor=0;Ce=n.normalized;n.normalized=!1;oe=n.offset;n.offset=0;Re=n.size;n.size=0;Se=n.state;n.state=1;Ne=n.stride;n.stride=8;re=n.type;n.type=5126;Fe=n.w;n.w=0;He=n.x;n.x=0;Ie=n.y;n.y=0;Je=n.z;n.z=0;Ge=t.buffer;t.buffer=m;Nd=t.divisor;t.divisor=0;Ud=t.normalized;t.normalized=!1;$d=t.offset;t.offset=4;ce=t.size;t.size=0;Ke=t.state;t.state=1;Cd=t.stride;t.stride=8;Sd=t.type;t.type=5126;De=t.w;t.w=0;Le=t.x;t.x=0;cf=t.y;t.y=0;af=t.z;t.z=0;Te=T.vert;T.vert=20;Oe=T.frag;T.frag=19;X.dirty=!0;f(Oa,a,
d);Oa.viewportWidth=G;Oa.viewportHeight=W;E[0]=A;E[1]=H;E[2]=r;E[3]=z;da[0]=la;da[1]=N;da[2]=J;da[3]=L;ab.blend_enable=ta;Ga[0]=S;Ga[1]=R;La[0]=O;La[1]=K;La[2]=Q;La[3]=U;ab.depth_enable=ha;ba[0]=oa;ba[1]=pc;ba[2]=ma;ba[3]=Ha;ab.scissor_enable=pa;ab.stencil_enable=ra;td&&(c.cpuTime+=performance.now()-Oc);P.offset=Ic;P.count=qc;P.instances=zc;P.primitive=Hb;B[23]=Xa;B[24]=ac;B[22]=tb;B[31]=Fc;B[32]=Cc;B[33]=Zb;B[10]=Ya;B[34]=cc;B[6]=Ua;B[7]=cb;B[21]=Xb;B[8]=jc;B[9]=x;B[3]=Pa;ob&&ea.destroyStream(ub);
I.buffer=va;I.divisor=pb;I.normalized=ya;I.offset=Va;I.size=bb;I.state=Ba;I.stride=eb;I.type=Na;I.w=Bb;I.x=Ab;I.y=Ta;I.z=Hc;Jb&&ea.destroyStream(Lb);w.buffer=rb;w.divisor=Za;w.normalized=$a;w.offset=rc;w.size=dd;w.state=tc;w.stride=Wa;w.type=Mb;w.w=Zc;w.x=Ia;w.y=vc;w.z=Sa;Ca&&ea.destroyStream(lb);e.buffer=Wb;e.divisor=bc;e.normalized=Qb;e.offset=Ja;e.size=$b;e.state=mb;e.stride=xb;e.type=Nb;e.w=Rb;e.x=fc;e.y=hc;e.z=Ze;xc&&ea.destroyStream(yc);g.buffer=Vc;g.divisor=gd;g.normalized=kd;g.offset=md;g.size=
Wc;g.state=bf;g.stride=Zd;g.type=ke;g.w=se;g.x=me;g.y=Md;g.z=Kd;id&&ea.destroyStream(Bc);p.buffer=de;p.divisor=pe;p.normalized=be;p.offset=he;p.size=wc;p.state=Uc;p.stride=qe;p.type=le;p.w=Ld;p.x=Pd;p.y=Qd;p.z=Rd;n.buffer=ie;n.divisor=vf;n.normalized=Ce;n.offset=oe;n.size=Re;n.state=Se;n.stride=Ne;n.type=re;n.w=Fe;n.x=He;n.y=Ie;n.z=Je;t.buffer=Ge;t.divisor=Nd;t.normalized=Ud;t.offset=$d;t.size=ce;t.state=Ke;t.stride=Cd;t.type=Sd;t.w=De;t.x=Le;t.y=cf;t.z=af;T.vert=Te;T.frag=Oe;X.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,
c,d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,H,r,ta,S,R,z,ia,J,V,K,ka,aa,ma,na,Qa,Cb,ea,Oa,X){var P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra,cc,pc,jc,td,zc,ba,N,ha,Ha,tb,cd,Nc,L,E,ja,ua,Z,fa,sa,M,F,ca,za,Aa,Ka,C;P=a.attributes;O=a.buffer;U=a.context;pa=a.current;Q=a.draw;Ob=a.elements;ab=a.extensions;T=a.framebuffer;B=a.gl;oa=a.isBufferArgs;da=a.next;Da=a.shader;Ga=a.uniforms;zb=a.vao;La=da.blend_color;Y=pa.blend_color;nb=da.blend_equation;ga=pa.blend_equation;ra=da.blend_func;cc=pa.blend_func;
pc=da.colorMask;jc=pa.colorMask;td=da.depth_range;zc=pa.depth_range;ba=da.polygonOffset_offset;N=pa.polygonOffset_offset;ha=da.sample_coverage;Ha=pa.sample_coverage;tb=da.scissor_box;cd=pa.scissor_box;Nc=da.stencil_func;L=pa.stencil_func;E=da.stencil_opBack;ja=pa.stencil_opBack;ua=da.stencil_opFront;Z=pa.stencil_opFront;fa=da.viewport;sa=pa.viewport;M={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};F={divisor:1,offset:0,stride:4};ca={divisor:1,offset:8,
stride:8};za={divisor:1,offset:4,stride:4};Aa={divisor:1,offset:16,stride:8};Ka={divisor:1,offset:24,stride:8};C={divisor:1,offset:0,stride:8};return{batch:function(b,e){var g,a,f,n,k,p;g=T.next;g!==T.cur&&(g?B.bindFramebuffer(36160,g.framebuffer):B.bindFramebuffer(36160,null),T.cur=g);if(pa.dirty){var t,q,d,v,h,w,D,I,G,A,fa,ra,Ga,tb,Da,Vd,Wd,La,nb,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb;t=da.dither;t!==pa.dither&&(t?B.enable(3024):B.disable(3024),pa.dither=t);q=da.depth_func;q!==pa.depth_func&&(B.depthFunc(q),
pa.depth_func=q);d=td[0];v=td[1];if(d!==zc[0]||v!==zc[1])B.depthRange(d,v),zc[0]=d,zc[1]=v;h=da.depth_mask;h!==pa.depth_mask&&(B.depthMask(h),pa.depth_mask=h);w=pc[0];D=pc[1];I=pc[2];G=pc[3];if(w!==jc[0]||D!==jc[1]||I!==jc[2]||G!==jc[3])B.colorMask(w,D,I,G),jc[0]=w,jc[1]=D,jc[2]=I,jc[3]=G;A=da.frontFace;A!==pa.frontFace&&(B.frontFace(A),pa.frontFace=A);fa=da.lineWidth;fa!==pa.lineWidth&&(B.lineWidth(fa),pa.lineWidth=fa);ra=da.polygonOffset_enable;ra!==pa.polygonOffset_enable&&(ra?B.enable(32823):
B.disable(32823),pa.polygonOffset_enable=ra);Ga=ba[0];tb=ba[1];if(Ga!==N[0]||tb!==N[1])B.polygonOffset(Ga,tb),N[0]=Ga,N[1]=tb;Da=da.sample_alpha;Da!==pa.sample_alpha&&(Da?B.enable(32926):B.disable(32926),pa.sample_alpha=Da);Vd=da.sample_enable;Vd!==pa.sample_enable&&(Vd?B.enable(32928):B.disable(32928),pa.sample_enable=Vd);Wd=ha[0];La=ha[1];if(Wd!==Ha[0]||La!==Ha[1])B.sampleCoverage(Wd,La),Ha[0]=Wd,Ha[1]=La;nb=da.stencil_mask;nb!==pa.stencil_mask&&(B.stencilMask(nb),pa.stencil_mask=nb);qd=Nc[0];nd=
Nc[1];vd=Nc[2];if(qd!==L[0]||nd!==L[1]||vd!==L[2])B.stencilFunc(qd,nd,vd),L[0]=qd,L[1]=nd,L[2]=vd;ad=ua[0];sd=ua[1];Tc=ua[2];Ed=ua[3];if(ad!==Z[0]||sd!==Z[1]||Tc!==Z[2]||Ed!==Z[3])B.stencilOpSeparate(ad,sd,Tc,Ed),Z[0]=ad,Z[1]=sd,Z[2]=Tc,Z[3]=Ed;Oc=E[0];Ic=E[1];qc=E[2];gb=E[3];if(Oc!==ja[0]||Ic!==ja[1]||qc!==ja[2]||gb!==ja[3])B.stencilOpSeparate(Oc,Ic,qc,gb),ja[0]=Oc,ja[1]=Ic,ja[2]=qc,ja[3]=gb}B.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;B.enable(3042);pa.blend_enable=!0;B.blendEquationSeparate(32774,
32774);ga[0]=32774;ga[1]=32774;B.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;cc[3]=1;B.enable(2884);pa.cull_enable=!0;B.cullFace(1029);pa.cull_face=1029;B.enable(3089);pa.scissor_enable=!0;B.disable(2960);pa.stencil_enable=!1;if(a=pa.profile)f=performance.now(),c.count+=e;B.useProgram(y.program);n=ab.angle_instanced_arrays;var hd,Hb,nc,Xa,Qc;zb.setVAO(null);hd=V.location;Hb=P[hd];Hb.buffer||B.enableVertexAttribArray(hd);if(5126!==Hb.type||1!==Hb.size||Hb.buffer!==l||!1!==Hb.normalized||
0!==Hb.offset||8!==Hb.stride)B.bindBuffer(34962,l.buffer),B.vertexAttribPointer(hd,1,5126,!1,8,0),Hb.type=5126,Hb.size=1,Hb.buffer=l,Hb.normalized=!1,Hb.offset=0,Hb.stride=8;0!==Hb.divisor&&(n.vertexAttribDivisorANGLE(hd,0),Hb.divisor=0);nc=K.location;Xa=P[nc];Xa.buffer||B.enableVertexAttribArray(nc);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==m||!1!==Xa.normalized||4!==Xa.offset||8!==Xa.stride)B.bindBuffer(34962,m.buffer),B.vertexAttribPointer(nc,1,5126,!1,8,4),Xa.type=5126,Xa.size=1,Xa.buffer=m,
Xa.normalized=!1,Xa.offset=4,Xa.stride=8;0!==Xa.divisor&&(n.vertexAttribDivisorANGLE(nc,0),Xa.divisor=0);(Qc=Q.elements)?B.bindBuffer(34963,Qc.buffer.buffer):zb.currentVAO&&(Qc=Ob.getElements(zb.currentVAO.elements))&&B.bindBuffer(34963,Qc.buffer.buffer);for(k=0;k<e;++k){p=b[k];var ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,ye,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,
vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc;ac=p.viewport;lc=ac.x|0;Id=ac.y|0;rd="width"in ac?ac.width|0:U.framebufferWidth-lc;Fc="height"in ac?ac.height|0:U.framebufferHeight-Id;dc=U.viewportWidth;U.viewportWidth=rd;Cc=U.viewportHeight;U.viewportHeight=Fc;B.viewport(lc,Id,rd,Fc);sa[0]=lc;sa[1]=Id;sa[2]=rd;sa[3]=Fc;(Xc=W.call(this,U,
p,k))?B.enable(2929):B.disable(2929);pa.depth_enable=Xc;Zb=p.viewport;Gc=Zb.x|0;Ya=Zb.y|0;Ea="width"in Zb?Zb.width|0:U.framebufferWidth-Gc;ud="height"in Zb?Zb.height|0:U.framebufferHeight-Ya;B.scissor(Gc,Ya,Ea,ud);cd[0]=Gc;cd[1]=Ya;cd[2]=Ea;cd[3]=ud;ca.buffer=p.positionBuffer;Ib=!1;Ua=null;Vb=0;cb=!1;Xb=Dc=0;ye=1;kc=0;Sb=5126;ob=Pa=Tb=x=0;oa(ca)?(Ib=!0,Ua=O.createStream(34962,ca),Sb=Ua.dtype):(Ua=O.getBuffer(ca))?Sb=Ua.dtype:"constant"in ca?(ye=2,"number"===typeof ca.constant?(Tb=ca.constant,Pa=ob=
x=0):(Tb=0<ca.constant.length?ca.constant[0]:0,Pa=1<ca.constant.length?ca.constant[1]:0,ob=2<ca.constant.length?ca.constant[2]:0,x=3<ca.constant.length?ca.constant[3]:0)):(Ua=oa(ca.buffer)?O.createStream(34962,ca.buffer):O.getBuffer(ca.buffer),Sb="type"in ca?M[ca.type]:Ua.dtype,cb=!!ca.normalized,Xb=ca.size|0,Dc=ca.offset|0,kc=ca.stride|0,Vb=ca.divisor|0);ub=ta.location;hb=P[ub];if(1===ye){hb.buffer||B.enableVertexAttribArray(ub);Ra=Xb||2;if(hb.type!==Sb||hb.size!==Ra||hb.buffer!==Ua||hb.normalized!==
cb||hb.offset!==Dc||hb.stride!==kc)B.bindBuffer(34962,Ua.buffer),B.vertexAttribPointer(ub,Ra,Sb,cb,kc,Dc),hb.type=Sb,hb.size=Ra,hb.buffer=Ua,hb.normalized=cb,hb.offset=Dc,hb.stride=kc;hb.divisor!==Vb&&(n.vertexAttribDivisorANGLE(ub,Vb),hb.divisor=Vb)}else if(hb.buffer&&(B.disableVertexAttribArray(ub),hb.buffer=null),hb.x!==Tb||hb.y!==Pa||hb.z!==ob||hb.w!==x)B.vertexAttrib4f(ub,Tb,Pa,ob,x),hb.x=Tb,hb.y=Pa,hb.z=ob,hb.w=x;Aa.buffer=p.positionBuffer;Pc=!1;Yb=null;jd=0;db=!1;Yc=oc=0;ic=1;jb=0;kb=5126;
Va=ya=pb=va=0;oa(Aa)?(Pc=!0,Yb=O.createStream(34962,Aa),kb=Yb.dtype):(Yb=O.getBuffer(Aa))?kb=Yb.dtype:"constant"in Aa?(ic=2,"number"===typeof Aa.constant?(pb=Aa.constant,ya=Va=va=0):(pb=0<Aa.constant.length?Aa.constant[0]:0,ya=1<Aa.constant.length?Aa.constant[1]:0,Va=2<Aa.constant.length?Aa.constant[2]:0,va=3<Aa.constant.length?Aa.constant[3]:0)):(Yb=oa(Aa.buffer)?O.createStream(34962,Aa.buffer):O.getBuffer(Aa.buffer),kb="type"in Aa?M[Aa.type]:Yb.dtype,db=!!Aa.normalized,Yc=Aa.size|0,oc=Aa.offset|
0,jb=Aa.stride|0,jd=Aa.divisor|0);bb=R.location;Ba=P[bb];if(1===ic){Ba.buffer||B.enableVertexAttribArray(bb);eb=Yc||2;if(Ba.type!==kb||Ba.size!==eb||Ba.buffer!==Yb||Ba.normalized!==db||Ba.offset!==oc||Ba.stride!==jb)B.bindBuffer(34962,Yb.buffer),B.vertexAttribPointer(bb,eb,kb,db,jb,oc),Ba.type=kb,Ba.size=eb,Ba.buffer=Yb,Ba.normalized=db,Ba.offset=oc,Ba.stride=jb;Ba.divisor!==jd&&(n.vertexAttribDivisorANGLE(bb,jd),Ba.divisor=jd)}else if(Ba.buffer&&(B.disableVertexAttribArray(bb),Ba.buffer=null),Ba.x!==
pb||Ba.y!==ya||Ba.z!==Va||Ba.w!==va)B.vertexAttrib4f(bb,pb,ya,Va,va),Ba.x=pb,Ba.y=ya,Ba.z=Va,Ba.w=va;Ka.buffer=p.positionBuffer;Na=!1;Bb=null;Ab=0;Ta=!1;Jb=Hc=0;Lb=1;Ub=0;wa=5126;fb=Pb=Ma=Jd=0;oa(Ka)?(Na=!0,Bb=O.createStream(34962,Ka),wa=Bb.dtype):(Bb=O.getBuffer(Ka))?wa=Bb.dtype:"constant"in Ka?(Lb=2,"number"===typeof Ka.constant?(Ma=Ka.constant,Pb=fb=Jd=0):(Ma=0<Ka.constant.length?Ka.constant[0]:0,Pb=1<Ka.constant.length?Ka.constant[1]:0,fb=2<Ka.constant.length?Ka.constant[2]:0,Jd=3<Ka.constant.length?
Ka.constant[3]:0)):(Bb=oa(Ka.buffer)?O.createStream(34962,Ka.buffer):O.getBuffer(Ka.buffer),wa="type"in Ka?M[Ka.type]:Bb.dtype,Ta=!!Ka.normalized,Jb=Ka.size|0,Hc=Ka.offset|0,Ub=Ka.stride|0,Ab=Ka.divisor|0);ib=ma.location;xa=P[ib];if(1===Lb){xa.buffer||B.enableVertexAttribArray(ib);ec=Jb||2;if(xa.type!==wa||xa.size!==ec||xa.buffer!==Bb||xa.normalized!==Ta||xa.offset!==Hc||xa.stride!==Ub)B.bindBuffer(34962,Bb.buffer),B.vertexAttribPointer(ib,ec,wa,Ta,Ub,Hc),xa.type=wa,xa.size=ec,xa.buffer=Bb,xa.normalized=
Ta,xa.offset=Hc,xa.stride=Ub;xa.divisor!==Ab&&(n.vertexAttribDivisorANGLE(ib,Ab),xa.divisor=Ab)}else if(xa.buffer&&(B.disableVertexAttribArray(ib),xa.buffer=null),xa.x!==Ma||xa.y!==Pb||xa.z!==fb||xa.w!==Jd)B.vertexAttrib4f(ib,Ma,Pb,fb,Jd),xa.x=Ma,xa.y=Pb,xa.z=fb,xa.w=Jd;C.buffer=p.positionBuffer;Fa=!1;qb=null;rb=0;Za=!1;rc=$a=0;dd=1;tc=0;Wa=5126;vc=Ia=Zc=Mb=0;oa(C)?(Fa=!0,qb=O.createStream(34962,C),Wa=qb.dtype):(qb=O.getBuffer(C))?Wa=qb.dtype:"constant"in C?(dd=2,"number"===typeof C.constant?(Zc=
C.constant,Ia=vc=Mb=0):(Zc=0<C.constant.length?C.constant[0]:0,Ia=1<C.constant.length?C.constant[1]:0,vc=2<C.constant.length?C.constant[2]:0,Mb=3<C.constant.length?C.constant[3]:0)):(qb=oa(C.buffer)?O.createStream(34962,C.buffer):O.getBuffer(C.buffer),Wa="type"in C?M[C.type]:qb.dtype,Za=!!C.normalized,rc=C.size|0,$a=C.offset|0,tc=C.stride|0,rb=C.divisor|0);Sa=Qa.location;Ca=P[Sa];if(1===dd){Ca.buffer||B.enableVertexAttribArray(Sa);lb=rc||2;if(Ca.type!==Wa||Ca.size!==lb||Ca.buffer!==qb||Ca.normalized!==
Za||Ca.offset!==$a||Ca.stride!==tc)B.bindBuffer(34962,qb.buffer),B.vertexAttribPointer(Sa,lb,Wa,Za,tc,$a),Ca.type=Wa,Ca.size=lb,Ca.buffer=qb,Ca.normalized=Za,Ca.offset=$a,Ca.stride=tc;Ca.divisor!==rb&&(n.vertexAttribDivisorANGLE(Sa,rb),Ca.divisor=rb)}else if(Ca.buffer&&(B.disableVertexAttribArray(Sa),Ca.buffer=null),Ca.x!==Zc||Ca.y!==Ia||Ca.z!==vc||Ca.w!==Mb)B.vertexAttrib4f(Sa,Zc,Ia,vc,Mb),Ca.x=Zc,Ca.y=Ia,Ca.z=vc,Ca.w=Mb;F.buffer=p.colorBuffer;vb=!1;Db=null;sb=0;uc=!1;wd=wb=0;sc=1;Fd=0;Jc=5126;bc=
Wb=fd=ed=0;oa(F)?(vb=!0,Db=O.createStream(34962,F),Jc=Db.dtype):(Db=O.getBuffer(F))?Jc=Db.dtype:"constant"in F?(sc=2,"number"===typeof F.constant?(fd=F.constant,Wb=bc=ed=0):(fd=0<F.constant.length?F.constant[0]:0,Wb=1<F.constant.length?F.constant[1]:0,bc=2<F.constant.length?F.constant[2]:0,ed=3<F.constant.length?F.constant[3]:0)):(Db=oa(F.buffer)?O.createStream(34962,F.buffer):O.getBuffer(F.buffer),Jc="type"in F?M[F.type]:Db.dtype,uc=!!F.normalized,wd=F.size|0,wb=F.offset|0,Fd=F.stride|0,sb=F.divisor|
0);Qb=r.location;Ja=P[Qb];if(1===sc){Ja.buffer||B.enableVertexAttribArray(Qb);$b=wd||4;if(Ja.type!==Jc||Ja.size!==$b||Ja.buffer!==Db||Ja.normalized!==uc||Ja.offset!==wb||Ja.stride!==Fd)B.bindBuffer(34962,Db.buffer),B.vertexAttribPointer(Qb,$b,Jc,uc,Fd,wb),Ja.type=Jc,Ja.size=$b,Ja.buffer=Db,Ja.normalized=uc,Ja.offset=wb,Ja.stride=Fd;Ja.divisor!==sb&&(n.vertexAttribDivisorANGLE(Qb,sb),Ja.divisor=sb)}else if(Ja.buffer&&(B.disableVertexAttribArray(Qb),Ja.buffer=null),Ja.x!==fd||Ja.y!==Wb||Ja.z!==bc||
Ja.w!==ed)B.vertexAttrib4f(Qb,fd,Wb,bc,ed),Ja.x=fd,Ja.y=Wb,Ja.z=bc,Ja.w=ed;za.buffer=p.colorBuffer;mb=!1;xb=null;Nb=0;Rb=!1;hc=fc=0;Ze=1;xc=0;yc=5126;Rc=$c=Kc=Ac=0;oa(za)?(mb=!0,xb=O.createStream(34962,za),yc=xb.dtype):(xb=O.getBuffer(za))?yc=xb.dtype:"constant"in za?(Ze=2,"number"===typeof za.constant?(Kc=za.constant,$c=Rc=Ac=0):(Kc=0<za.constant.length?za.constant[0]:0,$c=1<za.constant.length?za.constant[1]:0,Rc=2<za.constant.length?za.constant[2]:0,Ac=3<za.constant.length?za.constant[3]:0)):(xb=
oa(za.buffer)?O.createStream(34962,za.buffer):O.getBuffer(za.buffer),yc="type"in za?M[za.type]:xb.dtype,Rb=!!za.normalized,hc=za.size|0,fc=za.offset|0,xc=za.stride|0,Nb=za.divisor|0);Lc=S.location;Kb=P[Lc];if(1===Ze){Kb.buffer||B.enableVertexAttribArray(Lc);Eb=hc||4;if(Kb.type!==yc||Kb.size!==Eb||Kb.buffer!==xb||Kb.normalized!==Rb||Kb.offset!==fc||Kb.stride!==xc)B.bindBuffer(34962,xb.buffer),B.vertexAttribPointer(Lc,Eb,yc,Rb,xc,fc),Kb.type=yc,Kb.size=Eb,Kb.buffer=xb,Kb.normalized=Rb,Kb.offset=fc,
Kb.stride=xc;Kb.divisor!==Nb&&(n.vertexAttribDivisorANGLE(Lc,Nb),Kb.divisor=Nb)}else if(Kb.buffer&&(B.disableVertexAttribArray(Lc),Kb.buffer=null),Kb.x!==Kc||Kb.y!==$c||Kb.z!==Rc||Kb.w!==Ac)B.vertexAttrib4f(Lc,Kc,$c,Rc,Ac),Kb.x=Kc,Kb.y=$c,Kb.z=Rc,Kb.w=Ac;Mc=p.scale;Ec=Mc[0];gc=Mc[1];k&&Sc===Ec&&Vc===gc||(Sc=Ec,Vc=gc,B.uniform2f(Cb.location,Ec,gc));gd=p.translate;kd=gd[0];Wc=gd[1];k&&md===kd&&bf===Wc||(md=kd,bf=Wc,B.uniform2f(Oa.location,kd,Wc));Zd=p.thickness;k&&ke===Zd||(ke=Zd,B.uniform1f(ea.location,
Zd));se=p.depth;k&&me===se||(me=se,B.uniform1f(J.location,se));Md=u.call(this,U,p,k);Kd=Md[0];Bc=Md[1];ld=Md[2];pd=Md[3];k&&id===Kd&&od===Bc&&bd===ld&&Gd===pd||(id=Kd,od=Bc,bd=ld,Gd=pd,B.uniform4f(X.location,Kd,Bc,ld,pd));Hd=p.miterLimit;k&&te===Hd||(te=Hd,B.uniform1f(ka.location,Hd));ze=H.call(this,U,p,k);k&&Ae===ze||(Ae=ze,B.uniform1f(aa.location,ze));ne=p.dashLength;k&&ee===ne||(ee=ne,B.uniform1f(z.location,ne));de=p.opacity;k&&pe===de||(pe=de,B.uniform1f(na.location,de));(be=p.dashTexture)&&"framebuffer"===
be._reglType&&(be=be.color[0]);he=be._texture;B.uniform1i(ia.location,he.bind());wc=p.count;0<wc?Qc?n.drawElementsInstancedANGLE(5,4,Qc.type,0<<(Qc.type-5121>>1),wc):n.drawArraysInstancedANGLE(5,0,4,wc):0>wc&&(Qc?B.drawElements(5,4,Qc.type,0<<(Qc.type-5121>>1)):B.drawArrays(5,0,4));U.viewportWidth=dc;U.viewportHeight=Cc;Ib&&O.destroyStream(Ua);Pc&&O.destroyStream(Yb);Na&&O.destroyStream(Bb);Fa&&O.destroyStream(qb);vb&&O.destroyStream(Db);mb&&O.destroyStream(xb);he.unbind()}pa.dirty=!0;zb.setVAO(null);
a&&(c.cpuTime+=performance.now()-f)},draw:function(b){var e,g,a,n,p,t,q,v,w,y,D,I,u,W,H,fa,ra,Ga,tb,Da,La,nb,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb,hd,Hb,nc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,ye,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd;e=T.next;e!==T.cur&&(e?B.bindFramebuffer(36160,e.framebuffer):B.bindFramebuffer(36160,
null),T.cur=e);if(pa.dirty){var sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc;sc=da.dither;sc!==pa.dither&&(sc?B.enable(3024):B.disable(3024),pa.dither=sc);Fd=da.depth_func;Fd!==pa.depth_func&&(B.depthFunc(Fd),pa.depth_func=Fd);Jc=td[0];ed=td[1];if(Jc!==zc[0]||ed!==zc[1])B.depthRange(Jc,ed),zc[0]=Jc,zc[1]=ed;fd=da.depth_mask;fd!==pa.depth_mask&&(B.depthMask(fd),pa.depth_mask=fd);Wb=pc[0];bc=pc[1];Qb=pc[2];Ja=pc[3];if(Wb!==jc[0]||bc!==jc[1]||Qb!==jc[2]||
Ja!==jc[3])B.colorMask(Wb,bc,Qb,Ja),jc[0]=Wb,jc[1]=bc,jc[2]=Qb,jc[3]=Ja;$b=da.frontFace;$b!==pa.frontFace&&(B.frontFace($b),pa.frontFace=$b);mb=da.lineWidth;mb!==pa.lineWidth&&(B.lineWidth(mb),pa.lineWidth=mb);xb=da.polygonOffset_enable;xb!==pa.polygonOffset_enable&&(xb?B.enable(32823):B.disable(32823),pa.polygonOffset_enable=xb);Nb=ba[0];Rb=ba[1];if(Nb!==N[0]||Rb!==N[1])B.polygonOffset(Nb,Rb),N[0]=Nb,N[1]=Rb;fc=da.sample_alpha;fc!==pa.sample_alpha&&(fc?B.enable(32926):B.disable(32926),pa.sample_alpha=
fc);hc=da.sample_enable;hc!==pa.sample_enable&&(hc?B.enable(32928):B.disable(32928),pa.sample_enable=hc);Ze=ha[0];xc=ha[1];if(Ze!==Ha[0]||xc!==Ha[1])B.sampleCoverage(Ze,xc),Ha[0]=Ze,Ha[1]=xc;yc=da.stencil_mask;yc!==pa.stencil_mask&&(B.stencilMask(yc),pa.stencil_mask=yc);Ac=Nc[0];Kc=Nc[1];$c=Nc[2];if(Ac!==L[0]||Kc!==L[1]||$c!==L[2])B.stencilFunc(Ac,Kc,$c),L[0]=Ac,L[1]=Kc,L[2]=$c;Rc=ua[0];Lc=ua[1];Kb=ua[2];Eb=ua[3];if(Rc!==Z[0]||Lc!==Z[1]||Kb!==Z[2]||Eb!==Z[3])B.stencilOpSeparate(Rc,Lc,Kb,Eb),Z[0]=
Rc,Z[1]=Lc,Z[2]=Kb,Z[3]=Eb;Mc=E[0];Ec=E[1];Sc=E[2];gc=E[3];if(Mc!==ja[0]||Ec!==ja[1]||Sc!==ja[2]||gc!==ja[3])B.stencilOpSeparate(Mc,Ec,Sc,gc),ja[0]=Mc,ja[1]=Ec,ja[2]=Sc,ja[3]=gc}g=b.viewport;a=g.x|0;n=g.y|0;p="width"in g?g.width|0:U.framebufferWidth-a;t="height"in g?g.height|0:U.framebufferHeight-n;q=U.viewportWidth;U.viewportWidth=p;v=U.viewportHeight;U.viewportHeight=t;B.viewport(a,n,p,t);sa[0]=a;sa[1]=n;sa[2]=p;sa[3]=t;B.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;B.enable(3042);pa.blend_enable=
!0;B.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;B.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;cc[3]=1;B.enable(2884);pa.cull_enable=!0;B.cullFace(1029);pa.cull_face=1029;(w=d.call(this,U,b,0))?B.enable(2929):B.disable(2929);pa.depth_enable=w;y=b.viewport;D=y.x|0;I=y.y|0;u="width"in y?y.width|0:U.framebufferWidth-D;W="height"in y?y.height|0:U.framebufferHeight-I;B.scissor(D,I,u,W);cd[0]=D;cd[1]=I;cd[2]=u;cd[3]=W;B.enable(3089);pa.scissor_enable=!0;B.disable(2960);
pa.stencil_enable=!1;if(H=pa.profile)fa=performance.now(),c.count++;B.useProgram(h.program);ra=ab.angle_instanced_arrays;zb.setVAO(null);ca.buffer=b.positionBuffer;Ga=!1;tb=null;Da=0;La=!1;Vd=nb=0;Wd=1;ae=0;Yd=5126;ad=vd=nd=qd=0;oa(ca)?(Ga=!0,tb=O.createStream(34962,ca),Yd=tb.dtype):(tb=O.getBuffer(ca))?Yd=tb.dtype:"constant"in ca?(Wd=2,"number"===typeof ca.constant?(nd=ca.constant,vd=ad=qd=0):(nd=0<ca.constant.length?ca.constant[0]:0,vd=1<ca.constant.length?ca.constant[1]:0,ad=2<ca.constant.length?
ca.constant[2]:0,qd=3<ca.constant.length?ca.constant[3]:0)):(tb=oa(ca.buffer)?O.createStream(34962,ca.buffer):O.getBuffer(ca.buffer),Yd="type"in ca?M[ca.type]:tb.dtype,La=!!ca.normalized,Vd=ca.size|0,nb=ca.offset|0,ae=ca.stride|0,Da=ca.divisor|0);sd=ta.location;Tc=P[sd];if(1===Wd){Tc.buffer||B.enableVertexAttribArray(sd);Ed=Vd||2;if(Tc.type!==Yd||Tc.size!==Ed||Tc.buffer!==tb||Tc.normalized!==La||Tc.offset!==nb||Tc.stride!==ae)B.bindBuffer(34962,tb.buffer),B.vertexAttribPointer(sd,Ed,Yd,La,ae,nb),
Tc.type=Yd,Tc.size=Ed,Tc.buffer=tb,Tc.normalized=La,Tc.offset=nb,Tc.stride=ae;Tc.divisor!==Da&&(ra.vertexAttribDivisorANGLE(sd,Da),Tc.divisor=Da)}else if(Tc.buffer&&(B.disableVertexAttribArray(sd),Tc.buffer=null),Tc.x!==nd||Tc.y!==vd||Tc.z!==ad||Tc.w!==qd)B.vertexAttrib4f(sd,nd,vd,ad,qd),Tc.x=nd,Tc.y=vd,Tc.z=ad,Tc.w=qd;Aa.buffer=b.positionBuffer;Oc=!1;Ic=null;qc=0;gb=!1;Hb=hd=0;nc=1;Xa=0;Qc=5126;rd=Id=lc=ac=0;oa(Aa)?(Oc=!0,Ic=O.createStream(34962,Aa),Qc=Ic.dtype):(Ic=O.getBuffer(Aa))?Qc=Ic.dtype:
"constant"in Aa?(nc=2,"number"===typeof Aa.constant?(lc=Aa.constant,Id=rd=ac=0):(lc=0<Aa.constant.length?Aa.constant[0]:0,Id=1<Aa.constant.length?Aa.constant[1]:0,rd=2<Aa.constant.length?Aa.constant[2]:0,ac=3<Aa.constant.length?Aa.constant[3]:0)):(Ic=oa(Aa.buffer)?O.createStream(34962,Aa.buffer):O.getBuffer(Aa.buffer),Qc="type"in Aa?M[Aa.type]:Ic.dtype,gb=!!Aa.normalized,Hb=Aa.size|0,hd=Aa.offset|0,Xa=Aa.stride|0,qc=Aa.divisor|0);Fc=R.location;dc=P[Fc];if(1===nc){dc.buffer||B.enableVertexAttribArray(Fc);
Cc=Hb||2;if(dc.type!==Qc||dc.size!==Cc||dc.buffer!==Ic||dc.normalized!==gb||dc.offset!==hd||dc.stride!==Xa)B.bindBuffer(34962,Ic.buffer),B.vertexAttribPointer(Fc,Cc,Qc,gb,Xa,hd),dc.type=Qc,dc.size=Cc,dc.buffer=Ic,dc.normalized=gb,dc.offset=hd,dc.stride=Xa;dc.divisor!==qc&&(ra.vertexAttribDivisorANGLE(Fc,qc),dc.divisor=qc)}else if(dc.buffer&&(B.disableVertexAttribArray(Fc),dc.buffer=null),dc.x!==lc||dc.y!==Id||dc.z!==rd||dc.w!==ac)B.vertexAttrib4f(Fc,lc,Id,rd,ac),dc.x=lc,dc.y=Id,dc.z=rd,dc.w=ac;Ka.buffer=
b.positionBuffer;Xc=!1;Zb=null;Gc=0;Ya=!1;ud=Ea=0;Ib=1;Ua=0;Vb=5126;ye=Xb=Dc=cb=0;oa(Ka)?(Xc=!0,Zb=O.createStream(34962,Ka),Vb=Zb.dtype):(Zb=O.getBuffer(Ka))?Vb=Zb.dtype:"constant"in Ka?(Ib=2,"number"===typeof Ka.constant?(Dc=Ka.constant,Xb=ye=cb=0):(Dc=0<Ka.constant.length?Ka.constant[0]:0,Xb=1<Ka.constant.length?Ka.constant[1]:0,ye=2<Ka.constant.length?Ka.constant[2]:0,cb=3<Ka.constant.length?Ka.constant[3]:0)):(Zb=oa(Ka.buffer)?O.createStream(34962,Ka.buffer):O.getBuffer(Ka.buffer),Vb="type"in
Ka?M[Ka.type]:Zb.dtype,Ya=!!Ka.normalized,ud=Ka.size|0,Ea=Ka.offset|0,Ua=Ka.stride|0,Gc=Ka.divisor|0);kc=ma.location;Sb=P[kc];if(1===Ib){Sb.buffer||B.enableVertexAttribArray(kc);x=ud||2;if(Sb.type!==Vb||Sb.size!==x||Sb.buffer!==Zb||Sb.normalized!==Ya||Sb.offset!==Ea||Sb.stride!==Ua)B.bindBuffer(34962,Zb.buffer),B.vertexAttribPointer(kc,x,Vb,Ya,Ua,Ea),Sb.type=Vb,Sb.size=x,Sb.buffer=Zb,Sb.normalized=Ya,Sb.offset=Ea,Sb.stride=Ua;Sb.divisor!==Gc&&(ra.vertexAttribDivisorANGLE(kc,Gc),Sb.divisor=Gc)}else if(Sb.buffer&&
(B.disableVertexAttribArray(kc),Sb.buffer=null),Sb.x!==Dc||Sb.y!==Xb||Sb.z!==ye||Sb.w!==cb)B.vertexAttrib4f(kc,Dc,Xb,ye,cb),Sb.x=Dc,Sb.y=Xb,Sb.z=ye,Sb.w=cb;C.buffer=b.positionBuffer;Tb=!1;Pa=null;ob=0;ub=!1;Ra=hb=0;Pc=1;Yb=0;jd=5126;ic=Yc=oc=db=0;oa(C)?(Tb=!0,Pa=O.createStream(34962,C),jd=Pa.dtype):(Pa=O.getBuffer(C))?jd=Pa.dtype:"constant"in C?(Pc=2,"number"===typeof C.constant?(oc=C.constant,Yc=ic=db=0):(oc=0<C.constant.length?C.constant[0]:0,Yc=1<C.constant.length?C.constant[1]:0,ic=2<C.constant.length?
C.constant[2]:0,db=3<C.constant.length?C.constant[3]:0)):(Pa=oa(C.buffer)?O.createStream(34962,C.buffer):O.getBuffer(C.buffer),jd="type"in C?M[C.type]:Pa.dtype,ub=!!C.normalized,Ra=C.size|0,hb=C.offset|0,Yb=C.stride|0,ob=C.divisor|0);jb=Qa.location;kb=P[jb];if(1===Pc){kb.buffer||B.enableVertexAttribArray(jb);va=Ra||2;if(kb.type!==jd||kb.size!==va||kb.buffer!==Pa||kb.normalized!==ub||kb.offset!==hb||kb.stride!==Yb)B.bindBuffer(34962,Pa.buffer),B.vertexAttribPointer(jb,va,jd,ub,Yb,hb),kb.type=jd,kb.size=
va,kb.buffer=Pa,kb.normalized=ub,kb.offset=hb,kb.stride=Yb;kb.divisor!==ob&&(ra.vertexAttribDivisorANGLE(jb,ob),kb.divisor=ob)}else if(kb.buffer&&(B.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==oc||kb.y!==Yc||kb.z!==ic||kb.w!==db)B.vertexAttrib4f(jb,oc,Yc,ic,db),kb.x=oc,kb.y=Yc,kb.z=ic,kb.w=db;F.buffer=b.colorBuffer;pb=!1;ya=null;Va=0;bb=!1;eb=Ba=0;Na=1;Bb=0;Ab=5126;Lb=Jb=Hc=Ta=0;oa(F)?(pb=!0,ya=O.createStream(34962,F),Ab=ya.dtype):(ya=O.getBuffer(F))?Ab=ya.dtype:"constant"in F?(Na=2,"number"===
typeof F.constant?(Hc=F.constant,Jb=Lb=Ta=0):(Hc=0<F.constant.length?F.constant[0]:0,Jb=1<F.constant.length?F.constant[1]:0,Lb=2<F.constant.length?F.constant[2]:0,Ta=3<F.constant.length?F.constant[3]:0)):(ya=oa(F.buffer)?O.createStream(34962,F.buffer):O.getBuffer(F.buffer),Ab="type"in F?M[F.type]:ya.dtype,bb=!!F.normalized,eb=F.size|0,Ba=F.offset|0,Bb=F.stride|0,Va=F.divisor|0);Ub=r.location;wa=P[Ub];if(1===Na){wa.buffer||B.enableVertexAttribArray(Ub);Jd=eb||4;if(wa.type!==Ab||wa.size!==Jd||wa.buffer!==
ya||wa.normalized!==bb||wa.offset!==Ba||wa.stride!==Bb)B.bindBuffer(34962,ya.buffer),B.vertexAttribPointer(Ub,Jd,Ab,bb,Bb,Ba),wa.type=Ab,wa.size=Jd,wa.buffer=ya,wa.normalized=bb,wa.offset=Ba,wa.stride=Bb;wa.divisor!==Va&&(ra.vertexAttribDivisorANGLE(Ub,Va),wa.divisor=Va)}else if(wa.buffer&&(B.disableVertexAttribArray(Ub),wa.buffer=null),wa.x!==Hc||wa.y!==Jb||wa.z!==Lb||wa.w!==Ta)B.vertexAttrib4f(Ub,Hc,Jb,Lb,Ta),wa.x=Hc,wa.y=Jb,wa.z=Lb,wa.w=Ta;za.buffer=b.colorBuffer;Ma=!1;Pb=null;fb=0;ib=!1;ec=xa=
0;Fa=1;qb=0;rb=5126;dd=rc=$a=Za=0;oa(za)?(Ma=!0,Pb=O.createStream(34962,za),rb=Pb.dtype):(Pb=O.getBuffer(za))?rb=Pb.dtype:"constant"in za?(Fa=2,"number"===typeof za.constant?($a=za.constant,rc=dd=Za=0):($a=0<za.constant.length?za.constant[0]:0,rc=1<za.constant.length?za.constant[1]:0,dd=2<za.constant.length?za.constant[2]:0,Za=3<za.constant.length?za.constant[3]:0)):(Pb=oa(za.buffer)?O.createStream(34962,za.buffer):O.getBuffer(za.buffer),rb="type"in za?M[za.type]:Pb.dtype,ib=!!za.normalized,ec=za.size|
0,xa=za.offset|0,qb=za.stride|0,fb=za.divisor|0);tc=S.location;Wa=P[tc];if(1===Fa){Wa.buffer||B.enableVertexAttribArray(tc);Mb=ec||4;if(Wa.type!==rb||Wa.size!==Mb||Wa.buffer!==Pb||Wa.normalized!==ib||Wa.offset!==xa||Wa.stride!==qb)B.bindBuffer(34962,Pb.buffer),B.vertexAttribPointer(tc,Mb,rb,ib,qb,xa),Wa.type=rb,Wa.size=Mb,Wa.buffer=Pb,Wa.normalized=ib,Wa.offset=xa,Wa.stride=qb;Wa.divisor!==fb&&(ra.vertexAttribDivisorANGLE(tc,fb),Wa.divisor=fb)}else if(Wa.buffer&&(B.disableVertexAttribArray(tc),Wa.buffer=
null),Wa.x!==$a||Wa.y!==rc||Wa.z!==dd||Wa.w!==Za)B.vertexAttrib4f(tc,$a,rc,dd,Za),Wa.x=$a,Wa.y=rc,Wa.z=dd,Wa.w=Za;Zc=V.location;Ia=P[Zc];Ia.buffer||B.enableVertexAttribArray(Zc);if(5126!==Ia.type||1!==Ia.size||Ia.buffer!==l||!1!==Ia.normalized||0!==Ia.offset||8!==Ia.stride)B.bindBuffer(34962,l.buffer),B.vertexAttribPointer(Zc,1,5126,!1,8,0),Ia.type=5126,Ia.size=1,Ia.buffer=l,Ia.normalized=!1,Ia.offset=0,Ia.stride=8;0!==Ia.divisor&&(ra.vertexAttribDivisorANGLE(Zc,0),Ia.divisor=0);vc=K.location;Sa=
P[vc];Sa.buffer||B.enableVertexAttribArray(vc);if(5126!==Sa.type||1!==Sa.size||Sa.buffer!==m||!1!==Sa.normalized||4!==Sa.offset||8!==Sa.stride)B.bindBuffer(34962,m.buffer),B.vertexAttribPointer(vc,1,5126,!1,8,4),Sa.type=5126,Sa.size=1,Sa.buffer=m,Sa.normalized=!1,Sa.offset=4,Sa.stride=8;0!==Sa.divisor&&(ra.vertexAttribDivisorANGLE(vc,0),Sa.divisor=0);Ca=b.scale;B.uniform2f(Cb.location,Ca[0],Ca[1]);lb=b.translate;B.uniform2f(Oa.location,lb[0],lb[1]);B.uniform1f(ea.location,b.thickness);B.uniform1f(J.location,
b.depth);vb=f.call(this,U,b,0);B.uniform4f(X.location,vb[0],vb[1],vb[2],vb[3]);B.uniform1f(ka.location,b.miterLimit);Db=k.call(this,U,b,0);B.uniform1f(aa.location,Db);B.uniform1f(z.location,b.dashLength);B.uniform1f(na.location,b.opacity);(sb=b.dashTexture)&&"framebuffer"===sb._reglType&&(sb=sb.color[0]);uc=sb._texture;B.uniform1i(ia.location,uc.bind());(wb=Q.elements)?B.bindBuffer(34963,wb.buffer.buffer):zb.currentVAO&&(wb=Ob.getElements(zb.currentVAO.elements))&&B.bindBuffer(34963,wb.buffer.buffer);
wd=b.count;0<wd?wb?ra.drawElementsInstancedANGLE(5,4,wb.type,0<<(wb.type-5121>>1),wd):ra.drawArraysInstancedANGLE(5,0,4,wd):0>wd&&(wb?B.drawElements(5,4,wb.type,0<<(wb.type-5121>>1)):B.drawArrays(5,0,4));pa.dirty=!0;zb.setVAO(null);U.viewportWidth=q;U.viewportHeight=v;H&&(c.cpuTime+=performance.now()-fa);Ga&&O.destroyStream(tb);Oc&&O.destroyStream(Ic);Xc&&O.destroyStream(Zb);Tb&&O.destroyStream(Pa);pb&&O.destroyStream(ya);Ma&&O.destroyStream(Pb);uc.unbind()},scope:function(a,f,k){var d,h,y,u,G,W,
A,H,r,z,la,B,E,N,J,L,ta,ba,S,R,K,P,T,Y,Z,V,ha,ia,X,ja,aa,ga,ua,pc,sa,ma,Ha,ea,Xa,td,ac,lc,zc,ka,cd,dc,Cc,Xc,Zb,Gc,Ya,Ea,cc,Ib,Ua,Vb,cb,na,jc,Oa,ab,Sb,x,Tb,Pa,ob,ub,hb,Ra,Qa,Yb,Nc,db,oc,Ob,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,zb,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,Cb,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,
be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;d=a.viewport;h=d.x|0;y=d.y|0;u="width"in d?d.width|0:U.framebufferWidth-h;G="height"in d?d.height|0:U.framebufferHeight-y;W=U.viewportWidth;U.viewportWidth=u;A=U.viewportHeight;U.viewportHeight=G;H=fa[0];fa[0]=h;r=fa[1];fa[1]=y;z=fa[2];fa[2]=u;la=fa[3];fa[3]=G;B=La[0];La[0]=0;E=La[1];La[1]=0;N=La[2];
La[2]=0;J=La[3];La[3]=0;L=da.blend_enable;da.blend_enable=!0;ta=nb[0];nb[0]=32774;ba=nb[1];nb[1]=32774;S=ra[0];ra[0]=770;R=ra[1];ra[1]=771;K=ra[2];ra[2]=773;P=ra[3];ra[3]=1;T=da.cull_enable;da.cull_enable=!0;Y=da.cull_face;da.cull_face=1029;Z=b.call(this,U,a,k);V=da.depth_enable;da.depth_enable=Z;ha=a.viewport;ia=ha.x|0;X=ha.y|0;ja="width"in ha?ha.width|0:U.framebufferWidth-ia;aa="height"in ha?ha.height|0:U.framebufferHeight-X;ga=tb[0];tb[0]=ia;ua=tb[1];tb[1]=X;pc=tb[2];tb[2]=ja;sa=tb[3];tb[3]=aa;
ma=da.scissor_enable;da.scissor_enable=!0;Ha=da.stencil_enable;da.stencil_enable=!1;if(ea=pa.profile)Xa=performance.now(),c.count++;td=Q.offset;Q.offset=0;ac=Q.count;Q.count=4;lc=a.count;zc=Q.instances;Q.instances=lc;ka=Q.primitive;Q.primitive=5;cd=a.dashLength;dc=Ga[23];Ga[23]=cd;Cc=a.dashTexture;Xc=Ga[24];Ga[24]=Cc;Zb=a.depth;Gc=Ga[22];Ga[22]=Zb;Ya=a.id;Ea=Ga[31];Ga[31]=Ya;cc=a.miterLimit;Ib=Ga[32];Ga[32]=cc;Ua=q.call(this,U,a,k);Vb=Ga[33];Ga[33]=Ua;cb=a.opacity;na=Ga[10];Ga[10]=cb;jc=U.pixelRatio;
Oa=Ga[34];Ga[34]=jc;ab=a.scale;Sb=Ga[6];Ga[6]=ab;x=a.scaleFract;Tb=Ga[7];Ga[7]=x;Pa=a.thickness;ob=Ga[21];Ga[21]=Pa;ub=a.translate;hb=Ga[8];Ga[8]=ub;Ra=a.translateFract;Qa=Ga[9];Ga[9]=Ra;Yb=I.call(this,U,a,k);Nc=Ga[3];Ga[3]=Yb;F.buffer=a.colorBuffer;db=!1;oc=null;Ob=0;ic=!1;kb=jb=0;va=1;pb=0;ya=5126;eb=Ba=bb=Va=0;oa(F)?(db=!0,oc=O.createStream(34962,F),ya=oc.dtype):(oc=O.getBuffer(F))?ya=oc.dtype:"constant"in F?(va=2,"number"===typeof F.constant?(bb=F.constant,Ba=eb=Va=0):(bb=0<F.constant.length?
F.constant[0]:0,Ba=1<F.constant.length?F.constant[1]:0,eb=2<F.constant.length?F.constant[2]:0,Va=3<F.constant.length?F.constant[3]:0)):(oc=oa(F.buffer)?O.createStream(34962,F.buffer):O.getBuffer(F.buffer),ya="type"in F?M[F.type]:oc.dtype,ic=!!F.normalized,kb=F.size|0,jb=F.offset|0,pb=F.stride|0,Ob=F.divisor|0);Na=w.buffer;w.buffer=oc;Bb=w.divisor;w.divisor=Ob;Ab=w.normalized;w.normalized=ic;Ta=w.offset;w.offset=jb;Hc=w.size;w.size=kb;Jb=w.state;w.state=va;Lb=w.stride;w.stride=pb;Ub=w.type;w.type=
ya;wa=w.w;w.w=Va;zb=w.x;w.x=bb;Ma=w.y;w.y=Ba;Pb=w.z;w.z=eb;ca.buffer=a.positionBuffer;fb=!1;ib=null;xa=0;ec=!1;qb=Fa=0;rb=1;Za=0;$a=5126;Wa=tc=dd=rc=0;oa(ca)?(fb=!0,ib=O.createStream(34962,ca),$a=ib.dtype):(ib=O.getBuffer(ca))?$a=ib.dtype:"constant"in ca?(rb=2,"number"===typeof ca.constant?(dd=ca.constant,tc=Wa=rc=0):(dd=0<ca.constant.length?ca.constant[0]:0,tc=1<ca.constant.length?ca.constant[1]:0,Wa=2<ca.constant.length?ca.constant[2]:0,rc=3<ca.constant.length?ca.constant[3]:0)):(ib=oa(ca.buffer)?
O.createStream(34962,ca.buffer):O.getBuffer(ca.buffer),$a="type"in ca?M[ca.type]:ib.dtype,ec=!!ca.normalized,qb=ca.size|0,Fa=ca.offset|0,Za=ca.stride|0,xa=ca.divisor|0);Mb=e.buffer;e.buffer=ib;Zc=e.divisor;e.divisor=xa;Ia=e.normalized;e.normalized=ec;vc=e.offset;e.offset=Fa;Sa=e.size;e.size=qb;Ca=e.state;e.state=rb;lb=e.stride;e.stride=Za;vb=e.type;e.type=$a;Db=e.w;e.w=rc;sb=e.x;e.x=dd;uc=e.y;e.y=tc;wb=e.z;e.z=Wa;za.buffer=a.colorBuffer;Cb=!1;sc=null;Fd=0;Jc=!1;fd=ed=0;Wb=1;bc=0;Qb=5126;xb=mb=$b=
Ja=0;oa(za)?(Cb=!0,sc=O.createStream(34962,za),Qb=sc.dtype):(sc=O.getBuffer(za))?Qb=sc.dtype:"constant"in za?(Wb=2,"number"===typeof za.constant?($b=za.constant,mb=xb=Ja=0):($b=0<za.constant.length?za.constant[0]:0,mb=1<za.constant.length?za.constant[1]:0,xb=2<za.constant.length?za.constant[2]:0,Ja=3<za.constant.length?za.constant[3]:0)):(sc=oa(za.buffer)?O.createStream(34962,za.buffer):O.getBuffer(za.buffer),Qb="type"in za?M[za.type]:sc.dtype,Jc=!!za.normalized,fd=za.size|0,ed=za.offset|0,bc=za.stride|
0,Fd=za.divisor|0);Nb=g.buffer;g.buffer=sc;Rb=g.divisor;g.divisor=Fd;fc=g.normalized;g.normalized=Jc;hc=g.offset;g.offset=ed;Ze=g.size;g.size=fd;xc=g.state;g.state=Wb;yc=g.stride;g.stride=bc;Ac=g.type;g.type=Qb;Kc=g.w;g.w=Ja;$c=g.x;g.x=$b;Rc=g.y;g.y=mb;Lc=g.z;g.z=xb;Aa.buffer=a.positionBuffer;Kb=!1;Eb=null;Mc=0;Ec=!1;gc=Sc=0;Vc=1;gd=0;kd=5126;Zd=bf=Wc=md=0;oa(Aa)?(Kb=!0,Eb=O.createStream(34962,Aa),kd=Eb.dtype):(Eb=O.getBuffer(Aa))?kd=Eb.dtype:"constant"in Aa?(Vc=2,"number"===typeof Aa.constant?(Wc=
Aa.constant,bf=Zd=md=0):(Wc=0<Aa.constant.length?Aa.constant[0]:0,bf=1<Aa.constant.length?Aa.constant[1]:0,Zd=2<Aa.constant.length?Aa.constant[2]:0,md=3<Aa.constant.length?Aa.constant[3]:0)):(Eb=oa(Aa.buffer)?O.createStream(34962,Aa.buffer):O.getBuffer(Aa.buffer),kd="type"in Aa?M[Aa.type]:Eb.dtype,Ec=!!Aa.normalized,gc=Aa.size|0,Sc=Aa.offset|0,gd=Aa.stride|0,Mc=Aa.divisor|0);ke=p.buffer;p.buffer=Eb;se=p.divisor;p.divisor=Mc;me=p.normalized;p.normalized=Ec;Md=p.offset;p.offset=Sc;Kd=p.size;p.size=
gc;id=p.state;p.state=Vc;Bc=p.stride;p.stride=gd;od=p.type;p.type=kd;ld=p.w;p.w=md;bd=p.x;p.x=Wc;pd=p.y;p.y=bf;Gd=p.z;p.z=Zd;Hd=n.buffer;n.buffer=l;te=n.divisor;n.divisor=0;ze=n.normalized;n.normalized=!1;Ae=n.offset;n.offset=0;ne=n.size;n.size=0;ee=n.state;n.state=1;de=n.stride;n.stride=8;pe=n.type;n.type=5126;be=n.w;n.w=0;he=n.x;n.x=0;wc=n.y;n.y=0;Uc=n.z;n.z=0;qe=t.buffer;t.buffer=m;le=t.divisor;t.divisor=0;Ld=t.normalized;t.normalized=!1;Pd=t.offset;t.offset=4;Qd=t.size;t.size=0;Rd=t.state;t.state=
1;ie=t.stride;t.stride=8;vf=t.type;t.type=5126;Ce=t.w;t.w=0;oe=t.x;t.x=0;Re=t.y;t.y=0;Se=t.z;t.z=0;Ka.buffer=a.positionBuffer;Ne=!1;re=null;Fe=0;He=!1;Je=Ie=0;Ge=1;Nd=0;Ud=5126;Cd=Ke=ce=$d=0;oa(Ka)?(Ne=!0,re=O.createStream(34962,Ka),Ud=re.dtype):(re=O.getBuffer(Ka))?Ud=re.dtype:"constant"in Ka?(Ge=2,"number"===typeof Ka.constant?(ce=Ka.constant,Ke=Cd=$d=0):(ce=0<Ka.constant.length?Ka.constant[0]:0,Ke=1<Ka.constant.length?Ka.constant[1]:0,Cd=2<Ka.constant.length?Ka.constant[2]:0,$d=3<Ka.constant.length?
Ka.constant[3]:0)):(re=oa(Ka.buffer)?O.createStream(34962,Ka.buffer):O.getBuffer(Ka.buffer),Ud="type"in Ka?M[Ka.type]:re.dtype,He=!!Ka.normalized,Je=Ka.size|0,Ie=Ka.offset|0,Nd=Ka.stride|0,Fe=Ka.divisor|0);Sd=v.buffer;v.buffer=re;De=v.divisor;v.divisor=Fe;Le=v.normalized;v.normalized=He;cf=v.offset;v.offset=Ie;af=v.size;v.size=Je;Te=v.state;v.state=Ge;Oe=v.stride;v.stride=Nd;$e=v.type;v.type=Ud;Xe=v.w;v.w=$d;Ue=v.x;v.x=ce;Ve=v.y;v.y=Ke;Td=v.z;v.z=Cd;C.buffer=a.positionBuffer;Xd=!1;We=null;jf=0;nf=
!1;kf=ff=0;lf=1;mf=0;rf=5126;Df=Cf=sf=of=0;oa(C)?(Xd=!0,We=O.createStream(34962,C),rf=We.dtype):(We=O.getBuffer(C))?rf=We.dtype:"constant"in C?(lf=2,"number"===typeof C.constant?(sf=C.constant,Cf=Df=of=0):(sf=0<C.constant.length?C.constant[0]:0,Cf=1<C.constant.length?C.constant[1]:0,Df=2<C.constant.length?C.constant[2]:0,of=3<C.constant.length?C.constant[3]:0)):(We=oa(C.buffer)?O.createStream(34962,C.buffer):O.getBuffer(C.buffer),rf="type"in C?M[C.type]:We.dtype,nf=!!C.normalized,kf=C.size|0,ff=C.offset|
0,mf=C.stride|0,jf=C.divisor|0);Pe=D.buffer;D.buffer=We;Ee=D.divisor;D.divisor=jf;pf=D.normalized;D.normalized=nf;qf=D.offset;D.offset=ff;Ef=D.size;D.size=kf;Hf=D.state;D.state=lf;Bf=D.stride;D.stride=mf;Ff=D.type;D.type=rf;Gf=D.w;D.w=of;xf=D.x;D.x=sf;yf=D.y;D.y=Cf;wf=D.z;D.z=Df;zf=Da.vert;Da.vert=36;Af=Da.frag;Da.frag=35;pa.dirty=!0;f(U,a,k);U.viewportWidth=W;U.viewportHeight=A;fa[0]=H;fa[1]=r;fa[2]=z;fa[3]=la;La[0]=B;La[1]=E;La[2]=N;La[3]=J;da.blend_enable=L;nb[0]=ta;nb[1]=ba;ra[0]=S;ra[1]=R;ra[2]=
K;ra[3]=P;da.cull_enable=T;da.cull_face=Y;da.depth_enable=V;tb[0]=ga;tb[1]=ua;tb[2]=pc;tb[3]=sa;da.scissor_enable=ma;da.stencil_enable=Ha;ea&&(c.cpuTime+=performance.now()-Xa);Q.offset=td;Q.count=ac;Q.instances=zc;Q.primitive=ka;Ga[23]=dc;Ga[24]=Xc;Ga[22]=Gc;Ga[31]=Ea;Ga[32]=Ib;Ga[33]=Vb;Ga[10]=na;Ga[34]=Oa;Ga[6]=Sb;Ga[7]=Tb;Ga[21]=ob;Ga[8]=hb;Ga[9]=Qa;Ga[3]=Nc;db&&O.destroyStream(oc);w.buffer=Na;w.divisor=Bb;w.normalized=Ab;w.offset=Ta;w.size=Hc;w.state=Jb;w.stride=Lb;w.type=Ub;w.w=wa;w.x=zb;w.y=
Ma;w.z=Pb;fb&&O.destroyStream(ib);e.buffer=Mb;e.divisor=Zc;e.normalized=Ia;e.offset=vc;e.size=Sa;e.state=Ca;e.stride=lb;e.type=vb;e.w=Db;e.x=sb;e.y=uc;e.z=wb;Cb&&O.destroyStream(sc);g.buffer=Nb;g.divisor=Rb;g.normalized=fc;g.offset=hc;g.size=Ze;g.state=xc;g.stride=yc;g.type=Ac;g.w=Kc;g.x=$c;g.y=Rc;g.z=Lc;Kb&&O.destroyStream(Eb);p.buffer=ke;p.divisor=se;p.normalized=me;p.offset=Md;p.size=Kd;p.state=id;p.stride=Bc;p.type=od;p.w=ld;p.x=bd;p.y=pd;p.z=Gd;n.buffer=Hd;n.divisor=te;n.normalized=ze;n.offset=
Ae;n.size=ne;n.state=ee;n.stride=de;n.type=pe;n.w=be;n.x=he;n.y=wc;n.z=Uc;t.buffer=qe;t.divisor=le;t.normalized=Ld;t.offset=Pd;t.size=Qd;t.state=Rd;t.stride=ie;t.type=vf;t.w=Ce;t.x=oe;t.y=Re;t.z=Se;Ne&&O.destroyStream(re);v.buffer=Sd;v.divisor=De;v.normalized=Le;v.offset=cf;v.size=af;v.state=Te;v.stride=Oe;v.type=$e;v.w=Xe;v.x=Ue;v.y=Ve;v.z=Td;Xd&&O.destroyStream(We);D.buffer=Pe;D.divisor=Ee;D.normalized=pf;D.offset=qf;D.size=Ef;D.state=Hf;D.stride=Bf;D.type=Ff;D.w=Gf;D.x=xf;D.y=yf;D.z=wf;Da.vert=
zf;Da.frag=Af;pa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,c,d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D){var y,W,u,H,r,ta,S,R,z,ia,J,V,K,ka,aa,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra;y=a.attributes;W=a.buffer;u=a.context;H=a.current;r=a.draw;ta=a.elements;S=a.extensions;R=a.framebuffer;z=a.gl;ia=a.isBufferArgs;J=a.next;V=a.shader;K=a.uniforms;ka=a.vao;aa=J.blend_color;ma=H.blend_color;na=J.blend_equation;Qa=H.blend_equation;
Cb=J.blend_func;ea=H.blend_func;Oa=J.colorMask;X=H.colorMask;P=J.depth_range;O=H.depth_range;U=J.polygonOffset_offset;pa=H.polygonOffset_offset;Q=J.sample_coverage;Ob=H.sample_coverage;ab=J.scissor_box;T=H.scissor_box;B=J.stencil_func;oa=H.stencil_func;da=J.stencil_opBack;Da=H.stencil_opBack;Ga=J.stencil_opFront;zb=H.stencil_opFront;La=J.viewport;Y=H.viewport;nb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};ra={offset:8,stride:8};
return{batch:function(a,f){var k,d,l,m,h,G;k=R.next;k!==R.cur&&(k?z.bindFramebuffer(36160,k.framebuffer):z.bindFramebuffer(36160,null),R.cur=k);if(H.dirty){var A,K,V,aa,L,E,ja,ua,Z,fa,sa,M,F,ca,za,Aa,Ka,C,na,Fb,qa,Gb,yb,La,ab,Cb,je,we,ue,Od,fe,ve;A=J.dither;A!==H.dither&&(A?z.enable(3024):z.disable(3024),H.dither=A);K=J.depth_func;K!==H.depth_func&&(z.depthFunc(K),H.depth_func=K);V=P[0];aa=P[1];if(V!==O[0]||aa!==O[1])z.depthRange(V,aa),O[0]=V,O[1]=aa;L=J.depth_mask;L!==H.depth_mask&&(z.depthMask(L),
H.depth_mask=L);E=Oa[0];ja=Oa[1];ua=Oa[2];Z=Oa[3];if(E!==X[0]||ja!==X[1]||ua!==X[2]||Z!==X[3])z.colorMask(E,ja,ua,Z),X[0]=E,X[1]=ja,X[2]=ua,X[3]=Z;fa=J.cull_enable;fa!==H.cull_enable&&(fa?z.enable(2884):z.disable(2884),H.cull_enable=fa);sa=J.cull_face;sa!==H.cull_face&&(z.cullFace(sa),H.cull_face=sa);M=J.frontFace;M!==H.frontFace&&(z.frontFace(M),H.frontFace=M);F=J.lineWidth;F!==H.lineWidth&&(z.lineWidth(F),H.lineWidth=F);ca=J.polygonOffset_enable;ca!==H.polygonOffset_enable&&(ca?z.enable(32823):
z.disable(32823),H.polygonOffset_enable=ca);za=U[0];Aa=U[1];if(za!==pa[0]||Aa!==pa[1])z.polygonOffset(za,Aa),pa[0]=za,pa[1]=Aa;Ka=J.sample_alpha;Ka!==H.sample_alpha&&(Ka?z.enable(32926):z.disable(32926),H.sample_alpha=Ka);C=J.sample_enable;C!==H.sample_enable&&(C?z.enable(32928):z.disable(32928),H.sample_enable=C);na=Q[0];Fb=Q[1];if(na!==Ob[0]||Fb!==Ob[1])z.sampleCoverage(na,Fb),Ob[0]=na,Ob[1]=Fb;qa=J.stencil_mask;qa!==H.stencil_mask&&(z.stencilMask(qa),H.stencil_mask=qa);Gb=B[0];yb=B[1];La=B[2];
if(Gb!==oa[0]||yb!==oa[1]||La!==oa[2])z.stencilFunc(Gb,yb,La),oa[0]=Gb,oa[1]=yb,oa[2]=La;ab=Ga[0];Cb=Ga[1];je=Ga[2];we=Ga[3];if(ab!==zb[0]||Cb!==zb[1]||je!==zb[2]||we!==zb[3])z.stencilOpSeparate(ab,Cb,je,we),zb[0]=ab,zb[1]=Cb,zb[2]=je,zb[3]=we;ue=da[0];Od=da[1];fe=da[2];ve=da[3];if(ue!==Da[0]||Od!==Da[1]||fe!==Da[2]||ve!==Da[3])z.stencilOpSeparate(ue,Od,fe,ve),Da[0]=ue,Da[1]=Od,Da[2]=fe,Da[3]=ve}z.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;z.enable(3042);H.blend_enable=!0;z.blendEquationSeparate(32774,
32774);Qa[0]=32774;Qa[1]=32774;z.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;z.disable(2929);H.depth_enable=!1;z.enable(3089);H.scissor_enable=!0;z.disable(2960);H.stencil_enable=!1;if(d=H.profile)l=performance.now(),c.count+=f;z.useProgram(b.program);m=S.angle_instanced_arrays;var yd;ka.setVAO(null);yd=r.instances;for(h=0;h<f;++h){G=a[h];var Dd,zd,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb,hd,Hb,nc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,
Vb,cb,Dc,Xb,ye,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub;Dd=G.viewport;zd=Dd.x|0;Ad=Dd.y|0;xe="width"in Dd?Dd.width|0:u.framebufferWidth-zd;Me="height"in Dd?Dd.height|0:u.framebufferHeight-Ad;Qe=u.viewportWidth;u.viewportWidth=xe;Bd=u.viewportHeight;u.viewportHeight=Me;z.viewport(zd,Ad,xe,Me);Y[0]=zd;Y[1]=Ad;Y[2]=xe;Y[3]=Me;Be=G.viewport;Vd=Be.x|0;Wd=Be.y|0;ae="width"in Be?Be.width|0:u.framebufferWidth-Vd;Yd="height"in Be?Be.height|0:u.framebufferHeight-
Wd;z.scissor(Vd,Wd,ae,Yd);T[0]=Vd;T[1]=Wd;T[2]=ae;T[3]=Yd;ga.buffer=G.positionBuffer;qd=!1;nd=null;vd=0;ad=!1;Tc=sd=0;Ed=1;Oc=0;Ic=5126;Hb=hd=gb=qc=0;ia(ga)?(qd=!0,nd=W.createStream(34962,ga),Ic=nd.dtype):(nd=W.getBuffer(ga))?Ic=nd.dtype:"constant"in ga?(Ed=2,"number"===typeof ga.constant?(gb=ga.constant,hd=Hb=qc=0):(gb=0<ga.constant.length?ga.constant[0]:0,hd=1<ga.constant.length?ga.constant[1]:0,Hb=2<ga.constant.length?ga.constant[2]:0,qc=3<ga.constant.length?ga.constant[3]:0)):(nd=ia(ga.buffer)?
W.createStream(34962,ga.buffer):W.getBuffer(ga.buffer),Ic="type"in ga?nb[ga.type]:nd.dtype,ad=!!ga.normalized,Tc=ga.size|0,sd=ga.offset|0,Oc=ga.stride|0,vd=ga.divisor|0);nc=g.location;Xa=y[nc];if(1===Ed){Xa.buffer||z.enableVertexAttribArray(nc);Qc=Tc||2;if(Xa.type!==Ic||Xa.size!==Qc||Xa.buffer!==nd||Xa.normalized!==ad||Xa.offset!==sd||Xa.stride!==Oc)z.bindBuffer(34962,nd.buffer),z.vertexAttribPointer(nc,Qc,Ic,ad,Oc,sd),Xa.type=Ic,Xa.size=Qc,Xa.buffer=nd,Xa.normalized=ad,Xa.offset=sd,Xa.stride=Oc;
Xa.divisor!==vd&&(m.vertexAttribDivisorANGLE(nc,vd),Xa.divisor=vd)}else if(Xa.buffer&&(z.disableVertexAttribArray(nc),Xa.buffer=null),Xa.x!==gb||Xa.y!==hd||Xa.z!==Hb||Xa.w!==qc)z.vertexAttrib4f(nc,gb,hd,Hb,qc),Xa.x=gb,Xa.y=hd,Xa.z=Hb,Xa.w=qc;ra.buffer=G.positionFractBuffer;ac=!1;lc=null;Id=0;rd=!1;dc=Fc=0;Cc=1;Xc=0;Zb=5126;ud=Ea=Ya=Gc=0;ia(ra)?(ac=!0,lc=W.createStream(34962,ra),Zb=lc.dtype):(lc=W.getBuffer(ra))?Zb=lc.dtype:"constant"in ra?(Cc=2,"number"===typeof ra.constant?(Ya=ra.constant,Ea=ud=
Gc=0):(Ya=0<ra.constant.length?ra.constant[0]:0,Ea=1<ra.constant.length?ra.constant[1]:0,ud=2<ra.constant.length?ra.constant[2]:0,Gc=3<ra.constant.length?ra.constant[3]:0)):(lc=ia(ra.buffer)?W.createStream(34962,ra.buffer):W.getBuffer(ra.buffer),Zb="type"in ra?nb[ra.type]:lc.dtype,rd=!!ra.normalized,dc=ra.size|0,Fc=ra.offset|0,Xc=ra.stride|0,Id=ra.divisor|0);Ib=p.location;Ua=y[Ib];if(1===Cc){Ua.buffer||z.enableVertexAttribArray(Ib);Vb=dc||2;if(Ua.type!==Zb||Ua.size!==Vb||Ua.buffer!==lc||Ua.normalized!==
rd||Ua.offset!==Fc||Ua.stride!==Xc)z.bindBuffer(34962,lc.buffer),z.vertexAttribPointer(Ib,Vb,Zb,rd,Xc,Fc),Ua.type=Zb,Ua.size=Vb,Ua.buffer=lc,Ua.normalized=rd,Ua.offset=Fc,Ua.stride=Xc;Ua.divisor!==Id&&(m.vertexAttribDivisorANGLE(Ib,Id),Ua.divisor=Id)}else if(Ua.buffer&&(z.disableVertexAttribArray(Ib),Ua.buffer=null),Ua.x!==Ya||Ua.y!==Ea||Ua.z!==ud||Ua.w!==Gc)z.vertexAttrib4f(Ib,Ya,Ea,ud,Gc),Ua.x=Ya,Ua.y=Ea,Ua.z=ud,Ua.w=Gc;cb=G.fill;Dc=cb[0];ye=cb[1];Sb=cb[2];Tb=cb[3];h&&Xb===Dc&&kc===ye&&x===Sb&&
Pa===Tb||(Xb=Dc,kc=ye,x=Sb,Pa=Tb,z.uniform4f(I.location,Dc,ye,Sb,Tb));ob=G.scale;ub=ob[0];Ra=ob[1];h&&hb===ub&&Pc===Ra||(hb=ub,Pc=Ra,z.uniform2f(n.location,ub,Ra));Yb=G.scaleFract;jd=Yb[0];oc=Yb[1];h&&db===jd&&Yc===oc||(db=jd,Yc=oc,z.uniform2f(t.location,jd,oc));ic=G.translate;jb=ic[0];va=ic[1];h&&kb===jb&&pb===va||(kb=jb,pb=va,z.uniform2f(v.location,jb,va));ya=G.translateFract;Va=ya[0];Ba=ya[1];h&&bb===Va&&eb===Ba||(bb=Va,eb=Ba,z.uniform2f(D.location,Va,Ba));Na=G.id;h&&Bb===Na||(Bb=Na,z.uniform1f(w.location,
Na));Ab=G.opacity;h&&Ta===Ab||(Ta=Ab,z.uniform1f(e.location,Ab));Hc=q.call(this,u,G,h);Jb=null;(Jb=(Lb=ia(Hc))?ta.createStream(Hc):ta.getElements(Hc))&&z.bindBuffer(34963,Jb.buffer.buffer);if(Ub=Jb?Jb.vertCount:-1)0<yd?Jb?m.drawElementsInstancedANGLE(4,Ub,Jb.type,0<<(Jb.type-5121>>1),yd):m.drawArraysInstancedANGLE(4,0,Ub,yd):0>yd&&(Jb?z.drawElements(4,Ub,Jb.type,0<<(Jb.type-5121>>1)):z.drawArrays(4,0,Ub)),u.viewportWidth=Qe,u.viewportHeight=Bd,qd&&W.destroyStream(nd),ac&&W.destroyStream(lc),Lb&&ta.destroyStream(Jb)}H.dirty=
!0;ka.setVAO(null);d&&(c.cpuTime+=performance.now()-l)},draw:function(b){var a,f,k,q,l,m,K,V,aa,na,La,L,E,ja,ua,Z,fa,sa,M,F,ca,za;a=R.next;a!==R.cur&&(a?z.bindFramebuffer(36160,a.framebuffer):z.bindFramebuffer(36160,null),R.cur=a);if(H.dirty){a=J.dither;a!==H.dither&&(a?z.enable(3024):z.disable(3024),H.dither=a);a=J.depth_func;a!==H.depth_func&&(z.depthFunc(a),H.depth_func=a);a=P[0];m=P[1];if(a!==O[0]||m!==O[1])z.depthRange(a,m),O[0]=a,O[1]=m;a=J.depth_mask;a!==H.depth_mask&&(z.depthMask(a),H.depth_mask=
a);a=Oa[0];m=Oa[1];f=Oa[2];k=Oa[3];if(a!==X[0]||m!==X[1]||f!==X[2]||k!==X[3])z.colorMask(a,m,f,k),X[0]=a,X[1]=m,X[2]=f,X[3]=k;a=J.cull_enable;a!==H.cull_enable&&(a?z.enable(2884):z.disable(2884),H.cull_enable=a);a=J.cull_face;a!==H.cull_face&&(z.cullFace(a),H.cull_face=a);a=J.frontFace;a!==H.frontFace&&(z.frontFace(a),H.frontFace=a);a=J.lineWidth;a!==H.lineWidth&&(z.lineWidth(a),H.lineWidth=a);a=J.polygonOffset_enable;a!==H.polygonOffset_enable&&(a?z.enable(32823):z.disable(32823),H.polygonOffset_enable=
a);a=U[0];m=U[1];if(a!==pa[0]||m!==pa[1])z.polygonOffset(a,m),pa[0]=a,pa[1]=m;a=J.sample_alpha;a!==H.sample_alpha&&(a?z.enable(32926):z.disable(32926),H.sample_alpha=a);a=J.sample_enable;a!==H.sample_enable&&(a?z.enable(32928):z.disable(32928),H.sample_enable=a);a=Q[0];m=Q[1];if(a!==Ob[0]||m!==Ob[1])z.sampleCoverage(a,m),Ob[0]=a,Ob[1]=m;a=J.stencil_mask;a!==H.stencil_mask&&(z.stencilMask(a),H.stencil_mask=a);a=B[0];m=B[1];f=B[2];if(a!==oa[0]||m!==oa[1]||f!==oa[2])z.stencilFunc(a,m,f),oa[0]=a,oa[1]=
m,oa[2]=f;a=Ga[0];m=Ga[1];f=Ga[2];k=Ga[3];if(a!==zb[0]||m!==zb[1]||f!==zb[2]||k!==zb[3])z.stencilOpSeparate(a,m,f,k),zb[0]=a,zb[1]=m,zb[2]=f,zb[3]=k;a=da[0];m=da[1];f=da[2];k=da[3];if(a!==Da[0]||m!==Da[1]||f!==Da[2]||k!==Da[3])z.stencilOpSeparate(a,m,f,k),Da[0]=a,Da[1]=m,Da[2]=f,Da[3]=k}a=b.viewport;f=a.x|0;k=a.y|0;q="width"in a?a.width|0:u.framebufferWidth-f;l="height"in a?a.height|0:u.framebufferHeight-k;a=u.viewportWidth;u.viewportWidth=q;m=u.viewportHeight;u.viewportHeight=l;z.viewport(f,k,q,
l);Y[0]=f;Y[1]=k;Y[2]=q;Y[3]=l;z.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;z.enable(3042);H.blend_enable=!0;z.blendEquationSeparate(32774,32774);Qa[0]=32774;Qa[1]=32774;z.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;z.disable(2929);H.depth_enable=!1;l=b.viewport;f=l.x|0;k=l.y|0;q="width"in l?l.width|0:u.framebufferWidth-f;l="height"in l?l.height|0:u.framebufferHeight-k;z.scissor(f,k,q,l);T[0]=f;T[1]=k;T[2]=q;T[3]=l;z.enable(3089);H.scissor_enable=!0;z.disable(2960);
H.stencil_enable=!1;if(f=H.profile)K=performance.now(),c.count++;z.useProgram(d.program);k=S.angle_instanced_arrays;ka.setVAO(null);ga.buffer=b.positionBuffer;q=!1;V=0;aa=!1;La=na=0;L=1;E=0;ja=5126;sa=fa=Z=ua=0;ia(ga)?(q=!0,l=W.createStream(34962,ga),ja=l.dtype):(l=W.getBuffer(ga))?ja=l.dtype:"constant"in ga?(L=2,"number"===typeof ga.constant?(Z=ga.constant,fa=sa=ua=0):(Z=0<ga.constant.length?ga.constant[0]:0,fa=1<ga.constant.length?ga.constant[1]:0,sa=2<ga.constant.length?ga.constant[2]:0,ua=3<ga.constant.length?
ga.constant[3]:0)):(l=ia(ga.buffer)?W.createStream(34962,ga.buffer):W.getBuffer(ga.buffer),ja="type"in ga?nb[ga.type]:l.dtype,aa=!!ga.normalized,La=ga.size|0,na=ga.offset|0,E=ga.stride|0,V=ga.divisor|0);M=g.location;F=y[M];if(1===L){F.buffer||z.enableVertexAttribArray(M);La=La||2;if(F.type!==ja||F.size!==La||F.buffer!==l||F.normalized!==aa||F.offset!==na||F.stride!==E)z.bindBuffer(34962,l.buffer),z.vertexAttribPointer(M,La,ja,aa,E,na),F.type=ja,F.size=La,F.buffer=l,F.normalized=aa,F.offset=na,F.stride=
E;F.divisor!==V&&(k.vertexAttribDivisorANGLE(M,V),F.divisor=V)}else if(F.buffer&&(z.disableVertexAttribArray(M),F.buffer=null),F.x!==Z||F.y!==fa||F.z!==sa||F.w!==ua)z.vertexAttrib4f(M,Z,fa,sa,ua),F.x=Z,F.y=fa,F.z=sa,F.w=ua;ra.buffer=b.positionFractBuffer;V=!1;na=0;E=!1;ua=ja=0;Z=1;M=0;F=5126;za=ca=sa=fa=0;ia(ra)?(V=!0,aa=W.createStream(34962,ra),F=aa.dtype):(aa=W.getBuffer(ra))?F=aa.dtype:"constant"in ra?(Z=2,"number"===typeof ra.constant?(sa=ra.constant,ca=za=fa=0):(sa=0<ra.constant.length?ra.constant[0]:
0,ca=1<ra.constant.length?ra.constant[1]:0,za=2<ra.constant.length?ra.constant[2]:0,fa=3<ra.constant.length?ra.constant[3]:0)):(aa=ia(ra.buffer)?W.createStream(34962,ra.buffer):W.getBuffer(ra.buffer),F="type"in ra?nb[ra.type]:aa.dtype,E=!!ra.normalized,ua=ra.size|0,ja=ra.offset|0,M=ra.stride|0,na=ra.divisor|0);La=p.location;L=y[La];if(1===Z){L.buffer||z.enableVertexAttribArray(La);ua=ua||2;if(L.type!==F||L.size!==ua||L.buffer!==aa||L.normalized!==E||L.offset!==ja||L.stride!==M)z.bindBuffer(34962,
aa.buffer),z.vertexAttribPointer(La,ua,F,E,M,ja),L.type=F,L.size=ua,L.buffer=aa,L.normalized=E,L.offset=ja,L.stride=M;L.divisor!==na&&(k.vertexAttribDivisorANGLE(La,na),L.divisor=na)}else if(L.buffer&&(z.disableVertexAttribArray(La),L.buffer=null),L.x!==sa||L.y!==ca||L.z!==za||L.w!==fa)z.vertexAttrib4f(La,sa,ca,za,fa),L.x=sa,L.y=ca,L.z=za,L.w=fa;na=b.fill;z.uniform4f(I.location,na[0],na[1],na[2],na[3]);na=b.scale;z.uniform2f(n.location,na[0],na[1]);na=b.scaleFract;z.uniform2f(t.location,na[0],na[1]);
na=b.translate;z.uniform2f(v.location,na[0],na[1]);na=b.translateFract;z.uniform2f(D.location,na[0],na[1]);z.uniform1f(w.location,b.id);z.uniform1f(e.location,b.opacity);na=h.call(this,u,b,0);(na=(b=ia(na))?ta.createStream(na):ta.getElements(na))&&z.bindBuffer(34963,na.buffer.buffer);if(E=na?na.vertCount:-1)ja=r.instances,0<ja?na?k.drawElementsInstancedANGLE(4,E,na.type,0<<(na.type-5121>>1),ja):k.drawArraysInstancedANGLE(4,0,E,ja):0>ja&&(na?z.drawElements(4,E,na.type,0<<(na.type-5121>>1)):z.drawArrays(4,
0,E)),H.dirty=!0,ka.setVAO(null),u.viewportWidth=a,u.viewportHeight=m,f&&(c.cpuTime+=performance.now()-K),q&&W.destroyStream(l),V&&W.destroyStream(aa),b&&ta.destroyStream(na)},scope:function(b,e,g){var a,n,p,q,t,d,v,h,w,y,D,I,G,A,z,B,M,F,S,R,O,P,C,Q,T,U,Y,X,da,oa,ma,ea,pa,Ga,ka,Da,Oa,Qa,Ob,zb,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb,hd,Hb,nc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,ye,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,
eb,Na,Bb,Ab;a=b.viewport;n=a.x|0;p=a.y|0;q="width"in a?a.width|0:u.framebufferWidth-n;t="height"in a?a.height|0:u.framebufferHeight-p;d=u.viewportWidth;u.viewportWidth=q;v=u.viewportHeight;u.viewportHeight=t;h=La[0];La[0]=n;w=La[1];La[1]=p;y=La[2];La[2]=q;D=La[3];La[3]=t;I=aa[0];aa[0]=0;G=aa[1];aa[1]=0;A=aa[2];aa[2]=0;z=aa[3];aa[3]=0;B=J.blend_enable;J.blend_enable=!0;M=na[0];na[0]=32774;F=na[1];na[1]=32774;S=Cb[0];Cb[0]=770;R=Cb[1];Cb[1]=771;O=Cb[2];Cb[2]=773;P=Cb[3];Cb[3]=1;C=J.depth_enable;J.depth_enable=
!1;Q=b.viewport;T=Q.x|0;U=Q.y|0;Y="width"in Q?Q.width|0:u.framebufferWidth-T;X="height"in Q?Q.height|0:u.framebufferHeight-U;da=ab[0];ab[0]=T;oa=ab[1];ab[1]=U;ma=ab[2];ab[2]=Y;ea=ab[3];ab[3]=X;pa=J.scissor_enable;J.scissor_enable=!0;Ga=J.stencil_enable;J.stencil_enable=!1;if(ka=H.profile)Da=performance.now(),c.count++;Oa=l.call(this,u,b,g);Qa=null;Qa=(Ob=ia(Oa))?ta.createStream(Oa):ta.getElements(Oa);zb=r.elements;r.elements=Qa;Ad=r.offset;r.offset=0;xe=Qa?Qa.vertCount:-1;Me=r.count;r.count=xe;Qe=
r.primitive;r.primitive=4;Bd=b.fill;Be=K[14];K[14]=Bd;Vd=b.id;Wd=K[31];K[31]=Vd;ae=b.opacity;Yd=K[10];K[10]=ae;qd=u.pixelRatio;nd=K[34];K[34]=qd;vd=b.scale;ad=K[6];K[6]=vd;sd=b.scaleFract;Tc=K[7];K[7]=sd;Ed=b.translate;Oc=K[8];K[8]=Ed;Ic=b.translateFract;qc=K[9];K[9]=Ic;gb=m.call(this,u,b,g);hd=K[3];K[3]=gb;ga.buffer=b.positionBuffer;Hb=!1;nc=null;Xa=0;Qc=!1;lc=ac=0;Id=1;rd=0;Fc=5126;Zb=Xc=Cc=dc=0;ia(ga)?(Hb=!0,nc=W.createStream(34962,ga),Fc=nc.dtype):(nc=W.getBuffer(ga))?Fc=nc.dtype:"constant"in
ga?(Id=2,"number"===typeof ga.constant?(Cc=ga.constant,Xc=Zb=dc=0):(Cc=0<ga.constant.length?ga.constant[0]:0,Xc=1<ga.constant.length?ga.constant[1]:0,Zb=2<ga.constant.length?ga.constant[2]:0,dc=3<ga.constant.length?ga.constant[3]:0)):(nc=ia(ga.buffer)?W.createStream(34962,ga.buffer):W.getBuffer(ga.buffer),Fc="type"in ga?nb[ga.type]:nc.dtype,Qc=!!ga.normalized,lc=ga.size|0,ac=ga.offset|0,rd=ga.stride|0,Xa=ga.divisor|0);Gc=f.buffer;f.buffer=nc;Ya=f.divisor;f.divisor=Xa;Ea=f.normalized;f.normalized=
Qc;ud=f.offset;f.offset=ac;Ib=f.size;f.size=lc;Ua=f.state;f.state=Id;Vb=f.stride;f.stride=rd;cb=f.type;f.type=Fc;Dc=f.w;f.w=dc;Xb=f.x;f.x=Cc;ye=f.y;f.y=Xc;kc=f.z;f.z=Zb;ra.buffer=b.positionFractBuffer;Sb=!1;x=null;Tb=0;Pa=!1;ub=ob=0;hb=1;Ra=0;Pc=5126;oc=db=jd=Yb=0;ia(ra)?(Sb=!0,x=W.createStream(34962,ra),Pc=x.dtype):(x=W.getBuffer(ra))?Pc=x.dtype:"constant"in ra?(hb=2,"number"===typeof ra.constant?(jd=ra.constant,db=oc=Yb=0):(jd=0<ra.constant.length?ra.constant[0]:0,db=1<ra.constant.length?ra.constant[1]:
0,oc=2<ra.constant.length?ra.constant[2]:0,Yb=3<ra.constant.length?ra.constant[3]:0)):(x=ia(ra.buffer)?W.createStream(34962,ra.buffer):W.getBuffer(ra.buffer),Pc="type"in ra?nb[ra.type]:x.dtype,Pa=!!ra.normalized,ub=ra.size|0,ob=ra.offset|0,Ra=ra.stride|0,Tb=ra.divisor|0);Yc=k.buffer;k.buffer=x;ic=k.divisor;k.divisor=Tb;jb=k.normalized;k.normalized=Pa;kb=k.offset;k.offset=ob;va=k.size;k.size=ub;pb=k.state;k.state=hb;ya=k.stride;k.stride=Ra;Va=k.type;k.type=Pc;bb=k.w;k.w=Yb;Ba=k.x;k.x=jd;eb=k.y;k.y=
db;Na=k.z;k.z=oc;Bb=V.vert;V.vert=42;Ab=V.frag;V.frag=41;H.dirty=!0;e(u,b,g);u.viewportWidth=d;u.viewportHeight=v;La[0]=h;La[1]=w;La[2]=y;La[3]=D;aa[0]=I;aa[1]=G;aa[2]=A;aa[3]=z;J.blend_enable=B;na[0]=M;na[1]=F;Cb[0]=S;Cb[1]=R;Cb[2]=O;Cb[3]=P;J.depth_enable=C;ab[0]=da;ab[1]=oa;ab[2]=ma;ab[3]=ea;J.scissor_enable=pa;J.stencil_enable=Ga;ka&&(c.cpuTime+=performance.now()-Da);Ob&&ta.destroyStream(Qa);r.elements=zb;r.offset=Ad;r.count=Me;r.primitive=Qe;K[14]=Be;K[31]=Wd;K[10]=Yd;K[34]=nd;K[6]=ad;K[7]=Tc;
K[8]=Oc;K[9]=qc;K[3]=hd;Hb&&W.destroyStream(nc);f.buffer=Gc;f.divisor=Ya;f.normalized=Ea;f.offset=ud;f.size=Ib;f.state=Ua;f.stride=Vb;f.type=cb;f.w=Dc;f.x=Xb;f.y=ye;f.z=kc;Sb&&W.destroyStream(x);k.buffer=Yc;k.divisor=ic;k.normalized=jb;k.offset=kb;k.size=va;k.state=pb;k.stride=ya;k.type=Va;k.w=bb;k.x=Ba;k.y=eb;k.z=Na;V.vert=Bb;V.frag=Ab;H.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
c,d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,H,r,ta,S,R,z,ia,J,V,K,ka,aa,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra,cc,pc,jc,td,zc){var ba,N,ha,Ha,tb,cd,Nc,L,E,ja,ua,Z,fa,sa,M,F,ca,za,Aa,Ka,C,mc,Fb,qa,Gb,yb,Ye,xd,ge,je,we,ue,Od,fe,ve,yd,Dd,zd,Ad;ba=a.attributes;N=a.buffer;ha=a.context;Ha=a.current;tb=a.draw;cd=a.elements;Nc=a.extensions;L=a.framebuffer;E=a.gl;ja=a.isBufferArgs;ua=a.next;Z=a.shader;fa=a.uniforms;sa=a.vao;M=ua.blend_color;F=Ha.blend_color;ca=ua.blend_equation;
za=Ha.blend_equation;Aa=ua.blend_func;Ka=Ha.blend_func;C=ua.colorMask;mc=Ha.colorMask;Fb=ua.depth_range;qa=Ha.depth_range;Gb=ua.polygonOffset_offset;yb=Ha.polygonOffset_offset;Ye=ua.sample_coverage;xd=Ha.sample_coverage;ge=ua.scissor_box;je=Ha.scissor_box;we=ua.stencil_func;ue=Ha.stencil_func;Od=ua.stencil_opBack;fe=Ha.stencil_opBack;ve=ua.stencil_opFront;yd=Ha.stencil_opFront;Dd=ua.viewport;zd=Ha.viewport;Ad={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(b,e){var g,a,f,k,n,p;g=L.next;g!==L.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),L.cur=g);if(Ha.dirty){var q,t,d,v,l,m,h,w,y,D,I,u,G,W,A,r,H,z,J,la,M,ta,S,R,K,V,aa,Z,fa,ia,Aa,Ua,ka,cb;q=ua.dither;q!==Ha.dither&&(q?E.enable(3024):E.disable(3024),Ha.dither=q);t=ca[0];d=ca[1];if(t!==za[0]||d!==za[1])E.blendEquationSeparate(t,d),za[0]=t,za[1]=d;v=ua.depth_func;v!==Ha.depth_func&&(E.depthFunc(v),Ha.depth_func=v);l=Fb[0];m=Fb[1];if(l!==qa[0]||m!==qa[1])E.depthRange(l,
m),qa[0]=l,qa[1]=m;h=ua.depth_mask;h!==Ha.depth_mask&&(E.depthMask(h),Ha.depth_mask=h);w=C[0];y=C[1];D=C[2];I=C[3];if(w!==mc[0]||y!==mc[1]||D!==mc[2]||I!==mc[3])E.colorMask(w,y,D,I),mc[0]=w,mc[1]=y,mc[2]=D,mc[3]=I;u=ua.cull_enable;u!==Ha.cull_enable&&(u?E.enable(2884):E.disable(2884),Ha.cull_enable=u);G=ua.cull_face;G!==Ha.cull_face&&(E.cullFace(G),Ha.cull_face=G);W=ua.frontFace;W!==Ha.frontFace&&(E.frontFace(W),Ha.frontFace=W);A=ua.lineWidth;A!==Ha.lineWidth&&(E.lineWidth(A),Ha.lineWidth=A);r=ua.polygonOffset_enable;
r!==Ha.polygonOffset_enable&&(r?E.enable(32823):E.disable(32823),Ha.polygonOffset_enable=r);H=Gb[0];z=Gb[1];if(H!==yb[0]||z!==yb[1])E.polygonOffset(H,z),yb[0]=H,yb[1]=z;J=ua.sample_alpha;J!==Ha.sample_alpha&&(J?E.enable(32926):E.disable(32926),Ha.sample_alpha=J);la=ua.sample_enable;la!==Ha.sample_enable&&(la?E.enable(32928):E.disable(32928),Ha.sample_enable=la);M=Ye[0];ta=Ye[1];if(M!==xd[0]||ta!==xd[1])E.sampleCoverage(M,ta),xd[0]=M,xd[1]=ta;S=ua.stencil_mask;S!==Ha.stencil_mask&&(E.stencilMask(S),
Ha.stencil_mask=S);R=we[0];K=we[1];V=we[2];if(R!==ue[0]||K!==ue[1]||V!==ue[2])E.stencilFunc(R,K,V),ue[0]=R,ue[1]=K,ue[2]=V;aa=ve[0];Z=ve[1];fa=ve[2];ia=ve[3];if(aa!==yd[0]||Z!==yd[1]||fa!==yd[2]||ia!==yd[3])E.stencilOpSeparate(aa,Z,fa,ia),yd[0]=aa,yd[1]=Z,yd[2]=fa,yd[3]=ia;Aa=Od[0];Ua=Od[1];ka=Od[2];cb=Od[3];if(Aa!==fe[0]||Ua!==fe[1]||ka!==fe[2]||cb!==fe[3])E.stencilOpSeparate(Aa,Ua,ka,cb),fe[0]=Aa,fe[1]=Ua,fe[2]=ka,fe[3]=cb}E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);Ha.blend_enable=
!0;E.blendFuncSeparate(770,771,773,1);Ka[0]=770;Ka[1]=771;Ka[2]=773;Ka[3]=1;E.disable(2929);Ha.depth_enable=!1;E.enable(3089);Ha.scissor_enable=!0;E.disable(2960);Ha.stencil_enable=!1;if(a=Ha.profile)f=performance.now(),c.count+=e;E.useProgram(ma.program);k=Nc.angle_instanced_arrays;var Dc;sa.setVAO(null);E.uniform1i(B.location,!1);E.uniform1i(zb.location,pa.bind());Dc=tb.instances;for(n=0;n<e;++n){p=b[n];var Xb,ye,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,
Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,Dd,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,ge,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,
uf,dg,Sf,Tf;Xb=p.viewport;ye=Xb.x|0;kc=Xb.y|0;Sb="width"in Xb?Xb.width|0:ha.framebufferWidth-ye;x="height"in Xb?Xb.height|0:ha.framebufferHeight-kc;Tb=ha.viewportWidth;ha.viewportWidth=Sb;Pa=ha.viewportHeight;ha.viewportHeight=x;E.viewport(ye,kc,Sb,x);zd[0]=ye;zd[1]=kc;zd[2]=Sb;zd[3]=x;ob=p.viewport;ub=ob.x|0;hb=ob.y|0;Ra="width"in ob?ob.width|0:ha.framebufferWidth-ub;Pc="height"in ob?ob.height|0:ha.framebufferHeight-hb;E.scissor(ub,hb,Ra,Pc);je[0]=ub;je[1]=hb;je[2]=Ra;je[3]=Pc;Yb=na.call(this,ha,
p,n);jd=!1;db=null;oc=0;Yc=!1;jb=ic=0;kb=1;va=0;pb=5126;Ba=bb=Va=ya=0;ja(Yb)?(jd=!0,db=N.createStream(34962,Yb),pb=db.dtype):(db=N.getBuffer(Yb))?pb=db.dtype:"constant"in Yb?(kb=2,"number"===typeof Yb.constant?(Va=Yb.constant,bb=Ba=ya=0):(Va=0<Yb.constant.length?Yb.constant[0]:0,bb=1<Yb.constant.length?Yb.constant[1]:0,Ba=2<Yb.constant.length?Yb.constant[2]:0,ya=3<Yb.constant.length?Yb.constant[3]:0)):(db=ja(Yb.buffer)?N.createStream(34962,Yb.buffer):N.getBuffer(Yb.buffer),pb="type"in Yb?Ad[Yb.type]:
db.dtype,Yc=!!Yb.normalized,jb=Yb.size|0,ic=Yb.offset|0,va=Yb.stride|0,oc=Yb.divisor|0);eb=pc.location;Na=ba[eb];if(1===kb){Na.buffer||E.enableVertexAttribArray(eb);Bb=jb||1;if(Na.type!==pb||Na.size!==Bb||Na.buffer!==db||Na.normalized!==Yc||Na.offset!==ic||Na.stride!==va)E.bindBuffer(34962,db.buffer),E.vertexAttribPointer(eb,Bb,pb,Yc,va,ic),Na.type=pb,Na.size=Bb,Na.buffer=db,Na.normalized=Yc,Na.offset=ic,Na.stride=va;Na.divisor!==oc&&(k.vertexAttribDivisorANGLE(eb,oc),Na.divisor=oc)}else if(Na.buffer&&
(E.disableVertexAttribArray(eb),Na.buffer=null),Na.x!==Va||Na.y!==bb||Na.z!==Ba||Na.w!==ya)E.vertexAttrib4f(eb,Va,bb,Ba,ya),Na.x=Va,Na.y=bb,Na.z=Ba,Na.w=ya;Ab=Qa.call(this,ha,p,n);Ta=!1;Hc=null;Jb=0;Lb=!1;wa=Ub=0;Jd=1;Ma=0;Pb=5126;ec=xa=ib=fb=0;ja(Ab)?(Ta=!0,Hc=N.createStream(34962,Ab),Pb=Hc.dtype):(Hc=N.getBuffer(Ab))?Pb=Hc.dtype:"constant"in Ab?(Jd=2,"number"===typeof Ab.constant?(ib=Ab.constant,xa=ec=fb=0):(ib=0<Ab.constant.length?Ab.constant[0]:0,xa=1<Ab.constant.length?Ab.constant[1]:0,ec=2<
Ab.constant.length?Ab.constant[2]:0,fb=3<Ab.constant.length?Ab.constant[3]:0)):(Hc=ja(Ab.buffer)?N.createStream(34962,Ab.buffer):N.getBuffer(Ab.buffer),Pb="type"in Ab?Ad[Ab.type]:Hc.dtype,Lb=!!Ab.normalized,wa=Ab.size|0,Ub=Ab.offset|0,Ma=Ab.stride|0,Jb=Ab.divisor|0);Fa=td.location;qb=ba[Fa];if(1===Jd){qb.buffer||E.enableVertexAttribArray(Fa);rb=wa||1;if(qb.type!==Pb||qb.size!==rb||qb.buffer!==Hc||qb.normalized!==Lb||qb.offset!==Ub||qb.stride!==Ma)E.bindBuffer(34962,Hc.buffer),E.vertexAttribPointer(Fa,
rb,Pb,Lb,Ma,Ub),qb.type=Pb,qb.size=rb,qb.buffer=Hc,qb.normalized=Lb,qb.offset=Ub,qb.stride=Ma;qb.divisor!==Jb&&(k.vertexAttribDivisorANGLE(Fa,Jb),qb.divisor=Jb)}else if(qb.buffer&&(E.disableVertexAttribArray(Fa),qb.buffer=null),qb.x!==ib||qb.y!==xa||qb.z!==ec||qb.w!==fb)E.vertexAttrib4f(Fa,ib,xa,ec,fb),qb.x=ib,qb.y=xa,qb.z=ec,qb.w=fb;Za=Cb.call(this,ha,p,n);$a=!1;rc=null;dd=0;tc=!1;Mb=Wa=0;Zc=1;Ia=0;vc=5126;vb=lb=Ca=Sa=0;ja(Za)?($a=!0,rc=N.createStream(34962,Za),vc=rc.dtype):(rc=N.getBuffer(Za))?
vc=rc.dtype:"constant"in Za?(Zc=2,"number"===typeof Za.constant?(Ca=Za.constant,lb=vb=Sa=0):(Ca=0<Za.constant.length?Za.constant[0]:0,lb=1<Za.constant.length?Za.constant[1]:0,vb=2<Za.constant.length?Za.constant[2]:0,Sa=3<Za.constant.length?Za.constant[3]:0)):(rc=ja(Za.buffer)?N.createStream(34962,Za.buffer):N.getBuffer(Za.buffer),vc="type"in Za?Ad[Za.type]:rc.dtype,tc=!!Za.normalized,Mb=Za.size|0,Wa=Za.offset|0,Ia=Za.stride|0,dd=Za.divisor|0);Db=jc.location;sb=ba[Db];if(1===Zc){sb.buffer||E.enableVertexAttribArray(Db);
uc=Mb||1;if(sb.type!==vc||sb.size!==uc||sb.buffer!==rc||sb.normalized!==tc||sb.offset!==Wa||sb.stride!==Ia)E.bindBuffer(34962,rc.buffer),E.vertexAttribPointer(Db,uc,vc,tc,Ia,Wa),sb.type=vc,sb.size=uc,sb.buffer=rc,sb.normalized=tc,sb.offset=Wa,sb.stride=Ia;sb.divisor!==dd&&(k.vertexAttribDivisorANGLE(Db,dd),sb.divisor=dd)}else if(sb.buffer&&(E.disableVertexAttribArray(Db),sb.buffer=null),sb.x!==Ca||sb.y!==lb||sb.z!==vb||sb.w!==Sa)E.vertexAttrib4f(Db,Ca,lb,vb,Sa),sb.x=Ca,sb.y=lb,sb.z=vb,sb.w=Sa;wb=
ea.call(this,ha,p,n);wd=!1;sc=null;Fd=0;Jc=!1;fd=ed=0;Wb=1;bc=0;Qb=5126;xb=mb=$b=Ja=0;ja(wb)?(wd=!0,sc=N.createStream(34962,wb),Qb=sc.dtype):(sc=N.getBuffer(wb))?Qb=sc.dtype:"constant"in wb?(Wb=2,"number"===typeof wb.constant?($b=wb.constant,mb=xb=Ja=0):($b=0<wb.constant.length?wb.constant[0]:0,mb=1<wb.constant.length?wb.constant[1]:0,xb=2<wb.constant.length?wb.constant[2]:0,Ja=3<wb.constant.length?wb.constant[3]:0)):(sc=ja(wb.buffer)?N.createStream(34962,wb.buffer):N.getBuffer(wb.buffer),Qb="type"in
wb?Ad[wb.type]:sc.dtype,Jc=!!wb.normalized,fd=wb.size|0,ed=wb.offset|0,bc=wb.stride|0,Fd=wb.divisor|0);Nb=zc.location;Rb=ba[Nb];if(1===Wb){Rb.buffer||E.enableVertexAttribArray(Nb);fc=fd||1;if(Rb.type!==Qb||Rb.size!==fc||Rb.buffer!==sc||Rb.normalized!==Jc||Rb.offset!==ed||Rb.stride!==bc)E.bindBuffer(34962,sc.buffer),E.vertexAttribPointer(Nb,fc,Qb,Jc,bc,ed),Rb.type=Qb,Rb.size=fc,Rb.buffer=sc,Rb.normalized=Jc,Rb.offset=ed,Rb.stride=bc;Rb.divisor!==Fd&&(k.vertexAttribDivisorANGLE(Nb,Fd),Rb.divisor=Fd)}else if(Rb.buffer&&
(E.disableVertexAttribArray(Nb),Rb.buffer=null),Rb.x!==$b||Rb.y!==mb||Rb.z!==xb||Rb.w!==Ja)E.vertexAttrib4f(Nb,$b,mb,xb,Ja),Rb.x=$b,Rb.y=mb,Rb.z=xb,Rb.w=Ja;hc=Oa.call(this,ha,p,n);Ze=!1;xc=null;yc=0;Ac=!1;$c=Kc=0;Rc=1;Lc=0;Kb=5126;Sc=Ec=Mc=Eb=0;ja(hc)?(Ze=!0,xc=N.createStream(34962,hc),Kb=xc.dtype):(xc=N.getBuffer(hc))?Kb=xc.dtype:"constant"in hc?(Rc=2,"number"===typeof hc.constant?(Mc=hc.constant,Ec=Sc=Eb=0):(Mc=0<hc.constant.length?hc.constant[0]:0,Ec=1<hc.constant.length?hc.constant[1]:0,Sc=2<
hc.constant.length?hc.constant[2]:0,Eb=3<hc.constant.length?hc.constant[3]:0)):(xc=ja(hc.buffer)?N.createStream(34962,hc.buffer):N.getBuffer(hc.buffer),Kb="type"in hc?Ad[hc.type]:xc.dtype,Ac=!!hc.normalized,$c=hc.size|0,Kc=hc.offset|0,Lc=hc.stride|0,yc=hc.divisor|0);gc=ga.location;Vc=ba[gc];if(1===Rc){Vc.buffer||E.enableVertexAttribArray(gc);gd=$c||1;if(Vc.type!==Kb||Vc.size!==gd||Vc.buffer!==xc||Vc.normalized!==Ac||Vc.offset!==Kc||Vc.stride!==Lc)E.bindBuffer(34962,xc.buffer),E.vertexAttribPointer(gc,
gd,Kb,Ac,Lc,Kc),Vc.type=Kb,Vc.size=gd,Vc.buffer=xc,Vc.normalized=Ac,Vc.offset=Kc,Vc.stride=Lc;Vc.divisor!==yc&&(k.vertexAttribDivisorANGLE(gc,yc),Vc.divisor=yc)}else if(Vc.buffer&&(E.disableVertexAttribArray(gc),Vc.buffer=null),Vc.x!==Mc||Vc.y!==Ec||Vc.z!==Sc||Vc.w!==Eb)E.vertexAttrib4f(gc,Mc,Ec,Sc,Eb),Vc.x=Mc,Vc.y=Ec,Vc.z=Sc,Vc.w=Eb;kd=X.call(this,ha,p,n);md=!1;Wc=null;Dd=0;Zd=!1;se=ke=0;me=1;Md=0;Kd=5126;ld=od=Bc=id=0;ja(kd)?(md=!0,Wc=N.createStream(34962,kd),Kd=Wc.dtype):(Wc=N.getBuffer(kd))?Kd=
Wc.dtype:"constant"in kd?(me=2,"number"===typeof kd.constant?(Bc=kd.constant,od=ld=id=0):(Bc=0<kd.constant.length?kd.constant[0]:0,od=1<kd.constant.length?kd.constant[1]:0,ld=2<kd.constant.length?kd.constant[2]:0,id=3<kd.constant.length?kd.constant[3]:0)):(Wc=ja(kd.buffer)?N.createStream(34962,kd.buffer):N.getBuffer(kd.buffer),Kd="type"in kd?Ad[kd.type]:Wc.dtype,Zd=!!kd.normalized,se=kd.size|0,ke=kd.offset|0,Md=kd.stride|0,Dd=kd.divisor|0);bd=ab.location;pd=ba[bd];if(1===me){pd.buffer||E.enableVertexAttribArray(bd);
Gd=se||1;if(pd.type!==Kd||pd.size!==Gd||pd.buffer!==Wc||pd.normalized!==Zd||pd.offset!==ke||pd.stride!==Md)E.bindBuffer(34962,Wc.buffer),E.vertexAttribPointer(bd,Gd,Kd,Zd,Md,ke),pd.type=Kd,pd.size=Gd,pd.buffer=Wc,pd.normalized=Zd,pd.offset=ke,pd.stride=Md;pd.divisor!==Dd&&(k.vertexAttribDivisorANGLE(bd,Dd),pd.divisor=Dd)}else if(pd.buffer&&(E.disableVertexAttribArray(bd),pd.buffer=null),pd.x!==Bc||pd.y!==od||pd.z!==ld||pd.w!==id)E.vertexAttrib4f(bd,Bc,od,ld,id),pd.x=Bc,pd.y=od,pd.z=ld,pd.w=id;Hd=
P.call(this,ha,p,n);te=!1;ze=null;Ae=0;ne=!1;de=ee=0;pe=1;be=0;he=5126;le=qe=Uc=wc=0;ja(Hd)?(te=!0,ze=N.createStream(34962,Hd),he=ze.dtype):(ze=N.getBuffer(Hd))?he=ze.dtype:"constant"in Hd?(pe=2,"number"===typeof Hd.constant?(Uc=Hd.constant,qe=le=wc=0):(Uc=0<Hd.constant.length?Hd.constant[0]:0,qe=1<Hd.constant.length?Hd.constant[1]:0,le=2<Hd.constant.length?Hd.constant[2]:0,wc=3<Hd.constant.length?Hd.constant[3]:0)):(ze=ja(Hd.buffer)?N.createStream(34962,Hd.buffer):N.getBuffer(Hd.buffer),he="type"in
Hd?Ad[Hd.type]:ze.dtype,ne=!!Hd.normalized,de=Hd.size|0,ee=Hd.offset|0,be=Hd.stride|0,Ae=Hd.divisor|0);Ld=T.location;Pd=ba[Ld];if(1===pe){Pd.buffer||E.enableVertexAttribArray(Ld);Qd=de||4;if(Pd.type!==he||Pd.size!==Qd||Pd.buffer!==ze||Pd.normalized!==ne||Pd.offset!==ee||Pd.stride!==be)E.bindBuffer(34962,ze.buffer),E.vertexAttribPointer(Ld,Qd,he,ne,be,ee),Pd.type=he,Pd.size=Qd,Pd.buffer=ze,Pd.normalized=ne,Pd.offset=ee,Pd.stride=be;Pd.divisor!==Ae&&(k.vertexAttribDivisorANGLE(Ld,Ae),Pd.divisor=Ae)}else if(Pd.buffer&&
(E.disableVertexAttribArray(Ld),Pd.buffer=null),Pd.x!==Uc||Pd.y!==qe||Pd.z!==le||Pd.w!==wc)E.vertexAttrib4f(Ld,Uc,qe,le,wc),Pd.x=Uc,Pd.y=qe,Pd.z=le,Pd.w=wc;Rd=O.call(this,ha,p,n);ie=!1;ge=null;Ce=0;oe=!1;Se=Re=0;Ne=1;re=0;Fe=5126;Ge=Je=Ie=He=0;ja(Rd)?(ie=!0,ge=N.createStream(34962,Rd),Fe=ge.dtype):(ge=N.getBuffer(Rd))?Fe=ge.dtype:"constant"in Rd?(Ne=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ge=He=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?Rd.constant[1]:0,Ge=2<Rd.constant.length?
Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(ge=ja(Rd.buffer)?N.createStream(34962,Rd.buffer):N.getBuffer(Rd.buffer),Fe="type"in Rd?Ad[Rd.type]:ge.dtype,oe=!!Rd.normalized,Se=Rd.size|0,Re=Rd.offset|0,re=Rd.stride|0,Ce=Rd.divisor|0);Nd=Ob.location;Ud=ba[Nd];if(1===Ne){Ud.buffer||E.enableVertexAttribArray(Nd);$d=Se||4;if(Ud.type!==Fe||Ud.size!==$d||Ud.buffer!==ge||Ud.normalized!==oe||Ud.offset!==Re||Ud.stride!==re)E.bindBuffer(34962,ge.buffer),E.vertexAttribPointer(Nd,$d,Fe,oe,re,Re),
Ud.type=Fe,Ud.size=$d,Ud.buffer=ge,Ud.normalized=oe,Ud.offset=Re,Ud.stride=re;Ud.divisor!==Ce&&(k.vertexAttribDivisorANGLE(Nd,Ce),Ud.divisor=Ce)}else if(Ud.buffer&&(E.disableVertexAttribArray(Nd),Ud.buffer=null),Ud.x!==Ie||Ud.y!==Je||Ud.z!==Ge||Ud.w!==He)E.vertexAttrib4f(Nd,Ie,Je,Ge,He),Ud.x=Ie,Ud.y=Je,Ud.z=Ge,Ud.w=He;ce=U.call(this,ha,p,n);Ke=!1;Cd=null;Sd=0;De=!1;cf=Le=0;af=1;Te=0;Oe=5126;Ve=Ue=Xe=$e=0;ja(ce)?(Ke=!0,Cd=N.createStream(34962,ce),Oe=Cd.dtype):(Cd=N.getBuffer(ce))?Oe=Cd.dtype:"constant"in
ce?(af=2,"number"===typeof ce.constant?(Xe=ce.constant,Ue=Ve=$e=0):(Xe=0<ce.constant.length?ce.constant[0]:0,Ue=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,$e=3<ce.constant.length?ce.constant[3]:0)):(Cd=ja(ce.buffer)?N.createStream(34962,ce.buffer):N.getBuffer(ce.buffer),Oe="type"in ce?Ad[ce.type]:Cd.dtype,De=!!ce.normalized,cf=ce.size|0,Le=ce.offset|0,Te=ce.stride|0,Sd=ce.divisor|0);Td=oa.location;Xd=ba[Td];if(1===af){Xd.buffer||E.enableVertexAttribArray(Td);We=
cf||1;if(Xd.type!==Oe||Xd.size!==We||Xd.buffer!==Cd||Xd.normalized!==De||Xd.offset!==Le||Xd.stride!==Te)E.bindBuffer(34962,Cd.buffer),E.vertexAttribPointer(Td,We,Oe,De,Te,Le),Xd.type=Oe,Xd.size=We,Xd.buffer=Cd,Xd.normalized=De,Xd.offset=Le,Xd.stride=Te;Xd.divisor!==Sd&&(k.vertexAttribDivisorANGLE(Td,Sd),Xd.divisor=Sd)}else if(Xd.buffer&&(E.disableVertexAttribArray(Td),Xd.buffer=null),Xd.x!==Xe||Xd.y!==Ue||Xd.z!==Ve||Xd.w!==$e)E.vertexAttrib4f(Td,Xe,Ue,Ve,$e),Xd.x=Xe,Xd.y=Ue,Xd.z=Ve,Xd.w=$e;jf=ha.pixelRatio;
n&&nf===jf||(nf=jf,E.uniform1f(La.location,jf));ff=p.scale;kf=ff[0];mf=ff[1];n&&lf===kf&&rf===mf||(lf=kf,rf=mf,E.uniform2f(Y.location,kf,mf));of=p.scaleFract;sf=of[0];Df=of[1];n&&Cf===sf&&Pe===Df||(Cf=sf,Pe=Df,E.uniform2f(nb.location,sf,Df));Ee=p.translate;pf=Ee[0];Ef=Ee[1];n&&qf===pf&&Hf===Ef||(qf=pf,Hf=Ef,E.uniform2f(ra.location,pf,Ef));Bf=p.translateFract;Ff=Bf[0];xf=Bf[1];n&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,E.uniform2f(cc.location,Ff,xf));wf=Q.call(this,ha,p,n);zf=wf[0];Jf=wf[1];n&&Af===zf&&Kf===
Jf||(Af=zf,Kf=Jf,E.uniform2f(Ga.location,zf,Jf));Lf=p.opacity;n&&Mf===Lf||(Mf=Lf,E.uniform1f(Da.location,Lf));(tf=p.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;E.uniform1i(da.location,Rf.bind());If=p.elements;uf=null;(uf=(dg=ja(If))?cd.createStream(If):cd.getElements(If))&&E.bindBuffer(34963,uf.buffer.buffer);Sf=p.offset;if(Tf=p.count)0<Dc?uf?k.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),Dc):k.drawArraysInstancedANGLE(0,Sf,Tf,Dc):0>Dc&&(uf?E.drawElements(0,
Tf,uf.type,Sf<<(uf.type-5121>>1)):E.drawArrays(0,Sf,Tf)),ha.viewportWidth=Tb,ha.viewportHeight=Pa,jd&&N.destroyStream(db),Ta&&N.destroyStream(Hc),$a&&N.destroyStream(rc),wd&&N.destroyStream(sc),Ze&&N.destroyStream(xc),md&&N.destroyStream(Wc),te&&N.destroyStream(ze),ie&&N.destroyStream(ge),Ke&&N.destroyStream(Cd),Rf.unbind(),dg&&cd.destroyStream(uf)}pa.unbind();Ha.dirty=!0;sa.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(a){var n,p,t,v,y,D,u,W,r,H,z,J,la,M,ta,S,R,O,K,P,Q,V,U,aa,Z,
fa,ia,X,ma,na,Aa,ea,pa,ka,Ya,Ea,Oa,Ib,Ua,Vb,cb,Qa,Xb,Cb,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Dd,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,ge,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re;n=L.next;n!==L.cur&&(n?E.bindFramebuffer(36160,
n.framebuffer):E.bindFramebuffer(36160,null),L.cur=n);if(Ha.dirty){var Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf;Fe=ua.dither;Fe!==Ha.dither&&(Fe?E.enable(3024):E.disable(3024),Ha.dither=Fe);He=ca[0];Ie=ca[1];if(He!==za[0]||Ie!==za[1])E.blendEquationSeparate(He,Ie),za[0]=He,za[1]=Ie;Je=ua.depth_func;Je!==Ha.depth_func&&(E.depthFunc(Je),Ha.depth_func=Je);Ge=Fb[0];Nd=Fb[1];if(Ge!==qa[0]||Nd!==qa[1])E.depthRange(Ge,Nd),qa[0]=Ge,qa[1]=Nd;Ud=
ua.depth_mask;Ud!==Ha.depth_mask&&(E.depthMask(Ud),Ha.depth_mask=Ud);$d=C[0];ce=C[1];Ke=C[2];Cd=C[3];if($d!==mc[0]||ce!==mc[1]||Ke!==mc[2]||Cd!==mc[3])E.colorMask($d,ce,Ke,Cd),mc[0]=$d,mc[1]=ce,mc[2]=Ke,mc[3]=Cd;Sd=ua.cull_enable;Sd!==Ha.cull_enable&&(Sd?E.enable(2884):E.disable(2884),Ha.cull_enable=Sd);De=ua.cull_face;De!==Ha.cull_face&&(E.cullFace(De),Ha.cull_face=De);Le=ua.frontFace;Le!==Ha.frontFace&&(E.frontFace(Le),Ha.frontFace=Le);cf=ua.lineWidth;cf!==Ha.lineWidth&&(E.lineWidth(cf),Ha.lineWidth=
cf);af=ua.polygonOffset_enable;af!==Ha.polygonOffset_enable&&(af?E.enable(32823):E.disable(32823),Ha.polygonOffset_enable=af);Te=Gb[0];Oe=Gb[1];if(Te!==yb[0]||Oe!==yb[1])E.polygonOffset(Te,Oe),yb[0]=Te,yb[1]=Oe;$e=ua.sample_alpha;$e!==Ha.sample_alpha&&($e?E.enable(32926):E.disable(32926),Ha.sample_alpha=$e);Xe=ua.sample_enable;Xe!==Ha.sample_enable&&(Xe?E.enable(32928):E.disable(32928),Ha.sample_enable=Xe);Ue=Ye[0];Ve=Ye[1];if(Ue!==xd[0]||Ve!==xd[1])E.sampleCoverage(Ue,Ve),xd[0]=Ue,xd[1]=Ve;Td=ua.stencil_mask;
Td!==Ha.stencil_mask&&(E.stencilMask(Td),Ha.stencil_mask=Td);Xd=we[0];We=we[1];jf=we[2];if(Xd!==ue[0]||We!==ue[1]||jf!==ue[2])E.stencilFunc(Xd,We,jf),ue[0]=Xd,ue[1]=We,ue[2]=jf;nf=ve[0];ff=ve[1];kf=ve[2];lf=ve[3];if(nf!==yd[0]||ff!==yd[1]||kf!==yd[2]||lf!==yd[3])E.stencilOpSeparate(nf,ff,kf,lf),yd[0]=nf,yd[1]=ff,yd[2]=kf,yd[3]=lf;mf=Od[0];rf=Od[1];of=Od[2];sf=Od[3];if(mf!==fe[0]||rf!==fe[1]||of!==fe[2]||sf!==fe[3])E.stencilOpSeparate(mf,rf,of,sf),fe[0]=mf,fe[1]=rf,fe[2]=of,fe[3]=sf}p=a.viewport;t=
p.x|0;v=p.y|0;y="width"in p?p.width|0:ha.framebufferWidth-t;D="height"in p?p.height|0:ha.framebufferHeight-v;u=ha.viewportWidth;ha.viewportWidth=y;W=ha.viewportHeight;ha.viewportHeight=D;E.viewport(t,v,y,D);zd[0]=t;zd[1]=v;zd[2]=y;zd[3]=D;E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);Ha.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);Ka[0]=770;Ka[1]=771;Ka[2]=773;Ka[3]=1;E.disable(2929);Ha.depth_enable=!1;r=a.viewport;H=r.x|0;z=r.y|0;J="width"in r?r.width|0:ha.framebufferWidth-
H;la="height"in r?r.height|0:ha.framebufferHeight-z;E.scissor(H,z,J,la);je[0]=H;je[1]=z;je[2]=J;je[3]=la;E.enable(3089);Ha.scissor_enable=!0;E.disable(2960);Ha.stencil_enable=!1;if(M=Ha.profile)ta=performance.now(),c.count++;E.useProgram(d.program);S=Nc.angle_instanced_arrays;sa.setVAO(null);R=h.call(this,ha,a,0);O=!1;K=null;P=0;Q=!1;U=V=0;aa=1;Z=0;fa=5126;na=ma=X=ia=0;ja(R)?(O=!0,K=N.createStream(34962,R),fa=K.dtype):(K=N.getBuffer(R))?fa=K.dtype:"constant"in R?(aa=2,"number"===typeof R.constant?
(X=R.constant,ma=na=ia=0):(X=0<R.constant.length?R.constant[0]:0,ma=1<R.constant.length?R.constant[1]:0,na=2<R.constant.length?R.constant[2]:0,ia=3<R.constant.length?R.constant[3]:0)):(K=ja(R.buffer)?N.createStream(34962,R.buffer):N.getBuffer(R.buffer),fa="type"in R?Ad[R.type]:K.dtype,Q=!!R.normalized,U=R.size|0,V=R.offset|0,Z=R.stride|0,P=R.divisor|0);Aa=pc.location;ea=ba[Aa];if(1===aa){ea.buffer||E.enableVertexAttribArray(Aa);pa=U||1;if(ea.type!==fa||ea.size!==pa||ea.buffer!==K||ea.normalized!==
Q||ea.offset!==V||ea.stride!==Z)E.bindBuffer(34962,K.buffer),E.vertexAttribPointer(Aa,pa,fa,Q,Z,V),ea.type=fa,ea.size=pa,ea.buffer=K,ea.normalized=Q,ea.offset=V,ea.stride=Z;ea.divisor!==P&&(S.vertexAttribDivisorANGLE(Aa,P),ea.divisor=P)}else if(ea.buffer&&(E.disableVertexAttribArray(Aa),ea.buffer=null),ea.x!==X||ea.y!==ma||ea.z!==na||ea.w!==ia)E.vertexAttrib4f(Aa,X,ma,na,ia),ea.x=X,ea.y=ma,ea.z=na,ea.w=ia;ka=l.call(this,ha,a,0);Ya=!1;Ea=null;Oa=0;Ib=!1;Vb=Ua=0;cb=1;Qa=0;Xb=5126;x=Sb=kc=Cb=0;ja(ka)?
(Ya=!0,Ea=N.createStream(34962,ka),Xb=Ea.dtype):(Ea=N.getBuffer(ka))?Xb=Ea.dtype:"constant"in ka?(cb=2,"number"===typeof ka.constant?(kc=ka.constant,Sb=x=Cb=0):(kc=0<ka.constant.length?ka.constant[0]:0,Sb=1<ka.constant.length?ka.constant[1]:0,x=2<ka.constant.length?ka.constant[2]:0,Cb=3<ka.constant.length?ka.constant[3]:0)):(Ea=ja(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),Xb="type"in ka?Ad[ka.type]:Ea.dtype,Ib=!!ka.normalized,Vb=ka.size|0,Ua=ka.offset|0,Qa=ka.stride|0,Oa=ka.divisor|
0);Tb=td.location;Pa=ba[Tb];if(1===cb){Pa.buffer||E.enableVertexAttribArray(Tb);ob=Vb||1;if(Pa.type!==Xb||Pa.size!==ob||Pa.buffer!==Ea||Pa.normalized!==Ib||Pa.offset!==Ua||Pa.stride!==Qa)E.bindBuffer(34962,Ea.buffer),E.vertexAttribPointer(Tb,ob,Xb,Ib,Qa,Ua),Pa.type=Xb,Pa.size=ob,Pa.buffer=Ea,Pa.normalized=Ib,Pa.offset=Ua,Pa.stride=Qa;Pa.divisor!==Oa&&(S.vertexAttribDivisorANGLE(Tb,Oa),Pa.divisor=Oa)}else if(Pa.buffer&&(E.disableVertexAttribArray(Tb),Pa.buffer=null),Pa.x!==kc||Pa.y!==Sb||Pa.z!==x||
Pa.w!==Cb)E.vertexAttrib4f(Tb,kc,Sb,x,Cb),Pa.x=kc,Pa.y=Sb,Pa.z=x,Pa.w=Cb;ub=m.call(this,ha,a,0);hb=!1;Ra=null;Pc=0;Yb=!1;db=jd=0;oc=1;Yc=0;ic=5126;pb=va=kb=jb=0;ja(ub)?(hb=!0,Ra=N.createStream(34962,ub),ic=Ra.dtype):(Ra=N.getBuffer(ub))?ic=Ra.dtype:"constant"in ub?(oc=2,"number"===typeof ub.constant?(kb=ub.constant,va=pb=jb=0):(kb=0<ub.constant.length?ub.constant[0]:0,va=1<ub.constant.length?ub.constant[1]:0,pb=2<ub.constant.length?ub.constant[2]:0,jb=3<ub.constant.length?ub.constant[3]:0)):(Ra=ja(ub.buffer)?
N.createStream(34962,ub.buffer):N.getBuffer(ub.buffer),ic="type"in ub?Ad[ub.type]:Ra.dtype,Yb=!!ub.normalized,db=ub.size|0,jd=ub.offset|0,Yc=ub.stride|0,Pc=ub.divisor|0);ya=jc.location;Va=ba[ya];if(1===oc){Va.buffer||E.enableVertexAttribArray(ya);bb=db||1;if(Va.type!==ic||Va.size!==bb||Va.buffer!==Ra||Va.normalized!==Yb||Va.offset!==jd||Va.stride!==Yc)E.bindBuffer(34962,Ra.buffer),E.vertexAttribPointer(ya,bb,ic,Yb,Yc,jd),Va.type=ic,Va.size=bb,Va.buffer=Ra,Va.normalized=Yb,Va.offset=jd,Va.stride=Yc;
Va.divisor!==Pc&&(S.vertexAttribDivisorANGLE(ya,Pc),Va.divisor=Pc)}else if(Va.buffer&&(E.disableVertexAttribArray(ya),Va.buffer=null),Va.x!==kb||Va.y!==va||Va.z!==pb||Va.w!==jb)E.vertexAttrib4f(ya,kb,va,pb,jb),Va.x=kb,Va.y=va,Va.z=pb,Va.w=jb;Ba=f.call(this,ha,a,0);eb=!1;Na=null;Bb=0;Ab=!1;Hc=Ta=0;Jb=1;Lb=0;Ub=5126;Pb=Ma=Jd=wa=0;ja(Ba)?(eb=!0,Na=N.createStream(34962,Ba),Ub=Na.dtype):(Na=N.getBuffer(Ba))?Ub=Na.dtype:"constant"in Ba?(Jb=2,"number"===typeof Ba.constant?(Jd=Ba.constant,Ma=Pb=wa=0):(Jd=
0<Ba.constant.length?Ba.constant[0]:0,Ma=1<Ba.constant.length?Ba.constant[1]:0,Pb=2<Ba.constant.length?Ba.constant[2]:0,wa=3<Ba.constant.length?Ba.constant[3]:0)):(Na=ja(Ba.buffer)?N.createStream(34962,Ba.buffer):N.getBuffer(Ba.buffer),Ub="type"in Ba?Ad[Ba.type]:Na.dtype,Ab=!!Ba.normalized,Hc=Ba.size|0,Ta=Ba.offset|0,Lb=Ba.stride|0,Bb=Ba.divisor|0);fb=zc.location;ib=ba[fb];if(1===Jb){ib.buffer||E.enableVertexAttribArray(fb);xa=Hc||1;if(ib.type!==Ub||ib.size!==xa||ib.buffer!==Na||ib.normalized!==Ab||
ib.offset!==Ta||ib.stride!==Lb)E.bindBuffer(34962,Na.buffer),E.vertexAttribPointer(fb,xa,Ub,Ab,Lb,Ta),ib.type=Ub,ib.size=xa,ib.buffer=Na,ib.normalized=Ab,ib.offset=Ta,ib.stride=Lb;ib.divisor!==Bb&&(S.vertexAttribDivisorANGLE(fb,Bb),ib.divisor=Bb)}else if(ib.buffer&&(E.disableVertexAttribArray(fb),ib.buffer=null),ib.x!==Jd||ib.y!==Ma||ib.z!==Pb||ib.w!==wa)E.vertexAttrib4f(fb,Jd,Ma,Pb,wa),ib.x=Jd,ib.y=Ma,ib.z=Pb,ib.w=wa;ec=k.call(this,ha,a,0);Fa=!1;qb=null;rb=0;Za=!1;rc=$a=0;dd=1;tc=0;Wa=5126;vc=Ia=
Zc=Mb=0;ja(ec)?(Fa=!0,qb=N.createStream(34962,ec),Wa=qb.dtype):(qb=N.getBuffer(ec))?Wa=qb.dtype:"constant"in ec?(dd=2,"number"===typeof ec.constant?(Zc=ec.constant,Ia=vc=Mb=0):(Zc=0<ec.constant.length?ec.constant[0]:0,Ia=1<ec.constant.length?ec.constant[1]:0,vc=2<ec.constant.length?ec.constant[2]:0,Mb=3<ec.constant.length?ec.constant[3]:0)):(qb=ja(ec.buffer)?N.createStream(34962,ec.buffer):N.getBuffer(ec.buffer),Wa="type"in ec?Ad[ec.type]:qb.dtype,Za=!!ec.normalized,rc=ec.size|0,$a=ec.offset|0,tc=
ec.stride|0,rb=ec.divisor|0);Sa=ga.location;Ca=ba[Sa];if(1===dd){Ca.buffer||E.enableVertexAttribArray(Sa);lb=rc||1;if(Ca.type!==Wa||Ca.size!==lb||Ca.buffer!==qb||Ca.normalized!==Za||Ca.offset!==$a||Ca.stride!==tc)E.bindBuffer(34962,qb.buffer),E.vertexAttribPointer(Sa,lb,Wa,Za,tc,$a),Ca.type=Wa,Ca.size=lb,Ca.buffer=qb,Ca.normalized=Za,Ca.offset=$a,Ca.stride=tc;Ca.divisor!==rb&&(S.vertexAttribDivisorANGLE(Sa,rb),Ca.divisor=rb)}else if(Ca.buffer&&(E.disableVertexAttribArray(Sa),Ca.buffer=null),Ca.x!==
Zc||Ca.y!==Ia||Ca.z!==vc||Ca.w!==Mb)E.vertexAttrib4f(Sa,Zc,Ia,vc,Mb),Ca.x=Zc,Ca.y=Ia,Ca.z=vc,Ca.w=Mb;vb=b.call(this,ha,a,0);Db=!1;sb=null;uc=0;wb=!1;sc=wd=0;Fd=1;Jc=0;ed=5126;Qb=bc=Wb=fd=0;ja(vb)?(Db=!0,sb=N.createStream(34962,vb),ed=sb.dtype):(sb=N.getBuffer(vb))?ed=sb.dtype:"constant"in vb?(Fd=2,"number"===typeof vb.constant?(Wb=vb.constant,bc=Qb=fd=0):(Wb=0<vb.constant.length?vb.constant[0]:0,bc=1<vb.constant.length?vb.constant[1]:0,Qb=2<vb.constant.length?vb.constant[2]:0,fd=3<vb.constant.length?
vb.constant[3]:0)):(sb=ja(vb.buffer)?N.createStream(34962,vb.buffer):N.getBuffer(vb.buffer),ed="type"in vb?Ad[vb.type]:sb.dtype,wb=!!vb.normalized,sc=vb.size|0,wd=vb.offset|0,Jc=vb.stride|0,uc=vb.divisor|0);Ja=ab.location;$b=ba[Ja];if(1===Fd){$b.buffer||E.enableVertexAttribArray(Ja);mb=sc||1;if($b.type!==ed||$b.size!==mb||$b.buffer!==sb||$b.normalized!==wb||$b.offset!==wd||$b.stride!==Jc)E.bindBuffer(34962,sb.buffer),E.vertexAttribPointer(Ja,mb,ed,wb,Jc,wd),$b.type=ed,$b.size=mb,$b.buffer=sb,$b.normalized=
wb,$b.offset=wd,$b.stride=Jc;$b.divisor!==uc&&(S.vertexAttribDivisorANGLE(Ja,uc),$b.divisor=uc)}else if($b.buffer&&(E.disableVertexAttribArray(Ja),$b.buffer=null),$b.x!==Wb||$b.y!==bc||$b.z!==Qb||$b.w!==fd)E.vertexAttrib4f(Ja,Wb,bc,Qb,fd),$b.x=Wb,$b.y=bc,$b.z=Qb,$b.w=fd;xb=q.call(this,ha,a,0);Nb=!1;Rb=null;fc=0;hc=!1;xc=Dd=0;yc=1;Ac=0;Kc=5126;Kb=Lc=Rc=$c=0;ja(xb)?(Nb=!0,Rb=N.createStream(34962,xb),Kc=Rb.dtype):(Rb=N.getBuffer(xb))?Kc=Rb.dtype:"constant"in xb?(yc=2,"number"===typeof xb.constant?(Rc=
xb.constant,Lc=Kb=$c=0):(Rc=0<xb.constant.length?xb.constant[0]:0,Lc=1<xb.constant.length?xb.constant[1]:0,Kb=2<xb.constant.length?xb.constant[2]:0,$c=3<xb.constant.length?xb.constant[3]:0)):(Rb=ja(xb.buffer)?N.createStream(34962,xb.buffer):N.getBuffer(xb.buffer),Kc="type"in xb?Ad[xb.type]:Rb.dtype,hc=!!xb.normalized,xc=xb.size|0,Dd=xb.offset|0,Ac=xb.stride|0,fc=xb.divisor|0);Eb=T.location;Mc=ba[Eb];if(1===yc){Mc.buffer||E.enableVertexAttribArray(Eb);Ec=xc||4;if(Mc.type!==Kc||Mc.size!==Ec||Mc.buffer!==
Rb||Mc.normalized!==hc||Mc.offset!==Dd||Mc.stride!==Ac)E.bindBuffer(34962,Rb.buffer),E.vertexAttribPointer(Eb,Ec,Kc,hc,Ac,Dd),Mc.type=Kc,Mc.size=Ec,Mc.buffer=Rb,Mc.normalized=hc,Mc.offset=Dd,Mc.stride=Ac;Mc.divisor!==fc&&(S.vertexAttribDivisorANGLE(Eb,fc),Mc.divisor=fc)}else if(Mc.buffer&&(E.disableVertexAttribArray(Eb),Mc.buffer=null),Mc.x!==Rc||Mc.y!==Lc||Mc.z!==Kb||Mc.w!==$c)E.vertexAttrib4f(Eb,Rc,Lc,Kb,$c),Mc.x=Rc,Mc.y=Lc,Mc.z=Kb,Mc.w=$c;Sc=I.call(this,ha,a,0);gc=!1;Vc=null;gd=0;kd=!1;Wc=md=0;
ge=1;Zd=0;ke=5126;Kd=Md=me=se=0;ja(Sc)?(gc=!0,Vc=N.createStream(34962,Sc),ke=Vc.dtype):(Vc=N.getBuffer(Sc))?ke=Vc.dtype:"constant"in Sc?(ge=2,"number"===typeof Sc.constant?(me=Sc.constant,Md=Kd=se=0):(me=0<Sc.constant.length?Sc.constant[0]:0,Md=1<Sc.constant.length?Sc.constant[1]:0,Kd=2<Sc.constant.length?Sc.constant[2]:0,se=3<Sc.constant.length?Sc.constant[3]:0)):(Vc=ja(Sc.buffer)?N.createStream(34962,Sc.buffer):N.getBuffer(Sc.buffer),ke="type"in Sc?Ad[Sc.type]:Vc.dtype,kd=!!Sc.normalized,Wc=Sc.size|
0,md=Sc.offset|0,Zd=Sc.stride|0,gd=Sc.divisor|0);id=Ob.location;Bc=ba[id];if(1===ge){Bc.buffer||E.enableVertexAttribArray(id);od=Wc||4;if(Bc.type!==ke||Bc.size!==od||Bc.buffer!==Vc||Bc.normalized!==kd||Bc.offset!==md||Bc.stride!==Zd)E.bindBuffer(34962,Vc.buffer),E.vertexAttribPointer(id,od,ke,kd,Zd,md),Bc.type=ke,Bc.size=od,Bc.buffer=Vc,Bc.normalized=kd,Bc.offset=md,Bc.stride=Zd;Bc.divisor!==gd&&(S.vertexAttribDivisorANGLE(id,gd),Bc.divisor=gd)}else if(Bc.buffer&&(E.disableVertexAttribArray(id),Bc.buffer=
null),Bc.x!==me||Bc.y!==Md||Bc.z!==Kd||Bc.w!==se)E.vertexAttrib4f(id,me,Md,Kd,se),Bc.x=me,Bc.y=Md,Bc.z=Kd,Bc.w=se;ld=w.call(this,ha,a,0);bd=!1;pd=null;Gd=0;Hd=!1;ze=te=0;Ae=1;ne=0;ee=5126;he=be=pe=de=0;ja(ld)?(bd=!0,pd=N.createStream(34962,ld),ee=pd.dtype):(pd=N.getBuffer(ld))?ee=pd.dtype:"constant"in ld?(Ae=2,"number"===typeof ld.constant?(pe=ld.constant,be=he=de=0):(pe=0<ld.constant.length?ld.constant[0]:0,be=1<ld.constant.length?ld.constant[1]:0,he=2<ld.constant.length?ld.constant[2]:0,de=3<ld.constant.length?
ld.constant[3]:0)):(pd=ja(ld.buffer)?N.createStream(34962,ld.buffer):N.getBuffer(ld.buffer),ee="type"in ld?Ad[ld.type]:pd.dtype,Hd=!!ld.normalized,ze=ld.size|0,te=ld.offset|0,ne=ld.stride|0,Gd=ld.divisor|0);wc=oa.location;Uc=ba[wc];if(1===Ae){Uc.buffer||E.enableVertexAttribArray(wc);qe=ze||1;if(Uc.type!==ee||Uc.size!==qe||Uc.buffer!==pd||Uc.normalized!==Hd||Uc.offset!==te||Uc.stride!==ne)E.bindBuffer(34962,pd.buffer),E.vertexAttribPointer(wc,qe,ee,Hd,ne,te),Uc.type=ee,Uc.size=qe,Uc.buffer=pd,Uc.normalized=
Hd,Uc.offset=te,Uc.stride=ne;Uc.divisor!==Gd&&(S.vertexAttribDivisorANGLE(wc,Gd),Uc.divisor=Gd)}else if(Uc.buffer&&(E.disableVertexAttribArray(wc),Uc.buffer=null),Uc.x!==pe||Uc.y!==be||Uc.z!==he||Uc.w!==de)E.vertexAttrib4f(wc,pe,be,he,de),Uc.x=pe,Uc.y=be,Uc.z=he,Uc.w=de;E.uniform1i(B.location,!1);E.uniform1f(La.location,ha.pixelRatio);le=a.scale;E.uniform2f(Y.location,le[0],le[1]);Ld=a.scaleFract;E.uniform2f(nb.location,Ld[0],Ld[1]);Pd=a.translate;E.uniform2f(ra.location,Pd[0],Pd[1]);Qd=a.translateFract;
E.uniform2f(cc.location,Qd[0],Qd[1]);Rd=e.call(this,ha,a,0);E.uniform2f(Ga.location,Rd[0],Rd[1]);E.uniform1f(Da.location,a.opacity);E.uniform1i(zb.location,g.bind());(ie=a.markerTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);vf=ie._texture;E.uniform1i(da.location,vf.bind());Ce=a.elements;oe=null;(oe=(Re=ja(Ce))?cd.createStream(Ce):cd.getElements(Ce))&&E.bindBuffer(34963,oe.buffer.buffer);Se=a.offset;if(Ne=a.count)re=tb.instances,0<re?oe?S.drawElementsInstancedANGLE(0,Ne,oe.type,Se<<(oe.type-
5121>>1),re):S.drawArraysInstancedANGLE(0,Se,Ne,re):0>re&&(oe?E.drawElements(0,Ne,oe.type,Se<<(oe.type-5121>>1)):E.drawArrays(0,Se,Ne)),Ha.dirty=!0,sa.setVAO(null),ha.viewportWidth=u,ha.viewportHeight=W,M&&(c.cpuTime+=performance.now()-ta),O&&N.destroyStream(K),Ya&&N.destroyStream(Ea),hb&&N.destroyStream(Ra),eb&&N.destroyStream(Na),Fa&&N.destroyStream(qb),Db&&N.destroyStream(sb),Nb&&N.destroyStream(Rb),gc&&N.destroyStream(Vc),bd&&N.destroyStream(pd),g.unbind(),vf.unbind(),Re&&cd.destroyStream(oe)},
scope:function(b,e,g){var a,f,k,q,d,l,m,h,w,I,G,A,C,B,F,E,L,O,P,Q,ba,T,ca,U,Y,X,da,ea,ga,oa,qa,ma,na,sa,ra,Ka,pa,za,Ga,La,Da,Oa,yb,Fb,x,Qa,Pa,ob,ub,hb,Ra,ab,Gb,zc,db,nb,td,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,mc,Jb,Lb,Ub,wa,Ob,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,Cb,zb,tc,Wa,Mb,cc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,pc,sc,jc,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Nc,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,je,zd,Od,xd,we,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,yd,fe,ue,ve,ee,de,pe,be,he,wc,Uc,qe,
le,Ld,Pd,Qd,Rd,ie,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=b.viewport;f=a.x|0;k=a.y|0;q="width"in a?a.width|0:ha.framebufferWidth-f;d="height"in a?a.height|0:ha.framebufferHeight-
k;l=ha.viewportWidth;ha.viewportWidth=q;m=ha.viewportHeight;ha.viewportHeight=d;h=Dd[0];Dd[0]=f;w=Dd[1];Dd[1]=k;I=Dd[2];Dd[2]=q;G=Dd[3];Dd[3]=d;A=M[0];M[0]=0;C=M[1];M[1]=0;B=M[2];M[2]=0;F=M[3];M[3]=1;E=ua.blend_enable;ua.blend_enable=!0;L=Aa[0];Aa[0]=770;O=Aa[1];Aa[1]=771;P=Aa[2];Aa[2]=773;Q=Aa[3];Aa[3]=1;ba=ua.depth_enable;ua.depth_enable=!1;T=b.viewport;ca=T.x|0;U=T.y|0;Y="width"in T?T.width|0:ha.framebufferWidth-ca;X="height"in T?T.height|0:ha.framebufferHeight-U;da=ge[0];ge[0]=ca;ea=ge[1];ge[1]=
U;ga=ge[2];ge[2]=Y;oa=ge[3];ge[3]=X;qa=ua.scissor_enable;ua.scissor_enable=!0;ma=ua.stencil_enable;ua.stencil_enable=!1;if(na=Ha.profile)sa=performance.now(),c.count++;ra=b.elements;Ka=null;Ka=(pa=ja(ra))?cd.createStream(ra):cd.getElements(ra);za=tb.elements;tb.elements=Ka;Ga=b.offset;La=tb.offset;tb.offset=Ga;Da=b.count;Oa=tb.count;tb.count=Da;yb=tb.primitive;tb.primitive=0;Fb=fa[45];fa[45]=!1;x=b.markerTexture;Qa=fa[48];fa[48]=x;Pa=b.opacity;ob=fa[10];fa[10]=Pa;ub=p.call(this,ha,b,g);hb=fa[46];
fa[46]=ub;Ra=fa[47];fa[47]=n;ab=ha.pixelRatio;Gb=fa[34];fa[34]=ab;zc=b.scale;db=fa[6];fa[6]=zc;nb=b.scaleFract;td=fa[7];fa[7]=nb;ic=b.translate;jb=fa[8];fa[8]=ic;kb=b.translateFract;va=fa[9];fa[9]=kb;pb=t.call(this,ha,b,g);ya=!1;Va=null;bb=0;Ba=!1;Na=eb=0;Bb=1;Ab=0;Ta=5126;Ub=Lb=Jb=mc=0;ja(pb)?(ya=!0,Va=N.createStream(34962,pb),Ta=Va.dtype):(Va=N.getBuffer(pb))?Ta=Va.dtype:"constant"in pb?(Bb=2,"number"===typeof pb.constant?(Jb=pb.constant,Lb=Ub=mc=0):(Jb=0<pb.constant.length?pb.constant[0]:0,Lb=
1<pb.constant.length?pb.constant[1]:0,Ub=2<pb.constant.length?pb.constant[2]:0,mc=3<pb.constant.length?pb.constant[3]:0)):(Va=ja(pb.buffer)?N.createStream(34962,pb.buffer):N.getBuffer(pb.buffer),Ta="type"in pb?Ad[pb.type]:Va.dtype,Ba=!!pb.normalized,Na=pb.size|0,eb=pb.offset|0,Ab=pb.stride|0,bb=pb.divisor|0);wa=v.buffer;v.buffer=Va;Ob=v.divisor;v.divisor=bb;Ma=v.normalized;v.normalized=Ba;Pb=v.offset;v.offset=eb;fb=v.size;v.size=Na;ib=v.state;v.state=Bb;xa=v.stride;v.stride=Ab;ec=v.type;v.type=Ta;
Fa=v.w;v.w=mc;qb=v.x;v.x=Jb;rb=v.y;v.y=Lb;Za=v.z;v.z=Ub;$a=D.call(this,ha,b,g);Cb=!1;zb=null;tc=0;Wa=!1;cc=Mb=0;Ia=1;vc=0;Sa=5126;Db=vb=lb=Ca=0;ja($a)?(Cb=!0,zb=N.createStream(34962,$a),Sa=zb.dtype):(zb=N.getBuffer($a))?Sa=zb.dtype:"constant"in $a?(Ia=2,"number"===typeof $a.constant?(lb=$a.constant,vb=Db=Ca=0):(lb=0<$a.constant.length?$a.constant[0]:0,vb=1<$a.constant.length?$a.constant[1]:0,Db=2<$a.constant.length?$a.constant[2]:0,Ca=3<$a.constant.length?$a.constant[3]:0)):(zb=ja($a.buffer)?N.createStream(34962,
$a.buffer):N.getBuffer($a.buffer),Sa="type"in $a?Ad[$a.type]:zb.dtype,Wa=!!$a.normalized,cc=$a.size|0,Mb=$a.offset|0,vc=$a.stride|0,tc=$a.divisor|0);sb=y.buffer;y.buffer=zb;uc=y.divisor;y.divisor=tc;wb=y.normalized;y.normalized=Wa;pc=y.offset;y.offset=Mb;sc=y.size;y.size=cc;jc=y.state;y.state=Ia;Jc=y.stride;y.stride=vc;ed=y.type;y.type=Sa;fd=y.w;y.w=Ca;Wb=y.x;y.x=lb;bc=y.y;y.y=vb;Qb=y.z;y.z=Db;Ja=W.call(this,ha,b,g);$b=!1;mb=null;xb=0;Nb=!1;fc=Rb=0;hc=1;Nc=0;xc=5126;$c=Kc=Ac=yc=0;ja(Ja)?($b=!0,mb=
N.createStream(34962,Ja),xc=mb.dtype):(mb=N.getBuffer(Ja))?xc=mb.dtype:"constant"in Ja?(hc=2,"number"===typeof Ja.constant?(Ac=Ja.constant,Kc=$c=yc=0):(Ac=0<Ja.constant.length?Ja.constant[0]:0,Kc=1<Ja.constant.length?Ja.constant[1]:0,$c=2<Ja.constant.length?Ja.constant[2]:0,yc=3<Ja.constant.length?Ja.constant[3]:0)):(mb=ja(Ja.buffer)?N.createStream(34962,Ja.buffer):N.getBuffer(Ja.buffer),xc="type"in Ja?Ad[Ja.type]:mb.dtype,Nb=!!Ja.normalized,fc=Ja.size|0,Rb=Ja.offset|0,Nc=Ja.stride|0,xb=Ja.divisor|
0);Rc=u.buffer;u.buffer=mb;Lc=u.divisor;u.divisor=xb;Kb=u.normalized;u.normalized=Nb;Eb=u.offset;u.offset=Rb;Mc=u.size;u.size=fc;Ec=u.state;u.state=hc;Sc=u.stride;u.stride=Nc;gc=u.type;u.type=xc;Vc=u.w;u.w=yc;gd=u.x;u.x=Ac;kd=u.y;u.y=Kc;md=u.z;u.z=$c;Wc=H.call(this,ha,b,g);je=!1;zd=null;Od=0;xd=!1;Md=we=0;Kd=1;id=0;Bc=5126;pd=bd=ld=od=0;ja(Wc)?(je=!0,zd=N.createStream(34962,Wc),Bc=zd.dtype):(zd=N.getBuffer(Wc))?Bc=zd.dtype:"constant"in Wc?(Kd=2,"number"===typeof Wc.constant?(ld=Wc.constant,bd=pd=
od=0):(ld=0<Wc.constant.length?Wc.constant[0]:0,bd=1<Wc.constant.length?Wc.constant[1]:0,pd=2<Wc.constant.length?Wc.constant[2]:0,od=3<Wc.constant.length?Wc.constant[3]:0)):(zd=ja(Wc.buffer)?N.createStream(34962,Wc.buffer):N.getBuffer(Wc.buffer),Bc="type"in Wc?Ad[Wc.type]:zd.dtype,xd=!!Wc.normalized,Md=Wc.size|0,we=Wc.offset|0,id=Wc.stride|0,Od=Wc.divisor|0);Gd=r.buffer;r.buffer=zd;Hd=r.divisor;r.divisor=Od;yd=r.normalized;r.normalized=xd;fe=r.offset;r.offset=we;ue=r.size;r.size=Md;ve=r.state;r.state=
Kd;ee=r.stride;r.stride=id;de=r.type;r.type=Bc;pe=r.w;r.w=od;be=r.x;r.x=ld;he=r.y;r.y=bd;wc=r.z;r.z=pd;Uc=ta.call(this,ha,b,g);qe=!1;le=null;Ld=0;Pd=!1;Rd=Qd=0;ie=1;Ye=0;Ce=5126;Ne=Se=Re=oe=0;ja(Uc)?(qe=!0,le=N.createStream(34962,Uc),Ce=le.dtype):(le=N.getBuffer(Uc))?Ce=le.dtype:"constant"in Uc?(ie=2,"number"===typeof Uc.constant?(Re=Uc.constant,Se=Ne=oe=0):(Re=0<Uc.constant.length?Uc.constant[0]:0,Se=1<Uc.constant.length?Uc.constant[1]:0,Ne=2<Uc.constant.length?Uc.constant[2]:0,oe=3<Uc.constant.length?
Uc.constant[3]:0)):(le=ja(Uc.buffer)?N.createStream(34962,Uc.buffer):N.getBuffer(Uc.buffer),Ce="type"in Uc?Ad[Uc.type]:le.dtype,Pd=!!Uc.normalized,Rd=Uc.size|0,Qd=Uc.offset|0,Ye=Uc.stride|0,Ld=Uc.divisor|0);re=S.buffer;S.buffer=le;Fe=S.divisor;S.divisor=Ld;He=S.normalized;S.normalized=Pd;Ie=S.offset;S.offset=Qd;Je=S.size;S.size=Rd;Ge=S.state;S.state=ie;Nd=S.stride;S.stride=Ye;Ud=S.type;S.type=Ce;$d=S.w;S.w=oe;ce=S.x;S.x=Re;Ke=S.y;S.y=Se;Cd=S.z;S.z=Ne;Sd=R.call(this,ha,b,g);De=!1;Le=null;cf=0;af=!1;
Oe=Te=0;$e=1;Xe=0;Ue=5126;We=Xd=Td=Ve=0;ja(Sd)?(De=!0,Le=N.createStream(34962,Sd),Ue=Le.dtype):(Le=N.getBuffer(Sd))?Ue=Le.dtype:"constant"in Sd?($e=2,"number"===typeof Sd.constant?(Td=Sd.constant,Xd=We=Ve=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,Xd=1<Sd.constant.length?Sd.constant[1]:0,We=2<Sd.constant.length?Sd.constant[2]:0,Ve=3<Sd.constant.length?Sd.constant[3]:0)):(Le=ja(Sd.buffer)?N.createStream(34962,Sd.buffer):N.getBuffer(Sd.buffer),Ue="type"in Sd?Ad[Sd.type]:Le.dtype,af=!!Sd.normalized,
Oe=Sd.size|0,Te=Sd.offset|0,Xe=Sd.stride|0,cf=Sd.divisor|0);jf=z.buffer;z.buffer=Le;nf=z.divisor;z.divisor=cf;ff=z.normalized;z.normalized=af;kf=z.offset;z.offset=Te;lf=z.size;z.size=Oe;mf=z.state;z.state=$e;rf=z.stride;z.stride=Xe;of=z.type;z.type=Ue;sf=z.w;z.w=Ve;Cf=z.x;z.x=Td;Df=z.y;z.y=Xd;Pe=z.z;z.z=We;Ee=ia.call(this,ha,b,g);pf=!1;qf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ja(Ee)?(pf=!0,qf=N.createStream(34962,Ee),yf=qf.dtype):(qf=N.getBuffer(Ee))?yf=qf.dtype:"constant"in Ee?
(Gf=2,"number"===typeof Ee.constant?(zf=Ee.constant,Af=Jf=wf=0):(zf=0<Ee.constant.length?Ee.constant[0]:0,Af=1<Ee.constant.length?Ee.constant[1]:0,Jf=2<Ee.constant.length?Ee.constant[2]:0,wf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=ja(Ee.buffer)?N.createStream(34962,Ee.buffer):N.getBuffer(Ee.buffer),yf="type"in Ee?Ad[Ee.type]:qf.dtype,Hf=!!Ee.normalized,Ff=Ee.size|0,Bf=Ee.offset|0,xf=Ee.stride|0,Ef=Ee.divisor|0);Kf=J.buffer;J.buffer=qf;Lf=J.divisor;J.divisor=Ef;Mf=J.normalized;J.normalized=Hf;
tf=J.offset;J.offset=Bf;Rf=J.size;J.size=Ff;If=J.state;J.state=Gf;uf=J.stride;J.stride=xf;dg=J.type;J.type=yf;Sf=J.w;J.w=wf;Tf=J.x;J.x=zf;qg=J.y;J.y=Af;gf=J.z;J.z=Jf;df=V.call(this,ha,b,g);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ja(df)?(Nf=!0,Of=N.createStream(34962,df),Uf=Of.dtype):(Of=N.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:
0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=ja(df.buffer)?N.createStream(34962,df.buffer):N.getBuffer(df.buffer),Uf="type"in df?Ad[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=K.buffer;K.buffer=Of;sg=K.divisor;K.divisor=eg;tg=K.normalized;K.normalized=fg;ug=K.offset;K.offset=gg;vg=K.size;K.size=hg;wg=K.state;K.state=ig;xg=K.stride;K.stride=Wf;yg=K.type;K.type=Uf;zg=K.w;K.w=Xf;Ag=K.x;K.x=Yf;Bg=K.y;
K.y=Zf;hf=K.z;K.z=jg;ef=ka.call(this,ha,b,g);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ja(ef)?(Pf=!0,Qf=N.createStream(34962,ef),Vf=Qf.dtype):(Qf=N.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=ja(ef.buffer)?N.createStream(34962,ef.buffer):N.getBuffer(ef.buffer),
Vf="type"in ef?Ad[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|0,$f=ef.stride|0,kg=ef.divisor|0);Cg=aa.buffer;aa.buffer=Qf;Dg=aa.divisor;aa.divisor=kg;Eg=aa.normalized;aa.normalized=lg;Fg=aa.offset;aa.offset=mg;Gg=aa.size;aa.size=ng;Hg=aa.state;aa.state=og;Ig=aa.stride;aa.stride=$f;Jg=aa.type;aa.type=Vf;Kg=aa.w;aa.w=ag;Lg=aa.x;aa.x=bg;Mg=aa.y;aa.y=cg;Ng=aa.z;aa.z=pg;Og=Z.vert;Z.vert=44;Pg=Z.frag;Z.frag=43;Ha.dirty=!0;e(ha,b,g);ha.viewportWidth=l;ha.viewportHeight=m;Dd[0]=h;Dd[1]=
w;Dd[2]=I;Dd[3]=G;M[0]=A;M[1]=C;M[2]=B;M[3]=F;ua.blend_enable=E;Aa[0]=L;Aa[1]=O;Aa[2]=P;Aa[3]=Q;ua.depth_enable=ba;ge[0]=da;ge[1]=ea;ge[2]=ga;ge[3]=oa;ua.scissor_enable=qa;ua.stencil_enable=ma;na&&(c.cpuTime+=performance.now()-sa);pa&&cd.destroyStream(Ka);tb.elements=za;tb.offset=La;tb.count=Oa;tb.primitive=yb;fa[45]=Fb;fa[48]=Qa;fa[10]=ob;fa[46]=hb;fa[47]=Ra;fa[34]=Gb;fa[6]=db;fa[7]=td;fa[8]=jb;fa[9]=va;ya&&N.destroyStream(Va);v.buffer=wa;v.divisor=Ob;v.normalized=Ma;v.offset=Pb;v.size=fb;v.state=
ib;v.stride=xa;v.type=ec;v.w=Fa;v.x=qb;v.y=rb;v.z=Za;Cb&&N.destroyStream(zb);y.buffer=sb;y.divisor=uc;y.normalized=wb;y.offset=pc;y.size=sc;y.state=jc;y.stride=Jc;y.type=ed;y.w=fd;y.x=Wb;y.y=bc;y.z=Qb;$b&&N.destroyStream(mb);u.buffer=Rc;u.divisor=Lc;u.normalized=Kb;u.offset=Eb;u.size=Mc;u.state=Ec;u.stride=Sc;u.type=gc;u.w=Vc;u.x=gd;u.y=kd;u.z=md;je&&N.destroyStream(zd);r.buffer=Gd;r.divisor=Hd;r.normalized=yd;r.offset=fe;r.size=ue;r.state=ve;r.stride=ee;r.type=de;r.w=pe;r.x=be;r.y=he;r.z=wc;qe&&
N.destroyStream(le);S.buffer=re;S.divisor=Fe;S.normalized=He;S.offset=Ie;S.size=Je;S.state=Ge;S.stride=Nd;S.type=Ud;S.w=$d;S.x=ce;S.y=Ke;S.z=Cd;De&&N.destroyStream(Le);z.buffer=jf;z.divisor=nf;z.normalized=ff;z.offset=kf;z.size=lf;z.state=mf;z.stride=rf;z.type=of;z.w=sf;z.x=Cf;z.y=Df;z.z=Pe;pf&&N.destroyStream(qf);J.buffer=Kf;J.divisor=Lf;J.normalized=Mf;J.offset=tf;J.size=Rf;J.state=If;J.stride=uf;J.type=dg;J.w=Sf;J.x=Tf;J.y=qg;J.z=gf;Nf&&N.destroyStream(Of);K.buffer=rg;K.divisor=sg;K.normalized=
tg;K.offset=ug;K.size=vg;K.state=wg;K.stride=xg;K.type=yg;K.w=zg;K.x=Ag;K.y=Bg;K.z=hf;Pf&&N.destroyStream(Qf);aa.buffer=Cg;aa.divisor=Dg;aa.normalized=Eg;aa.offset=Fg;aa.size=Gg;aa.state=Hg;aa.stride=Ig;aa.type=Jg;aa.w=Kg;aa.x=Lg;aa.y=Mg;aa.z=Ng;Z.vert=Og;Z.frag=Pg;Ha.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,
y,W,u,r,la,ta,S,R,z,ia,J,V,K,ka,aa,ma,na,Qa,Cb,ea,Oa,X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra,cc,pc,jc,td){var zc,ba,N,ha,Ha,tb,cd,Nc,L,E,ja,ua,Z,fa,sa,M,F,ca,za,Aa,Ka,C,mc,Fb,qa,Gb,yb,Ye,xd,ge,je,we,ue,Od,fe,ve,yd,Dd,zd;zc=a.attributes;ba=a.buffer;N=a.context;ha=a.current;Ha=a.draw;tb=a.elements;cd=a.extensions;Nc=a.framebuffer;L=a.gl;E=a.isBufferArgs;ja=a.next;ua=a.shader;Z=a.uniforms;fa=a.vao;sa=ja.blend_color;M=ha.blend_color;F=ja.blend_equation;ca=ha.blend_equation;za=ja.blend_func;
Aa=ha.blend_func;Ka=ja.colorMask;C=ha.colorMask;mc=ja.depth_range;Fb=ha.depth_range;qa=ja.polygonOffset_offset;Gb=ha.polygonOffset_offset;yb=ja.sample_coverage;Ye=ha.sample_coverage;xd=ja.scissor_box;ge=ha.scissor_box;je=ja.stencil_func;we=ha.stencil_func;ue=ja.stencil_opBack;Od=ha.stencil_opBack;fe=ja.stencil_opFront;ve=ha.stencil_opFront;yd=ja.viewport;Dd=ha.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,e){var g,
a,f,k,n,p;g=Nc.next;g!==Nc.cur&&(g?L.bindFramebuffer(36160,g.framebuffer):L.bindFramebuffer(36160,null),Nc.cur=g);if(ha.dirty){var q,t,d,v,l,m,h,w,y,D,I,u,G,W,A,r,H,z,J,la,R,ta,S,K,V,Z,aa,ia,ua,sa,ka,za,Ua,Vb;q=ja.dither;q!==ha.dither&&(q?L.enable(3024):L.disable(3024),ha.dither=q);t=F[0];d=F[1];if(t!==ca[0]||d!==ca[1])L.blendEquationSeparate(t,d),ca[0]=t,ca[1]=d;v=ja.depth_func;v!==ha.depth_func&&(L.depthFunc(v),ha.depth_func=v);l=mc[0];m=mc[1];if(l!==Fb[0]||m!==Fb[1])L.depthRange(l,m),Fb[0]=l,Fb[1]=
m;h=ja.depth_mask;h!==ha.depth_mask&&(L.depthMask(h),ha.depth_mask=h);w=Ka[0];y=Ka[1];D=Ka[2];I=Ka[3];if(w!==C[0]||y!==C[1]||D!==C[2]||I!==C[3])L.colorMask(w,y,D,I),C[0]=w,C[1]=y,C[2]=D,C[3]=I;u=ja.cull_enable;u!==ha.cull_enable&&(u?L.enable(2884):L.disable(2884),ha.cull_enable=u);G=ja.cull_face;G!==ha.cull_face&&(L.cullFace(G),ha.cull_face=G);W=ja.frontFace;W!==ha.frontFace&&(L.frontFace(W),ha.frontFace=W);A=ja.lineWidth;A!==ha.lineWidth&&(L.lineWidth(A),ha.lineWidth=A);r=ja.polygonOffset_enable;
r!==ha.polygonOffset_enable&&(r?L.enable(32823):L.disable(32823),ha.polygonOffset_enable=r);H=qa[0];z=qa[1];if(H!==Gb[0]||z!==Gb[1])L.polygonOffset(H,z),Gb[0]=H,Gb[1]=z;J=ja.sample_alpha;J!==ha.sample_alpha&&(J?L.enable(32926):L.disable(32926),ha.sample_alpha=J);la=ja.sample_enable;la!==ha.sample_enable&&(la?L.enable(32928):L.disable(32928),ha.sample_enable=la);R=yb[0];ta=yb[1];if(R!==Ye[0]||ta!==Ye[1])L.sampleCoverage(R,ta),Ye[0]=R,Ye[1]=ta;S=ja.stencil_mask;S!==ha.stencil_mask&&(L.stencilMask(S),
ha.stencil_mask=S);K=je[0];V=je[1];Z=je[2];if(K!==we[0]||V!==we[1]||Z!==we[2])L.stencilFunc(K,V,Z),we[0]=K,we[1]=V,we[2]=Z;aa=fe[0];ia=fe[1];ua=fe[2];sa=fe[3];if(aa!==ve[0]||ia!==ve[1]||ua!==ve[2]||sa!==ve[3])L.stencilOpSeparate(aa,ia,ua,sa),ve[0]=aa,ve[1]=ia,ve[2]=ua,ve[3]=sa;ka=ue[0];za=ue[1];Ua=ue[2];Vb=ue[3];if(ka!==Od[0]||za!==Od[1]||Ua!==Od[2]||Vb!==Od[3])L.stencilOpSeparate(ka,za,Ua,Vb),Od[0]=ka,Od[1]=za,Od[2]=Ua,Od[3]=Vb}L.blendColor(0,0,0,1);M[0]=0;M[1]=0;M[2]=0;M[3]=1;L.enable(3042);ha.blend_enable=
!0;L.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;L.disable(2929);ha.depth_enable=!1;L.enable(3089);ha.scissor_enable=!0;L.disable(2960);ha.stencil_enable=!1;if(a=ha.profile)f=performance.now(),c.count+=e;L.useProgram(ma.program);k=cd.angle_instanced_arrays;var cb;fa.setVAO(null);L.uniform1i(B.location,!1);L.uniform1i(Ga.location,pa.bind());cb=Ha.instances;for(n=0;n<e;++n){p=b[n];var Dc,Xb,xd,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,
Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,yd,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,
If,uf;Dc=p.viewport;Xb=Dc.x|0;xd=Dc.y|0;kc="width"in Dc?Dc.width|0:N.framebufferWidth-Xb;Sb="height"in Dc?Dc.height|0:N.framebufferHeight-xd;x=N.viewportWidth;N.viewportWidth=kc;Tb=N.viewportHeight;N.viewportHeight=Sb;L.viewport(Xb,xd,kc,Sb);Dd[0]=Xb;Dd[1]=xd;Dd[2]=kc;Dd[3]=Sb;Pa=p.viewport;ob=Pa.x|0;ub=Pa.y|0;hb="width"in Pa?Pa.width|0:N.framebufferWidth-ob;Ra="height"in Pa?Pa.height|0:N.framebufferHeight-ub;L.scissor(ob,ub,hb,Ra);ge[0]=ob;ge[1]=ub;ge[2]=hb;ge[3]=Ra;Pc=na.call(this,N,p,n);Yb=!1;
jd=null;db=0;oc=!1;ic=Yc=0;jb=1;kb=0;va=5126;bb=Va=ya=pb=0;E(Pc)?(Yb=!0,jd=ba.createStream(34962,Pc),va=jd.dtype):(jd=ba.getBuffer(Pc))?va=jd.dtype:"constant"in Pc?(jb=2,"number"===typeof Pc.constant?(ya=Pc.constant,Va=bb=pb=0):(ya=0<Pc.constant.length?Pc.constant[0]:0,Va=1<Pc.constant.length?Pc.constant[1]:0,bb=2<Pc.constant.length?Pc.constant[2]:0,pb=3<Pc.constant.length?Pc.constant[3]:0)):(jd=E(Pc.buffer)?ba.createStream(34962,Pc.buffer):ba.getBuffer(Pc.buffer),va="type"in Pc?zd[Pc.type]:jd.dtype,
oc=!!Pc.normalized,ic=Pc.size|0,Yc=Pc.offset|0,kb=Pc.stride|0,db=Pc.divisor|0);Ba=cc.location;eb=zc[Ba];if(1===jb){eb.buffer||L.enableVertexAttribArray(Ba);Na=ic||1;if(eb.type!==va||eb.size!==Na||eb.buffer!==jd||eb.normalized!==oc||eb.offset!==Yc||eb.stride!==kb)L.bindBuffer(34962,jd.buffer),L.vertexAttribPointer(Ba,Na,va,oc,kb,Yc),eb.type=va,eb.size=Na,eb.buffer=jd,eb.normalized=oc,eb.offset=Yc,eb.stride=kb;eb.divisor!==db&&(k.vertexAttribDivisorANGLE(Ba,db),eb.divisor=db)}else if(eb.buffer&&(L.disableVertexAttribArray(Ba),
eb.buffer=null),eb.x!==ya||eb.y!==Va||eb.z!==bb||eb.w!==pb)L.vertexAttrib4f(Ba,ya,Va,bb,pb),eb.x=ya,eb.y=Va,eb.z=bb,eb.w=pb;Bb=Qa.call(this,N,p,n);Ab=!1;Ta=null;Hc=0;Jb=!1;Ub=Lb=0;wa=1;Jd=0;Ma=5126;xa=ib=fb=Pb=0;E(Bb)?(Ab=!0,Ta=ba.createStream(34962,Bb),Ma=Ta.dtype):(Ta=ba.getBuffer(Bb))?Ma=Ta.dtype:"constant"in Bb?(wa=2,"number"===typeof Bb.constant?(fb=Bb.constant,ib=xa=Pb=0):(fb=0<Bb.constant.length?Bb.constant[0]:0,ib=1<Bb.constant.length?Bb.constant[1]:0,xa=2<Bb.constant.length?Bb.constant[2]:
0,Pb=3<Bb.constant.length?Bb.constant[3]:0)):(Ta=E(Bb.buffer)?ba.createStream(34962,Bb.buffer):ba.getBuffer(Bb.buffer),Ma="type"in Bb?zd[Bb.type]:Ta.dtype,Jb=!!Bb.normalized,Ub=Bb.size|0,Lb=Bb.offset|0,Jd=Bb.stride|0,Hc=Bb.divisor|0);ec=jc.location;Fa=zc[ec];if(1===wa){Fa.buffer||L.enableVertexAttribArray(ec);qb=Ub||1;if(Fa.type!==Ma||Fa.size!==qb||Fa.buffer!==Ta||Fa.normalized!==Jb||Fa.offset!==Lb||Fa.stride!==Jd)L.bindBuffer(34962,Ta.buffer),L.vertexAttribPointer(ec,qb,Ma,Jb,Jd,Lb),Fa.type=Ma,Fa.size=
qb,Fa.buffer=Ta,Fa.normalized=Jb,Fa.offset=Lb,Fa.stride=Jd;Fa.divisor!==Hc&&(k.vertexAttribDivisorANGLE(ec,Hc),Fa.divisor=Hc)}else if(Fa.buffer&&(L.disableVertexAttribArray(ec),Fa.buffer=null),Fa.x!==fb||Fa.y!==ib||Fa.z!==xa||Fa.w!==Pb)L.vertexAttrib4f(ec,fb,ib,xa,Pb),Fa.x=fb,Fa.y=ib,Fa.z=xa,Fa.w=Pb;rb=Cb.call(this,N,p,n);Za=!1;$a=null;rc=0;dd=!1;Wa=tc=0;Mb=1;Zc=0;Ia=5126;lb=Ca=Sa=vc=0;E(rb)?(Za=!0,$a=ba.createStream(34962,rb),Ia=$a.dtype):($a=ba.getBuffer(rb))?Ia=$a.dtype:"constant"in rb?(Mb=2,"number"===
typeof rb.constant?(Sa=rb.constant,Ca=lb=vc=0):(Sa=0<rb.constant.length?rb.constant[0]:0,Ca=1<rb.constant.length?rb.constant[1]:0,lb=2<rb.constant.length?rb.constant[2]:0,vc=3<rb.constant.length?rb.constant[3]:0)):($a=E(rb.buffer)?ba.createStream(34962,rb.buffer):ba.getBuffer(rb.buffer),Ia="type"in rb?zd[rb.type]:$a.dtype,dd=!!rb.normalized,Wa=rb.size|0,tc=rb.offset|0,Zc=rb.stride|0,rc=rb.divisor|0);vb=pc.location;Db=zc[vb];if(1===Mb){Db.buffer||L.enableVertexAttribArray(vb);sb=Wa||1;if(Db.type!==
Ia||Db.size!==sb||Db.buffer!==$a||Db.normalized!==dd||Db.offset!==tc||Db.stride!==Zc)L.bindBuffer(34962,$a.buffer),L.vertexAttribPointer(vb,sb,Ia,dd,Zc,tc),Db.type=Ia,Db.size=sb,Db.buffer=$a,Db.normalized=dd,Db.offset=tc,Db.stride=Zc;Db.divisor!==rc&&(k.vertexAttribDivisorANGLE(vb,rc),Db.divisor=rc)}else if(Db.buffer&&(L.disableVertexAttribArray(vb),Db.buffer=null),Db.x!==Sa||Db.y!==Ca||Db.z!==lb||Db.w!==vc)L.vertexAttrib4f(vb,Sa,Ca,lb,vc),Db.x=Sa,Db.y=Ca,Db.z=lb,Db.w=vc;uc=ea.call(this,N,p,n);wb=
!1;wd=null;sc=0;Fd=!1;ed=Jc=0;fd=1;Wb=0;bc=5126;mb=$b=Ja=Qb=0;E(uc)?(wb=!0,wd=ba.createStream(34962,uc),bc=wd.dtype):(wd=ba.getBuffer(uc))?bc=wd.dtype:"constant"in uc?(fd=2,"number"===typeof uc.constant?(Ja=uc.constant,$b=mb=Qb=0):(Ja=0<uc.constant.length?uc.constant[0]:0,$b=1<uc.constant.length?uc.constant[1]:0,mb=2<uc.constant.length?uc.constant[2]:0,Qb=3<uc.constant.length?uc.constant[3]:0)):(wd=E(uc.buffer)?ba.createStream(34962,uc.buffer):ba.getBuffer(uc.buffer),bc="type"in uc?zd[uc.type]:wd.dtype,
Fd=!!uc.normalized,ed=uc.size|0,Jc=uc.offset|0,Wb=uc.stride|0,sc=uc.divisor|0);xb=td.location;Nb=zc[xb];if(1===fd){Nb.buffer||L.enableVertexAttribArray(xb);Rb=ed||1;if(Nb.type!==bc||Nb.size!==Rb||Nb.buffer!==wd||Nb.normalized!==Fd||Nb.offset!==Jc||Nb.stride!==Wb)L.bindBuffer(34962,wd.buffer),L.vertexAttribPointer(xb,Rb,bc,Fd,Wb,Jc),Nb.type=bc,Nb.size=Rb,Nb.buffer=wd,Nb.normalized=Fd,Nb.offset=Jc,Nb.stride=Wb;Nb.divisor!==sc&&(k.vertexAttribDivisorANGLE(xb,sc),Nb.divisor=sc)}else if(Nb.buffer&&(L.disableVertexAttribArray(xb),
Nb.buffer=null),Nb.x!==Ja||Nb.y!==$b||Nb.z!==mb||Nb.w!==Qb)L.vertexAttrib4f(xb,Ja,$b,mb,Qb),Nb.x=Ja,Nb.y=$b,Nb.z=mb,Nb.w=Qb;fc=Oa.call(this,N,p,n);hc=!1;yd=null;xc=0;yc=!1;Kc=Ac=0;$c=1;Rc=0;Lc=5126;Ec=Mc=Eb=Kb=0;E(fc)?(hc=!0,yd=ba.createStream(34962,fc),Lc=yd.dtype):(yd=ba.getBuffer(fc))?Lc=yd.dtype:"constant"in fc?($c=2,"number"===typeof fc.constant?(Eb=fc.constant,Mc=Ec=Kb=0):(Eb=0<fc.constant.length?fc.constant[0]:0,Mc=1<fc.constant.length?fc.constant[1]:0,Ec=2<fc.constant.length?fc.constant[2]:
0,Kb=3<fc.constant.length?fc.constant[3]:0)):(yd=E(fc.buffer)?ba.createStream(34962,fc.buffer):ba.getBuffer(fc.buffer),Lc="type"in fc?zd[fc.type]:yd.dtype,yc=!!fc.normalized,Kc=fc.size|0,Ac=fc.offset|0,Rc=fc.stride|0,xc=fc.divisor|0);Sc=nb.location;gc=zc[Sc];if(1===$c){gc.buffer||L.enableVertexAttribArray(Sc);Vc=Kc||1;if(gc.type!==Lc||gc.size!==Vc||gc.buffer!==yd||gc.normalized!==yc||gc.offset!==Ac||gc.stride!==Rc)L.bindBuffer(34962,yd.buffer),L.vertexAttribPointer(Sc,Vc,Lc,yc,Rc,Ac),gc.type=Lc,gc.size=
Vc,gc.buffer=yd,gc.normalized=yc,gc.offset=Ac,gc.stride=Rc;gc.divisor!==xc&&(k.vertexAttribDivisorANGLE(Sc,xc),gc.divisor=xc)}else if(gc.buffer&&(L.disableVertexAttribArray(Sc),gc.buffer=null),gc.x!==Eb||gc.y!==Mc||gc.z!==Ec||gc.w!==Kb)L.vertexAttrib4f(Sc,Eb,Mc,Ec,Kb),gc.x=Eb,gc.y=Mc,gc.z=Ec,gc.w=Kb;gd=X.call(this,N,p,n);kd=!1;md=null;Wc=0;bf=!1;ke=Zd=0;se=1;me=0;Md=5126;od=Bc=id=Kd=0;E(gd)?(kd=!0,md=ba.createStream(34962,gd),Md=md.dtype):(md=ba.getBuffer(gd))?Md=md.dtype:"constant"in gd?(se=2,"number"===
typeof gd.constant?(id=gd.constant,Bc=od=Kd=0):(id=0<gd.constant.length?gd.constant[0]:0,Bc=1<gd.constant.length?gd.constant[1]:0,od=2<gd.constant.length?gd.constant[2]:0,Kd=3<gd.constant.length?gd.constant[3]:0)):(md=E(gd.buffer)?ba.createStream(34962,gd.buffer):ba.getBuffer(gd.buffer),Md="type"in gd?zd[gd.type]:md.dtype,bf=!!gd.normalized,ke=gd.size|0,Zd=gd.offset|0,me=gd.stride|0,Wc=gd.divisor|0);ld=ab.location;bd=zc[ld];if(1===se){bd.buffer||L.enableVertexAttribArray(ld);pd=ke||1;if(bd.type!==
Md||bd.size!==pd||bd.buffer!==md||bd.normalized!==bf||bd.offset!==Zd||bd.stride!==me)L.bindBuffer(34962,md.buffer),L.vertexAttribPointer(ld,pd,Md,bf,me,Zd),bd.type=Md,bd.size=pd,bd.buffer=md,bd.normalized=bf,bd.offset=Zd,bd.stride=me;bd.divisor!==Wc&&(k.vertexAttribDivisorANGLE(ld,Wc),bd.divisor=Wc)}else if(bd.buffer&&(L.disableVertexAttribArray(ld),bd.buffer=null),bd.x!==id||bd.y!==Bc||bd.z!==od||bd.w!==Kd)L.vertexAttrib4f(ld,id,Bc,od,Kd),bd.x=id,bd.y=Bc,bd.z=od,bd.w=Kd;Gd=P.call(this,N,p,n);Hd=
!1;te=null;ze=0;Ae=!1;ee=ne=0;de=1;pe=0;be=5126;qe=Uc=wc=he=0;E(Gd)?(Hd=!0,te=ba.createStream(34962,Gd),be=te.dtype):(te=ba.getBuffer(Gd))?be=te.dtype:"constant"in Gd?(de=2,"number"===typeof Gd.constant?(wc=Gd.constant,Uc=qe=he=0):(wc=0<Gd.constant.length?Gd.constant[0]:0,Uc=1<Gd.constant.length?Gd.constant[1]:0,qe=2<Gd.constant.length?Gd.constant[2]:0,he=3<Gd.constant.length?Gd.constant[3]:0)):(te=E(Gd.buffer)?ba.createStream(34962,Gd.buffer):ba.getBuffer(Gd.buffer),be="type"in Gd?zd[Gd.type]:te.dtype,
Ae=!!Gd.normalized,ee=Gd.size|0,ne=Gd.offset|0,pe=Gd.stride|0,ze=Gd.divisor|0);le=T.location;Ld=zc[le];if(1===de){Ld.buffer||L.enableVertexAttribArray(le);Pd=ee||4;if(Ld.type!==be||Ld.size!==Pd||Ld.buffer!==te||Ld.normalized!==Ae||Ld.offset!==ne||Ld.stride!==pe)L.bindBuffer(34962,te.buffer),L.vertexAttribPointer(le,Pd,be,Ae,pe,ne),Ld.type=be,Ld.size=Pd,Ld.buffer=te,Ld.normalized=Ae,Ld.offset=ne,Ld.stride=pe;Ld.divisor!==ze&&(k.vertexAttribDivisorANGLE(le,ze),Ld.divisor=ze)}else if(Ld.buffer&&(L.disableVertexAttribArray(le),
Ld.buffer=null),Ld.x!==wc||Ld.y!==Uc||Ld.z!==qe||Ld.w!==he)L.vertexAttrib4f(le,wc,Uc,qe,he),Ld.x=wc,Ld.y=Uc,Ld.z=qe,Ld.w=he;Qd=O.call(this,N,p,n);Rd=!1;ie=null;vf=0;Ce=!1;Re=oe=0;Se=1;Ne=0;re=5126;Je=Ie=He=Fe=0;E(Qd)?(Rd=!0,ie=ba.createStream(34962,Qd),re=ie.dtype):(ie=ba.getBuffer(Qd))?re=ie.dtype:"constant"in Qd?(Se=2,"number"===typeof Qd.constant?(He=Qd.constant,Ie=Je=Fe=0):(He=0<Qd.constant.length?Qd.constant[0]:0,Ie=1<Qd.constant.length?Qd.constant[1]:0,Je=2<Qd.constant.length?Qd.constant[2]:
0,Fe=3<Qd.constant.length?Qd.constant[3]:0)):(ie=E(Qd.buffer)?ba.createStream(34962,Qd.buffer):ba.getBuffer(Qd.buffer),re="type"in Qd?zd[Qd.type]:ie.dtype,Ce=!!Qd.normalized,Re=Qd.size|0,oe=Qd.offset|0,Ne=Qd.stride|0,vf=Qd.divisor|0);Ge=Ob.location;Nd=zc[Ge];if(1===Se){Nd.buffer||L.enableVertexAttribArray(Ge);Ud=Re||4;if(Nd.type!==re||Nd.size!==Ud||Nd.buffer!==ie||Nd.normalized!==Ce||Nd.offset!==oe||Nd.stride!==Ne)L.bindBuffer(34962,ie.buffer),L.vertexAttribPointer(Ge,Ud,re,Ce,Ne,oe),Nd.type=re,Nd.size=
Ud,Nd.buffer=ie,Nd.normalized=Ce,Nd.offset=oe,Nd.stride=Ne;Nd.divisor!==vf&&(k.vertexAttribDivisorANGLE(Ge,vf),Nd.divisor=vf)}else if(Nd.buffer&&(L.disableVertexAttribArray(Ge),Nd.buffer=null),Nd.x!==He||Nd.y!==Ie||Nd.z!==Je||Nd.w!==Fe)L.vertexAttrib4f(Ge,He,Ie,Je,Fe),Nd.x=He,Nd.y=Ie,Nd.z=Je,Nd.w=Fe;$d=U.call(this,N,p,n);ce=!1;Ke=null;Cd=0;Sd=!1;Le=De=0;cf=1;af=0;Te=5126;Ue=Xe=$e=Oe=0;E($d)?(ce=!0,Ke=ba.createStream(34962,$d),Te=Ke.dtype):(Ke=ba.getBuffer($d))?Te=Ke.dtype:"constant"in $d?(cf=2,"number"===
typeof $d.constant?($e=$d.constant,Xe=Ue=Oe=0):($e=0<$d.constant.length?$d.constant[0]:0,Xe=1<$d.constant.length?$d.constant[1]:0,Ue=2<$d.constant.length?$d.constant[2]:0,Oe=3<$d.constant.length?$d.constant[3]:0)):(Ke=E($d.buffer)?ba.createStream(34962,$d.buffer):ba.getBuffer($d.buffer),Te="type"in $d?zd[$d.type]:Ke.dtype,Sd=!!$d.normalized,Le=$d.size|0,De=$d.offset|0,af=$d.stride|0,Cd=$d.divisor|0);Ve=oa.location;Td=zc[Ve];if(1===cf){Td.buffer||L.enableVertexAttribArray(Ve);Xd=Le||1;if(Td.type!==
Te||Td.size!==Xd||Td.buffer!==Ke||Td.normalized!==Sd||Td.offset!==De||Td.stride!==af)L.bindBuffer(34962,Ke.buffer),L.vertexAttribPointer(Ve,Xd,Te,Sd,af,De),Td.type=Te,Td.size=Xd,Td.buffer=Ke,Td.normalized=Sd,Td.offset=De,Td.stride=af;Td.divisor!==Cd&&(k.vertexAttribDivisorANGLE(Ve,Cd),Td.divisor=Cd)}else if(Td.buffer&&(L.disableVertexAttribArray(Ve),Td.buffer=null),Td.x!==$e||Td.y!==Xe||Td.z!==Ue||Td.w!==Oe)L.vertexAttrib4f(Ve,$e,Xe,Ue,Oe),Td.x=$e,Td.y=Xe,Td.z=Ue,Td.w=Oe;We=N.pixelRatio;n&&jf===We||
(jf=We,L.uniform1f(zb.location,We));nf=Q.call(this,N,p,n);ff=nf[0];lf=nf[1];n&&kf===ff&&mf===lf||(kf=ff,mf=lf,L.uniform2f(Da.location,ff,lf));rf=p.scale;of=rf[0];Cf=rf[1];n&&sf===of&&Df===Cf||(sf=of,Df=Cf,L.uniform2f(La.location,of,Cf));Pe=p.scaleFract;Ee=Pe[0];qf=Pe[1];n&&pf===Ee&&Ef===qf||(pf=Ee,Ef=qf,L.uniform2f(Y.location,Ee,qf));Hf=p.translate;Bf=Hf[0];Gf=Hf[1];n&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,L.uniform2f(ga.location,Bf,Gf));yf=p.translateFract;wf=yf[0];Af=yf[1];n&&zf===wf&&Jf===Af||(zf=wf,
Jf=Af,L.uniform2f(ra.location,wf,Af));Kf=p.opacity;n&&Lf===Kf||(Lf=Kf,L.uniform1f(da.location,Kf));Mf=p.elements;tf=null;(tf=(Rf=E(Mf))?tb.createStream(Mf):tb.getElements(Mf))&&L.bindBuffer(34963,tf.buffer.buffer);If=p.offset;if(uf=p.count)0<cb?tf?k.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),cb):k.drawArraysInstancedANGLE(0,If,uf,cb):0>cb&&(tf?L.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):L.drawArrays(0,If,uf)),N.viewportWidth=x,N.viewportHeight=Tb,Yb&&ba.destroyStream(jd),
Ab&&ba.destroyStream(Ta),Za&&ba.destroyStream($a),wb&&ba.destroyStream(wd),hc&&ba.destroyStream(yd),kd&&ba.destroyStream(md),Hd&&ba.destroyStream(te),Rd&&ba.destroyStream(ie),ce&&ba.destroyStream(Ke),Rf&&tb.destroyStream(tf)}pa.unbind();ha.dirty=!0;fa.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(a){var n,p,t,v,y,D,u,W,r,H,z,J,la,R,ta,S,K,O,P,Q,V,U,Z,aa,ia,X,ea,ua,ma,na,sa,ka,za,pa,Oa,Ya,Ea,Qa,Ib,Ua,Vb,cb,Cb,Xb,xd,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,
bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,yd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re;n=Nc.next;n!==Nc.cur&&(n?L.bindFramebuffer(36160,n.framebuffer):L.bindFramebuffer(36160,null),Nc.cur=n);if(ha.dirty){var Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,
Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf;Se=ja.dither;Se!==ha.dither&&(Se?L.enable(3024):L.disable(3024),ha.dither=Se);Ne=F[0];re=F[1];if(Ne!==ca[0]||re!==ca[1])L.blendEquationSeparate(Ne,re),ca[0]=Ne,ca[1]=re;Fe=ja.depth_func;Fe!==ha.depth_func&&(L.depthFunc(Fe),ha.depth_func=Fe);He=mc[0];Ie=mc[1];if(He!==Fb[0]||Ie!==Fb[1])L.depthRange(He,Ie),Fb[0]=He,Fb[1]=Ie;Je=ja.depth_mask;Je!==ha.depth_mask&&(L.depthMask(Je),ha.depth_mask=Je);Ge=Ka[0];Nd=Ka[1];Ud=Ka[2];$d=Ka[3];if(Ge!==C[0]||
Nd!==C[1]||Ud!==C[2]||$d!==C[3])L.colorMask(Ge,Nd,Ud,$d),C[0]=Ge,C[1]=Nd,C[2]=Ud,C[3]=$d;ce=ja.cull_enable;ce!==ha.cull_enable&&(ce?L.enable(2884):L.disable(2884),ha.cull_enable=ce);Ke=ja.cull_face;Ke!==ha.cull_face&&(L.cullFace(Ke),ha.cull_face=Ke);Cd=ja.frontFace;Cd!==ha.frontFace&&(L.frontFace(Cd),ha.frontFace=Cd);Sd=ja.lineWidth;Sd!==ha.lineWidth&&(L.lineWidth(Sd),ha.lineWidth=Sd);De=ja.polygonOffset_enable;De!==ha.polygonOffset_enable&&(De?L.enable(32823):L.disable(32823),ha.polygonOffset_enable=
De);Le=qa[0];cf=qa[1];if(Le!==Gb[0]||cf!==Gb[1])L.polygonOffset(Le,cf),Gb[0]=Le,Gb[1]=cf;af=ja.sample_alpha;af!==ha.sample_alpha&&(af?L.enable(32926):L.disable(32926),ha.sample_alpha=af);Te=ja.sample_enable;Te!==ha.sample_enable&&(Te?L.enable(32928):L.disable(32928),ha.sample_enable=Te);Oe=yb[0];$e=yb[1];if(Oe!==Ye[0]||$e!==Ye[1])L.sampleCoverage(Oe,$e),Ye[0]=Oe,Ye[1]=$e;Xe=ja.stencil_mask;Xe!==ha.stencil_mask&&(L.stencilMask(Xe),ha.stencil_mask=Xe);Ue=je[0];Ve=je[1];Td=je[2];if(Ue!==we[0]||Ve!==
we[1]||Td!==we[2])L.stencilFunc(Ue,Ve,Td),we[0]=Ue,we[1]=Ve,we[2]=Td;Xd=fe[0];We=fe[1];jf=fe[2];nf=fe[3];if(Xd!==ve[0]||We!==ve[1]||jf!==ve[2]||nf!==ve[3])L.stencilOpSeparate(Xd,We,jf,nf),ve[0]=Xd,ve[1]=We,ve[2]=jf,ve[3]=nf;ff=ue[0];kf=ue[1];lf=ue[2];mf=ue[3];if(ff!==Od[0]||kf!==Od[1]||lf!==Od[2]||mf!==Od[3])L.stencilOpSeparate(ff,kf,lf,mf),Od[0]=ff,Od[1]=kf,Od[2]=lf,Od[3]=mf}p=a.viewport;t=p.x|0;v=p.y|0;y="width"in p?p.width|0:N.framebufferWidth-t;D="height"in p?p.height|0:N.framebufferHeight-v;
u=N.viewportWidth;N.viewportWidth=y;W=N.viewportHeight;N.viewportHeight=D;L.viewport(t,v,y,D);Dd[0]=t;Dd[1]=v;Dd[2]=y;Dd[3]=D;L.blendColor(0,0,0,1);M[0]=0;M[1]=0;M[2]=0;M[3]=1;L.enable(3042);ha.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;L.disable(2929);ha.depth_enable=!1;r=a.viewport;H=r.x|0;z=r.y|0;J="width"in r?r.width|0:N.framebufferWidth-H;la="height"in r?r.height|0:N.framebufferHeight-z;L.scissor(H,z,J,la);ge[0]=H;ge[1]=z;ge[2]=J;ge[3]=la;L.enable(3089);
ha.scissor_enable=!0;L.disable(2960);ha.stencil_enable=!1;if(R=ha.profile)ta=performance.now(),c.count++;L.useProgram(d.program);S=cd.angle_instanced_arrays;fa.setVAO(null);K=h.call(this,N,a,0);O=!1;P=null;Q=0;V=!1;Z=U=0;aa=1;ia=0;X=5126;na=ma=ua=ea=0;E(K)?(O=!0,P=ba.createStream(34962,K),X=P.dtype):(P=ba.getBuffer(K))?X=P.dtype:"constant"in K?(aa=2,"number"===typeof K.constant?(ua=K.constant,ma=na=ea=0):(ua=0<K.constant.length?K.constant[0]:0,ma=1<K.constant.length?K.constant[1]:0,na=2<K.constant.length?
K.constant[2]:0,ea=3<K.constant.length?K.constant[3]:0)):(P=E(K.buffer)?ba.createStream(34962,K.buffer):ba.getBuffer(K.buffer),X="type"in K?zd[K.type]:P.dtype,V=!!K.normalized,Z=K.size|0,U=K.offset|0,ia=K.stride|0,Q=K.divisor|0);sa=cc.location;ka=zc[sa];if(1===aa){ka.buffer||L.enableVertexAttribArray(sa);za=Z||1;if(ka.type!==X||ka.size!==za||ka.buffer!==P||ka.normalized!==V||ka.offset!==U||ka.stride!==ia)L.bindBuffer(34962,P.buffer),L.vertexAttribPointer(sa,za,X,V,ia,U),ka.type=X,ka.size=za,ka.buffer=
P,ka.normalized=V,ka.offset=U,ka.stride=ia;ka.divisor!==Q&&(S.vertexAttribDivisorANGLE(sa,Q),ka.divisor=Q)}else if(ka.buffer&&(L.disableVertexAttribArray(sa),ka.buffer=null),ka.x!==ua||ka.y!==ma||ka.z!==na||ka.w!==ea)L.vertexAttrib4f(sa,ua,ma,na,ea),ka.x=ua,ka.y=ma,ka.z=na,ka.w=ea;pa=l.call(this,N,a,0);Oa=!1;Ya=null;Ea=0;Qa=!1;Ua=Ib=0;Vb=1;cb=0;Cb=5126;Sb=kc=xd=Xb=0;E(pa)?(Oa=!0,Ya=ba.createStream(34962,pa),Cb=Ya.dtype):(Ya=ba.getBuffer(pa))?Cb=Ya.dtype:"constant"in pa?(Vb=2,"number"===typeof pa.constant?
(xd=pa.constant,kc=Sb=Xb=0):(xd=0<pa.constant.length?pa.constant[0]:0,kc=1<pa.constant.length?pa.constant[1]:0,Sb=2<pa.constant.length?pa.constant[2]:0,Xb=3<pa.constant.length?pa.constant[3]:0)):(Ya=E(pa.buffer)?ba.createStream(34962,pa.buffer):ba.getBuffer(pa.buffer),Cb="type"in pa?zd[pa.type]:Ya.dtype,Qa=!!pa.normalized,Ua=pa.size|0,Ib=pa.offset|0,cb=pa.stride|0,Ea=pa.divisor|0);x=jc.location;Tb=zc[x];if(1===Vb){Tb.buffer||L.enableVertexAttribArray(x);Pa=Ua||1;if(Tb.type!==Cb||Tb.size!==Pa||Tb.buffer!==
Ya||Tb.normalized!==Qa||Tb.offset!==Ib||Tb.stride!==cb)L.bindBuffer(34962,Ya.buffer),L.vertexAttribPointer(x,Pa,Cb,Qa,cb,Ib),Tb.type=Cb,Tb.size=Pa,Tb.buffer=Ya,Tb.normalized=Qa,Tb.offset=Ib,Tb.stride=cb;Tb.divisor!==Ea&&(S.vertexAttribDivisorANGLE(x,Ea),Tb.divisor=Ea)}else if(Tb.buffer&&(L.disableVertexAttribArray(x),Tb.buffer=null),Tb.x!==xd||Tb.y!==kc||Tb.z!==Sb||Tb.w!==Xb)L.vertexAttrib4f(x,xd,kc,Sb,Xb),Tb.x=xd,Tb.y=kc,Tb.z=Sb,Tb.w=Xb;ob=m.call(this,N,a,0);ub=!1;hb=null;Ra=0;Pc=!1;jd=Yb=0;db=1;
oc=0;Yc=5126;va=kb=jb=ic=0;E(ob)?(ub=!0,hb=ba.createStream(34962,ob),Yc=hb.dtype):(hb=ba.getBuffer(ob))?Yc=hb.dtype:"constant"in ob?(db=2,"number"===typeof ob.constant?(jb=ob.constant,kb=va=ic=0):(jb=0<ob.constant.length?ob.constant[0]:0,kb=1<ob.constant.length?ob.constant[1]:0,va=2<ob.constant.length?ob.constant[2]:0,ic=3<ob.constant.length?ob.constant[3]:0)):(hb=E(ob.buffer)?ba.createStream(34962,ob.buffer):ba.getBuffer(ob.buffer),Yc="type"in ob?zd[ob.type]:hb.dtype,Pc=!!ob.normalized,jd=ob.size|
0,Yb=ob.offset|0,oc=ob.stride|0,Ra=ob.divisor|0);pb=pc.location;ya=zc[pb];if(1===db){ya.buffer||L.enableVertexAttribArray(pb);Va=jd||1;if(ya.type!==Yc||ya.size!==Va||ya.buffer!==hb||ya.normalized!==Pc||ya.offset!==Yb||ya.stride!==oc)L.bindBuffer(34962,hb.buffer),L.vertexAttribPointer(pb,Va,Yc,Pc,oc,Yb),ya.type=Yc,ya.size=Va,ya.buffer=hb,ya.normalized=Pc,ya.offset=Yb,ya.stride=oc;ya.divisor!==Ra&&(S.vertexAttribDivisorANGLE(pb,Ra),ya.divisor=Ra)}else if(ya.buffer&&(L.disableVertexAttribArray(pb),ya.buffer=
null),ya.x!==jb||ya.y!==kb||ya.z!==va||ya.w!==ic)L.vertexAttrib4f(pb,jb,kb,va,ic),ya.x=jb,ya.y=kb,ya.z=va,ya.w=ic;bb=f.call(this,N,a,0);Ba=!1;eb=null;Na=0;Bb=!1;Ta=Ab=0;Hc=1;Jb=0;Lb=5126;Ma=yd=wa=Ub=0;E(bb)?(Ba=!0,eb=ba.createStream(34962,bb),Lb=eb.dtype):(eb=ba.getBuffer(bb))?Lb=eb.dtype:"constant"in bb?(Hc=2,"number"===typeof bb.constant?(wa=bb.constant,yd=Ma=Ub=0):(wa=0<bb.constant.length?bb.constant[0]:0,yd=1<bb.constant.length?bb.constant[1]:0,Ma=2<bb.constant.length?bb.constant[2]:0,Ub=3<bb.constant.length?
bb.constant[3]:0)):(eb=E(bb.buffer)?ba.createStream(34962,bb.buffer):ba.getBuffer(bb.buffer),Lb="type"in bb?zd[bb.type]:eb.dtype,Bb=!!bb.normalized,Ta=bb.size|0,Ab=bb.offset|0,Jb=bb.stride|0,Na=bb.divisor|0);Pb=td.location;fb=zc[Pb];if(1===Hc){fb.buffer||L.enableVertexAttribArray(Pb);ib=Ta||1;if(fb.type!==Lb||fb.size!==ib||fb.buffer!==eb||fb.normalized!==Bb||fb.offset!==Ab||fb.stride!==Jb)L.bindBuffer(34962,eb.buffer),L.vertexAttribPointer(Pb,ib,Lb,Bb,Jb,Ab),fb.type=Lb,fb.size=ib,fb.buffer=eb,fb.normalized=
Bb,fb.offset=Ab,fb.stride=Jb;fb.divisor!==Na&&(S.vertexAttribDivisorANGLE(Pb,Na),fb.divisor=Na)}else if(fb.buffer&&(L.disableVertexAttribArray(Pb),fb.buffer=null),fb.x!==wa||fb.y!==yd||fb.z!==Ma||fb.w!==Ub)L.vertexAttrib4f(Pb,wa,yd,Ma,Ub),fb.x=wa,fb.y=yd,fb.z=Ma,fb.w=Ub;xa=k.call(this,N,a,0);ec=!1;Fa=null;qb=0;rb=!1;$a=Za=0;rc=1;dd=0;tc=5126;Ia=Zc=Mb=Wa=0;E(xa)?(ec=!0,Fa=ba.createStream(34962,xa),tc=Fa.dtype):(Fa=ba.getBuffer(xa))?tc=Fa.dtype:"constant"in xa?(rc=2,"number"===typeof xa.constant?(Mb=
xa.constant,Zc=Ia=Wa=0):(Mb=0<xa.constant.length?xa.constant[0]:0,Zc=1<xa.constant.length?xa.constant[1]:0,Ia=2<xa.constant.length?xa.constant[2]:0,Wa=3<xa.constant.length?xa.constant[3]:0)):(Fa=E(xa.buffer)?ba.createStream(34962,xa.buffer):ba.getBuffer(xa.buffer),tc="type"in xa?zd[xa.type]:Fa.dtype,rb=!!xa.normalized,$a=xa.size|0,Za=xa.offset|0,dd=xa.stride|0,qb=xa.divisor|0);vc=nb.location;Sa=zc[vc];if(1===rc){Sa.buffer||L.enableVertexAttribArray(vc);Ca=$a||1;if(Sa.type!==tc||Sa.size!==Ca||Sa.buffer!==
Fa||Sa.normalized!==rb||Sa.offset!==Za||Sa.stride!==dd)L.bindBuffer(34962,Fa.buffer),L.vertexAttribPointer(vc,Ca,tc,rb,dd,Za),Sa.type=tc,Sa.size=Ca,Sa.buffer=Fa,Sa.normalized=rb,Sa.offset=Za,Sa.stride=dd;Sa.divisor!==qb&&(S.vertexAttribDivisorANGLE(vc,qb),Sa.divisor=qb)}else if(Sa.buffer&&(L.disableVertexAttribArray(vc),Sa.buffer=null),Sa.x!==Mb||Sa.y!==Zc||Sa.z!==Ia||Sa.w!==Wa)L.vertexAttrib4f(vc,Mb,Zc,Ia,Wa),Sa.x=Mb,Sa.y=Zc,Sa.z=Ia,Sa.w=Wa;lb=b.call(this,N,a,0);vb=!1;Db=null;sb=0;uc=!1;wd=wb=0;
sc=1;Fd=0;Jc=5126;bc=Wb=fd=ed=0;E(lb)?(vb=!0,Db=ba.createStream(34962,lb),Jc=Db.dtype):(Db=ba.getBuffer(lb))?Jc=Db.dtype:"constant"in lb?(sc=2,"number"===typeof lb.constant?(fd=lb.constant,Wb=bc=ed=0):(fd=0<lb.constant.length?lb.constant[0]:0,Wb=1<lb.constant.length?lb.constant[1]:0,bc=2<lb.constant.length?lb.constant[2]:0,ed=3<lb.constant.length?lb.constant[3]:0)):(Db=E(lb.buffer)?ba.createStream(34962,lb.buffer):ba.getBuffer(lb.buffer),Jc="type"in lb?zd[lb.type]:Db.dtype,uc=!!lb.normalized,wd=lb.size|
0,wb=lb.offset|0,Fd=lb.stride|0,sb=lb.divisor|0);Qb=ab.location;Ja=zc[Qb];if(1===sc){Ja.buffer||L.enableVertexAttribArray(Qb);$b=wd||1;if(Ja.type!==Jc||Ja.size!==$b||Ja.buffer!==Db||Ja.normalized!==uc||Ja.offset!==wb||Ja.stride!==Fd)L.bindBuffer(34962,Db.buffer),L.vertexAttribPointer(Qb,$b,Jc,uc,Fd,wb),Ja.type=Jc,Ja.size=$b,Ja.buffer=Db,Ja.normalized=uc,Ja.offset=wb,Ja.stride=Fd;Ja.divisor!==sb&&(S.vertexAttribDivisorANGLE(Qb,sb),Ja.divisor=sb)}else if(Ja.buffer&&(L.disableVertexAttribArray(Qb),Ja.buffer=
null),Ja.x!==fd||Ja.y!==Wb||Ja.z!==bc||Ja.w!==ed)L.vertexAttrib4f(Qb,fd,Wb,bc,ed),Ja.x=fd,Ja.y=Wb,Ja.z=bc,Ja.w=ed;mb=q.call(this,N,a,0);xb=!1;Nb=null;Rb=0;fc=!1;Ze=hc=0;xc=1;yc=0;Ac=5126;Lc=Rc=$c=Kc=0;E(mb)?(xb=!0,Nb=ba.createStream(34962,mb),Ac=Nb.dtype):(Nb=ba.getBuffer(mb))?Ac=Nb.dtype:"constant"in mb?(xc=2,"number"===typeof mb.constant?($c=mb.constant,Rc=Lc=Kc=0):($c=0<mb.constant.length?mb.constant[0]:0,Rc=1<mb.constant.length?mb.constant[1]:0,Lc=2<mb.constant.length?mb.constant[2]:0,Kc=3<mb.constant.length?
mb.constant[3]:0)):(Nb=E(mb.buffer)?ba.createStream(34962,mb.buffer):ba.getBuffer(mb.buffer),Ac="type"in mb?zd[mb.type]:Nb.dtype,fc=!!mb.normalized,Ze=mb.size|0,hc=mb.offset|0,yc=mb.stride|0,Rb=mb.divisor|0);Kb=T.location;Eb=zc[Kb];if(1===xc){Eb.buffer||L.enableVertexAttribArray(Kb);Mc=Ze||4;if(Eb.type!==Ac||Eb.size!==Mc||Eb.buffer!==Nb||Eb.normalized!==fc||Eb.offset!==hc||Eb.stride!==yc)L.bindBuffer(34962,Nb.buffer),L.vertexAttribPointer(Kb,Mc,Ac,fc,yc,hc),Eb.type=Ac,Eb.size=Mc,Eb.buffer=Nb,Eb.normalized=
fc,Eb.offset=hc,Eb.stride=yc;Eb.divisor!==Rb&&(S.vertexAttribDivisorANGLE(Kb,Rb),Eb.divisor=Rb)}else if(Eb.buffer&&(L.disableVertexAttribArray(Kb),Eb.buffer=null),Eb.x!==$c||Eb.y!==Rc||Eb.z!==Lc||Eb.w!==Kc)L.vertexAttrib4f(Kb,$c,Rc,Lc,Kc),Eb.x=$c,Eb.y=Rc,Eb.z=Lc,Eb.w=Kc;Ec=I.call(this,N,a,0);Sc=!1;gc=null;Vc=0;gd=!1;md=kd=0;Wc=1;bf=0;Zd=5126;Md=me=se=ke=0;E(Ec)?(Sc=!0,gc=ba.createStream(34962,Ec),Zd=gc.dtype):(gc=ba.getBuffer(Ec))?Zd=gc.dtype:"constant"in Ec?(Wc=2,"number"===typeof Ec.constant?(se=
Ec.constant,me=Md=ke=0):(se=0<Ec.constant.length?Ec.constant[0]:0,me=1<Ec.constant.length?Ec.constant[1]:0,Md=2<Ec.constant.length?Ec.constant[2]:0,ke=3<Ec.constant.length?Ec.constant[3]:0)):(gc=E(Ec.buffer)?ba.createStream(34962,Ec.buffer):ba.getBuffer(Ec.buffer),Zd="type"in Ec?zd[Ec.type]:gc.dtype,gd=!!Ec.normalized,md=Ec.size|0,kd=Ec.offset|0,bf=Ec.stride|0,Vc=Ec.divisor|0);Kd=Ob.location;id=zc[Kd];if(1===Wc){id.buffer||L.enableVertexAttribArray(Kd);Bc=md||4;if(id.type!==Zd||id.size!==Bc||id.buffer!==
gc||id.normalized!==gd||id.offset!==kd||id.stride!==bf)L.bindBuffer(34962,gc.buffer),L.vertexAttribPointer(Kd,Bc,Zd,gd,bf,kd),id.type=Zd,id.size=Bc,id.buffer=gc,id.normalized=gd,id.offset=kd,id.stride=bf;id.divisor!==Vc&&(S.vertexAttribDivisorANGLE(Kd,Vc),id.divisor=Vc)}else if(id.buffer&&(L.disableVertexAttribArray(Kd),id.buffer=null),id.x!==se||id.y!==me||id.z!==Md||id.w!==ke)L.vertexAttrib4f(Kd,se,me,Md,ke),id.x=se,id.y=me,id.z=Md,id.w=ke;od=w.call(this,N,a,0);ld=!1;bd=null;pd=0;Gd=!1;te=Hd=0;
ze=1;Ae=0;ne=5126;be=pe=de=ee=0;E(od)?(ld=!0,bd=ba.createStream(34962,od),ne=bd.dtype):(bd=ba.getBuffer(od))?ne=bd.dtype:"constant"in od?(ze=2,"number"===typeof od.constant?(de=od.constant,pe=be=ee=0):(de=0<od.constant.length?od.constant[0]:0,pe=1<od.constant.length?od.constant[1]:0,be=2<od.constant.length?od.constant[2]:0,ee=3<od.constant.length?od.constant[3]:0)):(bd=E(od.buffer)?ba.createStream(34962,od.buffer):ba.getBuffer(od.buffer),ne="type"in od?zd[od.type]:bd.dtype,Gd=!!od.normalized,te=od.size|
0,Hd=od.offset|0,Ae=od.stride|0,pd=od.divisor|0);he=oa.location;wc=zc[he];if(1===ze){wc.buffer||L.enableVertexAttribArray(he);Uc=te||1;if(wc.type!==ne||wc.size!==Uc||wc.buffer!==bd||wc.normalized!==Gd||wc.offset!==Hd||wc.stride!==Ae)L.bindBuffer(34962,bd.buffer),L.vertexAttribPointer(he,Uc,ne,Gd,Ae,Hd),wc.type=ne,wc.size=Uc,wc.buffer=bd,wc.normalized=Gd,wc.offset=Hd,wc.stride=Ae;wc.divisor!==pd&&(S.vertexAttribDivisorANGLE(he,pd),wc.divisor=pd)}else if(wc.buffer&&(L.disableVertexAttribArray(he),wc.buffer=
null),wc.x!==de||wc.y!==pe||wc.z!==be||wc.w!==ee)L.vertexAttrib4f(he,de,pe,be,ee),wc.x=de,wc.y=pe,wc.z=be,wc.w=ee;L.uniform1i(B.location,!1);L.uniform1f(zb.location,N.pixelRatio);qe=e.call(this,N,a,0);L.uniform2f(Da.location,qe[0],qe[1]);le=a.scale;L.uniform2f(La.location,le[0],le[1]);Ld=a.scaleFract;L.uniform2f(Y.location,Ld[0],Ld[1]);Pd=a.translate;L.uniform2f(ga.location,Pd[0],Pd[1]);Qd=a.translateFract;L.uniform2f(ra.location,Qd[0],Qd[1]);L.uniform1f(da.location,a.opacity);L.uniform1i(Ga.location,
g.bind());Rd=a.elements;ie=null;(ie=(vf=E(Rd))?tb.createStream(Rd):tb.getElements(Rd))&&L.bindBuffer(34963,ie.buffer.buffer);Ce=a.offset;if(oe=a.count)Re=Ha.instances,0<Re?ie?S.drawElementsInstancedANGLE(0,oe,ie.type,Ce<<(ie.type-5121>>1),Re):S.drawArraysInstancedANGLE(0,Ce,oe,Re):0>Re&&(ie?L.drawElements(0,oe,ie.type,Ce<<(ie.type-5121>>1)):L.drawArrays(0,Ce,oe)),ha.dirty=!0,fa.setVAO(null),N.viewportWidth=u,N.viewportHeight=W,R&&(c.cpuTime+=performance.now()-ta),O&&ba.destroyStream(P),Oa&&ba.destroyStream(Ya),
ub&&ba.destroyStream(hb),Ba&&ba.destroyStream(eb),ec&&ba.destroyStream(Fa),vb&&ba.destroyStream(Db),xb&&ba.destroyStream(Nb),Sc&&ba.destroyStream(gc),ld&&ba.destroyStream(bd),g.unbind(),vf&&tb.destroyStream(ie)},scope:function(b,e,g){var a,f,k,q,d,l,m,h,w,I,G,A,C,B,F,M,L,O,P,Q,T,U,ca,X,Y,fa,da,ea,ga,oa,ma,qa,na,pa,Aa,ra,Ka,Ga,La,Da,Oa,Qa,yb,Fb,ab,x,Gb,Pa,ob,ub,hb,Ra,zc,nb,Cb,db,td,mc,zb,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Ob,Jb,Lb,Ub,wa,cc,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,pc,tc,Wa,Mb,jc,Ia,
vc,Sa,Ca,lb,vb,Db,sb,uc,wb,Nc,sc,cd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,je,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd,kd,md,Wc,Dd,Od,we,ge,fe,Md,Kd,id,Bc,od,ld,bd,pd,Gd,Hd,ue,ve,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;a=b.viewport;f=a.x|0;k=a.y|0;q="width"in a?a.width|0:N.framebufferWidth-f;d="height"in a?a.height|0:N.framebufferHeight-k;l=N.viewportWidth;N.viewportWidth=q;m=N.viewportHeight;N.viewportHeight=d;h=yd[0];yd[0]=f;w=yd[1];yd[1]=k;I=yd[2];yd[2]=q;G=yd[3];yd[3]=d;A=sa[0];sa[0]=0;C=sa[1];sa[1]=0;B=sa[2];sa[2]=0;F=sa[3];sa[3]=1;M=ja.blend_enable;ja.blend_enable=!0;L=za[0];za[0]=770;O=za[1];za[1]=771;P=
za[2];za[2]=773;Q=za[3];za[3]=1;T=ja.depth_enable;ja.depth_enable=!1;U=b.viewport;ca=U.x|0;X=U.y|0;Y="width"in U?U.width|0:N.framebufferWidth-ca;fa="height"in U?U.height|0:N.framebufferHeight-X;da=xd[0];xd[0]=ca;ea=xd[1];xd[1]=X;ga=xd[2];xd[2]=Y;oa=xd[3];xd[3]=fa;ma=ja.scissor_enable;ja.scissor_enable=!0;qa=ja.stencil_enable;ja.stencil_enable=!1;if(na=ha.profile)pa=performance.now(),c.count++;Aa=b.elements;ra=null;ra=(Ka=E(Aa))?tb.createStream(Aa):tb.getElements(Aa);Ga=Ha.elements;Ha.elements=ra;
La=b.offset;Da=Ha.offset;Ha.offset=La;Oa=b.count;Qa=Ha.count;Ha.count=Oa;yb=Ha.primitive;Ha.primitive=0;Fb=Z[45];Z[45]=!1;ab=b.markerTexture;x=Z[48];Z[48]=ab;Gb=b.opacity;Pa=Z[10];Z[10]=Gb;ob=p.call(this,N,b,g);ub=Z[46];Z[46]=ob;hb=Z[47];Z[47]=n;Ra=N.pixelRatio;zc=Z[34];Z[34]=Ra;nb=b.scale;Cb=Z[6];Z[6]=nb;db=b.scaleFract;td=Z[7];Z[7]=db;mc=b.translate;zb=Z[8];Z[8]=mc;jb=b.translateFract;kb=Z[9];Z[9]=jb;va=t.call(this,N,b,g);pb=!1;ya=null;Va=0;bb=!1;eb=Ba=0;Na=1;Bb=0;Ab=5126;Lb=Jb=Ob=Ta=0;E(va)?(pb=
!0,ya=ba.createStream(34962,va),Ab=ya.dtype):(ya=ba.getBuffer(va))?Ab=ya.dtype:"constant"in va?(Na=2,"number"===typeof va.constant?(Ob=va.constant,Jb=Lb=Ta=0):(Ob=0<va.constant.length?va.constant[0]:0,Jb=1<va.constant.length?va.constant[1]:0,Lb=2<va.constant.length?va.constant[2]:0,Ta=3<va.constant.length?va.constant[3]:0)):(ya=E(va.buffer)?ba.createStream(34962,va.buffer):ba.getBuffer(va.buffer),Ab="type"in va?zd[va.type]:ya.dtype,bb=!!va.normalized,eb=va.size|0,Ba=va.offset|0,Bb=va.stride|0,Va=
va.divisor|0);Ub=v.buffer;v.buffer=ya;wa=v.divisor;v.divisor=Va;cc=v.normalized;v.normalized=bb;Ma=v.offset;v.offset=Ba;Pb=v.size;v.size=eb;fb=v.state;v.state=Na;ib=v.stride;v.stride=Bb;xa=v.type;v.type=Ab;ec=v.w;v.w=Ta;Fa=v.x;v.x=Ob;qb=v.y;v.y=Jb;rb=v.z;v.z=Lb;Za=D.call(this,N,b,g);$a=!1;rc=null;pc=0;tc=!1;Mb=Wa=0;jc=1;Ia=0;vc=5126;vb=lb=Ca=Sa=0;E(Za)?($a=!0,rc=ba.createStream(34962,Za),vc=rc.dtype):(rc=ba.getBuffer(Za))?vc=rc.dtype:"constant"in Za?(jc=2,"number"===typeof Za.constant?(Ca=Za.constant,
lb=vb=Sa=0):(Ca=0<Za.constant.length?Za.constant[0]:0,lb=1<Za.constant.length?Za.constant[1]:0,vb=2<Za.constant.length?Za.constant[2]:0,Sa=3<Za.constant.length?Za.constant[3]:0)):(rc=E(Za.buffer)?ba.createStream(34962,Za.buffer):ba.getBuffer(Za.buffer),vc="type"in Za?zd[Za.type]:rc.dtype,tc=!!Za.normalized,Mb=Za.size|0,Wa=Za.offset|0,Ia=Za.stride|0,pc=Za.divisor|0);Db=y.buffer;y.buffer=rc;sb=y.divisor;y.divisor=pc;uc=y.normalized;y.normalized=tc;wb=y.offset;y.offset=Wa;Nc=y.size;y.size=Mb;sc=y.state;
y.state=jc;cd=y.stride;y.stride=Ia;Jc=y.type;y.type=vc;ed=y.w;y.w=Sa;fd=y.x;y.x=Ca;Wb=y.y;y.y=lb;bc=y.z;y.z=vb;Qb=W.call(this,N,b,g);Ja=!1;$b=null;mb=0;xb=!1;Rb=Nb=0;fc=1;hc=0;je=5126;Kc=Ac=yc=xc=0;E(Qb)?(Ja=!0,$b=ba.createStream(34962,Qb),je=$b.dtype):($b=ba.getBuffer(Qb))?je=$b.dtype:"constant"in Qb?(fc=2,"number"===typeof Qb.constant?(yc=Qb.constant,Ac=Kc=xc=0):(yc=0<Qb.constant.length?Qb.constant[0]:0,Ac=1<Qb.constant.length?Qb.constant[1]:0,Kc=2<Qb.constant.length?Qb.constant[2]:0,xc=3<Qb.constant.length?
Qb.constant[3]:0)):($b=E(Qb.buffer)?ba.createStream(34962,Qb.buffer):ba.getBuffer(Qb.buffer),je="type"in Qb?zd[Qb.type]:$b.dtype,xb=!!Qb.normalized,Rb=Qb.size|0,Nb=Qb.offset|0,hc=Qb.stride|0,mb=Qb.divisor|0);$c=u.buffer;u.buffer=$b;Rc=u.divisor;u.divisor=mb;Lc=u.normalized;u.normalized=xb;Kb=u.offset;u.offset=Nb;Eb=u.size;u.size=Rb;Mc=u.state;u.state=fc;Ec=u.stride;u.stride=hc;Sc=u.type;u.type=je;gc=u.w;u.w=xc;Vc=u.x;u.x=yc;gd=u.y;u.y=Ac;kd=u.z;u.z=Kc;md=r.call(this,N,b,g);Wc=!1;Dd=null;Od=0;we=!1;
fe=ge=0;Md=1;Kd=0;id=5126;bd=ld=od=Bc=0;E(md)?(Wc=!0,Dd=ba.createStream(34962,md),id=Dd.dtype):(Dd=ba.getBuffer(md))?id=Dd.dtype:"constant"in md?(Md=2,"number"===typeof md.constant?(od=md.constant,ld=bd=Bc=0):(od=0<md.constant.length?md.constant[0]:0,ld=1<md.constant.length?md.constant[1]:0,bd=2<md.constant.length?md.constant[2]:0,Bc=3<md.constant.length?md.constant[3]:0)):(Dd=E(md.buffer)?ba.createStream(34962,md.buffer):ba.getBuffer(md.buffer),id="type"in md?zd[md.type]:Dd.dtype,we=!!md.normalized,
fe=md.size|0,ge=md.offset|0,Kd=md.stride|0,Od=md.divisor|0);pd=la.buffer;la.buffer=Dd;Gd=la.divisor;la.divisor=Od;Hd=la.normalized;la.normalized=we;ue=la.offset;la.offset=ge;ve=la.size;la.size=fe;Ae=la.state;la.state=Md;ne=la.stride;la.stride=Kd;ee=la.type;la.type=id;de=la.w;la.w=Bc;pe=la.x;la.x=od;be=la.y;la.y=ld;he=la.z;la.z=bd;wc=ta.call(this,N,b,g);Uc=!1;qe=null;le=0;Ld=!1;Qd=Pd=0;Rd=1;ie=0;Ye=5126;Se=Re=oe=Ce=0;E(wc)?(Uc=!0,qe=ba.createStream(34962,wc),Ye=qe.dtype):(qe=ba.getBuffer(wc))?Ye=qe.dtype:
"constant"in wc?(Rd=2,"number"===typeof wc.constant?(oe=wc.constant,Re=Se=Ce=0):(oe=0<wc.constant.length?wc.constant[0]:0,Re=1<wc.constant.length?wc.constant[1]:0,Se=2<wc.constant.length?wc.constant[2]:0,Ce=3<wc.constant.length?wc.constant[3]:0)):(qe=E(wc.buffer)?ba.createStream(34962,wc.buffer):ba.getBuffer(wc.buffer),Ye="type"in wc?zd[wc.type]:qe.dtype,Ld=!!wc.normalized,Qd=wc.size|0,Pd=wc.offset|0,ie=wc.stride|0,le=wc.divisor|0);Ne=S.buffer;S.buffer=qe;re=S.divisor;S.divisor=le;Fe=S.normalized;
S.normalized=Ld;He=S.offset;S.offset=Pd;Ie=S.size;S.size=Qd;Je=S.state;S.state=Rd;Ge=S.stride;S.stride=ie;Nd=S.type;S.type=Ye;Ud=S.w;S.w=Ce;$d=S.x;S.x=oe;ce=S.y;S.y=Re;Ke=S.z;S.z=Se;Cd=R.call(this,N,b,g);Sd=!1;De=null;Le=0;cf=!1;Te=af=0;Oe=1;$e=0;Xe=5126;Xd=Td=Ve=Ue=0;E(Cd)?(Sd=!0,De=ba.createStream(34962,Cd),Xe=De.dtype):(De=ba.getBuffer(Cd))?Xe=De.dtype:"constant"in Cd?(Oe=2,"number"===typeof Cd.constant?(Ve=Cd.constant,Td=Xd=Ue=0):(Ve=0<Cd.constant.length?Cd.constant[0]:0,Td=1<Cd.constant.length?
Cd.constant[1]:0,Xd=2<Cd.constant.length?Cd.constant[2]:0,Ue=3<Cd.constant.length?Cd.constant[3]:0)):(De=E(Cd.buffer)?ba.createStream(34962,Cd.buffer):ba.getBuffer(Cd.buffer),Xe="type"in Cd?zd[Cd.type]:De.dtype,cf=!!Cd.normalized,Te=Cd.size|0,af=Cd.offset|0,$e=Cd.stride|0,Le=Cd.divisor|0);We=z.buffer;z.buffer=De;jf=z.divisor;z.divisor=Le;nf=z.normalized;z.normalized=cf;ff=z.offset;z.offset=af;kf=z.size;z.size=Te;lf=z.state;z.state=Oe;mf=z.stride;z.stride=$e;rf=z.type;z.type=Xe;of=z.w;z.w=Ue;sf=z.x;
z.x=Ve;Cf=z.y;z.y=Td;Df=z.z;z.z=Xd;Pe=ia.call(this,N,b,g);Ee=!1;pf=null;qf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;E(Pe)?(Ee=!0,pf=ba.createStream(34962,Pe),xf=pf.dtype):(pf=ba.getBuffer(Pe))?xf=pf.dtype:"constant"in Pe?(Ff=2,"number"===typeof Pe.constant?(wf=Pe.constant,zf=Af=yf=0):(wf=0<Pe.constant.length?Pe.constant[0]:0,zf=1<Pe.constant.length?Pe.constant[1]:0,Af=2<Pe.constant.length?Pe.constant[2]:0,yf=3<Pe.constant.length?Pe.constant[3]:0)):(pf=E(Pe.buffer)?ba.createStream(34962,Pe.buffer):
ba.getBuffer(Pe.buffer),xf="type"in Pe?zd[Pe.type]:pf.dtype,Ef=!!Pe.normalized,Bf=Pe.size|0,Hf=Pe.offset|0,Gf=Pe.stride|0,qf=Pe.divisor|0);Jf=J.buffer;J.buffer=pf;Kf=J.divisor;J.divisor=qf;Lf=J.normalized;J.normalized=Ef;Mf=J.offset;J.offset=Hf;tf=J.size;J.size=Bf;Rf=J.state;J.state=Ff;If=J.stride;J.stride=Gf;uf=J.type;J.type=xf;dg=J.w;J.w=yf;Sf=J.x;J.x=wf;Tf=J.y;J.y=zf;qg=J.z;J.z=Af;gf=V.call(this,N,b,g);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;E(gf)?(df=!0,Nf=ba.createStream(34962,
gf),Wf=Nf.dtype):(Nf=ba.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=E(gf.buffer)?ba.createStream(34962,gf.buffer):ba.getBuffer(gf.buffer),Wf="type"in gf?zd[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|0,ig=gf.stride|0,Of=gf.divisor|0);jg=K.buffer;K.buffer=
Nf;rg=K.divisor;K.divisor=Of;sg=K.normalized;K.normalized=eg;tg=K.offset;K.offset=fg;ug=K.size;K.size=gg;vg=K.state;K.state=hg;wg=K.stride;K.stride=ig;xg=K.type;K.type=Wf;yg=K.w;K.w=Uf;zg=K.x;K.x=Xf;Ag=K.y;K.y=Yf;Bg=K.z;K.z=Zf;hf=ka.call(this,N,b,g);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;E(hf)?(ef=!0,Pf=ba.createStream(34962,hf),$f=Pf.dtype):(Pf=ba.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?
hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=E(hf.buffer)?ba.createStream(34962,hf.buffer):ba.getBuffer(hf.buffer),$f="type"in hf?zd[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=aa.buffer;aa.buffer=Pf;Cg=aa.divisor;aa.divisor=Qf;Dg=aa.normalized;aa.normalized=kg;Eg=aa.offset;aa.offset=lg;Fg=aa.size;aa.size=mg;Gg=aa.state;aa.state=ng;Hg=aa.stride;
aa.stride=og;Ig=aa.type;aa.type=$f;Jg=aa.w;aa.w=Vf;Kg=aa.x;aa.x=ag;Lg=aa.y;aa.y=bg;Mg=aa.z;aa.z=cg;Ng=ua.vert;ua.vert=59;Og=ua.frag;ua.frag=58;ha.dirty=!0;e(N,b,g);N.viewportWidth=l;N.viewportHeight=m;yd[0]=h;yd[1]=w;yd[2]=I;yd[3]=G;sa[0]=A;sa[1]=C;sa[2]=B;sa[3]=F;ja.blend_enable=M;za[0]=L;za[1]=O;za[2]=P;za[3]=Q;ja.depth_enable=T;xd[0]=da;xd[1]=ea;xd[2]=ga;xd[3]=oa;ja.scissor_enable=ma;ja.stencil_enable=qa;na&&(c.cpuTime+=performance.now()-pa);Ka&&tb.destroyStream(ra);Ha.elements=Ga;Ha.offset=Da;
Ha.count=Qa;Ha.primitive=yb;Z[45]=Fb;Z[48]=x;Z[10]=Pa;Z[46]=ub;Z[47]=hb;Z[34]=zc;Z[6]=Cb;Z[7]=td;Z[8]=zb;Z[9]=kb;pb&&ba.destroyStream(ya);v.buffer=Ub;v.divisor=wa;v.normalized=cc;v.offset=Ma;v.size=Pb;v.state=fb;v.stride=ib;v.type=xa;v.w=ec;v.x=Fa;v.y=qb;v.z=rb;$a&&ba.destroyStream(rc);y.buffer=Db;y.divisor=sb;y.normalized=uc;y.offset=wb;y.size=Nc;y.state=sc;y.stride=cd;y.type=Jc;y.w=ed;y.x=fd;y.y=Wb;y.z=bc;Ja&&ba.destroyStream($b);u.buffer=$c;u.divisor=Rc;u.normalized=Lc;u.offset=Kb;u.size=Eb;u.state=
Mc;u.stride=Ec;u.type=Sc;u.w=gc;u.x=Vc;u.y=gd;u.z=kd;Wc&&ba.destroyStream(Dd);la.buffer=pd;la.divisor=Gd;la.normalized=Hd;la.offset=ue;la.size=ve;la.state=Ae;la.stride=ne;la.type=ee;la.w=de;la.x=pe;la.y=be;la.z=he;Uc&&ba.destroyStream(qe);S.buffer=Ne;S.divisor=re;S.normalized=Fe;S.offset=He;S.size=Ie;S.state=Je;S.stride=Ge;S.type=Nd;S.w=Ud;S.x=$d;S.y=ce;S.z=Ke;Sd&&ba.destroyStream(De);z.buffer=We;z.divisor=jf;z.normalized=nf;z.offset=ff;z.size=kf;z.state=lf;z.stride=mf;z.type=rf;z.w=of;z.x=sf;z.y=
Cf;z.z=Df;Ee&&ba.destroyStream(pf);J.buffer=Jf;J.divisor=Kf;J.normalized=Lf;J.offset=Mf;J.size=tf;J.state=Rf;J.stride=If;J.type=uf;J.w=dg;J.x=Sf;J.y=Tf;J.z=qg;df&&ba.destroyStream(Nf);K.buffer=jg;K.divisor=rg;K.normalized=sg;K.offset=tg;K.size=ug;K.state=vg;K.stride=wg;K.type=xg;K.w=yg;K.x=zg;K.y=Ag;K.z=Bg;ef&&ba.destroyStream(Pf);aa.buffer=pg;aa.divisor=Cg;aa.normalized=Dg;aa.offset=Eg;aa.size=Fg;aa.state=Gg;aa.stride=Hg;aa.type=Ig;aa.w=Jg;aa.x=Kg;aa.y=Lg;aa.z=Mg;ua.vert=Ng;ua.frag=Og;ha.dirty=!0}}},
"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,c,d,h,l,m,f,k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,r,la,ta,S,R,z,ia,J,V,K,ka,aa,ma,na,Qa,Cb,ea,Oa){var X,P,O,U,pa,Q,Ob,ab,T,B,oa,da,Da,Ga,zb,La,Y,nb,ga,ra,cc,pc,jc,td,zc,ba,N,ha,Ha,tb,cd,Nc,L,E,ja,ua,Z,fa,sa,M,F;X=a.attributes;P=a.buffer;O=a.context;U=a.current;pa=a.draw;Q=a.elements;Ob=a.extensions;ab=a.framebuffer;T=a.gl;B=a.isBufferArgs;oa=a.next;da=a.shader;
Da=a.uniforms;Ga=a.vao;zb=oa.blend_color;La=U.blend_color;Y=oa.blend_equation;nb=U.blend_equation;ga=oa.blend_func;ra=U.blend_func;cc=oa.colorMask;pc=U.colorMask;jc=oa.depth_range;td=U.depth_range;zc=oa.polygonOffset_offset;ba=U.polygonOffset_offset;N=oa.sample_coverage;ha=U.sample_coverage;Ha=oa.scissor_box;tb=U.scissor_box;cd=oa.stencil_func;Nc=U.stencil_func;L=oa.stencil_opBack;E=U.stencil_opBack;ja=oa.stencil_opFront;ua=U.stencil_opFront;Z=oa.viewport;fa=U.viewport;sa={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};M={offset:4,stride:8};F={offset:0,stride:8};return{batch:function(b,e){var g,a,f,n,k,p,q,t,d,l,m,h,w;g=ab.next;g!==ab.cur&&(g?T.bindFramebuffer(36160,g.framebuffer):T.bindFramebuffer(36160,null),ab.cur=g);if(U.dirty){var I,G,A,Z,da,ga,Da,zb,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb,hd,Hb,nc,Xa,Qc,ac,lc,Id,rd,Fc,dc;I=oa.dither;I!==U.dither&&(I?T.enable(3024):T.disable(3024),U.dither=I);G=Y[0];A=Y[1];if(G!==nb[0]||A!==nb[1])T.blendEquationSeparate(G,
A),nb[0]=G,nb[1]=A;Z=oa.depth_func;Z!==U.depth_func&&(T.depthFunc(Z),U.depth_func=Z);da=jc[0];ga=jc[1];if(da!==td[0]||ga!==td[1])T.depthRange(da,ga),td[0]=da,td[1]=ga;Da=oa.depth_mask;Da!==U.depth_mask&&(T.depthMask(Da),U.depth_mask=Da);zb=cc[0];xe=cc[1];Me=cc[2];Qe=cc[3];if(zb!==pc[0]||xe!==pc[1]||Me!==pc[2]||Qe!==pc[3])T.colorMask(zb,xe,Me,Qe),pc[0]=zb,pc[1]=xe,pc[2]=Me,pc[3]=Qe;Bd=oa.cull_enable;Bd!==U.cull_enable&&(Bd?T.enable(2884):T.disable(2884),U.cull_enable=Bd);Be=oa.cull_face;Be!==U.cull_face&&
(T.cullFace(Be),U.cull_face=Be);Vd=oa.frontFace;Vd!==U.frontFace&&(T.frontFace(Vd),U.frontFace=Vd);Wd=oa.lineWidth;Wd!==U.lineWidth&&(T.lineWidth(Wd),U.lineWidth=Wd);ae=oa.polygonOffset_enable;ae!==U.polygonOffset_enable&&(ae?T.enable(32823):T.disable(32823),U.polygonOffset_enable=ae);Yd=zc[0];qd=zc[1];if(Yd!==ba[0]||qd!==ba[1])T.polygonOffset(Yd,qd),ba[0]=Yd,ba[1]=qd;nd=oa.sample_alpha;nd!==U.sample_alpha&&(nd?T.enable(32926):T.disable(32926),U.sample_alpha=nd);vd=oa.sample_enable;vd!==U.sample_enable&&
(vd?T.enable(32928):T.disable(32928),U.sample_enable=vd);ad=N[0];sd=N[1];if(ad!==ha[0]||sd!==ha[1])T.sampleCoverage(ad,sd),ha[0]=ad,ha[1]=sd;Tc=oa.stencil_mask;Tc!==U.stencil_mask&&(T.stencilMask(Tc),U.stencil_mask=Tc);Ed=cd[0];Oc=cd[1];Ic=cd[2];if(Ed!==Nc[0]||Oc!==Nc[1]||Ic!==Nc[2])T.stencilFunc(Ed,Oc,Ic),Nc[0]=Ed,Nc[1]=Oc,Nc[2]=Ic;qc=ja[0];gb=ja[1];hd=ja[2];Hb=ja[3];if(qc!==ua[0]||gb!==ua[1]||hd!==ua[2]||Hb!==ua[3])T.stencilOpSeparate(qc,gb,hd,Hb),ua[0]=qc,ua[1]=gb,ua[2]=hd,ua[3]=Hb;nc=L[0];Xa=
L[1];Qc=L[2];ac=L[3];if(nc!==E[0]||Xa!==E[1]||Qc!==E[2]||ac!==E[3])T.stencilOpSeparate(nc,Xa,Qc,ac),E[0]=nc,E[1]=Xa,E[2]=Qc,E[3]=ac;lc=oa.scissor_enable;lc!==U.scissor_enable&&(lc?T.enable(3089):T.disable(3089),U.scissor_enable=lc);Id=Ha[0];rd=Ha[1];Fc=Ha[2];dc=Ha[3];if(Id!==tb[0]||rd!==tb[1]||Fc!==tb[2]||dc!==tb[3])T.scissor(Id,rd,Fc,dc),tb[0]=Id,tb[1]=rd,tb[2]=Fc,tb[3]=dc}a=this.viewport;f=a.x|0;n=a.y|0;k="width"in a?a.width|0:O.framebufferWidth-f;p="height"in a?a.height|0:O.framebufferHeight-n;
q=O.viewportWidth;O.viewportWidth=k;t=O.viewportHeight;O.viewportHeight=p;T.viewport(f,n,k,p);fa[0]=f;fa[1]=n;fa[2]=k;fa[3]=p;T.blendColor(0,0,0,1);La[0]=0;La[1]=0;La[2]=0;La[3]=1;T.enable(3042);U.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;T.disable(2929);U.depth_enable=!1;T.disable(2960);U.stencil_enable=!1;if(d=U.profile)l=performance.now(),c.count+=e;T.useProgram(v.program);m=Ob.angle_instanced_arrays;var Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,ye,kc,
Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb;Ga.setVAO(null);F.buffer=this.sizeBuffer;Cc=!1;Xc=null;Zb=0;Gc=!1;Ea=Ya=0;ud=1;Ib=0;Ua=5126;Xb=Dc=cb=Vb=0;B(F)?(Cc=!0,Xc=P.createStream(34962,F),Ua=Xc.dtype):(Xc=P.getBuffer(F))?Ua=Xc.dtype:"constant"in F?(ud=2,"number"===typeof F.constant?(cb=F.constant,Dc=Xb=Vb=0):(cb=0<F.constant.length?F.constant[0]:0,Dc=1<F.constant.length?F.constant[1]:
0,Xb=2<F.constant.length?F.constant[2]:0,Vb=3<F.constant.length?F.constant[3]:0)):(Xc=B(F.buffer)?P.createStream(34962,F.buffer):P.getBuffer(F.buffer),Ua="type"in F?sa[F.type]:Xc.dtype,Gc=!!F.normalized,Ea=F.size|0,Ya=F.offset|0,Ib=F.stride|0,Zb=F.divisor|0);ye=Oa.location;kc=X[ye];if(1===ud){kc.buffer||T.enableVertexAttribArray(ye);Sb=Ea||1;if(kc.type!==Ua||kc.size!==Sb||kc.buffer!==Xc||kc.normalized!==Gc||kc.offset!==Ya||kc.stride!==Ib)T.bindBuffer(34962,Xc.buffer),T.vertexAttribPointer(ye,Sb,Ua,
Gc,Ib,Ya),kc.type=Ua,kc.size=Sb,kc.buffer=Xc,kc.normalized=Gc,kc.offset=Ya,kc.stride=Ib;kc.divisor!==Zb&&(m.vertexAttribDivisorANGLE(ye,Zb),kc.divisor=Zb)}else if(kc.buffer&&(T.disableVertexAttribArray(ye),kc.buffer=null),kc.x!==cb||kc.y!==Dc||kc.z!==Xb||kc.w!==Vb)T.vertexAttrib4f(ye,cb,Dc,Xb,Vb),kc.x=cb,kc.y=Dc,kc.z=Xb,kc.w=Vb;M.buffer=this.sizeBuffer;x=!1;Tb=null;Pa=0;ob=!1;hb=ub=0;Ra=1;Pc=0;Yb=5126;Yc=oc=db=jd=0;B(M)?(x=!0,Tb=P.createStream(34962,M),Yb=Tb.dtype):(Tb=P.getBuffer(M))?Yb=Tb.dtype:
"constant"in M?(Ra=2,"number"===typeof M.constant?(db=M.constant,oc=Yc=jd=0):(db=0<M.constant.length?M.constant[0]:0,oc=1<M.constant.length?M.constant[1]:0,Yc=2<M.constant.length?M.constant[2]:0,jd=3<M.constant.length?M.constant[3]:0)):(Tb=B(M.buffer)?P.createStream(34962,M.buffer):P.getBuffer(M.buffer),Yb="type"in M?sa[M.type]:Tb.dtype,ob=!!M.normalized,hb=M.size|0,ub=M.offset|0,Pc=M.stride|0,Pa=M.divisor|0);ic=J.location;jb=X[ic];if(1===Ra){jb.buffer||T.enableVertexAttribArray(ic);kb=hb||1;if(jb.type!==
Yb||jb.size!==kb||jb.buffer!==Tb||jb.normalized!==ob||jb.offset!==ub||jb.stride!==Pc)T.bindBuffer(34962,Tb.buffer),T.vertexAttribPointer(ic,kb,Yb,ob,Pc,ub),jb.type=Yb,jb.size=kb,jb.buffer=Tb,jb.normalized=ob,jb.offset=ub,jb.stride=Pc;jb.divisor!==Pa&&(m.vertexAttribDivisorANGLE(ic,Pa),jb.divisor=Pa)}else if(jb.buffer&&(T.disableVertexAttribArray(ic),jb.buffer=null),jb.x!==db||jb.y!==oc||jb.z!==Yc||jb.w!==jd)T.vertexAttrib4f(ic,db,oc,Yc,jd),jb.x=db,jb.y=oc,jb.z=Yc,jb.w=jd;va=this.charBuffer;pb=!1;
ya=null;Va=0;bb=!1;eb=Ba=0;Na=1;Bb=0;Ab=5126;Lb=Jb=Hc=Ta=0;B(va)?(pb=!0,ya=P.createStream(34962,va),Ab=ya.dtype):(ya=P.getBuffer(va))?Ab=ya.dtype:"constant"in va?(Na=2,"number"===typeof va.constant?(Hc=va.constant,Jb=Lb=Ta=0):(Hc=0<va.constant.length?va.constant[0]:0,Jb=1<va.constant.length?va.constant[1]:0,Lb=2<va.constant.length?va.constant[2]:0,Ta=3<va.constant.length?va.constant[3]:0)):(ya=B(va.buffer)?P.createStream(34962,va.buffer):P.getBuffer(va.buffer),Ab="type"in va?sa[va.type]:ya.dtype,
bb=!!va.normalized,eb=va.size|0,Ba=va.offset|0,Bb=va.stride|0,Va=va.divisor|0);Ub=ia.location;wa=X[Ub];if(1===Na){wa.buffer||T.enableVertexAttribArray(Ub);Jd=eb||1;if(wa.type!==Ab||wa.size!==Jd||wa.buffer!==ya||wa.normalized!==bb||wa.offset!==Ba||wa.stride!==Bb)T.bindBuffer(34962,ya.buffer),T.vertexAttribPointer(Ub,Jd,Ab,bb,Bb,Ba),wa.type=Ab,wa.size=Jd,wa.buffer=ya,wa.normalized=bb,wa.offset=Ba,wa.stride=Bb;wa.divisor!==Va&&(m.vertexAttribDivisorANGLE(Ub,Va),wa.divisor=Va)}else if(wa.buffer&&(T.disableVertexAttribArray(Ub),
wa.buffer=null),wa.x!==Hc||wa.y!==Jb||wa.z!==Lb||wa.w!==Ta)T.vertexAttrib4f(Ub,Hc,Jb,Lb,Ta),wa.x=Hc,wa.y=Jb,wa.z=Lb,wa.w=Ta;Ma=this.position;Pb=!1;fb=null;ib=0;xa=!1;Fa=ec=0;qb=1;rb=0;Za=5126;tc=dd=rc=$a=0;B(Ma)?(Pb=!0,fb=P.createStream(34962,Ma),Za=fb.dtype):(fb=P.getBuffer(Ma))?Za=fb.dtype:"constant"in Ma?(qb=2,"number"===typeof Ma.constant?(rc=Ma.constant,dd=tc=$a=0):(rc=0<Ma.constant.length?Ma.constant[0]:0,dd=1<Ma.constant.length?Ma.constant[1]:0,tc=2<Ma.constant.length?Ma.constant[2]:0,$a=3<
Ma.constant.length?Ma.constant[3]:0)):(fb=B(Ma.buffer)?P.createStream(34962,Ma.buffer):P.getBuffer(Ma.buffer),Za="type"in Ma?sa[Ma.type]:fb.dtype,xa=!!Ma.normalized,Fa=Ma.size|0,ec=Ma.offset|0,rb=Ma.stride|0,ib=Ma.divisor|0);Wa=ma.location;Mb=X[Wa];if(1===qb){Mb.buffer||T.enableVertexAttribArray(Wa);Zc=Fa||2;if(Mb.type!==Za||Mb.size!==Zc||Mb.buffer!==fb||Mb.normalized!==xa||Mb.offset!==ec||Mb.stride!==rb)T.bindBuffer(34962,fb.buffer),T.vertexAttribPointer(Wa,Zc,Za,xa,rb,ec),Mb.type=Za,Mb.size=Zc,
Mb.buffer=fb,Mb.normalized=xa,Mb.offset=ec,Mb.stride=rb;Mb.divisor!==ib&&(m.vertexAttribDivisorANGLE(Wa,ib),Mb.divisor=ib)}else if(Mb.buffer&&(T.disableVertexAttribArray(Wa),Mb.buffer=null),Mb.x!==rc||Mb.y!==dd||Mb.z!==tc||Mb.w!==$a)T.vertexAttrib4f(Wa,rc,dd,tc,$a),Mb.x=rc,Mb.y=dd,Mb.z=tc,Mb.w=$a;Ia=this.viewportArray;T.uniform4f(ea.location,Ia[0],Ia[1],Ia[2],Ia[3]);vc=this.scale;T.uniform2f(Qa.location,vc[0],vc[1]);Sa=this.translate;T.uniform2f(Cb.location,Sa[0],Sa[1]);(Ca=pa.elements)?T.bindBuffer(34963,
Ca.buffer.buffer):Ga.currentVAO&&(Ca=Q.getElements(Ga.currentVAO.elements))&&T.bindBuffer(34963,Ca.buffer.buffer);lb=pa.instances;for(h=0;h<e;++h){w=b[h];var vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc,gd;vb=D.call(this,O,w,h);h&&Db===vb||(Db=vb,T.uniform1f(V.location,vb));sb=y.call(this,O,w,h);h&&uc===sb||(uc=sb,T.uniform1f(ka.location,sb));wb=w.align;h&&wd===wb||(wd=wb,T.uniform1f(la.location,wb));sc=w.baseline;h&&Fd===sc||(Fd=sc,
T.uniform1f(z.location,sc));Jc=w.color;ed=Jc[0];Wb=Jc[1];Qb=Jc[2];$b=Jc[3];h&&fd===ed&&bc===Wb&&Ja===Qb&&mb===$b||(fd=ed,bc=Wb,Ja=Qb,mb=$b,T.uniform4f(K.location,ed,Wb,Qb,$b));xb=W.call(this,O,w,h);Nb=xb[0];fc=xb[1];h&&Rb===Nb&&hc===fc||(Rb=Nb,hc=fc,T.uniform2f(R.location,Nb,fc));Ze=u.call(this,O,w,h);xc=Ze[0];Ac=Ze[1];h&&yc===xc&&Kc===Ac||(yc=xc,Kc=Ac,T.uniform2f(S.location,xc,Ac));$c=w.positionOffset;Rc=$c[0];Kb=$c[1];h&&Lc===Rc&&Eb===Kb||(Lc=Rc,Eb=Kb,T.uniform2f(na.location,Rc,Kb));Mc=w.opacity;
h&&Ec===Mc||(Ec=Mc,T.uniform1f(aa.location,Mc));(Sc=r.call(this,O,w,h))&&"framebuffer"===Sc._reglType&&(Sc=Sc.color[0]);gc=Sc._texture;T.uniform1i(ta.location,gc.bind());Vc=w.offset;if(gd=w.count)0<lb?Ca?m.drawElementsInstancedANGLE(0,gd,Ca.type,Vc<<(Ca.type-5121>>1),lb):m.drawArraysInstancedANGLE(0,Vc,gd,lb):0>lb&&(Ca?T.drawElements(0,gd,Ca.type,Vc<<(Ca.type-5121>>1)):T.drawArrays(0,Vc,gd)),gc.unbind()}Cc&&P.destroyStream(Xc);x&&P.destroyStream(Tb);pb&&P.destroyStream(ya);Pb&&P.destroyStream(fb);
U.dirty=!0;Ga.setVAO(null);O.viewportWidth=q;O.viewportHeight=t;d&&(c.cpuTime+=performance.now()-l)},draw:function(b){var e,g,a,n,p,q,t,v,w,y,D,I,u,W,r,H,Z,da,ga,Da,zb,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Tc,Ed,Oc,Ic,qc,gb,hd,Hb,nc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Xc,Zb,Gc,Ya,Ea,ud,Ib,Ua,Vb,cb,Dc,Xb,ye,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,jd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb;e=ab.next;e!==ab.cur&&(e?T.bindFramebuffer(36160,e.framebuffer):T.bindFramebuffer(36160,null),ab.cur=e);if(U.dirty){var Na,
Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc;Na=oa.dither;Na!==U.dither&&(Na?T.enable(3024):T.disable(3024),U.dither=Na);Bb=Y[0];Ab=Y[1];if(Bb!==nb[0]||Ab!==nb[1])T.blendEquationSeparate(Bb,Ab),nb[0]=Bb,nb[1]=Ab;Ta=oa.depth_func;Ta!==U.depth_func&&(T.depthFunc(Ta),U.depth_func=Ta);Hc=jc[0];Jb=jc[1];if(Hc!==td[0]||Jb!==td[1])T.depthRange(Hc,Jb),td[0]=Hc,td[1]=Jb;Lb=oa.depth_mask;Lb!==U.depth_mask&&(T.depthMask(Lb),U.depth_mask=Lb);
Ub=cc[0];wa=cc[1];Jd=cc[2];Ma=cc[3];if(Ub!==pc[0]||wa!==pc[1]||Jd!==pc[2]||Ma!==pc[3])T.colorMask(Ub,wa,Jd,Ma),pc[0]=Ub,pc[1]=wa,pc[2]=Jd,pc[3]=Ma;Pb=oa.cull_enable;Pb!==U.cull_enable&&(Pb?T.enable(2884):T.disable(2884),U.cull_enable=Pb);fb=oa.cull_face;fb!==U.cull_face&&(T.cullFace(fb),U.cull_face=fb);ib=oa.frontFace;ib!==U.frontFace&&(T.frontFace(ib),U.frontFace=ib);xa=oa.lineWidth;xa!==U.lineWidth&&(T.lineWidth(xa),U.lineWidth=xa);ec=oa.polygonOffset_enable;ec!==U.polygonOffset_enable&&(ec?T.enable(32823):
T.disable(32823),U.polygonOffset_enable=ec);Fa=zc[0];qb=zc[1];if(Fa!==ba[0]||qb!==ba[1])T.polygonOffset(Fa,qb),ba[0]=Fa,ba[1]=qb;rb=oa.sample_alpha;rb!==U.sample_alpha&&(rb?T.enable(32926):T.disable(32926),U.sample_alpha=rb);Za=oa.sample_enable;Za!==U.sample_enable&&(Za?T.enable(32928):T.disable(32928),U.sample_enable=Za);$a=N[0];rc=N[1];if($a!==ha[0]||rc!==ha[1])T.sampleCoverage($a,rc),ha[0]=$a,ha[1]=rc;dd=oa.stencil_mask;dd!==U.stencil_mask&&(T.stencilMask(dd),U.stencil_mask=dd);tc=cd[0];Wa=cd[1];
Mb=cd[2];if(tc!==Nc[0]||Wa!==Nc[1]||Mb!==Nc[2])T.stencilFunc(tc,Wa,Mb),Nc[0]=tc,Nc[1]=Wa,Nc[2]=Mb;Zc=ja[0];Ia=ja[1];vc=ja[2];Sa=ja[3];if(Zc!==ua[0]||Ia!==ua[1]||vc!==ua[2]||Sa!==ua[3])T.stencilOpSeparate(Zc,Ia,vc,Sa),ua[0]=Zc,ua[1]=Ia,ua[2]=vc,ua[3]=Sa;Ca=L[0];lb=L[1];vb=L[2];Db=L[3];if(Ca!==E[0]||lb!==E[1]||vb!==E[2]||Db!==E[3])T.stencilOpSeparate(Ca,lb,vb,Db),E[0]=Ca,E[1]=lb,E[2]=vb,E[3]=Db;sb=oa.scissor_enable;sb!==U.scissor_enable&&(sb?T.enable(3089):T.disable(3089),U.scissor_enable=sb);uc=Ha[0];
wb=Ha[1];wd=Ha[2];sc=Ha[3];if(uc!==tb[0]||wb!==tb[1]||wd!==tb[2]||sc!==tb[3])T.scissor(uc,wb,wd,sc),tb[0]=uc,tb[1]=wb,tb[2]=wd,tb[3]=sc}g=this.viewport;a=g.x|0;n=g.y|0;p="width"in g?g.width|0:O.framebufferWidth-a;q="height"in g?g.height|0:O.framebufferHeight-n;t=O.viewportWidth;O.viewportWidth=p;v=O.viewportHeight;O.viewportHeight=q;T.viewport(a,n,p,q);fa[0]=a;fa[1]=n;fa[2]=p;fa[3]=q;T.blendColor(0,0,0,1);La[0]=0;La[1]=0;La[2]=0;La[3]=1;T.enable(3042);U.blend_enable=!0;T.blendFuncSeparate(770,771,
773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;T.disable(2929);U.depth_enable=!1;T.disable(2960);U.stencil_enable=!1;if(w=U.profile)y=performance.now(),c.count++;T.useProgram(d.program);D=Ob.angle_instanced_arrays;Ga.setVAO(null);F.buffer=this.sizeBuffer;I=!1;u=null;W=0;r=!1;Z=H=0;da=1;ga=0;Da=5126;Me=xe=Ad=zb=0;B(F)?(I=!0,u=P.createStream(34962,F),Da=u.dtype):(u=P.getBuffer(F))?Da=u.dtype:"constant"in F?(da=2,"number"===typeof F.constant?(Ad=F.constant,xe=Me=zb=0):(Ad=0<F.constant.length?F.constant[0]:
0,xe=1<F.constant.length?F.constant[1]:0,Me=2<F.constant.length?F.constant[2]:0,zb=3<F.constant.length?F.constant[3]:0)):(u=B(F.buffer)?P.createStream(34962,F.buffer):P.getBuffer(F.buffer),Da="type"in F?sa[F.type]:u.dtype,r=!!F.normalized,Z=F.size|0,H=F.offset|0,ga=F.stride|0,W=F.divisor|0);Qe=Oa.location;Bd=X[Qe];if(1===da){Bd.buffer||T.enableVertexAttribArray(Qe);Be=Z||1;if(Bd.type!==Da||Bd.size!==Be||Bd.buffer!==u||Bd.normalized!==r||Bd.offset!==H||Bd.stride!==ga)T.bindBuffer(34962,u.buffer),T.vertexAttribPointer(Qe,
Be,Da,r,ga,H),Bd.type=Da,Bd.size=Be,Bd.buffer=u,Bd.normalized=r,Bd.offset=H,Bd.stride=ga;Bd.divisor!==W&&(D.vertexAttribDivisorANGLE(Qe,W),Bd.divisor=W)}else if(Bd.buffer&&(T.disableVertexAttribArray(Qe),Bd.buffer=null),Bd.x!==Ad||Bd.y!==xe||Bd.z!==Me||Bd.w!==zb)T.vertexAttrib4f(Qe,Ad,xe,Me,zb),Bd.x=Ad,Bd.y=xe,Bd.z=Me,Bd.w=zb;M.buffer=this.sizeBuffer;Vd=!1;Wd=null;ae=0;Yd=!1;nd=qd=0;vd=1;ad=0;sd=5126;Ic=Oc=Ed=Tc=0;B(M)?(Vd=!0,Wd=P.createStream(34962,M),sd=Wd.dtype):(Wd=P.getBuffer(M))?sd=Wd.dtype:
"constant"in M?(vd=2,"number"===typeof M.constant?(Ed=M.constant,Oc=Ic=Tc=0):(Ed=0<M.constant.length?M.constant[0]:0,Oc=1<M.constant.length?M.constant[1]:0,Ic=2<M.constant.length?M.constant[2]:0,Tc=3<M.constant.length?M.constant[3]:0)):(Wd=B(M.buffer)?P.createStream(34962,M.buffer):P.getBuffer(M.buffer),sd="type"in M?sa[M.type]:Wd.dtype,Yd=!!M.normalized,nd=M.size|0,qd=M.offset|0,ad=M.stride|0,ae=M.divisor|0);qc=J.location;gb=X[qc];if(1===vd){gb.buffer||T.enableVertexAttribArray(qc);hd=nd||1;if(gb.type!==
sd||gb.size!==hd||gb.buffer!==Wd||gb.normalized!==Yd||gb.offset!==qd||gb.stride!==ad)T.bindBuffer(34962,Wd.buffer),T.vertexAttribPointer(qc,hd,sd,Yd,ad,qd),gb.type=sd,gb.size=hd,gb.buffer=Wd,gb.normalized=Yd,gb.offset=qd,gb.stride=ad;gb.divisor!==ae&&(D.vertexAttribDivisorANGLE(qc,ae),gb.divisor=ae)}else if(gb.buffer&&(T.disableVertexAttribArray(qc),gb.buffer=null),gb.x!==Ed||gb.y!==Oc||gb.z!==Ic||gb.w!==Tc)T.vertexAttrib4f(qc,Ed,Oc,Ic,Tc),gb.x=Ed,gb.y=Oc,gb.z=Ic,gb.w=Tc;Hb=this.charBuffer;nc=!1;
Xa=null;Qc=0;ac=!1;Id=lc=0;rd=1;Fc=0;dc=5126;Gc=Zb=Xc=Cc=0;B(Hb)?(nc=!0,Xa=P.createStream(34962,Hb),dc=Xa.dtype):(Xa=P.getBuffer(Hb))?dc=Xa.dtype:"constant"in Hb?(rd=2,"number"===typeof Hb.constant?(Xc=Hb.constant,Zb=Gc=Cc=0):(Xc=0<Hb.constant.length?Hb.constant[0]:0,Zb=1<Hb.constant.length?Hb.constant[1]:0,Gc=2<Hb.constant.length?Hb.constant[2]:0,Cc=3<Hb.constant.length?Hb.constant[3]:0)):(Xa=B(Hb.buffer)?P.createStream(34962,Hb.buffer):P.getBuffer(Hb.buffer),dc="type"in Hb?sa[Hb.type]:Xa.dtype,
ac=!!Hb.normalized,Id=Hb.size|0,lc=Hb.offset|0,Fc=Hb.stride|0,Qc=Hb.divisor|0);Ya=ia.location;Ea=X[Ya];if(1===rd){Ea.buffer||T.enableVertexAttribArray(Ya);ud=Id||1;if(Ea.type!==dc||Ea.size!==ud||Ea.buffer!==Xa||Ea.normalized!==ac||Ea.offset!==lc||Ea.stride!==Fc)T.bindBuffer(34962,Xa.buffer),T.vertexAttribPointer(Ya,ud,dc,ac,Fc,lc),Ea.type=dc,Ea.size=ud,Ea.buffer=Xa,Ea.normalized=ac,Ea.offset=lc,Ea.stride=Fc;Ea.divisor!==Qc&&(D.vertexAttribDivisorANGLE(Ya,Qc),Ea.divisor=Qc)}else if(Ea.buffer&&(T.disableVertexAttribArray(Ya),
Ea.buffer=null),Ea.x!==Xc||Ea.y!==Zb||Ea.z!==Gc||Ea.w!==Cc)T.vertexAttrib4f(Ya,Xc,Zb,Gc,Cc),Ea.x=Xc,Ea.y=Zb,Ea.z=Gc,Ea.w=Cc;Ib=this.position;Ua=!1;Vb=null;cb=0;Dc=!1;ye=Xb=0;kc=1;Sb=0;x=5126;ub=ob=Pa=Tb=0;B(Ib)?(Ua=!0,Vb=P.createStream(34962,Ib),x=Vb.dtype):(Vb=P.getBuffer(Ib))?x=Vb.dtype:"constant"in Ib?(kc=2,"number"===typeof Ib.constant?(Pa=Ib.constant,ob=ub=Tb=0):(Pa=0<Ib.constant.length?Ib.constant[0]:0,ob=1<Ib.constant.length?Ib.constant[1]:0,ub=2<Ib.constant.length?Ib.constant[2]:0,Tb=3<Ib.constant.length?
Ib.constant[3]:0)):(Vb=B(Ib.buffer)?P.createStream(34962,Ib.buffer):P.getBuffer(Ib.buffer),x="type"in Ib?sa[Ib.type]:Vb.dtype,Dc=!!Ib.normalized,ye=Ib.size|0,Xb=Ib.offset|0,Sb=Ib.stride|0,cb=Ib.divisor|0);hb=ma.location;Ra=X[hb];if(1===kc){Ra.buffer||T.enableVertexAttribArray(hb);Pc=ye||2;if(Ra.type!==x||Ra.size!==Pc||Ra.buffer!==Vb||Ra.normalized!==Dc||Ra.offset!==Xb||Ra.stride!==Sb)T.bindBuffer(34962,Vb.buffer),T.vertexAttribPointer(hb,Pc,x,Dc,Sb,Xb),Ra.type=x,Ra.size=Pc,Ra.buffer=Vb,Ra.normalized=
Dc,Ra.offset=Xb,Ra.stride=Sb;Ra.divisor!==cb&&(D.vertexAttribDivisorANGLE(hb,cb),Ra.divisor=cb)}else if(Ra.buffer&&(T.disableVertexAttribArray(hb),Ra.buffer=null),Ra.x!==Pa||Ra.y!==ob||Ra.z!==ub||Ra.w!==Tb)T.vertexAttrib4f(hb,Pa,ob,ub,Tb),Ra.x=Pa,Ra.y=ob,Ra.z=ub,Ra.w=Tb;Yb=h.call(this,O,b,0);T.uniform1f(V.location,Yb);jd=l.call(this,O,b,0);T.uniform1f(ka.location,jd);T.uniform1f(la.location,b.align);T.uniform1f(z.location,b.baseline);db=this.viewportArray;T.uniform4f(ea.location,db[0],db[1],db[2],
db[3]);oc=b.color;T.uniform4f(K.location,oc[0],oc[1],oc[2],oc[3]);Yc=m.call(this,O,b,0);T.uniform2f(R.location,Yc[0],Yc[1]);ic=f.call(this,O,b,0);T.uniform2f(S.location,ic[0],ic[1]);jb=this.scale;T.uniform2f(Qa.location,jb[0],jb[1]);kb=this.translate;T.uniform2f(Cb.location,kb[0],kb[1]);va=b.positionOffset;T.uniform2f(na.location,va[0],va[1]);T.uniform1f(aa.location,b.opacity);(pb=k.call(this,O,b,0))&&"framebuffer"===pb._reglType&&(pb=pb.color[0]);ya=pb._texture;T.uniform1i(ta.location,ya.bind());
(Va=pa.elements)?T.bindBuffer(34963,Va.buffer.buffer):Ga.currentVAO&&(Va=Q.getElements(Ga.currentVAO.elements))&&T.bindBuffer(34963,Va.buffer.buffer);bb=b.offset;if(Ba=b.count)eb=pa.instances,0<eb?Va?D.drawElementsInstancedANGLE(0,Ba,Va.type,bb<<(Va.type-5121>>1),eb):D.drawArraysInstancedANGLE(0,bb,Ba,eb):0>eb&&(Va?T.drawElements(0,Ba,Va.type,bb<<(Va.type-5121>>1)):T.drawArrays(0,bb,Ba)),U.dirty=!0,Ga.setVAO(null),O.viewportWidth=t,O.viewportHeight=v,w&&(c.cpuTime+=performance.now()-y),I&&P.destroyStream(u),
Vd&&P.destroyStream(Wd),nc&&P.destroyStream(Xa),Ua&&P.destroyStream(Vb),ya.unbind()},scope:function(a,f,k){var d,v,l,m,h,y,D,u,G,W,A,r,H,z,E,J,la,R,S,ta,K,L,N,Q,V,T,ba,ia,aa,X,Y,fa,ea,ha,ja,ka,ma,na,ua,ra,Ha,Ga,La,Oa,Qa,ab,zc,tb,nb,Cb,td,Ob,cc,Zb,pc,Ya,Ea,jc,Ib,Ua,Vb,cb,Dc,Xb,Nc,kc,Sb,x,Tb,Pa,ob,ub,hb,Ra,Pc,Yb,cd,db,oc,Yc,ic,jb,kb,va,pb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Jb,Lb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,qb,rb,Za,$a,rc,dd,tc,Wa,Mb,Zc,Ia,vc,Sa,Ca,lb,vb,Db,sb,uc,wb,wd,sc,Fd,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,
xb,Nb,Rb,fc,hc,Ze,xc,yc,Ac,Kc,$c,Rc,Lc,Kb,Eb,Mc,Ec,Sc,gc,Vc;d=this.viewport;v=d.x|0;l=d.y|0;m="width"in d?d.width|0:O.framebufferWidth-v;h="height"in d?d.height|0:O.framebufferHeight-l;y=O.viewportWidth;O.viewportWidth=m;D=O.viewportHeight;O.viewportHeight=h;u=Z[0];Z[0]=v;G=Z[1];Z[1]=l;W=Z[2];Z[2]=m;A=Z[3];Z[3]=h;r=zb[0];zb[0]=0;H=zb[1];zb[1]=0;z=zb[2];zb[2]=0;E=zb[3];zb[3]=1;J=oa.blend_enable;oa.blend_enable=!0;la=ga[0];ga[0]=770;R=ga[1];ga[1]=771;S=ga[2];ga[2]=773;ta=ga[3];ga[3]=1;K=oa.depth_enable;
oa.depth_enable=!1;L=oa.stencil_enable;oa.stencil_enable=!1;if(N=U.profile)Q=performance.now(),c.count++;V=a.offset;T=pa.offset;pa.offset=V;ba=a.count;ia=pa.count;pa.count=ba;aa=pa.primitive;pa.primitive=0;X=a.align;Y=Da[64];Da[64]=X;fa=b.call(this,O,a,k);ea=Da[69];Da[69]=fa;ha=q.call(this,O,a,k);ja=Da[67];Da[67]=ha;ka=I.call(this,O,a,k);ma=Da[66];Da[66]=ka;na=a.baseline;ua=Da[65];Da[65]=na;ra=w.call(this,O,a,k);Ha=Da[62];Da[62]=ra;Ga=a.color;La=Da[14];Da[14]=Ga;Oa=e.call(this,O,a,k);Qa=Da[63];Da[63]=
Oa;ab=a.opacity;zc=Da[10];Da[10]=ab;tb=a.positionOffset;nb=Da[68];Da[68]=tb;Cb=this.scale;td=Da[6];Da[6]=Cb;Ob=this.translate;cc=Da[8];Da[8]=Ob;Zb=this.viewportArray;pc=Da[3];Da[3]=Zb;Ya=this.charBuffer;Ea=!1;jc=null;Ib=0;Ua=!1;cb=Vb=0;Dc=1;Xb=0;Nc=5126;Tb=x=Sb=kc=0;B(Ya)?(Ea=!0,jc=P.createStream(34962,Ya),Nc=jc.dtype):(jc=P.getBuffer(Ya))?Nc=jc.dtype:"constant"in Ya?(Dc=2,"number"===typeof Ya.constant?(Sb=Ya.constant,x=Tb=kc=0):(Sb=0<Ya.constant.length?Ya.constant[0]:0,x=1<Ya.constant.length?Ya.constant[1]:
0,Tb=2<Ya.constant.length?Ya.constant[2]:0,kc=3<Ya.constant.length?Ya.constant[3]:0)):(jc=B(Ya.buffer)?P.createStream(34962,Ya.buffer):P.getBuffer(Ya.buffer),Nc="type"in Ya?sa[Ya.type]:jc.dtype,Ua=!!Ya.normalized,cb=Ya.size|0,Vb=Ya.offset|0,Xb=Ya.stride|0,Ib=Ya.divisor|0);Pa=g.buffer;g.buffer=jc;ob=g.divisor;g.divisor=Ib;ub=g.normalized;g.normalized=Ua;hb=g.offset;g.offset=Vb;Ra=g.size;g.size=cb;Pc=g.state;g.state=Dc;Yb=g.stride;g.stride=Xb;cd=g.type;g.type=Nc;db=g.w;g.w=kc;oc=g.x;g.x=Sb;Yc=g.y;g.y=
x;ic=g.z;g.z=Tb;M.buffer=this.sizeBuffer;jb=!1;kb=null;va=0;pb=!1;Va=ya=0;bb=1;Ba=0;eb=5126;Ta=Ab=Bb=Na=0;B(M)?(jb=!0,kb=P.createStream(34962,M),eb=kb.dtype):(kb=P.getBuffer(M))?eb=kb.dtype:"constant"in M?(bb=2,"number"===typeof M.constant?(Bb=M.constant,Ab=Ta=Na=0):(Bb=0<M.constant.length?M.constant[0]:0,Ab=1<M.constant.length?M.constant[1]:0,Ta=2<M.constant.length?M.constant[2]:0,Na=3<M.constant.length?M.constant[3]:0)):(kb=B(M.buffer)?P.createStream(34962,M.buffer):P.getBuffer(M.buffer),eb="type"in
M?sa[M.type]:kb.dtype,pb=!!M.normalized,Va=M.size|0,ya=M.offset|0,Ba=M.stride|0,va=M.divisor|0);Hc=p.buffer;p.buffer=kb;Jb=p.divisor;p.divisor=va;Lb=p.normalized;p.normalized=pb;Ub=p.offset;p.offset=ya;wa=p.size;p.size=Va;Jd=p.state;p.state=bb;Ma=p.stride;p.stride=Ba;Pb=p.type;p.type=eb;fb=p.w;p.w=Na;ib=p.x;p.x=Bb;xa=p.y;p.y=Ab;ec=p.z;p.z=Ta;Fa=this.position;qb=!1;rb=null;Za=0;$a=!1;dd=rc=0;tc=1;Wa=0;Mb=5126;Sa=vc=Ia=Zc=0;B(Fa)?(qb=!0,rb=P.createStream(34962,Fa),Mb=rb.dtype):(rb=P.getBuffer(Fa))?
Mb=rb.dtype:"constant"in Fa?(tc=2,"number"===typeof Fa.constant?(Ia=Fa.constant,vc=Sa=Zc=0):(Ia=0<Fa.constant.length?Fa.constant[0]:0,vc=1<Fa.constant.length?Fa.constant[1]:0,Sa=2<Fa.constant.length?Fa.constant[2]:0,Zc=3<Fa.constant.length?Fa.constant[3]:0)):(rb=B(Fa.buffer)?P.createStream(34962,Fa.buffer):P.getBuffer(Fa.buffer),Mb="type"in Fa?sa[Fa.type]:rb.dtype,$a=!!Fa.normalized,dd=Fa.size|0,rc=Fa.offset|0,Wa=Fa.stride|0,Za=Fa.divisor|0);Ca=n.buffer;n.buffer=rb;lb=n.divisor;n.divisor=Za;vb=n.normalized;
n.normalized=$a;Db=n.offset;n.offset=rc;sb=n.size;n.size=dd;uc=n.state;n.state=tc;wb=n.stride;n.stride=Wa;wd=n.type;n.type=Mb;sc=n.w;n.w=Zc;Fd=n.x;n.x=Ia;Jc=n.y;n.y=vc;ed=n.z;n.z=Sa;F.buffer=this.sizeBuffer;fd=!1;Wb=null;bc=0;Qb=!1;$b=Ja=0;mb=1;xb=0;Nb=5126;Ze=hc=fc=Rb=0;B(F)?(fd=!0,Wb=P.createStream(34962,F),Nb=Wb.dtype):(Wb=P.getBuffer(F))?Nb=Wb.dtype:"constant"in F?(mb=2,"number"===typeof F.constant?(fc=F.constant,hc=Ze=Rb=0):(fc=0<F.constant.length?F.constant[0]:0,hc=1<F.constant.length?F.constant[1]:
0,Ze=2<F.constant.length?F.constant[2]:0,Rb=3<F.constant.length?F.constant[3]:0)):(Wb=B(F.buffer)?P.createStream(34962,F.buffer):P.getBuffer(F.buffer),Nb="type"in F?sa[F.type]:Wb.dtype,Qb=!!F.normalized,$b=F.size|0,Ja=F.offset|0,xb=F.stride|0,bc=F.divisor|0);xc=t.buffer;t.buffer=Wb;yc=t.divisor;t.divisor=bc;Ac=t.normalized;t.normalized=Qb;Kc=t.offset;t.offset=Ja;$c=t.size;t.size=$b;Rc=t.state;t.state=mb;Lc=t.stride;t.stride=xb;Kb=t.type;t.type=Nb;Eb=t.w;t.w=Rb;Mc=t.x;t.x=fc;Ec=t.y;t.y=hc;Sc=t.z;t.z=
Ze;gc=da.vert;da.vert=61;Vc=da.frag;da.frag=60;U.dirty=!0;f(O,a,k);O.viewportWidth=y;O.viewportHeight=D;Z[0]=u;Z[1]=G;Z[2]=W;Z[3]=A;zb[0]=r;zb[1]=H;zb[2]=z;zb[3]=E;oa.blend_enable=J;ga[0]=la;ga[1]=R;ga[2]=S;ga[3]=ta;oa.depth_enable=K;oa.stencil_enable=L;N&&(c.cpuTime+=performance.now()-Q);pa.offset=T;pa.count=ia;pa.primitive=aa;Da[64]=Y;Da[69]=ea;Da[67]=ja;Da[66]=ma;Da[65]=ua;Da[62]=Ha;Da[14]=La;Da[63]=Qa;Da[10]=zc;Da[68]=nb;Da[6]=td;Da[8]=cc;Da[3]=pc;Ea&&P.destroyStream(jc);g.buffer=Pa;g.divisor=
ob;g.normalized=ub;g.offset=hb;g.size=Ra;g.state=Pc;g.stride=Yb;g.type=cd;g.w=db;g.x=oc;g.y=Yc;g.z=ic;jb&&P.destroyStream(kb);p.buffer=Hc;p.divisor=Jb;p.normalized=Lb;p.offset=Ub;p.size=wa;p.state=Jd;p.stride=Ma;p.type=Pb;p.w=fb;p.x=ib;p.y=xa;p.z=ec;qb&&P.destroyStream(rb);n.buffer=Ca;n.divisor=lb;n.normalized=vb;n.offset=Db;n.size=sb;n.state=uc;n.stride=wb;n.type=wd;n.w=sc;n.x=Fd;n.y=Jc;n.z=ed;fd&&P.destroyStream(Wb);t.buffer=xc;t.divisor=yc;t.normalized=Ac;t.offset=Kc;t.size=$c;t.state=Rc;t.stride=
Lc;t.type=Kb;t.w=Eb;t.x=Mc;t.y=Ec;t.z=Sc;da.vert=gc;da.frag=Vc;U.dirty=!0}}}}},{}],25:[function(d,h,r){var a=d("./sorted-object-keys");h.exports=function(c,d){for(var h=a(d),l=0;l<h.length;++l)c[h[l]]=d[h[l]];return c}},{"./sorted-object-keys":34}],26:[function(d,h,r){function a(a,c,d,f,k,b){for(var q=0;q<c;++q)for(var h=a[q],w=0;w<d;++w)for(var e=h[w],g=0;g<f;++g)k[b++]=e[g]}function c(d,l,m,f,k){for(var b=1,q=m+1;q<l.length;++q)b*=l[q];var h=l[m];if(4===l.length-m){var w=l[m+1],e=l[m+2];l=l[m+3];
for(q=0;q<h;++q)a(d[q],w,e,l,f,k),k+=b}else for(q=0;q<h;++q)c(d[q],l,m+1,f,k),k+=b}var A=d("./pool");h.exports={shape:function(a){for(var c=[];a.length;a=a[0])c.push(a.length);return c},flatten:function(d,l,m,f){var k=1;if(l.length)for(var b=0;b<l.length;++b)k*=l[b];else k=0;m=f||A.allocType(m,k);switch(l.length){case 0:break;case 1:f=l[0];for(l=0;l<f;++l)m[l]=d[l];break;case 2:f=l[0];l=l[1];for(b=k=0;b<f;++b)for(var q=d[b],h=0;h<l;++h)m[k++]=q[h];break;case 3:a(d,l[0],l[1],l[2],m,0);break;default:c(d,
l,0,m,0)}return m}}},{"./pool":32}],27:[function(d,h,r){var a=d("./is-typed-array");h.exports=function(c){return Array.isArray(c)||a(c)}},{"./is-typed-array":30}],28:[function(d,h,r){var a=d("./is-typed-array");h.exports=function(c){return!!c&&"object"===typeof c&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&"number"===typeof c.offset&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||a(c.data))}},{"./is-typed-array":30}],29:[function(d,h,r){h.exports=function(a){return!(a&a-1)&&!!a}},
{}],30:[function(d,h,r){h.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(d,h,r){h.exports=function(a,c){for(var d=Array(a),h=0;h<a;++h)d[h]=c(h);return d}},{}],32:[function(d,h,r){function a(a){var c,d;c=(65535<a)<<4;a>>>=c;d=(255<a)<<3;a>>>=d;c|=d;d=(15<a)<<2;a>>>=
d;c|=d;d=(3<a)<<1;return c|d|a>>>d>>1}function c(){function c(f){a:{for(var k=16;268435456>=k;k*=16)if(f<=k){f=k;break a}f=0}k=m[a(f)>>2];return 0<k.length?k.pop():new ArrayBuffer(f)}function d(c){m[a(c.byteLength)>>2].push(c)}var m=A(8,function(){return[]});return{alloc:c,free:d,allocType:function(a,k){var b=null;switch(a){case 5120:b=new Int8Array(c(k),0,k);break;case 5121:b=new Uint8Array(c(k),0,k);break;case 5122:b=new Int16Array(c(2*k),0,k);break;case 5123:b=new Uint16Array(c(2*k),0,k);break;
case 5124:b=new Int32Array(c(4*k),0,k);break;case 5125:b=new Uint32Array(c(4*k),0,k);break;case 5126:b=new Float32Array(c(4*k),0,k);break;default:return null}return b.length!==k?b.subarray(0,k):b},freeType:function(a){d(a.buffer)}}}var A=d("./loop");d=c();d.zero=c();h.exports=d},{"./loop":31}],33:[function(d,h,r){h.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?
function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(d,h,r){h.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(d,h,r){var a=d("./pool"),c=new Float32Array(1),A=new Uint32Array(c.buffer);h.exports=function(d){for(var l=a.allocType(5123,d.length),m=0;m<d.length;++m)if(isNaN(d[m]))l[m]=65535;else if(Infinity===d[m])l[m]=31744;else if(-Infinity===d[m])l[m]=64512;else{c[0]=d[m];var f=A[0],k=f>>>31<<15,b=(f<<1>>>24)-127,f=f>>13&1023;l[m]=-24>b?k:-14>b?k+(f+1024>>
-14-b):15<b?k+31744:k+(b+15<<10)+f}return l}},{"./pool":32}],36:[function(d,h,r){var a=d("./sorted-object-keys");h.exports=function(c){return a(c).map(function(a){return c[a]})}},{"./sorted-object-keys":34}],37:[function(d,h,r){function a(a,c,b){function q(){var e=window.innerWidth,g=window.innerHeight;a!==document.body&&(g=d.getBoundingClientRect(),e=g.right-g.left,g=g.bottom-g.top);d.width=b*e;d.height=b*g}var d=document.createElement("canvas");m(d.style,{border:0,margin:0,padding:0,top:0,left:0,
width:"100%",height:"100%"});a.appendChild(d);a===document.body&&(d.style.position="absolute",m(a.style,{margin:0,padding:0}));var l;a!==document.body&&"function"===typeof ResizeObserver?(l=new ResizeObserver(function(){setTimeout(q)}),l.observe(a)):window.addEventListener("resize",q,!1);q();return{canvas:d,onDestroy:function(){l?l.disconnect():window.removeEventListener("resize",q);a.removeChild(d)}}}function c(a,c){function b(b){try{return a.getContext(b,c)}catch(d){return null}}return b("webgl")||
b("experimental-webgl")||b("webgl-experimental")}function A(a){if("string"===typeof a)return a.split();l(Array.isArray(a),"invalid extension array");return a}function G(a){return"string"===typeof a?(l("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var l=d("./util/check"),m=d("./util/extend");h.exports=function(f){var k=f||{},b,q,d,m;f={};var e=[],g=[],p="undefined"===typeof window?1:window.devicePixelRatio,n=!1,t=function(b){b&&l.raise(b)},v=function(){};
"string"===typeof k?(l("undefined"!==typeof document,"selector queries only supported in DOM environments"),b=document.querySelector(k),l(b,"invalid query string for element")):"object"===typeof k?"string"===typeof k.nodeName&&"function"===typeof k.appendChild&&"function"===typeof k.getBoundingClientRect?b=k:"function"===typeof k.drawArrays||"function"===typeof k.drawElements?(m=k,d=m.canvas):(l.constructor(k),"gl"in k?m=k.gl:"canvas"in k?d=G(k.canvas):"container"in k&&(q=G(k.container)),"attributes"in
k&&(f=k.attributes,l.type(f,"object","invalid context attributes")),"extensions"in k&&(e=A(k.extensions)),"optionalExtensions"in k&&(g=A(k.optionalExtensions)),"onDone"in k&&(l.type(k.onDone,"function","invalid or missing onDone callback"),t=k.onDone),"profile"in k&&(n=!!k.profile),"pixelRatio"in k&&(p=+k.pixelRatio,l(0<p,"invalid pixel ratio"))):l.raise("invalid arguments to regl");b&&("canvas"===b.nodeName.toLowerCase()?d=b:q=b);if(!m){if(!d){l("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");
b=a(q||document.body,t,p);if(!b)return null;d=b.canvas;v=b.onDestroy}void 0===f.premultipliedAlpha&&(f.premultipliedAlpha=!0);m=c(d,f)}return m?{gl:m,canvas:d,container:q,extensions:e,optionalExtensions:g,pixelRatio:p,profile:n,onDone:t,onDestroy:v}:(v(),t("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(d,h,r){var a=d("element-size");h.exports=function(d,h,l){function m(){var k=m.parent||d.parentNode;
if("function"===typeof k)var b=k(c)||c,k=b[0],b=b[1];else k&&k!==document.body?(b=a(k),k=b[0]|0,b=b[1]|0):(k=window.innerWidth,b=window.innerHeight);f?(d.setAttribute("width",k*m.scale+"px"),d.setAttribute("height",b*m.scale+"px")):(d.width=k*m.scale,d.height=b*m.scale);d.style.width=k+"px";d.style.height=b+"px";return m}var f="SVG"===d.nodeName.toUpperCase();d.style.position=d.style.position||"absolute";d.style.top=0;d.style.left=0;m.scale=parseFloat(l||1);m.parent=h;return m()};var c=new Float32Array(2)},
{"element-size":42}],39:[function(d,h,r){var a=d("orbit-camera"),c=d("scroll-speed"),A=d("mouse-position"),G=d("mouse-pressed"),l=d("key-pressed");h.exports=function(d,f){f=f||{};f.pan=!1!==f.pan;f.scale=!1!==f.scale;f.rotate=!1!==f.rotate;var k=c(d,f.scale),b=G(d,f.rotate),q=A(d),h=a([0,10,30],[0,0,0],[0,1,0]);h.tick=function(){var a=l("<control>")||l("<alt>"),e=l("<shift>"),g=d.height,c=d.width;f.rotate&&b.left&&!a&&!e&&h.rotate([q.x/c-.5,q.y/g-.5],[q.prevX/c-.5,q.prevY/g-.5]);(f.pan&&b.right||
b.left&&a&&!e)&&h.pan([1*(q.x-q.prevX)/c,1*(q.y-q.prevY)/g]);f.scale&&k[1]&&(h.distance*=Math.exp(k[1]/g));if(f.scale&&(b.middle||b.left&&!a&&e)){a=q.y-q.prevY;if(!a)return;h.distance*=Math.exp(a/g)}k.flush();q.flush()};return h}},{"key-pressed":75,"mouse-position":40,"mouse-pressed":41,"orbit-camera":76,"scroll-speed":79}],40:[function(d,h,r){var a=d("events/");h.exports=function(c,d){var h=new a;h.x=0;h.y=0;h.prevX=0;h.prevY=0;h.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===
typeof window)return h;d=d||c||window;c=c||document.body;d.addEventListener("mousemove",c===document.body||c===window?function(a){h.prevX=h.x;h.prevY=h.y;h.x=a.clientX;h.y=a.clientY;h.emit("move",a)}:function(a){h.prevX=h.x;h.prevY=h.y;var d=c.getBoundingClientRect();h.x=a.clientX-d.left;h.y=a.clientY-d.top;h.emit("move",a)},!1);return h}},{"events/":43}],41:[function(d,h,r){var a=d("events/"),c=["left","middle","right"];h.exports=function(d,h){function l(a){f.right=!1;f[c[a.button]]=!0;f.emit("down",
a);if(h){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function m(a){f.right=!1;f[c[a.button]]=!1;f.emit("up",a);h&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var f=new a;f.left=!1;f.right=!1;f.middle=!1;"undefined"!==typeof window&&(d=d||window,d.addEventListener("mousedown",l,!1),d.addEventListener("mouseup",m,!1),h&&d.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return f}},{"events/":43}],42:[function(d,
h,r){function a(a){return parseFloat(a)||0}h.exports=function(c){if(c===window||c===document.body)return[window.innerWidth,window.innerHeight];if(!c.parentNode){var d=!0;document.body.appendChild(c)}var h=c.getBoundingClientRect(),l=getComputedStyle(c),m=(h.height|0)+a(l.getPropertyValue("margin-top"))+a(l.getPropertyValue("margin-bottom")),h=(h.width|0)+a(l.getPropertyValue("margin-left"))+a(l.getPropertyValue("margin-right"));d&&document.body.removeChild(c);return[h,m]}},{}],43:[function(d,h,r){function a(){this._events=
this._events||{};this._maxListeners=this._maxListeners||void 0}function c(a){return"function"===typeof a}function A(a){return"object"===typeof a&&null!==a}h.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var d,h,f,k;this._events||(this._events={});
if("error"===a&&(!this._events.error||A(this._events.error)&&!this._events.error.length)){d=arguments[1];if(d instanceof Error)throw d;h=Error('Uncaught, unspecified "error" event. ('+d+")");h.context=d;throw h;}h=this._events[a];if(void 0===h)return!1;if(c(h))switch(arguments.length){case 1:h.call(this);break;case 2:h.call(this,arguments[1]);break;case 3:h.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),h.apply(this,d)}else if(A(h))for(d=Array.prototype.slice.call(arguments,
1),k=h.slice(),h=k.length,f=0;f<h;f++)k[f].apply(this,d);return!0};a.prototype.addListener=function(d,h){var m;if(!c(h))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",d,c(h.listener)?h.listener:h);this._events[d]?A(this._events[d])?this._events[d].push(h):this._events[d]=[this._events[d],h]:this._events[d]=h;A(this._events[d])&&!this._events[d].warned&&(m=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&
0<m&&this._events[d].length>m&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[d].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,d){function h(){this.removeListener(a,h);f||(f=!0,d.apply(this,arguments))}if(!c(d))throw TypeError("listener must be a function");var f=!1;h.listener=
d;this.on(a,h);return this};a.prototype.removeListener=function(a,d){var h,f,k;if(!c(d))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;h=this._events[a];k=h.length;f=-1;if(h===d||c(h.listener)&&h.listener===d)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,d);else if(A(h)){for(;0<k--;)if(h[k]===d||h[k].listener&&h[k].listener===d){f=k;break}if(0>f)return this;1===h.length?(h.length=0,delete this._events[a]):h.splice(f,
1);this._events.removeListener&&this.emit("removeListener",a,d)}return this};a.prototype.removeAllListeners=function(a){var d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(d in this._events)"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events={};return this}d=this._events[a];if(c(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,
d[d.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(c(a))return 1;if(a)return a.length}return 0};a.listenerCount=function(a,c){return a.listenerCount(c)}},{}],44:[function(d,h,r){h.exports=function(a,c){var d=c[0],h=c[1],l=c[2],m=c[3],f=c[4],k=c[5],b=c[6],q=c[7],I=c[8],w=c[9],e=c[10],g=c[11],
p=c[12],n=c[13],t=c[14],v=c[15];a[0]=k*(e*v-g*t)-w*(b*v-q*t)+n*(b*g-q*e);a[1]=-(h*(e*v-g*t)-w*(l*v-m*t)+n*(l*g-m*e));a[2]=h*(b*v-q*t)-k*(l*v-m*t)+n*(l*q-m*b);a[3]=-(h*(b*g-q*e)-k*(l*g-m*e)+w*(l*q-m*b));a[4]=-(f*(e*v-g*t)-I*(b*v-q*t)+p*(b*g-q*e));a[5]=d*(e*v-g*t)-I*(l*v-m*t)+p*(l*g-m*e);a[6]=-(d*(b*v-q*t)-f*(l*v-m*t)+p*(l*q-m*b));a[7]=d*(b*g-q*e)-f*(l*g-m*e)+I*(l*q-m*b);a[8]=f*(w*v-g*n)-I*(k*v-q*n)+p*(k*g-q*w);a[9]=-(d*(w*v-g*n)-I*(h*v-m*n)+p*(h*g-m*w));a[10]=d*(k*v-q*n)-f*(h*v-m*n)+p*(h*q-m*k);a[11]=
-(d*(k*g-q*w)-f*(h*g-m*w)+I*(h*q-m*k));a[12]=-(f*(w*t-e*n)-I*(k*t-b*n)+p*(k*e-b*w));a[13]=d*(w*t-e*n)-I*(h*t-l*n)+p*(h*e-l*w);a[14]=-(d*(k*t-b*n)-f*(h*t-l*n)+p*(h*b-l*k));a[15]=d*(k*e-b*w)-f*(h*e-l*w)+I*(h*b-l*k);return a}},{}],45:[function(d,h,r){h.exports=function(a){var c=new Float32Array(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c}},{}],46:[function(d,h,
r){h.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],47:[function(d,h,r){h.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(d,h,r){h.exports=function(a){var c=a[0],d=a[1],h=a[2],l=a[3],m=a[4],f=a[5],
k=a[6],b=a[7],q=a[8],I=a[9],w=a[10],e=a[11],g=a[12],p=a[13],n=a[14];a=a[15];return(c*f-d*m)*(w*a-e*n)-(c*k-h*m)*(I*a-e*p)+(c*b-l*m)*(I*n-w*p)+(d*k-h*f)*(q*a-e*g)-(d*b-l*f)*(q*n-w*g)+(h*b-l*k)*(q*p-I*g)}},{}],49:[function(d,h,r){h.exports=function(a,c){var d=c[0],h=c[1],l=c[2],m=c[3],f=d+d,k=h+h,b=l+l,d=d*f,q=h*f,h=h*k,I=l*f,w=l*k,l=l*b,f=m*f,k=m*k,m=m*b;a[0]=1-h-l;a[1]=q+m;a[2]=I-k;a[3]=0;a[4]=q-m;a[5]=1-d-l;a[6]=w+f;a[7]=0;a[8]=I+k;a[9]=w-f;a[10]=1-d-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},
{}],50:[function(d,h,r){h.exports=function(a,c,d){var h,l,m=d[0],f=d[1];d=d[2];h=Math.sqrt(m*m+f*f+d*d);if(1E-6>Math.abs(h))return null;h=1/h;m*=h;f*=h;d*=h;h=Math.sin(c);c=Math.cos(c);l=1-c;a[0]=m*m*l+c;a[1]=f*m*l+d*h;a[2]=d*m*l-f*h;a[3]=0;a[4]=m*f*l-d*h;a[5]=f*f*l+c;a[6]=d*f*l+m*h;a[7]=0;a[8]=m*d*l+f*h;a[9]=f*d*l-m*h;a[10]=d*d*l+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(d,h,r){h.exports=function(a,c,d){var h=c[0],l=c[1],m=c[2],f=c[3],k=h+h,b=l+l,q=m+m;c=h*k;var I=h*b,
h=h*q,w=l*b,l=l*q,m=m*q,k=f*k,b=f*b,f=f*q;a[0]=1-(w+m);a[1]=I+f;a[2]=h-b;a[3]=0;a[4]=I-f;a[5]=1-(c+m);a[6]=l+k;a[7]=0;a[8]=h+b;a[9]=l-k;a[10]=1-(c+w);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}},{}],52:[function(d,h,r){h.exports=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(d,h,r){h.exports=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}},{}],54:[function(d,h,r){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(d,h,r){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=h;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],
56:[function(d,h,r){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=h;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(d,h,r){h.exports=function(a,c,d,h,l,m,f){var k=1/(d-c),b=1/(l-h),q=1/(m-f);a[0]=2*m*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*m*b;a[6]=0;a[7]=0;a[8]=(d+c)*k;a[9]=(l+h)*b;a[10]=(f+m)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*m*2*q;a[15]=0;return a}},{}],58:[function(d,h,r){h.exports=function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(d,h,r){h.exports={create:d("./create"),clone:d("./clone"),copy:d("./copy"),identity:d("./identity"),transpose:d("./transpose"),invert:d("./invert"),adjoint:d("./adjoint"),determinant:d("./determinant"),multiply:d("./multiply"),translate:d("./translate"),scale:d("./scale"),rotate:d("./rotate"),rotateX:d("./rotateX"),rotateY:d("./rotateY"),rotateZ:d("./rotateZ"),
fromRotation:d("./fromRotation"),fromRotationTranslation:d("./fromRotationTranslation"),fromScaling:d("./fromScaling"),fromTranslation:d("./fromTranslation"),fromXRotation:d("./fromXRotation"),fromYRotation:d("./fromYRotation"),fromZRotation:d("./fromZRotation"),fromQuat:d("./fromQuat"),frustum:d("./frustum"),perspective:d("./perspective"),perspectiveFromFieldOfView:d("./perspectiveFromFieldOfView"),ortho:d("./ortho"),lookAt:d("./lookAt"),str:d("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,
"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(d,h,r){h.exports=function(a,
c){var d=c[0],h=c[1],l=c[2],m=c[3],f=c[4],k=c[5],b=c[6],q=c[7],I=c[8],w=c[9],e=c[10],g=c[11],p=c[12],n=c[13],t=c[14],v=c[15],D=d*k-h*f,y=d*b-l*f,W=d*q-m*f,u=h*b-l*k,r=h*q-m*k,la=l*q-m*b,ta=I*n-w*p,S=I*t-e*p,R=I*v-g*p,z=w*t-e*n,ia=w*v-g*n,J=e*v-g*t,V=D*J-y*ia+W*z+u*R-r*S+la*ta;if(!V)return null;V=1/V;a[0]=(k*J-b*ia+q*z)*V;a[1]=(l*ia-h*J-m*z)*V;a[2]=(n*la-t*r+v*u)*V;a[3]=(e*r-w*la-g*u)*V;a[4]=(b*R-f*J-q*S)*V;a[5]=(d*J-l*R+m*S)*V;a[6]=(t*W-p*la-v*y)*V;a[7]=(I*la-e*W+g*y)*V;a[8]=(f*ia-k*R+q*ta)*V;a[9]=
(h*R-d*ia-m*ta)*V;a[10]=(p*r-n*W+v*D)*V;a[11]=(w*W-I*r-g*D)*V;a[12]=(k*S-f*z-b*ta)*V;a[13]=(d*z-h*S+l*ta)*V;a[14]=(n*y-p*u-t*D)*V;a[15]=(I*u-w*y+e*D)*V;return a}},{}],61:[function(d,h,r){var a=d("./identity");h.exports=function(c,d,h,l){var m,f,k,b,q,I,w,e,g=d[0],p=d[1];d=d[2];k=l[0];b=l[1];f=l[2];w=h[0];l=h[1];m=h[2];if(1E-6>Math.abs(g-w)&&1E-6>Math.abs(p-l)&&1E-6>Math.abs(d-m))return a(c);h=g-w;l=p-l;w=d-m;e=1/Math.sqrt(h*h+l*l+w*w);h*=e;l*=e;w*=e;m=b*w-f*l;f=f*h-k*w;k=k*l-b*h;(e=Math.sqrt(m*m+
f*f+k*k))?(e=1/e,m*=e,f*=e,k*=e):k=f=m=0;b=l*k-w*f;q=w*m-h*k;I=h*f-l*m;(e=Math.sqrt(b*b+q*q+I*I))?(e=1/e,b*=e,q*=e,I*=e):I=q=b=0;c[0]=m;c[1]=b;c[2]=h;c[3]=0;c[4]=f;c[5]=q;c[6]=l;c[7]=0;c[8]=k;c[9]=I;c[10]=w;c[11]=0;c[12]=-(m*g+f*p+k*d);c[13]=-(b*g+q*p+I*d);c[14]=-(h*g+l*p+w*d);c[15]=1;return c}},{"./identity":58}],62:[function(d,h,r){h.exports=function(a,c,d){var h=c[0],l=c[1],m=c[2],f=c[3],k=c[4],b=c[5],q=c[6],I=c[7],w=c[8],e=c[9],g=c[10],p=c[11],n=c[12],t=c[13],v=c[14];c=c[15];var D=d[0],y=d[1],
W=d[2],u=d[3];a[0]=D*h+y*k+W*w+u*n;a[1]=D*l+y*b+W*e+u*t;a[2]=D*m+y*q+W*g+u*v;a[3]=D*f+y*I+W*p+u*c;D=d[4];y=d[5];W=d[6];u=d[7];a[4]=D*h+y*k+W*w+u*n;a[5]=D*l+y*b+W*e+u*t;a[6]=D*m+y*q+W*g+u*v;a[7]=D*f+y*I+W*p+u*c;D=d[8];y=d[9];W=d[10];u=d[11];a[8]=D*h+y*k+W*w+u*n;a[9]=D*l+y*b+W*e+u*t;a[10]=D*m+y*q+W*g+u*v;a[11]=D*f+y*I+W*p+u*c;D=d[12];y=d[13];W=d[14];u=d[15];a[12]=D*h+y*k+W*w+u*n;a[13]=D*l+y*b+W*e+u*t;a[14]=D*m+y*q+W*g+u*v;a[15]=D*f+y*I+W*p+u*c;return a}},{}],63:[function(d,h,r){h.exports=function(a,
c,d,h,l,m,f){var k=1/(c-d),b=1/(h-l),q=1/(m-f);a[0]=-2*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(c+d)*k;a[13]=(l+h)*b;a[14]=(f+m)*q;a[15]=1;return a}},{}],64:[function(d,h,r){h.exports=function(a,c,d,h,l){c=1/Math.tan(c/2);var m=1/(h-l);a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(l+h)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*l*h*m;a[15]=0;return a}},{}],65:[function(d,h,r){h.exports=function(a,c,d,h){var l=Math.tan(c.upDegrees*
Math.PI/180),m=Math.tan(c.downDegrees*Math.PI/180),f=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var k=2/(f+c),b=2/(l+m);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=-((f-c)*k*.5);a[9]=(l-m)*b*.5;a[10]=h/(d-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*d/(d-h);a[15]=0;return a}},{}],66:[function(d,h,r){h.exports=function(a,c,d,h){var l=h[0],m=h[1];h=h[2];var f=Math.sqrt(l*l+m*m+h*h),k,b,q,I,w,e,g,p,n,t,v,D,y,W,u,r,la,ta,S,R;if(1E-6>Math.abs(f))return null;f=1/
f;l*=f;m*=f;h*=f;k=Math.sin(d);b=Math.cos(d);q=1-b;d=c[0];f=c[1];I=c[2];w=c[3];e=c[4];g=c[5];p=c[6];n=c[7];t=c[8];v=c[9];D=c[10];y=c[11];W=l*l*q+b;u=m*l*q+h*k;r=h*l*q-m*k;la=l*m*q-h*k;ta=m*m*q+b;S=h*m*q+l*k;R=l*h*q+m*k;l=m*h*q-l*k;m=h*h*q+b;a[0]=d*W+e*u+t*r;a[1]=f*W+g*u+v*r;a[2]=I*W+p*u+D*r;a[3]=w*W+n*u+y*r;a[4]=d*la+e*ta+t*S;a[5]=f*la+g*ta+v*S;a[6]=I*la+p*ta+D*S;a[7]=w*la+n*ta+y*S;a[8]=d*R+e*l+t*m;a[9]=f*R+g*l+v*m;a[10]=I*R+p*l+D*m;a[11]=w*R+n*l+y*m;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=
c[15]);return a}},{}],67:[function(d,h,r){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var l=c[4],m=c[5],f=c[6],k=c[7],b=c[8],q=c[9],I=c[10],w=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=l*d+b*h;a[5]=m*d+q*h;a[6]=f*d+I*h;a[7]=k*d+w*h;a[8]=b*d-l*h;a[9]=q*d-m*h;a[10]=I*d-f*h;a[11]=w*d-k*h;return a}},{}],68:[function(d,h,r){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var l=c[0],m=c[1],f=c[2],k=c[3],b=c[8],q=c[9],
I=c[10],w=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=l*d-b*h;a[1]=m*d-q*h;a[2]=f*d-I*h;a[3]=k*d-w*h;a[8]=l*h+b*d;a[9]=m*h+q*d;a[10]=f*h+I*d;a[11]=k*h+w*d;return a}},{}],69:[function(d,h,r){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var l=c[0],m=c[1],f=c[2],k=c[3],b=c[4],q=c[5],I=c[6],w=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=l*d+b*h;a[1]=m*d+q*h;a[2]=
f*d+I*h;a[3]=k*d+w*h;a[4]=b*d-l*h;a[5]=q*d-m*h;a[6]=I*d-f*h;a[7]=w*d-k*h;return a}},{}],70:[function(d,h,r){h.exports=function(a,c,d){var h=d[0],l=d[1];d=d[2];a[0]=c[0]*h;a[1]=c[1]*h;a[2]=c[2]*h;a[3]=c[3]*h;a[4]=c[4]*l;a[5]=c[5]*l;a[6]=c[6]*l;a[7]=c[7]*l;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],71:[function(d,h,r){h.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+
", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(d,h,r){h.exports=function(a,c,d){var h=d[0],l=d[1];d=d[2];var m,f,k,b,q,I,w,e,g,p,n,t;c===a?(a[12]=c[0]*h+c[4]*l+c[8]*d+c[12],a[13]=c[1]*h+c[5]*l+c[9]*d+c[13],a[14]=c[2]*h+c[6]*l+c[10]*d+c[14],a[15]=c[3]*h+c[7]*l+c[11]*d+c[15]):(m=c[0],f=c[1],k=c[2],b=c[3],q=c[4],I=c[5],w=c[6],e=c[7],g=c[8],p=c[9],n=c[10],t=c[11],a[0]=m,a[1]=f,a[2]=k,a[3]=b,a[4]=q,a[5]=I,a[6]=w,a[7]=e,a[8]=g,a[9]=p,a[10]=n,
a[11]=t,a[12]=m*h+q*l+g*d+c[12],a[13]=f*h+I*l+p*d+c[13],a[14]=k*h+w*l+n*d+c[14],a[15]=b*h+e*l+t*d+c[15]);return a}},{}],73:[function(d,h,r){h.exports=function(a,c){if(a===c){var d=c[1],h=c[2],l=c[3],m=c[6],f=c[7],k=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=d;a[6]=c[9];a[7]=c[13];a[8]=h;a[9]=m;a[11]=c[14];a[12]=l;a[13]=f;a[14]=k}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=
c[15];return a}},{}],74:[function(d,h,r){!function(a,c){if("object"==typeof r&&"object"==typeof h)h.exports=c();else if("function"==typeof define&&define.amd)define([],c);else{var d=c(),G;for(G in d)("object"==typeof r?r:a)[G]=d[G]}}("undefined"!=typeof self?self:this,function(){return function(a){function c(h){if(d[h])return d[h].exports;var l=d[h]={i:h,l:!1,exports:{}};return a[h].call(l.exports,l,l.exports,c),l.l=!0,l.exports}var d={};return c.m=a,c.c=d,c.d=function(a,d,h){c.o(a,d)||Object.defineProperty(a,
d,{enumerable:!0,get:h})},c.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,d){if((1&d&&(a=c(a)),8&d)||4&d&&"object"==typeof a&&a&&a.__esModule)return a;var h=Object.create(null);if(c.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var f in a)c.d(h,f,function(c){return a[c]}.bind(null,
f));return h},c.n=function(a){var d=a&&a.__esModule?function(){return a["default"]}:function(){return a};return c.d(d,"a",d),d},c.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},c.p="",c(c.s=10)}([function(a,c,d){Object.defineProperty(c,"__esModule",{value:!0});c.setMatrixArrayType=function(a){c.ARRAY_TYPE=a};c.toRadian=function(a){return a*l};c.equals=function(a,c){return Math.abs(a-c)<=h*Math.max(1,Math.abs(a),Math.abs(c))};var h=c.EPSILON=1E-6;c.ARRAY_TYPE="undefined"!=typeof Float32Array?
Float32Array:Array;c.RANDOM=Math.random;var l=Math.PI/180},function(a,c,d){function h(){var b=new w.ARRAY_TYPE(4);return w.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b}function l(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b[3]=a[3]-c[3],b}function m(b,a,c){return b[0]=a[0]*c[0],b[1]=a[1]*c[1],b[2]=a[2]*c[2],b[3]=a[3]*c[3],b}function f(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b[2]=a[2]/c[2],b[3]=a[3]/c[3],b}function k(b,a){var c=a[0]-b[0],f=a[1]-b[1],k=a[2]-b[2],d=a[3]-
b[3];return Math.sqrt(c*c+f*f+k*k+d*d)}function b(b,a){var c=a[0]-b[0],f=a[1]-b[1],k=a[2]-b[2],d=a[3]-b[3];return c*c+f*f+k*k+d*d}function q(b){var a=b[0],c=b[1],f=b[2];b=b[3];return Math.sqrt(a*a+c*c+f*f+b*b)}function I(b){var a=b[0],c=b[1],f=b[2];b=b[3];return a*a+c*c+f*f+b*b}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=h;c.clone=function(b){var a=new w.ARRAY_TYPE(4);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a};
c.fromValues=function(b,a,c,f){var k=new w.ARRAY_TYPE(4);return k[0]=b,k[1]=a,k[2]=c,k[3]=f,k};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b};c.set=function(b,a,c,f,k){return b[0]=a,b[1]=c,b[2]=f,b[3]=k,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b};c.subtract=l;c.multiply=m;c.divide=f;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b[3]=Math.ceil(a[3]),b};c.floor=function(b,a){return b[0]=
Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b[3]=Math.floor(a[3]),b};c.min=function(b,a,c){return b[0]=Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b[2]=Math.min(a[2],c[2]),b[3]=Math.min(a[3],c[3]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),b[2]=Math.max(a[2],c[2]),b[3]=Math.max(a[3],c[3]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b[3]=Math.round(a[3]),b};c.scale=function(b,a,c){return b[0]=
a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b};c.scaleAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b[2]=a[2]+c[2]*f,b[3]=a[3]+c[3]*f,b};c.distance=k;c.squaredDistance=b;c.length=q;c.squaredLength=I;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b[2]=1/a[2],b[3]=1/a[3],b};c.normalize=function(b,a){var c=a[0],f=a[1],k=a[2],d=a[3],q=c*c+f*f+k*k+d*d;0<q&&(q=1/Math.sqrt(q),b[0]=c*q,b[1]=f*q,b[2]=k*
q,b[3]=d*q);return b};c.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};c.lerp=function(b,a,c,f){var k=a[0],d=a[1],q=a[2];a=a[3];return b[0]=k+f*(c[0]-k),b[1]=d+f*(c[1]-d),b[2]=q+f*(c[2]-q),b[3]=a+f*(c[3]-a),b};c.random=function(b,a){var c,f,k,d,q,h;a=a||1;do c=2*w.RANDOM()-1,f=2*w.RANDOM()-1,q=c*c+f*f;while(1<=q);do k=2*w.RANDOM()-1,d=2*w.RANDOM()-1,h=k*k+d*d;while(1<=h);q=Math.sqrt((1-q)/h);return b[0]=a*c,b[1]=a*f,b[2]=a*k*q,b[3]=a*d*q,b};c.transformMat4=function(b,a,c){var f=
a[0],k=a[1],d=a[2];a=a[3];return b[0]=c[0]*f+c[4]*k+c[8]*d+c[12]*a,b[1]=c[1]*f+c[5]*k+c[9]*d+c[13]*a,b[2]=c[2]*f+c[6]*k+c[10]*d+c[14]*a,b[3]=c[3]*f+c[7]*k+c[11]*d+c[15]*a,b};c.transformQuat=function(b,a,c){var f=a[0],k=a[1],d=a[2],q=c[0],h=c[1],l=c[2];c=c[3];var m=c*f+h*d-l*k,w=c*k+l*f-q*d,I=c*d+q*k-h*f,f=-q*f-h*k-l*d;return b[0]=m*c+f*-q+w*-l-I*-h,b[1]=w*c+f*-h+I*-q-m*-l,b[2]=I*c+f*-l+m*-h-w*-q,b[3]=a[3],b};c.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};c.exactEquals=function(b,
a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};c.equals=function(b,a){var c=b[0],f=b[1],k=b[2],d=b[3],q=a[0],h=a[1],l=a[2],m=a[3];return Math.abs(c-q)<=w.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(f-h)<=w.EPSILON*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(k-l)<=w.EPSILON*Math.max(1,Math.abs(k),Math.abs(l))&&Math.abs(d-m)<=w.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))};var w=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.sub=l;c.mul=m;c.div=f;c.dist=k;c.sqrDist=b;c.len=q;c.sqrLen=I;c.forEach=function(){var b=h();return function(a,c,f,k,d,q){var h=void 0,l=void 0;c||(c=4);f||(f=0);l=k?Math.min(k*c+f,a.length):a.length;for(h=f;h<l;h+=c)b[0]=a[h],b[1]=a[h+1],b[2]=a[h+2],b[3]=a[h+3],d(b,b,q),a[h]=b[0],a[h+1]=b[1],a[h+2]=b[2],a[h+3]=b[3];return a}}()},function(a,c,d){function h(){var b=new p.ARRAY_TYPE(3);return p.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function l(b){var a=
b[0],e=b[1];b=b[2];return Math.sqrt(a*a+e*e+b*b)}function m(b,a,e){var g=new p.ARRAY_TYPE(3);return g[0]=b,g[1]=a,g[2]=e,g}function f(b,a,e){return b[0]=a[0]-e[0],b[1]=a[1]-e[1],b[2]=a[2]-e[2],b}function k(b,a,e){return b[0]=a[0]*e[0],b[1]=a[1]*e[1],b[2]=a[2]*e[2],b}function b(b,a,e){return b[0]=a[0]/e[0],b[1]=a[1]/e[1],b[2]=a[2]/e[2],b}function q(b,a){var e=a[0]-b[0],g=a[1]-b[1],c=a[2]-b[2];return Math.sqrt(e*e+g*g+c*c)}function I(b,a){var e=a[0]-b[0],g=a[1]-b[1],c=a[2]-b[2];return e*e+g*g+c*c}function w(b){var a=
b[0],e=b[1];b=b[2];return a*a+e*e+b*b}function e(b,a){var e=a[0],g=a[1],c=a[2],e=e*e+g*g+c*c;return 0<e&&(e=1/Math.sqrt(e),b[0]=a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e),b}function g(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=h;c.clone=function(b){var a=new p.ARRAY_TYPE(3);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a};c.length=l;c.fromValues=m;c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],
b[2]=a[2],b};c.set=function(b,a,e,g){return b[0]=a,b[1]=e,b[2]=g,b};c.add=function(b,a,e){return b[0]=a[0]+e[0],b[1]=a[1]+e[1],b[2]=a[2]+e[2],b};c.subtract=f;c.multiply=k;c.divide=b;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b};c.min=function(b,a,e){return b[0]=Math.min(a[0],e[0]),b[1]=Math.min(a[1],e[1]),b[2]=Math.min(a[2],e[2]),b};c.max=function(b,a,e){return b[0]=
Math.max(a[0],e[0]),b[1]=Math.max(a[1],e[1]),b[2]=Math.max(a[2],e[2]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b};c.scale=function(b,a,e){return b[0]=a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e,b};c.scaleAndAdd=function(b,a,e,g){return b[0]=a[0]+e[0]*g,b[1]=a[1]+e[1]*g,b[2]=a[2]+e[2]*g,b};c.distance=q;c.squaredDistance=I;c.squaredLength=w;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/
a[1],b[2]=1/a[2],b};c.normalize=e;c.dot=g;c.cross=function(b,a,e){var g=a[0],c=a[1];a=a[2];var f=e[0],k=e[1];e=e[2];return b[0]=c*e-a*k,b[1]=a*f-g*e,b[2]=g*k-c*f,b};c.lerp=function(b,a,e,g){var c=a[0],f=a[1];a=a[2];return b[0]=c+g*(e[0]-c),b[1]=f+g*(e[1]-f),b[2]=a+g*(e[2]-a),b};c.hermite=function(b,a,e,g,c,f){var k=f*f,d=k*(2*f-3)+1,p=k*(f-2)+f,q=k*(f-1);f=k*(3-2*f);return b[0]=a[0]*d+e[0]*p+g[0]*q+c[0]*f,b[1]=a[1]*d+e[1]*p+g[1]*q+c[1]*f,b[2]=a[2]*d+e[2]*p+g[2]*q+c[2]*f,b};c.bezier=function(b,a,e,
g,c,f){var k=1-f,d=k*k,p=f*f,q=d*k,d=3*f*d,k=3*p*k;f*=p;return b[0]=a[0]*q+e[0]*d+g[0]*k+c[0]*f,b[1]=a[1]*q+e[1]*d+g[1]*k+c[1]*f,b[2]=a[2]*q+e[2]*d+g[2]*k+c[2]*f,b};c.random=function(b,a){a=a||1;var e=2*p.RANDOM()*Math.PI,g=2*p.RANDOM()-1,c=Math.sqrt(1-g*g)*a;return b[0]=Math.cos(e)*c,b[1]=Math.sin(e)*c,b[2]=g*a,b};c.transformMat4=function(b,a,e){var g=a[0],c=a[1];a=a[2];var f=e[3]*g+e[7]*c+e[11]*a+e[15];return f=f||1,b[0]=(e[0]*g+e[4]*c+e[8]*a+e[12])/f,b[1]=(e[1]*g+e[5]*c+e[9]*a+e[13])/f,b[2]=(e[2]*
g+e[6]*c+e[10]*a+e[14])/f,b};c.transformMat3=function(b,a,e){var g=a[0],c=a[1];a=a[2];return b[0]=g*e[0]+c*e[3]+a*e[6],b[1]=g*e[1]+c*e[4]+a*e[7],b[2]=g*e[2]+c*e[5]+a*e[8],b};c.transformQuat=function(b,a,e){var g=e[0],c=e[1],f=e[2],k=a[0],d=a[1];a=a[2];var p=c*a-f*d,q=f*k-g*a,h=g*d-c*k,l=c*h-f*q,f=f*p-g*h,g=g*q-c*p;e=2*e[3];return p*=e,q*=e,h*=e,l*=2,f*=2,g*=2,b[0]=k+p+l,b[1]=d+q+f,b[2]=a+h+g,b};c.rotateX=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[0],
f[1]=c[1]*Math.cos(g)-c[2]*Math.sin(g),f[2]=c[1]*Math.sin(g)+c[2]*Math.cos(g),b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.rotateY=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[2]*Math.sin(g)+c[0]*Math.cos(g),f[1]=c[1],f[2]=c[2]*Math.cos(g)-c[0]*Math.sin(g),b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.rotateZ=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[0]*Math.cos(g)-c[1]*Math.sin(g),f[1]=c[0]*Math.sin(g)+
c[1]*Math.cos(g),f[2]=c[2],b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.angle=function(b,a){var c=m(b[0],b[1],b[2]),f=m(a[0],a[1],a[2]);e(c,c);e(f,f);c=g(c,f);return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]};c.equals=function(b,a){var e=b[0],g=b[1],c=b[2],f=a[0],k=a[1],d=a[2];return Math.abs(e-f)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(g-k)<=p.EPSILON*
Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(c-d)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))};var p=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a["default"]=b,a}(d(0));c.sub=f;c.mul=k;c.div=b;c.dist=q;c.sqrDist=I;c.len=l;c.sqrLen=w;c.forEach=function(){var b=h();return function(a,e,g,c,f,k){var d=void 0,p=void 0;e||(e=3);g||(g=0);p=c?Math.min(c*e+g,a.length):a.length;for(d=g;d<p;d+=e)b[0]=a[d],b[1]=a[d+
1],b[2]=a[d+2],f(b,b,k),a[d]=b[0],a[d+1]=b[1],a[d+2]=b[2];return a}}()},function(a,c,d){function h(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a["default"]=b,a}function l(){var b=new q.ARRAY_TYPE(4);return q.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function m(b,a,e){e*=.5;var c=Math.sin(e);return b[0]=c*a[0],b[1]=c*a[1],b[2]=c*a[2],b[3]=Math.cos(e),b}function f(b,a,e){var c=a[0],f=a[1],k=a[2];a=a[3];
var d=e[0],q=e[1],h=e[2];e=e[3];return b[0]=c*e+a*d+f*h-k*q,b[1]=f*e+a*q+k*d-c*h,b[2]=k*e+a*h+c*q-f*d,b[3]=a*e-c*d-f*q-k*h,b}function k(b,a,e,c){var f=a[0],k=a[1],d=a[2];a=a[3];var h=e[0],l=e[1],m=e[2];e=e[3];var w=void 0,I=void 0,r=void 0,R=void 0,z=void 0;return 0>(I=f*h+k*l+d*m+a*e)&&(I=-I,h=-h,l=-l,m=-m,e=-e),1-I>q.EPSILON?(w=Math.acos(I),r=Math.sin(w),R=Math.sin((1-c)*w)/r,z=Math.sin(c*w)/r):(R=1-c,z=c),b[0]=R*f+z*h,b[1]=R*k+z*l,b[2]=R*d+z*m,b[3]=R*a+z*e,b}function b(b,a){var e=a[0]+a[4]+a[8],
c=void 0;if(0<e)c=Math.sqrt(e+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=2);var f=(e+1)%3,k=(e+2)%3,c=Math.sqrt(a[3*e+e]-a[3*f+f]-a[3*k+k]+1);b[e]=.5*c;c=.5/c;b[3]=(a[3*f+k]-a[3*k+f])*c;b[f]=(a[3*f+e]+a[3*e+f])*c;b[k]=(a[3*k+e]+a[3*e+k])*c}return b}Object.defineProperty(c,"__esModule",{value:!0});c.setAxes=c.sqlerp=c.rotationTo=c.equals=c.exactEquals=c.normalize=c.sqrLen=c.squaredLength=c.len=c.length=c.lerp=c.dot=c.scale=
c.mul=c.add=c.set=c.copy=c.fromValues=c.clone=void 0;c.create=l;c.identity=function(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b};c.setAxisAngle=m;c.getAxisAngle=function(b,a){var e=2*Math.acos(a[3]),c=Math.sin(e/2);c>q.EPSILON?(b[0]=a[0]/c,b[1]=a[1]/c,b[2]=a[2]/c):(b[0]=1,b[1]=0,b[2]=0);return e};c.multiply=f;c.rotateX=function(b,a,e){e*=.5;var c=a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e+a*d,b[1]=f*e+k*d,b[2]=k*e-f*d,b[3]=a*e-c*d,b};c.rotateY=function(b,a,e){e*=.5;var c=
a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e-k*d,b[1]=f*e+a*d,b[2]=k*e+c*d,b[3]=a*e-f*d,b};c.rotateZ=function(b,a,e){e*=.5;var c=a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e+f*d,b[1]=f*e-c*d,b[2]=k*e+a*d,b[3]=a*e-k*d,b};c.calculateW=function(b,a){var e=a[0],c=a[1],f=a[2];return b[0]=e,b[1]=c,b[2]=f,b[3]=Math.sqrt(Math.abs(1-e*e-c*c-f*f)),b};c.slerp=k;c.random=function(b){var a=q.RANDOM(),e=q.RANDOM(),c=q.RANDOM(),f=Math.sqrt(1-a),a=Math.sqrt(a);
return b[0]=f*Math.sin(2*Math.PI*e),b[1]=f*Math.cos(2*Math.PI*e),b[2]=a*Math.sin(2*Math.PI*c),b[3]=a*Math.cos(2*Math.PI*c),b};c.invert=function(b,a){var e=a[0],c=a[1],f=a[2],k=a[3],d=e*e+c*c+f*f+k*k,d=d?1/d:0;return b[0]=-e*d,b[1]=-c*d,b[2]=-f*d,b[3]=k*d,b};c.conjugate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b};c.fromMat3=b;c.fromEuler=function(b,a,e,c){var f=.5*Math.PI/180;a*=f;e*=f;c*=f;f=Math.sin(a);a=Math.cos(a);var k=Math.sin(e);e=Math.cos(e);var d=Math.sin(c);c=Math.cos(c);
return b[0]=f*e*c-a*k*d,b[1]=a*k*c+f*e*d,b[2]=a*e*d-f*k*c,b[3]=a*e*c+f*k*d,b};c.str=function(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};var q=h(d(0)),I=h(d(5)),w=h(d(2));a=h(d(1));c.clone=a.clone;c.fromValues=a.fromValues;c.copy=a.copy;c.set=a.set;c.add=a.add;c.mul=f;c.scale=a.scale;c.dot=a.dot;c.lerp=a.lerp;d=c.length=a.length;d=(c.len=d,c.squaredLength=a.squaredLength);var e=(c.sqrLen=d,c.normalize=a.normalize);c.exactEquals=a.exactEquals;c.equals=a.equals;c.rotationTo=function(){var b=
w.create(),a=w.fromValues(1,0,0),c=w.fromValues(0,1,0);return function(f,k,d){var q=w.dot(k,d);return-.999999>q?(w.cross(b,a,k),1E-6>w.len(b)&&w.cross(b,c,k),w.normalize(b,b),m(f,b,Math.PI),f):.999999<q?(f[0]=0,f[1]=0,f[2]=0,f[3]=1,f):(w.cross(b,k,d),f[0]=b[0],f[1]=b[1],f[2]=b[2],f[3]=1+q,e(f,f))}}();c.sqlerp=function(){var b=l(),a=l();return function(e,c,f,d,q,h){return k(b,c,q,h),k(a,f,d,h),k(e,b,a,2*h*(1-h)),e}}();c.setAxes=function(){var a=I.create();return function(c,f,k,d){return a[0]=k[0],
a[3]=k[1],a[6]=k[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=-f[0],a[5]=-f[1],a[8]=-f[2],e(c,b(c,a))}}()},function(a,c,d){function h(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function l(b,a,c){var f=a[0],e=a[1],g=a[2],k=a[3],d=a[4],h=a[5],l=a[6],m=a[7],y=a[8],r=a[9],u=a[10],H=a[11],la=a[12],G=a[13],S=a[14];a=a[15];var R=c[0],z=c[1],A=c[2],J=c[3];return b[0]=R*f+z*d+A*y+J*la,b[1]=R*e+z*h+A*r+J*G,b[2]=R*g+z*l+A*u+J*S,
b[3]=R*k+z*m+A*H+J*a,R=c[4],z=c[5],A=c[6],J=c[7],b[4]=R*f+z*d+A*y+J*la,b[5]=R*e+z*h+A*r+J*G,b[6]=R*g+z*l+A*u+J*S,b[7]=R*k+z*m+A*H+J*a,R=c[8],z=c[9],A=c[10],J=c[11],b[8]=R*f+z*d+A*y+J*la,b[9]=R*e+z*h+A*r+J*G,b[10]=R*g+z*l+A*u+J*S,b[11]=R*k+z*m+A*H+J*a,R=c[12],z=c[13],A=c[14],J=c[15],b[12]=R*f+z*d+A*y+J*la,b[13]=R*e+z*h+A*r+J*G,b[14]=R*g+z*l+A*u+J*S,b[15]=R*k+z*m+A*H+J*a,b}function m(b,a,c){var f=a[0],e=a[1],g=a[2],k=a[3],d=f+f,h=e+e,l=g+g;a=f*d;var m=f*h,f=f*l,y=e*h,e=e*l,g=g*l,d=k*d,h=k*h,k=k*l;return b[0]=
1-(y+g),b[1]=m+k,b[2]=f-h,b[3]=0,b[4]=m-k,b[5]=1-(a+g),b[6]=e+d,b[7]=0,b[8]=f+h,b[9]=e-d,b[10]=1-(a+y),b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b}function f(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b[3]=a[3]-c[3],b[4]=a[4]-c[4],b[5]=a[5]-c[5],b[6]=a[6]-c[6],b[7]=a[7]-c[7],b[8]=a[8]-c[8],b[9]=a[9]-c[9],b[10]=a[10]-c[10],b[11]=a[11]-c[11],b[12]=a[12]-c[12],b[13]=a[13]-c[13],b[14]=a[14]-c[14],b[15]=a[15]-c[15],b}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;
c.create=function(){var b=new k.ARRAY_TYPE(16);k.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0);return b[0]=1,b[5]=1,b[10]=1,b[15]=1,b};c.clone=function(b){var a=new k.ARRAY_TYPE(16);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],
b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};c.fromValues=function(b,a,c,f,e,g,d,h,t,l,m,y,r,u,H,la){var A=new k.ARRAY_TYPE(16);return A[0]=b,A[1]=a,A[2]=c,A[3]=f,A[4]=e,A[5]=g,A[6]=d,A[7]=h,A[8]=t,A[9]=l,A[10]=m,A[11]=y,A[12]=r,A[13]=u,A[14]=H,A[15]=la,A};c.set=function(b,a,c,f,e,g,k,d,h,l,m,y,r,u,H,A,G){return b[0]=a,b[1]=c,b[2]=f,b[3]=e,b[4]=g,b[5]=k,b[6]=d,b[7]=h,b[8]=l,b[9]=m,b[10]=y,b[11]=r,b[12]=u,b[13]=
H,b[14]=A,b[15]=G,b};c.identity=h;c.transpose=function(b,a){if(b===a){var c=a[1],f=a[2],e=a[3],g=a[6],k=a[7],d=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=f;b[9]=g;b[11]=a[14];b[12]=e;b[13]=k;b[14]=d}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};c.invert=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=a[4],d=a[5],h=a[6],l=a[7],m=a[8],
y=a[9],r=a[10],u=a[11],H=a[12],A=a[13],G=a[14],S=a[15],R=c*d-f*k,z=c*h-e*k,ia=c*l-g*k,J=f*h-e*d,V=f*l-g*d,K=e*l-g*h,ka=m*A-y*H,aa=m*G-r*H,ma=m*S-u*H,na=y*G-r*A,Qa=y*S-u*A,Cb=r*S-u*G,ea=R*Cb-z*Qa+ia*na+J*ma-V*aa+K*ka;return ea?(ea=1/ea,b[0]=(d*Cb-h*Qa+l*na)*ea,b[1]=(e*Qa-f*Cb-g*na)*ea,b[2]=(A*K-G*V+S*J)*ea,b[3]=(r*V-y*K-u*J)*ea,b[4]=(h*ma-k*Cb-l*aa)*ea,b[5]=(c*Cb-e*ma+g*aa)*ea,b[6]=(G*ia-H*K-S*z)*ea,b[7]=(m*K-r*ia+u*z)*ea,b[8]=(k*Qa-d*ma+l*ka)*ea,b[9]=(f*ma-c*Qa-g*ka)*ea,b[10]=(H*V-A*ia+S*R)*ea,b[11]=
(y*ia-m*V-u*R)*ea,b[12]=(d*aa-k*na-h*ka)*ea,b[13]=(c*na-f*aa+e*ka)*ea,b[14]=(A*z-H*J-G*R)*ea,b[15]=(m*J-y*z+r*R)*ea,b):null};c.adjoint=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=a[4],d=a[5],h=a[6],l=a[7],m=a[8],y=a[9],r=a[10],u=a[11],H=a[12],A=a[13],G=a[14],S=a[15];return b[0]=d*(r*S-u*G)-y*(h*S-l*G)+A*(h*u-l*r),b[1]=-(f*(r*S-u*G)-y*(e*S-g*G)+A*(e*u-g*r)),b[2]=f*(h*S-l*G)-d*(e*S-g*G)+A*(e*l-g*h),b[3]=-(f*(h*u-l*r)-d*(e*u-g*r)+y*(e*l-g*h)),b[4]=-(k*(r*S-u*G)-m*(h*S-l*G)+H*(h*u-l*r)),b[5]=c*(r*
S-u*G)-m*(e*S-g*G)+H*(e*u-g*r),b[6]=-(c*(h*S-l*G)-k*(e*S-g*G)+H*(e*l-g*h)),b[7]=c*(h*u-l*r)-k*(e*u-g*r)+m*(e*l-g*h),b[8]=k*(y*S-u*A)-m*(d*S-l*A)+H*(d*u-l*y),b[9]=-(c*(y*S-u*A)-m*(f*S-g*A)+H*(f*u-g*y)),b[10]=c*(d*S-l*A)-k*(f*S-g*A)+H*(f*l-g*d),b[11]=-(c*(d*u-l*y)-k*(f*u-g*y)+m*(f*l-g*d)),b[12]=-(k*(y*G-r*A)-m*(d*G-h*A)+H*(d*r-h*y)),b[13]=c*(y*G-r*A)-m*(f*G-e*A)+H*(f*r-e*y),b[14]=-(c*(d*G-h*A)-k*(f*G-e*A)+H*(f*h-e*d)),b[15]=c*(d*r-h*y)-k*(f*r-e*y)+m*(f*h-e*d),b};c.determinant=function(b){var a=b[0],
c=b[1],f=b[2],e=b[3],g=b[4],k=b[5],d=b[6],h=b[7],l=b[8],m=b[9],y=b[10],r=b[11],u=b[12],H=b[13],A=b[14];b=b[15];return(a*k-c*g)*(y*b-r*A)-(a*d-f*g)*(m*b-r*H)+(a*h-e*g)*(m*A-y*H)+(c*d-f*k)*(l*b-r*u)-(c*h-e*k)*(l*A-y*u)+(f*h-e*d)*(l*H-m*u)};c.multiply=l;c.translate=function(b,a,c){var f=c[0],e=c[1];c=c[2];var g=void 0,k=void 0,d=void 0,h=void 0,l=void 0,m=void 0,y=void 0,r=void 0,u=void 0,H=void 0,A=void 0,G=void 0;a===b?(b[12]=a[0]*f+a[4]*e+a[8]*c+a[12],b[13]=a[1]*f+a[5]*e+a[9]*c+a[13],b[14]=a[2]*f+
a[6]*e+a[10]*c+a[14],b[15]=a[3]*f+a[7]*e+a[11]*c+a[15]):(g=a[0],k=a[1],d=a[2],h=a[3],l=a[4],m=a[5],y=a[6],r=a[7],u=a[8],H=a[9],A=a[10],G=a[11],b[0]=g,b[1]=k,b[2]=d,b[3]=h,b[4]=l,b[5]=m,b[6]=y,b[7]=r,b[8]=u,b[9]=H,b[10]=A,b[11]=G,b[12]=g*f+l*e+u*c+a[12],b[13]=k*f+m*e+H*c+a[13],b[14]=d*f+y*e+A*c+a[14],b[15]=h*f+r*e+G*c+a[15]);return b};c.scale=function(b,a,c){var f=c[0],e=c[1];c=c[2];return b[0]=a[0]*f,b[1]=a[1]*f,b[2]=a[2]*f,b[3]=a[3]*f,b[4]=a[4]*e,b[5]=a[5]*e,b[6]=a[6]*e,b[7]=a[7]*e,b[8]=a[8]*c,b[9]=
a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};c.rotate=function(b,a,c,f){var e=f[0],g=f[1];f=f[2];var d=Math.sqrt(e*e+g*g+f*f),h=void 0,l=void 0,m=void 0,D=void 0,y=void 0,r=void 0,u=void 0,H=void 0,A=void 0,G=void 0,S=void 0,R=void 0,z=void 0,ia=void 0,J=void 0,V=void 0,K=void 0,ka=void 0,aa=void 0,ma=void 0,na=void 0,Qa=void 0,l=h=void 0;if(d<k.EPSILON)return null;e*=d=1/d;g*=d;f*=d;h=Math.sin(c);l=Math.cos(c);m=1-l;D=a[0];y=a[1];r=a[2];u=a[3];H=a[4];A=a[5];
G=a[6];S=a[7];R=a[8];z=a[9];ia=a[10];J=a[11];V=e*e*m+l;K=g*e*m+f*h;ka=f*e*m-g*h;aa=e*g*m-f*h;ma=g*g*m+l;na=f*g*m+e*h;Qa=e*f*m+g*h;h=g*f*m-e*h;l=f*f*m+l;b[0]=D*V+H*K+R*ka;b[1]=y*V+A*K+z*ka;b[2]=r*V+G*K+ia*ka;b[3]=u*V+S*K+J*ka;b[4]=D*aa+H*ma+R*na;b[5]=y*aa+A*ma+z*na;b[6]=r*aa+G*ma+ia*na;b[7]=u*aa+S*ma+J*na;b[8]=D*Qa+H*h+R*l;b[9]=y*Qa+A*h+z*l;b[10]=r*Qa+G*h+ia*l;b[11]=u*Qa+S*h+J*l;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};c.rotateX=function(b,a,c){var f=Math.sin(c);c=Math.cos(c);
var e=a[4],g=a[5],k=a[6],d=a[7],h=a[8],l=a[9],m=a[10],y=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[4]=e*c+h*f,b[5]=g*c+l*f,b[6]=k*c+m*f,b[7]=d*c+y*f,b[8]=h*c-e*f,b[9]=l*c-g*f,b[10]=m*c-k*f,b[11]=y*c-d*f,b};c.rotateY=function(b,a,c){var f=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],k=a[2],d=a[3],h=a[8],l=a[9],m=a[10],y=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[0]=
e*c-h*f,b[1]=g*c-l*f,b[2]=k*c-m*f,b[3]=d*c-y*f,b[8]=e*f+h*c,b[9]=g*f+l*c,b[10]=k*f+m*c,b[11]=d*f+y*c,b};c.rotateZ=function(b,a,c){var f=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],k=a[2],d=a[3],h=a[4],l=a[5],m=a[6],y=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[0]=e*c+h*f,b[1]=g*c+l*f,b[2]=k*c+m*f,b[3]=d*c+y*f,b[4]=h*c-e*f,b[5]=l*c-g*f,b[6]=m*c-k*f,b[7]=y*c-d*f,b};c.fromTranslation=function(b,a){return b[0]=1,b[1]=0,b[2]=0,b[3]=
0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=a[0],b[13]=a[1],b[14]=a[2],b[15]=1,b};c.fromScaling=function(b,a){return b[0]=a[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=a[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromRotation=function(b,a,c){var f=c[0],e=c[1];c=c[2];var g=Math.sqrt(f*f+e*e+c*c),d=void 0,h=void 0,l=void 0;return g<k.EPSILON?null:(f*=g=1/g,e*=g,c*=g,d=Math.sin(a),h=Math.cos(a),l=1-h,b[0]=f*f*l+h,b[1]=e*f*l+c*d,b[2]=c*f*l-e*d,
b[3]=0,b[4]=f*e*l-c*d,b[5]=e*e*l+h,b[6]=c*e*l+f*d,b[7]=0,b[8]=f*c*l+e*d,b[9]=e*c*l-f*d,b[10]=c*c*l+h,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)};c.fromXRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=f,b[6]=c,b[7]=0,b[8]=0,b[9]=-c,b[10]=f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromYRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=f,b[1]=0,b[2]=-c,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=c,b[9]=0,b[10]=f,b[11]=0,b[12]=0,b[13]=
0,b[14]=0,b[15]=1,b};c.fromZRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=f,b[1]=c,b[2]=0,b[3]=0,b[4]=-c,b[5]=f,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromRotationTranslation=m;c.fromQuat2=function(b,a){var c=new k.ARRAY_TYPE(3),f=-a[0],e=-a[1],g=-a[2],d=a[3],h=a[4],l=a[5],v=a[6],r=a[7],y=f*f+e*e+g*g+d*d;0<y?(c[0]=2*(h*d+r*f+l*g-v*e)/y,c[1]=2*(l*d+r*e+v*f-h*g)/y,c[2]=2*(v*d+r*g+h*e-l*f)/y):(c[0]=2*(h*d+r*f+l*g-v*e),c[1]=2*(l*d+r*e+v*f-
h*g),c[2]=2*(v*d+r*g+h*e-l*f));return m(b,a,c),b};c.getTranslation=function(b,a){return b[0]=a[12],b[1]=a[13],b[2]=a[14],b};c.getScaling=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[4],k=a[5],d=a[6],h=a[8],l=a[9],m=a[10];return b[0]=Math.sqrt(c*c+f*f+e*e),b[1]=Math.sqrt(g*g+k*k+d*d),b[2]=Math.sqrt(h*h+l*l+m*m),b};c.getRotation=function(b,a){var c=a[0]+a[5]+a[10],f=0;0<c?(f=2*Math.sqrt(c+1),b[3]=.25*f,b[0]=(a[6]-a[9])/f,b[1]=(a[8]-a[2])/f,b[2]=(a[1]-a[4])/f):a[0]>a[5]&&a[0]>a[10]?(f=2*Math.sqrt(1+a[0]-
a[5]-a[10]),b[3]=(a[6]-a[9])/f,b[0]=.25*f,b[1]=(a[1]+a[4])/f,b[2]=(a[8]+a[2])/f):a[5]>a[10]?(f=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/f,b[0]=(a[1]+a[4])/f,b[1]=.25*f,b[2]=(a[6]+a[9])/f):(f=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/f,b[0]=(a[8]+a[2])/f,b[1]=(a[6]+a[9])/f,b[2]=.25*f);return b};c.fromRotationTranslationScale=function(b,a,c,f){var e=a[0],g=a[1],k=a[2],d=a[3],h=e+e,l=g+g,m=k+k;a=e*h;var y=e*l,e=e*m,r=g*l,g=g*m,k=k*m,h=d*h,l=d*l,d=d*m,m=f[0],u=f[1];f=f[2];return b[0]=(1-
(r+k))*m,b[1]=(y+d)*m,b[2]=(e-l)*m,b[3]=0,b[4]=(y-d)*u,b[5]=(1-(a+k))*u,b[6]=(g+h)*u,b[7]=0,b[8]=(e+l)*f,b[9]=(g-h)*f,b[10]=(1-(a+r))*f,b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b};c.fromRotationTranslationScaleOrigin=function(b,a,c,f,e){var g=a[0],k=a[1],d=a[2],h=a[3],l=g+g,m=k+k,y=d+d;a=g*l;var r=g*m,u=g*y,g=k*m,k=k*y,H=d*y,d=h*l,m=h*m,A=h*y,G=f[0],S=f[1],y=f[2];f=e[0];h=e[1];e=e[2];var l=(1-(g+H))*G,R=(r+A)*G,G=(u-m)*G,r=(r-A)*S,H=(1-(a+H))*S,S=(k+d)*S,u=(u+m)*y,k=(k-d)*y;a=(1-(a+g))*y;
return b[0]=l,b[1]=R,b[2]=G,b[3]=0,b[4]=r,b[5]=H,b[6]=S,b[7]=0,b[8]=u,b[9]=k,b[10]=a,b[11]=0,b[12]=c[0]+f-(l*f+r*h+u*e),b[13]=c[1]+h-(R*f+H*h+k*e),b[14]=c[2]+e-(G*f+S*h+a*e),b[15]=1,b};c.fromQuat=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=c+c,d=f+f,h=e+e,c=c*k,l=f*k,f=f*d,m=e*k,y=e*d,e=e*h,k=g*k,d=g*d,g=g*h;return b[0]=1-f-e,b[1]=l+g,b[2]=m-d,b[3]=0,b[4]=l-g,b[5]=1-c-e,b[6]=y+k,b[7]=0,b[8]=m+d,b[9]=y-k,b[10]=1-c-f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.frustum=function(b,a,c,f,e,g,k){var d=
1/(c-a),h=1/(e-f),l=1/(g-k);return b[0]=2*g*d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=2*g*h,b[6]=0,b[7]=0,b[8]=(c+a)*d,b[9]=(e+f)*h,b[10]=(k+g)*l,b[11]=-1,b[12]=0,b[13]=0,b[14]=k*g*2*l,b[15]=0,b};c.perspective=function(b,a,c,f,e){a=1/Math.tan(a/2);var g=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=e&&e!==1/0?(g=1/(f-e),b[10]=(e+f)*g,b[14]=2*e*f*g):(b[10]=-1,b[14]=-2*f);return b};c.perspectiveFromFieldOfView=function(b,a,c,f){var e=
Math.tan(a.upDegrees*Math.PI/180),g=Math.tan(a.downDegrees*Math.PI/180),k=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var d=2/(k+a),h=2/(e+g);return b[0]=d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=h,b[6]=0,b[7]=0,b[8]=-(k-a)*d*.5,b[9]=(e-g)*h*.5,b[10]=f/(c-f),b[11]=-1,b[12]=0,b[13]=0,b[14]=f*c/(c-f),b[15]=0,b};c.ortho=function(b,a,c,f,e,g,k){var d=1/(a-c),h=1/(f-e),l=1/(g-k);return b[0]=-2*d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*h,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*l,b[11]=0,
b[12]=(a+c)*d,b[13]=(e+f)*h,b[14]=(k+g)*l,b[15]=1,b};c.lookAt=function(b,a,c,f){var e=void 0,g=void 0,d=void 0,n=void 0,l=void 0,m=void 0,r=void 0,y=void 0,W=void 0,u=void 0,H=a[0],A=a[1];a=a[2];d=f[0];n=f[1];f=f[2];r=c[0];y=c[1];c=c[2];if(Math.abs(H-r)<k.EPSILON&&Math.abs(A-y)<k.EPSILON&&Math.abs(a-c)<k.EPSILON)return h(b);r=H-r;y=A-y;W=a-c;u=1/Math.sqrt(r*r+y*y+W*W);e=n*(W*=u)-f*(y*=u);g=f*(r*=u)-d*W;d=d*y-n*r;(u=Math.sqrt(e*e+g*g+d*d))?(e*=u=1/u,g*=u,d*=u):(e=0,g=0,d=0);n=y*d-W*g;l=W*e-r*d;m=r*
g-y*e;(u=Math.sqrt(n*n+l*l+m*m))?(n*=u=1/u,l*=u,m*=u):(n=0,l=0,m=0);return b[0]=e,b[1]=n,b[2]=r,b[3]=0,b[4]=g,b[5]=l,b[6]=y,b[7]=0,b[8]=d,b[9]=m,b[10]=W,b[11]=0,b[12]=-(e*H+g*A+d*a),b[13]=-(n*H+l*A+m*a),b[14]=-(r*H+y*A+W*a),b[15]=1,b};c.targetTo=function(b,a,c,f){var e=a[0],g=a[1];a=a[2];var k=f[0],d=f[1],h=f[2];f=e-c[0];var l=g-c[1];c=a-c[2];var m=f*f+l*l+c*c;0<m&&(m=1/Math.sqrt(m),f*=m,l*=m,c*=m);var y=d*c-h*l,h=h*f-k*c,k=k*l-d*f;0<(m=y*y+h*h+k*k)&&(m=1/Math.sqrt(m),y*=m,h*=m,k*=m);return b[0]=
y,b[1]=h,b[2]=k,b[3]=0,b[4]=l*k-c*h,b[5]=c*y-f*k,b[6]=f*h-l*y,b[7]=0,b[8]=f,b[9]=l,b[10]=c,b[11]=0,b[12]=e,b[13]=g,b[14]=a,b[15]=1,b};c.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};c.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],
2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b[4]=a[4]+c[4],b[5]=a[5]+c[5],b[6]=a[6]+c[6],b[7]=a[7]+c[7],b[8]=a[8]+c[8],b[9]=a[9]+c[9],b[10]=a[10]+c[10],b[11]=a[11]+c[11],b[12]=a[12]+c[12],b[13]=a[13]+c[13],b[14]=a[14]+c[14],b[15]=a[15]+c[15],b};c.subtract=f;c.multiplyScalar=function(b,a,c){return b[0]=a[0]*c,
b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b[4]=a[4]*c,b[5]=a[5]*c,b[6]=a[6]*c,b[7]=a[7]*c,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12]*c,b[13]=a[13]*c,b[14]=a[14]*c,b[15]=a[15]*c,b};c.multiplyScalarAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b[2]=a[2]+c[2]*f,b[3]=a[3]+c[3]*f,b[4]=a[4]+c[4]*f,b[5]=a[5]+c[5]*f,b[6]=a[6]+c[6]*f,b[7]=a[7]+c[7]*f,b[8]=a[8]+c[8]*f,b[9]=a[9]+c[9]*f,b[10]=a[10]+c[10]*f,b[11]=a[11]+c[11]*f,b[12]=a[12]+c[12]*f,b[13]=a[13]+c[13]*f,b[14]=a[14]+
c[14]*f,b[15]=a[15]+c[15]*f,b};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};c.equals=function(b,a){var c=b[0],f=b[1],e=b[2],g=b[3],d=b[4],h=b[5],l=b[6],m=b[7],r=b[8],y=b[9],W=b[10],u=b[11],H=b[12],A=b[13],G=b[14],S=b[15],R=a[0],z=a[1],ia=a[2],J=a[3],V=a[4],K=a[5],ka=a[6],aa=a[7],ma=a[8],na=
a[9],Qa=a[10],Cb=a[11],ea=a[12],Oa=a[13],X=a[14],P=a[15];return Math.abs(c-R)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-z)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(e-ia)<=k.EPSILON*Math.max(1,Math.abs(e),Math.abs(ia))&&Math.abs(g-J)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(J))&&Math.abs(d-V)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(V))&&Math.abs(h-K)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(K))&&Math.abs(l-ka)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(ka))&&
Math.abs(m-aa)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(aa))&&Math.abs(r-ma)<=k.EPSILON*Math.max(1,Math.abs(r),Math.abs(ma))&&Math.abs(y-na)<=k.EPSILON*Math.max(1,Math.abs(y),Math.abs(na))&&Math.abs(W-Qa)<=k.EPSILON*Math.max(1,Math.abs(W),Math.abs(Qa))&&Math.abs(u-Cb)<=k.EPSILON*Math.max(1,Math.abs(u),Math.abs(Cb))&&Math.abs(H-ea)<=k.EPSILON*Math.max(1,Math.abs(H),Math.abs(ea))&&Math.abs(A-Oa)<=k.EPSILON*Math.max(1,Math.abs(A),Math.abs(Oa))&&Math.abs(G-X)<=k.EPSILON*Math.max(1,Math.abs(G),Math.abs(X))&&
Math.abs(S-P)<=k.EPSILON*Math.max(1,Math.abs(S),Math.abs(P))};var k=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.mul=l;c.sub=f},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2],e=c[3],g=c[4],p=c[5],n=c[6],t=c[7];c=c[8];var v=b[0],r=b[1],y=b[2],W=b[3],u=b[4],H=b[5],A=b[6],G=b[7];b=b[8];return a[0]=v*d+r*e+y*n,a[1]=v*l+r*g+y*t,a[2]=v*m+r*p+y*c,a[3]=W*d+u*e+H*n,a[4]=W*l+u*g+
H*t,a[5]=W*m+u*p+H*c,a[6]=A*d+G*e+b*n,a[7]=A*l+G*g+b*t,a[8]=A*m+G*p+b*c,a}function l(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=c[5]-b[5],a[6]=c[6]-b[6],a[7]=c[7]-b[7],a[8]=c[8]-b[8],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new m.ARRAY_TYPE(9);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};c.fromMat4=function(a,c){return a[0]=c[0],a[1]=c[1],
a[2]=c[2],a[3]=c[4],a[4]=c[5],a[5]=c[6],a[6]=c[8],a[7]=c[9],a[8]=c[10],a};c.clone=function(a){var c=new m.ARRAY_TYPE(9);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromValues=function(a,c,b,d,h,l,e,g,p){var n=new m.ARRAY_TYPE(9);return n[0]=a,n[1]=c,n[2]=b,n[3]=d,n[4]=h,n[5]=l,n[6]=e,n[7]=g,n[8]=p,n};c.set=function(a,c,b,
d,h,l,e,g,p,n){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a[4]=l,a[5]=e,a[6]=g,a[7]=p,a[8]=n,a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.transpose=function(a,c){if(a===c){var b=c[1],d=c[2],h=c[5];a[1]=c[3];a[2]=c[6];a[3]=b;a[5]=c[7];a[6]=d;a[7]=h}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],p=c[6],n=c[7],m=c[8],v=m*e-g*n,
r=-m*l+g*p,y=n*l-e*p,W=b*v+d*r+h*y;return W?(W=1/W,a[0]=v*W,a[1]=(-m*d+h*n)*W,a[2]=(g*d-h*e)*W,a[3]=r*W,a[4]=(m*b-h*p)*W,a[5]=(-g*b+h*l)*W,a[6]=y*W,a[7]=(-n*b+d*p)*W,a[8]=(e*b-d*l)*W,a):null};c.adjoint=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],p=c[6],n=c[7],m=c[8];return a[0]=e*m-g*n,a[1]=h*n-d*m,a[2]=d*g-h*e,a[3]=g*p-l*m,a[4]=b*m-h*p,a[5]=h*l-b*g,a[6]=l*n-e*p,a[7]=d*p-b*n,a[8]=b*e-d*l,a};c.determinant=function(a){var c=a[3],b=a[4],d=a[5],h=a[6],l=a[7],e=a[8];return a[0]*(e*b-d*
l)+a[1]*(-e*c+d*h)+a[2]*(l*c-b*h)};c.multiply=h;c.translate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4],p=c[5],n=c[6],m=c[7];c=c[8];var v=b[0];b=b[1];return a[0]=d,a[1]=h,a[2]=l,a[3]=e,a[4]=g,a[5]=p,a[6]=v*d+b*e+n,a[7]=v*h+b*g+m,a[8]=v*l+b*p+c,a};c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4],p=c[5],n=c[6],m=c[7];c=c[8];var v=Math.sin(b);b=Math.cos(b);return a[0]=b*d+v*e,a[1]=b*h+v*g,a[2]=b*l+v*p,a[3]=b*e-v*d,a[4]=b*g-v*h,a[5]=b*p-v*l,a[6]=n,a[7]=m,a[8]=c,a};c.scale=function(a,
c,b){var d=b[0];b=b[1];return a[0]=d*c[0],a[1]=d*c[1],a[2]=d*c[2],a[3]=b*c[3],a[4]=b*c[4],a[5]=b*c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=c[0],a[7]=c[1],a[8]=1,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=0,a[3]=-b,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=0,a[4]=c[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromMat2d=function(a,
c){return a[0]=c[0],a[1]=c[1],a[2]=0,a[3]=c[2],a[4]=c[3],a[5]=0,a[6]=c[4],a[7]=c[5],a[8]=1,a};c.fromQuat=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=b+b,g=d+d,p=h+h,b=b*e,n=d*e,d=d*g,m=h*e,v=h*g,h=h*p,e=l*e,g=l*g,l=l*p;return a[0]=1-d-h,a[3]=n-l,a[6]=m+g,a[1]=n+l,a[4]=1-b-h,a[7]=v-e,a[2]=m-g,a[5]=v+e,a[8]=1-b-d,a};c.normalFromMat4=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],p=c[6],n=c[7],m=c[8],v=c[9],r=c[10],y=c[11],W=c[12],u=c[13],H=c[14],A=c[15],G=b*g-d*e,S=b*p-h*e,R=b*n-l*
e,z=d*p-h*g,ia=d*n-l*g,J=h*n-l*p,V=m*u-v*W,K=m*H-r*W,m=m*A-y*W,ka=v*H-r*u,v=v*A-y*u,r=r*A-y*H;return(y=G*r-S*v+R*ka+z*m-ia*K+J*V)?(y=1/y,a[0]=(g*r-p*v+n*ka)*y,a[1]=(p*m-e*r-n*K)*y,a[2]=(e*v-g*m+n*V)*y,a[3]=(h*v-d*r-l*ka)*y,a[4]=(b*r-h*m+l*K)*y,a[5]=(d*m-b*v-l*V)*y,a[6]=(u*J-H*ia+A*z)*y,a[7]=(H*R-W*J-A*S)*y,a[8]=(W*ia-u*R+A*G)*y,a):null};c.projection=function(a,c,b){return a[0]=2/c,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/b,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};c.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+
", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a[6]=c[6]+b[6],a[7]=c[7]+b[7],a[8]=c[8]+b[8],a};c.subtract=l;c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=
c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a[6]=c[6]*b,a[7]=c[7]*b,a[8]=c[8]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*d,a[6]=c[6]+b[6]*d,a[7]=c[7]+b[7]*d,a[8]=c[8]+b[8]*d,a};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],l=a[3],e=a[4],g=
a[5],p=a[6],n=a[7],t=a[8],v=c[0],r=c[1],y=c[2],A=c[3],u=c[4],H=c[5],G=c[6],ta=c[7],S=c[8];return Math.abs(b-v)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(v))&&Math.abs(d-r)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(r))&&Math.abs(h-y)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(l-A)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(e-u)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(g-H)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(H))&&Math.abs(p-G)<=m.EPSILON*Math.max(1,
Math.abs(p),Math.abs(G))&&Math.abs(n-ta)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(ta))&&Math.abs(t-S)<=m.EPSILON*Math.max(1,Math.abs(t),Math.abs(S))};var m=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=h;c.sub=l},function(a,c,d){function h(){var b=new w.ARRAY_TYPE(2);return w.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0),b}function l(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b}
function m(b,a,c){return b[0]=a[0]*c[0],b[1]=a[1]*c[1],b}function f(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b}function k(b,a){var c=a[0]-b[0],f=a[1]-b[1];return Math.sqrt(c*c+f*f)}function b(b,a){var c=a[0]-b[0],f=a[1]-b[1];return c*c+f*f}function q(b){var a=b[0];b=b[1];return Math.sqrt(a*a+b*b)}function r(b){var a=b[0];b=b[1];return a*a+b*b}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.sqrDist=c.dist=c.div=c.mul=c.sub=c.len=void 0;c.create=h;c.clone=function(b){var a=
new w.ARRAY_TYPE(2);return a[0]=b[0],a[1]=b[1],a};c.fromValues=function(b,a){var c=new w.ARRAY_TYPE(2);return c[0]=b,c[1]=a,c};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b};c.set=function(b,a,c){return b[0]=a,b[1]=c,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b};c.subtract=l;c.multiply=m;c.divide=f;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b};c.min=function(b,a,c){return b[0]=
Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b};c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b};c.scaleAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b};c.distance=k;c.squaredDistance=b;c.length=q;c.squaredLength=r;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=
1/a[1],b};c.normalize=function(b,a){var c=a[0],f=a[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c);return b};c.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]};c.cross=function(b,a,c){a=a[0]*c[1]-a[1]*c[0];return b[0]=b[1]=0,b[2]=a,b};c.lerp=function(b,a,c,f){var d=a[0];a=a[1];return b[0]=d+f*(c[0]-d),b[1]=a+f*(c[1]-a),b};c.random=function(b,a){a=a||1;var c=2*w.RANDOM()*Math.PI;return b[0]=Math.cos(c)*a,b[1]=Math.sin(c)*a,b};c.transformMat2=function(b,a,c){var f=a[0];a=a[1];return b[0]=
c[0]*f+c[2]*a,b[1]=c[1]*f+c[3]*a,b};c.transformMat2d=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[2]*a+c[4],b[1]=c[1]*f+c[3]*a+c[5],b};c.transformMat3=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[3]*a+c[6],b[1]=c[1]*f+c[4]*a+c[7],b};c.transformMat4=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[4]*a+c[12],b[1]=c[1]*f+c[5]*a+c[13],b};c.rotate=function(b,a,c,f){var d=a[0]-c[0];a=a[1]-c[1];var k=Math.sin(f);f=Math.cos(f);return b[0]=d*f-a*k+c[0],b[1]=d*k+a*f+c[1],b};c.angle=
function(b,a){var c=b[0],f=b[1],d=a[0],k=a[1],h=c*c+f*f;0<h&&(h=1/Math.sqrt(h));var l=d*d+k*k;0<l&&(l=1/Math.sqrt(l));c=(c*d+f*k)*h*l;return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=function(b){return"vec2("+b[0]+", "+b[1]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]};c.equals=function(b,a){var c=b[0],f=b[1],d=a[0],k=a[1];return Math.abs(c-d)<=w.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(f-k)<=w.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))};var w=function(b){if(b&&b.__esModule)return b;
var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.len=q;c.sub=l;c.mul=m;c.div=f;c.dist=k;c.sqrDist=b;c.sqrLen=r;c.forEach=function(){var b=h();return function(a,c,f,d,k,h){var l=void 0,m=void 0;c||(c=2);f||(f=0);m=d?Math.min(d*c+f,a.length):a.length;for(l=f;l<m;l+=c)b[0]=a[l],b[1]=a[l+1],k(b,b,h),a[l]=b[0],a[l+1]=b[1];return a}}()},function(a,c,d){function h(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c]);return a["default"]=b,a}function l(b,a,c){var f=.5*c[0],d=.5*c[1];c=.5*c[2];var k=a[0],h=a[1],l=a[2];a=a[3];return b[0]=k,b[1]=h,b[2]=l,b[3]=a,b[4]=f*a+d*l-c*h,b[5]=d*a+c*k-f*l,b[6]=c*a+f*h-d*k,b[7]=-f*k-d*h-c*l,b}function m(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b}function f(b,a,c){var f=a[0],d=a[1],k=a[2],h=a[3],l=c[4],m=c[5],q=c[6],r=c[7],w=a[4],A=a[5],I=a[6];a=a[7];var G=c[0],z=c[1],ia=c[2];c=c[3];return b[0]=f*c+h*G+d*ia-k*
z,b[1]=d*c+h*z+k*G-f*ia,b[2]=k*c+h*ia+f*z-d*G,b[3]=h*c-f*G-d*z-k*ia,b[4]=f*r+h*l+d*q-k*m+w*c+a*G+A*ia-I*z,b[5]=d*r+h*m+k*l-f*q+A*c+a*z+I*G-w*ia,b[6]=k*r+h*q+f*m-d*l+I*c+a*ia+w*z-A*G,b[7]=h*r-f*l-d*m-k*q+a*c-w*G-A*z-I*ia,b}Object.defineProperty(c,"__esModule",{value:!0});c.sqrLen=c.squaredLength=c.len=c.length=c.dot=c.mul=c.setReal=c.getReal=void 0;c.create=function(){var b=new k.ARRAY_TYPE(8);k.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[4]=0,b[5]=0,b[6]=0,b[7]=0);return b[3]=1,b};c.clone=function(b){var a=
new k.ARRAY_TYPE(8);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a};c.fromValues=function(b,a,c,f,d,h,l,m){var q=new k.ARRAY_TYPE(8);return q[0]=b,q[1]=a,q[2]=c,q[3]=f,q[4]=d,q[5]=h,q[6]=l,q[7]=m,q};c.fromRotationTranslationValues=function(b,a,c,f,d,h,l){var m=new k.ARRAY_TYPE(8);m[0]=b;m[1]=a;m[2]=c;m[3]=f;d*=.5;h*=.5;l*=.5;return m[4]=d*f+h*c-l*a,m[5]=h*f+l*b-d*c,m[6]=l*f+d*a-h*b,m[7]=-d*b-h*a-l*c,m};c.fromRotationTranslation=l;c.fromTranslation=function(b,
a){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b[4]=.5*a[0],b[5]=.5*a[1],b[6]=.5*a[2],b[7]=0,b};c.fromRotation=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=0,b[5]=0,b[6]=0,b[7]=0,b};c.fromMat4=function(a,c){var f=b.create();q.getRotation(f,c);var d=new k.ARRAY_TYPE(3);return q.getTranslation(d,c),l(a,f,d),a};c.copy=m;c.identity=function(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b[4]=0,b[5]=0,b[6]=0,b[7]=0,b};c.set=function(b,a,c,f,d,k,h,l,m){return b[0]=a,b[1]=c,b[2]=f,b[3]=d,b[4]=k,b[5]=
h,b[6]=l,b[7]=m,b};c.getDual=function(b,a){return b[0]=a[4],b[1]=a[5],b[2]=a[6],b[3]=a[7],b};c.setDual=function(b,a){return b[4]=a[0],b[5]=a[1],b[6]=a[2],b[7]=a[3],b};c.getTranslation=function(b,a){var c=a[4],f=a[5],d=a[6],k=a[7],h=-a[0],l=-a[1],m=-a[2],q=a[3];return b[0]=2*(c*q+k*h+f*m-d*l),b[1]=2*(f*q+k*l+d*h-c*m),b[2]=2*(d*q+k*m+c*l-f*h),b};c.translate=function(b,a,c){var f=a[0],d=a[1],k=a[2],h=a[3],l=.5*c[0],m=.5*c[1];c=.5*c[2];var q=a[4],r=a[5],w=a[6];a=a[7];return b[0]=f,b[1]=d,b[2]=k,b[3]=
h,b[4]=h*l+d*c-k*m+q,b[5]=h*m+k*l-f*c+r,b[6]=h*c+f*m-d*l+w,b[7]=-f*l-d*m-k*c+a,b};c.rotateX=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],u=c[6],r=c[7],w=m*l+r*d+q*h-u*k,A=q*l+r*k+u*d-m*h,I=u*l+r*h+m*k-q*d,m=r*l-m*d-q*k-u*h;return b.rotateX(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=w*l+m*d+A*h-I*k,a[5]=A*l+m*k+I*d-w*h,a[6]=I*l+m*h+w*k-A*d,a[7]=m*l-w*d-A*k-I*h,a};c.rotateY=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],u=c[6],r=c[7],w=m*l+r*d+q*h-u*k,A=q*l+r*k+u*
d-m*h,I=u*l+r*h+m*k-q*d,m=r*l-m*d-q*k-u*h;return b.rotateY(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=w*l+m*d+A*h-I*k,a[5]=A*l+m*k+I*d-w*h,a[6]=I*l+m*h+w*k-A*d,a[7]=m*l-w*d-A*k-I*h,a};c.rotateZ=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],u=c[6],r=c[7],w=m*l+r*d+q*h-u*k,A=q*l+r*k+u*d-m*h,I=u*l+r*h+m*k-q*d,m=r*l-m*d-q*k-u*h;return b.rotateZ(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=w*l+m*d+A*h-I*k,a[5]=A*l+m*k+I*d-w*h,a[6]=I*l+m*h+w*k-A*d,a[7]=m*l-w*d-A*k-I*h,a};c.rotateByQuatAppend=
function(b,a,c){var f=c[0],d=c[1],k=c[2];c=c[3];var h=a[0],l=a[1],m=a[2],q=a[3];return b[0]=h*c+q*f+l*k-m*d,b[1]=l*c+q*d+m*f-h*k,b[2]=m*c+q*k+h*d-l*f,b[3]=q*c-h*f-l*d-m*k,h=a[4],l=a[5],m=a[6],q=a[7],b[4]=h*c+q*f+l*k-m*d,b[5]=l*c+q*d+m*f-h*k,b[6]=m*c+q*k+h*d-l*f,b[7]=q*c-h*f-l*d-m*k,b};c.rotateByQuatPrepend=function(b,a,c){var f=a[0],d=a[1],k=a[2];a=a[3];var h=c[0],l=c[1],m=c[2],q=c[3];return b[0]=f*q+a*h+d*m-k*l,b[1]=d*q+a*l+k*h-f*m,b[2]=k*q+a*m+f*l-d*h,b[3]=a*q-f*h-d*l-k*m,h=c[4],l=c[5],m=c[6],q=
c[7],b[4]=f*q+a*h+d*m-k*l,b[5]=d*q+a*l+k*h-f*m,b[6]=k*q+a*m+f*l-d*h,b[7]=a*q-f*h-d*l-k*m,b};c.rotateAroundAxis=function(b,a,c,f){if(Math.abs(f)<k.EPSILON)return m(b,a);var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);f*=.5;var h=Math.sin(f),l=h*c[0]/d,q=h*c[1]/d;c=h*c[2]/d;f=Math.cos(f);var d=a[0],h=a[1],r=a[2],u=a[3];b[0]=d*f+u*l+h*c-r*q;b[1]=h*f+u*q+r*l-d*c;b[2]=r*f+u*c+d*q-h*l;b[3]=u*f-d*l-h*q-r*c;d=a[4];h=a[5];r=a[6];a=a[7];return b[4]=d*f+a*l+h*c-r*q,b[5]=h*f+a*q+r*l-d*c,b[6]=r*f+a*c+d*q-h*l,b[7]=
a*f-d*l-h*q-r*c,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b[4]=a[4]+c[4],b[5]=a[5]+c[5],b[6]=a[6]+c[6],b[7]=a[7]+c[7],b};c.multiply=f;c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b[4]=a[4]*c,b[5]=a[5]*c,b[6]=a[6]*c,b[7]=a[7]*c,b};c.lerp=function(b,a,c,f){var d=1-f;0>r(a,c)&&(f=-f);return b[0]=a[0]*d+c[0]*f,b[1]=a[1]*d+c[1]*f,b[2]=a[2]*d+c[2]*f,b[3]=a[3]*d+c[3]*f,b[4]=a[4]*d+c[4]*f,b[5]=a[5]*d+c[5]*f,b[6]=a[6]*d+c[6]*
f,b[7]=a[7]*d+c[7]*f,b};c.invert=function(b,a){var c=w(a);return b[0]=-a[0]/c,b[1]=-a[1]/c,b[2]=-a[2]/c,b[3]=a[3]/c,b[4]=-a[4]/c,b[5]=-a[5]/c,b[6]=-a[6]/c,b[7]=a[7]/c,b};c.conjugate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b[4]=-a[4],b[5]=-a[5],b[6]=-a[6],b[7]=a[7],b};c.normalize=function(b,a){var c=w(a);if(0<c){var c=Math.sqrt(c),f=a[0]/c,d=a[1]/c,k=a[2]/c,h=a[3]/c,l=a[4],m=a[5],q=a[6],r=a[7],A=f*l+d*m+k*q+h*r;b[0]=f;b[1]=d;b[2]=k;b[3]=h;b[4]=(l-f*A)/c;b[5]=(m-d*A)/c;b[6]=
(q-k*A)/c;b[7]=(r-h*A)/c}return b};c.str=function(b){return"quat2("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]};c.equals=function(b,a){var c=b[0],f=b[1],d=b[2],h=b[3],l=b[4],m=b[5],q=b[6],r=b[7],w=a[0],A=a[1],I=a[2],G=a[3],R=a[4],z=a[5],ia=a[6],J=a[7];return Math.abs(c-w)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-
A)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-I)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(h-G)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(l-R)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(m-z)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(q-ia)<=k.EPSILON*Math.max(1,Math.abs(q),Math.abs(ia))&&Math.abs(r-J)<=k.EPSILON*Math.max(1,Math.abs(r),Math.abs(J))};var k=h(d(0)),b=h(d(3)),q=h(d(4));c.getReal=b.copy;c.setReal=b.copy;c.mul=f;
var r=c.dot=b.dot;a=c.length=b.length;var w=(c.len=a,c.squaredLength=b.squaredLength);c.sqrLen=w},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2],e=c[3],g=c[4];c=c[5];var p=b[0],n=b[1],t=b[2],r=b[3],A=b[4];b=b[5];return a[0]=d*p+m*n,a[1]=l*p+e*n,a[2]=d*t+m*r,a[3]=l*t+e*r,a[4]=d*A+m*b+g,a[5]=l*A+e*b+c,a}function l(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=c[5]-b[5],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=
function(){var a=new m.ARRAY_TYPE(6);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=new m.ARRAY_TYPE(6);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};c.fromValues=function(a,c,b,d,h,l){var e=new m.ARRAY_TYPE(6);return e[0]=a,e[1]=c,e[2]=b,e[3]=d,e[4]=
h,e[5]=l,e};c.set=function(a,c,b,d,h,l,e){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a[4]=l,a[5]=e,a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],m=b*l-d*h;return m?(m=1/m,a[0]=l*m,a[1]=-d*m,a[2]=-h*m,a[3]=b*m,a[4]=(h*g-l*e)*m,a[5]=(d*e-b*g)*m,a):null};c.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};c.multiply=h;c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4];c=c[5];var m=Math.sin(b);b=Math.cos(b);return a[0]=d*b+l*m,a[1]=h*b+e*m,a[2]=d*-m+l*b,a[3]=h*-m+e*b,
a[4]=g,a[5]=c,a};c.scale=function(a,c,b){var d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],m=b[0];b=b[1];return a[0]=c[0]*m,a[1]=d*m,a[2]=h*b,a[3]=l*b,a[4]=e,a[5]=g,a};c.translate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4];c=c[5];var m=b[0];b=b[1];return a[0]=d,a[1]=h,a[2]=l,a[3]=e,a[4]=d*m+l*b+g,a[5]=h*m+e*b+c,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a[4]=0,a[5]=0,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=c[1],a[4]=
0,a[5]=0,a};c.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=c[0],a[5]=c[1],a};c.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a};c.subtract=l;c.multiplyScalar=function(a,c,
b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*d,a};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],l=a[3],e=a[4],g=a[5],p=c[0],n=c[1],t=c[2],r=c[3],A=c[4],y=c[5];return Math.abs(b-p)<=m.EPSILON*Math.max(1,
Math.abs(b),Math.abs(p))&&Math.abs(d-n)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(h-t)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(t))&&Math.abs(l-r)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(r))&&Math.abs(e-A)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&Math.abs(g-y)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(y))};var m=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));
c.mul=h;c.sub=l},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2];c=c[3];var e=b[0],g=b[1],p=b[2];b=b[3];return a[0]=d*e+m*g,a[1]=l*e+c*g,a[2]=d*p+m*b,a[3]=l*p+c*b,a}function l(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new m.ARRAY_TYPE(4);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=new m.ARRAY_TYPE(4);return c[0]=
a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a};c.fromValues=function(a,c,b,d){var h=new m.ARRAY_TYPE(4);return h[0]=a,h[1]=c,h[2]=b,h[3]=d,h};c.set=function(a,c,b,d,h){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a};c.transpose=function(a,c){if(a===c){var b=c[1];a[1]=c[2];a[2]=b}else a[0]=c[0],a[1]=c[2],a[2]=c[1],a[3]=c[3];return a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],
e=b*l-h*d;return e?(e=1/e,a[0]=l*e,a[1]=-d*e,a[2]=-h*e,a[3]=b*e,a):null};c.adjoint=function(a,c){var b=c[0];return a[0]=c[3],a[1]=-c[1],a[2]=-c[2],a[3]=b,a};c.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};c.multiply=h;c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2];c=c[3];var e=Math.sin(b);b=Math.cos(b);return a[0]=d*b+l*e,a[1]=h*b+c*e,a[2]=d*-e+l*b,a[3]=h*-e+c*b,a};c.scale=function(a,c,b){var d=c[1],h=c[2],l=c[3],e=b[0];b=b[1];return a[0]=c[0]*e,a[1]=d*e,a[2]=h*b,a[3]=l*b,a};c.fromRotation=
function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=c[1],a};c.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};c.LDU=function(a,c,b,d){return a[2]=d[2]/d[0],b[0]=d[0],b[1]=d[1],b[3]=d[3]-a[2]*b[1],[a,c,b]};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],
a[3]=c[3]+b[3],a};c.subtract=l;c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],l=a[3],e=c[0],g=c[1],p=c[2],n=c[3];return Math.abs(b-e)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))&&Math.abs(d-g)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(h-p)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(l-n)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(n))};c.multiplyScalar=function(a,c,b){return a[0]=
c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a};var m=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=h;c.sub=l},function(a,c,d){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=
a,b}Object.defineProperty(c,"__esModule",{value:!0});c.vec4=c.vec3=c.vec2=c.quat2=c.quat=c.mat4=c.mat3=c.mat2d=c.mat2=c.glMatrix=void 0;a=h(d(0));var l=h(d(9)),m=h(d(8)),f=h(d(5)),k=h(d(4)),b=h(d(3)),q=h(d(7)),r=h(d(6)),w=h(d(2));d=h(d(1));c.glMatrix=a;c.mat2=l;c.mat2d=m;c.mat3=f;c.mat4=k;c.quat=b;c.quat2=q;c.vec2=r;c.vec3=w;c.vec4=d}])})},{}],75:[function(d,h,r){(function(a){function c(){m.forEach(function(a){f[l[a]]=!1})}function r(a){f[l[a.keyCode]]=!1}function G(a){f[l[a.keyCode]]=!0}var l=d("vkey"),
m=Object.keys(l),f={};c();h.exports=function(a){return a?f[a]:f};a.browser&&(window.addEventListener("keydown",G,!1),window.addEventListener("keyup",r,!1),window.addEventListener("blur",c,!1))}).call(this,d("_process"))},{_process:77,vkey:80}],76:[function(d,h,r){function a(a,c,d){this.rotation=a;this.center=c;this.distance=d}function c(a,c){var d=c[0],f=c[1],d=d*d+f*f;1<d&&(d=1);a[0]=-c[0];a[1]=c[1];a[2]=c[2]||Math.sqrt(1-d);a[3]=0}d=d("gl-matrix");var A=d.vec3,G=d.mat3,l=d.mat4,m=d.quat,f=new Float32Array(16),
k=new Float32Array(16);d=a.prototype;d.view=function(a){a||(a=l.create());k[0]=k[1]=0;k[2]=-this.distance;l.fromRotationTranslation(a,m.conjugate(f,this.rotation),k);l.translate(a,a,A.negate(f,this.center));return a};d.lookAt=function(a,c,d){l.lookAt(f,a,c,d);G.fromMat4(f,f);m.fromMat3(this.rotation,f);A.copy(this.center,c);this.distance=A.distance(a,c)};d.pan=function(a){var c=this.distance;f[0]=-c*(a[0]||0);f[1]=c*(a[1]||0);f[2]=c*(a[2]||0);A.transformQuat(f,f,this.rotation);A.add(this.center,this.center,
f)};d.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};d.rotate=function(a,d){c(f,a);c(k,d);m.invert(k,k);m.multiply(f,f,k);1E-6>m.length(f)||(m.multiply(this.rotation,this.rotation,f),m.normalize(this.rotation,this.rotation))};h.exports=function(b,c,d){b=b||[0,0,-1];c=c||[0,0,0];d=d||[0,1,0];var f=new a(m.create(),A.create(),1);f.lookAt(b,c,d);return f}},{"gl-matrix":74}],77:[function(d,h,r){function a(){throw Error("setTimeout has not been defined");}function c(){throw Error("clearTimeout has not been defined");
}function A(c){if(b===setTimeout)return setTimeout(c,0);if((b===a||!b)&&setTimeout)return b=setTimeout,setTimeout(c,0);try{return b(c,0)}catch(d){try{return b.call(null,c,0)}catch(e){return b.call(this,c,0)}}}function G(a){if(q===clearTimeout)return clearTimeout(a);if((q===c||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(b){try{return q.call(null,a)}catch(d){return q.call(this,a)}}}function l(){w&&e&&(w=!1,e.length?I=e.concat(I):g=-1,I.length&&m())}function m(){if(!w){var a=
A(l);w=!0;for(var b=I.length;b;){e=I;for(I=[];++g<b;)e&&e[g].run();g=-1;b=I.length}e=null;w=!1;G(a)}}function f(a,b){this.fun=a;this.array=b}function k(){}d=h.exports={};var b,q;try{b="function"===typeof setTimeout?setTimeout:a}catch(p){b=a}try{q="function"===typeof clearTimeout?clearTimeout:c}catch(p){q=c}var I=[],w=!1,e,g=-1;d.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];I.push(new f(a,b));1!==I.length||w||A(m)};
f.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=k;d.addListener=k;d.once=k;d.off=k;d.removeListener=k;d.removeAllListeners=k;d.emit=k;d.prependListener=k;d.prependOnceListener=k;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");};d.umask=function(){return 0}},
{}],78:[function(d,h,r){function a(a){throw Error("resl: "+a);}function c(c,d,b){Object.keys(c).forEach(function(c){0>d.indexOf(c)&&a('invalid parameter "'+c+'" in '+b)})}function A(a,c){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=c}var G=["manifest","onDone","onProgress","onError"],l=["type","src","stream","credentials","parser"],m=["onData","onDone"];h.exports=function(d){function h(b,c){if(b in d){var e=d[b];"function"!==typeof e&&a('invalid callback "'+b+'"');return e}return null}
function b(a){function b(){if(!(2>f.readyState||1===k.state||-1===k.state)){if(200!==f.status)return r('error loading resource "'+a.name+'"');if(2<f.readyState&&0===k.state){var d;d="binary"===a.type?f.response:f.responseText;if(g.data)try{h=g.data(d)}catch(e){return r(e)}else h=d}if(3<f.readyState&&0===k.state){if(g.done)try{h=g.done()}catch(e){return r(e)}k.state=1}t[c]=h;k.progress=.75*k.progress+.25;k.ready=a.stream&&!!h||1===k.state;w()}}var c=a.name,d=a.stream,e="binary"===a.type,g=a.parser,
f=new XMLHttpRequest,h=null,k=new A(c,function(){1!==k.state&&-1!==k.state&&(f.onreadystatechange=null,f.abort(),k.state=-1)});f.onreadystatechange=d?b:function(){4===f.readyState&&b()};e&&(f.responseType="arraybuffer");a.credentials&&(f.withCredentials=!0);f.open("GET",a.src,!0);f.send();return k}function q(a,b){function c(){if(0===l.state)if(k.data)try{m=k.data(b)}catch(a){return r(a)}else m=b}function d(a){c();t[h]=m;l.progress=a.lengthComputable?Math.max(l.progress,a.loaded/a.total):.75*l.progress+
.25;w(h)}function e(){c();if(0===l.state){if(k.done)try{m=k.done()}catch(a){return r(a)}l.state=1}l.progress=1;l.ready=!0;t[h]=m;g();w("finish "+h)}function f(){r('error loading asset "'+h+'"')}function g(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",e):b.addEventListener("canplay",e);b.removeEventListener("error",f)}var h=a.name,k=a.parser,l=new A(h,function(){1!==l.state&&-1!==l.state&&(l.state=-1,g(),b.src="")}),m=b;a.stream&&b.addEventListener("progress",
d);if("image"===a.type)b.addEventListener("load",e);else{var n=!1,p=!1;b.addEventListener("loadedmetadata",function(){p=!0;n&&e()});b.addEventListener("canplay",function(){n=!0;p&&e()})}b.addEventListener("error",f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return l}function r(a){-1!==v&&1!==v&&(v=-1,y.forEach(function(a){a.cancel()}),n?"string"===typeof a?n(Error("resl: "+a)):n(a):console.error("resl error:",a))}function w(a){if(-1!==v&&1!==v){var b=0,c=0;y.forEach(function(a){a.ready&&
(c+=1);b+=a.progress});c===y.length?(v=1,g(t)):p&&p(b/y.length,a)}}"object"===typeof d&&d||a("invalid or missing configuration");c(d,G,"config");var e=d.manifest;"object"===typeof e&&e||a("missing manifest");var g=h("onDone");g||a("missing onDone() callback");var p=h("onProgress"),n=h("onError"),t={},v=0,D={text:b,binary:function(a){return b(a)},image:function(a){return q(a,document.createElement("img"))},video:function(a){return q(a,document.createElement("video"))},audio:function(a){return q(a,
document.createElement("audio"))}},y=Object.keys(e).map(function(b){function d(b,c){if(b in f.parser){var e=f.parser[b];"function"!==typeof e&&a("invalid parser callback "+b+' for asset "'+b+'"');return e}return c}var f=e[b];"string"===typeof f?f={src:f}:"object"===typeof f&&f||a('invalid asset definition "'+b+'"');c(f,l,'asset "'+b+'"');var g={};"parser"in f&&("function"===typeof f.parser?g={data:f.parser}:"object"===typeof f.parser&&f.parser?(c(g,m,'parser for asset "'+b+'"'),"onData"in g||a('missing onData callback for parser in asset "'+
b+'"'),g={data:d("onData"),done:d("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,d,e){c in f&&(e=f[c]);0>d.indexOf(e)&&a("invalid "+c+' "'+e+'" for asset "'+b+'", possible values: '+d);return e}("type",Object.keys(D),"text"),stream:!!f.stream,credentials:!!f.credentials,src:function(c,d,e){c in f?e=f[c]:d&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof e&&a("invalid "+c+' for asset "'+b+'", must be a string');return e}("src",!0,""),parser:g}}).map(function(a){return D[a.type](a)});
0===y.length&&setTimeout(function(){w("done")},1)}},{}],79:[function(d,h,r){var a=d("events/"),c=d("wheel");h.exports=function(d,h){function l(){m[0]=m[1]=m[2]=0}var m=new a;m.flush=l;l();if("undefined"===typeof window)return m;d=d||window;c(d,function(a){var c=1===a.deltaMode?12:1;m[0]+=c*(a.deltaX||0);m[1]+=c*(a.deltaY||0);m[2]+=c*(a.deltaZ||0);m.emit("scroll",m);h&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return m}},{"events/":43,wheel:81}],80:[function(d,
h,r){var a="undefined"!==typeof window?window.navigator.userAgent:"";d=/OS X/.test(a);r=/Opera/.test(a);a=!/like Gecko/.test(a)&&!r;d=h.exports={0:d?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",
31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:d?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",
164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:d&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",
222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:r?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(h=58;65>h;++h)d[h]=String.fromCharCode(h);for(h=48;58>h;++h)d[h]=h-48+"";for(h=65;91>h;++h)d[h]=String.fromCharCode(h);for(h=96;106>h;++h)d[h]="<num-"+(h-96)+">";for(h=112;136>h;++h)d[h]="F"+(h-111)},{}],81:[function(d,h,r){function a(a,d,f,h){a[A](c+d,"wheel"==G?f:function(a){!a&&
(a=window.event);var c={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==G?(c.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(c.deltaX=-.025*a.wheelDeltaX)):c.deltaY=a.detail;return f(c)},h||!1)}h.exports=function(c,d,f){a(c,G,d,f);"DOMMouseScroll"==G&&a(c,"MozMousePixelScroll",d,f)};var c="",A,G;window.addEventListener?A="addEventListener":
(A="attachEvent",c="on");G="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],82:[function(d,h,r){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var c=d("./lib/util/check"),A=d("./lib/util/extend"),G=d("./lib/dynamic"),l=d("./lib/util/raf"),m=d("./lib/util/clock"),f=d("./lib/strings"),k=d("./lib/webgl"),b=d("./lib/extension"),q=d("./lib/limits"),I=d("./lib/buffer"),w=d("./lib/elements"),e=d("./lib/texture"),
g=d("./lib/renderbuffer"),p=d("./lib/framebuffer"),n=d("./lib/attribute"),t=d("./lib/shader"),v=d("./lib/read"),D=d("./lib/core"),y=d("./lib/stats"),W=d("./lib/timer");h.exports=function(d){function h(){if(0===nb.length)P&&P.update(),pc=null;else{pc=l.next(h);K();for(var a=nb.length-1;0<=a;--a){var b=nb[a];b&&b(Q,null,0)}ma.flush();P&&P.update()}}function r(){!pc&&0<nb.length&&(pc=l.next(h))}function ta(){pc&&(l.cancel(h),pc=null)}function S(a){a.preventDefault();Qa=!0;ta();ga.forEach(function(a){a()})}
function R(a){ma.getError();Qa=!1;Cb.restore();oa.restore();ab.restore();da.restore();Da.restore();Ga.restore();B.restore();P&&P.restore();zb.procs.refresh();r();ra.forEach(function(a){a()})}function z(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(G.isDynamic(f))e[b]=G.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(G.isDynamic(f[g])){e[b]=G.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function d(a){for(;p.length<a;)p.push(null);
return p}c(!!a,"invalid args to regl({...})");c.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=A({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");
b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=zb.compile(a,g,f,e,h),l=k.draw,m=k.batch,n=k.scope,p=[];return A(function(a,b){var e;Qa&&c.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)n.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)n.call(this,a[e],b,e);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return m.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function ia(a,b){var d=0;zb.procs.poll();var e=b.color;e&&(ma.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),d|=16384);"depth"in b&&(ma.clearDepth(+b.depth),d|=256);"stencil"in b&&(ma.clearStencil(b.stencil|0),d|=1024);c(!!d,"called regl.clear with no buffer specified");ma.clear(d)}function J(b){c.type(b,"function","regl.frame() callback must be a function");
nb.push(b);r();return{cancel:function(){function d(){var b=a(nb,d);nb[b]=nb[nb.length-1];--nb.length;0>=nb.length&&ta()}var e=a(nb,b);c(0<=e,"cannot cancel a frame twice");nb[e]=d}}}function V(){var a=La.viewport,b=La.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=ma.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=ma.drawingBufferHeight}function K(){Q.tick+=1;Q.time=aa();V();zb.procs.poll()}function ka(){da.refresh();
V();zb.procs.refresh();P&&P.update()}function aa(){return(m()-O)/1E3}console.log("REGL args are:",d);d=k(d);console.log("REGL configs are:",d);if(!d)return null;var ma=d.gl,na=ma.getContextAttributes(),Qa=ma.isContextLost(),Cb=b(ma,d);if(!Cb)return null;var ea=f(),Oa=y(),X=Cb.extensions,P=W(ma,X),O=m(),U=ma.drawingBufferWidth,pa=ma.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:U,viewportHeight:pa,framebufferWidth:U,framebufferHeight:pa,drawingBufferWidth:U,drawingBufferHeight:pa,pixelRatio:d.pixelRatio},
U={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ob=q(ma,X),ab=I(ma,Oa,d,function(a){return B.destroyBuffer(a)}),T=w(ma,X,ab,Oa),B=n(ma,X,Ob,Oa,ab,T,U),oa=t(ma,ea,Oa,d),da=e(ma,X,Ob,function(){zb.procs.poll()},Q,Oa,d),Da=g(ma,X,Ob,Oa,d),Ga=p(ma,X,Ob,da,Da,Oa),zb=D(ma,ea,X,Ob,ab,T,da,Ga,{},B,oa,U,Q,P,d),ea=v(ma,Ga,zb.procs.poll,Q,na,X,Ob),La=zb.next,Y=ma.canvas,nb=[],ga=[],ra=[],cc=[d.onDestroy],pc=null;Y&&(Y.addEventListener("webglcontextlost",S,!1),Y.addEventListener("webglcontextrestored",
R,!1));var jc=Ga.setFBO=z({framebuffer:G.define.call(null,1,"framebuffer")});ka();na=A(z,{clear:function(a){c("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)jc(A({framebuffer:a.framebuffer.faces[b]},a),ia);else jc(a,ia);else ia(null,a)},prop:G.define.bind(null,1),context:G.define.bind(null,2),"this":G.define.bind(null,3),draw:z({}),buffer:function(a){return ab.create(a,34962,!1,!1)},
elements:function(a){return T.create(a,!1)},texture:da.create2D,cube:da.createCube,renderbuffer:Da.create,framebuffer:Ga.create,framebufferCube:Ga.createCube,vao:B.createVAO,attributes:na,frame:J,on:function(a,b){c.type(b,"function","listener callback must be a function");var d;switch(a){case "frame":return J(b);case "lost":d=ga;break;case "restore":d=ra;break;case "destroy":d=cc;break;default:c.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(b);return{cancel:function(){for(var a=
0;a<d.length;++a)if(d[a]===b){d[a]=d[d.length-1];d.pop();break}}}},limits:Ob,hasExtension:function(a){return 0<=Ob.extensions.indexOf(a.toLowerCase())},read:ea,destroy:function(){nb.length=0;ta();Y&&(Y.removeEventListener("webglcontextlost",S),Y.removeEventListener("webglcontextrestored",R));oa.clear();Ga.clear();Da.clear();B.clear();da.clear();T.clear();ab.clear();P&&P.clear();cc.forEach(function(a){a()})},_gl:ma,_refresh:ka,poll:function(){K();P&&P.update()},now:aa,stats:Oa});d.onDone(null,na);
return na}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
<!DOCTYPE html>
      <html>
        <head>
          <title>example/minecraft.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(l){return"undefined"!=typeof window&&window===l?l:"undefined"!=typeof global?global:l}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(l){return"jscomp_symbol_"+l+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(l){$jscomp.initSymbolIterator();if(l[$jscomp.global.Symbol.iterator])return l[$jscomp.global.Symbol.iterator]();var r=0;return{next:function(){return r==l.length?{done:!0}:{done:!1,value:l[r++]}}}};
$jscomp.arrayFromIterator=function(l){for(var r,G=[];!(r=l.next()).done;)G.push(r.value);return G};$jscomp.arrayFromIterable=function(l){return l instanceof Array?l:$jscomp.arrayFromIterator($jscomp.makeIterator(l))};
$jscomp.inherits=function(l,r){function G(){}G.prototype=r.prototype;l.prototype=new G;l.prototype.constructor=l;for(var a in r)if($jscomp.global.Object.defineProperties){var d=$jscomp.global.Object.getOwnPropertyDescriptor(r,a);d&&$jscomp.global.Object.defineProperty(l,a,d)}else l[a]=r[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(l,r){l instanceof String&&(l=String(l));var G=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},d=(a.next=function(){if(G<l.length){var a=G++;return{value:r(a,l[a]),done:!1}}d.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return d},a);return d};
$jscomp.array.findInternal_=function(l,r,G){l instanceof String&&(l=String(l));for(var a=l.length,d=0;d<a;d++){var P=l[d];if(r.call(G,P,d,l))return{i:d,v:P}}return{i:-1,v:void 0}};
$jscomp.array.from=function(l,r,G){r=void 0===r?function(d){return d}:r;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(l[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();l=l[Symbol.iterator]();for(var d;!(d=l.next()).done;)a.push(r.call(G,d.value))}else{d=l.length;for(var P=0;P<d;P++)a.push(r.call(G,l[P]))}return a};$jscomp.array.of=function(l){for(var r=[],G=0;G<arguments.length;++G)r[G-0]=arguments[G];return $jscomp.array.from(r)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(l,r){return[l,r]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(l){return l})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(l,r){return r})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(l,r,G){var a=this.length;l=Number(l);r=Number(r);G=Number(null!=G?G:a);if(l<r)for(G=Math.min(G,a);r<G;)r in this?this[l++]=this[r++]:(delete this[l++],r++);else for(G=Math.min(G,a+r-l),l+=G-r;G>r;)--G in this?this[--l]=this[G]:delete this[l];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(l,r,G){null!=G&&l.length||(G=this.length||0);G=Number(G);for(r=Number((void 0===r?0:r)||0);r<G;r++)this[r]=l;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(l,r){return $jscomp.array.findInternal_(this,l,r).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(l,r){return $jscomp.array.findInternal_(this,l,r).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(l){l=void 0===l?[]:l;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(l){l=$jscomp.makeIterator(l);for(var r=l.next();!r.done;r=l.next())r=r.value,this.set(r[0],r[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var l=$jscomp.global.Map;if(!l||!l.prototype.entries||!Object.seal)return!1;try{var r=Object.seal({x:4}),G=new l($jscomp.makeIterator([[r,"s"]]));if("s"!=G.get(r)||1!=G.size||G.get({x:4})||G.set({x:4},"t")!=G||2!=G.size)return!1;var a=G.entries(),d=a.next();if(d.done||d.value[0]!=r||"s"!=d.value[1])return!1;d=a.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!a.next().done?!1:!0}catch(P){return!1}};
$jscomp.Map.createHead_=function(){var l={};return l.previous=l.next=l.head=l};$jscomp.Map.getId_=function(l){if(!(l instanceof Object))return String(l);$jscomp.Map.key_ in l||l instanceof Object&&Object.isExtensible&&Object.isExtensible(l)&&$jscomp.Map.defineProperty_(l,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in l?l[$jscomp.Map.key_]:" "+l};
$jscomp.Map.prototype.set=function(l,r){var G=this.maybeGetEntry_(l),a=G.id,d=G.list,G=G.entry;d||(d=this.data_[a]=[]);G?G.value=r:(G={next:this.head_,previous:this.head_.previous,head:this.head_,key:l,value:r},d.push(G),this.head_.previous.next=G,this.head_.previous=G,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(l){var r=this.maybeGetEntry_(l);l=r.id;var G=r.list,a=r.index;return(r=r.entry)&&G?(G.splice(a,1),G.length||delete this.data_[l],r.previous.next=r.next,r.next.previous=r.previous,r.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(l){return!!this.maybeGetEntry_(l).entry};
$jscomp.Map.prototype.get=function(l){return(l=this.maybeGetEntry_(l).entry)&&l.value};$jscomp.Map.prototype.maybeGetEntry_=function(l){var r=$jscomp.Map.getId_(l),G=this.data_[r];if(G)for(var a=0;a<G.length;a++){var d=G[a];if(l!==l&&d.key!==d.key||l===d.key)return{id:r,list:G,index:a,entry:d}}return{id:r,list:G,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(l){return[l.key,l.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(l){return l.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(l){return l.value})};$jscomp.Map.prototype.forEach=function(l,r){for(var G=$jscomp.makeIterator(this.entries()),a=G.next();!a.done;a=G.next())a=a.value,l.call(r,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(l){var r=this,G=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(G){for(;G.head!=r.head_;)G=G.previous;for(;G.next!=G.head;)return G=G.next,{done:!1,value:l(G)};G=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(l,r,G){Object.defineProperty(l,r,{value:String(G)})}:function(l,r,G){l[r]=String(G)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(l){l=Number(l)>>>0;if(0===l)return 32;var r=0;0===(l&4294901760)&&(l<<=16,r+=16);0===(l&4278190080)&&(l<<=8,r+=8);0===(l&4026531840)&&(l<<=4,r+=4);0===(l&3221225472)&&(l<<=2,r+=2);0===(l&2147483648)&&r++;return r};$jscomp.math.imul=function(l,r){l=Number(l);r=Number(r);var G=l&65535,a=r&65535;return G*a+((l>>>16&65535)*a+G*(r>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(l){l=Number(l);return 0===l||isNaN(l)?l:0<l?1:-1};
$jscomp.math.log10=function(l){return Math.log(l)/Math.LN10};$jscomp.math.log2=function(l){return Math.log(l)/Math.LN2};$jscomp.math.log1p=function(l){l=Number(l);if(.25>l&&-.25<l){for(var r=l,G=1,a=l,d=0,P=1;d!=a;)r*=l,P*=-1,a=(d=a)+P*r/++G;return a}return Math.log(1+l)};$jscomp.math.expm1=function(l){l=Number(l);if(.25>l&&-.25<l){for(var r=l,G=1,a=l,d=0;d!=a;)r*=l/++G,a=(d=a)+r;return a}return Math.exp(l)-1};$jscomp.math.cosh=function(l){l=Number(l);return(Math.exp(l)+Math.exp(-l))/2};
$jscomp.math.sinh=function(l){l=Number(l);return 0===l?l:(Math.exp(l)-Math.exp(-l))/2};$jscomp.math.tanh=function(l){l=Number(l);if(0===l)return l;var r=Math.exp(2*-Math.abs(l)),r=(1-r)/(1+r);return 0>l?-r:r};$jscomp.math.acosh=function(l){l=Number(l);return Math.log(l+Math.sqrt(l*l-1))};$jscomp.math.asinh=function(l){l=Number(l);if(0===l)return l;var r=Math.log(Math.abs(l)+Math.sqrt(l*l+1));return 0>l?-r:r};
$jscomp.math.atanh=function(l){l=Number(l);return($jscomp.math.log1p(l)-$jscomp.math.log1p(-l))/2};
$jscomp.math.hypot=function(l,r,G){for(var a=[],d=2;d<arguments.length;++d)a[d-2]=arguments[d];l=Number(l);r=Number(r);for(var P=Math.max(Math.abs(l),Math.abs(r)),u=$jscomp.makeIterator(a),d=u.next();!d.done;d=u.next())P=Math.max(P,Math.abs(d.value));if(1E100<P||1E-100>P){l/=P;r/=P;u=l*l+r*r;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d)/P,u+=d*d;return Math.sqrt(u)*P}P=l*l+r*r;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d),P+=
d*d;return Math.sqrt(P)};$jscomp.math.trunc=function(l){l=Number(l);if(isNaN(l)||Infinity===l||-Infinity===l||0===l)return l;var r=Math.floor(Math.abs(l));return 0>l?-r:r};$jscomp.math.cbrt=function(l){if(0===l)return l;l=Number(l);var r=Math.pow(Math.abs(l),1/3);return 0>l?-r:r};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(l){return"number"!==typeof l?!1:!isNaN(l)&&Infinity!==l&&-Infinity!==l};
$jscomp.number.isInteger=function(l){return $jscomp.number.isFinite(l)?l===Math.floor(l):!1};$jscomp.number.isNaN=function(l){return"number"===typeof l&&isNaN(l)};$jscomp.number.isSafeInteger=function(l){return $jscomp.number.isInteger(l)&&Math.abs(l)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(l,r){for(var G=[],a=1;a<arguments.length;++a)G[a-1]=arguments[a];G=$jscomp.makeIterator(G);for(a=G.next();!a.done;a=G.next())if(a=a.value)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(l[d]=a[d]);return l};$jscomp.object.is=function(l,r){return l===r?0!==l||1/l===1/r:l!==l&&r!==r};$jscomp.Set=function(l){l=void 0===l?[]:l;this.map_=new $jscomp.Map;if(l){l=$jscomp.makeIterator(l);for(var r=l.next();!r.done;r=l.next())this.add(r.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var l=$jscomp.global.Set;if(!l||!l.prototype.entries||!Object.seal)return!1;var r=Object.seal({x:4}),l=new l($jscomp.makeIterator([r]));if(l.has(r)||1!=l.size||l.add(r)!=l||1!=l.size||l.add({x:4})!=l||2!=l.size)return!1;var l=l.entries(),G=l.next();if(G.done||G.value[0]!=r||G.value[1]!=r)return!1;G=l.next();return G.done||G.value[0]==r||4!=G.value[0].x||G.value[1]!=G.value[0]?!1:l.next().done};
$jscomp.Set.prototype.add=function(l){this.map_.set(l,l);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(l){l=this.map_["delete"](l);this.size=this.map_.size;return l};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(l){return this.map_.has(l)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(l,r){var G=this;this.map_.forEach(function(a){return l.call(r,a,a,G)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(l,r){if(l instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(l){for(var r=[],G=0;G<arguments.length;++G)r[G-0]=arguments[G];for(var G="",r=$jscomp.makeIterator(r),a=r.next();!a.done;a=r.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?G+=String.fromCharCode(a):(a-=65536,G+=String.fromCharCode(a>>>10&1023|55296),G+=String.fromCharCode(a&1023|56320))}return G};
$jscomp.string.repeat=function(l){var r=this.toString();if(0>l||1342177279<l)throw new RangeError("Invalid count value");l|=0;for(var G="";l;)if(l&1&&(G+=r),l>>>=1)r+=r;return G};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(l){var r=this.toString(),G=r.length;l=Number(l)||0;if(0<=l&&l<G){l|=0;var a=r.charCodeAt(l);if(55296>a||56319<a||l+1===G)return a;l=r.charCodeAt(l+1);return 56320>l||57343<l?a:1024*(a-55296)+l+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(l,r){r=void 0===r?0:r;$jscomp.string.noRegExp_(l,"includes");return-1!==this.toString().indexOf(l,r)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(l,r){r=void 0===r?0:r;$jscomp.string.noRegExp_(l,"startsWith");var G=this.toString();l+="";for(var a=G.length,d=l.length,P=Math.max(0,Math.min(r|0,G.length)),u=0;u<d&&P<a;)if(G[P++]!=l[u++])return!1;return u>=d};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(l,r){$jscomp.string.noRegExp_(l,"endsWith");var G=this.toString();l+="";void 0===r&&(r=G.length);for(var a=Math.max(0,Math.min(r|0,G.length)),d=l.length;0<d&&0<a;)if(G[--a]!=l[--d])return!1;return 0>=d};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function l(r,G,a){function d(q,m){if(!G[q]){if(!r[q]){var b="function"==typeof require&&require;if(!m&&b)return b(q,!0);if(P)return P(q,!0);b=Error("Cannot find module '"+q+"'");throw b.code="MODULE_NOT_FOUND",b;}b=G[q]={exports:{}};r[q][0].call(b.exports,function(b){return d(r[q][1][b]||b)},b,b.exports,l,r,G,a)}return G[q].exports}for(var P="function"==typeof require&&require,u=0;u<a.length;u++)d(a[u]);return d}return l})()({1:[function(l,r,G){r=document.body.appendChild(document.createElement("canvas"));
G=l("canvas-fit");var a=l("../regl")(r),d=l("gl-mat4"),P=l("canvas-orbit-camera")(r);window.addEventListener("resize",G(r),!1);P.rotate([0,0],[0,-.4]);P.zoom(15);var u=[[[-.5,.5,.5],[.5,.5,.5],[.5,-.5,.5],[-.5,-.5,.5]],[[.5,.5,.5],[.5,.5,-.5],[.5,-.5,-.5],[.5,-.5,.5]],[[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,-.5],[.5,-.5,-.5]],[[-.5,.5,-.5],[-.5,.5,.5],[-.5,-.5,.5],[-.5,-.5,-.5]],[[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5]]],q=[[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,.5],[.5,
.5],[.5,1],[0,1]],[[0,.5],[.5,.5],[.5,1],[0,1]],[[0,0],[.5,0],[.5,.5],[0,.5]]],m=[[[0,0,1],[0,0,1],[0,0,1],[0,0,1]],[[1,0,0],[1,0,0],[1,0,0],[1,0,0]],[[0,0,-1],[0,0,-1],[0,0,-1],[0,0,-1]],[[-1,0,0],[-1,0,0],[-1,0,0],[-1,0,0]],[[0,1,0],[0,1,0],[0,1,0],[0,1,0]]],b=function(c,b){return Math.round(2*Math.sin(94.2*c)*Math.sin(188.4*b)+3*Math.cos(376.8*c+2.1)*Math.sin(471*b+.9)+1*Math.cos(753.6*c+43.43)*Math.cos(282.6*b+34.3))},f=[],c=[],h=[],C=[];r=function(e,k,d){for(var a=h.length,z=0;5>z;z++)if(!(0===
z&&k<=b(e,d+1)||1===z&&k<=b(e+1,d)||2===z&&k<=b(e,d-1)||3===z&&k<=b(e-1,d))){var A;for(A=0;A<u[z].length;A++){var y=u[z][A];h.push([y[0]+e,y[1]+k,y[2]+d])}for(A=0;A<m[z].length;A++)y=m[z][A],C.push([y[0],y[1],y[2]]);for(A=0;A<q[z].length;A++)y=q[z][A],f.push([y[0],y[1]]);c.push([2+a,1+a,0+a]);c.push([2+a,0+a,3+a]);a+=4}};for(G=-40;40>=G;G++)for(var y=-40;40>=y;y++){var e=b(G,y);r(G,e,y)}var k=a({cull:{enable:!0,face:"back"},context:{view:function(){return P.view()}},frag:"\n  precision mediump float;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform sampler2D atlas;\n\n  void main () {\n\n    vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));\n    vec3 tex = texture2D(atlas, vUv).rgb;\n    vec3 ambient = 0.3 * tex;\n    vec3 diffuse = 0.7 * tex * clamp( dot(vNormal, lightDir ), 0.0, 1.0 );\n\n    gl_FragColor = vec4(ambient + diffuse, 1.0);\n  }",
vert:"\n  precision mediump float;\n\n  attribute vec3 position, normal;\n  attribute vec2 uv;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform mat4 projection, view;\n\n  void main() {\n    vUv = uv;\n    vNormal = normal;\n    gl_Position = projection * view * vec4(position, 1);\n  }",uniforms:{view:a.context("view"),projection:function(c){return d.perspective([],Math.PI/4,c.viewportWidth/c.viewportHeight,.01,1E3)},atlas:a.prop("atlas")},attributes:{position:a.prop("position"),uv:a.prop("uv"),
normal:a.prop("normal")},elements:a.prop("elements")});l("resl")({manifest:{atlas:{type:"image",src:"assets/atlas.png",parser:function(c){return a.texture({mag:"nearest",mipmap:!0,min:"linear mipmap linear",data:c})}}},onDone:function(b){var e=b.atlas;a.frame(function(){k({position:h,elements:c,uv:f,normal:C,atlas:e});P.tick()})}})},{"../regl":82,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59,resl:78}],2:[function(l,r,G){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var d=l("./util/sorted-object-keys"),P=l("./util/check"),u=l("./util/values"),q=l("./constants/dtypes.json"),m=l("./util/is-typed-array"),b=l("./util/is-ndarray"),f=l("./constants/primitives.json"),c="attributes elements offset count primitive instances".split(" ");r.exports=function(h,C,y,e,k,g,n){function p(c){if(c!==l.currentVAO){var b=C.oes_vertex_array_object;c?b.bindVertexArrayOES(c.vao):b.bindVertexArrayOES(null);
l.currentVAO=c}}function w(c){if(c!==l.currentVAO){if(c)c.bindAttrs();else{for(var b=C.angle_instanced_arrays,e=0;e<v.length;++e){var k=v[e];k.buffer?(h.enableVertexAttribArray(e),k.buffer.bind(),h.vertexAttribPointer(e,k.size,k.type,k.normalized,k.stride,k.offfset),b&&k.divisor&&b.vertexAttribDivisorANGLE(e,k.divisor)):(h.disableVertexAttribArray(e),h.vertexAttrib4f(e,k.x,k.y,k.z,k.w))}n.elements?h.bindBuffer(34963,n.elements.buffer.buffer):h.bindBuffer(34963,null)}l.currentVAO=c}}function z(){u(I).forEach(function(c){c.destroy()})}
function A(){this.id=++ta;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var c=C.oes_vertex_array_object;this.vao=c?c.createVertexArrayOES():null;I[this.id]=this;this.buffers=[]}function ma(){C.oes_vertex_array_object&&u(I).forEach(function(c){c.refresh()})}var x=y.maxAttributes,v=Array(x);for(y=0;y<x;++y)v[y]=new a;var ta=0,I={},l={Record:a,scope:{},state:v,currentVAO:null,targetVAO:null,restore:C.oes_vertex_array_object?ma:
function(){},createVAO:function(h){function p(e){var h;if(Array.isArray(e))h=e,n.elements&&n.ownsElements&&n.elements.destroy(),n.elements=null,n.ownsElements=!1,n.offset=0,n.count=0,n.instances=-1,n.primitive=4;else{P("object"===typeof e,"invalid arguments for create vao");P("attributes"in e,"must specify attributes for vao");if(e.elements){var w=e.elements;n.ownsElements?("function"===typeof w&&"elements"===w._reglType?n.elements.destroy():n.elements(w),n.ownsElements=!1):g.getElements(e.elements)?
(n.elements=e.elements,n.ownsElements=!1):(n.elements=g.create(e.elements),n.ownsElements=!0)}else n.elements=null,n.ownsElements=!1;h=e.attributes;n.offset=0;n.count=-1;n.instances=-1;n.primitive=4;n.elements&&(n.count=n.elements._elements.vertCount,n.primitive=n.elements._elements.primType);"offset"in e&&(n.offset=e.offset|0);"count"in e&&(n.count=e.count|0);"instances"in e&&(n.instances=e.instances|0);"primitive"in e&&(P(e.primitive in f,"bad primitive type: "+e.primitive),n.primitive=f[e.primitive]);
P.optional(function(){for(var b=d(e),k=0;k<b.length;++k)P(0<=c.indexOf(b[k]),'invalid option for vao: "'+b[k]+'" valid options are '+c)});P(Array.isArray(h),"attributes must be an array")}P(h.length<x,"too many attributes");P(0<h.length,"must specify at least one attribute");var w={},z=n.attributes;z.length=h.length;for(var A=0;A<h.length;++A){var y=h[A],u=z[A]=new a,E=y.data||y;if(Array.isArray(E)||m(E)||b(E)){var v;n.buffers[A]&&(v=n.buffers[A],m(E)&&v._buffer.byteLength>=E.byteLength?v.subdata(E):
(v.destroy(),n.buffers[A]=null));n.buffers[A]||(v=n.buffers[A]=k.create(y,34962,!1,!0));u.buffer=k.getBuffer(v);u.size=u.buffer.dimension|0;u.normalized=!1;u.type=u.buffer.dtype;u.offset=0;u.stride=0;u.divisor=0;u.state=1;w[A]=1}else k.getBuffer(y)?(u.buffer=k.getBuffer(y),u.size=u.buffer.dimension|0,u.normalized=!1,u.type=u.buffer.dtype,u.offset=0,u.stride=0,u.divisor=0,u.state=1):k.getBuffer(y.buffer)?(u.buffer=k.getBuffer(y.buffer),u.size=(+y.size||u.buffer.dimension)|0,u.normalized=!!y.normalized||
!1,"type"in y?(P.parameter(y.type,q,"invalid buffer type"),u.type=q[y.type]):u.type=u.buffer.dtype,u.offset=(y.offset||0)|0,u.stride=(y.stride||0)|0,u.divisor=(y.divisor||0)|0,u.state=1,P(1<=u.size&&4>=u.size,"size must be between 1 and 4"),P(0<=u.offset,"invalid offset"),P(0<=u.stride&&255>=u.stride,"stride must be between 0 and 255"),P(0<=u.divisor,"divisor must be positive"),P(!u.divisor||!!C.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in y?(P(0<A,"first attribute must not be a constant"),
u.x=+y.x||0,u.y=+y.y||0,u.z=+y.z||0,u.w=+y.w||0,u.state=2):P(!1,"invalid attribute spec for location "+A)}for(v=0;v<n.buffers.length;++v)!w[v]&&n.buffers[v]&&(n.buffers[v].destroy(),n.buffers[v]=null);n.refresh();return p}var n=new A;e.vaoCount+=1;p.destroy=function(){for(var c=0;c<n.buffers.length;++c)n.buffers[c]&&n.buffers[c].destroy();n.buffers.length=0;n.ownsElements&&(n.elements.destroy(),n.elements=null,n.ownsElements=!1);n.destroy()};p._vao=n;p._reglType="vao";return p(h)},getVAO:function(c){return"function"===
typeof c&&c._vao?c._vao:null},destroyBuffer:function(c){for(var b=0;b<v.length;++b){var e=v[b];e.buffer===c&&(h.disableVertexAttribArray(b),e.buffer=null)}},setVAO:C.oes_vertex_array_object?p:w,clear:C.oes_vertex_array_object?z:function(){}};A.prototype.bindAttrs=function(){for(var c=C.angle_instanced_arrays,b=this.attributes,e=0;e<b.length;++e){var k=b[e];k.buffer?(h.enableVertexAttribArray(e),h.bindBuffer(34962,k.buffer.buffer),h.vertexAttribPointer(e,k.size,k.type,k.normalized,k.stride,k.offset),
c&&k.divisor&&c.vertexAttribDivisorANGLE(e,k.divisor)):(h.disableVertexAttribArray(e),h.vertexAttrib4f(e,k.x,k.y,k.z,k.w))}for(c=b.length;c<x;++c)h.disableVertexAttribArray(c);(c=g.getElements(this.elements))?h.bindBuffer(34963,c.buffer.buffer):h.bindBuffer(34963,null)};A.prototype.refresh=function(){var c=C.oes_vertex_array_object;c&&(c.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=null,c.bindVertexArrayOES(null))};A.prototype.destroy=function(){if(this.vao){var c=C.oes_vertex_array_object;
this===l.currentVAO&&(l.currentVAO=null,c.bindVertexArrayOES(null));c.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);I[this.id]&&(delete I[this.id],--e.vaoCount)};return l}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(l,r,G){function a(c){return y[Object.prototype.toString.call(c)]|
0}function d(c,b){for(var e=0;e<b.length;++e)c[e]=b[e]}function P(c,b,e,k,f,d,a){for(var h=0,g=0;g<e;++g)for(var m=0;m<k;++m)c[h++]=b[f*g+d*m+a]}var u=l("./util/sorted-object-keys"),q=l("./util/check"),m=l("./util/is-typed-array"),b=l("./util/is-ndarray"),f=l("./util/values"),c=l("./util/pool");G=l("./util/flatten");var h=G.flatten,C=G.shape,y=l("./constants/arraytypes.json"),e=l("./constants/dtypes.json"),k=l("./constants/usage.json"),g=[];g[5120]=1;g[5122]=2;g[5124]=4;g[5121]=1;g[5123]=2;g[5125]=
4;g[5126]=4;r.exports=function(n,p,w,z){function A(c){this.id=ta++;this.buffer=n.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;w.profile&&(this.stats={size:0})}function y(c,b,e){c.byteLength=b.byteLength;n.bufferData(c.type,b,e)}function x(e,k,f,g,n,p){e.usage=f;if(Array.isArray(k)){if(e.dtype=g||5126,0<k.length)if(Array.isArray(k[0])){n=C(k);for(var w=g=1;w<n.length;++w)g*=n[w];e.dimension=g;k=h(k,n,e.dtype);y(e,k,f);p?e.persistentData=
k:c.freeType(k)}else"number"===typeof k[0]?(e.dimension=n,n=c.allocType(e.dtype,k.length),d(n,k),y(e,n,f),p?e.persistentData=n:c.freeType(n)):m(k[0])?(e.dimension=k[0].length,e.dtype=g||a(k[0])||5126,k=h(k,[k.length,k[0].length],e.dtype),y(e,k,f),p?e.persistentData=k:c.freeType(k)):q.raise("invalid buffer data")}else if(m(k))e.dtype=g||a(k),e.dimension=n,y(e,k,f),p&&(e.persistentData=new Uint8Array(new Uint8Array(k.buffer)));else if(b(k)){n=k.shape;var z=k.stride,w=k.offset,A=0,x=0,u=0,v=0;1===n.length?
(A=n[0],x=1,u=z[0],v=0):2===n.length?(A=n[0],x=n[1],u=z[0],v=z[1]):q.raise("invalid shape");e.dtype=g||a(k.data)||5126;e.dimension=x;n=c.allocType(e.dtype,A*x);P(n,k.data,A,x,u,v,w);y(e,n,f);p?e.persistentData=n:c.freeType(n)}else k instanceof ArrayBuffer?(e.dtype=5121,e.dimension=n,y(e,k,f),p&&(e.persistentData=new Uint8Array(new Uint8Array(k)))):q.raise("invalid buffer data")}function v(c){p.bufferCount--;z(c);var e=c.buffer;q(e,"buffer must not be deleted already");n.deleteBuffer(e);c.buffer=null;
delete I[c.id]}var ta=0,I={};A.prototype.bind=function(){n.bindBuffer(this.type,this.buffer)};A.prototype.destroy=function(){v(this)};var l=[];w.profile&&(p.getTotalBufferSize=function(){var c=0;u(I).forEach(function(e){c+=I[e].stats.size});return c});return{create:function(f,z,y,u){function ma(c){var f=35044,d=null,a=0,h=0,p=1;Array.isArray(c)||m(c)||b(c)||c instanceof ArrayBuffer?d=c:"number"===typeof c?a=c|0:c&&(q.type(c,"object","buffer arguments must be an object, a number or an array"),"data"in
c&&(q(null===d||Array.isArray(d)||m(d)||b(d),"invalid data for buffer"),d=c.data),"usage"in c&&(q.parameter(c.usage,k,"invalid buffer usage"),f=k[c.usage]),"type"in c&&(q.parameter(c.type,e,"invalid buffer type"),h=e[c.type]),"dimension"in c&&(q.type(c.dimension,"number","invalid dimension"),p=c.dimension|0),"length"in c&&(q.nni(a,"buffer length must be a nonnegative integer"),a=c.length|0));ta.bind();d?x(ta,d,f,h,p,u):(a&&n.bufferData(ta.type,a,f),ta.dtype=h||5121,ta.usage=f,ta.dimension=p,ta.byteLength=
a);w.profile&&(ta.stats.size=ta.byteLength*g[ta.dtype]);return ma}function D(c,e){q(e+c.byteLength<=ta.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+c.byteLength+" starting from offset "+e+" to a buffer of size "+ta.byteLength);n.bufferSubData(ta.type,e,c)}p.bufferCount++;var ta=new A(z);I[ta.id]=ta;y||ma(f);ma._reglType="buffer";ma._buffer=ta;ma.subdata=function(e,k){var f=(k||0)|0,g;ta.bind();if(m(e)||e instanceof ArrayBuffer)D(e,f);else if(Array.isArray(e)){if(0<
e.length)if("number"===typeof e[0]){var n=c.allocType(ta.dtype,e.length);d(n,e);D(n,f);c.freeType(n)}else Array.isArray(e[0])||m(e[0])?(g=C(e),n=h(e,g,ta.dtype),D(n,f),c.freeType(n)):q.raise("invalid buffer data")}else if(b(e)){g=e.shape;var p=e.stride,w=n=0,z=0,A=0;1===g.length?(n=g[0],w=1,z=p[0],A=0):2===g.length?(n=g[0],w=g[1],z=p[0],A=p[1]):q.raise("invalid shape");g=Array.isArray(e.data)?ta.dtype:a(e.data);g=c.allocType(g,n*w);P(g,e.data,n,w,z,A,e.offset);D(g,f);c.freeType(g)}else q.raise("invalid data for buffer subdata");
return ma};w.profile&&(ma.stats=ta.stats);ma.destroy=function(){v(ta)};return ma},createStream:function(c,e){var b=l.pop();b||(b=new A(c));b.bind();x(b,e,35040,0,1,!1);return b},destroyStream:function(c){l.push(c)},clear:function(){f(I).forEach(v);l.forEach(v)},getBuffer:function(c){return c&&c._buffer instanceof A?c._buffer:null},restore:function(){f(I).forEach(function(c){c.buffer=n.createBuffer();n.bindBuffer(c.type,c.buffer);n.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:x}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(l,r,G){r.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(l,r,G){r.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(l,r,G){r.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(l,r,G){r.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(l,r,G){function a(c){return Array.isArray(c)||y(c)||e(c)}function d(c){return c.sort(function(c,
e){return"viewport"===c?-1:"viewport"===e?1:c<e?-1:1})}function P(c,e,b,k){this.thisDep=c;this.contextDep=e;this.propDep=b;this.append=k}function u(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function q(c){return new P(!1,!1,!1,c)}function m(c,e){var b=c.type;if(0===b)return b=c.data.length,new P(!0,1<=b,2<=b,e);if(4===b)return b=c.data,new P(b.thisDep,b.contextDep,b.propDep,e);if(5===b)return new P(!1,!1,!1,e);if(6===b){for(var k=b=!1,f=!1,d=0;d<c.data.length;++d){var a=c.data[d];1===a.type?
f=!0:2===a.type?k=!0:3===a.type?b=!0:0===a.type?(b=!0,a=a.data,1<=a&&(k=!0),2<=a&&(f=!0)):4===a.type&&(b=b||a.data.thisDep,k=k||a.data.contextDep,f=f||a.data.propDep)}return new P(b,k,f,e)}return new P(3===b,2===b,1===b,e)}var b=l("./util/sorted-object-keys"),f=l("./util/check"),c=l("./util/extend"),h=l("./util/codegen"),C=l("./util/loop"),y=l("./util/is-typed-array"),e=l("./util/is-ndarray"),k=l("./util/is-array-like"),g=l("./dynamic"),n=l("./constants/primitives.json"),p=l("./constants/dtypes.json"),
w=["x","y","z","w"],z="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),A={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ma="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
x={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},v={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ta={frag:35632,vert:35633},I={cw:2304,ccw:2305},ra=new P(!1,!1,!1,function(){});r.exports=function(e,y,l,H,F,D,ka,t,r,L,fa,ua,T,W,S){function O(c){return c.replace(".","_")}function M(c,e,b){var k=O(c);va.push(c);
X[k]=ia[k]=!!b;Ka[k]=e}function N(c,e,b){var k=O(c);va.push(c);Array.isArray(b)?(ia[k]=b.slice(),X[k]=b.slice()):ia[k]=X[k]=b;Ga[k]=e}function Q(){var c=h(),e=c.link,k=c.global;c.id=Kc++;c.batchId="0";var d=e(eb),a=c.shared={props:"a0"};b(eb).forEach(function(c){a[c]=k.def(d,".",c)});f.optional(function(){c.CHECK=e(f);c.commandStr=f.guessCommand();c.command=e(c.commandStr);c.assert=function(c,b,k){c("if(!(",b,"))",this.CHECK,".commandRaise(",e(k),",",this.command,");")};Y.invalidBlendCombinations=
ma});var g=c.next={},n=c.current={};b(Ga).forEach(function(c){Array.isArray(ia[c])&&(g[c]=k.def(a.next,".",c),n[c]=k.def(a.current,".",c))});var p=c.constants={};b(Y).forEach(function(c){p[c]=k.def(JSON.stringify(Y[c]))});c.invoke=function(b,k){switch(k.type){case 0:var f=["this",a.context,a.props,c.batchId];return b.def(e(k.data),".call(",f.slice(0,Math.max(k.data.length+1,4)),")");case 1:return b.def(a.props,k.data);case 2:return b.def(a.context,k.data);case 3:return b.def("this",k.data);case 4:return k.data.append(c,
b),k.data.ref;case 5:return k.data.toString();case 6:return k.data.map(function(e){return c.invoke(b,e)})}};c.attribCache={};var w={};c.scopeAttrib=function(c){c=y.id(c);if(c in w)return w[c];var b=L.scope[c];b||(b=L.scope[c]=new ya);return w[c]=e(b)};return c}function R(c){var e=c["static"];c=c.dynamic;var b;if("profile"in e){var k=!!e.profile;b=q(function(c,e){return k});b.enable=k}else if("profile"in c){var f=c.profile;b=m(f,function(c,e){return c.invoke(e,f)})}return b}function qa(c,e){var b=
c["static"],k=c.dynamic;if("framebuffer"in b){var d=b.framebuffer;return d?(d=t.getFramebuffer(d),f.command(d,"invalid framebuffer object"),q(function(c,e){var b=c.link(d),k=c.shared;e.set(k.framebuffer,".next",b);k=k.context;e.set(k,".framebufferWidth",b+".width");e.set(k,".framebufferHeight",b+".height");return b})):q(function(c,e){var b=c.shared;e.set(b.framebuffer,".next","null");b=b.context;e.set(b,".framebufferWidth",b+".drawingBufferWidth");e.set(b,".framebufferHeight",b+".drawingBufferHeight");
return"null"})}if("framebuffer"in k){var a=k.framebuffer;return m(a,function(c,e){var b=c.invoke(e,a),k=c.shared,d=k.framebuffer,h=e.def(d,".getFramebuffer(",b,")");f.optional(function(){c.assert(e,"!"+b+"||"+h,"invalid framebuffer object")});e.set(d,".next",h);k=k.context;e.set(k,".framebufferWidth",h+"?"+h+".width:"+k+".drawingBufferWidth");e.set(k,".framebufferHeight",h+"?"+h+".height:"+k+".drawingBufferHeight");return h})}return null}function na(c,e,b){function k(c){if(c in d){var h=d[c];f.commandType(h,
"object","invalid "+c,b.commandStr);var g=!0,n=h.x|0,p=h.y|0,w,z;"width"in h?(w=h.width|0,f.command(0<=w,"invalid "+c,b.commandStr)):g=!1;"height"in h?(z=h.height|0,f.command(0<=z,"invalid "+c,b.commandStr)):g=!1;return new P(!g&&e&&e.thisDep,!g&&e&&e.contextDep,!g&&e&&e.propDep,function(c,e){var b=c.shared.context,k=w;"width"in h||(k=e.def(b,".","framebufferWidth","-",n));var f=z;"height"in h||(f=e.def(b,".","framebufferHeight","-",p));return[n,p,k,f]})}if(c in a){var A=a[c],g=m(A,function(e,b){var k=
e.invoke(b,A);f.optional(function(){e.assert(b,k+"&&typeof "+k+'==="object"',"invalid "+c)});var d=e.shared.context,a=b.def(k,".x|0"),h=b.def(k,".y|0"),g=b.def('"width" in ',k,"?",k,".width|0:","(",d,".","framebufferWidth","-",a,")"),n=b.def('"height" in ',k,"?",k,".height|0:","(",d,".","framebufferHeight","-",h,")");f.optional(function(){e.assert(b,g+">=0&&"+n+">=0","invalid "+c)});return[a,h,g,n]});e&&(g.thisDep=g.thisDep||e.thisDep,g.contextDep=g.contextDep||e.contextDep,g.propDep=g.propDep||e.propDep);
return g}return e?new P(e.thisDep,e.contextDep,e.propDep,function(c,e){var b=c.shared.context;return[0,0,e.def(b,".","framebufferWidth"),e.def(b,".","framebufferHeight")]}):null}var d=c["static"],a=c.dynamic;if(c=k("viewport")){var h=c;c=new P(c.thisDep,c.contextDep,c.propDep,function(c,e){var b=h.append(c,e),k=c.shared.context;e.set(k,".viewportWidth",b[2]);e.set(k,".viewportHeight",b[3]);return b})}return{viewport:c,scissor_box:k("scissor.box")}}function J(c,e){var k=c["static"];if("string"===typeof k.frag&&
"string"===typeof k.vert){if(0<b(e.dynamic).length)return null;var k=e["static"],d=b(k);if(0<d.length&&"number"===typeof k[d[0]]){for(var a=[],h=0;h<d.length;++h)f("number"===typeof k[d[h]],"must specify all vertex attribute locations when using vaos"),a.push([k[d[h]]|0,d[h]]);return a}}return null}function K(c,e,b){function k(c){if(c in d){var e=y.id(d[c]);f.optional(function(){fa.shader(ta[c],e,f.guessCommand())});var b=q(function(){return e});b.id=e;return b}if(c in a){var h=a[c];return m(h,function(e,
b){var k=e.invoke(b,h),d=b.def(e.shared.strings,".id(",k,")");f.optional(function(){b(e.shared.shader,".shader(",ta[c],",",d,",",e.command,");")});return d})}return null}var d=c["static"],a=c.dynamic,h=k("frag"),g=k("vert"),n=null;u(h)&&u(g)?(n=fa.program(g.id,h.id,null,b),c=q(function(c,e){return c.link(n)})):c=new P(h&&h.thisDep||g&&g.thisDep,h&&h.contextDep||g&&g.contextDep,h&&h.propDep||g&&g.propDep,function(c,e){var b=c.shared.shader,k;k=h?h.append(c,e):e.def(b,".","frag");var d;d=g?g.append(c,
e):e.def(b,".","vert");var a=b+".program("+d+","+k;f.optional(function(){a+=","+c.command});return e.def(a+")")});return{frag:h,vert:g,progVar:c,program:n}}function da(c,e){function k(c,b){if(c in d){var a=d[c]|0;b?g.offset=a:g.instances=a;f.command(!b||0<=a,"invalid "+c,e.commandStr);return q(function(c,e){b&&(c.OFFSET=a);return a})}if(c in h){var n=h[c];return m(n,function(e,k){var d=e.invoke(k,n);b&&(e.OFFSET=d,f.optional(function(){e.assert(k,d+">=0","invalid "+c)}));return d})}if(b){if(z)return q(function(c,
e){return c.OFFSET=0});if(p)return new P(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.offset:0")})}else if(p)return new P(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.instances:-1")});return null}var d=c["static"],h=c.dynamic,g={},p=!1,w=function(){if("vao"in d){var c=d.vao;null!==c&&null===L.getVAO(c)&&(c=L.createVAO(c));p=!0;g.vao=c;return q(function(e){var b=
L.getVAO(c);return b?e.link(b):"null"})}if("vao"in h){p=!0;var e=h.vao;return m(e,function(c,b){var k=c.invoke(b,e);return b.def(c.shared.vao+".getVAO("+k+")")})}return null}(),z=!1,A=function(){if("elements"in d){var c=d.elements;g.elements=c;if(a(c)){var b=g.elements=D.create(c,!0),c=D.getElements(b);z=!0}else c&&(c=D.getElements(c),z=!0,f.command(c,"invalid elements",e.commandStr));b=q(function(e,b){if(c){var k=e.link(c);return e.ELEMENTS=k}return e.ELEMENTS=null});b.value=c;return b}if("elements"in
h){z=!0;var k=h.elements;return m(k,function(c,e){var b=c.shared,d=b.isBufferArgs,b=b.elements,a=c.invoke(e,k),h=e.def("null"),d=e.def(d,"(",a,")"),g=c.cond(d).then(h,"=",b,".createStream(",a,");")["else"](h,"=",b,".getElements(",a,");");f.optional(function(){c.assert(g["else"],"!"+a+"||"+h,"invalid elements")});e.entry(g);e.exit(c.cond(d).then(b,".destroyStream(",h,");"));return c.ELEMENTS=h})}return p?new P(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+
c.shared.elements+".getElements("+c.shared.vao+".currentVAO.elements):null")}):null}(),y=k("offset",!0),x=function(){if("primitive"in d){var c=d.primitive;g.primitive=c;f.commandParameter(c,n,"invalid primitve",e.commandStr);return q(function(e,b){return n[c]})}if("primitive"in h){var k=h.primitive;return m(k,function(c,e){var d=c.constants.primTypes,a=c.invoke(e,k);f.optional(function(){c.assert(e,a+" in "+d,"invalid primitive, must be one of "+b(n))});return e.def(d,"[",a,"]")})}return z?u(A)?A.value?
q(function(c,e){return e.def(c.ELEMENTS,".primType")}):q(function(){return 4}):new P(A.thisDep,A.contextDep,A.propDep,function(c,e){var b=c.ELEMENTS;return e.def(b,"?",b,".primType:",4)}):p?new P(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.primitive:4")}):null}(),C=function(){if("count"in d){var c=d.count|0;g.count=c;f.command("number"===typeof c&&0<=c,"invalid vertex count",e.commandStr);return q(function(){return c})}if("count"in
h){var b=h.count;return m(b,function(c,e){var k=c.invoke(e,b);f.optional(function(){c.assert(e,"typeof "+k+'==="number"&&'+k+">=0&&"+k+"===("+k+"|0)","invalid vertex count")});return k})}if(z){if(u(A)){if(A)return y?new P(y.thisDep,y.contextDep,y.propDep,function(c,e){var b=e.def(c.ELEMENTS,".vertCount-",c.OFFSET);f.optional(function(){c.assert(e,b+">=0","invalid vertex offset/element buffer too small")});return b}):q(function(c,e){return e.def(c.ELEMENTS,".vertCount")});var k=q(function(){return-1});
f.optional(function(){k.MISSING=!0});return k}var a=new P(A.thisDep||y.thisDep,A.contextDep||y.contextDep,A.propDep||y.propDep,function(c,e){var b=c.ELEMENTS;return c.OFFSET?e.def(b,"?",b,".vertCount-",c.OFFSET,":-1"):e.def(b,"?",b,".vertCount:-1")});f.optional(function(){a.DYNAMIC=!0});return a}return p?new P(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao,".currentVAO?",c.shared.vao,".currentVAO.count:-1")}):null}(),t=k("instances",!1);return{elements:A,primitive:x,count:C,
instances:t,offset:y,vao:w,vaoActive:p,elementsActive:z,"static":g}}function U(c,e){var d=c["static"],a=c.dynamic,h={};va.forEach(function(c){function g(e,b){if(c in d){var k=e(d[c]);h[n]=q(function(){return k})}else if(c in a){var f=a[c];h[n]=m(f,function(c,e){return b(c,e,c.invoke(e,f))})}}var n=O(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return g(function(b){f.commandType(b,
"boolean",c,e.commandStr);return b},function(e,b,k){f.optional(function(){e.assert(b,"typeof "+k+'==="boolean"',"invalid flag "+c,e.commandStr)});return k});case "depth.func":return g(function(b){f.commandParameter(b,x,"invalid "+c,e.commandStr);return x[b]},function(e,k,d){var a=e.constants.compareFuncs;f.optional(function(){e.assert(k,d+" in "+a,"invalid "+c+", must be one of "+b(x))});return k.def(a,"[",d,"]")});case "depth.range":return g(function(c){f.command(k(c)&&2===c.length&&"number"===typeof c[0]&&
"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",e.commandStr);return c},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===2&&typeof "+b+'[0]==="number"&&typeof '+b+'[1]==="number"&&'+b+"[0]<="+b+"[1]","depth range must be a 2d array")});var k=e.def("+",b,"[0]"),d=e.def("+",b,"[1]");return[k,d]});case "blend.func":return g(function(c){f.commandType(c,"object","blend.func",e.commandStr);var b="srcRGB"in c?c.srcRGB:c.src,k="srcAlpha"in c?c.srcAlpha:
c.src,d="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;f.commandParameter(b,A,n+".srcRGB",e.commandStr);f.commandParameter(k,A,n+".srcAlpha",e.commandStr);f.commandParameter(d,A,n+".dstRGB",e.commandStr);f.commandParameter(c,A,n+".dstAlpha",e.commandStr);f.command(-1===ma.indexOf(b+", "+d),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+d+")",e.commandStr);return[A[b],A[d],A[k],A[c]]},function(e,k,d){function a(g,n){var p=k.def('"',g,n,'" in ',d,"?",d,".",g,n,":",d,".",
g);f.optional(function(){e.assert(k,p+" in "+h,"invalid "+c+"."+g+n+", must be one of "+b(A))});return p}var h=e.constants.blendFuncs;f.optional(function(){e.assert(k,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=a("src","RGB"),n=a("dst","RGB");f.optional(function(){e.assert(k,e.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+n+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var p=k.def(h,"[",g,"]"),w=k.def(h,"[",a("src","Alpha"),"]"),
z=k.def(h,"[",n,"]"),y=k.def(h,"[",a("dst","Alpha"),"]");return[p,z,w,y]});case "blend.equation":return g(function(b){if("string"===typeof b)return f.commandParameter(b,Ha,"invalid "+c,e.commandStr),[Ha[b],Ha[b]];if("object"===typeof b)return f.commandParameter(b.rgb,Ha,c+".rgb",e.commandStr),f.commandParameter(b.alpha,Ha,c+".alpha",e.commandStr),[Ha[b.rgb],Ha[b.alpha]];f.commandRaise("invalid blend.equation",e.commandStr)},function(e,k,d){var a=e.constants.blendEquations,h=k.def(),g=k.def(),n=e.cond("typeof ",
d,'==="string"');f.optional(function(){function k(c,d,f){e.assert(c,f+" in "+a,"invalid "+d+", must be one of "+b(Ha))}k(n.then,c,d);e.assert(n["else"],d+"&&typeof "+d+'==="object"',"invalid "+c);k(n["else"],c+".rgb",d+".rgb");k(n["else"],c+".alpha",d+".alpha")});n.then(h,"=",g,"=",a,"[",d,"];");n["else"](h,"=",a,"[",d,".rgb];",g,"=",a,"[",d,".alpha];");k(n);return[h,g]});case "blend.color":return g(function(c){f.command(k(c)&&4===c.length,"blend.color must be a 4d array",e.commandStr);return C(4,
function(e){return+c[e]})},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","blend.color must be a 4d array")});return C(4,function(c){return e.def("+",b,"[",c,"]")})});case "stencil.mask":return g(function(c){f.commandType(c,"number",n,e.commandStr);return c|0},function(c,e,b){f.optional(function(){c.assert(e,"typeof "+b+'==="number"',"invalid stencil.mask")});return e.def(b,"|0")});case "stencil.func":return g(function(b){f.commandType(b,"object",
n,e.commandStr);var k=b.cmp||"keep",d=b.ref||0;b="mask"in b?b.mask:-1;f.commandParameter(k,x,c+".cmp",e.commandStr);f.commandType(d,"number",c+".ref",e.commandStr);f.commandType(b,"number",c+".mask",e.commandStr);return[x[k],d,b]},function(c,e,b){var k=c.constants.compareFuncs;f.optional(function(){function d(){c.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}d(b+"&&typeof ",b,'==="object"');d('!("cmp" in ',b,")||(",b,".cmp in ",k,")")});var d=e.def('"cmp" in ',b,"?",k,"[",
b,".cmp]",":",7680),a=e.def(b,".ref|0"),h=e.def('"mask" in ',b,"?",b,".mask|0:-1");return[d,a,h]});case "stencil.opFront":case "stencil.opBack":return g(function(b){f.commandType(b,"object",n,e.commandStr);var k=b.fail||"keep",d=b.zfail||"keep";b=b.zpass||"keep";f.commandParameter(k,v,c+".fail",e.commandStr);f.commandParameter(d,v,c+".zfail",e.commandStr);f.commandParameter(b,v,c+".zpass",e.commandStr);return["stencil.opBack"===c?1029:1028,v[k],v[d],v[b]]},function(e,k,d){function a(g){f.optional(function(){e.assert(k,
'!("'+g+'" in '+d+")||("+d+"."+g+" in "+h+")","invalid "+c+"."+g+", must be one of "+b(v))});return k.def('"',g,'" in ',d,"?",h,"[",d,".",g,"]:",7680)}var h=e.constants.stencilOps;f.optional(function(){e.assert(k,d+"&&typeof "+d+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,a("fail"),a("zfail"),a("zpass")]});case "polygonOffset.offset":return g(function(c){f.commandType(c,"object",n,e.commandStr);var b=c.factor|0;c=c.units|0;f.commandType(b,"number",n+".factor",e.commandStr);
f.commandType(c,"number",n+".units",e.commandStr);return[b,c]},function(e,b,k){f.optional(function(){e.assert(b,k+"&&typeof "+k+'==="object"',"invalid "+c)});var d=b.def(k,".factor|0"),a=b.def(k,".units|0");return[d,a]});case "cull.face":return g(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);f.command(!!b,n,e.commandStr);return b},function(c,e,b){f.optional(function(){c.assert(e,b+'==="front"||'+b+'==="back"',"invalid cull.face")});return e.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return g(function(c){f.command("number"===
typeof c&&c>=H.lineWidthDims[0]&&c<=H.lineWidthDims[1],"invalid line width, must be a positive number between "+H.lineWidthDims[0]+" and "+H.lineWidthDims[1],e.commandStr);return c},function(c,e,b){f.optional(function(){c.assert(e,"typeof "+b+'==="number"&&'+b+">="+H.lineWidthDims[0]+"&&"+b+"<="+H.lineWidthDims[1],"invalid line width")});return b});case "frontFace":return g(function(c){f.commandParameter(c,I,n,e.commandStr);return I[c]},function(c,e,b){f.optional(function(){c.assert(e,b+'==="cw"||'+
b+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(b+'==="cw"?2304:2305')});case "colorMask":return g(function(c){f.command(k(c)&&4===c.length,"color.mask must be length 4 array",e.commandStr);return c.map(function(c){return!!c})},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","invalid color.mask")});return C(4,function(c){return"!!"+b+"["+c+"]"})});case "sample.coverage":return g(function(c){f.command("object"===typeof c&&c,
n,e.commandStr);var b="value"in c?c.value:1;c=!!c.invert;f.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",e.commandStr);return[b,c]},function(c,e,b){f.optional(function(){c.assert(e,b+"&&typeof "+b+'==="object"',"invalid sample.coverage")});var k=e.def('"value" in ',b,"?+",b,".value:1"),d=e.def("!!",b,".invert");return[k,d]})}});return h}function la(c,e){var d=c["static"],a=c.dynamic,h={};b(d).forEach(function(c){var b=d[c],a;if("number"===typeof b||
"boolean"===typeof b)a=q(function(){return b});else if("function"===typeof b){var g=b._reglType;"texture2d"===g||"textureCube"===g?a=q(function(c){return c.link(b)}):"framebuffer"===g||"framebufferCube"===g?(f.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',e.commandStr),a=q(function(c){return c.link(b.color[0])})):f.commandRaise('invalid data for uniform "'+c+'"',e.commandStr)}else k(b)?a=q(function(e){return e.global.def("[",C(b.length,function(k){f.command("number"===
typeof b[k]||"boolean"===typeof b[k],"invalid uniform "+c,e.commandStr);return b[k]}),"]")}):f.commandRaise('invalid or missing data for uniform "'+c+'"',e.commandStr);a.value=b;h[c]=a});b(a).forEach(function(c){var e=a[c];h[c]=m(e,function(c,b){return c.invoke(b,e)})});return h}function ha(c,e){var d=c["static"],h=c.dynamic,g={};b(d).forEach(function(c){var h=d[c],n=y.id(c),z=new ya;if(a(h))z.state=1,z.buffer=F.getBuffer(F.create(h,34962,!1,!0)),z.type=0;else{var A=F.getBuffer(h);if(A)z.state=1,
z.buffer=A,z.type=0;else if(f.command("object"===typeof h&&h,"invalid data for attribute "+c,e.commandStr),"constant"in h){var m=h.constant;z.buffer="null";z.state=2;"number"===typeof m?z.x=m:(f.command(k(m)&&0<m.length&&4>=m.length,"invalid constant for attribute "+c,e.commandStr),w.forEach(function(c,e){e<m.length&&(z[c]=m[e])}))}else{A=a(h.buffer)?F.getBuffer(F.create(h.buffer,34962,!1,!0)):F.getBuffer(h.buffer);f.command(!!A,'missing buffer for attribute "'+c+'"',e.commandStr);var x=h.offset|
0;f.command(0<=x,'invalid offset for attribute "'+c+'"',e.commandStr);var C=h.stride|0;f.command(0<=C&&256>C,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',e.commandStr);var u=h.size|0;f.command(!("size"in h)||0<u&&4>=u,'invalid size for attribute "'+c+'", must be 1,2,3,4',e.commandStr);var D=!!h.normalized,t=0;"type"in h&&(f.commandParameter(h.type,p,"invalid type for attribute "+c,e.commandStr),t=p[h.type]);var v=h.divisor|0;f.optional(function(){"divisor"in h&&(f.command(0===
v||pa,'cannot specify divisor for attribute "'+c+'", instancing not supported',e.commandStr),f.command(0<=v,'invalid divisor for attribute "'+c+'"',e.commandStr));var k=e.commandStr,d="buffer offset divisor normalized type size stride".split(" ");b(h).forEach(function(e){f.command(0<=d.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+c+'" (valid parameters are '+d+")",k)})});z.buffer=A;z.state=1;z.size=u;z.normalized=D;z.type=t||A.dtype;z.offset=x;z.stride=C;z.divisor=v}}g[c]=q(function(c,
e){var k=c.attribCache;if(n in k)return k[n];var d={isStream:!1};b(z).forEach(function(c){d[c]=z[c]});z.buffer&&(d.buffer=c.link(z.buffer),d.type=d.type||d.buffer+".dtype");return k[n]=d})});b(h).forEach(function(c){var e=h[c];g[c]=m(e,function(k,d){function a(c){d(A[c],"=",h,".",c,"|0;")}var h=k.invoke(d,e),g=k.shared,n=k.constants,p=g.isBufferArgs,z=g.buffer;f.optional(function(){k.assert(d,h+"&&(typeof "+h+'==="object"||typeof '+h+'==="function")&&('+p+"("+h+")||"+z+".getBuffer("+h+")||"+z+".getBuffer("+
h+".buffer)||"+p+"("+h+'.buffer)||("constant" in '+h+"&&(typeof "+h+'.constant==="number"||'+g.isArrayLike+"("+h+".constant))))",'invalid dynamic attribute "'+c+'"')});var A={isStream:d.def(!1)},m=new ya;m.state=1;b(m).forEach(function(c){A[c]=d.def(""+m[c])});var y=A.buffer,x=A.type;d("if(",p,"(",h,")){",A.isStream,"=true;",y,"=",z,".createStream(",34962,",",h,");",x,"=",y,".dtype;","}else{",y,"=",z,".getBuffer(",h,");","if(",y,"){",x,"=",y,".dtype;",'}else if("constant" in ',h,"){",A.state,"=",
2,";","if(typeof "+h+'.constant === "number"){',A[w[0]],"=",h,".constant;",w.slice(1).map(function(c){return A[c]}).join("="),"=0;","}else{",w.map(function(c,e){return A[c]+"="+h+".constant.length>"+e+"?"+h+".constant["+e+"]:0;"}).join(""),"}}else{","if(",p,"(",h,".buffer)){",y,"=",z,".createStream(",34962,",",h,".buffer);","}else{",y,"=",z,".getBuffer(",h,".buffer);","}",x,'="type" in ',h,"?",n.glTypes,"[",h,".type]:",y,".dtype;",A.normalized,"=!!",h,".normalized;");a("size");a("offset");a("stride");
a("divisor");d("}}");d.exit("if(",A.isStream,"){",z,".destroyStream(",y,");","}");return A})});return g}function Aa(c){var e=c["static"],k=c.dynamic,d={};b(e).forEach(function(c){var b=e[c];d[c]=q(function(c,e){return"number"===typeof b||"boolean"===typeof b?""+b:c.link(b)})});b(k).forEach(function(c){var e=k[c];d[c]=m(e,function(c,b){return c.invoke(b,e)})});return d}function xa(c,e,k,d,h){function a(c){var e=z[c];e&&(y[c]=e)}var g=c["static"],n=c.dynamic;f.optional(function(){function c(k){b(k).forEach(function(c){f.command(0<=
e.indexOf(c),'unknown parameter "'+c+'"',h.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(va);c(g);c(n)});var p=J(c,e),w=qa(c,h),z=na(c,w,h),A=da(c,h),y=U(c,h),m=K(c,h,p);a("viewport");a(O("scissor.box"));var x=0<b(y).length,w={framebuffer:w,draw:A,shader:m,state:y,dirty:x,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};w.profile=R(c,h);w.uniforms=la(k,h);w.drawVAO=w.scopeVAO=A.vao;if(!w.drawVAO&&m.program&&!p&&l.angle_instanced_arrays&&
A["static"].elements){var C=!0;c=m.program.attributes.map(function(c){c=e["static"][c];C=C&&!!c;return c});if(C&&0<c.length){var u=L.getVAO(L.createVAO({attributes:c,elements:A["static"].elements}));w.drawVAO=new P(null,null,null,function(c,e){return c.link(u)});w.useVAO=!0}}p?w.useVAO=!0:w.attributes=ha(e,h);w.context=Aa(d,h);return w}function ca(c,e,k){var d=c.shared.context,h=c.scope();b(k).forEach(function(b){e.save(d,"."+b);var a=k[b].append(c,e);Array.isArray(a)?h(d,".",b,"=[",a.join(),"];"):
h(d,".",b,"=",a,";")});e(h)}function Da(c,e,b,k){var d=c.shared,h=d.gl,a=d.framebuffer,f;za&&(f=e.def(d.extensions,".webgl_draw_buffers"));var g=c.constants,d=g.drawBuffer,g=g.backBuffer;c=b?b.append(c,e):e.def(a,".next");k||e("if(",c,"!==",a,".cur){");e("if(",c,"){",h,".bindFramebuffer(",36160,",",c,".framebuffer);");za&&e(f,".drawBuffersWEBGL(",d,"[",c,".colorAttachments.length]);");e("}else{",h,".bindFramebuffer(",36160,",null);");za&&e(f,".drawBuffersWEBGL(",g,");");e("}",a,".cur=",c,";");k||
e("}")}function ja(c,e,k){var d=c.shared,h=d.gl,a=c.current,f=c.next,g=d.current,n=d.next,p=c.cond(g,".dirty");va.forEach(function(e){e=O(e);if(!(e in k.state)){var b,d;if(e in f){b=f[e];d=a[e];var w=C(ia[e].length,function(c){return p.def(b,"[",c,"]")});p(c.cond(w.map(function(c,e){return c+"!=="+d+"["+e+"]"}).join("||")).then(h,".",Ga[e],"(",w,");",w.map(function(c,e){return d+"["+e+"]="+c}).join(";"),";"))}else b=p.def(n,".",e),w=c.cond(b,"!==",g,".",e),p(w),e in Ka?w(c.cond(b).then(h,".enable(",
Ka[e],");")["else"](h,".disable(",Ka[e],");"),g,".",e,"=",b,";"):w(h,".",Ga[e],"(",b,");",g,".",e,"=",b,";")}});0===b(k.state).length&&p(g,".dirty=false;");e(p)}function oa(c,e,h,a){var f=c.shared,g=c.current,n=f.current,p=f.gl;d(b(h)).forEach(function(b){var d=h[b];if(!a||a(d)){var f=d.append(c,e);if(Ka[b]){var w=Ka[b];u(d)?f?e(p,".enable(",w,");"):e(p,".disable(",w,");"):e(c.cond(f).then(p,".enable(",w,");")["else"](p,".disable(",w,");"));e(n,".",b,"=",f,";")}else if(k(f)){var z=g[b];e(p,".",Ga[b],
"(",f,");",f.map(function(c,e){return z+"["+e+"]="+c}).join(";"),";")}else e(p,".",Ga[b],"(",f,");",n,".",b,"=",f,";")}})}function Ba(c,e){pa&&(c.instancing=e.def(c.shared.extensions,".angle_instanced_arrays"))}function Qa(c,e,b,k,d){function h(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function a(c){A=e.def();c(A,"=",h(),";");"string"===typeof d?c(p,".count+=",d,";"):c(p,".count++;");W&&(k?(y=e.def(),c(y,"=",z,".getNumPendingQueries();")):c(z,".beginQuery(",p,");"))}
function f(c){c(p,".cpuTime+=",h(),"-",A,";");W&&(k?c(z,".pushScopeStats(",y,",",z,".getNumPendingQueries(),",p,");"):c(z,".endQuery();"))}function g(c){var b=e.def(w,".profile");e(w,".profile=",c,";");e.exit(w,".profile=",b,";")}var n=c.shared,p=c.stats,w=n.current,z=n.timer;b=b.profile;var A,y;if(b){if(u(b)){b.enable?(a(e),f(e.exit),g("true")):g("false");return}b=b.append(c,e);g(b)}else b=e.def(w,".profile");n=c.block();a(n);e("if(",b,"){",n,"}");c=c.block();f(c);e.exit("if(",b,"){",c,"}")}function Fa(c,
e,k,d,h){function a(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(b,k,d){function h(){e("if(!",z,".buffer){",f,".enableVertexAttribArray(",p,");}");var b=d.type,a;a=d.size?e.def(d.size,"||",k):k;e("if(",z,".type!==",b,"||",z,".size!==",a,"||",m.map(function(c){return z+"."+c+"!=="+d[c]}).join("||"),"){",f,".bindBuffer(",34962,",",A,".buffer);",f,".vertexAttribPointer(",[p,a,b,
d.normalized,d.stride,d.offset],");",z,".type=",b,";",z,".size=",a,";",m.map(function(c){return z+"."+c+"="+d[c]+";"}).join(""),"}");pa&&(b=d.divisor,e("if(",z,".divisor!==",b,"){",c.instancing,".vertexAttribDivisorANGLE(",[p,b],");",z,".divisor=",b,";}"))}function a(){e("if(",z,".buffer){",f,".disableVertexAttribArray(",p,");",z,".buffer=null;","}if(",w.map(function(c,e){return z+"."+c+"!=="+y[e]}).join("||"),"){",f,".vertexAttrib4f(",p,",",y,");",w.map(function(c,e){return z+"."+c+"="+y[e]+";"}).join(""),
"}")}var f=n.gl,p=e.def(b,".location"),z=e.def(n.attributes,"[",p,"]");b=d.state;var A=d.buffer,y=[d.x,d.y,d.z,d.w],m=["buffer","normalized","offset","stride"];1===b?h():2===b?a():(e("if(",b,"===",1,"){"),h(),e("}else{"),a(),e("}"))}var n=c.shared;d.forEach(function(d){var n=d.name,p=k.attributes[n],w;if(p){if(!h(p))return;w=p.append(c,e)}else{if(!h(ra))return;var z=c.scopeAttrib(n);f.optional(function(){c.assert(e,z+".state","missing attribute "+n)});w={};b(new ya).forEach(function(c){w[c]=e.def(z,
".",c)})}g(c.link(d),a(d.info.type),w)})}function Hb(c,e,b,d,h,a){for(var g=c.shared,n=g.gl,p,w=0;w<d.length;++w){var z=d[w],A=z.name,m=z.info.type,x=b.uniforms[A],z=c.link(z)+".location",D;if(x){if(!h(x))continue;if(u(x)){var t=x.value;f.command(null!==t&&"undefined"!==typeof t,'missing uniform "'+A+'"',c.commandStr);if(35678===m||35680===m)f.command("function"===typeof t&&(35678===m&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===m&&("textureCube"===t._reglType||"framebufferCube"===
t._reglType)),"invalid texture for uniform "+A,c.commandStr),x=c.link(t._texture||t.color[0]._texture),e(n,".uniform1i(",z,",",x+".bind());"),e.exit(x,".unbind();");else if(35674===m||35675===m||35676===m){f.optional(function(){f.command(k(t),"invalid matrix for uniform "+A,c.commandStr);f.command(35674===m&&4===t.length||35675===m&&9===t.length||35676===m&&16===t.length,"invalid length for matrix uniform "+A,c.commandStr)});var x=c.global.def("new Float32Array(["+Array.prototype.slice.call(t)+"])"),
q=2;35675===m?q=3:35676===m&&(q=4);e(n,".uniformMatrix",q,"fv(",z,",false,",x,");")}else{switch(m){case 5126:f.commandType(t,"number","uniform "+A,c.commandStr);p="1f";break;case 35664:f.command(k(t)&&2===t.length,"uniform "+A,c.commandStr);p="2f";break;case 35665:f.command(k(t)&&3===t.length,"uniform "+A,c.commandStr);p="3f";break;case 35666:f.command(k(t)&&4===t.length,"uniform "+A,c.commandStr);p="4f";break;case 35670:f.commandType(t,"boolean","uniform "+A,c.commandStr);p="1i";break;case 5124:f.commandType(t,
"number","uniform "+A,c.commandStr);p="1i";break;case 35671:f.command(k(t)&&2===t.length,"uniform "+A,c.commandStr);p="2i";break;case 35667:f.command(k(t)&&2===t.length,"uniform "+A,c.commandStr);p="2i";break;case 35672:f.command(k(t)&&3===t.length,"uniform "+A,c.commandStr);p="3i";break;case 35668:f.command(k(t)&&3===t.length,"uniform "+A,c.commandStr);p="3i";break;case 35673:f.command(k(t)&&4===t.length,"uniform "+A,c.commandStr);p="4i";break;case 35669:f.command(k(t)&&4===t.length,"uniform "+A,
c.commandStr),p="4i"}e(n,".uniform",p,"(",z,",",k(t)?Array.prototype.slice.call(t):t,");")}continue}else D=x.append(c,e)}else{if(!h(ra))continue;D=e.def(g.uniforms,"[",y.id(A),"]")}35678===m?(f(!Array.isArray(D),"must specify a scalar prop for textures"),e("if(",D,"&&",D,'._reglType==="framebuffer"){',D,"=",D,".color[0];","}")):35680===m&&(f(!Array.isArray(D),"must specify a scalar prop for cube maps"),e("if(",D,"&&",D,'._reglType==="framebufferCube"){',D,"=",D,".color[0];","}"));f.optional(function(){function b(k,
d){c.assert(e,k,'bad data or missing for uniform "'+A+'".  '+d)}function k(c){f(!Array.isArray(D),"must not specify an array type for uniform");b("typeof "+D+'==="'+c+'"',"invalid type, expected "+c)}function d(e,k){Array.isArray(D)?f(D.length===e,"must have length "+e):b(g.isArrayLike+"("+D+")&&"+D+".length==="+e,"invalid vector, should have length "+e,c.commandStr)}function h(e){f(!Array.isArray(D),"must not specify a value type");b("typeof "+D+'==="function"&&'+D+'._reglType==="texture'+(3553===
e?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(m){case 5124:k("number");break;case 35667:d(2,"number");break;case 35668:d(3,"number");break;case 35669:d(4,"number");break;case 5126:k("number");break;case 35664:d(2,"number");break;case 35665:d(3,"number");break;case 35666:d(4,"number");break;case 35670:k("boolean");break;case 35671:d(2,"boolean");break;case 35672:d(3,"boolean");break;case 35673:d(4,"boolean");break;case 35674:d(4,"number");break;case 35675:d(9,"number");break;case 35676:d(16,
"number");break;case 35678:h(3553);break;case 35680:h(34067)}});x=1;switch(m){case 35678:case 35680:x=e.def(D,"._texture");e(n,".uniform1i(",z,",",x,".bind());");e.exit(x,".unbind();");continue;case 5124:case 35670:p="1i";break;case 35667:case 35671:p="2i";x=2;break;case 35668:case 35672:p="3i";x=3;break;case 35669:case 35673:p="4i";x=4;break;case 5126:p="1f";break;case 35664:p="2f";x=2;break;case 35665:p="3f";x=3;break;case 35666:p="4f";x=4;break;case 35674:p="Matrix2fv";break;case 35675:p="Matrix3fv";
break;case 35676:p="Matrix4fv"}if("M"===p.charAt(0)){e(n,".uniform",p,"(",z,",");var z=Math.pow(m-35674+2,2),v=c.global.def("new Float32Array(",z,")");Array.isArray(D)?e("false,(",C(z,function(c){return v+"["+c+"]="+D[c]}),",",v,")"):e("false,(Array.isArray(",D,")||",D," instanceof Float32Array)?",D,":(",C(z,function(c){return v+"["+c+"]="+D+"["+c+"]"}),",",v,")");e(");")}else{if(1<x){for(var q=[],I=[],N=0;N<x;++N)Array.isArray(D)?I.push(D[N]):I.push(e.def(D+"["+N+"]")),a&&q.push(e.def());a&&e("if(!",
c.batchId,"||",q.map(function(c,e){return c+"!=="+I[e]}).join("||"),"){",q.map(function(c,e){return c+"="+I[e]+";"}).join(""));e(n,".uniform",p,"(",z,",",I.join(","),");")}else f(!Array.isArray(D),"uniform value must not be an array"),a&&(x=e.def(),e("if(!",c.batchId,"||",x,"!==",D,"){",x,"=",D,";")),e(n,".uniform",p,"(",z,",",D,");");a&&e("}")}}}function Ua(c,e,b,k){function d(h){var a=w[h];return a?a.contextDep&&k.contextDynamic||a.propDep?a.append(c,b):a.append(c,e):e.def(p,".",h)}function h(){function c(){b(C,
".drawElementsInstancedANGLE(",[A,y,D,m+"<<(("+D+"-5121)>>1)",x],");")}function e(){b(C,".drawArraysInstancedANGLE(",[A,m,y,x],");")}z&&"null"!==z?t?c():(b("if(",z,"){"),c(),b("}else{"),e(),b("}")):e()}function a(){function c(){b(n+".drawElements("+[A,y,D,m+"<<(("+D+"-5121)>>1)"]+");")}function e(){b(n+".drawArrays("+[A,m,y]+");")}z&&"null"!==z?t?c():(b("if(",z,"){"),c(),b("}else{"),e(),b("}")):e()}var g=c.shared,n=g.gl,p=g.draw,w=k.draw,z=function(){var d=w.elements,h=e;if(d){if(d.contextDep&&k.contextDynamic||
d.propDep)h=b;d=d.append(c,h);w.elementsActive&&h("if("+d+")"+n+".bindBuffer(34963,"+d+".buffer.buffer);")}else d=h.def(),h(d,"=",p,".","elements",";","if(",d,"){",n,".bindBuffer(",34963,",",d,".buffer.buffer);}","else if(",g.vao,".currentVAO){",d,"=",c.shared.elements+".getElements("+g.vao,".currentVAO.elements);",Ca?"":"if("+d+")"+n+".bindBuffer(34963,"+d+".buffer.buffer);","}");return d}(),A=d("primitive"),m=d("offset"),y=function(){var d=w.count,h,a=e;if(d){if(d.contextDep&&k.contextDynamic||
d.propDep)a=b;h=d.append(c,a);f.optional(function(){d.MISSING&&c.assert(e,"false","missing vertex count");d.DYNAMIC&&c.assert(a,h+">=0","missing vertex count")})}else h=a.def(p,".","count"),f.optional(function(){c.assert(a,h+">=0","missing vertex count")});return h}();if("number"===typeof y){if(0===y)return}else b("if(",y,"){"),b.exit("}");var x,C;pa&&(x=d("instances"),C=c.instancing);var D=z+".type",t=w.elements&&u(w.elements)&&!w.vaoActive;pa&&("number"!==typeof x||0<=x)?"string"===typeof x?(b("if(",
x,">0){"),h(),b("}else if(",x,"<0){"),a(),b("}")):h():a()}function ga(c,e,b,k,d){var h=Q();d=h.proc("body",d);f.optional(function(){h.commandStr=e.commandStr;h.command=h.link(e.commandStr)});pa&&(h.instancing=d.def(h.shared.extensions,".angle_instanced_arrays"));c(h,d,b,k);return h.compile().body}function ea(c,e,b,k){Ba(c,e);b.useVAO?b.drawVAO?e(c.shared.vao,".setVAO(",b.drawVAO.append(c,e),");"):e(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(e(c.shared.vao,".setVAO(null);"),Fa(c,e,b,k.attributes,
function(){return!0}));Hb(c,e,b,k.uniforms,function(){return!0},!1);Ua(c,e,e,b)}function sa(c,e){var k=c.proc("draw",1);Ba(c,k);ca(c,k,e.context);Da(c,k,e.framebuffer);ja(c,k,e);oa(c,k,e.state);Qa(c,k,e,!1,!0);var d=e.shader.progVar.append(c,k);k(c.shared.gl,".useProgram(",d,".program);");if(e.shader.program)ea(c,k,e,e.shader.program);else{k(c.shared.vao,".setVAO(null);");var h=c.global.def("{}"),a=k.def(d,".id"),f=k.def(h,"[",a,"]");k(c.cond(f).then(f,".call(this,a0);")["else"](f,"=",h,"[",a,"]=",
c.link(function(b){return ga(ea,c,e,b,1)}),"(",d,");",f,".call(this,a0);"))}0<b(e.state).length&&k(c.shared.current,".dirty=true;");c.shared.vao&&k(c.shared.vao,".setVAO(null);")}function wa(c,e,b,k){function d(){return!0}c.batchId="a1";Ba(c,e);Fa(c,e,b,k.attributes,d);Hb(c,e,b,k.uniforms,d,!1);Ua(c,e,e,b)}function Ea(c,e,b,k){function d(c){return c.contextDep&&a||c.propDep}function h(c){return!d(c)}Ba(c,e);var a=b.contextDep,f=e.def(),g=e.def();c.shared.props=g;c.batchId=f;var n=c.scope(),p=c.scope();
e(n.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",g,"=","a0","[",f,"];",p,"}",n.exit);b.needsContext&&ca(c,p,b.context);b.needsFramebuffer&&Da(c,p,b.framebuffer);oa(c,p,b.state,d);b.profile&&d(b.profile)&&Qa(c,p,b,!1,!0);k?(b.useVAO?b.drawVAO?d(b.drawVAO)?p(c.shared.vao,".setVAO(",b.drawVAO.append(c,p),");"):n(c.shared.vao,".setVAO(",b.drawVAO.append(c,n),");"):n(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(n(c.shared.vao,".setVAO(null);"),Fa(c,n,b,k.attributes,h),Fa(c,p,b,k.attributes,d)),
Hb(c,n,b,k.uniforms,h,!1),Hb(c,p,b,k.uniforms,d,!0),Ua(c,n,p,b)):(e=c.global.def("{}"),k=b.shader.progVar.append(c,p),g=p.def(k,".id"),n=p.def(e,"[",g,"]"),p(c.shared.gl,".useProgram(",k,".program);","if(!",n,"){",n,"=",e,"[",g,"]=",c.link(function(e){return ga(wa,c,b,e,2)}),"(",k,");}",n,".call(this,a0[",f,"],",f,");"))}function G(c,e){function k(c){return c.contextDep&&h||c.propDep}var d=c.proc("batch",2);c.batchId="0";Ba(c,d);var h=!1,a=!0;b(e.context).forEach(function(c){h=h||e.context[c].propDep});
h||(ca(c,d,e.context),a=!1);var f=e.framebuffer,g=!1;f?(f.propDep?h=g=!0:f.contextDep&&h&&(g=!0),g||Da(c,d,f)):Da(c,d,null);e.state.viewport&&e.state.viewport.propDep&&(h=!0);ja(c,d,e);oa(c,d,e.state,function(c){return!k(c)});e.profile&&k(e.profile)||Qa(c,d,e,!1,"a1");e.contextDep=h;e.needsContext=a;e.needsFramebuffer=g;a=e.shader.progVar;if(a.contextDep&&h||a.propDep)Ea(c,d,e,null);else if(a=a.append(c,d),d(c.shared.gl,".useProgram(",a,".program);"),e.shader.program)Ea(c,d,e,e.shader.program);else{d(c.shared.vao,
".setVAO(null);");var f=c.global.def("{}"),g=d.def(a,".id"),n=d.def(f,"[",g,"]");d(c.cond(n).then(n,".call(this,a0,a1);")["else"](n,"=",f,"[",g,"]=",c.link(function(b){return ga(Ea,c,e,b,2)}),"(",a,");",n,".call(this,a0,a1);"))}0<b(e.state).length&&d(c.shared.current,".dirty=true;");c.shared.vao&&d(c.shared.vao,".setVAO(null);")}function Gb(c,e){function h(b){var k=e.shader[b];k&&a.set(f.shader,"."+b,k.append(c,a))}var a=c.proc("scope",3);c.batchId="a2";var f=c.shared,g=f.current;ca(c,a,e.context);
e.framebuffer&&e.framebuffer.append(c,a);d(b(e.state)).forEach(function(b){var d=e.state[b].append(c,a);k(d)?d.forEach(function(e,k){a.set(c.next[b],"["+k+"]",e)}):a.set(f.next,"."+b,d)});Qa(c,a,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var k=e.draw[b];k&&a.set(f.draw,"."+b,""+k.append(c,a))});b(e.uniforms).forEach(function(b){var k=e.uniforms[b].append(c,a);Array.isArray(k)&&(k="["+k.join()+"]");a.set(f.uniforms,"["+y.id(b)+"]",k)});b(e.attributes).forEach(function(k){var d=
e.attributes[k].append(c,a),h=c.scopeAttrib(k);b(new ya).forEach(function(c){a.set(h,"."+c,d[c])})});e.scopeVAO&&a.set(f.vao,".targetVAO",e.scopeVAO.append(c,a));h("vert");h("frag");0<b(e.state).length&&(a(g,".dirty=true;"),a.exit(g,".dirty=true;"));a("a1(",c.shared.context,",a0,",c.batchId,");")}function Z(c){if("object"===typeof c&&!k(c)){for(var e=b(c),d=0;d<e.length;++d)if(g.isDynamic(c[e[d]]))return!0;return!1}}function V(c,e,k){function d(c,e){f.forEach(function(b){var k=h[b];g.isDynamic(k)&&
(k=c.invoke(e,k),e(z,".",b,"=",k,";"))})}var h=e["static"][k];if(h&&Z(h)){var a=c.global,f=b(h),n=!1,p=!1,w=!1,z=c.global.def("{}");f.forEach(function(e){var b=h[e];if(g.isDynamic(b))"function"===typeof b&&(b=h[e]=g.unbox(b)),e=m(b,null),n=n||e.thisDep,w=w||e.propDep,p=p||e.contextDep;else{a(z,".",e,"=");switch(typeof b){case "number":a(b);break;case "string":a('"',b,'"');break;case "object":Array.isArray(b)&&a("[",b.join(),"]");break;default:a(c.link(b))}a(";")}});e.dynamic[k]=new g.DynamicVariable(4,
{thisDep:n,contextDep:p,propDep:w,ref:z,append:d});delete e["static"][k]}}var ya=L.Record,Ha={add:32774,subtract:32778,"reverse subtract":32779};l.ext_blend_minmax&&(Ha.min=32775,Ha.max=32776);var pa=l.angle_instanced_arrays,za=l.webgl_draw_buffers,Ca=l.oes_vertex_array_object,ia={dirty:!0,profile:S.profile},X={},va=[],Ka={},Ga={};M("dither",3024);M("blend.enable",3042);N("blend.color","blendColor",[0,0,0,0]);N("blend.equation","blendEquationSeparate",[32774,32774]);N("blend.func","blendFuncSeparate",
[1,0,1,0]);M("depth.enable",2929,!0);N("depth.func","depthFunc",513);N("depth.range","depthRange",[0,1]);N("depth.mask","depthMask",!0);N("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);N("cull.face","cullFace",1029);N("frontFace","frontFace",2305);N("lineWidth","lineWidth",1);M("polygonOffset.enable",32823);N("polygonOffset.offset","polygonOffset",[0,0]);M("sample.alpha",32926);M("sample.enable",32928);N("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",2960);N("stencil.mask",
"stencilMask",-1);N("stencil.func","stencilFunc",[519,0,-1]);N("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);N("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);N("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);N("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var eb={gl:e,context:T,strings:y,next:X,current:ia,draw:ua,elements:D,buffer:F,shader:fa,attributes:L.state,vao:L,uniforms:r,framebuffer:t,extensions:l,
timer:W,isBufferArgs:a},Y={primTypes:n,compareFuncs:x,blendFuncs:A,blendEquations:Ha,stencilOps:v,glTypes:p,orientationType:I};f.optional(function(){eb.isArrayLike=k});za&&(Y.backBuffer=[1029],Y.drawBuffer=C(H.maxDrawbuffers,function(c){return 0===c?[0]:C(c,function(c){return 36064+c})}));var Kc=0;return{next:X,current:ia,procs:function(){var c=Q(),e=c.proc("poll"),d=c.proc("refresh"),h=c.block();e(h);d(h);var a=c.shared,f=a.gl,g=a.next,n=a.current;h(n,".dirty=false;");Da(c,e);Da(c,d,null,!0);var p;
pa&&(p=c.link(pa));l.oes_vertex_array_object&&d(c.link(l.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var w=0;w<H.maxAttributes;++w){var z=d.def(a.attributes,"[",w,"]"),A=c.cond(z,".buffer");A.then(f,".enableVertexAttribArray(",w,");",f,".bindBuffer(",34962,",",z,".buffer.buffer);",f,".vertexAttribPointer(",w,",",z,".size,",z,".type,",z,".normalized,",z,".stride,",z,".offset);")["else"](f,".disableVertexAttribArray(",w,");",f,".vertexAttrib4f(",w,",",z,".x,",z,".y,",z,".z,",z,".w);",
z,".buffer=null;");d(A);pa&&d(p,".vertexAttribDivisorANGLE(",w,",",z,".divisor);")}d(c.shared.vao,".currentVAO=null;",c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);");b(Ka).forEach(function(b){var k=Ka[b],a=h.def(g,".",b),p=c.block();p("if(",a,"){",f,".enable(",k,")}else{",f,".disable(",k,")}",n,".",b,"=",a,";");d(p);e("if(",a,"!==",n,".",b,"){",p,"}")});b(Ga).forEach(function(b){var a=Ga[b],p=ia[b],w,z,A=c.block();A(f,".",a,"(");k(p)?(a=p.length,w=c.global.def(g,".",b),z=c.global.def(n,".",b),
A(C(a,function(c){return w+"["+c+"]"}),");",C(a,function(c){return z+"["+c+"]="+w+"["+c+"];"}).join("")),e("if(",C(a,function(c){return w+"["+c+"]!=="+z+"["+c+"]"}).join("||"),"){",A,"}")):(w=h.def(g,".",b),z=h.def(n,".",b),A(w,");",n,".",b,"=",w,";"),e("if(",w,"!==",z,"){",A,"}"));d(A)});return c.compile()}(),compile:function(e,k,d,h,a){var f=Q();f.stats=f.link(a);b(k["static"]).forEach(function(c){V(f,k,c)});z.forEach(function(c){V(f,e,c)});var g=xa(e,k,d,h,f);sa(f,g);Gb(f,g);G(f,g);return c(f.compile(),
{destroy:function(){g.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(l,r,G){function a(b,d){this.id=m++;this.type=b;this.data=d}function d(b){if(0===b.length)return[];var a=b.charAt(0),c=b.charAt(b.length-1);if(1<b.length&&a===c&&('"'===a||"'"===
a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return d(b.substr(0,a.index)).concat(d(a[1])).concat(d(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(c=0;c<a.length;++c)b=b.concat(d(a[c]));return b}function P(b){return"["+d(b).join("][")+"]"}function u(b,d){if("function"===typeof b)return new a(0,b);if("number"===typeof b||
"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(c,b){return u(c,d+"["+b+"]")}));if(b instanceof a)return b;q(!1,"invalid option type in uniform "+d)}var q=l("./util/check"),m=0;r.exports={DynamicVariable:a,define:function(b,d){return new a(b,P(d+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:u,accessor:P}},{"./util/check":21}],10:[function(l,r,G){var a=l("./util/check"),d=l("./util/is-typed-array"),P=l("./util/is-ndarray"),
u=l("./util/values"),q=l("./constants/primitives.json"),m=l("./constants/usage.json");r.exports=function(b,f,c,h){function C(c){this.id=g++;k[this.id]=this;this.buffer=c;this.primType=4;this.type=this.vertCount=0}function y(e,k,h,g,n,p,m){e.buffer.bind();var y;k?((y=m)||d(k)&&(!P(k)||d(k.data))||(y=f.oes_element_index_uint?5125:5123),c._initBuffer(e.buffer,k,h,y,3)):(b.bufferData(34963,p,h),e.buffer.dtype=y||5121,e.buffer.usage=h,e.buffer.dimension=3,e.buffer.byteLength=p);y=m;if(!m){switch(e.buffer.dtype){case 5121:case 5120:y=
5121;break;case 5123:case 5122:y=5123;break;case 5125:case 5124:y=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=y}e.type=y;a(5125!==y||!!f.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");k=n;0>k&&(k=e.buffer.byteLength,5123===y?k>>=1:5125===y&&(k>>=2));e.vertCount=k;k=g;0>g&&(k=4,g=e.buffer.dimension,1===g&&(k=0),2===g&&(k=1),3===g&&(k=4));e.primType=k}function e(c){h.elementsCount--;a(null!==c.buffer,"must not double destroy elements");
delete k[c.id];c.buffer.destroy();c.buffer=null}var k={},g=0,n={uint8:5121,uint16:5123};f.oes_element_index_uint&&(n.uint32=5125);C.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:function(b,k){function f(c){if(c)if("number"===typeof c)g(c),p.primType=4,p.vertCount=c|0,p.type=5121;else{var e=null,b=35044,k=-1,h=-1,w=0,z=0;if(Array.isArray(c)||d(c)||P(c))e=c;else if(a.type(c,"object","invalid arguments for elements"),"data"in c&&(e=c.data,a(Array.isArray(e)||d(e)||P(e),"invalid data for element buffer")),
"usage"in c&&(a.parameter(c.usage,m,"invalid element buffer usage"),b=m[c.usage]),"primitive"in c&&(a.parameter(c.primitive,q,"invalid element buffer primitive"),k=q[c.primitive]),"count"in c&&(a("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),h=c.count|0),"type"in c&&(a.parameter(c.type,n,"invalid buffer type"),z=n[c.type]),"length"in c)w=c.length|0;else if(w=h,5123===z||5122===z)w*=2;else if(5125===z||5124===z)w*=4;y(p,e,b,k,h,w,z)}else g(),p.primType=4,p.vertCount=0,
p.type=5121;return f}var g=c.create(null,34963,!0),p=new C(g._buffer);h.elementsCount++;f(b);f._reglType="elements";f._elements=p;f.subdata=function(c,e){g.subdata(c,e);return f};f.destroy=function(){e(p)};return f},createStream:function(e){var b=p.pop();b||(b=new C(c.create(null,34963,!0,!1)._buffer));y(b,e,35040,-1,-1,0,0);return b},destroyStream:function(c){p.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof C?c._elements:null},clear:function(){u(k).forEach(e)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(l,r,G){var a=l("./util/sorted-object-keys"),d=l("./util/check");r.exports=function(P,u){function q(c){d.type(c,"string","extension name must be string");c=c.toLowerCase();var b;try{b=m[c]=P.getExtension(c)}catch(a){}return!!b}for(var m={},b=0;b<u.extensions.length;++b){var f=u.extensions[b];if(!q(f))return u.onDestroy(),u.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}u.optionalExtensions.forEach(q);return{extensions:m,restore:function(){a(m).forEach(function(c){if(m[c]&&!q(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(l,r,G){var a=l("./util/check"),d=l("./util/values"),P=l("./util/extend"),u=[6407,6408],q=[];q[6408]=4;q[6407]=3;var m=[];m[5121]=1;m[5126]=4;m[36193]=2;var b=[32854,32855,36194,35907,34842,34843,34836],f={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};r.exports=function(c,h,C,y,e,k){function g(c,e,b){this.target=c;this.texture=e;this.renderbuffer=b;var k=c=0;e?(c=e.width,k=e.height):b&&(c=b.width,k=b.height);this.width=c;this.height=k}function n(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function p(c,e,b){if(c){if(c.texture){c=c.texture._texture;var k=Math.max(1,c.height);a(Math.max(1,c.width)===e&&k===b,"inconsistent width/height for supplied texture")}else c=
c.renderbuffer._renderbuffer,a(c.width===e&&c.height===b,"inconsistent width/height for renderbuffer");c.refCount+=1}}function w(e,b){b&&(b.texture?c.framebufferTexture2D(36160,e,b.target,b.texture._texture.texture,0):c.framebufferRenderbuffer(36160,e,36161,b.renderbuffer._renderbuffer.renderbuffer))}function z(c){var e=3553,b=null,k=null,d=c;"object"===typeof c&&(d=c.data,"target"in c&&(e=c.target|0));a.type(d,"function","invalid attachment data");c=d._reglType;"texture2d"===c?(b=d,a(3553===e)):
"textureCube"===c?(b=d,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===c?(k=d,e=36161):a.raise("invalid regl object for attachment");return new g(e,b,k)}function A(c,b,k,d,h){if(k)return c=y.create2D({width:c,height:b,format:d,type:h}),c._texture.refCount=0,new g(3553,c,null);c=e.create({width:c,height:b,format:d});c._renderbuffer.refCount=0;return new g(36161,null,c)}function ma(c){return c&&(c.texture||c.renderbuffer)}function x(c,e,b){c&&(c.texture?c.texture.resize(e,b):c.renderbuffer&&
c.renderbuffer.resize(e,b),c.width=e,c.height=b)}function v(){this.id=D++;ka[this.id]=this;this.framebuffer=c.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function ta(c){c.colorAttachments.forEach(n);n(c.depthAttachment);n(c.stencilAttachment);n(c.depthStencilAttachment)}function I(e){var b=e.framebuffer;a(b,"must not double destroy framebuffer");c.deleteFramebuffer(b);e.framebuffer=null;k.framebufferCount--;
delete ka[e.id]}function l(e){var b;c.bindFramebuffer(36160,e.framebuffer);var k=e.colorAttachments;for(b=0;b<k.length;++b)w(36064+b,k[b]);for(b=k.length;b<C.maxColorAttachments;++b)c.framebufferTexture2D(36160,36064+b,3553,null,0);c.framebufferTexture2D(36160,33306,3553,null,0);c.framebufferTexture2D(36160,36096,3553,null,0);c.framebufferTexture2D(36160,36128,3553,null,0);w(36096,e.depthAttachment);w(36128,e.stencilAttachment);w(33306,e.depthStencilAttachment);e=c.checkFramebufferStatus(36160);c.isContextLost()||
36053===e||a.raise("framebuffer configuration not supported, status = "+f[e]);c.bindFramebuffer(36160,B.next?B.next.framebuffer:null);B.cur=B.next;c.getError()}function E(c,e){function d(c,e){var k;a(B.next!==f,"can not update framebuffer which is currently in use");var g=0,n=0,w=!0,y=!0;k=null;var x=!0,D="rgba",t="uint8",v=1,I=null,P=null,E=null,ka=!1;if("number"===typeof c)g=c|0,n=e|0||g;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(n=c.shape,a(Array.isArray(n)&&
2<=n.length,"invalid shape for framebuffer"),g=n[0],n=n[1]):("radius"in c&&(g=n=c.radius),"width"in c&&(g=c.width),"height"in c&&(n=c.height));if("color"in c||"colors"in c)k=c.color||c.colors,Array.isArray(k)&&a(1===k.length||h.webgl_draw_buffers,"multiple render targets not supported");if(!k){"colorCount"in c&&(v=c.colorCount|0,a(0<v,"invalid color buffer count"));"colorTexture"in c&&(x=!!c.colorTexture,D="rgba4");if("colorType"in c){t=c.colorType;if(x)a(h.oes_texture_float||!("float"===t||"float32"===
t),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(h.oes_texture_half_float||!("half float"===t||"float16"===t),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===t||"float16"===t)a(h.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),D="rgba16f";else if("float"===t||"float32"===t)a(h.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
D="rgba32f";a.oneOf(t,F,"invalid color type")}"colorFormat"in c&&(D=c.colorFormat,0<=r.indexOf(D)?x=!0:0<=H.indexOf(D)?x=!1:a.optional(function(){if(x)a.oneOf(c.colorFormat,r,"invalid color format for texture");else a.oneOf(c.colorFormat,H,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)ka=!(!c.depthTexture&&!c.depthStencilTexture),a(!ka||h.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?w=c.depth:
(I=c.depth,y=!1));"stencil"in c&&("boolean"===typeof c.stencil?y=c.stencil:(P=c.stencil,w=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?w=y=c.depthStencil:(E=c.depthStencil,y=w=!1))}else g=n=1;var ba=null,ha=null,Aa=null,xa=null;if(Array.isArray(k))ba=k.map(z);else if(k)ba=[z(k)];else for(ba=Array(v),k=0;k<v;++k)ba[k]=A(g,n,x,D,t);a(h.webgl_draw_buffers||1>=ba.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(ba.length<=C.maxColorAttachments,
"too many color attachments, not supported");g=g||ba[0].width;n=n||ba[0].height;I?ha=z(I):w&&!y&&(ha=A(g,n,ka,"depth","uint32"));P?Aa=z(P):y&&!w&&(Aa=A(g,n,!1,"stencil","uint8"));E?xa=z(E):!I&&!P&&y&&w&&(xa=A(g,n,ka,"depth stencil","depth stencil"));a(1>=!!I+!!P+!!E,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");w=null;for(k=0;k<ba.length;++k)p(ba[k],g,n),a(!ba[k]||ba[k].texture&&0<=u.indexOf(ba[k].texture._texture.format)||ba[k].renderbuffer&&0<=b.indexOf(ba[k].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+k+" is invalid"),ba[k]&&ba[k].texture&&(y=q[ba[k].texture._texture.format]*m[ba[k].texture._texture.type],null===w?w=y:a(w===y,"all color attachments much have the same number of bits per pixel."));p(ha,g,n);a(!ha||ha.texture&&6402===ha.texture._texture.format||ha.renderbuffer&&33189===ha.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");p(Aa,g,n);a(!Aa||Aa.renderbuffer&&36168===Aa.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
p(xa,g,n);a(!xa||xa.texture&&34041===xa.texture._texture.format||xa.renderbuffer&&34041===xa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");ta(f);f.width=g;f.height=n;f.colorAttachments=ba;f.depthAttachment=ha;f.stencilAttachment=Aa;f.depthStencilAttachment=xa;d.color=ba.map(ma);d.depth=ma(ha);d.stencil=ma(Aa);d.depthStencil=ma(xa);d.width=f.width;d.height=f.height;l(f);return d}var f=new v;k.framebufferCount++;d(c,e);return P(d,{resize:function(c,e){a(B.next!==
f,"can not resize a framebuffer which is currently in use");var b=Math.max(c|0,1),k=Math.max(e|0||b,1);if(b===f.width&&k===f.height)return d;for(var h=f.colorAttachments,g=0;g<h.length;++g)x(h[g],b,k);x(f.depthAttachment,b,k);x(f.stencilAttachment,b,k);x(f.depthStencilAttachment,b,k);f.width=d.width=b;f.height=d.height=k;l(f);return d},_reglType:"framebuffer",_framebuffer:f,destroy:function(){I(f);ta(f)},use:function(c){B.setFBO({framebuffer:d},c)}})}var B={cur:null,next:null,dirty:!1,setFBO:null},
r=["rgba"],H=["rgba4","rgb565","rgb5 a1"];h.ext_srgb&&H.push("srgba");h.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");h.webgl_color_buffer_float&&H.push("rgba32f");var F=["uint8"];h.oes_texture_half_float&&F.push("half float","float16");h.oes_texture_float&&F.push("float","float32");var D=0,ka={};return P(B,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof v)?c:null},create:E,createCube:function(c){function e(c){var k;a(0>
b.indexOf(B.next),"can not update framebuffer which is currently in use");var d={color:null},f=0,g=null;k="rgba";var n="uint8",p=1;if("number"===typeof c)f=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(f=c.shape,a(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),a(f[0]===f[1],"cube framebuffer must be square"),f=f[0]):("radius"in c&&(f=c.radius|0),"width"in c?(f=c.width|0,"height"in c&&a(c.height===f,"must be square")):"height"in c&&(f=c.height|0));
if("color"in c||"colors"in c)g=c.color||c.colors,Array.isArray(g)&&a(1===g.length||h.webgl_draw_buffers,"multiple render targets not supported");g||("colorCount"in c&&(p=c.colorCount|0,a(0<p,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,F,"invalid color type"),n=c.colorType),"colorFormat"in c&&(k=c.colorFormat,a.oneOf(c.colorFormat,r,"invalid color format for texture")));"depth"in c&&(d.depth=c.depth);"stencil"in c&&(d.stencil=c.stencil);"depthStencil"in c&&(d.depthStencil=
c.depthStencil)}else f=1;if(g)if(Array.isArray(g))for(c=[],k=0;k<g.length;++k)c[k]=g[k];else c=[g];else for(c=Array(p),g={radius:f,format:k,type:n},k=0;k<p;++k)c[k]=y.createCube(g);d.color=Array(c.length);for(k=0;k<c.length;++k)p=c[k],a("function"===typeof p&&"textureCube"===p._reglType,"invalid cube map"),f=f||p.width,a(p.width===f&&p.height===f,"invalid cube map shape"),d.color[k]={target:34069,data:c[k]};for(k=0;6>k;++k){for(p=0;p<c.length;++p)d.color[p].target=34069+k;0<k&&(d.depth=b[0].depth,
d.stencil=b[0].stencil,d.depthStencil=b[0].depthStencil);if(b[k])b[k](d);else b[k]=E(d)}return P(e,{width:f,height:f,color:c})}var b=Array(6);e(c);return P(e,{faces:b,resize:function(c){var k=c|0;a(0<k&&k<=C.maxCubeMapSize,"invalid radius for cube fbo");if(k===e.width)return e;var d=e.color;for(c=0;c<d.length;++c)d[c].resize(k);for(c=0;6>c;++c)b[c].resize(k);e.width=e.height=k;return e},_reglType:"framebufferCube",destroy:function(){b.forEach(function(c){c.destroy()})}})},clear:function(){d(ka).forEach(I)},
restore:function(){B.cur=null;B.next=null;B.dirty=!0;d(ka).forEach(function(e){e.framebuffer=c.createFramebuffer();l(e)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(l,r,G){var a=l("./util/sorted-object-keys"),d=l("./util/pool");r.exports=function(P,u){var q=1;u.ext_texture_filter_anisotropic&&(q=P.getParameter(34047));var m=1,b=1;u.webgl_draw_buffers&&(m=P.getParameter(34852),b=P.getParameter(36063));var f=!!u.oes_texture_float;if(f){f=P.createTexture();P.bindTexture(3553,
f);P.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var c=P.createFramebuffer();P.bindFramebuffer(36160,c);P.framebufferTexture2D(36160,36064,3553,f,0);P.bindTexture(3553,null);if(36053!==P.checkFramebufferStatus(36160))f=!1;else{P.viewport(0,0,1,1);P.clearColor(1,0,0,1);P.clear(16384);var h=d.allocType(5126,4);P.readPixels(0,0,1,1,6408,5126,h);P.getError()?f=!1:(P.deleteFramebuffer(c),P.deleteTexture(f),f=1===h[0]);d.freeType(h)}}h=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(h=P.createTexture(),c=d.allocType(5121,36),P.activeTexture(33984),P.bindTexture(34067,h),P.texImage2D(34069,0,6408,3,3,0,6408,5121,c),d.freeType(c),P.bindTexture(34067,null),P.deleteTexture(h),h=!P.getError());return{colorBits:[P.getParameter(3410),P.getParameter(3411),P.getParameter(3412),P.getParameter(3413)],depthBits:P.getParameter(3414),stencilBits:P.getParameter(3415),subpixelBits:P.getParameter(3408),extensions:a(u).filter(function(c){return!!u[c]}),
maxAnisotropic:q,maxDrawbuffers:m,maxColorAttachments:b,pointSizeDims:P.getParameter(33901),lineWidthDims:P.getParameter(33902),maxViewportDims:P.getParameter(3386),maxCombinedTextureUnits:P.getParameter(35661),maxCubeMapSize:P.getParameter(34076),maxRenderbufferSize:P.getParameter(34024),maxTextureUnits:P.getParameter(34930),maxTextureSize:P.getParameter(3379),maxAttributes:P.getParameter(34921),maxVertexUniforms:P.getParameter(36347),maxVertexTextureUnits:P.getParameter(35660),maxVaryingVectors:P.getParameter(36348),
maxFragmentUniforms:P.getParameter(36349),glsl:P.getParameter(35724),renderer:P.getParameter(7937),vendor:P.getParameter(7936),version:P.getParameter(7938),readFloat:f,npotTextureCube:h}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(l,r,G){var a=l("./util/check"),d=l("./util/is-typed-array");r.exports=function(P,u,q,m,b,f,c){function h(h){var e;null===u.next?(a(b.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(a(null!==u.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=u.next.colorAttachments[0].texture._texture.type,a.optional(function(){f.oes_texture_float?(a(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&a(c.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var k=0,g=0,n=m.framebufferWidth,p=m.framebufferHeight,w=null;d(h)?w=h:h&&(a.type(h,"object","invalid arguments to regl.read()"),k=h.x|0,g=h.y|0,a(0<=k&&k<m.framebufferWidth,"invalid x offset for regl.read"),a(0<=g&&g<m.framebufferHeight,"invalid y offset for regl.read"),n=(h.width||m.framebufferWidth-k)|0,p=(h.height||m.framebufferHeight-g)|0,w=h.data||null);w&&(5121===e?a(w instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&a(w instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<n&&n+k<=m.framebufferWidth,"invalid width for read pixels");a(0<p&&p+g<=m.framebufferHeight,"invalid height for read pixels");q();h=n*p*4;w||(5121===e?w=new Uint8Array(h):5126===e&&(w=w||new Float32Array(h)));a.isTypedArray(w,"data buffer for regl.read() must be a typedarray");a(w.byteLength>=h,"data buffer for regl.read() too small");P.pixelStorei(3333,4);P.readPixels(k,g,n,p,6408,e,w);return w}function C(c){var e;
u.setFBO({framebuffer:c.framebuffer},function(){e=h(c)});return e}return function(c){return c&&"framebuffer"in c?C(c):h(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(l,r,G){var a=l("./util/sorted-object-keys"),d=l("./util/check"),P=l("./util/values"),u=[];u[32854]=2;u[32855]=2;u[36194]=2;u[33189]=2;u[36168]=1;u[34041]=4;u[35907]=4;u[34836]=16;u[34842]=8;u[34843]=6;r.exports=function(q,m,b,f,c){function h(e){this.id=k++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;c.profile&&(this.stats={size:0})}function C(c){var e=c.renderbuffer;d(e,"must not double destroy renderbuffer");q.bindRenderbuffer(36161,null);q.deleteRenderbuffer(e);c.renderbuffer=null;c.refCount=0;delete g[c.id];f.renderbufferCount--}var y={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};m.ext_srgb&&(y.srgba=35907);m.ext_color_buffer_half_float&&(y.rgba16f=34842,y.rgb16f=34843);m.webgl_color_buffer_float&&(y.rgba32f=34836);var e=[];a(y).forEach(function(c){e[y[c]]=
c});var k=0,g={};h.prototype.decRef=function(){0>=--this.refCount&&C(this)};c.profile&&(f.getTotalRenderbufferSize=function(){var c=0;a(g).forEach(function(e){c+=g[e].stats.size});return c});return{create:function(k,a){function w(k,h){var a=0,f=0,g=32854;"object"===typeof k&&k?("shape"in k?(f=k.shape,d(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),a=f[0]|0,f=f[1]|0):("radius"in k&&(a=f=k.radius|0),"width"in k&&(a=k.width|0),"height"in k&&(f=k.height|0)),"format"in k&&(d.parameter(k.format,
y,"invalid renderbuffer format"),g=y[k.format])):"number"===typeof k?(a=k|0,f="number"===typeof h?h|0:a):k?d.raise("invalid arguments to renderbuffer constructor"):a=f=1;d(0<a&&0<f&&a<=b.maxRenderbufferSize&&f<=b.maxRenderbufferSize,"invalid renderbuffer size");if(a!==z.width||f!==z.height||g!==z.format)return w.width=z.width=a,w.height=z.height=f,z.format=g,q.bindRenderbuffer(36161,z.renderbuffer),q.renderbufferStorage(36161,g,a,f),d(0===q.getError(),"invalid render buffer format"),c.profile&&(z.stats.size=
u[z.format]*z.width*z.height),w.format=e[z.format],w}var z=new h(q.createRenderbuffer());g[z.id]=z;f.renderbufferCount++;w(k,a);w.resize=function(e,k){var h=e|0,a=k|0||h;if(h===z.width&&a===z.height)return w;d(0<h&&0<a&&h<=b.maxRenderbufferSize&&a<=b.maxRenderbufferSize,"invalid renderbuffer size");w.width=z.width=h;w.height=z.height=a;q.bindRenderbuffer(36161,z.renderbuffer);q.renderbufferStorage(36161,z.format,h,a);d(0===q.getError(),"invalid render buffer format");c.profile&&(z.stats.size=u[z.format]*
z.width*z.height);return w};w._reglType="renderbuffer";w._renderbuffer=z;c.profile&&(w.stats=z.stats);w.destroy=function(){z.decRef()};return w},clear:function(){P(g).forEach(C)},restore:function(){P(g).forEach(function(c){c.renderbuffer=q.createRenderbuffer();q.bindRenderbuffer(36161,c.renderbuffer);q.renderbufferStorage(36161,c.format,c.width,c.height)});q.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(l,r,G){var a=l("./util/sorted-object-keys"),
d=l("./util/check"),P=l("./util/extend"),u=l("./util/values");r.exports=function(q,m,b,f){function c(c,e,b,k){this.name=c;this.id=e;this.location=b;this.info=k}function h(c,e){for(var b=0;b<c.length;++b)if(c[b].id===e.id){c[b].location=e.location;return}c.push(e)}function C(c,e,b){var h=35632===c?k:g,a=h[e];if(!a){var f=m.str(e),a=q.createShader(c);q.shaderSource(a,f);q.compileShader(a);d.shaderError(q,a,f,c,b);h[e]=a}return a}function y(c,e){this.id=w++;this.fragId=c;this.vertId=e;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;f.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(e,b,k){var a;a=C(35632,e.fragId);var g=C(35633,e.vertId),n=e.program=q.createProgram();q.attachShader(n,a);q.attachShader(n,g);if(k)for(a=0;a<k.length;++a)g=k[a],q.bindAttribLocation(n,g[0],g[1]);q.linkProgram(n);d.linkError(q,n,m.str(e.fragId),m.str(e.vertId),b);k=q.getProgramParameter(n,35718);f.profile&&(e.stats.uniformsCount=k);g=e.uniforms;for(a=0;a<k;++a)if(b=q.getActiveUniform(n,
a))if(1<b.size)for(var p=0;p<b.size;++p){var w=b.name.replace("[0]","["+p+"]");h(g,new c(w,m.id(w),q.getUniformLocation(n,w),b))}else h(g,new c(b.name,m.id(b.name),q.getUniformLocation(n,b.name),b));k=q.getProgramParameter(n,35721);f.profile&&(e.stats.attributesCount=k);e=e.attributes;for(a=0;a<k;++a)(b=q.getActiveAttrib(n,a))&&h(e,new c(b.name,m.id(b.name),q.getAttribLocation(n,b.name),b))}var k={},g={},n={},p=[],w=0;f.profile&&(b.getMaxUniformsCount=function(){var c=0;p.forEach(function(e){e.stats.uniformsCount>
c&&(c=e.stats.uniformsCount)});return c},b.getMaxAttributesCount=function(){var c=0;p.forEach(function(e){e.stats.attributesCount>c&&(c=e.stats.attributesCount)});return c});return{clear:function(){var c=q.deleteShader.bind(q);u(k).forEach(c);k={};u(g).forEach(c);g={};p.forEach(function(c){q.deleteProgram(c.program)});p.length=0;n={};b.shaderCount=0},program:function(c,h,f,w){d.command(0<=c,"missing vertex shader",f);d.command(0<=h,"missing fragment shader",f);var m=n[h];m||(m=n[h]={});var C=m[c];
if(C&&(C.refCount++,!w))return C;var u=new y(h,c);b.shaderCount++;e(u,f,w);C||(m[c]=u);p.push(u);return P(u,{destroy:function(){u.refCount--;if(0>=u.refCount){q.deleteProgram(u.program);var c=p.indexOf(u);p.splice(c,1);b.shaderCount--}0>=m[u.vertId].refCount&&(q.deleteShader(g[u.vertId]),delete g[u.vertId],delete n[u.fragId][u.vertId]);a(n[u.fragId]).length||(q.deleteShader(k[u.fragId]),delete k[u.fragId],delete n[u.fragId])}})},restore:function(){k={};g={};for(var c=0;c<p.length;++c)e(p[c],null,
p[c].attributes.map(function(c){return[c.location,c.name]}))},shader:C,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(l,r,G){r.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(l,r,G){r.exports=function(){var a={"":0},d=[""];return{id:function(P){var u=a[P];if(u)return u;u=a[P]=d.length;d.push(P);
return u},str:function(a){return d[a]}}}},{}],19:[function(l,r,G){function a(c){return"[object "+c+"]"}function d(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function P(c){return Array.isArray(c)&&0!==c.length&&n(c[0])?!0:!1}function u(c){return Object.prototype.toString.call(c)}function q(c){if(!c)return!1;var b=u(c);return 0<=aa.indexOf(b)?!0:d(c)||P(c)||e(c)}function m(c,e){36193===c.type?(c.data=g(e),k.freeType(e)):c.data=e}function b(c,e,b,k,d,a){c="undefined"!==typeof F[c]?
F[c]:x[c]*H[e];a&&(c*=6);if(d){for(k=0;1<=b;)k+=c*b*b,b/=2;return k}return c*b*k}var f=l("./util/sorted-object-keys"),c=l("./util/check"),h=l("./util/extend"),C=l("./util/values"),y=l("./util/is-typed-array"),e=l("./util/is-ndarray"),k=l("./util/pool"),g=l("./util/to-half-float"),n=l("./util/is-array-like"),p=l("./util/flatten"),w=l("./util/is-pow2");G=l("./constants/arraytypes.json");var z=l("./constants/arraytypes.json"),A=[9984,9986,9985,9987],ma=[0,6409,6410,6407,6408],x={};x[6409]=x[6406]=x[6402]=
1;x[34041]=x[6410]=2;x[6407]=x[35904]=3;x[6408]=x[35906]=4;var v=a("HTMLCanvasElement"),ta=a("OffscreenCanvas"),I=a("CanvasRenderingContext2D"),ra=a("ImageBitmap"),E=a("HTMLImageElement"),B=a("HTMLVideoElement"),aa=f(G).concat([v,ta,I,ra,E,B]),H=[];H[5121]=1;H[5126]=4;H[36193]=2;H[5123]=2;H[5125]=4;var F=[];F[32854]=2;F[32855]=2;F[36194]=2;F[34041]=4;F[33776]=.5;F[33777]=.5;F[33778]=1;F[33779]=1;F[35986]=.5;F[35987]=1;F[34798]=1;F[35840]=.5;F[35841]=.25;F[35842]=.5;F[35843]=.25;F[36196]=.5;r.exports=
function(a,l,t,H,F,r,aa){function T(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function W(c,e){c.internalformat=e.internalformat;c.format=e.format;c.type=e.type;c.compressed=e.compressed;c.premultiplyAlpha=e.premultiplyAlpha;c.flipY=e.flipY;c.unpackAlignment=e.unpackAlignment;c.colorSpace=e.colorSpace;c.width=e.width;c.height=e.height;c.channels=e.channels}
function S(e,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(c.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(c.type(b.flipY,"boolean","invalid texture flip"),e.flipY=b.flipY);"alignment"in b&&(c.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=b.alignment);"colorSpace"in b&&(c.parameter(b.colorSpace,Ua,"invalid colorSpace"),e.colorSpace=Ua[b.colorSpace]);if("type"in b){var k=b.type;c(l.oes_texture_float||
!("float"===k||"float32"===k),"you must enable the OES_texture_float extension in order to use floating point textures.");c(l.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");c(l.webgl_depth_texture||!("uint16"===k||"uint32"===k||"depth stencil"===k),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");c.parameter(k,ga,"invalid texture type");e.type=
ga[k]}var d=e.width,a=e.height,h=e.channels,k=!1;"shape"in b?(c(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),d=b.shape[0],a=b.shape[1],3===b.shape.length&&(h=b.shape[2],c(0<h&&4>=h,"invalid number of channels"),k=!0),c(0<=d&&d<=t.maxTextureSize,"invalid width"),c(0<=a&&a<=t.maxTextureSize,"invalid height")):("radius"in b&&(d=a=b.radius,c(0<=d&&d<=t.maxTextureSize,"invalid radius")),"width"in b&&(d=b.width,c(0<=d&&d<=t.maxTextureSize,"invalid width")),"height"in b&&(a=b.height,
c(0<=a&&a<=t.maxTextureSize,"invalid height")),"channels"in b&&(h=b.channels,c(0<h&&4>=h,"invalid number of channels"),k=!0));e.width=d|0;e.height=a|0;e.channels=h|0;d=!1;"format"in b&&(d=b.format,c(l.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(d,ea,"invalid texture format"),a=e.internalformat=ea[d],e.format=Ha[a],d in ga&&!("type"in b)&&(e.type=ga[d]),d in sa&&(e.compressed=!0),d=
!0);!k&&d?e.channels=x[e.format]:k&&!d?e.channels!==ma[e.format]&&(e.format=e.internalformat=ma[e.channels]):d&&k&&c(e.channels===x[e.format],"number of channels inconsistent with specified format")}}function O(c){a.pixelStorei(37440,c.flipY);a.pixelStorei(37441,c.premultiplyAlpha);a.pixelStorei(37443,c.colorSpace);a.pixelStorei(3317,c.unpackAlignment)}function M(){T.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function N(b,a){var h=null;
q(a)?h=a:a&&(c.type(a,"object","invalid pixel data type"),S(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),q(a.data)&&(h=a.data));c(!b.compressed||h instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){c(!h,"can not specify copy and data field for the same texture");var f=F.viewportWidth,w=F.viewportHeight;b.width=b.width||f-b.xOffset;b.height=b.height||w-b.yOffset;b.needsCopy=!0;c(0<=b.xOffset&&b.xOffset<f&&0<=b.yOffset&&b.yOffset<w&&0<b.width&&b.width<=
f&&0<b.height&&b.height<=w,"copy texture read out of bounds")}else if(!h)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(y(h))b.channels=b.channels||4,b.data=h,"type"in a||5121!==b.type||(b.type=z[Object.prototype.toString.call(h)]|0);else if(d(h)){b.channels=b.channels||4;f=h;w=f.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:w=k.allocType(b.type,w);w.set(f);b.data=w;break;case 36193:b.data=g(f);break;default:c.raise("unsupported texture type, must specify a typed array")}b.alignment=
1;b.needsFree=!0}else if(e(h)){f=h.data;Array.isArray(f)||5121!==b.type||(b.type=z[Object.prototype.toString.call(f)]|0);var w=h.shape,A=h.stride,C,x,D,ga;3===w.length?(D=w[2],ga=A[2]):(c(2===w.length,"invalid ndarray pixel data, must be 2 or 3D"),ga=D=1);C=w[0];x=w[1];w=A[0];A=A[1];b.alignment=1;b.width=C;b.height=x;b.channels=D;b.format=b.internalformat=ma[D];b.needsFree=!0;C=ga;h=h.offset;D=b.width;ga=b.height;x=b.channels;for(var N=k.allocType(36193===b.type?5126:b.type,D*ga*x),l=0,J=0;J<ga;++J)for(var ea=
0;ea<D;++ea)for(var V=0;V<x;++V)N[l++]=f[w*ea+A*J+C*V+h];m(b,N)}else if(u(h)===v||u(h)===ta||u(h)===I)u(h)===v||u(h)===ta?b.element=h:b.element=h.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(u(h)===ra)b.element=h,b.width=h.width,b.height=h.height,b.channels=4;else if(u(h)===E)b.element=h,b.width=h.naturalWidth,b.height=h.naturalHeight,b.channels=4;else if(u(h)===B)b.element=h,b.width=h.videoWidth,b.height=h.videoHeight,b.channels=4;else if(P(h)){f=b.width||h[0].length;
w=b.height||h.length;A=b.channels;A=n(h[0][0])?A||h[0][0].length:A||1;C=p.shape(h);D=1;for(ga=0;ga<C.length;++ga)D*=C[ga];D=k.allocType(36193===b.type?5126:b.type,D);p.flatten(h,C,"",D);m(b,D);b.alignment=1;b.width=f;b.height=w;b.channels=A;b.format=b.internalformat=ma[A];b.needsFree=!0}5126===b.type?c(0<=t.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===b.type&&c(0<=t.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function Q(c,e,b,k,d){var h=c.element,f=c.data,g=c.internalformat,n=c.format,p=c.type,w=c.width,z=c.height;O(c);h?a.texSubImage2D(e,d,b,k,n,p,h):c.compressed?a.compressedTexSubImage2D(e,d,b,k,g,w,z,f):c.needsCopy?(H(),a.copyTexSubImage2D(e,d,b,k,c.xOffset,c.yOffset,w,z)):a.texSubImage2D(e,d,b,k,w,z,n,p,f)}function R(){return pa.pop()||new M}function qa(c){c.needsFree&&k.freeType(c.data);M.call(c);pa.push(c)}function na(){T.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function J(c,e,b){var k=c.images[0]=R();c.mipmask=1;k.width=c.width=e;k.height=c.height=b;k.channels=c.channels=4}function K(e,b){var k=null;if(q(b))k=e.images[0]=R(),W(k,e),N(k,b),e.mipmask=1;else if(S(e,b),Array.isArray(b.mipmap))for(var d=b.mipmap,a=0;a<d.length;++a)k=e.images[a]=R(),W(k,e),k.width>>=a,k.height>>=a,N(k,d[a]),e.mipmask|=1<<a;else k=e.images[0]=R(),W(k,e),N(k,b),e.mipmask=1;W(e,e.images[0]);!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==e.internalformat&&
33779!==e.internalformat||c(0===e.width%4&&0===e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(c,e){for(var b=c.images,k=0;k<b.length&&b[k];++k){var d=b[k],h=e,f=k,g=d.element,n=d.data,p=d.internalformat,w=d.format,z=d.type,m=d.width,y=d.height;O(d);g?a.texImage2D(h,f,w,w,z,g):d.compressed?a.compressedTexImage2D(h,f,p,m,y,0,n):d.needsCopy?(H(),a.copyTexImage2D(h,f,w,d.xOffset,d.yOffset,m,y,0)):a.texImage2D(h,f,w,m,y,0,w,
z,n||null)}}function U(){var c=za.pop()||new na;T.call(c);for(var e=c.mipmask=0;16>e;++e)c.images[e]=null;return c}function la(c){for(var e=c.images,b=0;b<e.length;++b)e[b]&&qa(e[b]),e[b]=null;za.push(c)}function ha(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Aa(e,b){if("min"in b){var k=b.min;c.parameter(k,Hb);e.minFilter=Hb[k];0<=A.indexOf(e.minFilter)&&!("faces"in b)&&(e.genMipmaps=!0)}"mag"in b&&(k=b.mag,c.parameter(k,
Fa),e.magFilter=Fa[k]);var k=e.wrapS,d=e.wrapT;if("wrap"in b){var a=b.wrap;"string"===typeof a?(c.parameter(a,Qa),k=d=Qa[a]):Array.isArray(a)&&(c.parameter(a[0],Qa),c.parameter(a[1],Qa),k=Qa[a[0]],d=Qa[a[1]])}else"wrapS"in b&&(k=b.wrapS,c.parameter(k,Qa),k=Qa[k]),"wrapT"in b&&(d=b.wrapT,c.parameter(d,Qa),d=Qa[d]);e.wrapS=k;e.wrapT=d;"anisotropic"in b&&(k=b.anisotropic,c("number"===typeof k&&1<=k&&k<=t.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=b.anisotropic);if("mipmap"in
b){k=!1;switch(typeof b.mipmap){case "string":c.parameter(b.mipmap,Ba,"invalid mipmap hint");e.mipmapHint=Ba[b.mipmap];k=e.genMipmaps=!0;break;case "boolean":k=e.genMipmaps=b.mipmap;break;case "object":c(Array.isArray(b.mipmap),"invalid mipmap type");e.genMipmaps=!1;k=!0;break;default:c.raise("invalid mipmap type")}!k||"min"in b||(e.minFilter=9984)}}function xa(c,e){a.texParameteri(e,10241,c.minFilter);a.texParameteri(e,10240,c.magFilter);a.texParameteri(e,10242,c.wrapS);a.texParameteri(e,10243,c.wrapT);
l.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(e))}function ca(c){T.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ca++;this.refCount=1;this.target=c;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ha;aa.profile&&(this.stats={size:0})}function Da(c){a.activeTexture(33984);a.bindTexture(c.target,c.texture)}function ja(){var c=va[0];c?a.bindTexture(c.target,c.texture):a.bindTexture(3553,
null)}function oa(e){var b=e.texture;c(b,"must not double destroy texture");var k=e.unit,d=e.target;0<=k&&(a.activeTexture(33984+k),a.bindTexture(d,null),va[k]=null);a.deleteTexture(b);e.texture=null;e.params=null;e.pixels=null;e.refCount=0;delete ia[e.id];r.textureCount--}var Ba={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Qa={repeat:10497,clamp:33071,mirror:33648},Fa={nearest:9728,linear:9729},Hb=h({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,
"linear mipmap linear":9987},Fa),Ua={none:0,browser:37444},ga={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ea={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sa={};l.ext_srgb&&(ea.srgb=35904,ea.srgba=35906);l.oes_texture_float&&(ga.float32=ga["float"]=5126);l.oes_texture_half_float&&(ga.float16=ga["half float"]=36193);l.webgl_depth_texture&&(h(ea,{depth:6402,"depth stencil":34041}),h(ga,{uint16:5123,uint32:5125,"depth stencil":34042}));
l.webgl_compressed_texture_s3tc&&h(sa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});l.webgl_compressed_texture_atc&&h(sa,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});l.webgl_compressed_texture_pvrtc&&h(sa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});l.webgl_compressed_texture_etc1&&(sa["rgb etc1"]=36196);var wa=Array.prototype.slice.call(a.getParameter(34467));
f(sa).forEach(function(c){var e=sa[c];0<=wa.indexOf(e)&&(ea[c]=e)});var Ea=f(ea);t.textureFormats=Ea;var G=[];f(ea).forEach(function(c){G[ea[c]]=c});var Gb=[];f(ga).forEach(function(c){Gb[ga[c]]=c});var Z=[];f(Fa).forEach(function(c){Z[Fa[c]]=c});var V=[];f(Hb).forEach(function(c){V[Hb[c]]=c});var ya=[];f(Qa).forEach(function(c){ya[Qa[c]]=c});var Ha=Ea.reduce(function(c,e){var b=ea[e];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||l.ext_srgb&&(35904===b||35906===b)?c[b]=b:32855===b||
0<=e.indexOf("rgba")?c[b]=6408:c[b]=6407;return c},{}),pa=[],za=[],Ca=0,ia={},X=t.maxTextureUnits,va=Array(X).map(function(){return null});h(ca.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var b=0;b<X;++b){var k=va[b];if(k){if(0<k.bindCount)continue;k.unit=-1}va[b]=this;e=b;break}e>=X&&c.raise("insufficient number of texture units");aa.profile&&r.maxTextureUnits<e+1&&(r.maxTextureUnits=e+1);this.unit=e;a.activeTexture(33984+e);a.bindTexture(this.target,this.texture)}return e},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&oa(this)}});aa.profile&&(r.getTotalTextureSize=function(){var c=0;f(ia).forEach(function(e){c+=ia[e].stats.size});return c});return{create2D:function(e,k){function d(e,k){var a=h.texInfo;ha.call(a);var f=U();"number"===typeof e?"number"===typeof k?J(f,e|0,k|0):J(f,e|0,e|0):e?(c.type(e,"object","invalid arguments to regl.texture"),Aa(a,e),K(f,e)):J(f,1,1);a.genMipmaps&&(f.mipmask=(f.width<<1)-1);h.mipmask=f.mipmask;W(h,f);c.texture2D(a,
f,t);h.internalformat=f.internalformat;d.width=f.width;d.height=f.height;Da(h);da(f,3553);xa(a,3553);ja();la(f);aa.profile&&(h.stats.size=b(h.internalformat,h.type,f.width,f.height,a.genMipmaps,!1));d.format=G[h.internalformat];d.type=Gb[h.type];d.mag=Z[a.magFilter];d.min=V[a.minFilter];d.wrapS=ya[a.wrapS];d.wrapT=ya[a.wrapT];return d}var h=new ca(3553);ia[h.id]=h;r.textureCount++;d(e,k);d.subimage=function(e,b,k,a){c(!!e,"must specify image data");b|=0;k|=0;a|=0;var f=R();W(f,h);f.width=0;f.height=
0;N(f,e);f.width=f.width||(h.width>>a)-b;f.height=f.height||(h.height>>a)-k;c(h.type===f.type&&h.format===f.format&&h.internalformat===f.internalformat,"incompatible format for texture.subimage");c(0<=b&&0<=k&&b+f.width<=h.width&&k+f.height<=h.height,"texture.subimage write out of bounds");c(h.mipmask&1<<a,"missing mipmap data");c(f.data||f.element||f.needsCopy,"missing image data");Da(h);Q(f,3553,b,k,a);ja();qa(f);return d};d.resize=function(c,e){var k=c|0,f=e|0||k;if(k===h.width&&f===h.height)return d;
d.width=h.width=k;d.height=h.height=f;Da(h);for(var g=0;h.mipmask>>g;++g){var n=k>>g,p=f>>g;if(!n||!p)break;a.texImage2D(3553,g,h.format,n,p,0,h.format,h.type,null)}ja();aa.profile&&(h.stats.size=b(h.internalformat,h.type,k,f,!1,!1));return d};d._reglType="texture2d";d._texture=h;aa.profile&&(d.stats=h.stats);d.destroy=function(){h.decRef()};return d},createCube:function(e,k,d,h,f,g){function n(e,k,d,a,h,f){var g,m=p.texInfo;ha.call(m);for(g=0;6>g;++g)z[g]=U();if("number"!==typeof e&&e)if("object"===
typeof e)if(k)K(z[0],e),K(z[1],k),K(z[2],d),K(z[3],a),K(z[4],h),K(z[5],f);else if(Aa(m,e),S(p,e),"faces"in e)for(e=e.faces,c(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),g=0;6>g;++g)c("object"===typeof e[g]&&!!e[g],"invalid input for cube map face"),W(z[g],p),K(z[g],e[g]);else for(g=0;6>g;++g)K(z[g],e);else c.raise("invalid arguments to cube map");else for(e=e|0||1,g=0;6>g;++g)J(z[g],e,e);W(p,z[0]);c.optional(function(){t.npotTextureCube||c(w(p.width)&&w(p.height),"your browser does not support non power or two texture dimensions")});
p.mipmask=m.genMipmaps?(z[0].width<<1)-1:z[0].mipmask;c.textureCube(p,m,z,t);p.internalformat=z[0].internalformat;n.width=z[0].width;n.height=z[0].height;Da(p);for(g=0;6>g;++g)da(z[g],34069+g);xa(m,34067);ja();aa.profile&&(p.stats.size=b(p.internalformat,p.type,n.width,n.height,m.genMipmaps,!0));n.format=G[p.internalformat];n.type=Gb[p.type];n.mag=Z[m.magFilter];n.min=V[m.minFilter];n.wrapS=ya[m.wrapS];n.wrapT=ya[m.wrapT];for(g=0;6>g;++g)la(z[g]);return n}var p=new ca(34067);ia[p.id]=p;r.cubeCount++;
var z=Array(6);n(e,k,d,h,f,g);n.subimage=function(e,b,k,d,a){c(!!b,"must specify image data");c("number"===typeof e&&e===(e|0)&&0<=e&&6>e,"invalid face");k|=0;d|=0;a|=0;var h=R();W(h,p);h.width=0;h.height=0;N(h,b);h.width=h.width||(p.width>>a)-k;h.height=h.height||(p.height>>a)-d;c(p.type===h.type&&p.format===h.format&&p.internalformat===h.internalformat,"incompatible format for texture.subimage");c(0<=k&&0<=d&&k+h.width<=p.width&&d+h.height<=p.height,"texture.subimage write out of bounds");c(p.mipmask&
1<<a,"missing mipmap data");c(h.data||h.element||h.needsCopy,"missing image data");Da(p);Q(h,34069+e,k,d,a);ja();qa(h);return n};n.resize=function(c){c|=0;if(c!==p.width){n.width=p.width=c;n.height=p.height=c;Da(p);for(var e=0;6>e;++e)for(var k=0;p.mipmask>>k;++k)a.texImage2D(34069+e,k,p.format,c>>k,c>>k,0,p.format,p.type,null);ja();aa.profile&&(p.stats.size=b(p.internalformat,p.type,n.width,n.height,!1,!0));return n}};n._reglType="textureCube";n._texture=p;aa.profile&&(n.stats=p.stats);n.destroy=
function(){p.decRef()};return n},clear:function(){for(var c=0;c<X;++c)a.activeTexture(33984+c),a.bindTexture(3553,null),va[c]=null;C(ia).forEach(oa);r.cubeCount=0;r.textureCount=0},getTexture:function(c){return null},restore:function(){for(var c=0;c<X;++c){var e=va[c];e&&(e.bindCount=0,e.unit=-1,va[c]=null)}C(ia).forEach(function(c){c.texture=a.createTexture();a.bindTexture(c.target,c.texture);for(var e=0;32>e;++e)if(0!==(c.mipmask&1<<e))if(3553===c.target)a.texImage2D(3553,e,c.internalformat,c.width>>
e,c.height>>e,0,c.internalformat,c.type,null);else for(var b=0;6>b;++b)a.texImage2D(34069+b,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);xa(c.texInfo,c.target)})},refresh:function(){for(var c=0;c<X;++c){var e=va[c];e&&(e.bindCount=0,e.unit=-1,va[c]=null);a.activeTexture(33984+c);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(l,r,G){r.exports=function(a,d){function P(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function u(c,d,e){var k=b.pop()||new P;k.startQueryIndex=c;k.endQueryIndex=d;k.sum=0;k.stats=e;f.push(k)}if(!d.ext_disjoint_timer_query)return null;var q=[],m=[],b=[],f=[],c=[],h=[];return{beginQuery:function(c){var b=q.pop()||d.ext_disjoint_timer_query.createQueryEXT();
d.ext_disjoint_timer_query.beginQueryEXT(35007,b);m.push(b);u(m.length-1,m.length,c)},endQuery:function(){d.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:u,update:function(){var a,y;a=m.length;if(0!==a){h.length=Math.max(h.length,a+1);c.length=Math.max(c.length,a+1);c[0]=0;var e=h[0]=0;for(y=a=0;y<m.length;++y){var k=m[y];d.ext_disjoint_timer_query.getQueryObjectEXT(k,34919)?(e+=d.ext_disjoint_timer_query.getQueryObjectEXT(k,34918),q.push(k)):m[a++]=k;c[y+1]=e;h[y+1]=a}m.length=a;for(y=
a=0;y<f.length;++y){var e=f[y],g=e.startQueryIndex,k=e.endQueryIndex;e.sum+=c[k]-c[g];g=h[g];k=h[k];k===g?(e.stats.gpuTime+=e.sum/1E6,b.push(e)):(e.startQueryIndex=g,e.endQueryIndex=k,f[a++]=e)}f.length=a}},getNumPendingQueries:function(){return m.length},clear:function(){q.push.apply(q,m);for(var c=0;c<q.length;c++)d.ext_disjoint_timer_query.deleteQueryEXT(q[c]);m.length=0;q.length=0},restore:function(){m.length=0;q.length=0}}}},{}],21:[function(l,r,G){function a(c){return"undefined"!==typeof atob?
atob(c):"base64:"+c}function d(c){c=Error("(regl) "+c);console.error(c);throw c;}function P(c,e){c||d(e)}function u(c){return c?": "+c:""}function q(c,e){switch(e){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function m(c,e,b){0>e.indexOf(c)&&d("invalid value"+
u(b)+". must be one of: "+e)}function b(c,e){for(c+="";c.length<e;)c=" "+c;return c}function f(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function c(c,e){this.number=c;this.line=e;this.errors=[]}function h(c,e,b){this.file=c;this.line=e;this.message=b}function C(){var c=Error(),c=(c.stack||c).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return e?e[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function y(){var c=Error(),c=(c.stack||c).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);return e?e[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function e(e,b){var k=e.split("\n"),d=1,h=0,g={unknown:new f,0:new f};g.unknown.name=g[0].name=b||C();g.unknown.lines.push(new c(0,""));for(var n=0;n<k.length;++n){var p=k[n],w=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(p);if(w)switch(w[1]){case "line":if(w=/(\d+)(\s+\d+)?/.exec(w[2]))d=w[1]|0,w[2]&&(h=w[2]|0,h in g||(g[h]=new f));break;case "define":if(w=/SHADER_NAME(_B64)?\s+(.*)$/.exec(w[2]))g[h].name=
w[1]?a(w[2]):w[2]}g[h].lines.push(new c(d++,p))}A(g).forEach(function(c){var e=g[c];e.lines.forEach(function(c){e.index[c.number]=c})});return g}function k(c){var e=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var b=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);b?e.push(new h(b[1]|0,b[2]|0,b[3].trim())):0<c.length&&e.push(new h("unknown",0,c))}});return e}function g(c,e){e.forEach(function(e){var b=c[e.file];if(b){var k=b.index[e.line];if(k){k.errors.push(e);b.hasErrors=!0;return}}c.unknown.hasErrors=
!0;c.unknown.lines[0].errors.push(e)})}function n(c){c._commandRef=C()}function p(c,e){var b=y();d(c+" in command "+(e||C())+("unknown"===b?"":" called from "+b))}function w(c,e,b,k){q(c,e)||p("invalid parameter type"+u(b)+". expected "+e+", got "+typeof c,k||C())}function z(c,e){return 32820===c||32819===c||33635===c?2:34042===c?4:v[c]*e}var A=l("./sorted-object-keys"),ma=l("./is-typed-array");l=l("./extend");var x="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
v={};v[5120]=v[5121]=1;v[5122]=v[5123]=v[36193]=v[33635]=v[32819]=v[32820]=2;v[5124]=v[5125]=v[5126]=v[34042]=4;r.exports=l(P,{optional:function(c){c()},raise:d,commandRaise:p,command:function(c,e,b){c||p(e,b||C())},parameter:function(c,e,b){c in e||d("unknown parameter ("+c+")"+u(b)+". possible values: "+A(e).join())},commandParameter:function(c,e,b,k){c in e||p("unknown parameter ("+c+")"+u(b)+". possible values: "+A(e).join(),k||C())},constructor:function(c){A(c).forEach(function(c){0>x.indexOf(c)&&
d('invalid regl constructor argument "'+c+'". must be one of '+x)})},type:function(c,e,b){q(c,e)||d("invalid parameter type"+u(b)+". expected "+e+", got "+typeof c)},commandType:w,isTypedArray:function(c,e){ma(c)||d("invalid parameter type"+u(e)+". must be a typed array")},nni:function(c,e){0<=c&&(c|0)===c||d("invalid parameter type, ("+c+")"+u(e)+". must be a nonnegative integer")},oneOf:m,shaderError:function(c,d,a,h,f){if(!c.getShaderParameter(d,c.COMPILE_STATUS)){d=c.getShaderInfoLog(d);c=h===
c.FRAGMENT_SHADER?"fragment":"vertex";w(a,"string",c+" shader source must be a string",f);var n=e(a,f);a=k(d);g(n,a);A(n).forEach(function(c){function e(c,b){d.push(c);a.push(b||"")}var k=n[c];if(k.hasErrors){var d=[""],a=[""];e("file number "+c+": "+k.name+"\n","color:red;text-decoration:underline;font-weight:bold");k.lines.forEach(function(c){if(0<c.errors.length){e(b(c.number,4)+"|  ","background-color:yellow; font-weight:bold");e(c.line+"\n","color:red; background-color:yellow; font-weight:bold");
var k=0;c.errors.forEach(function(d){d=d.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(a){var h=a[1];d=a[2];switch(h){case "assign":h="="}k=Math.max(c.line.indexOf(h,k),0)}else k=0;e(b("| ",6));e(b("^^^",k+3)+"\n","font-weight:bold");e(b("| ",6));e(d+"\n","font-weight:bold")});e(b("| ",6)+"\n")}else e(b(c.number,4)+"|  "),e(c.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(a[0]=d.join("%c"),console.log.apply(console,a))}});P.raise("Error compiling "+
c+" shader, "+n[0].name)}},linkError:function(c,b,k,d,a){c.getProgramParameter(b,c.LINK_STATUS)||(c=c.getProgramInfoLog(b),k=e(k,a),d='Error linking program with vertex shader, "'+e(d,a)[0].name+'", and fragment shader "'+k[0].name+'"',"undefined"!==typeof document?console.log("%c"+d+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(d+"\n"+c),P.raise(d))},callSite:y,saveCommandRef:n,saveDrawInfo:function(c,e,b,k){function d(c){return c?k.id(c):0}function a(c,
e){A(e).forEach(function(e){c[k.id(e)]=!0})}n(c);c._fragId=d(c["static"].frag);c._vertId=d(c["static"].vert);var h=c._uniformSet={};a(h,e["static"]);a(h,e.dynamic);e=c._attributeSet={};a(e,b["static"]);a(e,b.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,e,b){c.texture?m(c.texture._texture.internalformat,e,"unsupported texture format for attachment"):m(c.renderbuffer._renderbuffer.format,b,"unsupported renderbuffer format for attachment")},
guessCommand:C,texture2D:function(c,e,b){var k=e.width,d=e.height,a=e.channels;P(0<k&&k<=b.maxTextureSize&&0<d&&d<=b.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||P(!(k&k-1)&&!!k&&!(d&d-1)&&!!d,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==k&&1!==d&&P(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(P(!(k&k-1)&&!!k&&!(d&d-1)&&!!d,"texture must be a square power of 2 to support mipmapping"),
P(e.mipmask===(k<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>b.extensions.indexOf("oes_texture_float_linear")&&P(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),P(!c.genMipmaps,"mipmap generation not supported with float textures"));var h=e.images;for(b=0;16>b;++b)if(h[b]){var f=k>>b,g=d>>b;P(e.mipmask&1<<b,"missing mipmap data");var n=h[b];P(n.width===f&&n.height===g,"invalid shape for mip images");P(n.format===e.format&&n.internalformat===
e.internalformat&&n.type===e.type,"incompatible type for mip image");!n.compressed&&n.data&&(f=Math.ceil(z(n.type,a)*f/n.unpackAlignment)*n.unpackAlignment,P(n.data.byteLength===f*g,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||P(0===(e.mipmask&1<<b),"extra mipmap data");e.compressed&&P(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,e,b,k){var d=c.width,a=c.height,h=c.channels;P(0<d&&d<=k.maxTextureSize&&
0<a&&a<=k.maxTextureSize,"invalid texture shape");P(d===a,"cube map must be square");P(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(k=0;k<b.length;++k){var f=b[k];P(f.width===d&&f.height===a,"inconsistent cube map face shape");e.genMipmaps&&(P(!f.compressed,"can not generate mipmap for compressed textures"),P(1===f.mipmask,"can not specify mipmaps and generate mipmaps"));for(var g=f.images,n=0;16>n;++n){var p=g[n];if(p){var w=d>>n,m=a>>n;P(f.mipmask&1<<n,"missing mipmap data");
P(p.width===w&&p.height===m,"invalid shape for mip images");P(p.format===c.format&&p.internalformat===c.internalformat&&p.type===c.type,"incompatible type for mip image");p.compressed||p.data&&P(p.data.byteLength===w*m*Math.max(z(p.type,h),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(l,r,G){r.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(l,r,G){function a(d){return Array.prototype.slice.call(d)}function d(d){return a(d).join("")}var P=l("./extend"),u=l("./compiled-fns");r.exports=function(){function q(){var c=[],e=[];return P(function(){c.push.apply(c,a(arguments))},{def:function(){var b="v"+f;f++;e.push(b);0<arguments.length&&(c.push(b,"="),c.push.apply(c,a(arguments)),c.push(";"));return b},toString:function(){return d([0<e.length?"var "+e.join(",")+";":"",d(c)])}})}function m(){function c(d,
a){b(d,a,"=",e.def(d,a),";")}var e=q(),b=q(),d=e.toString,h=b.toString;return P(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:b,save:c,set:function(b,k,d){c(b,k);e(b,k,"=",d,";")},toString:function(){return d()+h()}})}var b=0,f=0,c={},h=q(),C={};return{global:h,link:function(d){var e="$"+b,k=!1;"object"===typeof d&&d.name&&(e=d.name.replace(/ /g,"_"),k=!0);if(e in c)return e;c[e]=d;k||b++;return e},block:q,proc:function(c,e){function b(){var c="a"+a.length;a.push(c);return c}var a=[];
e=e||0;for(var h=0;h<e;++h)b();var h=m(),f=h.toString;return C[c]=P(h,{arg:b,toString:function(){return d(["function(",a.join(),"){",f(),"}"])}})},scope:m,cond:function(){var c=d(arguments),e=m(),b=m(),h=e.toString,f=b.toString;return P(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){b.apply(b,a(arguments));return this},toString:function(){var e=f();e&&(e="else{"+e+"}");return d(["if(",c,"){",h(),"}",e])}})},compile:function(){var b=[],e=[];Object.keys(c).sort(function(c,
e){var b="$"===c.charAt(0),k="$"===e.charAt(0);return b||k?b&&k?+c.slice(1)<+e.slice(1)?-1:1:b&&!k?-1:1:c.localeCompare(e)}).forEach(function(k){var d=c[k];b.push(k);e.push(d)});for(var k=0,a=b.length-1;-1<a;a--)if("$"===b[a].charAt(0)){k=a;break}var f=['"use strict";',h,"return {"];Object.keys(C).forEach(function(c){f.push('"',c,'":',C[c].toString(),",")});f.push("}");var a=d(f).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),k=b.slice(k).join(),p=u[k];if(!p)throw console.log("src code is:"),
console.log(a),console.log("compiled values:",e),console.log("linked names:",b),console.log("Keys available:",Object.keys(u)),console.log("Key:",k),console.log('"'+k+'": function('+b.join(", ")+") \n{\n"+a+"\n},"),Error("missing precompiled function with key: "+k);return p.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(l,r,G){r.exports={$0:function(a){var d,P,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,l,x,v,ta,I,ra,E,B,r,H,F;d=a.attributes;P=a.current;u=a.framebuffer;q=a.gl;m=a.next;b=
a.vao;f=m.blend_color;c=P.blend_color;h=m.blend_equation;C=P.blend_equation;y=m.blend_func;e=P.blend_func;k=m.colorMask;g=P.colorMask;n=m.depth_range;p=P.depth_range;w=m.polygonOffset_offset;z=P.polygonOffset_offset;A=m.sample_coverage;l=P.sample_coverage;x=m.scissor_box;v=P.scissor_box;ta=m.stencil_func;I=P.stencil_func;ra=m.stencil_opBack;E=P.stencil_opBack;B=m.stencil_opFront;r=P.stencil_opFront;H=m.viewport;F=P.viewport;return{poll:function(){var b,d,a,ba,L,fa,G,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,
la;P.dirty=!1;d=m.blend_enable;a=m.cull_enable;ba=m.depth_enable;L=m.dither;fa=m.polygonOffset_enable;G=m.sample_alpha;T=m.sample_enable;W=m.scissor_enable;S=m.stencil_enable;O=m.cull_face;M=P.cull_face;N=m.depth_func;Q=P.depth_func;R=m.depth_mask;qa=P.depth_mask;na=m.frontFace;J=P.frontFace;K=m.lineWidth;da=P.lineWidth;U=m.stencil_mask;la=P.stencil_mask;b=u.next;b!==u.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),u.cur=b);d!==P.blend_enable&&(d?q.enable(3042):q.disable(3042),
P.blend_enable=d);a!==P.cull_enable&&(a?q.enable(2884):q.disable(2884),P.cull_enable=a);ba!==P.depth_enable&&(ba?q.enable(2929):q.disable(2929),P.depth_enable=ba);L!==P.dither&&(L?q.enable(3024):q.disable(3024),P.dither=L);fa!==P.polygonOffset_enable&&(fa?q.enable(32823):q.disable(32823),P.polygonOffset_enable=fa);G!==P.sample_alpha&&(G?q.enable(32926):q.disable(32926),P.sample_alpha=G);T!==P.sample_enable&&(T?q.enable(32928):q.disable(32928),P.sample_enable=T);W!==P.scissor_enable&&(W?q.enable(3089):
q.disable(3089),P.scissor_enable=W);S!==P.stencil_enable&&(S?q.enable(2960):q.disable(2960),P.stencil_enable=S);if(f[0]!==c[0]||f[1]!==c[1]||f[2]!==c[2]||f[3]!==c[3])q.blendColor(f[0],f[1],f[2],f[3]),c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3];if(h[0]!==C[0]||h[1]!==C[1])q.blendEquationSeparate(h[0],h[1]),C[0]=h[0],C[1]=h[1];if(y[0]!==e[0]||y[1]!==e[1]||y[2]!==e[2]||y[3]!==e[3])q.blendFuncSeparate(y[0],y[1],y[2],y[3]),e[0]=y[0],e[1]=y[1],e[2]=y[2],e[3]=y[3];if(k[0]!==g[0]||k[1]!==g[1]||k[2]!==g[2]||k[3]!==
g[3])q.colorMask(k[0],k[1],k[2],k[3]),g[0]=k[0],g[1]=k[1],g[2]=k[2],g[3]=k[3];O!==M&&(q.cullFace(O),P.cull_face=O);N!==Q&&(q.depthFunc(N),P.depth_func=N);R!==qa&&(q.depthMask(R),P.depth_mask=R);if(n[0]!==p[0]||n[1]!==p[1])q.depthRange(n[0],n[1]),p[0]=n[0],p[1]=n[1];na!==J&&(q.frontFace(na),P.frontFace=na);K!==da&&(q.lineWidth(K),P.lineWidth=K);if(w[0]!==z[0]||w[1]!==z[1])q.polygonOffset(w[0],w[1]),z[0]=w[0],z[1]=w[1];if(A[0]!==l[0]||A[1]!==l[1])q.sampleCoverage(A[0],A[1]),l[0]=A[0],l[1]=A[1];if(x[0]!==
v[0]||x[1]!==v[1]||x[2]!==v[2]||x[3]!==v[3])q.scissor(x[0],x[1],x[2],x[3]),v[0]=x[0],v[1]=x[1],v[2]=x[2],v[3]=x[3];if(ta[0]!==I[0]||ta[1]!==I[1]||ta[2]!==I[2])q.stencilFunc(ta[0],ta[1],ta[2]),I[0]=ta[0],I[1]=ta[1],I[2]=ta[2];U!==la&&(q.stencilMask(U),P.stencil_mask=U);if(ra[0]!==E[0]||ra[1]!==E[1]||ra[2]!==E[2]||ra[3]!==E[3])q.stencilOpSeparate(ra[0],ra[1],ra[2],ra[3]),E[0]=ra[0],E[1]=ra[1],E[2]=ra[2],E[3]=ra[3];if(B[0]!==r[0]||B[1]!==r[1]||B[2]!==r[2]||B[3]!==r[3])q.stencilOpSeparate(B[0],B[1],B[2],
B[3]),r[0]=B[0],r[1]=B[1],r[2]=B[2],r[3]=B[3];if(H[0]!==F[0]||H[1]!==F[1]||H[2]!==F[2]||H[3]!==F[3])q.viewport(H[0],H[1],H[2],H[3]),F[0]=H[0],F[1]=H[1],F[2]=H[2],F[3]=H[3]},refresh:function(){var a,ka,t,ba,L,fa,G,T,W,S,O,M,N,Q,R,qa;P.dirty=!1;ka=m.blend_enable;t=m.cull_enable;ba=m.depth_enable;L=m.dither;fa=m.polygonOffset_enable;G=m.sample_alpha;T=m.sample_enable;W=m.scissor_enable;S=m.stencil_enable;O=m.cull_face;M=m.depth_func;N=m.depth_mask;Q=m.frontFace;R=m.lineWidth;qa=m.stencil_mask;(a=u.next)?
q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null);u.cur=a;a=d[0];a.buffer?(q.enableVertexAttribArray(0),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=d[1];a.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,
a.x,a.y,a.z,a.w),a.buffer=null);a=d[2];a.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=d[3];a.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);
a=d[4];a.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=d[5];a.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=d[6];a.buffer?(q.enableVertexAttribArray(6),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=d[7];a.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=d[8];a.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,a.buffer.buffer),
q.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(8),q.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=d[9];a.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=d[10];a.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(10,a.size,
a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=d[11];a.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=d[12];a.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,
a.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=d[13];a.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=d[14];a.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(14),
q.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=d[15];a.buffer?(q.enableVertexAttribArray(15),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);b.currentVAO=null;b.setVAO(b.targetVAO);ka?q.enable(3042):q.disable(3042);P.blend_enable=ka;t?q.enable(2884):q.disable(2884);P.cull_enable=t;ba?q.enable(2929):q.disable(2929);P.depth_enable=ba;L?q.enable(3024):
q.disable(3024);P.dither=L;fa?q.enable(32823):q.disable(32823);P.polygonOffset_enable=fa;G?q.enable(32926):q.disable(32926);P.sample_alpha=G;T?q.enable(32928):q.disable(32928);P.sample_enable=T;W?q.enable(3089):q.disable(3089);P.scissor_enable=W;S?q.enable(2960):q.disable(2960);P.stencil_enable=S;q.blendColor(f[0],f[1],f[2],f[3]);c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];q.blendEquationSeparate(h[0],h[1]);C[0]=h[0];C[1]=h[1];q.blendFuncSeparate(y[0],y[1],y[2],y[3]);e[0]=y[0];e[1]=y[1];e[2]=y[2];e[3]=
y[3];q.colorMask(k[0],k[1],k[2],k[3]);g[0]=k[0];g[1]=k[1];g[2]=k[2];g[3]=k[3];q.cullFace(O);P.cull_face=O;q.depthFunc(M);P.depth_func=M;q.depthMask(N);P.depth_mask=N;q.depthRange(n[0],n[1]);p[0]=n[0];p[1]=n[1];q.frontFace(Q);P.frontFace=Q;q.lineWidth(R);P.lineWidth=R;q.polygonOffset(w[0],w[1]);z[0]=w[0];z[1]=w[1];q.sampleCoverage(A[0],A[1]);l[0]=A[0];l[1]=A[1];q.scissor(x[0],x[1],x[2],x[3]);v[0]=x[0];v[1]=x[1];v[2]=x[2];v[3]=x[3];q.stencilFunc(ta[0],ta[1],ta[2]);I[0]=ta[0];I[1]=ta[1];I[2]=ta[2];q.stencilMask(qa);
P.stencil_mask=qa;q.stencilOpSeparate(ra[0],ra[1],ra[2],ra[3]);E[0]=ra[0];E[1]=ra[1];E[2]=ra[2];E[3]=ra[3];q.stencilOpSeparate(B[0],B[1],B[2],B[3]);r[0]=B[0];r[1]=B[1];r[2]=B[2];r[3]=B[3];q.viewport(H[0],H[1],H[2],H[3]);F[0]=H[0];F[1]=H[1];F[2]=H[2];F[3]=H[3]}}},$3:function(a,d,l,u){var q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,ta,I,r,E,B,aa,H,F,D,ka,t,ba,L,fa;q=a.context;m=a.current;b=a.framebuffer;f=a.gl;c=a.next;h=a.shader;C=a.vao;y=c.blend_color;e=m.blend_color;k=c.blend_equation;g=m.blend_equation;
n=c.blend_func;p=m.blend_func;w=c.colorMask;z=m.colorMask;A=c.depth_range;ma=m.depth_range;x=c.polygonOffset_offset;v=m.polygonOffset_offset;ta=c.sample_coverage;I=m.sample_coverage;r=c.scissor_box;E=m.scissor_box;B=c.stencil_func;aa=m.stencil_func;H=c.stencil_opBack;F=m.stencil_opBack;D=c.stencil_opFront;ka=m.stencil_opFront;t=c.viewport;ba=m.viewport;L={};fa={};return{batch:function(a,q){var l,P,O,M,N;l=b.next;l!==b.cur&&(l?f.bindFramebuffer(36160,l.framebuffer):f.bindFramebuffer(36160,null),b.cur=
l);if(m.dirty){l=c.dither;l!==m.dither&&(l?f.enable(3024):f.disable(3024),m.dither=l);l=c.blend_enable;l!==m.blend_enable&&(l?f.enable(3042):f.disable(3042),m.blend_enable=l);l=y[0];O=y[1];M=y[2];N=y[3];if(l!==e[0]||O!==e[1]||M!==e[2]||N!==e[3])f.blendColor(l,O,M,N),e[0]=l,e[1]=O,e[2]=M,e[3]=N;l=k[0];O=k[1];if(l!==g[0]||O!==g[1])f.blendEquationSeparate(l,O),g[0]=l,g[1]=O;l=n[0];O=n[1];M=n[2];N=n[3];if(l!==p[0]||O!==p[1]||M!==p[2]||N!==p[3])f.blendFuncSeparate(l,O,M,N),p[0]=l,p[1]=O,p[2]=M,p[3]=N;
l=c.depth_enable;l!==m.depth_enable&&(l?f.enable(2929):f.disable(2929),m.depth_enable=l);l=c.depth_func;l!==m.depth_func&&(f.depthFunc(l),m.depth_func=l);l=A[0];O=A[1];if(l!==ma[0]||O!==ma[1])f.depthRange(l,O),ma[0]=l,ma[1]=O;l=c.depth_mask;l!==m.depth_mask&&(f.depthMask(l),m.depth_mask=l);l=w[0];O=w[1];M=w[2];N=w[3];if(l!==z[0]||O!==z[1]||M!==z[2]||N!==z[3])f.colorMask(l,O,M,N),z[0]=l,z[1]=O,z[2]=M,z[3]=N;l=c.cull_enable;l!==m.cull_enable&&(l?f.enable(2884):f.disable(2884),m.cull_enable=l);l=c.cull_face;
l!==m.cull_face&&(f.cullFace(l),m.cull_face=l);l=c.frontFace;l!==m.frontFace&&(f.frontFace(l),m.frontFace=l);l=c.lineWidth;l!==m.lineWidth&&(f.lineWidth(l),m.lineWidth=l);l=c.polygonOffset_enable;l!==m.polygonOffset_enable&&(l?f.enable(32823):f.disable(32823),m.polygonOffset_enable=l);l=x[0];O=x[1];if(l!==v[0]||O!==v[1])f.polygonOffset(l,O),v[0]=l,v[1]=O;l=c.sample_alpha;l!==m.sample_alpha&&(l?f.enable(32926):f.disable(32926),m.sample_alpha=l);l=c.sample_enable;l!==m.sample_enable&&(l?f.enable(32928):
f.disable(32928),m.sample_enable=l);l=ta[0];O=ta[1];if(l!==I[0]||O!==I[1])f.sampleCoverage(l,O),I[0]=l,I[1]=O;l=c.stencil_enable;l!==m.stencil_enable&&(l?f.enable(2960):f.disable(2960),m.stencil_enable=l);l=c.stencil_mask;l!==m.stencil_mask&&(f.stencilMask(l),m.stencil_mask=l);l=B[0];O=B[1];M=B[2];if(l!==aa[0]||O!==aa[1]||M!==aa[2])f.stencilFunc(l,O,M),aa[0]=l,aa[1]=O,aa[2]=M;l=D[0];O=D[1];M=D[2];N=D[3];if(l!==ka[0]||O!==ka[1]||M!==ka[2]||N!==ka[3])f.stencilOpSeparate(l,O,M,N),ka[0]=l,ka[1]=O,ka[2]=
M,ka[3]=N;l=H[0];O=H[1];M=H[2];N=H[3];if(l!==F[0]||O!==F[1]||M!==F[2]||N!==F[3])f.stencilOpSeparate(l,O,M,N),F[0]=l,F[1]=O,F[2]=M,F[3]=N;l=c.scissor_enable;l!==m.scissor_enable&&(l?f.enable(3089):f.disable(3089),m.scissor_enable=l);l=r[0];O=r[1];M=r[2];N=r[3];if(l!==E[0]||O!==E[1]||M!==E[2]||N!==E[3])f.scissor(l,O,M,N),E[0]=l,E[1]=O,E[2]=M,E[3]=N;l=t[0];O=t[1];M=t[2];N=t[3];if(l!==ba[0]||O!==ba[1]||M!==ba[2]||N!==ba[3])f.viewport(l,O,M,N),ba[0]=l,ba[1]=O,ba[2]=M,ba[3]=N;m.dirty=!1}if(l=m.profile)P=
performance.now(),d.count+=q;O=h.program(h.vert,h.frag);f.useProgram(O.program);C.setVAO(null);M=O.id;(N=fa[M])||(N=fa[M]=u(O));N.call(this,a,q);C.setVAO(null);l&&(d.cpuTime+=performance.now()-P)},draw:function(a){var u,q,S,O,M;u=b.next;u!==b.cur&&(u?f.bindFramebuffer(36160,u.framebuffer):f.bindFramebuffer(36160,null),b.cur=u);if(m.dirty){u=c.dither;u!==m.dither&&(u?f.enable(3024):f.disable(3024),m.dither=u);u=c.blend_enable;u!==m.blend_enable&&(u?f.enable(3042):f.disable(3042),m.blend_enable=u);
u=y[0];S=y[1];O=y[2];M=y[3];if(u!==e[0]||S!==e[1]||O!==e[2]||M!==e[3])f.blendColor(u,S,O,M),e[0]=u,e[1]=S,e[2]=O,e[3]=M;u=k[0];S=k[1];if(u!==g[0]||S!==g[1])f.blendEquationSeparate(u,S),g[0]=u,g[1]=S;u=n[0];S=n[1];O=n[2];M=n[3];if(u!==p[0]||S!==p[1]||O!==p[2]||M!==p[3])f.blendFuncSeparate(u,S,O,M),p[0]=u,p[1]=S,p[2]=O,p[3]=M;u=c.depth_enable;u!==m.depth_enable&&(u?f.enable(2929):f.disable(2929),m.depth_enable=u);u=c.depth_func;u!==m.depth_func&&(f.depthFunc(u),m.depth_func=u);u=A[0];S=A[1];if(u!==
ma[0]||S!==ma[1])f.depthRange(u,S),ma[0]=u,ma[1]=S;u=c.depth_mask;u!==m.depth_mask&&(f.depthMask(u),m.depth_mask=u);u=w[0];S=w[1];O=w[2];M=w[3];if(u!==z[0]||S!==z[1]||O!==z[2]||M!==z[3])f.colorMask(u,S,O,M),z[0]=u,z[1]=S,z[2]=O,z[3]=M;u=c.cull_enable;u!==m.cull_enable&&(u?f.enable(2884):f.disable(2884),m.cull_enable=u);u=c.cull_face;u!==m.cull_face&&(f.cullFace(u),m.cull_face=u);u=c.frontFace;u!==m.frontFace&&(f.frontFace(u),m.frontFace=u);u=c.lineWidth;u!==m.lineWidth&&(f.lineWidth(u),m.lineWidth=
u);u=c.polygonOffset_enable;u!==m.polygonOffset_enable&&(u?f.enable(32823):f.disable(32823),m.polygonOffset_enable=u);u=x[0];S=x[1];if(u!==v[0]||S!==v[1])f.polygonOffset(u,S),v[0]=u,v[1]=S;u=c.sample_alpha;u!==m.sample_alpha&&(u?f.enable(32926):f.disable(32926),m.sample_alpha=u);u=c.sample_enable;u!==m.sample_enable&&(u?f.enable(32928):f.disable(32928),m.sample_enable=u);u=ta[0];S=ta[1];if(u!==I[0]||S!==I[1])f.sampleCoverage(u,S),I[0]=u,I[1]=S;u=c.stencil_enable;u!==m.stencil_enable&&(u?f.enable(2960):
f.disable(2960),m.stencil_enable=u);u=c.stencil_mask;u!==m.stencil_mask&&(f.stencilMask(u),m.stencil_mask=u);u=B[0];S=B[1];O=B[2];if(u!==aa[0]||S!==aa[1]||O!==aa[2])f.stencilFunc(u,S,O),aa[0]=u,aa[1]=S,aa[2]=O;u=D[0];S=D[1];O=D[2];M=D[3];if(u!==ka[0]||S!==ka[1]||O!==ka[2]||M!==ka[3])f.stencilOpSeparate(u,S,O,M),ka[0]=u,ka[1]=S,ka[2]=O,ka[3]=M;u=H[0];S=H[1];O=H[2];M=H[3];if(u!==F[0]||S!==F[1]||O!==F[2]||M!==F[3])f.stencilOpSeparate(u,S,O,M),F[0]=u,F[1]=S,F[2]=O,F[3]=M;u=c.scissor_enable;u!==m.scissor_enable&&
(u?f.enable(3089):f.disable(3089),m.scissor_enable=u);u=r[0];S=r[1];O=r[2];M=r[3];if(u!==E[0]||S!==E[1]||O!==E[2]||M!==E[3])f.scissor(u,S,O,M),E[0]=u,E[1]=S,E[2]=O,E[3]=M;u=t[0];S=t[1];O=t[2];M=t[3];if(u!==ba[0]||S!==ba[1]||O!==ba[2]||M!==ba[3])f.viewport(u,S,O,M),ba[0]=u,ba[1]=S,ba[2]=O,ba[3]=M;m.dirty=!1}if(u=m.profile)q=performance.now(),d.count++;S=h.program(h.vert,h.frag);f.useProgram(S.program);C.setVAO(null);O=S.id;(M=L[O])||(M=L[O]=l(S));M.call(this,a);C.setVAO(null);u&&(d.cpuTime+=performance.now()-
q)},scope:function(c,e,b){var k,a;if(k=m.profile)a=performance.now(),d.count++;e(q,c,b);k&&(d.cpuTime+=performance.now()-a)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,ta,I,r,E,B,aa,H,F,D,ka,t,ba,L,fa,
G,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca){var ia,X,va,Ka,Ga,eb,Y,Kc,bc,Ia,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je,Gd,Pd,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa;ia=a.attributes;X=a.context;va=a.current;Ka=a.draw;Ga=a.elements;eb=a.framebuffer;Y=a.gl;Kc=a.next;bc=a.shader;Ia=a.uniforms;cc=a.vao;Sb=Kc.blend_color;Ae=va.blend_color;Id=Kc.blend_equation;
Ad=va.blend_equation;Sd=Kc.blend_func;De=va.blend_func;ye=Kc.colorMask;$d=va.colorMask;re=Kc.depth_range;je=va.depth_range;Gd=Kc.polygonOffset_offset;Pd=va.polygonOffset_offset;Bd=Kc.sample_coverage;Cd=va.sample_coverage;Be=Kc.scissor_box;Qe=va.scissor_box;Ue=Kc.stencil_func;Jd=va.stencil_func;Ee=Kc.stencil_opBack;me=va.stencil_opBack;be=Kc.stencil_opFront;Md=va.stencil_opFront;Ed=Kc.viewport;pd=va.viewport;bd={};td={};Oc=new Float32Array(16);rd=new Float32Array(16);Gc=new Float32Array(16);gd=new Float32Array(16);
Sc=new Float32Array(16);md=new Float32Array(16);Vb=new Float32Array(16);Eb=new Float32Array(16);vc=new Float32Array(16);zb=new Float32Array(16);yc=new Float32Array(16);Bb=new Float32Array(16);Lc=new Float32Array(16);mc=new Float32Array(16);Hc=new Float32Array(16);hd=new Float32Array(16);cd=new Float32Array(16);Ec=new Float32Array(16);fc=new Float32Array(16);Ic=new Float32Array(16);pc=new Float32Array(16);rc=new Float32Array(16);nc=new Float32Array(16);qc=new Float32Array(16);ob=new Float32Array(16);
Pc=new Float32Array(16);Zb=new Float32Array(16);gb=new Float32Array(16);Mb=new Float32Array(16);ab=new Float32Array(16);jb=new Float32Array(16);Wa=new Float32Array(16);return{batch:function(a,d){var A,x,l,t;A=eb.next;A!==eb.cur&&(A?Y.bindFramebuffer(36160,A.framebuffer):Y.bindFramebuffer(36160,null),eb.cur=A);if(va.dirty){var P,v,ma,B,I,E,D,H,ka,ta,F,r,L,ra,aa,ba,fa,Ia,Sb,bc,Eb,Sc,Vb,Pa,Bb;P=ye[0];v=ye[1];ma=ye[2];B=ye[3];if(P!==$d[0]||v!==$d[1]||ma!==$d[2]||B!==$d[3])Y.colorMask(P,v,ma,B),$d[0]=
P,$d[1]=v,$d[2]=ma,$d[3]=B;I=Kc.frontFace;I!==va.frontFace&&(Y.frontFace(I),va.frontFace=I);E=Kc.polygonOffset_enable;E!==va.polygonOffset_enable&&(E?Y.enable(32823):Y.disable(32823),va.polygonOffset_enable=E);D=Gd[0];H=Gd[1];if(D!==Pd[0]||H!==Pd[1])Y.polygonOffset(D,H),Pd[0]=D,Pd[1]=H;ka=Kc.sample_alpha;ka!==va.sample_alpha&&(ka?Y.enable(32926):Y.disable(32926),va.sample_alpha=ka);ta=Kc.sample_enable;ta!==va.sample_enable&&(ta?Y.enable(32928):Y.disable(32928),va.sample_enable=ta);F=Bd[0];r=Bd[1];
if(F!==Cd[0]||r!==Cd[1])Y.sampleCoverage(F,r),Cd[0]=F,Cd[1]=r;L=Kc.stencil_enable;L!==va.stencil_enable&&(L?Y.enable(2960):Y.disable(2960),va.stencil_enable=L);ra=Kc.stencil_mask;ra!==va.stencil_mask&&(Y.stencilMask(ra),va.stencil_mask=ra);aa=Ue[0];ba=Ue[1];fa=Ue[2];if(aa!==Jd[0]||ba!==Jd[1]||fa!==Jd[2])Y.stencilFunc(aa,ba,fa),Jd[0]=aa,Jd[1]=ba,Jd[2]=fa;Ia=be[0];Sb=be[1];bc=be[2];Eb=be[3];if(Ia!==Md[0]||Sb!==Md[1]||bc!==Md[2]||Eb!==Md[3])Y.stencilOpSeparate(Ia,Sb,bc,Eb),Md[0]=Ia,Md[1]=Sb,Md[2]=bc,
Md[3]=Eb;Sc=Ee[0];Vb=Ee[1];Pa=Ee[2];Bb=Ee[3];if(Sc!==me[0]||Vb!==me[1]||Pa!==me[2]||Bb!==me[3])Y.stencilOpSeparate(Sc,Vb,Pa,Bb),me[0]=Sc,me[1]=Vb,me[2]=Pa,me[3]=Bb}Y.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;Y.disable(3042);va.blend_enable=!1;Y.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;Y.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;Y.enable(2884);va.cull_enable=!0;Y.cullFace(1029);va.cull_face=1029;Y.enable(2929);va.depth_enable=!0;Y.depthFunc(513);
va.depth_func=513;Y.depthMask(!0);va.depth_mask=!0;Y.depthRange(0,1);je[0]=0;je[1]=1;Y.disable(3024);va.dither=!1;Y.lineWidth(2);va.lineWidth=2;Y.enable(3089);va.scissor_enable=!0;x=va.profile;va.profile=!1;Y.useProgram(G.program);var Be,zb,md,Ma,mc,Za,Gc,Sd,mb,Oa,vc,Ra,wb,xb,Ta,nb,rd,Id,Hc,bb,Lc,gd,Ya,Oc,Ab,$a,re,yc,Xb,Qb,Ed,Rb,hd;cc.setVAO(null);Be=Ba.location;zb=ia[Be];zb.buffer||Y.enableVertexAttribArray(Be);if(zb.type!==u.dtype||4!==zb.size||zb.buffer!==u||!1!==zb.normalized||0!==zb.offset||
0!==zb.stride)Y.bindBuffer(34962,u.buffer),Y.vertexAttribPointer(Be,4,u.dtype,!1,0,0),zb.type=u.dtype,zb.size=4,zb.buffer=u,zb.normalized=!1,zb.offset=0,zb.stride=0;md=Qa.location;Ma=ia[md];Ma.buffer||Y.enableVertexAttribArray(md);if(Ma.type!==q.dtype||4!==Ma.size||Ma.buffer!==q||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)Y.bindBuffer(34962,q.buffer),Y.vertexAttribPointer(md,4,q.dtype,!1,0,0),Ma.type=q.dtype,Ma.size=4,Ma.buffer=q,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;mc=Fa.location;Za=ia[mc];
Za.buffer||Y.enableVertexAttribArray(mc);if(Za.type!==m.dtype||4!==Za.size||Za.buffer!==m||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)Y.bindBuffer(34962,m.buffer),Y.vertexAttribPointer(mc,4,m.dtype,!1,0,0),Za.type=m.dtype,Za.size=4,Za.buffer=m,Za.normalized=!1,Za.offset=0,Za.stride=0;Gc=Hb.location;Sd=ia[Gc];Sd.buffer||Y.enableVertexAttribArray(Gc);if(Sd.type!==b.dtype||4!==Sd.size||Sd.buffer!==b||!1!==Sd.normalized||0!==Sd.offset||0!==Sd.stride)Y.bindBuffer(34962,b.buffer),Y.vertexAttribPointer(Gc,
4,b.dtype,!1,0,0),Sd.type=b.dtype,Sd.size=4,Sd.buffer=b,Sd.normalized=!1,Sd.offset=0,Sd.stride=0;mb=Ua.location;Oa=ia[mb];Oa.buffer||Y.enableVertexAttribArray(mb);if(Oa.type!==f.dtype||4!==Oa.size||Oa.buffer!==f||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(mb,4,f.dtype,!1,0,0),Oa.type=f.dtype,Oa.size=4,Oa.buffer=f,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;vc=ga.location;Ra=ia[vc];Ra.buffer||Y.enableVertexAttribArray(vc);if(Ra.type!==c.dtype||
4!==Ra.size||Ra.buffer!==c||!1!==Ra.normalized||0!==Ra.offset||0!==Ra.stride)Y.bindBuffer(34962,c.buffer),Y.vertexAttribPointer(vc,4,c.dtype,!1,0,0),Ra.type=c.dtype,Ra.size=4,Ra.buffer=c,Ra.normalized=!1,Ra.offset=0,Ra.stride=0;wb=ea.location;xb=ia[wb];xb.buffer||Y.enableVertexAttribArray(wb);if(xb.type!==h.dtype||4!==xb.size||xb.buffer!==h||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(wb,4,h.dtype,!1,0,0),xb.type=h.dtype,xb.size=4,xb.buffer=
h,xb.normalized=!1,xb.offset=0,xb.stride=0;Ta=sa.location;nb=ia[Ta];nb.buffer||Y.enableVertexAttribArray(Ta);if(nb.type!==C.dtype||4!==nb.size||nb.buffer!==C||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)Y.bindBuffer(34962,C.buffer),Y.vertexAttribPointer(Ta,4,C.dtype,!1,0,0),nb.type=C.dtype,nb.size=4,nb.buffer=C,nb.normalized=!1,nb.offset=0,nb.stride=0;rd=wa.location;Id=ia[rd];Id.buffer||Y.enableVertexAttribArray(rd);if(Id.type!==y.dtype||4!==Id.size||Id.buffer!==y||!1!==Id.normalized||0!==Id.offset||
0!==Id.stride)Y.bindBuffer(34962,y.buffer),Y.vertexAttribPointer(rd,4,y.dtype,!1,0,0),Id.type=y.dtype,Id.size=4,Id.buffer=y,Id.normalized=!1,Id.offset=0,Id.stride=0;Hc=Ea.location;bb=ia[Hc];bb.buffer||Y.enableVertexAttribArray(Hc);if(bb.type!==e.dtype||4!==bb.size||bb.buffer!==e||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)Y.bindBuffer(34962,e.buffer),Y.vertexAttribPointer(Hc,4,e.dtype,!1,0,0),bb.type=e.dtype,bb.size=4,bb.buffer=e,bb.normalized=!1,bb.offset=0,bb.stride=0;Lc=rb.location;gd=ia[Lc];
gd.buffer||Y.enableVertexAttribArray(Lc);if(gd.type!==k.dtype||4!==gd.size||gd.buffer!==k||!1!==gd.normalized||0!==gd.offset||0!==gd.stride)Y.bindBuffer(34962,k.buffer),Y.vertexAttribPointer(Lc,4,k.dtype,!1,0,0),gd.type=k.dtype,gd.size=4,gd.buffer=k,gd.normalized=!1,gd.offset=0,gd.stride=0;Ya=Gb.location;Oc=ia[Ya];Oc.buffer||Y.enableVertexAttribArray(Ya);if(Oc.type!==g.dtype||4!==Oc.size||Oc.buffer!==g||!1!==Oc.normalized||0!==Oc.offset||0!==Oc.stride)Y.bindBuffer(34962,g.buffer),Y.vertexAttribPointer(Ya,
4,g.dtype,!1,0,0),Oc.type=g.dtype,Oc.size=4,Oc.buffer=g,Oc.normalized=!1,Oc.offset=0,Oc.stride=0;Ab=Z.location;$a=ia[Ab];$a.buffer||Y.enableVertexAttribArray(Ab);if($a.type!==n.dtype||4!==$a.size||$a.buffer!==n||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)Y.bindBuffer(34962,n.buffer),Y.vertexAttribPointer(Ab,4,n.dtype,!1,0,0),$a.type=n.dtype,$a.size=4,$a.buffer=n,$a.normalized=!1,$a.offset=0,$a.stride=0;re=V.location;yc=ia[re];yc.buffer||Y.enableVertexAttribArray(re);if(yc.type!==p.dtype||4!==
yc.size||yc.buffer!==p||!1!==yc.normalized||0!==yc.offset||0!==yc.stride)Y.bindBuffer(34962,p.buffer),Y.vertexAttribPointer(re,4,p.dtype,!1,0,0),yc.type=p.dtype,yc.size=4,yc.buffer=p,yc.normalized=!1,yc.offset=0,yc.stride=0;Xb=ya.location;Qb=ia[Xb];Qb.buffer||Y.enableVertexAttribArray(Xb);if(Qb.type!==w.dtype||4!==Qb.size||Qb.buffer!==w||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)Y.bindBuffer(34962,w.buffer),Y.vertexAttribPointer(Xb,4,w.dtype,!1,0,0),Qb.type=w.dtype,Qb.size=4,Qb.buffer=w,Qb.normalized=
!1,Qb.offset=0,Qb.stride=0;Ed=W.location;Rb=ia[Ed];Rb.buffer||Y.enableVertexAttribArray(Ed);if(Rb.type!==z.dtype||4!==Rb.size||Rb.buffer!==z||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)Y.bindBuffer(34962,z.buffer),Y.vertexAttribPointer(Ed,4,z.dtype,!1,0,0),Rb.type=z.dtype,Rb.size=4,Rb.buffer=z,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;Y.uniform1i(Ha.location,T.bind());(hd=Ka.elements)?Y.bindBuffer(34963,hd.buffer.buffer):cc.currentVAO&&(hd=Ga.getElements(cc.currentVAO.elements))&&Y.bindBuffer(34963,
hd.buffer.buffer);for(l=0;l<d;++l){t=a[l];var Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe;bd.height=t.viewportHeight;bd.width=t.viewportWidth;bd.x=t.viewportX;bd.y=t.viewportY;Fc=bd.x|0;sd=bd.y|0;Qc="width"in bd?bd.width|0:X.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:X.framebufferHeight-sd;vd=X.viewportWidth;X.viewportWidth=Qc;oc=X.viewportHeight;X.viewportHeight=
Yc;Y.viewport(Fc,sd,Qc,Yc);pd[0]=Fc;pd[1]=sd;pd[2]=Qc;pd[3]=Yc;td.height=t.scissorHeight;td.width=t.scissorWidth;td.x=t.scissorX;td.y=t.scissorY;xc=td.x|0;hc=td.y|0;cb="width"in td?td.width|0:X.framebufferWidth-xc;tc="height"in td?td.height|0:X.framebufferHeight-hc;Y.scissor(xc,hc,cb,tc);Qe[0]=xc;Qe[1]=hc;Qe[2]=cb;Qe[3]=tc;Tb=t.dim0A;Y.uniformMatrix4fv(O.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(cd[0]=Tb[0],cd[1]=Tb[1],cd[2]=Tb[2],cd[3]=Tb[3],cd[4]=Tb[4],cd[5]=Tb[5],cd[6]=Tb[6],
cd[7]=Tb[7],cd[8]=Tb[8],cd[9]=Tb[9],cd[10]=Tb[10],cd[11]=Tb[11],cd[12]=Tb[12],cd[13]=Tb[13],cd[14]=Tb[14],cd[15]=Tb[15],cd));Yb=t.dim1A;Y.uniformMatrix4fv(R.location,!1,Array.isArray(Yb)||Yb instanceof Float32Array?Yb:(Ec[0]=Yb[0],Ec[1]=Yb[1],Ec[2]=Yb[2],Ec[3]=Yb[3],Ec[4]=Yb[4],Ec[5]=Yb[5],Ec[6]=Yb[6],Ec[7]=Yb[7],Ec[8]=Yb[8],Ec[9]=Yb[9],Ec[10]=Yb[10],Ec[11]=Yb[11],Ec[12]=Yb[12],Ec[13]=Yb[13],Ec[14]=Yb[14],Ec[15]=Yb[15],Ec));ec=t.dim0B;Y.uniformMatrix4fv(M.location,!1,Array.isArray(ec)||ec instanceof
Float32Array?ec:(fc[0]=ec[0],fc[1]=ec[1],fc[2]=ec[2],fc[3]=ec[3],fc[4]=ec[4],fc[5]=ec[5],fc[6]=ec[6],fc[7]=ec[7],fc[8]=ec[8],fc[9]=ec[9],fc[10]=ec[10],fc[11]=ec[11],fc[12]=ec[12],fc[13]=ec[13],fc[14]=ec[14],fc[15]=ec[15],fc));ic=t.dim1B;Y.uniformMatrix4fv(qa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Ic[0]=ic[0],Ic[1]=ic[1],Ic[2]=ic[2],Ic[3]=ic[3],Ic[4]=ic[4],Ic[5]=ic[5],Ic[6]=ic[6],Ic[7]=ic[7],Ic[8]=ic[8],Ic[9]=ic[9],Ic[10]=ic[10],Ic[11]=ic[11],Ic[12]=ic[12],Ic[13]=ic[13],Ic[14]=
ic[14],Ic[15]=ic[15],Ic));zc=t.dim0C;Y.uniformMatrix4fv(N.location,!1,Array.isArray(zc)||zc instanceof Float32Array?zc:(pc[0]=zc[0],pc[1]=zc[1],pc[2]=zc[2],pc[3]=zc[3],pc[4]=zc[4],pc[5]=zc[5],pc[6]=zc[6],pc[7]=zc[7],pc[8]=zc[8],pc[9]=zc[9],pc[10]=zc[10],pc[11]=zc[11],pc[12]=zc[12],pc[13]=zc[13],pc[14]=zc[14],pc[15]=zc[15],pc));Cc=t.dim1C;Y.uniformMatrix4fv(na.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(rc[0]=Cc[0],rc[1]=Cc[1],rc[2]=Cc[2],rc[3]=Cc[3],rc[4]=Cc[4],rc[5]=Cc[5],rc[6]=
Cc[6],rc[7]=Cc[7],rc[8]=Cc[8],rc[9]=Cc[9],rc[10]=Cc[10],rc[11]=Cc[11],rc[12]=Cc[12],rc[13]=Cc[13],rc[14]=Cc[14],rc[15]=Cc[15],rc));dd=t.dim0D;Y.uniformMatrix4fv(Q.location,!1,Array.isArray(dd)||dd instanceof Float32Array?dd:(nc[0]=dd[0],nc[1]=dd[1],nc[2]=dd[2],nc[3]=dd[3],nc[4]=dd[4],nc[5]=dd[5],nc[6]=dd[6],nc[7]=dd[7],nc[8]=dd[8],nc[9]=dd[9],nc[10]=dd[10],nc[11]=dd[11],nc[12]=dd[12],nc[13]=dd[13],nc[14]=dd[14],nc[15]=dd[15],nc));Tc=t.dim1D;Y.uniformMatrix4fv(J.location,!1,Array.isArray(Tc)||Tc instanceof
Float32Array?Tc:(qc[0]=Tc[0],qc[1]=Tc[1],qc[2]=Tc[2],qc[3]=Tc[3],qc[4]=Tc[4],qc[5]=Tc[5],qc[6]=Tc[6],qc[7]=Tc[7],qc[8]=Tc[8],qc[9]=Tc[9],qc[10]=Tc[10],qc[11]=Tc[11],qc[12]=Tc[12],qc[13]=Tc[13],qc[14]=Tc[14],qc[15]=Tc[15],qc));Uc=t.loA;Y.uniformMatrix4fv(Aa.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(ob[0]=Uc[0],ob[1]=Uc[1],ob[2]=Uc[2],ob[3]=Uc[3],ob[4]=Uc[4],ob[5]=Uc[5],ob[6]=Uc[6],ob[7]=Uc[7],ob[8]=Uc[8],ob[9]=Uc[9],ob[10]=Uc[10],ob[11]=Uc[11],ob[12]=Uc[12],ob[13]=Uc[13],ob[14]=
Uc[14],ob[15]=Uc[15],ob));Vc=t.hiA;Y.uniformMatrix4fv(da.location,!1,Array.isArray(Vc)||Vc instanceof Float32Array?Vc:(Pc[0]=Vc[0],Pc[1]=Vc[1],Pc[2]=Vc[2],Pc[3]=Vc[3],Pc[4]=Vc[4],Pc[5]=Vc[5],Pc[6]=Vc[6],Pc[7]=Vc[7],Pc[8]=Vc[8],Pc[9]=Vc[9],Pc[10]=Vc[10],Pc[11]=Vc[11],Pc[12]=Vc[12],Pc[13]=Vc[13],Pc[14]=Vc[14],Pc[15]=Vc[15],Pc));Zc=t.loB;Y.uniformMatrix4fv(xa.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Zb[0]=Zc[0],Zb[1]=Zc[1],Zb[2]=Zc[2],Zb[3]=Zc[3],Zb[4]=Zc[4],Zb[5]=Zc[5],Zb[6]=Zc[6],
Zb[7]=Zc[7],Zb[8]=Zc[8],Zb[9]=Zc[9],Zb[10]=Zc[10],Zb[11]=Zc[11],Zb[12]=Zc[12],Zb[13]=Zc[13],Zb[14]=Zc[14],Zb[15]=Zc[15],Zb));od=t.hiB;Y.uniformMatrix4fv(U.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(gb[0]=od[0],gb[1]=od[1],gb[2]=od[2],gb[3]=od[3],gb[4]=od[4],gb[5]=od[5],gb[6]=od[6],gb[7]=od[7],gb[8]=od[8],gb[9]=od[9],gb[10]=od[10],gb[11]=od[11],gb[12]=od[12],gb[13]=od[13],gb[14]=od[14],gb[15]=od[15],gb));ed=t.loC;Y.uniformMatrix4fv(ca.location,!1,Array.isArray(ed)||ed instanceof
Float32Array?ed:(Mb[0]=ed[0],Mb[1]=ed[1],Mb[2]=ed[2],Mb[3]=ed[3],Mb[4]=ed[4],Mb[5]=ed[5],Mb[6]=ed[6],Mb[7]=ed[7],Mb[8]=ed[8],Mb[9]=ed[9],Mb[10]=ed[10],Mb[11]=ed[11],Mb[12]=ed[12],Mb[13]=ed[13],Mb[14]=ed[14],Mb[15]=ed[15],Mb));$c=t.hiC;Y.uniformMatrix4fv(la.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(ab[0]=$c[0],ab[1]=$c[1],ab[2]=$c[2],ab[3]=$c[3],ab[4]=$c[4],ab[5]=$c[5],ab[6]=$c[6],ab[7]=$c[7],ab[8]=$c[8],ab[9]=$c[9],ab[10]=$c[10],ab[11]=$c[11],ab[12]=$c[12],ab[13]=$c[13],ab[14]=
$c[14],ab[15]=$c[15],ab));lc=t.loD;Y.uniformMatrix4fv(Da.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(jb[0]=lc[0],jb[1]=lc[1],jb[2]=lc[2],jb[3]=lc[3],jb[4]=lc[4],jb[5]=lc[5],jb[6]=lc[6],jb[7]=lc[7],jb[8]=lc[8],jb[9]=lc[9],jb[10]=lc[10],jb[11]=lc[11],jb[12]=lc[12],jb[13]=lc[13],jb[14]=lc[14],jb[15]=lc[15],jb));dc=t.hiD;Y.uniformMatrix4fv(ha.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Wa[0]=dc[0],Wa[1]=dc[1],Wa[2]=dc[2],Wa[3]=dc[3],Wa[4]=dc[4],Wa[5]=dc[5],Wa[6]=dc[6],
Wa[7]=dc[7],Wa[8]=dc[8],Wa[9]=dc[9],Wa[10]=dc[10],Wa[11]=dc[11],Wa[12]=dc[12],Wa[13]=dc[13],Wa[14]=dc[14],Wa[15]=dc[15],Wa));ad=t.resolution;Xc=ad[0];Ac=ad[1];l&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,Y.uniform2f(pa.location,Xc,Ac));Dd=t.viewBoxPos;ze=Dd[0];kd=Dd[1];l&&xd===ze&&Fe===kd||(xd=ze,Fe=kd,Y.uniform2f(za.location,ze,kd));Td=t.viewBoxSize;he=Td[0];Ud=Td[1];l&&ee===he&&Nd===Ud||(ee=he,Nd=Ud,Y.uniform2f(Ca.location,he,Ud));Kd=t.maskHeight;l&&qd===Kd||(qd=Kd,Y.uniform1f(ja.location,Kd));Wc=t.drwLayer;
l&&wd===Wc||(wd=Wc,Y.uniform1f(K.location,Wc));ud=t.contextColor;ld=ud[0];Fd=ud[1];ke=ud[2];ue=ud[3];l&&yd===ld&&Hd===Fd&&ne===ke&&oe===ue||(yd=ld,Hd=Fd,ne=ke,oe=ue,Y.uniform4f(S.location,ld,Fd,ke,ue));(le=t.maskTexture)&&"framebuffer"===le._reglType&&(le=le.color[0]);ie=le._texture;Y.uniform1i(oa.location,ie.bind());ve=t.offset;if(fe=t.count)hd?Y.drawElements(1,fe,hd.type,ve<<(hd.type-5121>>1)):Y.drawArrays(1,ve,fe),X.viewportWidth=vd,X.viewportHeight=oc,ie.unbind()}T.unbind();va.dirty=!0;cc.setVAO(null);
va.profile=x},draw:function(a){var d,x,t,v,ma,B;d=eb.next;d!==eb.cur&&(d?Y.bindFramebuffer(36160,d.framebuffer):Y.bindFramebuffer(36160,null),eb.cur=d);if(va.dirty){d=ye[0];B=ye[1];x=ye[2];t=ye[3];if(d!==$d[0]||B!==$d[1]||x!==$d[2]||t!==$d[3])Y.colorMask(d,B,x,t),$d[0]=d,$d[1]=B,$d[2]=x,$d[3]=t;d=Kc.frontFace;d!==va.frontFace&&(Y.frontFace(d),va.frontFace=d);d=Kc.polygonOffset_enable;d!==va.polygonOffset_enable&&(d?Y.enable(32823):Y.disable(32823),va.polygonOffset_enable=d);d=Gd[0];B=Gd[1];if(d!==
Pd[0]||B!==Pd[1])Y.polygonOffset(d,B),Pd[0]=d,Pd[1]=B;d=Kc.sample_alpha;d!==va.sample_alpha&&(d?Y.enable(32926):Y.disable(32926),va.sample_alpha=d);d=Kc.sample_enable;d!==va.sample_enable&&(d?Y.enable(32928):Y.disable(32928),va.sample_enable=d);d=Bd[0];B=Bd[1];if(d!==Cd[0]||B!==Cd[1])Y.sampleCoverage(d,B),Cd[0]=d,Cd[1]=B;d=Kc.stencil_enable;d!==va.stencil_enable&&(d?Y.enable(2960):Y.disable(2960),va.stencil_enable=d);d=Kc.stencil_mask;d!==va.stencil_mask&&(Y.stencilMask(d),va.stencil_mask=d);d=Ue[0];
B=Ue[1];x=Ue[2];if(d!==Jd[0]||B!==Jd[1]||x!==Jd[2])Y.stencilFunc(d,B,x),Jd[0]=d,Jd[1]=B,Jd[2]=x;d=be[0];B=be[1];x=be[2];t=be[3];if(d!==Md[0]||B!==Md[1]||x!==Md[2]||t!==Md[3])Y.stencilOpSeparate(d,B,x,t),Md[0]=d,Md[1]=B,Md[2]=x,Md[3]=t;d=Ee[0];B=Ee[1];x=Ee[2];t=Ee[3];if(d!==me[0]||B!==me[1]||x!==me[2]||t!==me[3])Y.stencilOpSeparate(d,B,x,t),me[0]=d,me[1]=B,me[2]=x,me[3]=t}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;x=bd.x|0;t=bd.y|0;v="width"in bd?bd.width|
0:X.framebufferWidth-x;ma="height"in bd?bd.height|0:X.framebufferHeight-t;d=X.viewportWidth;X.viewportWidth=v;B=X.viewportHeight;X.viewportHeight=ma;Y.viewport(x,t,v,ma);pd[0]=x;pd[1]=t;pd[2]=v;pd[3]=ma;Y.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;Y.disable(3042);va.blend_enable=!1;Y.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;Y.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;Y.enable(2884);va.cull_enable=!0;Y.cullFace(1029);va.cull_face=1029;Y.enable(2929);
va.depth_enable=!0;Y.depthFunc(513);va.depth_func=513;Y.depthMask(!0);va.depth_mask=!0;Y.depthRange(0,1);je[0]=0;je[1]=1;Y.disable(3024);va.dither=!1;Y.lineWidth(2);va.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;x=td.x|0;t=td.y|0;v="width"in td?td.width|0:X.framebufferWidth-x;ma="height"in td?td.height|0:X.framebufferHeight-t;Y.scissor(x,t,v,ma);Qe[0]=x;Qe[1]=t;Qe[2]=v;Qe[3]=ma;Y.enable(3089);va.scissor_enable=!0;x=va.profile;va.profile=!1;Y.useProgram(l.program);
cc.setVAO(null);t=Ba.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==u.dtype||4!==v.size||v.buffer!==u||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,u.buffer),Y.vertexAttribPointer(t,4,u.dtype,!1,0,0),v.type=u.dtype,v.size=4,v.buffer=u,v.normalized=!1,v.offset=0,v.stride=0;t=Qa.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==q.dtype||4!==v.size||v.buffer!==q||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,q.buffer),Y.vertexAttribPointer(t,
4,q.dtype,!1,0,0),v.type=q.dtype,v.size=4,v.buffer=q,v.normalized=!1,v.offset=0,v.stride=0;t=Fa.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==m.dtype||4!==v.size||v.buffer!==m||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,m.buffer),Y.vertexAttribPointer(t,4,m.dtype,!1,0,0),v.type=m.dtype,v.size=4,v.buffer=m,v.normalized=!1,v.offset=0,v.stride=0;t=Hb.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==b.dtype||4!==v.size||v.buffer!==b||!1!==
v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,b.buffer),Y.vertexAttribPointer(t,4,b.dtype,!1,0,0),v.type=b.dtype,v.size=4,v.buffer=b,v.normalized=!1,v.offset=0,v.stride=0;t=Ua.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==f.dtype||4!==v.size||v.buffer!==f||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(t,4,f.dtype,!1,0,0),v.type=f.dtype,v.size=4,v.buffer=f,v.normalized=!1,v.offset=0,v.stride=0;t=ga.location;v=ia[t];
v.buffer||Y.enableVertexAttribArray(t);if(v.type!==c.dtype||4!==v.size||v.buffer!==c||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,c.buffer),Y.vertexAttribPointer(t,4,c.dtype,!1,0,0),v.type=c.dtype,v.size=4,v.buffer=c,v.normalized=!1,v.offset=0,v.stride=0;t=ea.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==h.dtype||4!==v.size||v.buffer!==h||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(t,4,h.dtype,!1,0,0),
v.type=h.dtype,v.size=4,v.buffer=h,v.normalized=!1,v.offset=0,v.stride=0;t=sa.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==C.dtype||4!==v.size||v.buffer!==C||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,C.buffer),Y.vertexAttribPointer(t,4,C.dtype,!1,0,0),v.type=C.dtype,v.size=4,v.buffer=C,v.normalized=!1,v.offset=0,v.stride=0;t=wa.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==y.dtype||4!==v.size||v.buffer!==y||!1!==v.normalized||0!==
v.offset||0!==v.stride)Y.bindBuffer(34962,y.buffer),Y.vertexAttribPointer(t,4,y.dtype,!1,0,0),v.type=y.dtype,v.size=4,v.buffer=y,v.normalized=!1,v.offset=0,v.stride=0;t=Ea.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==e.dtype||4!==v.size||v.buffer!==e||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,e.buffer),Y.vertexAttribPointer(t,4,e.dtype,!1,0,0),v.type=e.dtype,v.size=4,v.buffer=e,v.normalized=!1,v.offset=0,v.stride=0;t=rb.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);
if(v.type!==k.dtype||4!==v.size||v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,k.buffer),Y.vertexAttribPointer(t,4,k.dtype,!1,0,0),v.type=k.dtype,v.size=4,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;t=Gb.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==g.dtype||4!==v.size||v.buffer!==g||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,g.buffer),Y.vertexAttribPointer(t,4,g.dtype,!1,0,0),v.type=g.dtype,v.size=4,v.buffer=g,v.normalized=
!1,v.offset=0,v.stride=0;t=Z.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==n.dtype||4!==v.size||v.buffer!==n||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,n.buffer),Y.vertexAttribPointer(t,4,n.dtype,!1,0,0),v.type=n.dtype,v.size=4,v.buffer=n,v.normalized=!1,v.offset=0,v.stride=0;t=V.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==p.dtype||4!==v.size||v.buffer!==p||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,p.buffer),
Y.vertexAttribPointer(t,4,p.dtype,!1,0,0),v.type=p.dtype,v.size=4,v.buffer=p,v.normalized=!1,v.offset=0,v.stride=0;t=ya.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==w.dtype||4!==v.size||v.buffer!==w||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,w.buffer),Y.vertexAttribPointer(t,4,w.dtype,!1,0,0),v.type=w.dtype,v.size=4,v.buffer=w,v.normalized=!1,v.offset=0,v.stride=0;t=W.location;v=ia[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==z.dtype||4!==v.size||
v.buffer!==z||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,z.buffer),Y.vertexAttribPointer(t,4,z.dtype,!1,0,0),v.type=z.dtype,v.size=4,v.buffer=z,v.normalized=!1,v.offset=0,v.stride=0;t=a.dim0A;Y.uniformMatrix4fv(O.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Oc[0]=t[0],Oc[1]=t[1],Oc[2]=t[2],Oc[3]=t[3],Oc[4]=t[4],Oc[5]=t[5],Oc[6]=t[6],Oc[7]=t[7],Oc[8]=t[8],Oc[9]=t[9],Oc[10]=t[10],Oc[11]=t[11],Oc[12]=t[12],Oc[13]=t[13],Oc[14]=t[14],Oc[15]=t[15],Oc));t=a.dim1A;Y.uniformMatrix4fv(R.location,
!1,Array.isArray(t)||t instanceof Float32Array?t:(rd[0]=t[0],rd[1]=t[1],rd[2]=t[2],rd[3]=t[3],rd[4]=t[4],rd[5]=t[5],rd[6]=t[6],rd[7]=t[7],rd[8]=t[8],rd[9]=t[9],rd[10]=t[10],rd[11]=t[11],rd[12]=t[12],rd[13]=t[13],rd[14]=t[14],rd[15]=t[15],rd));t=a.dim0B;Y.uniformMatrix4fv(M.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Gc[0]=t[0],Gc[1]=t[1],Gc[2]=t[2],Gc[3]=t[3],Gc[4]=t[4],Gc[5]=t[5],Gc[6]=t[6],Gc[7]=t[7],Gc[8]=t[8],Gc[9]=t[9],Gc[10]=t[10],Gc[11]=t[11],Gc[12]=t[12],Gc[13]=t[13],Gc[14]=
t[14],Gc[15]=t[15],Gc));t=a.dim1B;Y.uniformMatrix4fv(qa.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(gd[0]=t[0],gd[1]=t[1],gd[2]=t[2],gd[3]=t[3],gd[4]=t[4],gd[5]=t[5],gd[6]=t[6],gd[7]=t[7],gd[8]=t[8],gd[9]=t[9],gd[10]=t[10],gd[11]=t[11],gd[12]=t[12],gd[13]=t[13],gd[14]=t[14],gd[15]=t[15],gd));t=a.dim0C;Y.uniformMatrix4fv(N.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Sc[0]=t[0],Sc[1]=t[1],Sc[2]=t[2],Sc[3]=t[3],Sc[4]=t[4],Sc[5]=t[5],Sc[6]=t[6],Sc[7]=t[7],Sc[8]=t[8],Sc[9]=
t[9],Sc[10]=t[10],Sc[11]=t[11],Sc[12]=t[12],Sc[13]=t[13],Sc[14]=t[14],Sc[15]=t[15],Sc));t=a.dim1C;Y.uniformMatrix4fv(na.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(md[0]=t[0],md[1]=t[1],md[2]=t[2],md[3]=t[3],md[4]=t[4],md[5]=t[5],md[6]=t[6],md[7]=t[7],md[8]=t[8],md[9]=t[9],md[10]=t[10],md[11]=t[11],md[12]=t[12],md[13]=t[13],md[14]=t[14],md[15]=t[15],md));t=a.dim0D;Y.uniformMatrix4fv(Q.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Vb[0]=t[0],Vb[1]=t[1],Vb[2]=t[2],Vb[3]=
t[3],Vb[4]=t[4],Vb[5]=t[5],Vb[6]=t[6],Vb[7]=t[7],Vb[8]=t[8],Vb[9]=t[9],Vb[10]=t[10],Vb[11]=t[11],Vb[12]=t[12],Vb[13]=t[13],Vb[14]=t[14],Vb[15]=t[15],Vb));t=a.dim1D;Y.uniformMatrix4fv(J.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Eb[0]=t[0],Eb[1]=t[1],Eb[2]=t[2],Eb[3]=t[3],Eb[4]=t[4],Eb[5]=t[5],Eb[6]=t[6],Eb[7]=t[7],Eb[8]=t[8],Eb[9]=t[9],Eb[10]=t[10],Eb[11]=t[11],Eb[12]=t[12],Eb[13]=t[13],Eb[14]=t[14],Eb[15]=t[15],Eb));t=a.loA;Y.uniformMatrix4fv(Aa.location,!1,Array.isArray(t)||t instanceof
Float32Array?t:(vc[0]=t[0],vc[1]=t[1],vc[2]=t[2],vc[3]=t[3],vc[4]=t[4],vc[5]=t[5],vc[6]=t[6],vc[7]=t[7],vc[8]=t[8],vc[9]=t[9],vc[10]=t[10],vc[11]=t[11],vc[12]=t[12],vc[13]=t[13],vc[14]=t[14],vc[15]=t[15],vc));t=a.hiA;Y.uniformMatrix4fv(da.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(zb[0]=t[0],zb[1]=t[1],zb[2]=t[2],zb[3]=t[3],zb[4]=t[4],zb[5]=t[5],zb[6]=t[6],zb[7]=t[7],zb[8]=t[8],zb[9]=t[9],zb[10]=t[10],zb[11]=t[11],zb[12]=t[12],zb[13]=t[13],zb[14]=t[14],zb[15]=t[15],zb));t=a.loB;Y.uniformMatrix4fv(xa.location,
!1,Array.isArray(t)||t instanceof Float32Array?t:(yc[0]=t[0],yc[1]=t[1],yc[2]=t[2],yc[3]=t[3],yc[4]=t[4],yc[5]=t[5],yc[6]=t[6],yc[7]=t[7],yc[8]=t[8],yc[9]=t[9],yc[10]=t[10],yc[11]=t[11],yc[12]=t[12],yc[13]=t[13],yc[14]=t[14],yc[15]=t[15],yc));t=a.hiB;Y.uniformMatrix4fv(U.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Bb[0]=t[0],Bb[1]=t[1],Bb[2]=t[2],Bb[3]=t[3],Bb[4]=t[4],Bb[5]=t[5],Bb[6]=t[6],Bb[7]=t[7],Bb[8]=t[8],Bb[9]=t[9],Bb[10]=t[10],Bb[11]=t[11],Bb[12]=t[12],Bb[13]=t[13],Bb[14]=t[14],
Bb[15]=t[15],Bb));t=a.loC;Y.uniformMatrix4fv(ca.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Lc[0]=t[0],Lc[1]=t[1],Lc[2]=t[2],Lc[3]=t[3],Lc[4]=t[4],Lc[5]=t[5],Lc[6]=t[6],Lc[7]=t[7],Lc[8]=t[8],Lc[9]=t[9],Lc[10]=t[10],Lc[11]=t[11],Lc[12]=t[12],Lc[13]=t[13],Lc[14]=t[14],Lc[15]=t[15],Lc));t=a.hiC;Y.uniformMatrix4fv(la.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(mc[0]=t[0],mc[1]=t[1],mc[2]=t[2],mc[3]=t[3],mc[4]=t[4],mc[5]=t[5],mc[6]=t[6],mc[7]=t[7],mc[8]=t[8],mc[9]=t[9],mc[10]=
t[10],mc[11]=t[11],mc[12]=t[12],mc[13]=t[13],mc[14]=t[14],mc[15]=t[15],mc));t=a.loD;Y.uniformMatrix4fv(Da.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Hc[0]=t[0],Hc[1]=t[1],Hc[2]=t[2],Hc[3]=t[3],Hc[4]=t[4],Hc[5]=t[5],Hc[6]=t[6],Hc[7]=t[7],Hc[8]=t[8],Hc[9]=t[9],Hc[10]=t[10],Hc[11]=t[11],Hc[12]=t[12],Hc[13]=t[13],Hc[14]=t[14],Hc[15]=t[15],Hc));t=a.hiD;Y.uniformMatrix4fv(ha.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(hd[0]=t[0],hd[1]=t[1],hd[2]=t[2],hd[3]=t[3],hd[4]=t[4],
hd[5]=t[5],hd[6]=t[6],hd[7]=t[7],hd[8]=t[8],hd[9]=t[9],hd[10]=t[10],hd[11]=t[11],hd[12]=t[12],hd[13]=t[13],hd[14]=t[14],hd[15]=t[15],hd));t=a.resolution;Y.uniform2f(pa.location,t[0],t[1]);t=a.viewBoxPos;Y.uniform2f(za.location,t[0],t[1]);t=a.viewBoxSize;Y.uniform2f(Ca.location,t[0],t[1]);Y.uniform1f(ja.location,a.maskHeight);Y.uniform1f(K.location,a.drwLayer);t=a.contextColor;Y.uniform4f(S.location,t[0],t[1],t[2],t[3]);(t=a.maskTexture)&&"framebuffer"===t._reglType&&(t=t.color[0]);t=t._texture;Y.uniform1i(oa.location,
t.bind());Y.uniform1i(Ha.location,A.bind());(v=Ka.elements)?Y.bindBuffer(34963,v.buffer.buffer):cc.currentVAO&&(v=Ga.getElements(cc.currentVAO.elements))&&Y.bindBuffer(34963,v.buffer.buffer);ma=a.offset;if(a=a.count)v?Y.drawElements(1,a,v.type,ma<<(v.type-5121>>1)):Y.drawArrays(1,ma,a),va.dirty=!0,cc.setVAO(null),X.viewportWidth=d,X.viewportHeight=B,va.profile=x,t.unbind(),A.unbind()},scope:function(a,d,A){var l,ga,P,N,J,ea,V,sa,Fa,ya,Qa,Ha,K,O,Hb,M,U,ca,pa,Z,S,ia,R,wa,Q,da,za,Ca,Y,qa,ha,xa,T,ja,
Ua,W,Ba,Ea,oa,Da,na,la,Gb,G,Aa,rb,Ga,eb,ua,ob,fc,Eb,Sc,Vb,qc,pc,zb,Bb,Cd,Ee,nc,cc,be,rc,gb,ab,Wa,Ic,Ue,md,mc,jb,Gc,me,gd,Jd,Oc,vc,Zb,yc,Ad,rd,Hc,Ec,Lc,$d,pd,Ae,Md,Mb,Gd,Pc,Qe,cd,hd,Bd,ye,De,Pd,je,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,
eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;l=bd.x|0;ga=bd.y|0;P="width"in bd?bd.width|0:X.framebufferWidth-l;N="height"in bd?bd.height|0:X.framebufferHeight-ga;J=X.viewportWidth;X.viewportWidth=P;ea=X.viewportHeight;
X.viewportHeight=N;V=Ed[0];Ed[0]=l;sa=Ed[1];Ed[1]=ga;Fa=Ed[2];Ed[2]=P;ya=Ed[3];Ed[3]=N;Qa=Sb[0];Sb[0]=0;Ha=Sb[1];Sb[1]=0;K=Sb[2];Sb[2]=0;O=Sb[3];Sb[3]=0;Hb=Kc.blend_enable;Kc.blend_enable=!1;M=Id[0];Id[0]=32774;U=Id[1];Id[1]=32774;ca=Sd[0];Sd[0]=770;pa=Sd[1];Sd[1]=771;Z=Sd[2];Sd[2]=1;S=Sd[3];Sd[3]=1;ia=Kc.cull_enable;Kc.cull_enable=!0;R=Kc.cull_face;Kc.cull_face=1029;wa=Kc.depth_enable;Kc.depth_enable=!0;Q=Kc.depth_func;Kc.depth_func=513;da=Kc.depth_mask;Kc.depth_mask=!0;za=re[0];re[0]=0;Ca=re[1];
re[1]=1;Y=Kc.dither;Kc.dither=!1;qa=Kc.lineWidth;Kc.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;ha=td.x|0;xa=td.y|0;T="width"in td?td.width|0:X.framebufferWidth-ha;ja="height"in td?td.height|0:X.framebufferHeight-xa;Ua=Be[0];Be[0]=ha;W=Be[1];Be[1]=xa;Ba=Be[2];Be[2]=T;Ea=Be[3];Be[3]=ja;oa=Kc.scissor_enable;Kc.scissor_enable=!0;Da=va.profile;va.profile=!1;na=a.offset;la=Ka.offset;Ka.offset=na;Gb=a.count;G=Ka.count;Ka.count=Gb;Aa=Ka.primitive;Ka.primitive=
1;rb=a.contextColor;Ga=Ia[24];Ia[24]=rb;eb=a.dim0A;ua=Ia[3];Ia[3]=eb;ob=a.dim0B;fc=Ia[5];Ia[5]=ob;Eb=a.dim0C;Sc=Ia[7];Ia[7]=Eb;Vb=a.dim0D;qc=Ia[9];Ia[9]=Vb;pc=a.dim1A;zb=Ia[4];Ia[4]=pc;Bb=a.dim1B;Cd=Ia[6];Ia[6]=Bb;Ee=a.dim1C;nc=Ia[8];Ia[8]=Ee;cc=a.dim1D;be=Ia[10];Ia[10]=cc;rc=a.drwLayer;gb=Ia[23];Ia[23]=rc;ab=a.hiA;Wa=Ia[12];Ia[12]=ab;Ic=a.hiB;Ue=Ia[14];Ia[14]=Ic;md=a.hiC;mc=Ia[16];Ia[16]=md;jb=a.hiD;Gc=Ia[18];Ia[18]=jb;me=a.loA;gd=Ia[11];Ia[11]=me;Jd=a.loB;Oc=Ia[13];Ia[13]=Jd;vc=a.loC;Zb=Ia[15];
Ia[15]=vc;yc=a.loD;Ad=Ia[17];Ia[17]=yc;rd=a.maskHeight;Hc=Ia[22];Ia[22]=rd;Ec=a.maskTexture;Lc=Ia[25];Ia[25]=Ec;$d=Ia[26];Ia[26]=ma;pd=a.resolution;Ae=Ia[19];Ia[19]=pd;Md=a.viewBoxPos;Mb=Ia[20];Ia[20]=Md;Gd=a.viewBoxSize;Pc=Ia[21];Ia[21]=Gd;Qe=x.buffer;x.buffer=z;cd=x.divisor;x.divisor=0;hd=x.normalized;x.normalized=!1;Bd=x.offset;x.offset=0;ye=x.size;x.size=0;De=x.state;x.state=1;Pd=x.stride;x.stride=0;je=x.type;x.type=z.dtype;Ud=x.w;x.w=0;Nd=x.x;x.x=0;Kd=x.y;x.y=0;qd=x.z;x.z=0;Wc=v.buffer;v.buffer=
u;wd=v.divisor;v.divisor=0;ud=v.normalized;v.normalized=!1;ld=v.offset;v.offset=0;yd=v.size;v.size=0;Fd=v.state;v.state=1;Hd=v.stride;v.stride=0;ke=v.type;v.type=u.dtype;ne=v.w;v.w=0;ue=v.x;v.x=0;oe=v.y;v.y=0;le=v.z;v.z=0;ie=ta.buffer;ta.buffer=q;ve=ta.divisor;ta.divisor=0;fe=ta.normalized;ta.normalized=!1;pe=ta.offset;ta.offset=0;Rc=ta.size;ta.size=0;id=ta.state;ta.state=1;we=ta.stride;ta.stride=0;se=ta.type;ta.type=q.dtype;Qd=ta.w;ta.w=0;Vd=ta.x;ta.x=0;Wd=ta.y;ta.y=0;Xd=ta.z;ta.z=0;qe=I.buffer;
I.buffer=m;Ce=I.divisor;I.divisor=0;Ge=I.normalized;I.normalized=!1;te=I.offset;I.offset=0;Ve=I.size;I.size=0;We=I.state;I.state=1;Re=I.stride;I.stride=0;xe=I.type;I.type=m.dtype;Je=I.w;I.w=0;Le=I.x;I.x=0;Me=I.y;I.y=0;Ne=I.z;I.z=0;Ke=r.buffer;r.buffer=b;Rd=r.divisor;r.divisor=0;ae=r.normalized;r.normalized=!1;de=r.offset;r.offset=0;ge=r.size;r.size=0;Oe=r.state;r.state=1;Ld=r.stride;r.stride=0;Yd=r.type;r.type=b.dtype;He=r.w;r.w=0;Pe=r.x;r.x=0;df=r.y;r.y=0;cf=r.z;r.z=0;Xe=E.buffer;E.buffer=f;Se=E.divisor;
E.divisor=0;bf=E.normalized;E.normalized=!1;af=E.offset;E.offset=0;Ye=E.size;E.size=0;Ze=E.state;E.state=1;Zd=E.stride;E.stride=0;ce=E.type;E.type=f.dtype;$e=E.w;E.w=0;kf=E.x;E.x=0;of=E.y;E.y=0;gf=E.z;E.z=0;lf=B.buffer;B.buffer=c;mf=B.divisor;B.divisor=0;nf=B.normalized;B.normalized=!1;sf=B.offset;B.offset=0;pf=B.size;B.size=0;tf=B.state;B.state=1;Cf=B.stride;B.stride=0;Df=B.type;B.type=c.dtype;Te=B.w;B.w=0;Ie=B.x;B.x=0;qf=B.y;B.y=0;rf=B.z;B.z=0;Ef=aa.buffer;aa.buffer=h;Hf=aa.divisor;aa.divisor=0;
Bf=aa.normalized;aa.normalized=!1;Ff=aa.offset;aa.offset=0;Gf=aa.size;aa.size=0;xf=aa.state;aa.state=1;yf=aa.stride;aa.stride=0;wf=aa.type;aa.type=h.dtype;zf=aa.w;aa.w=0;Af=aa.x;aa.x=0;Jf=aa.y;aa.y=0;Kf=aa.z;aa.z=0;Lf=H.buffer;H.buffer=C;Mf=H.divisor;H.divisor=0;uf=H.normalized;H.normalized=!1;Rf=H.offset;H.offset=0;If=H.size;H.size=0;vf=H.state;H.state=1;dg=H.stride;H.stride=0;Sf=H.type;H.type=C.dtype;Tf=H.w;H.w=0;qg=H.x;H.x=0;hf=H.y;H.y=0;ef=H.z;H.z=0;Nf=F.buffer;F.buffer=y;Of=F.divisor;F.divisor=
0;eg=F.normalized;F.normalized=!1;fg=F.offset;F.offset=0;gg=F.size;F.size=0;hg=F.state;F.state=1;ig=F.stride;F.stride=0;Wf=F.type;F.type=y.dtype;Uf=F.w;F.w=0;Xf=F.x;F.x=0;Yf=F.y;F.y=0;Zf=F.z;F.z=0;jg=D.buffer;D.buffer=e;rg=D.divisor;D.divisor=0;sg=D.normalized;D.normalized=!1;tg=D.offset;D.offset=0;ug=D.size;D.size=0;vg=D.state;D.state=1;wg=D.stride;D.stride=0;xg=D.type;D.type=e.dtype;yg=D.w;D.w=0;zg=D.x;D.x=0;Ag=D.y;D.y=0;Bg=D.z;D.z=0;jf=ka.buffer;ka.buffer=k;ff=ka.divisor;ka.divisor=0;Pf=ka.normalized;
ka.normalized=!1;Qf=ka.offset;ka.offset=0;kg=ka.size;ka.size=0;lg=ka.state;ka.state=1;mg=ka.stride;ka.stride=0;ng=ka.type;ka.type=k.dtype;og=ka.w;ka.w=0;$f=ka.x;ka.x=0;Vf=ka.y;ka.y=0;ag=ka.z;ka.z=0;bg=t.buffer;t.buffer=g;cg=t.divisor;t.divisor=0;pg=t.normalized;t.normalized=!1;Cg=t.offset;t.offset=0;Dg=t.size;t.size=0;Eg=t.state;t.state=1;Fg=t.stride;t.stride=0;Gg=t.type;t.type=g.dtype;Hg=t.w;t.w=0;Ig=t.x;t.x=0;Jg=t.y;t.y=0;Kg=t.z;t.z=0;Lg=ba.buffer;ba.buffer=n;Mg=ba.divisor;ba.divisor=0;Ng=ba.normalized;
ba.normalized=!1;Og=ba.offset;ba.offset=0;Pg=ba.size;ba.size=0;Qg=ba.state;ba.state=1;Rg=ba.stride;ba.stride=0;Sg=ba.type;ba.type=n.dtype;Tg=ba.w;ba.w=0;Ug=ba.x;ba.x=0;Vg=ba.y;ba.y=0;Wg=ba.z;ba.z=0;Xg=L.buffer;L.buffer=p;Yg=L.divisor;L.divisor=0;Zg=L.normalized;L.normalized=!1;$g=L.offset;L.offset=0;ah=L.size;L.size=0;bh=L.state;L.state=1;ch=L.stride;L.stride=0;dh=L.type;L.type=p.dtype;eh=L.w;L.w=0;fh=L.x;L.x=0;gh=L.y;L.y=0;hh=L.z;L.z=0;ih=fa.buffer;fa.buffer=w;jh=fa.divisor;fa.divisor=0;kh=fa.normalized;
fa.normalized=!1;lh=fa.offset;fa.offset=0;mh=fa.size;fa.size=0;nh=fa.state;fa.state=1;oh=fa.stride;fa.stride=0;ph=fa.type;fa.type=w.dtype;qh=fa.w;fa.w=0;rh=fa.x;fa.x=0;sh=fa.y;fa.y=0;th=fa.z;fa.z=0;uh=bc.vert;bc.vert=2;vh=bc.frag;bc.frag=1;va.dirty=!0;d(X,a,A);X.viewportWidth=J;X.viewportHeight=ea;Ed[0]=V;Ed[1]=sa;Ed[2]=Fa;Ed[3]=ya;Sb[0]=Qa;Sb[1]=Ha;Sb[2]=K;Sb[3]=O;Kc.blend_enable=Hb;Id[0]=M;Id[1]=U;Sd[0]=ca;Sd[1]=pa;Sd[2]=Z;Sd[3]=S;Kc.cull_enable=ia;Kc.cull_face=R;Kc.depth_enable=wa;Kc.depth_func=
Q;Kc.depth_mask=da;re[0]=za;re[1]=Ca;Kc.dither=Y;Kc.lineWidth=qa;Be[0]=Ua;Be[1]=W;Be[2]=Ba;Be[3]=Ea;Kc.scissor_enable=oa;va.profile=Da;Ka.offset=la;Ka.count=G;Ka.primitive=Aa;Ia[24]=Ga;Ia[3]=ua;Ia[5]=fc;Ia[7]=Sc;Ia[9]=qc;Ia[4]=zb;Ia[6]=Cd;Ia[8]=nc;Ia[10]=be;Ia[23]=gb;Ia[12]=Wa;Ia[14]=Ue;Ia[16]=mc;Ia[18]=Gc;Ia[11]=gd;Ia[13]=Oc;Ia[15]=Zb;Ia[17]=Ad;Ia[22]=Hc;Ia[25]=Lc;Ia[26]=$d;Ia[19]=Ae;Ia[20]=Mb;Ia[21]=Pc;x.buffer=Qe;x.divisor=cd;x.normalized=hd;x.offset=Bd;x.size=ye;x.state=De;x.stride=Pd;x.type=
je;x.w=Ud;x.x=Nd;x.y=Kd;x.z=qd;v.buffer=Wc;v.divisor=wd;v.normalized=ud;v.offset=ld;v.size=yd;v.state=Fd;v.stride=Hd;v.type=ke;v.w=ne;v.x=ue;v.y=oe;v.z=le;ta.buffer=ie;ta.divisor=ve;ta.normalized=fe;ta.offset=pe;ta.size=Rc;ta.state=id;ta.stride=we;ta.type=se;ta.w=Qd;ta.x=Vd;ta.y=Wd;ta.z=Xd;I.buffer=qe;I.divisor=Ce;I.normalized=Ge;I.offset=te;I.size=Ve;I.state=We;I.stride=Re;I.type=xe;I.w=Je;I.x=Le;I.y=Me;I.z=Ne;r.buffer=Ke;r.divisor=Rd;r.normalized=ae;r.offset=de;r.size=ge;r.state=Oe;r.stride=Ld;
r.type=Yd;r.w=He;r.x=Pe;r.y=df;r.z=cf;E.buffer=Xe;E.divisor=Se;E.normalized=bf;E.offset=af;E.size=Ye;E.state=Ze;E.stride=Zd;E.type=ce;E.w=$e;E.x=kf;E.y=of;E.z=gf;B.buffer=lf;B.divisor=mf;B.normalized=nf;B.offset=sf;B.size=pf;B.state=tf;B.stride=Cf;B.type=Df;B.w=Te;B.x=Ie;B.y=qf;B.z=rf;aa.buffer=Ef;aa.divisor=Hf;aa.normalized=Bf;aa.offset=Ff;aa.size=Gf;aa.state=xf;aa.stride=yf;aa.type=wf;aa.w=zf;aa.x=Af;aa.y=Jf;aa.z=Kf;H.buffer=Lf;H.divisor=Mf;H.normalized=uf;H.offset=Rf;H.size=If;H.state=vf;H.stride=
dg;H.type=Sf;H.w=Tf;H.x=qg;H.y=hf;H.z=ef;F.buffer=Nf;F.divisor=Of;F.normalized=eg;F.offset=fg;F.size=gg;F.state=hg;F.stride=ig;F.type=Wf;F.w=Uf;F.x=Xf;F.y=Yf;F.z=Zf;D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;ka.buffer=jf;ka.divisor=ff;ka.normalized=Pf;ka.offset=Qf;ka.size=kg;ka.state=lg;ka.stride=mg;ka.type=ng;ka.w=og;ka.x=$f;ka.y=Vf;ka.z=ag;t.buffer=bg;t.divisor=cg;t.normalized=pg;t.offset=Cg;t.size=Dg;t.state=Eg;t.stride=
Fg;t.type=Gg;t.w=Hg;t.x=Ig;t.y=Jg;t.z=Kg;ba.buffer=Lg;ba.divisor=Mg;ba.normalized=Ng;ba.offset=Og;ba.size=Pg;ba.state=Qg;ba.stride=Rg;ba.type=Sg;ba.w=Tg;ba.x=Ug;ba.y=Vg;ba.z=Wg;L.buffer=Xg;L.divisor=Yg;L.normalized=Zg;L.offset=$g;L.size=ah;L.state=bh;L.stride=ch;L.type=dh;L.w=eh;L.x=fh;L.y=gh;L.z=hh;fa.buffer=ih;fa.divisor=jh;fa.normalized=kh;fa.offset=lh;fa.size=mh;fa.state=nh;fa.stride=oh;fa.type=ph;fa.w=qh;fa.x=rh;fa.y=sh;fa.z=th;bc.vert=uh;bc.frag=vh;va.dirty=!0}}},$1:function(a,d){var l,u,q,
m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,ta,I,r,E,B,aa,H,F,D;l=a.attributes;u=a.current;q=a.framebuffer;m=a.gl;b=a.next;f=a.vao;c=b.blend_color;h=u.blend_color;C=b.blend_equation;y=u.blend_equation;e=b.blend_func;k=u.blend_func;g=b.colorMask;n=u.colorMask;p=b.depth_range;w=u.depth_range;z=b.polygonOffset_offset;A=u.polygonOffset_offset;ma=b.sample_coverage;x=u.sample_coverage;v=b.scissor_box;ta=u.scissor_box;I=b.stencil_func;r=u.stencil_func;E=b.stencil_opBack;B=u.stencil_opBack;aa=b.stencil_opFront;
H=u.stencil_opFront;F=b.viewport;D=u.viewport;return{poll:function(){var a,d,f,l,P,G,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha;u.dirty=!1;d=b.blend_enable;f=b.cull_enable;l=b.depth_enable;P=b.dither;G=b.polygonOffset_enable;T=b.sample_alpha;W=b.sample_enable;S=b.scissor_enable;O=b.stencil_enable;M=b.cull_face;N=u.cull_face;Q=b.depth_func;R=u.depth_func;qa=b.depth_mask;na=u.depth_mask;J=b.frontFace;K=u.frontFace;da=b.lineWidth;U=u.lineWidth;la=b.stencil_mask;ha=u.stencil_mask;a=q.next;a!==q.cur&&(a?m.bindFramebuffer(36160,
a.framebuffer):m.bindFramebuffer(36160,null),q.cur=a);d!==u.blend_enable&&(d?m.enable(3042):m.disable(3042),u.blend_enable=d);f!==u.cull_enable&&(f?m.enable(2884):m.disable(2884),u.cull_enable=f);l!==u.depth_enable&&(l?m.enable(2929):m.disable(2929),u.depth_enable=l);P!==u.dither&&(P?m.enable(3024):m.disable(3024),u.dither=P);G!==u.polygonOffset_enable&&(G?m.enable(32823):m.disable(32823),u.polygonOffset_enable=G);T!==u.sample_alpha&&(T?m.enable(32926):m.disable(32926),u.sample_alpha=T);W!==u.sample_enable&&
(W?m.enable(32928):m.disable(32928),u.sample_enable=W);S!==u.scissor_enable&&(S?m.enable(3089):m.disable(3089),u.scissor_enable=S);O!==u.stencil_enable&&(O?m.enable(2960):m.disable(2960),u.stencil_enable=O);if(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3])m.blendColor(c[0],c[1],c[2],c[3]),h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3];if(C[0]!==y[0]||C[1]!==y[1])m.blendEquationSeparate(C[0],C[1]),y[0]=C[0],y[1]=C[1];if(e[0]!==k[0]||e[1]!==k[1]||e[2]!==k[2]||e[3]!==k[3])m.blendFuncSeparate(e[0],e[1],
e[2],e[3]),k[0]=e[0],k[1]=e[1],k[2]=e[2],k[3]=e[3];if(g[0]!==n[0]||g[1]!==n[1]||g[2]!==n[2]||g[3]!==n[3])m.colorMask(g[0],g[1],g[2],g[3]),n[0]=g[0],n[1]=g[1],n[2]=g[2],n[3]=g[3];M!==N&&(m.cullFace(M),u.cull_face=M);Q!==R&&(m.depthFunc(Q),u.depth_func=Q);qa!==na&&(m.depthMask(qa),u.depth_mask=qa);if(p[0]!==w[0]||p[1]!==w[1])m.depthRange(p[0],p[1]),w[0]=p[0],w[1]=p[1];J!==K&&(m.frontFace(J),u.frontFace=J);da!==U&&(m.lineWidth(da),u.lineWidth=da);if(z[0]!==A[0]||z[1]!==A[1])m.polygonOffset(z[0],z[1]),
A[0]=z[0],A[1]=z[1];if(ma[0]!==x[0]||ma[1]!==x[1])m.sampleCoverage(ma[0],ma[1]),x[0]=ma[0],x[1]=ma[1];if(v[0]!==ta[0]||v[1]!==ta[1]||v[2]!==ta[2]||v[3]!==ta[3])m.scissor(v[0],v[1],v[2],v[3]),ta[0]=v[0],ta[1]=v[1],ta[2]=v[2],ta[3]=v[3];if(I[0]!==r[0]||I[1]!==r[1]||I[2]!==r[2])m.stencilFunc(I[0],I[1],I[2]),r[0]=I[0],r[1]=I[1],r[2]=I[2];la!==ha&&(m.stencilMask(la),u.stencil_mask=la);if(E[0]!==B[0]||E[1]!==B[1]||E[2]!==B[2]||E[3]!==B[3])m.stencilOpSeparate(E[0],E[1],E[2],E[3]),B[0]=E[0],B[1]=E[1],B[2]=
E[2],B[3]=E[3];if(aa[0]!==H[0]||aa[1]!==H[1]||aa[2]!==H[2]||aa[3]!==H[3])m.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]),H[0]=aa[0],H[1]=aa[1],H[2]=aa[2],H[3]=aa[3];if(F[0]!==D[0]||F[1]!==D[1]||F[2]!==D[2]||F[3]!==D[3])m.viewport(F[0],F[1],F[2],F[3]),D[0]=F[0],D[1]=F[1],D[2]=F[2],D[3]=F[3]},refresh:function(){var a,t,ba,L,fa,G,T,W,S,O,M,N,Q,R,qa,na;u.dirty=!1;t=b.blend_enable;ba=b.cull_enable;L=b.depth_enable;fa=b.dither;G=b.polygonOffset_enable;T=b.sample_alpha;W=b.sample_enable;S=b.scissor_enable;
O=b.stencil_enable;M=b.cull_face;N=b.depth_func;Q=b.depth_mask;R=b.frontFace;qa=b.lineWidth;na=b.stencil_mask;(a=q.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);q.cur=a;a=l[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(0,a.divisor);a=l[1];a.buffer?(m.enableVertexAttribArray(1),
m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(1,a.divisor);a=l[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(2,a.divisor);
a=l[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(3,a.divisor);a=l[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=
null);d.vertexAttribDivisorANGLE(4,a.divisor);a=l[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(5,a.divisor);a=l[6];a.buffer?(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),
m.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(6,a.divisor);a=l[7];a.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(7,a.divisor);a=l[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,
a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(8,a.divisor);a=l[9];a.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(9,a.divisor);a=l[10];a.buffer?(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(10,a.divisor);a=l[11];a.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(11,a.divisor);a=l[12];a.buffer?(m.enableVertexAttribArray(12),
m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(12,a.divisor);a=l[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(13,
a.divisor);a=l[14];a.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(14,a.divisor);a=l[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,
a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(15,a.divisor);f.currentVAO=null;f.setVAO(f.targetVAO);t?m.enable(3042):m.disable(3042);u.blend_enable=t;ba?m.enable(2884):m.disable(2884);u.cull_enable=ba;L?m.enable(2929):m.disable(2929);u.depth_enable=L;fa?m.enable(3024):m.disable(3024);u.dither=fa;G?m.enable(32823):m.disable(32823);u.polygonOffset_enable=G;T?m.enable(32926):m.disable(32926);u.sample_alpha=T;W?m.enable(32928):m.disable(32928);u.sample_enable=W;S?m.enable(3089):m.disable(3089);
u.scissor_enable=S;O?m.enable(2960):m.disable(2960);u.stencil_enable=O;m.blendColor(c[0],c[1],c[2],c[3]);h[0]=c[0];h[1]=c[1];h[2]=c[2];h[3]=c[3];m.blendEquationSeparate(C[0],C[1]);y[0]=C[0];y[1]=C[1];m.blendFuncSeparate(e[0],e[1],e[2],e[3]);k[0]=e[0];k[1]=e[1];k[2]=e[2];k[3]=e[3];m.colorMask(g[0],g[1],g[2],g[3]);n[0]=g[0];n[1]=g[1];n[2]=g[2];n[3]=g[3];m.cullFace(M);u.cull_face=M;m.depthFunc(N);u.depth_func=N;m.depthMask(Q);u.depth_mask=Q;m.depthRange(p[0],p[1]);w[0]=p[0];w[1]=p[1];m.frontFace(R);
u.frontFace=R;m.lineWidth(qa);u.lineWidth=qa;m.polygonOffset(z[0],z[1]);A[0]=z[0];A[1]=z[1];m.sampleCoverage(ma[0],ma[1]);x[0]=ma[0];x[1]=ma[1];m.scissor(v[0],v[1],v[2],v[3]);ta[0]=v[0];ta[1]=v[1];ta[2]=v[2];ta[3]=v[3];m.stencilFunc(I[0],I[1],I[2]);r[0]=I[0];r[1]=I[1];r[2]=I[2];m.stencilMask(na);u.stencil_mask=na;m.stencilOpSeparate(E[0],E[1],E[2],E[3]);B[0]=E[0];B[1]=E[1];B[2]=E[2];B[3]=E[3];m.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]);H[0]=aa[0];H[1]=aa[1];H[2]=aa[2];H[3]=aa[3];m.viewport(F[0],
F[1],F[2],F[3]);D[0]=F[0];D[1]=F[1];D[2]=F[2];D[3]=F[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,ta,I,r,E,B,aa,H,F,D,ka,t,ba,L,fa,G,T,W,S,O,M,N,Q,R,qa,na){var J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca,ia,X,va,Ka,Ga,eb,Y,Kc,bc,Ia,cc,Sb;J=a.attributes;K=a.buffer;da=a.context;U=a.current;la=
a.draw;ha=a.elements;Aa=a.extensions;xa=a.framebuffer;ca=a.gl;Da=a.isBufferArgs;ja=a.next;oa=a.shader;Ba=a.uniforms;Qa=a.vao;Fa=ja.blend_color;Hb=U.blend_color;Ua=ja.blend_equation;ga=U.blend_equation;ea=ja.blend_func;sa=U.blend_func;wa=ja.colorMask;Ea=U.colorMask;rb=ja.depth_range;Gb=U.depth_range;Z=ja.polygonOffset_offset;V=U.polygonOffset_offset;ya=ja.sample_coverage;Ha=U.sample_coverage;pa=ja.scissor_box;za=U.scissor_box;Ca=ja.stencil_func;ia=U.stencil_func;X=ja.stencil_opBack;va=U.stencil_opBack;
Ka=ja.stencil_opFront;Ga=U.stencil_opFront;eb=ja.viewport;Y=U.viewport;Kc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};bc={};bc.buffer=l;bc.divisor=1;Ia={};Ia.buffer=u;Ia.divisor=1;cc={};cc.buffer=q;cc.divisor=1;Sb={};Sb.buffer=m;Sb.divisor=1;return{batch:function(c,b){var a,h,f,g,n,p;a=xa.next;a!==xa.cur&&(a?ca.bindFramebuffer(36160,a.framebuffer):ca.bindFramebuffer(36160,null),xa.cur=a);if(U.dirty){var w,z,m,u,A,v,x,C,l,q,ea,P,ma,Fa,I,E,pa,ta,r,
ra,Ua,Ba,oa,eb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd;w=ja.dither;w!==U.dither&&(w?ca.enable(3024):ca.disable(3024),U.dither=w);z=ja.depth_func;z!==U.depth_func&&(ca.depthFunc(z),U.depth_func=z);m=rb[0];u=rb[1];if(m!==Gb[0]||u!==Gb[1])ca.depthRange(m,u),Gb[0]=m,Gb[1]=u;A=ja.depth_mask;A!==U.depth_mask&&(ca.depthMask(A),U.depth_mask=A);v=wa[0];x=wa[1];C=wa[2];l=wa[3];if(v!==Ea[0]||x!==Ea[1]||C!==Ea[2]||l!==Ea[3])ca.colorMask(v,x,C,l),Ea[0]=v,Ea[1]=x,Ea[2]=C,Ea[3]=l;q=ja.cull_enable;q!==U.cull_enable&&(q?ca.enable(2884):
ca.disable(2884),U.cull_enable=q);ea=ja.cull_face;ea!==U.cull_face&&(ca.cullFace(ea),U.cull_face=ea);P=ja.frontFace;P!==U.frontFace&&(ca.frontFace(P),U.frontFace=P);ma=ja.lineWidth;ma!==U.lineWidth&&(ca.lineWidth(ma),U.lineWidth=ma);Fa=ja.polygonOffset_enable;Fa!==U.polygonOffset_enable&&(Fa?ca.enable(32823):ca.disable(32823),U.polygonOffset_enable=Fa);I=Z[0];E=Z[1];if(I!==V[0]||E!==V[1])ca.polygonOffset(I,E),V[0]=I,V[1]=E;pa=ja.sample_alpha;pa!==U.sample_alpha&&(pa?ca.enable(32926):ca.disable(32926),
U.sample_alpha=pa);ta=ja.sample_enable;ta!==U.sample_enable&&(ta?ca.enable(32928):ca.disable(32928),U.sample_enable=ta);r=ya[0];ra=ya[1];if(r!==Ha[0]||ra!==Ha[1])ca.sampleCoverage(r,ra),Ha[0]=r,Ha[1]=ra;Ua=ja.stencil_enable;Ua!==U.stencil_enable&&(Ua?ca.enable(2960):ca.disable(2960),U.stencil_enable=Ua);Ba=ja.stencil_mask;Ba!==U.stencil_mask&&(ca.stencilMask(Ba),U.stencil_mask=Ba);oa=Ca[0];eb=Ca[1];Eb=Ca[2];if(oa!==ia[0]||eb!==ia[1]||Eb!==ia[2])ca.stencilFunc(oa,eb,Eb),ia[0]=oa,ia[1]=eb,ia[2]=Eb;
vc=Ka[0];zb=Ka[1];yc=Ka[2];Bb=Ka[3];if(vc!==Ga[0]||zb!==Ga[1]||yc!==Ga[2]||Bb!==Ga[3])ca.stencilOpSeparate(vc,zb,yc,Bb),Ga[0]=vc,Ga[1]=zb,Ga[2]=yc,Ga[3]=Bb;Lc=X[0];mc=X[1];Hc=X[2];hd=X[3];if(Lc!==va[0]||mc!==va[1]||Hc!==va[2]||hd!==va[3])ca.stencilOpSeparate(Lc,mc,Hc,hd),va[0]=Lc,va[1]=mc,va[2]=Hc,va[3]=hd}ca.blendColor(0,0,0,0);Hb[0]=0;Hb[1]=0;Hb[2]=0;Hb[3]=0;ca.enable(3042);U.blend_enable=!0;ca.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;ca.blendFuncSeparate(770,771,773,1);sa[0]=
770;sa[1]=771;sa[2]=773;sa[3]=1;ca.disable(2929);U.depth_enable=!1;ca.enable(3089);U.scissor_enable=!0;if(h=U.profile)f=performance.now(),d.count+=b;ca.useProgram(B.program);g=Aa.angle_instanced_arrays;var cd,Ec,fc,Ic,pc,rc,nc,qc;Qa.setVAO(null);cd=fa.location;Ec=J[cd];Ec.buffer||ca.enableVertexAttribArray(cd);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==y||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)ca.bindBuffer(34962,y.buffer),ca.vertexAttribPointer(cd,2,5126,!1,24,0),Ec.type=5126,Ec.size=
2,Ec.buffer=y,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(g.vertexAttribDivisorANGLE(cd,0),Ec.divisor=0);fc=T.location;Ic=J[fc];Ic.buffer||ca.enableVertexAttribArray(fc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==e||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(fc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=e,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(g.vertexAttribDivisorANGLE(fc,0),Ic.divisor=0);pc=t.location;
rc=J[pc];rc.buffer||ca.enableVertexAttribArray(pc);if(5126!==rc.type||2!==rc.size||rc.buffer!==k||!1!==rc.normalized||16!==rc.offset||24!==rc.stride)ca.bindBuffer(34962,k.buffer),ca.vertexAttribPointer(pc,2,5126,!1,24,16),rc.type=5126,rc.size=2,rc.buffer=k,rc.normalized=!1,rc.offset=16,rc.stride=24;0!==rc.divisor&&(g.vertexAttribDivisorANGLE(pc,0),rc.divisor=0);(nc=la.elements)?ca.bindBuffer(34963,nc.buffer.buffer):Qa.currentVAO&&(nc=ha.getElements(Qa.currentVAO.elements))&&ca.bindBuffer(34963,nc.buffer.buffer);
qc=la.offset;for(n=0;n<b;++n){p=c[n];var ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc;ob=p.viewport;Pc=ob.x|0;Zb=ob.y|0;gb="width"in ob?ob.width|0:da.framebufferWidth-Pc;Mb="height"in ob?ob.height|0:
da.framebufferHeight-Zb;ab=da.viewportWidth;da.viewportWidth=gb;jb=da.viewportHeight;da.viewportHeight=Mb;ca.viewport(Pc,Zb,gb,Mb);Y[0]=Pc;Y[1]=Zb;Y[2]=gb;Y[3]=Mb;Wa=p.viewport;Jc=Wa.x|0;Nb=Wa.y|0;Ib="width"in Wa?Wa.width|0:da.framebufferWidth-Jc;sc="height"in Wa?Wa.height|0:da.framebufferHeight-Nb;ca.scissor(Jc,Nb,Ib,sc);za[0]=Jc;za[1]=Nb;za[2]=Ib;za[3]=sc;Ob=aa.call(this,da,p,n);cc.offset=Ob;kb=!1;Fb=null;Cb=0;yb=!1;$b=hb=0;Pb=1;qb=0;Sa=5126;ib=jc=sb=Ub=0;Da(cc)?(kb=!0,Fb=K.createStream(34962,cc),
Sa=Fb.dtype):(Fb=K.getBuffer(cc))?Sa=Fb.dtype:"constant"in cc?(Pb=2,"number"===typeof cc.constant?(sb=cc.constant,jc=ib=Ub=0):(sb=0<cc.constant.length?cc.constant[0]:0,jc=1<cc.constant.length?cc.constant[1]:0,ib=2<cc.constant.length?cc.constant[2]:0,Ub=3<cc.constant.length?cc.constant[3]:0)):(Fb=Da(cc.buffer)?K.createStream(34962,cc.buffer):K.getBuffer(cc.buffer),Sa="type"in cc?Kc[cc.type]:Fb.dtype,yb=!!cc.normalized,$b=cc.size|0,hb=cc.offset|0,qb=cc.stride|0,Cb=cc.divisor|0);pb=O.location;Ja=J[pb];
if(1===Pb){Ja.buffer||ca.enableVertexAttribArray(pb);tb=$b||2;if(Ja.type!==Sa||Ja.size!==tb||Ja.buffer!==Fb||Ja.normalized!==yb||Ja.offset!==hb||Ja.stride!==qb)ca.bindBuffer(34962,Fb.buffer),ca.vertexAttribPointer(pb,tb,Sa,yb,qb,hb),Ja.type=Sa,Ja.size=tb,Ja.buffer=Fb,Ja.normalized=yb,Ja.offset=hb,Ja.stride=qb;Ja.divisor!==Cb&&(g.vertexAttribDivisorANGLE(pb,Cb),Ja.divisor=Cb)}else if(Ja.buffer&&(ca.disableVertexAttribArray(pb),Ja.buffer=null),Ja.x!==sb||Ja.y!==jc||Ja.z!==ib||Ja.w!==Ub)ca.vertexAttrib4f(pb,
sb,jc,ib,Ub),Ja.x=sb,Ja.y=jc,Ja.z=ib,Ja.w=Ub;La=H.call(this,da,p,n);Sb.offset=La;db=!1;fb=null;Na=0;lb=!1;vb=Xa=0;ub=1;Pa=0;Dc=5126;Ma=Db=Jb=Va=0;Da(Sb)?(db=!0,fb=K.createStream(34962,Sb),Dc=fb.dtype):(fb=K.getBuffer(Sb))?Dc=fb.dtype:"constant"in Sb?(ub=2,"number"===typeof Sb.constant?(Jb=Sb.constant,Db=Ma=Va=0):(Jb=0<Sb.constant.length?Sb.constant[0]:0,Db=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?Sb.constant[2]:0,Va=3<Sb.constant.length?Sb.constant[3]:0)):(fb=Da(Sb.buffer)?K.createStream(34962,
Sb.buffer):K.getBuffer(Sb.buffer),Dc="type"in Sb?Kc[Sb.type]:fb.dtype,lb=!!Sb.normalized,vb=Sb.size|0,Xa=Sb.offset|0,Pa=Sb.stride|0,Na=Sb.divisor|0);zd=M.location;Za=J[zd];if(1===ub){Za.buffer||ca.enableVertexAttribArray(zd);Kb=vb||2;if(Za.type!==Dc||Za.size!==Kb||Za.buffer!==fb||Za.normalized!==lb||Za.offset!==Xa||Za.stride!==Pa)ca.bindBuffer(34962,fb.buffer),ca.vertexAttribPointer(zd,Kb,Dc,lb,Pa,Xa),Za.type=Dc,Za.size=Kb,Za.buffer=fb,Za.normalized=lb,Za.offset=Xa,Za.stride=Pa;Za.divisor!==Na&&(g.vertexAttribDivisorANGLE(zd,
Na),Za.divisor=Na)}else if(Za.buffer&&(ca.disableVertexAttribArray(zd),Za.buffer=null),Za.x!==Jb||Za.y!==Db||Za.z!==Ma||Za.w!==Va)ca.vertexAttrib4f(zd,Jb,Db,Ma,Va),Za.x=Jb,Za.y=Db,Za.z=Ma,Za.w=Va;Lb=F.call(this,da,p,n);Ia.offset=Lb;mb=!1;Oa=null;ac=0;Ra=!1;xb=wb=0;Ta=1;nb=0;gc=5126;kc=bb=wc=Bc=0;Da(Ia)?(mb=!0,Oa=K.createStream(34962,Ia),gc=Oa.dtype):(Oa=K.getBuffer(Ia))?gc=Oa.dtype:"constant"in Ia?(Ta=2,"number"===typeof Ia.constant?(wc=Ia.constant,bb=kc=Bc=0):(wc=0<Ia.constant.length?Ia.constant[0]:
0,bb=1<Ia.constant.length?Ia.constant[1]:0,kc=2<Ia.constant.length?Ia.constant[2]:0,Bc=3<Ia.constant.length?Ia.constant[3]:0)):(Oa=Da(Ia.buffer)?K.createStream(34962,Ia.buffer):K.getBuffer(Ia.buffer),gc="type"in Ia?Kc[Ia.type]:Oa.dtype,Ra=!!Ia.normalized,xb=Ia.size|0,wb=Ia.offset|0,nb=Ia.stride|0,ac=Ia.divisor|0);Mc=G.location;Ya=J[Mc];if(1===Ta){Ya.buffer||ca.enableVertexAttribArray(Mc);nd=xb||4;if(Ya.type!==gc||Ya.size!==nd||Ya.buffer!==Oa||Ya.normalized!==Ra||Ya.offset!==wb||Ya.stride!==nb)ca.bindBuffer(34962,
Oa.buffer),ca.vertexAttribPointer(Mc,nd,gc,Ra,nb,wb),Ya.type=gc,Ya.size=nd,Ya.buffer=Oa,Ya.normalized=Ra,Ya.offset=wb,Ya.stride=nb;Ya.divisor!==ac&&(g.vertexAttribDivisorANGLE(Mc,ac),Ya.divisor=ac)}else if(Ya.buffer&&(ca.disableVertexAttribArray(Mc),Ya.buffer=null),Ya.x!==wc||Ya.y!==bb||Ya.z!==kc||Ya.w!==Bc)ca.vertexAttrib4f(Mc,wc,bb,kc,Bc),Ya.x=wc,Ya.y=bb,Ya.z=kc,Ya.w=Bc;Ab=D.call(this,da,p,n);bc.offset=Ab;$a=!1;Wb=null;uc=0;Xb=!1;Nc=Qb=0;Rb=1;Od=0;Fc=5126;vd=Yc=Qc=sd=0;Da(bc)?($a=!0,Wb=K.createStream(34962,
bc),Fc=Wb.dtype):(Wb=K.getBuffer(bc))?Fc=Wb.dtype:"constant"in bc?(Rb=2,"number"===typeof bc.constant?(Qc=bc.constant,Yc=vd=sd=0):(Qc=0<bc.constant.length?bc.constant[0]:0,Yc=1<bc.constant.length?bc.constant[1]:0,vd=2<bc.constant.length?bc.constant[2]:0,sd=3<bc.constant.length?bc.constant[3]:0)):(Wb=Da(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),Fc="type"in bc?Kc[bc.type]:Wb.dtype,Xb=!!bc.normalized,Nc=bc.size|0,Qb=bc.offset|0,Od=bc.stride|0,uc=bc.divisor|0);oc=L.location;xc=
J[oc];if(1===Rb){xc.buffer||ca.enableVertexAttribArray(oc);hc=Nc||4;if(xc.type!==Fc||xc.size!==hc||xc.buffer!==Wb||xc.normalized!==Xb||xc.offset!==Qb||xc.stride!==Od)ca.bindBuffer(34962,Wb.buffer),ca.vertexAttribPointer(oc,hc,Fc,Xb,Od,Qb),xc.type=Fc,xc.size=hc,xc.buffer=Wb,xc.normalized=Xb,xc.offset=Qb,xc.stride=Od;xc.divisor!==uc&&(g.vertexAttribDivisorANGLE(oc,uc),xc.divisor=uc)}else if(xc.buffer&&(ca.disableVertexAttribArray(oc),xc.buffer=null),xc.x!==Qc||xc.y!==Yc||xc.z!==vd||xc.w!==sd)ca.vertexAttrib4f(oc,
Qc,Yc,vd,sd),xc.x=Qc,xc.y=Yc,xc.z=vd,xc.w=sd;cb=ka.call(this,da,p,n);tc=cb[0];Yb=cb[1];ic=cb[2];Cc=cb[3];n&&Tb===tc&&ec===Yb&&zc===ic&&dd===Cc||(Tb=tc,ec=Yb,zc=ic,dd=Cc,ca.uniform4f(na.location,tc,Yb,ic,Cc));Tc=p.lineWidth;n&&Uc===Tc||(Uc=Tc,ca.uniform1f(W.location,Tc));Vc=p.capSize;n&&Zc===Vc||(Zc=Vc,ca.uniform1f(ba.location,Vc));od=p.scale;ed=od[0];lc=od[1];n&&$c===ed&&dc===lc||($c=ed,dc=lc,ca.uniform2f(N.location,ed,lc));ad=p.scaleFract;Xc=ad[0];Ac=ad[1];n&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,ca.uniform2f(Q.location,
Xc,Ac));Dd=p.translate;ze=Dd[0];kd=Dd[1];n&&xd===ze&&Fe===kd||(xd=ze,Fe=kd,ca.uniform2f(R.location,ze,kd));Td=p.translateFract;he=Td[0];Ud=Td[1];n&&ee===he&&Nd===Ud||(ee=he,Nd=Ud,ca.uniform2f(qa.location,he,Ud));Kd=p.opacity;n&&qd===Kd||(qd=Kd,ca.uniform1f(S.location,Kd));Wc=p.count;0<Wc?nc?g.drawElementsInstancedANGLE(4,36,nc.type,qc<<(nc.type-5121>>1),Wc):g.drawArraysInstancedANGLE(4,qc,36,Wc):0>Wc&&(nc?ca.drawElements(4,36,nc.type,qc<<(nc.type-5121>>1)):ca.drawArrays(4,qc,36));da.viewportWidth=
ab;da.viewportHeight=jb;kb&&K.destroyStream(Fb);db&&K.destroyStream(fb);mb&&K.destroyStream(Oa);$a&&K.destroyStream(Wb)}U.dirty=!0;Qa.setVAO(null);h&&(d.cpuTime+=performance.now()-f)},draw:function(a){var n,p,w,z,m,u,A,v,x,l,q,ea,P,ma,B,Fa,I,E,D,H,pa,ta,F,r,ra,Ua,Ba,aa,oa,ka,eb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac;n=xa.next;n!==xa.cur&&
(n?ca.bindFramebuffer(36160,n.framebuffer):ca.bindFramebuffer(36160,null),xa.cur=n);if(U.dirty){var Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb;Ra=ja.dither;Ra!==U.dither&&(Ra?ca.enable(3024):ca.disable(3024),U.dither=Ra);wb=ja.depth_func;wb!==U.depth_func&&(ca.depthFunc(wb),U.depth_func=wb);xb=rb[0];Ta=rb[1];if(xb!==Gb[0]||Ta!==Gb[1])ca.depthRange(xb,Ta),Gb[0]=xb,Gb[1]=Ta;nb=ja.depth_mask;nb!==U.depth_mask&&(ca.depthMask(nb),U.depth_mask=nb);
gc=wa[0];Bc=wa[1];wc=wa[2];bb=wa[3];if(gc!==Ea[0]||Bc!==Ea[1]||wc!==Ea[2]||bb!==Ea[3])ca.colorMask(gc,Bc,wc,bb),Ea[0]=gc,Ea[1]=Bc,Ea[2]=wc,Ea[3]=bb;kc=ja.cull_enable;kc!==U.cull_enable&&(kc?ca.enable(2884):ca.disable(2884),U.cull_enable=kc);Mc=ja.cull_face;Mc!==U.cull_face&&(ca.cullFace(Mc),U.cull_face=Mc);Ya=ja.frontFace;Ya!==U.frontFace&&(ca.frontFace(Ya),U.frontFace=Ya);nd=ja.lineWidth;nd!==U.lineWidth&&(ca.lineWidth(nd),U.lineWidth=nd);Ab=ja.polygonOffset_enable;Ab!==U.polygonOffset_enable&&(Ab?
ca.enable(32823):ca.disable(32823),U.polygonOffset_enable=Ab);$a=Z[0];Wb=Z[1];if($a!==V[0]||Wb!==V[1])ca.polygonOffset($a,Wb),V[0]=$a,V[1]=Wb;uc=ja.sample_alpha;uc!==U.sample_alpha&&(uc?ca.enable(32926):ca.disable(32926),U.sample_alpha=uc);Xb=ja.sample_enable;Xb!==U.sample_enable&&(Xb?ca.enable(32928):ca.disable(32928),U.sample_enable=Xb);Qb=ya[0];Nc=ya[1];if(Qb!==Ha[0]||Nc!==Ha[1])ca.sampleCoverage(Qb,Nc),Ha[0]=Qb,Ha[1]=Nc;Rb=ja.stencil_enable;Rb!==U.stencil_enable&&(Rb?ca.enable(2960):ca.disable(2960),
U.stencil_enable=Rb);Od=ja.stencil_mask;Od!==U.stencil_mask&&(ca.stencilMask(Od),U.stencil_mask=Od);Fc=Ca[0];sd=Ca[1];Qc=Ca[2];if(Fc!==ia[0]||sd!==ia[1]||Qc!==ia[2])ca.stencilFunc(Fc,sd,Qc),ia[0]=Fc,ia[1]=sd,ia[2]=Qc;Yc=Ka[0];vd=Ka[1];oc=Ka[2];xc=Ka[3];if(Yc!==Ga[0]||vd!==Ga[1]||oc!==Ga[2]||xc!==Ga[3])ca.stencilOpSeparate(Yc,vd,oc,xc),Ga[0]=Yc,Ga[1]=vd,Ga[2]=oc,Ga[3]=xc;hc=X[0];cb=X[1];tc=X[2];Tb=X[3];if(hc!==va[0]||cb!==va[1]||tc!==va[2]||Tb!==va[3])ca.stencilOpSeparate(hc,cb,tc,Tb),va[0]=hc,va[1]=
cb,va[2]=tc,va[3]=Tb}p=a.viewport;w=p.x|0;z=p.y|0;m="width"in p?p.width|0:da.framebufferWidth-w;u="height"in p?p.height|0:da.framebufferHeight-z;A=da.viewportWidth;da.viewportWidth=m;v=da.viewportHeight;da.viewportHeight=u;ca.viewport(w,z,m,u);Y[0]=w;Y[1]=z;Y[2]=m;Y[3]=u;ca.blendColor(0,0,0,0);Hb[0]=0;Hb[1]=0;Hb[2]=0;Hb[3]=0;ca.enable(3042);U.blend_enable=!0;ca.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;ca.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;ca.disable(2929);
U.depth_enable=!1;x=a.viewport;l=x.x|0;q=x.y|0;ea="width"in x?x.width|0:da.framebufferWidth-l;P="height"in x?x.height|0:da.framebufferHeight-q;ca.scissor(l,q,ea,P);za[0]=l;za[1]=q;za[2]=ea;za[3]=P;ca.enable(3089);U.scissor_enable=!0;if(ma=U.profile)B=performance.now(),d.count++;ca.useProgram(b.program);Fa=Aa.angle_instanced_arrays;Qa.setVAO(null);I=f.call(this,da,a,0);cc.offset=I;E=!1;D=null;H=0;pa=!1;F=ta=0;r=1;ra=0;Ua=5126;ka=oa=aa=Ba=0;Da(cc)?(E=!0,D=K.createStream(34962,cc),Ua=D.dtype):(D=K.getBuffer(cc))?
Ua=D.dtype:"constant"in cc?(r=2,"number"===typeof cc.constant?(aa=cc.constant,oa=ka=Ba=0):(aa=0<cc.constant.length?cc.constant[0]:0,oa=1<cc.constant.length?cc.constant[1]:0,ka=2<cc.constant.length?cc.constant[2]:0,Ba=3<cc.constant.length?cc.constant[3]:0)):(D=Da(cc.buffer)?K.createStream(34962,cc.buffer):K.getBuffer(cc.buffer),Ua="type"in cc?Kc[cc.type]:D.dtype,pa=!!cc.normalized,F=cc.size|0,ta=cc.offset|0,ra=cc.stride|0,H=cc.divisor|0);eb=O.location;Eb=J[eb];if(1===r){Eb.buffer||ca.enableVertexAttribArray(eb);
vc=F||2;if(Eb.type!==Ua||Eb.size!==vc||Eb.buffer!==D||Eb.normalized!==pa||Eb.offset!==ta||Eb.stride!==ra)ca.bindBuffer(34962,D.buffer),ca.vertexAttribPointer(eb,vc,Ua,pa,ra,ta),Eb.type=Ua,Eb.size=vc,Eb.buffer=D,Eb.normalized=pa,Eb.offset=ta,Eb.stride=ra;Eb.divisor!==H&&(Fa.vertexAttribDivisorANGLE(eb,H),Eb.divisor=H)}else if(Eb.buffer&&(ca.disableVertexAttribArray(eb),Eb.buffer=null),Eb.x!==aa||Eb.y!==oa||Eb.z!==ka||Eb.w!==Ba)ca.vertexAttrib4f(eb,aa,oa,ka,Ba),Eb.x=aa,Eb.y=oa,Eb.z=ka,Eb.w=Ba;zb=c.call(this,
da,a,0);Sb.offset=zb;yc=!1;Bb=null;Lc=0;mc=!1;hd=Hc=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Ic=0;Da(Sb)?(yc=!0,Bb=K.createStream(34962,Sb),fc=Bb.dtype):(Bb=K.getBuffer(Sb))?fc=Bb.dtype:"constant"in Sb?(cd=2,"number"===typeof Sb.constant?(pc=Sb.constant,rc=nc=Ic=0):(pc=0<Sb.constant.length?Sb.constant[0]:0,rc=1<Sb.constant.length?Sb.constant[1]:0,nc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Bb=Da(Sb.buffer)?K.createStream(34962,Sb.buffer):K.getBuffer(Sb.buffer),fc="type"in
Sb?Kc[Sb.type]:Bb.dtype,mc=!!Sb.normalized,hd=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Lc=Sb.divisor|0);qc=M.location;ob=J[qc];if(1===cd){ob.buffer||ca.enableVertexAttribArray(qc);Pc=hd||2;if(ob.type!==fc||ob.size!==Pc||ob.buffer!==Bb||ob.normalized!==mc||ob.offset!==Hc||ob.stride!==Ec)ca.bindBuffer(34962,Bb.buffer),ca.vertexAttribPointer(qc,Pc,fc,mc,Ec,Hc),ob.type=fc,ob.size=Pc,ob.buffer=Bb,ob.normalized=mc,ob.offset=Hc,ob.stride=Ec;ob.divisor!==Lc&&(Fa.vertexAttribDivisorANGLE(qc,Lc),ob.divisor=
Lc)}else if(ob.buffer&&(ca.disableVertexAttribArray(qc),ob.buffer=null),ob.x!==pc||ob.y!==rc||ob.z!==nc||ob.w!==Ic)ca.vertexAttrib4f(qc,pc,rc,nc,Ic),ob.x=pc,ob.y=rc,ob.z=nc,ob.w=Ic;Zb=h.call(this,da,a,0);Ia.offset=Zb;gb=!1;Mb=null;ab=0;jb=!1;Jc=Wa=0;Nb=1;Ib=0;sc=5126;Cb=Fb=kb=Ob=0;Da(Ia)?(gb=!0,Mb=K.createStream(34962,Ia),sc=Mb.dtype):(Mb=K.getBuffer(Ia))?sc=Mb.dtype:"constant"in Ia?(Nb=2,"number"===typeof Ia.constant?(kb=Ia.constant,Fb=Cb=Ob=0):(kb=0<Ia.constant.length?Ia.constant[0]:0,Fb=1<Ia.constant.length?
Ia.constant[1]:0,Cb=2<Ia.constant.length?Ia.constant[2]:0,Ob=3<Ia.constant.length?Ia.constant[3]:0)):(Mb=Da(Ia.buffer)?K.createStream(34962,Ia.buffer):K.getBuffer(Ia.buffer),sc="type"in Ia?Kc[Ia.type]:Mb.dtype,jb=!!Ia.normalized,Jc=Ia.size|0,Wa=Ia.offset|0,Ib=Ia.stride|0,ab=Ia.divisor|0);yb=G.location;hb=J[yb];if(1===Nb){hb.buffer||ca.enableVertexAttribArray(yb);$b=Jc||4;if(hb.type!==sc||hb.size!==$b||hb.buffer!==Mb||hb.normalized!==jb||hb.offset!==Wa||hb.stride!==Ib)ca.bindBuffer(34962,Mb.buffer),
ca.vertexAttribPointer(yb,$b,sc,jb,Ib,Wa),hb.type=sc,hb.size=$b,hb.buffer=Mb,hb.normalized=jb,hb.offset=Wa,hb.stride=Ib;hb.divisor!==ab&&(Fa.vertexAttribDivisorANGLE(yb,ab),hb.divisor=ab)}else if(hb.buffer&&(ca.disableVertexAttribArray(yb),hb.buffer=null),hb.x!==kb||hb.y!==Fb||hb.z!==Cb||hb.w!==Ob)ca.vertexAttrib4f(yb,kb,Fb,Cb,Ob),hb.x=kb,hb.y=Fb,hb.z=Cb,hb.w=Ob;Pb=C.call(this,da,a,0);bc.offset=Pb;qb=!1;Sa=null;Ub=0;sb=!1;ib=jc=0;pb=1;Ja=0;tb=5126;Na=fb=db=La=0;Da(bc)?(qb=!0,Sa=K.createStream(34962,
bc),tb=Sa.dtype):(Sa=K.getBuffer(bc))?tb=Sa.dtype:"constant"in bc?(pb=2,"number"===typeof bc.constant?(db=bc.constant,fb=Na=La=0):(db=0<bc.constant.length?bc.constant[0]:0,fb=1<bc.constant.length?bc.constant[1]:0,Na=2<bc.constant.length?bc.constant[2]:0,La=3<bc.constant.length?bc.constant[3]:0)):(Sa=Da(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),tb="type"in bc?Kc[bc.type]:Sa.dtype,sb=!!bc.normalized,ib=bc.size|0,jc=bc.offset|0,Ja=bc.stride|0,Ub=bc.divisor|0);lb=L.location;Xa=
J[lb];if(1===pb){Xa.buffer||ca.enableVertexAttribArray(lb);vb=ib||4;if(Xa.type!==tb||Xa.size!==vb||Xa.buffer!==Sa||Xa.normalized!==sb||Xa.offset!==jc||Xa.stride!==Ja)ca.bindBuffer(34962,Sa.buffer),ca.vertexAttribPointer(lb,vb,tb,sb,Ja,jc),Xa.type=tb,Xa.size=vb,Xa.buffer=Sa,Xa.normalized=sb,Xa.offset=jc,Xa.stride=Ja;Xa.divisor!==Ub&&(Fa.vertexAttribDivisorANGLE(lb,Ub),Xa.divisor=Ub)}else if(Xa.buffer&&(ca.disableVertexAttribArray(lb),Xa.buffer=null),Xa.x!==db||Xa.y!==fb||Xa.z!==Na||Xa.w!==La)ca.vertexAttrib4f(lb,
db,fb,Na,La),Xa.x=db,Xa.y=fb,Xa.z=Na,Xa.w=La;ub=fa.location;Pa=J[ub];Pa.buffer||ca.enableVertexAttribArray(ub);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==y||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ca.bindBuffer(34962,y.buffer),ca.vertexAttribPointer(ub,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=y,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(Fa.vertexAttribDivisorANGLE(ub,0),Pa.divisor=0);Dc=T.location;Va=J[Dc];Va.buffer||ca.enableVertexAttribArray(Dc);if(5126!==Va.type||
2!==Va.size||Va.buffer!==e||!1!==Va.normalized||8!==Va.offset||24!==Va.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(Dc,2,5126,!1,24,8),Va.type=5126,Va.size=2,Va.buffer=e,Va.normalized=!1,Va.offset=8,Va.stride=24;0!==Va.divisor&&(Fa.vertexAttribDivisorANGLE(Dc,0),Va.divisor=0);Jb=t.location;Db=J[Jb];Db.buffer||ca.enableVertexAttribArray(Jb);if(5126!==Db.type||2!==Db.size||Db.buffer!==k||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)ca.bindBuffer(34962,k.buffer),ca.vertexAttribPointer(Jb,
2,5126,!1,24,16),Db.type=5126,Db.size=2,Db.buffer=k,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(Fa.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Ma=g.call(this,da,a,0);ca.uniform4f(na.location,Ma[0],Ma[1],Ma[2],Ma[3]);ca.uniform1f(W.location,a.lineWidth);ca.uniform1f(ba.location,a.capSize);zd=a.scale;ca.uniform2f(N.location,zd[0],zd[1]);Za=a.scaleFract;ca.uniform2f(Q.location,Za[0],Za[1]);Kb=a.translate;ca.uniform2f(R.location,Kb[0],Kb[1]);Lb=a.translateFract;ca.uniform2f(qa.location,
Lb[0],Lb[1]);ca.uniform1f(S.location,a.opacity);(mb=la.elements)?ca.bindBuffer(34963,mb.buffer.buffer):Qa.currentVAO&&(mb=ha.getElements(Qa.currentVAO.elements))&&ca.bindBuffer(34963,mb.buffer.buffer);Oa=la.offset;ac=a.count;0<ac?mb?Fa.drawElementsInstancedANGLE(4,36,mb.type,Oa<<(mb.type-5121>>1),ac):Fa.drawArraysInstancedANGLE(4,Oa,36,ac):0>ac&&(mb?ca.drawElements(4,36,mb.type,Oa<<(mb.type-5121>>1)):ca.drawArrays(4,Oa,36));U.dirty=!0;Qa.setVAO(null);da.viewportWidth=A;da.viewportHeight=v;ma&&(d.cpuTime+=
performance.now()-B);E&&K.destroyStream(D);yc&&K.destroyStream(Bb);gb&&K.destroyStream(Mb);qb&&K.destroyStream(Sa)},scope:function(c,b,a){var h,f,g,t,m,u,C,l,q,ga,N,P,J,V,B,sa,ya,Qa,D,Ha,O,H,Hb,M,ca,Z,S,F,ia,R,X,wa,Q,L,za,Ca,Y,qa,ha,xa,T,va,W,aa,ba,Ea,ka,na,Gb,G,fa,Aa,rb,Ga,Ka,ua,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,
ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd;h=c.viewport;f=h.x|0;g=h.y|0;t="width"in h?h.width|0:da.framebufferWidth-f;m="height"in h?h.height|0:da.framebufferHeight-g;u=da.viewportWidth;da.viewportWidth=t;C=da.viewportHeight;da.viewportHeight=m;l=eb[0];eb[0]=f;q=eb[1];eb[1]=g;ga=eb[2];eb[2]=t;N=eb[3];eb[3]=m;P=Fa[0];Fa[0]=0;J=Fa[1];Fa[1]=
0;V=Fa[2];Fa[2]=0;B=Fa[3];Fa[3]=0;sa=ja.blend_enable;ja.blend_enable=!0;ya=Ua[0];Ua[0]=32774;Qa=Ua[1];Ua[1]=32774;D=ea[0];ea[0]=770;Ha=ea[1];ea[1]=771;O=ea[2];ea[2]=773;H=ea[3];ea[3]=1;Hb=ja.depth_enable;ja.depth_enable=!1;M=c.viewport;ca=M.x|0;Z=M.y|0;S="width"in M?M.width|0:da.framebufferWidth-ca;F="height"in M?M.height|0:da.framebufferHeight-Z;ia=pa[0];pa[0]=ca;R=pa[1];pa[1]=Z;X=pa[2];pa[2]=S;wa=pa[3];pa[3]=F;Q=ja.scissor_enable;ja.scissor_enable=!0;if(L=U.profile)za=performance.now(),d.count++;
Ca=la.count;la.count=36;Y=c.count;qa=la.instances;la.instances=Y;ha=la.primitive;la.primitive=4;xa=c.capSize;T=Ba[5];Ba[5]=xa;va=c.lineWidth;W=Ba[4];Ba[4]=va;aa=c.opacity;ba=Ba[10];Ba[10]=aa;Ea=c.range;ka=Ba[18];Ba[18]=Ea;na=c.scale;Gb=Ba[6];Ba[6]=na;G=c.scaleFract;fa=Ba[7];Ba[7]=G;Aa=c.translate;rb=Ba[8];Ba[8]=Aa;Ga=c.translateFract;Ka=Ba[9];Ba[9]=Ga;ua=n.call(this,da,c,a);Ib=Ba[3];Ba[3]=ua;sc=p.buffer;p.buffer=k;Ob=p.divisor;p.divisor=0;kb=p.normalized;p.normalized=!1;Fb=p.offset;p.offset=16;Cb=
p.size;p.size=0;yb=p.state;p.state=1;hb=p.stride;p.stride=24;$b=p.type;p.type=5126;Pb=p.w;p.w=0;qb=p.x;p.x=0;Sa=p.y;p.y=0;Ub=p.z;p.z=0;sb=w.call(this,da,c,a);bc.offset=sb;jc=!1;ib=null;pb=0;Ja=!1;La=tb=0;db=1;fb=0;Na=5126;ub=vb=Xa=lb=0;Da(bc)?(jc=!0,ib=K.createStream(34962,bc),Na=ib.dtype):(ib=K.getBuffer(bc))?Na=ib.dtype:"constant"in bc?(db=2,"number"===typeof bc.constant?(Xa=bc.constant,vb=ub=lb=0):(Xa=0<bc.constant.length?bc.constant[0]:0,vb=1<bc.constant.length?bc.constant[1]:0,ub=2<bc.constant.length?
bc.constant[2]:0,lb=3<bc.constant.length?bc.constant[3]:0)):(ib=Da(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),Na="type"in bc?Kc[bc.type]:ib.dtype,Ja=!!bc.normalized,La=bc.size|0,tb=bc.offset|0,fb=bc.stride|0,pb=bc.divisor|0);Pa=z.buffer;z.buffer=ib;Dc=z.divisor;z.divisor=pb;Va=z.normalized;z.normalized=Ja;Jb=z.offset;z.offset=tb;Db=z.size;z.size=La;Ma=z.state;z.state=db;zd=z.stride;z.stride=fb;Za=z.type;z.type=Na;Kb=z.w;z.w=lb;Lb=z.x;z.x=Xa;mb=z.y;z.y=vb;Oa=z.z;z.z=ub;ac=A.buffer;
A.buffer=y;Ra=A.divisor;A.divisor=0;wb=A.normalized;A.normalized=!1;xb=A.offset;A.offset=0;Ta=A.size;A.size=0;nb=A.state;A.state=1;gc=A.stride;A.stride=24;Bc=A.type;A.type=5126;wc=A.w;A.w=0;bb=A.x;A.x=0;kc=A.y;A.y=0;Mc=A.z;A.z=0;Ya=ma.call(this,da,c,a);Ia.offset=Ya;nd=!1;Ab=null;$a=0;Wb=!1;Xb=uc=0;Qb=1;Nc=0;Rb=5126;Qc=sd=Fc=Od=0;Da(Ia)?(nd=!0,Ab=K.createStream(34962,Ia),Rb=Ab.dtype):(Ab=K.getBuffer(Ia))?Rb=Ab.dtype:"constant"in Ia?(Qb=2,"number"===typeof Ia.constant?(Fc=Ia.constant,sd=Qc=Od=0):(Fc=
0<Ia.constant.length?Ia.constant[0]:0,sd=1<Ia.constant.length?Ia.constant[1]:0,Qc=2<Ia.constant.length?Ia.constant[2]:0,Od=3<Ia.constant.length?Ia.constant[3]:0)):(Ab=Da(Ia.buffer)?K.createStream(34962,Ia.buffer):K.getBuffer(Ia.buffer),Rb="type"in Ia?Kc[Ia.type]:Ab.dtype,Wb=!!Ia.normalized,Xb=Ia.size|0,uc=Ia.offset|0,Nc=Ia.stride|0,$a=Ia.divisor|0);Yc=x.buffer;x.buffer=Ab;vd=x.divisor;x.divisor=$a;oc=x.normalized;x.normalized=Wb;xc=x.offset;x.offset=uc;hc=x.size;x.size=Xb;cb=x.state;x.state=Qb;tc=
x.stride;x.stride=Nc;Tb=x.type;x.type=Rb;Yb=x.w;x.w=Od;ec=x.x;x.x=Fc;ic=x.y;x.y=sd;zc=x.z;x.z=Qc;Cc=v.buffer;v.buffer=e;dd=v.divisor;v.divisor=0;Tc=v.normalized;v.normalized=!1;Uc=v.offset;v.offset=8;Vc=v.size;v.size=0;Zc=v.state;v.state=1;od=v.stride;v.stride=24;ed=v.type;v.type=5126;$c=v.w;v.w=0;lc=v.x;v.x=0;dc=v.y;v.y=0;ad=v.z;v.z=0;Xc=ta.call(this,da,c,a);cc.offset=Xc;fd=!1;Ac=null;jd=0;Dd=!1;xd=ze=0;kd=1;Fe=0;Td=5126;Nd=Ud=ee=he=0;Da(cc)?(fd=!0,Ac=K.createStream(34962,cc),Td=Ac.dtype):(Ac=K.getBuffer(cc))?
Td=Ac.dtype:"constant"in cc?(kd=2,"number"===typeof cc.constant?(ee=cc.constant,Ud=Nd=he=0):(ee=0<cc.constant.length?cc.constant[0]:0,Ud=1<cc.constant.length?cc.constant[1]:0,Nd=2<cc.constant.length?cc.constant[2]:0,he=3<cc.constant.length?cc.constant[3]:0)):(Ac=Da(cc.buffer)?K.createStream(34962,cc.buffer):K.getBuffer(cc.buffer),Td="type"in cc?Kc[cc.type]:Ac.dtype,Dd=!!cc.normalized,xd=cc.size|0,ze=cc.offset|0,Fe=cc.stride|0,jd=cc.divisor|0);Kd=I.buffer;I.buffer=Ac;qd=I.divisor;I.divisor=jd;Wc=I.normalized;
I.normalized=Dd;wd=I.offset;I.offset=ze;ud=I.size;I.size=xd;ld=I.state;I.state=kd;yd=I.stride;I.stride=Fe;Fd=I.type;I.type=Td;Hd=I.w;I.w=he;ke=I.x;I.x=ee;ne=I.y;I.y=Ud;ue=I.z;I.z=Nd;oe=r.call(this,da,c,a);Sb.offset=oe;le=!1;ie=null;ve=0;fe=!1;Rc=pe=0;id=1;we=0;se=5126;Xd=Wd=Vd=Qd=0;Da(Sb)?(le=!0,ie=K.createStream(34962,Sb),se=ie.dtype):(ie=K.getBuffer(Sb))?se=ie.dtype:"constant"in Sb?(id=2,"number"===typeof Sb.constant?(Vd=Sb.constant,Wd=Xd=Qd=0):(Vd=0<Sb.constant.length?Sb.constant[0]:0,Wd=1<Sb.constant.length?
Sb.constant[1]:0,Xd=2<Sb.constant.length?Sb.constant[2]:0,Qd=3<Sb.constant.length?Sb.constant[3]:0)):(ie=Da(Sb.buffer)?K.createStream(34962,Sb.buffer):K.getBuffer(Sb.buffer),se="type"in Sb?Kc[Sb.type]:ie.dtype,fe=!!Sb.normalized,Rc=Sb.size|0,pe=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);qe=E.buffer;E.buffer=ie;Ce=E.divisor;E.divisor=ve;Ge=E.normalized;E.normalized=fe;te=E.offset;E.offset=pe;Ve=E.size;E.size=Rc;We=E.state;E.state=id;Re=E.stride;E.stride=we;xe=E.type;E.type=se;Je=E.w;E.w=Qd;Le=E.x;
E.x=Vd;Me=E.y;E.y=Wd;Ne=E.z;E.z=Xd;Ke=oa.vert;oa.vert=2;Rd=oa.frag;oa.frag=1;U.dirty=!0;b(da,c,a);da.viewportWidth=u;da.viewportHeight=C;eb[0]=l;eb[1]=q;eb[2]=ga;eb[3]=N;Fa[0]=P;Fa[1]=J;Fa[2]=V;Fa[3]=B;ja.blend_enable=sa;Ua[0]=ya;Ua[1]=Qa;ea[0]=D;ea[1]=Ha;ea[2]=O;ea[3]=H;ja.depth_enable=Hb;pa[0]=ia;pa[1]=R;pa[2]=X;pa[3]=wa;ja.scissor_enable=Q;L&&(d.cpuTime+=performance.now()-za);la.count=Ca;la.instances=qa;la.primitive=ha;Ba[5]=T;Ba[4]=W;Ba[10]=ba;Ba[18]=ka;Ba[6]=Gb;Ba[7]=fa;Ba[8]=rb;Ba[9]=Ka;Ba[3]=
Ib;p.buffer=sc;p.divisor=Ob;p.normalized=kb;p.offset=Fb;p.size=Cb;p.state=yb;p.stride=hb;p.type=$b;p.w=Pb;p.x=qb;p.y=Sa;p.z=Ub;jc&&K.destroyStream(ib);z.buffer=Pa;z.divisor=Dc;z.normalized=Va;z.offset=Jb;z.size=Db;z.state=Ma;z.stride=zd;z.type=Za;z.w=Kb;z.x=Lb;z.y=mb;z.z=Oa;A.buffer=ac;A.divisor=Ra;A.normalized=wb;A.offset=xb;A.size=Ta;A.state=nb;A.stride=gc;A.type=Bc;A.w=wc;A.x=bb;A.y=kc;A.z=Mc;nd&&K.destroyStream(Ab);x.buffer=Yc;x.divisor=vd;x.normalized=oc;x.offset=xc;x.size=hc;x.state=cb;x.stride=
tc;x.type=Tb;x.w=Yb;x.x=ec;x.y=ic;x.z=zc;v.buffer=Cc;v.divisor=dd;v.normalized=Tc;v.offset=Uc;v.size=Vc;v.state=Zc;v.stride=od;v.type=ed;v.w=$c;v.x=lc;v.y=dc;v.z=ad;fd&&K.destroyStream(Ac);I.buffer=Kd;I.divisor=qd;I.normalized=Wc;I.offset=wd;I.size=ud;I.state=ld;I.stride=yd;I.type=Fd;I.w=Hd;I.x=ke;I.y=ne;I.z=ue;le&&K.destroyStream(ie);E.buffer=qe;E.divisor=Ce;E.normalized=Ge;E.offset=te;E.size=Ve;E.state=We;E.stride=Re;E.type=xe;E.w=Je;E.x=Le;E.y=Me;E.z=Ne;oa.vert=Ke;oa.frag=Rd;U.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,ta,I,r,E,B,aa,H,F,D,ka,t,ba,L,G){var ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca,ia,X;ua=a.attributes;T=a.buffer;W=a.context;S=a.current;O=a.draw;M=a.elements;N=a.extensions;Q=a.framebuffer;R=a.gl;qa=a.isBufferArgs;na=a.next;J=a.shader;K=a.uniforms;da=a.vao;U=na.blend_color;la=S.blend_color;ha=na.blend_equation;Aa=S.blend_equation;xa=na.blend_func;ca=S.blend_func;Da=na.colorMask;ja=S.colorMask;
oa=na.depth_range;Ba=S.depth_range;Qa=na.polygonOffset_offset;Fa=S.polygonOffset_offset;Hb=na.sample_coverage;Ua=S.sample_coverage;ga=na.scissor_box;ea=S.scissor_box;sa=na.stencil_func;wa=S.stencil_func;Ea=na.stencil_opBack;rb=S.stencil_opBack;Gb=na.stencil_opFront;Z=S.stencil_opFront;V=na.viewport;ya=S.viewport;Ha={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};pa={divisor:1,offset:8,stride:8};za={divisor:1,offset:8,stride:8};Ca={divisor:1,offset:16,
stride:8};ia={divisor:1,offset:16,stride:8};X={divisor:1,offset:0,stride:4};return{batch:function(c,e){var b,a,k,h,f,g;b=Q.next;b!==Q.cur&&(b?R.bindFramebuffer(36160,b.framebuffer):R.bindFramebuffer(36160,null),Q.cur=b);if(S.dirty){var n,p,u,y,C,l,ga,J,P,V,K,U,ha,xa,Cd,Be,Qe,Ue,Jd,Ee,me,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc;n=na.dither;n!==S.dither&&(n?R.enable(3024):R.disable(3024),S.dither=n);p=na.depth_func;p!==S.depth_func&&(R.depthFunc(p),S.depth_func=p);u=oa[0];y=oa[1];if(u!==Ba[0]||y!==Ba[1])R.depthRange(u,
y),Ba[0]=u,Ba[1]=y;C=na.depth_mask;C!==S.depth_mask&&(R.depthMask(C),S.depth_mask=C);l=Da[0];ga=Da[1];J=Da[2];P=Da[3];if(l!==ja[0]||ga!==ja[1]||J!==ja[2]||P!==ja[3])R.colorMask(l,ga,J,P),ja[0]=l,ja[1]=ga,ja[2]=J,ja[3]=P;V=na.cull_enable;V!==S.cull_enable&&(V?R.enable(2884):R.disable(2884),S.cull_enable=V);K=na.cull_face;K!==S.cull_face&&(R.cullFace(K),S.cull_face=K);U=na.frontFace;U!==S.frontFace&&(R.frontFace(U),S.frontFace=U);ha=na.lineWidth;ha!==S.lineWidth&&(R.lineWidth(ha),S.lineWidth=ha);xa=
na.polygonOffset_enable;xa!==S.polygonOffset_enable&&(xa?R.enable(32823):R.disable(32823),S.polygonOffset_enable=xa);Cd=Qa[0];Be=Qa[1];if(Cd!==Fa[0]||Be!==Fa[1])R.polygonOffset(Cd,Be),Fa[0]=Cd,Fa[1]=Be;Qe=na.sample_alpha;Qe!==S.sample_alpha&&(Qe?R.enable(32926):R.disable(32926),S.sample_alpha=Qe);Ue=na.sample_enable;Ue!==S.sample_enable&&(Ue?R.enable(32928):R.disable(32928),S.sample_enable=Ue);Jd=Hb[0];Ee=Hb[1];if(Jd!==Ua[0]||Ee!==Ua[1])R.sampleCoverage(Jd,Ee),Ua[0]=Jd,Ua[1]=Ee;me=na.stencil_mask;
me!==S.stencil_mask&&(R.stencilMask(me),S.stencil_mask=me);be=sa[0];Md=sa[1];Ed=sa[2];if(be!==wa[0]||Md!==wa[1]||Ed!==wa[2])R.stencilFunc(be,Md,Ed),wa[0]=be,wa[1]=Md,wa[2]=Ed;pd=Gb[0];bd=Gb[1];td=Gb[2];Oc=Gb[3];if(pd!==Z[0]||bd!==Z[1]||td!==Z[2]||Oc!==Z[3])R.stencilOpSeparate(pd,bd,td,Oc),Z[0]=pd,Z[1]=bd,Z[2]=td,Z[3]=Oc;rd=Ea[0];Gc=Ea[1];gd=Ea[2];Sc=Ea[3];if(rd!==rb[0]||Gc!==rb[1]||gd!==rb[2]||Sc!==rb[3])R.stencilOpSeparate(rd,Gc,gd,Sc),rb[0]=rd,rb[1]=Gc,rb[2]=gd,rb[3]=Sc}R.blendColor(0,0,0,0);la[0]=
0;la[1]=0;la[2]=0;la[3]=0;R.enable(3042);S.blend_enable=!0;R.blendEquationSeparate(32774,32774);Aa[0]=32774;Aa[1]=32774;R.blendFuncSeparate(770,771,773,1);ca[0]=770;ca[1]=771;ca[2]=773;ca[3]=1;R.enable(3089);S.scissor_enable=!0;R.disable(2960);S.stencil_enable=!1;if(a=S.profile)k=performance.now(),d.count+=e;R.useProgram(w.program);h=N.angle_instanced_arrays;var md,Vb,Eb,vc,zb;da.setVAO(null);md=aa.location;Vb=ua[md];Vb.buffer||R.enableVertexAttribArray(md);if(5126!==Vb.type||1!==Vb.size||Vb.buffer!==
q||!1!==Vb.normalized||0!==Vb.offset||8!==Vb.stride)R.bindBuffer(34962,q.buffer),R.vertexAttribPointer(md,1,5126,!1,8,0),Vb.type=5126,Vb.size=1,Vb.buffer=q,Vb.normalized=!1,Vb.offset=0,Vb.stride=8;0!==Vb.divisor&&(h.vertexAttribDivisorANGLE(md,0),Vb.divisor=0);Eb=H.location;vc=ua[Eb];vc.buffer||R.enableVertexAttribArray(Eb);if(5126!==vc.type||1!==vc.size||vc.buffer!==m||!1!==vc.normalized||4!==vc.offset||8!==vc.stride)R.bindBuffer(34962,m.buffer),R.vertexAttribPointer(Eb,1,5126,!1,8,4),vc.type=5126,
vc.size=1,vc.buffer=m,vc.normalized=!1,vc.offset=4,vc.stride=8;0!==vc.divisor&&(h.vertexAttribDivisorANGLE(Eb,0),vc.divisor=0);(zb=O.elements)?R.bindBuffer(34963,zb.buffer.buffer):da.currentVAO&&(zb=M.getElements(da.currentVAO.elements))&&R.bindBuffer(34963,zb.buffer.buffer);for(f=0;f<e;++f){g=c[f];var yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,
xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld;yc=g.viewport;Bb=yc.x|0;Lc=yc.y|0;mc="width"in yc?yc.width|0:W.framebufferWidth-Bb;Hc="height"in yc?yc.height|0:W.framebufferHeight-Lc;hd=W.viewportWidth;W.viewportWidth=mc;cd=W.viewportHeight;W.viewportHeight=Hc;R.viewport(Bb,Lc,mc,Hc);ya[0]=Bb;ya[1]=Lc;ya[2]=mc;ya[3]=Hc;(Ec=z.call(this,W,g,f))?R.enable(2929):
R.disable(2929);S.depth_enable=Ec;fc=g.viewport;Ic=fc.x|0;pc=fc.y|0;rc="width"in fc?fc.width|0:W.framebufferWidth-Ic;nc="height"in fc?fc.height|0:W.framebufferHeight-pc;R.scissor(Ic,pc,rc,nc);ea[0]=Ic;ea[1]=pc;ea[2]=rc;ea[3]=nc;pa.buffer=g.positionBuffer;qc=!1;ob=null;Pc=0;Zb=!1;Mb=gb=0;ab=1;jb=0;Wa=5126;sc=Ib=Nb=Jc=0;qa(pa)?(qc=!0,ob=T.createStream(34962,pa),Wa=ob.dtype):(ob=T.getBuffer(pa))?Wa=ob.dtype:"constant"in pa?(ab=2,"number"===typeof pa.constant?(Nb=pa.constant,Ib=sc=Jc=0):(Nb=0<pa.constant.length?
pa.constant[0]:0,Ib=1<pa.constant.length?pa.constant[1]:0,sc=2<pa.constant.length?pa.constant[2]:0,Jc=3<pa.constant.length?pa.constant[3]:0)):(ob=qa(pa.buffer)?T.createStream(34962,pa.buffer):T.getBuffer(pa.buffer),Wa="type"in pa?Ha[pa.type]:ob.dtype,Zb=!!pa.normalized,Mb=pa.size|0,gb=pa.offset|0,jb=pa.stride|0,Pc=pa.divisor|0);Ob=ma.location;kb=ua[Ob];if(1===ab){kb.buffer||R.enableVertexAttribArray(Ob);Fb=Mb||2;if(kb.type!==Wa||kb.size!==Fb||kb.buffer!==ob||kb.normalized!==Zb||kb.offset!==gb||kb.stride!==
jb)R.bindBuffer(34962,ob.buffer),R.vertexAttribPointer(Ob,Fb,Wa,Zb,jb,gb),kb.type=Wa,kb.size=Fb,kb.buffer=ob,kb.normalized=Zb,kb.offset=gb,kb.stride=jb;kb.divisor!==Pc&&(h.vertexAttribDivisorANGLE(Ob,Pc),kb.divisor=Pc)}else if(kb.buffer&&(R.disableVertexAttribArray(Ob),kb.buffer=null),kb.x!==Nb||kb.y!==Ib||kb.z!==sc||kb.w!==Jc)R.vertexAttrib4f(Ob,Nb,Ib,sc,Jc),kb.x=Nb,kb.y=Ib,kb.z=sc,kb.w=Jc;Ca.buffer=g.positionBuffer;Cb=!1;yb=null;hb=0;$b=!1;qb=Pb=0;Sa=1;Ub=0;sb=5126;Ja=pb=ib=jc=0;qa(Ca)?(Cb=!0,yb=
T.createStream(34962,Ca),sb=yb.dtype):(yb=T.getBuffer(Ca))?sb=yb.dtype:"constant"in Ca?(Sa=2,"number"===typeof Ca.constant?(ib=Ca.constant,pb=Ja=jc=0):(ib=0<Ca.constant.length?Ca.constant[0]:0,pb=1<Ca.constant.length?Ca.constant[1]:0,Ja=2<Ca.constant.length?Ca.constant[2]:0,jc=3<Ca.constant.length?Ca.constant[3]:0)):(yb=qa(Ca.buffer)?T.createStream(34962,Ca.buffer):T.getBuffer(Ca.buffer),sb="type"in Ca?Ha[Ca.type]:yb.dtype,$b=!!Ca.normalized,qb=Ca.size|0,Pb=Ca.offset|0,Ub=Ca.stride|0,hb=Ca.divisor|
0);tb=v.location;La=ua[tb];if(1===Sa){La.buffer||R.enableVertexAttribArray(tb);db=qb||2;if(La.type!==sb||La.size!==db||La.buffer!==yb||La.normalized!==$b||La.offset!==Pb||La.stride!==Ub)R.bindBuffer(34962,yb.buffer),R.vertexAttribPointer(tb,db,sb,$b,Ub,Pb),La.type=sb,La.size=db,La.buffer=yb,La.normalized=$b,La.offset=Pb,La.stride=Ub;La.divisor!==hb&&(h.vertexAttribDivisorANGLE(tb,hb),La.divisor=hb)}else if(La.buffer&&(R.disableVertexAttribArray(tb),La.buffer=null),La.x!==ib||La.y!==pb||La.z!==Ja||
La.w!==jc)R.vertexAttrib4f(tb,ib,pb,Ja,jc),La.x=ib,La.y=pb,La.z=Ja,La.w=jc;za.buffer=g.positionFractBuffer;fb=!1;Na=null;lb=0;Xa=!1;ub=vb=0;Pa=1;Dc=0;Va=5126;zd=Ma=Db=Jb=0;qa(za)?(fb=!0,Na=T.createStream(34962,za),Va=Na.dtype):(Na=T.getBuffer(za))?Va=Na.dtype:"constant"in za?(Pa=2,"number"===typeof za.constant?(Db=za.constant,Ma=zd=Jb=0):(Db=0<za.constant.length?za.constant[0]:0,Ma=1<za.constant.length?za.constant[1]:0,zd=2<za.constant.length?za.constant[2]:0,Jb=3<za.constant.length?za.constant[3]:
0)):(Na=qa(za.buffer)?T.createStream(34962,za.buffer):T.getBuffer(za.buffer),Va="type"in za?Ha[za.type]:Na.dtype,Xa=!!za.normalized,ub=za.size|0,vb=za.offset|0,Dc=za.stride|0,lb=za.divisor|0);Za=x.location;Kb=ua[Za];if(1===Pa){Kb.buffer||R.enableVertexAttribArray(Za);Lb=ub||2;if(Kb.type!==Va||Kb.size!==Lb||Kb.buffer!==Na||Kb.normalized!==Xa||Kb.offset!==vb||Kb.stride!==Dc)R.bindBuffer(34962,Na.buffer),R.vertexAttribPointer(Za,Lb,Va,Xa,Dc,vb),Kb.type=Va,Kb.size=Lb,Kb.buffer=Na,Kb.normalized=Xa,Kb.offset=
vb,Kb.stride=Dc;Kb.divisor!==lb&&(h.vertexAttribDivisorANGLE(Za,lb),Kb.divisor=lb)}else if(Kb.buffer&&(R.disableVertexAttribArray(Za),Kb.buffer=null),Kb.x!==Db||Kb.y!==Ma||Kb.z!==zd||Kb.w!==Jb)R.vertexAttrib4f(Za,Db,Ma,zd,Jb),Kb.x=Db,Kb.y=Ma,Kb.z=zd,Kb.w=Jb;ia.buffer=g.positionFractBuffer;mb=!1;Oa=null;ac=0;Ra=!1;xb=wb=0;Ta=1;nb=0;gc=5126;kc=bb=wc=Bc=0;qa(ia)?(mb=!0,Oa=T.createStream(34962,ia),gc=Oa.dtype):(Oa=T.getBuffer(ia))?gc=Oa.dtype:"constant"in ia?(Ta=2,"number"===typeof ia.constant?(wc=ia.constant,
bb=kc=Bc=0):(wc=0<ia.constant.length?ia.constant[0]:0,bb=1<ia.constant.length?ia.constant[1]:0,kc=2<ia.constant.length?ia.constant[2]:0,Bc=3<ia.constant.length?ia.constant[3]:0)):(Oa=qa(ia.buffer)?T.createStream(34962,ia.buffer):T.getBuffer(ia.buffer),gc="type"in ia?Ha[ia.type]:Oa.dtype,Ra=!!ia.normalized,xb=ia.size|0,wb=ia.offset|0,nb=ia.stride|0,ac=ia.divisor|0);Mc=ta.location;Ya=ua[Mc];if(1===Ta){Ya.buffer||R.enableVertexAttribArray(Mc);nd=xb||2;if(Ya.type!==gc||Ya.size!==nd||Ya.buffer!==Oa||Ya.normalized!==
Ra||Ya.offset!==wb||Ya.stride!==nb)R.bindBuffer(34962,Oa.buffer),R.vertexAttribPointer(Mc,nd,gc,Ra,nb,wb),Ya.type=gc,Ya.size=nd,Ya.buffer=Oa,Ya.normalized=Ra,Ya.offset=wb,Ya.stride=nb;Ya.divisor!==ac&&(h.vertexAttribDivisorANGLE(Mc,ac),Ya.divisor=ac)}else if(Ya.buffer&&(R.disableVertexAttribArray(Mc),Ya.buffer=null),Ya.x!==wc||Ya.y!==bb||Ya.z!==kc||Ya.w!==Bc)R.vertexAttrib4f(Mc,wc,bb,kc,Bc),Ya.x=wc,Ya.y=bb,Ya.z=kc,Ya.w=Bc;X.buffer=g.colorBuffer;Ab=!1;$a=null;Wb=0;uc=!1;Qb=Xb=0;Nc=1;Rb=0;Od=5126;Yc=
Qc=sd=Fc=0;qa(X)?(Ab=!0,$a=T.createStream(34962,X),Od=$a.dtype):($a=T.getBuffer(X))?Od=$a.dtype:"constant"in X?(Nc=2,"number"===typeof X.constant?(sd=X.constant,Qc=Yc=Fc=0):(sd=0<X.constant.length?X.constant[0]:0,Qc=1<X.constant.length?X.constant[1]:0,Yc=2<X.constant.length?X.constant[2]:0,Fc=3<X.constant.length?X.constant[3]:0)):($a=qa(X.buffer)?T.createStream(34962,X.buffer):T.getBuffer(X.buffer),Od="type"in X?Ha[X.type]:$a.dtype,uc=!!X.normalized,Qb=X.size|0,Xb=X.offset|0,Rb=X.stride|0,Wb=X.divisor|
0);vd=I.location;oc=ua[vd];if(1===Nc){oc.buffer||R.enableVertexAttribArray(vd);xc=Qb||4;if(oc.type!==Od||oc.size!==xc||oc.buffer!==$a||oc.normalized!==uc||oc.offset!==Xb||oc.stride!==Rb)R.bindBuffer(34962,$a.buffer),R.vertexAttribPointer(vd,xc,Od,uc,Rb,Xb),oc.type=Od,oc.size=xc,oc.buffer=$a,oc.normalized=uc,oc.offset=Xb,oc.stride=Rb;oc.divisor!==Wb&&(h.vertexAttribDivisorANGLE(vd,Wb),oc.divisor=Wb)}else if(oc.buffer&&(R.disableVertexAttribArray(vd),oc.buffer=null),oc.x!==sd||oc.y!==Qc||oc.z!==Yc||
oc.w!==Fc)R.vertexAttrib4f(vd,sd,Qc,Yc,Fc),oc.x=sd,oc.y=Qc,oc.z=Yc,oc.w=Fc;hc=g.scale;cb=hc[0];Tb=hc[1];f&&tc===cb&&Yb===Tb||(tc=cb,Yb=Tb,R.uniform2f(D.location,cb,Tb));ec=g.scaleFract;ic=ec[0];Cc=ec[1];f&&zc===ic&&dd===Cc||(zc=ic,dd=Cc,R.uniform2f(ka.location,ic,Cc));Tc=g.translate;Uc=Tc[0];Zc=Tc[1];f&&Vc===Uc&&od===Zc||(Vc=Uc,od=Zc,R.uniform2f(ba.location,Uc,Zc));ed=g.translateFract;$c=ed[0];dc=ed[1];f&&lc===$c&&ad===dc||(lc=$c,ad=dc,R.uniform2f(L.location,$c,dc));Xc=g.thickness;f&&fd===Xc||(fd=
Xc,R.uniform1f(t.location,Xc));Ac=g.depth;f&&jd===Ac||(jd=Ac,R.uniform1f(B.location,Ac));Dd=A.call(this,W,g,f);ze=Dd[0];kd=Dd[1];Td=Dd[2];ee=Dd[3];f&&xd===ze&&Fe===kd&&he===Td&&Ud===ee||(xd=ze,Fe=kd,he=Td,Ud=ee,R.uniform4f(G.location,ze,kd,Td,ee));Nd=g.dashLength;f&&Kd===Nd||(Kd=Nd,R.uniform1f(r.location,Nd));qd=g.opacity;f&&Wc===qd||(Wc=qd,R.uniform1f(F.location,qd));(wd=g.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);ud=wd._texture;R.uniform1i(E.location,ud.bind());ld=g.count;0<ld?
zb?h.drawElementsInstancedANGLE(5,4,zb.type,0<<(zb.type-5121>>1),ld):h.drawArraysInstancedANGLE(5,0,4,ld):0>ld&&(zb?R.drawElements(5,4,zb.type,0<<(zb.type-5121>>1)):R.drawArrays(5,0,4));W.viewportWidth=hd;W.viewportHeight=cd;qc&&T.destroyStream(ob);Cb&&T.destroyStream(yb);fb&&T.destroyStream(Na);mb&&T.destroyStream(Oa);Ab&&T.destroyStream($a);ud.unbind()}S.dirty=!0;da.setVAO(null);a&&(d.cpuTime+=performance.now()-k)},draw:function(c){var e,a,k,h,f,g,n,p,w,z,A,y,C,ga,J,V,K,U,ha,xa,Bd,Cd,Be,Qe,Ue,Jd,
Ee,me,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb;e=Q.next;e!==Q.cur&&(e?R.bindFramebuffer(36160,e.framebuffer):R.bindFramebuffer(36160,null),Q.cur=e);if(S.dirty){var xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb;xb=na.dither;xb!==S.dither&&(xb?R.enable(3024):
R.disable(3024),S.dither=xb);Ta=na.depth_func;Ta!==S.depth_func&&(R.depthFunc(Ta),S.depth_func=Ta);nb=oa[0];gc=oa[1];if(nb!==Ba[0]||gc!==Ba[1])R.depthRange(nb,gc),Ba[0]=nb,Ba[1]=gc;Bc=na.depth_mask;Bc!==S.depth_mask&&(R.depthMask(Bc),S.depth_mask=Bc);wc=Da[0];bb=Da[1];kc=Da[2];Mc=Da[3];if(wc!==ja[0]||bb!==ja[1]||kc!==ja[2]||Mc!==ja[3])R.colorMask(wc,bb,kc,Mc),ja[0]=wc,ja[1]=bb,ja[2]=kc,ja[3]=Mc;Ya=na.cull_enable;Ya!==S.cull_enable&&(Ya?R.enable(2884):R.disable(2884),S.cull_enable=Ya);nd=na.cull_face;
nd!==S.cull_face&&(R.cullFace(nd),S.cull_face=nd);Ab=na.frontFace;Ab!==S.frontFace&&(R.frontFace(Ab),S.frontFace=Ab);$a=na.lineWidth;$a!==S.lineWidth&&(R.lineWidth($a),S.lineWidth=$a);Wb=na.polygonOffset_enable;Wb!==S.polygonOffset_enable&&(Wb?R.enable(32823):R.disable(32823),S.polygonOffset_enable=Wb);uc=Qa[0];Xb=Qa[1];if(uc!==Fa[0]||Xb!==Fa[1])R.polygonOffset(uc,Xb),Fa[0]=uc,Fa[1]=Xb;Qb=na.sample_alpha;Qb!==S.sample_alpha&&(Qb?R.enable(32926):R.disable(32926),S.sample_alpha=Qb);Nc=na.sample_enable;
Nc!==S.sample_enable&&(Nc?R.enable(32928):R.disable(32928),S.sample_enable=Nc);Rb=Hb[0];Od=Hb[1];if(Rb!==Ua[0]||Od!==Ua[1])R.sampleCoverage(Rb,Od),Ua[0]=Rb,Ua[1]=Od;Fc=na.stencil_mask;Fc!==S.stencil_mask&&(R.stencilMask(Fc),S.stencil_mask=Fc);sd=sa[0];Qc=sa[1];Yc=sa[2];if(sd!==wa[0]||Qc!==wa[1]||Yc!==wa[2])R.stencilFunc(sd,Qc,Yc),wa[0]=sd,wa[1]=Qc,wa[2]=Yc;vd=Gb[0];oc=Gb[1];xc=Gb[2];hc=Gb[3];if(vd!==Z[0]||oc!==Z[1]||xc!==Z[2]||hc!==Z[3])R.stencilOpSeparate(vd,oc,xc,hc),Z[0]=vd,Z[1]=oc,Z[2]=xc,Z[3]=
hc;cb=Ea[0];tc=Ea[1];Tb=Ea[2];Yb=Ea[3];if(cb!==rb[0]||tc!==rb[1]||Tb!==rb[2]||Yb!==rb[3])R.stencilOpSeparate(cb,tc,Tb,Yb),rb[0]=cb,rb[1]=tc,rb[2]=Tb,rb[3]=Yb}a=c.viewport;k=a.x|0;h=a.y|0;f="width"in a?a.width|0:W.framebufferWidth-k;g="height"in a?a.height|0:W.framebufferHeight-h;n=W.viewportWidth;W.viewportWidth=f;p=W.viewportHeight;W.viewportHeight=g;R.viewport(k,h,f,g);ya[0]=k;ya[1]=h;ya[2]=f;ya[3]=g;R.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;R.enable(3042);S.blend_enable=!0;R.blendEquationSeparate(32774,
32774);Aa[0]=32774;Aa[1]=32774;R.blendFuncSeparate(770,771,773,1);ca[0]=770;ca[1]=771;ca[2]=773;ca[3]=1;(w=l.call(this,W,c,0))?R.enable(2929):R.disable(2929);S.depth_enable=w;z=c.viewport;A=z.x|0;y=z.y|0;C="width"in z?z.width|0:W.framebufferWidth-A;ga="height"in z?z.height|0:W.framebufferHeight-y;R.scissor(A,y,C,ga);ea[0]=A;ea[1]=y;ea[2]=C;ea[3]=ga;R.enable(3089);S.scissor_enable=!0;R.disable(2960);S.stencil_enable=!1;if(J=S.profile)V=performance.now(),d.count++;R.useProgram(u.program);K=N.angle_instanced_arrays;
da.setVAO(null);pa.buffer=c.positionBuffer;U=!1;ha=null;xa=0;Bd=!1;Be=Cd=0;Qe=1;Ue=0;Jd=5126;Md=be=me=Ee=0;qa(pa)?(U=!0,ha=T.createStream(34962,pa),Jd=ha.dtype):(ha=T.getBuffer(pa))?Jd=ha.dtype:"constant"in pa?(Qe=2,"number"===typeof pa.constant?(me=pa.constant,be=Md=Ee=0):(me=0<pa.constant.length?pa.constant[0]:0,be=1<pa.constant.length?pa.constant[1]:0,Md=2<pa.constant.length?pa.constant[2]:0,Ee=3<pa.constant.length?pa.constant[3]:0)):(ha=qa(pa.buffer)?T.createStream(34962,pa.buffer):T.getBuffer(pa.buffer),
Jd="type"in pa?Ha[pa.type]:ha.dtype,Bd=!!pa.normalized,Be=pa.size|0,Cd=pa.offset|0,Ue=pa.stride|0,xa=pa.divisor|0);Ed=ma.location;pd=ua[Ed];if(1===Qe){pd.buffer||R.enableVertexAttribArray(Ed);bd=Be||2;if(pd.type!==Jd||pd.size!==bd||pd.buffer!==ha||pd.normalized!==Bd||pd.offset!==Cd||pd.stride!==Ue)R.bindBuffer(34962,ha.buffer),R.vertexAttribPointer(Ed,bd,Jd,Bd,Ue,Cd),pd.type=Jd,pd.size=bd,pd.buffer=ha,pd.normalized=Bd,pd.offset=Cd,pd.stride=Ue;pd.divisor!==xa&&(K.vertexAttribDivisorANGLE(Ed,xa),pd.divisor=
xa)}else if(pd.buffer&&(R.disableVertexAttribArray(Ed),pd.buffer=null),pd.x!==me||pd.y!==be||pd.z!==Md||pd.w!==Ee)R.vertexAttrib4f(Ed,me,be,Md,Ee),pd.x=me,pd.y=be,pd.z=Md,pd.w=Ee;Ca.buffer=c.positionBuffer;td=!1;Oc=null;rd=0;Gc=!1;Sc=gd=0;md=1;Vb=0;Eb=5126;Bb=yc=zb=vc=0;qa(Ca)?(td=!0,Oc=T.createStream(34962,Ca),Eb=Oc.dtype):(Oc=T.getBuffer(Ca))?Eb=Oc.dtype:"constant"in Ca?(md=2,"number"===typeof Ca.constant?(zb=Ca.constant,yc=Bb=vc=0):(zb=0<Ca.constant.length?Ca.constant[0]:0,yc=1<Ca.constant.length?
Ca.constant[1]:0,Bb=2<Ca.constant.length?Ca.constant[2]:0,vc=3<Ca.constant.length?Ca.constant[3]:0)):(Oc=qa(Ca.buffer)?T.createStream(34962,Ca.buffer):T.getBuffer(Ca.buffer),Eb="type"in Ca?Ha[Ca.type]:Oc.dtype,Gc=!!Ca.normalized,Sc=Ca.size|0,gd=Ca.offset|0,Vb=Ca.stride|0,rd=Ca.divisor|0);Lc=v.location;mc=ua[Lc];if(1===md){mc.buffer||R.enableVertexAttribArray(Lc);Hc=Sc||2;if(mc.type!==Eb||mc.size!==Hc||mc.buffer!==Oc||mc.normalized!==Gc||mc.offset!==gd||mc.stride!==Vb)R.bindBuffer(34962,Oc.buffer),
R.vertexAttribPointer(Lc,Hc,Eb,Gc,Vb,gd),mc.type=Eb,mc.size=Hc,mc.buffer=Oc,mc.normalized=Gc,mc.offset=gd,mc.stride=Vb;mc.divisor!==rd&&(K.vertexAttribDivisorANGLE(Lc,rd),mc.divisor=rd)}else if(mc.buffer&&(R.disableVertexAttribArray(Lc),mc.buffer=null),mc.x!==zb||mc.y!==yc||mc.z!==Bb||mc.w!==vc)R.vertexAttrib4f(Lc,zb,yc,Bb,vc),mc.x=zb,mc.y=yc,mc.z=Bb,mc.w=vc;za.buffer=c.positionFractBuffer;hd=!1;cd=null;Ec=0;fc=!1;pc=Ic=0;rc=1;nc=0;qc=5126;gb=Zb=Pc=ob=0;qa(za)?(hd=!0,cd=T.createStream(34962,za),qc=
cd.dtype):(cd=T.getBuffer(za))?qc=cd.dtype:"constant"in za?(rc=2,"number"===typeof za.constant?(Pc=za.constant,Zb=gb=ob=0):(Pc=0<za.constant.length?za.constant[0]:0,Zb=1<za.constant.length?za.constant[1]:0,gb=2<za.constant.length?za.constant[2]:0,ob=3<za.constant.length?za.constant[3]:0)):(cd=qa(za.buffer)?T.createStream(34962,za.buffer):T.getBuffer(za.buffer),qc="type"in za?Ha[za.type]:cd.dtype,fc=!!za.normalized,pc=za.size|0,Ic=za.offset|0,nc=za.stride|0,Ec=za.divisor|0);Mb=x.location;ab=ua[Mb];
if(1===rc){ab.buffer||R.enableVertexAttribArray(Mb);jb=pc||2;if(ab.type!==qc||ab.size!==jb||ab.buffer!==cd||ab.normalized!==fc||ab.offset!==Ic||ab.stride!==nc)R.bindBuffer(34962,cd.buffer),R.vertexAttribPointer(Mb,jb,qc,fc,nc,Ic),ab.type=qc,ab.size=jb,ab.buffer=cd,ab.normalized=fc,ab.offset=Ic,ab.stride=nc;ab.divisor!==Ec&&(K.vertexAttribDivisorANGLE(Mb,Ec),ab.divisor=Ec)}else if(ab.buffer&&(R.disableVertexAttribArray(Mb),ab.buffer=null),ab.x!==Pc||ab.y!==Zb||ab.z!==gb||ab.w!==ob)R.vertexAttrib4f(Mb,
Pc,Zb,gb,ob),ab.x=Pc,ab.y=Zb,ab.z=gb,ab.w=ob;ia.buffer=c.positionFractBuffer;Wa=!1;Jc=null;Nb=0;Ib=!1;Ob=sc=0;kb=1;Fb=0;Cb=5126;Pb=$b=hb=yb=0;qa(ia)?(Wa=!0,Jc=T.createStream(34962,ia),Cb=Jc.dtype):(Jc=T.getBuffer(ia))?Cb=Jc.dtype:"constant"in ia?(kb=2,"number"===typeof ia.constant?(hb=ia.constant,$b=Pb=yb=0):(hb=0<ia.constant.length?ia.constant[0]:0,$b=1<ia.constant.length?ia.constant[1]:0,Pb=2<ia.constant.length?ia.constant[2]:0,yb=3<ia.constant.length?ia.constant[3]:0)):(Jc=qa(ia.buffer)?T.createStream(34962,
ia.buffer):T.getBuffer(ia.buffer),Cb="type"in ia?Ha[ia.type]:Jc.dtype,Ib=!!ia.normalized,Ob=ia.size|0,sc=ia.offset|0,Fb=ia.stride|0,Nb=ia.divisor|0);qb=ta.location;Sa=ua[qb];if(1===kb){Sa.buffer||R.enableVertexAttribArray(qb);Ub=Ob||2;if(Sa.type!==Cb||Sa.size!==Ub||Sa.buffer!==Jc||Sa.normalized!==Ib||Sa.offset!==sc||Sa.stride!==Fb)R.bindBuffer(34962,Jc.buffer),R.vertexAttribPointer(qb,Ub,Cb,Ib,Fb,sc),Sa.type=Cb,Sa.size=Ub,Sa.buffer=Jc,Sa.normalized=Ib,Sa.offset=sc,Sa.stride=Fb;Sa.divisor!==Nb&&(K.vertexAttribDivisorANGLE(qb,
Nb),Sa.divisor=Nb)}else if(Sa.buffer&&(R.disableVertexAttribArray(qb),Sa.buffer=null),Sa.x!==hb||Sa.y!==$b||Sa.z!==Pb||Sa.w!==yb)R.vertexAttrib4f(qb,hb,$b,Pb,yb),Sa.x=hb,Sa.y=$b,Sa.z=Pb,Sa.w=yb;X.buffer=c.colorBuffer;sb=!1;jc=null;ib=0;pb=!1;tb=Ja=0;La=1;db=0;fb=5126;vb=Xa=lb=Na=0;qa(X)?(sb=!0,jc=T.createStream(34962,X),fb=jc.dtype):(jc=T.getBuffer(X))?fb=jc.dtype:"constant"in X?(La=2,"number"===typeof X.constant?(lb=X.constant,Xa=vb=Na=0):(lb=0<X.constant.length?X.constant[0]:0,Xa=1<X.constant.length?
X.constant[1]:0,vb=2<X.constant.length?X.constant[2]:0,Na=3<X.constant.length?X.constant[3]:0)):(jc=qa(X.buffer)?T.createStream(34962,X.buffer):T.getBuffer(X.buffer),fb="type"in X?Ha[X.type]:jc.dtype,pb=!!X.normalized,tb=X.size|0,Ja=X.offset|0,db=X.stride|0,ib=X.divisor|0);ub=I.location;Pa=ua[ub];if(1===La){Pa.buffer||R.enableVertexAttribArray(ub);Dc=tb||4;if(Pa.type!==fb||Pa.size!==Dc||Pa.buffer!==jc||Pa.normalized!==pb||Pa.offset!==Ja||Pa.stride!==db)R.bindBuffer(34962,jc.buffer),R.vertexAttribPointer(ub,
Dc,fb,pb,db,Ja),Pa.type=fb,Pa.size=Dc,Pa.buffer=jc,Pa.normalized=pb,Pa.offset=Ja,Pa.stride=db;Pa.divisor!==ib&&(K.vertexAttribDivisorANGLE(ub,ib),Pa.divisor=ib)}else if(Pa.buffer&&(R.disableVertexAttribArray(ub),Pa.buffer=null),Pa.x!==lb||Pa.y!==Xa||Pa.z!==vb||Pa.w!==Na)R.vertexAttrib4f(ub,lb,Xa,vb,Na),Pa.x=lb,Pa.y=Xa,Pa.z=vb,Pa.w=Na;Va=aa.location;Jb=ua[Va];Jb.buffer||R.enableVertexAttribArray(Va);if(5126!==Jb.type||1!==Jb.size||Jb.buffer!==q||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)R.bindBuffer(34962,
q.buffer),R.vertexAttribPointer(Va,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=q,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(K.vertexAttribDivisorANGLE(Va,0),Jb.divisor=0);Db=H.location;Ma=ua[Db];Ma.buffer||R.enableVertexAttribArray(Db);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==m||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)R.bindBuffer(34962,m.buffer),R.vertexAttribPointer(Db,1,5126,!1,8,4),Ma.type=5126,Ma.size=1,Ma.buffer=m,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&
(K.vertexAttribDivisorANGLE(Db,0),Ma.divisor=0);zd=c.scale;R.uniform2f(D.location,zd[0],zd[1]);Za=c.scaleFract;R.uniform2f(ka.location,Za[0],Za[1]);Kb=c.translate;R.uniform2f(ba.location,Kb[0],Kb[1]);Lb=c.translateFract;R.uniform2f(L.location,Lb[0],Lb[1]);R.uniform1f(t.location,c.thickness);R.uniform1f(B.location,c.depth);mb=b.call(this,W,c,0);R.uniform4f(G.location,mb[0],mb[1],mb[2],mb[3]);R.uniform1f(r.location,c.dashLength);R.uniform1f(F.location,c.opacity);(Oa=c.dashTexture)&&"framebuffer"===
Oa._reglType&&(Oa=Oa.color[0]);ac=Oa._texture;R.uniform1i(E.location,ac.bind());(Ra=O.elements)?R.bindBuffer(34963,Ra.buffer.buffer):da.currentVAO&&(Ra=M.getElements(da.currentVAO.elements))&&R.bindBuffer(34963,Ra.buffer.buffer);wb=c.count;0<wb?Ra?K.drawElementsInstancedANGLE(5,4,Ra.type,0<<(Ra.type-5121>>1),wb):K.drawArraysInstancedANGLE(5,0,4,wb):0>wb&&(Ra?R.drawElements(5,4,Ra.type,0<<(Ra.type-5121>>1)):R.drawArrays(5,0,4));S.dirty=!0;da.setVAO(null);W.viewportWidth=n;W.viewportHeight=p;J&&(d.cpuTime+=
performance.now()-V);U&&T.destroyStream(ha);td&&T.destroyStream(Oc);hd&&T.destroyStream(cd);Wa&&T.destroyStream(Jc);sb&&T.destroyStream(jc);ac.unbind()},scope:function(b,a,t){var w,z,u,A,v,x,l,ea,N,P,ma,B,Fa,sa,I,E,ya,Qa,D,H,M,Hb,ta,ca,Z,F,r,R,wa,Q,L,da,ja,ra,Ua,Ba,aa,ba,oa,Ea,Da,ka,Gb,G,la,fa,Aa,rb,ua,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,
kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se;w=b.viewport;z=w.x|0;u=w.y|0;A="width"in w?w.width|0:W.framebufferWidth-z;v="height"in w?w.height|0:W.framebufferHeight-u;x=W.viewportWidth;W.viewportWidth=A;l=W.viewportHeight;W.viewportHeight=
v;ea=V[0];V[0]=z;N=V[1];V[1]=u;P=V[2];V[2]=A;ma=V[3];V[3]=v;B=U[0];U[0]=0;Fa=U[1];U[1]=0;sa=U[2];U[2]=0;I=U[3];U[3]=0;E=na.blend_enable;na.blend_enable=!0;ya=ha[0];ha[0]=32774;Qa=ha[1];ha[1]=32774;D=xa[0];xa[0]=770;H=xa[1];xa[1]=771;M=xa[2];xa[2]=773;Hb=xa[3];xa[3]=1;ta=f.call(this,W,b,t);ca=na.depth_enable;na.depth_enable=ta;Z=b.viewport;F=Z.x|0;r=Z.y|0;R="width"in Z?Z.width|0:W.framebufferWidth-F;wa="height"in Z?Z.height|0:W.framebufferHeight-r;Q=ga[0];ga[0]=F;L=ga[1];ga[1]=r;da=ga[2];ga[2]=R;ja=
ga[3];ga[3]=wa;ra=na.scissor_enable;na.scissor_enable=!0;Ua=na.stencil_enable;na.stencil_enable=!1;if(Ba=S.profile)aa=performance.now(),d.count++;ba=O.offset;O.offset=0;oa=O.count;O.count=4;Ea=b.count;Da=O.instances;O.instances=Ea;ka=O.primitive;O.primitive=5;Gb=b.dashLength;G=K[23];K[23]=Gb;la=b.dashTexture;fa=K[24];K[24]=la;Aa=b.depth;rb=K[22];K[22]=Aa;ua=b.id;Ec=K[31];K[31]=ua;fc=b.miterLimit;Ic=K[32];K[32]=fc;pc=c.call(this,W,b,t);rc=K[33];K[33]=pc;nc=b.opacity;qc=K[10];K[10]=nc;ob=W.pixelRatio;
Pc=K[34];K[34]=ob;Zb=b.scale;gb=K[6];K[6]=Zb;Mb=b.scaleFract;ab=K[7];K[7]=Mb;jb=b.thickness;Wa=K[21];K[21]=jb;Jc=b.translate;Nb=K[8];K[8]=Jc;Ib=b.translateFract;sc=K[9];K[9]=Ib;Ob=h.call(this,W,b,t);kb=K[3];K[3]=Ob;pa.buffer=b.positionBuffer;Fb=!1;Cb=null;yb=0;hb=!1;Pb=$b=0;qb=1;Sa=0;Ub=5126;pb=ib=jc=sb=0;qa(pa)?(Fb=!0,Cb=T.createStream(34962,pa),Ub=Cb.dtype):(Cb=T.getBuffer(pa))?Ub=Cb.dtype:"constant"in pa?(qb=2,"number"===typeof pa.constant?(jc=pa.constant,ib=pb=sb=0):(jc=0<pa.constant.length?pa.constant[0]:
0,ib=1<pa.constant.length?pa.constant[1]:0,pb=2<pa.constant.length?pa.constant[2]:0,sb=3<pa.constant.length?pa.constant[3]:0)):(Cb=qa(pa.buffer)?T.createStream(34962,pa.buffer):T.getBuffer(pa.buffer),Ub="type"in pa?Ha[pa.type]:Cb.dtype,hb=!!pa.normalized,Pb=pa.size|0,$b=pa.offset|0,Sa=pa.stride|0,yb=pa.divisor|0);Ja=C.buffer;C.buffer=Cb;tb=C.divisor;C.divisor=yb;La=C.normalized;C.normalized=hb;db=C.offset;C.offset=$b;fb=C.size;C.size=Pb;Na=C.state;C.state=qb;lb=C.stride;C.stride=Sa;Xa=C.type;C.type=
Ub;vb=C.w;C.w=sb;ub=C.x;C.x=jc;Pa=C.y;C.y=ib;Dc=C.z;C.z=pb;za.buffer=b.positionFractBuffer;Va=!1;Jb=null;Db=0;Ma=!1;Za=zd=0;Kb=1;Lb=0;mb=5126;wb=Ra=ac=Oa=0;qa(za)?(Va=!0,Jb=T.createStream(34962,za),mb=Jb.dtype):(Jb=T.getBuffer(za))?mb=Jb.dtype:"constant"in za?(Kb=2,"number"===typeof za.constant?(ac=za.constant,Ra=wb=Oa=0):(ac=0<za.constant.length?za.constant[0]:0,Ra=1<za.constant.length?za.constant[1]:0,wb=2<za.constant.length?za.constant[2]:0,Oa=3<za.constant.length?za.constant[3]:0)):(Jb=qa(za.buffer)?
T.createStream(34962,za.buffer):T.getBuffer(za.buffer),mb="type"in za?Ha[za.type]:Jb.dtype,Ma=!!za.normalized,Za=za.size|0,zd=za.offset|0,Lb=za.stride|0,Db=za.divisor|0);xb=y.buffer;y.buffer=Jb;Ta=y.divisor;y.divisor=Db;nb=y.normalized;y.normalized=Ma;gc=y.offset;y.offset=zd;Bc=y.size;y.size=Za;wc=y.state;y.state=Kb;bb=y.stride;y.stride=Lb;kc=y.type;y.type=mb;Mc=y.w;y.w=Oa;Ya=y.x;y.x=ac;nd=y.y;y.y=Ra;Ab=y.z;y.z=wb;Ca.buffer=b.positionBuffer;$a=!1;Wb=null;uc=0;Xb=!1;Nc=Qb=0;Rb=1;Od=0;Fc=5126;vd=Yc=
Qc=sd=0;qa(Ca)?($a=!0,Wb=T.createStream(34962,Ca),Fc=Wb.dtype):(Wb=T.getBuffer(Ca))?Fc=Wb.dtype:"constant"in Ca?(Rb=2,"number"===typeof Ca.constant?(Qc=Ca.constant,Yc=vd=sd=0):(Qc=0<Ca.constant.length?Ca.constant[0]:0,Yc=1<Ca.constant.length?Ca.constant[1]:0,vd=2<Ca.constant.length?Ca.constant[2]:0,sd=3<Ca.constant.length?Ca.constant[3]:0)):(Wb=qa(Ca.buffer)?T.createStream(34962,Ca.buffer):T.getBuffer(Ca.buffer),Fc="type"in Ca?Ha[Ca.type]:Wb.dtype,Xb=!!Ca.normalized,Nc=Ca.size|0,Qb=Ca.offset|0,Od=
Ca.stride|0,uc=Ca.divisor|0);oc=e.buffer;e.buffer=Wb;xc=e.divisor;e.divisor=uc;hc=e.normalized;e.normalized=Xb;cb=e.offset;e.offset=Qb;tc=e.size;e.size=Nc;Tb=e.state;e.state=Rb;Yb=e.stride;e.stride=Od;ec=e.type;e.type=Fc;ic=e.w;e.w=sd;zc=e.x;e.x=Qc;Cc=e.y;e.y=Yc;dd=e.z;e.z=vd;ia.buffer=b.positionFractBuffer;Tc=!1;Uc=null;Vc=0;Zc=!1;ed=od=0;$c=1;lc=0;dc=5126;Ac=fd=Xc=ad=0;qa(ia)?(Tc=!0,Uc=T.createStream(34962,ia),dc=Uc.dtype):(Uc=T.getBuffer(ia))?dc=Uc.dtype:"constant"in ia?($c=2,"number"===typeof ia.constant?
(Xc=ia.constant,fd=Ac=ad=0):(Xc=0<ia.constant.length?ia.constant[0]:0,fd=1<ia.constant.length?ia.constant[1]:0,Ac=2<ia.constant.length?ia.constant[2]:0,ad=3<ia.constant.length?ia.constant[3]:0)):(Uc=qa(ia.buffer)?T.createStream(34962,ia.buffer):T.getBuffer(ia.buffer),dc="type"in ia?Ha[ia.type]:Uc.dtype,Zc=!!ia.normalized,ed=ia.size|0,od=ia.offset|0,lc=ia.stride|0,Vc=ia.divisor|0);jd=k.buffer;k.buffer=Uc;Dd=k.divisor;k.divisor=Vc;ze=k.normalized;k.normalized=Zc;xd=k.offset;k.offset=od;kd=k.size;k.size=
ed;Fe=k.state;k.state=$c;Td=k.stride;k.stride=lc;he=k.type;k.type=dc;ee=k.w;k.w=ad;Ud=k.x;k.x=Xc;Nd=k.y;k.y=fd;Kd=k.z;k.z=Ac;X.buffer=b.colorBuffer;qd=!1;Wc=null;wd=0;ud=!1;yd=ld=0;Fd=1;Hd=0;ke=5126;le=oe=ue=ne=0;qa(X)?(qd=!0,Wc=T.createStream(34962,X),ke=Wc.dtype):(Wc=T.getBuffer(X))?ke=Wc.dtype:"constant"in X?(Fd=2,"number"===typeof X.constant?(ue=X.constant,oe=le=ne=0):(ue=0<X.constant.length?X.constant[0]:0,oe=1<X.constant.length?X.constant[1]:0,le=2<X.constant.length?X.constant[2]:0,ne=3<X.constant.length?
X.constant[3]:0)):(Wc=qa(X.buffer)?T.createStream(34962,X.buffer):T.getBuffer(X.buffer),ke="type"in X?Ha[X.type]:Wc.dtype,ud=!!X.normalized,yd=X.size|0,ld=X.offset|0,Hd=X.stride|0,wd=X.divisor|0);ie=g.buffer;g.buffer=Wc;ve=g.divisor;g.divisor=wd;fe=g.normalized;g.normalized=ud;pe=g.offset;g.offset=ld;Rc=g.size;g.size=yd;id=g.state;g.state=Fd;we=g.stride;g.stride=Hd;se=g.type;g.type=ke;Qd=g.w;g.w=ne;Vd=g.x;g.x=ue;Wd=g.y;g.y=oe;Xd=g.z;g.z=le;qe=n.buffer;n.buffer=q;Ce=n.divisor;n.divisor=0;Ge=n.normalized;
n.normalized=!1;te=n.offset;n.offset=0;Ve=n.size;n.size=0;We=n.state;n.state=1;Re=n.stride;n.stride=8;xe=n.type;n.type=5126;Je=n.w;n.w=0;Le=n.x;n.x=0;Me=n.y;n.y=0;Ne=n.z;n.z=0;Ke=p.buffer;p.buffer=m;Rd=p.divisor;p.divisor=0;ae=p.normalized;p.normalized=!1;de=p.offset;p.offset=4;ge=p.size;p.size=0;Oe=p.state;p.state=1;Ld=p.stride;p.stride=8;Yd=p.type;p.type=5126;He=p.w;p.w=0;Pe=p.x;p.x=0;df=p.y;p.y=0;cf=p.z;p.z=0;Xe=J.vert;J.vert=20;Se=J.frag;J.frag=19;S.dirty=!0;a(W,b,t);W.viewportWidth=x;W.viewportHeight=
l;V[0]=ea;V[1]=N;V[2]=P;V[3]=ma;U[0]=B;U[1]=Fa;U[2]=sa;U[3]=I;na.blend_enable=E;ha[0]=ya;ha[1]=Qa;xa[0]=D;xa[1]=H;xa[2]=M;xa[3]=Hb;na.depth_enable=ca;ga[0]=Q;ga[1]=L;ga[2]=da;ga[3]=ja;na.scissor_enable=ra;na.stencil_enable=Ua;Ba&&(d.cpuTime+=performance.now()-aa);O.offset=ba;O.count=oa;O.instances=Da;O.primitive=ka;K[23]=G;K[24]=fa;K[22]=rb;K[31]=Ec;K[32]=Ic;K[33]=rc;K[10]=qc;K[34]=Pc;K[6]=gb;K[7]=ab;K[21]=Wa;K[8]=Nb;K[9]=sc;K[3]=kb;Fb&&T.destroyStream(Cb);C.buffer=Ja;C.divisor=tb;C.normalized=La;
C.offset=db;C.size=fb;C.state=Na;C.stride=lb;C.type=Xa;C.w=vb;C.x=ub;C.y=Pa;C.z=Dc;Va&&T.destroyStream(Jb);y.buffer=xb;y.divisor=Ta;y.normalized=nb;y.offset=gc;y.size=Bc;y.state=wc;y.stride=bb;y.type=kc;y.w=Mc;y.x=Ya;y.y=nd;y.z=Ab;$a&&T.destroyStream(Wb);e.buffer=oc;e.divisor=xc;e.normalized=hc;e.offset=cb;e.size=tc;e.state=Tb;e.stride=Yb;e.type=ec;e.w=ic;e.x=zc;e.y=Cc;e.z=dd;Tc&&T.destroyStream(Uc);k.buffer=jd;k.divisor=Dd;k.normalized=ze;k.offset=xd;k.size=kd;k.state=Fe;k.stride=Td;k.type=he;k.w=
ee;k.x=Ud;k.y=Nd;k.z=Kd;qd&&T.destroyStream(Wc);g.buffer=ie;g.divisor=ve;g.normalized=fe;g.offset=pe;g.size=Rc;g.state=id;g.stride=we;g.type=se;g.w=Qd;g.x=Vd;g.y=Wd;g.z=Xd;n.buffer=qe;n.divisor=Ce;n.normalized=Ge;n.offset=te;n.size=Ve;n.state=We;n.stride=Re;n.type=xe;n.w=Je;n.x=Le;n.y=Me;n.z=Ne;p.buffer=Ke;p.divisor=Rd;p.normalized=ae;p.offset=de;p.size=ge;p.state=Oe;p.stride=Ld;p.type=Yd;p.w=He;p.x=Pe;p.y=df;p.z=cf;J.vert=Xe;J.frag=Se;S.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,
d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,ta,I,r,E,B,aa,H,F,D,ka,t,ba,L,G,ua,T,W,S){var O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca,ia,X,va,Ka,Ga,eb,Y;O=a.attributes;M=a.buffer;N=a.context;Q=a.current;R=a.draw;qa=a.elements;na=a.extensions;J=a.framebuffer;K=a.gl;da=a.isBufferArgs;U=a.next;la=a.shader;ha=a.uniforms;Aa=a.vao;xa=U.blend_color;ca=Q.blend_color;Da=U.blend_equation;ja=Q.blend_equation;oa=U.blend_func;Ba=Q.blend_func;Qa=U.colorMask;
Fa=Q.colorMask;Hb=U.depth_range;Ua=Q.depth_range;ga=U.polygonOffset_offset;ea=Q.polygonOffset_offset;sa=U.sample_coverage;wa=Q.sample_coverage;Ea=U.scissor_box;rb=Q.scissor_box;Gb=U.stencil_func;Z=Q.stencil_func;V=U.stencil_opBack;ya=Q.stencil_opBack;Ha=U.stencil_opFront;pa=Q.stencil_opFront;za=U.viewport;Ca=Q.viewport;ia={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={divisor:1,offset:0,stride:4};va={divisor:1,offset:8,stride:8};Ka={divisor:1,offset:4,
stride:4};Ga={divisor:1,offset:16,stride:8};eb={divisor:1,offset:24,stride:8};Y={divisor:1,offset:0,stride:8};return{batch:function(c,e){var b,a,k,h,f,g;b=J.next;b!==J.cur&&(b?K.bindFramebuffer(36160,b.framebuffer):K.bindFramebuffer(36160,null),J.cur=b);if(Q.dirty){var n,p,w,z,u,y,C,l,P,za,ha,xa,oa,Ea,Da,la,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb;n=U.dither;n!==Q.dither&&(n?K.enable(3024):K.disable(3024),Q.dither=n);p=U.depth_func;p!==Q.depth_func&&(K.depthFunc(p),Q.depth_func=p);w=Hb[0];z=Hb[1];
if(w!==Ua[0]||z!==Ua[1])K.depthRange(w,z),Ua[0]=w,Ua[1]=z;u=U.depth_mask;u!==Q.depth_mask&&(K.depthMask(u),Q.depth_mask=u);y=Qa[0];C=Qa[1];l=Qa[2];P=Qa[3];if(y!==Fa[0]||C!==Fa[1]||l!==Fa[2]||P!==Fa[3])K.colorMask(y,C,l,P),Fa[0]=y,Fa[1]=C,Fa[2]=l,Fa[3]=P;za=U.frontFace;za!==Q.frontFace&&(K.frontFace(za),Q.frontFace=za);ha=U.lineWidth;ha!==Q.lineWidth&&(K.lineWidth(ha),Q.lineWidth=ha);xa=U.polygonOffset_enable;xa!==Q.polygonOffset_enable&&(xa?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=
xa);oa=ga[0];Ea=ga[1];if(oa!==ea[0]||Ea!==ea[1])K.polygonOffset(oa,Ea),ea[0]=oa,ea[1]=Ea;Da=U.sample_alpha;Da!==Q.sample_alpha&&(Da?K.enable(32926):K.disable(32926),Q.sample_alpha=Da);la=U.sample_enable;la!==Q.sample_enable&&(la?K.enable(32928):K.disable(32928),Q.sample_enable=la);be=sa[0];Md=sa[1];if(be!==wa[0]||Md!==wa[1])K.sampleCoverage(be,Md),wa[0]=be,wa[1]=Md;Ed=U.stencil_mask;Ed!==Q.stencil_mask&&(K.stencilMask(Ed),Q.stencil_mask=Ed);pd=Gb[0];bd=Gb[1];td=Gb[2];if(pd!==Z[0]||bd!==Z[1]||td!==
Z[2])K.stencilFunc(pd,bd,td),Z[0]=pd,Z[1]=bd,Z[2]=td;Oc=Ha[0];rd=Ha[1];Gc=Ha[2];gd=Ha[3];if(Oc!==pa[0]||rd!==pa[1]||Gc!==pa[2]||gd!==pa[3])K.stencilOpSeparate(Oc,rd,Gc,gd),pa[0]=Oc,pa[1]=rd,pa[2]=Gc,pa[3]=gd;Sc=V[0];md=V[1];Vb=V[2];Eb=V[3];if(Sc!==ya[0]||md!==ya[1]||Vb!==ya[2]||Eb!==ya[3])K.stencilOpSeparate(Sc,md,Vb,Eb),ya[0]=Sc,ya[1]=md,ya[2]=Vb,ya[3]=Eb}K.blendColor(0,0,0,0);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=0;K.enable(3042);Q.blend_enable=!0;K.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=
32774;K.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;K.enable(2884);Q.cull_enable=!0;K.cullFace(1029);Q.cull_face=1029;K.enable(3089);Q.scissor_enable=!0;K.disable(2960);Q.stencil_enable=!1;if(a=Q.profile)k=performance.now(),d.count+=e;K.useProgram(A.program);h=na.angle_instanced_arrays;var vc,zb,yc,Bb,Lc;Aa.setVAO(null);vc=F.location;zb=O[vc];zb.buffer||K.enableVertexAttribArray(vc);if(5126!==zb.type||1!==zb.size||zb.buffer!==q||!1!==zb.normalized||0!==zb.offset||8!==zb.stride)K.bindBuffer(34962,
q.buffer),K.vertexAttribPointer(vc,1,5126,!1,8,0),zb.type=5126,zb.size=1,zb.buffer=q,zb.normalized=!1,zb.offset=0,zb.stride=8;0!==zb.divisor&&(h.vertexAttribDivisorANGLE(vc,0),zb.divisor=0);yc=D.location;Bb=O[yc];Bb.buffer||K.enableVertexAttribArray(yc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==m||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)K.bindBuffer(34962,m.buffer),K.vertexAttribPointer(yc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=m,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&
(h.vertexAttribDivisorANGLE(yc,0),Bb.divisor=0);(Lc=R.elements)?K.bindBuffer(34963,Lc.buffer.buffer):Aa.currentVAO&&(Lc=qa.getElements(Aa.currentVAO.elements))&&K.bindBuffer(34963,Lc.buffer.buffer);for(f=0;f<e;++f){g=c[f];var mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,
tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc;mc=g.viewport;Hc=mc.x|0;hd=mc.y|0;cd="width"in mc?mc.width|0:N.framebufferWidth-Hc;Ec="height"in mc?mc.height|0:N.framebufferHeight-hd;fc=N.viewportWidth;N.viewportWidth=cd;Ic=N.viewportHeight;N.viewportHeight=Ec;K.viewport(Hc,hd,cd,Ec);Ca[0]=Hc;Ca[1]=hd;Ca[2]=cd;Ca[3]=Ec;(pc=ma.call(this,N,g,f))?K.enable(2929):K.disable(2929);Q.depth_enable=pc;rc=
g.viewport;nc=rc.x|0;qc=rc.y|0;ob="width"in rc?rc.width|0:N.framebufferWidth-nc;Pc="height"in rc?rc.height|0:N.framebufferHeight-qc;K.scissor(nc,qc,ob,Pc);rb[0]=nc;rb[1]=qc;rb[2]=ob;rb[3]=Pc;va.buffer=g.positionBuffer;Zb=!1;gb=null;Mb=0;ab=!1;Wa=jb=0;Jc=1;Nb=0;Ib=5126;Fb=kb=Ob=sc=0;da(va)?(Zb=!0,gb=M.createStream(34962,va),Ib=gb.dtype):(gb=M.getBuffer(va))?Ib=gb.dtype:"constant"in va?(Jc=2,"number"===typeof va.constant?(Ob=va.constant,kb=Fb=sc=0):(Ob=0<va.constant.length?va.constant[0]:0,kb=1<va.constant.length?
va.constant[1]:0,Fb=2<va.constant.length?va.constant[2]:0,sc=3<va.constant.length?va.constant[3]:0)):(gb=da(va.buffer)?M.createStream(34962,va.buffer):M.getBuffer(va.buffer),Ib="type"in va?ia[va.type]:gb.dtype,ab=!!va.normalized,Wa=va.size|0,jb=va.offset|0,Nb=va.stride|0,Mb=va.divisor|0);Cb=I.location;yb=O[Cb];if(1===Jc){yb.buffer||K.enableVertexAttribArray(Cb);hb=Wa||2;if(yb.type!==Ib||yb.size!==hb||yb.buffer!==gb||yb.normalized!==ab||yb.offset!==jb||yb.stride!==Nb)K.bindBuffer(34962,gb.buffer),
K.vertexAttribPointer(Cb,hb,Ib,ab,Nb,jb),yb.type=Ib,yb.size=hb,yb.buffer=gb,yb.normalized=ab,yb.offset=jb,yb.stride=Nb;yb.divisor!==Mb&&(h.vertexAttribDivisorANGLE(Cb,Mb),yb.divisor=Mb)}else if(yb.buffer&&(K.disableVertexAttribArray(Cb),yb.buffer=null),yb.x!==Ob||yb.y!==kb||yb.z!==Fb||yb.w!==sc)K.vertexAttrib4f(Cb,Ob,kb,Fb,sc),yb.x=Ob,yb.y=kb,yb.z=Fb,yb.w=sc;Ga.buffer=g.positionBuffer;$b=!1;Pb=null;qb=0;Sa=!1;sb=Ub=0;jc=1;ib=0;pb=5126;db=La=tb=Ja=0;da(Ga)?($b=!0,Pb=M.createStream(34962,Ga),pb=Pb.dtype):
(Pb=M.getBuffer(Ga))?pb=Pb.dtype:"constant"in Ga?(jc=2,"number"===typeof Ga.constant?(tb=Ga.constant,La=db=Ja=0):(tb=0<Ga.constant.length?Ga.constant[0]:0,La=1<Ga.constant.length?Ga.constant[1]:0,db=2<Ga.constant.length?Ga.constant[2]:0,Ja=3<Ga.constant.length?Ga.constant[3]:0)):(Pb=da(Ga.buffer)?M.createStream(34962,Ga.buffer):M.getBuffer(Ga.buffer),pb="type"in Ga?ia[Ga.type]:Pb.dtype,Sa=!!Ga.normalized,sb=Ga.size|0,Ub=Ga.offset|0,ib=Ga.stride|0,qb=Ga.divisor|0);fb=E.location;Na=O[fb];if(1===jc){Na.buffer||
K.enableVertexAttribArray(fb);lb=sb||2;if(Na.type!==pb||Na.size!==lb||Na.buffer!==Pb||Na.normalized!==Sa||Na.offset!==Ub||Na.stride!==ib)K.bindBuffer(34962,Pb.buffer),K.vertexAttribPointer(fb,lb,pb,Sa,ib,Ub),Na.type=pb,Na.size=lb,Na.buffer=Pb,Na.normalized=Sa,Na.offset=Ub,Na.stride=ib;Na.divisor!==qb&&(h.vertexAttribDivisorANGLE(fb,qb),Na.divisor=qb)}else if(Na.buffer&&(K.disableVertexAttribArray(fb),Na.buffer=null),Na.x!==tb||Na.y!==La||Na.z!==db||Na.w!==Ja)K.vertexAttrib4f(fb,tb,La,db,Ja),Na.x=
tb,Na.y=La,Na.z=db,Na.w=Ja;eb.buffer=g.positionBuffer;Xa=!1;vb=null;ub=0;Pa=!1;Va=Dc=0;Jb=1;Db=0;Ma=5126;Lb=Kb=Za=zd=0;da(eb)?(Xa=!0,vb=M.createStream(34962,eb),Ma=vb.dtype):(vb=M.getBuffer(eb))?Ma=vb.dtype:"constant"in eb?(Jb=2,"number"===typeof eb.constant?(Za=eb.constant,Kb=Lb=zd=0):(Za=0<eb.constant.length?eb.constant[0]:0,Kb=1<eb.constant.length?eb.constant[1]:0,Lb=2<eb.constant.length?eb.constant[2]:0,zd=3<eb.constant.length?eb.constant[3]:0)):(vb=da(eb.buffer)?M.createStream(34962,eb.buffer):
M.getBuffer(eb.buffer),Ma="type"in eb?ia[eb.type]:vb.dtype,Pa=!!eb.normalized,Va=eb.size|0,Dc=eb.offset|0,Db=eb.stride|0,ub=eb.divisor|0);mb=ba.location;Oa=O[mb];if(1===Jb){Oa.buffer||K.enableVertexAttribArray(mb);ac=Va||2;if(Oa.type!==Ma||Oa.size!==ac||Oa.buffer!==vb||Oa.normalized!==Pa||Oa.offset!==Dc||Oa.stride!==Db)K.bindBuffer(34962,vb.buffer),K.vertexAttribPointer(mb,ac,Ma,Pa,Db,Dc),Oa.type=Ma,Oa.size=ac,Oa.buffer=vb,Oa.normalized=Pa,Oa.offset=Dc,Oa.stride=Db;Oa.divisor!==ub&&(h.vertexAttribDivisorANGLE(mb,
ub),Oa.divisor=ub)}else if(Oa.buffer&&(K.disableVertexAttribArray(mb),Oa.buffer=null),Oa.x!==Za||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==zd)K.vertexAttrib4f(mb,Za,Kb,Lb,zd),Oa.x=Za,Oa.y=Kb,Oa.z=Lb,Oa.w=zd;Y.buffer=g.positionBuffer;Ra=!1;wb=null;xb=0;Ta=!1;gc=nb=0;Bc=1;wc=0;bb=5126;nd=Ya=Mc=kc=0;da(Y)?(Ra=!0,wb=M.createStream(34962,Y),bb=wb.dtype):(wb=M.getBuffer(Y))?bb=wb.dtype:"constant"in Y?(Bc=2,"number"===typeof Y.constant?(Mc=Y.constant,Ya=nd=kc=0):(Mc=0<Y.constant.length?Y.constant[0]:0,Ya=1<Y.constant.length?
Y.constant[1]:0,nd=2<Y.constant.length?Y.constant[2]:0,kc=3<Y.constant.length?Y.constant[3]:0)):(wb=da(Y.buffer)?M.createStream(34962,Y.buffer):M.getBuffer(Y.buffer),bb="type"in Y?ia[Y.type]:wb.dtype,Ta=!!Y.normalized,gc=Y.size|0,nb=Y.offset|0,wc=Y.stride|0,xb=Y.divisor|0);Ab=G.location;$a=O[Ab];if(1===Bc){$a.buffer||K.enableVertexAttribArray(Ab);Wb=gc||2;if($a.type!==bb||$a.size!==Wb||$a.buffer!==wb||$a.normalized!==Ta||$a.offset!==nb||$a.stride!==wc)K.bindBuffer(34962,wb.buffer),K.vertexAttribPointer(Ab,
Wb,bb,Ta,wc,nb),$a.type=bb,$a.size=Wb,$a.buffer=wb,$a.normalized=Ta,$a.offset=nb,$a.stride=wc;$a.divisor!==xb&&(h.vertexAttribDivisorANGLE(Ab,xb),$a.divisor=xb)}else if($a.buffer&&(K.disableVertexAttribArray(Ab),$a.buffer=null),$a.x!==Mc||$a.y!==Ya||$a.z!==nd||$a.w!==kc)K.vertexAttrib4f(Ab,Mc,Ya,nd,kc),$a.x=Mc,$a.y=Ya,$a.z=nd,$a.w=kc;X.buffer=g.colorBuffer;uc=!1;Xb=null;Qb=0;Nc=!1;Od=Rb=0;Fc=1;sd=0;Qc=5126;xc=oc=vd=Yc=0;da(X)?(uc=!0,Xb=M.createStream(34962,X),Qc=Xb.dtype):(Xb=M.getBuffer(X))?Qc=Xb.dtype:
"constant"in X?(Fc=2,"number"===typeof X.constant?(vd=X.constant,oc=xc=Yc=0):(vd=0<X.constant.length?X.constant[0]:0,oc=1<X.constant.length?X.constant[1]:0,xc=2<X.constant.length?X.constant[2]:0,Yc=3<X.constant.length?X.constant[3]:0)):(Xb=da(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),Qc="type"in X?ia[X.type]:Xb.dtype,Nc=!!X.normalized,Od=X.size|0,Rb=X.offset|0,sd=X.stride|0,Qb=X.divisor|0);hc=ta.location;cb=O[hc];if(1===Fc){cb.buffer||K.enableVertexAttribArray(hc);tc=Od||4;if(cb.type!==
Qc||cb.size!==tc||cb.buffer!==Xb||cb.normalized!==Nc||cb.offset!==Rb||cb.stride!==sd)K.bindBuffer(34962,Xb.buffer),K.vertexAttribPointer(hc,tc,Qc,Nc,sd,Rb),cb.type=Qc,cb.size=tc,cb.buffer=Xb,cb.normalized=Nc,cb.offset=Rb,cb.stride=sd;cb.divisor!==Qb&&(h.vertexAttribDivisorANGLE(hc,Qb),cb.divisor=Qb)}else if(cb.buffer&&(K.disableVertexAttribArray(hc),cb.buffer=null),cb.x!==vd||cb.y!==oc||cb.z!==xc||cb.w!==Yc)K.vertexAttrib4f(hc,vd,oc,xc,Yc),cb.x=vd,cb.y=oc,cb.z=xc,cb.w=Yc;Ka.buffer=g.colorBuffer;Tb=
!1;Yb=null;ec=0;ic=!1;Cc=zc=0;dd=1;Tc=0;Uc=5126;ed=od=Zc=Vc=0;da(Ka)?(Tb=!0,Yb=M.createStream(34962,Ka),Uc=Yb.dtype):(Yb=M.getBuffer(Ka))?Uc=Yb.dtype:"constant"in Ka?(dd=2,"number"===typeof Ka.constant?(Zc=Ka.constant,od=ed=Vc=0):(Zc=0<Ka.constant.length?Ka.constant[0]:0,od=1<Ka.constant.length?Ka.constant[1]:0,ed=2<Ka.constant.length?Ka.constant[2]:0,Vc=3<Ka.constant.length?Ka.constant[3]:0)):(Yb=da(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),Uc="type"in Ka?ia[Ka.type]:Yb.dtype,
ic=!!Ka.normalized,Cc=Ka.size|0,zc=Ka.offset|0,Tc=Ka.stride|0,ec=Ka.divisor|0);$c=r.location;lc=O[$c];if(1===dd){lc.buffer||K.enableVertexAttribArray($c);dc=Cc||4;if(lc.type!==Uc||lc.size!==dc||lc.buffer!==Yb||lc.normalized!==ic||lc.offset!==zc||lc.stride!==Tc)K.bindBuffer(34962,Yb.buffer),K.vertexAttribPointer($c,dc,Uc,ic,Tc,zc),lc.type=Uc,lc.size=dc,lc.buffer=Yb,lc.normalized=ic,lc.offset=zc,lc.stride=Tc;lc.divisor!==ec&&(h.vertexAttribDivisorANGLE($c,ec),lc.divisor=ec)}else if(lc.buffer&&(K.disableVertexAttribArray($c),
lc.buffer=null),lc.x!==Zc||lc.y!==od||lc.z!==ed||lc.w!==Vc)K.vertexAttrib4f($c,Zc,od,ed,Vc),lc.x=Zc,lc.y=od,lc.z=ed,lc.w=Vc;ad=g.scale;Xc=ad[0];Ac=ad[1];f&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,K.uniform2f(ua.location,Xc,Ac));Dd=g.translate;ze=Dd[0];kd=Dd[1];f&&xd===ze&&Fe===kd||(xd=ze,Fe=kd,K.uniform2f(W.location,ze,kd));Td=g.thickness;f&&he===Td||(he=Td,K.uniform1f(T.location,Td));ee=g.depth;f&&Ud===ee||(Ud=ee,K.uniform1f(H.location,ee));Nd=x.call(this,N,g,f);Kd=Nd[0];Wc=Nd[1];ud=Nd[2];yd=Nd[3];f&&qd===
Kd&&wd===Wc&&ld===ud&&Fd===yd||(qd=Kd,wd=Wc,ld=ud,Fd=yd,K.uniform4f(S.location,Kd,Wc,ud,yd));Hd=g.miterLimit;f&&ke===Hd||(ke=Hd,K.uniform1f(ka.location,Hd));ne=v.call(this,N,g,f);f&&ue===ne||(ue=ne,K.uniform1f(t.location,ne));oe=g.dashLength;f&&le===oe||(le=oe,K.uniform1f(B.location,oe));ie=g.opacity;f&&ve===ie||(ve=ie,K.uniform1f(L.location,ie));(fe=g.dashTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);pe=fe._texture;K.uniform1i(aa.location,pe.bind());Rc=g.count;0<Rc?Lc?h.drawElementsInstancedANGLE(5,
4,Lc.type,0<<(Lc.type-5121>>1),Rc):h.drawArraysInstancedANGLE(5,0,4,Rc):0>Rc&&(Lc?K.drawElements(5,4,Lc.type,0<<(Lc.type-5121>>1)):K.drawArrays(5,0,4));N.viewportWidth=fc;N.viewportHeight=Ic;Zb&&M.destroyStream(gb);$b&&M.destroyStream(Pb);Xa&&M.destroyStream(vb);Ra&&M.destroyStream(wb);uc&&M.destroyStream(Xb);Tb&&M.destroyStream(Yb);pe.unbind()}Q.dirty=!0;Aa.setVAO(null);a&&(d.cpuTime+=performance.now()-k)},draw:function(c){var e,a,k,h,g,n,p,w,z,A,y,v,x,C,ma,za,ha,xa,oa,Ea,Da,la,me,be,Md,Ed,pd,bd,
td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od;e=J.next;e!==J.cur&&(e?K.bindFramebuffer(36160,e.framebuffer):K.bindFramebuffer(36160,null),J.cur=e);if(Q.dirty){var Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac;Fc=
U.dither;Fc!==Q.dither&&(Fc?K.enable(3024):K.disable(3024),Q.dither=Fc);sd=U.depth_func;sd!==Q.depth_func&&(K.depthFunc(sd),Q.depth_func=sd);Qc=Hb[0];Yc=Hb[1];if(Qc!==Ua[0]||Yc!==Ua[1])K.depthRange(Qc,Yc),Ua[0]=Qc,Ua[1]=Yc;vd=U.depth_mask;vd!==Q.depth_mask&&(K.depthMask(vd),Q.depth_mask=vd);oc=Qa[0];xc=Qa[1];hc=Qa[2];cb=Qa[3];if(oc!==Fa[0]||xc!==Fa[1]||hc!==Fa[2]||cb!==Fa[3])K.colorMask(oc,xc,hc,cb),Fa[0]=oc,Fa[1]=xc,Fa[2]=hc,Fa[3]=cb;tc=U.frontFace;tc!==Q.frontFace&&(K.frontFace(tc),Q.frontFace=
tc);Tb=U.lineWidth;Tb!==Q.lineWidth&&(K.lineWidth(Tb),Q.lineWidth=Tb);Yb=U.polygonOffset_enable;Yb!==Q.polygonOffset_enable&&(Yb?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=Yb);ec=ga[0];ic=ga[1];if(ec!==ea[0]||ic!==ea[1])K.polygonOffset(ec,ic),ea[0]=ec,ea[1]=ic;zc=U.sample_alpha;zc!==Q.sample_alpha&&(zc?K.enable(32926):K.disable(32926),Q.sample_alpha=zc);Cc=U.sample_enable;Cc!==Q.sample_enable&&(Cc?K.enable(32928):K.disable(32928),Q.sample_enable=Cc);dd=sa[0];Tc=sa[1];if(dd!==wa[0]||Tc!==
wa[1])K.sampleCoverage(dd,Tc),wa[0]=dd,wa[1]=Tc;Uc=U.stencil_mask;Uc!==Q.stencil_mask&&(K.stencilMask(Uc),Q.stencil_mask=Uc);Vc=Gb[0];Zc=Gb[1];od=Gb[2];if(Vc!==Z[0]||Zc!==Z[1]||od!==Z[2])K.stencilFunc(Vc,Zc,od),Z[0]=Vc,Z[1]=Zc,Z[2]=od;ed=Ha[0];$c=Ha[1];lc=Ha[2];dc=Ha[3];if(ed!==pa[0]||$c!==pa[1]||lc!==pa[2]||dc!==pa[3])K.stencilOpSeparate(ed,$c,lc,dc),pa[0]=ed,pa[1]=$c,pa[2]=lc,pa[3]=dc;ad=V[0];Xc=V[1];fd=V[2];Ac=V[3];if(ad!==ya[0]||Xc!==ya[1]||fd!==ya[2]||Ac!==ya[3])K.stencilOpSeparate(ad,Xc,fd,
Ac),ya[0]=ad,ya[1]=Xc,ya[2]=fd,ya[3]=Ac}a=c.viewport;k=a.x|0;h=a.y|0;g="width"in a?a.width|0:N.framebufferWidth-k;n="height"in a?a.height|0:N.framebufferHeight-h;p=N.viewportWidth;N.viewportWidth=g;w=N.viewportHeight;N.viewportHeight=n;K.viewport(k,h,g,n);Ca[0]=k;Ca[1]=h;Ca[2]=g;Ca[3]=n;K.blendColor(0,0,0,0);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=0;K.enable(3042);Q.blend_enable=!0;K.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;K.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;
Ba[3]=1;K.enable(2884);Q.cull_enable=!0;K.cullFace(1029);Q.cull_face=1029;(z=l.call(this,N,c,0))?K.enable(2929):K.disable(2929);Q.depth_enable=z;A=c.viewport;y=A.x|0;v=A.y|0;x="width"in A?A.width|0:N.framebufferWidth-y;C="height"in A?A.height|0:N.framebufferHeight-v;K.scissor(y,v,x,C);rb[0]=y;rb[1]=v;rb[2]=x;rb[3]=C;K.enable(3089);Q.scissor_enable=!0;K.disable(2960);Q.stencil_enable=!1;if(ma=Q.profile)za=performance.now(),d.count++;K.useProgram(u.program);ha=na.angle_instanced_arrays;Aa.setVAO(null);
va.buffer=c.positionBuffer;xa=!1;oa=null;Ea=0;Da=!1;me=la=0;be=1;Md=0;Ed=5126;Oc=td=bd=pd=0;da(va)?(xa=!0,oa=M.createStream(34962,va),Ed=oa.dtype):(oa=M.getBuffer(va))?Ed=oa.dtype:"constant"in va?(be=2,"number"===typeof va.constant?(bd=va.constant,td=Oc=pd=0):(bd=0<va.constant.length?va.constant[0]:0,td=1<va.constant.length?va.constant[1]:0,Oc=2<va.constant.length?va.constant[2]:0,pd=3<va.constant.length?va.constant[3]:0)):(oa=da(va.buffer)?M.createStream(34962,va.buffer):M.getBuffer(va.buffer),Ed=
"type"in va?ia[va.type]:oa.dtype,Da=!!va.normalized,me=va.size|0,la=va.offset|0,Md=va.stride|0,Ea=va.divisor|0);rd=I.location;Gc=O[rd];if(1===be){Gc.buffer||K.enableVertexAttribArray(rd);gd=me||2;if(Gc.type!==Ed||Gc.size!==gd||Gc.buffer!==oa||Gc.normalized!==Da||Gc.offset!==la||Gc.stride!==Md)K.bindBuffer(34962,oa.buffer),K.vertexAttribPointer(rd,gd,Ed,Da,Md,la),Gc.type=Ed,Gc.size=gd,Gc.buffer=oa,Gc.normalized=Da,Gc.offset=la,Gc.stride=Md;Gc.divisor!==Ea&&(ha.vertexAttribDivisorANGLE(rd,Ea),Gc.divisor=
Ea)}else if(Gc.buffer&&(K.disableVertexAttribArray(rd),Gc.buffer=null),Gc.x!==bd||Gc.y!==td||Gc.z!==Oc||Gc.w!==pd)K.vertexAttrib4f(rd,bd,td,Oc,pd),Gc.x=bd,Gc.y=td,Gc.z=Oc,Gc.w=pd;Ga.buffer=c.positionBuffer;Sc=!1;md=null;Vb=0;Eb=!1;zb=vc=0;yc=1;Bb=0;Lc=5126;cd=hd=Hc=mc=0;da(Ga)?(Sc=!0,md=M.createStream(34962,Ga),Lc=md.dtype):(md=M.getBuffer(Ga))?Lc=md.dtype:"constant"in Ga?(yc=2,"number"===typeof Ga.constant?(Hc=Ga.constant,hd=cd=mc=0):(Hc=0<Ga.constant.length?Ga.constant[0]:0,hd=1<Ga.constant.length?
Ga.constant[1]:0,cd=2<Ga.constant.length?Ga.constant[2]:0,mc=3<Ga.constant.length?Ga.constant[3]:0)):(md=da(Ga.buffer)?M.createStream(34962,Ga.buffer):M.getBuffer(Ga.buffer),Lc="type"in Ga?ia[Ga.type]:md.dtype,Eb=!!Ga.normalized,zb=Ga.size|0,vc=Ga.offset|0,Bb=Ga.stride|0,Vb=Ga.divisor|0);Ec=E.location;fc=O[Ec];if(1===yc){fc.buffer||K.enableVertexAttribArray(Ec);Ic=zb||2;if(fc.type!==Lc||fc.size!==Ic||fc.buffer!==md||fc.normalized!==Eb||fc.offset!==vc||fc.stride!==Bb)K.bindBuffer(34962,md.buffer),
K.vertexAttribPointer(Ec,Ic,Lc,Eb,Bb,vc),fc.type=Lc,fc.size=Ic,fc.buffer=md,fc.normalized=Eb,fc.offset=vc,fc.stride=Bb;fc.divisor!==Vb&&(ha.vertexAttribDivisorANGLE(Ec,Vb),fc.divisor=Vb)}else if(fc.buffer&&(K.disableVertexAttribArray(Ec),fc.buffer=null),fc.x!==Hc||fc.y!==hd||fc.z!==cd||fc.w!==mc)K.vertexAttrib4f(Ec,Hc,hd,cd,mc),fc.x=Hc,fc.y=hd,fc.z=cd,fc.w=mc;eb.buffer=c.positionBuffer;pc=!1;rc=null;nc=0;qc=!1;Pc=ob=0;Zb=1;gb=0;Mb=5126;Jc=Wa=jb=ab=0;da(eb)?(pc=!0,rc=M.createStream(34962,eb),Mb=rc.dtype):
(rc=M.getBuffer(eb))?Mb=rc.dtype:"constant"in eb?(Zb=2,"number"===typeof eb.constant?(jb=eb.constant,Wa=Jc=ab=0):(jb=0<eb.constant.length?eb.constant[0]:0,Wa=1<eb.constant.length?eb.constant[1]:0,Jc=2<eb.constant.length?eb.constant[2]:0,ab=3<eb.constant.length?eb.constant[3]:0)):(rc=da(eb.buffer)?M.createStream(34962,eb.buffer):M.getBuffer(eb.buffer),Mb="type"in eb?ia[eb.type]:rc.dtype,qc=!!eb.normalized,Pc=eb.size|0,ob=eb.offset|0,gb=eb.stride|0,nc=eb.divisor|0);Nb=ba.location;Ib=O[Nb];if(1===Zb){Ib.buffer||
K.enableVertexAttribArray(Nb);sc=Pc||2;if(Ib.type!==Mb||Ib.size!==sc||Ib.buffer!==rc||Ib.normalized!==qc||Ib.offset!==ob||Ib.stride!==gb)K.bindBuffer(34962,rc.buffer),K.vertexAttribPointer(Nb,sc,Mb,qc,gb,ob),Ib.type=Mb,Ib.size=sc,Ib.buffer=rc,Ib.normalized=qc,Ib.offset=ob,Ib.stride=gb;Ib.divisor!==nc&&(ha.vertexAttribDivisorANGLE(Nb,nc),Ib.divisor=nc)}else if(Ib.buffer&&(K.disableVertexAttribArray(Nb),Ib.buffer=null),Ib.x!==jb||Ib.y!==Wa||Ib.z!==Jc||Ib.w!==ab)K.vertexAttrib4f(Nb,jb,Wa,Jc,ab),Ib.x=
jb,Ib.y=Wa,Ib.z=Jc,Ib.w=ab;Y.buffer=c.positionBuffer;Ob=!1;kb=null;Fb=0;Cb=!1;hb=yb=0;$b=1;Pb=0;qb=5126;jc=sb=Ub=Sa=0;da(Y)?(Ob=!0,kb=M.createStream(34962,Y),qb=kb.dtype):(kb=M.getBuffer(Y))?qb=kb.dtype:"constant"in Y?($b=2,"number"===typeof Y.constant?(Ub=Y.constant,sb=jc=Sa=0):(Ub=0<Y.constant.length?Y.constant[0]:0,sb=1<Y.constant.length?Y.constant[1]:0,jc=2<Y.constant.length?Y.constant[2]:0,Sa=3<Y.constant.length?Y.constant[3]:0)):(kb=da(Y.buffer)?M.createStream(34962,Y.buffer):M.getBuffer(Y.buffer),
qb="type"in Y?ia[Y.type]:kb.dtype,Cb=!!Y.normalized,hb=Y.size|0,yb=Y.offset|0,Pb=Y.stride|0,Fb=Y.divisor|0);ib=G.location;pb=O[ib];if(1===$b){pb.buffer||K.enableVertexAttribArray(ib);Ja=hb||2;if(pb.type!==qb||pb.size!==Ja||pb.buffer!==kb||pb.normalized!==Cb||pb.offset!==yb||pb.stride!==Pb)K.bindBuffer(34962,kb.buffer),K.vertexAttribPointer(ib,Ja,qb,Cb,Pb,yb),pb.type=qb,pb.size=Ja,pb.buffer=kb,pb.normalized=Cb,pb.offset=yb,pb.stride=Pb;pb.divisor!==Fb&&(ha.vertexAttribDivisorANGLE(ib,Fb),pb.divisor=
Fb)}else if(pb.buffer&&(K.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==sb||pb.z!==jc||pb.w!==Sa)K.vertexAttrib4f(ib,Ub,sb,jc,Sa),pb.x=Ub,pb.y=sb,pb.z=jc,pb.w=Sa;X.buffer=c.colorBuffer;tb=!1;La=null;db=0;fb=!1;lb=Na=0;Xa=1;vb=0;ub=5126;Jb=Va=Dc=Pa=0;da(X)?(tb=!0,La=M.createStream(34962,X),ub=La.dtype):(La=M.getBuffer(X))?ub=La.dtype:"constant"in X?(Xa=2,"number"===typeof X.constant?(Dc=X.constant,Va=Jb=Pa=0):(Dc=0<X.constant.length?X.constant[0]:0,Va=1<X.constant.length?X.constant[1]:
0,Jb=2<X.constant.length?X.constant[2]:0,Pa=3<X.constant.length?X.constant[3]:0)):(La=da(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),ub="type"in X?ia[X.type]:La.dtype,fb=!!X.normalized,lb=X.size|0,Na=X.offset|0,vb=X.stride|0,db=X.divisor|0);Db=ta.location;Ma=O[Db];if(1===Xa){Ma.buffer||K.enableVertexAttribArray(Db);zd=lb||4;if(Ma.type!==ub||Ma.size!==zd||Ma.buffer!==La||Ma.normalized!==fb||Ma.offset!==Na||Ma.stride!==vb)K.bindBuffer(34962,La.buffer),K.vertexAttribPointer(Db,zd,
ub,fb,vb,Na),Ma.type=ub,Ma.size=zd,Ma.buffer=La,Ma.normalized=fb,Ma.offset=Na,Ma.stride=vb;Ma.divisor!==db&&(ha.vertexAttribDivisorANGLE(Db,db),Ma.divisor=db)}else if(Ma.buffer&&(K.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Dc||Ma.y!==Va||Ma.z!==Jb||Ma.w!==Pa)K.vertexAttrib4f(Db,Dc,Va,Jb,Pa),Ma.x=Dc,Ma.y=Va,Ma.z=Jb,Ma.w=Pa;Ka.buffer=c.colorBuffer;Za=!1;Kb=null;Lb=0;mb=!1;ac=Oa=0;Ra=1;wb=0;xb=5126;Bc=gc=nb=Ta=0;da(Ka)?(Za=!0,Kb=M.createStream(34962,Ka),xb=Kb.dtype):(Kb=M.getBuffer(Ka))?xb=
Kb.dtype:"constant"in Ka?(Ra=2,"number"===typeof Ka.constant?(nb=Ka.constant,gc=Bc=Ta=0):(nb=0<Ka.constant.length?Ka.constant[0]:0,gc=1<Ka.constant.length?Ka.constant[1]:0,Bc=2<Ka.constant.length?Ka.constant[2]:0,Ta=3<Ka.constant.length?Ka.constant[3]:0)):(Kb=da(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),xb="type"in Ka?ia[Ka.type]:Kb.dtype,mb=!!Ka.normalized,ac=Ka.size|0,Oa=Ka.offset|0,wb=Ka.stride|0,Lb=Ka.divisor|0);wc=r.location;bb=O[wc];if(1===Ra){bb.buffer||K.enableVertexAttribArray(wc);
kc=ac||4;if(bb.type!==xb||bb.size!==kc||bb.buffer!==Kb||bb.normalized!==mb||bb.offset!==Oa||bb.stride!==wb)K.bindBuffer(34962,Kb.buffer),K.vertexAttribPointer(wc,kc,xb,mb,wb,Oa),bb.type=xb,bb.size=kc,bb.buffer=Kb,bb.normalized=mb,bb.offset=Oa,bb.stride=wb;bb.divisor!==Lb&&(ha.vertexAttribDivisorANGLE(wc,Lb),bb.divisor=Lb)}else if(bb.buffer&&(K.disableVertexAttribArray(wc),bb.buffer=null),bb.x!==nb||bb.y!==gc||bb.z!==Bc||bb.w!==Ta)K.vertexAttrib4f(wc,nb,gc,Bc,Ta),bb.x=nb,bb.y=gc,bb.z=Bc,bb.w=Ta;Mc=
F.location;Ya=O[Mc];Ya.buffer||K.enableVertexAttribArray(Mc);if(5126!==Ya.type||1!==Ya.size||Ya.buffer!==q||!1!==Ya.normalized||0!==Ya.offset||8!==Ya.stride)K.bindBuffer(34962,q.buffer),K.vertexAttribPointer(Mc,1,5126,!1,8,0),Ya.type=5126,Ya.size=1,Ya.buffer=q,Ya.normalized=!1,Ya.offset=0,Ya.stride=8;0!==Ya.divisor&&(ha.vertexAttribDivisorANGLE(Mc,0),Ya.divisor=0);nd=D.location;Ab=O[nd];Ab.buffer||K.enableVertexAttribArray(nd);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==m||!1!==Ab.normalized||4!==
Ab.offset||8!==Ab.stride)K.bindBuffer(34962,m.buffer),K.vertexAttribPointer(nd,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=m,Ab.normalized=!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ha.vertexAttribDivisorANGLE(nd,0),Ab.divisor=0);$a=c.scale;K.uniform2f(ua.location,$a[0],$a[1]);Wb=c.translate;K.uniform2f(W.location,Wb[0],Wb[1]);K.uniform1f(T.location,c.thickness);K.uniform1f(H.location,c.depth);uc=b.call(this,N,c,0);K.uniform4f(S.location,uc[0],uc[1],uc[2],uc[3]);K.uniform1f(ka.location,c.miterLimit);
Xb=f.call(this,N,c,0);K.uniform1f(t.location,Xb);K.uniform1f(B.location,c.dashLength);K.uniform1f(L.location,c.opacity);(Qb=c.dashTexture)&&"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Nc=Qb._texture;K.uniform1i(aa.location,Nc.bind());(Rb=R.elements)?K.bindBuffer(34963,Rb.buffer.buffer):Aa.currentVAO&&(Rb=qa.getElements(Aa.currentVAO.elements))&&K.bindBuffer(34963,Rb.buffer.buffer);Od=c.count;0<Od?Rb?ha.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),Od):ha.drawArraysInstancedANGLE(5,
0,4,Od):0>Od&&(Rb?K.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):K.drawArrays(5,0,4));Q.dirty=!0;Aa.setVAO(null);N.viewportWidth=p;N.viewportHeight=w;ma&&(d.cpuTime+=performance.now()-za);xa&&M.destroyStream(oa);Sc&&M.destroyStream(md);pc&&M.destroyStream(rc);Ob&&M.destroyStream(kb);tb&&M.destroyStream(La);Za&&M.destroyStream(Kb);Nc.unbind()},scope:function(b,a,f){var t,u,A,v,x,l,ga,P,J,ea,ma,V,B,Fa,sa,I,E,ya,Qa,D,Ha,K,O,H,Hb,Z,pa,ta,ca,F,r,S,wa,L,Ca,qa,T,ja,ra,Ua,Ba,aa,W,ba,ka,G,Gb,na,fa,Aa,rb,
ua,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,
Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;t=b.viewport;u=t.x|0;A=t.y|0;v="width"in t?t.width|0:N.framebufferWidth-u;x="height"in t?t.height|0:N.framebufferHeight-A;l=N.viewportWidth;N.viewportWidth=v;ga=N.viewportHeight;N.viewportHeight=x;P=za[0];za[0]=u;J=za[1];za[1]=A;ea=za[2];za[2]=v;ma=za[3];za[3]=x;V=xa[0];xa[0]=0;B=xa[1];xa[1]=0;Fa=xa[2];xa[2]=0;sa=xa[3];xa[3]=0;I=U.blend_enable;U.blend_enable=!0;E=Da[0];Da[0]=32774;ya=Da[1];Da[1]=32774;Qa=oa[0];
oa[0]=770;D=oa[1];oa[1]=771;Ha=oa[2];oa[2]=773;K=oa[3];oa[3]=1;O=U.cull_enable;U.cull_enable=!0;H=U.cull_face;U.cull_face=1029;Hb=c.call(this,N,b,f);Z=U.depth_enable;U.depth_enable=Hb;pa=b.viewport;ta=pa.x|0;ca=pa.y|0;F="width"in pa?pa.width|0:N.framebufferWidth-ta;r="height"in pa?pa.height|0:N.framebufferHeight-ca;S=Ea[0];Ea[0]=ta;wa=Ea[1];Ea[1]=ca;L=Ea[2];Ea[2]=F;Ca=Ea[3];Ea[3]=r;qa=U.scissor_enable;U.scissor_enable=!0;T=U.stencil_enable;U.stencil_enable=!1;if(ja=Q.profile)ra=performance.now(),
d.count++;Ua=R.offset;R.offset=0;Ba=R.count;R.count=4;aa=b.count;W=R.instances;R.instances=aa;ba=R.primitive;R.primitive=5;ka=b.dashLength;G=ha[23];ha[23]=ka;Gb=b.dashTexture;na=ha[24];ha[24]=Gb;fa=b.depth;Aa=ha[22];ha[22]=fa;rb=b.id;ua=ha[31];ha[31]=rb;Pc=b.miterLimit;Zb=ha[32];ha[32]=Pc;gb=h.call(this,N,b,f);Mb=ha[33];ha[33]=gb;ab=b.opacity;jb=ha[10];ha[10]=ab;Wa=N.pixelRatio;Jc=ha[34];ha[34]=Wa;Nb=b.scale;Ib=ha[6];ha[6]=Nb;sc=b.scaleFract;Ob=ha[7];ha[7]=sc;kb=b.thickness;Fb=ha[21];ha[21]=kb;Cb=
b.translate;yb=ha[8];ha[8]=Cb;hb=b.translateFract;$b=ha[9];ha[9]=hb;Pb=C.call(this,N,b,f);qb=ha[3];ha[3]=Pb;X.buffer=b.colorBuffer;Sa=!1;Ub=null;sb=0;jc=!1;pb=ib=0;Ja=1;tb=0;La=5126;lb=Na=fb=db=0;da(X)?(Sa=!0,Ub=M.createStream(34962,X),La=Ub.dtype):(Ub=M.getBuffer(X))?La=Ub.dtype:"constant"in X?(Ja=2,"number"===typeof X.constant?(fb=X.constant,Na=lb=db=0):(fb=0<X.constant.length?X.constant[0]:0,Na=1<X.constant.length?X.constant[1]:0,lb=2<X.constant.length?X.constant[2]:0,db=3<X.constant.length?X.constant[3]:
0)):(Ub=da(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),La="type"in X?ia[X.type]:Ub.dtype,jc=!!X.normalized,pb=X.size|0,ib=X.offset|0,tb=X.stride|0,sb=X.divisor|0);Xa=y.buffer;y.buffer=Ub;vb=y.divisor;y.divisor=sb;ub=y.normalized;y.normalized=jc;Pa=y.offset;y.offset=ib;Dc=y.size;y.size=pb;Va=y.state;y.state=Ja;Jb=y.stride;y.stride=tb;Db=y.type;y.type=La;Ma=y.w;y.w=db;zd=y.x;y.x=fb;Za=y.y;y.y=Na;Kb=y.z;y.z=lb;va.buffer=b.positionBuffer;Lb=!1;mb=null;Oa=0;ac=!1;wb=Ra=0;xb=1;Ta=0;nb=
5126;bb=wc=Bc=gc=0;da(va)?(Lb=!0,mb=M.createStream(34962,va),nb=mb.dtype):(mb=M.getBuffer(va))?nb=mb.dtype:"constant"in va?(xb=2,"number"===typeof va.constant?(Bc=va.constant,wc=bb=gc=0):(Bc=0<va.constant.length?va.constant[0]:0,wc=1<va.constant.length?va.constant[1]:0,bb=2<va.constant.length?va.constant[2]:0,gc=3<va.constant.length?va.constant[3]:0)):(mb=da(va.buffer)?M.createStream(34962,va.buffer):M.getBuffer(va.buffer),nb="type"in va?ia[va.type]:mb.dtype,ac=!!va.normalized,wb=va.size|0,Ra=va.offset|
0,Ta=va.stride|0,Oa=va.divisor|0);kc=e.buffer;e.buffer=mb;Mc=e.divisor;e.divisor=Oa;Ya=e.normalized;e.normalized=ac;nd=e.offset;e.offset=Ra;Ab=e.size;e.size=wb;$a=e.state;e.state=xb;Wb=e.stride;e.stride=Ta;uc=e.type;e.type=nb;Xb=e.w;e.w=gc;Qb=e.x;e.x=Bc;Nc=e.y;e.y=wc;Rb=e.z;e.z=bb;Ka.buffer=b.colorBuffer;Od=!1;Fc=null;sd=0;Qc=!1;vd=Yc=0;oc=1;xc=0;hc=5126;Yb=Tb=tc=cb=0;da(Ka)?(Od=!0,Fc=M.createStream(34962,Ka),hc=Fc.dtype):(Fc=M.getBuffer(Ka))?hc=Fc.dtype:"constant"in Ka?(oc=2,"number"===typeof Ka.constant?
(tc=Ka.constant,Tb=Yb=cb=0):(tc=0<Ka.constant.length?Ka.constant[0]:0,Tb=1<Ka.constant.length?Ka.constant[1]:0,Yb=2<Ka.constant.length?Ka.constant[2]:0,cb=3<Ka.constant.length?Ka.constant[3]:0)):(Fc=da(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),hc="type"in Ka?ia[Ka.type]:Fc.dtype,Qc=!!Ka.normalized,vd=Ka.size|0,Yc=Ka.offset|0,xc=Ka.stride|0,sd=Ka.divisor|0);ec=k.buffer;k.buffer=Fc;ic=k.divisor;k.divisor=sd;zc=k.normalized;k.normalized=Qc;Cc=k.offset;k.offset=Yc;dd=k.size;k.size=
vd;Tc=k.state;k.state=oc;Uc=k.stride;k.stride=xc;Vc=k.type;k.type=hc;Zc=k.w;k.w=cb;od=k.x;k.x=tc;ed=k.y;k.y=Tb;$c=k.z;k.z=Yb;Ga.buffer=b.positionBuffer;lc=!1;dc=null;ad=0;Xc=!1;Ac=fd=0;jd=1;Dd=0;ze=5126;Td=Fe=kd=xd=0;da(Ga)?(lc=!0,dc=M.createStream(34962,Ga),ze=dc.dtype):(dc=M.getBuffer(Ga))?ze=dc.dtype:"constant"in Ga?(jd=2,"number"===typeof Ga.constant?(kd=Ga.constant,Fe=Td=xd=0):(kd=0<Ga.constant.length?Ga.constant[0]:0,Fe=1<Ga.constant.length?Ga.constant[1]:0,Td=2<Ga.constant.length?Ga.constant[2]:
0,xd=3<Ga.constant.length?Ga.constant[3]:0)):(dc=da(Ga.buffer)?M.createStream(34962,Ga.buffer):M.getBuffer(Ga.buffer),ze="type"in Ga?ia[Ga.type]:dc.dtype,Xc=!!Ga.normalized,Ac=Ga.size|0,fd=Ga.offset|0,Dd=Ga.stride|0,ad=Ga.divisor|0);he=g.buffer;g.buffer=dc;ee=g.divisor;g.divisor=ad;Ud=g.normalized;g.normalized=Xc;Nd=g.offset;g.offset=fd;Kd=g.size;g.size=Ac;qd=g.state;g.state=jd;Wc=g.stride;g.stride=Dd;wd=g.type;g.type=ze;ud=g.w;g.w=xd;ld=g.x;g.x=kd;yd=g.y;g.y=Fe;Fd=g.z;g.z=Td;Hd=n.buffer;n.buffer=
q;ke=n.divisor;n.divisor=0;ne=n.normalized;n.normalized=!1;ue=n.offset;n.offset=0;oe=n.size;n.size=0;le=n.state;n.state=1;ie=n.stride;n.stride=8;ve=n.type;n.type=5126;fe=n.w;n.w=0;pe=n.x;n.x=0;Rc=n.y;n.y=0;id=n.z;n.z=0;we=p.buffer;p.buffer=m;se=p.divisor;p.divisor=0;Qd=p.normalized;p.normalized=!1;Vd=p.offset;p.offset=4;Wd=p.size;p.size=0;Xd=p.state;p.state=1;qe=p.stride;p.stride=8;Ce=p.type;p.type=5126;Ge=p.w;p.w=0;te=p.x;p.x=0;Ve=p.y;p.y=0;We=p.z;p.z=0;eb.buffer=b.positionBuffer;Re=!1;xe=null;Je=
0;Le=!1;Ne=Me=0;Ke=1;Rd=0;ae=5126;Ld=Oe=ge=de=0;da(eb)?(Re=!0,xe=M.createStream(34962,eb),ae=xe.dtype):(xe=M.getBuffer(eb))?ae=xe.dtype:"constant"in eb?(Ke=2,"number"===typeof eb.constant?(ge=eb.constant,Oe=Ld=de=0):(ge=0<eb.constant.length?eb.constant[0]:0,Oe=1<eb.constant.length?eb.constant[1]:0,Ld=2<eb.constant.length?eb.constant[2]:0,de=3<eb.constant.length?eb.constant[3]:0)):(xe=da(eb.buffer)?M.createStream(34962,eb.buffer):M.getBuffer(eb.buffer),ae="type"in eb?ia[eb.type]:xe.dtype,Le=!!eb.normalized,
Ne=eb.size|0,Me=eb.offset|0,Rd=eb.stride|0,Je=eb.divisor|0);Yd=w.buffer;w.buffer=xe;He=w.divisor;w.divisor=Je;Pe=w.normalized;w.normalized=Le;df=w.offset;w.offset=Me;cf=w.size;w.size=Ne;Xe=w.state;w.state=Ke;Se=w.stride;w.stride=Rd;bf=w.type;w.type=ae;af=w.w;w.w=de;Ye=w.x;w.x=ge;Ze=w.y;w.y=Oe;Zd=w.z;w.z=Ld;Y.buffer=b.positionBuffer;ce=!1;$e=null;kf=0;of=!1;lf=gf=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;da(Y)?(ce=!0,$e=M.createStream(34962,Y),sf=$e.dtype):($e=M.getBuffer(Y))?sf=$e.dtype:"constant"in Y?(mf=
2,"number"===typeof Y.constant?(tf=Y.constant,Cf=Df=pf=0):(tf=0<Y.constant.length?Y.constant[0]:0,Cf=1<Y.constant.length?Y.constant[1]:0,Df=2<Y.constant.length?Y.constant[2]:0,pf=3<Y.constant.length?Y.constant[3]:0)):($e=da(Y.buffer)?M.createStream(34962,Y.buffer):M.getBuffer(Y.buffer),sf="type"in Y?ia[Y.type]:$e.dtype,of=!!Y.normalized,lf=Y.size|0,gf=Y.offset|0,nf=Y.stride|0,kf=Y.divisor|0);Te=z.buffer;z.buffer=$e;Ie=z.divisor;z.divisor=kf;qf=z.normalized;z.normalized=of;rf=z.offset;z.offset=gf;
Ef=z.size;z.size=lf;Hf=z.state;z.state=mf;Bf=z.stride;z.stride=nf;Ff=z.type;z.type=sf;Gf=z.w;z.w=pf;xf=z.x;z.x=tf;yf=z.y;z.y=Cf;wf=z.z;z.z=Df;zf=la.vert;la.vert=36;Af=la.frag;la.frag=35;Q.dirty=!0;a(N,b,f);N.viewportWidth=l;N.viewportHeight=ga;za[0]=P;za[1]=J;za[2]=ea;za[3]=ma;xa[0]=V;xa[1]=B;xa[2]=Fa;xa[3]=sa;U.blend_enable=I;Da[0]=E;Da[1]=ya;oa[0]=Qa;oa[1]=D;oa[2]=Ha;oa[3]=K;U.cull_enable=O;U.cull_face=H;U.depth_enable=Z;Ea[0]=S;Ea[1]=wa;Ea[2]=L;Ea[3]=Ca;U.scissor_enable=qa;U.stencil_enable=T;ja&&
(d.cpuTime+=performance.now()-ra);R.offset=Ua;R.count=Ba;R.instances=W;R.primitive=ba;ha[23]=G;ha[24]=na;ha[22]=Aa;ha[31]=ua;ha[32]=Zb;ha[33]=Mb;ha[10]=jb;ha[34]=Jc;ha[6]=Ib;ha[7]=Ob;ha[21]=Fb;ha[8]=yb;ha[9]=$b;ha[3]=qb;Sa&&M.destroyStream(Ub);y.buffer=Xa;y.divisor=vb;y.normalized=ub;y.offset=Pa;y.size=Dc;y.state=Va;y.stride=Jb;y.type=Db;y.w=Ma;y.x=zd;y.y=Za;y.z=Kb;Lb&&M.destroyStream(mb);e.buffer=kc;e.divisor=Mc;e.normalized=Ya;e.offset=nd;e.size=Ab;e.state=$a;e.stride=Wb;e.type=uc;e.w=Xb;e.x=Qb;
e.y=Nc;e.z=Rb;Od&&M.destroyStream(Fc);k.buffer=ec;k.divisor=ic;k.normalized=zc;k.offset=Cc;k.size=dd;k.state=Tc;k.stride=Uc;k.type=Vc;k.w=Zc;k.x=od;k.y=ed;k.z=$c;lc&&M.destroyStream(dc);g.buffer=he;g.divisor=ee;g.normalized=Ud;g.offset=Nd;g.size=Kd;g.state=qd;g.stride=Wc;g.type=wd;g.w=ud;g.x=ld;g.y=yd;g.z=Fd;n.buffer=Hd;n.divisor=ke;n.normalized=ne;n.offset=ue;n.size=oe;n.state=le;n.stride=ie;n.type=ve;n.w=fe;n.x=pe;n.y=Rc;n.z=id;p.buffer=we;p.divisor=se;p.normalized=Qd;p.offset=Vd;p.size=Wd;p.state=
Xd;p.stride=qe;p.type=Ce;p.w=Ge;p.x=te;p.y=Ve;p.z=We;Re&&M.destroyStream(xe);w.buffer=Yd;w.divisor=He;w.normalized=Pe;w.offset=df;w.size=cf;w.state=Xe;w.stride=Se;w.type=bf;w.w=af;w.x=Ye;w.y=Ze;w.z=Zd;ce&&M.destroyStream($e);z.buffer=Te;z.divisor=Ie;z.normalized=qf;z.offset=rf;z.size=Ef;z.state=Hf;z.stride=Bf;z.type=Ff;z.w=Gf;z.x=xf;z.y=yf;z.z=wf;la.vert=zf;la.frag=Af;Q.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,d,l,u,q,m,b,f,c,h,
C,y,e,k,g,n,p,w,z){var A,ma,x,v,ta,I,r,E,B,aa,H,F,D,ka,t,ba,L,G,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa;A=a.attributes;ma=a.buffer;x=a.context;v=a.current;ta=a.draw;I=a.elements;r=a.extensions;E=a.framebuffer;B=a.gl;aa=a.isBufferArgs;H=a.next;F=a.shader;D=a.uniforms;ka=a.vao;t=H.blend_color;ba=v.blend_color;L=H.blend_equation;G=v.blend_equation;ua=H.blend_func;T=v.blend_func;W=H.colorMask;S=v.colorMask;O=H.depth_range;M=v.depth_range;N=H.polygonOffset_offset;Q=v.polygonOffset_offset;
R=H.sample_coverage;qa=v.sample_coverage;na=H.scissor_box;J=v.scissor_box;K=H.stencil_func;da=v.stencil_func;U=H.stencil_opBack;la=v.stencil_opBack;ha=H.stencil_opFront;Aa=v.stencil_opFront;xa=H.viewport;ca=v.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(b,a){var f,t,u,m,l,q;f=E.next;f!==E.cur&&(f?B.bindFramebuffer(36160,f.framebuffer):B.bindFramebuffer(36160,null),E.cur=
f);if(v.dirty){var P,D,F,L,Z,V,ya,Ha,pa,za,Ca,ia,X,xa,na,Ga,eb,Y,ua,bc,Ia,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je;P=H.dither;P!==v.dither&&(P?B.enable(3024):B.disable(3024),v.dither=P);D=H.depth_func;D!==v.depth_func&&(B.depthFunc(D),v.depth_func=D);F=O[0];L=O[1];if(F!==M[0]||L!==M[1])B.depthRange(F,L),M[0]=F,M[1]=L;Z=H.depth_mask;Z!==v.depth_mask&&(B.depthMask(Z),v.depth_mask=Z);V=W[0];ya=W[1];Ha=W[2];pa=W[3];if(V!==S[0]||ya!==S[1]||Ha!==S[2]||pa!==S[3])B.colorMask(V,ya,Ha,pa),S[0]=V,S[1]=ya,S[2]=Ha,S[3]=
pa;za=H.cull_enable;za!==v.cull_enable&&(za?B.enable(2884):B.disable(2884),v.cull_enable=za);Ca=H.cull_face;Ca!==v.cull_face&&(B.cullFace(Ca),v.cull_face=Ca);ia=H.frontFace;ia!==v.frontFace&&(B.frontFace(ia),v.frontFace=ia);X=H.lineWidth;X!==v.lineWidth&&(B.lineWidth(X),v.lineWidth=X);xa=H.polygonOffset_enable;xa!==v.polygonOffset_enable&&(xa?B.enable(32823):B.disable(32823),v.polygonOffset_enable=xa);na=N[0];Ga=N[1];if(na!==Q[0]||Ga!==Q[1])B.polygonOffset(na,Ga),Q[0]=na,Q[1]=Ga;eb=H.sample_alpha;
eb!==v.sample_alpha&&(eb?B.enable(32926):B.disable(32926),v.sample_alpha=eb);Y=H.sample_enable;Y!==v.sample_enable&&(Y?B.enable(32928):B.disable(32928),v.sample_enable=Y);ua=R[0];bc=R[1];if(ua!==qa[0]||bc!==qa[1])B.sampleCoverage(ua,bc),qa[0]=ua,qa[1]=bc;Ia=H.stencil_mask;Ia!==v.stencil_mask&&(B.stencilMask(Ia),v.stencil_mask=Ia);cc=K[0];Sb=K[1];Ae=K[2];if(cc!==da[0]||Sb!==da[1]||Ae!==da[2])B.stencilFunc(cc,Sb,Ae),da[0]=cc,da[1]=Sb,da[2]=Ae;Id=ha[0];Ad=ha[1];Sd=ha[2];De=ha[3];if(Id!==Aa[0]||Ad!==
Aa[1]||Sd!==Aa[2]||De!==Aa[3])B.stencilOpSeparate(Id,Ad,Sd,De),Aa[0]=Id,Aa[1]=Ad,Aa[2]=Sd,Aa[3]=De;ye=U[0];$d=U[1];re=U[2];je=U[3];if(ye!==la[0]||$d!==la[1]||re!==la[2]||je!==la[3])B.stencilOpSeparate(ye,$d,re,je),la[0]=ye,la[1]=$d,la[2]=re,la[3]=je}B.blendColor(0,0,0,0);ba[0]=0;ba[1]=0;ba[2]=0;ba[3]=0;B.enable(3042);v.blend_enable=!0;B.blendEquationSeparate(32774,32774);G[0]=32774;G[1]=32774;B.blendFuncSeparate(770,771,773,1);T[0]=770;T[1]=771;T[2]=773;T[3]=1;B.disable(2929);v.depth_enable=!1;B.enable(3089);
v.scissor_enable=!0;B.disable(2960);v.stencil_enable=!1;if(t=v.profile)u=performance.now(),d.count+=a;B.useProgram(c.program);m=r.angle_instanced_arrays;var Gd;ka.setVAO(null);Gd=ta.instances;for(l=0;l<a;++l){q=b[l];var Pd,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db;Pd=q.viewport;Bd=Pd.x|0;Cd=Pd.y|0;Be="width"in
Pd?Pd.width|0:x.framebufferWidth-Bd;Qe="height"in Pd?Pd.height|0:x.framebufferHeight-Cd;Ue=x.viewportWidth;x.viewportWidth=Be;Jd=x.viewportHeight;x.viewportHeight=Qe;B.viewport(Bd,Cd,Be,Qe);ca[0]=Bd;ca[1]=Cd;ca[2]=Be;ca[3]=Qe;Ee=q.viewport;me=Ee.x|0;be=Ee.y|0;Md="width"in Ee?Ee.width|0:x.framebufferWidth-me;Ed="height"in Ee?Ee.height|0:x.framebufferHeight-be;B.scissor(me,be,Md,Ed);J[0]=me;J[1]=be;J[2]=Md;J[3]=Ed;ja.buffer=q.positionBuffer;pd=!1;bd=null;td=0;Oc=!1;Gc=rd=0;gd=1;Sc=0;md=5126;zb=vc=Eb=
Vb=0;aa(ja)?(pd=!0,bd=ma.createStream(34962,ja),md=bd.dtype):(bd=ma.getBuffer(ja))?md=bd.dtype:"constant"in ja?(gd=2,"number"===typeof ja.constant?(Eb=ja.constant,vc=zb=Vb=0):(Eb=0<ja.constant.length?ja.constant[0]:0,vc=1<ja.constant.length?ja.constant[1]:0,zb=2<ja.constant.length?ja.constant[2]:0,Vb=3<ja.constant.length?ja.constant[3]:0)):(bd=aa(ja.buffer)?ma.createStream(34962,ja.buffer):ma.getBuffer(ja.buffer),md="type"in ja?Da[ja.type]:bd.dtype,Oc=!!ja.normalized,Gc=ja.size|0,rd=ja.offset|0,Sc=
ja.stride|0,td=ja.divisor|0);yc=k.location;Bb=A[yc];if(1===gd){Bb.buffer||B.enableVertexAttribArray(yc);Lc=Gc||2;if(Bb.type!==md||Bb.size!==Lc||Bb.buffer!==bd||Bb.normalized!==Oc||Bb.offset!==rd||Bb.stride!==Sc)B.bindBuffer(34962,bd.buffer),B.vertexAttribPointer(yc,Lc,md,Oc,Sc,rd),Bb.type=md,Bb.size=Lc,Bb.buffer=bd,Bb.normalized=Oc,Bb.offset=rd,Bb.stride=Sc;Bb.divisor!==td&&(m.vertexAttribDivisorANGLE(yc,td),Bb.divisor=td)}else if(Bb.buffer&&(B.disableVertexAttribArray(yc),Bb.buffer=null),Bb.x!==
Eb||Bb.y!==vc||Bb.z!==zb||Bb.w!==Vb)B.vertexAttrib4f(yc,Eb,vc,zb,Vb),Bb.x=Eb,Bb.y=vc,Bb.z=zb,Bb.w=Vb;oa.buffer=q.positionFractBuffer;mc=!1;Hc=null;hd=0;cd=!1;fc=Ec=0;Ic=1;pc=0;rc=5126;Pc=ob=qc=nc=0;aa(oa)?(mc=!0,Hc=ma.createStream(34962,oa),rc=Hc.dtype):(Hc=ma.getBuffer(oa))?rc=Hc.dtype:"constant"in oa?(Ic=2,"number"===typeof oa.constant?(qc=oa.constant,ob=Pc=nc=0):(qc=0<oa.constant.length?oa.constant[0]:0,ob=1<oa.constant.length?oa.constant[1]:0,Pc=2<oa.constant.length?oa.constant[2]:0,nc=3<oa.constant.length?
oa.constant[3]:0)):(Hc=aa(oa.buffer)?ma.createStream(34962,oa.buffer):ma.getBuffer(oa.buffer),rc="type"in oa?Da[oa.type]:Hc.dtype,cd=!!oa.normalized,fc=oa.size|0,Ec=oa.offset|0,pc=oa.stride|0,hd=oa.divisor|0);Zb=g.location;gb=A[Zb];if(1===Ic){gb.buffer||B.enableVertexAttribArray(Zb);Mb=fc||2;if(gb.type!==rc||gb.size!==Mb||gb.buffer!==Hc||gb.normalized!==cd||gb.offset!==Ec||gb.stride!==pc)B.bindBuffer(34962,Hc.buffer),B.vertexAttribPointer(Zb,Mb,rc,cd,pc,Ec),gb.type=rc,gb.size=Mb,gb.buffer=Hc,gb.normalized=
cd,gb.offset=Ec,gb.stride=pc;gb.divisor!==hd&&(m.vertexAttribDivisorANGLE(Zb,hd),gb.divisor=hd)}else if(gb.buffer&&(B.disableVertexAttribArray(Zb),gb.buffer=null),gb.x!==qc||gb.y!==ob||gb.z!==Pc||gb.w!==nc)B.vertexAttrib4f(Zb,qc,ob,Pc,nc),gb.x=qc,gb.y=ob,gb.z=Pc,gb.w=nc;ab=q.fill;jb=ab[0];Jc=ab[1];Ib=ab[2];Ob=ab[3];l&&Wa===jb&&Nb===Jc&&sc===Ib&&kb===Ob||(Wa=jb,Nb=Jc,sc=Ib,kb=Ob,B.uniform4f(C.location,jb,Jc,Ib,Ob));Fb=q.scale;Cb=Fb[0];hb=Fb[1];l&&yb===Cb&&$b===hb||(yb=Cb,$b=hb,B.uniform2f(n.location,
Cb,hb));Pb=q.scaleFract;qb=Pb[0];Ub=Pb[1];l&&Sa===qb&&sb===Ub||(Sa=qb,sb=Ub,B.uniform2f(p.location,qb,Ub));jc=q.translate;ib=jc[0];Ja=jc[1];l&&pb===ib&&tb===Ja||(pb=ib,tb=Ja,B.uniform2f(w.location,ib,Ja));La=q.translateFract;db=La[0];Na=La[1];l&&fb===db&&lb===Na||(fb=db,lb=Na,B.uniform2f(z.location,db,Na));Xa=q.id;l&&vb===Xa||(vb=Xa,B.uniform1f(y.location,Xa));ub=q.opacity;l&&Pa===ub||(Pa=ub,B.uniform1f(e.location,ub));Dc=h.call(this,x,q,l);Va=null;(Va=(Jb=aa(Dc))?I.createStream(Dc):I.getElements(Dc))&&
B.bindBuffer(34963,Va.buffer.buffer);if(Db=Va?Va.vertCount:-1)0<Gd?Va?m.drawElementsInstancedANGLE(4,Db,Va.type,0<<(Va.type-5121>>1),Gd):m.drawArraysInstancedANGLE(4,0,Db,Gd):0>Gd&&(Va?B.drawElements(4,Db,Va.type,0<<(Va.type-5121>>1)):B.drawArrays(4,0,Db)),x.viewportWidth=Ue,x.viewportHeight=Jd,pd&&ma.destroyStream(bd),mc&&ma.destroyStream(Hc),Jb&&I.destroyStream(Va)}v.dirty=!0;ka.setVAO(null);t&&(d.cpuTime+=performance.now()-u)},draw:function(c){var b,a,h,f,t,m,q,D,F,L,xa,Z,V,ya,Ha,pa,za,Ca,ia,X,
na,ua;b=E.next;b!==E.cur&&(b?B.bindFramebuffer(36160,b.framebuffer):B.bindFramebuffer(36160,null),E.cur=b);if(v.dirty){b=H.dither;b!==v.dither&&(b?B.enable(3024):B.disable(3024),v.dither=b);b=H.depth_func;b!==v.depth_func&&(B.depthFunc(b),v.depth_func=b);b=O[0];m=O[1];if(b!==M[0]||m!==M[1])B.depthRange(b,m),M[0]=b,M[1]=m;b=H.depth_mask;b!==v.depth_mask&&(B.depthMask(b),v.depth_mask=b);b=W[0];m=W[1];a=W[2];h=W[3];if(b!==S[0]||m!==S[1]||a!==S[2]||h!==S[3])B.colorMask(b,m,a,h),S[0]=b,S[1]=m,S[2]=a,S[3]=
h;b=H.cull_enable;b!==v.cull_enable&&(b?B.enable(2884):B.disable(2884),v.cull_enable=b);b=H.cull_face;b!==v.cull_face&&(B.cullFace(b),v.cull_face=b);b=H.frontFace;b!==v.frontFace&&(B.frontFace(b),v.frontFace=b);b=H.lineWidth;b!==v.lineWidth&&(B.lineWidth(b),v.lineWidth=b);b=H.polygonOffset_enable;b!==v.polygonOffset_enable&&(b?B.enable(32823):B.disable(32823),v.polygonOffset_enable=b);b=N[0];m=N[1];if(b!==Q[0]||m!==Q[1])B.polygonOffset(b,m),Q[0]=b,Q[1]=m;b=H.sample_alpha;b!==v.sample_alpha&&(b?B.enable(32926):
B.disable(32926),v.sample_alpha=b);b=H.sample_enable;b!==v.sample_enable&&(b?B.enable(32928):B.disable(32928),v.sample_enable=b);b=R[0];m=R[1];if(b!==qa[0]||m!==qa[1])B.sampleCoverage(b,m),qa[0]=b,qa[1]=m;b=H.stencil_mask;b!==v.stencil_mask&&(B.stencilMask(b),v.stencil_mask=b);b=K[0];m=K[1];a=K[2];if(b!==da[0]||m!==da[1]||a!==da[2])B.stencilFunc(b,m,a),da[0]=b,da[1]=m,da[2]=a;b=ha[0];m=ha[1];a=ha[2];h=ha[3];if(b!==Aa[0]||m!==Aa[1]||a!==Aa[2]||h!==Aa[3])B.stencilOpSeparate(b,m,a,h),Aa[0]=b,Aa[1]=m,
Aa[2]=a,Aa[3]=h;b=U[0];m=U[1];a=U[2];h=U[3];if(b!==la[0]||m!==la[1]||a!==la[2]||h!==la[3])B.stencilOpSeparate(b,m,a,h),la[0]=b,la[1]=m,la[2]=a,la[3]=h}b=c.viewport;a=b.x|0;h=b.y|0;f="width"in b?b.width|0:x.framebufferWidth-a;t="height"in b?b.height|0:x.framebufferHeight-h;b=x.viewportWidth;x.viewportWidth=f;m=x.viewportHeight;x.viewportHeight=t;B.viewport(a,h,f,t);ca[0]=a;ca[1]=h;ca[2]=f;ca[3]=t;B.blendColor(0,0,0,0);ba[0]=0;ba[1]=0;ba[2]=0;ba[3]=0;B.enable(3042);v.blend_enable=!0;B.blendEquationSeparate(32774,
32774);G[0]=32774;G[1]=32774;B.blendFuncSeparate(770,771,773,1);T[0]=770;T[1]=771;T[2]=773;T[3]=1;B.disable(2929);v.depth_enable=!1;t=c.viewport;a=t.x|0;h=t.y|0;f="width"in t?t.width|0:x.framebufferWidth-a;t="height"in t?t.height|0:x.framebufferHeight-h;B.scissor(a,h,f,t);J[0]=a;J[1]=h;J[2]=f;J[3]=t;B.enable(3089);v.scissor_enable=!0;B.disable(2960);v.stencil_enable=!1;if(a=v.profile)q=performance.now(),d.count++;B.useProgram(l.program);h=r.angle_instanced_arrays;ka.setVAO(null);ja.buffer=c.positionBuffer;
f=!1;D=0;F=!1;xa=L=0;Z=1;V=0;ya=5126;Ca=za=pa=Ha=0;aa(ja)?(f=!0,t=ma.createStream(34962,ja),ya=t.dtype):(t=ma.getBuffer(ja))?ya=t.dtype:"constant"in ja?(Z=2,"number"===typeof ja.constant?(pa=ja.constant,za=Ca=Ha=0):(pa=0<ja.constant.length?ja.constant[0]:0,za=1<ja.constant.length?ja.constant[1]:0,Ca=2<ja.constant.length?ja.constant[2]:0,Ha=3<ja.constant.length?ja.constant[3]:0)):(t=aa(ja.buffer)?ma.createStream(34962,ja.buffer):ma.getBuffer(ja.buffer),ya="type"in ja?Da[ja.type]:t.dtype,F=!!ja.normalized,
xa=ja.size|0,L=ja.offset|0,V=ja.stride|0,D=ja.divisor|0);ia=k.location;X=A[ia];if(1===Z){X.buffer||B.enableVertexAttribArray(ia);xa=xa||2;if(X.type!==ya||X.size!==xa||X.buffer!==t||X.normalized!==F||X.offset!==L||X.stride!==V)B.bindBuffer(34962,t.buffer),B.vertexAttribPointer(ia,xa,ya,F,V,L),X.type=ya,X.size=xa,X.buffer=t,X.normalized=F,X.offset=L,X.stride=V;X.divisor!==D&&(h.vertexAttribDivisorANGLE(ia,D),X.divisor=D)}else if(X.buffer&&(B.disableVertexAttribArray(ia),X.buffer=null),X.x!==pa||X.y!==
za||X.z!==Ca||X.w!==Ha)B.vertexAttrib4f(ia,pa,za,Ca,Ha),X.x=pa,X.y=za,X.z=Ca,X.w=Ha;oa.buffer=c.positionFractBuffer;D=!1;L=0;V=!1;Ha=ya=0;pa=1;ia=0;X=5126;ua=na=Ca=za=0;aa(oa)?(D=!0,F=ma.createStream(34962,oa),X=F.dtype):(F=ma.getBuffer(oa))?X=F.dtype:"constant"in oa?(pa=2,"number"===typeof oa.constant?(Ca=oa.constant,na=ua=za=0):(Ca=0<oa.constant.length?oa.constant[0]:0,na=1<oa.constant.length?oa.constant[1]:0,ua=2<oa.constant.length?oa.constant[2]:0,za=3<oa.constant.length?oa.constant[3]:0)):(F=
aa(oa.buffer)?ma.createStream(34962,oa.buffer):ma.getBuffer(oa.buffer),X="type"in oa?Da[oa.type]:F.dtype,V=!!oa.normalized,Ha=oa.size|0,ya=oa.offset|0,ia=oa.stride|0,L=oa.divisor|0);xa=g.location;Z=A[xa];if(1===pa){Z.buffer||B.enableVertexAttribArray(xa);Ha=Ha||2;if(Z.type!==X||Z.size!==Ha||Z.buffer!==F||Z.normalized!==V||Z.offset!==ya||Z.stride!==ia)B.bindBuffer(34962,F.buffer),B.vertexAttribPointer(xa,Ha,X,V,ia,ya),Z.type=X,Z.size=Ha,Z.buffer=F,Z.normalized=V,Z.offset=ya,Z.stride=ia;Z.divisor!==
L&&(h.vertexAttribDivisorANGLE(xa,L),Z.divisor=L)}else if(Z.buffer&&(B.disableVertexAttribArray(xa),Z.buffer=null),Z.x!==Ca||Z.y!==na||Z.z!==ua||Z.w!==za)B.vertexAttrib4f(xa,Ca,na,ua,za),Z.x=Ca,Z.y=na,Z.z=ua,Z.w=za;L=c.fill;B.uniform4f(C.location,L[0],L[1],L[2],L[3]);L=c.scale;B.uniform2f(n.location,L[0],L[1]);L=c.scaleFract;B.uniform2f(p.location,L[0],L[1]);L=c.translate;B.uniform2f(w.location,L[0],L[1]);L=c.translateFract;B.uniform2f(z.location,L[0],L[1]);B.uniform1f(y.location,c.id);B.uniform1f(e.location,
c.opacity);L=u.call(this,x,c,0);(L=(c=aa(L))?I.createStream(L):I.getElements(L))&&B.bindBuffer(34963,L.buffer.buffer);if(V=L?L.vertCount:-1)ya=ta.instances,0<ya?L?h.drawElementsInstancedANGLE(4,V,L.type,0<<(L.type-5121>>1),ya):h.drawArraysInstancedANGLE(4,0,V,ya):0>ya&&(L?B.drawElements(4,V,L.type,0<<(L.type-5121>>1)):B.drawArrays(4,0,V)),v.dirty=!0,ka.setVAO(null),x.viewportWidth=b,x.viewportHeight=m,a&&(d.cpuTime+=performance.now()-q),f&&ma.destroyStream(t),D&&ma.destroyStream(F),c&&I.destroyStream(L)},
scope:function(c,e,a){var k,h,g,n,p,w,z,u,A,y,C,l,P,J,N,B,E,K,O,M,U,ca,r,S,R,Q,da,ha,qa,T,ra,W,ba,G,la,ka,fa,Aa,Pd,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub;k=c.viewport;h=k.x|0;g=k.y|0;n="width"in k?k.width|0:x.framebufferWidth-h;p="height"in k?k.height|0:x.framebufferHeight-g;w=x.viewportWidth;x.viewportWidth=n;z=x.viewportHeight;
x.viewportHeight=p;u=xa[0];xa[0]=h;A=xa[1];xa[1]=g;y=xa[2];xa[2]=n;C=xa[3];xa[3]=p;l=t[0];t[0]=0;P=t[1];t[1]=0;J=t[2];t[2]=0;N=t[3];t[3]=0;B=H.blend_enable;H.blend_enable=!0;E=L[0];L[0]=32774;K=L[1];L[1]=32774;O=ua[0];ua[0]=770;M=ua[1];ua[1]=771;U=ua[2];ua[2]=773;ca=ua[3];ua[3]=1;r=H.depth_enable;H.depth_enable=!1;S=c.viewport;R=S.x|0;Q=S.y|0;da="width"in S?S.width|0:x.framebufferWidth-R;ha="height"in S?S.height|0:x.framebufferHeight-Q;qa=na[0];na[0]=R;T=na[1];na[1]=Q;ra=na[2];na[2]=da;W=na[3];na[3]=
ha;ba=H.scissor_enable;H.scissor_enable=!0;G=H.stencil_enable;H.stencil_enable=!1;if(la=v.profile)ka=performance.now(),d.count++;fa=q.call(this,x,c,a);Aa=null;Aa=(Pd=aa(fa))?I.createStream(fa):I.getElements(fa);Bd=ta.elements;ta.elements=Aa;Cd=ta.offset;ta.offset=0;Be=Aa?Aa.vertCount:-1;Qe=ta.count;ta.count=Be;Ue=ta.primitive;ta.primitive=4;Jd=c.fill;Ee=D[14];D[14]=Jd;me=c.id;be=D[31];D[31]=me;Md=c.opacity;Ed=D[10];D[10]=Md;pd=x.pixelRatio;bd=D[34];D[34]=pd;td=c.scale;Oc=D[6];D[6]=td;rd=c.scaleFract;
Gc=D[7];D[7]=rd;gd=c.translate;Sc=D[8];D[8]=gd;md=c.translateFract;Vb=D[9];D[9]=md;Eb=m.call(this,x,c,a);vc=D[3];D[3]=Eb;ja.buffer=c.positionBuffer;zb=!1;yc=null;Bb=0;Lc=!1;Hc=mc=0;hd=1;cd=0;Ec=5126;rc=pc=Ic=fc=0;aa(ja)?(zb=!0,yc=ma.createStream(34962,ja),Ec=yc.dtype):(yc=ma.getBuffer(ja))?Ec=yc.dtype:"constant"in ja?(hd=2,"number"===typeof ja.constant?(Ic=ja.constant,pc=rc=fc=0):(Ic=0<ja.constant.length?ja.constant[0]:0,pc=1<ja.constant.length?ja.constant[1]:0,rc=2<ja.constant.length?ja.constant[2]:
0,fc=3<ja.constant.length?ja.constant[3]:0)):(yc=aa(ja.buffer)?ma.createStream(34962,ja.buffer):ma.getBuffer(ja.buffer),Ec="type"in ja?Da[ja.type]:yc.dtype,Lc=!!ja.normalized,Hc=ja.size|0,mc=ja.offset|0,cd=ja.stride|0,Bb=ja.divisor|0);nc=b.buffer;b.buffer=yc;qc=b.divisor;b.divisor=Bb;ob=b.normalized;b.normalized=Lc;Pc=b.offset;b.offset=mc;Zb=b.size;b.size=Hc;gb=b.state;b.state=hd;Mb=b.stride;b.stride=cd;ab=b.type;b.type=Ec;jb=b.w;b.w=fc;Wa=b.x;b.x=Ic;Jc=b.y;b.y=pc;Nb=b.z;b.z=rc;oa.buffer=c.positionFractBuffer;
Ib=!1;sc=null;Ob=0;kb=!1;Cb=Fb=0;yb=1;hb=0;$b=5126;Ub=Sa=qb=Pb=0;aa(oa)?(Ib=!0,sc=ma.createStream(34962,oa),$b=sc.dtype):(sc=ma.getBuffer(oa))?$b=sc.dtype:"constant"in oa?(yb=2,"number"===typeof oa.constant?(qb=oa.constant,Sa=Ub=Pb=0):(qb=0<oa.constant.length?oa.constant[0]:0,Sa=1<oa.constant.length?oa.constant[1]:0,Ub=2<oa.constant.length?oa.constant[2]:0,Pb=3<oa.constant.length?oa.constant[3]:0)):(sc=aa(oa.buffer)?ma.createStream(34962,oa.buffer):ma.getBuffer(oa.buffer),$b="type"in oa?Da[oa.type]:
sc.dtype,kb=!!oa.normalized,Cb=oa.size|0,Fb=oa.offset|0,hb=oa.stride|0,Ob=oa.divisor|0);sb=f.buffer;f.buffer=sc;jc=f.divisor;f.divisor=Ob;ib=f.normalized;f.normalized=kb;pb=f.offset;f.offset=Fb;Ja=f.size;f.size=Cb;tb=f.state;f.state=yb;La=f.stride;f.stride=hb;db=f.type;f.type=$b;fb=f.w;f.w=Pb;Na=f.x;f.x=qb;lb=f.y;f.y=Sa;Xa=f.z;f.z=Ub;vb=F.vert;F.vert=42;ub=F.frag;F.frag=41;v.dirty=!0;e(x,c,a);x.viewportWidth=w;x.viewportHeight=z;xa[0]=u;xa[1]=A;xa[2]=y;xa[3]=C;t[0]=l;t[1]=P;t[2]=J;t[3]=N;H.blend_enable=
B;L[0]=E;L[1]=K;ua[0]=O;ua[1]=M;ua[2]=U;ua[3]=ca;H.depth_enable=r;na[0]=qa;na[1]=T;na[2]=ra;na[3]=W;H.scissor_enable=ba;H.stencil_enable=G;la&&(d.cpuTime+=performance.now()-ka);Pd&&I.destroyStream(Aa);ta.elements=Bd;ta.offset=Cd;ta.count=Qe;ta.primitive=Ue;D[14]=Ee;D[31]=be;D[10]=Ed;D[34]=bd;D[6]=Oc;D[7]=Gc;D[8]=Sc;D[9]=Vb;D[3]=vc;zb&&ma.destroyStream(yc);b.buffer=nc;b.divisor=qc;b.normalized=ob;b.offset=Pc;b.size=Zb;b.state=gb;b.stride=Mb;b.type=ab;b.w=jb;b.x=Wa;b.y=Jc;b.z=Nb;Ib&&ma.destroyStream(sc);
f.buffer=sb;f.divisor=jc;f.normalized=ib;f.offset=pb;f.size=Ja;f.state=tb;f.stride=La;f.type=db;f.w=fb;f.x=Na;f.y=lb;f.z=Xa;F.vert=vb;F.frag=ub;v.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,ta,I,r,E,B,aa,H,F,D,G,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,
Hb,Ua){var ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca,ia,X,va,Ka,Ga,eb,Y,Kc,bc,Ia,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je,Gd,Pd,Bd,Cd;ga=a.attributes;ea=a.buffer;sa=a.context;wa=a.current;Ea=a.draw;rb=a.elements;Gb=a.extensions;Z=a.framebuffer;V=a.gl;ya=a.isBufferArgs;Ha=a.next;pa=a.shader;za=a.uniforms;Ca=a.vao;ia=Ha.blend_color;X=wa.blend_color;va=Ha.blend_equation;Ka=wa.blend_equation;Ga=Ha.blend_func;eb=wa.blend_func;Y=Ha.colorMask;Kc=wa.colorMask;bc=Ha.depth_range;Ia=wa.depth_range;cc=Ha.polygonOffset_offset;
Sb=wa.polygonOffset_offset;Ae=Ha.sample_coverage;Id=wa.sample_coverage;Ad=Ha.scissor_box;Sd=wa.scissor_box;De=Ha.stencil_func;ye=wa.stencil_func;$d=Ha.stencil_opBack;re=wa.stencil_opBack;je=Ha.stencil_opFront;Gd=wa.stencil_opFront;Pd=Ha.viewport;Bd=wa.viewport;Cd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(c,e){var b,a,k,h,f,g;b=Z.next;b!==Z.cur&&(b?V.bindFramebuffer(36160,b.framebuffer):V.bindFramebuffer(36160,null),Z.cur=b);
if(wa.dirty){var n,p,t,w,z,m,u,A,y,v,x,l,C,q,P,ma,B,I,E,D,r,H,F,pa,ta,ia,za,aa,ra,G,ka,Ga,Mb,ab;n=Ha.dither;n!==wa.dither&&(n?V.enable(3024):V.disable(3024),wa.dither=n);p=va[0];t=va[1];if(p!==Ka[0]||t!==Ka[1])V.blendEquationSeparate(p,t),Ka[0]=p,Ka[1]=t;w=Ha.depth_func;w!==wa.depth_func&&(V.depthFunc(w),wa.depth_func=w);z=bc[0];m=bc[1];if(z!==Ia[0]||m!==Ia[1])V.depthRange(z,m),Ia[0]=z,Ia[1]=m;u=Ha.depth_mask;u!==wa.depth_mask&&(V.depthMask(u),wa.depth_mask=u);A=Y[0];y=Y[1];v=Y[2];x=Y[3];if(A!==Kc[0]||
y!==Kc[1]||v!==Kc[2]||x!==Kc[3])V.colorMask(A,y,v,x),Kc[0]=A,Kc[1]=y,Kc[2]=v,Kc[3]=x;l=Ha.cull_enable;l!==wa.cull_enable&&(l?V.enable(2884):V.disable(2884),wa.cull_enable=l);C=Ha.cull_face;C!==wa.cull_face&&(V.cullFace(C),wa.cull_face=C);q=Ha.frontFace;q!==wa.frontFace&&(V.frontFace(q),wa.frontFace=q);P=Ha.lineWidth;P!==wa.lineWidth&&(V.lineWidth(P),wa.lineWidth=P);ma=Ha.polygonOffset_enable;ma!==wa.polygonOffset_enable&&(ma?V.enable(32823):V.disable(32823),wa.polygonOffset_enable=ma);B=cc[0];I=cc[1];
if(B!==Sb[0]||I!==Sb[1])V.polygonOffset(B,I),Sb[0]=B,Sb[1]=I;E=Ha.sample_alpha;E!==wa.sample_alpha&&(E?V.enable(32926):V.disable(32926),wa.sample_alpha=E);D=Ha.sample_enable;D!==wa.sample_enable&&(D?V.enable(32928):V.disable(32928),wa.sample_enable=D);r=Ae[0];H=Ae[1];if(r!==Id[0]||H!==Id[1])V.sampleCoverage(r,H),Id[0]=r,Id[1]=H;F=Ha.stencil_mask;F!==wa.stencil_mask&&(V.stencilMask(F),wa.stencil_mask=F);pa=De[0];ta=De[1];ia=De[2];if(pa!==ye[0]||ta!==ye[1]||ia!==ye[2])V.stencilFunc(pa,ta,ia),ye[0]=
pa,ye[1]=ta,ye[2]=ia;za=je[0];aa=je[1];ra=je[2];G=je[3];if(za!==Gd[0]||aa!==Gd[1]||ra!==Gd[2]||G!==Gd[3])V.stencilOpSeparate(za,aa,ra,G),Gd[0]=za,Gd[1]=aa,Gd[2]=ra,Gd[3]=G;ka=$d[0];Ga=$d[1];Mb=$d[2];ab=$d[3];if(ka!==re[0]||Ga!==re[1]||Mb!==re[2]||ab!==re[3])V.stencilOpSeparate(ka,Ga,Mb,ab),re[0]=ka,re[1]=Ga,re[2]=Mb,re[3]=ab}V.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;V.enable(3042);wa.blend_enable=!0;V.blendFuncSeparate(770,771,773,1);eb[0]=770;eb[1]=771;eb[2]=773;eb[3]=1;V.disable(2929);wa.depth_enable=
!1;V.enable(3089);wa.scissor_enable=!0;V.disable(2960);wa.stencil_enable=!1;if(a=wa.profile)k=performance.now(),d.count+=e;V.useProgram(ba.program);h=Gb.angle_instanced_arrays;var jb;Ca.setVAO(null);V.uniform1i(K.location,!1);V.uniform1i(Aa.location,Q.bind());jb=Ea.instances;for(f=0;f<e;++f){g=c[f];var Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,
sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Pd,Ad,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Wa=g.viewport;Jc=Wa.x|0;Nb=Wa.y|0;Ib="width"in Wa?Wa.width|0:sa.framebufferWidth-Jc;sc="height"in
Wa?Wa.height|0:sa.framebufferHeight-Nb;Ob=sa.viewportWidth;sa.viewportWidth=Ib;kb=sa.viewportHeight;sa.viewportHeight=sc;V.viewport(Jc,Nb,Ib,sc);Bd[0]=Jc;Bd[1]=Nb;Bd[2]=Ib;Bd[3]=sc;Fb=g.viewport;Cb=Fb.x|0;yb=Fb.y|0;hb="width"in Fb?Fb.width|0:sa.framebufferWidth-Cb;$b="height"in Fb?Fb.height|0:sa.framebufferHeight-yb;V.scissor(Cb,yb,hb,$b);Sd[0]=Cb;Sd[1]=yb;Sd[2]=hb;Sd[3]=$b;Pb=L.call(this,sa,g,f);qb=!1;Sa=null;Ub=0;sb=!1;ib=jc=0;pb=1;Ja=0;tb=5126;Na=fb=db=La=0;ya(Pb)?(qb=!0,Sa=ea.createStream(34962,
Pb),tb=Sa.dtype):(Sa=ea.getBuffer(Pb))?tb=Sa.dtype:"constant"in Pb?(pb=2,"number"===typeof Pb.constant?(db=Pb.constant,fb=Na=La=0):(db=0<Pb.constant.length?Pb.constant[0]:0,fb=1<Pb.constant.length?Pb.constant[1]:0,Na=2<Pb.constant.length?Pb.constant[2]:0,La=3<Pb.constant.length?Pb.constant[3]:0)):(Sa=ya(Pb.buffer)?ea.createStream(34962,Pb.buffer):ea.getBuffer(Pb.buffer),tb="type"in Pb?Cd[Pb.type]:Sa.dtype,sb=!!Pb.normalized,ib=Pb.size|0,jc=Pb.offset|0,Ja=Pb.stride|0,Ub=Pb.divisor|0);lb=Qa.location;
Xa=ga[lb];if(1===pb){Xa.buffer||V.enableVertexAttribArray(lb);vb=ib||1;if(Xa.type!==tb||Xa.size!==vb||Xa.buffer!==Sa||Xa.normalized!==sb||Xa.offset!==jc||Xa.stride!==Ja)V.bindBuffer(34962,Sa.buffer),V.vertexAttribPointer(lb,vb,tb,sb,Ja,jc),Xa.type=tb,Xa.size=vb,Xa.buffer=Sa,Xa.normalized=sb,Xa.offset=jc,Xa.stride=Ja;Xa.divisor!==Ub&&(h.vertexAttribDivisorANGLE(lb,Ub),Xa.divisor=Ub)}else if(Xa.buffer&&(V.disableVertexAttribArray(lb),Xa.buffer=null),Xa.x!==db||Xa.y!==fb||Xa.z!==Na||Xa.w!==La)V.vertexAttrib4f(lb,
db,fb,Na,La),Xa.x=db,Xa.y=fb,Xa.z=Na,Xa.w=La;ub=fa.call(this,sa,g,f);Pa=!1;Dc=null;Va=0;Jb=!1;Ma=Db=0;zd=1;Za=0;Kb=5126;ac=Oa=mb=Lb=0;ya(ub)?(Pa=!0,Dc=ea.createStream(34962,ub),Kb=Dc.dtype):(Dc=ea.getBuffer(ub))?Kb=Dc.dtype:"constant"in ub?(zd=2,"number"===typeof ub.constant?(mb=ub.constant,Oa=ac=Lb=0):(mb=0<ub.constant.length?ub.constant[0]:0,Oa=1<ub.constant.length?ub.constant[1]:0,ac=2<ub.constant.length?ub.constant[2]:0,Lb=3<ub.constant.length?ub.constant[3]:0)):(Dc=ya(ub.buffer)?ea.createStream(34962,
ub.buffer):ea.getBuffer(ub.buffer),Kb="type"in ub?Cd[ub.type]:Dc.dtype,Jb=!!ub.normalized,Ma=ub.size|0,Db=ub.offset|0,Za=ub.stride|0,Va=ub.divisor|0);Ra=Hb.location;wb=ga[Ra];if(1===zd){wb.buffer||V.enableVertexAttribArray(Ra);xb=Ma||1;if(wb.type!==Kb||wb.size!==xb||wb.buffer!==Dc||wb.normalized!==Jb||wb.offset!==Db||wb.stride!==Za)V.bindBuffer(34962,Dc.buffer),V.vertexAttribPointer(Ra,xb,Kb,Jb,Za,Db),wb.type=Kb,wb.size=xb,wb.buffer=Dc,wb.normalized=Jb,wb.offset=Db,wb.stride=Za;wb.divisor!==Va&&(h.vertexAttribDivisorANGLE(Ra,
Va),wb.divisor=Va)}else if(wb.buffer&&(V.disableVertexAttribArray(Ra),wb.buffer=null),wb.x!==mb||wb.y!==Oa||wb.z!==ac||wb.w!==Lb)V.vertexAttrib4f(Ra,mb,Oa,ac,Lb),wb.x=mb,wb.y=Oa,wb.z=ac,wb.w=Lb;Ta=ua.call(this,sa,g,f);nb=!1;gc=null;Bc=0;wc=!1;kc=bb=0;Mc=1;Ya=0;nd=5126;uc=Wb=$a=Ab=0;ya(Ta)?(nb=!0,gc=ea.createStream(34962,Ta),nd=gc.dtype):(gc=ea.getBuffer(Ta))?nd=gc.dtype:"constant"in Ta?(Mc=2,"number"===typeof Ta.constant?($a=Ta.constant,Wb=uc=Ab=0):($a=0<Ta.constant.length?Ta.constant[0]:0,Wb=1<Ta.constant.length?
Ta.constant[1]:0,uc=2<Ta.constant.length?Ta.constant[2]:0,Ab=3<Ta.constant.length?Ta.constant[3]:0)):(gc=ya(Ta.buffer)?ea.createStream(34962,Ta.buffer):ea.getBuffer(Ta.buffer),nd="type"in Ta?Cd[Ta.type]:gc.dtype,wc=!!Ta.normalized,kc=Ta.size|0,bb=Ta.offset|0,Ya=Ta.stride|0,Bc=Ta.divisor|0);Xb=Fa.location;Qb=ga[Xb];if(1===Mc){Qb.buffer||V.enableVertexAttribArray(Xb);Nc=kc||1;if(Qb.type!==nd||Qb.size!==Nc||Qb.buffer!==gc||Qb.normalized!==wc||Qb.offset!==bb||Qb.stride!==Ya)V.bindBuffer(34962,gc.buffer),
V.vertexAttribPointer(Xb,Nc,nd,wc,Ya,bb),Qb.type=nd,Qb.size=Nc,Qb.buffer=gc,Qb.normalized=wc,Qb.offset=bb,Qb.stride=Ya;Qb.divisor!==Bc&&(h.vertexAttribDivisorANGLE(Xb,Bc),Qb.divisor=Bc)}else if(Qb.buffer&&(V.disableVertexAttribArray(Xb),Qb.buffer=null),Qb.x!==$a||Qb.y!==Wb||Qb.z!==uc||Qb.w!==Ab)V.vertexAttrib4f(Xb,$a,Wb,uc,Ab),Qb.x=$a,Qb.y=Wb,Qb.z=uc,Qb.w=Ab;Rb=T.call(this,sa,g,f);Od=!1;Fc=null;sd=0;Qc=!1;vd=Yc=0;oc=1;xc=0;hc=5126;Yb=Tb=tc=cb=0;ya(Rb)?(Od=!0,Fc=ea.createStream(34962,Rb),hc=Fc.dtype):
(Fc=ea.getBuffer(Rb))?hc=Fc.dtype:"constant"in Rb?(oc=2,"number"===typeof Rb.constant?(tc=Rb.constant,Tb=Yb=cb=0):(tc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Yb=2<Rb.constant.length?Rb.constant[2]:0,cb=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=ya(Rb.buffer)?ea.createStream(34962,Rb.buffer):ea.getBuffer(Rb.buffer),hc="type"in Rb?Cd[Rb.type]:Fc.dtype,Qc=!!Rb.normalized,vd=Rb.size|0,Yc=Rb.offset|0,xc=Rb.stride|0,sd=Rb.divisor|0);ec=Ua.location;ic=ga[ec];if(1===
oc){ic.buffer||V.enableVertexAttribArray(ec);zc=vd||1;if(ic.type!==hc||ic.size!==zc||ic.buffer!==Fc||ic.normalized!==Qc||ic.offset!==Yc||ic.stride!==xc)V.bindBuffer(34962,Fc.buffer),V.vertexAttribPointer(ec,zc,hc,Qc,xc,Yc),ic.type=hc,ic.size=zc,ic.buffer=Fc,ic.normalized=Qc,ic.offset=Yc,ic.stride=xc;ic.divisor!==sd&&(h.vertexAttribDivisorANGLE(ec,sd),ic.divisor=sd)}else if(ic.buffer&&(V.disableVertexAttribArray(ec),ic.buffer=null),ic.x!==tc||ic.y!==Tb||ic.z!==Yb||ic.w!==cb)V.vertexAttrib4f(ec,tc,
Tb,Yb,cb),ic.x=tc,ic.y=Tb,ic.z=Yb,ic.w=cb;Cc=W.call(this,sa,g,f);dd=!1;Tc=null;Uc=0;Vc=!1;od=Zc=0;ed=1;$c=0;lc=5126;fd=Xc=ad=dc=0;ya(Cc)?(dd=!0,Tc=ea.createStream(34962,Cc),lc=Tc.dtype):(Tc=ea.getBuffer(Cc))?lc=Tc.dtype:"constant"in Cc?(ed=2,"number"===typeof Cc.constant?(ad=Cc.constant,Xc=fd=dc=0):(ad=0<Cc.constant.length?Cc.constant[0]:0,Xc=1<Cc.constant.length?Cc.constant[1]:0,fd=2<Cc.constant.length?Cc.constant[2]:0,dc=3<Cc.constant.length?Cc.constant[3]:0)):(Tc=ya(Cc.buffer)?ea.createStream(34962,
Cc.buffer):ea.getBuffer(Cc.buffer),lc="type"in Cc?Cd[Cc.type]:Tc.dtype,Vc=!!Cc.normalized,od=Cc.size|0,Zc=Cc.offset|0,$c=Cc.stride|0,Uc=Cc.divisor|0);Ac=ja.location;jd=ga[Ac];if(1===ed){jd.buffer||V.enableVertexAttribArray(Ac);Pd=od||1;if(jd.type!==lc||jd.size!==Pd||jd.buffer!==Tc||jd.normalized!==Vc||jd.offset!==Zc||jd.stride!==$c)V.bindBuffer(34962,Tc.buffer),V.vertexAttribPointer(Ac,Pd,lc,Vc,$c,Zc),jd.type=lc,jd.size=Pd,jd.buffer=Tc,jd.normalized=Vc,jd.offset=Zc,jd.stride=$c;jd.divisor!==Uc&&(h.vertexAttribDivisorANGLE(Ac,
Uc),jd.divisor=Uc)}else if(jd.buffer&&(V.disableVertexAttribArray(Ac),jd.buffer=null),jd.x!==ad||jd.y!==Xc||jd.z!==fd||jd.w!==dc)V.vertexAttrib4f(Ac,ad,Xc,fd,dc),jd.x=ad,jd.y=Xc,jd.z=fd,jd.w=dc;Ad=S.call(this,sa,g,f);xd=!1;kd=null;Fe=0;Td=!1;ee=he=0;Ud=1;Nd=0;Kd=5126;ud=wd=Wc=qd=0;ya(Ad)?(xd=!0,kd=ea.createStream(34962,Ad),Kd=kd.dtype):(kd=ea.getBuffer(Ad))?Kd=kd.dtype:"constant"in Ad?(Ud=2,"number"===typeof Ad.constant?(Wc=Ad.constant,wd=ud=qd=0):(Wc=0<Ad.constant.length?Ad.constant[0]:0,wd=1<Ad.constant.length?
Ad.constant[1]:0,ud=2<Ad.constant.length?Ad.constant[2]:0,qd=3<Ad.constant.length?Ad.constant[3]:0)):(kd=ya(Ad.buffer)?ea.createStream(34962,Ad.buffer):ea.getBuffer(Ad.buffer),Kd="type"in Ad?Cd[Ad.type]:kd.dtype,Td=!!Ad.normalized,ee=Ad.size|0,he=Ad.offset|0,Nd=Ad.stride|0,Fe=Ad.divisor|0);ld=na.location;yd=ga[ld];if(1===Ud){yd.buffer||V.enableVertexAttribArray(ld);Fd=ee||1;if(yd.type!==Kd||yd.size!==Fd||yd.buffer!==kd||yd.normalized!==Td||yd.offset!==he||yd.stride!==Nd)V.bindBuffer(34962,kd.buffer),
V.vertexAttribPointer(ld,Fd,Kd,Td,Nd,he),yd.type=Kd,yd.size=Fd,yd.buffer=kd,yd.normalized=Td,yd.offset=he,yd.stride=Nd;yd.divisor!==Fe&&(h.vertexAttribDivisorANGLE(ld,Fe),yd.divisor=Fe)}else if(yd.buffer&&(V.disableVertexAttribArray(ld),yd.buffer=null),yd.x!==Wc||yd.y!==wd||yd.z!==ud||yd.w!==qd)V.vertexAttrib4f(ld,Wc,wd,ud,qd),yd.x=Wc,yd.y=wd,yd.z=ud,yd.w=qd;Hd=O.call(this,sa,g,f);ke=!1;ne=null;ue=0;oe=!1;ie=le=0;ve=1;fe=0;pe=5126;se=we=id=Rc=0;ya(Hd)?(ke=!0,ne=ea.createStream(34962,Hd),pe=ne.dtype):
(ne=ea.getBuffer(Hd))?pe=ne.dtype:"constant"in Hd?(ve=2,"number"===typeof Hd.constant?(id=Hd.constant,we=se=Rc=0):(id=0<Hd.constant.length?Hd.constant[0]:0,we=1<Hd.constant.length?Hd.constant[1]:0,se=2<Hd.constant.length?Hd.constant[2]:0,Rc=3<Hd.constant.length?Hd.constant[3]:0)):(ne=ya(Hd.buffer)?ea.createStream(34962,Hd.buffer):ea.getBuffer(Hd.buffer),pe="type"in Hd?Cd[Hd.type]:ne.dtype,oe=!!Hd.normalized,ie=Hd.size|0,le=Hd.offset|0,fe=Hd.stride|0,ue=Hd.divisor|0);Qd=J.location;Vd=ga[Qd];if(1===
ve){Vd.buffer||V.enableVertexAttribArray(Qd);Wd=ie||4;if(Vd.type!==pe||Vd.size!==Wd||Vd.buffer!==ne||Vd.normalized!==oe||Vd.offset!==le||Vd.stride!==fe)V.bindBuffer(34962,ne.buffer),V.vertexAttribPointer(Qd,Wd,pe,oe,fe,le),Vd.type=pe,Vd.size=Wd,Vd.buffer=ne,Vd.normalized=oe,Vd.offset=le,Vd.stride=fe;Vd.divisor!==ue&&(h.vertexAttribDivisorANGLE(Qd,ue),Vd.divisor=ue)}else if(Vd.buffer&&(V.disableVertexAttribArray(Qd),Vd.buffer=null),Vd.x!==id||Vd.y!==we||Vd.z!==se||Vd.w!==Rc)V.vertexAttrib4f(Qd,id,
we,se,Rc),Vd.x=id,Vd.y=we,Vd.z=se,Vd.w=Rc;Xd=M.call(this,sa,g,f);qe=!1;Ce=null;Ge=0;te=!1;We=Ve=0;Re=1;xe=0;Je=5126;Ke=Ne=Me=Le=0;ya(Xd)?(qe=!0,Ce=ea.createStream(34962,Xd),Je=Ce.dtype):(Ce=ea.getBuffer(Xd))?Je=Ce.dtype:"constant"in Xd?(Re=2,"number"===typeof Xd.constant?(Me=Xd.constant,Ne=Ke=Le=0):(Me=0<Xd.constant.length?Xd.constant[0]:0,Ne=1<Xd.constant.length?Xd.constant[1]:0,Ke=2<Xd.constant.length?Xd.constant[2]:0,Le=3<Xd.constant.length?Xd.constant[3]:0)):(Ce=ya(Xd.buffer)?ea.createStream(34962,
Xd.buffer):ea.getBuffer(Xd.buffer),Je="type"in Xd?Cd[Xd.type]:Ce.dtype,te=!!Xd.normalized,We=Xd.size|0,Ve=Xd.offset|0,xe=Xd.stride|0,Ge=Xd.divisor|0);Rd=qa.location;ae=ga[Rd];if(1===Re){ae.buffer||V.enableVertexAttribArray(Rd);de=We||4;if(ae.type!==Je||ae.size!==de||ae.buffer!==Ce||ae.normalized!==te||ae.offset!==Ve||ae.stride!==xe)V.bindBuffer(34962,Ce.buffer),V.vertexAttribPointer(Rd,de,Je,te,xe,Ve),ae.type=Je,ae.size=de,ae.buffer=Ce,ae.normalized=te,ae.offset=Ve,ae.stride=xe;ae.divisor!==Ge&&(h.vertexAttribDivisorANGLE(Rd,
Ge),ae.divisor=Ge)}else if(ae.buffer&&(V.disableVertexAttribArray(Rd),ae.buffer=null),ae.x!==Me||ae.y!==Ne||ae.z!==Ke||ae.w!==Le)V.vertexAttrib4f(Rd,Me,Ne,Ke,Le),ae.x=Me,ae.y=Ne,ae.z=Ke,ae.w=Le;ge=N.call(this,sa,g,f);Oe=!1;Ld=null;Yd=0;He=!1;df=Pe=0;cf=1;Xe=0;Se=5126;Ze=Ye=af=bf=0;ya(ge)?(Oe=!0,Ld=ea.createStream(34962,ge),Se=Ld.dtype):(Ld=ea.getBuffer(ge))?Se=Ld.dtype:"constant"in ge?(cf=2,"number"===typeof ge.constant?(af=ge.constant,Ye=Ze=bf=0):(af=0<ge.constant.length?ge.constant[0]:0,Ye=1<ge.constant.length?
ge.constant[1]:0,Ze=2<ge.constant.length?ge.constant[2]:0,bf=3<ge.constant.length?ge.constant[3]:0)):(Ld=ya(ge.buffer)?ea.createStream(34962,ge.buffer):ea.getBuffer(ge.buffer),Se="type"in ge?Cd[ge.type]:Ld.dtype,He=!!ge.normalized,df=ge.size|0,Pe=ge.offset|0,Xe=ge.stride|0,Yd=ge.divisor|0);Zd=da.location;ce=ga[Zd];if(1===cf){ce.buffer||V.enableVertexAttribArray(Zd);$e=df||1;if(ce.type!==Se||ce.size!==$e||ce.buffer!==Ld||ce.normalized!==He||ce.offset!==Pe||ce.stride!==Xe)V.bindBuffer(34962,Ld.buffer),
V.vertexAttribPointer(Zd,$e,Se,He,Xe,Pe),ce.type=Se,ce.size=$e,ce.buffer=Ld,ce.normalized=He,ce.offset=Pe,ce.stride=Xe;ce.divisor!==Yd&&(h.vertexAttribDivisorANGLE(Zd,Yd),ce.divisor=Yd)}else if(ce.buffer&&(V.disableVertexAttribArray(Zd),ce.buffer=null),ce.x!==af||ce.y!==Ye||ce.z!==Ze||ce.w!==bf)V.vertexAttrib4f(Zd,af,Ye,Ze,bf),ce.x=af,ce.y=Ye,ce.z=Ze,ce.w=bf;kf=sa.pixelRatio;f&&of===kf||(of=kf,V.uniform1f(xa.location,kf));gf=g.scale;lf=gf[0];nf=gf[1];f&&mf===lf&&sf===nf||(mf=lf,sf=nf,V.uniform2f(ca.location,
lf,nf));pf=g.scaleFract;tf=pf[0];Df=pf[1];f&&Cf===tf&&Te===Df||(Cf=tf,Te=Df,V.uniform2f(Da.location,tf,Df));Ie=g.translate;qf=Ie[0];Ef=Ie[1];f&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,V.uniform2f(oa.location,qf,Ef));Bf=g.translateFract;Ff=Bf[0];xf=Bf[1];f&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,V.uniform2f(Ba.location,Ff,xf));wf=R.call(this,sa,g,f);zf=wf[0];Jf=wf[1];f&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,V.uniform2f(ha.location,zf,Jf));Lf=g.opacity;f&&Mf===Lf||(Mf=Lf,V.uniform1f(la.location,Lf));(uf=g.markerTexture)&&
"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;V.uniform1i(U.location,Rf.bind());If=g.elements;vf=null;(vf=(dg=ya(If))?rb.createStream(If):rb.getElements(If))&&V.bindBuffer(34963,vf.buffer.buffer);Sf=g.offset;if(Tf=g.count)0<jb?vf?h.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),jb):h.drawArraysInstancedANGLE(0,Sf,Tf,jb):0>jb&&(vf?V.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):V.drawArrays(0,Sf,Tf)),sa.viewportWidth=Ob,sa.viewportHeight=kb,qb&&ea.destroyStream(Sa),
Pa&&ea.destroyStream(Dc),nb&&ea.destroyStream(gc),Od&&ea.destroyStream(Fc),dd&&ea.destroyStream(Tc),xd&&ea.destroyStream(kd),ke&&ea.destroyStream(ne),qe&&ea.destroyStream(Ce),Oe&&ea.destroyStream(Ld),Rf.unbind(),dg&&rb.destroyStream(vf)}Q.unbind();wa.dirty=!0;Ca.setVAO(null);a&&(d.cpuTime+=performance.now()-k)},draw:function(a){var g,n,p,t,w,z,A,v,x,N,ma,B,I,E,D,r,O,H,M,F,pa,ta,S,L,ia,R,Q,za,T,aa,W,ra,ba,G,ka,fa,Ga,ua,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,
db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,Ad,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Pd,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe;g=Z.next;g!==Z.cur&&(g?V.bindFramebuffer(36160,g.framebuffer):V.bindFramebuffer(36160,null),Z.cur=g);if(wa.dirty){var Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,
Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf;Je=Ha.dither;Je!==wa.dither&&(Je?V.enable(3024):V.disable(3024),wa.dither=Je);Le=va[0];Me=va[1];if(Le!==Ka[0]||Me!==Ka[1])V.blendEquationSeparate(Le,Me),Ka[0]=Le,Ka[1]=Me;Ne=Ha.depth_func;Ne!==wa.depth_func&&(V.depthFunc(Ne),wa.depth_func=Ne);Ke=bc[0];Rd=bc[1];if(Ke!==Ia[0]||Rd!==Ia[1])V.depthRange(Ke,Rd),Ia[0]=Ke,Ia[1]=Rd;ae=Ha.depth_mask;ae!==wa.depth_mask&&(V.depthMask(ae),wa.depth_mask=ae);de=Y[0];ge=Y[1];Oe=Y[2];Ld=Y[3];if(de!==
Kc[0]||ge!==Kc[1]||Oe!==Kc[2]||Ld!==Kc[3])V.colorMask(de,ge,Oe,Ld),Kc[0]=de,Kc[1]=ge,Kc[2]=Oe,Kc[3]=Ld;Yd=Ha.cull_enable;Yd!==wa.cull_enable&&(Yd?V.enable(2884):V.disable(2884),wa.cull_enable=Yd);He=Ha.cull_face;He!==wa.cull_face&&(V.cullFace(He),wa.cull_face=He);Pe=Ha.frontFace;Pe!==wa.frontFace&&(V.frontFace(Pe),wa.frontFace=Pe);df=Ha.lineWidth;df!==wa.lineWidth&&(V.lineWidth(df),wa.lineWidth=df);cf=Ha.polygonOffset_enable;cf!==wa.polygonOffset_enable&&(cf?V.enable(32823):V.disable(32823),wa.polygonOffset_enable=
cf);Xe=cc[0];Se=cc[1];if(Xe!==Sb[0]||Se!==Sb[1])V.polygonOffset(Xe,Se),Sb[0]=Xe,Sb[1]=Se;bf=Ha.sample_alpha;bf!==wa.sample_alpha&&(bf?V.enable(32926):V.disable(32926),wa.sample_alpha=bf);af=Ha.sample_enable;af!==wa.sample_enable&&(af?V.enable(32928):V.disable(32928),wa.sample_enable=af);Ye=Ae[0];Ze=Ae[1];if(Ye!==Id[0]||Ze!==Id[1])V.sampleCoverage(Ye,Ze),Id[0]=Ye,Id[1]=Ze;Zd=Ha.stencil_mask;Zd!==wa.stencil_mask&&(V.stencilMask(Zd),wa.stencil_mask=Zd);ce=De[0];$e=De[1];kf=De[2];if(ce!==ye[0]||$e!==
ye[1]||kf!==ye[2])V.stencilFunc(ce,$e,kf),ye[0]=ce,ye[1]=$e,ye[2]=kf;of=je[0];gf=je[1];lf=je[2];mf=je[3];if(of!==Gd[0]||gf!==Gd[1]||lf!==Gd[2]||mf!==Gd[3])V.stencilOpSeparate(of,gf,lf,mf),Gd[0]=of,Gd[1]=gf,Gd[2]=lf,Gd[3]=mf;nf=$d[0];sf=$d[1];pf=$d[2];tf=$d[3];if(nf!==re[0]||sf!==re[1]||pf!==re[2]||tf!==re[3])V.stencilOpSeparate(nf,sf,pf,tf),re[0]=nf,re[1]=sf,re[2]=pf,re[3]=tf}n=a.viewport;p=n.x|0;t=n.y|0;w="width"in n?n.width|0:sa.framebufferWidth-p;z="height"in n?n.height|0:sa.framebufferHeight-
t;A=sa.viewportWidth;sa.viewportWidth=w;v=sa.viewportHeight;sa.viewportHeight=z;V.viewport(p,t,w,z);Bd[0]=p;Bd[1]=t;Bd[2]=w;Bd[3]=z;V.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;V.enable(3042);wa.blend_enable=!0;V.blendFuncSeparate(770,771,773,1);eb[0]=770;eb[1]=771;eb[2]=773;eb[3]=1;V.disable(2929);wa.depth_enable=!1;x=a.viewport;N=x.x|0;ma=x.y|0;B="width"in x?x.width|0:sa.framebufferWidth-N;I="height"in x?x.height|0:sa.framebufferHeight-ma;V.scissor(N,ma,B,I);Sd[0]=N;Sd[1]=ma;Sd[2]=B;Sd[3]=
I;V.enable(3089);wa.scissor_enable=!0;V.disable(2960);wa.stencil_enable=!1;if(E=wa.profile)D=performance.now(),d.count++;V.useProgram(l.program);r=Gb.angle_instanced_arrays;Ca.setVAO(null);O=u.call(this,sa,a,0);H=!1;M=null;F=0;pa=!1;S=ta=0;L=1;ia=0;R=5126;aa=T=za=Q=0;ya(O)?(H=!0,M=ea.createStream(34962,O),R=M.dtype):(M=ea.getBuffer(O))?R=M.dtype:"constant"in O?(L=2,"number"===typeof O.constant?(za=O.constant,T=aa=Q=0):(za=0<O.constant.length?O.constant[0]:0,T=1<O.constant.length?O.constant[1]:0,aa=
2<O.constant.length?O.constant[2]:0,Q=3<O.constant.length?O.constant[3]:0)):(M=ya(O.buffer)?ea.createStream(34962,O.buffer):ea.getBuffer(O.buffer),R="type"in O?Cd[O.type]:M.dtype,pa=!!O.normalized,S=O.size|0,ta=O.offset|0,ia=O.stride|0,F=O.divisor|0);W=Qa.location;ra=ga[W];if(1===L){ra.buffer||V.enableVertexAttribArray(W);ba=S||1;if(ra.type!==R||ra.size!==ba||ra.buffer!==M||ra.normalized!==pa||ra.offset!==ta||ra.stride!==ia)V.bindBuffer(34962,M.buffer),V.vertexAttribPointer(W,ba,R,pa,ia,ta),ra.type=
R,ra.size=ba,ra.buffer=M,ra.normalized=pa,ra.offset=ta,ra.stride=ia;ra.divisor!==F&&(r.vertexAttribDivisorANGLE(W,F),ra.divisor=F)}else if(ra.buffer&&(V.disableVertexAttribArray(W),ra.buffer=null),ra.x!==za||ra.y!==T||ra.z!==aa||ra.w!==Q)V.vertexAttrib4f(W,za,T,aa,Q),ra.x=za,ra.y=T,ra.z=aa,ra.w=Q;G=q.call(this,sa,a,0);ka=!1;fa=null;Ga=0;ua=!1;Mb=gb=0;ab=1;jb=0;Wa=5126;sc=Ib=Nb=Jc=0;ya(G)?(ka=!0,fa=ea.createStream(34962,G),Wa=fa.dtype):(fa=ea.getBuffer(G))?Wa=fa.dtype:"constant"in G?(ab=2,"number"===
typeof G.constant?(Nb=G.constant,Ib=sc=Jc=0):(Nb=0<G.constant.length?G.constant[0]:0,Ib=1<G.constant.length?G.constant[1]:0,sc=2<G.constant.length?G.constant[2]:0,Jc=3<G.constant.length?G.constant[3]:0)):(fa=ya(G.buffer)?ea.createStream(34962,G.buffer):ea.getBuffer(G.buffer),Wa="type"in G?Cd[G.type]:fa.dtype,ua=!!G.normalized,Mb=G.size|0,gb=G.offset|0,jb=G.stride|0,Ga=G.divisor|0);Ob=Hb.location;kb=ga[Ob];if(1===ab){kb.buffer||V.enableVertexAttribArray(Ob);Fb=Mb||1;if(kb.type!==Wa||kb.size!==Fb||
kb.buffer!==fa||kb.normalized!==ua||kb.offset!==gb||kb.stride!==jb)V.bindBuffer(34962,fa.buffer),V.vertexAttribPointer(Ob,Fb,Wa,ua,jb,gb),kb.type=Wa,kb.size=Fb,kb.buffer=fa,kb.normalized=ua,kb.offset=gb,kb.stride=jb;kb.divisor!==Ga&&(r.vertexAttribDivisorANGLE(Ob,Ga),kb.divisor=Ga)}else if(kb.buffer&&(V.disableVertexAttribArray(Ob),kb.buffer=null),kb.x!==Nb||kb.y!==Ib||kb.z!==sc||kb.w!==Jc)V.vertexAttrib4f(Ob,Nb,Ib,sc,Jc),kb.x=Nb,kb.y=Ib,kb.z=sc,kb.w=Jc;Cb=m.call(this,sa,a,0);yb=!1;hb=null;$b=0;Pb=
!1;Sa=qb=0;Ub=1;sb=0;jc=5126;tb=Ja=pb=ib=0;ya(Cb)?(yb=!0,hb=ea.createStream(34962,Cb),jc=hb.dtype):(hb=ea.getBuffer(Cb))?jc=hb.dtype:"constant"in Cb?(Ub=2,"number"===typeof Cb.constant?(pb=Cb.constant,Ja=tb=ib=0):(pb=0<Cb.constant.length?Cb.constant[0]:0,Ja=1<Cb.constant.length?Cb.constant[1]:0,tb=2<Cb.constant.length?Cb.constant[2]:0,ib=3<Cb.constant.length?Cb.constant[3]:0)):(hb=ya(Cb.buffer)?ea.createStream(34962,Cb.buffer):ea.getBuffer(Cb.buffer),jc="type"in Cb?Cd[Cb.type]:hb.dtype,Pb=!!Cb.normalized,
Sa=Cb.size|0,qb=Cb.offset|0,sb=Cb.stride|0,$b=Cb.divisor|0);La=Fa.location;db=ga[La];if(1===Ub){db.buffer||V.enableVertexAttribArray(La);fb=Sa||1;if(db.type!==jc||db.size!==fb||db.buffer!==hb||db.normalized!==Pb||db.offset!==qb||db.stride!==sb)V.bindBuffer(34962,hb.buffer),V.vertexAttribPointer(La,fb,jc,Pb,sb,qb),db.type=jc,db.size=fb,db.buffer=hb,db.normalized=Pb,db.offset=qb,db.stride=sb;db.divisor!==$b&&(r.vertexAttribDivisorANGLE(La,$b),db.divisor=$b)}else if(db.buffer&&(V.disableVertexAttribArray(La),
db.buffer=null),db.x!==pb||db.y!==Ja||db.z!==tb||db.w!==ib)V.vertexAttrib4f(La,pb,Ja,tb,ib),db.x=pb,db.y=Ja,db.z=tb,db.w=ib;Na=b.call(this,sa,a,0);lb=!1;Xa=null;vb=0;ub=!1;Dc=Pa=0;Va=1;Jb=0;Db=5126;Kb=Za=Ad=Ma=0;ya(Na)?(lb=!0,Xa=ea.createStream(34962,Na),Db=Xa.dtype):(Xa=ea.getBuffer(Na))?Db=Xa.dtype:"constant"in Na?(Va=2,"number"===typeof Na.constant?(Ad=Na.constant,Za=Kb=Ma=0):(Ad=0<Na.constant.length?Na.constant[0]:0,Za=1<Na.constant.length?Na.constant[1]:0,Kb=2<Na.constant.length?Na.constant[2]:
0,Ma=3<Na.constant.length?Na.constant[3]:0)):(Xa=ya(Na.buffer)?ea.createStream(34962,Na.buffer):ea.getBuffer(Na.buffer),Db="type"in Na?Cd[Na.type]:Xa.dtype,ub=!!Na.normalized,Dc=Na.size|0,Pa=Na.offset|0,Jb=Na.stride|0,vb=Na.divisor|0);Lb=Ua.location;mb=ga[Lb];if(1===Va){mb.buffer||V.enableVertexAttribArray(Lb);Oa=Dc||1;if(mb.type!==Db||mb.size!==Oa||mb.buffer!==Xa||mb.normalized!==ub||mb.offset!==Pa||mb.stride!==Jb)V.bindBuffer(34962,Xa.buffer),V.vertexAttribPointer(Lb,Oa,Db,ub,Jb,Pa),mb.type=Db,
mb.size=Oa,mb.buffer=Xa,mb.normalized=ub,mb.offset=Pa,mb.stride=Jb;mb.divisor!==vb&&(r.vertexAttribDivisorANGLE(Lb,vb),mb.divisor=vb)}else if(mb.buffer&&(V.disableVertexAttribArray(Lb),mb.buffer=null),mb.x!==Ad||mb.y!==Za||mb.z!==Kb||mb.w!==Ma)V.vertexAttrib4f(Lb,Ad,Za,Kb,Ma),mb.x=Ad,mb.y=Za,mb.z=Kb,mb.w=Ma;ac=f.call(this,sa,a,0);Ra=!1;wb=null;xb=0;Ta=!1;gc=nb=0;Bc=1;wc=0;bb=5126;nd=Ya=Mc=kc=0;ya(ac)?(Ra=!0,wb=ea.createStream(34962,ac),bb=wb.dtype):(wb=ea.getBuffer(ac))?bb=wb.dtype:"constant"in ac?
(Bc=2,"number"===typeof ac.constant?(Mc=ac.constant,Ya=nd=kc=0):(Mc=0<ac.constant.length?ac.constant[0]:0,Ya=1<ac.constant.length?ac.constant[1]:0,nd=2<ac.constant.length?ac.constant[2]:0,kc=3<ac.constant.length?ac.constant[3]:0)):(wb=ya(ac.buffer)?ea.createStream(34962,ac.buffer):ea.getBuffer(ac.buffer),bb="type"in ac?Cd[ac.type]:wb.dtype,Ta=!!ac.normalized,gc=ac.size|0,nb=ac.offset|0,wc=ac.stride|0,xb=ac.divisor|0);Ab=ja.location;$a=ga[Ab];if(1===Bc){$a.buffer||V.enableVertexAttribArray(Ab);Wb=
gc||1;if($a.type!==bb||$a.size!==Wb||$a.buffer!==wb||$a.normalized!==Ta||$a.offset!==nb||$a.stride!==wc)V.bindBuffer(34962,wb.buffer),V.vertexAttribPointer(Ab,Wb,bb,Ta,wc,nb),$a.type=bb,$a.size=Wb,$a.buffer=wb,$a.normalized=Ta,$a.offset=nb,$a.stride=wc;$a.divisor!==xb&&(r.vertexAttribDivisorANGLE(Ab,xb),$a.divisor=xb)}else if($a.buffer&&(V.disableVertexAttribArray(Ab),$a.buffer=null),$a.x!==Mc||$a.y!==Ya||$a.z!==nd||$a.w!==kc)V.vertexAttrib4f(Ab,Mc,Ya,nd,kc),$a.x=Mc,$a.y=Ya,$a.z=nd,$a.w=kc;uc=c.call(this,
sa,a,0);Xb=!1;Qb=null;Nc=0;Rb=!1;Fc=Pd=0;sd=1;Qc=0;Yc=5126;hc=xc=oc=vd=0;ya(uc)?(Xb=!0,Qb=ea.createStream(34962,uc),Yc=Qb.dtype):(Qb=ea.getBuffer(uc))?Yc=Qb.dtype:"constant"in uc?(sd=2,"number"===typeof uc.constant?(oc=uc.constant,xc=hc=vd=0):(oc=0<uc.constant.length?uc.constant[0]:0,xc=1<uc.constant.length?uc.constant[1]:0,hc=2<uc.constant.length?uc.constant[2]:0,vd=3<uc.constant.length?uc.constant[3]:0)):(Qb=ya(uc.buffer)?ea.createStream(34962,uc.buffer):ea.getBuffer(uc.buffer),Yc="type"in uc?Cd[uc.type]:
Qb.dtype,Rb=!!uc.normalized,Fc=uc.size|0,Pd=uc.offset|0,Qc=uc.stride|0,Nc=uc.divisor|0);cb=na.location;tc=ga[cb];if(1===sd){tc.buffer||V.enableVertexAttribArray(cb);Tb=Fc||1;if(tc.type!==Yc||tc.size!==Tb||tc.buffer!==Qb||tc.normalized!==Rb||tc.offset!==Pd||tc.stride!==Qc)V.bindBuffer(34962,Qb.buffer),V.vertexAttribPointer(cb,Tb,Yc,Rb,Qc,Pd),tc.type=Yc,tc.size=Tb,tc.buffer=Qb,tc.normalized=Rb,tc.offset=Pd,tc.stride=Qc;tc.divisor!==Nc&&(r.vertexAttribDivisorANGLE(cb,Nc),tc.divisor=Nc)}else if(tc.buffer&&
(V.disableVertexAttribArray(cb),tc.buffer=null),tc.x!==oc||tc.y!==xc||tc.z!==hc||tc.w!==vd)V.vertexAttrib4f(cb,oc,xc,hc,vd),tc.x=oc,tc.y=xc,tc.z=hc,tc.w=vd;Yb=h.call(this,sa,a,0);ec=!1;ic=null;zc=0;Cc=!1;Tc=dd=0;Uc=1;Vc=0;Zc=5126;lc=$c=ed=od=0;ya(Yb)?(ec=!0,ic=ea.createStream(34962,Yb),Zc=ic.dtype):(ic=ea.getBuffer(Yb))?Zc=ic.dtype:"constant"in Yb?(Uc=2,"number"===typeof Yb.constant?(ed=Yb.constant,$c=lc=od=0):(ed=0<Yb.constant.length?Yb.constant[0]:0,$c=1<Yb.constant.length?Yb.constant[1]:0,lc=2<
Yb.constant.length?Yb.constant[2]:0,od=3<Yb.constant.length?Yb.constant[3]:0)):(ic=ya(Yb.buffer)?ea.createStream(34962,Yb.buffer):ea.getBuffer(Yb.buffer),Zc="type"in Yb?Cd[Yb.type]:ic.dtype,Cc=!!Yb.normalized,Tc=Yb.size|0,dd=Yb.offset|0,Vc=Yb.stride|0,zc=Yb.divisor|0);dc=J.location;ad=ga[dc];if(1===Uc){ad.buffer||V.enableVertexAttribArray(dc);Xc=Tc||4;if(ad.type!==Zc||ad.size!==Xc||ad.buffer!==ic||ad.normalized!==Cc||ad.offset!==dd||ad.stride!==Vc)V.bindBuffer(34962,ic.buffer),V.vertexAttribPointer(dc,
Xc,Zc,Cc,Vc,dd),ad.type=Zc,ad.size=Xc,ad.buffer=ic,ad.normalized=Cc,ad.offset=dd,ad.stride=Vc;ad.divisor!==zc&&(r.vertexAttribDivisorANGLE(dc,zc),ad.divisor=zc)}else if(ad.buffer&&(V.disableVertexAttribArray(dc),ad.buffer=null),ad.x!==ed||ad.y!==$c||ad.z!==lc||ad.w!==od)V.vertexAttrib4f(dc,ed,$c,lc,od),ad.x=ed,ad.y=$c,ad.z=lc,ad.w=od;fd=C.call(this,sa,a,0);Ac=!1;jd=null;Dd=0;ze=!1;kd=xd=0;Fe=1;Td=0;he=5126;Kd=Nd=Ud=ee=0;ya(fd)?(Ac=!0,jd=ea.createStream(34962,fd),he=jd.dtype):(jd=ea.getBuffer(fd))?
he=jd.dtype:"constant"in fd?(Fe=2,"number"===typeof fd.constant?(Ud=fd.constant,Nd=Kd=ee=0):(Ud=0<fd.constant.length?fd.constant[0]:0,Nd=1<fd.constant.length?fd.constant[1]:0,Kd=2<fd.constant.length?fd.constant[2]:0,ee=3<fd.constant.length?fd.constant[3]:0)):(jd=ya(fd.buffer)?ea.createStream(34962,fd.buffer):ea.getBuffer(fd.buffer),he="type"in fd?Cd[fd.type]:jd.dtype,ze=!!fd.normalized,kd=fd.size|0,xd=fd.offset|0,Td=fd.stride|0,Dd=fd.divisor|0);qd=qa.location;Wc=ga[qd];if(1===Fe){Wc.buffer||V.enableVertexAttribArray(qd);
wd=kd||4;if(Wc.type!==he||Wc.size!==wd||Wc.buffer!==jd||Wc.normalized!==ze||Wc.offset!==xd||Wc.stride!==Td)V.bindBuffer(34962,jd.buffer),V.vertexAttribPointer(qd,wd,he,ze,Td,xd),Wc.type=he,Wc.size=wd,Wc.buffer=jd,Wc.normalized=ze,Wc.offset=xd,Wc.stride=Td;Wc.divisor!==Dd&&(r.vertexAttribDivisorANGLE(qd,Dd),Wc.divisor=Dd)}else if(Wc.buffer&&(V.disableVertexAttribArray(qd),Wc.buffer=null),Wc.x!==Ud||Wc.y!==Nd||Wc.z!==Kd||Wc.w!==ee)V.vertexAttrib4f(qd,Ud,Nd,Kd,ee),Wc.x=Ud,Wc.y=Nd,Wc.z=Kd,Wc.w=ee;ud=
y.call(this,sa,a,0);ld=!1;yd=null;Fd=0;Hd=!1;ne=ke=0;ue=1;oe=0;le=5126;pe=fe=ve=ie=0;ya(ud)?(ld=!0,yd=ea.createStream(34962,ud),le=yd.dtype):(yd=ea.getBuffer(ud))?le=yd.dtype:"constant"in ud?(ue=2,"number"===typeof ud.constant?(ve=ud.constant,fe=pe=ie=0):(ve=0<ud.constant.length?ud.constant[0]:0,fe=1<ud.constant.length?ud.constant[1]:0,pe=2<ud.constant.length?ud.constant[2]:0,ie=3<ud.constant.length?ud.constant[3]:0)):(yd=ya(ud.buffer)?ea.createStream(34962,ud.buffer):ea.getBuffer(ud.buffer),le="type"in
ud?Cd[ud.type]:yd.dtype,Hd=!!ud.normalized,ne=ud.size|0,ke=ud.offset|0,oe=ud.stride|0,Fd=ud.divisor|0);Rc=da.location;id=ga[Rc];if(1===ue){id.buffer||V.enableVertexAttribArray(Rc);we=ne||1;if(id.type!==le||id.size!==we||id.buffer!==yd||id.normalized!==Hd||id.offset!==ke||id.stride!==oe)V.bindBuffer(34962,yd.buffer),V.vertexAttribPointer(Rc,we,le,Hd,oe,ke),id.type=le,id.size=we,id.buffer=yd,id.normalized=Hd,id.offset=ke,id.stride=oe;id.divisor!==Fd&&(r.vertexAttribDivisorANGLE(Rc,Fd),id.divisor=Fd)}else if(id.buffer&&
(V.disableVertexAttribArray(Rc),id.buffer=null),id.x!==ve||id.y!==fe||id.z!==pe||id.w!==ie)V.vertexAttrib4f(Rc,ve,fe,pe,ie),id.x=ve,id.y=fe,id.z=pe,id.w=ie;V.uniform1i(K.location,!1);V.uniform1f(xa.location,sa.pixelRatio);se=a.scale;V.uniform2f(ca.location,se[0],se[1]);Qd=a.scaleFract;V.uniform2f(Da.location,Qd[0],Qd[1]);Vd=a.translate;V.uniform2f(oa.location,Vd[0],Vd[1]);Wd=a.translateFract;V.uniform2f(Ba.location,Wd[0],Wd[1]);Xd=e.call(this,sa,a,0);V.uniform2f(ha.location,Xd[0],Xd[1]);V.uniform1f(la.location,
a.opacity);V.uniform1i(Aa.location,k.bind());(qe=a.markerTexture)&&"framebuffer"===qe._reglType&&(qe=qe.color[0]);Ce=qe._texture;V.uniform1i(U.location,Ce.bind());Ge=a.elements;te=null;(te=(Ve=ya(Ge))?rb.createStream(Ge):rb.getElements(Ge))&&V.bindBuffer(34963,te.buffer.buffer);We=a.offset;if(Re=a.count)xe=Ea.instances,0<xe?te?r.drawElementsInstancedANGLE(0,Re,te.type,We<<(te.type-5121>>1),xe):r.drawArraysInstancedANGLE(0,We,Re,xe):0>xe&&(te?V.drawElements(0,Re,te.type,We<<(te.type-5121>>1)):V.drawArrays(0,
We,Re)),wa.dirty=!0,Ca.setVAO(null),sa.viewportWidth=A,sa.viewportHeight=v,E&&(d.cpuTime+=performance.now()-D),H&&ea.destroyStream(M),ka&&ea.destroyStream(fa),yb&&ea.destroyStream(hb),lb&&ea.destroyStream(Xa),Ra&&ea.destroyStream(wb),Xb&&ea.destroyStream(Qb),ec&&ea.destroyStream(ic),Ac&&ea.destroyStream(jd),ld&&ea.destroyStream(yd),k.unbind(),Ce.unbind(),Ve&&rb.destroyStream(te)},scope:function(c,e,b){var a,k,h,f,m,u,y,l,C,q,P,N,J,ga,V,Fa,O,K,M,U,S,ca,Z,Hb,L,R,Qa,Q,X,da,ha,xa,Ca,qa,Y,T,ja,W,Ua,ba,
oa,Da,Ba,na,la,fa,Aa,va,Gb,Ia,ua,eb,Ka,Sb,Sa,bc,cc,Kc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Sd,Va,Jb,Db,Ma,Id,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,Bd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,$d,Fc,sd,Qc,Yc,De,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Gd,re,xd,kd,ye,je,Ae,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,
gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=c.viewport;k=a.x|0;h=a.y|0;f="width"in a?a.width|0:sa.framebufferWidth-k;m="height"in a?a.height|0:sa.framebufferHeight-h;u=sa.viewportWidth;sa.viewportWidth=f;y=sa.viewportHeight;sa.viewportHeight=m;l=Pd[0];Pd[0]=k;C=Pd[1];Pd[1]=
h;q=Pd[2];Pd[2]=f;P=Pd[3];Pd[3]=m;N=ia[0];ia[0]=0;J=ia[1];ia[1]=0;ga=ia[2];ia[2]=0;V=ia[3];ia[3]=1;Fa=Ha.blend_enable;Ha.blend_enable=!0;O=Ga[0];Ga[0]=770;K=Ga[1];Ga[1]=771;M=Ga[2];Ga[2]=773;U=Ga[3];Ga[3]=1;S=Ha.depth_enable;Ha.depth_enable=!1;ca=c.viewport;Z=ca.x|0;Hb=ca.y|0;L="width"in ca?ca.width|0:sa.framebufferWidth-Z;R="height"in ca?ca.height|0:sa.framebufferHeight-Hb;Qa=Ad[0];Ad[0]=Z;Q=Ad[1];Ad[1]=Hb;X=Ad[2];Ad[2]=L;da=Ad[3];Ad[3]=R;ha=Ha.scissor_enable;Ha.scissor_enable=!0;xa=Ha.stencil_enable;
Ha.stencil_enable=!1;if(Ca=wa.profile)qa=performance.now(),d.count++;Y=c.elements;T=null;T=(ja=ya(Y))?rb.createStream(Y):rb.getElements(Y);W=Ea.elements;Ea.elements=T;Ua=c.offset;ba=Ea.offset;Ea.offset=Ua;oa=c.count;Da=Ea.count;Ea.count=oa;Ba=Ea.primitive;Ea.primitive=0;na=za[45];za[45]=!1;la=c.markerTexture;fa=za[48];za[48]=la;Aa=c.opacity;va=za[10];za[10]=Aa;Gb=g.call(this,sa,c,b);Ia=za[46];za[46]=Gb;ua=za[47];za[47]=n;eb=sa.pixelRatio;Ka=za[34];za[34]=eb;Sb=c.scale;Sa=za[6];za[6]=Sb;bc=c.scaleFract;
cc=za[7];za[7]=bc;Kc=c.translate;ib=za[8];za[8]=Kc;pb=c.translateFract;Ja=za[9];za[9]=pb;tb=p.call(this,sa,c,b);La=!1;db=null;fb=0;Na=!1;Xa=lb=0;vb=1;ub=0;Pa=5126;Db=Jb=Va=Sd=0;ya(tb)?(La=!0,db=ea.createStream(34962,tb),Pa=db.dtype):(db=ea.getBuffer(tb))?Pa=db.dtype:"constant"in tb?(vb=2,"number"===typeof tb.constant?(Va=tb.constant,Jb=Db=Sd=0):(Va=0<tb.constant.length?tb.constant[0]:0,Jb=1<tb.constant.length?tb.constant[1]:0,Db=2<tb.constant.length?tb.constant[2]:0,Sd=3<tb.constant.length?tb.constant[3]:
0)):(db=ya(tb.buffer)?ea.createStream(34962,tb.buffer):ea.getBuffer(tb.buffer),Pa="type"in tb?Cd[tb.type]:db.dtype,Na=!!tb.normalized,Xa=tb.size|0,lb=tb.offset|0,ub=tb.stride|0,fb=tb.divisor|0);Ma=w.buffer;w.buffer=db;Id=w.divisor;w.divisor=fb;Za=w.normalized;w.normalized=Na;Kb=w.offset;w.offset=lb;Lb=w.size;w.size=Xa;mb=w.state;w.state=vb;Oa=w.stride;w.stride=ub;ac=w.type;w.type=Pa;Ra=w.w;w.w=Sd;wb=w.x;w.x=Va;xb=w.y;w.y=Jb;Ta=w.z;w.z=Db;nb=z.call(this,sa,c,b);gc=!1;Bc=null;wc=0;bb=!1;Mc=kc=0;Ya=
1;Bd=0;Ab=5126;Xb=uc=Wb=$a=0;ya(nb)?(gc=!0,Bc=ea.createStream(34962,nb),Ab=Bc.dtype):(Bc=ea.getBuffer(nb))?Ab=Bc.dtype:"constant"in nb?(Ya=2,"number"===typeof nb.constant?(Wb=nb.constant,uc=Xb=$a=0):(Wb=0<nb.constant.length?nb.constant[0]:0,uc=1<nb.constant.length?nb.constant[1]:0,Xb=2<nb.constant.length?nb.constant[2]:0,$a=3<nb.constant.length?nb.constant[3]:0)):(Bc=ya(nb.buffer)?ea.createStream(34962,nb.buffer):ea.getBuffer(nb.buffer),Ab="type"in nb?Cd[nb.type]:Bc.dtype,bb=!!nb.normalized,Mc=nb.size|
0,kc=nb.offset|0,Bd=nb.stride|0,wc=nb.divisor|0);Qb=A.buffer;A.buffer=Bc;Nc=A.divisor;A.divisor=wc;Rb=A.normalized;A.normalized=bb;$d=A.offset;A.offset=kc;Fc=A.size;A.size=Mc;sd=A.state;A.state=Ya;Qc=A.stride;A.stride=Bd;Yc=A.type;A.type=Ab;De=A.w;A.w=$a;oc=A.x;A.x=Wb;xc=A.y;A.y=uc;hc=A.z;A.z=Xb;cb=ma.call(this,sa,c,b);tc=!1;Tb=null;Yb=0;ec=!1;zc=ic=0;Cc=1;dd=0;Tc=5126;od=Zc=Vc=Uc=0;ya(cb)?(tc=!0,Tb=ea.createStream(34962,cb),Tc=Tb.dtype):(Tb=ea.getBuffer(cb))?Tc=Tb.dtype:"constant"in cb?(Cc=2,"number"===
typeof cb.constant?(Vc=cb.constant,Zc=od=Uc=0):(Vc=0<cb.constant.length?cb.constant[0]:0,Zc=1<cb.constant.length?cb.constant[1]:0,od=2<cb.constant.length?cb.constant[2]:0,Uc=3<cb.constant.length?cb.constant[3]:0)):(Tb=ya(cb.buffer)?ea.createStream(34962,cb.buffer):ea.getBuffer(cb.buffer),Tc="type"in cb?Cd[cb.type]:Tb.dtype,ec=!!cb.normalized,zc=cb.size|0,ic=cb.offset|0,dd=cb.stride|0,Yb=cb.divisor|0);ed=x.buffer;x.buffer=Tb;$c=x.divisor;x.divisor=Yb;lc=x.normalized;x.normalized=ec;dc=x.offset;x.offset=
ic;ad=x.size;x.size=zc;Xc=x.state;x.state=Cc;fd=x.stride;x.stride=dd;Ac=x.type;x.type=Tc;jd=x.w;x.w=Uc;Gd=x.x;x.x=Vc;re=x.y;x.y=Zc;xd=x.z;x.z=od;kd=v.call(this,sa,c,b);ye=!1;je=null;Ae=0;ee=!1;Nd=Ud=0;Kd=1;qd=0;Wc=5126;yd=ld=ud=wd=0;ya(kd)?(ye=!0,je=ea.createStream(34962,kd),Wc=je.dtype):(je=ea.getBuffer(kd))?Wc=je.dtype:"constant"in kd?(Kd=2,"number"===typeof kd.constant?(ud=kd.constant,ld=yd=wd=0):(ud=0<kd.constant.length?kd.constant[0]:0,ld=1<kd.constant.length?kd.constant[1]:0,yd=2<kd.constant.length?
kd.constant[2]:0,wd=3<kd.constant.length?kd.constant[3]:0)):(je=ya(kd.buffer)?ea.createStream(34962,kd.buffer):ea.getBuffer(kd.buffer),Wc="type"in kd?Cd[kd.type]:je.dtype,ee=!!kd.normalized,Nd=kd.size|0,Ud=kd.offset|0,qd=kd.stride|0,Ae=kd.divisor|0);Fd=ta.buffer;ta.buffer=je;Hd=ta.divisor;ta.divisor=Ae;ke=ta.normalized;ta.normalized=ee;ne=ta.offset;ta.offset=Ud;ue=ta.size;ta.size=Nd;oe=ta.state;ta.state=Kd;le=ta.stride;ta.stride=qd;ie=ta.type;ta.type=Wc;ve=ta.w;ta.w=wd;fe=ta.x;ta.x=ud;pe=ta.y;ta.y=
ld;Rc=ta.z;ta.z=yd;id=I.call(this,sa,c,b);we=!1;se=null;Qd=0;Vd=!1;Xd=Wd=0;qe=1;Ce=0;Ge=5126;Re=We=Ve=te=0;ya(id)?(we=!0,se=ea.createStream(34962,id),Ge=se.dtype):(se=ea.getBuffer(id))?Ge=se.dtype:"constant"in id?(qe=2,"number"===typeof id.constant?(Ve=id.constant,We=Re=te=0):(Ve=0<id.constant.length?id.constant[0]:0,We=1<id.constant.length?id.constant[1]:0,Re=2<id.constant.length?id.constant[2]:0,te=3<id.constant.length?id.constant[3]:0)):(se=ya(id.buffer)?ea.createStream(34962,id.buffer):ea.getBuffer(id.buffer),
Ge="type"in id?Cd[id.type]:se.dtype,Vd=!!id.normalized,Xd=id.size|0,Wd=id.offset|0,Ce=id.stride|0,Qd=id.divisor|0);xe=r.buffer;r.buffer=se;Je=r.divisor;r.divisor=Qd;Le=r.normalized;r.normalized=Vd;Me=r.offset;r.offset=Wd;Ne=r.size;r.size=Xd;Ke=r.state;r.state=qe;Rd=r.stride;r.stride=Ce;ae=r.type;r.type=Ge;de=r.w;r.w=te;ge=r.x;r.x=Ve;Oe=r.y;r.y=We;Ld=r.z;r.z=Re;Yd=E.call(this,sa,c,b);He=!1;Pe=null;df=0;cf=!1;Se=Xe=0;bf=1;af=0;Ye=5126;$e=ce=Zd=Ze=0;ya(Yd)?(He=!0,Pe=ea.createStream(34962,Yd),Ye=Pe.dtype):
(Pe=ea.getBuffer(Yd))?Ye=Pe.dtype:"constant"in Yd?(bf=2,"number"===typeof Yd.constant?(Zd=Yd.constant,ce=$e=Ze=0):(Zd=0<Yd.constant.length?Yd.constant[0]:0,ce=1<Yd.constant.length?Yd.constant[1]:0,$e=2<Yd.constant.length?Yd.constant[2]:0,Ze=3<Yd.constant.length?Yd.constant[3]:0)):(Pe=ya(Yd.buffer)?ea.createStream(34962,Yd.buffer):ea.getBuffer(Yd.buffer),Ye="type"in Yd?Cd[Yd.type]:Pe.dtype,cf=!!Yd.normalized,Se=Yd.size|0,Xe=Yd.offset|0,af=Yd.stride|0,df=Yd.divisor|0);kf=B.buffer;B.buffer=Pe;of=B.divisor;
B.divisor=df;gf=B.normalized;B.normalized=cf;lf=B.offset;B.offset=Xe;mf=B.size;B.size=Se;nf=B.state;B.state=bf;sf=B.stride;B.stride=af;pf=B.type;B.type=Ye;tf=B.w;B.w=Ze;Cf=B.x;B.x=Zd;Df=B.y;B.y=ce;Te=B.z;B.z=$e;Ie=aa.call(this,sa,c,b);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ya(Ie)?(qf=!0,rf=ea.createStream(34962,Ie),yf=rf.dtype):(rf=ea.getBuffer(Ie))?yf=rf.dtype:"constant"in Ie?(Gf=2,"number"===typeof Ie.constant?(zf=Ie.constant,Af=Jf=wf=0):(zf=0<Ie.constant.length?Ie.constant[0]:
0,Af=1<Ie.constant.length?Ie.constant[1]:0,Jf=2<Ie.constant.length?Ie.constant[2]:0,wf=3<Ie.constant.length?Ie.constant[3]:0)):(rf=ya(Ie.buffer)?ea.createStream(34962,Ie.buffer):ea.getBuffer(Ie.buffer),yf="type"in Ie?Cd[Ie.type]:rf.dtype,Hf=!!Ie.normalized,Ff=Ie.size|0,Bf=Ie.offset|0,xf=Ie.stride|0,Ef=Ie.divisor|0);Kf=H.buffer;H.buffer=rf;Lf=H.divisor;H.divisor=Ef;Mf=H.normalized;H.normalized=Hf;uf=H.offset;H.offset=Bf;Rf=H.size;H.size=Ff;If=H.state;H.state=Gf;vf=H.stride;H.stride=xf;dg=H.type;H.type=
yf;Sf=H.w;H.w=wf;Tf=H.x;H.x=zf;qg=H.y;H.y=Af;hf=H.z;H.z=Jf;ef=F.call(this,sa,c,b);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ya(ef)?(Nf=!0,Of=ea.createStream(34962,ef),Uf=Of.dtype):(Of=ea.getBuffer(ef))?Uf=Of.dtype:"constant"in ef?(ig=2,"number"===typeof ef.constant?(Yf=ef.constant,Zf=jg=Xf=0):(Yf=0<ef.constant.length?ef.constant[0]:0,Zf=1<ef.constant.length?ef.constant[1]:0,jg=2<ef.constant.length?ef.constant[2]:0,Xf=3<ef.constant.length?ef.constant[3]:0)):(Of=ya(ef.buffer)?
ea.createStream(34962,ef.buffer):ea.getBuffer(ef.buffer),Uf="type"in ef?Cd[ef.type]:Of.dtype,fg=!!ef.normalized,hg=ef.size|0,gg=ef.offset|0,Wf=ef.stride|0,eg=ef.divisor|0);rg=D.buffer;D.buffer=Of;sg=D.divisor;D.divisor=eg;tg=D.normalized;D.normalized=fg;ug=D.offset;D.offset=gg;vg=D.size;D.size=hg;wg=D.state;D.state=ig;xg=D.stride;D.stride=Wf;yg=D.type;D.type=Uf;zg=D.w;D.w=Xf;Ag=D.x;D.x=Yf;Bg=D.y;D.y=Zf;jf=D.z;D.z=jg;ff=G.call(this,sa,c,b);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=
ag=0;ya(ff)?(Pf=!0,Qf=ea.createStream(34962,ff),Vf=Qf.dtype):(Qf=ea.getBuffer(ff))?Vf=Qf.dtype:"constant"in ff?(og=2,"number"===typeof ff.constant?(bg=ff.constant,cg=pg=ag=0):(bg=0<ff.constant.length?ff.constant[0]:0,cg=1<ff.constant.length?ff.constant[1]:0,pg=2<ff.constant.length?ff.constant[2]:0,ag=3<ff.constant.length?ff.constant[3]:0)):(Qf=ya(ff.buffer)?ea.createStream(34962,ff.buffer):ea.getBuffer(ff.buffer),Vf="type"in ff?Cd[ff.type]:Qf.dtype,lg=!!ff.normalized,ng=ff.size|0,mg=ff.offset|0,$f=
ff.stride|0,kg=ff.divisor|0);Cg=t.buffer;t.buffer=Qf;Dg=t.divisor;t.divisor=kg;Eg=t.normalized;t.normalized=lg;Fg=t.offset;t.offset=mg;Gg=t.size;t.size=ng;Hg=t.state;t.state=og;Ig=t.stride;t.stride=$f;Jg=t.type;t.type=Vf;Kg=t.w;t.w=ag;Lg=t.x;t.x=bg;Mg=t.y;t.y=cg;Ng=t.z;t.z=pg;Og=pa.vert;pa.vert=44;Pg=pa.frag;pa.frag=43;wa.dirty=!0;e(sa,c,b);sa.viewportWidth=u;sa.viewportHeight=y;Pd[0]=l;Pd[1]=C;Pd[2]=q;Pd[3]=P;ia[0]=N;ia[1]=J;ia[2]=ga;ia[3]=V;Ha.blend_enable=Fa;Ga[0]=O;Ga[1]=K;Ga[2]=M;Ga[3]=U;Ha.depth_enable=
S;Ad[0]=Qa;Ad[1]=Q;Ad[2]=X;Ad[3]=da;Ha.scissor_enable=ha;Ha.stencil_enable=xa;Ca&&(d.cpuTime+=performance.now()-qa);ja&&rb.destroyStream(T);Ea.elements=W;Ea.offset=ba;Ea.count=Da;Ea.primitive=Ba;za[45]=na;za[48]=fa;za[10]=va;za[46]=Ia;za[47]=ua;za[34]=Ka;za[6]=Sa;za[7]=cc;za[8]=ib;za[9]=Ja;La&&ea.destroyStream(db);w.buffer=Ma;w.divisor=Id;w.normalized=Za;w.offset=Kb;w.size=Lb;w.state=mb;w.stride=Oa;w.type=ac;w.w=Ra;w.x=wb;w.y=xb;w.z=Ta;gc&&ea.destroyStream(Bc);A.buffer=Qb;A.divisor=Nc;A.normalized=
Rb;A.offset=$d;A.size=Fc;A.state=sd;A.stride=Qc;A.type=Yc;A.w=De;A.x=oc;A.y=xc;A.z=hc;tc&&ea.destroyStream(Tb);x.buffer=ed;x.divisor=$c;x.normalized=lc;x.offset=dc;x.size=ad;x.state=Xc;x.stride=fd;x.type=Ac;x.w=jd;x.x=Gd;x.y=re;x.z=xd;ye&&ea.destroyStream(je);ta.buffer=Fd;ta.divisor=Hd;ta.normalized=ke;ta.offset=ne;ta.size=ue;ta.state=oe;ta.stride=le;ta.type=ie;ta.w=ve;ta.x=fe;ta.y=pe;ta.z=Rc;we&&ea.destroyStream(se);r.buffer=xe;r.divisor=Je;r.normalized=Le;r.offset=Me;r.size=Ne;r.state=Ke;r.stride=
Rd;r.type=ae;r.w=de;r.x=ge;r.y=Oe;r.z=Ld;He&&ea.destroyStream(Pe);B.buffer=kf;B.divisor=of;B.normalized=gf;B.offset=lf;B.size=mf;B.state=nf;B.stride=sf;B.type=pf;B.w=tf;B.x=Cf;B.y=Df;B.z=Te;qf&&ea.destroyStream(rf);H.buffer=Kf;H.divisor=Lf;H.normalized=Mf;H.offset=uf;H.size=Rf;H.state=If;H.stride=vf;H.type=dg;H.w=Sf;H.x=Tf;H.y=qg;H.z=hf;Nf&&ea.destroyStream(Of);D.buffer=rg;D.divisor=sg;D.normalized=tg;D.offset=ug;D.size=vg;D.state=wg;D.stride=xg;D.type=yg;D.w=zg;D.x=Ag;D.y=Bg;D.z=jf;Pf&&ea.destroyStream(Qf);
t.buffer=Cg;t.divisor=Dg;t.normalized=Eg;t.offset=Fg;t.size=Gg;t.state=Hg;t.stride=Ig;t.type=Jg;t.w=Kg;t.x=Lg;t.y=Mg;t.z=Ng;pa.vert=Og;pa.frag=Pg;wa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,r,I,ra,E,B,aa,H,F,D,G,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb){var Ua,
ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca,ia,X,va,Ka,Ga,eb,Y,Kc,bc,Ia,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je,Gd,Pd,Bd;Ua=a.attributes;ga=a.buffer;ea=a.context;sa=a.current;wa=a.draw;Ea=a.elements;rb=a.extensions;Gb=a.framebuffer;Z=a.gl;V=a.isBufferArgs;ya=a.next;Ha=a.shader;pa=a.uniforms;za=a.vao;Ca=ya.blend_color;ia=sa.blend_color;X=ya.blend_equation;va=sa.blend_equation;Ka=ya.blend_func;Ga=sa.blend_func;eb=ya.colorMask;Y=sa.colorMask;Kc=ya.depth_range;bc=sa.depth_range;Ia=ya.polygonOffset_offset;cc=sa.polygonOffset_offset;
Sb=ya.sample_coverage;Ae=sa.sample_coverage;Id=ya.scissor_box;Ad=sa.scissor_box;Sd=ya.stencil_func;De=sa.stencil_func;ye=ya.stencil_opBack;$d=sa.stencil_opBack;re=ya.stencil_opFront;je=sa.stencil_opFront;Gd=ya.viewport;Pd=sa.viewport;Bd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(c,e){var b,a,k,h,f,g;b=Gb.next;b!==Gb.cur&&(b?Z.bindFramebuffer(36160,b.framebuffer):Z.bindFramebuffer(36160,null),Gb.cur=b);if(sa.dirty){var n,p,t,
w,z,m,u,A,x,y,v,l,C,q,P,ma,B,I,E,r,D,Ha,H,F,pa,ta,Ca,ra,aa,G,ka,Ka,gb,Mb;n=ya.dither;n!==sa.dither&&(n?Z.enable(3024):Z.disable(3024),sa.dither=n);p=X[0];t=X[1];if(p!==va[0]||t!==va[1])Z.blendEquationSeparate(p,t),va[0]=p,va[1]=t;w=ya.depth_func;w!==sa.depth_func&&(Z.depthFunc(w),sa.depth_func=w);z=Kc[0];m=Kc[1];if(z!==bc[0]||m!==bc[1])Z.depthRange(z,m),bc[0]=z,bc[1]=m;u=ya.depth_mask;u!==sa.depth_mask&&(Z.depthMask(u),sa.depth_mask=u);A=eb[0];x=eb[1];y=eb[2];v=eb[3];if(A!==Y[0]||x!==Y[1]||y!==Y[2]||
v!==Y[3])Z.colorMask(A,x,y,v),Y[0]=A,Y[1]=x,Y[2]=y,Y[3]=v;l=ya.cull_enable;l!==sa.cull_enable&&(l?Z.enable(2884):Z.disable(2884),sa.cull_enable=l);C=ya.cull_face;C!==sa.cull_face&&(Z.cullFace(C),sa.cull_face=C);q=ya.frontFace;q!==sa.frontFace&&(Z.frontFace(q),sa.frontFace=q);P=ya.lineWidth;P!==sa.lineWidth&&(Z.lineWidth(P),sa.lineWidth=P);ma=ya.polygonOffset_enable;ma!==sa.polygonOffset_enable&&(ma?Z.enable(32823):Z.disable(32823),sa.polygonOffset_enable=ma);B=Ia[0];I=Ia[1];if(B!==cc[0]||I!==cc[1])Z.polygonOffset(B,
I),cc[0]=B,cc[1]=I;E=ya.sample_alpha;E!==sa.sample_alpha&&(E?Z.enable(32926):Z.disable(32926),sa.sample_alpha=E);r=ya.sample_enable;r!==sa.sample_enable&&(r?Z.enable(32928):Z.disable(32928),sa.sample_enable=r);D=Sb[0];Ha=Sb[1];if(D!==Ae[0]||Ha!==Ae[1])Z.sampleCoverage(D,Ha),Ae[0]=D,Ae[1]=Ha;H=ya.stencil_mask;H!==sa.stencil_mask&&(Z.stencilMask(H),sa.stencil_mask=H);F=Sd[0];pa=Sd[1];ta=Sd[2];if(F!==De[0]||pa!==De[1]||ta!==De[2])Z.stencilFunc(F,pa,ta),De[0]=F,De[1]=pa,De[2]=ta;Ca=re[0];ra=re[1];aa=
re[2];G=re[3];if(Ca!==je[0]||ra!==je[1]||aa!==je[2]||G!==je[3])Z.stencilOpSeparate(Ca,ra,aa,G),je[0]=Ca,je[1]=ra,je[2]=aa,je[3]=G;ka=ye[0];Ka=ye[1];gb=ye[2];Mb=ye[3];if(ka!==$d[0]||Ka!==$d[1]||gb!==$d[2]||Mb!==$d[3])Z.stencilOpSeparate(ka,Ka,gb,Mb),$d[0]=ka,$d[1]=Ka,$d[2]=gb,$d[3]=Mb}Z.blendColor(0,0,0,1);ia[0]=0;ia[1]=0;ia[2]=0;ia[3]=1;Z.enable(3042);sa.blend_enable=!0;Z.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;Z.disable(2929);sa.depth_enable=!1;Z.enable(3089);sa.scissor_enable=
!0;Z.disable(2960);sa.stencil_enable=!1;if(a=sa.profile)k=performance.now(),d.count+=e;Z.useProgram(ba.program);h=rb.angle_instanced_arrays;var ab;za.setVAO(null);Z.uniform1i(K.location,!1);Z.uniform1i(ha.location,Q.bind());ab=wa.instances;for(f=0;f<e;++f){g=c[f];var jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,Id,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Gd,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,
ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;jb=g.viewport;Wa=jb.x|0;Jc=jb.y|0;Nb="width"in jb?jb.width|0:ea.framebufferWidth-Wa;Ib="height"in jb?jb.height|0:ea.framebufferHeight-Jc;sc=
ea.viewportWidth;ea.viewportWidth=Nb;Ob=ea.viewportHeight;ea.viewportHeight=Ib;Z.viewport(Wa,Jc,Nb,Ib);Pd[0]=Wa;Pd[1]=Jc;Pd[2]=Nb;Pd[3]=Ib;kb=g.viewport;Fb=kb.x|0;Cb=kb.y|0;yb="width"in kb?kb.width|0:ea.framebufferWidth-Fb;hb="height"in kb?kb.height|0:ea.framebufferHeight-Cb;Z.scissor(Fb,Cb,yb,hb);Ad[0]=Fb;Ad[1]=Cb;Ad[2]=yb;Ad[3]=hb;$b=L.call(this,ea,g,f);Pb=!1;qb=null;Sa=0;Ub=!1;jc=sb=0;ib=1;pb=0;Ja=5126;fb=db=La=tb=0;V($b)?(Pb=!0,qb=ga.createStream(34962,$b),Ja=qb.dtype):(qb=ga.getBuffer($b))?Ja=
qb.dtype:"constant"in $b?(ib=2,"number"===typeof $b.constant?(La=$b.constant,db=fb=tb=0):(La=0<$b.constant.length?$b.constant[0]:0,db=1<$b.constant.length?$b.constant[1]:0,fb=2<$b.constant.length?$b.constant[2]:0,tb=3<$b.constant.length?$b.constant[3]:0)):(qb=V($b.buffer)?ga.createStream(34962,$b.buffer):ga.getBuffer($b.buffer),Ja="type"in $b?Bd[$b.type]:qb.dtype,Ub=!!$b.normalized,jc=$b.size|0,sb=$b.offset|0,pb=$b.stride|0,Sa=$b.divisor|0);Na=Ba.location;lb=Ua[Na];if(1===ib){lb.buffer||Z.enableVertexAttribArray(Na);
Xa=jc||1;if(lb.type!==Ja||lb.size!==Xa||lb.buffer!==qb||lb.normalized!==Ub||lb.offset!==sb||lb.stride!==pb)Z.bindBuffer(34962,qb.buffer),Z.vertexAttribPointer(Na,Xa,Ja,Ub,pb,sb),lb.type=Ja,lb.size=Xa,lb.buffer=qb,lb.normalized=Ub,lb.offset=sb,lb.stride=pb;lb.divisor!==Sa&&(h.vertexAttribDivisorANGLE(Na,Sa),lb.divisor=Sa)}else if(lb.buffer&&(Z.disableVertexAttribArray(Na),lb.buffer=null),lb.x!==La||lb.y!==db||lb.z!==fb||lb.w!==tb)Z.vertexAttrib4f(Na,La,db,fb,tb),lb.x=La,lb.y=db,lb.z=fb,lb.w=tb;vb=
fa.call(this,ea,g,f);ub=!1;Pa=null;Dc=0;Va=!1;Db=Jb=0;Ma=1;Id=0;Za=5126;Oa=mb=Lb=Kb=0;V(vb)?(ub=!0,Pa=ga.createStream(34962,vb),Za=Pa.dtype):(Pa=ga.getBuffer(vb))?Za=Pa.dtype:"constant"in vb?(Ma=2,"number"===typeof vb.constant?(Lb=vb.constant,mb=Oa=Kb=0):(Lb=0<vb.constant.length?vb.constant[0]:0,mb=1<vb.constant.length?vb.constant[1]:0,Oa=2<vb.constant.length?vb.constant[2]:0,Kb=3<vb.constant.length?vb.constant[3]:0)):(Pa=V(vb.buffer)?ga.createStream(34962,vb.buffer):ga.getBuffer(vb.buffer),Za="type"in
vb?Bd[vb.type]:Pa.dtype,Va=!!vb.normalized,Db=vb.size|0,Jb=vb.offset|0,Id=vb.stride|0,Dc=vb.divisor|0);ac=Fa.location;Ra=Ua[ac];if(1===Ma){Ra.buffer||Z.enableVertexAttribArray(ac);wb=Db||1;if(Ra.type!==Za||Ra.size!==wb||Ra.buffer!==Pa||Ra.normalized!==Va||Ra.offset!==Jb||Ra.stride!==Id)Z.bindBuffer(34962,Pa.buffer),Z.vertexAttribPointer(ac,wb,Za,Va,Id,Jb),Ra.type=Za,Ra.size=wb,Ra.buffer=Pa,Ra.normalized=Va,Ra.offset=Jb,Ra.stride=Id;Ra.divisor!==Dc&&(h.vertexAttribDivisorANGLE(ac,Dc),Ra.divisor=Dc)}else if(Ra.buffer&&
(Z.disableVertexAttribArray(ac),Ra.buffer=null),Ra.x!==Lb||Ra.y!==mb||Ra.z!==Oa||Ra.w!==Kb)Z.vertexAttrib4f(ac,Lb,mb,Oa,Kb),Ra.x=Lb,Ra.y=mb,Ra.z=Oa,Ra.w=Kb;xb=ua.call(this,ea,g,f);Ta=!1;nb=null;gc=0;Bc=!1;bb=wc=0;kc=1;Mc=0;Ya=5126;Wb=$a=Ab=nd=0;V(xb)?(Ta=!0,nb=ga.createStream(34962,xb),Ya=nb.dtype):(nb=ga.getBuffer(xb))?Ya=nb.dtype:"constant"in xb?(kc=2,"number"===typeof xb.constant?(Ab=xb.constant,$a=Wb=nd=0):(Ab=0<xb.constant.length?xb.constant[0]:0,$a=1<xb.constant.length?xb.constant[1]:0,Wb=2<
xb.constant.length?xb.constant[2]:0,nd=3<xb.constant.length?xb.constant[3]:0)):(nb=V(xb.buffer)?ga.createStream(34962,xb.buffer):ga.getBuffer(xb.buffer),Ya="type"in xb?Bd[xb.type]:nb.dtype,Bc=!!xb.normalized,bb=xb.size|0,wc=xb.offset|0,Mc=xb.stride|0,gc=xb.divisor|0);uc=Qa.location;Xb=Ua[uc];if(1===kc){Xb.buffer||Z.enableVertexAttribArray(uc);Qb=bb||1;if(Xb.type!==Ya||Xb.size!==Qb||Xb.buffer!==nb||Xb.normalized!==Bc||Xb.offset!==wc||Xb.stride!==Mc)Z.bindBuffer(34962,nb.buffer),Z.vertexAttribPointer(uc,
Qb,Ya,Bc,Mc,wc),Xb.type=Ya,Xb.size=Qb,Xb.buffer=nb,Xb.normalized=Bc,Xb.offset=wc,Xb.stride=Mc;Xb.divisor!==gc&&(h.vertexAttribDivisorANGLE(uc,gc),Xb.divisor=gc)}else if(Xb.buffer&&(Z.disableVertexAttribArray(uc),Xb.buffer=null),Xb.x!==Ab||Xb.y!==$a||Xb.z!==Wb||Xb.w!==nd)Z.vertexAttrib4f(uc,Ab,$a,Wb,nd),Xb.x=Ab,Xb.y=$a,Xb.z=Wb,Xb.w=nd;Nc=T.call(this,ea,g,f);Rb=!1;Gd=null;Fc=0;sd=!1;Yc=Qc=0;vd=1;oc=0;xc=5126;Tb=tc=cb=hc=0;V(Nc)?(Rb=!0,Gd=ga.createStream(34962,Nc),xc=Gd.dtype):(Gd=ga.getBuffer(Nc))?
xc=Gd.dtype:"constant"in Nc?(vd=2,"number"===typeof Nc.constant?(cb=Nc.constant,tc=Tb=hc=0):(cb=0<Nc.constant.length?Nc.constant[0]:0,tc=1<Nc.constant.length?Nc.constant[1]:0,Tb=2<Nc.constant.length?Nc.constant[2]:0,hc=3<Nc.constant.length?Nc.constant[3]:0)):(Gd=V(Nc.buffer)?ga.createStream(34962,Nc.buffer):ga.getBuffer(Nc.buffer),xc="type"in Nc?Bd[Nc.type]:Gd.dtype,sd=!!Nc.normalized,Yc=Nc.size|0,Qc=Nc.offset|0,oc=Nc.stride|0,Fc=Nc.divisor|0);Yb=Hb.location;ec=Ua[Yb];if(1===vd){ec.buffer||Z.enableVertexAttribArray(Yb);
ic=Yc||1;if(ec.type!==xc||ec.size!==ic||ec.buffer!==Gd||ec.normalized!==sd||ec.offset!==Qc||ec.stride!==oc)Z.bindBuffer(34962,Gd.buffer),Z.vertexAttribPointer(Yb,ic,xc,sd,oc,Qc),ec.type=xc,ec.size=ic,ec.buffer=Gd,ec.normalized=sd,ec.offset=Qc,ec.stride=oc;ec.divisor!==Fc&&(h.vertexAttribDivisorANGLE(Yb,Fc),ec.divisor=Fc)}else if(ec.buffer&&(Z.disableVertexAttribArray(Yb),ec.buffer=null),ec.x!==cb||ec.y!==tc||ec.z!==Tb||ec.w!==hc)Z.vertexAttrib4f(Yb,cb,tc,Tb,hc),ec.x=cb,ec.y=tc,ec.z=Tb,ec.w=hc;zc=
W.call(this,ea,g,f);Cc=!1;dd=null;Tc=0;Uc=!1;Zc=Vc=0;od=1;ed=0;$c=5126;Xc=ad=dc=lc=0;V(zc)?(Cc=!0,dd=ga.createStream(34962,zc),$c=dd.dtype):(dd=ga.getBuffer(zc))?$c=dd.dtype:"constant"in zc?(od=2,"number"===typeof zc.constant?(dc=zc.constant,ad=Xc=lc=0):(dc=0<zc.constant.length?zc.constant[0]:0,ad=1<zc.constant.length?zc.constant[1]:0,Xc=2<zc.constant.length?zc.constant[2]:0,lc=3<zc.constant.length?zc.constant[3]:0)):(dd=V(zc.buffer)?ga.createStream(34962,zc.buffer):ga.getBuffer(zc.buffer),$c="type"in
zc?Bd[zc.type]:dd.dtype,Uc=!!zc.normalized,Zc=zc.size|0,Vc=zc.offset|0,ed=zc.stride|0,Tc=zc.divisor|0);fd=Da.location;Ac=Ua[fd];if(1===od){Ac.buffer||Z.enableVertexAttribArray(fd);jd=Zc||1;if(Ac.type!==$c||Ac.size!==jd||Ac.buffer!==dd||Ac.normalized!==Uc||Ac.offset!==Vc||Ac.stride!==ed)Z.bindBuffer(34962,dd.buffer),Z.vertexAttribPointer(fd,jd,$c,Uc,ed,Vc),Ac.type=$c,Ac.size=jd,Ac.buffer=dd,Ac.normalized=Uc,Ac.offset=Vc,Ac.stride=ed;Ac.divisor!==Tc&&(h.vertexAttribDivisorANGLE(fd,Tc),Ac.divisor=Tc)}else if(Ac.buffer&&
(Z.disableVertexAttribArray(fd),Ac.buffer=null),Ac.x!==dc||Ac.y!==ad||Ac.z!==Xc||Ac.w!==lc)Z.vertexAttrib4f(fd,dc,ad,Xc,lc),Ac.x=dc,Ac.y=ad,Ac.z=Xc,Ac.w=lc;Dd=S.call(this,ea,g,f);ze=!1;xd=null;kd=0;Fe=!1;he=Td=0;ee=1;Ud=0;Nd=5126;wd=Wc=qd=Kd=0;V(Dd)?(ze=!0,xd=ga.createStream(34962,Dd),Nd=xd.dtype):(xd=ga.getBuffer(Dd))?Nd=xd.dtype:"constant"in Dd?(ee=2,"number"===typeof Dd.constant?(qd=Dd.constant,Wc=wd=Kd=0):(qd=0<Dd.constant.length?Dd.constant[0]:0,Wc=1<Dd.constant.length?Dd.constant[1]:0,wd=2<
Dd.constant.length?Dd.constant[2]:0,Kd=3<Dd.constant.length?Dd.constant[3]:0)):(xd=V(Dd.buffer)?ga.createStream(34962,Dd.buffer):ga.getBuffer(Dd.buffer),Nd="type"in Dd?Bd[Dd.type]:xd.dtype,Fe=!!Dd.normalized,he=Dd.size|0,Td=Dd.offset|0,Ud=Dd.stride|0,kd=Dd.divisor|0);ud=na.location;ld=Ua[ud];if(1===ee){ld.buffer||Z.enableVertexAttribArray(ud);yd=he||1;if(ld.type!==Nd||ld.size!==yd||ld.buffer!==xd||ld.normalized!==Fe||ld.offset!==Td||ld.stride!==Ud)Z.bindBuffer(34962,xd.buffer),Z.vertexAttribPointer(ud,
yd,Nd,Fe,Ud,Td),ld.type=Nd,ld.size=yd,ld.buffer=xd,ld.normalized=Fe,ld.offset=Td,ld.stride=Ud;ld.divisor!==kd&&(h.vertexAttribDivisorANGLE(ud,kd),ld.divisor=kd)}else if(ld.buffer&&(Z.disableVertexAttribArray(ud),ld.buffer=null),ld.x!==qd||ld.y!==Wc||ld.z!==wd||ld.w!==Kd)Z.vertexAttrib4f(ud,qd,Wc,wd,Kd),ld.x=qd,ld.y=Wc,ld.z=wd,ld.w=Kd;Fd=O.call(this,ea,g,f);Hd=!1;ke=null;ne=0;ue=!1;le=oe=0;ie=1;ve=0;fe=5126;we=id=Rc=pe=0;V(Fd)?(Hd=!0,ke=ga.createStream(34962,Fd),fe=ke.dtype):(ke=ga.getBuffer(Fd))?
fe=ke.dtype:"constant"in Fd?(ie=2,"number"===typeof Fd.constant?(Rc=Fd.constant,id=we=pe=0):(Rc=0<Fd.constant.length?Fd.constant[0]:0,id=1<Fd.constant.length?Fd.constant[1]:0,we=2<Fd.constant.length?Fd.constant[2]:0,pe=3<Fd.constant.length?Fd.constant[3]:0)):(ke=V(Fd.buffer)?ga.createStream(34962,Fd.buffer):ga.getBuffer(Fd.buffer),fe="type"in Fd?Bd[Fd.type]:ke.dtype,ue=!!Fd.normalized,le=Fd.size|0,oe=Fd.offset|0,ve=Fd.stride|0,ne=Fd.divisor|0);se=J.location;Qd=Ua[se];if(1===ie){Qd.buffer||Z.enableVertexAttribArray(se);
Vd=le||4;if(Qd.type!==fe||Qd.size!==Vd||Qd.buffer!==ke||Qd.normalized!==ue||Qd.offset!==oe||Qd.stride!==ve)Z.bindBuffer(34962,ke.buffer),Z.vertexAttribPointer(se,Vd,fe,ue,ve,oe),Qd.type=fe,Qd.size=Vd,Qd.buffer=ke,Qd.normalized=ue,Qd.offset=oe,Qd.stride=ve;Qd.divisor!==ne&&(h.vertexAttribDivisorANGLE(se,ne),Qd.divisor=ne)}else if(Qd.buffer&&(Z.disableVertexAttribArray(se),Qd.buffer=null),Qd.x!==Rc||Qd.y!==id||Qd.z!==we||Qd.w!==pe)Z.vertexAttrib4f(se,Rc,id,we,pe),Qd.x=Rc,Qd.y=id,Qd.z=we,Qd.w=pe;Wd=
M.call(this,ea,g,f);Xd=!1;qe=null;Ce=0;Ge=!1;Ve=te=0;We=1;Re=0;xe=5126;Ne=Me=Le=Je=0;V(Wd)?(Xd=!0,qe=ga.createStream(34962,Wd),xe=qe.dtype):(qe=ga.getBuffer(Wd))?xe=qe.dtype:"constant"in Wd?(We=2,"number"===typeof Wd.constant?(Le=Wd.constant,Me=Ne=Je=0):(Le=0<Wd.constant.length?Wd.constant[0]:0,Me=1<Wd.constant.length?Wd.constant[1]:0,Ne=2<Wd.constant.length?Wd.constant[2]:0,Je=3<Wd.constant.length?Wd.constant[3]:0)):(qe=V(Wd.buffer)?ga.createStream(34962,Wd.buffer):ga.getBuffer(Wd.buffer),xe="type"in
Wd?Bd[Wd.type]:qe.dtype,Ge=!!Wd.normalized,Ve=Wd.size|0,te=Wd.offset|0,Re=Wd.stride|0,Ce=Wd.divisor|0);Ke=qa.location;Rd=Ua[Ke];if(1===We){Rd.buffer||Z.enableVertexAttribArray(Ke);ae=Ve||4;if(Rd.type!==xe||Rd.size!==ae||Rd.buffer!==qe||Rd.normalized!==Ge||Rd.offset!==te||Rd.stride!==Re)Z.bindBuffer(34962,qe.buffer),Z.vertexAttribPointer(Ke,ae,xe,Ge,Re,te),Rd.type=xe,Rd.size=ae,Rd.buffer=qe,Rd.normalized=Ge,Rd.offset=te,Rd.stride=Re;Rd.divisor!==Ce&&(h.vertexAttribDivisorANGLE(Ke,Ce),Rd.divisor=Ce)}else if(Rd.buffer&&
(Z.disableVertexAttribArray(Ke),Rd.buffer=null),Rd.x!==Le||Rd.y!==Me||Rd.z!==Ne||Rd.w!==Je)Z.vertexAttrib4f(Ke,Le,Me,Ne,Je),Rd.x=Le,Rd.y=Me,Rd.z=Ne,Rd.w=Je;de=N.call(this,ea,g,f);ge=!1;Oe=null;Ld=0;Yd=!1;Pe=He=0;df=1;cf=0;Xe=5126;Ye=af=bf=Se=0;V(de)?(ge=!0,Oe=ga.createStream(34962,de),Xe=Oe.dtype):(Oe=ga.getBuffer(de))?Xe=Oe.dtype:"constant"in de?(df=2,"number"===typeof de.constant?(bf=de.constant,af=Ye=Se=0):(bf=0<de.constant.length?de.constant[0]:0,af=1<de.constant.length?de.constant[1]:0,Ye=2<
de.constant.length?de.constant[2]:0,Se=3<de.constant.length?de.constant[3]:0)):(Oe=V(de.buffer)?ga.createStream(34962,de.buffer):ga.getBuffer(de.buffer),Xe="type"in de?Bd[de.type]:Oe.dtype,Yd=!!de.normalized,Pe=de.size|0,He=de.offset|0,cf=de.stride|0,Ld=de.divisor|0);Ze=da.location;Zd=Ua[Ze];if(1===df){Zd.buffer||Z.enableVertexAttribArray(Ze);ce=Pe||1;if(Zd.type!==Xe||Zd.size!==ce||Zd.buffer!==Oe||Zd.normalized!==Yd||Zd.offset!==He||Zd.stride!==cf)Z.bindBuffer(34962,Oe.buffer),Z.vertexAttribPointer(Ze,
ce,Xe,Yd,cf,He),Zd.type=Xe,Zd.size=ce,Zd.buffer=Oe,Zd.normalized=Yd,Zd.offset=He,Zd.stride=cf;Zd.divisor!==Ld&&(h.vertexAttribDivisorANGLE(Ze,Ld),Zd.divisor=Ld)}else if(Zd.buffer&&(Z.disableVertexAttribArray(Ze),Zd.buffer=null),Zd.x!==bf||Zd.y!==af||Zd.z!==Ye||Zd.w!==Se)Z.vertexAttrib4f(Ze,bf,af,Ye,Se),Zd.x=bf,Zd.y=af,Zd.z=Ye,Zd.w=Se;$e=ea.pixelRatio;f&&kf===$e||(kf=$e,Z.uniform1f(Aa.location,$e));of=R.call(this,ea,g,f);gf=of[0];mf=of[1];f&&lf===gf&&nf===mf||(lf=gf,nf=mf,Z.uniform2f(la.location,gf,
mf));sf=g.scale;pf=sf[0];Cf=sf[1];f&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,Z.uniform2f(xa.location,pf,Cf));Te=g.scaleFract;Ie=Te[0];rf=Te[1];f&&qf===Ie&&Ef===rf||(qf=Ie,Ef=rf,Z.uniform2f(ca.location,Ie,rf));Hf=g.translate;Bf=Hf[0];Gf=Hf[1];f&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,Z.uniform2f(ja.location,Bf,Gf));yf=g.translateFract;wf=yf[0];Af=yf[1];f&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,Z.uniform2f(oa.location,wf,Af));Kf=g.opacity;f&&Lf===Kf||(Lf=Kf,Z.uniform1f(U.location,Kf));Mf=g.elements;uf=null;(uf=(Rf=V(Mf))?Ea.createStream(Mf):
Ea.getElements(Mf))&&Z.bindBuffer(34963,uf.buffer.buffer);If=g.offset;if(vf=g.count)0<ab?uf?h.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),ab):h.drawArraysInstancedANGLE(0,If,vf,ab):0>ab&&(uf?Z.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):Z.drawArrays(0,If,vf)),ea.viewportWidth=sc,ea.viewportHeight=Ob,Pb&&ga.destroyStream(qb),ub&&ga.destroyStream(Pa),Ta&&ga.destroyStream(nb),Rb&&ga.destroyStream(Gd),Cc&&ga.destroyStream(dd),ze&&ga.destroyStream(xd),Hd&&ga.destroyStream(ke),Xd&&
ga.destroyStream(qe),ge&&ga.destroyStream(Oe),Rf&&Ea.destroyStream(uf)}Q.unbind();sa.dirty=!0;za.setVAO(null);a&&(d.cpuTime+=performance.now()-k)},draw:function(a){var g,n,p,t,w,z,A,x,v,N,ma,B,I,E,r,D,O,Ha,H,M,F,pa,S,L,ta,R,Q,Ca,T,ra,aa,W,G,ba,ka,fa,ua,Ka,Zb,gb,Mb,ab,jb,Wa,Id,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,Gd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,
ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve;g=Gb.next;g!==Gb.cur&&(g?Z.bindFramebuffer(36160,g.framebuffer):Z.bindFramebuffer(36160,null),Gb.cur=g);if(sa.dirty){var We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf;We=ya.dither;We!==sa.dither&&(We?Z.enable(3024):Z.disable(3024),sa.dither=We);Re=X[0];xe=X[1];if(Re!==
va[0]||xe!==va[1])Z.blendEquationSeparate(Re,xe),va[0]=Re,va[1]=xe;Je=ya.depth_func;Je!==sa.depth_func&&(Z.depthFunc(Je),sa.depth_func=Je);Le=Kc[0];Me=Kc[1];if(Le!==bc[0]||Me!==bc[1])Z.depthRange(Le,Me),bc[0]=Le,bc[1]=Me;Ne=ya.depth_mask;Ne!==sa.depth_mask&&(Z.depthMask(Ne),sa.depth_mask=Ne);Ke=eb[0];Rd=eb[1];ae=eb[2];de=eb[3];if(Ke!==Y[0]||Rd!==Y[1]||ae!==Y[2]||de!==Y[3])Z.colorMask(Ke,Rd,ae,de),Y[0]=Ke,Y[1]=Rd,Y[2]=ae,Y[3]=de;ge=ya.cull_enable;ge!==sa.cull_enable&&(ge?Z.enable(2884):Z.disable(2884),
sa.cull_enable=ge);Oe=ya.cull_face;Oe!==sa.cull_face&&(Z.cullFace(Oe),sa.cull_face=Oe);Ld=ya.frontFace;Ld!==sa.frontFace&&(Z.frontFace(Ld),sa.frontFace=Ld);Yd=ya.lineWidth;Yd!==sa.lineWidth&&(Z.lineWidth(Yd),sa.lineWidth=Yd);He=ya.polygonOffset_enable;He!==sa.polygonOffset_enable&&(He?Z.enable(32823):Z.disable(32823),sa.polygonOffset_enable=He);Pe=Ia[0];df=Ia[1];if(Pe!==cc[0]||df!==cc[1])Z.polygonOffset(Pe,df),cc[0]=Pe,cc[1]=df;cf=ya.sample_alpha;cf!==sa.sample_alpha&&(cf?Z.enable(32926):Z.disable(32926),
sa.sample_alpha=cf);Xe=ya.sample_enable;Xe!==sa.sample_enable&&(Xe?Z.enable(32928):Z.disable(32928),sa.sample_enable=Xe);Se=Sb[0];bf=Sb[1];if(Se!==Ae[0]||bf!==Ae[1])Z.sampleCoverage(Se,bf),Ae[0]=Se,Ae[1]=bf;af=ya.stencil_mask;af!==sa.stencil_mask&&(Z.stencilMask(af),sa.stencil_mask=af);Ye=Sd[0];Ze=Sd[1];Zd=Sd[2];if(Ye!==De[0]||Ze!==De[1]||Zd!==De[2])Z.stencilFunc(Ye,Ze,Zd),De[0]=Ye,De[1]=Ze,De[2]=Zd;ce=re[0];$e=re[1];kf=re[2];of=re[3];if(ce!==je[0]||$e!==je[1]||kf!==je[2]||of!==je[3])Z.stencilOpSeparate(ce,
$e,kf,of),je[0]=ce,je[1]=$e,je[2]=kf,je[3]=of;gf=ye[0];lf=ye[1];mf=ye[2];nf=ye[3];if(gf!==$d[0]||lf!==$d[1]||mf!==$d[2]||nf!==$d[3])Z.stencilOpSeparate(gf,lf,mf,nf),$d[0]=gf,$d[1]=lf,$d[2]=mf,$d[3]=nf}n=a.viewport;p=n.x|0;t=n.y|0;w="width"in n?n.width|0:ea.framebufferWidth-p;z="height"in n?n.height|0:ea.framebufferHeight-t;A=ea.viewportWidth;ea.viewportWidth=w;x=ea.viewportHeight;ea.viewportHeight=z;Z.viewport(p,t,w,z);Pd[0]=p;Pd[1]=t;Pd[2]=w;Pd[3]=z;Z.blendColor(0,0,0,1);ia[0]=0;ia[1]=0;ia[2]=0;
ia[3]=1;Z.enable(3042);sa.blend_enable=!0;Z.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;Z.disable(2929);sa.depth_enable=!1;v=a.viewport;N=v.x|0;ma=v.y|0;B="width"in v?v.width|0:ea.framebufferWidth-N;I="height"in v?v.height|0:ea.framebufferHeight-ma;Z.scissor(N,ma,B,I);Ad[0]=N;Ad[1]=ma;Ad[2]=B;Ad[3]=I;Z.enable(3089);sa.scissor_enable=!0;Z.disable(2960);sa.stencil_enable=!1;if(E=sa.profile)r=performance.now(),d.count++;Z.useProgram(l.program);D=rb.angle_instanced_arrays;za.setVAO(null);
O=u.call(this,ea,a,0);Ha=!1;H=null;M=0;F=!1;S=pa=0;L=1;ta=0;R=5126;ra=T=Ca=Q=0;V(O)?(Ha=!0,H=ga.createStream(34962,O),R=H.dtype):(H=ga.getBuffer(O))?R=H.dtype:"constant"in O?(L=2,"number"===typeof O.constant?(Ca=O.constant,T=ra=Q=0):(Ca=0<O.constant.length?O.constant[0]:0,T=1<O.constant.length?O.constant[1]:0,ra=2<O.constant.length?O.constant[2]:0,Q=3<O.constant.length?O.constant[3]:0)):(H=V(O.buffer)?ga.createStream(34962,O.buffer):ga.getBuffer(O.buffer),R="type"in O?Bd[O.type]:H.dtype,F=!!O.normalized,
S=O.size|0,pa=O.offset|0,ta=O.stride|0,M=O.divisor|0);aa=Ba.location;W=Ua[aa];if(1===L){W.buffer||Z.enableVertexAttribArray(aa);G=S||1;if(W.type!==R||W.size!==G||W.buffer!==H||W.normalized!==F||W.offset!==pa||W.stride!==ta)Z.bindBuffer(34962,H.buffer),Z.vertexAttribPointer(aa,G,R,F,ta,pa),W.type=R,W.size=G,W.buffer=H,W.normalized=F,W.offset=pa,W.stride=ta;W.divisor!==M&&(D.vertexAttribDivisorANGLE(aa,M),W.divisor=M)}else if(W.buffer&&(Z.disableVertexAttribArray(aa),W.buffer=null),W.x!==Ca||W.y!==
T||W.z!==ra||W.w!==Q)Z.vertexAttrib4f(aa,Ca,T,ra,Q),W.x=Ca,W.y=T,W.z=ra,W.w=Q;ba=q.call(this,ea,a,0);ka=!1;fa=null;ua=0;Ka=!1;gb=Zb=0;Mb=1;ab=0;jb=5126;Ib=Nb=Id=Wa=0;V(ba)?(ka=!0,fa=ga.createStream(34962,ba),jb=fa.dtype):(fa=ga.getBuffer(ba))?jb=fa.dtype:"constant"in ba?(Mb=2,"number"===typeof ba.constant?(Id=ba.constant,Nb=Ib=Wa=0):(Id=0<ba.constant.length?ba.constant[0]:0,Nb=1<ba.constant.length?ba.constant[1]:0,Ib=2<ba.constant.length?ba.constant[2]:0,Wa=3<ba.constant.length?ba.constant[3]:0)):
(fa=V(ba.buffer)?ga.createStream(34962,ba.buffer):ga.getBuffer(ba.buffer),jb="type"in ba?Bd[ba.type]:fa.dtype,Ka=!!ba.normalized,gb=ba.size|0,Zb=ba.offset|0,ab=ba.stride|0,ua=ba.divisor|0);sc=Fa.location;Ob=Ua[sc];if(1===Mb){Ob.buffer||Z.enableVertexAttribArray(sc);kb=gb||1;if(Ob.type!==jb||Ob.size!==kb||Ob.buffer!==fa||Ob.normalized!==Ka||Ob.offset!==Zb||Ob.stride!==ab)Z.bindBuffer(34962,fa.buffer),Z.vertexAttribPointer(sc,kb,jb,Ka,ab,Zb),Ob.type=jb,Ob.size=kb,Ob.buffer=fa,Ob.normalized=Ka,Ob.offset=
Zb,Ob.stride=ab;Ob.divisor!==ua&&(D.vertexAttribDivisorANGLE(sc,ua),Ob.divisor=ua)}else if(Ob.buffer&&(Z.disableVertexAttribArray(sc),Ob.buffer=null),Ob.x!==Id||Ob.y!==Nb||Ob.z!==Ib||Ob.w!==Wa)Z.vertexAttrib4f(sc,Id,Nb,Ib,Wa),Ob.x=Id,Ob.y=Nb,Ob.z=Ib,Ob.w=Wa;Fb=m.call(this,ea,a,0);Cb=!1;yb=null;hb=0;$b=!1;qb=Pb=0;Sa=1;Ub=0;sb=5126;Ja=pb=ib=jc=0;V(Fb)?(Cb=!0,yb=ga.createStream(34962,Fb),sb=yb.dtype):(yb=ga.getBuffer(Fb))?sb=yb.dtype:"constant"in Fb?(Sa=2,"number"===typeof Fb.constant?(ib=Fb.constant,
pb=Ja=jc=0):(ib=0<Fb.constant.length?Fb.constant[0]:0,pb=1<Fb.constant.length?Fb.constant[1]:0,Ja=2<Fb.constant.length?Fb.constant[2]:0,jc=3<Fb.constant.length?Fb.constant[3]:0)):(yb=V(Fb.buffer)?ga.createStream(34962,Fb.buffer):ga.getBuffer(Fb.buffer),sb="type"in Fb?Bd[Fb.type]:yb.dtype,$b=!!Fb.normalized,qb=Fb.size|0,Pb=Fb.offset|0,Ub=Fb.stride|0,hb=Fb.divisor|0);tb=Qa.location;La=Ua[tb];if(1===Sa){La.buffer||Z.enableVertexAttribArray(tb);db=qb||1;if(La.type!==sb||La.size!==db||La.buffer!==yb||
La.normalized!==$b||La.offset!==Pb||La.stride!==Ub)Z.bindBuffer(34962,yb.buffer),Z.vertexAttribPointer(tb,db,sb,$b,Ub,Pb),La.type=sb,La.size=db,La.buffer=yb,La.normalized=$b,La.offset=Pb,La.stride=Ub;La.divisor!==hb&&(D.vertexAttribDivisorANGLE(tb,hb),La.divisor=hb)}else if(La.buffer&&(Z.disableVertexAttribArray(tb),La.buffer=null),La.x!==ib||La.y!==pb||La.z!==Ja||La.w!==jc)Z.vertexAttrib4f(tb,ib,pb,Ja,jc),La.x=ib,La.y=pb,La.z=Ja,La.w=jc;fb=b.call(this,ea,a,0);Na=!1;lb=null;Xa=0;vb=!1;Pa=ub=0;Dc=
1;Va=0;Jb=5126;Za=Gd=Ma=Db=0;V(fb)?(Na=!0,lb=ga.createStream(34962,fb),Jb=lb.dtype):(lb=ga.getBuffer(fb))?Jb=lb.dtype:"constant"in fb?(Dc=2,"number"===typeof fb.constant?(Ma=fb.constant,Gd=Za=Db=0):(Ma=0<fb.constant.length?fb.constant[0]:0,Gd=1<fb.constant.length?fb.constant[1]:0,Za=2<fb.constant.length?fb.constant[2]:0,Db=3<fb.constant.length?fb.constant[3]:0)):(lb=V(fb.buffer)?ga.createStream(34962,fb.buffer):ga.getBuffer(fb.buffer),Jb="type"in fb?Bd[fb.type]:lb.dtype,vb=!!fb.normalized,Pa=fb.size|
0,ub=fb.offset|0,Va=fb.stride|0,Xa=fb.divisor|0);Kb=Hb.location;Lb=Ua[Kb];if(1===Dc){Lb.buffer||Z.enableVertexAttribArray(Kb);mb=Pa||1;if(Lb.type!==Jb||Lb.size!==mb||Lb.buffer!==lb||Lb.normalized!==vb||Lb.offset!==ub||Lb.stride!==Va)Z.bindBuffer(34962,lb.buffer),Z.vertexAttribPointer(Kb,mb,Jb,vb,Va,ub),Lb.type=Jb,Lb.size=mb,Lb.buffer=lb,Lb.normalized=vb,Lb.offset=ub,Lb.stride=Va;Lb.divisor!==Xa&&(D.vertexAttribDivisorANGLE(Kb,Xa),Lb.divisor=Xa)}else if(Lb.buffer&&(Z.disableVertexAttribArray(Kb),Lb.buffer=
null),Lb.x!==Ma||Lb.y!==Gd||Lb.z!==Za||Lb.w!==Db)Z.vertexAttrib4f(Kb,Ma,Gd,Za,Db),Lb.x=Ma,Lb.y=Gd,Lb.z=Za,Lb.w=Db;Oa=f.call(this,ea,a,0);ac=!1;Ra=null;wb=0;xb=!1;nb=Ta=0;gc=1;Bc=0;wc=5126;Ya=Mc=kc=bb=0;V(Oa)?(ac=!0,Ra=ga.createStream(34962,Oa),wc=Ra.dtype):(Ra=ga.getBuffer(Oa))?wc=Ra.dtype:"constant"in Oa?(gc=2,"number"===typeof Oa.constant?(kc=Oa.constant,Mc=Ya=bb=0):(kc=0<Oa.constant.length?Oa.constant[0]:0,Mc=1<Oa.constant.length?Oa.constant[1]:0,Ya=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?
Oa.constant[3]:0)):(Ra=V(Oa.buffer)?ga.createStream(34962,Oa.buffer):ga.getBuffer(Oa.buffer),wc="type"in Oa?Bd[Oa.type]:Ra.dtype,xb=!!Oa.normalized,nb=Oa.size|0,Ta=Oa.offset|0,Bc=Oa.stride|0,wb=Oa.divisor|0);nd=Da.location;Ab=Ua[nd];if(1===gc){Ab.buffer||Z.enableVertexAttribArray(nd);$a=nb||1;if(Ab.type!==wc||Ab.size!==$a||Ab.buffer!==Ra||Ab.normalized!==xb||Ab.offset!==Ta||Ab.stride!==Bc)Z.bindBuffer(34962,Ra.buffer),Z.vertexAttribPointer(nd,$a,wc,xb,Bc,Ta),Ab.type=wc,Ab.size=$a,Ab.buffer=Ra,Ab.normalized=
xb,Ab.offset=Ta,Ab.stride=Bc;Ab.divisor!==wb&&(D.vertexAttribDivisorANGLE(nd,wb),Ab.divisor=wb)}else if(Ab.buffer&&(Z.disableVertexAttribArray(nd),Ab.buffer=null),Ab.x!==kc||Ab.y!==Mc||Ab.z!==Ya||Ab.w!==bb)Z.vertexAttrib4f(nd,kc,Mc,Ya,bb),Ab.x=kc,Ab.y=Mc,Ab.z=Ya,Ab.w=bb;Wb=c.call(this,ea,a,0);uc=!1;Xb=null;Qb=0;Nc=!1;Od=Rb=0;Fc=1;sd=0;Qc=5126;xc=oc=vd=Yc=0;V(Wb)?(uc=!0,Xb=ga.createStream(34962,Wb),Qc=Xb.dtype):(Xb=ga.getBuffer(Wb))?Qc=Xb.dtype:"constant"in Wb?(Fc=2,"number"===typeof Wb.constant?(vd=
Wb.constant,oc=xc=Yc=0):(vd=0<Wb.constant.length?Wb.constant[0]:0,oc=1<Wb.constant.length?Wb.constant[1]:0,xc=2<Wb.constant.length?Wb.constant[2]:0,Yc=3<Wb.constant.length?Wb.constant[3]:0)):(Xb=V(Wb.buffer)?ga.createStream(34962,Wb.buffer):ga.getBuffer(Wb.buffer),Qc="type"in Wb?Bd[Wb.type]:Xb.dtype,Nc=!!Wb.normalized,Od=Wb.size|0,Rb=Wb.offset|0,sd=Wb.stride|0,Qb=Wb.divisor|0);hc=na.location;cb=Ua[hc];if(1===Fc){cb.buffer||Z.enableVertexAttribArray(hc);tc=Od||1;if(cb.type!==Qc||cb.size!==tc||cb.buffer!==
Xb||cb.normalized!==Nc||cb.offset!==Rb||cb.stride!==sd)Z.bindBuffer(34962,Xb.buffer),Z.vertexAttribPointer(hc,tc,Qc,Nc,sd,Rb),cb.type=Qc,cb.size=tc,cb.buffer=Xb,cb.normalized=Nc,cb.offset=Rb,cb.stride=sd;cb.divisor!==Qb&&(D.vertexAttribDivisorANGLE(hc,Qb),cb.divisor=Qb)}else if(cb.buffer&&(Z.disableVertexAttribArray(hc),cb.buffer=null),cb.x!==vd||cb.y!==oc||cb.z!==xc||cb.w!==Yc)Z.vertexAttrib4f(hc,vd,oc,xc,Yc),cb.x=vd,cb.y=oc,cb.z=xc,cb.w=Yc;Tb=h.call(this,ea,a,0);Yb=!1;ec=null;ic=0;zc=!1;dd=Cc=0;
Tc=1;Uc=0;Vc=5126;$c=ed=od=Zc=0;V(Tb)?(Yb=!0,ec=ga.createStream(34962,Tb),Vc=ec.dtype):(ec=ga.getBuffer(Tb))?Vc=ec.dtype:"constant"in Tb?(Tc=2,"number"===typeof Tb.constant?(od=Tb.constant,ed=$c=Zc=0):(od=0<Tb.constant.length?Tb.constant[0]:0,ed=1<Tb.constant.length?Tb.constant[1]:0,$c=2<Tb.constant.length?Tb.constant[2]:0,Zc=3<Tb.constant.length?Tb.constant[3]:0)):(ec=V(Tb.buffer)?ga.createStream(34962,Tb.buffer):ga.getBuffer(Tb.buffer),Vc="type"in Tb?Bd[Tb.type]:ec.dtype,zc=!!Tb.normalized,dd=Tb.size|
0,Cc=Tb.offset|0,Uc=Tb.stride|0,ic=Tb.divisor|0);lc=J.location;dc=Ua[lc];if(1===Tc){dc.buffer||Z.enableVertexAttribArray(lc);ad=dd||4;if(dc.type!==Vc||dc.size!==ad||dc.buffer!==ec||dc.normalized!==zc||dc.offset!==Cc||dc.stride!==Uc)Z.bindBuffer(34962,ec.buffer),Z.vertexAttribPointer(lc,ad,Vc,zc,Uc,Cc),dc.type=Vc,dc.size=ad,dc.buffer=ec,dc.normalized=zc,dc.offset=Cc,dc.stride=Uc;dc.divisor!==ic&&(D.vertexAttribDivisorANGLE(lc,ic),dc.divisor=ic)}else if(dc.buffer&&(Z.disableVertexAttribArray(lc),dc.buffer=
null),dc.x!==od||dc.y!==ed||dc.z!==$c||dc.w!==Zc)Z.vertexAttrib4f(lc,od,ed,$c,Zc),dc.x=od,dc.y=ed,dc.z=$c,dc.w=Zc;Xc=C.call(this,ea,a,0);fd=!1;Ac=null;jd=0;Dd=!1;xd=ze=0;kd=1;Fe=0;Td=5126;Nd=Ud=ee=he=0;V(Xc)?(fd=!0,Ac=ga.createStream(34962,Xc),Td=Ac.dtype):(Ac=ga.getBuffer(Xc))?Td=Ac.dtype:"constant"in Xc?(kd=2,"number"===typeof Xc.constant?(ee=Xc.constant,Ud=Nd=he=0):(ee=0<Xc.constant.length?Xc.constant[0]:0,Ud=1<Xc.constant.length?Xc.constant[1]:0,Nd=2<Xc.constant.length?Xc.constant[2]:0,he=3<Xc.constant.length?
Xc.constant[3]:0)):(Ac=V(Xc.buffer)?ga.createStream(34962,Xc.buffer):ga.getBuffer(Xc.buffer),Td="type"in Xc?Bd[Xc.type]:Ac.dtype,Dd=!!Xc.normalized,xd=Xc.size|0,ze=Xc.offset|0,Fe=Xc.stride|0,jd=Xc.divisor|0);Kd=qa.location;qd=Ua[Kd];if(1===kd){qd.buffer||Z.enableVertexAttribArray(Kd);Wc=xd||4;if(qd.type!==Td||qd.size!==Wc||qd.buffer!==Ac||qd.normalized!==Dd||qd.offset!==ze||qd.stride!==Fe)Z.bindBuffer(34962,Ac.buffer),Z.vertexAttribPointer(Kd,Wc,Td,Dd,Fe,ze),qd.type=Td,qd.size=Wc,qd.buffer=Ac,qd.normalized=
Dd,qd.offset=ze,qd.stride=Fe;qd.divisor!==jd&&(D.vertexAttribDivisorANGLE(Kd,jd),qd.divisor=jd)}else if(qd.buffer&&(Z.disableVertexAttribArray(Kd),qd.buffer=null),qd.x!==ee||qd.y!==Ud||qd.z!==Nd||qd.w!==he)Z.vertexAttrib4f(Kd,ee,Ud,Nd,he),qd.x=ee,qd.y=Ud,qd.z=Nd,qd.w=he;wd=y.call(this,ea,a,0);ud=!1;ld=null;yd=0;Fd=!1;ke=Hd=0;ne=1;ue=0;oe=5126;fe=ve=ie=le=0;V(wd)?(ud=!0,ld=ga.createStream(34962,wd),oe=ld.dtype):(ld=ga.getBuffer(wd))?oe=ld.dtype:"constant"in wd?(ne=2,"number"===typeof wd.constant?(ie=
wd.constant,ve=fe=le=0):(ie=0<wd.constant.length?wd.constant[0]:0,ve=1<wd.constant.length?wd.constant[1]:0,fe=2<wd.constant.length?wd.constant[2]:0,le=3<wd.constant.length?wd.constant[3]:0)):(ld=V(wd.buffer)?ga.createStream(34962,wd.buffer):ga.getBuffer(wd.buffer),oe="type"in wd?Bd[wd.type]:ld.dtype,Fd=!!wd.normalized,ke=wd.size|0,Hd=wd.offset|0,ue=wd.stride|0,yd=wd.divisor|0);pe=da.location;Rc=Ua[pe];if(1===ne){Rc.buffer||Z.enableVertexAttribArray(pe);id=ke||1;if(Rc.type!==oe||Rc.size!==id||Rc.buffer!==
ld||Rc.normalized!==Fd||Rc.offset!==Hd||Rc.stride!==ue)Z.bindBuffer(34962,ld.buffer),Z.vertexAttribPointer(pe,id,oe,Fd,ue,Hd),Rc.type=oe,Rc.size=id,Rc.buffer=ld,Rc.normalized=Fd,Rc.offset=Hd,Rc.stride=ue;Rc.divisor!==yd&&(D.vertexAttribDivisorANGLE(pe,yd),Rc.divisor=yd)}else if(Rc.buffer&&(Z.disableVertexAttribArray(pe),Rc.buffer=null),Rc.x!==ie||Rc.y!==ve||Rc.z!==fe||Rc.w!==le)Z.vertexAttrib4f(pe,ie,ve,fe,le),Rc.x=ie,Rc.y=ve,Rc.z=fe,Rc.w=le;Z.uniform1i(K.location,!1);Z.uniform1f(Aa.location,ea.pixelRatio);
we=e.call(this,ea,a,0);Z.uniform2f(la.location,we[0],we[1]);se=a.scale;Z.uniform2f(xa.location,se[0],se[1]);Qd=a.scaleFract;Z.uniform2f(ca.location,Qd[0],Qd[1]);Vd=a.translate;Z.uniform2f(ja.location,Vd[0],Vd[1]);Wd=a.translateFract;Z.uniform2f(oa.location,Wd[0],Wd[1]);Z.uniform1f(U.location,a.opacity);Z.uniform1i(ha.location,k.bind());Xd=a.elements;qe=null;(qe=(Ce=V(Xd))?Ea.createStream(Xd):Ea.getElements(Xd))&&Z.bindBuffer(34963,qe.buffer.buffer);Ge=a.offset;if(te=a.count)Ve=wa.instances,0<Ve?qe?
D.drawElementsInstancedANGLE(0,te,qe.type,Ge<<(qe.type-5121>>1),Ve):D.drawArraysInstancedANGLE(0,Ge,te,Ve):0>Ve&&(qe?Z.drawElements(0,te,qe.type,Ge<<(qe.type-5121>>1)):Z.drawArrays(0,Ge,te)),sa.dirty=!0,za.setVAO(null),ea.viewportWidth=A,ea.viewportHeight=x,E&&(d.cpuTime+=performance.now()-r),Ha&&ga.destroyStream(H),ka&&ga.destroyStream(fa),Cb&&ga.destroyStream(yb),Na&&ga.destroyStream(lb),ac&&ga.destroyStream(Ra),uc&&ga.destroyStream(Xb),Yb&&ga.destroyStream(ec),fd&&ga.destroyStream(Ac),ud&&ga.destroyStream(ld),
k.unbind(),Ce&&Ea.destroyStream(qe)},scope:function(c,e,b){var a,k,h,f,m,u,y,l,C,q,P,N,J,O,Fa,K,M,U,S,ca,Z,L,Hb,R,ia,Qa,Q,X,za,da,ha,xa,qa,T,Y,W,ja,ba,Ua,oa,Da,Ba,fa,na,la,Aa,va,Gb,ua,Ia,Ga,eb,rb,Sb,bc,Sa,cc,sb,Kc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Sd,Va,Jb,Db,Ma,Ad,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,Pd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,$d,Fc,De,Qc,Yc,je,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,re,ye,xd,kd,Ae,Td,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,yd,Fd,
Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Rc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;a=c.viewport;k=a.x|0;h=a.y|0;f="width"in a?a.width|0:ea.framebufferWidth-k;
m="height"in a?a.height|0:ea.framebufferHeight-h;u=ea.viewportWidth;ea.viewportWidth=f;y=ea.viewportHeight;ea.viewportHeight=m;l=Gd[0];Gd[0]=k;C=Gd[1];Gd[1]=h;q=Gd[2];Gd[2]=f;P=Gd[3];Gd[3]=m;N=Ca[0];Ca[0]=0;J=Ca[1];Ca[1]=0;O=Ca[2];Ca[2]=0;Fa=Ca[3];Ca[3]=1;K=ya.blend_enable;ya.blend_enable=!0;M=Ka[0];Ka[0]=770;U=Ka[1];Ka[1]=771;S=Ka[2];Ka[2]=773;ca=Ka[3];Ka[3]=1;Z=ya.depth_enable;ya.depth_enable=!1;L=c.viewport;Hb=L.x|0;R=L.y|0;ia="width"in L?L.width|0:ea.framebufferWidth-Hb;Qa="height"in L?L.height|
0:ea.framebufferHeight-R;Q=Id[0];Id[0]=Hb;X=Id[1];Id[1]=R;za=Id[2];Id[2]=ia;da=Id[3];Id[3]=Qa;ha=ya.scissor_enable;ya.scissor_enable=!0;xa=ya.stencil_enable;ya.stencil_enable=!1;if(qa=sa.profile)T=performance.now(),d.count++;Y=c.elements;W=null;W=(ja=V(Y))?Ea.createStream(Y):Ea.getElements(Y);ba=wa.elements;wa.elements=W;Ua=c.offset;oa=wa.offset;wa.offset=Ua;Da=c.count;Ba=wa.count;wa.count=Da;fa=wa.primitive;wa.primitive=0;na=pa[45];pa[45]=!1;la=c.markerTexture;Aa=pa[48];pa[48]=la;va=c.opacity;Gb=
pa[10];pa[10]=va;ua=g.call(this,ea,c,b);Ia=pa[46];pa[46]=ua;Ga=pa[47];pa[47]=n;eb=ea.pixelRatio;rb=pa[34];pa[34]=eb;Sb=c.scale;bc=pa[6];pa[6]=Sb;Sa=c.scaleFract;cc=pa[7];pa[7]=Sa;sb=c.translate;Kc=pa[8];pa[8]=sb;ib=c.translateFract;pb=pa[9];pa[9]=ib;Ja=p.call(this,ea,c,b);tb=!1;La=null;db=0;fb=!1;lb=Na=0;Xa=1;vb=0;ub=5126;Jb=Va=Sd=Pa=0;V(Ja)?(tb=!0,La=ga.createStream(34962,Ja),ub=La.dtype):(La=ga.getBuffer(Ja))?ub=La.dtype:"constant"in Ja?(Xa=2,"number"===typeof Ja.constant?(Sd=Ja.constant,Va=Jb=
Pa=0):(Sd=0<Ja.constant.length?Ja.constant[0]:0,Va=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=V(Ja.buffer)?ga.createStream(34962,Ja.buffer):ga.getBuffer(Ja.buffer),ub="type"in Ja?Bd[Ja.type]:La.dtype,fb=!!Ja.normalized,lb=Ja.size|0,Na=Ja.offset|0,vb=Ja.stride|0,db=Ja.divisor|0);Db=w.buffer;w.buffer=La;Ma=w.divisor;w.divisor=db;Ad=w.normalized;w.normalized=fb;Za=w.offset;w.offset=Na;Kb=w.size;w.size=lb;Lb=w.state;w.state=
Xa;mb=w.stride;w.stride=vb;Oa=w.type;w.type=ub;ac=w.w;w.w=Pa;Ra=w.x;w.x=Sd;wb=w.y;w.y=Va;xb=w.z;w.z=Jb;Ta=z.call(this,ea,c,b);nb=!1;gc=null;Bc=0;wc=!1;kc=bb=0;Mc=1;Ya=0;Pd=5126;uc=Wb=$a=Ab=0;V(Ta)?(nb=!0,gc=ga.createStream(34962,Ta),Pd=gc.dtype):(gc=ga.getBuffer(Ta))?Pd=gc.dtype:"constant"in Ta?(Mc=2,"number"===typeof Ta.constant?($a=Ta.constant,Wb=uc=Ab=0):($a=0<Ta.constant.length?Ta.constant[0]:0,Wb=1<Ta.constant.length?Ta.constant[1]:0,uc=2<Ta.constant.length?Ta.constant[2]:0,Ab=3<Ta.constant.length?
Ta.constant[3]:0)):(gc=V(Ta.buffer)?ga.createStream(34962,Ta.buffer):ga.getBuffer(Ta.buffer),Pd="type"in Ta?Bd[Ta.type]:gc.dtype,wc=!!Ta.normalized,kc=Ta.size|0,bb=Ta.offset|0,Ya=Ta.stride|0,Bc=Ta.divisor|0);Xb=A.buffer;A.buffer=gc;Qb=A.divisor;A.divisor=Bc;Nc=A.normalized;A.normalized=wc;Rb=A.offset;A.offset=bb;$d=A.size;A.size=kc;Fc=A.state;A.state=Mc;De=A.stride;A.stride=Ya;Qc=A.type;A.type=Pd;Yc=A.w;A.w=Ab;je=A.x;A.x=$a;oc=A.y;A.y=Wb;xc=A.z;A.z=uc;hc=ma.call(this,ea,c,b);cb=!1;tc=null;Tb=0;Yb=
!1;ic=ec=0;zc=1;Cc=0;dd=5126;Zc=Vc=Uc=Tc=0;V(hc)?(cb=!0,tc=ga.createStream(34962,hc),dd=tc.dtype):(tc=ga.getBuffer(hc))?dd=tc.dtype:"constant"in hc?(zc=2,"number"===typeof hc.constant?(Uc=hc.constant,Vc=Zc=Tc=0):(Uc=0<hc.constant.length?hc.constant[0]:0,Vc=1<hc.constant.length?hc.constant[1]:0,Zc=2<hc.constant.length?hc.constant[2]:0,Tc=3<hc.constant.length?hc.constant[3]:0)):(tc=V(hc.buffer)?ga.createStream(34962,hc.buffer):ga.getBuffer(hc.buffer),dd="type"in hc?Bd[hc.type]:tc.dtype,Yb=!!hc.normalized,
ic=hc.size|0,ec=hc.offset|0,Cc=hc.stride|0,Tb=hc.divisor|0);od=x.buffer;x.buffer=tc;ed=x.divisor;x.divisor=Tb;$c=x.normalized;x.normalized=Yb;lc=x.offset;x.offset=ec;dc=x.size;x.size=ic;ad=x.state;x.state=zc;Xc=x.stride;x.stride=Cc;fd=x.type;x.type=dd;Ac=x.w;x.w=Tc;jd=x.x;x.x=Uc;re=x.y;x.y=Vc;ye=x.z;x.z=Zc;xd=v.call(this,ea,c,b);kd=!1;Ae=null;Td=0;he=!1;Ud=ee=0;Nd=1;Kd=0;qd=5126;ld=ud=wd=Wc=0;V(xd)?(kd=!0,Ae=ga.createStream(34962,xd),qd=Ae.dtype):(Ae=ga.getBuffer(xd))?qd=Ae.dtype:"constant"in xd?
(Nd=2,"number"===typeof xd.constant?(wd=xd.constant,ud=ld=Wc=0):(wd=0<xd.constant.length?xd.constant[0]:0,ud=1<xd.constant.length?xd.constant[1]:0,ld=2<xd.constant.length?xd.constant[2]:0,Wc=3<xd.constant.length?xd.constant[3]:0)):(Ae=V(xd.buffer)?ga.createStream(34962,xd.buffer):ga.getBuffer(xd.buffer),qd="type"in xd?Bd[xd.type]:Ae.dtype,he=!!xd.normalized,Ud=xd.size|0,ee=xd.offset|0,Kd=xd.stride|0,Td=xd.divisor|0);yd=r.buffer;r.buffer=Ae;Fd=r.divisor;r.divisor=Td;Hd=r.normalized;r.normalized=he;
ke=r.offset;r.offset=ee;ne=r.size;r.size=Ud;ue=r.state;r.state=Nd;oe=r.stride;r.stride=Kd;le=r.type;r.type=qd;ie=r.w;r.w=Wc;ve=r.x;r.x=wd;fe=r.y;r.y=ud;pe=r.z;r.z=ld;Rc=I.call(this,ea,c,b);id=!1;we=null;se=0;Qd=!1;Wd=Vd=0;Xd=1;qe=0;Ce=5126;We=Ve=te=Ge=0;V(Rc)?(id=!0,we=ga.createStream(34962,Rc),Ce=we.dtype):(we=ga.getBuffer(Rc))?Ce=we.dtype:"constant"in Rc?(Xd=2,"number"===typeof Rc.constant?(te=Rc.constant,Ve=We=Ge=0):(te=0<Rc.constant.length?Rc.constant[0]:0,Ve=1<Rc.constant.length?Rc.constant[1]:
0,We=2<Rc.constant.length?Rc.constant[2]:0,Ge=3<Rc.constant.length?Rc.constant[3]:0)):(we=V(Rc.buffer)?ga.createStream(34962,Rc.buffer):ga.getBuffer(Rc.buffer),Ce="type"in Rc?Bd[Rc.type]:we.dtype,Qd=!!Rc.normalized,Wd=Rc.size|0,Vd=Rc.offset|0,qe=Rc.stride|0,se=Rc.divisor|0);Re=ra.buffer;ra.buffer=we;xe=ra.divisor;ra.divisor=se;Je=ra.normalized;ra.normalized=Qd;Le=ra.offset;ra.offset=Vd;Me=ra.size;ra.size=Wd;Ne=ra.state;ra.state=Xd;Ke=ra.stride;ra.stride=qe;Rd=ra.type;ra.type=Ce;ae=ra.w;ra.w=Ge;de=
ra.x;ra.x=te;ge=ra.y;ra.y=Ve;Oe=ra.z;ra.z=We;Ld=E.call(this,ea,c,b);Yd=!1;He=null;Pe=0;df=!1;Xe=cf=0;Se=1;bf=0;af=5126;ce=Zd=Ze=Ye=0;V(Ld)?(Yd=!0,He=ga.createStream(34962,Ld),af=He.dtype):(He=ga.getBuffer(Ld))?af=He.dtype:"constant"in Ld?(Se=2,"number"===typeof Ld.constant?(Ze=Ld.constant,Zd=ce=Ye=0):(Ze=0<Ld.constant.length?Ld.constant[0]:0,Zd=1<Ld.constant.length?Ld.constant[1]:0,ce=2<Ld.constant.length?Ld.constant[2]:0,Ye=3<Ld.constant.length?Ld.constant[3]:0)):(He=V(Ld.buffer)?ga.createStream(34962,
Ld.buffer):ga.getBuffer(Ld.buffer),af="type"in Ld?Bd[Ld.type]:He.dtype,df=!!Ld.normalized,Xe=Ld.size|0,cf=Ld.offset|0,bf=Ld.stride|0,Pe=Ld.divisor|0);$e=B.buffer;B.buffer=He;kf=B.divisor;B.divisor=Pe;of=B.normalized;B.normalized=df;gf=B.offset;B.offset=cf;lf=B.size;B.size=Xe;mf=B.state;B.state=Se;nf=B.stride;B.stride=bf;sf=B.type;B.type=af;pf=B.w;B.w=Ye;tf=B.x;B.x=Ze;Cf=B.y;B.y=Zd;Df=B.z;B.z=ce;Te=aa.call(this,ea,c,b);Ie=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;V(Te)?(Ie=!0,qf=
ga.createStream(34962,Te),xf=qf.dtype):(qf=ga.getBuffer(Te))?xf=qf.dtype:"constant"in Te?(Ff=2,"number"===typeof Te.constant?(wf=Te.constant,zf=Af=yf=0):(wf=0<Te.constant.length?Te.constant[0]:0,zf=1<Te.constant.length?Te.constant[1]:0,Af=2<Te.constant.length?Te.constant[2]:0,yf=3<Te.constant.length?Te.constant[3]:0)):(qf=V(Te.buffer)?ga.createStream(34962,Te.buffer):ga.getBuffer(Te.buffer),xf="type"in Te?Bd[Te.type]:qf.dtype,Ef=!!Te.normalized,Bf=Te.size|0,Hf=Te.offset|0,Gf=Te.stride|0,rf=Te.divisor|
0);Jf=H.buffer;H.buffer=qf;Kf=H.divisor;H.divisor=rf;Lf=H.normalized;H.normalized=Ef;Mf=H.offset;H.offset=Hf;uf=H.size;H.size=Bf;Rf=H.state;H.state=Ff;If=H.stride;H.stride=Gf;vf=H.type;H.type=xf;dg=H.w;H.w=yf;Sf=H.x;H.x=wf;Tf=H.y;H.y=zf;qg=H.z;H.z=Af;hf=F.call(this,ea,c,b);ef=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;V(hf)?(ef=!0,Nf=ga.createStream(34962,hf),Wf=Nf.dtype):(Nf=ga.getBuffer(hf))?Wf=Nf.dtype:"constant"in hf?(hg=2,"number"===typeof hf.constant?(Xf=hf.constant,Yf=Zf=
Uf=0):(Xf=0<hf.constant.length?hf.constant[0]:0,Yf=1<hf.constant.length?hf.constant[1]:0,Zf=2<hf.constant.length?hf.constant[2]:0,Uf=3<hf.constant.length?hf.constant[3]:0)):(Nf=V(hf.buffer)?ga.createStream(34962,hf.buffer):ga.getBuffer(hf.buffer),Wf="type"in hf?Bd[hf.type]:Nf.dtype,eg=!!hf.normalized,gg=hf.size|0,fg=hf.offset|0,ig=hf.stride|0,Of=hf.divisor|0);jg=D.buffer;D.buffer=Nf;rg=D.divisor;D.divisor=Of;sg=D.normalized;D.normalized=eg;tg=D.offset;D.offset=fg;ug=D.size;D.size=gg;vg=D.state;D.state=
hg;wg=D.stride;D.stride=ig;xg=D.type;D.type=Wf;yg=D.w;D.w=Uf;zg=D.x;D.x=Xf;Ag=D.y;D.y=Yf;Bg=D.z;D.z=Zf;jf=G.call(this,ea,c,b);ff=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;V(jf)?(ff=!0,Pf=ga.createStream(34962,jf),$f=Pf.dtype):(Pf=ga.getBuffer(jf))?$f=Pf.dtype:"constant"in jf?(ng=2,"number"===typeof jf.constant?(ag=jf.constant,bg=cg=Vf=0):(ag=0<jf.constant.length?jf.constant[0]:0,bg=1<jf.constant.length?jf.constant[1]:0,cg=2<jf.constant.length?jf.constant[2]:0,Vf=3<jf.constant.length?
jf.constant[3]:0)):(Pf=V(jf.buffer)?ga.createStream(34962,jf.buffer):ga.getBuffer(jf.buffer),$f="type"in jf?Bd[jf.type]:Pf.dtype,kg=!!jf.normalized,mg=jf.size|0,lg=jf.offset|0,og=jf.stride|0,Qf=jf.divisor|0);pg=t.buffer;t.buffer=Pf;Cg=t.divisor;t.divisor=Qf;Dg=t.normalized;t.normalized=kg;Eg=t.offset;t.offset=lg;Fg=t.size;t.size=mg;Gg=t.state;t.state=ng;Hg=t.stride;t.stride=og;Ig=t.type;t.type=$f;Jg=t.w;t.w=Vf;Kg=t.x;t.x=ag;Lg=t.y;t.y=bg;Mg=t.z;t.z=cg;Ng=Ha.vert;Ha.vert=59;Og=Ha.frag;Ha.frag=58;sa.dirty=
!0;e(ea,c,b);ea.viewportWidth=u;ea.viewportHeight=y;Gd[0]=l;Gd[1]=C;Gd[2]=q;Gd[3]=P;Ca[0]=N;Ca[1]=J;Ca[2]=O;Ca[3]=Fa;ya.blend_enable=K;Ka[0]=M;Ka[1]=U;Ka[2]=S;Ka[3]=ca;ya.depth_enable=Z;Id[0]=Q;Id[1]=X;Id[2]=za;Id[3]=da;ya.scissor_enable=ha;ya.stencil_enable=xa;qa&&(d.cpuTime+=performance.now()-T);ja&&Ea.destroyStream(W);wa.elements=ba;wa.offset=oa;wa.count=Ba;wa.primitive=fa;pa[45]=na;pa[48]=Aa;pa[10]=Gb;pa[46]=Ia;pa[47]=Ga;pa[34]=rb;pa[6]=bc;pa[7]=cc;pa[8]=Kc;pa[9]=pb;tb&&ga.destroyStream(La);w.buffer=
Db;w.divisor=Ma;w.normalized=Ad;w.offset=Za;w.size=Kb;w.state=Lb;w.stride=mb;w.type=Oa;w.w=ac;w.x=Ra;w.y=wb;w.z=xb;nb&&ga.destroyStream(gc);A.buffer=Xb;A.divisor=Qb;A.normalized=Nc;A.offset=Rb;A.size=$d;A.state=Fc;A.stride=De;A.type=Qc;A.w=Yc;A.x=je;A.y=oc;A.z=xc;cb&&ga.destroyStream(tc);x.buffer=od;x.divisor=ed;x.normalized=$c;x.offset=lc;x.size=dc;x.state=ad;x.stride=Xc;x.type=fd;x.w=Ac;x.x=jd;x.y=re;x.z=ye;kd&&ga.destroyStream(Ae);r.buffer=yd;r.divisor=Fd;r.normalized=Hd;r.offset=ke;r.size=ne;
r.state=ue;r.stride=oe;r.type=le;r.w=ie;r.x=ve;r.y=fe;r.z=pe;id&&ga.destroyStream(we);ra.buffer=Re;ra.divisor=xe;ra.normalized=Je;ra.offset=Le;ra.size=Me;ra.state=Ne;ra.stride=Ke;ra.type=Rd;ra.w=ae;ra.x=de;ra.y=ge;ra.z=Oe;Yd&&ga.destroyStream(He);B.buffer=$e;B.divisor=kf;B.normalized=of;B.offset=gf;B.size=lf;B.state=mf;B.stride=nf;B.type=sf;B.w=pf;B.x=tf;B.y=Cf;B.z=Df;Ie&&ga.destroyStream(qf);H.buffer=Jf;H.divisor=Kf;H.normalized=Lf;H.offset=Mf;H.size=uf;H.state=Rf;H.stride=If;H.type=vf;H.w=dg;H.x=
Sf;H.y=Tf;H.z=qg;ef&&ga.destroyStream(Nf);D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;ff&&ga.destroyStream(Pf);t.buffer=pg;t.divisor=Cg;t.normalized=Dg;t.offset=Eg;t.size=Fg;t.state=Gg;t.stride=Hg;t.type=Ig;t.w=Jg;t.x=Kg;t.y=Lg;t.z=Mg;Ha.vert=Ng;Ha.frag=Og;sa.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,
d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,r,I,ra,E,B,aa,H,F,D,G,t,ba,L,fa,ua,T,W){var S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca,ia,X;S=a.attributes;O=a.buffer;M=a.context;N=a.current;Q=a.draw;R=a.elements;qa=a.extensions;na=a.framebuffer;J=a.gl;K=a.isBufferArgs;da=a.next;U=a.shader;la=a.uniforms;ha=a.vao;Aa=da.blend_color;xa=N.blend_color;ca=da.blend_equation;Da=N.blend_equation;ja=da.blend_func;oa=N.blend_func;Ba=da.colorMask;Qa=
N.colorMask;Fa=da.depth_range;Hb=N.depth_range;Ua=da.polygonOffset_offset;ga=N.polygonOffset_offset;ea=da.sample_coverage;sa=N.sample_coverage;wa=da.scissor_box;Ea=N.scissor_box;rb=da.stencil_func;Gb=N.stencil_func;Z=da.stencil_opBack;V=N.stencil_opBack;ya=da.stencil_opFront;Ha=N.stencil_opFront;pa=da.viewport;za=N.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ia={offset:4,stride:8};X={offset:0,stride:8};return{batch:function(c,e){var b,
a,k,h,f,g,n,p,m,u,y,l,C;b=na.next;b!==na.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):J.bindFramebuffer(36160,null),na.cur=b);if(N.dirty){var q,P,U,pa,ja,la,Aa,Cd,Be,Qe,Ue,Jd,Ee,me,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc;q=da.dither;q!==N.dither&&(q?J.enable(3024):J.disable(3024),N.dither=q);P=ca[0];U=ca[1];if(P!==Da[0]||U!==Da[1])J.blendEquationSeparate(P,U),Da[0]=P,Da[1]=U;pa=da.depth_func;pa!==N.depth_func&&(J.depthFunc(pa),N.depth_func=pa);ja=Fa[0];la=Fa[1];
if(ja!==Hb[0]||la!==Hb[1])J.depthRange(ja,la),Hb[0]=ja,Hb[1]=la;Aa=da.depth_mask;Aa!==N.depth_mask&&(J.depthMask(Aa),N.depth_mask=Aa);Cd=Ba[0];Be=Ba[1];Qe=Ba[2];Ue=Ba[3];if(Cd!==Qa[0]||Be!==Qa[1]||Qe!==Qa[2]||Ue!==Qa[3])J.colorMask(Cd,Be,Qe,Ue),Qa[0]=Cd,Qa[1]=Be,Qa[2]=Qe,Qa[3]=Ue;Jd=da.cull_enable;Jd!==N.cull_enable&&(Jd?J.enable(2884):J.disable(2884),N.cull_enable=Jd);Ee=da.cull_face;Ee!==N.cull_face&&(J.cullFace(Ee),N.cull_face=Ee);me=da.frontFace;me!==N.frontFace&&(J.frontFace(me),N.frontFace=
me);be=da.lineWidth;be!==N.lineWidth&&(J.lineWidth(be),N.lineWidth=be);Md=da.polygonOffset_enable;Md!==N.polygonOffset_enable&&(Md?J.enable(32823):J.disable(32823),N.polygonOffset_enable=Md);Ed=Ua[0];pd=Ua[1];if(Ed!==ga[0]||pd!==ga[1])J.polygonOffset(Ed,pd),ga[0]=Ed,ga[1]=pd;bd=da.sample_alpha;bd!==N.sample_alpha&&(bd?J.enable(32926):J.disable(32926),N.sample_alpha=bd);td=da.sample_enable;td!==N.sample_enable&&(td?J.enable(32928):J.disable(32928),N.sample_enable=td);Oc=ea[0];rd=ea[1];if(Oc!==sa[0]||
rd!==sa[1])J.sampleCoverage(Oc,rd),sa[0]=Oc,sa[1]=rd;Gc=da.stencil_mask;Gc!==N.stencil_mask&&(J.stencilMask(Gc),N.stencil_mask=Gc);gd=rb[0];Sc=rb[1];md=rb[2];if(gd!==Gb[0]||Sc!==Gb[1]||md!==Gb[2])J.stencilFunc(gd,Sc,md),Gb[0]=gd,Gb[1]=Sc,Gb[2]=md;Vb=ya[0];Eb=ya[1];vc=ya[2];zb=ya[3];if(Vb!==Ha[0]||Eb!==Ha[1]||vc!==Ha[2]||zb!==Ha[3])J.stencilOpSeparate(Vb,Eb,vc,zb),Ha[0]=Vb,Ha[1]=Eb,Ha[2]=vc,Ha[3]=zb;yc=Z[0];Bb=Z[1];Lc=Z[2];mc=Z[3];if(yc!==V[0]||Bb!==V[1]||Lc!==V[2]||mc!==V[3])J.stencilOpSeparate(yc,
Bb,Lc,mc),V[0]=yc,V[1]=Bb,V[2]=Lc,V[3]=mc;Hc=da.scissor_enable;Hc!==N.scissor_enable&&(Hc?J.enable(3089):J.disable(3089),N.scissor_enable=Hc);hd=wa[0];cd=wa[1];Ec=wa[2];fc=wa[3];if(hd!==Ea[0]||cd!==Ea[1]||Ec!==Ea[2]||fc!==Ea[3])J.scissor(hd,cd,Ec,fc),Ea[0]=hd,Ea[1]=cd,Ea[2]=Ec,Ea[3]=fc}a=this.viewport;k=a.x|0;h=a.y|0;f="width"in a?a.width|0:M.framebufferWidth-k;g="height"in a?a.height|0:M.framebufferHeight-h;n=M.viewportWidth;M.viewportWidth=f;p=M.viewportHeight;M.viewportHeight=g;J.viewport(k,h,
f,g);za[0]=k;za[1]=h;za[2]=f;za[3]=g;J.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;J.enable(3042);N.blend_enable=!0;J.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;J.disable(2929);N.depth_enable=!1;J.disable(2960);N.stencil_enable=!1;if(m=N.profile)u=performance.now(),d.count+=e;J.useProgram(w.program);y=qa.angle_instanced_arrays;var Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,
Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb;ha.setVAO(null);X.buffer=this.sizeBuffer;Ic=!1;pc=null;rc=0;nc=!1;ob=qc=0;Pc=1;Zb=0;gb=5126;Wa=jb=ab=Mb=0;K(X)?(Ic=!0,pc=O.createStream(34962,X),gb=pc.dtype):(pc=O.getBuffer(X))?gb=pc.dtype:"constant"in X?(Pc=2,"number"===typeof X.constant?(ab=X.constant,jb=Wa=Mb=0):(ab=0<X.constant.length?X.constant[0]:0,jb=1<X.constant.length?X.constant[1]:0,Wa=2<X.constant.length?X.constant[2]:0,Mb=3<X.constant.length?X.constant[3]:
0)):(pc=K(X.buffer)?O.createStream(34962,X.buffer):O.getBuffer(X.buffer),gb="type"in X?Ca[X.type]:pc.dtype,nc=!!X.normalized,ob=X.size|0,qc=X.offset|0,Zb=X.stride|0,rc=X.divisor|0);Jc=W.location;Nb=S[Jc];if(1===Pc){Nb.buffer||J.enableVertexAttribArray(Jc);Ib=ob||1;if(Nb.type!==gb||Nb.size!==Ib||Nb.buffer!==pc||Nb.normalized!==nc||Nb.offset!==qc||Nb.stride!==Zb)J.bindBuffer(34962,pc.buffer),J.vertexAttribPointer(Jc,Ib,gb,nc,Zb,qc),Nb.type=gb,Nb.size=Ib,Nb.buffer=pc,Nb.normalized=nc,Nb.offset=qc,Nb.stride=
Zb;Nb.divisor!==rc&&(y.vertexAttribDivisorANGLE(Jc,rc),Nb.divisor=rc)}else if(Nb.buffer&&(J.disableVertexAttribArray(Jc),Nb.buffer=null),Nb.x!==ab||Nb.y!==jb||Nb.z!==Wa||Nb.w!==Mb)J.vertexAttrib4f(Jc,ab,jb,Wa,Mb),Nb.x=ab,Nb.y=jb,Nb.z=Wa,Nb.w=Mb;ia.buffer=this.sizeBuffer;sc=!1;Ob=null;kb=0;Fb=!1;yb=Cb=0;hb=1;$b=0;Pb=5126;sb=Ub=Sa=qb=0;K(ia)?(sc=!0,Ob=O.createStream(34962,ia),Pb=Ob.dtype):(Ob=O.getBuffer(ia))?Pb=Ob.dtype:"constant"in ia?(hb=2,"number"===typeof ia.constant?(Sa=ia.constant,Ub=sb=qb=0):
(Sa=0<ia.constant.length?ia.constant[0]:0,Ub=1<ia.constant.length?ia.constant[1]:0,sb=2<ia.constant.length?ia.constant[2]:0,qb=3<ia.constant.length?ia.constant[3]:0)):(Ob=K(ia.buffer)?O.createStream(34962,ia.buffer):O.getBuffer(ia.buffer),Pb="type"in ia?Ca[ia.type]:Ob.dtype,Fb=!!ia.normalized,yb=ia.size|0,Cb=ia.offset|0,$b=ia.stride|0,kb=ia.divisor|0);jc=H.location;ib=S[jc];if(1===hb){ib.buffer||J.enableVertexAttribArray(jc);pb=yb||1;if(ib.type!==Pb||ib.size!==pb||ib.buffer!==Ob||ib.normalized!==
Fb||ib.offset!==Cb||ib.stride!==$b)J.bindBuffer(34962,Ob.buffer),J.vertexAttribPointer(jc,pb,Pb,Fb,$b,Cb),ib.type=Pb,ib.size=pb,ib.buffer=Ob,ib.normalized=Fb,ib.offset=Cb,ib.stride=$b;ib.divisor!==kb&&(y.vertexAttribDivisorANGLE(jc,kb),ib.divisor=kb)}else if(ib.buffer&&(J.disableVertexAttribArray(jc),ib.buffer=null),ib.x!==Sa||ib.y!==Ub||ib.z!==sb||ib.w!==qb)J.vertexAttrib4f(jc,Sa,Ub,sb,qb),ib.x=Sa,ib.y=Ub,ib.z=sb,ib.w=qb;Ja=this.charBuffer;tb=!1;La=null;db=0;fb=!1;lb=Na=0;Xa=1;vb=0;ub=5126;Jb=Va=
Dc=Pa=0;K(Ja)?(tb=!0,La=O.createStream(34962,Ja),ub=La.dtype):(La=O.getBuffer(Ja))?ub=La.dtype:"constant"in Ja?(Xa=2,"number"===typeof Ja.constant?(Dc=Ja.constant,Va=Jb=Pa=0):(Dc=0<Ja.constant.length?Ja.constant[0]:0,Va=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=K(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),ub="type"in Ja?Ca[Ja.type]:La.dtype,fb=!!Ja.normalized,lb=Ja.size|0,Na=Ja.offset|0,vb=Ja.stride|
0,db=Ja.divisor|0);Db=aa.location;Ma=S[Db];if(1===Xa){Ma.buffer||J.enableVertexAttribArray(Db);zd=lb||1;if(Ma.type!==ub||Ma.size!==zd||Ma.buffer!==La||Ma.normalized!==fb||Ma.offset!==Na||Ma.stride!==vb)J.bindBuffer(34962,La.buffer),J.vertexAttribPointer(Db,zd,ub,fb,vb,Na),Ma.type=ub,Ma.size=zd,Ma.buffer=La,Ma.normalized=fb,Ma.offset=Na,Ma.stride=vb;Ma.divisor!==db&&(y.vertexAttribDivisorANGLE(Db,db),Ma.divisor=db)}else if(Ma.buffer&&(J.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Dc||Ma.y!==
Va||Ma.z!==Jb||Ma.w!==Pa)J.vertexAttrib4f(Db,Dc,Va,Jb,Pa),Ma.x=Dc,Ma.y=Va,Ma.z=Jb,Ma.w=Pa;Za=this.position;Kb=!1;Lb=null;mb=0;Oa=!1;Ra=ac=0;wb=1;xb=0;Ta=5126;wc=Bc=gc=nb=0;K(Za)?(Kb=!0,Lb=O.createStream(34962,Za),Ta=Lb.dtype):(Lb=O.getBuffer(Za))?Ta=Lb.dtype:"constant"in Za?(wb=2,"number"===typeof Za.constant?(gc=Za.constant,Bc=wc=nb=0):(gc=0<Za.constant.length?Za.constant[0]:0,Bc=1<Za.constant.length?Za.constant[1]:0,wc=2<Za.constant.length?Za.constant[2]:0,nb=3<Za.constant.length?Za.constant[3]:
0)):(Lb=K(Za.buffer)?O.createStream(34962,Za.buffer):O.getBuffer(Za.buffer),Ta="type"in Za?Ca[Za.type]:Lb.dtype,Oa=!!Za.normalized,Ra=Za.size|0,ac=Za.offset|0,xb=Za.stride|0,mb=Za.divisor|0);bb=ba.location;kc=S[bb];if(1===wb){kc.buffer||J.enableVertexAttribArray(bb);Mc=Ra||2;if(kc.type!==Ta||kc.size!==Mc||kc.buffer!==Lb||kc.normalized!==Oa||kc.offset!==ac||kc.stride!==xb)J.bindBuffer(34962,Lb.buffer),J.vertexAttribPointer(bb,Mc,Ta,Oa,xb,ac),kc.type=Ta,kc.size=Mc,kc.buffer=Lb,kc.normalized=Oa,kc.offset=
ac,kc.stride=xb;kc.divisor!==mb&&(y.vertexAttribDivisorANGLE(bb,mb),kc.divisor=mb)}else if(kc.buffer&&(J.disableVertexAttribArray(bb),kc.buffer=null),kc.x!==gc||kc.y!==Bc||kc.z!==wc||kc.w!==nb)J.vertexAttrib4f(bb,gc,Bc,wc,nb),kc.x=gc,kc.y=Bc,kc.z=wc,kc.w=nb;Ya=this.viewportArray;J.uniform4f(T.location,Ya[0],Ya[1],Ya[2],Ya[3]);nd=this.scale;J.uniform2f(fa.location,nd[0],nd[1]);Ab=this.translate;J.uniform2f(ua.location,Ab[0],Ab[1]);($a=Q.elements)?J.bindBuffer(34963,$a.buffer.buffer):ha.currentVAO&&
($a=R.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,$a.buffer.buffer);Wb=Q.instances;for(l=0;l<e;++l){C=c[l];var uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd;uc=z.call(this,M,C,l);l&&Xb===uc||(Xb=uc,J.uniform1f(F.location,uc));Qb=A.call(this,M,C,l);l&&Nc===Qb||(Nc=Qb,J.uniform1f(G.location,Qb));Rb=C.align;l&&Od===Rb||(Od=Rb,J.uniform1f(r.location,Rb));Fc=C.baseline;l&&sd===Fc||(sd=Fc,J.uniform1f(B.location,Fc));Qc=C.color;
Yc=Qc[0];oc=Qc[1];hc=Qc[2];tc=Qc[3];l&&vd===Yc&&xc===oc&&cb===hc&&Tb===tc||(vd=Yc,xc=oc,cb=hc,Tb=tc,J.uniform4f(D.location,Yc,oc,hc,tc));Yb=ma.call(this,M,C,l);ec=Yb[0];zc=Yb[1];l&&ic===ec&&Cc===zc||(ic=ec,Cc=zc,J.uniform2f(E.location,ec,zc));dd=x.call(this,M,C,l);Tc=dd[0];Vc=dd[1];l&&Uc===Tc&&Zc===Vc||(Uc=Tc,Zc=Vc,J.uniform2f(ra.location,Tc,Vc));od=C.positionOffset;ed=od[0];lc=od[1];l&&$c===ed&&dc===lc||($c=ed,dc=lc,J.uniform2f(L.location,ed,lc));ad=C.opacity;l&&Xc===ad||(Xc=ad,J.uniform1f(t.location,
ad));(fd=v.call(this,M,C,l))&&"framebuffer"===fd._reglType&&(fd=fd.color[0]);Ac=fd._texture;J.uniform1i(I.location,Ac.bind());jd=C.offset;if(Dd=C.count)0<Wb?$a?y.drawElementsInstancedANGLE(0,Dd,$a.type,jd<<($a.type-5121>>1),Wb):y.drawArraysInstancedANGLE(0,jd,Dd,Wb):0>Wb&&($a?J.drawElements(0,Dd,$a.type,jd<<($a.type-5121>>1)):J.drawArrays(0,jd,Dd)),Ac.unbind()}Ic&&O.destroyStream(pc);sc&&O.destroyStream(Ob);tb&&O.destroyStream(La);Kb&&O.destroyStream(Lb);N.dirty=!0;ha.setVAO(null);M.viewportWidth=
n;M.viewportHeight=p;m&&(d.cpuTime+=performance.now()-u)},draw:function(c){var e,a,k,h,g,n,p,w,z,A,y,v,x,C,ma,U,pa,ja,la,Aa,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb;e=na.next;e!==na.cur&&(e?J.bindFramebuffer(36160,e.framebuffer):J.bindFramebuffer(36160,null),na.cur=e);if(N.dirty){var Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,
Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc;Xa=da.dither;Xa!==N.dither&&(Xa?J.enable(3024):J.disable(3024),N.dither=Xa);vb=ca[0];ub=ca[1];if(vb!==Da[0]||ub!==Da[1])J.blendEquationSeparate(vb,ub),Da[0]=vb,Da[1]=ub;Pa=da.depth_func;Pa!==N.depth_func&&(J.depthFunc(Pa),N.depth_func=Pa);Dc=Fa[0];Va=Fa[1];if(Dc!==Hb[0]||Va!==Hb[1])J.depthRange(Dc,Va),Hb[0]=Dc,Hb[1]=Va;Jb=da.depth_mask;Jb!==N.depth_mask&&(J.depthMask(Jb),N.depth_mask=Jb);Db=Ba[0];Ma=Ba[1];zd=Ba[2];Za=Ba[3];
if(Db!==Qa[0]||Ma!==Qa[1]||zd!==Qa[2]||Za!==Qa[3])J.colorMask(Db,Ma,zd,Za),Qa[0]=Db,Qa[1]=Ma,Qa[2]=zd,Qa[3]=Za;Kb=da.cull_enable;Kb!==N.cull_enable&&(Kb?J.enable(2884):J.disable(2884),N.cull_enable=Kb);Lb=da.cull_face;Lb!==N.cull_face&&(J.cullFace(Lb),N.cull_face=Lb);mb=da.frontFace;mb!==N.frontFace&&(J.frontFace(mb),N.frontFace=mb);Oa=da.lineWidth;Oa!==N.lineWidth&&(J.lineWidth(Oa),N.lineWidth=Oa);ac=da.polygonOffset_enable;ac!==N.polygonOffset_enable&&(ac?J.enable(32823):J.disable(32823),N.polygonOffset_enable=
ac);Ra=Ua[0];wb=Ua[1];if(Ra!==ga[0]||wb!==ga[1])J.polygonOffset(Ra,wb),ga[0]=Ra,ga[1]=wb;xb=da.sample_alpha;xb!==N.sample_alpha&&(xb?J.enable(32926):J.disable(32926),N.sample_alpha=xb);Ta=da.sample_enable;Ta!==N.sample_enable&&(Ta?J.enable(32928):J.disable(32928),N.sample_enable=Ta);nb=ea[0];gc=ea[1];if(nb!==sa[0]||gc!==sa[1])J.sampleCoverage(nb,gc),sa[0]=nb,sa[1]=gc;Bc=da.stencil_mask;Bc!==N.stencil_mask&&(J.stencilMask(Bc),N.stencil_mask=Bc);wc=rb[0];bb=rb[1];kc=rb[2];if(wc!==Gb[0]||bb!==Gb[1]||
kc!==Gb[2])J.stencilFunc(wc,bb,kc),Gb[0]=wc,Gb[1]=bb,Gb[2]=kc;Mc=ya[0];Ya=ya[1];nd=ya[2];Ab=ya[3];if(Mc!==Ha[0]||Ya!==Ha[1]||nd!==Ha[2]||Ab!==Ha[3])J.stencilOpSeparate(Mc,Ya,nd,Ab),Ha[0]=Mc,Ha[1]=Ya,Ha[2]=nd,Ha[3]=Ab;$a=Z[0];Wb=Z[1];uc=Z[2];Xb=Z[3];if($a!==V[0]||Wb!==V[1]||uc!==V[2]||Xb!==V[3])J.stencilOpSeparate($a,Wb,uc,Xb),V[0]=$a,V[1]=Wb,V[2]=uc,V[3]=Xb;Qb=da.scissor_enable;Qb!==N.scissor_enable&&(Qb?J.enable(3089):J.disable(3089),N.scissor_enable=Qb);Nc=wa[0];Rb=wa[1];Od=wa[2];Fc=wa[3];if(Nc!==
Ea[0]||Rb!==Ea[1]||Od!==Ea[2]||Fc!==Ea[3])J.scissor(Nc,Rb,Od,Fc),Ea[0]=Nc,Ea[1]=Rb,Ea[2]=Od,Ea[3]=Fc}a=this.viewport;k=a.x|0;h=a.y|0;g="width"in a?a.width|0:M.framebufferWidth-k;n="height"in a?a.height|0:M.framebufferHeight-h;p=M.viewportWidth;M.viewportWidth=g;w=M.viewportHeight;M.viewportHeight=n;J.viewport(k,h,g,n);za[0]=k;za[1]=h;za[2]=g;za[3]=n;J.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;J.enable(3042);N.blend_enable=!0;J.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;
oa[3]=1;J.disable(2929);N.depth_enable=!1;J.disable(2960);N.stencil_enable=!1;if(z=N.profile)A=performance.now(),d.count++;J.useProgram(l.program);y=qa.angle_instanced_arrays;ha.setVAO(null);X.buffer=this.sizeBuffer;v=!1;x=null;C=0;ma=!1;pa=U=0;ja=1;la=0;Aa=5126;Qe=Be=Cd=Bd=0;K(X)?(v=!0,x=O.createStream(34962,X),Aa=x.dtype):(x=O.getBuffer(X))?Aa=x.dtype:"constant"in X?(ja=2,"number"===typeof X.constant?(Cd=X.constant,Be=Qe=Bd=0):(Cd=0<X.constant.length?X.constant[0]:0,Be=1<X.constant.length?X.constant[1]:
0,Qe=2<X.constant.length?X.constant[2]:0,Bd=3<X.constant.length?X.constant[3]:0)):(x=K(X.buffer)?O.createStream(34962,X.buffer):O.getBuffer(X.buffer),Aa="type"in X?Ca[X.type]:x.dtype,ma=!!X.normalized,pa=X.size|0,U=X.offset|0,la=X.stride|0,C=X.divisor|0);Ue=W.location;Jd=S[Ue];if(1===ja){Jd.buffer||J.enableVertexAttribArray(Ue);Ee=pa||1;if(Jd.type!==Aa||Jd.size!==Ee||Jd.buffer!==x||Jd.normalized!==ma||Jd.offset!==U||Jd.stride!==la)J.bindBuffer(34962,x.buffer),J.vertexAttribPointer(Ue,Ee,Aa,ma,la,
U),Jd.type=Aa,Jd.size=Ee,Jd.buffer=x,Jd.normalized=ma,Jd.offset=U,Jd.stride=la;Jd.divisor!==C&&(y.vertexAttribDivisorANGLE(Ue,C),Jd.divisor=C)}else if(Jd.buffer&&(J.disableVertexAttribArray(Ue),Jd.buffer=null),Jd.x!==Cd||Jd.y!==Be||Jd.z!==Qe||Jd.w!==Bd)J.vertexAttrib4f(Ue,Cd,Be,Qe,Bd),Jd.x=Cd,Jd.y=Be,Jd.z=Qe,Jd.w=Bd;ia.buffer=this.sizeBuffer;me=!1;be=null;Md=0;Ed=!1;bd=pd=0;td=1;Oc=0;rd=5126;md=Sc=gd=Gc=0;K(ia)?(me=!0,be=O.createStream(34962,ia),rd=be.dtype):(be=O.getBuffer(ia))?rd=be.dtype:"constant"in
ia?(td=2,"number"===typeof ia.constant?(gd=ia.constant,Sc=md=Gc=0):(gd=0<ia.constant.length?ia.constant[0]:0,Sc=1<ia.constant.length?ia.constant[1]:0,md=2<ia.constant.length?ia.constant[2]:0,Gc=3<ia.constant.length?ia.constant[3]:0)):(be=K(ia.buffer)?O.createStream(34962,ia.buffer):O.getBuffer(ia.buffer),rd="type"in ia?Ca[ia.type]:be.dtype,Ed=!!ia.normalized,bd=ia.size|0,pd=ia.offset|0,Oc=ia.stride|0,Md=ia.divisor|0);Vb=H.location;Eb=S[Vb];if(1===td){Eb.buffer||J.enableVertexAttribArray(Vb);vc=bd||
1;if(Eb.type!==rd||Eb.size!==vc||Eb.buffer!==be||Eb.normalized!==Ed||Eb.offset!==pd||Eb.stride!==Oc)J.bindBuffer(34962,be.buffer),J.vertexAttribPointer(Vb,vc,rd,Ed,Oc,pd),Eb.type=rd,Eb.size=vc,Eb.buffer=be,Eb.normalized=Ed,Eb.offset=pd,Eb.stride=Oc;Eb.divisor!==Md&&(y.vertexAttribDivisorANGLE(Vb,Md),Eb.divisor=Md)}else if(Eb.buffer&&(J.disableVertexAttribArray(Vb),Eb.buffer=null),Eb.x!==gd||Eb.y!==Sc||Eb.z!==md||Eb.w!==Gc)J.vertexAttrib4f(Vb,gd,Sc,md,Gc),Eb.x=gd,Eb.y=Sc,Eb.z=md,Eb.w=Gc;zb=this.charBuffer;
yc=!1;Bb=null;Lc=0;mc=!1;hd=Hc=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Ic=0;K(zb)?(yc=!0,Bb=O.createStream(34962,zb),fc=Bb.dtype):(Bb=O.getBuffer(zb))?fc=Bb.dtype:"constant"in zb?(cd=2,"number"===typeof zb.constant?(pc=zb.constant,rc=nc=Ic=0):(pc=0<zb.constant.length?zb.constant[0]:0,rc=1<zb.constant.length?zb.constant[1]:0,nc=2<zb.constant.length?zb.constant[2]:0,Ic=3<zb.constant.length?zb.constant[3]:0)):(Bb=K(zb.buffer)?O.createStream(34962,zb.buffer):O.getBuffer(zb.buffer),fc="type"in zb?Ca[zb.type]:Bb.dtype,
mc=!!zb.normalized,hd=zb.size|0,Hc=zb.offset|0,Ec=zb.stride|0,Lc=zb.divisor|0);qc=aa.location;ob=S[qc];if(1===cd){ob.buffer||J.enableVertexAttribArray(qc);Pc=hd||1;if(ob.type!==fc||ob.size!==Pc||ob.buffer!==Bb||ob.normalized!==mc||ob.offset!==Hc||ob.stride!==Ec)J.bindBuffer(34962,Bb.buffer),J.vertexAttribPointer(qc,Pc,fc,mc,Ec,Hc),ob.type=fc,ob.size=Pc,ob.buffer=Bb,ob.normalized=mc,ob.offset=Hc,ob.stride=Ec;ob.divisor!==Lc&&(y.vertexAttribDivisorANGLE(qc,Lc),ob.divisor=Lc)}else if(ob.buffer&&(J.disableVertexAttribArray(qc),
ob.buffer=null),ob.x!==pc||ob.y!==rc||ob.z!==nc||ob.w!==Ic)J.vertexAttrib4f(qc,pc,rc,nc,Ic),ob.x=pc,ob.y=rc,ob.z=nc,ob.w=Ic;Zb=this.position;gb=!1;Mb=null;ab=0;jb=!1;Jc=Wa=0;Nb=1;Ib=0;sc=5126;Cb=Fb=kb=Ob=0;K(Zb)?(gb=!0,Mb=O.createStream(34962,Zb),sc=Mb.dtype):(Mb=O.getBuffer(Zb))?sc=Mb.dtype:"constant"in Zb?(Nb=2,"number"===typeof Zb.constant?(kb=Zb.constant,Fb=Cb=Ob=0):(kb=0<Zb.constant.length?Zb.constant[0]:0,Fb=1<Zb.constant.length?Zb.constant[1]:0,Cb=2<Zb.constant.length?Zb.constant[2]:0,Ob=3<
Zb.constant.length?Zb.constant[3]:0)):(Mb=K(Zb.buffer)?O.createStream(34962,Zb.buffer):O.getBuffer(Zb.buffer),sc="type"in Zb?Ca[Zb.type]:Mb.dtype,jb=!!Zb.normalized,Jc=Zb.size|0,Wa=Zb.offset|0,Ib=Zb.stride|0,ab=Zb.divisor|0);yb=ba.location;hb=S[yb];if(1===Nb){hb.buffer||J.enableVertexAttribArray(yb);$b=Jc||2;if(hb.type!==sc||hb.size!==$b||hb.buffer!==Mb||hb.normalized!==jb||hb.offset!==Wa||hb.stride!==Ib)J.bindBuffer(34962,Mb.buffer),J.vertexAttribPointer(yb,$b,sc,jb,Ib,Wa),hb.type=sc,hb.size=$b,
hb.buffer=Mb,hb.normalized=jb,hb.offset=Wa,hb.stride=Ib;hb.divisor!==ab&&(y.vertexAttribDivisorANGLE(yb,ab),hb.divisor=ab)}else if(hb.buffer&&(J.disableVertexAttribArray(yb),hb.buffer=null),hb.x!==kb||hb.y!==Fb||hb.z!==Cb||hb.w!==Ob)J.vertexAttrib4f(yb,kb,Fb,Cb,Ob),hb.x=kb,hb.y=Fb,hb.z=Cb,hb.w=Ob;Pb=u.call(this,M,c,0);J.uniform1f(F.location,Pb);qb=q.call(this,M,c,0);J.uniform1f(G.location,qb);J.uniform1f(r.location,c.align);J.uniform1f(B.location,c.baseline);Sa=this.viewportArray;J.uniform4f(T.location,
Sa[0],Sa[1],Sa[2],Sa[3]);Ub=c.color;J.uniform4f(D.location,Ub[0],Ub[1],Ub[2],Ub[3]);sb=m.call(this,M,c,0);J.uniform2f(E.location,sb[0],sb[1]);jc=b.call(this,M,c,0);J.uniform2f(ra.location,jc[0],jc[1]);ib=this.scale;J.uniform2f(fa.location,ib[0],ib[1]);pb=this.translate;J.uniform2f(ua.location,pb[0],pb[1]);Ja=c.positionOffset;J.uniform2f(L.location,Ja[0],Ja[1]);J.uniform1f(t.location,c.opacity);(tb=f.call(this,M,c,0))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);La=tb._texture;J.uniform1i(I.location,
La.bind());(db=Q.elements)?J.bindBuffer(34963,db.buffer.buffer):ha.currentVAO&&(db=R.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,db.buffer.buffer);fb=c.offset;if(Na=c.count)lb=Q.instances,0<lb?db?y.drawElementsInstancedANGLE(0,Na,db.type,fb<<(db.type-5121>>1),lb):y.drawArraysInstancedANGLE(0,fb,Na,lb):0>lb&&(db?J.drawElements(0,Na,db.type,fb<<(db.type-5121>>1)):J.drawArrays(0,fb,Na)),N.dirty=!0,ha.setVAO(null),M.viewportWidth=p,M.viewportHeight=w,z&&(d.cpuTime+=performance.now()-A),v&&
O.destroyStream(x),me&&O.destroyStream(be),yc&&O.destroyStream(Bb),gb&&O.destroyStream(Mb),La.unbind()},scope:function(b,a,f){var t,w,z,m,u,A,x,v,l,q,P,J,ma,ga,B,V,ea,I,r,E,D,sa,Fa,ya,Ha,H,F,S,ca,Z,L,Hb,R,ta,Qa,za,wa,ha,xa,qa,T,W,ra,aa,ba,G,Ua,oa,Da,Ba,fa,ka,na,Ea,Gb,ua,rb,Pc,Zb,gb,Mb,ab,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Qc,Yc,vd,
oc,xc,hc,cb,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd;t=this.viewport;w=t.x|0;z=t.y|0;m="width"in t?t.width|0:M.framebufferWidth-w;u="height"in t?t.height|0:M.framebufferHeight-z;A=M.viewportWidth;M.viewportWidth=m;x=M.viewportHeight;M.viewportHeight=u;v=pa[0];pa[0]=w;l=pa[1];pa[1]=z;q=pa[2];pa[2]=m;P=pa[3];pa[3]=u;J=Aa[0];Aa[0]=0;ma=Aa[1];Aa[1]=0;ga=Aa[2];Aa[2]=0;B=Aa[3];Aa[3]=1;V=da.blend_enable;da.blend_enable=!0;ea=ja[0];ja[0]=770;I=ja[1];ja[1]=771;r=ja[2];ja[2]=773;E=
ja[3];ja[3]=1;D=da.depth_enable;da.depth_enable=!1;sa=da.stencil_enable;da.stencil_enable=!1;if(Fa=N.profile)ya=performance.now(),d.count++;Ha=b.offset;H=Q.offset;Q.offset=Ha;F=b.count;S=Q.count;Q.count=F;ca=Q.primitive;Q.primitive=0;Z=b.align;L=la[64];la[64]=Z;Hb=c.call(this,M,b,f);R=la[69];la[69]=Hb;ta=h.call(this,M,b,f);Qa=la[67];la[67]=ta;za=C.call(this,M,b,f);wa=la[66];la[66]=za;ha=b.baseline;xa=la[65];la[65]=ha;qa=y.call(this,M,b,f);T=la[62];la[62]=qa;W=b.color;ra=la[14];la[14]=W;aa=e.call(this,
M,b,f);ba=la[63];la[63]=aa;G=b.opacity;Ua=la[10];la[10]=G;oa=b.positionOffset;Da=la[68];la[68]=oa;Ba=this.scale;fa=la[6];la[6]=Ba;ka=this.translate;na=la[8];la[8]=ka;Ea=this.viewportArray;Gb=la[3];la[3]=Ea;ua=this.charBuffer;rb=!1;Pc=null;Zb=0;gb=!1;ab=Mb=0;jb=1;Wa=0;Jc=5126;Ob=sc=Ib=Nb=0;K(ua)?(rb=!0,Pc=O.createStream(34962,ua),Jc=Pc.dtype):(Pc=O.getBuffer(ua))?Jc=Pc.dtype:"constant"in ua?(jb=2,"number"===typeof ua.constant?(Ib=ua.constant,sc=Ob=Nb=0):(Ib=0<ua.constant.length?ua.constant[0]:0,sc=
1<ua.constant.length?ua.constant[1]:0,Ob=2<ua.constant.length?ua.constant[2]:0,Nb=3<ua.constant.length?ua.constant[3]:0)):(Pc=K(ua.buffer)?O.createStream(34962,ua.buffer):O.getBuffer(ua.buffer),Jc="type"in ua?Ca[ua.type]:Pc.dtype,gb=!!ua.normalized,ab=ua.size|0,Mb=ua.offset|0,Wa=ua.stride|0,Zb=ua.divisor|0);kb=k.buffer;k.buffer=Pc;Fb=k.divisor;k.divisor=Zb;Cb=k.normalized;k.normalized=gb;yb=k.offset;k.offset=Mb;hb=k.size;k.size=ab;$b=k.state;k.state=jb;Pb=k.stride;k.stride=Wa;qb=k.type;k.type=Jc;
Sa=k.w;k.w=Nb;Ub=k.x;k.x=Ib;sb=k.y;k.y=sc;jc=k.z;k.z=Ob;ia.buffer=this.sizeBuffer;ib=!1;pb=null;Ja=0;tb=!1;db=La=0;fb=1;Na=0;lb=5126;Pa=ub=vb=Xa=0;K(ia)?(ib=!0,pb=O.createStream(34962,ia),lb=pb.dtype):(pb=O.getBuffer(ia))?lb=pb.dtype:"constant"in ia?(fb=2,"number"===typeof ia.constant?(vb=ia.constant,ub=Pa=Xa=0):(vb=0<ia.constant.length?ia.constant[0]:0,ub=1<ia.constant.length?ia.constant[1]:0,Pa=2<ia.constant.length?ia.constant[2]:0,Xa=3<ia.constant.length?ia.constant[3]:0)):(pb=K(ia.buffer)?O.createStream(34962,
ia.buffer):O.getBuffer(ia.buffer),lb="type"in ia?Ca[ia.type]:pb.dtype,tb=!!ia.normalized,db=ia.size|0,La=ia.offset|0,Na=ia.stride|0,Ja=ia.divisor|0);Dc=g.buffer;g.buffer=pb;Va=g.divisor;g.divisor=Ja;Jb=g.normalized;g.normalized=tb;Db=g.offset;g.offset=La;Ma=g.size;g.size=db;zd=g.state;g.state=fb;Za=g.stride;g.stride=Na;Kb=g.type;g.type=lb;Lb=g.w;g.w=Xa;mb=g.x;g.x=vb;Oa=g.y;g.y=ub;ac=g.z;g.z=Pa;Ra=this.position;wb=!1;xb=null;Ta=0;nb=!1;Bc=gc=0;wc=1;bb=0;kc=5126;Ab=nd=Ya=Mc=0;K(Ra)?(wb=!0,xb=O.createStream(34962,
Ra),kc=xb.dtype):(xb=O.getBuffer(Ra))?kc=xb.dtype:"constant"in Ra?(wc=2,"number"===typeof Ra.constant?(Ya=Ra.constant,nd=Ab=Mc=0):(Ya=0<Ra.constant.length?Ra.constant[0]:0,nd=1<Ra.constant.length?Ra.constant[1]:0,Ab=2<Ra.constant.length?Ra.constant[2]:0,Mc=3<Ra.constant.length?Ra.constant[3]:0)):(xb=K(Ra.buffer)?O.createStream(34962,Ra.buffer):O.getBuffer(Ra.buffer),kc="type"in Ra?Ca[Ra.type]:xb.dtype,nb=!!Ra.normalized,Bc=Ra.size|0,gc=Ra.offset|0,bb=Ra.stride|0,Ta=Ra.divisor|0);$a=n.buffer;n.buffer=
xb;Wb=n.divisor;n.divisor=Ta;uc=n.normalized;n.normalized=nb;Xb=n.offset;n.offset=gc;Qb=n.size;n.size=Bc;Nc=n.state;n.state=wc;Rb=n.stride;n.stride=bb;Od=n.type;n.type=kc;Fc=n.w;n.w=Mc;sd=n.x;n.x=Ya;Qc=n.y;n.y=nd;Yc=n.z;n.z=Ab;X.buffer=this.sizeBuffer;vd=!1;oc=null;xc=0;hc=!1;tc=cb=0;Tb=1;Yb=0;ec=5126;dd=Cc=zc=ic=0;K(X)?(vd=!0,oc=O.createStream(34962,X),ec=oc.dtype):(oc=O.getBuffer(X))?ec=oc.dtype:"constant"in X?(Tb=2,"number"===typeof X.constant?(zc=X.constant,Cc=dd=ic=0):(zc=0<X.constant.length?
X.constant[0]:0,Cc=1<X.constant.length?X.constant[1]:0,dd=2<X.constant.length?X.constant[2]:0,ic=3<X.constant.length?X.constant[3]:0)):(oc=K(X.buffer)?O.createStream(34962,X.buffer):O.getBuffer(X.buffer),ec="type"in X?Ca[X.type]:oc.dtype,hc=!!X.normalized,tc=X.size|0,cb=X.offset|0,Yb=X.stride|0,xc=X.divisor|0);Tc=p.buffer;p.buffer=oc;Uc=p.divisor;p.divisor=xc;Vc=p.normalized;p.normalized=hc;Zc=p.offset;p.offset=cb;od=p.size;p.size=tc;ed=p.state;p.state=Tb;$c=p.stride;p.stride=Yb;lc=p.type;p.type=
ec;dc=p.w;p.w=ic;ad=p.x;p.x=zc;Xc=p.y;p.y=Cc;fd=p.z;p.z=dd;Ac=U.vert;U.vert=61;jd=U.frag;U.frag=60;N.dirty=!0;a(M,b,f);M.viewportWidth=A;M.viewportHeight=x;pa[0]=v;pa[1]=l;pa[2]=q;pa[3]=P;Aa[0]=J;Aa[1]=ma;Aa[2]=ga;Aa[3]=B;da.blend_enable=V;ja[0]=ea;ja[1]=I;ja[2]=r;ja[3]=E;da.depth_enable=D;da.stencil_enable=sa;Fa&&(d.cpuTime+=performance.now()-ya);Q.offset=H;Q.count=S;Q.primitive=ca;la[64]=L;la[69]=R;la[67]=Qa;la[66]=wa;la[65]=xa;la[62]=T;la[14]=ra;la[63]=ba;la[10]=Ua;la[68]=Da;la[6]=fa;la[8]=na;
la[3]=Gb;rb&&O.destroyStream(Pc);k.buffer=kb;k.divisor=Fb;k.normalized=Cb;k.offset=yb;k.size=hb;k.state=$b;k.stride=Pb;k.type=qb;k.w=Sa;k.x=Ub;k.y=sb;k.z=jc;ib&&O.destroyStream(pb);g.buffer=Dc;g.divisor=Va;g.normalized=Jb;g.offset=Db;g.size=Ma;g.state=zd;g.stride=Za;g.type=Kb;g.w=Lb;g.x=mb;g.y=Oa;g.z=ac;wb&&O.destroyStream(xb);n.buffer=$a;n.divisor=Wb;n.normalized=uc;n.offset=Xb;n.size=Qb;n.state=Nc;n.stride=Rb;n.type=Od;n.w=Fc;n.x=sd;n.y=Qc;n.z=Yc;vd&&O.destroyStream(oc);p.buffer=Tc;p.divisor=Uc;
p.normalized=Vc;p.offset=Zc;p.size=od;p.state=ed;p.stride=$c;p.type=lc;p.w=dc;p.x=ad;p.y=Xc;p.z=fd;U.vert=Ac;U.frag=jd;N.dirty=!0}}},$2:function(a,d,l){var u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,r,I,ra,E,B,aa,H,F,D,G;u=a.attributes;q=a.current;m=a.framebuffer;b=a.gl;f=a.next;c=a.vao;h=f.blend_color;C=q.blend_color;y=f.blend_equation;e=q.blend_equation;k=f.blend_func;g=q.blend_func;n=f.colorMask;p=q.colorMask;w=f.depth_range;z=q.depth_range;A=f.polygonOffset_offset;ma=q.polygonOffset_offset;x=f.sample_coverage;
v=q.sample_coverage;r=f.scissor_box;I=q.scissor_box;ra=f.stencil_func;E=q.stencil_func;B=f.stencil_opBack;aa=q.stencil_opBack;H=f.stencil_opFront;F=q.stencil_opFront;D=f.viewport;G=q.viewport;return{poll:function(){var c,a,d,u,l,P,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa;q.dirty=!1;a=f.blend_enable;d=f.cull_enable;u=f.depth_enable;l=f.dither;P=f.polygonOffset_enable;W=f.sample_alpha;S=f.sample_enable;O=f.scissor_enable;M=f.stencil_enable;N=f.cull_face;Q=q.cull_face;R=f.depth_func;qa=q.depth_func;na=
f.depth_mask;J=q.depth_mask;K=f.frontFace;da=q.frontFace;U=f.lineWidth;la=q.lineWidth;ha=f.stencil_mask;Aa=q.stencil_mask;c=m.next;c!==m.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),m.cur=c);a!==q.blend_enable&&(a?b.enable(3042):b.disable(3042),q.blend_enable=a);d!==q.cull_enable&&(d?b.enable(2884):b.disable(2884),q.cull_enable=d);u!==q.depth_enable&&(u?b.enable(2929):b.disable(2929),q.depth_enable=u);l!==q.dither&&(l?b.enable(3024):b.disable(3024),q.dither=l);P!==
q.polygonOffset_enable&&(P?b.enable(32823):b.disable(32823),q.polygonOffset_enable=P);W!==q.sample_alpha&&(W?b.enable(32926):b.disable(32926),q.sample_alpha=W);S!==q.sample_enable&&(S?b.enable(32928):b.disable(32928),q.sample_enable=S);O!==q.scissor_enable&&(O?b.enable(3089):b.disable(3089),q.scissor_enable=O);M!==q.stencil_enable&&(M?b.enable(2960):b.disable(2960),q.stencil_enable=M);if(h[0]!==C[0]||h[1]!==C[1]||h[2]!==C[2]||h[3]!==C[3])b.blendColor(h[0],h[1],h[2],h[3]),C[0]=h[0],C[1]=h[1],C[2]=
h[2],C[3]=h[3];if(y[0]!==e[0]||y[1]!==e[1])b.blendEquationSeparate(y[0],y[1]),e[0]=y[0],e[1]=y[1];if(k[0]!==g[0]||k[1]!==g[1]||k[2]!==g[2]||k[3]!==g[3])b.blendFuncSeparate(k[0],k[1],k[2],k[3]),g[0]=k[0],g[1]=k[1],g[2]=k[2],g[3]=k[3];if(n[0]!==p[0]||n[1]!==p[1]||n[2]!==p[2]||n[3]!==p[3])b.colorMask(n[0],n[1],n[2],n[3]),p[0]=n[0],p[1]=n[1],p[2]=n[2],p[3]=n[3];N!==Q&&(b.cullFace(N),q.cull_face=N);R!==qa&&(b.depthFunc(R),q.depth_func=R);na!==J&&(b.depthMask(na),q.depth_mask=na);if(w[0]!==z[0]||w[1]!==
z[1])b.depthRange(w[0],w[1]),z[0]=w[0],z[1]=w[1];K!==da&&(b.frontFace(K),q.frontFace=K);U!==la&&(b.lineWidth(U),q.lineWidth=U);if(A[0]!==ma[0]||A[1]!==ma[1])b.polygonOffset(A[0],A[1]),ma[0]=A[0],ma[1]=A[1];if(x[0]!==v[0]||x[1]!==v[1])b.sampleCoverage(x[0],x[1]),v[0]=x[0],v[1]=x[1];if(r[0]!==I[0]||r[1]!==I[1]||r[2]!==I[2]||r[3]!==I[3])b.scissor(r[0],r[1],r[2],r[3]),I[0]=r[0],I[1]=r[1],I[2]=r[2],I[3]=r[3];if(ra[0]!==E[0]||ra[1]!==E[1]||ra[2]!==E[2])b.stencilFunc(ra[0],ra[1],ra[2]),E[0]=ra[0],E[1]=ra[1],
E[2]=ra[2];ha!==Aa&&(b.stencilMask(ha),q.stencil_mask=ha);if(B[0]!==aa[0]||B[1]!==aa[1]||B[2]!==aa[2]||B[3]!==aa[3])b.stencilOpSeparate(B[0],B[1],B[2],B[3]),aa[0]=B[0],aa[1]=B[1],aa[2]=B[2],aa[3]=B[3];if(H[0]!==F[0]||H[1]!==F[1]||H[2]!==F[2]||H[3]!==F[3])b.stencilOpSeparate(H[0],H[1],H[2],H[3]),F[0]=H[0],F[1]=H[1],F[2]=H[2],F[3]=H[3];if(D[0]!==G[0]||D[1]!==G[1]||D[2]!==G[2]||D[3]!==G[3])b.viewport(D[0],D[1],D[2],D[3]),G[0]=D[0],G[1]=D[1],G[2]=D[2],G[3]=D[3]},refresh:function(){var a,d,l,P,ua,T,W,
S,O,M,N,Q,R,qa,na,J;q.dirty=!1;d=f.blend_enable;l=f.cull_enable;P=f.depth_enable;ua=f.dither;T=f.polygonOffset_enable;W=f.sample_alpha;S=f.sample_enable;O=f.scissor_enable;M=f.stencil_enable;N=f.cull_face;Q=f.depth_func;R=f.depth_mask;qa=f.frontFace;na=f.lineWidth;J=f.stencil_mask;(a=m.next)?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null);m.cur=a;a=u[0];a.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(0,a.size,a.type,a.normalized,
a.stride,a.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=u[1];a.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=u[2];a.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(2),
b.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=u[3];a.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=u[4];a.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(4),b.vertexAttrib4f(4,a.x,a.y,a.z,
a.w),a.buffer=null);a=u[5];a.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=u[6];a.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=u[7];a.buffer?
(b.enableVertexAttribArray(7),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=u[8];a.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=u[9];a.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,
a.buffer.buffer),b.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=u[10];a.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=u[11];a.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(11,
a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=u[12];a.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=u[13];a.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(13,a.size,a.type,a.normalized,
a.stride,a.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=u[14];a.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=u[15];a.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(15),
b.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.currentVAO=null;c.setVAO(c.targetVAO);d?b.enable(3042):b.disable(3042);q.blend_enable=d;l?b.enable(2884):b.disable(2884);q.cull_enable=l;P?b.enable(2929):b.disable(2929);q.depth_enable=P;ua?b.enable(3024):b.disable(3024);q.dither=ua;T?b.enable(32823):b.disable(32823);q.polygonOffset_enable=T;W?b.enable(32926):b.disable(32926);q.sample_alpha=W;S?b.enable(32928):b.disable(32928);q.sample_enable=S;O?b.enable(3089):b.disable(3089);q.scissor_enable=
O;M?b.enable(2960):b.disable(2960);q.stencil_enable=M;b.blendColor(h[0],h[1],h[2],h[3]);C[0]=h[0];C[1]=h[1];C[2]=h[2];C[3]=h[3];b.blendEquationSeparate(y[0],y[1]);e[0]=y[0];e[1]=y[1];b.blendFuncSeparate(k[0],k[1],k[2],k[3]);g[0]=k[0];g[1]=k[1];g[2]=k[2];g[3]=k[3];b.colorMask(n[0],n[1],n[2],n[3]);p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];b.cullFace(N);q.cull_face=N;b.depthFunc(Q);q.depth_func=Q;b.depthMask(R);q.depth_mask=R;b.depthRange(w[0],w[1]);z[0]=w[0];z[1]=w[1];b.frontFace(qa);q.frontFace=qa;b.lineWidth(na);
q.lineWidth=na;b.polygonOffset(A[0],A[1]);ma[0]=A[0];ma[1]=A[1];b.sampleCoverage(x[0],x[1]);v[0]=x[0];v[1]=x[1];b.scissor(r[0],r[1],r[2],r[3]);I[0]=r[0];I[1]=r[1];I[2]=r[2];I[3]=r[3];b.stencilFunc(ra[0],ra[1],ra[2]);E[0]=ra[0];E[1]=ra[1];E[2]=ra[2];b.stencilMask(J);q.stencil_mask=J;b.stencilOpSeparate(B[0],B[1],B[2],B[3]);aa[0]=B[0];aa[1]=B[1];aa[2]=B[2];aa[3]=B[3];b.stencilOpSeparate(H[0],H[1],H[2],H[3]);F[0]=H[0];F[1]=H[1];F[2]=H[2];F[3]=H[3];b.viewport(D[0],D[1],D[2],D[3]);G[0]=D[0];G[1]=D[1];
G[2]=D[2];G[3]=D[3]}}},$7:function(a,d,l,u,q,m,b,f){var c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,r,I,ra,E,B,G,H,F,D,ka,t,ba,L,fa,ua,T,W,S;c=a.context;h=a.current;C=a.framebuffer;y=a.gl;e=a.next;k=a.shader;g=a.vao;n=e.blend_color;p=h.blend_color;w=e.blend_equation;z=h.blend_equation;A=e.blend_func;ma=h.blend_func;x=e.colorMask;v=h.colorMask;r=e.depth_range;I=h.depth_range;ra=e.polygonOffset_offset;E=h.polygonOffset_offset;B=e.sample_coverage;G=h.sample_coverage;H=e.scissor_box;F=h.scissor_box;D=e.stencil_func;
ka=h.stencil_func;t=e.stencil_opBack;ba=h.stencil_opBack;L=e.stencil_opFront;fa=h.stencil_opFront;ua=e.viewport;T=h.viewport;W={};S={};return{draw:function(a){var b,f,H,S,qa,na,J,K,da,U;b=a.framebuffer;f=C.getFramebuffer(b);b&&!f&&d.commandRaise(q,l);b=C.next;C.next=f;H=c.framebufferWidth;c.framebufferWidth=f?f.width:c.drawingBufferWidth;S=c.framebufferHeight;c.framebufferHeight=f?f.height:c.drawingBufferHeight;f!==C.cur&&(f?y.bindFramebuffer(36160,f.framebuffer):y.bindFramebuffer(36160,null),C.cur=
f);if(h.dirty){f=e.dither;f!==h.dither&&(f?y.enable(3024):y.disable(3024),h.dither=f);f=e.blend_enable;f!==h.blend_enable&&(f?y.enable(3042):y.disable(3042),h.blend_enable=f);f=n[0];J=n[1];qa=n[2];na=n[3];if(f!==p[0]||J!==p[1]||qa!==p[2]||na!==p[3])y.blendColor(f,J,qa,na),p[0]=f,p[1]=J,p[2]=qa,p[3]=na;f=w[0];J=w[1];if(f!==z[0]||J!==z[1])y.blendEquationSeparate(f,J),z[0]=f,z[1]=J;f=A[0];J=A[1];qa=A[2];na=A[3];if(f!==ma[0]||J!==ma[1]||qa!==ma[2]||na!==ma[3])y.blendFuncSeparate(f,J,qa,na),ma[0]=f,ma[1]=
J,ma[2]=qa,ma[3]=na;f=e.depth_enable;f!==h.depth_enable&&(f?y.enable(2929):y.disable(2929),h.depth_enable=f);f=e.depth_func;f!==h.depth_func&&(y.depthFunc(f),h.depth_func=f);f=r[0];J=r[1];if(f!==I[0]||J!==I[1])y.depthRange(f,J),I[0]=f,I[1]=J;f=e.depth_mask;f!==h.depth_mask&&(y.depthMask(f),h.depth_mask=f);f=x[0];J=x[1];qa=x[2];na=x[3];if(f!==v[0]||J!==v[1]||qa!==v[2]||na!==v[3])y.colorMask(f,J,qa,na),v[0]=f,v[1]=J,v[2]=qa,v[3]=na;f=e.cull_enable;f!==h.cull_enable&&(f?y.enable(2884):y.disable(2884),
h.cull_enable=f);f=e.cull_face;f!==h.cull_face&&(y.cullFace(f),h.cull_face=f);f=e.frontFace;f!==h.frontFace&&(y.frontFace(f),h.frontFace=f);f=e.lineWidth;f!==h.lineWidth&&(y.lineWidth(f),h.lineWidth=f);f=e.polygonOffset_enable;f!==h.polygonOffset_enable&&(f?y.enable(32823):y.disable(32823),h.polygonOffset_enable=f);f=ra[0];J=ra[1];if(f!==E[0]||J!==E[1])y.polygonOffset(f,J),E[0]=f,E[1]=J;f=e.sample_alpha;f!==h.sample_alpha&&(f?y.enable(32926):y.disable(32926),h.sample_alpha=f);f=e.sample_enable;f!==
h.sample_enable&&(f?y.enable(32928):y.disable(32928),h.sample_enable=f);f=B[0];J=B[1];if(f!==G[0]||J!==G[1])y.sampleCoverage(f,J),G[0]=f,G[1]=J;f=e.stencil_enable;f!==h.stencil_enable&&(f?y.enable(2960):y.disable(2960),h.stencil_enable=f);f=e.stencil_mask;f!==h.stencil_mask&&(y.stencilMask(f),h.stencil_mask=f);f=D[0];J=D[1];qa=D[2];if(f!==ka[0]||J!==ka[1]||qa!==ka[2])y.stencilFunc(f,J,qa),ka[0]=f,ka[1]=J,ka[2]=qa;f=L[0];J=L[1];qa=L[2];na=L[3];if(f!==fa[0]||J!==fa[1]||qa!==fa[2]||na!==fa[3])y.stencilOpSeparate(f,
J,qa,na),fa[0]=f,fa[1]=J,fa[2]=qa,fa[3]=na;f=t[0];J=t[1];qa=t[2];na=t[3];if(f!==ba[0]||J!==ba[1]||qa!==ba[2]||na!==ba[3])y.stencilOpSeparate(f,J,qa,na),ba[0]=f,ba[1]=J,ba[2]=qa,ba[3]=na;f=e.scissor_enable;f!==h.scissor_enable&&(f?y.enable(3089):y.disable(3089),h.scissor_enable=f)}qa=c.framebufferWidth;na=c.framebufferHeight;f=c.viewportWidth;c.viewportWidth=qa;J=c.viewportHeight;c.viewportHeight=na;y.viewport(0,0,qa,na);T[0]=0;T[1]=0;T[2]=qa;T[3]=na;qa=c.framebufferWidth;na=c.framebufferHeight;y.scissor(0,
0,qa,na);F[0]=0;F[1]=0;F[2]=qa;F[3]=na;if(qa=h.profile)K=performance.now(),u.count++;na=k.program(k.vert,k.frag,l);y.useProgram(na.program);g.setVAO(null);da=na.id;(U=W[da])||(U=W[da]=m(na));U.call(this,a);h.dirty=!0;g.setVAO(null);C.next=b;c.framebufferWidth=H;c.framebufferHeight=S;c.viewportWidth=f;c.viewportHeight=J;qa&&(u.cpuTime+=performance.now()-K)},scope:function(a,e,k){var f,g,n,p,w,z,m,t,A,x,y,v,q,ma,B;f=a.framebuffer;g=C.getFramebuffer(f);f&&!g&&d.commandRaise(b,l);f=C.next;C.next=g;n=
c.framebufferWidth;c.framebufferWidth=g?g.width:c.drawingBufferWidth;p=c.framebufferHeight;c.framebufferHeight=g?g.height:c.drawingBufferHeight;w=c.framebufferWidth;z=c.framebufferHeight;g=c.viewportWidth;c.viewportWidth=w;m=c.viewportHeight;c.viewportHeight=z;t=ua[0];ua[0]=0;A=ua[1];ua[1]=0;x=ua[2];ua[2]=w;w=ua[3];ua[3]=z;y=c.framebufferWidth;v=c.framebufferHeight;z=H[0];H[0]=0;q=H[1];H[1]=0;ma=H[2];H[2]=y;y=H[3];H[3]=v;if(v=h.profile)B=performance.now(),u.count++;h.dirty=!0;e(c,a,k);C.next=f;c.framebufferWidth=
n;c.framebufferHeight=p;c.viewportWidth=g;c.viewportHeight=m;ua[0]=t;ua[1]=A;ua[2]=x;ua[3]=w;H[0]=z;H[1]=q;H[2]=ma;H[3]=y;v&&(u.cpuTime+=performance.now()-B);h.dirty=!0},batch:function(c,a){var b,d,m,C,q;if(h.dirty){b=e.dither;b!==h.dither&&(b?y.enable(3024):y.disable(3024),h.dither=b);b=e.blend_enable;b!==h.blend_enable&&(b?y.enable(3042):y.disable(3042),h.blend_enable=b);b=n[0];m=n[1];C=n[2];q=n[3];if(b!==p[0]||m!==p[1]||C!==p[2]||q!==p[3])y.blendColor(b,m,C,q),p[0]=b,p[1]=m,p[2]=C,p[3]=q;b=w[0];
m=w[1];if(b!==z[0]||m!==z[1])y.blendEquationSeparate(b,m),z[0]=b,z[1]=m;b=A[0];m=A[1];C=A[2];q=A[3];if(b!==ma[0]||m!==ma[1]||C!==ma[2]||q!==ma[3])y.blendFuncSeparate(b,m,C,q),ma[0]=b,ma[1]=m,ma[2]=C,ma[3]=q;b=e.depth_enable;b!==h.depth_enable&&(b?y.enable(2929):y.disable(2929),h.depth_enable=b);b=e.depth_func;b!==h.depth_func&&(y.depthFunc(b),h.depth_func=b);b=r[0];m=r[1];if(b!==I[0]||m!==I[1])y.depthRange(b,m),I[0]=b,I[1]=m;b=e.depth_mask;b!==h.depth_mask&&(y.depthMask(b),h.depth_mask=b);b=x[0];
m=x[1];C=x[2];q=x[3];if(b!==v[0]||m!==v[1]||C!==v[2]||q!==v[3])y.colorMask(b,m,C,q),v[0]=b,v[1]=m,v[2]=C,v[3]=q;b=e.cull_enable;b!==h.cull_enable&&(b?y.enable(2884):y.disable(2884),h.cull_enable=b);b=e.cull_face;b!==h.cull_face&&(y.cullFace(b),h.cull_face=b);b=e.frontFace;b!==h.frontFace&&(y.frontFace(b),h.frontFace=b);b=e.lineWidth;b!==h.lineWidth&&(y.lineWidth(b),h.lineWidth=b);b=e.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?y.enable(32823):y.disable(32823),h.polygonOffset_enable=b);b=ra[0];
m=ra[1];if(b!==E[0]||m!==E[1])y.polygonOffset(b,m),E[0]=b,E[1]=m;b=e.sample_alpha;b!==h.sample_alpha&&(b?y.enable(32926):y.disable(32926),h.sample_alpha=b);b=e.sample_enable;b!==h.sample_enable&&(b?y.enable(32928):y.disable(32928),h.sample_enable=b);b=B[0];m=B[1];if(b!==G[0]||m!==G[1])y.sampleCoverage(b,m),G[0]=b,G[1]=m;b=e.stencil_enable;b!==h.stencil_enable&&(b?y.enable(2960):y.disable(2960),h.stencil_enable=b);b=e.stencil_mask;b!==h.stencil_mask&&(y.stencilMask(b),h.stencil_mask=b);b=D[0];m=D[1];
C=D[2];if(b!==ka[0]||m!==ka[1]||C!==ka[2])y.stencilFunc(b,m,C),ka[0]=b,ka[1]=m,ka[2]=C;b=L[0];m=L[1];C=L[2];q=L[3];if(b!==fa[0]||m!==fa[1]||C!==fa[2]||q!==fa[3])y.stencilOpSeparate(b,m,C,q),fa[0]=b,fa[1]=m,fa[2]=C,fa[3]=q;b=t[0];m=t[1];C=t[2];q=t[3];if(b!==ba[0]||m!==ba[1]||C!==ba[2]||q!==ba[3])y.stencilOpSeparate(b,m,C,q),ba[0]=b,ba[1]=m,ba[2]=C,ba[3]=q;b=e.scissor_enable;b!==h.scissor_enable&&(b?y.enable(3089):y.disable(3089),h.scissor_enable=b)}if(b=h.profile)d=performance.now(),u.count+=a;m=k.program(k.vert,
k.frag,l);y.useProgram(m.program);g.setVAO(null);C=m.id;(q=S[C])||(q=S[C]=f(m));q.call(this,c,a);h.dirty=!0;g.setVAO(null);b&&(u.cpuTime+=performance.now()-d)}}},$5:function(a,d,l,u,q,m){var b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,r,I,G,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T;b=a.context;f=a.current;c=a.framebuffer;h=a.gl;C=a.next;y=a.shader;e=a.vao;k=C.blend_color;g=f.blend_color;n=C.blend_equation;p=f.blend_equation;w=C.blend_func;z=f.blend_func;A=C.colorMask;ma=f.colorMask;x=C.depth_range;v=f.depth_range;r=
C.polygonOffset_offset;I=f.polygonOffset_offset;G=C.sample_coverage;E=f.sample_coverage;B=C.scissor_box;aa=f.scissor_box;H=C.stencil_func;F=f.stencil_func;D=C.stencil_opBack;ka=f.stencil_opBack;t=C.stencil_opFront;ba=f.stencil_opFront;L=C.viewport;fa=f.viewport;ua={};T={};return{draw:function(b){var a,d,m,N,Q;a=c.next;a!==c.cur&&(a?h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null),c.cur=a);if(f.dirty){a=C.dither;a!==f.dither&&(a?h.enable(3024):h.disable(3024),f.dither=a);a=C.blend_enable;
a!==f.blend_enable&&(a?h.enable(3042):h.disable(3042),f.blend_enable=a);a=k[0];m=k[1];N=k[2];Q=k[3];if(a!==g[0]||m!==g[1]||N!==g[2]||Q!==g[3])h.blendColor(a,m,N,Q),g[0]=a,g[1]=m,g[2]=N,g[3]=Q;a=n[0];m=n[1];if(a!==p[0]||m!==p[1])h.blendEquationSeparate(a,m),p[0]=a,p[1]=m;a=w[0];m=w[1];N=w[2];Q=w[3];if(a!==z[0]||m!==z[1]||N!==z[2]||Q!==z[3])h.blendFuncSeparate(a,m,N,Q),z[0]=a,z[1]=m,z[2]=N,z[3]=Q;a=C.depth_enable;a!==f.depth_enable&&(a?h.enable(2929):h.disable(2929),f.depth_enable=a);a=C.depth_func;
a!==f.depth_func&&(h.depthFunc(a),f.depth_func=a);a=x[0];m=x[1];if(a!==v[0]||m!==v[1])h.depthRange(a,m),v[0]=a,v[1]=m;a=C.depth_mask;a!==f.depth_mask&&(h.depthMask(a),f.depth_mask=a);a=A[0];m=A[1];N=A[2];Q=A[3];if(a!==ma[0]||m!==ma[1]||N!==ma[2]||Q!==ma[3])h.colorMask(a,m,N,Q),ma[0]=a,ma[1]=m,ma[2]=N,ma[3]=Q;a=C.cull_enable;a!==f.cull_enable&&(a?h.enable(2884):h.disable(2884),f.cull_enable=a);a=C.cull_face;a!==f.cull_face&&(h.cullFace(a),f.cull_face=a);a=C.frontFace;a!==f.frontFace&&(h.frontFace(a),
f.frontFace=a);a=C.lineWidth;a!==f.lineWidth&&(h.lineWidth(a),f.lineWidth=a);a=C.polygonOffset_enable;a!==f.polygonOffset_enable&&(a?h.enable(32823):h.disable(32823),f.polygonOffset_enable=a);a=r[0];m=r[1];if(a!==I[0]||m!==I[1])h.polygonOffset(a,m),I[0]=a,I[1]=m;a=C.sample_alpha;a!==f.sample_alpha&&(a?h.enable(32926):h.disable(32926),f.sample_alpha=a);a=C.sample_enable;a!==f.sample_enable&&(a?h.enable(32928):h.disable(32928),f.sample_enable=a);a=G[0];m=G[1];if(a!==E[0]||m!==E[1])h.sampleCoverage(a,
m),E[0]=a,E[1]=m;a=C.stencil_enable;a!==f.stencil_enable&&(a?h.enable(2960):h.disable(2960),f.stencil_enable=a);a=C.stencil_mask;a!==f.stencil_mask&&(h.stencilMask(a),f.stencil_mask=a);a=H[0];m=H[1];N=H[2];if(a!==F[0]||m!==F[1]||N!==F[2])h.stencilFunc(a,m,N),F[0]=a,F[1]=m,F[2]=N;a=t[0];m=t[1];N=t[2];Q=t[3];if(a!==ba[0]||m!==ba[1]||N!==ba[2]||Q!==ba[3])h.stencilOpSeparate(a,m,N,Q),ba[0]=a,ba[1]=m,ba[2]=N,ba[3]=Q;a=D[0];m=D[1];N=D[2];Q=D[3];if(a!==ka[0]||m!==ka[1]||N!==ka[2]||Q!==ka[3])h.stencilOpSeparate(a,
m,N,Q),ka[0]=a,ka[1]=m,ka[2]=N,ka[3]=Q;a=C.scissor_enable;a!==f.scissor_enable&&(a?h.enable(3089):h.disable(3089),f.scissor_enable=a);a=B[0];m=B[1];N=B[2];Q=B[3];if(a!==aa[0]||m!==aa[1]||N!==aa[2]||Q!==aa[3])h.scissor(a,m,N,Q),aa[0]=a,aa[1]=m,aa[2]=N,aa[3]=Q;a=L[0];m=L[1];N=L[2];Q=L[3];if(a!==fa[0]||m!==fa[1]||N!==fa[2]||Q!==fa[3])h.viewport(a,m,N,Q),fa[0]=a,fa[1]=m,fa[2]=N,fa[3]=Q;f.dirty=!1}if(a=f.profile)d=performance.now(),u.count++;m=y.program(y.vert,y.frag,l);h.useProgram(m.program);e.setVAO(null);
N=m.id;(Q=ua[N])||(Q=ua[N]=q(m));Q.call(this,b);e.setVAO(null);a&&(u.cpuTime+=performance.now()-d)},scope:function(c,a,e){var k,d;if(k=f.profile)d=performance.now(),u.count++;a(b,c,e);k&&(u.cpuTime+=performance.now()-d)},batch:function(a,b){var d,q,N,Q,R;d=c.next;d!==c.cur&&(d?h.bindFramebuffer(36160,d.framebuffer):h.bindFramebuffer(36160,null),c.cur=d);if(f.dirty){d=C.dither;d!==f.dither&&(d?h.enable(3024):h.disable(3024),f.dither=d);d=C.blend_enable;d!==f.blend_enable&&(d?h.enable(3042):h.disable(3042),
f.blend_enable=d);d=k[0];N=k[1];Q=k[2];R=k[3];if(d!==g[0]||N!==g[1]||Q!==g[2]||R!==g[3])h.blendColor(d,N,Q,R),g[0]=d,g[1]=N,g[2]=Q,g[3]=R;d=n[0];N=n[1];if(d!==p[0]||N!==p[1])h.blendEquationSeparate(d,N),p[0]=d,p[1]=N;d=w[0];N=w[1];Q=w[2];R=w[3];if(d!==z[0]||N!==z[1]||Q!==z[2]||R!==z[3])h.blendFuncSeparate(d,N,Q,R),z[0]=d,z[1]=N,z[2]=Q,z[3]=R;d=C.depth_enable;d!==f.depth_enable&&(d?h.enable(2929):h.disable(2929),f.depth_enable=d);d=C.depth_func;d!==f.depth_func&&(h.depthFunc(d),f.depth_func=d);d=x[0];
N=x[1];if(d!==v[0]||N!==v[1])h.depthRange(d,N),v[0]=d,v[1]=N;d=C.depth_mask;d!==f.depth_mask&&(h.depthMask(d),f.depth_mask=d);d=A[0];N=A[1];Q=A[2];R=A[3];if(d!==ma[0]||N!==ma[1]||Q!==ma[2]||R!==ma[3])h.colorMask(d,N,Q,R),ma[0]=d,ma[1]=N,ma[2]=Q,ma[3]=R;d=C.cull_enable;d!==f.cull_enable&&(d?h.enable(2884):h.disable(2884),f.cull_enable=d);d=C.cull_face;d!==f.cull_face&&(h.cullFace(d),f.cull_face=d);d=C.frontFace;d!==f.frontFace&&(h.frontFace(d),f.frontFace=d);d=C.lineWidth;d!==f.lineWidth&&(h.lineWidth(d),
f.lineWidth=d);d=C.polygonOffset_enable;d!==f.polygonOffset_enable&&(d?h.enable(32823):h.disable(32823),f.polygonOffset_enable=d);d=r[0];N=r[1];if(d!==I[0]||N!==I[1])h.polygonOffset(d,N),I[0]=d,I[1]=N;d=C.sample_alpha;d!==f.sample_alpha&&(d?h.enable(32926):h.disable(32926),f.sample_alpha=d);d=C.sample_enable;d!==f.sample_enable&&(d?h.enable(32928):h.disable(32928),f.sample_enable=d);d=G[0];N=G[1];if(d!==E[0]||N!==E[1])h.sampleCoverage(d,N),E[0]=d,E[1]=N;d=C.stencil_enable;d!==f.stencil_enable&&(d?
h.enable(2960):h.disable(2960),f.stencil_enable=d);d=C.stencil_mask;d!==f.stencil_mask&&(h.stencilMask(d),f.stencil_mask=d);d=H[0];N=H[1];Q=H[2];if(d!==F[0]||N!==F[1]||Q!==F[2])h.stencilFunc(d,N,Q),F[0]=d,F[1]=N,F[2]=Q;d=t[0];N=t[1];Q=t[2];R=t[3];if(d!==ba[0]||N!==ba[1]||Q!==ba[2]||R!==ba[3])h.stencilOpSeparate(d,N,Q,R),ba[0]=d,ba[1]=N,ba[2]=Q,ba[3]=R;d=D[0];N=D[1];Q=D[2];R=D[3];if(d!==ka[0]||N!==ka[1]||Q!==ka[2]||R!==ka[3])h.stencilOpSeparate(d,N,Q,R),ka[0]=d,ka[1]=N,ka[2]=Q,ka[3]=R;d=C.scissor_enable;
d!==f.scissor_enable&&(d?h.enable(3089):h.disable(3089),f.scissor_enable=d);d=B[0];N=B[1];Q=B[2];R=B[3];if(d!==aa[0]||N!==aa[1]||Q!==aa[2]||R!==aa[3])h.scissor(d,N,Q,R),aa[0]=d,aa[1]=N,aa[2]=Q,aa[3]=R;d=L[0];N=L[1];Q=L[2];R=L[3];if(d!==fa[0]||N!==fa[1]||Q!==fa[2]||R!==fa[3])h.viewport(d,N,Q,R),fa[0]=d,fa[1]=N,fa[2]=Q,fa[3]=R;f.dirty=!1}if(d=f.profile)q=performance.now(),u.count+=b;N=y.program(y.vert,y.frag,l);h.useProgram(N.program);e.setVAO(null);Q=N.id;(R=T[Q])||(R=T[Q]=m(N));R.call(this,a,b);e.setVAO(null);
d&&(u.cpuTime+=performance.now()-q)}}},"$26,color,freq,phase,projection,time,view":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,r,I,G,E,B,aa,H,F,D,ka){var t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb,Z;t=a.attributes;ba=a.context;L=a.current;fa=a.draw;ua=a.elements;T=a.framebuffer;W=a.gl;S=a.isArrayLike;O=a.next;M=a.shader;N=a.uniforms;Q=a.vao;R=O.blend_color;qa=L.blend_color;na=O.blend_equation;J=L.blend_equation;K=O.blend_func;
da=L.blend_func;U=O.colorMask;la=L.colorMask;ha=O.depth_range;Aa=L.depth_range;xa=O.polygonOffset_offset;ca=L.polygonOffset_offset;Da=O.sample_coverage;ja=L.sample_coverage;oa=O.scissor_box;Ba=L.scissor_box;Qa=O.stencil_func;Fa=L.stencil_func;Hb=O.stencil_opBack;Ua=L.stencil_opBack;ga=O.stencil_opFront;ea=L.stencil_opFront;sa=O.viewport;wa=L.viewport;Ea=new Float32Array(16);rb=new Float32Array(16);Gb=new Float32Array(16);Z=new Float32Array(16);return{draw:function(a){var g,n,p,w;g=T.next;g!==T.cur&&
(g?W.bindFramebuffer(36160,g.framebuffer):W.bindFramebuffer(36160,null),T.cur=g);if(L.dirty){var z;g=O.dither;g!==L.dither&&(g?W.enable(3024):W.disable(3024),L.dither=g);g=O.blend_enable;g!==L.blend_enable&&(g?W.enable(3042):W.disable(3042),L.blend_enable=g);g=R[0];p=R[1];w=R[2];z=R[3];if(g!==qa[0]||p!==qa[1]||w!==qa[2]||z!==qa[3])W.blendColor(g,p,w,z),qa[0]=g,qa[1]=p,qa[2]=w,qa[3]=z;g=na[0];p=na[1];if(g!==J[0]||p!==J[1])W.blendEquationSeparate(g,p),J[0]=g,J[1]=p;g=K[0];p=K[1];w=K[2];z=K[3];if(g!==
da[0]||p!==da[1]||w!==da[2]||z!==da[3])W.blendFuncSeparate(g,p,w,z),da[0]=g,da[1]=p,da[2]=w,da[3]=z;g=O.depth_enable;g!==L.depth_enable&&(g?W.enable(2929):W.disable(2929),L.depth_enable=g);g=O.depth_func;g!==L.depth_func&&(W.depthFunc(g),L.depth_func=g);g=ha[0];p=ha[1];if(g!==Aa[0]||p!==Aa[1])W.depthRange(g,p),Aa[0]=g,Aa[1]=p;g=O.depth_mask;g!==L.depth_mask&&(W.depthMask(g),L.depth_mask=g);g=U[0];p=U[1];w=U[2];z=U[3];if(g!==la[0]||p!==la[1]||w!==la[2]||z!==la[3])W.colorMask(g,p,w,z),la[0]=g,la[1]=
p,la[2]=w,la[3]=z;g=O.cull_enable;g!==L.cull_enable&&(g?W.enable(2884):W.disable(2884),L.cull_enable=g);g=O.cull_face;g!==L.cull_face&&(W.cullFace(g),L.cull_face=g);g=O.frontFace;g!==L.frontFace&&(W.frontFace(g),L.frontFace=g);g=O.lineWidth;g!==L.lineWidth&&(W.lineWidth(g),L.lineWidth=g);g=O.polygonOffset_enable;g!==L.polygonOffset_enable&&(g?W.enable(32823):W.disable(32823),L.polygonOffset_enable=g);g=xa[0];p=xa[1];if(g!==ca[0]||p!==ca[1])W.polygonOffset(g,p),ca[0]=g,ca[1]=p;g=O.sample_alpha;g!==
L.sample_alpha&&(g?W.enable(32926):W.disable(32926),L.sample_alpha=g);g=O.sample_enable;g!==L.sample_enable&&(g?W.enable(32928):W.disable(32928),L.sample_enable=g);g=Da[0];p=Da[1];if(g!==ja[0]||p!==ja[1])W.sampleCoverage(g,p),ja[0]=g,ja[1]=p;g=O.stencil_enable;g!==L.stencil_enable&&(g?W.enable(2960):W.disable(2960),L.stencil_enable=g);g=O.stencil_mask;g!==L.stencil_mask&&(W.stencilMask(g),L.stencil_mask=g);g=Qa[0];p=Qa[1];w=Qa[2];if(g!==Fa[0]||p!==Fa[1]||w!==Fa[2])W.stencilFunc(g,p,w),Fa[0]=g,Fa[1]=
p,Fa[2]=w;g=ga[0];p=ga[1];w=ga[2];z=ga[3];if(g!==ea[0]||p!==ea[1]||w!==ea[2]||z!==ea[3])W.stencilOpSeparate(g,p,w,z),ea[0]=g,ea[1]=p,ea[2]=w,ea[3]=z;g=Hb[0];p=Hb[1];w=Hb[2];z=Hb[3];if(g!==Ua[0]||p!==Ua[1]||w!==Ua[2]||z!==Ua[3])W.stencilOpSeparate(g,p,w,z),Ua[0]=g,Ua[1]=p,Ua[2]=w,Ua[3]=z;g=O.scissor_enable;g!==L.scissor_enable&&(g?W.enable(3089):W.disable(3089),L.scissor_enable=g);g=oa[0];p=oa[1];w=oa[2];z=oa[3];if(g!==Ba[0]||p!==Ba[1]||w!==Ba[2]||z!==Ba[3])W.scissor(g,p,w,z),Ba[0]=g,Ba[1]=p,Ba[2]=
w,Ba[3]=z;g=sa[0];p=sa[1];w=sa[2];z=sa[3];if(g!==wa[0]||p!==wa[1]||w!==wa[2]||z!==wa[3])W.viewport(g,p,w,z),wa[0]=g,wa[1]=p,wa[2]=w,wa[3]=z;L.dirty=!1}if(g=L.profile)n=performance.now(),u.count++;W.useProgram(q.program);Q.setVAO(null);p=aa.location;w=t[p];w.buffer||W.enableVertexAttribArray(p);if(5126!==w.type||4!==w.size||w.buffer!==m||!1!==w.normalized||0!==w.offset||44!==w.stride)W.bindBuffer(34962,m.buffer),W.vertexAttribPointer(p,4,5126,!1,44,0),w.type=5126,w.size=4,w.buffer=m,w.normalized=!1,
w.offset=0,w.stride=44;p=H.location;w=t[p];w.buffer||W.enableVertexAttribArray(p);if(5126!==w.type||4!==w.size||w.buffer!==b||!1!==w.normalized||16!==w.offset||44!==w.stride)W.bindBuffer(34962,b.buffer),W.vertexAttribPointer(p,4,5126,!1,44,16),w.type=5126,w.size=4,w.buffer=b,w.normalized=!1,w.offset=16,w.stride=44;p=B.location;w=t[p];w.buffer||W.enableVertexAttribArray(p);if(5126!==w.type||3!==w.size||w.buffer!==f||!1!==w.normalized||32!==w.offset||44!==w.stride)W.bindBuffer(34962,f.buffer),W.vertexAttribPointer(p,
3,5126,!1,44,32),w.type=5126,w.size=3,w.buffer=f,w.normalized=!1,w.offset=32,w.stride=44;p=c.call(this,ba,a,0);"number"!==typeof p&&d.commandRaise(h,l);W.uniform1f(D.location,p);p=C.call(this,ba,a,0);S(p)&&16===p.length||d.commandRaise(y,l);W.uniformMatrix4fv(ka.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Ea[0]=p[0],Ea[1]=p[1],Ea[2]=p[2],Ea[3]=p[3],Ea[4]=p[4],Ea[5]=p[5],Ea[6]=p[6],Ea[7]=p[7],Ea[8]=p[8],Ea[9]=p[9],Ea[10]=p[10],Ea[11]=p[11],Ea[12]=p[12],Ea[13]=p[13],Ea[14]=p[14],Ea[15]=
p[15],Ea));a=e.call(this,ba,a,0);S(a)&&16===a.length||d.commandRaise(k,l);W.uniformMatrix4fv(F.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(rb[0]=a[0],rb[1]=a[1],rb[2]=a[2],rb[3]=a[3],rb[4]=a[4],rb[5]=a[5],rb[6]=a[6],rb[7]=a[7],rb[8]=a[8],rb[9]=a[9],rb[10]=a[10],rb[11]=a[11],rb[12]=a[12],rb[13]=a[13],rb[14]=a[14],rb[15]=a[15],rb));(a=fa.elements)?W.bindBuffer(34963,a.buffer.buffer):Q.currentVAO&&(a=ua.getElements(Q.currentVAO.elements))&&W.bindBuffer(34963,a.buffer.buffer);p=fa.offset;
a?W.drawElements(0,1E4,a.type,p<<(a.type-5121>>1)):W.drawArrays(0,p,1E4);Q.setVAO(null);g&&(u.cpuTime+=performance.now()-n)},scope:function(c,a,e){var k,d,h,t,y,x,v,l,C,q,P,J,ma,ga,B,r,ea,I,E,D,sa,Fa,H,K,F,U,ca,Z,Hb,Qa,O,ta,Q,da,wa,R,ha,xa,S,T,qa,G,ja,W,ra;if(k=L.profile)d=performance.now(),u.count++;h=fa.count;fa.count=1E4;t=fa.primitive;fa.primitive=0;y=g.call(this,ba,c,e);x=N[5];N[5]=y;v=n.call(this,ba,c,e);y=N[3];N[3]=v;l=p.call(this,ba,c,e);v=N[4];N[4]=l;l=w.buffer;w.buffer=f;C=w.divisor;w.divisor=
0;q=w.normalized;w.normalized=!1;P=w.offset;w.offset=32;J=w.size;w.size=0;ma=w.state;w.state=1;ga=w.stride;w.stride=44;B=w.type;w.type=5126;r=w.w;w.w=0;ea=w.x;w.x=0;I=w.y;w.y=0;E=w.z;w.z=0;D=z.buffer;z.buffer=m;sa=z.divisor;z.divisor=0;Fa=z.normalized;z.normalized=!1;H=z.offset;z.offset=0;K=z.size;z.size=0;F=z.state;z.state=1;U=z.stride;z.stride=44;ca=z.type;z.type=5126;Z=z.w;z.w=0;Hb=z.x;z.x=0;Qa=z.y;z.y=0;O=z.z;z.z=0;ta=A.buffer;A.buffer=b;Q=A.divisor;A.divisor=0;da=A.normalized;A.normalized=!1;
wa=A.offset;A.offset=16;R=A.size;A.size=0;ha=A.state;A.state=1;xa=A.stride;A.stride=44;S=A.type;A.type=5126;T=A.w;A.w=0;qa=A.x;A.x=0;G=A.y;A.y=0;ja=A.z;A.z=0;W=M.vert;M.vert=2;ra=M.frag;M.frag=1;a(ba,c,e);k&&(u.cpuTime+=performance.now()-d);fa.count=h;fa.primitive=t;N[5]=x;N[3]=y;N[4]=v;w.buffer=l;w.divisor=C;w.normalized=q;w.offset=P;w.size=J;w.state=ma;w.stride=ga;w.type=B;w.w=r;w.x=ea;w.y=I;w.z=E;z.buffer=D;z.divisor=sa;z.normalized=Fa;z.offset=H;z.size=K;z.state=F;z.stride=U;z.type=ca;z.w=Z;z.x=
Hb;z.y=Qa;z.z=O;A.buffer=ta;A.divisor=Q;A.normalized=da;A.offset=wa;A.size=R;A.state=ha;A.stride=xa;A.type=S;A.w=T;A.x=qa;A.y=G;A.z=ja;M.vert=W;M.frag=ra},batch:function(c,a){var e,k,h;e=T.next;e!==T.cur&&(e?W.bindFramebuffer(36160,e.framebuffer):W.bindFramebuffer(36160,null),T.cur=e);if(L.dirty){var g,p,n;e=O.dither;e!==L.dither&&(e?W.enable(3024):W.disable(3024),L.dither=e);e=O.blend_enable;e!==L.blend_enable&&(e?W.enable(3042):W.disable(3042),L.blend_enable=e);e=R[0];g=R[1];p=R[2];n=R[3];if(e!==
qa[0]||g!==qa[1]||p!==qa[2]||n!==qa[3])W.blendColor(e,g,p,n),qa[0]=e,qa[1]=g,qa[2]=p,qa[3]=n;e=na[0];g=na[1];if(e!==J[0]||g!==J[1])W.blendEquationSeparate(e,g),J[0]=e,J[1]=g;e=K[0];g=K[1];p=K[2];n=K[3];if(e!==da[0]||g!==da[1]||p!==da[2]||n!==da[3])W.blendFuncSeparate(e,g,p,n),da[0]=e,da[1]=g,da[2]=p,da[3]=n;e=O.depth_enable;e!==L.depth_enable&&(e?W.enable(2929):W.disable(2929),L.depth_enable=e);e=O.depth_func;e!==L.depth_func&&(W.depthFunc(e),L.depth_func=e);e=ha[0];g=ha[1];if(e!==Aa[0]||g!==Aa[1])W.depthRange(e,
g),Aa[0]=e,Aa[1]=g;e=O.depth_mask;e!==L.depth_mask&&(W.depthMask(e),L.depth_mask=e);e=U[0];g=U[1];p=U[2];n=U[3];if(e!==la[0]||g!==la[1]||p!==la[2]||n!==la[3])W.colorMask(e,g,p,n),la[0]=e,la[1]=g,la[2]=p,la[3]=n;e=O.cull_enable;e!==L.cull_enable&&(e?W.enable(2884):W.disable(2884),L.cull_enable=e);e=O.cull_face;e!==L.cull_face&&(W.cullFace(e),L.cull_face=e);e=O.frontFace;e!==L.frontFace&&(W.frontFace(e),L.frontFace=e);e=O.lineWidth;e!==L.lineWidth&&(W.lineWidth(e),L.lineWidth=e);e=O.polygonOffset_enable;
e!==L.polygonOffset_enable&&(e?W.enable(32823):W.disable(32823),L.polygonOffset_enable=e);e=xa[0];g=xa[1];if(e!==ca[0]||g!==ca[1])W.polygonOffset(e,g),ca[0]=e,ca[1]=g;e=O.sample_alpha;e!==L.sample_alpha&&(e?W.enable(32926):W.disable(32926),L.sample_alpha=e);e=O.sample_enable;e!==L.sample_enable&&(e?W.enable(32928):W.disable(32928),L.sample_enable=e);e=Da[0];g=Da[1];if(e!==ja[0]||g!==ja[1])W.sampleCoverage(e,g),ja[0]=e,ja[1]=g;e=O.stencil_enable;e!==L.stencil_enable&&(e?W.enable(2960):W.disable(2960),
L.stencil_enable=e);e=O.stencil_mask;e!==L.stencil_mask&&(W.stencilMask(e),L.stencil_mask=e);e=Qa[0];g=Qa[1];p=Qa[2];if(e!==Fa[0]||g!==Fa[1]||p!==Fa[2])W.stencilFunc(e,g,p),Fa[0]=e,Fa[1]=g,Fa[2]=p;e=ga[0];g=ga[1];p=ga[2];n=ga[3];if(e!==ea[0]||g!==ea[1]||p!==ea[2]||n!==ea[3])W.stencilOpSeparate(e,g,p,n),ea[0]=e,ea[1]=g,ea[2]=p,ea[3]=n;e=Hb[0];g=Hb[1];p=Hb[2];n=Hb[3];if(e!==Ua[0]||g!==Ua[1]||p!==Ua[2]||n!==Ua[3])W.stencilOpSeparate(e,g,p,n),Ua[0]=e,Ua[1]=g,Ua[2]=p,Ua[3]=n;e=O.scissor_enable;e!==L.scissor_enable&&
(e?W.enable(3089):W.disable(3089),L.scissor_enable=e);e=oa[0];g=oa[1];p=oa[2];n=oa[3];if(e!==Ba[0]||g!==Ba[1]||p!==Ba[2]||n!==Ba[3])W.scissor(e,g,p,n),Ba[0]=e,Ba[1]=g,Ba[2]=p,Ba[3]=n;e=sa[0];g=sa[1];p=sa[2];n=sa[3];if(e!==wa[0]||g!==wa[1]||p!==wa[2]||n!==wa[3])W.viewport(e,g,p,n),wa[0]=e,wa[1]=g,wa[2]=p,wa[3]=n;L.dirty=!1}if(e=L.profile)k=performance.now(),u.count+=a;W.useProgram(ma.program);Q.setVAO(null);g=aa.location;p=t[g];p.buffer||W.enableVertexAttribArray(g);if(5126!==p.type||4!==p.size||p.buffer!==
m||!1!==p.normalized||0!==p.offset||44!==p.stride)W.bindBuffer(34962,m.buffer),W.vertexAttribPointer(g,4,5126,!1,44,0),p.type=5126,p.size=4,p.buffer=m,p.normalized=!1,p.offset=0,p.stride=44;g=H.location;p=t[g];p.buffer||W.enableVertexAttribArray(g);if(5126!==p.type||4!==p.size||p.buffer!==b||!1!==p.normalized||16!==p.offset||44!==p.stride)W.bindBuffer(34962,b.buffer),W.vertexAttribPointer(g,4,5126,!1,44,16),p.type=5126,p.size=4,p.buffer=b,p.normalized=!1,p.offset=16,p.stride=44;g=B.location;p=t[g];
p.buffer||W.enableVertexAttribArray(g);if(5126!==p.type||3!==p.size||p.buffer!==f||!1!==p.normalized||32!==p.offset||44!==p.stride)W.bindBuffer(34962,f.buffer),W.vertexAttribPointer(g,3,5126,!1,44,32),p.type=5126,p.size=3,p.buffer=f,p.normalized=!1,p.offset=32,p.stride=44;g=x.call(this,ba,void 0,h);"number"!==typeof g&&d.commandRaise(v,l);W.uniform1f(D.location,g);g=r.call(this,ba,void 0,h);S(g)&&16===g.length||d.commandRaise(I,l);W.uniformMatrix4fv(ka.location,!1,Array.isArray(g)||g instanceof Float32Array?
g:(Gb[0]=g[0],Gb[1]=g[1],Gb[2]=g[2],Gb[3]=g[3],Gb[4]=g[4],Gb[5]=g[5],Gb[6]=g[6],Gb[7]=g[7],Gb[8]=g[8],Gb[9]=g[9],Gb[10]=g[10],Gb[11]=g[11],Gb[12]=g[12],Gb[13]=g[13],Gb[14]=g[14],Gb[15]=g[15],Gb));h=G.call(this,ba,void 0,h);S(h)&&16===h.length||d.commandRaise(E,l);W.uniformMatrix4fv(F.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Z[0]=h[0],Z[1]=h[1],Z[2]=h[2],Z[3]=h[3],Z[4]=h[4],Z[5]=h[5],Z[6]=h[6],Z[7]=h[7],Z[8]=h[8],Z[9]=h[9],Z[10]=h[10],Z[11]=h[11],Z[12]=h[12],Z[13]=h[13],Z[14]=h[14],
Z[15]=h[15],Z));(g=fa.elements)?W.bindBuffer(34963,g.buffer.buffer):Q.currentVAO&&(g=ua.getElements(Q.currentVAO.elements))&&W.bindBuffer(34963,g.buffer.buffer);p=fa.offset;for(h=0;h<a;++h)g?W.drawElements(0,1E4,g.type,p<<(g.type-5121>>1)):W.drawArrays(0,p,1E4);Q.setVAO(null);e&&(u.cpuTime+=performance.now()-k)}}},"$34,atlas,normal,position,projection,uv,view":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,ma,x,v,r,I,G,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S){var O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,
ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb,Z,V,ya,Ha,pa,za,Ca,ia,X,va,Ka,Ga;O=a.attributes;M=a.buffer;N=a.context;Q=a.current;R=a.draw;qa=a.elements;na=a.framebuffer;J=a.gl;K=a.isArrayLike;da=a.isBufferArgs;U=a.next;la=a.shader;ha=a.uniforms;Aa=a.vao;xa=U.blend_color;ca=Q.blend_color;Da=U.blend_equation;ja=Q.blend_equation;oa=U.blend_func;Ba=Q.blend_func;Qa=U.colorMask;Fa=Q.colorMask;Hb=U.depth_range;Ua=Q.depth_range;ga=U.polygonOffset_offset;ea=Q.polygonOffset_offset;sa=U.sample_coverage;wa=
Q.sample_coverage;Ea=U.scissor_box;rb=Q.scissor_box;Gb=U.stencil_func;Z=Q.stencil_func;V=U.stencil_opBack;ya=Q.stencil_opBack;Ha=U.stencil_opFront;pa=Q.stencil_opFront;za=U.viewport;Ca=Q.viewport;ia={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X=new Float32Array(16);va=new Float32Array(16);Ka=new Float32Array(16);Ga=new Float32Array(16);return{draw:function(a){var p,n,w,z,t,A,x,v,r,ma,B,I,E,D,H,F,R,ha,ta,G,ra,aa,ba,la,ka,Ga,Ka,Ed,pd,bd,td,Oc,rd,Gc,
gd,Sc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb,ab,jb;p=N.view;n=q.call(this,N,a,0);N.view=n;w=na.next;w!==na.cur&&(w?J.bindFramebuffer(36160,w.framebuffer):J.bindFramebuffer(36160,null),na.cur=w);if(Q.dirty){var Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb;Wa=U.dither;Wa!==Q.dither&&(Wa?J.enable(3024):J.disable(3024),Q.dither=Wa);Jc=U.blend_enable;Jc!==Q.blend_enable&&
(Jc?J.enable(3042):J.disable(3042),Q.blend_enable=Jc);Nb=xa[0];Ib=xa[1];sc=xa[2];Ob=xa[3];if(Nb!==ca[0]||Ib!==ca[1]||sc!==ca[2]||Ob!==ca[3])J.blendColor(Nb,Ib,sc,Ob),ca[0]=Nb,ca[1]=Ib,ca[2]=sc,ca[3]=Ob;kb=Da[0];Fb=Da[1];if(kb!==ja[0]||Fb!==ja[1])J.blendEquationSeparate(kb,Fb),ja[0]=kb,ja[1]=Fb;Cb=oa[0];yb=oa[1];hb=oa[2];$b=oa[3];if(Cb!==Ba[0]||yb!==Ba[1]||hb!==Ba[2]||$b!==Ba[3])J.blendFuncSeparate(Cb,yb,hb,$b),Ba[0]=Cb,Ba[1]=yb,Ba[2]=hb,Ba[3]=$b;Pb=U.depth_enable;Pb!==Q.depth_enable&&(Pb?J.enable(2929):
J.disable(2929),Q.depth_enable=Pb);qb=U.depth_func;qb!==Q.depth_func&&(J.depthFunc(qb),Q.depth_func=qb);Sa=Hb[0];Ub=Hb[1];if(Sa!==Ua[0]||Ub!==Ua[1])J.depthRange(Sa,Ub),Ua[0]=Sa,Ua[1]=Ub;sb=U.depth_mask;sb!==Q.depth_mask&&(J.depthMask(sb),Q.depth_mask=sb);jc=Qa[0];ib=Qa[1];pb=Qa[2];Ja=Qa[3];if(jc!==Fa[0]||ib!==Fa[1]||pb!==Fa[2]||Ja!==Fa[3])J.colorMask(jc,ib,pb,Ja),Fa[0]=jc,Fa[1]=ib,Fa[2]=pb,Fa[3]=Ja;tb=U.frontFace;tb!==Q.frontFace&&(J.frontFace(tb),Q.frontFace=tb);La=U.lineWidth;La!==Q.lineWidth&&
(J.lineWidth(La),Q.lineWidth=La);db=U.polygonOffset_enable;db!==Q.polygonOffset_enable&&(db?J.enable(32823):J.disable(32823),Q.polygonOffset_enable=db);fb=ga[0];Na=ga[1];if(fb!==ea[0]||Na!==ea[1])J.polygonOffset(fb,Na),ea[0]=fb,ea[1]=Na;lb=U.sample_alpha;lb!==Q.sample_alpha&&(lb?J.enable(32926):J.disable(32926),Q.sample_alpha=lb);Xa=U.sample_enable;Xa!==Q.sample_enable&&(Xa?J.enable(32928):J.disable(32928),Q.sample_enable=Xa);vb=sa[0];ub=sa[1];if(vb!==wa[0]||ub!==wa[1])J.sampleCoverage(vb,ub),wa[0]=
vb,wa[1]=ub;Pa=U.stencil_enable;Pa!==Q.stencil_enable&&(Pa?J.enable(2960):J.disable(2960),Q.stencil_enable=Pa);Dc=U.stencil_mask;Dc!==Q.stencil_mask&&(J.stencilMask(Dc),Q.stencil_mask=Dc);Va=Gb[0];Jb=Gb[1];Db=Gb[2];if(Va!==Z[0]||Jb!==Z[1]||Db!==Z[2])J.stencilFunc(Va,Jb,Db),Z[0]=Va,Z[1]=Jb,Z[2]=Db;Ma=Ha[0];zd=Ha[1];Za=Ha[2];Kb=Ha[3];if(Ma!==pa[0]||zd!==pa[1]||Za!==pa[2]||Kb!==pa[3])J.stencilOpSeparate(Ma,zd,Za,Kb),pa[0]=Ma,pa[1]=zd,pa[2]=Za,pa[3]=Kb;Lb=V[0];mb=V[1];Oa=V[2];ac=V[3];if(Lb!==ya[0]||mb!==
ya[1]||Oa!==ya[2]||ac!==ya[3])J.stencilOpSeparate(Lb,mb,Oa,ac),ya[0]=Lb,ya[1]=mb,ya[2]=Oa,ya[3]=ac;Ra=U.scissor_enable;Ra!==Q.scissor_enable&&(Ra?J.enable(3089):J.disable(3089),Q.scissor_enable=Ra);wb=Ea[0];xb=Ea[1];Ta=Ea[2];nb=Ea[3];if(wb!==rb[0]||xb!==rb[1]||Ta!==rb[2]||nb!==rb[3])J.scissor(wb,xb,Ta,nb),rb[0]=wb,rb[1]=xb,rb[2]=Ta,rb[3]=nb;gc=za[0];Bc=za[1];wc=za[2];bb=za[3];if(gc!==Ca[0]||Bc!==Ca[1]||wc!==Ca[2]||bb!==Ca[3])J.viewport(gc,Bc,wc,bb),Ca[0]=gc,Ca[1]=Bc,Ca[2]=wc,Ca[3]=bb}J.enable(2884);
Q.cull_enable=!0;J.cullFace(1029);Q.cull_face=1029;if(z=Q.profile)t=performance.now(),u.count++;J.useProgram(m.program);Aa.setVAO(null);(A=a.position)&&("object"===typeof A||"function"===typeof A)&&(da(A)||M.getBuffer(A)||M.getBuffer(A.buffer)||da(A.buffer)||"constant"in A&&("number"===typeof A.constant||K(A.constant)))||d.commandRaise(b,l);x=!1;v=null;r=!1;B=ma=0;I=1;E=0;D=5126;ha=R=F=H=0;da(A)?(x=!0,v=M.createStream(34962,A),D=v.dtype):(v=M.getBuffer(A))?D=v.dtype:"constant"in A?(I=2,"number"===
typeof A.constant?(F=A.constant,R=ha=H=0):(F=0<A.constant.length?A.constant[0]:0,R=1<A.constant.length?A.constant[1]:0,ha=2<A.constant.length?A.constant[2]:0,H=3<A.constant.length?A.constant[3]:0)):(v=da(A.buffer)?M.createStream(34962,A.buffer):M.getBuffer(A.buffer),D="type"in A?ia[A.type]:v.dtype,r=!!A.normalized,B=A.size|0,ma=A.offset|0,E=A.stride|0);ta=ua.location;G=O[ta];if(1===I){if(G.buffer||J.enableVertexAttribArray(ta),ra=B||3,G.type!==D||G.size!==ra||G.buffer!==v||G.normalized!==r||G.offset!==
ma||G.stride!==E)J.bindBuffer(34962,v.buffer),J.vertexAttribPointer(ta,ra,D,r,E,ma),G.type=D,G.size=ra,G.buffer=v,G.normalized=r,G.offset=ma,G.stride=E}else if(G.buffer&&(J.disableVertexAttribArray(ta),G.buffer=null),G.x!==F||G.y!==R||G.z!==ha||G.w!==H)J.vertexAttrib4f(ta,F,R,ha,H),G.x=F,G.y=R,G.z=ha,G.w=H;(aa=a.normal)&&("object"===typeof aa||"function"===typeof aa)&&(da(aa)||M.getBuffer(aa)||M.getBuffer(aa.buffer)||da(aa.buffer)||"constant"in aa&&("number"===typeof aa.constant||K(aa.constant)))||
d.commandRaise(f,l);ba=!1;la=null;ka=!1;Ka=Ga=0;Ed=1;pd=0;bd=5126;Gc=rd=Oc=td=0;da(aa)?(ba=!0,la=M.createStream(34962,aa),bd=la.dtype):(la=M.getBuffer(aa))?bd=la.dtype:"constant"in aa?(Ed=2,"number"===typeof aa.constant?(Oc=aa.constant,rd=Gc=td=0):(Oc=0<aa.constant.length?aa.constant[0]:0,rd=1<aa.constant.length?aa.constant[1]:0,Gc=2<aa.constant.length?aa.constant[2]:0,td=3<aa.constant.length?aa.constant[3]:0)):(la=da(aa.buffer)?M.createStream(34962,aa.buffer):M.getBuffer(aa.buffer),bd="type"in aa?
ia[aa.type]:la.dtype,ka=!!aa.normalized,Ka=aa.size|0,Ga=aa.offset|0,pd=aa.stride|0);gd=fa.location;Sc=O[gd];if(1===Ed){if(Sc.buffer||J.enableVertexAttribArray(gd),md=Ka||3,Sc.type!==bd||Sc.size!==md||Sc.buffer!==la||Sc.normalized!==ka||Sc.offset!==Ga||Sc.stride!==pd)J.bindBuffer(34962,la.buffer),J.vertexAttribPointer(gd,md,bd,ka,pd,Ga),Sc.type=bd,Sc.size=md,Sc.buffer=la,Sc.normalized=ka,Sc.offset=Ga,Sc.stride=pd}else if(Sc.buffer&&(J.disableVertexAttribArray(gd),Sc.buffer=null),Sc.x!==Oc||Sc.y!==
rd||Sc.z!==Gc||Sc.w!==td)J.vertexAttrib4f(gd,Oc,rd,Gc,td),Sc.x=Oc,Sc.y=rd,Sc.z=Gc,Sc.w=td;(Vb=a.uv)&&("object"===typeof Vb||"function"===typeof Vb)&&(da(Vb)||M.getBuffer(Vb)||M.getBuffer(Vb.buffer)||da(Vb.buffer)||"constant"in Vb&&("number"===typeof Vb.constant||K(Vb.constant)))||d.commandRaise(c,l);Eb=!1;vc=null;zb=!1;Bb=yc=0;Lc=1;mc=0;Hc=5126;fc=Ec=cd=hd=0;da(Vb)?(Eb=!0,vc=M.createStream(34962,Vb),Hc=vc.dtype):(vc=M.getBuffer(Vb))?Hc=vc.dtype:"constant"in Vb?(Lc=2,"number"===typeof Vb.constant?
(cd=Vb.constant,Ec=fc=hd=0):(cd=0<Vb.constant.length?Vb.constant[0]:0,Ec=1<Vb.constant.length?Vb.constant[1]:0,fc=2<Vb.constant.length?Vb.constant[2]:0,hd=3<Vb.constant.length?Vb.constant[3]:0)):(vc=da(Vb.buffer)?M.createStream(34962,Vb.buffer):M.getBuffer(Vb.buffer),Hc="type"in Vb?ia[Vb.type]:vc.dtype,zb=!!Vb.normalized,Bb=Vb.size|0,yc=Vb.offset|0,mc=Vb.stride|0);Ic=W.location;pc=O[Ic];if(1===Lc){if(pc.buffer||J.enableVertexAttribArray(Ic),rc=Bb||2,pc.type!==Hc||pc.size!==rc||pc.buffer!==vc||pc.normalized!==
zb||pc.offset!==yc||pc.stride!==mc)J.bindBuffer(34962,vc.buffer),J.vertexAttribPointer(Ic,rc,Hc,zb,mc,yc),pc.type=Hc,pc.size=rc,pc.buffer=vc,pc.normalized=zb,pc.offset=yc,pc.stride=mc}else if(pc.buffer&&(J.disableVertexAttribArray(Ic),pc.buffer=null),pc.x!==cd||pc.y!==Ec||pc.z!==fc||pc.w!==hd)J.vertexAttrib4f(Ic,cd,Ec,fc,hd),pc.x=cd,pc.y=Ec,pc.z=fc,pc.w=hd;nc=h.call(this,N,a,0);K(nc)&&16===nc.length||d.commandRaise(C,l);J.uniformMatrix4fv(T.location,!1,Array.isArray(nc)||nc instanceof Float32Array?
nc:(X[0]=nc[0],X[1]=nc[1],X[2]=nc[2],X[3]=nc[3],X[4]=nc[4],X[5]=nc[5],X[6]=nc[6],X[7]=nc[7],X[8]=nc[8],X[9]=nc[9],X[10]=nc[10],X[11]=nc[11],X[12]=nc[12],X[13]=nc[13],X[14]=nc[14],X[15]=nc[15],X));qc=N.view;K(qc)&&16===qc.length||d.commandRaise(y,l);J.uniformMatrix4fv(S.location,!1,Array.isArray(qc)||qc instanceof Float32Array?qc:(va[0]=qc[0],va[1]=qc[1],va[2]=qc[2],va[3]=qc[3],va[4]=qc[4],va[5]=qc[5],va[6]=qc[6],va[7]=qc[7],va[8]=qc[8],va[9]=qc[9],va[10]=qc[10],va[11]=qc[11],va[12]=qc[12],va[13]=
qc[13],va[14]=qc[14],va[15]=qc[15],va));(ob=a.atlas)&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);"function"===typeof ob&&"texture2d"===ob._reglType||d.commandRaise(e,l);Pc=ob._texture;J.uniform1i(L.location,Pc.bind());Zb=a.elements;gb=null;(Mb=da(Zb))?gb=qa.createStream(Zb):(gb=qa.getElements(Zb),Zb&&!gb&&d.commandRaise(k,l));gb&&J.bindBuffer(34963,gb.buffer.buffer);ab=gb?gb.primType:4;jb=gb?gb.vertCount:-1;0<=jb||d.commandRaise(g,l);jb&&(gb?J.drawElements(ab,jb,gb.type,0<<(gb.type-5121>>1)):
J.drawArrays(ab,0,jb),Q.dirty=!0,Aa.setVAO(null),N.view=p,z&&(u.cpuTime+=performance.now()-t),x&&M.destroyStream(v),ba&&M.destroyStream(la),Eb&&M.destroyStream(vc),Pc.unbind(),Mb&&qa.destroyStream(gb))},scope:function(c,a,e){var b,k,g,f,h,m,t,y,C,q,J,ga,B,ea,I,E,D,V,sa,Fa,H,F,ca,Z,Hb,L,Qa,O,ya,pa,Ha,wa,xa,X,G,S,T,aa,ja,W,ra,ba,Ua,za,oa,Ba,Da,fa,ka,Ca,Aa,Ea,na,Gb,ua,va,rb,Ga,Ka,jb,Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,
mb;b=N.view;k=n.call(this,N,c,e);N.view=k;g=U.cull_enable;U.cull_enable=!0;f=U.cull_face;U.cull_face=1029;if(h=Q.profile)m=performance.now(),u.count++;t=c.elements;y=null;(C=da(t))?y=qa.createStream(t):(y=qa.getElements(t),t&&!y&&d.commandRaise(p,l));q=R.elements;R.elements=y;J=R.offset;R.offset=0;ga=y?y.vertCount:-1;B=R.count;R.count=ga;ea=y?y.primType:4;I=R.primitive;R.primitive=ea;E=c.atlas;D=ha[5];ha[5]=E;V=w.call(this,N,c,e);sa=ha[3];ha[3]=V;Fa=N.view;H=ha[4];ha[4]=Fa;(F=c.normal)&&("object"===
typeof F||"function"===typeof F)&&(da(F)||M.getBuffer(F)||M.getBuffer(F.buffer)||da(F.buffer)||"constant"in F&&("number"===typeof F.constant||K(F.constant)))||d.commandRaise(z,l);ca=!1;Z=null;Hb=0;L=!1;O=Qa=0;ya=1;pa=0;Ha=5126;G=X=xa=wa=0;da(F)?(ca=!0,Z=M.createStream(34962,F),Ha=Z.dtype):(Z=M.getBuffer(F))?Ha=Z.dtype:"constant"in F?(ya=2,"number"===typeof F.constant?(xa=F.constant,X=G=wa=0):(xa=0<F.constant.length?F.constant[0]:0,X=1<F.constant.length?F.constant[1]:0,G=2<F.constant.length?F.constant[2]:
0,wa=3<F.constant.length?F.constant[3]:0)):(Z=da(F.buffer)?M.createStream(34962,F.buffer):M.getBuffer(F.buffer),Ha="type"in F?ia[F.type]:Z.dtype,L=!!F.normalized,O=F.size|0,Qa=F.offset|0,pa=F.stride|0,Hb=F.divisor|0);S=A.buffer;A.buffer=Z;T=A.divisor;A.divisor=Hb;aa=A.normalized;A.normalized=L;ja=A.offset;A.offset=Qa;W=A.size;A.size=O;ra=A.state;A.state=ya;ba=A.stride;A.stride=pa;Ua=A.type;A.type=Ha;za=A.w;A.w=wa;oa=A.x;A.x=xa;Ba=A.y;A.y=X;Da=A.z;A.z=G;(fa=c.position)&&("object"===typeof fa||"function"===
typeof fa)&&(da(fa)||M.getBuffer(fa)||M.getBuffer(fa.buffer)||da(fa.buffer)||"constant"in fa&&("number"===typeof fa.constant||K(fa.constant)))||d.commandRaise(ma,l);ka=!1;Ca=null;Aa=0;Ea=!1;Gb=na=0;ua=1;va=0;rb=5126;Wa=jb=Ka=Ga=0;da(fa)?(ka=!0,Ca=M.createStream(34962,fa),rb=Ca.dtype):(Ca=M.getBuffer(fa))?rb=Ca.dtype:"constant"in fa?(ua=2,"number"===typeof fa.constant?(Ka=fa.constant,jb=Wa=Ga=0):(Ka=0<fa.constant.length?fa.constant[0]:0,jb=1<fa.constant.length?fa.constant[1]:0,Wa=2<fa.constant.length?
fa.constant[2]:0,Ga=3<fa.constant.length?fa.constant[3]:0)):(Ca=da(fa.buffer)?M.createStream(34962,fa.buffer):M.getBuffer(fa.buffer),rb="type"in fa?ia[fa.type]:Ca.dtype,Ea=!!fa.normalized,Gb=fa.size|0,na=fa.offset|0,va=fa.stride|0,Aa=fa.divisor|0);Jc=x.buffer;x.buffer=Ca;Nb=x.divisor;x.divisor=Aa;Ib=x.normalized;x.normalized=Ea;sc=x.offset;x.offset=na;Ob=x.size;x.size=Gb;kb=x.state;x.state=ua;Fb=x.stride;x.stride=va;Cb=x.type;x.type=rb;yb=x.w;x.w=Ga;hb=x.x;x.x=Ka;$b=x.y;x.y=jb;Pb=x.z;x.z=Wa;(qb=c.uv)&&
("object"===typeof qb||"function"===typeof qb)&&(da(qb)||M.getBuffer(qb)||M.getBuffer(qb.buffer)||da(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||K(qb.constant)))||d.commandRaise(v,l);Sa=!1;Ub=null;sb=0;jc=!1;pb=ib=0;Ja=1;tb=0;La=5126;lb=Na=fb=db=0;da(qb)?(Sa=!0,Ub=M.createStream(34962,qb),La=Ub.dtype):(Ub=M.getBuffer(qb))?La=Ub.dtype:"constant"in qb?(Ja=2,"number"===typeof qb.constant?(fb=qb.constant,Na=lb=db=0):(fb=0<qb.constant.length?qb.constant[0]:0,Na=1<qb.constant.length?qb.constant[1]:
0,lb=2<qb.constant.length?qb.constant[2]:0,db=3<qb.constant.length?qb.constant[3]:0)):(Ub=da(qb.buffer)?M.createStream(34962,qb.buffer):M.getBuffer(qb.buffer),La="type"in qb?ia[qb.type]:Ub.dtype,jc=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,tb=qb.stride|0,sb=qb.divisor|0);Xa=r.buffer;r.buffer=Ub;vb=r.divisor;r.divisor=sb;ub=r.normalized;r.normalized=jc;Pa=r.offset;r.offset=ib;Dc=r.size;r.size=pb;Va=r.state;r.state=Ja;Jb=r.stride;r.stride=tb;Db=r.type;r.type=La;Ma=r.w;r.w=db;zd=r.x;r.x=fb;Za=r.y;
r.y=Na;Kb=r.z;r.z=lb;Lb=la.vert;la.vert=2;mb=la.frag;la.frag=1;Q.dirty=!0;a(N,c,e);N.view=b;U.cull_enable=g;U.cull_face=f;h&&(u.cpuTime+=performance.now()-m);C&&qa.destroyStream(y);R.elements=q;R.offset=J;R.count=B;R.primitive=I;ha[5]=D;ha[3]=sa;ha[4]=H;ca&&M.destroyStream(Z);A.buffer=S;A.divisor=T;A.normalized=aa;A.offset=ja;A.size=W;A.state=ra;A.stride=ba;A.type=Ua;A.w=za;A.x=oa;A.y=Ba;A.z=Da;ka&&M.destroyStream(Ca);x.buffer=Jc;x.divisor=Nb;x.normalized=Ib;x.offset=sc;x.size=Ob;x.state=kb;x.stride=
Fb;x.type=Cb;x.w=yb;x.x=hb;x.y=$b;x.z=Pb;Sa&&M.destroyStream(Ub);r.buffer=Xa;r.divisor=vb;r.normalized=ub;r.offset=Pa;r.size=Dc;r.state=Va;r.stride=Jb;r.type=Db;r.w=Ma;r.x=zd;r.y=Za;r.z=Kb;la.vert=Lb;la.frag=mb;Q.dirty=!0},batch:function(c,a){var e,b,k,g,f,h,p;e=N.view;b=I.call(this,N,c,0);N.view=b;k=na.next;k!==na.cur&&(k?J.bindFramebuffer(36160,k.framebuffer):J.bindFramebuffer(36160,null),na.cur=k);if(Q.dirty){var n,w,m,z,A,y,v,x,C,q,r,ma,R,ha,ta,X,la,va,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,
zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Zb,gb,Mb;n=U.dither;n!==Q.dither&&(n?J.enable(3024):J.disable(3024),Q.dither=n);w=U.blend_enable;w!==Q.blend_enable&&(w?J.enable(3042):J.disable(3042),Q.blend_enable=w);m=xa[0];z=xa[1];A=xa[2];y=xa[3];if(m!==ca[0]||z!==ca[1]||A!==ca[2]||y!==ca[3])J.blendColor(m,z,A,y),ca[0]=m,ca[1]=z,ca[2]=A,ca[3]=y;v=Da[0];x=Da[1];if(v!==ja[0]||x!==ja[1])J.blendEquationSeparate(v,x),ja[0]=v,ja[1]=x;C=oa[0];q=oa[1];r=oa[2];ma=oa[3];if(C!==Ba[0]||q!==Ba[1]||r!==Ba[2]||
ma!==Ba[3])J.blendFuncSeparate(C,q,r,ma),Ba[0]=C,Ba[1]=q,Ba[2]=r,Ba[3]=ma;R=U.depth_enable;R!==Q.depth_enable&&(R?J.enable(2929):J.disable(2929),Q.depth_enable=R);ha=U.depth_func;ha!==Q.depth_func&&(J.depthFunc(ha),Q.depth_func=ha);ta=Hb[0];X=Hb[1];if(ta!==Ua[0]||X!==Ua[1])J.depthRange(ta,X),Ua[0]=ta,Ua[1]=X;la=U.depth_mask;la!==Q.depth_mask&&(J.depthMask(la),Q.depth_mask=la);va=Qa[0];Md=Qa[1];Ed=Qa[2];pd=Qa[3];if(va!==Fa[0]||Md!==Fa[1]||Ed!==Fa[2]||pd!==Fa[3])J.colorMask(va,Md,Ed,pd),Fa[0]=va,Fa[1]=
Md,Fa[2]=Ed,Fa[3]=pd;bd=U.frontFace;bd!==Q.frontFace&&(J.frontFace(bd),Q.frontFace=bd);td=U.lineWidth;td!==Q.lineWidth&&(J.lineWidth(td),Q.lineWidth=td);Oc=U.polygonOffset_enable;Oc!==Q.polygonOffset_enable&&(Oc?J.enable(32823):J.disable(32823),Q.polygonOffset_enable=Oc);rd=ga[0];Gc=ga[1];if(rd!==ea[0]||Gc!==ea[1])J.polygonOffset(rd,Gc),ea[0]=rd,ea[1]=Gc;gd=U.sample_alpha;gd!==Q.sample_alpha&&(gd?J.enable(32926):J.disable(32926),Q.sample_alpha=gd);Sc=U.sample_enable;Sc!==Q.sample_enable&&(Sc?J.enable(32928):
J.disable(32928),Q.sample_enable=Sc);md=sa[0];Vb=sa[1];if(md!==wa[0]||Vb!==wa[1])J.sampleCoverage(md,Vb),wa[0]=md,wa[1]=Vb;Eb=U.stencil_enable;Eb!==Q.stencil_enable&&(Eb?J.enable(2960):J.disable(2960),Q.stencil_enable=Eb);vc=U.stencil_mask;vc!==Q.stencil_mask&&(J.stencilMask(vc),Q.stencil_mask=vc);zb=Gb[0];yc=Gb[1];Bb=Gb[2];if(zb!==Z[0]||yc!==Z[1]||Bb!==Z[2])J.stencilFunc(zb,yc,Bb),Z[0]=zb,Z[1]=yc,Z[2]=Bb;Lc=Ha[0];mc=Ha[1];Hc=Ha[2];hd=Ha[3];if(Lc!==pa[0]||mc!==pa[1]||Hc!==pa[2]||hd!==pa[3])J.stencilOpSeparate(Lc,
mc,Hc,hd),pa[0]=Lc,pa[1]=mc,pa[2]=Hc,pa[3]=hd;cd=V[0];Ec=V[1];fc=V[2];Ic=V[3];if(cd!==ya[0]||Ec!==ya[1]||fc!==ya[2]||Ic!==ya[3])J.stencilOpSeparate(cd,Ec,fc,Ic),ya[0]=cd,ya[1]=Ec,ya[2]=fc,ya[3]=Ic;pc=U.scissor_enable;pc!==Q.scissor_enable&&(pc?J.enable(3089):J.disable(3089),Q.scissor_enable=pc);rc=Ea[0];nc=Ea[1];qc=Ea[2];ob=Ea[3];if(rc!==rb[0]||nc!==rb[1]||qc!==rb[2]||ob!==rb[3])J.scissor(rc,nc,qc,ob),rb[0]=rc,rb[1]=nc,rb[2]=qc,rb[3]=ob;Pc=za[0];Zb=za[1];gb=za[2];Mb=za[3];if(Pc!==Ca[0]||Zb!==Ca[1]||
gb!==Ca[2]||Mb!==Ca[3])J.viewport(Pc,Zb,gb,Mb),Ca[0]=Pc,Ca[1]=Zb,Ca[2]=gb,Ca[3]=Mb}J.enable(2884);Q.cull_enable=!0;J.cullFace(1029);Q.cull_face=1029;if(g=Q.profile)f=performance.now(),u.count+=a;J.useProgram(G.program);var ab,jb;Aa.setVAO(null);ab=H.call(this,N,p,h);K(ab)&&16===ab.length||d.commandRaise(F,l);J.uniformMatrix4fv(T.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ka[0]=ab[0],Ka[1]=ab[1],Ka[2]=ab[2],Ka[3]=ab[3],Ka[4]=ab[4],Ka[5]=ab[5],Ka[6]=ab[6],Ka[7]=ab[7],Ka[8]=ab[8],
Ka[9]=ab[9],Ka[10]=ab[10],Ka[11]=ab[11],Ka[12]=ab[12],Ka[13]=ab[13],Ka[14]=ab[14],Ka[15]=ab[15],Ka));jb=N.view;K(jb)&&16===jb.length||d.commandRaise(D,l);J.uniformMatrix4fv(S.location,!1,Array.isArray(jb)||jb instanceof Float32Array?jb:(Ga[0]=jb[0],Ga[1]=jb[1],Ga[2]=jb[2],Ga[3]=jb[3],Ga[4]=jb[4],Ga[5]=jb[5],Ga[6]=jb[6],Ga[7]=jb[7],Ga[8]=jb[8],Ga[9]=jb[9],Ga[10]=jb[10],Ga[11]=jb[11],Ga[12]=jb[12],Ga[13]=jb[13],Ga[14]=jb[14],Ga[15]=jb[15],Ga));for(h=0;h<a;++h){p=c[h];var Wa,Jc,Nb,Ib,sc,Ob,kb,Fb,Cb,
yb,hb,$b,Pb,qb,Sa,Ub,sb,jc,ib,pb,Ja,tb,La,db,fb,Na,lb,Xa,vb,ub,Pa,Dc,Va,Jb,Db,Ma,zd,Za,Kb,Lb,mb,Oa,ac,Ra,wb,xb,Ta,nb,gc,Bc,wc,bb,kc,Mc,Ya;(Wa=p.position)&&("object"===typeof Wa||"function"===typeof Wa)&&(da(Wa)||M.getBuffer(Wa)||M.getBuffer(Wa.buffer)||da(Wa.buffer)||"constant"in Wa&&("number"===typeof Wa.constant||K(Wa.constant)))||d.commandRaise(E,l);Jc=!1;Nb=null;Ib=!1;Ob=sc=0;kb=1;Fb=0;Cb=5126;Pb=$b=hb=yb=0;da(Wa)?(Jc=!0,Nb=M.createStream(34962,Wa),Cb=Nb.dtype):(Nb=M.getBuffer(Wa))?Cb=Nb.dtype:
"constant"in Wa?(kb=2,"number"===typeof Wa.constant?(hb=Wa.constant,$b=Pb=yb=0):(hb=0<Wa.constant.length?Wa.constant[0]:0,$b=1<Wa.constant.length?Wa.constant[1]:0,Pb=2<Wa.constant.length?Wa.constant[2]:0,yb=3<Wa.constant.length?Wa.constant[3]:0)):(Nb=da(Wa.buffer)?M.createStream(34962,Wa.buffer):M.getBuffer(Wa.buffer),Cb="type"in Wa?ia[Wa.type]:Nb.dtype,Ib=!!Wa.normalized,Ob=Wa.size|0,sc=Wa.offset|0,Fb=Wa.stride|0);qb=ua.location;Sa=O[qb];if(1===kb){if(Sa.buffer||J.enableVertexAttribArray(qb),Ub=
Ob||3,Sa.type!==Cb||Sa.size!==Ub||Sa.buffer!==Nb||Sa.normalized!==Ib||Sa.offset!==sc||Sa.stride!==Fb)J.bindBuffer(34962,Nb.buffer),J.vertexAttribPointer(qb,Ub,Cb,Ib,Fb,sc),Sa.type=Cb,Sa.size=Ub,Sa.buffer=Nb,Sa.normalized=Ib,Sa.offset=sc,Sa.stride=Fb}else if(Sa.buffer&&(J.disableVertexAttribArray(qb),Sa.buffer=null),Sa.x!==hb||Sa.y!==$b||Sa.z!==Pb||Sa.w!==yb)J.vertexAttrib4f(qb,hb,$b,Pb,yb),Sa.x=hb,Sa.y=$b,Sa.z=Pb,Sa.w=yb;(sb=p.normal)&&("object"===typeof sb||"function"===typeof sb)&&(da(sb)||M.getBuffer(sb)||
M.getBuffer(sb.buffer)||da(sb.buffer)||"constant"in sb&&("number"===typeof sb.constant||K(sb.constant)))||d.commandRaise(B,l);jc=!1;ib=null;pb=!1;tb=Ja=0;La=1;db=0;fb=5126;vb=Xa=lb=Na=0;da(sb)?(jc=!0,ib=M.createStream(34962,sb),fb=ib.dtype):(ib=M.getBuffer(sb))?fb=ib.dtype:"constant"in sb?(La=2,"number"===typeof sb.constant?(lb=sb.constant,Xa=vb=Na=0):(lb=0<sb.constant.length?sb.constant[0]:0,Xa=1<sb.constant.length?sb.constant[1]:0,vb=2<sb.constant.length?sb.constant[2]:0,Na=3<sb.constant.length?
sb.constant[3]:0)):(ib=da(sb.buffer)?M.createStream(34962,sb.buffer):M.getBuffer(sb.buffer),fb="type"in sb?ia[sb.type]:ib.dtype,pb=!!sb.normalized,tb=sb.size|0,Ja=sb.offset|0,db=sb.stride|0);ub=fa.location;Pa=O[ub];if(1===La){if(Pa.buffer||J.enableVertexAttribArray(ub),Dc=tb||3,Pa.type!==fb||Pa.size!==Dc||Pa.buffer!==ib||Pa.normalized!==pb||Pa.offset!==Ja||Pa.stride!==db)J.bindBuffer(34962,ib.buffer),J.vertexAttribPointer(ub,Dc,fb,pb,db,Ja),Pa.type=fb,Pa.size=Dc,Pa.buffer=ib,Pa.normalized=pb,Pa.offset=
Ja,Pa.stride=db}else if(Pa.buffer&&(J.disableVertexAttribArray(ub),Pa.buffer=null),Pa.x!==lb||Pa.y!==Xa||Pa.z!==vb||Pa.w!==Na)J.vertexAttrib4f(ub,lb,Xa,vb,Na),Pa.x=lb,Pa.y=Xa,Pa.z=vb,Pa.w=Na;(Va=p.uv)&&("object"===typeof Va||"function"===typeof Va)&&(da(Va)||M.getBuffer(Va)||M.getBuffer(Va.buffer)||da(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||K(Va.constant)))||d.commandRaise(aa,l);Jb=!1;Db=null;Ma=!1;Za=zd=0;Kb=1;Lb=0;mb=5126;wb=Ra=ac=Oa=0;da(Va)?(Jb=!0,Db=M.createStream(34962,
Va),mb=Db.dtype):(Db=M.getBuffer(Va))?mb=Db.dtype:"constant"in Va?(Kb=2,"number"===typeof Va.constant?(ac=Va.constant,Ra=wb=Oa=0):(ac=0<Va.constant.length?Va.constant[0]:0,Ra=1<Va.constant.length?Va.constant[1]:0,wb=2<Va.constant.length?Va.constant[2]:0,Oa=3<Va.constant.length?Va.constant[3]:0)):(Db=da(Va.buffer)?M.createStream(34962,Va.buffer):M.getBuffer(Va.buffer),mb="type"in Va?ia[Va.type]:Db.dtype,Ma=!!Va.normalized,Za=Va.size|0,zd=Va.offset|0,Lb=Va.stride|0);xb=W.location;Ta=O[xb];if(1===Kb){if(Ta.buffer||
J.enableVertexAttribArray(xb),nb=Za||2,Ta.type!==mb||Ta.size!==nb||Ta.buffer!==Db||Ta.normalized!==Ma||Ta.offset!==zd||Ta.stride!==Lb)J.bindBuffer(34962,Db.buffer),J.vertexAttribPointer(xb,nb,mb,Ma,Lb,zd),Ta.type=mb,Ta.size=nb,Ta.buffer=Db,Ta.normalized=Ma,Ta.offset=zd,Ta.stride=Lb}else if(Ta.buffer&&(J.disableVertexAttribArray(xb),Ta.buffer=null),Ta.x!==ac||Ta.y!==Ra||Ta.z!==wb||Ta.w!==Oa)J.vertexAttrib4f(xb,ac,Ra,wb,Oa),Ta.x=ac,Ta.y=Ra,Ta.z=wb,Ta.w=Oa;(gc=p.atlas)&&"framebuffer"===gc._reglType&&
(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||d.commandRaise(ka,l);Bc=gc._texture;J.uniform1i(L.location,Bc.bind());wc=p.elements;bb=null;(kc=da(wc))?bb=qa.createStream(wc):(bb=qa.getElements(wc),wc&&!bb&&d.commandRaise(t,l));bb&&J.bindBuffer(34963,bb.buffer.buffer);Mc=bb?bb.primType:4;Ya=bb?bb.vertCount:-1;0<=Ya||d.commandRaise(ba,l);Ya&&(bb?J.drawElements(Mc,Ya,bb.type,0<<(bb.type-5121>>1)):J.drawArrays(Mc,0,Ya),Jc&&M.destroyStream(Nb),jc&&M.destroyStream(ib),Jb&&M.destroyStream(Db),
Bc.unbind(),kc&&qa.destroyStream(bb))}Q.dirty=!0;Aa.setVAO(null);N.view=e;g&&(u.cpuTime+=performance.now()-f)}}},"$7,color,position":function(a,d,l,u,q,m,b,f,c,h){var C,y,e,k,g,n,p,w,z,A,r,x,v,ta,I,G,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R;C=a.attributes;y=a.context;e=a.current;k=a.draw;g=a.elements;n=a.framebuffer;p=a.gl;w=a.next;z=a.shader;A=a.uniforms;r=a.vao;x=w.blend_color;v=e.blend_color;ta=w.blend_equation;I=e.blend_equation;G=w.blend_func;E=e.blend_func;B=w.colorMask;aa=e.colorMask;H=
w.depth_range;F=e.depth_range;D=w.polygonOffset_offset;ka=e.polygonOffset_offset;t=w.sample_coverage;ba=e.sample_coverage;L=w.scissor_box;fa=e.scissor_box;ua=w.stencil_func;T=e.stencil_func;W=w.stencil_opBack;S=e.stencil_opBack;O=w.stencil_opFront;M=e.stencil_opFront;N=w.viewport;Q=e.viewport;R=[1,0,0,1];return{draw:function(a){var b,d,f,z;a=n.next;a!==n.cur&&(a?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null),n.cur=a);if(e.dirty){a=w.dither;a!==e.dither&&(a?p.enable(3024):p.disable(3024),
e.dither=a);a=w.blend_enable;a!==e.blend_enable&&(a?p.enable(3042):p.disable(3042),e.blend_enable=a);a=x[0];d=x[1];f=x[2];z=x[3];if(a!==v[0]||d!==v[1]||f!==v[2]||z!==v[3])p.blendColor(a,d,f,z),v[0]=a,v[1]=d,v[2]=f,v[3]=z;a=ta[0];d=ta[1];if(a!==I[0]||d!==I[1])p.blendEquationSeparate(a,d),I[0]=a,I[1]=d;a=G[0];d=G[1];f=G[2];z=G[3];if(a!==E[0]||d!==E[1]||f!==E[2]||z!==E[3])p.blendFuncSeparate(a,d,f,z),E[0]=a,E[1]=d,E[2]=f,E[3]=z;a=w.depth_enable;a!==e.depth_enable&&(a?p.enable(2929):p.disable(2929),e.depth_enable=
a);a=w.depth_func;a!==e.depth_func&&(p.depthFunc(a),e.depth_func=a);a=H[0];d=H[1];if(a!==F[0]||d!==F[1])p.depthRange(a,d),F[0]=a,F[1]=d;a=w.depth_mask;a!==e.depth_mask&&(p.depthMask(a),e.depth_mask=a);a=B[0];d=B[1];f=B[2];z=B[3];if(a!==aa[0]||d!==aa[1]||f!==aa[2]||z!==aa[3])p.colorMask(a,d,f,z),aa[0]=a,aa[1]=d,aa[2]=f,aa[3]=z;a=w.cull_enable;a!==e.cull_enable&&(a?p.enable(2884):p.disable(2884),e.cull_enable=a);a=w.cull_face;a!==e.cull_face&&(p.cullFace(a),e.cull_face=a);a=w.frontFace;a!==e.frontFace&&
(p.frontFace(a),e.frontFace=a);a=w.lineWidth;a!==e.lineWidth&&(p.lineWidth(a),e.lineWidth=a);a=w.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?p.enable(32823):p.disable(32823),e.polygonOffset_enable=a);a=D[0];d=D[1];if(a!==ka[0]||d!==ka[1])p.polygonOffset(a,d),ka[0]=a,ka[1]=d;a=w.sample_alpha;a!==e.sample_alpha&&(a?p.enable(32926):p.disable(32926),e.sample_alpha=a);a=w.sample_enable;a!==e.sample_enable&&(a?p.enable(32928):p.disable(32928),e.sample_enable=a);a=t[0];d=t[1];if(a!==ba[0]||d!==ba[1])p.sampleCoverage(a,
d),ba[0]=a,ba[1]=d;a=w.stencil_enable;a!==e.stencil_enable&&(a?p.enable(2960):p.disable(2960),e.stencil_enable=a);a=w.stencil_mask;a!==e.stencil_mask&&(p.stencilMask(a),e.stencil_mask=a);a=ua[0];d=ua[1];f=ua[2];if(a!==T[0]||d!==T[1]||f!==T[2])p.stencilFunc(a,d,f),T[0]=a,T[1]=d,T[2]=f;a=O[0];d=O[1];f=O[2];z=O[3];if(a!==M[0]||d!==M[1]||f!==M[2]||z!==M[3])p.stencilOpSeparate(a,d,f,z),M[0]=a,M[1]=d,M[2]=f,M[3]=z;a=W[0];d=W[1];f=W[2];z=W[3];if(a!==S[0]||d!==S[1]||f!==S[2]||z!==S[3])p.stencilOpSeparate(a,
d,f,z),S[0]=a,S[1]=d,S[2]=f,S[3]=z;a=w.scissor_enable;a!==e.scissor_enable&&(a?p.enable(3089):p.disable(3089),e.scissor_enable=a);a=L[0];d=L[1];f=L[2];z=L[3];if(a!==fa[0]||d!==fa[1]||f!==fa[2]||z!==fa[3])p.scissor(a,d,f,z),fa[0]=a,fa[1]=d,fa[2]=f,fa[3]=z;a=N[0];d=N[1];f=N[2];z=N[3];if(a!==Q[0]||d!==Q[1]||f!==Q[2]||z!==Q[3])p.viewport(a,d,f,z),Q[0]=a,Q[1]=d,Q[2]=f,Q[3]=z;e.dirty=!1}if(a=e.profile)b=performance.now(),u.count++;p.useProgram(q.program);r.setVAO(null);d=h.location;f=C[d];f.buffer||p.enableVertexAttribArray(d);
if(f.type!==m.dtype||2!==f.size||f.buffer!==m||!1!==f.normalized||0!==f.offset||0!==f.stride)p.bindBuffer(34962,m.buffer),p.vertexAttribPointer(d,2,m.dtype,!1,0,0),f.type=m.dtype,f.size=2,f.buffer=m,f.normalized=!1,f.offset=0,f.stride=0;p.uniform4f(c.location,1,0,0,1);(d=k.elements)?p.bindBuffer(34963,d.buffer.buffer):r.currentVAO&&(d=g.getElements(r.currentVAO.elements))&&p.bindBuffer(34963,d.buffer.buffer);f=k.primitive;z=k.offset;d?p.drawElements(f,3,d.type,z<<(d.type-5121>>1)):p.drawArrays(f,
z,3);r.setVAO(null);a&&(u.cpuTime+=performance.now()-b)},scope:function(c,a,d){var f,g,h,p,n,w,t,v,l,x,C,q,r,P,ma,B,ga,ea;if(f=e.profile)g=performance.now(),u.count++;h=k.count;k.count=3;p=A[3];A[3]=R;n=b.buffer;b.buffer=m;w=b.divisor;b.divisor=0;t=b.normalized;b.normalized=!1;v=b.offset;b.offset=0;l=b.size;b.size=0;x=b.state;b.state=1;C=b.stride;b.stride=0;q=b.type;b.type=m.dtype;r=b.w;b.w=0;P=b.x;b.x=0;ma=b.y;b.y=0;B=b.z;b.z=0;ga=z.vert;z.vert=2;ea=z.frag;z.frag=1;a(y,c,d);f&&(u.cpuTime+=performance.now()-
g);k.count=h;A[3]=p;b.buffer=n;b.divisor=w;b.normalized=t;b.offset=v;b.size=l;b.state=x;b.stride=C;b.type=q;b.w=r;b.x=P;b.y=ma;b.z=B;z.vert=ga;z.frag=ea},batch:function(a,b){var d,z,A;d=n.next;d!==n.cur&&(d?p.bindFramebuffer(36160,d.framebuffer):p.bindFramebuffer(36160,null),n.cur=d);if(e.dirty){var y,l;d=w.dither;d!==e.dither&&(d?p.enable(3024):p.disable(3024),e.dither=d);d=w.blend_enable;d!==e.blend_enable&&(d?p.enable(3042):p.disable(3042),e.blend_enable=d);d=x[0];A=x[1];y=x[2];l=x[3];if(d!==v[0]||
A!==v[1]||y!==v[2]||l!==v[3])p.blendColor(d,A,y,l),v[0]=d,v[1]=A,v[2]=y,v[3]=l;d=ta[0];A=ta[1];if(d!==I[0]||A!==I[1])p.blendEquationSeparate(d,A),I[0]=d,I[1]=A;d=G[0];A=G[1];y=G[2];l=G[3];if(d!==E[0]||A!==E[1]||y!==E[2]||l!==E[3])p.blendFuncSeparate(d,A,y,l),E[0]=d,E[1]=A,E[2]=y,E[3]=l;d=w.depth_enable;d!==e.depth_enable&&(d?p.enable(2929):p.disable(2929),e.depth_enable=d);d=w.depth_func;d!==e.depth_func&&(p.depthFunc(d),e.depth_func=d);d=H[0];A=H[1];if(d!==F[0]||A!==F[1])p.depthRange(d,A),F[0]=d,
F[1]=A;d=w.depth_mask;d!==e.depth_mask&&(p.depthMask(d),e.depth_mask=d);d=B[0];A=B[1];y=B[2];l=B[3];if(d!==aa[0]||A!==aa[1]||y!==aa[2]||l!==aa[3])p.colorMask(d,A,y,l),aa[0]=d,aa[1]=A,aa[2]=y,aa[3]=l;d=w.cull_enable;d!==e.cull_enable&&(d?p.enable(2884):p.disable(2884),e.cull_enable=d);d=w.cull_face;d!==e.cull_face&&(p.cullFace(d),e.cull_face=d);d=w.frontFace;d!==e.frontFace&&(p.frontFace(d),e.frontFace=d);d=w.lineWidth;d!==e.lineWidth&&(p.lineWidth(d),e.lineWidth=d);d=w.polygonOffset_enable;d!==e.polygonOffset_enable&&
(d?p.enable(32823):p.disable(32823),e.polygonOffset_enable=d);d=D[0];A=D[1];if(d!==ka[0]||A!==ka[1])p.polygonOffset(d,A),ka[0]=d,ka[1]=A;d=w.sample_alpha;d!==e.sample_alpha&&(d?p.enable(32926):p.disable(32926),e.sample_alpha=d);d=w.sample_enable;d!==e.sample_enable&&(d?p.enable(32928):p.disable(32928),e.sample_enable=d);d=t[0];A=t[1];if(d!==ba[0]||A!==ba[1])p.sampleCoverage(d,A),ba[0]=d,ba[1]=A;d=w.stencil_enable;d!==e.stencil_enable&&(d?p.enable(2960):p.disable(2960),e.stencil_enable=d);d=w.stencil_mask;
d!==e.stencil_mask&&(p.stencilMask(d),e.stencil_mask=d);d=ua[0];A=ua[1];y=ua[2];if(d!==T[0]||A!==T[1]||y!==T[2])p.stencilFunc(d,A,y),T[0]=d,T[1]=A,T[2]=y;d=O[0];A=O[1];y=O[2];l=O[3];if(d!==M[0]||A!==M[1]||y!==M[2]||l!==M[3])p.stencilOpSeparate(d,A,y,l),M[0]=d,M[1]=A,M[2]=y,M[3]=l;d=W[0];A=W[1];y=W[2];l=W[3];if(d!==S[0]||A!==S[1]||y!==S[2]||l!==S[3])p.stencilOpSeparate(d,A,y,l),S[0]=d,S[1]=A,S[2]=y,S[3]=l;d=w.scissor_enable;d!==e.scissor_enable&&(d?p.enable(3089):p.disable(3089),e.scissor_enable=d);
d=L[0];A=L[1];y=L[2];l=L[3];if(d!==fa[0]||A!==fa[1]||y!==fa[2]||l!==fa[3])p.scissor(d,A,y,l),fa[0]=d,fa[1]=A,fa[2]=y,fa[3]=l;d=N[0];A=N[1];y=N[2];l=N[3];if(d!==Q[0]||A!==Q[1]||y!==Q[2]||l!==Q[3])p.viewport(d,A,y,l),Q[0]=d,Q[1]=A,Q[2]=y,Q[3]=l;e.dirty=!1}if(d=e.profile)z=performance.now(),u.count+=b;p.useProgram(f.program);var q;r.setVAO(null);A=h.location;y=C[A];y.buffer||p.enableVertexAttribArray(A);if(y.type!==m.dtype||2!==y.size||y.buffer!==m||!1!==y.normalized||0!==y.offset||0!==y.stride)p.bindBuffer(34962,
m.buffer),p.vertexAttribPointer(A,2,m.dtype,!1,0,0),y.type=m.dtype,y.size=2,y.buffer=m,y.normalized=!1,y.offset=0,y.stride=0;p.uniform4f(c.location,1,0,0,1);(y=k.elements)?p.bindBuffer(34963,y.buffer.buffer):r.currentVAO&&(y=g.getElements(r.currentVAO.elements))&&p.bindBuffer(34963,y.buffer.buffer);l=k.primitive;q=k.offset;for(A=0;A<b;++A)y?p.drawElements(l,3,y.type,q<<(y.type-5121>>1)):p.drawArrays(l,q,3);r.setVAO(null);d&&(u.cpuTime+=performance.now()-z)}}},"$19,angle,color,offset,position":function(a,
d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,r,x,v,ta){var I,G,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa;I=a.attributes;G=a.context;E=a.current;B=a.draw;aa=a.elements;H=a.framebuffer;F=a.gl;D=a.isArrayLike;ka=a.next;t=a.shader;ba=a.uniforms;L=a.vao;fa=ka.blend_color;ua=E.blend_color;T=ka.blend_equation;W=E.blend_equation;S=ka.blend_func;O=E.blend_func;M=ka.colorMask;N=E.colorMask;Q=ka.depth_range;R=E.depth_range;qa=ka.polygonOffset_offset;na=E.polygonOffset_offset;
J=ka.sample_coverage;K=E.sample_coverage;da=ka.scissor_box;U=E.scissor_box;la=ka.stencil_func;ha=E.stencil_func;Aa=ka.stencil_opBack;xa=E.stencil_opBack;ca=ka.stencil_opFront;Da=E.stencil_opFront;ja=ka.viewport;oa=E.viewport;return{draw:function(a){var e,k,g,p;e=H.next;e!==H.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),H.cur=e);if(E.dirty){var n;e=ka.dither;e!==E.dither&&(e?F.enable(3024):F.disable(3024),E.dither=e);e=ka.blend_enable;e!==E.blend_enable&&(e?F.enable(3042):
F.disable(3042),E.blend_enable=e);e=fa[0];g=fa[1];p=fa[2];n=fa[3];if(e!==ua[0]||g!==ua[1]||p!==ua[2]||n!==ua[3])F.blendColor(e,g,p,n),ua[0]=e,ua[1]=g,ua[2]=p,ua[3]=n;e=T[0];g=T[1];if(e!==W[0]||g!==W[1])F.blendEquationSeparate(e,g),W[0]=e,W[1]=g;e=S[0];g=S[1];p=S[2];n=S[3];if(e!==O[0]||g!==O[1]||p!==O[2]||n!==O[3])F.blendFuncSeparate(e,g,p,n),O[0]=e,O[1]=g,O[2]=p,O[3]=n;e=ka.depth_func;e!==E.depth_func&&(F.depthFunc(e),E.depth_func=e);e=Q[0];g=Q[1];if(e!==R[0]||g!==R[1])F.depthRange(e,g),R[0]=e,R[1]=
g;e=ka.depth_mask;e!==E.depth_mask&&(F.depthMask(e),E.depth_mask=e);e=M[0];g=M[1];p=M[2];n=M[3];if(e!==N[0]||g!==N[1]||p!==N[2]||n!==N[3])F.colorMask(e,g,p,n),N[0]=e,N[1]=g,N[2]=p,N[3]=n;e=ka.cull_enable;e!==E.cull_enable&&(e?F.enable(2884):F.disable(2884),E.cull_enable=e);e=ka.cull_face;e!==E.cull_face&&(F.cullFace(e),E.cull_face=e);e=ka.frontFace;e!==E.frontFace&&(F.frontFace(e),E.frontFace=e);e=ka.lineWidth;e!==E.lineWidth&&(F.lineWidth(e),E.lineWidth=e);e=ka.polygonOffset_enable;e!==E.polygonOffset_enable&&
(e?F.enable(32823):F.disable(32823),E.polygonOffset_enable=e);e=qa[0];g=qa[1];if(e!==na[0]||g!==na[1])F.polygonOffset(e,g),na[0]=e,na[1]=g;e=ka.sample_alpha;e!==E.sample_alpha&&(e?F.enable(32926):F.disable(32926),E.sample_alpha=e);e=ka.sample_enable;e!==E.sample_enable&&(e?F.enable(32928):F.disable(32928),E.sample_enable=e);e=J[0];g=J[1];if(e!==K[0]||g!==K[1])F.sampleCoverage(e,g),K[0]=e,K[1]=g;e=ka.stencil_enable;e!==E.stencil_enable&&(e?F.enable(2960):F.disable(2960),E.stencil_enable=e);e=ka.stencil_mask;
e!==E.stencil_mask&&(F.stencilMask(e),E.stencil_mask=e);e=la[0];g=la[1];p=la[2];if(e!==ha[0]||g!==ha[1]||p!==ha[2])F.stencilFunc(e,g,p),ha[0]=e,ha[1]=g,ha[2]=p;e=ca[0];g=ca[1];p=ca[2];n=ca[3];if(e!==Da[0]||g!==Da[1]||p!==Da[2]||n!==Da[3])F.stencilOpSeparate(e,g,p,n),Da[0]=e,Da[1]=g,Da[2]=p,Da[3]=n;e=Aa[0];g=Aa[1];p=Aa[2];n=Aa[3];if(e!==xa[0]||g!==xa[1]||p!==xa[2]||n!==xa[3])F.stencilOpSeparate(e,g,p,n),xa[0]=e,xa[1]=g,xa[2]=p,xa[3]=n;e=ka.scissor_enable;e!==E.scissor_enable&&(e?F.enable(3089):F.disable(3089),
E.scissor_enable=e);e=da[0];g=da[1];p=da[2];n=da[3];if(e!==U[0]||g!==U[1]||p!==U[2]||n!==U[3])F.scissor(e,g,p,n),U[0]=e,U[1]=g,U[2]=p,U[3]=n;e=ja[0];g=ja[1];p=ja[2];n=ja[3];if(e!==oa[0]||g!==oa[1]||p!==oa[2]||n!==oa[3])F.viewport(e,g,p,n),oa[0]=e,oa[1]=g,oa[2]=p,oa[3]=n}F.disable(2929);E.depth_enable=!1;if(e=E.profile)k=performance.now(),u.count++;F.useProgram(q.program);L.setVAO(null);g=ta.location;p=I[g];p.buffer||F.enableVertexAttribArray(g);if(p.type!==m.dtype||2!==p.size||p.buffer!==m||!1!==
p.normalized||0!==p.offset||0!==p.stride)F.bindBuffer(34962,m.buffer),F.vertexAttribPointer(g,2,m.dtype,!1,0,0),p.type=m.dtype,p.size=2,p.buffer=m,p.normalized=!1,p.offset=0,p.stride=0;g=b.call(this,G,a,0);"number"!==typeof g&&d.commandRaise(f,l);F.uniform1f(r.location,g);g=a.offset;D(g)&&2===g.length||d.commandRaise(c,l);F.uniform2f(v.location,g[0],g[1]);a=h.call(this,G,a,0);D(a)&&4===a.length||d.commandRaise(C,l);F.uniform4f(x.location,a[0],a[1],a[2],a[3]);(a=B.elements)?F.bindBuffer(34963,a.buffer.buffer):
L.currentVAO&&(a=aa.getElements(L.currentVAO.elements))&&F.bindBuffer(34963,a.buffer.buffer);g=B.primitive;p=B.offset;a?F.drawElements(g,3,a.type,p<<(a.type-5121>>1)):F.drawArrays(g,p,3);E.dirty=!0;L.setVAO(null);e&&(u.cpuTime+=performance.now()-k)},scope:function(c,a,b){var d,g,f,h,p,n,w,z,A,l,v,x,C,q,r,ma,P,I,D,F,H;d=ka.depth_enable;ka.depth_enable=!1;if(g=E.profile)f=performance.now(),u.count++;h=B.count;B.count=3;p=y.call(this,G,c,b);n=ba[3];ba[3]=p;w=e.call(this,G,c,b);p=ba[5];ba[5]=w;z=c.offset;
w=ba[4];ba[4]=z;z=k.buffer;k.buffer=m;A=k.divisor;k.divisor=0;l=k.normalized;k.normalized=!1;v=k.offset;k.offset=0;x=k.size;k.size=0;C=k.state;k.state=1;q=k.stride;k.stride=0;r=k.type;k.type=m.dtype;ma=k.w;k.w=0;P=k.x;k.x=0;I=k.y;k.y=0;D=k.z;k.z=0;F=t.vert;t.vert=2;H=t.frag;t.frag=1;E.dirty=!0;a(G,c,b);ka.depth_enable=d;g&&(u.cpuTime+=performance.now()-f);B.count=h;ba[3]=n;ba[5]=p;ba[4]=w;k.buffer=z;k.divisor=A;k.normalized=l;k.offset=v;k.size=x;k.state=C;k.stride=q;k.type=r;k.w=ma;k.x=P;k.y=I;k.z=
D;t.vert=F;t.frag=H;E.dirty=!0},batch:function(c,a){var e,b,k,f;e=H.next;e!==H.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),H.cur=e);if(E.dirty){var h,y,t;e=ka.dither;e!==E.dither&&(e?F.enable(3024):F.disable(3024),E.dither=e);e=ka.blend_enable;e!==E.blend_enable&&(e?F.enable(3042):F.disable(3042),E.blend_enable=e);e=fa[0];h=fa[1];y=fa[2];t=fa[3];if(e!==ua[0]||h!==ua[1]||y!==ua[2]||t!==ua[3])F.blendColor(e,h,y,t),ua[0]=e,ua[1]=h,ua[2]=y,ua[3]=t;e=T[0];h=T[1];if(e!==
W[0]||h!==W[1])F.blendEquationSeparate(e,h),W[0]=e,W[1]=h;e=S[0];h=S[1];y=S[2];t=S[3];if(e!==O[0]||h!==O[1]||y!==O[2]||t!==O[3])F.blendFuncSeparate(e,h,y,t),O[0]=e,O[1]=h,O[2]=y,O[3]=t;e=ka.depth_func;e!==E.depth_func&&(F.depthFunc(e),E.depth_func=e);e=Q[0];h=Q[1];if(e!==R[0]||h!==R[1])F.depthRange(e,h),R[0]=e,R[1]=h;e=ka.depth_mask;e!==E.depth_mask&&(F.depthMask(e),E.depth_mask=e);e=M[0];h=M[1];y=M[2];t=M[3];if(e!==N[0]||h!==N[1]||y!==N[2]||t!==N[3])F.colorMask(e,h,y,t),N[0]=e,N[1]=h,N[2]=y,N[3]=
t;e=ka.cull_enable;e!==E.cull_enable&&(e?F.enable(2884):F.disable(2884),E.cull_enable=e);e=ka.cull_face;e!==E.cull_face&&(F.cullFace(e),E.cull_face=e);e=ka.frontFace;e!==E.frontFace&&(F.frontFace(e),E.frontFace=e);e=ka.lineWidth;e!==E.lineWidth&&(F.lineWidth(e),E.lineWidth=e);e=ka.polygonOffset_enable;e!==E.polygonOffset_enable&&(e?F.enable(32823):F.disable(32823),E.polygonOffset_enable=e);e=qa[0];h=qa[1];if(e!==na[0]||h!==na[1])F.polygonOffset(e,h),na[0]=e,na[1]=h;e=ka.sample_alpha;e!==E.sample_alpha&&
(e?F.enable(32926):F.disable(32926),E.sample_alpha=e);e=ka.sample_enable;e!==E.sample_enable&&(e?F.enable(32928):F.disable(32928),E.sample_enable=e);e=J[0];h=J[1];if(e!==K[0]||h!==K[1])F.sampleCoverage(e,h),K[0]=e,K[1]=h;e=ka.stencil_enable;e!==E.stencil_enable&&(e?F.enable(2960):F.disable(2960),E.stencil_enable=e);e=ka.stencil_mask;e!==E.stencil_mask&&(F.stencilMask(e),E.stencil_mask=e);e=la[0];h=la[1];y=la[2];if(e!==ha[0]||h!==ha[1]||y!==ha[2])F.stencilFunc(e,h,y),ha[0]=e,ha[1]=h,ha[2]=y;e=ca[0];
h=ca[1];y=ca[2];t=ca[3];if(e!==Da[0]||h!==Da[1]||y!==Da[2]||t!==Da[3])F.stencilOpSeparate(e,h,y,t),Da[0]=e,Da[1]=h,Da[2]=y,Da[3]=t;e=Aa[0];h=Aa[1];y=Aa[2];t=Aa[3];if(e!==xa[0]||h!==xa[1]||y!==xa[2]||t!==xa[3])F.stencilOpSeparate(e,h,y,t),xa[0]=e,xa[1]=h,xa[2]=y,xa[3]=t;e=ka.scissor_enable;e!==E.scissor_enable&&(e?F.enable(3089):F.disable(3089),E.scissor_enable=e);e=da[0];h=da[1];y=da[2];t=da[3];if(e!==U[0]||h!==U[1]||y!==U[2]||t!==U[3])F.scissor(e,h,y,t),U[0]=e,U[1]=h,U[2]=y,U[3]=t;e=ja[0];h=ja[1];
y=ja[2];t=ja[3];if(e!==oa[0]||h!==oa[1]||y!==oa[2]||t!==oa[3])F.viewport(e,h,y,t),oa[0]=e,oa[1]=h,oa[2]=y,oa[3]=t}F.disable(2929);E.depth_enable=!1;if(e=E.profile)b=performance.now(),u.count+=a;F.useProgram(g.program);L.setVAO(null);h=ta.location;y=I[h];y.buffer||F.enableVertexAttribArray(h);if(y.type!==m.dtype||2!==y.size||y.buffer!==m||!1!==y.normalized||0!==y.offset||0!==y.stride)F.bindBuffer(34962,m.buffer),F.vertexAttribPointer(h,2,m.dtype,!1,0,0),y.type=m.dtype,y.size=2,y.buffer=m,y.normalized=
!1,y.offset=0,y.stride=0;k=n.call(this,G,f,k);"number"!==typeof k&&d.commandRaise(p,l);F.uniform1f(r.location,k);(h=B.elements)?F.bindBuffer(34963,h.buffer.buffer):L.currentVAO&&(h=aa.getElements(L.currentVAO.elements))&&F.bindBuffer(34963,h.buffer.buffer);y=B.primitive;t=B.offset;for(k=0;k<a;++k){f=c[k];var C,q,ba,Z,V,ya,Ha,pa,za;C=f.offset;D(C)&&2===C.length||d.commandRaise(w,l);q=C[0];C=C[1];k&&ba===q&&Z===C||(ba=q,Z=C,F.uniform2f(v.location,q,C));V=z.call(this,G,f,k);D(V)&&4===V.length||d.commandRaise(A,
l);f=V[0];q=V[1];C=V[2];V=V[3];k&&ya===f&&Ha===q&&pa===C&&za===V||(ya=f,Ha=q,pa=C,za=V,F.uniform4f(x.location,f,q,C,V));h?F.drawElements(y,3,h.type,t<<(h.type-5121>>1)):F.drawArrays(y,t,3)}E.dirty=!0;L.setVAO(null);e&&(u.cpuTime+=performance.now()-b)}}},"$23,model,position,projection,view":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,r,x,v,ta,I,G,E,B){var aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa,Hb,Ua,ga,ea,sa,wa,Ea;aa=a.attributes;H=a.context;F=
a.current;D=a.draw;ka=a.framebuffer;t=a.gl;ba=a.isArrayLike;L=a.next;fa=a.shader;ua=a.uniforms;T=a.vao;W=L.blend_color;S=F.blend_color;O=L.blend_equation;M=F.blend_equation;N=L.blend_func;Q=F.blend_func;R=L.colorMask;qa=F.colorMask;na=L.depth_range;J=F.depth_range;K=L.polygonOffset_offset;da=F.polygonOffset_offset;U=L.sample_coverage;la=F.sample_coverage;ha=L.scissor_box;Aa=F.scissor_box;xa=L.stencil_func;ca=F.stencil_func;Da=L.stencil_opBack;ja=F.stencil_opBack;oa=L.stencil_opFront;Ba=F.stencil_opFront;
Qa=L.viewport;Fa=F.viewport;Hb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ua=new Float32Array(16);ga=new Float32Array(16);ea=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];sa=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);wa=new Float32Array(16);Ea=new Float32Array(16);return{draw:function(a){var e,k,g,p;e=ka.next;e!==ka.cur&&(e?t.bindFramebuffer(36160,e.framebuffer):t.bindFramebuffer(36160,null),ka.cur=e);if(F.dirty){var n;e=L.dither;e!==F.dither&&(e?t.enable(3024):t.disable(3024),F.dither=e);e=
L.blend_enable;e!==F.blend_enable&&(e?t.enable(3042):t.disable(3042),F.blend_enable=e);e=W[0];g=W[1];p=W[2];n=W[3];if(e!==S[0]||g!==S[1]||p!==S[2]||n!==S[3])t.blendColor(e,g,p,n),S[0]=e,S[1]=g,S[2]=p,S[3]=n;e=O[0];g=O[1];if(e!==M[0]||g!==M[1])t.blendEquationSeparate(e,g),M[0]=e,M[1]=g;e=N[0];g=N[1];p=N[2];n=N[3];if(e!==Q[0]||g!==Q[1]||p!==Q[2]||n!==Q[3])t.blendFuncSeparate(e,g,p,n),Q[0]=e,Q[1]=g,Q[2]=p,Q[3]=n;e=L.depth_enable;e!==F.depth_enable&&(e?t.enable(2929):t.disable(2929),F.depth_enable=e);
e=L.depth_func;e!==F.depth_func&&(t.depthFunc(e),F.depth_func=e);e=na[0];g=na[1];if(e!==J[0]||g!==J[1])t.depthRange(e,g),J[0]=e,J[1]=g;e=L.depth_mask;e!==F.depth_mask&&(t.depthMask(e),F.depth_mask=e);e=R[0];g=R[1];p=R[2];n=R[3];if(e!==qa[0]||g!==qa[1]||p!==qa[2]||n!==qa[3])t.colorMask(e,g,p,n),qa[0]=e,qa[1]=g,qa[2]=p,qa[3]=n;e=L.cull_enable;e!==F.cull_enable&&(e?t.enable(2884):t.disable(2884),F.cull_enable=e);e=L.cull_face;e!==F.cull_face&&(t.cullFace(e),F.cull_face=e);e=L.frontFace;e!==F.frontFace&&
(t.frontFace(e),F.frontFace=e);e=L.lineWidth;e!==F.lineWidth&&(t.lineWidth(e),F.lineWidth=e);e=L.polygonOffset_enable;e!==F.polygonOffset_enable&&(e?t.enable(32823):t.disable(32823),F.polygonOffset_enable=e);e=K[0];g=K[1];if(e!==da[0]||g!==da[1])t.polygonOffset(e,g),da[0]=e,da[1]=g;e=L.sample_alpha;e!==F.sample_alpha&&(e?t.enable(32926):t.disable(32926),F.sample_alpha=e);e=L.sample_enable;e!==F.sample_enable&&(e?t.enable(32928):t.disable(32928),F.sample_enable=e);e=U[0];g=U[1];if(e!==la[0]||g!==la[1])t.sampleCoverage(e,
g),la[0]=e,la[1]=g;e=L.stencil_enable;e!==F.stencil_enable&&(e?t.enable(2960):t.disable(2960),F.stencil_enable=e);e=L.stencil_mask;e!==F.stencil_mask&&(t.stencilMask(e),F.stencil_mask=e);e=xa[0];g=xa[1];p=xa[2];if(e!==ca[0]||g!==ca[1]||p!==ca[2])t.stencilFunc(e,g,p),ca[0]=e,ca[1]=g,ca[2]=p;e=oa[0];g=oa[1];p=oa[2];n=oa[3];if(e!==Ba[0]||g!==Ba[1]||p!==Ba[2]||n!==Ba[3])t.stencilOpSeparate(e,g,p,n),Ba[0]=e,Ba[1]=g,Ba[2]=p,Ba[3]=n;e=Da[0];g=Da[1];p=Da[2];n=Da[3];if(e!==ja[0]||g!==ja[1]||p!==ja[2]||n!==
ja[3])t.stencilOpSeparate(e,g,p,n),ja[0]=e,ja[1]=g,ja[2]=p,ja[3]=n;e=L.scissor_enable;e!==F.scissor_enable&&(e?t.enable(3089):t.disable(3089),F.scissor_enable=e);e=ha[0];g=ha[1];p=ha[2];n=ha[3];if(e!==Aa[0]||g!==Aa[1]||p!==Aa[2]||n!==Aa[3])t.scissor(e,g,p,n),Aa[0]=e,Aa[1]=g,Aa[2]=p,Aa[3]=n;e=Qa[0];g=Qa[1];p=Qa[2];n=Qa[3];if(e!==Fa[0]||g!==Fa[1]||p!==Fa[2]||n!==Fa[3])t.viewport(e,g,p,n),Fa[0]=e,Fa[1]=g,Fa[2]=p,Fa[3]=n;F.dirty=!1}if(e=F.profile)k=performance.now(),u.count++;t.useProgram(q.program);
T.setVAO(null);g=G.location;p=aa[g];p.buffer||t.enableVertexAttribArray(g);if(p.type!==m.dtype||3!==p.size||p.buffer!==m||!1!==p.normalized||0!==p.offset||0!==p.stride)t.bindBuffer(34962,m.buffer),t.vertexAttribPointer(g,3,m.dtype,!1,0,0),p.type=m.dtype,p.size=3,p.buffer=m,p.normalized=!1,p.offset=0,p.stride=0;t.uniformMatrix4fv(I.location,!1,Hb);g=b.call(this,H,a,0);ba(g)&&16===g.length||d.commandRaise(f,l);t.uniformMatrix4fv(B.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Ua[0]=g[0],
Ua[1]=g[1],Ua[2]=g[2],Ua[3]=g[3],Ua[4]=g[4],Ua[5]=g[5],Ua[6]=g[6],Ua[7]=g[7],Ua[8]=g[8],Ua[9]=g[9],Ua[10]=g[10],Ua[11]=g[11],Ua[12]=g[12],Ua[13]=g[13],Ua[14]=g[14],Ua[15]=g[15],Ua));a=c.call(this,H,a,0);ba(a)&&16===a.length||d.commandRaise(h,l);t.uniformMatrix4fv(E.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(ga[0]=a[0],ga[1]=a[1],ga[2]=a[2],ga[3]=a[3],ga[4]=a[4],ga[5]=a[5],ga[6]=a[6],ga[7]=a[7],ga[8]=a[8],ga[9]=a[9],ga[10]=a[10],ga[11]=a[11],ga[12]=a[12],ga[13]=a[13],ga[14]=a[14],ga[15]=
a[15],ga));C&&t.bindBuffer(34963,C.buffer.buffer);a=C.primType;g=C.vertCount-0;0<=g||d.commandRaise(y,l);g&&(t.drawElements(a,g,C.type,0<<(C.type-5121>>1)),T.setVAO(null),e&&(u.cpuTime+=performance.now()-k))},scope:function(c,a,b){var f,h,w,z,y,A,t,v,x,C,q,r,ma,B,ga,I,E,sa,ca,J,K,L,U;if(f=F.profile)h=performance.now(),u.count++;w=D.elements;D.elements=e;z=D.offset;D.offset=0;y=e.vertCount-0;0<=y||d.commandRaise(k,l);A=D.count;D.count=y;t=e.primType;y=D.primitive;D.primitive=t;t=ua[3];ua[3]=ea;v=g.call(this,
H,c,b);x=ua[5];ua[5]=v;C=n.call(this,H,c,b);v=ua[4];ua[4]=C;C=p.buffer;p.buffer=m;q=p.divisor;p.divisor=0;r=p.normalized;p.normalized=!1;ma=p.offset;p.offset=0;B=p.size;p.size=0;ga=p.state;p.state=1;I=p.stride;p.stride=0;E=p.type;p.type=m.dtype;sa=p.w;p.w=0;ca=p.x;p.x=0;J=p.y;p.y=0;K=p.z;p.z=0;L=fa.vert;fa.vert=2;U=fa.frag;fa.frag=1;a(H,c,b);f&&(u.cpuTime+=performance.now()-h);D.elements=w;D.offset=z;D.count=A;D.primitive=y;ua[3]=t;ua[5]=x;ua[4]=v;p.buffer=C;p.divisor=q;p.normalized=r;p.offset=ma;
p.size=B;p.state=ga;p.stride=I;p.type=E;p.w=sa;p.x=ca;p.y=J;p.z=K;fa.vert=L;fa.frag=U},batch:function(c,e){var a,b,k;a=ka.next;a!==ka.cur&&(a?t.bindFramebuffer(36160,a.framebuffer):t.bindFramebuffer(36160,null),ka.cur=a);if(F.dirty){var g,f,h;a=L.dither;a!==F.dither&&(a?t.enable(3024):t.disable(3024),F.dither=a);a=L.blend_enable;a!==F.blend_enable&&(a?t.enable(3042):t.disable(3042),F.blend_enable=a);a=W[0];g=W[1];f=W[2];h=W[3];if(a!==S[0]||g!==S[1]||f!==S[2]||h!==S[3])t.blendColor(a,g,f,h),S[0]=a,
S[1]=g,S[2]=f,S[3]=h;a=O[0];g=O[1];if(a!==M[0]||g!==M[1])t.blendEquationSeparate(a,g),M[0]=a,M[1]=g;a=N[0];g=N[1];f=N[2];h=N[3];if(a!==Q[0]||g!==Q[1]||f!==Q[2]||h!==Q[3])t.blendFuncSeparate(a,g,f,h),Q[0]=a,Q[1]=g,Q[2]=f,Q[3]=h;a=L.depth_enable;a!==F.depth_enable&&(a?t.enable(2929):t.disable(2929),F.depth_enable=a);a=L.depth_func;a!==F.depth_func&&(t.depthFunc(a),F.depth_func=a);a=na[0];g=na[1];if(a!==J[0]||g!==J[1])t.depthRange(a,g),J[0]=a,J[1]=g;a=L.depth_mask;a!==F.depth_mask&&(t.depthMask(a),F.depth_mask=
a);a=R[0];g=R[1];f=R[2];h=R[3];if(a!==qa[0]||g!==qa[1]||f!==qa[2]||h!==qa[3])t.colorMask(a,g,f,h),qa[0]=a,qa[1]=g,qa[2]=f,qa[3]=h;a=L.cull_enable;a!==F.cull_enable&&(a?t.enable(2884):t.disable(2884),F.cull_enable=a);a=L.cull_face;a!==F.cull_face&&(t.cullFace(a),F.cull_face=a);a=L.frontFace;a!==F.frontFace&&(t.frontFace(a),F.frontFace=a);a=L.lineWidth;a!==F.lineWidth&&(t.lineWidth(a),F.lineWidth=a);a=L.polygonOffset_enable;a!==F.polygonOffset_enable&&(a?t.enable(32823):t.disable(32823),F.polygonOffset_enable=
a);a=K[0];g=K[1];if(a!==da[0]||g!==da[1])t.polygonOffset(a,g),da[0]=a,da[1]=g;a=L.sample_alpha;a!==F.sample_alpha&&(a?t.enable(32926):t.disable(32926),F.sample_alpha=a);a=L.sample_enable;a!==F.sample_enable&&(a?t.enable(32928):t.disable(32928),F.sample_enable=a);a=U[0];g=U[1];if(a!==la[0]||g!==la[1])t.sampleCoverage(a,g),la[0]=a,la[1]=g;a=L.stencil_enable;a!==F.stencil_enable&&(a?t.enable(2960):t.disable(2960),F.stencil_enable=a);a=L.stencil_mask;a!==F.stencil_mask&&(t.stencilMask(a),F.stencil_mask=
a);a=xa[0];g=xa[1];f=xa[2];if(a!==ca[0]||g!==ca[1]||f!==ca[2])t.stencilFunc(a,g,f),ca[0]=a,ca[1]=g,ca[2]=f;a=oa[0];g=oa[1];f=oa[2];h=oa[3];if(a!==Ba[0]||g!==Ba[1]||f!==Ba[2]||h!==Ba[3])t.stencilOpSeparate(a,g,f,h),Ba[0]=a,Ba[1]=g,Ba[2]=f,Ba[3]=h;a=Da[0];g=Da[1];f=Da[2];h=Da[3];if(a!==ja[0]||g!==ja[1]||f!==ja[2]||h!==ja[3])t.stencilOpSeparate(a,g,f,h),ja[0]=a,ja[1]=g,ja[2]=f,ja[3]=h;a=L.scissor_enable;a!==F.scissor_enable&&(a?t.enable(3089):t.disable(3089),F.scissor_enable=a);a=ha[0];g=ha[1];f=ha[2];
h=ha[3];if(a!==Aa[0]||g!==Aa[1]||f!==Aa[2]||h!==Aa[3])t.scissor(a,g,f,h),Aa[0]=a,Aa[1]=g,Aa[2]=f,Aa[3]=h;a=Qa[0];g=Qa[1];f=Qa[2];h=Qa[3];if(a!==Fa[0]||g!==Fa[1]||f!==Fa[2]||h!==Fa[3])t.viewport(a,g,f,h),Fa[0]=a,Fa[1]=g,Fa[2]=f,Fa[3]=h;F.dirty=!1}if(a=F.profile)b=performance.now(),u.count+=e;t.useProgram(w.program);T.setVAO(null);g=G.location;f=aa[g];f.buffer||t.enableVertexAttribArray(g);if(f.type!==m.dtype||3!==f.size||f.buffer!==m||!1!==f.normalized||0!==f.offset||0!==f.stride)t.bindBuffer(34962,
m.buffer),t.vertexAttribPointer(g,3,m.dtype,!1,0,0),f.type=m.dtype,f.size=3,f.buffer=m,f.normalized=!1,f.offset=0,f.stride=0;t.uniformMatrix4fv(I.location,!1,sa);g=z.call(this,H,void 0,k);ba(g)&&16===g.length||d.commandRaise(A,l);t.uniformMatrix4fv(B.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(wa[0]=g[0],wa[1]=g[1],wa[2]=g[2],wa[3]=g[3],wa[4]=g[4],wa[5]=g[5],wa[6]=g[6],wa[7]=g[7],wa[8]=g[8],wa[9]=g[9],wa[10]=g[10],wa[11]=g[11],wa[12]=g[12],wa[13]=g[13],wa[14]=g[14],wa[15]=g[15],wa));
k=r.call(this,H,void 0,k);ba(k)&&16===k.length||d.commandRaise(x,l);t.uniformMatrix4fv(E.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ea[0]=k[0],Ea[1]=k[1],Ea[2]=k[2],Ea[3]=k[3],Ea[4]=k[4],Ea[5]=k[5],Ea[6]=k[6],Ea[7]=k[7],Ea[8]=k[8],Ea[9]=k[9],Ea[10]=k[10],Ea[11]=k[11],Ea[12]=k[12],Ea[13]=k[13],Ea[14]=k[14],Ea[15]=k[15],Ea));v&&t.bindBuffer(34963,v.buffer.buffer);g=v.primType;f=v.vertCount-0;0<=f||d.commandRaise(ta,l);for(k=0;k<e;++k)f&&t.drawElements(g,f,v.type,0<<(v.type-5121>>1));
T.setVAO(null);a&&(u.cpuTime+=performance.now()-b)}}},$20:function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,r){var x,v,G,I,ra,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa;x=a.context;v=a.current;G=a.framebuffer;I=a.gl;ra=a.next;E=a.shader;B=a.uniforms;aa=a.vao;H=ra.blend_color;F=v.blend_color;D=ra.blend_equation;ka=v.blend_equation;t=ra.blend_func;ba=v.blend_func;L=ra.colorMask;fa=v.colorMask;ua=ra.depth_range;T=v.depth_range;W=ra.polygonOffset_offset;S=v.polygonOffset_offset;
O=ra.sample_coverage;M=v.sample_coverage;N=ra.scissor_box;Q=v.scissor_box;R=ra.stencil_func;qa=v.stencil_func;na=ra.stencil_opBack;J=v.stencil_opBack;K=ra.stencil_opFront;da=v.stencil_opFront;U=ra.viewport;la=v.viewport;ha={};Aa={};return{draw:function(a){var e,k,d,g,p,n,w,z,y,A,C,r,ma;e=x.center;k=x.distance;d=x.eye;g=x.phi;p=x.projection;n=b.call(this,x,a,0);w=x.theta;z=x.up;y=x.view;x.center=q;x.distance=2.302585092994046;x.eye=m;x.phi=0;x.projection=n;x.theta=0;x.up=f;x.view=c;n=G.next;n!==G.cur&&
(n?I.bindFramebuffer(36160,n.framebuffer):I.bindFramebuffer(36160,null),G.cur=n);if(v.dirty){n=ra.dither;n!==v.dither&&(n?I.enable(3024):I.disable(3024),v.dither=n);n=ra.blend_enable;n!==v.blend_enable&&(n?I.enable(3042):I.disable(3042),v.blend_enable=n);n=H[0];C=H[1];r=H[2];ma=H[3];if(n!==F[0]||C!==F[1]||r!==F[2]||ma!==F[3])I.blendColor(n,C,r,ma),F[0]=n,F[1]=C,F[2]=r,F[3]=ma;n=D[0];C=D[1];if(n!==ka[0]||C!==ka[1])I.blendEquationSeparate(n,C),ka[0]=n,ka[1]=C;n=t[0];C=t[1];r=t[2];ma=t[3];if(n!==ba[0]||
C!==ba[1]||r!==ba[2]||ma!==ba[3])I.blendFuncSeparate(n,C,r,ma),ba[0]=n,ba[1]=C,ba[2]=r,ba[3]=ma;n=ra.depth_enable;n!==v.depth_enable&&(n?I.enable(2929):I.disable(2929),v.depth_enable=n);n=ra.depth_func;n!==v.depth_func&&(I.depthFunc(n),v.depth_func=n);n=ua[0];C=ua[1];if(n!==T[0]||C!==T[1])I.depthRange(n,C),T[0]=n,T[1]=C;n=ra.depth_mask;n!==v.depth_mask&&(I.depthMask(n),v.depth_mask=n);n=L[0];C=L[1];r=L[2];ma=L[3];if(n!==fa[0]||C!==fa[1]||r!==fa[2]||ma!==fa[3])I.colorMask(n,C,r,ma),fa[0]=n,fa[1]=C,
fa[2]=r,fa[3]=ma;n=ra.cull_enable;n!==v.cull_enable&&(n?I.enable(2884):I.disable(2884),v.cull_enable=n);n=ra.cull_face;n!==v.cull_face&&(I.cullFace(n),v.cull_face=n);n=ra.frontFace;n!==v.frontFace&&(I.frontFace(n),v.frontFace=n);n=ra.lineWidth;n!==v.lineWidth&&(I.lineWidth(n),v.lineWidth=n);n=ra.polygonOffset_enable;n!==v.polygonOffset_enable&&(n?I.enable(32823):I.disable(32823),v.polygonOffset_enable=n);n=W[0];C=W[1];if(n!==S[0]||C!==S[1])I.polygonOffset(n,C),S[0]=n,S[1]=C;n=ra.sample_alpha;n!==
v.sample_alpha&&(n?I.enable(32926):I.disable(32926),v.sample_alpha=n);n=ra.sample_enable;n!==v.sample_enable&&(n?I.enable(32928):I.disable(32928),v.sample_enable=n);n=O[0];C=O[1];if(n!==M[0]||C!==M[1])I.sampleCoverage(n,C),M[0]=n,M[1]=C;n=ra.stencil_enable;n!==v.stencil_enable&&(n?I.enable(2960):I.disable(2960),v.stencil_enable=n);n=ra.stencil_mask;n!==v.stencil_mask&&(I.stencilMask(n),v.stencil_mask=n);n=R[0];C=R[1];r=R[2];if(n!==qa[0]||C!==qa[1]||r!==qa[2])I.stencilFunc(n,C,r),qa[0]=n,qa[1]=C,qa[2]=
r;n=K[0];C=K[1];r=K[2];ma=K[3];if(n!==da[0]||C!==da[1]||r!==da[2]||ma!==da[3])I.stencilOpSeparate(n,C,r,ma),da[0]=n,da[1]=C,da[2]=r,da[3]=ma;n=na[0];C=na[1];r=na[2];ma=na[3];if(n!==J[0]||C!==J[1]||r!==J[2]||ma!==J[3])I.stencilOpSeparate(n,C,r,ma),J[0]=n,J[1]=C,J[2]=r,J[3]=ma;n=ra.scissor_enable;n!==v.scissor_enable&&(n?I.enable(3089):I.disable(3089),v.scissor_enable=n);n=N[0];C=N[1];r=N[2];ma=N[3];if(n!==Q[0]||C!==Q[1]||r!==Q[2]||ma!==Q[3])I.scissor(n,C,r,ma),Q[0]=n,Q[1]=C,Q[2]=r,Q[3]=ma;n=U[0];C=
U[1];r=U[2];ma=U[3];if(n!==la[0]||C!==la[1]||r!==la[2]||ma!==la[3])I.viewport(n,C,r,ma),la[0]=n,la[1]=C,la[2]=r,la[3]=ma;v.dirty=!1}if(n=v.profile)A=performance.now(),u.count++;C=E.program(E.vert,E.frag,l);I.useProgram(C.program);aa.setVAO(null);r=C.id;(ma=ha[r])||(ma=ha[r]=h(C));ma.call(this,a);aa.setVAO(null);x.center=e;x.distance=k;x.eye=d;x.phi=g;x.projection=p;x.theta=w;x.up=z;x.view=y;n&&(u.cpuTime+=performance.now()-A)},scope:function(c,a,b){var d,f,h,p,n,w,z,m,A,t,l,q,r,ma,P,I,E,D,F;d=x.center;
f=x.distance;h=x.eye;p=x.phi;n=x.projection;w=e.call(this,x,c,b);z=x.theta;m=x.up;A=x.view;x.center=C;x.distance=2.302585092994046;x.eye=y;x.phi=0;x.projection=w;x.theta=0;x.up=k;x.view=g;if(w=v.profile)t=performance.now(),u.count++;l=x.center;q=B[1];B[1]=l;r=x.distance;l=B[2];B[2]=r;ma=x.eye;r=B[3];B[3]=ma;P=x.phi;ma=B[4];B[4]=P;I=x.projection;P=B[5];B[5]=I;E=x.theta;I=B[6];B[6]=E;D=x.up;E=B[7];B[7]=D;D=x.view;F=B[8];B[8]=D;a(x,c,b);x.center=d;x.distance=f;x.eye=h;x.phi=p;x.projection=n;x.theta=
z;x.up=m;x.view=A;w&&(u.cpuTime+=performance.now()-t);B[1]=q;B[2]=l;B[3]=r;B[4]=ma;B[5]=P;B[6]=I;B[7]=E;B[8]=F},batch:function(c,a){var e,b,k,d,g,f,h,m,y,C,q,B,ha;e=x.center;b=x.distance;k=x.eye;d=x.phi;g=x.projection;f=w.call(this,x,c,0);h=x.theta;m=x.up;y=x.view;x.center=n;x.distance=2.302585092994046;x.eye=p;x.phi=0;x.projection=f;x.theta=0;x.up=z;x.view=A;f=G.next;f!==G.cur&&(f?I.bindFramebuffer(36160,f.framebuffer):I.bindFramebuffer(36160,null),G.cur=f);if(v.dirty){f=ra.dither;f!==v.dither&&
(f?I.enable(3024):I.disable(3024),v.dither=f);f=ra.blend_enable;f!==v.blend_enable&&(f?I.enable(3042):I.disable(3042),v.blend_enable=f);f=H[0];q=H[1];B=H[2];ha=H[3];if(f!==F[0]||q!==F[1]||B!==F[2]||ha!==F[3])I.blendColor(f,q,B,ha),F[0]=f,F[1]=q,F[2]=B,F[3]=ha;f=D[0];q=D[1];if(f!==ka[0]||q!==ka[1])I.blendEquationSeparate(f,q),ka[0]=f,ka[1]=q;f=t[0];q=t[1];B=t[2];ha=t[3];if(f!==ba[0]||q!==ba[1]||B!==ba[2]||ha!==ba[3])I.blendFuncSeparate(f,q,B,ha),ba[0]=f,ba[1]=q,ba[2]=B,ba[3]=ha;f=ra.depth_enable;f!==
v.depth_enable&&(f?I.enable(2929):I.disable(2929),v.depth_enable=f);f=ra.depth_func;f!==v.depth_func&&(I.depthFunc(f),v.depth_func=f);f=ua[0];q=ua[1];if(f!==T[0]||q!==T[1])I.depthRange(f,q),T[0]=f,T[1]=q;f=ra.depth_mask;f!==v.depth_mask&&(I.depthMask(f),v.depth_mask=f);f=L[0];q=L[1];B=L[2];ha=L[3];if(f!==fa[0]||q!==fa[1]||B!==fa[2]||ha!==fa[3])I.colorMask(f,q,B,ha),fa[0]=f,fa[1]=q,fa[2]=B,fa[3]=ha;f=ra.cull_enable;f!==v.cull_enable&&(f?I.enable(2884):I.disable(2884),v.cull_enable=f);f=ra.cull_face;
f!==v.cull_face&&(I.cullFace(f),v.cull_face=f);f=ra.frontFace;f!==v.frontFace&&(I.frontFace(f),v.frontFace=f);f=ra.lineWidth;f!==v.lineWidth&&(I.lineWidth(f),v.lineWidth=f);f=ra.polygonOffset_enable;f!==v.polygonOffset_enable&&(f?I.enable(32823):I.disable(32823),v.polygonOffset_enable=f);f=W[0];q=W[1];if(f!==S[0]||q!==S[1])I.polygonOffset(f,q),S[0]=f,S[1]=q;f=ra.sample_alpha;f!==v.sample_alpha&&(f?I.enable(32926):I.disable(32926),v.sample_alpha=f);f=ra.sample_enable;f!==v.sample_enable&&(f?I.enable(32928):
I.disable(32928),v.sample_enable=f);f=O[0];q=O[1];if(f!==M[0]||q!==M[1])I.sampleCoverage(f,q),M[0]=f,M[1]=q;f=ra.stencil_enable;f!==v.stencil_enable&&(f?I.enable(2960):I.disable(2960),v.stencil_enable=f);f=ra.stencil_mask;f!==v.stencil_mask&&(I.stencilMask(f),v.stencil_mask=f);f=R[0];q=R[1];B=R[2];if(f!==qa[0]||q!==qa[1]||B!==qa[2])I.stencilFunc(f,q,B),qa[0]=f,qa[1]=q,qa[2]=B;f=K[0];q=K[1];B=K[2];ha=K[3];if(f!==da[0]||q!==da[1]||B!==da[2]||ha!==da[3])I.stencilOpSeparate(f,q,B,ha),da[0]=f,da[1]=q,
da[2]=B,da[3]=ha;f=na[0];q=na[1];B=na[2];ha=na[3];if(f!==J[0]||q!==J[1]||B!==J[2]||ha!==J[3])I.stencilOpSeparate(f,q,B,ha),J[0]=f,J[1]=q,J[2]=B,J[3]=ha;f=ra.scissor_enable;f!==v.scissor_enable&&(f?I.enable(3089):I.disable(3089),v.scissor_enable=f);f=N[0];q=N[1];B=N[2];ha=N[3];if(f!==Q[0]||q!==Q[1]||B!==Q[2]||ha!==Q[3])I.scissor(f,q,B,ha),Q[0]=f,Q[1]=q,Q[2]=B,Q[3]=ha;f=U[0];q=U[1];B=U[2];ha=U[3];if(f!==la[0]||q!==la[1]||B!==la[2]||ha!==la[3])I.viewport(f,q,B,ha),la[0]=f,la[1]=q,la[2]=B,la[3]=ha;v.dirty=
!1}if(f=v.profile)C=performance.now(),u.count+=a;q=E.program(E.vert,E.frag,l);I.useProgram(q.program);aa.setVAO(null);B=q.id;(ha=Aa[B])||(ha=Aa[B]=r(q));ha.call(this,c,a);aa.setVAO(null);x.center=e;x.distance=b;x.eye=k;x.phi=d;x.projection=g;x.theta=h;x.up=m;x.view=y;f&&(u.cpuTime+=performance.now()-C)}}},"$27,position,projection,tex,uv,view":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,r,x,v,G,I,ra,E,B,aa,H,F,D,ka){var t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,
Fa,Hb,Ua,ga,ea,sa,wa,Ea,rb,Gb;t=a.attributes;ba=a.context;L=a.current;fa=a.draw;ua=a.framebuffer;T=a.gl;W=a.isArrayLike;S=a.next;O=a.shader;M=a.uniforms;N=a.vao;Q=S.blend_color;R=L.blend_color;qa=S.blend_equation;na=L.blend_equation;J=S.blend_func;K=L.blend_func;da=S.colorMask;U=L.colorMask;la=S.depth_range;ha=L.depth_range;Aa=S.polygonOffset_offset;xa=L.polygonOffset_offset;ca=S.sample_coverage;Da=L.sample_coverage;ja=S.scissor_box;oa=L.scissor_box;Ba=S.stencil_func;Qa=L.stencil_func;Fa=S.stencil_opBack;
Hb=L.stencil_opBack;Ua=S.stencil_opFront;ga=L.stencil_opFront;ea=S.viewport;sa=L.viewport;wa=new Float32Array(16);Ea=new Float32Array(16);rb=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(a){var g,p,n,w;g=ua.next;g!==ua.cur&&(g?T.bindFramebuffer(36160,g.framebuffer):T.bindFramebuffer(36160,null),ua.cur=g);if(L.dirty){var z;g=S.dither;g!==L.dither&&(g?T.enable(3024):T.disable(3024),L.dither=g);g=S.blend_enable;g!==L.blend_enable&&(g?T.enable(3042):T.disable(3042),L.blend_enable=
g);g=Q[0];n=Q[1];w=Q[2];z=Q[3];if(g!==R[0]||n!==R[1]||w!==R[2]||z!==R[3])T.blendColor(g,n,w,z),R[0]=g,R[1]=n,R[2]=w,R[3]=z;g=qa[0];n=qa[1];if(g!==na[0]||n!==na[1])T.blendEquationSeparate(g,n),na[0]=g,na[1]=n;g=J[0];n=J[1];w=J[2];z=J[3];if(g!==K[0]||n!==K[1]||w!==K[2]||z!==K[3])T.blendFuncSeparate(g,n,w,z),K[0]=g,K[1]=n,K[2]=w,K[3]=z;g=S.depth_enable;g!==L.depth_enable&&(g?T.enable(2929):T.disable(2929),L.depth_enable=g);g=S.depth_func;g!==L.depth_func&&(T.depthFunc(g),L.depth_func=g);g=la[0];n=la[1];
if(g!==ha[0]||n!==ha[1])T.depthRange(g,n),ha[0]=g,ha[1]=n;g=S.depth_mask;g!==L.depth_mask&&(T.depthMask(g),L.depth_mask=g);g=da[0];n=da[1];w=da[2];z=da[3];if(g!==U[0]||n!==U[1]||w!==U[2]||z!==U[3])T.colorMask(g,n,w,z),U[0]=g,U[1]=n,U[2]=w,U[3]=z;g=S.cull_enable;g!==L.cull_enable&&(g?T.enable(2884):T.disable(2884),L.cull_enable=g);g=S.cull_face;g!==L.cull_face&&(T.cullFace(g),L.cull_face=g);g=S.frontFace;g!==L.frontFace&&(T.frontFace(g),L.frontFace=g);g=S.lineWidth;g!==L.lineWidth&&(T.lineWidth(g),
L.lineWidth=g);g=S.polygonOffset_enable;g!==L.polygonOffset_enable&&(g?T.enable(32823):T.disable(32823),L.polygonOffset_enable=g);g=Aa[0];n=Aa[1];if(g!==xa[0]||n!==xa[1])T.polygonOffset(g,n),xa[0]=g,xa[1]=n;g=S.sample_alpha;g!==L.sample_alpha&&(g?T.enable(32926):T.disable(32926),L.sample_alpha=g);g=S.sample_enable;g!==L.sample_enable&&(g?T.enable(32928):T.disable(32928),L.sample_enable=g);g=ca[0];n=ca[1];if(g!==Da[0]||n!==Da[1])T.sampleCoverage(g,n),Da[0]=g,Da[1]=n;g=S.stencil_enable;g!==L.stencil_enable&&
(g?T.enable(2960):T.disable(2960),L.stencil_enable=g);g=S.stencil_mask;g!==L.stencil_mask&&(T.stencilMask(g),L.stencil_mask=g);g=Ba[0];n=Ba[1];w=Ba[2];if(g!==Qa[0]||n!==Qa[1]||w!==Qa[2])T.stencilFunc(g,n,w),Qa[0]=g,Qa[1]=n,Qa[2]=w;g=Ua[0];n=Ua[1];w=Ua[2];z=Ua[3];if(g!==ga[0]||n!==ga[1]||w!==ga[2]||z!==ga[3])T.stencilOpSeparate(g,n,w,z),ga[0]=g,ga[1]=n,ga[2]=w,ga[3]=z;g=Fa[0];n=Fa[1];w=Fa[2];z=Fa[3];if(g!==Hb[0]||n!==Hb[1]||w!==Hb[2]||z!==Hb[3])T.stencilOpSeparate(g,n,w,z),Hb[0]=g,Hb[1]=n,Hb[2]=w,
Hb[3]=z;g=S.scissor_enable;g!==L.scissor_enable&&(g?T.enable(3089):T.disable(3089),L.scissor_enable=g);g=ja[0];n=ja[1];w=ja[2];z=ja[3];if(g!==oa[0]||n!==oa[1]||w!==oa[2]||z!==oa[3])T.scissor(g,n,w,z),oa[0]=g,oa[1]=n,oa[2]=w,oa[3]=z;g=ea[0];n=ea[1];w=ea[2];z=ea[3];if(g!==sa[0]||n!==sa[1]||w!==sa[2]||z!==sa[3])T.viewport(g,n,w,z),sa[0]=g,sa[1]=n,sa[2]=w,sa[3]=z;L.dirty=!1}if(g=L.profile)p=performance.now(),u.count++;T.useProgram(q.program);N.setVAO(null);n=aa.location;w=t[n];w.buffer||T.enableVertexAttribArray(n);
if(w.type!==m.dtype||3!==w.size||w.buffer!==m||!1!==w.normalized||0!==w.offset||0!==w.stride)T.bindBuffer(34962,m.buffer),T.vertexAttribPointer(n,3,m.dtype,!1,0,0),w.type=m.dtype,w.size=3,w.buffer=m,w.normalized=!1,w.offset=0,w.stride=0;n=D.location;w=t[n];w.buffer||T.enableVertexAttribArray(n);if(w.type!==b.dtype||2!==w.size||w.buffer!==b||!1!==w.normalized||0!==w.offset||0!==w.stride)T.bindBuffer(34962,b.buffer),T.vertexAttribPointer(n,2,b.dtype,!1,0,0),w.type=b.dtype,w.size=2,w.buffer=b,w.normalized=
!1,w.offset=0,w.stride=0;n=f.call(this,ba,a,0);W(n)&&16===n.length||d.commandRaise(c,l);T.uniformMatrix4fv(H.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(wa[0]=n[0],wa[1]=n[1],wa[2]=n[2],wa[3]=n[3],wa[4]=n[4],wa[5]=n[5],wa[6]=n[6],wa[7]=n[7],wa[8]=n[8],wa[9]=n[9],wa[10]=n[10],wa[11]=n[11],wa[12]=n[12],wa[13]=n[13],wa[14]=n[14],wa[15]=n[15],wa));n=h.call(this,ba,a,0);W(n)&&16===n.length||d.commandRaise(C,l);T.uniformMatrix4fv(ka.location,!1,Array.isArray(n)||n instanceof Float32Array?
n:(Ea[0]=n[0],Ea[1]=n[1],Ea[2]=n[2],Ea[3]=n[3],Ea[4]=n[4],Ea[5]=n[5],Ea[6]=n[6],Ea[7]=n[7],Ea[8]=n[8],Ea[9]=n[9],Ea[10]=n[10],Ea[11]=n[11],Ea[12]=n[12],Ea[13]=n[13],Ea[14]=n[14],Ea[15]=n[15],Ea));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||d.commandRaise(y,l);a=a._texture;T.uniform1i(F.location,a.bind());e&&T.bindBuffer(34963,e.buffer.buffer);n=e.primType;w=e.vertCount-0;0<=w||d.commandRaise(k,l);w&&(T.drawElements(n,w,e.type,0<<(e.type-
5121>>1)),N.setVAO(null),g&&(u.cpuTime+=performance.now()-p),a.unbind())},scope:function(c,a,e){var k,f,h,y,t,C,v,x,q,r,ma,B,I,E,ga,D,F,H,ea,J,ca,K,U,N,ha,Q,R,sa,G,xa,ta,Hb,S,T,aa;if(k=L.profile)f=performance.now(),u.count++;h=fa.elements;fa.elements=g;y=fa.offset;fa.offset=0;t=g.vertCount-0;0<=t||d.commandRaise(n,l);C=fa.count;fa.count=t;v=g.primType;t=fa.primitive;fa.primitive=v;x=p.call(this,ba,c,e);v=M[3];M[3]=x;q=c.texture;x=M[5];M[5]=q;r=w.call(this,ba,c,e);q=M[4];M[4]=r;r=z.buffer;z.buffer=
m;ma=z.divisor;z.divisor=0;B=z.normalized;z.normalized=!1;I=z.offset;z.offset=0;E=z.size;z.size=0;ga=z.state;z.state=1;D=z.stride;z.stride=0;F=z.type;z.type=m.dtype;H=z.w;z.w=0;ea=z.x;z.x=0;J=z.y;z.y=0;ca=z.z;z.z=0;K=A.buffer;A.buffer=b;U=A.divisor;A.divisor=0;N=A.normalized;A.normalized=!1;ha=A.offset;A.offset=0;Q=A.size;A.size=0;R=A.state;A.state=1;sa=A.stride;A.stride=0;G=A.type;A.type=b.dtype;xa=A.w;A.w=0;ta=A.x;A.x=0;Hb=A.y;A.y=0;S=A.z;A.z=0;T=O.vert;O.vert=2;aa=O.frag;O.frag=1;a(ba,c,e);k&&
(u.cpuTime+=performance.now()-f);fa.elements=h;fa.offset=y;fa.count=C;fa.primitive=t;M[3]=v;M[5]=x;M[4]=q;z.buffer=r;z.divisor=ma;z.normalized=B;z.offset=I;z.size=E;z.state=ga;z.stride=D;z.type=F;z.w=H;z.x=ea;z.y=J;z.z=ca;A.buffer=K;A.divisor=U;A.normalized=N;A.offset=ha;A.size=Q;A.state=R;A.stride=sa;A.type=G;A.w=xa;A.x=ta;A.y=Hb;A.z=S;O.vert=T;O.frag=aa},batch:function(c,a){var e,k,g,f;e=ua.next;e!==ua.cur&&(e?T.bindFramebuffer(36160,e.framebuffer):T.bindFramebuffer(36160,null),ua.cur=e);if(L.dirty){var h,
n,p;e=S.dither;e!==L.dither&&(e?T.enable(3024):T.disable(3024),L.dither=e);e=S.blend_enable;e!==L.blend_enable&&(e?T.enable(3042):T.disable(3042),L.blend_enable=e);e=Q[0];h=Q[1];n=Q[2];p=Q[3];if(e!==R[0]||h!==R[1]||n!==R[2]||p!==R[3])T.blendColor(e,h,n,p),R[0]=e,R[1]=h,R[2]=n,R[3]=p;e=qa[0];h=qa[1];if(e!==na[0]||h!==na[1])T.blendEquationSeparate(e,h),na[0]=e,na[1]=h;e=J[0];h=J[1];n=J[2];p=J[3];if(e!==K[0]||h!==K[1]||n!==K[2]||p!==K[3])T.blendFuncSeparate(e,h,n,p),K[0]=e,K[1]=h,K[2]=n,K[3]=p;e=S.depth_enable;
e!==L.depth_enable&&(e?T.enable(2929):T.disable(2929),L.depth_enable=e);e=S.depth_func;e!==L.depth_func&&(T.depthFunc(e),L.depth_func=e);e=la[0];h=la[1];if(e!==ha[0]||h!==ha[1])T.depthRange(e,h),ha[0]=e,ha[1]=h;e=S.depth_mask;e!==L.depth_mask&&(T.depthMask(e),L.depth_mask=e);e=da[0];h=da[1];n=da[2];p=da[3];if(e!==U[0]||h!==U[1]||n!==U[2]||p!==U[3])T.colorMask(e,h,n,p),U[0]=e,U[1]=h,U[2]=n,U[3]=p;e=S.cull_enable;e!==L.cull_enable&&(e?T.enable(2884):T.disable(2884),L.cull_enable=e);e=S.cull_face;e!==
L.cull_face&&(T.cullFace(e),L.cull_face=e);e=S.frontFace;e!==L.frontFace&&(T.frontFace(e),L.frontFace=e);e=S.lineWidth;e!==L.lineWidth&&(T.lineWidth(e),L.lineWidth=e);e=S.polygonOffset_enable;e!==L.polygonOffset_enable&&(e?T.enable(32823):T.disable(32823),L.polygonOffset_enable=e);e=Aa[0];h=Aa[1];if(e!==xa[0]||h!==xa[1])T.polygonOffset(e,h),xa[0]=e,xa[1]=h;e=S.sample_alpha;e!==L.sample_alpha&&(e?T.enable(32926):T.disable(32926),L.sample_alpha=e);e=S.sample_enable;e!==L.sample_enable&&(e?T.enable(32928):
T.disable(32928),L.sample_enable=e);e=ca[0];h=ca[1];if(e!==Da[0]||h!==Da[1])T.sampleCoverage(e,h),Da[0]=e,Da[1]=h;e=S.stencil_enable;e!==L.stencil_enable&&(e?T.enable(2960):T.disable(2960),L.stencil_enable=e);e=S.stencil_mask;e!==L.stencil_mask&&(T.stencilMask(e),L.stencil_mask=e);e=Ba[0];h=Ba[1];n=Ba[2];if(e!==Qa[0]||h!==Qa[1]||n!==Qa[2])T.stencilFunc(e,h,n),Qa[0]=e,Qa[1]=h,Qa[2]=n;e=Ua[0];h=Ua[1];n=Ua[2];p=Ua[3];if(e!==ga[0]||h!==ga[1]||n!==ga[2]||p!==ga[3])T.stencilOpSeparate(e,h,n,p),ga[0]=e,
ga[1]=h,ga[2]=n,ga[3]=p;e=Fa[0];h=Fa[1];n=Fa[2];p=Fa[3];if(e!==Hb[0]||h!==Hb[1]||n!==Hb[2]||p!==Hb[3])T.stencilOpSeparate(e,h,n,p),Hb[0]=e,Hb[1]=h,Hb[2]=n,Hb[3]=p;e=S.scissor_enable;e!==L.scissor_enable&&(e?T.enable(3089):T.disable(3089),L.scissor_enable=e);e=ja[0];h=ja[1];n=ja[2];p=ja[3];if(e!==oa[0]||h!==oa[1]||n!==oa[2]||p!==oa[3])T.scissor(e,h,n,p),oa[0]=e,oa[1]=h,oa[2]=n,oa[3]=p;e=ea[0];h=ea[1];n=ea[2];p=ea[3];if(e!==sa[0]||h!==sa[1]||n!==sa[2]||p!==sa[3])T.viewport(e,h,n,p),sa[0]=e,sa[1]=h,
sa[2]=n,sa[3]=p;L.dirty=!1}if(e=L.profile)k=performance.now(),u.count+=a;T.useProgram(r.program);N.setVAO(null);h=aa.location;n=t[h];n.buffer||T.enableVertexAttribArray(h);if(n.type!==m.dtype||3!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||0!==n.stride)T.bindBuffer(34962,m.buffer),T.vertexAttribPointer(h,3,m.dtype,!1,0,0),n.type=m.dtype,n.size=3,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;h=D.location;n=t[h];n.buffer||T.enableVertexAttribArray(h);if(n.type!==b.dtype||2!==n.size||
n.buffer!==b||!1!==n.normalized||0!==n.offset||0!==n.stride)T.bindBuffer(34962,b.buffer),T.vertexAttribPointer(h,2,b.dtype,!1,0,0),n.type=b.dtype,n.size=2,n.buffer=b,n.normalized=!1,n.offset=0,n.stride=0;h=x.call(this,ba,f,g);W(h)&&16===h.length||d.commandRaise(v,l);T.uniformMatrix4fv(H.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(rb[0]=h[0],rb[1]=h[1],rb[2]=h[2],rb[3]=h[3],rb[4]=h[4],rb[5]=h[5],rb[6]=h[6],rb[7]=h[7],rb[8]=h[8],rb[9]=h[9],rb[10]=h[10],rb[11]=h[11],rb[12]=h[12],rb[13]=
h[13],rb[14]=h[14],rb[15]=h[15],rb));g=G.call(this,ba,f,g);W(g)&&16===g.length||d.commandRaise(I,l);T.uniformMatrix4fv(ka.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Gb[0]=g[0],Gb[1]=g[1],Gb[2]=g[2],Gb[3]=g[3],Gb[4]=g[4],Gb[5]=g[5],Gb[6]=g[6],Gb[7]=g[7],Gb[8]=g[8],Gb[9]=g[9],Gb[10]=g[10],Gb[11]=g[11],Gb[12]=g[12],Gb[13]=g[13],Gb[14]=g[14],Gb[15]=g[15],Gb));E&&T.bindBuffer(34963,E.buffer.buffer);h=E.primType;n=E.vertCount-0;0<=n||d.commandRaise(B,l);for(g=0;g<a;++g)f=c[g],(f=f.texture)&&
"framebuffer"===f._reglType&&(f=f.color[0]),"function"===typeof f&&"texture2d"===f._reglType||d.commandRaise(ra,l),f=f._texture,T.uniform1i(F.location,f.bind()),n&&(T.drawElements(h,n,E.type,0<<(E.type-5121>>1)),f.unbind());N.setVAO(null);e&&(u.cpuTime+=performance.now()-k)}}},"$19,normal,position,projection,view":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,r,x,v,G){var I,ra,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba,Qa,Fa;I=a.attributes;ra=a.context;
E=a.current;B=a.draw;aa=a.framebuffer;H=a.gl;F=a.isArrayLike;D=a.next;ka=a.shader;t=a.uniforms;ba=a.vao;L=D.blend_color;fa=E.blend_color;ua=D.blend_equation;T=E.blend_equation;W=D.blend_func;S=E.blend_func;O=D.colorMask;M=E.colorMask;N=D.depth_range;Q=E.depth_range;R=D.polygonOffset_offset;qa=E.polygonOffset_offset;na=D.sample_coverage;J=E.sample_coverage;K=D.scissor_box;da=E.scissor_box;U=D.stencil_func;la=E.stencil_func;ha=D.stencil_opBack;Aa=E.stencil_opBack;xa=D.stencil_opFront;ca=E.stencil_opFront;
Da=D.viewport;ja=E.viewport;oa=new Float32Array(16);Ba=new Float32Array(16);Qa=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(e){var a,g,k;e=aa.next;e!==aa.cur&&(e?H.bindFramebuffer(36160,e.framebuffer):H.bindFramebuffer(36160,null),aa.cur=e);if(E.dirty){var n;e=D.dither;e!==E.dither&&(e?H.enable(3024):H.disable(3024),E.dither=e);e=D.blend_enable;e!==E.blend_enable&&(e?H.enable(3042):H.disable(3042),E.blend_enable=e);e=L[0];g=L[1];k=L[2];n=L[3];if(e!==fa[0]||g!==fa[1]||k!==fa[2]||
n!==fa[3])H.blendColor(e,g,k,n),fa[0]=e,fa[1]=g,fa[2]=k,fa[3]=n;e=ua[0];g=ua[1];if(e!==T[0]||g!==T[1])H.blendEquationSeparate(e,g),T[0]=e,T[1]=g;e=W[0];g=W[1];k=W[2];n=W[3];if(e!==S[0]||g!==S[1]||k!==S[2]||n!==S[3])H.blendFuncSeparate(e,g,k,n),S[0]=e,S[1]=g,S[2]=k,S[3]=n;e=D.depth_enable;e!==E.depth_enable&&(e?H.enable(2929):H.disable(2929),E.depth_enable=e);e=D.depth_func;e!==E.depth_func&&(H.depthFunc(e),E.depth_func=e);e=N[0];g=N[1];if(e!==Q[0]||g!==Q[1])H.depthRange(e,g),Q[0]=e,Q[1]=g;e=D.depth_mask;
e!==E.depth_mask&&(H.depthMask(e),E.depth_mask=e);e=O[0];g=O[1];k=O[2];n=O[3];if(e!==M[0]||g!==M[1]||k!==M[2]||n!==M[3])H.colorMask(e,g,k,n),M[0]=e,M[1]=g,M[2]=k,M[3]=n;e=D.cull_enable;e!==E.cull_enable&&(e?H.enable(2884):H.disable(2884),E.cull_enable=e);e=D.cull_face;e!==E.cull_face&&(H.cullFace(e),E.cull_face=e);e=D.frontFace;e!==E.frontFace&&(H.frontFace(e),E.frontFace=e);e=D.lineWidth;e!==E.lineWidth&&(H.lineWidth(e),E.lineWidth=e);e=D.polygonOffset_enable;e!==E.polygonOffset_enable&&(e?H.enable(32823):
H.disable(32823),E.polygonOffset_enable=e);e=R[0];g=R[1];if(e!==qa[0]||g!==qa[1])H.polygonOffset(e,g),qa[0]=e,qa[1]=g;e=D.sample_alpha;e!==E.sample_alpha&&(e?H.enable(32926):H.disable(32926),E.sample_alpha=e);e=D.sample_enable;e!==E.sample_enable&&(e?H.enable(32928):H.disable(32928),E.sample_enable=e);e=na[0];g=na[1];if(e!==J[0]||g!==J[1])H.sampleCoverage(e,g),J[0]=e,J[1]=g;e=D.stencil_enable;e!==E.stencil_enable&&(e?H.enable(2960):H.disable(2960),E.stencil_enable=e);e=D.stencil_mask;e!==E.stencil_mask&&
(H.stencilMask(e),E.stencil_mask=e);e=U[0];g=U[1];k=U[2];if(e!==la[0]||g!==la[1]||k!==la[2])H.stencilFunc(e,g,k),la[0]=e,la[1]=g,la[2]=k;e=xa[0];g=xa[1];k=xa[2];n=xa[3];if(e!==ca[0]||g!==ca[1]||k!==ca[2]||n!==ca[3])H.stencilOpSeparate(e,g,k,n),ca[0]=e,ca[1]=g,ca[2]=k,ca[3]=n;e=ha[0];g=ha[1];k=ha[2];n=ha[3];if(e!==Aa[0]||g!==Aa[1]||k!==Aa[2]||n!==Aa[3])H.stencilOpSeparate(e,g,k,n),Aa[0]=e,Aa[1]=g,Aa[2]=k,Aa[3]=n;e=D.scissor_enable;e!==E.scissor_enable&&(e?H.enable(3089):H.disable(3089),E.scissor_enable=
e);e=K[0];g=K[1];k=K[2];n=K[3];if(e!==da[0]||g!==da[1]||k!==da[2]||n!==da[3])H.scissor(e,g,k,n),da[0]=e,da[1]=g,da[2]=k,da[3]=n;e=Da[0];g=Da[1];k=Da[2];n=Da[3];if(e!==ja[0]||g!==ja[1]||k!==ja[2]||n!==ja[3])H.viewport(e,g,k,n),ja[0]=e,ja[1]=g,ja[2]=k,ja[3]=n;E.dirty=!1}if(e=E.profile)a=performance.now(),u.count++;H.useProgram(q.program);ba.setVAO(null);g=x.location;k=I[g];k.buffer||H.enableVertexAttribArray(g);if(k.type!==m.dtype||3!==k.size||k.buffer!==m||!1!==k.normalized||0!==k.offset||0!==k.stride)H.bindBuffer(34962,
m.buffer),H.vertexAttribPointer(g,3,m.dtype,!1,0,0),k.type=m.dtype,k.size=3,k.buffer=m,k.normalized=!1,k.offset=0,k.stride=0;g=r.location;k=I[g];k.buffer||H.enableVertexAttribArray(g);if(k.type!==b.dtype||3!==k.size||k.buffer!==b||!1!==k.normalized||0!==k.offset||0!==k.stride)H.bindBuffer(34962,b.buffer),H.vertexAttribPointer(g,3,b.dtype,!1,0,0),k.type=b.dtype,k.size=3,k.buffer=b,k.normalized=!1,k.offset=0,k.stride=0;g=t[5];F(g)&&16===g.length||d.commandRaise(f,l);H.uniformMatrix4fv(v.location,!1,
Array.isArray(g)||g instanceof Float32Array?g:(oa[0]=g[0],oa[1]=g[1],oa[2]=g[2],oa[3]=g[3],oa[4]=g[4],oa[5]=g[5],oa[6]=g[6],oa[7]=g[7],oa[8]=g[8],oa[9]=g[9],oa[10]=g[10],oa[11]=g[11],oa[12]=g[12],oa[13]=g[13],oa[14]=g[14],oa[15]=g[15],oa));g=t[8];F(g)&&16===g.length||d.commandRaise(c,l);H.uniformMatrix4fv(G.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Ba[0]=g[0],Ba[1]=g[1],Ba[2]=g[2],Ba[3]=g[3],Ba[4]=g[4],Ba[5]=g[5],Ba[6]=g[6],Ba[7]=g[7],Ba[8]=g[8],Ba[9]=g[9],Ba[10]=g[10],Ba[11]=g[11],
Ba[12]=g[12],Ba[13]=g[13],Ba[14]=g[14],Ba[15]=g[15],Ba));h&&H.bindBuffer(34963,h.buffer.buffer);g=h.primType;k=h.vertCount-0;0<=k||d.commandRaise(C,l);k&&(H.drawElements(g,k,h.type,0<<(h.type-5121>>1)),ba.setVAO(null),e&&(u.cpuTime+=performance.now()-a))},scope:function(c,a,f){var h,n,p,w,z,A,t,C,v,x,q,r,ma,I,D,F,H,J,ca,K,L,U,M,N,ha,O,Q,R,G,xa,ta,S;if(h=E.profile)n=performance.now(),u.count++;p=B.elements;B.elements=y;w=B.offset;B.offset=0;z=y.vertCount-0;0<=z||d.commandRaise(e,l);A=B.count;B.count=
z;t=y.primType;z=B.primitive;B.primitive=t;t=k.buffer;k.buffer=b;C=k.divisor;k.divisor=0;v=k.normalized;k.normalized=!1;x=k.offset;k.offset=0;q=k.size;k.size=0;r=k.state;k.state=1;ma=k.stride;k.stride=0;I=k.type;k.type=b.dtype;D=k.w;k.w=0;F=k.x;k.x=0;H=k.y;k.y=0;J=k.z;k.z=0;ca=g.buffer;g.buffer=m;K=g.divisor;g.divisor=0;L=g.normalized;g.normalized=!1;U=g.offset;g.offset=0;M=g.size;g.size=0;N=g.state;g.state=1;ha=g.stride;g.stride=0;O=g.type;g.type=m.dtype;Q=g.w;g.w=0;R=g.x;g.x=0;G=g.y;g.y=0;xa=g.z;
g.z=0;ta=ka.vert;ka.vert=10;S=ka.frag;ka.frag=9;a(ra,c,f);h&&(u.cpuTime+=performance.now()-n);B.elements=p;B.offset=w;B.count=A;B.primitive=z;k.buffer=t;k.divisor=C;k.normalized=v;k.offset=x;k.size=q;k.state=r;k.stride=ma;k.type=I;k.w=D;k.x=F;k.y=H;k.z=J;g.buffer=ca;g.divisor=K;g.normalized=L;g.offset=U;g.size=M;g.state=N;g.stride=ha;g.type=O;g.w=Q;g.x=R;g.y=G;g.z=xa;ka.vert=ta;ka.frag=S},batch:function(c,e){var a,g,k;a=aa.next;a!==aa.cur&&(a?H.bindFramebuffer(36160,a.framebuffer):H.bindFramebuffer(36160,
null),aa.cur=a);if(E.dirty){var f,h;a=D.dither;a!==E.dither&&(a?H.enable(3024):H.disable(3024),E.dither=a);a=D.blend_enable;a!==E.blend_enable&&(a?H.enable(3042):H.disable(3042),E.blend_enable=a);a=L[0];k=L[1];f=L[2];h=L[3];if(a!==fa[0]||k!==fa[1]||f!==fa[2]||h!==fa[3])H.blendColor(a,k,f,h),fa[0]=a,fa[1]=k,fa[2]=f,fa[3]=h;a=ua[0];k=ua[1];if(a!==T[0]||k!==T[1])H.blendEquationSeparate(a,k),T[0]=a,T[1]=k;a=W[0];k=W[1];f=W[2];h=W[3];if(a!==S[0]||k!==S[1]||f!==S[2]||h!==S[3])H.blendFuncSeparate(a,k,f,
h),S[0]=a,S[1]=k,S[2]=f,S[3]=h;a=D.depth_enable;a!==E.depth_enable&&(a?H.enable(2929):H.disable(2929),E.depth_enable=a);a=D.depth_func;a!==E.depth_func&&(H.depthFunc(a),E.depth_func=a);a=N[0];k=N[1];if(a!==Q[0]||k!==Q[1])H.depthRange(a,k),Q[0]=a,Q[1]=k;a=D.depth_mask;a!==E.depth_mask&&(H.depthMask(a),E.depth_mask=a);a=O[0];k=O[1];f=O[2];h=O[3];if(a!==M[0]||k!==M[1]||f!==M[2]||h!==M[3])H.colorMask(a,k,f,h),M[0]=a,M[1]=k,M[2]=f,M[3]=h;a=D.cull_enable;a!==E.cull_enable&&(a?H.enable(2884):H.disable(2884),
E.cull_enable=a);a=D.cull_face;a!==E.cull_face&&(H.cullFace(a),E.cull_face=a);a=D.frontFace;a!==E.frontFace&&(H.frontFace(a),E.frontFace=a);a=D.lineWidth;a!==E.lineWidth&&(H.lineWidth(a),E.lineWidth=a);a=D.polygonOffset_enable;a!==E.polygonOffset_enable&&(a?H.enable(32823):H.disable(32823),E.polygonOffset_enable=a);a=R[0];k=R[1];if(a!==qa[0]||k!==qa[1])H.polygonOffset(a,k),qa[0]=a,qa[1]=k;a=D.sample_alpha;a!==E.sample_alpha&&(a?H.enable(32926):H.disable(32926),E.sample_alpha=a);a=D.sample_enable;
a!==E.sample_enable&&(a?H.enable(32928):H.disable(32928),E.sample_enable=a);a=na[0];k=na[1];if(a!==J[0]||k!==J[1])H.sampleCoverage(a,k),J[0]=a,J[1]=k;a=D.stencil_enable;a!==E.stencil_enable&&(a?H.enable(2960):H.disable(2960),E.stencil_enable=a);a=D.stencil_mask;a!==E.stencil_mask&&(H.stencilMask(a),E.stencil_mask=a);a=U[0];k=U[1];f=U[2];if(a!==la[0]||k!==la[1]||f!==la[2])H.stencilFunc(a,k,f),la[0]=a,la[1]=k,la[2]=f;a=xa[0];k=xa[1];f=xa[2];h=xa[3];if(a!==ca[0]||k!==ca[1]||f!==ca[2]||h!==ca[3])H.stencilOpSeparate(a,
k,f,h),ca[0]=a,ca[1]=k,ca[2]=f,ca[3]=h;a=ha[0];k=ha[1];f=ha[2];h=ha[3];if(a!==Aa[0]||k!==Aa[1]||f!==Aa[2]||h!==Aa[3])H.stencilOpSeparate(a,k,f,h),Aa[0]=a,Aa[1]=k,Aa[2]=f,Aa[3]=h;a=D.scissor_enable;a!==E.scissor_enable&&(a?H.enable(3089):H.disable(3089),E.scissor_enable=a);a=K[0];k=K[1];f=K[2];h=K[3];if(a!==da[0]||k!==da[1]||f!==da[2]||h!==da[3])H.scissor(a,k,f,h),da[0]=a,da[1]=k,da[2]=f,da[3]=h;a=Da[0];k=Da[1];f=Da[2];h=Da[3];if(a!==ja[0]||k!==ja[1]||f!==ja[2]||h!==ja[3])H.viewport(a,k,f,h),ja[0]=
a,ja[1]=k,ja[2]=f,ja[3]=h;E.dirty=!1}if(a=E.profile)g=performance.now(),u.count+=e;H.useProgram(n.program);ba.setVAO(null);k=x.location;f=I[k];f.buffer||H.enableVertexAttribArray(k);if(f.type!==m.dtype||3!==f.size||f.buffer!==m||!1!==f.normalized||0!==f.offset||0!==f.stride)H.bindBuffer(34962,m.buffer),H.vertexAttribPointer(k,3,m.dtype,!1,0,0),f.type=m.dtype,f.size=3,f.buffer=m,f.normalized=!1,f.offset=0,f.stride=0;k=r.location;f=I[k];f.buffer||H.enableVertexAttribArray(k);if(f.type!==b.dtype||3!==
f.size||f.buffer!==b||!1!==f.normalized||0!==f.offset||0!==f.stride)H.bindBuffer(34962,b.buffer),H.vertexAttribPointer(k,3,b.dtype,!1,0,0),f.type=b.dtype,f.size=3,f.buffer=b,f.normalized=!1,f.offset=0,f.stride=0;k=t[5];F(k)&&16===k.length||d.commandRaise(p,l);H.uniformMatrix4fv(v.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Qa[0]=k[0],Qa[1]=k[1],Qa[2]=k[2],Qa[3]=k[3],Qa[4]=k[4],Qa[5]=k[5],Qa[6]=k[6],Qa[7]=k[7],Qa[8]=k[8],Qa[9]=k[9],Qa[10]=k[10],Qa[11]=k[11],Qa[12]=k[12],Qa[13]=k[13],
Qa[14]=k[14],Qa[15]=k[15],Qa));k=t[8];F(k)&&16===k.length||d.commandRaise(w,l);H.uniformMatrix4fv(G.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Fa[0]=k[0],Fa[1]=k[1],Fa[2]=k[2],Fa[3]=k[3],Fa[4]=k[4],Fa[5]=k[5],Fa[6]=k[6],Fa[7]=k[7],Fa[8]=k[8],Fa[9]=k[9],Fa[10]=k[10],Fa[11]=k[11],Fa[12]=k[12],Fa[13]=k[13],Fa[14]=k[14],Fa[15]=k[15],Fa));z&&H.bindBuffer(34963,z.buffer.buffer);f=z.primType;h=z.vertCount-0;0<=h||d.commandRaise(A,l);for(k=0;k<e;++k)h&&H.drawElements(f,h,z.type,0<<(z.type-
5121>>1));ba.setVAO(null);a&&(u.cpuTime+=performance.now()-g)}}},"$14,angle,color,position":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w){var z,A,r,x,v,G,I,ra,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha;z=a.attributes;A=a.context;r=a.current;x=a.draw;v=a.elements;G=a.framebuffer;I=a.gl;ra=a.isArrayLike;E=a.next;B=a.shader;aa=a.uniforms;H=a.vao;F=E.blend_color;D=r.blend_color;ka=E.blend_equation;t=r.blend_equation;ba=E.blend_func;L=r.blend_func;fa=E.colorMask;ua=r.colorMask;T=
E.depth_range;W=r.depth_range;S=E.polygonOffset_offset;O=r.polygonOffset_offset;M=E.sample_coverage;N=r.sample_coverage;Q=E.scissor_box;R=r.scissor_box;qa=E.stencil_func;na=r.stencil_func;J=E.stencil_opBack;K=r.stencil_opBack;da=E.stencil_opFront;U=r.stencil_opFront;la=E.viewport;ha=r.viewport;return{draw:function(e){var a,k,g,h;a=G.next;a!==G.cur&&(a?I.bindFramebuffer(36160,a.framebuffer):I.bindFramebuffer(36160,null),G.cur=a);if(r.dirty){var y;a=E.dither;a!==r.dither&&(a?I.enable(3024):I.disable(3024),
r.dither=a);a=E.blend_enable;a!==r.blend_enable&&(a?I.enable(3042):I.disable(3042),r.blend_enable=a);a=F[0];g=F[1];h=F[2];y=F[3];if(a!==D[0]||g!==D[1]||h!==D[2]||y!==D[3])I.blendColor(a,g,h,y),D[0]=a,D[1]=g,D[2]=h,D[3]=y;a=ka[0];g=ka[1];if(a!==t[0]||g!==t[1])I.blendEquationSeparate(a,g),t[0]=a,t[1]=g;a=ba[0];g=ba[1];h=ba[2];y=ba[3];if(a!==L[0]||g!==L[1]||h!==L[2]||y!==L[3])I.blendFuncSeparate(a,g,h,y),L[0]=a,L[1]=g,L[2]=h,L[3]=y;a=E.depth_func;a!==r.depth_func&&(I.depthFunc(a),r.depth_func=a);a=T[0];
g=T[1];if(a!==W[0]||g!==W[1])I.depthRange(a,g),W[0]=a,W[1]=g;a=E.depth_mask;a!==r.depth_mask&&(I.depthMask(a),r.depth_mask=a);a=fa[0];g=fa[1];h=fa[2];y=fa[3];if(a!==ua[0]||g!==ua[1]||h!==ua[2]||y!==ua[3])I.colorMask(a,g,h,y),ua[0]=a,ua[1]=g,ua[2]=h,ua[3]=y;a=E.cull_enable;a!==r.cull_enable&&(a?I.enable(2884):I.disable(2884),r.cull_enable=a);a=E.cull_face;a!==r.cull_face&&(I.cullFace(a),r.cull_face=a);a=E.frontFace;a!==r.frontFace&&(I.frontFace(a),r.frontFace=a);a=E.lineWidth;a!==r.lineWidth&&(I.lineWidth(a),
r.lineWidth=a);a=E.polygonOffset_enable;a!==r.polygonOffset_enable&&(a?I.enable(32823):I.disable(32823),r.polygonOffset_enable=a);a=S[0];g=S[1];if(a!==O[0]||g!==O[1])I.polygonOffset(a,g),O[0]=a,O[1]=g;a=E.sample_alpha;a!==r.sample_alpha&&(a?I.enable(32926):I.disable(32926),r.sample_alpha=a);a=E.sample_enable;a!==r.sample_enable&&(a?I.enable(32928):I.disable(32928),r.sample_enable=a);a=M[0];g=M[1];if(a!==N[0]||g!==N[1])I.sampleCoverage(a,g),N[0]=a,N[1]=g;a=E.stencil_enable;a!==r.stencil_enable&&(a?
I.enable(2960):I.disable(2960),r.stencil_enable=a);a=E.stencil_mask;a!==r.stencil_mask&&(I.stencilMask(a),r.stencil_mask=a);a=qa[0];g=qa[1];h=qa[2];if(a!==na[0]||g!==na[1]||h!==na[2])I.stencilFunc(a,g,h),na[0]=a,na[1]=g,na[2]=h;a=da[0];g=da[1];h=da[2];y=da[3];if(a!==U[0]||g!==U[1]||h!==U[2]||y!==U[3])I.stencilOpSeparate(a,g,h,y),U[0]=a,U[1]=g,U[2]=h,U[3]=y;a=J[0];g=J[1];h=J[2];y=J[3];if(a!==K[0]||g!==K[1]||h!==K[2]||y!==K[3])I.stencilOpSeparate(a,g,h,y),K[0]=a,K[1]=g,K[2]=h,K[3]=y;a=E.scissor_enable;
a!==r.scissor_enable&&(a?I.enable(3089):I.disable(3089),r.scissor_enable=a);a=Q[0];g=Q[1];h=Q[2];y=Q[3];if(a!==R[0]||g!==R[1]||h!==R[2]||y!==R[3])I.scissor(a,g,h,y),R[0]=a,R[1]=g,R[2]=h,R[3]=y;a=la[0];g=la[1];h=la[2];y=la[3];if(a!==ha[0]||g!==ha[1]||h!==ha[2]||y!==ha[3])I.viewport(a,g,h,y),ha[0]=a,ha[1]=g,ha[2]=h,ha[3]=y}I.disable(2929);r.depth_enable=!1;if(a=r.profile)k=performance.now(),u.count++;I.useProgram(q.program);H.setVAO(null);g=w.location;h=z[g];h.buffer||I.enableVertexAttribArray(g);if(h.type!==
m.dtype||2!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)I.bindBuffer(34962,m.buffer),I.vertexAttribPointer(g,2,m.dtype,!1,0,0),h.type=m.dtype,h.size=2,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;g=b.call(this,A,e,0);"number"!==typeof g&&d.commandRaise(f,l);I.uniform1f(n.location,g);e=e.color;ra(e)&&4===e.length||d.commandRaise(c,l);I.uniform4f(p.location,e[0],e[1],e[2],e[3]);(e=x.elements)?I.bindBuffer(34963,e.buffer.buffer):H.currentVAO&&(e=v.getElements(H.currentVAO.elements))&&
I.bindBuffer(34963,e.buffer.buffer);g=x.primitive;h=x.offset;e?I.drawElements(g,3,e.type,h<<(e.type-5121>>1)):I.drawArrays(g,h,3);r.dirty=!0;H.setVAO(null);a&&(u.cpuTime+=performance.now()-k)},scope:function(c,a,e){var b,k,g,d,f,n,p,w,z,y,t,l,v,q,P,I,D,F,H,J;b=E.depth_enable;E.depth_enable=!1;if(k=r.profile)g=performance.now(),u.count++;d=x.count;x.count=3;f=h.call(this,A,c,e);n=aa[3];aa[3]=f;p=c.color;f=aa[4];aa[4]=p;p=C.buffer;C.buffer=m;w=C.divisor;C.divisor=0;z=C.normalized;C.normalized=!1;y=
C.offset;C.offset=0;t=C.size;C.size=0;l=C.state;C.state=1;v=C.stride;C.stride=0;q=C.type;C.type=m.dtype;P=C.w;C.w=0;I=C.x;C.x=0;D=C.y;C.y=0;F=C.z;C.z=0;H=B.vert;B.vert=2;J=B.frag;B.frag=1;r.dirty=!0;a(A,c,e);E.depth_enable=b;k&&(u.cpuTime+=performance.now()-g);x.count=d;aa[3]=n;aa[4]=f;C.buffer=p;C.divisor=w;C.normalized=z;C.offset=y;C.size=t;C.state=l;C.stride=v;C.type=q;C.w=P;C.x=I;C.y=D;C.z=F;B.vert=H;B.frag=J;r.dirty=!0},batch:function(c,a){var b,f,h,C;b=G.next;b!==G.cur&&(b?I.bindFramebuffer(36160,
b.framebuffer):I.bindFramebuffer(36160,null),G.cur=b);if(r.dirty){var q,B,aa;b=E.dither;b!==r.dither&&(b?I.enable(3024):I.disable(3024),r.dither=b);b=E.blend_enable;b!==r.blend_enable&&(b?I.enable(3042):I.disable(3042),r.blend_enable=b);b=F[0];q=F[1];B=F[2];aa=F[3];if(b!==D[0]||q!==D[1]||B!==D[2]||aa!==D[3])I.blendColor(b,q,B,aa),D[0]=b,D[1]=q,D[2]=B,D[3]=aa;b=ka[0];q=ka[1];if(b!==t[0]||q!==t[1])I.blendEquationSeparate(b,q),t[0]=b,t[1]=q;b=ba[0];q=ba[1];B=ba[2];aa=ba[3];if(b!==L[0]||q!==L[1]||B!==
L[2]||aa!==L[3])I.blendFuncSeparate(b,q,B,aa),L[0]=b,L[1]=q,L[2]=B,L[3]=aa;b=E.depth_func;b!==r.depth_func&&(I.depthFunc(b),r.depth_func=b);b=T[0];q=T[1];if(b!==W[0]||q!==W[1])I.depthRange(b,q),W[0]=b,W[1]=q;b=E.depth_mask;b!==r.depth_mask&&(I.depthMask(b),r.depth_mask=b);b=fa[0];q=fa[1];B=fa[2];aa=fa[3];if(b!==ua[0]||q!==ua[1]||B!==ua[2]||aa!==ua[3])I.colorMask(b,q,B,aa),ua[0]=b,ua[1]=q,ua[2]=B,ua[3]=aa;b=E.cull_enable;b!==r.cull_enable&&(b?I.enable(2884):I.disable(2884),r.cull_enable=b);b=E.cull_face;
b!==r.cull_face&&(I.cullFace(b),r.cull_face=b);b=E.frontFace;b!==r.frontFace&&(I.frontFace(b),r.frontFace=b);b=E.lineWidth;b!==r.lineWidth&&(I.lineWidth(b),r.lineWidth=b);b=E.polygonOffset_enable;b!==r.polygonOffset_enable&&(b?I.enable(32823):I.disable(32823),r.polygonOffset_enable=b);b=S[0];q=S[1];if(b!==O[0]||q!==O[1])I.polygonOffset(b,q),O[0]=b,O[1]=q;b=E.sample_alpha;b!==r.sample_alpha&&(b?I.enable(32926):I.disable(32926),r.sample_alpha=b);b=E.sample_enable;b!==r.sample_enable&&(b?I.enable(32928):
I.disable(32928),r.sample_enable=b);b=M[0];q=M[1];if(b!==N[0]||q!==N[1])I.sampleCoverage(b,q),N[0]=b,N[1]=q;b=E.stencil_enable;b!==r.stencil_enable&&(b?I.enable(2960):I.disable(2960),r.stencil_enable=b);b=E.stencil_mask;b!==r.stencil_mask&&(I.stencilMask(b),r.stencil_mask=b);b=qa[0];q=qa[1];B=qa[2];if(b!==na[0]||q!==na[1]||B!==na[2])I.stencilFunc(b,q,B),na[0]=b,na[1]=q,na[2]=B;b=da[0];q=da[1];B=da[2];aa=da[3];if(b!==U[0]||q!==U[1]||B!==U[2]||aa!==U[3])I.stencilOpSeparate(b,q,B,aa),U[0]=b,U[1]=q,U[2]=
B,U[3]=aa;b=J[0];q=J[1];B=J[2];aa=J[3];if(b!==K[0]||q!==K[1]||B!==K[2]||aa!==K[3])I.stencilOpSeparate(b,q,B,aa),K[0]=b,K[1]=q,K[2]=B,K[3]=aa;b=E.scissor_enable;b!==r.scissor_enable&&(b?I.enable(3089):I.disable(3089),r.scissor_enable=b);b=Q[0];q=Q[1];B=Q[2];aa=Q[3];if(b!==R[0]||q!==R[1]||B!==R[2]||aa!==R[3])I.scissor(b,q,B,aa),R[0]=b,R[1]=q,R[2]=B,R[3]=aa;b=la[0];q=la[1];B=la[2];aa=la[3];if(b!==ha[0]||q!==ha[1]||B!==ha[2]||aa!==ha[3])I.viewport(b,q,B,aa),ha[0]=b,ha[1]=q,ha[2]=B,ha[3]=aa}I.disable(2929);
r.depth_enable=!1;if(b=r.profile)f=performance.now(),u.count+=a;I.useProgram(y.program);H.setVAO(null);q=w.location;B=z[q];B.buffer||I.enableVertexAttribArray(q);if(B.type!==m.dtype||2!==B.size||B.buffer!==m||!1!==B.normalized||0!==B.offset||0!==B.stride)I.bindBuffer(34962,m.buffer),I.vertexAttribPointer(q,2,m.dtype,!1,0,0),B.type=m.dtype,B.size=2,B.buffer=m,B.normalized=!1,B.offset=0,B.stride=0;h=e.call(this,A,C,h);"number"!==typeof h&&d.commandRaise(k,l);I.uniform1f(n.location,h);(q=x.elements)?
I.bindBuffer(34963,q.buffer.buffer):H.currentVAO&&(q=v.getElements(H.currentVAO.elements))&&I.bindBuffer(34963,q.buffer.buffer);B=x.primitive;aa=x.offset;for(h=0;h<a;++h){C=c[h];var Hb,Ua,ga,ea,sa,wa,Ea;Hb=C.color;ra(Hb)&&4===Hb.length||d.commandRaise(g,l);C=Hb[0];ga=Hb[1];sa=Hb[2];Hb=Hb[3];h&&Ua===C&&ea===ga&&wa===sa&&Ea===Hb||(Ua=C,ea=ga,wa=sa,Ea=Hb,I.uniform4f(p.location,C,ga,sa,Hb));q?I.drawElements(B,3,q.type,aa<<(q.type-5121>>1)):I.drawArrays(B,aa,3)}r.dirty=!0;H.setVAO(null);b&&(u.cpuTime+=
performance.now()-f)}}},"$13,color,position":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n){var p,w,z,A,r,x,v,G,I,ra,E,B,aa,H,F,D,ka,t,ba,L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da;p=a.attributes;w=a.context;z=a.current;A=a.draw;r=a.framebuffer;x=a.gl;v=a.next;G=a.shader;I=a.uniforms;ra=a.vao;E=v.blend_color;B=z.blend_color;aa=v.blend_equation;H=z.blend_equation;F=v.blend_func;D=z.blend_func;ka=v.colorMask;t=z.colorMask;ba=v.depth_range;L=z.depth_range;fa=v.polygonOffset_offset;ua=z.polygonOffset_offset;T=v.sample_coverage;
W=z.sample_coverage;S=v.scissor_box;O=z.scissor_box;M=v.stencil_func;N=z.stencil_func;Q=v.stencil_opBack;R=z.stencil_opBack;qa=v.stencil_opFront;na=z.stencil_opFront;J=v.viewport;K=z.viewport;da=[1,0,0,1];return{draw:function(c){var a,e,k;c=r.next;c!==r.cur&&(c?x.bindFramebuffer(36160,c.framebuffer):x.bindFramebuffer(36160,null),r.cur=c);if(z.dirty){var h;c=v.dither;c!==z.dither&&(c?x.enable(3024):x.disable(3024),z.dither=c);c=v.blend_enable;c!==z.blend_enable&&(c?x.enable(3042):x.disable(3042),z.blend_enable=
c);c=E[0];e=E[1];k=E[2];h=E[3];if(c!==B[0]||e!==B[1]||k!==B[2]||h!==B[3])x.blendColor(c,e,k,h),B[0]=c,B[1]=e,B[2]=k,B[3]=h;c=aa[0];e=aa[1];if(c!==H[0]||e!==H[1])x.blendEquationSeparate(c,e),H[0]=c,H[1]=e;c=F[0];e=F[1];k=F[2];h=F[3];if(c!==D[0]||e!==D[1]||k!==D[2]||h!==D[3])x.blendFuncSeparate(c,e,k,h),D[0]=c,D[1]=e,D[2]=k,D[3]=h;c=v.depth_enable;c!==z.depth_enable&&(c?x.enable(2929):x.disable(2929),z.depth_enable=c);c=v.depth_func;c!==z.depth_func&&(x.depthFunc(c),z.depth_func=c);c=ba[0];e=ba[1];
if(c!==L[0]||e!==L[1])x.depthRange(c,e),L[0]=c,L[1]=e;c=v.depth_mask;c!==z.depth_mask&&(x.depthMask(c),z.depth_mask=c);c=ka[0];e=ka[1];k=ka[2];h=ka[3];if(c!==t[0]||e!==t[1]||k!==t[2]||h!==t[3])x.colorMask(c,e,k,h),t[0]=c,t[1]=e,t[2]=k,t[3]=h;c=v.cull_enable;c!==z.cull_enable&&(c?x.enable(2884):x.disable(2884),z.cull_enable=c);c=v.cull_face;c!==z.cull_face&&(x.cullFace(c),z.cull_face=c);c=v.frontFace;c!==z.frontFace&&(x.frontFace(c),z.frontFace=c);c=v.polygonOffset_enable;c!==z.polygonOffset_enable&&
(c?x.enable(32823):x.disable(32823),z.polygonOffset_enable=c);c=fa[0];e=fa[1];if(c!==ua[0]||e!==ua[1])x.polygonOffset(c,e),ua[0]=c,ua[1]=e;c=v.sample_alpha;c!==z.sample_alpha&&(c?x.enable(32926):x.disable(32926),z.sample_alpha=c);c=v.sample_enable;c!==z.sample_enable&&(c?x.enable(32928):x.disable(32928),z.sample_enable=c);c=T[0];e=T[1];if(c!==W[0]||e!==W[1])x.sampleCoverage(c,e),W[0]=c,W[1]=e;c=v.stencil_enable;c!==z.stencil_enable&&(c?x.enable(2960):x.disable(2960),z.stencil_enable=c);c=v.stencil_mask;
c!==z.stencil_mask&&(x.stencilMask(c),z.stencil_mask=c);c=M[0];e=M[1];k=M[2];if(c!==N[0]||e!==N[1]||k!==N[2])x.stencilFunc(c,e,k),N[0]=c,N[1]=e,N[2]=k;c=qa[0];e=qa[1];k=qa[2];h=qa[3];if(c!==na[0]||e!==na[1]||k!==na[2]||h!==na[3])x.stencilOpSeparate(c,e,k,h),na[0]=c,na[1]=e,na[2]=k,na[3]=h;c=Q[0];e=Q[1];k=Q[2];h=Q[3];if(c!==R[0]||e!==R[1]||k!==R[2]||h!==R[3])x.stencilOpSeparate(c,e,k,h),R[0]=c,R[1]=e,R[2]=k,R[3]=h;c=v.scissor_enable;c!==z.scissor_enable&&(c?x.enable(3089):x.disable(3089),z.scissor_enable=
c);c=S[0];e=S[1];k=S[2];h=S[3];if(c!==O[0]||e!==O[1]||k!==O[2]||h!==O[3])x.scissor(c,e,k,h),O[0]=c,O[1]=e,O[2]=k,O[3]=h;c=J[0];e=J[1];k=J[2];h=J[3];if(c!==K[0]||e!==K[1]||k!==K[2]||h!==K[3])x.viewport(c,e,k,h),K[0]=c,K[1]=e,K[2]=k,K[3]=h}x.lineWidth(1);z.lineWidth=1;if(c=z.profile)a=performance.now(),u.count++;x.useProgram(q.program);ra.setVAO(null);e=n.location;k=p[e];k.buffer||x.enableVertexAttribArray(e);if(k.type!==m.dtype||2!==k.size||k.buffer!==m||!1!==k.normalized||0!==k.offset||0!==k.stride)x.bindBuffer(34962,
m.buffer),x.vertexAttribPointer(e,2,m.dtype,!1,0,0),k.type=m.dtype,k.size=2,k.buffer=m,k.normalized=!1,k.offset=0,k.stride=0;x.uniform4f(g.location,1,0,0,1);b&&x.bindBuffer(34963,b.buffer.buffer);e=b.primType;k=b.vertCount-0;0<=k||d.commandRaise(f,l);k&&(x.drawElements(e,k,b.type,0<<(b.type-5121>>1)),z.dirty=!0,ra.setVAO(null),c&&(u.cpuTime+=performance.now()-a))},scope:function(e,a,b){var k,g,f,n,p,y,t,q,x,r,B,ma,E,D,F,H,J,K,L,M,N,O;k=v.lineWidth;v.lineWidth=1;if(g=z.profile)f=performance.now(),
u.count++;n=A.elements;A.elements=c;p=A.offset;A.offset=0;y=c.vertCount-0;0<=y||d.commandRaise(h,l);t=A.count;A.count=y;q=c.primType;y=A.primitive;A.primitive=q;q=I[3];I[3]=da;x=C.buffer;C.buffer=m;r=C.divisor;C.divisor=0;B=C.normalized;C.normalized=!1;ma=C.offset;C.offset=0;E=C.size;C.size=0;D=C.state;C.state=1;F=C.stride;C.stride=0;H=C.type;C.type=m.dtype;J=C.w;C.w=0;K=C.x;C.x=0;L=C.y;C.y=0;M=C.z;C.z=0;N=G.vert;G.vert=2;O=G.frag;G.frag=1;z.dirty=!0;a(w,e,b);v.lineWidth=k;g&&(u.cpuTime+=performance.now()-
f);A.elements=n;A.offset=p;A.count=t;A.primitive=y;I[3]=q;C.buffer=x;C.divisor=r;C.normalized=B;C.offset=ma;C.size=E;C.state=D;C.stride=F;C.type=H;C.w=J;C.x=K;C.y=L;C.z=M;G.vert=N;G.frag=O;z.dirty=!0},batch:function(c,a){var b,f,h;b=r.next;b!==r.cur&&(b?x.bindFramebuffer(36160,b.framebuffer):x.bindFramebuffer(36160,null),r.cur=b);if(z.dirty){var w,A;b=v.dither;b!==z.dither&&(b?x.enable(3024):x.disable(3024),z.dither=b);b=v.blend_enable;b!==z.blend_enable&&(b?x.enable(3042):x.disable(3042),z.blend_enable=
b);b=E[0];h=E[1];w=E[2];A=E[3];if(b!==B[0]||h!==B[1]||w!==B[2]||A!==B[3])x.blendColor(b,h,w,A),B[0]=b,B[1]=h,B[2]=w,B[3]=A;b=aa[0];h=aa[1];if(b!==H[0]||h!==H[1])x.blendEquationSeparate(b,h),H[0]=b,H[1]=h;b=F[0];h=F[1];w=F[2];A=F[3];if(b!==D[0]||h!==D[1]||w!==D[2]||A!==D[3])x.blendFuncSeparate(b,h,w,A),D[0]=b,D[1]=h,D[2]=w,D[3]=A;b=v.depth_enable;b!==z.depth_enable&&(b?x.enable(2929):x.disable(2929),z.depth_enable=b);b=v.depth_func;b!==z.depth_func&&(x.depthFunc(b),z.depth_func=b);b=ba[0];h=ba[1];
if(b!==L[0]||h!==L[1])x.depthRange(b,h),L[0]=b,L[1]=h;b=v.depth_mask;b!==z.depth_mask&&(x.depthMask(b),z.depth_mask=b);b=ka[0];h=ka[1];w=ka[2];A=ka[3];if(b!==t[0]||h!==t[1]||w!==t[2]||A!==t[3])x.colorMask(b,h,w,A),t[0]=b,t[1]=h,t[2]=w,t[3]=A;b=v.cull_enable;b!==z.cull_enable&&(b?x.enable(2884):x.disable(2884),z.cull_enable=b);b=v.cull_face;b!==z.cull_face&&(x.cullFace(b),z.cull_face=b);b=v.frontFace;b!==z.frontFace&&(x.frontFace(b),z.frontFace=b);b=v.polygonOffset_enable;b!==z.polygonOffset_enable&&
(b?x.enable(32823):x.disable(32823),z.polygonOffset_enable=b);b=fa[0];h=fa[1];if(b!==ua[0]||h!==ua[1])x.polygonOffset(b,h),ua[0]=b,ua[1]=h;b=v.sample_alpha;b!==z.sample_alpha&&(b?x.enable(32926):x.disable(32926),z.sample_alpha=b);b=v.sample_enable;b!==z.sample_enable&&(b?x.enable(32928):x.disable(32928),z.sample_enable=b);b=T[0];h=T[1];if(b!==W[0]||h!==W[1])x.sampleCoverage(b,h),W[0]=b,W[1]=h;b=v.stencil_enable;b!==z.stencil_enable&&(b?x.enable(2960):x.disable(2960),z.stencil_enable=b);b=v.stencil_mask;
b!==z.stencil_mask&&(x.stencilMask(b),z.stencil_mask=b);b=M[0];h=M[1];w=M[2];if(b!==N[0]||h!==N[1]||w!==N[2])x.stencilFunc(b,h,w),N[0]=b,N[1]=h,N[2]=w;b=qa[0];h=qa[1];w=qa[2];A=qa[3];if(b!==na[0]||h!==na[1]||w!==na[2]||A!==na[3])x.stencilOpSeparate(b,h,w,A),na[0]=b,na[1]=h,na[2]=w,na[3]=A;b=Q[0];h=Q[1];w=Q[2];A=Q[3];if(b!==R[0]||h!==R[1]||w!==R[2]||A!==R[3])x.stencilOpSeparate(b,h,w,A),R[0]=b,R[1]=h,R[2]=w,R[3]=A;b=v.scissor_enable;b!==z.scissor_enable&&(b?x.enable(3089):x.disable(3089),z.scissor_enable=
b);b=S[0];h=S[1];w=S[2];A=S[3];if(b!==O[0]||h!==O[1]||w!==O[2]||A!==O[3])x.scissor(b,h,w,A),O[0]=b,O[1]=h,O[2]=w,O[3]=A;b=J[0];h=J[1];w=J[2];A=J[3];if(b!==K[0]||h!==K[1]||w!==K[2]||A!==K[3])x.viewport(b,h,w,A),K[0]=b,K[1]=h,K[2]=w,K[3]=A}x.lineWidth(1);z.lineWidth=1;if(b=z.profile)f=performance.now(),u.count+=a;x.useProgram(y.program);ra.setVAO(null);h=n.location;w=p[h];w.buffer||x.enableVertexAttribArray(h);if(w.type!==m.dtype||2!==w.size||w.buffer!==m||!1!==w.normalized||0!==w.offset||0!==w.stride)x.bindBuffer(34962,
m.buffer),x.vertexAttribPointer(h,2,m.dtype,!1,0,0),w.type=m.dtype,w.size=2,w.buffer=m,w.normalized=!1,w.offset=0,w.stride=0;x.uniform4f(g.location,1,0,0,1);e&&x.bindBuffer(34963,e.buffer.buffer);w=e.primType;A=e.vertCount-0;0<=A||d.commandRaise(k,l);for(h=0;h<a;++h)A&&x.drawElements(w,A,e.type,0<<(e.type-5121>>1));z.dirty=!0;ra.setVAO(null);b&&(u.cpuTime+=performance.now()-f)}}},"$20,mouse,position,t,texture":function(a,d,l,u,q,m,b,f,c,h,C,y,e,k,g,n,p,w,z,A,r,x,v,G,I){var ra,E,B,aa,H,F,D,ka,t,ba,
L,fa,ua,T,W,S,O,M,N,Q,R,qa,na,J,K,da,U,la,ha,Aa,xa,ca,Da,ja,oa,Ba;ra=a.attributes;E=a.context;B=a.current;aa=a.draw;H=a.elements;F=a.framebuffer;D=a.gl;ka=a.isArrayLike;t=a.next;ba=a.shader;L=a.uniforms;fa=a.vao;ua=t.blend_color;T=B.blend_color;W=t.blend_equation;S=B.blend_equation;O=t.blend_func;M=B.blend_func;N=t.colorMask;Q=B.colorMask;R=t.depth_range;qa=B.depth_range;na=t.polygonOffset_offset;J=B.polygonOffset_offset;K=t.sample_coverage;da=B.sample_coverage;U=t.scissor_box;la=B.scissor_box;ha=
t.stencil_func;Aa=B.stencil_func;xa=t.stencil_opBack;ca=B.stencil_opBack;Da=t.stencil_opFront;ja=B.stencil_opFront;oa=t.viewport;Ba=B.viewport;return{draw:function(e){var a,k,g,n;a=F.next;a!==F.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),F.cur=a);if(B.dirty){var p;a=t.dither;a!==B.dither&&(a?D.enable(3024):D.disable(3024),B.dither=a);a=t.blend_enable;a!==B.blend_enable&&(a?D.enable(3042):D.disable(3042),B.blend_enable=a);a=ua[0];g=ua[1];n=ua[2];p=ua[3];if(a!==T[0]||
g!==T[1]||n!==T[2]||p!==T[3])D.blendColor(a,g,n,p),T[0]=a,T[1]=g,T[2]=n,T[3]=p;a=W[0];g=W[1];if(a!==S[0]||g!==S[1])D.blendEquationSeparate(a,g),S[0]=a,S[1]=g;a=O[0];g=O[1];n=O[2];p=O[3];if(a!==M[0]||g!==M[1]||n!==M[2]||p!==M[3])D.blendFuncSeparate(a,g,n,p),M[0]=a,M[1]=g,M[2]=n,M[3]=p;a=t.depth_enable;a!==B.depth_enable&&(a?D.enable(2929):D.disable(2929),B.depth_enable=a);a=t.depth_func;a!==B.depth_func&&(D.depthFunc(a),B.depth_func=a);a=R[0];g=R[1];if(a!==qa[0]||g!==qa[1])D.depthRange(a,g),qa[0]=
a,qa[1]=g;a=t.depth_mask;a!==B.depth_mask&&(D.depthMask(a),B.depth_mask=a);a=N[0];g=N[1];n=N[2];p=N[3];if(a!==Q[0]||g!==Q[1]||n!==Q[2]||p!==Q[3])D.colorMask(a,g,n,p),Q[0]=a,Q[1]=g,Q[2]=n,Q[3]=p;a=t.cull_enable;a!==B.cull_enable&&(a?D.enable(2884):D.disable(2884),B.cull_enable=a);a=t.cull_face;a!==B.cull_face&&(D.cullFace(a),B.cull_face=a);a=t.frontFace;a!==B.frontFace&&(D.frontFace(a),B.frontFace=a);a=t.lineWidth;a!==B.lineWidth&&(D.lineWidth(a),B.lineWidth=a);a=t.polygonOffset_enable;a!==B.polygonOffset_enable&&
(a?D.enable(32823):D.disable(32823),B.polygonOffset_enable=a);a=na[0];g=na[1];if(a!==J[0]||g!==J[1])D.polygonOffset(a,g),J[0]=a,J[1]=g;a=t.sample_alpha;a!==B.sample_alpha&&(a?D.enable(32926):D.disable(32926),B.sample_alpha=a);a=t.sample_enable;a!==B.sample_enable&&(a?D.enable(32928):D.disable(32928),B.sample_enable=a);a=K[0];g=K[1];if(a!==da[0]||g!==da[1])D.sampleCoverage(a,g),da[0]=a,da[1]=g;a=t.stencil_enable;a!==B.stencil_enable&&(a?D.enable(2960):D.disable(2960),B.stencil_enable=a);a=t.stencil_mask;
a!==B.stencil_mask&&(D.stencilMask(a),B.stencil_mask=a);a=ha[0];g=ha[1];n=ha[2];if(a!==Aa[0]||g!==Aa[1]||n!==Aa[2])D.stencilFunc(a,g,n),Aa[0]=a,Aa[1]=g,Aa[2]=n;a=Da[0];g=Da[1];n=Da[2];p=Da[3];if(a!==ja[0]||g!==ja[1]||n!==ja[2]||p!==ja[3])D.stencilOpSeparate(a,g,n,p),ja[0]=a,ja[1]=g,ja[2]=n,ja[3]=p;a=xa[0];g=xa[1];n=xa[2];p=xa[3];if(a!==ca[0]||g!==ca[1]||n!==ca[2]||p!==ca[3])D.stencilOpSeparate(a,g,n,p),ca[0]=a,ca[1]=g,ca[2]=n,ca[3]=p;a=t.scissor_enable;a!==B.scissor_enable&&(a?D.enable(3089):D.disable(3089),
B.scissor_enable=a);a=U[0];g=U[1];n=U[2];p=U[3];if(a!==la[0]||g!==la[1]||n!==la[2]||p!==la[3])D.scissor(a,g,n,p),la[0]=a,la[1]=g,la[2]=n,la[3]=p;a=oa[0];g=oa[1];n=oa[2];p=oa[3];if(a!==Ba[0]||g!==Ba[1]||n!==Ba[2]||p!==Ba[3])D.viewport(a,g,n,p),Ba[0]=a,Ba[1]=g,Ba[2]=n,Ba[3]=p;B.dirty=!1}if(a=B.profile)k=performance.now(),u.count++;D.useProgram(q.program);fa.setVAO(null);g=v.location;n=ra[g];n.buffer||D.enableVertexAttribArray(g);if(n.type!==m.dtype||2!==n.size||n.buffer!==m||!1!==n.normalized||0!==
n.offset||0!==n.stride)D.bindBuffer(34962,m.buffer),D.vertexAttribPointer(g,2,m.dtype,!1,0,0),n.type=m.dtype,n.size=2,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;g=b.call(this,E,e,0);ka(g)&&2===g.length||d.commandRaise(f,l);D.uniform2f(x.location,g[0],g[1]);e=c.call(this,E,e,0);"number"!==typeof e&&d.commandRaise(h,l);D.uniform1f(G.location,e);D.uniform1i(I.location,C.bind());(e=aa.elements)?D.bindBuffer(34963,e.buffer.buffer):fa.currentVAO&&(e=H.getElements(fa.currentVAO.elements))&&D.bindBuffer(34963,
e.buffer.buffer);g=aa.primitive;n=aa.offset;e?D.drawElements(g,3,e.type,n<<(e.type-5121>>1)):D.drawArrays(g,n,3);fa.setVAO(null);a&&(u.cpuTime+=performance.now()-k);C.unbind()},scope:function(c,a,b){var h,d,f,n,p,w,z,A,t,l,C,q,v,x,r,P,I,D,ma,F;if(h=B.profile)d=performance.now(),u.count++;f=aa.count;aa.count=3;n=y.call(this,E,c,b);p=L[3];L[3]=n;w=e.call(this,E,c,b);n=L[4];L[4]=w;w=L[5];L[5]=k;z=g.buffer;g.buffer=m;A=g.divisor;g.divisor=0;t=g.normalized;g.normalized=!1;l=g.offset;g.offset=0;C=g.size;
g.size=0;q=g.state;g.state=1;v=g.stride;g.stride=0;x=g.type;g.type=m.dtype;r=g.w;g.w=0;P=g.x;g.x=0;I=g.y;g.y=0;D=g.z;g.z=0;ma=ba.vert;ba.vert=2;F=ba.frag;ba.frag=1;a(E,c,b);h&&(u.cpuTime+=performance.now()-d);aa.count=f;L[3]=p;L[4]=n;L[5]=w;g.buffer=z;g.divisor=A;g.normalized=t;g.offset=l;g.size=C;g.state=q;g.stride=v;g.type=x;g.w=r;g.x=P;g.y=I;g.z=D;ba.vert=ma;ba.frag=F},batch:function(c,a){var e,b,g;e=F.next;e!==F.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),F.cur=
e);if(B.dirty){var k,h,f;e=t.dither;e!==B.dither&&(e?D.enable(3024):D.disable(3024),B.dither=e);e=t.blend_enable;e!==B.blend_enable&&(e?D.enable(3042):D.disable(3042),B.blend_enable=e);e=ua[0];k=ua[1];h=ua[2];f=ua[3];if(e!==T[0]||k!==T[1]||h!==T[2]||f!==T[3])D.blendColor(e,k,h,f),T[0]=e,T[1]=k,T[2]=h,T[3]=f;e=W[0];k=W[1];if(e!==S[0]||k!==S[1])D.blendEquationSeparate(e,k),S[0]=e,S[1]=k;e=O[0];k=O[1];h=O[2];f=O[3];if(e!==M[0]||k!==M[1]||h!==M[2]||f!==M[3])D.blendFuncSeparate(e,k,h,f),M[0]=e,M[1]=k,
M[2]=h,M[3]=f;e=t.depth_enable;e!==B.depth_enable&&(e?D.enable(2929):D.disable(2929),B.depth_enable=e);e=t.depth_func;e!==B.depth_func&&(D.depthFunc(e),B.depth_func=e);e=R[0];k=R[1];if(e!==qa[0]||k!==qa[1])D.depthRange(e,k),qa[0]=e,qa[1]=k;e=t.depth_mask;e!==B.depth_mask&&(D.depthMask(e),B.depth_mask=e);e=N[0];k=N[1];h=N[2];f=N[3];if(e!==Q[0]||k!==Q[1]||h!==Q[2]||f!==Q[3])D.colorMask(e,k,h,f),Q[0]=e,Q[1]=k,Q[2]=h,Q[3]=f;e=t.cull_enable;e!==B.cull_enable&&(e?D.enable(2884):D.disable(2884),B.cull_enable=
e);e=t.cull_face;e!==B.cull_face&&(D.cullFace(e),B.cull_face=e);e=t.frontFace;e!==B.frontFace&&(D.frontFace(e),B.frontFace=e);e=t.lineWidth;e!==B.lineWidth&&(D.lineWidth(e),B.lineWidth=e);e=t.polygonOffset_enable;e!==B.polygonOffset_enable&&(e?D.enable(32823):D.disable(32823),B.polygonOffset_enable=e);e=na[0];k=na[1];if(e!==J[0]||k!==J[1])D.polygonOffset(e,k),J[0]=e,J[1]=k;e=t.sample_alpha;e!==B.sample_alpha&&(e?D.enable(32926):D.disable(32926),B.sample_alpha=e);e=t.sample_enable;e!==B.sample_enable&&
(e?D.enable(32928):D.disable(32928),B.sample_enable=e);e=K[0];k=K[1];if(e!==da[0]||k!==da[1])D.sampleCoverage(e,k),da[0]=e,da[1]=k;e=t.stencil_enable;e!==B.stencil_enable&&(e?D.enable(2960):D.disable(2960),B.stencil_enable=e);e=t.stencil_mask;e!==B.stencil_mask&&(D.stencilMask(e),B.stencil_mask=e);e=ha[0];k=ha[1];h=ha[2];if(e!==Aa[0]||k!==Aa[1]||h!==Aa[2])D.stencilFunc(e,k,h),Aa[0]=e,Aa[1]=k,Aa[2]=h;e=Da[0];k=Da[1];h=Da[2];f=Da[3];if(e!==ja[0]||k!==ja[1]||h!==ja[2]||f!==ja[3])D.stencilOpSeparate(e,
k,h,f),ja[0]=e,ja[1]=k,ja[2]=h,ja[3]=f;e=xa[0];k=xa[1];h=xa[2];f=xa[3];if(e!==ca[0]||k!==ca[1]||h!==ca[2]||f!==ca[3])D.stencilOpSeparate(e,k,h,f),ca[0]=e,ca[1]=k,ca[2]=h,ca[3]=f;e=t.scissor_enable;e!==B.scissor_enable&&(e?D.enable(3089):D.disable(3089),B.scissor_enable=e);e=U[0];k=U[1];h=U[2];f=U[3];if(e!==la[0]||k!==la[1]||h!==la[2]||f!==la[3])D.scissor(e,k,h,f),la[0]=e,la[1]=k,la[2]=h,la[3]=f;e=oa[0];k=oa[1];h=oa[2];f=oa[3];if(e!==Ba[0]||k!==Ba[1]||h!==Ba[2]||f!==Ba[3])D.viewport(e,k,h,f),Ba[0]=
e,Ba[1]=k,Ba[2]=h,Ba[3]=f;B.dirty=!1}if(e=B.profile)b=performance.now(),u.count+=a;D.useProgram(n.program);fa.setVAO(null);k=v.location;h=ra[k];h.buffer||D.enableVertexAttribArray(k);if(h.type!==m.dtype||2!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)D.bindBuffer(34962,m.buffer),D.vertexAttribPointer(k,2,m.dtype,!1,0,0),h.type=m.dtype,h.size=2,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;k=p.call(this,E,void 0,g);ka(k)&&2===k.length||d.commandRaise(w,l);D.uniform2f(x.location,
k[0],k[1]);g=z.call(this,E,void 0,g);"number"!==typeof g&&d.commandRaise(A,l);D.uniform1f(G.location,g);D.uniform1i(I.location,r.bind());(k=aa.elements)?D.bindBuffer(34963,k.buffer.buffer):fa.currentVAO&&(k=H.getElements(fa.currentVAO.elements))&&D.bindBuffer(34963,k.buffer.buffer);h=aa.primitive;f=aa.offset;for(g=0;g<a;++g)k?D.drawElements(h,3,k.type,f<<(k.type-5121>>1)):D.drawArrays(h,f,3);r.unbind();fa.setVAO(null);e&&(u.cpuTime+=performance.now()-b)}}}}},{}],25:[function(l,r,G){var a=l("./sorted-object-keys");
r.exports=function(d,l){for(var u=a(l),q=0;q<u.length;++q)d[u[q]]=l[u[q]];return d}},{"./sorted-object-keys":34}],26:[function(l,r,G){function a(a,d,m,b,f,c){for(var h=0;h<d;++h)for(var l=a[h],y=0;y<m;++y)for(var e=l[y],k=0;k<b;++k)f[c++]=e[k]}function d(l,q,m,b,f){for(var c=1,h=m+1;h<q.length;++h)c*=q[h];var C=q[m];if(4===q.length-m){var y=q[m+1],e=q[m+2];q=q[m+3];for(h=0;h<C;++h)a(l[h],y,e,q,b,f),f+=c}else for(h=0;h<C;++h)d(l[h],q,m+1,b,f),f+=c}var P=l("./pool");r.exports={shape:function(a){for(var d=
[];a.length;a=a[0])d.push(a.length);return d},flatten:function(l,q,m,b){var f=1;if(q.length)for(var c=0;c<q.length;++c)f*=q[c];else f=0;m=b||P.allocType(m,f);switch(q.length){case 0:break;case 1:b=q[0];for(q=0;q<b;++q)m[q]=l[q];break;case 2:b=q[0];q=q[1];for(c=f=0;c<b;++c)for(var h=l[c],C=0;C<q;++C)m[f++]=h[C];break;case 3:a(l,q[0],q[1],q[2],m,0);break;default:d(l,q,0,m,0)}return m}}},{"./pool":32}],27:[function(l,r,G){var a=l("./is-typed-array");r.exports=function(d){return Array.isArray(d)||a(d)}},
{"./is-typed-array":30}],28:[function(l,r,G){var a=l("./is-typed-array");r.exports=function(d){return!!d&&"object"===typeof d&&Array.isArray(d.shape)&&Array.isArray(d.stride)&&"number"===typeof d.offset&&d.shape.length===d.stride.length&&(Array.isArray(d.data)||a(d.data))}},{"./is-typed-array":30}],29:[function(l,r,G){r.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(l,r,G){r.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof
Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(l,r,G){r.exports=function(a,d){for(var l=Array(a),u=0;u<a;++u)l[u]=d(u);return l}},{}],32:[function(l,r,G){function a(a){var d,m;d=(65535<a)<<4;a>>>=d;m=(255<a)<<3;a>>>=m;d|=m;m=(15<a)<<2;a>>>=m;d|=m;m=(3<a)<<1;return d|m|a>>>m>>1}function d(){function d(b){a:{for(var f=16;268435456>=f;f*=16)if(b<=f){b=f;break a}b=0}f=m[a(b)>>2];return 0<
f.length?f.pop():new ArrayBuffer(b)}function l(b){m[a(b.byteLength)>>2].push(b)}var m=P(8,function(){return[]});return{alloc:d,free:l,allocType:function(a,f){var c=null;switch(a){case 5120:c=new Int8Array(d(f),0,f);break;case 5121:c=new Uint8Array(d(f),0,f);break;case 5122:c=new Int16Array(d(2*f),0,f);break;case 5123:c=new Uint16Array(d(2*f),0,f);break;case 5124:c=new Int32Array(d(4*f),0,f);break;case 5125:c=new Uint32Array(d(4*f),0,f);break;case 5126:c=new Float32Array(d(4*f),0,f);break;default:return null}return c.length!==
f?c.subarray(0,f):c},freeType:function(a){l(a.buffer)}}}var P=l("./loop");l=d();l.zero=d();r.exports=l},{"./loop":31}],33:[function(l,r,G){r.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(l,r,G){r.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(l,r,G){var a=l("./pool"),
d=new Float32Array(1),P=new Uint32Array(d.buffer);r.exports=function(l){for(var q=a.allocType(5123,l.length),m=0;m<l.length;++m)if(isNaN(l[m]))q[m]=65535;else if(Infinity===l[m])q[m]=31744;else if(-Infinity===l[m])q[m]=64512;else{d[0]=l[m];var b=P[0],f=b>>>31<<15,c=(b<<1>>>24)-127,b=b>>13&1023;q[m]=-24>c?f:-14>c?f+(b+1024>>-14-c):15<c?f+31744:f+(c+15<<10)+b}return q}},{"./pool":32}],36:[function(l,r,G){var a=l("./sorted-object-keys");r.exports=function(d){return a(d).map(function(a){return d[a]})}},
{"./sorted-object-keys":34}],37:[function(l,r,G){function a(a,d,c){function h(){var e=window.innerWidth,k=window.innerHeight;a!==document.body&&(k=l.getBoundingClientRect(),e=k.right-k.left,k=k.bottom-k.top);l.width=c*e;l.height=c*k}var l=document.createElement("canvas");m(l.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(l);a===document.body&&(l.style.position="absolute",m(a.style,{margin:0,padding:0}));var y;a!==document.body&&"function"===typeof ResizeObserver?
(y=new ResizeObserver(function(){setTimeout(h)}),y.observe(a)):window.addEventListener("resize",h,!1);h();return{canvas:l,onDestroy:function(){y?y.disconnect():window.removeEventListener("resize",h);a.removeChild(l)}}}function d(a,d){function c(c){try{return a.getContext(c,d)}catch(m){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function P(a){if("string"===typeof a)return a.split();q(Array.isArray(a),"invalid extension array");return a}function u(a){return"string"===
typeof a?(q("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var q=l("./util/check"),m=l("./util/extend");r.exports=function(b){var f=b||{},c,h,m,y;b={};var e=[],k=[],g="undefined"===typeof window?1:window.devicePixelRatio,n=!1,p=function(c){c&&q.raise(c)},w=function(){};"string"===typeof f?(q("undefined"!==typeof document,"selector queries only supported in DOM environments"),c=document.querySelector(f),q(c,"invalid query string for element")):"object"===
typeof f?"string"===typeof f.nodeName&&"function"===typeof f.appendChild&&"function"===typeof f.getBoundingClientRect?c=f:"function"===typeof f.drawArrays||"function"===typeof f.drawElements?(y=f,m=y.canvas):(q.constructor(f),"gl"in f?y=f.gl:"canvas"in f?m=u(f.canvas):"container"in f&&(h=u(f.container)),"attributes"in f&&(b=f.attributes,q.type(b,"object","invalid context attributes")),"extensions"in f&&(e=P(f.extensions)),"optionalExtensions"in f&&(k=P(f.optionalExtensions)),"onDone"in f&&(q.type(f.onDone,
"function","invalid or missing onDone callback"),p=f.onDone),"profile"in f&&(n=!!f.profile),"pixelRatio"in f&&(g=+f.pixelRatio,q(0<g,"invalid pixel ratio"))):q.raise("invalid arguments to regl");c&&("canvas"===c.nodeName.toLowerCase()?m=c:h=c);if(!y){if(!m){q("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");c=a(h||document.body,p,g);if(!c)return null;m=c.canvas;w=c.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);y=d(m,b)}return y?
{gl:y,canvas:m,container:h,extensions:e,optionalExtensions:k,pixelRatio:g,profile:n,onDone:p,onDestroy:w}:(w(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(l,r,G){var a=l("element-size");r.exports=function(l,u,q){function m(){var f=m.parent||l.parentNode;if("function"===typeof f)var c=f(d)||d,f=c[0],c=c[1];else f&&f!==document.body?(c=a(f),f=c[0]|0,c=c[1]|0):(f=window.innerWidth,c=window.innerHeight);
b?(l.setAttribute("width",f*m.scale+"px"),l.setAttribute("height",c*m.scale+"px")):(l.width=f*m.scale,l.height=c*m.scale);l.style.width=f+"px";l.style.height=c+"px";return m}var b="SVG"===l.nodeName.toUpperCase();l.style.position=l.style.position||"absolute";l.style.top=0;l.style.left=0;m.scale=parseFloat(q||1);m.parent=u;return m()};var d=new Float32Array(2)},{"element-size":42}],39:[function(l,r,G){var a=l("orbit-camera"),d=l("scroll-speed"),P=l("mouse-position"),u=l("mouse-pressed"),q=l("key-pressed");
r.exports=function(m,b){b=b||{};b.pan=!1!==b.pan;b.scale=!1!==b.scale;b.rotate=!1!==b.rotate;var f=d(m,b.scale),c=u(m,b.rotate),h=P(m),l=a([0,10,30],[0,0,0],[0,1,0]);l.tick=function(){var a=q("<control>")||q("<alt>"),e=q("<shift>"),k=m.height,g=m.width;b.rotate&&c.left&&!a&&!e&&l.rotate([h.x/g-.5,h.y/k-.5],[h.prevX/g-.5,h.prevY/k-.5]);(b.pan&&c.right||c.left&&a&&!e)&&l.pan([1*(h.x-h.prevX)/g,1*(h.y-h.prevY)/k]);b.scale&&f[1]&&(l.distance*=Math.exp(f[1]/k));if(b.scale&&(c.middle||c.left&&!a&&e)){a=
h.y-h.prevY;if(!a)return;l.distance*=Math.exp(a/k)}f.flush();h.flush()};return l}},{"key-pressed":75,"mouse-position":40,"mouse-pressed":41,"orbit-camera":76,"scroll-speed":79}],40:[function(l,r,G){var a=l("events/");r.exports=function(d,l){var u=new a;u.x=0;u.y=0;u.prevX=0;u.prevY=0;u.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===typeof window)return u;l=l||d||window;d=d||document.body;l.addEventListener("mousemove",d===document.body||d===window?function(a){u.prevX=u.x;u.prevY=
u.y;u.x=a.clientX;u.y=a.clientY;u.emit("move",a)}:function(a){u.prevX=u.x;u.prevY=u.y;var m=d.getBoundingClientRect();u.x=a.clientX-m.left;u.y=a.clientY-m.top;u.emit("move",a)},!1);return u}},{"events/":43}],41:[function(l,r,G){var a=l("events/"),d=["left","middle","right"];r.exports=function(l,u){function q(a){b.right=!1;b[d[a.button]]=!0;b.emit("down",a);if(u){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function m(a){b.right=!1;b[d[a.button]]=!1;b.emit("up",a);u&&a.preventDefault&&
(a.preventDefault(),a.stopPropagation())}var b=new a;b.left=!1;b.right=!1;b.middle=!1;"undefined"!==typeof window&&(l=l||window,l.addEventListener("mousedown",q,!1),l.addEventListener("mouseup",m,!1),u&&l.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return b}},{"events/":43}],42:[function(l,r,G){function a(a){return parseFloat(a)||0}r.exports=function(d){if(d===window||d===document.body)return[window.innerWidth,window.innerHeight];if(!d.parentNode){var l=
!0;document.body.appendChild(d)}var u=d.getBoundingClientRect(),q=getComputedStyle(d),m=(u.height|0)+a(q.getPropertyValue("margin-top"))+a(q.getPropertyValue("margin-bottom")),u=(u.width|0)+a(q.getPropertyValue("margin-left"))+a(q.getPropertyValue("margin-right"));l&&document.body.removeChild(d);return[u,m]}},{}],43:[function(l,r,G){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function d(a){return"function"===typeof a}function P(a){return"object"===typeof a&&
null!==a}r.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var l,m,b,f;this._events||(this._events={});if("error"===a&&(!this._events.error||P(this._events.error)&&!this._events.error.length)){l=arguments[1];if(l instanceof Error)throw l;m=Error('Uncaught, unspecified "error" event. ('+
l+")");m.context=l;throw m;}m=this._events[a];if(void 0===m)return!1;if(d(m))switch(arguments.length){case 1:m.call(this);break;case 2:m.call(this,arguments[1]);break;case 3:m.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),m.apply(this,l)}else if(P(m))for(l=Array.prototype.slice.call(arguments,1),f=m.slice(),m=f.length,b=0;b<m;b++)f[b].apply(this,l);return!0};a.prototype.addListener=function(l,q){var m;if(!d(q))throw TypeError("listener must be a function");
this._events||(this._events={});this._events.newListener&&this.emit("newListener",l,d(q.listener)?q.listener:q);this._events[l]?P(this._events[l])?this._events[l].push(q):this._events[l]=[this._events[l],q]:this._events[l]=q;P(this._events[l])&&!this._events[l].warned&&(m=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<m&&this._events[l].length>m&&(this._events[l].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",
this._events[l].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,l){function m(){this.removeListener(a,m);b||(b=!0,l.apply(this,arguments))}if(!d(l))throw TypeError("listener must be a function");var b=!1;m.listener=l;this.on(a,m);return this};a.prototype.removeListener=function(a,l){var m,b,f;if(!d(l))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;m=this._events[a];
f=m.length;b=-1;if(m===l||d(m.listener)&&m.listener===l)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,l);else if(P(m)){for(;0<f--;)if(m[f]===l||m[f].listener&&m[f].listener===l){b=f;break}if(0>b)return this;1===m.length?(m.length=0,delete this._events[a]):m.splice(b,1);this._events.removeListener&&this.emit("removeListener",a,l)}return this};a.prototype.removeAllListeners=function(a){var l;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?
this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(l in this._events)"removeListener"!==l&&this.removeAllListeners(l);this.removeAllListeners("removeListener");this._events={};return this}l=this._events[a];if(d(l))this.removeListener(a,l);else if(l)for(;l.length;)this.removeListener(a,l[l.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():
[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(d(a))return 1;if(a)return a.length}return 0};a.listenerCount=function(a,d){return a.listenerCount(d)}},{}],44:[function(l,r,G){r.exports=function(a,d){var l=d[0],u=d[1],q=d[2],m=d[3],b=d[4],f=d[5],c=d[6],h=d[7],C=d[8],y=d[9],e=d[10],k=d[11],g=d[12],n=d[13],p=d[14],w=d[15];a[0]=f*(e*w-k*p)-y*(c*w-h*p)+n*(c*k-h*e);a[1]=-(u*(e*w-k*p)-y*(q*w-m*p)+n*(q*k-m*e));a[2]=u*(c*w-h*p)-f*(q*w-m*p)+n*(q*h-m*c);a[3]=-(u*(c*k-h*e)-f*(q*
k-m*e)+y*(q*h-m*c));a[4]=-(b*(e*w-k*p)-C*(c*w-h*p)+g*(c*k-h*e));a[5]=l*(e*w-k*p)-C*(q*w-m*p)+g*(q*k-m*e);a[6]=-(l*(c*w-h*p)-b*(q*w-m*p)+g*(q*h-m*c));a[7]=l*(c*k-h*e)-b*(q*k-m*e)+C*(q*h-m*c);a[8]=b*(y*w-k*n)-C*(f*w-h*n)+g*(f*k-h*y);a[9]=-(l*(y*w-k*n)-C*(u*w-m*n)+g*(u*k-m*y));a[10]=l*(f*w-h*n)-b*(u*w-m*n)+g*(u*h-m*f);a[11]=-(l*(f*k-h*y)-b*(u*k-m*y)+C*(u*h-m*f));a[12]=-(b*(y*p-e*n)-C*(f*p-c*n)+g*(f*e-c*y));a[13]=l*(y*p-e*n)-C*(u*p-q*n)+g*(u*e-q*y);a[14]=-(l*(f*p-c*n)-b*(u*p-q*n)+g*(u*c-q*f));a[15]=l*
(f*e-c*y)-b*(u*e-q*y)+C*(u*c-q*f);return a}},{}],45:[function(l,r,G){r.exports=function(a){var d=new Float32Array(16);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d}},{}],46:[function(l,r,G){r.exports=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=
d[14];a[15]=d[15];return a}},{}],47:[function(l,r,G){r.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(l,r,G){r.exports=function(a){var d=a[0],l=a[1],u=a[2],q=a[3],m=a[4],b=a[5],f=a[6],c=a[7],h=a[8],C=a[9],y=a[10],e=a[11],k=a[12],g=a[13],n=a[14];a=a[15];return(d*b-l*m)*(y*a-e*n)-(d*f-u*m)*(C*a-e*g)+(d*c-q*m)*(C*n-y*g)+(l*f-u*b)*(h*a-e*k)-(l*c-q*b)*(h*n-y*
k)+(u*c-q*f)*(h*g-C*k)}},{}],49:[function(l,r,G){r.exports=function(a,d){var l=d[0],u=d[1],q=d[2],m=d[3],b=l+l,f=u+u,c=q+q,l=l*b,h=u*b,u=u*f,C=q*b,y=q*f,q=q*c,b=m*b,f=m*f,m=m*c;a[0]=1-u-q;a[1]=h+m;a[2]=C-f;a[3]=0;a[4]=h-m;a[5]=1-l-q;a[6]=y+b;a[7]=0;a[8]=C+f;a[9]=y-b;a[10]=1-l-u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(l,r,G){r.exports=function(a,d,l){var u,q,m=l[0],b=l[1];l=l[2];u=Math.sqrt(m*m+b*b+l*l);if(1E-6>Math.abs(u))return null;u=1/u;m*=u;b*=u;l*=u;u=Math.sin(d);
d=Math.cos(d);q=1-d;a[0]=m*m*q+d;a[1]=b*m*q+l*u;a[2]=l*m*q-b*u;a[3]=0;a[4]=m*b*q-l*u;a[5]=b*b*q+d;a[6]=l*b*q+m*u;a[7]=0;a[8]=m*l*q+b*u;a[9]=b*l*q-m*u;a[10]=l*l*q+d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(l,r,G){r.exports=function(a,d,l){var u=d[0],q=d[1],m=d[2],b=d[3],f=u+u,c=q+q,h=m+m;d=u*f;var C=u*c,u=u*h,y=q*c,q=q*h,m=m*h,f=b*f,c=b*c,b=b*h;a[0]=1-(y+m);a[1]=C+b;a[2]=u-c;a[3]=0;a[4]=C-b;a[5]=1-(d+m);a[6]=q+f;a[7]=0;a[8]=u+c;a[9]=q-f;a[10]=1-(d+y);a[11]=0;a[12]=l[0];a[13]=
l[1];a[14]=l[2];a[15]=1;return a}},{}],52:[function(l,r,G){r.exports=function(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(l,r,G){r.exports=function(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}},{}],54:[function(l,r,G){r.exports=function(a,d){var l=Math.sin(d),u=Math.cos(d);a[0]=1;a[1]=0;
a[2]=0;a[3]=0;a[4]=0;a[5]=u;a[6]=l;a[7]=0;a[8]=0;a[9]=-l;a[10]=u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(l,r,G){r.exports=function(a,d){var l=Math.sin(d),u=Math.cos(d);a[0]=u;a[1]=0;a[2]=-l;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=l;a[9]=0;a[10]=u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],56:[function(l,r,G){r.exports=function(a,d){var l=Math.sin(d),u=Math.cos(d);a[0]=u;a[1]=l;a[2]=0;a[3]=0;a[4]=-l;a[5]=u;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;
a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(l,r,G){r.exports=function(a,d,l,u,q,m,b){var f=1/(l-d),c=1/(q-u),h=1/(m-b);a[0]=2*m*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*m*c;a[6]=0;a[7]=0;a[8]=(l+d)*f;a[9]=(q+u)*c;a[10]=(b+m)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=b*m*2*h;a[15]=0;return a}},{}],58:[function(l,r,G){r.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(l,r,G){r.exports={create:l("./create"),
clone:l("./clone"),copy:l("./copy"),identity:l("./identity"),transpose:l("./transpose"),invert:l("./invert"),adjoint:l("./adjoint"),determinant:l("./determinant"),multiply:l("./multiply"),translate:l("./translate"),scale:l("./scale"),rotate:l("./rotate"),rotateX:l("./rotateX"),rotateY:l("./rotateY"),rotateZ:l("./rotateZ"),fromRotation:l("./fromRotation"),fromRotationTranslation:l("./fromRotationTranslation"),fromScaling:l("./fromScaling"),fromTranslation:l("./fromTranslation"),fromXRotation:l("./fromXRotation"),
fromYRotation:l("./fromYRotation"),fromZRotation:l("./fromZRotation"),fromQuat:l("./fromQuat"),frustum:l("./frustum"),perspective:l("./perspective"),perspectiveFromFieldOfView:l("./perspectiveFromFieldOfView"),ortho:l("./ortho"),lookAt:l("./lookAt"),str:l("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,
"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(l,r,G){r.exports=function(a,d){var l=d[0],u=d[1],q=d[2],m=d[3],b=d[4],f=d[5],c=d[6],h=d[7],C=d[8],y=d[9],e=d[10],k=d[11],g=d[12],n=d[13],p=d[14],w=d[15],z=l*f-u*b,A=l*c-q*b,r=l*h-m*b,x=u*c-q*f,v=u*h-m*f,G=q*h-m*c,I=C*n-y*g,ra=C*
p-e*g,E=C*w-k*g,B=y*p-e*n,aa=y*w-k*n,H=e*w-k*p,F=z*H-A*aa+r*B+x*E-v*ra+G*I;if(!F)return null;F=1/F;a[0]=(f*H-c*aa+h*B)*F;a[1]=(q*aa-u*H-m*B)*F;a[2]=(n*G-p*v+w*x)*F;a[3]=(e*v-y*G-k*x)*F;a[4]=(c*E-b*H-h*ra)*F;a[5]=(l*H-q*E+m*ra)*F;a[6]=(p*r-g*G-w*A)*F;a[7]=(C*G-e*r+k*A)*F;a[8]=(b*aa-f*E+h*I)*F;a[9]=(u*E-l*aa-m*I)*F;a[10]=(g*v-n*r+w*z)*F;a[11]=(y*r-C*v-k*z)*F;a[12]=(f*ra-b*B-c*I)*F;a[13]=(l*B-u*ra+q*I)*F;a[14]=(n*A-g*x-p*z)*F;a[15]=(C*x-y*A+e*z)*F;return a}},{}],61:[function(l,r,G){var a=l("./identity");
r.exports=function(d,l,u,q){var m,b,f,c,h,C,y,e,k=l[0],g=l[1];l=l[2];f=q[0];c=q[1];b=q[2];y=u[0];q=u[1];m=u[2];if(1E-6>Math.abs(k-y)&&1E-6>Math.abs(g-q)&&1E-6>Math.abs(l-m))return a(d);u=k-y;q=g-q;y=l-m;e=1/Math.sqrt(u*u+q*q+y*y);u*=e;q*=e;y*=e;m=c*y-b*q;b=b*u-f*y;f=f*q-c*u;(e=Math.sqrt(m*m+b*b+f*f))?(e=1/e,m*=e,b*=e,f*=e):f=b=m=0;c=q*f-y*b;h=y*m-u*f;C=u*b-q*m;(e=Math.sqrt(c*c+h*h+C*C))?(e=1/e,c*=e,h*=e,C*=e):C=h=c=0;d[0]=m;d[1]=c;d[2]=u;d[3]=0;d[4]=b;d[5]=h;d[6]=q;d[7]=0;d[8]=f;d[9]=C;d[10]=y;d[11]=
0;d[12]=-(m*k+b*g+f*l);d[13]=-(c*k+h*g+C*l);d[14]=-(u*k+q*g+y*l);d[15]=1;return d}},{"./identity":58}],62:[function(l,r,G){r.exports=function(a,d,l){var u=d[0],q=d[1],m=d[2],b=d[3],f=d[4],c=d[5],h=d[6],C=d[7],y=d[8],e=d[9],k=d[10],g=d[11],n=d[12],p=d[13],w=d[14];d=d[15];var z=l[0],A=l[1],r=l[2],x=l[3];a[0]=z*u+A*f+r*y+x*n;a[1]=z*q+A*c+r*e+x*p;a[2]=z*m+A*h+r*k+x*w;a[3]=z*b+A*C+r*g+x*d;z=l[4];A=l[5];r=l[6];x=l[7];a[4]=z*u+A*f+r*y+x*n;a[5]=z*q+A*c+r*e+x*p;a[6]=z*m+A*h+r*k+x*w;a[7]=z*b+A*C+r*g+x*d;z=
l[8];A=l[9];r=l[10];x=l[11];a[8]=z*u+A*f+r*y+x*n;a[9]=z*q+A*c+r*e+x*p;a[10]=z*m+A*h+r*k+x*w;a[11]=z*b+A*C+r*g+x*d;z=l[12];A=l[13];r=l[14];x=l[15];a[12]=z*u+A*f+r*y+x*n;a[13]=z*q+A*c+r*e+x*p;a[14]=z*m+A*h+r*k+x*w;a[15]=z*b+A*C+r*g+x*d;return a}},{}],63:[function(l,r,G){r.exports=function(a,d,l,u,q,m,b){var f=1/(d-l),c=1/(u-q),h=1/(m-b);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*h;a[11]=0;a[12]=(d+l)*f;a[13]=(q+u)*c;a[14]=(b+m)*h;a[15]=1;return a}},{}],64:[function(l,
r,G){r.exports=function(a,d,l,u,q){d=1/Math.tan(d/2);var m=1/(u-q);a[0]=d/l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(q+u)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*q*u*m;a[15]=0;return a}},{}],65:[function(l,r,G){r.exports=function(a,d,l,u){var q=Math.tan(d.upDegrees*Math.PI/180),m=Math.tan(d.downDegrees*Math.PI/180),b=Math.tan(d.leftDegrees*Math.PI/180);d=Math.tan(d.rightDegrees*Math.PI/180);var f=2/(b+d),c=2/(q+m);a[0]=f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=
-((b-d)*f*.5);a[9]=(q-m)*c*.5;a[10]=u/(l-u);a[11]=-1;a[12]=0;a[13]=0;a[14]=u*l/(l-u);a[15]=0;return a}},{}],66:[function(l,r,G){r.exports=function(a,d,l,u){var q=u[0],m=u[1];u=u[2];var b=Math.sqrt(q*q+m*m+u*u),f,c,h,C,y,e,k,g,n,p,w,z,A,r,x,v,G,I,ra,E;if(1E-6>Math.abs(b))return null;b=1/b;q*=b;m*=b;u*=b;f=Math.sin(l);c=Math.cos(l);h=1-c;l=d[0];b=d[1];C=d[2];y=d[3];e=d[4];k=d[5];g=d[6];n=d[7];p=d[8];w=d[9];z=d[10];A=d[11];r=q*q*h+c;x=m*q*h+u*f;v=u*q*h-m*f;G=q*m*h-u*f;I=m*m*h+c;ra=u*m*h+q*f;E=q*u*h+
m*f;q=m*u*h-q*f;m=u*u*h+c;a[0]=l*r+e*x+p*v;a[1]=b*r+k*x+w*v;a[2]=C*r+g*x+z*v;a[3]=y*r+n*x+A*v;a[4]=l*G+e*I+p*ra;a[5]=b*G+k*I+w*ra;a[6]=C*G+g*I+z*ra;a[7]=y*G+n*I+A*ra;a[8]=l*E+e*q+p*m;a[9]=b*E+k*q+w*m;a[10]=C*E+g*q+z*m;a[11]=y*E+n*q+A*m;d!==a&&(a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a}},{}],67:[function(l,r,G){r.exports=function(a,d,l){var u=Math.sin(l);l=Math.cos(l);var q=d[4],m=d[5],b=d[6],f=d[7],c=d[8],h=d[9],C=d[10],y=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=
d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[4]=q*l+c*u;a[5]=m*l+h*u;a[6]=b*l+C*u;a[7]=f*l+y*u;a[8]=c*l-q*u;a[9]=h*l-m*u;a[10]=C*l-b*u;a[11]=y*l-f*u;return a}},{}],68:[function(l,r,G){r.exports=function(a,d,l){var u=Math.sin(l);l=Math.cos(l);var q=d[0],m=d[1],b=d[2],f=d[3],c=d[8],h=d[9],C=d[10],y=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=q*l-c*u;a[1]=m*l-h*u;a[2]=b*l-C*u;a[3]=f*l-y*u;a[8]=q*u+c*l;a[9]=m*u+h*l;a[10]=b*u+C*l;a[11]=f*
u+y*l;return a}},{}],69:[function(l,r,G){r.exports=function(a,d,l){var u=Math.sin(l);l=Math.cos(l);var q=d[0],m=d[1],b=d[2],f=d[3],c=d[4],h=d[5],C=d[6],y=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=q*l+c*u;a[1]=m*l+h*u;a[2]=b*l+C*u;a[3]=f*l+y*u;a[4]=c*l-q*u;a[5]=h*l-m*u;a[6]=C*l-b*u;a[7]=y*l-f*u;return a}},{}],70:[function(l,r,G){r.exports=function(a,d,l){var u=l[0],q=l[1];l=l[2];a[0]=d[0]*u;a[1]=d[1]*u;a[2]=d[2]*u;a[3]=d[3]*u;a[4]=
d[4]*q;a[5]=d[5]*q;a[6]=d[6]*q;a[7]=d[7]*q;a[8]=d[8]*l;a[9]=d[9]*l;a[10]=d[10]*l;a[11]=d[11]*l;a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a}},{}],71:[function(l,r,G){r.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(l,r,G){r.exports=function(a,d,l){var u=l[0],q=l[1];l=l[2];var m,b,f,c,h,C,y,e,k,g,n,p;d===a?(a[12]=d[0]*
u+d[4]*q+d[8]*l+d[12],a[13]=d[1]*u+d[5]*q+d[9]*l+d[13],a[14]=d[2]*u+d[6]*q+d[10]*l+d[14],a[15]=d[3]*u+d[7]*q+d[11]*l+d[15]):(m=d[0],b=d[1],f=d[2],c=d[3],h=d[4],C=d[5],y=d[6],e=d[7],k=d[8],g=d[9],n=d[10],p=d[11],a[0]=m,a[1]=b,a[2]=f,a[3]=c,a[4]=h,a[5]=C,a[6]=y,a[7]=e,a[8]=k,a[9]=g,a[10]=n,a[11]=p,a[12]=m*u+h*q+k*l+d[12],a[13]=b*u+C*q+g*l+d[13],a[14]=f*u+y*q+n*l+d[14],a[15]=c*u+e*q+p*l+d[15]);return a}},{}],73:[function(l,r,G){r.exports=function(a,d){if(a===d){var l=d[1],u=d[2],q=d[3],m=d[6],b=d[7],
f=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=l;a[6]=d[9];a[7]=d[13];a[8]=u;a[9]=m;a[11]=d[14];a[12]=q;a[13]=b;a[14]=f}else a[0]=d[0],a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a}},{}],74:[function(l,r,G){!function(a,d){if("object"==typeof G&&"object"==typeof r)r.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var l=d(),u;for(u in l)("object"==typeof G?
G:a)[u]=l[u]}}("undefined"!=typeof self?self:this,function(){return function(a){function d(u){if(l[u])return l[u].exports;var q=l[u]={i:u,l:!1,exports:{}};return a[u].call(q.exports,q,q.exports,d),q.l=!0,q.exports}var l={};return d.m=a,d.c=l,d.d=function(a,l,m){d.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:m})},d.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,l){if((1&l&&(a=d(a)),8&l)||4&l&&"object"==typeof a&&a&&a.__esModule)return a;var m=Object.create(null);if(d.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:a}),2&l&&"string"!=typeof a)for(var b in a)d.d(m,b,function(b){return a[b]}.bind(null,b));return m},d.n=function(a){var l=a&&a.__esModule?function(){return a["default"]}:function(){return a};return d.d(l,"a",l),l},d.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,
d)},d.p="",d(d.s=10)}([function(a,d,l){Object.defineProperty(d,"__esModule",{value:!0});d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};d.toRadian=function(a){return a*q};d.equals=function(a,b){return Math.abs(a-b)<=r*Math.max(1,Math.abs(a),Math.abs(b))};var r=d.EPSILON=1E-6;d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;var q=Math.PI/180},function(a,d,l){function r(){var a=new y.ARRAY_TYPE(4);return y.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0),
a}function q(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a}function m(a,c,b){return a[0]=c[0]*b[0],a[1]=c[1]*b[1],a[2]=c[2]*b[2],a[3]=c[3]*b[3],a}function b(a,c,b){return a[0]=c[0]/b[0],a[1]=c[1]/b[1],a[2]=c[2]/b[2],a[3]=c[3]/b[3],a}function f(a,c){var b=c[0]-a[0],h=c[1]-a[1],d=c[2]-a[2],f=c[3]-a[3];return Math.sqrt(b*b+h*h+d*d+f*f)}function c(a,c){var b=c[0]-a[0],h=c[1]-a[1],d=c[2]-a[2],f=c[3]-a[3];return b*b+h*h+d*d+f*f}function h(a){var c=a[0],b=a[1],h=a[2];a=a[3];
return Math.sqrt(c*c+b*b+h*h+a*a)}function C(a){var c=a[0],b=a[1],h=a[2];a=a[3];return c*c+b*b+h*h+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(a){var c=new y.ARRAY_TYPE(4);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};d.fromValues=function(a,c,b,h){var d=new y.ARRAY_TYPE(4);return d[0]=a,d[1]=c,d[2]=b,d[3]=h,d};d.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};d.set=function(a,
c,b,h,d){return a[0]=c,a[1]=b,a[2]=h,a[3]=d,a};d.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a};d.subtract=q;d.multiply=m;d.divide=b;d.ceil=function(a,c){return a[0]=Math.ceil(c[0]),a[1]=Math.ceil(c[1]),a[2]=Math.ceil(c[2]),a[3]=Math.ceil(c[3]),a};d.floor=function(a,c){return a[0]=Math.floor(c[0]),a[1]=Math.floor(c[1]),a[2]=Math.floor(c[2]),a[3]=Math.floor(c[3]),a};d.min=function(a,c,b){return a[0]=Math.min(c[0],b[0]),a[1]=Math.min(c[1],b[1]),a[2]=Math.min(c[2],
b[2]),a[3]=Math.min(c[3],b[3]),a};d.max=function(a,c,b){return a[0]=Math.max(c[0],b[0]),a[1]=Math.max(c[1],b[1]),a[2]=Math.max(c[2],b[2]),a[3]=Math.max(c[3],b[3]),a};d.round=function(a,c){return a[0]=Math.round(c[0]),a[1]=Math.round(c[1]),a[2]=Math.round(c[2]),a[3]=Math.round(c[3]),a};d.scale=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a};d.scaleAndAdd=function(a,c,b,h){return a[0]=c[0]+b[0]*h,a[1]=c[1]+b[1]*h,a[2]=c[2]+b[2]*h,a[3]=c[3]+b[3]*h,a};d.distance=f;d.squaredDistance=
c;d.length=h;d.squaredLength=C;d.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a[3]=-c[3],a};d.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a[3]=1/c[3],a};d.normalize=function(a,c){var b=c[0],h=c[1],d=c[2],f=c[3],l=b*b+h*h+d*d+f*f;0<l&&(l=1/Math.sqrt(l),a[0]=b*l,a[1]=h*l,a[2]=d*l,a[3]=f*l);return a};d.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};d.lerp=function(a,c,b,h){var d=c[0],f=c[1],l=c[2];c=c[3];return a[0]=d+h*(b[0]-d),a[1]=f+h*(b[1]-
f),a[2]=l+h*(b[2]-l),a[3]=c+h*(b[3]-c),a};d.random=function(a,c){var b,h,d,f,l,m;c=c||1;do b=2*y.RANDOM()-1,h=2*y.RANDOM()-1,l=b*b+h*h;while(1<=l);do d=2*y.RANDOM()-1,f=2*y.RANDOM()-1,m=d*d+f*f;while(1<=m);l=Math.sqrt((1-l)/m);return a[0]=c*b,a[1]=c*h,a[2]=c*d*l,a[3]=c*f*l,a};d.transformMat4=function(a,c,b){var h=c[0],d=c[1],f=c[2];c=c[3];return a[0]=b[0]*h+b[4]*d+b[8]*f+b[12]*c,a[1]=b[1]*h+b[5]*d+b[9]*f+b[13]*c,a[2]=b[2]*h+b[6]*d+b[10]*f+b[14]*c,a[3]=b[3]*h+b[7]*d+b[11]*f+b[15]*c,a};d.transformQuat=
function(a,c,b){var h=c[0],d=c[1],f=c[2],l=b[0],m=b[1],y=b[2];b=b[3];var C=b*h+m*f-y*d,v=b*d+y*h-l*f,q=b*f+l*d-m*h,h=-l*h-m*d-y*f;return a[0]=C*b+h*-l+v*-y-q*-m,a[1]=v*b+h*-m+q*-l-C*-y,a[2]=q*b+h*-y+C*-m-v*-l,a[3]=c[3],a};d.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};d.equals=function(a,c){var b=a[0],h=a[1],d=a[2],f=a[3],l=c[0],m=c[1],C=c[2],x=c[3];return Math.abs(b-l)<=y.EPSILON*Math.max(1,
Math.abs(b),Math.abs(l))&&Math.abs(h-m)<=y.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(d-C)<=y.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-x)<=y.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))};var y=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(l(0));d.sub=q;d.mul=m;d.div=b;d.dist=f;d.sqrDist=c;d.len=h;d.sqrLen=C;d.forEach=function(){var a=r();return function(c,b,h,d,f,l){var m=
void 0,y=void 0;b||(b=4);h||(h=0);y=d?Math.min(d*b+h,c.length):c.length;for(m=h;m<y;m+=b)a[0]=c[m],a[1]=c[m+1],a[2]=c[m+2],a[3]=c[m+3],f(a,a,l),c[m]=a[0],c[m+1]=a[1],c[m+2]=a[2],c[m+3]=a[3];return c}}()},function(a,d,l){function r(){var a=new g.ARRAY_TYPE(3);return g.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function q(a){var c=a[0],e=a[1];a=a[2];return Math.sqrt(c*c+e*e+a*a)}function m(a,c,e){var b=new g.ARRAY_TYPE(3);return b[0]=a,b[1]=c,b[2]=e,b}function b(a,c,e){return a[0]=c[0]-e[0],
a[1]=c[1]-e[1],a[2]=c[2]-e[2],a}function f(a,c,e){return a[0]=c[0]*e[0],a[1]=c[1]*e[1],a[2]=c[2]*e[2],a}function c(a,c,e){return a[0]=c[0]/e[0],a[1]=c[1]/e[1],a[2]=c[2]/e[2],a}function h(a,c){var e=c[0]-a[0],b=c[1]-a[1],k=c[2]-a[2];return Math.sqrt(e*e+b*b+k*k)}function C(a,c){var e=c[0]-a[0],b=c[1]-a[1],k=c[2]-a[2];return e*e+b*b+k*k}function y(a){var c=a[0],e=a[1];a=a[2];return c*c+e*e+a*a}function e(a,c){var e=c[0],b=c[1],k=c[2],e=e*e+b*b+k*k;return 0<e&&(e=1/Math.sqrt(e),a[0]=c[0]*e,a[1]=c[1]*
e,a[2]=c[2]*e),a}function k(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(a){var c=new g.ARRAY_TYPE(3);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c};d.length=q;d.fromValues=m;d.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a};d.set=function(a,c,e,b){return a[0]=c,a[1]=e,a[2]=b,a};d.add=function(a,c,e){return a[0]=c[0]+e[0],a[1]=c[1]+e[1],a[2]=c[2]+e[2],a};
d.subtract=b;d.multiply=f;d.divide=c;d.ceil=function(a,c){return a[0]=Math.ceil(c[0]),a[1]=Math.ceil(c[1]),a[2]=Math.ceil(c[2]),a};d.floor=function(a,c){return a[0]=Math.floor(c[0]),a[1]=Math.floor(c[1]),a[2]=Math.floor(c[2]),a};d.min=function(a,c,e){return a[0]=Math.min(c[0],e[0]),a[1]=Math.min(c[1],e[1]),a[2]=Math.min(c[2],e[2]),a};d.max=function(a,c,e){return a[0]=Math.max(c[0],e[0]),a[1]=Math.max(c[1],e[1]),a[2]=Math.max(c[2],e[2]),a};d.round=function(a,c){return a[0]=Math.round(c[0]),a[1]=Math.round(c[1]),
a[2]=Math.round(c[2]),a};d.scale=function(a,c,e){return a[0]=c[0]*e,a[1]=c[1]*e,a[2]=c[2]*e,a};d.scaleAndAdd=function(a,c,e,b){return a[0]=c[0]+e[0]*b,a[1]=c[1]+e[1]*b,a[2]=c[2]+e[2]*b,a};d.distance=h;d.squaredDistance=C;d.squaredLength=y;d.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a};d.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a};d.normalize=e;d.dot=k;d.cross=function(a,c,e){var b=c[0],k=c[1];c=c[2];var g=e[0],h=e[1];e=e[2];return a[0]=k*e-c*h,a[1]=c*g-b*
e,a[2]=b*h-k*g,a};d.lerp=function(a,c,e,b){var k=c[0],g=c[1];c=c[2];return a[0]=k+b*(e[0]-k),a[1]=g+b*(e[1]-g),a[2]=c+b*(e[2]-c),a};d.hermite=function(a,c,e,b,k,g){var h=g*g,d=h*(2*g-3)+1,f=h*(g-2)+g,l=h*(g-1);g=h*(3-2*g);return a[0]=c[0]*d+e[0]*f+b[0]*l+k[0]*g,a[1]=c[1]*d+e[1]*f+b[1]*l+k[1]*g,a[2]=c[2]*d+e[2]*f+b[2]*l+k[2]*g,a};d.bezier=function(a,c,e,b,k,g){var h=1-g,d=h*h,f=g*g,l=d*h,d=3*g*d,h=3*f*h;g*=f;return a[0]=c[0]*l+e[0]*d+b[0]*h+k[0]*g,a[1]=c[1]*l+e[1]*d+b[1]*h+k[1]*g,a[2]=c[2]*l+e[2]*
d+b[2]*h+k[2]*g,a};d.random=function(a,c){c=c||1;var e=2*g.RANDOM()*Math.PI,b=2*g.RANDOM()-1,k=Math.sqrt(1-b*b)*c;return a[0]=Math.cos(e)*k,a[1]=Math.sin(e)*k,a[2]=b*c,a};d.transformMat4=function(a,c,e){var b=c[0],k=c[1];c=c[2];var g=e[3]*b+e[7]*k+e[11]*c+e[15];return g=g||1,a[0]=(e[0]*b+e[4]*k+e[8]*c+e[12])/g,a[1]=(e[1]*b+e[5]*k+e[9]*c+e[13])/g,a[2]=(e[2]*b+e[6]*k+e[10]*c+e[14])/g,a};d.transformMat3=function(a,c,e){var b=c[0],k=c[1];c=c[2];return a[0]=b*e[0]+k*e[3]+c*e[6],a[1]=b*e[1]+k*e[4]+c*e[7],
a[2]=b*e[2]+k*e[5]+c*e[8],a};d.transformQuat=function(a,c,e){var b=e[0],k=e[1],g=e[2],h=c[0],d=c[1];c=c[2];var f=k*c-g*d,l=g*h-b*c,m=b*d-k*h,y=k*m-g*l,g=g*f-b*m,b=b*l-k*f;e=2*e[3];return f*=e,l*=e,m*=e,y*=2,g*=2,b*=2,a[0]=h+f+y,a[1]=d+l+g,a[2]=c+m+b,a};d.rotateX=function(a,c,e,b){var k=[],g=[];return k[0]=c[0]-e[0],k[1]=c[1]-e[1],k[2]=c[2]-e[2],g[0]=k[0],g[1]=k[1]*Math.cos(b)-k[2]*Math.sin(b),g[2]=k[1]*Math.sin(b)+k[2]*Math.cos(b),a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.rotateY=function(a,
c,e,b){var k=[],g=[];return k[0]=c[0]-e[0],k[1]=c[1]-e[1],k[2]=c[2]-e[2],g[0]=k[2]*Math.sin(b)+k[0]*Math.cos(b),g[1]=k[1],g[2]=k[2]*Math.cos(b)-k[0]*Math.sin(b),a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.rotateZ=function(a,c,e,b){var k=[],g=[];return k[0]=c[0]-e[0],k[1]=c[1]-e[1],k[2]=c[2]-e[2],g[0]=k[0]*Math.cos(b)-k[1]*Math.sin(b),g[1]=k[0]*Math.sin(b)+k[1]*Math.cos(b),g[2]=k[2],a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.angle=function(a,c){var b=m(a[0],a[1],a[2]),g=m(c[0],c[1],c[2]);
e(b,b);e(g,g);b=k(b,g);return 1<b?0:-1>b?Math.PI:Math.acos(b)};d.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]};d.equals=function(a,c){var e=a[0],b=a[1],k=a[2],h=c[0],d=c[1],f=c[2];return Math.abs(e-h)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(b-d)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))&&Math.abs(k-f)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(f))};var g=function(a){if(a&&a.__esModule)return a;
var c={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);return c["default"]=a,c}(l(0));d.sub=b;d.mul=f;d.div=c;d.dist=h;d.sqrDist=C;d.len=q;d.sqrLen=y;d.forEach=function(){var a=r();return function(c,e,b,k,g,h){var d=void 0,f=void 0;e||(e=3);b||(b=0);f=k?Math.min(k*e+b,c.length):c.length;for(d=b;d<f;d+=e)a[0]=c[d],a[1]=c[d+1],a[2]=c[d+2],g(a,a,h),c[d]=a[0],c[d+1]=a[1],c[d+2]=a[2];return c}}()},function(a,d,l){function r(a){if(a&&a.__esModule)return a;var c={};if(null!=
a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);return c["default"]=a,c}function q(){var a=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function m(a,c,e){e*=.5;var b=Math.sin(e);return a[0]=b*c[0],a[1]=b*c[1],a[2]=b*c[2],a[3]=Math.cos(e),a}function b(a,c,e){var b=c[0],h=c[1],d=c[2];c=c[3];var f=e[0],l=e[1],m=e[2];e=e[3];return a[0]=b*e+c*f+h*m-d*l,a[1]=h*e+c*l+d*f-b*m,a[2]=d*e+c*m+b*l-h*f,a[3]=c*e-b*f-h*l-d*m,a}function f(a,c,e,b){var d=
c[0],f=c[1],l=c[2];c=c[3];var m=e[0],y=e[1],C=e[2];e=e[3];var q=void 0,r=void 0,u=void 0,E=void 0,B=void 0;return 0>(r=d*m+f*y+l*C+c*e)&&(r=-r,m=-m,y=-y,C=-C,e=-e),1-r>h.EPSILON?(q=Math.acos(r),u=Math.sin(q),E=Math.sin((1-b)*q)/u,B=Math.sin(b*q)/u):(E=1-b,B=b),a[0]=E*d+B*m,a[1]=E*f+B*y,a[2]=E*l+B*C,a[3]=E*c+B*e,a}function c(a,c){var e=c[0]+c[4]+c[8],b=void 0;if(0<e)b=Math.sqrt(e+1),a[3]=.5*b,b=.5/b,a[0]=(c[5]-c[7])*b,a[1]=(c[6]-c[2])*b,a[2]=(c[1]-c[3])*b;else{e=0;c[4]>c[0]&&(e=1);c[8]>c[3*e+e]&&(e=
2);var h=(e+1)%3,d=(e+2)%3,b=Math.sqrt(c[3*e+e]-c[3*h+h]-c[3*d+d]+1);a[e]=.5*b;b=.5/b;a[3]=(c[3*h+d]-c[3*d+h])*b;a[h]=(c[3*h+e]+c[3*e+h])*b;a[d]=(c[3*d+e]+c[3*e+d])*b}return a}Object.defineProperty(d,"__esModule",{value:!0});d.setAxes=d.sqlerp=d.rotationTo=d.equals=d.exactEquals=d.normalize=d.sqrLen=d.squaredLength=d.len=d.length=d.lerp=d.dot=d.scale=d.mul=d.add=d.set=d.copy=d.fromValues=d.clone=void 0;d.create=q;d.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};d.setAxisAngle=m;d.getAxisAngle=
function(a,c){var e=2*Math.acos(c[3]),b=Math.sin(e/2);b>h.EPSILON?(a[0]=c[0]/b,a[1]=c[1]/b,a[2]=c[2]/b):(a[0]=1,a[1]=0,a[2]=0);return e};d.multiply=b;d.rotateX=function(a,c,e){e*=.5;var b=c[0],h=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e+c*f,a[1]=h*e+d*f,a[2]=d*e-h*f,a[3]=c*e-b*f,a};d.rotateY=function(a,c,e){e*=.5;var b=c[0],h=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e-d*f,a[1]=h*e+c*f,a[2]=d*e+b*f,a[3]=c*e-h*f,a};d.rotateZ=function(a,c,e){e*=.5;var b=
c[0],h=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e+h*f,a[1]=h*e-b*f,a[2]=d*e+c*f,a[3]=c*e-d*f,a};d.calculateW=function(a,c){var e=c[0],b=c[1],h=c[2];return a[0]=e,a[1]=b,a[2]=h,a[3]=Math.sqrt(Math.abs(1-e*e-b*b-h*h)),a};d.slerp=f;d.random=function(a){var c=h.RANDOM(),e=h.RANDOM(),b=h.RANDOM(),d=Math.sqrt(1-c),c=Math.sqrt(c);return a[0]=d*Math.sin(2*Math.PI*e),a[1]=d*Math.cos(2*Math.PI*e),a[2]=c*Math.sin(2*Math.PI*b),a[3]=c*Math.cos(2*Math.PI*b),a};d.invert=function(a,c){var e=
c[0],b=c[1],h=c[2],d=c[3],f=e*e+b*b+h*h+d*d,f=f?1/f:0;return a[0]=-e*f,a[1]=-b*f,a[2]=-h*f,a[3]=d*f,a};d.conjugate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a[3]=c[3],a};d.fromMat3=c;d.fromEuler=function(a,c,e,b){var h=.5*Math.PI/180;c*=h;e*=h;b*=h;h=Math.sin(c);c=Math.cos(c);var d=Math.sin(e);e=Math.cos(e);var f=Math.sin(b);b=Math.cos(b);return a[0]=h*e*b-c*d*f,a[1]=c*d*b+h*e*f,a[2]=c*e*f-h*d*b,a[3]=c*e*b+h*d*f,a};d.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};
var h=r(l(0)),C=r(l(5)),y=r(l(2));a=r(l(1));d.clone=a.clone;d.fromValues=a.fromValues;d.copy=a.copy;d.set=a.set;d.add=a.add;d.mul=b;d.scale=a.scale;d.dot=a.dot;d.lerp=a.lerp;l=d.length=a.length;l=(d.len=l,d.squaredLength=a.squaredLength);var e=(d.sqrLen=l,d.normalize=a.normalize);d.exactEquals=a.exactEquals;d.equals=a.equals;d.rotationTo=function(){var a=y.create(),c=y.fromValues(1,0,0),b=y.fromValues(0,1,0);return function(h,d,f){var l=y.dot(d,f);return-.999999>l?(y.cross(a,c,d),1E-6>y.len(a)&&y.cross(a,
b,d),y.normalize(a,a),m(h,a,Math.PI),h):.999999<l?(h[0]=0,h[1]=0,h[2]=0,h[3]=1,h):(y.cross(a,d,f),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=1+l,e(h,h))}}();d.sqlerp=function(){var a=q(),c=q();return function(e,b,h,d,l,m){return f(a,b,l,m),f(c,h,d,m),f(e,a,c,2*m*(1-m)),e}}();d.setAxes=function(){var a=C.create();return function(b,h,d,f){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=f[0],a[4]=f[1],a[7]=f[2],a[2]=-h[0],a[5]=-h[1],a[8]=-h[2],e(b,c(b,a))}}()},function(a,d,l){function r(a){return a[0]=1,a[1]=0,a[2]=
0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function q(a,b,d){var f=b[0],e=b[1],k=b[2],g=b[3],n=b[4],p=b[5],l=b[6],m=b[7],A=b[8],q=b[9],x=b[10],v=b[11],r=b[12],u=b[13],G=b[14];b=b[15];var E=d[0],B=d[1],P=d[2],H=d[3];return a[0]=E*f+B*n+P*A+H*r,a[1]=E*e+B*p+P*q+H*u,a[2]=E*k+B*l+P*x+H*G,a[3]=E*g+B*m+P*v+H*b,E=d[4],B=d[5],P=d[6],H=d[7],a[4]=E*f+B*n+P*A+H*r,a[5]=E*e+B*p+P*q+H*u,a[6]=E*k+B*l+P*x+H*G,a[7]=E*g+B*m+P*v+H*b,E=d[8],B=d[9],P=d[10],H=d[11],
a[8]=E*f+B*n+P*A+H*r,a[9]=E*e+B*p+P*q+H*u,a[10]=E*k+B*l+P*x+H*G,a[11]=E*g+B*m+P*v+H*b,E=d[12],B=d[13],P=d[14],H=d[15],a[12]=E*f+B*n+P*A+H*r,a[13]=E*e+B*p+P*q+H*u,a[14]=E*k+B*l+P*x+H*G,a[15]=E*g+B*m+P*v+H*b,a}function m(a,b,d){var f=b[0],e=b[1],k=b[2],g=b[3],n=f+f,p=e+e,l=k+k;b=f*n;var m=f*p,f=f*l,A=e*p,e=e*l,k=k*l,n=g*n,p=g*p,g=g*l;return a[0]=1-(A+k),a[1]=m+g,a[2]=f-p,a[3]=0,a[4]=m-g,a[5]=1-(b+k),a[6]=e+n,a[7]=0,a[8]=f+p,a[9]=e-n,a[10]=1-(b+A),a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],a[15]=1,a}function b(a,
b,d){return a[0]=b[0]-d[0],a[1]=b[1]-d[1],a[2]=b[2]-d[2],a[3]=b[3]-d[3],a[4]=b[4]-d[4],a[5]=b[5]-d[5],a[6]=b[6]-d[6],a[7]=b[7]-d[7],a[8]=b[8]-d[8],a[9]=b[9]-d[9],a[10]=b[10]-d[10],a[11]=b[11]-d[11],a[12]=b[12]-d[12],a[13]=b[13]-d[13],a[14]=b[14]-d[14],a[15]=b[15]-d[15],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new f.ARRAY_TYPE(16);f.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=
0);return a[0]=1,a[5]=1,a[10]=1,a[15]=1,a};d.clone=function(a){var b=new f.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};d.fromValues=function(a,b,
d,l,e,k,g,n,p,m,z,A,q,x,v,r){var u=new f.ARRAY_TYPE(16);return u[0]=a,u[1]=b,u[2]=d,u[3]=l,u[4]=e,u[5]=k,u[6]=g,u[7]=n,u[8]=p,u[9]=m,u[10]=z,u[11]=A,u[12]=q,u[13]=x,u[14]=v,u[15]=r,u};d.set=function(a,b,d,f,e,k,g,n,p,l,m,A,q,x,v,r,u){return a[0]=b,a[1]=d,a[2]=f,a[3]=e,a[4]=k,a[5]=g,a[6]=n,a[7]=p,a[8]=l,a[9]=m,a[10]=A,a[11]=q,a[12]=x,a[13]=v,a[14]=r,a[15]=u,a};d.identity=r;d.transpose=function(a,b){if(a===b){var d=b[1],f=b[2],e=b[3],k=b[6],g=b[7],n=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=
b[9];a[7]=b[13];a[8]=f;a[9]=k;a[11]=b[14];a[12]=e;a[13]=g;a[14]=n}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};d.invert=function(a,b){var d=b[0],f=b[1],e=b[2],k=b[3],g=b[4],n=b[5],p=b[6],l=b[7],m=b[8],A=b[9],q=b[10],x=b[11],v=b[12],r=b[13],u=b[14],G=b[15],E=d*n-f*g,B=d*p-e*g,P=d*l-k*g,H=f*p-e*n,F=f*l-k*n,D=e*l-k*p,ka=m*r-A*v,t=m*u-q*v,ba=m*G-x*v,L=A*u-q*r,fa=
A*G-x*r,ua=q*G-x*u,T=E*ua-B*fa+P*L+H*ba-F*t+D*ka;return T?(T=1/T,a[0]=(n*ua-p*fa+l*L)*T,a[1]=(e*fa-f*ua-k*L)*T,a[2]=(r*D-u*F+G*H)*T,a[3]=(q*F-A*D-x*H)*T,a[4]=(p*ba-g*ua-l*t)*T,a[5]=(d*ua-e*ba+k*t)*T,a[6]=(u*P-v*D-G*B)*T,a[7]=(m*D-q*P+x*B)*T,a[8]=(g*fa-n*ba+l*ka)*T,a[9]=(f*ba-d*fa-k*ka)*T,a[10]=(v*F-r*P+G*E)*T,a[11]=(A*P-m*F-x*E)*T,a[12]=(n*t-g*L-p*ka)*T,a[13]=(d*L-f*t+e*ka)*T,a[14]=(r*B-v*H-u*E)*T,a[15]=(m*H-A*B+q*E)*T,a):null};d.adjoint=function(a,b){var d=b[0],f=b[1],e=b[2],k=b[3],g=b[4],n=b[5],
p=b[6],l=b[7],m=b[8],q=b[9],r=b[10],x=b[11],v=b[12],u=b[13],I=b[14],G=b[15];return a[0]=n*(r*G-x*I)-q*(p*G-l*I)+u*(p*x-l*r),a[1]=-(f*(r*G-x*I)-q*(e*G-k*I)+u*(e*x-k*r)),a[2]=f*(p*G-l*I)-n*(e*G-k*I)+u*(e*l-k*p),a[3]=-(f*(p*x-l*r)-n*(e*x-k*r)+q*(e*l-k*p)),a[4]=-(g*(r*G-x*I)-m*(p*G-l*I)+v*(p*x-l*r)),a[5]=d*(r*G-x*I)-m*(e*G-k*I)+v*(e*x-k*r),a[6]=-(d*(p*G-l*I)-g*(e*G-k*I)+v*(e*l-k*p)),a[7]=d*(p*x-l*r)-g*(e*x-k*r)+m*(e*l-k*p),a[8]=g*(q*G-x*u)-m*(n*G-l*u)+v*(n*x-l*q),a[9]=-(d*(q*G-x*u)-m*(f*G-k*u)+v*(f*x-
k*q)),a[10]=d*(n*G-l*u)-g*(f*G-k*u)+v*(f*l-k*n),a[11]=-(d*(n*x-l*q)-g*(f*x-k*q)+m*(f*l-k*n)),a[12]=-(g*(q*I-r*u)-m*(n*I-p*u)+v*(n*r-p*q)),a[13]=d*(q*I-r*u)-m*(f*I-e*u)+v*(f*r-e*q),a[14]=-(d*(n*I-p*u)-g*(f*I-e*u)+v*(f*p-e*n)),a[15]=d*(n*r-p*q)-g*(f*r-e*q)+m*(f*p-e*n),a};d.determinant=function(a){var b=a[0],d=a[1],f=a[2],e=a[3],k=a[4],g=a[5],n=a[6],l=a[7],m=a[8],z=a[9],q=a[10],r=a[11],x=a[12],v=a[13],u=a[14];a=a[15];return(b*g-d*k)*(q*a-r*u)-(b*n-f*k)*(z*a-r*v)+(b*l-e*k)*(z*u-q*v)+(d*n-f*g)*(m*a-r*
x)-(d*l-e*g)*(m*u-q*x)+(f*l-e*n)*(m*v-z*x)};d.multiply=q;d.translate=function(a,b,d){var f=d[0],e=d[1];d=d[2];var k=void 0,g=void 0,n=void 0,l=void 0,m=void 0,z=void 0,q=void 0,r=void 0,x=void 0,v=void 0,u=void 0,I=void 0;b===a?(a[12]=b[0]*f+b[4]*e+b[8]*d+b[12],a[13]=b[1]*f+b[5]*e+b[9]*d+b[13],a[14]=b[2]*f+b[6]*e+b[10]*d+b[14],a[15]=b[3]*f+b[7]*e+b[11]*d+b[15]):(k=b[0],g=b[1],n=b[2],l=b[3],m=b[4],z=b[5],q=b[6],r=b[7],x=b[8],v=b[9],u=b[10],I=b[11],a[0]=k,a[1]=g,a[2]=n,a[3]=l,a[4]=m,a[5]=z,a[6]=q,a[7]=
r,a[8]=x,a[9]=v,a[10]=u,a[11]=I,a[12]=k*f+m*e+x*d+b[12],a[13]=g*f+z*e+v*d+b[13],a[14]=n*f+q*e+u*d+b[14],a[15]=l*f+r*e+I*d+b[15]);return a};d.scale=function(a,b,d){var f=d[0],e=d[1];d=d[2];return a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f,a[3]=b[3]*f,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};d.rotate=function(a,b,d,l){var e=l[0],k=l[1];l=l[2];var g=Math.sqrt(e*e+k*k+l*l),n=void 0,p=void 0,m=void 0,
z=void 0,q=void 0,r=void 0,x=void 0,v=void 0,u=void 0,I=void 0,G=void 0,E=void 0,B=void 0,P=void 0,H=void 0,F=void 0,D=void 0,ka=void 0,t=void 0,ba=void 0,L=void 0,fa=void 0,p=n=void 0;if(g<f.EPSILON)return null;e*=g=1/g;k*=g;l*=g;n=Math.sin(d);p=Math.cos(d);m=1-p;z=b[0];q=b[1];r=b[2];x=b[3];v=b[4];u=b[5];I=b[6];G=b[7];E=b[8];B=b[9];P=b[10];H=b[11];F=e*e*m+p;D=k*e*m+l*n;ka=l*e*m-k*n;t=e*k*m-l*n;ba=k*k*m+p;L=l*k*m+e*n;fa=e*l*m+k*n;n=k*l*m-e*n;p=l*l*m+p;a[0]=z*F+v*D+E*ka;a[1]=q*F+u*D+B*ka;a[2]=r*F+
I*D+P*ka;a[3]=x*F+G*D+H*ka;a[4]=z*t+v*ba+E*L;a[5]=q*t+u*ba+B*L;a[6]=r*t+I*ba+P*L;a[7]=x*t+G*ba+H*L;a[8]=z*fa+v*n+E*p;a[9]=q*fa+u*n+B*p;a[10]=r*fa+I*n+P*p;a[11]=x*fa+G*n+H*p;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};d.rotateX=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[4],k=b[5],g=b[6],n=b[7],l=b[8],m=b[9],z=b[10],q=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[4]=e*d+l*f,a[5]=k*d+m*f,a[6]=g*d+z*
f,a[7]=n*d+q*f,a[8]=l*d-e*f,a[9]=m*d-k*f,a[10]=z*d-g*f,a[11]=q*d-n*f,a};d.rotateY=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[0],k=b[1],g=b[2],n=b[3],l=b[8],m=b[9],z=b[10],q=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[0]=e*d-l*f,a[1]=k*d-m*f,a[2]=g*d-z*f,a[3]=n*d-q*f,a[8]=e*f+l*d,a[9]=k*f+m*d,a[10]=g*f+z*d,a[11]=n*f+q*d,a};d.rotateZ=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[0],k=b[1],g=b[2],n=b[3],l=b[4],
m=b[5],z=b[6],q=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[0]=e*d+l*f,a[1]=k*d+m*f,a[2]=g*d+z*f,a[3]=n*d+q*f,a[4]=l*d-e*f,a[5]=m*d-k*f,a[6]=z*d-g*f,a[7]=q*d-n*f,a};d.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a};d.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,
a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromRotation=function(a,b,d){var l=d[0],e=d[1];d=d[2];var k=Math.sqrt(l*l+e*e+d*d),g=void 0,n=void 0,p=void 0;return k<f.EPSILON?null:(l*=k=1/k,e*=k,d*=k,g=Math.sin(b),n=Math.cos(b),p=1-n,a[0]=l*l*p+n,a[1]=e*l*p+d*g,a[2]=d*l*p-e*g,a[3]=0,a[4]=l*e*p-d*g,a[5]=e*e*p+n,a[6]=d*e*p+l*g,a[7]=0,a[8]=l*d*p+e*g,a[9]=e*d*p-l*g,a[10]=d*d*p+n,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)};d.fromXRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);
return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=d,a[7]=0,a[8]=0,a[9]=-d,a[10]=f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromYRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);return a[0]=f,a[1]=0,a[2]=-d,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=d,a[9]=0,a[10]=f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromZRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);return a[0]=f,a[1]=d,a[2]=0,a[3]=0,a[4]=-d,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=
1,a};d.fromRotationTranslation=m;d.fromQuat2=function(a,b){var d=new f.ARRAY_TYPE(3),l=-b[0],e=-b[1],k=-b[2],g=b[3],n=b[4],p=b[5],w=b[6],q=b[7],r=l*l+e*e+k*k+g*g;0<r?(d[0]=2*(n*g+q*l+p*k-w*e)/r,d[1]=2*(p*g+q*e+w*l-n*k)/r,d[2]=2*(w*g+q*k+n*e-p*l)/r):(d[0]=2*(n*g+q*l+p*k-w*e),d[1]=2*(p*g+q*e+w*l-n*k),d[2]=2*(w*g+q*k+n*e-p*l));return m(a,b,d),a};d.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a};d.getScaling=function(a,b){var d=b[0],f=b[1],e=b[2],k=b[4],g=b[5],n=b[6],l=b[8],m=
b[9],q=b[10];return a[0]=Math.sqrt(d*d+f*f+e*e),a[1]=Math.sqrt(k*k+g*g+n*n),a[2]=Math.sqrt(l*l+m*m+q*q),a};d.getRotation=function(a,b){var d=b[0]+b[5]+b[10],f=0;0<d?(f=2*Math.sqrt(d+1),a[3]=.25*f,a[0]=(b[6]-b[9])/f,a[1]=(b[8]-b[2])/f,a[2]=(b[1]-b[4])/f):b[0]>b[5]&&b[0]>b[10]?(f=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/f,a[0]=.25*f,a[1]=(b[1]+b[4])/f,a[2]=(b[8]+b[2])/f):b[5]>b[10]?(f=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/f,a[0]=(b[1]+b[4])/f,a[1]=.25*f,a[2]=(b[6]+b[9])/f):(f=2*Math.sqrt(1+
b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/f,a[0]=(b[8]+b[2])/f,a[1]=(b[6]+b[9])/f,a[2]=.25*f);return a};d.fromRotationTranslationScale=function(a,b,d,f){var e=b[0],k=b[1],g=b[2],n=b[3],l=e+e,m=k+k,q=g+g;b=e*l;var r=e*m,e=e*q,u=k*m,k=k*q,g=g*q,l=n*l,m=n*m,n=n*q,q=f[0],x=f[1];f=f[2];return a[0]=(1-(u+g))*q,a[1]=(r+n)*q,a[2]=(e-m)*q,a[3]=0,a[4]=(r-n)*x,a[5]=(1-(b+g))*x,a[6]=(k+l)*x,a[7]=0,a[8]=(e+m)*f,a[9]=(k-l)*f,a[10]=(1-(b+u))*f,a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],a[15]=1,a};d.fromRotationTranslationScaleOrigin=
function(a,b,d,f,e){var k=b[0],g=b[1],n=b[2],l=b[3],m=k+k,q=g+g,r=n+n;b=k*m;var u=k*q,x=k*r,k=g*q,g=g*r,v=n*r,n=l*m,q=l*q,G=l*r,I=f[0],P=f[1],r=f[2];f=e[0];l=e[1];e=e[2];var m=(1-(k+v))*I,E=(u+G)*I,I=(x-q)*I,u=(u-G)*P,v=(1-(b+v))*P,P=(g+n)*P,x=(x+q)*r,g=(g-n)*r;b=(1-(b+k))*r;return a[0]=m,a[1]=E,a[2]=I,a[3]=0,a[4]=u,a[5]=v,a[6]=P,a[7]=0,a[8]=x,a[9]=g,a[10]=b,a[11]=0,a[12]=d[0]+f-(m*f+u*l+x*e),a[13]=d[1]+l-(E*f+v*l+g*e),a[14]=d[2]+e-(I*f+P*l+b*e),a[15]=1,a};d.fromQuat=function(a,b){var d=b[0],f=b[1],
e=b[2],k=b[3],g=d+d,n=f+f,l=e+e,d=d*g,m=f*g,f=f*n,q=e*g,r=e*n,e=e*l,g=k*g,n=k*n,k=k*l;return a[0]=1-f-e,a[1]=m+k,a[2]=q-n,a[3]=0,a[4]=m-k,a[5]=1-d-e,a[6]=r+g,a[7]=0,a[8]=q+n,a[9]=r-g,a[10]=1-d-f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.frustum=function(a,b,d,f,e,k,g){var l=1/(d-b),p=1/(e-f),m=1/(k-g);return a[0]=2*k*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*k*p,a[6]=0,a[7]=0,a[8]=(d+b)*l,a[9]=(e+f)*p,a[10]=(g+k)*m,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*k*2*m,a[15]=0,a};d.perspective=function(a,b,d,f,e){b=
1/Math.tan(b/2);var k=void 0;a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=e&&e!==1/0?(k=1/(f-e),a[10]=(e+f)*k,a[14]=2*e*f*k):(a[10]=-1,a[14]=-2*f);return a};d.perspectiveFromFieldOfView=function(a,b,d,f){var e=Math.tan(b.upDegrees*Math.PI/180),k=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var l=2/(g+b),p=2/(e+k);return a[0]=l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=p,a[6]=
0,a[7]=0,a[8]=-(g-b)*l*.5,a[9]=(e-k)*p*.5,a[10]=f/(d-f),a[11]=-1,a[12]=0,a[13]=0,a[14]=f*d/(d-f),a[15]=0,a};d.ortho=function(a,b,d,f,e,k,g){var l=1/(b-d),p=1/(f-e),m=1/(k-g);return a[0]=-2*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*p,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*m,a[11]=0,a[12]=(b+d)*l,a[13]=(e+f)*p,a[14]=(g+k)*m,a[15]=1,a};d.lookAt=function(a,b,d,l){var e=void 0,k=void 0,g=void 0,n=void 0,p=void 0,m=void 0,q=void 0,A=void 0,G=void 0,x=void 0,v=b[0],P=b[1];b=b[2];g=l[0];n=l[1];l=l[2];q=d[0];A=d[1];
d=d[2];if(Math.abs(v-q)<f.EPSILON&&Math.abs(P-A)<f.EPSILON&&Math.abs(b-d)<f.EPSILON)return r(a);q=v-q;A=P-A;G=b-d;x=1/Math.sqrt(q*q+A*A+G*G);e=n*(G*=x)-l*(A*=x);k=l*(q*=x)-g*G;g=g*A-n*q;(x=Math.sqrt(e*e+k*k+g*g))?(e*=x=1/x,k*=x,g*=x):(e=0,k=0,g=0);n=A*g-G*k;p=G*e-q*g;m=q*k-A*e;(x=Math.sqrt(n*n+p*p+m*m))?(n*=x=1/x,p*=x,m*=x):(n=0,p=0,m=0);return a[0]=e,a[1]=n,a[2]=q,a[3]=0,a[4]=k,a[5]=p,a[6]=A,a[7]=0,a[8]=g,a[9]=m,a[10]=G,a[11]=0,a[12]=-(e*v+k*P+g*b),a[13]=-(n*v+p*P+m*b),a[14]=-(q*v+A*P+G*b),a[15]=
1,a};d.targetTo=function(a,b,d,f){var e=b[0],k=b[1];b=b[2];var g=f[0],l=f[1],p=f[2];f=e-d[0];var m=k-d[1];d=b-d[2];var q=f*f+m*m+d*d;0<q&&(q=1/Math.sqrt(q),f*=q,m*=q,d*=q);var r=l*d-p*m,p=p*f-g*d,g=g*m-l*f;0<(q=r*r+p*p+g*g)&&(q=1/Math.sqrt(q),r*=q,p*=q,g*=q);return a[0]=r,a[1]=p,a[2]=g,a[3]=0,a[4]=m*g-d*p,a[5]=d*r-f*g,a[6]=f*p-m*r,a[7]=0,a[8]=f,a[9]=m,a[10]=d,a[11]=0,a[12]=e,a[13]=k,a[14]=b,a[15]=1,a};d.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+
", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,b,d){return a[0]=b[0]+d[0],a[1]=b[1]+d[1],a[2]=b[2]+d[2],a[3]=b[3]+
d[3],a[4]=b[4]+d[4],a[5]=b[5]+d[5],a[6]=b[6]+d[6],a[7]=b[7]+d[7],a[8]=b[8]+d[8],a[9]=b[9]+d[9],a[10]=b[10]+d[10],a[11]=b[11]+d[11],a[12]=b[12]+d[12],a[13]=b[13]+d[13],a[14]=b[14]+d[14],a[15]=b[15]+d[15],a};d.subtract=b;d.multiplyScalar=function(a,b,d){return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*d,a[5]=b[5]*d,a[6]=b[6]*d,a[7]=b[7]*d,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12]*d,a[13]=b[13]*d,a[14]=b[14]*d,a[15]=b[15]*d,a};d.multiplyScalarAndAdd=function(a,b,
d,f){return a[0]=b[0]+d[0]*f,a[1]=b[1]+d[1]*f,a[2]=b[2]+d[2]*f,a[3]=b[3]+d[3]*f,a[4]=b[4]+d[4]*f,a[5]=b[5]+d[5]*f,a[6]=b[6]+d[6]*f,a[7]=b[7]+d[7]*f,a[8]=b[8]+d[8]*f,a[9]=b[9]+d[9]*f,a[10]=b[10]+d[10]*f,a[11]=b[11]+d[11]*f,a[12]=b[12]+d[12]*f,a[13]=b[13]+d[13]*f,a[14]=b[14]+d[14]*f,a[15]=b[15]+d[15]*f,a};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===
b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};d.equals=function(a,b){var d=a[0],l=a[1],e=a[2],k=a[3],g=a[4],n=a[5],p=a[6],m=a[7],q=a[8],r=a[9],u=a[10],x=a[11],v=a[12],G=a[13],I=a[14],P=a[15],E=b[0],B=b[1],aa=b[2],H=b[3],F=b[4],D=b[5],ka=b[6],t=b[7],ba=b[8],L=b[9],fa=b[10],ua=b[11],T=b[12],W=b[13],S=b[14],O=b[15];return Math.abs(d-E)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(l-B)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(e-aa)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(aa))&&
Math.abs(k-H)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(H))&&Math.abs(g-F)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(n-D)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(p-ka)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(ka))&&Math.abs(m-t)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(t))&&Math.abs(q-ba)<=f.EPSILON*Math.max(1,Math.abs(q),Math.abs(ba))&&Math.abs(r-L)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(L))&&Math.abs(u-fa)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(fa))&&
Math.abs(x-ua)<=f.EPSILON*Math.max(1,Math.abs(x),Math.abs(ua))&&Math.abs(v-T)<=f.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(G-W)<=f.EPSILON*Math.max(1,Math.abs(G),Math.abs(W))&&Math.abs(I-S)<=f.EPSILON*Math.max(1,Math.abs(I),Math.abs(S))&&Math.abs(P-O)<=f.EPSILON*Math.max(1,Math.abs(P),Math.abs(O))};var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=a[d]);return b["default"]=a,b}(l(0));d.mul=q;d.sub=b},function(a,
d,l){function r(a,d,c){var h=d[0],l=d[1],m=d[2],e=d[3],k=d[4],g=d[5],n=d[6],p=d[7];d=d[8];var q=c[0],z=c[1],u=c[2],G=c[3],x=c[4],v=c[5],P=c[6],I=c[7];c=c[8];return a[0]=q*h+z*e+u*n,a[1]=q*l+z*k+u*p,a[2]=q*m+z*g+u*d,a[3]=G*h+x*e+v*n,a[4]=G*l+x*k+v*p,a[5]=G*m+x*g+v*d,a[6]=P*h+I*e+c*n,a[7]=P*l+I*k+c*p,a[8]=P*m+I*g+c*d,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a[6]=d[6]-c[6],a[7]=d[7]-c[7],a[8]=d[8]-c[8],a}Object.defineProperty(d,
"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(9);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};d.fromMat4=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[4],a[4]=d[5],a[5]=d[6],a[6]=d[8],a[7]=d[9],a[8]=d[10],a};d.clone=function(a){var d=new m.ARRAY_TYPE(9);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d};d.copy=function(a,d){return a[0]=d[0],
a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a};d.fromValues=function(a,d,c,h,l,q,e,k,g){var n=new m.ARRAY_TYPE(9);return n[0]=a,n[1]=d,n[2]=c,n[3]=h,n[4]=l,n[5]=q,n[6]=e,n[7]=k,n[8]=g,n};d.set=function(a,d,c,h,l,m,e,k,g,n){return a[0]=d,a[1]=c,a[2]=h,a[3]=l,a[4]=m,a[5]=e,a[6]=k,a[7]=g,a[8]=n,a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.transpose=function(a,d){if(a===d){var c=d[1],h=d[2],l=d[5];a[1]=d[3];a[2]=
d[6];a[3]=c;a[5]=d[7];a[6]=h;a[7]=l}else a[0]=d[0],a[1]=d[3],a[2]=d[6],a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=d[5],a[8]=d[8];return a};d.invert=function(a,d){var c=d[0],h=d[1],l=d[2],m=d[3],e=d[4],k=d[5],g=d[6],n=d[7],p=d[8],q=p*e-k*n,r=-p*m+k*g,u=n*m-e*g,G=c*q+h*r+l*u;return G?(G=1/G,a[0]=q*G,a[1]=(-p*h+l*n)*G,a[2]=(k*h-l*e)*G,a[3]=r*G,a[4]=(p*c-l*g)*G,a[5]=(-k*c+l*m)*G,a[6]=u*G,a[7]=(-n*c+h*g)*G,a[8]=(e*c-h*m)*G,a):null};d.adjoint=function(a,d){var c=d[0],h=d[1],l=d[2],m=d[3],e=d[4],k=d[5],
g=d[6],n=d[7],p=d[8];return a[0]=e*p-k*n,a[1]=l*n-h*p,a[2]=h*k-l*e,a[3]=k*g-m*p,a[4]=c*p-l*g,a[5]=l*m-c*k,a[6]=m*n-e*g,a[7]=h*g-c*n,a[8]=c*e-h*m,a};d.determinant=function(a){var d=a[3],c=a[4],h=a[5],l=a[6],m=a[7],e=a[8];return a[0]*(e*c-h*m)+a[1]*(-e*d+h*l)+a[2]*(m*d-c*l)};d.multiply=r;d.translate=function(a,d,c){var h=d[0],l=d[1],m=d[2],e=d[3],k=d[4],g=d[5],n=d[6],p=d[7];d=d[8];var q=c[0];c=c[1];return a[0]=h,a[1]=l,a[2]=m,a[3]=e,a[4]=k,a[5]=g,a[6]=q*h+c*e+n,a[7]=q*l+c*k+p,a[8]=q*m+c*g+d,a};d.rotate=
function(a,d,c){var h=d[0],l=d[1],m=d[2],e=d[3],k=d[4],g=d[5],n=d[6],p=d[7];d=d[8];var q=Math.sin(c);c=Math.cos(c);return a[0]=c*h+q*e,a[1]=c*l+q*k,a[2]=c*m+q*g,a[3]=c*e-q*h,a[4]=c*k-q*l,a[5]=c*g-q*m,a[6]=n,a[7]=p,a[8]=d,a};d.scale=function(a,d,c){var h=c[0];c=c[1];return a[0]=h*d[0],a[1]=h*d[1],a[2]=h*d[2],a[3]=c*d[3],a[4]=c*d[4],a[5]=c*d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=d[0],a[7]=d[1],a[8]=1,a};d.fromRotation=
function(a,d){var c=Math.sin(d),h=Math.cos(d);return a[0]=h,a[1]=c,a[2]=0,a[3]=-c,a[4]=h,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=0,a[4]=d[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromMat2d=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=0,a[3]=d[2],a[4]=d[3],a[5]=0,a[6]=d[4],a[7]=d[5],a[8]=1,a};d.fromQuat=function(a,d){var c=d[0],h=d[1],l=d[2],m=d[3],e=c+c,k=h+h,g=l+l,c=c*e,n=h*e,h=h*k,p=l*e,q=l*k,l=l*g,e=m*e,k=m*k,m=m*g;return a[0]=1-h-l,a[3]=n-m,a[6]=
p+k,a[1]=n+m,a[4]=1-c-l,a[7]=q-e,a[2]=p-k,a[5]=q+e,a[8]=1-c-h,a};d.normalFromMat4=function(a,d){var c=d[0],h=d[1],l=d[2],m=d[3],e=d[4],k=d[5],g=d[6],n=d[7],p=d[8],q=d[9],r=d[10],u=d[11],G=d[12],x=d[13],v=d[14],P=d[15],I=c*k-h*e,ra=c*g-l*e,E=c*n-m*e,B=h*g-l*k,aa=h*n-m*k,H=l*n-m*g,F=p*x-q*G,D=p*v-r*G,p=p*P-u*G,ka=q*v-r*x,q=q*P-u*x,r=r*P-u*v;return(u=I*r-ra*q+E*ka+B*p-aa*D+H*F)?(u=1/u,a[0]=(k*r-g*q+n*ka)*u,a[1]=(g*p-e*r-n*D)*u,a[2]=(e*q-k*p+n*F)*u,a[3]=(l*q-h*r-m*ka)*u,a[4]=(c*r-l*p+m*D)*u,a[5]=(h*p-
c*q-m*F)*u,a[6]=(x*H-v*aa+P*B)*u,a[7]=(v*E-G*H-P*ra)*u,a[8]=(G*aa-x*E+P*I)*u,a):null};d.projection=function(a,d,c){return a[0]=2/d,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/c,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};d.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],
2))};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a[6]=d[6]+c[6],a[7]=d[7]+c[7],a[8]=d[8]+c[8],a};d.subtract=q;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a[6]=d[6]*c,a[7]=d[7]*c,a[8]=d[8]*c,a};d.multiplyScalarAndAdd=function(a,d,c,h){return a[0]=d[0]+c[0]*h,a[1]=d[1]+c[1]*h,a[2]=d[2]+c[2]*h,a[3]=d[3]+c[3]*h,a[4]=d[4]+c[4]*h,a[5]=d[5]+c[5]*h,a[6]=d[6]+c[6]*
h,a[7]=d[7]+c[7]*h,a[8]=d[8]+c[8]*h,a};d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]};d.equals=function(a,d){var c=a[0],h=a[1],l=a[2],q=a[3],e=a[4],k=a[5],g=a[6],n=a[7],p=a[8],r=d[0],u=d[1],A=d[2],G=d[3],x=d[4],v=d[5],P=d[6],I=d[7],ra=d[8];return Math.abs(c-r)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(r))&&Math.abs(h-u)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(l-A)<=m.EPSILON*
Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(q-G)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(e-x)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(k-v)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(v))&&Math.abs(g-P)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(n-I)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(p-ra)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(ra))};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(d[c]=a[c]);return d["default"]=a,d}(l(0));d.mul=r;d.sub=q},function(a,d,l){function r(){var a=new y.ARRAY_TYPE(2);return y.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0),a}function q(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function m(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a}function b(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a}function f(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)}function c(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d}function h(a){var b=a[0];a=a[1];
return Math.sqrt(b*b+a*a)}function C(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.sqrDist=d.dist=d.div=d.mul=d.sub=d.len=void 0;d.create=r;d.clone=function(a){var b=new y.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b};d.fromValues=function(a,b){var c=new y.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c};d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a};d.set=function(a,b,c){return a[0]=b,a[1]=c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+
c[1],a};d.subtract=q;d.multiply=m;d.divide=b;d.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a};d.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a};d.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a};d.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};d.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a};d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};d.scaleAndAdd=
function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a};d.distance=f;d.squaredDistance=c;d.length=h;d.squaredLength=C;d.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};d.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a};d.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a};d.lerp=function(a,b,c,d){var f=
b[0];b=b[1];return a[0]=f+d*(c[0]-f),a[1]=b+d*(c[1]-b),a};d.random=function(a,b){b=b||1;var c=2*y.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};d.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a};d.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*b+c[5],a};d.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a};d.transformMat4=function(a,
b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a};d.rotate=function(a,b,c,d){var f=b[0]-c[0];b=b[1]-c[1];var h=Math.sin(d);d=Math.cos(d);return a[0]=f*d-b*h+c[0],a[1]=f*h+b*d+c[1],a};d.angle=function(a,b){var c=a[0],d=a[1],f=b[0],h=b[1],l=c*c+d*d;0<l&&(l=1/Math.sqrt(l));var m=f*f+h*h;0<m&&(m=1/Math.sqrt(m));c=(c*f+d*h)*l*m;return 1<c?0:-1>c?Math.PI:Math.acos(c)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===
b[1]};d.equals=function(a,b){var c=a[0],d=a[1],f=b[0],h=b[1];return Math.abs(c-f)<=y.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-h)<=y.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))};var y=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(l(0));d.len=h;d.sub=q;d.mul=m;d.div=b;d.dist=f;d.sqrDist=c;d.sqrLen=C;d.forEach=function(){var a=r();return function(b,c,d,f,h,l){var m=void 0,q=void 0;
c||(c=2);d||(d=0);q=f?Math.min(f*c+d,b.length):b.length;for(m=d;m<q;m+=c)a[0]=b[m],a[1]=b[m+1],h(a,a,l),b[m]=a[0],b[m+1]=a[1];return b}}()},function(a,d,l){function r(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function q(a,b,c){var d=.5*c[0],f=.5*c[1];c=.5*c[2];var h=b[0],l=b[1],m=b[2];b=b[3];return a[0]=h,a[1]=l,a[2]=m,a[3]=b,a[4]=d*b+f*m-c*l,a[5]=f*b+c*h-d*m,a[6]=c*b+d*l-f*h,a[7]=-d*h-f*l-c*m,a}
function m(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a}function b(a,b,c){var d=b[0],f=b[1],h=b[2],l=b[3],m=c[4],q=c[5],r=c[6],u=c[7],y=b[4],C=b[5],G=b[6];b=b[7];var E=c[0],B=c[1],P=c[2];c=c[3];return a[0]=d*c+l*E+f*P-h*B,a[1]=f*c+l*B+h*E-d*P,a[2]=h*c+l*P+d*B-f*E,a[3]=l*c-d*E-f*B-h*P,a[4]=d*u+l*m+f*r-h*q+y*c+b*E+C*P-G*B,a[5]=f*u+l*q+h*m-d*r+C*c+b*B+G*E-y*P,a[6]=h*u+l*r+d*q-f*m+G*c+b*P+y*B-C*E,a[7]=l*u-d*m-f*q-h*r+b*c-y*E-C*B-G*P,a}Object.defineProperty(d,
"__esModule",{value:!0});d.sqrLen=d.squaredLength=d.len=d.length=d.dot=d.mul=d.setReal=d.getReal=void 0;d.create=function(){var a=new f.ARRAY_TYPE(8);f.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);return a[3]=1,a};d.clone=function(a){var b=new f.ARRAY_TYPE(8);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b};d.fromValues=function(a,b,c,d,h,l,m,q){var r=new f.ARRAY_TYPE(8);return r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=h,r[5]=l,r[6]=
m,r[7]=q,r};d.fromRotationTranslationValues=function(a,b,c,d,h,l,m){var q=new f.ARRAY_TYPE(8);q[0]=a;q[1]=b;q[2]=c;q[3]=d;h*=.5;l*=.5;m*=.5;return q[4]=h*d+l*c-m*b,q[5]=l*d+m*a-h*c,q[6]=m*d+h*b-l*a,q[7]=-h*a-l*b-m*c,q};d.fromRotationTranslation=q;d.fromTranslation=function(a,b){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=.5*b[0],a[5]=.5*b[1],a[6]=.5*b[2],a[7]=0,a};d.fromRotation=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.fromMat4=function(a,b){var d=
c.create();h.getRotation(d,b);var l=new f.ARRAY_TYPE(3);return h.getTranslation(l,b),q(a,d,l),a};d.copy=m;d.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.set=function(a,b,c,d,f,h,l,m,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=f,a[4]=h,a[5]=l,a[6]=m,a[7]=q,a};d.getDual=function(a,b){return a[0]=b[4],a[1]=b[5],a[2]=b[6],a[3]=b[7],a};d.setDual=function(a,b){return a[4]=b[0],a[5]=b[1],a[6]=b[2],a[7]=b[3],a};d.getTranslation=function(a,b){var c=b[4],d=b[5],f=b[6],h=
b[7],l=-b[0],m=-b[1],q=-b[2],r=b[3];return a[0]=2*(c*r+h*l+d*q-f*m),a[1]=2*(d*r+h*m+f*l-c*q),a[2]=2*(f*r+h*q+c*m-d*l),a};d.translate=function(a,b,c){var d=b[0],f=b[1],h=b[2],l=b[3],m=.5*c[0],q=.5*c[1];c=.5*c[2];var r=b[4],u=b[5],y=b[6];b=b[7];return a[0]=d,a[1]=f,a[2]=h,a[3]=l,a[4]=l*m+f*c-h*q+r,a[5]=l*q+h*m-d*c+u,a[6]=l*c+d*q-f*m+y,a[7]=-d*m-f*q-h*c+b,a};d.rotateX=function(a,b,d){var f=-b[0],h=-b[1],l=-b[2],m=b[3],q=b[4],r=b[5],u=b[6],v=b[7],y=q*m+v*f+r*l-u*h,C=r*m+v*h+u*f-q*l,G=u*m+v*l+q*h-r*f,
q=v*m-q*f-r*h-u*l;return c.rotateX(a,b,d),f=a[0],h=a[1],l=a[2],m=a[3],a[4]=y*m+q*f+C*l-G*h,a[5]=C*m+q*h+G*f-y*l,a[6]=G*m+q*l+y*h-C*f,a[7]=q*m-y*f-C*h-G*l,a};d.rotateY=function(a,b,d){var f=-b[0],h=-b[1],l=-b[2],m=b[3],q=b[4],r=b[5],u=b[6],v=b[7],y=q*m+v*f+r*l-u*h,C=r*m+v*h+u*f-q*l,G=u*m+v*l+q*h-r*f,q=v*m-q*f-r*h-u*l;return c.rotateY(a,b,d),f=a[0],h=a[1],l=a[2],m=a[3],a[4]=y*m+q*f+C*l-G*h,a[5]=C*m+q*h+G*f-y*l,a[6]=G*m+q*l+y*h-C*f,a[7]=q*m-y*f-C*h-G*l,a};d.rotateZ=function(a,b,d){var f=-b[0],h=-b[1],
l=-b[2],m=b[3],q=b[4],r=b[5],u=b[6],v=b[7],y=q*m+v*f+r*l-u*h,C=r*m+v*h+u*f-q*l,G=u*m+v*l+q*h-r*f,q=v*m-q*f-r*h-u*l;return c.rotateZ(a,b,d),f=a[0],h=a[1],l=a[2],m=a[3],a[4]=y*m+q*f+C*l-G*h,a[5]=C*m+q*h+G*f-y*l,a[6]=G*m+q*l+y*h-C*f,a[7]=q*m-y*f-C*h-G*l,a};d.rotateByQuatAppend=function(a,b,c){var d=c[0],f=c[1],h=c[2];c=c[3];var l=b[0],m=b[1],q=b[2],r=b[3];return a[0]=l*c+r*d+m*h-q*f,a[1]=m*c+r*f+q*d-l*h,a[2]=q*c+r*h+l*f-m*d,a[3]=r*c-l*d-m*f-q*h,l=b[4],m=b[5],q=b[6],r=b[7],a[4]=l*c+r*d+m*h-q*f,a[5]=m*
c+r*f+q*d-l*h,a[6]=q*c+r*h+l*f-m*d,a[7]=r*c-l*d-m*f-q*h,a};d.rotateByQuatPrepend=function(a,b,c){var d=b[0],f=b[1],h=b[2];b=b[3];var l=c[0],m=c[1],q=c[2],r=c[3];return a[0]=d*r+b*l+f*q-h*m,a[1]=f*r+b*m+h*l-d*q,a[2]=h*r+b*q+d*m-f*l,a[3]=b*r-d*l-f*m-h*q,l=c[4],m=c[5],q=c[6],r=c[7],a[4]=d*r+b*l+f*q-h*m,a[5]=f*r+b*m+h*l-d*q,a[6]=h*r+b*q+d*m-f*l,a[7]=b*r-d*l-f*m-h*q,a};d.rotateAroundAxis=function(a,b,c,d){if(Math.abs(d)<f.EPSILON)return m(a,b);var h=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);d*=.5;var l=
Math.sin(d),q=l*c[0]/h,r=l*c[1]/h;c=l*c[2]/h;d=Math.cos(d);var h=b[0],l=b[1],u=b[2],x=b[3];a[0]=h*d+x*q+l*c-u*r;a[1]=l*d+x*r+u*q-h*c;a[2]=u*d+x*c+h*r-l*q;a[3]=x*d-h*q-l*r-u*c;h=b[4];l=b[5];u=b[6];b=b[7];return a[4]=h*d+b*q+l*c-u*r,a[5]=l*d+b*r+u*q-h*c,a[6]=u*d+b*c+h*r-l*q,a[7]=b*d-h*q-l*r-u*c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a};d.multiply=b;d.scale=function(a,b,c){return a[0]=b[0]*
c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a};d.lerp=function(a,b,c,d){var f=1-d;0>C(b,c)&&(d=-d);return a[0]=b[0]*f+c[0]*d,a[1]=b[1]*f+c[1]*d,a[2]=b[2]*f+c[2]*d,a[3]=b[3]*f+c[3]*d,a[4]=b[4]*f+c[4]*d,a[5]=b[5]*f+c[5]*d,a[6]=b[6]*f+c[6]*d,a[7]=b[7]*f+c[7]*d,a};d.invert=function(a,b){var c=y(b);return a[0]=-b[0]/c,a[1]=-b[1]/c,a[2]=-b[2]/c,a[3]=b[3]/c,a[4]=-b[4]/c,a[5]=-b[5]/c,a[6]=-b[6]/c,a[7]=b[7]/c,a};d.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],
a[2]=-b[2],a[3]=b[3],a[4]=-b[4],a[5]=-b[5],a[6]=-b[6],a[7]=b[7],a};d.normalize=function(a,b){var c=y(b);if(0<c){var c=Math.sqrt(c),d=b[0]/c,f=b[1]/c,h=b[2]/c,l=b[3]/c,m=b[4],q=b[5],r=b[6],u=b[7],C=d*m+f*q+h*r+l*u;a[0]=d;a[1]=f;a[2]=h;a[3]=l;a[4]=(m-d*C)/c;a[5]=(q-f*C)/c;a[6]=(r-h*C)/c;a[7]=(u-l*C)/c}return a};d.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===
b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};d.equals=function(a,b){var c=a[0],d=a[1],h=a[2],l=a[3],m=a[4],q=a[5],r=a[6],u=a[7],v=b[0],y=b[1],C=b[2],G=b[3],E=b[4],B=b[5],P=b[6],H=b[7];return Math.abs(c-v)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(d-y)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(h-C)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(l-G)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(m-E)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(E))&&
Math.abs(q-B)<=f.EPSILON*Math.max(1,Math.abs(q),Math.abs(B))&&Math.abs(r-P)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(u-H)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(H))};var f=r(l(0)),c=r(l(3)),h=r(l(4));d.getReal=c.copy;d.setReal=c.copy;d.mul=b;var C=d.dot=c.dot;a=d.length=c.length;var y=(d.len=a,d.squaredLength=c.squaredLength);d.sqrLen=y},function(a,d,l){function r(a,d,c){var h=d[0],l=d[1],m=d[2],e=d[3],k=d[4];d=d[5];var g=c[0],n=c[1],p=c[2],q=c[3],u=c[4];c=c[5];return a[0]=h*g+
m*n,a[1]=l*g+e*n,a[2]=h*p+m*q,a[3]=l*p+e*q,a[4]=h*u+m*c+k,a[5]=l*u+e*c+d,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(6);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new m.ARRAY_TYPE(6);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],
d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};d.fromValues=function(a,d,c,h,l,q){var e=new m.ARRAY_TYPE(6);return e[0]=a,e[1]=d,e[2]=c,e[3]=h,e[4]=l,e[5]=q,e};d.set=function(a,d,c,h,l,m,e){return a[0]=d,a[1]=c,a[2]=h,a[3]=l,a[4]=m,a[5]=e,a};d.invert=function(a,d){var c=d[0],h=d[1],l=d[2],m=d[3],e=d[4],k=d[5],g=c*m-h*l;return g?(g=1/g,a[0]=m*g,a[1]=-h*g,a[2]=-l*g,a[3]=c*g,a[4]=
(l*k-m*e)*g,a[5]=(h*e-c*k)*g,a):null};d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};d.multiply=r;d.rotate=function(a,d,c){var h=d[0],l=d[1],m=d[2],e=d[3],k=d[4];d=d[5];var g=Math.sin(c);c=Math.cos(c);return a[0]=h*c+m*g,a[1]=l*c+e*g,a[2]=h*-g+m*c,a[3]=l*-g+e*c,a[4]=k,a[5]=d,a};d.scale=function(a,d,c){var h=d[1],l=d[2],m=d[3],e=d[4],k=d[5],g=c[0];c=c[1];return a[0]=d[0]*g,a[1]=h*g,a[2]=l*c,a[3]=m*c,a[4]=e,a[5]=k,a};d.translate=function(a,d,c){var h=d[0],l=d[1],m=d[2],e=d[3],k=d[4];d=d[5];var g=
c[0];c=c[1];return a[0]=h,a[1]=l,a[2]=m,a[3]=e,a[4]=h*g+m*c+k,a[5]=l*g+e*c+d,a};d.fromRotation=function(a,d){var c=Math.sin(d),h=Math.cos(d);return a[0]=h,a[1]=c,a[2]=-c,a[3]=h,a[4]=0,a[5]=0,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],a[4]=0,a[5]=0,a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=d[0],a[5]=d[1],a};d.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a};d.subtract=q;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a};d.multiplyScalarAndAdd=function(a,d,c,h){return a[0]=d[0]+c[0]*h,a[1]=d[1]+c[1]*h,a[2]=d[2]+c[2]*h,a[3]=d[3]+c[3]*h,a[4]=d[4]+c[4]*h,a[5]=d[5]+c[5]*h,a};d.exactEquals=
function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]};d.equals=function(a,d){var c=a[0],h=a[1],l=a[2],q=a[3],e=a[4],k=a[5],g=d[0],n=d[1],p=d[2],r=d[3],u=d[4],A=d[5];return Math.abs(c-g)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(h-n)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(l-p)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(q-r)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(r))&&Math.abs(e-u)<=m.EPSILON*Math.max(1,
Math.abs(e),Math.abs(u))&&Math.abs(k-A)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d["default"]=a,d}(l(0));d.mul=r;d.sub=q},function(a,d,l){function r(a,d,c){var h=d[0],l=d[1],m=d[2];d=d[3];var e=c[0],k=c[1],g=c[2];c=c[3];return a[0]=h*e+m*k,a[1]=l*e+d*k,a[2]=h*g+m*c,a[3]=l*g+d*c,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],
a[3]=d[3]-c[3],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(4);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new m.ARRAY_TYPE(4);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a};d.fromValues=function(a,d,c,h){var l=new m.ARRAY_TYPE(4);return l[0]=a,l[1]=
d,l[2]=c,l[3]=h,l};d.set=function(a,d,c,h,l){return a[0]=d,a[1]=c,a[2]=h,a[3]=l,a};d.transpose=function(a,d){if(a===d){var c=d[1];a[1]=d[2];a[2]=c}else a[0]=d[0],a[1]=d[2],a[2]=d[1],a[3]=d[3];return a};d.invert=function(a,d){var c=d[0],h=d[1],l=d[2],m=d[3],e=c*m-l*h;return e?(e=1/e,a[0]=m*e,a[1]=-h*e,a[2]=-l*e,a[3]=c*e,a):null};d.adjoint=function(a,d){var c=d[0];return a[0]=d[3],a[1]=-d[1],a[2]=-d[2],a[3]=c,a};d.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};d.multiply=r;d.rotate=function(a,
d,c){var h=d[0],l=d[1],m=d[2];d=d[3];var e=Math.sin(c);c=Math.cos(c);return a[0]=h*c+m*e,a[1]=l*c+d*e,a[2]=h*-e+m*c,a[3]=l*-e+d*c,a};d.scale=function(a,d,c){var h=d[1],l=d[2],m=d[3],e=c[0];c=c[1];return a[0]=d[0]*e,a[1]=h*e,a[2]=l*c,a[3]=m*c,a};d.fromRotation=function(a,d){var c=Math.sin(d),h=Math.cos(d);return a[0]=h,a[1]=c,a[2]=-c,a[3]=h,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],a};d.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};d.LDU=function(a,d,c,h){return a[2]=h[2]/h[0],c[0]=h[0],c[1]=h[1],c[3]=h[3]-a[2]*c[1],[a,d,c]};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a};d.subtract=q;d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]};d.equals=function(a,d){var c=a[0],h=a[1],l=a[2],q=a[3],e=d[0],k=d[1],g=d[2],n=d[3];return Math.abs(c-e)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(h-
k)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(l-g)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(q-n)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(n))};d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a};d.multiplyScalarAndAdd=function(a,d,c,h){return a[0]=d[0]+c[0]*h,a[1]=d[1]+c[1]*h,a[2]=d[2]+c[2]*h,a[3]=d[3]+c[3]*h,a};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(d[c]=a[c]);return d["default"]=a,d}(l(0));d.mul=r;d.sub=q},function(a,d,l){function r(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}Object.defineProperty(d,"__esModule",{value:!0});d.vec4=d.vec3=d.vec2=d.quat2=d.quat=d.mat4=d.mat3=d.mat2d=d.mat2=d.glMatrix=void 0;a=r(l(0));var q=r(l(9)),m=r(l(8)),b=r(l(5)),f=r(l(4)),c=r(l(3)),h=r(l(7)),C=r(l(6)),y=r(l(2));l=r(l(1));d.glMatrix=a;d.mat2=q;d.mat2d=
m;d.mat3=b;d.mat4=f;d.quat=c;d.quat2=h;d.vec2=C;d.vec3=y;d.vec4=l}])})},{}],75:[function(l,r,G){(function(a){function d(){m.forEach(function(a){b[q[a]]=!1})}function G(a){b[q[a.keyCode]]=!1}function u(a){b[q[a.keyCode]]=!0}var q=l("vkey"),m=Object.keys(q),b={};d();r.exports=function(a){return a?b[a]:b};a.browser&&(window.addEventListener("keydown",u,!1),window.addEventListener("keyup",G,!1),window.addEventListener("blur",d,!1))}).call(this,l("_process"))},{_process:77,vkey:80}],76:[function(l,r,G){function a(a,
b,d){this.rotation=a;this.center=b;this.distance=d}function d(a,b){var d=b[0],f=b[1],d=d*d+f*f;1<d&&(d=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-d);a[3]=0}l=l("gl-matrix");var P=l.vec3,u=l.mat3,q=l.mat4,m=l.quat,b=new Float32Array(16),f=new Float32Array(16);l=a.prototype;l.view=function(a){a||(a=q.create());f[0]=f[1]=0;f[2]=-this.distance;q.fromRotationTranslation(a,m.conjugate(b,this.rotation),f);q.translate(a,a,P.negate(b,this.center));return a};l.lookAt=function(a,d,f){q.lookAt(b,a,d,f);u.fromMat4(b,
b);m.fromMat3(this.rotation,b);P.copy(this.center,d);this.distance=P.distance(a,d)};l.pan=function(a){var d=this.distance;b[0]=-d*(a[0]||0);b[1]=d*(a[1]||0);b[2]=d*(a[2]||0);P.transformQuat(b,b,this.rotation);P.add(this.center,this.center,b)};l.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};l.rotate=function(a,h){d(b,a);d(f,h);m.invert(f,f);m.multiply(b,b,f);1E-6>m.length(b)||(m.multiply(this.rotation,this.rotation,b),m.normalize(this.rotation,this.rotation))};r.exports=function(b,
d,f){b=b||[0,0,-1];d=d||[0,0,0];f=f||[0,1,0];var l=new a(m.create(),P.create(),1);l.lookAt(b,d,f);return l}},{"gl-matrix":74}],77:[function(l,r,G){function a(){throw Error("setTimeout has not been defined");}function d(){throw Error("clearTimeout has not been defined");}function P(b){if(c===setTimeout)return setTimeout(b,0);if((c===a||!c)&&setTimeout)return c=setTimeout,setTimeout(b,0);try{return c(b,0)}catch(d){try{return c.call(null,b,0)}catch(e){return c.call(this,b,0)}}}function u(a){if(h===clearTimeout)return clearTimeout(a);
if((h===d||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(a);try{return h(a)}catch(b){try{return h.call(null,a)}catch(c){return h.call(this,a)}}}function q(){y&&e&&(y=!1,e.length?C=e.concat(C):k=-1,C.length&&m())}function m(){if(!y){var a=P(q);y=!0;for(var b=C.length;b;){e=C;for(C=[];++k<b;)e&&e[k].run();k=-1;b=C.length}e=null;y=!1;u(a)}}function b(a,b){this.fun=a;this.array=b}function f(){}l=r.exports={};var c,h;try{c="function"===typeof setTimeout?setTimeout:a}catch(g){c=a}try{h="function"===
typeof clearTimeout?clearTimeout:d}catch(g){h=d}var C=[],y=!1,e,k=-1;l.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];C.push(new b(a,c));1!==C.length||y||P(m)};b.prototype.run=function(){this.fun.apply(null,this.array)};l.title="browser";l.browser=!0;l.env={};l.argv=[];l.version="";l.versions={};l.on=f;l.addListener=f;l.once=f;l.off=f;l.removeListener=f;l.removeAllListeners=f;l.emit=f;l.prependListener=f;l.prependOnceListener=
f;l.listeners=function(a){return[]};l.binding=function(a){throw Error("process.binding is not supported");};l.cwd=function(){return"/"};l.chdir=function(a){throw Error("process.chdir is not supported");};l.umask=function(){return 0}},{}],78:[function(l,r,G){function a(a){throw Error("resl: "+a);}function d(b,d,c){Object.keys(b).forEach(function(b){0>d.indexOf(b)&&a('invalid parameter "'+b+'" in '+c)})}function P(a,d){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=d}var u=["manifest",
"onDone","onProgress","onError"],q=["type","src","stream","credentials","parser"],m=["onData","onDone"];r.exports=function(b){function f(c,d){if(c in b){var e=b[c];"function"!==typeof e&&a('invalid callback "'+c+'"');return e}return null}function c(a){function b(){if(!(2>g.readyState||1===k.state||-1===k.state)){if(200!==g.status)return l('error loading resource "'+a.name+'"');if(2<g.readyState&&0===k.state){var d;d="binary"===a.type?g.response:g.responseText;if(f.data)try{h=f.data(d)}catch(e){return l(e)}else h=
d}if(3<g.readyState&&0===k.state){if(f.done)try{h=f.done()}catch(e){return l(e)}k.state=1}p[c]=h;k.progress=.75*k.progress+.25;k.ready=a.stream&&!!h||1===k.state;r()}}var c=a.name,d=a.stream,e="binary"===a.type,f=a.parser,g=new XMLHttpRequest,h=null,k=new P(c,function(){1!==k.state&&-1!==k.state&&(g.onreadystatechange=null,g.abort(),k.state=-1)});g.onreadystatechange=d?b:function(){4===g.readyState&&b()};e&&(g.responseType="arraybuffer");a.credentials&&(g.withCredentials=!0);g.open("GET",a.src,!0);
g.send();return k}function h(a,b){function c(){if(0===m.state)if(k.data)try{n=k.data(b)}catch(a){return l(a)}else n=b}function d(a){c();p[h]=n;m.progress=a.lengthComputable?Math.max(m.progress,a.loaded/a.total):.75*m.progress+.25;r(h)}function e(){c();if(0===m.state){if(k.done)try{n=k.done()}catch(a){return l(a)}m.state=1}m.progress=1;m.ready=!0;p[h]=n;g();r("finish "+h)}function f(){l('error loading asset "'+h+'"')}function g(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",
e):b.addEventListener("canplay",e);b.removeEventListener("error",f)}var h=a.name,k=a.parser,m=new P(h,function(){1!==m.state&&-1!==m.state&&(m.state=-1,g(),b.src="")}),n=b;a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",e);else{var q=!1,u=!1;b.addEventListener("loadedmetadata",function(){u=!0;q&&e()});b.addEventListener("canplay",function(){q=!0;u&&e()})}b.addEventListener("error",f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return m}
function l(a){-1!==w&&1!==w&&(w=-1,A.forEach(function(a){a.cancel()}),n?"string"===typeof a?n(Error("resl: "+a)):n(a):console.error("resl error:",a))}function r(a){if(-1!==w&&1!==w){var b=0,c=0;A.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===A.length?(w=1,k(p)):g&&g(b/A.length,a)}}"object"===typeof b&&b||a("invalid or missing configuration");d(b,u,"config");var e=b.manifest;"object"===typeof e&&e||a("missing manifest");var k=f("onDone");k||a("missing onDone() callback");var g=f("onProgress"),
n=f("onError"),p={},w=0,z={text:c,binary:function(a){return c(a)},image:function(a){return h(a,document.createElement("img"))},video:function(a){return h(a,document.createElement("video"))},audio:function(a){return h(a,document.createElement("audio"))}},A=Object.keys(e).map(function(b){function c(b,d){if(b in f.parser){var e=f.parser[b];"function"!==typeof e&&a("invalid parser callback "+b+' for asset "'+b+'"');return e}return d}var f=e[b];"string"===typeof f?f={src:f}:"object"===typeof f&&f||a('invalid asset definition "'+
b+'"');d(f,q,'asset "'+b+'"');var g={};"parser"in f&&("function"===typeof f.parser?g={data:f.parser}:"object"===typeof f.parser&&f.parser?(d(g,m,'parser for asset "'+b+'"'),"onData"in g||a('missing onData callback for parser in asset "'+b+'"'),g={data:c("onData"),done:c("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,d,e){c in f&&(e=f[c]);0>d.indexOf(e)&&a("invalid "+c+' "'+e+'" for asset "'+b+'", possible values: '+d);return e}("type",Object.keys(z),"text"),stream:!!f.stream,
credentials:!!f.credentials,src:function(c,d,e){c in f?e=f[c]:d&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof e&&a("invalid "+c+' for asset "'+b+'", must be a string');return e}("src",!0,""),parser:g}}).map(function(a){return z[a.type](a)});0===A.length&&setTimeout(function(){r("done")},1)}},{}],79:[function(l,r,G){var a=l("events/"),d=l("wheel");r.exports=function(l,r){function q(){m[0]=m[1]=m[2]=0}var m=new a;m.flush=q;q();if("undefined"===typeof window)return m;l=l||window;d(l,function(a){var d=
1===a.deltaMode?12:1;m[0]+=d*(a.deltaX||0);m[1]+=d*(a.deltaY||0);m[2]+=d*(a.deltaZ||0);m.emit("scroll",m);r&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return m}},{"events/":43,wheel:81}],80:[function(l,r,G){var a="undefined"!==typeof window?window.navigator.userAgent:"";l=/OS X/.test(a);G=/Opera/.test(a);a=!/like Gecko/.test(a)&&!G;l=r.exports={0:l?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",
9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",
92:"<meta>",93:l?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:l&&a?"-":"<volume-mute>",174:"<volume-down>",
175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:G?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(r=58;65>r;++r)l[r]=
String.fromCharCode(r);for(r=48;58>r;++r)l[r]=r-48+"";for(r=65;91>r;++r)l[r]=String.fromCharCode(r);for(r=96;106>r;++r)l[r]="<num-"+(r-96)+">";for(r=112;136>r;++r)l[r]="F"+(r-111)},{}],81:[function(l,r,G){function a(a,l,b,f){a[P](d+l,"wheel"==u?b:function(a){!a&&(a=window.event);var d={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==
u?(d.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(d.deltaX=-.025*a.wheelDeltaX)):d.deltaY=a.detail;return b(d)},f||!1)}r.exports=function(d,l,b){a(d,u,l,b);"DOMMouseScroll"==u&&a(d,"MozMousePixelScroll",l,b)};var d="",P,u;window.addEventListener?P="addEventListener":(P="attachEvent",d="on");u="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],82:[function(l,r,G){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var d=
l("./lib/util/check"),P=l("./lib/util/extend"),u=l("./lib/dynamic"),q=l("./lib/util/raf"),m=l("./lib/util/clock"),b=l("./lib/strings"),f=l("./lib/webgl"),c=l("./lib/extension"),h=l("./lib/limits"),C=l("./lib/buffer"),y=l("./lib/elements"),e=l("./lib/texture"),k=l("./lib/renderbuffer"),g=l("./lib/framebuffer"),n=l("./lib/attribute"),p=l("./lib/shader"),w=l("./lib/read"),z=l("./lib/core"),A=l("./lib/stats"),ma=l("./lib/timer");r.exports=function(l){function r(){if(0===Da.length)O&&O.update(),Qa=null;
else{Qa=q.next(r);D();for(var a=Da.length-1;0<=a;--a){var b=Da[a];b&&b(R,null,0)}ba.flush();O&&O.update()}}function G(){!Qa&&0<Da.length&&(Qa=q.next(r))}function I(){Qa&&(q.cancel(r),Qa=null)}function ra(a){a.preventDefault();fa=!0;I();ja.forEach(function(a){a()})}function E(a){ba.getError();fa=!1;ua.restore();da.restore();na.restore();U.restore();la.restore();ha.restore();K.restore();O&&O.restore();Aa.procs.refresh();G();oa.forEach(function(a){a()})}function B(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=
a[b];if(u.isDynamic(f))e[b]=u.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(u.isDynamic(f[g])){e[b]=u.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}d(!!a,"invalid args to regl({...})");d.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+
b]=d[b]})}}var c=P({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=Aa.compile(a,g,f,e,h),l=k.draw,m=k.batch,n=k.scope,p=[];return P(function(a,b){var e;fa&&d.raise("context lost");if("function"===typeof a)return n.call(this,
null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)n.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)n.call(this,a[e],b,e);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function aa(a,b){var c=0;Aa.procs.poll();var e=b.color;e&&(ba.clearColor(+e[0]||0,+e[1]||0,+e[2]||
0,+e[3]||0),c|=16384);"depth"in b&&(ba.clearDepth(+b.depth),c|=256);"stencil"in b&&(ba.clearStencil(b.stencil|0),c|=1024);d(!!c,"called regl.clear with no buffer specified");ba.clear(c)}function H(b){d.type(b,"function","regl.frame() callback must be a function");Da.push(b);G();return{cancel:function(){function c(){var b=a(Da,c);Da[b]=Da[Da.length-1];--Da.length;0>=Da.length&&I()}var e=a(Da,b);d(0<=e,"cannot cancel a frame twice");Da[e]=c}}}function F(){var a=xa.viewport,b=xa.scissor_box;a[0]=a[1]=
b[0]=b[1]=0;R.viewportWidth=R.framebufferWidth=R.drawingBufferWidth=a[2]=b[2]=ba.drawingBufferWidth;R.viewportHeight=R.framebufferHeight=R.drawingBufferHeight=a[3]=b[3]=ba.drawingBufferHeight}function D(){R.tick+=1;R.time=t();F();Aa.procs.poll()}function ka(){U.refresh();F();Aa.procs.refresh();O&&O.update()}function t(){return(m()-M)/1E3}console.log("REGL args are:",l);l=f(l);console.log("REGL configs are:",l);if(!l)return null;var ba=l.gl,L=ba.getContextAttributes(),fa=ba.isContextLost(),ua=c(ba,
l);if(!ua)return null;var T=b(),W=A(),S=ua.extensions,O=ma(ba,S),M=m(),N=ba.drawingBufferWidth,Q=ba.drawingBufferHeight,R={tick:0,time:0,viewportWidth:N,viewportHeight:Q,framebufferWidth:N,framebufferHeight:Q,drawingBufferWidth:N,drawingBufferHeight:Q,pixelRatio:l.pixelRatio},N={elements:null,primitive:4,count:-1,offset:0,instances:-1},qa=h(ba,S),na=C(ba,W,l,function(a){return K.destroyBuffer(a)}),J=y(ba,S,na,W),K=n(ba,S,qa,W,na,J,N),da=p(ba,T,W,l),U=e(ba,S,qa,function(){Aa.procs.poll()},R,W,l),la=
k(ba,S,qa,W,l),ha=g(ba,S,qa,U,la,W),Aa=z(ba,T,S,qa,na,J,U,ha,{},K,da,N,R,O,l),T=w(ba,ha,Aa.procs.poll,R,L,S,qa),xa=Aa.next,ca=ba.canvas,Da=[],ja=[],oa=[],Ba=[l.onDestroy],Qa=null;ca&&(ca.addEventListener("webglcontextlost",ra,!1),ca.addEventListener("webglcontextrestored",E,!1));var Fa=ha.setFBO=B({framebuffer:u.define.call(null,1,"framebuffer")});ka();L=P(B,{clear:function(a){d("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===
a.framebuffer_reglType)for(var b=0;6>b;++b)Fa(P({framebuffer:a.framebuffer.faces[b]},a),aa);else Fa(a,aa);else aa(null,a)},prop:u.define.bind(null,1),context:u.define.bind(null,2),"this":u.define.bind(null,3),draw:B({}),buffer:function(a){return na.create(a,34962,!1,!1)},elements:function(a){return J.create(a,!1)},texture:U.create2D,cube:U.createCube,renderbuffer:la.create,framebuffer:ha.create,framebufferCube:ha.createCube,vao:K.createVAO,attributes:L,frame:H,on:function(a,b){d.type(b,"function",
"listener callback must be a function");var c;switch(a){case "frame":return H(b);case "lost":c=ja;break;case "restore":c=oa;break;case "destroy":c=Ba;break;default:d.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:qa,hasExtension:function(a){return 0<=qa.extensions.indexOf(a.toLowerCase())},read:T,destroy:function(){Da.length=0;I();ca&&(ca.removeEventListener("webglcontextlost",
ra),ca.removeEventListener("webglcontextrestored",E));da.clear();ha.clear();la.clear();K.clear();U.clear();J.clear();na.clear();O&&O.clear();Ba.forEach(function(a){a()})},_gl:ba,_refresh:ka,poll:function(){D();O&&O.update()},now:t,stats:W});l.onDone(null,L);return L}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,
"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
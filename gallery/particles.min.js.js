(function(){function u(y,v,a){function b(d,c){if(!v[d]){if(!y[d]){var p="function"==typeof require&&require;if(!c&&p)return p(d,!0);if(g)return g(d,!0);p=Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p;}p=v[d]={exports:{}};y[d][0].call(p.exports,function(a){return b(y[d][1][a]||a)},p,p.exports,u,y,v,a)}return v[d].exports}for(var g="function"==typeof require&&require,h=0;h<a.length;h++)b(a[h]);return b}return u})()({1:[function(u,y,v){var a=u("../regl")(),b=u("gl-mat4"),g=u("hsv2rgb");
u=a.buffer(Array(1E4).fill().map(function(){var a=g(360*Math.random(),.6,1);return[10*Math.random(),10*Math.random(),10*Math.random(),10*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),2*Math.PI*Math.random(),a[0]/255,a[1]/255,a[2]/255]}));var h=a({vert:"\n  precision mediump float;\n  attribute vec4 freq, phase;\n  attribute vec3 color;\n  uniform float time;\n  uniform mat4 view, projection;\n  varying vec3 fragColor;\n  void main() {\n    vec3 position = 8.0 * cos(freq.xyz * time + phase.xyz);\n    gl_PointSize = 5.0 * (1.0 + cos(freq.w * time + phase.w));\n    gl_Position = projection * view * vec4(position, 1);\n    fragColor = color;\n  }",
frag:"\n  precision lowp float;\n  varying vec3 fragColor;\n  void main() {\n    if (length(gl_PointCoord.xy - 0.5) > 0.5) {\n      discard;\n    }\n    gl_FragColor = vec4(fragColor, 1);\n  }",attributes:{freq:{buffer:u,stride:44,offset:0},phase:{buffer:u,stride:44,offset:16},color:{buffer:u,stride:44,offset:32}},uniforms:{view:function(a){a=.01*a.tick;return b.lookAt([],[30*Math.cos(a),2.5,30*Math.sin(a)],[0,0,0],[0,1,0])},projection:function(a){return b.perspective([],Math.PI/4,a.viewportWidth/
a.viewportHeight,.01,1E3)},time:function(a){return.001*a.tick}},count:1E4,primitive:"points"});a.frame(function(){a.clear({depth:1,color:[0,0,0,1]});h()})},{"../regl":69,"gl-mat4":53,hsv2rgb:68}],2:[function(u,y,v){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var b=u("./util/sorted-object-keys"),g=u("./util/check"),h=u("./util/values"),d=u("./constants/dtypes.json"),c=u("./util/is-typed-array"),
p=u("./util/is-ndarray"),e=u("./constants/primitives.json"),l="attributes elements offset count primitive instances".split(" ");y.exports=function(pa,W,n,E,r,C,S){function D(a){if(a!==L.currentVAO){var c=W.oes_vertex_array_object;a?c.bindVertexArrayOES(a.vao):c.bindVertexArrayOES(null);L.currentVAO=a}}function na(a){if(a!==L.currentVAO){if(a)a.bindAttrs();else{for(var c=W.angle_instanced_arrays,b=0;b<w.length;++b){var e=w[b];e.buffer?(pa.enableVertexAttribArray(b),e.buffer.bind(),pa.vertexAttribPointer(b,
e.size,e.type,e.normalized,e.stride,e.offfset),c&&e.divisor&&c.vertexAttribDivisorANGLE(b,e.divisor)):(pa.disableVertexAttribArray(b),pa.vertexAttrib4f(b,e.x,e.y,e.z,e.w))}S.elements?pa.bindBuffer(34963,S.elements.buffer.buffer):pa.bindBuffer(34963,null)}L.currentVAO=a}}function oa(){h(ca).forEach(function(a){a.destroy()})}function I(){this.id=++k;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=W.oes_vertex_array_object;
this.vao=a?a.createVertexArrayOES():null;ca[this.id]=this;this.buffers=[]}function u(){W.oes_vertex_array_object&&h(ca).forEach(function(a){a.refresh()})}var t=n.maxAttributes,w=Array(t);for(n=0;n<t;++n)w[n]=new a;var k=0,ca={},L={Record:a,scope:{},state:w,currentVAO:null,targetVAO:null,restore:W.oes_vertex_array_object?u:function(){},createVAO:function(h){function A(h){var w;if(Array.isArray(h))w=h,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=
0,k.instances=-1,k.primitive=4;else{g("object"===typeof h,"invalid arguments for create vao");g("attributes"in h,"must specify attributes for vao");if(h.elements){var f=h.elements;k.ownsElements?("function"===typeof f&&"elements"===f._reglType?k.elements.destroy():k.elements(f),k.ownsElements=!1):C.getElements(h.elements)?(k.elements=h.elements,k.ownsElements=!1):(k.elements=C.create(h.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;w=h.attributes;k.offset=0;k.count=-1;k.instances=
-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in h&&(k.offset=h.offset|0);"count"in h&&(k.count=h.count|0);"instances"in h&&(k.instances=h.instances|0);"primitive"in h&&(g(h.primitive in e,"bad primitive type: "+h.primitive),k.primitive=e[h.primitive]);g.optional(function(){for(var a=b(h),c=0;c<a.length;++c)g(0<=l.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+l)});g(Array.isArray(w),"attributes must be an array")}g(w.length<
t,"too many attributes");g(0<w.length,"must specify at least one attribute");var f={},m=k.attributes;m.length=w.length;for(var Q=0;Q<w.length;++Q){var n=w[Q],P=m[Q]=new a,D=n.data||n;if(Array.isArray(D)||c(D)||p(D)){var E;k.buffers[Q]&&(E=k.buffers[Q],c(D)&&E._buffer.byteLength>=D.byteLength?E.subdata(D):(E.destroy(),k.buffers[Q]=null));k.buffers[Q]||(E=k.buffers[Q]=r.create(n,34962,!1,!0));P.buffer=r.getBuffer(E);P.size=P.buffer.dimension|0;P.normalized=!1;P.type=P.buffer.dtype;P.offset=0;P.stride=
0;P.divisor=0;P.state=1;f[Q]=1}else r.getBuffer(n)?(P.buffer=r.getBuffer(n),P.size=P.buffer.dimension|0,P.normalized=!1,P.type=P.buffer.dtype,P.offset=0,P.stride=0,P.divisor=0,P.state=1):r.getBuffer(n.buffer)?(P.buffer=r.getBuffer(n.buffer),P.size=(+n.size||P.buffer.dimension)|0,P.normalized=!!n.normalized||!1,"type"in n?(g.parameter(n.type,d,"invalid buffer type"),P.type=d[n.type]):P.type=P.buffer.dtype,P.offset=(n.offset||0)|0,P.stride=(n.stride||0)|0,P.divisor=(n.divisor||0)|0,P.state=1,g(1<=P.size&&
4>=P.size,"size must be between 1 and 4"),g(0<=P.offset,"invalid offset"),g(0<=P.stride&&255>=P.stride,"stride must be between 0 and 255"),g(0<=P.divisor,"divisor must be positive"),g(!P.divisor||!!W.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in n?(g(0<Q,"first attribute must not be a constant"),P.x=+n.x||0,P.y=+n.y||0,P.z=+n.z||0,P.w=+n.w||0,P.state=2):g(!1,"invalid attribute spec for location "+Q)}for(E=0;E<k.buffers.length;++E)!f[E]&&k.buffers[E]&&(k.buffers[E].destroy(),
k.buffers[E]=null);k.refresh();return A}var k=new I;E.vaoCount+=1;A.destroy=function(){for(var a=0;a<k.buffers.length;++a)k.buffers[a]&&k.buffers[a].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1);k.destroy()};A._vao=k;A._reglType="vao";return A(h)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var c=0;c<w.length;++c){var b=w[c];b.buffer===a&&(pa.disableVertexAttribArray(c),b.buffer=null)}},setVAO:W.oes_vertex_array_object?
D:na,clear:W.oes_vertex_array_object?oa:function(){}};I.prototype.bindAttrs=function(){for(var a=W.angle_instanced_arrays,c=this.attributes,b=0;b<c.length;++b){var e=c[b];e.buffer?(pa.enableVertexAttribArray(b),pa.bindBuffer(34962,e.buffer.buffer),pa.vertexAttribPointer(b,e.size,e.type,e.normalized,e.stride,e.offset),a&&e.divisor&&a.vertexAttribDivisorANGLE(b,e.divisor)):(pa.disableVertexAttribArray(b),pa.vertexAttrib4f(b,e.x,e.y,e.z,e.w))}for(a=c.length;a<t;++a)pa.disableVertexAttribArray(a);(a=
C.getElements(this.elements))?pa.bindBuffer(34963,a.buffer.buffer):pa.bindBuffer(34963,null)};I.prototype.refresh=function(){var a=W.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),L.currentVAO=null,a.bindVertexArrayOES(null))};I.prototype.destroy=function(){if(this.vao){var a=W.oes_vertex_array_object;this===L.currentVAO&&(L.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=
null,this.ownsElements=!1);ca[this.id]&&(delete ca[this.id],--E.vaoCount)};return L}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(u,y,v){function a(a){return n[Object.prototype.toString.call(a)]|0}function b(a,c){for(var b=0;b<c.length;++b)a[b]=c[b]}function g(a,c,b,e,d,h,g){for(var p=0,k=0;k<b;++k)for(var l=0;l<e;++l)a[p++]=c[d*k+h*l+g]}var h=u("./util/sorted-object-keys"),
d=u("./util/check"),c=u("./util/is-typed-array"),p=u("./util/is-ndarray"),e=u("./util/values"),l=u("./util/pool");v=u("./util/flatten");var pa=v.flatten,W=v.shape,n=u("./constants/arraytypes.json"),E=u("./constants/dtypes.json"),r=u("./constants/usage.json"),C=[];C[5120]=1;C[5122]=2;C[5124]=4;C[5121]=1;C[5123]=2;C[5125]=4;C[5126]=4;y.exports=function(n,D,na,oa){function I(a){this.id=k++;this.buffer=n.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=
null;na.profile&&(this.stats={size:0})}function u(a,c,b){a.byteLength=c.byteLength;n.bufferData(a.type,c,b)}function t(e,k,h,t,n,f){e.usage=h;if(Array.isArray(k)){if(e.dtype=t||5126,0<k.length)if(Array.isArray(k[0])){n=W(k);for(var m=t=1;m<n.length;++m)t*=n[m];e.dimension=t;k=pa(k,n,e.dtype);u(e,k,h);f?e.persistentData=k:l.freeType(k)}else"number"===typeof k[0]?(e.dimension=n,n=l.allocType(e.dtype,k.length),b(n,k),u(e,n,h),f?e.persistentData=n:l.freeType(n)):c(k[0])?(e.dimension=k[0].length,e.dtype=
t||a(k[0])||5126,k=pa(k,[k.length,k[0].length],e.dtype),u(e,k,h),f?e.persistentData=k:l.freeType(k)):d.raise("invalid buffer data")}else if(c(k))e.dtype=t||a(k),e.dimension=n,u(e,k,h),f&&(e.persistentData=new Uint8Array(new Uint8Array(k.buffer)));else if(p(k)){n=k.shape;var Q=k.stride,m=k.offset,w=0,r=0,E=0,D=0;1===n.length?(w=n[0],r=1,E=Q[0],D=0):2===n.length?(w=n[0],r=n[1],E=Q[0],D=Q[1]):d.raise("invalid shape");e.dtype=t||a(k.data)||5126;e.dimension=r;n=l.allocType(e.dtype,w*r);g(n,k.data,w,r,
E,D,m);u(e,n,h);f?e.persistentData=n:l.freeType(n)}else k instanceof ArrayBuffer?(e.dtype=5121,e.dimension=n,u(e,k,h),f&&(e.persistentData=new Uint8Array(new Uint8Array(k)))):d.raise("invalid buffer data")}function w(a){D.bufferCount--;oa(a);var e=a.buffer;d(e,"buffer must not be deleted already");n.deleteBuffer(e);a.buffer=null;delete ca[a.id]}var k=0,ca={};I.prototype.bind=function(){n.bindBuffer(this.type,this.buffer)};I.prototype.destroy=function(){w(this)};var L=[];na.profile&&(D.getTotalBufferSize=
function(){var a=0;h(ca).forEach(function(e){a+=ca[e].stats.size});return a});return{create:function(e,k,h,oa){function L(a){var e=35044,b=null,f=0,k=0,h=1;Array.isArray(a)||c(a)||p(a)||a instanceof ArrayBuffer?b=a:"number"===typeof a?f=a|0:a&&(d.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(d(null===b||Array.isArray(b)||c(b)||p(b),"invalid data for buffer"),b=a.data),"usage"in a&&(d.parameter(a.usage,r,"invalid buffer usage"),e=r[a.usage]),"type"in a&&(d.parameter(a.type,
E,"invalid buffer type"),k=E[a.type]),"dimension"in a&&(d.type(a.dimension,"number","invalid dimension"),h=a.dimension|0),"length"in a&&(d.nni(f,"buffer length must be a nonnegative integer"),f=a.length|0));m.bind();b?t(m,b,e,k,h,oa):(f&&n.bufferData(m.type,f,e),m.dtype=k||5121,m.usage=e,m.dimension=h,m.byteLength=f);na.profile&&(m.stats.size=m.byteLength*C[m.dtype]);return L}function f(a,e){d(e+a.byteLength<=m.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+
a.byteLength+" starting from offset "+e+" to a buffer of size "+m.byteLength);n.bufferSubData(m.type,e,a)}D.bufferCount++;var m=new I(k);ca[m.id]=m;h||L(e);L._reglType="buffer";L._buffer=m;L.subdata=function(e,k){var h=(k||0)|0,n;m.bind();if(c(e)||e instanceof ArrayBuffer)f(e,h);else if(Array.isArray(e)){if(0<e.length)if("number"===typeof e[0]){var t=l.allocType(m.dtype,e.length);b(t,e);f(t,h);l.freeType(t)}else Array.isArray(e[0])||c(e[0])?(n=W(e),t=pa(e,n,m.dtype),f(t,h),l.freeType(t)):d.raise("invalid buffer data")}else if(p(e)){n=
e.shape;var A=e.stride,w=t=0,r=0,E=0;1===n.length?(t=n[0],w=1,r=A[0],E=0):2===n.length?(t=n[0],w=n[1],r=A[0],E=A[1]):d.raise("invalid shape");n=Array.isArray(e.data)?m.dtype:a(e.data);n=l.allocType(n,t*w);g(n,e.data,t,w,r,E,e.offset);f(n,h);l.freeType(n)}else d.raise("invalid data for buffer subdata");return L};na.profile&&(L.stats=m.stats);L.destroy=function(){w(m)};return L},createStream:function(a,e){var c=L.pop();c||(c=new I(a));c.bind();t(c,e,35040,0,1,!1);return c},destroyStream:function(a){L.push(a)},
clear:function(){e(ca).forEach(w);L.forEach(w)},getBuffer:function(a){return a&&a._buffer instanceof I?a._buffer:null},restore:function(){e(ca).forEach(function(a){a.buffer=n.createBuffer();n.bindBuffer(a.type,a.buffer);n.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:t}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,
"./util/values":36}],4:[function(u,y,v){y.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(u,y,v){y.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(u,y,v){y.exports={points:0,
point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(u,y,v){y.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(u,y,v){function a(a){return Array.isArray(a)||n(a)||E(a)}function b(a){return a.sort(function(a,e){return"viewport"===a?-1:"viewport"===e?1:a<e?-1:1})}function g(a,e,c,b){this.thisDep=a;this.contextDep=e;this.propDep=c;this.append=b}function h(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}
function d(a){return new g(!1,!1,!1,a)}function c(a,e){var c=a.type;if(0===c)return c=a.data.length,new g(!0,1<=c,2<=c,e);if(4===c)return c=a.data,new g(c.thisDep,c.contextDep,c.propDep,e);if(5===c)return new g(!1,!1,!1,e);if(6===c){for(var b=c=!1,d=!1,f=0;f<a.data.length;++f){var k=a.data[f];1===k.type?d=!0:2===k.type?b=!0:3===k.type?c=!0:0===k.type?(c=!0,k=k.data,1<=k&&(b=!0),2<=k&&(d=!0)):4===k.type&&(c=c||k.data.thisDep,b=b||k.data.contextDep,d=d||k.data.propDep)}return new g(c,b,d,e)}return new g(3===
c,2===c,1===c,e)}var p=u("./util/sorted-object-keys"),e=u("./util/check"),l=u("./util/extend"),pa=u("./util/codegen"),W=u("./util/loop"),n=u("./util/is-typed-array"),E=u("./util/is-ndarray"),r=u("./util/is-array-like"),C=u("./dynamic"),S=u("./constants/primitives.json"),D=u("./constants/dtypes.json"),na=["x","y","z","w"],oa="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),I={0:0,1:1,zero:0,one:1,"src color":768,
"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},xa="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},w={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},k={frag:35632,vert:35633},ca={cw:2304,ccw:2305},L=new g(!1,!1,!1,function(){});y.exports=function(n,A,E,H,u,f,m,Q,ja,ma,gd,qc,la,Pa,Z){function K(a){return a.replace(".","_")}function N(a,e,c){var b=K(a);
ba.push(a);x[b]=G[b]=!!c;O[b]=e}function V(a,e,c){var b=K(a);ba.push(a);Array.isArray(c)?(G[b]=c.slice(),x[b]=c.slice()):G[b]=x[b]=c;Ea[b]=e}function sa(){var a=pa(),c=a.link,b=a.global;a.id=rc++;a.batchId="0";var d=c(Ha),f=a.shared={props:"a0"};p(Ha).forEach(function(a){f[a]=b.def(d,".",a)});e.optional(function(){a.CHECK=c(e);a.commandStr=e.guessCommand();a.command=c(a.commandStr);a.assert=function(a,e,b){a("if(!(",e,"))",this.CHECK,".commandRaise(",c(b),",",this.command,");")};q.invalidBlendCombinations=
xa});var k=a.next={},h=a.current={};p(Ea).forEach(function(a){Array.isArray(G[a])&&(k[a]=b.def(f.next,".",a),h[a]=b.def(f.current,".",a))});var O=a.constants={};p(q).forEach(function(a){O[a]=b.def(JSON.stringify(q[a]))});a.invoke=function(e,b){switch(b.type){case 0:var d=["this",f.context,f.props,a.batchId];return e.def(c(b.data),".call(",d.slice(0,Math.max(b.data.length+1,4)),")");case 1:return e.def(f.props,b.data);case 2:return e.def(f.context,b.data);case 3:return e.def("this",b.data);case 4:return b.data.append(a,
e),b.data.ref;case 5:return b.data.toString();case 6:return b.data.map(function(c){return a.invoke(e,c)})}};a.attribCache={};var g={};a.scopeAttrib=function(a){a=A.id(a);if(a in g)return g[a];var e=ma.scope[a];e||(e=ma.scope[a]=new ga);return g[a]=c(e)};return a}function J(a){var e=a["static"];a=a.dynamic;var b;if("profile"in e){var f=!!e.profile;b=d(function(a,e){return f});b.enable=f}else if("profile"in a){var k=a.profile;b=c(k,function(a,e){return a.invoke(e,k)})}return b}function y(a,b){var f=
a["static"],k=a.dynamic;if("framebuffer"in f){var q=f.framebuffer;return q?(q=Q.getFramebuffer(q),e.command(q,"invalid framebuffer object"),d(function(a,e){var c=a.link(q),b=a.shared;e.set(b.framebuffer,".next",c);b=b.context;e.set(b,".framebufferWidth",c+".width");e.set(b,".framebufferHeight",c+".height");return c})):d(function(a,e){var c=a.shared;e.set(c.framebuffer,".next","null");c=c.context;e.set(c,".framebufferWidth",c+".drawingBufferWidth");e.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in k){var h=k.framebuffer;return c(h,function(a,c){var b=a.invoke(c,h),U=a.shared,d=U.framebuffer,f=c.def(d,".getFramebuffer(",b,")");e.optional(function(){a.assert(c,"!"+b+"||"+f,"invalid framebuffer object")});c.set(d,".next",f);U=U.context;c.set(U,".framebufferWidth",f+"?"+f+".width:"+U+".drawingBufferWidth");c.set(U,".framebufferHeight",f+"?"+f+".height:"+U+".drawingBufferHeight");return f})}return null}function Za(a,b,d){function f(a){if(a in k){var h=k[a];e.commandType(h,
"object","invalid "+a,d.commandStr);var Da=!0,O=h.x|0,p=h.y|0,l,m;"width"in h?(l=h.width|0,e.command(0<=l,"invalid "+a,d.commandStr)):Da=!1;"height"in h?(m=h.height|0,e.command(0<=m,"invalid "+a,d.commandStr)):Da=!1;return new g(!Da&&b&&b.thisDep,!Da&&b&&b.contextDep,!Da&&b&&b.propDep,function(a,e){var c=a.shared.context,b=l;"width"in h||(b=e.def(c,".","framebufferWidth","-",O));var d=m;"height"in h||(d=e.def(c,".","framebufferHeight","-",p));return[O,p,b,d]})}if(a in q){var n=q[a],Da=c(n,function(c,
b){var d=c.invoke(b,n);e.optional(function(){c.assert(b,d+"&&typeof "+d+'==="object"',"invalid "+a)});var U=c.shared.context,f=b.def(d,".x|0"),k=b.def(d,".y|0"),q=b.def('"width" in ',d,"?",d,".width|0:","(",U,".","framebufferWidth","-",f,")"),h=b.def('"height" in ',d,"?",d,".height|0:","(",U,".","framebufferHeight","-",k,")");e.optional(function(){c.assert(b,q+">=0&&"+h+">=0","invalid "+a)});return[f,k,q,h]});b&&(Da.thisDep=Da.thisDep||b.thisDep,Da.contextDep=Da.contextDep||b.contextDep,Da.propDep=
Da.propDep||b.propDep);return Da}return b?new g(b.thisDep,b.contextDep,b.propDep,function(a,e){var c=a.shared.context;return[0,0,e.def(c,".","framebufferWidth"),e.def(c,".","framebufferHeight")]}):null}var k=a["static"],q=a.dynamic;if(a=f("viewport")){var h=a;a=new g(a.thisDep,a.contextDep,a.propDep,function(a,e){var c=h.append(a,e),b=a.shared.context;e.set(b,".viewportWidth",c[2]);e.set(b,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:f("scissor.box")}}function T(a,c){var b=a["static"];
if("string"===typeof b.frag&&"string"===typeof b.vert){if(0<p(c.dynamic).length)return null;var b=c["static"],d=p(b);if(0<d.length&&"number"===typeof b[d[0]]){for(var f=[],k=0;k<d.length;++k)e("number"===typeof b[d[k]],"must specify all vertex attribute locations when using vaos"),f.push([b[d[k]]|0,d[k]]);return f}}return null}function z(a,b,f){function q(a){if(a in O){var b=A.id(O[a]);e.optional(function(){gd.shader(k[a],b,e.guessCommand())});var f=d(function(){return b});f.id=b;return f}if(a in
p){var U=p[a];return c(U,function(b,c){var d=b.invoke(c,U),f=c.def(b.shared.strings,".id(",d,")");e.optional(function(){c(b.shared.shader,".shader(",k[a],",",f,",",b.command,");")});return f})}return null}var O=a["static"],p=a.dynamic,l=q("frag"),m=q("vert"),n=null;h(l)&&h(m)?(n=gd.program(m.id,l.id,null,f),a=d(function(a,b){return a.link(n)})):a=new g(l&&l.thisDep||m&&m.thisDep,l&&l.contextDep||m&&m.contextDep,l&&l.propDep||m&&m.propDep,function(a,b){var c=a.shared.shader,d;d=l?l.append(a,b):b.def(c,
".","frag");var f;f=m?m.append(a,b):b.def(c,".","vert");var U=c+".program("+f+","+d;e.optional(function(){U+=","+a.command});return b.def(U+")")});return{frag:l,vert:m,progVar:a,program:n}}function ha(b,U){function k(a,b){if(a in q){var f=q[a]|0;b?l.offset=f:l.instances=f;e.command(!b||0<=f,"invalid "+a,U.commandStr);return d(function(a,e){b&&(a.OFFSET=f);return f})}if(a in O){var h=O[a];return c(h,function(c,d){var f=c.invoke(d,h);b&&(c.OFFSET=f,e.optional(function(){c.assert(d,f+">=0","invalid "+
a)}));return f})}if(b){if(Jd)return d(function(a,b){return a.OFFSET=0});if(m)return new g(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(m)return new g(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var q=b["static"],O=b.dynamic,l={},m=!1,n=function(){if("vao"in q){var a=q.vao;null!==a&&null===ma.getVAO(a)&&(a=ma.createVAO(a));
m=!0;l.vao=a;return d(function(b){var c=ma.getVAO(a);return c?b.link(c):"null"})}if("vao"in O){m=!0;var b=O.vao;return c(b,function(a,c){var e=a.invoke(c,b);return c.def(a.shared.vao+".getVAO("+e+")")})}return null}(),Jd=!1,t=function(){if("elements"in q){var b=q.elements;l.elements=b;if(a(b)){var k=l.elements=f.create(b,!0),b=f.getElements(k);Jd=!0}else b&&(b=f.getElements(b),Jd=!0,e.command(b,"invalid elements",U.commandStr));k=d(function(a,c){if(b){var e=a.link(b);return a.ELEMENTS=e}return a.ELEMENTS=
null});k.value=b;return k}if("elements"in O){Jd=!0;var h=O.elements;return c(h,function(a,b){var c=a.shared,d=c.isBufferArgs,c=c.elements,f=a.invoke(b,h),U=b.def("null"),d=b.def(d,"(",f,")"),k=a.cond(d).then(U,"=",c,".createStream(",f,");")["else"](U,"=",c,".getElements(",f,");");e.optional(function(){a.assert(k["else"],"!"+f+"||"+U,"invalid elements")});b.entry(k);b.exit(a.cond(d).then(c,".destroyStream(",U,");"));return a.ELEMENTS=U})}return m?new g(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao+
".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),xd=k("offset",!0),A=function(){if("primitive"in q){var a=q.primitive;l.primitive=a;e.commandParameter(a,S,"invalid primitve",U.commandStr);return d(function(b,c){return S[a]})}if("primitive"in O){var b=O.primitive;return c(b,function(a,c){var d=a.constants.primTypes,f=a.invoke(c,b);e.optional(function(){a.assert(c,f+" in "+d,"invalid primitive, must be one of "+p(S))});return c.def(d,"[",f,"]")})}return Jd?
h(t)?t.value?d(function(a,b){return b.def(a.ELEMENTS,".primType")}):d(function(){return 4}):new g(t.thisDep,t.contextDep,t.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",4)}):m?new g(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),w=function(){if("count"in q){var a=q.count|0;l.count=a;e.command("number"===typeof a&&0<=a,"invalid vertex count",U.commandStr);return d(function(){return a})}if("count"in
O){var b=O.count;return c(b,function(a,c){var d=a.invoke(c,b);e.optional(function(){a.assert(c,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(Jd){if(h(t)){if(t)return xd?new g(xd.thisDep,xd.contextDep,xd.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);e.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")});return c}):d(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var f=d(function(){return-1});
e.optional(function(){f.MISSING=!0});return f}var k=new g(t.thisDep||xd.thisDep,t.contextDep||xd.contextDep,t.propDep||xd.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")});e.optional(function(){k.DYNAMIC=!0});return k}return m?new g(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),r=k("instances",!1);return{elements:t,primitive:A,count:w,
instances:r,offset:xd,vao:n,vaoActive:m,elementsActive:Jd,"static":l}}function da(a,b){var f=a["static"],k=a.dynamic,q={};ba.forEach(function(a){function h(b,e){if(a in f){var U=b(f[a]);q[O]=d(function(){return U})}else if(a in k){var Da=k[a];q[O]=c(Da,function(a,b){return e(a,b,a.invoke(b,Da))})}}var O=K(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(c){e.commandType(c,
"boolean",a,b.commandStr);return c},function(b,c,d){e.optional(function(){b.assert(c,"typeof "+d+'==="boolean"',"invalid flag "+a,b.commandStr)});return d});case "depth.func":return h(function(c){e.commandParameter(c,t,"invalid "+a,b.commandStr);return t[c]},function(b,c,d){var f=b.constants.compareFuncs;e.optional(function(){b.assert(c,d+" in "+f,"invalid "+a+", must be one of "+p(t))});return c.def(f,"[",d,"]")});case "depth.range":return h(function(a){e.command(r(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",b.commandStr);return a},function(a,b,c){e.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var d=b.def("+",c,"[0]"),f=b.def("+",c,"[1]");return[d,f]});case "blend.func":return h(function(a){e.commandType(a,"object","blend.func",b.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in a?a.srcAlpha:
a.src,f="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;e.commandParameter(c,I,O+".srcRGB",b.commandStr);e.commandParameter(d,I,O+".srcAlpha",b.commandStr);e.commandParameter(f,I,O+".dstRGB",b.commandStr);e.commandParameter(a,I,O+".dstAlpha",b.commandStr);e.command(-1===xa.indexOf(c+", "+f),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+f+")",b.commandStr);return[I[c],I[f],I[d],I[a]]},function(b,c,d){function f(U,q){var h=c.def('"',U,q,'" in ',d,"?",d,".",U,q,":",d,".",
U);e.optional(function(){b.assert(c,h+" in "+k,"invalid "+a+"."+U+q+", must be one of "+p(I))});return h}var k=b.constants.blendFuncs;e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var U=f("src","RGB"),q=f("dst","RGB");e.optional(function(){b.assert(c,b.constants.invalidBlendCombinations+".indexOf("+U+'+", "+'+q+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var h=c.def(k,"[",U,"]"),O=c.def(k,"[",f("src","Alpha"),"]"),
Da=c.def(k,"[",q,"]"),g=c.def(k,"[",f("dst","Alpha"),"]");return[h,Da,O,g]});case "blend.equation":return h(function(c){if("string"===typeof c)return e.commandParameter(c,ua,"invalid "+a,b.commandStr),[ua[c],ua[c]];if("object"===typeof c)return e.commandParameter(c.rgb,ua,a+".rgb",b.commandStr),e.commandParameter(c.alpha,ua,a+".alpha",b.commandStr),[ua[c.rgb],ua[c.alpha]];e.commandRaise("invalid blend.equation",b.commandStr)},function(b,c,d){var f=b.constants.blendEquations,k=c.def(),U=c.def(),q=
b.cond("typeof ",d,'==="string"');e.optional(function(){function c(a,e,d){b.assert(a,d+" in "+f,"invalid "+e+", must be one of "+p(ua))}c(q.then,a,d);b.assert(q["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);c(q["else"],a+".rgb",d+".rgb");c(q["else"],a+".alpha",d+".alpha")});q.then(k,"=",U,"=",f,"[",d,"];");q["else"](k,"=",f,"[",d,".rgb];",U,"=",f,"[",d,".alpha];");c(q);return[k,U]});case "blend.color":return h(function(a){e.command(r(a)&&4===a.length,"blend.color must be a 4d array",b.commandStr);
return W(4,function(b){return+a[b]})},function(a,b,c){e.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return W(4,function(a){return b.def("+",c,"[",a,"]")})});case "stencil.mask":return h(function(a){e.commandType(a,"number",O,b.commandStr);return a|0},function(a,b,c){e.optional(function(){a.assert(b,"typeof "+c+'==="number"',"invalid stencil.mask")});return b.def(c,"|0")});case "stencil.func":return h(function(c){e.commandType(c,
"object",O,b.commandStr);var d=c.cmp||"keep",f=c.ref||0;c="mask"in c?c.mask:-1;e.commandParameter(d,t,a+".cmp",b.commandStr);e.commandType(f,"number",a+".ref",b.commandStr);e.commandType(c,"number",a+".mask",b.commandStr);return[t[d],f,c]},function(a,b,c){var d=a.constants.compareFuncs;e.optional(function(){function e(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(c+"&&typeof ",c,'==="object"');e('!("cmp" in ',c,")||(",c,".cmp in ",d,")")});var f=b.def('"cmp" in ',
c,"?",d,"[",c,".cmp]",":",7680),k=b.def(c,".ref|0"),U=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[f,k,U]});case "stencil.opFront":case "stencil.opBack":return h(function(c){e.commandType(c,"object",O,b.commandStr);var d=c.fail||"keep",f=c.zfail||"keep";c=c.zpass||"keep";e.commandParameter(d,w,a+".fail",b.commandStr);e.commandParameter(f,w,a+".zfail",b.commandStr);e.commandParameter(c,w,a+".zpass",b.commandStr);return["stencil.opBack"===a?1029:1028,w[d],w[f],w[c]]},function(b,c,d){function f(U){e.optional(function(){b.assert(c,
'!("'+U+'" in '+d+")||("+d+"."+U+" in "+k+")","invalid "+a+"."+U+", must be one of "+p(w))});return c.def('"',U,'" in ',d,"?",k,"[",d,".",U,"]:",7680)}var k=b.constants.stencilOps;e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return h(function(a){e.commandType(a,"object",O,b.commandStr);var c=a.factor|0;a=a.units|0;e.commandType(c,"number",O+".factor",b.commandStr);
e.commandType(a,"number",O+".units",b.commandStr);return[c,a]},function(b,c,d){e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var f=c.def(d,".factor|0"),k=c.def(d,".units|0");return[f,k]});case "cull.face":return h(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);e.command(!!c,O,b.commandStr);return c},function(a,b,c){e.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return b.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(a){e.command("number"===
typeof a&&a>=H.lineWidthDims[0]&&a<=H.lineWidthDims[1],"invalid line width, must be a positive number between "+H.lineWidthDims[0]+" and "+H.lineWidthDims[1],b.commandStr);return a},function(a,b,c){e.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+H.lineWidthDims[0]+"&&"+c+"<="+H.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return h(function(a){e.commandParameter(a,ca,O,b.commandStr);return ca[a]},function(a,b,c){e.optional(function(){a.assert(b,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(c+'==="cw"?2304:2305')});case "colorMask":return h(function(a){e.command(r(a)&&4===a.length,"color.mask must be length 4 array",b.commandStr);return a.map(function(a){return!!a})},function(a,b,c){e.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return W(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return h(function(a){e.command("object"===typeof a&&a,
O,b.commandStr);var c="value"in a?a.value:1;a=!!a.invert;e.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",b.commandStr);return[c,a]},function(a,c,b){e.optional(function(){a.assert(c,b+"&&typeof "+b+'==="object"',"invalid sample.coverage")});var d=c.def('"value" in ',b,"?+",b,".value:1"),f=c.def("!!",b,".invert");return[d,f]})}});return q}function Aa(a,b){var f=a["static"],k=a.dynamic,q={};p(f).forEach(function(a){var c=f[a],k;if("number"===typeof c||
"boolean"===typeof c)k=d(function(){return c});else if("function"===typeof c){var h=c._reglType;"texture2d"===h||"textureCube"===h?k=d(function(a){return a.link(c)}):"framebuffer"===h||"framebufferCube"===h?(e.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',b.commandStr),k=d(function(a){return a.link(c.color[0])})):e.commandRaise('invalid data for uniform "'+a+'"',b.commandStr)}else r(c)?k=d(function(b){return b.global.def("[",W(c.length,function(d){e.command("number"===
typeof c[d]||"boolean"===typeof c[d],"invalid uniform "+a,b.commandStr);return c[d]}),"]")}):e.commandRaise('invalid or missing data for uniform "'+a+'"',b.commandStr);k.value=c;q[a]=k});p(k).forEach(function(a){var b=k[a];q[a]=c(b,function(a,c){return a.invoke(c,b)})});return q}function Qa(b,f){var k=b["static"],q=b.dynamic,h={};p(k).forEach(function(c){var b=k[c],q=A.id(c),O=new ga;if(a(b))O.state=1,O.buffer=u.getBuffer(u.create(b,34962,!1,!0)),O.type=0;else{var Da=u.getBuffer(b);if(Da)O.state=
1,O.buffer=Da,O.type=0;else if(e.command("object"===typeof b&&b,"invalid data for attribute "+c,f.commandStr),"constant"in b){var g=b.constant;O.buffer="null";O.state=2;"number"===typeof g?O.x=g:(e.command(r(g)&&0<g.length&&4>=g.length,"invalid constant for attribute "+c,f.commandStr),na.forEach(function(a,b){b<g.length&&(O[a]=g[b])}))}else{Da=a(b.buffer)?u.getBuffer(u.create(b.buffer,34962,!1,!0)):u.getBuffer(b.buffer);e.command(!!Da,'missing buffer for attribute "'+c+'"',f.commandStr);var l=b.offset|
0;e.command(0<=l,'invalid offset for attribute "'+c+'"',f.commandStr);var m=b.stride|0;e.command(0<=m&&256>m,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',f.commandStr);var n=b.size|0;e.command(!("size"in b)||0<n&&4>=n,'invalid size for attribute "'+c+'", must be 1,2,3,4',f.commandStr);var t=!!b.normalized,w=0;"type"in b&&(e.commandParameter(b.type,D,"invalid type for attribute "+c,f.commandStr),w=D[b.type]);var x=b.divisor|0;e.optional(function(){"divisor"in b&&(e.command(0===
x||X,'cannot specify divisor for attribute "'+c+'", instancing not supported',f.commandStr),e.command(0<=x,'invalid divisor for attribute "'+c+'"',f.commandStr));var a=f.commandStr,d="buffer offset divisor normalized type size stride".split(" ");p(b).forEach(function(b){e.command(0<=d.indexOf(b),'unknown parameter "'+b+'" for attribute pointer "'+c+'" (valid parameters are '+d+")",a)})});O.buffer=Da;O.state=1;O.size=n;O.normalized=t;O.type=w||Da.dtype;O.offset=l;O.stride=m;O.divisor=x}}h[c]=d(function(a,
b){var c=a.attribCache;if(q in c)return c[q];var e={isStream:!1};p(O).forEach(function(a){e[a]=O[a]});O.buffer&&(e.buffer=a.link(O.buffer),e.type=e.type||e.buffer+".dtype");return c[q]=e})});p(q).forEach(function(a){var b=q[a];h[a]=c(b,function(c,d){function f(a){d(Da[a],"=",k,".",a,"|0;")}var k=c.invoke(d,b),q=c.shared,U=c.constants,h=q.isBufferArgs,O=q.buffer;e.optional(function(){c.assert(d,k+"&&(typeof "+k+'==="object"||typeof '+k+'==="function")&&('+h+"("+k+")||"+O+".getBuffer("+k+")||"+O+".getBuffer("+
k+".buffer)||"+h+"("+k+'.buffer)||("constant" in '+k+"&&(typeof "+k+'.constant==="number"||'+q.isArrayLike+"("+k+".constant))))",'invalid dynamic attribute "'+a+'"')});var Da={isStream:d.def(!1)},g=new ga;g.state=1;p(g).forEach(function(a){Da[a]=d.def(""+g[a])});var l=Da.buffer,m=Da.type;d("if(",h,"(",k,")){",Da.isStream,"=true;",l,"=",O,".createStream(",34962,",",k,");",m,"=",l,".dtype;","}else{",l,"=",O,".getBuffer(",k,");","if(",l,"){",m,"=",l,".dtype;",'}else if("constant" in ',k,"){",Da.state,
"=",2,";","if(typeof "+k+'.constant === "number"){',Da[na[0]],"=",k,".constant;",na.slice(1).map(function(a){return Da[a]}).join("="),"=0;","}else{",na.map(function(a,b){return Da[a]+"="+k+".constant.length>"+b+"?"+k+".constant["+b+"]:0;"}).join(""),"}}else{","if(",h,"(",k,".buffer)){",l,"=",O,".createStream(",34962,",",k,".buffer);","}else{",l,"=",O,".getBuffer(",k,".buffer);","}",m,'="type" in ',k,"?",U.glTypes,"[",k,".type]:",l,".dtype;",Da.normalized,"=!!",k,".normalized;");f("size");f("offset");
f("stride");f("divisor");d("}}");d.exit("if(",Da.isStream,"){",O,".destroyStream(",l,");","}");return Da})});return h}function bc(a){var b=a["static"],e=a.dynamic,f={};p(b).forEach(function(a){var c=b[a];f[a]=d(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});p(e).forEach(function(a){var b=e[a];f[a]=c(b,function(a,c){return a.invoke(c,b)})});return f}function Ua(a,b,c,d,f){function k(a){var b=m[a];b&&(t[a]=b)}var q=a["static"],h=a.dynamic;e.optional(function(){function a(c){p(c).forEach(function(a){e.command(0<=
b.indexOf(a),'unknown parameter "'+a+'"',f.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ba);a(q);a(h)});var O=T(a,b),l=y(a,f),m=Za(a,l,f),n=ha(a,f),t=da(a,f),A=z(a,f,O);k("viewport");k(K("scissor.box"));var w=0<p(t).length,l={framebuffer:l,draw:n,shader:A,state:t,dirty:w,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};l.profile=J(a,f);l.uniforms=Aa(c,f);l.drawVAO=l.scopeVAO=n.vao;if(!l.drawVAO&&A.program&&!O&&E.angle_instanced_arrays&&
n["static"].elements){var r=!0;a=A.program.attributes.map(function(a){a=b["static"][a];r=r&&!!a;return a});if(r&&0<a.length){var x=ma.getVAO(ma.createVAO({attributes:a,elements:n["static"].elements}));l.drawVAO=new g(null,null,null,function(a,b){return a.link(x)});l.useVAO=!0}}O?l.useVAO=!0:l.attributes=Qa(b,f);l.context=bc(d,f);return l}function Y(a,b,c){var e=a.shared.context,d=a.scope();p(c).forEach(function(f){b.save(e,"."+f);var k=c[f].append(a,b);Array.isArray(k)?d(e,".",f,"=[",k.join(),"];"):
d(e,".",f,"=",k,";")});b(d)}function ib(a,b,c,e){var d=a.shared,f=d.gl,k=d.framebuffer,q;fa&&(q=b.def(d.extensions,".webgl_draw_buffers"));var h=a.constants,d=h.drawBuffer,h=h.backBuffer;a=c?c.append(a,b):b.def(k,".next");e||b("if(",a,"!==",k,".cur){");b("if(",a,"){",f,".bindFramebuffer(",36160,",",a,".framebuffer);");fa&&b(q,".drawBuffersWEBGL(",d,"[",a,".colorAttachments.length]);");b("}else{",f,".bindFramebuffer(",36160,",null);");fa&&b(q,".drawBuffersWEBGL(",h,");");b("}",k,".cur=",a,";");e||
b("}")}function ea(a,b,c){var e=a.shared,d=e.gl,f=a.current,k=a.next,q=e.current,h=e.next,l=a.cond(q,".dirty");ba.forEach(function(b){b=K(b);if(!(b in c.state)){var e,U;if(b in k){e=k[b];U=f[b];var g=W(G[b].length,function(a){return l.def(e,"[",a,"]")});l(a.cond(g.map(function(a,b){return a+"!=="+U+"["+b+"]"}).join("||")).then(d,".",Ea[b],"(",g,");",g.map(function(a,b){return U+"["+b+"]="+a}).join(";"),";"))}else e=l.def(h,".",b),g=a.cond(e,"!==",q,".",b),l(g),b in O?g(a.cond(e).then(d,".enable(",
O[b],");")["else"](d,".disable(",O[b],");"),q,".",b,"=",e,";"):g(d,".",Ea[b],"(",e,");",q,".",b,"=",e,";")}});0===p(c.state).length&&l(q,".dirty=false;");b(l)}function va(a,c,e,d){var f=a.shared,k=a.current,q=f.current,l=f.gl;b(p(e)).forEach(function(b){var f=e[b];if(!d||d(f)){var g=f.append(a,c);if(O[b]){var p=O[b];h(f)?g?c(l,".enable(",p,");"):c(l,".disable(",p,");"):c(a.cond(g).then(l,".enable(",p,");")["else"](l,".disable(",p,");"));c(q,".",b,"=",g,";")}else if(r(g)){var m=k[b];c(l,".",Ea[b],
"(",g,");",g.map(function(a,b){return m+"["+b+"]="+a}).join(";"),";")}else c(l,".",Ea[b],"(",g,");",q,".",b,"=",g,";")}})}function $b(a,b){X&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function nc(a,b,c,e,d){function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function k(a){n=b.def();a(n,"=",f(),";");"string"===typeof d?a(l,".count+=",d,";"):a(l,".count++;");Pa&&(e?(t=b.def(),a(t,"=",m,".getNumPendingQueries();")):a(m,".beginQuery(",l,");"))}
function q(a){a(l,".cpuTime+=",f(),"-",n,";");Pa&&(e?a(m,".pushScopeStats(",t,",",m,".getNumPendingQueries(),",l,");"):a(m,".endQuery();"))}function O(a){var c=b.def(p,".profile");b(p,".profile=",a,";");b.exit(p,".profile=",c,";")}var g=a.shared,l=a.stats,p=g.current,m=g.timer;c=c.profile;var n,t;if(c){if(h(c)){c.enable?(k(b),q(b.exit),O("true")):O("false");return}c=c.append(a,b);O(c)}else c=b.def(p,".profile");g=a.block();k(g);b("if(",c,"){",g,"}");a=a.block();q(a);b.exit("if(",c,"){",a,"}")}function jc(a,
b,c,d,f){function k(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function q(c,e,d){function f(){b("if(!",l,".buffer){",O,".enableVertexAttribArray(",g,");}");var c=d.type,k;k=d.size?b.def(d.size,"||",e):e;b("if(",l,".type!==",c,"||",l,".size!==",k,"||",n.map(function(a){return l+"."+a+"!=="+d[a]}).join("||"),"){",O,".bindBuffer(",34962,",",p,".buffer);",O,".vertexAttribPointer(",[g,k,c,
d.normalized,d.stride,d.offset],");",l,".type=",c,";",l,".size=",k,";",n.map(function(a){return l+"."+a+"="+d[a]+";"}).join(""),"}");X&&(c=d.divisor,b("if(",l,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[g,c],");",l,".divisor=",c,";}"))}function k(){b("if(",l,".buffer){",O,".disableVertexAttribArray(",g,");",l,".buffer=null;","}if(",na.map(function(a,b){return l+"."+a+"!=="+m[b]}).join("||"),"){",O,".vertexAttrib4f(",g,",",m,");",na.map(function(a,b){return l+"."+a+"="+m[b]+";"}).join(""),
"}")}var O=h.gl,g=b.def(c,".location"),l=b.def(h.attributes,"[",g,"]");c=d.state;var p=d.buffer,m=[d.x,d.y,d.z,d.w],n=["buffer","normalized","offset","stride"];1===c?f():2===c?k():(b("if(",c,"===",1,"){"),f(),b("}else{"),k(),b("}"))}var h=a.shared;d.forEach(function(d){var h=d.name,O=c.attributes[h],l;if(O){if(!f(O))return;l=O.append(a,b)}else{if(!f(L))return;var g=a.scopeAttrib(h);e.optional(function(){a.assert(b,g+".state","missing attribute "+h)});l={};p(new ga).forEach(function(a){l[a]=b.def(g,
".",a)})}q(a.link(d),k(d.info.type),l)})}function vd(a,b,c,d,f,k){for(var q=a.shared,O=q.gl,l,g=0;g<d.length;++g){var p=d[g],m=p.name,n=p.info.type,t=c.uniforms[m],p=a.link(p)+".location",w;if(t){if(!f(t))continue;if(h(t)){var x=t.value;e.command(null!==x&&"undefined"!==typeof x,'missing uniform "'+m+'"',a.commandStr);if(35678===n||35680===n)e.command("function"===typeof x&&(35678===n&&("texture2d"===x._reglType||"framebuffer"===x._reglType)||35680===n&&("textureCube"===x._reglType||"framebufferCube"===
x._reglType)),"invalid texture for uniform "+m,a.commandStr),t=a.link(x._texture||x.color[0]._texture),b(O,".uniform1i(",p,",",t+".bind());"),b.exit(t,".unbind();");else if(35674===n||35675===n||35676===n){e.optional(function(){e.command(r(x),"invalid matrix for uniform "+m,a.commandStr);e.command(35674===n&&4===x.length||35675===n&&9===x.length||35676===n&&16===x.length,"invalid length for matrix uniform "+m,a.commandStr)});var t=a.global.def("new Float32Array(["+Array.prototype.slice.call(x)+"])"),
z=2;35675===n?z=3:35676===n&&(z=4);b(O,".uniformMatrix",z,"fv(",p,",false,",t,");")}else{switch(n){case 5126:e.commandType(x,"number","uniform "+m,a.commandStr);l="1f";break;case 35664:e.command(r(x)&&2===x.length,"uniform "+m,a.commandStr);l="2f";break;case 35665:e.command(r(x)&&3===x.length,"uniform "+m,a.commandStr);l="3f";break;case 35666:e.command(r(x)&&4===x.length,"uniform "+m,a.commandStr);l="4f";break;case 35670:e.commandType(x,"boolean","uniform "+m,a.commandStr);l="1i";break;case 5124:e.commandType(x,
"number","uniform "+m,a.commandStr);l="1i";break;case 35671:e.command(r(x)&&2===x.length,"uniform "+m,a.commandStr);l="2i";break;case 35667:e.command(r(x)&&2===x.length,"uniform "+m,a.commandStr);l="2i";break;case 35672:e.command(r(x)&&3===x.length,"uniform "+m,a.commandStr);l="3i";break;case 35668:e.command(r(x)&&3===x.length,"uniform "+m,a.commandStr);l="3i";break;case 35673:e.command(r(x)&&4===x.length,"uniform "+m,a.commandStr);l="4i";break;case 35669:e.command(r(x)&&4===x.length,"uniform "+m,
a.commandStr),l="4i"}b(O,".uniform",l,"(",p,",",r(x)?Array.prototype.slice.call(x):x,");")}continue}else w=t.append(a,b)}else{if(!f(L))continue;w=b.def(q.uniforms,"[",A.id(m),"]")}35678===n?(e(!Array.isArray(w),"must specify a scalar prop for textures"),b("if(",w,"&&",w,'._reglType==="framebuffer"){',w,"=",w,".color[0];","}")):35680===n&&(e(!Array.isArray(w),"must specify a scalar prop for cube maps"),b("if(",w,"&&",w,'._reglType==="framebufferCube"){',w,"=",w,".color[0];","}"));e.optional(function(){function c(e,
d){a.assert(b,e,'bad data or missing for uniform "'+m+'".  '+d)}function d(a){e(!Array.isArray(w),"must not specify an array type for uniform");c("typeof "+w+'==="'+a+'"',"invalid type, expected "+a)}function f(b,d){Array.isArray(w)?e(w.length===b,"must have length "+b):c(q.isArrayLike+"("+w+")&&"+w+".length==="+b,"invalid vector, should have length "+b,a.commandStr)}function k(b){e(!Array.isArray(w),"must not specify a value type");c("typeof "+w+'==="function"&&'+w+'._reglType==="texture'+(3553===
b?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(n){case 5124:d("number");break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;case 35669:f(4,"number");break;case 5126:d("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:d("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,"number");break;case 35676:f(16,
"number");break;case 35678:k(3553);break;case 35680:k(34067)}});t=1;switch(n){case 35678:case 35680:t=b.def(w,"._texture");b(O,".uniform1i(",p,",",t,".bind());");b.exit(t,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";t=2;break;case 35668:case 35672:l="3i";t=3;break;case 35669:case 35673:l="4i";t=4;break;case 5126:l="1f";break;case 35664:l="2f";t=2;break;case 35665:l="3f";t=3;break;case 35666:l="4f";t=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";
break;case 35676:l="Matrix4fv"}if("M"===l.charAt(0)){b(O,".uniform",l,"(",p,",");var p=Math.pow(n-35674+2,2),Ha=a.global.def("new Float32Array(",p,")");Array.isArray(w)?b("false,(",W(p,function(a){return Ha+"["+a+"]="+w[a]}),",",Ha,")"):b("false,(Array.isArray(",w,")||",w," instanceof Float32Array)?",w,":(",W(p,function(a){return Ha+"["+a+"]="+w+"["+a+"]"}),",",Ha,")");b(");")}else{if(1<t){for(var z=[],E=[],B=0;B<t;++B)Array.isArray(w)?E.push(w[B]):E.push(b.def(w+"["+B+"]")),k&&z.push(b.def());k&&
b("if(!",a.batchId,"||",z.map(function(a,b){return a+"!=="+E[b]}).join("||"),"){",z.map(function(a,b){return a+"="+E[b]+";"}).join(""));b(O,".uniform",l,"(",p,",",E.join(","),");")}else e(!Array.isArray(w),"uniform value must not be an array"),k&&(t=b.def(),b("if(!",a.batchId,"||",t,"!==",w,"){",t,"=",w,";")),b(O,".uniform",l,"(",p,",",w,");");k&&b("}")}}}function wc(a,b,c,d){function f(e){var k=p[e];return k?k.contextDep&&d.contextDynamic||k.propDep?k.append(a,c):k.append(a,b):b.def(g,".",e)}function k(){function a(){c(A,
".drawElementsInstancedANGLE(",[n,w,r,t+"<<(("+r+"-5121)>>1)",x],");")}function b(){c(A,".drawArraysInstancedANGLE(",[n,t,w,x],");")}m&&"null"!==m?z?a():(c("if(",m,"){"),a(),c("}else{"),b(),c("}")):b()}function q(){function a(){c(l+".drawElements("+[n,w,r,t+"<<(("+r+"-5121)>>1)"]+");")}function b(){c(l+".drawArrays("+[n,t,w]+");")}m&&"null"!==m?z?a():(c("if(",m,"){"),a(),c("}else{"),b(),c("}")):b()}var O=a.shared,l=O.gl,g=O.draw,p=d.draw,m=function(){var e=p.elements,f=b;if(e){if(e.contextDep&&d.contextDynamic||
e.propDep)f=c;e=e.append(a,f);p.elementsActive&&f("if("+e+")"+l+".bindBuffer(34963,"+e+".buffer.buffer);")}else e=f.def(),f(e,"=",g,".","elements",";","if(",e,"){",l,".bindBuffer(",34963,",",e,".buffer.buffer);}","else if(",O.vao,".currentVAO){",e,"=",a.shared.elements+".getElements("+O.vao,".currentVAO.elements);",qa?"":"if("+e+")"+l+".bindBuffer(34963,"+e+".buffer.buffer);","}");return e}(),n=f("primitive"),t=f("offset"),w=function(){var f=p.count,k,q=b;if(f){if(f.contextDep&&d.contextDynamic||
f.propDep)q=c;k=f.append(a,q);e.optional(function(){f.MISSING&&a.assert(b,"false","missing vertex count");f.DYNAMIC&&a.assert(q,k+">=0","missing vertex count")})}else k=q.def(g,".","count"),e.optional(function(){a.assert(q,k+">=0","missing vertex count")});return k}();if("number"===typeof w){if(0===w)return}else c("if(",w,"){"),c.exit("}");var x,A;X&&(x=f("instances"),A=a.instancing);var r=m+".type",z=p.elements&&h(p.elements)&&!p.vaoActive;X&&("number"!==typeof x||0<=x)?"string"===typeof x?(c("if(",
x,">0){"),k(),c("}else if(",x,"<0){"),q(),c("}")):k():q()}function aa(a,b,c,d,f){var k=sa();f=k.proc("body",f);e.optional(function(){k.commandStr=b.commandStr;k.command=k.link(b.commandStr)});X&&(k.instancing=f.def(k.shared.extensions,".angle_instanced_arrays"));a(k,f,c,d);return k.compile().body}function M(a,b,c,e){$b(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,".setVAO(null);"),jc(a,b,c,e.attributes,
function(){return!0}));vd(a,b,c,e.uniforms,function(){return!0},!1);wc(a,b,b,c)}function ia(a,b){var c=a.proc("draw",1);$b(a,c);Y(a,c,b.context);ib(a,c,b.framebuffer);ea(a,c,b);va(a,c,b.state);nc(a,c,b,!1,!0);var e=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",e,".program);");if(b.shader.program)M(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var d=a.global.def("{}"),f=c.def(e,".id"),k=c.def(d,"[",f,"]");c(a.cond(k).then(k,".call(this,a0);")["else"](k,"=",d,"[",f,"]=",
a.link(function(c){return aa(M,a,b,c,1)}),"(",e,");",k,".call(this,a0);"))}0<p(b.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Fa(a,b,c,e){function d(){return!0}a.batchId="a1";$b(a,b);jc(a,b,c,e.attributes,d);vd(a,b,c,e.uniforms,d,!1);wc(a,b,b,c)}function sb(a,b,c,e){function d(a){return a.contextDep&&k||a.propDep}function f(a){return!d(a)}$b(a,b);var k=c.contextDep,q=b.def(),O=b.def();a.shared.props=O;a.batchId=q;var h=a.scope(),l=a.scope();
b(h.entry,"for(",q,"=0;",q,"<","a1",";++",q,"){",O,"=","a0","[",q,"];",l,"}",h.exit);c.needsContext&&Y(a,l,c.context);c.needsFramebuffer&&ib(a,l,c.framebuffer);va(a,l,c.state,d);c.profile&&d(c.profile)&&nc(a,l,c,!1,!0);e?(c.useVAO?c.drawVAO?d(c.drawVAO)?l(a.shared.vao,".setVAO(",c.drawVAO.append(a,l),");"):h(a.shared.vao,".setVAO(",c.drawVAO.append(a,h),");"):h(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(h(a.shared.vao,".setVAO(null);"),jc(a,h,c,e.attributes,f),jc(a,l,c,e.attributes,d)),
vd(a,h,c,e.uniforms,f,!1),vd(a,l,c,e.uniforms,d,!0),wc(a,h,l,c)):(b=a.global.def("{}"),e=c.shader.progVar.append(a,l),O=l.def(e,".id"),h=l.def(b,"[",O,"]"),l(a.shared.gl,".useProgram(",e,".program);","if(!",h,"){",h,"=",b,"[",O,"]=",a.link(function(b){return aa(Fa,a,c,b,2)}),"(",e,");}",h,".call(this,a0[",q,"],",q,");"))}function Lc(a,b){function c(a){return a.contextDep&&d||a.propDep}var e=a.proc("batch",2);a.batchId="0";$b(a,e);var d=!1,f=!0;p(b.context).forEach(function(a){d=d||b.context[a].propDep});
d||(Y(a,e,b.context),f=!1);var k=b.framebuffer,q=!1;k?(k.propDep?d=q=!0:k.contextDep&&d&&(q=!0),q||ib(a,e,k)):ib(a,e,null);b.state.viewport&&b.state.viewport.propDep&&(d=!0);ea(a,e,b);va(a,e,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||nc(a,e,b,!1,"a1");b.contextDep=d;b.needsContext=f;b.needsFramebuffer=q;f=b.shader.progVar;if(f.contextDep&&d||f.propDep)sb(a,e,b,null);else if(f=f.append(a,e),e(a.shared.gl,".useProgram(",f,".program);"),b.shader.program)sb(a,e,b,b.shader.program);else{e(a.shared.vao,
".setVAO(null);");var k=a.global.def("{}"),q=e.def(f,".id"),h=e.def(k,"[",q,"]");e(a.cond(h).then(h,".call(this,a0,a1);")["else"](h,"=",k,"[",q,"]=",a.link(function(c){return aa(sb,a,b,c,2)}),"(",f,");",h,".call(this,a0,a1);"))}0<p(b.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function Fc(a,c){function e(b){var k=c.shader[b];k&&d.set(f.shader,"."+b,k.append(a,d))}var d=a.proc("scope",3);a.batchId="a2";var f=a.shared,k=f.current;Y(a,d,c.context);
c.framebuffer&&c.framebuffer.append(a,d);b(p(c.state)).forEach(function(b){var e=c.state[b].append(a,d);r(e)?e.forEach(function(c,e){d.set(a.next[b],"["+e+"]",c)}):d.set(f.next,"."+b,e)});nc(a,d,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var e=c.draw[b];e&&d.set(f.draw,"."+b,""+e.append(a,d))});p(c.uniforms).forEach(function(b){var e=c.uniforms[b].append(a,d);Array.isArray(e)&&(e="["+e.join()+"]");d.set(f.uniforms,"["+A.id(b)+"]",e)});p(c.attributes).forEach(function(b){var e=
c.attributes[b].append(a,d),f=a.scopeAttrib(b);p(new ga).forEach(function(a){d.set(f,"."+a,e[a])})});c.scopeVAO&&d.set(f.vao,".targetVAO",c.scopeVAO.append(a,d));e("vert");e("frag");0<p(c.state).length&&(d(k,".dirty=true;"),d.exit(k,".dirty=true;"));d("a1(",a.shared.context,",a0,",a.batchId,");")}function F(a){if("object"===typeof a&&!r(a)){for(var b=p(a),c=0;c<b.length;++c)if(C.isDynamic(a[b[c]]))return!0;return!1}}function B(a,b,e){function d(a,b){q.forEach(function(c){var e=f[c];C.isDynamic(e)&&
(e=a.invoke(b,e),b(g,".",c,"=",e,";"))})}var f=b["static"][e];if(f&&F(f)){var k=a.global,q=p(f),h=!1,O=!1,l=!1,g=a.global.def("{}");q.forEach(function(b){var e=f[b];if(C.isDynamic(e))"function"===typeof e&&(e=f[b]=C.unbox(e)),b=c(e,null),h=h||b.thisDep,l=l||b.propDep,O=O||b.contextDep;else{k(g,".",b,"=");switch(typeof e){case "number":k(e);break;case "string":k('"',e,'"');break;case "object":Array.isArray(e)&&k("[",e.join(),"]");break;default:k(a.link(e))}k(";")}});b.dynamic[e]=new C.DynamicVariable(4,
{thisDep:h,contextDep:O,propDep:l,ref:g,append:d});delete b["static"][e]}}var ga=ma.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};E.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var X=E.angle_instanced_arrays,fa=E.webgl_draw_buffers,qa=E.oes_vertex_array_object,G={dirty:!0,profile:Z.profile},x={},ba=[],O={},Ea={};N("dither",3024);N("blend.enable",3042);V("blend.color","blendColor",[0,0,0,0]);V("blend.equation","blendEquationSeparate",[32774,32774]);V("blend.func","blendFuncSeparate",
[1,0,1,0]);N("depth.enable",2929,!0);V("depth.func","depthFunc",513);V("depth.range","depthRange",[0,1]);V("depth.mask","depthMask",!0);V("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);V("cull.face","cullFace",1029);V("frontFace","frontFace",2305);V("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);V("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);V("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);V("stencil.mask",
"stencilMask",-1);V("stencil.func","stencilFunc",[519,0,-1]);V("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);V("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);V("scissor.box","scissor",[0,0,n.drawingBufferWidth,n.drawingBufferHeight]);V("viewport","viewport",[0,0,n.drawingBufferWidth,n.drawingBufferHeight]);var Ha={gl:n,context:la,strings:A,next:x,current:G,draw:qc,elements:f,buffer:u,shader:gd,attributes:ma.state,vao:ma,uniforms:ja,framebuffer:Q,
extensions:E,timer:Pa,isBufferArgs:a},q={primTypes:S,compareFuncs:t,blendFuncs:I,blendEquations:ua,stencilOps:w,glTypes:D,orientationType:ca};e.optional(function(){Ha.isArrayLike=r});fa&&(q.backBuffer=[1029],q.drawBuffer=W(H.maxDrawbuffers,function(a){return 0===a?[0]:W(a,function(a){return 36064+a})}));var rc=0;return{next:x,current:G,procs:function(){var a=sa(),b=a.proc("poll"),c=a.proc("refresh"),e=a.block();b(e);c(e);var d=a.shared,f=d.gl,k=d.next,q=d.current;e(q,".dirty=false;");ib(a,b);ib(a,
c,null,!0);var h;X&&(h=a.link(X));E.oes_vertex_array_object&&c(a.link(E.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<H.maxAttributes;++l){var g=c.def(d.attributes,"[",l,"]"),m=a.cond(g,".buffer");m.then(f,".enableVertexAttribArray(",l,");",f,".bindBuffer(",34962,",",g,".buffer.buffer);",f,".vertexAttribPointer(",l,",",g,".size,",g,".type,",g,".normalized,",g,".stride,",g,".offset);")["else"](f,".disableVertexAttribArray(",l,");",f,".vertexAttrib4f(",l,",",g,".x,",g,".y,",g,
".z,",g,".w);",g,".buffer=null;");c(m);X&&c(h,".vertexAttribDivisorANGLE(",l,",",g,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");p(O).forEach(function(d){var h=O[d],l=e.def(k,".",d),g=a.block();g("if(",l,"){",f,".enable(",h,")}else{",f,".disable(",h,")}",q,".",d,"=",l,";");c(g);b("if(",l,"!==",q,".",d,"){",g,"}")});p(Ea).forEach(function(d){var h=Ea[d],l=G[d],O,g,m=a.block();m(f,".",h,"(");r(l)?(h=l.length,O=a.global.def(k,".",d),g=a.global.def(q,
".",d),m(W(h,function(a){return O+"["+a+"]"}),");",W(h,function(a){return g+"["+a+"]="+O+"["+a+"];"}).join("")),b("if(",W(h,function(a){return O+"["+a+"]!=="+g+"["+a+"]"}).join("||"),"){",m,"}")):(O=e.def(k,".",d),g=e.def(q,".",d),m(O,");",q,".",d,"=",O,";"),b("if(",O,"!==",g,"){",m,"}"));c(m)});return a.compile()}(),compile:function(a,b,c,e,d){var f=sa();f.stats=f.link(d);p(b["static"]).forEach(function(a){B(f,b,a)});oa.forEach(function(b){B(f,a,b)});var k=Ua(a,b,c,e,f);ia(f,k);Fc(f,k);Lc(f,k);return l(f.compile(),
{destroy:function(){k.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(u,y,v){function a(a,b){this.id=c++;this.type=a;this.data=b}function b(a){if(0===a.length)return[];var c=a.charAt(0),d=a.charAt(a.length-1);if(1<a.length&&c===d&&('"'===c||"'"===
c))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,c.index)).concat(b(c[1])).concat(b(a.substr(c.index+c[0].length)));c=a.split(".");if(1===c.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(d=0;d<c.length;++d)a=a.concat(b(c[d]));return a}function g(a){return"["+b(a).join("][")+"]"}function h(b,c){if("function"===typeof b)return new a(0,b);if("number"===typeof b||
"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(a,b){return h(a,c+"["+b+"]")}));if(b instanceof a)return b;d(!1,"invalid option type in uniform "+c)}var d=u("./util/check"),c=0;y.exports={DynamicVariable:a,define:function(b,c){return new a(b,g(c+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:h,accessor:g}},{"./util/check":21}],10:[function(u,y,v){var a=u("./util/check"),b=u("./util/is-typed-array"),g=u("./util/is-ndarray"),
h=u("./util/values"),d=u("./constants/primitives.json"),c=u("./constants/usage.json");y.exports=function(p,e,l,pa){function W(a){this.id=C++;r[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function n(c,d,h,n,t,w,k){c.buffer.bind();var r;d?((r=k)||b(d)&&(!g(d)||b(d.data))||(r=e.oes_element_index_uint?5125:5123),l._initBuffer(c.buffer,d,h,r,3)):(p.bufferData(34963,w,h),c.buffer.dtype=r||5121,c.buffer.usage=h,c.buffer.dimension=3,c.buffer.byteLength=w);r=k;if(!k){switch(c.buffer.dtype){case 5121:case 5120:r=
5121;break;case 5123:case 5122:r=5123;break;case 5125:case 5124:r=5125;break;default:a.raise("unsupported type for element array")}c.buffer.dtype=r}c.type=r;a(5125!==r||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");d=t;0>d&&(d=c.buffer.byteLength,5123===r?d>>=1:5125===r&&(d>>=2));c.vertCount=d;d=n;0>n&&(d=4,n=c.buffer.dimension,1===n&&(d=0),2===n&&(d=1),3===n&&(d=4));c.primType=d}function E(b){pa.elementsCount--;a(null!==b.buffer,"must not double destroy elements");
delete r[b.id];b.buffer.destroy();b.buffer=null}var r={},C=0,S={uint8:5121,uint16:5123};e.oes_element_index_uint&&(S.uint32=5125);W.prototype.bind=function(){this.buffer.bind()};var D=[];return{create:function(e,h){function p(e){if(e)if("number"===typeof e)r(e),t.primType=4,t.vertCount=e|0,t.type=5121;else{var k=null,h=35044,l=-1,E=-1,A=0,D=0;if(Array.isArray(e)||b(e)||g(e))k=e;else if(a.type(e,"object","invalid arguments for elements"),"data"in e&&(k=e.data,a(Array.isArray(k)||b(k)||g(k),"invalid data for element buffer")),
"usage"in e&&(a.parameter(e.usage,c,"invalid element buffer usage"),h=c[e.usage]),"primitive"in e&&(a.parameter(e.primitive,d,"invalid element buffer primitive"),l=d[e.primitive]),"count"in e&&(a("number"===typeof e.count&&0<=e.count,"invalid vertex count for elements"),E=e.count|0),"type"in e&&(a.parameter(e.type,S,"invalid buffer type"),D=S[e.type]),"length"in e)A=e.length|0;else if(A=E,5123===D||5122===D)A*=2;else if(5125===D||5124===D)A*=4;n(t,k,h,l,E,A,D)}else r(),t.primType=4,t.vertCount=0,
t.type=5121;return p}var r=l.create(null,34963,!0),t=new W(r._buffer);pa.elementsCount++;p(e);p._reglType="elements";p._elements=t;p.subdata=function(a,b){r.subdata(a,b);return p};p.destroy=function(){E(t)};return p},createStream:function(a){var b=D.pop();b||(b=new W(l.create(null,34963,!0,!1)._buffer));n(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){D.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof W?a._elements:null},clear:function(){h(r).forEach(E)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(u,y,v){var a=u("./util/sorted-object-keys"),b=u("./util/check");y.exports=function(g,h){function d(a){b.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=c[a]=g.getExtension(a)}catch(d){}return!!e}for(var c={},p=0;p<h.extensions.length;++p){var e=h.extensions[p];if(!d(e))return h.onDestroy(),h.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}h.optionalExtensions.forEach(d);return{extensions:c,restore:function(){a(c).forEach(function(a){if(c[a]&&!d(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(u,y,v){var a=u("./util/check"),b=u("./util/values"),g=u("./util/extend"),h=[6407,6408],d=[];d[6408]=4;d[6407]=3;var c=[];c[5121]=1;c[5126]=4;c[36193]=2;var p=[32854,32855,36194,35907,34842,34843,34836],e={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};y.exports=function(l,pa,W,n,E,r){function C(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var e=a=0;b?(a=b.width,e=b.height):c&&(a=c.width,e=c.height);this.width=a;this.height=e}function S(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function D(b,c,e){if(b){if(b.texture){b=b.texture._texture;var d=Math.max(1,b.height);a(Math.max(1,b.width)===c&&d===e,"inconsistent width/height for supplied texture")}else b=
b.renderbuffer._renderbuffer,a(b.width===c&&b.height===e,"inconsistent width/height for renderbuffer");b.refCount+=1}}function na(a,b){b&&(b.texture?l.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):l.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function oa(b){var c=3553,e=null,d=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(c=b.target|0));a.type(f,"function","invalid attachment data");b=f._reglType;"texture2d"===b?(e=f,a(3553===c)):
"textureCube"===b?(e=f,a(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===b?(d=f,c=36161):a.raise("invalid regl object for attachment");return new C(c,e,d)}function I(a,b,c,e,d){if(c)return a=n.create2D({width:a,height:b,format:e,type:d}),a._texture.refCount=0,new C(3553,a,null);a=E.create({width:a,height:b,format:e});a._renderbuffer.refCount=0;return new C(36161,null,a)}function u(a){return a&&(a.texture||a.renderbuffer)}function t(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&
a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function w(){this.id=f++;m[this.id]=this;this.framebuffer=l.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function k(a){a.colorAttachments.forEach(S);S(a.depthAttachment);S(a.stencilAttachment);S(a.depthStencilAttachment)}function ca(b){var c=b.framebuffer;a(c,"must not double destroy framebuffer");l.deleteFramebuffer(c);b.framebuffer=null;r.framebufferCount--;
delete m[b.id]}function L(b){var c;l.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(c=0;c<d.length;++c)na(36064+c,d[c]);for(c=d.length;c<W.maxColorAttachments;++c)l.framebufferTexture2D(36160,36064+c,3553,null,0);l.framebufferTexture2D(36160,33306,3553,null,0);l.framebufferTexture2D(36160,36096,3553,null,0);l.framebufferTexture2D(36160,36128,3553,null,0);na(36096,b.depthAttachment);na(36128,b.stencilAttachment);na(33306,b.depthStencilAttachment);b=l.checkFramebufferStatus(36160);
l.isContextLost()||36053===b||a.raise("framebuffer configuration not supported, status = "+e[b]);l.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;l.getError()}function P(b,e){function f(b,e){var g;a(A.next!==l,"can not update framebuffer which is currently in use");var m=0,n=0,t=!0,r=!0;g=null;var w=!0,E="rgba",C="uint8",S=1,ca=null,z=null,na=null,P=!1;if("number"===typeof b)m=b|0,n=e|0||m;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(n=b.shape,
a(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),m=n[0],n=n[1]):("radius"in b&&(m=n=b.radius),"width"in b&&(m=b.width),"height"in b&&(n=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||pa.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(S=b.colorCount|0,a(0<S,"invalid color buffer count"));"colorTexture"in b&&(w=!!b.colorTexture,E="rgba4");if("colorType"in b){C=b.colorType;if(w)a(pa.oes_texture_float||
!("float"===C||"float32"===C),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(pa.oes_texture_half_float||!("half float"===C||"float16"===C),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===C||"float16"===C)a(pa.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),E="rgba16f";else if("float"===C||"float32"===C)a(pa.webgl_color_buffer_float,
"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),E="rgba32f";a.oneOf(C,R,"invalid color type")}"colorFormat"in b&&(E=b.colorFormat,0<=ka.indexOf(E)?w=!0:0<=H.indexOf(E)?w=!1:a.optional(function(){if(w)a.oneOf(b.colorFormat,ka,"invalid color format for texture");else a.oneOf(b.colorFormat,H,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)P=!(!b.depthTexture&&!b.depthStencilTexture),a(!P||pa.webgl_depth_texture,
"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?t=b.depth:(ca=b.depth,r=!1));"stencil"in b&&("boolean"===typeof b.stencil?r=b.stencil:(z=b.stencil,t=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?t=r=b.depthStencil:(na=b.depthStencil,r=t=!1))}else m=n=1;var Q=null,ja=null,y=null,Ua=null;if(Array.isArray(g))Q=g.map(oa);else if(g)Q=[oa(g)];else for(Q=Array(S),g=0;g<S;++g)Q[g]=I(m,n,w,E,C);a(pa.webgl_draw_buffers||1>=Q.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");
a(Q.length<=W.maxColorAttachments,"too many color attachments, not supported");m=m||Q[0].width;n=n||Q[0].height;ca?ja=oa(ca):t&&!r&&(ja=I(m,n,P,"depth","uint32"));z?y=oa(z):r&&!t&&(y=I(m,n,!1,"stencil","uint8"));na?Ua=oa(na):!ca&&!z&&r&&t&&(Ua=I(m,n,P,"depth stencil","depth stencil"));a(1>=!!ca+!!z+!!na,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");t=null;for(g=0;g<Q.length;++g)D(Q[g],m,n),a(!Q[g]||Q[g].texture&&0<=h.indexOf(Q[g].texture._texture.format)||
Q[g].renderbuffer&&0<=p.indexOf(Q[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+g+" is invalid"),Q[g]&&Q[g].texture&&(r=d[Q[g].texture._texture.format]*c[Q[g].texture._texture.type],null===t?t=r:a(t===r,"all color attachments much have the same number of bits per pixel."));D(ja,m,n);a(!ja||ja.texture&&6402===ja.texture._texture.format||ja.renderbuffer&&33189===ja.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");D(y,m,n);a(!y||y.renderbuffer&&
36168===y.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");D(Ua,m,n);a(!Ua||Ua.texture&&34041===Ua.texture._texture.format||Ua.renderbuffer&&34041===Ua.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");k(l);l.width=m;l.height=n;l.colorAttachments=Q;l.depthAttachment=ja;l.stencilAttachment=y;l.depthStencilAttachment=Ua;f.color=Q.map(u);f.depth=u(ja);f.stencil=u(y);f.depthStencil=u(Ua);f.width=l.width;f.height=l.height;
L(l);return f}var l=new w;r.framebufferCount++;f(b,e);return g(f,{resize:function(b,c){a(A.next!==l,"can not resize a framebuffer which is currently in use");var e=Math.max(b|0,1),d=Math.max(c|0||e,1);if(e===l.width&&d===l.height)return f;for(var k=l.colorAttachments,h=0;h<k.length;++h)t(k[h],e,d);t(l.depthAttachment,e,d);t(l.stencilAttachment,e,d);t(l.depthStencilAttachment,e,d);l.width=f.width=e;l.height=f.height=d;L(l);return f},_reglType:"framebuffer",_framebuffer:l,destroy:function(){ca(l);k(l)},
use:function(a){A.setFBO({framebuffer:f},a)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},ka=["rgba"],H=["rgba4","rgb565","rgb5 a1"];pa.ext_srgb&&H.push("srgba");pa.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");pa.webgl_color_buffer_float&&H.push("rgba32f");var R=["uint8"];pa.oes_texture_half_float&&R.push("half float","float16");pa.oes_texture_float&&R.push("float","float32");var f=0,m={};return g(A,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&
(a=a._framebuffer,a instanceof w)?a:null},create:P,createCube:function(b){function c(b){var d;a(0>e.indexOf(A.next),"can not update framebuffer which is currently in use");var f={color:null},k=0,h=null;d="rgba";var l="uint8",m=1;if("number"===typeof b)k=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(k=b.shape,a(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),a(k[0]===k[1],"cube framebuffer must be square"),k=k[0]):("radius"in b&&(k=b.radius|0),"width"in
b?(k=b.width|0,"height"in b&&a(b.height===k,"must be square")):"height"in b&&(k=b.height|0));if("color"in b||"colors"in b)h=b.color||b.colors,Array.isArray(h)&&a(1===h.length||pa.webgl_draw_buffers,"multiple render targets not supported");h||("colorCount"in b&&(m=b.colorCount|0,a(0<m,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,R,"invalid color type"),l=b.colorType),"colorFormat"in b&&(d=b.colorFormat,a.oneOf(b.colorFormat,ka,"invalid color format for texture")));"depth"in
b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=b.depthStencil)}else k=1;if(h)if(Array.isArray(h))for(b=[],d=0;d<h.length;++d)b[d]=h[d];else b=[h];else for(b=Array(m),h={radius:k,format:d,type:l},d=0;d<m;++d)b[d]=n.createCube(h);f.color=Array(b.length);for(d=0;d<b.length;++d)m=b[d],a("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),k=k||m.width,a(m.width===k&&m.height===k,"invalid cube map shape"),f.color[d]={target:34069,data:b[d]};
for(d=0;6>d;++d){for(m=0;m<b.length;++m)f.color[m].target=34069+d;0<d&&(f.depth=e[0].depth,f.stencil=e[0].stencil,f.depthStencil=e[0].depthStencil);if(e[d])e[d](f);else e[d]=P(f)}return g(c,{width:k,height:k,color:b})}var e=Array(6);c(b);return g(c,{faces:e,resize:function(b){var d=b|0;a(0<d&&d<=W.maxCubeMapSize,"invalid radius for cube fbo");if(d===c.width)return c;var f=c.color;for(b=0;b<f.length;++b)f[b].resize(d);for(b=0;6>b;++b)e[b].resize(d);c.width=c.height=d;return c},_reglType:"framebufferCube",
destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){b(m).forEach(ca)},restore:function(){A.cur=null;A.next=null;A.dirty=!0;b(m).forEach(function(a){a.framebuffer=l.createFramebuffer();L(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(u,y,v){var a=u("./util/sorted-object-keys"),b=u("./util/pool");y.exports=function(g,h){var d=1;h.ext_texture_filter_anisotropic&&(d=g.getParameter(34047));var c=1,p=1;h.webgl_draw_buffers&&(c=g.getParameter(34852),
p=g.getParameter(36063));var e=!!h.oes_texture_float;if(e){e=g.createTexture();g.bindTexture(3553,e);g.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var l=g.createFramebuffer();g.bindFramebuffer(36160,l);g.framebufferTexture2D(36160,36064,3553,e,0);g.bindTexture(3553,null);if(36053!==g.checkFramebufferStatus(36160))e=!1;else{g.viewport(0,0,1,1);g.clearColor(1,0,0,1);g.clear(16384);var pa=b.allocType(5126,4);g.readPixels(0,0,1,1,6408,5126,pa);g.getError()?e=!1:(g.deleteFramebuffer(l),g.deleteTexture(e),
e=1===pa[0]);b.freeType(pa)}}pa=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(pa=g.createTexture(),l=b.allocType(5121,36),g.activeTexture(33984),g.bindTexture(34067,pa),g.texImage2D(34069,0,6408,3,3,0,6408,5121,l),b.freeType(l),g.bindTexture(34067,null),g.deleteTexture(pa),pa=!g.getError());return{colorBits:[g.getParameter(3410),g.getParameter(3411),g.getParameter(3412),g.getParameter(3413)],depthBits:g.getParameter(3414),
stencilBits:g.getParameter(3415),subpixelBits:g.getParameter(3408),extensions:a(h).filter(function(a){return!!h[a]}),maxAnisotropic:d,maxDrawbuffers:c,maxColorAttachments:p,pointSizeDims:g.getParameter(33901),lineWidthDims:g.getParameter(33902),maxViewportDims:g.getParameter(3386),maxCombinedTextureUnits:g.getParameter(35661),maxCubeMapSize:g.getParameter(34076),maxRenderbufferSize:g.getParameter(34024),maxTextureUnits:g.getParameter(34930),maxTextureSize:g.getParameter(3379),maxAttributes:g.getParameter(34921),
maxVertexUniforms:g.getParameter(36347),maxVertexTextureUnits:g.getParameter(35660),maxVaryingVectors:g.getParameter(36348),maxFragmentUniforms:g.getParameter(36349),glsl:g.getParameter(35724),renderer:g.getParameter(7937),vendor:g.getParameter(7936),version:g.getParameter(7938),readFloat:e,npotTextureCube:pa}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(u,y,v){var a=u("./util/check"),b=u("./util/is-typed-array");y.exports=function(g,h,d,c,p,e,l){function pa(n){var E;null===h.next?
(a(p.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),E=5121):(a(null!==h.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),E=h.next.colorAttachments[0].texture._texture.type,a.optional(function(){e.oes_texture_float?(a(5121===E||5126===E,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===E&&a(l.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
a(5121===E,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var r=0,C=0,S=c.framebufferWidth,D=c.framebufferHeight,W=null;b(n)?W=n:n&&(a.type(n,"object","invalid arguments to regl.read()"),r=n.x|0,C=n.y|0,a(0<=r&&r<c.framebufferWidth,"invalid x offset for regl.read"),a(0<=C&&C<c.framebufferHeight,"invalid y offset for regl.read"),S=(n.width||c.framebufferWidth-r)|0,D=(n.height||c.framebufferHeight-C)|0,W=n.data||null);W&&(5121===E?a(W instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===E&&a(W instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<S&&S+r<=c.framebufferWidth,"invalid width for read pixels");a(0<D&&D+C<=c.framebufferHeight,"invalid height for read pixels");d();n=S*D*4;W||(5121===E?W=new Uint8Array(n):5126===E&&(W=W||new Float32Array(n)));a.isTypedArray(W,"data buffer for regl.read() must be a typedarray");a(W.byteLength>=n,"data buffer for regl.read() too small");g.pixelStorei(3333,4);g.readPixels(r,C,S,
D,6408,E,W);return W}function W(a){var b;h.setFBO({framebuffer:a.framebuffer},function(){b=pa(a)});return b}return function(a){return a&&"framebuffer"in a?W(a):pa(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(u,y,v){var a=u("./util/sorted-object-keys"),b=u("./util/check"),g=u("./util/values"),h=[];h[32854]=2;h[32855]=2;h[36194]=2;h[33189]=2;h[36168]=1;h[34041]=4;h[35907]=4;h[34836]=16;h[34842]=8;h[34843]=6;y.exports=function(d,c,p,e,l){function pa(a){this.id=r++;this.refCount=
1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;l.profile&&(this.stats={size:0})}function W(a){var c=a.renderbuffer;b(c,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete C[a.id];e.renderbufferCount--}var n={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(n.srgba=35907);c.ext_color_buffer_half_float&&(n.rgba16f=34842,n.rgb16f=34843);c.webgl_color_buffer_float&&
(n.rgba32f=34836);var E=[];a(n).forEach(function(a){E[n[a]]=a});var r=0,C={};pa.prototype.decRef=function(){0>=--this.refCount&&W(this)};l.profile&&(e.getTotalRenderbufferSize=function(){var b=0;a(C).forEach(function(a){b+=C[a].stats.size});return b});return{create:function(a,c){function g(a,c){var e=0,w=0,k=32854;"object"===typeof a&&a?("shape"in a?(w=a.shape,b(Array.isArray(w)&&2<=w.length,"invalid renderbuffer shape"),e=w[0]|0,w=w[1]|0):("radius"in a&&(e=w=a.radius|0),"width"in a&&(e=a.width|0),
"height"in a&&(w=a.height|0)),"format"in a&&(b.parameter(a.format,n,"invalid renderbuffer format"),k=n[a.format])):"number"===typeof a?(e=a|0,w="number"===typeof c?c|0:e):a?b.raise("invalid arguments to renderbuffer constructor"):e=w=1;b(0<e&&0<w&&e<=p.maxRenderbufferSize&&w<=p.maxRenderbufferSize,"invalid renderbuffer size");if(e!==r.width||w!==r.height||k!==r.format)return g.width=r.width=e,g.height=r.height=w,r.format=k,d.bindRenderbuffer(36161,r.renderbuffer),d.renderbufferStorage(36161,k,e,w),
b(0===d.getError(),"invalid render buffer format"),l.profile&&(r.stats.size=h[r.format]*r.width*r.height),g.format=E[r.format],g}var r=new pa(d.createRenderbuffer());C[r.id]=r;e.renderbufferCount++;g(a,c);g.resize=function(a,c){var e=a|0,n=c|0||e;if(e===r.width&&n===r.height)return g;b(0<e&&0<n&&e<=p.maxRenderbufferSize&&n<=p.maxRenderbufferSize,"invalid renderbuffer size");g.width=r.width=e;g.height=r.height=n;d.bindRenderbuffer(36161,r.renderbuffer);d.renderbufferStorage(36161,r.format,e,n);b(0===
d.getError(),"invalid render buffer format");l.profile&&(r.stats.size=h[r.format]*r.width*r.height);return g};g._reglType="renderbuffer";g._renderbuffer=r;l.profile&&(g.stats=r.stats);g.destroy=function(){r.decRef()};return g},clear:function(){g(C).forEach(W)},restore:function(){g(C).forEach(function(a){a.renderbuffer=d.createRenderbuffer();d.bindRenderbuffer(36161,a.renderbuffer);d.renderbufferStorage(36161,a.format,a.width,a.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,
"./util/values":36}],16:[function(u,y,v){var a=u("./util/sorted-object-keys"),b=u("./util/check"),g=u("./util/extend"),h=u("./util/values");y.exports=function(d,c,p,e){function l(a,b,c,e){this.name=a;this.id=b;this.location=c;this.info=e}function pa(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id){a[c].location=b.location;return}a.push(b)}function W(a,e,h){var l=35632===a?r:C,g=l[e];if(!g){var k=c.str(e),g=d.createShader(a);d.shaderSource(g,k);d.compileShader(g);b.shaderError(d,g,k,a,h);l[e]=g}return g}
function n(a,b){this.id=na++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;e.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function E(a,h,g){var n;n=W(35632,a.fragId);var p=W(35633,a.vertId),k=a.program=d.createProgram();d.attachShader(k,n);d.attachShader(k,p);if(g)for(n=0;n<g.length;++n)p=g[n],d.bindAttribLocation(k,p[0],p[1]);d.linkProgram(k);b.linkError(d,k,c.str(a.fragId),c.str(a.vertId),h);g=d.getProgramParameter(k,35718);e.profile&&
(a.stats.uniformsCount=g);p=a.uniforms;for(n=0;n<g;++n)if(h=d.getActiveUniform(k,n))if(1<h.size)for(var r=0;r<h.size;++r){var E=h.name.replace("[0]","["+r+"]");pa(p,new l(E,c.id(E),d.getUniformLocation(k,E),h))}else pa(p,new l(h.name,c.id(h.name),d.getUniformLocation(k,h.name),h));g=d.getProgramParameter(k,35721);e.profile&&(a.stats.attributesCount=g);a=a.attributes;for(n=0;n<g;++n)(h=d.getActiveAttrib(k,n))&&pa(a,new l(h.name,c.id(h.name),d.getAttribLocation(k,h.name),h))}var r={},C={},S={},D=[],
na=0;e.profile&&(p.getMaxUniformsCount=function(){var a=0;D.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},p.getMaxAttributesCount=function(){var a=0;D.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var a=d.deleteShader.bind(d);h(r).forEach(a);r={};h(C).forEach(a);C={};D.forEach(function(a){d.deleteProgram(a.program)});D.length=0;S={};p.shaderCount=0},program:function(c,e,h,l){b.command(0<=c,"missing vertex shader",
h);b.command(0<=e,"missing fragment shader",h);var w=S[e];w||(w=S[e]={});var k=w[c];if(k&&(k.refCount++,!l))return k;var W=new n(e,c);p.shaderCount++;E(W,h,l);k||(w[c]=W);D.push(W);return g(W,{destroy:function(){W.refCount--;if(0>=W.refCount){d.deleteProgram(W.program);var b=D.indexOf(W);D.splice(b,1);p.shaderCount--}0>=w[W.vertId].refCount&&(d.deleteShader(C[W.vertId]),delete C[W.vertId],delete S[W.fragId][W.vertId]);a(S[W.fragId]).length||(d.deleteShader(r[W.fragId]),delete r[W.fragId],delete S[W.fragId])}})},
restore:function(){r={};C={};for(var a=0;a<D.length;++a)E(D[a],null,D[a].attributes.map(function(a){return[a.location,a.name]}))},shader:W,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(u,y,v){y.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(u,y,v){y.exports=function(){var a={"":0},b=[""];
return{id:function(g){var h=a[g];if(h)return h;h=a[g]=b.length;b.push(g);return h},str:function(a){return b[a]}}}},{}],19:[function(u,y,v){function a(a){return"[object "+a+"]"}function b(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function g(a){return Array.isArray(a)&&0!==a.length&&S(a[0])?!0:!1}function h(a){return Object.prototype.toString.call(a)}function d(a){if(!a)return!1;var c=h(a);return 0<=ka.indexOf(c)?!0:b(a)||g(a)||E(a)}function c(a,b){36193===a.type?(a.data=C(b),
r.freeType(b)):a.data=b}function p(a,b,c,e,d,k){a="undefined"!==typeof R[a]?R[a]:t[a]*H[b];k&&(a*=6);if(d){for(e=0;1<=c;)e+=a*c*c,c/=2;return e}return a*c*e}var e=u("./util/sorted-object-keys"),l=u("./util/check"),pa=u("./util/extend"),W=u("./util/values"),n=u("./util/is-typed-array"),E=u("./util/is-ndarray"),r=u("./util/pool"),C=u("./util/to-half-float"),S=u("./util/is-array-like"),D=u("./util/flatten"),na=u("./util/is-pow2");v=u("./constants/arraytypes.json");var oa=u("./constants/arraytypes.json"),
I=[9984,9986,9985,9987],xa=[0,6409,6410,6407,6408],t={};t[6409]=t[6406]=t[6402]=1;t[34041]=t[6410]=2;t[6407]=t[35904]=3;t[6408]=t[35906]=4;var w=a("HTMLCanvasElement"),k=a("OffscreenCanvas"),ca=a("CanvasRenderingContext2D"),L=a("ImageBitmap"),P=a("HTMLImageElement"),A=a("HTMLVideoElement"),ka=e(v).concat([w,k,ca,L,P,A]),H=[];H[5121]=1;H[5126]=4;H[36193]=2;H[5123]=2;H[5125]=4;var R=[];R[32854]=2;R[32855]=2;R[36194]=2;R[34041]=4;R[33776]=.5;R[33777]=.5;R[33778]=1;R[33779]=1;R[35986]=.5;R[35987]=1;R[34798]=
1;R[35840]=.5;R[35841]=.25;R[35842]=.5;R[35843]=.25;R[36196]=.5;y.exports=function(a,m,H,u,R,ka,y){function la(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Pa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=
b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Z(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(l.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(l.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(l.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(l.parameter(b.colorSpace,wc,"invalid colorSpace"),
a.colorSpace=wc[b.colorSpace]);if("type"in b){var c=b.type;l(m.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");l(m.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");l(m.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
l.parameter(c,aa,"invalid texture type");a.type=aa[c]}var e=a.width,d=a.height,f=a.channels,c=!1;"shape"in b?(l(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),e=b.shape[0],d=b.shape[1],3===b.shape.length&&(f=b.shape[2],l(0<f&&4>=f,"invalid number of channels"),c=!0),l(0<=e&&e<=H.maxTextureSize,"invalid width"),l(0<=d&&d<=H.maxTextureSize,"invalid height")):("radius"in b&&(e=d=b.radius,l(0<=e&&e<=H.maxTextureSize,"invalid radius")),"width"in b&&(e=b.width,l(0<=e&&e<=H.maxTextureSize,
"invalid width")),"height"in b&&(d=b.height,l(0<=d&&d<=H.maxTextureSize,"invalid height")),"channels"in b&&(f=b.channels,l(0<f&&4>=f,"invalid number of channels"),c=!0));a.width=e|0;a.height=d|0;a.channels=f|0;e=!1;"format"in b&&(e=b.format,l(m.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),l.parameter(e,M,"invalid texture format"),d=a.internalformat=M[e],a.format=ua[d],e in aa&&!("type"in b)&&(a.type=
aa[e]),e in ia&&(a.compressed=!0),e=!0);!c&&e?a.channels=t[a.format]:c&&!e?a.channels!==xa[a.format]&&(a.format=a.internalformat=xa[a.channels]):e&&c&&l(a.channels===t[a.format],"number of channels inconsistent with specified format")}}function K(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function N(){la.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function V(a,e){var f=null;d(e)?f=e:e&&(l.type(e,"object","invalid pixel data type"),Z(a,e),"x"in e&&(a.xOffset=e.x|0),"y"in e&&(a.yOffset=e.y|0),d(e.data)&&(f=e.data));l(!a.compressed||f instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(e.copy){l(!f,"can not specify copy and data field for the same texture");var q=R.viewportWidth,m=R.viewportHeight;a.width=a.width||q-a.xOffset;a.height=a.height||m-a.yOffset;a.needsCopy=!0;l(0<=a.xOffset&&a.xOffset<q&&0<=a.yOffset&&
a.yOffset<m&&0<a.width&&a.width<=q&&0<a.height&&a.height<=m,"copy texture read out of bounds")}else if(!f)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(n(f))a.channels=a.channels||4,a.data=f,"type"in e||5121!==a.type||(a.type=oa[Object.prototype.toString.call(f)]|0);else if(b(f)){a.channels=a.channels||4;q=f;m=q.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:m=r.allocType(a.type,m);m.set(q);a.data=m;break;case 36193:a.data=C(q);break;default:l.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(E(f)){q=f.data;Array.isArray(q)||5121!==a.type||(a.type=oa[Object.prototype.toString.call(q)]|0);var m=f.shape,p=f.stride,t,x,z,B;3===m.length?(z=m[2],B=p[2]):(l(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),B=z=1);t=m[0];x=m[1];m=p[0];p=p[1];a.alignment=1;a.width=t;a.height=x;a.channels=z;a.format=a.internalformat=xa[z];a.needsFree=!0;t=B;f=f.offset;z=a.width;B=a.height;x=a.channels;for(var W=r.allocType(36193===a.type?5126:a.type,z*B*x),M=0,G=0;G<B;++G)for(var ba=
0;ba<z;++ba)for(var F=0;F<x;++F)W[M++]=q[m*ba+p*G+t*F+f];c(a,W)}else if(h(f)===w||h(f)===k||h(f)===ca)h(f)===w||h(f)===k?a.element=f:a.element=f.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(h(f)===L)a.element=f,a.width=f.width,a.height=f.height,a.channels=4;else if(h(f)===P)a.element=f,a.width=f.naturalWidth,a.height=f.naturalHeight,a.channels=4;else if(h(f)===A)a.element=f,a.width=f.videoWidth,a.height=f.videoHeight,a.channels=4;else if(g(f)){q=a.width||f[0].length;
m=a.height||f.length;p=a.channels;p=S(f[0][0])?p||f[0][0].length:p||1;t=D.shape(f);z=1;for(B=0;B<t.length;++B)z*=t[B];z=r.allocType(36193===a.type?5126:a.type,z);D.flatten(f,t,"",z);c(a,z);a.alignment=1;a.width=q;a.height=m;a.channels=p;a.format=a.internalformat=xa[p];a.needsFree=!0}5126===a.type?l(0<=H.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&l(0<=H.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function sa(b,c,e,d,k){var h=b.element,l=b.data,g=b.internalformat,m=b.format,n=b.type,p=b.width,r=b.height;K(b);h?a.texSubImage2D(c,k,e,d,m,n,h):b.compressed?a.compressedTexSubImage2D(c,k,e,d,g,p,r,l):b.needsCopy?(u(),a.copyTexSubImage2D(c,k,e,d,b.xOffset,b.yOffset,p,r)):a.texSubImage2D(c,k,e,d,p,r,m,n,l)}function J(){return X.pop()||new N}function Ub(a){a.needsFree&&r.freeType(a.data);N.call(a);X.push(a)}function Za(){la.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function T(a,b,c){var e=a.images[0]=J();a.mipmask=1;e.width=a.width=b;e.height=a.height=c;e.channels=a.channels=4}function z(a,b){var c=null;if(d(b))c=a.images[0]=J(),Pa(c,a),V(c,b),a.mipmask=1;else if(Z(a,b),Array.isArray(b.mipmap))for(var e=b.mipmap,f=0;f<e.length;++f)c=a.images[f]=J(),Pa(c,a),c.width>>=f,c.height>>=f,V(c,e[f]),a.mipmask|=1<<f;else c=a.images[0]=J(),Pa(c,a),V(c,b),a.mipmask=1;Pa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||l(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ha(b,c){for(var e=b.images,d=0;d<e.length&&e[d];++d){var k=e[d],h=c,l=d,g=k.element,m=k.data,n=k.internalformat,p=k.format,r=k.type,t=k.width,x=k.height;K(k);g?a.texImage2D(h,l,p,p,r,g):k.compressed?a.compressedTexImage2D(h,l,n,t,x,0,m):k.needsCopy?(u(),a.copyTexImage2D(h,l,p,k.xOffset,k.yOffset,t,x,0)):a.texImage2D(h,
l,p,t,x,0,p,r,m||null)}}function da(){var a=fa.pop()||new Za;la.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Aa(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&Ub(b[c]),b[c]=null;fa.push(a)}function Qa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function v(a,b){if("min"in b){var c=b.min;l.parameter(c,vd);a.minFilter=vd[c];0<=I.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&
(c=b.mag,l.parameter(c,jc),a.magFilter=jc[c]);var c=a.wrapS,e=a.wrapT;if("wrap"in b){var d=b.wrap;"string"===typeof d?(l.parameter(d,nc),c=e=nc[d]):Array.isArray(d)&&(l.parameter(d[0],nc),l.parameter(d[1],nc),c=nc[d[0]],e=nc[d[1]])}else"wrapS"in b&&(c=b.wrapS,l.parameter(c,nc),c=nc[c]),"wrapT"in b&&(e=b.wrapT,l.parameter(e,nc),e=nc[e]);a.wrapS=c;a.wrapT=e;"anisotropic"in b&&(c=b.anisotropic,l("number"===typeof c&&1<=c&&c<=H.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);
if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":l.parameter(b.mipmap,$b,"invalid mipmap hint");a.mipmapHint=$b[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":l(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;c=!0;break;default:l.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ua(b,c){a.texParameteri(c,10241,b.minFilter);a.texParameteri(c,10240,b.magFilter);a.texParameteri(c,10242,b.wrapS);a.texParameteri(c,
10243,b.wrapT);m.ext_texture_filter_anisotropic&&a.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(c))}function Y(b){la.call(this);this.mipmask=0;this.internalformat=6408;this.id=qa++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Qa;y.profile&&(this.stats={size:0})}function ib(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ea(){var b=ba[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function va(b){var c=b.texture;l(c,"must not double destroy texture");var e=b.unit,d=b.target;0<=e&&(a.activeTexture(33984+e),a.bindTexture(d,null),ba[e]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete G[b.id];ka.textureCount--}var $b={"don't care":4352,"dont care":4352,nice:4354,fast:4353},nc={repeat:10497,clamp:33071,mirror:33648},jc={nearest:9728,linear:9729},vd=pa({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},jc),wc={none:0,browser:37444},aa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},M={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ia={};m.ext_srgb&&(M.srgb=35904,M.srgba=35906);m.oes_texture_float&&(aa.float32=aa["float"]=5126);m.oes_texture_half_float&&(aa.float16=aa["half float"]=36193);m.webgl_depth_texture&&(pa(M,{depth:6402,"depth stencil":34041}),pa(aa,{uint16:5123,
uint32:5125,"depth stencil":34042}));m.webgl_compressed_texture_s3tc&&pa(ia,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});m.webgl_compressed_texture_atc&&pa(ia,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});m.webgl_compressed_texture_pvrtc&&pa(ia,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});m.webgl_compressed_texture_etc1&&(ia["rgb etc1"]=36196);var Fa=
Array.prototype.slice.call(a.getParameter(34467));e(ia).forEach(function(a){var b=ia[a];0<=Fa.indexOf(b)&&(M[a]=b)});var sb=e(M);H.textureFormats=sb;var Lc=[];e(M).forEach(function(a){Lc[M[a]]=a});var Fc=[];e(aa).forEach(function(a){Fc[aa[a]]=a});var F=[];e(jc).forEach(function(a){F[jc[a]]=a});var B=[];e(vd).forEach(function(a){B[vd[a]]=a});var ga=[];e(nc).forEach(function(a){ga[nc[a]]=a});var ua=sb.reduce(function(a,b){var c=M[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||m.ext_srgb&&
(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),X=[],fa=[],qa=0,G={},x=H.maxTextureUnits,ba=Array(x).map(function(){return null});pa(Y.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<x;++c){var e=ba[c];if(e){if(0<e.bindCount)continue;e.unit=-1}ba[c]=this;b=c;break}b>=x&&l.raise("insufficient number of texture units");y.profile&&ka.maxTextureUnits<b+1&&(ka.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,
this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&va(this)}});y.profile&&(ka.getTotalTextureSize=function(){var a=0;e(G).forEach(function(b){a+=G[b].stats.size});return a});return{create2D:function(b,c){function e(a,b){var c=d.texInfo;Qa.call(c);var f=da();"number"===typeof a?"number"===typeof b?T(f,a|0,b|0):T(f,a|0,a|0):a?(l.type(a,"object","invalid arguments to regl.texture"),v(c,a),z(f,a)):T(f,1,1);c.genMipmaps&&(f.mipmask=(f.width<<1)-1);d.mipmask=
f.mipmask;Pa(d,f);l.texture2D(c,f,H);d.internalformat=f.internalformat;e.width=f.width;e.height=f.height;ib(d);ha(f,3553);Ua(c,3553);ea();Aa(f);y.profile&&(d.stats.size=p(d.internalformat,d.type,f.width,f.height,c.genMipmaps,!1));e.format=Lc[d.internalformat];e.type=Fc[d.type];e.mag=F[c.magFilter];e.min=B[c.minFilter];e.wrapS=ga[c.wrapS];e.wrapT=ga[c.wrapT];return e}var d=new Y(3553);G[d.id]=d;ka.textureCount++;e(b,c);e.subimage=function(a,b,c,f){l(!!a,"must specify image data");b|=0;c|=0;f|=0;var k=
J();Pa(k,d);k.width=0;k.height=0;V(k,a);k.width=k.width||(d.width>>f)-b;k.height=k.height||(d.height>>f)-c;l(d.type===k.type&&d.format===k.format&&d.internalformat===k.internalformat,"incompatible format for texture.subimage");l(0<=b&&0<=c&&b+k.width<=d.width&&c+k.height<=d.height,"texture.subimage write out of bounds");l(d.mipmask&1<<f,"missing mipmap data");l(k.data||k.element||k.needsCopy,"missing image data");ib(d);sa(k,3553,b,c,f);ea();Ub(k);return e};e.resize=function(b,c){var k=b|0,h=c|0||
k;if(k===d.width&&h===d.height)return e;e.width=d.width=k;e.height=d.height=h;ib(d);for(var l=0;d.mipmask>>l;++l){var g=k>>l,m=h>>l;if(!g||!m)break;a.texImage2D(3553,l,d.format,g,m,0,d.format,d.type,null)}ea();y.profile&&(d.stats.size=p(d.internalformat,d.type,k,h,!1,!1));return e};e._reglType="texture2d";e._texture=d;y.profile&&(e.stats=d.stats);e.destroy=function(){d.decRef()};return e},createCube:function(b,c,e,d,k,h){function g(a,b,c,e,d,f){var k,h=m.texInfo;Qa.call(h);for(k=0;6>k;++k)n[k]=da();
if("number"!==typeof a&&a)if("object"===typeof a)if(b)z(n[0],a),z(n[1],b),z(n[2],c),z(n[3],e),z(n[4],d),z(n[5],f);else if(v(h,a),Z(m,a),"faces"in a)for(a=a.faces,l(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),k=0;6>k;++k)l("object"===typeof a[k]&&!!a[k],"invalid input for cube map face"),Pa(n[k],m),z(n[k],a[k]);else for(k=0;6>k;++k)z(n[k],a);else l.raise("invalid arguments to cube map");else for(a=a|0||1,k=0;6>k;++k)T(n[k],a,a);Pa(m,n[0]);l.optional(function(){H.npotTextureCube||
l(na(m.width)&&na(m.height),"your browser does not support non power or two texture dimensions")});m.mipmask=h.genMipmaps?(n[0].width<<1)-1:n[0].mipmask;l.textureCube(m,h,n,H);m.internalformat=n[0].internalformat;g.width=n[0].width;g.height=n[0].height;ib(m);for(k=0;6>k;++k)ha(n[k],34069+k);Ua(h,34067);ea();y.profile&&(m.stats.size=p(m.internalformat,m.type,g.width,g.height,h.genMipmaps,!0));g.format=Lc[m.internalformat];g.type=Fc[m.type];g.mag=F[h.magFilter];g.min=B[h.minFilter];g.wrapS=ga[h.wrapS];
g.wrapT=ga[h.wrapT];for(k=0;6>k;++k)Aa(n[k]);return g}var m=new Y(34067);G[m.id]=m;ka.cubeCount++;var n=Array(6);g(b,c,e,d,k,h);g.subimage=function(a,b,c,e,d){l(!!b,"must specify image data");l("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;e|=0;d|=0;var f=J();Pa(f,m);f.width=0;f.height=0;V(f,b);f.width=f.width||(m.width>>d)-c;f.height=f.height||(m.height>>d)-e;l(m.type===f.type&&m.format===f.format&&m.internalformat===f.internalformat,"incompatible format for texture.subimage");l(0<=
c&&0<=e&&c+f.width<=m.width&&e+f.height<=m.height,"texture.subimage write out of bounds");l(m.mipmask&1<<d,"missing mipmap data");l(f.data||f.element||f.needsCopy,"missing image data");ib(m);sa(f,34069+a,c,e,d);ea();Ub(f);return g};g.resize=function(b){b|=0;if(b!==m.width){g.width=m.width=b;g.height=m.height=b;ib(m);for(var c=0;6>c;++c)for(var e=0;m.mipmask>>e;++e)a.texImage2D(34069+c,e,m.format,b>>e,b>>e,0,m.format,m.type,null);ea();y.profile&&(m.stats.size=p(m.internalformat,m.type,g.width,g.height,
!1,!0));return g}};g._reglType="textureCube";g._texture=m;y.profile&&(g.stats=m.stats);g.destroy=function(){m.decRef()};return g},clear:function(){for(var b=0;b<x;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ba[b]=null;W(G).forEach(va);ka.cubeCount=0;ka.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<x;++b){var c=ba[b];c&&(c.bindCount=0,c.unit=-1,ba[b]=null)}W(G).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=
0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var e=0;6>e;++e)a.texImage2D(34069+e,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);Ua(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<x;++b){var c=ba[b];c&&(c.bindCount=0,c.unit=-1,ba[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,
"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(u,y,v){y.exports=function(a,b){function g(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function h(a,b,c){var d=p.pop()||new g;d.startQueryIndex=a;d.endQueryIndex=b;d.sum=0;d.stats=c;e.push(d)}if(!b.ext_disjoint_timer_query)return null;
var d=[],c=[],p=[],e=[],l=[],pa=[];return{beginQuery:function(a){var e=d.pop()||b.ext_disjoint_timer_query.createQueryEXT();b.ext_disjoint_timer_query.beginQueryEXT(35007,e);c.push(e);h(c.length-1,c.length,a)},endQuery:function(){b.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:h,update:function(){var a,h;a=c.length;if(0!==a){pa.length=Math.max(pa.length,a+1);l.length=Math.max(l.length,a+1);l[0]=0;var g=pa[0]=0;for(h=a=0;h<c.length;++h){var r=c[h];b.ext_disjoint_timer_query.getQueryObjectEXT(r,
34919)?(g+=b.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),d.push(r)):c[a++]=r;l[h+1]=g;pa[h+1]=a}c.length=a;for(h=a=0;h<e.length;++h){var g=e[h],C=g.startQueryIndex,r=g.endQueryIndex;g.sum+=l[r]-l[C];C=pa[C];r=pa[r];r===C?(g.stats.gpuTime+=g.sum/1E6,p.push(g)):(g.startQueryIndex=C,g.endQueryIndex=r,e[a++]=g)}e.length=a}},getNumPendingQueries:function(){return c.length},clear:function(){d.push.apply(d,c);for(var a=0;a<d.length;a++)b.ext_disjoint_timer_query.deleteQueryEXT(d[a]);c.length=0;d.length=
0},restore:function(){c.length=0;d.length=0}}}},{}],21:[function(u,y,v){function a(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function b(a){a=Error("(regl) "+a);console.error(a);throw a;}function g(a,c){a||b(c)}function h(a){return a?": "+a:""}function d(a,b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===
typeof a;case "symbol":return"symbol"===typeof a}}function c(a,c,e){0>c.indexOf(a)&&b("invalid value"+h(e)+". must be one of: "+c)}function p(a,b){for(a+="";a.length<b;)a=" "+a;return a}function e(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function l(a,b){this.number=a;this.line=b;this.errors=[]}function pa(a,b,c){this.file=a;this.line=b;this.message=c}function W(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?
a[1]:"unknown"}function n(){var a=Error(),a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function E(b,c){var d=b.split("\n"),h=1,g=0,n={unknown:new e,0:new e};n.unknown.name=n[0].name=c||W();n.unknown.lines.push(new l(0,""));for(var p=0;p<d.length;++p){var r=d[p],f=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(r);if(f)switch(f[1]){case "line":if(f=/(\d+)(\s+\d+)?/.exec(f[2]))h=f[1]|0,f[2]&&(g=f[2]|0,g in n||(n[g]=
new e));break;case "define":if(f=/SHADER_NAME(_B64)?\s+(.*)$/.exec(f[2]))n[g].name=f[1]?a(f[2]):f[2]}n[g].lines.push(new l(h++,r))}I(n).forEach(function(a){var b=n[a];b.lines.forEach(function(a){b.index[a.number]=a})});return n}function r(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);c?b.push(new pa(c[1]|0,c[2]|0,c[3].trim())):0<a.length&&b.push(new pa("unknown",0,a))}});return b}function C(a,b){b.forEach(function(b){var c=a[b.file];
if(c){var e=c.index[b.line];if(e){e.errors.push(b);c.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(b)})}function S(a){a._commandRef=W()}function D(a,c){var e=n();b(a+" in command "+(c||W())+("unknown"===e?"":" called from "+e))}function na(a,b,c,e){d(a,b)||D("invalid parameter type"+h(c)+". expected "+b+", got "+typeof a,e||W())}function oa(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:w[a]*b}var I=u("./sorted-object-keys"),xa=u("./is-typed-array");u=u("./extend");
var t="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),w={};w[5120]=w[5121]=1;w[5122]=w[5123]=w[36193]=w[33635]=w[32819]=w[32820]=2;w[5124]=w[5125]=w[5126]=w[34042]=4;y.exports=u(g,{optional:function(a){a()},raise:b,commandRaise:D,command:function(a,b,c){a||D(b,c||W())},parameter:function(a,c,e){a in c||b("unknown parameter ("+a+")"+h(e)+". possible values: "+I(c).join())},commandParameter:function(a,b,c,e){a in b||D("unknown parameter ("+a+")"+h(c)+
". possible values: "+I(b).join(),e||W())},constructor:function(a){I(a).forEach(function(a){0>t.indexOf(a)&&b('invalid regl constructor argument "'+a+'". must be one of '+t)})},type:function(a,c,e){d(a,c)||b("invalid parameter type"+h(e)+". expected "+c+", got "+typeof a)},commandType:na,isTypedArray:function(a,c){xa(a)||b("invalid parameter type"+h(c)+". must be a typed array")},nni:function(a,c){0<=a&&(a|0)===a||b("invalid parameter type, ("+a+")"+h(c)+". must be a nonnegative integer")},oneOf:c,
shaderError:function(a,b,c,e,d){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=e===a.FRAGMENT_SHADER?"fragment":"vertex";na(c,"string",a+" shader source must be a string",d);var h=E(c,d);c=r(b);C(h,c);I(h).forEach(function(a){function b(a,c){e.push(a);d.push(c||"")}var c=h[a];if(c.hasErrors){var e=[""],d=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(p(a.number,4)+"|  ","background-color:yellow; font-weight:bold");
b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var c=0;a.errors.forEach(function(e){e=e.message;var d=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);if(d){var f=d[1];e=d[2];switch(f){case "assign":f="="}c=Math.max(a.line.indexOf(f,c),0)}else c=0;b(p("| ",6));b(p("^^^",c+3)+"\n","font-weight:bold");b(p("| ",6));b(e+"\n","font-weight:bold")});b(p("| ",6)+"\n")}else b(p(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(e.join("")):(d[0]=
e.join("%c"),console.log.apply(console,d))}});g.raise("Error compiling "+a+" shader, "+h[0].name)}},linkError:function(a,b,c,e,d){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),c=E(c,d),e='Error linking program with vertex shader, "'+E(e,d)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(e+"\n"+a),g.raise(e))},callSite:n,saveCommandRef:S,saveDrawInfo:function(a,
b,c,e){function d(a){return a?e.id(a):0}function h(a,b){I(b).forEach(function(b){a[e.id(b)]=!0})}S(a);a._fragId=d(a["static"].frag);a._vertId=d(a["static"].vert);var g=a._uniformSet={};h(g,b["static"]);h(g,b.dynamic);b=a._attributeSet={};h(b,c["static"]);h(b,c.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,b,e){a.texture?c(a.texture._texture.internalformat,b,"unsupported texture format for attachment"):
c(a.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},guessCommand:W,texture2D:function(a,b,c){var e=b.width,d=b.height,h=b.channels;g(0<e&&e<=c.maxTextureSize&&0<d&&d<=c.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||g(!(e&e-1)&&!!e&&!(d&d-1)&&!!d,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==e&&1!==d&&g(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,
"min filter requires mipmap"):(g(!(e&e-1)&&!!e&&!(d&d-1)&&!!d,"texture must be a square power of 2 to support mipmapping"),g(b.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&g(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),g(!a.genMipmaps,"mipmap generation not supported with float textures"));var l=b.images;for(c=0;16>c;++c)if(l[c]){var n=e>>c,f=d>>c;g(b.mipmask&1<<
c,"missing mipmap data");var m=l[c];g(m.width===n&&m.height===f,"invalid shape for mip images");g(m.format===b.format&&m.internalformat===b.internalformat&&m.type===b.type,"incompatible type for mip image");!m.compressed&&m.data&&(n=Math.ceil(oa(m.type,h)*n/m.unpackAlignment)*m.unpackAlignment,g(m.data.byteLength===n*f,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||g(0===(b.mipmask&1<<c),"extra mipmap data");b.compressed&&g(!a.genMipmaps,"mipmap generation for compressed images not supported")},
textureCube:function(a,b,c,e){var d=a.width,h=a.height,l=a.channels;g(0<d&&d<=e.maxTextureSize&&0<h&&h<=e.maxTextureSize,"invalid texture shape");g(d===h,"cube map must be square");g(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(e=0;e<c.length;++e){var n=c[e];g(n.width===d&&n.height===h,"inconsistent cube map face shape");b.genMipmaps&&(g(!n.compressed,"can not generate mipmap for compressed textures"),g(1===n.mipmask,"can not specify mipmaps and generate mipmaps"));
for(var f=n.images,m=0;16>m;++m){var p=f[m];if(p){var r=d>>m,t=h>>m;g(n.mipmask&1<<m,"missing mipmap data");g(p.width===r&&p.height===t,"invalid shape for mip images");g(p.format===a.format&&p.internalformat===a.internalformat&&p.type===a.type,"incompatible type for mip image");p.compressed||p.data&&g(p.data.byteLength===r*t*Math.max(oa(p.type,l),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],
22:[function(u,y,v){y.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(u,y,v){function a(a){return Array.prototype.slice.call(a)}var b=u("./extend"),g=u("./compiled-fns");y.exports=function(){function h(){var c=[],e=[];return b(function(){c.push.apply(c,a(arguments))},{def:function(){var b="v"+p;p++;e.push(b);0<arguments.length&&(c.push(b,"="),c.push.apply(c,a(arguments)),c.push(";"));return b},toString:function(){return a([0<
e.length?"var "+e.join(",")+";":"",a(c).join("")]).join("")}})}function d(){function c(a,b){d(a,b,"=",e.def(a,b),";")}var e=h(),d=h(),g=e.toString,l=d.toString;return b(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:d,save:c,set:function(a,b,d){c(a,b);e(a,b,"=",d,";")},toString:function(){return g()+l()}})}var c=0,p=0,e={},l={};return{global:h(),link:function(a){var b="$"+c,d=!1;"object"===typeof a&&a.name&&(b=a.name.replace(/ /g,"_"),d=!0);if(b in e)return b;e[b]=a;d||c++;return b},
block:h,proc:function(c,e){function h(){var a="a"+g.length;g.push(a);return a}var g=[];e=e||0;for(var p=0;p<e;++p)h();var p=d(),C=p.toString;return l[c]=b(p,{arg:h,toString:function(){return a(["function(",g.join(),"){",C(),"}"]).join("")}})},scope:d,cond:function(){var c=a(arguments).join(""),e=d(),h=d(),g=e.toString,l=h.toString;return b(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){h.apply(h,a(arguments));return this},toString:function(){var b=l();b&&(b="else{"+b+"}");
return a(["if(",c,"){",g(),"}",b]).join("")}})},compile:function(){var a=[],b=[];Object.keys(e).sort(function(a,b){var c="$"===a.charAt(0),e="$"===b.charAt(0);return c||e?c&&e?+a.slice(1)<+b.slice(1)?-1:1:c&&!e?-1:1:a.localeCompare(b)}).forEach(function(c){var d=e[c];a.push(c);b.push(d)});for(var c=0,d=a.length-1;-1<d;d--)if("$"===a[d].charAt(0)){c=d;break}c=a.slice(c).join();d=g[c];if(!d)throw Error("missing precompiled function with key: "+c);return d.apply(null,b)}}}},{"./compiled-fns":24,"./extend":25}],
24:[function(u,y,v){y.exports={$0:function(a){var b,g,h,d,c,p,e,l,pa,W,n,E,r,C,S,D,na,u,I,y,t,w,k,ca,L,P,A,ka,H,R;b=a.attributes;g=a.current;h=a.framebuffer;d=a.gl;c=a.next;p=a.vao;e=c.blend_color;l=g.blend_color;pa=c.blend_equation;W=g.blend_equation;n=c.blend_func;E=g.blend_func;r=c.colorMask;C=g.colorMask;S=c.depth_range;D=g.depth_range;na=c.polygonOffset_offset;u=g.polygonOffset_offset;I=c.sample_coverage;y=g.sample_coverage;t=c.scissor_box;w=g.scissor_box;k=c.stencil_func;ca=g.stencil_func;L=
c.stencil_opBack;P=g.stencil_opBack;A=c.stencil_opFront;ka=g.stencil_opFront;H=c.viewport;R=g.viewport;return{poll:function(){var a,b,p,ja,ma,gd,v,la,Pa,Z,K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa;g.dirty=!1;b=c.blend_enable;p=c.cull_enable;ja=c.depth_enable;ma=c.dither;gd=c.polygonOffset_enable;v=c.sample_alpha;la=c.sample_enable;Pa=c.scissor_enable;Z=c.stencil_enable;K=c.cull_face;N=g.cull_face;V=c.depth_func;sa=g.depth_func;J=c.depth_mask;Ub=g.depth_mask;Za=c.frontFace;T=g.frontFace;z=c.lineWidth;ha=g.lineWidth;
da=c.stencil_mask;Aa=g.stencil_mask;a=h.next;a!==h.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null),h.cur=a);b!==g.blend_enable&&(b?d.enable(3042):d.disable(3042),g.blend_enable=b);p!==g.cull_enable&&(p?d.enable(2884):d.disable(2884),g.cull_enable=p);ja!==g.depth_enable&&(ja?d.enable(2929):d.disable(2929),g.depth_enable=ja);ma!==g.dither&&(ma?d.enable(3024):d.disable(3024),g.dither=ma);gd!==g.polygonOffset_enable&&(gd?d.enable(32823):d.disable(32823),g.polygonOffset_enable=
gd);v!==g.sample_alpha&&(v?d.enable(32926):d.disable(32926),g.sample_alpha=v);la!==g.sample_enable&&(la?d.enable(32928):d.disable(32928),g.sample_enable=la);Pa!==g.scissor_enable&&(Pa?d.enable(3089):d.disable(3089),g.scissor_enable=Pa);Z!==g.stencil_enable&&(Z?d.enable(2960):d.disable(2960),g.stencil_enable=Z);if(e[0]!==l[0]||e[1]!==l[1]||e[2]!==l[2]||e[3]!==l[3])d.blendColor(e[0],e[1],e[2],e[3]),l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=e[3];if(pa[0]!==W[0]||pa[1]!==W[1])d.blendEquationSeparate(pa[0],pa[1]),
W[0]=pa[0],W[1]=pa[1];if(n[0]!==E[0]||n[1]!==E[1]||n[2]!==E[2]||n[3]!==E[3])d.blendFuncSeparate(n[0],n[1],n[2],n[3]),E[0]=n[0],E[1]=n[1],E[2]=n[2],E[3]=n[3];if(r[0]!==C[0]||r[1]!==C[1]||r[2]!==C[2]||r[3]!==C[3])d.colorMask(r[0],r[1],r[2],r[3]),C[0]=r[0],C[1]=r[1],C[2]=r[2],C[3]=r[3];K!==N&&(d.cullFace(K),g.cull_face=K);V!==sa&&(d.depthFunc(V),g.depth_func=V);J!==Ub&&(d.depthMask(J),g.depth_mask=J);if(S[0]!==D[0]||S[1]!==D[1])d.depthRange(S[0],S[1]),D[0]=S[0],D[1]=S[1];Za!==T&&(d.frontFace(Za),g.frontFace=
Za);z!==ha&&(d.lineWidth(z),g.lineWidth=z);if(na[0]!==u[0]||na[1]!==u[1])d.polygonOffset(na[0],na[1]),u[0]=na[0],u[1]=na[1];if(I[0]!==y[0]||I[1]!==y[1])d.sampleCoverage(I[0],I[1]),y[0]=I[0],y[1]=I[1];if(t[0]!==w[0]||t[1]!==w[1]||t[2]!==w[2]||t[3]!==w[3])d.scissor(t[0],t[1],t[2],t[3]),w[0]=t[0],w[1]=t[1],w[2]=t[2],w[3]=t[3];if(k[0]!==ca[0]||k[1]!==ca[1]||k[2]!==ca[2])d.stencilFunc(k[0],k[1],k[2]),ca[0]=k[0],ca[1]=k[1],ca[2]=k[2];da!==Aa&&(d.stencilMask(da),g.stencil_mask=da);if(L[0]!==P[0]||L[1]!==
P[1]||L[2]!==P[2]||L[3]!==P[3])d.stencilOpSeparate(L[0],L[1],L[2],L[3]),P[0]=L[0],P[1]=L[1],P[2]=L[2],P[3]=L[3];if(A[0]!==ka[0]||A[1]!==ka[1]||A[2]!==ka[2]||A[3]!==ka[3])d.stencilOpSeparate(A[0],A[1],A[2],A[3]),ka[0]=A[0],ka[1]=A[1],ka[2]=A[2],ka[3]=A[3];if(H[0]!==R[0]||H[1]!==R[1]||H[2]!==R[2]||H[3]!==R[3])d.viewport(H[0],H[1],H[2],H[3]),R[0]=H[0],R[1]=H[1],R[2]=H[2],R[3]=H[3]},refresh:function(){var a,m,Q,ja,ma,gd,v,la,Pa,Z,K,N,V,sa,J,Ub;g.dirty=!1;m=c.blend_enable;Q=c.cull_enable;ja=c.depth_enable;
ma=c.dither;gd=c.polygonOffset_enable;v=c.sample_alpha;la=c.sample_enable;Pa=c.scissor_enable;Z=c.stencil_enable;K=c.cull_face;N=c.depth_func;V=c.depth_mask;sa=c.frontFace;J=c.lineWidth;Ub=c.stencil_mask;(a=h.next)?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null);h.cur=a;a=b[0];a.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,a.x,a.y,
a.z,a.w),a.buffer=null);a=b[1];a.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=b[2];a.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=b[3];
a.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=b[4];a.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=b[5];a.buffer?(d.enableVertexAttribArray(5),
d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=b[6];a.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=b[7];a.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,a.buffer.buffer),
d.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=b[8];a.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=b[9];a.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(9,a.size,
a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=b[10];a.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=b[11];a.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,
a.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=b[12];a.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=b[13];a.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(13),
d.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=b[14];a.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=b[15];a.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,a.x,
a.y,a.z,a.w),a.buffer=null);p.currentVAO=null;p.setVAO(p.targetVAO);m?d.enable(3042):d.disable(3042);g.blend_enable=m;Q?d.enable(2884):d.disable(2884);g.cull_enable=Q;ja?d.enable(2929):d.disable(2929);g.depth_enable=ja;ma?d.enable(3024):d.disable(3024);g.dither=ma;gd?d.enable(32823):d.disable(32823);g.polygonOffset_enable=gd;v?d.enable(32926):d.disable(32926);g.sample_alpha=v;la?d.enable(32928):d.disable(32928);g.sample_enable=la;Pa?d.enable(3089):d.disable(3089);g.scissor_enable=Pa;Z?d.enable(2960):
d.disable(2960);g.stencil_enable=Z;d.blendColor(e[0],e[1],e[2],e[3]);l[0]=e[0];l[1]=e[1];l[2]=e[2];l[3]=e[3];d.blendEquationSeparate(pa[0],pa[1]);W[0]=pa[0];W[1]=pa[1];d.blendFuncSeparate(n[0],n[1],n[2],n[3]);E[0]=n[0];E[1]=n[1];E[2]=n[2];E[3]=n[3];d.colorMask(r[0],r[1],r[2],r[3]);C[0]=r[0];C[1]=r[1];C[2]=r[2];C[3]=r[3];d.cullFace(K);g.cull_face=K;d.depthFunc(N);g.depth_func=N;d.depthMask(V);g.depth_mask=V;d.depthRange(S[0],S[1]);D[0]=S[0];D[1]=S[1];d.frontFace(sa);g.frontFace=sa;d.lineWidth(J);g.lineWidth=
J;d.polygonOffset(na[0],na[1]);u[0]=na[0];u[1]=na[1];d.sampleCoverage(I[0],I[1]);y[0]=I[0];y[1]=I[1];d.scissor(t[0],t[1],t[2],t[3]);w[0]=t[0];w[1]=t[1];w[2]=t[2];w[3]=t[3];d.stencilFunc(k[0],k[1],k[2]);ca[0]=k[0];ca[1]=k[1];ca[2]=k[2];d.stencilMask(Ub);g.stencil_mask=Ub;d.stencilOpSeparate(L[0],L[1],L[2],L[3]);P[0]=L[0];P[1]=L[1];P[2]=L[2];P[3]=L[3];d.stencilOpSeparate(A[0],A[1],A[2],A[3]);ka[0]=A[0];ka[1]=A[1];ka[2]=A[2];ka[3]=A[3];d.viewport(H[0],H[1],H[2],H[3]);R[0]=H[0];R[1]=H[1];R[2]=H[2];R[3]=
H[3]}}},$3:function(a,b,g,h){var d,c,p,e,l,pa,W,n,E,r,C,S,D,u,oa,I,y,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,v;d=a.context;c=a.current;p=a.framebuffer;e=a.gl;l=a.next;pa=a.shader;W=a.vao;n=l.blend_color;E=c.blend_color;r=l.blend_equation;C=c.blend_equation;S=l.blend_func;D=c.blend_func;u=l.colorMask;oa=c.colorMask;I=l.depth_range;y=c.depth_range;t=l.polygonOffset_offset;w=c.polygonOffset_offset;k=l.sample_coverage;ca=c.sample_coverage;L=l.scissor_box;P=c.scissor_box;A=l.stencil_func;ka=c.stencil_func;H=
l.stencil_opBack;R=c.stencil_opBack;f=l.stencil_opFront;m=c.stencil_opFront;Q=l.viewport;ja=c.viewport;ma={};v={};return{batch:function(a,d){var g,Z,K,N,V;g=p.next;g!==p.cur&&(g?e.bindFramebuffer(36160,g.framebuffer):e.bindFramebuffer(36160,null),p.cur=g);if(c.dirty){g=l.dither;g!==c.dither&&(g?e.enable(3024):e.disable(3024),c.dither=g);g=l.blend_enable;g!==c.blend_enable&&(g?e.enable(3042):e.disable(3042),c.blend_enable=g);g=n[0];K=n[1];N=n[2];V=n[3];if(g!==E[0]||K!==E[1]||N!==E[2]||V!==E[3])e.blendColor(g,
K,N,V),E[0]=g,E[1]=K,E[2]=N,E[3]=V;g=r[0];K=r[1];if(g!==C[0]||K!==C[1])e.blendEquationSeparate(g,K),C[0]=g,C[1]=K;g=S[0];K=S[1];N=S[2];V=S[3];if(g!==D[0]||K!==D[1]||N!==D[2]||V!==D[3])e.blendFuncSeparate(g,K,N,V),D[0]=g,D[1]=K,D[2]=N,D[3]=V;g=l.depth_enable;g!==c.depth_enable&&(g?e.enable(2929):e.disable(2929),c.depth_enable=g);g=l.depth_func;g!==c.depth_func&&(e.depthFunc(g),c.depth_func=g);g=I[0];K=I[1];if(g!==y[0]||K!==y[1])e.depthRange(g,K),y[0]=g,y[1]=K;g=l.depth_mask;g!==c.depth_mask&&(e.depthMask(g),
c.depth_mask=g);g=u[0];K=u[1];N=u[2];V=u[3];if(g!==oa[0]||K!==oa[1]||N!==oa[2]||V!==oa[3])e.colorMask(g,K,N,V),oa[0]=g,oa[1]=K,oa[2]=N,oa[3]=V;g=l.cull_enable;g!==c.cull_enable&&(g?e.enable(2884):e.disable(2884),c.cull_enable=g);g=l.cull_face;g!==c.cull_face&&(e.cullFace(g),c.cull_face=g);g=l.frontFace;g!==c.frontFace&&(e.frontFace(g),c.frontFace=g);g=l.lineWidth;g!==c.lineWidth&&(e.lineWidth(g),c.lineWidth=g);g=l.polygonOffset_enable;g!==c.polygonOffset_enable&&(g?e.enable(32823):e.disable(32823),
c.polygonOffset_enable=g);g=t[0];K=t[1];if(g!==w[0]||K!==w[1])e.polygonOffset(g,K),w[0]=g,w[1]=K;g=l.sample_alpha;g!==c.sample_alpha&&(g?e.enable(32926):e.disable(32926),c.sample_alpha=g);g=l.sample_enable;g!==c.sample_enable&&(g?e.enable(32928):e.disable(32928),c.sample_enable=g);g=k[0];K=k[1];if(g!==ca[0]||K!==ca[1])e.sampleCoverage(g,K),ca[0]=g,ca[1]=K;g=l.stencil_enable;g!==c.stencil_enable&&(g?e.enable(2960):e.disable(2960),c.stencil_enable=g);g=l.stencil_mask;g!==c.stencil_mask&&(e.stencilMask(g),
c.stencil_mask=g);g=A[0];K=A[1];N=A[2];if(g!==ka[0]||K!==ka[1]||N!==ka[2])e.stencilFunc(g,K,N),ka[0]=g,ka[1]=K,ka[2]=N;g=f[0];K=f[1];N=f[2];V=f[3];if(g!==m[0]||K!==m[1]||N!==m[2]||V!==m[3])e.stencilOpSeparate(g,K,N,V),m[0]=g,m[1]=K,m[2]=N,m[3]=V;g=H[0];K=H[1];N=H[2];V=H[3];if(g!==R[0]||K!==R[1]||N!==R[2]||V!==R[3])e.stencilOpSeparate(g,K,N,V),R[0]=g,R[1]=K,R[2]=N,R[3]=V;g=l.scissor_enable;g!==c.scissor_enable&&(g?e.enable(3089):e.disable(3089),c.scissor_enable=g);g=L[0];K=L[1];N=L[2];V=L[3];if(g!==
P[0]||K!==P[1]||N!==P[2]||V!==P[3])e.scissor(g,K,N,V),P[0]=g,P[1]=K,P[2]=N,P[3]=V;g=Q[0];K=Q[1];N=Q[2];V=Q[3];if(g!==ja[0]||K!==ja[1]||N!==ja[2]||V!==ja[3])e.viewport(g,K,N,V),ja[0]=g,ja[1]=K,ja[2]=N,ja[3]=V;c.dirty=!1}if(g=c.profile)Z=performance.now(),b.count+=d;K=pa.program(pa.vert,pa.frag);e.useProgram(K.program);W.setVAO(null);N=K.id;(V=v[N])||(V=v[N]=h(K));V.call(this,a,d);W.setVAO(null);g&&(b.cpuTime+=performance.now()-Z)},draw:function(a){var d,h,Z,K,N;d=p.next;d!==p.cur&&(d?e.bindFramebuffer(36160,
d.framebuffer):e.bindFramebuffer(36160,null),p.cur=d);if(c.dirty){d=l.dither;d!==c.dither&&(d?e.enable(3024):e.disable(3024),c.dither=d);d=l.blend_enable;d!==c.blend_enable&&(d?e.enable(3042):e.disable(3042),c.blend_enable=d);d=n[0];Z=n[1];K=n[2];N=n[3];if(d!==E[0]||Z!==E[1]||K!==E[2]||N!==E[3])e.blendColor(d,Z,K,N),E[0]=d,E[1]=Z,E[2]=K,E[3]=N;d=r[0];Z=r[1];if(d!==C[0]||Z!==C[1])e.blendEquationSeparate(d,Z),C[0]=d,C[1]=Z;d=S[0];Z=S[1];K=S[2];N=S[3];if(d!==D[0]||Z!==D[1]||K!==D[2]||N!==D[3])e.blendFuncSeparate(d,
Z,K,N),D[0]=d,D[1]=Z,D[2]=K,D[3]=N;d=l.depth_enable;d!==c.depth_enable&&(d?e.enable(2929):e.disable(2929),c.depth_enable=d);d=l.depth_func;d!==c.depth_func&&(e.depthFunc(d),c.depth_func=d);d=I[0];Z=I[1];if(d!==y[0]||Z!==y[1])e.depthRange(d,Z),y[0]=d,y[1]=Z;d=l.depth_mask;d!==c.depth_mask&&(e.depthMask(d),c.depth_mask=d);d=u[0];Z=u[1];K=u[2];N=u[3];if(d!==oa[0]||Z!==oa[1]||K!==oa[2]||N!==oa[3])e.colorMask(d,Z,K,N),oa[0]=d,oa[1]=Z,oa[2]=K,oa[3]=N;d=l.cull_enable;d!==c.cull_enable&&(d?e.enable(2884):
e.disable(2884),c.cull_enable=d);d=l.cull_face;d!==c.cull_face&&(e.cullFace(d),c.cull_face=d);d=l.frontFace;d!==c.frontFace&&(e.frontFace(d),c.frontFace=d);d=l.lineWidth;d!==c.lineWidth&&(e.lineWidth(d),c.lineWidth=d);d=l.polygonOffset_enable;d!==c.polygonOffset_enable&&(d?e.enable(32823):e.disable(32823),c.polygonOffset_enable=d);d=t[0];Z=t[1];if(d!==w[0]||Z!==w[1])e.polygonOffset(d,Z),w[0]=d,w[1]=Z;d=l.sample_alpha;d!==c.sample_alpha&&(d?e.enable(32926):e.disable(32926),c.sample_alpha=d);d=l.sample_enable;
d!==c.sample_enable&&(d?e.enable(32928):e.disable(32928),c.sample_enable=d);d=k[0];Z=k[1];if(d!==ca[0]||Z!==ca[1])e.sampleCoverage(d,Z),ca[0]=d,ca[1]=Z;d=l.stencil_enable;d!==c.stencil_enable&&(d?e.enable(2960):e.disable(2960),c.stencil_enable=d);d=l.stencil_mask;d!==c.stencil_mask&&(e.stencilMask(d),c.stencil_mask=d);d=A[0];Z=A[1];K=A[2];if(d!==ka[0]||Z!==ka[1]||K!==ka[2])e.stencilFunc(d,Z,K),ka[0]=d,ka[1]=Z,ka[2]=K;d=f[0];Z=f[1];K=f[2];N=f[3];if(d!==m[0]||Z!==m[1]||K!==m[2]||N!==m[3])e.stencilOpSeparate(d,
Z,K,N),m[0]=d,m[1]=Z,m[2]=K,m[3]=N;d=H[0];Z=H[1];K=H[2];N=H[3];if(d!==R[0]||Z!==R[1]||K!==R[2]||N!==R[3])e.stencilOpSeparate(d,Z,K,N),R[0]=d,R[1]=Z,R[2]=K,R[3]=N;d=l.scissor_enable;d!==c.scissor_enable&&(d?e.enable(3089):e.disable(3089),c.scissor_enable=d);d=L[0];Z=L[1];K=L[2];N=L[3];if(d!==P[0]||Z!==P[1]||K!==P[2]||N!==P[3])e.scissor(d,Z,K,N),P[0]=d,P[1]=Z,P[2]=K,P[3]=N;d=Q[0];Z=Q[1];K=Q[2];N=Q[3];if(d!==ja[0]||Z!==ja[1]||K!==ja[2]||N!==ja[3])e.viewport(d,Z,K,N),ja[0]=d,ja[1]=Z,ja[2]=K,ja[3]=N;c.dirty=
!1}if(d=c.profile)h=performance.now(),b.count++;Z=pa.program(pa.vert,pa.frag);e.useProgram(Z.program);W.setVAO(null);K=Z.id;(N=ma[K])||(N=ma[K]=g(Z));N.call(this,a);W.setVAO(null);d&&(b.cpuTime+=performance.now()-h)},scope:function(a,e,g){var h,k;if(h=c.profile)k=performance.now(),b.count++;e(d,a,g);h&&(b.cpuTime+=performance.now()-k)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
b,g,h,d,c,p,e,l,pa,W,n,E,r,C,S,D,u,oa,I,y,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,v,qc,la,Pa,Z,K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va,$b,nc,jc,vd,wc,aa,M,ia,Fa,sb,Lc,Fc,F,B,ga,ua,X,fa,qa){var G,x,ba,O,Ea,Ha,q,rc,Da,U,Db,xb,Ze,Yd,ce,Vd,Jd,se,xd,fe,te,Kd,Sd,Zd,ie,$e,mf,We,Ad,ve,de,Td,le,Ie,td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb;G=a.attributes;x=a.context;ba=a.current;O=a.draw;Ea=a.elements;Ha=a.framebuffer;q=a.gl;rc=a.next;Da=a.shader;
U=a.uniforms;Db=a.vao;xb=rc.blend_color;Ze=ba.blend_color;Yd=rc.blend_equation;ce=ba.blend_equation;Vd=rc.blend_func;Jd=ba.blend_func;se=rc.colorMask;xd=ba.colorMask;fe=rc.depth_range;te=ba.depth_range;Kd=rc.polygonOffset_offset;Sd=ba.polygonOffset_offset;Zd=rc.sample_coverage;ie=ba.sample_coverage;$e=rc.scissor_box;mf=ba.scissor_box;We=rc.stencil_func;Ad=ba.stencil_func;ve=rc.stencil_opBack;de=ba.stencil_opBack;Td=rc.stencil_opFront;le=ba.stencil_opFront;Ie=rc.viewport;td=ba.viewport;nd={};wd={};
sd=new Float32Array(16);cd=new Float32Array(16);Vc=new Float32Array(16);yd=new Float32Array(16);Rc=new Float32Array(16);Mc=new Float32Array(16);oc=new Float32Array(16);$a=new Float32Array(16);hc=new Float32Array(16);Bb=new Float32Array(16);mc=new Float32Array(16);Sa=new Float32Array(16);Jc=new Float32Array(16);Xb=new Float32Array(16);Zc=new Float32Array(16);Qd=new Float32Array(16);od=new Float32Array(16);sc=new Float32Array(16);Vb=new Float32Array(16);Gc=new Float32Array(16);Sc=new Float32Array(16);
Jb=new Float32Array(16);zc=new Float32Array(16);Wa=new Float32Array(16);ra=new Float32Array(16);pd=new Float32Array(16);Yb=new Float32Array(16);ab=new Float32Array(16);Sb=new Float32Array(16);cb=new Float32Array(16);Ac=new Float32Array(16);Nb=new Float32Array(16);return{batch:function(a,b){var g,k,f,m;g=Ha.next;g!==Ha.cur&&(g?q.bindFramebuffer(36160,g.framebuffer):q.bindFramebuffer(36160,null),Ha.cur=g);if(ba.dirty){var t,w,A,U,H,I,P,L,Q,Da,y,ca,R,ta,$a,wa,Sa,xb,Ba,Bb,Ka,ka,Xb,Ra,ja;t=se[0];w=se[1];
A=se[2];U=se[3];if(t!==xd[0]||w!==xd[1]||A!==xd[2]||U!==xd[3])q.colorMask(t,w,A,U),xd[0]=t,xd[1]=w,xd[2]=A,xd[3]=U;H=rc.frontFace;H!==ba.frontFace&&(q.frontFace(H),ba.frontFace=H);I=rc.polygonOffset_enable;I!==ba.polygonOffset_enable&&(I?q.enable(32823):q.disable(32823),ba.polygonOffset_enable=I);P=Kd[0];L=Kd[1];if(P!==Sd[0]||L!==Sd[1])q.polygonOffset(P,L),Sd[0]=P,Sd[1]=L;Q=rc.sample_alpha;Q!==ba.sample_alpha&&(Q?q.enable(32926):q.disable(32926),ba.sample_alpha=Q);Da=rc.sample_enable;Da!==ba.sample_enable&&
(Da?q.enable(32928):q.disable(32928),ba.sample_enable=Da);y=Zd[0];ca=Zd[1];if(y!==ie[0]||ca!==ie[1])q.sampleCoverage(y,ca),ie[0]=y,ie[1]=ca;R=rc.stencil_enable;R!==ba.stencil_enable&&(R?q.enable(2960):q.disable(2960),ba.stencil_enable=R);ta=rc.stencil_mask;ta!==ba.stencil_mask&&(q.stencilMask(ta),ba.stencil_mask=ta);$a=We[0];wa=We[1];Sa=We[2];if($a!==Ad[0]||wa!==Ad[1]||Sa!==Ad[2])q.stencilFunc($a,wa,Sa),Ad[0]=$a,Ad[1]=wa,Ad[2]=Sa;xb=Td[0];Ba=Td[1];Bb=Td[2];Ka=Td[3];if(xb!==le[0]||Ba!==le[1]||Bb!==
le[2]||Ka!==le[3])q.stencilOpSeparate(xb,Ba,Bb,Ka),le[0]=xb,le[1]=Ba,le[2]=Bb,le[3]=Ka;ka=ve[0];Xb=ve[1];Ra=ve[2];ja=ve[3];if(ka!==de[0]||Xb!==de[1]||Ra!==de[2]||ja!==de[3])q.stencilOpSeparate(ka,Xb,Ra,ja),de[0]=ka,de[1]=Xb,de[2]=Ra,de[3]=ja}q.blendColor(0,0,0,0);Ze[0]=0;Ze[1]=0;Ze[2]=0;Ze[3]=0;q.disable(3042);ba.blend_enable=!1;q.blendEquationSeparate(32774,32774);ce[0]=32774;ce[1]=32774;q.blendFuncSeparate(770,771,1,1);Jd[0]=770;Jd[1]=771;Jd[2]=1;Jd[3]=1;q.enable(2884);ba.cull_enable=!0;q.cullFace(1029);
ba.cull_face=1029;q.enable(2929);ba.depth_enable=!0;q.depthFunc(513);ba.depth_func=513;q.depthMask(!0);ba.depth_mask=!0;q.depthRange(0,1);te[0]=0;te[1]=1;q.disable(3024);ba.dither=!1;q.lineWidth(2);ba.lineWidth=2;q.enable(3089);ba.scissor_enable=!0;k=ba.profile;ba.profile=!1;q.useProgram(qc.program);var Mc,Rc,oc,ya,v,La,$e,fb,hb,za,Vc,Ga,pb,qb,Xa,Ya,Jc,hc,Zc,Va,Hb,cd,Ia,mc,Oa,Ca,lb,ub,Ab,rb,sd,vb,yd;Db.setVAO(null);Mc=$b.location;Rc=G[Mc];Rc.buffer||q.enableVertexAttribArray(Mc);if(Rc.type!==h.dtype||
4!==Rc.size||Rc.buffer!==h||!1!==Rc.normalized||0!==Rc.offset||0!==Rc.stride)q.bindBuffer(34962,h.buffer),q.vertexAttribPointer(Mc,4,h.dtype,!1,0,0),Rc.type=h.dtype,Rc.size=4,Rc.buffer=h,Rc.normalized=!1,Rc.offset=0,Rc.stride=0;oc=nc.location;ya=G[oc];ya.buffer||q.enableVertexAttribArray(oc);if(ya.type!==d.dtype||4!==ya.size||ya.buffer!==d||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)q.bindBuffer(34962,d.buffer),q.vertexAttribPointer(oc,4,d.dtype,!1,0,0),ya.type=d.dtype,ya.size=4,ya.buffer=d,
ya.normalized=!1,ya.offset=0,ya.stride=0;v=jc.location;La=G[v];La.buffer||q.enableVertexAttribArray(v);if(La.type!==c.dtype||4!==La.size||La.buffer!==c||!1!==La.normalized||0!==La.offset||0!==La.stride)q.bindBuffer(34962,c.buffer),q.vertexAttribPointer(v,4,c.dtype,!1,0,0),La.type=c.dtype,La.size=4,La.buffer=c,La.normalized=!1,La.offset=0,La.stride=0;$e=vd.location;fb=G[$e];fb.buffer||q.enableVertexAttribArray($e);if(fb.type!==p.dtype||4!==fb.size||fb.buffer!==p||!1!==fb.normalized||0!==fb.offset||
0!==fb.stride)q.bindBuffer(34962,p.buffer),q.vertexAttribPointer($e,4,p.dtype,!1,0,0),fb.type=p.dtype,fb.size=4,fb.buffer=p,fb.normalized=!1,fb.offset=0,fb.stride=0;hb=wc.location;za=G[hb];za.buffer||q.enableVertexAttribArray(hb);if(za.type!==e.dtype||4!==za.size||za.buffer!==e||!1!==za.normalized||0!==za.offset||0!==za.stride)q.bindBuffer(34962,e.buffer),q.vertexAttribPointer(hb,4,e.dtype,!1,0,0),za.type=e.dtype,za.size=4,za.buffer=e,za.normalized=!1,za.offset=0,za.stride=0;Vc=aa.location;Ga=G[Vc];
Ga.buffer||q.enableVertexAttribArray(Vc);if(Ga.type!==l.dtype||4!==Ga.size||Ga.buffer!==l||!1!==Ga.normalized||0!==Ga.offset||0!==Ga.stride)q.bindBuffer(34962,l.buffer),q.vertexAttribPointer(Vc,4,l.dtype,!1,0,0),Ga.type=l.dtype,Ga.size=4,Ga.buffer=l,Ga.normalized=!1,Ga.offset=0,Ga.stride=0;pb=M.location;qb=G[pb];qb.buffer||q.enableVertexAttribArray(pb);if(qb.type!==pa.dtype||4!==qb.size||qb.buffer!==pa||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)q.bindBuffer(34962,pa.buffer),q.vertexAttribPointer(pb,
4,pa.dtype,!1,0,0),qb.type=pa.dtype,qb.size=4,qb.buffer=pa,qb.normalized=!1,qb.offset=0,qb.stride=0;Xa=ia.location;Ya=G[Xa];Ya.buffer||q.enableVertexAttribArray(Xa);if(Ya.type!==W.dtype||4!==Ya.size||Ya.buffer!==W||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)q.bindBuffer(34962,W.buffer),q.vertexAttribPointer(Xa,4,W.dtype,!1,0,0),Ya.type=W.dtype,Ya.size=4,Ya.buffer=W,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Jc=Fa.location;hc=G[Jc];hc.buffer||q.enableVertexAttribArray(Jc);if(hc.type!==n.dtype||
4!==hc.size||hc.buffer!==n||!1!==hc.normalized||0!==hc.offset||0!==hc.stride)q.bindBuffer(34962,n.buffer),q.vertexAttribPointer(Jc,4,n.dtype,!1,0,0),hc.type=n.dtype,hc.size=4,hc.buffer=n,hc.normalized=!1,hc.offset=0,hc.stride=0;Zc=sb.location;Va=G[Zc];Va.buffer||q.enableVertexAttribArray(Zc);if(Va.type!==E.dtype||4!==Va.size||Va.buffer!==E||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)q.bindBuffer(34962,E.buffer),q.vertexAttribPointer(Zc,4,E.dtype,!1,0,0),Va.type=E.dtype,Va.size=4,Va.buffer=E,
Va.normalized=!1,Va.offset=0,Va.stride=0;Hb=Lc.location;cd=G[Hb];cd.buffer||q.enableVertexAttribArray(Hb);if(cd.type!==r.dtype||4!==cd.size||cd.buffer!==r||!1!==cd.normalized||0!==cd.offset||0!==cd.stride)q.bindBuffer(34962,r.buffer),q.vertexAttribPointer(Hb,4,r.dtype,!1,0,0),cd.type=r.dtype,cd.size=4,cd.buffer=r,cd.normalized=!1,cd.offset=0,cd.stride=0;Ia=Fc.location;mc=G[Ia];mc.buffer||q.enableVertexAttribArray(Ia);if(mc.type!==C.dtype||4!==mc.size||mc.buffer!==C||!1!==mc.normalized||0!==mc.offset||
0!==mc.stride)q.bindBuffer(34962,C.buffer),q.vertexAttribPointer(Ia,4,C.dtype,!1,0,0),mc.type=C.dtype,mc.size=4,mc.buffer=C,mc.normalized=!1,mc.offset=0,mc.stride=0;Oa=F.location;Ca=G[Oa];Ca.buffer||q.enableVertexAttribArray(Oa);if(Ca.type!==S.dtype||4!==Ca.size||Ca.buffer!==S||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)q.bindBuffer(34962,S.buffer),q.vertexAttribPointer(Oa,4,S.dtype,!1,0,0),Ca.type=S.dtype,Ca.size=4,Ca.buffer=S,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;lb=B.location;ub=G[lb];
ub.buffer||q.enableVertexAttribArray(lb);if(ub.type!==D.dtype||4!==ub.size||ub.buffer!==D||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)q.bindBuffer(34962,D.buffer),q.vertexAttribPointer(lb,4,D.dtype,!1,0,0),ub.type=D.dtype,ub.size=4,ub.buffer=D,ub.normalized=!1,ub.offset=0,ub.stride=0;Ab=ga.location;rb=G[Ab];rb.buffer||q.enableVertexAttribArray(Ab);if(rb.type!==u.dtype||4!==rb.size||rb.buffer!==u||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)q.bindBuffer(34962,u.buffer),q.vertexAttribPointer(Ab,
4,u.dtype,!1,0,0),rb.type=u.dtype,rb.size=4,rb.buffer=u,rb.normalized=!1,rb.offset=0,rb.stride=0;sd=Pa.location;vb=G[sd];vb.buffer||q.enableVertexAttribArray(sd);if(vb.type!==oa.dtype||4!==vb.size||vb.buffer!==oa||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)q.bindBuffer(34962,oa.buffer),q.vertexAttribPointer(sd,4,oa.dtype,!1,0,0),vb.type=oa.dtype,vb.size=4,vb.buffer=oa,vb.normalized=!1,vb.offset=0,vb.stride=0;q.uniform1i(ua.location,la.bind());(yd=O.elements)?q.bindBuffer(34963,yd.buffer.buffer):
Db.currentVAO&&(yd=Ea.getElements(Db.currentVAO.elements))&&q.bindBuffer(34963,yd.buffer.buffer);for(f=0;f<b;++f){m=a[f];var Vd,fe,Ie,Qd,Yd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,xa,ma,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,Gf,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,Ve,ne,ee,be,pe,$d;nd.height=m.viewportHeight;nd.width=m.viewportWidth;nd.x=m.viewportX;nd.y=m.viewportY;Vd=nd.x|0;fe=nd.y|0;Ie="width"in nd?nd.width|0:x.framebufferWidth-Vd;Qd="height"in nd?nd.height|0:x.framebufferHeight-
fe;Yd=x.viewportWidth;x.viewportWidth=Ie;Tb=x.viewportHeight;x.viewportHeight=Qd;q.viewport(Vd,fe,Ie,Qd);td[0]=Vd;td[1]=fe;td[2]=Ie;td[3]=Qd;wd.height=m.scissorHeight;wd.width=m.scissorWidth;wd.x=m.scissorX;wd.y=m.scissorY;Zb=wd.x|0;Lb=wd.y|0;Ja="width"in wd?wd.width|0:x.framebufferWidth-Zb;Wb="height"in wd?wd.height|0:x.framebufferHeight-Lb;q.scissor(Zb,Lb,Ja,Wb);mf[0]=Zb;mf[1]=Lb;mf[2]=Ja;mf[3]=Wb;mb=m.dim0A;q.uniformMatrix4fv(K.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(od[0]=
mb[0],od[1]=mb[1],od[2]=mb[2],od[3]=mb[3],od[4]=mb[4],od[5]=mb[5],od[6]=mb[6],od[7]=mb[7],od[8]=mb[8],od[9]=mb[9],od[10]=mb[10],od[11]=mb[11],od[12]=mb[12],od[13]=mb[13],od[14]=mb[14],od[15]=mb[15],od));wb=m.dim1A;q.uniformMatrix4fv(J.location,!1,Array.isArray(wb)||wb instanceof Float32Array?wb:(sc[0]=wb[0],sc[1]=wb[1],sc[2]=wb[2],sc[3]=wb[3],sc[4]=wb[4],sc[5]=wb[5],sc[6]=wb[6],sc[7]=wb[7],sc[8]=wb[8],sc[9]=wb[9],sc[10]=wb[10],sc[11]=wb[11],sc[12]=wb[12],sc[13]=wb[13],sc[14]=wb[14],sc[15]=wb[15],
sc));Ib=m.dim0B;q.uniformMatrix4fv(N.location,!1,Array.isArray(Ib)||Ib instanceof Float32Array?Ib:(Vb[0]=Ib[0],Vb[1]=Ib[1],Vb[2]=Ib[2],Vb[3]=Ib[3],Vb[4]=Ib[4],Vb[5]=Ib[5],Vb[6]=Ib[6],Vb[7]=Ib[7],Vb[8]=Ib[8],Vb[9]=Ib[9],Vb[10]=Ib[10],Vb[11]=Ib[11],Vb[12]=Ib[12],Vb[13]=Ib[13],Vb[14]=Ib[14],Vb[15]=Ib[15],Vb));Mb=m.dim1B;q.uniformMatrix4fv(Ub.location,!1,Array.isArray(Mb)||Mb instanceof Float32Array?Mb:(Gc[0]=Mb[0],Gc[1]=Mb[1],Gc[2]=Mb[2],Gc[3]=Mb[3],Gc[4]=Mb[4],Gc[5]=Mb[5],Gc[6]=Mb[6],Gc[7]=Mb[7],Gc[8]=
Mb[8],Gc[9]=Mb[9],Gc[10]=Mb[10],Gc[11]=Mb[11],Gc[12]=Mb[12],Gc[13]=Mb[13],Gc[14]=Mb[14],Gc[15]=Mb[15],Gc));dc=m.dim0C;q.uniformMatrix4fv(V.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Sc[0]=dc[0],Sc[1]=dc[1],Sc[2]=dc[2],Sc[3]=dc[3],Sc[4]=dc[4],Sc[5]=dc[5],Sc[6]=dc[6],Sc[7]=dc[7],Sc[8]=dc[8],Sc[9]=dc[9],Sc[10]=dc[10],Sc[11]=dc[11],Sc[12]=dc[12],Sc[13]=dc[13],Sc[14]=dc[14],Sc[15]=dc[15],Sc));gc=m.dim1C;q.uniformMatrix4fv(Za.location,!1,Array.isArray(gc)||gc instanceof Float32Array?
gc:(Jb[0]=gc[0],Jb[1]=gc[1],Jb[2]=gc[2],Jb[3]=gc[3],Jb[4]=gc[4],Jb[5]=gc[5],Jb[6]=gc[6],Jb[7]=gc[7],Jb[8]=gc[8],Jb[9]=gc[9],Jb[10]=gc[10],Jb[11]=gc[11],Jb[12]=gc[12],Jb[13]=gc[13],Jb[14]=gc[14],Jb[15]=gc[15],Jb));xa=m.dim0D;q.uniformMatrix4fv(sa.location,!1,Array.isArray(xa)||xa instanceof Float32Array?xa:(zc[0]=xa[0],zc[1]=xa[1],zc[2]=xa[2],zc[3]=xa[3],zc[4]=xa[4],zc[5]=xa[5],zc[6]=xa[6],zc[7]=xa[7],zc[8]=xa[8],zc[9]=xa[9],zc[10]=xa[10],zc[11]=xa[11],zc[12]=xa[12],zc[13]=xa[13],zc[14]=xa[14],zc[15]=
xa[15],zc));ma=m.dim1D;q.uniformMatrix4fv(T.location,!1,Array.isArray(ma)||ma instanceof Float32Array?ma:(Wa[0]=ma[0],Wa[1]=ma[1],Wa[2]=ma[2],Wa[3]=ma[3],Wa[4]=ma[4],Wa[5]=ma[5],Wa[6]=ma[6],Wa[7]=ma[7],Wa[8]=ma[8],Wa[9]=ma[9],Wa[10]=ma[10],Wa[11]=ma[11],Wa[12]=ma[12],Wa[13]=ma[13],Wa[14]=ma[14],Wa[15]=ma[15],Wa));Bc=m.loA;q.uniformMatrix4fv(bc.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(ra[0]=Bc[0],ra[1]=Bc[1],ra[2]=Bc[2],ra[3]=Bc[3],ra[4]=Bc[4],ra[5]=Bc[5],ra[6]=Bc[6],ra[7]=Bc[7],
ra[8]=Bc[8],ra[9]=Bc[9],ra[10]=Bc[10],ra[11]=Bc[11],ra[12]=Bc[12],ra[13]=Bc[13],ra[14]=Bc[14],ra[15]=Bc[15],ra));Dc=m.hiA;q.uniformMatrix4fv(ha.location,!1,Array.isArray(Dc)||Dc instanceof Float32Array?Dc:(pd[0]=Dc[0],pd[1]=Dc[1],pd[2]=Dc[2],pd[3]=Dc[3],pd[4]=Dc[4],pd[5]=Dc[5],pd[6]=Dc[6],pd[7]=Dc[7],pd[8]=Dc[8],pd[9]=Dc[9],pd[10]=Dc[10],pd[11]=Dc[11],pd[12]=Dc[12],pd[13]=Dc[13],pd[14]=Dc[14],pd[15]=Dc[15],pd));Oc=m.loB;q.uniformMatrix4fv(Ua.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?
Oc:(Yb[0]=Oc[0],Yb[1]=Oc[1],Yb[2]=Oc[2],Yb[3]=Oc[3],Yb[4]=Oc[4],Yb[5]=Oc[5],Yb[6]=Oc[6],Yb[7]=Oc[7],Yb[8]=Oc[8],Yb[9]=Oc[9],Yb[10]=Oc[10],Yb[11]=Oc[11],Yb[12]=Oc[12],Yb[13]=Oc[13],Yb[14]=Oc[14],Yb[15]=Oc[15],Yb));$c=m.hiB;q.uniformMatrix4fv(da.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(ab[0]=$c[0],ab[1]=$c[1],ab[2]=$c[2],ab[3]=$c[3],ab[4]=$c[4],ab[5]=$c[5],ab[6]=$c[6],ab[7]=$c[7],ab[8]=$c[8],ab[9]=$c[9],ab[10]=$c[10],ab[11]=$c[11],ab[12]=$c[12],ab[13]=$c[13],ab[14]=$c[14],ab[15]=
$c[15],ab));Tc=m.loC;q.uniformMatrix4fv(Y.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?Tc:(Sb[0]=Tc[0],Sb[1]=Tc[1],Sb[2]=Tc[2],Sb[3]=Tc[3],Sb[4]=Tc[4],Sb[5]=Tc[5],Sb[6]=Tc[6],Sb[7]=Tc[7],Sb[8]=Tc[8],Sb[9]=Tc[9],Sb[10]=Tc[10],Sb[11]=Tc[11],Sb[12]=Tc[12],Sb[13]=Tc[13],Sb[14]=Tc[14],Sb[15]=Tc[15],Sb));Pc=m.hiC;q.uniformMatrix4fv(Aa.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(cb[0]=Pc[0],cb[1]=Pc[1],cb[2]=Pc[2],cb[3]=Pc[3],cb[4]=Pc[4],cb[5]=Pc[5],cb[6]=Pc[6],cb[7]=Pc[7],
cb[8]=Pc[8],cb[9]=Pc[9],cb[10]=Pc[10],cb[11]=Pc[11],cb[12]=Pc[12],cb[13]=Pc[13],cb[14]=Pc[14],cb[15]=Pc[15],cb));Fb=m.loD;q.uniformMatrix4fv(ib.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Ac[0]=Fb[0],Ac[1]=Fb[1],Ac[2]=Fb[2],Ac[3]=Fb[3],Ac[4]=Fb[4],Ac[5]=Fb[5],Ac[6]=Fb[6],Ac[7]=Fb[7],Ac[8]=Fb[8],Ac[9]=Fb[9],Ac[10]=Fb[10],Ac[11]=Fb[11],Ac[12]=Fb[12],Ac[13]=Fb[13],Ac[14]=Fb[14],Ac[15]=Fb[15],Ac));Cb=m.hiD;q.uniformMatrix4fv(Qa.location,!1,Array.isArray(Cb)||Cb instanceof Float32Array?
Cb:(Nb[0]=Cb[0],Nb[1]=Cb[1],Nb[2]=Cb[2],Nb[3]=Cb[3],Nb[4]=Cb[4],Nb[5]=Cb[5],Nb[6]=Cb[6],Nb[7]=Cb[7],Nb[8]=Cb[8],Nb[9]=Cb[9],Nb[10]=Cb[10],Nb[11]=Cb[11],Nb[12]=Cb[12],Nb[13]=Cb[13],Nb[14]=Cb[14],Nb[15]=Cb[15],Nb));Qc=m.resolution;Ic=Qc[0];ec=Qc[1];f&&Uc===Ic&&Xc===ec||(Uc=Ic,Xc=ec,q.uniform2f(X.location,Ic,ec));bd=m.viewBoxPos;qd=bd[0];Yc=bd[1];f&&ld===qd&&Gf===Yc||(ld=qd,Gf=Yc,q.uniform2f(fa.location,qd,Yc));Wd=m.viewBoxSize;je=Wd[0];me=Wd[1];f&&Je===je&&Hd===me||(Je=je,Hd=me,q.uniform2f(qa.location,
je,me));Ed=m.maskHeight;f&&dd===Ed||(dd=Ed,q.uniform1f(ea.location,Ed));Ec=m.drwLayer;f&&rd===Ec||(rd=Ec,q.uniform1f(z.location,Ec));hd=m.contextColor;ad=hd[0];Dd=hd[1];we=hd[2];Ve=hd[3];f&&md===ad&&zd===Dd&&ue===we&&ne===Ve||(md=ad,zd=Dd,ue=we,ne=Ve,q.uniform4f(Z.location,ad,Dd,we,Ve));(ee=m.maskTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);be=ee._texture;q.uniform1i(va.location,be.bind());pe=m.offset;if($d=m.count)yd?q.drawElements(1,$d,yd.type,pe<<(yd.type-5121>>1)):q.drawArrays(1,pe,
$d),x.viewportWidth=Yd,x.viewportHeight=Tb,be.unbind()}la.unbind();ba.dirty=!0;Db.setVAO(null);ba.profile=k},draw:function(a){var b,k,f,m,t,w;b=Ha.next;b!==Ha.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),Ha.cur=b);if(ba.dirty){b=se[0];w=se[1];k=se[2];f=se[3];if(b!==xd[0]||w!==xd[1]||k!==xd[2]||f!==xd[3])q.colorMask(b,w,k,f),xd[0]=b,xd[1]=w,xd[2]=k,xd[3]=f;b=rc.frontFace;b!==ba.frontFace&&(q.frontFace(b),ba.frontFace=b);b=rc.polygonOffset_enable;b!==ba.polygonOffset_enable&&
(b?q.enable(32823):q.disable(32823),ba.polygonOffset_enable=b);b=Kd[0];w=Kd[1];if(b!==Sd[0]||w!==Sd[1])q.polygonOffset(b,w),Sd[0]=b,Sd[1]=w;b=rc.sample_alpha;b!==ba.sample_alpha&&(b?q.enable(32926):q.disable(32926),ba.sample_alpha=b);b=rc.sample_enable;b!==ba.sample_enable&&(b?q.enable(32928):q.disable(32928),ba.sample_enable=b);b=Zd[0];w=Zd[1];if(b!==ie[0]||w!==ie[1])q.sampleCoverage(b,w),ie[0]=b,ie[1]=w;b=rc.stencil_enable;b!==ba.stencil_enable&&(b?q.enable(2960):q.disable(2960),ba.stencil_enable=
b);b=rc.stencil_mask;b!==ba.stencil_mask&&(q.stencilMask(b),ba.stencil_mask=b);b=We[0];w=We[1];k=We[2];if(b!==Ad[0]||w!==Ad[1]||k!==Ad[2])q.stencilFunc(b,w,k),Ad[0]=b,Ad[1]=w,Ad[2]=k;b=Td[0];w=Td[1];k=Td[2];f=Td[3];if(b!==le[0]||w!==le[1]||k!==le[2]||f!==le[3])q.stencilOpSeparate(b,w,k,f),le[0]=b,le[1]=w,le[2]=k,le[3]=f;b=ve[0];w=ve[1];k=ve[2];f=ve[3];if(b!==de[0]||w!==de[1]||k!==de[2]||f!==de[3])q.stencilOpSeparate(b,w,k,f),de[0]=b,de[1]=w,de[2]=k,de[3]=f}nd.height=a.viewportHeight;nd.width=a.viewportWidth;
nd.x=a.viewportX;nd.y=a.viewportY;k=nd.x|0;f=nd.y|0;m="width"in nd?nd.width|0:x.framebufferWidth-k;t="height"in nd?nd.height|0:x.framebufferHeight-f;b=x.viewportWidth;x.viewportWidth=m;w=x.viewportHeight;x.viewportHeight=t;q.viewport(k,f,m,t);td[0]=k;td[1]=f;td[2]=m;td[3]=t;q.blendColor(0,0,0,0);Ze[0]=0;Ze[1]=0;Ze[2]=0;Ze[3]=0;q.disable(3042);ba.blend_enable=!1;q.blendEquationSeparate(32774,32774);ce[0]=32774;ce[1]=32774;q.blendFuncSeparate(770,771,1,1);Jd[0]=770;Jd[1]=771;Jd[2]=1;Jd[3]=1;q.enable(2884);
ba.cull_enable=!0;q.cullFace(1029);ba.cull_face=1029;q.enable(2929);ba.depth_enable=!0;q.depthFunc(513);ba.depth_func=513;q.depthMask(!0);ba.depth_mask=!0;q.depthRange(0,1);te[0]=0;te[1]=1;q.disable(3024);ba.dither=!1;q.lineWidth(2);ba.lineWidth=2;wd.height=a.scissorHeight;wd.width=a.scissorWidth;wd.x=a.scissorX;wd.y=a.scissorY;k=wd.x|0;f=wd.y|0;m="width"in wd?wd.width|0:x.framebufferWidth-k;t="height"in wd?wd.height|0:x.framebufferHeight-f;q.scissor(k,f,m,t);mf[0]=k;mf[1]=f;mf[2]=m;mf[3]=t;q.enable(3089);
ba.scissor_enable=!0;k=ba.profile;ba.profile=!1;q.useProgram(g.program);Db.setVAO(null);f=$b.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==h.dtype||4!==m.size||m.buffer!==h||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,h.buffer),q.vertexAttribPointer(f,4,h.dtype,!1,0,0),m.type=h.dtype,m.size=4,m.buffer=h,m.normalized=!1,m.offset=0,m.stride=0;f=nc.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==d.dtype||4!==m.size||m.buffer!==d||!1!==m.normalized||
0!==m.offset||0!==m.stride)q.bindBuffer(34962,d.buffer),q.vertexAttribPointer(f,4,d.dtype,!1,0,0),m.type=d.dtype,m.size=4,m.buffer=d,m.normalized=!1,m.offset=0,m.stride=0;f=jc.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==c.dtype||4!==m.size||m.buffer!==c||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,c.buffer),q.vertexAttribPointer(f,4,c.dtype,!1,0,0),m.type=c.dtype,m.size=4,m.buffer=c,m.normalized=!1,m.offset=0,m.stride=0;f=vd.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);
if(m.type!==p.dtype||4!==m.size||m.buffer!==p||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,p.buffer),q.vertexAttribPointer(f,4,p.dtype,!1,0,0),m.type=p.dtype,m.size=4,m.buffer=p,m.normalized=!1,m.offset=0,m.stride=0;f=wc.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==e.dtype||4!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,e.buffer),q.vertexAttribPointer(f,4,e.dtype,!1,0,0),m.type=e.dtype,m.size=4,m.buffer=e,m.normalized=
!1,m.offset=0,m.stride=0;f=aa.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==l.dtype||4!==m.size||m.buffer!==l||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,l.buffer),q.vertexAttribPointer(f,4,l.dtype,!1,0,0),m.type=l.dtype,m.size=4,m.buffer=l,m.normalized=!1,m.offset=0,m.stride=0;f=M.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==pa.dtype||4!==m.size||m.buffer!==pa||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,pa.buffer),
q.vertexAttribPointer(f,4,pa.dtype,!1,0,0),m.type=pa.dtype,m.size=4,m.buffer=pa,m.normalized=!1,m.offset=0,m.stride=0;f=ia.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==W.dtype||4!==m.size||m.buffer!==W||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,W.buffer),q.vertexAttribPointer(f,4,W.dtype,!1,0,0),m.type=W.dtype,m.size=4,m.buffer=W,m.normalized=!1,m.offset=0,m.stride=0;f=Fa.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==n.dtype||4!==m.size||
m.buffer!==n||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,n.buffer),q.vertexAttribPointer(f,4,n.dtype,!1,0,0),m.type=n.dtype,m.size=4,m.buffer=n,m.normalized=!1,m.offset=0,m.stride=0;f=sb.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==E.dtype||4!==m.size||m.buffer!==E||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,E.buffer),q.vertexAttribPointer(f,4,E.dtype,!1,0,0),m.type=E.dtype,m.size=4,m.buffer=E,m.normalized=!1,m.offset=0,m.stride=0;
f=Lc.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==r.dtype||4!==m.size||m.buffer!==r||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,r.buffer),q.vertexAttribPointer(f,4,r.dtype,!1,0,0),m.type=r.dtype,m.size=4,m.buffer=r,m.normalized=!1,m.offset=0,m.stride=0;f=Fc.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==C.dtype||4!==m.size||m.buffer!==C||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,C.buffer),q.vertexAttribPointer(f,
4,C.dtype,!1,0,0),m.type=C.dtype,m.size=4,m.buffer=C,m.normalized=!1,m.offset=0,m.stride=0;f=F.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==S.dtype||4!==m.size||m.buffer!==S||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,S.buffer),q.vertexAttribPointer(f,4,S.dtype,!1,0,0),m.type=S.dtype,m.size=4,m.buffer=S,m.normalized=!1,m.offset=0,m.stride=0;f=B.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==D.dtype||4!==m.size||m.buffer!==D||!1!==m.normalized||
0!==m.offset||0!==m.stride)q.bindBuffer(34962,D.buffer),q.vertexAttribPointer(f,4,D.dtype,!1,0,0),m.type=D.dtype,m.size=4,m.buffer=D,m.normalized=!1,m.offset=0,m.stride=0;f=ga.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);if(m.type!==u.dtype||4!==m.size||m.buffer!==u||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,u.buffer),q.vertexAttribPointer(f,4,u.dtype,!1,0,0),m.type=u.dtype,m.size=4,m.buffer=u,m.normalized=!1,m.offset=0,m.stride=0;f=Pa.location;m=G[f];m.buffer||q.enableVertexAttribArray(f);
if(m.type!==oa.dtype||4!==m.size||m.buffer!==oa||!1!==m.normalized||0!==m.offset||0!==m.stride)q.bindBuffer(34962,oa.buffer),q.vertexAttribPointer(f,4,oa.dtype,!1,0,0),m.type=oa.dtype,m.size=4,m.buffer=oa,m.normalized=!1,m.offset=0,m.stride=0;f=a.dim0A;q.uniformMatrix4fv(K.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(sd[0]=f[0],sd[1]=f[1],sd[2]=f[2],sd[3]=f[3],sd[4]=f[4],sd[5]=f[5],sd[6]=f[6],sd[7]=f[7],sd[8]=f[8],sd[9]=f[9],sd[10]=f[10],sd[11]=f[11],sd[12]=f[12],sd[13]=f[13],sd[14]=
f[14],sd[15]=f[15],sd));f=a.dim1A;q.uniformMatrix4fv(J.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(cd[0]=f[0],cd[1]=f[1],cd[2]=f[2],cd[3]=f[3],cd[4]=f[4],cd[5]=f[5],cd[6]=f[6],cd[7]=f[7],cd[8]=f[8],cd[9]=f[9],cd[10]=f[10],cd[11]=f[11],cd[12]=f[12],cd[13]=f[13],cd[14]=f[14],cd[15]=f[15],cd));f=a.dim0B;q.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Vc[0]=f[0],Vc[1]=f[1],Vc[2]=f[2],Vc[3]=f[3],Vc[4]=f[4],Vc[5]=f[5],Vc[6]=f[6],Vc[7]=f[7],Vc[8]=f[8],Vc[9]=
f[9],Vc[10]=f[10],Vc[11]=f[11],Vc[12]=f[12],Vc[13]=f[13],Vc[14]=f[14],Vc[15]=f[15],Vc));f=a.dim1B;q.uniformMatrix4fv(Ub.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(yd[0]=f[0],yd[1]=f[1],yd[2]=f[2],yd[3]=f[3],yd[4]=f[4],yd[5]=f[5],yd[6]=f[6],yd[7]=f[7],yd[8]=f[8],yd[9]=f[9],yd[10]=f[10],yd[11]=f[11],yd[12]=f[12],yd[13]=f[13],yd[14]=f[14],yd[15]=f[15],yd));f=a.dim0C;q.uniformMatrix4fv(V.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Rc[0]=f[0],Rc[1]=f[1],Rc[2]=f[2],Rc[3]=
f[3],Rc[4]=f[4],Rc[5]=f[5],Rc[6]=f[6],Rc[7]=f[7],Rc[8]=f[8],Rc[9]=f[9],Rc[10]=f[10],Rc[11]=f[11],Rc[12]=f[12],Rc[13]=f[13],Rc[14]=f[14],Rc[15]=f[15],Rc));f=a.dim1C;q.uniformMatrix4fv(Za.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Mc[0]=f[0],Mc[1]=f[1],Mc[2]=f[2],Mc[3]=f[3],Mc[4]=f[4],Mc[5]=f[5],Mc[6]=f[6],Mc[7]=f[7],Mc[8]=f[8],Mc[9]=f[9],Mc[10]=f[10],Mc[11]=f[11],Mc[12]=f[12],Mc[13]=f[13],Mc[14]=f[14],Mc[15]=f[15],Mc));f=a.dim0D;q.uniformMatrix4fv(sa.location,!1,Array.isArray(f)||f instanceof
Float32Array?f:(oc[0]=f[0],oc[1]=f[1],oc[2]=f[2],oc[3]=f[3],oc[4]=f[4],oc[5]=f[5],oc[6]=f[6],oc[7]=f[7],oc[8]=f[8],oc[9]=f[9],oc[10]=f[10],oc[11]=f[11],oc[12]=f[12],oc[13]=f[13],oc[14]=f[14],oc[15]=f[15],oc));f=a.dim1D;q.uniformMatrix4fv(T.location,!1,Array.isArray(f)||f instanceof Float32Array?f:($a[0]=f[0],$a[1]=f[1],$a[2]=f[2],$a[3]=f[3],$a[4]=f[4],$a[5]=f[5],$a[6]=f[6],$a[7]=f[7],$a[8]=f[8],$a[9]=f[9],$a[10]=f[10],$a[11]=f[11],$a[12]=f[12],$a[13]=f[13],$a[14]=f[14],$a[15]=f[15],$a));f=a.loA;q.uniformMatrix4fv(bc.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(hc[0]=f[0],hc[1]=f[1],hc[2]=f[2],hc[3]=f[3],hc[4]=f[4],hc[5]=f[5],hc[6]=f[6],hc[7]=f[7],hc[8]=f[8],hc[9]=f[9],hc[10]=f[10],hc[11]=f[11],hc[12]=f[12],hc[13]=f[13],hc[14]=f[14],hc[15]=f[15],hc));f=a.hiA;q.uniformMatrix4fv(ha.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=
f[14],Bb[15]=f[15],Bb));f=a.loB;q.uniformMatrix4fv(Ua.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(mc[0]=f[0],mc[1]=f[1],mc[2]=f[2],mc[3]=f[3],mc[4]=f[4],mc[5]=f[5],mc[6]=f[6],mc[7]=f[7],mc[8]=f[8],mc[9]=f[9],mc[10]=f[10],mc[11]=f[11],mc[12]=f[12],mc[13]=f[13],mc[14]=f[14],mc[15]=f[15],mc));f=a.hiB;q.uniformMatrix4fv(da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Sa[0]=f[0],Sa[1]=f[1],Sa[2]=f[2],Sa[3]=f[3],Sa[4]=f[4],Sa[5]=f[5],Sa[6]=f[6],Sa[7]=f[7],Sa[8]=f[8],Sa[9]=f[9],
Sa[10]=f[10],Sa[11]=f[11],Sa[12]=f[12],Sa[13]=f[13],Sa[14]=f[14],Sa[15]=f[15],Sa));f=a.loC;q.uniformMatrix4fv(Y.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;q.uniformMatrix4fv(Aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Xb[0]=f[0],Xb[1]=f[1],Xb[2]=f[2],Xb[3]=f[3],Xb[4]=
f[4],Xb[5]=f[5],Xb[6]=f[6],Xb[7]=f[7],Xb[8]=f[8],Xb[9]=f[9],Xb[10]=f[10],Xb[11]=f[11],Xb[12]=f[12],Xb[13]=f[13],Xb[14]=f[14],Xb[15]=f[15],Xb));f=a.loD;q.uniformMatrix4fv(ib.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Zc[0]=f[0],Zc[1]=f[1],Zc[2]=f[2],Zc[3]=f[3],Zc[4]=f[4],Zc[5]=f[5],Zc[6]=f[6],Zc[7]=f[7],Zc[8]=f[8],Zc[9]=f[9],Zc[10]=f[10],Zc[11]=f[11],Zc[12]=f[12],Zc[13]=f[13],Zc[14]=f[14],Zc[15]=f[15],Zc));f=a.hiD;q.uniformMatrix4fv(Qa.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Qd[0]=f[0],Qd[1]=f[1],Qd[2]=f[2],Qd[3]=f[3],Qd[4]=f[4],Qd[5]=f[5],Qd[6]=f[6],Qd[7]=f[7],Qd[8]=f[8],Qd[9]=f[9],Qd[10]=f[10],Qd[11]=f[11],Qd[12]=f[12],Qd[13]=f[13],Qd[14]=f[14],Qd[15]=f[15],Qd));f=a.resolution;q.uniform2f(X.location,f[0],f[1]);f=a.viewBoxPos;q.uniform2f(fa.location,f[0],f[1]);f=a.viewBoxSize;q.uniform2f(qa.location,f[0],f[1]);q.uniform1f(ea.location,a.maskHeight);q.uniform1f(z.location,a.drwLayer);f=a.contextColor;q.uniform4f(Z.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===
f._reglType&&(f=f.color[0]);f=f._texture;q.uniform1i(va.location,f.bind());q.uniform1i(ua.location,I.bind());(m=O.elements)?q.bindBuffer(34963,m.buffer.buffer):Db.currentVAO&&(m=Ea.getElements(Db.currentVAO.elements))&&q.bindBuffer(34963,m.buffer.buffer);t=a.offset;if(a=a.count)m?q.drawElements(1,a,m.type,t<<(m.type-5121>>1)):q.drawArrays(1,t,a),ba.dirty=!0,Db.setVAO(null),x.viewportWidth=b,x.viewportHeight=w,ba.profile=k,f.unbind(),I.unbind()},scope:function(a,b,g){var q,z,B,M,G,F,aa,N,K,J,I,V,T,
Y,X,fa,ia,Z,ga,da,ea,ha,Ea,ua,Ha,ra,nc,$a,qa,Sa,Fa,ya,Jb,ie,Bb,Rc,Db,za,Wa,Ga,Td,Xb,Gc,Mc,sa,Vb,hc,ab,zc,oc,Ia,Sc,Oa,Ca,vd,va,cd,Yb,cb,la,Vc,mc,Ad,de,Jc,sc,xd,Zc,Sb,Ja,sb,mb,wb,td,yd,le,Lc,Nb,sd,wc,pd,Ac,Aa,od,Ze,Fb,Cb,ce,Kd,mf,ve,Qd,$b,We,Za,Pa,jc,Jd,Zd,se,Qa,ib,Sd,te,Ec,Ub,Ua,Fc,md,bc,zd,qc,ue,Ve,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Me,ze,of,pf,Df,Hf,Af,Ef,Ff,
wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf,dg,Sf,Tf,qg,df,af,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,bf,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;nd.height=a.viewportHeight;nd.width=a.viewportWidth;nd.x=a.viewportX;nd.y=a.viewportY;q=nd.x|0;z=nd.y|0;B="width"in nd?nd.width|0:x.framebufferWidth-q;M="height"in nd?nd.height|0:x.framebufferHeight-
z;G=x.viewportWidth;x.viewportWidth=B;F=x.viewportHeight;x.viewportHeight=M;aa=Ie[0];Ie[0]=q;N=Ie[1];Ie[1]=z;K=Ie[2];Ie[2]=B;J=Ie[3];Ie[3]=M;I=xb[0];xb[0]=0;V=xb[1];xb[1]=0;T=xb[2];xb[2]=0;Y=xb[3];xb[3]=0;X=rc.blend_enable;rc.blend_enable=!1;fa=Yd[0];Yd[0]=32774;ia=Yd[1];Yd[1]=32774;Z=Vd[0];Vd[0]=770;ga=Vd[1];Vd[1]=771;da=Vd[2];Vd[2]=1;ea=Vd[3];Vd[3]=1;ha=rc.cull_enable;rc.cull_enable=!0;Ea=rc.cull_face;rc.cull_face=1029;ua=rc.depth_enable;rc.depth_enable=!0;Ha=rc.depth_func;rc.depth_func=513;ra=
rc.depth_mask;rc.depth_mask=!0;nc=fe[0];fe[0]=0;$a=fe[1];fe[1]=1;qa=rc.dither;rc.dither=!1;Sa=rc.lineWidth;rc.lineWidth=2;wd.height=a.scissorHeight;wd.width=a.scissorWidth;wd.x=a.scissorX;wd.y=a.scissorY;Fa=wd.x|0;ya=wd.y|0;Jb="width"in wd?wd.width|0:x.framebufferWidth-Fa;ie="height"in wd?wd.height|0:x.framebufferHeight-ya;Bb=$e[0];$e[0]=Fa;Rc=$e[1];$e[1]=ya;Db=$e[2];$e[2]=Jb;za=$e[3];$e[3]=ie;Wa=rc.scissor_enable;rc.scissor_enable=!0;Ga=ba.profile;ba.profile=!1;Td=a.offset;Xb=O.offset;O.offset=Td;
Gc=a.count;Mc=O.count;O.count=Gc;sa=O.primitive;O.primitive=1;Vb=a.contextColor;hc=U[24];U[24]=Vb;ab=a.dim0A;zc=U[3];U[3]=ab;oc=a.dim0B;Ia=U[5];U[5]=oc;Sc=a.dim0C;Oa=U[7];U[7]=Sc;Ca=a.dim0D;vd=U[9];U[9]=Ca;va=a.dim1A;cd=U[4];U[4]=va;Yb=a.dim1B;cb=U[6];U[6]=Yb;la=a.dim1C;Vc=U[8];U[8]=la;mc=a.dim1D;Ad=U[10];U[10]=mc;de=a.drwLayer;Jc=U[23];U[23]=de;sc=a.hiA;xd=U[12];U[12]=sc;Zc=a.hiB;Sb=U[14];U[14]=Zc;Ja=a.hiC;sb=U[16];U[16]=Ja;mb=a.hiD;wb=U[18];U[18]=mb;td=a.loA;yd=U[11];U[11]=td;le=a.loB;Lc=U[13];
U[13]=le;Nb=a.loC;sd=U[15];U[15]=Nb;wc=a.loD;pd=U[17];U[17]=wc;Ac=a.maskHeight;Aa=U[22];U[22]=Ac;od=a.maskTexture;Ze=U[25];U[25]=od;Fb=U[26];U[26]=y;Cb=a.resolution;ce=U[19];U[19]=Cb;Kd=a.viewBoxPos;mf=U[20];U[20]=Kd;ve=a.viewBoxSize;Qd=U[21];U[21]=ve;$b=t.buffer;t.buffer=oa;We=t.divisor;t.divisor=0;Za=t.normalized;t.normalized=!1;Pa=t.offset;t.offset=0;jc=t.size;t.size=0;Jd=t.state;t.state=1;Zd=t.stride;t.stride=0;se=t.type;t.type=oa.dtype;Qa=t.w;t.w=0;ib=t.x;t.x=0;Sd=t.y;t.y=0;te=t.z;t.z=0;Ec=w.buffer;
w.buffer=h;Ub=w.divisor;w.divisor=0;Ua=w.normalized;w.normalized=!1;Fc=w.offset;w.offset=0;md=w.size;w.size=0;bc=w.state;w.state=1;zd=w.stride;w.stride=0;qc=w.type;w.type=h.dtype;ue=w.w;w.w=0;Ve=w.x;w.x=0;ne=w.y;w.y=0;ee=w.z;w.z=0;be=k.buffer;k.buffer=d;pe=k.divisor;k.divisor=0;$d=k.normalized;k.normalized=!1;ge=k.offset;k.offset=0;yc=k.size;k.size=0;Wc=k.state;k.state=1;qe=k.stride;k.stride=0;ke=k.type;k.type=d.dtype;Fd=k.w;k.w=0;Ld=k.x;k.x=0;Md=k.y;k.y=0;Nd=k.z;k.z=0;he=ca.buffer;ca.buffer=c;Te=
ca.divisor;ca.divisor=0;xe=ca.normalized;ca.normalized=!1;oe=ca.offset;ca.offset=0;Ne=ca.size;ca.size=0;Oe=ca.state;ca.state=1;Ke=ca.stride;ca.stride=0;re=ca.type;ca.type=c.dtype;Be=ca.w;ca.w=0;De=ca.x;ca.x=0;Ee=ca.y;ca.y=0;Fe=ca.z;ca.z=0;Ce=L.buffer;L.buffer=p;Id=L.divisor;L.divisor=0;Rd=L.normalized;L.normalized=!1;Xd=L.offset;L.offset=0;ae=L.size;L.size=0;Ge=L.state;L.state=1;Bd=L.stride;L.stride=0;Od=L.type;L.type=p.dtype;ye=L.w;L.w=0;He=L.x;L.x=0;ff=L.y;L.y=0;Ye=L.z;L.z=0;Pe=P.buffer;P.buffer=
e;Le=P.divisor;P.divisor=0;Xe=P.normalized;P.normalized=!1;Ue=P.offset;P.offset=0;Qe=P.size;P.size=0;Re=P.state;P.state=1;Pd=P.stride;P.stride=0;Ud=P.type;P.type=e.dtype;Se=P.w;P.w=0;gf=P.x;P.x=0;lf=P.y;P.y=0;cf=P.z;P.z=0;hf=A.buffer;A.buffer=l;jf=A.divisor;A.divisor=0;kf=A.normalized;A.normalized=!1;qf=A.offset;A.offset=0;nf=A.size;A.size=0;rf=A.state;A.state=1;Bf=A.stride;A.stride=0;Cf=A.type;A.type=l.dtype;Me=A.w;A.w=0;ze=A.x;A.x=0;of=A.y;A.y=0;pf=A.z;A.z=0;Df=ka.buffer;ka.buffer=pa;Hf=ka.divisor;
ka.divisor=0;Af=ka.normalized;ka.normalized=!1;Ef=ka.offset;ka.offset=0;Ff=ka.size;ka.size=0;wf=ka.state;ka.state=1;xf=ka.stride;ka.stride=0;uf=ka.type;ka.type=pa.dtype;yf=ka.w;ka.w=0;zf=ka.x;ka.x=0;Jf=ka.y;ka.y=0;Kf=ka.z;ka.z=0;Lf=H.buffer;H.buffer=W;Mf=H.divisor;H.divisor=0;sf=H.normalized;H.normalized=!1;Rf=H.offset;H.offset=0;If=H.size;H.size=0;tf=H.state;H.state=1;dg=H.stride;H.stride=0;Sf=H.type;H.type=W.dtype;Tf=H.w;H.w=0;qg=H.x;H.x=0;df=H.y;H.y=0;af=H.z;H.z=0;Nf=R.buffer;R.buffer=n;Of=R.divisor;
R.divisor=0;eg=R.normalized;R.normalized=!1;fg=R.offset;R.offset=0;gg=R.size;R.size=0;hg=R.state;R.state=1;ig=R.stride;R.stride=0;Wf=R.type;R.type=n.dtype;Uf=R.w;R.w=0;Xf=R.x;R.x=0;Yf=R.y;R.y=0;Zf=R.z;R.z=0;jg=f.buffer;f.buffer=E;rg=f.divisor;f.divisor=0;sg=f.normalized;f.normalized=!1;tg=f.offset;f.offset=0;ug=f.size;f.size=0;vg=f.state;f.state=1;wg=f.stride;f.stride=0;xg=f.type;f.type=E.dtype;yg=f.w;f.w=0;zg=f.x;f.x=0;Ag=f.y;f.y=0;Bg=f.z;f.z=0;ef=m.buffer;m.buffer=r;bf=m.divisor;m.divisor=0;Pf=
m.normalized;m.normalized=!1;Qf=m.offset;m.offset=0;kg=m.size;m.size=0;lg=m.state;m.state=1;mg=m.stride;m.stride=0;ng=m.type;m.type=r.dtype;og=m.w;m.w=0;$f=m.x;m.x=0;Vf=m.y;m.y=0;ag=m.z;m.z=0;bg=Q.buffer;Q.buffer=C;cg=Q.divisor;Q.divisor=0;pg=Q.normalized;Q.normalized=!1;Cg=Q.offset;Q.offset=0;Dg=Q.size;Q.size=0;Eg=Q.state;Q.state=1;Fg=Q.stride;Q.stride=0;Gg=Q.type;Q.type=C.dtype;Hg=Q.w;Q.w=0;Ig=Q.x;Q.x=0;Jg=Q.y;Q.y=0;Kg=Q.z;Q.z=0;Lg=ja.buffer;ja.buffer=S;Mg=ja.divisor;ja.divisor=0;Ng=ja.normalized;
ja.normalized=!1;Og=ja.offset;ja.offset=0;Pg=ja.size;ja.size=0;Qg=ja.state;ja.state=1;Rg=ja.stride;ja.stride=0;Sg=ja.type;ja.type=S.dtype;Tg=ja.w;ja.w=0;Ug=ja.x;ja.x=0;Vg=ja.y;ja.y=0;Wg=ja.z;ja.z=0;Xg=ma.buffer;ma.buffer=D;Yg=ma.divisor;ma.divisor=0;Zg=ma.normalized;ma.normalized=!1;$g=ma.offset;ma.offset=0;ah=ma.size;ma.size=0;bh=ma.state;ma.state=1;ch=ma.stride;ma.stride=0;dh=ma.type;ma.type=D.dtype;eh=ma.w;ma.w=0;fh=ma.x;ma.x=0;gh=ma.y;ma.y=0;hh=ma.z;ma.z=0;ih=v.buffer;v.buffer=u;jh=v.divisor;
v.divisor=0;kh=v.normalized;v.normalized=!1;lh=v.offset;v.offset=0;mh=v.size;v.size=0;nh=v.state;v.state=1;oh=v.stride;v.stride=0;ph=v.type;v.type=u.dtype;qh=v.w;v.w=0;rh=v.x;v.x=0;sh=v.y;v.y=0;th=v.z;v.z=0;uh=Da.vert;Da.vert=2;vh=Da.frag;Da.frag=1;ba.dirty=!0;b(x,a,g);x.viewportWidth=G;x.viewportHeight=F;Ie[0]=aa;Ie[1]=N;Ie[2]=K;Ie[3]=J;xb[0]=I;xb[1]=V;xb[2]=T;xb[3]=Y;rc.blend_enable=X;Yd[0]=fa;Yd[1]=ia;Vd[0]=Z;Vd[1]=ga;Vd[2]=da;Vd[3]=ea;rc.cull_enable=ha;rc.cull_face=Ea;rc.depth_enable=ua;rc.depth_func=
Ha;rc.depth_mask=ra;fe[0]=nc;fe[1]=$a;rc.dither=qa;rc.lineWidth=Sa;$e[0]=Bb;$e[1]=Rc;$e[2]=Db;$e[3]=za;rc.scissor_enable=Wa;ba.profile=Ga;O.offset=Xb;O.count=Mc;O.primitive=sa;U[24]=hc;U[3]=zc;U[5]=Ia;U[7]=Oa;U[9]=vd;U[4]=cd;U[6]=cb;U[8]=Vc;U[10]=Ad;U[23]=Jc;U[12]=xd;U[14]=Sb;U[16]=sb;U[18]=wb;U[11]=yd;U[13]=Lc;U[15]=sd;U[17]=pd;U[22]=Aa;U[25]=Ze;U[26]=Fb;U[19]=ce;U[20]=mf;U[21]=Qd;t.buffer=$b;t.divisor=We;t.normalized=Za;t.offset=Pa;t.size=jc;t.state=Jd;t.stride=Zd;t.type=se;t.w=Qa;t.x=ib;t.y=Sd;
t.z=te;w.buffer=Ec;w.divisor=Ub;w.normalized=Ua;w.offset=Fc;w.size=md;w.state=bc;w.stride=zd;w.type=qc;w.w=ue;w.x=Ve;w.y=ne;w.z=ee;k.buffer=be;k.divisor=pe;k.normalized=$d;k.offset=ge;k.size=yc;k.state=Wc;k.stride=qe;k.type=ke;k.w=Fd;k.x=Ld;k.y=Md;k.z=Nd;ca.buffer=he;ca.divisor=Te;ca.normalized=xe;ca.offset=oe;ca.size=Ne;ca.state=Oe;ca.stride=Ke;ca.type=re;ca.w=Be;ca.x=De;ca.y=Ee;ca.z=Fe;L.buffer=Ce;L.divisor=Id;L.normalized=Rd;L.offset=Xd;L.size=ae;L.state=Ge;L.stride=Bd;L.type=Od;L.w=ye;L.x=He;
L.y=ff;L.z=Ye;P.buffer=Pe;P.divisor=Le;P.normalized=Xe;P.offset=Ue;P.size=Qe;P.state=Re;P.stride=Pd;P.type=Ud;P.w=Se;P.x=gf;P.y=lf;P.z=cf;A.buffer=hf;A.divisor=jf;A.normalized=kf;A.offset=qf;A.size=nf;A.state=rf;A.stride=Bf;A.type=Cf;A.w=Me;A.x=ze;A.y=of;A.z=pf;ka.buffer=Df;ka.divisor=Hf;ka.normalized=Af;ka.offset=Ef;ka.size=Ff;ka.state=wf;ka.stride=xf;ka.type=uf;ka.w=yf;ka.x=zf;ka.y=Jf;ka.z=Kf;H.buffer=Lf;H.divisor=Mf;H.normalized=sf;H.offset=Rf;H.size=If;H.state=tf;H.stride=dg;H.type=Sf;H.w=Tf;
H.x=qg;H.y=df;H.z=af;R.buffer=Nf;R.divisor=Of;R.normalized=eg;R.offset=fg;R.size=gg;R.state=hg;R.stride=ig;R.type=Wf;R.w=Uf;R.x=Xf;R.y=Yf;R.z=Zf;f.buffer=jg;f.divisor=rg;f.normalized=sg;f.offset=tg;f.size=ug;f.state=vg;f.stride=wg;f.type=xg;f.w=yg;f.x=zg;f.y=Ag;f.z=Bg;m.buffer=ef;m.divisor=bf;m.normalized=Pf;m.offset=Qf;m.size=kg;m.state=lg;m.stride=mg;m.type=ng;m.w=og;m.x=$f;m.y=Vf;m.z=ag;Q.buffer=bg;Q.divisor=cg;Q.normalized=pg;Q.offset=Cg;Q.size=Dg;Q.state=Eg;Q.stride=Fg;Q.type=Gg;Q.w=Hg;Q.x=Ig;
Q.y=Jg;Q.z=Kg;ja.buffer=Lg;ja.divisor=Mg;ja.normalized=Ng;ja.offset=Og;ja.size=Pg;ja.state=Qg;ja.stride=Rg;ja.type=Sg;ja.w=Tg;ja.x=Ug;ja.y=Vg;ja.z=Wg;ma.buffer=Xg;ma.divisor=Yg;ma.normalized=Zg;ma.offset=$g;ma.size=ah;ma.state=bh;ma.stride=ch;ma.type=dh;ma.w=eh;ma.x=fh;ma.y=gh;ma.z=hh;v.buffer=ih;v.divisor=jh;v.normalized=kh;v.offset=lh;v.size=mh;v.state=nh;v.stride=oh;v.type=ph;v.w=qh;v.x=rh;v.y=sh;v.z=th;Da.vert=uh;Da.frag=vh;ba.dirty=!0}}},$1:function(a,b){var g,h,d,c,p,e,l,u,W,n,E,r,C,S,D,na,
y,I,v,t,w,k,ca,L,P,A,ka,H,R,f;g=a.attributes;h=a.current;d=a.framebuffer;c=a.gl;p=a.next;e=a.vao;l=p.blend_color;u=h.blend_color;W=p.blend_equation;n=h.blend_equation;E=p.blend_func;r=h.blend_func;C=p.colorMask;S=h.colorMask;D=p.depth_range;na=h.depth_range;y=p.polygonOffset_offset;I=h.polygonOffset_offset;v=p.sample_coverage;t=h.sample_coverage;w=p.scissor_box;k=h.scissor_box;ca=p.stencil_func;L=h.stencil_func;P=p.stencil_opBack;A=h.stencil_opBack;ka=p.stencil_opFront;H=h.stencil_opFront;R=p.viewport;
f=h.viewport;return{poll:function(){var a,b,e,g,gd,qc,la,Pa,Z,K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa;h.dirty=!1;b=p.blend_enable;e=p.cull_enable;g=p.depth_enable;gd=p.dither;qc=p.polygonOffset_enable;la=p.sample_alpha;Pa=p.sample_enable;Z=p.scissor_enable;K=p.stencil_enable;N=p.cull_face;V=h.cull_face;sa=p.depth_func;J=h.depth_func;Ub=p.depth_mask;Za=h.depth_mask;T=p.frontFace;z=h.frontFace;ha=p.lineWidth;da=h.lineWidth;Aa=p.stencil_mask;Qa=h.stencil_mask;a=d.next;a!==d.cur&&(a?c.bindFramebuffer(36160,
a.framebuffer):c.bindFramebuffer(36160,null),d.cur=a);b!==h.blend_enable&&(b?c.enable(3042):c.disable(3042),h.blend_enable=b);e!==h.cull_enable&&(e?c.enable(2884):c.disable(2884),h.cull_enable=e);g!==h.depth_enable&&(g?c.enable(2929):c.disable(2929),h.depth_enable=g);gd!==h.dither&&(gd?c.enable(3024):c.disable(3024),h.dither=gd);qc!==h.polygonOffset_enable&&(qc?c.enable(32823):c.disable(32823),h.polygonOffset_enable=qc);la!==h.sample_alpha&&(la?c.enable(32926):c.disable(32926),h.sample_alpha=la);
Pa!==h.sample_enable&&(Pa?c.enable(32928):c.disable(32928),h.sample_enable=Pa);Z!==h.scissor_enable&&(Z?c.enable(3089):c.disable(3089),h.scissor_enable=Z);K!==h.stencil_enable&&(K?c.enable(2960):c.disable(2960),h.stencil_enable=K);if(l[0]!==u[0]||l[1]!==u[1]||l[2]!==u[2]||l[3]!==u[3])c.blendColor(l[0],l[1],l[2],l[3]),u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3];if(W[0]!==n[0]||W[1]!==n[1])c.blendEquationSeparate(W[0],W[1]),n[0]=W[0],n[1]=W[1];if(E[0]!==r[0]||E[1]!==r[1]||E[2]!==r[2]||E[3]!==r[3])c.blendFuncSeparate(E[0],
E[1],E[2],E[3]),r[0]=E[0],r[1]=E[1],r[2]=E[2],r[3]=E[3];if(C[0]!==S[0]||C[1]!==S[1]||C[2]!==S[2]||C[3]!==S[3])c.colorMask(C[0],C[1],C[2],C[3]),S[0]=C[0],S[1]=C[1],S[2]=C[2],S[3]=C[3];N!==V&&(c.cullFace(N),h.cull_face=N);sa!==J&&(c.depthFunc(sa),h.depth_func=sa);Ub!==Za&&(c.depthMask(Ub),h.depth_mask=Ub);if(D[0]!==na[0]||D[1]!==na[1])c.depthRange(D[0],D[1]),na[0]=D[0],na[1]=D[1];T!==z&&(c.frontFace(T),h.frontFace=T);ha!==da&&(c.lineWidth(ha),h.lineWidth=ha);if(y[0]!==I[0]||y[1]!==I[1])c.polygonOffset(y[0],
y[1]),I[0]=y[0],I[1]=y[1];if(v[0]!==t[0]||v[1]!==t[1])c.sampleCoverage(v[0],v[1]),t[0]=v[0],t[1]=v[1];if(w[0]!==k[0]||w[1]!==k[1]||w[2]!==k[2]||w[3]!==k[3])c.scissor(w[0],w[1],w[2],w[3]),k[0]=w[0],k[1]=w[1],k[2]=w[2],k[3]=w[3];if(ca[0]!==L[0]||ca[1]!==L[1]||ca[2]!==L[2])c.stencilFunc(ca[0],ca[1],ca[2]),L[0]=ca[0],L[1]=ca[1],L[2]=ca[2];Aa!==Qa&&(c.stencilMask(Aa),h.stencil_mask=Aa);if(P[0]!==A[0]||P[1]!==A[1]||P[2]!==A[2]||P[3]!==A[3])c.stencilOpSeparate(P[0],P[1],P[2],P[3]),A[0]=P[0],A[1]=P[1],A[2]=
P[2],A[3]=P[3];if(ka[0]!==H[0]||ka[1]!==H[1]||ka[2]!==H[2]||ka[3]!==H[3])c.stencilOpSeparate(ka[0],ka[1],ka[2],ka[3]),H[0]=ka[0],H[1]=ka[1],H[2]=ka[2],H[3]=ka[3];if(R[0]!==f[0]||R[1]!==f[1]||R[2]!==f[2]||R[3]!==f[3])c.viewport(R[0],R[1],R[2],R[3]),f[0]=R[0],f[1]=R[1],f[2]=R[2],f[3]=R[3]},refresh:function(){var a,Q,ja,ma,gd,qc,la,Pa,Z,K,N,V,sa,J,Ub,Za;h.dirty=!1;Q=p.blend_enable;ja=p.cull_enable;ma=p.depth_enable;gd=p.dither;qc=p.polygonOffset_enable;la=p.sample_alpha;Pa=p.sample_enable;Z=p.scissor_enable;
K=p.stencil_enable;N=p.cull_face;V=p.depth_func;sa=p.depth_mask;J=p.frontFace;Ub=p.lineWidth;Za=p.stencil_mask;(a=d.next)?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null);d.cur=a;a=g[0];a.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(0,a.divisor);a=g[1];a.buffer?(c.enableVertexAttribArray(1),
c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(1,a.divisor);a=g[2];a.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(2),c.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(2,a.divisor);
a=g[3];a.buffer?(c.enableVertexAttribArray(3),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(3,a.divisor);a=g[4];a.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=
null);b.vertexAttribDivisorANGLE(4,a.divisor);a=g[5];a.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(5,a.divisor);a=g[6];a.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(6),
c.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(6,a.divisor);a=g[7];a.buffer?(c.enableVertexAttribArray(7),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(7,a.divisor);a=g[8];a.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,
a.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(8,a.divisor);a=g[9];a.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(9,a.divisor);a=g[10];a.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(10,a.divisor);a=g[11];a.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(11),c.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(11,a.divisor);a=g[12];a.buffer?(c.enableVertexAttribArray(12),
c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(12,a.divisor);a=g[13];a.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(13,
a.divisor);a=g[14];a.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(14,a.divisor);a=g[15];a.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(15),c.vertexAttrib4f(15,a.x,
a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(15,a.divisor);e.currentVAO=null;e.setVAO(e.targetVAO);Q?c.enable(3042):c.disable(3042);h.blend_enable=Q;ja?c.enable(2884):c.disable(2884);h.cull_enable=ja;ma?c.enable(2929):c.disable(2929);h.depth_enable=ma;gd?c.enable(3024):c.disable(3024);h.dither=gd;qc?c.enable(32823):c.disable(32823);h.polygonOffset_enable=qc;la?c.enable(32926):c.disable(32926);h.sample_alpha=la;Pa?c.enable(32928):c.disable(32928);h.sample_enable=Pa;Z?c.enable(3089):c.disable(3089);
h.scissor_enable=Z;K?c.enable(2960):c.disable(2960);h.stencil_enable=K;c.blendColor(l[0],l[1],l[2],l[3]);u[0]=l[0];u[1]=l[1];u[2]=l[2];u[3]=l[3];c.blendEquationSeparate(W[0],W[1]);n[0]=W[0];n[1]=W[1];c.blendFuncSeparate(E[0],E[1],E[2],E[3]);r[0]=E[0];r[1]=E[1];r[2]=E[2];r[3]=E[3];c.colorMask(C[0],C[1],C[2],C[3]);S[0]=C[0];S[1]=C[1];S[2]=C[2];S[3]=C[3];c.cullFace(N);h.cull_face=N;c.depthFunc(V);h.depth_func=V;c.depthMask(sa);h.depth_mask=sa;c.depthRange(D[0],D[1]);na[0]=D[0];na[1]=D[1];c.frontFace(J);
h.frontFace=J;c.lineWidth(Ub);h.lineWidth=Ub;c.polygonOffset(y[0],y[1]);I[0]=y[0];I[1]=y[1];c.sampleCoverage(v[0],v[1]);t[0]=v[0];t[1]=v[1];c.scissor(w[0],w[1],w[2],w[3]);k[0]=w[0];k[1]=w[1];k[2]=w[2];k[3]=w[3];c.stencilFunc(ca[0],ca[1],ca[2]);L[0]=ca[0];L[1]=ca[1];L[2]=ca[2];c.stencilMask(Za);h.stencil_mask=Za;c.stencilOpSeparate(P[0],P[1],P[2],P[3]);A[0]=P[0];A[1]=P[1];A[2]=P[2];A[3]=P[3];c.stencilOpSeparate(ka[0],ka[1],ka[2],ka[3]);H[0]=ka[0];H[1]=ka[1];H[2]=ka[2];H[3]=ka[3];c.viewport(R[0],R[1],
R[2],R[3]);f[0]=R[0];f[1]=R[1];f[2]=R[2];f[3]=R[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,b,g,h,d,c,p,e,l,u,W,n,E,r,C,S,D,na,y,I,v,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,gd,qc,la,Pa,Z,K,N,V,sa,J,Ub,Za){var T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va,$b,nc,jc,vd,wc,aa,M,ia,Fa,sb,Lc,Fc,F,B,ga,ua,X,fa,qa,G,x,ba,O,Ea,Ha,q,rc,Da,U,Db,xb;T=a.attributes;z=a.buffer;ha=a.context;da=a.current;Aa=a.draw;
Qa=a.elements;bc=a.extensions;Ua=a.framebuffer;Y=a.gl;ib=a.isBufferArgs;ea=a.next;va=a.shader;$b=a.uniforms;nc=a.vao;jc=ea.blend_color;vd=da.blend_color;wc=ea.blend_equation;aa=da.blend_equation;M=ea.blend_func;ia=da.blend_func;Fa=ea.colorMask;sb=da.colorMask;Lc=ea.depth_range;Fc=da.depth_range;F=ea.polygonOffset_offset;B=da.polygonOffset_offset;ga=ea.sample_coverage;ua=da.sample_coverage;X=ea.scissor_box;fa=da.scissor_box;qa=ea.stencil_func;G=da.stencil_func;x=ea.stencil_opBack;ba=da.stencil_opBack;
O=ea.stencil_opFront;Ea=da.stencil_opFront;Ha=ea.viewport;q=da.viewport;rc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Da={};Da.buffer=g;Da.divisor=1;U={};U.buffer=h;U.divisor=1;Db={};Db.buffer=d;Db.divisor=1;xb={};xb.buffer=c;xb.divisor=1;return{batch:function(a,c){var e,d,g,h,k,l;e=Ua.next;e!==Ua.cur&&(e?Y.bindFramebuffer(36160,e.framebuffer):Y.bindFramebuffer(36160,null),Ua.cur=e);if(da.dirty){var p,t,w,M,D,C,u,W,S,pa,y,I,P,L,X,na,ca,Ha,v,oa,va,
Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,wc;p=ea.dither;p!==da.dither&&(p?Y.enable(3024):Y.disable(3024),da.dither=p);t=ea.depth_func;t!==da.depth_func&&(Y.depthFunc(t),da.depth_func=t);w=Lc[0];M=Lc[1];if(w!==Fc[0]||M!==Fc[1])Y.depthRange(w,M),Fc[0]=w,Fc[1]=M;D=ea.depth_mask;D!==da.depth_mask&&(Y.depthMask(D),da.depth_mask=D);C=Fa[0];u=Fa[1];W=Fa[2];S=Fa[3];if(C!==sb[0]||u!==sb[1]||W!==sb[2]||S!==sb[3])Y.colorMask(C,u,W,S),sb[0]=C,sb[1]=u,sb[2]=W,sb[3]=S;pa=ea.cull_enable;pa!==da.cull_enable&&(pa?Y.enable(2884):
Y.disable(2884),da.cull_enable=pa);y=ea.cull_face;y!==da.cull_face&&(Y.cullFace(y),da.cull_face=y);I=ea.frontFace;I!==da.frontFace&&(Y.frontFace(I),da.frontFace=I);P=ea.lineWidth;P!==da.lineWidth&&(Y.lineWidth(P),da.lineWidth=P);L=ea.polygonOffset_enable;L!==da.polygonOffset_enable&&(L?Y.enable(32823):Y.disable(32823),da.polygonOffset_enable=L);X=F[0];na=F[1];if(X!==B[0]||na!==B[1])Y.polygonOffset(X,na),B[0]=X,B[1]=na;ca=ea.sample_alpha;ca!==da.sample_alpha&&(ca?Y.enable(32926):Y.disable(32926),da.sample_alpha=
ca);Ha=ea.sample_enable;Ha!==da.sample_enable&&(Ha?Y.enable(32928):Y.disable(32928),da.sample_enable=Ha);v=ga[0];oa=ga[1];if(v!==ua[0]||oa!==ua[1])Y.sampleCoverage(v,oa),ua[0]=v,ua[1]=oa;va=ea.stencil_enable;va!==da.stencil_enable&&(va?Y.enable(2960):Y.disable(2960),da.stencil_enable=va);Rc=ea.stencil_mask;Rc!==da.stencil_mask&&(Y.stencilMask(Rc),da.stencil_mask=Rc);Mc=qa[0];oc=qa[1];$a=qa[2];if(Mc!==G[0]||oc!==G[1]||$a!==G[2])Y.stencilFunc(Mc,oc,$a),G[0]=Mc,G[1]=oc,G[2]=$a;hc=O[0];Bb=O[1];mc=O[2];
Sa=O[3];if(hc!==Ea[0]||Bb!==Ea[1]||mc!==Ea[2]||Sa!==Ea[3])Y.stencilOpSeparate(hc,Bb,mc,Sa),Ea[0]=hc,Ea[1]=Bb,Ea[2]=mc,Ea[3]=Sa;Jc=x[0];Xb=x[1];Zc=x[2];wc=x[3];if(Jc!==ba[0]||Xb!==ba[1]||Zc!==ba[2]||wc!==ba[3])Y.stencilOpSeparate(Jc,Xb,Zc,wc),ba[0]=Jc,ba[1]=Xb,ba[2]=Zc,ba[3]=wc}Y.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;Y.enable(3042);da.blend_enable=!0;Y.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;Y.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;Y.disable(2929);
da.depth_enable=!1;Y.enable(3089);da.scissor_enable=!0;if(d=da.profile)g=performance.now(),b.count+=c;Y.useProgram(A.program);h=bc.angle_instanced_arrays;var od,sc,Vb,Gc,Sc,Jb,zc,Wa;nc.setVAO(null);od=gd.location;sc=T[od];sc.buffer||Y.enableVertexAttribArray(od);if(5126!==sc.type||2!==sc.size||sc.buffer!==n||!1!==sc.normalized||0!==sc.offset||24!==sc.stride)Y.bindBuffer(34962,n.buffer),Y.vertexAttribPointer(od,2,5126,!1,24,0),sc.type=5126,sc.size=2,sc.buffer=n,sc.normalized=!1,sc.offset=0,sc.stride=
24;0!==sc.divisor&&(h.vertexAttribDivisorANGLE(od,0),sc.divisor=0);Vb=la.location;Gc=T[Vb];Gc.buffer||Y.enableVertexAttribArray(Vb);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==E||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)Y.bindBuffer(34962,E.buffer),Y.vertexAttribPointer(Vb,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=E,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(h.vertexAttribDivisorANGLE(Vb,0),Gc.divisor=0);Sc=Q.location;Jb=T[Sc];Jb.buffer||Y.enableVertexAttribArray(Sc);
if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==r||!1!==Jb.normalized||16!==Jb.offset||24!==Jb.stride)Y.bindBuffer(34962,r.buffer),Y.vertexAttribPointer(Sc,2,5126,!1,24,16),Jb.type=5126,Jb.size=2,Jb.buffer=r,Jb.normalized=!1,Jb.offset=16,Jb.stride=24;0!==Jb.divisor&&(h.vertexAttribDivisorANGLE(Sc,0),Jb.divisor=0);(zc=Aa.elements)?Y.bindBuffer(34963,zc.buffer.buffer):nc.currentVAO&&(zc=Qa.getElements(nc.currentVAO.elements))&&Y.bindBuffer(34963,zc.buffer.buffer);Wa=Aa.offset;for(k=0;k<c;++k){l=a[k];var ra,
pd,Yb,ab,Sb,cb,Ac,Nb,$b,ic,Ob,jc,Pb,Ma,nb,tb,gb,Na,lc,Qb,xa,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,vf,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,Gf,Wd,je,Je,me,Hd,Ed,dd,Ec;ra=l.viewport;pd=ra.x|0;Yb=ra.y|0;ab="width"in ra?ra.width|0:ha.framebufferWidth-pd;Sb="height"in ra?ra.height|0:ha.framebufferHeight-Yb;cb=ha.viewportWidth;
ha.viewportWidth=ab;Ac=ha.viewportHeight;ha.viewportHeight=Sb;Y.viewport(pd,Yb,ab,Sb);q[0]=pd;q[1]=Yb;q[2]=ab;q[3]=Sb;Nb=l.viewport;$b=Nb.x|0;ic=Nb.y|0;Ob="width"in Nb?Nb.width|0:ha.framebufferWidth-$b;jc="height"in Nb?Nb.height|0:ha.framebufferHeight-ic;Y.scissor($b,ic,Ob,jc);fa[0]=$b;fa[1]=ic;fa[2]=Ob;fa[3]=jc;Pb=ka.call(this,ha,l,k);Db.offset=Pb;Ma=!1;nb=null;tb=0;gb=!1;lc=Na=0;Qb=1;xa=0;db=5126;jb=ac=Hc=fc=0;ib(Db)?(Ma=!0,nb=z.createStream(34962,Db),db=nb.dtype):(nb=z.getBuffer(Db))?db=nb.dtype:
"constant"in Db?(Qb=2,"number"===typeof Db.constant?(Hc=Db.constant,ac=jb=fc=0):(Hc=0<Db.constant.length?Db.constant[0]:0,ac=1<Db.constant.length?Db.constant[1]:0,jb=2<Db.constant.length?Db.constant[2]:0,fc=3<Db.constant.length?Db.constant[3]:0)):(nb=ib(Db.buffer)?z.createStream(34962,Db.buffer):z.getBuffer(Db.buffer),db="type"in Db?rc[Db.type]:nb.dtype,gb=!!Db.normalized,lc=Db.size|0,Na=Db.offset|0,xa=Db.stride|0,tb=Db.divisor|0);kb=K.location;ta=T[kb];if(1===Qb){ta.buffer||Y.enableVertexAttribArray(kb);
ob=lc||2;if(ta.type!==db||ta.size!==ob||ta.buffer!==nb||ta.normalized!==gb||ta.offset!==Na||ta.stride!==xa)Y.bindBuffer(34962,nb.buffer),Y.vertexAttribPointer(kb,ob,db,gb,xa,Na),ta.type=db,ta.size=ob,ta.buffer=nb,ta.normalized=gb,ta.offset=Na,ta.stride=xa;ta.divisor!==tb&&(h.vertexAttribDivisorANGLE(kb,tb),ta.divisor=tb)}else if(ta.buffer&&(Y.disableVertexAttribArray(kb),ta.buffer=null),ta.x!==Hc||ta.y!==ac||ta.z!==jb||ta.w!==fc)Y.vertexAttrib4f(kb,Hc,ac,jb,fc),ta.x=Hc,ta.y=ac,ta.z=jb,ta.w=fc;wa=
H.call(this,ha,l,k);xb.offset=wa;Ta=!1;bb=null;Ba=0;eb=!1;zb=Ka=0;yb=1;Ra=0;Kc=5126;ya=Rb=Gb=Eb=0;ib(xb)?(Ta=!0,bb=z.createStream(34962,xb),Kc=bb.dtype):(bb=z.getBuffer(xb))?Kc=bb.dtype:"constant"in xb?(yb=2,"number"===typeof xb.constant?(Gb=xb.constant,Rb=ya=Eb=0):(Gb=0<xb.constant.length?xb.constant[0]:0,Rb=1<xb.constant.length?xb.constant[1]:0,ya=2<xb.constant.length?xb.constant[2]:0,Eb=3<xb.constant.length?xb.constant[3]:0)):(bb=ib(xb.buffer)?z.createStream(34962,xb.buffer):z.getBuffer(xb.buffer),
Kc="type"in xb?rc[xb.type]:bb.dtype,eb=!!xb.normalized,zb=xb.size|0,Ka=xb.offset|0,Ra=xb.stride|0,Ba=xb.divisor|0);jd=N.location;La=T[jd];if(1===yb){La.buffer||Y.enableVertexAttribArray(jd);Kb=zb||2;if(La.type!==Kc||La.size!==Kb||La.buffer!==bb||La.normalized!==eb||La.offset!==Ka||La.stride!==Ra)Y.bindBuffer(34962,bb.buffer),Y.vertexAttribPointer(jd,Kb,Kc,eb,Ra,Ka),La.type=Kc,La.size=Kb,La.buffer=bb,La.normalized=eb,La.offset=Ka,La.stride=Ra;La.divisor!==Ba&&(h.vertexAttribDivisorANGLE(jd,Ba),La.divisor=
Ba)}else if(La.buffer&&(Y.disableVertexAttribArray(jd),La.buffer=null),La.x!==Gb||La.y!==Rb||La.z!==ya||La.w!==Eb)Y.vertexAttrib4f(jd,Gb,Rb,ya,Eb),La.x=Gb,La.y=Rb,La.z=ya,La.w=Eb;fb=R.call(this,ha,l,k);U.offset=fb;hb=!1;za=null;cc=0;Ga=!1;qb=pb=0;Xa=1;Ya=0;kc=5126;Hb=Va=tc=vc=0;ib(U)?(hb=!0,za=z.createStream(34962,U),kc=za.dtype):(za=z.getBuffer(U))?kc=za.dtype:"constant"in U?(Xa=2,"number"===typeof U.constant?(tc=U.constant,Va=Hb=vc=0):(tc=0<U.constant.length?U.constant[0]:0,Va=1<U.constant.length?
U.constant[1]:0,Hb=2<U.constant.length?U.constant[2]:0,vc=3<U.constant.length?U.constant[3]:0)):(za=ib(U.buffer)?z.createStream(34962,U.buffer):z.getBuffer(U.buffer),kc="type"in U?rc[U.type]:za.dtype,Ga=!!U.normalized,qb=U.size|0,pb=U.offset|0,Ya=U.stride|0,cc=U.divisor|0);Cc=qc.location;Ia=T[Cc];if(1===Xa){Ia.buffer||Y.enableVertexAttribArray(Cc);xc=qb||4;if(Ia.type!==kc||Ia.size!==xc||Ia.buffer!==za||Ia.normalized!==Ga||Ia.offset!==pb||Ia.stride!==Ya)Y.bindBuffer(34962,za.buffer),Y.vertexAttribPointer(Cc,
xc,kc,Ga,Ya,pb),Ia.type=kc,Ia.size=xc,Ia.buffer=za,Ia.normalized=Ga,Ia.offset=pb,Ia.stride=Ya;Ia.divisor!==cc&&(h.vertexAttribDivisorANGLE(Cc,cc),Ia.divisor=cc)}else if(Ia.buffer&&(Y.disableVertexAttribArray(Cc),Ia.buffer=null),Ia.x!==tc||Ia.y!==Va||Ia.z!==Hb||Ia.w!==vc)Y.vertexAttrib4f(Cc,tc,Va,Hb,vc),Ia.x=tc,Ia.y=Va,Ia.z=Hb,Ia.w=vc;Oa=f.call(this,ha,l,k);Da.offset=Oa;Ca=!1;lb=null;ub=0;Ab=!1;uc=rb=0;vb=1;kd=0;pc=5126;fd=ed=Nc=Ae=0;ib(Da)?(Ca=!0,lb=z.createStream(34962,Da),pc=lb.dtype):(lb=z.getBuffer(Da))?
pc=lb.dtype:"constant"in Da?(vb=2,"number"===typeof Da.constant?(Nc=Da.constant,ed=fd=Ae=0):(Nc=0<Da.constant.length?Da.constant[0]:0,ed=1<Da.constant.length?Da.constant[1]:0,fd=2<Da.constant.length?Da.constant[2]:0,Ae=3<Da.constant.length?Da.constant[3]:0)):(lb=ib(Da.buffer)?z.createStream(34962,Da.buffer):z.getBuffer(Da.buffer),pc="type"in Da?rc[Da.type]:lb.dtype,Ab=!!Da.normalized,uc=Da.size|0,rb=Da.offset|0,kd=Da.stride|0,ub=Da.divisor|0);Tb=ma.location;Zb=T[Tb];if(1===vb){Zb.buffer||Y.enableVertexAttribArray(Tb);
Lb=uc||4;if(Zb.type!==pc||Zb.size!==Lb||Zb.buffer!==lb||Zb.normalized!==Ab||Zb.offset!==rb||Zb.stride!==kd)Y.bindBuffer(34962,lb.buffer),Y.vertexAttribPointer(Tb,Lb,pc,Ab,kd,rb),Zb.type=pc,Zb.size=Lb,Zb.buffer=lb,Zb.normalized=Ab,Zb.offset=rb,Zb.stride=kd;Zb.divisor!==ub&&(h.vertexAttribDivisorANGLE(Tb,ub),Zb.divisor=ub)}else if(Zb.buffer&&(Y.disableVertexAttribArray(Tb),Zb.buffer=null),Zb.x!==Nc||Zb.y!==ed||Zb.z!==fd||Zb.w!==Ae)Y.vertexAttrib4f(Tb,Nc,ed,fd,Ae),Zb.x=Nc,Zb.y=ed,Zb.z=fd,Zb.w=Ae;Ja=
m.call(this,ha,l,k);Wb=Ja[0];wb=Ja[1];Mb=Ja[2];gc=Ja[3];k&&mb===Wb&&Ib===wb&&dc===Mb&&vf===gc||(mb=Wb,Ib=wb,dc=Mb,vf=gc,Y.uniform4f(Za.location,Wb,wb,Mb,gc));Gd=l.lineWidth;k&&Bc===Gd||(Bc=Gd,Y.uniform1f(Pa.location,Gd));Dc=l.capSize;k&&Oc===Dc||(Oc=Dc,Y.uniform1f(ja.location,Dc));$c=l.scale;Tc=$c[0];Fb=$c[1];k&&Pc===Tc&&Cb===Fb||(Pc=Tc,Cb=Fb,Y.uniform2f(V.location,Tc,Fb));Qc=l.scaleFract;Ic=Qc[0];ec=Qc[1];k&&Uc===Ic&&Xc===ec||(Uc=Ic,Xc=ec,Y.uniform2f(sa.location,Ic,ec));bd=l.translate;qd=bd[0];Yc=
bd[1];k&&ld===qd&&Gf===Yc||(ld=qd,Gf=Yc,Y.uniform2f(J.location,qd,Yc));Wd=l.translateFract;je=Wd[0];me=Wd[1];k&&Je===je&&Hd===me||(Je=je,Hd=me,Y.uniform2f(Ub.location,je,me));Ed=l.opacity;k&&dd===Ed||(dd=Ed,Y.uniform1f(Z.location,Ed));Ec=l.count;0<Ec?zc?h.drawElementsInstancedANGLE(4,36,zc.type,Wa<<(zc.type-5121>>1),Ec):h.drawArraysInstancedANGLE(4,Wa,36,Ec):0>Ec&&(zc?Y.drawElements(4,36,zc.type,Wa<<(zc.type-5121>>1)):Y.drawArrays(4,Wa,36));ha.viewportWidth=cb;ha.viewportHeight=Ac;Ma&&z.destroyStream(nb);
Ta&&z.destroyStream(bb);hb&&z.destroyStream(za);Ca&&z.destroyStream(lb)}da.dirty=!0;nc.setVAO(null);d&&(b.cpuTime+=performance.now()-g)},draw:function(a){var c,d,f,g,h,k,m,t,w,A,M,D,H,S,y,I,P,L,X,na,ca,Ha,R,v,ka,oa,va,wc,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,$b,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,jc,ic,Ob,xa,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc;c=Ua.next;c!==Ua.cur&&(c?Y.bindFramebuffer(36160,c.framebuffer):Y.bindFramebuffer(36160,
null),Ua.cur=c);if(da.dirty){var Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb;Ga=ea.dither;Ga!==da.dither&&(Ga?Y.enable(3024):Y.disable(3024),da.dither=Ga);pb=ea.depth_func;pb!==da.depth_func&&(Y.depthFunc(pb),da.depth_func=pb);qb=Lc[0];Xa=Lc[1];if(qb!==Fc[0]||Xa!==Fc[1])Y.depthRange(qb,Xa),Fc[0]=qb,Fc[1]=Xa;Ya=ea.depth_mask;Ya!==da.depth_mask&&(Y.depthMask(Ya),da.depth_mask=Ya);kc=Fa[0];vc=Fa[1];tc=Fa[2];Va=Fa[3];if(kc!==sb[0]||vc!==sb[1]||tc!==
sb[2]||Va!==sb[3])Y.colorMask(kc,vc,tc,Va),sb[0]=kc,sb[1]=vc,sb[2]=tc,sb[3]=Va;Hb=ea.cull_enable;Hb!==da.cull_enable&&(Hb?Y.enable(2884):Y.disable(2884),da.cull_enable=Hb);Cc=ea.cull_face;Cc!==da.cull_face&&(Y.cullFace(Cc),da.cull_face=Cc);Ia=ea.frontFace;Ia!==da.frontFace&&(Y.frontFace(Ia),da.frontFace=Ia);xc=ea.lineWidth;xc!==da.lineWidth&&(Y.lineWidth(xc),da.lineWidth=xc);Oa=ea.polygonOffset_enable;Oa!==da.polygonOffset_enable&&(Oa?Y.enable(32823):Y.disable(32823),da.polygonOffset_enable=Oa);Ca=
F[0];lb=F[1];if(Ca!==B[0]||lb!==B[1])Y.polygonOffset(Ca,lb),B[0]=Ca,B[1]=lb;ub=ea.sample_alpha;ub!==da.sample_alpha&&(ub?Y.enable(32926):Y.disable(32926),da.sample_alpha=ub);Ab=ea.sample_enable;Ab!==da.sample_enable&&(Ab?Y.enable(32928):Y.disable(32928),da.sample_enable=Ab);rb=ga[0];uc=ga[1];if(rb!==ua[0]||uc!==ua[1])Y.sampleCoverage(rb,uc),ua[0]=rb,ua[1]=uc;vb=ea.stencil_enable;vb!==da.stencil_enable&&(vb?Y.enable(2960):Y.disable(2960),da.stencil_enable=vb);kd=ea.stencil_mask;kd!==da.stencil_mask&&
(Y.stencilMask(kd),da.stencil_mask=kd);pc=qa[0];Ae=qa[1];Nc=qa[2];if(pc!==G[0]||Ae!==G[1]||Nc!==G[2])Y.stencilFunc(pc,Ae,Nc),G[0]=pc,G[1]=Ae,G[2]=Nc;ed=O[0];fd=O[1];Tb=O[2];Zb=O[3];if(ed!==Ea[0]||fd!==Ea[1]||Tb!==Ea[2]||Zb!==Ea[3])Y.stencilOpSeparate(ed,fd,Tb,Zb),Ea[0]=ed,Ea[1]=fd,Ea[2]=Tb,Ea[3]=Zb;Lb=x[0];Ja=x[1];Wb=x[2];mb=x[3];if(Lb!==ba[0]||Ja!==ba[1]||Wb!==ba[2]||mb!==ba[3])Y.stencilOpSeparate(Lb,Ja,Wb,mb),ba[0]=Lb,ba[1]=Ja,ba[2]=Wb,ba[3]=mb}d=a.viewport;f=d.x|0;g=d.y|0;h="width"in d?d.width|
0:ha.framebufferWidth-f;k="height"in d?d.height|0:ha.framebufferHeight-g;m=ha.viewportWidth;ha.viewportWidth=h;t=ha.viewportHeight;ha.viewportHeight=k;Y.viewport(f,g,h,k);q[0]=f;q[1]=g;q[2]=h;q[3]=k;Y.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;Y.enable(3042);da.blend_enable=!0;Y.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;Y.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;Y.disable(2929);da.depth_enable=!1;w=a.viewport;A=w.x|0;M=w.y|0;D="width"in w?w.width|
0:ha.framebufferWidth-A;H="height"in w?w.height|0:ha.framebufferHeight-M;Y.scissor(A,M,D,H);fa[0]=A;fa[1]=M;fa[2]=D;fa[3]=H;Y.enable(3089);da.scissor_enable=!0;if(S=da.profile)y=performance.now(),b.count++;Y.useProgram(p.program);I=bc.angle_instanced_arrays;nc.setVAO(null);P=e.call(this,ha,a,0);Db.offset=P;L=!1;X=null;na=0;ca=!1;R=Ha=0;v=1;ka=0;oa=5126;Mc=Rc=wc=va=0;ib(Db)?(L=!0,X=z.createStream(34962,Db),oa=X.dtype):(X=z.getBuffer(Db))?oa=X.dtype:"constant"in Db?(v=2,"number"===typeof Db.constant?
(wc=Db.constant,Rc=Mc=va=0):(wc=0<Db.constant.length?Db.constant[0]:0,Rc=1<Db.constant.length?Db.constant[1]:0,Mc=2<Db.constant.length?Db.constant[2]:0,va=3<Db.constant.length?Db.constant[3]:0)):(X=ib(Db.buffer)?z.createStream(34962,Db.buffer):z.getBuffer(Db.buffer),oa="type"in Db?rc[Db.type]:X.dtype,ca=!!Db.normalized,R=Db.size|0,Ha=Db.offset|0,ka=Db.stride|0,na=Db.divisor|0);oc=K.location;$a=T[oc];if(1===v){$a.buffer||Y.enableVertexAttribArray(oc);hc=R||2;if($a.type!==oa||$a.size!==hc||$a.buffer!==
X||$a.normalized!==ca||$a.offset!==Ha||$a.stride!==ka)Y.bindBuffer(34962,X.buffer),Y.vertexAttribPointer(oc,hc,oa,ca,ka,Ha),$a.type=oa,$a.size=hc,$a.buffer=X,$a.normalized=ca,$a.offset=Ha,$a.stride=ka;$a.divisor!==na&&(I.vertexAttribDivisorANGLE(oc,na),$a.divisor=na)}else if($a.buffer&&(Y.disableVertexAttribArray(oc),$a.buffer=null),$a.x!==wc||$a.y!==Rc||$a.z!==Mc||$a.w!==va)Y.vertexAttrib4f(oc,wc,Rc,Mc,va),$a.x=wc,$a.y=Rc,$a.z=Mc,$a.w=va;Bb=l.call(this,ha,a,0);xb.offset=Bb;mc=!1;Sa=null;Jc=0;Xb=
!1;$b=Zc=0;od=1;sc=0;Vb=5126;zc=Jb=Sc=Gc=0;ib(xb)?(mc=!0,Sa=z.createStream(34962,xb),Vb=Sa.dtype):(Sa=z.getBuffer(xb))?Vb=Sa.dtype:"constant"in xb?(od=2,"number"===typeof xb.constant?(Sc=xb.constant,Jb=zc=Gc=0):(Sc=0<xb.constant.length?xb.constant[0]:0,Jb=1<xb.constant.length?xb.constant[1]:0,zc=2<xb.constant.length?xb.constant[2]:0,Gc=3<xb.constant.length?xb.constant[3]:0)):(Sa=ib(xb.buffer)?z.createStream(34962,xb.buffer):z.getBuffer(xb.buffer),Vb="type"in xb?rc[xb.type]:Sa.dtype,Xb=!!xb.normalized,
$b=xb.size|0,Zc=xb.offset|0,sc=xb.stride|0,Jc=xb.divisor|0);Wa=N.location;ra=T[Wa];if(1===od){ra.buffer||Y.enableVertexAttribArray(Wa);pd=$b||2;if(ra.type!==Vb||ra.size!==pd||ra.buffer!==Sa||ra.normalized!==Xb||ra.offset!==Zc||ra.stride!==sc)Y.bindBuffer(34962,Sa.buffer),Y.vertexAttribPointer(Wa,pd,Vb,Xb,sc,Zc),ra.type=Vb,ra.size=pd,ra.buffer=Sa,ra.normalized=Xb,ra.offset=Zc,ra.stride=sc;ra.divisor!==Jc&&(I.vertexAttribDivisorANGLE(Wa,Jc),ra.divisor=Jc)}else if(ra.buffer&&(Y.disableVertexAttribArray(Wa),
ra.buffer=null),ra.x!==Sc||ra.y!==Jb||ra.z!==zc||ra.w!==Gc)Y.vertexAttrib4f(Wa,Sc,Jb,zc,Gc),ra.x=Sc,ra.y=Jb,ra.z=zc,ra.w=Gc;Yb=u.call(this,ha,a,0);U.offset=Yb;ab=!1;Sb=null;cb=0;Ac=!1;jc=Nb=0;ic=1;Ob=0;xa=5126;tb=nb=Ma=Pb=0;ib(U)?(ab=!0,Sb=z.createStream(34962,U),xa=Sb.dtype):(Sb=z.getBuffer(U))?xa=Sb.dtype:"constant"in U?(ic=2,"number"===typeof U.constant?(Ma=U.constant,nb=tb=Pb=0):(Ma=0<U.constant.length?U.constant[0]:0,nb=1<U.constant.length?U.constant[1]:0,tb=2<U.constant.length?U.constant[2]:
0,Pb=3<U.constant.length?U.constant[3]:0)):(Sb=ib(U.buffer)?z.createStream(34962,U.buffer):z.getBuffer(U.buffer),xa="type"in U?rc[U.type]:Sb.dtype,Ac=!!U.normalized,jc=U.size|0,Nb=U.offset|0,Ob=U.stride|0,cb=U.divisor|0);gb=qc.location;Na=T[gb];if(1===ic){Na.buffer||Y.enableVertexAttribArray(gb);lc=jc||4;if(Na.type!==xa||Na.size!==lc||Na.buffer!==Sb||Na.normalized!==Ac||Na.offset!==Nb||Na.stride!==Ob)Y.bindBuffer(34962,Sb.buffer),Y.vertexAttribPointer(gb,lc,xa,Ac,Ob,Nb),Na.type=xa,Na.size=lc,Na.buffer=
Sb,Na.normalized=Ac,Na.offset=Nb,Na.stride=Ob;Na.divisor!==cb&&(I.vertexAttribDivisorANGLE(gb,cb),Na.divisor=cb)}else if(Na.buffer&&(Y.disableVertexAttribArray(gb),Na.buffer=null),Na.x!==Ma||Na.y!==nb||Na.z!==tb||Na.w!==Pb)Y.vertexAttrib4f(gb,Ma,nb,tb,Pb),Na.x=Ma,Na.y=nb,Na.z=tb,Na.w=Pb;Qb=W.call(this,ha,a,0);Da.offset=Qb;id=!1;db=null;fc=0;Hc=!1;jb=ac=0;kb=1;ta=0;ob=5126;Ba=bb=Ta=wa=0;ib(Da)?(id=!0,db=z.createStream(34962,Da),ob=db.dtype):(db=z.getBuffer(Da))?ob=db.dtype:"constant"in Da?(kb=2,"number"===
typeof Da.constant?(Ta=Da.constant,bb=Ba=wa=0):(Ta=0<Da.constant.length?Da.constant[0]:0,bb=1<Da.constant.length?Da.constant[1]:0,Ba=2<Da.constant.length?Da.constant[2]:0,wa=3<Da.constant.length?Da.constant[3]:0)):(db=ib(Da.buffer)?z.createStream(34962,Da.buffer):z.getBuffer(Da.buffer),ob="type"in Da?rc[Da.type]:db.dtype,Hc=!!Da.normalized,jb=Da.size|0,ac=Da.offset|0,ta=Da.stride|0,fc=Da.divisor|0);eb=ma.location;Ka=T[eb];if(1===kb){Ka.buffer||Y.enableVertexAttribArray(eb);zb=jb||4;if(Ka.type!==ob||
Ka.size!==zb||Ka.buffer!==db||Ka.normalized!==Hc||Ka.offset!==ac||Ka.stride!==ta)Y.bindBuffer(34962,db.buffer),Y.vertexAttribPointer(eb,zb,ob,Hc,ta,ac),Ka.type=ob,Ka.size=zb,Ka.buffer=db,Ka.normalized=Hc,Ka.offset=ac,Ka.stride=ta;Ka.divisor!==fc&&(I.vertexAttribDivisorANGLE(eb,fc),Ka.divisor=fc)}else if(Ka.buffer&&(Y.disableVertexAttribArray(eb),Ka.buffer=null),Ka.x!==Ta||Ka.y!==bb||Ka.z!==Ba||Ka.w!==wa)Y.vertexAttrib4f(eb,Ta,bb,Ba,wa),Ka.x=Ta,Ka.y=bb,Ka.z=Ba,Ka.w=wa;yb=gd.location;Ra=T[yb];Ra.buffer||
Y.enableVertexAttribArray(yb);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==n||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)Y.bindBuffer(34962,n.buffer),Y.vertexAttribPointer(yb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=n,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(I.vertexAttribDivisorANGLE(yb,0),Ra.divisor=0);Kc=la.location;Eb=T[Kc];Eb.buffer||Y.enableVertexAttribArray(Kc);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==E||!1!==Eb.normalized||8!==Eb.offset||24!==Eb.stride)Y.bindBuffer(34962,
E.buffer),Y.vertexAttribPointer(Kc,2,5126,!1,24,8),Eb.type=5126,Eb.size=2,Eb.buffer=E,Eb.normalized=!1,Eb.offset=8,Eb.stride=24;0!==Eb.divisor&&(I.vertexAttribDivisorANGLE(Kc,0),Eb.divisor=0);Gb=Q.location;Rb=T[Gb];Rb.buffer||Y.enableVertexAttribArray(Gb);if(5126!==Rb.type||2!==Rb.size||Rb.buffer!==r||!1!==Rb.normalized||16!==Rb.offset||24!==Rb.stride)Y.bindBuffer(34962,r.buffer),Y.vertexAttribPointer(Gb,2,5126,!1,24,16),Rb.type=5126,Rb.size=2,Rb.buffer=r,Rb.normalized=!1,Rb.offset=16,Rb.stride=24;
0!==Rb.divisor&&(I.vertexAttribDivisorANGLE(Gb,0),Rb.divisor=0);ya=C.call(this,ha,a,0);Y.uniform4f(Za.location,ya[0],ya[1],ya[2],ya[3]);Y.uniform1f(Pa.location,a.lineWidth);Y.uniform1f(ja.location,a.capSize);jd=a.scale;Y.uniform2f(V.location,jd[0],jd[1]);La=a.scaleFract;Y.uniform2f(sa.location,La[0],La[1]);Kb=a.translate;Y.uniform2f(J.location,Kb[0],Kb[1]);fb=a.translateFract;Y.uniform2f(Ub.location,fb[0],fb[1]);Y.uniform1f(Z.location,a.opacity);(hb=Aa.elements)?Y.bindBuffer(34963,hb.buffer.buffer):
nc.currentVAO&&(hb=Qa.getElements(nc.currentVAO.elements))&&Y.bindBuffer(34963,hb.buffer.buffer);za=Aa.offset;cc=a.count;0<cc?hb?I.drawElementsInstancedANGLE(4,36,hb.type,za<<(hb.type-5121>>1),cc):I.drawArraysInstancedANGLE(4,za,36,cc):0>cc&&(hb?Y.drawElements(4,36,hb.type,za<<(hb.type-5121>>1)):Y.drawArrays(4,za,36));da.dirty=!0;nc.setVAO(null);ha.viewportWidth=m;ha.viewportHeight=t;S&&(b.cpuTime+=performance.now()-y);L&&z.destroyStream(X);mc&&z.destroyStream(Sa);ab&&z.destroyStream(Sb);id&&z.destroyStream(db)},
scope:function(a,c,e){var d,f,g,h,l,m,p,q,x,B,A,C,G,F,ba,u,O,W,aa,H,N,pa,K,J,V,T,Y,fa,ia,Z,Q,ga,Ea,ua,R,nc,qa,Fa,ka,sa,Vb,Gc,Sc,Jb,zc,Wa,ra,ja,vd,ab,la,cb,sb,Lc,ma,ic,Ob,Za,Pb,Ma,nb,tb,gb,Na,Pa,Qb,Qa,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,Ub,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,Ua,pc,Fc,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,bc,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,qc,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,
we,ue,Ve,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,gd,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id;d=a.viewport;f=d.x|0;g=d.y|0;h="width"in d?d.width|0:ha.framebufferWidth-f;l="height"in d?d.height|0:ha.framebufferHeight-g;m=ha.viewportWidth;ha.viewportWidth=h;p=ha.viewportHeight;ha.viewportHeight=l;q=Ha[0];Ha[0]=f;x=Ha[1];Ha[1]=g;B=Ha[2];Ha[2]=h;A=Ha[3];Ha[3]=l;C=jc[0];jc[0]=0;G=jc[1];jc[1]=0;F=jc[2];jc[2]=0;ba=jc[3];jc[3]=0;u=ea.blend_enable;ea.blend_enable=!0;O=wc[0];wc[0]=32774;W=wc[1];wc[1]=32774;
aa=M[0];M[0]=770;H=M[1];M[1]=771;N=M[2];M[2]=773;pa=M[3];M[3]=1;K=ea.depth_enable;ea.depth_enable=!1;J=a.viewport;V=J.x|0;T=J.y|0;Y="width"in J?J.width|0:ha.framebufferWidth-V;fa="height"in J?J.height|0:ha.framebufferHeight-T;ia=X[0];X[0]=V;Z=X[1];X[1]=T;Q=X[2];X[2]=Y;ga=X[3];X[3]=fa;Ea=ea.scissor_enable;ea.scissor_enable=!0;if(ua=da.profile)R=performance.now(),b.count++;nc=Aa.count;Aa.count=36;qa=a.count;Fa=Aa.instances;Aa.instances=qa;ka=Aa.primitive;Aa.primitive=4;sa=a.capSize;Vb=$b[5];$b[5]=sa;
Gc=a.lineWidth;Sc=$b[4];$b[4]=Gc;Jb=a.opacity;zc=$b[10];$b[10]=Jb;Wa=a.range;ra=$b[18];$b[18]=Wa;ja=a.scale;vd=$b[6];$b[6]=ja;ab=a.scaleFract;la=$b[7];$b[7]=ab;cb=a.translate;sb=$b[8];$b[8]=cb;Lc=a.translateFract;ma=$b[9];$b[9]=Lc;ic=S.call(this,ha,a,e);Ob=$b[3];$b[3]=ic;Za=D.buffer;D.buffer=r;Pb=D.divisor;D.divisor=0;Ma=D.normalized;D.normalized=!1;nb=D.offset;D.offset=16;tb=D.size;D.size=0;gb=D.state;D.state=1;Na=D.stride;D.stride=24;Pa=D.type;D.type=5126;Qb=D.w;D.w=0;Qa=D.x;D.x=0;db=D.y;D.y=0;
fc=D.z;D.z=0;Hc=na.call(this,ha,a,e);Da.offset=Hc;ac=!1;jb=null;kb=0;ta=!1;wa=ob=0;Ta=1;bb=0;Ba=5126;yb=zb=Ka=eb=0;ib(Da)?(ac=!0,jb=z.createStream(34962,Da),Ba=jb.dtype):(jb=z.getBuffer(Da))?Ba=jb.dtype:"constant"in Da?(Ta=2,"number"===typeof Da.constant?(Ka=Da.constant,zb=yb=eb=0):(Ka=0<Da.constant.length?Da.constant[0]:0,zb=1<Da.constant.length?Da.constant[1]:0,yb=2<Da.constant.length?Da.constant[2]:0,eb=3<Da.constant.length?Da.constant[3]:0)):(jb=ib(Da.buffer)?z.createStream(34962,Da.buffer):z.getBuffer(Da.buffer),
Ba="type"in Da?rc[Da.type]:jb.dtype,ta=!!Da.normalized,wa=Da.size|0,ob=Da.offset|0,bb=Da.stride|0,kb=Da.divisor|0);Ra=y.buffer;y.buffer=jb;Kc=y.divisor;y.divisor=kb;Eb=y.normalized;y.normalized=ta;Gb=y.offset;y.offset=ob;Rb=y.size;y.size=wa;ya=y.state;y.state=Ta;Ub=y.stride;y.stride=bb;La=y.type;y.type=Ba;Kb=y.w;y.w=eb;fb=y.x;y.x=Ka;hb=y.y;y.y=zb;za=y.z;y.z=yb;cc=I.buffer;I.buffer=n;Ga=I.divisor;I.divisor=0;pb=I.normalized;I.normalized=!1;qb=I.offset;I.offset=0;Xa=I.size;I.size=0;Ya=I.state;I.state=
1;kc=I.stride;I.stride=24;vc=I.type;I.type=5126;tc=I.w;I.w=0;Va=I.x;I.x=0;Hb=I.y;I.y=0;Cc=I.z;I.z=0;Ia=v.call(this,ha,a,e);U.offset=Ia;xc=!1;Oa=null;Ca=0;lb=!1;Ab=ub=0;rb=1;uc=0;vb=5126;Nc=Fc=pc=Ua=0;ib(U)?(xc=!0,Oa=z.createStream(34962,U),vb=Oa.dtype):(Oa=z.getBuffer(U))?vb=Oa.dtype:"constant"in U?(rb=2,"number"===typeof U.constant?(pc=U.constant,Fc=Nc=Ua=0):(pc=0<U.constant.length?U.constant[0]:0,Fc=1<U.constant.length?U.constant[1]:0,Nc=2<U.constant.length?U.constant[2]:0,Ua=3<U.constant.length?
U.constant[3]:0)):(Oa=ib(U.buffer)?z.createStream(34962,U.buffer):z.getBuffer(U.buffer),vb="type"in U?rc[U.type]:Oa.dtype,lb=!!U.normalized,Ab=U.size|0,ub=U.offset|0,uc=U.stride|0,Ca=U.divisor|0);ed=t.buffer;t.buffer=Oa;fd=t.divisor;t.divisor=Ca;Tb=t.normalized;t.normalized=lb;Zb=t.offset;t.offset=ub;Lb=t.size;t.size=Ab;Ja=t.state;t.state=rb;Wb=t.stride;t.stride=uc;mb=t.type;t.type=vb;wb=t.w;t.w=Ua;Ib=t.x;t.x=pc;Mb=t.y;t.y=Fc;dc=t.z;t.z=Nc;gc=w.buffer;w.buffer=E;bc=w.divisor;w.divisor=0;Gd=w.normalized;
w.normalized=!1;Bc=w.offset;w.offset=8;Dc=w.size;w.size=0;Oc=w.state;w.state=1;$c=w.stride;w.stride=24;Tc=w.type;w.type=5126;Pc=w.w;w.w=0;Fb=w.x;w.x=0;Cb=w.y;w.y=0;Qc=w.z;w.z=0;Ic=k.call(this,ha,a,e);Db.offset=Ic;Uc=!1;ec=null;Xc=0;bd=!1;ld=qd=0;Yc=1;qc=0;Wd=5126;Hd=me=Je=je=0;ib(Db)?(Uc=!0,ec=z.createStream(34962,Db),Wd=ec.dtype):(ec=z.getBuffer(Db))?Wd=ec.dtype:"constant"in Db?(Yc=2,"number"===typeof Db.constant?(Je=Db.constant,me=Hd=je=0):(Je=0<Db.constant.length?Db.constant[0]:0,me=1<Db.constant.length?
Db.constant[1]:0,Hd=2<Db.constant.length?Db.constant[2]:0,je=3<Db.constant.length?Db.constant[3]:0)):(ec=ib(Db.buffer)?z.createStream(34962,Db.buffer):z.getBuffer(Db.buffer),Wd="type"in Db?rc[Db.type]:ec.dtype,bd=!!Db.normalized,ld=Db.size|0,qd=Db.offset|0,qc=Db.stride|0,Xc=Db.divisor|0);Ed=ca.buffer;ca.buffer=ec;dd=ca.divisor;ca.divisor=Xc;Ec=ca.normalized;ca.normalized=bd;rd=ca.offset;ca.offset=qd;hd=ca.size;ca.size=ld;ad=ca.state;ca.state=Yc;md=ca.stride;ca.stride=qc;Dd=ca.type;ca.type=Wd;zd=ca.w;
ca.w=je;we=ca.x;ca.x=Je;ue=ca.y;ca.y=me;Ve=ca.z;ca.z=Hd;ne=L.call(this,ha,a,e);xb.offset=ne;ee=!1;be=null;pe=0;$d=!1;yc=ge=0;Wc=1;qe=0;ke=5126;Nd=Md=Ld=Fd=0;ib(xb)?(ee=!0,be=z.createStream(34962,xb),ke=be.dtype):(be=z.getBuffer(xb))?ke=be.dtype:"constant"in xb?(Wc=2,"number"===typeof xb.constant?(Ld=xb.constant,Md=Nd=Fd=0):(Ld=0<xb.constant.length?xb.constant[0]:0,Md=1<xb.constant.length?xb.constant[1]:0,Nd=2<xb.constant.length?xb.constant[2]:0,Fd=3<xb.constant.length?xb.constant[3]:0)):(be=ib(xb.buffer)?
z.createStream(34962,xb.buffer):z.getBuffer(xb.buffer),ke="type"in xb?rc[xb.type]:be.dtype,$d=!!xb.normalized,yc=xb.size|0,ge=xb.offset|0,qe=xb.stride|0,pe=xb.divisor|0);he=P.buffer;P.buffer=be;gd=P.divisor;P.divisor=pe;xe=P.normalized;P.normalized=$d;oe=P.offset;P.offset=ge;Ne=P.size;P.size=yc;Oe=P.state;P.state=Wc;Ke=P.stride;P.stride=qe;re=P.type;P.type=ke;Be=P.w;P.w=Fd;De=P.x;P.x=Ld;Ee=P.y;P.y=Md;Fe=P.z;P.z=Nd;Ce=va.vert;va.vert=2;Id=va.frag;va.frag=1;da.dirty=!0;c(ha,a,e);ha.viewportWidth=m;
ha.viewportHeight=p;Ha[0]=q;Ha[1]=x;Ha[2]=B;Ha[3]=A;jc[0]=C;jc[1]=G;jc[2]=F;jc[3]=ba;ea.blend_enable=u;wc[0]=O;wc[1]=W;M[0]=aa;M[1]=H;M[2]=N;M[3]=pa;ea.depth_enable=K;X[0]=ia;X[1]=Z;X[2]=Q;X[3]=ga;ea.scissor_enable=Ea;ua&&(b.cpuTime+=performance.now()-R);Aa.count=nc;Aa.instances=Fa;Aa.primitive=ka;$b[5]=Vb;$b[4]=Sc;$b[10]=zc;$b[18]=ra;$b[6]=vd;$b[7]=la;$b[8]=sb;$b[9]=ma;$b[3]=Ob;D.buffer=Za;D.divisor=Pb;D.normalized=Ma;D.offset=nb;D.size=tb;D.state=gb;D.stride=Na;D.type=Pa;D.w=Qb;D.x=Qa;D.y=db;D.z=
fc;ac&&z.destroyStream(jb);y.buffer=Ra;y.divisor=Kc;y.normalized=Eb;y.offset=Gb;y.size=Rb;y.state=ya;y.stride=Ub;y.type=La;y.w=Kb;y.x=fb;y.y=hb;y.z=za;I.buffer=cc;I.divisor=Ga;I.normalized=pb;I.offset=qb;I.size=Xa;I.state=Ya;I.stride=kc;I.type=vc;I.w=tc;I.x=Va;I.y=Hb;I.z=Cc;xc&&z.destroyStream(Oa);t.buffer=ed;t.divisor=fd;t.normalized=Tb;t.offset=Zb;t.size=Lb;t.state=Ja;t.stride=Wb;t.type=mb;t.w=wb;t.x=Ib;t.y=Mb;t.z=dc;w.buffer=gc;w.divisor=bc;w.normalized=Gd;w.offset=Bc;w.size=Dc;w.state=Oc;w.stride=
$c;w.type=Tc;w.w=Pc;w.x=Fb;w.y=Cb;w.z=Qc;Uc&&z.destroyStream(ec);ca.buffer=Ed;ca.divisor=dd;ca.normalized=Ec;ca.offset=rd;ca.size=hd;ca.state=ad;ca.stride=md;ca.type=Dd;ca.w=zd;ca.x=we;ca.y=ue;ca.z=Ve;ee&&z.destroyStream(be);P.buffer=he;P.divisor=gd;P.normalized=xe;P.offset=oe;P.size=Ne;P.state=Oe;P.stride=Ke;P.type=re;P.w=Be;P.x=De;P.y=Ee;P.z=Fe;va.vert=Ce;va.frag=Id;da.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
b,g,h,d,c,p,e,l,u,W,n,E,r,C,S,D,y,v,I,xa,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,gd){var qc,la,Pa,Z,K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va,$b,nc,jc,vd,wc,aa,M,ia,Fa,sb,Lc,Fc,F,B,ga,ua,X,fa,qa,G,x;qc=a.attributes;la=a.buffer;Pa=a.context;Z=a.current;K=a.draw;N=a.elements;V=a.extensions;sa=a.framebuffer;J=a.gl;Ub=a.isBufferArgs;Za=a.next;T=a.shader;z=a.uniforms;ha=a.vao;da=Za.blend_color;Aa=Z.blend_color;Qa=Za.blend_equation;bc=Z.blend_equation;Ua=Za.blend_func;Y=Z.blend_func;ib=Za.colorMask;ea=
Z.colorMask;va=Za.depth_range;$b=Z.depth_range;nc=Za.polygonOffset_offset;jc=Z.polygonOffset_offset;vd=Za.sample_coverage;wc=Z.sample_coverage;aa=Za.scissor_box;M=Z.scissor_box;ia=Za.stencil_func;Fa=Z.stencil_func;sb=Za.stencil_opBack;Lc=Z.stencil_opBack;Fc=Za.stencil_opFront;F=Z.stencil_opFront;B=Za.viewport;ga=Z.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};qa={divisor:1,
offset:16,stride:8};G={divisor:1,offset:16,stride:8};x={divisor:1,offset:0,stride:4};return{batch:function(a,e){var g,h,l,n,p,r;g=sa.next;g!==sa.cur&&(g?J.bindFramebuffer(36160,g.framebuffer):J.bindFramebuffer(36160,null),sa.cur=g);if(Z.dirty){var z,B,E,D,C,u,W,aa,S,pa,T,da,Qa,Ua,ie,$e,mf,We,Ad,ve,de,Td,le,Ie,td,nd,wd,sd,cd,Vc,yd,Rc;z=Za.dither;z!==Z.dither&&(z?J.enable(3024):J.disable(3024),Z.dither=z);B=Za.depth_func;B!==Z.depth_func&&(J.depthFunc(B),Z.depth_func=B);E=va[0];D=va[1];if(E!==$b[0]||
D!==$b[1])J.depthRange(E,D),$b[0]=E,$b[1]=D;C=Za.depth_mask;C!==Z.depth_mask&&(J.depthMask(C),Z.depth_mask=C);u=ib[0];W=ib[1];aa=ib[2];S=ib[3];if(u!==ea[0]||W!==ea[1]||aa!==ea[2]||S!==ea[3])J.colorMask(u,W,aa,S),ea[0]=u,ea[1]=W,ea[2]=aa,ea[3]=S;pa=Za.cull_enable;pa!==Z.cull_enable&&(pa?J.enable(2884):J.disable(2884),Z.cull_enable=pa);T=Za.cull_face;T!==Z.cull_face&&(J.cullFace(T),Z.cull_face=T);da=Za.frontFace;da!==Z.frontFace&&(J.frontFace(da),Z.frontFace=da);Qa=Za.lineWidth;Qa!==Z.lineWidth&&(J.lineWidth(Qa),
Z.lineWidth=Qa);Ua=Za.polygonOffset_enable;Ua!==Z.polygonOffset_enable&&(Ua?J.enable(32823):J.disable(32823),Z.polygonOffset_enable=Ua);ie=nc[0];$e=nc[1];if(ie!==jc[0]||$e!==jc[1])J.polygonOffset(ie,$e),jc[0]=ie,jc[1]=$e;mf=Za.sample_alpha;mf!==Z.sample_alpha&&(mf?J.enable(32926):J.disable(32926),Z.sample_alpha=mf);We=Za.sample_enable;We!==Z.sample_enable&&(We?J.enable(32928):J.disable(32928),Z.sample_enable=We);Ad=vd[0];ve=vd[1];if(Ad!==wc[0]||ve!==wc[1])J.sampleCoverage(Ad,ve),wc[0]=Ad,wc[1]=ve;
de=Za.stencil_mask;de!==Z.stencil_mask&&(J.stencilMask(de),Z.stencil_mask=de);Td=ia[0];le=ia[1];Ie=ia[2];if(Td!==Fa[0]||le!==Fa[1]||Ie!==Fa[2])J.stencilFunc(Td,le,Ie),Fa[0]=Td,Fa[1]=le,Fa[2]=Ie;td=Fc[0];nd=Fc[1];wd=Fc[2];sd=Fc[3];if(td!==F[0]||nd!==F[1]||wd!==F[2]||sd!==F[3])J.stencilOpSeparate(td,nd,wd,sd),F[0]=td,F[1]=nd,F[2]=wd,F[3]=sd;cd=sb[0];Vc=sb[1];yd=sb[2];Rc=sb[3];if(cd!==Lc[0]||Vc!==Lc[1]||yd!==Lc[2]||Rc!==Lc[3])J.stencilOpSeparate(cd,Vc,yd,Rc),Lc[0]=cd,Lc[1]=Vc,Lc[2]=yd,Lc[3]=Rc}J.blendColor(0,
0,0,0);Aa[0]=0;Aa[1]=0;Aa[2]=0;Aa[3]=0;J.enable(3042);Z.blend_enable=!0;J.blendEquationSeparate(32774,32774);bc[0]=32774;bc[1]=32774;J.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;J.enable(3089);Z.scissor_enable=!0;J.disable(2960);Z.stencil_enable=!1;if(h=Z.profile)l=performance.now(),b.count+=e;J.useProgram(y.program);n=V.angle_instanced_arrays;var Mc,oc,$a,hc,Bb;ha.setVAO(null);Mc=ka.location;oc=qc[Mc];oc.buffer||J.enableVertexAttribArray(Mc);if(5126!==oc.type||1!==oc.size||
oc.buffer!==d||!1!==oc.normalized||0!==oc.offset||8!==oc.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer(Mc,1,5126,!1,8,0),oc.type=5126,oc.size=1,oc.buffer=d,oc.normalized=!1,oc.offset=0,oc.stride=8;0!==oc.divisor&&(n.vertexAttribDivisorANGLE(Mc,0),oc.divisor=0);$a=H.location;hc=qc[$a];hc.buffer||J.enableVertexAttribArray($a);if(5126!==hc.type||1!==hc.size||hc.buffer!==c||!1!==hc.normalized||4!==hc.offset||8!==hc.stride)J.bindBuffer(34962,c.buffer),J.vertexAttribPointer($a,1,5126,!1,8,4),
hc.type=5126,hc.size=1,hc.buffer=c,hc.normalized=!1,hc.offset=4,hc.stride=8;0!==hc.divisor&&(n.vertexAttribDivisorANGLE($a,0),hc.divisor=0);(Bb=K.elements)?J.bindBuffer(34963,Bb.buffer.buffer):ha.currentVAO&&(Bb=N.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,Bb.buffer.buffer);for(p=0;p<e;++p){r=a[p];var mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,
za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,vf,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,Gf,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad;mc=r.viewport;Sa=mc.x|0;Jc=mc.y|0;Xb="width"in mc?mc.width|0:Pa.framebufferWidth-Sa;Zc="height"in mc?mc.height|0:Pa.framebufferHeight-Jc;Qd=Pa.viewportWidth;Pa.viewportWidth=Xb;od=Pa.viewportHeight;Pa.viewportHeight=Zc;J.viewport(Sa,Jc,Xb,Zc);ga[0]=Sa;ga[1]=Jc;ga[2]=Xb;ga[3]=Zc;(sc=v.call(this,
Pa,r,p))?J.enable(2929):J.disable(2929);Z.depth_enable=sc;Vb=r.viewport;Gc=Vb.x|0;Sc=Vb.y|0;Jb="width"in Vb?Vb.width|0:Pa.framebufferWidth-Gc;zc="height"in Vb?Vb.height|0:Pa.framebufferHeight-Sc;J.scissor(Gc,Sc,Jb,zc);M[0]=Gc;M[1]=Sc;M[2]=Jb;M[3]=zc;X.buffer=r.positionBuffer;Wa=!1;ra=null;pd=0;Yb=!1;Sb=ab=0;cb=1;Ac=0;Nb=5126;ud=Ob=ic=Cd=0;Ub(X)?(Wa=!0,ra=la.createStream(34962,X),Nb=ra.dtype):(ra=la.getBuffer(X))?Nb=ra.dtype:"constant"in X?(cb=2,"number"===typeof X.constant?(ic=X.constant,Ob=ud=Cd=
0):(ic=0<X.constant.length?X.constant[0]:0,Ob=1<X.constant.length?X.constant[1]:0,ud=2<X.constant.length?X.constant[2]:0,Cd=3<X.constant.length?X.constant[3]:0)):(ra=Ub(X.buffer)?la.createStream(34962,X.buffer):la.getBuffer(X.buffer),Nb="type"in X?ua[X.type]:ra.dtype,Yb=!!X.normalized,Sb=X.size|0,ab=X.offset|0,Ac=X.stride|0,pd=X.divisor|0);Pb=xa.location;Ma=qc[Pb];if(1===cb){Ma.buffer||J.enableVertexAttribArray(Pb);nb=Sb||2;if(Ma.type!==Nb||Ma.size!==nb||Ma.buffer!==ra||Ma.normalized!==Yb||Ma.offset!==
ab||Ma.stride!==Ac)J.bindBuffer(34962,ra.buffer),J.vertexAttribPointer(Pb,nb,Nb,Yb,Ac,ab),Ma.type=Nb,Ma.size=nb,Ma.buffer=ra,Ma.normalized=Yb,Ma.offset=ab,Ma.stride=Ac;Ma.divisor!==pd&&(n.vertexAttribDivisorANGLE(Pb,pd),Ma.divisor=pd)}else if(Ma.buffer&&(J.disableVertexAttribArray(Pb),Ma.buffer=null),Ma.x!==ic||Ma.y!==Ob||Ma.z!==ud||Ma.w!==Cd)J.vertexAttrib4f(Pb,ic,Ob,ud,Cd),Ma.x=ic,Ma.y=Ob,Ma.z=ud,Ma.w=Cd;qa.buffer=r.positionBuffer;tb=!1;gb=null;Na=0;lc=!1;id=Qb=0;db=1;fc=0;Hc=5126;ta=kb=jb=ac=0;
Ub(qa)?(tb=!0,gb=la.createStream(34962,qa),Hc=gb.dtype):(gb=la.getBuffer(qa))?Hc=gb.dtype:"constant"in qa?(db=2,"number"===typeof qa.constant?(jb=qa.constant,kb=ta=ac=0):(jb=0<qa.constant.length?qa.constant[0]:0,kb=1<qa.constant.length?qa.constant[1]:0,ta=2<qa.constant.length?qa.constant[2]:0,ac=3<qa.constant.length?qa.constant[3]:0)):(gb=Ub(qa.buffer)?la.createStream(34962,qa.buffer):la.getBuffer(qa.buffer),Hc="type"in qa?ua[qa.type]:gb.dtype,lc=!!qa.normalized,id=qa.size|0,Qb=qa.offset|0,fc=qa.stride|
0,Na=qa.divisor|0);ob=w.location;wa=qc[ob];if(1===db){wa.buffer||J.enableVertexAttribArray(ob);Ta=id||2;if(wa.type!==Hc||wa.size!==Ta||wa.buffer!==gb||wa.normalized!==lc||wa.offset!==Qb||wa.stride!==fc)J.bindBuffer(34962,gb.buffer),J.vertexAttribPointer(ob,Ta,Hc,lc,fc,Qb),wa.type=Hc,wa.size=Ta,wa.buffer=gb,wa.normalized=lc,wa.offset=Qb,wa.stride=fc;wa.divisor!==Na&&(n.vertexAttribDivisorANGLE(ob,Na),wa.divisor=Na)}else if(wa.buffer&&(J.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==
kb||wa.z!==ta||wa.w!==ac)J.vertexAttrib4f(ob,jb,kb,ta,ac),wa.x=jb,wa.y=kb,wa.z=ta,wa.w=ac;fa.buffer=r.positionFractBuffer;bb=!1;Ba=null;eb=0;Ka=!1;yb=zb=0;Ra=1;Kc=0;Eb=5126;jd=ya=Rb=Gb=0;Ub(fa)?(bb=!0,Ba=la.createStream(34962,fa),Eb=Ba.dtype):(Ba=la.getBuffer(fa))?Eb=Ba.dtype:"constant"in fa?(Ra=2,"number"===typeof fa.constant?(Rb=fa.constant,ya=jd=Gb=0):(Rb=0<fa.constant.length?fa.constant[0]:0,ya=1<fa.constant.length?fa.constant[1]:0,jd=2<fa.constant.length?fa.constant[2]:0,Gb=3<fa.constant.length?
fa.constant[3]:0)):(Ba=Ub(fa.buffer)?la.createStream(34962,fa.buffer):la.getBuffer(fa.buffer),Eb="type"in fa?ua[fa.type]:Ba.dtype,Ka=!!fa.normalized,yb=fa.size|0,zb=fa.offset|0,Kc=fa.stride|0,eb=fa.divisor|0);La=t.location;Kb=qc[La];if(1===Ra){Kb.buffer||J.enableVertexAttribArray(La);fb=yb||2;if(Kb.type!==Eb||Kb.size!==fb||Kb.buffer!==Ba||Kb.normalized!==Ka||Kb.offset!==zb||Kb.stride!==Kc)J.bindBuffer(34962,Ba.buffer),J.vertexAttribPointer(La,fb,Eb,Ka,Kc,zb),Kb.type=Eb,Kb.size=fb,Kb.buffer=Ba,Kb.normalized=
Ka,Kb.offset=zb,Kb.stride=Kc;Kb.divisor!==eb&&(n.vertexAttribDivisorANGLE(La,eb),Kb.divisor=eb)}else if(Kb.buffer&&(J.disableVertexAttribArray(La),Kb.buffer=null),Kb.x!==Rb||Kb.y!==ya||Kb.z!==jd||Kb.w!==Gb)J.vertexAttrib4f(La,Rb,ya,jd,Gb),Kb.x=Rb,Kb.y=ya,Kb.z=jd,Kb.w=Gb;G.buffer=r.positionFractBuffer;hb=!1;za=null;cc=0;Ga=!1;qb=pb=0;Xa=1;Ya=0;kc=5126;Hb=Va=tc=vc=0;Ub(G)?(hb=!0,za=la.createStream(34962,G),kc=za.dtype):(za=la.getBuffer(G))?kc=za.dtype:"constant"in G?(Xa=2,"number"===typeof G.constant?
(tc=G.constant,Va=Hb=vc=0):(tc=0<G.constant.length?G.constant[0]:0,Va=1<G.constant.length?G.constant[1]:0,Hb=2<G.constant.length?G.constant[2]:0,vc=3<G.constant.length?G.constant[3]:0)):(za=Ub(G.buffer)?la.createStream(34962,G.buffer):la.getBuffer(G.buffer),kc="type"in G?ua[G.type]:za.dtype,Ga=!!G.normalized,qb=G.size|0,pb=G.offset|0,Ya=G.stride|0,cc=G.divisor|0);Cc=k.location;Ia=qc[Cc];if(1===Xa){Ia.buffer||J.enableVertexAttribArray(Cc);xc=qb||2;if(Ia.type!==kc||Ia.size!==xc||Ia.buffer!==za||Ia.normalized!==
Ga||Ia.offset!==pb||Ia.stride!==Ya)J.bindBuffer(34962,za.buffer),J.vertexAttribPointer(Cc,xc,kc,Ga,Ya,pb),Ia.type=kc,Ia.size=xc,Ia.buffer=za,Ia.normalized=Ga,Ia.offset=pb,Ia.stride=Ya;Ia.divisor!==cc&&(n.vertexAttribDivisorANGLE(Cc,cc),Ia.divisor=cc)}else if(Ia.buffer&&(J.disableVertexAttribArray(Cc),Ia.buffer=null),Ia.x!==tc||Ia.y!==Va||Ia.z!==Hb||Ia.w!==vc)J.vertexAttrib4f(Cc,tc,Va,Hb,vc),Ia.x=tc,Ia.y=Va,Ia.z=Hb,Ia.w=vc;x.buffer=r.colorBuffer;Oa=!1;Ca=null;lb=0;ub=!1;rb=Ab=0;uc=1;vb=0;kd=5126;ed=
Nc=Ae=pc=0;Ub(x)?(Oa=!0,Ca=la.createStream(34962,x),kd=Ca.dtype):(Ca=la.getBuffer(x))?kd=Ca.dtype:"constant"in x?(uc=2,"number"===typeof x.constant?(Ae=x.constant,Nc=ed=pc=0):(Ae=0<x.constant.length?x.constant[0]:0,Nc=1<x.constant.length?x.constant[1]:0,ed=2<x.constant.length?x.constant[2]:0,pc=3<x.constant.length?x.constant[3]:0)):(Ca=Ub(x.buffer)?la.createStream(34962,x.buffer):la.getBuffer(x.buffer),kd="type"in x?ua[x.type]:Ca.dtype,ub=!!x.normalized,rb=x.size|0,Ab=x.offset|0,vb=x.stride|0,lb=
x.divisor|0);fd=ca.location;Tb=qc[fd];if(1===uc){Tb.buffer||J.enableVertexAttribArray(fd);Zb=rb||4;if(Tb.type!==kd||Tb.size!==Zb||Tb.buffer!==Ca||Tb.normalized!==ub||Tb.offset!==Ab||Tb.stride!==vb)J.bindBuffer(34962,Ca.buffer),J.vertexAttribPointer(fd,Zb,kd,ub,vb,Ab),Tb.type=kd,Tb.size=Zb,Tb.buffer=Ca,Tb.normalized=ub,Tb.offset=Ab,Tb.stride=vb;Tb.divisor!==lb&&(n.vertexAttribDivisorANGLE(fd,lb),Tb.divisor=lb)}else if(Tb.buffer&&(J.disableVertexAttribArray(fd),Tb.buffer=null),Tb.x!==Ae||Tb.y!==Nc||
Tb.z!==ed||Tb.w!==pc)J.vertexAttrib4f(fd,Ae,Nc,ed,pc),Tb.x=Ae,Tb.y=Nc,Tb.z=ed,Tb.w=pc;Lb=r.scale;Ja=Lb[0];mb=Lb[1];p&&Wb===Ja&&wb===mb||(Wb=Ja,wb=mb,J.uniform2f(f.location,Ja,mb));Ib=r.scaleFract;Mb=Ib[0];gc=Ib[1];p&&dc===Mb&&vf===gc||(dc=Mb,vf=gc,J.uniform2f(m.location,Mb,gc));Gd=r.translate;Bc=Gd[0];Oc=Gd[1];p&&Dc===Bc&&$c===Oc||(Dc=Bc,$c=Oc,J.uniform2f(ja.location,Bc,Oc));Tc=r.translateFract;Pc=Tc[0];Cb=Tc[1];p&&Fb===Pc&&Qc===Cb||(Fb=Pc,Qc=Cb,J.uniform2f(ma.location,Pc,Cb));Ic=r.thickness;p&&Uc===
Ic||(Uc=Ic,J.uniform1f(Q.location,Ic));ec=r.depth;p&&Xc===ec||(Xc=ec,J.uniform1f(A.location,ec));bd=I.call(this,Pa,r,p);qd=bd[0];Yc=bd[1];Wd=bd[2];Je=bd[3];p&&ld===qd&&Gf===Yc&&je===Wd&&me===Je||(ld=qd,Gf=Yc,je=Wd,me=Je,J.uniform4f(gd.location,qd,Yc,Wd,Je));Hd=r.dashLength;p&&Ed===Hd||(Ed=Hd,J.uniform1f(L.location,Hd));dd=r.opacity;p&&Ec===dd||(Ec=dd,J.uniform1f(R.location,dd));(rd=r.dashTexture)&&"framebuffer"===rd._reglType&&(rd=rd.color[0]);hd=rd._texture;J.uniform1i(P.location,hd.bind());ad=r.count;
0<ad?Bb?n.drawElementsInstancedANGLE(5,4,Bb.type,0<<(Bb.type-5121>>1),ad):n.drawArraysInstancedANGLE(5,0,4,ad):0>ad&&(Bb?J.drawElements(5,4,Bb.type,0<<(Bb.type-5121>>1)):J.drawArrays(5,0,4));Pa.viewportWidth=Qd;Pa.viewportHeight=od;Wa&&la.destroyStream(ra);tb&&la.destroyStream(gb);bb&&la.destroyStream(Ba);hb&&la.destroyStream(za);Oa&&la.destroyStream(Ca);hd.unbind()}Z.dirty=!0;ha.setVAO(null);h&&(b.cpuTime+=performance.now()-l)},draw:function(a){var e,l,n,q,r,z,B,E,D,C,u,W,aa,S,pa,y,I,T,na,da,v,oa,
$e,Qa,We,Ad,ve,de,Td,le,Ua,td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb;e=sa.next;e!==sa.cur&&(e?J.bindFramebuffer(36160,e.framebuffer):J.bindFramebuffer(36160,null),sa.cur=e);if(Z.dirty){var qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb;qb=Za.dither;qb!==Z.dither&&
(qb?J.enable(3024):J.disable(3024),Z.dither=qb);Xa=Za.depth_func;Xa!==Z.depth_func&&(J.depthFunc(Xa),Z.depth_func=Xa);Ya=va[0];kc=va[1];if(Ya!==$b[0]||kc!==$b[1])J.depthRange(Ya,kc),$b[0]=Ya,$b[1]=kc;vc=Za.depth_mask;vc!==Z.depth_mask&&(J.depthMask(vc),Z.depth_mask=vc);tc=ib[0];Va=ib[1];Hb=ib[2];Cc=ib[3];if(tc!==ea[0]||Va!==ea[1]||Hb!==ea[2]||Cc!==ea[3])J.colorMask(tc,Va,Hb,Cc),ea[0]=tc,ea[1]=Va,ea[2]=Hb,ea[3]=Cc;Ia=Za.cull_enable;Ia!==Z.cull_enable&&(Ia?J.enable(2884):J.disable(2884),Z.cull_enable=
Ia);xc=Za.cull_face;xc!==Z.cull_face&&(J.cullFace(xc),Z.cull_face=xc);Oa=Za.frontFace;Oa!==Z.frontFace&&(J.frontFace(Oa),Z.frontFace=Oa);Ca=Za.lineWidth;Ca!==Z.lineWidth&&(J.lineWidth(Ca),Z.lineWidth=Ca);lb=Za.polygonOffset_enable;lb!==Z.polygonOffset_enable&&(lb?J.enable(32823):J.disable(32823),Z.polygonOffset_enable=lb);ub=nc[0];Ab=nc[1];if(ub!==jc[0]||Ab!==jc[1])J.polygonOffset(ub,Ab),jc[0]=ub,jc[1]=Ab;rb=Za.sample_alpha;rb!==Z.sample_alpha&&(rb?J.enable(32926):J.disable(32926),Z.sample_alpha=
rb);uc=Za.sample_enable;uc!==Z.sample_enable&&(uc?J.enable(32928):J.disable(32928),Z.sample_enable=uc);vb=vd[0];kd=vd[1];if(vb!==wc[0]||kd!==wc[1])J.sampleCoverage(vb,kd),wc[0]=vb,wc[1]=kd;pc=Za.stencil_mask;pc!==Z.stencil_mask&&(J.stencilMask(pc),Z.stencil_mask=pc);Ae=ia[0];Nc=ia[1];ed=ia[2];if(Ae!==Fa[0]||Nc!==Fa[1]||ed!==Fa[2])J.stencilFunc(Ae,Nc,ed),Fa[0]=Ae,Fa[1]=Nc,Fa[2]=ed;fd=Fc[0];Tb=Fc[1];Zb=Fc[2];Lb=Fc[3];if(fd!==F[0]||Tb!==F[1]||Zb!==F[2]||Lb!==F[3])J.stencilOpSeparate(fd,Tb,Zb,Lb),F[0]=
fd,F[1]=Tb,F[2]=Zb,F[3]=Lb;Ja=sb[0];Wb=sb[1];mb=sb[2];wb=sb[3];if(Ja!==Lc[0]||Wb!==Lc[1]||mb!==Lc[2]||wb!==Lc[3])J.stencilOpSeparate(Ja,Wb,mb,wb),Lc[0]=Ja,Lc[1]=Wb,Lc[2]=mb,Lc[3]=wb}l=a.viewport;n=l.x|0;q=l.y|0;r="width"in l?l.width|0:Pa.framebufferWidth-n;z="height"in l?l.height|0:Pa.framebufferHeight-q;B=Pa.viewportWidth;Pa.viewportWidth=r;E=Pa.viewportHeight;Pa.viewportHeight=z;J.viewport(n,q,r,z);ga[0]=n;ga[1]=q;ga[2]=r;ga[3]=z;J.blendColor(0,0,0,0);Aa[0]=0;Aa[1]=0;Aa[2]=0;Aa[3]=0;J.enable(3042);
Z.blend_enable=!0;J.blendEquationSeparate(32774,32774);bc[0]=32774;bc[1]=32774;J.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;(D=g.call(this,Pa,a,0))?J.enable(2929):J.disable(2929);Z.depth_enable=D;C=a.viewport;u=C.x|0;W=C.y|0;aa="width"in C?C.width|0:Pa.framebufferWidth-u;S="height"in C?C.height|0:Pa.framebufferHeight-W;J.scissor(u,W,aa,S);M[0]=u;M[1]=W;M[2]=aa;M[3]=S;J.enable(3089);Z.scissor_enable=!0;J.disable(2960);Z.stencil_enable=!1;if(pa=Z.profile)y=performance.now(),
b.count++;J.useProgram(h.program);I=V.angle_instanced_arrays;ha.setVAO(null);X.buffer=a.positionBuffer;T=!1;na=null;da=0;v=!1;$e=oa=0;Qa=1;We=0;Ad=5126;le=Td=de=ve=0;Ub(X)?(T=!0,na=la.createStream(34962,X),Ad=na.dtype):(na=la.getBuffer(X))?Ad=na.dtype:"constant"in X?(Qa=2,"number"===typeof X.constant?(de=X.constant,Td=le=ve=0):(de=0<X.constant.length?X.constant[0]:0,Td=1<X.constant.length?X.constant[1]:0,le=2<X.constant.length?X.constant[2]:0,ve=3<X.constant.length?X.constant[3]:0)):(na=Ub(X.buffer)?
la.createStream(34962,X.buffer):la.getBuffer(X.buffer),Ad="type"in X?ua[X.type]:na.dtype,v=!!X.normalized,$e=X.size|0,oa=X.offset|0,We=X.stride|0,da=X.divisor|0);Ua=xa.location;td=qc[Ua];if(1===Qa){td.buffer||J.enableVertexAttribArray(Ua);nd=$e||2;if(td.type!==Ad||td.size!==nd||td.buffer!==na||td.normalized!==v||td.offset!==oa||td.stride!==We)J.bindBuffer(34962,na.buffer),J.vertexAttribPointer(Ua,nd,Ad,v,We,oa),td.type=Ad,td.size=nd,td.buffer=na,td.normalized=v,td.offset=oa,td.stride=We;td.divisor!==
da&&(I.vertexAttribDivisorANGLE(Ua,da),td.divisor=da)}else if(td.buffer&&(J.disableVertexAttribArray(Ua),td.buffer=null),td.x!==de||td.y!==Td||td.z!==le||td.w!==ve)J.vertexAttrib4f(Ua,de,Td,le,ve),td.x=de,td.y=Td,td.z=le,td.w=ve;qa.buffer=a.positionBuffer;wd=!1;sd=null;cd=0;Vc=!1;Rc=yd=0;Mc=1;oc=0;$a=5126;Sa=mc=Bb=hc=0;Ub(qa)?(wd=!0,sd=la.createStream(34962,qa),$a=sd.dtype):(sd=la.getBuffer(qa))?$a=sd.dtype:"constant"in qa?(Mc=2,"number"===typeof qa.constant?(Bb=qa.constant,mc=Sa=hc=0):(Bb=0<qa.constant.length?
qa.constant[0]:0,mc=1<qa.constant.length?qa.constant[1]:0,Sa=2<qa.constant.length?qa.constant[2]:0,hc=3<qa.constant.length?qa.constant[3]:0)):(sd=Ub(qa.buffer)?la.createStream(34962,qa.buffer):la.getBuffer(qa.buffer),$a="type"in qa?ua[qa.type]:sd.dtype,Vc=!!qa.normalized,Rc=qa.size|0,yd=qa.offset|0,oc=qa.stride|0,cd=qa.divisor|0);Jc=w.location;Xb=qc[Jc];if(1===Mc){Xb.buffer||J.enableVertexAttribArray(Jc);Zc=Rc||2;if(Xb.type!==$a||Xb.size!==Zc||Xb.buffer!==sd||Xb.normalized!==Vc||Xb.offset!==yd||Xb.stride!==
oc)J.bindBuffer(34962,sd.buffer),J.vertexAttribPointer(Jc,Zc,$a,Vc,oc,yd),Xb.type=$a,Xb.size=Zc,Xb.buffer=sd,Xb.normalized=Vc,Xb.offset=yd,Xb.stride=oc;Xb.divisor!==cd&&(I.vertexAttribDivisorANGLE(Jc,cd),Xb.divisor=cd)}else if(Xb.buffer&&(J.disableVertexAttribArray(Jc),Xb.buffer=null),Xb.x!==Bb||Xb.y!==mc||Xb.z!==Sa||Xb.w!==hc)J.vertexAttrib4f(Jc,Bb,mc,Sa,hc),Xb.x=Bb,Xb.y=mc,Xb.z=Sa,Xb.w=hc;fa.buffer=a.positionFractBuffer;Qd=!1;od=null;sc=0;Vb=!1;Sc=Gc=0;Jb=1;zc=0;Wa=5126;ab=Yb=pd=ra=0;Ub(fa)?(Qd=
!0,od=la.createStream(34962,fa),Wa=od.dtype):(od=la.getBuffer(fa))?Wa=od.dtype:"constant"in fa?(Jb=2,"number"===typeof fa.constant?(pd=fa.constant,Yb=ab=ra=0):(pd=0<fa.constant.length?fa.constant[0]:0,Yb=1<fa.constant.length?fa.constant[1]:0,ab=2<fa.constant.length?fa.constant[2]:0,ra=3<fa.constant.length?fa.constant[3]:0)):(od=Ub(fa.buffer)?la.createStream(34962,fa.buffer):la.getBuffer(fa.buffer),Wa="type"in fa?ua[fa.type]:od.dtype,Vb=!!fa.normalized,Sc=fa.size|0,Gc=fa.offset|0,zc=fa.stride|0,sc=
fa.divisor|0);Sb=t.location;cb=qc[Sb];if(1===Jb){cb.buffer||J.enableVertexAttribArray(Sb);Ac=Sc||2;if(cb.type!==Wa||cb.size!==Ac||cb.buffer!==od||cb.normalized!==Vb||cb.offset!==Gc||cb.stride!==zc)J.bindBuffer(34962,od.buffer),J.vertexAttribPointer(Sb,Ac,Wa,Vb,zc,Gc),cb.type=Wa,cb.size=Ac,cb.buffer=od,cb.normalized=Vb,cb.offset=Gc,cb.stride=zc;cb.divisor!==sc&&(I.vertexAttribDivisorANGLE(Sb,sc),cb.divisor=sc)}else if(cb.buffer&&(J.disableVertexAttribArray(Sb),cb.buffer=null),cb.x!==pd||cb.y!==Yb||
cb.z!==ab||cb.w!==ra)J.vertexAttrib4f(Sb,pd,Yb,ab,ra),cb.x=pd,cb.y=Yb,cb.z=ab,cb.w=ra;G.buffer=a.positionFractBuffer;Nb=!1;Cd=null;ic=0;Ob=!1;Pb=ud=0;Ma=1;nb=0;tb=5126;Qb=lc=Na=gb=0;Ub(G)?(Nb=!0,Cd=la.createStream(34962,G),tb=Cd.dtype):(Cd=la.getBuffer(G))?tb=Cd.dtype:"constant"in G?(Ma=2,"number"===typeof G.constant?(Na=G.constant,lc=Qb=gb=0):(Na=0<G.constant.length?G.constant[0]:0,lc=1<G.constant.length?G.constant[1]:0,Qb=2<G.constant.length?G.constant[2]:0,gb=3<G.constant.length?G.constant[3]:
0)):(Cd=Ub(G.buffer)?la.createStream(34962,G.buffer):la.getBuffer(G.buffer),tb="type"in G?ua[G.type]:Cd.dtype,Ob=!!G.normalized,Pb=G.size|0,ud=G.offset|0,nb=G.stride|0,ic=G.divisor|0);id=k.location;db=qc[id];if(1===Ma){db.buffer||J.enableVertexAttribArray(id);fc=Pb||2;if(db.type!==tb||db.size!==fc||db.buffer!==Cd||db.normalized!==Ob||db.offset!==ud||db.stride!==nb)J.bindBuffer(34962,Cd.buffer),J.vertexAttribPointer(id,fc,tb,Ob,nb,ud),db.type=tb,db.size=fc,db.buffer=Cd,db.normalized=Ob,db.offset=ud,
db.stride=nb;db.divisor!==ic&&(I.vertexAttribDivisorANGLE(id,ic),db.divisor=ic)}else if(db.buffer&&(J.disableVertexAttribArray(id),db.buffer=null),db.x!==Na||db.y!==lc||db.z!==Qb||db.w!==gb)J.vertexAttrib4f(id,Na,lc,Qb,gb),db.x=Na,db.y=lc,db.z=Qb,db.w=gb;x.buffer=a.colorBuffer;Hc=!1;ac=null;jb=0;kb=!1;ob=ta=0;wa=1;Ta=0;bb=5126;zb=Ka=eb=Ba=0;Ub(x)?(Hc=!0,ac=la.createStream(34962,x),bb=ac.dtype):(ac=la.getBuffer(x))?bb=ac.dtype:"constant"in x?(wa=2,"number"===typeof x.constant?(eb=x.constant,Ka=zb=
Ba=0):(eb=0<x.constant.length?x.constant[0]:0,Ka=1<x.constant.length?x.constant[1]:0,zb=2<x.constant.length?x.constant[2]:0,Ba=3<x.constant.length?x.constant[3]:0)):(ac=Ub(x.buffer)?la.createStream(34962,x.buffer):la.getBuffer(x.buffer),bb="type"in x?ua[x.type]:ac.dtype,kb=!!x.normalized,ob=x.size|0,ta=x.offset|0,Ta=x.stride|0,jb=x.divisor|0);yb=ca.location;Ra=qc[yb];if(1===wa){Ra.buffer||J.enableVertexAttribArray(yb);Kc=ob||4;if(Ra.type!==bb||Ra.size!==Kc||Ra.buffer!==ac||Ra.normalized!==kb||Ra.offset!==
ta||Ra.stride!==Ta)J.bindBuffer(34962,ac.buffer),J.vertexAttribPointer(yb,Kc,bb,kb,Ta,ta),Ra.type=bb,Ra.size=Kc,Ra.buffer=ac,Ra.normalized=kb,Ra.offset=ta,Ra.stride=Ta;Ra.divisor!==jb&&(I.vertexAttribDivisorANGLE(yb,jb),Ra.divisor=jb)}else if(Ra.buffer&&(J.disableVertexAttribArray(yb),Ra.buffer=null),Ra.x!==eb||Ra.y!==Ka||Ra.z!==zb||Ra.w!==Ba)J.vertexAttrib4f(yb,eb,Ka,zb,Ba),Ra.x=eb,Ra.y=Ka,Ra.z=zb,Ra.w=Ba;Eb=ka.location;Gb=qc[Eb];Gb.buffer||J.enableVertexAttribArray(Eb);if(5126!==Gb.type||1!==Gb.size||
Gb.buffer!==d||!1!==Gb.normalized||0!==Gb.offset||8!==Gb.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer(Eb,1,5126,!1,8,0),Gb.type=5126,Gb.size=1,Gb.buffer=d,Gb.normalized=!1,Gb.offset=0,Gb.stride=8;0!==Gb.divisor&&(I.vertexAttribDivisorANGLE(Eb,0),Gb.divisor=0);Rb=H.location;ya=qc[Rb];ya.buffer||J.enableVertexAttribArray(Rb);if(5126!==ya.type||1!==ya.size||ya.buffer!==c||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)J.bindBuffer(34962,c.buffer),J.vertexAttribPointer(Rb,1,5126,!1,8,4),
ya.type=5126,ya.size=1,ya.buffer=c,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&(I.vertexAttribDivisorANGLE(Rb,0),ya.divisor=0);jd=a.scale;J.uniform2f(f.location,jd[0],jd[1]);La=a.scaleFract;J.uniform2f(m.location,La[0],La[1]);Kb=a.translate;J.uniform2f(ja.location,Kb[0],Kb[1]);fb=a.translateFract;J.uniform2f(ma.location,fb[0],fb[1]);J.uniform1f(Q.location,a.thickness);J.uniform1f(A.location,a.depth);hb=p.call(this,Pa,a,0);J.uniform4f(gd.location,hb[0],hb[1],hb[2],hb[3]);J.uniform1f(L.location,
a.dashLength);J.uniform1f(R.location,a.opacity);(za=a.dashTexture)&&"framebuffer"===za._reglType&&(za=za.color[0]);cc=za._texture;J.uniform1i(P.location,cc.bind());(Ga=K.elements)?J.bindBuffer(34963,Ga.buffer.buffer):ha.currentVAO&&(Ga=N.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,Ga.buffer.buffer);pb=a.count;0<pb?Ga?I.drawElementsInstancedANGLE(5,4,Ga.type,0<<(Ga.type-5121>>1),pb):I.drawArraysInstancedANGLE(5,0,4,pb):0>pb&&(Ga?J.drawElements(5,4,Ga.type,0<<(Ga.type-5121>>1)):J.drawArrays(5,
0,4));Z.dirty=!0;ha.setVAO(null);Pa.viewportWidth=B;Pa.viewportHeight=E;pa&&(b.cpuTime+=performance.now()-y);T&&la.destroyStream(na);wd&&la.destroyStream(sd);Qd&&la.destroyStream(od);Nb&&la.destroyStream(Cd);Hc&&la.destroyStream(ac);cc.unbind()},scope:function(a,f,g){var h,k,m,p,t,w,A,M,F,H,N,I,y,J,na,P,L,V,Y,ia,Q,ga,ca,ea,ha,R,nc,v,Fa,ka,oa,sa,va,ja,vd,wc,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,sb,Lc,$b,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,xa,Yb,ab,Sb,cb,Aa,Nb,ma,jc,Ob,ib,Pb,Ma,nb,tb,gb,Na,lc,Qb,Fc,db,fc,Hc,ac,jb,kb,ta,
ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,bc,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,qc,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,Gf,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,gd,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le;h=a.viewport;k=h.x|0;m=h.y|0;p="width"in h?h.width|0:Pa.framebufferWidth-k;t="height"in h?
h.height|0:Pa.framebufferHeight-m;w=Pa.viewportWidth;Pa.viewportWidth=p;A=Pa.viewportHeight;Pa.viewportHeight=t;M=B[0];B[0]=k;F=B[1];B[1]=m;H=B[2];B[2]=p;N=B[3];B[3]=t;I=da[0];da[0]=0;y=da[1];da[1]=0;J=da[2];da[2]=0;na=da[3];da[3]=0;P=Za.blend_enable;Za.blend_enable=!0;L=Qa[0];Qa[0]=32774;V=Qa[1];Qa[1]=32774;Y=Ua[0];Ua[0]=770;ia=Ua[1];Ua[1]=771;Q=Ua[2];Ua[2]=773;ga=Ua[3];Ua[3]=1;ca=e.call(this,Pa,a,g);ea=Za.depth_enable;Za.depth_enable=ca;ha=a.viewport;R=ha.x|0;nc=ha.y|0;v="width"in ha?ha.width|0:
Pa.framebufferWidth-R;Fa="height"in ha?ha.height|0:Pa.framebufferHeight-nc;ka=aa[0];aa[0]=R;oa=aa[1];aa[1]=nc;sa=aa[2];aa[2]=v;va=aa[3];aa[3]=Fa;ja=Za.scissor_enable;Za.scissor_enable=!0;vd=Za.stencil_enable;Za.stencil_enable=!1;if(wc=Z.profile)Rc=performance.now(),b.count++;Mc=K.offset;K.offset=0;oc=K.count;K.count=4;$a=a.count;hc=K.instances;K.instances=$a;Bb=K.primitive;K.primitive=5;mc=a.dashLength;Sa=z[23];z[23]=mc;Jc=a.dashTexture;Xb=z[24];z[24]=Jc;sb=a.depth;Lc=z[22];z[22]=sb;$b=a.id;sc=z[31];
z[31]=$b;Vb=a.miterLimit;Gc=z[32];z[32]=Vb;Sc=l.call(this,Pa,a,g);Jb=z[33];z[33]=Sc;zc=a.opacity;Wa=z[10];z[10]=zc;ra=Pa.pixelRatio;xa=z[34];z[34]=ra;Yb=a.scale;ab=z[6];z[6]=Yb;Sb=a.scaleFract;cb=z[7];z[7]=Sb;Aa=a.thickness;Nb=z[21];z[21]=Aa;ma=a.translate;jc=z[8];z[8]=ma;Ob=a.translateFract;ib=z[9];z[9]=Ob;Pb=u.call(this,Pa,a,g);Ma=z[3];z[3]=Pb;X.buffer=a.positionBuffer;nb=!1;tb=null;gb=0;Na=!1;Qb=lc=0;Fc=1;db=0;fc=5126;kb=jb=ac=Hc=0;Ub(X)?(nb=!0,tb=la.createStream(34962,X),fc=tb.dtype):(tb=la.getBuffer(X))?
fc=tb.dtype:"constant"in X?(Fc=2,"number"===typeof X.constant?(ac=X.constant,jb=kb=Hc=0):(ac=0<X.constant.length?X.constant[0]:0,jb=1<X.constant.length?X.constant[1]:0,kb=2<X.constant.length?X.constant[2]:0,Hc=3<X.constant.length?X.constant[3]:0)):(tb=Ub(X.buffer)?la.createStream(34962,X.buffer):la.getBuffer(X.buffer),fc="type"in X?ua[X.type]:tb.dtype,Na=!!X.normalized,Qb=X.size|0,lc=X.offset|0,db=X.stride|0,gb=X.divisor|0);ta=W.buffer;W.buffer=tb;ob=W.divisor;W.divisor=gb;wa=W.normalized;W.normalized=
Na;Ta=W.offset;W.offset=lc;bb=W.size;W.size=Qb;Ba=W.state;W.state=Fc;eb=W.stride;W.stride=db;Ka=W.type;W.type=fc;zb=W.w;W.w=Hc;yb=W.x;W.x=ac;Ra=W.y;W.y=jb;Kc=W.z;W.z=kb;fa.buffer=a.positionFractBuffer;Eb=!1;Gb=null;Rb=0;ya=!1;La=jd=0;Kb=1;fb=0;hb=5126;pb=Ga=cc=za=0;Ub(fa)?(Eb=!0,Gb=la.createStream(34962,fa),hb=Gb.dtype):(Gb=la.getBuffer(fa))?hb=Gb.dtype:"constant"in fa?(Kb=2,"number"===typeof fa.constant?(cc=fa.constant,Ga=pb=za=0):(cc=0<fa.constant.length?fa.constant[0]:0,Ga=1<fa.constant.length?
fa.constant[1]:0,pb=2<fa.constant.length?fa.constant[2]:0,za=3<fa.constant.length?fa.constant[3]:0)):(Gb=Ub(fa.buffer)?la.createStream(34962,fa.buffer):la.getBuffer(fa.buffer),hb="type"in fa?ua[fa.type]:Gb.dtype,ya=!!fa.normalized,La=fa.size|0,jd=fa.offset|0,fb=fa.stride|0,Rb=fa.divisor|0);qb=n.buffer;n.buffer=Gb;Xa=n.divisor;n.divisor=Rb;Ya=n.normalized;n.normalized=ya;kc=n.offset;n.offset=jd;vc=n.size;n.size=La;tc=n.state;n.state=Kb;Va=n.stride;n.stride=fb;Hb=n.type;n.type=hb;Cc=n.w;n.w=za;Ia=n.x;
n.x=cc;xc=n.y;n.y=Ga;Oa=n.z;n.z=pb;qa.buffer=a.positionBuffer;Ca=!1;lb=null;ub=0;Ab=!1;uc=rb=0;vb=1;kd=0;pc=5126;fd=ed=Nc=bc=0;Ub(qa)?(Ca=!0,lb=la.createStream(34962,qa),pc=lb.dtype):(lb=la.getBuffer(qa))?pc=lb.dtype:"constant"in qa?(vb=2,"number"===typeof qa.constant?(Nc=qa.constant,ed=fd=bc=0):(Nc=0<qa.constant.length?qa.constant[0]:0,ed=1<qa.constant.length?qa.constant[1]:0,fd=2<qa.constant.length?qa.constant[2]:0,bc=3<qa.constant.length?qa.constant[3]:0)):(lb=Ub(qa.buffer)?la.createStream(34962,
qa.buffer):la.getBuffer(qa.buffer),pc="type"in qa?ua[qa.type]:lb.dtype,Ab=!!qa.normalized,uc=qa.size|0,rb=qa.offset|0,kd=qa.stride|0,ub=qa.divisor|0);Tb=E.buffer;E.buffer=lb;Zb=E.divisor;E.divisor=ub;Lb=E.normalized;E.normalized=Ab;Ja=E.offset;E.offset=rb;Wb=E.size;E.size=uc;mb=E.state;E.state=vb;wb=E.stride;E.stride=kd;Ib=E.type;E.type=pc;Mb=E.w;E.w=bc;dc=E.x;E.x=Nc;gc=E.y;E.y=ed;qc=E.z;E.z=fd;G.buffer=a.positionFractBuffer;Gd=!1;Bc=null;Dc=0;Oc=!1;Tc=$c=0;Pc=1;Fb=0;Cb=5126;ec=Uc=Ic=Qc=0;Ub(G)?(Gd=
!0,Bc=la.createStream(34962,G),Cb=Bc.dtype):(Bc=la.getBuffer(G))?Cb=Bc.dtype:"constant"in G?(Pc=2,"number"===typeof G.constant?(Ic=G.constant,Uc=ec=Qc=0):(Ic=0<G.constant.length?G.constant[0]:0,Uc=1<G.constant.length?G.constant[1]:0,ec=2<G.constant.length?G.constant[2]:0,Qc=3<G.constant.length?G.constant[3]:0)):(Bc=Ub(G.buffer)?la.createStream(34962,G.buffer):la.getBuffer(G.buffer),Cb="type"in G?ua[G.type]:Bc.dtype,Oc=!!G.normalized,Tc=G.size|0,$c=G.offset|0,Fb=G.stride|0,Dc=G.divisor|0);Xc=r.buffer;
r.buffer=Bc;bd=r.divisor;r.divisor=Dc;qd=r.normalized;r.normalized=Oc;ld=r.offset;r.offset=$c;Yc=r.size;r.size=Tc;Gf=r.state;r.state=Pc;Wd=r.stride;r.stride=Fb;je=r.type;r.type=Cb;Je=r.w;r.w=Qc;me=r.x;r.x=Ic;Hd=r.y;r.y=Uc;Ed=r.z;r.z=ec;x.buffer=a.colorBuffer;dd=!1;Ec=null;rd=0;hd=!1;md=ad=0;Dd=1;zd=0;we=5126;ee=ne=gd=ue=0;Ub(x)?(dd=!0,Ec=la.createStream(34962,x),we=Ec.dtype):(Ec=la.getBuffer(x))?we=Ec.dtype:"constant"in x?(Dd=2,"number"===typeof x.constant?(gd=x.constant,ne=ee=ue=0):(gd=0<x.constant.length?
x.constant[0]:0,ne=1<x.constant.length?x.constant[1]:0,ee=2<x.constant.length?x.constant[2]:0,ue=3<x.constant.length?x.constant[3]:0)):(Ec=Ub(x.buffer)?la.createStream(34962,x.buffer):la.getBuffer(x.buffer),we="type"in x?ua[x.type]:Ec.dtype,hd=!!x.normalized,md=x.size|0,ad=x.offset|0,zd=x.stride|0,rd=x.divisor|0);be=C.buffer;C.buffer=Ec;pe=C.divisor;C.divisor=rd;$d=C.normalized;C.normalized=hd;ge=C.offset;C.offset=ad;yc=C.size;C.size=md;Wc=C.state;C.state=Dd;qe=C.stride;C.stride=zd;ke=C.type;C.type=
we;Fd=C.w;C.w=ue;Ld=C.x;C.x=gd;Md=C.y;C.y=ne;Nd=C.z;C.z=ee;he=S.buffer;S.buffer=d;Te=S.divisor;S.divisor=0;xe=S.normalized;S.normalized=!1;oe=S.offset;S.offset=0;Ne=S.size;S.size=0;Oe=S.state;S.state=1;Ke=S.stride;S.stride=8;re=S.type;S.type=5126;Be=S.w;S.w=0;De=S.x;S.x=0;Ee=S.y;S.y=0;Fe=S.z;S.z=0;Ce=D.buffer;D.buffer=c;Id=D.divisor;D.divisor=0;Rd=D.normalized;D.normalized=!1;Xd=D.offset;D.offset=4;ae=D.size;D.size=0;Ge=D.state;D.state=1;Bd=D.stride;D.stride=8;Od=D.type;D.type=5126;ye=D.w;D.w=0;He=
D.x;D.x=0;ff=D.y;D.y=0;Ye=D.z;D.z=0;Pe=T.vert;T.vert=20;Le=T.frag;T.frag=19;Z.dirty=!0;f(Pa,a,g);Pa.viewportWidth=w;Pa.viewportHeight=A;B[0]=M;B[1]=F;B[2]=H;B[3]=N;da[0]=I;da[1]=y;da[2]=J;da[3]=na;Za.blend_enable=P;Qa[0]=L;Qa[1]=V;Ua[0]=Y;Ua[1]=ia;Ua[2]=Q;Ua[3]=ga;Za.depth_enable=ea;aa[0]=ka;aa[1]=oa;aa[2]=sa;aa[3]=va;Za.scissor_enable=ja;Za.stencil_enable=vd;wc&&(b.cpuTime+=performance.now()-Rc);K.offset=Mc;K.count=oc;K.instances=hc;K.primitive=Bb;z[23]=Sa;z[24]=Xb;z[22]=Lc;z[31]=sc;z[32]=Gc;z[33]=
Jb;z[10]=Wa;z[34]=xa;z[6]=ab;z[7]=cb;z[21]=Nb;z[8]=jc;z[9]=ib;z[3]=Ma;nb&&la.destroyStream(tb);W.buffer=ta;W.divisor=ob;W.normalized=wa;W.offset=Ta;W.size=bb;W.state=Ba;W.stride=eb;W.type=Ka;W.w=zb;W.x=yb;W.y=Ra;W.z=Kc;Eb&&la.destroyStream(Gb);n.buffer=qb;n.divisor=Xa;n.normalized=Ya;n.offset=kc;n.size=vc;n.state=tc;n.stride=Va;n.type=Hb;n.w=Cc;n.x=Ia;n.y=xc;n.z=Oa;Ca&&la.destroyStream(lb);E.buffer=Tb;E.divisor=Zb;E.normalized=Lb;E.offset=Ja;E.size=Wb;E.state=mb;E.stride=wb;E.type=Ib;E.w=Mb;E.x=dc;
E.y=gc;E.z=qc;Gd&&la.destroyStream(Bc);r.buffer=Xc;r.divisor=bd;r.normalized=qd;r.offset=ld;r.size=Yc;r.state=Gf;r.stride=Wd;r.type=je;r.w=Je;r.x=me;r.y=Hd;r.z=Ed;dd&&la.destroyStream(Ec);C.buffer=be;C.divisor=pe;C.normalized=$d;C.offset=ge;C.size=yc;C.state=Wc;C.stride=qe;C.type=ke;C.w=Fd;C.x=Ld;C.y=Md;C.z=Nd;S.buffer=he;S.divisor=Te;S.normalized=xe;S.offset=oe;S.size=Ne;S.state=Oe;S.stride=Ke;S.type=re;S.w=Be;S.x=De;S.y=Ee;S.z=Fe;D.buffer=Ce;D.divisor=Id;D.normalized=Rd;D.offset=Xd;D.size=ae;D.state=
Ge;D.stride=Bd;D.type=Od;D.w=ye;D.x=He;D.y=ff;D.z=Ye;T.vert=Pe;T.frag=Le;Z.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,b,g,h,d,c,p,e,l,u,W,n,E,r,C,S,D,y,v,I,xa,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,gd,qc,la,Pa,Z){var K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va,$b,nc,jc,vd,wc,aa,M,ia,Fa,sb,Lc,Fc,F,B,ga,ua,X,fa,qa,G,x,ba,O,Ea,Ha,q;K=a.attributes;N=a.buffer;
V=a.context;sa=a.current;J=a.draw;Ub=a.elements;Za=a.extensions;T=a.framebuffer;z=a.gl;ha=a.isBufferArgs;da=a.next;Aa=a.shader;Qa=a.uniforms;bc=a.vao;Ua=da.blend_color;Y=sa.blend_color;ib=da.blend_equation;ea=sa.blend_equation;va=da.blend_func;$b=sa.blend_func;nc=da.colorMask;jc=sa.colorMask;vd=da.depth_range;wc=sa.depth_range;aa=da.polygonOffset_offset;M=sa.polygonOffset_offset;ia=da.sample_coverage;Fa=sa.sample_coverage;sb=da.scissor_box;Lc=sa.scissor_box;Fc=da.stencil_func;F=sa.stencil_func;B=
da.stencil_opBack;ga=sa.stencil_opBack;ua=da.stencil_opFront;X=sa.stencil_opFront;fa=da.viewport;qa=sa.viewport;G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};x={divisor:1,offset:0,stride:4};ba={divisor:1,offset:8,stride:8};O={divisor:1,offset:4,stride:4};Ea={divisor:1,offset:16,stride:8};Ha={divisor:1,offset:24,stride:8};q={divisor:1,offset:0,stride:8};return{batch:function(a,e){var g,h,l,p,n,r;g=T.next;g!==T.cur&&(g?z.bindFramebuffer(36160,g.framebuffer):
z.bindFramebuffer(36160,null),T.cur=g);if(sa.dirty){var E,D,C,u,W,y,S,pa,fa,v,na,va,sb,Aa,oa,de,Td,Qa,Ua,td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a;E=da.dither;E!==sa.dither&&(E?z.enable(3024):z.disable(3024),sa.dither=E);D=da.depth_func;D!==sa.depth_func&&(z.depthFunc(D),sa.depth_func=D);C=vd[0];u=vd[1];if(C!==wc[0]||u!==wc[1])z.depthRange(C,u),wc[0]=C,wc[1]=u;W=da.depth_mask;W!==sa.depth_mask&&(z.depthMask(W),sa.depth_mask=W);y=nc[0];S=nc[1];pa=nc[2];fa=nc[3];if(y!==jc[0]||S!==jc[1]||pa!==jc[2]||fa!==jc[3])z.colorMask(y,
S,pa,fa),jc[0]=y,jc[1]=S,jc[2]=pa,jc[3]=fa;v=da.frontFace;v!==sa.frontFace&&(z.frontFace(v),sa.frontFace=v);na=da.lineWidth;na!==sa.lineWidth&&(z.lineWidth(na),sa.lineWidth=na);va=da.polygonOffset_enable;va!==sa.polygonOffset_enable&&(va?z.enable(32823):z.disable(32823),sa.polygonOffset_enable=va);sb=aa[0];Aa=aa[1];if(sb!==M[0]||Aa!==M[1])z.polygonOffset(sb,Aa),M[0]=sb,M[1]=Aa;oa=da.sample_alpha;oa!==sa.sample_alpha&&(oa?z.enable(32926):z.disable(32926),sa.sample_alpha=oa);de=da.sample_enable;de!==
sa.sample_enable&&(de?z.enable(32928):z.disable(32928),sa.sample_enable=de);Td=ia[0];Qa=ia[1];if(Td!==Fa[0]||Qa!==Fa[1])z.sampleCoverage(Td,Qa),Fa[0]=Td,Fa[1]=Qa;Ua=da.stencil_mask;Ua!==sa.stencil_mask&&(z.stencilMask(Ua),sa.stencil_mask=Ua);td=Fc[0];nd=Fc[1];wd=Fc[2];if(td!==F[0]||nd!==F[1]||wd!==F[2])z.stencilFunc(td,nd,wd),F[0]=td,F[1]=nd,F[2]=wd;sd=ua[0];cd=ua[1];Vc=ua[2];yd=ua[3];if(sd!==X[0]||cd!==X[1]||Vc!==X[2]||yd!==X[3])z.stencilOpSeparate(sd,cd,Vc,yd),X[0]=sd,X[1]=cd,X[2]=Vc,X[3]=yd;Rc=
B[0];Mc=B[1];oc=B[2];$a=B[3];if(Rc!==ga[0]||Mc!==ga[1]||oc!==ga[2]||$a!==ga[3])z.stencilOpSeparate(Rc,Mc,oc,$a),ga[0]=Rc,ga[1]=Mc,ga[2]=oc,ga[3]=$a}z.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;z.enable(3042);sa.blend_enable=!0;z.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;z.blendFuncSeparate(770,771,773,1);$b[0]=770;$b[1]=771;$b[2]=773;$b[3]=1;z.enable(2884);sa.cull_enable=!0;z.cullFace(1029);sa.cull_face=1029;z.enable(3089);sa.scissor_enable=!0;z.disable(2960);sa.stencil_enable=
!1;if(h=sa.profile)l=performance.now(),b.count+=e;z.useProgram(I.program);p=Za.angle_instanced_arrays;var hc,Bb,mc,Sa,Jc;bc.setVAO(null);hc=R.location;Bb=K[hc];Bb.buffer||z.enableVertexAttribArray(hc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==d||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)z.bindBuffer(34962,d.buffer),z.vertexAttribPointer(hc,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=d,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(p.vertexAttribDivisorANGLE(hc,0),Bb.divisor=
0);mc=f.location;Sa=K[mc];Sa.buffer||z.enableVertexAttribArray(mc);if(5126!==Sa.type||1!==Sa.size||Sa.buffer!==c||!1!==Sa.normalized||4!==Sa.offset||8!==Sa.stride)z.bindBuffer(34962,c.buffer),z.vertexAttribPointer(mc,1,5126,!1,8,4),Sa.type=5126,Sa.size=1,Sa.buffer=c,Sa.normalized=!1,Sa.offset=4,Sa.stride=8;0!==Sa.divisor&&(p.vertexAttribDivisorANGLE(mc,0),Sa.divisor=0);(Jc=J.elements)?z.bindBuffer(34963,Jc.buffer.buffer):bc.currentVAO&&(Jc=Ub.getElements(bc.currentVAO.elements))&&z.bindBuffer(34963,
Jc.buffer.buffer);for(n=0;n<e;++n){r=a[n];var Xb,Zc,ib,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,vf,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,Gf,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,Ve,ne,ee,be,pe,$d,ge,yc;Xb=r.viewport;Zc=Xb.x|0;ib=
Xb.y|0;od="width"in Xb?Xb.width|0:V.framebufferWidth-Zc;sc="height"in Xb?Xb.height|0:V.framebufferHeight-ib;Vb=V.viewportWidth;V.viewportWidth=od;Gc=V.viewportHeight;V.viewportHeight=sc;z.viewport(Zc,ib,od,sc);qa[0]=Zc;qa[1]=ib;qa[2]=od;qa[3]=sc;(Sc=xa.call(this,V,r,n))?z.enable(2929):z.disable(2929);sa.depth_enable=Sc;Jb=r.viewport;zc=Jb.x|0;Wa=Jb.y|0;ra="width"in Jb?Jb.width|0:V.framebufferWidth-zc;pd="height"in Jb?Jb.height|0:V.framebufferHeight-Wa;z.scissor(zc,Wa,ra,pd);Lc[0]=zc;Lc[1]=Wa;Lc[2]=
ra;Lc[3]=pd;ba.buffer=r.positionBuffer;Yb=!1;ab=null;Sb=0;cb=!1;Nb=Ac=0;Cd=1;ic=0;Ob=5126;nb=Ma=Pb=ud=0;ha(ba)?(Yb=!0,ab=N.createStream(34962,ba),Ob=ab.dtype):(ab=N.getBuffer(ba))?Ob=ab.dtype:"constant"in ba?(Cd=2,"number"===typeof ba.constant?(Pb=ba.constant,Ma=nb=ud=0):(Pb=0<ba.constant.length?ba.constant[0]:0,Ma=1<ba.constant.length?ba.constant[1]:0,nb=2<ba.constant.length?ba.constant[2]:0,ud=3<ba.constant.length?ba.constant[3]:0)):(ab=ha(ba.buffer)?N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),
Ob="type"in ba?G[ba.type]:ab.dtype,cb=!!ba.normalized,Nb=ba.size|0,Ac=ba.offset|0,ic=ba.stride|0,Sb=ba.divisor|0);tb=ca.location;gb=K[tb];if(1===Cd){gb.buffer||z.enableVertexAttribArray(tb);Na=Nb||2;if(gb.type!==Ob||gb.size!==Na||gb.buffer!==ab||gb.normalized!==cb||gb.offset!==Ac||gb.stride!==ic)z.bindBuffer(34962,ab.buffer),z.vertexAttribPointer(tb,Na,Ob,cb,ic,Ac),gb.type=Ob,gb.size=Na,gb.buffer=ab,gb.normalized=cb,gb.offset=Ac,gb.stride=ic;gb.divisor!==Sb&&(p.vertexAttribDivisorANGLE(tb,Sb),gb.divisor=
Sb)}else if(gb.buffer&&(z.disableVertexAttribArray(tb),gb.buffer=null),gb.x!==Pb||gb.y!==Ma||gb.z!==nb||gb.w!==ud)z.vertexAttrib4f(tb,Pb,Ma,nb,ud),gb.x=Pb,gb.y=Ma,gb.z=nb,gb.w=ud;Ea.buffer=r.positionBuffer;lc=!1;Qb=null;id=0;db=!1;Hc=fc=0;ac=1;jb=0;kb=5126;Ta=wa=ob=ta=0;ha(Ea)?(lc=!0,Qb=N.createStream(34962,Ea),kb=Qb.dtype):(Qb=N.getBuffer(Ea))?kb=Qb.dtype:"constant"in Ea?(ac=2,"number"===typeof Ea.constant?(ob=Ea.constant,wa=Ta=ta=0):(ob=0<Ea.constant.length?Ea.constant[0]:0,wa=1<Ea.constant.length?
Ea.constant[1]:0,Ta=2<Ea.constant.length?Ea.constant[2]:0,ta=3<Ea.constant.length?Ea.constant[3]:0)):(Qb=ha(Ea.buffer)?N.createStream(34962,Ea.buffer):N.getBuffer(Ea.buffer),kb="type"in Ea?G[Ea.type]:Qb.dtype,db=!!Ea.normalized,Hc=Ea.size|0,fc=Ea.offset|0,jb=Ea.stride|0,id=Ea.divisor|0);bb=P.location;Ba=K[bb];if(1===ac){Ba.buffer||z.enableVertexAttribArray(bb);eb=Hc||2;if(Ba.type!==kb||Ba.size!==eb||Ba.buffer!==Qb||Ba.normalized!==db||Ba.offset!==fc||Ba.stride!==jb)z.bindBuffer(34962,Qb.buffer),z.vertexAttribPointer(bb,
eb,kb,db,jb,fc),Ba.type=kb,Ba.size=eb,Ba.buffer=Qb,Ba.normalized=db,Ba.offset=fc,Ba.stride=jb;Ba.divisor!==id&&(p.vertexAttribDivisorANGLE(bb,id),Ba.divisor=id)}else if(Ba.buffer&&(z.disableVertexAttribArray(bb),Ba.buffer=null),Ba.x!==ob||Ba.y!==wa||Ba.z!==Ta||Ba.w!==ta)z.vertexAttrib4f(bb,ob,wa,Ta,ta),Ba.x=ob,Ba.y=wa,Ba.z=Ta,Ba.w=ta;Ha.buffer=r.positionBuffer;Ka=!1;zb=null;yb=0;Ra=!1;Eb=Kc=0;Gb=1;Rb=0;ya=5126;fb=Kb=La=jd=0;ha(Ha)?(Ka=!0,zb=N.createStream(34962,Ha),ya=zb.dtype):(zb=N.getBuffer(Ha))?
ya=zb.dtype:"constant"in Ha?(Gb=2,"number"===typeof Ha.constant?(La=Ha.constant,Kb=fb=jd=0):(La=0<Ha.constant.length?Ha.constant[0]:0,Kb=1<Ha.constant.length?Ha.constant[1]:0,fb=2<Ha.constant.length?Ha.constant[2]:0,jd=3<Ha.constant.length?Ha.constant[3]:0)):(zb=ha(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),ya="type"in Ha?G[Ha.type]:zb.dtype,Ra=!!Ha.normalized,Eb=Ha.size|0,Kc=Ha.offset|0,Rb=Ha.stride|0,yb=Ha.divisor|0);hb=ja.location;za=K[hb];if(1===Gb){za.buffer||z.enableVertexAttribArray(hb);
cc=Eb||2;if(za.type!==ya||za.size!==cc||za.buffer!==zb||za.normalized!==Ra||za.offset!==Kc||za.stride!==Rb)z.bindBuffer(34962,zb.buffer),z.vertexAttribPointer(hb,cc,ya,Ra,Rb,Kc),za.type=ya,za.size=cc,za.buffer=zb,za.normalized=Ra,za.offset=Kc,za.stride=Rb;za.divisor!==yb&&(p.vertexAttribDivisorANGLE(hb,yb),za.divisor=yb)}else if(za.buffer&&(z.disableVertexAttribArray(hb),za.buffer=null),za.x!==La||za.y!==Kb||za.z!==fb||za.w!==jd)z.vertexAttrib4f(hb,La,Kb,fb,jd),za.x=La,za.y=Kb,za.z=fb,za.w=jd;q.buffer=
r.positionBuffer;Ga=!1;pb=null;qb=0;Xa=!1;kc=Ya=0;vc=1;tc=0;Va=5126;xc=Ia=Cc=Hb=0;ha(q)?(Ga=!0,pb=N.createStream(34962,q),Va=pb.dtype):(pb=N.getBuffer(q))?Va=pb.dtype:"constant"in q?(vc=2,"number"===typeof q.constant?(Cc=q.constant,Ia=xc=Hb=0):(Cc=0<q.constant.length?q.constant[0]:0,Ia=1<q.constant.length?q.constant[1]:0,xc=2<q.constant.length?q.constant[2]:0,Hb=3<q.constant.length?q.constant[3]:0)):(pb=ha(q.buffer)?N.createStream(34962,q.buffer):N.getBuffer(q.buffer),Va="type"in q?G[q.type]:pb.dtype,
Xa=!!q.normalized,kc=q.size|0,Ya=q.offset|0,tc=q.stride|0,qb=q.divisor|0);Oa=gd.location;Ca=K[Oa];if(1===vc){Ca.buffer||z.enableVertexAttribArray(Oa);lb=kc||2;if(Ca.type!==Va||Ca.size!==lb||Ca.buffer!==pb||Ca.normalized!==Xa||Ca.offset!==Ya||Ca.stride!==tc)z.bindBuffer(34962,pb.buffer),z.vertexAttribPointer(Oa,lb,Va,Xa,tc,Ya),Ca.type=Va,Ca.size=lb,Ca.buffer=pb,Ca.normalized=Xa,Ca.offset=Ya,Ca.stride=tc;Ca.divisor!==qb&&(p.vertexAttribDivisorANGLE(Oa,qb),Ca.divisor=qb)}else if(Ca.buffer&&(z.disableVertexAttribArray(Oa),
Ca.buffer=null),Ca.x!==Cc||Ca.y!==Ia||Ca.z!==xc||Ca.w!==Hb)z.vertexAttrib4f(Oa,Cc,Ia,xc,Hb),Ca.x=Cc,Ca.y=Ia,Ca.z=xc,Ca.w=Hb;x.buffer=r.colorBuffer;ub=!1;Ab=null;rb=0;uc=!1;kd=vb=0;pc=1;Ae=0;Nc=5126;Zb=Tb=fd=ed=0;ha(x)?(ub=!0,Ab=N.createStream(34962,x),Nc=Ab.dtype):(Ab=N.getBuffer(x))?Nc=Ab.dtype:"constant"in x?(pc=2,"number"===typeof x.constant?(fd=x.constant,Tb=Zb=ed=0):(fd=0<x.constant.length?x.constant[0]:0,Tb=1<x.constant.length?x.constant[1]:0,Zb=2<x.constant.length?x.constant[2]:0,ed=3<x.constant.length?
x.constant[3]:0)):(Ab=ha(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),Nc="type"in x?G[x.type]:Ab.dtype,uc=!!x.normalized,kd=x.size|0,vb=x.offset|0,Ae=x.stride|0,rb=x.divisor|0);Lb=k.location;Ja=K[Lb];if(1===pc){Ja.buffer||z.enableVertexAttribArray(Lb);Wb=kd||4;if(Ja.type!==Nc||Ja.size!==Wb||Ja.buffer!==Ab||Ja.normalized!==uc||Ja.offset!==vb||Ja.stride!==Ae)z.bindBuffer(34962,Ab.buffer),z.vertexAttribPointer(Lb,Wb,Nc,uc,Ae,vb),Ja.type=Nc,Ja.size=Wb,Ja.buffer=Ab,Ja.normalized=uc,Ja.offset=
vb,Ja.stride=Ae;Ja.divisor!==rb&&(p.vertexAttribDivisorANGLE(Lb,rb),Ja.divisor=rb)}else if(Ja.buffer&&(z.disableVertexAttribArray(Lb),Ja.buffer=null),Ja.x!==fd||Ja.y!==Tb||Ja.z!==Zb||Ja.w!==ed)z.vertexAttrib4f(Lb,fd,Tb,Zb,ed),Ja.x=fd,Ja.y=Tb,Ja.z=Zb,Ja.w=ed;O.buffer=r.colorBuffer;mb=!1;wb=null;Ib=0;Mb=!1;gc=dc=0;vf=1;Gd=0;Bc=5126;Tc=$c=Oc=Dc=0;ha(O)?(mb=!0,wb=N.createStream(34962,O),Bc=wb.dtype):(wb=N.getBuffer(O))?Bc=wb.dtype:"constant"in O?(vf=2,"number"===typeof O.constant?(Oc=O.constant,$c=Tc=
Dc=0):(Oc=0<O.constant.length?O.constant[0]:0,$c=1<O.constant.length?O.constant[1]:0,Tc=2<O.constant.length?O.constant[2]:0,Dc=3<O.constant.length?O.constant[3]:0)):(wb=ha(O.buffer)?N.createStream(34962,O.buffer):N.getBuffer(O.buffer),Bc="type"in O?G[O.type]:wb.dtype,Mb=!!O.normalized,gc=O.size|0,dc=O.offset|0,Gd=O.stride|0,Ib=O.divisor|0);Pc=L.location;Fb=K[Pc];if(1===vf){Fb.buffer||z.enableVertexAttribArray(Pc);Cb=gc||4;if(Fb.type!==Bc||Fb.size!==Cb||Fb.buffer!==wb||Fb.normalized!==Mb||Fb.offset!==
dc||Fb.stride!==Gd)z.bindBuffer(34962,wb.buffer),z.vertexAttribPointer(Pc,Cb,Bc,Mb,Gd,dc),Fb.type=Bc,Fb.size=Cb,Fb.buffer=wb,Fb.normalized=Mb,Fb.offset=dc,Fb.stride=Gd;Fb.divisor!==Ib&&(p.vertexAttribDivisorANGLE(Pc,Ib),Fb.divisor=Ib)}else if(Fb.buffer&&(z.disableVertexAttribArray(Pc),Fb.buffer=null),Fb.x!==Oc||Fb.y!==$c||Fb.z!==Tc||Fb.w!==Dc)z.vertexAttrib4f(Pc,Oc,$c,Tc,Dc),Fb.x=Oc,Fb.y=$c,Fb.z=Tc,Fb.w=Dc;Qc=r.scale;Ic=Qc[0];ec=Qc[1];n&&Uc===Ic&&Xc===ec||(Uc=Ic,Xc=ec,z.uniform2f(qc.location,Ic,ec));
bd=r.translate;qd=bd[0];Yc=bd[1];n&&ld===qd&&Gf===Yc||(ld=qd,Gf=Yc,z.uniform2f(Pa.location,qd,Yc));Wd=r.thickness;n&&je===Wd||(je=Wd,z.uniform1f(la.location,Wd));Je=r.depth;n&&me===Je||(me=Je,z.uniform1f(H.location,Je));Hd=t.call(this,V,r,n);Ed=Hd[0];Ec=Hd[1];hd=Hd[2];md=Hd[3];n&&dd===Ed&&rd===Ec&&ad===hd&&Dd===md||(dd=Ed,rd=Ec,ad=hd,Dd=md,z.uniform4f(Z.location,Ed,Ec,hd,md));zd=r.miterLimit;n&&we===zd||(we=zd,z.uniform1f(m.location,zd));ue=w.call(this,V,r,n);n&&Ve===ue||(Ve=ue,z.uniform1f(Q.location,
ue));ne=r.dashLength;n&&ee===ne||(ee=ne,z.uniform1f(A.location,ne));be=r.opacity;n&&pe===be||(pe=be,z.uniform1f(ma.location,be));($d=r.dashTexture)&&"framebuffer"===$d._reglType&&($d=$d.color[0]);ge=$d._texture;z.uniform1i(ka.location,ge.bind());yc=r.count;0<yc?Jc?p.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),yc):p.drawArraysInstancedANGLE(5,0,4,yc):0>yc&&(Jc?z.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):z.drawArrays(5,0,4));V.viewportWidth=Vb;V.viewportHeight=Gc;Yb&&N.destroyStream(ab);
lc&&N.destroyStream(Qb);Ka&&N.destroyStream(zb);Ga&&N.destroyStream(pb);ub&&N.destroyStream(Ab);mb&&N.destroyStream(wb);ge.unbind()}sa.dirty=!0;bc.setVAO(null);h&&(b.cpuTime+=performance.now()-l)},draw:function(a){var l,n,r,t,w,E,D,C,u,W,y,S,pa,I,fa,v,na,va,sb,Aa,oa,xa,Qa,Td,Ua,ib,td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,
fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd;l=T.next;l!==T.cur&&(l?z.bindFramebuffer(36160,l.framebuffer):z.bindFramebuffer(36160,null),T.cur=l);if(sa.dirty){var pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,vf,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec;pc=da.dither;pc!==sa.dither&&(pc?z.enable(3024):z.disable(3024),sa.dither=pc);Ae=da.depth_func;Ae!==sa.depth_func&&(z.depthFunc(Ae),sa.depth_func=Ae);Nc=vd[0];ed=vd[1];if(Nc!==wc[0]||ed!==wc[1])z.depthRange(Nc,ed),wc[0]=
Nc,wc[1]=ed;fd=da.depth_mask;fd!==sa.depth_mask&&(z.depthMask(fd),sa.depth_mask=fd);Tb=nc[0];Zb=nc[1];Lb=nc[2];Ja=nc[3];if(Tb!==jc[0]||Zb!==jc[1]||Lb!==jc[2]||Ja!==jc[3])z.colorMask(Tb,Zb,Lb,Ja),jc[0]=Tb,jc[1]=Zb,jc[2]=Lb,jc[3]=Ja;Wb=da.frontFace;Wb!==sa.frontFace&&(z.frontFace(Wb),sa.frontFace=Wb);mb=da.lineWidth;mb!==sa.lineWidth&&(z.lineWidth(mb),sa.lineWidth=mb);wb=da.polygonOffset_enable;wb!==sa.polygonOffset_enable&&(wb?z.enable(32823):z.disable(32823),sa.polygonOffset_enable=wb);Ib=aa[0];Mb=
aa[1];if(Ib!==M[0]||Mb!==M[1])z.polygonOffset(Ib,Mb),M[0]=Ib,M[1]=Mb;dc=da.sample_alpha;dc!==sa.sample_alpha&&(dc?z.enable(32926):z.disable(32926),sa.sample_alpha=dc);gc=da.sample_enable;gc!==sa.sample_enable&&(gc?z.enable(32928):z.disable(32928),sa.sample_enable=gc);vf=ia[0];Gd=ia[1];if(vf!==Fa[0]||Gd!==Fa[1])z.sampleCoverage(vf,Gd),Fa[0]=vf,Fa[1]=Gd;Bc=da.stencil_mask;Bc!==sa.stencil_mask&&(z.stencilMask(Bc),sa.stencil_mask=Bc);Dc=Fc[0];Oc=Fc[1];$c=Fc[2];if(Dc!==F[0]||Oc!==F[1]||$c!==F[2])z.stencilFunc(Dc,
Oc,$c),F[0]=Dc,F[1]=Oc,F[2]=$c;Tc=ua[0];Pc=ua[1];Fb=ua[2];Cb=ua[3];if(Tc!==X[0]||Pc!==X[1]||Fb!==X[2]||Cb!==X[3])z.stencilOpSeparate(Tc,Pc,Fb,Cb),X[0]=Tc,X[1]=Pc,X[2]=Fb,X[3]=Cb;Qc=B[0];Ic=B[1];Uc=B[2];ec=B[3];if(Qc!==ga[0]||Ic!==ga[1]||Uc!==ga[2]||ec!==ga[3])z.stencilOpSeparate(Qc,Ic,Uc,ec),ga[0]=Qc,ga[1]=Ic,ga[2]=Uc,ga[3]=ec}n=a.viewport;r=n.x|0;t=n.y|0;w="width"in n?n.width|0:V.framebufferWidth-r;E="height"in n?n.height|0:V.framebufferHeight-t;D=V.viewportWidth;V.viewportWidth=w;C=V.viewportHeight;
V.viewportHeight=E;z.viewport(r,t,w,E);qa[0]=r;qa[1]=t;qa[2]=w;qa[3]=E;z.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;z.enable(3042);sa.blend_enable=!0;z.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;z.blendFuncSeparate(770,771,773,1);$b[0]=770;$b[1]=771;$b[2]=773;$b[3]=1;z.enable(2884);sa.cull_enable=!0;z.cullFace(1029);sa.cull_face=1029;(u=g.call(this,V,a,0))?z.enable(2929):z.disable(2929);sa.depth_enable=u;W=a.viewport;y=W.x|0;S=W.y|0;pa="width"in W?W.width|0:V.framebufferWidth-
y;I="height"in W?W.height|0:V.framebufferHeight-S;z.scissor(y,S,pa,I);Lc[0]=y;Lc[1]=S;Lc[2]=pa;Lc[3]=I;z.enable(3089);sa.scissor_enable=!0;z.disable(2960);sa.stencil_enable=!1;if(fa=sa.profile)v=performance.now(),b.count++;z.useProgram(h.program);na=Za.angle_instanced_arrays;bc.setVAO(null);ba.buffer=a.positionBuffer;va=!1;sb=null;Aa=0;oa=!1;Qa=xa=0;Td=1;Ua=0;ib=5126;sd=wd=nd=td=0;ha(ba)?(va=!0,sb=N.createStream(34962,ba),ib=sb.dtype):(sb=N.getBuffer(ba))?ib=sb.dtype:"constant"in ba?(Td=2,"number"===
typeof ba.constant?(nd=ba.constant,wd=sd=td=0):(nd=0<ba.constant.length?ba.constant[0]:0,wd=1<ba.constant.length?ba.constant[1]:0,sd=2<ba.constant.length?ba.constant[2]:0,td=3<ba.constant.length?ba.constant[3]:0)):(sb=ha(ba.buffer)?N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),ib="type"in ba?G[ba.type]:sb.dtype,oa=!!ba.normalized,Qa=ba.size|0,xa=ba.offset|0,Ua=ba.stride|0,Aa=ba.divisor|0);cd=ca.location;Vc=K[cd];if(1===Td){Vc.buffer||z.enableVertexAttribArray(cd);yd=Qa||2;if(Vc.type!==ib||
Vc.size!==yd||Vc.buffer!==sb||Vc.normalized!==oa||Vc.offset!==xa||Vc.stride!==Ua)z.bindBuffer(34962,sb.buffer),z.vertexAttribPointer(cd,yd,ib,oa,Ua,xa),Vc.type=ib,Vc.size=yd,Vc.buffer=sb,Vc.normalized=oa,Vc.offset=xa,Vc.stride=Ua;Vc.divisor!==Aa&&(na.vertexAttribDivisorANGLE(cd,Aa),Vc.divisor=Aa)}else if(Vc.buffer&&(z.disableVertexAttribArray(cd),Vc.buffer=null),Vc.x!==nd||Vc.y!==wd||Vc.z!==sd||Vc.w!==td)z.vertexAttrib4f(cd,nd,wd,sd,td),Vc.x=nd,Vc.y=wd,Vc.z=sd,Vc.w=td;Ea.buffer=a.positionBuffer;Rc=
!1;Mc=null;oc=0;$a=!1;Bb=hc=0;mc=1;Sa=0;Jc=5126;od=Qd=Zc=Xb=0;ha(Ea)?(Rc=!0,Mc=N.createStream(34962,Ea),Jc=Mc.dtype):(Mc=N.getBuffer(Ea))?Jc=Mc.dtype:"constant"in Ea?(mc=2,"number"===typeof Ea.constant?(Zc=Ea.constant,Qd=od=Xb=0):(Zc=0<Ea.constant.length?Ea.constant[0]:0,Qd=1<Ea.constant.length?Ea.constant[1]:0,od=2<Ea.constant.length?Ea.constant[2]:0,Xb=3<Ea.constant.length?Ea.constant[3]:0)):(Mc=ha(Ea.buffer)?N.createStream(34962,Ea.buffer):N.getBuffer(Ea.buffer),Jc="type"in Ea?G[Ea.type]:Mc.dtype,
$a=!!Ea.normalized,Bb=Ea.size|0,hc=Ea.offset|0,Sa=Ea.stride|0,oc=Ea.divisor|0);sc=P.location;Vb=K[sc];if(1===mc){Vb.buffer||z.enableVertexAttribArray(sc);Gc=Bb||2;if(Vb.type!==Jc||Vb.size!==Gc||Vb.buffer!==Mc||Vb.normalized!==$a||Vb.offset!==hc||Vb.stride!==Sa)z.bindBuffer(34962,Mc.buffer),z.vertexAttribPointer(sc,Gc,Jc,$a,Sa,hc),Vb.type=Jc,Vb.size=Gc,Vb.buffer=Mc,Vb.normalized=$a,Vb.offset=hc,Vb.stride=Sa;Vb.divisor!==oc&&(na.vertexAttribDivisorANGLE(sc,oc),Vb.divisor=oc)}else if(Vb.buffer&&(z.disableVertexAttribArray(sc),
Vb.buffer=null),Vb.x!==Zc||Vb.y!==Qd||Vb.z!==od||Vb.w!==Xb)z.vertexAttrib4f(sc,Zc,Qd,od,Xb),Vb.x=Zc,Vb.y=Qd,Vb.z=od,Vb.w=Xb;Ha.buffer=a.positionBuffer;Sc=!1;Jb=null;zc=0;Wa=!1;pd=ra=0;Yb=1;ab=0;Sb=5126;Cd=Nb=Ac=cb=0;ha(Ha)?(Sc=!0,Jb=N.createStream(34962,Ha),Sb=Jb.dtype):(Jb=N.getBuffer(Ha))?Sb=Jb.dtype:"constant"in Ha?(Yb=2,"number"===typeof Ha.constant?(Ac=Ha.constant,Nb=Cd=cb=0):(Ac=0<Ha.constant.length?Ha.constant[0]:0,Nb=1<Ha.constant.length?Ha.constant[1]:0,Cd=2<Ha.constant.length?Ha.constant[2]:
0,cb=3<Ha.constant.length?Ha.constant[3]:0)):(Jb=ha(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),Sb="type"in Ha?G[Ha.type]:Jb.dtype,Wa=!!Ha.normalized,pd=Ha.size|0,ra=Ha.offset|0,ab=Ha.stride|0,zc=Ha.divisor|0);ic=ja.location;Ob=K[ic];if(1===Yb){Ob.buffer||z.enableVertexAttribArray(ic);ud=pd||2;if(Ob.type!==Sb||Ob.size!==ud||Ob.buffer!==Jb||Ob.normalized!==Wa||Ob.offset!==ra||Ob.stride!==ab)z.bindBuffer(34962,Jb.buffer),z.vertexAttribPointer(ic,ud,Sb,Wa,ab,ra),Ob.type=Sb,Ob.size=
ud,Ob.buffer=Jb,Ob.normalized=Wa,Ob.offset=ra,Ob.stride=ab;Ob.divisor!==zc&&(na.vertexAttribDivisorANGLE(ic,zc),Ob.divisor=zc)}else if(Ob.buffer&&(z.disableVertexAttribArray(ic),Ob.buffer=null),Ob.x!==Ac||Ob.y!==Nb||Ob.z!==Cd||Ob.w!==cb)z.vertexAttrib4f(ic,Ac,Nb,Cd,cb),Ob.x=Ac,Ob.y=Nb,Ob.z=Cd,Ob.w=cb;q.buffer=a.positionBuffer;Pb=!1;Ma=null;nb=0;tb=!1;Na=gb=0;lc=1;Qb=0;id=5126;ac=Hc=fc=db=0;ha(q)?(Pb=!0,Ma=N.createStream(34962,q),id=Ma.dtype):(Ma=N.getBuffer(q))?id=Ma.dtype:"constant"in q?(lc=2,"number"===
typeof q.constant?(fc=q.constant,Hc=ac=db=0):(fc=0<q.constant.length?q.constant[0]:0,Hc=1<q.constant.length?q.constant[1]:0,ac=2<q.constant.length?q.constant[2]:0,db=3<q.constant.length?q.constant[3]:0)):(Ma=ha(q.buffer)?N.createStream(34962,q.buffer):N.getBuffer(q.buffer),id="type"in q?G[q.type]:Ma.dtype,tb=!!q.normalized,Na=q.size|0,gb=q.offset|0,Qb=q.stride|0,nb=q.divisor|0);jb=gd.location;kb=K[jb];if(1===lc){kb.buffer||z.enableVertexAttribArray(jb);ta=Na||2;if(kb.type!==id||kb.size!==ta||kb.buffer!==
Ma||kb.normalized!==tb||kb.offset!==gb||kb.stride!==Qb)z.bindBuffer(34962,Ma.buffer),z.vertexAttribPointer(jb,ta,id,tb,Qb,gb),kb.type=id,kb.size=ta,kb.buffer=Ma,kb.normalized=tb,kb.offset=gb,kb.stride=Qb;kb.divisor!==nb&&(na.vertexAttribDivisorANGLE(jb,nb),kb.divisor=nb)}else if(kb.buffer&&(z.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==fc||kb.y!==Hc||kb.z!==ac||kb.w!==db)z.vertexAttrib4f(jb,fc,Hc,ac,db),kb.x=fc,kb.y=Hc,kb.z=ac,kb.w=db;x.buffer=a.colorBuffer;ob=!1;wa=null;Ta=0;bb=!1;eb=Ba=
0;Ka=1;zb=0;yb=5126;Gb=Eb=Kc=Ra=0;ha(x)?(ob=!0,wa=N.createStream(34962,x),yb=wa.dtype):(wa=N.getBuffer(x))?yb=wa.dtype:"constant"in x?(Ka=2,"number"===typeof x.constant?(Kc=x.constant,Eb=Gb=Ra=0):(Kc=0<x.constant.length?x.constant[0]:0,Eb=1<x.constant.length?x.constant[1]:0,Gb=2<x.constant.length?x.constant[2]:0,Ra=3<x.constant.length?x.constant[3]:0)):(wa=ha(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),yb="type"in x?G[x.type]:wa.dtype,bb=!!x.normalized,eb=x.size|0,Ba=x.offset|0,
zb=x.stride|0,Ta=x.divisor|0);Rb=k.location;ya=K[Rb];if(1===Ka){ya.buffer||z.enableVertexAttribArray(Rb);jd=eb||4;if(ya.type!==yb||ya.size!==jd||ya.buffer!==wa||ya.normalized!==bb||ya.offset!==Ba||ya.stride!==zb)z.bindBuffer(34962,wa.buffer),z.vertexAttribPointer(Rb,jd,yb,bb,zb,Ba),ya.type=yb,ya.size=jd,ya.buffer=wa,ya.normalized=bb,ya.offset=Ba,ya.stride=zb;ya.divisor!==Ta&&(na.vertexAttribDivisorANGLE(Rb,Ta),ya.divisor=Ta)}else if(ya.buffer&&(z.disableVertexAttribArray(Rb),ya.buffer=null),ya.x!==
Kc||ya.y!==Eb||ya.z!==Gb||ya.w!==Ra)z.vertexAttrib4f(Rb,Kc,Eb,Gb,Ra),ya.x=Kc,ya.y=Eb,ya.z=Gb,ya.w=Ra;O.buffer=a.colorBuffer;La=!1;Kb=null;fb=0;hb=!1;cc=za=0;Ga=1;pb=0;qb=5126;vc=kc=Ya=Xa=0;ha(O)?(La=!0,Kb=N.createStream(34962,O),qb=Kb.dtype):(Kb=N.getBuffer(O))?qb=Kb.dtype:"constant"in O?(Ga=2,"number"===typeof O.constant?(Ya=O.constant,kc=vc=Xa=0):(Ya=0<O.constant.length?O.constant[0]:0,kc=1<O.constant.length?O.constant[1]:0,vc=2<O.constant.length?O.constant[2]:0,Xa=3<O.constant.length?O.constant[3]:
0)):(Kb=ha(O.buffer)?N.createStream(34962,O.buffer):N.getBuffer(O.buffer),qb="type"in O?G[O.type]:Kb.dtype,hb=!!O.normalized,cc=O.size|0,za=O.offset|0,pb=O.stride|0,fb=O.divisor|0);tc=L.location;Va=K[tc];if(1===Ga){Va.buffer||z.enableVertexAttribArray(tc);Hb=cc||4;if(Va.type!==qb||Va.size!==Hb||Va.buffer!==Kb||Va.normalized!==hb||Va.offset!==za||Va.stride!==pb)z.bindBuffer(34962,Kb.buffer),z.vertexAttribPointer(tc,Hb,qb,hb,pb,za),Va.type=qb,Va.size=Hb,Va.buffer=Kb,Va.normalized=hb,Va.offset=za,Va.stride=
pb;Va.divisor!==fb&&(na.vertexAttribDivisorANGLE(tc,fb),Va.divisor=fb)}else if(Va.buffer&&(z.disableVertexAttribArray(tc),Va.buffer=null),Va.x!==Ya||Va.y!==kc||Va.z!==vc||Va.w!==Xa)z.vertexAttrib4f(tc,Ya,kc,vc,Xa),Va.x=Ya,Va.y=kc,Va.z=vc,Va.w=Xa;Cc=R.location;Ia=K[Cc];Ia.buffer||z.enableVertexAttribArray(Cc);if(5126!==Ia.type||1!==Ia.size||Ia.buffer!==d||!1!==Ia.normalized||0!==Ia.offset||8!==Ia.stride)z.bindBuffer(34962,d.buffer),z.vertexAttribPointer(Cc,1,5126,!1,8,0),Ia.type=5126,Ia.size=1,Ia.buffer=
d,Ia.normalized=!1,Ia.offset=0,Ia.stride=8;0!==Ia.divisor&&(na.vertexAttribDivisorANGLE(Cc,0),Ia.divisor=0);xc=f.location;Oa=K[xc];Oa.buffer||z.enableVertexAttribArray(xc);if(5126!==Oa.type||1!==Oa.size||Oa.buffer!==c||!1!==Oa.normalized||4!==Oa.offset||8!==Oa.stride)z.bindBuffer(34962,c.buffer),z.vertexAttribPointer(xc,1,5126,!1,8,4),Oa.type=5126,Oa.size=1,Oa.buffer=c,Oa.normalized=!1,Oa.offset=4,Oa.stride=8;0!==Oa.divisor&&(na.vertexAttribDivisorANGLE(xc,0),Oa.divisor=0);Ca=a.scale;z.uniform2f(qc.location,
Ca[0],Ca[1]);lb=a.translate;z.uniform2f(Pa.location,lb[0],lb[1]);z.uniform1f(la.location,a.thickness);z.uniform1f(H.location,a.depth);ub=p.call(this,V,a,0);z.uniform4f(Z.location,ub[0],ub[1],ub[2],ub[3]);z.uniform1f(m.location,a.miterLimit);Ab=e.call(this,V,a,0);z.uniform1f(Q.location,Ab);z.uniform1f(A.location,a.dashLength);z.uniform1f(ma.location,a.opacity);(rb=a.dashTexture)&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);uc=rb._texture;z.uniform1i(ka.location,uc.bind());(vb=J.elements)?z.bindBuffer(34963,
vb.buffer.buffer):bc.currentVAO&&(vb=Ub.getElements(bc.currentVAO.elements))&&z.bindBuffer(34963,vb.buffer.buffer);kd=a.count;0<kd?vb?na.drawElementsInstancedANGLE(5,4,vb.type,0<<(vb.type-5121>>1),kd):na.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(vb?z.drawElements(5,4,vb.type,0<<(vb.type-5121>>1)):z.drawArrays(5,0,4));sa.dirty=!0;bc.setVAO(null);V.viewportWidth=D;V.viewportHeight=C;fa&&(b.cpuTime+=performance.now()-v);va&&N.destroyStream(sb);Rc&&N.destroyStream(Mc);Sc&&N.destroyStream(Jb);Pb&&N.destroyStream(Ma);
ob&&N.destroyStream(wa);La&&N.destroyStream(Kb);uc.unbind()},scope:function(a,e,f){var g,h,k,m,p,t,w,z,B,A,M,F,aa,H,I,K,P,T,L,X,Y,ia,Z,Q,ga,ca,ea,ua,R,nc,qa,Fa,ka,ja,$a,vd,Bb,la,Sa,wc,Xb,xa,Lc,$b,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,ma,Yb,ab,Sb,cb,jc,Nb,Za,Pa,Ob,Fc,Pb,Ma,nb,tb,gb,Na,lc,Qb,Ub,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,bc,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,qc,Gd,Bc,Dc,Oc,$c,Tc,
Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,gd,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,Ve,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Me,ze,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf;g=a.viewport;h=g.x|0;k=g.y|0;m="width"in g?g.width|0:V.framebufferWidth-h;p="height"in g?g.height|0:V.framebufferHeight-k;t=V.viewportWidth;V.viewportWidth=m;w=V.viewportHeight;V.viewportHeight=p;
z=fa[0];fa[0]=h;B=fa[1];fa[1]=k;A=fa[2];fa[2]=m;M=fa[3];fa[3]=p;F=Ua[0];Ua[0]=0;aa=Ua[1];Ua[1]=0;H=Ua[2];Ua[2]=0;I=Ua[3];Ua[3]=0;K=da.blend_enable;da.blend_enable=!0;P=ib[0];ib[0]=32774;T=ib[1];ib[1]=32774;L=va[0];va[0]=770;X=va[1];va[1]=771;Y=va[2];va[2]=773;ia=va[3];va[3]=1;Z=da.cull_enable;da.cull_enable=!0;Q=da.cull_face;da.cull_face=1029;ga=l.call(this,V,a,f);ca=da.depth_enable;da.depth_enable=ga;ea=a.viewport;ua=ea.x|0;R=ea.y|0;nc="width"in ea?ea.width|0:V.framebufferWidth-ua;qa="height"in ea?
ea.height|0:V.framebufferHeight-R;Fa=sb[0];sb[0]=ua;ka=sb[1];sb[1]=R;ja=sb[2];sb[2]=nc;$a=sb[3];sb[3]=qa;vd=da.scissor_enable;da.scissor_enable=!0;Bb=da.stencil_enable;da.stencil_enable=!1;if(la=sa.profile)Sa=performance.now(),b.count++;wc=J.offset;J.offset=0;Xb=J.count;J.count=4;xa=a.count;Lc=J.instances;J.instances=xa;$b=J.primitive;J.primitive=5;sc=a.dashLength;Vb=Qa[23];Qa[23]=sc;Gc=a.dashTexture;Sc=Qa[24];Qa[24]=Gc;Jb=a.depth;zc=Qa[22];Qa[22]=Jb;Wa=a.id;ra=Qa[31];Qa[31]=Wa;ma=a.miterLimit;Yb=
Qa[32];Qa[32]=ma;ab=u.call(this,V,a,f);Sb=Qa[33];Qa[33]=ab;cb=a.opacity;jc=Qa[10];Qa[10]=cb;Nb=V.pixelRatio;Za=Qa[34];Qa[34]=Nb;Pa=a.scale;Ob=Qa[6];Qa[6]=Pa;Fc=a.scaleFract;Pb=Qa[7];Qa[7]=Fc;Ma=a.thickness;nb=Qa[21];Qa[21]=Ma;tb=a.translate;gb=Qa[8];Qa[8]=tb;Na=a.translateFract;lc=Qa[9];Qa[9]=Na;Qb=W.call(this,V,a,f);Ub=Qa[3];Qa[3]=Qb;x.buffer=a.colorBuffer;db=!1;fc=null;Hc=0;ac=!1;kb=jb=0;ta=1;ob=0;wa=5126;eb=Ba=bb=Ta=0;ha(x)?(db=!0,fc=N.createStream(34962,x),wa=fc.dtype):(fc=N.getBuffer(x))?wa=
fc.dtype:"constant"in x?(ta=2,"number"===typeof x.constant?(bb=x.constant,Ba=eb=Ta=0):(bb=0<x.constant.length?x.constant[0]:0,Ba=1<x.constant.length?x.constant[1]:0,eb=2<x.constant.length?x.constant[2]:0,Ta=3<x.constant.length?x.constant[3]:0)):(fc=ha(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),wa="type"in x?G[x.type]:fc.dtype,ac=!!x.normalized,kb=x.size|0,jb=x.offset|0,ob=x.stride|0,Hc=x.divisor|0);Ka=n.buffer;n.buffer=fc;zb=n.divisor;n.divisor=Hc;yb=n.normalized;n.normalized=
ac;Ra=n.offset;n.offset=jb;Kc=n.size;n.size=kb;Eb=n.state;n.state=ta;Gb=n.stride;n.stride=ob;Rb=n.type;n.type=wa;ya=n.w;n.w=Ta;jd=n.x;n.x=bb;La=n.y;n.y=Ba;Kb=n.z;n.z=eb;ba.buffer=a.positionBuffer;fb=!1;hb=null;za=0;cc=!1;pb=Ga=0;qb=1;Xa=0;Ya=5126;Va=tc=vc=kc=0;ha(ba)?(fb=!0,hb=N.createStream(34962,ba),Ya=hb.dtype):(hb=N.getBuffer(ba))?Ya=hb.dtype:"constant"in ba?(qb=2,"number"===typeof ba.constant?(vc=ba.constant,tc=Va=kc=0):(vc=0<ba.constant.length?ba.constant[0]:0,tc=1<ba.constant.length?ba.constant[1]:
0,Va=2<ba.constant.length?ba.constant[2]:0,kc=3<ba.constant.length?ba.constant[3]:0)):(hb=ha(ba.buffer)?N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),Ya="type"in ba?G[ba.type]:hb.dtype,cc=!!ba.normalized,pb=ba.size|0,Ga=ba.offset|0,Xa=ba.stride|0,za=ba.divisor|0);Hb=E.buffer;E.buffer=hb;Cc=E.divisor;E.divisor=za;Ia=E.normalized;E.normalized=cc;xc=E.offset;E.offset=Ga;Oa=E.size;E.size=pb;Ca=E.state;E.state=qb;lb=E.stride;E.stride=Xa;ub=E.type;E.type=Ya;Ab=E.w;E.w=kc;rb=E.x;E.x=vc;uc=E.y;E.y=
tc;vb=E.z;E.z=Va;O.buffer=a.colorBuffer;kd=!1;pc=null;bc=0;Nc=!1;fd=ed=0;Tb=1;Zb=0;Lb=5126;wb=mb=Wb=Ja=0;ha(O)?(kd=!0,pc=N.createStream(34962,O),Lb=pc.dtype):(pc=N.getBuffer(O))?Lb=pc.dtype:"constant"in O?(Tb=2,"number"===typeof O.constant?(Wb=O.constant,mb=wb=Ja=0):(Wb=0<O.constant.length?O.constant[0]:0,mb=1<O.constant.length?O.constant[1]:0,wb=2<O.constant.length?O.constant[2]:0,Ja=3<O.constant.length?O.constant[3]:0)):(pc=ha(O.buffer)?N.createStream(34962,O.buffer):N.getBuffer(O.buffer),Lb="type"in
O?G[O.type]:pc.dtype,Nc=!!O.normalized,fd=O.size|0,ed=O.offset|0,Zb=O.stride|0,bc=O.divisor|0);Ib=r.buffer;r.buffer=pc;Mb=r.divisor;r.divisor=bc;dc=r.normalized;r.normalized=Nc;gc=r.offset;r.offset=ed;qc=r.size;r.size=fd;Gd=r.state;r.state=Tb;Bc=r.stride;r.stride=Zb;Dc=r.type;r.type=Lb;Oc=r.w;r.w=Ja;$c=r.x;r.x=Wb;Tc=r.y;r.y=mb;Pc=r.z;r.z=wb;Ea.buffer=a.positionBuffer;Fb=!1;Cb=null;Qc=0;Ic=!1;ec=Uc=0;Xc=1;bd=0;qd=5126;Wd=gd=Yc=ld=0;ha(Ea)?(Fb=!0,Cb=N.createStream(34962,Ea),qd=Cb.dtype):(Cb=N.getBuffer(Ea))?
qd=Cb.dtype:"constant"in Ea?(Xc=2,"number"===typeof Ea.constant?(Yc=Ea.constant,gd=Wd=ld=0):(Yc=0<Ea.constant.length?Ea.constant[0]:0,gd=1<Ea.constant.length?Ea.constant[1]:0,Wd=2<Ea.constant.length?Ea.constant[2]:0,ld=3<Ea.constant.length?Ea.constant[3]:0)):(Cb=ha(Ea.buffer)?N.createStream(34962,Ea.buffer):N.getBuffer(Ea.buffer),qd="type"in Ea?G[Ea.type]:Cb.dtype,Ic=!!Ea.normalized,ec=Ea.size|0,Uc=Ea.offset|0,bd=Ea.stride|0,Qc=Ea.divisor|0);je=C.buffer;C.buffer=Cb;Je=C.divisor;C.divisor=Qc;me=C.normalized;
C.normalized=Ic;Hd=C.offset;C.offset=Uc;Ed=C.size;C.size=ec;dd=C.state;C.state=Xc;Ec=C.stride;C.stride=bd;rd=C.type;C.type=qd;hd=C.w;C.w=ld;ad=C.x;C.x=Yc;md=C.y;C.y=gd;Dd=C.z;C.z=Wd;zd=S.buffer;S.buffer=d;we=S.divisor;S.divisor=0;ue=S.normalized;S.normalized=!1;Ve=S.offset;S.offset=0;ne=S.size;S.size=0;ee=S.state;S.state=1;be=S.stride;S.stride=8;pe=S.type;S.type=5126;$d=S.w;S.w=0;ge=S.x;S.x=0;yc=S.y;S.y=0;Wc=S.z;S.z=0;qe=D.buffer;D.buffer=c;ke=D.divisor;D.divisor=0;Fd=D.normalized;D.normalized=!1;
Ld=D.offset;D.offset=4;Md=D.size;D.size=0;Nd=D.state;D.state=1;he=D.stride;D.stride=8;Te=D.type;D.type=5126;xe=D.w;D.w=0;oe=D.x;D.x=0;Ne=D.y;D.y=0;Oe=D.z;D.z=0;Ha.buffer=a.positionBuffer;Ke=!1;re=null;Be=0;De=!1;Fe=Ee=0;Ce=1;Id=0;Rd=5126;Bd=Ge=ae=Xd=0;ha(Ha)?(Ke=!0,re=N.createStream(34962,Ha),Rd=re.dtype):(re=N.getBuffer(Ha))?Rd=re.dtype:"constant"in Ha?(Ce=2,"number"===typeof Ha.constant?(ae=Ha.constant,Ge=Bd=Xd=0):(ae=0<Ha.constant.length?Ha.constant[0]:0,Ge=1<Ha.constant.length?Ha.constant[1]:
0,Bd=2<Ha.constant.length?Ha.constant[2]:0,Xd=3<Ha.constant.length?Ha.constant[3]:0)):(re=ha(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),Rd="type"in Ha?G[Ha.type]:re.dtype,De=!!Ha.normalized,Fe=Ha.size|0,Ee=Ha.offset|0,Id=Ha.stride|0,Be=Ha.divisor|0);Od=y.buffer;y.buffer=re;ye=y.divisor;y.divisor=Be;He=y.normalized;y.normalized=De;ff=y.offset;y.offset=Ee;Ye=y.size;y.size=Fe;Pe=y.state;y.state=Ce;Le=y.stride;y.stride=Id;Xe=y.type;y.type=Rd;Ue=y.w;y.w=Xd;Qe=y.x;y.x=ae;Re=y.y;y.y=
Ge;Pd=y.z;y.z=Bd;q.buffer=a.positionBuffer;Ud=!1;Se=null;gf=0;lf=!1;hf=cf=0;jf=1;kf=0;qf=5126;Cf=Bf=rf=nf=0;ha(q)?(Ud=!0,Se=N.createStream(34962,q),qf=Se.dtype):(Se=N.getBuffer(q))?qf=Se.dtype:"constant"in q?(jf=2,"number"===typeof q.constant?(rf=q.constant,Bf=Cf=nf=0):(rf=0<q.constant.length?q.constant[0]:0,Bf=1<q.constant.length?q.constant[1]:0,Cf=2<q.constant.length?q.constant[2]:0,nf=3<q.constant.length?q.constant[3]:0)):(Se=ha(q.buffer)?N.createStream(34962,q.buffer):N.getBuffer(q.buffer),qf=
"type"in q?G[q.type]:Se.dtype,lf=!!q.normalized,hf=q.size|0,cf=q.offset|0,kf=q.stride|0,gf=q.divisor|0);Me=v.buffer;v.buffer=Se;ze=v.divisor;v.divisor=gf;of=v.normalized;v.normalized=lf;pf=v.offset;v.offset=cf;Df=v.size;v.size=hf;Hf=v.state;v.state=jf;Af=v.stride;v.stride=kf;Ef=v.type;v.type=qf;Ff=v.w;v.w=nf;wf=v.x;v.x=rf;xf=v.y;v.y=Bf;uf=v.z;v.z=Cf;yf=Aa.vert;Aa.vert=36;zf=Aa.frag;Aa.frag=35;sa.dirty=!0;e(V,a,f);V.viewportWidth=t;V.viewportHeight=w;fa[0]=z;fa[1]=B;fa[2]=A;fa[3]=M;Ua[0]=F;Ua[1]=aa;
Ua[2]=H;Ua[3]=I;da.blend_enable=K;ib[0]=P;ib[1]=T;va[0]=L;va[1]=X;va[2]=Y;va[3]=ia;da.cull_enable=Z;da.cull_face=Q;da.depth_enable=ca;sb[0]=Fa;sb[1]=ka;sb[2]=ja;sb[3]=$a;da.scissor_enable=vd;da.stencil_enable=Bb;la&&(b.cpuTime+=performance.now()-Sa);J.offset=wc;J.count=Xb;J.instances=Lc;J.primitive=$b;Qa[23]=Vb;Qa[24]=Sc;Qa[22]=zc;Qa[31]=ra;Qa[32]=Yb;Qa[33]=Sb;Qa[10]=jc;Qa[34]=Za;Qa[6]=Ob;Qa[7]=Pb;Qa[21]=nb;Qa[8]=gb;Qa[9]=lc;Qa[3]=Ub;db&&N.destroyStream(fc);n.buffer=Ka;n.divisor=zb;n.normalized=yb;
n.offset=Ra;n.size=Kc;n.state=Eb;n.stride=Gb;n.type=Rb;n.w=ya;n.x=jd;n.y=La;n.z=Kb;fb&&N.destroyStream(hb);E.buffer=Hb;E.divisor=Cc;E.normalized=Ia;E.offset=xc;E.size=Oa;E.state=Ca;E.stride=lb;E.type=ub;E.w=Ab;E.x=rb;E.y=uc;E.z=vb;kd&&N.destroyStream(pc);r.buffer=Ib;r.divisor=Mb;r.normalized=dc;r.offset=gc;r.size=qc;r.state=Gd;r.stride=Bc;r.type=Dc;r.w=Oc;r.x=$c;r.y=Tc;r.z=Pc;Fb&&N.destroyStream(Cb);C.buffer=je;C.divisor=Je;C.normalized=me;C.offset=Hd;C.size=Ed;C.state=dd;C.stride=Ec;C.type=rd;C.w=
hd;C.x=ad;C.y=md;C.z=Dd;S.buffer=zd;S.divisor=we;S.normalized=ue;S.offset=Ve;S.size=ne;S.state=ee;S.stride=be;S.type=pe;S.w=$d;S.x=ge;S.y=yc;S.z=Wc;D.buffer=qe;D.divisor=ke;D.normalized=Fd;D.offset=Ld;D.size=Md;D.state=Nd;D.stride=he;D.type=Te;D.w=xe;D.x=oe;D.y=Ne;D.z=Oe;Ke&&N.destroyStream(re);y.buffer=Od;y.divisor=ye;y.normalized=He;y.offset=ff;y.size=Ye;y.state=Pe;y.stride=Le;y.type=Xe;y.w=Ue;y.x=Qe;y.y=Re;y.z=Pd;Ud&&N.destroyStream(Se);v.buffer=Me;v.divisor=ze;v.normalized=of;v.offset=pf;v.size=
Df;v.state=Hf;v.stride=Af;v.type=Ef;v.w=Ff;v.x=wf;v.y=xf;v.z=uf;Aa.vert=yf;Aa.frag=zf;sa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,b,g,h,d,c,p,e,l,u,W,n,E,r,C,y,D,na,v){var I,xa,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,gd,qc,la,Pa,Z,K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va;I=a.attributes;xa=a.buffer;t=a.context;w=a.current;k=a.draw;ca=a.elements;L=a.extensions;P=a.framebuffer;A=a.gl;ka=a.isBufferArgs;H=a.next;R=a.shader;f=a.uniforms;
m=a.vao;Q=H.blend_color;ja=w.blend_color;ma=H.blend_equation;gd=w.blend_equation;qc=H.blend_func;la=w.blend_func;Pa=H.colorMask;Z=w.colorMask;K=H.depth_range;N=w.depth_range;V=H.polygonOffset_offset;sa=w.polygonOffset_offset;J=H.sample_coverage;Ub=w.sample_coverage;Za=H.scissor_box;T=w.scissor_box;z=H.stencil_func;ha=w.stencil_func;da=H.stencil_opBack;Aa=w.stencil_opBack;Qa=H.stencil_opFront;bc=w.stencil_opFront;Ua=H.viewport;Y=w.viewport;ib={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,
uint32:5125,"float":5126,float32:5126};ea={offset:8,stride:8};va={offset:8,stride:8};return{batch:function(a,c){var e,d,f,g,h,p;e=P.next;e!==P.cur&&(e?A.bindFramebuffer(36160,e.framebuffer):A.bindFramebuffer(36160,null),P.cur=e);if(w.dirty){var Q,R,Lc,ma,F,B,ga,ua,X,fa,qa,G,x,ba,O,Ea,Ha,q,Ua,Da,U,Db,xb,Za,qc,ce,Vd,Jd,se,xd,fe,te;Q=H.dither;Q!==w.dither&&(Q?A.enable(3024):A.disable(3024),w.dither=Q);R=H.depth_func;R!==w.depth_func&&(A.depthFunc(R),w.depth_func=R);Lc=K[0];ma=K[1];if(Lc!==N[0]||ma!==
N[1])A.depthRange(Lc,ma),N[0]=Lc,N[1]=ma;F=H.depth_mask;F!==w.depth_mask&&(A.depthMask(F),w.depth_mask=F);B=Pa[0];ga=Pa[1];ua=Pa[2];X=Pa[3];if(B!==Z[0]||ga!==Z[1]||ua!==Z[2]||X!==Z[3])A.colorMask(B,ga,ua,X),Z[0]=B,Z[1]=ga,Z[2]=ua,Z[3]=X;fa=H.cull_enable;fa!==w.cull_enable&&(fa?A.enable(2884):A.disable(2884),w.cull_enable=fa);qa=H.cull_face;qa!==w.cull_face&&(A.cullFace(qa),w.cull_face=qa);G=H.frontFace;G!==w.frontFace&&(A.frontFace(G),w.frontFace=G);x=H.lineWidth;x!==w.lineWidth&&(A.lineWidth(x),
w.lineWidth=x);ba=H.polygonOffset_enable;ba!==w.polygonOffset_enable&&(ba?A.enable(32823):A.disable(32823),w.polygonOffset_enable=ba);O=V[0];Ea=V[1];if(O!==sa[0]||Ea!==sa[1])A.polygonOffset(O,Ea),sa[0]=O,sa[1]=Ea;Ha=H.sample_alpha;Ha!==w.sample_alpha&&(Ha?A.enable(32926):A.disable(32926),w.sample_alpha=Ha);q=H.sample_enable;q!==w.sample_enable&&(q?A.enable(32928):A.disable(32928),w.sample_enable=q);Ua=J[0];Da=J[1];if(Ua!==Ub[0]||Da!==Ub[1])A.sampleCoverage(Ua,Da),Ub[0]=Ua,Ub[1]=Da;U=H.stencil_mask;
U!==w.stencil_mask&&(A.stencilMask(U),w.stencil_mask=U);Db=z[0];xb=z[1];Za=z[2];if(Db!==ha[0]||xb!==ha[1]||Za!==ha[2])A.stencilFunc(Db,xb,Za),ha[0]=Db,ha[1]=xb,ha[2]=Za;qc=Qa[0];ce=Qa[1];Vd=Qa[2];Jd=Qa[3];if(qc!==bc[0]||ce!==bc[1]||Vd!==bc[2]||Jd!==bc[3])A.stencilOpSeparate(qc,ce,Vd,Jd),bc[0]=qc,bc[1]=ce,bc[2]=Vd,bc[3]=Jd;se=da[0];xd=da[1];fe=da[2];te=da[3];if(se!==Aa[0]||xd!==Aa[1]||fe!==Aa[2]||te!==Aa[3])A.stencilOpSeparate(se,xd,fe,te),Aa[0]=se,Aa[1]=xd,Aa[2]=fe,Aa[3]=te}A.blendColor(0,0,0,0);
ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=0;A.enable(3042);w.blend_enable=!0;A.blendEquationSeparate(32774,32774);gd[0]=32774;gd[1]=32774;A.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;A.disable(2929);w.depth_enable=!1;A.enable(3089);w.scissor_enable=!0;A.disable(2960);w.stencil_enable=!1;if(d=w.profile)f=performance.now(),b.count+=c;A.useProgram(l.program);g=L.angle_instanced_arrays;var Kd;m.setVAO(null);Kd=k.instances;for(h=0;h<c;++h){p=a[h];var Sd,Zd,ie,$e,mf,We,Ad,ve,de,Td,le,Ie,
td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb;Sd=p.viewport;Zd=Sd.x|0;ie=Sd.y|0;$e="width"in Sd?Sd.width|0:t.framebufferWidth-Zd;mf="height"in Sd?Sd.height|0:t.framebufferHeight-ie;We=t.viewportWidth;t.viewportWidth=$e;Ad=t.viewportHeight;t.viewportHeight=mf;A.viewport(Zd,ie,$e,mf);Y[0]=Zd;Y[1]=ie;Y[2]=$e;Y[3]=mf;ve=p.viewport;de=ve.x|0;Td=
ve.y|0;le="width"in ve?ve.width|0:t.framebufferWidth-de;Ie="height"in ve?ve.height|0:t.framebufferHeight-Td;A.scissor(de,Td,le,Ie);T[0]=de;T[1]=Td;T[2]=le;T[3]=Ie;ea.buffer=p.positionBuffer;td=!1;nd=null;wd=0;sd=!1;Vc=cd=0;yd=1;Rc=0;Mc=5126;Bb=hc=$a=oc=0;ka(ea)?(td=!0,nd=xa.createStream(34962,ea),Mc=nd.dtype):(nd=xa.getBuffer(ea))?Mc=nd.dtype:"constant"in ea?(yd=2,"number"===typeof ea.constant?($a=ea.constant,hc=Bb=oc=0):($a=0<ea.constant.length?ea.constant[0]:0,hc=1<ea.constant.length?ea.constant[1]:
0,Bb=2<ea.constant.length?ea.constant[2]:0,oc=3<ea.constant.length?ea.constant[3]:0)):(nd=ka(ea.buffer)?xa.createStream(34962,ea.buffer):xa.getBuffer(ea.buffer),Mc="type"in ea?ib[ea.type]:nd.dtype,sd=!!ea.normalized,Vc=ea.size|0,cd=ea.offset|0,Rc=ea.stride|0,wd=ea.divisor|0);mc=r.location;Sa=I[mc];if(1===yd){Sa.buffer||A.enableVertexAttribArray(mc);Jc=Vc||2;if(Sa.type!==Mc||Sa.size!==Jc||Sa.buffer!==nd||Sa.normalized!==sd||Sa.offset!==cd||Sa.stride!==Rc)A.bindBuffer(34962,nd.buffer),A.vertexAttribPointer(mc,
Jc,Mc,sd,Rc,cd),Sa.type=Mc,Sa.size=Jc,Sa.buffer=nd,Sa.normalized=sd,Sa.offset=cd,Sa.stride=Rc;Sa.divisor!==wd&&(g.vertexAttribDivisorANGLE(mc,wd),Sa.divisor=wd)}else if(Sa.buffer&&(A.disableVertexAttribArray(mc),Sa.buffer=null),Sa.x!==$a||Sa.y!==hc||Sa.z!==Bb||Sa.w!==oc)A.vertexAttrib4f(mc,$a,hc,Bb,oc),Sa.x=$a,Sa.y=hc,Sa.z=Bb,Sa.w=oc;va.buffer=p.positionFractBuffer;Xb=!1;Zc=null;Qd=0;od=!1;Vb=sc=0;Gc=1;Sc=0;Jb=5126;pd=ra=Wa=zc=0;ka(va)?(Xb=!0,Zc=xa.createStream(34962,va),Jb=Zc.dtype):(Zc=xa.getBuffer(va))?
Jb=Zc.dtype:"constant"in va?(Gc=2,"number"===typeof va.constant?(Wa=va.constant,ra=pd=zc=0):(Wa=0<va.constant.length?va.constant[0]:0,ra=1<va.constant.length?va.constant[1]:0,pd=2<va.constant.length?va.constant[2]:0,zc=3<va.constant.length?va.constant[3]:0)):(Zc=ka(va.buffer)?xa.createStream(34962,va.buffer):xa.getBuffer(va.buffer),Jb="type"in va?ib[va.type]:Zc.dtype,od=!!va.normalized,Vb=va.size|0,sc=va.offset|0,Sc=va.stride|0,Qd=va.divisor|0);Yb=C.location;ab=I[Yb];if(1===Gc){ab.buffer||A.enableVertexAttribArray(Yb);
Sb=Vb||2;if(ab.type!==Jb||ab.size!==Sb||ab.buffer!==Zc||ab.normalized!==od||ab.offset!==sc||ab.stride!==Sc)A.bindBuffer(34962,Zc.buffer),A.vertexAttribPointer(Yb,Sb,Jb,od,Sc,sc),ab.type=Jb,ab.size=Sb,ab.buffer=Zc,ab.normalized=od,ab.offset=sc,ab.stride=Sc;ab.divisor!==Qd&&(g.vertexAttribDivisorANGLE(Yb,Qd),ab.divisor=Qd)}else if(ab.buffer&&(A.disableVertexAttribArray(Yb),ab.buffer=null),ab.x!==Wa||ab.y!==ra||ab.z!==pd||ab.w!==zc)A.vertexAttrib4f(Yb,Wa,ra,pd,zc),ab.x=Wa,ab.y=ra,ab.z=pd,ab.w=zc;cb=
p.fill;Ac=cb[0];Cd=cb[1];Ob=cb[2];Pb=cb[3];h&&Nb===Ac&&ic===Cd&&ud===Ob&&Ma===Pb||(Nb=Ac,ic=Cd,ud=Ob,Ma=Pb,A.uniform4f(W.location,Ac,Cd,Ob,Pb));nb=p.scale;tb=nb[0];Na=nb[1];h&&gb===tb&&lc===Na||(gb=tb,lc=Na,A.uniform2f(y.location,tb,Na));Qb=p.scaleFract;id=Qb[0];fc=Qb[1];h&&db===id&&Hc===fc||(db=id,Hc=fc,A.uniform2f(D.location,id,fc));ac=p.translate;jb=ac[0];ta=ac[1];h&&kb===jb&&ob===ta||(kb=jb,ob=ta,A.uniform2f(na.location,jb,ta));wa=p.translateFract;Ta=wa[0];Ba=wa[1];h&&bb===Ta&&eb===Ba||(bb=Ta,
eb=Ba,A.uniform2f(v.location,Ta,Ba));Ka=p.id;h&&zb===Ka||(zb=Ka,A.uniform1f(n.location,Ka));yb=p.opacity;h&&Ra===yb||(Ra=yb,A.uniform1f(E.location,yb));Kc=u.call(this,t,p,h);Eb=null;(Eb=(Gb=ka(Kc))?ca.createStream(Kc):ca.getElements(Kc))&&A.bindBuffer(34963,Eb.buffer.buffer);if(Rb=Eb?Eb.vertCount:-1)0<Kd?Eb?g.drawElementsInstancedANGLE(4,Rb,Eb.type,0<<(Eb.type-5121>>1),Kd):g.drawArraysInstancedANGLE(4,0,Rb,Kd):0>Kd&&(Eb?A.drawElements(4,Rb,Eb.type,0<<(Eb.type-5121>>1)):A.drawArrays(4,0,Rb)),t.viewportWidth=
We,t.viewportHeight=Ad,td&&xa.destroyStream(nd),Xb&&xa.destroyStream(Zc),Gb&&ca.destroyStream(Eb)}w.dirty=!0;m.setVAO(null);d&&(b.cpuTime+=performance.now()-f)},draw:function(a){var c,e,d,f,l,p,u,pa,Q,R,ma,F,B,ga,ua,X,fa,qa,G,x,ba,O;c=P.next;c!==P.cur&&(c?A.bindFramebuffer(36160,c.framebuffer):A.bindFramebuffer(36160,null),P.cur=c);if(w.dirty){c=H.dither;c!==w.dither&&(c?A.enable(3024):A.disable(3024),w.dither=c);c=H.depth_func;c!==w.depth_func&&(A.depthFunc(c),w.depth_func=c);c=K[0];p=K[1];if(c!==
N[0]||p!==N[1])A.depthRange(c,p),N[0]=c,N[1]=p;c=H.depth_mask;c!==w.depth_mask&&(A.depthMask(c),w.depth_mask=c);c=Pa[0];p=Pa[1];e=Pa[2];d=Pa[3];if(c!==Z[0]||p!==Z[1]||e!==Z[2]||d!==Z[3])A.colorMask(c,p,e,d),Z[0]=c,Z[1]=p,Z[2]=e,Z[3]=d;c=H.cull_enable;c!==w.cull_enable&&(c?A.enable(2884):A.disable(2884),w.cull_enable=c);c=H.cull_face;c!==w.cull_face&&(A.cullFace(c),w.cull_face=c);c=H.frontFace;c!==w.frontFace&&(A.frontFace(c),w.frontFace=c);c=H.lineWidth;c!==w.lineWidth&&(A.lineWidth(c),w.lineWidth=
c);c=H.polygonOffset_enable;c!==w.polygonOffset_enable&&(c?A.enable(32823):A.disable(32823),w.polygonOffset_enable=c);c=V[0];p=V[1];if(c!==sa[0]||p!==sa[1])A.polygonOffset(c,p),sa[0]=c,sa[1]=p;c=H.sample_alpha;c!==w.sample_alpha&&(c?A.enable(32926):A.disable(32926),w.sample_alpha=c);c=H.sample_enable;c!==w.sample_enable&&(c?A.enable(32928):A.disable(32928),w.sample_enable=c);c=J[0];p=J[1];if(c!==Ub[0]||p!==Ub[1])A.sampleCoverage(c,p),Ub[0]=c,Ub[1]=p;c=H.stencil_mask;c!==w.stencil_mask&&(A.stencilMask(c),
w.stencil_mask=c);c=z[0];p=z[1];e=z[2];if(c!==ha[0]||p!==ha[1]||e!==ha[2])A.stencilFunc(c,p,e),ha[0]=c,ha[1]=p,ha[2]=e;c=Qa[0];p=Qa[1];e=Qa[2];d=Qa[3];if(c!==bc[0]||p!==bc[1]||e!==bc[2]||d!==bc[3])A.stencilOpSeparate(c,p,e,d),bc[0]=c,bc[1]=p,bc[2]=e,bc[3]=d;c=da[0];p=da[1];e=da[2];d=da[3];if(c!==Aa[0]||p!==Aa[1]||e!==Aa[2]||d!==Aa[3])A.stencilOpSeparate(c,p,e,d),Aa[0]=c,Aa[1]=p,Aa[2]=e,Aa[3]=d}c=a.viewport;e=c.x|0;d=c.y|0;f="width"in c?c.width|0:t.framebufferWidth-e;l="height"in c?c.height|0:t.framebufferHeight-
d;c=t.viewportWidth;t.viewportWidth=f;p=t.viewportHeight;t.viewportHeight=l;A.viewport(e,d,f,l);Y[0]=e;Y[1]=d;Y[2]=f;Y[3]=l;A.blendColor(0,0,0,0);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=0;A.enable(3042);w.blend_enable=!0;A.blendEquationSeparate(32774,32774);gd[0]=32774;gd[1]=32774;A.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;A.disable(2929);w.depth_enable=!1;l=a.viewport;e=l.x|0;d=l.y|0;f="width"in l?l.width|0:t.framebufferWidth-e;l="height"in l?l.height|0:t.framebufferHeight-d;
A.scissor(e,d,f,l);T[0]=e;T[1]=d;T[2]=f;T[3]=l;A.enable(3089);w.scissor_enable=!0;A.disable(2960);w.stencil_enable=!1;if(e=w.profile)u=performance.now(),b.count++;A.useProgram(g.program);d=L.angle_instanced_arrays;m.setVAO(null);ea.buffer=a.positionBuffer;f=!1;pa=0;Q=!1;ma=R=0;F=1;B=0;ga=5126;qa=fa=X=ua=0;ka(ea)?(f=!0,l=xa.createStream(34962,ea),ga=l.dtype):(l=xa.getBuffer(ea))?ga=l.dtype:"constant"in ea?(F=2,"number"===typeof ea.constant?(X=ea.constant,fa=qa=ua=0):(X=0<ea.constant.length?ea.constant[0]:
0,fa=1<ea.constant.length?ea.constant[1]:0,qa=2<ea.constant.length?ea.constant[2]:0,ua=3<ea.constant.length?ea.constant[3]:0)):(l=ka(ea.buffer)?xa.createStream(34962,ea.buffer):xa.getBuffer(ea.buffer),ga="type"in ea?ib[ea.type]:l.dtype,Q=!!ea.normalized,ma=ea.size|0,R=ea.offset|0,B=ea.stride|0,pa=ea.divisor|0);G=r.location;x=I[G];if(1===F){x.buffer||A.enableVertexAttribArray(G);ma=ma||2;if(x.type!==ga||x.size!==ma||x.buffer!==l||x.normalized!==Q||x.offset!==R||x.stride!==B)A.bindBuffer(34962,l.buffer),
A.vertexAttribPointer(G,ma,ga,Q,B,R),x.type=ga,x.size=ma,x.buffer=l,x.normalized=Q,x.offset=R,x.stride=B;x.divisor!==pa&&(d.vertexAttribDivisorANGLE(G,pa),x.divisor=pa)}else if(x.buffer&&(A.disableVertexAttribArray(G),x.buffer=null),x.x!==X||x.y!==fa||x.z!==qa||x.w!==ua)A.vertexAttrib4f(G,X,fa,qa,ua),x.x=X,x.y=fa,x.z=qa,x.w=ua;va.buffer=a.positionFractBuffer;pa=!1;R=0;B=!1;ua=ga=0;X=1;G=0;x=5126;O=ba=qa=fa=0;ka(va)?(pa=!0,Q=xa.createStream(34962,va),x=Q.dtype):(Q=xa.getBuffer(va))?x=Q.dtype:"constant"in
va?(X=2,"number"===typeof va.constant?(qa=va.constant,ba=O=fa=0):(qa=0<va.constant.length?va.constant[0]:0,ba=1<va.constant.length?va.constant[1]:0,O=2<va.constant.length?va.constant[2]:0,fa=3<va.constant.length?va.constant[3]:0)):(Q=ka(va.buffer)?xa.createStream(34962,va.buffer):xa.getBuffer(va.buffer),x="type"in va?ib[va.type]:Q.dtype,B=!!va.normalized,ua=va.size|0,ga=va.offset|0,G=va.stride|0,R=va.divisor|0);ma=C.location;F=I[ma];if(1===X){F.buffer||A.enableVertexAttribArray(ma);ua=ua||2;if(F.type!==
x||F.size!==ua||F.buffer!==Q||F.normalized!==B||F.offset!==ga||F.stride!==G)A.bindBuffer(34962,Q.buffer),A.vertexAttribPointer(ma,ua,x,B,G,ga),F.type=x,F.size=ua,F.buffer=Q,F.normalized=B,F.offset=ga,F.stride=G;F.divisor!==R&&(d.vertexAttribDivisorANGLE(ma,R),F.divisor=R)}else if(F.buffer&&(A.disableVertexAttribArray(ma),F.buffer=null),F.x!==qa||F.y!==ba||F.z!==O||F.w!==fa)A.vertexAttrib4f(ma,qa,ba,O,fa),F.x=qa,F.y=ba,F.z=O,F.w=fa;R=a.fill;A.uniform4f(W.location,R[0],R[1],R[2],R[3]);R=a.scale;A.uniform2f(y.location,
R[0],R[1]);R=a.scaleFract;A.uniform2f(D.location,R[0],R[1]);R=a.translate;A.uniform2f(na.location,R[0],R[1]);R=a.translateFract;A.uniform2f(v.location,R[0],R[1]);A.uniform1f(n.location,a.id);A.uniform1f(E.location,a.opacity);R=h.call(this,t,a,0);(R=(a=ka(R))?ca.createStream(R):ca.getElements(R))&&A.bindBuffer(34963,R.buffer.buffer);if(B=R?R.vertCount:-1)ga=k.instances,0<ga?R?d.drawElementsInstancedANGLE(4,B,R.type,0<<(R.type-5121>>1),ga):d.drawArraysInstancedANGLE(4,0,B,ga):0>ga&&(R?A.drawElements(4,
B,R.type,0<<(R.type-5121>>1)):A.drawArrays(4,0,B)),w.dirty=!0,m.setVAO(null),t.viewportWidth=c,t.viewportHeight=p,e&&(b.cpuTime+=performance.now()-u),f&&xa.destroyStream(l),pa&&xa.destroyStream(Q),a&&ca.destroyStream(R)},scope:function(a,g,h){var l,m,n,r,z,A,E,D,C,u,B,W,y,S,pa,I,G,x,N,O,J,K,q,P,T,U,L,V,Y,v,na,Z,da,ha,sa,ja,la,Aa,oa,Qa,Pa,$e,Ub,bc,Ad,ve,de,Td,le,Ie,td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,
lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb;l=a.viewport;m=l.x|0;n=l.y|0;r="width"in l?l.width|0:t.framebufferWidth-m;z="height"in l?l.height|0:t.framebufferHeight-n;A=t.viewportWidth;t.viewportWidth=r;E=t.viewportHeight;t.viewportHeight=z;D=Ua[0];Ua[0]=m;C=Ua[1];Ua[1]=n;u=Ua[2];Ua[2]=r;B=Ua[3];Ua[3]=z;W=Q[0];Q[0]=0;y=Q[1];Q[1]=0;S=Q[2];Q[2]=0;pa=Q[3];Q[3]=0;I=H.blend_enable;H.blend_enable=!0;G=ma[0];ma[0]=32774;x=ma[1];ma[1]=32774;N=qc[0];qc[0]=770;O=qc[1];qc[1]=771;J=qc[2];qc[2]=773;
K=qc[3];qc[3]=1;q=H.depth_enable;H.depth_enable=!1;P=a.viewport;T=P.x|0;U=P.y|0;L="width"in P?P.width|0:t.framebufferWidth-T;V="height"in P?P.height|0:t.framebufferHeight-U;Y=Za[0];Za[0]=T;v=Za[1];Za[1]=U;na=Za[2];Za[2]=L;Z=Za[3];Za[3]=V;da=H.scissor_enable;H.scissor_enable=!0;ha=H.stencil_enable;H.stencil_enable=!1;if(sa=w.profile)ja=performance.now(),b.count++;la=d.call(this,t,a,h);Aa=null;Aa=(oa=ka(la))?ca.createStream(la):ca.getElements(la);Qa=k.elements;k.elements=Aa;Pa=k.offset;k.offset=0;$e=
Aa?Aa.vertCount:-1;Ub=k.count;k.count=$e;bc=k.primitive;k.primitive=4;Ad=a.fill;ve=f[14];f[14]=Ad;de=a.id;Td=f[31];f[31]=de;le=a.opacity;Ie=f[10];f[10]=le;td=t.pixelRatio;nd=f[34];f[34]=td;wd=a.scale;sd=f[6];f[6]=wd;cd=a.scaleFract;Vc=f[7];f[7]=cd;yd=a.translate;Rc=f[8];f[8]=yd;Mc=a.translateFract;oc=f[9];f[9]=Mc;$a=c.call(this,t,a,h);hc=f[3];f[3]=$a;ea.buffer=a.positionBuffer;Bb=!1;mc=null;Sa=0;Jc=!1;Zc=Xb=0;Qd=1;od=0;sc=5126;Jb=Sc=Gc=Vb=0;ka(ea)?(Bb=!0,mc=xa.createStream(34962,ea),sc=mc.dtype):
(mc=xa.getBuffer(ea))?sc=mc.dtype:"constant"in ea?(Qd=2,"number"===typeof ea.constant?(Gc=ea.constant,Sc=Jb=Vb=0):(Gc=0<ea.constant.length?ea.constant[0]:0,Sc=1<ea.constant.length?ea.constant[1]:0,Jb=2<ea.constant.length?ea.constant[2]:0,Vb=3<ea.constant.length?ea.constant[3]:0)):(mc=ka(ea.buffer)?xa.createStream(34962,ea.buffer):xa.getBuffer(ea.buffer),sc="type"in ea?ib[ea.type]:mc.dtype,Jc=!!ea.normalized,Zc=ea.size|0,Xb=ea.offset|0,od=ea.stride|0,Sa=ea.divisor|0);zc=p.buffer;p.buffer=mc;Wa=p.divisor;
p.divisor=Sa;ra=p.normalized;p.normalized=Jc;pd=p.offset;p.offset=Xb;Yb=p.size;p.size=Zc;ab=p.state;p.state=Qd;Sb=p.stride;p.stride=od;cb=p.type;p.type=sc;Ac=p.w;p.w=Vb;Nb=p.x;p.x=Gc;Cd=p.y;p.y=Sc;ic=p.z;p.z=Jb;va.buffer=a.positionFractBuffer;Ob=!1;ud=null;Pb=0;Ma=!1;tb=nb=0;gb=1;Na=0;lc=5126;fc=db=id=Qb=0;ka(va)?(Ob=!0,ud=xa.createStream(34962,va),lc=ud.dtype):(ud=xa.getBuffer(va))?lc=ud.dtype:"constant"in va?(gb=2,"number"===typeof va.constant?(id=va.constant,db=fc=Qb=0):(id=0<va.constant.length?
va.constant[0]:0,db=1<va.constant.length?va.constant[1]:0,fc=2<va.constant.length?va.constant[2]:0,Qb=3<va.constant.length?va.constant[3]:0)):(ud=ka(va.buffer)?xa.createStream(34962,va.buffer):xa.getBuffer(va.buffer),lc="type"in va?ib[va.type]:ud.dtype,Ma=!!va.normalized,tb=va.size|0,nb=va.offset|0,Na=va.stride|0,Pb=va.divisor|0);Hc=e.buffer;e.buffer=ud;ac=e.divisor;e.divisor=Pb;jb=e.normalized;e.normalized=Ma;kb=e.offset;e.offset=nb;ta=e.size;e.size=tb;ob=e.state;e.state=gb;wa=e.stride;e.stride=
Na;Ta=e.type;e.type=lc;bb=e.w;e.w=Qb;Ba=e.x;e.x=id;eb=e.y;e.y=db;Ka=e.z;e.z=fc;zb=R.vert;R.vert=42;yb=R.frag;R.frag=41;w.dirty=!0;g(t,a,h);t.viewportWidth=A;t.viewportHeight=E;Ua[0]=D;Ua[1]=C;Ua[2]=u;Ua[3]=B;Q[0]=W;Q[1]=y;Q[2]=S;Q[3]=pa;H.blend_enable=I;ma[0]=G;ma[1]=x;qc[0]=N;qc[1]=O;qc[2]=J;qc[3]=K;H.depth_enable=q;Za[0]=Y;Za[1]=v;Za[2]=na;Za[3]=Z;H.scissor_enable=da;H.stencil_enable=ha;sa&&(b.cpuTime+=performance.now()-ja);oa&&ca.destroyStream(Aa);k.elements=Qa;k.offset=Pa;k.count=Ub;k.primitive=
bc;f[14]=ve;f[31]=Td;f[10]=Ie;f[34]=nd;f[6]=sd;f[7]=Vc;f[8]=Rc;f[9]=oc;f[3]=hc;Bb&&xa.destroyStream(mc);p.buffer=zc;p.divisor=Wa;p.normalized=ra;p.offset=pd;p.size=Yb;p.state=ab;p.stride=Sb;p.type=cb;p.w=Ac;p.x=Nb;p.y=Cd;p.z=ic;Ob&&xa.destroyStream(ud);e.buffer=Hc;e.divisor=ac;e.normalized=jb;e.offset=kb;e.size=ta;e.state=ob;e.stride=wa;e.type=Ta;e.w=bb;e.x=Ba;e.y=eb;e.z=Ka;R.vert=zb;R.frag=yb;w.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
b,g,h,d,c,p,e,l,u,W,n,E,r,C,y,D,v,oa,I,xa,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,gd,qc,la,Pa,Z,K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va,$b,nc,jc,vd,wc){var aa,M,ia,Fa,sb,Lc,Fc,F,B,ga,ua,X,fa,qa,G,x,ba,O,Ea,Ha,q,rc,Da,U,Db,xb,Ze,Yd,ce,Vd,Jd,se,xd,fe,te,Kd,Sd,Zd,ie;aa=a.attributes;M=a.buffer;ia=a.context;Fa=a.current;sb=a.draw;Lc=a.elements;Fc=a.extensions;F=a.framebuffer;B=a.gl;ga=a.isBufferArgs;ua=a.next;X=a.shader;fa=a.uniforms;qa=a.vao;G=ua.blend_color;x=Fa.blend_color;ba=ua.blend_equation;
O=Fa.blend_equation;Ea=ua.blend_func;Ha=Fa.blend_func;q=ua.colorMask;rc=Fa.colorMask;Da=ua.depth_range;U=Fa.depth_range;Db=ua.polygonOffset_offset;xb=Fa.polygonOffset_offset;Ze=ua.sample_coverage;Yd=Fa.sample_coverage;ce=ua.scissor_box;Vd=Fa.scissor_box;Jd=ua.stencil_func;se=Fa.stencil_func;xd=ua.stencil_opBack;fe=Fa.stencil_opBack;te=ua.stencil_opFront;Kd=Fa.stencil_opFront;Sd=ua.viewport;Zd=Fa.viewport;ie={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,c){var e,d,f,g,h,k;e=F.next;e!==F.cur&&(e?B.bindFramebuffer(36160,e.framebuffer):B.bindFramebuffer(36160,null),F.cur=e);if(Fa.dirty){var l,m,p,n,r,t,w,A,E,D,C,u,W,y,G,S,H,pa,I,v,P,L,Q,R,X,fa,ca,na,ra,ka,Ea,ab,xa,cb;l=ua.dither;l!==Fa.dither&&(l?B.enable(3024):B.disable(3024),Fa.dither=l);m=ba[0];p=ba[1];if(m!==O[0]||p!==O[1])B.blendEquationSeparate(m,p),O[0]=m,O[1]=p;n=ua.depth_func;n!==Fa.depth_func&&(B.depthFunc(n),Fa.depth_func=n);r=Da[0];t=Da[1];if(r!==U[0]||t!==U[1])B.depthRange(r,
t),U[0]=r,U[1]=t;w=ua.depth_mask;w!==Fa.depth_mask&&(B.depthMask(w),Fa.depth_mask=w);A=q[0];E=q[1];D=q[2];C=q[3];if(A!==rc[0]||E!==rc[1]||D!==rc[2]||C!==rc[3])B.colorMask(A,E,D,C),rc[0]=A,rc[1]=E,rc[2]=D,rc[3]=C;u=ua.cull_enable;u!==Fa.cull_enable&&(u?B.enable(2884):B.disable(2884),Fa.cull_enable=u);W=ua.cull_face;W!==Fa.cull_face&&(B.cullFace(W),Fa.cull_face=W);y=ua.frontFace;y!==Fa.frontFace&&(B.frontFace(y),Fa.frontFace=y);G=ua.lineWidth;G!==Fa.lineWidth&&(B.lineWidth(G),Fa.lineWidth=G);S=ua.polygonOffset_enable;
S!==Fa.polygonOffset_enable&&(S?B.enable(32823):B.disable(32823),Fa.polygonOffset_enable=S);H=Db[0];pa=Db[1];if(H!==xb[0]||pa!==xb[1])B.polygonOffset(H,pa),xb[0]=H,xb[1]=pa;I=ua.sample_alpha;I!==Fa.sample_alpha&&(I?B.enable(32926):B.disable(32926),Fa.sample_alpha=I);v=ua.sample_enable;v!==Fa.sample_enable&&(v?B.enable(32928):B.disable(32928),Fa.sample_enable=v);P=Ze[0];L=Ze[1];if(P!==Yd[0]||L!==Yd[1])B.sampleCoverage(P,L),Yd[0]=P,Yd[1]=L;Q=ua.stencil_mask;Q!==Fa.stencil_mask&&(B.stencilMask(Q),Fa.stencil_mask=
Q);R=Jd[0];X=Jd[1];fa=Jd[2];if(R!==se[0]||X!==se[1]||fa!==se[2])B.stencilFunc(R,X,fa),se[0]=R,se[1]=X,se[2]=fa;ca=te[0];na=te[1];ra=te[2];ka=te[3];if(ca!==Kd[0]||na!==Kd[1]||ra!==Kd[2]||ka!==Kd[3])B.stencilOpSeparate(ca,na,ra,ka),Kd[0]=ca,Kd[1]=na,Kd[2]=ra,Kd[3]=ka;Ea=xd[0];ab=xd[1];xa=xd[2];cb=xd[3];if(Ea!==fe[0]||ab!==fe[1]||xa!==fe[2]||cb!==fe[3])B.stencilOpSeparate(Ea,ab,xa,cb),fe[0]=Ea,fe[1]=ab,fe[2]=xa,fe[3]=cb}B.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;B.enable(3042);Fa.blend_enable=
!0;B.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;B.disable(2929);Fa.depth_enable=!1;B.enable(3089);Fa.scissor_enable=!0;B.disable(2960);Fa.stencil_enable=!1;if(d=Fa.profile)f=performance.now(),b.count+=c;B.useProgram(ja.program);g=Fc.angle_instanced_arrays;var oa;qa.setVAO(null);B.uniform1i(z.location,!1);B.uniform1i(bc.location,sa.bind());oa=sb.instances;for(h=0;h<c;++h){k=a[h];var Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,
Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,Sd,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,ce,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,Ve,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Me,ze,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,
tf,dg,Sf,Tf;Nb=k.viewport;Cd=Nb.x|0;ic=Nb.y|0;Ob="width"in Nb?Nb.width|0:ia.framebufferWidth-Cd;ud="height"in Nb?Nb.height|0:ia.framebufferHeight-ic;Pb=ia.viewportWidth;ia.viewportWidth=Ob;Ma=ia.viewportHeight;ia.viewportHeight=ud;B.viewport(Cd,ic,Ob,ud);Zd[0]=Cd;Zd[1]=ic;Zd[2]=Ob;Zd[3]=ud;nb=k.viewport;tb=nb.x|0;gb=nb.y|0;Na="width"in nb?nb.width|0:ia.framebufferWidth-tb;lc="height"in nb?nb.height|0:ia.framebufferHeight-gb;B.scissor(tb,gb,Na,lc);Vd[0]=tb;Vd[1]=gb;Vd[2]=Na;Vd[3]=lc;Qb=ma.call(this,
ia,k,h);id=!1;db=null;fc=0;Hc=!1;jb=ac=0;kb=1;ta=0;ob=5126;Ba=bb=Ta=wa=0;ga(Qb)?(id=!0,db=M.createStream(34962,Qb),ob=db.dtype):(db=M.getBuffer(Qb))?ob=db.dtype:"constant"in Qb?(kb=2,"number"===typeof Qb.constant?(Ta=Qb.constant,bb=Ba=wa=0):(Ta=0<Qb.constant.length?Qb.constant[0]:0,bb=1<Qb.constant.length?Qb.constant[1]:0,Ba=2<Qb.constant.length?Qb.constant[2]:0,wa=3<Qb.constant.length?Qb.constant[3]:0)):(db=ga(Qb.buffer)?M.createStream(34962,Qb.buffer):M.getBuffer(Qb.buffer),ob="type"in Qb?ie[Qb.type]:
db.dtype,Hc=!!Qb.normalized,jb=Qb.size|0,ac=Qb.offset|0,ta=Qb.stride|0,fc=Qb.divisor|0);eb=nc.location;Ka=aa[eb];if(1===kb){Ka.buffer||B.enableVertexAttribArray(eb);zb=jb||1;if(Ka.type!==ob||Ka.size!==zb||Ka.buffer!==db||Ka.normalized!==Hc||Ka.offset!==ac||Ka.stride!==ta)B.bindBuffer(34962,db.buffer),B.vertexAttribPointer(eb,zb,ob,Hc,ta,ac),Ka.type=ob,Ka.size=zb,Ka.buffer=db,Ka.normalized=Hc,Ka.offset=ac,Ka.stride=ta;Ka.divisor!==fc&&(g.vertexAttribDivisorANGLE(eb,fc),Ka.divisor=fc)}else if(Ka.buffer&&
(B.disableVertexAttribArray(eb),Ka.buffer=null),Ka.x!==Ta||Ka.y!==bb||Ka.z!==Ba||Ka.w!==wa)B.vertexAttrib4f(eb,Ta,bb,Ba,wa),Ka.x=Ta,Ka.y=bb,Ka.z=Ba,Ka.w=wa;yb=gd.call(this,ia,k,h);Ra=!1;Kc=null;Eb=0;Gb=!1;ya=Rb=0;jd=1;La=0;Kb=5126;cc=za=hb=fb=0;ga(yb)?(Ra=!0,Kc=M.createStream(34962,yb),Kb=Kc.dtype):(Kc=M.getBuffer(yb))?Kb=Kc.dtype:"constant"in yb?(jd=2,"number"===typeof yb.constant?(hb=yb.constant,za=cc=fb=0):(hb=0<yb.constant.length?yb.constant[0]:0,za=1<yb.constant.length?yb.constant[1]:0,cc=2<
yb.constant.length?yb.constant[2]:0,fb=3<yb.constant.length?yb.constant[3]:0)):(Kc=ga(yb.buffer)?M.createStream(34962,yb.buffer):M.getBuffer(yb.buffer),Kb="type"in yb?ie[yb.type]:Kc.dtype,Gb=!!yb.normalized,ya=yb.size|0,Rb=yb.offset|0,La=yb.stride|0,Eb=yb.divisor|0);Ga=vd.location;pb=aa[Ga];if(1===jd){pb.buffer||B.enableVertexAttribArray(Ga);qb=ya||1;if(pb.type!==Kb||pb.size!==qb||pb.buffer!==Kc||pb.normalized!==Gb||pb.offset!==Rb||pb.stride!==La)B.bindBuffer(34962,Kc.buffer),B.vertexAttribPointer(Ga,
qb,Kb,Gb,La,Rb),pb.type=Kb,pb.size=qb,pb.buffer=Kc,pb.normalized=Gb,pb.offset=Rb,pb.stride=La;pb.divisor!==Eb&&(g.vertexAttribDivisorANGLE(Ga,Eb),pb.divisor=Eb)}else if(pb.buffer&&(B.disableVertexAttribArray(Ga),pb.buffer=null),pb.x!==hb||pb.y!==za||pb.z!==cc||pb.w!==fb)B.vertexAttrib4f(Ga,hb,za,cc,fb),pb.x=hb,pb.y=za,pb.z=cc,pb.w=fb;Xa=qc.call(this,ia,k,h);Ya=!1;kc=null;vc=0;tc=!1;Hb=Va=0;Cc=1;Ia=0;xc=5126;ub=lb=Ca=Oa=0;ga(Xa)?(Ya=!0,kc=M.createStream(34962,Xa),xc=kc.dtype):(kc=M.getBuffer(Xa))?
xc=kc.dtype:"constant"in Xa?(Cc=2,"number"===typeof Xa.constant?(Ca=Xa.constant,lb=ub=Oa=0):(Ca=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?Xa.constant[1]:0,ub=2<Xa.constant.length?Xa.constant[2]:0,Oa=3<Xa.constant.length?Xa.constant[3]:0)):(kc=ga(Xa.buffer)?M.createStream(34962,Xa.buffer):M.getBuffer(Xa.buffer),xc="type"in Xa?ie[Xa.type]:kc.dtype,tc=!!Xa.normalized,Hb=Xa.size|0,Va=Xa.offset|0,Ia=Xa.stride|0,vc=Xa.divisor|0);Ab=jc.location;rb=aa[Ab];if(1===Cc){rb.buffer||B.enableVertexAttribArray(Ab);
uc=Hb||1;if(rb.type!==xc||rb.size!==uc||rb.buffer!==kc||rb.normalized!==tc||rb.offset!==Va||rb.stride!==Ia)B.bindBuffer(34962,kc.buffer),B.vertexAttribPointer(Ab,uc,xc,tc,Ia,Va),rb.type=xc,rb.size=uc,rb.buffer=kc,rb.normalized=tc,rb.offset=Va,rb.stride=Ia;rb.divisor!==vc&&(g.vertexAttribDivisorANGLE(Ab,vc),rb.divisor=vc)}else if(rb.buffer&&(B.disableVertexAttribArray(Ab),rb.buffer=null),rb.x!==Ca||rb.y!==lb||rb.z!==ub||rb.w!==Oa)B.vertexAttrib4f(Ab,Ca,lb,ub,Oa),rb.x=Ca,rb.y=lb,rb.z=ub,rb.w=Oa;vb=
la.call(this,ia,k,h);kd=!1;pc=null;Ae=0;Nc=!1;fd=ed=0;Tb=1;Zb=0;Lb=5126;wb=mb=Wb=Ja=0;ga(vb)?(kd=!0,pc=M.createStream(34962,vb),Lb=pc.dtype):(pc=M.getBuffer(vb))?Lb=pc.dtype:"constant"in vb?(Tb=2,"number"===typeof vb.constant?(Wb=vb.constant,mb=wb=Ja=0):(Wb=0<vb.constant.length?vb.constant[0]:0,mb=1<vb.constant.length?vb.constant[1]:0,wb=2<vb.constant.length?vb.constant[2]:0,Ja=3<vb.constant.length?vb.constant[3]:0)):(pc=ga(vb.buffer)?M.createStream(34962,vb.buffer):M.getBuffer(vb.buffer),Lb="type"in
vb?ie[vb.type]:pc.dtype,Nc=!!vb.normalized,fd=vb.size|0,ed=vb.offset|0,Zb=vb.stride|0,Ae=vb.divisor|0);Ib=wc.location;Mb=aa[Ib];if(1===Tb){Mb.buffer||B.enableVertexAttribArray(Ib);dc=fd||1;if(Mb.type!==Lb||Mb.size!==dc||Mb.buffer!==pc||Mb.normalized!==Nc||Mb.offset!==ed||Mb.stride!==Zb)B.bindBuffer(34962,pc.buffer),B.vertexAttribPointer(Ib,dc,Lb,Nc,Zb,ed),Mb.type=Lb,Mb.size=dc,Mb.buffer=pc,Mb.normalized=Nc,Mb.offset=ed,Mb.stride=Zb;Mb.divisor!==Ae&&(g.vertexAttribDivisorANGLE(Ib,Ae),Mb.divisor=Ae)}else if(Mb.buffer&&
(B.disableVertexAttribArray(Ib),Mb.buffer=null),Mb.x!==Wb||Mb.y!==mb||Mb.z!==wb||Mb.w!==Ja)B.vertexAttrib4f(Ib,Wb,mb,wb,Ja),Mb.x=Wb,Mb.y=mb,Mb.z=wb,Mb.w=Ja;gc=Pa.call(this,ia,k,h);Sd=!1;Gd=null;Bc=0;Dc=!1;$c=Oc=0;Tc=1;Pc=0;Fb=5126;Uc=Ic=Qc=Cb=0;ga(gc)?(Sd=!0,Gd=M.createStream(34962,gc),Fb=Gd.dtype):(Gd=M.getBuffer(gc))?Fb=Gd.dtype:"constant"in gc?(Tc=2,"number"===typeof gc.constant?(Qc=gc.constant,Ic=Uc=Cb=0):(Qc=0<gc.constant.length?gc.constant[0]:0,Ic=1<gc.constant.length?gc.constant[1]:0,Uc=2<
gc.constant.length?gc.constant[2]:0,Cb=3<gc.constant.length?gc.constant[3]:0)):(Gd=ga(gc.buffer)?M.createStream(34962,gc.buffer):M.getBuffer(gc.buffer),Fb="type"in gc?ie[gc.type]:Gd.dtype,Dc=!!gc.normalized,$c=gc.size|0,Oc=gc.offset|0,Pc=gc.stride|0,Bc=gc.divisor|0);ec=ea.location;Xc=aa[ec];if(1===Tc){Xc.buffer||B.enableVertexAttribArray(ec);bd=$c||1;if(Xc.type!==Fb||Xc.size!==bd||Xc.buffer!==Gd||Xc.normalized!==Dc||Xc.offset!==Oc||Xc.stride!==Pc)B.bindBuffer(34962,Gd.buffer),B.vertexAttribPointer(ec,
bd,Fb,Dc,Pc,Oc),Xc.type=Fb,Xc.size=bd,Xc.buffer=Gd,Xc.normalized=Dc,Xc.offset=Oc,Xc.stride=Pc;Xc.divisor!==Bc&&(g.vertexAttribDivisorANGLE(ec,Bc),Xc.divisor=Bc)}else if(Xc.buffer&&(B.disableVertexAttribArray(ec),Xc.buffer=null),Xc.x!==Qc||Xc.y!==Ic||Xc.z!==Uc||Xc.w!==Cb)B.vertexAttrib4f(ec,Qc,Ic,Uc,Cb),Xc.x=Qc,Xc.y=Ic,Xc.z=Uc,Xc.w=Cb;qd=Z.call(this,ia,k,h);ld=!1;Yc=null;ce=0;Wd=!1;Je=je=0;me=1;Hd=0;Ed=5126;hd=rd=Ec=dd=0;ga(qd)?(ld=!0,Yc=M.createStream(34962,qd),Ed=Yc.dtype):(Yc=M.getBuffer(qd))?Ed=
Yc.dtype:"constant"in qd?(me=2,"number"===typeof qd.constant?(Ec=qd.constant,rd=hd=dd=0):(Ec=0<qd.constant.length?qd.constant[0]:0,rd=1<qd.constant.length?qd.constant[1]:0,hd=2<qd.constant.length?qd.constant[2]:0,dd=3<qd.constant.length?qd.constant[3]:0)):(Yc=ga(qd.buffer)?M.createStream(34962,qd.buffer):M.getBuffer(qd.buffer),Ed="type"in qd?ie[qd.type]:Yc.dtype,Wd=!!qd.normalized,Je=qd.size|0,je=qd.offset|0,Hd=qd.stride|0,ce=qd.divisor|0);ad=Za.location;md=aa[ad];if(1===me){md.buffer||B.enableVertexAttribArray(ad);
Dd=Je||1;if(md.type!==Ed||md.size!==Dd||md.buffer!==Yc||md.normalized!==Wd||md.offset!==je||md.stride!==Hd)B.bindBuffer(34962,Yc.buffer),B.vertexAttribPointer(ad,Dd,Ed,Wd,Hd,je),md.type=Ed,md.size=Dd,md.buffer=Yc,md.normalized=Wd,md.offset=je,md.stride=Hd;md.divisor!==ce&&(g.vertexAttribDivisorANGLE(ad,ce),md.divisor=ce)}else if(md.buffer&&(B.disableVertexAttribArray(ad),md.buffer=null),md.x!==Ec||md.y!==rd||md.z!==hd||md.w!==dd)B.vertexAttrib4f(ad,Ec,rd,hd,dd),md.x=Ec,md.y=rd,md.z=hd,md.w=dd;zd=
K.call(this,ia,k,h);we=!1;ue=null;Ve=0;ne=!1;be=ee=0;pe=1;$d=0;ge=5126;ke=qe=Wc=yc=0;ga(zd)?(we=!0,ue=M.createStream(34962,zd),ge=ue.dtype):(ue=M.getBuffer(zd))?ge=ue.dtype:"constant"in zd?(pe=2,"number"===typeof zd.constant?(Wc=zd.constant,qe=ke=yc=0):(Wc=0<zd.constant.length?zd.constant[0]:0,qe=1<zd.constant.length?zd.constant[1]:0,ke=2<zd.constant.length?zd.constant[2]:0,yc=3<zd.constant.length?zd.constant[3]:0)):(ue=ga(zd.buffer)?M.createStream(34962,zd.buffer):M.getBuffer(zd.buffer),ge="type"in
zd?ie[zd.type]:ue.dtype,ne=!!zd.normalized,be=zd.size|0,ee=zd.offset|0,$d=zd.stride|0,Ve=zd.divisor|0);Fd=T.location;Ld=aa[Fd];if(1===pe){Ld.buffer||B.enableVertexAttribArray(Fd);Md=be||4;if(Ld.type!==ge||Ld.size!==Md||Ld.buffer!==ue||Ld.normalized!==ne||Ld.offset!==ee||Ld.stride!==$d)B.bindBuffer(34962,ue.buffer),B.vertexAttribPointer(Fd,Md,ge,ne,$d,ee),Ld.type=ge,Ld.size=Md,Ld.buffer=ue,Ld.normalized=ne,Ld.offset=ee,Ld.stride=$d;Ld.divisor!==Ve&&(g.vertexAttribDivisorANGLE(Fd,Ve),Ld.divisor=Ve)}else if(Ld.buffer&&
(B.disableVertexAttribArray(Fd),Ld.buffer=null),Ld.x!==Wc||Ld.y!==qe||Ld.z!==ke||Ld.w!==yc)B.vertexAttrib4f(Fd,Wc,qe,ke,yc),Ld.x=Wc,Ld.y=qe,Ld.z=ke,Ld.w=yc;Nd=N.call(this,ia,k,h);he=!1;Te=null;xe=0;oe=!1;Oe=Ne=0;Ke=1;re=0;Be=5126;Ce=Fe=Ee=De=0;ga(Nd)?(he=!0,Te=M.createStream(34962,Nd),Be=Te.dtype):(Te=M.getBuffer(Nd))?Be=Te.dtype:"constant"in Nd?(Ke=2,"number"===typeof Nd.constant?(Ee=Nd.constant,Fe=Ce=De=0):(Ee=0<Nd.constant.length?Nd.constant[0]:0,Fe=1<Nd.constant.length?Nd.constant[1]:0,Ce=2<Nd.constant.length?
Nd.constant[2]:0,De=3<Nd.constant.length?Nd.constant[3]:0)):(Te=ga(Nd.buffer)?M.createStream(34962,Nd.buffer):M.getBuffer(Nd.buffer),Be="type"in Nd?ie[Nd.type]:Te.dtype,oe=!!Nd.normalized,Oe=Nd.size|0,Ne=Nd.offset|0,re=Nd.stride|0,xe=Nd.divisor|0);Id=Ub.location;Rd=aa[Id];if(1===Ke){Rd.buffer||B.enableVertexAttribArray(Id);Xd=Oe||4;if(Rd.type!==Be||Rd.size!==Xd||Rd.buffer!==Te||Rd.normalized!==oe||Rd.offset!==Ne||Rd.stride!==re)B.bindBuffer(34962,Te.buffer),B.vertexAttribPointer(Id,Xd,Be,oe,re,Ne),
Rd.type=Be,Rd.size=Xd,Rd.buffer=Te,Rd.normalized=oe,Rd.offset=Ne,Rd.stride=re;Rd.divisor!==xe&&(g.vertexAttribDivisorANGLE(Id,xe),Rd.divisor=xe)}else if(Rd.buffer&&(B.disableVertexAttribArray(Id),Rd.buffer=null),Rd.x!==Ee||Rd.y!==Fe||Rd.z!==Ce||Rd.w!==De)B.vertexAttrib4f(Id,Ee,Fe,Ce,De),Rd.x=Ee,Rd.y=Fe,Rd.z=Ce,Rd.w=De;ae=V.call(this,ia,k,h);Ge=!1;Bd=null;Od=0;ye=!1;ff=He=0;Ye=1;Pe=0;Le=5126;Re=Qe=Ue=Xe=0;ga(ae)?(Ge=!0,Bd=M.createStream(34962,ae),Le=Bd.dtype):(Bd=M.getBuffer(ae))?Le=Bd.dtype:"constant"in
ae?(Ye=2,"number"===typeof ae.constant?(Ue=ae.constant,Qe=Re=Xe=0):(Ue=0<ae.constant.length?ae.constant[0]:0,Qe=1<ae.constant.length?ae.constant[1]:0,Re=2<ae.constant.length?ae.constant[2]:0,Xe=3<ae.constant.length?ae.constant[3]:0)):(Bd=ga(ae.buffer)?M.createStream(34962,ae.buffer):M.getBuffer(ae.buffer),Le="type"in ae?ie[ae.type]:Bd.dtype,ye=!!ae.normalized,ff=ae.size|0,He=ae.offset|0,Pe=ae.stride|0,Od=ae.divisor|0);Pd=ha.location;Ud=aa[Pd];if(1===Ye){Ud.buffer||B.enableVertexAttribArray(Pd);Se=
ff||1;if(Ud.type!==Le||Ud.size!==Se||Ud.buffer!==Bd||Ud.normalized!==ye||Ud.offset!==He||Ud.stride!==Pe)B.bindBuffer(34962,Bd.buffer),B.vertexAttribPointer(Pd,Se,Le,ye,Pe,He),Ud.type=Le,Ud.size=Se,Ud.buffer=Bd,Ud.normalized=ye,Ud.offset=He,Ud.stride=Pe;Ud.divisor!==Od&&(g.vertexAttribDivisorANGLE(Pd,Od),Ud.divisor=Od)}else if(Ud.buffer&&(B.disableVertexAttribArray(Pd),Ud.buffer=null),Ud.x!==Ue||Ud.y!==Qe||Ud.z!==Re||Ud.w!==Xe)B.vertexAttrib4f(Pd,Ue,Qe,Re,Xe),Ud.x=Ue,Ud.y=Qe,Ud.z=Re,Ud.w=Xe;gf=ia.pixelRatio;
h&&lf===gf||(lf=gf,B.uniform1f(Ua.location,gf));cf=k.scale;hf=cf[0];kf=cf[1];h&&jf===hf&&qf===kf||(jf=hf,qf=kf,B.uniform2f(Y.location,hf,kf));nf=k.scaleFract;rf=nf[0];Cf=nf[1];h&&Bf===rf&&Me===Cf||(Bf=rf,Me=Cf,B.uniform2f(ib.location,rf,Cf));ze=k.translate;of=ze[0];Df=ze[1];h&&pf===of&&Hf===Df||(pf=of,Hf=Df,B.uniform2f(va.location,of,Df));Af=k.translateFract;Ef=Af[0];wf=Af[1];h&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,B.uniform2f($b.location,Ef,wf));uf=J.call(this,ia,k,h);yf=uf[0];Jf=uf[1];h&&zf===yf&&Kf===
Jf||(zf=yf,Kf=Jf,B.uniform2f(Qa.location,yf,Jf));Lf=k.opacity;h&&Mf===Lf||(Mf=Lf,B.uniform1f(Aa.location,Lf));(sf=k.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Rf=sf._texture;B.uniform1i(da.location,Rf.bind());If=k.elements;tf=null;(tf=(dg=ga(If))?Lc.createStream(If):Lc.getElements(If))&&B.bindBuffer(34963,tf.buffer.buffer);Sf=k.offset;if(Tf=k.count)0<oa?tf?g.drawElementsInstancedANGLE(0,Tf,tf.type,Sf<<(tf.type-5121>>1),oa):g.drawArraysInstancedANGLE(0,Sf,Tf,oa):0>oa&&(tf?B.drawElements(0,
Tf,tf.type,Sf<<(tf.type-5121>>1)):B.drawArrays(0,Sf,Tf)),ia.viewportWidth=Pb,ia.viewportHeight=Ma,id&&M.destroyStream(db),Ra&&M.destroyStream(Kc),Ya&&M.destroyStream(kc),kd&&M.destroyStream(pc),Sd&&M.destroyStream(Gd),ld&&M.destroyStream(Yc),we&&M.destroyStream(ue),he&&M.destroyStream(Te),Ge&&M.destroyStream(Bd),Rf.unbind(),dg&&Lc.destroyStream(tf)}sa.unbind();Fa.dirty=!0;qa.setVAO(null);d&&(b.cpuTime+=performance.now()-f)},draw:function(a){var f,k,m,t,w,A,D,C,y,G,S,H,I,N,v,J,K,P,L,Q,R,X,V,fa,Z,ca,
na,ka,Ea,sa,ja,la,Jb,ma,Wa,ra,xa,oa,ab,Sb,cb,Pa,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,qc,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,Sd,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,gd,Wd,je,ce,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,Ve,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne,Oe,Ke,re;f=F.next;f!==F.cur&&(f?B.bindFramebuffer(36160,
f.framebuffer):B.bindFramebuffer(36160,null),F.cur=f);if(Fa.dirty){var Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf;Be=ua.dither;Be!==Fa.dither&&(Be?B.enable(3024):B.disable(3024),Fa.dither=Be);De=ba[0];Ee=ba[1];if(De!==O[0]||Ee!==O[1])B.blendEquationSeparate(De,Ee),O[0]=De,O[1]=Ee;Fe=ua.depth_func;Fe!==Fa.depth_func&&(B.depthFunc(Fe),Fa.depth_func=Fe);Ce=Da[0];Id=Da[1];if(Ce!==U[0]||Id!==U[1])B.depthRange(Ce,Id),U[0]=Ce,U[1]=Id;Rd=ua.depth_mask;
Rd!==Fa.depth_mask&&(B.depthMask(Rd),Fa.depth_mask=Rd);Xd=q[0];ae=q[1];Ge=q[2];Bd=q[3];if(Xd!==rc[0]||ae!==rc[1]||Ge!==rc[2]||Bd!==rc[3])B.colorMask(Xd,ae,Ge,Bd),rc[0]=Xd,rc[1]=ae,rc[2]=Ge,rc[3]=Bd;Od=ua.cull_enable;Od!==Fa.cull_enable&&(Od?B.enable(2884):B.disable(2884),Fa.cull_enable=Od);ye=ua.cull_face;ye!==Fa.cull_face&&(B.cullFace(ye),Fa.cull_face=ye);He=ua.frontFace;He!==Fa.frontFace&&(B.frontFace(He),Fa.frontFace=He);ff=ua.lineWidth;ff!==Fa.lineWidth&&(B.lineWidth(ff),Fa.lineWidth=ff);Ye=ua.polygonOffset_enable;
Ye!==Fa.polygonOffset_enable&&(Ye?B.enable(32823):B.disable(32823),Fa.polygonOffset_enable=Ye);Pe=Db[0];Le=Db[1];if(Pe!==xb[0]||Le!==xb[1])B.polygonOffset(Pe,Le),xb[0]=Pe,xb[1]=Le;Xe=ua.sample_alpha;Xe!==Fa.sample_alpha&&(Xe?B.enable(32926):B.disable(32926),Fa.sample_alpha=Xe);Ue=ua.sample_enable;Ue!==Fa.sample_enable&&(Ue?B.enable(32928):B.disable(32928),Fa.sample_enable=Ue);Qe=Ze[0];Re=Ze[1];if(Qe!==Yd[0]||Re!==Yd[1])B.sampleCoverage(Qe,Re),Yd[0]=Qe,Yd[1]=Re;Pd=ua.stencil_mask;Pd!==Fa.stencil_mask&&
(B.stencilMask(Pd),Fa.stencil_mask=Pd);Ud=Jd[0];Se=Jd[1];gf=Jd[2];if(Ud!==se[0]||Se!==se[1]||gf!==se[2])B.stencilFunc(Ud,Se,gf),se[0]=Ud,se[1]=Se,se[2]=gf;lf=te[0];cf=te[1];hf=te[2];jf=te[3];if(lf!==Kd[0]||cf!==Kd[1]||hf!==Kd[2]||jf!==Kd[3])B.stencilOpSeparate(lf,cf,hf,jf),Kd[0]=lf,Kd[1]=cf,Kd[2]=hf,Kd[3]=jf;kf=xd[0];qf=xd[1];nf=xd[2];rf=xd[3];if(kf!==fe[0]||qf!==fe[1]||nf!==fe[2]||rf!==fe[3])B.stencilOpSeparate(kf,qf,nf,rf),fe[0]=kf,fe[1]=qf,fe[2]=nf,fe[3]=rf}k=a.viewport;m=k.x|0;t=k.y|0;w="width"in
k?k.width|0:ia.framebufferWidth-m;A="height"in k?k.height|0:ia.framebufferHeight-t;D=ia.viewportWidth;ia.viewportWidth=w;C=ia.viewportHeight;ia.viewportHeight=A;B.viewport(m,t,w,A);Zd[0]=m;Zd[1]=t;Zd[2]=w;Zd[3]=A;B.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;B.enable(3042);Fa.blend_enable=!0;B.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;B.disable(2929);Fa.depth_enable=!1;y=a.viewport;G=y.x|0;S=y.y|0;H="width"in y?y.width|0:ia.framebufferWidth-G;I="height"in y?y.height|
0:ia.framebufferHeight-S;B.scissor(G,S,H,I);Vd[0]=G;Vd[1]=S;Vd[2]=H;Vd[3]=I;B.enable(3089);Fa.scissor_enable=!0;B.disable(2960);Fa.stencil_enable=!1;if(N=Fa.profile)v=performance.now(),b.count++;B.useProgram(g.program);J=Fc.angle_instanced_arrays;qa.setVAO(null);K=h.call(this,ia,a,0);P=!1;L=null;Q=0;R=!1;V=X=0;fa=1;Z=0;ca=5126;sa=Ea=ka=na=0;ga(K)?(P=!0,L=M.createStream(34962,K),ca=L.dtype):(L=M.getBuffer(K))?ca=L.dtype:"constant"in K?(fa=2,"number"===typeof K.constant?(ka=K.constant,Ea=sa=na=0):(ka=
0<K.constant.length?K.constant[0]:0,Ea=1<K.constant.length?K.constant[1]:0,sa=2<K.constant.length?K.constant[2]:0,na=3<K.constant.length?K.constant[3]:0)):(L=ga(K.buffer)?M.createStream(34962,K.buffer):M.getBuffer(K.buffer),ca="type"in K?ie[K.type]:L.dtype,R=!!K.normalized,V=K.size|0,X=K.offset|0,Z=K.stride|0,Q=K.divisor|0);ja=nc.location;la=aa[ja];if(1===fa){la.buffer||B.enableVertexAttribArray(ja);Jb=V||1;if(la.type!==ca||la.size!==Jb||la.buffer!==L||la.normalized!==R||la.offset!==X||la.stride!==
Z)B.bindBuffer(34962,L.buffer),B.vertexAttribPointer(ja,Jb,ca,R,Z,X),la.type=ca,la.size=Jb,la.buffer=L,la.normalized=R,la.offset=X,la.stride=Z;la.divisor!==Q&&(J.vertexAttribDivisorANGLE(ja,Q),la.divisor=Q)}else if(la.buffer&&(B.disableVertexAttribArray(ja),la.buffer=null),la.x!==ka||la.y!==Ea||la.z!==sa||la.w!==na)B.vertexAttrib4f(ja,ka,Ea,sa,na),la.x=ka,la.y=Ea,la.z=sa,la.w=na;ma=d.call(this,ia,a,0);Wa=!1;ra=null;xa=0;oa=!1;Sb=ab=0;cb=1;Pa=0;Nb=5126;ud=Ob=ic=Cd=0;ga(ma)?(Wa=!0,ra=M.createStream(34962,
ma),Nb=ra.dtype):(ra=M.getBuffer(ma))?Nb=ra.dtype:"constant"in ma?(cb=2,"number"===typeof ma.constant?(ic=ma.constant,Ob=ud=Cd=0):(ic=0<ma.constant.length?ma.constant[0]:0,Ob=1<ma.constant.length?ma.constant[1]:0,ud=2<ma.constant.length?ma.constant[2]:0,Cd=3<ma.constant.length?ma.constant[3]:0)):(ra=ga(ma.buffer)?M.createStream(34962,ma.buffer):M.getBuffer(ma.buffer),Nb="type"in ma?ie[ma.type]:ra.dtype,oa=!!ma.normalized,Sb=ma.size|0,ab=ma.offset|0,Pa=ma.stride|0,xa=ma.divisor|0);Pb=vd.location;Ma=
aa[Pb];if(1===cb){Ma.buffer||B.enableVertexAttribArray(Pb);nb=Sb||1;if(Ma.type!==Nb||Ma.size!==nb||Ma.buffer!==ra||Ma.normalized!==oa||Ma.offset!==ab||Ma.stride!==Pa)B.bindBuffer(34962,ra.buffer),B.vertexAttribPointer(Pb,nb,Nb,oa,Pa,ab),Ma.type=Nb,Ma.size=nb,Ma.buffer=ra,Ma.normalized=oa,Ma.offset=ab,Ma.stride=Pa;Ma.divisor!==xa&&(J.vertexAttribDivisorANGLE(Pb,xa),Ma.divisor=xa)}else if(Ma.buffer&&(B.disableVertexAttribArray(Pb),Ma.buffer=null),Ma.x!==ic||Ma.y!==Ob||Ma.z!==ud||Ma.w!==Cd)B.vertexAttrib4f(Pb,
ic,Ob,ud,Cd),Ma.x=ic,Ma.y=Ob,Ma.z=ud,Ma.w=Cd;tb=c.call(this,ia,a,0);gb=!1;Na=null;lc=0;Qb=!1;db=id=0;fc=1;Hc=0;ac=5126;ob=ta=kb=jb=0;ga(tb)?(gb=!0,Na=M.createStream(34962,tb),ac=Na.dtype):(Na=M.getBuffer(tb))?ac=Na.dtype:"constant"in tb?(fc=2,"number"===typeof tb.constant?(kb=tb.constant,ta=ob=jb=0):(kb=0<tb.constant.length?tb.constant[0]:0,ta=1<tb.constant.length?tb.constant[1]:0,ob=2<tb.constant.length?tb.constant[2]:0,jb=3<tb.constant.length?tb.constant[3]:0)):(Na=ga(tb.buffer)?M.createStream(34962,
tb.buffer):M.getBuffer(tb.buffer),ac="type"in tb?ie[tb.type]:Na.dtype,Qb=!!tb.normalized,db=tb.size|0,id=tb.offset|0,Hc=tb.stride|0,lc=tb.divisor|0);wa=jc.location;Ta=aa[wa];if(1===fc){Ta.buffer||B.enableVertexAttribArray(wa);bb=db||1;if(Ta.type!==ac||Ta.size!==bb||Ta.buffer!==Na||Ta.normalized!==Qb||Ta.offset!==id||Ta.stride!==Hc)B.bindBuffer(34962,Na.buffer),B.vertexAttribPointer(wa,bb,ac,Qb,Hc,id),Ta.type=ac,Ta.size=bb,Ta.buffer=Na,Ta.normalized=Qb,Ta.offset=id,Ta.stride=Hc;Ta.divisor!==lc&&(J.vertexAttribDivisorANGLE(wa,
lc),Ta.divisor=lc)}else if(Ta.buffer&&(B.disableVertexAttribArray(wa),Ta.buffer=null),Ta.x!==kb||Ta.y!==ta||Ta.z!==ob||Ta.w!==jb)B.vertexAttrib4f(wa,kb,ta,ob,jb),Ta.x=kb,Ta.y=ta,Ta.z=ob,Ta.w=jb;Ba=p.call(this,ia,a,0);eb=!1;Ka=null;zb=0;yb=!1;Kc=Ra=0;Eb=1;Gb=0;Rb=5126;Kb=La=jd=ya=0;ga(Ba)?(eb=!0,Ka=M.createStream(34962,Ba),Rb=Ka.dtype):(Ka=M.getBuffer(Ba))?Rb=Ka.dtype:"constant"in Ba?(Eb=2,"number"===typeof Ba.constant?(jd=Ba.constant,La=Kb=ya=0):(jd=0<Ba.constant.length?Ba.constant[0]:0,La=1<Ba.constant.length?
Ba.constant[1]:0,Kb=2<Ba.constant.length?Ba.constant[2]:0,ya=3<Ba.constant.length?Ba.constant[3]:0)):(Ka=ga(Ba.buffer)?M.createStream(34962,Ba.buffer):M.getBuffer(Ba.buffer),Rb="type"in Ba?ie[Ba.type]:Ka.dtype,yb=!!Ba.normalized,Kc=Ba.size|0,Ra=Ba.offset|0,Gb=Ba.stride|0,zb=Ba.divisor|0);fb=wc.location;hb=aa[fb];if(1===Eb){hb.buffer||B.enableVertexAttribArray(fb);za=Kc||1;if(hb.type!==Rb||hb.size!==za||hb.buffer!==Ka||hb.normalized!==yb||hb.offset!==Ra||hb.stride!==Gb)B.bindBuffer(34962,Ka.buffer),
B.vertexAttribPointer(fb,za,Rb,yb,Gb,Ra),hb.type=Rb,hb.size=za,hb.buffer=Ka,hb.normalized=yb,hb.offset=Ra,hb.stride=Gb;hb.divisor!==zb&&(J.vertexAttribDivisorANGLE(fb,zb),hb.divisor=zb)}else if(hb.buffer&&(B.disableVertexAttribArray(fb),hb.buffer=null),hb.x!==jd||hb.y!==La||hb.z!==Kb||hb.w!==ya)B.vertexAttrib4f(fb,jd,La,Kb,ya),hb.x=jd,hb.y=La,hb.z=Kb,hb.w=ya;cc=e.call(this,ia,a,0);Ga=!1;pb=null;qb=0;Xa=!1;kc=Ya=0;vc=1;tc=0;Va=5126;xc=Ia=Cc=Hb=0;ga(cc)?(Ga=!0,pb=M.createStream(34962,cc),Va=pb.dtype):
(pb=M.getBuffer(cc))?Va=pb.dtype:"constant"in cc?(vc=2,"number"===typeof cc.constant?(Cc=cc.constant,Ia=xc=Hb=0):(Cc=0<cc.constant.length?cc.constant[0]:0,Ia=1<cc.constant.length?cc.constant[1]:0,xc=2<cc.constant.length?cc.constant[2]:0,Hb=3<cc.constant.length?cc.constant[3]:0)):(pb=ga(cc.buffer)?M.createStream(34962,cc.buffer):M.getBuffer(cc.buffer),Va="type"in cc?ie[cc.type]:pb.dtype,Xa=!!cc.normalized,kc=cc.size|0,Ya=cc.offset|0,tc=cc.stride|0,qb=cc.divisor|0);Oa=ea.location;Ca=aa[Oa];if(1===vc){Ca.buffer||
B.enableVertexAttribArray(Oa);lb=kc||1;if(Ca.type!==Va||Ca.size!==lb||Ca.buffer!==pb||Ca.normalized!==Xa||Ca.offset!==Ya||Ca.stride!==tc)B.bindBuffer(34962,pb.buffer),B.vertexAttribPointer(Oa,lb,Va,Xa,tc,Ya),Ca.type=Va,Ca.size=lb,Ca.buffer=pb,Ca.normalized=Xa,Ca.offset=Ya,Ca.stride=tc;Ca.divisor!==qb&&(J.vertexAttribDivisorANGLE(Oa,qb),Ca.divisor=qb)}else if(Ca.buffer&&(B.disableVertexAttribArray(Oa),Ca.buffer=null),Ca.x!==Cc||Ca.y!==Ia||Ca.z!==xc||Ca.w!==Hb)B.vertexAttrib4f(Oa,Cc,Ia,xc,Hb),Ca.x=
Cc,Ca.y=Ia,Ca.z=xc,Ca.w=Hb;ub=l.call(this,ia,a,0);Ab=!1;rb=null;uc=0;vb=!1;pc=kd=0;qc=1;Nc=0;ed=5126;Lb=Zb=Tb=fd=0;ga(ub)?(Ab=!0,rb=M.createStream(34962,ub),ed=rb.dtype):(rb=M.getBuffer(ub))?ed=rb.dtype:"constant"in ub?(qc=2,"number"===typeof ub.constant?(Tb=ub.constant,Zb=Lb=fd=0):(Tb=0<ub.constant.length?ub.constant[0]:0,Zb=1<ub.constant.length?ub.constant[1]:0,Lb=2<ub.constant.length?ub.constant[2]:0,fd=3<ub.constant.length?ub.constant[3]:0)):(rb=ga(ub.buffer)?M.createStream(34962,ub.buffer):M.getBuffer(ub.buffer),
ed="type"in ub?ie[ub.type]:rb.dtype,vb=!!ub.normalized,pc=ub.size|0,kd=ub.offset|0,Nc=ub.stride|0,uc=ub.divisor|0);Ja=Za.location;Wb=aa[Ja];if(1===qc){Wb.buffer||B.enableVertexAttribArray(Ja);mb=pc||1;if(Wb.type!==ed||Wb.size!==mb||Wb.buffer!==rb||Wb.normalized!==vb||Wb.offset!==kd||Wb.stride!==Nc)B.bindBuffer(34962,rb.buffer),B.vertexAttribPointer(Ja,mb,ed,vb,Nc,kd),Wb.type=ed,Wb.size=mb,Wb.buffer=rb,Wb.normalized=vb,Wb.offset=kd,Wb.stride=Nc;Wb.divisor!==uc&&(J.vertexAttribDivisorANGLE(Ja,uc),Wb.divisor=
uc)}else if(Wb.buffer&&(B.disableVertexAttribArray(Ja),Wb.buffer=null),Wb.x!==Tb||Wb.y!==Zb||Wb.z!==Lb||Wb.w!==fd)B.vertexAttrib4f(Ja,Tb,Zb,Lb,fd),Wb.x=Tb,Wb.y=Zb,Wb.z=Lb,Wb.w=fd;wb=u.call(this,ia,a,0);Ib=!1;Mb=null;dc=0;gc=!1;Gd=Sd=0;Bc=1;Dc=0;Oc=5126;Fb=Pc=Tc=$c=0;ga(wb)?(Ib=!0,Mb=M.createStream(34962,wb),Oc=Mb.dtype):(Mb=M.getBuffer(wb))?Oc=Mb.dtype:"constant"in wb?(Bc=2,"number"===typeof wb.constant?(Tc=wb.constant,Pc=Fb=$c=0):(Tc=0<wb.constant.length?wb.constant[0]:0,Pc=1<wb.constant.length?
wb.constant[1]:0,Fb=2<wb.constant.length?wb.constant[2]:0,$c=3<wb.constant.length?wb.constant[3]:0)):(Mb=ga(wb.buffer)?M.createStream(34962,wb.buffer):M.getBuffer(wb.buffer),Oc="type"in wb?ie[wb.type]:Mb.dtype,gc=!!wb.normalized,Gd=wb.size|0,Sd=wb.offset|0,Dc=wb.stride|0,dc=wb.divisor|0);Cb=T.location;Qc=aa[Cb];if(1===Bc){Qc.buffer||B.enableVertexAttribArray(Cb);Ic=Gd||4;if(Qc.type!==Oc||Qc.size!==Ic||Qc.buffer!==Mb||Qc.normalized!==gc||Qc.offset!==Sd||Qc.stride!==Dc)B.bindBuffer(34962,Mb.buffer),
B.vertexAttribPointer(Cb,Ic,Oc,gc,Dc,Sd),Qc.type=Oc,Qc.size=Ic,Qc.buffer=Mb,Qc.normalized=gc,Qc.offset=Sd,Qc.stride=Dc;Qc.divisor!==dc&&(J.vertexAttribDivisorANGLE(Cb,dc),Qc.divisor=dc)}else if(Qc.buffer&&(B.disableVertexAttribArray(Cb),Qc.buffer=null),Qc.x!==Tc||Qc.y!==Pc||Qc.z!==Fb||Qc.w!==$c)B.vertexAttrib4f(Cb,Tc,Pc,Fb,$c),Qc.x=Tc,Qc.y=Pc,Qc.z=Fb,Qc.w=$c;Uc=W.call(this,ia,a,0);ec=!1;Xc=null;bd=0;qd=!1;Yc=ld=0;gd=1;Wd=0;je=5126;Ed=Hd=me=ce=0;ga(Uc)?(ec=!0,Xc=M.createStream(34962,Uc),je=Xc.dtype):
(Xc=M.getBuffer(Uc))?je=Xc.dtype:"constant"in Uc?(gd=2,"number"===typeof Uc.constant?(me=Uc.constant,Hd=Ed=ce=0):(me=0<Uc.constant.length?Uc.constant[0]:0,Hd=1<Uc.constant.length?Uc.constant[1]:0,Ed=2<Uc.constant.length?Uc.constant[2]:0,ce=3<Uc.constant.length?Uc.constant[3]:0)):(Xc=ga(Uc.buffer)?M.createStream(34962,Uc.buffer):M.getBuffer(Uc.buffer),je="type"in Uc?ie[Uc.type]:Xc.dtype,qd=!!Uc.normalized,Yc=Uc.size|0,ld=Uc.offset|0,Wd=Uc.stride|0,bd=Uc.divisor|0);dd=Ub.location;Ec=aa[dd];if(1===gd){Ec.buffer||
B.enableVertexAttribArray(dd);rd=Yc||4;if(Ec.type!==je||Ec.size!==rd||Ec.buffer!==Xc||Ec.normalized!==qd||Ec.offset!==ld||Ec.stride!==Wd)B.bindBuffer(34962,Xc.buffer),B.vertexAttribPointer(dd,rd,je,qd,Wd,ld),Ec.type=je,Ec.size=rd,Ec.buffer=Xc,Ec.normalized=qd,Ec.offset=ld,Ec.stride=Wd;Ec.divisor!==bd&&(J.vertexAttribDivisorANGLE(dd,bd),Ec.divisor=bd)}else if(Ec.buffer&&(B.disableVertexAttribArray(dd),Ec.buffer=null),Ec.x!==me||Ec.y!==Hd||Ec.z!==Ed||Ec.w!==ce)B.vertexAttrib4f(dd,me,Hd,Ed,ce),Ec.x=
me,Ec.y=Hd,Ec.z=Ed,Ec.w=ce;hd=n.call(this,ia,a,0);ad=!1;md=null;Dd=0;zd=!1;ue=we=0;Ve=1;ne=0;ee=5126;ge=$d=pe=be=0;ga(hd)?(ad=!0,md=M.createStream(34962,hd),ee=md.dtype):(md=M.getBuffer(hd))?ee=md.dtype:"constant"in hd?(Ve=2,"number"===typeof hd.constant?(pe=hd.constant,$d=ge=be=0):(pe=0<hd.constant.length?hd.constant[0]:0,$d=1<hd.constant.length?hd.constant[1]:0,ge=2<hd.constant.length?hd.constant[2]:0,be=3<hd.constant.length?hd.constant[3]:0)):(md=ga(hd.buffer)?M.createStream(34962,hd.buffer):M.getBuffer(hd.buffer),
ee="type"in hd?ie[hd.type]:md.dtype,zd=!!hd.normalized,ue=hd.size|0,we=hd.offset|0,ne=hd.stride|0,Dd=hd.divisor|0);yc=ha.location;Wc=aa[yc];if(1===Ve){Wc.buffer||B.enableVertexAttribArray(yc);qe=ue||1;if(Wc.type!==ee||Wc.size!==qe||Wc.buffer!==md||Wc.normalized!==zd||Wc.offset!==we||Wc.stride!==ne)B.bindBuffer(34962,md.buffer),B.vertexAttribPointer(yc,qe,ee,zd,ne,we),Wc.type=ee,Wc.size=qe,Wc.buffer=md,Wc.normalized=zd,Wc.offset=we,Wc.stride=ne;Wc.divisor!==Dd&&(J.vertexAttribDivisorANGLE(yc,Dd),Wc.divisor=
Dd)}else if(Wc.buffer&&(B.disableVertexAttribArray(yc),Wc.buffer=null),Wc.x!==pe||Wc.y!==$d||Wc.z!==ge||Wc.w!==be)B.vertexAttrib4f(yc,pe,$d,ge,be),Wc.x=pe,Wc.y=$d,Wc.z=ge,Wc.w=be;B.uniform1i(z.location,!1);B.uniform1f(Ua.location,ia.pixelRatio);ke=a.scale;B.uniform2f(Y.location,ke[0],ke[1]);Fd=a.scaleFract;B.uniform2f(ib.location,Fd[0],Fd[1]);Ld=a.translate;B.uniform2f(va.location,Ld[0],Ld[1]);Md=a.translateFract;B.uniform2f($b.location,Md[0],Md[1]);Nd=E.call(this,ia,a,0);B.uniform2f(Qa.location,
Nd[0],Nd[1]);B.uniform1f(Aa.location,a.opacity);B.uniform1i(bc.location,r.bind());(he=a.markerTexture)&&"framebuffer"===he._reglType&&(he=he.color[0]);Te=he._texture;B.uniform1i(da.location,Te.bind());xe=a.elements;oe=null;(oe=(Ne=ga(xe))?Lc.createStream(xe):Lc.getElements(xe))&&B.bindBuffer(34963,oe.buffer.buffer);Oe=a.offset;if(Ke=a.count)re=sb.instances,0<re?oe?J.drawElementsInstancedANGLE(0,Ke,oe.type,Oe<<(oe.type-5121>>1),re):J.drawArraysInstancedANGLE(0,Oe,Ke,re):0>re&&(oe?B.drawElements(0,
Ke,oe.type,Oe<<(oe.type-5121>>1)):B.drawArrays(0,Oe,Ke)),Fa.dirty=!0,qa.setVAO(null),ia.viewportWidth=D,ia.viewportHeight=C,N&&(b.cpuTime+=performance.now()-v),P&&M.destroyStream(L),Wa&&M.destroyStream(ra),gb&&M.destroyStream(Na),eb&&M.destroyStream(Ka),Ga&&M.destroyStream(pb),Ab&&M.destroyStream(rb),Ib&&M.destroyStream(Mb),ec&&M.destroyStream(Xc),ad&&M.destroyStream(md),r.unbind(),Te.unbind(),Ne&&Lc.destroyStream(oe)},scope:function(a,c,e){var d,g,h,l,p,n,q,r,x,z,B,E,u,W,F,K,O,pa,N,J,aa,U,ba,T,V,
Y,Z,da,ea,ha,la,qa,ma,ra,Ha,Da,sa,va,ja,Aa,Qa,xb,Pa,Ua,Za,wc,Ma,nb,tb,gb,Na,Db,ib,vd,db,fc,rc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Ub,Eb,Gb,Rb,ya,$b,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,nc,pc,bc,Nc,jc,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,qc,Fc,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,xd,Vd,Jd,Zd,gd,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,Kd,fe,se,te,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Yd,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,
He,Ze,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Me,ze,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf,dg,Sf,Tf,qg,df,af,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,bf,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;d=a.viewport;g=d.x|0;h=d.y|0;l="width"in d?d.width|0:ia.framebufferWidth-g;p="height"in d?d.height|0:ia.framebufferHeight-h;n=ia.viewportWidth;ia.viewportWidth=l;q=ia.viewportHeight;ia.viewportHeight=
p;r=Sd[0];Sd[0]=g;x=Sd[1];Sd[1]=h;z=Sd[2];Sd[2]=l;B=Sd[3];Sd[3]=p;E=G[0];G[0]=0;u=G[1];G[1]=0;W=G[2];G[2]=0;F=G[3];G[3]=1;K=ua.blend_enable;ua.blend_enable=!0;O=Ea[0];Ea[0]=770;pa=Ea[1];Ea[1]=771;N=Ea[2];Ea[2]=773;J=Ea[3];Ea[3]=1;aa=ua.depth_enable;ua.depth_enable=!1;U=a.viewport;ba=U.x|0;T=U.y|0;V="width"in U?U.width|0:ia.framebufferWidth-ba;Y="height"in U?U.height|0:ia.framebufferHeight-T;Z=ce[0];ce[0]=ba;da=ce[1];ce[1]=T;ea=ce[2];ce[2]=V;ha=ce[3];ce[3]=Y;la=ua.scissor_enable;ua.scissor_enable=
!0;qa=ua.stencil_enable;ua.stencil_enable=!1;if(ma=Fa.profile)ra=performance.now(),b.count++;Ha=a.elements;Da=null;Da=(sa=ga(Ha))?Lc.createStream(Ha):Lc.getElements(Ha);va=sb.elements;sb.elements=Da;ja=a.offset;Aa=sb.offset;sb.offset=ja;Qa=a.count;xb=sb.count;sb.count=Qa;Pa=sb.primitive;sb.primitive=0;Ua=fa[45];fa[45]=!1;Za=a.markerTexture;wc=fa[48];fa[48]=Za;Ma=a.opacity;nb=fa[10];fa[10]=Ma;tb=C.call(this,ia,a,e);gb=fa[46];fa[46]=tb;Na=fa[47];fa[47]=y;Db=ia.pixelRatio;ib=fa[34];fa[34]=Db;vd=a.scale;
db=fa[6];fa[6]=vd;fc=a.scaleFract;rc=fa[7];fa[7]=fc;ac=a.translate;jb=fa[8];fa[8]=ac;kb=a.translateFract;ta=fa[9];fa[9]=kb;ob=D.call(this,ia,a,e);wa=!1;Ta=null;bb=0;Ba=!1;Ka=eb=0;zb=1;yb=0;Ra=5126;Rb=Gb=Eb=Ub=0;ga(ob)?(wa=!0,Ta=M.createStream(34962,ob),Ra=Ta.dtype):(Ta=M.getBuffer(ob))?Ra=Ta.dtype:"constant"in ob?(zb=2,"number"===typeof ob.constant?(Eb=ob.constant,Gb=Rb=Ub=0):(Eb=0<ob.constant.length?ob.constant[0]:0,Gb=1<ob.constant.length?ob.constant[1]:0,Rb=2<ob.constant.length?ob.constant[2]:
0,Ub=3<ob.constant.length?ob.constant[3]:0)):(Ta=ga(ob.buffer)?M.createStream(34962,ob.buffer):M.getBuffer(ob.buffer),Ra="type"in ob?ie[ob.type]:Ta.dtype,Ba=!!ob.normalized,Ka=ob.size|0,eb=ob.offset|0,yb=ob.stride|0,bb=ob.divisor|0);ya=v.buffer;v.buffer=Ta;$b=v.divisor;v.divisor=bb;La=v.normalized;v.normalized=Ba;Kb=v.offset;v.offset=eb;fb=v.size;v.size=Ka;hb=v.state;v.state=zb;za=v.stride;v.stride=yb;cc=v.type;v.type=Ra;Ga=v.w;v.w=Ub;pb=v.x;v.x=Eb;qb=v.y;v.y=Gb;Xa=v.z;v.z=Rb;Ya=oa.call(this,ia,a,
e);kc=!1;vc=null;tc=0;Va=!1;Cc=Hb=0;Ia=1;xc=0;Oa=5126;Ab=ub=lb=Ca=0;ga(Ya)?(kc=!0,vc=M.createStream(34962,Ya),Oa=vc.dtype):(vc=M.getBuffer(Ya))?Oa=vc.dtype:"constant"in Ya?(Ia=2,"number"===typeof Ya.constant?(lb=Ya.constant,ub=Ab=Ca=0):(lb=0<Ya.constant.length?Ya.constant[0]:0,ub=1<Ya.constant.length?Ya.constant[1]:0,Ab=2<Ya.constant.length?Ya.constant[2]:0,Ca=3<Ya.constant.length?Ya.constant[3]:0)):(vc=ga(Ya.buffer)?M.createStream(34962,Ya.buffer):M.getBuffer(Ya.buffer),Oa="type"in Ya?ie[Ya.type]:
vc.dtype,Va=!!Ya.normalized,Cc=Ya.size|0,Hb=Ya.offset|0,xc=Ya.stride|0,tc=Ya.divisor|0);rb=I.buffer;I.buffer=vc;uc=I.divisor;I.divisor=tc;vb=I.normalized;I.normalized=Va;nc=I.offset;I.offset=Hb;pc=I.size;I.size=Cc;bc=I.state;I.state=Ia;Nc=I.stride;I.stride=xc;jc=I.type;I.type=Oa;fd=I.w;I.w=Ca;Tb=I.x;I.x=lb;Zb=I.y;I.y=ub;Lb=I.z;I.z=Ab;Ja=xa.call(this,ia,a,e);Wb=!1;mb=null;wb=0;Ib=!1;dc=Mb=0;gc=1;qc=0;Fc=5126;$c=Oc=Dc=Bc=0;ga(Ja)?(Wb=!0,mb=M.createStream(34962,Ja),Fc=mb.dtype):(mb=M.getBuffer(Ja))?
Fc=mb.dtype:"constant"in Ja?(gc=2,"number"===typeof Ja.constant?(Dc=Ja.constant,Oc=$c=Bc=0):(Dc=0<Ja.constant.length?Ja.constant[0]:0,Oc=1<Ja.constant.length?Ja.constant[1]:0,$c=2<Ja.constant.length?Ja.constant[2]:0,Bc=3<Ja.constant.length?Ja.constant[3]:0)):(mb=ga(Ja.buffer)?M.createStream(34962,Ja.buffer):M.getBuffer(Ja.buffer),Fc="type"in Ja?ie[Ja.type]:mb.dtype,Ib=!!Ja.normalized,dc=Ja.size|0,Mb=Ja.offset|0,qc=Ja.stride|0,wb=Ja.divisor|0);Tc=t.buffer;t.buffer=mb;Pc=t.divisor;t.divisor=wb;Fb=t.normalized;
t.normalized=Ib;Cb=t.offset;t.offset=Mb;Qc=t.size;t.size=dc;Ic=t.state;t.state=gc;Uc=t.stride;t.stride=qc;ec=t.type;t.type=Fc;Xc=t.w;t.w=Bc;bd=t.x;t.x=Dc;qd=t.y;t.y=Oc;ld=t.z;t.z=$c;Yc=w.call(this,ia,a,e);xd=!1;Vd=null;Jd=0;Zd=!1;Hd=gd=0;Ed=1;dd=0;Ec=5126;md=ad=hd=rd=0;ga(Yc)?(xd=!0,Vd=M.createStream(34962,Yc),Ec=Vd.dtype):(Vd=M.getBuffer(Yc))?Ec=Vd.dtype:"constant"in Yc?(Ed=2,"number"===typeof Yc.constant?(hd=Yc.constant,ad=md=rd=0):(hd=0<Yc.constant.length?Yc.constant[0]:0,ad=1<Yc.constant.length?
Yc.constant[1]:0,md=2<Yc.constant.length?Yc.constant[2]:0,rd=3<Yc.constant.length?Yc.constant[3]:0)):(Vd=ga(Yc.buffer)?M.createStream(34962,Yc.buffer):M.getBuffer(Yc.buffer),Ec="type"in Yc?ie[Yc.type]:Vd.dtype,Zd=!!Yc.normalized,Hd=Yc.size|0,gd=Yc.offset|0,dd=Yc.stride|0,Jd=Yc.divisor|0);Dd=k.buffer;k.buffer=Vd;zd=k.divisor;k.divisor=Jd;Kd=k.normalized;k.normalized=Zd;fe=k.offset;k.offset=gd;se=k.size;k.size=Hd;te=k.state;k.state=Ed;ee=k.stride;k.stride=dd;be=k.type;k.type=Ec;pe=k.w;k.w=rd;$d=k.x;
k.x=hd;ge=k.y;k.y=ad;yc=k.z;k.z=md;Wc=ca.call(this,ia,a,e);qe=!1;ke=null;Fd=0;Ld=!1;Nd=Md=0;he=1;Yd=0;xe=5126;Ke=Oe=Ne=oe=0;ga(Wc)?(qe=!0,ke=M.createStream(34962,Wc),xe=ke.dtype):(ke=M.getBuffer(Wc))?xe=ke.dtype:"constant"in Wc?(he=2,"number"===typeof Wc.constant?(Ne=Wc.constant,Oe=Ke=oe=0):(Ne=0<Wc.constant.length?Wc.constant[0]:0,Oe=1<Wc.constant.length?Wc.constant[1]:0,Ke=2<Wc.constant.length?Wc.constant[2]:0,oe=3<Wc.constant.length?Wc.constant[3]:0)):(ke=ga(Wc.buffer)?M.createStream(34962,Wc.buffer):
M.getBuffer(Wc.buffer),xe="type"in Wc?ie[Wc.type]:ke.dtype,Ld=!!Wc.normalized,Nd=Wc.size|0,Md=Wc.offset|0,Yd=Wc.stride|0,Fd=Wc.divisor|0);re=L.buffer;L.buffer=ke;Be=L.divisor;L.divisor=Fd;De=L.normalized;L.normalized=Ld;Ee=L.offset;L.offset=Md;Fe=L.size;L.size=Nd;Ce=L.state;L.state=he;Id=L.stride;L.stride=Yd;Rd=L.type;L.type=xe;Xd=L.w;L.w=oe;ae=L.x;L.x=Ne;Ge=L.y;L.y=Oe;Bd=L.z;L.z=Ke;Od=P.call(this,ia,a,e);ye=!1;He=null;Ze=0;Ye=!1;Le=Pe=0;Xe=1;Ue=0;Qe=5126;Se=Ud=Pd=Re=0;ga(Od)?(ye=!0,He=M.createStream(34962,
Od),Qe=He.dtype):(He=M.getBuffer(Od))?Qe=He.dtype:"constant"in Od?(Xe=2,"number"===typeof Od.constant?(Pd=Od.constant,Ud=Se=Re=0):(Pd=0<Od.constant.length?Od.constant[0]:0,Ud=1<Od.constant.length?Od.constant[1]:0,Se=2<Od.constant.length?Od.constant[2]:0,Re=3<Od.constant.length?Od.constant[3]:0)):(He=ga(Od.buffer)?M.createStream(34962,Od.buffer):M.getBuffer(Od.buffer),Qe="type"in Od?ie[Od.type]:He.dtype,Ye=!!Od.normalized,Le=Od.size|0,Pe=Od.offset|0,Ue=Od.stride|0,Ze=Od.divisor|0);gf=A.buffer;A.buffer=
He;lf=A.divisor;A.divisor=Ze;cf=A.normalized;A.normalized=Ye;hf=A.offset;A.offset=Pe;jf=A.size;A.size=Le;kf=A.state;A.state=Xe;qf=A.stride;A.stride=Ue;nf=A.type;A.type=Qe;rf=A.w;A.w=Re;Bf=A.x;A.x=Pd;Cf=A.y;A.y=Ud;Me=A.z;A.z=Se;ze=ka.call(this,ia,a,e);of=!1;pf=null;Df=0;Hf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;Jf=zf=yf=uf=0;ga(ze)?(of=!0,pf=M.createStream(34962,ze),xf=pf.dtype):(pf=M.getBuffer(ze))?xf=pf.dtype:"constant"in ze?(Ff=2,"number"===typeof ze.constant?(yf=ze.constant,zf=Jf=uf=0):(yf=0<ze.constant.length?
ze.constant[0]:0,zf=1<ze.constant.length?ze.constant[1]:0,Jf=2<ze.constant.length?ze.constant[2]:0,uf=3<ze.constant.length?ze.constant[3]:0)):(pf=ga(ze.buffer)?M.createStream(34962,ze.buffer):M.getBuffer(ze.buffer),xf="type"in ze?ie[ze.type]:pf.dtype,Hf=!!ze.normalized,Ef=ze.size|0,Af=ze.offset|0,wf=ze.stride|0,Df=ze.divisor|0);Kf=H.buffer;H.buffer=pf;Lf=H.divisor;H.divisor=Df;Mf=H.normalized;H.normalized=Hf;sf=H.offset;H.offset=Af;Rf=H.size;H.size=Ef;If=H.state;H.state=Ff;tf=H.stride;H.stride=wf;
dg=H.type;H.type=xf;Sf=H.w;H.w=uf;Tf=H.x;H.x=yf;qg=H.y;H.y=zf;df=H.z;H.z=Jf;af=R.call(this,ia,a,e);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ga(af)?(Nf=!0,Of=M.createStream(34962,af),Uf=Of.dtype):(Of=M.getBuffer(af))?Uf=Of.dtype:"constant"in af?(ig=2,"number"===typeof af.constant?(Yf=af.constant,Zf=jg=Xf=0):(Yf=0<af.constant.length?af.constant[0]:0,Zf=1<af.constant.length?af.constant[1]:0,jg=2<af.constant.length?af.constant[2]:0,Xf=3<af.constant.length?af.constant[3]:0)):(Of=
ga(af.buffer)?M.createStream(34962,af.buffer):M.getBuffer(af.buffer),Uf="type"in af?ie[af.type]:Of.dtype,fg=!!af.normalized,hg=af.size|0,gg=af.offset|0,Wf=af.stride|0,eg=af.divisor|0);rg=f.buffer;f.buffer=Of;sg=f.divisor;f.divisor=eg;tg=f.normalized;f.normalized=fg;ug=f.offset;f.offset=gg;vg=f.size;f.size=hg;wg=f.state;f.state=ig;xg=f.stride;f.stride=Wf;yg=f.type;f.type=Uf;zg=f.w;f.w=Xf;Ag=f.x;f.x=Yf;Bg=f.y;f.y=Zf;ef=f.z;f.z=jg;bf=m.call(this,ia,a,e);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=
5126;pg=cg=bg=ag=0;ga(bf)?(Pf=!0,Qf=M.createStream(34962,bf),Vf=Qf.dtype):(Qf=M.getBuffer(bf))?Vf=Qf.dtype:"constant"in bf?(og=2,"number"===typeof bf.constant?(bg=bf.constant,cg=pg=ag=0):(bg=0<bf.constant.length?bf.constant[0]:0,cg=1<bf.constant.length?bf.constant[1]:0,pg=2<bf.constant.length?bf.constant[2]:0,ag=3<bf.constant.length?bf.constant[3]:0)):(Qf=ga(bf.buffer)?M.createStream(34962,bf.buffer):M.getBuffer(bf.buffer),Vf="type"in bf?ie[bf.type]:Qf.dtype,lg=!!bf.normalized,ng=bf.size|0,mg=bf.offset|
0,$f=bf.stride|0,kg=bf.divisor|0);Cg=Q.buffer;Q.buffer=Qf;Dg=Q.divisor;Q.divisor=kg;Eg=Q.normalized;Q.normalized=lg;Fg=Q.offset;Q.offset=mg;Gg=Q.size;Q.size=ng;Hg=Q.state;Q.state=og;Ig=Q.stride;Q.stride=$f;Jg=Q.type;Q.type=Vf;Kg=Q.w;Q.w=ag;Lg=Q.x;Q.x=bg;Mg=Q.y;Q.y=cg;Ng=Q.z;Q.z=pg;Og=X.vert;X.vert=44;Pg=X.frag;X.frag=43;Fa.dirty=!0;c(ia,a,e);ia.viewportWidth=n;ia.viewportHeight=q;Sd[0]=r;Sd[1]=x;Sd[2]=z;Sd[3]=B;G[0]=E;G[1]=u;G[2]=W;G[3]=F;ua.blend_enable=K;Ea[0]=O;Ea[1]=pa;Ea[2]=N;Ea[3]=J;ua.depth_enable=
aa;ce[0]=Z;ce[1]=da;ce[2]=ea;ce[3]=ha;ua.scissor_enable=la;ua.stencil_enable=qa;ma&&(b.cpuTime+=performance.now()-ra);sa&&Lc.destroyStream(Da);sb.elements=va;sb.offset=Aa;sb.count=xb;sb.primitive=Pa;fa[45]=Ua;fa[48]=wc;fa[10]=nb;fa[46]=gb;fa[47]=Na;fa[34]=ib;fa[6]=db;fa[7]=rc;fa[8]=jb;fa[9]=ta;wa&&M.destroyStream(Ta);v.buffer=ya;v.divisor=$b;v.normalized=La;v.offset=Kb;v.size=fb;v.state=hb;v.stride=za;v.type=cc;v.w=Ga;v.x=pb;v.y=qb;v.z=Xa;kc&&M.destroyStream(vc);I.buffer=rb;I.divisor=uc;I.normalized=
vb;I.offset=nc;I.size=pc;I.state=bc;I.stride=Nc;I.type=jc;I.w=fd;I.x=Tb;I.y=Zb;I.z=Lb;Wb&&M.destroyStream(mb);t.buffer=Tc;t.divisor=Pc;t.normalized=Fb;t.offset=Cb;t.size=Qc;t.state=Ic;t.stride=Uc;t.type=ec;t.w=Xc;t.x=bd;t.y=qd;t.z=ld;xd&&M.destroyStream(Vd);k.buffer=Dd;k.divisor=zd;k.normalized=Kd;k.offset=fe;k.size=se;k.state=te;k.stride=ee;k.type=be;k.w=pe;k.x=$d;k.y=ge;k.z=yc;qe&&M.destroyStream(ke);L.buffer=re;L.divisor=Be;L.normalized=De;L.offset=Ee;L.size=Fe;L.state=Ce;L.stride=Id;L.type=Rd;
L.w=Xd;L.x=ae;L.y=Ge;L.z=Bd;ye&&M.destroyStream(He);A.buffer=gf;A.divisor=lf;A.normalized=cf;A.offset=hf;A.size=jf;A.state=kf;A.stride=qf;A.type=nf;A.w=rf;A.x=Bf;A.y=Cf;A.z=Me;of&&M.destroyStream(pf);H.buffer=Kf;H.divisor=Lf;H.normalized=Mf;H.offset=sf;H.size=Rf;H.state=If;H.stride=tf;H.type=dg;H.w=Sf;H.x=Tf;H.y=qg;H.z=df;Nf&&M.destroyStream(Of);f.buffer=rg;f.divisor=sg;f.normalized=tg;f.offset=ug;f.size=vg;f.state=wg;f.stride=xg;f.type=yg;f.w=zg;f.x=Ag;f.y=Bg;f.z=ef;Pf&&M.destroyStream(Qf);Q.buffer=
Cg;Q.divisor=Dg;Q.normalized=Eg;Q.offset=Fg;Q.size=Gg;Q.state=Hg;Q.stride=Ig;Q.type=Jg;Q.w=Kg;Q.x=Lg;Q.y=Mg;Q.z=Ng;X.vert=Og;X.frag=Pg;Fa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,b,g,h,d,c,p,e,l,u,y,n,E,r,C,S,D,v,oa,I,xa,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,gd,qc,la,Pa,Z,K,N,V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va,$b,nc,jc,vd){var wc,aa,M,ia,
Fa,sb,Lc,Fc,F,B,ga,ua,X,fa,qa,G,x,ba,O,Ea,Ha,q,rc,Da,U,Db,xb,Ze,Yd,ce,Vd,Jd,se,xd,fe,te,Kd,Sd,Zd;wc=a.attributes;aa=a.buffer;M=a.context;ia=a.current;Fa=a.draw;sb=a.elements;Lc=a.extensions;Fc=a.framebuffer;F=a.gl;B=a.isBufferArgs;ga=a.next;ua=a.shader;X=a.uniforms;fa=a.vao;qa=ga.blend_color;G=ia.blend_color;x=ga.blend_equation;ba=ia.blend_equation;O=ga.blend_func;Ea=ia.blend_func;Ha=ga.colorMask;q=ia.colorMask;rc=ga.depth_range;Da=ia.depth_range;U=ga.polygonOffset_offset;Db=ia.polygonOffset_offset;
xb=ga.sample_coverage;Ze=ia.sample_coverage;Yd=ga.scissor_box;ce=ia.scissor_box;Vd=ga.stencil_func;Jd=ia.stencil_func;se=ga.stencil_opBack;xd=ia.stencil_opBack;fe=ga.stencil_opFront;te=ia.stencil_opFront;Kd=ga.viewport;Sd=ia.viewport;Zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var e,d,f,g,h,k;e=Fc.next;e!==Fc.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),Fc.cur=e);if(ia.dirty){var l,m,p,
n,r,t,w,A,E,D,C,u,y,W,v,S,H,O,pa,I,L,P,Q,R,X,ca,ua,ka,qa,ra,na,xa,oa,Sb;l=ga.dither;l!==ia.dither&&(l?F.enable(3024):F.disable(3024),ia.dither=l);m=x[0];p=x[1];if(m!==ba[0]||p!==ba[1])F.blendEquationSeparate(m,p),ba[0]=m,ba[1]=p;n=ga.depth_func;n!==ia.depth_func&&(F.depthFunc(n),ia.depth_func=n);r=rc[0];t=rc[1];if(r!==Da[0]||t!==Da[1])F.depthRange(r,t),Da[0]=r,Da[1]=t;w=ga.depth_mask;w!==ia.depth_mask&&(F.depthMask(w),ia.depth_mask=w);A=Ha[0];E=Ha[1];D=Ha[2];C=Ha[3];if(A!==q[0]||E!==q[1]||D!==q[2]||
C!==q[3])F.colorMask(A,E,D,C),q[0]=A,q[1]=E,q[2]=D,q[3]=C;u=ga.cull_enable;u!==ia.cull_enable&&(u?F.enable(2884):F.disable(2884),ia.cull_enable=u);y=ga.cull_face;y!==ia.cull_face&&(F.cullFace(y),ia.cull_face=y);W=ga.frontFace;W!==ia.frontFace&&(F.frontFace(W),ia.frontFace=W);v=ga.lineWidth;v!==ia.lineWidth&&(F.lineWidth(v),ia.lineWidth=v);S=ga.polygonOffset_enable;S!==ia.polygonOffset_enable&&(S?F.enable(32823):F.disable(32823),ia.polygonOffset_enable=S);H=U[0];O=U[1];if(H!==Db[0]||O!==Db[1])F.polygonOffset(H,
O),Db[0]=H,Db[1]=O;pa=ga.sample_alpha;pa!==ia.sample_alpha&&(pa?F.enable(32926):F.disable(32926),ia.sample_alpha=pa);I=ga.sample_enable;I!==ia.sample_enable&&(I?F.enable(32928):F.disable(32928),ia.sample_enable=I);L=xb[0];P=xb[1];if(L!==Ze[0]||P!==Ze[1])F.sampleCoverage(L,P),Ze[0]=L,Ze[1]=P;Q=ga.stencil_mask;Q!==ia.stencil_mask&&(F.stencilMask(Q),ia.stencil_mask=Q);R=Vd[0];X=Vd[1];ca=Vd[2];if(R!==Jd[0]||X!==Jd[1]||ca!==Jd[2])F.stencilFunc(R,X,ca),Jd[0]=R,Jd[1]=X,Jd[2]=ca;ua=fe[0];ka=fe[1];qa=fe[2];
ra=fe[3];if(ua!==te[0]||ka!==te[1]||qa!==te[2]||ra!==te[3])F.stencilOpSeparate(ua,ka,qa,ra),te[0]=ua,te[1]=ka,te[2]=qa,te[3]=ra;na=se[0];xa=se[1];oa=se[2];Sb=se[3];if(na!==xd[0]||xa!==xd[1]||oa!==xd[2]||Sb!==xd[3])F.stencilOpSeparate(na,xa,oa,Sb),xd[0]=na,xd[1]=xa,xd[2]=oa,xd[3]=Sb}F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);ia.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);Ea[0]=770;Ea[1]=771;Ea[2]=773;Ea[3]=1;F.disable(2929);ia.depth_enable=!1;F.enable(3089);ia.scissor_enable=
!0;F.disable(2960);ia.stencil_enable=!1;if(d=ia.profile)f=performance.now(),b.count+=c;F.useProgram(ja.program);g=Lc.angle_instanced_arrays;var cb;fa.setVAO(null);F.uniform1i(z.location,!1);F.uniform1i(Qa.location,sa.bind());cb=Fa.instances;for(h=0;h<c;++h){k=a[h];var Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Kd,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,
Ib,Mb,dc,gc,Yd,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,Gf,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,Ve,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Me,ze,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf;Ac=k.viewport;Nb=Ac.x|0;Cd=Ac.y|0;ic="width"in Ac?Ac.width|0:M.framebufferWidth-Nb;Ob="height"in Ac?Ac.height|0:M.framebufferHeight-Cd;ud=
M.viewportWidth;M.viewportWidth=ic;Pb=M.viewportHeight;M.viewportHeight=Ob;F.viewport(Nb,Cd,ic,Ob);Sd[0]=Nb;Sd[1]=Cd;Sd[2]=ic;Sd[3]=Ob;Ma=k.viewport;nb=Ma.x|0;tb=Ma.y|0;gb="width"in Ma?Ma.width|0:M.framebufferWidth-nb;Na="height"in Ma?Ma.height|0:M.framebufferHeight-tb;F.scissor(nb,tb,gb,Na);ce[0]=nb;ce[1]=tb;ce[2]=gb;ce[3]=Na;lc=ma.call(this,M,k,h);Qb=!1;id=null;db=0;fc=!1;ac=Hc=0;jb=1;kb=0;ta=5126;bb=Ta=wa=ob=0;B(lc)?(Qb=!0,id=aa.createStream(34962,lc),ta=id.dtype):(id=aa.getBuffer(lc))?ta=id.dtype:
"constant"in lc?(jb=2,"number"===typeof lc.constant?(wa=lc.constant,Ta=bb=ob=0):(wa=0<lc.constant.length?lc.constant[0]:0,Ta=1<lc.constant.length?lc.constant[1]:0,bb=2<lc.constant.length?lc.constant[2]:0,ob=3<lc.constant.length?lc.constant[3]:0)):(id=B(lc.buffer)?aa.createStream(34962,lc.buffer):aa.getBuffer(lc.buffer),ta="type"in lc?Zd[lc.type]:id.dtype,fc=!!lc.normalized,ac=lc.size|0,Hc=lc.offset|0,kb=lc.stride|0,db=lc.divisor|0);Ba=$b.location;eb=wc[Ba];if(1===jb){eb.buffer||F.enableVertexAttribArray(Ba);
Ka=ac||1;if(eb.type!==ta||eb.size!==Ka||eb.buffer!==id||eb.normalized!==fc||eb.offset!==Hc||eb.stride!==kb)F.bindBuffer(34962,id.buffer),F.vertexAttribPointer(Ba,Ka,ta,fc,kb,Hc),eb.type=ta,eb.size=Ka,eb.buffer=id,eb.normalized=fc,eb.offset=Hc,eb.stride=kb;eb.divisor!==db&&(g.vertexAttribDivisorANGLE(Ba,db),eb.divisor=db)}else if(eb.buffer&&(F.disableVertexAttribArray(Ba),eb.buffer=null),eb.x!==wa||eb.y!==Ta||eb.z!==bb||eb.w!==ob)F.vertexAttrib4f(Ba,wa,Ta,bb,ob),eb.x=wa,eb.y=Ta,eb.z=bb,eb.w=ob;zb=
gd.call(this,M,k,h);yb=!1;Ra=null;Kc=0;Eb=!1;Rb=Gb=0;ya=1;jd=0;La=5126;za=hb=fb=Kb=0;B(zb)?(yb=!0,Ra=aa.createStream(34962,zb),La=Ra.dtype):(Ra=aa.getBuffer(zb))?La=Ra.dtype:"constant"in zb?(ya=2,"number"===typeof zb.constant?(fb=zb.constant,hb=za=Kb=0):(fb=0<zb.constant.length?zb.constant[0]:0,hb=1<zb.constant.length?zb.constant[1]:0,za=2<zb.constant.length?zb.constant[2]:0,Kb=3<zb.constant.length?zb.constant[3]:0)):(Ra=B(zb.buffer)?aa.createStream(34962,zb.buffer):aa.getBuffer(zb.buffer),La="type"in
zb?Zd[zb.type]:Ra.dtype,Eb=!!zb.normalized,Rb=zb.size|0,Gb=zb.offset|0,jd=zb.stride|0,Kc=zb.divisor|0);cc=jc.location;Ga=wc[cc];if(1===ya){Ga.buffer||F.enableVertexAttribArray(cc);pb=Rb||1;if(Ga.type!==La||Ga.size!==pb||Ga.buffer!==Ra||Ga.normalized!==Eb||Ga.offset!==Gb||Ga.stride!==jd)F.bindBuffer(34962,Ra.buffer),F.vertexAttribPointer(cc,pb,La,Eb,jd,Gb),Ga.type=La,Ga.size=pb,Ga.buffer=Ra,Ga.normalized=Eb,Ga.offset=Gb,Ga.stride=jd;Ga.divisor!==Kc&&(g.vertexAttribDivisorANGLE(cc,Kc),Ga.divisor=Kc)}else if(Ga.buffer&&
(F.disableVertexAttribArray(cc),Ga.buffer=null),Ga.x!==fb||Ga.y!==hb||Ga.z!==za||Ga.w!==Kb)F.vertexAttrib4f(cc,fb,hb,za,Kb),Ga.x=fb,Ga.y=hb,Ga.z=za,Ga.w=Kb;qb=qc.call(this,M,k,h);Xa=!1;Ya=null;kc=0;vc=!1;Va=tc=0;Hb=1;Cc=0;Ia=5126;lb=Ca=Oa=xc=0;B(qb)?(Xa=!0,Ya=aa.createStream(34962,qb),Ia=Ya.dtype):(Ya=aa.getBuffer(qb))?Ia=Ya.dtype:"constant"in qb?(Hb=2,"number"===typeof qb.constant?(Oa=qb.constant,Ca=lb=xc=0):(Oa=0<qb.constant.length?qb.constant[0]:0,Ca=1<qb.constant.length?qb.constant[1]:0,lb=2<
qb.constant.length?qb.constant[2]:0,xc=3<qb.constant.length?qb.constant[3]:0)):(Ya=B(qb.buffer)?aa.createStream(34962,qb.buffer):aa.getBuffer(qb.buffer),Ia="type"in qb?Zd[qb.type]:Ya.dtype,vc=!!qb.normalized,Va=qb.size|0,tc=qb.offset|0,Cc=qb.stride|0,kc=qb.divisor|0);ub=nc.location;Ab=wc[ub];if(1===Hb){Ab.buffer||F.enableVertexAttribArray(ub);rb=Va||1;if(Ab.type!==Ia||Ab.size!==rb||Ab.buffer!==Ya||Ab.normalized!==vc||Ab.offset!==tc||Ab.stride!==Cc)F.bindBuffer(34962,Ya.buffer),F.vertexAttribPointer(ub,
rb,Ia,vc,Cc,tc),Ab.type=Ia,Ab.size=rb,Ab.buffer=Ya,Ab.normalized=vc,Ab.offset=tc,Ab.stride=Cc;Ab.divisor!==kc&&(g.vertexAttribDivisorANGLE(ub,kc),Ab.divisor=kc)}else if(Ab.buffer&&(F.disableVertexAttribArray(ub),Ab.buffer=null),Ab.x!==Oa||Ab.y!==Ca||Ab.z!==lb||Ab.w!==xc)F.vertexAttrib4f(ub,Oa,Ca,lb,xc),Ab.x=Oa,Ab.y=Ca,Ab.z=lb,Ab.w=xc;uc=la.call(this,M,k,h);vb=!1;kd=null;pc=0;Kd=!1;ed=Nc=0;fd=1;Tb=0;Zb=5126;mb=Wb=Ja=Lb=0;B(uc)?(vb=!0,kd=aa.createStream(34962,uc),Zb=kd.dtype):(kd=aa.getBuffer(uc))?
Zb=kd.dtype:"constant"in uc?(fd=2,"number"===typeof uc.constant?(Ja=uc.constant,Wb=mb=Lb=0):(Ja=0<uc.constant.length?uc.constant[0]:0,Wb=1<uc.constant.length?uc.constant[1]:0,mb=2<uc.constant.length?uc.constant[2]:0,Lb=3<uc.constant.length?uc.constant[3]:0)):(kd=B(uc.buffer)?aa.createStream(34962,uc.buffer):aa.getBuffer(uc.buffer),Zb="type"in uc?Zd[uc.type]:kd.dtype,Kd=!!uc.normalized,ed=uc.size|0,Nc=uc.offset|0,Tb=uc.stride|0,pc=uc.divisor|0);wb=vd.location;Ib=wc[wb];if(1===fd){Ib.buffer||F.enableVertexAttribArray(wb);
Mb=ed||1;if(Ib.type!==Zb||Ib.size!==Mb||Ib.buffer!==kd||Ib.normalized!==Kd||Ib.offset!==Nc||Ib.stride!==Tb)F.bindBuffer(34962,kd.buffer),F.vertexAttribPointer(wb,Mb,Zb,Kd,Tb,Nc),Ib.type=Zb,Ib.size=Mb,Ib.buffer=kd,Ib.normalized=Kd,Ib.offset=Nc,Ib.stride=Tb;Ib.divisor!==pc&&(g.vertexAttribDivisorANGLE(wb,pc),Ib.divisor=pc)}else if(Ib.buffer&&(F.disableVertexAttribArray(wb),Ib.buffer=null),Ib.x!==Ja||Ib.y!==Wb||Ib.z!==mb||Ib.w!==Lb)F.vertexAttrib4f(wb,Ja,Wb,mb,Lb),Ib.x=Ja,Ib.y=Wb,Ib.z=mb,Ib.w=Lb;dc=
Pa.call(this,M,k,h);gc=!1;Yd=null;Gd=0;Bc=!1;Oc=Dc=0;$c=1;Tc=0;Pc=5126;Ic=Qc=Cb=Fb=0;B(dc)?(gc=!0,Yd=aa.createStream(34962,dc),Pc=Yd.dtype):(Yd=aa.getBuffer(dc))?Pc=Yd.dtype:"constant"in dc?($c=2,"number"===typeof dc.constant?(Cb=dc.constant,Qc=Ic=Fb=0):(Cb=0<dc.constant.length?dc.constant[0]:0,Qc=1<dc.constant.length?dc.constant[1]:0,Ic=2<dc.constant.length?dc.constant[2]:0,Fb=3<dc.constant.length?dc.constant[3]:0)):(Yd=B(dc.buffer)?aa.createStream(34962,dc.buffer):aa.getBuffer(dc.buffer),Pc="type"in
dc?Zd[dc.type]:Yd.dtype,Bc=!!dc.normalized,Oc=dc.size|0,Dc=dc.offset|0,Tc=dc.stride|0,Gd=dc.divisor|0);Uc=ib.location;ec=wc[Uc];if(1===$c){ec.buffer||F.enableVertexAttribArray(Uc);Xc=Oc||1;if(ec.type!==Pc||ec.size!==Xc||ec.buffer!==Yd||ec.normalized!==Bc||ec.offset!==Dc||ec.stride!==Tc)F.bindBuffer(34962,Yd.buffer),F.vertexAttribPointer(Uc,Xc,Pc,Bc,Tc,Dc),ec.type=Pc,ec.size=Xc,ec.buffer=Yd,ec.normalized=Bc,ec.offset=Dc,ec.stride=Tc;ec.divisor!==Gd&&(g.vertexAttribDivisorANGLE(Uc,Gd),ec.divisor=Gd)}else if(ec.buffer&&
(F.disableVertexAttribArray(Uc),ec.buffer=null),ec.x!==Cb||ec.y!==Qc||ec.z!==Ic||ec.w!==Fb)F.vertexAttrib4f(Uc,Cb,Qc,Ic,Fb),ec.x=Cb,ec.y=Qc,ec.z=Ic,ec.w=Fb;bd=Z.call(this,M,k,h);qd=!1;ld=null;Yc=0;Gf=!1;je=Wd=0;Je=1;me=0;Hd=5126;rd=Ec=dd=Ed=0;B(bd)?(qd=!0,ld=aa.createStream(34962,bd),Hd=ld.dtype):(ld=aa.getBuffer(bd))?Hd=ld.dtype:"constant"in bd?(Je=2,"number"===typeof bd.constant?(dd=bd.constant,Ec=rd=Ed=0):(dd=0<bd.constant.length?bd.constant[0]:0,Ec=1<bd.constant.length?bd.constant[1]:0,rd=2<bd.constant.length?
bd.constant[2]:0,Ed=3<bd.constant.length?bd.constant[3]:0)):(ld=B(bd.buffer)?aa.createStream(34962,bd.buffer):aa.getBuffer(bd.buffer),Hd="type"in bd?Zd[bd.type]:ld.dtype,Gf=!!bd.normalized,je=bd.size|0,Wd=bd.offset|0,me=bd.stride|0,Yc=bd.divisor|0);hd=Za.location;ad=wc[hd];if(1===Je){ad.buffer||F.enableVertexAttribArray(hd);md=je||1;if(ad.type!==Hd||ad.size!==md||ad.buffer!==ld||ad.normalized!==Gf||ad.offset!==Wd||ad.stride!==me)F.bindBuffer(34962,ld.buffer),F.vertexAttribPointer(hd,md,Hd,Gf,me,Wd),
ad.type=Hd,ad.size=md,ad.buffer=ld,ad.normalized=Gf,ad.offset=Wd,ad.stride=me;ad.divisor!==Yc&&(g.vertexAttribDivisorANGLE(hd,Yc),ad.divisor=Yc)}else if(ad.buffer&&(F.disableVertexAttribArray(hd),ad.buffer=null),ad.x!==dd||ad.y!==Ec||ad.z!==rd||ad.w!==Ed)F.vertexAttrib4f(hd,dd,Ec,rd,Ed),ad.x=dd,ad.y=Ec,ad.z=rd,ad.w=Ed;Dd=K.call(this,M,k,h);zd=!1;we=null;ue=0;Ve=!1;ee=ne=0;be=1;pe=0;$d=5126;qe=Wc=yc=ge=0;B(Dd)?(zd=!0,we=aa.createStream(34962,Dd),$d=we.dtype):(we=aa.getBuffer(Dd))?$d=we.dtype:"constant"in
Dd?(be=2,"number"===typeof Dd.constant?(yc=Dd.constant,Wc=qe=ge=0):(yc=0<Dd.constant.length?Dd.constant[0]:0,Wc=1<Dd.constant.length?Dd.constant[1]:0,qe=2<Dd.constant.length?Dd.constant[2]:0,ge=3<Dd.constant.length?Dd.constant[3]:0)):(we=B(Dd.buffer)?aa.createStream(34962,Dd.buffer):aa.getBuffer(Dd.buffer),$d="type"in Dd?Zd[Dd.type]:we.dtype,Ve=!!Dd.normalized,ee=Dd.size|0,ne=Dd.offset|0,pe=Dd.stride|0,ue=Dd.divisor|0);ke=T.location;Fd=wc[ke];if(1===be){Fd.buffer||F.enableVertexAttribArray(ke);Ld=
ee||4;if(Fd.type!==$d||Fd.size!==Ld||Fd.buffer!==we||Fd.normalized!==Ve||Fd.offset!==ne||Fd.stride!==pe)F.bindBuffer(34962,we.buffer),F.vertexAttribPointer(ke,Ld,$d,Ve,pe,ne),Fd.type=$d,Fd.size=Ld,Fd.buffer=we,Fd.normalized=Ve,Fd.offset=ne,Fd.stride=pe;Fd.divisor!==ue&&(g.vertexAttribDivisorANGLE(ke,ue),Fd.divisor=ue)}else if(Fd.buffer&&(F.disableVertexAttribArray(ke),Fd.buffer=null),Fd.x!==yc||Fd.y!==Wc||Fd.z!==qe||Fd.w!==ge)F.vertexAttrib4f(ke,yc,Wc,qe,ge),Fd.x=yc,Fd.y=Wc,Fd.z=qe,Fd.w=ge;Md=N.call(this,
M,k,h);Nd=!1;he=null;Te=0;xe=!1;Ne=oe=0;Oe=1;Ke=0;re=5126;Fe=Ee=De=Be=0;B(Md)?(Nd=!0,he=aa.createStream(34962,Md),re=he.dtype):(he=aa.getBuffer(Md))?re=he.dtype:"constant"in Md?(Oe=2,"number"===typeof Md.constant?(De=Md.constant,Ee=Fe=Be=0):(De=0<Md.constant.length?Md.constant[0]:0,Ee=1<Md.constant.length?Md.constant[1]:0,Fe=2<Md.constant.length?Md.constant[2]:0,Be=3<Md.constant.length?Md.constant[3]:0)):(he=B(Md.buffer)?aa.createStream(34962,Md.buffer):aa.getBuffer(Md.buffer),re="type"in Md?Zd[Md.type]:
he.dtype,xe=!!Md.normalized,Ne=Md.size|0,oe=Md.offset|0,Ke=Md.stride|0,Te=Md.divisor|0);Ce=Ub.location;Id=wc[Ce];if(1===Oe){Id.buffer||F.enableVertexAttribArray(Ce);Rd=Ne||4;if(Id.type!==re||Id.size!==Rd||Id.buffer!==he||Id.normalized!==xe||Id.offset!==oe||Id.stride!==Ke)F.bindBuffer(34962,he.buffer),F.vertexAttribPointer(Ce,Rd,re,xe,Ke,oe),Id.type=re,Id.size=Rd,Id.buffer=he,Id.normalized=xe,Id.offset=oe,Id.stride=Ke;Id.divisor!==Te&&(g.vertexAttribDivisorANGLE(Ce,Te),Id.divisor=Te)}else if(Id.buffer&&
(F.disableVertexAttribArray(Ce),Id.buffer=null),Id.x!==De||Id.y!==Ee||Id.z!==Fe||Id.w!==Be)F.vertexAttrib4f(Ce,De,Ee,Fe,Be),Id.x=De,Id.y=Ee,Id.z=Fe,Id.w=Be;Xd=V.call(this,M,k,h);ae=!1;Ge=null;Bd=0;Od=!1;He=ye=0;ff=1;Ye=0;Pe=5126;Qe=Ue=Xe=Le=0;B(Xd)?(ae=!0,Ge=aa.createStream(34962,Xd),Pe=Ge.dtype):(Ge=aa.getBuffer(Xd))?Pe=Ge.dtype:"constant"in Xd?(ff=2,"number"===typeof Xd.constant?(Xe=Xd.constant,Ue=Qe=Le=0):(Xe=0<Xd.constant.length?Xd.constant[0]:0,Ue=1<Xd.constant.length?Xd.constant[1]:0,Qe=2<Xd.constant.length?
Xd.constant[2]:0,Le=3<Xd.constant.length?Xd.constant[3]:0)):(Ge=B(Xd.buffer)?aa.createStream(34962,Xd.buffer):aa.getBuffer(Xd.buffer),Pe="type"in Xd?Zd[Xd.type]:Ge.dtype,Od=!!Xd.normalized,He=Xd.size|0,ye=Xd.offset|0,Ye=Xd.stride|0,Bd=Xd.divisor|0);Re=ha.location;Pd=wc[Re];if(1===ff){Pd.buffer||F.enableVertexAttribArray(Re);Ud=He||1;if(Pd.type!==Pe||Pd.size!==Ud||Pd.buffer!==Ge||Pd.normalized!==Od||Pd.offset!==ye||Pd.stride!==Ye)F.bindBuffer(34962,Ge.buffer),F.vertexAttribPointer(Re,Ud,Pe,Od,Ye,ye),
Pd.type=Pe,Pd.size=Ud,Pd.buffer=Ge,Pd.normalized=Od,Pd.offset=ye,Pd.stride=Ye;Pd.divisor!==Bd&&(g.vertexAttribDivisorANGLE(Re,Bd),Pd.divisor=Bd)}else if(Pd.buffer&&(F.disableVertexAttribArray(Re),Pd.buffer=null),Pd.x!==Xe||Pd.y!==Ue||Pd.z!==Qe||Pd.w!==Le)F.vertexAttrib4f(Re,Xe,Ue,Qe,Le),Pd.x=Xe,Pd.y=Ue,Pd.z=Qe,Pd.w=Le;Se=M.pixelRatio;h&&gf===Se||(gf=Se,F.uniform1f(bc.location,Se));lf=J.call(this,M,k,h);cf=lf[0];jf=lf[1];h&&hf===cf&&kf===jf||(hf=cf,kf=jf,F.uniform2f(Aa.location,cf,jf));qf=k.scale;
nf=qf[0];Bf=qf[1];h&&rf===nf&&Cf===Bf||(rf=nf,Cf=Bf,F.uniform2f(Ua.location,nf,Bf));Me=k.scaleFract;ze=Me[0];pf=Me[1];h&&of===ze&&Df===pf||(of=ze,Df=pf,F.uniform2f(Y.location,ze,pf));Hf=k.translate;Af=Hf[0];Ff=Hf[1];h&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,F.uniform2f(ea.location,Af,Ff));xf=k.translateFract;uf=xf[0];zf=xf[1];h&&yf===uf&&Jf===zf||(yf=uf,Jf=zf,F.uniform2f(va.location,uf,zf));Kf=k.opacity;h&&Lf===Kf||(Lf=Kf,F.uniform1f(da.location,Kf));Mf=k.elements;sf=null;(sf=(Rf=B(Mf))?sb.createStream(Mf):
sb.getElements(Mf))&&F.bindBuffer(34963,sf.buffer.buffer);If=k.offset;if(tf=k.count)0<cb?sf?g.drawElementsInstancedANGLE(0,tf,sf.type,If<<(sf.type-5121>>1),cb):g.drawArraysInstancedANGLE(0,If,tf,cb):0>cb&&(sf?F.drawElements(0,tf,sf.type,If<<(sf.type-5121>>1)):F.drawArrays(0,If,tf)),M.viewportWidth=ud,M.viewportHeight=Pb,Qb&&aa.destroyStream(id),yb&&aa.destroyStream(Ra),Xa&&aa.destroyStream(Ya),vb&&aa.destroyStream(kd),gc&&aa.destroyStream(Yd),qd&&aa.destroyStream(ld),zd&&aa.destroyStream(we),Nd&&
aa.destroyStream(he),ae&&aa.destroyStream(Ge),Rf&&sb.destroyStream(sf)}sa.unbind();ia.dirty=!0;fa.setVAO(null);d&&(b.cpuTime+=performance.now()-f)},draw:function(a){var f,k,m,t,w,A,D,C,v,S,H,O,I,K,N,J,L,P,Q,R,X,V,Z,ca,ua,ka,qa,la,ma,sa,na,ja,xa,oa,Pa,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,qc,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,Kd,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,
wb,Ib,Mb,dc,gc,gd,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,qd,ld,Yc,Yd,Wd,je,Je,me,Hd,Ed,dd,Ec,rd,hd,ad,md,Dd,zd,we,ue,Ve,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne;f=Fc.next;f!==Fc.cur&&(f?F.bindFramebuffer(36160,f.framebuffer):F.bindFramebuffer(36160,null),Fc.cur=f);if(ia.dirty){var Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf;Oe=ga.dither;Oe!==ia.dither&&(Oe?F.enable(3024):F.disable(3024),ia.dither=Oe);Ke=x[0];re=x[1];if(Ke!==
ba[0]||re!==ba[1])F.blendEquationSeparate(Ke,re),ba[0]=Ke,ba[1]=re;Be=ga.depth_func;Be!==ia.depth_func&&(F.depthFunc(Be),ia.depth_func=Be);De=rc[0];Ee=rc[1];if(De!==Da[0]||Ee!==Da[1])F.depthRange(De,Ee),Da[0]=De,Da[1]=Ee;Fe=ga.depth_mask;Fe!==ia.depth_mask&&(F.depthMask(Fe),ia.depth_mask=Fe);Ce=Ha[0];Id=Ha[1];Rd=Ha[2];Xd=Ha[3];if(Ce!==q[0]||Id!==q[1]||Rd!==q[2]||Xd!==q[3])F.colorMask(Ce,Id,Rd,Xd),q[0]=Ce,q[1]=Id,q[2]=Rd,q[3]=Xd;ae=ga.cull_enable;ae!==ia.cull_enable&&(ae?F.enable(2884):F.disable(2884),
ia.cull_enable=ae);Ge=ga.cull_face;Ge!==ia.cull_face&&(F.cullFace(Ge),ia.cull_face=Ge);Bd=ga.frontFace;Bd!==ia.frontFace&&(F.frontFace(Bd),ia.frontFace=Bd);Od=ga.lineWidth;Od!==ia.lineWidth&&(F.lineWidth(Od),ia.lineWidth=Od);ye=ga.polygonOffset_enable;ye!==ia.polygonOffset_enable&&(ye?F.enable(32823):F.disable(32823),ia.polygonOffset_enable=ye);He=U[0];ff=U[1];if(He!==Db[0]||ff!==Db[1])F.polygonOffset(He,ff),Db[0]=He,Db[1]=ff;Ye=ga.sample_alpha;Ye!==ia.sample_alpha&&(Ye?F.enable(32926):F.disable(32926),
ia.sample_alpha=Ye);Pe=ga.sample_enable;Pe!==ia.sample_enable&&(Pe?F.enable(32928):F.disable(32928),ia.sample_enable=Pe);Le=xb[0];Xe=xb[1];if(Le!==Ze[0]||Xe!==Ze[1])F.sampleCoverage(Le,Xe),Ze[0]=Le,Ze[1]=Xe;Ue=ga.stencil_mask;Ue!==ia.stencil_mask&&(F.stencilMask(Ue),ia.stencil_mask=Ue);Qe=Vd[0];Re=Vd[1];Pd=Vd[2];if(Qe!==Jd[0]||Re!==Jd[1]||Pd!==Jd[2])F.stencilFunc(Qe,Re,Pd),Jd[0]=Qe,Jd[1]=Re,Jd[2]=Pd;Ud=fe[0];Se=fe[1];gf=fe[2];lf=fe[3];if(Ud!==te[0]||Se!==te[1]||gf!==te[2]||lf!==te[3])F.stencilOpSeparate(Ud,
Se,gf,lf),te[0]=Ud,te[1]=Se,te[2]=gf,te[3]=lf;cf=se[0];hf=se[1];jf=se[2];kf=se[3];if(cf!==xd[0]||hf!==xd[1]||jf!==xd[2]||kf!==xd[3])F.stencilOpSeparate(cf,hf,jf,kf),xd[0]=cf,xd[1]=hf,xd[2]=jf,xd[3]=kf}k=a.viewport;m=k.x|0;t=k.y|0;w="width"in k?k.width|0:M.framebufferWidth-m;A="height"in k?k.height|0:M.framebufferHeight-t;D=M.viewportWidth;M.viewportWidth=w;C=M.viewportHeight;M.viewportHeight=A;F.viewport(m,t,w,A);Sd[0]=m;Sd[1]=t;Sd[2]=w;Sd[3]=A;F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);
ia.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);Ea[0]=770;Ea[1]=771;Ea[2]=773;Ea[3]=1;F.disable(2929);ia.depth_enable=!1;v=a.viewport;S=v.x|0;H=v.y|0;O="width"in v?v.width|0:M.framebufferWidth-S;I="height"in v?v.height|0:M.framebufferHeight-H;F.scissor(S,H,O,I);ce[0]=S;ce[1]=H;ce[2]=O;ce[3]=I;F.enable(3089);ia.scissor_enable=!0;F.disable(2960);ia.stencil_enable=!1;if(K=ia.profile)N=performance.now(),b.count++;F.useProgram(g.program);J=Lc.angle_instanced_arrays;fa.setVAO(null);L=h.call(this,
M,a,0);P=!1;Q=null;R=0;X=!1;Z=V=0;ca=1;ua=0;ka=5126;sa=ma=la=qa=0;B(L)?(P=!0,Q=aa.createStream(34962,L),ka=Q.dtype):(Q=aa.getBuffer(L))?ka=Q.dtype:"constant"in L?(ca=2,"number"===typeof L.constant?(la=L.constant,ma=sa=qa=0):(la=0<L.constant.length?L.constant[0]:0,ma=1<L.constant.length?L.constant[1]:0,sa=2<L.constant.length?L.constant[2]:0,qa=3<L.constant.length?L.constant[3]:0)):(Q=B(L.buffer)?aa.createStream(34962,L.buffer):aa.getBuffer(L.buffer),ka="type"in L?Zd[L.type]:Q.dtype,X=!!L.normalized,
Z=L.size|0,V=L.offset|0,ua=L.stride|0,R=L.divisor|0);na=$b.location;ja=wc[na];if(1===ca){ja.buffer||F.enableVertexAttribArray(na);xa=Z||1;if(ja.type!==ka||ja.size!==xa||ja.buffer!==Q||ja.normalized!==X||ja.offset!==V||ja.stride!==ua)F.bindBuffer(34962,Q.buffer),F.vertexAttribPointer(na,xa,ka,X,ua,V),ja.type=ka,ja.size=xa,ja.buffer=Q,ja.normalized=X,ja.offset=V,ja.stride=ua;ja.divisor!==R&&(J.vertexAttribDivisorANGLE(na,R),ja.divisor=R)}else if(ja.buffer&&(F.disableVertexAttribArray(na),ja.buffer=
null),ja.x!==la||ja.y!==ma||ja.z!==sa||ja.w!==qa)F.vertexAttrib4f(na,la,ma,sa,qa),ja.x=la,ja.y=ma,ja.z=sa,ja.w=qa;oa=d.call(this,M,a,0);Pa=!1;Wa=null;ra=0;pd=!1;ab=Yb=0;Sb=1;cb=0;Ac=5126;Ob=ic=qc=Nb=0;B(oa)?(Pa=!0,Wa=aa.createStream(34962,oa),Ac=Wa.dtype):(Wa=aa.getBuffer(oa))?Ac=Wa.dtype:"constant"in oa?(Sb=2,"number"===typeof oa.constant?(qc=oa.constant,ic=Ob=Nb=0):(qc=0<oa.constant.length?oa.constant[0]:0,ic=1<oa.constant.length?oa.constant[1]:0,Ob=2<oa.constant.length?oa.constant[2]:0,Nb=3<oa.constant.length?
oa.constant[3]:0)):(Wa=B(oa.buffer)?aa.createStream(34962,oa.buffer):aa.getBuffer(oa.buffer),Ac="type"in oa?Zd[oa.type]:Wa.dtype,pd=!!oa.normalized,ab=oa.size|0,Yb=oa.offset|0,cb=oa.stride|0,ra=oa.divisor|0);ud=jc.location;Pb=wc[ud];if(1===Sb){Pb.buffer||F.enableVertexAttribArray(ud);Ma=ab||1;if(Pb.type!==Ac||Pb.size!==Ma||Pb.buffer!==Wa||Pb.normalized!==pd||Pb.offset!==Yb||Pb.stride!==cb)F.bindBuffer(34962,Wa.buffer),F.vertexAttribPointer(ud,Ma,Ac,pd,cb,Yb),Pb.type=Ac,Pb.size=Ma,Pb.buffer=Wa,Pb.normalized=
pd,Pb.offset=Yb,Pb.stride=cb;Pb.divisor!==ra&&(J.vertexAttribDivisorANGLE(ud,ra),Pb.divisor=ra)}else if(Pb.buffer&&(F.disableVertexAttribArray(ud),Pb.buffer=null),Pb.x!==qc||Pb.y!==ic||Pb.z!==Ob||Pb.w!==Nb)F.vertexAttrib4f(ud,qc,ic,Ob,Nb),Pb.x=qc,Pb.y=ic,Pb.z=Ob,Pb.w=Nb;nb=c.call(this,M,a,0);tb=!1;gb=null;Na=0;lc=!1;id=Qb=0;db=1;fc=0;Hc=5126;ta=kb=jb=ac=0;B(nb)?(tb=!0,gb=aa.createStream(34962,nb),Hc=gb.dtype):(gb=aa.getBuffer(nb))?Hc=gb.dtype:"constant"in nb?(db=2,"number"===typeof nb.constant?(jb=
nb.constant,kb=ta=ac=0):(jb=0<nb.constant.length?nb.constant[0]:0,kb=1<nb.constant.length?nb.constant[1]:0,ta=2<nb.constant.length?nb.constant[2]:0,ac=3<nb.constant.length?nb.constant[3]:0)):(gb=B(nb.buffer)?aa.createStream(34962,nb.buffer):aa.getBuffer(nb.buffer),Hc="type"in nb?Zd[nb.type]:gb.dtype,lc=!!nb.normalized,id=nb.size|0,Qb=nb.offset|0,fc=nb.stride|0,Na=nb.divisor|0);ob=nc.location;wa=wc[ob];if(1===db){wa.buffer||F.enableVertexAttribArray(ob);Ta=id||1;if(wa.type!==Hc||wa.size!==Ta||wa.buffer!==
gb||wa.normalized!==lc||wa.offset!==Qb||wa.stride!==fc)F.bindBuffer(34962,gb.buffer),F.vertexAttribPointer(ob,Ta,Hc,lc,fc,Qb),wa.type=Hc,wa.size=Ta,wa.buffer=gb,wa.normalized=lc,wa.offset=Qb,wa.stride=fc;wa.divisor!==Na&&(J.vertexAttribDivisorANGLE(ob,Na),wa.divisor=Na)}else if(wa.buffer&&(F.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==kb||wa.z!==ta||wa.w!==ac)F.vertexAttrib4f(ob,jb,kb,ta,ac),wa.x=jb,wa.y=kb,wa.z=ta,wa.w=ac;bb=p.call(this,M,a,0);Ba=!1;eb=null;Ka=0;zb=!1;Ra=yb=0;
Kc=1;Eb=0;Gb=5126;La=jd=ya=Rb=0;B(bb)?(Ba=!0,eb=aa.createStream(34962,bb),Gb=eb.dtype):(eb=aa.getBuffer(bb))?Gb=eb.dtype:"constant"in bb?(Kc=2,"number"===typeof bb.constant?(ya=bb.constant,jd=La=Rb=0):(ya=0<bb.constant.length?bb.constant[0]:0,jd=1<bb.constant.length?bb.constant[1]:0,La=2<bb.constant.length?bb.constant[2]:0,Rb=3<bb.constant.length?bb.constant[3]:0)):(eb=B(bb.buffer)?aa.createStream(34962,bb.buffer):aa.getBuffer(bb.buffer),Gb="type"in bb?Zd[bb.type]:eb.dtype,zb=!!bb.normalized,Ra=bb.size|
0,yb=bb.offset|0,Eb=bb.stride|0,Ka=bb.divisor|0);Kb=vd.location;fb=wc[Kb];if(1===Kc){fb.buffer||F.enableVertexAttribArray(Kb);hb=Ra||1;if(fb.type!==Gb||fb.size!==hb||fb.buffer!==eb||fb.normalized!==zb||fb.offset!==yb||fb.stride!==Eb)F.bindBuffer(34962,eb.buffer),F.vertexAttribPointer(Kb,hb,Gb,zb,Eb,yb),fb.type=Gb,fb.size=hb,fb.buffer=eb,fb.normalized=zb,fb.offset=yb,fb.stride=Eb;fb.divisor!==Ka&&(J.vertexAttribDivisorANGLE(Kb,Ka),fb.divisor=Ka)}else if(fb.buffer&&(F.disableVertexAttribArray(Kb),fb.buffer=
null),fb.x!==ya||fb.y!==jd||fb.z!==La||fb.w!==Rb)F.vertexAttrib4f(Kb,ya,jd,La,Rb),fb.x=ya,fb.y=jd,fb.z=La,fb.w=Rb;za=e.call(this,M,a,0);cc=!1;Ga=null;pb=0;qb=!1;Ya=Xa=0;kc=1;vc=0;tc=5126;Ia=Cc=Hb=Va=0;B(za)?(cc=!0,Ga=aa.createStream(34962,za),tc=Ga.dtype):(Ga=aa.getBuffer(za))?tc=Ga.dtype:"constant"in za?(kc=2,"number"===typeof za.constant?(Hb=za.constant,Cc=Ia=Va=0):(Hb=0<za.constant.length?za.constant[0]:0,Cc=1<za.constant.length?za.constant[1]:0,Ia=2<za.constant.length?za.constant[2]:0,Va=3<za.constant.length?
za.constant[3]:0)):(Ga=B(za.buffer)?aa.createStream(34962,za.buffer):aa.getBuffer(za.buffer),tc="type"in za?Zd[za.type]:Ga.dtype,qb=!!za.normalized,Ya=za.size|0,Xa=za.offset|0,vc=za.stride|0,pb=za.divisor|0);xc=ib.location;Oa=wc[xc];if(1===kc){Oa.buffer||F.enableVertexAttribArray(xc);Ca=Ya||1;if(Oa.type!==tc||Oa.size!==Ca||Oa.buffer!==Ga||Oa.normalized!==qb||Oa.offset!==Xa||Oa.stride!==vc)F.bindBuffer(34962,Ga.buffer),F.vertexAttribPointer(xc,Ca,tc,qb,vc,Xa),Oa.type=tc,Oa.size=Ca,Oa.buffer=Ga,Oa.normalized=
qb,Oa.offset=Xa,Oa.stride=vc;Oa.divisor!==pb&&(J.vertexAttribDivisorANGLE(xc,pb),Oa.divisor=pb)}else if(Oa.buffer&&(F.disableVertexAttribArray(xc),Oa.buffer=null),Oa.x!==Hb||Oa.y!==Cc||Oa.z!==Ia||Oa.w!==Va)F.vertexAttrib4f(xc,Hb,Cc,Ia,Va),Oa.x=Hb,Oa.y=Cc,Oa.z=Ia,Oa.w=Va;lb=l.call(this,M,a,0);ub=!1;Ab=null;rb=0;uc=!1;kd=vb=0;pc=1;Kd=0;Nc=5126;Zb=Tb=fd=ed=0;B(lb)?(ub=!0,Ab=aa.createStream(34962,lb),Nc=Ab.dtype):(Ab=aa.getBuffer(lb))?Nc=Ab.dtype:"constant"in lb?(pc=2,"number"===typeof lb.constant?(fd=
lb.constant,Tb=Zb=ed=0):(fd=0<lb.constant.length?lb.constant[0]:0,Tb=1<lb.constant.length?lb.constant[1]:0,Zb=2<lb.constant.length?lb.constant[2]:0,ed=3<lb.constant.length?lb.constant[3]:0)):(Ab=B(lb.buffer)?aa.createStream(34962,lb.buffer):aa.getBuffer(lb.buffer),Nc="type"in lb?Zd[lb.type]:Ab.dtype,uc=!!lb.normalized,kd=lb.size|0,vb=lb.offset|0,Kd=lb.stride|0,rb=lb.divisor|0);Lb=Za.location;Ja=wc[Lb];if(1===pc){Ja.buffer||F.enableVertexAttribArray(Lb);Wb=kd||1;if(Ja.type!==Nc||Ja.size!==Wb||Ja.buffer!==
Ab||Ja.normalized!==uc||Ja.offset!==vb||Ja.stride!==Kd)F.bindBuffer(34962,Ab.buffer),F.vertexAttribPointer(Lb,Wb,Nc,uc,Kd,vb),Ja.type=Nc,Ja.size=Wb,Ja.buffer=Ab,Ja.normalized=uc,Ja.offset=vb,Ja.stride=Kd;Ja.divisor!==rb&&(J.vertexAttribDivisorANGLE(Lb,rb),Ja.divisor=rb)}else if(Ja.buffer&&(F.disableVertexAttribArray(Lb),Ja.buffer=null),Ja.x!==fd||Ja.y!==Tb||Ja.z!==Zb||Ja.w!==ed)F.vertexAttrib4f(Lb,fd,Tb,Zb,ed),Ja.x=fd,Ja.y=Tb,Ja.z=Zb,Ja.w=ed;mb=u.call(this,M,a,0);wb=!1;Ib=null;Mb=0;dc=!1;gd=gc=0;
Gd=1;Bc=0;Dc=5126;Pc=Tc=$c=Oc=0;B(mb)?(wb=!0,Ib=aa.createStream(34962,mb),Dc=Ib.dtype):(Ib=aa.getBuffer(mb))?Dc=Ib.dtype:"constant"in mb?(Gd=2,"number"===typeof mb.constant?($c=mb.constant,Tc=Pc=Oc=0):($c=0<mb.constant.length?mb.constant[0]:0,Tc=1<mb.constant.length?mb.constant[1]:0,Pc=2<mb.constant.length?mb.constant[2]:0,Oc=3<mb.constant.length?mb.constant[3]:0)):(Ib=B(mb.buffer)?aa.createStream(34962,mb.buffer):aa.getBuffer(mb.buffer),Dc="type"in mb?Zd[mb.type]:Ib.dtype,dc=!!mb.normalized,gd=mb.size|
0,gc=mb.offset|0,Bc=mb.stride|0,Mb=mb.divisor|0);Fb=T.location;Cb=wc[Fb];if(1===Gd){Cb.buffer||F.enableVertexAttribArray(Fb);Qc=gd||4;if(Cb.type!==Dc||Cb.size!==Qc||Cb.buffer!==Ib||Cb.normalized!==dc||Cb.offset!==gc||Cb.stride!==Bc)F.bindBuffer(34962,Ib.buffer),F.vertexAttribPointer(Fb,Qc,Dc,dc,Bc,gc),Cb.type=Dc,Cb.size=Qc,Cb.buffer=Ib,Cb.normalized=dc,Cb.offset=gc,Cb.stride=Bc;Cb.divisor!==Mb&&(J.vertexAttribDivisorANGLE(Fb,Mb),Cb.divisor=Mb)}else if(Cb.buffer&&(F.disableVertexAttribArray(Fb),Cb.buffer=
null),Cb.x!==$c||Cb.y!==Tc||Cb.z!==Pc||Cb.w!==Oc)F.vertexAttrib4f(Fb,$c,Tc,Pc,Oc),Cb.x=$c,Cb.y=Tc,Cb.z=Pc,Cb.w=Oc;Ic=y.call(this,M,a,0);Uc=!1;ec=null;Xc=0;bd=!1;ld=qd=0;Yc=1;Yd=0;Wd=5126;Hd=me=Je=je=0;B(Ic)?(Uc=!0,ec=aa.createStream(34962,Ic),Wd=ec.dtype):(ec=aa.getBuffer(Ic))?Wd=ec.dtype:"constant"in Ic?(Yc=2,"number"===typeof Ic.constant?(Je=Ic.constant,me=Hd=je=0):(Je=0<Ic.constant.length?Ic.constant[0]:0,me=1<Ic.constant.length?Ic.constant[1]:0,Hd=2<Ic.constant.length?Ic.constant[2]:0,je=3<Ic.constant.length?
Ic.constant[3]:0)):(ec=B(Ic.buffer)?aa.createStream(34962,Ic.buffer):aa.getBuffer(Ic.buffer),Wd="type"in Ic?Zd[Ic.type]:ec.dtype,bd=!!Ic.normalized,ld=Ic.size|0,qd=Ic.offset|0,Yd=Ic.stride|0,Xc=Ic.divisor|0);Ed=Ub.location;dd=wc[Ed];if(1===Yc){dd.buffer||F.enableVertexAttribArray(Ed);Ec=ld||4;if(dd.type!==Wd||dd.size!==Ec||dd.buffer!==ec||dd.normalized!==bd||dd.offset!==qd||dd.stride!==Yd)F.bindBuffer(34962,ec.buffer),F.vertexAttribPointer(Ed,Ec,Wd,bd,Yd,qd),dd.type=Wd,dd.size=Ec,dd.buffer=ec,dd.normalized=
bd,dd.offset=qd,dd.stride=Yd;dd.divisor!==Xc&&(J.vertexAttribDivisorANGLE(Ed,Xc),dd.divisor=Xc)}else if(dd.buffer&&(F.disableVertexAttribArray(Ed),dd.buffer=null),dd.x!==Je||dd.y!==me||dd.z!==Hd||dd.w!==je)F.vertexAttrib4f(Ed,Je,me,Hd,je),dd.x=Je,dd.y=me,dd.z=Hd,dd.w=je;rd=n.call(this,M,a,0);hd=!1;ad=null;md=0;Dd=!1;we=zd=0;ue=1;Ve=0;ne=5126;$d=pe=be=ee=0;B(rd)?(hd=!0,ad=aa.createStream(34962,rd),ne=ad.dtype):(ad=aa.getBuffer(rd))?ne=ad.dtype:"constant"in rd?(ue=2,"number"===typeof rd.constant?(be=
rd.constant,pe=$d=ee=0):(be=0<rd.constant.length?rd.constant[0]:0,pe=1<rd.constant.length?rd.constant[1]:0,$d=2<rd.constant.length?rd.constant[2]:0,ee=3<rd.constant.length?rd.constant[3]:0)):(ad=B(rd.buffer)?aa.createStream(34962,rd.buffer):aa.getBuffer(rd.buffer),ne="type"in rd?Zd[rd.type]:ad.dtype,Dd=!!rd.normalized,we=rd.size|0,zd=rd.offset|0,Ve=rd.stride|0,md=rd.divisor|0);ge=ha.location;yc=wc[ge];if(1===ue){yc.buffer||F.enableVertexAttribArray(ge);Wc=we||1;if(yc.type!==ne||yc.size!==Wc||yc.buffer!==
ad||yc.normalized!==Dd||yc.offset!==zd||yc.stride!==Ve)F.bindBuffer(34962,ad.buffer),F.vertexAttribPointer(ge,Wc,ne,Dd,Ve,zd),yc.type=ne,yc.size=Wc,yc.buffer=ad,yc.normalized=Dd,yc.offset=zd,yc.stride=Ve;yc.divisor!==md&&(J.vertexAttribDivisorANGLE(ge,md),yc.divisor=md)}else if(yc.buffer&&(F.disableVertexAttribArray(ge),yc.buffer=null),yc.x!==be||yc.y!==pe||yc.z!==$d||yc.w!==ee)F.vertexAttrib4f(ge,be,pe,$d,ee),yc.x=be,yc.y=pe,yc.z=$d,yc.w=ee;F.uniform1i(z.location,!1);F.uniform1f(bc.location,M.pixelRatio);
qe=E.call(this,M,a,0);F.uniform2f(Aa.location,qe[0],qe[1]);ke=a.scale;F.uniform2f(Ua.location,ke[0],ke[1]);Fd=a.scaleFract;F.uniform2f(Y.location,Fd[0],Fd[1]);Ld=a.translate;F.uniform2f(ea.location,Ld[0],Ld[1]);Md=a.translateFract;F.uniform2f(va.location,Md[0],Md[1]);F.uniform1f(da.location,a.opacity);F.uniform1i(Qa.location,r.bind());Nd=a.elements;he=null;(he=(Te=B(Nd))?sb.createStream(Nd):sb.getElements(Nd))&&F.bindBuffer(34963,he.buffer.buffer);xe=a.offset;if(oe=a.count)Ne=Fa.instances,0<Ne?he?
J.drawElementsInstancedANGLE(0,oe,he.type,xe<<(he.type-5121>>1),Ne):J.drawArraysInstancedANGLE(0,xe,oe,Ne):0>Ne&&(he?F.drawElements(0,oe,he.type,xe<<(he.type-5121>>1)):F.drawArrays(0,xe,oe)),ia.dirty=!0,fa.setVAO(null),M.viewportWidth=D,M.viewportHeight=C,K&&(b.cpuTime+=performance.now()-N),P&&aa.destroyStream(Q),Pa&&aa.destroyStream(Wa),tb&&aa.destroyStream(gb),Ba&&aa.destroyStream(eb),cc&&aa.destroyStream(Ga),ub&&aa.destroyStream(Ab),wb&&aa.destroyStream(Ib),Uc&&aa.destroyStream(ec),hd&&aa.destroyStream(ad),
r.unbind(),Te&&sb.destroyStream(he)},scope:function(a,c,e){var d,g,h,l,p,n,q,r,x,z,E,u,y,W,G,F,K,pa,J,N,U,ba,V,T,Y,Z,fa,da,ea,ha,ja,la,ma,Ea,ra,Ha,sa,Da,va,Aa,Pa,Qa,xb,Ua,Za,wc,Db,Ma,nb,tb,gb,Na,ib,Qb,vd,db,rc,Ub,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,$b,Eb,Gb,Rb,ya,nc,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,qc,pc,bc,Nc,jc,Lc,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,Vd,Fc,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd,xd,ld,Yc,Jd,gd,Sd,ce,fe,Hd,Ed,dd,Ec,rd,hd,ad,md,
Dd,zd,se,te,Ze,ne,ee,be,pe,$d,ge,yc,Wc,qe,ke,Fd,Ld,Md,Nd,he,Te,xe,oe,Ne,Oe,Ke,re,Be,De,Ee,Fe,Ce,Id,Rd,Xd,ae,Ge,Bd,Od,ye,He,ff,Ye,Pe,Le,Xe,Ue,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Me,ze,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf,dg,Sf,Tf,qg,df,af,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,bf,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;d=a.viewport;g=d.x|0;h=d.y|0;l="width"in d?d.width|0:M.framebufferWidth-
g;p="height"in d?d.height|0:M.framebufferHeight-h;n=M.viewportWidth;M.viewportWidth=l;q=M.viewportHeight;M.viewportHeight=p;r=Kd[0];Kd[0]=g;x=Kd[1];Kd[1]=h;z=Kd[2];Kd[2]=l;E=Kd[3];Kd[3]=p;u=qa[0];qa[0]=0;y=qa[1];qa[1]=0;W=qa[2];qa[2]=0;G=qa[3];qa[3]=1;F=ga.blend_enable;ga.blend_enable=!0;K=O[0];O[0]=770;pa=O[1];O[1]=771;J=O[2];O[2]=773;N=O[3];O[3]=1;U=ga.depth_enable;ga.depth_enable=!1;ba=a.viewport;V=ba.x|0;T=ba.y|0;Y="width"in ba?ba.width|0:M.framebufferWidth-V;Z="height"in ba?ba.height|0:M.framebufferHeight-
T;fa=Yd[0];Yd[0]=V;da=Yd[1];Yd[1]=T;ea=Yd[2];Yd[2]=Y;ha=Yd[3];Yd[3]=Z;ja=ga.scissor_enable;ga.scissor_enable=!0;la=ga.stencil_enable;ga.stencil_enable=!1;if(ma=ia.profile)Ea=performance.now(),b.count++;ra=a.elements;Ha=null;Ha=(sa=B(ra))?sb.createStream(ra):sb.getElements(ra);Da=Fa.elements;Fa.elements=Ha;va=a.offset;Aa=Fa.offset;Fa.offset=va;Pa=a.count;Qa=Fa.count;Fa.count=Pa;xb=Fa.primitive;Fa.primitive=0;Ua=X[45];X[45]=!1;Za=a.markerTexture;wc=X[48];X[48]=Za;Db=a.opacity;Ma=X[10];X[10]=Db;nb=C.call(this,
M,a,e);tb=X[46];X[46]=nb;gb=X[47];X[47]=S;Na=M.pixelRatio;ib=X[34];X[34]=Na;Qb=a.scale;vd=X[6];X[6]=Qb;db=a.scaleFract;rc=X[7];X[7]=db;Ub=a.translate;ac=X[8];X[8]=Ub;jb=a.translateFract;kb=X[9];X[9]=jb;ta=D.call(this,M,a,e);ob=!1;wa=null;Ta=0;bb=!1;eb=Ba=0;Ka=1;zb=0;yb=5126;Gb=Eb=$b=Ra=0;B(ta)?(ob=!0,wa=aa.createStream(34962,ta),yb=wa.dtype):(wa=aa.getBuffer(ta))?yb=wa.dtype:"constant"in ta?(Ka=2,"number"===typeof ta.constant?($b=ta.constant,Eb=Gb=Ra=0):($b=0<ta.constant.length?ta.constant[0]:0,Eb=
1<ta.constant.length?ta.constant[1]:0,Gb=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?ta.constant[3]:0)):(wa=B(ta.buffer)?aa.createStream(34962,ta.buffer):aa.getBuffer(ta.buffer),yb="type"in ta?Zd[ta.type]:wa.dtype,bb=!!ta.normalized,eb=ta.size|0,Ba=ta.offset|0,zb=ta.stride|0,Ta=ta.divisor|0);Rb=v.buffer;v.buffer=wa;ya=v.divisor;v.divisor=Ta;nc=v.normalized;v.normalized=bb;La=v.offset;v.offset=Ba;Kb=v.size;v.size=eb;fb=v.state;v.state=Ka;hb=v.stride;v.stride=zb;za=v.type;v.type=yb;
cc=v.w;v.w=Ra;Ga=v.x;v.x=$b;pb=v.y;v.y=Eb;qb=v.z;v.z=Gb;Xa=oa.call(this,M,a,e);Ya=!1;kc=null;vc=0;tc=!1;Hb=Va=0;Cc=1;Ia=0;xc=5126;ub=lb=Ca=Oa=0;B(Xa)?(Ya=!0,kc=aa.createStream(34962,Xa),xc=kc.dtype):(kc=aa.getBuffer(Xa))?xc=kc.dtype:"constant"in Xa?(Cc=2,"number"===typeof Xa.constant?(Ca=Xa.constant,lb=ub=Oa=0):(Ca=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?Xa.constant[1]:0,ub=2<Xa.constant.length?Xa.constant[2]:0,Oa=3<Xa.constant.length?Xa.constant[3]:0)):(kc=B(Xa.buffer)?aa.createStream(34962,
Xa.buffer):aa.getBuffer(Xa.buffer),xc="type"in Xa?Zd[Xa.type]:kc.dtype,tc=!!Xa.normalized,Hb=Xa.size|0,Va=Xa.offset|0,Ia=Xa.stride|0,vc=Xa.divisor|0);Ab=I.buffer;I.buffer=kc;rb=I.divisor;I.divisor=vc;uc=I.normalized;I.normalized=tc;vb=I.offset;I.offset=Va;qc=I.size;I.size=Hb;pc=I.state;I.state=Cc;bc=I.stride;I.stride=Ia;Nc=I.type;I.type=xc;jc=I.w;I.w=Oa;Lc=I.x;I.x=Ca;Tb=I.y;I.y=lb;Zb=I.z;I.z=ub;Lb=xa.call(this,M,a,e);Ja=!1;Wb=null;mb=0;wb=!1;Mb=Ib=0;dc=1;gc=0;Vd=5126;Oc=Dc=Bc=Fc=0;B(Lb)?(Ja=!0,Wb=
aa.createStream(34962,Lb),Vd=Wb.dtype):(Wb=aa.getBuffer(Lb))?Vd=Wb.dtype:"constant"in Lb?(dc=2,"number"===typeof Lb.constant?(Bc=Lb.constant,Dc=Oc=Fc=0):(Bc=0<Lb.constant.length?Lb.constant[0]:0,Dc=1<Lb.constant.length?Lb.constant[1]:0,Oc=2<Lb.constant.length?Lb.constant[2]:0,Fc=3<Lb.constant.length?Lb.constant[3]:0)):(Wb=B(Lb.buffer)?aa.createStream(34962,Lb.buffer):aa.getBuffer(Lb.buffer),Vd="type"in Lb?Zd[Lb.type]:Wb.dtype,wb=!!Lb.normalized,Mb=Lb.size|0,Ib=Lb.offset|0,gc=Lb.stride|0,mb=Lb.divisor|
0);$c=t.buffer;t.buffer=Wb;Tc=t.divisor;t.divisor=mb;Pc=t.normalized;t.normalized=wb;Fb=t.offset;t.offset=Ib;Cb=t.size;t.size=Mb;Qc=t.state;t.state=dc;Ic=t.stride;t.stride=gc;Uc=t.type;t.type=Vd;ec=t.w;t.w=Fc;Xc=t.x;t.x=Bc;bd=t.y;t.y=Dc;xd=t.z;t.z=Oc;ld=w.call(this,M,a,e);Yc=!1;Jd=null;gd=0;Sd=!1;fe=ce=0;Hd=1;Ed=0;dd=5126;ad=hd=rd=Ec=0;B(ld)?(Yc=!0,Jd=aa.createStream(34962,ld),dd=Jd.dtype):(Jd=aa.getBuffer(ld))?dd=Jd.dtype:"constant"in ld?(Hd=2,"number"===typeof ld.constant?(rd=ld.constant,hd=ad=
Ec=0):(rd=0<ld.constant.length?ld.constant[0]:0,hd=1<ld.constant.length?ld.constant[1]:0,ad=2<ld.constant.length?ld.constant[2]:0,Ec=3<ld.constant.length?ld.constant[3]:0)):(Jd=B(ld.buffer)?aa.createStream(34962,ld.buffer):aa.getBuffer(ld.buffer),dd="type"in ld?Zd[ld.type]:Jd.dtype,Sd=!!ld.normalized,fe=ld.size|0,ce=ld.offset|0,Ed=ld.stride|0,gd=ld.divisor|0);md=k.buffer;k.buffer=Jd;Dd=k.divisor;k.divisor=gd;zd=k.normalized;k.normalized=Sd;se=k.offset;k.offset=ce;te=k.size;k.size=fe;Ze=k.state;k.state=
Hd;ne=k.stride;k.stride=Ed;ee=k.type;k.type=dd;be=k.w;k.w=Ec;pe=k.x;k.x=rd;$d=k.y;k.y=hd;ge=k.z;k.z=ad;yc=ca.call(this,M,a,e);Wc=!1;qe=null;ke=0;Fd=!1;Md=Ld=0;Nd=1;he=0;Te=5126;Oe=Ne=oe=xe=0;B(yc)?(Wc=!0,qe=aa.createStream(34962,yc),Te=qe.dtype):(qe=aa.getBuffer(yc))?Te=qe.dtype:"constant"in yc?(Nd=2,"number"===typeof yc.constant?(oe=yc.constant,Ne=Oe=xe=0):(oe=0<yc.constant.length?yc.constant[0]:0,Ne=1<yc.constant.length?yc.constant[1]:0,Oe=2<yc.constant.length?yc.constant[2]:0,xe=3<yc.constant.length?
yc.constant[3]:0)):(qe=B(yc.buffer)?aa.createStream(34962,yc.buffer):aa.getBuffer(yc.buffer),Te="type"in yc?Zd[yc.type]:qe.dtype,Fd=!!yc.normalized,Md=yc.size|0,Ld=yc.offset|0,he=yc.stride|0,ke=yc.divisor|0);Ke=L.buffer;L.buffer=qe;re=L.divisor;L.divisor=ke;Be=L.normalized;L.normalized=Fd;De=L.offset;L.offset=Ld;Ee=L.size;L.size=Md;Fe=L.state;L.state=Nd;Ce=L.stride;L.stride=he;Id=L.type;L.type=Te;Rd=L.w;L.w=xe;Xd=L.x;L.x=oe;ae=L.y;L.y=Ne;Ge=L.z;L.z=Oe;Bd=P.call(this,M,a,e);Od=!1;ye=null;He=0;ff=!1;
Pe=Ye=0;Le=1;Xe=0;Ue=5126;Ud=Pd=Re=Qe=0;B(Bd)?(Od=!0,ye=aa.createStream(34962,Bd),Ue=ye.dtype):(ye=aa.getBuffer(Bd))?Ue=ye.dtype:"constant"in Bd?(Le=2,"number"===typeof Bd.constant?(Re=Bd.constant,Pd=Ud=Qe=0):(Re=0<Bd.constant.length?Bd.constant[0]:0,Pd=1<Bd.constant.length?Bd.constant[1]:0,Ud=2<Bd.constant.length?Bd.constant[2]:0,Qe=3<Bd.constant.length?Bd.constant[3]:0)):(ye=B(Bd.buffer)?aa.createStream(34962,Bd.buffer):aa.getBuffer(Bd.buffer),Ue="type"in Bd?Zd[Bd.type]:ye.dtype,ff=!!Bd.normalized,
Pe=Bd.size|0,Ye=Bd.offset|0,Xe=Bd.stride|0,He=Bd.divisor|0);Se=A.buffer;A.buffer=ye;gf=A.divisor;A.divisor=He;lf=A.normalized;A.normalized=ff;cf=A.offset;A.offset=Ye;hf=A.size;A.size=Pe;jf=A.state;A.state=Le;kf=A.stride;A.stride=Xe;qf=A.type;A.type=Ue;nf=A.w;A.w=Qe;rf=A.x;A.x=Re;Bf=A.y;A.y=Pd;Cf=A.z;A.z=Ud;Me=ka.call(this,M,a,e);ze=!1;of=null;pf=0;Df=!1;Af=Hf=0;Ef=1;Ff=0;wf=5126;zf=yf=uf=xf=0;B(Me)?(ze=!0,of=aa.createStream(34962,Me),wf=of.dtype):(of=aa.getBuffer(Me))?wf=of.dtype:"constant"in Me?
(Ef=2,"number"===typeof Me.constant?(uf=Me.constant,yf=zf=xf=0):(uf=0<Me.constant.length?Me.constant[0]:0,yf=1<Me.constant.length?Me.constant[1]:0,zf=2<Me.constant.length?Me.constant[2]:0,xf=3<Me.constant.length?Me.constant[3]:0)):(of=B(Me.buffer)?aa.createStream(34962,Me.buffer):aa.getBuffer(Me.buffer),wf="type"in Me?Zd[Me.type]:of.dtype,Df=!!Me.normalized,Af=Me.size|0,Hf=Me.offset|0,Ff=Me.stride|0,pf=Me.divisor|0);Jf=H.buffer;H.buffer=of;Kf=H.divisor;H.divisor=pf;Lf=H.normalized;H.normalized=Df;
Mf=H.offset;H.offset=Hf;sf=H.size;H.size=Af;Rf=H.state;H.state=Ef;If=H.stride;H.stride=Ff;tf=H.type;H.type=wf;dg=H.w;H.w=xf;Sf=H.x;H.x=uf;Tf=H.y;H.y=yf;qg=H.z;H.z=zf;df=R.call(this,M,a,e);af=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;B(df)?(af=!0,Nf=aa.createStream(34962,df),Wf=Nf.dtype):(Nf=aa.getBuffer(df))?Wf=Nf.dtype:"constant"in df?(hg=2,"number"===typeof df.constant?(Xf=df.constant,Yf=Zf=Uf=0):(Xf=0<df.constant.length?df.constant[0]:0,Yf=1<df.constant.length?df.constant[1]:
0,Zf=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Nf=B(df.buffer)?aa.createStream(34962,df.buffer):aa.getBuffer(df.buffer),Wf="type"in df?Zd[df.type]:Nf.dtype,eg=!!df.normalized,gg=df.size|0,fg=df.offset|0,ig=df.stride|0,Of=df.divisor|0);jg=f.buffer;f.buffer=Nf;rg=f.divisor;f.divisor=Of;sg=f.normalized;f.normalized=eg;tg=f.offset;f.offset=fg;ug=f.size;f.size=gg;vg=f.state;f.state=hg;wg=f.stride;f.stride=ig;xg=f.type;f.type=Wf;yg=f.w;f.w=Uf;zg=f.x;f.x=Xf;Ag=f.y;
f.y=Yf;Bg=f.z;f.z=Zf;ef=m.call(this,M,a,e);bf=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;B(ef)?(bf=!0,Pf=aa.createStream(34962,ef),$f=Pf.dtype):(Pf=aa.getBuffer(ef))?$f=Pf.dtype:"constant"in ef?(ng=2,"number"===typeof ef.constant?(ag=ef.constant,bg=cg=Vf=0):(ag=0<ef.constant.length?ef.constant[0]:0,bg=1<ef.constant.length?ef.constant[1]:0,cg=2<ef.constant.length?ef.constant[2]:0,Vf=3<ef.constant.length?ef.constant[3]:0)):(Pf=B(ef.buffer)?aa.createStream(34962,ef.buffer):aa.getBuffer(ef.buffer),
$f="type"in ef?Zd[ef.type]:Pf.dtype,kg=!!ef.normalized,mg=ef.size|0,lg=ef.offset|0,og=ef.stride|0,Qf=ef.divisor|0);pg=Q.buffer;Q.buffer=Pf;Cg=Q.divisor;Q.divisor=Qf;Dg=Q.normalized;Q.normalized=kg;Eg=Q.offset;Q.offset=lg;Fg=Q.size;Q.size=mg;Gg=Q.state;Q.state=ng;Hg=Q.stride;Q.stride=og;Ig=Q.type;Q.type=$f;Jg=Q.w;Q.w=Vf;Kg=Q.x;Q.x=ag;Lg=Q.y;Q.y=bg;Mg=Q.z;Q.z=cg;Ng=ua.vert;ua.vert=59;Og=ua.frag;ua.frag=58;ia.dirty=!0;c(M,a,e);M.viewportWidth=n;M.viewportHeight=q;Kd[0]=r;Kd[1]=x;Kd[2]=z;Kd[3]=E;qa[0]=
u;qa[1]=y;qa[2]=W;qa[3]=G;ga.blend_enable=F;O[0]=K;O[1]=pa;O[2]=J;O[3]=N;ga.depth_enable=U;Yd[0]=fa;Yd[1]=da;Yd[2]=ea;Yd[3]=ha;ga.scissor_enable=ja;ga.stencil_enable=la;ma&&(b.cpuTime+=performance.now()-Ea);sa&&sb.destroyStream(Ha);Fa.elements=Da;Fa.offset=Aa;Fa.count=Qa;Fa.primitive=xb;X[45]=Ua;X[48]=wc;X[10]=Ma;X[46]=tb;X[47]=gb;X[34]=ib;X[6]=vd;X[7]=rc;X[8]=ac;X[9]=kb;ob&&aa.destroyStream(wa);v.buffer=Rb;v.divisor=ya;v.normalized=nc;v.offset=La;v.size=Kb;v.state=fb;v.stride=hb;v.type=za;v.w=cc;
v.x=Ga;v.y=pb;v.z=qb;Ya&&aa.destroyStream(kc);I.buffer=Ab;I.divisor=rb;I.normalized=uc;I.offset=vb;I.size=qc;I.state=pc;I.stride=bc;I.type=Nc;I.w=jc;I.x=Lc;I.y=Tb;I.z=Zb;Ja&&aa.destroyStream(Wb);t.buffer=$c;t.divisor=Tc;t.normalized=Pc;t.offset=Fb;t.size=Cb;t.state=Qc;t.stride=Ic;t.type=Uc;t.w=ec;t.x=Xc;t.y=bd;t.z=xd;Yc&&aa.destroyStream(Jd);k.buffer=md;k.divisor=Dd;k.normalized=zd;k.offset=se;k.size=te;k.state=Ze;k.stride=ne;k.type=ee;k.w=be;k.x=pe;k.y=$d;k.z=ge;Wc&&aa.destroyStream(qe);L.buffer=
Ke;L.divisor=re;L.normalized=Be;L.offset=De;L.size=Ee;L.state=Fe;L.stride=Ce;L.type=Id;L.w=Rd;L.x=Xd;L.y=ae;L.z=Ge;Od&&aa.destroyStream(ye);A.buffer=Se;A.divisor=gf;A.normalized=lf;A.offset=cf;A.size=hf;A.state=jf;A.stride=kf;A.type=qf;A.w=nf;A.x=rf;A.y=Bf;A.z=Cf;ze&&aa.destroyStream(of);H.buffer=Jf;H.divisor=Kf;H.normalized=Lf;H.offset=Mf;H.size=sf;H.state=Rf;H.stride=If;H.type=tf;H.w=dg;H.x=Sf;H.y=Tf;H.z=qg;af&&aa.destroyStream(Nf);f.buffer=jg;f.divisor=rg;f.normalized=sg;f.offset=tg;f.size=ug;
f.state=vg;f.stride=wg;f.type=xg;f.w=yg;f.x=zg;f.y=Ag;f.z=Bg;bf&&aa.destroyStream(Pf);Q.buffer=pg;Q.divisor=Cg;Q.normalized=Dg;Q.offset=Eg;Q.size=Fg;Q.state=Gg;Q.stride=Hg;Q.type=Ig;Q.w=Jg;Q.x=Kg;Q.y=Lg;Q.z=Mg;ua.vert=Ng;ua.frag=Og;ia.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,b,g,h,d,c,p,e,l,u,y,n,E,r,C,v,D,na,oa,I,xa,t,w,k,ca,L,P,A,ka,H,R,f,m,Q,ja,ma,gd,qc,la,Pa){var Z,K,N,
V,sa,J,Ub,Za,T,z,ha,da,Aa,Qa,bc,Ua,Y,ib,ea,va,$b,nc,jc,vd,wc,aa,M,ia,Fa,sb,Lc,Fc,F,B,ga,ua,X,fa,qa,G,x;Z=a.attributes;K=a.buffer;N=a.context;V=a.current;sa=a.draw;J=a.elements;Ub=a.extensions;Za=a.framebuffer;T=a.gl;z=a.isBufferArgs;ha=a.next;da=a.shader;Aa=a.uniforms;Qa=a.vao;bc=ha.blend_color;Ua=V.blend_color;Y=ha.blend_equation;ib=V.blend_equation;ea=ha.blend_func;va=V.blend_func;$b=ha.colorMask;nc=V.colorMask;jc=ha.depth_range;vd=V.depth_range;wc=ha.polygonOffset_offset;aa=V.polygonOffset_offset;
M=ha.sample_coverage;ia=V.sample_coverage;Fa=ha.scissor_box;sb=V.scissor_box;Lc=ha.stencil_func;Fc=V.stencil_func;F=ha.stencil_opBack;B=V.stencil_opBack;ga=ha.stencil_opFront;ua=V.stencil_opFront;X=ha.viewport;fa=V.viewport;qa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};G={offset:4,stride:8};x={offset:0,stride:8};return{batch:function(a,c){var e,d,g,h,l,p,n,r,E,D,v,C,u;e=Za.next;e!==Za.cur&&(e?T.bindFramebuffer(36160,e.framebuffer):T.bindFramebuffer(36160,
null),Za.cur=e);if(V.dirty){var y,W,pa,S,X,da,ea,Aa,bc,mf,We,Ad,ve,de,Td,le,Ie,td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a,hc,Bb,mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb;y=ha.dither;y!==V.dither&&(y?T.enable(3024):T.disable(3024),V.dither=y);W=Y[0];pa=Y[1];if(W!==ib[0]||pa!==ib[1])T.blendEquationSeparate(W,pa),ib[0]=W,ib[1]=pa;S=ha.depth_func;S!==V.depth_func&&(T.depthFunc(S),V.depth_func=S);X=jc[0];da=jc[1];if(X!==vd[0]||da!==vd[1])T.depthRange(X,da),vd[0]=X,vd[1]=da;ea=ha.depth_mask;ea!==V.depth_mask&&(T.depthMask(ea),
V.depth_mask=ea);Aa=$b[0];bc=$b[1];mf=$b[2];We=$b[3];if(Aa!==nc[0]||bc!==nc[1]||mf!==nc[2]||We!==nc[3])T.colorMask(Aa,bc,mf,We),nc[0]=Aa,nc[1]=bc,nc[2]=mf,nc[3]=We;Ad=ha.cull_enable;Ad!==V.cull_enable&&(Ad?T.enable(2884):T.disable(2884),V.cull_enable=Ad);ve=ha.cull_face;ve!==V.cull_face&&(T.cullFace(ve),V.cull_face=ve);de=ha.frontFace;de!==V.frontFace&&(T.frontFace(de),V.frontFace=de);Td=ha.lineWidth;Td!==V.lineWidth&&(T.lineWidth(Td),V.lineWidth=Td);le=ha.polygonOffset_enable;le!==V.polygonOffset_enable&&
(le?T.enable(32823):T.disable(32823),V.polygonOffset_enable=le);Ie=wc[0];td=wc[1];if(Ie!==aa[0]||td!==aa[1])T.polygonOffset(Ie,td),aa[0]=Ie,aa[1]=td;nd=ha.sample_alpha;nd!==V.sample_alpha&&(nd?T.enable(32926):T.disable(32926),V.sample_alpha=nd);wd=ha.sample_enable;wd!==V.sample_enable&&(wd?T.enable(32928):T.disable(32928),V.sample_enable=wd);sd=M[0];cd=M[1];if(sd!==ia[0]||cd!==ia[1])T.sampleCoverage(sd,cd),ia[0]=sd,ia[1]=cd;Vc=ha.stencil_mask;Vc!==V.stencil_mask&&(T.stencilMask(Vc),V.stencil_mask=
Vc);yd=Lc[0];Rc=Lc[1];Mc=Lc[2];if(yd!==Fc[0]||Rc!==Fc[1]||Mc!==Fc[2])T.stencilFunc(yd,Rc,Mc),Fc[0]=yd,Fc[1]=Rc,Fc[2]=Mc;oc=ga[0];$a=ga[1];hc=ga[2];Bb=ga[3];if(oc!==ua[0]||$a!==ua[1]||hc!==ua[2]||Bb!==ua[3])T.stencilOpSeparate(oc,$a,hc,Bb),ua[0]=oc,ua[1]=$a,ua[2]=hc,ua[3]=Bb;mc=F[0];Sa=F[1];Jc=F[2];Xb=F[3];if(mc!==B[0]||Sa!==B[1]||Jc!==B[2]||Xb!==B[3])T.stencilOpSeparate(mc,Sa,Jc,Xb),B[0]=mc,B[1]=Sa,B[2]=Jc,B[3]=Xb;Zc=ha.scissor_enable;Zc!==V.scissor_enable&&(Zc?T.enable(3089):T.disable(3089),V.scissor_enable=
Zc);Qd=Fa[0];od=Fa[1];sc=Fa[2];Vb=Fa[3];if(Qd!==sb[0]||od!==sb[1]||sc!==sb[2]||Vb!==sb[3])T.scissor(Qd,od,sc,Vb),sb[0]=Qd,sb[1]=od,sb[2]=sc,sb[3]=Vb}d=this.viewport;g=d.x|0;h=d.y|0;l="width"in d?d.width|0:N.framebufferWidth-g;p="height"in d?d.height|0:N.framebufferHeight-h;n=N.viewportWidth;N.viewportWidth=l;r=N.viewportHeight;N.viewportHeight=p;T.viewport(g,h,l,p);fa[0]=g;fa[1]=h;fa[2]=l;fa[3]=p;T.blendColor(0,0,0,1);Ua[0]=0;Ua[1]=0;Ua[2]=0;Ua[3]=1;T.enable(3042);V.blend_enable=!0;T.blendFuncSeparate(770,
771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;T.disable(2929);V.depth_enable=!1;T.disable(2960);V.stencil_enable=!1;if(E=V.profile)D=performance.now(),b.count+=c;T.useProgram(na.program);v=Ub.angle_instanced_arrays;var Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb;Qa.setVAO(null);x.buffer=this.sizeBuffer;Gc=!1;Sc=null;Jb=0;zc=!1;
ra=Wa=0;pd=1;Yb=0;ab=5126;Nb=Ac=cb=Sb=0;z(x)?(Gc=!0,Sc=K.createStream(34962,x),ab=Sc.dtype):(Sc=K.getBuffer(x))?ab=Sc.dtype:"constant"in x?(pd=2,"number"===typeof x.constant?(cb=x.constant,Ac=Nb=Sb=0):(cb=0<x.constant.length?x.constant[0]:0,Ac=1<x.constant.length?x.constant[1]:0,Nb=2<x.constant.length?x.constant[2]:0,Sb=3<x.constant.length?x.constant[3]:0)):(Sc=z(x.buffer)?K.createStream(34962,x.buffer):K.getBuffer(x.buffer),ab="type"in x?qa[x.type]:Sc.dtype,zc=!!x.normalized,ra=x.size|0,Wa=x.offset|
0,Yb=x.stride|0,Jb=x.divisor|0);Cd=Pa.location;ic=Z[Cd];if(1===pd){ic.buffer||T.enableVertexAttribArray(Cd);Ob=ra||1;if(ic.type!==ab||ic.size!==Ob||ic.buffer!==Sc||ic.normalized!==zc||ic.offset!==Wa||ic.stride!==Yb)T.bindBuffer(34962,Sc.buffer),T.vertexAttribPointer(Cd,Ob,ab,zc,Yb,Wa),ic.type=ab,ic.size=Ob,ic.buffer=Sc,ic.normalized=zc,ic.offset=Wa,ic.stride=Yb;ic.divisor!==Jb&&(v.vertexAttribDivisorANGLE(Cd,Jb),ic.divisor=Jb)}else if(ic.buffer&&(T.disableVertexAttribArray(Cd),ic.buffer=null),ic.x!==
cb||ic.y!==Ac||ic.z!==Nb||ic.w!==Sb)T.vertexAttrib4f(Cd,cb,Ac,Nb,Sb),ic.x=cb,ic.y=Ac,ic.z=Nb,ic.w=Sb;G.buffer=this.sizeBuffer;ud=!1;Pb=null;Ma=0;nb=!1;gb=tb=0;Na=1;lc=0;Qb=5126;Hc=fc=db=id=0;z(G)?(ud=!0,Pb=K.createStream(34962,G),Qb=Pb.dtype):(Pb=K.getBuffer(G))?Qb=Pb.dtype:"constant"in G?(Na=2,"number"===typeof G.constant?(db=G.constant,fc=Hc=id=0):(db=0<G.constant.length?G.constant[0]:0,fc=1<G.constant.length?G.constant[1]:0,Hc=2<G.constant.length?G.constant[2]:0,id=3<G.constant.length?G.constant[3]:
0)):(Pb=z(G.buffer)?K.createStream(34962,G.buffer):K.getBuffer(G.buffer),Qb="type"in G?qa[G.type]:Pb.dtype,nb=!!G.normalized,gb=G.size|0,tb=G.offset|0,lc=G.stride|0,Ma=G.divisor|0);ac=H.location;jb=Z[ac];if(1===Na){jb.buffer||T.enableVertexAttribArray(ac);kb=gb||1;if(jb.type!==Qb||jb.size!==kb||jb.buffer!==Pb||jb.normalized!==nb||jb.offset!==tb||jb.stride!==lc)T.bindBuffer(34962,Pb.buffer),T.vertexAttribPointer(ac,kb,Qb,nb,lc,tb),jb.type=Qb,jb.size=kb,jb.buffer=Pb,jb.normalized=nb,jb.offset=tb,jb.stride=
lc;jb.divisor!==Ma&&(v.vertexAttribDivisorANGLE(ac,Ma),jb.divisor=Ma)}else if(jb.buffer&&(T.disableVertexAttribArray(ac),jb.buffer=null),jb.x!==db||jb.y!==fc||jb.z!==Hc||jb.w!==id)T.vertexAttrib4f(ac,db,fc,Hc,id),jb.x=db,jb.y=fc,jb.z=Hc,jb.w=id;ta=this.charBuffer;ob=!1;wa=null;Ta=0;bb=!1;eb=Ba=0;Ka=1;zb=0;yb=5126;Gb=Eb=Kc=Ra=0;z(ta)?(ob=!0,wa=K.createStream(34962,ta),yb=wa.dtype):(wa=K.getBuffer(ta))?yb=wa.dtype:"constant"in ta?(Ka=2,"number"===typeof ta.constant?(Kc=ta.constant,Eb=Gb=Ra=0):(Kc=0<
ta.constant.length?ta.constant[0]:0,Eb=1<ta.constant.length?ta.constant[1]:0,Gb=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?ta.constant[3]:0)):(wa=z(ta.buffer)?K.createStream(34962,ta.buffer):K.getBuffer(ta.buffer),yb="type"in ta?qa[ta.type]:wa.dtype,bb=!!ta.normalized,eb=ta.size|0,Ba=ta.offset|0,zb=ta.stride|0,Ta=ta.divisor|0);Rb=ka.location;ya=Z[Rb];if(1===Ka){ya.buffer||T.enableVertexAttribArray(Rb);jd=eb||1;if(ya.type!==yb||ya.size!==jd||ya.buffer!==wa||ya.normalized!==bb||ya.offset!==
Ba||ya.stride!==zb)T.bindBuffer(34962,wa.buffer),T.vertexAttribPointer(Rb,jd,yb,bb,zb,Ba),ya.type=yb,ya.size=jd,ya.buffer=wa,ya.normalized=bb,ya.offset=Ba,ya.stride=zb;ya.divisor!==Ta&&(v.vertexAttribDivisorANGLE(Rb,Ta),ya.divisor=Ta)}else if(ya.buffer&&(T.disableVertexAttribArray(Rb),ya.buffer=null),ya.x!==Kc||ya.y!==Eb||ya.z!==Gb||ya.w!==Ra)T.vertexAttrib4f(Rb,Kc,Eb,Gb,Ra),ya.x=Kc,ya.y=Eb,ya.z=Gb,ya.w=Ra;La=this.position;Kb=!1;fb=null;hb=0;za=!1;Ga=cc=0;pb=1;qb=0;Xa=5126;tc=vc=kc=Ya=0;z(La)?(Kb=
!0,fb=K.createStream(34962,La),Xa=fb.dtype):(fb=K.getBuffer(La))?Xa=fb.dtype:"constant"in La?(pb=2,"number"===typeof La.constant?(kc=La.constant,vc=tc=Ya=0):(kc=0<La.constant.length?La.constant[0]:0,vc=1<La.constant.length?La.constant[1]:0,tc=2<La.constant.length?La.constant[2]:0,Ya=3<La.constant.length?La.constant[3]:0)):(fb=z(La.buffer)?K.createStream(34962,La.buffer):K.getBuffer(La.buffer),Xa="type"in La?qa[La.type]:fb.dtype,za=!!La.normalized,Ga=La.size|0,cc=La.offset|0,qb=La.stride|0,hb=La.divisor|
0);Va=ja.location;Hb=Z[Va];if(1===pb){Hb.buffer||T.enableVertexAttribArray(Va);Cc=Ga||2;if(Hb.type!==Xa||Hb.size!==Cc||Hb.buffer!==fb||Hb.normalized!==za||Hb.offset!==cc||Hb.stride!==qb)T.bindBuffer(34962,fb.buffer),T.vertexAttribPointer(Va,Cc,Xa,za,qb,cc),Hb.type=Xa,Hb.size=Cc,Hb.buffer=fb,Hb.normalized=za,Hb.offset=cc,Hb.stride=qb;Hb.divisor!==hb&&(v.vertexAttribDivisorANGLE(Va,hb),Hb.divisor=hb)}else if(Hb.buffer&&(T.disableVertexAttribArray(Va),Hb.buffer=null),Hb.x!==kc||Hb.y!==vc||Hb.z!==tc||
Hb.w!==Ya)T.vertexAttrib4f(Va,kc,vc,tc,Ya),Hb.x=kc,Hb.y=vc,Hb.z=tc,Hb.w=Ya;Ia=this.viewportArray;T.uniform4f(la.location,Ia[0],Ia[1],Ia[2],Ia[3]);xc=this.scale;T.uniform2f(gd.location,xc[0],xc[1]);Oa=this.translate;T.uniform2f(qc.location,Oa[0],Oa[1]);(Ca=sa.elements)?T.bindBuffer(34963,Ca.buffer.buffer):Qa.currentVAO&&(Ca=J.getElements(Qa.currentVAO.elements))&&T.bindBuffer(34963,Ca.buffer.buffer);lb=sa.instances;for(C=0;C<c;++C){u=a[C];var ub,Ab,rb,uc,vb,kd,pc,Ae,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,
Mb,dc,gc,vf,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc,bd;ub=oa.call(this,N,u,C);C&&Ab===ub||(Ab=ub,T.uniform1f(R.location,ub));rb=I.call(this,N,u,C);C&&uc===rb||(uc=rb,T.uniform1f(m.location,rb));vb=u.align;C&&kd===vb||(kd=vb,T.uniform1f(k.location,vb));pc=u.baseline;C&&Ae===pc||(Ae=pc,T.uniform1f(A.location,pc));Nc=u.color;ed=Nc[0];Tb=Nc[1];Lb=Nc[2];Wb=Nc[3];C&&fd===ed&&Zb===Tb&&Ja===Lb&&mb===Wb||(fd=ed,Zb=Tb,Ja=Lb,mb=Wb,T.uniform4f(f.location,ed,Tb,Lb,Wb));wb=xa.call(this,N,u,C);Ib=wb[0];dc=wb[1];
C&&Mb===Ib&&gc===dc||(Mb=Ib,gc=dc,T.uniform2f(P.location,Ib,dc));vf=t.call(this,N,u,C);Gd=vf[0];Dc=vf[1];C&&Bc===Gd&&Oc===Dc||(Bc=Gd,Oc=Dc,T.uniform2f(L.location,Gd,Dc));$c=u.positionOffset;Tc=$c[0];Fb=$c[1];C&&Pc===Tc&&Cb===Fb||(Pc=Tc,Cb=Fb,T.uniform2f(ma.location,Tc,Fb));Qc=u.opacity;C&&Ic===Qc||(Ic=Qc,T.uniform1f(Q.location,Qc));(Uc=w.call(this,N,u,C))&&"framebuffer"===Uc._reglType&&(Uc=Uc.color[0]);ec=Uc._texture;T.uniform1i(ca.location,ec.bind());Xc=u.offset;if(bd=u.count)0<lb?Ca?v.drawElementsInstancedANGLE(0,
bd,Ca.type,Xc<<(Ca.type-5121>>1),lb):v.drawArraysInstancedANGLE(0,Xc,bd,lb):0>lb&&(Ca?T.drawElements(0,bd,Ca.type,Xc<<(Ca.type-5121>>1)):T.drawArrays(0,Xc,bd)),ec.unbind()}Gc&&K.destroyStream(Sc);ud&&K.destroyStream(Pb);ob&&K.destroyStream(wa);Kb&&K.destroyStream(fb);V.dirty=!0;Qa.setVAO(null);N.viewportWidth=n;N.viewportHeight=r;E&&(b.cpuTime+=performance.now()-D)},draw:function(a){var l,n,r,q,t,w,C,E,D,v,u,y,W,pa,I,S,X,da,ea,oa,na,xa,Aa,bc,We,Ad,ve,de,Td,le,Ie,td,nd,wd,sd,cd,Vc,yd,Rc,Mc,oc,$a,hc,
Bb,mc,Sa,Jc,Xb,Zc,Qd,od,sc,Vb,Gc,Sc,Jb,zc,Wa,ra,pd,Yb,ab,Sb,cb,Ac,Nb,Cd,ic,Ob,ud,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb;l=Za.next;l!==Za.cur&&(l?T.bindFramebuffer(36160,l.framebuffer):T.bindFramebuffer(36160,null),Za.cur=l);if(V.dirty){var Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc;Ka=ha.dither;Ka!==V.dither&&(Ka?T.enable(3024):T.disable(3024),V.dither=Ka);zb=Y[0];yb=Y[1];if(zb!==ib[0]||yb!==ib[1])T.blendEquationSeparate(zb,
yb),ib[0]=zb,ib[1]=yb;Ra=ha.depth_func;Ra!==V.depth_func&&(T.depthFunc(Ra),V.depth_func=Ra);Kc=jc[0];Eb=jc[1];if(Kc!==vd[0]||Eb!==vd[1])T.depthRange(Kc,Eb),vd[0]=Kc,vd[1]=Eb;Gb=ha.depth_mask;Gb!==V.depth_mask&&(T.depthMask(Gb),V.depth_mask=Gb);Rb=$b[0];ya=$b[1];jd=$b[2];La=$b[3];if(Rb!==nc[0]||ya!==nc[1]||jd!==nc[2]||La!==nc[3])T.colorMask(Rb,ya,jd,La),nc[0]=Rb,nc[1]=ya,nc[2]=jd,nc[3]=La;Kb=ha.cull_enable;Kb!==V.cull_enable&&(Kb?T.enable(2884):T.disable(2884),V.cull_enable=Kb);fb=ha.cull_face;fb!==
V.cull_face&&(T.cullFace(fb),V.cull_face=fb);hb=ha.frontFace;hb!==V.frontFace&&(T.frontFace(hb),V.frontFace=hb);za=ha.lineWidth;za!==V.lineWidth&&(T.lineWidth(za),V.lineWidth=za);cc=ha.polygonOffset_enable;cc!==V.polygonOffset_enable&&(cc?T.enable(32823):T.disable(32823),V.polygonOffset_enable=cc);Ga=wc[0];pb=wc[1];if(Ga!==aa[0]||pb!==aa[1])T.polygonOffset(Ga,pb),aa[0]=Ga,aa[1]=pb;qb=ha.sample_alpha;qb!==V.sample_alpha&&(qb?T.enable(32926):T.disable(32926),V.sample_alpha=qb);Xa=ha.sample_enable;Xa!==
V.sample_enable&&(Xa?T.enable(32928):T.disable(32928),V.sample_enable=Xa);Ya=M[0];kc=M[1];if(Ya!==ia[0]||kc!==ia[1])T.sampleCoverage(Ya,kc),ia[0]=Ya,ia[1]=kc;vc=ha.stencil_mask;vc!==V.stencil_mask&&(T.stencilMask(vc),V.stencil_mask=vc);tc=Lc[0];Va=Lc[1];Hb=Lc[2];if(tc!==Fc[0]||Va!==Fc[1]||Hb!==Fc[2])T.stencilFunc(tc,Va,Hb),Fc[0]=tc,Fc[1]=Va,Fc[2]=Hb;Cc=ga[0];Ia=ga[1];xc=ga[2];Oa=ga[3];if(Cc!==ua[0]||Ia!==ua[1]||xc!==ua[2]||Oa!==ua[3])T.stencilOpSeparate(Cc,Ia,xc,Oa),ua[0]=Cc,ua[1]=Ia,ua[2]=xc,ua[3]=
Oa;Ca=F[0];lb=F[1];ub=F[2];Ab=F[3];if(Ca!==B[0]||lb!==B[1]||ub!==B[2]||Ab!==B[3])T.stencilOpSeparate(Ca,lb,ub,Ab),B[0]=Ca,B[1]=lb,B[2]=ub,B[3]=Ab;rb=ha.scissor_enable;rb!==V.scissor_enable&&(rb?T.enable(3089):T.disable(3089),V.scissor_enable=rb);uc=Fa[0];vb=Fa[1];kd=Fa[2];pc=Fa[3];if(uc!==sb[0]||vb!==sb[1]||kd!==sb[2]||pc!==sb[3])T.scissor(uc,vb,kd,pc),sb[0]=uc,sb[1]=vb,sb[2]=kd,sb[3]=pc}n=this.viewport;r=n.x|0;q=n.y|0;t="width"in n?n.width|0:N.framebufferWidth-r;w="height"in n?n.height|0:N.framebufferHeight-
q;C=N.viewportWidth;N.viewportWidth=t;E=N.viewportHeight;N.viewportHeight=w;T.viewport(r,q,t,w);fa[0]=r;fa[1]=q;fa[2]=t;fa[3]=w;T.blendColor(0,0,0,1);Ua[0]=0;Ua[1]=0;Ua[2]=0;Ua[3]=1;T.enable(3042);V.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;T.disable(2929);V.depth_enable=!1;T.disable(2960);V.stencil_enable=!1;if(D=V.profile)v=performance.now(),b.count++;T.useProgram(g.program);u=Ub.angle_instanced_arrays;Qa.setVAO(null);x.buffer=this.sizeBuffer;y=!1;
W=null;pa=0;I=!1;X=S=0;da=1;ea=0;oa=5126;bc=Aa=xa=na=0;z(x)?(y=!0,W=K.createStream(34962,x),oa=W.dtype):(W=K.getBuffer(x))?oa=W.dtype:"constant"in x?(da=2,"number"===typeof x.constant?(xa=x.constant,Aa=bc=na=0):(xa=0<x.constant.length?x.constant[0]:0,Aa=1<x.constant.length?x.constant[1]:0,bc=2<x.constant.length?x.constant[2]:0,na=3<x.constant.length?x.constant[3]:0)):(W=z(x.buffer)?K.createStream(34962,x.buffer):K.getBuffer(x.buffer),oa="type"in x?qa[x.type]:W.dtype,I=!!x.normalized,X=x.size|0,S=
x.offset|0,ea=x.stride|0,pa=x.divisor|0);We=Pa.location;Ad=Z[We];if(1===da){Ad.buffer||T.enableVertexAttribArray(We);ve=X||1;if(Ad.type!==oa||Ad.size!==ve||Ad.buffer!==W||Ad.normalized!==I||Ad.offset!==S||Ad.stride!==ea)T.bindBuffer(34962,W.buffer),T.vertexAttribPointer(We,ve,oa,I,ea,S),Ad.type=oa,Ad.size=ve,Ad.buffer=W,Ad.normalized=I,Ad.offset=S,Ad.stride=ea;Ad.divisor!==pa&&(u.vertexAttribDivisorANGLE(We,pa),Ad.divisor=pa)}else if(Ad.buffer&&(T.disableVertexAttribArray(We),Ad.buffer=null),Ad.x!==
xa||Ad.y!==Aa||Ad.z!==bc||Ad.w!==na)T.vertexAttrib4f(We,xa,Aa,bc,na),Ad.x=xa,Ad.y=Aa,Ad.z=bc,Ad.w=na;G.buffer=this.sizeBuffer;de=!1;Td=null;le=0;Ie=!1;nd=td=0;wd=1;sd=0;cd=5126;Mc=Rc=yd=Vc=0;z(G)?(de=!0,Td=K.createStream(34962,G),cd=Td.dtype):(Td=K.getBuffer(G))?cd=Td.dtype:"constant"in G?(wd=2,"number"===typeof G.constant?(yd=G.constant,Rc=Mc=Vc=0):(yd=0<G.constant.length?G.constant[0]:0,Rc=1<G.constant.length?G.constant[1]:0,Mc=2<G.constant.length?G.constant[2]:0,Vc=3<G.constant.length?G.constant[3]:
0)):(Td=z(G.buffer)?K.createStream(34962,G.buffer):K.getBuffer(G.buffer),cd="type"in G?qa[G.type]:Td.dtype,Ie=!!G.normalized,nd=G.size|0,td=G.offset|0,sd=G.stride|0,le=G.divisor|0);oc=H.location;$a=Z[oc];if(1===wd){$a.buffer||T.enableVertexAttribArray(oc);hc=nd||1;if($a.type!==cd||$a.size!==hc||$a.buffer!==Td||$a.normalized!==Ie||$a.offset!==td||$a.stride!==sd)T.bindBuffer(34962,Td.buffer),T.vertexAttribPointer(oc,hc,cd,Ie,sd,td),$a.type=cd,$a.size=hc,$a.buffer=Td,$a.normalized=Ie,$a.offset=td,$a.stride=
sd;$a.divisor!==le&&(u.vertexAttribDivisorANGLE(oc,le),$a.divisor=le)}else if($a.buffer&&(T.disableVertexAttribArray(oc),$a.buffer=null),$a.x!==yd||$a.y!==Rc||$a.z!==Mc||$a.w!==Vc)T.vertexAttrib4f(oc,yd,Rc,Mc,Vc),$a.x=yd,$a.y=Rc,$a.z=Mc,$a.w=Vc;Bb=this.charBuffer;mc=!1;Sa=null;Jc=0;Xb=!1;Qd=Zc=0;od=1;sc=0;Vb=5126;zc=Jb=Sc=Gc=0;z(Bb)?(mc=!0,Sa=K.createStream(34962,Bb),Vb=Sa.dtype):(Sa=K.getBuffer(Bb))?Vb=Sa.dtype:"constant"in Bb?(od=2,"number"===typeof Bb.constant?(Sc=Bb.constant,Jb=zc=Gc=0):(Sc=0<
Bb.constant.length?Bb.constant[0]:0,Jb=1<Bb.constant.length?Bb.constant[1]:0,zc=2<Bb.constant.length?Bb.constant[2]:0,Gc=3<Bb.constant.length?Bb.constant[3]:0)):(Sa=z(Bb.buffer)?K.createStream(34962,Bb.buffer):K.getBuffer(Bb.buffer),Vb="type"in Bb?qa[Bb.type]:Sa.dtype,Xb=!!Bb.normalized,Qd=Bb.size|0,Zc=Bb.offset|0,sc=Bb.stride|0,Jc=Bb.divisor|0);Wa=ka.location;ra=Z[Wa];if(1===od){ra.buffer||T.enableVertexAttribArray(Wa);pd=Qd||1;if(ra.type!==Vb||ra.size!==pd||ra.buffer!==Sa||ra.normalized!==Xb||ra.offset!==
Zc||ra.stride!==sc)T.bindBuffer(34962,Sa.buffer),T.vertexAttribPointer(Wa,pd,Vb,Xb,sc,Zc),ra.type=Vb,ra.size=pd,ra.buffer=Sa,ra.normalized=Xb,ra.offset=Zc,ra.stride=sc;ra.divisor!==Jc&&(u.vertexAttribDivisorANGLE(Wa,Jc),ra.divisor=Jc)}else if(ra.buffer&&(T.disableVertexAttribArray(Wa),ra.buffer=null),ra.x!==Sc||ra.y!==Jb||ra.z!==zc||ra.w!==Gc)T.vertexAttrib4f(Wa,Sc,Jb,zc,Gc),ra.x=Sc,ra.y=Jb,ra.z=zc,ra.w=Gc;Yb=this.position;ab=!1;Sb=null;cb=0;Ac=!1;Cd=Nb=0;ic=1;Ob=0;ud=5126;tb=nb=Ma=Pb=0;z(Yb)?(ab=
!0,Sb=K.createStream(34962,Yb),ud=Sb.dtype):(Sb=K.getBuffer(Yb))?ud=Sb.dtype:"constant"in Yb?(ic=2,"number"===typeof Yb.constant?(Ma=Yb.constant,nb=tb=Pb=0):(Ma=0<Yb.constant.length?Yb.constant[0]:0,nb=1<Yb.constant.length?Yb.constant[1]:0,tb=2<Yb.constant.length?Yb.constant[2]:0,Pb=3<Yb.constant.length?Yb.constant[3]:0)):(Sb=z(Yb.buffer)?K.createStream(34962,Yb.buffer):K.getBuffer(Yb.buffer),ud="type"in Yb?qa[Yb.type]:Sb.dtype,Ac=!!Yb.normalized,Cd=Yb.size|0,Nb=Yb.offset|0,Ob=Yb.stride|0,cb=Yb.divisor|
0);gb=ja.location;Na=Z[gb];if(1===ic){Na.buffer||T.enableVertexAttribArray(gb);lc=Cd||2;if(Na.type!==ud||Na.size!==lc||Na.buffer!==Sb||Na.normalized!==Ac||Na.offset!==Nb||Na.stride!==Ob)T.bindBuffer(34962,Sb.buffer),T.vertexAttribPointer(gb,lc,ud,Ac,Ob,Nb),Na.type=ud,Na.size=lc,Na.buffer=Sb,Na.normalized=Ac,Na.offset=Nb,Na.stride=Ob;Na.divisor!==cb&&(u.vertexAttribDivisorANGLE(gb,cb),Na.divisor=cb)}else if(Na.buffer&&(T.disableVertexAttribArray(gb),Na.buffer=null),Na.x!==Ma||Na.y!==nb||Na.z!==tb||
Na.w!==Pb)T.vertexAttrib4f(gb,Ma,nb,tb,Pb),Na.x=Ma,Na.y=nb,Na.z=tb,Na.w=Pb;Qb=h.call(this,N,a,0);T.uniform1f(R.location,Qb);id=d.call(this,N,a,0);T.uniform1f(m.location,id);T.uniform1f(k.location,a.align);T.uniform1f(A.location,a.baseline);db=this.viewportArray;T.uniform4f(la.location,db[0],db[1],db[2],db[3]);fc=a.color;T.uniform4f(f.location,fc[0],fc[1],fc[2],fc[3]);Hc=c.call(this,N,a,0);T.uniform2f(P.location,Hc[0],Hc[1]);ac=p.call(this,N,a,0);T.uniform2f(L.location,ac[0],ac[1]);jb=this.scale;T.uniform2f(gd.location,
jb[0],jb[1]);kb=this.translate;T.uniform2f(qc.location,kb[0],kb[1]);ta=a.positionOffset;T.uniform2f(ma.location,ta[0],ta[1]);T.uniform1f(Q.location,a.opacity);(ob=e.call(this,N,a,0))&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);wa=ob._texture;T.uniform1i(ca.location,wa.bind());(Ta=sa.elements)?T.bindBuffer(34963,Ta.buffer.buffer):Qa.currentVAO&&(Ta=J.getElements(Qa.currentVAO.elements))&&T.bindBuffer(34963,Ta.buffer.buffer);bb=a.offset;if(Ba=a.count)eb=sa.instances,0<eb?Ta?u.drawElementsInstancedANGLE(0,
Ba,Ta.type,bb<<(Ta.type-5121>>1),eb):u.drawArraysInstancedANGLE(0,bb,Ba,eb):0>eb&&(Ta?T.drawElements(0,Ba,Ta.type,bb<<(Ta.type-5121>>1)):T.drawArrays(0,bb,Ba)),V.dirty=!0,Qa.setVAO(null),N.viewportWidth=C,N.viewportHeight=E,D&&(b.cpuTime+=performance.now()-v),y&&K.destroyStream(W),de&&K.destroyStream(Td),mc&&K.destroyStream(Sa),ab&&K.destroyStream(Sb),wa.unbind()},scope:function(a,c,e){var d,f,g,h,k,m,p,t,w,A,B,F,H,M,I,L,J,P,Q,aa,R,T,Y,Z,fa,ca,ga,ia,ua,ja,ka,la,ma,oa,na,va,xa,Fa,Pa,Qa,Ua,Za,wc,Sa,
sb,ib,vd,Ub,$b,sc,Vb,nc,qc,Jb,zc,Wa,ra,jc,Yb,ab,Sb,cb,Ac,Nb,Lc,ic,Ob,Fc,Pb,Ma,nb,tb,gb,Na,lc,Qb,id,db,fc,Hc,ac,jb,kb,ta,ob,wa,Ta,bb,Ba,eb,Ka,zb,yb,Ra,Kc,Eb,Gb,Rb,ya,jd,La,Kb,fb,hb,za,cc,Ga,pb,qb,Xa,Ya,kc,vc,tc,Va,Hb,Cc,Ia,xc,Oa,Ca,lb,ub,Ab,rb,uc,vb,kd,pc,gd,Nc,ed,fd,Tb,Zb,Lb,Ja,Wb,mb,wb,Ib,Mb,dc,gc,vf,Gd,Bc,Dc,Oc,$c,Tc,Pc,Fb,Cb,Qc,Ic,Uc,ec,Xc;d=this.viewport;f=d.x|0;g=d.y|0;h="width"in d?d.width|0:N.framebufferWidth-f;k="height"in d?d.height|0:N.framebufferHeight-g;m=N.viewportWidth;N.viewportWidth=
h;p=N.viewportHeight;N.viewportHeight=k;t=X[0];X[0]=f;w=X[1];X[1]=g;A=X[2];X[2]=h;B=X[3];X[3]=k;F=bc[0];bc[0]=0;H=bc[1];bc[1]=0;M=bc[2];bc[2]=0;I=bc[3];bc[3]=1;L=ha.blend_enable;ha.blend_enable=!0;J=ea[0];ea[0]=770;P=ea[1];ea[1]=771;Q=ea[2];ea[2]=773;aa=ea[3];ea[3]=1;R=ha.depth_enable;ha.depth_enable=!1;T=ha.stencil_enable;ha.stencil_enable=!1;if(Y=V.profile)Z=performance.now(),b.count++;fa=a.offset;ca=sa.offset;sa.offset=fa;ga=a.count;ia=sa.count;sa.count=ga;ua=sa.primitive;sa.primitive=0;ja=a.align;
ka=Aa[64];Aa[64]=ja;la=l.call(this,N,a,e);ma=Aa[69];Aa[69]=la;oa=u.call(this,N,a,e);na=Aa[67];Aa[67]=oa;va=y.call(this,N,a,e);xa=Aa[66];Aa[66]=va;Fa=a.baseline;Pa=Aa[65];Aa[65]=Fa;Qa=n.call(this,N,a,e);Ua=Aa[62];Aa[62]=Qa;Za=a.color;wc=Aa[14];Aa[14]=Za;Sa=E.call(this,N,a,e);sb=Aa[63];Aa[63]=Sa;ib=a.opacity;vd=Aa[10];Aa[10]=ib;Ub=a.positionOffset;$b=Aa[68];Aa[68]=Ub;sc=this.scale;Vb=Aa[6];Aa[6]=sc;nc=this.translate;qc=Aa[8];Aa[8]=nc;Jb=this.viewportArray;zc=Aa[3];Aa[3]=Jb;Wa=this.charBuffer;ra=!1;
jc=null;Yb=0;ab=!1;cb=Sb=0;Ac=1;Nb=0;Lc=5126;Pb=Fc=Ob=ic=0;z(Wa)?(ra=!0,jc=K.createStream(34962,Wa),Lc=jc.dtype):(jc=K.getBuffer(Wa))?Lc=jc.dtype:"constant"in Wa?(Ac=2,"number"===typeof Wa.constant?(Ob=Wa.constant,Fc=Pb=ic=0):(Ob=0<Wa.constant.length?Wa.constant[0]:0,Fc=1<Wa.constant.length?Wa.constant[1]:0,Pb=2<Wa.constant.length?Wa.constant[2]:0,ic=3<Wa.constant.length?Wa.constant[3]:0)):(jc=z(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),Lc="type"in Wa?qa[Wa.type]:jc.dtype,
ab=!!Wa.normalized,cb=Wa.size|0,Sb=Wa.offset|0,Nb=Wa.stride|0,Yb=Wa.divisor|0);Ma=r.buffer;r.buffer=jc;nb=r.divisor;r.divisor=Yb;tb=r.normalized;r.normalized=ab;gb=r.offset;r.offset=Sb;Na=r.size;r.size=cb;lc=r.state;r.state=Ac;Qb=r.stride;r.stride=Nb;id=r.type;r.type=Lc;db=r.w;r.w=ic;fc=r.x;r.x=Ob;Hc=r.y;r.y=Fc;ac=r.z;r.z=Pb;G.buffer=this.sizeBuffer;jb=!1;kb=null;ta=0;ob=!1;Ta=wa=0;bb=1;Ba=0;eb=5126;Ra=yb=zb=Ka=0;z(G)?(jb=!0,kb=K.createStream(34962,G),eb=kb.dtype):(kb=K.getBuffer(G))?eb=kb.dtype:
"constant"in G?(bb=2,"number"===typeof G.constant?(zb=G.constant,yb=Ra=Ka=0):(zb=0<G.constant.length?G.constant[0]:0,yb=1<G.constant.length?G.constant[1]:0,Ra=2<G.constant.length?G.constant[2]:0,Ka=3<G.constant.length?G.constant[3]:0)):(kb=z(G.buffer)?K.createStream(34962,G.buffer):K.getBuffer(G.buffer),eb="type"in G?qa[G.type]:kb.dtype,ob=!!G.normalized,Ta=G.size|0,wa=G.offset|0,Ba=G.stride|0,ta=G.divisor|0);Kc=C.buffer;C.buffer=kb;Eb=C.divisor;C.divisor=ta;Gb=C.normalized;C.normalized=ob;Rb=C.offset;
C.offset=wa;ya=C.size;C.size=Ta;jd=C.state;C.state=bb;La=C.stride;C.stride=Ba;Kb=C.type;C.type=eb;fb=C.w;C.w=Ka;hb=C.x;C.x=zb;za=C.y;C.y=yb;cc=C.z;C.z=Ra;Ga=this.position;pb=!1;qb=null;Xa=0;Ya=!1;vc=kc=0;tc=1;Va=0;Hb=5126;Oa=xc=Ia=Cc=0;z(Ga)?(pb=!0,qb=K.createStream(34962,Ga),Hb=qb.dtype):(qb=K.getBuffer(Ga))?Hb=qb.dtype:"constant"in Ga?(tc=2,"number"===typeof Ga.constant?(Ia=Ga.constant,xc=Oa=Cc=0):(Ia=0<Ga.constant.length?Ga.constant[0]:0,xc=1<Ga.constant.length?Ga.constant[1]:0,Oa=2<Ga.constant.length?
Ga.constant[2]:0,Cc=3<Ga.constant.length?Ga.constant[3]:0)):(qb=z(Ga.buffer)?K.createStream(34962,Ga.buffer):K.getBuffer(Ga.buffer),Hb="type"in Ga?qa[Ga.type]:qb.dtype,Ya=!!Ga.normalized,vc=Ga.size|0,kc=Ga.offset|0,Va=Ga.stride|0,Xa=Ga.divisor|0);Ca=v.buffer;v.buffer=qb;lb=v.divisor;v.divisor=Xa;ub=v.normalized;v.normalized=Ya;Ab=v.offset;v.offset=kc;rb=v.size;v.size=vc;uc=v.state;v.state=tc;vb=v.stride;v.stride=Va;kd=v.type;v.type=Hb;pc=v.w;v.w=Cc;gd=v.x;v.x=Ia;Nc=v.y;v.y=xc;ed=v.z;v.z=Oa;x.buffer=
this.sizeBuffer;fd=!1;Tb=null;Zb=0;Lb=!1;Wb=Ja=0;mb=1;wb=0;Ib=5126;vf=gc=dc=Mb=0;z(x)?(fd=!0,Tb=K.createStream(34962,x),Ib=Tb.dtype):(Tb=K.getBuffer(x))?Ib=Tb.dtype:"constant"in x?(mb=2,"number"===typeof x.constant?(dc=x.constant,gc=vf=Mb=0):(dc=0<x.constant.length?x.constant[0]:0,gc=1<x.constant.length?x.constant[1]:0,vf=2<x.constant.length?x.constant[2]:0,Mb=3<x.constant.length?x.constant[3]:0)):(Tb=z(x.buffer)?K.createStream(34962,x.buffer):K.getBuffer(x.buffer),Ib="type"in x?qa[x.type]:Tb.dtype,
Lb=!!x.normalized,Wb=x.size|0,Ja=x.offset|0,wb=x.stride|0,Zb=x.divisor|0);Gd=D.buffer;D.buffer=Tb;Bc=D.divisor;D.divisor=Zb;Dc=D.normalized;D.normalized=Lb;Oc=D.offset;D.offset=Ja;$c=D.size;D.size=Wb;Tc=D.state;D.state=mb;Pc=D.stride;D.stride=wb;Fb=D.type;D.type=Ib;Cb=D.w;D.w=Mb;Qc=D.x;D.x=dc;Ic=D.y;D.y=gc;Uc=D.z;D.z=vf;ec=da.vert;da.vert=61;Xc=da.frag;da.frag=60;V.dirty=!0;c(N,a,e);N.viewportWidth=m;N.viewportHeight=p;X[0]=t;X[1]=w;X[2]=A;X[3]=B;bc[0]=F;bc[1]=H;bc[2]=M;bc[3]=I;ha.blend_enable=L;
ea[0]=J;ea[1]=P;ea[2]=Q;ea[3]=aa;ha.depth_enable=R;ha.stencil_enable=T;Y&&(b.cpuTime+=performance.now()-Z);sa.offset=ca;sa.count=ia;sa.primitive=ua;Aa[64]=ka;Aa[69]=ma;Aa[67]=na;Aa[66]=xa;Aa[65]=Pa;Aa[62]=Ua;Aa[14]=wc;Aa[63]=sb;Aa[10]=vd;Aa[68]=$b;Aa[6]=Vb;Aa[8]=qc;Aa[3]=zc;ra&&K.destroyStream(jc);r.buffer=Ma;r.divisor=nb;r.normalized=tb;r.offset=gb;r.size=Na;r.state=lc;r.stride=Qb;r.type=id;r.w=db;r.x=fc;r.y=Hc;r.z=ac;jb&&K.destroyStream(kb);C.buffer=Kc;C.divisor=Eb;C.normalized=Gb;C.offset=Rb;C.size=
ya;C.state=jd;C.stride=La;C.type=Kb;C.w=fb;C.x=hb;C.y=za;C.z=cc;pb&&K.destroyStream(qb);v.buffer=Ca;v.divisor=lb;v.normalized=ub;v.offset=Ab;v.size=rb;v.state=uc;v.stride=vb;v.type=kd;v.w=pc;v.x=gd;v.y=Nc;v.z=ed;fd&&K.destroyStream(Tb);D.buffer=Gd;D.divisor=Bc;D.normalized=Dc;D.offset=Oc;D.size=$c;D.state=Tc;D.stride=Pc;D.type=Fb;D.w=Cb;D.x=Qc;D.y=Ic;D.z=Uc;da.vert=ec;da.frag=Xc;V.dirty=!0}}}}},{}],25:[function(u,y,v){var a=u("./sorted-object-keys");y.exports=function(b,g){for(var h=a(g),d=0;d<h.length;++d)b[h[d]]=
g[h[d]];return b}},{"./sorted-object-keys":34}],26:[function(u,y,v){function a(a,b,c,g,e,l){for(var u=0;u<b;++u)for(var v=a[u],n=0;n<c;++n)for(var E=v[n],r=0;r<g;++r)e[l++]=E[r]}function b(g,d,c,p,e){for(var l=1,u=c+1;u<d.length;++u)l*=d[u];var v=d[c];if(4===d.length-c){var n=d[c+1],E=d[c+2];d=d[c+3];for(u=0;u<v;++u)a(g[u],n,E,d,p,e),e+=l}else for(u=0;u<v;++u)b(g[u],d,c+1,p,e),e+=l}var g=u("./pool");y.exports={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);return b},flatten:function(h,
d,c,p){var e=1;if(d.length)for(var l=0;l<d.length;++l)e*=d[l];else e=0;c=p||g.allocType(c,e);switch(d.length){case 0:break;case 1:p=d[0];for(d=0;d<p;++d)c[d]=h[d];break;case 2:p=d[0];d=d[1];for(l=e=0;l<p;++l)for(var u=h[l],v=0;v<d;++v)c[e++]=u[v];break;case 3:a(h,d[0],d[1],d[2],c,0);break;default:b(h,d,0,c,0)}return c}}},{"./pool":32}],27:[function(u,y,v){var a=u("./is-typed-array");y.exports=function(b){return Array.isArray(b)||a(b)}},{"./is-typed-array":30}],28:[function(u,y,v){var a=u("./is-typed-array");
y.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||a(b.data))}},{"./is-typed-array":30}],29:[function(u,y,v){y.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(u,y,v){y.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof
Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(u,y,v){y.exports=function(a,b){for(var g=Array(a),h=0;h<a;++h)g[h]=b(h);return g}},{}],32:[function(u,y,v){function a(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1}function b(){function b(d){a:{for(var e=16;268435456>=e;e*=16)if(d<=e){d=e;break a}d=0}e=c[a(d)>>2];return 0<e.length?e.pop():new ArrayBuffer(d)}function d(b){c[a(b.byteLength)>>2].push(b)}
var c=g(8,function(){return[]});return{alloc:b,free:d,allocType:function(a,c){var d=null;switch(a){case 5120:d=new Int8Array(b(c),0,c);break;case 5121:d=new Uint8Array(b(c),0,c);break;case 5122:d=new Int16Array(b(2*c),0,c);break;case 5123:d=new Uint16Array(b(2*c),0,c);break;case 5124:d=new Int32Array(b(4*c),0,c);break;case 5125:d=new Uint32Array(b(4*c),0,c);break;case 5126:d=new Float32Array(b(4*c),0,c);break;default:return null}return d.length!==c?d.subarray(0,c):d},freeType:function(a){d(a.buffer)}}}
var g=u("./loop");u=b();u.zero=b();y.exports=u},{"./loop":31}],33:[function(u,y,v){y.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(u,y,v){y.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(u,y,v){var a=u("./pool"),b=new Float32Array(1),g=new Uint32Array(b.buffer);y.exports=
function(h){for(var d=a.allocType(5123,h.length),c=0;c<h.length;++c)if(isNaN(h[c]))d[c]=65535;else if(Infinity===h[c])d[c]=31744;else if(-Infinity===h[c])d[c]=64512;else{b[0]=h[c];var p=g[0],e=p>>>31<<15,l=(p<<1>>>24)-127,p=p>>13&1023;d[c]=-24>l?e:-14>l?e+(p+1024>>-14-l):15<l?e+31744:e+(l+15<<10)+p}return d}},{"./pool":32}],36:[function(u,y,v){var a=u("./sorted-object-keys");y.exports=function(b){return a(b).map(function(a){return b[a]})}},{"./sorted-object-keys":34}],37:[function(u,y,v){function a(a,
b,d){function g(){var b=window.innerWidth,c=window.innerHeight;a!==document.body&&(c=h.getBoundingClientRect(),b=c.right-c.left,c=c.bottom-c.top);h.width=d*b;h.height=d*c}var h=document.createElement("canvas");c(h.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(h);a===document.body&&(h.style.position="absolute",c(a.style,{margin:0,padding:0}));var n;a!==document.body&&"function"===typeof ResizeObserver?(n=new ResizeObserver(function(){setTimeout(g)}),n.observe(a)):
window.addEventListener("resize",g,!1);g();return{canvas:h,onDestroy:function(){n?n.disconnect():window.removeEventListener("resize",g);a.removeChild(h)}}}function b(a,b){function c(d){try{return a.getContext(d,b)}catch(g){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function g(a){if("string"===typeof a)return a.split();d(Array.isArray(a),"invalid extension array");return a}function h(a){return"string"===typeof a?(d("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(a)):a}var d=u("./util/check"),c=u("./util/extend");y.exports=function(c){var e=c||{},l,u,v,n;c={};var E=[],r=[],C="undefined"===typeof window?1:window.devicePixelRatio,y=!1,D=function(a){a&&d.raise(a)},na=function(){};"string"===typeof e?(d("undefined"!==typeof document,"selector queries only supported in DOM environments"),l=document.querySelector(e),d(l,"invalid query string for element")):"object"===typeof e?"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&
"function"===typeof e.getBoundingClientRect?l=e:"function"===typeof e.drawArrays||"function"===typeof e.drawElements?(n=e,v=n.canvas):(d.constructor(e),"gl"in e?n=e.gl:"canvas"in e?v=h(e.canvas):"container"in e&&(u=h(e.container)),"attributes"in e&&(c=e.attributes,d.type(c,"object","invalid context attributes")),"extensions"in e&&(E=g(e.extensions)),"optionalExtensions"in e&&(r=g(e.optionalExtensions)),"onDone"in e&&(d.type(e.onDone,"function","invalid or missing onDone callback"),D=e.onDone),"profile"in
e&&(y=!!e.profile),"pixelRatio"in e&&(C=+e.pixelRatio,d(0<C,"invalid pixel ratio"))):d.raise("invalid arguments to regl");l&&("canvas"===l.nodeName.toLowerCase()?v=l:u=l);if(!n){if(!v){d("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");l=a(u||document.body,D,C);if(!l)return null;v=l.canvas;na=l.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);n=b(v,c)}return n?{gl:n,canvas:v,container:u,extensions:E,optionalExtensions:r,pixelRatio:C,
profile:y,onDone:D,onDestroy:na}:(na(),D("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(u,y,v){y.exports=function(a,b){var g=b[0],h=b[1],d=b[2],c=b[3],p=b[4],e=b[5],l=b[6],u=b[7],v=b[8],n=b[9],E=b[10],r=b[11],C=b[12],y=b[13],D=b[14],na=b[15];a[0]=e*(E*na-r*D)-n*(l*na-u*D)+y*(l*r-u*E);a[1]=-(h*(E*na-r*D)-n*(d*na-c*D)+y*(d*r-c*E));a[2]=h*(l*na-u*D)-e*(d*na-c*D)+y*(d*u-c*l);a[3]=-(h*(l*r-u*E)-e*
(d*r-c*E)+n*(d*u-c*l));a[4]=-(p*(E*na-r*D)-v*(l*na-u*D)+C*(l*r-u*E));a[5]=g*(E*na-r*D)-v*(d*na-c*D)+C*(d*r-c*E);a[6]=-(g*(l*na-u*D)-p*(d*na-c*D)+C*(d*u-c*l));a[7]=g*(l*r-u*E)-p*(d*r-c*E)+v*(d*u-c*l);a[8]=p*(n*na-r*y)-v*(e*na-u*y)+C*(e*r-u*n);a[9]=-(g*(n*na-r*y)-v*(h*na-c*y)+C*(h*r-c*n));a[10]=g*(e*na-u*y)-p*(h*na-c*y)+C*(h*u-c*e);a[11]=-(g*(e*r-u*n)-p*(h*r-c*n)+v*(h*u-c*e));a[12]=-(p*(n*D-E*y)-v*(e*D-l*y)+C*(e*E-l*n));a[13]=g*(n*D-E*y)-v*(h*D-d*y)+C*(h*E-d*n);a[14]=-(g*(e*D-l*y)-p*(h*D-d*y)+C*(h*
l-d*e));a[15]=g*(e*E-l*n)-p*(h*E-d*n)+v*(h*l-d*e);return a}},{}],39:[function(u,y,v){y.exports=function(a){var b=new Float32Array(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}},{}],40:[function(u,y,v){y.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];
a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],41:[function(u,y,v){y.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],42:[function(u,y,v){y.exports=function(a){var b=a[0],g=a[1],h=a[2],d=a[3],c=a[4],p=a[5],e=a[6],l=a[7],u=a[8],v=a[9],n=a[10],E=a[11],r=a[12],C=a[13],y=a[14];a=a[15];return(b*p-g*c)*(n*a-E*y)-(b*e-h*c)*(v*a-E*C)+(b*l-d*c)*(v*y-n*C)+(g*e-h*p)*(u*a-E*r)-
(g*l-d*p)*(u*y-n*r)+(h*l-d*e)*(u*C-v*r)}},{}],43:[function(u,y,v){y.exports=function(a,b){var g=b[0],h=b[1],d=b[2],c=b[3],p=g+g,e=h+h,l=d+d,g=g*p,u=h*p,h=h*e,v=d*p,n=d*e,d=d*l,p=c*p,e=c*e,c=c*l;a[0]=1-h-d;a[1]=u+c;a[2]=v-e;a[3]=0;a[4]=u-c;a[5]=1-g-d;a[6]=n+p;a[7]=0;a[8]=v+e;a[9]=n-p;a[10]=1-g-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],44:[function(u,y,v){y.exports=function(a,b,g){var h,d,c=g[0],p=g[1];g=g[2];h=Math.sqrt(c*c+p*p+g*g);if(1E-6>Math.abs(h))return null;h=1/h;c*=h;p*=h;g*=
h;h=Math.sin(b);b=Math.cos(b);d=1-b;a[0]=c*c*d+b;a[1]=p*c*d+g*h;a[2]=g*c*d-p*h;a[3]=0;a[4]=c*p*d-g*h;a[5]=p*p*d+b;a[6]=g*p*d+c*h;a[7]=0;a[8]=c*g*d+p*h;a[9]=p*g*d-c*h;a[10]=g*g*d+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],45:[function(u,y,v){y.exports=function(a,b,g){var h=b[0],d=b[1],c=b[2],p=b[3],e=h+h,l=d+d,u=c+c;b=h*e;var v=h*l,h=h*u,n=d*l,d=d*u,c=c*u,e=p*e,l=p*l,p=p*u;a[0]=1-(n+c);a[1]=v+p;a[2]=h-l;a[3]=0;a[4]=v-p;a[5]=1-(b+c);a[6]=d+e;a[7]=0;a[8]=h+l;a[9]=d-e;a[10]=1-(b+n);a[11]=
0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}},{}],46:[function(u,y,v){y.exports=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],47:[function(u,y,v){y.exports=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}},{}],48:[function(u,y,v){y.exports=function(a,b){var g=Math.sin(b),h=Math.cos(b);
a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],49:[function(u,y,v){y.exports=function(a,b){var g=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(u,y,v){y.exports=function(a,b){var g=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=
0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(u,y,v){y.exports=function(a,b,g,h,d,c,p){var e=1/(g-b),l=1/(d-h),u=1/(c-p);a[0]=2*c*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*c*l;a[6]=0;a[7]=0;a[8]=(g+b)*e;a[9]=(d+h)*l;a[10]=(p+c)*u;a[11]=-1;a[12]=0;a[13]=0;a[14]=p*c*2*u;a[15]=0;return a}},{}],52:[function(u,y,v){y.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(u,y,v){y.exports=
{create:u("./create"),clone:u("./clone"),copy:u("./copy"),identity:u("./identity"),transpose:u("./transpose"),invert:u("./invert"),adjoint:u("./adjoint"),determinant:u("./determinant"),multiply:u("./multiply"),translate:u("./translate"),scale:u("./scale"),rotate:u("./rotate"),rotateX:u("./rotateX"),rotateY:u("./rotateY"),rotateZ:u("./rotateZ"),fromRotation:u("./fromRotation"),fromRotationTranslation:u("./fromRotationTranslation"),fromScaling:u("./fromScaling"),fromTranslation:u("./fromTranslation"),
fromXRotation:u("./fromXRotation"),fromYRotation:u("./fromYRotation"),fromZRotation:u("./fromZRotation"),fromQuat:u("./fromQuat"),frustum:u("./frustum"),perspective:u("./perspective"),perspectiveFromFieldOfView:u("./perspectiveFromFieldOfView"),ortho:u("./ortho"),lookAt:u("./lookAt"),str:u("./str")}},{"./adjoint":38,"./clone":39,"./copy":40,"./create":41,"./determinant":42,"./fromQuat":43,"./fromRotation":44,"./fromRotationTranslation":45,"./fromScaling":46,"./fromTranslation":47,"./fromXRotation":48,
"./fromYRotation":49,"./fromZRotation":50,"./frustum":51,"./identity":52,"./invert":54,"./lookAt":55,"./multiply":56,"./ortho":57,"./perspective":58,"./perspectiveFromFieldOfView":59,"./rotate":60,"./rotateX":61,"./rotateY":62,"./rotateZ":63,"./scale":64,"./str":65,"./translate":66,"./transpose":67}],54:[function(u,y,v){y.exports=function(a,b){var g=b[0],h=b[1],d=b[2],c=b[3],p=b[4],e=b[5],l=b[6],u=b[7],v=b[8],n=b[9],y=b[10],r=b[11],C=b[12],S=b[13],D=b[14],na=b[15],oa=g*e-h*p,I=g*l-d*p,xa=g*u-c*p,
t=h*l-d*e,w=h*u-c*e,k=d*u-c*l,ca=v*S-n*C,L=v*D-y*C,P=v*na-r*C,A=n*D-y*S,ka=n*na-r*S,H=y*na-r*D,R=oa*H-I*ka+xa*A+t*P-w*L+k*ca;if(!R)return null;R=1/R;a[0]=(e*H-l*ka+u*A)*R;a[1]=(d*ka-h*H-c*A)*R;a[2]=(S*k-D*w+na*t)*R;a[3]=(y*w-n*k-r*t)*R;a[4]=(l*P-p*H-u*L)*R;a[5]=(g*H-d*P+c*L)*R;a[6]=(D*xa-C*k-na*I)*R;a[7]=(v*k-y*xa+r*I)*R;a[8]=(p*ka-e*P+u*ca)*R;a[9]=(h*P-g*ka-c*ca)*R;a[10]=(C*w-S*xa+na*oa)*R;a[11]=(n*xa-v*w-r*oa)*R;a[12]=(e*L-p*A-l*ca)*R;a[13]=(g*A-h*L+d*ca)*R;a[14]=(S*I-C*t-D*oa)*R;a[15]=(v*t-n*I+
y*oa)*R;return a}},{}],55:[function(u,y,v){var a=u("./identity");y.exports=function(b,g,h,d){var c,p,e,l,u,v,n,y,r=g[0],C=g[1];g=g[2];e=d[0];l=d[1];p=d[2];n=h[0];d=h[1];c=h[2];if(1E-6>Math.abs(r-n)&&1E-6>Math.abs(C-d)&&1E-6>Math.abs(g-c))return a(b);h=r-n;d=C-d;n=g-c;y=1/Math.sqrt(h*h+d*d+n*n);h*=y;d*=y;n*=y;c=l*n-p*d;p=p*h-e*n;e=e*d-l*h;(y=Math.sqrt(c*c+p*p+e*e))?(y=1/y,c*=y,p*=y,e*=y):e=p=c=0;l=d*e-n*p;u=n*c-h*e;v=h*p-d*c;(y=Math.sqrt(l*l+u*u+v*v))?(y=1/y,l*=y,u*=y,v*=y):v=u=l=0;b[0]=c;b[1]=l;b[2]=
h;b[3]=0;b[4]=p;b[5]=u;b[6]=d;b[7]=0;b[8]=e;b[9]=v;b[10]=n;b[11]=0;b[12]=-(c*r+p*C+e*g);b[13]=-(l*r+u*C+v*g);b[14]=-(h*r+d*C+n*g);b[15]=1;return b}},{"./identity":52}],56:[function(u,y,v){y.exports=function(a,b,g){var h=b[0],d=b[1],c=b[2],p=b[3],e=b[4],l=b[5],u=b[6],v=b[7],n=b[8],y=b[9],r=b[10],C=b[11],S=b[12],D=b[13],na=b[14];b=b[15];var oa=g[0],I=g[1],xa=g[2],t=g[3];a[0]=oa*h+I*e+xa*n+t*S;a[1]=oa*d+I*l+xa*y+t*D;a[2]=oa*c+I*u+xa*r+t*na;a[3]=oa*p+I*v+xa*C+t*b;oa=g[4];I=g[5];xa=g[6];t=g[7];a[4]=oa*
h+I*e+xa*n+t*S;a[5]=oa*d+I*l+xa*y+t*D;a[6]=oa*c+I*u+xa*r+t*na;a[7]=oa*p+I*v+xa*C+t*b;oa=g[8];I=g[9];xa=g[10];t=g[11];a[8]=oa*h+I*e+xa*n+t*S;a[9]=oa*d+I*l+xa*y+t*D;a[10]=oa*c+I*u+xa*r+t*na;a[11]=oa*p+I*v+xa*C+t*b;oa=g[12];I=g[13];xa=g[14];t=g[15];a[12]=oa*h+I*e+xa*n+t*S;a[13]=oa*d+I*l+xa*y+t*D;a[14]=oa*c+I*u+xa*r+t*na;a[15]=oa*p+I*v+xa*C+t*b;return a}},{}],57:[function(u,y,v){y.exports=function(a,b,g,h,d,c,p){var e=1/(b-g),l=1/(h-d),u=1/(c-p);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;
a[7]=0;a[8]=0;a[9]=0;a[10]=2*u;a[11]=0;a[12]=(b+g)*e;a[13]=(d+h)*l;a[14]=(p+c)*u;a[15]=1;return a}},{}],58:[function(u,y,v){y.exports=function(a,b,g,h,d){b=1/Math.tan(b/2);var c=1/(h-d);a[0]=b/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+h)*c;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*h*c;a[15]=0;return a}},{}],59:[function(u,y,v){y.exports=function(a,b,g,h){var d=Math.tan(b.upDegrees*Math.PI/180),c=Math.tan(b.downDegrees*Math.PI/180),p=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var e=2/(p+b),l=2/(d+c);a[0]=e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=0;a[7]=0;a[8]=-((p-b)*e*.5);a[9]=(d-c)*l*.5;a[10]=h/(g-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*g/(g-h);a[15]=0;return a}},{}],60:[function(u,y,v){y.exports=function(a,b,g,h){var d=h[0],c=h[1];h=h[2];var p=Math.sqrt(d*d+c*c+h*h),e,l,u,v,n,y,r,C,S,D,na,oa,I,xa,t,w,k,ca,L,P;if(1E-6>Math.abs(p))return null;p=1/p;d*=p;c*=p;h*=p;e=Math.sin(g);l=Math.cos(g);u=1-l;g=b[0];p=b[1];v=b[2];n=b[3];y=b[4];r=b[5];C=b[6];S=b[7];D=b[8];
na=b[9];oa=b[10];I=b[11];xa=d*d*u+l;t=c*d*u+h*e;w=h*d*u-c*e;k=d*c*u-h*e;ca=c*c*u+l;L=h*c*u+d*e;P=d*h*u+c*e;d=c*h*u-d*e;c=h*h*u+l;a[0]=g*xa+y*t+D*w;a[1]=p*xa+r*t+na*w;a[2]=v*xa+C*t+oa*w;a[3]=n*xa+S*t+I*w;a[4]=g*k+y*ca+D*L;a[5]=p*k+r*ca+na*L;a[6]=v*k+C*ca+oa*L;a[7]=n*k+S*ca+I*L;a[8]=g*P+y*d+D*c;a[9]=p*P+r*d+na*c;a[10]=v*P+C*d+oa*c;a[11]=n*P+S*d+I*c;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}},{}],61:[function(u,y,v){y.exports=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var d=
b[4],c=b[5],p=b[6],e=b[7],l=b[8],u=b[9],v=b[10],n=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=d*g+l*h;a[5]=c*g+u*h;a[6]=p*g+v*h;a[7]=e*g+n*h;a[8]=l*g-d*h;a[9]=u*g-c*h;a[10]=v*g-p*h;a[11]=n*g-e*h;return a}},{}],62:[function(u,y,v){y.exports=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var d=b[0],c=b[1],p=b[2],e=b[3],l=b[8],u=b[9],v=b[10],n=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=
b[15]);a[0]=d*g-l*h;a[1]=c*g-u*h;a[2]=p*g-v*h;a[3]=e*g-n*h;a[8]=d*h+l*g;a[9]=c*h+u*g;a[10]=p*h+v*g;a[11]=e*h+n*g;return a}},{}],63:[function(u,y,v){y.exports=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var d=b[0],c=b[1],p=b[2],e=b[3],l=b[4],u=b[5],v=b[6],n=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*g+l*h;a[1]=c*g+u*h;a[2]=p*g+v*h;a[3]=e*g+n*h;a[4]=l*g-d*h;a[5]=u*g-c*h;a[6]=v*g-p*h;a[7]=n*g-e*h;return a}},{}],64:[function(u,
y,v){y.exports=function(a,b,g){var h=g[0],d=g[1];g=g[2];a[0]=b[0]*h;a[1]=b[1]*h;a[2]=b[2]*h;a[3]=b[3]*h;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],65:[function(u,y,v){y.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],66:[function(u,
y,v){y.exports=function(a,b,g){var h=g[0],d=g[1];g=g[2];var c,p,e,l,u,v,n,y,r,C,S,D;b===a?(a[12]=b[0]*h+b[4]*d+b[8]*g+b[12],a[13]=b[1]*h+b[5]*d+b[9]*g+b[13],a[14]=b[2]*h+b[6]*d+b[10]*g+b[14],a[15]=b[3]*h+b[7]*d+b[11]*g+b[15]):(c=b[0],p=b[1],e=b[2],l=b[3],u=b[4],v=b[5],n=b[6],y=b[7],r=b[8],C=b[9],S=b[10],D=b[11],a[0]=c,a[1]=p,a[2]=e,a[3]=l,a[4]=u,a[5]=v,a[6]=n,a[7]=y,a[8]=r,a[9]=C,a[10]=S,a[11]=D,a[12]=c*h+u*d+r*g+b[12],a[13]=p*h+v*d+C*g+b[13],a[14]=e*h+n*d+S*g+b[14],a[15]=l*h+y*d+D*g+b[15]);return a}},
{}],67:[function(u,y,v){y.exports=function(a,b){if(a===b){var g=b[1],h=b[2],d=b[3],c=b[6],p=b[7],e=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=g;a[6]=b[9];a[7]=b[13];a[8]=h;a[9]=c;a[11]=b[14];a[12]=d;a[13]=p;a[14]=e}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}},{}],68:[function(u,y,v){function a(a,d,e,g){g[0]=b(255*a);g[1]=b(255*d);g[2]=b(255*e)}var b=Math.round,
g=Math.min,h=Math.max,d=Math.ceil;y.exports=function(b,p,e,l){l=l||[0,0,0];b%=360;p=h(0,g(p,1));e=h(0,g(e,1));if(p){p=(1-p)*e;var u=e-p,v=b%60;switch(b/60|0){case 0:a(e,u*b/60+p,p,l);break;case 1:a(u*(60-v)/60+p,e,p,l);break;case 2:a(p,e,u*v/60+p,l);break;case 3:a(p,u*(60-v)/60+p,e,l);break;case 4:a(u*v/60+p,p,e,l);break;case 5:a(e,p,u*(60-v)/60+p,l)}}else l[0]=l[1]=l[2]=d(255*e);return l}},{}],69:[function(u,y,v){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var b=u("./lib/util/check"),
g=u("./lib/util/extend"),h=u("./lib/dynamic"),d=u("./lib/util/raf"),c=u("./lib/util/clock"),p=u("./lib/strings"),e=u("./lib/webgl"),l=u("./lib/extension"),pa=u("./lib/limits"),W=u("./lib/buffer"),n=u("./lib/elements"),E=u("./lib/texture"),r=u("./lib/renderbuffer"),C=u("./lib/framebuffer"),S=u("./lib/attribute"),D=u("./lib/shader"),na=u("./lib/read"),oa=u("./lib/core"),I=u("./lib/stats"),xa=u("./lib/timer");y.exports=function(t){function u(){if(0===ib.length)K&&K.update(),nc=null;else{nc=d.next(u);
f();for(var a=ib.length-1;0<=a;--a){var b=ib[a];b&&b(J,null,0)}ja.flush();K&&K.update()}}function k(){!nc&&0<ib.length&&(nc=d.next(u))}function v(){nc&&(d.cancel(u),nc=null)}function y(a){a.preventDefault();gd=!0;v();ea.forEach(function(a){a()})}function P(a){ja.getError();gd=!1;qc.restore();ha.restore();Za.restore();da.restore();Aa.restore();Qa.restore();z.restore();K&&K.restore();bc.procs.refresh();k();va.forEach(function(a){a()})}function A(a){function c(a,b){var e={},d={};Object.keys(a).forEach(function(c){var f=
a[c];if(h.isDynamic(f))d[c]=h.unbox(f,c);else{if(b&&Array.isArray(f))for(var g=0;g<f.length;++g)if(h.isDynamic(f[g])){d[c]=h.unbox(f,c);return}e[c]=f}});return{dynamic:d,"static":e}}function e(a){for(;t.length<a;)t.push(null);return t}b(!!a,"invalid args to regl({...})");b.type(a,"object","invalid args to regl({...})");var d=c(a.context||{},!0),f=c(a.uniforms||{},!0),k=c(a.attributes||{},!1);a=c(function(a){function b(a){if(a in c){var e=c[a];delete c[a];Object.keys(e).forEach(function(b){c[a+"."+
b]=e[b]})}}var c=g({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var l={gpuTime:0,cpuTime:0,count:0},m=bc.compile(a,k,f,d,l),n=m.draw,p=m.batch,r=m.scope,t=[];return g(function(a,c){var d;gd&&b.raise("context lost");if("function"===typeof a)return r.call(this,
null,a,0);if("function"===typeof c)if("number"===typeof a)for(d=0;d<a;++d)r.call(this,null,c,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)r.call(this,a[d],c,d);else return r.call(this,a,c,0);else if("number"===typeof a){if(0<a)return p.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return p.call(this,a,a.length)}else return n.call(this,a)},{stats:l,destroy:function(){m.destroy()}})}function ka(a,c){var d=0;bc.procs.poll();var e=c.color;e&&(ja.clearColor(+e[0]||0,+e[1]||0,+e[2]||
0,+e[3]||0),d|=16384);"depth"in c&&(ja.clearDepth(+c.depth),d|=256);"stencil"in c&&(ja.clearStencil(c.stencil|0),d|=1024);b(!!d,"called regl.clear with no buffer specified");ja.clear(d)}function H(c){b.type(c,"function","regl.frame() callback must be a function");ib.push(c);k();return{cancel:function(){function d(){var b=a(ib,d);ib[b]=ib[ib.length-1];--ib.length;0>=ib.length&&v()}var e=a(ib,c);b(0<=e,"cannot cancel a frame twice");ib[e]=d}}}function R(){var a=Ua.viewport,b=Ua.scissor_box;a[0]=a[1]=
b[0]=b[1]=0;J.viewportWidth=J.framebufferWidth=J.drawingBufferWidth=a[2]=b[2]=ja.drawingBufferWidth;J.viewportHeight=J.framebufferHeight=J.drawingBufferHeight=a[3]=b[3]=ja.drawingBufferHeight}function f(){J.tick+=1;J.time=Q();R();bc.procs.poll()}function m(){da.refresh();R();bc.procs.refresh();K&&K.update()}function Q(){return(c()-N)/1E3}t=e(t);if(!t)return null;var ja=t.gl,ma=ja.getContextAttributes(),gd=ja.isContextLost(),qc=l(ja,t);if(!qc)return null;var la=p(),Pa=I(),Z=qc.extensions,K=xa(ja,Z),
N=c(),V=ja.drawingBufferWidth,sa=ja.drawingBufferHeight,J={tick:0,time:0,viewportWidth:V,viewportHeight:sa,framebufferWidth:V,framebufferHeight:sa,drawingBufferWidth:V,drawingBufferHeight:sa,pixelRatio:t.pixelRatio},V={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ub=pa(ja,Z),Za=W(ja,Pa,t,function(a){return z.destroyBuffer(a)}),T=n(ja,Z,Za,Pa),z=S(ja,Z,Ub,Pa,Za,T,V),ha=D(ja,la,Pa,t),da=E(ja,Z,Ub,function(){bc.procs.poll()},J,Pa,t),Aa=r(ja,Z,Ub,Pa,t),Qa=C(ja,Z,Ub,da,Aa,Pa),bc=oa(ja,la,
Z,Ub,Za,T,da,Qa,{},z,ha,V,J,K,t),la=na(ja,Qa,bc.procs.poll,J,ma,Z,Ub),Ua=bc.next,Y=ja.canvas,ib=[],ea=[],va=[],$b=[t.onDestroy],nc=null;Y&&(Y.addEventListener("webglcontextlost",y,!1),Y.addEventListener("webglcontextrestored",P,!1));var jc=Qa.setFBO=A({framebuffer:h.define.call(null,1,"framebuffer")});m();ma=g(A,{clear:function(a){b("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var c=0;6>c;++c)jc(g({framebuffer:a.framebuffer.faces[c]},
a),ka);else jc(a,ka);else ka(null,a)},prop:h.define.bind(null,1),context:h.define.bind(null,2),"this":h.define.bind(null,3),draw:A({}),buffer:function(a){return Za.create(a,34962,!1,!1)},elements:function(a){return T.create(a,!1)},texture:da.create2D,cube:da.createCube,renderbuffer:Aa.create,framebuffer:Qa.create,framebufferCube:Qa.createCube,vao:z.createVAO,attributes:ma,frame:H,on:function(a,c){b.type(c,"function","listener callback must be a function");var d;switch(a){case "frame":return H(c);
case "lost":d=ea;break;case "restore":d=va;break;case "destroy":d=$b;break;default:b.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(c);return{cancel:function(){for(var a=0;a<d.length;++a)if(d[a]===c){d[a]=d[d.length-1];d.pop();break}}}},limits:Ub,hasExtension:function(a){return 0<=Ub.extensions.indexOf(a.toLowerCase())},read:la,destroy:function(){ib.length=0;v();Y&&(Y.removeEventListener("webglcontextlost",y),Y.removeEventListener("webglcontextrestored",P));ha.clear();Qa.clear();
Aa.clear();z.clear();da.clear();T.clear();Za.clear();K&&K.clear();$b.forEach(function(a){a()})},_gl:ja,_refresh:m,poll:function(){f();K&&K.update()},now:Q,stats:Pa});t.onDone(null,ma);return ma}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,
"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

<!DOCTYPE html>
      <html>
        <head>
          <title>example/life.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function z(aa,jc,c){function ba(g,b){if(!jc[g]){if(!aa[g]){var x="function"==typeof require&&require;if(!b&&x)return x(g,!0);if(r)return r(g,!0);x=Error("Cannot find module '"+g+"'");throw x.code="MODULE_NOT_FOUND",x;}x=jc[g]={exports:{}};aa[g][0].call(x.exports,function(b){return ba(aa[g][1][b]||b)},x,x.exports,z,aa,jc,c)}return jc[g].exports}for(var r="function"==typeof require&&require,N=0;N<c.length;N++)ba(c[N]);return ba}return z})()({1:[function(z,aa,jc){var c=z("../regl")(),ba=
Array(1048576).fill(0).map(function(){return.9<Math.random()?255:0}),r=Array(2).fill().map(function(){return c.framebuffer({color:c.texture({radius:512,data:ba,wrap:"repeat"}),depthStencil:!1})}),N=c({frag:"\n  precision mediump float;\n  uniform sampler2D prevState;\n  varying vec2 uv;\n  void main() {\n    float n = 0.0;\n    for(int dx=-1; dx<=1; ++dx)\n    for(int dy=-1; dy<=1; ++dy) {\n      n += texture2D(prevState, uv+vec2(dx,dy)/float(512)).r;\n    }\n    float s = texture2D(prevState, uv).r;\n    if(n > 3.0+s || n < 3.0) {\n      gl_FragColor = vec4(0,0,0,1);\n    } else {\n      gl_FragColor = vec4(1,1,1,1);\n    }\n  }",
framebuffer:function(b){return r[(b.tick+1)%2]}}),g=c({frag:"\n  precision mediump float;\n  uniform sampler2D prevState;\n  varying vec2 uv;\n  void main() {\n    float state = texture2D(prevState, uv).r;\n    gl_FragColor = vec4(vec3(state), 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main() {\n    uv = 0.5 * (position + 1.0);\n    gl_Position = vec4(position, 0, 1);\n  }",attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{prevState:function(b){return r[b.tick%
2]}},depth:{enable:!1},count:3});c.frame(function(){g(function(){c.draw();N()})})},{"../regl":38}],2:[function(z,aa,jc){function c(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var ba=z("./util/sorted-object-keys"),r=z("./util/check"),N=z("./util/values"),g=z("./constants/dtypes.json"),b=z("./util/is-typed-array"),x=z("./util/is-ndarray"),d=z("./constants/primitives.json"),v="attributes elements offset count primitive instances".split(" ");
aa.exports=function(na,da,K,E,u,A,H){function q(b){if(b!==T.currentVAO){var d=da.oes_vertex_array_object;b?d.bindVertexArrayOES(b.vao):d.bindVertexArrayOES(null);T.currentVAO=b}}function F(b){if(b!==T.currentVAO){if(b)b.bindAttrs();else{for(var d=da.angle_instanced_arrays,g=0;g<f.length;++g){var e=f[g];e.buffer?(na.enableVertexAttribArray(g),e.buffer.bind(),na.vertexAttribPointer(g,e.size,e.type,e.normalized,e.stride,e.offfset),d&&e.divisor&&d.vertexAttribDivisorANGLE(g,e.divisor)):(na.disableVertexAttribArray(g),
na.vertexAttrib4f(g,e.x,e.y,e.z,e.w))}H.elements?na.bindBuffer(34963,H.elements.buffer.buffer):na.bindBuffer(34963,null)}T.currentVAO=b}}function ca(){N(D).forEach(function(b){b.destroy()})}function I(){this.id=++e;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=da.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;D[this.id]=this;this.buffers=[]}function z(){da.oes_vertex_array_object&&N(D).forEach(function(b){b.refresh()})}
var h=K.maxAttributes,f=Array(h);for(K=0;K<h;++K)f[K]=new c;var e=0,D={},T={Record:c,scope:{},state:f,currentVAO:null,targetVAO:null,restore:da.oes_vertex_array_object?z:function(){},createVAO:function(e){function n(e){var V;if(Array.isArray(e))V=e,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{r("object"===typeof e,"invalid arguments for create vao");r("attributes"in e,"must specify attributes for vao");if(e.elements){var a=
e.elements;f.ownsElements?("function"===typeof a&&"elements"===a._reglType?f.elements.destroy():f.elements(a),f.ownsElements=!1):A.getElements(e.elements)?(f.elements=e.elements,f.ownsElements=!1):(f.elements=A.create(e.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;V=e.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in e&&(f.offset=e.offset|0);"count"in e&&(f.count=
e.count|0);"instances"in e&&(f.instances=e.instances|0);"primitive"in e&&(r(e.primitive in d,"bad primitive type: "+e.primitive),f.primitive=d[e.primitive]);r.optional(function(){for(var a=ba(e),b=0;b<a.length;++b)r(0<=v.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+v)});r(Array.isArray(V),"attributes must be an array")}r(V.length<h,"too many attributes");r(0<V.length,"must specify at least one attribute");var a={},l=f.attributes;l.length=V.length;for(var X=0;X<V.length;++X){var D=
V[X],q=l[X]=new c,I=D.data||D;if(Array.isArray(I)||b(I)||x(I)){var F;f.buffers[X]&&(F=f.buffers[X],b(I)&&F._buffer.byteLength>=I.byteLength?F.subdata(I):(F.destroy(),f.buffers[X]=null));f.buffers[X]||(F=f.buffers[X]=u.create(D,34962,!1,!0));q.buffer=u.getBuffer(F);q.size=q.buffer.dimension|0;q.normalized=!1;q.type=q.buffer.dtype;q.offset=0;q.stride=0;q.divisor=0;q.state=1;a[X]=1}else u.getBuffer(D)?(q.buffer=u.getBuffer(D),q.size=q.buffer.dimension|0,q.normalized=!1,q.type=q.buffer.dtype,q.offset=
0,q.stride=0,q.divisor=0,q.state=1):u.getBuffer(D.buffer)?(q.buffer=u.getBuffer(D.buffer),q.size=(+D.size||q.buffer.dimension)|0,q.normalized=!!D.normalized||!1,"type"in D?(r.parameter(D.type,g,"invalid buffer type"),q.type=g[D.type]):q.type=q.buffer.dtype,q.offset=(D.offset||0)|0,q.stride=(D.stride||0)|0,q.divisor=(D.divisor||0)|0,q.state=1,r(1<=q.size&&4>=q.size,"size must be between 1 and 4"),r(0<=q.offset,"invalid offset"),r(0<=q.stride&&255>=q.stride,"stride must be between 0 and 255"),r(0<=
q.divisor,"divisor must be positive"),r(!q.divisor||!!da.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in D?(r(0<X,"first attribute must not be a constant"),q.x=+D.x||0,q.y=+D.y||0,q.z=+D.z||0,q.w=+D.w||0,q.state=2):r(!1,"invalid attribute spec for location "+X)}for(F=0;F<f.buffers.length;++F)!a[F]&&f.buffers[F]&&(f.buffers[F].destroy(),f.buffers[F]=null);f.refresh();return n}var f=new I;E.vaoCount+=1;n.destroy=function(){for(var b=0;b<f.buffers.length;++b)f.buffers[b]&&
f.buffers[b].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};n._vao=f;n._reglType="vao";return n(e)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var d=0;d<f.length;++d){var e=f[d];e.buffer===b&&(na.disableVertexAttribArray(d),e.buffer=null)}},setVAO:da.oes_vertex_array_object?q:F,clear:da.oes_vertex_array_object?ca:function(){}};I.prototype.bindAttrs=function(){for(var b=da.angle_instanced_arrays,
d=this.attributes,e=0;e<d.length;++e){var g=d[e];g.buffer?(na.enableVertexAttribArray(e),na.bindBuffer(34962,g.buffer.buffer),na.vertexAttribPointer(e,g.size,g.type,g.normalized,g.stride,g.offset),b&&g.divisor&&b.vertexAttribDivisorANGLE(e,g.divisor)):(na.disableVertexAttribArray(e),na.vertexAttrib4f(e,g.x,g.y,g.z,g.w))}for(b=d.length;b<h;++b)na.disableVertexAttribArray(b);(b=A.getElements(this.elements))?na.bindBuffer(34963,b.buffer.buffer):na.bindBuffer(34963,null)};I.prototype.refresh=function(){var b=
da.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),T.currentVAO=null,b.bindVertexArrayOES(null))};I.prototype.destroy=function(){if(this.vao){var b=da.oes_vertex_array_object;this===T.currentVAO&&(T.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);D[this.id]&&(delete D[this.id],--E.vaoCount)};return T}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(z,aa,jc){function c(b){return K[Object.prototype.toString.call(b)]|0}function ba(b,d){for(var g=0;g<d.length;++g)b[g]=d[g]}function r(b,d,g,c,x,v,h){for(var f=0,e=0;e<g;++e)for(var D=0;D<c;++D)b[f++]=d[x*e+v*D+h]}var N=z("./util/sorted-object-keys"),g=z("./util/check"),b=z("./util/is-typed-array"),x=z("./util/is-ndarray"),d=z("./util/values"),v=z("./util/pool");jc=z("./util/flatten");
var na=jc.flatten,da=jc.shape,K=z("./constants/arraytypes.json"),E=z("./constants/dtypes.json"),u=z("./constants/usage.json"),A=[];A[5120]=1;A[5122]=2;A[5124]=4;A[5121]=1;A[5123]=2;A[5125]=4;A[5126]=4;aa.exports=function(K,q,F,ca){function I(b){this.id=e++;this.buffer=K.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;F.profile&&(this.stats={size:0})}function z(b,d,g){b.byteLength=d.byteLength;K.bufferData(b.type,d,g)}function h(d,
e,f,h,q,a){d.usage=f;if(Array.isArray(e)){if(d.dtype=h||5126,0<e.length)if(Array.isArray(e[0])){q=da(e);for(var l=h=1;l<q.length;++l)h*=q[l];d.dimension=h;e=na(e,q,d.dtype);z(d,e,f);a?d.persistentData=e:v.freeType(e)}else"number"===typeof e[0]?(d.dimension=q,q=v.allocType(d.dtype,e.length),ba(q,e),z(d,q,f),a?d.persistentData=q:v.freeType(q)):b(e[0])?(d.dimension=e[0].length,d.dtype=h||c(e[0])||5126,e=na(e,[e.length,e[0].length],d.dtype),z(d,e,f),a?d.persistentData=e:v.freeType(e)):g.raise("invalid buffer data")}else if(b(e))d.dtype=
h||c(e),d.dimension=q,z(d,e,f),a&&(d.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(x(e)){q=e.shape;var X=e.stride,l=e.offset,D=0,u=0,F=0,I=0;1===q.length?(D=q[0],u=1,F=X[0],I=0):2===q.length?(D=q[0],u=q[1],F=X[0],I=X[1]):g.raise("invalid shape");d.dtype=h||c(e.data)||5126;d.dimension=u;q=v.allocType(d.dtype,D*u);r(q,e.data,D,u,F,I,l);z(d,q,f);a?d.persistentData=q:v.freeType(q)}else e instanceof ArrayBuffer?(d.dtype=5121,d.dimension=q,z(d,e,f),a&&(d.persistentData=new Uint8Array(new Uint8Array(e)))):
g.raise("invalid buffer data")}function f(b){q.bufferCount--;ca(b);var d=b.buffer;g(d,"buffer must not be deleted already");K.deleteBuffer(d);b.buffer=null;delete D[b.id]}var e=0,D={};I.prototype.bind=function(){K.bindBuffer(this.type,this.buffer)};I.prototype.destroy=function(){f(this)};var T=[];F.profile&&(q.getTotalBufferSize=function(){var b=0;N(D).forEach(function(d){b+=D[d].stats.size});return b});return{create:function(d,e,T,L){function ca(a){var d=35044,e=null,f=0,n=0,q=1;Array.isArray(a)||
b(a)||x(a)||a instanceof ArrayBuffer?e=a:"number"===typeof a?f=a|0:a&&(g.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(g(null===e||Array.isArray(e)||b(e)||x(e),"invalid data for buffer"),e=a.data),"usage"in a&&(g.parameter(a.usage,u,"invalid buffer usage"),d=u[a.usage]),"type"in a&&(g.parameter(a.type,E,"invalid buffer type"),n=E[a.type]),"dimension"in a&&(g.type(a.dimension,"number","invalid dimension"),q=a.dimension|0),"length"in a&&(g.nni(f,"buffer length must be a nonnegative integer"),
f=a.length|0));l.bind();e?h(l,e,d,n,q,L):(f&&K.bufferData(l.type,f,d),l.dtype=n||5121,l.usage=d,l.dimension=q,l.byteLength=f);F.profile&&(l.stats.size=l.byteLength*A[l.dtype]);return ca}function a(a,b){g(b+a.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+b+" to a buffer of size "+l.byteLength);K.bufferSubData(l.type,b,a)}q.bufferCount++;var l=new I(e);D[l.id]=l;T||ca(d);ca._reglType="buffer";ca._buffer=
l;ca.subdata=function(d,e){var f=(e||0)|0,n;l.bind();if(b(d)||d instanceof ArrayBuffer)a(d,f);else if(Array.isArray(d)){if(0<d.length)if("number"===typeof d[0]){var h=v.allocType(l.dtype,d.length);ba(h,d);a(h,f);v.freeType(h)}else Array.isArray(d[0])||b(d[0])?(n=da(d),h=na(d,n,l.dtype),a(h,f),v.freeType(h)):g.raise("invalid buffer data")}else if(x(d)){n=d.shape;var q=d.stride,D=h=0,u=0,F=0;1===n.length?(h=n[0],D=1,u=q[0],F=0):2===n.length?(h=n[0],D=n[1],u=q[0],F=q[1]):g.raise("invalid shape");n=Array.isArray(d.data)?
l.dtype:c(d.data);n=v.allocType(n,h*D);r(n,d.data,h,D,u,F,d.offset);a(n,f);v.freeType(n)}else g.raise("invalid data for buffer subdata");return ca};F.profile&&(ca.stats=l.stats);ca.destroy=function(){f(l)};return ca},createStream:function(d,b){var e=T.pop();e||(e=new I(d));e.bind();h(e,b,35040,0,1,!1);return e},destroyStream:function(d){T.push(d)},clear:function(){d(D).forEach(f);T.forEach(f)},getBuffer:function(d){return d&&d._buffer instanceof I?d._buffer:null},restore:function(){d(D).forEach(function(d){d.buffer=
K.createBuffer();K.bindBuffer(d.type,d.buffer);K.bufferData(d.type,d.persistentData||d.byteLength,d.usage)})},_initBuffer:h}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(z,aa,jc){aa.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(z,aa,jc){aa.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(z,aa,jc){aa.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(z,aa,jc){aa.exports=
{"static":35044,dynamic:35048,stream:35040}},{}],8:[function(z,aa,jc){function c(d){return Array.isArray(d)||K(d)||E(d)}function ba(d){return d.sort(function(d,b){return"viewport"===d?-1:"viewport"===b?1:d<b?-1:1})}function r(d,b,e,g){this.thisDep=d;this.contextDep=b;this.propDep=e;this.append=g}function N(d){return d&&!(d.thisDep||d.contextDep||d.propDep)}function g(d){return new r(!1,!1,!1,d)}function b(d,b){var e=d.type;if(0===e)return e=d.data.length,new r(!0,1<=e,2<=e,b);if(4===e)return e=d.data,
new r(e.thisDep,e.contextDep,e.propDep,b);if(5===e)return new r(!1,!1,!1,b);if(6===e){for(var g=e=!1,f=!1,a=0;a<d.data.length;++a){var l=d.data[a];1===l.type?f=!0:2===l.type?g=!0:3===l.type?e=!0:0===l.type?(e=!0,l=l.data,1<=l&&(g=!0),2<=l&&(f=!0)):4===l.type&&(e=e||l.data.thisDep,g=g||l.data.contextDep,f=f||l.data.propDep)}return new r(e,g,f,b)}return new r(3===e,2===e,1===e,b)}var x=z("./util/sorted-object-keys"),d=z("./util/check"),v=z("./util/extend"),na=z("./util/codegen"),da=z("./util/loop"),
K=z("./util/is-typed-array"),E=z("./util/is-ndarray"),u=z("./util/is-array-like"),A=z("./dynamic"),H=z("./constants/primitives.json"),q=z("./constants/dtypes.json"),F=["x","y","z","w"],ca="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),I={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Id="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),h={never:512,less:513,
"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},f={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},e={frag:35632,vert:35633},D={cw:2304,ccw:2305},T=new r(!1,!1,!1,function(){});aa.exports=function(K,n,E,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa,Y){function O(d){return d.replace(".","_")}function M(d,p,a){var b=O(d);Z.push(d);m[b]=G[b]=!!a;
y[b]=p}function R(d,p,b){var a=O(d);Z.push(d);Array.isArray(b)?(G[a]=b.slice(),m[a]=b.slice()):G[a]=m[a]=b;ja[a]=p}function z(){var b=na(),p=b.link,a=b.global;b.id=tc++;b.batchId="0";var e=p(pa),y=b.shared={props:"a0"};x(pa).forEach(function(d){y[d]=a.def(e,".",d)});d.optional(function(){b.CHECK=p(d);b.commandStr=d.guessCommand();b.command=p(b.commandStr);b.assert=function(d,b,a){d("if(!(",b,"))",this.CHECK,".commandRaise(",p(a),",",this.command,");")};k.invalidBlendCombinations=Id});var g=b.next=
{},l=b.current={};x(ja).forEach(function(d){Array.isArray(G[d])&&(g[d]=a.def(y.next,".",d),l[d]=a.def(y.current,".",d))});var f=b.constants={};x(k).forEach(function(d){f[d]=a.def(JSON.stringify(k[d]))});b.invoke=function(d,a){switch(a.type){case 0:var e=["this",y.context,y.props,b.batchId];return d.def(p(a.data),".call(",e.slice(0,Math.max(a.data.length+1,4)),")");case 1:return d.def(y.props,a.data);case 2:return d.def(y.context,a.data);case 3:return d.def("this",a.data);case 4:return a.data.append(b,
d),a.data.ref;case 5:return a.data.toString();case 6:return a.data.map(function(a){return b.invoke(d,a)})}};b.attribCache={};var Ed={};b.scopeAttrib=function(d){d=n.id(d);if(d in Ed)return Ed[d];var b=Ka.scope[d];b||(b=Ka.scope[d]=new ia);return Ed[d]=p(b)};return b}function J(d){var a=d["static"];d=d.dynamic;var e;if("profile"in a){var k=!!a.profile;e=g(function(d,b){return k});e.enable=k}else if("profile"in d){var y=d.profile;e=b(y,function(d,b){return d.invoke(b,y)})}return e}function Ob(a,p){var e=
a["static"],k=a.dynamic;if("framebuffer"in e){var y=e.framebuffer;return y?(y=X.getFramebuffer(y),d.command(y,"invalid framebuffer object"),g(function(d,b){var a=d.link(y),p=d.shared;b.set(p.framebuffer,".next",a);p=p.context;b.set(p,".framebufferWidth",a+".width");b.set(p,".framebufferHeight",a+".height");return a})):g(function(d,b){var a=d.shared;b.set(a.framebuffer,".next","null");a=a.context;b.set(a,".framebufferWidth",a+".drawingBufferWidth");b.set(a,".framebufferHeight",a+".drawingBufferHeight");
return"null"})}if("framebuffer"in k){var l=k.framebuffer;return b(l,function(a,b){var p=a.invoke(b,l),e=a.shared,k=e.framebuffer,S=b.def(k,".getFramebuffer(",p,")");d.optional(function(){a.assert(b,"!"+p+"||"+S,"invalid framebuffer object")});b.set(k,".next",S);e=e.context;b.set(e,".framebufferWidth",S+"?"+S+".width:"+e+".drawingBufferWidth");b.set(e,".framebufferHeight",S+"?"+S+".height:"+e+".drawingBufferHeight");return S})}return null}function $a(a,p,e){function k(a){if(a in y){var S=y[a];d.commandType(S,
"object","invalid "+a,e.commandStr);var l=!0,qd=S.x|0,f=S.y|0,n,h;"width"in S?(n=S.width|0,d.command(0<=n,"invalid "+a,e.commandStr)):l=!1;"height"in S?(h=S.height|0,d.command(0<=h,"invalid "+a,e.commandStr)):l=!1;return new r(!l&&p&&p.thisDep,!l&&p&&p.contextDep,!l&&p&&p.propDep,function(d,a){var b=d.shared.context,p=n;"width"in S||(p=a.def(b,".","framebufferWidth","-",qd));var e=h;"height"in S||(e=a.def(b,".","framebufferHeight","-",f));return[qd,f,p,e]})}if(a in g){var m=g[a],l=b(m,function(b,
p){var e=b.invoke(p,m);d.optional(function(){b.assert(p,e+"&&typeof "+e+'==="object"',"invalid "+a)});var k=b.shared.context,S=p.def(e,".x|0"),y=p.def(e,".y|0"),g=p.def('"width" in ',e,"?",e,".width|0:","(",k,".","framebufferWidth","-",S,")"),l=p.def('"height" in ',e,"?",e,".height|0:","(",k,".","framebufferHeight","-",y,")");d.optional(function(){b.assert(p,g+">=0&&"+l+">=0","invalid "+a)});return[S,y,g,l]});p&&(l.thisDep=l.thisDep||p.thisDep,l.contextDep=l.contextDep||p.contextDep,l.propDep=l.propDep||
p.propDep);return l}return p?new r(p.thisDep,p.contextDep,p.propDep,function(d,a){var b=d.shared.context;return[0,0,a.def(b,".","framebufferWidth"),a.def(b,".","framebufferHeight")]}):null}var y=a["static"],g=a.dynamic;if(a=k("viewport")){var l=a;a=new r(a.thisDep,a.contextDep,a.propDep,function(d,a){var b=l.append(d,a),p=d.shared.context;a.set(p,".viewportWidth",b[2]);a.set(p,".viewportHeight",b[3]);return b})}return{viewport:a,scissor_box:k("scissor.box")}}function P(a,b){var e=a["static"];if("string"===
typeof e.frag&&"string"===typeof e.vert){if(0<x(b.dynamic).length)return null;var e=b["static"],k=x(e);if(0<k.length&&"number"===typeof e[k[0]]){for(var y=[],g=0;g<k.length;++g)d("number"===typeof e[k[g]],"must specify all vertex attribute locations when using vaos"),y.push([e[k[g]]|0,k[g]]);return y}}return null}function t(a,p,k){function y(a){if(a in l){var p=n.id(l[a]);d.optional(function(){cb.shader(e[a],p,d.guessCommand())});var k=g(function(){return p});k.id=p;return k}if(a in f){var S=f[a];
return b(S,function(b,p){var k=b.invoke(p,S),y=p.def(b.shared.strings,".id(",k,")");d.optional(function(){p(b.shared.shader,".shader(",e[a],",",y,",",b.command,");")});return y})}return null}var l=a["static"],f=a.dynamic,h=y("frag"),m=y("vert"),Ed=null;N(h)&&N(m)?(Ed=cb.program(m.id,h.id,null,k),a=g(function(a,d){return a.link(Ed)})):a=new r(h&&h.thisDep||m&&m.thisDep,h&&h.contextDep||m&&m.contextDep,h&&h.propDep||m&&m.propDep,function(a,b){var p=a.shared.shader,e;e=h?h.append(a,b):b.def(p,".","frag");
var k;k=m?m.append(a,b):b.def(p,".","vert");var y=p+".program("+k+","+e;d.optional(function(){y+=","+a.command});return b.def(y+")")});return{frag:h,vert:m,progVar:a,program:Ed}}function la(e,p){function k(a,e){if(a in y){var S=y[a]|0;e?f.offset=S:f.instances=S;d.command(!e||0<=S,"invalid "+a,p.commandStr);return g(function(a,d){e&&(a.OFFSET=S);return S})}if(a in l){var qd=l[a];return b(qd,function(b,p){var k=b.invoke(p,qd);e&&(b.OFFSET=k,d.optional(function(){b.assert(p,k+">=0","invalid "+a)}));
return k})}if(e){if(Ed)return g(function(a,d){return a.OFFSET=0});if(h)return new r(n.thisDep,n.contextDep,n.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(h)return new r(n.thisDep,n.contextDep,n.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var y=e["static"],l=e.dynamic,f={},h=!1,n=function(){if("vao"in y){var a=y.vao;null!==a&&null===Ka.getVAO(a)&&(a=Ka.createVAO(a));
h=!0;f.vao=a;return g(function(d){var b=Ka.getVAO(a);return b?d.link(b):"null"})}if("vao"in l){h=!0;var d=l.vao;return b(d,function(a,b){var p=a.invoke(b,d);return b.def(a.shared.vao+".getVAO("+p+")")})}return null}(),Ed=!1,m=function(){if("elements"in y){var e=y.elements;f.elements=e;if(c(e)){var k=f.elements=a.create(e,!0),e=a.getElements(k);Ed=!0}else e&&(e=a.getElements(e),Ed=!0,d.command(e,"invalid elements",p.commandStr));k=g(function(a,d){if(e){var b=a.link(e);return a.ELEMENTS=b}return a.ELEMENTS=
null});k.value=e;return k}if("elements"in l){Ed=!0;var S=l.elements;return b(S,function(a,b){var p=a.shared,e=p.isBufferArgs,p=p.elements,k=a.invoke(b,S),y=b.def("null"),e=b.def(e,"(",k,")"),g=a.cond(e).then(y,"=",p,".createStream(",k,");")["else"](y,"=",p,".getElements(",k,");");d.optional(function(){a.assert(g["else"],"!"+k+"||"+y,"invalid elements")});b.entry(g);b.exit(a.cond(e).then(p,".destroyStream(",y,");"));return a.ELEMENTS=y})}return h?new r(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao+
".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),qd=k("offset",!0),t=function(){if("primitive"in y){var a=y.primitive;f.primitive=a;d.commandParameter(a,H,"invalid primitve",p.commandStr);return g(function(b,d){return H[a]})}if("primitive"in l){var e=l.primitive;return b(e,function(a,b){var p=a.constants.primTypes,k=a.invoke(b,e);d.optional(function(){a.assert(b,k+" in "+p,"invalid primitive, must be one of "+x(H))});return b.def(p,"[",k,"]")})}return Ed?
N(m)?m.value?g(function(a,b){return b.def(a.ELEMENTS,".primType")}):g(function(){return 4}):new r(m.thisDep,m.contextDep,m.propDep,function(a,b){var d=a.ELEMENTS;return b.def(d,"?",d,".primType:",4)}):h?new r(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),q=function(){if("count"in y){var a=y.count|0;f.count=a;d.command("number"===typeof a&&0<=a,"invalid vertex count",p.commandStr);return g(function(){return a})}if("count"in
l){var e=l.count;return b(e,function(a,b){var p=a.invoke(b,e);d.optional(function(){a.assert(b,"typeof "+p+'==="number"&&'+p+">=0&&"+p+"===("+p+"|0)","invalid vertex count")});return p})}if(Ed){if(N(m)){if(m)return qd?new r(qd.thisDep,qd.contextDep,qd.propDep,function(a,b){var p=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);d.optional(function(){a.assert(b,p+">=0","invalid vertex offset/element buffer too small")});return p}):g(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var k=g(function(){return-1});
d.optional(function(){k.MISSING=!0});return k}var S=new r(m.thisDep||qd.thisDep,m.contextDep||qd.contextDep,m.propDep||qd.propDep,function(a,b){var d=a.ELEMENTS;return a.OFFSET?b.def(d,"?",d,".vertCount-",a.OFFSET,":-1"):b.def(d,"?",d,".vertCount:-1")});d.optional(function(){S.DYNAMIC=!0});return S}return h?new r(n.thisDep,n.contextDep,n.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),pa=k("instances",!1);return{elements:m,primitive:t,
count:q,instances:pa,offset:qd,vao:n,vaoActive:h,elementsActive:Ed,"static":f}}function fa(a,p){var e=a["static"],k=a.dynamic,y={};Z.forEach(function(a){function S(d,p){if(a in e){var f=d(e[a]);y[l]=g(function(){return f})}else if(a in k){var n=k[a];y[l]=b(n,function(a,b){return p(a,b,a.invoke(b,n))})}}var l=O(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return S(function(b){d.commandType(b,
"boolean",a,p.commandStr);return b},function(b,p,e){d.optional(function(){b.assert(p,"typeof "+e+'==="boolean"',"invalid flag "+a,b.commandStr)});return e});case "depth.func":return S(function(b){d.commandParameter(b,h,"invalid "+a,p.commandStr);return h[b]},function(b,p,e){var k=b.constants.compareFuncs;d.optional(function(){b.assert(p,e+" in "+k,"invalid "+a+", must be one of "+x(h))});return p.def(k,"[",e,"]")});case "depth.range":return S(function(a){d.command(u(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",p.commandStr);return a},function(a,b,p){d.optional(function(){a.assert(b,a.shared.isArrayLike+"("+p+")&&"+p+".length===2&&typeof "+p+'[0]==="number"&&typeof '+p+'[1]==="number"&&'+p+"[0]<="+p+"[1]","depth range must be a 2d array")});var e=b.def("+",p,"[0]"),k=b.def("+",p,"[1]");return[e,k]});case "blend.func":return S(function(a){d.commandType(a,"object","blend.func",p.commandStr);var b="srcRGB"in a?a.srcRGB:a.src,e="srcAlpha"in a?a.srcAlpha:
a.src,k="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;d.commandParameter(b,I,l+".srcRGB",p.commandStr);d.commandParameter(e,I,l+".srcAlpha",p.commandStr);d.commandParameter(k,I,l+".dstRGB",p.commandStr);d.commandParameter(a,I,l+".dstAlpha",p.commandStr);d.command(-1===Id.indexOf(b+", "+k),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+k+")",p.commandStr);return[I[b],I[k],I[e],I[a]]},function(b,p,e){function k(S,l){var g=p.def('"',S,l,'" in ',e,"?",e,".",S,l,":",e,".",
S);d.optional(function(){b.assert(p,g+" in "+y,"invalid "+a+"."+S+l+", must be one of "+x(I))});return g}var y=b.constants.blendFuncs;d.optional(function(){b.assert(p,e+"&&typeof "+e+'==="object"',"invalid blend func, must be an object")});var S=k("src","RGB"),l=k("dst","RGB");d.optional(function(){b.assert(p,b.constants.invalidBlendCombinations+".indexOf("+S+'+", "+'+l+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var g=p.def(y,"[",S,"]"),f=p.def(y,"[",k("src","Alpha"),"]"),
n=p.def(y,"[",l,"]"),h=p.def(y,"[",k("dst","Alpha"),"]");return[g,n,f,h]});case "blend.equation":return S(function(b){if("string"===typeof b)return d.commandParameter(b,ua,"invalid "+a,p.commandStr),[ua[b],ua[b]];if("object"===typeof b)return d.commandParameter(b.rgb,ua,a+".rgb",p.commandStr),d.commandParameter(b.alpha,ua,a+".alpha",p.commandStr),[ua[b.rgb],ua[b.alpha]];d.commandRaise("invalid blend.equation",p.commandStr)},function(b,p,e){var k=b.constants.blendEquations,y=p.def(),S=p.def(),l=b.cond("typeof ",
e,'==="string"');d.optional(function(){function d(a,p,e){b.assert(a,e+" in "+k,"invalid "+p+", must be one of "+x(ua))}d(l.then,a,e);b.assert(l["else"],e+"&&typeof "+e+'==="object"',"invalid "+a);d(l["else"],a+".rgb",e+".rgb");d(l["else"],a+".alpha",e+".alpha")});l.then(y,"=",S,"=",k,"[",e,"];");l["else"](y,"=",k,"[",e,".rgb];",S,"=",k,"[",e,".alpha];");p(l);return[y,S]});case "blend.color":return S(function(a){d.command(u(a)&&4===a.length,"blend.color must be a 4d array",p.commandStr);return da(4,
function(b){return+a[b]})},function(a,b,p){d.optional(function(){a.assert(b,a.shared.isArrayLike+"("+p+")&&"+p+".length===4","blend.color must be a 4d array")});return da(4,function(a){return b.def("+",p,"[",a,"]")})});case "stencil.mask":return S(function(a){d.commandType(a,"number",l,p.commandStr);return a|0},function(a,b,p){d.optional(function(){a.assert(b,"typeof "+p+'==="number"',"invalid stencil.mask")});return b.def(p,"|0")});case "stencil.func":return S(function(b){d.commandType(b,"object",
l,p.commandStr);var e=b.cmp||"keep",k=b.ref||0;b="mask"in b?b.mask:-1;d.commandParameter(e,h,a+".cmp",p.commandStr);d.commandType(k,"number",a+".ref",p.commandStr);d.commandType(b,"number",a+".mask",p.commandStr);return[h[e],k,b]},function(a,b,p){var e=a.constants.compareFuncs;d.optional(function(){function d(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}d(p+"&&typeof ",p,'==="object"');d('!("cmp" in ',p,")||(",p,".cmp in ",e,")")});var k=b.def('"cmp" in ',p,"?",e,"[",
p,".cmp]",":",7680),y=b.def(p,".ref|0"),S=b.def('"mask" in ',p,"?",p,".mask|0:-1");return[k,y,S]});case "stencil.opFront":case "stencil.opBack":return S(function(b){d.commandType(b,"object",l,p.commandStr);var e=b.fail||"keep",k=b.zfail||"keep";b=b.zpass||"keep";d.commandParameter(e,f,a+".fail",p.commandStr);d.commandParameter(k,f,a+".zfail",p.commandStr);d.commandParameter(b,f,a+".zpass",p.commandStr);return["stencil.opBack"===a?1029:1028,f[e],f[k],f[b]]},function(b,p,e){function k(S){d.optional(function(){b.assert(p,
'!("'+S+'" in '+e+")||("+e+"."+S+" in "+y+")","invalid "+a+"."+S+", must be one of "+x(f))});return p.def('"',S,'" in ',e,"?",y,"[",e,".",S,"]:",7680)}var y=b.constants.stencilOps;d.optional(function(){b.assert(p,e+"&&typeof "+e+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,k("fail"),k("zfail"),k("zpass")]});case "polygonOffset.offset":return S(function(a){d.commandType(a,"object",l,p.commandStr);var b=a.factor|0;a=a.units|0;d.commandType(b,"number",l+".factor",p.commandStr);
d.commandType(a,"number",l+".units",p.commandStr);return[b,a]},function(b,p,e){d.optional(function(){b.assert(p,e+"&&typeof "+e+'==="object"',"invalid "+a)});var k=p.def(e,".factor|0"),y=p.def(e,".units|0");return[k,y]});case "cull.face":return S(function(a){var b=0;"front"===a?b=1028:"back"===a&&(b=1029);d.command(!!b,l,p.commandStr);return b},function(a,b,p){d.optional(function(){a.assert(b,p+'==="front"||'+p+'==="back"',"invalid cull.face")});return b.def(p,'==="front"?',1028,":",1029)});case "lineWidth":return S(function(a){d.command("number"===
typeof a&&a>=L.lineWidthDims[0]&&a<=L.lineWidthDims[1],"invalid line width, must be a positive number between "+L.lineWidthDims[0]+" and "+L.lineWidthDims[1],p.commandStr);return a},function(a,b,p){d.optional(function(){a.assert(b,"typeof "+p+'==="number"&&'+p+">="+L.lineWidthDims[0]+"&&"+p+"<="+L.lineWidthDims[1],"invalid line width")});return p});case "frontFace":return S(function(a){d.commandParameter(a,D,l,p.commandStr);return D[a]},function(a,b,p){d.optional(function(){a.assert(b,p+'==="cw"||'+
p+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(p+'==="cw"?2304:2305')});case "colorMask":return S(function(a){d.command(u(a)&&4===a.length,"color.mask must be length 4 array",p.commandStr);return a.map(function(a){return!!a})},function(a,b,p){d.optional(function(){a.assert(b,a.shared.isArrayLike+"("+p+")&&"+p+".length===4","invalid color.mask")});return da(4,function(a){return"!!"+p+"["+a+"]"})});case "sample.coverage":return S(function(a){d.command("object"===typeof a&&a,
l,p.commandStr);var b="value"in a?a.value:1;a=!!a.invert;d.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",p.commandStr);return[b,a]},function(a,b,p){d.optional(function(){a.assert(b,p+"&&typeof "+p+'==="object"',"invalid sample.coverage")});var e=b.def('"value" in ',p,"?+",p,".value:1"),k=b.def("!!",p,".invert");return[e,k]})}});return y}function Ea(a,p){var e=a["static"],k=a.dynamic,y={};x(e).forEach(function(a){var b=e[a],k;if("number"===typeof b||
"boolean"===typeof b)k=g(function(){return b});else if("function"===typeof b){var S=b._reglType;"texture2d"===S||"textureCube"===S?k=g(function(a){return a.link(b)}):"framebuffer"===S||"framebufferCube"===S?(d.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',p.commandStr),k=g(function(a){return a.link(b.color[0])})):d.commandRaise('invalid data for uniform "'+a+'"',p.commandStr)}else u(b)?k=g(function(p){return p.global.def("[",da(b.length,function(e){d.command("number"===
typeof b[e]||"boolean"===typeof b[e],"invalid uniform "+a,p.commandStr);return b[e]}),"]")}):d.commandRaise('invalid or missing data for uniform "'+a+'"',p.commandStr);k.value=b;y[a]=k});x(k).forEach(function(a){var p=k[a];y[a]=b(p,function(a,b){return a.invoke(b,p)})});return y}function Na(a,p){var e=a["static"],k=a.dynamic,y={};x(e).forEach(function(a){var b=e[a],k=n.id(a),S=new ia;if(c(b))S.state=1,S.buffer=ga.getBuffer(ga.create(b,34962,!1,!0)),S.type=0;else{var l=ga.getBuffer(b);if(l)S.state=
1,S.buffer=l,S.type=0;else if(d.command("object"===typeof b&&b,"invalid data for attribute "+a,p.commandStr),"constant"in b){var f=b.constant;S.buffer="null";S.state=2;"number"===typeof f?S.x=f:(d.command(u(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,p.commandStr),F.forEach(function(a,b){b<f.length&&(S[a]=f[b])}))}else{l=c(b.buffer)?ga.getBuffer(ga.create(b.buffer,34962,!1,!0)):ga.getBuffer(b.buffer);d.command(!!l,'missing buffer for attribute "'+a+'"',p.commandStr);var h=b.offset|
0;d.command(0<=h,'invalid offset for attribute "'+a+'"',p.commandStr);var m=b.stride|0;d.command(0<=m&&256>m,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',p.commandStr);var t=b.size|0;d.command(!("size"in b)||0<t&&4>=t,'invalid size for attribute "'+a+'", must be 1,2,3,4',p.commandStr);var pa=!!b.normalized,w=0;"type"in b&&(d.commandParameter(b.type,q,"invalid type for attribute "+a,p.commandStr),w=q[b.type]);var ja=b.divisor|0;d.optional(function(){"divisor"in b&&(d.command(0===
ja||Q,'cannot specify divisor for attribute "'+a+'", instancing not supported',p.commandStr),d.command(0<=ja,'invalid divisor for attribute "'+a+'"',p.commandStr));var e=p.commandStr,k="buffer offset divisor normalized type size stride".split(" ");x(b).forEach(function(b){d.command(0<=k.indexOf(b),'unknown parameter "'+b+'" for attribute pointer "'+a+'" (valid parameters are '+k+")",e)})});S.buffer=l;S.state=1;S.size=t;S.normalized=pa;S.type=w||l.dtype;S.offset=h;S.stride=m;S.divisor=ja}}y[a]=g(function(a,
b){var p=a.attribCache;if(k in p)return p[k];var d={isStream:!1};x(S).forEach(function(a){d[a]=S[a]});S.buffer&&(d.buffer=a.link(S.buffer),d.type=d.type||d.buffer+".dtype");return p[k]=d})});x(k).forEach(function(a){var p=k[a];y[a]=b(p,function(b,e){function k(a){e(n[a],"=",S,".",a,"|0;")}var S=b.invoke(e,p),y=b.shared,l=b.constants,g=y.isBufferArgs,f=y.buffer;d.optional(function(){b.assert(e,S+"&&(typeof "+S+'==="object"||typeof '+S+'==="function")&&('+g+"("+S+")||"+f+".getBuffer("+S+")||"+f+".getBuffer("+
S+".buffer)||"+g+"("+S+'.buffer)||("constant" in '+S+"&&(typeof "+S+'.constant==="number"||'+y.isArrayLike+"("+S+".constant))))",'invalid dynamic attribute "'+a+'"')});var n={isStream:e.def(!1)},h=new ia;h.state=1;x(h).forEach(function(a){n[a]=e.def(""+h[a])});var m=n.buffer,Bb=n.type;e("if(",g,"(",S,")){",n.isStream,"=true;",m,"=",f,".createStream(",34962,",",S,");",Bb,"=",m,".dtype;","}else{",m,"=",f,".getBuffer(",S,");","if(",m,"){",Bb,"=",m,".dtype;",'}else if("constant" in ',S,"){",n.state,"=",
2,";","if(typeof "+S+'.constant === "number"){',n[F[0]],"=",S,".constant;",F.slice(1).map(function(a){return n[a]}).join("="),"=0;","}else{",F.map(function(a,b){return n[a]+"="+S+".constant.length>"+b+"?"+S+".constant["+b+"]:0;"}).join(""),"}}else{","if(",g,"(",S,".buffer)){",m,"=",f,".createStream(",34962,",",S,".buffer);","}else{",m,"=",f,".getBuffer(",S,".buffer);","}",Bb,'="type" in ',S,"?",l.glTypes,"[",S,".type]:",m,".dtype;",n.normalized,"=!!",S,".normalized;");k("size");k("offset");k("stride");
k("divisor");e("}}");e.exit("if(",n.isStream,"){",f,".destroyStream(",m,");","}");return n})});return y}function Hb(a){var p=a["static"],d=a.dynamic,e={};x(p).forEach(function(a){var b=p[a];e[a]=g(function(a,p){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});x(d).forEach(function(a){var p=d[a];e[a]=b(p,function(a,b){return a.invoke(b,p)})});return e}function Ha(a,b,e,k,y){function l(a){var b=h[a];b&&(q[a]=b)}var g=a["static"],f=a.dynamic;d.optional(function(){function a(p){x(p).forEach(function(a){d.command(0<=
b.indexOf(a),'unknown parameter "'+a+'"',y.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(Z);a(g);a(f)});var n=P(a,b),m=Ob(a,y),h=$a(a,m,y),pa=la(a,y),q=fa(a,y),w=t(a,y,n);l("viewport");l(O("scissor.box"));var ja=0<x(q).length,m={framebuffer:m,draw:pa,shader:w,state:q,dirty:ja,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=J(a,y);m.uniforms=Ea(e,y);m.drawVAO=m.scopeVAO=pa.vao;if(!m.drawVAO&&w.program&&!n&&E.angle_instanced_arrays&&
pa["static"].elements){var c=!0;a=w.program.attributes.map(function(a){a=b["static"][a];c=c&&!!a;return a});if(c&&0<a.length){var D=Ka.getVAO(Ka.createVAO({attributes:a,elements:pa["static"].elements}));m.drawVAO=new r(null,null,null,function(a,b){return a.link(D)});m.useVAO=!0}}n?m.useVAO=!0:m.attributes=Na(b,y);m.context=Hb(k,y);return m}function U(a,b,d){var e=a.shared.context,k=a.scope();x(d).forEach(function(y){b.save(e,"."+y);var l=d[y].append(a,b);Array.isArray(l)?k(e,".",y,"=[",l.join(),"];"):
k(e,".",y,"=",l,";")});b(k)}function ob(a,b,d,e){var k=a.shared,y=k.gl,l=k.framebuffer,g;ha&&(g=b.def(k.extensions,".webgl_draw_buffers"));var f=a.constants,k=f.drawBuffer,f=f.backBuffer;a=d?d.append(a,b):b.def(l,".next");e||b("if(",a,"!==",l,".cur){");b("if(",a,"){",y,".bindFramebuffer(",36160,",",a,".framebuffer);");ha&&b(g,".drawBuffersWEBGL(",k,"[",a,".colorAttachments.length]);");b("}else{",y,".bindFramebuffer(",36160,",null);");ha&&b(g,".drawBuffersWEBGL(",f,");");b("}",l,".cur=",a,";");e||
b("}")}function ea(a,b,d){var e=a.shared,k=e.gl,l=a.current,g=a.next,f=e.current,n=e.next,m=a.cond(f,".dirty");Z.forEach(function(b){b=O(b);if(!(b in d.state)){var p,e;if(b in g){p=g[b];e=l[b];var h=da(G[b].length,function(a){return m.def(p,"[",a,"]")});m(a.cond(h.map(function(a,b){return a+"!=="+e+"["+b+"]"}).join("||")).then(k,".",ja[b],"(",h,");",h.map(function(a,b){return e+"["+b+"]="+a}).join(";"),";"))}else p=m.def(n,".",b),h=a.cond(p,"!==",f,".",b),m(h),b in y?h(a.cond(p).then(k,".enable(",
y[b],");")["else"](k,".disable(",y[b],");"),f,".",b,"=",p,";"):h(k,".",ja[b],"(",p,");",f,".",b,"=",p,";")}});0===x(d.state).length&&m(f,".dirty=false;");b(m)}function va(a,b,d,e){var k=a.shared,l=a.current,g=k.current,f=k.gl;ba(x(d)).forEach(function(k){var m=d[k];if(!e||e(m)){var n=m.append(a,b);if(y[k]){var h=y[k];N(m)?n?b(f,".enable(",h,");"):b(f,".disable(",h,");"):b(a.cond(n).then(f,".enable(",h,");")["else"](f,".disable(",h,");"));b(g,".",k,"=",n,";")}else if(u(n)){var t=l[k];b(f,".",ja[k],
"(",n,");",n.map(function(a,b){return t+"["+b+"]="+a}).join(";"),";")}else b(f,".",ja[k],"(",n,");",g,".",k,"=",n,";")}})}function bc(a,b){Q&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function cc(a,b,d,e,k){function y(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function l(a){pa=b.def();a(pa,"=",y(),";");"string"===typeof k?a(m,".count+=",k,";"):a(m,".count++;");Qa&&(e?(q=b.def(),a(q,"=",t,".getNumPendingQueries();")):a(t,".beginQuery(",m,");"))}
function g(a){a(m,".cpuTime+=",y(),"-",pa,";");Qa&&(e?a(t,".pushScopeStats(",q,",",t,".getNumPendingQueries(),",m,");"):a(t,".endQuery();"))}function f(a){var d=b.def(h,".profile");b(h,".profile=",a,";");b.exit(h,".profile=",d,";")}var n=a.shared,m=a.stats,h=n.current,t=n.timer;d=d.profile;var pa,q;if(d){if(N(d)){d.enable?(l(b),g(b.exit),f("true")):f("false");return}d=d.append(a,b);f(d)}else d=b.def(h,".profile");n=a.block();l(n);b("if(",d,"){",n,"}");a=a.block();g(a);b.exit("if(",d,"){",a,"}")}function Qc(a,
b,e,k,y){function l(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(d,e,k){function y(){b("if(!",h,".buffer){",n,".enableVertexAttribArray(",m,");}");var d=k.type,l;l=k.size?b.def(k.size,"||",e):e;b("if(",h,".type!==",d,"||",h,".size!==",l,"||",q.map(function(a){return h+"."+a+"!=="+k[a]}).join("||"),"){",n,".bindBuffer(",34962,",",t,".buffer);",n,".vertexAttribPointer(",[m,l,d,
k.normalized,k.stride,k.offset],");",h,".type=",d,";",h,".size=",l,";",q.map(function(a){return h+"."+a+"="+k[a]+";"}).join(""),"}");Q&&(d=k.divisor,b("if(",h,".divisor!==",d,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,d],");",h,".divisor=",d,";}"))}function l(){b("if(",h,".buffer){",n,".disableVertexAttribArray(",m,");",h,".buffer=null;","}if(",F.map(function(a,b){return h+"."+a+"!=="+pa[b]}).join("||"),"){",n,".vertexAttrib4f(",m,",",pa,");",F.map(function(a,b){return h+"."+a+"="+pa[b]+";"}).join(""),
"}")}var n=f.gl,m=b.def(d,".location"),h=b.def(f.attributes,"[",m,"]");d=k.state;var t=k.buffer,pa=[k.x,k.y,k.z,k.w],q=["buffer","normalized","offset","stride"];1===d?y():2===d?l():(b("if(",d,"===",1,"){"),y(),b("}else{"),l(),b("}"))}var f=a.shared;k.forEach(function(k){var f=k.name,n=e.attributes[f],m;if(n){if(!y(n))return;m=n.append(a,b)}else{if(!y(T))return;var h=a.scopeAttrib(f);d.optional(function(){a.assert(b,h+".state","missing attribute "+f)});m={};x(new ia).forEach(function(a){m[a]=b.def(h,
".",a)})}g(a.link(k),l(k.info.type),m)})}function td(a,b,e,k,y,l){for(var g=a.shared,f=g.gl,m,h=0;h<k.length;++h){var t=k[h],pa=t.name,q=t.info.type,w=e.uniforms[pa],t=a.link(t)+".location",ja;if(w){if(!y(w))continue;if(N(w)){var c=w.value;d.command(null!==c&&"undefined"!==typeof c,'missing uniform "'+pa+'"',a.commandStr);if(35678===q||35680===q)d.command("function"===typeof c&&(35678===q&&("texture2d"===c._reglType||"framebuffer"===c._reglType)||35680===q&&("textureCube"===c._reglType||"framebufferCube"===
c._reglType)),"invalid texture for uniform "+pa,a.commandStr),w=a.link(c._texture||c.color[0]._texture),b(f,".uniform1i(",t,",",w+".bind());"),b.exit(w,".unbind();");else if(35674===q||35675===q||35676===q){d.optional(function(){d.command(u(c),"invalid matrix for uniform "+pa,a.commandStr);d.command(35674===q&&4===c.length||35675===q&&9===c.length||35676===q&&16===c.length,"invalid length for matrix uniform "+pa,a.commandStr)});var w=a.global.def("new Float32Array(["+Array.prototype.slice.call(c)+
"])"),D=2;35675===q?D=3:35676===q&&(D=4);b(f,".uniformMatrix",D,"fv(",t,",false,",w,");")}else{switch(q){case 5126:d.commandType(c,"number","uniform "+pa,a.commandStr);m="1f";break;case 35664:d.command(u(c)&&2===c.length,"uniform "+pa,a.commandStr);m="2f";break;case 35665:d.command(u(c)&&3===c.length,"uniform "+pa,a.commandStr);m="3f";break;case 35666:d.command(u(c)&&4===c.length,"uniform "+pa,a.commandStr);m="4f";break;case 35670:d.commandType(c,"boolean","uniform "+pa,a.commandStr);m="1i";break;
case 5124:d.commandType(c,"number","uniform "+pa,a.commandStr);m="1i";break;case 35671:d.command(u(c)&&2===c.length,"uniform "+pa,a.commandStr);m="2i";break;case 35667:d.command(u(c)&&2===c.length,"uniform "+pa,a.commandStr);m="2i";break;case 35672:d.command(u(c)&&3===c.length,"uniform "+pa,a.commandStr);m="3i";break;case 35668:d.command(u(c)&&3===c.length,"uniform "+pa,a.commandStr);m="3i";break;case 35673:d.command(u(c)&&4===c.length,"uniform "+pa,a.commandStr);m="4i";break;case 35669:d.command(u(c)&&
4===c.length,"uniform "+pa,a.commandStr),m="4i"}b(f,".uniform",m,"(",t,",",u(c)?Array.prototype.slice.call(c):c,");")}continue}else ja=w.append(a,b)}else{if(!y(T))continue;ja=b.def(g.uniforms,"[",n.id(pa),"]")}35678===q?(d(!Array.isArray(ja),"must specify a scalar prop for textures"),b("if(",ja,"&&",ja,'._reglType==="framebuffer"){',ja,"=",ja,".color[0];","}")):35680===q&&(d(!Array.isArray(ja),"must specify a scalar prop for cube maps"),b("if(",ja,"&&",ja,'._reglType==="framebufferCube"){',ja,"=",
ja,".color[0];","}"));d.optional(function(){function e(d,k){a.assert(b,d,'bad data or missing for uniform "'+pa+'".  '+k)}function k(a){d(!Array.isArray(ja),"must not specify an array type for uniform");e("typeof "+ja+'==="'+a+'"',"invalid type, expected "+a)}function y(b,k){Array.isArray(ja)?d(ja.length===b,"must have length "+b):e(g.isArrayLike+"("+ja+")&&"+ja+".length==="+b,"invalid vector, should have length "+b,a.commandStr)}function l(b){d(!Array.isArray(ja),"must not specify a value type");
e("typeof "+ja+'==="function"&&'+ja+'._reglType==="texture'+(3553===b?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(q){case 5124:k("number");break;case 35667:y(2,"number");break;case 35668:y(3,"number");break;case 35669:y(4,"number");break;case 5126:k("number");break;case 35664:y(2,"number");break;case 35665:y(3,"number");break;case 35666:y(4,"number");break;case 35670:k("boolean");break;case 35671:y(2,"boolean");break;case 35672:y(3,"boolean");break;case 35673:y(4,"boolean");break;
case 35674:y(4,"number");break;case 35675:y(9,"number");break;case 35676:y(16,"number");break;case 35678:l(3553);break;case 35680:l(34067)}});w=1;switch(q){case 35678:case 35680:w=b.def(ja,"._texture");b(f,".uniform1i(",t,",",w,".bind());");b.exit(w,".unbind();");continue;case 5124:case 35670:m="1i";break;case 35667:case 35671:m="2i";w=2;break;case 35668:case 35672:m="3i";w=3;break;case 35669:case 35673:m="4i";w=4;break;case 5126:m="1f";break;case 35664:m="2f";w=2;break;case 35665:m="3f";w=3;break;
case 35666:m="4f";w=4;break;case 35674:m="Matrix2fv";break;case 35675:m="Matrix3fv";break;case 35676:m="Matrix4fv"}if("M"===m.charAt(0)){b(f,".uniform",m,"(",t,",");var t=Math.pow(q-35674+2,2),B=a.global.def("new Float32Array(",t,")");Array.isArray(ja)?b("false,(",da(t,function(a){return B+"["+a+"]="+ja[a]}),",",B,")"):b("false,(Array.isArray(",ja,")||",ja," instanceof Float32Array)?",ja,":(",da(t,function(a){return B+"["+a+"]="+ja+"["+a+"]"}),",",B,")");b(");")}else{if(1<w){for(var D=[],X=[],x=0;x<
w;++x)Array.isArray(ja)?X.push(ja[x]):X.push(b.def(ja+"["+x+"]")),l&&D.push(b.def());l&&b("if(!",a.batchId,"||",D.map(function(a,b){return a+"!=="+X[b]}).join("||"),"){",D.map(function(a,b){return a+"="+X[b]+";"}).join(""));b(f,".uniform",m,"(",t,",",X.join(","),");")}else d(!Array.isArray(ja),"uniform value must not be an array"),l&&(w=b.def(),b("if(!",a.batchId,"||",w,"!==",ja,"){",w,"=",ja,";")),b(f,".uniform",m,"(",t,",",ja,");");l&&b("}")}}}function wc(a,b,e,k){function y(d){var l=h[d];return l?
l.contextDep&&k.contextDynamic||l.propDep?l.append(a,e):l.append(a,b):b.def(n,".",d)}function l(){function a(){e(ja,".drawElementsInstancedANGLE(",[pa,w,D,q+"<<(("+D+"-5121)>>1)",c],");")}function b(){e(ja,".drawArraysInstancedANGLE(",[pa,q,w,c],");")}t&&"null"!==t?B?a():(e("if(",t,"){"),a(),e("}else{"),b(),e("}")):b()}function g(){function a(){e(m+".drawElements("+[pa,w,D,q+"<<(("+D+"-5121)>>1)"]+");")}function b(){e(m+".drawArrays("+[pa,q,w]+");")}t&&"null"!==t?B?a():(e("if(",t,"){"),a(),e("}else{"),
b(),e("}")):b()}var f=a.shared,m=f.gl,n=f.draw,h=k.draw,t=function(){var d=h.elements,y=b;if(d){if(d.contextDep&&k.contextDynamic||d.propDep)y=e;d=d.append(a,y);h.elementsActive&&y("if("+d+")"+m+".bindBuffer(34963,"+d+".buffer.buffer);")}else d=y.def(),y(d,"=",n,".","elements",";","if(",d,"){",m,".bindBuffer(",34963,",",d,".buffer.buffer);}","else if(",f.vao,".currentVAO){",d,"=",a.shared.elements+".getElements("+f.vao,".currentVAO.elements);",ra?"":"if("+d+")"+m+".bindBuffer(34963,"+d+".buffer.buffer);",
"}");return d}(),pa=y("primitive"),q=y("offset"),w=function(){var y=h.count,l,g=b;if(y){if(y.contextDep&&k.contextDynamic||y.propDep)g=e;l=y.append(a,g);d.optional(function(){y.MISSING&&a.assert(b,"false","missing vertex count");y.DYNAMIC&&a.assert(g,l+">=0","missing vertex count")})}else l=g.def(n,".","count"),d.optional(function(){a.assert(g,l+">=0","missing vertex count")});return l}();if("number"===typeof w){if(0===w)return}else e("if(",w,"){"),e.exit("}");var c,ja;Q&&(c=y("instances"),ja=a.instancing);
var D=t+".type",B=h.elements&&N(h.elements)&&!h.vaoActive;Q&&("number"!==typeof c||0<=c)?"string"===typeof c?(e("if(",c,">0){"),l(),e("}else if(",c,"<0){"),g(),e("}")):l():g()}function W(a,b,e,k,y){var l=z();y=l.proc("body",y);d.optional(function(){l.commandStr=b.commandStr;l.command=l.link(b.commandStr)});Q&&(l.instancing=y.def(l.shared.extensions,".angle_instanced_arrays"));a(l,y,e,k);return l.compile().body}function B(a,b,d,e){bc(a,b);d.useVAO?d.drawVAO?b(a.shared.vao,".setVAO(",d.drawVAO.append(a,
b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,".setVAO(null);"),Qc(a,b,d,e.attributes,function(){return!0}));td(a,b,d,e.uniforms,function(){return!0},!1);wc(a,b,b,d)}function ka(a,b){var d=a.proc("draw",1);bc(a,d);U(a,d,b.context);ob(a,d,b.framebuffer);ea(a,d,b);va(a,d,b.state);cc(a,d,b,!1,!0);var e=b.shader.progVar.append(a,d);d(a.shared.gl,".useProgram(",e,".program);");if(b.shader.program)B(a,d,b,b.shader.program);else{d(a.shared.vao,".setVAO(null);");var k=a.global.def("{}"),
y=d.def(e,".id"),l=d.def(k,"[",y,"]");d(a.cond(l).then(l,".call(this,a0);")["else"](l,"=",k,"[",y,"]=",a.link(function(d){return W(B,a,b,d,1)}),"(",e,");",l,".call(this,a0);"))}0<x(b.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function Ca(a,b,d,e){function k(){return!0}a.batchId="a1";bc(a,b);Qc(a,b,d,e.attributes,k);td(a,b,d,e.uniforms,k,!1);wc(a,b,b,d)}function Lb(a,b,d,e){function k(a){return a.contextDep&&l||a.propDep}function y(a){return!k(a)}
bc(a,b);var l=d.contextDep,g=b.def(),f=b.def();a.shared.props=f;a.batchId=g;var m=a.scope(),n=a.scope();b(m.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",f,"=","a0","[",g,"];",n,"}",m.exit);d.needsContext&&U(a,n,d.context);d.needsFramebuffer&&ob(a,n,d.framebuffer);va(a,n,d.state,k);d.profile&&k(d.profile)&&cc(a,n,d,!1,!0);e?(d.useVAO?d.drawVAO?k(d.drawVAO)?n(a.shared.vao,".setVAO(",d.drawVAO.append(a,n),");"):m(a.shared.vao,".setVAO(",d.drawVAO.append(a,m),");"):m(a.shared.vao,".setVAO(",a.shared.vao,
".targetVAO);"):(m(a.shared.vao,".setVAO(null);"),Qc(a,m,d,e.attributes,y),Qc(a,n,d,e.attributes,k)),td(a,m,d,e.uniforms,y,!1),td(a,n,d,e.uniforms,k,!0),wc(a,m,n,d)):(b=a.global.def("{}"),e=d.shader.progVar.append(a,n),f=n.def(e,".id"),m=n.def(b,"[",f,"]"),n(a.shared.gl,".useProgram(",e,".program);","if(!",m,"){",m,"=",b,"[",f,"]=",a.link(function(b){return W(Ca,a,d,b,2)}),"(",e,");}",m,".call(this,a0[",g,"],",g,");"))}function nc(a,b){function d(a){return a.contextDep&&k||a.propDep}var e=a.proc("batch",
2);a.batchId="0";bc(a,e);var k=!1,y=!0;x(b.context).forEach(function(a){k=k||b.context[a].propDep});k||(U(a,e,b.context),y=!1);var l=b.framebuffer,g=!1;l?(l.propDep?k=g=!0:l.contextDep&&k&&(g=!0),g||ob(a,e,l)):ob(a,e,null);b.state.viewport&&b.state.viewport.propDep&&(k=!0);ea(a,e,b);va(a,e,b.state,function(a){return!d(a)});b.profile&&d(b.profile)||cc(a,e,b,!1,"a1");b.contextDep=k;b.needsContext=y;b.needsFramebuffer=g;y=b.shader.progVar;if(y.contextDep&&k||y.propDep)Lb(a,e,b,null);else if(y=y.append(a,
e),e(a.shared.gl,".useProgram(",y,".program);"),b.shader.program)Lb(a,e,b,b.shader.program);else{e(a.shared.vao,".setVAO(null);");var l=a.global.def("{}"),g=e.def(y,".id"),f=e.def(l,"[",g,"]");e(a.cond(f).then(f,".call(this,a0,a1);")["else"](f,"=",l,"[",g,"]=",a.link(function(d){return W(Lb,a,b,d,2)}),"(",y,");",f,".call(this,a0,a1);"))}0<x(b.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function Zc(a,b){function d(y){var l=b.shader[y];l&&e.set(k.shader,
"."+y,l.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var k=a.shared,y=k.current;U(a,e,b.context);b.framebuffer&&b.framebuffer.append(a,e);ba(x(b.state)).forEach(function(d){var y=b.state[d].append(a,e);u(y)?y.forEach(function(b,k){e.set(a.next[d],"["+k+"]",b)}):e.set(k.next,"."+d,y)});cc(a,e,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var y=b.draw[d];y&&e.set(k.draw,"."+d,""+y.append(a,e))});x(b.uniforms).forEach(function(d){var y=b.uniforms[d].append(a,
e);Array.isArray(y)&&(y="["+y.join()+"]");e.set(k.uniforms,"["+n.id(d)+"]",y)});x(b.attributes).forEach(function(d){var k=b.attributes[d].append(a,e),y=a.scopeAttrib(d);x(new ia).forEach(function(a){e.set(y,"."+a,k[a])})});b.scopeVAO&&e.set(k.vao,".targetVAO",b.scopeVAO.append(a,e));d("vert");d("frag");0<x(b.state).length&&(e(y,".dirty=true;"),e.exit(y,".dirty=true;"));e("a1(",a.shared.context,",a0,",a.batchId,");")}function C(a){if("object"===typeof a&&!u(a)){for(var b=x(a),d=0;d<b.length;++d)if(A.isDynamic(a[b[d]]))return!0;
return!1}}function w(a,d,e){function k(a,b){g.forEach(function(d){var e=y[d];A.isDynamic(e)&&(e=a.invoke(b,e),b(h,".",d,"=",e,";"))})}var y=d["static"][e];if(y&&C(y)){var l=a.global,g=x(y),f=!1,m=!1,n=!1,h=a.global.def("{}");g.forEach(function(d){var e=y[d];if(A.isDynamic(e))"function"===typeof e&&(e=y[d]=A.unbox(e)),d=b(e,null),f=f||d.thisDep,n=n||d.propDep,m=m||d.contextDep;else{l(h,".",d,"=");switch(typeof e){case "number":l(e);break;case "string":l('"',e,'"');break;case "object":Array.isArray(e)&&
l("[",e.join(),"]");break;default:l(a.link(e))}l(";")}});d.dynamic[e]=new A.DynamicVariable(4,{thisDep:f,contextDep:m,propDep:n,ref:h,append:k});delete d["static"][e]}}var ia=Ka.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};E.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var Q=E.angle_instanced_arrays,ha=E.webgl_draw_buffers,ra=E.oes_vertex_array_object,G={dirty:!0,profile:Y.profile},m={},Z=[],y={},ja={};M("dither",3024);M("blend.enable",3042);R("blend.color","blendColor",[0,0,0,0]);
R("blend.equation","blendEquationSeparate",[32774,32774]);R("blend.func","blendFuncSeparate",[1,0,1,0]);M("depth.enable",2929,!0);R("depth.func","depthFunc",513);R("depth.range","depthRange",[0,1]);R("depth.mask","depthMask",!0);R("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);R("cull.face","cullFace",1029);R("frontFace","frontFace",2305);R("lineWidth","lineWidth",1);M("polygonOffset.enable",32823);R("polygonOffset.offset","polygonOffset",[0,0]);M("sample.alpha",32926);M("sample.enable",
32928);R("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",2960);R("stencil.mask","stencilMask",-1);R("stencil.func","stencilFunc",[519,0,-1]);R("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);R("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);R("scissor.box","scissor",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);R("viewport","viewport",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);var pa={gl:K,context:oa,strings:n,next:m,current:G,
draw:kc,elements:a,buffer:ga,shader:cb,attributes:Ka.state,vao:Ka,uniforms:ma,framebuffer:X,extensions:E,timer:Qa,isBufferArgs:c},k={primTypes:H,compareFuncs:h,blendFuncs:I,blendEquations:ua,stencilOps:f,glTypes:q,orientationType:D};d.optional(function(){pa.isArrayLike=u});ha&&(k.backBuffer=[1029],k.drawBuffer=da(L.maxDrawbuffers,function(a){return 0===a?[0]:da(a,function(a){return 36064+a})}));var tc=0;return{next:m,current:G,procs:function(){var a=z(),b=a.proc("poll"),d=a.proc("refresh"),e=a.block();
b(e);d(e);var k=a.shared,l=k.gl,g=k.next,f=k.current;e(f,".dirty=false;");ob(a,b);ob(a,d,null,!0);var m;Q&&(m=a.link(Q));E.oes_vertex_array_object&&d(a.link(E.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<L.maxAttributes;++n){var h=d.def(k.attributes,"[",n,"]"),t=a.cond(h,".buffer");t.then(l,".enableVertexAttribArray(",n,");",l,".bindBuffer(",34962,",",h,".buffer.buffer);",l,".vertexAttribPointer(",n,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);")["else"](l,
".disableVertexAttribArray(",n,");",l,".vertexAttrib4f(",n,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;");d(t);Q&&d(m,".vertexAttribDivisorANGLE(",n,",",h,".divisor);")}d(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");x(y).forEach(function(k){var m=y[k],n=e.def(g,".",k),h=a.block();h("if(",n,"){",l,".enable(",m,")}else{",l,".disable(",m,")}",f,".",k,"=",n,";");d(h);b("if(",n,"!==",f,".",k,"){",h,"}")});x(ja).forEach(function(k){var y=ja[k],m=G[k],n,
h,t=a.block();t(l,".",y,"(");u(m)?(y=m.length,n=a.global.def(g,".",k),h=a.global.def(f,".",k),t(da(y,function(a){return n+"["+a+"]"}),");",da(y,function(a){return h+"["+a+"]="+n+"["+a+"];"}).join("")),b("if(",da(y,function(a){return n+"["+a+"]!=="+h+"["+a+"]"}).join("||"),"){",t,"}")):(n=e.def(g,".",k),h=e.def(f,".",k),t(n,");",f,".",k,"=",n,";"),b("if(",n,"!==",h,"){",t,"}"));d(t)});return a.compile()}(),compile:function(a,b,d,e,k){var y=z();y.stats=y.link(k);x(b["static"]).forEach(function(a){w(y,
b,a)});ca.forEach(function(b){w(y,a,b)});var l=Ha(a,b,d,e,y);ka(y,l);Zc(y,l);nc(y,l);return v(y.compile(),{destroy:function(){l.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(z,aa,jc){function c(g,d){this.id=b++;this.type=g;this.data=d}function ba(b){if(0===
b.length)return[];var d=b.charAt(0),g=b.charAt(b.length-1);if(1<b.length&&d===g&&('"'===d||"'"===d))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(d=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return ba(b.substr(0,d.index)).concat(ba(d[1])).concat(ba(b.substr(d.index+d[0].length)));d=b.split(".");if(1===d.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(g=0;g<d.length;++g)b=b.concat(ba(d[g]));return b}function r(b){return"["+
ba(b).join("][")+"]"}function N(b,d){if("function"===typeof b)return new c(0,b);if("number"===typeof b||"boolean"===typeof b)return new c(5,b);if(Array.isArray(b))return new c(6,b.map(function(b,g){return N(b,d+"["+g+"]")}));if(b instanceof c)return b;g(!1,"invalid option type in uniform "+d)}var g=z("./util/check"),b=0;aa.exports={DynamicVariable:c,define:function(b,d){return new c(b,r(d+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof c},unbox:N,accessor:r}},{"./util/check":21}],
10:[function(z,aa,jc){var c=z("./util/check"),ba=z("./util/is-typed-array"),r=z("./util/is-ndarray"),N=z("./util/values"),g=z("./constants/primitives.json"),b=z("./constants/usage.json");aa.exports=function(x,d,v,na){function da(b){this.id=A++;u[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function K(b,g,q,u,h,f,e){b.buffer.bind();var D;g?((D=e)||ba(g)&&(!r(g)||ba(g.data))||(D=d.oes_element_index_uint?5125:5123),v._initBuffer(b.buffer,g,q,D,3)):(x.bufferData(34963,f,q),b.buffer.dtype=
D||5121,b.buffer.usage=q,b.buffer.dimension=3,b.buffer.byteLength=f);D=e;if(!e){switch(b.buffer.dtype){case 5121:case 5120:D=5121;break;case 5123:case 5122:D=5123;break;case 5125:case 5124:D=5125;break;default:c.raise("unsupported type for element array")}b.buffer.dtype=D}b.type=D;c(5125!==D||!!d.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=h;0>g&&(g=b.buffer.byteLength,5123===D?g>>=1:5125===D&&(g>>=2));b.vertCount=g;g=u;0>u&&(g=4,u=b.buffer.dimension,
1===u&&(g=0),2===u&&(g=1),3===u&&(g=4));b.primType=g}function E(b){na.elementsCount--;c(null!==b.buffer,"must not double destroy elements");delete u[b.id];b.buffer.destroy();b.buffer=null}var u={},A=0,H={uint8:5121,uint16:5123};d.oes_element_index_uint&&(H.uint32=5125);da.prototype.bind=function(){this.buffer.bind()};var q=[];return{create:function(d,q){function u(d){if(d)if("number"===typeof d)x(d),h.primType=4,h.vertCount=d|0,h.type=5121;else{var e=null,q=35044,v=-1,A=-1,n=0,F=0;if(Array.isArray(d)||
ba(d)||r(d))e=d;else if(c.type(d,"object","invalid arguments for elements"),"data"in d&&(e=d.data,c(Array.isArray(e)||ba(e)||r(e),"invalid data for element buffer")),"usage"in d&&(c.parameter(d.usage,b,"invalid element buffer usage"),q=b[d.usage]),"primitive"in d&&(c.parameter(d.primitive,g,"invalid element buffer primitive"),v=g[d.primitive]),"count"in d&&(c("number"===typeof d.count&&0<=d.count,"invalid vertex count for elements"),A=d.count|0),"type"in d&&(c.parameter(d.type,H,"invalid buffer type"),
F=H[d.type]),"length"in d)n=d.length|0;else if(n=A,5123===F||5122===F)n*=2;else if(5125===F||5124===F)n*=4;K(h,e,q,v,A,n,F)}else x(),h.primType=4,h.vertCount=0,h.type=5121;return u}var x=v.create(null,34963,!0),h=new da(x._buffer);na.elementsCount++;u(d);u._reglType="elements";u._elements=h;u.subdata=function(b,d){x.subdata(b,d);return u};u.destroy=function(){E(h)};return u},createStream:function(b){var d=q.pop();d||(d=new da(v.create(null,34963,!0,!1)._buffer));K(d,b,35040,-1,-1,0,0);return d},destroyStream:function(b){q.push(b)},
getElements:function(b){return"function"===typeof b&&b._elements instanceof da?b._elements:null},clear:function(){N(u).forEach(E)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(z,aa,jc){var c=z("./util/sorted-object-keys"),ba=z("./util/check");aa.exports=function(r,N){function g(d){ba.type(d,"string","extension name must be string");d=d.toLowerCase();var g;try{g=b[d]=r.getExtension(d)}catch(c){}return!!g}
for(var b={},x=0;x<N.extensions.length;++x){var d=N.extensions[x];if(!g(d))return N.onDestroy(),N.onDone('"'+d+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}N.optionalExtensions.forEach(g);return{extensions:b,restore:function(){c(b).forEach(function(d){if(b[d]&&!g(d))throw Error("(regl): error restoring extension "+d);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(z,aa,jc){var c=z("./util/check"),ba=z("./util/values"),
r=z("./util/extend"),N=[6407,6408],g=[];g[6408]=4;g[6407]=3;var b=[];b[5121]=1;b[5126]=4;b[36193]=2;var x=[32854,32855,36194,35907,34842,34843,34836],d={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};aa.exports=function(v,na,da,K,E,u){function A(a,b,d){this.target=a;this.texture=b;this.renderbuffer=d;var e=a=0;b?(a=b.width,e=b.height):d&&(a=d.width,e=d.height);this.width=a;this.height=e}function H(a){a&&(a.texture&&
a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function q(a,b,d){if(a){if(a.texture){a=a.texture._texture;var e=Math.max(1,a.height);c(Math.max(1,a.width)===b&&e===d,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,c(a.width===b&&a.height===d,"inconsistent width/height for renderbuffer");a.refCount+=1}}function F(a,b){b&&(b.texture?v.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):v.framebufferRenderbuffer(36160,
a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function ca(a){var b=3553,d=null,e=null,l=a;"object"===typeof a&&(l=a.data,"target"in a&&(b=a.target|0));c.type(l,"function","invalid attachment data");a=l._reglType;"texture2d"===a?(d=l,c(3553===b)):"textureCube"===a?(d=l,c(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(e=l,b=36161):c.raise("invalid regl object for attachment");return new A(b,d,e)}function I(a,b,d,e,l){if(d)return a=K.create2D({width:a,height:b,format:e,type:l}),
a._texture.refCount=0,new A(3553,a,null);a=E.create({width:a,height:b,format:e});a._renderbuffer.refCount=0;return new A(36161,null,a)}function z(a){return a&&(a.texture||a.renderbuffer)}function h(a,b,d){a&&(a.texture?a.texture.resize(b,d):a.renderbuffer&&a.renderbuffer.resize(b,d),a.width=b,a.height=d)}function f(){this.id=a++;l[this.id]=this;this.framebuffer=v.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function e(a){a.colorAttachments.forEach(H);H(a.depthAttachment);H(a.stencilAttachment);H(a.depthStencilAttachment)}function D(a){var b=a.framebuffer;c(b,"must not double destroy framebuffer");v.deleteFramebuffer(b);a.framebuffer=null;u.framebufferCount--;delete l[a.id]}function T(a){var b;v.bindFramebuffer(36160,a.framebuffer);var e=a.colorAttachments;for(b=0;b<e.length;++b)F(36064+b,e[b]);for(b=e.length;b<da.maxColorAttachments;++b)v.framebufferTexture2D(36160,36064+b,3553,null,0);v.framebufferTexture2D(36160,
33306,3553,null,0);v.framebufferTexture2D(36160,36096,3553,null,0);v.framebufferTexture2D(36160,36128,3553,null,0);F(36096,a.depthAttachment);F(36128,a.stencilAttachment);F(33306,a.depthStencilAttachment);a=v.checkFramebufferStatus(36160);v.isContextLost()||36053===a||c.raise("framebuffer configuration not supported, status = "+d[a]);v.bindFramebuffer(36160,n.next?n.next.framebuffer:null);n.cur=n.next;v.getError()}function V(a,d){function l(a,d){var f;c(n.next!==v,"can not update framebuffer which is currently in use");
var h=0,D=0,u=!0,r=!0;f=null;var K=!0,A="rgba",E="uint8",F=1,ba=null,t=null,H=null,X=!1;if("number"===typeof a)h=a|0,D=d|0||h;else if(a){c.type(a,"object","invalid arguments for framebuffer");"shape"in a?(D=a.shape,c(Array.isArray(D)&&2<=D.length,"invalid shape for framebuffer"),h=D[0],D=D[1]):("radius"in a&&(h=D=a.radius),"width"in a&&(h=a.width),"height"in a&&(D=a.height));if("color"in a||"colors"in a)f=a.color||a.colors,Array.isArray(f)&&c(1===f.length||na.webgl_draw_buffers,"multiple render targets not supported");
if(!f){"colorCount"in a&&(F=a.colorCount|0,c(0<F,"invalid color buffer count"));"colorTexture"in a&&(K=!!a.colorTexture,A="rgba4");if("colorType"in a){E=a.colorType;if(K)c(na.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(na.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===E||
"float16"===E)c(na.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),A="rgba16f";else if("float"===E||"float32"===E)c(na.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),A="rgba32f";c.oneOf(E,ga,"invalid color type")}"colorFormat"in a&&(A=a.colorFormat,0<=qa.indexOf(A)?K=!0:0<=L.indexOf(A)?K=!1:c.optional(function(){if(K)c.oneOf(a.colorFormat,qa,"invalid color format for texture");
else c.oneOf(a.colorFormat,L,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)X=!(!a.depthTexture&&!a.depthStencilTexture),c(!X||na.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?u=a.depth:(ba=a.depth,r=!1));"stencil"in a&&("boolean"===typeof a.stencil?r=a.stencil:(t=a.stencil,u=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?u=r=a.depthStencil:(H=a.depthStencil,r=u=!1))}else h=D=1;
var V=null,ma=null,Hb=null,Ha=null;if(Array.isArray(f))V=f.map(ca);else if(f)V=[ca(f)];else for(V=Array(F),f=0;f<F;++f)V[f]=I(h,D,K,A,E);c(na.webgl_draw_buffers||1>=V.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");c(V.length<=da.maxColorAttachments,"too many color attachments, not supported");h=h||V[0].width;D=D||V[0].height;ba?ma=ca(ba):u&&!r&&(ma=I(h,D,X,"depth","uint32"));t?Hb=ca(t):r&&!u&&(Hb=I(h,D,!1,"stencil","uint8"));H?Ha=ca(H):!ba&&!t&&
r&&u&&(Ha=I(h,D,X,"depth stencil","depth stencil"));c(1>=!!ba+!!t+!!H,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");u=null;for(f=0;f<V.length;++f)q(V[f],h,D),c(!V[f]||V[f].texture&&0<=N.indexOf(V[f].texture._texture.format)||V[f].renderbuffer&&0<=x.indexOf(V[f].renderbuffer._renderbuffer.format),"framebuffer color attachment "+f+" is invalid"),V[f]&&V[f].texture&&(r=g[V[f].texture._texture.format]*b[V[f].texture._texture.type],null===u?u=r:c(u===r,"all color attachments much have the same number of bits per pixel."));
q(ma,h,D);c(!ma||ma.texture&&6402===ma.texture._texture.format||ma.renderbuffer&&33189===ma.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");q(Hb,h,D);c(!Hb||Hb.renderbuffer&&36168===Hb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");q(Ha,h,D);c(!Ha||Ha.texture&&34041===Ha.texture._texture.format||Ha.renderbuffer&&34041===Ha.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");e(v);v.width=
h;v.height=D;v.colorAttachments=V;v.depthAttachment=ma;v.stencilAttachment=Hb;v.depthStencilAttachment=Ha;l.color=V.map(z);l.depth=z(ma);l.stencil=z(Hb);l.depthStencil=z(Ha);l.width=v.width;l.height=v.height;T(v);return l}var v=new f;u.framebufferCount++;l(a,d);return r(l,{resize:function(a,b){c(n.next!==v,"can not resize a framebuffer which is currently in use");var d=Math.max(a|0,1),e=Math.max(b|0||d,1);if(d===v.width&&e===v.height)return l;for(var g=v.colorAttachments,f=0;f<g.length;++f)h(g[f],
d,e);h(v.depthAttachment,d,e);h(v.stencilAttachment,d,e);h(v.depthStencilAttachment,d,e);v.width=l.width=d;v.height=l.height=e;T(v);return l},_reglType:"framebuffer",_framebuffer:v,destroy:function(){D(v);e(v)},use:function(a){n.setFBO({framebuffer:l},a)}})}var n={cur:null,next:null,dirty:!1,setFBO:null},qa=["rgba"],L=["rgba4","rgb565","rgb5 a1"];na.ext_srgb&&L.push("srgba");na.ext_color_buffer_half_float&&L.push("rgba16f","rgb16f");na.webgl_color_buffer_float&&L.push("rgba32f");var ga=["uint8"];
na.oes_texture_half_float&&ga.push("half float","float16");na.oes_texture_float&&ga.push("float","float32");var a=0,l={};return r(n,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof f)?a:null},create:V,createCube:function(a){function b(a){var e;c(0>d.indexOf(n.next),"can not update framebuffer which is currently in use");var l={color:null},g=0,f=null;e="rgba";var h="uint8",q=1;if("number"===typeof a)g=a|0;else if(a){c.type(a,"object",
"invalid arguments for framebuffer");"shape"in a?(g=a.shape,c(Array.isArray(g)&&2<=g.length,"invalid shape for framebuffer"),c(g[0]===g[1],"cube framebuffer must be square"),g=g[0]):("radius"in a&&(g=a.radius|0),"width"in a?(g=a.width|0,"height"in a&&c(a.height===g,"must be square")):"height"in a&&(g=a.height|0));if("color"in a||"colors"in a)f=a.color||a.colors,Array.isArray(f)&&c(1===f.length||na.webgl_draw_buffers,"multiple render targets not supported");f||("colorCount"in a&&(q=a.colorCount|0,
c(0<q,"invalid color buffer count")),"colorType"in a&&(c.oneOf(a.colorType,ga,"invalid color type"),h=a.colorType),"colorFormat"in a&&(e=a.colorFormat,c.oneOf(a.colorFormat,qa,"invalid color format for texture")));"depth"in a&&(l.depth=a.depth);"stencil"in a&&(l.stencil=a.stencil);"depthStencil"in a&&(l.depthStencil=a.depthStencil)}else g=1;if(f)if(Array.isArray(f))for(a=[],e=0;e<f.length;++e)a[e]=f[e];else a=[f];else for(a=Array(q),f={radius:g,format:e,type:h},e=0;e<q;++e)a[e]=K.createCube(f);l.color=
Array(a.length);for(e=0;e<a.length;++e)q=a[e],c("function"===typeof q&&"textureCube"===q._reglType,"invalid cube map"),g=g||q.width,c(q.width===g&&q.height===g,"invalid cube map shape"),l.color[e]={target:34069,data:a[e]};for(e=0;6>e;++e){for(q=0;q<a.length;++q)l.color[q].target=34069+e;0<e&&(l.depth=d[0].depth,l.stencil=d[0].stencil,l.depthStencil=d[0].depthStencil);if(d[e])d[e](l);else d[e]=V(l)}return r(b,{width:g,height:g,color:a})}var d=Array(6);b(a);return r(b,{faces:d,resize:function(a){var e=
a|0;c(0<e&&e<=da.maxCubeMapSize,"invalid radius for cube fbo");if(e===b.width)return b;var l=b.color;for(a=0;a<l.length;++a)l[a].resize(e);for(a=0;6>a;++a)d[a].resize(e);b.width=b.height=e;return b},_reglType:"framebufferCube",destroy:function(){d.forEach(function(a){a.destroy()})}})},clear:function(){ba(l).forEach(D)},restore:function(){n.cur=null;n.next=null;n.dirty=!0;ba(l).forEach(function(a){a.framebuffer=v.createFramebuffer();T(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],
13:[function(z,aa,jc){var c=z("./util/sorted-object-keys"),ba=z("./util/pool");aa.exports=function(r,N){var g=1;N.ext_texture_filter_anisotropic&&(g=r.getParameter(34047));var b=1,x=1;N.webgl_draw_buffers&&(b=r.getParameter(34852),x=r.getParameter(36063));var d=!!N.oes_texture_float;if(d){d=r.createTexture();r.bindTexture(3553,d);r.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var v=r.createFramebuffer();r.bindFramebuffer(36160,v);r.framebufferTexture2D(36160,36064,3553,d,0);r.bindTexture(3553,null);
if(36053!==r.checkFramebufferStatus(36160))d=!1;else{r.viewport(0,0,1,1);r.clearColor(1,0,0,1);r.clear(16384);var na=ba.allocType(5126,4);r.readPixels(0,0,1,1,6408,5126,na);r.getError()?d=!1:(r.deleteFramebuffer(v),r.deleteTexture(d),d=1===na[0]);ba.freeType(na)}}na=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(na=r.createTexture(),v=ba.allocType(5121,36),r.activeTexture(33984),r.bindTexture(34067,
na),r.texImage2D(34069,0,6408,3,3,0,6408,5121,v),ba.freeType(v),r.bindTexture(34067,null),r.deleteTexture(na),na=!r.getError());return{colorBits:[r.getParameter(3410),r.getParameter(3411),r.getParameter(3412),r.getParameter(3413)],depthBits:r.getParameter(3414),stencilBits:r.getParameter(3415),subpixelBits:r.getParameter(3408),extensions:c(N).filter(function(b){return!!N[b]}),maxAnisotropic:g,maxDrawbuffers:b,maxColorAttachments:x,pointSizeDims:r.getParameter(33901),lineWidthDims:r.getParameter(33902),
maxViewportDims:r.getParameter(3386),maxCombinedTextureUnits:r.getParameter(35661),maxCubeMapSize:r.getParameter(34076),maxRenderbufferSize:r.getParameter(34024),maxTextureUnits:r.getParameter(34930),maxTextureSize:r.getParameter(3379),maxAttributes:r.getParameter(34921),maxVertexUniforms:r.getParameter(36347),maxVertexTextureUnits:r.getParameter(35660),maxVaryingVectors:r.getParameter(36348),maxFragmentUniforms:r.getParameter(36349),glsl:r.getParameter(35724),renderer:r.getParameter(7937),vendor:r.getParameter(7936),
version:r.getParameter(7938),readFloat:d,npotTextureCube:na}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(z,aa,jc){var c=z("./util/check"),ba=z("./util/is-typed-array");aa.exports=function(r,N,g,b,x,d,v){function na(K){var E;null===N.next?(c(x.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),E=5121):(c(null!==N.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),E=N.next.colorAttachments[0].texture._texture.type,
c.optional(function(){d.oes_texture_float?(c(5121===E||5126===E,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===E&&c(v.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(5121===E,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var u=0,A=0,H=b.framebufferWidth,q=b.framebufferHeight,F=null;ba(K)?F=K:K&&(c.type(K,"object","invalid arguments to regl.read()"),
u=K.x|0,A=K.y|0,c(0<=u&&u<b.framebufferWidth,"invalid x offset for regl.read"),c(0<=A&&A<b.framebufferHeight,"invalid y offset for regl.read"),H=(K.width||b.framebufferWidth-u)|0,q=(K.height||b.framebufferHeight-A)|0,F=K.data||null);F&&(5121===E?c(F instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===E&&c(F instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));c(0<H&&H+u<=b.framebufferWidth,
"invalid width for read pixels");c(0<q&&q+A<=b.framebufferHeight,"invalid height for read pixels");g();K=H*q*4;F||(5121===E?F=new Uint8Array(K):5126===E&&(F=F||new Float32Array(K)));c.isTypedArray(F,"data buffer for regl.read() must be a typedarray");c(F.byteLength>=K,"data buffer for regl.read() too small");r.pixelStorei(3333,4);r.readPixels(u,A,H,q,6408,E,F);return F}function da(b){var d;N.setFBO({framebuffer:b.framebuffer},function(){d=na(b)});return d}return function(b){return b&&"framebuffer"in
b?da(b):na(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(z,aa,jc){var c=z("./util/sorted-object-keys"),ba=z("./util/check"),r=z("./util/values"),N=[];N[32854]=2;N[32855]=2;N[36194]=2;N[33189]=2;N[36168]=1;N[34041]=4;N[35907]=4;N[34836]=16;N[34842]=8;N[34843]=6;aa.exports=function(g,b,x,d,v){function na(b){this.id=u++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;v.profile&&(this.stats={size:0})}function da(b){var q=b.renderbuffer;ba(q,"must not double destroy renderbuffer");
g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(q);b.renderbuffer=null;b.refCount=0;delete A[b.id];d.renderbufferCount--}var K={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(K.srgba=35907);b.ext_color_buffer_half_float&&(K.rgba16f=34842,K.rgb16f=34843);b.webgl_color_buffer_float&&(K.rgba32f=34836);var E=[];c(K).forEach(function(b){E[K[b]]=b});var u=0,A={};na.prototype.decRef=function(){0>=--this.refCount&&da(this)};v.profile&&(d.getTotalRenderbufferSize=
function(){var b=0;c(A).forEach(function(d){b+=A[d].stats.size});return b});return{create:function(b,q){function c(b,d){var h=0,f=0,e=32854;"object"===typeof b&&b?("shape"in b?(f=b.shape,ba(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),h=f[0]|0,f=f[1]|0):("radius"in b&&(h=f=b.radius|0),"width"in b&&(h=b.width|0),"height"in b&&(f=b.height|0)),"format"in b&&(ba.parameter(b.format,K,"invalid renderbuffer format"),e=K[b.format])):"number"===typeof b?(h=b|0,f="number"===typeof d?d|0:h):b?
ba.raise("invalid arguments to renderbuffer constructor"):h=f=1;ba(0<h&&0<f&&h<=x.maxRenderbufferSize&&f<=x.maxRenderbufferSize,"invalid renderbuffer size");if(h!==u.width||f!==u.height||e!==u.format)return c.width=u.width=h,c.height=u.height=f,u.format=e,g.bindRenderbuffer(36161,u.renderbuffer),g.renderbufferStorage(36161,e,h,f),ba(0===g.getError(),"invalid render buffer format"),v.profile&&(u.stats.size=N[u.format]*u.width*u.height),c.format=E[u.format],c}var u=new na(g.createRenderbuffer());A[u.id]=
u;d.renderbufferCount++;c(b,q);c.resize=function(b,d){var h=b|0,f=d|0||h;if(h===u.width&&f===u.height)return c;ba(0<h&&0<f&&h<=x.maxRenderbufferSize&&f<=x.maxRenderbufferSize,"invalid renderbuffer size");c.width=u.width=h;c.height=u.height=f;g.bindRenderbuffer(36161,u.renderbuffer);g.renderbufferStorage(36161,u.format,h,f);ba(0===g.getError(),"invalid render buffer format");v.profile&&(u.stats.size=N[u.format]*u.width*u.height);return c};c._reglType="renderbuffer";c._renderbuffer=u;v.profile&&(c.stats=
u.stats);c.destroy=function(){u.decRef()};return c},clear:function(){r(A).forEach(da)},restore:function(){r(A).forEach(function(b){b.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,b.renderbuffer);g.renderbufferStorage(36161,b.format,b.width,b.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(z,aa,jc){var c=z("./util/sorted-object-keys"),ba=z("./util/check"),r=z("./util/extend"),N=z("./util/values");aa.exports=
function(g,b,x,d){function v(b,d,g,h){this.name=b;this.id=d;this.location=g;this.info=h}function na(b,d){for(var g=0;g<b.length;++g)if(b[g].id===d.id){b[g].location=d.location;return}b.push(d)}function da(d,q,c){var h=35632===d?u:A,f=h[q];if(!f){var e=b.str(q),f=g.createShader(d);g.shaderSource(f,e);g.compileShader(f);ba.shaderError(g,f,e,d,c);h[q]=f}return f}function K(b,g){this.id=F++;this.fragId=b;this.vertId=g;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;d.profile&&(this.stats=
{uniformsCount:0,attributesCount:0})}function E(q,c,u){var h;h=da(35632,q.fragId);var f=da(35633,q.vertId),e=q.program=g.createProgram();g.attachShader(e,h);g.attachShader(e,f);if(u)for(h=0;h<u.length;++h)f=u[h],g.bindAttribLocation(e,f[0],f[1]);g.linkProgram(e);ba.linkError(g,e,b.str(q.fragId),b.str(q.vertId),c);u=g.getProgramParameter(e,35718);d.profile&&(q.stats.uniformsCount=u);f=q.uniforms;for(h=0;h<u;++h)if(c=g.getActiveUniform(e,h))if(1<c.size)for(var D=0;D<c.size;++D){var x=c.name.replace("[0]",
"["+D+"]");na(f,new v(x,b.id(x),g.getUniformLocation(e,x),c))}else na(f,new v(c.name,b.id(c.name),g.getUniformLocation(e,c.name),c));u=g.getProgramParameter(e,35721);d.profile&&(q.stats.attributesCount=u);q=q.attributes;for(h=0;h<u;++h)(c=g.getActiveAttrib(e,h))&&na(q,new v(c.name,b.id(c.name),g.getAttribLocation(e,c.name),c))}var u={},A={},H={},q=[],F=0;d.profile&&(x.getMaxUniformsCount=function(){var b=0;q.forEach(function(d){d.stats.uniformsCount>b&&(b=d.stats.uniformsCount)});return b},x.getMaxAttributesCount=
function(){var b=0;q.forEach(function(d){d.stats.attributesCount>b&&(b=d.stats.attributesCount)});return b});return{clear:function(){var b=g.deleteShader.bind(g);N(u).forEach(b);u={};N(A).forEach(b);A={};q.forEach(function(b){g.deleteProgram(b.program)});q.length=0;H={};x.shaderCount=0},program:function(b,d,v,h){ba.command(0<=b,"missing vertex shader",v);ba.command(0<=d,"missing fragment shader",v);var f=H[d];f||(f=H[d]={});var e=f[b];if(e&&(e.refCount++,!h))return e;var D=new K(d,b);x.shaderCount++;
E(D,v,h);e||(f[b]=D);q.push(D);return r(D,{destroy:function(){D.refCount--;if(0>=D.refCount){g.deleteProgram(D.program);var b=q.indexOf(D);q.splice(b,1);x.shaderCount--}0>=f[D.vertId].refCount&&(g.deleteShader(A[D.vertId]),delete A[D.vertId],delete H[D.fragId][D.vertId]);c(H[D.fragId]).length||(g.deleteShader(u[D.fragId]),delete u[D.fragId],delete H[D.fragId])}})},restore:function(){u={};A={};for(var b=0;b<q.length;++b)E(q[b],null,q[b].attributes.map(function(b){return[b.location,b.name]}))},shader:da,
frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(z,aa,jc){aa.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(z,aa,jc){aa.exports=function(){var c={"":0},ba=[""];return{id:function(r){var N=c[r];if(N)return N;N=c[r]=ba.length;ba.push(r);return N},str:function(c){return ba[c]}}}},{}],19:[function(z,
aa,jc){function c(a){return"[object "+a+"]"}function ba(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function r(a){return Array.isArray(a)&&0!==a.length&&H(a[0])?!0:!1}function N(a){return Object.prototype.toString.call(a)}function g(a){if(!a)return!1;var b=N(a);return 0<=qa.indexOf(b)?!0:ba(a)||r(a)||E(a)}function b(a,b){36193===a.type?(a.data=A(b),u.freeType(b)):a.data=b}function x(a,b,d,e,g,f){a="undefined"!==typeof ga[a]?ga[a]:h[a]*L[b];f&&(a*=6);if(g){for(e=0;1<=d;)e+=a*
d*d,d/=2;return e}return a*d*e}var d=z("./util/sorted-object-keys"),v=z("./util/check"),na=z("./util/extend"),da=z("./util/values"),K=z("./util/is-typed-array"),E=z("./util/is-ndarray"),u=z("./util/pool"),A=z("./util/to-half-float"),H=z("./util/is-array-like"),q=z("./util/flatten"),F=z("./util/is-pow2");jc=z("./constants/arraytypes.json");var ca=z("./constants/arraytypes.json"),I=[9984,9986,9985,9987],Id=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;
h[6408]=h[35906]=4;var f=c("HTMLCanvasElement"),e=c("OffscreenCanvas"),D=c("CanvasRenderingContext2D"),T=c("ImageBitmap"),V=c("HTMLImageElement"),n=c("HTMLVideoElement"),qa=d(jc).concat([f,e,D,T,V,n]),L=[];L[5121]=1;L[5126]=4;L[36193]=2;L[5123]=2;L[5125]=4;var ga=[];ga[32854]=2;ga[32855]=2;ga[36194]=2;ga[34041]=4;ga[33776]=.5;ga[33777]=.5;ga[33778]=1;ga[33779]=1;ga[35986]=.5;ga[35987]=1;ga[34798]=1;ga[35840]=.5;ga[35841]=.25;ga[35842]=.5;ga[35843]=.25;ga[36196]=.5;aa.exports=function(a,l,c,L,ga,z,
qa){function oa(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Qa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Y(a,b){if("object"===
typeof b&&b){"premultiplyAlpha"in b&&(v.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(v.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(v.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(v.parameter(b.colorSpace,wc,"invalid colorSpace"),a.colorSpace=wc[b.colorSpace]);if("type"in b){var d=b.type;v(l.oes_texture_float||!("float"===d||
"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");v(l.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");v(l.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");v.parameter(d,W,"invalid texture type");a.type=W[d]}var e=
a.width,g=a.height,f=a.channels,d=!1;"shape"in b?(v(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),e=b.shape[0],g=b.shape[1],3===b.shape.length&&(f=b.shape[2],v(0<f&&4>=f,"invalid number of channels"),d=!0),v(0<=e&&e<=c.maxTextureSize,"invalid width"),v(0<=g&&g<=c.maxTextureSize,"invalid height")):("radius"in b&&(e=g=b.radius,v(0<=e&&e<=c.maxTextureSize,"invalid radius")),"width"in b&&(e=b.width,v(0<=e&&e<=c.maxTextureSize,"invalid width")),"height"in b&&(g=b.height,v(0<=g&&g<=
c.maxTextureSize,"invalid height")),"channels"in b&&(f=b.channels,v(0<f&&4>=f,"invalid number of channels"),d=!0));a.width=e|0;a.height=g|0;a.channels=f|0;e=!1;"format"in b&&(e=b.format,v(l.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),v.parameter(e,B,"invalid texture format"),g=a.internalformat=B[e],a.format=ua[g],e in W&&!("type"in b)&&(a.type=W[e]),e in ka&&(a.compressed=!0),e=!0);!d&&e?a.channels=
h[a.format]:d&&!e?a.channels!==Id[a.format]&&(a.format=a.internalformat=Id[a.channels]):e&&d&&v(a.channels===h[a.format],"number of channels inconsistent with specified format")}}function O(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function M(){oa.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function R(a,d){var l=null;g(d)?l=d:d&&(v.type(d,
"object","invalid pixel data type"),Y(a,d),"x"in d&&(a.xOffset=d.x|0),"y"in d&&(a.yOffset=d.y|0),g(d.data)&&(l=d.data));v(!a.compressed||l instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(d.copy){v(!l,"can not specify copy and data field for the same texture");var k=ga.viewportWidth,m=ga.viewportHeight;a.width=a.width||k-a.xOffset;a.height=a.height||m-a.yOffset;a.needsCopy=!0;v(0<=a.xOffset&&a.xOffset<k&&0<=a.yOffset&&a.yOffset<m&&0<a.width&&a.width<=k&&0<a.height&&
a.height<=m,"copy texture read out of bounds")}else if(!l)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(K(l))a.channels=a.channels||4,a.data=l,"type"in d||5121!==a.type||(a.type=ca[Object.prototype.toString.call(l)]|0);else if(ba(l)){a.channels=a.channels||4;k=l;m=k.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:m=u.allocType(a.type,m);m.set(k);a.data=m;break;case 36193:a.data=A(k);break;default:v.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(E(l)){k=l.data;Array.isArray(k)||5121!==a.type||(a.type=ca[Object.prototype.toString.call(k)]|0);var m=l.shape,h=l.stride,p,t,w,B;3===m.length?(w=m[2],B=h[2]):(v(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),B=w=1);p=m[0];t=m[1];m=h[0];h=h[1];a.alignment=1;a.width=p;a.height=t;a.channels=w;a.format=a.internalformat=Id[w];a.needsFree=!0;p=B;l=l.offset;w=a.width;B=a.height;t=a.channels;for(var x=u.allocType(36193===a.type?5126:a.type,w*B*t),G=0,Z=0;Z<B;++Z)for(var C=
0;C<w;++C)for(var W=0;W<t;++W)x[G++]=k[m*C+h*Z+p*W+l];b(a,x)}else if(N(l)===f||N(l)===e||N(l)===D)N(l)===f||N(l)===e?a.element=l:a.element=l.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(N(l)===T)a.element=l,a.width=l.width,a.height=l.height,a.channels=4;else if(N(l)===V)a.element=l,a.width=l.naturalWidth,a.height=l.naturalHeight,a.channels=4;else if(N(l)===n)a.element=l,a.width=l.videoWidth,a.height=l.videoHeight,a.channels=4;else if(r(l)){k=a.width||l[0].length;m=
a.height||l.length;h=a.channels;h=H(l[0][0])?h||l[0][0].length:h||1;p=q.shape(l);w=1;for(B=0;B<p.length;++B)w*=p[B];w=u.allocType(36193===a.type?5126:a.type,w);q.flatten(l,p,"",w);b(a,w);a.alignment=1;a.width=k;a.height=m;a.channels=h;a.format=a.internalformat=Id[h];a.needsFree=!0}5126===a.type?v(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&v(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function sa(b,d,e,k,l){var g=b.element,p=b.data,f=b.internalformat,m=b.format,h=b.type,n=b.width,c=b.height;O(b);g?a.texSubImage2D(d,l,e,k,m,h,g):b.compressed?a.compressedTexSubImage2D(d,l,e,k,f,n,c,p):b.needsCopy?(L(),a.copyTexSubImage2D(d,l,e,k,b.xOffset,b.yOffset,n,c)):a.texSubImage2D(d,l,e,k,n,c,m,h,p)}function J(){return Q.pop()||new M}function Ob(a){a.needsFree&&u.freeType(a.data);M.call(a);Q.push(a)}function $a(){oa.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function P(a,b,d){var e=a.images[0]=J();a.mipmask=1;e.width=a.width=b;e.height=a.height=d;e.channels=a.channels=4}function t(a,b){var d=null;if(g(b))d=a.images[0]=J(),Qa(d,a),R(d,b),a.mipmask=1;else if(Y(a,b),Array.isArray(b.mipmap))for(var e=b.mipmap,l=0;l<e.length;++l)d=a.images[l]=J(),Qa(d,a),d.width>>=l,d.height>>=l,R(d,e[l]),a.mipmask|=1<<l;else d=a.images[0]=J(),Qa(d,a),R(d,b),a.mipmask=1;Qa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||v(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function la(b,d){for(var e=b.images,k=0;k<e.length&&e[k];++k){var l=e[k],g=d,p=k,f=l.element,m=l.data,h=l.internalformat,n=l.format,c=l.type,q=l.width,t=l.height;O(l);f?a.texImage2D(g,p,n,n,c,f):l.compressed?a.compressedTexImage2D(g,p,h,q,t,0,m):l.needsCopy?(L(),a.copyTexImage2D(g,p,n,l.xOffset,l.yOffset,q,t,0)):a.texImage2D(g,
p,n,q,t,0,n,c,m||null)}}function fa(){var a=ha.pop()||new $a;oa.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Ea(a){for(var b=a.images,d=0;d<b.length;++d)b[d]&&Ob(b[d]),b[d]=null;ha.push(a)}function Na(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Hb(a,b){if("min"in b){var d=b.min;v.parameter(d,td);a.minFilter=td[d];0<=I.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in
b&&(d=b.mag,v.parameter(d,Qc),a.magFilter=Qc[d]);var d=a.wrapS,e=a.wrapT;if("wrap"in b){var l=b.wrap;"string"===typeof l?(v.parameter(l,cc),d=e=cc[l]):Array.isArray(l)&&(v.parameter(l[0],cc),v.parameter(l[1],cc),d=cc[l[0]],e=cc[l[1]])}else"wrapS"in b&&(d=b.wrapS,v.parameter(d,cc),d=cc[d]),"wrapT"in b&&(e=b.wrapT,v.parameter(e,cc),e=cc[e]);a.wrapS=d;a.wrapT=e;"anisotropic"in b&&(d=b.anisotropic,v("number"===typeof d&&1<=d&&d<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);
if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":v.parameter(b.mipmap,bc,"invalid mipmap hint");a.mipmapHint=bc[b.mipmap];d=a.genMipmaps=!0;break;case "boolean":d=a.genMipmaps=b.mipmap;break;case "object":v(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;d=!0;break;default:v.raise("invalid mipmap type")}!d||"min"in b||(a.minFilter=9984)}}function Ha(b,d){a.texParameteri(d,10241,b.minFilter);a.texParameteri(d,10240,b.magFilter);a.texParameteri(d,10242,b.wrapS);a.texParameteri(d,
10243,b.wrapT);l.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(d))}function U(b){oa.call(this);this.mipmask=0;this.internalformat=6408;this.id=ra++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Na;qa.profile&&(this.stats={size:0})}function ob(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ea(){var b=Z[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function va(b){var d=b.texture;v(d,"must not double destroy texture");var e=b.unit,l=b.target;0<=e&&(a.activeTexture(33984+e),a.bindTexture(l,null),Z[e]=null);a.deleteTexture(d);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete G[b.id];z.textureCount--}var bc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},cc={repeat:10497,clamp:33071,mirror:33648},Qc={nearest:9728,linear:9729},td=na({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},Qc),wc={none:0,browser:37444},W={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},B={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ka={};l.ext_srgb&&(B.srgb=35904,B.srgba=35906);l.oes_texture_float&&(W.float32=W["float"]=5126);l.oes_texture_half_float&&(W.float16=W["half float"]=36193);l.webgl_depth_texture&&(na(B,{depth:6402,"depth stencil":34041}),na(W,{uint16:5123,uint32:5125,
"depth stencil":34042}));l.webgl_compressed_texture_s3tc&&na(ka,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});l.webgl_compressed_texture_atc&&na(ka,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});l.webgl_compressed_texture_pvrtc&&na(ka,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});l.webgl_compressed_texture_etc1&&(ka["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(a.getParameter(34467));
d(ka).forEach(function(a){var b=ka[a];0<=Ca.indexOf(b)&&(B[a]=b)});var Lb=d(B);c.textureFormats=Lb;var nc=[];d(B).forEach(function(a){nc[B[a]]=a});var Zc=[];d(W).forEach(function(a){Zc[W[a]]=a});var C=[];d(Qc).forEach(function(a){C[Qc[a]]=a});var w=[];d(td).forEach(function(a){w[td[a]]=a});var ia=[];d(cc).forEach(function(a){ia[cc[a]]=a});var ua=Lb.reduce(function(a,b){var d=B[b];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||l.ext_srgb&&(35904===d||35906===d)?a[d]=d:32855===d||0<=b.indexOf("rgba")?
a[d]=6408:a[d]=6407;return a},{}),Q=[],ha=[],ra=0,G={},m=c.maxTextureUnits,Z=Array(m).map(function(){return null});na(U.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var d=0;d<m;++d){var e=Z[d];if(e){if(0<e.bindCount)continue;e.unit=-1}Z[d]=this;b=d;break}b>=m&&v.raise("insufficient number of texture units");qa.profile&&z.maxTextureUnits<b+1&&(z.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&va(this)}});qa.profile&&(z.getTotalTextureSize=function(){var a=0;d(G).forEach(function(b){a+=G[b].stats.size});return a});return{create2D:function(b,d){function e(a,b){var d=l.texInfo;Na.call(d);var g=fa();"number"===typeof a?"number"===typeof b?P(g,a|0,b|0):P(g,a|0,a|0):a?(v.type(a,"object","invalid arguments to regl.texture"),Hb(d,a),t(g,a)):P(g,1,1);d.genMipmaps&&(g.mipmask=(g.width<<1)-1);l.mipmask=g.mipmask;Qa(l,g);v.texture2D(d,g,c);l.internalformat=g.internalformat;
e.width=g.width;e.height=g.height;ob(l);la(g,3553);Ha(d,3553);ea();Ea(g);qa.profile&&(l.stats.size=x(l.internalformat,l.type,g.width,g.height,d.genMipmaps,!1));e.format=nc[l.internalformat];e.type=Zc[l.type];e.mag=C[d.magFilter];e.min=w[d.minFilter];e.wrapS=ia[d.wrapS];e.wrapT=ia[d.wrapT];return e}var l=new U(3553);G[l.id]=l;z.textureCount++;e(b,d);e.subimage=function(a,b,d,g){v(!!a,"must specify image data");b|=0;d|=0;g|=0;var f=J();Qa(f,l);f.width=0;f.height=0;R(f,a);f.width=f.width||(l.width>>
g)-b;f.height=f.height||(l.height>>g)-d;v(l.type===f.type&&l.format===f.format&&l.internalformat===f.internalformat,"incompatible format for texture.subimage");v(0<=b&&0<=d&&b+f.width<=l.width&&d+f.height<=l.height,"texture.subimage write out of bounds");v(l.mipmask&1<<g,"missing mipmap data");v(f.data||f.element||f.needsCopy,"missing image data");ob(l);sa(f,3553,b,d,g);ea();Ob(f);return e};e.resize=function(b,d){var g=b|0,f=d|0||g;if(g===l.width&&f===l.height)return e;e.width=l.width=g;e.height=
l.height=f;ob(l);for(var m=0;l.mipmask>>m;++m){var h=g>>m,n=f>>m;if(!h||!n)break;a.texImage2D(3553,m,l.format,h,n,0,l.format,l.type,null)}ea();qa.profile&&(l.stats.size=x(l.internalformat,l.type,g,f,!1,!1));return e};e._reglType="texture2d";e._texture=l;qa.profile&&(e.stats=l.stats);e.destroy=function(){l.decRef()};return e},createCube:function(b,d,e,l,g,f){function m(a,b,d,e,l,k){var g,f=h.texInfo;Na.call(f);for(g=0;6>g;++g)n[g]=fa();if("number"!==typeof a&&a)if("object"===typeof a)if(b)t(n[0],a),
t(n[1],b),t(n[2],d),t(n[3],e),t(n[4],l),t(n[5],k);else if(Hb(f,a),Y(h,a),"faces"in a)for(a=a.faces,v(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),g=0;6>g;++g)v("object"===typeof a[g]&&!!a[g],"invalid input for cube map face"),Qa(n[g],h),t(n[g],a[g]);else for(g=0;6>g;++g)t(n[g],a);else v.raise("invalid arguments to cube map");else for(a=a|0||1,g=0;6>g;++g)P(n[g],a,a);Qa(h,n[0]);v.optional(function(){c.npotTextureCube||v(F(h.width)&&F(h.height),"your browser does not support non power or two texture dimensions")});
h.mipmask=f.genMipmaps?(n[0].width<<1)-1:n[0].mipmask;v.textureCube(h,f,n,c);h.internalformat=n[0].internalformat;m.width=n[0].width;m.height=n[0].height;ob(h);for(g=0;6>g;++g)la(n[g],34069+g);Ha(f,34067);ea();qa.profile&&(h.stats.size=x(h.internalformat,h.type,m.width,m.height,f.genMipmaps,!0));m.format=nc[h.internalformat];m.type=Zc[h.type];m.mag=C[f.magFilter];m.min=w[f.minFilter];m.wrapS=ia[f.wrapS];m.wrapT=ia[f.wrapT];for(g=0;6>g;++g)Ea(n[g]);return m}var h=new U(34067);G[h.id]=h;z.cubeCount++;
var n=Array(6);m(b,d,e,l,g,f);m.subimage=function(a,b,d,e,l){v(!!b,"must specify image data");v("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");d|=0;e|=0;l|=0;var g=J();Qa(g,h);g.width=0;g.height=0;R(g,b);g.width=g.width||(h.width>>l)-d;g.height=g.height||(h.height>>l)-e;v(h.type===g.type&&h.format===g.format&&h.internalformat===g.internalformat,"incompatible format for texture.subimage");v(0<=d&&0<=e&&d+g.width<=h.width&&e+g.height<=h.height,"texture.subimage write out of bounds");v(h.mipmask&
1<<l,"missing mipmap data");v(g.data||g.element||g.needsCopy,"missing image data");ob(h);sa(g,34069+a,d,e,l);ea();Ob(g);return m};m.resize=function(b){b|=0;if(b!==h.width){m.width=h.width=b;m.height=h.height=b;ob(h);for(var d=0;6>d;++d)for(var e=0;h.mipmask>>e;++e)a.texImage2D(34069+d,e,h.format,b>>e,b>>e,0,h.format,h.type,null);ea();qa.profile&&(h.stats.size=x(h.internalformat,h.type,m.width,m.height,!1,!0));return m}};m._reglType="textureCube";m._texture=h;qa.profile&&(m.stats=h.stats);m.destroy=
function(){h.decRef()};return m},clear:function(){for(var b=0;b<m;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),Z[b]=null;da(G).forEach(va);z.cubeCount=0;z.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<m;++b){var d=Z[b];d&&(d.bindCount=0,d.unit=-1,Z[b]=null)}da(G).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var d=0;32>d;++d)if(0!==(b.mipmask&1<<d))if(3553===b.target)a.texImage2D(3553,d,b.internalformat,b.width>>
d,b.height>>d,0,b.internalformat,b.type,null);else for(var e=0;6>e;++e)a.texImage2D(34069+e,d,b.internalformat,b.width>>d,b.height>>d,0,b.internalformat,b.type,null);Ha(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<m;++b){var d=Z[b];d&&(d.bindCount=0,d.unit=-1,Z[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(z,aa,jc){aa.exports=function(c,ba){function r(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function N(b,g,c){var u=x.pop()||new r;u.startQueryIndex=b;u.endQueryIndex=g;u.sum=0;u.stats=c;d.push(u)}if(!ba.ext_disjoint_timer_query)return null;var g=[],b=[],x=[],d=[],v=[],na=[];return{beginQuery:function(d){var c=g.pop()||
ba.ext_disjoint_timer_query.createQueryEXT();ba.ext_disjoint_timer_query.beginQueryEXT(35007,c);b.push(c);N(b.length-1,b.length,d)},endQuery:function(){ba.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:N,update:function(){var c,r;c=b.length;if(0!==c){na.length=Math.max(na.length,c+1);v.length=Math.max(v.length,c+1);v[0]=0;var E=na[0]=0;for(r=c=0;r<b.length;++r){var u=b[r];ba.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(E+=ba.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),
g.push(u)):b[c++]=u;v[r+1]=E;na[r+1]=c}b.length=c;for(r=c=0;r<d.length;++r){var E=d[r],A=E.startQueryIndex,u=E.endQueryIndex;E.sum+=v[u]-v[A];A=na[A];u=na[u];u===A?(E.stats.gpuTime+=E.sum/1E6,x.push(E)):(E.startQueryIndex=A,E.endQueryIndex=u,d[c++]=E)}d.length=c}},getNumPendingQueries:function(){return b.length},clear:function(){g.push.apply(g,b);for(var d=0;d<g.length;d++)ba.ext_disjoint_timer_query.deleteQueryEXT(g[d]);b.length=0;g.length=0},restore:function(){b.length=0;g.length=0}}}},{}],21:[function(z,
aa,jc){function c(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function ba(b){b=Error("(regl) "+b);console.error(b);throw b;}function r(b,d){b||ba(d)}function N(b){return b?": "+b:""}function g(b,d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===
typeof b}}function b(b,d,g){0>d.indexOf(b)&&ba("invalid value"+N(g)+". must be one of: "+d)}function x(b,d){for(b+="";b.length<d;)b=" "+b;return b}function d(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function v(b,d){this.number=b;this.line=d;this.errors=[]}function na(b,d,g){this.file=b;this.line=d;this.message=g}function da(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?
b[1]:"unknown"}function K(){var b=Error(),b=(b.stack||b).toString(),d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function E(b,g){var f=b.split("\n"),h=1,n=0,q={unknown:new d,0:new d};q.unknown.name=q[0].name=g||da();q.unknown.lines.push(new v(0,""));for(var u=0;u<f.length;++u){var x=f[u],a=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(x);if(a)switch(a[1]){case "line":if(a=/(\d+)(\s+\d+)?/.exec(a[2]))h=a[1]|0,a[2]&&(n=a[2]|0,n in q||(q[n]=
new d));break;case "define":if(a=/SHADER_NAME(_B64)?\s+(.*)$/.exec(a[2]))q[n].name=a[1]?c(a[2]):a[2]}q[n].lines.push(new v(h++,x))}I(q).forEach(function(a){var b=q[a];b.lines.forEach(function(a){b.index[a.number]=a})});return q}function u(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);e?d.push(new na(e[1]|0,e[2]|0,e[3].trim())):0<b.length&&d.push(new na("unknown",0,b))}});return d}function A(b,d){d.forEach(function(d){var g=b[d.file];
if(g){var f=g.index[d.line];if(f){f.errors.push(d);g.hasErrors=!0;return}}b.unknown.hasErrors=!0;b.unknown.lines[0].errors.push(d)})}function H(b){b._commandRef=da()}function q(b,d){var g=K();ba(b+" in command "+(d||da())+("unknown"===g?"":" called from "+g))}function F(b,d,f,h){g(b,d)||q("invalid parameter type"+N(f)+". expected "+d+", got "+typeof b,h||da())}function ca(b,d){return 32820===b||32819===b||33635===b?2:34042===b?4:f[b]*d}var I=z("./sorted-object-keys"),Id=z("./is-typed-array");z=z("./extend");
var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),f={};f[5120]=f[5121]=1;f[5122]=f[5123]=f[36193]=f[33635]=f[32819]=f[32820]=2;f[5124]=f[5125]=f[5126]=f[34042]=4;aa.exports=z(r,{optional:function(b){b()},raise:ba,commandRaise:q,command:function(b,d,g){b||q(d,g||da())},parameter:function(b,d,g){b in d||ba("unknown parameter ("+b+")"+N(g)+". possible values: "+I(d).join())},commandParameter:function(b,d,g,f){b in d||q("unknown parameter ("+b+")"+
N(g)+". possible values: "+I(d).join(),f||da())},constructor:function(b){I(b).forEach(function(b){0>h.indexOf(b)&&ba('invalid regl constructor argument "'+b+'". must be one of '+h)})},type:function(b,d,f){g(b,d)||ba("invalid parameter type"+N(f)+". expected "+d+", got "+typeof b)},commandType:F,isTypedArray:function(b,d){Id(b)||ba("invalid parameter type"+N(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||ba("invalid parameter type, ("+b+")"+N(d)+". must be a nonnegative integer")},
oneOf:b,shaderError:function(b,d,g,f,h){if(!b.getShaderParameter(d,b.COMPILE_STATUS)){d=b.getShaderInfoLog(d);b=f===b.FRAGMENT_SHADER?"fragment":"vertex";F(g,"string",b+" shader source must be a string",h);var c=E(g,h);g=u(d);A(c,g);I(c).forEach(function(b){function d(a,b){e.push(a);g.push(b||"")}var a=c[b];if(a.hasErrors){var e=[""],g=[""];d("file number "+b+": "+a.name+"\n","color:red;text-decoration:underline;font-weight:bold");a.lines.forEach(function(a){if(0<a.errors.length){d(x(a.number,4)+
"|  ","background-color:yellow; font-weight:bold");d(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var b=0;a.errors.forEach(function(e){e=e.message;var l=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);if(l){var g=l[1];e=l[2];switch(g){case "assign":g="="}b=Math.max(a.line.indexOf(g,b),0)}else b=0;d(x("| ",6));d(x("^^^",b+3)+"\n","font-weight:bold");d(x("| ",6));d(e+"\n","font-weight:bold")});d(x("| ",6)+"\n")}else d(x(a.number,4)+"|  "),d(a.line+"\n","color:red")});"undefined"===typeof document||
window.chrome?console.log(e.join("")):(g[0]=e.join("%c"),console.log.apply(console,g))}});r.raise("Error compiling "+b+" shader, "+c[0].name)}},linkError:function(b,d,g,f,h){b.getProgramParameter(d,b.LINK_STATUS)||(b=b.getProgramInfoLog(d),g=E(g,h),f='Error linking program with vertex shader, "'+E(f,h)[0].name+'", and fragment shader "'+g[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+b),
r.raise(f))},callSite:K,saveCommandRef:H,saveDrawInfo:function(b,d,g,f){function h(b){return b?f.id(b):0}function c(b,a){I(a).forEach(function(a){b[f.id(a)]=!0})}H(b);b._fragId=h(b["static"].frag);b._vertId=h(b["static"].vert);var q=b._uniformSet={};c(q,d["static"]);c(q,d.dynamic);d=b._attributeSet={};c(d,g["static"]);c(d,g.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(d,g,f){d.texture?b(d.texture._texture.internalformat,
g,"unsupported texture format for attachment"):b(d.renderbuffer._renderbuffer.format,f,"unsupported renderbuffer format for attachment")},guessCommand:da,texture2D:function(b,d,g){var f=d.width,h=d.height,c=d.channels;r(0<f&&f<=g.maxTextureSize&&0<h&&h<=g.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||r(!(f&f-1)&&!!f&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==f&&1!==h&&r(9984!==b.minFilter&&9986!==b.minFilter&&
9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(r(!(f&f-1)&&!!f&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),r(d.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&r(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!b.genMipmaps,"mipmap generation not supported with float textures"));var q=d.images;for(g=0;16>g;++g)if(q[g]){var u=
f>>g,a=h>>g;r(d.mipmask&1<<g,"missing mipmap data");var l=q[g];r(l.width===u&&l.height===a,"invalid shape for mip images");r(l.format===d.format&&l.internalformat===d.internalformat&&l.type===d.type,"incompatible type for mip image");!l.compressed&&l.data&&(u=Math.ceil(ca(l.type,c)*u/l.unpackAlignment)*l.unpackAlignment,r(l.data.byteLength===u*a,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||r(0===(d.mipmask&1<<g),"extra mipmap data");d.compressed&&r(!b.genMipmaps,
"mipmap generation for compressed images not supported")},textureCube:function(b,d,g,f){var h=b.width,c=b.height,q=b.channels;r(0<h&&h<=f.maxTextureSize&&0<c&&c<=f.maxTextureSize,"invalid texture shape");r(h===c,"cube map must be square");r(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(f=0;f<g.length;++f){var u=g[f];r(u.width===h&&u.height===c,"inconsistent cube map face shape");d.genMipmaps&&(r(!u.compressed,"can not generate mipmap for compressed textures"),r(1===u.mipmask,
"can not specify mipmaps and generate mipmaps"));for(var a=u.images,l=0;16>l;++l){var v=a[l];if(v){var x=h>>l,A=c>>l;r(u.mipmask&1<<l,"missing mipmap data");r(v.width===x&&v.height===A,"invalid shape for mip images");r(v.format===b.format&&v.internalformat===b.internalformat&&v.type===b.type,"incompatible type for mip image");v.compressed||v.data&&r(v.data.byteLength===x*A*Math.max(ca(v.type,q),v.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,
"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(z,aa,jc){aa.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(z,aa,jc){function c(c){return Array.prototype.slice.call(c)}var ba=z("./extend"),r=z("./compiled-fns");aa.exports=function(){function N(){var b=[],d=[];return ba(function(){b.push.apply(b,c(arguments))},{def:function(){var g="v"+x;x++;d.push(g);0<arguments.length&&(b.push(g,"="),b.push.apply(b,
c(arguments)),b.push(";"));return g},toString:function(){return c([0<d.length?"var "+d.join(",")+";":"",c(b).join("")]).join("")}})}function g(){function b(c,u){g(c,u,"=",d.def(c,u),";")}var d=N(),g=N(),v=d.toString,u=g.toString;return ba(function(){d.apply(d,c(arguments))},{def:d.def,entry:d,exit:g,save:b,set:function(g,c,q){b(g,c);d(g,c,"=",q,";")},toString:function(){return v()+u()}})}var b=0,x=0,d={},v={};return{global:N(),link:function(g){var c="$"+b,v=!1;"object"===typeof g&&g.name&&(c=g.name.replace(/ /g,
"_"),v=!0);if(c in d)return c;d[c]=g;v||b++;return c},block:N,proc:function(b,d){function x(){var b="a"+r.length;r.push(b);return b}var r=[];d=d||0;for(var u=0;u<d;++u)x();var u=g(),A=u.toString;return v[b]=ba(u,{arg:x,toString:function(){return c(["function(",r.join(),"){",A(),"}"]).join("")}})},scope:g,cond:function(){var b=c(arguments).join(""),d=g(),v=g(),x=d.toString,u=v.toString;return ba(d,{then:function(){d.apply(d,c(arguments));return this},"else":function(){v.apply(v,c(arguments));return this},
toString:function(){var d=u();d&&(d="else{"+d+"}");return c(["if(",b,"){",x(),"}",d]).join("")}})},compile:function(){var b=[],g=[];Object.keys(d).sort(function(b,d){var g="$"===b.charAt(0),c="$"===d.charAt(0);return g||c?g&&c?+b.slice(1)<+d.slice(1)?-1:1:g&&!c?-1:1:b.localeCompare(d)}).forEach(function(c){var v=d[c];b.push(c);g.push(v)});for(var c=0,v=b.length-1;-1<v;v--)if("$"===b[v].charAt(0)){c=v;break}c=b.slice(c).join();v=r[c];if(!v)throw Error("missing precompiled function with key: "+c);return v.apply(null,
g)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(z,aa,jc){aa.exports={$0:function(c){var ba,r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,Id,h,f,e,D,T,V,n,qa,L,ga;ba=c.attributes;r=c.current;N=c.framebuffer;g=c.gl;b=c.next;x=c.vao;d=b.blend_color;v=r.blend_color;z=b.blend_equation;da=r.blend_equation;K=b.blend_func;E=r.blend_func;u=b.colorMask;A=r.colorMask;H=b.depth_range;q=r.depth_range;F=b.polygonOffset_offset;ca=r.polygonOffset_offset;I=b.sample_coverage;Id=r.sample_coverage;h=b.scissor_box;f=
r.scissor_box;e=b.stencil_func;D=r.stencil_func;T=b.stencil_opBack;V=r.stencil_opBack;n=b.stencil_opFront;qa=r.stencil_opFront;L=b.viewport;ga=r.viewport;return{poll:function(){var a,l,c,x,ba,cb,aa,oa,Qa,Y,O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea;r.dirty=!1;l=b.blend_enable;c=b.cull_enable;x=b.depth_enable;ba=b.dither;cb=b.polygonOffset_enable;aa=b.sample_alpha;oa=b.sample_enable;Qa=b.scissor_enable;Y=b.stencil_enable;O=b.cull_face;M=r.cull_face;R=b.depth_func;sa=r.depth_func;J=b.depth_mask;Ob=r.depth_mask;
$a=b.frontFace;P=r.frontFace;t=b.lineWidth;la=r.lineWidth;fa=b.stencil_mask;Ea=r.stencil_mask;a=N.next;a!==N.cur&&(a?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null),N.cur=a);l!==r.blend_enable&&(l?g.enable(3042):g.disable(3042),r.blend_enable=l);c!==r.cull_enable&&(c?g.enable(2884):g.disable(2884),r.cull_enable=c);x!==r.depth_enable&&(x?g.enable(2929):g.disable(2929),r.depth_enable=x);ba!==r.dither&&(ba?g.enable(3024):g.disable(3024),r.dither=ba);cb!==r.polygonOffset_enable&&
(cb?g.enable(32823):g.disable(32823),r.polygonOffset_enable=cb);aa!==r.sample_alpha&&(aa?g.enable(32926):g.disable(32926),r.sample_alpha=aa);oa!==r.sample_enable&&(oa?g.enable(32928):g.disable(32928),r.sample_enable=oa);Qa!==r.scissor_enable&&(Qa?g.enable(3089):g.disable(3089),r.scissor_enable=Qa);Y!==r.stencil_enable&&(Y?g.enable(2960):g.disable(2960),r.stencil_enable=Y);if(d[0]!==v[0]||d[1]!==v[1]||d[2]!==v[2]||d[3]!==v[3])g.blendColor(d[0],d[1],d[2],d[3]),v[0]=d[0],v[1]=d[1],v[2]=d[2],v[3]=d[3];
if(z[0]!==da[0]||z[1]!==da[1])g.blendEquationSeparate(z[0],z[1]),da[0]=z[0],da[1]=z[1];if(K[0]!==E[0]||K[1]!==E[1]||K[2]!==E[2]||K[3]!==E[3])g.blendFuncSeparate(K[0],K[1],K[2],K[3]),E[0]=K[0],E[1]=K[1],E[2]=K[2],E[3]=K[3];if(u[0]!==A[0]||u[1]!==A[1]||u[2]!==A[2]||u[3]!==A[3])g.colorMask(u[0],u[1],u[2],u[3]),A[0]=u[0],A[1]=u[1],A[2]=u[2],A[3]=u[3];O!==M&&(g.cullFace(O),r.cull_face=O);R!==sa&&(g.depthFunc(R),r.depth_func=R);J!==Ob&&(g.depthMask(J),r.depth_mask=J);if(H[0]!==q[0]||H[1]!==q[1])g.depthRange(H[0],
H[1]),q[0]=H[0],q[1]=H[1];$a!==P&&(g.frontFace($a),r.frontFace=$a);t!==la&&(g.lineWidth(t),r.lineWidth=t);if(F[0]!==ca[0]||F[1]!==ca[1])g.polygonOffset(F[0],F[1]),ca[0]=F[0],ca[1]=F[1];if(I[0]!==Id[0]||I[1]!==Id[1])g.sampleCoverage(I[0],I[1]),Id[0]=I[0],Id[1]=I[1];if(h[0]!==f[0]||h[1]!==f[1]||h[2]!==f[2]||h[3]!==f[3])g.scissor(h[0],h[1],h[2],h[3]),f[0]=h[0],f[1]=h[1],f[2]=h[2],f[3]=h[3];if(e[0]!==D[0]||e[1]!==D[1]||e[2]!==D[2])g.stencilFunc(e[0],e[1],e[2]),D[0]=e[0],D[1]=e[1],D[2]=e[2];fa!==Ea&&(g.stencilMask(fa),
r.stencil_mask=fa);if(T[0]!==V[0]||T[1]!==V[1]||T[2]!==V[2]||T[3]!==V[3])g.stencilOpSeparate(T[0],T[1],T[2],T[3]),V[0]=T[0],V[1]=T[1],V[2]=T[2],V[3]=T[3];if(n[0]!==qa[0]||n[1]!==qa[1]||n[2]!==qa[2]||n[3]!==qa[3])g.stencilOpSeparate(n[0],n[1],n[2],n[3]),qa[0]=n[0],qa[1]=n[1],qa[2]=n[2],qa[3]=n[3];if(L[0]!==ga[0]||L[1]!==ga[1]||L[2]!==ga[2]||L[3]!==ga[3])g.viewport(L[0],L[1],L[2],L[3]),ga[0]=L[0],ga[1]=L[1],ga[2]=L[2],ga[3]=L[3]},refresh:function(){var a,l,c,ma,Ka,cb,aa,oa,Qa,Y,O,M,R,sa,J,Ob;r.dirty=
!1;l=b.blend_enable;c=b.cull_enable;ma=b.depth_enable;Ka=b.dither;cb=b.polygonOffset_enable;aa=b.sample_alpha;oa=b.sample_enable;Qa=b.scissor_enable;Y=b.stencil_enable;O=b.cull_face;M=b.depth_func;R=b.depth_mask;sa=b.frontFace;J=b.lineWidth;Ob=b.stencil_mask;(a=N.next)?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null);N.cur=a;a=ba[0];a.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):
(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[1];a.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[2];a.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(2),
g.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[3];a.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[4];a.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,a.x,a.y,a.z,
a.w),a.buffer=null);a=ba[5];a.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[6];a.buffer?(g.enableVertexAttribArray(6),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[7];a.buffer?
(g.enableVertexAttribArray(7),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[8];a.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[9];a.buffer?(g.enableVertexAttribArray(9),
g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[10];a.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[11];a.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,a.buffer.buffer),
g.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[12];a.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[13];a.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(13,
a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[14];a.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=ba[15];a.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(15,a.size,a.type,a.normalized,
a.stride,a.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);x.currentVAO=null;x.setVAO(x.targetVAO);l?g.enable(3042):g.disable(3042);r.blend_enable=l;c?g.enable(2884):g.disable(2884);r.cull_enable=c;ma?g.enable(2929):g.disable(2929);r.depth_enable=ma;Ka?g.enable(3024):g.disable(3024);r.dither=Ka;cb?g.enable(32823):g.disable(32823);r.polygonOffset_enable=cb;aa?g.enable(32926):g.disable(32926);r.sample_alpha=aa;oa?g.enable(32928):g.disable(32928);r.sample_enable=
oa;Qa?g.enable(3089):g.disable(3089);r.scissor_enable=Qa;Y?g.enable(2960):g.disable(2960);r.stencil_enable=Y;g.blendColor(d[0],d[1],d[2],d[3]);v[0]=d[0];v[1]=d[1];v[2]=d[2];v[3]=d[3];g.blendEquationSeparate(z[0],z[1]);da[0]=z[0];da[1]=z[1];g.blendFuncSeparate(K[0],K[1],K[2],K[3]);E[0]=K[0];E[1]=K[1];E[2]=K[2];E[3]=K[3];g.colorMask(u[0],u[1],u[2],u[3]);A[0]=u[0];A[1]=u[1];A[2]=u[2];A[3]=u[3];g.cullFace(O);r.cull_face=O;g.depthFunc(M);r.depth_func=M;g.depthMask(R);r.depth_mask=R;g.depthRange(H[0],H[1]);
q[0]=H[0];q[1]=H[1];g.frontFace(sa);r.frontFace=sa;g.lineWidth(J);r.lineWidth=J;g.polygonOffset(F[0],F[1]);ca[0]=F[0];ca[1]=F[1];g.sampleCoverage(I[0],I[1]);Id[0]=I[0];Id[1]=I[1];g.scissor(h[0],h[1],h[2],h[3]);f[0]=h[0];f[1]=h[1];f[2]=h[2];f[3]=h[3];g.stencilFunc(e[0],e[1],e[2]);D[0]=e[0];D[1]=e[1];D[2]=e[2];g.stencilMask(Ob);r.stencil_mask=Ob;g.stencilOpSeparate(T[0],T[1],T[2],T[3]);V[0]=T[0];V[1]=T[1];V[2]=T[2];V[3]=T[3];g.stencilOpSeparate(n[0],n[1],n[2],n[3]);qa[0]=n[0];qa[1]=n[1];qa[2]=n[2];
qa[3]=n[3];g.viewport(L[0],L[1],L[2],L[3]);ga[0]=L[0];ga[1]=L[1];ga[2]=L[2];ga[3]=L[3]}}},$3:function(c,ba,r,N){var g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb;g=c.context;b=c.current;x=c.framebuffer;d=c.gl;v=c.next;z=c.shader;da=c.vao;K=v.blend_color;E=b.blend_color;u=v.blend_equation;A=b.blend_equation;H=v.blend_func;q=b.blend_func;F=v.colorMask;ca=b.colorMask;I=v.depth_range;aa=b.depth_range;h=v.polygonOffset_offset;f=b.polygonOffset_offset;e=v.sample_coverage;D=b.sample_coverage;
T=v.scissor_box;V=b.scissor_box;n=v.stencil_func;qa=b.stencil_func;L=v.stencil_opBack;ga=b.stencil_opBack;a=v.stencil_opFront;l=b.stencil_opFront;X=v.viewport;ma=b.viewport;Ka={};cb={};return{batch:function(g,c){var r,Y,O,M,R;r=x.next;r!==x.cur&&(r?d.bindFramebuffer(36160,r.framebuffer):d.bindFramebuffer(36160,null),x.cur=r);if(b.dirty){r=v.dither;r!==b.dither&&(r?d.enable(3024):d.disable(3024),b.dither=r);r=v.blend_enable;r!==b.blend_enable&&(r?d.enable(3042):d.disable(3042),b.blend_enable=r);r=
K[0];O=K[1];M=K[2];R=K[3];if(r!==E[0]||O!==E[1]||M!==E[2]||R!==E[3])d.blendColor(r,O,M,R),E[0]=r,E[1]=O,E[2]=M,E[3]=R;r=u[0];O=u[1];if(r!==A[0]||O!==A[1])d.blendEquationSeparate(r,O),A[0]=r,A[1]=O;r=H[0];O=H[1];M=H[2];R=H[3];if(r!==q[0]||O!==q[1]||M!==q[2]||R!==q[3])d.blendFuncSeparate(r,O,M,R),q[0]=r,q[1]=O,q[2]=M,q[3]=R;r=v.depth_enable;r!==b.depth_enable&&(r?d.enable(2929):d.disable(2929),b.depth_enable=r);r=v.depth_func;r!==b.depth_func&&(d.depthFunc(r),b.depth_func=r);r=I[0];O=I[1];if(r!==aa[0]||
O!==aa[1])d.depthRange(r,O),aa[0]=r,aa[1]=O;r=v.depth_mask;r!==b.depth_mask&&(d.depthMask(r),b.depth_mask=r);r=F[0];O=F[1];M=F[2];R=F[3];if(r!==ca[0]||O!==ca[1]||M!==ca[2]||R!==ca[3])d.colorMask(r,O,M,R),ca[0]=r,ca[1]=O,ca[2]=M,ca[3]=R;r=v.cull_enable;r!==b.cull_enable&&(r?d.enable(2884):d.disable(2884),b.cull_enable=r);r=v.cull_face;r!==b.cull_face&&(d.cullFace(r),b.cull_face=r);r=v.frontFace;r!==b.frontFace&&(d.frontFace(r),b.frontFace=r);r=v.lineWidth;r!==b.lineWidth&&(d.lineWidth(r),b.lineWidth=
r);r=v.polygonOffset_enable;r!==b.polygonOffset_enable&&(r?d.enable(32823):d.disable(32823),b.polygonOffset_enable=r);r=h[0];O=h[1];if(r!==f[0]||O!==f[1])d.polygonOffset(r,O),f[0]=r,f[1]=O;r=v.sample_alpha;r!==b.sample_alpha&&(r?d.enable(32926):d.disable(32926),b.sample_alpha=r);r=v.sample_enable;r!==b.sample_enable&&(r?d.enable(32928):d.disable(32928),b.sample_enable=r);r=e[0];O=e[1];if(r!==D[0]||O!==D[1])d.sampleCoverage(r,O),D[0]=r,D[1]=O;r=v.stencil_enable;r!==b.stencil_enable&&(r?d.enable(2960):
d.disable(2960),b.stencil_enable=r);r=v.stencil_mask;r!==b.stencil_mask&&(d.stencilMask(r),b.stencil_mask=r);r=n[0];O=n[1];M=n[2];if(r!==qa[0]||O!==qa[1]||M!==qa[2])d.stencilFunc(r,O,M),qa[0]=r,qa[1]=O,qa[2]=M;r=a[0];O=a[1];M=a[2];R=a[3];if(r!==l[0]||O!==l[1]||M!==l[2]||R!==l[3])d.stencilOpSeparate(r,O,M,R),l[0]=r,l[1]=O,l[2]=M,l[3]=R;r=L[0];O=L[1];M=L[2];R=L[3];if(r!==ga[0]||O!==ga[1]||M!==ga[2]||R!==ga[3])d.stencilOpSeparate(r,O,M,R),ga[0]=r,ga[1]=O,ga[2]=M,ga[3]=R;r=v.scissor_enable;r!==b.scissor_enable&&
(r?d.enable(3089):d.disable(3089),b.scissor_enable=r);r=T[0];O=T[1];M=T[2];R=T[3];if(r!==V[0]||O!==V[1]||M!==V[2]||R!==V[3])d.scissor(r,O,M,R),V[0]=r,V[1]=O,V[2]=M,V[3]=R;r=X[0];O=X[1];M=X[2];R=X[3];if(r!==ma[0]||O!==ma[1]||M!==ma[2]||R!==ma[3])d.viewport(r,O,M,R),ma[0]=r,ma[1]=O,ma[2]=M,ma[3]=R;b.dirty=!1}if(r=b.profile)Y=performance.now(),ba.count+=c;O=z.program(z.vert,z.frag);d.useProgram(O.program);da.setVAO(null);M=O.id;(R=cb[M])||(R=cb[M]=N(O));R.call(this,g,c);da.setVAO(null);r&&(ba.cpuTime+=
performance.now()-Y)},draw:function(g){var c,N,Y,O,M;c=x.next;c!==x.cur&&(c?d.bindFramebuffer(36160,c.framebuffer):d.bindFramebuffer(36160,null),x.cur=c);if(b.dirty){c=v.dither;c!==b.dither&&(c?d.enable(3024):d.disable(3024),b.dither=c);c=v.blend_enable;c!==b.blend_enable&&(c?d.enable(3042):d.disable(3042),b.blend_enable=c);c=K[0];Y=K[1];O=K[2];M=K[3];if(c!==E[0]||Y!==E[1]||O!==E[2]||M!==E[3])d.blendColor(c,Y,O,M),E[0]=c,E[1]=Y,E[2]=O,E[3]=M;c=u[0];Y=u[1];if(c!==A[0]||Y!==A[1])d.blendEquationSeparate(c,
Y),A[0]=c,A[1]=Y;c=H[0];Y=H[1];O=H[2];M=H[3];if(c!==q[0]||Y!==q[1]||O!==q[2]||M!==q[3])d.blendFuncSeparate(c,Y,O,M),q[0]=c,q[1]=Y,q[2]=O,q[3]=M;c=v.depth_enable;c!==b.depth_enable&&(c?d.enable(2929):d.disable(2929),b.depth_enable=c);c=v.depth_func;c!==b.depth_func&&(d.depthFunc(c),b.depth_func=c);c=I[0];Y=I[1];if(c!==aa[0]||Y!==aa[1])d.depthRange(c,Y),aa[0]=c,aa[1]=Y;c=v.depth_mask;c!==b.depth_mask&&(d.depthMask(c),b.depth_mask=c);c=F[0];Y=F[1];O=F[2];M=F[3];if(c!==ca[0]||Y!==ca[1]||O!==ca[2]||M!==
ca[3])d.colorMask(c,Y,O,M),ca[0]=c,ca[1]=Y,ca[2]=O,ca[3]=M;c=v.cull_enable;c!==b.cull_enable&&(c?d.enable(2884):d.disable(2884),b.cull_enable=c);c=v.cull_face;c!==b.cull_face&&(d.cullFace(c),b.cull_face=c);c=v.frontFace;c!==b.frontFace&&(d.frontFace(c),b.frontFace=c);c=v.lineWidth;c!==b.lineWidth&&(d.lineWidth(c),b.lineWidth=c);c=v.polygonOffset_enable;c!==b.polygonOffset_enable&&(c?d.enable(32823):d.disable(32823),b.polygonOffset_enable=c);c=h[0];Y=h[1];if(c!==f[0]||Y!==f[1])d.polygonOffset(c,Y),
f[0]=c,f[1]=Y;c=v.sample_alpha;c!==b.sample_alpha&&(c?d.enable(32926):d.disable(32926),b.sample_alpha=c);c=v.sample_enable;c!==b.sample_enable&&(c?d.enable(32928):d.disable(32928),b.sample_enable=c);c=e[0];Y=e[1];if(c!==D[0]||Y!==D[1])d.sampleCoverage(c,Y),D[0]=c,D[1]=Y;c=v.stencil_enable;c!==b.stencil_enable&&(c?d.enable(2960):d.disable(2960),b.stencil_enable=c);c=v.stencil_mask;c!==b.stencil_mask&&(d.stencilMask(c),b.stencil_mask=c);c=n[0];Y=n[1];O=n[2];if(c!==qa[0]||Y!==qa[1]||O!==qa[2])d.stencilFunc(c,
Y,O),qa[0]=c,qa[1]=Y,qa[2]=O;c=a[0];Y=a[1];O=a[2];M=a[3];if(c!==l[0]||Y!==l[1]||O!==l[2]||M!==l[3])d.stencilOpSeparate(c,Y,O,M),l[0]=c,l[1]=Y,l[2]=O,l[3]=M;c=L[0];Y=L[1];O=L[2];M=L[3];if(c!==ga[0]||Y!==ga[1]||O!==ga[2]||M!==ga[3])d.stencilOpSeparate(c,Y,O,M),ga[0]=c,ga[1]=Y,ga[2]=O,ga[3]=M;c=v.scissor_enable;c!==b.scissor_enable&&(c?d.enable(3089):d.disable(3089),b.scissor_enable=c);c=T[0];Y=T[1];O=T[2];M=T[3];if(c!==V[0]||Y!==V[1]||O!==V[2]||M!==V[3])d.scissor(c,Y,O,M),V[0]=c,V[1]=Y,V[2]=O,V[3]=
M;c=X[0];Y=X[1];O=X[2];M=X[3];if(c!==ma[0]||Y!==ma[1]||O!==ma[2]||M!==ma[3])d.viewport(c,Y,O,M),ma[0]=c,ma[1]=Y,ma[2]=O,ma[3]=M;b.dirty=!1}if(c=b.profile)N=performance.now(),ba.count++;Y=z.program(z.vert,z.frag);d.useProgram(Y.program);da.setVAO(null);O=Y.id;(M=Ka[O])||(M=Ka[O]=r(Y));M.call(this,g);da.setVAO(null);c&&(ba.cpuTime+=performance.now()-N)},scope:function(a,d,e){var l,f;if(l=b.profile)f=performance.now(),ba.count++;d(g,a,e);l&&(ba.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(c,
ba,r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea,Na,Hb,Ha,U,ob,ea,va,bc,cc,Qc,td,wc,W,B,ka,Ca,Lb,nc,Zc,C,w,ia,ua,Q,ha,ra){var G,m,Z,y,ja,pa,k,tc,S,p,Bb,yb,jf,ne,ve,je,Ed,re,qd,fe,se,xd,Dd,Zd,Wd,Ve,kf,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb;G=c.attributes;m=c.context;Z=c.current;y=c.draw;ja=c.elements;pa=c.framebuffer;k=c.gl;tc=c.next;S=c.shader;
p=c.uniforms;Bb=c.vao;yb=tc.blend_color;jf=Z.blend_color;ne=tc.blend_equation;ve=Z.blend_equation;je=tc.blend_func;Ed=Z.blend_func;re=tc.colorMask;qd=Z.colorMask;fe=tc.depth_range;se=Z.depth_range;xd=tc.polygonOffset_offset;Dd=Z.polygonOffset_offset;Zd=tc.sample_coverage;Wd=Z.sample_coverage;Ve=tc.scissor_box;kf=Z.scissor_box;af=tc.stencil_func;Ad=Z.stencil_func;Fe=tc.stencil_opBack;Sd=Z.stencil_opBack;Td=tc.stencil_opFront;le=Z.stencil_opFront;Xd=tc.viewport;rd=Z.viewport;jd={};vd={};$c=new Float32Array(16);
kd=new Float32Array(16);oc=new Float32Array(16);id=new Float32Array(16);ed=new Float32Array(16);Lc=new Float32Array(16);qc=new Float32Array(16);ab=new Float32Array(16);Ic=new Float32Array(16);Db=new Float32Array(16);pc=new Float32Array(16);Ta=new Float32Array(16);Jc=new Float32Array(16);$b=new Float32Array(16);rc=new Float32Array(16);Fd=new Float32Array(16);Bd=new Float32Array(16);Ac=new Float32Array(16);Xb=new Float32Array(16);Gc=new Float32Array(16);Rc=new Float32Array(16);La=new Float32Array(16);
Eb=new Float32Array(16);Wa=new Float32Array(16);wa=new Float32Array(16);md=new Float32Array(16);hb=new Float32Array(16);Sa=new Float32Array(16);Gb=new Float32Array(16);db=new Float32Array(16);ec=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(a,e){var l,f,c,h;l=pa.next;l!==pa.cur&&(l?k.bindFramebuffer(36160,l.framebuffer):k.bindFramebuffer(36160,null),pa.cur=l);if(Z.dirty){var p,n,r,S,D,ba,L,I,T,X,V,ab,Ta,ta,ga,xa,yb,Db,Aa,$b,Ia,qa,Lc,Ra,ed;p=re[0];n=re[1];r=re[2];S=re[3];if(p!==
qd[0]||n!==qd[1]||r!==qd[2]||S!==qd[3])k.colorMask(p,n,r,S),qd[0]=p,qd[1]=n,qd[2]=r,qd[3]=S;D=tc.frontFace;D!==Z.frontFace&&(k.frontFace(D),Z.frontFace=D);ba=tc.polygonOffset_enable;ba!==Z.polygonOffset_enable&&(ba?k.enable(32823):k.disable(32823),Z.polygonOffset_enable=ba);L=xd[0];I=xd[1];if(L!==Dd[0]||I!==Dd[1])k.polygonOffset(L,I),Dd[0]=L,Dd[1]=I;T=tc.sample_alpha;T!==Z.sample_alpha&&(T?k.enable(32926):k.disable(32926),Z.sample_alpha=T);X=tc.sample_enable;X!==Z.sample_enable&&(X?k.enable(32928):
k.disable(32928),Z.sample_enable=X);V=Zd[0];ab=Zd[1];if(V!==Wd[0]||ab!==Wd[1])k.sampleCoverage(V,ab),Wd[0]=V,Wd[1]=ab;Ta=tc.stencil_enable;Ta!==Z.stencil_enable&&(Ta?k.enable(2960):k.disable(2960),Z.stencil_enable=Ta);ta=tc.stencil_mask;ta!==Z.stencil_mask&&(k.stencilMask(ta),Z.stencil_mask=ta);ga=af[0];xa=af[1];yb=af[2];if(ga!==Ad[0]||xa!==Ad[1]||yb!==Ad[2])k.stencilFunc(ga,xa,yb),Ad[0]=ga,Ad[1]=xa,Ad[2]=yb;Db=Td[0];Aa=Td[1];$b=Td[2];Ia=Td[3];if(Db!==le[0]||Aa!==le[1]||$b!==le[2]||Ia!==le[3])k.stencilOpSeparate(Db,
Aa,$b,Ia),le[0]=Db,le[1]=Aa,le[2]=$b,le[3]=Ia;qa=Fe[0];Lc=Fe[1];Ra=Fe[2];ed=Fe[3];if(qa!==Sd[0]||Lc!==Sd[1]||Ra!==Sd[2]||ed!==Sd[3])k.stencilOpSeparate(qa,Lc,Ra,ed),Sd[0]=qa,Sd[1]=Lc,Sd[2]=Ra,Sd[3]=ed}k.blendColor(0,0,0,0);jf[0]=0;jf[1]=0;jf[2]=0;jf[3]=0;k.disable(3042);Z.blend_enable=!1;k.blendEquationSeparate(32774,32774);ve[0]=32774;ve[1]=32774;k.blendFuncSeparate(770,771,1,1);Ed[0]=770;Ed[1]=771;Ed[2]=1;Ed[3]=1;k.enable(2884);Z.cull_enable=!0;k.cullFace(1029);Z.cull_face=1029;k.enable(2929);Z.depth_enable=
!0;k.depthFunc(513);Z.depth_func=513;k.depthMask(!0);Z.depth_mask=!0;k.depthRange(0,1);se[0]=0;se[1]=1;k.disable(3024);Z.dither=!1;k.lineWidth(2);Z.lineWidth=2;k.enable(3089);Z.scissor_enable=!0;f=Z.profile;Z.profile=!1;k.useProgram(kc.program);var ma,Za,qc,ya,Ve,Ja,oc,gb,jb,za,Jc,Da,rb,sb,Xa,Ya,Ic,rc,kd,Va,Mb,pc,Fa,$c,Pa,Ba,mb,vb,Cb,tb,id,wb,je;Bb.setVAO(null);ma=bc.location;Za=G[ma];Za.buffer||k.enableVertexAttribArray(ma);if(Za.type!==N.dtype||4!==Za.size||Za.buffer!==N||!1!==Za.normalized||0!==
Za.offset||0!==Za.stride)k.bindBuffer(34962,N.buffer),k.vertexAttribPointer(ma,4,N.dtype,!1,0,0),Za.type=N.dtype,Za.size=4,Za.buffer=N,Za.normalized=!1,Za.offset=0,Za.stride=0;qc=cc.location;ya=G[qc];ya.buffer||k.enableVertexAttribArray(qc);if(ya.type!==g.dtype||4!==ya.size||ya.buffer!==g||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)k.bindBuffer(34962,g.buffer),k.vertexAttribPointer(qc,4,g.dtype,!1,0,0),ya.type=g.dtype,ya.size=4,ya.buffer=g,ya.normalized=!1,ya.offset=0,ya.stride=0;Ve=Qc.location;
Ja=G[Ve];Ja.buffer||k.enableVertexAttribArray(Ve);if(Ja.type!==b.dtype||4!==Ja.size||Ja.buffer!==b||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(Ve,4,b.dtype,!1,0,0),Ja.type=b.dtype,Ja.size=4,Ja.buffer=b,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;oc=td.location;gb=G[oc];gb.buffer||k.enableVertexAttribArray(oc);if(gb.type!==x.dtype||4!==gb.size||gb.buffer!==x||!1!==gb.normalized||0!==gb.offset||0!==gb.stride)k.bindBuffer(34962,x.buffer),k.vertexAttribPointer(oc,
4,x.dtype,!1,0,0),gb.type=x.dtype,gb.size=4,gb.buffer=x,gb.normalized=!1,gb.offset=0,gb.stride=0;jb=wc.location;za=G[jb];za.buffer||k.enableVertexAttribArray(jb);if(za.type!==d.dtype||4!==za.size||za.buffer!==d||!1!==za.normalized||0!==za.offset||0!==za.stride)k.bindBuffer(34962,d.buffer),k.vertexAttribPointer(jb,4,d.dtype,!1,0,0),za.type=d.dtype,za.size=4,za.buffer=d,za.normalized=!1,za.offset=0,za.stride=0;Jc=W.location;Da=G[Jc];Da.buffer||k.enableVertexAttribArray(Jc);if(Da.type!==v.dtype||4!==
Da.size||Da.buffer!==v||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)k.bindBuffer(34962,v.buffer),k.vertexAttribPointer(Jc,4,v.dtype,!1,0,0),Da.type=v.dtype,Da.size=4,Da.buffer=v,Da.normalized=!1,Da.offset=0,Da.stride=0;rb=B.location;sb=G[rb];sb.buffer||k.enableVertexAttribArray(rb);if(sb.type!==z.dtype||4!==sb.size||sb.buffer!==z||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)k.bindBuffer(34962,z.buffer),k.vertexAttribPointer(rb,4,z.dtype,!1,0,0),sb.type=z.dtype,sb.size=4,sb.buffer=z,sb.normalized=
!1,sb.offset=0,sb.stride=0;Xa=ka.location;Ya=G[Xa];Ya.buffer||k.enableVertexAttribArray(Xa);if(Ya.type!==da.dtype||4!==Ya.size||Ya.buffer!==da||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)k.bindBuffer(34962,da.buffer),k.vertexAttribPointer(Xa,4,da.dtype,!1,0,0),Ya.type=da.dtype,Ya.size=4,Ya.buffer=da,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ic=Ca.location;rc=G[Ic];rc.buffer||k.enableVertexAttribArray(Ic);if(rc.type!==K.dtype||4!==rc.size||rc.buffer!==K||!1!==rc.normalized||0!==rc.offset||0!==
rc.stride)k.bindBuffer(34962,K.buffer),k.vertexAttribPointer(Ic,4,K.dtype,!1,0,0),rc.type=K.dtype,rc.size=4,rc.buffer=K,rc.normalized=!1,rc.offset=0,rc.stride=0;kd=Lb.location;Va=G[kd];Va.buffer||k.enableVertexAttribArray(kd);if(Va.type!==E.dtype||4!==Va.size||Va.buffer!==E||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)k.bindBuffer(34962,E.buffer),k.vertexAttribPointer(kd,4,E.dtype,!1,0,0),Va.type=E.dtype,Va.size=4,Va.buffer=E,Va.normalized=!1,Va.offset=0,Va.stride=0;Mb=nc.location;pc=G[Mb];pc.buffer||
k.enableVertexAttribArray(Mb);if(pc.type!==u.dtype||4!==pc.size||pc.buffer!==u||!1!==pc.normalized||0!==pc.offset||0!==pc.stride)k.bindBuffer(34962,u.buffer),k.vertexAttribPointer(Mb,4,u.dtype,!1,0,0),pc.type=u.dtype,pc.size=4,pc.buffer=u,pc.normalized=!1,pc.offset=0,pc.stride=0;Fa=Zc.location;$c=G[Fa];$c.buffer||k.enableVertexAttribArray(Fa);if($c.type!==A.dtype||4!==$c.size||$c.buffer!==A||!1!==$c.normalized||0!==$c.offset||0!==$c.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(Fa,4,A.dtype,
!1,0,0),$c.type=A.dtype,$c.size=4,$c.buffer=A,$c.normalized=!1,$c.offset=0,$c.stride=0;Pa=C.location;Ba=G[Pa];Ba.buffer||k.enableVertexAttribArray(Pa);if(Ba.type!==H.dtype||4!==Ba.size||Ba.buffer!==H||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)k.bindBuffer(34962,H.buffer),k.vertexAttribPointer(Pa,4,H.dtype,!1,0,0),Ba.type=H.dtype,Ba.size=4,Ba.buffer=H,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;mb=w.location;vb=G[mb];vb.buffer||k.enableVertexAttribArray(mb);if(vb.type!==q.dtype||4!==vb.size||vb.buffer!==
q||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)k.bindBuffer(34962,q.buffer),k.vertexAttribPointer(mb,4,q.dtype,!1,0,0),vb.type=q.dtype,vb.size=4,vb.buffer=q,vb.normalized=!1,vb.offset=0,vb.stride=0;Cb=ia.location;tb=G[Cb];tb.buffer||k.enableVertexAttribArray(Cb);if(tb.type!==F.dtype||4!==tb.size||tb.buffer!==F||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)k.bindBuffer(34962,F.buffer),k.vertexAttribPointer(Cb,4,F.dtype,!1,0,0),tb.type=F.dtype,tb.size=4,tb.buffer=F,tb.normalized=!1,tb.offset=
0,tb.stride=0;id=Qa.location;wb=G[id];wb.buffer||k.enableVertexAttribArray(id);if(wb.type!==ca.dtype||4!==wb.size||wb.buffer!==ca||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)k.bindBuffer(34962,ca.buffer),k.vertexAttribPointer(id,4,ca.dtype,!1,0,0),wb.type=ca.dtype,wb.size=4,wb.buffer=ca,wb.normalized=!1,wb.offset=0,wb.stride=0;k.uniform1i(ua.location,oa.bind());(je=y.elements)?k.bindBuffer(34963,je.buffer.buffer):Bb.currentVAO&&(je=ja.getElements(Bb.currentVAO.elements))&&k.bindBuffer(34963,
je.buffer.buffer);for(c=0;c<e;++c){h=a[c];var fe,Xd,Fd,ne,aa,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ka,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,cb,gd,oe,Wc,Id,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d;jd.height=h.viewportHeight;jd.width=h.viewportWidth;jd.x=h.viewportX;jd.y=h.viewportY;fe=jd.x|0;Xd=jd.y|0;Fd="width"in jd?jd.width|0:m.framebufferWidth-fe;ne="height"in jd?jd.height|0:m.framebufferHeight-Xd;aa=m.viewportWidth;m.viewportWidth=Fd;Wb=m.viewportHeight;m.viewportHeight=
ne;k.viewport(fe,Xd,Fd,ne);rd[0]=fe;rd[1]=Xd;rd[2]=Fd;rd[3]=ne;vd.height=h.scissorHeight;vd.width=h.scissorWidth;vd.x=h.scissorX;vd.y=h.scissorY;ac=vd.x|0;Qb=vd.y|0;Ga="width"in vd?vd.width|0:m.framebufferWidth-ac;Yb="height"in vd?vd.height|0:m.framebufferHeight-Qb;k.scissor(ac,Qb,Ga,Yb);kf[0]=ac;kf[1]=Qb;kf[2]=Ga;kf[3]=Yb;nb=h.dim0A;k.uniformMatrix4fv(O.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(Bd[0]=nb[0],Bd[1]=nb[1],Bd[2]=nb[2],Bd[3]=nb[3],Bd[4]=nb[4],Bd[5]=nb[5],Bd[6]=nb[6],
Bd[7]=nb[7],Bd[8]=nb[8],Bd[9]=nb[9],Bd[10]=nb[10],Bd[11]=nb[11],Bd[12]=nb[12],Bd[13]=nb[13],Bd[14]=nb[14],Bd[15]=nb[15],Bd));xb=h.dim1A;k.uniformMatrix4fv(J.location,!1,Array.isArray(xb)||xb instanceof Float32Array?xb:(Ac[0]=xb[0],Ac[1]=xb[1],Ac[2]=xb[2],Ac[3]=xb[3],Ac[4]=xb[4],Ac[5]=xb[5],Ac[6]=xb[6],Ac[7]=xb[7],Ac[8]=xb[8],Ac[9]=xb[9],Ac[10]=xb[10],Ac[11]=xb[11],Ac[12]=xb[12],Ac[13]=xb[13],Ac[14]=xb[14],Ac[15]=xb[15],Ac));Nb=h.dim0B;k.uniformMatrix4fv(M.location,!1,Array.isArray(Nb)||Nb instanceof
Float32Array?Nb:(Xb[0]=Nb[0],Xb[1]=Nb[1],Xb[2]=Nb[2],Xb[3]=Nb[3],Xb[4]=Nb[4],Xb[5]=Nb[5],Xb[6]=Nb[6],Xb[7]=Nb[7],Xb[8]=Nb[8],Xb[9]=Nb[9],Xb[10]=Nb[10],Xb[11]=Nb[11],Xb[12]=Nb[12],Xb[13]=Nb[13],Xb[14]=Nb[14],Xb[15]=Nb[15],Xb));Rb=h.dim1B;k.uniformMatrix4fv(Ob.location,!1,Array.isArray(Rb)||Rb instanceof Float32Array?Rb:(Gc[0]=Rb[0],Gc[1]=Rb[1],Gc[2]=Rb[2],Gc[3]=Rb[3],Gc[4]=Rb[4],Gc[5]=Rb[5],Gc[6]=Rb[6],Gc[7]=Rb[7],Gc[8]=Rb[8],Gc[9]=Rb[9],Gc[10]=Rb[10],Gc[11]=Rb[11],Gc[12]=Rb[12],Gc[13]=Rb[13],Gc[14]=
Rb[14],Gc[15]=Rb[15],Gc));gc=h.dim0C;k.uniformMatrix4fv(R.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Rc[0]=gc[0],Rc[1]=gc[1],Rc[2]=gc[2],Rc[3]=gc[3],Rc[4]=gc[4],Rc[5]=gc[5],Rc[6]=gc[6],Rc[7]=gc[7],Rc[8]=gc[8],Rc[9]=gc[9],Rc[10]=gc[10],Rc[11]=gc[11],Rc[12]=gc[12],Rc[13]=gc[13],Rc[14]=gc[14],Rc[15]=gc[15],Rc));ic=h.dim1C;k.uniformMatrix4fv($a.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(La[0]=ic[0],La[1]=ic[1],La[2]=ic[2],La[3]=ic[3],La[4]=ic[4],La[5]=ic[5],La[6]=
ic[6],La[7]=ic[7],La[8]=ic[8],La[9]=ic[9],La[10]=ic[10],La[11]=ic[11],La[12]=ic[12],La[13]=ic[13],La[14]=ic[14],La[15]=ic[15],La));Ka=h.dim0D;k.uniformMatrix4fv(sa.location,!1,Array.isArray(Ka)||Ka instanceof Float32Array?Ka:(Eb[0]=Ka[0],Eb[1]=Ka[1],Eb[2]=Ka[2],Eb[3]=Ka[3],Eb[4]=Ka[4],Eb[5]=Ka[5],Eb[6]=Ka[6],Eb[7]=Ka[7],Eb[8]=Ka[8],Eb[9]=Ka[9],Eb[10]=Ka[10],Eb[11]=Ka[11],Eb[12]=Ka[12],Eb[13]=Ka[13],Eb[14]=Ka[14],Eb[15]=Ka[15],Eb));Bc=h.dim1D;k.uniformMatrix4fv(P.location,!1,Array.isArray(Bc)||Bc instanceof
Float32Array?Bc:(Wa[0]=Bc[0],Wa[1]=Bc[1],Wa[2]=Bc[2],Wa[3]=Bc[3],Wa[4]=Bc[4],Wa[5]=Bc[5],Wa[6]=Bc[6],Wa[7]=Bc[7],Wa[8]=Bc[8],Wa[9]=Bc[9],Wa[10]=Bc[10],Wa[11]=Bc[11],Wa[12]=Bc[12],Wa[13]=Bc[13],Wa[14]=Bc[14],Wa[15]=Bc[15],Wa));Cc=h.loA;k.uniformMatrix4fv(Hb.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(wa[0]=Cc[0],wa[1]=Cc[1],wa[2]=Cc[2],wa[3]=Cc[3],wa[4]=Cc[4],wa[5]=Cc[5],wa[6]=Cc[6],wa[7]=Cc[7],wa[8]=Cc[8],wa[9]=Cc[9],wa[10]=Cc[10],wa[11]=Cc[11],wa[12]=Cc[12],wa[13]=Cc[13],wa[14]=
Cc[14],wa[15]=Cc[15],wa));Ec=h.hiA;k.uniformMatrix4fv(la.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(md[0]=Ec[0],md[1]=Ec[1],md[2]=Ec[2],md[3]=Ec[3],md[4]=Ec[4],md[5]=Ec[5],md[6]=Ec[6],md[7]=Ec[7],md[8]=Ec[8],md[9]=Ec[9],md[10]=Ec[10],md[11]=Ec[11],md[12]=Ec[12],md[13]=Ec[13],md[14]=Ec[14],md[15]=Ec[15],md));Nc=h.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(hb[0]=Nc[0],hb[1]=Nc[1],hb[2]=Nc[2],hb[3]=Nc[3],hb[4]=Nc[4],hb[5]=Nc[5],hb[6]=Nc[6],
hb[7]=Nc[7],hb[8]=Nc[8],hb[9]=Nc[9],hb[10]=Nc[10],hb[11]=Nc[11],hb[12]=Nc[12],hb[13]=Nc[13],hb[14]=Nc[14],hb[15]=Nc[15],hb));Yc=h.hiB;k.uniformMatrix4fv(fa.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(Sa[0]=Yc[0],Sa[1]=Yc[1],Sa[2]=Yc[2],Sa[3]=Yc[3],Sa[4]=Yc[4],Sa[5]=Yc[5],Sa[6]=Yc[6],Sa[7]=Yc[7],Sa[8]=Yc[8],Sa[9]=Yc[9],Sa[10]=Yc[10],Sa[11]=Yc[11],Sa[12]=Yc[12],Sa[13]=Yc[13],Sa[14]=Yc[14],Sa[15]=Yc[15],Sa));Sc=h.loC;k.uniformMatrix4fv(U.location,!1,Array.isArray(Sc)||Sc instanceof
Float32Array?Sc:(Gb[0]=Sc[0],Gb[1]=Sc[1],Gb[2]=Sc[2],Gb[3]=Sc[3],Gb[4]=Sc[4],Gb[5]=Sc[5],Gb[6]=Sc[6],Gb[7]=Sc[7],Gb[8]=Sc[8],Gb[9]=Sc[9],Gb[10]=Sc[10],Gb[11]=Sc[11],Gb[12]=Sc[12],Gb[13]=Sc[13],Gb[14]=Sc[14],Gb[15]=Sc[15],Gb));Oc=h.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(db[0]=Oc[0],db[1]=Oc[1],db[2]=Oc[2],db[3]=Oc[3],db[4]=Oc[4],db[5]=Oc[5],db[6]=Oc[6],db[7]=Oc[7],db[8]=Oc[8],db[9]=Oc[9],db[10]=Oc[10],db[11]=Oc[11],db[12]=Oc[12],db[13]=Oc[13],db[14]=
Oc[14],db[15]=Oc[15],db));Kb=h.loD;k.uniformMatrix4fv(ob.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(ec[0]=Kb[0],ec[1]=Kb[1],ec[2]=Kb[2],ec[3]=Kb[3],ec[4]=Kb[4],ec[5]=Kb[5],ec[6]=Kb[6],ec[7]=Kb[7],ec[8]=Kb[8],ec[9]=Kb[9],ec[10]=Kb[10],ec[11]=Kb[11],ec[12]=Kb[12],ec[13]=Kb[13],ec[14]=Kb[14],ec[15]=Kb[15],ec));Fb=h.hiD;k.uniformMatrix4fv(Na.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Sb[0]=Fb[0],Sb[1]=Fb[1],Sb[2]=Fb[2],Sb[3]=Fb[3],Sb[4]=Fb[4],Sb[5]=Fb[5],Sb[6]=Fb[6],
Sb[7]=Fb[7],Sb[8]=Fb[8],Sb[9]=Fb[9],Sb[10]=Fb[10],Sb[11]=Fb[11],Sb[12]=Fb[12],Sb[13]=Fb[13],Sb[14]=Fb[14],Sb[15]=Fb[15],Sb));Pc=h.resolution;Hc=Pc[0];hc=Pc[1];c&&Tc===Hc&&Vc===hc||(Tc=Hc,Vc=hc,k.uniform2f(Q.location,Hc,hc));cb=h.viewBoxPos;gd=cb[0];Wc=cb[1];c&&oe===gd&&Id===Wc||(oe=gd,Id=Wc,k.uniform2f(ha.location,gd,Wc));Ld=h.viewBoxSize;we=Ld[0];Ud=Ld[1];c&&xe===we&&Jd===Ud||(xe=we,Jd=Ud,k.uniform2f(ra.location,we,Ud));Gd=h.maskHeight;c&&bd===Gd||(bd=Gd,k.uniform1f(ea.location,Gd));Fc=h.drwLayer;
c&&od===Fc||(od=Fc,k.uniform1f(t.location,Fc));hd=h.contextColor;ad=hd[0];yd=hd[1];ye=hd[2];uf=hd[3];c&&pd===ad&&zd===yd&&te===ye&&ee===uf||(pd=ad,zd=yd,te=ye,ee=uf,k.uniform4f(Y.location,ad,yd,ye,uf));(de=h.maskTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);be=de._texture;k.uniform1i(va.location,be.bind());ue=h.offset;if($d=h.count)je?k.drawElements(1,$d,je.type,ue<<(je.type-5121>>1)):k.drawArrays(1,ue,$d),m.viewportWidth=aa,m.viewportHeight=Wb,be.unbind()}oa.unbind();Z.dirty=!0;Bb.setVAO(null);
Z.profile=f},draw:function(a){var e,l,c,f,h,p;e=pa.next;e!==pa.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),pa.cur=e);if(Z.dirty){e=re[0];p=re[1];l=re[2];c=re[3];if(e!==qd[0]||p!==qd[1]||l!==qd[2]||c!==qd[3])k.colorMask(e,p,l,c),qd[0]=e,qd[1]=p,qd[2]=l,qd[3]=c;e=tc.frontFace;e!==Z.frontFace&&(k.frontFace(e),Z.frontFace=e);e=tc.polygonOffset_enable;e!==Z.polygonOffset_enable&&(e?k.enable(32823):k.disable(32823),Z.polygonOffset_enable=e);e=xd[0];p=xd[1];if(e!==Dd[0]||
p!==Dd[1])k.polygonOffset(e,p),Dd[0]=e,Dd[1]=p;e=tc.sample_alpha;e!==Z.sample_alpha&&(e?k.enable(32926):k.disable(32926),Z.sample_alpha=e);e=tc.sample_enable;e!==Z.sample_enable&&(e?k.enable(32928):k.disable(32928),Z.sample_enable=e);e=Zd[0];p=Zd[1];if(e!==Wd[0]||p!==Wd[1])k.sampleCoverage(e,p),Wd[0]=e,Wd[1]=p;e=tc.stencil_enable;e!==Z.stencil_enable&&(e?k.enable(2960):k.disable(2960),Z.stencil_enable=e);e=tc.stencil_mask;e!==Z.stencil_mask&&(k.stencilMask(e),Z.stencil_mask=e);e=af[0];p=af[1];l=af[2];
if(e!==Ad[0]||p!==Ad[1]||l!==Ad[2])k.stencilFunc(e,p,l),Ad[0]=e,Ad[1]=p,Ad[2]=l;e=Td[0];p=Td[1];l=Td[2];c=Td[3];if(e!==le[0]||p!==le[1]||l!==le[2]||c!==le[3])k.stencilOpSeparate(e,p,l,c),le[0]=e,le[1]=p,le[2]=l,le[3]=c;e=Fe[0];p=Fe[1];l=Fe[2];c=Fe[3];if(e!==Sd[0]||p!==Sd[1]||l!==Sd[2]||c!==Sd[3])k.stencilOpSeparate(e,p,l,c),Sd[0]=e,Sd[1]=p,Sd[2]=l,Sd[3]=c}jd.height=a.viewportHeight;jd.width=a.viewportWidth;jd.x=a.viewportX;jd.y=a.viewportY;l=jd.x|0;c=jd.y|0;f="width"in jd?jd.width|0:m.framebufferWidth-
l;h="height"in jd?jd.height|0:m.framebufferHeight-c;e=m.viewportWidth;m.viewportWidth=f;p=m.viewportHeight;m.viewportHeight=h;k.viewport(l,c,f,h);rd[0]=l;rd[1]=c;rd[2]=f;rd[3]=h;k.blendColor(0,0,0,0);jf[0]=0;jf[1]=0;jf[2]=0;jf[3]=0;k.disable(3042);Z.blend_enable=!1;k.blendEquationSeparate(32774,32774);ve[0]=32774;ve[1]=32774;k.blendFuncSeparate(770,771,1,1);Ed[0]=770;Ed[1]=771;Ed[2]=1;Ed[3]=1;k.enable(2884);Z.cull_enable=!0;k.cullFace(1029);Z.cull_face=1029;k.enable(2929);Z.depth_enable=!0;k.depthFunc(513);
Z.depth_func=513;k.depthMask(!0);Z.depth_mask=!0;k.depthRange(0,1);se[0]=0;se[1]=1;k.disable(3024);Z.dither=!1;k.lineWidth(2);Z.lineWidth=2;vd.height=a.scissorHeight;vd.width=a.scissorWidth;vd.x=a.scissorX;vd.y=a.scissorY;l=vd.x|0;c=vd.y|0;f="width"in vd?vd.width|0:m.framebufferWidth-l;h="height"in vd?vd.height|0:m.framebufferHeight-c;k.scissor(l,c,f,h);kf[0]=l;kf[1]=c;kf[2]=f;kf[3]=h;k.enable(3089);Z.scissor_enable=!0;l=Z.profile;Z.profile=!1;k.useProgram(r.program);Bb.setVAO(null);c=bc.location;
f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==N.dtype||4!==f.size||f.buffer!==N||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,N.buffer),k.vertexAttribPointer(c,4,N.dtype,!1,0,0),f.type=N.dtype,f.size=4,f.buffer=N,f.normalized=!1,f.offset=0,f.stride=0;c=cc.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==g.dtype||4!==f.size||f.buffer!==g||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,g.buffer),k.vertexAttribPointer(c,4,g.dtype,!1,
0,0),f.type=g.dtype,f.size=4,f.buffer=g,f.normalized=!1,f.offset=0,f.stride=0;c=Qc.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==b.dtype||4!==f.size||f.buffer!==b||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(c,4,b.dtype,!1,0,0),f.type=b.dtype,f.size=4,f.buffer=b,f.normalized=!1,f.offset=0,f.stride=0;c=td.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==x.dtype||4!==f.size||f.buffer!==x||!1!==f.normalized||
0!==f.offset||0!==f.stride)k.bindBuffer(34962,x.buffer),k.vertexAttribPointer(c,4,x.dtype,!1,0,0),f.type=x.dtype,f.size=4,f.buffer=x,f.normalized=!1,f.offset=0,f.stride=0;c=wc.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==d.dtype||4!==f.size||f.buffer!==d||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,d.buffer),k.vertexAttribPointer(c,4,d.dtype,!1,0,0),f.type=d.dtype,f.size=4,f.buffer=d,f.normalized=!1,f.offset=0,f.stride=0;c=W.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);
if(f.type!==v.dtype||4!==f.size||f.buffer!==v||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,v.buffer),k.vertexAttribPointer(c,4,v.dtype,!1,0,0),f.type=v.dtype,f.size=4,f.buffer=v,f.normalized=!1,f.offset=0,f.stride=0;c=B.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==z.dtype||4!==f.size||f.buffer!==z||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,z.buffer),k.vertexAttribPointer(c,4,z.dtype,!1,0,0),f.type=z.dtype,f.size=4,f.buffer=z,f.normalized=
!1,f.offset=0,f.stride=0;c=ka.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==da.dtype||4!==f.size||f.buffer!==da||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,da.buffer),k.vertexAttribPointer(c,4,da.dtype,!1,0,0),f.type=da.dtype,f.size=4,f.buffer=da,f.normalized=!1,f.offset=0,f.stride=0;c=Ca.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==K.dtype||4!==f.size||f.buffer!==K||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,K.buffer),
k.vertexAttribPointer(c,4,K.dtype,!1,0,0),f.type=K.dtype,f.size=4,f.buffer=K,f.normalized=!1,f.offset=0,f.stride=0;c=Lb.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==E.dtype||4!==f.size||f.buffer!==E||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,E.buffer),k.vertexAttribPointer(c,4,E.dtype,!1,0,0),f.type=E.dtype,f.size=4,f.buffer=E,f.normalized=!1,f.offset=0,f.stride=0;c=nc.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==u.dtype||4!==f.size||
f.buffer!==u||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,u.buffer),k.vertexAttribPointer(c,4,u.dtype,!1,0,0),f.type=u.dtype,f.size=4,f.buffer=u,f.normalized=!1,f.offset=0,f.stride=0;c=Zc.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==A.dtype||4!==f.size||f.buffer!==A||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(c,4,A.dtype,!1,0,0),f.type=A.dtype,f.size=4,f.buffer=A,f.normalized=!1,f.offset=0,f.stride=0;
c=C.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==H.dtype||4!==f.size||f.buffer!==H||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,H.buffer),k.vertexAttribPointer(c,4,H.dtype,!1,0,0),f.type=H.dtype,f.size=4,f.buffer=H,f.normalized=!1,f.offset=0,f.stride=0;c=w.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==q.dtype||4!==f.size||f.buffer!==q||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,q.buffer),k.vertexAttribPointer(c,
4,q.dtype,!1,0,0),f.type=q.dtype,f.size=4,f.buffer=q,f.normalized=!1,f.offset=0,f.stride=0;c=ia.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==F.dtype||4!==f.size||f.buffer!==F||!1!==f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,F.buffer),k.vertexAttribPointer(c,4,F.dtype,!1,0,0),f.type=F.dtype,f.size=4,f.buffer=F,f.normalized=!1,f.offset=0,f.stride=0;c=Qa.location;f=G[c];f.buffer||k.enableVertexAttribArray(c);if(f.type!==ca.dtype||4!==f.size||f.buffer!==ca||!1!==
f.normalized||0!==f.offset||0!==f.stride)k.bindBuffer(34962,ca.buffer),k.vertexAttribPointer(c,4,ca.dtype,!1,0,0),f.type=ca.dtype,f.size=4,f.buffer=ca,f.normalized=!1,f.offset=0,f.stride=0;c=a.dim0A;k.uniformMatrix4fv(O.location,!1,Array.isArray(c)||c instanceof Float32Array?c:($c[0]=c[0],$c[1]=c[1],$c[2]=c[2],$c[3]=c[3],$c[4]=c[4],$c[5]=c[5],$c[6]=c[6],$c[7]=c[7],$c[8]=c[8],$c[9]=c[9],$c[10]=c[10],$c[11]=c[11],$c[12]=c[12],$c[13]=c[13],$c[14]=c[14],$c[15]=c[15],$c));c=a.dim1A;k.uniformMatrix4fv(J.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(kd[0]=c[0],kd[1]=c[1],kd[2]=c[2],kd[3]=c[3],kd[4]=c[4],kd[5]=c[5],kd[6]=c[6],kd[7]=c[7],kd[8]=c[8],kd[9]=c[9],kd[10]=c[10],kd[11]=c[11],kd[12]=c[12],kd[13]=c[13],kd[14]=c[14],kd[15]=c[15],kd));c=a.dim0B;k.uniformMatrix4fv(M.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(oc[0]=c[0],oc[1]=c[1],oc[2]=c[2],oc[3]=c[3],oc[4]=c[4],oc[5]=c[5],oc[6]=c[6],oc[7]=c[7],oc[8]=c[8],oc[9]=c[9],oc[10]=c[10],oc[11]=c[11],oc[12]=c[12],oc[13]=c[13],oc[14]=
c[14],oc[15]=c[15],oc));c=a.dim1B;k.uniformMatrix4fv(Ob.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(id[0]=c[0],id[1]=c[1],id[2]=c[2],id[3]=c[3],id[4]=c[4],id[5]=c[5],id[6]=c[6],id[7]=c[7],id[8]=c[8],id[9]=c[9],id[10]=c[10],id[11]=c[11],id[12]=c[12],id[13]=c[13],id[14]=c[14],id[15]=c[15],id));c=a.dim0C;k.uniformMatrix4fv(R.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(ed[0]=c[0],ed[1]=c[1],ed[2]=c[2],ed[3]=c[3],ed[4]=c[4],ed[5]=c[5],ed[6]=c[6],ed[7]=c[7],ed[8]=c[8],ed[9]=
c[9],ed[10]=c[10],ed[11]=c[11],ed[12]=c[12],ed[13]=c[13],ed[14]=c[14],ed[15]=c[15],ed));c=a.dim1C;k.uniformMatrix4fv($a.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Lc[0]=c[0],Lc[1]=c[1],Lc[2]=c[2],Lc[3]=c[3],Lc[4]=c[4],Lc[5]=c[5],Lc[6]=c[6],Lc[7]=c[7],Lc[8]=c[8],Lc[9]=c[9],Lc[10]=c[10],Lc[11]=c[11],Lc[12]=c[12],Lc[13]=c[13],Lc[14]=c[14],Lc[15]=c[15],Lc));c=a.dim0D;k.uniformMatrix4fv(sa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(qc[0]=c[0],qc[1]=c[1],qc[2]=c[2],qc[3]=
c[3],qc[4]=c[4],qc[5]=c[5],qc[6]=c[6],qc[7]=c[7],qc[8]=c[8],qc[9]=c[9],qc[10]=c[10],qc[11]=c[11],qc[12]=c[12],qc[13]=c[13],qc[14]=c[14],qc[15]=c[15],qc));c=a.dim1D;k.uniformMatrix4fv(P.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(ab[0]=c[0],ab[1]=c[1],ab[2]=c[2],ab[3]=c[3],ab[4]=c[4],ab[5]=c[5],ab[6]=c[6],ab[7]=c[7],ab[8]=c[8],ab[9]=c[9],ab[10]=c[10],ab[11]=c[11],ab[12]=c[12],ab[13]=c[13],ab[14]=c[14],ab[15]=c[15],ab));c=a.loA;k.uniformMatrix4fv(Hb.location,!1,Array.isArray(c)||c instanceof
Float32Array?c:(Ic[0]=c[0],Ic[1]=c[1],Ic[2]=c[2],Ic[3]=c[3],Ic[4]=c[4],Ic[5]=c[5],Ic[6]=c[6],Ic[7]=c[7],Ic[8]=c[8],Ic[9]=c[9],Ic[10]=c[10],Ic[11]=c[11],Ic[12]=c[12],Ic[13]=c[13],Ic[14]=c[14],Ic[15]=c[15],Ic));c=a.hiA;k.uniformMatrix4fv(la.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Db[0]=c[0],Db[1]=c[1],Db[2]=c[2],Db[3]=c[3],Db[4]=c[4],Db[5]=c[5],Db[6]=c[6],Db[7]=c[7],Db[8]=c[8],Db[9]=c[9],Db[10]=c[10],Db[11]=c[11],Db[12]=c[12],Db[13]=c[13],Db[14]=c[14],Db[15]=c[15],Db));c=a.loB;k.uniformMatrix4fv(Ha.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(pc[0]=c[0],pc[1]=c[1],pc[2]=c[2],pc[3]=c[3],pc[4]=c[4],pc[5]=c[5],pc[6]=c[6],pc[7]=c[7],pc[8]=c[8],pc[9]=c[9],pc[10]=c[10],pc[11]=c[11],pc[12]=c[12],pc[13]=c[13],pc[14]=c[14],pc[15]=c[15],pc));c=a.hiB;k.uniformMatrix4fv(fa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Ta[0]=c[0],Ta[1]=c[1],Ta[2]=c[2],Ta[3]=c[3],Ta[4]=c[4],Ta[5]=c[5],Ta[6]=c[6],Ta[7]=c[7],Ta[8]=c[8],Ta[9]=c[9],Ta[10]=c[10],Ta[11]=c[11],Ta[12]=c[12],Ta[13]=c[13],Ta[14]=
c[14],Ta[15]=c[15],Ta));c=a.loC;k.uniformMatrix4fv(U.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Jc[0]=c[0],Jc[1]=c[1],Jc[2]=c[2],Jc[3]=c[3],Jc[4]=c[4],Jc[5]=c[5],Jc[6]=c[6],Jc[7]=c[7],Jc[8]=c[8],Jc[9]=c[9],Jc[10]=c[10],Jc[11]=c[11],Jc[12]=c[12],Jc[13]=c[13],Jc[14]=c[14],Jc[15]=c[15],Jc));c=a.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(c)||c instanceof Float32Array?c:($b[0]=c[0],$b[1]=c[1],$b[2]=c[2],$b[3]=c[3],$b[4]=c[4],$b[5]=c[5],$b[6]=c[6],$b[7]=c[7],$b[8]=c[8],$b[9]=c[9],
$b[10]=c[10],$b[11]=c[11],$b[12]=c[12],$b[13]=c[13],$b[14]=c[14],$b[15]=c[15],$b));c=a.loD;k.uniformMatrix4fv(ob.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(rc[0]=c[0],rc[1]=c[1],rc[2]=c[2],rc[3]=c[3],rc[4]=c[4],rc[5]=c[5],rc[6]=c[6],rc[7]=c[7],rc[8]=c[8],rc[9]=c[9],rc[10]=c[10],rc[11]=c[11],rc[12]=c[12],rc[13]=c[13],rc[14]=c[14],rc[15]=c[15],rc));c=a.hiD;k.uniformMatrix4fv(Na.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Fd[0]=c[0],Fd[1]=c[1],Fd[2]=c[2],Fd[3]=c[3],Fd[4]=
c[4],Fd[5]=c[5],Fd[6]=c[6],Fd[7]=c[7],Fd[8]=c[8],Fd[9]=c[9],Fd[10]=c[10],Fd[11]=c[11],Fd[12]=c[12],Fd[13]=c[13],Fd[14]=c[14],Fd[15]=c[15],Fd));c=a.resolution;k.uniform2f(Q.location,c[0],c[1]);c=a.viewBoxPos;k.uniform2f(ha.location,c[0],c[1]);c=a.viewBoxSize;k.uniform2f(ra.location,c[0],c[1]);k.uniform1f(ea.location,a.maskHeight);k.uniform1f(t.location,a.drwLayer);c=a.contextColor;k.uniform4f(Y.location,c[0],c[1],c[2],c[3]);(c=a.maskTexture)&&"framebuffer"===c._reglType&&(c=c.color[0]);c=c._texture;
k.uniform1i(va.location,c.bind());k.uniform1i(ua.location,I.bind());(f=y.elements)?k.bindBuffer(34963,f.buffer.buffer):Bb.currentVAO&&(f=ja.getElements(Bb.currentVAO.elements))&&k.bindBuffer(34963,f.buffer.buffer);h=a.offset;if(a=a.count)f?k.drawElements(1,a,f.type,h<<(f.type-5121>>1)):k.drawArrays(1,h,a),Z.dirty=!0,Bb.setVAO(null),m.viewportWidth=e,m.viewportHeight=p,Z.profile=l,c.unbind(),I.unbind()},scope:function(c,k,r){var t,w,B,G,C,W,ba,M,O,J,ja,R,P,U,Q,ha,ka,pa,I,Y,ia,fa,ea,la,ua,wa,cc,ab,
ra,Ta,Ca,ya,La,Wd,Bb,Db,Wa,za,Td,Da,$b,Gc,Lc,ed,Xb,Sa,sa,Eb,qc,rc,Fa,Rc,Pa,Ba,td,qd,va,hb,db,oa,oc,pc,Ad,Sd,$c,Jc,Ic,Ac,Gb,Ga,Lb,nb,xb,rd,kd,le,nc,Sb,id,wc,md,ec,Ea,Bd,jf,Kb,Fb,ve,Ed,xd,kf,Fe,Fd,bc,af,$a,Qa,Qc,Zd,re,Na,ob,Dd,Ob,Fc,se,Ha,Zc,Hb,yd,zd,kc,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,jc,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,
Rf,Sf,pg,cf,Ze,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh;jd.height=c.viewportHeight;jd.width=c.viewportWidth;jd.x=c.viewportX;jd.y=c.viewportY;t=jd.x|0;w=jd.y|0;B="width"in jd?jd.width|0:m.framebufferWidth-t;G="height"in jd?jd.height|0:m.framebufferHeight-w;C=m.viewportWidth;m.viewportWidth=
B;W=m.viewportHeight;m.viewportHeight=G;ba=Xd[0];Xd[0]=t;M=Xd[1];Xd[1]=w;O=Xd[2];Xd[2]=B;J=Xd[3];Xd[3]=G;ja=yb[0];yb[0]=0;R=yb[1];yb[1]=0;P=yb[2];yb[2]=0;U=yb[3];yb[3]=0;Q=tc.blend_enable;tc.blend_enable=!1;ha=ne[0];ne[0]=32774;ka=ne[1];ne[1]=32774;pa=je[0];je[0]=770;I=je[1];je[1]=771;Y=je[2];je[2]=1;ia=je[3];je[3]=1;fa=tc.cull_enable;tc.cull_enable=!0;ea=tc.cull_face;tc.cull_face=1029;la=tc.depth_enable;tc.depth_enable=!0;ua=tc.depth_func;tc.depth_func=513;wa=tc.depth_mask;tc.depth_mask=!0;cc=fe[0];
fe[0]=0;ab=fe[1];fe[1]=1;ra=tc.dither;tc.dither=!1;Ta=tc.lineWidth;tc.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;Ca=vd.x|0;ya=vd.y|0;La="width"in vd?vd.width|0:m.framebufferWidth-Ca;Wd="height"in vd?vd.height|0:m.framebufferHeight-ya;Bb=Ve[0];Ve[0]=Ca;Db=Ve[1];Ve[1]=ya;Wa=Ve[2];Ve[2]=La;za=Ve[3];Ve[3]=Wd;Td=tc.scissor_enable;tc.scissor_enable=!0;Da=Z.profile;Z.profile=!1;$b=c.offset;Gc=y.offset;y.offset=$b;Lc=c.count;ed=y.count;y.count=Lc;Xb=y.primitive;
y.primitive=1;Sa=c.contextColor;sa=p[24];p[24]=Sa;Eb=c.dim0A;qc=p[3];p[3]=Eb;rc=c.dim0B;Fa=p[5];p[5]=rc;Rc=c.dim0C;Pa=p[7];p[7]=Rc;Ba=c.dim0D;td=p[9];p[9]=Ba;qd=c.dim1A;va=p[4];p[4]=qd;hb=c.dim1B;db=p[6];p[6]=hb;oa=c.dim1C;oc=p[8];p[8]=oa;pc=c.dim1D;Ad=p[10];p[10]=pc;Sd=c.drwLayer;$c=p[23];p[23]=Sd;Jc=c.hiA;Ic=p[12];p[12]=Jc;Ac=c.hiB;Gb=p[14];p[14]=Ac;Ga=c.hiC;Lb=p[16];p[16]=Ga;nb=c.hiD;xb=p[18];p[18]=nb;rd=c.loA;kd=p[11];p[11]=rd;le=c.loB;nc=p[13];p[13]=le;Sb=c.loC;id=p[15];p[15]=Sb;wc=c.loD;md=
p[17];p[17]=wc;ec=c.maskHeight;Ea=p[22];p[22]=ec;Bd=c.maskTexture;jf=p[25];p[25]=Bd;Kb=p[26];p[26]=aa;Fb=c.resolution;ve=p[19];p[19]=Fb;Ed=c.viewBoxPos;xd=p[20];p[20]=Ed;kf=c.viewBoxSize;Fe=p[21];p[21]=kf;Fd=h.buffer;h.buffer=ca;bc=h.divisor;h.divisor=0;af=h.normalized;h.normalized=!1;$a=h.offset;h.offset=0;Qa=h.size;h.size=0;Qc=h.state;h.state=1;Zd=h.stride;h.stride=0;re=h.type;h.type=ca.dtype;Na=h.w;h.w=0;ob=h.x;h.x=0;Dd=h.y;h.y=0;Ob=h.z;h.z=0;Fc=f.buffer;f.buffer=N;se=f.divisor;f.divisor=0;Ha=
f.normalized;f.normalized=!1;Zc=f.offset;f.offset=0;Hb=f.size;f.size=0;yd=f.state;f.state=1;zd=f.stride;f.stride=0;kc=f.type;f.type=N.dtype;te=f.w;f.w=0;uf=f.x;f.x=0;ee=f.y;f.y=0;de=f.z;f.z=0;be=e.buffer;e.buffer=g;ue=e.divisor;e.divisor=0;$d=e.normalized;e.normalized=!1;he=e.offset;e.offset=0;zc=e.size;e.size=0;Uc=e.state;e.state=1;pe=e.stride;e.stride=0;ke=e.type;e.type=g.dtype;Hd=e.w;e.w=0;Md=e.x;e.x=0;Nd=e.y;e.y=0;Od=e.z;e.z=0;ie=D.buffer;D.buffer=b;jc=D.divisor;D.divisor=0;ze=D.normalized;D.normalized=
!1;me=D.offset;D.offset=0;Oe=D.size;D.size=0;Pe=D.state;D.state=1;Le=D.stride;D.stride=0;qe=D.type;D.type=b.dtype;De=D.w;D.w=0;Ge=D.x;D.x=0;He=D.y;D.y=0;Ie=D.z;D.z=0;Ee=T.buffer;T.buffer=x;Kd=T.divisor;T.divisor=0;Rd=T.normalized;T.normalized=!1;Yd=T.offset;T.offset=0;ae=T.size;T.size=0;Je=T.state;T.state=1;Cd=T.stride;T.stride=0;Pd=T.type;T.type=x.dtype;Ae=T.w;T.w=0;Ke=T.x;T.x=0;pf=T.y;T.y=0;Xe=T.z;T.z=0;Qe=V.buffer;V.buffer=d;Me=V.divisor;V.divisor=0;We=V.normalized;V.normalized=!1;Ue=V.offset;
V.offset=0;Re=V.size;V.size=0;Se=V.state;V.state=1;Qd=V.stride;V.stride=0;Vd=V.type;V.type=d.dtype;Te=V.w;V.w=0;ef=V.x;V.x=0;lf=V.y;V.y=0;bf=V.z;V.z=0;ff=n.buffer;n.buffer=v;gf=n.divisor;n.divisor=0;hf=n.normalized;n.normalized=!1;qf=n.offset;n.offset=0;mf=n.size;n.size=0;rf=n.state;n.state=1;Bf=n.stride;n.stride=0;Cf=n.type;n.type=v.dtype;Ne=n.w;n.w=0;Be=n.x;n.x=0;nf=n.y;n.y=0;of=n.z;n.z=0;Df=qa.buffer;qa.buffer=z;Gf=qa.divisor;qa.divisor=0;Af=qa.normalized;qa.normalized=!1;Ef=qa.offset;qa.offset=
0;Ff=qa.size;qa.size=0;wf=qa.state;qa.state=1;xf=qa.stride;qa.stride=0;vf=qa.type;qa.type=z.dtype;yf=qa.w;qa.w=0;zf=qa.x;qa.x=0;If=qa.y;qa.y=0;Jf=qa.z;qa.z=0;Kf=L.buffer;L.buffer=da;Lf=L.divisor;L.divisor=0;sf=L.normalized;L.normalized=!1;Qf=L.offset;L.offset=0;Hf=L.size;L.size=0;tf=L.state;L.state=1;cg=L.stride;L.stride=0;Rf=L.type;L.type=da.dtype;Sf=L.w;L.w=0;pg=L.x;L.x=0;cf=L.y;L.y=0;Ze=L.z;L.z=0;Mf=ga.buffer;ga.buffer=K;Nf=ga.divisor;ga.divisor=0;dg=ga.normalized;ga.normalized=!1;eg=ga.offset;
ga.offset=0;fg=ga.size;ga.size=0;gg=ga.state;ga.state=1;hg=ga.stride;ga.stride=0;Vf=ga.type;ga.type=K.dtype;Tf=ga.w;ga.w=0;Wf=ga.x;ga.x=0;Xf=ga.y;ga.y=0;Yf=ga.z;ga.z=0;ig=a.buffer;a.buffer=E;qg=a.divisor;a.divisor=0;rg=a.normalized;a.normalized=!1;sg=a.offset;a.offset=0;tg=a.size;a.size=0;ug=a.state;a.state=1;vg=a.stride;a.stride=0;wg=a.type;a.type=E.dtype;xg=a.w;a.w=0;yg=a.x;a.x=0;zg=a.y;a.y=0;Ag=a.z;a.z=0;df=l.buffer;l.buffer=u;$e=l.divisor;l.divisor=0;Of=l.normalized;l.normalized=!1;Pf=l.offset;
l.offset=0;jg=l.size;l.size=0;kg=l.state;l.state=1;lg=l.stride;l.stride=0;mg=l.type;l.type=u.dtype;ng=l.w;l.w=0;Zf=l.x;l.x=0;Uf=l.y;l.y=0;$f=l.z;l.z=0;ag=X.buffer;X.buffer=A;bg=X.divisor;X.divisor=0;og=X.normalized;X.normalized=!1;Bg=X.offset;X.offset=0;Cg=X.size;X.size=0;Dg=X.state;X.state=1;Eg=X.stride;X.stride=0;Fg=X.type;X.type=A.dtype;Gg=X.w;X.w=0;Hg=X.x;X.x=0;Ig=X.y;X.y=0;Jg=X.z;X.z=0;Kg=ma.buffer;ma.buffer=H;Lg=ma.divisor;ma.divisor=0;Mg=ma.normalized;ma.normalized=!1;Ng=ma.offset;ma.offset=
0;Og=ma.size;ma.size=0;Pg=ma.state;ma.state=1;Qg=ma.stride;ma.stride=0;Rg=ma.type;ma.type=H.dtype;Sg=ma.w;ma.w=0;Tg=ma.x;ma.x=0;Ug=ma.y;ma.y=0;Vg=ma.z;ma.z=0;Wg=Ka.buffer;Ka.buffer=q;Xg=Ka.divisor;Ka.divisor=0;Yg=Ka.normalized;Ka.normalized=!1;Zg=Ka.offset;Ka.offset=0;$g=Ka.size;Ka.size=0;ah=Ka.state;Ka.state=1;bh=Ka.stride;Ka.stride=0;ch=Ka.type;Ka.type=q.dtype;dh=Ka.w;Ka.w=0;eh=Ka.x;Ka.x=0;fh=Ka.y;Ka.y=0;gh=Ka.z;Ka.z=0;hh=cb.buffer;cb.buffer=F;ih=cb.divisor;cb.divisor=0;jh=cb.normalized;cb.normalized=
!1;kh=cb.offset;cb.offset=0;lh=cb.size;cb.size=0;mh=cb.state;cb.state=1;nh=cb.stride;cb.stride=0;oh=cb.type;cb.type=F.dtype;ph=cb.w;cb.w=0;qh=cb.x;cb.x=0;rh=cb.y;cb.y=0;sh=cb.z;cb.z=0;th=S.vert;S.vert=2;uh=S.frag;S.frag=1;Z.dirty=!0;k(m,c,r);m.viewportWidth=C;m.viewportHeight=W;Xd[0]=ba;Xd[1]=M;Xd[2]=O;Xd[3]=J;yb[0]=ja;yb[1]=R;yb[2]=P;yb[3]=U;tc.blend_enable=Q;ne[0]=ha;ne[1]=ka;je[0]=pa;je[1]=I;je[2]=Y;je[3]=ia;tc.cull_enable=fa;tc.cull_face=ea;tc.depth_enable=la;tc.depth_func=ua;tc.depth_mask=wa;
fe[0]=cc;fe[1]=ab;tc.dither=ra;tc.lineWidth=Ta;Ve[0]=Bb;Ve[1]=Db;Ve[2]=Wa;Ve[3]=za;tc.scissor_enable=Td;Z.profile=Da;y.offset=Gc;y.count=ed;y.primitive=Xb;p[24]=sa;p[3]=qc;p[5]=Fa;p[7]=Pa;p[9]=td;p[4]=va;p[6]=db;p[8]=oc;p[10]=Ad;p[23]=$c;p[12]=Ic;p[14]=Gb;p[16]=Lb;p[18]=xb;p[11]=kd;p[13]=nc;p[15]=id;p[17]=md;p[22]=Ea;p[25]=jf;p[26]=Kb;p[19]=ve;p[20]=xd;p[21]=Fe;h.buffer=Fd;h.divisor=bc;h.normalized=af;h.offset=$a;h.size=Qa;h.state=Qc;h.stride=Zd;h.type=re;h.w=Na;h.x=ob;h.y=Dd;h.z=Ob;f.buffer=Fc;f.divisor=
se;f.normalized=Ha;f.offset=Zc;f.size=Hb;f.state=yd;f.stride=zd;f.type=kc;f.w=te;f.x=uf;f.y=ee;f.z=de;e.buffer=be;e.divisor=ue;e.normalized=$d;e.offset=he;e.size=zc;e.state=Uc;e.stride=pe;e.type=ke;e.w=Hd;e.x=Md;e.y=Nd;e.z=Od;D.buffer=ie;D.divisor=jc;D.normalized=ze;D.offset=me;D.size=Oe;D.state=Pe;D.stride=Le;D.type=qe;D.w=De;D.x=Ge;D.y=He;D.z=Ie;T.buffer=Ee;T.divisor=Kd;T.normalized=Rd;T.offset=Yd;T.size=ae;T.state=Je;T.stride=Cd;T.type=Pd;T.w=Ae;T.x=Ke;T.y=pf;T.z=Xe;V.buffer=Qe;V.divisor=Me;V.normalized=
We;V.offset=Ue;V.size=Re;V.state=Se;V.stride=Qd;V.type=Vd;V.w=Te;V.x=ef;V.y=lf;V.z=bf;n.buffer=ff;n.divisor=gf;n.normalized=hf;n.offset=qf;n.size=mf;n.state=rf;n.stride=Bf;n.type=Cf;n.w=Ne;n.x=Be;n.y=nf;n.z=of;qa.buffer=Df;qa.divisor=Gf;qa.normalized=Af;qa.offset=Ef;qa.size=Ff;qa.state=wf;qa.stride=xf;qa.type=vf;qa.w=yf;qa.x=zf;qa.y=If;qa.z=Jf;L.buffer=Kf;L.divisor=Lf;L.normalized=sf;L.offset=Qf;L.size=Hf;L.state=tf;L.stride=cg;L.type=Rf;L.w=Sf;L.x=pg;L.y=cf;L.z=Ze;ga.buffer=Mf;ga.divisor=Nf;ga.normalized=
dg;ga.offset=eg;ga.size=fg;ga.state=gg;ga.stride=hg;ga.type=Vf;ga.w=Tf;ga.x=Wf;ga.y=Xf;ga.z=Yf;a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;l.buffer=df;l.divisor=$e;l.normalized=Of;l.offset=Pf;l.size=jg;l.state=kg;l.stride=lg;l.type=mg;l.w=ng;l.x=Zf;l.y=Uf;l.z=$f;X.buffer=ag;X.divisor=bg;X.normalized=og;X.offset=Bg;X.size=Cg;X.state=Dg;X.stride=Eg;X.type=Fg;X.w=Gg;X.x=Hg;X.y=Ig;X.z=Jg;ma.buffer=Kg;ma.divisor=Lg;ma.normalized=
Mg;ma.offset=Ng;ma.size=Og;ma.state=Pg;ma.stride=Qg;ma.type=Rg;ma.w=Sg;ma.x=Tg;ma.y=Ug;ma.z=Vg;Ka.buffer=Wg;Ka.divisor=Xg;Ka.normalized=Yg;Ka.offset=Zg;Ka.size=$g;Ka.state=ah;Ka.stride=bh;Ka.type=ch;Ka.w=dh;Ka.x=eh;Ka.y=fh;Ka.z=gh;cb.buffer=hh;cb.divisor=ih;cb.normalized=jh;cb.offset=kh;cb.size=lh;cb.state=mh;cb.stride=nh;cb.type=oh;cb.w=ph;cb.x=qh;cb.y=rh;cb.z=sh;S.vert=th;S.frag=uh;Z.dirty=!0}}},$1:function(c,ba){var r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a;r=c.attributes;
N=c.current;g=c.framebuffer;b=c.gl;x=c.next;d=c.vao;v=x.blend_color;z=N.blend_color;da=x.blend_equation;K=N.blend_equation;E=x.blend_func;u=N.blend_func;A=x.colorMask;H=N.colorMask;q=x.depth_range;F=N.depth_range;ca=x.polygonOffset_offset;I=N.polygonOffset_offset;aa=x.sample_coverage;h=N.sample_coverage;f=x.scissor_box;e=N.scissor_box;D=x.stencil_func;T=N.stencil_func;V=x.stencil_opBack;n=N.stencil_opBack;qa=x.stencil_opFront;L=N.stencil_opFront;ga=x.viewport;a=N.viewport;return{poll:function(){var d,
c,r,ba,cb,kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea,Na;N.dirty=!1;c=x.blend_enable;r=x.cull_enable;ba=x.depth_enable;cb=x.dither;kc=x.polygonOffset_enable;oa=x.sample_alpha;Qa=x.sample_enable;Y=x.scissor_enable;O=x.stencil_enable;M=x.cull_face;R=N.cull_face;sa=x.depth_func;J=N.depth_func;Ob=x.depth_mask;$a=N.depth_mask;P=x.frontFace;t=N.frontFace;la=x.lineWidth;fa=N.lineWidth;Ea=x.stencil_mask;Na=N.stencil_mask;d=g.next;d!==g.cur&&(d?b.bindFramebuffer(36160,d.framebuffer):b.bindFramebuffer(36160,null),
g.cur=d);c!==N.blend_enable&&(c?b.enable(3042):b.disable(3042),N.blend_enable=c);r!==N.cull_enable&&(r?b.enable(2884):b.disable(2884),N.cull_enable=r);ba!==N.depth_enable&&(ba?b.enable(2929):b.disable(2929),N.depth_enable=ba);cb!==N.dither&&(cb?b.enable(3024):b.disable(3024),N.dither=cb);kc!==N.polygonOffset_enable&&(kc?b.enable(32823):b.disable(32823),N.polygonOffset_enable=kc);oa!==N.sample_alpha&&(oa?b.enable(32926):b.disable(32926),N.sample_alpha=oa);Qa!==N.sample_enable&&(Qa?b.enable(32928):
b.disable(32928),N.sample_enable=Qa);Y!==N.scissor_enable&&(Y?b.enable(3089):b.disable(3089),N.scissor_enable=Y);O!==N.stencil_enable&&(O?b.enable(2960):b.disable(2960),N.stencil_enable=O);if(v[0]!==z[0]||v[1]!==z[1]||v[2]!==z[2]||v[3]!==z[3])b.blendColor(v[0],v[1],v[2],v[3]),z[0]=v[0],z[1]=v[1],z[2]=v[2],z[3]=v[3];if(da[0]!==K[0]||da[1]!==K[1])b.blendEquationSeparate(da[0],da[1]),K[0]=da[0],K[1]=da[1];if(E[0]!==u[0]||E[1]!==u[1]||E[2]!==u[2]||E[3]!==u[3])b.blendFuncSeparate(E[0],E[1],E[2],E[3]),
u[0]=E[0],u[1]=E[1],u[2]=E[2],u[3]=E[3];if(A[0]!==H[0]||A[1]!==H[1]||A[2]!==H[2]||A[3]!==H[3])b.colorMask(A[0],A[1],A[2],A[3]),H[0]=A[0],H[1]=A[1],H[2]=A[2],H[3]=A[3];M!==R&&(b.cullFace(M),N.cull_face=M);sa!==J&&(b.depthFunc(sa),N.depth_func=sa);Ob!==$a&&(b.depthMask(Ob),N.depth_mask=Ob);if(q[0]!==F[0]||q[1]!==F[1])b.depthRange(q[0],q[1]),F[0]=q[0],F[1]=q[1];P!==t&&(b.frontFace(P),N.frontFace=P);la!==fa&&(b.lineWidth(la),N.lineWidth=la);if(ca[0]!==I[0]||ca[1]!==I[1])b.polygonOffset(ca[0],ca[1]),I[0]=
ca[0],I[1]=ca[1];if(aa[0]!==h[0]||aa[1]!==h[1])b.sampleCoverage(aa[0],aa[1]),h[0]=aa[0],h[1]=aa[1];if(f[0]!==e[0]||f[1]!==e[1]||f[2]!==e[2]||f[3]!==e[3])b.scissor(f[0],f[1],f[2],f[3]),e[0]=f[0],e[1]=f[1],e[2]=f[2],e[3]=f[3];if(D[0]!==T[0]||D[1]!==T[1]||D[2]!==T[2])b.stencilFunc(D[0],D[1],D[2]),T[0]=D[0],T[1]=D[1],T[2]=D[2];Ea!==Na&&(b.stencilMask(Ea),N.stencil_mask=Ea);if(V[0]!==n[0]||V[1]!==n[1]||V[2]!==n[2]||V[3]!==n[3])b.stencilOpSeparate(V[0],V[1],V[2],V[3]),n[0]=V[0],n[1]=V[1],n[2]=V[2],n[3]=
V[3];if(qa[0]!==L[0]||qa[1]!==L[1]||qa[2]!==L[2]||qa[3]!==L[3])b.stencilOpSeparate(qa[0],qa[1],qa[2],qa[3]),L[0]=qa[0],L[1]=qa[1],L[2]=qa[2],L[3]=qa[3];if(ga[0]!==a[0]||ga[1]!==a[1]||ga[2]!==a[2]||ga[3]!==a[3])b.viewport(ga[0],ga[1],ga[2],ga[3]),a[0]=ga[0],a[1]=ga[1],a[2]=ga[2],a[3]=ga[3]},refresh:function(){var c,X,ma,Ka,cb,kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a;N.dirty=!1;X=x.blend_enable;ma=x.cull_enable;Ka=x.depth_enable;cb=x.dither;kc=x.polygonOffset_enable;oa=x.sample_alpha;Qa=x.sample_enable;Y=x.scissor_enable;
O=x.stencil_enable;M=x.cull_face;R=x.depth_func;sa=x.depth_mask;J=x.frontFace;Ob=x.lineWidth;$a=x.stencil_mask;(c=g.next)?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null);g.cur=c;c=r[0];c.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(0,c.divisor);c=r[1];c.buffer?(b.enableVertexAttribArray(1),
b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(1,c.divisor);c=r[2];c.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(2),b.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(2,c.divisor);
c=r[3];c.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(3,c.divisor);c=r[4];c.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(4),b.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=
null);ba.vertexAttribDivisorANGLE(4,c.divisor);c=r[5];c.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(5,c.divisor);c=r[6];c.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(6),
b.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(6,c.divisor);c=r[7];c.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(7,c.divisor);c=r[8];c.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(8,c.size,c.type,c.normalized,
c.stride,c.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(8,c.divisor);c=r[9];c.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(9,c.divisor);c=r[10];c.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,c.buffer.buffer),
b.vertexAttribPointer(10,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(10,c.divisor);c=r[11];c.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(11,c.divisor);c=r[12];c.buffer?(b.enableVertexAttribArray(12),
b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(12,c.divisor);c=r[13];c.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(13,
c.divisor);c=r[14];c.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(14,c.divisor);c=r[15];c.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(15),b.vertexAttrib4f(15,
c.x,c.y,c.z,c.w),c.buffer=null);ba.vertexAttribDivisorANGLE(15,c.divisor);d.currentVAO=null;d.setVAO(d.targetVAO);X?b.enable(3042):b.disable(3042);N.blend_enable=X;ma?b.enable(2884):b.disable(2884);N.cull_enable=ma;Ka?b.enable(2929):b.disable(2929);N.depth_enable=Ka;cb?b.enable(3024):b.disable(3024);N.dither=cb;kc?b.enable(32823):b.disable(32823);N.polygonOffset_enable=kc;oa?b.enable(32926):b.disable(32926);N.sample_alpha=oa;Qa?b.enable(32928):b.disable(32928);N.sample_enable=Qa;Y?b.enable(3089):
b.disable(3089);N.scissor_enable=Y;O?b.enable(2960):b.disable(2960);N.stencil_enable=O;b.blendColor(v[0],v[1],v[2],v[3]);z[0]=v[0];z[1]=v[1];z[2]=v[2];z[3]=v[3];b.blendEquationSeparate(da[0],da[1]);K[0]=da[0];K[1]=da[1];b.blendFuncSeparate(E[0],E[1],E[2],E[3]);u[0]=E[0];u[1]=E[1];u[2]=E[2];u[3]=E[3];b.colorMask(A[0],A[1],A[2],A[3]);H[0]=A[0];H[1]=A[1];H[2]=A[2];H[3]=A[3];b.cullFace(M);N.cull_face=M;b.depthFunc(R);N.depth_func=R;b.depthMask(sa);N.depth_mask=sa;b.depthRange(q[0],q[1]);F[0]=q[0];F[1]=
q[1];b.frontFace(J);N.frontFace=J;b.lineWidth(Ob);N.lineWidth=Ob;b.polygonOffset(ca[0],ca[1]);I[0]=ca[0];I[1]=ca[1];b.sampleCoverage(aa[0],aa[1]);h[0]=aa[0];h[1]=aa[1];b.scissor(f[0],f[1],f[2],f[3]);e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];b.stencilFunc(D[0],D[1],D[2]);T[0]=D[0];T[1]=D[1];T[2]=D[2];b.stencilMask($a);N.stencil_mask=$a;b.stencilOpSeparate(V[0],V[1],V[2],V[3]);n[0]=V[0];n[1]=V[1];n[2]=V[2];n[3]=V[3];b.stencilOpSeparate(qa[0],qa[1],qa[2],qa[3]);L[0]=qa[0];L[1]=qa[1];L[2]=qa[2];L[3]=qa[3];
b.viewport(ga[0],ga[1],ga[2],ga[3]);a[0]=ga[0];a[1]=ga[1];a[2]=ga[2];a[3]=ga[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(c,ba,r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a){var P,t,la,fa,Ea,Na,Hb,Ha,U,ob,ea,va,bc,cc,Qc,td,wc,W,B,ka,Ca,Lb,nc,Zc,C,w,ia,ua,Q,ha,ra,G,m,Z,y,ja,pa,k,tc,S,p,Bb,yb;P=c.attributes;t=c.buffer;la=c.context;
fa=c.current;Ea=c.draw;Na=c.elements;Hb=c.extensions;Ha=c.framebuffer;U=c.gl;ob=c.isBufferArgs;ea=c.next;va=c.shader;bc=c.uniforms;cc=c.vao;Qc=ea.blend_color;td=fa.blend_color;wc=ea.blend_equation;W=fa.blend_equation;B=ea.blend_func;ka=fa.blend_func;Ca=ea.colorMask;Lb=fa.colorMask;nc=ea.depth_range;Zc=fa.depth_range;C=ea.polygonOffset_offset;w=fa.polygonOffset_offset;ia=ea.sample_coverage;ua=fa.sample_coverage;Q=ea.scissor_box;ha=fa.scissor_box;ra=ea.stencil_func;G=fa.stencil_func;m=ea.stencil_opBack;
Z=fa.stencil_opBack;y=ea.stencil_opFront;ja=fa.stencil_opFront;pa=ea.viewport;k=fa.viewport;tc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};S={};S.buffer=r;S.divisor=1;p={};p.buffer=N;p.divisor=1;Bb={};Bb.buffer=g;Bb.divisor=1;yb={};yb.buffer=b;yb.divisor=1;return{batch:function(b,c){var d,e,f,g,h,q;d=Ha.next;d!==Ha.cur&&(d?U.bindFramebuffer(36160,d.framebuffer):U.bindFramebuffer(36160,null),Ha.cur=d);if(fa.dirty){var r,v,B,x,D,A,N,F,z,H,Q,pa,I,T,
V,da,ca,va,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,wc;r=ea.dither;r!==fa.dither&&(r?U.enable(3024):U.disable(3024),fa.dither=r);v=ea.depth_func;v!==fa.depth_func&&(U.depthFunc(v),fa.depth_func=v);B=nc[0];x=nc[1];if(B!==Zc[0]||x!==Zc[1])U.depthRange(B,x),Zc[0]=B,Zc[1]=x;D=ea.depth_mask;D!==fa.depth_mask&&(U.depthMask(D),fa.depth_mask=D);A=Ca[0];N=Ca[1];F=Ca[2];z=Ca[3];if(A!==Lb[0]||N!==Lb[1]||F!==Lb[2]||z!==Lb[3])U.colorMask(A,N,F,z),Lb[0]=A,Lb[1]=N,Lb[2]=F,Lb[3]=z;H=ea.cull_enable;H!==fa.cull_enable&&
(H?U.enable(2884):U.disable(2884),fa.cull_enable=H);Q=ea.cull_face;Q!==fa.cull_face&&(U.cullFace(Q),fa.cull_face=Q);pa=ea.frontFace;pa!==fa.frontFace&&(U.frontFace(pa),fa.frontFace=pa);I=ea.lineWidth;I!==fa.lineWidth&&(U.lineWidth(I),fa.lineWidth=I);T=ea.polygonOffset_enable;T!==fa.polygonOffset_enable&&(T?U.enable(32823):U.disable(32823),fa.polygonOffset_enable=T);V=C[0];da=C[1];if(V!==w[0]||da!==w[1])U.polygonOffset(V,da),w[0]=V,w[1]=da;ca=ea.sample_alpha;ca!==fa.sample_alpha&&(ca?U.enable(32926):
U.disable(32926),fa.sample_alpha=ca);va=ea.sample_enable;va!==fa.sample_enable&&(va?U.enable(32928):U.disable(32928),fa.sample_enable=va);kd=ia[0];oc=ia[1];if(kd!==ua[0]||oc!==ua[1])U.sampleCoverage(kd,oc),ua[0]=kd,ua[1]=oc;id=ea.stencil_enable;id!==fa.stencil_enable&&(id?U.enable(2960):U.disable(2960),fa.stencil_enable=id);ed=ea.stencil_mask;ed!==fa.stencil_mask&&(U.stencilMask(ed),fa.stencil_mask=ed);Lc=ra[0];qc=ra[1];ab=ra[2];if(Lc!==G[0]||qc!==G[1]||ab!==G[2])U.stencilFunc(Lc,qc,ab),G[0]=Lc,G[1]=
qc,G[2]=ab;Ic=y[0];Db=y[1];pc=y[2];Ta=y[3];if(Ic!==ja[0]||Db!==ja[1]||pc!==ja[2]||Ta!==ja[3])U.stencilOpSeparate(Ic,Db,pc,Ta),ja[0]=Ic,ja[1]=Db,ja[2]=pc,ja[3]=Ta;Jc=m[0];$b=m[1];rc=m[2];wc=m[3];if(Jc!==Z[0]||$b!==Z[1]||rc!==Z[2]||wc!==Z[3])U.stencilOpSeparate(Jc,$b,rc,wc),Z[0]=Jc,Z[1]=$b,Z[2]=rc,Z[3]=wc}U.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;U.enable(3042);fa.blend_enable=!0;U.blendEquationSeparate(32774,32774);W[0]=32774;W[1]=32774;U.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=
771;ka[2]=773;ka[3]=1;U.disable(2929);fa.depth_enable=!1;U.enable(3089);fa.scissor_enable=!0;if(e=fa.profile)f=performance.now(),ba.count+=c;U.useProgram(n.program);g=Hb.angle_instanced_arrays;var na,Ac,Xb,Gc,Rc,La,Eb,Wa;cc.setVAO(null);na=cb.location;Ac=P[na];Ac.buffer||U.enableVertexAttribArray(na);if(5126!==Ac.type||2!==Ac.size||Ac.buffer!==K||!1!==Ac.normalized||0!==Ac.offset||24!==Ac.stride)U.bindBuffer(34962,K.buffer),U.vertexAttribPointer(na,2,5126,!1,24,0),Ac.type=5126,Ac.size=2,Ac.buffer=
K,Ac.normalized=!1,Ac.offset=0,Ac.stride=24;0!==Ac.divisor&&(g.vertexAttribDivisorANGLE(na,0),Ac.divisor=0);Xb=oa.location;Gc=P[Xb];Gc.buffer||U.enableVertexAttribArray(Xb);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==E||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)U.bindBuffer(34962,E.buffer),U.vertexAttribPointer(Xb,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=E,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(g.vertexAttribDivisorANGLE(Xb,0),Gc.divisor=0);Rc=X.location;La=P[Rc];
La.buffer||U.enableVertexAttribArray(Rc);if(5126!==La.type||2!==La.size||La.buffer!==u||!1!==La.normalized||16!==La.offset||24!==La.stride)U.bindBuffer(34962,u.buffer),U.vertexAttribPointer(Rc,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=u,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(g.vertexAttribDivisorANGLE(Rc,0),La.divisor=0);(Eb=Ea.elements)?U.bindBuffer(34963,Eb.buffer.buffer):cc.currentVAO&&(Eb=Na.getElements(cc.currentVAO.elements))&&U.bindBuffer(34963,Eb.buffer.buffer);
Wa=Ea.offset;for(h=0;h<c;++h){q=b[h];var wa,md,hb,Sa,Gb,db,ec,Sb,aa,Zb,Tb,bc,Ub,Ma,pb,ub,ib,Oa,Qc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Id,Ld,we,xe,Ud,Jd,Gd,bd,Fc;wa=q.viewport;md=wa.x|0;hb=wa.y|0;Sa="width"in wa?wa.width|0:la.framebufferWidth-md;Gb="height"in wa?wa.height|0:
la.framebufferHeight-hb;db=la.viewportWidth;la.viewportWidth=Sa;ec=la.viewportHeight;la.viewportHeight=Gb;U.viewport(md,hb,Sa,Gb);k[0]=md;k[1]=hb;k[2]=Sa;k[3]=Gb;Sb=q.viewport;aa=Sb.x|0;Zb=Sb.y|0;Tb="width"in Sb?Sb.width|0:la.framebufferWidth-aa;bc="height"in Sb?Sb.height|0:la.framebufferHeight-Zb;U.scissor(aa,Zb,Tb,bc);ha[0]=aa;ha[1]=Zb;ha[2]=Tb;ha[3]=bc;Ub=qa.call(this,la,q,h);Bb.offset=Ub;Ma=!1;pb=null;ub=0;ib=!1;Qc=Oa=0;Ib=1;cd=0;eb=5126;kb=dc=dd=lc=0;ob(Bb)?(Ma=!0,pb=t.createStream(34962,Bb),
eb=pb.dtype):(pb=t.getBuffer(Bb))?eb=pb.dtype:"constant"in Bb?(Ib=2,"number"===typeof Bb.constant?(dd=Bb.constant,dc=kb=lc=0):(dd=0<Bb.constant.length?Bb.constant[0]:0,dc=1<Bb.constant.length?Bb.constant[1]:0,kb=2<Bb.constant.length?Bb.constant[2]:0,lc=3<Bb.constant.length?Bb.constant[3]:0)):(pb=ob(Bb.buffer)?t.createStream(34962,Bb.buffer):t.getBuffer(Bb.buffer),eb="type"in Bb?tc[Bb.type]:pb.dtype,ib=!!Bb.normalized,Qc=Bb.size|0,Oa=Bb.offset|0,cd=Bb.stride|0,ub=Bb.divisor|0);lb=O.location;ta=P[lb];
if(1===Ib){ta.buffer||U.enableVertexAttribArray(lb);qb=Qc||2;if(ta.type!==eb||ta.size!==qb||ta.buffer!==pb||ta.normalized!==ib||ta.offset!==Oa||ta.stride!==cd)U.bindBuffer(34962,pb.buffer),U.vertexAttribPointer(lb,qb,eb,ib,cd,Oa),ta.type=eb,ta.size=qb,ta.buffer=pb,ta.normalized=ib,ta.offset=Oa,ta.stride=cd;ta.divisor!==ub&&(g.vertexAttribDivisorANGLE(lb,ub),ta.divisor=ub)}else if(ta.buffer&&(U.disableVertexAttribArray(lb),ta.buffer=null),ta.x!==dd||ta.y!==dc||ta.z!==kb||ta.w!==lc)U.vertexAttrib4f(lb,
dd,dc,kb,lc),ta.x=dd,ta.y=dc,ta.z=kb,ta.w=lc;xa=L.call(this,la,q,h);yb.offset=xa;Ua=!1;bb=null;Aa=0;fb=!1;Ab=Ia=0;zb=1;Ra=0;Kc=5126;ya=Vb=Za=Jb=0;ob(yb)?(Ua=!0,bb=t.createStream(34962,yb),Kc=bb.dtype):(bb=t.getBuffer(yb))?Kc=bb.dtype:"constant"in yb?(zb=2,"number"===typeof yb.constant?(Za=yb.constant,Vb=ya=Jb=0):(Za=0<yb.constant.length?yb.constant[0]:0,Vb=1<yb.constant.length?yb.constant[1]:0,ya=2<yb.constant.length?yb.constant[2]:0,Jb=3<yb.constant.length?yb.constant[3]:0)):(bb=ob(yb.buffer)?t.createStream(34962,
yb.buffer):t.getBuffer(yb.buffer),Kc="type"in yb?tc[yb.type]:bb.dtype,fb=!!yb.normalized,Ab=yb.size|0,Ia=yb.offset|0,Ra=yb.stride|0,Aa=yb.divisor|0);ce=M.location;Ja=P[ce];if(1===zb){Ja.buffer||U.enableVertexAttribArray(ce);Pb=Ab||2;if(Ja.type!==Kc||Ja.size!==Pb||Ja.buffer!==bb||Ja.normalized!==fb||Ja.offset!==Ia||Ja.stride!==Ra)U.bindBuffer(34962,bb.buffer),U.vertexAttribPointer(ce,Pb,Kc,fb,Ra,Ia),Ja.type=Kc,Ja.size=Pb,Ja.buffer=bb,Ja.normalized=fb,Ja.offset=Ia,Ja.stride=Ra;Ja.divisor!==Aa&&(g.vertexAttribDivisorANGLE(ce,
Aa),Ja.divisor=Aa)}else if(Ja.buffer&&(U.disableVertexAttribArray(ce),Ja.buffer=null),Ja.x!==Za||Ja.y!==Vb||Ja.z!==ya||Ja.w!==Jb)U.vertexAttrib4f(ce,Za,Vb,ya,Jb),Ja.x=Za,Ja.y=Vb,Ja.z=ya,Ja.w=Jb;gb=ga.call(this,la,q,h);p.offset=gb;jb=!1;za=null;fc=0;Da=!1;sb=rb=0;Xa=1;Ya=0;mc=5126;Mb=Va=uc=xc=0;ob(p)?(jb=!0,za=t.createStream(34962,p),mc=za.dtype):(za=t.getBuffer(p))?mc=za.dtype:"constant"in p?(Xa=2,"number"===typeof p.constant?(uc=p.constant,Va=Mb=xc=0):(uc=0<p.constant.length?p.constant[0]:0,Va=1<
p.constant.length?p.constant[1]:0,Mb=2<p.constant.length?p.constant[2]:0,xc=3<p.constant.length?p.constant[3]:0)):(za=ob(p.buffer)?t.createStream(34962,p.buffer):t.getBuffer(p.buffer),mc="type"in p?tc[p.type]:za.dtype,Da=!!p.normalized,sb=p.size|0,rb=p.offset|0,Ya=p.stride|0,fc=p.divisor|0);Xc=kc.location;Fa=P[Xc];if(1===Xa){Fa.buffer||U.enableVertexAttribArray(Xc);yc=sb||4;if(Fa.type!==mc||Fa.size!==yc||Fa.buffer!==za||Fa.normalized!==Da||Fa.offset!==rb||Fa.stride!==Ya)U.bindBuffer(34962,za.buffer),
U.vertexAttribPointer(Xc,yc,mc,Da,Ya,rb),Fa.type=mc,Fa.size=yc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=rb,Fa.stride=Ya;Fa.divisor!==fc&&(g.vertexAttribDivisorANGLE(Xc,fc),Fa.divisor=fc)}else if(Fa.buffer&&(U.disableVertexAttribArray(Xc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Mb||Fa.w!==xc)U.vertexAttrib4f(Xc,uc,Va,Mb,xc),Fa.x=uc,Fa.y=Va,Fa.z=Mb,Fa.w=xc;Pa=a.call(this,la,q,h);S.offset=Pa;Ba=!1;mb=null;vb=0;Cb=!1;vc=tb=0;wb=1;wd=0;sc=5126;sd=ld=Mc=ud=0;ob(S)?(Ba=!0,mb=t.createStream(34962,S),
sc=mb.dtype):(mb=t.getBuffer(S))?sc=mb.dtype:"constant"in S?(wb=2,"number"===typeof S.constant?(Mc=S.constant,ld=sd=ud=0):(Mc=0<S.constant.length?S.constant[0]:0,ld=1<S.constant.length?S.constant[1]:0,sd=2<S.constant.length?S.constant[2]:0,ud=3<S.constant.length?S.constant[3]:0)):(mb=ob(S.buffer)?t.createStream(34962,S.buffer):t.getBuffer(S.buffer),sc="type"in S?tc[S.type]:mb.dtype,Cb=!!S.normalized,vc=S.size|0,tb=S.offset|0,wd=S.stride|0,vb=S.divisor|0);Wb=Ka.location;ac=P[Wb];if(1===wb){ac.buffer||
U.enableVertexAttribArray(Wb);Qb=vc||4;if(ac.type!==sc||ac.size!==Qb||ac.buffer!==mb||ac.normalized!==Cb||ac.offset!==tb||ac.stride!==wd)U.bindBuffer(34962,mb.buffer),U.vertexAttribPointer(Wb,Qb,sc,Cb,wd,tb),ac.type=sc,ac.size=Qb,ac.buffer=mb,ac.normalized=Cb,ac.offset=tb,ac.stride=wd;ac.divisor!==vb&&(g.vertexAttribDivisorANGLE(Wb,vb),ac.divisor=vb)}else if(ac.buffer&&(U.disableVertexAttribArray(Wb),ac.buffer=null),ac.x!==Mc||ac.y!==ld||ac.z!==sd||ac.w!==ud)U.vertexAttrib4f(Wb,Mc,ld,sd,ud),ac.x=
Mc,ac.y=ld,ac.z=sd,ac.w=ud;Ga=l.call(this,la,q,h);Yb=Ga[0];xb=Ga[1];Rb=Ga[2];ic=Ga[3];h&&nb===Yb&&Nb===xb&&gc===Rb&&Ye===ic||(nb=Yb,Nb=xb,gc=Rb,Ye=ic,U.uniform4f($a.location,Yb,xb,Rb,ic));Bc=q.lineWidth;h&&Cc===Bc||(Cc=Bc,U.uniform1f(Qa.location,Bc));Ec=q.capSize;h&&Nc===Ec||(Nc=Ec,U.uniform1f(ma.location,Ec));Yc=q.scale;Sc=Yc[0];Kb=Yc[1];h&&Oc===Sc&&Fb===Kb||(Oc=Sc,Fb=Kb,U.uniform2f(R.location,Sc,Kb));Pc=q.scaleFract;Hc=Pc[0];hc=Pc[1];h&&Tc===Hc&&Vc===hc||(Tc=Hc,Vc=hc,U.uniform2f(sa.location,Hc,
hc));nd=q.translate;gd=nd[0];Wc=nd[1];h&&oe===gd&&Id===Wc||(oe=gd,Id=Wc,U.uniform2f(J.location,gd,Wc));Ld=q.translateFract;we=Ld[0];Ud=Ld[1];h&&xe===we&&Jd===Ud||(xe=we,Jd=Ud,U.uniform2f(Ob.location,we,Ud));Gd=q.opacity;h&&bd===Gd||(bd=Gd,U.uniform1f(Y.location,Gd));Fc=q.count;0<Fc?Eb?g.drawElementsInstancedANGLE(4,36,Eb.type,Wa<<(Eb.type-5121>>1),Fc):g.drawArraysInstancedANGLE(4,Wa,36,Fc):0>Fc&&(Eb?U.drawElements(4,36,Eb.type,Wa<<(Eb.type-5121>>1)):U.drawArrays(4,Wa,36));la.viewportWidth=db;la.viewportHeight=
ec;Ma&&t.destroyStream(pb);Ua&&t.destroyStream(bb);jb&&t.destroyStream(za);Ba&&t.destroyStream(mb)}fa.dirty=!0;cc.setVAO(null);e&&(ba.cpuTime+=performance.now()-f)},draw:function(a){var b,c,e,f,g,h,l,n,q,r,B,D,N,F,L,H,Q,pa,I,T,V,ca,ga,qa,va,wc,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,aa,bc,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,Qc,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc;b=Ha.next;b!==Ha.cur&&(b?U.bindFramebuffer(36160,
b.framebuffer):U.bindFramebuffer(36160,null),Ha.cur=b);if(fa.dirty){var Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb;Da=ea.dither;Da!==fa.dither&&(Da?U.enable(3024):U.disable(3024),fa.dither=Da);rb=ea.depth_func;rb!==fa.depth_func&&(U.depthFunc(rb),fa.depth_func=rb);sb=nc[0];Xa=nc[1];if(sb!==Zc[0]||Xa!==Zc[1])U.depthRange(sb,Xa),Zc[0]=sb,Zc[1]=Xa;Ya=ea.depth_mask;Ya!==fa.depth_mask&&(U.depthMask(Ya),fa.depth_mask=Ya);mc=Ca[0];xc=Ca[1];uc=Ca[2];
Va=Ca[3];if(mc!==Lb[0]||xc!==Lb[1]||uc!==Lb[2]||Va!==Lb[3])U.colorMask(mc,xc,uc,Va),Lb[0]=mc,Lb[1]=xc,Lb[2]=uc,Lb[3]=Va;Mb=ea.cull_enable;Mb!==fa.cull_enable&&(Mb?U.enable(2884):U.disable(2884),fa.cull_enable=Mb);Xc=ea.cull_face;Xc!==fa.cull_face&&(U.cullFace(Xc),fa.cull_face=Xc);Fa=ea.frontFace;Fa!==fa.frontFace&&(U.frontFace(Fa),fa.frontFace=Fa);yc=ea.lineWidth;yc!==fa.lineWidth&&(U.lineWidth(yc),fa.lineWidth=yc);Pa=ea.polygonOffset_enable;Pa!==fa.polygonOffset_enable&&(Pa?U.enable(32823):U.disable(32823),
fa.polygonOffset_enable=Pa);Ba=C[0];mb=C[1];if(Ba!==w[0]||mb!==w[1])U.polygonOffset(Ba,mb),w[0]=Ba,w[1]=mb;vb=ea.sample_alpha;vb!==fa.sample_alpha&&(vb?U.enable(32926):U.disable(32926),fa.sample_alpha=vb);Cb=ea.sample_enable;Cb!==fa.sample_enable&&(Cb?U.enable(32928):U.disable(32928),fa.sample_enable=Cb);tb=ia[0];vc=ia[1];if(tb!==ua[0]||vc!==ua[1])U.sampleCoverage(tb,vc),ua[0]=tb,ua[1]=vc;wb=ea.stencil_enable;wb!==fa.stencil_enable&&(wb?U.enable(2960):U.disable(2960),fa.stencil_enable=wb);wd=ea.stencil_mask;
wd!==fa.stencil_mask&&(U.stencilMask(wd),fa.stencil_mask=wd);sc=ra[0];ud=ra[1];Mc=ra[2];if(sc!==G[0]||ud!==G[1]||Mc!==G[2])U.stencilFunc(sc,ud,Mc),G[0]=sc,G[1]=ud,G[2]=Mc;ld=y[0];sd=y[1];Wb=y[2];ac=y[3];if(ld!==ja[0]||sd!==ja[1]||Wb!==ja[2]||ac!==ja[3])U.stencilOpSeparate(ld,sd,Wb,ac),ja[0]=ld,ja[1]=sd,ja[2]=Wb,ja[3]=ac;Qb=m[0];Ga=m[1];Yb=m[2];nb=m[3];if(Qb!==Z[0]||Ga!==Z[1]||Yb!==Z[2]||nb!==Z[3])U.stencilOpSeparate(Qb,Ga,Yb,nb),Z[0]=Qb,Z[1]=Ga,Z[2]=Yb,Z[3]=nb}c=a.viewport;e=c.x|0;f=c.y|0;g="width"in
c?c.width|0:la.framebufferWidth-e;h="height"in c?c.height|0:la.framebufferHeight-f;l=la.viewportWidth;la.viewportWidth=g;n=la.viewportHeight;la.viewportHeight=h;U.viewport(e,f,g,h);k[0]=e;k[1]=f;k[2]=g;k[3]=h;U.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;U.enable(3042);fa.blend_enable=!0;U.blendEquationSeparate(32774,32774);W[0]=32774;W[1]=32774;U.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;U.disable(2929);fa.depth_enable=!1;q=a.viewport;r=q.x|0;B=q.y|0;D="width"in
q?q.width|0:la.framebufferWidth-r;N="height"in q?q.height|0:la.framebufferHeight-B;U.scissor(r,B,D,N);ha[0]=r;ha[1]=B;ha[2]=D;ha[3]=N;U.enable(3089);fa.scissor_enable=!0;if(F=fa.profile)L=performance.now(),ba.count++;U.useProgram(x.program);H=Hb.angle_instanced_arrays;cc.setVAO(null);Q=d.call(this,la,a,0);Bb.offset=Q;pa=!1;I=null;T=0;V=!1;ga=ca=0;qa=1;va=0;wc=5126;Lc=ed=id=oc=0;ob(Bb)?(pa=!0,I=t.createStream(34962,Bb),wc=I.dtype):(I=t.getBuffer(Bb))?wc=I.dtype:"constant"in Bb?(qa=2,"number"===typeof Bb.constant?
(id=Bb.constant,ed=Lc=oc=0):(id=0<Bb.constant.length?Bb.constant[0]:0,ed=1<Bb.constant.length?Bb.constant[1]:0,Lc=2<Bb.constant.length?Bb.constant[2]:0,oc=3<Bb.constant.length?Bb.constant[3]:0)):(I=ob(Bb.buffer)?t.createStream(34962,Bb.buffer):t.getBuffer(Bb.buffer),wc="type"in Bb?tc[Bb.type]:I.dtype,V=!!Bb.normalized,ga=Bb.size|0,ca=Bb.offset|0,va=Bb.stride|0,T=Bb.divisor|0);qc=O.location;ab=P[qc];if(1===qa){ab.buffer||U.enableVertexAttribArray(qc);Ic=ga||2;if(ab.type!==wc||ab.size!==Ic||ab.buffer!==
I||ab.normalized!==V||ab.offset!==ca||ab.stride!==va)U.bindBuffer(34962,I.buffer),U.vertexAttribPointer(qc,Ic,wc,V,va,ca),ab.type=wc,ab.size=Ic,ab.buffer=I,ab.normalized=V,ab.offset=ca,ab.stride=va;ab.divisor!==T&&(H.vertexAttribDivisorANGLE(qc,T),ab.divisor=T)}else if(ab.buffer&&(U.disableVertexAttribArray(qc),ab.buffer=null),ab.x!==id||ab.y!==ed||ab.z!==Lc||ab.w!==oc)U.vertexAttrib4f(qc,id,ed,Lc,oc),ab.x=id,ab.y=ed,ab.z=Lc,ab.w=oc;Db=v.call(this,la,a,0);yb.offset=Db;pc=!1;Ta=null;Jc=0;$b=!1;aa=
rc=0;bc=1;Ac=0;Xb=5126;Eb=La=Rc=Gc=0;ob(yb)?(pc=!0,Ta=t.createStream(34962,yb),Xb=Ta.dtype):(Ta=t.getBuffer(yb))?Xb=Ta.dtype:"constant"in yb?(bc=2,"number"===typeof yb.constant?(Rc=yb.constant,La=Eb=Gc=0):(Rc=0<yb.constant.length?yb.constant[0]:0,La=1<yb.constant.length?yb.constant[1]:0,Eb=2<yb.constant.length?yb.constant[2]:0,Gc=3<yb.constant.length?yb.constant[3]:0)):(Ta=ob(yb.buffer)?t.createStream(34962,yb.buffer):t.getBuffer(yb.buffer),Xb="type"in yb?tc[yb.type]:Ta.dtype,$b=!!yb.normalized,aa=
yb.size|0,rc=yb.offset|0,Ac=yb.stride|0,Jc=yb.divisor|0);Wa=M.location;wa=P[Wa];if(1===bc){wa.buffer||U.enableVertexAttribArray(Wa);md=aa||2;if(wa.type!==Xb||wa.size!==md||wa.buffer!==Ta||wa.normalized!==$b||wa.offset!==rc||wa.stride!==Ac)U.bindBuffer(34962,Ta.buffer),U.vertexAttribPointer(Wa,md,Xb,$b,Ac,rc),wa.type=Xb,wa.size=md,wa.buffer=Ta,wa.normalized=$b,wa.offset=rc,wa.stride=Ac;wa.divisor!==Jc&&(H.vertexAttribDivisorANGLE(Wa,Jc),wa.divisor=Jc)}else if(wa.buffer&&(U.disableVertexAttribArray(Wa),
wa.buffer=null),wa.x!==Rc||wa.y!==La||wa.z!==Eb||wa.w!==Gc)U.vertexAttrib4f(Wa,Rc,La,Eb,Gc),wa.x=Rc,wa.y=La,wa.z=Eb,wa.w=Gc;hb=z.call(this,la,a,0);p.offset=hb;Sa=!1;Gb=null;db=0;ec=!1;Qc=Sb=0;Zb=1;Tb=0;fd=5126;ub=pb=Ma=Ub=0;ob(p)?(Sa=!0,Gb=t.createStream(34962,p),fd=Gb.dtype):(Gb=t.getBuffer(p))?fd=Gb.dtype:"constant"in p?(Zb=2,"number"===typeof p.constant?(Ma=p.constant,pb=ub=Ub=0):(Ma=0<p.constant.length?p.constant[0]:0,pb=1<p.constant.length?p.constant[1]:0,ub=2<p.constant.length?p.constant[2]:
0,Ub=3<p.constant.length?p.constant[3]:0)):(Gb=ob(p.buffer)?t.createStream(34962,p.buffer):t.getBuffer(p.buffer),fd="type"in p?tc[p.type]:Gb.dtype,ec=!!p.normalized,Qc=p.size|0,Sb=p.offset|0,Tb=p.stride|0,db=p.divisor|0);ib=kc.location;Oa=P[ib];if(1===Zb){Oa.buffer||U.enableVertexAttribArray(ib);Dc=Qc||4;if(Oa.type!==fd||Oa.size!==Dc||Oa.buffer!==Gb||Oa.normalized!==ec||Oa.offset!==Sb||Oa.stride!==Tb)U.bindBuffer(34962,Gb.buffer),U.vertexAttribPointer(ib,Dc,fd,ec,Tb,Sb),Oa.type=fd,Oa.size=Dc,Oa.buffer=
Gb,Oa.normalized=ec,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==db&&(H.vertexAttribDivisorANGLE(ib,db),Oa.divisor=db)}else if(Oa.buffer&&(U.disableVertexAttribArray(ib),Oa.buffer=null),Oa.x!==Ma||Oa.y!==pb||Oa.z!==ub||Oa.w!==Ub)U.vertexAttrib4f(ib,Ma,pb,ub,Ub),Oa.x=Ma,Oa.y=pb,Oa.z=ub,Oa.w=Ub;Ib=da.call(this,la,a,0);S.offset=Ib;cd=!1;eb=null;lc=0;dd=!1;kb=dc=0;lb=1;ta=0;qb=5126;Aa=bb=Ua=xa=0;ob(S)?(cd=!0,eb=t.createStream(34962,S),qb=eb.dtype):(eb=t.getBuffer(S))?qb=eb.dtype:"constant"in S?(lb=2,"number"===
typeof S.constant?(Ua=S.constant,bb=Aa=xa=0):(Ua=0<S.constant.length?S.constant[0]:0,bb=1<S.constant.length?S.constant[1]:0,Aa=2<S.constant.length?S.constant[2]:0,xa=3<S.constant.length?S.constant[3]:0)):(eb=ob(S.buffer)?t.createStream(34962,S.buffer):t.getBuffer(S.buffer),qb="type"in S?tc[S.type]:eb.dtype,dd=!!S.normalized,kb=S.size|0,dc=S.offset|0,ta=S.stride|0,lc=S.divisor|0);fb=Ka.location;Ia=P[fb];if(1===lb){Ia.buffer||U.enableVertexAttribArray(fb);Ab=kb||4;if(Ia.type!==qb||Ia.size!==Ab||Ia.buffer!==
eb||Ia.normalized!==dd||Ia.offset!==dc||Ia.stride!==ta)U.bindBuffer(34962,eb.buffer),U.vertexAttribPointer(fb,Ab,qb,dd,ta,dc),Ia.type=qb,Ia.size=Ab,Ia.buffer=eb,Ia.normalized=dd,Ia.offset=dc,Ia.stride=ta;Ia.divisor!==lc&&(H.vertexAttribDivisorANGLE(fb,lc),Ia.divisor=lc)}else if(Ia.buffer&&(U.disableVertexAttribArray(fb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==bb||Ia.z!==Aa||Ia.w!==xa)U.vertexAttrib4f(fb,Ua,bb,Aa,xa),Ia.x=Ua,Ia.y=bb,Ia.z=Aa,Ia.w=xa;zb=cb.location;Ra=P[zb];Ra.buffer||U.enableVertexAttribArray(zb);
if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==K||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)U.bindBuffer(34962,K.buffer),U.vertexAttribPointer(zb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=K,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(H.vertexAttribDivisorANGLE(zb,0),Ra.divisor=0);Kc=oa.location;Jb=P[Kc];Jb.buffer||U.enableVertexAttribArray(Kc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==E||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)U.bindBuffer(34962,E.buffer),U.vertexAttribPointer(Kc,
2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=E,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(H.vertexAttribDivisorANGLE(Kc,0),Jb.divisor=0);Za=X.location;Vb=P[Za];Vb.buffer||U.enableVertexAttribArray(Za);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==u||!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)U.bindBuffer(34962,u.buffer),U.vertexAttribPointer(Za,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=u,Vb.normalized=!1,Vb.offset=16,Vb.stride=24;0!==Vb.divisor&&(H.vertexAttribDivisorANGLE(Za,
0),Vb.divisor=0);ya=A.call(this,la,a,0);U.uniform4f($a.location,ya[0],ya[1],ya[2],ya[3]);U.uniform1f(Qa.location,a.lineWidth);U.uniform1f(ma.location,a.capSize);ce=a.scale;U.uniform2f(R.location,ce[0],ce[1]);Ja=a.scaleFract;U.uniform2f(sa.location,Ja[0],Ja[1]);Pb=a.translate;U.uniform2f(J.location,Pb[0],Pb[1]);gb=a.translateFract;U.uniform2f(Ob.location,gb[0],gb[1]);U.uniform1f(Y.location,a.opacity);(jb=Ea.elements)?U.bindBuffer(34963,jb.buffer.buffer):cc.currentVAO&&(jb=Na.getElements(cc.currentVAO.elements))&&
U.bindBuffer(34963,jb.buffer.buffer);za=Ea.offset;fc=a.count;0<fc?jb?H.drawElementsInstancedANGLE(4,36,jb.type,za<<(jb.type-5121>>1),fc):H.drawArraysInstancedANGLE(4,za,36,fc):0>fc&&(jb?U.drawElements(4,36,jb.type,za<<(jb.type-5121>>1)):U.drawArrays(4,za,36));fa.dirty=!0;cc.setVAO(null);la.viewportWidth=l;la.viewportHeight=n;F&&(ba.cpuTime+=performance.now()-L);pa&&t.destroyStream(I);pc&&t.destroyStream(Ta);Sa&&t.destroyStream(Gb);cd&&t.destroyStream(eb)},scope:function(a,b,c){var d,g,k,l,m,n,r,w,
y,v,x,G,C,Z,W,A,N,M,L,O,J,ja,z,R,P,U,ha,ka,Y,ia,X,da,ua,cc,ra,Ca,ga,qa,sa,td,Xb,Gc,Rc,La,Eb,Wa,wa,oa,hb,Sa,ma,db,na,Lb,nc,Zb,Tb,$a,Ub,Ma,pb,ub,ib,Oa,Qa,Ib,Ka,eb,lc,Na,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Ob,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,cb,sc,Ha,Mc,Zc,Hb,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,kc,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,jc,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,
Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd;d=a.viewport;g=d.x|0;k=d.y|0;l="width"in d?d.width|0:la.framebufferWidth-g;m="height"in d?d.height|0:la.framebufferHeight-k;n=la.viewportWidth;la.viewportWidth=l;r=la.viewportHeight;la.viewportHeight=m;w=pa[0];pa[0]=g;y=pa[1];pa[1]=k;v=pa[2];pa[2]=l;x=pa[3];pa[3]=m;G=Qc[0];Qc[0]=0;C=Qc[1];Qc[1]=0;Z=Qc[2];Qc[2]=0;W=Qc[3];Qc[3]=0;A=ea.blend_enable;ea.blend_enable=!0;N=wc[0];wc[0]=32774;M=wc[1];wc[1]=32774;L=B[0];B[0]=770;O=B[1];B[1]=771;J=B[2];B[2]=
773;ja=B[3];B[3]=1;z=ea.depth_enable;ea.depth_enable=!1;R=a.viewport;P=R.x|0;U=R.y|0;ha="width"in R?R.width|0:la.framebufferWidth-P;ka="height"in R?R.height|0:la.framebufferHeight-U;Y=Q[0];Q[0]=P;ia=Q[1];Q[1]=U;X=Q[2];Q[2]=ha;da=Q[3];Q[3]=ka;ua=ea.scissor_enable;ea.scissor_enable=!0;if(cc=fa.profile)ra=performance.now(),ba.count++;Ca=Ea.count;Ea.count=36;ga=a.count;qa=Ea.instances;Ea.instances=ga;sa=Ea.primitive;Ea.primitive=4;td=a.capSize;Xb=bc[5];bc[5]=td;Gc=a.lineWidth;Rc=bc[4];bc[4]=Gc;La=a.opacity;
Eb=bc[10];bc[10]=La;Wa=a.range;wa=bc[18];bc[18]=Wa;oa=a.scale;hb=bc[6];bc[6]=oa;Sa=a.scaleFract;ma=bc[7];bc[7]=Sa;db=a.translate;na=bc[8];bc[8]=db;Lb=a.translateFract;nc=bc[9];bc[9]=Lb;Zb=H.call(this,la,a,c);Tb=bc[3];bc[3]=Zb;$a=q.buffer;q.buffer=u;Ub=q.divisor;q.divisor=0;Ma=q.normalized;q.normalized=!1;pb=q.offset;q.offset=16;ub=q.size;q.size=0;ib=q.state;q.state=1;Oa=q.stride;q.stride=24;Qa=q.type;q.type=5126;Ib=q.w;q.w=0;Ka=q.x;q.x=0;eb=q.y;q.y=0;lc=q.z;q.z=0;Na=F.call(this,la,a,c);S.offset=Na;
dc=!1;kb=null;lb=0;ta=!1;xa=qb=0;Ua=1;bb=0;Aa=5126;zb=Ab=Ia=fb=0;ob(S)?(dc=!0,kb=t.createStream(34962,S),Aa=kb.dtype):(kb=t.getBuffer(S))?Aa=kb.dtype:"constant"in S?(Ua=2,"number"===typeof S.constant?(Ia=S.constant,Ab=zb=fb=0):(Ia=0<S.constant.length?S.constant[0]:0,Ab=1<S.constant.length?S.constant[1]:0,zb=2<S.constant.length?S.constant[2]:0,fb=3<S.constant.length?S.constant[3]:0)):(kb=ob(S.buffer)?t.createStream(34962,S.buffer):t.getBuffer(S.buffer),Aa="type"in S?tc[S.type]:kb.dtype,ta=!!S.normalized,
xa=S.size|0,qb=S.offset|0,bb=S.stride|0,lb=S.divisor|0);Ra=ca.buffer;ca.buffer=kb;Kc=ca.divisor;ca.divisor=lb;Jb=ca.normalized;ca.normalized=ta;Za=ca.offset;ca.offset=qb;Vb=ca.size;ca.size=xa;ya=ca.state;ca.state=Ua;Ob=ca.stride;ca.stride=bb;Ja=ca.type;ca.type=Aa;Pb=ca.w;ca.w=fb;gb=ca.x;ca.x=Ia;jb=ca.y;ca.y=Ab;za=ca.z;ca.z=zb;fc=I.buffer;I.buffer=K;Da=I.divisor;I.divisor=0;rb=I.normalized;I.normalized=!1;sb=I.offset;I.offset=0;Xa=I.size;I.size=0;Ya=I.state;I.state=1;mc=I.stride;I.stride=24;xc=I.type;
I.type=5126;uc=I.w;I.w=0;Va=I.x;I.x=0;Mb=I.y;I.y=0;Xc=I.z;I.z=0;Fa=aa.call(this,la,a,c);p.offset=Fa;yc=!1;Pa=null;Ba=0;mb=!1;Cb=vb=0;tb=1;vc=0;wb=5126;Mc=Ha=sc=cb=0;ob(p)?(yc=!0,Pa=t.createStream(34962,p),wb=Pa.dtype):(Pa=t.getBuffer(p))?wb=Pa.dtype:"constant"in p?(tb=2,"number"===typeof p.constant?(sc=p.constant,Ha=Mc=cb=0):(sc=0<p.constant.length?p.constant[0]:0,Ha=1<p.constant.length?p.constant[1]:0,Mc=2<p.constant.length?p.constant[2]:0,cb=3<p.constant.length?p.constant[3]:0)):(Pa=ob(p.buffer)?
t.createStream(34962,p.buffer):t.getBuffer(p.buffer),wb="type"in p?tc[p.type]:Pa.dtype,mb=!!p.normalized,Cb=p.size|0,vb=p.offset|0,vc=p.stride|0,Ba=p.divisor|0);Zc=h.buffer;h.buffer=Pa;Hb=h.divisor;h.divisor=Ba;Wb=h.normalized;h.normalized=mb;ac=h.offset;h.offset=vb;Qb=h.size;h.size=Cb;Ga=h.state;h.state=tb;Yb=h.stride;h.stride=vc;nb=h.type;h.type=wb;xb=h.w;h.w=cb;Nb=h.x;h.x=sc;Rb=h.y;h.y=Ha;gc=h.z;h.z=Mc;ic=f.buffer;f.buffer=E;Ye=f.divisor;f.divisor=0;Bc=f.normalized;f.normalized=!1;Cc=f.offset;
f.offset=8;Ec=f.size;f.size=0;Nc=f.state;f.state=1;Yc=f.stride;f.stride=24;Sc=f.type;f.type=5126;Oc=f.w;f.w=0;Kb=f.x;f.x=0;Fb=f.y;f.y=0;Pc=f.z;f.z=0;Hc=e.call(this,la,a,c);Bb.offset=Hc;Tc=!1;hc=null;Vc=0;nd=!1;oe=gd=0;Wc=1;kc=0;Ld=5126;Jd=Ud=xe=we=0;ob(Bb)?(Tc=!0,hc=t.createStream(34962,Bb),Ld=hc.dtype):(hc=t.getBuffer(Bb))?Ld=hc.dtype:"constant"in Bb?(Wc=2,"number"===typeof Bb.constant?(xe=Bb.constant,Ud=Jd=we=0):(xe=0<Bb.constant.length?Bb.constant[0]:0,Ud=1<Bb.constant.length?Bb.constant[1]:0,
Jd=2<Bb.constant.length?Bb.constant[2]:0,we=3<Bb.constant.length?Bb.constant[3]:0)):(hc=ob(Bb.buffer)?t.createStream(34962,Bb.buffer):t.getBuffer(Bb.buffer),Ld="type"in Bb?tc[Bb.type]:hc.dtype,nd=!!Bb.normalized,oe=Bb.size|0,gd=Bb.offset|0,kc=Bb.stride|0,Vc=Bb.divisor|0);Gd=D.buffer;D.buffer=hc;bd=D.divisor;D.divisor=Vc;Fc=D.normalized;D.normalized=nd;od=D.offset;D.offset=gd;hd=D.size;D.size=oe;ad=D.state;D.state=Wc;pd=D.stride;D.stride=kc;yd=D.type;D.type=Ld;zd=D.w;D.w=we;ye=D.x;D.x=xe;te=D.y;D.y=
Ud;jc=D.z;D.z=Jd;ee=T.call(this,la,a,c);yb.offset=ee;de=!1;be=null;ue=0;$d=!1;zc=he=0;Uc=1;pe=0;ke=5126;Od=Nd=Md=Hd=0;ob(yb)?(de=!0,be=t.createStream(34962,yb),ke=be.dtype):(be=t.getBuffer(yb))?ke=be.dtype:"constant"in yb?(Uc=2,"number"===typeof yb.constant?(Md=yb.constant,Nd=Od=Hd=0):(Md=0<yb.constant.length?yb.constant[0]:0,Nd=1<yb.constant.length?yb.constant[1]:0,Od=2<yb.constant.length?yb.constant[2]:0,Hd=3<yb.constant.length?yb.constant[3]:0)):(be=ob(yb.buffer)?t.createStream(34962,yb.buffer):
t.getBuffer(yb.buffer),ke="type"in yb?tc[yb.type]:be.dtype,$d=!!yb.normalized,zc=yb.size|0,he=yb.offset|0,pe=yb.stride|0,ue=yb.divisor|0);ie=V.buffer;V.buffer=be;Ce=V.divisor;V.divisor=ue;ze=V.normalized;V.normalized=$d;me=V.offset;V.offset=he;Oe=V.size;V.size=zc;Pe=V.state;V.state=Uc;Le=V.stride;V.stride=pe;qe=V.type;V.type=ke;De=V.w;V.w=Hd;Ge=V.x;V.x=Md;He=V.y;V.y=Nd;Ie=V.z;V.z=Od;Ee=va.vert;va.vert=2;Kd=va.frag;va.frag=1;fa.dirty=!0;b(la,a,c);la.viewportWidth=n;la.viewportHeight=r;pa[0]=w;pa[1]=
y;pa[2]=v;pa[3]=x;Qc[0]=G;Qc[1]=C;Qc[2]=Z;Qc[3]=W;ea.blend_enable=A;wc[0]=N;wc[1]=M;B[0]=L;B[1]=O;B[2]=J;B[3]=ja;ea.depth_enable=z;Q[0]=Y;Q[1]=ia;Q[2]=X;Q[3]=da;ea.scissor_enable=ua;cc&&(ba.cpuTime+=performance.now()-ra);Ea.count=Ca;Ea.instances=qa;Ea.primitive=sa;bc[5]=Xb;bc[4]=Rc;bc[10]=Eb;bc[18]=wa;bc[6]=hb;bc[7]=ma;bc[8]=na;bc[9]=nc;bc[3]=Tb;q.buffer=$a;q.divisor=Ub;q.normalized=Ma;q.offset=pb;q.size=ub;q.state=ib;q.stride=Oa;q.type=Qa;q.w=Ib;q.x=Ka;q.y=eb;q.z=lc;dc&&t.destroyStream(kb);ca.buffer=
Ra;ca.divisor=Kc;ca.normalized=Jb;ca.offset=Za;ca.size=Vb;ca.state=ya;ca.stride=Ob;ca.type=Ja;ca.w=Pb;ca.x=gb;ca.y=jb;ca.z=za;I.buffer=fc;I.divisor=Da;I.normalized=rb;I.offset=sb;I.size=Xa;I.state=Ya;I.stride=mc;I.type=xc;I.w=uc;I.x=Va;I.y=Mb;I.z=Xc;yc&&t.destroyStream(Pa);h.buffer=Zc;h.divisor=Hb;h.normalized=Wb;h.offset=ac;h.size=Qb;h.state=Ga;h.stride=Yb;h.type=nb;h.w=xb;h.x=Nb;h.y=Rb;h.z=gc;f.buffer=ic;f.divisor=Ye;f.normalized=Bc;f.offset=Cc;f.size=Ec;f.state=Nc;f.stride=Yc;f.type=Sc;f.w=Oc;
f.x=Kb;f.y=Fb;f.z=Pc;Tc&&t.destroyStream(hc);D.buffer=Gd;D.divisor=bd;D.normalized=Fc;D.offset=od;D.size=hd;D.state=ad;D.stride=pd;D.type=yd;D.w=zd;D.x=ye;D.y=te;D.z=jc;de&&t.destroyStream(be);V.buffer=ie;V.divisor=Ce;V.normalized=ze;V.offset=me;V.size=Oe;V.state=Pe;V.stride=Le;V.type=qe;V.w=De;V.x=Ge;V.y=He;V.z=Ie;va.vert=Ee;va.frag=Kd;fa.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(c,
ba,r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb){var kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea,Na,Hb,Ha,U,ob,ea,va,bc,cc,Qc,td,wc,W,B,ka,Ca,Lb,nc,Zc,C,w,ia,ua,Q,ha,ra,G,m;kc=c.attributes;oa=c.buffer;Qa=c.context;Y=c.current;O=c.draw;M=c.elements;R=c.extensions;sa=c.framebuffer;J=c.gl;Ob=c.isBufferArgs;$a=c.next;P=c.shader;t=c.uniforms;la=c.vao;fa=$a.blend_color;Ea=Y.blend_color;Na=$a.blend_equation;Hb=Y.blend_equation;Ha=$a.blend_func;U=Y.blend_func;ob=$a.colorMask;
ea=Y.colorMask;va=$a.depth_range;bc=Y.depth_range;cc=$a.polygonOffset_offset;Qc=Y.polygonOffset_offset;td=$a.sample_coverage;wc=Y.sample_coverage;W=$a.scissor_box;B=Y.scissor_box;ka=$a.stencil_func;Ca=Y.stencil_func;Lb=$a.stencil_opBack;nc=Y.stencil_opBack;Zc=$a.stencil_opFront;C=Y.stencil_opFront;w=$a.viewport;ia=Y.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Q={divisor:1,offset:8,stride:8};ha={divisor:1,offset:8,stride:8};ra={divisor:1,
offset:16,stride:8};G={divisor:1,offset:16,stride:8};m={divisor:1,offset:0,stride:4};return{batch:function(c,d){var q,r,k,t,w,p;q=sa.next;q!==sa.cur&&(q?J.bindFramebuffer(36160,q.framebuffer):J.bindFramebuffer(36160,null),sa.cur=q);if(Y.dirty){var u,v,x,W,A,N,E,K,z,H,P,fa,da,na,Wd,Ve,Na,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed;u=$a.dither;u!==Y.dither&&(u?J.enable(3024):J.disable(3024),Y.dither=u);v=$a.depth_func;v!==Y.depth_func&&(J.depthFunc(v),Y.depth_func=v);x=va[0];W=va[1];if(x!==bc[0]||
W!==bc[1])J.depthRange(x,W),bc[0]=x,bc[1]=W;A=$a.depth_mask;A!==Y.depth_mask&&(J.depthMask(A),Y.depth_mask=A);N=ob[0];E=ob[1];K=ob[2];z=ob[3];if(N!==ea[0]||E!==ea[1]||K!==ea[2]||z!==ea[3])J.colorMask(N,E,K,z),ea[0]=N,ea[1]=E,ea[2]=K,ea[3]=z;H=$a.cull_enable;H!==Y.cull_enable&&(H?J.enable(2884):J.disable(2884),Y.cull_enable=H);P=$a.cull_face;P!==Y.cull_face&&(J.cullFace(P),Y.cull_face=P);fa=$a.frontFace;fa!==Y.frontFace&&(J.frontFace(fa),Y.frontFace=fa);da=$a.lineWidth;da!==Y.lineWidth&&(J.lineWidth(da),
Y.lineWidth=da);na=$a.polygonOffset_enable;na!==Y.polygonOffset_enable&&(na?J.enable(32823):J.disable(32823),Y.polygonOffset_enable=na);Wd=cc[0];Ve=cc[1];if(Wd!==Qc[0]||Ve!==Qc[1])J.polygonOffset(Wd,Ve),Qc[0]=Wd,Qc[1]=Ve;Na=$a.sample_alpha;Na!==Y.sample_alpha&&(Na?J.enable(32926):J.disable(32926),Y.sample_alpha=Na);af=$a.sample_enable;af!==Y.sample_enable&&(af?J.enable(32928):J.disable(32928),Y.sample_enable=af);Ad=td[0];Fe=td[1];if(Ad!==wc[0]||Fe!==wc[1])J.sampleCoverage(Ad,Fe),wc[0]=Ad,wc[1]=Fe;
Sd=$a.stencil_mask;Sd!==Y.stencil_mask&&(J.stencilMask(Sd),Y.stencil_mask=Sd);Td=ka[0];le=ka[1];Xd=ka[2];if(Td!==Ca[0]||le!==Ca[1]||Xd!==Ca[2])J.stencilFunc(Td,le,Xd),Ca[0]=Td,Ca[1]=le,Ca[2]=Xd;rd=Zc[0];jd=Zc[1];vd=Zc[2];$c=Zc[3];if(rd!==C[0]||jd!==C[1]||vd!==C[2]||$c!==C[3])J.stencilOpSeparate(rd,jd,vd,$c),C[0]=rd,C[1]=jd,C[2]=vd,C[3]=$c;kd=Lb[0];oc=Lb[1];id=Lb[2];ed=Lb[3];if(kd!==nc[0]||oc!==nc[1]||id!==nc[2]||ed!==nc[3])J.stencilOpSeparate(kd,oc,id,ed),nc[0]=kd,nc[1]=oc,nc[2]=id,nc[3]=ed}J.blendColor(0,
0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;J.enable(3042);Y.blend_enable=!0;J.blendEquationSeparate(32774,32774);Hb[0]=32774;Hb[1]=32774;J.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;J.enable(3089);Y.scissor_enable=!0;J.disable(2960);Y.stencil_enable=!1;if(r=Y.profile)k=performance.now(),ba.count+=d;J.useProgram(F.program);t=R.angle_instanced_arrays;var Lc,qc,ab,Ic,Db;la.setVAO(null);Lc=qa.location;qc=kc[Lc];qc.buffer||J.enableVertexAttribArray(Lc);if(5126!==qc.type||1!==qc.size||
qc.buffer!==g||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)J.bindBuffer(34962,g.buffer),J.vertexAttribPointer(Lc,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=g,qc.normalized=!1,qc.offset=0,qc.stride=8;0!==qc.divisor&&(t.vertexAttribDivisorANGLE(Lc,0),qc.divisor=0);ab=L.location;Ic=kc[ab];Ic.buffer||J.enableVertexAttribArray(ab);if(5126!==Ic.type||1!==Ic.size||Ic.buffer!==b||!1!==Ic.normalized||4!==Ic.offset||8!==Ic.stride)J.bindBuffer(34962,b.buffer),J.vertexAttribPointer(ab,1,5126,!1,8,4),
Ic.type=5126,Ic.size=1,Ic.buffer=b,Ic.normalized=!1,Ic.offset=4,Ic.stride=8;0!==Ic.divisor&&(t.vertexAttribDivisorANGLE(ab,0),Ic.divisor=0);(Db=O.elements)?J.bindBuffer(34963,Db.buffer.buffer):la.currentVAO&&(Db=M.getElements(la.currentVAO.elements))&&J.bindBuffer(34963,Db.buffer.buffer);for(w=0;w<d;++w){p=c[w];var pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,Ha,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,
za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,jc,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad;pc=p.viewport;Ta=pc.x|0;Jc=pc.y|0;$b="width"in pc?pc.width|0:Qa.framebufferWidth-Ta;rc="height"in pc?pc.height|0:Qa.framebufferHeight-Jc;Fd=Qa.viewportWidth;Qa.viewportWidth=$b;Bd=Qa.viewportHeight;Qa.viewportHeight=rc;J.viewport(Ta,Jc,$b,rc);ia[0]=Ta;ia[1]=Jc;ia[2]=$b;ia[3]=rc;(Ac=ca.call(this,
Qa,p,w))?J.enable(2929):J.disable(2929);Y.depth_enable=Ac;Xb=p.viewport;Gc=Xb.x|0;Rc=Xb.y|0;La="width"in Xb?Xb.width|0:Qa.framebufferWidth-Gc;Eb="height"in Xb?Xb.height|0:Qa.framebufferHeight-Rc;J.scissor(Gc,Rc,La,Eb);B[0]=Gc;B[1]=Rc;B[2]=La;B[3]=Eb;Q.buffer=p.positionBuffer;Wa=!1;wa=null;md=0;hb=!1;Gb=Sa=0;db=1;ec=0;Sb=5126;fd=Tb=Zb=Ha=0;Ob(Q)?(Wa=!0,wa=oa.createStream(34962,Q),Sb=wa.dtype):(wa=oa.getBuffer(Q))?Sb=wa.dtype:"constant"in Q?(db=2,"number"===typeof Q.constant?(Zb=Q.constant,Tb=fd=Ha=
0):(Zb=0<Q.constant.length?Q.constant[0]:0,Tb=1<Q.constant.length?Q.constant[1]:0,fd=2<Q.constant.length?Q.constant[2]:0,Ha=3<Q.constant.length?Q.constant[3]:0)):(wa=Ob(Q.buffer)?oa.createStream(34962,Q.buffer):oa.getBuffer(Q.buffer),Sb="type"in Q?ua[Q.type]:wa.dtype,hb=!!Q.normalized,Gb=Q.size|0,Sa=Q.offset|0,ec=Q.stride|0,md=Q.divisor|0);Ub=aa.location;Ma=kc[Ub];if(1===db){Ma.buffer||J.enableVertexAttribArray(Ub);pb=Gb||2;if(Ma.type!==Sb||Ma.size!==pb||Ma.buffer!==wa||Ma.normalized!==hb||Ma.offset!==
Sa||Ma.stride!==ec)J.bindBuffer(34962,wa.buffer),J.vertexAttribPointer(Ub,pb,Sb,hb,ec,Sa),Ma.type=Sb,Ma.size=pb,Ma.buffer=wa,Ma.normalized=hb,Ma.offset=Sa,Ma.stride=ec;Ma.divisor!==md&&(t.vertexAttribDivisorANGLE(Ub,md),Ma.divisor=md)}else if(Ma.buffer&&(J.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==Zb||Ma.y!==Tb||Ma.z!==fd||Ma.w!==Ha)J.vertexAttrib4f(Ub,Zb,Tb,fd,Ha),Ma.x=Zb,Ma.y=Tb,Ma.z=fd,Ma.w=Ha;ra.buffer=p.positionBuffer;ub=!1;ib=null;Oa=0;Dc=!1;cd=Ib=0;eb=1;lc=0;dd=5126;ta=lb=kb=dc=0;
Ob(ra)?(ub=!0,ib=oa.createStream(34962,ra),dd=ib.dtype):(ib=oa.getBuffer(ra))?dd=ib.dtype:"constant"in ra?(eb=2,"number"===typeof ra.constant?(kb=ra.constant,lb=ta=dc=0):(kb=0<ra.constant.length?ra.constant[0]:0,lb=1<ra.constant.length?ra.constant[1]:0,ta=2<ra.constant.length?ra.constant[2]:0,dc=3<ra.constant.length?ra.constant[3]:0)):(ib=Ob(ra.buffer)?oa.createStream(34962,ra.buffer):oa.getBuffer(ra.buffer),dd="type"in ra?ua[ra.type]:ib.dtype,Dc=!!ra.normalized,cd=ra.size|0,Ib=ra.offset|0,lc=ra.stride|
0,Oa=ra.divisor|0);qb=f.location;xa=kc[qb];if(1===eb){xa.buffer||J.enableVertexAttribArray(qb);Ua=cd||2;if(xa.type!==dd||xa.size!==Ua||xa.buffer!==ib||xa.normalized!==Dc||xa.offset!==Ib||xa.stride!==lc)J.bindBuffer(34962,ib.buffer),J.vertexAttribPointer(qb,Ua,dd,Dc,lc,Ib),xa.type=dd,xa.size=Ua,xa.buffer=ib,xa.normalized=Dc,xa.offset=Ib,xa.stride=lc;xa.divisor!==Oa&&(t.vertexAttribDivisorANGLE(qb,Oa),xa.divisor=Oa)}else if(xa.buffer&&(J.disableVertexAttribArray(qb),xa.buffer=null),xa.x!==kb||xa.y!==
lb||xa.z!==ta||xa.w!==dc)J.vertexAttrib4f(qb,kb,lb,ta,dc),xa.x=kb,xa.y=lb,xa.z=ta,xa.w=dc;ha.buffer=p.positionFractBuffer;bb=!1;Aa=null;fb=0;Ia=!1;zb=Ab=0;Ra=1;Kc=0;Jb=5126;ce=ya=Vb=Za=0;Ob(ha)?(bb=!0,Aa=oa.createStream(34962,ha),Jb=Aa.dtype):(Aa=oa.getBuffer(ha))?Jb=Aa.dtype:"constant"in ha?(Ra=2,"number"===typeof ha.constant?(Vb=ha.constant,ya=ce=Za=0):(Vb=0<ha.constant.length?ha.constant[0]:0,ya=1<ha.constant.length?ha.constant[1]:0,ce=2<ha.constant.length?ha.constant[2]:0,Za=3<ha.constant.length?
ha.constant[3]:0)):(Aa=Ob(ha.buffer)?oa.createStream(34962,ha.buffer):oa.getBuffer(ha.buffer),Jb="type"in ha?ua[ha.type]:Aa.dtype,Ia=!!ha.normalized,zb=ha.size|0,Ab=ha.offset|0,Kc=ha.stride|0,fb=ha.divisor|0);Ja=h.location;Pb=kc[Ja];if(1===Ra){Pb.buffer||J.enableVertexAttribArray(Ja);gb=zb||2;if(Pb.type!==Jb||Pb.size!==gb||Pb.buffer!==Aa||Pb.normalized!==Ia||Pb.offset!==Ab||Pb.stride!==Kc)J.bindBuffer(34962,Aa.buffer),J.vertexAttribPointer(Ja,gb,Jb,Ia,Kc,Ab),Pb.type=Jb,Pb.size=gb,Pb.buffer=Aa,Pb.normalized=
Ia,Pb.offset=Ab,Pb.stride=Kc;Pb.divisor!==fb&&(t.vertexAttribDivisorANGLE(Ja,fb),Pb.divisor=fb)}else if(Pb.buffer&&(J.disableVertexAttribArray(Ja),Pb.buffer=null),Pb.x!==Vb||Pb.y!==ya||Pb.z!==ce||Pb.w!==Za)J.vertexAttrib4f(Ja,Vb,ya,ce,Za),Pb.x=Vb,Pb.y=ya,Pb.z=ce,Pb.w=Za;G.buffer=p.positionFractBuffer;jb=!1;za=null;fc=0;Da=!1;sb=rb=0;Xa=1;Ya=0;mc=5126;Mb=Va=uc=xc=0;Ob(G)?(jb=!0,za=oa.createStream(34962,G),mc=za.dtype):(za=oa.getBuffer(G))?mc=za.dtype:"constant"in G?(Xa=2,"number"===typeof G.constant?
(uc=G.constant,Va=Mb=xc=0):(uc=0<G.constant.length?G.constant[0]:0,Va=1<G.constant.length?G.constant[1]:0,Mb=2<G.constant.length?G.constant[2]:0,xc=3<G.constant.length?G.constant[3]:0)):(za=Ob(G.buffer)?oa.createStream(34962,G.buffer):oa.getBuffer(G.buffer),mc="type"in G?ua[G.type]:za.dtype,Da=!!G.normalized,sb=G.size|0,rb=G.offset|0,Ya=G.stride|0,fc=G.divisor|0);Xc=e.location;Fa=kc[Xc];if(1===Xa){Fa.buffer||J.enableVertexAttribArray(Xc);yc=sb||2;if(Fa.type!==mc||Fa.size!==yc||Fa.buffer!==za||Fa.normalized!==
Da||Fa.offset!==rb||Fa.stride!==Ya)J.bindBuffer(34962,za.buffer),J.vertexAttribPointer(Xc,yc,mc,Da,Ya,rb),Fa.type=mc,Fa.size=yc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=rb,Fa.stride=Ya;Fa.divisor!==fc&&(t.vertexAttribDivisorANGLE(Xc,fc),Fa.divisor=fc)}else if(Fa.buffer&&(J.disableVertexAttribArray(Xc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Mb||Fa.w!==xc)J.vertexAttrib4f(Xc,uc,Va,Mb,xc),Fa.x=uc,Fa.y=Va,Fa.z=Mb,Fa.w=xc;m.buffer=p.colorBuffer;Pa=!1;Ba=null;mb=0;vb=!1;tb=Cb=0;vc=1;wb=0;wd=5126;ld=
Mc=ud=sc=0;Ob(m)?(Pa=!0,Ba=oa.createStream(34962,m),wd=Ba.dtype):(Ba=oa.getBuffer(m))?wd=Ba.dtype:"constant"in m?(vc=2,"number"===typeof m.constant?(ud=m.constant,Mc=ld=sc=0):(ud=0<m.constant.length?m.constant[0]:0,Mc=1<m.constant.length?m.constant[1]:0,ld=2<m.constant.length?m.constant[2]:0,sc=3<m.constant.length?m.constant[3]:0)):(Ba=Ob(m.buffer)?oa.createStream(34962,m.buffer):oa.getBuffer(m.buffer),wd="type"in m?ua[m.type]:Ba.dtype,vb=!!m.normalized,tb=m.size|0,Cb=m.offset|0,wb=m.stride|0,mb=
m.divisor|0);sd=D.location;Wb=kc[sd];if(1===vc){Wb.buffer||J.enableVertexAttribArray(sd);ac=tb||4;if(Wb.type!==wd||Wb.size!==ac||Wb.buffer!==Ba||Wb.normalized!==vb||Wb.offset!==Cb||Wb.stride!==wb)J.bindBuffer(34962,Ba.buffer),J.vertexAttribPointer(sd,ac,wd,vb,wb,Cb),Wb.type=wd,Wb.size=ac,Wb.buffer=Ba,Wb.normalized=vb,Wb.offset=Cb,Wb.stride=wb;Wb.divisor!==mb&&(t.vertexAttribDivisorANGLE(sd,mb),Wb.divisor=mb)}else if(Wb.buffer&&(J.disableVertexAttribArray(sd),Wb.buffer=null),Wb.x!==ud||Wb.y!==Mc||
Wb.z!==ld||Wb.w!==sc)J.vertexAttrib4f(sd,ud,Mc,ld,sc),Wb.x=ud,Wb.y=Mc,Wb.z=ld,Wb.w=sc;Qb=p.scale;Ga=Qb[0];nb=Qb[1];w&&Yb===Ga&&xb===nb||(Yb=Ga,xb=nb,J.uniform2f(a.location,Ga,nb));Nb=p.scaleFract;Rb=Nb[0];ic=Nb[1];w&&gc===Rb&&Ye===ic||(gc=Rb,Ye=ic,J.uniform2f(l.location,Rb,ic));Bc=p.translate;Cc=Bc[0];Nc=Bc[1];w&&Ec===Cc&&Yc===Nc||(Ec=Cc,Yc=Nc,J.uniform2f(ma.location,Cc,Nc));Sc=p.translateFract;Oc=Sc[0];Fb=Sc[1];w&&Kb===Oc&&Pc===Fb||(Kb=Oc,Pc=Fb,J.uniform2f(Ka.location,Oc,Fb));Hc=p.thickness;w&&Tc===
Hc||(Tc=Hc,J.uniform1f(X.location,Hc));hc=p.depth;w&&Vc===hc||(Vc=hc,J.uniform1f(n.location,hc));nd=I.call(this,Qa,p,w);gd=nd[0];Wc=nd[1];Ld=nd[2];xe=nd[3];w&&oe===gd&&jc===Wc&&we===Ld&&Ud===xe||(oe=gd,jc=Wc,we=Ld,Ud=xe,J.uniform4f(cb.location,gd,Wc,Ld,xe));Jd=p.dashLength;w&&Gd===Jd||(Gd=Jd,J.uniform1f(T.location,Jd));bd=p.opacity;w&&Fc===bd||(Fc=bd,J.uniform1f(ga.location,bd));(od=p.dashTexture)&&"framebuffer"===od._reglType&&(od=od.color[0]);hd=od._texture;J.uniform1i(V.location,hd.bind());ad=
p.count;0<ad?Db?t.drawElementsInstancedANGLE(5,4,Db.type,0<<(Db.type-5121>>1),ad):t.drawArraysInstancedANGLE(5,0,4,ad):0>ad&&(Db?J.drawElements(5,4,Db.type,0<<(Db.type-5121>>1)):J.drawArrays(5,0,4));Qa.viewportWidth=Fd;Qa.viewportHeight=Bd;Wa&&oa.destroyStream(wa);ub&&oa.destroyStream(ib);bb&&oa.destroyStream(Aa);jb&&oa.destroyStream(za);Pa&&oa.destroyStream(Ba);hd.unbind()}Y.dirty=!0;la.setVAO(null);r&&(ba.cpuTime+=performance.now()-k)},draw:function(c){var d,q,t,k,w,u,p,v,W,A,F,E,K,z,H,P,I,fa,da,
ca,na,Wd,Ve,Na,Ha,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb;d=sa.next;d!==sa.cur&&(d?J.bindFramebuffer(36160,d.framebuffer):J.bindFramebuffer(36160,null),sa.cur=d);if(Y.dirty){var sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb;sb=$a.dither;
sb!==Y.dither&&(sb?J.enable(3024):J.disable(3024),Y.dither=sb);Xa=$a.depth_func;Xa!==Y.depth_func&&(J.depthFunc(Xa),Y.depth_func=Xa);Ya=va[0];mc=va[1];if(Ya!==bc[0]||mc!==bc[1])J.depthRange(Ya,mc),bc[0]=Ya,bc[1]=mc;xc=$a.depth_mask;xc!==Y.depth_mask&&(J.depthMask(xc),Y.depth_mask=xc);uc=ob[0];Va=ob[1];Mb=ob[2];Xc=ob[3];if(uc!==ea[0]||Va!==ea[1]||Mb!==ea[2]||Xc!==ea[3])J.colorMask(uc,Va,Mb,Xc),ea[0]=uc,ea[1]=Va,ea[2]=Mb,ea[3]=Xc;Fa=$a.cull_enable;Fa!==Y.cull_enable&&(Fa?J.enable(2884):J.disable(2884),
Y.cull_enable=Fa);yc=$a.cull_face;yc!==Y.cull_face&&(J.cullFace(yc),Y.cull_face=yc);Pa=$a.frontFace;Pa!==Y.frontFace&&(J.frontFace(Pa),Y.frontFace=Pa);Ba=$a.lineWidth;Ba!==Y.lineWidth&&(J.lineWidth(Ba),Y.lineWidth=Ba);mb=$a.polygonOffset_enable;mb!==Y.polygonOffset_enable&&(mb?J.enable(32823):J.disable(32823),Y.polygonOffset_enable=mb);vb=cc[0];Cb=cc[1];if(vb!==Qc[0]||Cb!==Qc[1])J.polygonOffset(vb,Cb),Qc[0]=vb,Qc[1]=Cb;tb=$a.sample_alpha;tb!==Y.sample_alpha&&(tb?J.enable(32926):J.disable(32926),Y.sample_alpha=
tb);vc=$a.sample_enable;vc!==Y.sample_enable&&(vc?J.enable(32928):J.disable(32928),Y.sample_enable=vc);wb=td[0];wd=td[1];if(wb!==wc[0]||wd!==wc[1])J.sampleCoverage(wb,wd),wc[0]=wb,wc[1]=wd;sc=$a.stencil_mask;sc!==Y.stencil_mask&&(J.stencilMask(sc),Y.stencil_mask=sc);ud=ka[0];Mc=ka[1];ld=ka[2];if(ud!==Ca[0]||Mc!==Ca[1]||ld!==Ca[2])J.stencilFunc(ud,Mc,ld),Ca[0]=ud,Ca[1]=Mc,Ca[2]=ld;sd=Zc[0];Wb=Zc[1];ac=Zc[2];Qb=Zc[3];if(sd!==C[0]||Wb!==C[1]||ac!==C[2]||Qb!==C[3])J.stencilOpSeparate(sd,Wb,ac,Qb),C[0]=
sd,C[1]=Wb,C[2]=ac,C[3]=Qb;Ga=Lb[0];Yb=Lb[1];nb=Lb[2];xb=Lb[3];if(Ga!==nc[0]||Yb!==nc[1]||nb!==nc[2]||xb!==nc[3])J.stencilOpSeparate(Ga,Yb,nb,xb),nc[0]=Ga,nc[1]=Yb,nc[2]=nb,nc[3]=xb}q=c.viewport;t=q.x|0;k=q.y|0;w="width"in q?q.width|0:Qa.framebufferWidth-t;u="height"in q?q.height|0:Qa.framebufferHeight-k;p=Qa.viewportWidth;Qa.viewportWidth=w;v=Qa.viewportHeight;Qa.viewportHeight=u;J.viewport(t,k,w,u);ia[0]=t;ia[1]=k;ia[2]=w;ia[3]=u;J.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;J.enable(3042);
Y.blend_enable=!0;J.blendEquationSeparate(32774,32774);Hb[0]=32774;Hb[1]=32774;J.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;(W=r.call(this,Qa,c,0))?J.enable(2929):J.disable(2929);Y.depth_enable=W;A=c.viewport;F=A.x|0;E=A.y|0;K="width"in A?A.width|0:Qa.framebufferWidth-F;z="height"in A?A.height|0:Qa.framebufferHeight-E;J.scissor(F,E,K,z);B[0]=F;B[1]=E;B[2]=K;B[3]=z;J.enable(3089);Y.scissor_enable=!0;J.disable(2960);Y.stencil_enable=!1;if(H=Y.profile)P=performance.now(),ba.count++;
J.useProgram(N.program);I=R.angle_instanced_arrays;la.setVAO(null);Q.buffer=c.positionBuffer;fa=!1;da=null;ca=0;na=!1;Ve=Wd=0;Na=1;Ha=0;Ad=5126;le=Td=Sd=Fe=0;Ob(Q)?(fa=!0,da=oa.createStream(34962,Q),Ad=da.dtype):(da=oa.getBuffer(Q))?Ad=da.dtype:"constant"in Q?(Na=2,"number"===typeof Q.constant?(Sd=Q.constant,Td=le=Fe=0):(Sd=0<Q.constant.length?Q.constant[0]:0,Td=1<Q.constant.length?Q.constant[1]:0,le=2<Q.constant.length?Q.constant[2]:0,Fe=3<Q.constant.length?Q.constant[3]:0)):(da=Ob(Q.buffer)?oa.createStream(34962,
Q.buffer):oa.getBuffer(Q.buffer),Ad="type"in Q?ua[Q.type]:da.dtype,na=!!Q.normalized,Ve=Q.size|0,Wd=Q.offset|0,Ha=Q.stride|0,ca=Q.divisor|0);Xd=aa.location;rd=kc[Xd];if(1===Na){rd.buffer||J.enableVertexAttribArray(Xd);jd=Ve||2;if(rd.type!==Ad||rd.size!==jd||rd.buffer!==da||rd.normalized!==na||rd.offset!==Wd||rd.stride!==Ha)J.bindBuffer(34962,da.buffer),J.vertexAttribPointer(Xd,jd,Ad,na,Ha,Wd),rd.type=Ad,rd.size=jd,rd.buffer=da,rd.normalized=na,rd.offset=Wd,rd.stride=Ha;rd.divisor!==ca&&(I.vertexAttribDivisorANGLE(Xd,
ca),rd.divisor=ca)}else if(rd.buffer&&(J.disableVertexAttribArray(Xd),rd.buffer=null),rd.x!==Sd||rd.y!==Td||rd.z!==le||rd.w!==Fe)J.vertexAttrib4f(Xd,Sd,Td,le,Fe),rd.x=Sd,rd.y=Td,rd.z=le,rd.w=Fe;ra.buffer=c.positionBuffer;vd=!1;$c=null;kd=0;oc=!1;ed=id=0;Lc=1;qc=0;ab=5126;Ta=pc=Db=Ic=0;Ob(ra)?(vd=!0,$c=oa.createStream(34962,ra),ab=$c.dtype):($c=oa.getBuffer(ra))?ab=$c.dtype:"constant"in ra?(Lc=2,"number"===typeof ra.constant?(Db=ra.constant,pc=Ta=Ic=0):(Db=0<ra.constant.length?ra.constant[0]:0,pc=
1<ra.constant.length?ra.constant[1]:0,Ta=2<ra.constant.length?ra.constant[2]:0,Ic=3<ra.constant.length?ra.constant[3]:0)):($c=Ob(ra.buffer)?oa.createStream(34962,ra.buffer):oa.getBuffer(ra.buffer),ab="type"in ra?ua[ra.type]:$c.dtype,oc=!!ra.normalized,ed=ra.size|0,id=ra.offset|0,qc=ra.stride|0,kd=ra.divisor|0);Jc=f.location;$b=kc[Jc];if(1===Lc){$b.buffer||J.enableVertexAttribArray(Jc);rc=ed||2;if($b.type!==ab||$b.size!==rc||$b.buffer!==$c||$b.normalized!==oc||$b.offset!==id||$b.stride!==qc)J.bindBuffer(34962,
$c.buffer),J.vertexAttribPointer(Jc,rc,ab,oc,qc,id),$b.type=ab,$b.size=rc,$b.buffer=$c,$b.normalized=oc,$b.offset=id,$b.stride=qc;$b.divisor!==kd&&(I.vertexAttribDivisorANGLE(Jc,kd),$b.divisor=kd)}else if($b.buffer&&(J.disableVertexAttribArray(Jc),$b.buffer=null),$b.x!==Db||$b.y!==pc||$b.z!==Ta||$b.w!==Ic)J.vertexAttrib4f(Jc,Db,pc,Ta,Ic),$b.x=Db,$b.y=pc,$b.z=Ta,$b.w=Ic;ha.buffer=c.positionFractBuffer;Fd=!1;Bd=null;Ac=0;Xb=!1;Rc=Gc=0;La=1;Eb=0;Wa=5126;Sa=hb=md=wa=0;Ob(ha)?(Fd=!0,Bd=oa.createStream(34962,
ha),Wa=Bd.dtype):(Bd=oa.getBuffer(ha))?Wa=Bd.dtype:"constant"in ha?(La=2,"number"===typeof ha.constant?(md=ha.constant,hb=Sa=wa=0):(md=0<ha.constant.length?ha.constant[0]:0,hb=1<ha.constant.length?ha.constant[1]:0,Sa=2<ha.constant.length?ha.constant[2]:0,wa=3<ha.constant.length?ha.constant[3]:0)):(Bd=Ob(ha.buffer)?oa.createStream(34962,ha.buffer):oa.getBuffer(ha.buffer),Wa="type"in ha?ua[ha.type]:Bd.dtype,Xb=!!ha.normalized,Rc=ha.size|0,Gc=ha.offset|0,Eb=ha.stride|0,Ac=ha.divisor|0);Gb=h.location;
db=kc[Gb];if(1===La){db.buffer||J.enableVertexAttribArray(Gb);ec=Rc||2;if(db.type!==Wa||db.size!==ec||db.buffer!==Bd||db.normalized!==Xb||db.offset!==Gc||db.stride!==Eb)J.bindBuffer(34962,Bd.buffer),J.vertexAttribPointer(Gb,ec,Wa,Xb,Eb,Gc),db.type=Wa,db.size=ec,db.buffer=Bd,db.normalized=Xb,db.offset=Gc,db.stride=Eb;db.divisor!==Ac&&(I.vertexAttribDivisorANGLE(Gb,Ac),db.divisor=Ac)}else if(db.buffer&&(J.disableVertexAttribArray(Gb),db.buffer=null),db.x!==md||db.y!==hb||db.z!==Sa||db.w!==wa)J.vertexAttrib4f(Gb,
md,hb,Sa,wa),db.x=md,db.y=hb,db.z=Sa,db.w=wa;G.buffer=c.positionFractBuffer;Sb=!1;ge=null;Zb=0;Tb=!1;Ub=fd=0;Ma=1;pb=0;ub=5126;Ib=Dc=Oa=ib=0;Ob(G)?(Sb=!0,ge=oa.createStream(34962,G),ub=ge.dtype):(ge=oa.getBuffer(G))?ub=ge.dtype:"constant"in G?(Ma=2,"number"===typeof G.constant?(Oa=G.constant,Dc=Ib=ib=0):(Oa=0<G.constant.length?G.constant[0]:0,Dc=1<G.constant.length?G.constant[1]:0,Ib=2<G.constant.length?G.constant[2]:0,ib=3<G.constant.length?G.constant[3]:0)):(ge=Ob(G.buffer)?oa.createStream(34962,
G.buffer):oa.getBuffer(G.buffer),ub="type"in G?ua[G.type]:ge.dtype,Tb=!!G.normalized,Ub=G.size|0,fd=G.offset|0,pb=G.stride|0,Zb=G.divisor|0);cd=e.location;eb=kc[cd];if(1===Ma){eb.buffer||J.enableVertexAttribArray(cd);lc=Ub||2;if(eb.type!==ub||eb.size!==lc||eb.buffer!==ge||eb.normalized!==Tb||eb.offset!==fd||eb.stride!==pb)J.bindBuffer(34962,ge.buffer),J.vertexAttribPointer(cd,lc,ub,Tb,pb,fd),eb.type=ub,eb.size=lc,eb.buffer=ge,eb.normalized=Tb,eb.offset=fd,eb.stride=pb;eb.divisor!==Zb&&(I.vertexAttribDivisorANGLE(cd,
Zb),eb.divisor=Zb)}else if(eb.buffer&&(J.disableVertexAttribArray(cd),eb.buffer=null),eb.x!==Oa||eb.y!==Dc||eb.z!==Ib||eb.w!==ib)J.vertexAttrib4f(cd,Oa,Dc,Ib,ib),eb.x=Oa,eb.y=Dc,eb.z=Ib,eb.w=ib;m.buffer=c.colorBuffer;dd=!1;dc=null;kb=0;lb=!1;qb=ta=0;xa=1;Ua=0;bb=5126;Ab=Ia=fb=Aa=0;Ob(m)?(dd=!0,dc=oa.createStream(34962,m),bb=dc.dtype):(dc=oa.getBuffer(m))?bb=dc.dtype:"constant"in m?(xa=2,"number"===typeof m.constant?(fb=m.constant,Ia=Ab=Aa=0):(fb=0<m.constant.length?m.constant[0]:0,Ia=1<m.constant.length?
m.constant[1]:0,Ab=2<m.constant.length?m.constant[2]:0,Aa=3<m.constant.length?m.constant[3]:0)):(dc=Ob(m.buffer)?oa.createStream(34962,m.buffer):oa.getBuffer(m.buffer),bb="type"in m?ua[m.type]:dc.dtype,lb=!!m.normalized,qb=m.size|0,ta=m.offset|0,Ua=m.stride|0,kb=m.divisor|0);zb=D.location;Ra=kc[zb];if(1===xa){Ra.buffer||J.enableVertexAttribArray(zb);Kc=qb||4;if(Ra.type!==bb||Ra.size!==Kc||Ra.buffer!==dc||Ra.normalized!==lb||Ra.offset!==ta||Ra.stride!==Ua)J.bindBuffer(34962,dc.buffer),J.vertexAttribPointer(zb,
Kc,bb,lb,Ua,ta),Ra.type=bb,Ra.size=Kc,Ra.buffer=dc,Ra.normalized=lb,Ra.offset=ta,Ra.stride=Ua;Ra.divisor!==kb&&(I.vertexAttribDivisorANGLE(zb,kb),Ra.divisor=kb)}else if(Ra.buffer&&(J.disableVertexAttribArray(zb),Ra.buffer=null),Ra.x!==fb||Ra.y!==Ia||Ra.z!==Ab||Ra.w!==Aa)J.vertexAttrib4f(zb,fb,Ia,Ab,Aa),Ra.x=fb,Ra.y=Ia,Ra.z=Ab,Ra.w=Aa;Jb=qa.location;Za=kc[Jb];Za.buffer||J.enableVertexAttribArray(Jb);if(5126!==Za.type||1!==Za.size||Za.buffer!==g||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)J.bindBuffer(34962,
g.buffer),J.vertexAttribPointer(Jb,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=g,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(I.vertexAttribDivisorANGLE(Jb,0),Za.divisor=0);Vb=L.location;ya=kc[Vb];ya.buffer||J.enableVertexAttribArray(Vb);if(5126!==ya.type||1!==ya.size||ya.buffer!==b||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)J.bindBuffer(34962,b.buffer),J.vertexAttribPointer(Vb,1,5126,!1,8,4),ya.type=5126,ya.size=1,ya.buffer=b,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&
(I.vertexAttribDivisorANGLE(Vb,0),ya.divisor=0);ce=c.scale;J.uniform2f(a.location,ce[0],ce[1]);Ja=c.scaleFract;J.uniform2f(l.location,Ja[0],Ja[1]);Pb=c.translate;J.uniform2f(ma.location,Pb[0],Pb[1]);gb=c.translateFract;J.uniform2f(Ka.location,gb[0],gb[1]);J.uniform1f(X.location,c.thickness);J.uniform1f(n.location,c.depth);jb=x.call(this,Qa,c,0);J.uniform4f(cb.location,jb[0],jb[1],jb[2],jb[3]);J.uniform1f(T.location,c.dashLength);J.uniform1f(ga.location,c.opacity);(za=c.dashTexture)&&"framebuffer"===
za._reglType&&(za=za.color[0]);fc=za._texture;J.uniform1i(V.location,fc.bind());(Da=O.elements)?J.bindBuffer(34963,Da.buffer.buffer):la.currentVAO&&(Da=M.getElements(la.currentVAO.elements))&&J.bindBuffer(34963,Da.buffer.buffer);rb=c.count;0<rb?Da?I.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),rb):I.drawArraysInstancedANGLE(5,0,4,rb):0>rb&&(Da?J.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):J.drawArrays(5,0,4));Y.dirty=!0;la.setVAO(null);Qa.viewportWidth=p;Qa.viewportHeight=v;H&&(ba.cpuTime+=
performance.now()-P);fa&&oa.destroyStream(da);vd&&oa.destroyStream($c);Fd&&oa.destroyStream(Bd);Sb&&oa.destroyStream(ge);dd&&oa.destroyStream(dc);fc.unbind()},scope:function(a,c,e){var f,h,l,n,p,r,B,x,C,D,N,M,F,L,J,I,R,U,ka,T,V,ia,X,ca,ea,la,cc,Ca,ga,qa,va,sa,td,ma,wc,aa,ed,Lc,qc,ab,Lb,Db,pc,Ta,Jc,$b,rc,nc,bc,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,Ea,hb,Sa,Gb,db,ec,Sb,Qc,Zb,Tb,Ka,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,ob,eb,lc,cb,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Zc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,
uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,Hb,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,kc,Ld,Id,jc,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me;f=a.viewport;h=f.x|0;l=f.y|0;n="width"in f?f.width|0:Qa.framebufferWidth-h;p="height"in f?f.height|0:Qa.framebufferHeight-l;r=Qa.viewportWidth;Qa.viewportWidth=n;B=Qa.viewportHeight;
Qa.viewportHeight=p;x=w[0];w[0]=h;C=w[1];w[1]=l;D=w[2];w[2]=n;N=w[3];w[3]=p;M=fa[0];fa[0]=0;F=fa[1];fa[1]=0;L=fa[2];fa[2]=0;J=fa[3];fa[3]=0;I=$a.blend_enable;$a.blend_enable=!0;R=Na[0];Na[0]=32774;U=Na[1];Na[1]=32774;ka=Ha[0];Ha[0]=770;T=Ha[1];Ha[1]=771;V=Ha[2];Ha[2]=773;ia=Ha[3];Ha[3]=1;X=d.call(this,Qa,a,e);ca=$a.depth_enable;$a.depth_enable=X;ea=a.viewport;la=ea.x|0;cc=ea.y|0;Ca="width"in ea?ea.width|0:Qa.framebufferWidth-la;ga="height"in ea?ea.height|0:Qa.framebufferHeight-cc;qa=W[0];W[0]=la;
va=W[1];W[1]=cc;sa=W[2];W[2]=Ca;td=W[3];W[3]=ga;ma=$a.scissor_enable;$a.scissor_enable=!0;wc=$a.stencil_enable;$a.stencil_enable=!1;if(aa=Y.profile)ed=performance.now(),ba.count++;Lc=O.offset;O.offset=0;qc=O.count;O.count=4;ab=a.count;Lb=O.instances;O.instances=ab;Db=O.primitive;O.primitive=5;pc=a.dashLength;Ta=t[23];t[23]=pc;Jc=a.dashTexture;$b=t[24];t[24]=Jc;rc=a.depth;nc=t[22];t[22]=rc;bc=a.id;Ac=t[31];t[31]=bc;Xb=a.miterLimit;Gc=t[32];t[32]=Xb;Rc=v.call(this,Qa,a,e);La=t[33];t[33]=Rc;Eb=a.opacity;
Wa=t[10];t[10]=Eb;wa=Qa.pixelRatio;Ea=t[34];t[34]=wa;hb=a.scale;Sa=t[6];t[6]=hb;Gb=a.scaleFract;db=t[7];t[7]=Gb;ec=a.thickness;Sb=t[21];t[21]=ec;Qc=a.translate;Zb=t[8];t[8]=Qc;Tb=a.translateFract;Ka=t[9];t[9]=Tb;Ub=z.call(this,Qa,a,e);Ma=t[3];t[3]=Ub;Q.buffer=a.positionBuffer;pb=!1;ub=null;ib=0;Oa=!1;Ib=Dc=0;ob=1;eb=0;lc=5126;lb=kb=dc=cb=0;Ob(Q)?(pb=!0,ub=oa.createStream(34962,Q),lc=ub.dtype):(ub=oa.getBuffer(Q))?lc=ub.dtype:"constant"in Q?(ob=2,"number"===typeof Q.constant?(dc=Q.constant,kb=lb=cb=
0):(dc=0<Q.constant.length?Q.constant[0]:0,kb=1<Q.constant.length?Q.constant[1]:0,lb=2<Q.constant.length?Q.constant[2]:0,cb=3<Q.constant.length?Q.constant[3]:0)):(ub=Ob(Q.buffer)?oa.createStream(34962,Q.buffer):oa.getBuffer(Q.buffer),lc="type"in Q?ua[Q.type]:ub.dtype,Oa=!!Q.normalized,Ib=Q.size|0,Dc=Q.offset|0,eb=Q.stride|0,ib=Q.divisor|0);ta=da.buffer;da.buffer=ub;qb=da.divisor;da.divisor=ib;xa=da.normalized;da.normalized=Oa;Ua=da.offset;da.offset=Dc;bb=da.size;da.size=Ib;Aa=da.state;da.state=ob;
fb=da.stride;da.stride=eb;Ia=da.type;da.type=lc;Ab=da.w;da.w=cb;zb=da.x;da.x=dc;Ra=da.y;da.y=kb;Kc=da.z;da.z=lb;ha.buffer=a.positionFractBuffer;Jb=!1;Za=null;Vb=0;ya=!1;Ja=Zc=0;Pb=1;gb=0;jb=5126;rb=Da=fc=za=0;Ob(ha)?(Jb=!0,Za=oa.createStream(34962,ha),jb=Za.dtype):(Za=oa.getBuffer(ha))?jb=Za.dtype:"constant"in ha?(Pb=2,"number"===typeof ha.constant?(fc=ha.constant,Da=rb=za=0):(fc=0<ha.constant.length?ha.constant[0]:0,Da=1<ha.constant.length?ha.constant[1]:0,rb=2<ha.constant.length?ha.constant[2]:
0,za=3<ha.constant.length?ha.constant[3]:0)):(Za=Ob(ha.buffer)?oa.createStream(34962,ha.buffer):oa.getBuffer(ha.buffer),jb="type"in ha?ua[ha.type]:Za.dtype,ya=!!ha.normalized,Ja=ha.size|0,Zc=ha.offset|0,gb=ha.stride|0,Vb=ha.divisor|0);sb=K.buffer;K.buffer=Za;Xa=K.divisor;K.divisor=Vb;Ya=K.normalized;K.normalized=ya;mc=K.offset;K.offset=Zc;xc=K.size;K.size=Ja;uc=K.state;K.state=Pb;Va=K.stride;K.stride=gb;Mb=K.type;K.type=jb;Xc=K.w;K.w=za;Fa=K.x;K.x=fc;yc=K.y;K.y=Da;Pa=K.z;K.z=rb;ra.buffer=a.positionBuffer;
Ba=!1;mb=null;vb=0;Cb=!1;vc=tb=0;wb=1;Hb=0;sc=5126;sd=ld=Mc=ud=0;Ob(ra)?(Ba=!0,mb=oa.createStream(34962,ra),sc=mb.dtype):(mb=oa.getBuffer(ra))?sc=mb.dtype:"constant"in ra?(wb=2,"number"===typeof ra.constant?(Mc=ra.constant,ld=sd=ud=0):(Mc=0<ra.constant.length?ra.constant[0]:0,ld=1<ra.constant.length?ra.constant[1]:0,sd=2<ra.constant.length?ra.constant[2]:0,ud=3<ra.constant.length?ra.constant[3]:0)):(mb=Ob(ra.buffer)?oa.createStream(34962,ra.buffer):oa.getBuffer(ra.buffer),sc="type"in ra?ua[ra.type]:
mb.dtype,Cb=!!ra.normalized,vc=ra.size|0,tb=ra.offset|0,Hb=ra.stride|0,vb=ra.divisor|0);Wb=E.buffer;E.buffer=mb;ac=E.divisor;E.divisor=vb;Qb=E.normalized;E.normalized=Cb;Ga=E.offset;E.offset=tb;Yb=E.size;E.size=vc;nb=E.state;E.state=wb;xb=E.stride;E.stride=Hb;Nb=E.type;E.type=sc;Rb=E.w;E.w=ud;gc=E.x;E.x=Mc;ic=E.y;E.y=ld;Ye=E.z;E.z=sd;G.buffer=a.positionFractBuffer;Bc=!1;Cc=null;Ec=0;Nc=!1;Sc=Yc=0;Oc=1;Kb=0;Fb=5126;hc=Tc=Hc=Pc=0;Ob(G)?(Bc=!0,Cc=oa.createStream(34962,G),Fb=Cc.dtype):(Cc=oa.getBuffer(G))?
Fb=Cc.dtype:"constant"in G?(Oc=2,"number"===typeof G.constant?(Hc=G.constant,Tc=hc=Pc=0):(Hc=0<G.constant.length?G.constant[0]:0,Tc=1<G.constant.length?G.constant[1]:0,hc=2<G.constant.length?G.constant[2]:0,Pc=3<G.constant.length?G.constant[3]:0)):(Cc=Ob(G.buffer)?oa.createStream(34962,G.buffer):oa.getBuffer(G.buffer),Fb="type"in G?ua[G.type]:Cc.dtype,Nc=!!G.normalized,Sc=G.size|0,Yc=G.offset|0,Kb=G.stride|0,Ec=G.divisor|0);Vc=u.buffer;u.buffer=Cc;nd=u.divisor;u.divisor=Ec;gd=u.normalized;u.normalized=
Nc;oe=u.offset;u.offset=Yc;Wc=u.size;u.size=Sc;kc=u.state;u.state=Oc;Ld=u.stride;u.stride=Kb;Id=u.type;u.type=Fb;jc=u.w;u.w=Pc;Ud=u.x;u.x=Hc;Jd=u.y;u.y=Tc;Gd=u.z;u.z=hc;m.buffer=a.colorBuffer;bd=!1;Fc=null;od=0;hd=!1;pd=ad=0;yd=1;zd=0;ye=5126;de=ee=uf=te=0;Ob(m)?(bd=!0,Fc=oa.createStream(34962,m),ye=Fc.dtype):(Fc=oa.getBuffer(m))?ye=Fc.dtype:"constant"in m?(yd=2,"number"===typeof m.constant?(uf=m.constant,ee=de=te=0):(uf=0<m.constant.length?m.constant[0]:0,ee=1<m.constant.length?m.constant[1]:0,de=
2<m.constant.length?m.constant[2]:0,te=3<m.constant.length?m.constant[3]:0)):(Fc=Ob(m.buffer)?oa.createStream(34962,m.buffer):oa.getBuffer(m.buffer),ye="type"in m?ua[m.type]:Fc.dtype,hd=!!m.normalized,pd=m.size|0,ad=m.offset|0,zd=m.stride|0,od=m.divisor|0);be=A.buffer;A.buffer=Fc;ue=A.divisor;A.divisor=od;$d=A.normalized;A.normalized=hd;he=A.offset;A.offset=ad;zc=A.size;A.size=pd;Uc=A.state;A.state=yd;pe=A.stride;A.stride=zd;ke=A.type;A.type=ye;Hd=A.w;A.w=te;Md=A.x;A.x=uf;Nd=A.y;A.y=ee;Od=A.z;A.z=
de;ie=H.buffer;H.buffer=g;Ce=H.divisor;H.divisor=0;ze=H.normalized;H.normalized=!1;me=H.offset;H.offset=0;Oe=H.size;H.size=0;Pe=H.state;H.state=1;Le=H.stride;H.stride=8;qe=H.type;H.type=5126;De=H.w;H.w=0;Ge=H.x;H.x=0;He=H.y;H.y=0;Ie=H.z;H.z=0;Ee=q.buffer;q.buffer=b;Kd=q.divisor;q.divisor=0;Rd=q.normalized;q.normalized=!1;Yd=q.offset;q.offset=4;ae=q.size;q.size=0;Je=q.state;q.state=1;Cd=q.stride;q.stride=8;Pd=q.type;q.type=5126;Ae=q.w;q.w=0;Ke=q.x;q.x=0;pf=q.y;q.y=0;Xe=q.z;q.z=0;Qe=P.vert;P.vert=20;
Me=P.frag;P.frag=19;Y.dirty=!0;c(Qa,a,e);Qa.viewportWidth=r;Qa.viewportHeight=B;w[0]=x;w[1]=C;w[2]=D;w[3]=N;fa[0]=M;fa[1]=F;fa[2]=L;fa[3]=J;$a.blend_enable=I;Na[0]=R;Na[1]=U;Ha[0]=ka;Ha[1]=T;Ha[2]=V;Ha[3]=ia;$a.depth_enable=ca;W[0]=qa;W[1]=va;W[2]=sa;W[3]=td;$a.scissor_enable=ma;$a.stencil_enable=wc;aa&&(ba.cpuTime+=performance.now()-ed);O.offset=Lc;O.count=qc;O.instances=Lb;O.primitive=Db;t[23]=Ta;t[24]=$b;t[22]=nc;t[31]=Ac;t[32]=Gc;t[33]=La;t[10]=Wa;t[34]=Ea;t[6]=Sa;t[7]=db;t[21]=Sb;t[8]=Zb;t[9]=
Ka;t[3]=Ma;pb&&oa.destroyStream(ub);da.buffer=ta;da.divisor=qb;da.normalized=xa;da.offset=Ua;da.size=bb;da.state=Aa;da.stride=fb;da.type=Ia;da.w=Ab;da.x=zb;da.y=Ra;da.z=Kc;Jb&&oa.destroyStream(Za);K.buffer=sb;K.divisor=Xa;K.normalized=Ya;K.offset=mc;K.size=xc;K.state=uc;K.stride=Va;K.type=Mb;K.w=Xc;K.x=Fa;K.y=yc;K.z=Pa;Ba&&oa.destroyStream(mb);E.buffer=Wb;E.divisor=ac;E.normalized=Qb;E.offset=Ga;E.size=Yb;E.state=nb;E.stride=xb;E.type=Nb;E.w=Rb;E.x=gc;E.y=ic;E.z=Ye;Bc&&oa.destroyStream(Cc);u.buffer=
Vc;u.divisor=nd;u.normalized=gd;u.offset=oe;u.size=Wc;u.state=kc;u.stride=Ld;u.type=Id;u.w=jc;u.x=Ud;u.y=Jd;u.z=Gd;bd&&oa.destroyStream(Fc);A.buffer=be;A.divisor=ue;A.normalized=$d;A.offset=he;A.size=zc;A.state=Uc;A.stride=pe;A.type=ke;A.w=Hd;A.x=Md;A.y=Nd;A.z=Od;H.buffer=ie;H.divisor=Ce;H.normalized=ze;H.offset=me;H.size=Oe;H.state=Pe;H.stride=Le;H.type=qe;H.w=De;H.x=Ge;H.y=He;H.z=Ie;q.buffer=Ee;q.divisor=Kd;q.normalized=Rd;q.offset=Yd;q.size=ae;q.state=Je;q.stride=Cd;q.type=Pd;q.w=Ae;q.x=Ke;q.y=
pf;q.z=Xe;P.vert=Qe;P.frag=Me;Y.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(c,ba,r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa,Y){var O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea,Na,Hb,Ha,U,ob,ea,va,bc,cc,Qc,td,wc,W,B,ka,Ca,Lb,nc,Zc,C,w,ia,ua,Q,ha,ra,G,m,Z,y,ja,pa,k;O=c.attributes;M=c.buffer;R=c.context;sa=c.current;J=c.draw;Ob=c.elements;
$a=c.extensions;P=c.framebuffer;t=c.gl;la=c.isBufferArgs;fa=c.next;Ea=c.shader;Na=c.uniforms;Hb=c.vao;Ha=fa.blend_color;U=sa.blend_color;ob=fa.blend_equation;ea=sa.blend_equation;va=fa.blend_func;bc=sa.blend_func;cc=fa.colorMask;Qc=sa.colorMask;td=fa.depth_range;wc=sa.depth_range;W=fa.polygonOffset_offset;B=sa.polygonOffset_offset;ka=fa.sample_coverage;Ca=sa.sample_coverage;Lb=fa.scissor_box;nc=sa.scissor_box;Zc=fa.stencil_func;C=sa.stencil_func;w=fa.stencil_opBack;ia=sa.stencil_opBack;ua=fa.stencil_opFront;
Q=sa.stencil_opFront;ha=fa.viewport;ra=sa.viewport;G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};m={divisor:1,offset:0,stride:4};Z={divisor:1,offset:8,stride:8};y={divisor:1,offset:4,stride:4};ja={divisor:1,offset:16,stride:8};pa={divisor:1,offset:24,stride:8};k={divisor:1,offset:0,stride:8};return{batch:function(c,d){var p,q,r,u,v,x;p=P.next;p!==P.cur&&(p?t.bindFramebuffer(36160,p.framebuffer):t.bindFramebuffer(36160,null),P.cur=p);if(sa.dirty){var A,
N,F,E,K,z,H,ha,da,ca,va,na,Lb,Ea,Na,Sd,Td,Ha,ob,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab;A=fa.dither;A!==sa.dither&&(A?t.enable(3024):t.disable(3024),sa.dither=A);N=fa.depth_func;N!==sa.depth_func&&(t.depthFunc(N),sa.depth_func=N);F=td[0];E=td[1];if(F!==wc[0]||E!==wc[1])t.depthRange(F,E),wc[0]=F,wc[1]=E;K=fa.depth_mask;K!==sa.depth_mask&&(t.depthMask(K),sa.depth_mask=K);z=cc[0];H=cc[1];ha=cc[2];da=cc[3];if(z!==Qc[0]||H!==Qc[1]||ha!==Qc[2]||da!==Qc[3])t.colorMask(z,H,ha,da),Qc[0]=z,Qc[1]=H,Qc[2]=ha,Qc[3]=
da;ca=fa.frontFace;ca!==sa.frontFace&&(t.frontFace(ca),sa.frontFace=ca);va=fa.lineWidth;va!==sa.lineWidth&&(t.lineWidth(va),sa.lineWidth=va);na=fa.polygonOffset_enable;na!==sa.polygonOffset_enable&&(na?t.enable(32823):t.disable(32823),sa.polygonOffset_enable=na);Lb=W[0];Ea=W[1];if(Lb!==B[0]||Ea!==B[1])t.polygonOffset(Lb,Ea),B[0]=Lb,B[1]=Ea;Na=fa.sample_alpha;Na!==sa.sample_alpha&&(Na?t.enable(32926):t.disable(32926),sa.sample_alpha=Na);Sd=fa.sample_enable;Sd!==sa.sample_enable&&(Sd?t.enable(32928):
t.disable(32928),sa.sample_enable=Sd);Td=ka[0];Ha=ka[1];if(Td!==Ca[0]||Ha!==Ca[1])t.sampleCoverage(Td,Ha),Ca[0]=Td,Ca[1]=Ha;ob=fa.stencil_mask;ob!==sa.stencil_mask&&(t.stencilMask(ob),sa.stencil_mask=ob);rd=Zc[0];jd=Zc[1];vd=Zc[2];if(rd!==C[0]||jd!==C[1]||vd!==C[2])t.stencilFunc(rd,jd,vd),C[0]=rd,C[1]=jd,C[2]=vd;$c=ua[0];kd=ua[1];oc=ua[2];id=ua[3];if($c!==Q[0]||kd!==Q[1]||oc!==Q[2]||id!==Q[3])t.stencilOpSeparate($c,kd,oc,id),Q[0]=$c,Q[1]=kd,Q[2]=oc,Q[3]=id;ed=w[0];Lc=w[1];qc=w[2];ab=w[3];if(ed!==
ia[0]||Lc!==ia[1]||qc!==ia[2]||ab!==ia[3])t.stencilOpSeparate(ed,Lc,qc,ab),ia[0]=ed,ia[1]=Lc,ia[2]=qc,ia[3]=ab}t.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;t.enable(3042);sa.blend_enable=!0;t.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;t.blendFuncSeparate(770,771,773,1);bc[0]=770;bc[1]=771;bc[2]=773;bc[3]=1;t.enable(2884);sa.cull_enable=!0;t.cullFace(1029);sa.cull_face=1029;t.enable(3089);sa.scissor_enable=!0;t.disable(2960);sa.stencil_enable=!1;if(q=sa.profile)r=performance.now(),
ba.count+=d;t.useProgram(I.program);u=$a.angle_instanced_arrays;var Ic,Db,pc,Ta,Jc;Hb.setVAO(null);Ic=ga.location;Db=O[Ic];Db.buffer||t.enableVertexAttribArray(Ic);if(5126!==Db.type||1!==Db.size||Db.buffer!==g||!1!==Db.normalized||0!==Db.offset||8!==Db.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(Ic,1,5126,!1,8,0),Db.type=5126,Db.size=1,Db.buffer=g,Db.normalized=!1,Db.offset=0,Db.stride=8;0!==Db.divisor&&(u.vertexAttribDivisorANGLE(Ic,0),Db.divisor=0);pc=a.location;Ta=O[pc];Ta.buffer||
t.enableVertexAttribArray(pc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==b||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)t.bindBuffer(34962,b.buffer),t.vertexAttribPointer(pc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=b,Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(u.vertexAttribDivisorANGLE(pc,0),Ta.divisor=0);(Jc=J.elements)?t.bindBuffer(34963,Jc.buffer.buffer):Hb.currentVAO&&(Jc=Ob.getElements(Hb.currentVAO.elements))&&t.bindBuffer(34963,Jc.buffer.buffer);for(v=0;v<d;++v){x=
c[v];var $b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,jc,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc;$b=x.viewport;rc=$b.x|0;Fd=$b.y|0;Bd="width"in $b?$b.width|0:R.framebufferWidth-
rc;Ac="height"in $b?$b.height|0:R.framebufferHeight-Fd;Xb=R.viewportWidth;R.viewportWidth=Bd;Gc=R.viewportHeight;R.viewportHeight=Ac;t.viewport(rc,Fd,Bd,Ac);ra[0]=rc;ra[1]=Fd;ra[2]=Bd;ra[3]=Ac;(Rc=aa.call(this,R,x,v))?t.enable(2929):t.disable(2929);sa.depth_enable=Rc;La=x.viewport;Eb=La.x|0;Wa=La.y|0;wa="width"in La?La.width|0:R.framebufferWidth-Eb;md="height"in La?La.height|0:R.framebufferHeight-Wa;t.scissor(Eb,Wa,wa,md);nc[0]=Eb;nc[1]=Wa;nc[2]=wa;nc[3]=md;Z.buffer=x.positionBuffer;hb=!1;Sa=null;
Gb=0;db=!1;Sb=ec=0;ge=1;Zb=0;Tb=5126;pb=Ma=Ub=fd=0;la(Z)?(hb=!0,Sa=M.createStream(34962,Z),Tb=Sa.dtype):(Sa=M.getBuffer(Z))?Tb=Sa.dtype:"constant"in Z?(ge=2,"number"===typeof Z.constant?(Ub=Z.constant,Ma=pb=fd=0):(Ub=0<Z.constant.length?Z.constant[0]:0,Ma=1<Z.constant.length?Z.constant[1]:0,pb=2<Z.constant.length?Z.constant[2]:0,fd=3<Z.constant.length?Z.constant[3]:0)):(Sa=la(Z.buffer)?M.createStream(34962,Z.buffer):M.getBuffer(Z.buffer),Tb="type"in Z?G[Z.type]:Sa.dtype,db=!!Z.normalized,Sb=Z.size|
0,ec=Z.offset|0,Zb=Z.stride|0,Gb=Z.divisor|0);ub=D.location;ib=O[ub];if(1===ge){ib.buffer||t.enableVertexAttribArray(ub);Oa=Sb||2;if(ib.type!==Tb||ib.size!==Oa||ib.buffer!==Sa||ib.normalized!==db||ib.offset!==ec||ib.stride!==Zb)t.bindBuffer(34962,Sa.buffer),t.vertexAttribPointer(ub,Oa,Tb,db,Zb,ec),ib.type=Tb,ib.size=Oa,ib.buffer=Sa,ib.normalized=db,ib.offset=ec,ib.stride=Zb;ib.divisor!==Gb&&(u.vertexAttribDivisorANGLE(ub,Gb),ib.divisor=Gb)}else if(ib.buffer&&(t.disableVertexAttribArray(ub),ib.buffer=
null),ib.x!==Ub||ib.y!==Ma||ib.z!==pb||ib.w!==fd)t.vertexAttrib4f(ub,Ub,Ma,pb,fd),ib.x=Ub,ib.y=Ma,ib.z=pb,ib.w=fd;ja.buffer=x.positionBuffer;Dc=!1;Ib=null;cd=0;eb=!1;dd=lc=0;dc=1;kb=0;lb=5126;Ua=xa=qb=ta=0;la(ja)?(Dc=!0,Ib=M.createStream(34962,ja),lb=Ib.dtype):(Ib=M.getBuffer(ja))?lb=Ib.dtype:"constant"in ja?(dc=2,"number"===typeof ja.constant?(qb=ja.constant,xa=Ua=ta=0):(qb=0<ja.constant.length?ja.constant[0]:0,xa=1<ja.constant.length?ja.constant[1]:0,Ua=2<ja.constant.length?ja.constant[2]:0,ta=
3<ja.constant.length?ja.constant[3]:0)):(Ib=la(ja.buffer)?M.createStream(34962,ja.buffer):M.getBuffer(ja.buffer),lb="type"in ja?G[ja.type]:Ib.dtype,eb=!!ja.normalized,dd=ja.size|0,lc=ja.offset|0,kb=ja.stride|0,cd=ja.divisor|0);bb=V.location;Aa=O[bb];if(1===dc){Aa.buffer||t.enableVertexAttribArray(bb);fb=dd||2;if(Aa.type!==lb||Aa.size!==fb||Aa.buffer!==Ib||Aa.normalized!==eb||Aa.offset!==lc||Aa.stride!==kb)t.bindBuffer(34962,Ib.buffer),t.vertexAttribPointer(bb,fb,lb,eb,kb,lc),Aa.type=lb,Aa.size=fb,
Aa.buffer=Ib,Aa.normalized=eb,Aa.offset=lc,Aa.stride=kb;Aa.divisor!==cd&&(u.vertexAttribDivisorANGLE(bb,cd),Aa.divisor=cd)}else if(Aa.buffer&&(t.disableVertexAttribArray(bb),Aa.buffer=null),Aa.x!==qb||Aa.y!==xa||Aa.z!==Ua||Aa.w!==ta)t.vertexAttrib4f(bb,qb,xa,Ua,ta),Aa.x=qb,Aa.y=xa,Aa.z=Ua,Aa.w=ta;pa.buffer=x.positionBuffer;Ia=!1;Ab=null;zb=0;Ra=!1;Jb=Kc=0;Za=1;Vb=0;ya=5126;gb=Pb=Ja=ce=0;la(pa)?(Ia=!0,Ab=M.createStream(34962,pa),ya=Ab.dtype):(Ab=M.getBuffer(pa))?ya=Ab.dtype:"constant"in pa?(Za=2,"number"===
typeof pa.constant?(Ja=pa.constant,Pb=gb=ce=0):(Ja=0<pa.constant.length?pa.constant[0]:0,Pb=1<pa.constant.length?pa.constant[1]:0,gb=2<pa.constant.length?pa.constant[2]:0,ce=3<pa.constant.length?pa.constant[3]:0)):(Ab=la(pa.buffer)?M.createStream(34962,pa.buffer):M.getBuffer(pa.buffer),ya="type"in pa?G[pa.type]:Ab.dtype,Ra=!!pa.normalized,Jb=pa.size|0,Kc=pa.offset|0,Vb=pa.stride|0,zb=pa.divisor|0);jb=ma.location;za=O[jb];if(1===Za){za.buffer||t.enableVertexAttribArray(jb);fc=Jb||2;if(za.type!==ya||
za.size!==fc||za.buffer!==Ab||za.normalized!==Ra||za.offset!==Kc||za.stride!==Vb)t.bindBuffer(34962,Ab.buffer),t.vertexAttribPointer(jb,fc,ya,Ra,Vb,Kc),za.type=ya,za.size=fc,za.buffer=Ab,za.normalized=Ra,za.offset=Kc,za.stride=Vb;za.divisor!==zb&&(u.vertexAttribDivisorANGLE(jb,zb),za.divisor=zb)}else if(za.buffer&&(t.disableVertexAttribArray(jb),za.buffer=null),za.x!==Ja||za.y!==Pb||za.z!==gb||za.w!==ce)t.vertexAttrib4f(jb,Ja,Pb,gb,ce),za.x=Ja,za.y=Pb,za.z=gb,za.w=ce;k.buffer=x.positionBuffer;Da=
!1;rb=null;sb=0;Xa=!1;mc=Ya=0;xc=1;uc=0;Va=5126;yc=Fa=Xc=Mb=0;la(k)?(Da=!0,rb=M.createStream(34962,k),Va=rb.dtype):(rb=M.getBuffer(k))?Va=rb.dtype:"constant"in k?(xc=2,"number"===typeof k.constant?(Xc=k.constant,Fa=yc=Mb=0):(Xc=0<k.constant.length?k.constant[0]:0,Fa=1<k.constant.length?k.constant[1]:0,yc=2<k.constant.length?k.constant[2]:0,Mb=3<k.constant.length?k.constant[3]:0)):(rb=la(k.buffer)?M.createStream(34962,k.buffer):M.getBuffer(k.buffer),Va="type"in k?G[k.type]:rb.dtype,Xa=!!k.normalized,
mc=k.size|0,Ya=k.offset|0,uc=k.stride|0,sb=k.divisor|0);Pa=cb.location;Ba=O[Pa];if(1===xc){Ba.buffer||t.enableVertexAttribArray(Pa);mb=mc||2;if(Ba.type!==Va||Ba.size!==mb||Ba.buffer!==rb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==uc)t.bindBuffer(34962,rb.buffer),t.vertexAttribPointer(Pa,mb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=mb,Ba.buffer=rb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==sb&&(u.vertexAttribDivisorANGLE(Pa,sb),Ba.divisor=sb)}else if(Ba.buffer&&(t.disableVertexAttribArray(Pa),
Ba.buffer=null),Ba.x!==Xc||Ba.y!==Fa||Ba.z!==yc||Ba.w!==Mb)t.vertexAttrib4f(Pa,Xc,Fa,yc,Mb),Ba.x=Xc,Ba.y=Fa,Ba.z=yc,Ba.w=Mb;m.buffer=x.colorBuffer;vb=!1;Cb=null;tb=0;vc=!1;wd=wb=0;sc=1;ud=0;Mc=5126;ac=Wb=sd=ld=0;la(m)?(vb=!0,Cb=M.createStream(34962,m),Mc=Cb.dtype):(Cb=M.getBuffer(m))?Mc=Cb.dtype:"constant"in m?(sc=2,"number"===typeof m.constant?(sd=m.constant,Wb=ac=ld=0):(sd=0<m.constant.length?m.constant[0]:0,Wb=1<m.constant.length?m.constant[1]:0,ac=2<m.constant.length?m.constant[2]:0,ld=3<m.constant.length?
m.constant[3]:0)):(Cb=la(m.buffer)?M.createStream(34962,m.buffer):M.getBuffer(m.buffer),Mc="type"in m?G[m.type]:Cb.dtype,vc=!!m.normalized,wd=m.size|0,wb=m.offset|0,ud=m.stride|0,tb=m.divisor|0);Qb=e.location;Ga=O[Qb];if(1===sc){Ga.buffer||t.enableVertexAttribArray(Qb);Yb=wd||4;if(Ga.type!==Mc||Ga.size!==Yb||Ga.buffer!==Cb||Ga.normalized!==vc||Ga.offset!==wb||Ga.stride!==ud)t.bindBuffer(34962,Cb.buffer),t.vertexAttribPointer(Qb,Yb,Mc,vc,ud,wb),Ga.type=Mc,Ga.size=Yb,Ga.buffer=Cb,Ga.normalized=vc,Ga.offset=
wb,Ga.stride=ud;Ga.divisor!==tb&&(u.vertexAttribDivisorANGLE(Qb,tb),Ga.divisor=tb)}else if(Ga.buffer&&(t.disableVertexAttribArray(Qb),Ga.buffer=null),Ga.x!==sd||Ga.y!==Wb||Ga.z!==ac||Ga.w!==ld)t.vertexAttrib4f(Qb,sd,Wb,ac,ld),Ga.x=sd,Ga.y=Wb,Ga.z=ac,Ga.w=ld;y.buffer=x.colorBuffer;nb=!1;xb=null;Nb=0;Rb=!1;ic=gc=0;Ye=1;Bc=0;Cc=5126;Sc=Yc=Nc=Ec=0;la(y)?(nb=!0,xb=M.createStream(34962,y),Cc=xb.dtype):(xb=M.getBuffer(y))?Cc=xb.dtype:"constant"in y?(Ye=2,"number"===typeof y.constant?(Nc=y.constant,Yc=Sc=
Ec=0):(Nc=0<y.constant.length?y.constant[0]:0,Yc=1<y.constant.length?y.constant[1]:0,Sc=2<y.constant.length?y.constant[2]:0,Ec=3<y.constant.length?y.constant[3]:0)):(xb=la(y.buffer)?M.createStream(34962,y.buffer):M.getBuffer(y.buffer),Cc="type"in y?G[y.type]:xb.dtype,Rb=!!y.normalized,ic=y.size|0,gc=y.offset|0,Bc=y.stride|0,Nb=y.divisor|0);Oc=T.location;Kb=O[Oc];if(1===Ye){Kb.buffer||t.enableVertexAttribArray(Oc);Fb=ic||4;if(Kb.type!==Cc||Kb.size!==Fb||Kb.buffer!==xb||Kb.normalized!==Rb||Kb.offset!==
gc||Kb.stride!==Bc)t.bindBuffer(34962,xb.buffer),t.vertexAttribPointer(Oc,Fb,Cc,Rb,Bc,gc),Kb.type=Cc,Kb.size=Fb,Kb.buffer=xb,Kb.normalized=Rb,Kb.offset=gc,Kb.stride=Bc;Kb.divisor!==Nb&&(u.vertexAttribDivisorANGLE(Oc,Nb),Kb.divisor=Nb)}else if(Kb.buffer&&(t.disableVertexAttribArray(Oc),Kb.buffer=null),Kb.x!==Nc||Kb.y!==Yc||Kb.z!==Sc||Kb.w!==Ec)t.vertexAttrib4f(Oc,Nc,Yc,Sc,Ec),Kb.x=Nc,Kb.y=Yc,Kb.z=Sc,Kb.w=Ec;Pc=x.scale;Hc=Pc[0];hc=Pc[1];v&&Tc===Hc&&Vc===hc||(Tc=Hc,Vc=hc,t.uniform2f(kc.location,Hc,hc));
nd=x.translate;gd=nd[0];Wc=nd[1];v&&oe===gd&&jc===Wc||(oe=gd,jc=Wc,t.uniform2f(Qa.location,gd,Wc));Ld=x.thickness;v&&we===Ld||(we=Ld,t.uniform1f(oa.location,Ld));xe=x.depth;v&&Ud===xe||(Ud=xe,t.uniform1f(L.location,xe));Jd=h.call(this,R,x,v);Gd=Jd[0];Fc=Jd[1];hd=Jd[2];pd=Jd[3];v&&bd===Gd&&od===Fc&&ad===hd&&yd===pd||(bd=Gd,od=Fc,ad=hd,yd=pd,t.uniform4f(Y.location,Gd,Fc,hd,pd));zd=x.miterLimit;v&&ye===zd||(ye=zd,t.uniform1f(l.location,zd));te=f.call(this,R,x,v);v&&uf===te||(uf=te,t.uniform1f(X.location,
te));ee=x.dashLength;v&&de===ee||(de=ee,t.uniform1f(n.location,ee));be=x.opacity;v&&ue===be||(ue=be,t.uniform1f(Ka.location,be));($d=x.dashTexture)&&"framebuffer"===$d._reglType&&($d=$d.color[0]);he=$d._texture;t.uniform1i(qa.location,he.bind());zc=x.count;0<zc?Jc?u.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),zc):u.drawArraysInstancedANGLE(5,0,4,zc):0>zc&&(Jc?t.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):t.drawArrays(5,0,4));R.viewportWidth=Xb;R.viewportHeight=Gc;hb&&M.destroyStream(Sa);
Dc&&M.destroyStream(Ib);Ia&&M.destroyStream(Ab);Da&&M.destroyStream(rb);vb&&M.destroyStream(Cb);nb&&M.destroyStream(xb);he.unbind()}sa.dirty=!0;Hb.setVAO(null);q&&(ba.cpuTime+=performance.now()-r)},draw:function(c){var f,h,q,u,v,A,F,E,K,z,H,I,ha,da,ca,va,na,Lb,aa,Ea,Na,Ha,Sd,Td,ob,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,
Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd;f=P.next;f!==P.cur&&(f?t.bindFramebuffer(36160,f.framebuffer):t.bindFramebuffer(36160,null),P.cur=f);if(sa.dirty){var sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc;sc=fa.dither;sc!==sa.dither&&(sc?t.enable(3024):t.disable(3024),sa.dither=sc);ud=fa.depth_func;ud!==sa.depth_func&&(t.depthFunc(ud),sa.depth_func=ud);Mc=td[0];ld=td[1];if(Mc!==wc[0]||ld!==wc[1])t.depthRange(Mc,ld),
wc[0]=Mc,wc[1]=ld;sd=fa.depth_mask;sd!==sa.depth_mask&&(t.depthMask(sd),sa.depth_mask=sd);Wb=cc[0];ac=cc[1];Qb=cc[2];Ga=cc[3];if(Wb!==Qc[0]||ac!==Qc[1]||Qb!==Qc[2]||Ga!==Qc[3])t.colorMask(Wb,ac,Qb,Ga),Qc[0]=Wb,Qc[1]=ac,Qc[2]=Qb,Qc[3]=Ga;Yb=fa.frontFace;Yb!==sa.frontFace&&(t.frontFace(Yb),sa.frontFace=Yb);nb=fa.lineWidth;nb!==sa.lineWidth&&(t.lineWidth(nb),sa.lineWidth=nb);xb=fa.polygonOffset_enable;xb!==sa.polygonOffset_enable&&(xb?t.enable(32823):t.disable(32823),sa.polygonOffset_enable=xb);Nb=W[0];
Rb=W[1];if(Nb!==B[0]||Rb!==B[1])t.polygonOffset(Nb,Rb),B[0]=Nb,B[1]=Rb;gc=fa.sample_alpha;gc!==sa.sample_alpha&&(gc?t.enable(32926):t.disable(32926),sa.sample_alpha=gc);ic=fa.sample_enable;ic!==sa.sample_enable&&(ic?t.enable(32928):t.disable(32928),sa.sample_enable=ic);Ye=ka[0];Bc=ka[1];if(Ye!==Ca[0]||Bc!==Ca[1])t.sampleCoverage(Ye,Bc),Ca[0]=Ye,Ca[1]=Bc;Cc=fa.stencil_mask;Cc!==sa.stencil_mask&&(t.stencilMask(Cc),sa.stencil_mask=Cc);Ec=Zc[0];Nc=Zc[1];Yc=Zc[2];if(Ec!==C[0]||Nc!==C[1]||Yc!==C[2])t.stencilFunc(Ec,
Nc,Yc),C[0]=Ec,C[1]=Nc,C[2]=Yc;Sc=ua[0];Oc=ua[1];Kb=ua[2];Fb=ua[3];if(Sc!==Q[0]||Oc!==Q[1]||Kb!==Q[2]||Fb!==Q[3])t.stencilOpSeparate(Sc,Oc,Kb,Fb),Q[0]=Sc,Q[1]=Oc,Q[2]=Kb,Q[3]=Fb;Pc=w[0];Hc=w[1];Tc=w[2];hc=w[3];if(Pc!==ia[0]||Hc!==ia[1]||Tc!==ia[2]||hc!==ia[3])t.stencilOpSeparate(Pc,Hc,Tc,hc),ia[0]=Pc,ia[1]=Hc,ia[2]=Tc,ia[3]=hc}h=c.viewport;q=h.x|0;u=h.y|0;v="width"in h?h.width|0:R.framebufferWidth-q;A="height"in h?h.height|0:R.framebufferHeight-u;F=R.viewportWidth;R.viewportWidth=v;E=R.viewportHeight;
R.viewportHeight=A;t.viewport(q,u,v,A);ra[0]=q;ra[1]=u;ra[2]=v;ra[3]=A;t.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;t.enable(3042);sa.blend_enable=!0;t.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;t.blendFuncSeparate(770,771,773,1);bc[0]=770;bc[1]=771;bc[2]=773;bc[3]=1;t.enable(2884);sa.cull_enable=!0;t.cullFace(1029);sa.cull_face=1029;(K=r.call(this,R,c,0))?t.enable(2929):t.disable(2929);sa.depth_enable=K;z=c.viewport;H=z.x|0;I=z.y|0;ha="width"in z?z.width|0:R.framebufferWidth-
H;da="height"in z?z.height|0:R.framebufferHeight-I;t.scissor(H,I,ha,da);nc[0]=H;nc[1]=I;nc[2]=ha;nc[3]=da;t.enable(3089);sa.scissor_enable=!0;t.disable(2960);sa.stencil_enable=!1;if(ca=sa.profile)va=performance.now(),ba.count++;t.useProgram(N.program);na=$a.angle_instanced_arrays;Hb.setVAO(null);Z.buffer=c.positionBuffer;Lb=!1;aa=null;Ea=0;Na=!1;Sd=Ha=0;Td=1;ob=0;Xd=5126;$c=vd=jd=rd=0;la(Z)?(Lb=!0,aa=M.createStream(34962,Z),Xd=aa.dtype):(aa=M.getBuffer(Z))?Xd=aa.dtype:"constant"in Z?(Td=2,"number"===
typeof Z.constant?(jd=Z.constant,vd=$c=rd=0):(jd=0<Z.constant.length?Z.constant[0]:0,vd=1<Z.constant.length?Z.constant[1]:0,$c=2<Z.constant.length?Z.constant[2]:0,rd=3<Z.constant.length?Z.constant[3]:0)):(aa=la(Z.buffer)?M.createStream(34962,Z.buffer):M.getBuffer(Z.buffer),Xd="type"in Z?G[Z.type]:aa.dtype,Na=!!Z.normalized,Sd=Z.size|0,Ha=Z.offset|0,ob=Z.stride|0,Ea=Z.divisor|0);kd=D.location;oc=O[kd];if(1===Td){oc.buffer||t.enableVertexAttribArray(kd);id=Sd||2;if(oc.type!==Xd||oc.size!==id||oc.buffer!==
aa||oc.normalized!==Na||oc.offset!==Ha||oc.stride!==ob)t.bindBuffer(34962,aa.buffer),t.vertexAttribPointer(kd,id,Xd,Na,ob,Ha),oc.type=Xd,oc.size=id,oc.buffer=aa,oc.normalized=Na,oc.offset=Ha,oc.stride=ob;oc.divisor!==Ea&&(na.vertexAttribDivisorANGLE(kd,Ea),oc.divisor=Ea)}else if(oc.buffer&&(t.disableVertexAttribArray(kd),oc.buffer=null),oc.x!==jd||oc.y!==vd||oc.z!==$c||oc.w!==rd)t.vertexAttrib4f(kd,jd,vd,$c,rd),oc.x=jd,oc.y=vd,oc.z=$c,oc.w=rd;ja.buffer=c.positionBuffer;ed=!1;Lc=null;qc=0;ab=!1;Db=
Ic=0;pc=1;Ta=0;Jc=5126;Bd=Fd=rc=$b=0;la(ja)?(ed=!0,Lc=M.createStream(34962,ja),Jc=Lc.dtype):(Lc=M.getBuffer(ja))?Jc=Lc.dtype:"constant"in ja?(pc=2,"number"===typeof ja.constant?(rc=ja.constant,Fd=Bd=$b=0):(rc=0<ja.constant.length?ja.constant[0]:0,Fd=1<ja.constant.length?ja.constant[1]:0,Bd=2<ja.constant.length?ja.constant[2]:0,$b=3<ja.constant.length?ja.constant[3]:0)):(Lc=la(ja.buffer)?M.createStream(34962,ja.buffer):M.getBuffer(ja.buffer),Jc="type"in ja?G[ja.type]:Lc.dtype,ab=!!ja.normalized,Db=
ja.size|0,Ic=ja.offset|0,Ta=ja.stride|0,qc=ja.divisor|0);Ac=V.location;Xb=O[Ac];if(1===pc){Xb.buffer||t.enableVertexAttribArray(Ac);Gc=Db||2;if(Xb.type!==Jc||Xb.size!==Gc||Xb.buffer!==Lc||Xb.normalized!==ab||Xb.offset!==Ic||Xb.stride!==Ta)t.bindBuffer(34962,Lc.buffer),t.vertexAttribPointer(Ac,Gc,Jc,ab,Ta,Ic),Xb.type=Jc,Xb.size=Gc,Xb.buffer=Lc,Xb.normalized=ab,Xb.offset=Ic,Xb.stride=Ta;Xb.divisor!==qc&&(na.vertexAttribDivisorANGLE(Ac,qc),Xb.divisor=qc)}else if(Xb.buffer&&(t.disableVertexAttribArray(Ac),
Xb.buffer=null),Xb.x!==rc||Xb.y!==Fd||Xb.z!==Bd||Xb.w!==$b)t.vertexAttrib4f(Ac,rc,Fd,Bd,$b),Xb.x=rc,Xb.y=Fd,Xb.z=Bd,Xb.w=$b;pa.buffer=c.positionBuffer;Rc=!1;La=null;Eb=0;Wa=!1;md=wa=0;hb=1;Sa=0;Gb=5126;ge=Sb=ec=db=0;la(pa)?(Rc=!0,La=M.createStream(34962,pa),Gb=La.dtype):(La=M.getBuffer(pa))?Gb=La.dtype:"constant"in pa?(hb=2,"number"===typeof pa.constant?(ec=pa.constant,Sb=ge=db=0):(ec=0<pa.constant.length?pa.constant[0]:0,Sb=1<pa.constant.length?pa.constant[1]:0,ge=2<pa.constant.length?pa.constant[2]:
0,db=3<pa.constant.length?pa.constant[3]:0)):(La=la(pa.buffer)?M.createStream(34962,pa.buffer):M.getBuffer(pa.buffer),Gb="type"in pa?G[pa.type]:La.dtype,Wa=!!pa.normalized,md=pa.size|0,wa=pa.offset|0,Sa=pa.stride|0,Eb=pa.divisor|0);Zb=ma.location;Tb=O[Zb];if(1===hb){Tb.buffer||t.enableVertexAttribArray(Zb);fd=md||2;if(Tb.type!==Gb||Tb.size!==fd||Tb.buffer!==La||Tb.normalized!==Wa||Tb.offset!==wa||Tb.stride!==Sa)t.bindBuffer(34962,La.buffer),t.vertexAttribPointer(Zb,fd,Gb,Wa,Sa,wa),Tb.type=Gb,Tb.size=
fd,Tb.buffer=La,Tb.normalized=Wa,Tb.offset=wa,Tb.stride=Sa;Tb.divisor!==Eb&&(na.vertexAttribDivisorANGLE(Zb,Eb),Tb.divisor=Eb)}else if(Tb.buffer&&(t.disableVertexAttribArray(Zb),Tb.buffer=null),Tb.x!==ec||Tb.y!==Sb||Tb.z!==ge||Tb.w!==db)t.vertexAttrib4f(Zb,ec,Sb,ge,db),Tb.x=ec,Tb.y=Sb,Tb.z=ge,Tb.w=db;k.buffer=c.positionBuffer;Ub=!1;Ma=null;pb=0;ub=!1;Oa=ib=0;Dc=1;Ib=0;cd=5126;dc=dd=lc=eb=0;la(k)?(Ub=!0,Ma=M.createStream(34962,k),cd=Ma.dtype):(Ma=M.getBuffer(k))?cd=Ma.dtype:"constant"in k?(Dc=2,"number"===
typeof k.constant?(lc=k.constant,dd=dc=eb=0):(lc=0<k.constant.length?k.constant[0]:0,dd=1<k.constant.length?k.constant[1]:0,dc=2<k.constant.length?k.constant[2]:0,eb=3<k.constant.length?k.constant[3]:0)):(Ma=la(k.buffer)?M.createStream(34962,k.buffer):M.getBuffer(k.buffer),cd="type"in k?G[k.type]:Ma.dtype,ub=!!k.normalized,Oa=k.size|0,ib=k.offset|0,Ib=k.stride|0,pb=k.divisor|0);kb=cb.location;lb=O[kb];if(1===Dc){lb.buffer||t.enableVertexAttribArray(kb);ta=Oa||2;if(lb.type!==cd||lb.size!==ta||lb.buffer!==
Ma||lb.normalized!==ub||lb.offset!==ib||lb.stride!==Ib)t.bindBuffer(34962,Ma.buffer),t.vertexAttribPointer(kb,ta,cd,ub,Ib,ib),lb.type=cd,lb.size=ta,lb.buffer=Ma,lb.normalized=ub,lb.offset=ib,lb.stride=Ib;lb.divisor!==pb&&(na.vertexAttribDivisorANGLE(kb,pb),lb.divisor=pb)}else if(lb.buffer&&(t.disableVertexAttribArray(kb),lb.buffer=null),lb.x!==lc||lb.y!==dd||lb.z!==dc||lb.w!==eb)t.vertexAttrib4f(kb,lc,dd,dc,eb),lb.x=lc,lb.y=dd,lb.z=dc,lb.w=eb;m.buffer=c.colorBuffer;qb=!1;xa=null;Ua=0;bb=!1;fb=Aa=
0;Ia=1;Ab=0;zb=5126;Za=Jb=Kc=Ra=0;la(m)?(qb=!0,xa=M.createStream(34962,m),zb=xa.dtype):(xa=M.getBuffer(m))?zb=xa.dtype:"constant"in m?(Ia=2,"number"===typeof m.constant?(Kc=m.constant,Jb=Za=Ra=0):(Kc=0<m.constant.length?m.constant[0]:0,Jb=1<m.constant.length?m.constant[1]:0,Za=2<m.constant.length?m.constant[2]:0,Ra=3<m.constant.length?m.constant[3]:0)):(xa=la(m.buffer)?M.createStream(34962,m.buffer):M.getBuffer(m.buffer),zb="type"in m?G[m.type]:xa.dtype,bb=!!m.normalized,fb=m.size|0,Aa=m.offset|0,
Ab=m.stride|0,Ua=m.divisor|0);Vb=e.location;ya=O[Vb];if(1===Ia){ya.buffer||t.enableVertexAttribArray(Vb);ce=fb||4;if(ya.type!==zb||ya.size!==ce||ya.buffer!==xa||ya.normalized!==bb||ya.offset!==Aa||ya.stride!==Ab)t.bindBuffer(34962,xa.buffer),t.vertexAttribPointer(Vb,ce,zb,bb,Ab,Aa),ya.type=zb,ya.size=ce,ya.buffer=xa,ya.normalized=bb,ya.offset=Aa,ya.stride=Ab;ya.divisor!==Ua&&(na.vertexAttribDivisorANGLE(Vb,Ua),ya.divisor=Ua)}else if(ya.buffer&&(t.disableVertexAttribArray(Vb),ya.buffer=null),ya.x!==
Kc||ya.y!==Jb||ya.z!==Za||ya.w!==Ra)t.vertexAttrib4f(Vb,Kc,Jb,Za,Ra),ya.x=Kc,ya.y=Jb,ya.z=Za,ya.w=Ra;y.buffer=c.colorBuffer;Ja=!1;Pb=null;gb=0;jb=!1;fc=za=0;Da=1;rb=0;sb=5126;xc=mc=Ya=Xa=0;la(y)?(Ja=!0,Pb=M.createStream(34962,y),sb=Pb.dtype):(Pb=M.getBuffer(y))?sb=Pb.dtype:"constant"in y?(Da=2,"number"===typeof y.constant?(Ya=y.constant,mc=xc=Xa=0):(Ya=0<y.constant.length?y.constant[0]:0,mc=1<y.constant.length?y.constant[1]:0,xc=2<y.constant.length?y.constant[2]:0,Xa=3<y.constant.length?y.constant[3]:
0)):(Pb=la(y.buffer)?M.createStream(34962,y.buffer):M.getBuffer(y.buffer),sb="type"in y?G[y.type]:Pb.dtype,jb=!!y.normalized,fc=y.size|0,za=y.offset|0,rb=y.stride|0,gb=y.divisor|0);uc=T.location;Va=O[uc];if(1===Da){Va.buffer||t.enableVertexAttribArray(uc);Mb=fc||4;if(Va.type!==sb||Va.size!==Mb||Va.buffer!==Pb||Va.normalized!==jb||Va.offset!==za||Va.stride!==rb)t.bindBuffer(34962,Pb.buffer),t.vertexAttribPointer(uc,Mb,sb,jb,rb,za),Va.type=sb,Va.size=Mb,Va.buffer=Pb,Va.normalized=jb,Va.offset=za,Va.stride=
rb;Va.divisor!==gb&&(na.vertexAttribDivisorANGLE(uc,gb),Va.divisor=gb)}else if(Va.buffer&&(t.disableVertexAttribArray(uc),Va.buffer=null),Va.x!==Ya||Va.y!==mc||Va.z!==xc||Va.w!==Xa)t.vertexAttrib4f(uc,Ya,mc,xc,Xa),Va.x=Ya,Va.y=mc,Va.z=xc,Va.w=Xa;Xc=ga.location;Fa=O[Xc];Fa.buffer||t.enableVertexAttribArray(Xc);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==g||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(Xc,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=
g,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(na.vertexAttribDivisorANGLE(Xc,0),Fa.divisor=0);yc=a.location;Pa=O[yc];Pa.buffer||t.enableVertexAttribArray(yc);if(5126!==Pa.type||1!==Pa.size||Pa.buffer!==b||!1!==Pa.normalized||4!==Pa.offset||8!==Pa.stride)t.bindBuffer(34962,b.buffer),t.vertexAttribPointer(yc,1,5126,!1,8,4),Pa.type=5126,Pa.size=1,Pa.buffer=b,Pa.normalized=!1,Pa.offset=4,Pa.stride=8;0!==Pa.divisor&&(na.vertexAttribDivisorANGLE(yc,0),Pa.divisor=0);Ba=c.scale;t.uniform2f(kc.location,
Ba[0],Ba[1]);mb=c.translate;t.uniform2f(Qa.location,mb[0],mb[1]);t.uniform1f(oa.location,c.thickness);t.uniform1f(L.location,c.depth);vb=x.call(this,R,c,0);t.uniform4f(Y.location,vb[0],vb[1],vb[2],vb[3]);t.uniform1f(l.location,c.miterLimit);Cb=d.call(this,R,c,0);t.uniform1f(X.location,Cb);t.uniform1f(n.location,c.dashLength);t.uniform1f(Ka.location,c.opacity);(tb=c.dashTexture)&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);vc=tb._texture;t.uniform1i(qa.location,vc.bind());(wb=J.elements)?t.bindBuffer(34963,
wb.buffer.buffer):Hb.currentVAO&&(wb=Ob.getElements(Hb.currentVAO.elements))&&t.bindBuffer(34963,wb.buffer.buffer);wd=c.count;0<wd?wb?na.drawElementsInstancedANGLE(5,4,wb.type,0<<(wb.type-5121>>1),wd):na.drawArraysInstancedANGLE(5,0,4,wd):0>wd&&(wb?t.drawElements(5,4,wb.type,0<<(wb.type-5121>>1)):t.drawArrays(5,0,4));sa.dirty=!0;Hb.setVAO(null);R.viewportWidth=F;R.viewportHeight=E;ca&&(ba.cpuTime+=performance.now()-va);Lb&&M.destroyStream(aa);ed&&M.destroyStream(Lc);Rc&&M.destroyStream(La);Ub&&M.destroyStream(Ma);
qb&&M.destroyStream(xa);Ja&&M.destroyStream(Pb);vc.unbind()},scope:function(a,c,d){var e,f,h,l,n,r,t,w,B,x,C,W,D,N,L,O,I,P,U,Q,ka,T,Y,V,ia,X,ea,ua,cc,ra,Ca,ga,qa,aa,ab,td,Db,ma,Ta,oa,$b,wc,nc,bc,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,Qc,hb,Sa,Gb,db,ec,Sb,Ka,Zb,Tb,$a,Ub,Ma,pb,ub,ib,Oa,Qa,Ib,cb,eb,lc,Ob,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Zc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,Hb,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,kc,Bc,Cc,Ec,Nc,Yc,Sc,
Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Id,Ld,jc,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:R.framebufferWidth-f;n="height"in e?e.height|0:R.framebufferHeight-h;r=R.viewportWidth;R.viewportWidth=l;t=R.viewportHeight;R.viewportHeight=n;
w=ha[0];ha[0]=f;B=ha[1];ha[1]=h;x=ha[2];ha[2]=l;C=ha[3];ha[3]=n;W=Ha[0];Ha[0]=0;D=Ha[1];Ha[1]=0;N=Ha[2];Ha[2]=0;L=Ha[3];Ha[3]=0;O=fa.blend_enable;fa.blend_enable=!0;I=ob[0];ob[0]=32774;P=ob[1];ob[1]=32774;U=va[0];va[0]=770;Q=va[1];va[1]=771;ka=va[2];va[2]=773;T=va[3];va[3]=1;Y=fa.cull_enable;fa.cull_enable=!0;V=fa.cull_face;fa.cull_face=1029;ia=v.call(this,R,a,d);X=fa.depth_enable;fa.depth_enable=ia;ea=a.viewport;ua=ea.x|0;cc=ea.y|0;ra="width"in ea?ea.width|0:R.framebufferWidth-ua;Ca="height"in ea?
ea.height|0:R.framebufferHeight-cc;ga=Lb[0];Lb[0]=ua;qa=Lb[1];Lb[1]=cc;aa=Lb[2];Lb[2]=ra;ab=Lb[3];Lb[3]=Ca;td=fa.scissor_enable;fa.scissor_enable=!0;Db=fa.stencil_enable;fa.stencil_enable=!1;if(ma=sa.profile)Ta=performance.now(),ba.count++;oa=J.offset;J.offset=0;$b=J.count;J.count=4;wc=a.count;nc=J.instances;J.instances=wc;bc=J.primitive;J.primitive=5;Ac=a.dashLength;Xb=Na[23];Na[23]=Ac;Gc=a.dashTexture;Rc=Na[24];Na[24]=Gc;La=a.depth;Eb=Na[22];Na[22]=La;Wa=a.id;wa=Na[31];Na[31]=Wa;Qc=a.miterLimit;
hb=Na[32];Na[32]=Qc;Sa=z.call(this,R,a,d);Gb=Na[33];Na[33]=Sa;db=a.opacity;ec=Na[10];Na[10]=db;Sb=R.pixelRatio;Ka=Na[34];Na[34]=Sb;Zb=a.scale;Tb=Na[6];Na[6]=Zb;$a=a.scaleFract;Ub=Na[7];Na[7]=$a;Ma=a.thickness;pb=Na[21];Na[21]=Ma;ub=a.translate;ib=Na[8];Na[8]=ub;Oa=a.translateFract;Qa=Na[9];Na[9]=Oa;Ib=da.call(this,R,a,d);cb=Na[3];Na[3]=Ib;m.buffer=a.colorBuffer;eb=!1;lc=null;Ob=0;dc=!1;lb=kb=0;ta=1;qb=0;xa=5126;fb=Aa=bb=Ua=0;la(m)?(eb=!0,lc=M.createStream(34962,m),xa=lc.dtype):(lc=M.getBuffer(m))?
xa=lc.dtype:"constant"in m?(ta=2,"number"===typeof m.constant?(bb=m.constant,Aa=fb=Ua=0):(bb=0<m.constant.length?m.constant[0]:0,Aa=1<m.constant.length?m.constant[1]:0,fb=2<m.constant.length?m.constant[2]:0,Ua=3<m.constant.length?m.constant[3]:0)):(lc=la(m.buffer)?M.createStream(34962,m.buffer):M.getBuffer(m.buffer),xa="type"in m?G[m.type]:lc.dtype,dc=!!m.normalized,lb=m.size|0,kb=m.offset|0,qb=m.stride|0,Ob=m.divisor|0);Ia=K.buffer;K.buffer=lc;Ab=K.divisor;K.divisor=Ob;zb=K.normalized;K.normalized=
dc;Ra=K.offset;K.offset=kb;Kc=K.size;K.size=lb;Jb=K.state;K.state=ta;Za=K.stride;K.stride=qb;Vb=K.type;K.type=xa;ya=K.w;K.w=Ua;Zc=K.x;K.x=bb;Ja=K.y;K.y=Aa;Pb=K.z;K.z=fb;Z.buffer=a.positionBuffer;gb=!1;jb=null;za=0;fc=!1;rb=Da=0;sb=1;Xa=0;Ya=5126;Va=uc=xc=mc=0;la(Z)?(gb=!0,jb=M.createStream(34962,Z),Ya=jb.dtype):(jb=M.getBuffer(Z))?Ya=jb.dtype:"constant"in Z?(sb=2,"number"===typeof Z.constant?(xc=Z.constant,uc=Va=mc=0):(xc=0<Z.constant.length?Z.constant[0]:0,uc=1<Z.constant.length?Z.constant[1]:0,
Va=2<Z.constant.length?Z.constant[2]:0,mc=3<Z.constant.length?Z.constant[3]:0)):(jb=la(Z.buffer)?M.createStream(34962,Z.buffer):M.getBuffer(Z.buffer),Ya="type"in Z?G[Z.type]:jb.dtype,fc=!!Z.normalized,rb=Z.size|0,Da=Z.offset|0,Xa=Z.stride|0,za=Z.divisor|0);Mb=E.buffer;E.buffer=jb;Xc=E.divisor;E.divisor=za;Fa=E.normalized;E.normalized=fc;yc=E.offset;E.offset=Da;Pa=E.size;E.size=rb;Ba=E.state;E.state=sb;mb=E.stride;E.stride=Xa;vb=E.type;E.type=Ya;Cb=E.w;E.w=mc;tb=E.x;E.x=xc;vc=E.y;E.y=uc;wb=E.z;E.z=
Va;y.buffer=a.colorBuffer;Hb=!1;sc=null;ud=0;Mc=!1;sd=ld=0;Wb=1;ac=0;Qb=5126;xb=nb=Yb=Ga=0;la(y)?(Hb=!0,sc=M.createStream(34962,y),Qb=sc.dtype):(sc=M.getBuffer(y))?Qb=sc.dtype:"constant"in y?(Wb=2,"number"===typeof y.constant?(Yb=y.constant,nb=xb=Ga=0):(Yb=0<y.constant.length?y.constant[0]:0,nb=1<y.constant.length?y.constant[1]:0,xb=2<y.constant.length?y.constant[2]:0,Ga=3<y.constant.length?y.constant[3]:0)):(sc=la(y.buffer)?M.createStream(34962,y.buffer):M.getBuffer(y.buffer),Qb="type"in y?G[y.type]:
sc.dtype,Mc=!!y.normalized,sd=y.size|0,ld=y.offset|0,ac=y.stride|0,ud=y.divisor|0);Nb=u.buffer;u.buffer=sc;Rb=u.divisor;u.divisor=ud;gc=u.normalized;u.normalized=Mc;ic=u.offset;u.offset=ld;kc=u.size;u.size=sd;Bc=u.state;u.state=Wb;Cc=u.stride;u.stride=ac;Ec=u.type;u.type=Qb;Nc=u.w;u.w=Ga;Yc=u.x;u.x=Yb;Sc=u.y;u.y=nb;Oc=u.z;u.z=xb;ja.buffer=a.positionBuffer;Kb=!1;Fb=null;Pc=0;Hc=!1;hc=Tc=0;Vc=1;nd=0;gd=5126;Ld=Id=Wc=oe=0;la(ja)?(Kb=!0,Fb=M.createStream(34962,ja),gd=Fb.dtype):(Fb=M.getBuffer(ja))?gd=
Fb.dtype:"constant"in ja?(Vc=2,"number"===typeof ja.constant?(Wc=ja.constant,Id=Ld=oe=0):(Wc=0<ja.constant.length?ja.constant[0]:0,Id=1<ja.constant.length?ja.constant[1]:0,Ld=2<ja.constant.length?ja.constant[2]:0,oe=3<ja.constant.length?ja.constant[3]:0)):(Fb=la(ja.buffer)?M.createStream(34962,ja.buffer):M.getBuffer(ja.buffer),gd="type"in ja?G[ja.type]:Fb.dtype,Hc=!!ja.normalized,hc=ja.size|0,Tc=ja.offset|0,nd=ja.stride|0,Pc=ja.divisor|0);jc=A.buffer;A.buffer=Fb;xe=A.divisor;A.divisor=Pc;Ud=A.normalized;
A.normalized=Hc;Jd=A.offset;A.offset=Tc;Gd=A.size;A.size=hc;bd=A.state;A.state=Vc;Fc=A.stride;A.stride=nd;od=A.type;A.type=gd;hd=A.w;A.w=oe;ad=A.x;A.x=Wc;pd=A.y;A.y=Id;yd=A.z;A.z=Ld;zd=H.buffer;H.buffer=g;ye=H.divisor;H.divisor=0;te=H.normalized;H.normalized=!1;uf=H.offset;H.offset=0;ee=H.size;H.size=0;de=H.state;H.state=1;be=H.stride;H.stride=8;ue=H.type;H.type=5126;$d=H.w;H.w=0;he=H.x;H.x=0;zc=H.y;H.y=0;Uc=H.z;H.z=0;pe=q.buffer;q.buffer=b;ke=q.divisor;q.divisor=0;Hd=q.normalized;q.normalized=!1;
Md=q.offset;q.offset=4;Nd=q.size;q.size=0;Od=q.state;q.state=1;ie=q.stride;q.stride=8;Ce=q.type;q.type=5126;ze=q.w;q.w=0;me=q.x;q.x=0;Oe=q.y;q.y=0;Pe=q.z;q.z=0;pa.buffer=a.positionBuffer;Le=!1;qe=null;De=0;Ge=!1;Ie=He=0;Ee=1;Kd=0;Rd=5126;Cd=Je=ae=Yd=0;la(pa)?(Le=!0,qe=M.createStream(34962,pa),Rd=qe.dtype):(qe=M.getBuffer(pa))?Rd=qe.dtype:"constant"in pa?(Ee=2,"number"===typeof pa.constant?(ae=pa.constant,Je=Cd=Yd=0):(ae=0<pa.constant.length?pa.constant[0]:0,Je=1<pa.constant.length?pa.constant[1]:
0,Cd=2<pa.constant.length?pa.constant[2]:0,Yd=3<pa.constant.length?pa.constant[3]:0)):(qe=la(pa.buffer)?M.createStream(34962,pa.buffer):M.getBuffer(pa.buffer),Rd="type"in pa?G[pa.type]:qe.dtype,Ge=!!pa.normalized,Ie=pa.size|0,He=pa.offset|0,Kd=pa.stride|0,De=pa.divisor|0);Pd=F.buffer;F.buffer=qe;Ae=F.divisor;F.divisor=De;Ke=F.normalized;F.normalized=Ge;pf=F.offset;F.offset=He;Xe=F.size;F.size=Ie;Qe=F.state;F.state=Ee;Me=F.stride;F.stride=Kd;We=F.type;F.type=Rd;Ue=F.w;F.w=Yd;Re=F.x;F.x=ae;Se=F.y;F.y=
Je;Qd=F.z;F.z=Cd;k.buffer=a.positionBuffer;Vd=!1;Te=null;ef=0;lf=!1;ff=bf=0;gf=1;hf=0;qf=5126;Cf=Bf=rf=mf=0;la(k)?(Vd=!0,Te=M.createStream(34962,k),qf=Te.dtype):(Te=M.getBuffer(k))?qf=Te.dtype:"constant"in k?(gf=2,"number"===typeof k.constant?(rf=k.constant,Bf=Cf=mf=0):(rf=0<k.constant.length?k.constant[0]:0,Bf=1<k.constant.length?k.constant[1]:0,Cf=2<k.constant.length?k.constant[2]:0,mf=3<k.constant.length?k.constant[3]:0)):(Te=la(k.buffer)?M.createStream(34962,k.buffer):M.getBuffer(k.buffer),qf=
"type"in k?G[k.type]:Te.dtype,lf=!!k.normalized,ff=k.size|0,bf=k.offset|0,hf=k.stride|0,ef=k.divisor|0);Ne=ca.buffer;ca.buffer=Te;Be=ca.divisor;ca.divisor=ef;nf=ca.normalized;ca.normalized=lf;of=ca.offset;ca.offset=bf;Df=ca.size;ca.size=ff;Gf=ca.state;ca.state=gf;Af=ca.stride;ca.stride=hf;Ef=ca.type;ca.type=qf;Ff=ca.w;ca.w=mf;wf=ca.x;ca.x=rf;xf=ca.y;ca.y=Bf;vf=ca.z;ca.z=Cf;yf=Ea.vert;Ea.vert=36;zf=Ea.frag;Ea.frag=35;sa.dirty=!0;c(R,a,d);R.viewportWidth=r;R.viewportHeight=t;ha[0]=w;ha[1]=B;ha[2]=x;
ha[3]=C;Ha[0]=W;Ha[1]=D;Ha[2]=N;Ha[3]=L;fa.blend_enable=O;ob[0]=I;ob[1]=P;va[0]=U;va[1]=Q;va[2]=ka;va[3]=T;fa.cull_enable=Y;fa.cull_face=V;fa.depth_enable=X;Lb[0]=ga;Lb[1]=qa;Lb[2]=aa;Lb[3]=ab;fa.scissor_enable=td;fa.stencil_enable=Db;ma&&(ba.cpuTime+=performance.now()-Ta);J.offset=oa;J.count=$b;J.instances=nc;J.primitive=bc;Na[23]=Xb;Na[24]=Rc;Na[22]=Eb;Na[31]=wa;Na[32]=hb;Na[33]=Gb;Na[10]=ec;Na[34]=Ka;Na[6]=Tb;Na[7]=Ub;Na[21]=pb;Na[8]=ib;Na[9]=Qa;Na[3]=cb;eb&&M.destroyStream(lc);K.buffer=Ia;K.divisor=
Ab;K.normalized=zb;K.offset=Ra;K.size=Kc;K.state=Jb;K.stride=Za;K.type=Vb;K.w=ya;K.x=Zc;K.y=Ja;K.z=Pb;gb&&M.destroyStream(jb);E.buffer=Mb;E.divisor=Xc;E.normalized=Fa;E.offset=yc;E.size=Pa;E.state=Ba;E.stride=mb;E.type=vb;E.w=Cb;E.x=tb;E.y=vc;E.z=wb;Hb&&M.destroyStream(sc);u.buffer=Nb;u.divisor=Rb;u.normalized=gc;u.offset=ic;u.size=kc;u.state=Bc;u.stride=Cc;u.type=Ec;u.w=Nc;u.x=Yc;u.y=Sc;u.z=Oc;Kb&&M.destroyStream(Fb);A.buffer=jc;A.divisor=xe;A.normalized=Ud;A.offset=Jd;A.size=Gd;A.state=bd;A.stride=
Fc;A.type=od;A.w=hd;A.x=ad;A.y=pd;A.z=yd;H.buffer=zd;H.divisor=ye;H.normalized=te;H.offset=uf;H.size=ee;H.state=de;H.stride=be;H.type=ue;H.w=$d;H.x=he;H.y=zc;H.z=Uc;q.buffer=pe;q.divisor=ke;q.normalized=Hd;q.offset=Md;q.size=Nd;q.state=Od;q.stride=ie;q.type=Ce;q.w=ze;q.x=me;q.y=Oe;q.z=Pe;Le&&M.destroyStream(qe);F.buffer=Pd;F.divisor=Ae;F.normalized=Ke;F.offset=pf;F.size=Xe;F.state=Qe;F.stride=Me;F.type=We;F.w=Ue;F.x=Re;F.y=Se;F.z=Qd;Vd&&M.destroyStream(Te);ca.buffer=Ne;ca.divisor=Be;ca.normalized=
nf;ca.offset=of;ca.size=Df;ca.state=Gf;ca.stride=Af;ca.type=Ef;ca.w=Ff;ca.x=wf;ca.y=xf;ca.z=vf;Ea.vert=yf;Ea.frag=zf;sa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(c,ba,r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca){var I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea,Na,Hb,Ha,U,ob,ea,va;I=c.attributes;aa=c.buffer;h=c.context;f=c.current;e=c.draw;D=c.elements;T=c.extensions;V=c.framebuffer;n=c.gl;qa=c.isBufferArgs;
L=c.next;ga=c.shader;a=c.uniforms;l=c.vao;X=L.blend_color;ma=f.blend_color;Ka=L.blend_equation;cb=f.blend_equation;kc=L.blend_func;oa=f.blend_func;Qa=L.colorMask;Y=f.colorMask;O=L.depth_range;M=f.depth_range;R=L.polygonOffset_offset;sa=f.polygonOffset_offset;J=L.sample_coverage;Ob=f.sample_coverage;$a=L.scissor_box;P=f.scissor_box;t=L.stencil_func;la=f.stencil_func;fa=L.stencil_opBack;Ea=f.stencil_opBack;Na=L.stencil_opFront;Hb=f.stencil_opFront;Ha=L.viewport;U=f.viewport;ob={int8:5120,int16:5122,
int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ea={offset:8,stride:8};va={offset:8,stride:8};return{batch:function(a,b){var c,d,g,r,B,x;c=V.next;c!==V.cur&&(c?n.bindFramebuffer(36160,c.framebuffer):n.bindFramebuffer(36160,null),V.cur=c);if(f.dirty){var N,X,ga,Ha,C,w,ia,ua,Q,ha,ra,G,m,Z,y,ja,pa,k,Ka,S,p,Bb,yb,$a,kc,jc,je,Ed,re,qd,fe,se;N=L.dither;N!==f.dither&&(N?n.enable(3024):n.disable(3024),f.dither=N);X=L.depth_func;X!==f.depth_func&&(n.depthFunc(X),f.depth_func=X);ga=
O[0];Ha=O[1];if(ga!==M[0]||Ha!==M[1])n.depthRange(ga,Ha),M[0]=ga,M[1]=Ha;C=L.depth_mask;C!==f.depth_mask&&(n.depthMask(C),f.depth_mask=C);w=Qa[0];ia=Qa[1];ua=Qa[2];Q=Qa[3];if(w!==Y[0]||ia!==Y[1]||ua!==Y[2]||Q!==Y[3])n.colorMask(w,ia,ua,Q),Y[0]=w,Y[1]=ia,Y[2]=ua,Y[3]=Q;ha=L.cull_enable;ha!==f.cull_enable&&(ha?n.enable(2884):n.disable(2884),f.cull_enable=ha);ra=L.cull_face;ra!==f.cull_face&&(n.cullFace(ra),f.cull_face=ra);G=L.frontFace;G!==f.frontFace&&(n.frontFace(G),f.frontFace=G);m=L.lineWidth;m!==
f.lineWidth&&(n.lineWidth(m),f.lineWidth=m);Z=L.polygonOffset_enable;Z!==f.polygonOffset_enable&&(Z?n.enable(32823):n.disable(32823),f.polygonOffset_enable=Z);y=R[0];ja=R[1];if(y!==sa[0]||ja!==sa[1])n.polygonOffset(y,ja),sa[0]=y,sa[1]=ja;pa=L.sample_alpha;pa!==f.sample_alpha&&(pa?n.enable(32926):n.disable(32926),f.sample_alpha=pa);k=L.sample_enable;k!==f.sample_enable&&(k?n.enable(32928):n.disable(32928),f.sample_enable=k);Ka=J[0];S=J[1];if(Ka!==Ob[0]||S!==Ob[1])n.sampleCoverage(Ka,S),Ob[0]=Ka,Ob[1]=
S;p=L.stencil_mask;p!==f.stencil_mask&&(n.stencilMask(p),f.stencil_mask=p);Bb=t[0];yb=t[1];$a=t[2];if(Bb!==la[0]||yb!==la[1]||$a!==la[2])n.stencilFunc(Bb,yb,$a),la[0]=Bb,la[1]=yb,la[2]=$a;kc=Na[0];jc=Na[1];je=Na[2];Ed=Na[3];if(kc!==Hb[0]||jc!==Hb[1]||je!==Hb[2]||Ed!==Hb[3])n.stencilOpSeparate(kc,jc,je,Ed),Hb[0]=kc,Hb[1]=jc,Hb[2]=je,Hb[3]=Ed;re=fa[0];qd=fa[1];fe=fa[2];se=fa[3];if(re!==Ea[0]||qd!==Ea[1]||fe!==Ea[2]||se!==Ea[3])n.stencilOpSeparate(re,qd,fe,se),Ea[0]=re,Ea[1]=qd,Ea[2]=fe,Ea[3]=se}n.blendColor(0,
0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;n.enable(3042);f.blend_enable=!0;n.blendEquationSeparate(32774,32774);cb[0]=32774;cb[1]=32774;n.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;n.disable(2929);f.depth_enable=!1;n.enable(3089);f.scissor_enable=!0;n.disable(2960);f.stencil_enable=!1;if(d=f.profile)g=performance.now(),ba.count+=b;n.useProgram(v.program);r=T.angle_instanced_arrays;var xd;l.setVAO(null);xd=e.instances;for(B=0;B<b;++B){x=a[B];var Dd,Zd,Wd,Ve,kf,af,Ad,Fe,Sd,
Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb;Dd=x.viewport;Zd=Dd.x|0;Wd=Dd.y|0;Ve="width"in Dd?Dd.width|0:h.framebufferWidth-Zd;kf="height"in Dd?Dd.height|0:h.framebufferHeight-Wd;af=h.viewportWidth;h.viewportWidth=Ve;Ad=h.viewportHeight;h.viewportHeight=kf;n.viewport(Zd,Wd,Ve,kf);U[0]=Zd;U[1]=Wd;U[2]=Ve;U[3]=kf;Fe=x.viewport;Sd=
Fe.x|0;Td=Fe.y|0;le="width"in Fe?Fe.width|0:h.framebufferWidth-Sd;Xd="height"in Fe?Fe.height|0:h.framebufferHeight-Td;n.scissor(Sd,Td,le,Xd);P[0]=Sd;P[1]=Td;P[2]=le;P[3]=Xd;ea.buffer=x.positionBuffer;rd=!1;jd=null;vd=0;$c=!1;oc=kd=0;id=1;ed=0;Lc=5126;Db=Ic=ab=qc=0;qa(ea)?(rd=!0,jd=aa.createStream(34962,ea),Lc=jd.dtype):(jd=aa.getBuffer(ea))?Lc=jd.dtype:"constant"in ea?(id=2,"number"===typeof ea.constant?(ab=ea.constant,Ic=Db=qc=0):(ab=0<ea.constant.length?ea.constant[0]:0,Ic=1<ea.constant.length?
ea.constant[1]:0,Db=2<ea.constant.length?ea.constant[2]:0,qc=3<ea.constant.length?ea.constant[3]:0)):(jd=qa(ea.buffer)?aa.createStream(34962,ea.buffer):aa.getBuffer(ea.buffer),Lc="type"in ea?ob[ea.type]:jd.dtype,$c=!!ea.normalized,oc=ea.size|0,kd=ea.offset|0,ed=ea.stride|0,vd=ea.divisor|0);pc=u.location;Ta=I[pc];if(1===id){Ta.buffer||n.enableVertexAttribArray(pc);Jc=oc||2;if(Ta.type!==Lc||Ta.size!==Jc||Ta.buffer!==jd||Ta.normalized!==$c||Ta.offset!==kd||Ta.stride!==ed)n.bindBuffer(34962,jd.buffer),
n.vertexAttribPointer(pc,Jc,Lc,$c,ed,kd),Ta.type=Lc,Ta.size=Jc,Ta.buffer=jd,Ta.normalized=$c,Ta.offset=kd,Ta.stride=ed;Ta.divisor!==vd&&(r.vertexAttribDivisorANGLE(pc,vd),Ta.divisor=vd)}else if(Ta.buffer&&(n.disableVertexAttribArray(pc),Ta.buffer=null),Ta.x!==ab||Ta.y!==Ic||Ta.z!==Db||Ta.w!==qc)n.vertexAttrib4f(pc,ab,Ic,Db,qc),Ta.x=ab,Ta.y=Ic,Ta.z=Db,Ta.w=qc;va.buffer=x.positionFractBuffer;$b=!1;rc=null;Fd=0;Bd=!1;Xb=Ac=0;Gc=1;Rc=0;La=5126;md=wa=Wa=Eb=0;qa(va)?($b=!0,rc=aa.createStream(34962,va),
La=rc.dtype):(rc=aa.getBuffer(va))?La=rc.dtype:"constant"in va?(Gc=2,"number"===typeof va.constant?(Wa=va.constant,wa=md=Eb=0):(Wa=0<va.constant.length?va.constant[0]:0,wa=1<va.constant.length?va.constant[1]:0,md=2<va.constant.length?va.constant[2]:0,Eb=3<va.constant.length?va.constant[3]:0)):(rc=qa(va.buffer)?aa.createStream(34962,va.buffer):aa.getBuffer(va.buffer),La="type"in va?ob[va.type]:rc.dtype,Bd=!!va.normalized,Xb=va.size|0,Ac=va.offset|0,Rc=va.stride|0,Fd=va.divisor|0);hb=A.location;Sa=
I[hb];if(1===Gc){Sa.buffer||n.enableVertexAttribArray(hb);Gb=Xb||2;if(Sa.type!==La||Sa.size!==Gb||Sa.buffer!==rc||Sa.normalized!==Bd||Sa.offset!==Ac||Sa.stride!==Rc)n.bindBuffer(34962,rc.buffer),n.vertexAttribPointer(hb,Gb,La,Bd,Rc,Ac),Sa.type=La,Sa.size=Gb,Sa.buffer=rc,Sa.normalized=Bd,Sa.offset=Ac,Sa.stride=Rc;Sa.divisor!==Fd&&(r.vertexAttribDivisorANGLE(hb,Fd),Sa.divisor=Fd)}else if(Sa.buffer&&(n.disableVertexAttribArray(hb),Sa.buffer=null),Sa.x!==Wa||Sa.y!==wa||Sa.z!==md||Sa.w!==Eb)n.vertexAttrib4f(hb,
Wa,wa,md,Eb),Sa.x=Wa,Sa.y=wa,Sa.z=md,Sa.w=Eb;db=x.fill;ec=db[0];ge=db[1];Tb=db[2];Ub=db[3];B&&Sb===ec&&Zb===ge&&fd===Tb&&Ma===Ub||(Sb=ec,Zb=ge,fd=Tb,Ma=Ub,n.uniform4f(da.location,ec,ge,Tb,Ub));pb=x.scale;ub=pb[0];Oa=pb[1];B&&ib===ub&&Dc===Oa||(ib=ub,Dc=Oa,n.uniform2f(H.location,ub,Oa));Ib=x.scaleFract;cd=Ib[0];lc=Ib[1];B&&eb===cd&&dd===lc||(eb=cd,dd=lc,n.uniform2f(q.location,cd,lc));dc=x.translate;kb=dc[0];ta=dc[1];B&&lb===kb&&qb===ta||(lb=kb,qb=ta,n.uniform2f(F.location,kb,ta));xa=x.translateFract;
Ua=xa[0];Aa=xa[1];B&&bb===Ua&&fb===Aa||(bb=Ua,fb=Aa,n.uniform2f(ca.location,Ua,Aa));Ia=x.id;B&&Ab===Ia||(Ab=Ia,n.uniform1f(K.location,Ia));zb=x.opacity;B&&Ra===zb||(Ra=zb,n.uniform1f(E.location,zb));Kc=z.call(this,h,x,B);Jb=null;(Jb=(Za=qa(Kc))?D.createStream(Kc):D.getElements(Kc))&&n.bindBuffer(34963,Jb.buffer.buffer);if(Vb=Jb?Jb.vertCount:-1)0<xd?Jb?r.drawElementsInstancedANGLE(4,Vb,Jb.type,0<<(Jb.type-5121>>1),xd):r.drawArraysInstancedANGLE(4,0,Vb,xd):0>xd&&(Jb?n.drawElements(4,Vb,Jb.type,0<<(Jb.type-
5121>>1)):n.drawArrays(4,0,Vb)),h.viewportWidth=af,h.viewportHeight=Ad,rd&&aa.destroyStream(jd),$b&&aa.destroyStream(rc),Za&&D.destroyStream(Jb)}f.dirty=!0;l.setVAO(null);d&&(ba.cpuTime+=performance.now()-g)},draw:function(a){var b,c,d,g,v,x,z,X,ga,na,Ha,C,w,ia,ua,Q,ha,ra,G,m,Z,y;b=V.next;b!==V.cur&&(b?n.bindFramebuffer(36160,b.framebuffer):n.bindFramebuffer(36160,null),V.cur=b);if(f.dirty){b=L.dither;b!==f.dither&&(b?n.enable(3024):n.disable(3024),f.dither=b);b=L.depth_func;b!==f.depth_func&&(n.depthFunc(b),
f.depth_func=b);b=O[0];x=O[1];if(b!==M[0]||x!==M[1])n.depthRange(b,x),M[0]=b,M[1]=x;b=L.depth_mask;b!==f.depth_mask&&(n.depthMask(b),f.depth_mask=b);b=Qa[0];x=Qa[1];c=Qa[2];d=Qa[3];if(b!==Y[0]||x!==Y[1]||c!==Y[2]||d!==Y[3])n.colorMask(b,x,c,d),Y[0]=b,Y[1]=x,Y[2]=c,Y[3]=d;b=L.cull_enable;b!==f.cull_enable&&(b?n.enable(2884):n.disable(2884),f.cull_enable=b);b=L.cull_face;b!==f.cull_face&&(n.cullFace(b),f.cull_face=b);b=L.frontFace;b!==f.frontFace&&(n.frontFace(b),f.frontFace=b);b=L.lineWidth;b!==f.lineWidth&&
(n.lineWidth(b),f.lineWidth=b);b=L.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?n.enable(32823):n.disable(32823),f.polygonOffset_enable=b);b=R[0];x=R[1];if(b!==sa[0]||x!==sa[1])n.polygonOffset(b,x),sa[0]=b,sa[1]=x;b=L.sample_alpha;b!==f.sample_alpha&&(b?n.enable(32926):n.disable(32926),f.sample_alpha=b);b=L.sample_enable;b!==f.sample_enable&&(b?n.enable(32928):n.disable(32928),f.sample_enable=b);b=J[0];x=J[1];if(b!==Ob[0]||x!==Ob[1])n.sampleCoverage(b,x),Ob[0]=b,Ob[1]=x;b=L.stencil_mask;b!==
f.stencil_mask&&(n.stencilMask(b),f.stencil_mask=b);b=t[0];x=t[1];c=t[2];if(b!==la[0]||x!==la[1]||c!==la[2])n.stencilFunc(b,x,c),la[0]=b,la[1]=x,la[2]=c;b=Na[0];x=Na[1];c=Na[2];d=Na[3];if(b!==Hb[0]||x!==Hb[1]||c!==Hb[2]||d!==Hb[3])n.stencilOpSeparate(b,x,c,d),Hb[0]=b,Hb[1]=x,Hb[2]=c,Hb[3]=d;b=fa[0];x=fa[1];c=fa[2];d=fa[3];if(b!==Ea[0]||x!==Ea[1]||c!==Ea[2]||d!==Ea[3])n.stencilOpSeparate(b,x,c,d),Ea[0]=b,Ea[1]=x,Ea[2]=c,Ea[3]=d}b=a.viewport;c=b.x|0;d=b.y|0;g="width"in b?b.width|0:h.framebufferWidth-
c;v="height"in b?b.height|0:h.framebufferHeight-d;b=h.viewportWidth;h.viewportWidth=g;x=h.viewportHeight;h.viewportHeight=v;n.viewport(c,d,g,v);U[0]=c;U[1]=d;U[2]=g;U[3]=v;n.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;n.enable(3042);f.blend_enable=!0;n.blendEquationSeparate(32774,32774);cb[0]=32774;cb[1]=32774;n.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;n.disable(2929);f.depth_enable=!1;v=a.viewport;c=v.x|0;d=v.y|0;g="width"in v?v.width|0:h.framebufferWidth-c;
v="height"in v?v.height|0:h.framebufferHeight-d;n.scissor(c,d,g,v);P[0]=c;P[1]=d;P[2]=g;P[3]=v;n.enable(3089);f.scissor_enable=!0;n.disable(2960);f.stencil_enable=!1;if(c=f.profile)z=performance.now(),ba.count++;n.useProgram(r.program);d=T.angle_instanced_arrays;l.setVAO(null);ea.buffer=a.positionBuffer;g=!1;X=0;ga=!1;Ha=na=0;C=1;w=0;ia=5126;ra=ha=Q=ua=0;qa(ea)?(g=!0,v=aa.createStream(34962,ea),ia=v.dtype):(v=aa.getBuffer(ea))?ia=v.dtype:"constant"in ea?(C=2,"number"===typeof ea.constant?(Q=ea.constant,
ha=ra=ua=0):(Q=0<ea.constant.length?ea.constant[0]:0,ha=1<ea.constant.length?ea.constant[1]:0,ra=2<ea.constant.length?ea.constant[2]:0,ua=3<ea.constant.length?ea.constant[3]:0)):(v=qa(ea.buffer)?aa.createStream(34962,ea.buffer):aa.getBuffer(ea.buffer),ia="type"in ea?ob[ea.type]:v.dtype,ga=!!ea.normalized,Ha=ea.size|0,na=ea.offset|0,w=ea.stride|0,X=ea.divisor|0);G=u.location;m=I[G];if(1===C){m.buffer||n.enableVertexAttribArray(G);Ha=Ha||2;if(m.type!==ia||m.size!==Ha||m.buffer!==v||m.normalized!==ga||
m.offset!==na||m.stride!==w)n.bindBuffer(34962,v.buffer),n.vertexAttribPointer(G,Ha,ia,ga,w,na),m.type=ia,m.size=Ha,m.buffer=v,m.normalized=ga,m.offset=na,m.stride=w;m.divisor!==X&&(d.vertexAttribDivisorANGLE(G,X),m.divisor=X)}else if(m.buffer&&(n.disableVertexAttribArray(G),m.buffer=null),m.x!==Q||m.y!==ha||m.z!==ra||m.w!==ua)n.vertexAttrib4f(G,Q,ha,ra,ua),m.x=Q,m.y=ha,m.z=ra,m.w=ua;va.buffer=a.positionFractBuffer;X=!1;na=0;w=!1;ua=ia=0;Q=1;G=0;m=5126;y=Z=ra=ha=0;qa(va)?(X=!0,ga=aa.createStream(34962,
va),m=ga.dtype):(ga=aa.getBuffer(va))?m=ga.dtype:"constant"in va?(Q=2,"number"===typeof va.constant?(ra=va.constant,Z=y=ha=0):(ra=0<va.constant.length?va.constant[0]:0,Z=1<va.constant.length?va.constant[1]:0,y=2<va.constant.length?va.constant[2]:0,ha=3<va.constant.length?va.constant[3]:0)):(ga=qa(va.buffer)?aa.createStream(34962,va.buffer):aa.getBuffer(va.buffer),m="type"in va?ob[va.type]:ga.dtype,w=!!va.normalized,ua=va.size|0,ia=va.offset|0,G=va.stride|0,na=va.divisor|0);Ha=A.location;C=I[Ha];if(1===
Q){C.buffer||n.enableVertexAttribArray(Ha);ua=ua||2;if(C.type!==m||C.size!==ua||C.buffer!==ga||C.normalized!==w||C.offset!==ia||C.stride!==G)n.bindBuffer(34962,ga.buffer),n.vertexAttribPointer(Ha,ua,m,w,G,ia),C.type=m,C.size=ua,C.buffer=ga,C.normalized=w,C.offset=ia,C.stride=G;C.divisor!==na&&(d.vertexAttribDivisorANGLE(Ha,na),C.divisor=na)}else if(C.buffer&&(n.disableVertexAttribArray(Ha),C.buffer=null),C.x!==ra||C.y!==Z||C.z!==y||C.w!==ha)n.vertexAttrib4f(Ha,ra,Z,y,ha),C.x=ra,C.y=Z,C.z=y,C.w=ha;
na=a.fill;n.uniform4f(da.location,na[0],na[1],na[2],na[3]);na=a.scale;n.uniform2f(H.location,na[0],na[1]);na=a.scaleFract;n.uniform2f(q.location,na[0],na[1]);na=a.translate;n.uniform2f(F.location,na[0],na[1]);na=a.translateFract;n.uniform2f(ca.location,na[0],na[1]);n.uniform1f(K.location,a.id);n.uniform1f(E.location,a.opacity);na=N.call(this,h,a,0);(na=(a=qa(na))?D.createStream(na):D.getElements(na))&&n.bindBuffer(34963,na.buffer.buffer);if(w=na?na.vertCount:-1)ia=e.instances,0<ia?na?d.drawElementsInstancedANGLE(4,
w,na.type,0<<(na.type-5121>>1),ia):d.drawArraysInstancedANGLE(4,0,w,ia):0>ia&&(na?n.drawElements(4,w,na.type,0<<(na.type-5121>>1)):n.drawArrays(4,0,w)),f.dirty=!0,l.setVAO(null),h.viewportWidth=b,h.viewportHeight=x,c&&(ba.cpuTime+=performance.now()-z),g&&aa.destroyStream(v),X&&aa.destroyStream(ga),a&&D.destroyStream(na)},scope:function(c,l,n){var q,r,t,v,u,A,N,F,E,C,w,M,z,K,H,O,G,m,Z,y,I,J,k,P,S,p,R,U,T,Y,da,V,fa,ca,na,la,sa,ma,oa,Ea,Na,Qa,cb,Ob,Ad,Hb,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,
Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb;q=c.viewport;r=q.x|0;t=q.y|0;v="width"in q?q.width|0:h.framebufferWidth-r;u="height"in q?q.height|0:h.framebufferHeight-t;A=h.viewportWidth;h.viewportWidth=v;N=h.viewportHeight;h.viewportHeight=u;F=Ha[0];Ha[0]=r;E=Ha[1];Ha[1]=t;C=Ha[2];Ha[2]=v;w=Ha[3];Ha[3]=u;M=X[0];X[0]=0;z=X[1];X[1]=0;K=X[2];X[2]=0;H=X[3];X[3]=0;O=L.blend_enable;L.blend_enable=
!0;G=Ka[0];Ka[0]=32774;m=Ka[1];Ka[1]=32774;Z=kc[0];kc[0]=770;y=kc[1];kc[1]=771;I=kc[2];kc[2]=773;J=kc[3];kc[3]=1;k=L.depth_enable;L.depth_enable=!1;P=c.viewport;S=P.x|0;p=P.y|0;R="width"in P?P.width|0:h.framebufferWidth-S;U="height"in P?P.height|0:h.framebufferHeight-p;T=$a[0];$a[0]=S;Y=$a[1];$a[1]=p;da=$a[2];$a[2]=R;V=$a[3];$a[3]=U;fa=L.scissor_enable;L.scissor_enable=!0;ca=L.stencil_enable;L.stencil_enable=!1;if(na=f.profile)la=performance.now(),ba.count++;sa=g.call(this,h,c,n);ma=null;ma=(oa=qa(sa))?
D.createStream(sa):D.getElements(sa);Ea=e.elements;e.elements=ma;Na=e.offset;e.offset=0;Qa=ma?ma.vertCount:-1;cb=e.count;e.count=Qa;Ob=e.primitive;e.primitive=4;Ad=c.fill;Hb=a[14];a[14]=Ad;Sd=c.id;Td=a[31];a[31]=Sd;le=c.opacity;Xd=a[10];a[10]=le;rd=h.pixelRatio;jd=a[34];a[34]=rd;vd=c.scale;$c=a[6];a[6]=vd;kd=c.scaleFract;oc=a[7];a[7]=kd;id=c.translate;ed=a[8];a[8]=id;Lc=c.translateFract;qc=a[9];a[9]=Lc;ab=b.call(this,h,c,n);Ic=a[3];a[3]=ab;ea.buffer=c.positionBuffer;Db=!1;pc=null;Ta=0;Jc=!1;rc=$b=
0;Fd=1;Bd=0;Ac=5126;La=Rc=Gc=Xb=0;qa(ea)?(Db=!0,pc=aa.createStream(34962,ea),Ac=pc.dtype):(pc=aa.getBuffer(ea))?Ac=pc.dtype:"constant"in ea?(Fd=2,"number"===typeof ea.constant?(Gc=ea.constant,Rc=La=Xb=0):(Gc=0<ea.constant.length?ea.constant[0]:0,Rc=1<ea.constant.length?ea.constant[1]:0,La=2<ea.constant.length?ea.constant[2]:0,Xb=3<ea.constant.length?ea.constant[3]:0)):(pc=qa(ea.buffer)?aa.createStream(34962,ea.buffer):aa.getBuffer(ea.buffer),Ac="type"in ea?ob[ea.type]:pc.dtype,Jc=!!ea.normalized,
rc=ea.size|0,$b=ea.offset|0,Bd=ea.stride|0,Ta=ea.divisor|0);Eb=x.buffer;x.buffer=pc;Wa=x.divisor;x.divisor=Ta;wa=x.normalized;x.normalized=Jc;md=x.offset;x.offset=$b;hb=x.size;x.size=rc;Sa=x.state;x.state=Fd;Gb=x.stride;x.stride=Bd;db=x.type;x.type=Ac;ec=x.w;x.w=Xb;Sb=x.x;x.x=Gc;ge=x.y;x.y=Rc;Zb=x.z;x.z=La;va.buffer=c.positionFractBuffer;Tb=!1;fd=null;Ub=0;Ma=!1;ub=pb=0;ib=1;Oa=0;Dc=5126;lc=eb=cd=Ib=0;qa(va)?(Tb=!0,fd=aa.createStream(34962,va),Dc=fd.dtype):(fd=aa.getBuffer(va))?Dc=fd.dtype:"constant"in
va?(ib=2,"number"===typeof va.constant?(cd=va.constant,eb=lc=Ib=0):(cd=0<va.constant.length?va.constant[0]:0,eb=1<va.constant.length?va.constant[1]:0,lc=2<va.constant.length?va.constant[2]:0,Ib=3<va.constant.length?va.constant[3]:0)):(fd=qa(va.buffer)?aa.createStream(34962,va.buffer):aa.getBuffer(va.buffer),Dc="type"in va?ob[va.type]:fd.dtype,Ma=!!va.normalized,ub=va.size|0,pb=va.offset|0,Oa=va.stride|0,Ub=va.divisor|0);dd=d.buffer;d.buffer=fd;dc=d.divisor;d.divisor=Ub;kb=d.normalized;d.normalized=
Ma;lb=d.offset;d.offset=pb;ta=d.size;d.size=ub;qb=d.state;d.state=ib;xa=d.stride;d.stride=Oa;Ua=d.type;d.type=Dc;bb=d.w;d.w=Ib;Aa=d.x;d.x=cd;fb=d.y;d.y=eb;Ia=d.z;d.z=lc;Ab=ga.vert;ga.vert=42;zb=ga.frag;ga.frag=41;f.dirty=!0;l(h,c,n);h.viewportWidth=A;h.viewportHeight=N;Ha[0]=F;Ha[1]=E;Ha[2]=C;Ha[3]=w;X[0]=M;X[1]=z;X[2]=K;X[3]=H;L.blend_enable=O;Ka[0]=G;Ka[1]=m;kc[0]=Z;kc[1]=y;kc[2]=I;kc[3]=J;L.depth_enable=k;$a[0]=T;$a[1]=Y;$a[2]=da;$a[3]=V;L.scissor_enable=fa;L.stencil_enable=ca;na&&(ba.cpuTime+=
performance.now()-la);oa&&D.destroyStream(ma);e.elements=Ea;e.offset=Na;e.count=cb;e.primitive=Ob;a[14]=Hb;a[31]=Td;a[10]=Xd;a[34]=jd;a[6]=$c;a[7]=oc;a[8]=ed;a[9]=qc;a[3]=Ic;Db&&aa.destroyStream(pc);x.buffer=Eb;x.divisor=Wa;x.normalized=wa;x.offset=md;x.size=hb;x.state=Sa;x.stride=Gb;x.type=db;x.w=ec;x.x=Sb;x.y=ge;x.z=Zb;Tb&&aa.destroyStream(fd);d.buffer=dd;d.divisor=dc;d.normalized=kb;d.offset=lb;d.size=ta;d.state=qb;d.stride=xa;d.type=Ua;d.w=bb;d.x=Aa;d.y=fb;d.z=Ia;ga.vert=Ab;ga.frag=zb;f.dirty=
!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,ba,r,N,g,b,x,d,v,z,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea,Na,Hb,Ha,U,ob,ea,va,bc,cc,Qc,td,wc){var W,B,ka,Ca,Lb,nc,Zc,C,w,ia,ua,Q,ha,ra,G,m,Z,y,ja,pa,k,tc,S,p,Bb,yb,jc,ne,ve,je,Ed,re,qd,fe,se,xd,Dd,Zd,Wd;W=c.attributes;B=c.buffer;ka=
c.context;Ca=c.current;Lb=c.draw;nc=c.elements;Zc=c.extensions;C=c.framebuffer;w=c.gl;ia=c.isBufferArgs;ua=c.next;Q=c.shader;ha=c.uniforms;ra=c.vao;G=ua.blend_color;m=Ca.blend_color;Z=ua.blend_equation;y=Ca.blend_equation;ja=ua.blend_func;pa=Ca.blend_func;k=ua.colorMask;tc=Ca.colorMask;S=ua.depth_range;p=Ca.depth_range;Bb=ua.polygonOffset_offset;yb=Ca.polygonOffset_offset;jc=ua.sample_coverage;ne=Ca.sample_coverage;ve=ua.scissor_box;je=Ca.scissor_box;Ed=ua.stencil_func;re=Ca.stencil_func;qd=ua.stencil_opBack;
fe=Ca.stencil_opBack;se=ua.stencil_opFront;xd=Ca.stencil_opFront;Dd=ua.viewport;Zd=Ca.viewport;Wd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,e,f,g,h;c=C.next;c!==C.cur&&(c?w.bindFramebuffer(36160,c.framebuffer):w.bindFramebuffer(36160,null),C.cur=c);if(Ca.dirty){var l,n,q,r,v,u,x,G,A,N,D,F,E,z,L,K,H,I,Q,ha,T,da,V,X,ja,ca,na,ga,aa,qa,hb,Sa,Gb,db;l=ua.dither;l!==Ca.dither&&(l?w.enable(3024):w.disable(3024),Ca.dither=
l);n=Z[0];q=Z[1];if(n!==y[0]||q!==y[1])w.blendEquationSeparate(n,q),y[0]=n,y[1]=q;r=ua.depth_func;r!==Ca.depth_func&&(w.depthFunc(r),Ca.depth_func=r);v=S[0];u=S[1];if(v!==p[0]||u!==p[1])w.depthRange(v,u),p[0]=v,p[1]=u;x=ua.depth_mask;x!==Ca.depth_mask&&(w.depthMask(x),Ca.depth_mask=x);G=k[0];A=k[1];N=k[2];D=k[3];if(G!==tc[0]||A!==tc[1]||N!==tc[2]||D!==tc[3])w.colorMask(G,A,N,D),tc[0]=G,tc[1]=A,tc[2]=N,tc[3]=D;F=ua.cull_enable;F!==Ca.cull_enable&&(F?w.enable(2884):w.disable(2884),Ca.cull_enable=F);
E=ua.cull_face;E!==Ca.cull_face&&(w.cullFace(E),Ca.cull_face=E);z=ua.frontFace;z!==Ca.frontFace&&(w.frontFace(z),Ca.frontFace=z);L=ua.lineWidth;L!==Ca.lineWidth&&(w.lineWidth(L),Ca.lineWidth=L);K=ua.polygonOffset_enable;K!==Ca.polygonOffset_enable&&(K?w.enable(32823):w.disable(32823),Ca.polygonOffset_enable=K);H=Bb[0];I=Bb[1];if(H!==yb[0]||I!==yb[1])w.polygonOffset(H,I),yb[0]=H,yb[1]=I;Q=ua.sample_alpha;Q!==Ca.sample_alpha&&(Q?w.enable(32926):w.disable(32926),Ca.sample_alpha=Q);ha=ua.sample_enable;
ha!==Ca.sample_enable&&(ha?w.enable(32928):w.disable(32928),Ca.sample_enable=ha);T=jc[0];da=jc[1];if(T!==ne[0]||da!==ne[1])w.sampleCoverage(T,da),ne[0]=T,ne[1]=da;V=ua.stencil_mask;V!==Ca.stencil_mask&&(w.stencilMask(V),Ca.stencil_mask=V);X=Ed[0];ja=Ed[1];ca=Ed[2];if(X!==re[0]||ja!==re[1]||ca!==re[2])w.stencilFunc(X,ja,ca),re[0]=X,re[1]=ja,re[2]=ca;na=se[0];ga=se[1];aa=se[2];qa=se[3];if(na!==xd[0]||ga!==xd[1]||aa!==xd[2]||qa!==xd[3])w.stencilOpSeparate(na,ga,aa,qa),xd[0]=na,xd[1]=ga,xd[2]=aa,xd[3]=
qa;hb=qd[0];Sa=qd[1];Gb=qd[2];db=qd[3];if(hb!==fe[0]||Sa!==fe[1]||Gb!==fe[2]||db!==fe[3])w.stencilOpSeparate(hb,Sa,Gb,db),fe[0]=hb,fe[1]=Sa,fe[2]=Gb,fe[3]=db}w.blendColor(0,0,0,1);m[0]=0;m[1]=0;m[2]=0;m[3]=1;w.enable(3042);Ca.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;w.disable(2929);Ca.depth_enable=!1;w.enable(3089);Ca.scissor_enable=!0;w.disable(2960);Ca.stencil_enable=!1;if(d=Ca.profile)e=performance.now(),ba.count+=b;w.useProgram(ma.program);f=Zc.angle_instanced_arrays;
var ec;ra.setVAO(null);w.uniform1i(t.location,!1);w.uniform1i(Hb.location,sa.bind());ec=Lb.instances;for(g=0;g<b;++g){h=a[g];var Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Dd,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,ve,ee,de,be,ue,$d,he,
zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,Id,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf;Sb=h.viewport;ge=Sb.x|0;Zb=Sb.y|0;Tb="width"in Sb?Sb.width|0:ka.framebufferWidth-ge;fd="height"in Sb?Sb.height|0:ka.framebufferHeight-Zb;Ub=ka.viewportWidth;ka.viewportWidth=Tb;Ma=ka.viewportHeight;ka.viewportHeight=fd;w.viewport(ge,Zb,Tb,fd);Zd[0]=ge;Zd[1]=Zb;Zd[2]=Tb;
Zd[3]=fd;pb=h.viewport;ub=pb.x|0;ib=pb.y|0;Oa="width"in pb?pb.width|0:ka.framebufferWidth-ub;Dc="height"in pb?pb.height|0:ka.framebufferHeight-ib;w.scissor(ub,ib,Oa,Dc);je[0]=ub;je[1]=ib;je[2]=Oa;je[3]=Dc;Ib=Ka.call(this,ka,h,g);cd=!1;eb=null;lc=0;dd=!1;kb=dc=0;lb=1;ta=0;qb=5126;Aa=bb=Ua=xa=0;ia(Ib)?(cd=!0,eb=B.createStream(34962,Ib),qb=eb.dtype):(eb=B.getBuffer(Ib))?qb=eb.dtype:"constant"in Ib?(lb=2,"number"===typeof Ib.constant?(Ua=Ib.constant,bb=Aa=xa=0):(Ua=0<Ib.constant.length?Ib.constant[0]:
0,bb=1<Ib.constant.length?Ib.constant[1]:0,Aa=2<Ib.constant.length?Ib.constant[2]:0,xa=3<Ib.constant.length?Ib.constant[3]:0)):(eb=ia(Ib.buffer)?B.createStream(34962,Ib.buffer):B.getBuffer(Ib.buffer),qb="type"in Ib?Wd[Ib.type]:eb.dtype,dd=!!Ib.normalized,kb=Ib.size|0,dc=Ib.offset|0,ta=Ib.stride|0,lc=Ib.divisor|0);fb=cc.location;Ia=W[fb];if(1===lb){Ia.buffer||w.enableVertexAttribArray(fb);Ab=kb||1;if(Ia.type!==qb||Ia.size!==Ab||Ia.buffer!==eb||Ia.normalized!==dd||Ia.offset!==dc||Ia.stride!==ta)w.bindBuffer(34962,
eb.buffer),w.vertexAttribPointer(fb,Ab,qb,dd,ta,dc),Ia.type=qb,Ia.size=Ab,Ia.buffer=eb,Ia.normalized=dd,Ia.offset=dc,Ia.stride=ta;Ia.divisor!==lc&&(f.vertexAttribDivisorANGLE(fb,lc),Ia.divisor=lc)}else if(Ia.buffer&&(w.disableVertexAttribArray(fb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==bb||Ia.z!==Aa||Ia.w!==xa)w.vertexAttrib4f(fb,Ua,bb,Aa,xa),Ia.x=Ua,Ia.y=bb,Ia.z=Aa,Ia.w=xa;zb=cb.call(this,ka,h,g);Ra=!1;Kc=null;Jb=0;Za=!1;ya=Vb=0;ce=1;Ja=0;Pb=5126;fc=za=jb=gb=0;ia(zb)?(Ra=!0,Kc=B.createStream(34962,zb),
Pb=Kc.dtype):(Kc=B.getBuffer(zb))?Pb=Kc.dtype:"constant"in zb?(ce=2,"number"===typeof zb.constant?(jb=zb.constant,za=fc=gb=0):(jb=0<zb.constant.length?zb.constant[0]:0,za=1<zb.constant.length?zb.constant[1]:0,fc=2<zb.constant.length?zb.constant[2]:0,gb=3<zb.constant.length?zb.constant[3]:0)):(Kc=ia(zb.buffer)?B.createStream(34962,zb.buffer):B.getBuffer(zb.buffer),Pb="type"in zb?Wd[zb.type]:Kc.dtype,Za=!!zb.normalized,ya=zb.size|0,Vb=zb.offset|0,Ja=zb.stride|0,Jb=zb.divisor|0);Da=td.location;rb=W[Da];
if(1===ce){rb.buffer||w.enableVertexAttribArray(Da);sb=ya||1;if(rb.type!==Pb||rb.size!==sb||rb.buffer!==Kc||rb.normalized!==Za||rb.offset!==Vb||rb.stride!==Ja)w.bindBuffer(34962,Kc.buffer),w.vertexAttribPointer(Da,sb,Pb,Za,Ja,Vb),rb.type=Pb,rb.size=sb,rb.buffer=Kc,rb.normalized=Za,rb.offset=Vb,rb.stride=Ja;rb.divisor!==Jb&&(f.vertexAttribDivisorANGLE(Da,Jb),rb.divisor=Jb)}else if(rb.buffer&&(w.disableVertexAttribArray(Da),rb.buffer=null),rb.x!==jb||rb.y!==za||rb.z!==fc||rb.w!==gb)w.vertexAttrib4f(Da,
jb,za,fc,gb),rb.x=jb,rb.y=za,rb.z=fc,rb.w=gb;Xa=kc.call(this,ka,h,g);Ya=!1;mc=null;xc=0;uc=!1;Mb=Va=0;Xc=1;Fa=0;yc=5126;vb=mb=Ba=Pa=0;ia(Xa)?(Ya=!0,mc=B.createStream(34962,Xa),yc=mc.dtype):(mc=B.getBuffer(Xa))?yc=mc.dtype:"constant"in Xa?(Xc=2,"number"===typeof Xa.constant?(Ba=Xa.constant,mb=vb=Pa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,mb=1<Xa.constant.length?Xa.constant[1]:0,vb=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:0)):(mc=ia(Xa.buffer)?B.createStream(34962,
Xa.buffer):B.getBuffer(Xa.buffer),yc="type"in Xa?Wd[Xa.type]:mc.dtype,uc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,xc=Xa.divisor|0);Cb=Qc.location;tb=W[Cb];if(1===Xc){tb.buffer||w.enableVertexAttribArray(Cb);vc=Mb||1;if(tb.type!==yc||tb.size!==vc||tb.buffer!==mc||tb.normalized!==uc||tb.offset!==Va||tb.stride!==Fa)w.bindBuffer(34962,mc.buffer),w.vertexAttribPointer(Cb,vc,yc,uc,Fa,Va),tb.type=yc,tb.size=vc,tb.buffer=mc,tb.normalized=uc,tb.offset=Va,tb.stride=Fa;tb.divisor!==xc&&(f.vertexAttribDivisorANGLE(Cb,
xc),tb.divisor=xc)}else if(tb.buffer&&(w.disableVertexAttribArray(Cb),tb.buffer=null),tb.x!==Ba||tb.y!==mb||tb.z!==vb||tb.w!==Pa)w.vertexAttrib4f(Cb,Ba,mb,vb,Pa),tb.x=Ba,tb.y=mb,tb.z=vb,tb.w=Pa;wb=oa.call(this,ka,h,g);wd=!1;sc=null;ud=0;Mc=!1;sd=ld=0;Wb=1;ac=0;Qb=5126;xb=nb=Yb=Ga=0;ia(wb)?(wd=!0,sc=B.createStream(34962,wb),Qb=sc.dtype):(sc=B.getBuffer(wb))?Qb=sc.dtype:"constant"in wb?(Wb=2,"number"===typeof wb.constant?(Yb=wb.constant,nb=xb=Ga=0):(Yb=0<wb.constant.length?wb.constant[0]:0,nb=1<wb.constant.length?
wb.constant[1]:0,xb=2<wb.constant.length?wb.constant[2]:0,Ga=3<wb.constant.length?wb.constant[3]:0)):(sc=ia(wb.buffer)?B.createStream(34962,wb.buffer):B.getBuffer(wb.buffer),Qb="type"in wb?Wd[wb.type]:sc.dtype,Mc=!!wb.normalized,sd=wb.size|0,ld=wb.offset|0,ac=wb.stride|0,ud=wb.divisor|0);Nb=wc.location;Rb=W[Nb];if(1===Wb){Rb.buffer||w.enableVertexAttribArray(Nb);gc=sd||1;if(Rb.type!==Qb||Rb.size!==gc||Rb.buffer!==sc||Rb.normalized!==Mc||Rb.offset!==ld||Rb.stride!==ac)w.bindBuffer(34962,sc.buffer),
w.vertexAttribPointer(Nb,gc,Qb,Mc,ac,ld),Rb.type=Qb,Rb.size=gc,Rb.buffer=sc,Rb.normalized=Mc,Rb.offset=ld,Rb.stride=ac;Rb.divisor!==ud&&(f.vertexAttribDivisorANGLE(Nb,ud),Rb.divisor=ud)}else if(Rb.buffer&&(w.disableVertexAttribArray(Nb),Rb.buffer=null),Rb.x!==Yb||Rb.y!==nb||Rb.z!==xb||Rb.w!==Ga)w.vertexAttrib4f(Nb,Yb,nb,xb,Ga),Rb.x=Yb,Rb.y=nb,Rb.z=xb,Rb.w=Ga;ic=Qa.call(this,ka,h,g);Ye=!1;Bc=null;Cc=0;Ec=!1;Yc=Nc=0;Sc=1;Oc=0;Kb=5126;Tc=Hc=Pc=Fb=0;ia(ic)?(Ye=!0,Bc=B.createStream(34962,ic),Kb=Bc.dtype):
(Bc=B.getBuffer(ic))?Kb=Bc.dtype:"constant"in ic?(Sc=2,"number"===typeof ic.constant?(Pc=ic.constant,Hc=Tc=Fb=0):(Pc=0<ic.constant.length?ic.constant[0]:0,Hc=1<ic.constant.length?ic.constant[1]:0,Tc=2<ic.constant.length?ic.constant[2]:0,Fb=3<ic.constant.length?ic.constant[3]:0)):(Bc=ia(ic.buffer)?B.createStream(34962,ic.buffer):B.getBuffer(ic.buffer),Kb="type"in ic?Wd[ic.type]:Bc.dtype,Ec=!!ic.normalized,Yc=ic.size|0,Nc=ic.offset|0,Oc=ic.stride|0,Cc=ic.divisor|0);hc=ea.location;Vc=W[hc];if(1===Sc){Vc.buffer||
w.enableVertexAttribArray(hc);nd=Yc||1;if(Vc.type!==Kb||Vc.size!==nd||Vc.buffer!==Bc||Vc.normalized!==Ec||Vc.offset!==Nc||Vc.stride!==Oc)w.bindBuffer(34962,Bc.buffer),w.vertexAttribPointer(hc,nd,Kb,Ec,Oc,Nc),Vc.type=Kb,Vc.size=nd,Vc.buffer=Bc,Vc.normalized=Ec,Vc.offset=Nc,Vc.stride=Oc;Vc.divisor!==Cc&&(f.vertexAttribDivisorANGLE(hc,Cc),Vc.divisor=Cc)}else if(Vc.buffer&&(w.disableVertexAttribArray(hc),Vc.buffer=null),Vc.x!==Pc||Vc.y!==Hc||Vc.z!==Tc||Vc.w!==Fb)w.vertexAttrib4f(hc,Pc,Hc,Tc,Fb),Vc.x=
Pc,Vc.y=Hc,Vc.z=Tc,Vc.w=Fb;gd=Y.call(this,ka,h,g);oe=!1;Wc=null;Dd=0;Ld=!1;xe=we=0;Ud=1;Jd=0;Gd=5126;hd=od=Fc=bd=0;ia(gd)?(oe=!0,Wc=B.createStream(34962,gd),Gd=Wc.dtype):(Wc=B.getBuffer(gd))?Gd=Wc.dtype:"constant"in gd?(Ud=2,"number"===typeof gd.constant?(Fc=gd.constant,od=hd=bd=0):(Fc=0<gd.constant.length?gd.constant[0]:0,od=1<gd.constant.length?gd.constant[1]:0,hd=2<gd.constant.length?gd.constant[2]:0,bd=3<gd.constant.length?gd.constant[3]:0)):(Wc=ia(gd.buffer)?B.createStream(34962,gd.buffer):B.getBuffer(gd.buffer),
Gd="type"in gd?Wd[gd.type]:Wc.dtype,Ld=!!gd.normalized,xe=gd.size|0,we=gd.offset|0,Jd=gd.stride|0,Dd=gd.divisor|0);ad=$a.location;pd=W[ad];if(1===Ud){pd.buffer||w.enableVertexAttribArray(ad);yd=xe||1;if(pd.type!==Gd||pd.size!==yd||pd.buffer!==Wc||pd.normalized!==Ld||pd.offset!==we||pd.stride!==Jd)w.bindBuffer(34962,Wc.buffer),w.vertexAttribPointer(ad,yd,Gd,Ld,Jd,we),pd.type=Gd,pd.size=yd,pd.buffer=Wc,pd.normalized=Ld,pd.offset=we,pd.stride=Jd;pd.divisor!==Dd&&(f.vertexAttribDivisorANGLE(ad,Dd),pd.divisor=
Dd)}else if(pd.buffer&&(w.disableVertexAttribArray(ad),pd.buffer=null),pd.x!==Fc||pd.y!==od||pd.z!==hd||pd.w!==bd)w.vertexAttrib4f(ad,Fc,od,hd,bd),pd.x=Fc,pd.y=od,pd.z=hd,pd.w=bd;zd=O.call(this,ka,h,g);ye=!1;te=null;ve=0;ee=!1;be=de=0;ue=1;$d=0;he=5126;ke=pe=Uc=zc=0;ia(zd)?(ye=!0,te=B.createStream(34962,zd),he=te.dtype):(te=B.getBuffer(zd))?he=te.dtype:"constant"in zd?(ue=2,"number"===typeof zd.constant?(Uc=zd.constant,pe=ke=zc=0):(Uc=0<zd.constant.length?zd.constant[0]:0,pe=1<zd.constant.length?
zd.constant[1]:0,ke=2<zd.constant.length?zd.constant[2]:0,zc=3<zd.constant.length?zd.constant[3]:0)):(te=ia(zd.buffer)?B.createStream(34962,zd.buffer):B.getBuffer(zd.buffer),he="type"in zd?Wd[zd.type]:te.dtype,ee=!!zd.normalized,be=zd.size|0,de=zd.offset|0,$d=zd.stride|0,ve=zd.divisor|0);Hd=P.location;Md=W[Hd];if(1===ue){Md.buffer||w.enableVertexAttribArray(Hd);Nd=be||4;if(Md.type!==he||Md.size!==Nd||Md.buffer!==te||Md.normalized!==ee||Md.offset!==de||Md.stride!==$d)w.bindBuffer(34962,te.buffer),
w.vertexAttribPointer(Hd,Nd,he,ee,$d,de),Md.type=he,Md.size=Nd,Md.buffer=te,Md.normalized=ee,Md.offset=de,Md.stride=$d;Md.divisor!==ve&&(f.vertexAttribDivisorANGLE(Hd,ve),Md.divisor=ve)}else if(Md.buffer&&(w.disableVertexAttribArray(Hd),Md.buffer=null),Md.x!==Uc||Md.y!==pe||Md.z!==ke||Md.w!==zc)w.vertexAttrib4f(Hd,Uc,pe,ke,zc),Md.x=Uc,Md.y=pe,Md.z=ke,Md.w=zc;Od=M.call(this,ka,h,g);ie=!1;Ce=null;ze=0;me=!1;Pe=Oe=0;Le=1;qe=0;De=5126;Ee=Ie=He=Ge=0;ia(Od)?(ie=!0,Ce=B.createStream(34962,Od),De=Ce.dtype):
(Ce=B.getBuffer(Od))?De=Ce.dtype:"constant"in Od?(Le=2,"number"===typeof Od.constant?(He=Od.constant,Ie=Ee=Ge=0):(He=0<Od.constant.length?Od.constant[0]:0,Ie=1<Od.constant.length?Od.constant[1]:0,Ee=2<Od.constant.length?Od.constant[2]:0,Ge=3<Od.constant.length?Od.constant[3]:0)):(Ce=ia(Od.buffer)?B.createStream(34962,Od.buffer):B.getBuffer(Od.buffer),De="type"in Od?Wd[Od.type]:Ce.dtype,me=!!Od.normalized,Pe=Od.size|0,Oe=Od.offset|0,qe=Od.stride|0,ze=Od.divisor|0);Kd=Ob.location;Rd=W[Kd];if(1===Le){Rd.buffer||
w.enableVertexAttribArray(Kd);Yd=Pe||4;if(Rd.type!==De||Rd.size!==Yd||Rd.buffer!==Ce||Rd.normalized!==me||Rd.offset!==Oe||Rd.stride!==qe)w.bindBuffer(34962,Ce.buffer),w.vertexAttribPointer(Kd,Yd,De,me,qe,Oe),Rd.type=De,Rd.size=Yd,Rd.buffer=Ce,Rd.normalized=me,Rd.offset=Oe,Rd.stride=qe;Rd.divisor!==ze&&(f.vertexAttribDivisorANGLE(Kd,ze),Rd.divisor=ze)}else if(Rd.buffer&&(w.disableVertexAttribArray(Kd),Rd.buffer=null),Rd.x!==He||Rd.y!==Ie||Rd.z!==Ee||Rd.w!==Ge)w.vertexAttrib4f(Kd,He,Ie,Ee,Ge),Rd.x=
He,Rd.y=Ie,Rd.z=Ee,Rd.w=Ge;ae=R.call(this,ka,h,g);Je=!1;Cd=null;Pd=0;Ae=!1;Id=Ke=0;Xe=1;Qe=0;Me=5126;Se=Re=Ue=We=0;ia(ae)?(Je=!0,Cd=B.createStream(34962,ae),Me=Cd.dtype):(Cd=B.getBuffer(ae))?Me=Cd.dtype:"constant"in ae?(Xe=2,"number"===typeof ae.constant?(Ue=ae.constant,Re=Se=We=0):(Ue=0<ae.constant.length?ae.constant[0]:0,Re=1<ae.constant.length?ae.constant[1]:0,Se=2<ae.constant.length?ae.constant[2]:0,We=3<ae.constant.length?ae.constant[3]:0)):(Cd=ia(ae.buffer)?B.createStream(34962,ae.buffer):B.getBuffer(ae.buffer),
Me="type"in ae?Wd[ae.type]:Cd.dtype,Ae=!!ae.normalized,Id=ae.size|0,Ke=ae.offset|0,Qe=ae.stride|0,Pd=ae.divisor|0);Qd=la.location;Vd=W[Qd];if(1===Xe){Vd.buffer||w.enableVertexAttribArray(Qd);Te=Id||1;if(Vd.type!==Me||Vd.size!==Te||Vd.buffer!==Cd||Vd.normalized!==Ae||Vd.offset!==Ke||Vd.stride!==Qe)w.bindBuffer(34962,Cd.buffer),w.vertexAttribPointer(Qd,Te,Me,Ae,Qe,Ke),Vd.type=Me,Vd.size=Te,Vd.buffer=Cd,Vd.normalized=Ae,Vd.offset=Ke,Vd.stride=Qe;Vd.divisor!==Pd&&(f.vertexAttribDivisorANGLE(Qd,Pd),Vd.divisor=
Pd)}else if(Vd.buffer&&(w.disableVertexAttribArray(Qd),Vd.buffer=null),Vd.x!==Ue||Vd.y!==Re||Vd.z!==Se||Vd.w!==We)w.vertexAttrib4f(Qd,Ue,Re,Se,We),Vd.x=Ue,Vd.y=Re,Vd.z=Se,Vd.w=We;ef=ka.pixelRatio;g&&lf===ef||(lf=ef,w.uniform1f(Ha.location,ef));bf=h.scale;ff=bf[0];hf=bf[1];g&&gf===ff&&qf===hf||(gf=ff,qf=hf,w.uniform2f(U.location,ff,hf));mf=h.scaleFract;rf=mf[0];Cf=mf[1];g&&Bf===rf&&Ne===Cf||(Bf=rf,Ne=Cf,w.uniform2f(ob.location,rf,Cf));Be=h.translate;nf=Be[0];Df=Be[1];g&&of===nf&&Gf===Df||(of=nf,Gf=
Df,w.uniform2f(va.location,nf,Df));Af=h.translateFract;Ef=Af[0];wf=Af[1];g&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,w.uniform2f(bc.location,Ef,wf));vf=J.call(this,ka,h,g);yf=vf[0];If=vf[1];g&&zf===yf&&Jf===If||(zf=yf,Jf=If,w.uniform2f(Na.location,yf,If));Kf=h.opacity;g&&Lf===Kf||(Lf=Kf,w.uniform1f(Ea.location,Kf));(sf=h.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Qf=sf._texture;w.uniform1i(fa.location,Qf.bind());Hf=h.elements;tf=null;(tf=(cg=ia(Hf))?nc.createStream(Hf):nc.getElements(Hf))&&
w.bindBuffer(34963,tf.buffer.buffer);Rf=h.offset;if(Sf=h.count)0<ec?tf?f.drawElementsInstancedANGLE(0,Sf,tf.type,Rf<<(tf.type-5121>>1),ec):f.drawArraysInstancedANGLE(0,Rf,Sf,ec):0>ec&&(tf?w.drawElements(0,Sf,tf.type,Rf<<(tf.type-5121>>1)):w.drawArrays(0,Rf,Sf)),ka.viewportWidth=Ub,ka.viewportHeight=Ma,cd&&B.destroyStream(eb),Ra&&B.destroyStream(Kc),Ya&&B.destroyStream(mc),wd&&B.destroyStream(sc),Ye&&B.destroyStream(Bc),oe&&B.destroyStream(Wc),ye&&B.destroyStream(te),ie&&B.destroyStream(Ce),Je&&B.destroyStream(Cd),
Qf.unbind(),cg&&nc.destroyStream(tf)}sa.unbind();Ca.dirty=!0;ra.setVAO(null);d&&(ba.cpuTime+=performance.now()-e)},draw:function(a){var c,e,f,h,l,n,q,G,A,D,F,M,L,H,I,O,J,R,Q,ha,T,V,X,Y,ja,ca,ga,aa,qa,sa,ma,oa,La,Eb,Wa,wa,Ka,hb,Sa,Gb,db,Qa,Sb,cb,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,kc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Dd,Bc,Cc,Ec,Nc,Yc,Sc,
Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,ve,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,Id,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe;c=C.next;c!==C.cur&&(c?w.bindFramebuffer(36160,c.framebuffer):w.bindFramebuffer(36160,null),C.cur=c);if(Ca.dirty){var De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf;De=ua.dither;De!==Ca.dither&&(De?w.enable(3024):w.disable(3024),Ca.dither=De);Ge=Z[0];He=Z[1];if(Ge!==y[0]||He!==y[1])w.blendEquationSeparate(Ge,
He),y[0]=Ge,y[1]=He;Ie=ua.depth_func;Ie!==Ca.depth_func&&(w.depthFunc(Ie),Ca.depth_func=Ie);Ee=S[0];Kd=S[1];if(Ee!==p[0]||Kd!==p[1])w.depthRange(Ee,Kd),p[0]=Ee,p[1]=Kd;Rd=ua.depth_mask;Rd!==Ca.depth_mask&&(w.depthMask(Rd),Ca.depth_mask=Rd);Yd=k[0];ae=k[1];Je=k[2];Cd=k[3];if(Yd!==tc[0]||ae!==tc[1]||Je!==tc[2]||Cd!==tc[3])w.colorMask(Yd,ae,Je,Cd),tc[0]=Yd,tc[1]=ae,tc[2]=Je,tc[3]=Cd;Pd=ua.cull_enable;Pd!==Ca.cull_enable&&(Pd?w.enable(2884):w.disable(2884),Ca.cull_enable=Pd);Ae=ua.cull_face;Ae!==Ca.cull_face&&
(w.cullFace(Ae),Ca.cull_face=Ae);Ke=ua.frontFace;Ke!==Ca.frontFace&&(w.frontFace(Ke),Ca.frontFace=Ke);pf=ua.lineWidth;pf!==Ca.lineWidth&&(w.lineWidth(pf),Ca.lineWidth=pf);Xe=ua.polygonOffset_enable;Xe!==Ca.polygonOffset_enable&&(Xe?w.enable(32823):w.disable(32823),Ca.polygonOffset_enable=Xe);Qe=Bb[0];Me=Bb[1];if(Qe!==yb[0]||Me!==yb[1])w.polygonOffset(Qe,Me),yb[0]=Qe,yb[1]=Me;We=ua.sample_alpha;We!==Ca.sample_alpha&&(We?w.enable(32926):w.disable(32926),Ca.sample_alpha=We);Ue=ua.sample_enable;Ue!==
Ca.sample_enable&&(Ue?w.enable(32928):w.disable(32928),Ca.sample_enable=Ue);Re=jc[0];Se=jc[1];if(Re!==ne[0]||Se!==ne[1])w.sampleCoverage(Re,Se),ne[0]=Re,ne[1]=Se;Qd=ua.stencil_mask;Qd!==Ca.stencil_mask&&(w.stencilMask(Qd),Ca.stencil_mask=Qd);Vd=Ed[0];Te=Ed[1];ef=Ed[2];if(Vd!==re[0]||Te!==re[1]||ef!==re[2])w.stencilFunc(Vd,Te,ef),re[0]=Vd,re[1]=Te,re[2]=ef;lf=se[0];bf=se[1];ff=se[2];gf=se[3];if(lf!==xd[0]||bf!==xd[1]||ff!==xd[2]||gf!==xd[3])w.stencilOpSeparate(lf,bf,ff,gf),xd[0]=lf,xd[1]=bf,xd[2]=
ff,xd[3]=gf;hf=qd[0];qf=qd[1];mf=qd[2];rf=qd[3];if(hf!==fe[0]||qf!==fe[1]||mf!==fe[2]||rf!==fe[3])w.stencilOpSeparate(hf,qf,mf,rf),fe[0]=hf,fe[1]=qf,fe[2]=mf,fe[3]=rf}e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:ka.framebufferWidth-f;n="height"in e?e.height|0:ka.framebufferHeight-h;q=ka.viewportWidth;ka.viewportWidth=l;G=ka.viewportHeight;ka.viewportHeight=n;w.viewport(f,h,l,n);Zd[0]=f;Zd[1]=h;Zd[2]=l;Zd[3]=n;w.blendColor(0,0,0,1);m[0]=0;m[1]=0;m[2]=0;m[3]=1;w.enable(3042);Ca.blend_enable=
!0;w.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;w.disable(2929);Ca.depth_enable=!1;A=a.viewport;D=A.x|0;F=A.y|0;M="width"in A?A.width|0:ka.framebufferWidth-D;L="height"in A?A.height|0:ka.framebufferHeight-F;w.scissor(D,F,M,L);je[0]=D;je[1]=F;je[2]=M;je[3]=L;w.enable(3089);Ca.scissor_enable=!0;w.disable(2960);Ca.stencil_enable=!1;if(H=Ca.profile)I=performance.now(),ba.count++;w.useProgram(r.program);O=Zc.angle_instanced_arrays;ra.setVAO(null);J=N.call(this,ka,a,0);R=!1;
Q=null;ha=0;T=!1;X=V=0;Y=1;ja=0;ca=5126;sa=qa=aa=ga=0;ia(J)?(R=!0,Q=B.createStream(34962,J),ca=Q.dtype):(Q=B.getBuffer(J))?ca=Q.dtype:"constant"in J?(Y=2,"number"===typeof J.constant?(aa=J.constant,qa=sa=ga=0):(aa=0<J.constant.length?J.constant[0]:0,qa=1<J.constant.length?J.constant[1]:0,sa=2<J.constant.length?J.constant[2]:0,ga=3<J.constant.length?J.constant[3]:0)):(Q=ia(J.buffer)?B.createStream(34962,J.buffer):B.getBuffer(J.buffer),ca="type"in J?Wd[J.type]:Q.dtype,T=!!J.normalized,X=J.size|0,V=
J.offset|0,ja=J.stride|0,ha=J.divisor|0);ma=cc.location;oa=W[ma];if(1===Y){oa.buffer||w.enableVertexAttribArray(ma);La=X||1;if(oa.type!==ca||oa.size!==La||oa.buffer!==Q||oa.normalized!==T||oa.offset!==V||oa.stride!==ja)w.bindBuffer(34962,Q.buffer),w.vertexAttribPointer(ma,La,ca,T,ja,V),oa.type=ca,oa.size=La,oa.buffer=Q,oa.normalized=T,oa.offset=V,oa.stride=ja;oa.divisor!==ha&&(O.vertexAttribDivisorANGLE(ma,ha),oa.divisor=ha)}else if(oa.buffer&&(w.disableVertexAttribArray(ma),oa.buffer=null),oa.x!==
aa||oa.y!==qa||oa.z!==sa||oa.w!==ga)w.vertexAttrib4f(ma,aa,qa,sa,ga),oa.x=aa,oa.y=qa,oa.z=sa,oa.w=ga;Eb=g.call(this,ka,a,0);Wa=!1;wa=null;Ka=0;hb=!1;Gb=Sa=0;db=1;Qa=0;Sb=5126;fd=Tb=Zb=cb=0;ia(Eb)?(Wa=!0,wa=B.createStream(34962,Eb),Sb=wa.dtype):(wa=B.getBuffer(Eb))?Sb=wa.dtype:"constant"in Eb?(db=2,"number"===typeof Eb.constant?(Zb=Eb.constant,Tb=fd=cb=0):(Zb=0<Eb.constant.length?Eb.constant[0]:0,Tb=1<Eb.constant.length?Eb.constant[1]:0,fd=2<Eb.constant.length?Eb.constant[2]:0,cb=3<Eb.constant.length?
Eb.constant[3]:0)):(wa=ia(Eb.buffer)?B.createStream(34962,Eb.buffer):B.getBuffer(Eb.buffer),Sb="type"in Eb?Wd[Eb.type]:wa.dtype,hb=!!Eb.normalized,Gb=Eb.size|0,Sa=Eb.offset|0,Qa=Eb.stride|0,Ka=Eb.divisor|0);Ub=td.location;Ma=W[Ub];if(1===db){Ma.buffer||w.enableVertexAttribArray(Ub);pb=Gb||1;if(Ma.type!==Sb||Ma.size!==pb||Ma.buffer!==wa||Ma.normalized!==hb||Ma.offset!==Sa||Ma.stride!==Qa)w.bindBuffer(34962,wa.buffer),w.vertexAttribPointer(Ub,pb,Sb,hb,Qa,Sa),Ma.type=Sb,Ma.size=pb,Ma.buffer=wa,Ma.normalized=
hb,Ma.offset=Sa,Ma.stride=Qa;Ma.divisor!==Ka&&(O.vertexAttribDivisorANGLE(Ub,Ka),Ma.divisor=Ka)}else if(Ma.buffer&&(w.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==Zb||Ma.y!==Tb||Ma.z!==fd||Ma.w!==cb)w.vertexAttrib4f(Ub,Zb,Tb,fd,cb),Ma.x=Zb,Ma.y=Tb,Ma.z=fd,Ma.w=cb;ub=b.call(this,ka,a,0);ib=!1;Oa=null;Dc=0;Ib=!1;eb=cd=0;lc=1;dd=0;dc=5126;qb=ta=lb=kb=0;ia(ub)?(ib=!0,Oa=B.createStream(34962,ub),dc=Oa.dtype):(Oa=B.getBuffer(ub))?dc=Oa.dtype:"constant"in ub?(lc=2,"number"===typeof ub.constant?(lb=
ub.constant,ta=qb=kb=0):(lb=0<ub.constant.length?ub.constant[0]:0,ta=1<ub.constant.length?ub.constant[1]:0,qb=2<ub.constant.length?ub.constant[2]:0,kb=3<ub.constant.length?ub.constant[3]:0)):(Oa=ia(ub.buffer)?B.createStream(34962,ub.buffer):B.getBuffer(ub.buffer),dc="type"in ub?Wd[ub.type]:Oa.dtype,Ib=!!ub.normalized,eb=ub.size|0,cd=ub.offset|0,dd=ub.stride|0,Dc=ub.divisor|0);xa=Qc.location;Ua=W[xa];if(1===lc){Ua.buffer||w.enableVertexAttribArray(xa);bb=eb||1;if(Ua.type!==dc||Ua.size!==bb||Ua.buffer!==
Oa||Ua.normalized!==Ib||Ua.offset!==cd||Ua.stride!==dd)w.bindBuffer(34962,Oa.buffer),w.vertexAttribPointer(xa,bb,dc,Ib,dd,cd),Ua.type=dc,Ua.size=bb,Ua.buffer=Oa,Ua.normalized=Ib,Ua.offset=cd,Ua.stride=dd;Ua.divisor!==Dc&&(O.vertexAttribDivisorANGLE(xa,Dc),Ua.divisor=Dc)}else if(Ua.buffer&&(w.disableVertexAttribArray(xa),Ua.buffer=null),Ua.x!==lb||Ua.y!==ta||Ua.z!==qb||Ua.w!==kb)w.vertexAttrib4f(xa,lb,ta,qb,kb),Ua.x=lb,Ua.y=ta,Ua.z=qb,Ua.w=kb;Aa=x.call(this,ka,a,0);fb=!1;Ia=null;Ab=0;zb=!1;Kc=Ra=0;
Jb=1;Za=0;Vb=5126;Pb=Ja=kc=ya=0;ia(Aa)?(fb=!0,Ia=B.createStream(34962,Aa),Vb=Ia.dtype):(Ia=B.getBuffer(Aa))?Vb=Ia.dtype:"constant"in Aa?(Jb=2,"number"===typeof Aa.constant?(kc=Aa.constant,Ja=Pb=ya=0):(kc=0<Aa.constant.length?Aa.constant[0]:0,Ja=1<Aa.constant.length?Aa.constant[1]:0,Pb=2<Aa.constant.length?Aa.constant[2]:0,ya=3<Aa.constant.length?Aa.constant[3]:0)):(Ia=ia(Aa.buffer)?B.createStream(34962,Aa.buffer):B.getBuffer(Aa.buffer),Vb="type"in Aa?Wd[Aa.type]:Ia.dtype,zb=!!Aa.normalized,Kc=Aa.size|
0,Ra=Aa.offset|0,Za=Aa.stride|0,Ab=Aa.divisor|0);gb=wc.location;jb=W[gb];if(1===Jb){jb.buffer||w.enableVertexAttribArray(gb);za=Kc||1;if(jb.type!==Vb||jb.size!==za||jb.buffer!==Ia||jb.normalized!==zb||jb.offset!==Ra||jb.stride!==Za)w.bindBuffer(34962,Ia.buffer),w.vertexAttribPointer(gb,za,Vb,zb,Za,Ra),jb.type=Vb,jb.size=za,jb.buffer=Ia,jb.normalized=zb,jb.offset=Ra,jb.stride=Za;jb.divisor!==Ab&&(O.vertexAttribDivisorANGLE(gb,Ab),jb.divisor=Ab)}else if(jb.buffer&&(w.disableVertexAttribArray(gb),jb.buffer=
null),jb.x!==kc||jb.y!==Ja||jb.z!==Pb||jb.w!==ya)w.vertexAttrib4f(gb,kc,Ja,Pb,ya),jb.x=kc,jb.y=Ja,jb.z=Pb,jb.w=ya;fc=d.call(this,ka,a,0);Da=!1;rb=null;sb=0;Xa=!1;mc=Ya=0;xc=1;uc=0;Va=5126;yc=Fa=Xc=Mb=0;ia(fc)?(Da=!0,rb=B.createStream(34962,fc),Va=rb.dtype):(rb=B.getBuffer(fc))?Va=rb.dtype:"constant"in fc?(xc=2,"number"===typeof fc.constant?(Xc=fc.constant,Fa=yc=Mb=0):(Xc=0<fc.constant.length?fc.constant[0]:0,Fa=1<fc.constant.length?fc.constant[1]:0,yc=2<fc.constant.length?fc.constant[2]:0,Mb=3<fc.constant.length?
fc.constant[3]:0)):(rb=ia(fc.buffer)?B.createStream(34962,fc.buffer):B.getBuffer(fc.buffer),Va="type"in fc?Wd[fc.type]:rb.dtype,Xa=!!fc.normalized,mc=fc.size|0,Ya=fc.offset|0,uc=fc.stride|0,sb=fc.divisor|0);Pa=ea.location;Ba=W[Pa];if(1===xc){Ba.buffer||w.enableVertexAttribArray(Pa);mb=mc||1;if(Ba.type!==Va||Ba.size!==mb||Ba.buffer!==rb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==uc)w.bindBuffer(34962,rb.buffer),w.vertexAttribPointer(Pa,mb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=mb,Ba.buffer=rb,Ba.normalized=
Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==sb&&(O.vertexAttribDivisorANGLE(Pa,sb),Ba.divisor=sb)}else if(Ba.buffer&&(w.disableVertexAttribArray(Pa),Ba.buffer=null),Ba.x!==Xc||Ba.y!==Fa||Ba.z!==yc||Ba.w!==Mb)w.vertexAttrib4f(Pa,Xc,Fa,yc,Mb),Ba.x=Xc,Ba.y=Fa,Ba.z=yc,Ba.w=Mb;vb=v.call(this,ka,a,0);Cb=!1;tb=null;vc=0;wb=!1;sc=wd=0;ud=1;Mc=0;ld=5126;Qb=ac=Wb=sd=0;ia(vb)?(Cb=!0,tb=B.createStream(34962,vb),ld=tb.dtype):(tb=B.getBuffer(vb))?ld=tb.dtype:"constant"in vb?(ud=2,"number"===typeof vb.constant?(Wb=
vb.constant,ac=Qb=sd=0):(Wb=0<vb.constant.length?vb.constant[0]:0,ac=1<vb.constant.length?vb.constant[1]:0,Qb=2<vb.constant.length?vb.constant[2]:0,sd=3<vb.constant.length?vb.constant[3]:0)):(tb=ia(vb.buffer)?B.createStream(34962,vb.buffer):B.getBuffer(vb.buffer),ld="type"in vb?Wd[vb.type]:tb.dtype,wb=!!vb.normalized,sc=vb.size|0,wd=vb.offset|0,Mc=vb.stride|0,vc=vb.divisor|0);Ga=$a.location;Yb=W[Ga];if(1===ud){Yb.buffer||w.enableVertexAttribArray(Ga);nb=sc||1;if(Yb.type!==ld||Yb.size!==nb||Yb.buffer!==
tb||Yb.normalized!==wb||Yb.offset!==wd||Yb.stride!==Mc)w.bindBuffer(34962,tb.buffer),w.vertexAttribPointer(Ga,nb,ld,wb,Mc,wd),Yb.type=ld,Yb.size=nb,Yb.buffer=tb,Yb.normalized=wb,Yb.offset=wd,Yb.stride=Mc;Yb.divisor!==vc&&(O.vertexAttribDivisorANGLE(Ga,vc),Yb.divisor=vc)}else if(Yb.buffer&&(w.disableVertexAttribArray(Ga),Yb.buffer=null),Yb.x!==Wb||Yb.y!==ac||Yb.z!==Qb||Yb.w!==sd)w.vertexAttrib4f(Ga,Wb,ac,Qb,sd),Yb.x=Wb,Yb.y=ac,Yb.z=Qb,Yb.w=sd;xb=z.call(this,ka,a,0);Nb=!1;Rb=null;gc=0;ic=!1;Bc=Dd=0;
Cc=1;Ec=0;Nc=5126;Kb=Oc=Sc=Yc=0;ia(xb)?(Nb=!0,Rb=B.createStream(34962,xb),Nc=Rb.dtype):(Rb=B.getBuffer(xb))?Nc=Rb.dtype:"constant"in xb?(Cc=2,"number"===typeof xb.constant?(Sc=xb.constant,Oc=Kb=Yc=0):(Sc=0<xb.constant.length?xb.constant[0]:0,Oc=1<xb.constant.length?xb.constant[1]:0,Kb=2<xb.constant.length?xb.constant[2]:0,Yc=3<xb.constant.length?xb.constant[3]:0)):(Rb=ia(xb.buffer)?B.createStream(34962,xb.buffer):B.getBuffer(xb.buffer),Nc="type"in xb?Wd[xb.type]:Rb.dtype,ic=!!xb.normalized,Bc=xb.size|
0,Dd=xb.offset|0,Ec=xb.stride|0,gc=xb.divisor|0);Fb=P.location;Pc=W[Fb];if(1===Cc){Pc.buffer||w.enableVertexAttribArray(Fb);Hc=Bc||4;if(Pc.type!==Nc||Pc.size!==Hc||Pc.buffer!==Rb||Pc.normalized!==ic||Pc.offset!==Dd||Pc.stride!==Ec)w.bindBuffer(34962,Rb.buffer),w.vertexAttribPointer(Fb,Hc,Nc,ic,Ec,Dd),Pc.type=Nc,Pc.size=Hc,Pc.buffer=Rb,Pc.normalized=ic,Pc.offset=Dd,Pc.stride=Ec;Pc.divisor!==gc&&(O.vertexAttribDivisorANGLE(Fb,gc),Pc.divisor=gc)}else if(Pc.buffer&&(w.disableVertexAttribArray(Fb),Pc.buffer=
null),Pc.x!==Sc||Pc.y!==Oc||Pc.z!==Kb||Pc.w!==Yc)w.vertexAttrib4f(Fb,Sc,Oc,Kb,Yc),Pc.x=Sc,Pc.y=Oc,Pc.z=Kb,Pc.w=Yc;Tc=da.call(this,ka,a,0);hc=!1;Vc=null;nd=0;gd=!1;Wc=oe=0;ve=1;Ld=0;we=5126;Gd=Jd=Ud=xe=0;ia(Tc)?(hc=!0,Vc=B.createStream(34962,Tc),we=Vc.dtype):(Vc=B.getBuffer(Tc))?we=Vc.dtype:"constant"in Tc?(ve=2,"number"===typeof Tc.constant?(Ud=Tc.constant,Jd=Gd=xe=0):(Ud=0<Tc.constant.length?Tc.constant[0]:0,Jd=1<Tc.constant.length?Tc.constant[1]:0,Gd=2<Tc.constant.length?Tc.constant[2]:0,xe=3<Tc.constant.length?
Tc.constant[3]:0)):(Vc=ia(Tc.buffer)?B.createStream(34962,Tc.buffer):B.getBuffer(Tc.buffer),we="type"in Tc?Wd[Tc.type]:Vc.dtype,gd=!!Tc.normalized,Wc=Tc.size|0,oe=Tc.offset|0,Ld=Tc.stride|0,nd=Tc.divisor|0);bd=Ob.location;Fc=W[bd];if(1===ve){Fc.buffer||w.enableVertexAttribArray(bd);od=Wc||4;if(Fc.type!==we||Fc.size!==od||Fc.buffer!==Vc||Fc.normalized!==gd||Fc.offset!==oe||Fc.stride!==Ld)w.bindBuffer(34962,Vc.buffer),w.vertexAttribPointer(bd,od,we,gd,Ld,oe),Fc.type=we,Fc.size=od,Fc.buffer=Vc,Fc.normalized=
gd,Fc.offset=oe,Fc.stride=Ld;Fc.divisor!==nd&&(O.vertexAttribDivisorANGLE(bd,nd),Fc.divisor=nd)}else if(Fc.buffer&&(w.disableVertexAttribArray(bd),Fc.buffer=null),Fc.x!==Ud||Fc.y!==Jd||Fc.z!==Gd||Fc.w!==xe)w.vertexAttrib4f(bd,Ud,Jd,Gd,xe),Fc.x=Ud,Fc.y=Jd,Fc.z=Gd,Fc.w=xe;hd=K.call(this,ka,a,0);ad=!1;pd=null;yd=0;zd=!1;te=ye=0;Id=1;ee=0;de=5126;he=$d=ue=be=0;ia(hd)?(ad=!0,pd=B.createStream(34962,hd),de=pd.dtype):(pd=B.getBuffer(hd))?de=pd.dtype:"constant"in hd?(Id=2,"number"===typeof hd.constant?(ue=
hd.constant,$d=he=be=0):(ue=0<hd.constant.length?hd.constant[0]:0,$d=1<hd.constant.length?hd.constant[1]:0,he=2<hd.constant.length?hd.constant[2]:0,be=3<hd.constant.length?hd.constant[3]:0)):(pd=ia(hd.buffer)?B.createStream(34962,hd.buffer):B.getBuffer(hd.buffer),de="type"in hd?Wd[hd.type]:pd.dtype,zd=!!hd.normalized,te=hd.size|0,ye=hd.offset|0,ee=hd.stride|0,yd=hd.divisor|0);zc=la.location;Uc=W[zc];if(1===Id){Uc.buffer||w.enableVertexAttribArray(zc);pe=te||1;if(Uc.type!==de||Uc.size!==pe||Uc.buffer!==
pd||Uc.normalized!==zd||Uc.offset!==ye||Uc.stride!==ee)w.bindBuffer(34962,pd.buffer),w.vertexAttribPointer(zc,pe,de,zd,ee,ye),Uc.type=de,Uc.size=pe,Uc.buffer=pd,Uc.normalized=zd,Uc.offset=ye,Uc.stride=ee;Uc.divisor!==yd&&(O.vertexAttribDivisorANGLE(zc,yd),Uc.divisor=yd)}else if(Uc.buffer&&(w.disableVertexAttribArray(zc),Uc.buffer=null),Uc.x!==ue||Uc.y!==$d||Uc.z!==he||Uc.w!==be)w.vertexAttrib4f(zc,ue,$d,he,be),Uc.x=ue,Uc.y=$d,Uc.z=he,Uc.w=be;w.uniform1i(t.location,!1);w.uniform1f(Ha.location,ka.pixelRatio);
ke=a.scale;w.uniform2f(U.location,ke[0],ke[1]);Hd=a.scaleFract;w.uniform2f(ob.location,Hd[0],Hd[1]);Md=a.translate;w.uniform2f(va.location,Md[0],Md[1]);Nd=a.translateFract;w.uniform2f(bc.location,Nd[0],Nd[1]);Od=E.call(this,ka,a,0);w.uniform2f(Na.location,Od[0],Od[1]);w.uniform1f(Ea.location,a.opacity);w.uniform1i(Hb.location,u.bind());(ie=a.markerTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);Ce=ie._texture;w.uniform1i(fa.location,Ce.bind());ze=a.elements;me=null;(me=(Oe=ia(ze))?nc.createStream(ze):
nc.getElements(ze))&&w.bindBuffer(34963,me.buffer.buffer);Pe=a.offset;if(Le=a.count)qe=Lb.instances,0<qe?me?O.drawElementsInstancedANGLE(0,Le,me.type,Pe<<(me.type-5121>>1),qe):O.drawArraysInstancedANGLE(0,Pe,Le,qe):0>qe&&(me?w.drawElements(0,Le,me.type,Pe<<(me.type-5121>>1)):w.drawArrays(0,Pe,Le)),Ca.dirty=!0,ra.setVAO(null),ka.viewportWidth=q,ka.viewportHeight=G,H&&(ba.cpuTime+=performance.now()-I),R&&B.destroyStream(Q),Wa&&B.destroyStream(wa),ib&&B.destroyStream(Oa),fb&&B.destroyStream(Ia),Da&&
B.destroyStream(rb),Cb&&B.destroyStream(tb),Nb&&B.destroyStream(Rb),hc&&B.destroyStream(Vc),ad&&B.destroyStream(pd),u.unbind(),Ce.unbind(),Oe&&nc.destroyStream(me)},scope:function(b,c,d){var g,k,m,p,r,t,v,w,u,x,y,C,N,J,E,M,z,O,K,W,S,Z,P,R,U,Y,da,fa,pa,ea,na,la,oa,ra,sa,va,ma,Ha,Ea,Ka,Na,yb,Qa,Bb,wc,$a,Ma,pb,ub,ib,Oa,ob,Ib,cb,eb,td,tc,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Ob,Jb,Za,Vb,ya,Hb,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,bc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,cc,sc,Qc,Mc,kc,qd,Wb,ac,
Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,je,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,Ed,Wc,Zc,jc,Zd,xd,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,fe,re,se,ee,de,be,ne,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,jf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,pg,cf,Ze,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,
$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;g=b.viewport;k=g.x|0;m=g.y|0;p="width"in g?g.width|0:ka.framebufferWidth-k;r="height"in g?g.height|0:ka.framebufferHeight-m;t=ka.viewportWidth;ka.viewportWidth=p;v=ka.viewportHeight;ka.viewportHeight=r;w=Dd[0];Dd[0]=k;u=Dd[1];Dd[1]=m;x=Dd[2];Dd[2]=p;y=Dd[3];Dd[3]=r;C=G[0];G[0]=0;N=G[1];G[1]=0;J=G[2];G[2]=0;E=G[3];G[3]=1;M=ua.blend_enable;ua.blend_enable=!0;z=ja[0];ja[0]=770;O=ja[1];ja[1]=771;K=ja[2];ja[2]=773;W=ja[3];ja[3]=1;S=ua.depth_enable;
ua.depth_enable=!1;Z=b.viewport;P=Z.x|0;R=Z.y|0;U="width"in Z?Z.width|0:ka.framebufferWidth-P;Y="height"in Z?Z.height|0:ka.framebufferHeight-R;da=ve[0];ve[0]=P;fa=ve[1];ve[1]=R;pa=ve[2];ve[2]=U;ea=ve[3];ve[3]=Y;na=ua.scissor_enable;ua.scissor_enable=!0;la=ua.stencil_enable;ua.stencil_enable=!1;if(oa=Ca.profile)ra=performance.now(),ba.count++;sa=b.elements;va=null;va=(ma=ia(sa))?nc.createStream(sa):nc.getElements(sa);Ha=Lb.elements;Lb.elements=va;Ea=b.offset;Ka=Lb.offset;Lb.offset=Ea;Na=b.count;yb=
Lb.count;Lb.count=Na;Qa=Lb.primitive;Lb.primitive=0;Bb=ha[45];ha[45]=!1;wc=b.markerTexture;$a=ha[48];ha[48]=wc;Ma=b.opacity;pb=ha[10];ha[10]=Ma;ub=A.call(this,ka,b,d);ib=ha[46];ha[46]=ub;Oa=ha[47];ha[47]=H;ob=ka.pixelRatio;Ib=ha[34];ha[34]=ob;cb=b.scale;eb=ha[6];ha[6]=cb;td=b.scaleFract;tc=ha[7];ha[7]=td;dc=b.translate;kb=ha[8];ha[8]=dc;lb=b.translateFract;ta=ha[9];ha[9]=lb;qb=q.call(this,ka,b,d);xa=!1;Ua=null;bb=0;Aa=!1;Ia=fb=0;Ab=1;zb=0;Ra=5126;Vb=Za=Jb=Ob=0;ia(qb)?(xa=!0,Ua=B.createStream(34962,
qb),Ra=Ua.dtype):(Ua=B.getBuffer(qb))?Ra=Ua.dtype:"constant"in qb?(Ab=2,"number"===typeof qb.constant?(Jb=qb.constant,Za=Vb=Ob=0):(Jb=0<qb.constant.length?qb.constant[0]:0,Za=1<qb.constant.length?qb.constant[1]:0,Vb=2<qb.constant.length?qb.constant[2]:0,Ob=3<qb.constant.length?qb.constant[3]:0)):(Ua=ia(qb.buffer)?B.createStream(34962,qb.buffer):B.getBuffer(qb.buffer),Ra="type"in qb?Wd[qb.type]:Ua.dtype,Aa=!!qb.normalized,Ia=qb.size|0,fb=qb.offset|0,zb=qb.stride|0,bb=qb.divisor|0);ya=F.buffer;F.buffer=
Ua;Hb=F.divisor;F.divisor=bb;Ja=F.normalized;F.normalized=Aa;Pb=F.offset;F.offset=fb;gb=F.size;F.size=Ia;jb=F.state;F.state=Ab;za=F.stride;F.stride=zb;fc=F.type;F.type=Ra;Da=F.w;F.w=Ob;rb=F.x;F.x=Jb;sb=F.y;F.y=Za;Xa=F.z;F.z=Vb;Ya=ca.call(this,ka,b,d);mc=!1;xc=null;uc=0;Va=!1;bc=Mb=0;Fa=1;yc=0;Pa=5126;Cb=vb=mb=Ba=0;ia(Ya)?(mc=!0,xc=B.createStream(34962,Ya),Pa=xc.dtype):(xc=B.getBuffer(Ya))?Pa=xc.dtype:"constant"in Ya?(Fa=2,"number"===typeof Ya.constant?(mb=Ya.constant,vb=Cb=Ba=0):(mb=0<Ya.constant.length?
Ya.constant[0]:0,vb=1<Ya.constant.length?Ya.constant[1]:0,Cb=2<Ya.constant.length?Ya.constant[2]:0,Ba=3<Ya.constant.length?Ya.constant[3]:0)):(xc=ia(Ya.buffer)?B.createStream(34962,Ya.buffer):B.getBuffer(Ya.buffer),Pa="type"in Ya?Wd[Ya.type]:xc.dtype,Va=!!Ya.normalized,bc=Ya.size|0,Mb=Ya.offset|0,yc=Ya.stride|0,uc=Ya.divisor|0);tb=I.buffer;I.buffer=xc;vc=I.divisor;I.divisor=uc;wb=I.normalized;I.normalized=Va;cc=I.offset;I.offset=Mb;sc=I.size;I.size=bc;Qc=I.state;I.state=Fa;Mc=I.stride;I.stride=yc;
kc=I.type;I.type=Pa;qd=I.w;I.w=Ba;Wb=I.x;I.x=mb;ac=I.y;I.y=vb;Qb=I.z;I.z=Cb;Ga=aa.call(this,ka,b,d);Yb=!1;nb=null;xb=0;Nb=!1;gc=Rb=0;ic=1;je=0;Bc=5126;Yc=Nc=Ec=Cc=0;ia(Ga)?(Yb=!0,nb=B.createStream(34962,Ga),Bc=nb.dtype):(nb=B.getBuffer(Ga))?Bc=nb.dtype:"constant"in Ga?(ic=2,"number"===typeof Ga.constant?(Ec=Ga.constant,Nc=Yc=Cc=0):(Ec=0<Ga.constant.length?Ga.constant[0]:0,Nc=1<Ga.constant.length?Ga.constant[1]:0,Yc=2<Ga.constant.length?Ga.constant[2]:0,Cc=3<Ga.constant.length?Ga.constant[3]:0)):(nb=
ia(Ga.buffer)?B.createStream(34962,Ga.buffer):B.getBuffer(Ga.buffer),Bc="type"in Ga?Wd[Ga.type]:nb.dtype,Nb=!!Ga.normalized,gc=Ga.size|0,Rb=Ga.offset|0,je=Ga.stride|0,xb=Ga.divisor|0);Sc=h.buffer;h.buffer=nb;Oc=h.divisor;h.divisor=xb;Kb=h.normalized;h.normalized=Nb;Fb=h.offset;h.offset=Rb;Pc=h.size;h.size=gc;Hc=h.state;h.state=ic;Tc=h.stride;h.stride=je;hc=h.type;h.type=Bc;Vc=h.w;h.w=Cc;nd=h.x;h.x=Ec;gd=h.y;h.y=Nc;Ed=h.z;h.z=Yc;Wc=f.call(this,ka,b,d);Zc=!1;jc=null;Zd=0;xd=!1;Jd=Ud=0;Gd=1;bd=0;Fc=
5126;pd=ad=hd=od=0;ia(Wc)?(Zc=!0,jc=B.createStream(34962,Wc),Fc=jc.dtype):(jc=B.getBuffer(Wc))?Fc=jc.dtype:"constant"in Wc?(Gd=2,"number"===typeof Wc.constant?(hd=Wc.constant,ad=pd=od=0):(hd=0<Wc.constant.length?Wc.constant[0]:0,ad=1<Wc.constant.length?Wc.constant[1]:0,pd=2<Wc.constant.length?Wc.constant[2]:0,od=3<Wc.constant.length?Wc.constant[3]:0)):(jc=ia(Wc.buffer)?B.createStream(34962,Wc.buffer):B.getBuffer(Wc.buffer),Fc="type"in Wc?Wd[Wc.type]:jc.dtype,xd=!!Wc.normalized,Jd=Wc.size|0,Ud=Wc.offset|
0,bd=Wc.stride|0,Zd=Wc.divisor|0);yd=e.buffer;e.buffer=jc;zd=e.divisor;e.divisor=Zd;fe=e.normalized;e.normalized=xd;re=e.offset;e.offset=Ud;se=e.size;e.size=Jd;ee=e.state;e.state=Gd;de=e.stride;e.stride=bd;be=e.type;e.type=Fc;ne=e.w;e.w=od;$d=e.x;e.x=hd;he=e.y;e.y=ad;zc=e.z;e.z=pd;Uc=D.call(this,ka,b,d);pe=!1;ke=null;Hd=0;Md=!1;Od=Nd=0;ie=1;Ce=0;ze=5126;Le=Pe=Oe=me=0;ia(Uc)?(pe=!0,ke=B.createStream(34962,Uc),ze=ke.dtype):(ke=B.getBuffer(Uc))?ze=ke.dtype:"constant"in Uc?(ie=2,"number"===typeof Uc.constant?
(Oe=Uc.constant,Pe=Le=me=0):(Oe=0<Uc.constant.length?Uc.constant[0]:0,Pe=1<Uc.constant.length?Uc.constant[1]:0,Le=2<Uc.constant.length?Uc.constant[2]:0,me=3<Uc.constant.length?Uc.constant[3]:0)):(ke=ia(Uc.buffer)?B.createStream(34962,Uc.buffer):B.getBuffer(Uc.buffer),ze="type"in Uc?Wd[Uc.type]:ke.dtype,Md=!!Uc.normalized,Od=Uc.size|0,Nd=Uc.offset|0,Ce=Uc.stride|0,Hd=Uc.divisor|0);qe=T.buffer;T.buffer=ke;De=T.divisor;T.divisor=Hd;Ge=T.normalized;T.normalized=Md;He=T.offset;T.offset=Nd;Ie=T.size;T.size=
Od;Ee=T.state;T.state=ie;Kd=T.stride;T.stride=Ce;Rd=T.type;T.type=ze;Yd=T.w;T.w=me;ae=T.x;T.x=Oe;Je=T.y;T.y=Pe;Cd=T.z;T.z=Le;Pd=V.call(this,ka,b,d);Ae=!1;Ke=null;jf=0;Xe=!1;Me=Qe=0;We=1;Ue=0;Re=5126;Te=Vd=Qd=Se=0;ia(Pd)?(Ae=!0,Ke=B.createStream(34962,Pd),Re=Ke.dtype):(Ke=B.getBuffer(Pd))?Re=Ke.dtype:"constant"in Pd?(We=2,"number"===typeof Pd.constant?(Qd=Pd.constant,Vd=Te=Se=0):(Qd=0<Pd.constant.length?Pd.constant[0]:0,Vd=1<Pd.constant.length?Pd.constant[1]:0,Te=2<Pd.constant.length?Pd.constant[2]:
0,Se=3<Pd.constant.length?Pd.constant[3]:0)):(Ke=ia(Pd.buffer)?B.createStream(34962,Pd.buffer):B.getBuffer(Pd.buffer),Re="type"in Pd?Wd[Pd.type]:Ke.dtype,Xe=!!Pd.normalized,Me=Pd.size|0,Qe=Pd.offset|0,Ue=Pd.stride|0,jf=Pd.divisor|0);ef=n.buffer;n.buffer=Ke;lf=n.divisor;n.divisor=jf;bf=n.normalized;n.normalized=Xe;ff=n.offset;n.offset=Qe;gf=n.size;n.size=Me;hf=n.state;n.state=We;qf=n.stride;n.stride=Ue;mf=n.type;n.type=Re;rf=n.w;n.w=Se;Bf=n.x;n.x=Qd;Cf=n.y;n.y=Vd;Ne=n.z;n.z=Te;Be=qa.call(this,ka,b,
d);nf=!1;of=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;ia(Be)?(nf=!0,of=B.createStream(34962,Be),xf=of.dtype):(of=B.getBuffer(Be))?xf=of.dtype:"constant"in Be?(Ff=2,"number"===typeof Be.constant?(yf=Be.constant,zf=If=vf=0):(yf=0<Be.constant.length?Be.constant[0]:0,zf=1<Be.constant.length?Be.constant[1]:0,If=2<Be.constant.length?Be.constant[2]:0,vf=3<Be.constant.length?Be.constant[3]:0)):(of=ia(Be.buffer)?B.createStream(34962,Be.buffer):B.getBuffer(Be.buffer),xf="type"in Be?Wd[Be.type]:
of.dtype,Gf=!!Be.normalized,Ef=Be.size|0,Af=Be.offset|0,wf=Be.stride|0,Df=Be.divisor|0);Jf=L.buffer;L.buffer=of;Kf=L.divisor;L.divisor=Df;Lf=L.normalized;L.normalized=Gf;sf=L.offset;L.offset=Af;Qf=L.size;L.size=Ef;Hf=L.state;L.state=Ff;tf=L.stride;L.stride=wf;cg=L.type;L.type=xf;Rf=L.w;L.w=vf;Sf=L.x;L.x=yf;pg=L.y;L.y=zf;cf=L.z;L.z=If;Ze=ga.call(this,ka,b,d);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ia(Ze)?(Mf=!0,Nf=B.createStream(34962,Ze),Tf=Nf.dtype):(Nf=B.getBuffer(Ze))?
Tf=Nf.dtype:"constant"in Ze?(hg=2,"number"===typeof Ze.constant?(Xf=Ze.constant,Yf=ig=Wf=0):(Xf=0<Ze.constant.length?Ze.constant[0]:0,Yf=1<Ze.constant.length?Ze.constant[1]:0,ig=2<Ze.constant.length?Ze.constant[2]:0,Wf=3<Ze.constant.length?Ze.constant[3]:0)):(Nf=ia(Ze.buffer)?B.createStream(34962,Ze.buffer):B.getBuffer(Ze.buffer),Tf="type"in Ze?Wd[Ze.type]:Nf.dtype,eg=!!Ze.normalized,gg=Ze.size|0,fg=Ze.offset|0,Vf=Ze.stride|0,dg=Ze.divisor|0);qg=a.buffer;a.buffer=Nf;rg=a.divisor;a.divisor=dg;sg=a.normalized;
a.normalized=eg;tg=a.offset;a.offset=fg;ug=a.size;a.size=gg;vg=a.state;a.state=hg;wg=a.stride;a.stride=Vf;xg=a.type;a.type=Tf;yg=a.w;a.w=Wf;zg=a.x;a.x=Xf;Ag=a.y;a.y=Yf;df=a.z;a.z=ig;$e=l.call(this,ka,b,d);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;ia($e)?(Of=!0,Pf=B.createStream(34962,$e),Uf=Pf.dtype):(Pf=B.getBuffer($e))?Uf=Pf.dtype:"constant"in $e?(ng=2,"number"===typeof $e.constant?(ag=$e.constant,bg=og=$f=0):(ag=0<$e.constant.length?$e.constant[0]:0,bg=1<$e.constant.length?
$e.constant[1]:0,og=2<$e.constant.length?$e.constant[2]:0,$f=3<$e.constant.length?$e.constant[3]:0)):(Pf=ia($e.buffer)?B.createStream(34962,$e.buffer):B.getBuffer($e.buffer),Uf="type"in $e?Wd[$e.type]:Pf.dtype,kg=!!$e.normalized,mg=$e.size|0,lg=$e.offset|0,Zf=$e.stride|0,jg=$e.divisor|0);Bg=X.buffer;X.buffer=Pf;Cg=X.divisor;X.divisor=jg;Dg=X.normalized;X.normalized=kg;Eg=X.offset;X.offset=lg;Fg=X.size;X.size=mg;Gg=X.state;X.state=ng;Hg=X.stride;X.stride=Zf;Ig=X.type;X.type=Uf;Jg=X.w;X.w=$f;Kg=X.x;
X.x=ag;Lg=X.y;X.y=bg;Mg=X.z;X.z=og;Ng=Q.vert;Q.vert=44;Og=Q.frag;Q.frag=43;Ca.dirty=!0;c(ka,b,d);ka.viewportWidth=t;ka.viewportHeight=v;Dd[0]=w;Dd[1]=u;Dd[2]=x;Dd[3]=y;G[0]=C;G[1]=N;G[2]=J;G[3]=E;ua.blend_enable=M;ja[0]=z;ja[1]=O;ja[2]=K;ja[3]=W;ua.depth_enable=S;ve[0]=da;ve[1]=fa;ve[2]=pa;ve[3]=ea;ua.scissor_enable=na;ua.stencil_enable=la;oa&&(ba.cpuTime+=performance.now()-ra);ma&&nc.destroyStream(va);Lb.elements=Ha;Lb.offset=Ka;Lb.count=yb;Lb.primitive=Qa;ha[45]=Bb;ha[48]=$a;ha[10]=pb;ha[46]=ib;
ha[47]=Oa;ha[34]=Ib;ha[6]=eb;ha[7]=tc;ha[8]=kb;ha[9]=ta;xa&&B.destroyStream(Ua);F.buffer=ya;F.divisor=Hb;F.normalized=Ja;F.offset=Pb;F.size=gb;F.state=jb;F.stride=za;F.type=fc;F.w=Da;F.x=rb;F.y=sb;F.z=Xa;mc&&B.destroyStream(xc);I.buffer=tb;I.divisor=vc;I.normalized=wb;I.offset=cc;I.size=sc;I.state=Qc;I.stride=Mc;I.type=kc;I.w=qd;I.x=Wb;I.y=ac;I.z=Qb;Yb&&B.destroyStream(nb);h.buffer=Sc;h.divisor=Oc;h.normalized=Kb;h.offset=Fb;h.size=Pc;h.state=Hc;h.stride=Tc;h.type=hc;h.w=Vc;h.x=nd;h.y=gd;h.z=Ed;Zc&&
B.destroyStream(jc);e.buffer=yd;e.divisor=zd;e.normalized=fe;e.offset=re;e.size=se;e.state=ee;e.stride=de;e.type=be;e.w=ne;e.x=$d;e.y=he;e.z=zc;pe&&B.destroyStream(ke);T.buffer=qe;T.divisor=De;T.normalized=Ge;T.offset=He;T.size=Ie;T.state=Ee;T.stride=Kd;T.type=Rd;T.w=Yd;T.x=ae;T.y=Je;T.z=Cd;Ae&&B.destroyStream(Ke);n.buffer=ef;n.divisor=lf;n.normalized=bf;n.offset=ff;n.size=gf;n.state=hf;n.stride=qf;n.type=mf;n.w=rf;n.x=Bf;n.y=Cf;n.z=Ne;nf&&B.destroyStream(of);L.buffer=Jf;L.divisor=Kf;L.normalized=
Lf;L.offset=sf;L.size=Qf;L.state=Hf;L.stride=tf;L.type=cg;L.w=Rf;L.x=Sf;L.y=pg;L.z=cf;Mf&&B.destroyStream(Nf);a.buffer=qg;a.divisor=rg;a.normalized=sg;a.offset=tg;a.size=ug;a.state=vg;a.stride=wg;a.type=xg;a.w=yg;a.x=zg;a.y=Ag;a.z=df;Of&&B.destroyStream(Pf);X.buffer=Bg;X.divisor=Cg;X.normalized=Dg;X.offset=Eg;X.size=Fg;X.state=Gg;X.stride=Hg;X.type=Ig;X.w=Jg;X.x=Kg;X.y=Lg;X.z=Mg;Q.vert=Ng;Q.frag=Og;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,
z,r,N,g,b,x,d,v,na,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa,Y,O,M,R,sa,J,Ob,$a,P,t,la,fa,Ea,Na,Hb,Ha,U,ob,ea,va,bc,cc,Qc,td){var wc,W,B,ka,Ca,Lb,jc,Zc,C,w,ia,ua,Q,ha,ra,G,m,Z,y,ja,pa,k,tc,S,p,Bb,yb,jf,ne,ve,je,Ed,re,qd,fe,se,xd,Dd,Zd;wc=c.attributes;W=c.buffer;B=c.context;ka=c.current;Ca=c.draw;Lb=c.elements;jc=c.extensions;Zc=c.framebuffer;C=c.gl;w=c.isBufferArgs;ia=c.next;ua=c.shader;Q=c.uniforms;ha=c.vao;ra=ia.blend_color;G=ka.blend_color;m=ia.blend_equation;Z=ka.blend_equation;
y=ia.blend_func;ja=ka.blend_func;pa=ia.colorMask;k=ka.colorMask;tc=ia.depth_range;S=ka.depth_range;p=ia.polygonOffset_offset;Bb=ka.polygonOffset_offset;yb=ia.sample_coverage;jf=ka.sample_coverage;ne=ia.scissor_box;ve=ka.scissor_box;je=ia.stencil_func;Ed=ka.stencil_func;re=ia.stencil_opBack;qd=ka.stencil_opBack;fe=ia.stencil_opFront;se=ka.stencil_opFront;xd=ia.viewport;Dd=ka.viewport;Zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
b){var c,d,e,f,g,h;c=Zc.next;c!==Zc.cur&&(c?C.bindFramebuffer(36160,c.framebuffer):C.bindFramebuffer(36160,null),Zc.cur=c);if(ka.dirty){var l,n,q,r,v,u,x,y,A,N,D,F,E,L,K,H,I,Q,T,V,da,X,ca,na,ga,aa,ua,ra,qa,wa,md,hb,Sa,Gb;l=ia.dither;l!==ka.dither&&(l?C.enable(3024):C.disable(3024),ka.dither=l);n=m[0];q=m[1];if(n!==Z[0]||q!==Z[1])C.blendEquationSeparate(n,q),Z[0]=n,Z[1]=q;r=ia.depth_func;r!==ka.depth_func&&(C.depthFunc(r),ka.depth_func=r);v=tc[0];u=tc[1];if(v!==S[0]||u!==S[1])C.depthRange(v,u),S[0]=
v,S[1]=u;x=ia.depth_mask;x!==ka.depth_mask&&(C.depthMask(x),ka.depth_mask=x);y=pa[0];A=pa[1];N=pa[2];D=pa[3];if(y!==k[0]||A!==k[1]||N!==k[2]||D!==k[3])C.colorMask(y,A,N,D),k[0]=y,k[1]=A,k[2]=N,k[3]=D;F=ia.cull_enable;F!==ka.cull_enable&&(F?C.enable(2884):C.disable(2884),ka.cull_enable=F);E=ia.cull_face;E!==ka.cull_face&&(C.cullFace(E),ka.cull_face=E);L=ia.frontFace;L!==ka.frontFace&&(C.frontFace(L),ka.frontFace=L);K=ia.lineWidth;K!==ka.lineWidth&&(C.lineWidth(K),ka.lineWidth=K);H=ia.polygonOffset_enable;
H!==ka.polygonOffset_enable&&(H?C.enable(32823):C.disable(32823),ka.polygonOffset_enable=H);I=p[0];Q=p[1];if(I!==Bb[0]||Q!==Bb[1])C.polygonOffset(I,Q),Bb[0]=I,Bb[1]=Q;T=ia.sample_alpha;T!==ka.sample_alpha&&(T?C.enable(32926):C.disable(32926),ka.sample_alpha=T);V=ia.sample_enable;V!==ka.sample_enable&&(V?C.enable(32928):C.disable(32928),ka.sample_enable=V);da=yb[0];X=yb[1];if(da!==jf[0]||X!==jf[1])C.sampleCoverage(da,X),jf[0]=da,jf[1]=X;ca=ia.stencil_mask;ca!==ka.stencil_mask&&(C.stencilMask(ca),ka.stencil_mask=
ca);na=je[0];ga=je[1];aa=je[2];if(na!==Ed[0]||ga!==Ed[1]||aa!==Ed[2])C.stencilFunc(na,ga,aa),Ed[0]=na,Ed[1]=ga,Ed[2]=aa;ua=fe[0];ra=fe[1];qa=fe[2];wa=fe[3];if(ua!==se[0]||ra!==se[1]||qa!==se[2]||wa!==se[3])C.stencilOpSeparate(ua,ra,qa,wa),se[0]=ua,se[1]=ra,se[2]=qa,se[3]=wa;md=re[0];hb=re[1];Sa=re[2];Gb=re[3];if(md!==qd[0]||hb!==qd[1]||Sa!==qd[2]||Gb!==qd[3])C.stencilOpSeparate(md,hb,Sa,Gb),qd[0]=md,qd[1]=hb,qd[2]=Sa,qd[3]=Gb}C.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;C.enable(3042);ka.blend_enable=
!0;C.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;C.disable(2929);ka.depth_enable=!1;C.enable(3089);ka.scissor_enable=!0;C.disable(2960);ka.stencil_enable=!1;if(d=ka.profile)e=performance.now(),z.count+=b;C.useProgram(ma.program);f=jc.angle_instanced_arrays;var db;ha.setVAO(null);C.uniform1i(t.location,!1);C.uniform1i(Na.location,sa.bind());db=Ca.instances;for(g=0;g<b;++g){h=a[g];var ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,
zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,xd,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,ne,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,Id,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,
Hf,tf;ec=h.viewport;Sb=ec.x|0;ge=ec.y|0;Zb="width"in ec?ec.width|0:B.framebufferWidth-Sb;Tb="height"in ec?ec.height|0:B.framebufferHeight-ge;fd=B.viewportWidth;B.viewportWidth=Zb;Ub=B.viewportHeight;B.viewportHeight=Tb;C.viewport(Sb,ge,Zb,Tb);Dd[0]=Sb;Dd[1]=ge;Dd[2]=Zb;Dd[3]=Tb;Ma=h.viewport;pb=Ma.x|0;ub=Ma.y|0;ib="width"in Ma?Ma.width|0:B.framebufferWidth-pb;Oa="height"in Ma?Ma.height|0:B.framebufferHeight-ub;C.scissor(pb,ub,ib,Oa);ve[0]=pb;ve[1]=ub;ve[2]=ib;ve[3]=Oa;Dc=Ka.call(this,B,h,g);Ib=!1;
cd=null;eb=0;lc=!1;dc=dd=0;kb=1;lb=0;ta=5126;bb=Ua=xa=qb=0;w(Dc)?(Ib=!0,cd=W.createStream(34962,Dc),ta=cd.dtype):(cd=W.getBuffer(Dc))?ta=cd.dtype:"constant"in Dc?(kb=2,"number"===typeof Dc.constant?(xa=Dc.constant,Ua=bb=qb=0):(xa=0<Dc.constant.length?Dc.constant[0]:0,Ua=1<Dc.constant.length?Dc.constant[1]:0,bb=2<Dc.constant.length?Dc.constant[2]:0,qb=3<Dc.constant.length?Dc.constant[3]:0)):(cd=w(Dc.buffer)?W.createStream(34962,Dc.buffer):W.getBuffer(Dc.buffer),ta="type"in Dc?Zd[Dc.type]:cd.dtype,
lc=!!Dc.normalized,dc=Dc.size|0,dd=Dc.offset|0,lb=Dc.stride|0,eb=Dc.divisor|0);Aa=bc.location;fb=wc[Aa];if(1===kb){fb.buffer||C.enableVertexAttribArray(Aa);Ia=dc||1;if(fb.type!==ta||fb.size!==Ia||fb.buffer!==cd||fb.normalized!==lc||fb.offset!==dd||fb.stride!==lb)C.bindBuffer(34962,cd.buffer),C.vertexAttribPointer(Aa,Ia,ta,lc,lb,dd),fb.type=ta,fb.size=Ia,fb.buffer=cd,fb.normalized=lc,fb.offset=dd,fb.stride=lb;fb.divisor!==eb&&(f.vertexAttribDivisorANGLE(Aa,eb),fb.divisor=eb)}else if(fb.buffer&&(C.disableVertexAttribArray(Aa),
fb.buffer=null),fb.x!==xa||fb.y!==Ua||fb.z!==bb||fb.w!==qb)C.vertexAttrib4f(Aa,xa,Ua,bb,qb),fb.x=xa,fb.y=Ua,fb.z=bb,fb.w=qb;Ab=cb.call(this,B,h,g);zb=!1;Ra=null;Kc=0;Jb=!1;Vb=Za=0;ya=1;ce=0;Ja=5126;za=jb=gb=Pb=0;w(Ab)?(zb=!0,Ra=W.createStream(34962,Ab),Ja=Ra.dtype):(Ra=W.getBuffer(Ab))?Ja=Ra.dtype:"constant"in Ab?(ya=2,"number"===typeof Ab.constant?(gb=Ab.constant,jb=za=Pb=0):(gb=0<Ab.constant.length?Ab.constant[0]:0,jb=1<Ab.constant.length?Ab.constant[1]:0,za=2<Ab.constant.length?Ab.constant[2]:
0,Pb=3<Ab.constant.length?Ab.constant[3]:0)):(Ra=w(Ab.buffer)?W.createStream(34962,Ab.buffer):W.getBuffer(Ab.buffer),Ja="type"in Ab?Zd[Ab.type]:Ra.dtype,Jb=!!Ab.normalized,Vb=Ab.size|0,Za=Ab.offset|0,ce=Ab.stride|0,Kc=Ab.divisor|0);fc=Qc.location;Da=wc[fc];if(1===ya){Da.buffer||C.enableVertexAttribArray(fc);rb=Vb||1;if(Da.type!==Ja||Da.size!==rb||Da.buffer!==Ra||Da.normalized!==Jb||Da.offset!==Za||Da.stride!==ce)C.bindBuffer(34962,Ra.buffer),C.vertexAttribPointer(fc,rb,Ja,Jb,ce,Za),Da.type=Ja,Da.size=
rb,Da.buffer=Ra,Da.normalized=Jb,Da.offset=Za,Da.stride=ce;Da.divisor!==Kc&&(f.vertexAttribDivisorANGLE(fc,Kc),Da.divisor=Kc)}else if(Da.buffer&&(C.disableVertexAttribArray(fc),Da.buffer=null),Da.x!==gb||Da.y!==jb||Da.z!==za||Da.w!==Pb)C.vertexAttrib4f(fc,gb,jb,za,Pb),Da.x=gb,Da.y=jb,Da.z=za,Da.w=Pb;sb=kc.call(this,B,h,g);Xa=!1;Ya=null;mc=0;xc=!1;Va=uc=0;Mb=1;Xc=0;Fa=5126;mb=Ba=Pa=yc=0;w(sb)?(Xa=!0,Ya=W.createStream(34962,sb),Fa=Ya.dtype):(Ya=W.getBuffer(sb))?Fa=Ya.dtype:"constant"in sb?(Mb=2,"number"===
typeof sb.constant?(Pa=sb.constant,Ba=mb=yc=0):(Pa=0<sb.constant.length?sb.constant[0]:0,Ba=1<sb.constant.length?sb.constant[1]:0,mb=2<sb.constant.length?sb.constant[2]:0,yc=3<sb.constant.length?sb.constant[3]:0)):(Ya=w(sb.buffer)?W.createStream(34962,sb.buffer):W.getBuffer(sb.buffer),Fa="type"in sb?Zd[sb.type]:Ya.dtype,xc=!!sb.normalized,Va=sb.size|0,uc=sb.offset|0,Xc=sb.stride|0,mc=sb.divisor|0);vb=cc.location;Cb=wc[vb];if(1===Mb){Cb.buffer||C.enableVertexAttribArray(vb);tb=Va||1;if(Cb.type!==Fa||
Cb.size!==tb||Cb.buffer!==Ya||Cb.normalized!==xc||Cb.offset!==uc||Cb.stride!==Xc)C.bindBuffer(34962,Ya.buffer),C.vertexAttribPointer(vb,tb,Fa,xc,Xc,uc),Cb.type=Fa,Cb.size=tb,Cb.buffer=Ya,Cb.normalized=xc,Cb.offset=uc,Cb.stride=Xc;Cb.divisor!==mc&&(f.vertexAttribDivisorANGLE(vb,mc),Cb.divisor=mc)}else if(Cb.buffer&&(C.disableVertexAttribArray(vb),Cb.buffer=null),Cb.x!==Pa||Cb.y!==Ba||Cb.z!==mb||Cb.w!==yc)C.vertexAttrib4f(vb,Pa,Ba,mb,yc),Cb.x=Pa,Cb.y=Ba,Cb.z=mb,Cb.w=yc;vc=oa.call(this,B,h,g);wb=!1;
wd=null;sc=0;ud=!1;ld=Mc=0;sd=1;Wb=0;ac=5126;nb=Yb=Ga=Qb=0;w(vc)?(wb=!0,wd=W.createStream(34962,vc),ac=wd.dtype):(wd=W.getBuffer(vc))?ac=wd.dtype:"constant"in vc?(sd=2,"number"===typeof vc.constant?(Ga=vc.constant,Yb=nb=Qb=0):(Ga=0<vc.constant.length?vc.constant[0]:0,Yb=1<vc.constant.length?vc.constant[1]:0,nb=2<vc.constant.length?vc.constant[2]:0,Qb=3<vc.constant.length?vc.constant[3]:0)):(wd=w(vc.buffer)?W.createStream(34962,vc.buffer):W.getBuffer(vc.buffer),ac="type"in vc?Zd[vc.type]:wd.dtype,
ud=!!vc.normalized,ld=vc.size|0,Mc=vc.offset|0,Wb=vc.stride|0,sc=vc.divisor|0);xb=td.location;Nb=wc[xb];if(1===sd){Nb.buffer||C.enableVertexAttribArray(xb);Rb=ld||1;if(Nb.type!==ac||Nb.size!==Rb||Nb.buffer!==wd||Nb.normalized!==ud||Nb.offset!==Mc||Nb.stride!==Wb)C.bindBuffer(34962,wd.buffer),C.vertexAttribPointer(xb,Rb,ac,ud,Wb,Mc),Nb.type=ac,Nb.size=Rb,Nb.buffer=wd,Nb.normalized=ud,Nb.offset=Mc,Nb.stride=Wb;Nb.divisor!==sc&&(f.vertexAttribDivisorANGLE(xb,sc),Nb.divisor=sc)}else if(Nb.buffer&&(C.disableVertexAttribArray(xb),
Nb.buffer=null),Nb.x!==Ga||Nb.y!==Yb||Nb.z!==nb||Nb.w!==Qb)C.vertexAttrib4f(xb,Ga,Yb,nb,Qb),Nb.x=Ga,Nb.y=Yb,Nb.z=nb,Nb.w=Qb;gc=Qa.call(this,B,h,g);ic=!1;xd=null;Bc=0;Cc=!1;Nc=Ec=0;Yc=1;Sc=0;Oc=5126;Hc=Pc=Fb=Kb=0;w(gc)?(ic=!0,xd=W.createStream(34962,gc),Oc=xd.dtype):(xd=W.getBuffer(gc))?Oc=xd.dtype:"constant"in gc?(Yc=2,"number"===typeof gc.constant?(Fb=gc.constant,Pc=Hc=Kb=0):(Fb=0<gc.constant.length?gc.constant[0]:0,Pc=1<gc.constant.length?gc.constant[1]:0,Hc=2<gc.constant.length?gc.constant[2]:
0,Kb=3<gc.constant.length?gc.constant[3]:0)):(xd=w(gc.buffer)?W.createStream(34962,gc.buffer):W.getBuffer(gc.buffer),Oc="type"in gc?Zd[gc.type]:xd.dtype,Cc=!!gc.normalized,Nc=gc.size|0,Ec=gc.offset|0,Sc=gc.stride|0,Bc=gc.divisor|0);Tc=ob.location;hc=wc[Tc];if(1===Yc){hc.buffer||C.enableVertexAttribArray(Tc);Vc=Nc||1;if(hc.type!==Oc||hc.size!==Vc||hc.buffer!==xd||hc.normalized!==Cc||hc.offset!==Ec||hc.stride!==Sc)C.bindBuffer(34962,xd.buffer),C.vertexAttribPointer(Tc,Vc,Oc,Cc,Sc,Ec),hc.type=Oc,hc.size=
Vc,hc.buffer=xd,hc.normalized=Cc,hc.offset=Ec,hc.stride=Sc;hc.divisor!==Bc&&(f.vertexAttribDivisorANGLE(Tc,Bc),hc.divisor=Bc)}else if(hc.buffer&&(C.disableVertexAttribArray(Tc),hc.buffer=null),hc.x!==Fb||hc.y!==Pc||hc.z!==Hc||hc.w!==Kb)C.vertexAttrib4f(Tc,Fb,Pc,Hc,Kb),hc.x=Fb,hc.y=Pc,hc.z=Hc,hc.w=Kb;nd=Y.call(this,B,h,g);gd=!1;oe=null;Wc=0;ne=!1;we=Ld=0;xe=1;Ud=0;Jd=5126;od=Fc=bd=Gd=0;w(nd)?(gd=!0,oe=W.createStream(34962,nd),Jd=oe.dtype):(oe=W.getBuffer(nd))?Jd=oe.dtype:"constant"in nd?(xe=2,"number"===
typeof nd.constant?(bd=nd.constant,Fc=od=Gd=0):(bd=0<nd.constant.length?nd.constant[0]:0,Fc=1<nd.constant.length?nd.constant[1]:0,od=2<nd.constant.length?nd.constant[2]:0,Gd=3<nd.constant.length?nd.constant[3]:0)):(oe=w(nd.buffer)?W.createStream(34962,nd.buffer):W.getBuffer(nd.buffer),Jd="type"in nd?Zd[nd.type]:oe.dtype,ne=!!nd.normalized,we=nd.size|0,Ld=nd.offset|0,Ud=nd.stride|0,Wc=nd.divisor|0);hd=$a.location;ad=wc[hd];if(1===xe){ad.buffer||C.enableVertexAttribArray(hd);pd=we||1;if(ad.type!==Jd||
ad.size!==pd||ad.buffer!==oe||ad.normalized!==ne||ad.offset!==Ld||ad.stride!==Ud)C.bindBuffer(34962,oe.buffer),C.vertexAttribPointer(hd,pd,Jd,ne,Ud,Ld),ad.type=Jd,ad.size=pd,ad.buffer=oe,ad.normalized=ne,ad.offset=Ld,ad.stride=Ud;ad.divisor!==Wc&&(f.vertexAttribDivisorANGLE(hd,Wc),ad.divisor=Wc)}else if(ad.buffer&&(C.disableVertexAttribArray(hd),ad.buffer=null),ad.x!==bd||ad.y!==Fc||ad.z!==od||ad.w!==Gd)C.vertexAttrib4f(hd,bd,Fc,od,Gd),ad.x=bd,ad.y=Fc,ad.z=od,ad.w=Gd;yd=O.call(this,B,h,g);zd=!1;ye=
null;te=0;Id=!1;de=ee=0;be=1;ue=0;$d=5126;pe=Uc=zc=he=0;w(yd)?(zd=!0,ye=W.createStream(34962,yd),$d=ye.dtype):(ye=W.getBuffer(yd))?$d=ye.dtype:"constant"in yd?(be=2,"number"===typeof yd.constant?(zc=yd.constant,Uc=pe=he=0):(zc=0<yd.constant.length?yd.constant[0]:0,Uc=1<yd.constant.length?yd.constant[1]:0,pe=2<yd.constant.length?yd.constant[2]:0,he=3<yd.constant.length?yd.constant[3]:0)):(ye=w(yd.buffer)?W.createStream(34962,yd.buffer):W.getBuffer(yd.buffer),$d="type"in yd?Zd[yd.type]:ye.dtype,Id=
!!yd.normalized,de=yd.size|0,ee=yd.offset|0,ue=yd.stride|0,te=yd.divisor|0);ke=P.location;Hd=wc[ke];if(1===be){Hd.buffer||C.enableVertexAttribArray(ke);Md=de||4;if(Hd.type!==$d||Hd.size!==Md||Hd.buffer!==ye||Hd.normalized!==Id||Hd.offset!==ee||Hd.stride!==ue)C.bindBuffer(34962,ye.buffer),C.vertexAttribPointer(ke,Md,$d,Id,ue,ee),Hd.type=$d,Hd.size=Md,Hd.buffer=ye,Hd.normalized=Id,Hd.offset=ee,Hd.stride=ue;Hd.divisor!==te&&(f.vertexAttribDivisorANGLE(ke,te),Hd.divisor=te)}else if(Hd.buffer&&(C.disableVertexAttribArray(ke),
Hd.buffer=null),Hd.x!==zc||Hd.y!==Uc||Hd.z!==pe||Hd.w!==he)C.vertexAttrib4f(ke,zc,Uc,pe,he),Hd.x=zc,Hd.y=Uc,Hd.z=pe,Hd.w=he;Nd=M.call(this,B,h,g);Od=!1;ie=null;Ce=0;ze=!1;Oe=me=0;Pe=1;Le=0;qe=5126;Ie=He=Ge=De=0;w(Nd)?(Od=!0,ie=W.createStream(34962,Nd),qe=ie.dtype):(ie=W.getBuffer(Nd))?qe=ie.dtype:"constant"in Nd?(Pe=2,"number"===typeof Nd.constant?(Ge=Nd.constant,He=Ie=De=0):(Ge=0<Nd.constant.length?Nd.constant[0]:0,He=1<Nd.constant.length?Nd.constant[1]:0,Ie=2<Nd.constant.length?Nd.constant[2]:0,
De=3<Nd.constant.length?Nd.constant[3]:0)):(ie=w(Nd.buffer)?W.createStream(34962,Nd.buffer):W.getBuffer(Nd.buffer),qe="type"in Nd?Zd[Nd.type]:ie.dtype,ze=!!Nd.normalized,Oe=Nd.size|0,me=Nd.offset|0,Le=Nd.stride|0,Ce=Nd.divisor|0);Ee=Ob.location;Kd=wc[Ee];if(1===Pe){Kd.buffer||C.enableVertexAttribArray(Ee);Rd=Oe||4;if(Kd.type!==qe||Kd.size!==Rd||Kd.buffer!==ie||Kd.normalized!==ze||Kd.offset!==me||Kd.stride!==Le)C.bindBuffer(34962,ie.buffer),C.vertexAttribPointer(Ee,Rd,qe,ze,Le,me),Kd.type=qe,Kd.size=
Rd,Kd.buffer=ie,Kd.normalized=ze,Kd.offset=me,Kd.stride=Le;Kd.divisor!==Ce&&(f.vertexAttribDivisorANGLE(Ee,Ce),Kd.divisor=Ce)}else if(Kd.buffer&&(C.disableVertexAttribArray(Ee),Kd.buffer=null),Kd.x!==Ge||Kd.y!==He||Kd.z!==Ie||Kd.w!==De)C.vertexAttrib4f(Ee,Ge,He,Ie,De),Kd.x=Ge,Kd.y=He,Kd.z=Ie,Kd.w=De;Yd=R.call(this,B,h,g);ae=!1;Je=null;Cd=0;Pd=!1;Ke=Ae=0;pf=1;Xe=0;Qe=5126;Re=Ue=We=Me=0;w(Yd)?(ae=!0,Je=W.createStream(34962,Yd),Qe=Je.dtype):(Je=W.getBuffer(Yd))?Qe=Je.dtype:"constant"in Yd?(pf=2,"number"===
typeof Yd.constant?(We=Yd.constant,Ue=Re=Me=0):(We=0<Yd.constant.length?Yd.constant[0]:0,Ue=1<Yd.constant.length?Yd.constant[1]:0,Re=2<Yd.constant.length?Yd.constant[2]:0,Me=3<Yd.constant.length?Yd.constant[3]:0)):(Je=w(Yd.buffer)?W.createStream(34962,Yd.buffer):W.getBuffer(Yd.buffer),Qe="type"in Yd?Zd[Yd.type]:Je.dtype,Pd=!!Yd.normalized,Ke=Yd.size|0,Ae=Yd.offset|0,Xe=Yd.stride|0,Cd=Yd.divisor|0);Se=la.location;Qd=wc[Se];if(1===pf){Qd.buffer||C.enableVertexAttribArray(Se);Vd=Ke||1;if(Qd.type!==Qe||
Qd.size!==Vd||Qd.buffer!==Je||Qd.normalized!==Pd||Qd.offset!==Ae||Qd.stride!==Xe)C.bindBuffer(34962,Je.buffer),C.vertexAttribPointer(Se,Vd,Qe,Pd,Xe,Ae),Qd.type=Qe,Qd.size=Vd,Qd.buffer=Je,Qd.normalized=Pd,Qd.offset=Ae,Qd.stride=Xe;Qd.divisor!==Cd&&(f.vertexAttribDivisorANGLE(Se,Cd),Qd.divisor=Cd)}else if(Qd.buffer&&(C.disableVertexAttribArray(Se),Qd.buffer=null),Qd.x!==We||Qd.y!==Ue||Qd.z!==Re||Qd.w!==Me)C.vertexAttrib4f(Se,We,Ue,Re,Me),Qd.x=We,Qd.y=Ue,Qd.z=Re,Qd.w=Me;Te=B.pixelRatio;g&&ef===Te||(ef=
Te,C.uniform1f(Hb.location,Te));lf=J.call(this,B,h,g);bf=lf[0];gf=lf[1];g&&ff===bf&&hf===gf||(ff=bf,hf=gf,C.uniform2f(Ea.location,bf,gf));qf=h.scale;mf=qf[0];Bf=qf[1];g&&rf===mf&&Cf===Bf||(rf=mf,Cf=Bf,C.uniform2f(Ha.location,mf,Bf));Ne=h.scaleFract;Be=Ne[0];of=Ne[1];g&&nf===Be&&Df===of||(nf=Be,Df=of,C.uniform2f(U.location,Be,of));Gf=h.translate;Af=Gf[0];Ff=Gf[1];g&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,C.uniform2f(ea.location,Af,Ff));xf=h.translateFract;vf=xf[0];zf=xf[1];g&&yf===vf&&If===zf||(yf=vf,If=zf,
C.uniform2f(va.location,vf,zf));Jf=h.opacity;g&&Kf===Jf||(Kf=Jf,C.uniform1f(fa.location,Jf));Lf=h.elements;sf=null;(sf=(Qf=w(Lf))?Lb.createStream(Lf):Lb.getElements(Lf))&&C.bindBuffer(34963,sf.buffer.buffer);Hf=h.offset;if(tf=h.count)0<db?sf?f.drawElementsInstancedANGLE(0,tf,sf.type,Hf<<(sf.type-5121>>1),db):f.drawArraysInstancedANGLE(0,Hf,tf,db):0>db&&(sf?C.drawElements(0,tf,sf.type,Hf<<(sf.type-5121>>1)):C.drawArrays(0,Hf,tf)),B.viewportWidth=fd,B.viewportHeight=Ub,Ib&&W.destroyStream(cd),zb&&W.destroyStream(Ra),
Xa&&W.destroyStream(Ya),wb&&W.destroyStream(wd),ic&&W.destroyStream(xd),gd&&W.destroyStream(oe),zd&&W.destroyStream(ye),Od&&W.destroyStream(ie),ae&&W.destroyStream(Je),Qf&&Lb.destroyStream(sf)}sa.unbind();ka.dirty=!0;ha.setVAO(null);d&&(z.cpuTime+=performance.now()-e)},draw:function(a){var c,e,f,h,l,n,q,y,A,D,F,J,L,M,O,H,I,R,Q,T,V,X,Y,ca,ga,aa,ua,ra,oa,qa,sa,ma,Ka,La,Qa,Wa,wa,cb,hb,Sa,Gb,db,ec,Sb,kc,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,
ya,xd,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,ne,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Id,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe;c=Zc.next;c!==Zc.cur&&(c?C.bindFramebuffer(36160,c.framebuffer):C.bindFramebuffer(36160,null),Zc.cur=c);if(ka.dirty){var Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,
Qd,Vd,Te,ef,lf,bf,ff,gf,hf;Pe=ia.dither;Pe!==ka.dither&&(Pe?C.enable(3024):C.disable(3024),ka.dither=Pe);Le=m[0];qe=m[1];if(Le!==Z[0]||qe!==Z[1])C.blendEquationSeparate(Le,qe),Z[0]=Le,Z[1]=qe;De=ia.depth_func;De!==ka.depth_func&&(C.depthFunc(De),ka.depth_func=De);Ge=tc[0];He=tc[1];if(Ge!==S[0]||He!==S[1])C.depthRange(Ge,He),S[0]=Ge,S[1]=He;Ie=ia.depth_mask;Ie!==ka.depth_mask&&(C.depthMask(Ie),ka.depth_mask=Ie);Ee=pa[0];Kd=pa[1];Rd=pa[2];Yd=pa[3];if(Ee!==k[0]||Kd!==k[1]||Rd!==k[2]||Yd!==k[3])C.colorMask(Ee,
Kd,Rd,Yd),k[0]=Ee,k[1]=Kd,k[2]=Rd,k[3]=Yd;ae=ia.cull_enable;ae!==ka.cull_enable&&(ae?C.enable(2884):C.disable(2884),ka.cull_enable=ae);Je=ia.cull_face;Je!==ka.cull_face&&(C.cullFace(Je),ka.cull_face=Je);Cd=ia.frontFace;Cd!==ka.frontFace&&(C.frontFace(Cd),ka.frontFace=Cd);Pd=ia.lineWidth;Pd!==ka.lineWidth&&(C.lineWidth(Pd),ka.lineWidth=Pd);Ae=ia.polygonOffset_enable;Ae!==ka.polygonOffset_enable&&(Ae?C.enable(32823):C.disable(32823),ka.polygonOffset_enable=Ae);Ke=p[0];pf=p[1];if(Ke!==Bb[0]||pf!==Bb[1])C.polygonOffset(Ke,
pf),Bb[0]=Ke,Bb[1]=pf;Xe=ia.sample_alpha;Xe!==ka.sample_alpha&&(Xe?C.enable(32926):C.disable(32926),ka.sample_alpha=Xe);Qe=ia.sample_enable;Qe!==ka.sample_enable&&(Qe?C.enable(32928):C.disable(32928),ka.sample_enable=Qe);Me=yb[0];We=yb[1];if(Me!==jf[0]||We!==jf[1])C.sampleCoverage(Me,We),jf[0]=Me,jf[1]=We;Ue=ia.stencil_mask;Ue!==ka.stencil_mask&&(C.stencilMask(Ue),ka.stencil_mask=Ue);Re=je[0];Se=je[1];Qd=je[2];if(Re!==Ed[0]||Se!==Ed[1]||Qd!==Ed[2])C.stencilFunc(Re,Se,Qd),Ed[0]=Re,Ed[1]=Se,Ed[2]=Qd;
Vd=fe[0];Te=fe[1];ef=fe[2];lf=fe[3];if(Vd!==se[0]||Te!==se[1]||ef!==se[2]||lf!==se[3])C.stencilOpSeparate(Vd,Te,ef,lf),se[0]=Vd,se[1]=Te,se[2]=ef,se[3]=lf;bf=re[0];ff=re[1];gf=re[2];hf=re[3];if(bf!==qd[0]||ff!==qd[1]||gf!==qd[2]||hf!==qd[3])C.stencilOpSeparate(bf,ff,gf,hf),qd[0]=bf,qd[1]=ff,qd[2]=gf,qd[3]=hf}e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:B.framebufferWidth-f;n="height"in e?e.height|0:B.framebufferHeight-h;q=B.viewportWidth;B.viewportWidth=l;y=B.viewportHeight;B.viewportHeight=
n;C.viewport(f,h,l,n);Dd[0]=f;Dd[1]=h;Dd[2]=l;Dd[3]=n;C.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;C.enable(3042);ka.blend_enable=!0;C.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;C.disable(2929);ka.depth_enable=!1;A=a.viewport;D=A.x|0;F=A.y|0;J="width"in A?A.width|0:B.framebufferWidth-D;L="height"in A?A.height|0:B.framebufferHeight-F;C.scissor(D,F,J,L);ve[0]=D;ve[1]=F;ve[2]=J;ve[3]=L;C.enable(3089);ka.scissor_enable=!0;C.disable(2960);ka.stencil_enable=!1;if(M=ka.profile)O=
performance.now(),z.count++;C.useProgram(r.program);H=jc.angle_instanced_arrays;ha.setVAO(null);I=N.call(this,B,a,0);R=!1;Q=null;T=0;V=!1;Y=X=0;ca=1;ga=0;aa=5126;qa=oa=ra=ua=0;w(I)?(R=!0,Q=W.createStream(34962,I),aa=Q.dtype):(Q=W.getBuffer(I))?aa=Q.dtype:"constant"in I?(ca=2,"number"===typeof I.constant?(ra=I.constant,oa=qa=ua=0):(ra=0<I.constant.length?I.constant[0]:0,oa=1<I.constant.length?I.constant[1]:0,qa=2<I.constant.length?I.constant[2]:0,ua=3<I.constant.length?I.constant[3]:0)):(Q=w(I.buffer)?
W.createStream(34962,I.buffer):W.getBuffer(I.buffer),aa="type"in I?Zd[I.type]:Q.dtype,V=!!I.normalized,Y=I.size|0,X=I.offset|0,ga=I.stride|0,T=I.divisor|0);sa=bc.location;ma=wc[sa];if(1===ca){ma.buffer||C.enableVertexAttribArray(sa);Ka=Y||1;if(ma.type!==aa||ma.size!==Ka||ma.buffer!==Q||ma.normalized!==V||ma.offset!==X||ma.stride!==ga)C.bindBuffer(34962,Q.buffer),C.vertexAttribPointer(sa,Ka,aa,V,ga,X),ma.type=aa,ma.size=Ka,ma.buffer=Q,ma.normalized=V,ma.offset=X,ma.stride=ga;ma.divisor!==T&&(H.vertexAttribDivisorANGLE(sa,
T),ma.divisor=T)}else if(ma.buffer&&(C.disableVertexAttribArray(sa),ma.buffer=null),ma.x!==ra||ma.y!==oa||ma.z!==qa||ma.w!==ua)C.vertexAttrib4f(sa,ra,oa,qa,ua),ma.x=ra,ma.y=oa,ma.z=qa,ma.w=ua;La=g.call(this,B,a,0);Qa=!1;Wa=null;wa=0;cb=!1;Sa=hb=0;Gb=1;db=0;ec=5126;Tb=Zb=kc=Sb=0;w(La)?(Qa=!0,Wa=W.createStream(34962,La),ec=Wa.dtype):(Wa=W.getBuffer(La))?ec=Wa.dtype:"constant"in La?(Gb=2,"number"===typeof La.constant?(kc=La.constant,Zb=Tb=Sb=0):(kc=0<La.constant.length?La.constant[0]:0,Zb=1<La.constant.length?
La.constant[1]:0,Tb=2<La.constant.length?La.constant[2]:0,Sb=3<La.constant.length?La.constant[3]:0)):(Wa=w(La.buffer)?W.createStream(34962,La.buffer):W.getBuffer(La.buffer),ec="type"in La?Zd[La.type]:Wa.dtype,cb=!!La.normalized,Sa=La.size|0,hb=La.offset|0,db=La.stride|0,wa=La.divisor|0);fd=Qc.location;Ub=wc[fd];if(1===Gb){Ub.buffer||C.enableVertexAttribArray(fd);Ma=Sa||1;if(Ub.type!==ec||Ub.size!==Ma||Ub.buffer!==Wa||Ub.normalized!==cb||Ub.offset!==hb||Ub.stride!==db)C.bindBuffer(34962,Wa.buffer),
C.vertexAttribPointer(fd,Ma,ec,cb,db,hb),Ub.type=ec,Ub.size=Ma,Ub.buffer=Wa,Ub.normalized=cb,Ub.offset=hb,Ub.stride=db;Ub.divisor!==wa&&(H.vertexAttribDivisorANGLE(fd,wa),Ub.divisor=wa)}else if(Ub.buffer&&(C.disableVertexAttribArray(fd),Ub.buffer=null),Ub.x!==kc||Ub.y!==Zb||Ub.z!==Tb||Ub.w!==Sb)C.vertexAttrib4f(fd,kc,Zb,Tb,Sb),Ub.x=kc,Ub.y=Zb,Ub.z=Tb,Ub.w=Sb;pb=b.call(this,B,a,0);ub=!1;ib=null;Oa=0;Dc=!1;cd=Ib=0;eb=1;lc=0;dd=5126;ta=lb=kb=dc=0;w(pb)?(ub=!0,ib=W.createStream(34962,pb),dd=ib.dtype):
(ib=W.getBuffer(pb))?dd=ib.dtype:"constant"in pb?(eb=2,"number"===typeof pb.constant?(kb=pb.constant,lb=ta=dc=0):(kb=0<pb.constant.length?pb.constant[0]:0,lb=1<pb.constant.length?pb.constant[1]:0,ta=2<pb.constant.length?pb.constant[2]:0,dc=3<pb.constant.length?pb.constant[3]:0)):(ib=w(pb.buffer)?W.createStream(34962,pb.buffer):W.getBuffer(pb.buffer),dd="type"in pb?Zd[pb.type]:ib.dtype,Dc=!!pb.normalized,cd=pb.size|0,Ib=pb.offset|0,lc=pb.stride|0,Oa=pb.divisor|0);qb=cc.location;xa=wc[qb];if(1===eb){xa.buffer||
C.enableVertexAttribArray(qb);Ua=cd||1;if(xa.type!==dd||xa.size!==Ua||xa.buffer!==ib||xa.normalized!==Dc||xa.offset!==Ib||xa.stride!==lc)C.bindBuffer(34962,ib.buffer),C.vertexAttribPointer(qb,Ua,dd,Dc,lc,Ib),xa.type=dd,xa.size=Ua,xa.buffer=ib,xa.normalized=Dc,xa.offset=Ib,xa.stride=lc;xa.divisor!==Oa&&(H.vertexAttribDivisorANGLE(qb,Oa),xa.divisor=Oa)}else if(xa.buffer&&(C.disableVertexAttribArray(qb),xa.buffer=null),xa.x!==kb||xa.y!==lb||xa.z!==ta||xa.w!==dc)C.vertexAttrib4f(qb,kb,lb,ta,dc),xa.x=
kb,xa.y=lb,xa.z=ta,xa.w=dc;bb=x.call(this,B,a,0);Aa=!1;fb=null;Ia=0;Ab=!1;Ra=zb=0;Kc=1;Jb=0;Za=5126;Ja=xd=ya=Vb=0;w(bb)?(Aa=!0,fb=W.createStream(34962,bb),Za=fb.dtype):(fb=W.getBuffer(bb))?Za=fb.dtype:"constant"in bb?(Kc=2,"number"===typeof bb.constant?(ya=bb.constant,xd=Ja=Vb=0):(ya=0<bb.constant.length?bb.constant[0]:0,xd=1<bb.constant.length?bb.constant[1]:0,Ja=2<bb.constant.length?bb.constant[2]:0,Vb=3<bb.constant.length?bb.constant[3]:0)):(fb=w(bb.buffer)?W.createStream(34962,bb.buffer):W.getBuffer(bb.buffer),
Za="type"in bb?Zd[bb.type]:fb.dtype,Ab=!!bb.normalized,Ra=bb.size|0,zb=bb.offset|0,Jb=bb.stride|0,Ia=bb.divisor|0);Pb=td.location;gb=wc[Pb];if(1===Kc){gb.buffer||C.enableVertexAttribArray(Pb);jb=Ra||1;if(gb.type!==Za||gb.size!==jb||gb.buffer!==fb||gb.normalized!==Ab||gb.offset!==zb||gb.stride!==Jb)C.bindBuffer(34962,fb.buffer),C.vertexAttribPointer(Pb,jb,Za,Ab,Jb,zb),gb.type=Za,gb.size=jb,gb.buffer=fb,gb.normalized=Ab,gb.offset=zb,gb.stride=Jb;gb.divisor!==Ia&&(H.vertexAttribDivisorANGLE(Pb,Ia),gb.divisor=
Ia)}else if(gb.buffer&&(C.disableVertexAttribArray(Pb),gb.buffer=null),gb.x!==ya||gb.y!==xd||gb.z!==Ja||gb.w!==Vb)C.vertexAttrib4f(Pb,ya,xd,Ja,Vb),gb.x=ya,gb.y=xd,gb.z=Ja,gb.w=Vb;za=d.call(this,B,a,0);fc=!1;Da=null;rb=0;sb=!1;Ya=Xa=0;mc=1;xc=0;uc=5126;Fa=Xc=Mb=Va=0;w(za)?(fc=!0,Da=W.createStream(34962,za),uc=Da.dtype):(Da=W.getBuffer(za))?uc=Da.dtype:"constant"in za?(mc=2,"number"===typeof za.constant?(Mb=za.constant,Xc=Fa=Va=0):(Mb=0<za.constant.length?za.constant[0]:0,Xc=1<za.constant.length?za.constant[1]:
0,Fa=2<za.constant.length?za.constant[2]:0,Va=3<za.constant.length?za.constant[3]:0)):(Da=w(za.buffer)?W.createStream(34962,za.buffer):W.getBuffer(za.buffer),uc="type"in za?Zd[za.type]:Da.dtype,sb=!!za.normalized,Ya=za.size|0,Xa=za.offset|0,xc=za.stride|0,rb=za.divisor|0);yc=ob.location;Pa=wc[yc];if(1===mc){Pa.buffer||C.enableVertexAttribArray(yc);Ba=Ya||1;if(Pa.type!==uc||Pa.size!==Ba||Pa.buffer!==Da||Pa.normalized!==sb||Pa.offset!==Xa||Pa.stride!==xc)C.bindBuffer(34962,Da.buffer),C.vertexAttribPointer(yc,
Ba,uc,sb,xc,Xa),Pa.type=uc,Pa.size=Ba,Pa.buffer=Da,Pa.normalized=sb,Pa.offset=Xa,Pa.stride=xc;Pa.divisor!==rb&&(H.vertexAttribDivisorANGLE(yc,rb),Pa.divisor=rb)}else if(Pa.buffer&&(C.disableVertexAttribArray(yc),Pa.buffer=null),Pa.x!==Mb||Pa.y!==Xc||Pa.z!==Fa||Pa.w!==Va)C.vertexAttrib4f(yc,Mb,Xc,Fa,Va),Pa.x=Mb,Pa.y=Xc,Pa.z=Fa,Pa.w=Va;mb=v.call(this,B,a,0);vb=!1;Cb=null;tb=0;vc=!1;wd=wb=0;sc=1;ud=0;Mc=5126;ac=Wb=sd=ld=0;w(mb)?(vb=!0,Cb=W.createStream(34962,mb),Mc=Cb.dtype):(Cb=W.getBuffer(mb))?Mc=
Cb.dtype:"constant"in mb?(sc=2,"number"===typeof mb.constant?(sd=mb.constant,Wb=ac=ld=0):(sd=0<mb.constant.length?mb.constant[0]:0,Wb=1<mb.constant.length?mb.constant[1]:0,ac=2<mb.constant.length?mb.constant[2]:0,ld=3<mb.constant.length?mb.constant[3]:0)):(Cb=w(mb.buffer)?W.createStream(34962,mb.buffer):W.getBuffer(mb.buffer),Mc="type"in mb?Zd[mb.type]:Cb.dtype,vc=!!mb.normalized,wd=mb.size|0,wb=mb.offset|0,ud=mb.stride|0,tb=mb.divisor|0);Qb=$a.location;Ga=wc[Qb];if(1===sc){Ga.buffer||C.enableVertexAttribArray(Qb);
Yb=wd||1;if(Ga.type!==Mc||Ga.size!==Yb||Ga.buffer!==Cb||Ga.normalized!==vc||Ga.offset!==wb||Ga.stride!==ud)C.bindBuffer(34962,Cb.buffer),C.vertexAttribPointer(Qb,Yb,Mc,vc,ud,wb),Ga.type=Mc,Ga.size=Yb,Ga.buffer=Cb,Ga.normalized=vc,Ga.offset=wb,Ga.stride=ud;Ga.divisor!==tb&&(H.vertexAttribDivisorANGLE(Qb,tb),Ga.divisor=tb)}else if(Ga.buffer&&(C.disableVertexAttribArray(Qb),Ga.buffer=null),Ga.x!==sd||Ga.y!==Wb||Ga.z!==ac||Ga.w!==ld)C.vertexAttrib4f(Qb,sd,Wb,ac,ld),Ga.x=sd,Ga.y=Wb,Ga.z=ac,Ga.w=ld;nb=
na.call(this,B,a,0);xb=!1;Nb=null;Rb=0;gc=!1;ne=ic=0;Bc=1;Cc=0;Ec=5126;Oc=Sc=Yc=Nc=0;w(nb)?(xb=!0,Nb=W.createStream(34962,nb),Ec=Nb.dtype):(Nb=W.getBuffer(nb))?Ec=Nb.dtype:"constant"in nb?(Bc=2,"number"===typeof nb.constant?(Yc=nb.constant,Sc=Oc=Nc=0):(Yc=0<nb.constant.length?nb.constant[0]:0,Sc=1<nb.constant.length?nb.constant[1]:0,Oc=2<nb.constant.length?nb.constant[2]:0,Nc=3<nb.constant.length?nb.constant[3]:0)):(Nb=w(nb.buffer)?W.createStream(34962,nb.buffer):W.getBuffer(nb.buffer),Ec="type"in
nb?Zd[nb.type]:Nb.dtype,gc=!!nb.normalized,ne=nb.size|0,ic=nb.offset|0,Cc=nb.stride|0,Rb=nb.divisor|0);Kb=P.location;Fb=wc[Kb];if(1===Bc){Fb.buffer||C.enableVertexAttribArray(Kb);Pc=ne||4;if(Fb.type!==Ec||Fb.size!==Pc||Fb.buffer!==Nb||Fb.normalized!==gc||Fb.offset!==ic||Fb.stride!==Cc)C.bindBuffer(34962,Nb.buffer),C.vertexAttribPointer(Kb,Pc,Ec,gc,Cc,ic),Fb.type=Ec,Fb.size=Pc,Fb.buffer=Nb,Fb.normalized=gc,Fb.offset=ic,Fb.stride=Cc;Fb.divisor!==Rb&&(H.vertexAttribDivisorANGLE(Kb,Rb),Fb.divisor=Rb)}else if(Fb.buffer&&
(C.disableVertexAttribArray(Kb),Fb.buffer=null),Fb.x!==Yc||Fb.y!==Sc||Fb.z!==Oc||Fb.w!==Nc)C.vertexAttrib4f(Kb,Yc,Sc,Oc,Nc),Fb.x=Yc,Fb.y=Sc,Fb.z=Oc,Fb.w=Nc;Hc=da.call(this,B,a,0);Tc=!1;hc=null;Vc=0;nd=!1;oe=gd=0;Wc=1;Id=0;Ld=5126;Jd=Ud=xe=we=0;w(Hc)?(Tc=!0,hc=W.createStream(34962,Hc),Ld=hc.dtype):(hc=W.getBuffer(Hc))?Ld=hc.dtype:"constant"in Hc?(Wc=2,"number"===typeof Hc.constant?(xe=Hc.constant,Ud=Jd=we=0):(xe=0<Hc.constant.length?Hc.constant[0]:0,Ud=1<Hc.constant.length?Hc.constant[1]:0,Jd=2<Hc.constant.length?
Hc.constant[2]:0,we=3<Hc.constant.length?Hc.constant[3]:0)):(hc=w(Hc.buffer)?W.createStream(34962,Hc.buffer):W.getBuffer(Hc.buffer),Ld="type"in Hc?Zd[Hc.type]:hc.dtype,nd=!!Hc.normalized,oe=Hc.size|0,gd=Hc.offset|0,Id=Hc.stride|0,Vc=Hc.divisor|0);Gd=Ob.location;bd=wc[Gd];if(1===Wc){bd.buffer||C.enableVertexAttribArray(Gd);Fc=oe||4;if(bd.type!==Ld||bd.size!==Fc||bd.buffer!==hc||bd.normalized!==nd||bd.offset!==gd||bd.stride!==Id)C.bindBuffer(34962,hc.buffer),C.vertexAttribPointer(Gd,Fc,Ld,nd,Id,gd),
bd.type=Ld,bd.size=Fc,bd.buffer=hc,bd.normalized=nd,bd.offset=gd,bd.stride=Id;bd.divisor!==Vc&&(H.vertexAttribDivisorANGLE(Gd,Vc),bd.divisor=Vc)}else if(bd.buffer&&(C.disableVertexAttribArray(Gd),bd.buffer=null),bd.x!==xe||bd.y!==Ud||bd.z!==Jd||bd.w!==we)C.vertexAttrib4f(Gd,xe,Ud,Jd,we),bd.x=xe,bd.y=Ud,bd.z=Jd,bd.w=we;od=K.call(this,B,a,0);hd=!1;ad=null;pd=0;yd=!1;ye=zd=0;te=1;uf=0;ee=5126;$d=ue=be=de=0;w(od)?(hd=!0,ad=W.createStream(34962,od),ee=ad.dtype):(ad=W.getBuffer(od))?ee=ad.dtype:"constant"in
od?(te=2,"number"===typeof od.constant?(be=od.constant,ue=$d=de=0):(be=0<od.constant.length?od.constant[0]:0,ue=1<od.constant.length?od.constant[1]:0,$d=2<od.constant.length?od.constant[2]:0,de=3<od.constant.length?od.constant[3]:0)):(ad=w(od.buffer)?W.createStream(34962,od.buffer):W.getBuffer(od.buffer),ee="type"in od?Zd[od.type]:ad.dtype,yd=!!od.normalized,ye=od.size|0,zd=od.offset|0,uf=od.stride|0,pd=od.divisor|0);he=la.location;zc=wc[he];if(1===te){zc.buffer||C.enableVertexAttribArray(he);Uc=
ye||1;if(zc.type!==ee||zc.size!==Uc||zc.buffer!==ad||zc.normalized!==yd||zc.offset!==zd||zc.stride!==uf)C.bindBuffer(34962,ad.buffer),C.vertexAttribPointer(he,Uc,ee,yd,uf,zd),zc.type=ee,zc.size=Uc,zc.buffer=ad,zc.normalized=yd,zc.offset=zd,zc.stride=uf;zc.divisor!==pd&&(H.vertexAttribDivisorANGLE(he,pd),zc.divisor=pd)}else if(zc.buffer&&(C.disableVertexAttribArray(he),zc.buffer=null),zc.x!==be||zc.y!==ue||zc.z!==$d||zc.w!==de)C.vertexAttrib4f(he,be,ue,$d,de),zc.x=be,zc.y=ue,zc.z=$d,zc.w=de;C.uniform1i(t.location,
!1);C.uniform1f(Hb.location,B.pixelRatio);pe=E.call(this,B,a,0);C.uniform2f(Ea.location,pe[0],pe[1]);ke=a.scale;C.uniform2f(Ha.location,ke[0],ke[1]);Hd=a.scaleFract;C.uniform2f(U.location,Hd[0],Hd[1]);Md=a.translate;C.uniform2f(ea.location,Md[0],Md[1]);Nd=a.translateFract;C.uniform2f(va.location,Nd[0],Nd[1]);C.uniform1f(fa.location,a.opacity);C.uniform1i(Na.location,u.bind());Od=a.elements;ie=null;(ie=(Ce=w(Od))?Lb.createStream(Od):Lb.getElements(Od))&&C.bindBuffer(34963,ie.buffer.buffer);ze=a.offset;
if(me=a.count)Oe=Ca.instances,0<Oe?ie?H.drawElementsInstancedANGLE(0,me,ie.type,ze<<(ie.type-5121>>1),Oe):H.drawArraysInstancedANGLE(0,ze,me,Oe):0>Oe&&(ie?C.drawElements(0,me,ie.type,ze<<(ie.type-5121>>1)):C.drawArrays(0,ze,me)),ka.dirty=!0,ha.setVAO(null),B.viewportWidth=q,B.viewportHeight=y,M&&(z.cpuTime+=performance.now()-O),R&&W.destroyStream(Q),Qa&&W.destroyStream(Wa),ub&&W.destroyStream(ib),Aa&&W.destroyStream(fb),fc&&W.destroyStream(Da),vb&&W.destroyStream(Cb),xb&&W.destroyStream(Nb),Tc&&W.destroyStream(hc),
hd&&W.destroyStream(ad),u.unbind(),Ce&&Lb.destroyStream(ie)},scope:function(b,c,d){var g,k,m,p,r,t,v,u,x,G,C,N,J,E,M,O,K,Z,S,R,P,U,ha,Y,da,ja,na,fa,pa,ea,la,ma,oa,sa,wa,va,Ha,Ea,Ka,Na,Qa,yb,Bb,wc,$a,cb,ob,Ma,pb,ub,ib,Oa,td,Ib,Ob,eb,tc,Hb,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,bc,Jb,Za,Vb,ya,kc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,cc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,jc,sc,Qc,Mc,qd,je,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ed,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,Zc,gd,nc,Wc,Dd,Ld,fe,re,Ud,
Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ve,se,jf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,pg,cf,Ze,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng;g=b.viewport;k=g.x|0;m=g.y|0;p="width"in g?g.width|
0:B.framebufferWidth-k;r="height"in g?g.height|0:B.framebufferHeight-m;t=B.viewportWidth;B.viewportWidth=p;v=B.viewportHeight;B.viewportHeight=r;u=xd[0];xd[0]=k;x=xd[1];xd[1]=m;G=xd[2];xd[2]=p;C=xd[3];xd[3]=r;N=ra[0];ra[0]=0;J=ra[1];ra[1]=0;E=ra[2];ra[2]=0;M=ra[3];ra[3]=1;O=ia.blend_enable;ia.blend_enable=!0;K=y[0];y[0]=770;Z=y[1];y[1]=771;S=y[2];y[2]=773;R=y[3];y[3]=1;P=ia.depth_enable;ia.depth_enable=!1;U=b.viewport;ha=U.x|0;Y=U.y|0;da="width"in U?U.width|0:B.framebufferWidth-ha;ja="height"in U?
U.height|0:B.framebufferHeight-Y;na=ne[0];ne[0]=ha;fa=ne[1];ne[1]=Y;pa=ne[2];ne[2]=da;ea=ne[3];ne[3]=ja;la=ia.scissor_enable;ia.scissor_enable=!0;ma=ia.stencil_enable;ia.stencil_enable=!1;if(oa=ka.profile)sa=performance.now(),z.count++;wa=b.elements;va=null;va=(Ha=w(wa))?Lb.createStream(wa):Lb.getElements(wa);Ea=Ca.elements;Ca.elements=va;Ka=b.offset;Na=Ca.offset;Ca.offset=Ka;Qa=b.count;yb=Ca.count;Ca.count=Qa;Bb=Ca.primitive;Ca.primitive=0;wc=Q[45];Q[45]=!1;$a=b.markerTexture;cb=Q[48];Q[48]=$a;ob=
b.opacity;Ma=Q[10];Q[10]=ob;pb=A.call(this,B,b,d);ub=Q[46];Q[46]=pb;ib=Q[47];Q[47]=H;Oa=B.pixelRatio;td=Q[34];Q[34]=Oa;Ib=b.scale;Ob=Q[6];Q[6]=Ib;eb=b.scaleFract;tc=Q[7];Q[7]=eb;Hb=b.translate;dc=Q[8];Q[8]=Hb;kb=b.translateFract;lb=Q[9];Q[9]=kb;ta=q.call(this,B,b,d);qb=!1;xa=null;Ua=0;bb=!1;fb=Aa=0;Ia=1;Ab=0;zb=5126;Za=Jb=bc=Ra=0;w(ta)?(qb=!0,xa=W.createStream(34962,ta),zb=xa.dtype):(xa=W.getBuffer(ta))?zb=xa.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(bc=ta.constant,Jb=Za=Ra=0):(bc=
0<ta.constant.length?ta.constant[0]:0,Jb=1<ta.constant.length?ta.constant[1]:0,Za=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?ta.constant[3]:0)):(xa=w(ta.buffer)?W.createStream(34962,ta.buffer):W.getBuffer(ta.buffer),zb="type"in ta?Zd[ta.type]:xa.dtype,bb=!!ta.normalized,fb=ta.size|0,Aa=ta.offset|0,Ab=ta.stride|0,Ua=ta.divisor|0);Vb=F.buffer;F.buffer=xa;ya=F.divisor;F.divisor=Ua;kc=F.normalized;F.normalized=bb;Ja=F.offset;F.offset=Aa;Pb=F.size;F.size=fb;gb=F.state;F.state=Ia;jb=
F.stride;F.stride=Ab;za=F.type;F.type=zb;fc=F.w;F.w=Ra;Da=F.x;F.x=bc;rb=F.y;F.y=Jb;sb=F.z;F.z=Za;Xa=ca.call(this,B,b,d);Ya=!1;mc=null;xc=0;uc=!1;Mb=Va=0;cc=1;Fa=0;yc=5126;vb=mb=Ba=Pa=0;w(Xa)?(Ya=!0,mc=W.createStream(34962,Xa),yc=mc.dtype):(mc=W.getBuffer(Xa))?yc=mc.dtype:"constant"in Xa?(cc=2,"number"===typeof Xa.constant?(Ba=Xa.constant,mb=vb=Pa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,mb=1<Xa.constant.length?Xa.constant[1]:0,vb=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:
0)):(mc=w(Xa.buffer)?W.createStream(34962,Xa.buffer):W.getBuffer(Xa.buffer),yc="type"in Xa?Zd[Xa.type]:mc.dtype,uc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,xc=Xa.divisor|0);Cb=I.buffer;I.buffer=mc;tb=I.divisor;I.divisor=xc;vc=I.normalized;I.normalized=uc;wb=I.offset;I.offset=Va;jc=I.size;I.size=Mb;sc=I.state;I.state=cc;Qc=I.stride;I.stride=Fa;Mc=I.type;I.type=yc;qd=I.w;I.w=Pa;je=I.x;I.x=Ba;Wb=I.y;I.y=mb;ac=I.z;I.z=vb;Qb=aa.call(this,B,b,d);Ga=!1;Yb=null;nb=0;xb=!1;Rb=Nb=0;gc=1;ic=
0;Ed=5126;Nc=Ec=Cc=Bc=0;w(Qb)?(Ga=!0,Yb=W.createStream(34962,Qb),Ed=Yb.dtype):(Yb=W.getBuffer(Qb))?Ed=Yb.dtype:"constant"in Qb?(gc=2,"number"===typeof Qb.constant?(Cc=Qb.constant,Ec=Nc=Bc=0):(Cc=0<Qb.constant.length?Qb.constant[0]:0,Ec=1<Qb.constant.length?Qb.constant[1]:0,Nc=2<Qb.constant.length?Qb.constant[2]:0,Bc=3<Qb.constant.length?Qb.constant[3]:0)):(Yb=w(Qb.buffer)?W.createStream(34962,Qb.buffer):W.getBuffer(Qb.buffer),Ed="type"in Qb?Zd[Qb.type]:Yb.dtype,xb=!!Qb.normalized,Rb=Qb.size|0,Nb=
Qb.offset|0,ic=Qb.stride|0,nb=Qb.divisor|0);Yc=h.buffer;h.buffer=Yb;Sc=h.divisor;h.divisor=nb;Oc=h.normalized;h.normalized=xb;Kb=h.offset;h.offset=Nb;Fb=h.size;h.size=Rb;Pc=h.state;h.state=gc;Hc=h.stride;h.stride=ic;Tc=h.type;h.type=Ed;hc=h.w;h.w=Bc;Vc=h.x;h.x=Cc;Zc=h.y;h.y=Ec;gd=h.z;h.z=Nc;nc=f.call(this,B,b,d);Wc=!1;Dd=null;Ld=0;fe=!1;Ud=re=0;Jd=1;Gd=0;bd=5126;ad=hd=od=Fc=0;w(nc)?(Wc=!0,Dd=W.createStream(34962,nc),bd=Dd.dtype):(Dd=W.getBuffer(nc))?bd=Dd.dtype:"constant"in nc?(Jd=2,"number"===typeof nc.constant?
(od=nc.constant,hd=ad=Fc=0):(od=0<nc.constant.length?nc.constant[0]:0,hd=1<nc.constant.length?nc.constant[1]:0,ad=2<nc.constant.length?nc.constant[2]:0,Fc=3<nc.constant.length?nc.constant[3]:0)):(Dd=w(nc.buffer)?W.createStream(34962,nc.buffer):W.getBuffer(nc.buffer),bd="type"in nc?Zd[nc.type]:Dd.dtype,fe=!!nc.normalized,Ud=nc.size|0,re=nc.offset|0,Gd=nc.stride|0,Ld=nc.divisor|0);pd=e.buffer;e.buffer=Dd;yd=e.divisor;e.divisor=Ld;zd=e.normalized;e.normalized=fe;ve=e.offset;e.offset=re;se=e.size;e.size=
Ud;jf=e.state;e.state=Jd;ee=e.stride;e.stride=Gd;de=e.type;e.type=bd;be=e.w;e.w=Fc;ue=e.x;e.x=od;$d=e.y;e.y=hd;he=e.z;e.z=ad;zc=D.call(this,B,b,d);Uc=!1;pe=null;ke=0;Hd=!1;Nd=Md=0;Od=1;ie=0;Ce=5126;Pe=Oe=me=ze=0;w(zc)?(Uc=!0,pe=W.createStream(34962,zc),Ce=pe.dtype):(pe=W.getBuffer(zc))?Ce=pe.dtype:"constant"in zc?(Od=2,"number"===typeof zc.constant?(me=zc.constant,Oe=Pe=ze=0):(me=0<zc.constant.length?zc.constant[0]:0,Oe=1<zc.constant.length?zc.constant[1]:0,Pe=2<zc.constant.length?zc.constant[2]:
0,ze=3<zc.constant.length?zc.constant[3]:0)):(pe=w(zc.buffer)?W.createStream(34962,zc.buffer):W.getBuffer(zc.buffer),Ce="type"in zc?Zd[zc.type]:pe.dtype,Hd=!!zc.normalized,Nd=zc.size|0,Md=zc.offset|0,ie=zc.stride|0,ke=zc.divisor|0);Le=T.buffer;T.buffer=pe;qe=T.divisor;T.divisor=ke;De=T.normalized;T.normalized=Hd;Ge=T.offset;T.offset=Md;He=T.size;T.size=Nd;Ie=T.state;T.state=Od;Ee=T.stride;T.stride=ie;Kd=T.type;T.type=Ce;Rd=T.w;T.w=ze;Yd=T.x;T.x=me;ae=T.y;T.y=Oe;Je=T.z;T.z=Pe;Cd=V.call(this,B,b,d);
Pd=!1;Ae=null;Ke=0;pf=!1;Qe=Xe=0;Me=1;We=0;Ue=5126;Vd=Qd=Se=Re=0;w(Cd)?(Pd=!0,Ae=W.createStream(34962,Cd),Ue=Ae.dtype):(Ae=W.getBuffer(Cd))?Ue=Ae.dtype:"constant"in Cd?(Me=2,"number"===typeof Cd.constant?(Se=Cd.constant,Qd=Vd=Re=0):(Se=0<Cd.constant.length?Cd.constant[0]:0,Qd=1<Cd.constant.length?Cd.constant[1]:0,Vd=2<Cd.constant.length?Cd.constant[2]:0,Re=3<Cd.constant.length?Cd.constant[3]:0)):(Ae=w(Cd.buffer)?W.createStream(34962,Cd.buffer):W.getBuffer(Cd.buffer),Ue="type"in Cd?Zd[Cd.type]:Ae.dtype,
pf=!!Cd.normalized,Qe=Cd.size|0,Xe=Cd.offset|0,We=Cd.stride|0,Ke=Cd.divisor|0);Te=n.buffer;n.buffer=Ae;ef=n.divisor;n.divisor=Ke;lf=n.normalized;n.normalized=pf;bf=n.offset;n.offset=Xe;ff=n.size;n.size=Qe;gf=n.state;n.state=Me;hf=n.stride;n.stride=We;qf=n.type;n.type=Ue;mf=n.w;n.w=Re;rf=n.x;n.x=Se;Bf=n.y;n.y=Qd;Cf=n.z;n.z=Vd;Ne=qa.call(this,B,b,d);Be=!1;nf=null;of=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;w(Ne)?(Be=!0,nf=W.createStream(34962,Ne),wf=nf.dtype):(nf=W.getBuffer(Ne))?wf=nf.dtype:
"constant"in Ne?(Ef=2,"number"===typeof Ne.constant?(vf=Ne.constant,yf=zf=xf=0):(vf=0<Ne.constant.length?Ne.constant[0]:0,yf=1<Ne.constant.length?Ne.constant[1]:0,zf=2<Ne.constant.length?Ne.constant[2]:0,xf=3<Ne.constant.length?Ne.constant[3]:0)):(nf=w(Ne.buffer)?W.createStream(34962,Ne.buffer):W.getBuffer(Ne.buffer),wf="type"in Ne?Zd[Ne.type]:nf.dtype,Df=!!Ne.normalized,Af=Ne.size|0,Gf=Ne.offset|0,Ff=Ne.stride|0,of=Ne.divisor|0);If=L.buffer;L.buffer=nf;Jf=L.divisor;L.divisor=of;Kf=L.normalized;L.normalized=
Df;Lf=L.offset;L.offset=Gf;sf=L.size;L.size=Af;Qf=L.state;L.state=Ef;Hf=L.stride;L.stride=Ff;tf=L.type;L.type=wf;cg=L.w;L.w=xf;Rf=L.x;L.x=vf;Sf=L.y;L.y=yf;pg=L.z;L.z=zf;cf=ga.call(this,B,b,d);Ze=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;Yf=Xf=Wf=Tf=0;w(cf)?(Ze=!0,Mf=W.createStream(34962,cf),Vf=Mf.dtype):(Mf=W.getBuffer(cf))?Vf=Mf.dtype:"constant"in cf?(gg=2,"number"===typeof cf.constant?(Wf=cf.constant,Xf=Yf=Tf=0):(Wf=0<cf.constant.length?cf.constant[0]:0,Xf=1<cf.constant.length?cf.constant[1]:
0,Yf=2<cf.constant.length?cf.constant[2]:0,Tf=3<cf.constant.length?cf.constant[3]:0)):(Mf=w(cf.buffer)?W.createStream(34962,cf.buffer):W.getBuffer(cf.buffer),Vf="type"in cf?Zd[cf.type]:Mf.dtype,dg=!!cf.normalized,fg=cf.size|0,eg=cf.offset|0,hg=cf.stride|0,Nf=cf.divisor|0);ig=a.buffer;a.buffer=Mf;qg=a.divisor;a.divisor=Nf;rg=a.normalized;a.normalized=dg;sg=a.offset;a.offset=eg;tg=a.size;a.size=fg;ug=a.state;a.state=gg;vg=a.stride;a.stride=hg;wg=a.type;a.type=Vf;xg=a.w;a.w=Tf;yg=a.x;a.x=Wf;zg=a.y;a.y=
Xf;Ag=a.z;a.z=Yf;df=l.call(this,B,b,d);$e=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;w(df)?($e=!0,Of=W.createStream(34962,df),Zf=Of.dtype):(Of=W.getBuffer(df))?Zf=Of.dtype:"constant"in df?(mg=2,"number"===typeof df.constant?($f=df.constant,ag=bg=Uf=0):($f=0<df.constant.length?df.constant[0]:0,ag=1<df.constant.length?df.constant[1]:0,bg=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Of=w(df.buffer)?W.createStream(34962,df.buffer):W.getBuffer(df.buffer),
Zf="type"in df?Zd[df.type]:Of.dtype,jg=!!df.normalized,lg=df.size|0,kg=df.offset|0,ng=df.stride|0,Pf=df.divisor|0);og=X.buffer;X.buffer=Of;Bg=X.divisor;X.divisor=Pf;Cg=X.normalized;X.normalized=jg;Dg=X.offset;X.offset=kg;Eg=X.size;X.size=lg;Fg=X.state;X.state=mg;Gg=X.stride;X.stride=ng;Hg=X.type;X.type=Zf;Ig=X.w;X.w=Uf;Jg=X.x;X.x=$f;Kg=X.y;X.y=ag;Lg=X.z;X.z=bg;Mg=ua.vert;ua.vert=59;Ng=ua.frag;ua.frag=58;ka.dirty=!0;c(B,b,d);B.viewportWidth=t;B.viewportHeight=v;xd[0]=u;xd[1]=x;xd[2]=G;xd[3]=C;ra[0]=
N;ra[1]=J;ra[2]=E;ra[3]=M;ia.blend_enable=O;y[0]=K;y[1]=Z;y[2]=S;y[3]=R;ia.depth_enable=P;ne[0]=na;ne[1]=fa;ne[2]=pa;ne[3]=ea;ia.scissor_enable=la;ia.stencil_enable=ma;oa&&(z.cpuTime+=performance.now()-sa);Ha&&Lb.destroyStream(va);Ca.elements=Ea;Ca.offset=Na;Ca.count=yb;Ca.primitive=Bb;Q[45]=wc;Q[48]=cb;Q[10]=Ma;Q[46]=ub;Q[47]=ib;Q[34]=td;Q[6]=Ob;Q[7]=tc;Q[8]=dc;Q[9]=lb;qb&&W.destroyStream(xa);F.buffer=Vb;F.divisor=ya;F.normalized=kc;F.offset=Ja;F.size=Pb;F.state=gb;F.stride=jb;F.type=za;F.w=fc;F.x=
Da;F.y=rb;F.z=sb;Ya&&W.destroyStream(mc);I.buffer=Cb;I.divisor=tb;I.normalized=vc;I.offset=wb;I.size=jc;I.state=sc;I.stride=Qc;I.type=Mc;I.w=qd;I.x=je;I.y=Wb;I.z=ac;Ga&&W.destroyStream(Yb);h.buffer=Yc;h.divisor=Sc;h.normalized=Oc;h.offset=Kb;h.size=Fb;h.state=Pc;h.stride=Hc;h.type=Tc;h.w=hc;h.x=Vc;h.y=Zc;h.z=gd;Wc&&W.destroyStream(Dd);e.buffer=pd;e.divisor=yd;e.normalized=zd;e.offset=ve;e.size=se;e.state=jf;e.stride=ee;e.type=de;e.w=be;e.x=ue;e.y=$d;e.z=he;Uc&&W.destroyStream(pe);T.buffer=Le;T.divisor=
qe;T.normalized=De;T.offset=Ge;T.size=He;T.state=Ie;T.stride=Ee;T.type=Kd;T.w=Rd;T.x=Yd;T.y=ae;T.z=Je;Pd&&W.destroyStream(Ae);n.buffer=Te;n.divisor=ef;n.normalized=lf;n.offset=bf;n.size=ff;n.state=gf;n.stride=hf;n.type=qf;n.w=mf;n.x=rf;n.y=Bf;n.z=Cf;Be&&W.destroyStream(nf);L.buffer=If;L.divisor=Jf;L.normalized=Kf;L.offset=Lf;L.size=sf;L.state=Qf;L.stride=Hf;L.type=tf;L.w=cg;L.x=Rf;L.y=Sf;L.z=pg;Ze&&W.destroyStream(Mf);a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=
vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;$e&&W.destroyStream(Of);X.buffer=og;X.divisor=Bg;X.normalized=Cg;X.offset=Dg;X.size=Eg;X.state=Fg;X.stride=Gg;X.type=Hg;X.w=Ig;X.x=Jg;X.y=Kg;X.z=Lg;ua.vert=Mg;ua.frag=Ng;ka.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(c,z,r,N,g,b,x,d,v,na,da,K,E,u,A,H,q,F,ca,I,aa,h,f,e,D,T,V,n,qa,L,ga,a,l,X,ma,Ka,cb,kc,oa,Qa){var Y,O,M,R,sa,J,Ob,$a,P,t,la,
fa,Ea,Na,Hb,Ha,U,ob,ea,va,bc,cc,jc,td,wc,W,B,ka,Ca,Lb,nc,Zc,C,w,ia,ua,Q,ha,ra,G,m;Y=c.attributes;O=c.buffer;M=c.context;R=c.current;sa=c.draw;J=c.elements;Ob=c.extensions;$a=c.framebuffer;P=c.gl;t=c.isBufferArgs;la=c.next;fa=c.shader;Ea=c.uniforms;Na=c.vao;Hb=la.blend_color;Ha=R.blend_color;U=la.blend_equation;ob=R.blend_equation;ea=la.blend_func;va=R.blend_func;bc=la.colorMask;cc=R.colorMask;jc=la.depth_range;td=R.depth_range;wc=la.polygonOffset_offset;W=R.polygonOffset_offset;B=la.sample_coverage;
ka=R.sample_coverage;Ca=la.scissor_box;Lb=R.scissor_box;nc=la.stencil_func;Zc=R.stencil_func;C=la.stencil_opBack;w=R.stencil_opBack;ia=la.stencil_opFront;ua=R.stencil_opFront;Q=la.viewport;ha=R.viewport;ra={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};G={offset:4,stride:8};m={offset:0,stride:8};return{batch:function(b,c){var d,g,k,q,r,p,v,u,x,A,N,E,H;d=$a.next;d!==$a.cur&&(d?P.bindFramebuffer(36160,d.framebuffer):P.bindFramebuffer(36160,null),$a.cur=
d);if(R.dirty){var K,Q,da,na,fa,ea,Ea,Hb,Ve,kf,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb;K=la.dither;K!==R.dither&&(K?P.enable(3024):P.disable(3024),R.dither=K);Q=U[0];da=U[1];if(Q!==ob[0]||da!==ob[1])P.blendEquationSeparate(Q,da),ob[0]=Q,ob[1]=da;na=la.depth_func;na!==R.depth_func&&(P.depthFunc(na),R.depth_func=na);fa=jc[0];ea=jc[1];if(fa!==td[0]||ea!==td[1])P.depthRange(fa,ea),td[0]=fa,td[1]=ea;Ea=la.depth_mask;Ea!==R.depth_mask&&(P.depthMask(Ea),R.depth_mask=
Ea);Hb=bc[0];Ve=bc[1];kf=bc[2];af=bc[3];if(Hb!==cc[0]||Ve!==cc[1]||kf!==cc[2]||af!==cc[3])P.colorMask(Hb,Ve,kf,af),cc[0]=Hb,cc[1]=Ve,cc[2]=kf,cc[3]=af;Ad=la.cull_enable;Ad!==R.cull_enable&&(Ad?P.enable(2884):P.disable(2884),R.cull_enable=Ad);Fe=la.cull_face;Fe!==R.cull_face&&(P.cullFace(Fe),R.cull_face=Fe);Sd=la.frontFace;Sd!==R.frontFace&&(P.frontFace(Sd),R.frontFace=Sd);Td=la.lineWidth;Td!==R.lineWidth&&(P.lineWidth(Td),R.lineWidth=Td);le=la.polygonOffset_enable;le!==R.polygonOffset_enable&&(le?
P.enable(32823):P.disable(32823),R.polygonOffset_enable=le);Xd=wc[0];rd=wc[1];if(Xd!==W[0]||rd!==W[1])P.polygonOffset(Xd,rd),W[0]=Xd,W[1]=rd;jd=la.sample_alpha;jd!==R.sample_alpha&&(jd?P.enable(32926):P.disable(32926),R.sample_alpha=jd);vd=la.sample_enable;vd!==R.sample_enable&&(vd?P.enable(32928):P.disable(32928),R.sample_enable=vd);$c=B[0];kd=B[1];if($c!==ka[0]||kd!==ka[1])P.sampleCoverage($c,kd),ka[0]=$c,ka[1]=kd;oc=la.stencil_mask;oc!==R.stencil_mask&&(P.stencilMask(oc),R.stencil_mask=oc);id=
nc[0];ed=nc[1];Lc=nc[2];if(id!==Zc[0]||ed!==Zc[1]||Lc!==Zc[2])P.stencilFunc(id,ed,Lc),Zc[0]=id,Zc[1]=ed,Zc[2]=Lc;qc=ia[0];ab=ia[1];Ic=ia[2];Db=ia[3];if(qc!==ua[0]||ab!==ua[1]||Ic!==ua[2]||Db!==ua[3])P.stencilOpSeparate(qc,ab,Ic,Db),ua[0]=qc,ua[1]=ab,ua[2]=Ic,ua[3]=Db;pc=C[0];Ta=C[1];Jc=C[2];$b=C[3];if(pc!==w[0]||Ta!==w[1]||Jc!==w[2]||$b!==w[3])P.stencilOpSeparate(pc,Ta,Jc,$b),w[0]=pc,w[1]=Ta,w[2]=Jc,w[3]=$b;rc=la.scissor_enable;rc!==R.scissor_enable&&(rc?P.enable(3089):P.disable(3089),R.scissor_enable=
rc);Fd=Ca[0];Bd=Ca[1];Ac=Ca[2];Xb=Ca[3];if(Fd!==Lb[0]||Bd!==Lb[1]||Ac!==Lb[2]||Xb!==Lb[3])P.scissor(Fd,Bd,Ac,Xb),Lb[0]=Fd,Lb[1]=Bd,Lb[2]=Ac,Lb[3]=Xb}g=this.viewport;k=g.x|0;q=g.y|0;r="width"in g?g.width|0:M.framebufferWidth-k;p="height"in g?g.height|0:M.framebufferHeight-q;v=M.viewportWidth;M.viewportWidth=r;u=M.viewportHeight;M.viewportHeight=p;P.viewport(k,q,r,p);ha[0]=k;ha[1]=q;ha[2]=r;ha[3]=p;P.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;P.enable(3042);R.blend_enable=!0;P.blendFuncSeparate(770,
771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;P.disable(2929);R.depth_enable=!1;P.disable(2960);R.stencil_enable=!1;if(x=R.profile)A=performance.now(),z.count+=c;P.useProgram(F.program);N=Ob.angle_instanced_arrays;var Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb;Na.setVAO(null);m.buffer=this.sizeBuffer;Gc=!1;Rc=null;La=0;Eb=!1;wa=
Wa=0;md=1;hb=0;Sa=5126;Sb=ec=db=Gb=0;t(m)?(Gc=!0,Rc=O.createStream(34962,m),Sa=Rc.dtype):(Rc=O.getBuffer(m))?Sa=Rc.dtype:"constant"in m?(md=2,"number"===typeof m.constant?(db=m.constant,ec=Sb=Gb=0):(db=0<m.constant.length?m.constant[0]:0,ec=1<m.constant.length?m.constant[1]:0,Sb=2<m.constant.length?m.constant[2]:0,Gb=3<m.constant.length?m.constant[3]:0)):(Rc=t(m.buffer)?O.createStream(34962,m.buffer):O.getBuffer(m.buffer),Sa="type"in m?ra[m.type]:Rc.dtype,Eb=!!m.normalized,wa=m.size|0,Wa=m.offset|
0,hb=m.stride|0,La=m.divisor|0);ge=Qa.location;Zb=Y[ge];if(1===md){Zb.buffer||P.enableVertexAttribArray(ge);Tb=wa||1;if(Zb.type!==Sa||Zb.size!==Tb||Zb.buffer!==Rc||Zb.normalized!==Eb||Zb.offset!==Wa||Zb.stride!==hb)P.bindBuffer(34962,Rc.buffer),P.vertexAttribPointer(ge,Tb,Sa,Eb,hb,Wa),Zb.type=Sa,Zb.size=Tb,Zb.buffer=Rc,Zb.normalized=Eb,Zb.offset=Wa,Zb.stride=hb;Zb.divisor!==La&&(N.vertexAttribDivisorANGLE(ge,La),Zb.divisor=La)}else if(Zb.buffer&&(P.disableVertexAttribArray(ge),Zb.buffer=null),Zb.x!==
db||Zb.y!==ec||Zb.z!==Sb||Zb.w!==Gb)P.vertexAttrib4f(ge,db,ec,Sb,Gb),Zb.x=db,Zb.y=ec,Zb.z=Sb,Zb.w=Gb;G.buffer=this.sizeBuffer;fd=!1;Ub=null;Ma=0;pb=!1;ib=ub=0;Oa=1;Dc=0;Ib=5126;dd=lc=eb=cd=0;t(G)?(fd=!0,Ub=O.createStream(34962,G),Ib=Ub.dtype):(Ub=O.getBuffer(G))?Ib=Ub.dtype:"constant"in G?(Oa=2,"number"===typeof G.constant?(eb=G.constant,lc=dd=cd=0):(eb=0<G.constant.length?G.constant[0]:0,lc=1<G.constant.length?G.constant[1]:0,dd=2<G.constant.length?G.constant[2]:0,cd=3<G.constant.length?G.constant[3]:
0)):(Ub=t(G.buffer)?O.createStream(34962,G.buffer):O.getBuffer(G.buffer),Ib="type"in G?ra[G.type]:Ub.dtype,pb=!!G.normalized,ib=G.size|0,ub=G.offset|0,Dc=G.stride|0,Ma=G.divisor|0);dc=L.location;kb=Y[dc];if(1===Oa){kb.buffer||P.enableVertexAttribArray(dc);lb=ib||1;if(kb.type!==Ib||kb.size!==lb||kb.buffer!==Ub||kb.normalized!==pb||kb.offset!==ub||kb.stride!==Dc)P.bindBuffer(34962,Ub.buffer),P.vertexAttribPointer(dc,lb,Ib,pb,Dc,ub),kb.type=Ib,kb.size=lb,kb.buffer=Ub,kb.normalized=pb,kb.offset=ub,kb.stride=
Dc;kb.divisor!==Ma&&(N.vertexAttribDivisorANGLE(dc,Ma),kb.divisor=Ma)}else if(kb.buffer&&(P.disableVertexAttribArray(dc),kb.buffer=null),kb.x!==eb||kb.y!==lc||kb.z!==dd||kb.w!==cd)P.vertexAttrib4f(dc,eb,lc,dd,cd),kb.x=eb,kb.y=lc,kb.z=dd,kb.w=cd;ta=this.charBuffer;qb=!1;xa=null;Ua=0;bb=!1;fb=Aa=0;Ia=1;Ab=0;zb=5126;Za=Jb=Kc=Ra=0;t(ta)?(qb=!0,xa=O.createStream(34962,ta),zb=xa.dtype):(xa=O.getBuffer(ta))?zb=xa.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(Kc=ta.constant,Jb=Za=Ra=0):(Kc=0<
ta.constant.length?ta.constant[0]:0,Jb=1<ta.constant.length?ta.constant[1]:0,Za=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?ta.constant[3]:0)):(xa=t(ta.buffer)?O.createStream(34962,ta.buffer):O.getBuffer(ta.buffer),zb="type"in ta?ra[ta.type]:xa.dtype,bb=!!ta.normalized,fb=ta.size|0,Aa=ta.offset|0,Ab=ta.stride|0,Ua=ta.divisor|0);Vb=qa.location;ya=Y[Vb];if(1===Ia){ya.buffer||P.enableVertexAttribArray(Vb);ce=fb||1;if(ya.type!==zb||ya.size!==ce||ya.buffer!==xa||ya.normalized!==bb||ya.offset!==
Aa||ya.stride!==Ab)P.bindBuffer(34962,xa.buffer),P.vertexAttribPointer(Vb,ce,zb,bb,Ab,Aa),ya.type=zb,ya.size=ce,ya.buffer=xa,ya.normalized=bb,ya.offset=Aa,ya.stride=Ab;ya.divisor!==Ua&&(N.vertexAttribDivisorANGLE(Vb,Ua),ya.divisor=Ua)}else if(ya.buffer&&(P.disableVertexAttribArray(Vb),ya.buffer=null),ya.x!==Kc||ya.y!==Jb||ya.z!==Za||ya.w!==Ra)P.vertexAttrib4f(Vb,Kc,Jb,Za,Ra),ya.x=Kc,ya.y=Jb,ya.z=Za,ya.w=Ra;Ja=this.position;Pb=!1;gb=null;jb=0;za=!1;Da=fc=0;rb=1;sb=0;Xa=5126;uc=xc=mc=Ya=0;t(Ja)?(Pb=
!0,gb=O.createStream(34962,Ja),Xa=gb.dtype):(gb=O.getBuffer(Ja))?Xa=gb.dtype:"constant"in Ja?(rb=2,"number"===typeof Ja.constant?(mc=Ja.constant,xc=uc=Ya=0):(mc=0<Ja.constant.length?Ja.constant[0]:0,xc=1<Ja.constant.length?Ja.constant[1]:0,uc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(gb=t(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),Xa="type"in Ja?ra[Ja.type]:gb.dtype,za=!!Ja.normalized,Da=Ja.size|0,fc=Ja.offset|0,sb=Ja.stride|0,jb=Ja.divisor|
0);Va=ma.location;Mb=Y[Va];if(1===rb){Mb.buffer||P.enableVertexAttribArray(Va);Xc=Da||2;if(Mb.type!==Xa||Mb.size!==Xc||Mb.buffer!==gb||Mb.normalized!==za||Mb.offset!==fc||Mb.stride!==sb)P.bindBuffer(34962,gb.buffer),P.vertexAttribPointer(Va,Xc,Xa,za,sb,fc),Mb.type=Xa,Mb.size=Xc,Mb.buffer=gb,Mb.normalized=za,Mb.offset=fc,Mb.stride=sb;Mb.divisor!==jb&&(N.vertexAttribDivisorANGLE(Va,jb),Mb.divisor=jb)}else if(Mb.buffer&&(P.disableVertexAttribArray(Va),Mb.buffer=null),Mb.x!==mc||Mb.y!==xc||Mb.z!==uc||
Mb.w!==Ya)P.vertexAttrib4f(Va,mc,xc,uc,Ya),Mb.x=mc,Mb.y=xc,Mb.z=uc,Mb.w=Ya;Fa=this.viewportArray;P.uniform4f(oa.location,Fa[0],Fa[1],Fa[2],Fa[3]);yc=this.scale;P.uniform2f(cb.location,yc[0],yc[1]);Pa=this.translate;P.uniform2f(kc.location,Pa[0],Pa[1]);(Ba=sa.elements)?P.bindBuffer(34963,Ba.buffer.buffer):Na.currentVAO&&(Ba=J.getElements(Na.currentVAO.elements))&&P.bindBuffer(34963,Ba.buffer.buffer);mb=sa.instances;for(E=0;E<c;++E){H=b[E];var vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,
Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd;vb=ca.call(this,M,H,E);E&&Cb===vb||(Cb=vb,P.uniform1f(ga.location,vb));tb=I.call(this,M,H,E);E&&vc===tb||(vc=tb,P.uniform1f(l.location,tb));wb=H.align;E&&wd===wb||(wd=wb,P.uniform1f(e.location,wb));sc=H.baseline;E&&ud===sc||(ud=sc,P.uniform1f(n.location,sc));Mc=H.color;ld=Mc[0];Wb=Mc[1];Qb=Mc[2];Yb=Mc[3];E&&sd===ld&&ac===Wb&&Ga===Qb&&nb===Yb||(sd=ld,ac=Wb,Ga=Qb,nb=Yb,P.uniform4f(a.location,ld,Wb,Qb,Yb));xb=aa.call(this,M,H,E);Nb=xb[0];gc=xb[1];
E&&Rb===Nb&&ic===gc||(Rb=Nb,ic=gc,P.uniform2f(V.location,Nb,gc));Ye=h.call(this,M,H,E);Bc=Ye[0];Ec=Ye[1];E&&Cc===Bc&&Nc===Ec||(Cc=Bc,Nc=Ec,P.uniform2f(T.location,Bc,Ec));Yc=H.positionOffset;Sc=Yc[0];Kb=Yc[1];E&&Oc===Sc&&Fb===Kb||(Oc=Sc,Fb=Kb,P.uniform2f(Ka.location,Sc,Kb));Pc=H.opacity;E&&Hc===Pc||(Hc=Pc,P.uniform1f(X.location,Pc));(Tc=f.call(this,M,H,E))&&"framebuffer"===Tc._reglType&&(Tc=Tc.color[0]);hc=Tc._texture;P.uniform1i(D.location,hc.bind());Vc=H.offset;if(nd=H.count)0<mb?Ba?N.drawElementsInstancedANGLE(0,
nd,Ba.type,Vc<<(Ba.type-5121>>1),mb):N.drawArraysInstancedANGLE(0,Vc,nd,mb):0>mb&&(Ba?P.drawElements(0,nd,Ba.type,Vc<<(Ba.type-5121>>1)):P.drawArrays(0,Vc,nd)),hc.unbind()}Gc&&O.destroyStream(Rc);fd&&O.destroyStream(Ub);qb&&O.destroyStream(xa);Pb&&O.destroyStream(gb);R.dirty=!0;Na.setVAO(null);M.viewportWidth=v;M.viewportHeight=u;x&&(z.cpuTime+=performance.now()-A)},draw:function(c){var f,h,q,k,v,u,p,A,E,H,F,I,K,Q,da,ca,na,fa,ea,aa,Ea,Hb,Id,kf,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,
Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,wa,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb;f=$a.next;f!==$a.cur&&(f?P.bindFramebuffer(36160,f.framebuffer):P.bindFramebuffer(36160,null),$a.cur=f);if(R.dirty){var Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc;Ia=la.dither;Ia!==R.dither&&(Ia?P.enable(3024):P.disable(3024),R.dither=Ia);Ab=U[0];zb=U[1];if(Ab!==ob[0]||zb!==ob[1])P.blendEquationSeparate(Ab,
zb),ob[0]=Ab,ob[1]=zb;Ra=la.depth_func;Ra!==R.depth_func&&(P.depthFunc(Ra),R.depth_func=Ra);Kc=jc[0];Jb=jc[1];if(Kc!==td[0]||Jb!==td[1])P.depthRange(Kc,Jb),td[0]=Kc,td[1]=Jb;Za=la.depth_mask;Za!==R.depth_mask&&(P.depthMask(Za),R.depth_mask=Za);Vb=bc[0];ya=bc[1];ce=bc[2];Ja=bc[3];if(Vb!==cc[0]||ya!==cc[1]||ce!==cc[2]||Ja!==cc[3])P.colorMask(Vb,ya,ce,Ja),cc[0]=Vb,cc[1]=ya,cc[2]=ce,cc[3]=Ja;Pb=la.cull_enable;Pb!==R.cull_enable&&(Pb?P.enable(2884):P.disable(2884),R.cull_enable=Pb);gb=la.cull_face;gb!==
R.cull_face&&(P.cullFace(gb),R.cull_face=gb);jb=la.frontFace;jb!==R.frontFace&&(P.frontFace(jb),R.frontFace=jb);za=la.lineWidth;za!==R.lineWidth&&(P.lineWidth(za),R.lineWidth=za);fc=la.polygonOffset_enable;fc!==R.polygonOffset_enable&&(fc?P.enable(32823):P.disable(32823),R.polygonOffset_enable=fc);Da=wc[0];rb=wc[1];if(Da!==W[0]||rb!==W[1])P.polygonOffset(Da,rb),W[0]=Da,W[1]=rb;sb=la.sample_alpha;sb!==R.sample_alpha&&(sb?P.enable(32926):P.disable(32926),R.sample_alpha=sb);Xa=la.sample_enable;Xa!==
R.sample_enable&&(Xa?P.enable(32928):P.disable(32928),R.sample_enable=Xa);Ya=B[0];mc=B[1];if(Ya!==ka[0]||mc!==ka[1])P.sampleCoverage(Ya,mc),ka[0]=Ya,ka[1]=mc;xc=la.stencil_mask;xc!==R.stencil_mask&&(P.stencilMask(xc),R.stencil_mask=xc);uc=nc[0];Va=nc[1];Mb=nc[2];if(uc!==Zc[0]||Va!==Zc[1]||Mb!==Zc[2])P.stencilFunc(uc,Va,Mb),Zc[0]=uc,Zc[1]=Va,Zc[2]=Mb;Xc=ia[0];Fa=ia[1];yc=ia[2];Pa=ia[3];if(Xc!==ua[0]||Fa!==ua[1]||yc!==ua[2]||Pa!==ua[3])P.stencilOpSeparate(Xc,Fa,yc,Pa),ua[0]=Xc,ua[1]=Fa,ua[2]=yc,ua[3]=
Pa;Ba=C[0];mb=C[1];vb=C[2];Cb=C[3];if(Ba!==w[0]||mb!==w[1]||vb!==w[2]||Cb!==w[3])P.stencilOpSeparate(Ba,mb,vb,Cb),w[0]=Ba,w[1]=mb,w[2]=vb,w[3]=Cb;tb=la.scissor_enable;tb!==R.scissor_enable&&(tb?P.enable(3089):P.disable(3089),R.scissor_enable=tb);vc=Ca[0];wb=Ca[1];wd=Ca[2];sc=Ca[3];if(vc!==Lb[0]||wb!==Lb[1]||wd!==Lb[2]||sc!==Lb[3])P.scissor(vc,wb,wd,sc),Lb[0]=vc,Lb[1]=wb,Lb[2]=wd,Lb[3]=sc}h=this.viewport;q=h.x|0;k=h.y|0;v="width"in h?h.width|0:M.framebufferWidth-q;u="height"in h?h.height|0:M.framebufferHeight-
k;p=M.viewportWidth;M.viewportWidth=v;A=M.viewportHeight;M.viewportHeight=u;P.viewport(q,k,v,u);ha[0]=q;ha[1]=k;ha[2]=v;ha[3]=u;P.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;P.enable(3042);R.blend_enable=!0;P.blendFuncSeparate(770,771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;P.disable(2929);R.depth_enable=!1;P.disable(2960);R.stencil_enable=!1;if(E=R.profile)H=performance.now(),z.count++;P.useProgram(r.program);F=Ob.angle_instanced_arrays;Na.setVAO(null);m.buffer=this.sizeBuffer;I=!1;
K=null;Q=0;da=!1;na=ca=0;fa=1;ea=0;aa=5126;kf=Id=Hb=Ea=0;t(m)?(I=!0,K=O.createStream(34962,m),aa=K.dtype):(K=O.getBuffer(m))?aa=K.dtype:"constant"in m?(fa=2,"number"===typeof m.constant?(Hb=m.constant,Id=kf=Ea=0):(Hb=0<m.constant.length?m.constant[0]:0,Id=1<m.constant.length?m.constant[1]:0,kf=2<m.constant.length?m.constant[2]:0,Ea=3<m.constant.length?m.constant[3]:0)):(K=t(m.buffer)?O.createStream(34962,m.buffer):O.getBuffer(m.buffer),aa="type"in m?ra[m.type]:K.dtype,da=!!m.normalized,na=m.size|
0,ca=m.offset|0,ea=m.stride|0,Q=m.divisor|0);af=Qa.location;Ad=Y[af];if(1===fa){Ad.buffer||P.enableVertexAttribArray(af);Fe=na||1;if(Ad.type!==aa||Ad.size!==Fe||Ad.buffer!==K||Ad.normalized!==da||Ad.offset!==ca||Ad.stride!==ea)P.bindBuffer(34962,K.buffer),P.vertexAttribPointer(af,Fe,aa,da,ea,ca),Ad.type=aa,Ad.size=Fe,Ad.buffer=K,Ad.normalized=da,Ad.offset=ca,Ad.stride=ea;Ad.divisor!==Q&&(F.vertexAttribDivisorANGLE(af,Q),Ad.divisor=Q)}else if(Ad.buffer&&(P.disableVertexAttribArray(af),Ad.buffer=null),
Ad.x!==Hb||Ad.y!==Id||Ad.z!==kf||Ad.w!==Ea)P.vertexAttrib4f(af,Hb,Id,kf,Ea),Ad.x=Hb,Ad.y=Id,Ad.z=kf,Ad.w=Ea;G.buffer=this.sizeBuffer;Sd=!1;Td=null;le=0;Xd=!1;jd=rd=0;vd=1;$c=0;kd=5126;Lc=ed=id=oc=0;t(G)?(Sd=!0,Td=O.createStream(34962,G),kd=Td.dtype):(Td=O.getBuffer(G))?kd=Td.dtype:"constant"in G?(vd=2,"number"===typeof G.constant?(id=G.constant,ed=Lc=oc=0):(id=0<G.constant.length?G.constant[0]:0,ed=1<G.constant.length?G.constant[1]:0,Lc=2<G.constant.length?G.constant[2]:0,oc=3<G.constant.length?G.constant[3]:
0)):(Td=t(G.buffer)?O.createStream(34962,G.buffer):O.getBuffer(G.buffer),kd="type"in G?ra[G.type]:Td.dtype,Xd=!!G.normalized,jd=G.size|0,rd=G.offset|0,$c=G.stride|0,le=G.divisor|0);qc=L.location;ab=Y[qc];if(1===vd){ab.buffer||P.enableVertexAttribArray(qc);Ic=jd||1;if(ab.type!==kd||ab.size!==Ic||ab.buffer!==Td||ab.normalized!==Xd||ab.offset!==rd||ab.stride!==$c)P.bindBuffer(34962,Td.buffer),P.vertexAttribPointer(qc,Ic,kd,Xd,$c,rd),ab.type=kd,ab.size=Ic,ab.buffer=Td,ab.normalized=Xd,ab.offset=rd,ab.stride=
$c;ab.divisor!==le&&(F.vertexAttribDivisorANGLE(qc,le),ab.divisor=le)}else if(ab.buffer&&(P.disableVertexAttribArray(qc),ab.buffer=null),ab.x!==id||ab.y!==ed||ab.z!==Lc||ab.w!==oc)P.vertexAttrib4f(qc,id,ed,Lc,oc),ab.x=id,ab.y=ed,ab.z=Lc,ab.w=oc;Db=this.charBuffer;pc=!1;Ta=null;Jc=0;$b=!1;Fd=rc=0;Bd=1;Ac=0;Xb=5126;Eb=La=Rc=Gc=0;t(Db)?(pc=!0,Ta=O.createStream(34962,Db),Xb=Ta.dtype):(Ta=O.getBuffer(Db))?Xb=Ta.dtype:"constant"in Db?(Bd=2,"number"===typeof Db.constant?(Rc=Db.constant,La=Eb=Gc=0):(Rc=0<
Db.constant.length?Db.constant[0]:0,La=1<Db.constant.length?Db.constant[1]:0,Eb=2<Db.constant.length?Db.constant[2]:0,Gc=3<Db.constant.length?Db.constant[3]:0)):(Ta=t(Db.buffer)?O.createStream(34962,Db.buffer):O.getBuffer(Db.buffer),Xb="type"in Db?ra[Db.type]:Ta.dtype,$b=!!Db.normalized,Fd=Db.size|0,rc=Db.offset|0,Ac=Db.stride|0,Jc=Db.divisor|0);Wa=qa.location;wa=Y[Wa];if(1===Bd){wa.buffer||P.enableVertexAttribArray(Wa);md=Fd||1;if(wa.type!==Xb||wa.size!==md||wa.buffer!==Ta||wa.normalized!==$b||wa.offset!==
rc||wa.stride!==Ac)P.bindBuffer(34962,Ta.buffer),P.vertexAttribPointer(Wa,md,Xb,$b,Ac,rc),wa.type=Xb,wa.size=md,wa.buffer=Ta,wa.normalized=$b,wa.offset=rc,wa.stride=Ac;wa.divisor!==Jc&&(F.vertexAttribDivisorANGLE(Wa,Jc),wa.divisor=Jc)}else if(wa.buffer&&(P.disableVertexAttribArray(Wa),wa.buffer=null),wa.x!==Rc||wa.y!==La||wa.z!==Eb||wa.w!==Gc)P.vertexAttrib4f(Wa,Rc,La,Eb,Gc),wa.x=Rc,wa.y=La,wa.z=Eb,wa.w=Gc;hb=this.position;Sa=!1;Gb=null;db=0;ec=!1;ge=Sb=0;Zb=1;Tb=0;fd=5126;ub=pb=Ma=Ub=0;t(hb)?(Sa=
!0,Gb=O.createStream(34962,hb),fd=Gb.dtype):(Gb=O.getBuffer(hb))?fd=Gb.dtype:"constant"in hb?(Zb=2,"number"===typeof hb.constant?(Ma=hb.constant,pb=ub=Ub=0):(Ma=0<hb.constant.length?hb.constant[0]:0,pb=1<hb.constant.length?hb.constant[1]:0,ub=2<hb.constant.length?hb.constant[2]:0,Ub=3<hb.constant.length?hb.constant[3]:0)):(Gb=t(hb.buffer)?O.createStream(34962,hb.buffer):O.getBuffer(hb.buffer),fd="type"in hb?ra[hb.type]:Gb.dtype,ec=!!hb.normalized,ge=hb.size|0,Sb=hb.offset|0,Tb=hb.stride|0,db=hb.divisor|
0);ib=ma.location;Oa=Y[ib];if(1===Zb){Oa.buffer||P.enableVertexAttribArray(ib);Dc=ge||2;if(Oa.type!==fd||Oa.size!==Dc||Oa.buffer!==Gb||Oa.normalized!==ec||Oa.offset!==Sb||Oa.stride!==Tb)P.bindBuffer(34962,Gb.buffer),P.vertexAttribPointer(ib,Dc,fd,ec,Tb,Sb),Oa.type=fd,Oa.size=Dc,Oa.buffer=Gb,Oa.normalized=ec,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==db&&(F.vertexAttribDivisorANGLE(ib,db),Oa.divisor=db)}else if(Oa.buffer&&(P.disableVertexAttribArray(ib),Oa.buffer=null),Oa.x!==Ma||Oa.y!==pb||Oa.z!==ub||
Oa.w!==Ub)P.vertexAttrib4f(ib,Ma,pb,ub,Ub),Oa.x=Ma,Oa.y=pb,Oa.z=ub,Oa.w=Ub;Ib=N.call(this,M,c,0);P.uniform1f(ga.location,Ib);cd=g.call(this,M,c,0);P.uniform1f(l.location,cd);P.uniform1f(e.location,c.align);P.uniform1f(n.location,c.baseline);eb=this.viewportArray;P.uniform4f(oa.location,eb[0],eb[1],eb[2],eb[3]);lc=c.color;P.uniform4f(a.location,lc[0],lc[1],lc[2],lc[3]);dd=b.call(this,M,c,0);P.uniform2f(V.location,dd[0],dd[1]);dc=x.call(this,M,c,0);P.uniform2f(T.location,dc[0],dc[1]);kb=this.scale;
P.uniform2f(cb.location,kb[0],kb[1]);lb=this.translate;P.uniform2f(kc.location,lb[0],lb[1]);ta=c.positionOffset;P.uniform2f(Ka.location,ta[0],ta[1]);P.uniform1f(X.location,c.opacity);(qb=d.call(this,M,c,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);xa=qb._texture;P.uniform1i(D.location,xa.bind());(Ua=sa.elements)?P.bindBuffer(34963,Ua.buffer.buffer):Na.currentVAO&&(Ua=J.getElements(Na.currentVAO.elements))&&P.bindBuffer(34963,Ua.buffer.buffer);bb=c.offset;if(Aa=c.count)fb=sa.instances,0<fb?
Ua?F.drawElementsInstancedANGLE(0,Aa,Ua.type,bb<<(Ua.type-5121>>1),fb):F.drawArraysInstancedANGLE(0,bb,Aa,fb):0>fb&&(Ua?P.drawElements(0,Aa,Ua.type,bb<<(Ua.type-5121>>1)):P.drawArrays(0,bb,Aa)),R.dirty=!0,Na.setVAO(null),M.viewportWidth=p,M.viewportHeight=A,E&&(z.cpuTime+=performance.now()-H),I&&O.destroyStream(K),Sd&&O.destroyStream(Td),pc&&O.destroyStream(Ta),Sa&&O.destroyStream(Gb),xa.unbind()},scope:function(a,b,c){var d,e,f,g,h,l,n,r,w,x,B,N,C,D,F,I,J,L,W,P,T,U,ha,V,X,Y,ca,aa,ga,ia,ka,ua,ma,
oa,qa,va,Ca,Ha,Ka,Na,Qa,wc,$a,Ta,cb,ob,Lb,td,Ob,bc,Xb,nc,jc,La,Eb,Wa,wa,cc,hb,Sa,Gb,db,ec,Sb,kc,Zb,Tb,Qc,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,Zc,eb,lc,dd,dc,kb,lb,ta,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Id,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc;d=this.viewport;e=d.x|0;f=d.y|0;g="width"in d?d.width|0:M.framebufferWidth-e;h="height"in d?d.height|0:M.framebufferHeight-
f;l=M.viewportWidth;M.viewportWidth=g;n=M.viewportHeight;M.viewportHeight=h;r=Q[0];Q[0]=e;w=Q[1];Q[1]=f;x=Q[2];Q[2]=g;B=Q[3];Q[3]=h;N=Hb[0];Hb[0]=0;C=Hb[1];Hb[1]=0;D=Hb[2];Hb[2]=0;F=Hb[3];Hb[3]=1;I=la.blend_enable;la.blend_enable=!0;J=ea[0];ea[0]=770;L=ea[1];ea[1]=771;W=ea[2];ea[2]=773;P=ea[3];ea[3]=1;T=la.depth_enable;la.depth_enable=!1;U=la.stencil_enable;la.stencil_enable=!1;if(ha=R.profile)V=performance.now(),z.count++;X=a.offset;Y=sa.offset;sa.offset=X;ca=a.count;aa=sa.count;sa.count=ca;ga=sa.primitive;
sa.primitive=0;ia=a.align;ka=Ea[64];Ea[64]=ia;ua=v.call(this,M,a,c);ma=Ea[69];Ea[69]=ua;oa=na.call(this,M,a,c);qa=Ea[67];Ea[67]=oa;va=da.call(this,M,a,c);Ca=Ea[66];Ea[66]=va;Ha=a.baseline;Ka=Ea[65];Ea[65]=Ha;Na=K.call(this,M,a,c);Qa=Ea[62];Ea[62]=Na;wc=a.color;$a=Ea[14];Ea[14]=wc;Ta=E.call(this,M,a,c);cb=Ea[63];Ea[63]=Ta;ob=a.opacity;Lb=Ea[10];Ea[10]=ob;td=a.positionOffset;Ob=Ea[68];Ea[68]=td;bc=this.scale;Xb=Ea[6];Ea[6]=bc;nc=this.translate;jc=Ea[8];Ea[8]=nc;La=this.viewportArray;Eb=Ea[3];Ea[3]=
La;Wa=this.charBuffer;wa=!1;cc=null;hb=0;Sa=!1;db=Gb=0;ec=1;Sb=0;kc=5126;Ub=Qc=Tb=Zb=0;t(Wa)?(wa=!0,cc=O.createStream(34962,Wa),kc=cc.dtype):(cc=O.getBuffer(Wa))?kc=cc.dtype:"constant"in Wa?(ec=2,"number"===typeof Wa.constant?(Tb=Wa.constant,Qc=Ub=Zb=0):(Tb=0<Wa.constant.length?Wa.constant[0]:0,Qc=1<Wa.constant.length?Wa.constant[1]:0,Ub=2<Wa.constant.length?Wa.constant[2]:0,Zb=3<Wa.constant.length?Wa.constant[3]:0)):(cc=t(Wa.buffer)?O.createStream(34962,Wa.buffer):O.getBuffer(Wa.buffer),kc="type"in
Wa?ra[Wa.type]:cc.dtype,Sa=!!Wa.normalized,db=Wa.size|0,Gb=Wa.offset|0,Sb=Wa.stride|0,hb=Wa.divisor|0);Ma=u.buffer;u.buffer=cc;pb=u.divisor;u.divisor=hb;ub=u.normalized;u.normalized=Sa;ib=u.offset;u.offset=Gb;Oa=u.size;u.size=db;Dc=u.state;u.state=ec;Ib=u.stride;u.stride=Sb;Zc=u.type;u.type=kc;eb=u.w;u.w=Zb;lc=u.x;u.x=Tb;dd=u.y;u.y=Qc;dc=u.z;u.z=Ub;G.buffer=this.sizeBuffer;kb=!1;lb=null;ta=0;qb=!1;Ua=xa=0;bb=1;Aa=0;fb=5126;Ra=zb=Ab=Ia=0;t(G)?(kb=!0,lb=O.createStream(34962,G),fb=lb.dtype):(lb=O.getBuffer(G))?
fb=lb.dtype:"constant"in G?(bb=2,"number"===typeof G.constant?(Ab=G.constant,zb=Ra=Ia=0):(Ab=0<G.constant.length?G.constant[0]:0,zb=1<G.constant.length?G.constant[1]:0,Ra=2<G.constant.length?G.constant[2]:0,Ia=3<G.constant.length?G.constant[3]:0)):(lb=t(G.buffer)?O.createStream(34962,G.buffer):O.getBuffer(G.buffer),fb="type"in G?ra[G.type]:lb.dtype,qb=!!G.normalized,Ua=G.size|0,xa=G.offset|0,Aa=G.stride|0,ta=G.divisor|0);Kc=A.buffer;A.buffer=lb;Jb=A.divisor;A.divisor=ta;Za=A.normalized;A.normalized=
qb;Vb=A.offset;A.offset=xa;ya=A.size;A.size=Ua;Id=A.state;A.state=bb;Ja=A.stride;A.stride=Aa;Pb=A.type;A.type=fb;gb=A.w;A.w=Ia;jb=A.x;A.x=Ab;za=A.y;A.y=zb;fc=A.z;A.z=Ra;Da=this.position;rb=!1;sb=null;Xa=0;Ya=!1;xc=mc=0;uc=1;Va=0;Mb=5126;Pa=yc=Fa=Xc=0;t(Da)?(rb=!0,sb=O.createStream(34962,Da),Mb=sb.dtype):(sb=O.getBuffer(Da))?Mb=sb.dtype:"constant"in Da?(uc=2,"number"===typeof Da.constant?(Fa=Da.constant,yc=Pa=Xc=0):(Fa=0<Da.constant.length?Da.constant[0]:0,yc=1<Da.constant.length?Da.constant[1]:0,
Pa=2<Da.constant.length?Da.constant[2]:0,Xc=3<Da.constant.length?Da.constant[3]:0)):(sb=t(Da.buffer)?O.createStream(34962,Da.buffer):O.getBuffer(Da.buffer),Mb="type"in Da?ra[Da.type]:sb.dtype,Ya=!!Da.normalized,xc=Da.size|0,mc=Da.offset|0,Va=Da.stride|0,Xa=Da.divisor|0);Ba=H.buffer;H.buffer=sb;mb=H.divisor;H.divisor=Xa;vb=H.normalized;H.normalized=Ya;Cb=H.offset;H.offset=mc;tb=H.size;H.size=xc;vc=H.state;H.state=uc;wb=H.stride;H.stride=Va;wd=H.type;H.type=Mb;sc=H.w;H.w=Xc;ud=H.x;H.x=Fa;Mc=H.y;H.y=
yc;ld=H.z;H.z=Pa;m.buffer=this.sizeBuffer;sd=!1;Wb=null;ac=0;Qb=!1;Yb=Ga=0;nb=1;xb=0;Nb=5126;Ye=ic=gc=Rb=0;t(m)?(sd=!0,Wb=O.createStream(34962,m),Nb=Wb.dtype):(Wb=O.getBuffer(m))?Nb=Wb.dtype:"constant"in m?(nb=2,"number"===typeof m.constant?(gc=m.constant,ic=Ye=Rb=0):(gc=0<m.constant.length?m.constant[0]:0,ic=1<m.constant.length?m.constant[1]:0,Ye=2<m.constant.length?m.constant[2]:0,Rb=3<m.constant.length?m.constant[3]:0)):(Wb=t(m.buffer)?O.createStream(34962,m.buffer):O.getBuffer(m.buffer),Nb="type"in
m?ra[m.type]:Wb.dtype,Qb=!!m.normalized,Yb=m.size|0,Ga=m.offset|0,xb=m.stride|0,ac=m.divisor|0);Bc=q.buffer;q.buffer=Wb;Cc=q.divisor;q.divisor=ac;Ec=q.normalized;q.normalized=Qb;Nc=q.offset;q.offset=Ga;Yc=q.size;q.size=Yb;Sc=q.state;q.state=nb;Oc=q.stride;q.stride=xb;Kb=q.type;q.type=Nb;Fb=q.w;q.w=Rb;Pc=q.x;q.x=gc;Hc=q.y;q.y=ic;Tc=q.z;q.z=Ye;hc=fa.vert;fa.vert=61;Vc=fa.frag;fa.frag=60;R.dirty=!0;b(M,a,c);M.viewportWidth=l;M.viewportHeight=n;Q[0]=r;Q[1]=w;Q[2]=x;Q[3]=B;Hb[0]=N;Hb[1]=C;Hb[2]=D;Hb[3]=
F;la.blend_enable=I;ea[0]=J;ea[1]=L;ea[2]=W;ea[3]=P;la.depth_enable=T;la.stencil_enable=U;ha&&(z.cpuTime+=performance.now()-V);sa.offset=Y;sa.count=aa;sa.primitive=ga;Ea[64]=ka;Ea[69]=ma;Ea[67]=qa;Ea[66]=Ca;Ea[65]=Ka;Ea[62]=Qa;Ea[14]=$a;Ea[63]=cb;Ea[10]=Lb;Ea[68]=Ob;Ea[6]=Xb;Ea[8]=jc;Ea[3]=Eb;wa&&O.destroyStream(cc);u.buffer=Ma;u.divisor=pb;u.normalized=ub;u.offset=ib;u.size=Oa;u.state=Dc;u.stride=Ib;u.type=Zc;u.w=eb;u.x=lc;u.y=dd;u.z=dc;kb&&O.destroyStream(lb);A.buffer=Kc;A.divisor=Jb;A.normalized=
Za;A.offset=Vb;A.size=ya;A.state=Id;A.stride=Ja;A.type=Pb;A.w=gb;A.x=jb;A.y=za;A.z=fc;rb&&O.destroyStream(sb);H.buffer=Ba;H.divisor=mb;H.normalized=vb;H.offset=Cb;H.size=tb;H.state=vc;H.stride=wb;H.type=wd;H.w=sc;H.x=ud;H.y=Mc;H.z=ld;sd&&O.destroyStream(Wb);q.buffer=Bc;q.divisor=Cc;q.normalized=Ec;q.offset=Nc;q.size=Yc;q.state=Sc;q.stride=Oc;q.type=Kb;q.w=Fb;q.x=Pc;q.y=Hc;q.z=Tc;fa.vert=hc;fa.frag=Vc;R.dirty=!0}}}}},{}],25:[function(z,aa,jc){var c=z("./sorted-object-keys");aa.exports=function(z,r){for(var N=
c(r),g=0;g<N.length;++g)z[N[g]]=r[N[g]];return z}},{"./sorted-object-keys":34}],26:[function(z,aa,jc){function c(c,g,b,r,d,v){for(var z=0;z<g;++z)for(var ba=c[z],K=0;K<b;++K)for(var E=ba[K],u=0;u<r;++u)d[v++]=E[u]}function ba(r,g,b,x,d){for(var v=1,z=b+1;z<g.length;++z)v*=g[z];var da=g[b];if(4===g.length-b){var K=g[b+1],E=g[b+2];g=g[b+3];for(z=0;z<da;++z)c(r[z],K,E,g,x,d),d+=v}else for(z=0;z<da;++z)ba(r[z],g,b+1,x,d),d+=v}var r=z("./pool");aa.exports={shape:function(c){for(var g=[];c.length;c=c[0])g.push(c.length);
return g},flatten:function(z,g,b,x){var d=1;if(g.length)for(var v=0;v<g.length;++v)d*=g[v];else d=0;b=x||r.allocType(b,d);switch(g.length){case 0:break;case 1:x=g[0];for(g=0;g<x;++g)b[g]=z[g];break;case 2:x=g[0];g=g[1];for(v=d=0;v<x;++v)for(var aa=z[v],da=0;da<g;++da)b[d++]=aa[da];break;case 3:c(z,g[0],g[1],g[2],b,0);break;default:ba(z,g,0,b,0)}return b}}},{"./pool":32}],27:[function(z,aa,jc){var c=z("./is-typed-array");aa.exports=function(z){return Array.isArray(z)||c(z)}},{"./is-typed-array":30}],
28:[function(z,aa,jc){var c=z("./is-typed-array");aa.exports=function(z){return!!z&&"object"===typeof z&&Array.isArray(z.shape)&&Array.isArray(z.stride)&&"number"===typeof z.offset&&z.shape.length===z.stride.length&&(Array.isArray(z.data)||c(z.data))}},{"./is-typed-array":30}],29:[function(z,aa,jc){aa.exports=function(c){return!(c&c-1)&&!!c}},{}],30:[function(z,aa,jc){aa.exports=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||
c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray}},{}],31:[function(z,aa,jc){aa.exports=function(c,z){for(var r=Array(c),N=0;N<c;++N)r[N]=z(N);return r}},{}],32:[function(z,aa,jc){function c(c){var g,b;g=(65535<c)<<4;c>>>=g;b=(255<c)<<3;c>>>=b;g|=b;b=(15<c)<<2;c>>>=b;g|=b;b=(3<c)<<1;return g|b|c>>>b>>1}function ba(){function z(g){a:{for(var d=16;268435456>=d;d*=16)if(g<=d){g=d;break a}g=0}d=b[c(g)>>2];return 0<d.length?
d.pop():new ArrayBuffer(g)}function g(g){b[c(g.byteLength)>>2].push(g)}var b=r(8,function(){return[]});return{alloc:z,free:g,allocType:function(b,c){var g=null;switch(b){case 5120:g=new Int8Array(z(c),0,c);break;case 5121:g=new Uint8Array(z(c),0,c);break;case 5122:g=new Int16Array(z(2*c),0,c);break;case 5123:g=new Uint16Array(z(2*c),0,c);break;case 5124:g=new Int32Array(z(4*c),0,c);break;case 5125:g=new Uint32Array(z(4*c),0,c);break;case 5126:g=new Float32Array(z(4*c),0,c);break;default:return null}return g.length!==
c?g.subarray(0,c):g},freeType:function(b){g(b.buffer)}}}var r=z("./loop");z=ba();z.zero=ba();aa.exports=z},{"./loop":31}],33:[function(z,aa,jc){aa.exports={next:"function"===typeof requestAnimationFrame?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:"function"===typeof cancelAnimationFrame?function(c){return cancelAnimationFrame(c)}:clearTimeout}},{}],34:[function(z,aa,jc){aa.exports=function(c){return Object.keys(c).sort()}},{}],35:[function(z,aa,jc){var c=
z("./pool"),ba=new Float32Array(1),r=new Uint32Array(ba.buffer);aa.exports=function(z){for(var g=c.allocType(5123,z.length),b=0;b<z.length;++b)if(isNaN(z[b]))g[b]=65535;else if(Infinity===z[b])g[b]=31744;else if(-Infinity===z[b])g[b]=64512;else{ba[0]=z[b];var x=r[0],d=x>>>31<<15,v=(x<<1>>>24)-127,x=x>>13&1023;g[b]=-24>v?d:-14>v?d+(x+1024>>-14-v):15<v?d+31744:d+(v+15<<10)+x}return g}},{"./pool":32}],36:[function(z,aa,jc){var c=z("./sorted-object-keys");aa.exports=function(z){return c(z).map(function(c){return z[c]})}},
{"./sorted-object-keys":34}],37:[function(z,aa,jc){function c(c,d,g){function r(){var b=window.innerWidth,d=window.innerHeight;c!==document.body&&(d=z.getBoundingClientRect(),b=d.right-d.left,d=d.bottom-d.top);z.width=g*b;z.height=g*d}var z=document.createElement("canvas");b(z.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});c.appendChild(z);c===document.body&&(z.style.position="absolute",b(c.style,{margin:0,padding:0}));var K;c!==document.body&&"function"===typeof ResizeObserver?
(K=new ResizeObserver(function(){setTimeout(r)}),K.observe(c)):window.addEventListener("resize",r,!1);r();return{canvas:z,onDestroy:function(){K?K.disconnect():window.removeEventListener("resize",r);c.removeChild(z)}}}function ba(b,c){function g(r){try{return b.getContext(r,c)}catch(v){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}function r(b){if("string"===typeof b)return b.split();g(Array.isArray(b),"invalid extension array");return b}function N(b){return"string"===
typeof b?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(b)):b}var g=z("./util/check"),b=z("./util/extend");aa.exports=function(b){var d=b||{},v,z,da,K;b={};var E=[],u=[],A="undefined"===typeof window?1:window.devicePixelRatio,H=!1,q=function(b){b&&g.raise(b)},F=function(){};"string"===typeof d?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),v=document.querySelector(d),g(v,"invalid query string for element")):"object"===
typeof d?"string"===typeof d.nodeName&&"function"===typeof d.appendChild&&"function"===typeof d.getBoundingClientRect?v=d:"function"===typeof d.drawArrays||"function"===typeof d.drawElements?(K=d,da=K.canvas):(g.constructor(d),"gl"in d?K=d.gl:"canvas"in d?da=N(d.canvas):"container"in d&&(z=N(d.container)),"attributes"in d&&(b=d.attributes,g.type(b,"object","invalid context attributes")),"extensions"in d&&(E=r(d.extensions)),"optionalExtensions"in d&&(u=r(d.optionalExtensions)),"onDone"in d&&(g.type(d.onDone,
"function","invalid or missing onDone callback"),q=d.onDone),"profile"in d&&(H=!!d.profile),"pixelRatio"in d&&(A=+d.pixelRatio,g(0<A,"invalid pixel ratio"))):g.raise("invalid arguments to regl");v&&("canvas"===v.nodeName.toLowerCase()?da=v:z=v);if(!K){if(!da){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");v=c(z||document.body,q,A);if(!v)return null;da=v.canvas;F=v.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);K=ba(da,b)}return K?
{gl:K,canvas:da,container:z,extensions:E,optionalExtensions:u,pixelRatio:A,profile:H,onDone:q,onDestroy:F}:(F(),q("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(z,aa,jc){function c(b,c){for(var d=0;d<b.length;++d)if(b[d]===c)return d;return-1}var ba=z("./lib/util/check"),r=z("./lib/util/extend"),N=z("./lib/dynamic"),g=z("./lib/util/raf"),b=z("./lib/util/clock"),x=z("./lib/strings"),d=z("./lib/webgl"),
v=z("./lib/extension"),na=z("./lib/limits"),da=z("./lib/buffer"),K=z("./lib/elements"),E=z("./lib/texture"),u=z("./lib/renderbuffer"),A=z("./lib/framebuffer"),H=z("./lib/attribute"),q=z("./lib/shader"),F=z("./lib/read"),ca=z("./lib/core"),I=z("./lib/stats"),Id=z("./lib/timer");aa.exports=function(h){function f(){if(0===ob.length)O&&O.update(),cc=null;else{cc=g.next(f);a();for(var b=ob.length-1;0<=b;--b){var c=ob[b];c&&c(J,null,0)}ma.flush();O&&O.update()}}function e(){!cc&&0<ob.length&&(cc=g.next(f))}
function z(){cc&&(g.cancel(f),cc=null)}function T(a){a.preventDefault();cb=!0;z();ea.forEach(function(a){a()})}function V(a){ma.getError();cb=!1;kc.restore();la.restore();$a.restore();fa.restore();Ea.restore();Na.restore();t.restore();O&&O.restore();Hb.procs.refresh();e();va.forEach(function(a){a()})}function n(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(N.isDynamic(f))e[b]=N.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(N.isDynamic(f[g])){e[b]=
N.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;t.length<a;)t.push(null);return t}ba(!!a,"invalid args to regl({...})");ba.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=r({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Hb.compile(a,f,e,d,g),l=h.draw,n=h.batch,q=h.scope,t=[];return r(function(a,b){var d;cb&&ba.raise("context lost");if("function"===typeof a)return q.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)q.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)q.call(this,a[d],b,d);else return q.call(this,a,b,0);else if("number"===typeof a){if(0<a)return n.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return n.call(this,a,a.length)}else return l.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function aa(a,b){var c=0;Hb.procs.poll();var d=b.color;d&&(ma.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ma.clearDepth(+b.depth),c|=256);"stencil"in b&&(ma.clearStencil(b.stencil|0),c|=1024);ba(!!c,
"called regl.clear with no buffer specified");ma.clear(c)}function L(a){ba.type(a,"function","regl.frame() callback must be a function");ob.push(a);e();return{cancel:function(){function b(){var a=c(ob,b);ob[a]=ob[ob.length-1];--ob.length;0>=ob.length&&z()}var d=c(ob,a);ba(0<=d,"cannot cancel a frame twice");ob[d]=b}}}function ga(){var a=Ha.viewport,b=Ha.scissor_box;a[0]=a[1]=b[0]=b[1]=0;J.viewportWidth=J.framebufferWidth=J.drawingBufferWidth=a[2]=b[2]=ma.drawingBufferWidth;J.viewportHeight=J.framebufferHeight=
J.drawingBufferHeight=a[3]=b[3]=ma.drawingBufferHeight}function a(){J.tick+=1;J.time=X();ga();Hb.procs.poll()}function l(){fa.refresh();ga();Hb.procs.refresh();O&&O.update()}function X(){return(b()-M)/1E3}console.log("REGL args are:",h);h=d(h);console.log("REGL configs are:",h);if(!h)return null;var ma=h.gl,Ka=ma.getContextAttributes(),cb=ma.isContextLost(),kc=v(ma,h);if(!kc)return null;var oa=x(),Qa=I(),Y=kc.extensions,O=Id(ma,Y),M=b(),R=ma.drawingBufferWidth,sa=ma.drawingBufferHeight,J={tick:0,
time:0,viewportWidth:R,viewportHeight:sa,framebufferWidth:R,framebufferHeight:sa,drawingBufferWidth:R,drawingBufferHeight:sa,pixelRatio:h.pixelRatio},R={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ob=na(ma,Y),$a=da(ma,Qa,h,function(a){return t.destroyBuffer(a)}),P=K(ma,Y,$a,Qa),t=H(ma,Y,Ob,Qa,$a,P,R),la=q(ma,oa,Qa,h),fa=E(ma,Y,Ob,function(){Hb.procs.poll()},J,Qa,h),Ea=u(ma,Y,Ob,Qa,h),Na=A(ma,Y,Ob,fa,Ea,Qa),Hb=ca(ma,oa,Y,Ob,$a,P,fa,Na,{},t,la,R,J,O,h),oa=F(ma,Na,Hb.procs.poll,J,Ka,Y,
Ob),Ha=Hb.next,U=ma.canvas,ob=[],ea=[],va=[],bc=[h.onDestroy],cc=null;U&&(U.addEventListener("webglcontextlost",T,!1),U.addEventListener("webglcontextrestored",V,!1));var jc=Na.setFBO=n({framebuffer:N.define.call(null,1,"framebuffer")});l();Ka=r(n,{clear:function(a){ba("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)jc(r({framebuffer:a.framebuffer.faces[b]},a),aa);else jc(a,aa);else aa(null,
a)},prop:N.define.bind(null,1),context:N.define.bind(null,2),"this":N.define.bind(null,3),draw:n({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return P.create(a,!1)},texture:fa.create2D,cube:fa.createCube,renderbuffer:Ea.create,framebuffer:Na.create,framebufferCube:Na.createCube,vao:t.createVAO,attributes:Ka,frame:L,on:function(a,b){ba.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return L(b);case "lost":c=ea;break;case "restore":c=
va;break;case "destroy":c=bc;break;default:ba.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Ob,hasExtension:function(a){return 0<=Ob.extensions.indexOf(a.toLowerCase())},read:oa,destroy:function(){ob.length=0;z();U&&(U.removeEventListener("webglcontextlost",T),U.removeEventListener("webglcontextrestored",V));la.clear();Na.clear();Ea.clear();t.clear();fa.clear();
P.clear();$a.clear();O&&O.clear();bc.forEach(function(a){a()})},_gl:ma,_refresh:l,poll:function(){a();O&&O.update()},now:X,stats:Qa});h.onDone(null,Ka);return Ka}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,
"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
var $jscomp={scope:{},getGlobal:function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global?global:d}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return"jscomp_symbol_"+d+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();if(d[$jscomp.global.Symbol.iterator])return d[$jscomp.global.Symbol.iterator]();var h=0;return{next:function(){return h==d.length?{done:!0}:{done:!1,value:d[h++]}}}};
$jscomp.arrayFromIterator=function(d){for(var h,t=[];!(h=d.next()).done;)t.push(h.value);return t};$jscomp.arrayFromIterable=function(d){return d instanceof Array?d:$jscomp.arrayFromIterator($jscomp.makeIterator(d))};
$jscomp.inherits=function(d,h){function t(){}t.prototype=h.prototype;d.prototype=new t;d.prototype.constructor=d;for(var a in h)if($jscomp.global.Object.defineProperties){var c=$jscomp.global.Object.getOwnPropertyDescriptor(h,a);c&&$jscomp.global.Object.defineProperty(d,a,c)}else d[a]=h[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(d,h){d instanceof String&&(d=String(d));var t=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},c=(a.next=function(){if(t<d.length){var a=t++;return{value:h(a,d[a]),done:!1}}c.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return c},a);return c};
$jscomp.array.findInternal_=function(d,h,t){d instanceof String&&(d=String(d));for(var a=d.length,c=0;c<a;c++){var A=d[c];if(h.call(t,A,c,d))return{i:c,v:A}}return{i:-1,v:void 0}};
$jscomp.array.from=function(d,h,t){h=void 0===h?function(c){return c}:h;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(d[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();d=d[Symbol.iterator]();for(var c;!(c=d.next()).done;)a.push(h.call(t,c.value))}else{c=d.length;for(var A=0;A<c;A++)a.push(h.call(t,d[A]))}return a};$jscomp.array.of=function(d){for(var h=[],t=0;t<arguments.length;++t)h[t-0]=arguments[t];return $jscomp.array.from(h)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(d,h){return[d,h]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(d){return d})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(d,h){return h})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(d,h,t){var a=this.length;d=Number(d);h=Number(h);t=Number(null!=t?t:a);if(d<h)for(t=Math.min(t,a);h<t;)h in this?this[d++]=this[h++]:(delete this[d++],h++);else for(t=Math.min(t,a+h-d),d+=t-h;t>h;)--t in this?this[--d]=this[t]:delete this[d];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(d,h,t){null!=t&&d.length||(t=this.length||0);t=Number(t);for(h=Number((void 0===h?0:h)||0);h<t;h++)this[h]=d;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(d,h){return $jscomp.array.findInternal_(this,d,h).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(d,h){return $jscomp.array.findInternal_(this,d,h).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(d){d=void 0===d?[]:d;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(d){d=$jscomp.makeIterator(d);for(var h=d.next();!h.done;h=d.next())h=h.value,this.set(h[0],h[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var d=$jscomp.global.Map;if(!d||!d.prototype.entries||!Object.seal)return!1;try{var h=Object.seal({x:4}),t=new d($jscomp.makeIterator([[h,"s"]]));if("s"!=t.get(h)||1!=t.size||t.get({x:4})||t.set({x:4},"t")!=t||2!=t.size)return!1;var a=t.entries(),c=a.next();if(c.done||c.value[0]!=h||"s"!=c.value[1])return!1;c=a.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!a.next().done?!1:!0}catch(A){return!1}};
$jscomp.Map.createHead_=function(){var d={};return d.previous=d.next=d.head=d};$jscomp.Map.getId_=function(d){if(!(d instanceof Object))return String(d);$jscomp.Map.key_ in d||d instanceof Object&&Object.isExtensible&&Object.isExtensible(d)&&$jscomp.Map.defineProperty_(d,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in d?d[$jscomp.Map.key_]:" "+d};
$jscomp.Map.prototype.set=function(d,h){var t=this.maybeGetEntry_(d),a=t.id,c=t.list,t=t.entry;c||(c=this.data_[a]=[]);t?t.value=h:(t={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:h},c.push(t),this.head_.previous.next=t,this.head_.previous=t,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(d){var h=this.maybeGetEntry_(d);d=h.id;var t=h.list,a=h.index;return(h=h.entry)&&t?(t.splice(a,1),t.length||delete this.data_[d],h.previous.next=h.next,h.next.previous=h.previous,h.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(d){return!!this.maybeGetEntry_(d).entry};
$jscomp.Map.prototype.get=function(d){return(d=this.maybeGetEntry_(d).entry)&&d.value};$jscomp.Map.prototype.maybeGetEntry_=function(d){var h=$jscomp.Map.getId_(d),t=this.data_[h];if(t)for(var a=0;a<t.length;a++){var c=t[a];if(d!==d&&c.key!==c.key||d===c.key)return{id:h,list:t,index:a,entry:c}}return{id:h,list:t,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(d){return[d.key,d.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(d){return d.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(d){return d.value})};$jscomp.Map.prototype.forEach=function(d,h){for(var t=$jscomp.makeIterator(this.entries()),a=t.next();!a.done;a=t.next())a=a.value,d.call(h,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(d){var h=this,t=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(t){for(;t.head!=h.head_;)t=t.previous;for(;t.next!=t.head;)return t=t.next,{done:!1,value:d(t)};t=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(d,h,t){Object.defineProperty(d,h,{value:String(t)})}:function(d,h,t){d[h]=String(t)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(d){d=Number(d)>>>0;if(0===d)return 32;var h=0;0===(d&4294901760)&&(d<<=16,h+=16);0===(d&4278190080)&&(d<<=8,h+=8);0===(d&4026531840)&&(d<<=4,h+=4);0===(d&3221225472)&&(d<<=2,h+=2);0===(d&2147483648)&&h++;return h};$jscomp.math.imul=function(d,h){d=Number(d);h=Number(h);var t=d&65535,a=h&65535;return t*a+((d>>>16&65535)*a+t*(h>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1};
$jscomp.math.log10=function(d){return Math.log(d)/Math.LN10};$jscomp.math.log2=function(d){return Math.log(d)/Math.LN2};$jscomp.math.log1p=function(d){d=Number(d);if(.25>d&&-.25<d){for(var h=d,t=1,a=d,c=0,A=1;c!=a;)h*=d,A*=-1,a=(c=a)+A*h/++t;return a}return Math.log(1+d)};$jscomp.math.expm1=function(d){d=Number(d);if(.25>d&&-.25<d){for(var h=d,t=1,a=d,c=0;c!=a;)h*=d/++t,a=(c=a)+h;return a}return Math.exp(d)-1};$jscomp.math.cosh=function(d){d=Number(d);return(Math.exp(d)+Math.exp(-d))/2};
$jscomp.math.sinh=function(d){d=Number(d);return 0===d?d:(Math.exp(d)-Math.exp(-d))/2};$jscomp.math.tanh=function(d){d=Number(d);if(0===d)return d;var h=Math.exp(2*-Math.abs(d)),h=(1-h)/(1+h);return 0>d?-h:h};$jscomp.math.acosh=function(d){d=Number(d);return Math.log(d+Math.sqrt(d*d-1))};$jscomp.math.asinh=function(d){d=Number(d);if(0===d)return d;var h=Math.log(Math.abs(d)+Math.sqrt(d*d+1));return 0>d?-h:h};
$jscomp.math.atanh=function(d){d=Number(d);return($jscomp.math.log1p(d)-$jscomp.math.log1p(-d))/2};
$jscomp.math.hypot=function(d,h,t){for(var a=[],c=2;c<arguments.length;++c)a[c-2]=arguments[c];d=Number(d);h=Number(h);for(var A=Math.max(Math.abs(d),Math.abs(h)),D=$jscomp.makeIterator(a),c=D.next();!c.done;c=D.next())A=Math.max(A,Math.abs(c.value));if(1E100<A||1E-100>A){d/=A;h/=A;D=d*d+h*h;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c)/A,D+=c*c;return Math.sqrt(D)*A}A=d*d+h*h;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c),A+=
c*c;return Math.sqrt(A)};$jscomp.math.trunc=function(d){d=Number(d);if(isNaN(d)||Infinity===d||-Infinity===d||0===d)return d;var h=Math.floor(Math.abs(d));return 0>d?-h:h};$jscomp.math.cbrt=function(d){if(0===d)return d;d=Number(d);var h=Math.pow(Math.abs(d),1/3);return 0>d?-h:h};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(d){return"number"!==typeof d?!1:!isNaN(d)&&Infinity!==d&&-Infinity!==d};
$jscomp.number.isInteger=function(d){return $jscomp.number.isFinite(d)?d===Math.floor(d):!1};$jscomp.number.isNaN=function(d){return"number"===typeof d&&isNaN(d)};$jscomp.number.isSafeInteger=function(d){return $jscomp.number.isInteger(d)&&Math.abs(d)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(d,h){for(var t=[],a=1;a<arguments.length;++a)t[a-1]=arguments[a];t=$jscomp.makeIterator(t);for(a=t.next();!a.done;a=t.next())if(a=a.value)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d};$jscomp.object.is=function(d,h){return d===h?0!==d||1/d===1/h:d!==d&&h!==h};$jscomp.Set=function(d){d=void 0===d?[]:d;this.map_=new $jscomp.Map;if(d){d=$jscomp.makeIterator(d);for(var h=d.next();!h.done;h=d.next())this.add(h.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var d=$jscomp.global.Set;if(!d||!d.prototype.entries||!Object.seal)return!1;var h=Object.seal({x:4}),d=new d($jscomp.makeIterator([h]));if(d.has(h)||1!=d.size||d.add(h)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var d=d.entries(),t=d.next();if(t.done||t.value[0]!=h||t.value[1]!=h)return!1;t=d.next();return t.done||t.value[0]==h||4!=t.value[0].x||t.value[1]!=t.value[0]?!1:d.next().done};
$jscomp.Set.prototype.add=function(d){this.map_.set(d,d);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(d){d=this.map_["delete"](d);this.size=this.map_.size;return d};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(d){return this.map_.has(d)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(d,h){var t=this;this.map_.forEach(function(a){return d.call(h,a,a,t)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(d,h){if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(d){for(var h=[],t=0;t<arguments.length;++t)h[t-0]=arguments[t];for(var t="",h=$jscomp.makeIterator(h),a=h.next();!a.done;a=h.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?t+=String.fromCharCode(a):(a-=65536,t+=String.fromCharCode(a>>>10&1023|55296),t+=String.fromCharCode(a&1023|56320))}return t};
$jscomp.string.repeat=function(d){var h=this.toString();if(0>d||1342177279<d)throw new RangeError("Invalid count value");d|=0;for(var t="";d;)if(d&1&&(t+=h),d>>>=1)h+=h;return t};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(d){var h=this.toString(),t=h.length;d=Number(d)||0;if(0<=d&&d<t){d|=0;var a=h.charCodeAt(d);if(55296>a||56319<a||d+1===t)return a;d=h.charCodeAt(d+1);return 56320>d||57343<d?a:1024*(a-55296)+d+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(d,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(d,"includes");return-1!==this.toString().indexOf(d,h)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(d,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(d,"startsWith");var t=this.toString();d+="";for(var a=t.length,c=d.length,A=Math.max(0,Math.min(h|0,t.length)),D=0;D<c&&A<a;)if(t[A++]!=d[D++])return!1;return D>=c};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(d,h){$jscomp.string.noRegExp_(d,"endsWith");var t=this.toString();d+="";void 0===h&&(h=t.length);for(var a=Math.max(0,Math.min(h|0,t.length)),c=d.length;0<c&&0<a;)if(t[--a]!=d[--c])return!1;return 0>=c};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function d(h,t,a){function c(m,l){if(!t[m]){if(!h[m]){var f="function"==typeof require&&require;if(!l&&f)return f(m,!0);if(A)return A(m,!0);f=Error("Cannot find module '"+m+"'");throw f.code="MODULE_NOT_FOUND",f;}f=t[m]={exports:{}};h[m][0].call(f.exports,function(f){return c(h[m][1][f]||f)},f,f.exports,d,h,t,a)}return t[m].exports}for(var A="function"==typeof require&&require,D=0;D<a.length;D++)c(a[D]);return c}return d})()({1:[function(d,h,t){t=document.createElement("canvas");h=document.body.appendChild(t);
t=t.getContext("webgl",{antialias:!0,stencil:!0});var a=d("canvas-fit"),c=d("gl-mat4"),A=d("../regl")({gl:t}),D=d("canvas-orbit-camera")(h);window.addEventListener("resize",a(h),!1);D.rotate([0,0],[0,-.4]);D.zoom(-28);var m=[.7,.3,.3],l=[.3,.2,.3],f=[.7,.7,.7],k=[.3,.3,.3];d("resl")({manifest:{DATA:{type:"text",src:"assets/shadow_bunny.json",parser:JSON.parse}},onDone:function(b){var a=b.DATA;b=A.buffer(a.MESH);var B=A.buffer(a.SHADOW),y=A({uniforms:{lightDir:function(){return[-.39,-.87,-.29]},camera:function(b){var g=
1/Math.tan(Math.PI/2/2),e=[];e[0]=g/(b.viewportWidth/b.viewportHeight);e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=g;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=0;e[11]=-1;e[12]=0;e[13]=0;e[14]=-.01;e[15]=0;b=D.view();return c.multiply([],e,b)}}}),e=A({depth:{enable:!0,mask:!0,func:"<="},stencil:{enable:!1},colorMask:[!0,!0,!0,!0],cull:{enable:!0,face:"back"}}),g=A({depth:{mask:!1,enable:!0,func:"<"},stencil:{enable:!0,mask:255,func:{cmp:"always",ref:0,mask:255},opBack:{fail:"keep",zfail:"increment wrap",zpass:"keep"},
opFront:{fail:"keep",zfail:"decrement wrap",zpass:"keep"}},cull:{enable:!1},colorMask:[!1,!1,!1,!1]}),n=A({depth:{mask:!1,enable:!0,func:"<="},stencil:{enable:!0,mask:255,func:{cmp:"!=",ref:0,mask:255},op:{fail:"keep",zfail:"keep",pass:"keep"}},colorMask:[!0,!0,!0,!0],cull:{enable:!0,face:"back"}}),p=[],r=[],u=[];r.push([-10,0,-10]);r.push([10,0,-10]);r.push([-10,0,10]);r.push([10,0,10]);u.push([0,1,0]);u.push([0,1,0]);u.push([0,1,0]);u.push([0,1,0]);p.push([3,1,0]);p.push([0,2,3]);var K=A({vert:"\n    precision mediump float;\n    attribute vec3 position;\n    attribute vec3 normal;\n\n    uniform vec3 lightDir;\n    uniform mat4 camera;\n    uniform mat4 model;\n\n    varying float intensity;\n\n    void main() {\n      intensity = max(-dot(lightDir, normal), 0.0);\n      gl_Position = camera * model * vec4(position, 1);\n    }\n    ",
frag:"\n    precision mediump float;\n\n    uniform vec3 diffuse;\n    uniform vec3 ambient;\n\n    varying float intensity;\n\n    void main() {\n      gl_FragColor = vec4(diffuse * intensity + ambient, 1);\n    }\n    ",uniforms:{ambient:function(){return k},diffuse:function(b,e){var g=e.intensity;return[g*f[0],g*f[1],g*f[2]]},model:A.prop("model")},attributes:{position:r,normal:u},elements:p,cull:{enable:!0}}),x=A({vert:"\n    precision mediump float;\n    attribute vec3 position;\n    attribute vec3 normal;\n\n    uniform vec3 lightDir;\n    uniform mat4 camera;\n    uniform mat4 model;\n\n    varying float intensity;\n\n    void main() {\n      intensity = max(-dot(lightDir, normal), 0.0);\n      gl_Position = camera * model * vec4(position, 1);\n    }\n    ",
frag:"\n    precision mediump float;\n\n    uniform vec3 diffuse;\n    uniform vec3 ambient;\n\n    varying float intensity;\n\n    void main() {\n      gl_FragColor = vec4(diffuse * intensity + ambient, 1);\n    }\n    ",attributes:{position:{buffer:b,offset:0,normalized:!1,stride:24,size:3},normal:{buffer:b,offset:12,normalized:!1,stride:24,size:3}},uniforms:{ambient:function(){return l},diffuse:function(b,e){var g=e.intensity;return[g*m[0],g*m[1],g*m[2]]},model:A.prop("model")},count:function(){return a.MESH.length/
6}}),d=A({frag:"\n      precision mediump float;\n\n      void main() {\n        if(gl_FrontFacing) {\n          gl_FragColor = vec4(0,1,0,1);  // useful color for debugging.\n        } else {\n          gl_FragColor = vec4(1,0,0,1); // useful color for debugging.\n        }\n      }\n      "}),v=A({vert:"\n      precision mediump float;\n      attribute vec4 position;\n      attribute vec3 normal0, normal1;\n\n      uniform vec3 lightDir;\n      uniform mat4 camera;\n      uniform mat4 model;\n      void main() {\n        /*\n          Every edge of the rabbit is assigned a triangle. To all the vertices of that assigned\n          triangle, we assign the face-normals of the two triangles incident to that edge.\n\n          For that assigned triangle we have that:\n          The first vertex is the first edge-vertex, and w=1\n          The second vertex is the second edge-vertex, and w=1\n          The third vertex is simply (0,0,0,0)\n\n          Now clearly, only if the first normal is facing the light, and the second normal\n          is facing away from the light, we have that the edge is part of the shadow silhouette.\n\n          If it is part of the silhouette, we project the first and second vertices\n          to infinity, in the direction of the light.\n          For the third vertex, we have that w=0, so it is kept in place.\n          Because the three vertices are placed in this way, the shadow silhouette is created for that edge.\n          So that's how this vertex shader works.\n\n          (if the above doesn't make sense, try drawing it out on paper.\n          It will make sense.)\n        */\n        if(dot(normal0, lightDir) <= 0.0 &&\n           dot(normal1, lightDir) >= 0.0) {\n          gl_Position = camera*model*(position + vec4((1.0-position.w) * lightDir, 0.0));\n        } else {\n          gl_Position = vec4(0,0,0,0);\n        }\n      }\n      ",
attributes:{position:{buffer:B,offset:0,normalized:!1,stride:40,size:4},normal0:{buffer:B,offset:16,normalized:!1,stride:40,size:3},normal1:{buffer:B,offset:28,normalized:!1,stride:40,size:3}},count:function(){return a.SHADOW.length/10},uniforms:{model:A.prop("model")}}),H=A({vert:"\n      precision mediump float;\n      attribute vec3 position, normal;\n\n      uniform vec3 lightDir;\n      uniform mat4 camera;\n\n      uniform mat4 model;\n\n      /*\n        The below vertex shader needs some explaining:\n\n        We define dark cap and light cap as in figure 9-6 of this article:\n        http://http.developer.nvidia.com/GPUGems/gpugems_ch09.html\n\n        Firstly, drawing the light cap is easy, because we can just draw the rabbit mesh as usual. See figure 9-6, and you should understand.\n\n        Secondly. however, we have the dark cap. Basically, to create the dark cap,\n        we need to project the mesh onto infinity, in the direction of the light.\n        And infinity, in the case of OpenGL, is just the faces of the clip-volume.\n        The clip-volume is just a cube, and everything outside of this cube, is simply not drawn by OpenGL.\n\n        So to project something to infinity, we need to project it onto one of the faces of this cube.\n        The face we project onto depends on the light direction, and what we are doing in the function\n        'extend', is that we are finding which face to project upon, and then we project the vertex\n        of the mesh onto that face, thus creating the dark cap.\n      */\n\n      vec4 extend(vec3 p) {\n        vec4 tlightDir = camera * vec4(lightDir,0);\n        vec3 light = normalize(tlightDir.xyz);\n        vec3 dpos = (1.0 - p) / light;\n        vec3 dneg = (vec3(-1.0,-1.0,0.0) - p) / light;\n        vec3 dt   = mix(dneg, dpos, step(0.0, light));\n        return vec4(0.999 * min(min(dt.x, dt.y), dt.z) * light + p, 0);\n      }\n\n      void main() {\n        vec4 projected = camera * model * vec4(position,1);\n        if(dot(normal,lightDir) <= 0.0) {\n          // light cap\n          gl_Position = projected;\n        } else {\n          // dark cap\n          gl_Position = extend(projected.xyz/projected.w);\n        }\n      }\n      ",
attributes:{position:{buffer:b,offset:0,normalized:!1,stride:24,size:3},normal:{buffer:b,offset:12,normalized:!1,stride:24,size:3}},count:function(){return a.MESH.length/6},uniforms:{model:A.prop("model")}});A.frame(function(b){var f=[];b=.003*b.tick;for(var k=0,a,p,k=0;.9>=k;k+=.1)a=2*Math.PI*k,p=c.identity([]),c.translate(p,p,[2*Math.cos(a+b),.6,2*Math.sin(a+b)]),f.push(p);for(k=0;.9>=k;k+=.2)a=2*Math.PI*k+1.3,p=c.identity([]),c.translate(p,p,[2*Math.cos(a+.3*b),1.3,2*Math.sin(a+.3*b)]),f.push(p);
var q=c.identity([]);c.translate(q,q,[0,0,0]);y(function(){A.clear({depth:1,color:[0,0,0,1]});e(function(){for(var b=0;b<f.length;b++)x({intensity:1,model:f[b]})});K({intensity:1,model:q});g(function(){A.clear({stencil:0});d(function(){for(var b=0;b<f.length;b++)v({model:f[b]}),H({model:f[b]})})});n(function(){for(var b=0;b<f.length;b++)x({intensity:.1,model:f[b]});K({intensity:.1,model:q})})});D.tick()})}})},{"../regl":82,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59,resl:78}],2:[function(d,
h,t){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var c=d("./util/sorted-object-keys"),A=d("./util/check"),D=d("./util/values"),m=d("./constants/dtypes.json"),l=d("./util/is-typed-array"),f=d("./util/is-ndarray"),k=d("./constants/primitives.json"),b="attributes elements offset count primitive instances".split(" ");h.exports=function(q,B,y,e,g,n,p){function r(b){if(b!==h.currentVAO){var e=
B.oes_vertex_array_object;b?e.bindVertexArrayOES(b.vao):e.bindVertexArrayOES(null);h.currentVAO=b}}function u(b){if(b!==h.currentVAO){if(b)b.bindAttrs();else{for(var e=B.angle_instanced_arrays,g=0;g<H.length;++g){var f=H[g];f.buffer?(q.enableVertexAttribArray(g),f.buffer.bind(),q.vertexAttribPointer(g,f.size,f.type,f.normalized,f.stride,f.offfset),e&&f.divisor&&e.vertexAttribDivisorANGLE(g,f.divisor)):(q.disableVertexAttribArray(g),q.vertexAttrib4f(g,f.x,f.y,f.z,f.w))}p.elements?q.bindBuffer(34963,
p.elements.buffer.buffer):q.bindBuffer(34963,null)}h.currentVAO=b}}function K(){D(sa).forEach(function(b){b.destroy()})}function x(){this.id=++la;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=B.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;sa[this.id]=this;this.buffers=[]}function d(){B.oes_vertex_array_object&&D(sa).forEach(function(b){b.refresh()})}var v=y.maxAttributes,H=Array(v);for(y=0;y<v;++y)H[y]=
new a;var la=0,sa={},h={Record:a,scope:{},state:H,currentVAO:null,targetVAO:null,restore:B.oes_vertex_array_object?d:function(){},createVAO:function(p){function q(e){var p;if(Array.isArray(e))p=e,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{A("object"===typeof e,"invalid arguments for create vao");A("attributes"in e,"must specify attributes for vao");if(e.elements){var u=e.elements;r.ownsElements?("function"===
typeof u&&"elements"===u._reglType?r.elements.destroy():r.elements(u),r.ownsElements=!1):n.getElements(e.elements)?(r.elements=e.elements,r.ownsElements=!1):(r.elements=n.create(e.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;p=e.attributes;r.offset=0;r.count=-1;r.instances=-1;r.primitive=4;r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType);"offset"in e&&(r.offset=e.offset|0);"count"in e&&(r.count=e.count|0);"instances"in e&&(r.instances=
e.instances|0);"primitive"in e&&(A(e.primitive in k,"bad primitive type: "+e.primitive),r.primitive=k[e.primitive]);A.optional(function(){for(var g=c(e),f=0;f<g.length;++f)A(0<=b.indexOf(g[f]),'invalid option for vao: "'+g[f]+'" valid options are '+b)});A(Array.isArray(p),"attributes must be an array")}A(p.length<v,"too many attributes");A(0<p.length,"must specify at least one attribute");var u={},y=r.attributes;y.length=p.length;for(var K=0;K<p.length;++K){var x=p[K],d=y[K]=new a,D=x.data||x;if(Array.isArray(D)||
l(D)||f(D)){var la;r.buffers[K]&&(la=r.buffers[K],l(D)&&la._buffer.byteLength>=D.byteLength?la.subdata(D):(la.destroy(),r.buffers[K]=null));r.buffers[K]||(la=r.buffers[K]=g.create(x,34962,!1,!0));d.buffer=g.getBuffer(la);d.size=d.buffer.dimension|0;d.normalized=!1;d.type=d.buffer.dtype;d.offset=0;d.stride=0;d.divisor=0;d.state=1;u[K]=1}else g.getBuffer(x)?(d.buffer=g.getBuffer(x),d.size=d.buffer.dimension|0,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):g.getBuffer(x.buffer)?
(d.buffer=g.getBuffer(x.buffer),d.size=(+x.size||d.buffer.dimension)|0,d.normalized=!!x.normalized||!1,"type"in x?(A.parameter(x.type,m,"invalid buffer type"),d.type=m[x.type]):d.type=d.buffer.dtype,d.offset=(x.offset||0)|0,d.stride=(x.stride||0)|0,d.divisor=(x.divisor||0)|0,d.state=1,A(1<=d.size&&4>=d.size,"size must be between 1 and 4"),A(0<=d.offset,"invalid offset"),A(0<=d.stride&&255>=d.stride,"stride must be between 0 and 255"),A(0<=d.divisor,"divisor must be positive"),A(!d.divisor||!!B.angle_instanced_arrays,
"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in x?(A(0<K,"first attribute must not be a constant"),d.x=+x.x||0,d.y=+x.y||0,d.z=+x.z||0,d.w=+x.w||0,d.state=2):A(!1,"invalid attribute spec for location "+K)}for(la=0;la<r.buffers.length;++la)!u[la]&&r.buffers[la]&&(r.buffers[la].destroy(),r.buffers[la]=null);r.refresh();return q}var r=new x;e.vaoCount+=1;q.destroy=function(){for(var b=0;b<r.buffers.length;++b)r.buffers[b]&&r.buffers[b].destroy();r.buffers.length=0;r.ownsElements&&(r.elements.destroy(),
r.elements=null,r.ownsElements=!1);r.destroy()};q._vao=r;q._reglType="vao";return q(p)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var e=0;e<H.length;++e){var g=H[e];g.buffer===b&&(q.disableVertexAttribArray(e),g.buffer=null)}},setVAO:B.oes_vertex_array_object?r:u,clear:B.oes_vertex_array_object?K:function(){}};x.prototype.bindAttrs=function(){for(var b=B.angle_instanced_arrays,e=this.attributes,g=0;g<e.length;++g){var f=e[g];f.buffer?(q.enableVertexAttribArray(g),
q.bindBuffer(34962,f.buffer.buffer),q.vertexAttribPointer(g,f.size,f.type,f.normalized,f.stride,f.offset),b&&f.divisor&&b.vertexAttribDivisorANGLE(g,f.divisor)):(q.disableVertexAttribArray(g),q.vertexAttrib4f(g,f.x,f.y,f.z,f.w))}for(b=e.length;b<v;++b)q.disableVertexAttribArray(b);(b=n.getElements(this.elements))?q.bindBuffer(34963,b.buffer.buffer):q.bindBuffer(34963,null)};x.prototype.refresh=function(){var b=B.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=
null,b.bindVertexArrayOES(null))};x.prototype.destroy=function(){if(this.vao){var b=B.oes_vertex_array_object;this===h.currentVAO&&(h.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);sa[this.id]&&(delete sa[this.id],--e.vaoCount)};return h}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,
"./util/values":36}],3:[function(d,h,t){function a(b){return y[Object.prototype.toString.call(b)]|0}function c(b,e){for(var g=0;g<e.length;++g)b[g]=e[g]}function A(b,e,g,f,c,k,a){for(var n=0,q=0;q<g;++q)for(var l=0;l<f;++l)b[n++]=e[c*q+k*l+a]}var D=d("./util/sorted-object-keys"),m=d("./util/check"),l=d("./util/is-typed-array"),f=d("./util/is-ndarray"),k=d("./util/values"),b=d("./util/pool");t=d("./util/flatten");var q=t.flatten,B=t.shape,y=d("./constants/arraytypes.json"),e=d("./constants/dtypes.json"),
g=d("./constants/usage.json"),n=[];n[5120]=1;n[5122]=2;n[5124]=4;n[5121]=1;n[5123]=2;n[5125]=4;n[5126]=4;h.exports=function(p,r,u,y){function x(b){this.id=la++;this.buffer=p.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;u.profile&&(this.stats={size:0})}function d(b,e,g){b.byteLength=e.byteLength;p.bufferData(b.type,e,g)}function v(e,g,k,p,n,r){e.usage=k;if(Array.isArray(g)){if(e.dtype=p||5126,0<g.length)if(Array.isArray(g[0])){n=
B(g);for(var u=p=1;u<n.length;++u)p*=n[u];e.dimension=p;g=q(g,n,e.dtype);d(e,g,k);r?e.persistentData=g:b.freeType(g)}else"number"===typeof g[0]?(e.dimension=n,n=b.allocType(e.dtype,g.length),c(n,g),d(e,n,k),r?e.persistentData=n:b.freeType(n)):l(g[0])?(e.dimension=g[0].length,e.dtype=p||a(g[0])||5126,g=q(g,[g.length,g[0].length],e.dtype),d(e,g,k),r?e.persistentData=g:b.freeType(g)):m.raise("invalid buffer data")}else if(l(g))e.dtype=p||a(g),e.dimension=n,d(e,g,k),r&&(e.persistentData=new Uint8Array(new Uint8Array(g.buffer)));
else if(f(g)){n=g.shape;var y=g.stride,u=g.offset,x=0,K=0,D=0,v=0;1===n.length?(x=n[0],K=1,D=y[0],v=0):2===n.length?(x=n[0],K=n[1],D=y[0],v=y[1]):m.raise("invalid shape");e.dtype=p||a(g.data)||5126;e.dimension=K;n=b.allocType(e.dtype,x*K);A(n,g.data,x,K,D,v,u);d(e,n,k);r?e.persistentData=n:b.freeType(n)}else g instanceof ArrayBuffer?(e.dtype=5121,e.dimension=n,d(e,g,k),r&&(e.persistentData=new Uint8Array(new Uint8Array(g)))):m.raise("invalid buffer data")}function H(b){r.bufferCount--;y(b);var e=
b.buffer;m(e,"buffer must not be deleted already");p.deleteBuffer(e);b.buffer=null;delete sa[b.id]}var la=0,sa={};x.prototype.bind=function(){p.bindBuffer(this.type,this.buffer)};x.prototype.destroy=function(){H(this)};var h=[];u.profile&&(r.getTotalBufferSize=function(){var b=0;D(sa).forEach(function(e){b+=sa[e].stats.size});return b});return{create:function(k,y,K,d){function D(b){var c=35044,k=null,a=0,q=0,r=1;Array.isArray(b)||l(b)||f(b)||b instanceof ArrayBuffer?k=b:"number"===typeof b?a=b|0:
b&&(m.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(m(null===k||Array.isArray(k)||l(k)||f(k),"invalid data for buffer"),k=b.data),"usage"in b&&(m.parameter(b.usage,g,"invalid buffer usage"),c=g[b.usage]),"type"in b&&(m.parameter(b.type,e,"invalid buffer type"),q=e[b.type]),"dimension"in b&&(m.type(b.dimension,"number","invalid dimension"),r=b.dimension|0),"length"in b&&(m.nni(a,"buffer length must be a nonnegative integer"),a=b.length|0));U.bind();k?v(U,
k,c,q,r,d):(a&&p.bufferData(U.type,a,c),U.dtype=q||5121,U.usage=c,U.dimension=r,U.byteLength=a);u.profile&&(U.stats.size=U.byteLength*n[U.dtype]);return D}function la(b,e){m(e+b.byteLength<=U.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+e+" to a buffer of size "+U.byteLength);p.bufferSubData(U.type,e,b)}r.bufferCount++;var U=new x(y);sa[U.id]=U;K||D(k);D._reglType="buffer";D._buffer=U;D.subdata=function(e,g){var k=
(g||0)|0,n;U.bind();if(l(e)||e instanceof ArrayBuffer)la(e,k);else if(Array.isArray(e)){if(0<e.length)if("number"===typeof e[0]){var p=b.allocType(U.dtype,e.length);c(p,e);la(p,k);b.freeType(p)}else Array.isArray(e[0])||l(e[0])?(n=B(e),p=q(e,n,U.dtype),la(p,k),b.freeType(p)):m.raise("invalid buffer data")}else if(f(e)){n=e.shape;var r=e.stride,u=p=0,y=0,x=0;1===n.length?(p=n[0],u=1,y=r[0],x=0):2===n.length?(p=n[0],u=n[1],y=r[0],x=r[1]):m.raise("invalid shape");n=Array.isArray(e.data)?U.dtype:a(e.data);
n=b.allocType(n,p*u);A(n,e.data,p,u,y,x,e.offset);la(n,k);b.freeType(n)}else m.raise("invalid data for buffer subdata");return D};u.profile&&(D.stats=U.stats);D.destroy=function(){H(U)};return D},createStream:function(b,e){var g=h.pop();g||(g=new x(b));g.bind();v(g,e,35040,0,1,!1);return g},destroyStream:function(b){h.push(b)},clear:function(){k(sa).forEach(H);h.forEach(H)},getBuffer:function(b){return b&&b._buffer instanceof x?b._buffer:null},restore:function(){k(sa).forEach(function(b){b.buffer=
p.createBuffer();p.bindBuffer(b.type,b.buffer);p.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:v}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(d,h,t){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(d,h,t){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(d,h,t){h.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(d,h,t){h.exports={"static":35044,
dynamic:35048,stream:35040}},{}],8:[function(d,h,t){function a(b){return Array.isArray(b)||y(b)||e(b)}function c(b){return b.sort(function(b,e){return"viewport"===b?-1:"viewport"===e?1:b<e?-1:1})}function A(b,e,g,f){this.thisDep=b;this.contextDep=e;this.propDep=g;this.append=f}function D(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function m(b){return new A(!1,!1,!1,b)}function l(b,e){var g=b.type;if(0===g)return g=b.data.length,new A(!0,1<=g,2<=g,e);if(4===g)return g=b.data,new A(g.thisDep,
g.contextDep,g.propDep,e);if(5===g)return new A(!1,!1,!1,e);if(6===g){for(var f=g=!1,c=!1,k=0;k<b.data.length;++k){var n=b.data[k];1===n.type?c=!0:2===n.type?f=!0:3===n.type?g=!0:0===n.type?(g=!0,n=n.data,1<=n&&(f=!0),2<=n&&(c=!0)):4===n.type&&(g=g||n.data.thisDep,f=f||n.data.contextDep,c=c||n.data.propDep)}return new A(g,f,c,e)}return new A(3===g,2===g,1===g,e)}var f=d("./util/sorted-object-keys"),k=d("./util/check"),b=d("./util/extend"),q=d("./util/codegen"),B=d("./util/loop"),y=d("./util/is-typed-array"),
e=d("./util/is-ndarray"),g=d("./util/is-array-like"),n=d("./dynamic"),p=d("./constants/primitives.json"),r=d("./constants/dtypes.json"),u=["x","y","z","w"],K="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),x={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},U="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),v={never:512,less:513,"<":513,equal:514,"=":514,
"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},H={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},la={frag:35632,vert:35633},sa={cw:2304,ccw:2305},O=new A(!1,!1,!1,function(){});h.exports=function(e,y,d,h,t,J,ja,Z,ka,ma,Sa,Db,ea,Oa,W){function Q(b){return b.replace(".","_")}function M(b,e,g){var f=Q(b);ca.push(b);G[f]=N[f]=!!g;za[f]=e}function T(b,
e,g){var f=Q(b);ca.push(b);Array.isArray(g)?(N[f]=g.slice(),G[f]=g.slice()):N[f]=G[f]=g;Aa[f]=e}function pa(){var b=q(),e=b.link,g=b.global;b.id=nc++;b.batchId="0";var c=e(Ka),n=b.shared={props:"a0"};f(Ka).forEach(function(b){n[b]=g.def(c,".",b)});k.optional(function(){b.CHECK=e(k);b.commandStr=k.guessCommand();b.command=e(b.commandStr);b.assert=function(b,g,f){b("if(!(",g,"))",this.CHECK,".commandRaise(",e(f),",",this.command,");")};E.invalidBlendCombinations=U});var a=b.next={},p=b.current={};f(Aa).forEach(function(b){Array.isArray(N[b])&&
(a[b]=g.def(n.next,".",b),p[b]=g.def(n.current,".",b))});var r=b.constants={};f(E).forEach(function(b){r[b]=g.def(JSON.stringify(E[b]))});b.invoke=function(g,f){switch(f.type){case 0:var c=["this",n.context,n.props,b.batchId];return g.def(e(f.data),".call(",c.slice(0,Math.max(f.data.length+1,4)),")");case 1:return g.def(n.props,f.data);case 2:return g.def(n.context,f.data);case 3:return g.def("this",f.data);case 4:return f.data.append(b,g),f.data.ref;case 5:return f.data.toString();case 6:return f.data.map(function(e){return b.invoke(g,
e)})}};b.attribCache={};var u={};b.scopeAttrib=function(b){b=y.id(b);if(b in u)return u[b];var g=ma.scope[b];g||(g=ma.scope[b]=new ia);return u[b]=e(g)};return b}function R(b){var e=b["static"];b=b.dynamic;var g;if("profile"in e){var f=!!e.profile;g=m(function(b,e){return f});g.enable=f}else if("profile"in b){var c=b.profile;g=l(c,function(b,e){return b.invoke(e,c)})}return g}function Hb(b,e){var g=b["static"],f=b.dynamic;if("framebuffer"in g){var c=g.framebuffer;return c?(c=Z.getFramebuffer(c),k.command(c,
"invalid framebuffer object"),m(function(b,e){var g=b.link(c),f=b.shared;e.set(f.framebuffer,".next",g);f=f.context;e.set(f,".framebufferWidth",g+".width");e.set(f,".framebufferHeight",g+".height");return g})):m(function(b,e){var g=b.shared;e.set(g.framebuffer,".next","null");g=g.context;e.set(g,".framebufferWidth",g+".drawingBufferWidth");e.set(g,".framebufferHeight",g+".drawingBufferHeight");return"null"})}if("framebuffer"in f){var n=f.framebuffer;return l(n,function(b,e){var g=b.invoke(e,n),f=
b.shared,c=f.framebuffer,a=e.def(c,".getFramebuffer(",g,")");k.optional(function(){b.assert(e,"!"+g+"||"+a,"invalid framebuffer object")});e.set(c,".next",a);f=f.context;e.set(f,".framebufferWidth",a+"?"+a+".width:"+f+".drawingBufferWidth");e.set(f,".framebufferHeight",a+"?"+a+".height:"+f+".drawingBufferHeight");return a})}return null}function ab(b,e,g){function f(b){if(b in c){var a=c[b];k.commandType(a,"object","invalid "+b,g.commandStr);var p=!0,q=a.x|0,r=a.y|0,u,y;"width"in a?(u=a.width|0,k.command(0<=
u,"invalid "+b,g.commandStr)):p=!1;"height"in a?(y=a.height|0,k.command(0<=y,"invalid "+b,g.commandStr)):p=!1;return new A(!p&&e&&e.thisDep,!p&&e&&e.contextDep,!p&&e&&e.propDep,function(b,e){var g=b.shared.context,f=u;"width"in a||(f=e.def(g,".","framebufferWidth","-",q));var c=y;"height"in a||(c=e.def(g,".","framebufferHeight","-",r));return[q,r,f,c]})}if(b in n){var x=n[b],p=l(x,function(e,g){var f=e.invoke(g,x);k.optional(function(){e.assert(g,f+"&&typeof "+f+'==="object"',"invalid "+b)});var c=
e.shared.context,n=g.def(f,".x|0"),a=g.def(f,".y|0"),p=g.def('"width" in ',f,"?",f,".width|0:","(",c,".","framebufferWidth","-",n,")"),q=g.def('"height" in ',f,"?",f,".height|0:","(",c,".","framebufferHeight","-",a,")");k.optional(function(){e.assert(g,p+">=0&&"+q+">=0","invalid "+b)});return[n,a,p,q]});e&&(p.thisDep=p.thisDep||e.thisDep,p.contextDep=p.contextDep||e.contextDep,p.propDep=p.propDep||e.propDep);return p}return e?new A(e.thisDep,e.contextDep,e.propDep,function(b,e){var g=b.shared.context;
return[0,0,e.def(g,".","framebufferWidth"),e.def(g,".","framebufferHeight")]}):null}var c=b["static"],n=b.dynamic;if(b=f("viewport")){var a=b;b=new A(b.thisDep,b.contextDep,b.propDep,function(b,e){var g=a.append(b,e),f=b.shared.context;e.set(f,".viewportWidth",g[2]);e.set(f,".viewportHeight",g[3]);return g})}return{viewport:b,scissor_box:f("scissor.box")}}function S(b,e){var g=b["static"];if("string"===typeof g.frag&&"string"===typeof g.vert){if(0<f(e.dynamic).length)return null;var g=e["static"],
c=f(g);if(0<c.length&&"number"===typeof g[c[0]]){for(var n=[],a=0;a<c.length;++a)k("number"===typeof g[c[a]],"must specify all vertex attribute locations when using vaos"),n.push([g[c[a]]|0,c[a]]);return n}}return null}function C(b,e,g){function f(b){if(b in c){var e=y.id(c[b]);k.optional(function(){Sa.shader(la[b],e,k.guessCommand())});var g=m(function(){return e});g.id=e;return g}if(b in n){var a=n[b];return l(a,function(e,g){var f=e.invoke(g,a),c=g.def(e.shared.strings,".id(",f,")");k.optional(function(){g(e.shared.shader,
".shader(",la[b],",",c,",",e.command,");")});return c})}return null}var c=b["static"],n=b.dynamic,a=f("frag"),p=f("vert"),q=null;D(a)&&D(p)?(q=Sa.program(p.id,a.id,null,g),b=m(function(b,e){return b.link(q)})):b=new A(a&&a.thisDep||p&&p.thisDep,a&&a.contextDep||p&&p.contextDep,a&&a.propDep||p&&p.propDep,function(b,e){var g=b.shared.shader,f;f=a?a.append(b,e):e.def(g,".","frag");var c;c=p?p.append(b,e):e.def(g,".","vert");var n=g+".program("+c+","+f;k.optional(function(){n+=","+b.command});return e.def(n+
")")});return{frag:a,vert:p,progVar:b,program:q}}function na(b,e){function g(b,f){if(b in c){var a=c[b]|0;f?q.offset=a:q.instances=a;k.command(!f||0<=a,"invalid "+b,e.commandStr);return m(function(b,e){f&&(b.OFFSET=a);return a})}if(b in n){var p=n[b];return l(p,function(e,g){var c=e.invoke(g,p);f&&(e.OFFSET=c,k.optional(function(){e.assert(g,c+">=0","invalid "+b)}));return c})}if(f){if(y)return m(function(b,e){return b.OFFSET=0});if(r)return new A(u.thisDep,u.contextDep,u.propDep,function(b,e){return e.def(b.shared.vao+
".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(r)return new A(u.thisDep,u.contextDep,u.propDep,function(b,e){return e.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var c=b["static"],n=b.dynamic,q={},r=!1,u=function(){if("vao"in c){var b=c.vao;null!==b&&null===ma.getVAO(b)&&(b=ma.createVAO(b));r=!0;q.vao=b;return m(function(e){var g=ma.getVAO(b);return g?e.link(g):"null"})}if("vao"in n){r=!0;var e=n.vao;return l(e,function(b,g){var f=b.invoke(g,
e);return g.def(b.shared.vao+".getVAO("+f+")")})}return null}(),y=!1,x=function(){if("elements"in c){var b=c.elements;q.elements=b;if(a(b)){var g=q.elements=J.create(b,!0),b=J.getElements(g);y=!0}else b&&(b=J.getElements(b),y=!0,k.command(b,"invalid elements",e.commandStr));g=m(function(e,g){if(b){var f=e.link(b);return e.ELEMENTS=f}return e.ELEMENTS=null});g.value=b;return g}if("elements"in n){y=!0;var f=n.elements;return l(f,function(b,e){var g=b.shared,c=g.isBufferArgs,g=g.elements,n=b.invoke(e,
f),a=e.def("null"),c=e.def(c,"(",n,")"),p=b.cond(c).then(a,"=",g,".createStream(",n,");")["else"](a,"=",g,".getElements(",n,");");k.optional(function(){b.assert(p["else"],"!"+n+"||"+a,"invalid elements")});e.entry(p);e.exit(b.cond(c).then(g,".destroyStream(",a,");"));return b.ELEMENTS=a})}return r?new A(u.thisDep,u.contextDep,u.propDep,function(b,e){return e.def(b.shared.vao+".currentVAO?"+b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),B=g("offset",!0),K=function(){if("primitive"in
c){var b=c.primitive;q.primitive=b;k.commandParameter(b,p,"invalid primitve",e.commandStr);return m(function(e,g){return p[b]})}if("primitive"in n){var g=n.primitive;return l(g,function(b,e){var c=b.constants.primTypes,n=b.invoke(e,g);k.optional(function(){b.assert(e,n+" in "+c,"invalid primitive, must be one of "+f(p))});return e.def(c,"[",n,"]")})}return y?D(x)?x.value?m(function(b,e){return e.def(b.ELEMENTS,".primType")}):m(function(){return 4}):new A(x.thisDep,x.contextDep,x.propDep,function(b,
e){var g=b.ELEMENTS;return e.def(g,"?",g,".primType:",4)}):r?new A(u.thisDep,u.contextDep,u.propDep,function(b,e){return e.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),d=function(){if("count"in c){var b=c.count|0;q.count=b;k.command("number"===typeof b&&0<=b,"invalid vertex count",e.commandStr);return m(function(){return b})}if("count"in n){var g=n.count;return l(g,function(b,e){var f=b.invoke(e,g);k.optional(function(){b.assert(e,"typeof "+f+'==="number"&&'+f+
">=0&&"+f+"===("+f+"|0)","invalid vertex count")});return f})}if(y){if(D(x)){if(x)return B?new A(B.thisDep,B.contextDep,B.propDep,function(b,e){var g=e.def(b.ELEMENTS,".vertCount-",b.OFFSET);k.optional(function(){b.assert(e,g+">=0","invalid vertex offset/element buffer too small")});return g}):m(function(b,e){return e.def(b.ELEMENTS,".vertCount")});var f=m(function(){return-1});k.optional(function(){f.MISSING=!0});return f}var a=new A(x.thisDep||B.thisDep,x.contextDep||B.contextDep,x.propDep||B.propDep,
function(b,e){var g=b.ELEMENTS;return b.OFFSET?e.def(g,"?",g,".vertCount-",b.OFFSET,":-1"):e.def(g,"?",g,".vertCount:-1")});k.optional(function(){a.DYNAMIC=!0});return a}return r?new A(u.thisDep,u.contextDep,u.propDep,function(b,e){return e.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),v=g("instances",!1);return{elements:x,primitive:K,count:d,instances:v,offset:B,vao:u,vaoActive:r,elementsActive:y,"static":q}}function da(b,e){var c=b["static"],n=b.dynamic,a={};ca.forEach(function(b){function p(e,
g){if(b in c){var f=e(c[b]);a[q]=m(function(){return f})}else if(b in n){var k=n[b];a[q]=l(k,function(b,e){return g(b,e,b.invoke(e,k))})}}var q=Q(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return p(function(g){k.commandType(g,"boolean",b,e.commandStr);return g},function(e,g,f){k.optional(function(){e.assert(g,"typeof "+f+'==="boolean"',
"invalid flag "+b,e.commandStr)});return f});case "depth.func":return p(function(g){k.commandParameter(g,v,"invalid "+b,e.commandStr);return v[g]},function(e,g,c){var n=e.constants.compareFuncs;k.optional(function(){e.assert(g,c+" in "+n,"invalid "+b+", must be one of "+f(v))});return g.def(n,"[",c,"]")});case "depth.range":return p(function(b){k.command(g(b)&&2===b.length&&"number"===typeof b[0]&&"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",e.commandStr);return b},function(b,e,g){k.optional(function(){b.assert(e,
b.shared.isArrayLike+"("+g+")&&"+g+".length===2&&typeof "+g+'[0]==="number"&&typeof '+g+'[1]==="number"&&'+g+"[0]<="+g+"[1]","depth range must be a 2d array")});var f=e.def("+",g,"[0]"),c=e.def("+",g,"[1]");return[f,c]});case "blend.func":return p(function(b){k.commandType(b,"object","blend.func",e.commandStr);var g="srcRGB"in b?b.srcRGB:b.src,f="srcAlpha"in b?b.srcAlpha:b.src,c="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;k.commandParameter(g,x,q+".srcRGB",e.commandStr);k.commandParameter(f,
x,q+".srcAlpha",e.commandStr);k.commandParameter(c,x,q+".dstRGB",e.commandStr);k.commandParameter(b,x,q+".dstAlpha",e.commandStr);k.command(-1===U.indexOf(g+", "+c),"unallowed blending combination (srcRGB, dstRGB) = ("+g+", "+c+")",e.commandStr);return[x[g],x[c],x[f],x[b]]},function(e,g,c){function n(p,q){var r=g.def('"',p,q,'" in ',c,"?",c,".",p,q,":",c,".",p);k.optional(function(){e.assert(g,r+" in "+a,"invalid "+b+"."+p+q+", must be one of "+f(x))});return r}var a=e.constants.blendFuncs;k.optional(function(){e.assert(g,
c+"&&typeof "+c+'==="object"',"invalid blend func, must be an object")});var p=n("src","RGB"),q=n("dst","RGB");k.optional(function(){e.assert(g,e.constants.invalidBlendCombinations+".indexOf("+p+'+", "+'+q+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var r=g.def(a,"[",p,"]"),u=g.def(a,"[",n("src","Alpha"),"]"),y=g.def(a,"[",q,"]"),l=g.def(a,"[",n("dst","Alpha"),"]");return[r,y,u,l]});case "blend.equation":return p(function(g){if("string"===typeof g)return k.commandParameter(g,
ua,"invalid "+b,e.commandStr),[ua[g],ua[g]];if("object"===typeof g)return k.commandParameter(g.rgb,ua,b+".rgb",e.commandStr),k.commandParameter(g.alpha,ua,b+".alpha",e.commandStr),[ua[g.rgb],ua[g.alpha]];k.commandRaise("invalid blend.equation",e.commandStr)},function(e,g,c){var n=e.constants.blendEquations,a=g.def(),p=g.def(),q=e.cond("typeof ",c,'==="string"');k.optional(function(){function g(b,c,k){e.assert(b,k+" in "+n,"invalid "+c+", must be one of "+f(ua))}g(q.then,b,c);e.assert(q["else"],c+
"&&typeof "+c+'==="object"',"invalid "+b);g(q["else"],b+".rgb",c+".rgb");g(q["else"],b+".alpha",c+".alpha")});q.then(a,"=",p,"=",n,"[",c,"];");q["else"](a,"=",n,"[",c,".rgb];",p,"=",n,"[",c,".alpha];");g(q);return[a,p]});case "blend.color":return p(function(b){k.command(g(b)&&4===b.length,"blend.color must be a 4d array",e.commandStr);return B(4,function(e){return+b[e]})},function(b,e,g){k.optional(function(){b.assert(e,b.shared.isArrayLike+"("+g+")&&"+g+".length===4","blend.color must be a 4d array")});
return B(4,function(b){return e.def("+",g,"[",b,"]")})});case "stencil.mask":return p(function(b){k.commandType(b,"number",q,e.commandStr);return b|0},function(b,e,g){k.optional(function(){b.assert(e,"typeof "+g+'==="number"',"invalid stencil.mask")});return e.def(g,"|0")});case "stencil.func":return p(function(g){k.commandType(g,"object",q,e.commandStr);var f=g.cmp||"keep",c=g.ref||0;g="mask"in g?g.mask:-1;k.commandParameter(f,v,b+".cmp",e.commandStr);k.commandType(c,"number",b+".ref",e.commandStr);
k.commandType(g,"number",b+".mask",e.commandStr);return[v[f],c,g]},function(b,e,g){var f=b.constants.compareFuncs;k.optional(function(){function c(){b.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(g+"&&typeof ",g,'==="object"');c('!("cmp" in ',g,")||(",g,".cmp in ",f,")")});var c=e.def('"cmp" in ',g,"?",f,"[",g,".cmp]",":",7680),n=e.def(g,".ref|0"),a=e.def('"mask" in ',g,"?",g,".mask|0:-1");return[c,n,a]});case "stencil.opFront":case "stencil.opBack":return p(function(g){k.commandType(g,
"object",q,e.commandStr);var f=g.fail||"keep",c=g.zfail||"keep";g=g.zpass||"keep";k.commandParameter(f,H,b+".fail",e.commandStr);k.commandParameter(c,H,b+".zfail",e.commandStr);k.commandParameter(g,H,b+".zpass",e.commandStr);return["stencil.opBack"===b?1029:1028,H[f],H[c],H[g]]},function(e,g,c){function n(p){k.optional(function(){e.assert(g,'!("'+p+'" in '+c+")||("+c+"."+p+" in "+a+")","invalid "+b+"."+p+", must be one of "+f(H))});return g.def('"',p,'" in ',c,"?",a,"[",c,".",p,"]:",7680)}var a=e.constants.stencilOps;
k.optional(function(){e.assert(g,c+"&&typeof "+c+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,n("fail"),n("zfail"),n("zpass")]});case "polygonOffset.offset":return p(function(b){k.commandType(b,"object",q,e.commandStr);var g=b.factor|0;b=b.units|0;k.commandType(g,"number",q+".factor",e.commandStr);k.commandType(b,"number",q+".units",e.commandStr);return[g,b]},function(e,g,f){k.optional(function(){e.assert(g,f+"&&typeof "+f+'==="object"',"invalid "+b)});var c=g.def(f,".factor|0"),
n=g.def(f,".units|0");return[c,n]});case "cull.face":return p(function(b){var g=0;"front"===b?g=1028:"back"===b&&(g=1029);k.command(!!g,q,e.commandStr);return g},function(b,e,g){k.optional(function(){b.assert(e,g+'==="front"||'+g+'==="back"',"invalid cull.face")});return e.def(g,'==="front"?',1028,":",1029)});case "lineWidth":return p(function(b){k.command("number"===typeof b&&b>=h.lineWidthDims[0]&&b<=h.lineWidthDims[1],"invalid line width, must be a positive number between "+h.lineWidthDims[0]+
" and "+h.lineWidthDims[1],e.commandStr);return b},function(b,e,g){k.optional(function(){b.assert(e,"typeof "+g+'==="number"&&'+g+">="+h.lineWidthDims[0]+"&&"+g+"<="+h.lineWidthDims[1],"invalid line width")});return g});case "frontFace":return p(function(b){k.commandParameter(b,sa,q,e.commandStr);return sa[b]},function(b,e,g){k.optional(function(){b.assert(e,g+'==="cw"||'+g+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(g+'==="cw"?2304:2305')});case "colorMask":return p(function(b){k.command(g(b)&&
4===b.length,"color.mask must be length 4 array",e.commandStr);return b.map(function(b){return!!b})},function(b,g,e){k.optional(function(){b.assert(g,b.shared.isArrayLike+"("+e+")&&"+e+".length===4","invalid color.mask")});return B(4,function(b){return"!!"+e+"["+b+"]"})});case "sample.coverage":return p(function(b){k.command("object"===typeof b&&b,q,e.commandStr);var g="value"in b?b.value:1;b=!!b.invert;k.command("number"===typeof g&&0<=g&&1>=g,"sample.coverage.value must be a number between 0 and 1",
e.commandStr);return[g,b]},function(b,g,e){k.optional(function(){b.assert(g,e+"&&typeof "+e+'==="object"',"invalid sample.coverage")});var f=g.def('"value" in ',e,"?+",e,".value:1"),c=g.def("!!",e,".invert");return[f,c]})}});return a}function Da(b,e){var c=b["static"],n=b.dynamic,a={};f(c).forEach(function(b){var f=c[b],n;if("number"===typeof f||"boolean"===typeof f)n=m(function(){return f});else if("function"===typeof f){var p=f._reglType;"texture2d"===p||"textureCube"===p?n=m(function(b){return b.link(f)}):
"framebuffer"===p||"framebufferCube"===p?(k.command(0<f.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',e.commandStr),n=m(function(b){return b.link(f.color[0])})):k.commandRaise('invalid data for uniform "'+b+'"',e.commandStr)}else g(f)?n=m(function(e){return e.global.def("[",B(f.length,function(g){k.command("number"===typeof f[g]||"boolean"===typeof f[g],"invalid uniform "+b,e.commandStr);return f[g]}),"]")}):k.commandRaise('invalid or missing data for uniform "'+
b+'"',e.commandStr);n.value=f;a[b]=n});f(n).forEach(function(b){var e=n[b];a[b]=l(e,function(b,g){return b.invoke(g,e)})});return a}function Ga(b,e){var c=b["static"],n=b.dynamic,p={};f(c).forEach(function(b){var n=c[b],q=y.id(b),l=new ia;if(a(n))l.state=1,l.buffer=t.getBuffer(t.create(n,34962,!1,!0)),l.type=0;else{var x=t.getBuffer(n);if(x)l.state=1,l.buffer=x,l.type=0;else if(k.command("object"===typeof n&&n,"invalid data for attribute "+b,e.commandStr),"constant"in n){var B=n.constant;l.buffer=
"null";l.state=2;"number"===typeof B?l.x=B:(k.command(g(B)&&0<B.length&&4>=B.length,"invalid constant for attribute "+b,e.commandStr),u.forEach(function(b,e){e<B.length&&(l[b]=B[e])}))}else{x=a(n.buffer)?t.getBuffer(t.create(n.buffer,34962,!1,!0)):t.getBuffer(n.buffer);k.command(!!x,'missing buffer for attribute "'+b+'"',e.commandStr);var K=n.offset|0;k.command(0<=K,'invalid offset for attribute "'+b+'"',e.commandStr);var d=n.stride|0;k.command(0<=d&&256>d,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',
e.commandStr);var D=n.size|0;k.command(!("size"in n)||0<D&&4>=D,'invalid size for attribute "'+b+'", must be 1,2,3,4',e.commandStr);var v=!!n.normalized,A=0;"type"in n&&(k.commandParameter(n.type,r,"invalid type for attribute "+b,e.commandStr),A=r[n.type]);var la=n.divisor|0;k.optional(function(){"divisor"in n&&(k.command(0===la||Y,'cannot specify divisor for attribute "'+b+'", instancing not supported',e.commandStr),k.command(0<=la,'invalid divisor for attribute "'+b+'"',e.commandStr));var g=e.commandStr,
c="buffer offset divisor normalized type size stride".split(" ");f(n).forEach(function(e){k.command(0<=c.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+b+'" (valid parameters are '+c+")",g)})});l.buffer=x;l.state=1;l.size=D;l.normalized=v;l.type=A||x.dtype;l.offset=K;l.stride=d;l.divisor=la}}p[b]=m(function(b,e){var g=b.attribCache;if(q in g)return g[q];var c={isStream:!1};f(l).forEach(function(b){c[b]=l[b]});l.buffer&&(c.buffer=b.link(l.buffer),c.type=c.type||c.buffer+".dtype");return g[q]=
c})});f(n).forEach(function(b){var e=n[b];p[b]=l(e,function(g,c){function n(b){c(y[b],"=",a,".",b,"|0;")}var a=g.invoke(c,e),p=g.shared,q=g.constants,r=p.isBufferArgs,l=p.buffer;k.optional(function(){g.assert(c,a+"&&(typeof "+a+'==="object"||typeof '+a+'==="function")&&('+r+"("+a+")||"+l+".getBuffer("+a+")||"+l+".getBuffer("+a+".buffer)||"+r+"("+a+'.buffer)||("constant" in '+a+"&&(typeof "+a+'.constant==="number"||'+p.isArrayLike+"("+a+".constant))))",'invalid dynamic attribute "'+b+'"')});var y=
{isStream:c.def(!1)},x=new ia;x.state=1;f(x).forEach(function(b){y[b]=c.def(""+x[b])});var B=y.buffer,K=y.type;c("if(",r,"(",a,")){",y.isStream,"=true;",B,"=",l,".createStream(",34962,",",a,");",K,"=",B,".dtype;","}else{",B,"=",l,".getBuffer(",a,");","if(",B,"){",K,"=",B,".dtype;",'}else if("constant" in ',a,"){",y.state,"=",2,";","if(typeof "+a+'.constant === "number"){',y[u[0]],"=",a,".constant;",u.slice(1).map(function(b){return y[b]}).join("="),"=0;","}else{",u.map(function(b,e){return y[b]+"="+
a+".constant.length>"+e+"?"+a+".constant["+e+"]:0;"}).join(""),"}}else{","if(",r,"(",a,".buffer)){",B,"=",l,".createStream(",34962,",",a,".buffer);","}else{",B,"=",l,".getBuffer(",a,".buffer);","}",K,'="type" in ',a,"?",q.glTypes,"[",a,".type]:",B,".dtype;",y.normalized,"=!!",a,".normalized;");n("size");n("offset");n("stride");n("divisor");c("}}");c.exit("if(",y.isStream,"){",l,".destroyStream(",B,");","}");return y})});return p}function nb(b){var e=b["static"],g=b.dynamic,c={};f(e).forEach(function(b){var g=
e[b];c[b]=m(function(b,e){return"number"===typeof g||"boolean"===typeof g?""+g:b.link(g)})});f(g).forEach(function(b){var e=g[b];c[b]=l(e,function(b,g){return b.invoke(g,e)})});return c}function La(b,e,g,c,n){function a(b){var e=l[b];e&&(x[b]=e)}var p=b["static"],q=b.dynamic;k.optional(function(){function b(g){f(g).forEach(function(b){k.command(0<=e.indexOf(b),'unknown parameter "'+b+'"',n.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ca);
b(p);b(q)});var r=S(b,e),u=Hb(b,n),l=ab(b,u,n),y=na(b,n),x=da(b,n),B=C(b,n,r);a("viewport");a(Q("scissor.box"));var K=0<f(x).length,u={framebuffer:u,draw:y,shader:B,state:x,dirty:K,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};u.profile=R(b,n);u.uniforms=Da(g,n);u.drawVAO=u.scopeVAO=y.vao;if(!u.drawVAO&&B.program&&!r&&d.angle_instanced_arrays&&y["static"].elements){var m=!0;b=B.program.attributes.map(function(b){b=e["static"][b];m=m&&!!b;return b});if(m&&0<b.length){var D=ma.getVAO(ma.createVAO({attributes:b,
elements:y["static"].elements}));u.drawVAO=new A(null,null,null,function(b,e){return b.link(D)});u.useVAO=!0}}r?u.useVAO=!0:u.attributes=Ga(e,n);u.context=nb(c,n);return u}function X(b,e,g){var c=b.shared.context,n=b.scope();f(g).forEach(function(f){e.save(c,"."+f);var a=g[f].append(b,e);Array.isArray(a)?n(c,".",f,"=[",a.join(),"];"):n(c,".",f,"=",a,";")});e(n)}function ob(b,e,g,f){var c=b.shared,n=c.gl,a=c.framebuffer,k;fa&&(k=e.def(c.extensions,".webgl_draw_buffers"));var p=b.constants,c=p.drawBuffer,
p=p.backBuffer;b=g?g.append(b,e):e.def(a,".next");f||e("if(",b,"!==",a,".cur){");e("if(",b,"){",n,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&e(k,".drawBuffersWEBGL(",c,"[",b,".colorAttachments.length]);");e("}else{",n,".bindFramebuffer(",36160,",null);");fa&&e(k,".drawBuffersWEBGL(",p,");");e("}",a,".cur=",b,";");f||e("}")}function ga(b,e,g){var c=b.shared,n=c.gl,a=b.current,k=b.next,p=c.current,q=c.next,r=b.cond(p,".dirty");ca.forEach(function(e){e=Q(e);if(!(e in g.state)){var f,c;if(e in
k){f=k[e];c=a[e];var u=B(N[e].length,function(b){return r.def(f,"[",b,"]")});r(b.cond(u.map(function(b,e){return b+"!=="+c+"["+e+"]"}).join("||")).then(n,".",Aa[e],"(",u,");",u.map(function(b,e){return c+"["+e+"]="+b}).join(";"),";"))}else f=r.def(q,".",e),u=b.cond(f,"!==",p,".",e),r(u),e in za?u(b.cond(f).then(n,".enable(",za[e],");")["else"](n,".disable(",za[e],");"),p,".",e,"=",f,";"):u(n,".",Aa[e],"(",f,");",p,".",e,"=",f,";")}});0===f(g.state).length&&r(p,".dirty=false;");e(r)}function ra(b,
e,n,a){var k=b.shared,p=b.current,q=k.current,r=k.gl;c(f(n)).forEach(function(f){var c=n[f];if(!a||a(c)){var k=c.append(b,e);if(za[f]){var u=za[f];D(c)?k?e(r,".enable(",u,");"):e(r,".disable(",u,");"):e(b.cond(k).then(r,".enable(",u,");")["else"](r,".disable(",u,");"));e(q,".",f,"=",k,";")}else if(g(k)){var l=p[f];e(r,".",Aa[f],"(",k,");",k.map(function(b,e){return l+"["+e+"]="+b}).join(";"),";")}else e(r,".",Aa[f],"(",k,");",q,".",f,"=",k,";")}})}function cc(b,e){Y&&(b.instancing=e.def(b.shared.extensions,
".angle_instanced_arrays"))}function qc(b,e,g,f,c){function n(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function a(b){y=e.def();b(y,"=",n(),";");"string"===typeof c?b(r,".count+=",c,";"):b(r,".count++;");Oa&&(f?(x=e.def(),b(x,"=",l,".getNumPendingQueries();")):b(l,".beginQuery(",r,");"))}function k(b){b(r,".cpuTime+=",n(),"-",y,";");Oa&&(f?b(l,".pushScopeStats(",x,",",l,".getNumPendingQueries(),",r,");"):b(l,".endQuery();"))}function p(b){var g=e.def(u,".profile");
e(u,".profile=",b,";");e.exit(u,".profile=",g,";")}var q=b.shared,r=b.stats,u=q.current,l=q.timer;g=g.profile;var y,x;if(g){if(D(g)){g.enable?(a(e),k(e.exit),p("true")):p("false");return}g=g.append(b,e);p(g)}else g=e.def(u,".profile");q=b.block();a(q);e("if(",g,"){",q,"}");b=b.block();k(b);e.exit("if(",g,"){",b,"}")}function ic(b,e,g,c,n){function a(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function p(g,f,c){function n(){e("if(!",l,".buffer){",k,".enableVertexAttribArray(",r,");}");var g=c.type,a;a=c.size?e.def(c.size,"||",f):f;e("if(",l,".type!==",g,"||",l,".size!==",a,"||",B.map(function(b){return l+"."+b+"!=="+c[b]}).join("||"),"){",k,".bindBuffer(",34962,",",y,".buffer);",k,".vertexAttribPointer(",[r,a,g,c.normalized,c.stride,c.offset],");",l,".type=",g,";",l,".size=",a,";",B.map(function(b){return l+"."+b+"="+c[b]+";"}).join(""),"}");Y&&(g=c.divisor,e("if(",l,".divisor!==",g,"){",
b.instancing,".vertexAttribDivisorANGLE(",[r,g],");",l,".divisor=",g,";}"))}function a(){e("if(",l,".buffer){",k,".disableVertexAttribArray(",r,");",l,".buffer=null;","}if(",u.map(function(b,e){return l+"."+b+"!=="+x[e]}).join("||"),"){",k,".vertexAttrib4f(",r,",",x,");",u.map(function(b,e){return l+"."+b+"="+x[e]+";"}).join(""),"}")}var k=q.gl,r=e.def(g,".location"),l=e.def(q.attributes,"[",r,"]");g=c.state;var y=c.buffer,x=[c.x,c.y,c.z,c.w],B=["buffer","normalized","offset","stride"];1===g?n():
2===g?a():(e("if(",g,"===",1,"){"),n(),e("}else{"),a(),e("}"))}var q=b.shared;c.forEach(function(c){var q=c.name,r=g.attributes[q],u;if(r){if(!n(r))return;u=r.append(b,e)}else{if(!n(O))return;var l=b.scopeAttrib(q);k.optional(function(){b.assert(e,l+".state","missing attribute "+q)});u={};f(new ia).forEach(function(b){u[b]=e.def(l,".",b)})}p(b.link(c),a(c.info.type),u)})}function td(b,e,f,c,n,a){for(var p=b.shared,q=p.gl,r,u=0;u<c.length;++u){var l=c[u],x=l.name,K=l.info.type,d=f.uniforms[x],l=b.link(l)+
".location",m;if(d){if(!n(d))continue;if(D(d)){var v=d.value;k.command(null!==v&&"undefined"!==typeof v,'missing uniform "'+x+'"',b.commandStr);if(35678===K||35680===K)k.command("function"===typeof v&&(35678===K&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||35680===K&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+x,b.commandStr),d=b.link(v._texture||v.color[0]._texture),e(q,".uniform1i(",l,",",d+".bind());"),e.exit(d,".unbind();");else if(35674===
K||35675===K||35676===K){k.optional(function(){k.command(g(v),"invalid matrix for uniform "+x,b.commandStr);k.command(35674===K&&4===v.length||35675===K&&9===v.length||35676===K&&16===v.length,"invalid length for matrix uniform "+x,b.commandStr)});var d=b.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),A=2;35675===K?A=3:35676===K&&(A=4);e(q,".uniformMatrix",A,"fv(",l,",false,",d,");")}else{switch(K){case 5126:k.commandType(v,"number","uniform "+x,b.commandStr);r="1f";break;case 35664:k.command(g(v)&&
2===v.length,"uniform "+x,b.commandStr);r="2f";break;case 35665:k.command(g(v)&&3===v.length,"uniform "+x,b.commandStr);r="3f";break;case 35666:k.command(g(v)&&4===v.length,"uniform "+x,b.commandStr);r="4f";break;case 35670:k.commandType(v,"boolean","uniform "+x,b.commandStr);r="1i";break;case 5124:k.commandType(v,"number","uniform "+x,b.commandStr);r="1i";break;case 35671:k.command(g(v)&&2===v.length,"uniform "+x,b.commandStr);r="2i";break;case 35667:k.command(g(v)&&2===v.length,"uniform "+x,b.commandStr);
r="2i";break;case 35672:k.command(g(v)&&3===v.length,"uniform "+x,b.commandStr);r="3i";break;case 35668:k.command(g(v)&&3===v.length,"uniform "+x,b.commandStr);r="3i";break;case 35673:k.command(g(v)&&4===v.length,"uniform "+x,b.commandStr);r="4i";break;case 35669:k.command(g(v)&&4===v.length,"uniform "+x,b.commandStr),r="4i"}e(q,".uniform",r,"(",l,",",g(v)?Array.prototype.slice.call(v):v,");")}continue}else m=d.append(b,e)}else{if(!n(O))continue;m=e.def(p.uniforms,"[",y.id(x),"]")}35678===K?(k(!Array.isArray(m),
"must specify a scalar prop for textures"),e("if(",m,"&&",m,'._reglType==="framebuffer"){',m,"=",m,".color[0];","}")):35680===K&&(k(!Array.isArray(m),"must specify a scalar prop for cube maps"),e("if(",m,"&&",m,'._reglType==="framebufferCube"){',m,"=",m,".color[0];","}"));k.optional(function(){function g(f,c){b.assert(e,f,'bad data or missing for uniform "'+x+'".  '+c)}function f(b){k(!Array.isArray(m),"must not specify an array type for uniform");g("typeof "+m+'==="'+b+'"',"invalid type, expected "+
b)}function c(e,f){Array.isArray(m)?k(m.length===e,"must have length "+e):g(p.isArrayLike+"("+m+")&&"+m+".length==="+e,"invalid vector, should have length "+e,b.commandStr)}function n(e){k(!Array.isArray(m),"must not specify a value type");g("typeof "+m+'==="function"&&'+m+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(K){case 5124:f("number");break;case 35667:c(2,"number");break;case 35668:c(3,"number");break;case 35669:c(4,"number");break;case 5126:f("number");
break;case 35664:c(2,"number");break;case 35665:c(3,"number");break;case 35666:c(4,"number");break;case 35670:f("boolean");break;case 35671:c(2,"boolean");break;case 35672:c(3,"boolean");break;case 35673:c(4,"boolean");break;case 35674:c(4,"number");break;case 35675:c(9,"number");break;case 35676:c(16,"number");break;case 35678:n(3553);break;case 35680:n(34067)}});d=1;switch(K){case 35678:case 35680:d=e.def(m,"._texture");e(q,".uniform1i(",l,",",d,".bind());");e.exit(d,".unbind();");continue;case 5124:case 35670:r=
"1i";break;case 35667:case 35671:r="2i";d=2;break;case 35668:case 35672:r="3i";d=3;break;case 35669:case 35673:r="4i";d=4;break;case 5126:r="1f";break;case 35664:r="2f";d=2;break;case 35665:r="3f";d=3;break;case 35666:r="4f";d=4;break;case 35674:r="Matrix2fv";break;case 35675:r="Matrix3fv";break;case 35676:r="Matrix4fv"}if("M"===r.charAt(0)){e(q,".uniform",r,"(",l,",");var l=Math.pow(K-35674+2,2),la=b.global.def("new Float32Array(",l,")");Array.isArray(m)?e("false,(",B(l,function(b){return la+"["+
b+"]="+m[b]}),",",la,")"):e("false,(Array.isArray(",m,")||",m," instanceof Float32Array)?",m,":(",B(l,function(b){return la+"["+b+"]="+m+"["+b+"]"}),",",la,")");e(");")}else{if(1<d){for(var A=[],J=[],U=0;U<d;++U)Array.isArray(m)?J.push(m[U]):J.push(e.def(m+"["+U+"]")),a&&A.push(e.def());a&&e("if(!",b.batchId,"||",A.map(function(b,e){return b+"!=="+J[e]}).join("||"),"){",A.map(function(b,e){return b+"="+J[e]+";"}).join(""));e(q,".uniform",r,"(",l,",",J.join(","),");")}else k(!Array.isArray(m),"uniform value must not be an array"),
a&&(d=e.def(),e("if(!",b.batchId,"||",d,"!==",m,"){",d,"=",m,";")),e(q,".uniform",r,"(",l,",",m,");");a&&e("}")}}}function zc(b,e,g,f){function c(n){var a=u[n];return a?a.contextDep&&f.contextDynamic||a.propDep?a.append(b,g):a.append(b,e):e.def(r,".",n)}function n(){function b(){g(m,".drawElementsInstancedANGLE(",[y,B,d,x+"<<(("+d+"-5121)>>1)",K],");")}function e(){g(m,".drawArraysInstancedANGLE(",[y,x,B,K],");")}l&&"null"!==l?v?b():(g("if(",l,"){"),b(),g("}else{"),e(),g("}")):e()}function a(){function b(){g(q+
".drawElements("+[y,B,d,x+"<<(("+d+"-5121)>>1)"]+");")}function e(){g(q+".drawArrays("+[y,x,B]+");")}l&&"null"!==l?v?b():(g("if(",l,"){"),b(),g("}else{"),e(),g("}")):e()}var p=b.shared,q=p.gl,r=p.draw,u=f.draw,l=function(){var c=u.elements,n=e;if(c){if(c.contextDep&&f.contextDynamic||c.propDep)n=g;c=c.append(b,n);u.elementsActive&&n("if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=n.def(),n(c,"=",r,".","elements",";","if(",c,"){",q,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",
p.vao,".currentVAO){",c,"=",b.shared.elements+".getElements("+p.vao,".currentVAO.elements);",ta?"":"if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),y=c("primitive"),x=c("offset"),B=function(){var c=u.count,n,a=e;if(c){if(c.contextDep&&f.contextDynamic||c.propDep)a=g;n=c.append(b,a);k.optional(function(){c.MISSING&&b.assert(e,"false","missing vertex count");c.DYNAMIC&&b.assert(a,n+">=0","missing vertex count")})}else n=a.def(r,".","count"),k.optional(function(){b.assert(a,n+
">=0","missing vertex count")});return n}();if("number"===typeof B){if(0===B)return}else g("if(",B,"){"),g.exit("}");var K,m;Y&&(K=c("instances"),m=b.instancing);var d=l+".type",v=u.elements&&D(u.elements)&&!u.vaoActive;Y&&("number"!==typeof K||0<=K)?"string"===typeof K?(g("if(",K,">0){"),n(),g("}else if(",K,"<0){"),a(),g("}")):n():a()}function aa(b,e,g,f,c){var n=pa();c=n.proc("body",c);k.optional(function(){n.commandStr=e.commandStr;n.command=n.link(e.commandStr)});Y&&(n.instancing=c.def(n.shared.extensions,
".angle_instanced_arrays"));b(n,c,g,f);return n.compile().body}function P(b,e,g,f){cc(b,e);g.useVAO?g.drawVAO?e(b.shared.vao,".setVAO(",g.drawVAO.append(b,e),");"):e(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(e(b.shared.vao,".setVAO(null);"),ic(b,e,g,f.attributes,function(){return!0}));td(b,e,g,f.uniforms,function(){return!0},!1);zc(b,e,e,g)}function ha(b,e){var g=b.proc("draw",1);cc(b,g);X(b,g,e.context);ob(b,g,e.framebuffer);ga(b,g,e);ra(b,g,e.state);qc(b,g,e,!1,!0);var c=e.shader.progVar.append(b,
g);g(b.shared.gl,".useProgram(",c,".program);");if(e.shader.program)P(b,g,e,e.shader.program);else{g(b.shared.vao,".setVAO(null);");var n=b.global.def("{}"),a=g.def(c,".id"),k=g.def(n,"[",a,"]");g(b.cond(k).then(k,".call(this,a0);")["else"](k,"=",n,"[",a,"]=",b.link(function(g){return aa(P,b,e,g,1)}),"(",c,");",k,".call(this,a0);"))}0<f(e.state).length&&g(b.shared.current,".dirty=true;");b.shared.vao&&g(b.shared.vao,".setVAO(null);")}function Ha(b,e,g,f){function c(){return!0}b.batchId="a1";cc(b,
e);ic(b,e,g,f.attributes,c);td(b,e,g,f.uniforms,c,!1);zc(b,e,e,g)}function ub(b,e,g,f){function c(b){return b.contextDep&&a||b.propDep}function n(b){return!c(b)}cc(b,e);var a=g.contextDep,k=e.def(),p=e.def();b.shared.props=p;b.batchId=k;var q=b.scope(),r=b.scope();e(q.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",p,"=","a0","[",k,"];",r,"}",q.exit);g.needsContext&&X(b,r,g.context);g.needsFramebuffer&&ob(b,r,g.framebuffer);ra(b,r,g.state,c);g.profile&&c(g.profile)&&qc(b,r,g,!1,!0);f?(g.useVAO?g.drawVAO?
c(g.drawVAO)?r(b.shared.vao,".setVAO(",g.drawVAO.append(b,r),");"):q(b.shared.vao,".setVAO(",g.drawVAO.append(b,q),");"):q(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(q(b.shared.vao,".setVAO(null);"),ic(b,q,g,f.attributes,n),ic(b,r,g,f.attributes,c)),td(b,q,g,f.uniforms,n,!1),td(b,r,g,f.uniforms,c,!0),zc(b,q,r,g)):(e=b.global.def("{}"),f=g.shader.progVar.append(b,r),p=r.def(f,".id"),q=r.def(e,"[",p,"]"),r(b.shared.gl,".useProgram(",f,".program);","if(!",q,"){",q,"=",e,"[",p,"]=",b.link(function(e){return aa(Ha,
b,g,e,2)}),"(",f,");}",q,".call(this,a0[",k,"],",k,");"))}function Pc(b,e){function g(b){return b.contextDep&&n||b.propDep}var c=b.proc("batch",2);b.batchId="0";cc(b,c);var n=!1,a=!0;f(e.context).forEach(function(b){n=n||e.context[b].propDep});n||(X(b,c,e.context),a=!1);var k=e.framebuffer,p=!1;k?(k.propDep?n=p=!0:k.contextDep&&n&&(p=!0),p||ob(b,c,k)):ob(b,c,null);e.state.viewport&&e.state.viewport.propDep&&(n=!0);ga(b,c,e);ra(b,c,e.state,function(b){return!g(b)});e.profile&&g(e.profile)||qc(b,c,
e,!1,"a1");e.contextDep=n;e.needsContext=a;e.needsFramebuffer=p;a=e.shader.progVar;if(a.contextDep&&n||a.propDep)ub(b,c,e,null);else if(a=a.append(b,c),c(b.shared.gl,".useProgram(",a,".program);"),e.shader.program)ub(b,c,e,e.shader.program);else{c(b.shared.vao,".setVAO(null);");var k=b.global.def("{}"),p=c.def(a,".id"),q=c.def(k,"[",p,"]");c(b.cond(q).then(q,".call(this,a0,a1);")["else"](q,"=",k,"[",p,"]=",b.link(function(g){return aa(ub,b,e,g,2)}),"(",a,");",q,".call(this,a0,a1);"))}0<f(e.state).length&&
c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function Vc(b,e){function n(g){var c=e.shader[g];c&&a.set(k.shader,"."+g,c.append(b,a))}var a=b.proc("scope",3);b.batchId="a2";var k=b.shared,p=k.current;X(b,a,e.context);e.framebuffer&&e.framebuffer.append(b,a);c(f(e.state)).forEach(function(c){var f=e.state[c].append(b,a);g(f)?f.forEach(function(e,g){a.set(b.next[c],"["+g+"]",e)}):a.set(k.next,"."+c,f)});qc(b,a,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(g){var c=
e.draw[g];c&&a.set(k.draw,"."+g,""+c.append(b,a))});f(e.uniforms).forEach(function(g){var c=e.uniforms[g].append(b,a);Array.isArray(c)&&(c="["+c.join()+"]");a.set(k.uniforms,"["+y.id(g)+"]",c)});f(e.attributes).forEach(function(g){var c=e.attributes[g].append(b,a),n=b.scopeAttrib(g);f(new ia).forEach(function(b){a.set(n,"."+b,c[b])})});e.scopeVAO&&a.set(k.vao,".targetVAO",e.scopeVAO.append(b,a));n("vert");n("frag");0<f(e.state).length&&(a(p,".dirty=true;"),a.exit(p,".dirty=true;"));a("a1(",b.shared.context,
",a0,",b.batchId,");")}function L(b){if("object"===typeof b&&!g(b)){for(var e=f(b),c=0;c<e.length;++c)if(n.isDynamic(b[e[c]]))return!0;return!1}}function F(b,e,g){function c(b,e){p.forEach(function(g){var c=a[g];n.isDynamic(c)&&(c=b.invoke(e,c),e(y,".",g,"=",c,";"))})}var a=e["static"][g];if(a&&L(a)){var k=b.global,p=f(a),q=!1,r=!1,u=!1,y=b.global.def("{}");p.forEach(function(e){var g=a[e];if(n.isDynamic(g))"function"===typeof g&&(g=a[e]=n.unbox(g)),e=l(g,null),q=q||e.thisDep,u=u||e.propDep,r=r||
e.contextDep;else{k(y,".",e,"=");switch(typeof g){case "number":k(g);break;case "string":k('"',g,'"');break;case "object":Array.isArray(g)&&k("[",g.join(),"]");break;default:k(b.link(g))}k(";")}});e.dynamic[g]=new n.DynamicVariable(4,{thisDep:q,contextDep:r,propDep:u,ref:y,append:c});delete e["static"][g]}}var ia=ma.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};d.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var Y=d.angle_instanced_arrays,fa=d.webgl_draw_buffers,ta=d.oes_vertex_array_object,
N={dirty:!0,profile:W.profile},G={},ca=[],za={},Aa={};M("dither",3024);M("blend.enable",3042);T("blend.color","blendColor",[0,0,0,0]);T("blend.equation","blendEquationSeparate",[32774,32774]);T("blend.func","blendFuncSeparate",[1,0,1,0]);M("depth.enable",2929,!0);T("depth.func","depthFunc",513);T("depth.range","depthRange",[0,1]);T("depth.mask","depthMask",!0);T("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);T("cull.face","cullFace",1029);T("frontFace","frontFace",2305);T("lineWidth",
"lineWidth",1);M("polygonOffset.enable",32823);T("polygonOffset.offset","polygonOffset",[0,0]);M("sample.alpha",32926);M("sample.enable",32928);T("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",2960);T("stencil.mask","stencilMask",-1);T("stencil.func","stencilFunc",[519,0,-1]);T("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);T("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);T("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);
T("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var Ka={gl:e,context:ea,strings:y,next:G,current:N,draw:Db,elements:J,buffer:t,shader:Sa,attributes:ma.state,vao:ma,uniforms:ka,framebuffer:Z,extensions:d,timer:Oa,isBufferArgs:a},E={primTypes:p,compareFuncs:v,blendFuncs:x,blendEquations:ua,stencilOps:H,glTypes:r,orientationType:sa};k.optional(function(){Ka.isArrayLike=g});fa&&(E.backBuffer=[1029],E.drawBuffer=B(h.maxDrawbuffers,function(b){return 0===b?[0]:B(b,function(b){return 36064+
b})}));var nc=0;return{next:G,current:N,procs:function(){var b=pa(),e=b.proc("poll"),c=b.proc("refresh"),n=b.block();e(n);c(n);var a=b.shared,k=a.gl,p=a.next,q=a.current;n(q,".dirty=false;");ob(b,e);ob(b,c,null,!0);var r;Y&&(r=b.link(Y));d.oes_vertex_array_object&&c(b.link(d.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var u=0;u<h.maxAttributes;++u){var l=c.def(a.attributes,"[",u,"]"),y=b.cond(l,".buffer");y.then(k,".enableVertexAttribArray(",u,");",k,".bindBuffer(",34962,",",l,".buffer.buffer);",
k,".vertexAttribPointer(",u,",",l,".size,",l,".type,",l,".normalized,",l,".stride,",l,".offset);")["else"](k,".disableVertexAttribArray(",u,");",k,".vertexAttrib4f(",u,",",l,".x,",l,".y,",l,".z,",l,".w);",l,".buffer=null;");c(y);Y&&c(r,".vertexAttribDivisorANGLE(",u,",",l,".divisor);")}c(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");f(za).forEach(function(g){var f=za[g],a=n.def(p,".",g),r=b.block();r("if(",a,"){",k,".enable(",f,")}else{",k,".disable(",f,")}",
q,".",g,"=",a,";");c(r);e("if(",a,"!==",q,".",g,"){",r,"}")});f(Aa).forEach(function(f){var a=Aa[f],r=N[f],u,l,y=b.block();y(k,".",a,"(");g(r)?(a=r.length,u=b.global.def(p,".",f),l=b.global.def(q,".",f),y(B(a,function(b){return u+"["+b+"]"}),");",B(a,function(b){return l+"["+b+"]="+u+"["+b+"];"}).join("")),e("if(",B(a,function(b){return u+"["+b+"]!=="+l+"["+b+"]"}).join("||"),"){",y,"}")):(u=n.def(p,".",f),l=n.def(q,".",f),y(u,");",q,".",f,"=",u,";"),e("if(",u,"!==",l,"){",y,"}"));c(y)});return b.compile()}(),
compile:function(e,g,c,n,a){var k=pa();k.stats=k.link(a);f(g["static"]).forEach(function(b){F(k,g,b)});K.forEach(function(b){F(k,e,b)});var p=La(e,g,c,n,k);ha(k,p);Vc(k,p);Pc(k,p);return b(k.compile(),{destroy:function(){p.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],
9:[function(d,h,t){function a(c,a){this.id=l++;this.type=c;this.data=a}function c(f){if(0===f.length)return[];var a=f.charAt(0),b=f.charAt(f.length-1);if(1<f.length&&a===b&&('"'===a||"'"===a))return['"'+f.substr(1,f.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(f))return c(f.substr(0,a.index)).concat(c(a[1])).concat(c(f.substr(a.index+a[0].length)));a=f.split(".");if(1===a.length)return['"'+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+
'"'];f=[];for(b=0;b<a.length;++b)f=f.concat(c(a[b]));return f}function A(f){return"["+c(f).join("][")+"]"}function D(c,k){if("function"===typeof c)return new a(0,c);if("number"===typeof c||"boolean"===typeof c)return new a(5,c);if(Array.isArray(c))return new a(6,c.map(function(b,c){return D(b,k+"["+c+"]")}));if(c instanceof a)return c;m(!1,"invalid option type in uniform "+k)}var m=d("./util/check"),l=0;h.exports={DynamicVariable:a,define:function(c,k){return new a(c,A(k+""))},isDynamic:function(c){return"function"===
typeof c&&!c._reglType||c instanceof a},unbox:D,accessor:A}},{"./util/check":21}],10:[function(d,h,t){var a=d("./util/check"),c=d("./util/is-typed-array"),A=d("./util/is-ndarray"),D=d("./util/values"),m=d("./constants/primitives.json"),l=d("./constants/usage.json");h.exports=function(f,k,b,q){function B(b){this.id=n++;g[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function y(e,g,n,p,q,r,l){e.buffer.bind();var y;g?((y=l)||c(g)&&(!A(g)||c(g.data))||(y=k.oes_element_index_uint?
5125:5123),b._initBuffer(e.buffer,g,n,y,3)):(f.bufferData(34963,r,n),e.buffer.dtype=y||5121,e.buffer.usage=n,e.buffer.dimension=3,e.buffer.byteLength=r);y=l;if(!l){switch(e.buffer.dtype){case 5121:case 5120:y=5121;break;case 5123:case 5122:y=5123;break;case 5125:case 5124:y=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=y}e.type=y;a(5125!==y||!!k.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=q;0>g&&(g=e.buffer.byteLength,
5123===y?g>>=1:5125===y&&(g>>=2));e.vertCount=g;g=p;0>p&&(g=4,p=e.buffer.dimension,1===p&&(g=0),2===p&&(g=1),3===p&&(g=4));e.primType=g}function e(b){q.elementsCount--;a(null!==b.buffer,"must not double destroy elements");delete g[b.id];b.buffer.destroy();b.buffer=null}var g={},n=0,p={uint8:5121,uint16:5123};k.oes_element_index_uint&&(p.uint32=5125);B.prototype.bind=function(){this.buffer.bind()};var r=[];return{create:function(g,f){function n(b){if(b)if("number"===typeof b)k(b),r.primType=4,r.vertCount=
b|0,r.type=5121;else{var e=null,g=35044,f=-1,q=-1,u=0,B=0;if(Array.isArray(b)||c(b)||A(b))e=b;else if(a.type(b,"object","invalid arguments for elements"),"data"in b&&(e=b.data,a(Array.isArray(e)||c(e)||A(e),"invalid data for element buffer")),"usage"in b&&(a.parameter(b.usage,l,"invalid element buffer usage"),g=l[b.usage]),"primitive"in b&&(a.parameter(b.primitive,m,"invalid element buffer primitive"),f=m[b.primitive]),"count"in b&&(a("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),
q=b.count|0),"type"in b&&(a.parameter(b.type,p,"invalid buffer type"),B=p[b.type]),"length"in b)u=b.length|0;else if(u=q,5123===B||5122===B)u*=2;else if(5125===B||5124===B)u*=4;y(r,e,g,f,q,u,B)}else k(),r.primType=4,r.vertCount=0,r.type=5121;return n}var k=b.create(null,34963,!0),r=new B(k._buffer);q.elementsCount++;n(g);n._reglType="elements";n._elements=r;n.subdata=function(b,e){k.subdata(b,e);return n};n.destroy=function(){e(r)};return n},createStream:function(e){var g=r.pop();g||(g=new B(b.create(null,
34963,!0,!1)._buffer));y(g,e,35040,-1,-1,0,0);return g},destroyStream:function(b){r.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof B?b._elements:null},clear:function(){D(g).forEach(e)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(d,h,t){var a=d("./util/sorted-object-keys"),c=d("./util/check");h.exports=function(d,D){function m(b){c.type(b,"string",
"extension name must be string");b=b.toLowerCase();var f;try{f=l[b]=d.getExtension(b)}catch(a){}return!!f}for(var l={},f=0;f<D.extensions.length;++f){var k=D.extensions[f];if(!m(k))return D.onDestroy(),D.onDone('"'+k+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}D.optionalExtensions.forEach(m);return{extensions:l,restore:function(){a(l).forEach(function(b){if(l[b]&&!m(b))throw Error("(regl): error restoring extension "+b);})}}}},
{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(d,h,t){var a=d("./util/check"),c=d("./util/values"),A=d("./util/extend"),D=[6407,6408],m=[];m[6408]=4;m[6407]=3;var l=[];l[5121]=1;l[5126]=4;l[36193]=2;var f=[32854,32855,36194,35907,34842,34843,34836],k={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};h.exports=function(b,q,B,y,e,g){function n(b,e,g){this.target=b;this.texture=e;this.renderbuffer=
g;var c=b=0;e?(b=e.width,c=e.height):g&&(b=g.width,c=g.height);this.width=b;this.height=c}function p(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function r(b,e,g){if(b){if(b.texture){b=b.texture._texture;var c=Math.max(1,b.height);a(Math.max(1,b.width)===e&&c===g,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,a(b.width===e&&b.height===g,"inconsistent width/height for renderbuffer");b.refCount+=1}}function u(e,
g){g&&(g.texture?b.framebufferTexture2D(36160,e,g.target,g.texture._texture.texture,0):b.framebufferRenderbuffer(36160,e,36161,g.renderbuffer._renderbuffer.renderbuffer))}function d(b){var e=3553,g=null,c=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(e=b.target|0));a.type(f,"function","invalid attachment data");b=f._reglType;"texture2d"===b?(g=f,a(3553===e)):"textureCube"===b?(g=f,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===b?(c=f,e=36161):a.raise("invalid regl object for attachment");
return new n(e,g,c)}function x(b,g,c,f,a){if(c)return b=y.create2D({width:b,height:g,format:f,type:a}),b._texture.refCount=0,new n(3553,b,null);b=e.create({width:b,height:g,format:f});b._renderbuffer.refCount=0;return new n(36161,null,b)}function U(b){return b&&(b.texture||b.renderbuffer)}function v(b,e,g){b&&(b.texture?b.texture.resize(e,g):b.renderbuffer&&b.renderbuffer.resize(e,g),b.width=e,b.height=g)}function H(){this.id=J++;ja[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=
this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function la(b){b.colorAttachments.forEach(p);p(b.depthAttachment);p(b.stencilAttachment);p(b.depthStencilAttachment)}function sa(e){var c=e.framebuffer;a(c,"must not double destroy framebuffer");b.deleteFramebuffer(c);e.framebuffer=null;g.framebufferCount--;delete ja[e.id]}function h(e){var g;b.bindFramebuffer(36160,e.framebuffer);var c=e.colorAttachments;for(g=0;g<c.length;++g)u(36064+
g,c[g]);for(g=c.length;g<B.maxColorAttachments;++g)b.framebufferTexture2D(36160,36064+g,3553,null,0);b.framebufferTexture2D(36160,33306,3553,null,0);b.framebufferTexture2D(36160,36096,3553,null,0);b.framebufferTexture2D(36160,36128,3553,null,0);u(36096,e.depthAttachment);u(36128,e.stencilAttachment);u(33306,e.depthStencilAttachment);e=b.checkFramebufferStatus(36160);b.isContextLost()||36053===e||a.raise("framebuffer configuration not supported, status = "+k[e]);b.bindFramebuffer(36160,z.next?z.next.framebuffer:
null);z.cur=z.next;b.getError()}function oa(b,e){function c(b,e){var g;a(z.next!==n,"can not update framebuffer which is currently in use");var k=0,p=0,u=!0,y=!0;g=null;var v=!0,A="rgba",J="uint8",H=1,sa=null,ja=null,oa=null,Z=!1;if("number"===typeof b)k=b|0,p=e|0||k;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(p=b.shape,a(Array.isArray(p)&&2<=p.length,"invalid shape for framebuffer"),k=p[0],p=p[1]):("radius"in b&&(k=p=b.radius),"width"in b&&(k=b.width),"height"in
b&&(p=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||q.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(H=b.colorCount|0,a(0<H,"invalid color buffer count"));"colorTexture"in b&&(v=!!b.colorTexture,A="rgba4");if("colorType"in b){J=b.colorType;if(v)a(q.oes_texture_float||!("float"===J||"float32"===J),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(q.oes_texture_half_float||
!("half float"===J||"float16"===J),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===J||"float16"===J)a(q.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),A="rgba16f";else if("float"===J||"float32"===J)a(q.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),A="rgba32f";a.oneOf(J,V,"invalid color type")}"colorFormat"in
b&&(A=b.colorFormat,0<=t.indexOf(A)?v=!0:0<=I.indexOf(A)?v=!1:a.optional(function(){if(v)a.oneOf(b.colorFormat,t,"invalid color format for texture");else a.oneOf(b.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)Z=!(!b.depthTexture&&!b.depthStencilTexture),a(!Z||q.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?u=b.depth:(sa=b.depth,y=!1));"stencil"in b&&("boolean"===typeof b.stencil?
y=b.stencil:(ja=b.stencil,u=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?u=y=b.depthStencil:(oa=b.depthStencil,y=u=!1))}else k=p=1;var ka=null,Ga=null,nb=null,La=null;if(Array.isArray(g))ka=g.map(d);else if(g)ka=[d(g)];else for(ka=Array(H),g=0;g<H;++g)ka[g]=x(k,p,v,A,J);a(q.webgl_draw_buffers||1>=ka.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(ka.length<=B.maxColorAttachments,"too many color attachments, not supported");k=k||ka[0].width;
p=p||ka[0].height;sa?Ga=d(sa):u&&!y&&(Ga=x(k,p,Z,"depth","uint32"));ja?nb=d(ja):y&&!u&&(nb=x(k,p,!1,"stencil","uint8"));oa?La=d(oa):!sa&&!ja&&y&&u&&(La=x(k,p,Z,"depth stencil","depth stencil"));a(1>=!!sa+!!ja+!!oa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");u=null;for(g=0;g<ka.length;++g)r(ka[g],k,p),a(!ka[g]||ka[g].texture&&0<=D.indexOf(ka[g].texture._texture.format)||ka[g].renderbuffer&&0<=f.indexOf(ka[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+
g+" is invalid"),ka[g]&&ka[g].texture&&(y=m[ka[g].texture._texture.format]*l[ka[g].texture._texture.type],null===u?u=y:a(u===y,"all color attachments much have the same number of bits per pixel."));r(Ga,k,p);a(!Ga||Ga.texture&&6402===Ga.texture._texture.format||Ga.renderbuffer&&33189===Ga.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");r(nb,k,p);a(!nb||nb.renderbuffer&&36168===nb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
r(La,k,p);a(!La||La.texture&&34041===La.texture._texture.format||La.renderbuffer&&34041===La.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");la(n);n.width=k;n.height=p;n.colorAttachments=ka;n.depthAttachment=Ga;n.stencilAttachment=nb;n.depthStencilAttachment=La;c.color=ka.map(U);c.depth=U(Ga);c.stencil=U(nb);c.depthStencil=U(La);c.width=n.width;c.height=n.height;h(n);return c}var n=new H;g.framebufferCount++;c(b,e);return A(c,{resize:function(b,e){a(z.next!==
n,"can not resize a framebuffer which is currently in use");var g=Math.max(b|0,1),f=Math.max(e|0||g,1);if(g===n.width&&f===n.height)return c;for(var k=n.colorAttachments,p=0;p<k.length;++p)v(k[p],g,f);v(n.depthAttachment,g,f);v(n.stencilAttachment,g,f);v(n.depthStencilAttachment,g,f);n.width=c.width=g;n.height=c.height=f;h(n);return c},_reglType:"framebuffer",_framebuffer:n,destroy:function(){sa(n);la(n)},use:function(b){z.setFBO({framebuffer:c},b)}})}var z={cur:null,next:null,dirty:!1,setFBO:null},
t=["rgba"],I=["rgba4","rgb565","rgb5 a1"];q.ext_srgb&&I.push("srgba");q.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");q.webgl_color_buffer_float&&I.push("rgba32f");var V=["uint8"];q.oes_texture_half_float&&V.push("half float","float16");q.oes_texture_float&&V.push("float","float32");var J=0,ja={};return A(z,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof H)?b:null},create:oa,createCube:function(b){function e(b){var c;a(0>
g.indexOf(z.next),"can not update framebuffer which is currently in use");var f={color:null},n=0,k=null;c="rgba";var p="uint8",r=1;if("number"===typeof b)n=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(n=b.shape,a(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),a(n[0]===n[1],"cube framebuffer must be square"),n=n[0]):("radius"in b&&(n=b.radius|0),"width"in b?(n=b.width|0,"height"in b&&a(b.height===n,"must be square")):"height"in b&&(n=b.height|0));
if("color"in b||"colors"in b)k=b.color||b.colors,Array.isArray(k)&&a(1===k.length||q.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in b&&(r=b.colorCount|0,a(0<r,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,V,"invalid color type"),p=b.colorType),"colorFormat"in b&&(c=b.colorFormat,a.oneOf(b.colorFormat,t,"invalid color format for texture")));"depth"in b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=
b.depthStencil)}else n=1;if(k)if(Array.isArray(k))for(b=[],c=0;c<k.length;++c)b[c]=k[c];else b=[k];else for(b=Array(r),k={radius:n,format:c,type:p},c=0;c<r;++c)b[c]=y.createCube(k);f.color=Array(b.length);for(c=0;c<b.length;++c)r=b[c],a("function"===typeof r&&"textureCube"===r._reglType,"invalid cube map"),n=n||r.width,a(r.width===n&&r.height===n,"invalid cube map shape"),f.color[c]={target:34069,data:b[c]};for(c=0;6>c;++c){for(r=0;r<b.length;++r)f.color[r].target=34069+c;0<c&&(f.depth=g[0].depth,
f.stencil=g[0].stencil,f.depthStencil=g[0].depthStencil);if(g[c])g[c](f);else g[c]=oa(f)}return A(e,{width:n,height:n,color:b})}var g=Array(6);e(b);return A(e,{faces:g,resize:function(b){var c=b|0;a(0<c&&c<=B.maxCubeMapSize,"invalid radius for cube fbo");if(c===e.width)return e;var f=e.color;for(b=0;b<f.length;++b)f[b].resize(c);for(b=0;6>b;++b)g[b].resize(c);e.width=e.height=c;return e},_reglType:"framebufferCube",destroy:function(){g.forEach(function(b){b.destroy()})}})},clear:function(){c(ja).forEach(sa)},
restore:function(){z.cur=null;z.next=null;z.dirty=!0;c(ja).forEach(function(e){e.framebuffer=b.createFramebuffer();h(e)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(d,h,t){var a=d("./util/sorted-object-keys"),c=d("./util/pool");h.exports=function(d,D){var m=1;D.ext_texture_filter_anisotropic&&(m=d.getParameter(34047));var l=1,f=1;D.webgl_draw_buffers&&(l=d.getParameter(34852),f=d.getParameter(36063));var k=!!D.oes_texture_float;if(k){k=d.createTexture();d.bindTexture(3553,
k);d.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var b=d.createFramebuffer();d.bindFramebuffer(36160,b);d.framebufferTexture2D(36160,36064,3553,k,0);d.bindTexture(3553,null);if(36053!==d.checkFramebufferStatus(36160))k=!1;else{d.viewport(0,0,1,1);d.clearColor(1,0,0,1);d.clear(16384);var q=c.allocType(5126,4);d.readPixels(0,0,1,1,6408,5126,q);d.getError()?k=!1:(d.deleteFramebuffer(b),d.deleteTexture(k),k=1===q[0]);c.freeType(q)}}q=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(q=d.createTexture(),b=c.allocType(5121,36),d.activeTexture(33984),d.bindTexture(34067,q),d.texImage2D(34069,0,6408,3,3,0,6408,5121,b),c.freeType(b),d.bindTexture(34067,null),d.deleteTexture(q),q=!d.getError());return{colorBits:[d.getParameter(3410),d.getParameter(3411),d.getParameter(3412),d.getParameter(3413)],depthBits:d.getParameter(3414),stencilBits:d.getParameter(3415),subpixelBits:d.getParameter(3408),extensions:a(D).filter(function(b){return!!D[b]}),
maxAnisotropic:m,maxDrawbuffers:l,maxColorAttachments:f,pointSizeDims:d.getParameter(33901),lineWidthDims:d.getParameter(33902),maxViewportDims:d.getParameter(3386),maxCombinedTextureUnits:d.getParameter(35661),maxCubeMapSize:d.getParameter(34076),maxRenderbufferSize:d.getParameter(34024),maxTextureUnits:d.getParameter(34930),maxTextureSize:d.getParameter(3379),maxAttributes:d.getParameter(34921),maxVertexUniforms:d.getParameter(36347),maxVertexTextureUnits:d.getParameter(35660),maxVaryingVectors:d.getParameter(36348),
maxFragmentUniforms:d.getParameter(36349),glsl:d.getParameter(35724),renderer:d.getParameter(7937),vendor:d.getParameter(7936),version:d.getParameter(7938),readFloat:k,npotTextureCube:q}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(d,h,t){var a=d("./util/check"),c=d("./util/is-typed-array");h.exports=function(d,D,m,l,f,k,b){function q(q){var e;null===D.next?(a(f.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(a(null!==D.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=D.next.colorAttachments[0].texture._texture.type,a.optional(function(){k.oes_texture_float?(a(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&a(b.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var g=0,n=0,p=l.framebufferWidth,r=l.framebufferHeight,u=null;c(q)?u=q:q&&(a.type(q,"object","invalid arguments to regl.read()"),g=q.x|0,n=q.y|0,a(0<=g&&g<l.framebufferWidth,"invalid x offset for regl.read"),a(0<=n&&n<l.framebufferHeight,"invalid y offset for regl.read"),p=(q.width||l.framebufferWidth-g)|0,r=(q.height||l.framebufferHeight-n)|0,u=q.data||null);u&&(5121===e?a(u instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&a(u instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<p&&p+g<=l.framebufferWidth,"invalid width for read pixels");a(0<r&&r+n<=l.framebufferHeight,"invalid height for read pixels");m();q=p*r*4;u||(5121===e?u=new Uint8Array(q):5126===e&&(u=u||new Float32Array(q)));a.isTypedArray(u,"data buffer for regl.read() must be a typedarray");a(u.byteLength>=q,"data buffer for regl.read() too small");d.pixelStorei(3333,4);d.readPixels(g,n,p,r,6408,e,u);return u}function B(b){var e;
D.setFBO({framebuffer:b.framebuffer},function(){e=q(b)});return e}return function(b){return b&&"framebuffer"in b?B(b):q(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(d,h,t){var a=d("./util/sorted-object-keys"),c=d("./util/check"),A=d("./util/values"),D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[33189]=2;D[36168]=1;D[34041]=4;D[35907]=4;D[34836]=16;D[34842]=8;D[34843]=6;h.exports=function(d,l,f,k,b){function q(e){this.id=g++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;b.profile&&(this.stats={size:0})}function B(b){var e=b.renderbuffer;c(e,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(e);b.renderbuffer=null;b.refCount=0;delete n[b.id];k.renderbufferCount--}var y={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};l.ext_srgb&&(y.srgba=35907);l.ext_color_buffer_half_float&&(y.rgba16f=34842,y.rgb16f=34843);l.webgl_color_buffer_float&&(y.rgba32f=34836);var e=[];a(y).forEach(function(b){e[y[b]]=
b});var g=0,n={};q.prototype.decRef=function(){0>=--this.refCount&&B(this)};b.profile&&(k.getTotalRenderbufferSize=function(){var b=0;a(n).forEach(function(e){b+=n[e].stats.size});return b});return{create:function(g,a){function u(g,n){var a=0,k=0,p=32854;"object"===typeof g&&g?("shape"in g?(k=g.shape,c(Array.isArray(k)&&2<=k.length,"invalid renderbuffer shape"),a=k[0]|0,k=k[1]|0):("radius"in g&&(a=k=g.radius|0),"width"in g&&(a=g.width|0),"height"in g&&(k=g.height|0)),"format"in g&&(c.parameter(g.format,
y,"invalid renderbuffer format"),p=y[g.format])):"number"===typeof g?(a=g|0,k="number"===typeof n?n|0:a):g?c.raise("invalid arguments to renderbuffer constructor"):a=k=1;c(0<a&&0<k&&a<=f.maxRenderbufferSize&&k<=f.maxRenderbufferSize,"invalid renderbuffer size");if(a!==l.width||k!==l.height||p!==l.format)return u.width=l.width=a,u.height=l.height=k,l.format=p,d.bindRenderbuffer(36161,l.renderbuffer),d.renderbufferStorage(36161,p,a,k),c(0===d.getError(),"invalid render buffer format"),b.profile&&(l.stats.size=
D[l.format]*l.width*l.height),u.format=e[l.format],u}var l=new q(d.createRenderbuffer());n[l.id]=l;k.renderbufferCount++;u(g,a);u.resize=function(e,g){var n=e|0,a=g|0||n;if(n===l.width&&a===l.height)return u;c(0<n&&0<a&&n<=f.maxRenderbufferSize&&a<=f.maxRenderbufferSize,"invalid renderbuffer size");u.width=l.width=n;u.height=l.height=a;d.bindRenderbuffer(36161,l.renderbuffer);d.renderbufferStorage(36161,l.format,n,a);c(0===d.getError(),"invalid render buffer format");b.profile&&(l.stats.size=D[l.format]*
l.width*l.height);return u};u._reglType="renderbuffer";u._renderbuffer=l;b.profile&&(u.stats=l.stats);u.destroy=function(){l.decRef()};return u},clear:function(){A(n).forEach(B)},restore:function(){A(n).forEach(function(b){b.renderbuffer=d.createRenderbuffer();d.bindRenderbuffer(36161,b.renderbuffer);d.renderbufferStorage(36161,b.format,b.width,b.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(d,h,t){var a=d("./util/sorted-object-keys"),
c=d("./util/check"),A=d("./util/extend"),D=d("./util/values");h.exports=function(d,l,f,k){function b(b,e,g,c){this.name=b;this.id=e;this.location=g;this.info=c}function q(b,e){for(var g=0;g<b.length;++g)if(b[g].id===e.id){b[g].location=e.location;return}b.push(e)}function B(b,e,f){var a=35632===b?g:n,k=a[e];if(!k){var p=l.str(e),k=d.createShader(b);d.shaderSource(k,p);d.compileShader(k);c.shaderError(d,k,p,b,f);a[e]=k}return k}function y(b,e){this.id=u++;this.fragId=b;this.vertId=e;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;k.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(e,g,f){var n;n=B(35632,e.fragId);var a=B(35633,e.vertId),p=e.program=d.createProgram();d.attachShader(p,n);d.attachShader(p,a);if(f)for(n=0;n<f.length;++n)a=f[n],d.bindAttribLocation(p,a[0],a[1]);d.linkProgram(p);c.linkError(d,p,l.str(e.fragId),l.str(e.vertId),g);f=d.getProgramParameter(p,35718);k.profile&&(e.stats.uniformsCount=f);a=e.uniforms;for(n=0;n<f;++n)if(g=d.getActiveUniform(p,
n))if(1<g.size)for(var r=0;r<g.size;++r){var u=g.name.replace("[0]","["+r+"]");q(a,new b(u,l.id(u),d.getUniformLocation(p,u),g))}else q(a,new b(g.name,l.id(g.name),d.getUniformLocation(p,g.name),g));f=d.getProgramParameter(p,35721);k.profile&&(e.stats.attributesCount=f);e=e.attributes;for(n=0;n<f;++n)(g=d.getActiveAttrib(p,n))&&q(e,new b(g.name,l.id(g.name),d.getAttribLocation(p,g.name),g))}var g={},n={},p={},r=[],u=0;k.profile&&(f.getMaxUniformsCount=function(){var b=0;r.forEach(function(e){e.stats.uniformsCount>
b&&(b=e.stats.uniformsCount)});return b},f.getMaxAttributesCount=function(){var b=0;r.forEach(function(e){e.stats.attributesCount>b&&(b=e.stats.attributesCount)});return b});return{clear:function(){var b=d.deleteShader.bind(d);D(g).forEach(b);g={};D(n).forEach(b);n={};r.forEach(function(b){d.deleteProgram(b.program)});r.length=0;p={};f.shaderCount=0},program:function(b,k,q,u){c.command(0<=b,"missing vertex shader",q);c.command(0<=k,"missing fragment shader",q);var l=p[k];l||(l=p[k]={});var B=l[b];
if(B&&(B.refCount++,!u))return B;var D=new y(k,b);f.shaderCount++;e(D,q,u);B||(l[b]=D);r.push(D);return A(D,{destroy:function(){D.refCount--;if(0>=D.refCount){d.deleteProgram(D.program);var b=r.indexOf(D);r.splice(b,1);f.shaderCount--}0>=l[D.vertId].refCount&&(d.deleteShader(n[D.vertId]),delete n[D.vertId],delete p[D.fragId][D.vertId]);a(p[D.fragId]).length||(d.deleteShader(g[D.fragId]),delete g[D.fragId],delete p[D.fragId])}})},restore:function(){g={};n={};for(var b=0;b<r.length;++b)e(r[b],null,
r[b].attributes.map(function(b){return[b.location,b.name]}))},shader:B,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(d,h,t){h.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(d,h,t){h.exports=function(){var a={"":0},c=[""];return{id:function(d){var D=a[d];if(D)return D;D=a[d]=c.length;c.push(d);
return D},str:function(a){return c[a]}}}},{}],19:[function(d,h,t){function a(b){return"[object "+b+"]"}function c(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function A(b){return Array.isArray(b)&&0!==b.length&&p(b[0])?!0:!1}function D(b){return Object.prototype.toString.call(b)}function m(b){if(!b)return!1;var g=D(b);return 0<=ba.indexOf(g)?!0:c(b)||A(b)||e(b)}function l(b,e){36193===b.type?(b.data=n(e),g.freeType(e)):b.data=e}function f(b,e,g,c,f,n){b="undefined"!==typeof V[b]?
V[b]:v[b]*I[e];n&&(b*=6);if(f){for(c=0;1<=g;)c+=b*g*g,g/=2;return c}return b*g*c}var k=d("./util/sorted-object-keys"),b=d("./util/check"),q=d("./util/extend"),B=d("./util/values"),y=d("./util/is-typed-array"),e=d("./util/is-ndarray"),g=d("./util/pool"),n=d("./util/to-half-float"),p=d("./util/is-array-like"),r=d("./util/flatten"),u=d("./util/is-pow2");t=d("./constants/arraytypes.json");var K=d("./constants/arraytypes.json"),x=[9984,9986,9985,9987],U=[0,6409,6410,6407,6408],v={};v[6409]=v[6406]=v[6402]=
1;v[34041]=v[6410]=2;v[6407]=v[35904]=3;v[6408]=v[35906]=4;var H=a("HTMLCanvasElement"),la=a("OffscreenCanvas"),sa=a("CanvasRenderingContext2D"),O=a("ImageBitmap"),oa=a("HTMLImageElement"),z=a("HTMLVideoElement"),ba=k(t).concat([H,la,sa,O,oa,z]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var V=[];V[32854]=2;V[32855]=2;V[36194]=2;V[34041]=4;V[33776]=.5;V[33777]=.5;V[33778]=1;V[33779]=1;V[35986]=.5;V[35987]=1;V[34798]=1;V[35840]=.5;V[35841]=.25;V[35842]=.5;V[35843]=.25;V[36196]=.5;h.exports=
function(a,d,h,I,t,ba,V){function ea(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Oa(b,e){b.internalformat=e.internalformat;b.format=e.format;b.type=e.type;b.compressed=e.compressed;b.premultiplyAlpha=e.premultiplyAlpha;b.flipY=e.flipY;b.unpackAlignment=e.unpackAlignment;b.colorSpace=e.colorSpace;b.width=e.width;b.height=e.height;b.channels=e.channels}
function W(e,g){if("object"===typeof g&&g){"premultiplyAlpha"in g&&(b.type(g.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=g.premultiplyAlpha);"flipY"in g&&(b.type(g.flipY,"boolean","invalid texture flip"),e.flipY=g.flipY);"alignment"in g&&(b.oneOf(g.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=g.alignment);"colorSpace"in g&&(b.parameter(g.colorSpace,zc,"invalid colorSpace"),e.colorSpace=zc[g.colorSpace]);if("type"in g){var c=g.type;b(d.oes_texture_float||
!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");b(d.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");b(d.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");b.parameter(c,aa,"invalid texture type");e.type=
aa[c]}var f=e.width,n=e.height,a=e.channels,c=!1;"shape"in g?(b(Array.isArray(g.shape)&&2<=g.shape.length,"shape must be an array"),f=g.shape[0],n=g.shape[1],3===g.shape.length&&(a=g.shape[2],b(0<a&&4>=a,"invalid number of channels"),c=!0),b(0<=f&&f<=h.maxTextureSize,"invalid width"),b(0<=n&&n<=h.maxTextureSize,"invalid height")):("radius"in g&&(f=n=g.radius,b(0<=f&&f<=h.maxTextureSize,"invalid radius")),"width"in g&&(f=g.width,b(0<=f&&f<=h.maxTextureSize,"invalid width")),"height"in g&&(n=g.height,
b(0<=n&&n<=h.maxTextureSize,"invalid height")),"channels"in g&&(a=g.channels,b(0<a&&4>=a,"invalid number of channels"),c=!0));e.width=f|0;e.height=n|0;e.channels=a|0;f=!1;"format"in g&&(f=g.format,b(d.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),b.parameter(f,P,"invalid texture format"),n=e.internalformat=P[f],e.format=ua[n],f in aa&&!("type"in g)&&(e.type=aa[f]),f in ha&&(e.compressed=!0),f=!0);
!c&&f?e.channels=v[e.format]:c&&!f?e.channels!==U[e.format]&&(e.format=e.internalformat=U[e.channels]):f&&c&&b(e.channels===v[e.format],"number of channels inconsistent with specified format")}}function Q(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function M(){ea.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function T(f,a){var k=null;m(a)?
k=a:a&&(b.type(a,"object","invalid pixel data type"),W(f,a),"x"in a&&(f.xOffset=a.x|0),"y"in a&&(f.yOffset=a.y|0),m(a.data)&&(k=a.data));b(!f.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){b(!k,"can not specify copy and data field for the same texture");var q=t.viewportWidth,u=t.viewportHeight;f.width=f.width||q-f.xOffset;f.height=f.height||u-f.yOffset;f.needsCopy=!0;b(0<=f.xOffset&&f.xOffset<q&&0<=f.yOffset&&f.yOffset<u&&0<f.width&&f.width<=
q&&0<f.height&&f.height<=u,"copy texture read out of bounds")}else if(!k)f.width=f.width||1,f.height=f.height||1,f.channels=f.channels||4;else if(y(k))f.channels=f.channels||4,f.data=k,"type"in a||5121!==f.type||(f.type=K[Object.prototype.toString.call(k)]|0);else if(c(k)){f.channels=f.channels||4;q=k;u=q.length;switch(f.type){case 5121:case 5123:case 5125:case 5126:u=g.allocType(f.type,u);u.set(q);f.data=u;break;case 36193:f.data=n(q);break;default:b.raise("unsupported texture type, must specify a typed array")}f.alignment=
1;f.needsFree=!0}else if(e(k)){q=k.data;Array.isArray(q)||5121!==f.type||(f.type=K[Object.prototype.toString.call(q)]|0);var u=k.shape,d=k.stride,B,x,v,J;3===u.length?(v=u[2],J=d[2]):(b(2===u.length,"invalid ndarray pixel data, must be 2 or 3D"),J=v=1);B=u[0];x=u[1];u=d[0];d=d[1];f.alignment=1;f.width=B;f.height=x;f.channels=v;f.format=f.internalformat=U[v];f.needsFree=!0;B=J;k=k.offset;v=f.width;J=f.height;x=f.channels;for(var ja=g.allocType(36193===f.type?5126:f.type,v*J*x),G=0,C=0;C<J;++C)for(var F=
0;F<v;++F)for(var P=0;P<x;++P)ja[G++]=q[u*F+d*C+B*P+k];l(f,ja)}else if(D(k)===H||D(k)===la||D(k)===sa)D(k)===H||D(k)===la?f.element=k:f.element=k.canvas,f.width=f.element.width,f.height=f.element.height,f.channels=4;else if(D(k)===O)f.element=k,f.width=k.width,f.height=k.height,f.channels=4;else if(D(k)===oa)f.element=k,f.width=k.naturalWidth,f.height=k.naturalHeight,f.channels=4;else if(D(k)===z)f.element=k,f.width=k.videoWidth,f.height=k.videoHeight,f.channels=4;else if(A(k)){q=f.width||k[0].length;
u=f.height||k.length;d=f.channels;d=p(k[0][0])?d||k[0][0].length:d||1;B=r.shape(k);v=1;for(J=0;J<B.length;++J)v*=B[J];v=g.allocType(36193===f.type?5126:f.type,v);r.flatten(k,B,"",v);l(f,v);f.alignment=1;f.width=q;f.height=u;f.channels=d;f.format=f.internalformat=U[d];f.needsFree=!0}5126===f.type?b(0<=h.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===f.type&&b(0<=h.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function pa(b,e,g,c,f){var n=b.element,k=b.data,p=b.internalformat,q=b.format,r=b.type,u=b.width,l=b.height;Q(b);n?a.texSubImage2D(e,f,g,c,q,r,n):b.compressed?a.compressedTexSubImage2D(e,f,g,c,p,u,l,k):b.needsCopy?(I(),a.copyTexSubImage2D(e,f,g,c,b.xOffset,b.yOffset,u,l)):a.texSubImage2D(e,f,g,c,u,l,q,r,k)}function R(){return Y.pop()||new M}function Hb(b){b.needsFree&&g.freeType(b.data);M.call(b);Y.push(b)}function ab(){ea.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function S(b,e,g){var c=b.images[0]=R();b.mipmask=1;c.width=b.width=e;c.height=b.height=g;c.channels=b.channels=4}function C(e,g){var c=null;if(m(g))c=e.images[0]=R(),Oa(c,e),T(c,g),e.mipmask=1;else if(W(e,g),Array.isArray(g.mipmap))for(var f=g.mipmap,a=0;a<f.length;++a)c=e.images[a]=R(),Oa(c,e),c.width>>=a,c.height>>=a,T(c,f[a]),e.mipmask|=1<<a;else c=e.images[0]=R(),Oa(c,e),T(c,g),e.mipmask=1;Oa(e,e.images[0]);!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==
e.internalformat&&33779!==e.internalformat||b(0===e.width%4&&0===e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function na(b,e){for(var g=b.images,c=0;c<g.length&&g[c];++c){var f=g[c],n=e,k=c,p=f.element,q=f.data,r=f.internalformat,u=f.format,l=f.type,d=f.width,y=f.height;Q(f);p?a.texImage2D(n,k,u,u,l,p):f.compressed?a.compressedTexImage2D(n,k,r,d,y,0,q):f.needsCopy?(I(),a.copyTexImage2D(n,k,u,f.xOffset,f.yOffset,d,y,0)):a.texImage2D(n,
k,u,d,y,0,u,l,q||null)}}function da(){var b=fa.pop()||new ab;ea.call(b);for(var e=b.mipmask=0;16>e;++e)b.images[e]=null;return b}function Da(b){for(var e=b.images,g=0;g<e.length;++g)e[g]&&Hb(e[g]),e[g]=null;fa.push(b)}function Ga(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function nb(e,g){if("min"in g){var c=g.min;b.parameter(c,td);e.minFilter=td[c];0<=x.indexOf(e.minFilter)&&!("faces"in g)&&(e.genMipmaps=!0)}"mag"in
g&&(c=g.mag,b.parameter(c,ic),e.magFilter=ic[c]);var c=e.wrapS,f=e.wrapT;if("wrap"in g){var a=g.wrap;"string"===typeof a?(b.parameter(a,qc),c=f=qc[a]):Array.isArray(a)&&(b.parameter(a[0],qc),b.parameter(a[1],qc),c=qc[a[0]],f=qc[a[1]])}else"wrapS"in g&&(c=g.wrapS,b.parameter(c,qc),c=qc[c]),"wrapT"in g&&(f=g.wrapT,b.parameter(f,qc),f=qc[f]);e.wrapS=c;e.wrapT=f;"anisotropic"in g&&(c=g.anisotropic,b("number"===typeof c&&1<=c&&c<=h.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=g.anisotropic);
if("mipmap"in g){c=!1;switch(typeof g.mipmap){case "string":b.parameter(g.mipmap,cc,"invalid mipmap hint");e.mipmapHint=cc[g.mipmap];c=e.genMipmaps=!0;break;case "boolean":c=e.genMipmaps=g.mipmap;break;case "object":b(Array.isArray(g.mipmap),"invalid mipmap type");e.genMipmaps=!1;c=!0;break;default:b.raise("invalid mipmap type")}!c||"min"in g||(e.minFilter=9984)}}function La(b,e){a.texParameteri(e,10241,b.minFilter);a.texParameteri(e,10240,b.magFilter);a.texParameteri(e,10242,b.wrapS);a.texParameteri(e,
10243,b.wrapT);d.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(e))}function X(b){ea.call(this);this.mipmask=0;this.internalformat=6408;this.id=ta++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ga;V.profile&&(this.stats={size:0})}function ob(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=ca[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function ra(e){var g=e.texture;b(g,"must not double destroy texture");var c=e.unit,f=e.target;0<=c&&(a.activeTexture(33984+c),a.bindTexture(f,null),ca[c]=null);a.deleteTexture(g);e.texture=null;e.params=null;e.pixels=null;e.refCount=0;delete N[e.id];ba.textureCount--}var cc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},qc={repeat:10497,clamp:33071,mirror:33648},ic={nearest:9728,linear:9729},td=q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},ic),zc={none:0,browser:37444},aa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},P={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ha={};d.ext_srgb&&(P.srgb=35904,P.srgba=35906);d.oes_texture_float&&(aa.float32=aa["float"]=5126);d.oes_texture_half_float&&(aa.float16=aa["half float"]=36193);d.webgl_depth_texture&&(q(P,{depth:6402,"depth stencil":34041}),q(aa,{uint16:5123,uint32:5125,
"depth stencil":34042}));d.webgl_compressed_texture_s3tc&&q(ha,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});d.webgl_compressed_texture_atc&&q(ha,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});d.webgl_compressed_texture_pvrtc&&q(ha,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});d.webgl_compressed_texture_etc1&&(ha["rgb etc1"]=36196);var Ha=Array.prototype.slice.call(a.getParameter(34467));
k(ha).forEach(function(b){var e=ha[b];0<=Ha.indexOf(e)&&(P[b]=e)});var ub=k(P);h.textureFormats=ub;var Pc=[];k(P).forEach(function(b){Pc[P[b]]=b});var Vc=[];k(aa).forEach(function(b){Vc[aa[b]]=b});var L=[];k(ic).forEach(function(b){L[ic[b]]=b});var F=[];k(td).forEach(function(b){F[td[b]]=b});var ia=[];k(qc).forEach(function(b){ia[qc[b]]=b});var ua=ub.reduce(function(b,e){var g=P[e];6409===g||6406===g||6409===g||6410===g||6402===g||34041===g||d.ext_srgb&&(35904===g||35906===g)?b[g]=g:32855===g||0<=
e.indexOf("rgba")?b[g]=6408:b[g]=6407;return b},{}),Y=[],fa=[],ta=0,N={},G=h.maxTextureUnits,ca=Array(G).map(function(){return null});q(X.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var g=0;g<G;++g){var c=ca[g];if(c){if(0<c.bindCount)continue;c.unit=-1}ca[g]=this;e=g;break}e>=G&&b.raise("insufficient number of texture units");V.profile&&ba.maxTextureUnits<e+1&&(ba.maxTextureUnits=e+1);this.unit=e;a.activeTexture(33984+e);a.bindTexture(this.target,this.texture)}return e},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ra(this)}});V.profile&&(ba.getTotalTextureSize=function(){var b=0;k(N).forEach(function(e){b+=N[e].stats.size});return b});return{create2D:function(e,g){function c(e,g){var a=n.texInfo;Ga.call(a);var k=da();"number"===typeof e?"number"===typeof g?S(k,e|0,g|0):S(k,e|0,e|0):e?(b.type(e,"object","invalid arguments to regl.texture"),nb(a,e),C(k,e)):S(k,1,1);a.genMipmaps&&(k.mipmask=(k.width<<1)-1);n.mipmask=k.mipmask;Oa(n,k);b.texture2D(a,
k,h);n.internalformat=k.internalformat;c.width=k.width;c.height=k.height;ob(n);na(k,3553);La(a,3553);ga();Da(k);V.profile&&(n.stats.size=f(n.internalformat,n.type,k.width,k.height,a.genMipmaps,!1));c.format=Pc[n.internalformat];c.type=Vc[n.type];c.mag=L[a.magFilter];c.min=F[a.minFilter];c.wrapS=ia[a.wrapS];c.wrapT=ia[a.wrapT];return c}var n=new X(3553);N[n.id]=n;ba.textureCount++;c(e,g);c.subimage=function(e,g,f,a){b(!!e,"must specify image data");g|=0;f|=0;a|=0;var k=R();Oa(k,n);k.width=0;k.height=
0;T(k,e);k.width=k.width||(n.width>>a)-g;k.height=k.height||(n.height>>a)-f;b(n.type===k.type&&n.format===k.format&&n.internalformat===k.internalformat,"incompatible format for texture.subimage");b(0<=g&&0<=f&&g+k.width<=n.width&&f+k.height<=n.height,"texture.subimage write out of bounds");b(n.mipmask&1<<a,"missing mipmap data");b(k.data||k.element||k.needsCopy,"missing image data");ob(n);pa(k,3553,g,f,a);ga();Hb(k);return c};c.resize=function(b,e){var g=b|0,k=e|0||g;if(g===n.width&&k===n.height)return c;
c.width=n.width=g;c.height=n.height=k;ob(n);for(var p=0;n.mipmask>>p;++p){var q=g>>p,r=k>>p;if(!q||!r)break;a.texImage2D(3553,p,n.format,q,r,0,n.format,n.type,null)}ga();V.profile&&(n.stats.size=f(n.internalformat,n.type,g,k,!1,!1));return c};c._reglType="texture2d";c._texture=n;V.profile&&(c.stats=n.stats);c.destroy=function(){n.decRef()};return c},createCube:function(e,g,c,n,k,p){function q(e,g,c,n,a,k){var p,d=r.texInfo;Ga.call(d);for(p=0;6>p;++p)l[p]=da();if("number"!==typeof e&&e)if("object"===
typeof e)if(g)C(l[0],e),C(l[1],g),C(l[2],c),C(l[3],n),C(l[4],a),C(l[5],k);else if(nb(d,e),W(r,e),"faces"in e)for(e=e.faces,b(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),p=0;6>p;++p)b("object"===typeof e[p]&&!!e[p],"invalid input for cube map face"),Oa(l[p],r),C(l[p],e[p]);else for(p=0;6>p;++p)C(l[p],e);else b.raise("invalid arguments to cube map");else for(e=e|0||1,p=0;6>p;++p)S(l[p],e,e);Oa(r,l[0]);b.optional(function(){h.npotTextureCube||b(u(r.width)&&u(r.height),"your browser does not support non power or two texture dimensions")});
r.mipmask=d.genMipmaps?(l[0].width<<1)-1:l[0].mipmask;b.textureCube(r,d,l,h);r.internalformat=l[0].internalformat;q.width=l[0].width;q.height=l[0].height;ob(r);for(p=0;6>p;++p)na(l[p],34069+p);La(d,34067);ga();V.profile&&(r.stats.size=f(r.internalformat,r.type,q.width,q.height,d.genMipmaps,!0));q.format=Pc[r.internalformat];q.type=Vc[r.type];q.mag=L[d.magFilter];q.min=F[d.minFilter];q.wrapS=ia[d.wrapS];q.wrapT=ia[d.wrapT];for(p=0;6>p;++p)Da(l[p]);return q}var r=new X(34067);N[r.id]=r;ba.cubeCount++;
var l=Array(6);q(e,g,c,n,k,p);q.subimage=function(e,g,c,f,n){b(!!g,"must specify image data");b("number"===typeof e&&e===(e|0)&&0<=e&&6>e,"invalid face");c|=0;f|=0;n|=0;var a=R();Oa(a,r);a.width=0;a.height=0;T(a,g);a.width=a.width||(r.width>>n)-c;a.height=a.height||(r.height>>n)-f;b(r.type===a.type&&r.format===a.format&&r.internalformat===a.internalformat,"incompatible format for texture.subimage");b(0<=c&&0<=f&&c+a.width<=r.width&&f+a.height<=r.height,"texture.subimage write out of bounds");b(r.mipmask&
1<<n,"missing mipmap data");b(a.data||a.element||a.needsCopy,"missing image data");ob(r);pa(a,34069+e,c,f,n);ga();Hb(a);return q};q.resize=function(b){b|=0;if(b!==r.width){q.width=r.width=b;q.height=r.height=b;ob(r);for(var e=0;6>e;++e)for(var g=0;r.mipmask>>g;++g)a.texImage2D(34069+e,g,r.format,b>>g,b>>g,0,r.format,r.type,null);ga();V.profile&&(r.stats.size=f(r.internalformat,r.type,q.width,q.height,!1,!0));return q}};q._reglType="textureCube";q._texture=r;V.profile&&(q.stats=r.stats);q.destroy=
function(){r.decRef()};return q},clear:function(){for(var b=0;b<G;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ca[b]=null;B(N).forEach(ra);ba.cubeCount=0;ba.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<G;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null)}B(N).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var e=0;32>e;++e)if(0!==(b.mipmask&1<<e))if(3553===b.target)a.texImage2D(3553,e,b.internalformat,b.width>>
e,b.height>>e,0,b.internalformat,b.type,null);else for(var g=0;6>g;++g)a.texImage2D(34069+g,e,b.internalformat,b.width>>e,b.height>>e,0,b.internalformat,b.type,null);La(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<G;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(d,h,t){h.exports=function(a,c){function d(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function D(b,c,e){var g=f.pop()||new d;g.startQueryIndex=b;g.endQueryIndex=c;g.sum=0;g.stats=e;k.push(g)}if(!c.ext_disjoint_timer_query)return null;var m=[],l=[],f=[],k=[],b=[],q=[];return{beginQuery:function(b){var f=m.pop()||c.ext_disjoint_timer_query.createQueryEXT();
c.ext_disjoint_timer_query.beginQueryEXT(35007,f);l.push(f);D(l.length-1,l.length,b)},endQuery:function(){c.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:D,update:function(){var a,d;a=l.length;if(0!==a){q.length=Math.max(q.length,a+1);b.length=Math.max(b.length,a+1);b[0]=0;var e=q[0]=0;for(d=a=0;d<l.length;++d){var g=l[d];c.ext_disjoint_timer_query.getQueryObjectEXT(g,34919)?(e+=c.ext_disjoint_timer_query.getQueryObjectEXT(g,34918),m.push(g)):l[a++]=g;b[d+1]=e;q[d+1]=a}l.length=a;for(d=
a=0;d<k.length;++d){var e=k[d],n=e.startQueryIndex,g=e.endQueryIndex;e.sum+=b[g]-b[n];n=q[n];g=q[g];g===n?(e.stats.gpuTime+=e.sum/1E6,f.push(e)):(e.startQueryIndex=n,e.endQueryIndex=g,k[a++]=e)}k.length=a}},getNumPendingQueries:function(){return l.length},clear:function(){m.push.apply(m,l);for(var b=0;b<m.length;b++)c.ext_disjoint_timer_query.deleteQueryEXT(m[b]);l.length=0;m.length=0},restore:function(){l.length=0;m.length=0}}}},{}],21:[function(d,h,t){function a(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function c(b){b=Error("(regl) "+b);console.error(b);throw b;}function A(b,e){b||c(e)}function D(b){return b?": "+b:""}function m(b,e){switch(e){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function l(b,e,g){0>e.indexOf(b)&&c("invalid value"+
D(g)+". must be one of: "+e)}function f(b,e){for(b+="";b.length<e;)b=" "+b;return b}function k(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function b(b,e){this.number=b;this.line=e;this.errors=[]}function q(b,e,g){this.file=b;this.line=e;this.message=g}function B(){var b=Error(),b=(b.stack||b).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return e?e[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function y(){var b=Error(),b=(b.stack||b).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return e?e[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function e(e,g){var c=e.split("\n"),f=1,n=0,p={unknown:new k,0:new k};p.unknown.name=p[0].name=g||B();p.unknown.lines.push(new b(0,""));for(var q=0;q<c.length;++q){var r=c[q],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(r);if(u)switch(u[1]){case "line":if(u=/(\d+)(\s+\d+)?/.exec(u[2]))f=u[1]|0,u[2]&&(n=u[2]|0,n in p||(p[n]=new k));break;case "define":if(u=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]))p[n].name=
u[1]?a(u[2]):u[2]}p[n].lines.push(new b(f++,r))}x(p).forEach(function(b){var e=p[b];e.lines.forEach(function(b){e.index[b.number]=b})});return p}function g(b){var e=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);g?e.push(new q(g[1]|0,g[2]|0,g[3].trim())):0<b.length&&e.push(new q("unknown",0,b))}});return e}function n(b,e){e.forEach(function(e){var g=b[e.file];if(g){var c=g.index[e.line];if(c){c.errors.push(e);g.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(e)})}function p(b){b._commandRef=B()}function r(b,e){var g=y();c(b+" in command "+(e||B())+("unknown"===g?"":" called from "+g))}function u(b,e,g,c){m(b,e)||r("invalid parameter type"+D(g)+". expected "+e+", got "+typeof b,c||B())}function K(b,e){return 32820===b||32819===b||33635===b?2:34042===b?4:H[b]*e}var x=d("./sorted-object-keys"),U=d("./is-typed-array");d=d("./extend");var v="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
H={};H[5120]=H[5121]=1;H[5122]=H[5123]=H[36193]=H[33635]=H[32819]=H[32820]=2;H[5124]=H[5125]=H[5126]=H[34042]=4;h.exports=d(A,{optional:function(b){b()},raise:c,commandRaise:r,command:function(b,e,g){b||r(e,g||B())},parameter:function(b,e,g){b in e||c("unknown parameter ("+b+")"+D(g)+". possible values: "+x(e).join())},commandParameter:function(b,e,g,c){b in e||r("unknown parameter ("+b+")"+D(g)+". possible values: "+x(e).join(),c||B())},constructor:function(b){x(b).forEach(function(b){0>v.indexOf(b)&&
c('invalid regl constructor argument "'+b+'". must be one of '+v)})},type:function(b,e,g){m(b,e)||c("invalid parameter type"+D(g)+". expected "+e+", got "+typeof b)},commandType:u,isTypedArray:function(b,e){U(b)||c("invalid parameter type"+D(e)+". must be a typed array")},nni:function(b,e){0<=b&&(b|0)===b||c("invalid parameter type, ("+b+")"+D(e)+". must be a nonnegative integer")},oneOf:l,shaderError:function(b,c,a,k,p){if(!b.getShaderParameter(c,b.COMPILE_STATUS)){c=b.getShaderInfoLog(c);b=k===
b.FRAGMENT_SHADER?"fragment":"vertex";u(a,"string",b+" shader source must be a string",p);var q=e(a,p);a=g(c);n(q,a);x(q).forEach(function(b){function e(b,g){c.push(b);a.push(g||"")}var g=q[b];if(g.hasErrors){var c=[""],a=[""];e("file number "+b+": "+g.name+"\n","color:red;text-decoration:underline;font-weight:bold");g.lines.forEach(function(b){if(0<b.errors.length){e(f(b.number,4)+"|  ","background-color:yellow; font-weight:bold");e(b.line+"\n","color:red; background-color:yellow; font-weight:bold");
var g=0;b.errors.forEach(function(c){c=c.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(a){var n=a[1];c=a[2];switch(n){case "assign":n="="}g=Math.max(b.line.indexOf(n,g),0)}else g=0;e(f("| ",6));e(f("^^^",g+3)+"\n","font-weight:bold");e(f("| ",6));e(c+"\n","font-weight:bold")});e(f("| ",6)+"\n")}else e(f(b.number,4)+"|  "),e(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(c.join("")):(a[0]=c.join("%c"),console.log.apply(console,a))}});A.raise("Error compiling "+
b+" shader, "+q[0].name)}},linkError:function(b,g,c,f,a){b.getProgramParameter(g,b.LINK_STATUS)||(b=b.getProgramInfoLog(g),c=e(c,a),f='Error linking program with vertex shader, "'+e(f,a)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+b),A.raise(f))},callSite:y,saveCommandRef:p,saveDrawInfo:function(b,e,g,c){function f(b){return b?c.id(b):0}function a(b,
e){x(e).forEach(function(e){b[c.id(e)]=!0})}p(b);b._fragId=f(b["static"].frag);b._vertId=f(b["static"].vert);var n=b._uniformSet={};a(n,e["static"]);a(n,e.dynamic);e=b._attributeSet={};a(e,g["static"]);a(e,g.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,e,g){b.texture?l(b.texture._texture.internalformat,e,"unsupported texture format for attachment"):l(b.renderbuffer._renderbuffer.format,g,"unsupported renderbuffer format for attachment")},
guessCommand:B,texture2D:function(b,e,g){var c=e.width,f=e.height,a=e.channels;A(0<c&&c<=g.maxTextureSize&&0<f&&f<=g.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||A(!(c&c-1)&&!!c&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==c&&1!==f&&A(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(A(!(c&c-1)&&!!c&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),
A(e.mipmask===(c<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&A(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),A(!b.genMipmaps,"mipmap generation not supported with float textures"));var n=e.images;for(g=0;16>g;++g)if(n[g]){var k=c>>g,p=f>>g;A(e.mipmask&1<<g,"missing mipmap data");var q=n[g];A(q.width===k&&q.height===p,"invalid shape for mip images");A(q.format===e.format&&q.internalformat===
e.internalformat&&q.type===e.type,"incompatible type for mip image");!q.compressed&&q.data&&(k=Math.ceil(K(q.type,a)*k/q.unpackAlignment)*q.unpackAlignment,A(q.data.byteLength===k*p,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||A(0===(e.mipmask&1<<g),"extra mipmap data");e.compressed&&A(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,e,g,c){var f=b.width,a=b.height,n=b.channels;A(0<f&&f<=c.maxTextureSize&&
0<a&&a<=c.maxTextureSize,"invalid texture shape");A(f===a,"cube map must be square");A(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(c=0;c<g.length;++c){var k=g[c];A(k.width===f&&k.height===a,"inconsistent cube map face shape");e.genMipmaps&&(A(!k.compressed,"can not generate mipmap for compressed textures"),A(1===k.mipmask,"can not specify mipmaps and generate mipmaps"));for(var p=k.images,q=0;16>q;++q){var r=p[q];if(r){var u=f>>q,l=a>>q;A(k.mipmask&1<<q,"missing mipmap data");
A(r.width===u&&r.height===l,"invalid shape for mip images");A(r.format===b.format&&r.internalformat===b.internalformat&&r.type===b.type,"incompatible type for mip image");r.compressed||r.data&&A(r.data.byteLength===u*l*Math.max(K(r.type,n),r.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(d,h,t){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(d,h,t){function a(c){return Array.prototype.slice.call(c)}var c=d("./extend"),A=d("./compiled-fns");h.exports=function(){function d(){var b=[],k=[];return c(function(){b.push.apply(b,a(arguments))},{def:function(){var c="v"+f;f++;k.push(c);0<arguments.length&&(b.push(c,"="),b.push.apply(b,a(arguments)),b.push(";"));return c},toString:function(){return a([0<k.length?"var "+k.join(",")+";":"",a(b).join("")]).join("")}})}function m(){function b(e,g){k(e,
g,"=",f.def(e,g),";")}var f=d(),k=d(),e=f.toString,g=k.toString;return c(function(){f.apply(f,a(arguments))},{def:f.def,entry:f,exit:k,save:b,set:function(e,g,c){b(e,g);f(e,g,"=",c,";")},toString:function(){return e()+g()}})}var l=0,f=0,k={},b={};return{global:d(),link:function(b){var c="$"+l,f=!1;"object"===typeof b&&b.name&&(c=b.name.replace(/ /g,"_"),f=!0);if(c in k)return c;k[c]=b;f||l++;return c},block:d,proc:function(f,k){function l(){var b="a"+e.length;e.push(b);return b}var e=[];k=k||0;for(var g=
0;g<k;++g)l();var g=m(),n=g.toString;return b[f]=c(g,{arg:l,toString:function(){return a(["function(",e.join(),"){",n(),"}"]).join("")}})},scope:m,cond:function(){var b=a(arguments).join(""),f=m(),k=m(),e=f.toString,g=k.toString;return c(f,{then:function(){f.apply(f,a(arguments));return this},"else":function(){k.apply(k,a(arguments));return this},toString:function(){var c=g();c&&(c="else{"+c+"}");return a(["if(",b,"){",e(),"}",c]).join("")}})},compile:function(){var b=[],c=[];Object.keys(k).sort(function(b,
e){var c="$"===b.charAt(0),f="$"===e.charAt(0);return c||f?c&&f?+b.slice(1)<+e.slice(1)?-1:1:c&&!f?-1:1:b.localeCompare(e)}).forEach(function(e){var f=k[e];b.push(e);c.push(f)});for(var f=0,e=b.length-1;-1<e;e--)if("$"===b[e].charAt(0)){f=e;break}f=b.slice(f).join();e=A[f];if(!e)throw Error("missing precompiled function with key: "+f);return e.apply(null,c)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(d,h,t){h.exports={$0:function(a){var c,d,D,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,H,h,sa,O,
oa,z,t,I,V;c=a.attributes;d=a.current;D=a.framebuffer;m=a.gl;l=a.next;f=a.vao;k=l.blend_color;b=d.blend_color;q=l.blend_equation;B=d.blend_equation;y=l.blend_func;e=d.blend_func;g=l.colorMask;n=d.colorMask;p=l.depth_range;r=d.depth_range;u=l.polygonOffset_offset;K=d.polygonOffset_offset;x=l.sample_coverage;U=d.sample_coverage;v=l.scissor_box;H=d.scissor_box;h=l.stencil_func;sa=d.stencil_func;O=l.stencil_opBack;oa=d.stencil_opBack;z=l.stencil_opFront;t=d.stencil_opFront;I=l.viewport;V=d.viewport;return{poll:function(){var c,
f,a,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da;d.dirty=!1;f=l.blend_enable;a=l.cull_enable;ka=l.depth_enable;ma=l.dither;Sa=l.polygonOffset_enable;Db=l.sample_alpha;ea=l.sample_enable;Oa=l.scissor_enable;W=l.stencil_enable;Q=l.cull_face;M=d.cull_face;T=l.depth_func;pa=d.depth_func;R=l.depth_mask;Hb=d.depth_mask;ab=l.frontFace;S=d.frontFace;C=l.lineWidth;na=d.lineWidth;da=l.stencil_mask;Da=d.stencil_mask;c=D.next;c!==D.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null),
D.cur=c);f!==d.blend_enable&&(f?m.enable(3042):m.disable(3042),d.blend_enable=f);a!==d.cull_enable&&(a?m.enable(2884):m.disable(2884),d.cull_enable=a);ka!==d.depth_enable&&(ka?m.enable(2929):m.disable(2929),d.depth_enable=ka);ma!==d.dither&&(ma?m.enable(3024):m.disable(3024),d.dither=ma);Sa!==d.polygonOffset_enable&&(Sa?m.enable(32823):m.disable(32823),d.polygonOffset_enable=Sa);Db!==d.sample_alpha&&(Db?m.enable(32926):m.disable(32926),d.sample_alpha=Db);ea!==d.sample_enable&&(ea?m.enable(32928):
m.disable(32928),d.sample_enable=ea);Oa!==d.scissor_enable&&(Oa?m.enable(3089):m.disable(3089),d.scissor_enable=Oa);W!==d.stencil_enable&&(W?m.enable(2960):m.disable(2960),d.stencil_enable=W);if(k[0]!==b[0]||k[1]!==b[1]||k[2]!==b[2]||k[3]!==b[3])m.blendColor(k[0],k[1],k[2],k[3]),b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3];if(q[0]!==B[0]||q[1]!==B[1])m.blendEquationSeparate(q[0],q[1]),B[0]=q[0],B[1]=q[1];if(y[0]!==e[0]||y[1]!==e[1]||y[2]!==e[2]||y[3]!==e[3])m.blendFuncSeparate(y[0],y[1],y[2],y[3]),e[0]=
y[0],e[1]=y[1],e[2]=y[2],e[3]=y[3];if(g[0]!==n[0]||g[1]!==n[1]||g[2]!==n[2]||g[3]!==n[3])m.colorMask(g[0],g[1],g[2],g[3]),n[0]=g[0],n[1]=g[1],n[2]=g[2],n[3]=g[3];Q!==M&&(m.cullFace(Q),d.cull_face=Q);T!==pa&&(m.depthFunc(T),d.depth_func=T);R!==Hb&&(m.depthMask(R),d.depth_mask=R);if(p[0]!==r[0]||p[1]!==r[1])m.depthRange(p[0],p[1]),r[0]=p[0],r[1]=p[1];ab!==S&&(m.frontFace(ab),d.frontFace=ab);C!==na&&(m.lineWidth(C),d.lineWidth=C);if(u[0]!==K[0]||u[1]!==K[1])m.polygonOffset(u[0],u[1]),K[0]=u[0],K[1]=
u[1];if(x[0]!==U[0]||x[1]!==U[1])m.sampleCoverage(x[0],x[1]),U[0]=x[0],U[1]=x[1];if(v[0]!==H[0]||v[1]!==H[1]||v[2]!==H[2]||v[3]!==H[3])m.scissor(v[0],v[1],v[2],v[3]),H[0]=v[0],H[1]=v[1],H[2]=v[2],H[3]=v[3];if(h[0]!==sa[0]||h[1]!==sa[1]||h[2]!==sa[2])m.stencilFunc(h[0],h[1],h[2]),sa[0]=h[0],sa[1]=h[1],sa[2]=h[2];da!==Da&&(m.stencilMask(da),d.stencil_mask=da);if(O[0]!==oa[0]||O[1]!==oa[1]||O[2]!==oa[2]||O[3]!==oa[3])m.stencilOpSeparate(O[0],O[1],O[2],O[3]),oa[0]=O[0],oa[1]=O[1],oa[2]=O[2],oa[3]=O[3];
if(z[0]!==t[0]||z[1]!==t[1]||z[2]!==t[2]||z[3]!==t[3])m.stencilOpSeparate(z[0],z[1],z[2],z[3]),t[0]=z[0],t[1]=z[1],t[2]=z[2],t[3]=z[3];if(I[0]!==V[0]||I[1]!==V[1]||I[2]!==V[2]||I[3]!==V[3])m.viewport(I[0],I[1],I[2],I[3]),V[0]=I[0],V[1]=I[1],V[2]=I[2],V[3]=I[3]},refresh:function(){var a,ja,Z,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb;d.dirty=!1;ja=l.blend_enable;Z=l.cull_enable;ka=l.depth_enable;ma=l.dither;Sa=l.polygonOffset_enable;Db=l.sample_alpha;ea=l.sample_enable;Oa=l.scissor_enable;W=l.stencil_enable;
Q=l.cull_face;M=l.depth_func;T=l.depth_mask;pa=l.frontFace;R=l.lineWidth;Hb=l.stencil_mask;(a=D.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);D.cur=a;a=c[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=c[1];a.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(1,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=c[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=c[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,
a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=c[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=c[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(5),
m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=c[6];a.buffer?(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=c[7];a.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,a.x,a.y,a.z,
a.w),a.buffer=null);a=c[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=c[9];a.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=c[10];a.buffer?
(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=c[11];a.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=c[12];a.buffer?(m.enableVertexAttribArray(12),
m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=c[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=c[14];a.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,a.buffer.buffer),
m.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=c[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);f.currentVAO=null;f.setVAO(f.targetVAO);ja?m.enable(3042):m.disable(3042);d.blend_enable=ja;Z?m.enable(2884):
m.disable(2884);d.cull_enable=Z;ka?m.enable(2929):m.disable(2929);d.depth_enable=ka;ma?m.enable(3024):m.disable(3024);d.dither=ma;Sa?m.enable(32823):m.disable(32823);d.polygonOffset_enable=Sa;Db?m.enable(32926):m.disable(32926);d.sample_alpha=Db;ea?m.enable(32928):m.disable(32928);d.sample_enable=ea;Oa?m.enable(3089):m.disable(3089);d.scissor_enable=Oa;W?m.enable(2960):m.disable(2960);d.stencil_enable=W;m.blendColor(k[0],k[1],k[2],k[3]);b[0]=k[0];b[1]=k[1];b[2]=k[2];b[3]=k[3];m.blendEquationSeparate(q[0],
q[1]);B[0]=q[0];B[1]=q[1];m.blendFuncSeparate(y[0],y[1],y[2],y[3]);e[0]=y[0];e[1]=y[1];e[2]=y[2];e[3]=y[3];m.colorMask(g[0],g[1],g[2],g[3]);n[0]=g[0];n[1]=g[1];n[2]=g[2];n[3]=g[3];m.cullFace(Q);d.cull_face=Q;m.depthFunc(M);d.depth_func=M;m.depthMask(T);d.depth_mask=T;m.depthRange(p[0],p[1]);r[0]=p[0];r[1]=p[1];m.frontFace(pa);d.frontFace=pa;m.lineWidth(R);d.lineWidth=R;m.polygonOffset(u[0],u[1]);K[0]=u[0];K[1]=u[1];m.sampleCoverage(x[0],x[1]);U[0]=x[0];U[1]=x[1];m.scissor(v[0],v[1],v[2],v[3]);H[0]=
v[0];H[1]=v[1];H[2]=v[2];H[3]=v[3];m.stencilFunc(h[0],h[1],h[2]);sa[0]=h[0];sa[1]=h[1];sa[2]=h[2];m.stencilMask(Hb);d.stencil_mask=Hb;m.stencilOpSeparate(O[0],O[1],O[2],O[3]);oa[0]=O[0];oa[1]=O[1];oa[2]=O[2];oa[3]=O[3];m.stencilOpSeparate(z[0],z[1],z[2],z[3]);t[0]=z[0];t[1]=z[1];t[2]=z[2];t[3]=z[3];m.viewport(I[0],I[1],I[2],I[3]);V[0]=I[0];V[1]=I[1];V[2]=I[2];V[3]=I[3]}}},$3:function(a,c,d,D){var m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,h,la,sa,O,t,z,ba,I,V,J,ja,Z,ka,ma,Sa;m=a.context;l=a.current;f=a.framebuffer;
k=a.gl;b=a.next;q=a.shader;B=a.vao;y=b.blend_color;e=l.blend_color;g=b.blend_equation;n=l.blend_equation;p=b.blend_func;r=l.blend_func;u=b.colorMask;K=l.colorMask;x=b.depth_range;U=l.depth_range;v=b.polygonOffset_offset;h=l.polygonOffset_offset;la=b.sample_coverage;sa=l.sample_coverage;O=b.scissor_box;t=l.scissor_box;z=b.stencil_func;ba=l.stencil_func;I=b.stencil_opBack;V=l.stencil_opBack;J=b.stencil_opFront;ja=l.stencil_opFront;Z=b.viewport;ka=l.viewport;ma={};Sa={};return{batch:function(a,d){var m,
A,Q,M,T;m=f.next;m!==f.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),f.cur=m);if(l.dirty){m=b.dither;m!==l.dither&&(m?k.enable(3024):k.disable(3024),l.dither=m);m=b.blend_enable;m!==l.blend_enable&&(m?k.enable(3042):k.disable(3042),l.blend_enable=m);m=y[0];Q=y[1];M=y[2];T=y[3];if(m!==e[0]||Q!==e[1]||M!==e[2]||T!==e[3])k.blendColor(m,Q,M,T),e[0]=m,e[1]=Q,e[2]=M,e[3]=T;m=g[0];Q=g[1];if(m!==n[0]||Q!==n[1])k.blendEquationSeparate(m,Q),n[0]=m,n[1]=Q;m=p[0];Q=p[1];M=p[2];
T=p[3];if(m!==r[0]||Q!==r[1]||M!==r[2]||T!==r[3])k.blendFuncSeparate(m,Q,M,T),r[0]=m,r[1]=Q,r[2]=M,r[3]=T;m=b.depth_enable;m!==l.depth_enable&&(m?k.enable(2929):k.disable(2929),l.depth_enable=m);m=b.depth_func;m!==l.depth_func&&(k.depthFunc(m),l.depth_func=m);m=x[0];Q=x[1];if(m!==U[0]||Q!==U[1])k.depthRange(m,Q),U[0]=m,U[1]=Q;m=b.depth_mask;m!==l.depth_mask&&(k.depthMask(m),l.depth_mask=m);m=u[0];Q=u[1];M=u[2];T=u[3];if(m!==K[0]||Q!==K[1]||M!==K[2]||T!==K[3])k.colorMask(m,Q,M,T),K[0]=m,K[1]=Q,K[2]=
M,K[3]=T;m=b.cull_enable;m!==l.cull_enable&&(m?k.enable(2884):k.disable(2884),l.cull_enable=m);m=b.cull_face;m!==l.cull_face&&(k.cullFace(m),l.cull_face=m);m=b.frontFace;m!==l.frontFace&&(k.frontFace(m),l.frontFace=m);m=b.lineWidth;m!==l.lineWidth&&(k.lineWidth(m),l.lineWidth=m);m=b.polygonOffset_enable;m!==l.polygonOffset_enable&&(m?k.enable(32823):k.disable(32823),l.polygonOffset_enable=m);m=v[0];Q=v[1];if(m!==h[0]||Q!==h[1])k.polygonOffset(m,Q),h[0]=m,h[1]=Q;m=b.sample_alpha;m!==l.sample_alpha&&
(m?k.enable(32926):k.disable(32926),l.sample_alpha=m);m=b.sample_enable;m!==l.sample_enable&&(m?k.enable(32928):k.disable(32928),l.sample_enable=m);m=la[0];Q=la[1];if(m!==sa[0]||Q!==sa[1])k.sampleCoverage(m,Q),sa[0]=m,sa[1]=Q;m=b.stencil_enable;m!==l.stencil_enable&&(m?k.enable(2960):k.disable(2960),l.stencil_enable=m);m=b.stencil_mask;m!==l.stencil_mask&&(k.stencilMask(m),l.stencil_mask=m);m=z[0];Q=z[1];M=z[2];if(m!==ba[0]||Q!==ba[1]||M!==ba[2])k.stencilFunc(m,Q,M),ba[0]=m,ba[1]=Q,ba[2]=M;m=J[0];
Q=J[1];M=J[2];T=J[3];if(m!==ja[0]||Q!==ja[1]||M!==ja[2]||T!==ja[3])k.stencilOpSeparate(m,Q,M,T),ja[0]=m,ja[1]=Q,ja[2]=M,ja[3]=T;m=I[0];Q=I[1];M=I[2];T=I[3];if(m!==V[0]||Q!==V[1]||M!==V[2]||T!==V[3])k.stencilOpSeparate(m,Q,M,T),V[0]=m,V[1]=Q,V[2]=M,V[3]=T;m=b.scissor_enable;m!==l.scissor_enable&&(m?k.enable(3089):k.disable(3089),l.scissor_enable=m);m=O[0];Q=O[1];M=O[2];T=O[3];if(m!==t[0]||Q!==t[1]||M!==t[2]||T!==t[3])k.scissor(m,Q,M,T),t[0]=m,t[1]=Q,t[2]=M,t[3]=T;m=Z[0];Q=Z[1];M=Z[2];T=Z[3];if(m!==
ka[0]||Q!==ka[1]||M!==ka[2]||T!==ka[3])k.viewport(m,Q,M,T),ka[0]=m,ka[1]=Q,ka[2]=M,ka[3]=T;l.dirty=!1}if(m=l.profile)A=performance.now(),c.count+=d;Q=q.program(q.vert,q.frag);k.useProgram(Q.program);B.setVAO(null);M=Q.id;(T=Sa[M])||(T=Sa[M]=D(Q));T.call(this,a,d);B.setVAO(null);m&&(c.cpuTime+=performance.now()-A)},draw:function(a){var m,D,W,Q,M;m=f.next;m!==f.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),f.cur=m);if(l.dirty){m=b.dither;m!==l.dither&&(m?k.enable(3024):
k.disable(3024),l.dither=m);m=b.blend_enable;m!==l.blend_enable&&(m?k.enable(3042):k.disable(3042),l.blend_enable=m);m=y[0];W=y[1];Q=y[2];M=y[3];if(m!==e[0]||W!==e[1]||Q!==e[2]||M!==e[3])k.blendColor(m,W,Q,M),e[0]=m,e[1]=W,e[2]=Q,e[3]=M;m=g[0];W=g[1];if(m!==n[0]||W!==n[1])k.blendEquationSeparate(m,W),n[0]=m,n[1]=W;m=p[0];W=p[1];Q=p[2];M=p[3];if(m!==r[0]||W!==r[1]||Q!==r[2]||M!==r[3])k.blendFuncSeparate(m,W,Q,M),r[0]=m,r[1]=W,r[2]=Q,r[3]=M;m=b.depth_enable;m!==l.depth_enable&&(m?k.enable(2929):k.disable(2929),
l.depth_enable=m);m=b.depth_func;m!==l.depth_func&&(k.depthFunc(m),l.depth_func=m);m=x[0];W=x[1];if(m!==U[0]||W!==U[1])k.depthRange(m,W),U[0]=m,U[1]=W;m=b.depth_mask;m!==l.depth_mask&&(k.depthMask(m),l.depth_mask=m);m=u[0];W=u[1];Q=u[2];M=u[3];if(m!==K[0]||W!==K[1]||Q!==K[2]||M!==K[3])k.colorMask(m,W,Q,M),K[0]=m,K[1]=W,K[2]=Q,K[3]=M;m=b.cull_enable;m!==l.cull_enable&&(m?k.enable(2884):k.disable(2884),l.cull_enable=m);m=b.cull_face;m!==l.cull_face&&(k.cullFace(m),l.cull_face=m);m=b.frontFace;m!==l.frontFace&&
(k.frontFace(m),l.frontFace=m);m=b.lineWidth;m!==l.lineWidth&&(k.lineWidth(m),l.lineWidth=m);m=b.polygonOffset_enable;m!==l.polygonOffset_enable&&(m?k.enable(32823):k.disable(32823),l.polygonOffset_enable=m);m=v[0];W=v[1];if(m!==h[0]||W!==h[1])k.polygonOffset(m,W),h[0]=m,h[1]=W;m=b.sample_alpha;m!==l.sample_alpha&&(m?k.enable(32926):k.disable(32926),l.sample_alpha=m);m=b.sample_enable;m!==l.sample_enable&&(m?k.enable(32928):k.disable(32928),l.sample_enable=m);m=la[0];W=la[1];if(m!==sa[0]||W!==sa[1])k.sampleCoverage(m,
W),sa[0]=m,sa[1]=W;m=b.stencil_enable;m!==l.stencil_enable&&(m?k.enable(2960):k.disable(2960),l.stencil_enable=m);m=b.stencil_mask;m!==l.stencil_mask&&(k.stencilMask(m),l.stencil_mask=m);m=z[0];W=z[1];Q=z[2];if(m!==ba[0]||W!==ba[1]||Q!==ba[2])k.stencilFunc(m,W,Q),ba[0]=m,ba[1]=W,ba[2]=Q;m=J[0];W=J[1];Q=J[2];M=J[3];if(m!==ja[0]||W!==ja[1]||Q!==ja[2]||M!==ja[3])k.stencilOpSeparate(m,W,Q,M),ja[0]=m,ja[1]=W,ja[2]=Q,ja[3]=M;m=I[0];W=I[1];Q=I[2];M=I[3];if(m!==V[0]||W!==V[1]||Q!==V[2]||M!==V[3])k.stencilOpSeparate(m,
W,Q,M),V[0]=m,V[1]=W,V[2]=Q,V[3]=M;m=b.scissor_enable;m!==l.scissor_enable&&(m?k.enable(3089):k.disable(3089),l.scissor_enable=m);m=O[0];W=O[1];Q=O[2];M=O[3];if(m!==t[0]||W!==t[1]||Q!==t[2]||M!==t[3])k.scissor(m,W,Q,M),t[0]=m,t[1]=W,t[2]=Q,t[3]=M;m=Z[0];W=Z[1];Q=Z[2];M=Z[3];if(m!==ka[0]||W!==ka[1]||Q!==ka[2]||M!==ka[3])k.viewport(m,W,Q,M),ka[0]=m,ka[1]=W,ka[2]=Q,ka[3]=M;l.dirty=!1}if(m=l.profile)D=performance.now(),c.count++;W=q.program(q.vert,q.frag);k.useProgram(W.program);B.setVAO(null);Q=W.id;
(M=ma[Q])||(M=ma[Q]=d(W));M.call(this,a);B.setVAO(null);m&&(c.cpuTime+=performance.now()-D)},scope:function(b,e,g){var a,f;if(a=l.profile)f=performance.now(),c.count++;e(m,b,g);a&&(c.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
c,d,D,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,h,la,sa,O,t,z,ba,I,V,J,ja,Z,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra,cc,qc,ic,td,zc,aa,P,ha,Ha,ub,Pc,Vc,L,F,ia,ua,Y,fa,ta){var N,G,ca,za,Aa,Ka,E,nc,Fb,qa,Gb,zb,Ye,xd,he,ee,we,ue,Od,ge,ve,yd,Cd,Gd,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb,hd,Ib,oc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb;N=a.attributes;G=a.context;ca=a.current;za=a.draw;Aa=a.elements;Ka=a.framebuffer;E=a.gl;nc=a.next;Fb=
a.shader;qa=a.uniforms;Gb=a.vao;zb=nc.blend_color;Ye=ca.blend_color;xd=nc.blend_equation;he=ca.blend_equation;ee=nc.blend_func;we=ca.blend_func;ue=nc.colorMask;Od=ca.colorMask;ge=nc.depth_range;ve=ca.depth_range;yd=nc.polygonOffset_offset;Cd=ca.polygonOffset_offset;Gd=nc.sample_coverage;zd=ca.sample_coverage;xe=nc.scissor_box;Me=ca.scissor_box;Qe=nc.stencil_func;Ad=ca.stencil_func;Be=nc.stencil_opBack;Vd=ca.stencil_opBack;Wd=nc.stencil_opFront;ae=ca.stencil_opFront;Yd=nc.viewport;qd=ca.viewport;nd=
{};vd={};bd=new Float32Array(16);sd=new Float32Array(16);Tc=new Float32Array(16);Dd=new Float32Array(16);Nc=new Float32Array(16);Ic=new Float32Array(16);rc=new Float32Array(16);gb=new Float32Array(16);hd=new Float32Array(16);Ib=new Float32Array(16);oc=new Float32Array(16);Xa=new Float32Array(16);Qc=new Float32Array(16);ac=new Float32Array(16);lc=new Float32Array(16);Id=new Float32Array(16);rd=new Float32Array(16);Fc=new Float32Array(16);dc=new Float32Array(16);Cc=new Float32Array(16);Yc=new Float32Array(16);
Zb=new Float32Array(16);Gc=new Float32Array(16);Ya=new Float32Array(16);Ea=new Float32Array(16);ud=new Float32Array(16);Jb=new Float32Array(16);Ua=new Float32Array(16);Vb=new Float32Array(16);cb=new Float32Array(16);Dc=new Float32Array(16);Xb=new Float32Array(16);return{batch:function(c,a){var d,x,v,h;d=Ka.next;d!==Ka.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),Ka.cur=d);if(ca.dirty){var A,U,H,z,la,ja,t,sa,I,O,qa,J,oa,V,ba,Z,ka,gb,Ba,Fb,Xa,zb,Ib,Ta,ac;A=ue[0];U=ue[1];
H=ue[2];z=ue[3];if(A!==Od[0]||U!==Od[1]||H!==Od[2]||z!==Od[3])E.colorMask(A,U,H,z),Od[0]=A,Od[1]=U,Od[2]=H,Od[3]=z;la=nc.frontFace;la!==ca.frontFace&&(E.frontFace(la),ca.frontFace=la);ja=nc.polygonOffset_enable;ja!==ca.polygonOffset_enable&&(ja?E.enable(32823):E.disable(32823),ca.polygonOffset_enable=ja);t=yd[0];sa=yd[1];if(t!==Cd[0]||sa!==Cd[1])E.polygonOffset(t,sa),Cd[0]=t,Cd[1]=sa;I=nc.sample_alpha;I!==ca.sample_alpha&&(I?E.enable(32926):E.disable(32926),ca.sample_alpha=I);O=nc.sample_enable;O!==
ca.sample_enable&&(O?E.enable(32928):E.disable(32928),ca.sample_enable=O);qa=Gd[0];J=Gd[1];if(qa!==zd[0]||J!==zd[1])E.sampleCoverage(qa,J),zd[0]=qa,zd[1]=J;oa=nc.stencil_enable;oa!==ca.stencil_enable&&(oa?E.enable(2960):E.disable(2960),ca.stencil_enable=oa);V=nc.stencil_mask;V!==ca.stencil_mask&&(E.stencilMask(V),ca.stencil_mask=V);ba=Qe[0];Z=Qe[1];ka=Qe[2];if(ba!==Ad[0]||Z!==Ad[1]||ka!==Ad[2])E.stencilFunc(ba,Z,ka),Ad[0]=ba,Ad[1]=Z,Ad[2]=ka;gb=Wd[0];Ba=Wd[1];Fb=Wd[2];Xa=Wd[3];if(gb!==ae[0]||Ba!==
ae[1]||Fb!==ae[2]||Xa!==ae[3])E.stencilOpSeparate(gb,Ba,Fb,Xa),ae[0]=gb,ae[1]=Ba,ae[2]=Fb,ae[3]=Xa;zb=Be[0];Ib=Be[1];Ta=Be[2];ac=Be[3];if(zb!==Vd[0]||Ib!==Vd[1]||Ta!==Vd[2]||ac!==Vd[3])E.stencilOpSeparate(zb,Ib,Ta,ac),Vd[0]=zb,Vd[1]=Ib,Vd[2]=Ta,Vd[3]=ac}E.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;E.disable(3042);ca.blend_enable=!1;E.blendEquationSeparate(32774,32774);he[0]=32774;he[1]=32774;E.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;E.enable(2884);ca.cull_enable=
!0;E.cullFace(1029);ca.cull_face=1029;E.enable(2929);ca.depth_enable=!0;E.depthFunc(513);ca.depth_func=513;E.depthMask(!0);ca.depth_mask=!0;E.depthRange(0,1);ve[0]=0;ve[1]=1;E.disable(3024);ca.dither=!1;E.lineWidth(2);ca.lineWidth=2;E.enable(3089);ca.scissor_enable=!0;x=ca.profile;ca.profile=!1;E.useProgram(Db.program);var Ic,Nc,rc,wa,xe,Ma,Tc,fb,ib,xa,Qc,Fa,rb,sb,Za,$a,hd,lc,sd,Wa,Nb,oc,Ia,bd,Ra,Ca,lb,wb,Cb,tb,Dd,xb,ma;Gb.setVAO(null);Ic=cc.location;Nc=N[Ic];Nc.buffer||E.enableVertexAttribArray(Ic);
if(Nc.type!==D.dtype||4!==Nc.size||Nc.buffer!==D||!1!==Nc.normalized||0!==Nc.offset||0!==Nc.stride)E.bindBuffer(34962,D.buffer),E.vertexAttribPointer(Ic,4,D.dtype,!1,0,0),Nc.type=D.dtype,Nc.size=4,Nc.buffer=D,Nc.normalized=!1,Nc.offset=0,Nc.stride=0;rc=qc.location;wa=N[rc];wa.buffer||E.enableVertexAttribArray(rc);if(wa.type!==m.dtype||4!==wa.size||wa.buffer!==m||!1!==wa.normalized||0!==wa.offset||0!==wa.stride)E.bindBuffer(34962,m.buffer),E.vertexAttribPointer(rc,4,m.dtype,!1,0,0),wa.type=m.dtype,
wa.size=4,wa.buffer=m,wa.normalized=!1,wa.offset=0,wa.stride=0;xe=ic.location;Ma=N[xe];Ma.buffer||E.enableVertexAttribArray(xe);if(Ma.type!==l.dtype||4!==Ma.size||Ma.buffer!==l||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(xe,4,l.dtype,!1,0,0),Ma.type=l.dtype,Ma.size=4,Ma.buffer=l,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;Tc=td.location;fb=N[Tc];fb.buffer||E.enableVertexAttribArray(Tc);if(fb.type!==f.dtype||4!==fb.size||fb.buffer!==f||!1!==fb.normalized||
0!==fb.offset||0!==fb.stride)E.bindBuffer(34962,f.buffer),E.vertexAttribPointer(Tc,4,f.dtype,!1,0,0),fb.type=f.dtype,fb.size=4,fb.buffer=f,fb.normalized=!1,fb.offset=0,fb.stride=0;ib=zc.location;xa=N[ib];xa.buffer||E.enableVertexAttribArray(ib);if(xa.type!==k.dtype||4!==xa.size||xa.buffer!==k||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(ib,4,k.dtype,!1,0,0),xa.type=k.dtype,xa.size=4,xa.buffer=k,xa.normalized=!1,xa.offset=0,xa.stride=0;Qc=aa.location;
Fa=N[Qc];Fa.buffer||E.enableVertexAttribArray(Qc);if(Fa.type!==b.dtype||4!==Fa.size||Fa.buffer!==b||!1!==Fa.normalized||0!==Fa.offset||0!==Fa.stride)E.bindBuffer(34962,b.buffer),E.vertexAttribPointer(Qc,4,b.dtype,!1,0,0),Fa.type=b.dtype,Fa.size=4,Fa.buffer=b,Fa.normalized=!1,Fa.offset=0,Fa.stride=0;rb=P.location;sb=N[rb];sb.buffer||E.enableVertexAttribArray(rb);if(sb.type!==q.dtype||4!==sb.size||sb.buffer!==q||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)E.bindBuffer(34962,q.buffer),E.vertexAttribPointer(rb,
4,q.dtype,!1,0,0),sb.type=q.dtype,sb.size=4,sb.buffer=q,sb.normalized=!1,sb.offset=0,sb.stride=0;Za=ha.location;$a=N[Za];$a.buffer||E.enableVertexAttribArray(Za);if($a.type!==B.dtype||4!==$a.size||$a.buffer!==B||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)E.bindBuffer(34962,B.buffer),E.vertexAttribPointer(Za,4,B.dtype,!1,0,0),$a.type=B.dtype,$a.size=4,$a.buffer=B,$a.normalized=!1,$a.offset=0,$a.stride=0;hd=Ha.location;lc=N[hd];lc.buffer||E.enableVertexAttribArray(hd);if(lc.type!==y.dtype||4!==
lc.size||lc.buffer!==y||!1!==lc.normalized||0!==lc.offset||0!==lc.stride)E.bindBuffer(34962,y.buffer),E.vertexAttribPointer(hd,4,y.dtype,!1,0,0),lc.type=y.dtype,lc.size=4,lc.buffer=y,lc.normalized=!1,lc.offset=0,lc.stride=0;sd=ub.location;Wa=N[sd];Wa.buffer||E.enableVertexAttribArray(sd);if(Wa.type!==e.dtype||4!==Wa.size||Wa.buffer!==e||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)E.bindBuffer(34962,e.buffer),E.vertexAttribPointer(sd,4,e.dtype,!1,0,0),Wa.type=e.dtype,Wa.size=4,Wa.buffer=e,Wa.normalized=
!1,Wa.offset=0,Wa.stride=0;Nb=Pc.location;oc=N[Nb];oc.buffer||E.enableVertexAttribArray(Nb);if(oc.type!==g.dtype||4!==oc.size||oc.buffer!==g||!1!==oc.normalized||0!==oc.offset||0!==oc.stride)E.bindBuffer(34962,g.buffer),E.vertexAttribPointer(Nb,4,g.dtype,!1,0,0),oc.type=g.dtype,oc.size=4,oc.buffer=g,oc.normalized=!1,oc.offset=0,oc.stride=0;Ia=Vc.location;bd=N[Ia];bd.buffer||E.enableVertexAttribArray(Ia);if(bd.type!==n.dtype||4!==bd.size||bd.buffer!==n||!1!==bd.normalized||0!==bd.offset||0!==bd.stride)E.bindBuffer(34962,
n.buffer),E.vertexAttribPointer(Ia,4,n.dtype,!1,0,0),bd.type=n.dtype,bd.size=4,bd.buffer=n,bd.normalized=!1,bd.offset=0,bd.stride=0;Ra=L.location;Ca=N[Ra];Ca.buffer||E.enableVertexAttribArray(Ra);if(Ca.type!==p.dtype||4!==Ca.size||Ca.buffer!==p||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)E.bindBuffer(34962,p.buffer),E.vertexAttribPointer(Ra,4,p.dtype,!1,0,0),Ca.type=p.dtype,Ca.size=4,Ca.buffer=p,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;lb=F.location;wb=N[lb];wb.buffer||E.enableVertexAttribArray(lb);
if(wb.type!==r.dtype||4!==wb.size||wb.buffer!==r||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)E.bindBuffer(34962,r.buffer),E.vertexAttribPointer(lb,4,r.dtype,!1,0,0),wb.type=r.dtype,wb.size=4,wb.buffer=r,wb.normalized=!1,wb.offset=0,wb.stride=0;Cb=ia.location;tb=N[Cb];tb.buffer||E.enableVertexAttribArray(Cb);if(tb.type!==u.dtype||4!==tb.size||tb.buffer!==u||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)E.bindBuffer(34962,u.buffer),E.vertexAttribPointer(Cb,4,u.dtype,!1,0,0),tb.type=u.dtype,
tb.size=4,tb.buffer=u,tb.normalized=!1,tb.offset=0,tb.stride=0;Dd=Oa.location;xb=N[Dd];xb.buffer||E.enableVertexAttribArray(Dd);if(xb.type!==K.dtype||4!==xb.size||xb.buffer!==K||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)E.bindBuffer(34962,K.buffer),E.vertexAttribPointer(Dd,4,K.dtype,!1,0,0),xb.type=K.dtype,xb.size=4,xb.buffer=K,xb.normalized=!1,xb.offset=0,xb.stride=0;E.uniform1i(ua.location,ea.bind());(ma=za.elements)?E.bindBuffer(34963,ma.buffer.buffer):Gb.currentVAO&&(ma=Aa.getElements(Gb.currentVAO.elements))&&
E.bindBuffer(34963,ma.buffer.buffer);for(v=0;v<a;++v){h=c[v];var ee,ge,Yd,Id,Sa,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,xd,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be;nd.height=h.viewportHeight;nd.width=h.viewportWidth;nd.x=h.viewportX;nd.y=h.viewportY;ee=nd.x|0;ge=nd.y|0;Yd="width"in nd?nd.width|0:G.framebufferWidth-ee;Id="height"in nd?nd.height|0:G.framebufferHeight-ge;Sa=G.viewportWidth;G.viewportWidth=Yd;Wb=G.viewportHeight;
G.viewportHeight=Id;E.viewport(ee,ge,Yd,Id);qd[0]=ee;qd[1]=ge;qd[2]=Yd;qd[3]=Id;vd.height=h.scissorHeight;vd.width=h.scissorWidth;vd.x=h.scissorX;vd.y=h.scissorY;bc=vd.x|0;Qb=vd.y|0;Ja="width"in vd?vd.width|0:G.framebufferWidth-bc;$b="height"in vd?vd.height|0:G.framebufferHeight-Qb;E.scissor(bc,Qb,Ja,$b);Me[0]=bc;Me[1]=Qb;Me[2]=Ja;Me[3]=$b;mb=h.dim0A;E.uniformMatrix4fv(Q.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(rd[0]=mb[0],rd[1]=mb[1],rd[2]=mb[2],rd[3]=mb[3],rd[4]=mb[4],rd[5]=
mb[5],rd[6]=mb[6],rd[7]=mb[7],rd[8]=mb[8],rd[9]=mb[9],rd[10]=mb[10],rd[11]=mb[11],rd[12]=mb[12],rd[13]=mb[13],rd[14]=mb[14],rd[15]=mb[15],rd));yb=h.dim1A;E.uniformMatrix4fv(R.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(Fc[0]=yb[0],Fc[1]=yb[1],Fc[2]=yb[2],Fc[3]=yb[3],Fc[4]=yb[4],Fc[5]=yb[5],Fc[6]=yb[6],Fc[7]=yb[7],Fc[8]=yb[8],Fc[9]=yb[9],Fc[10]=yb[10],Fc[11]=yb[11],Fc[12]=yb[12],Fc[13]=yb[13],Fc[14]=yb[14],Fc[15]=yb[15],Fc));Ob=h.dim0B;E.uniformMatrix4fv(M.location,!1,Array.isArray(Ob)||
Ob instanceof Float32Array?Ob:(dc[0]=Ob[0],dc[1]=Ob[1],dc[2]=Ob[2],dc[3]=Ob[3],dc[4]=Ob[4],dc[5]=Ob[5],dc[6]=Ob[6],dc[7]=Ob[7],dc[8]=Ob[8],dc[9]=Ob[9],dc[10]=Ob[10],dc[11]=Ob[11],dc[12]=Ob[12],dc[13]=Ob[13],dc[14]=Ob[14],dc[15]=Ob[15],dc));Rb=h.dim1B;E.uniformMatrix4fv(Hb.location,!1,Array.isArray(Rb)||Rb instanceof Float32Array?Rb:(Cc[0]=Rb[0],Cc[1]=Rb[1],Cc[2]=Rb[2],Cc[3]=Rb[3],Cc[4]=Rb[4],Cc[5]=Rb[5],Cc[6]=Rb[6],Cc[7]=Rb[7],Cc[8]=Rb[8],Cc[9]=Rb[9],Cc[10]=Rb[10],Cc[11]=Rb[11],Cc[12]=Rb[12],Cc[13]=
Rb[13],Cc[14]=Rb[14],Cc[15]=Rb[15],Cc));fc=h.dim0C;E.uniformMatrix4fv(T.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(Yc[0]=fc[0],Yc[1]=fc[1],Yc[2]=fc[2],Yc[3]=fc[3],Yc[4]=fc[4],Yc[5]=fc[5],Yc[6]=fc[6],Yc[7]=fc[7],Yc[8]=fc[8],Yc[9]=fc[9],Yc[10]=fc[10],Yc[11]=fc[11],Yc[12]=fc[12],Yc[13]=fc[13],Yc[14]=fc[14],Yc[15]=fc[15],Yc));hc=h.dim1C;E.uniformMatrix4fv(ab.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Zb[0]=hc[0],Zb[1]=hc[1],Zb[2]=hc[2],Zb[3]=hc[3],Zb[4]=hc[4],Zb[5]=
hc[5],Zb[6]=hc[6],Zb[7]=hc[7],Zb[8]=hc[8],Zb[9]=hc[9],Zb[10]=hc[10],Zb[11]=hc[11],Zb[12]=hc[12],Zb[13]=hc[13],Zb[14]=hc[14],Zb[15]=hc[15],Zb));xd=h.dim0D;E.uniformMatrix4fv(pa.location,!1,Array.isArray(xd)||xd instanceof Float32Array?xd:(Gc[0]=xd[0],Gc[1]=xd[1],Gc[2]=xd[2],Gc[3]=xd[3],Gc[4]=xd[4],Gc[5]=xd[5],Gc[6]=xd[6],Gc[7]=xd[7],Gc[8]=xd[8],Gc[9]=xd[9],Gc[10]=xd[10],Gc[11]=xd[11],Gc[12]=xd[12],Gc[13]=xd[13],Gc[14]=xd[14],Gc[15]=xd[15],Gc));xc=h.dim1D;E.uniformMatrix4fv(S.location,!1,Array.isArray(xc)||
xc instanceof Float32Array?xc:(Ya[0]=xc[0],Ya[1]=xc[1],Ya[2]=xc[2],Ya[3]=xc[3],Ya[4]=xc[4],Ya[5]=xc[5],Ya[6]=xc[6],Ya[7]=xc[7],Ya[8]=xc[8],Ya[9]=xc[9],Ya[10]=xc[10],Ya[11]=xc[11],Ya[12]=xc[12],Ya[13]=xc[13],Ya[14]=xc[14],Ya[15]=xc[15],Ya));yc=h.loA;E.uniformMatrix4fv(nb.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(Ea[0]=yc[0],Ea[1]=yc[1],Ea[2]=yc[2],Ea[3]=yc[3],Ea[4]=yc[4],Ea[5]=yc[5],Ea[6]=yc[6],Ea[7]=yc[7],Ea[8]=yc[8],Ea[9]=yc[9],Ea[10]=yc[10],Ea[11]=yc[11],Ea[12]=yc[12],Ea[13]=
yc[13],Ea[14]=yc[14],Ea[15]=yc[15],Ea));Ac=h.hiA;E.uniformMatrix4fv(na.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(ud[0]=Ac[0],ud[1]=Ac[1],ud[2]=Ac[2],ud[3]=Ac[3],ud[4]=Ac[4],ud[5]=Ac[5],ud[6]=Ac[6],ud[7]=Ac[7],ud[8]=Ac[8],ud[9]=Ac[9],ud[10]=Ac[10],ud[11]=Ac[11],ud[12]=Ac[12],ud[13]=Ac[13],ud[14]=Ac[14],ud[15]=Ac[15],ud));Kc=h.loB;E.uniformMatrix4fv(La.location,!1,Array.isArray(Kc)||Kc instanceof Float32Array?Kc:(Jb[0]=Kc[0],Jb[1]=Kc[1],Jb[2]=Kc[2],Jb[3]=Kc[3],Jb[4]=Kc[4],Jb[5]=
Kc[5],Jb[6]=Kc[6],Jb[7]=Kc[7],Jb[8]=Kc[8],Jb[9]=Kc[9],Jb[10]=Kc[10],Jb[11]=Kc[11],Jb[12]=Kc[12],Jb[13]=Kc[13],Jb[14]=Kc[14],Jb[15]=Kc[15],Jb));ad=h.hiB;E.uniformMatrix4fv(da.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(Ua[0]=ad[0],Ua[1]=ad[1],Ua[2]=ad[2],Ua[3]=ad[3],Ua[4]=ad[4],Ua[5]=ad[5],Ua[6]=ad[6],Ua[7]=ad[7],Ua[8]=ad[8],Ua[9]=ad[9],Ua[10]=ad[10],Ua[11]=ad[11],Ua[12]=ad[12],Ua[13]=ad[13],Ua[14]=ad[14],Ua[15]=ad[15],Ua));Rc=h.loC;E.uniformMatrix4fv(X.location,!1,Array.isArray(Rc)||
Rc instanceof Float32Array?Rc:(Vb[0]=Rc[0],Vb[1]=Rc[1],Vb[2]=Rc[2],Vb[3]=Rc[3],Vb[4]=Rc[4],Vb[5]=Rc[5],Vb[6]=Rc[6],Vb[7]=Rc[7],Vb[8]=Rc[8],Vb[9]=Rc[9],Vb[10]=Rc[10],Vb[11]=Rc[11],Vb[12]=Rc[12],Vb[13]=Rc[13],Vb[14]=Rc[14],Vb[15]=Rc[15],Vb));Lc=h.hiC;E.uniformMatrix4fv(Da.location,!1,Array.isArray(Lc)||Lc instanceof Float32Array?Lc:(cb[0]=Lc[0],cb[1]=Lc[1],cb[2]=Lc[2],cb[3]=Lc[3],cb[4]=Lc[4],cb[5]=Lc[5],cb[6]=Lc[6],cb[7]=Lc[7],cb[8]=Lc[8],cb[9]=Lc[9],cb[10]=Lc[10],cb[11]=Lc[11],cb[12]=Lc[12],cb[13]=
Lc[13],cb[14]=Lc[14],cb[15]=Lc[15],cb));Lb=h.loD;E.uniformMatrix4fv(ob.location,!1,Array.isArray(Lb)||Lb instanceof Float32Array?Lb:(Dc[0]=Lb[0],Dc[1]=Lb[1],Dc[2]=Lb[2],Dc[3]=Lb[3],Dc[4]=Lb[4],Dc[5]=Lb[5],Dc[6]=Lb[6],Dc[7]=Lb[7],Dc[8]=Lb[8],Dc[9]=Lb[9],Dc[10]=Lb[10],Dc[11]=Lb[11],Dc[12]=Lb[12],Dc[13]=Lb[13],Dc[14]=Lb[14],Dc[15]=Lb[15],Dc));Eb=h.hiD;E.uniformMatrix4fv(Ga.location,!1,Array.isArray(Eb)||Eb instanceof Float32Array?Eb:(Xb[0]=Eb[0],Xb[1]=Eb[1],Xb[2]=Eb[2],Xb[3]=Eb[3],Xb[4]=Eb[4],Xb[5]=
Eb[5],Xb[6]=Eb[6],Xb[7]=Eb[7],Xb[8]=Eb[8],Xb[9]=Eb[9],Xb[10]=Eb[10],Xb[11]=Eb[11],Xb[12]=Eb[12],Xb[13]=Eb[13],Xb[14]=Eb[14],Xb[15]=Eb[15],Xb));Mc=h.resolution;Ec=Mc[0];gc=Mc[1];v&&Sc===Ec&&Wc===gc||(Sc=Ec,Wc=gc,E.uniform2f(Y.location,Ec,gc));gd=h.viewBoxPos;kd=gd[0];Xc=gd[1];v&&md===kd&&bf===Xc||(md=kd,bf=Xc,E.uniform2f(fa.location,kd,Xc));Zd=h.viewBoxSize;ke=Zd[0];me=Zd[1];v&&se===ke&&Md===me||(se=ke,Md=me,E.uniform2f(ta.location,ke,me));Kd=h.maskHeight;v&&id===Kd||(id=Kd,E.uniform1f(ga.location,
Kd));Bc=h.drwLayer;v&&od===Bc||(od=Bc,E.uniform1f(C.location,Bc));ld=h.contextColor;cd=ld[0];Fd=ld[1];te=ld[2];Ae=ld[3];v&&pd===cd&&Hd===Fd&&ze===te&&ne===Ae||(pd=cd,Hd=Fd,ze=te,ne=Ae,E.uniform4f(W.location,cd,Fd,te,Ae));(fe=h.maskTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);de=fe._texture;E.uniform1i(ra.location,de.bind());pe=h.offset;if(be=h.count)ma?E.drawElements(1,be,ma.type,pe<<(ma.type-5121>>1)):E.drawArrays(1,pe,be),G.viewportWidth=Sa,G.viewportHeight=Wb,de.unbind()}ea.unbind();
ca.dirty=!0;Gb.setVAO(null);ca.profile=x},draw:function(c){var a,v,w,h,U,H;a=Ka.next;a!==Ka.cur&&(a?E.bindFramebuffer(36160,a.framebuffer):E.bindFramebuffer(36160,null),Ka.cur=a);if(ca.dirty){a=ue[0];H=ue[1];v=ue[2];w=ue[3];if(a!==Od[0]||H!==Od[1]||v!==Od[2]||w!==Od[3])E.colorMask(a,H,v,w),Od[0]=a,Od[1]=H,Od[2]=v,Od[3]=w;a=nc.frontFace;a!==ca.frontFace&&(E.frontFace(a),ca.frontFace=a);a=nc.polygonOffset_enable;a!==ca.polygonOffset_enable&&(a?E.enable(32823):E.disable(32823),ca.polygonOffset_enable=
a);a=yd[0];H=yd[1];if(a!==Cd[0]||H!==Cd[1])E.polygonOffset(a,H),Cd[0]=a,Cd[1]=H;a=nc.sample_alpha;a!==ca.sample_alpha&&(a?E.enable(32926):E.disable(32926),ca.sample_alpha=a);a=nc.sample_enable;a!==ca.sample_enable&&(a?E.enable(32928):E.disable(32928),ca.sample_enable=a);a=Gd[0];H=Gd[1];if(a!==zd[0]||H!==zd[1])E.sampleCoverage(a,H),zd[0]=a,zd[1]=H;a=nc.stencil_enable;a!==ca.stencil_enable&&(a?E.enable(2960):E.disable(2960),ca.stencil_enable=a);a=nc.stencil_mask;a!==ca.stencil_mask&&(E.stencilMask(a),
ca.stencil_mask=a);a=Qe[0];H=Qe[1];v=Qe[2];if(a!==Ad[0]||H!==Ad[1]||v!==Ad[2])E.stencilFunc(a,H,v),Ad[0]=a,Ad[1]=H,Ad[2]=v;a=Wd[0];H=Wd[1];v=Wd[2];w=Wd[3];if(a!==ae[0]||H!==ae[1]||v!==ae[2]||w!==ae[3])E.stencilOpSeparate(a,H,v,w),ae[0]=a,ae[1]=H,ae[2]=v,ae[3]=w;a=Be[0];H=Be[1];v=Be[2];w=Be[3];if(a!==Vd[0]||H!==Vd[1]||v!==Vd[2]||w!==Vd[3])E.stencilOpSeparate(a,H,v,w),Vd[0]=a,Vd[1]=H,Vd[2]=v,Vd[3]=w}nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;v=nd.x|0;w=nd.y|
0;h="width"in nd?nd.width|0:G.framebufferWidth-v;U="height"in nd?nd.height|0:G.framebufferHeight-w;a=G.viewportWidth;G.viewportWidth=h;H=G.viewportHeight;G.viewportHeight=U;E.viewport(v,w,h,U);qd[0]=v;qd[1]=w;qd[2]=h;qd[3]=U;E.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;E.disable(3042);ca.blend_enable=!1;E.blendEquationSeparate(32774,32774);he[0]=32774;he[1]=32774;E.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;E.enable(2884);ca.cull_enable=!0;E.cullFace(1029);ca.cull_face=
1029;E.enable(2929);ca.depth_enable=!0;E.depthFunc(513);ca.depth_func=513;E.depthMask(!0);ca.depth_mask=!0;E.depthRange(0,1);ve[0]=0;ve[1]=1;E.disable(3024);ca.dither=!1;E.lineWidth(2);ca.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;v=vd.x|0;w=vd.y|0;h="width"in vd?vd.width|0:G.framebufferWidth-v;U="height"in vd?vd.height|0:G.framebufferHeight-w;E.scissor(v,w,h,U);Me[0]=v;Me[1]=w;Me[2]=h;Me[3]=U;E.enable(3089);ca.scissor_enable=!0;v=ca.profile;ca.profile=
!1;E.useProgram(d.program);Gb.setVAO(null);w=cc.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==D.dtype||4!==h.size||h.buffer!==D||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,D.buffer),E.vertexAttribPointer(w,4,D.dtype,!1,0,0),h.type=D.dtype,h.size=4,h.buffer=D,h.normalized=!1,h.offset=0,h.stride=0;w=qc.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==m.dtype||4!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,
m.buffer),E.vertexAttribPointer(w,4,m.dtype,!1,0,0),h.type=m.dtype,h.size=4,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;w=ic.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==l.dtype||4!==h.size||h.buffer!==l||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(w,4,l.dtype,!1,0,0),h.type=l.dtype,h.size=4,h.buffer=l,h.normalized=!1,h.offset=0,h.stride=0;w=td.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==f.dtype||
4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,f.buffer),E.vertexAttribPointer(w,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;w=zc.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(w,4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,h.normalized=!1,h.offset=0,
h.stride=0;w=aa.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==b.dtype||4!==h.size||h.buffer!==b||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,b.buffer),E.vertexAttribPointer(w,4,b.dtype,!1,0,0),h.type=b.dtype,h.size=4,h.buffer=b,h.normalized=!1,h.offset=0,h.stride=0;w=P.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==q.dtype||4!==h.size||h.buffer!==q||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,q.buffer),E.vertexAttribPointer(w,
4,q.dtype,!1,0,0),h.type=q.dtype,h.size=4,h.buffer=q,h.normalized=!1,h.offset=0,h.stride=0;w=ha.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==B.dtype||4!==h.size||h.buffer!==B||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,B.buffer),E.vertexAttribPointer(w,4,B.dtype,!1,0,0),h.type=B.dtype,h.size=4,h.buffer=B,h.normalized=!1,h.offset=0,h.stride=0;w=Ha.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==y.dtype||4!==h.size||h.buffer!==y||!1!==h.normalized||
0!==h.offset||0!==h.stride)E.bindBuffer(34962,y.buffer),E.vertexAttribPointer(w,4,y.dtype,!1,0,0),h.type=y.dtype,h.size=4,h.buffer=y,h.normalized=!1,h.offset=0,h.stride=0;w=ub.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==e.dtype||4!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,e.buffer),E.vertexAttribPointer(w,4,e.dtype,!1,0,0),h.type=e.dtype,h.size=4,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;w=Pc.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);
if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,g.buffer),E.vertexAttribPointer(w,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;w=Vc.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,n.buffer),E.vertexAttribPointer(w,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,h.normalized=
!1,h.offset=0,h.stride=0;w=L.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==p.dtype||4!==h.size||h.buffer!==p||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,p.buffer),E.vertexAttribPointer(w,4,p.dtype,!1,0,0),h.type=p.dtype,h.size=4,h.buffer=p,h.normalized=!1,h.offset=0,h.stride=0;w=F.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==r.dtype||4!==h.size||h.buffer!==r||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,r.buffer),
E.vertexAttribPointer(w,4,r.dtype,!1,0,0),h.type=r.dtype,h.size=4,h.buffer=r,h.normalized=!1,h.offset=0,h.stride=0;w=ia.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,u.buffer),E.vertexAttribPointer(w,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;w=Oa.location;h=N[w];h.buffer||E.enableVertexAttribArray(w);if(h.type!==K.dtype||4!==h.size||
h.buffer!==K||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,K.buffer),E.vertexAttribPointer(w,4,K.dtype,!1,0,0),h.type=K.dtype,h.size=4,h.buffer=K,h.normalized=!1,h.offset=0,h.stride=0;w=c.dim0A;E.uniformMatrix4fv(Q.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(bd[0]=w[0],bd[1]=w[1],bd[2]=w[2],bd[3]=w[3],bd[4]=w[4],bd[5]=w[5],bd[6]=w[6],bd[7]=w[7],bd[8]=w[8],bd[9]=w[9],bd[10]=w[10],bd[11]=w[11],bd[12]=w[12],bd[13]=w[13],bd[14]=w[14],bd[15]=w[15],bd));w=c.dim1A;E.uniformMatrix4fv(R.location,
!1,Array.isArray(w)||w instanceof Float32Array?w:(sd[0]=w[0],sd[1]=w[1],sd[2]=w[2],sd[3]=w[3],sd[4]=w[4],sd[5]=w[5],sd[6]=w[6],sd[7]=w[7],sd[8]=w[8],sd[9]=w[9],sd[10]=w[10],sd[11]=w[11],sd[12]=w[12],sd[13]=w[13],sd[14]=w[14],sd[15]=w[15],sd));w=c.dim0B;E.uniformMatrix4fv(M.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Tc[0]=w[0],Tc[1]=w[1],Tc[2]=w[2],Tc[3]=w[3],Tc[4]=w[4],Tc[5]=w[5],Tc[6]=w[6],Tc[7]=w[7],Tc[8]=w[8],Tc[9]=w[9],Tc[10]=w[10],Tc[11]=w[11],Tc[12]=w[12],Tc[13]=w[13],Tc[14]=
w[14],Tc[15]=w[15],Tc));w=c.dim1B;E.uniformMatrix4fv(Hb.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Dd[0]=w[0],Dd[1]=w[1],Dd[2]=w[2],Dd[3]=w[3],Dd[4]=w[4],Dd[5]=w[5],Dd[6]=w[6],Dd[7]=w[7],Dd[8]=w[8],Dd[9]=w[9],Dd[10]=w[10],Dd[11]=w[11],Dd[12]=w[12],Dd[13]=w[13],Dd[14]=w[14],Dd[15]=w[15],Dd));w=c.dim0C;E.uniformMatrix4fv(T.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Nc[0]=w[0],Nc[1]=w[1],Nc[2]=w[2],Nc[3]=w[3],Nc[4]=w[4],Nc[5]=w[5],Nc[6]=w[6],Nc[7]=w[7],Nc[8]=w[8],Nc[9]=
w[9],Nc[10]=w[10],Nc[11]=w[11],Nc[12]=w[12],Nc[13]=w[13],Nc[14]=w[14],Nc[15]=w[15],Nc));w=c.dim1C;E.uniformMatrix4fv(ab.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Ic[0]=w[0],Ic[1]=w[1],Ic[2]=w[2],Ic[3]=w[3],Ic[4]=w[4],Ic[5]=w[5],Ic[6]=w[6],Ic[7]=w[7],Ic[8]=w[8],Ic[9]=w[9],Ic[10]=w[10],Ic[11]=w[11],Ic[12]=w[12],Ic[13]=w[13],Ic[14]=w[14],Ic[15]=w[15],Ic));w=c.dim0D;E.uniformMatrix4fv(pa.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(rc[0]=w[0],rc[1]=w[1],rc[2]=w[2],rc[3]=
w[3],rc[4]=w[4],rc[5]=w[5],rc[6]=w[6],rc[7]=w[7],rc[8]=w[8],rc[9]=w[9],rc[10]=w[10],rc[11]=w[11],rc[12]=w[12],rc[13]=w[13],rc[14]=w[14],rc[15]=w[15],rc));w=c.dim1D;E.uniformMatrix4fv(S.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(gb[0]=w[0],gb[1]=w[1],gb[2]=w[2],gb[3]=w[3],gb[4]=w[4],gb[5]=w[5],gb[6]=w[6],gb[7]=w[7],gb[8]=w[8],gb[9]=w[9],gb[10]=w[10],gb[11]=w[11],gb[12]=w[12],gb[13]=w[13],gb[14]=w[14],gb[15]=w[15],gb));w=c.loA;E.uniformMatrix4fv(nb.location,!1,Array.isArray(w)||w instanceof
Float32Array?w:(hd[0]=w[0],hd[1]=w[1],hd[2]=w[2],hd[3]=w[3],hd[4]=w[4],hd[5]=w[5],hd[6]=w[6],hd[7]=w[7],hd[8]=w[8],hd[9]=w[9],hd[10]=w[10],hd[11]=w[11],hd[12]=w[12],hd[13]=w[13],hd[14]=w[14],hd[15]=w[15],hd));w=c.hiA;E.uniformMatrix4fv(na.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Ib[0]=w[0],Ib[1]=w[1],Ib[2]=w[2],Ib[3]=w[3],Ib[4]=w[4],Ib[5]=w[5],Ib[6]=w[6],Ib[7]=w[7],Ib[8]=w[8],Ib[9]=w[9],Ib[10]=w[10],Ib[11]=w[11],Ib[12]=w[12],Ib[13]=w[13],Ib[14]=w[14],Ib[15]=w[15],Ib));w=c.loB;E.uniformMatrix4fv(La.location,
!1,Array.isArray(w)||w instanceof Float32Array?w:(oc[0]=w[0],oc[1]=w[1],oc[2]=w[2],oc[3]=w[3],oc[4]=w[4],oc[5]=w[5],oc[6]=w[6],oc[7]=w[7],oc[8]=w[8],oc[9]=w[9],oc[10]=w[10],oc[11]=w[11],oc[12]=w[12],oc[13]=w[13],oc[14]=w[14],oc[15]=w[15],oc));w=c.hiB;E.uniformMatrix4fv(da.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Xa[0]=w[0],Xa[1]=w[1],Xa[2]=w[2],Xa[3]=w[3],Xa[4]=w[4],Xa[5]=w[5],Xa[6]=w[6],Xa[7]=w[7],Xa[8]=w[8],Xa[9]=w[9],Xa[10]=w[10],Xa[11]=w[11],Xa[12]=w[12],Xa[13]=w[13],Xa[14]=
w[14],Xa[15]=w[15],Xa));w=c.loC;E.uniformMatrix4fv(X.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Qc[0]=w[0],Qc[1]=w[1],Qc[2]=w[2],Qc[3]=w[3],Qc[4]=w[4],Qc[5]=w[5],Qc[6]=w[6],Qc[7]=w[7],Qc[8]=w[8],Qc[9]=w[9],Qc[10]=w[10],Qc[11]=w[11],Qc[12]=w[12],Qc[13]=w[13],Qc[14]=w[14],Qc[15]=w[15],Qc));w=c.hiC;E.uniformMatrix4fv(Da.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(ac[0]=w[0],ac[1]=w[1],ac[2]=w[2],ac[3]=w[3],ac[4]=w[4],ac[5]=w[5],ac[6]=w[6],ac[7]=w[7],ac[8]=w[8],ac[9]=w[9],
ac[10]=w[10],ac[11]=w[11],ac[12]=w[12],ac[13]=w[13],ac[14]=w[14],ac[15]=w[15],ac));w=c.loD;E.uniformMatrix4fv(ob.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(lc[0]=w[0],lc[1]=w[1],lc[2]=w[2],lc[3]=w[3],lc[4]=w[4],lc[5]=w[5],lc[6]=w[6],lc[7]=w[7],lc[8]=w[8],lc[9]=w[9],lc[10]=w[10],lc[11]=w[11],lc[12]=w[12],lc[13]=w[13],lc[14]=w[14],lc[15]=w[15],lc));w=c.hiD;E.uniformMatrix4fv(Ga.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Id[0]=w[0],Id[1]=w[1],Id[2]=w[2],Id[3]=w[3],Id[4]=
w[4],Id[5]=w[5],Id[6]=w[6],Id[7]=w[7],Id[8]=w[8],Id[9]=w[9],Id[10]=w[10],Id[11]=w[11],Id[12]=w[12],Id[13]=w[13],Id[14]=w[14],Id[15]=w[15],Id));w=c.resolution;E.uniform2f(Y.location,w[0],w[1]);w=c.viewBoxPos;E.uniform2f(fa.location,w[0],w[1]);w=c.viewBoxSize;E.uniform2f(ta.location,w[0],w[1]);E.uniform1f(ga.location,c.maskHeight);E.uniform1f(C.location,c.drwLayer);w=c.contextColor;E.uniform4f(W.location,w[0],w[1],w[2],w[3]);(w=c.maskTexture)&&"framebuffer"===w._reglType&&(w=w.color[0]);w=w._texture;
E.uniform1i(ra.location,w.bind());E.uniform1i(ua.location,x.bind());(h=za.elements)?E.bindBuffer(34963,h.buffer.buffer):Gb.currentVAO&&(h=Aa.getElements(Gb.currentVAO.elements))&&E.bindBuffer(34963,h.buffer.buffer);U=c.offset;if(c=c.count)h?E.drawElements(1,c,h.type,U<<(h.type-5121>>1)):E.drawArrays(1,U,c),ca.dirty=!0,Gb.setVAO(null),G.viewportWidth=a,G.viewportHeight=H,ca.profile=v,w.unbind(),x.unbind()},scope:function(c,a,d){var x,A,E,C,F,P,N,L,aa,M,Q,R,T,S,X,Y,fa,ha,W,ia,da,ga,na,Aa,ua,Ea,qc,gb,
Ka,ta,Xa,wa,Ha,ea,Zb,zd,Ib,xa,Nc,Fa,Gb,Ya,Wd,ac,Cc,Ic,pa,dc,Ua,Gc,Ia,rc,Ra,Ca,lc,Yc,td,ra,Jb,cb,Tc,oc,Ad,Vd,bd,Qc,hd,Fc,Vb,Ja,ub,mb,yb,qd,sd,ae,Pc,Xb,Dd,zc,ud,Dc,Od,Da,rd,Lb,Eb,Ye,he,yd,Me,Be,Ga,Id,cc,Oa,Qe,ab,ic,Gd,ue,ob,Cd,we,Bc,Hb,ve,La,Vc,nb,Db,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,
Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;x=nd.x|0;A=nd.y|0;E="width"in nd?nd.width|0:G.framebufferWidth-x;C="height"in nd?nd.height|0:G.framebufferHeight-A;F=G.viewportWidth;G.viewportWidth=
E;P=G.viewportHeight;G.viewportHeight=C;N=Yd[0];Yd[0]=x;L=Yd[1];Yd[1]=A;aa=Yd[2];Yd[2]=E;M=Yd[3];Yd[3]=C;Q=zb[0];zb[0]=0;R=zb[1];zb[1]=0;T=zb[2];zb[2]=0;S=zb[3];zb[3]=0;X=nc.blend_enable;nc.blend_enable=!1;Y=xd[0];xd[0]=32774;fa=xd[1];xd[1]=32774;ha=ee[0];ee[0]=770;W=ee[1];ee[1]=771;ia=ee[2];ee[2]=1;da=ee[3];ee[3]=1;ga=nc.cull_enable;nc.cull_enable=!0;na=nc.cull_face;nc.cull_face=1029;Aa=nc.depth_enable;nc.depth_enable=!0;ua=nc.depth_func;nc.depth_func=513;Ea=nc.depth_mask;nc.depth_mask=!0;qc=ge[0];
ge[0]=0;gb=ge[1];ge[1]=1;Ka=nc.dither;nc.dither=!1;ta=nc.lineWidth;nc.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;Xa=vd.x|0;wa=vd.y|0;Ha="width"in vd?vd.width|0:G.framebufferWidth-Xa;ea="height"in vd?vd.height|0:G.framebufferHeight-wa;Zb=xe[0];xe[0]=Xa;zd=xe[1];xe[1]=wa;Ib=xe[2];xe[2]=Ha;xa=xe[3];xe[3]=ea;Nc=nc.scissor_enable;nc.scissor_enable=!0;Fa=ca.profile;ca.profile=!1;Gb=c.offset;Ya=za.offset;za.offset=Gb;Wd=c.count;ac=za.count;za.count=Wd;Cc=
za.primitive;za.primitive=1;Ic=c.contextColor;pa=qa[24];qa[24]=Ic;dc=c.dim0A;Ua=qa[3];qa[3]=dc;Gc=c.dim0B;Ia=qa[5];qa[5]=Gc;rc=c.dim0C;Ra=qa[7];qa[7]=rc;Ca=c.dim0D;lc=qa[9];qa[9]=Ca;Yc=c.dim1A;td=qa[4];qa[4]=Yc;ra=c.dim1B;Jb=qa[6];qa[6]=ra;cb=c.dim1C;Tc=qa[8];qa[8]=cb;oc=c.dim1D;Ad=qa[10];qa[10]=oc;Vd=c.drwLayer;bd=qa[23];qa[23]=Vd;Qc=c.hiA;hd=qa[12];qa[12]=Qc;Fc=c.hiB;Vb=qa[14];qa[14]=Fc;Ja=c.hiC;ub=qa[16];qa[16]=Ja;mb=c.hiD;yb=qa[18];qa[18]=mb;qd=c.loA;sd=qa[11];qa[11]=qd;ae=c.loB;Pc=qa[13];qa[13]=
ae;Xb=c.loC;Dd=qa[15];qa[15]=Xb;zc=c.loD;ud=qa[17];qa[17]=zc;Dc=c.maskHeight;Od=qa[22];qa[22]=Dc;Da=c.maskTexture;rd=qa[25];qa[25]=Da;Lb=qa[26];qa[26]=U;Eb=c.resolution;Ye=qa[19];qa[19]=Eb;he=c.viewBoxPos;yd=qa[20];qa[20]=he;Me=c.viewBoxSize;Be=qa[21];qa[21]=Me;Ga=v.buffer;v.buffer=K;Id=v.divisor;v.divisor=0;cc=v.normalized;v.normalized=!1;Oa=v.offset;v.offset=0;Qe=v.size;v.size=0;ab=v.state;v.state=1;ic=v.stride;v.stride=0;Gd=v.type;v.type=K.dtype;ue=v.w;v.w=0;ob=v.x;v.x=0;Cd=v.y;v.y=0;we=v.z;v.z=
0;Bc=h.buffer;h.buffer=D;Hb=h.divisor;h.divisor=0;ve=h.normalized;h.normalized=!1;La=h.offset;h.offset=0;Vc=h.size;h.size=0;nb=h.state;h.state=1;Db=h.stride;h.stride=0;te=h.type;h.type=D.dtype;ze=h.w;h.w=0;Ae=h.x;h.x=0;ne=h.y;h.y=0;fe=h.z;h.z=0;de=la.buffer;la.buffer=m;pe=la.divisor;la.divisor=0;be=la.normalized;la.normalized=!1;ie=la.offset;la.offset=0;wc=la.size;la.size=0;Uc=la.state;la.state=1;qe=la.stride;la.stride=0;le=la.type;la.type=m.dtype;Ld=la.w;la.w=0;Pd=la.x;la.x=0;Qd=la.y;la.y=0;Rd=la.z;
la.z=0;je=sa.buffer;sa.buffer=l;vf=sa.divisor;sa.divisor=0;Ce=sa.normalized;sa.normalized=!1;oe=sa.offset;sa.offset=0;Re=sa.size;sa.size=0;Se=sa.state;sa.state=1;Ne=sa.stride;sa.stride=0;re=sa.type;sa.type=l.dtype;Fe=sa.w;sa.w=0;He=sa.x;sa.x=0;Ie=sa.y;sa.y=0;Je=sa.z;sa.z=0;Ge=O.buffer;O.buffer=f;Nd=O.divisor;O.divisor=0;Ud=O.normalized;O.normalized=!1;$d=O.offset;O.offset=0;ce=O.size;O.size=0;Ke=O.state;O.state=1;Bd=O.stride;O.stride=0;Sd=O.type;O.type=f.dtype;De=O.w;O.w=0;Le=O.x;O.x=0;cf=O.y;O.y=
0;af=O.z;O.z=0;Te=t.buffer;t.buffer=k;Oe=t.divisor;t.divisor=0;$e=t.normalized;t.normalized=!1;Xe=t.offset;t.offset=0;Ue=t.size;t.size=0;Ve=t.state;t.state=1;Td=t.stride;t.stride=0;Xd=t.type;t.type=k.dtype;We=t.w;t.w=0;jf=t.x;t.x=0;nf=t.y;t.y=0;ff=t.z;t.z=0;kf=z.buffer;z.buffer=b;lf=z.divisor;z.divisor=0;mf=z.normalized;z.normalized=!1;rf=z.offset;z.offset=0;of=z.size;z.size=0;sf=z.state;z.state=1;Cf=z.stride;z.stride=0;Df=z.type;z.type=b.dtype;Pe=z.w;z.w=0;Ee=z.x;z.x=0;pf=z.y;z.y=0;qf=z.z;z.z=0;
Ef=ba.buffer;ba.buffer=q;Hf=ba.divisor;ba.divisor=0;Bf=ba.normalized;ba.normalized=!1;Ff=ba.offset;ba.offset=0;Gf=ba.size;ba.size=0;xf=ba.state;ba.state=1;yf=ba.stride;ba.stride=0;wf=ba.type;ba.type=q.dtype;zf=ba.w;ba.w=0;Af=ba.x;ba.x=0;Jf=ba.y;ba.y=0;Kf=ba.z;ba.z=0;Lf=I.buffer;I.buffer=B;Mf=I.divisor;I.divisor=0;tf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;If=I.size;I.size=0;uf=I.state;I.state=1;dg=I.stride;I.stride=0;Sf=I.type;I.type=B.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;gf=I.y;I.y=0;df=I.z;
I.z=0;Nf=V.buffer;V.buffer=y;Of=V.divisor;V.divisor=0;eg=V.normalized;V.normalized=!1;fg=V.offset;V.offset=0;gg=V.size;V.size=0;hg=V.state;V.state=1;ig=V.stride;V.stride=0;Wf=V.type;V.type=y.dtype;Uf=V.w;V.w=0;Xf=V.x;V.x=0;Yf=V.y;V.y=0;Zf=V.z;V.z=0;jg=J.buffer;J.buffer=e;rg=J.divisor;J.divisor=0;sg=J.normalized;J.normalized=!1;tg=J.offset;J.offset=0;ug=J.size;J.size=0;vg=J.state;J.state=1;wg=J.stride;J.stride=0;xg=J.type;J.type=e.dtype;yg=J.w;J.w=0;zg=J.x;J.x=0;Ag=J.y;J.y=0;Bg=J.z;J.z=0;hf=ja.buffer;
ja.buffer=g;ef=ja.divisor;ja.divisor=0;Pf=ja.normalized;ja.normalized=!1;Qf=ja.offset;ja.offset=0;kg=ja.size;ja.size=0;lg=ja.state;ja.state=1;mg=ja.stride;ja.stride=0;ng=ja.type;ja.type=g.dtype;og=ja.w;ja.w=0;$f=ja.x;ja.x=0;Vf=ja.y;ja.y=0;ag=ja.z;ja.z=0;bg=Z.buffer;Z.buffer=n;cg=Z.divisor;Z.divisor=0;pg=Z.normalized;Z.normalized=!1;Cg=Z.offset;Z.offset=0;Dg=Z.size;Z.size=0;Eg=Z.state;Z.state=1;Fg=Z.stride;Z.stride=0;Gg=Z.type;Z.type=n.dtype;Hg=Z.w;Z.w=0;Ig=Z.x;Z.x=0;Jg=Z.y;Z.y=0;Kg=Z.z;Z.z=0;Lg=ka.buffer;
ka.buffer=p;Mg=ka.divisor;ka.divisor=0;Ng=ka.normalized;ka.normalized=!1;Og=ka.offset;ka.offset=0;Pg=ka.size;ka.size=0;Qg=ka.state;ka.state=1;Rg=ka.stride;ka.stride=0;Sg=ka.type;ka.type=p.dtype;Tg=ka.w;ka.w=0;Ug=ka.x;ka.x=0;Vg=ka.y;ka.y=0;Wg=ka.z;ka.z=0;Xg=ma.buffer;ma.buffer=r;Yg=ma.divisor;ma.divisor=0;Zg=ma.normalized;ma.normalized=!1;$g=ma.offset;ma.offset=0;ah=ma.size;ma.size=0;bh=ma.state;ma.state=1;ch=ma.stride;ma.stride=0;dh=ma.type;ma.type=r.dtype;eh=ma.w;ma.w=0;fh=ma.x;ma.x=0;gh=ma.y;ma.y=
0;hh=ma.z;ma.z=0;ih=Sa.buffer;Sa.buffer=u;jh=Sa.divisor;Sa.divisor=0;kh=Sa.normalized;Sa.normalized=!1;lh=Sa.offset;Sa.offset=0;mh=Sa.size;Sa.size=0;nh=Sa.state;Sa.state=1;oh=Sa.stride;Sa.stride=0;ph=Sa.type;Sa.type=u.dtype;qh=Sa.w;Sa.w=0;rh=Sa.x;Sa.x=0;sh=Sa.y;Sa.y=0;th=Sa.z;Sa.z=0;uh=Fb.vert;Fb.vert=2;vh=Fb.frag;Fb.frag=1;ca.dirty=!0;a(G,c,d);G.viewportWidth=F;G.viewportHeight=P;Yd[0]=N;Yd[1]=L;Yd[2]=aa;Yd[3]=M;zb[0]=Q;zb[1]=R;zb[2]=T;zb[3]=S;nc.blend_enable=X;xd[0]=Y;xd[1]=fa;ee[0]=ha;ee[1]=W;
ee[2]=ia;ee[3]=da;nc.cull_enable=ga;nc.cull_face=na;nc.depth_enable=Aa;nc.depth_func=ua;nc.depth_mask=Ea;ge[0]=qc;ge[1]=gb;nc.dither=Ka;nc.lineWidth=ta;xe[0]=Zb;xe[1]=zd;xe[2]=Ib;xe[3]=xa;nc.scissor_enable=Nc;ca.profile=Fa;za.offset=Ya;za.count=ac;za.primitive=Cc;qa[24]=pa;qa[3]=Ua;qa[5]=Ia;qa[7]=Ra;qa[9]=lc;qa[4]=td;qa[6]=Jb;qa[8]=Tc;qa[10]=Ad;qa[23]=bd;qa[12]=hd;qa[14]=Vb;qa[16]=ub;qa[18]=yb;qa[11]=sd;qa[13]=Pc;qa[15]=Dd;qa[17]=ud;qa[22]=Od;qa[25]=rd;qa[26]=Lb;qa[19]=Ye;qa[20]=yd;qa[21]=Be;v.buffer=
Ga;v.divisor=Id;v.normalized=cc;v.offset=Oa;v.size=Qe;v.state=ab;v.stride=ic;v.type=Gd;v.w=ue;v.x=ob;v.y=Cd;v.z=we;h.buffer=Bc;h.divisor=Hb;h.normalized=ve;h.offset=La;h.size=Vc;h.state=nb;h.stride=Db;h.type=te;h.w=ze;h.x=Ae;h.y=ne;h.z=fe;la.buffer=de;la.divisor=pe;la.normalized=be;la.offset=ie;la.size=wc;la.state=Uc;la.stride=qe;la.type=le;la.w=Ld;la.x=Pd;la.y=Qd;la.z=Rd;sa.buffer=je;sa.divisor=vf;sa.normalized=Ce;sa.offset=oe;sa.size=Re;sa.state=Se;sa.stride=Ne;sa.type=re;sa.w=Fe;sa.x=He;sa.y=Ie;
sa.z=Je;O.buffer=Ge;O.divisor=Nd;O.normalized=Ud;O.offset=$d;O.size=ce;O.state=Ke;O.stride=Bd;O.type=Sd;O.w=De;O.x=Le;O.y=cf;O.z=af;t.buffer=Te;t.divisor=Oe;t.normalized=$e;t.offset=Xe;t.size=Ue;t.state=Ve;t.stride=Td;t.type=Xd;t.w=We;t.x=jf;t.y=nf;t.z=ff;z.buffer=kf;z.divisor=lf;z.normalized=mf;z.offset=rf;z.size=of;z.state=sf;z.stride=Cf;z.type=Df;z.w=Pe;z.x=Ee;z.y=pf;z.z=qf;ba.buffer=Ef;ba.divisor=Hf;ba.normalized=Bf;ba.offset=Ff;ba.size=Gf;ba.state=xf;ba.stride=yf;ba.type=wf;ba.w=zf;ba.x=Af;ba.y=
Jf;ba.z=Kf;I.buffer=Lf;I.divisor=Mf;I.normalized=tf;I.offset=Rf;I.size=If;I.state=uf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=gf;I.z=df;V.buffer=Nf;V.divisor=Of;V.normalized=eg;V.offset=fg;V.size=gg;V.state=hg;V.stride=ig;V.type=Wf;V.w=Uf;V.x=Xf;V.y=Yf;V.z=Zf;J.buffer=jg;J.divisor=rg;J.normalized=sg;J.offset=tg;J.size=ug;J.state=vg;J.stride=wg;J.type=xg;J.w=yg;J.x=zg;J.y=Ag;J.z=Bg;ja.buffer=hf;ja.divisor=ef;ja.normalized=Pf;ja.offset=Qf;ja.size=kg;ja.state=lg;ja.stride=mg;ja.type=ng;ja.w=og;ja.x=$f;
ja.y=Vf;ja.z=ag;Z.buffer=bg;Z.divisor=cg;Z.normalized=pg;Z.offset=Cg;Z.size=Dg;Z.state=Eg;Z.stride=Fg;Z.type=Gg;Z.w=Hg;Z.x=Ig;Z.y=Jg;Z.z=Kg;ka.buffer=Lg;ka.divisor=Mg;ka.normalized=Ng;ka.offset=Og;ka.size=Pg;ka.state=Qg;ka.stride=Rg;ka.type=Sg;ka.w=Tg;ka.x=Ug;ka.y=Vg;ka.z=Wg;ma.buffer=Xg;ma.divisor=Yg;ma.normalized=Zg;ma.offset=$g;ma.size=ah;ma.state=bh;ma.stride=ch;ma.type=dh;ma.w=eh;ma.x=fh;ma.y=gh;ma.z=hh;Sa.buffer=ih;Sa.divisor=jh;Sa.normalized=kh;Sa.offset=lh;Sa.size=mh;Sa.state=nh;Sa.stride=
oh;Sa.type=ph;Sa.w=qh;Sa.x=rh;Sa.y=sh;Sa.z=th;Fb.vert=uh;Fb.frag=vh;ca.dirty=!0}}},$1:function(a,c){var d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,H,la,t,O,oa,z,ba,I,V,J;d=a.attributes;h=a.current;m=a.framebuffer;l=a.gl;f=a.next;k=a.vao;b=f.blend_color;q=h.blend_color;B=f.blend_equation;y=h.blend_equation;e=f.blend_func;g=h.blend_func;n=f.colorMask;p=h.colorMask;r=f.depth_range;u=h.depth_range;K=f.polygonOffset_offset;x=h.polygonOffset_offset;U=f.sample_coverage;v=h.sample_coverage;H=f.scissor_box;la=
h.scissor_box;t=f.stencil_func;O=h.stencil_func;oa=f.stencil_opBack;z=h.stencil_opBack;ba=f.stencil_opFront;I=h.stencil_opFront;V=f.viewport;J=h.viewport;return{poll:function(){var c,a,k,d,A,Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga;h.dirty=!1;a=f.blend_enable;k=f.cull_enable;d=f.depth_enable;A=f.dither;Db=f.polygonOffset_enable;ea=f.sample_alpha;Oa=f.sample_enable;W=f.scissor_enable;Q=f.stencil_enable;M=f.cull_face;T=h.cull_face;pa=f.depth_func;R=h.depth_func;Hb=f.depth_mask;ab=h.depth_mask;S=
f.frontFace;C=h.frontFace;na=f.lineWidth;da=h.lineWidth;Da=f.stencil_mask;Ga=h.stencil_mask;c=m.next;c!==m.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),m.cur=c);a!==h.blend_enable&&(a?l.enable(3042):l.disable(3042),h.blend_enable=a);k!==h.cull_enable&&(k?l.enable(2884):l.disable(2884),h.cull_enable=k);d!==h.depth_enable&&(d?l.enable(2929):l.disable(2929),h.depth_enable=d);A!==h.dither&&(A?l.enable(3024):l.disable(3024),h.dither=A);Db!==h.polygonOffset_enable&&(Db?l.enable(32823):
l.disable(32823),h.polygonOffset_enable=Db);ea!==h.sample_alpha&&(ea?l.enable(32926):l.disable(32926),h.sample_alpha=ea);Oa!==h.sample_enable&&(Oa?l.enable(32928):l.disable(32928),h.sample_enable=Oa);W!==h.scissor_enable&&(W?l.enable(3089):l.disable(3089),h.scissor_enable=W);Q!==h.stencil_enable&&(Q?l.enable(2960):l.disable(2960),h.stencil_enable=Q);if(b[0]!==q[0]||b[1]!==q[1]||b[2]!==q[2]||b[3]!==q[3])l.blendColor(b[0],b[1],b[2],b[3]),q[0]=b[0],q[1]=b[1],q[2]=b[2],q[3]=b[3];if(B[0]!==y[0]||B[1]!==
y[1])l.blendEquationSeparate(B[0],B[1]),y[0]=B[0],y[1]=B[1];if(e[0]!==g[0]||e[1]!==g[1]||e[2]!==g[2]||e[3]!==g[3])l.blendFuncSeparate(e[0],e[1],e[2],e[3]),g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=e[3];if(n[0]!==p[0]||n[1]!==p[1]||n[2]!==p[2]||n[3]!==p[3])l.colorMask(n[0],n[1],n[2],n[3]),p[0]=n[0],p[1]=n[1],p[2]=n[2],p[3]=n[3];M!==T&&(l.cullFace(M),h.cull_face=M);pa!==R&&(l.depthFunc(pa),h.depth_func=pa);Hb!==ab&&(l.depthMask(Hb),h.depth_mask=Hb);if(r[0]!==u[0]||r[1]!==u[1])l.depthRange(r[0],r[1]),u[0]=
r[0],u[1]=r[1];S!==C&&(l.frontFace(S),h.frontFace=S);na!==da&&(l.lineWidth(na),h.lineWidth=na);if(K[0]!==x[0]||K[1]!==x[1])l.polygonOffset(K[0],K[1]),x[0]=K[0],x[1]=K[1];if(U[0]!==v[0]||U[1]!==v[1])l.sampleCoverage(U[0],U[1]),v[0]=U[0],v[1]=U[1];if(H[0]!==la[0]||H[1]!==la[1]||H[2]!==la[2]||H[3]!==la[3])l.scissor(H[0],H[1],H[2],H[3]),la[0]=H[0],la[1]=H[1],la[2]=H[2],la[3]=H[3];if(t[0]!==O[0]||t[1]!==O[1]||t[2]!==O[2])l.stencilFunc(t[0],t[1],t[2]),O[0]=t[0],O[1]=t[1],O[2]=t[2];Da!==Ga&&(l.stencilMask(Da),
h.stencil_mask=Da);if(oa[0]!==z[0]||oa[1]!==z[1]||oa[2]!==z[2]||oa[3]!==z[3])l.stencilOpSeparate(oa[0],oa[1],oa[2],oa[3]),z[0]=oa[0],z[1]=oa[1],z[2]=oa[2],z[3]=oa[3];if(ba[0]!==I[0]||ba[1]!==I[1]||ba[2]!==I[2]||ba[3]!==I[3])l.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]),I[0]=ba[0],I[1]=ba[1],I[2]=ba[2],I[3]=ba[3];if(V[0]!==J[0]||V[1]!==J[1]||V[2]!==J[2]||V[3]!==J[3])l.viewport(V[0],V[1],V[2],V[3]),J[0]=V[0],J[1]=V[1],J[2]=V[2],J[3]=V[3]},refresh:function(){var a,Z,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb,
ab;h.dirty=!1;Z=f.blend_enable;ka=f.cull_enable;ma=f.depth_enable;Sa=f.dither;Db=f.polygonOffset_enable;ea=f.sample_alpha;Oa=f.sample_enable;W=f.scissor_enable;Q=f.stencil_enable;M=f.cull_face;T=f.depth_func;pa=f.depth_mask;R=f.frontFace;Hb=f.lineWidth;ab=f.stencil_mask;(a=m.next)?l.bindFramebuffer(36160,a.framebuffer):l.bindFramebuffer(36160,null);m.cur=a;a=d[0];a.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,
a.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(0,a.divisor);a=d[1];a.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(1,a.divisor);a=d[2];a.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(2,
a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(2),l.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(2,a.divisor);a=d[3];a.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(3,a.divisor);a=d[4];a.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,
a.buffer.buffer),l.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(4,a.divisor);a=d[5];a.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(5,a.divisor);a=d[6];a.buffer?
(l.enableVertexAttribArray(6),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(6,a.divisor);a=d[7];a.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(7,
a.divisor);a=d[8];a.buffer?(l.enableVertexAttribArray(8),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(8,a.divisor);a=d[9];a.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);c.vertexAttribDivisorANGLE(9,a.divisor);a=d[10];a.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(10,a.divisor);a=d[11];a.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(11),
l.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(11,a.divisor);a=d[12];a.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(12,a.divisor);a=d[13];a.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(13,a.size,a.type,a.normalized,
a.stride,a.offset)):(l.disableVertexAttribArray(13),l.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(13,a.divisor);a=d[14];a.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(14,a.divisor);a=d[15];a.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,a.buffer.buffer),
l.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(15,a.divisor);k.currentVAO=null;k.setVAO(k.targetVAO);Z?l.enable(3042):l.disable(3042);h.blend_enable=Z;ka?l.enable(2884):l.disable(2884);h.cull_enable=ka;ma?l.enable(2929):l.disable(2929);h.depth_enable=ma;Sa?l.enable(3024):l.disable(3024);h.dither=Sa;Db?l.enable(32823):l.disable(32823);h.polygonOffset_enable=Db;ea?
l.enable(32926):l.disable(32926);h.sample_alpha=ea;Oa?l.enable(32928):l.disable(32928);h.sample_enable=Oa;W?l.enable(3089):l.disable(3089);h.scissor_enable=W;Q?l.enable(2960):l.disable(2960);h.stencil_enable=Q;l.blendColor(b[0],b[1],b[2],b[3]);q[0]=b[0];q[1]=b[1];q[2]=b[2];q[3]=b[3];l.blendEquationSeparate(B[0],B[1]);y[0]=B[0];y[1]=B[1];l.blendFuncSeparate(e[0],e[1],e[2],e[3]);g[0]=e[0];g[1]=e[1];g[2]=e[2];g[3]=e[3];l.colorMask(n[0],n[1],n[2],n[3]);p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];l.cullFace(M);
h.cull_face=M;l.depthFunc(T);h.depth_func=T;l.depthMask(pa);h.depth_mask=pa;l.depthRange(r[0],r[1]);u[0]=r[0];u[1]=r[1];l.frontFace(R);h.frontFace=R;l.lineWidth(Hb);h.lineWidth=Hb;l.polygonOffset(K[0],K[1]);x[0]=K[0];x[1]=K[1];l.sampleCoverage(U[0],U[1]);v[0]=U[0];v[1]=U[1];l.scissor(H[0],H[1],H[2],H[3]);la[0]=H[0];la[1]=H[1];la[2]=H[2];la[3]=H[3];l.stencilFunc(t[0],t[1],t[2]);O[0]=t[0];O[1]=t[1];O[2]=t[2];l.stencilMask(ab);h.stencil_mask=ab;l.stencilOpSeparate(oa[0],oa[1],oa[2],oa[3]);z[0]=oa[0];
z[1]=oa[1];z[2]=oa[2];z[3]=oa[3];l.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]);I[0]=ba[0];I[1]=ba[1];I[2]=ba[2];I[3]=ba[3];l.viewport(V[0],V[1],V[2],V[3]);J[0]=V[0];J[1]=V[1];J[2]=V[2];J[3]=V[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,c,d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,H,la,t,O,oa,z,ba,I,V,J,ja,Z,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab){var S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra,
cc,qc,ic,td,zc,aa,P,ha,Ha,ub,Pc,Vc,L,F,ia,ua,Y,fa,ta,N,G,ca,za,Aa,Ka,E,nc,Fb,qa,Gb,zb;S=a.attributes;C=a.buffer;na=a.context;da=a.current;Da=a.draw;Ga=a.elements;nb=a.extensions;La=a.framebuffer;X=a.gl;ob=a.isBufferArgs;ga=a.next;ra=a.shader;cc=a.uniforms;qc=a.vao;ic=ga.blend_color;td=da.blend_color;zc=ga.blend_equation;aa=da.blend_equation;P=ga.blend_func;ha=da.blend_func;Ha=ga.colorMask;ub=da.colorMask;Pc=ga.depth_range;Vc=da.depth_range;L=ga.polygonOffset_offset;F=da.polygonOffset_offset;ia=ga.sample_coverage;
ua=da.sample_coverage;Y=ga.scissor_box;fa=da.scissor_box;ta=ga.stencil_func;N=da.stencil_func;G=ga.stencil_opBack;ca=da.stencil_opBack;za=ga.stencil_opFront;Aa=da.stencil_opFront;Ka=ga.viewport;E=da.viewport;nc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Fb={};Fb.buffer=d;Fb.divisor=1;qa={};qa.buffer=h;qa.divisor=1;Gb={};Gb.buffer=m;Gb.divisor=1;zb={};zb.buffer=l;zb.divisor=1;return{batch:function(b,a){var f,n,k,p,r,q;f=La.next;f!==La.cur&&(f?X.bindFramebuffer(36160,
f.framebuffer):X.bindFramebuffer(36160,null),La.cur=f);if(da.dirty){var d,u,l,m,h,B,x,v,K,D,U,A,H,t,la,P,O,sa,oa,Y,Ka,Nc,Ic,rc,gb,ra,Ib,oc,Xa,Qc,ac,lc,zc;d=ga.dither;d!==da.dither&&(d?X.enable(3024):X.disable(3024),da.dither=d);u=ga.depth_func;u!==da.depth_func&&(X.depthFunc(u),da.depth_func=u);l=Pc[0];m=Pc[1];if(l!==Vc[0]||m!==Vc[1])X.depthRange(l,m),Vc[0]=l,Vc[1]=m;h=ga.depth_mask;h!==da.depth_mask&&(X.depthMask(h),da.depth_mask=h);B=Ha[0];x=Ha[1];v=Ha[2];K=Ha[3];if(B!==ub[0]||x!==ub[1]||v!==ub[2]||
K!==ub[3])X.colorMask(B,x,v,K),ub[0]=B,ub[1]=x,ub[2]=v,ub[3]=K;D=ga.cull_enable;D!==da.cull_enable&&(D?X.enable(2884):X.disable(2884),da.cull_enable=D);U=ga.cull_face;U!==da.cull_face&&(X.cullFace(U),da.cull_face=U);A=ga.frontFace;A!==da.frontFace&&(X.frontFace(A),da.frontFace=A);H=ga.lineWidth;H!==da.lineWidth&&(X.lineWidth(H),da.lineWidth=H);t=ga.polygonOffset_enable;t!==da.polygonOffset_enable&&(t?X.enable(32823):X.disable(32823),da.polygonOffset_enable=t);la=L[0];P=L[1];if(la!==F[0]||P!==F[1])X.polygonOffset(la,
P),F[0]=la,F[1]=P;O=ga.sample_alpha;O!==da.sample_alpha&&(O?X.enable(32926):X.disable(32926),da.sample_alpha=O);sa=ga.sample_enable;sa!==da.sample_enable&&(sa?X.enable(32928):X.disable(32928),da.sample_enable=sa);oa=ia[0];Y=ia[1];if(oa!==ua[0]||Y!==ua[1])X.sampleCoverage(oa,Y),ua[0]=oa,ua[1]=Y;Ka=ga.stencil_enable;Ka!==da.stencil_enable&&(Ka?X.enable(2960):X.disable(2960),da.stencil_enable=Ka);Nc=ga.stencil_mask;Nc!==da.stencil_mask&&(X.stencilMask(Nc),da.stencil_mask=Nc);Ic=ta[0];rc=ta[1];gb=ta[2];
if(Ic!==N[0]||rc!==N[1]||gb!==N[2])X.stencilFunc(Ic,rc,gb),N[0]=Ic,N[1]=rc,N[2]=gb;ra=za[0];Ib=za[1];oc=za[2];Xa=za[3];if(ra!==Aa[0]||Ib!==Aa[1]||oc!==Aa[2]||Xa!==Aa[3])X.stencilOpSeparate(ra,Ib,oc,Xa),Aa[0]=ra,Aa[1]=Ib,Aa[2]=oc,Aa[3]=Xa;Qc=G[0];ac=G[1];lc=G[2];zc=G[3];if(Qc!==ca[0]||ac!==ca[1]||lc!==ca[2]||zc!==ca[3])X.stencilOpSeparate(Qc,ac,lc,zc),ca[0]=Qc,ca[1]=ac,ca[2]=lc,ca[3]=zc}X.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;X.enable(3042);da.blend_enable=!0;X.blendEquationSeparate(32774,
32774);aa[0]=32774;aa[1]=32774;X.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;X.disable(2929);da.depth_enable=!1;X.enable(3089);da.scissor_enable=!0;if(n=da.profile)k=performance.now(),c.count+=a;X.useProgram(z.program);p=nb.angle_instanced_arrays;var rd,Fc,dc,Cc,Yc,Zb,Gc,Ya;qc.setVAO(null);rd=Sa.location;Fc=S[rd];Fc.buffer||X.enableVertexAttribArray(rd);if(5126!==Fc.type||2!==Fc.size||Fc.buffer!==y||!1!==Fc.normalized||0!==Fc.offset||24!==Fc.stride)X.bindBuffer(34962,y.buffer),
X.vertexAttribPointer(rd,2,5126,!1,24,0),Fc.type=5126,Fc.size=2,Fc.buffer=y,Fc.normalized=!1,Fc.offset=0,Fc.stride=24;0!==Fc.divisor&&(p.vertexAttribDivisorANGLE(rd,0),Fc.divisor=0);dc=ea.location;Cc=S[dc];Cc.buffer||X.enableVertexAttribArray(dc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==e||!1!==Cc.normalized||8!==Cc.offset||24!==Cc.stride)X.bindBuffer(34962,e.buffer),X.vertexAttribPointer(dc,2,5126,!1,24,8),Cc.type=5126,Cc.size=2,Cc.buffer=e,Cc.normalized=!1,Cc.offset=8,Cc.stride=24;0!==Cc.divisor&&
(p.vertexAttribDivisorANGLE(dc,0),Cc.divisor=0);Yc=Z.location;Zb=S[Yc];Zb.buffer||X.enableVertexAttribArray(Yc);if(5126!==Zb.type||2!==Zb.size||Zb.buffer!==g||!1!==Zb.normalized||16!==Zb.offset||24!==Zb.stride)X.bindBuffer(34962,g.buffer),X.vertexAttribPointer(Yc,2,5126,!1,24,16),Zb.type=5126,Zb.size=2,Zb.buffer=g,Zb.normalized=!1,Zb.offset=16,Zb.stride=24;0!==Zb.divisor&&(p.vertexAttribDivisorANGLE(Yc,0),Zb.divisor=0);(Gc=Da.elements)?X.bindBuffer(34963,Gc.buffer.buffer):qc.currentVAO&&(Gc=Ga.getElements(qc.currentVAO.elements))&&
X.bindBuffer(34963,Gc.buffer.buffer);Ya=Da.offset;for(r=0;r<a;++r){q=b[r];var Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,cc,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,ic,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc;Ea=q.viewport;ud=Ea.x|0;Jb=Ea.y|0;Ua="width"in Ea?Ea.width|0:na.framebufferWidth-
ud;Vb="height"in Ea?Ea.height|0:na.framebufferHeight-Jb;cb=na.viewportWidth;na.viewportWidth=Ua;Dc=na.viewportHeight;na.viewportHeight=Vb;X.viewport(ud,Jb,Ua,Vb);E[0]=ud;E[1]=Jb;E[2]=Ua;E[3]=Vb;Xb=q.viewport;cc=Xb.x|0;jc=Xb.y|0;Sb="width"in Xb?Xb.width|0:na.framebufferWidth-cc;w="height"in Xb?Xb.height|0:na.framebufferHeight-jc;X.scissor(cc,jc,Sb,w);fa[0]=cc;fa[1]=jc;fa[2]=Sb;fa[3]=w;Tb=ba.call(this,na,q,r);Gb.offset=Tb;Pa=!1;pb=null;vb=0;hb=!1;ic=Qa=0;Yb=1;jd=0;db=5126;jb=mc=Zc=pc=0;ob(Gb)?(Pa=!0,
pb=C.createStream(34962,Gb),db=pb.dtype):(pb=C.getBuffer(Gb))?db=pb.dtype:"constant"in Gb?(Yb=2,"number"===typeof Gb.constant?(Zc=Gb.constant,mc=jb=pc=0):(Zc=0<Gb.constant.length?Gb.constant[0]:0,mc=1<Gb.constant.length?Gb.constant[1]:0,jb=2<Gb.constant.length?Gb.constant[2]:0,pc=3<Gb.constant.length?Gb.constant[3]:0)):(pb=ob(Gb.buffer)?C.createStream(34962,Gb.buffer):C.getBuffer(Gb.buffer),db="type"in Gb?nc[Gb.type]:pb.dtype,hb=!!Gb.normalized,ic=Gb.size|0,Qa=Gb.offset|0,jd=Gb.stride|0,vb=Gb.divisor|
0);kb=Q.location;va=S[kb];if(1===Yb){va.buffer||X.enableVertexAttribArray(kb);qb=ic||2;if(va.type!==db||va.size!==qb||va.buffer!==pb||va.normalized!==hb||va.offset!==Qa||va.stride!==jd)X.bindBuffer(34962,pb.buffer),X.vertexAttribPointer(kb,qb,db,hb,jd,Qa),va.type=db,va.size=qb,va.buffer=pb,va.normalized=hb,va.offset=Qa,va.stride=jd;va.divisor!==vb&&(p.vertexAttribDivisorANGLE(kb,vb),va.divisor=vb)}else if(va.buffer&&(X.disableVertexAttribArray(kb),va.buffer=null),va.x!==Zc||va.y!==mc||va.z!==jb||
va.w!==pc)X.vertexAttrib4f(kb,Zc,mc,jb,pc),va.x=Zc,va.y=mc,va.z=jb,va.w=pc;ya=I.call(this,na,q,r);zb.offset=ya;Va=!1;bb=null;Ba=0;eb=!1;Bb=Na=0;Ab=1;Ta=0;Hc=5126;wa=Ub=Mb=Kb=0;ob(zb)?(Va=!0,bb=C.createStream(34962,zb),Hc=bb.dtype):(bb=C.getBuffer(zb))?Hc=bb.dtype:"constant"in zb?(Ab=2,"number"===typeof zb.constant?(Mb=zb.constant,Ub=wa=Kb=0):(Mb=0<zb.constant.length?zb.constant[0]:0,Ub=1<zb.constant.length?zb.constant[1]:0,wa=2<zb.constant.length?zb.constant[2]:0,Kb=3<zb.constant.length?zb.constant[3]:
0)):(bb=ob(zb.buffer)?C.createStream(34962,zb.buffer):C.getBuffer(zb.buffer),Hc="type"in zb?nc[zb.type]:bb.dtype,eb=!!zb.normalized,Bb=zb.size|0,Na=zb.offset|0,Ta=zb.stride|0,Ba=zb.divisor|0);Jd=M.location;Ma=S[Jd];if(1===Ab){Ma.buffer||X.enableVertexAttribArray(Jd);Pb=Bb||2;if(Ma.type!==Hc||Ma.size!==Pb||Ma.buffer!==bb||Ma.normalized!==eb||Ma.offset!==Na||Ma.stride!==Ta)X.bindBuffer(34962,bb.buffer),X.vertexAttribPointer(Jd,Pb,Hc,eb,Ta,Na),Ma.type=Hc,Ma.size=Pb,Ma.buffer=bb,Ma.normalized=eb,Ma.offset=
Na,Ma.stride=Ta;Ma.divisor!==Ba&&(p.vertexAttribDivisorANGLE(Jd,Ba),Ma.divisor=Ba)}else if(Ma.buffer&&(X.disableVertexAttribArray(Jd),Ma.buffer=null),Ma.x!==Mb||Ma.y!==Ub||Ma.z!==wa||Ma.w!==Kb)X.vertexAttrib4f(Jd,Mb,Ub,wa,Kb),Ma.x=Mb,Ma.y=Ub,Ma.z=wa,Ma.w=Kb;fb=V.call(this,na,q,r);qa.offset=fb;ib=!1;xa=null;ec=0;Fa=!1;sb=rb=0;Za=1;$a=0;kc=5126;Nb=Wa=tc=dd=0;ob(qa)?(ib=!0,xa=C.createStream(34962,qa),kc=xa.dtype):(xa=C.getBuffer(qa))?kc=xa.dtype:"constant"in qa?(Za=2,"number"===typeof qa.constant?(tc=
qa.constant,Wa=Nb=dd=0):(tc=0<qa.constant.length?qa.constant[0]:0,Wa=1<qa.constant.length?qa.constant[1]:0,Nb=2<qa.constant.length?qa.constant[2]:0,dd=3<qa.constant.length?qa.constant[3]:0)):(xa=ob(qa.buffer)?C.createStream(34962,qa.buffer):C.getBuffer(qa.buffer),kc="type"in qa?nc[qa.type]:xa.dtype,Fa=!!qa.normalized,sb=qa.size|0,rb=qa.offset|0,$a=qa.stride|0,ec=qa.divisor|0);$c=Db.location;Ia=S[$c];if(1===Za){Ia.buffer||X.enableVertexAttribArray($c);vc=sb||4;if(Ia.type!==kc||Ia.size!==vc||Ia.buffer!==
xa||Ia.normalized!==Fa||Ia.offset!==rb||Ia.stride!==$a)X.bindBuffer(34962,xa.buffer),X.vertexAttribPointer($c,vc,kc,Fa,$a,rb),Ia.type=kc,Ia.size=vc,Ia.buffer=xa,Ia.normalized=Fa,Ia.offset=rb,Ia.stride=$a;Ia.divisor!==ec&&(p.vertexAttribDivisorANGLE($c,ec),Ia.divisor=ec)}else if(Ia.buffer&&(X.disableVertexAttribArray($c),Ia.buffer=null),Ia.x!==tc||Ia.y!==Wa||Ia.z!==Nb||Ia.w!==dd)X.vertexAttrib4f($c,tc,Wa,Nb,dd),Ia.x=tc,Ia.y=Wa,Ia.z=Nb,Ia.w=dd;Ra=J.call(this,na,q,r);Fb.offset=Ra;Ca=!1;lb=null;wb=0;
Cb=!1;uc=tb=0;xb=1;wd=0;sc=5126;fd=ed=Jc=Ed=0;ob(Fb)?(Ca=!0,lb=C.createStream(34962,Fb),sc=lb.dtype):(lb=C.getBuffer(Fb))?sc=lb.dtype:"constant"in Fb?(xb=2,"number"===typeof Fb.constant?(Jc=Fb.constant,ed=fd=Ed=0):(Jc=0<Fb.constant.length?Fb.constant[0]:0,ed=1<Fb.constant.length?Fb.constant[1]:0,fd=2<Fb.constant.length?Fb.constant[2]:0,Ed=3<Fb.constant.length?Fb.constant[3]:0)):(lb=ob(Fb.buffer)?C.createStream(34962,Fb.buffer):C.getBuffer(Fb.buffer),sc="type"in Fb?nc[Fb.type]:lb.dtype,Cb=!!Fb.normalized,
uc=Fb.size|0,tb=Fb.offset|0,wd=Fb.stride|0,wb=Fb.divisor|0);Wb=ma.location;bc=S[Wb];if(1===xb){bc.buffer||X.enableVertexAttribArray(Wb);Qb=uc||4;if(bc.type!==sc||bc.size!==Qb||bc.buffer!==lb||bc.normalized!==Cb||bc.offset!==tb||bc.stride!==wd)X.bindBuffer(34962,lb.buffer),X.vertexAttribPointer(Wb,Qb,sc,Cb,wd,tb),bc.type=sc,bc.size=Qb,bc.buffer=lb,bc.normalized=Cb,bc.offset=tb,bc.stride=wd;bc.divisor!==wb&&(p.vertexAttribDivisorANGLE(Wb,wb),bc.divisor=wb)}else if(bc.buffer&&(X.disableVertexAttribArray(Wb),
bc.buffer=null),bc.x!==Jc||bc.y!==ed||bc.z!==fd||bc.w!==Ed)X.vertexAttrib4f(Wb,Jc,ed,fd,Ed),bc.x=Jc,bc.y=ed,bc.z=fd,bc.w=Ed;Ja=ja.call(this,na,q,r);$b=Ja[0];yb=Ja[1];Rb=Ja[2];hc=Ja[3];r&&mb===$b&&Ob===yb&&fc===Rb&&Ze===hc||(mb=$b,Ob=yb,fc=Rb,Ze=hc,X.uniform4f(ab.location,$b,yb,Rb,hc));xc=q.lineWidth;r&&yc===xc||(yc=xc,X.uniform1f(Oa.location,xc));Ac=q.capSize;r&&Kc===Ac||(Kc=Ac,X.uniform1f(ka.location,Ac));ad=q.scale;Rc=ad[0];Lb=ad[1];r&&Lc===Rc&&Eb===Lb||(Lc=Rc,Eb=Lb,X.uniform2f(T.location,Rc,Lb));
Mc=q.scaleFract;Ec=Mc[0];gc=Mc[1];r&&Sc===Ec&&Wc===gc||(Sc=Ec,Wc=gc,X.uniform2f(pa.location,Ec,gc));gd=q.translate;kd=gd[0];Xc=gd[1];r&&md===kd&&bf===Xc||(md=kd,bf=Xc,X.uniform2f(R.location,kd,Xc));Zd=q.translateFract;ke=Zd[0];me=Zd[1];r&&se===ke&&Md===me||(se=ke,Md=me,X.uniform2f(Hb.location,ke,me));Kd=q.opacity;r&&id===Kd||(id=Kd,X.uniform1f(W.location,Kd));Bc=q.count;0<Bc?Gc?p.drawElementsInstancedANGLE(4,36,Gc.type,Ya<<(Gc.type-5121>>1),Bc):p.drawArraysInstancedANGLE(4,Ya,36,Bc):0>Bc&&(Gc?X.drawElements(4,
36,Gc.type,Ya<<(Gc.type-5121>>1)):X.drawArrays(4,Ya,36));na.viewportWidth=cb;na.viewportHeight=Dc;Pa&&C.destroyStream(pb);Va&&C.destroyStream(bb);ib&&C.destroyStream(xa);Ca&&C.destroyStream(lb)}da.dirty=!0;qc.setVAO(null);n&&(c.cpuTime+=performance.now()-k)},draw:function(a){var p,r,d,u,l,m,h,x,v,K,D,U,A,H,t,z,la,P,I,O,sa,J,oa,Y,V,ba,Ka,ra,Nc,Ic,rc,gb,zc,Ib,oc,Xa,Qc,ac,lc,ja,cc,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ic,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,
Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec;p=La.next;p!==La.cur&&(p?X.bindFramebuffer(36160,p.framebuffer):X.bindFramebuffer(36160,null),La.cur=p);if(da.dirty){var Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb;Fa=ga.dither;Fa!==da.dither&&(Fa?X.enable(3024):X.disable(3024),da.dither=Fa);rb=ga.depth_func;rb!==da.depth_func&&(X.depthFunc(rb),da.depth_func=rb);sb=Pc[0];Za=Pc[1];if(sb!==Vc[0]||Za!==Vc[1])X.depthRange(sb,Za),Vc[0]=sb,Vc[1]=Za;$a=
ga.depth_mask;$a!==da.depth_mask&&(X.depthMask($a),da.depth_mask=$a);kc=Ha[0];dd=Ha[1];tc=Ha[2];Wa=Ha[3];if(kc!==ub[0]||dd!==ub[1]||tc!==ub[2]||Wa!==ub[3])X.colorMask(kc,dd,tc,Wa),ub[0]=kc,ub[1]=dd,ub[2]=tc,ub[3]=Wa;Nb=ga.cull_enable;Nb!==da.cull_enable&&(Nb?X.enable(2884):X.disable(2884),da.cull_enable=Nb);$c=ga.cull_face;$c!==da.cull_face&&(X.cullFace($c),da.cull_face=$c);Ia=ga.frontFace;Ia!==da.frontFace&&(X.frontFace(Ia),da.frontFace=Ia);vc=ga.lineWidth;vc!==da.lineWidth&&(X.lineWidth(vc),da.lineWidth=
vc);Ra=ga.polygonOffset_enable;Ra!==da.polygonOffset_enable&&(Ra?X.enable(32823):X.disable(32823),da.polygonOffset_enable=Ra);Ca=L[0];lb=L[1];if(Ca!==F[0]||lb!==F[1])X.polygonOffset(Ca,lb),F[0]=Ca,F[1]=lb;wb=ga.sample_alpha;wb!==da.sample_alpha&&(wb?X.enable(32926):X.disable(32926),da.sample_alpha=wb);Cb=ga.sample_enable;Cb!==da.sample_enable&&(Cb?X.enable(32928):X.disable(32928),da.sample_enable=Cb);tb=ia[0];uc=ia[1];if(tb!==ua[0]||uc!==ua[1])X.sampleCoverage(tb,uc),ua[0]=tb,ua[1]=uc;xb=ga.stencil_enable;
xb!==da.stencil_enable&&(xb?X.enable(2960):X.disable(2960),da.stencil_enable=xb);wd=ga.stencil_mask;wd!==da.stencil_mask&&(X.stencilMask(wd),da.stencil_mask=wd);sc=ta[0];Ed=ta[1];Jc=ta[2];if(sc!==N[0]||Ed!==N[1]||Jc!==N[2])X.stencilFunc(sc,Ed,Jc),N[0]=sc,N[1]=Ed,N[2]=Jc;ed=za[0];fd=za[1];Wb=za[2];bc=za[3];if(ed!==Aa[0]||fd!==Aa[1]||Wb!==Aa[2]||bc!==Aa[3])X.stencilOpSeparate(ed,fd,Wb,bc),Aa[0]=ed,Aa[1]=fd,Aa[2]=Wb,Aa[3]=bc;Qb=G[0];Ja=G[1];$b=G[2];mb=G[3];if(Qb!==ca[0]||Ja!==ca[1]||$b!==ca[2]||mb!==
ca[3])X.stencilOpSeparate(Qb,Ja,$b,mb),ca[0]=Qb,ca[1]=Ja,ca[2]=$b,ca[3]=mb}r=a.viewport;d=r.x|0;u=r.y|0;l="width"in r?r.width|0:na.framebufferWidth-d;m="height"in r?r.height|0:na.framebufferHeight-u;h=na.viewportWidth;na.viewportWidth=l;x=na.viewportHeight;na.viewportHeight=m;X.viewport(d,u,l,m);E[0]=d;E[1]=u;E[2]=l;E[3]=m;X.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;X.enable(3042);da.blend_enable=!0;X.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;X.blendFuncSeparate(770,771,
773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;X.disable(2929);da.depth_enable=!1;v=a.viewport;K=v.x|0;D=v.y|0;U="width"in v?v.width|0:na.framebufferWidth-K;A="height"in v?v.height|0:na.framebufferHeight-D;X.scissor(K,D,U,A);fa[0]=K;fa[1]=D;fa[2]=U;fa[3]=A;X.enable(3089);da.scissor_enable=!0;if(H=da.profile)t=performance.now(),c.count++;X.useProgram(f.program);z=nb.angle_instanced_arrays;qc.setVAO(null);la=k.call(this,na,a,0);Gb.offset=la;P=!1;I=null;O=0;sa=!1;oa=J=0;Y=1;V=0;ba=5126;Ic=Nc=ra=Ka=0;ob(Gb)?
(P=!0,I=C.createStream(34962,Gb),ba=I.dtype):(I=C.getBuffer(Gb))?ba=I.dtype:"constant"in Gb?(Y=2,"number"===typeof Gb.constant?(ra=Gb.constant,Nc=Ic=Ka=0):(ra=0<Gb.constant.length?Gb.constant[0]:0,Nc=1<Gb.constant.length?Gb.constant[1]:0,Ic=2<Gb.constant.length?Gb.constant[2]:0,Ka=3<Gb.constant.length?Gb.constant[3]:0)):(I=ob(Gb.buffer)?C.createStream(34962,Gb.buffer):C.getBuffer(Gb.buffer),ba="type"in Gb?nc[Gb.type]:I.dtype,sa=!!Gb.normalized,oa=Gb.size|0,J=Gb.offset|0,V=Gb.stride|0,O=Gb.divisor|
0);rc=Q.location;gb=S[rc];if(1===Y){gb.buffer||X.enableVertexAttribArray(rc);zc=oa||2;if(gb.type!==ba||gb.size!==zc||gb.buffer!==I||gb.normalized!==sa||gb.offset!==J||gb.stride!==V)X.bindBuffer(34962,I.buffer),X.vertexAttribPointer(rc,zc,ba,sa,V,J),gb.type=ba,gb.size=zc,gb.buffer=I,gb.normalized=sa,gb.offset=J,gb.stride=V;gb.divisor!==O&&(z.vertexAttribDivisorANGLE(rc,O),gb.divisor=O)}else if(gb.buffer&&(X.disableVertexAttribArray(rc),gb.buffer=null),gb.x!==ra||gb.y!==Nc||gb.z!==Ic||gb.w!==Ka)X.vertexAttrib4f(rc,
ra,Nc,Ic,Ka),gb.x=ra,gb.y=Nc,gb.z=Ic,gb.w=Ka;Ib=b.call(this,na,a,0);zb.offset=Ib;oc=!1;Xa=null;Qc=0;ac=!1;ja=lc=0;cc=1;Fc=0;dc=5126;Gc=Zb=Yc=Cc=0;ob(zb)?(oc=!0,Xa=C.createStream(34962,zb),dc=Xa.dtype):(Xa=C.getBuffer(zb))?dc=Xa.dtype:"constant"in zb?(cc=2,"number"===typeof zb.constant?(Yc=zb.constant,Zb=Gc=Cc=0):(Yc=0<zb.constant.length?zb.constant[0]:0,Zb=1<zb.constant.length?zb.constant[1]:0,Gc=2<zb.constant.length?zb.constant[2]:0,Cc=3<zb.constant.length?zb.constant[3]:0)):(Xa=ob(zb.buffer)?C.createStream(34962,
zb.buffer):C.getBuffer(zb.buffer),dc="type"in zb?nc[zb.type]:Xa.dtype,ac=!!zb.normalized,ja=zb.size|0,lc=zb.offset|0,Fc=zb.stride|0,Qc=zb.divisor|0);Ya=M.location;Ea=S[Ya];if(1===cc){Ea.buffer||X.enableVertexAttribArray(Ya);ud=ja||2;if(Ea.type!==dc||Ea.size!==ud||Ea.buffer!==Xa||Ea.normalized!==ac||Ea.offset!==lc||Ea.stride!==Fc)X.bindBuffer(34962,Xa.buffer),X.vertexAttribPointer(Ya,ud,dc,ac,Fc,lc),Ea.type=dc,Ea.size=ud,Ea.buffer=Xa,Ea.normalized=ac,Ea.offset=lc,Ea.stride=Fc;Ea.divisor!==Qc&&(z.vertexAttribDivisorANGLE(Ya,
Qc),Ea.divisor=Qc)}else if(Ea.buffer&&(X.disableVertexAttribArray(Ya),Ea.buffer=null),Ea.x!==Yc||Ea.y!==Zb||Ea.z!==Gc||Ea.w!==Cc)X.vertexAttrib4f(Ya,Yc,Zb,Gc,Cc),Ea.x=Yc,Ea.y=Zb,Ea.z=Gc,Ea.w=Cc;Jb=q.call(this,na,a,0);qa.offset=Jb;Ua=!1;Vb=null;cb=0;Dc=!1;ic=Xb=0;jc=1;Sb=0;w=5126;vb=pb=Pa=Tb=0;ob(qa)?(Ua=!0,Vb=C.createStream(34962,qa),w=Vb.dtype):(Vb=C.getBuffer(qa))?w=Vb.dtype:"constant"in qa?(jc=2,"number"===typeof qa.constant?(Pa=qa.constant,pb=vb=Tb=0):(Pa=0<qa.constant.length?qa.constant[0]:0,
pb=1<qa.constant.length?qa.constant[1]:0,vb=2<qa.constant.length?qa.constant[2]:0,Tb=3<qa.constant.length?qa.constant[3]:0)):(Vb=ob(qa.buffer)?C.createStream(34962,qa.buffer):C.getBuffer(qa.buffer),w="type"in qa?nc[qa.type]:Vb.dtype,Dc=!!qa.normalized,ic=qa.size|0,Xb=qa.offset|0,Sb=qa.stride|0,cb=qa.divisor|0);hb=Db.location;Qa=S[hb];if(1===jc){Qa.buffer||X.enableVertexAttribArray(hb);Oc=ic||4;if(Qa.type!==w||Qa.size!==Oc||Qa.buffer!==Vb||Qa.normalized!==Dc||Qa.offset!==Xb||Qa.stride!==Sb)X.bindBuffer(34962,
Vb.buffer),X.vertexAttribPointer(hb,Oc,w,Dc,Sb,Xb),Qa.type=w,Qa.size=Oc,Qa.buffer=Vb,Qa.normalized=Dc,Qa.offset=Xb,Qa.stride=Sb;Qa.divisor!==cb&&(z.vertexAttribDivisorANGLE(hb,cb),Qa.divisor=cb)}else if(Qa.buffer&&(X.disableVertexAttribArray(hb),Qa.buffer=null),Qa.x!==Pa||Qa.y!==pb||Qa.z!==vb||Qa.w!==Tb)X.vertexAttrib4f(hb,Pa,pb,vb,Tb),Qa.x=Pa,Qa.y=pb,Qa.z=vb,Qa.w=Tb;Yb=B.call(this,na,a,0);Fb.offset=Yb;jd=!1;db=null;pc=0;Zc=!1;jb=mc=0;kb=1;va=0;qb=5126;Ba=bb=Va=ya=0;ob(Fb)?(jd=!0,db=C.createStream(34962,
Fb),qb=db.dtype):(db=C.getBuffer(Fb))?qb=db.dtype:"constant"in Fb?(kb=2,"number"===typeof Fb.constant?(Va=Fb.constant,bb=Ba=ya=0):(Va=0<Fb.constant.length?Fb.constant[0]:0,bb=1<Fb.constant.length?Fb.constant[1]:0,Ba=2<Fb.constant.length?Fb.constant[2]:0,ya=3<Fb.constant.length?Fb.constant[3]:0)):(db=ob(Fb.buffer)?C.createStream(34962,Fb.buffer):C.getBuffer(Fb.buffer),qb="type"in Fb?nc[Fb.type]:db.dtype,Zc=!!Fb.normalized,jb=Fb.size|0,mc=Fb.offset|0,va=Fb.stride|0,pc=Fb.divisor|0);eb=ma.location;Na=
S[eb];if(1===kb){Na.buffer||X.enableVertexAttribArray(eb);Bb=jb||4;if(Na.type!==qb||Na.size!==Bb||Na.buffer!==db||Na.normalized!==Zc||Na.offset!==mc||Na.stride!==va)X.bindBuffer(34962,db.buffer),X.vertexAttribPointer(eb,Bb,qb,Zc,va,mc),Na.type=qb,Na.size=Bb,Na.buffer=db,Na.normalized=Zc,Na.offset=mc,Na.stride=va;Na.divisor!==pc&&(z.vertexAttribDivisorANGLE(eb,pc),Na.divisor=pc)}else if(Na.buffer&&(X.disableVertexAttribArray(eb),Na.buffer=null),Na.x!==Va||Na.y!==bb||Na.z!==Ba||Na.w!==ya)X.vertexAttrib4f(eb,
Va,bb,Ba,ya),Na.x=Va,Na.y=bb,Na.z=Ba,Na.w=ya;Ab=Sa.location;Ta=S[Ab];Ta.buffer||X.enableVertexAttribArray(Ab);if(5126!==Ta.type||2!==Ta.size||Ta.buffer!==y||!1!==Ta.normalized||0!==Ta.offset||24!==Ta.stride)X.bindBuffer(34962,y.buffer),X.vertexAttribPointer(Ab,2,5126,!1,24,0),Ta.type=5126,Ta.size=2,Ta.buffer=y,Ta.normalized=!1,Ta.offset=0,Ta.stride=24;0!==Ta.divisor&&(z.vertexAttribDivisorANGLE(Ab,0),Ta.divisor=0);Hc=ea.location;Kb=S[Hc];Kb.buffer||X.enableVertexAttribArray(Hc);if(5126!==Kb.type||
2!==Kb.size||Kb.buffer!==e||!1!==Kb.normalized||8!==Kb.offset||24!==Kb.stride)X.bindBuffer(34962,e.buffer),X.vertexAttribPointer(Hc,2,5126,!1,24,8),Kb.type=5126,Kb.size=2,Kb.buffer=e,Kb.normalized=!1,Kb.offset=8,Kb.stride=24;0!==Kb.divisor&&(z.vertexAttribDivisorANGLE(Hc,0),Kb.divisor=0);Mb=Z.location;Ub=S[Mb];Ub.buffer||X.enableVertexAttribArray(Mb);if(5126!==Ub.type||2!==Ub.size||Ub.buffer!==g||!1!==Ub.normalized||16!==Ub.offset||24!==Ub.stride)X.bindBuffer(34962,g.buffer),X.vertexAttribPointer(Mb,
2,5126,!1,24,16),Ub.type=5126,Ub.size=2,Ub.buffer=g,Ub.normalized=!1,Ub.offset=16,Ub.stride=24;0!==Ub.divisor&&(z.vertexAttribDivisorANGLE(Mb,0),Ub.divisor=0);wa=n.call(this,na,a,0);X.uniform4f(ab.location,wa[0],wa[1],wa[2],wa[3]);X.uniform1f(Oa.location,a.lineWidth);X.uniform1f(ka.location,a.capSize);Jd=a.scale;X.uniform2f(T.location,Jd[0],Jd[1]);Ma=a.scaleFract;X.uniform2f(pa.location,Ma[0],Ma[1]);Pb=a.translate;X.uniform2f(R.location,Pb[0],Pb[1]);fb=a.translateFract;X.uniform2f(Hb.location,fb[0],
fb[1]);X.uniform1f(W.location,a.opacity);(ib=Da.elements)?X.bindBuffer(34963,ib.buffer.buffer):qc.currentVAO&&(ib=Ga.getElements(qc.currentVAO.elements))&&X.bindBuffer(34963,ib.buffer.buffer);xa=Da.offset;ec=a.count;0<ec?ib?z.drawElementsInstancedANGLE(4,36,ib.type,xa<<(ib.type-5121>>1),ec):z.drawArraysInstancedANGLE(4,xa,36,ec):0>ec&&(ib?X.drawElements(4,36,ib.type,xa<<(ib.type-5121>>1)):X.drawArrays(4,xa,36));da.dirty=!0;qc.setVAO(null);na.viewportWidth=h;na.viewportHeight=x;H&&(c.cpuTime+=performance.now()-
t);P&&C.destroyStream(I);oc&&C.destroyStream(Xa);Ua&&C.destroyStream(Vb);jd&&C.destroyStream(db)},scope:function(b,a,f){var n,k,q,d,l,m,h,B,D,A,z,E,G,F,I,N,L,ca,aa,M,Q,J,R,T,S,X,fa,ha,V,W,ba,ia,Z,Aa,ua,qc,za,ta,ka,Ha,ea,Cc,pa,Zb,Gc,Ya,Ea,td,Jb,Ua,ja,cb,ub,Pc,ma,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Ga,Yb,Oa,db,ab,Sa,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Hb,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,La,sc,Vc,Jc,nb,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Db,
xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd;n=b.viewport;k=n.x|0;q=n.y|0;d="width"in n?n.width|0:na.framebufferWidth-k;l="height"in n?n.height|0:na.framebufferHeight-q;m=na.viewportWidth;na.viewportWidth=d;h=na.viewportHeight;na.viewportHeight=l;B=Ka[0];Ka[0]=k;D=Ka[1];Ka[1]=q;A=Ka[2];Ka[2]=d;z=Ka[3];Ka[3]=l;E=ic[0];ic[0]=0;G=ic[1];ic[1]=0;F=ic[2];ic[2]=
0;I=ic[3];ic[3]=0;N=ga.blend_enable;ga.blend_enable=!0;L=zc[0];zc[0]=32774;ca=zc[1];zc[1]=32774;aa=P[0];P[0]=770;M=P[1];P[1]=771;Q=P[2];P[2]=773;J=P[3];P[3]=1;R=ga.depth_enable;ga.depth_enable=!1;T=b.viewport;S=T.x|0;X=T.y|0;fa="width"in T?T.width|0:na.framebufferWidth-S;ha="height"in T?T.height|0:na.framebufferHeight-X;V=Y[0];Y[0]=S;W=Y[1];Y[1]=X;ba=Y[2];Y[2]=fa;ia=Y[3];Y[3]=ha;Z=ga.scissor_enable;ga.scissor_enable=!0;if(Aa=da.profile)ua=performance.now(),c.count++;qc=Da.count;Da.count=36;za=b.count;
ta=Da.instances;Da.instances=za;ka=Da.primitive;Da.primitive=4;Ha=b.capSize;ea=cc[5];cc[5]=Ha;Cc=b.lineWidth;pa=cc[4];cc[4]=Cc;Zb=b.opacity;Gc=cc[10];cc[10]=Zb;Ya=b.range;Ea=cc[18];cc[18]=Ya;td=b.scale;Jb=cc[6];cc[6]=td;Ua=b.scaleFract;ja=cc[7];cc[7]=Ua;cb=b.translate;ub=cc[8];cc[8]=cb;Pc=b.translateFract;ma=cc[9];cc[9]=Pc;jc=p.call(this,na,b,f);Sb=cc[3];cc[3]=jc;w=r.buffer;r.buffer=g;Tb=r.divisor;r.divisor=0;Pa=r.normalized;r.normalized=!1;pb=r.offset;r.offset=16;vb=r.size;r.size=0;hb=r.state;r.state=
1;Qa=r.stride;r.stride=24;Ga=r.type;r.type=5126;Yb=r.w;r.w=0;Oa=r.x;r.x=0;db=r.y;r.y=0;ab=r.z;r.z=0;Sa=u.call(this,na,b,f);Fb.offset=Sa;mc=!1;jb=null;kb=0;va=!1;ya=qb=0;Va=1;bb=0;Ba=5126;Ab=Bb=Na=eb=0;ob(Fb)?(mc=!0,jb=C.createStream(34962,Fb),Ba=jb.dtype):(jb=C.getBuffer(Fb))?Ba=jb.dtype:"constant"in Fb?(Va=2,"number"===typeof Fb.constant?(Na=Fb.constant,Bb=Ab=eb=0):(Na=0<Fb.constant.length?Fb.constant[0]:0,Bb=1<Fb.constant.length?Fb.constant[1]:0,Ab=2<Fb.constant.length?Fb.constant[2]:0,eb=3<Fb.constant.length?
Fb.constant[3]:0)):(jb=ob(Fb.buffer)?C.createStream(34962,Fb.buffer):C.getBuffer(Fb.buffer),Ba="type"in Fb?nc[Fb.type]:jb.dtype,va=!!Fb.normalized,ya=Fb.size|0,qb=Fb.offset|0,bb=Fb.stride|0,kb=Fb.divisor|0);Ta=K.buffer;K.buffer=jb;Hc=K.divisor;K.divisor=kb;Kb=K.normalized;K.normalized=va;Mb=K.offset;K.offset=qb;Ub=K.size;K.size=ya;wa=K.state;K.state=Va;Hb=K.stride;K.stride=bb;Ma=K.type;K.type=Ba;Pb=K.w;K.w=eb;fb=K.x;K.x=Na;ib=K.y;K.y=Bb;xa=K.z;K.z=Ab;ec=x.buffer;x.buffer=y;Fa=x.divisor;x.divisor=
0;rb=x.normalized;x.normalized=!1;sb=x.offset;x.offset=0;Za=x.size;x.size=0;$a=x.state;x.state=1;kc=x.stride;x.stride=24;dd=x.type;x.type=5126;tc=x.w;x.w=0;Wa=x.x;x.x=0;Nb=x.y;x.y=0;$c=x.z;x.z=0;Ia=U.call(this,na,b,f);qa.offset=Ia;vc=!1;Ra=null;Ca=0;lb=!1;Cb=wb=0;tb=1;uc=0;xb=5126;Jc=Vc=sc=La=0;ob(qa)?(vc=!0,Ra=C.createStream(34962,qa),xb=Ra.dtype):(Ra=C.getBuffer(qa))?xb=Ra.dtype:"constant"in qa?(tb=2,"number"===typeof qa.constant?(sc=qa.constant,Vc=Jc=La=0):(sc=0<qa.constant.length?qa.constant[0]:
0,Vc=1<qa.constant.length?qa.constant[1]:0,Jc=2<qa.constant.length?qa.constant[2]:0,La=3<qa.constant.length?qa.constant[3]:0)):(Ra=ob(qa.buffer)?C.createStream(34962,qa.buffer):C.getBuffer(qa.buffer),xb="type"in qa?nc[qa.type]:Ra.dtype,lb=!!qa.normalized,Cb=qa.size|0,wb=qa.offset|0,uc=qa.stride|0,Ca=qa.divisor|0);nb=v.buffer;v.buffer=Ra;fd=v.divisor;v.divisor=Ca;Wb=v.normalized;v.normalized=lb;bc=v.offset;v.offset=wb;Qb=v.size;v.size=Cb;Ja=v.state;v.state=tb;$b=v.stride;v.stride=uc;mb=v.type;v.type=
xb;yb=v.w;v.w=La;Ob=v.x;v.x=sc;Rb=v.y;v.y=Vc;fc=v.z;v.z=Jc;hc=H.buffer;H.buffer=e;Db=H.divisor;H.divisor=0;xc=H.normalized;H.normalized=!1;yc=H.offset;H.offset=8;Ac=H.size;H.size=0;Kc=H.state;H.state=1;ad=H.stride;H.stride=24;Rc=H.type;H.type=5126;Lc=H.w;H.w=0;Lb=H.x;H.x=0;Eb=H.y;H.y=0;Mc=H.z;H.z=0;Ec=la.call(this,na,b,f);Gb.offset=Ec;Sc=!1;gc=null;Wc=0;gd=!1;md=kd=0;Xc=1;bf=0;Zd=5126;Md=me=se=ke=0;ob(Gb)?(Sc=!0,gc=C.createStream(34962,Gb),Zd=gc.dtype):(gc=C.getBuffer(Gb))?Zd=gc.dtype:"constant"in
Gb?(Xc=2,"number"===typeof Gb.constant?(se=Gb.constant,me=Md=ke=0):(se=0<Gb.constant.length?Gb.constant[0]:0,me=1<Gb.constant.length?Gb.constant[1]:0,Md=2<Gb.constant.length?Gb.constant[2]:0,ke=3<Gb.constant.length?Gb.constant[3]:0)):(gc=ob(Gb.buffer)?C.createStream(34962,Gb.buffer):C.getBuffer(Gb.buffer),Zd="type"in Gb?nc[Gb.type]:gc.dtype,gd=!!Gb.normalized,md=Gb.size|0,kd=Gb.offset|0,bf=Gb.stride|0,Wc=Gb.divisor|0);Kd=t.buffer;t.buffer=gc;id=t.divisor;t.divisor=Wc;Bc=t.normalized;t.normalized=
gd;od=t.offset;t.offset=kd;ld=t.size;t.size=md;cd=t.state;t.state=Xc;pd=t.stride;t.stride=bf;Fd=t.type;t.type=Zd;Hd=t.w;t.w=ke;te=t.x;t.x=se;ze=t.y;t.y=me;Ae=t.z;t.z=Md;ne=O.call(this,na,b,f);zb.offset=ne;fe=!1;de=null;pe=0;be=!1;wc=ie=0;Uc=1;qe=0;le=5126;Rd=Qd=Pd=Ld=0;ob(zb)?(fe=!0,de=C.createStream(34962,zb),le=de.dtype):(de=C.getBuffer(zb))?le=de.dtype:"constant"in zb?(Uc=2,"number"===typeof zb.constant?(Pd=zb.constant,Qd=Rd=Ld=0):(Pd=0<zb.constant.length?zb.constant[0]:0,Qd=1<zb.constant.length?
zb.constant[1]:0,Rd=2<zb.constant.length?zb.constant[2]:0,Ld=3<zb.constant.length?zb.constant[3]:0)):(de=ob(zb.buffer)?C.createStream(34962,zb.buffer):C.getBuffer(zb.buffer),le="type"in zb?nc[zb.type]:de.dtype,be=!!zb.normalized,wc=zb.size|0,ie=zb.offset|0,qe=zb.stride|0,pe=zb.divisor|0);je=oa.buffer;oa.buffer=de;vf=oa.divisor;oa.divisor=pe;Ce=oa.normalized;oa.normalized=be;oe=oa.offset;oa.offset=ie;Re=oa.size;oa.size=wc;Se=oa.state;oa.state=Uc;Ne=oa.stride;oa.stride=qe;re=oa.type;oa.type=le;Fe=oa.w;
oa.w=Ld;He=oa.x;oa.x=Pd;Ie=oa.y;oa.y=Qd;Je=oa.z;oa.z=Rd;Ge=ra.vert;ra.vert=2;Nd=ra.frag;ra.frag=1;da.dirty=!0;a(na,b,f);na.viewportWidth=m;na.viewportHeight=h;Ka[0]=B;Ka[1]=D;Ka[2]=A;Ka[3]=z;ic[0]=E;ic[1]=G;ic[2]=F;ic[3]=I;ga.blend_enable=N;zc[0]=L;zc[1]=ca;P[0]=aa;P[1]=M;P[2]=Q;P[3]=J;ga.depth_enable=R;Y[0]=V;Y[1]=W;Y[2]=ba;Y[3]=ia;ga.scissor_enable=Z;Aa&&(c.cpuTime+=performance.now()-ua);Da.count=qc;Da.instances=ta;Da.primitive=ka;cc[5]=ea;cc[4]=pa;cc[10]=Gc;cc[18]=Ea;cc[6]=Jb;cc[7]=ja;cc[8]=ub;
cc[9]=ma;cc[3]=Sb;r.buffer=w;r.divisor=Tb;r.normalized=Pa;r.offset=pb;r.size=vb;r.state=hb;r.stride=Qa;r.type=Ga;r.w=Yb;r.x=Oa;r.y=db;r.z=ab;mc&&C.destroyStream(jb);K.buffer=Ta;K.divisor=Hc;K.normalized=Kb;K.offset=Mb;K.size=Ub;K.state=wa;K.stride=Hb;K.type=Ma;K.w=Pb;K.x=fb;K.y=ib;K.z=xa;x.buffer=ec;x.divisor=Fa;x.normalized=rb;x.offset=sb;x.size=Za;x.state=$a;x.stride=kc;x.type=dd;x.w=tc;x.x=Wa;x.y=Nb;x.z=$c;vc&&C.destroyStream(Ra);v.buffer=nb;v.divisor=fd;v.normalized=Wb;v.offset=bc;v.size=Qb;v.state=
Ja;v.stride=$b;v.type=mb;v.w=yb;v.x=Ob;v.y=Rb;v.z=fc;H.buffer=hc;H.divisor=Db;H.normalized=xc;H.offset=yc;H.size=Ac;H.state=Kc;H.stride=ad;H.type=Rc;H.w=Lc;H.x=Lb;H.y=Eb;H.z=Mc;Sc&&C.destroyStream(gc);t.buffer=Kd;t.divisor=id;t.normalized=Bc;t.offset=od;t.size=ld;t.state=cd;t.stride=pd;t.type=Fd;t.w=Hd;t.x=te;t.y=ze;t.z=Ae;fe&&C.destroyStream(de);oa.buffer=je;oa.divisor=vf;oa.normalized=Ce;oa.offset=oe;oa.size=Re;oa.state=Se;oa.stride=Ne;oa.type=re;oa.w=Fe;oa.x=He;oa.y=Ie;oa.z=Je;ra.vert=Ge;ra.frag=
Nd;da.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,c,d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,H,t,sa,O,oa,z,ba,I,V,J,ja,Z,ka,ma,Sa){var Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra,cc,qc,ic,td,zc,aa,P,ha,Ha,ub,Pc,Vc,L,F,ia,ua,Y,fa,ta,N,G;Db=a.attributes;ea=a.buffer;Oa=a.context;W=a.current;Q=a.draw;M=a.elements;T=a.extensions;pa=a.framebuffer;
R=a.gl;Hb=a.isBufferArgs;ab=a.next;S=a.shader;C=a.uniforms;na=a.vao;da=ab.blend_color;Da=W.blend_color;Ga=ab.blend_equation;nb=W.blend_equation;La=ab.blend_func;X=W.blend_func;ob=ab.colorMask;ga=W.colorMask;ra=ab.depth_range;cc=W.depth_range;qc=ab.polygonOffset_offset;ic=W.polygonOffset_offset;td=ab.sample_coverage;zc=W.sample_coverage;aa=ab.scissor_box;P=W.scissor_box;ha=ab.stencil_func;Ha=W.stencil_func;ub=ab.stencil_opBack;Pc=W.stencil_opBack;Vc=ab.stencil_opFront;L=W.stencil_opFront;F=ab.viewport;
ia=W.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};ta={divisor:1,offset:16,stride:8};N={divisor:1,offset:16,stride:8};G={divisor:1,offset:0,stride:4};return{batch:function(b,e){var g,a,f,n,k,p;g=pa.next;g!==pa.cur&&(g?R.bindFramebuffer(36160,g.framebuffer):R.bindFramebuffer(36160,null),pa.cur=g);if(W.dirty){var r,q,d,h,y,B,D,A,C,F,aa,S,da,Ga,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,
nd,vd,bd,sd,Tc,Dd,Nc;r=ab.dither;r!==W.dither&&(r?R.enable(3024):R.disable(3024),W.dither=r);q=ab.depth_func;q!==W.depth_func&&(R.depthFunc(q),W.depth_func=q);d=ra[0];h=ra[1];if(d!==cc[0]||h!==cc[1])R.depthRange(d,h),cc[0]=d,cc[1]=h;y=ab.depth_mask;y!==W.depth_mask&&(R.depthMask(y),W.depth_mask=y);B=ob[0];D=ob[1];A=ob[2];C=ob[3];if(B!==ga[0]||D!==ga[1]||A!==ga[2]||C!==ga[3])R.colorMask(B,D,A,C),ga[0]=B,ga[1]=D,ga[2]=A,ga[3]=C;F=ab.cull_enable;F!==W.cull_enable&&(F?R.enable(2884):R.disable(2884),W.cull_enable=
F);aa=ab.cull_face;aa!==W.cull_face&&(R.cullFace(aa),W.cull_face=aa);S=ab.frontFace;S!==W.frontFace&&(R.frontFace(S),W.frontFace=S);da=ab.lineWidth;da!==W.lineWidth&&(R.lineWidth(da),W.lineWidth=da);Ga=ab.polygonOffset_enable;Ga!==W.polygonOffset_enable&&(Ga?R.enable(32823):R.disable(32823),W.polygonOffset_enable=Ga);zd=qc[0];xe=qc[1];if(zd!==ic[0]||xe!==ic[1])R.polygonOffset(zd,xe),ic[0]=zd,ic[1]=xe;Me=ab.sample_alpha;Me!==W.sample_alpha&&(Me?R.enable(32926):R.disable(32926),W.sample_alpha=Me);Qe=
ab.sample_enable;Qe!==W.sample_enable&&(Qe?R.enable(32928):R.disable(32928),W.sample_enable=Qe);Ad=td[0];Be=td[1];if(Ad!==zc[0]||Be!==zc[1])R.sampleCoverage(Ad,Be),zc[0]=Ad,zc[1]=Be;Vd=ab.stencil_mask;Vd!==W.stencil_mask&&(R.stencilMask(Vd),W.stencil_mask=Vd);Wd=ha[0];ae=ha[1];Yd=ha[2];if(Wd!==Ha[0]||ae!==Ha[1]||Yd!==Ha[2])R.stencilFunc(Wd,ae,Yd),Ha[0]=Wd,Ha[1]=ae,Ha[2]=Yd;qd=Vc[0];nd=Vc[1];vd=Vc[2];bd=Vc[3];if(qd!==L[0]||nd!==L[1]||vd!==L[2]||bd!==L[3])R.stencilOpSeparate(qd,nd,vd,bd),L[0]=qd,L[1]=
nd,L[2]=vd,L[3]=bd;sd=ub[0];Tc=ub[1];Dd=ub[2];Nc=ub[3];if(sd!==Pc[0]||Tc!==Pc[1]||Dd!==Pc[2]||Nc!==Pc[3])R.stencilOpSeparate(sd,Tc,Dd,Nc),Pc[0]=sd,Pc[1]=Tc,Pc[2]=Dd,Pc[3]=Nc}R.blendColor(0,0,0,0);Da[0]=0;Da[1]=0;Da[2]=0;Da[3]=0;R.enable(3042);W.blend_enable=!0;R.blendEquationSeparate(32774,32774);nb[0]=32774;nb[1]=32774;R.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;R.enable(3089);W.scissor_enable=!0;R.disable(2960);W.stencil_enable=!1;if(a=W.profile)f=performance.now(),c.count+=
e;R.useProgram(u.program);n=T.angle_instanced_arrays;var Ic,rc,gb,hd,Ib;na.setVAO(null);Ic=ba.location;rc=Db[Ic];rc.buffer||R.enableVertexAttribArray(Ic);if(5126!==rc.type||1!==rc.size||rc.buffer!==m||!1!==rc.normalized||0!==rc.offset||8!==rc.stride)R.bindBuffer(34962,m.buffer),R.vertexAttribPointer(Ic,1,5126,!1,8,0),rc.type=5126,rc.size=1,rc.buffer=m,rc.normalized=!1,rc.offset=0,rc.stride=8;0!==rc.divisor&&(n.vertexAttribDivisorANGLE(Ic,0),rc.divisor=0);gb=I.location;hd=Db[gb];hd.buffer||R.enableVertexAttribArray(gb);
if(5126!==hd.type||1!==hd.size||hd.buffer!==l||!1!==hd.normalized||4!==hd.offset||8!==hd.stride)R.bindBuffer(34962,l.buffer),R.vertexAttribPointer(gb,1,5126,!1,8,4),hd.type=5126,hd.size=1,hd.buffer=l,hd.normalized=!1,hd.offset=4,hd.stride=8;0!==hd.divisor&&(n.vertexAttribDivisorANGLE(gb,0),hd.divisor=0);(Ib=Q.elements)?R.bindBuffer(34963,Ib.buffer.buffer):na.currentVAO&&(Ib=M.getElements(na.currentVAO.elements))&&R.bindBuffer(34963,Ib.buffer.buffer);for(k=0;k<e;++k){p=b[k];var oc,Xa,Qc,ac,lc,Id,rd,
Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,La,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd;oc=p.viewport;Xa=oc.x|0;Qc=oc.y|0;ac="width"in oc?oc.width|0:Oa.framebufferWidth-Xa;lc="height"in oc?oc.height|0:Oa.framebufferHeight-
Qc;Id=Oa.viewportWidth;Oa.viewportWidth=ac;rd=Oa.viewportHeight;Oa.viewportHeight=lc;R.viewport(Xa,Qc,ac,lc);ia[0]=Xa;ia[1]=Qc;ia[2]=ac;ia[3]=lc;(Fc=K.call(this,Oa,p,k))?R.enable(2929):R.disable(2929);W.depth_enable=Fc;dc=p.viewport;Cc=dc.x|0;Yc=dc.y|0;Zb="width"in dc?dc.width|0:Oa.framebufferWidth-Cc;Gc="height"in dc?dc.height|0:Oa.framebufferHeight-Yc;R.scissor(Cc,Yc,Zb,Gc);P[0]=Cc;P[1]=Yc;P[2]=Zb;P[3]=Gc;Y.buffer=p.positionBuffer;Ya=!1;Ea=null;ud=0;Jb=!1;Vb=Ua=0;cb=1;Dc=0;Xb=5126;w=Sb=jc=La=0;
Hb(Y)?(Ya=!0,Ea=ea.createStream(34962,Y),Xb=Ea.dtype):(Ea=ea.getBuffer(Y))?Xb=Ea.dtype:"constant"in Y?(cb=2,"number"===typeof Y.constant?(jc=Y.constant,Sb=w=La=0):(jc=0<Y.constant.length?Y.constant[0]:0,Sb=1<Y.constant.length?Y.constant[1]:0,w=2<Y.constant.length?Y.constant[2]:0,La=3<Y.constant.length?Y.constant[3]:0)):(Ea=Hb(Y.buffer)?ea.createStream(34962,Y.buffer):ea.getBuffer(Y.buffer),Xb="type"in Y?ua[Y.type]:Ea.dtype,Jb=!!Y.normalized,Vb=Y.size|0,Ua=Y.offset|0,Dc=Y.stride|0,ud=Y.divisor|0);
Tb=U.location;Pa=Db[Tb];if(1===cb){Pa.buffer||R.enableVertexAttribArray(Tb);pb=Vb||2;if(Pa.type!==Xb||Pa.size!==pb||Pa.buffer!==Ea||Pa.normalized!==Jb||Pa.offset!==Ua||Pa.stride!==Dc)R.bindBuffer(34962,Ea.buffer),R.vertexAttribPointer(Tb,pb,Xb,Jb,Dc,Ua),Pa.type=Xb,Pa.size=pb,Pa.buffer=Ea,Pa.normalized=Jb,Pa.offset=Ua,Pa.stride=Dc;Pa.divisor!==ud&&(n.vertexAttribDivisorANGLE(Tb,ud),Pa.divisor=ud)}else if(Pa.buffer&&(R.disableVertexAttribArray(Tb),Pa.buffer=null),Pa.x!==jc||Pa.y!==Sb||Pa.z!==w||Pa.w!==
La)R.vertexAttrib4f(Tb,jc,Sb,w,La),Pa.x=jc,Pa.y=Sb,Pa.z=w,Pa.w=La;ta.buffer=p.positionBuffer;vb=!1;hb=null;Qa=0;Oc=!1;jd=Yb=0;db=1;pc=0;Zc=5126;va=kb=jb=mc=0;Hb(ta)?(vb=!0,hb=ea.createStream(34962,ta),Zc=hb.dtype):(hb=ea.getBuffer(ta))?Zc=hb.dtype:"constant"in ta?(db=2,"number"===typeof ta.constant?(jb=ta.constant,kb=va=mc=0):(jb=0<ta.constant.length?ta.constant[0]:0,kb=1<ta.constant.length?ta.constant[1]:0,va=2<ta.constant.length?ta.constant[2]:0,mc=3<ta.constant.length?ta.constant[3]:0)):(hb=Hb(ta.buffer)?
ea.createStream(34962,ta.buffer):ea.getBuffer(ta.buffer),Zc="type"in ta?ua[ta.type]:hb.dtype,Oc=!!ta.normalized,jd=ta.size|0,Yb=ta.offset|0,pc=ta.stride|0,Qa=ta.divisor|0);qb=H.location;ya=Db[qb];if(1===db){ya.buffer||R.enableVertexAttribArray(qb);Va=jd||2;if(ya.type!==Zc||ya.size!==Va||ya.buffer!==hb||ya.normalized!==Oc||ya.offset!==Yb||ya.stride!==pc)R.bindBuffer(34962,hb.buffer),R.vertexAttribPointer(qb,Va,Zc,Oc,pc,Yb),ya.type=Zc,ya.size=Va,ya.buffer=hb,ya.normalized=Oc,ya.offset=Yb,ya.stride=
pc;ya.divisor!==Qa&&(n.vertexAttribDivisorANGLE(qb,Qa),ya.divisor=Qa)}else if(ya.buffer&&(R.disableVertexAttribArray(qb),ya.buffer=null),ya.x!==jb||ya.y!==kb||ya.z!==va||ya.w!==mc)R.vertexAttrib4f(qb,jb,kb,va,mc),ya.x=jb,ya.y=kb,ya.z=va,ya.w=mc;fa.buffer=p.positionFractBuffer;bb=!1;Ba=null;eb=0;Na=!1;Ab=Bb=0;Ta=1;Hc=0;Kb=5126;Jd=wa=Ub=Mb=0;Hb(fa)?(bb=!0,Ba=ea.createStream(34962,fa),Kb=Ba.dtype):(Ba=ea.getBuffer(fa))?Kb=Ba.dtype:"constant"in fa?(Ta=2,"number"===typeof fa.constant?(Ub=fa.constant,wa=
Jd=Mb=0):(Ub=0<fa.constant.length?fa.constant[0]:0,wa=1<fa.constant.length?fa.constant[1]:0,Jd=2<fa.constant.length?fa.constant[2]:0,Mb=3<fa.constant.length?fa.constant[3]:0)):(Ba=Hb(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),Kb="type"in fa?ua[fa.type]:Ba.dtype,Na=!!fa.normalized,Ab=fa.size|0,Bb=fa.offset|0,Hc=fa.stride|0,eb=fa.divisor|0);Ma=v.location;Pb=Db[Ma];if(1===Ta){Pb.buffer||R.enableVertexAttribArray(Ma);fb=Ab||2;if(Pb.type!==Kb||Pb.size!==fb||Pb.buffer!==Ba||Pb.normalized!==
Na||Pb.offset!==Bb||Pb.stride!==Hc)R.bindBuffer(34962,Ba.buffer),R.vertexAttribPointer(Ma,fb,Kb,Na,Hc,Bb),Pb.type=Kb,Pb.size=fb,Pb.buffer=Ba,Pb.normalized=Na,Pb.offset=Bb,Pb.stride=Hc;Pb.divisor!==eb&&(n.vertexAttribDivisorANGLE(Ma,eb),Pb.divisor=eb)}else if(Pb.buffer&&(R.disableVertexAttribArray(Ma),Pb.buffer=null),Pb.x!==Ub||Pb.y!==wa||Pb.z!==Jd||Pb.w!==Mb)R.vertexAttrib4f(Ma,Ub,wa,Jd,Mb),Pb.x=Ub,Pb.y=wa,Pb.z=Jd,Pb.w=Mb;N.buffer=p.positionFractBuffer;ib=!1;xa=null;ec=0;Fa=!1;sb=rb=0;Za=1;$a=0;kc=
5126;Nb=Wa=tc=dd=0;Hb(N)?(ib=!0,xa=ea.createStream(34962,N),kc=xa.dtype):(xa=ea.getBuffer(N))?kc=xa.dtype:"constant"in N?(Za=2,"number"===typeof N.constant?(tc=N.constant,Wa=Nb=dd=0):(tc=0<N.constant.length?N.constant[0]:0,Wa=1<N.constant.length?N.constant[1]:0,Nb=2<N.constant.length?N.constant[2]:0,dd=3<N.constant.length?N.constant[3]:0)):(xa=Hb(N.buffer)?ea.createStream(34962,N.buffer):ea.getBuffer(N.buffer),kc="type"in N?ua[N.type]:xa.dtype,Fa=!!N.normalized,sb=N.size|0,rb=N.offset|0,$a=N.stride|
0,ec=N.divisor|0);$c=t.location;Ia=Db[$c];if(1===Za){Ia.buffer||R.enableVertexAttribArray($c);vc=sb||2;if(Ia.type!==kc||Ia.size!==vc||Ia.buffer!==xa||Ia.normalized!==Fa||Ia.offset!==rb||Ia.stride!==$a)R.bindBuffer(34962,xa.buffer),R.vertexAttribPointer($c,vc,kc,Fa,$a,rb),Ia.type=kc,Ia.size=vc,Ia.buffer=xa,Ia.normalized=Fa,Ia.offset=rb,Ia.stride=$a;Ia.divisor!==ec&&(n.vertexAttribDivisorANGLE($c,ec),Ia.divisor=ec)}else if(Ia.buffer&&(R.disableVertexAttribArray($c),Ia.buffer=null),Ia.x!==tc||Ia.y!==
Wa||Ia.z!==Nb||Ia.w!==dd)R.vertexAttrib4f($c,tc,Wa,Nb,dd),Ia.x=tc,Ia.y=Wa,Ia.z=Nb,Ia.w=dd;G.buffer=p.colorBuffer;Ra=!1;Ca=null;lb=0;wb=!1;tb=Cb=0;uc=1;xb=0;wd=5126;ed=Jc=Ed=sc=0;Hb(G)?(Ra=!0,Ca=ea.createStream(34962,G),wd=Ca.dtype):(Ca=ea.getBuffer(G))?wd=Ca.dtype:"constant"in G?(uc=2,"number"===typeof G.constant?(Ed=G.constant,Jc=ed=sc=0):(Ed=0<G.constant.length?G.constant[0]:0,Jc=1<G.constant.length?G.constant[1]:0,ed=2<G.constant.length?G.constant[2]:0,sc=3<G.constant.length?G.constant[3]:0)):
(Ca=Hb(G.buffer)?ea.createStream(34962,G.buffer):ea.getBuffer(G.buffer),wd="type"in G?ua[G.type]:Ca.dtype,wb=!!G.normalized,tb=G.size|0,Cb=G.offset|0,xb=G.stride|0,lb=G.divisor|0);fd=sa.location;Wb=Db[fd];if(1===uc){Wb.buffer||R.enableVertexAttribArray(fd);bc=tb||4;if(Wb.type!==wd||Wb.size!==bc||Wb.buffer!==Ca||Wb.normalized!==wb||Wb.offset!==Cb||Wb.stride!==xb)R.bindBuffer(34962,Ca.buffer),R.vertexAttribPointer(fd,bc,wd,wb,xb,Cb),Wb.type=wd,Wb.size=bc,Wb.buffer=Ca,Wb.normalized=wb,Wb.offset=Cb,Wb.stride=
xb;Wb.divisor!==lb&&(n.vertexAttribDivisorANGLE(fd,lb),Wb.divisor=lb)}else if(Wb.buffer&&(R.disableVertexAttribArray(fd),Wb.buffer=null),Wb.x!==Ed||Wb.y!==Jc||Wb.z!==ed||Wb.w!==sc)R.vertexAttrib4f(fd,Ed,Jc,ed,sc),Wb.x=Ed,Wb.y=Jc,Wb.z=ed,Wb.w=sc;Qb=p.scale;Ja=Qb[0];mb=Qb[1];k&&$b===Ja&&yb===mb||($b=Ja,yb=mb,R.uniform2f(J.location,Ja,mb));Ob=p.scaleFract;Rb=Ob[0];hc=Ob[1];k&&fc===Rb&&Ze===hc||(fc=Rb,Ze=hc,R.uniform2f(ja.location,Rb,hc));xc=p.translate;yc=xc[0];Kc=xc[1];k&&Ac===yc&&ad===Kc||(Ac=yc,ad=
Kc,R.uniform2f(ka.location,yc,Kc));Rc=p.translateFract;Lc=Rc[0];Eb=Rc[1];k&&Lb===Lc&&Mc===Eb||(Lb=Lc,Mc=Eb,R.uniform2f(ma.location,Lc,Eb));Ec=p.thickness;k&&Sc===Ec||(Sc=Ec,R.uniform1f(Z.location,Ec));gc=p.depth;k&&Wc===gc||(Wc=gc,R.uniform1f(z.location,gc));gd=x.call(this,Oa,p,k);kd=gd[0];Xc=gd[1];Zd=gd[2];se=gd[3];k&&md===kd&&bf===Xc&&ke===Zd&&me===se||(md=kd,bf=Xc,ke=Zd,me=se,R.uniform4f(Sa.location,kd,Xc,Zd,se));Md=p.dashLength;k&&Kd===Md||(Kd=Md,R.uniform1f(O.location,Md));id=p.opacity;k&&Bc===
id||(Bc=id,R.uniform1f(V.location,id));(od=p.dashTexture)&&"framebuffer"===od._reglType&&(od=od.color[0]);ld=od._texture;R.uniform1i(oa.location,ld.bind());cd=p.count;0<cd?Ib?n.drawElementsInstancedANGLE(5,4,Ib.type,0<<(Ib.type-5121>>1),cd):n.drawArraysInstancedANGLE(5,0,4,cd):0>cd&&(Ib?R.drawElements(5,4,Ib.type,0<<(Ib.type-5121>>1)):R.drawArrays(5,0,4));Oa.viewportWidth=Id;Oa.viewportHeight=rd;Ya&&ea.destroyStream(Ea);vb&&ea.destroyStream(hb);bb&&ea.destroyStream(Ba);ib&&ea.destroyStream(xa);Ra&&
ea.destroyStream(Ca);ld.unbind()}W.dirty=!0;na.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(b){var e,g,a,n,k,p,r,q,u,y,B,x,K,C,F,aa,S,da,Ga,La,Gd,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb,hd,Ib,oc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ye,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb;e=pa.next;e!==pa.cur&&(e?R.bindFramebuffer(36160,e.framebuffer):R.bindFramebuffer(36160,
null),pa.cur=e);if(W.dirty){var sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb;sb=ab.dither;sb!==W.dither&&(sb?R.enable(3024):R.disable(3024),W.dither=sb);Za=ab.depth_func;Za!==W.depth_func&&(R.depthFunc(Za),W.depth_func=Za);$a=ra[0];kc=ra[1];if($a!==cc[0]||kc!==cc[1])R.depthRange($a,kc),cc[0]=$a,cc[1]=kc;dd=ab.depth_mask;dd!==W.depth_mask&&(R.depthMask(dd),W.depth_mask=dd);tc=ob[0];Wa=ob[1];Nb=ob[2];$c=ob[3];if(tc!==ga[0]||Wa!==ga[1]||Nb!==ga[2]||
$c!==ga[3])R.colorMask(tc,Wa,Nb,$c),ga[0]=tc,ga[1]=Wa,ga[2]=Nb,ga[3]=$c;Ia=ab.cull_enable;Ia!==W.cull_enable&&(Ia?R.enable(2884):R.disable(2884),W.cull_enable=Ia);vc=ab.cull_face;vc!==W.cull_face&&(R.cullFace(vc),W.cull_face=vc);Ra=ab.frontFace;Ra!==W.frontFace&&(R.frontFace(Ra),W.frontFace=Ra);Ca=ab.lineWidth;Ca!==W.lineWidth&&(R.lineWidth(Ca),W.lineWidth=Ca);lb=ab.polygonOffset_enable;lb!==W.polygonOffset_enable&&(lb?R.enable(32823):R.disable(32823),W.polygonOffset_enable=lb);wb=qc[0];Cb=qc[1];
if(wb!==ic[0]||Cb!==ic[1])R.polygonOffset(wb,Cb),ic[0]=wb,ic[1]=Cb;tb=ab.sample_alpha;tb!==W.sample_alpha&&(tb?R.enable(32926):R.disable(32926),W.sample_alpha=tb);uc=ab.sample_enable;uc!==W.sample_enable&&(uc?R.enable(32928):R.disable(32928),W.sample_enable=uc);xb=td[0];wd=td[1];if(xb!==zc[0]||wd!==zc[1])R.sampleCoverage(xb,wd),zc[0]=xb,zc[1]=wd;sc=ab.stencil_mask;sc!==W.stencil_mask&&(R.stencilMask(sc),W.stencil_mask=sc);Ed=ha[0];Jc=ha[1];ed=ha[2];if(Ed!==Ha[0]||Jc!==Ha[1]||ed!==Ha[2])R.stencilFunc(Ed,
Jc,ed),Ha[0]=Ed,Ha[1]=Jc,Ha[2]=ed;fd=Vc[0];Wb=Vc[1];bc=Vc[2];Qb=Vc[3];if(fd!==L[0]||Wb!==L[1]||bc!==L[2]||Qb!==L[3])R.stencilOpSeparate(fd,Wb,bc,Qb),L[0]=fd,L[1]=Wb,L[2]=bc,L[3]=Qb;Ja=ub[0];$b=ub[1];mb=ub[2];yb=ub[3];if(Ja!==Pc[0]||$b!==Pc[1]||mb!==Pc[2]||yb!==Pc[3])R.stencilOpSeparate(Ja,$b,mb,yb),Pc[0]=Ja,Pc[1]=$b,Pc[2]=mb,Pc[3]=yb}g=b.viewport;a=g.x|0;n=g.y|0;k="width"in g?g.width|0:Oa.framebufferWidth-a;p="height"in g?g.height|0:Oa.framebufferHeight-n;r=Oa.viewportWidth;Oa.viewportWidth=k;q=Oa.viewportHeight;
Oa.viewportHeight=p;R.viewport(a,n,k,p);ia[0]=a;ia[1]=n;ia[2]=k;ia[3]=p;R.blendColor(0,0,0,0);Da[0]=0;Da[1]=0;Da[2]=0;Da[3]=0;R.enable(3042);W.blend_enable=!0;R.blendEquationSeparate(32774,32774);nb[0]=32774;nb[1]=32774;R.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;(u=d.call(this,Oa,b,0))?R.enable(2929):R.disable(2929);W.depth_enable=u;y=b.viewport;B=y.x|0;x=y.y|0;K="width"in y?y.width|0:Oa.framebufferWidth-B;C="height"in y?y.height|0:Oa.framebufferHeight-x;R.scissor(B,x,K,
C);P[0]=B;P[1]=x;P[2]=K;P[3]=C;R.enable(3089);W.scissor_enable=!0;R.disable(2960);W.stencil_enable=!1;if(F=W.profile)aa=performance.now(),c.count++;R.useProgram(h.program);S=T.angle_instanced_arrays;na.setVAO(null);Y.buffer=b.positionBuffer;da=!1;Ga=null;La=0;Gd=!1;xe=zd=0;Me=1;Qe=0;Ad=5126;ae=Wd=Vd=Be=0;Hb(Y)?(da=!0,Ga=ea.createStream(34962,Y),Ad=Ga.dtype):(Ga=ea.getBuffer(Y))?Ad=Ga.dtype:"constant"in Y?(Me=2,"number"===typeof Y.constant?(Vd=Y.constant,Wd=ae=Be=0):(Vd=0<Y.constant.length?Y.constant[0]:
0,Wd=1<Y.constant.length?Y.constant[1]:0,ae=2<Y.constant.length?Y.constant[2]:0,Be=3<Y.constant.length?Y.constant[3]:0)):(Ga=Hb(Y.buffer)?ea.createStream(34962,Y.buffer):ea.getBuffer(Y.buffer),Ad="type"in Y?ua[Y.type]:Ga.dtype,Gd=!!Y.normalized,xe=Y.size|0,zd=Y.offset|0,Qe=Y.stride|0,La=Y.divisor|0);Yd=U.location;qd=Db[Yd];if(1===Me){qd.buffer||R.enableVertexAttribArray(Yd);nd=xe||2;if(qd.type!==Ad||qd.size!==nd||qd.buffer!==Ga||qd.normalized!==Gd||qd.offset!==zd||qd.stride!==Qe)R.bindBuffer(34962,
Ga.buffer),R.vertexAttribPointer(Yd,nd,Ad,Gd,Qe,zd),qd.type=Ad,qd.size=nd,qd.buffer=Ga,qd.normalized=Gd,qd.offset=zd,qd.stride=Qe;qd.divisor!==La&&(S.vertexAttribDivisorANGLE(Yd,La),qd.divisor=La)}else if(qd.buffer&&(R.disableVertexAttribArray(Yd),qd.buffer=null),qd.x!==Vd||qd.y!==Wd||qd.z!==ae||qd.w!==Be)R.vertexAttrib4f(Yd,Vd,Wd,ae,Be),qd.x=Vd,qd.y=Wd,qd.z=ae,qd.w=Be;ta.buffer=b.positionBuffer;vd=!1;bd=null;sd=0;Tc=!1;Nc=Dd=0;Ic=1;rc=0;gb=5126;Xa=oc=Ib=hd=0;Hb(ta)?(vd=!0,bd=ea.createStream(34962,
ta),gb=bd.dtype):(bd=ea.getBuffer(ta))?gb=bd.dtype:"constant"in ta?(Ic=2,"number"===typeof ta.constant?(Ib=ta.constant,oc=Xa=hd=0):(Ib=0<ta.constant.length?ta.constant[0]:0,oc=1<ta.constant.length?ta.constant[1]:0,Xa=2<ta.constant.length?ta.constant[2]:0,hd=3<ta.constant.length?ta.constant[3]:0)):(bd=Hb(ta.buffer)?ea.createStream(34962,ta.buffer):ea.getBuffer(ta.buffer),gb="type"in ta?ua[ta.type]:bd.dtype,Tc=!!ta.normalized,Nc=ta.size|0,Dd=ta.offset|0,rc=ta.stride|0,sd=ta.divisor|0);Qc=H.location;
ac=Db[Qc];if(1===Ic){ac.buffer||R.enableVertexAttribArray(Qc);lc=Nc||2;if(ac.type!==gb||ac.size!==lc||ac.buffer!==bd||ac.normalized!==Tc||ac.offset!==Dd||ac.stride!==rc)R.bindBuffer(34962,bd.buffer),R.vertexAttribPointer(Qc,lc,gb,Tc,rc,Dd),ac.type=gb,ac.size=lc,ac.buffer=bd,ac.normalized=Tc,ac.offset=Dd,ac.stride=rc;ac.divisor!==sd&&(S.vertexAttribDivisorANGLE(Qc,sd),ac.divisor=sd)}else if(ac.buffer&&(R.disableVertexAttribArray(Qc),ac.buffer=null),ac.x!==Ib||ac.y!==oc||ac.z!==Xa||ac.w!==hd)R.vertexAttrib4f(Qc,
Ib,oc,Xa,hd),ac.x=Ib,ac.y=oc,ac.z=Xa,ac.w=hd;fa.buffer=b.positionFractBuffer;Id=!1;rd=null;Fc=0;dc=!1;Yc=Cc=0;Zb=1;Gc=0;Ya=5126;Ua=Jb=ud=Ea=0;Hb(fa)?(Id=!0,rd=ea.createStream(34962,fa),Ya=rd.dtype):(rd=ea.getBuffer(fa))?Ya=rd.dtype:"constant"in fa?(Zb=2,"number"===typeof fa.constant?(ud=fa.constant,Jb=Ua=Ea=0):(ud=0<fa.constant.length?fa.constant[0]:0,Jb=1<fa.constant.length?fa.constant[1]:0,Ua=2<fa.constant.length?fa.constant[2]:0,Ea=3<fa.constant.length?fa.constant[3]:0)):(rd=Hb(fa.buffer)?ea.createStream(34962,
fa.buffer):ea.getBuffer(fa.buffer),Ya="type"in fa?ua[fa.type]:rd.dtype,dc=!!fa.normalized,Yc=fa.size|0,Cc=fa.offset|0,Gc=fa.stride|0,Fc=fa.divisor|0);Vb=v.location;cb=Db[Vb];if(1===Zb){cb.buffer||R.enableVertexAttribArray(Vb);Dc=Yc||2;if(cb.type!==Ya||cb.size!==Dc||cb.buffer!==rd||cb.normalized!==dc||cb.offset!==Cc||cb.stride!==Gc)R.bindBuffer(34962,rd.buffer),R.vertexAttribPointer(Vb,Dc,Ya,dc,Gc,Cc),cb.type=Ya,cb.size=Dc,cb.buffer=rd,cb.normalized=dc,cb.offset=Cc,cb.stride=Gc;cb.divisor!==Fc&&(S.vertexAttribDivisorANGLE(Vb,
Fc),cb.divisor=Fc)}else if(cb.buffer&&(R.disableVertexAttribArray(Vb),cb.buffer=null),cb.x!==ud||cb.y!==Jb||cb.z!==Ua||cb.w!==Ea)R.vertexAttrib4f(Vb,ud,Jb,Ua,Ea),cb.x=ud,cb.y=Jb,cb.z=Ua,cb.w=Ea;N.buffer=b.positionFractBuffer;Xb=!1;ye=null;jc=0;Sb=!1;Tb=w=0;Pa=1;pb=0;vb=5126;Yb=Oc=Qa=hb=0;Hb(N)?(Xb=!0,ye=ea.createStream(34962,N),vb=ye.dtype):(ye=ea.getBuffer(N))?vb=ye.dtype:"constant"in N?(Pa=2,"number"===typeof N.constant?(Qa=N.constant,Oc=Yb=hb=0):(Qa=0<N.constant.length?N.constant[0]:0,Oc=1<N.constant.length?
N.constant[1]:0,Yb=2<N.constant.length?N.constant[2]:0,hb=3<N.constant.length?N.constant[3]:0)):(ye=Hb(N.buffer)?ea.createStream(34962,N.buffer):ea.getBuffer(N.buffer),vb="type"in N?ua[N.type]:ye.dtype,Sb=!!N.normalized,Tb=N.size|0,w=N.offset|0,pb=N.stride|0,jc=N.divisor|0);jd=t.location;db=Db[jd];if(1===Pa){db.buffer||R.enableVertexAttribArray(jd);pc=Tb||2;if(db.type!==vb||db.size!==pc||db.buffer!==ye||db.normalized!==Sb||db.offset!==w||db.stride!==pb)R.bindBuffer(34962,ye.buffer),R.vertexAttribPointer(jd,
pc,vb,Sb,pb,w),db.type=vb,db.size=pc,db.buffer=ye,db.normalized=Sb,db.offset=w,db.stride=pb;db.divisor!==jc&&(S.vertexAttribDivisorANGLE(jd,jc),db.divisor=jc)}else if(db.buffer&&(R.disableVertexAttribArray(jd),db.buffer=null),db.x!==Qa||db.y!==Oc||db.z!==Yb||db.w!==hb)R.vertexAttrib4f(jd,Qa,Oc,Yb,hb),db.x=Qa,db.y=Oc,db.z=Yb,db.w=hb;G.buffer=b.colorBuffer;Zc=!1;mc=null;jb=0;kb=!1;qb=va=0;ya=1;Va=0;bb=5126;Bb=Na=eb=Ba=0;Hb(G)?(Zc=!0,mc=ea.createStream(34962,G),bb=mc.dtype):(mc=ea.getBuffer(G))?bb=mc.dtype:
"constant"in G?(ya=2,"number"===typeof G.constant?(eb=G.constant,Na=Bb=Ba=0):(eb=0<G.constant.length?G.constant[0]:0,Na=1<G.constant.length?G.constant[1]:0,Bb=2<G.constant.length?G.constant[2]:0,Ba=3<G.constant.length?G.constant[3]:0)):(mc=Hb(G.buffer)?ea.createStream(34962,G.buffer):ea.getBuffer(G.buffer),bb="type"in G?ua[G.type]:mc.dtype,kb=!!G.normalized,qb=G.size|0,va=G.offset|0,Va=G.stride|0,jb=G.divisor|0);Ab=sa.location;Ta=Db[Ab];if(1===ya){Ta.buffer||R.enableVertexAttribArray(Ab);Hc=qb||4;
if(Ta.type!==bb||Ta.size!==Hc||Ta.buffer!==mc||Ta.normalized!==kb||Ta.offset!==va||Ta.stride!==Va)R.bindBuffer(34962,mc.buffer),R.vertexAttribPointer(Ab,Hc,bb,kb,Va,va),Ta.type=bb,Ta.size=Hc,Ta.buffer=mc,Ta.normalized=kb,Ta.offset=va,Ta.stride=Va;Ta.divisor!==jb&&(S.vertexAttribDivisorANGLE(Ab,jb),Ta.divisor=jb)}else if(Ta.buffer&&(R.disableVertexAttribArray(Ab),Ta.buffer=null),Ta.x!==eb||Ta.y!==Na||Ta.z!==Bb||Ta.w!==Ba)R.vertexAttrib4f(Ab,eb,Na,Bb,Ba),Ta.x=eb,Ta.y=Na,Ta.z=Bb,Ta.w=Ba;Kb=ba.location;
Mb=Db[Kb];Mb.buffer||R.enableVertexAttribArray(Kb);if(5126!==Mb.type||1!==Mb.size||Mb.buffer!==m||!1!==Mb.normalized||0!==Mb.offset||8!==Mb.stride)R.bindBuffer(34962,m.buffer),R.vertexAttribPointer(Kb,1,5126,!1,8,0),Mb.type=5126,Mb.size=1,Mb.buffer=m,Mb.normalized=!1,Mb.offset=0,Mb.stride=8;0!==Mb.divisor&&(S.vertexAttribDivisorANGLE(Kb,0),Mb.divisor=0);Ub=I.location;wa=Db[Ub];wa.buffer||R.enableVertexAttribArray(Ub);if(5126!==wa.type||1!==wa.size||wa.buffer!==l||!1!==wa.normalized||4!==wa.offset||
8!==wa.stride)R.bindBuffer(34962,l.buffer),R.vertexAttribPointer(Ub,1,5126,!1,8,4),wa.type=5126,wa.size=1,wa.buffer=l,wa.normalized=!1,wa.offset=4,wa.stride=8;0!==wa.divisor&&(S.vertexAttribDivisorANGLE(Ub,0),wa.divisor=0);Jd=b.scale;R.uniform2f(J.location,Jd[0],Jd[1]);Ma=b.scaleFract;R.uniform2f(ja.location,Ma[0],Ma[1]);Pb=b.translate;R.uniform2f(ka.location,Pb[0],Pb[1]);fb=b.translateFract;R.uniform2f(ma.location,fb[0],fb[1]);R.uniform1f(Z.location,b.thickness);R.uniform1f(z.location,b.depth);ib=
f.call(this,Oa,b,0);R.uniform4f(Sa.location,ib[0],ib[1],ib[2],ib[3]);R.uniform1f(O.location,b.dashLength);R.uniform1f(V.location,b.opacity);(xa=b.dashTexture)&&"framebuffer"===xa._reglType&&(xa=xa.color[0]);ec=xa._texture;R.uniform1i(oa.location,ec.bind());(Fa=Q.elements)?R.bindBuffer(34963,Fa.buffer.buffer):na.currentVAO&&(Fa=M.getElements(na.currentVAO.elements))&&R.bindBuffer(34963,Fa.buffer.buffer);rb=b.count;0<rb?Fa?S.drawElementsInstancedANGLE(5,4,Fa.type,0<<(Fa.type-5121>>1),rb):S.drawArraysInstancedANGLE(5,
0,4,rb):0>rb&&(Fa?R.drawElements(5,4,Fa.type,0<<(Fa.type-5121>>1)):R.drawArrays(5,0,4));W.dirty=!0;na.setVAO(null);Oa.viewportWidth=r;Oa.viewportHeight=q;F&&(c.cpuTime+=performance.now()-aa);da&&ea.destroyStream(Ga);vd&&ea.destroyStream(bd);Id&&ea.destroyStream(rd);Xb&&ea.destroyStream(ye);Zc&&ea.destroyStream(mc);ec.unbind()},scope:function(a,f,d){var u,h,x,K,v,D,U,A,H,t,z,la,P,I,O,L,sa,M,J,R,T,oa,X,ha,V,ba,ia,Z,ga,na,qc,ka,Ha,pa,ra,td,Nc,Ic,rc,gb,zc,Ib,oc,Xa,ja,ac,lc,ub,Pc,Fc,dc,Cc,Yc,Zb,Gc,Ya,
Ea,cc,Jb,Ua,Vb,cb,Da,Xb,ma,ic,Sb,w,Tb,Pa,pb,vb,hb,Qa,Sa,Yb,ob,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Vc,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,nb,sc,Db,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe;u=a.viewport;
h=u.x|0;x=u.y|0;K="width"in u?u.width|0:Oa.framebufferWidth-h;v="height"in u?u.height|0:Oa.framebufferHeight-x;D=Oa.viewportWidth;Oa.viewportWidth=K;U=Oa.viewportHeight;Oa.viewportHeight=v;A=F[0];F[0]=h;H=F[1];F[1]=x;t=F[2];F[2]=K;z=F[3];F[3]=v;la=da[0];da[0]=0;P=da[1];da[1]=0;I=da[2];da[2]=0;O=da[3];da[3]=0;L=ab.blend_enable;ab.blend_enable=!0;sa=Ga[0];Ga[0]=32774;M=Ga[1];Ga[1]=32774;J=La[0];La[0]=770;R=La[1];La[1]=771;T=La[2];La[2]=773;oa=La[3];La[3]=1;X=k.call(this,Oa,a,d);ha=ab.depth_enable;ab.depth_enable=
X;V=a.viewport;ba=V.x|0;ia=V.y|0;Z="width"in V?V.width|0:Oa.framebufferWidth-ba;ga="height"in V?V.height|0:Oa.framebufferHeight-ia;na=aa[0];aa[0]=ba;qc=aa[1];aa[1]=ia;ka=aa[2];aa[2]=Z;Ha=aa[3];aa[3]=ga;pa=ab.scissor_enable;ab.scissor_enable=!0;ra=ab.stencil_enable;ab.stencil_enable=!1;if(td=W.profile)Nc=performance.now(),c.count++;Ic=Q.offset;Q.offset=0;rc=Q.count;Q.count=4;gb=a.count;zc=Q.instances;Q.instances=gb;Ib=Q.primitive;Q.primitive=5;oc=a.dashLength;Xa=C[23];C[23]=oc;ja=a.dashTexture;ac=
C[24];C[24]=ja;lc=a.depth;ub=C[22];C[22]=lc;Pc=a.id;Fc=C[31];C[31]=Pc;dc=a.miterLimit;Cc=C[32];C[32]=dc;Yc=b.call(this,Oa,a,d);Zb=C[33];C[33]=Yc;Gc=a.opacity;Ya=C[10];C[10]=Gc;Ea=Oa.pixelRatio;cc=C[34];C[34]=Ea;Jb=a.scale;Ua=C[6];C[6]=Jb;Vb=a.scaleFract;cb=C[7];C[7]=Vb;Da=a.thickness;Xb=C[21];C[21]=Da;ma=a.translate;ic=C[8];C[8]=ma;Sb=a.translateFract;w=C[9];C[9]=Sb;Tb=q.call(this,Oa,a,d);Pa=C[3];C[3]=Tb;Y.buffer=a.positionBuffer;pb=!1;vb=null;hb=0;Qa=!1;Yb=Sa=0;ob=1;db=0;pc=5126;kb=jb=mc=Zc=0;Hb(Y)?
(pb=!0,vb=ea.createStream(34962,Y),pc=vb.dtype):(vb=ea.getBuffer(Y))?pc=vb.dtype:"constant"in Y?(ob=2,"number"===typeof Y.constant?(mc=Y.constant,jb=kb=Zc=0):(mc=0<Y.constant.length?Y.constant[0]:0,jb=1<Y.constant.length?Y.constant[1]:0,kb=2<Y.constant.length?Y.constant[2]:0,Zc=3<Y.constant.length?Y.constant[3]:0)):(vb=Hb(Y.buffer)?ea.createStream(34962,Y.buffer):ea.getBuffer(Y.buffer),pc="type"in Y?ua[Y.type]:vb.dtype,Qa=!!Y.normalized,Yb=Y.size|0,Sa=Y.offset|0,db=Y.stride|0,hb=Y.divisor|0);va=B.buffer;
B.buffer=vb;qb=B.divisor;B.divisor=hb;ya=B.normalized;B.normalized=Qa;Va=B.offset;B.offset=Sa;bb=B.size;B.size=Yb;Ba=B.state;B.state=ob;eb=B.stride;B.stride=db;Na=B.type;B.type=pc;Bb=B.w;B.w=Zc;Ab=B.x;B.x=mc;Ta=B.y;B.y=jb;Hc=B.z;B.z=kb;fa.buffer=a.positionFractBuffer;Kb=!1;Mb=null;Ub=0;wa=!1;Ma=Vc=0;Pb=1;fb=0;ib=5126;rb=Fa=ec=xa=0;Hb(fa)?(Kb=!0,Mb=ea.createStream(34962,fa),ib=Mb.dtype):(Mb=ea.getBuffer(fa))?ib=Mb.dtype:"constant"in fa?(Pb=2,"number"===typeof fa.constant?(ec=fa.constant,Fa=rb=xa=0):
(ec=0<fa.constant.length?fa.constant[0]:0,Fa=1<fa.constant.length?fa.constant[1]:0,rb=2<fa.constant.length?fa.constant[2]:0,xa=3<fa.constant.length?fa.constant[3]:0)):(Mb=Hb(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),ib="type"in fa?ua[fa.type]:Mb.dtype,wa=!!fa.normalized,Ma=fa.size|0,Vc=fa.offset|0,fb=fa.stride|0,Ub=fa.divisor|0);sb=y.buffer;y.buffer=Mb;Za=y.divisor;y.divisor=Ub;$a=y.normalized;y.normalized=wa;kc=y.offset;y.offset=Vc;dd=y.size;y.size=Ma;tc=y.state;y.state=
Pb;Wa=y.stride;y.stride=fb;Nb=y.type;y.type=ib;$c=y.w;y.w=xa;Ia=y.x;y.x=ec;vc=y.y;y.y=Fa;Ra=y.z;y.z=rb;ta.buffer=a.positionBuffer;Ca=!1;lb=null;wb=0;Cb=!1;uc=tb=0;xb=1;nb=0;sc=5126;fd=ed=Jc=Db=0;Hb(ta)?(Ca=!0,lb=ea.createStream(34962,ta),sc=lb.dtype):(lb=ea.getBuffer(ta))?sc=lb.dtype:"constant"in ta?(xb=2,"number"===typeof ta.constant?(Jc=ta.constant,ed=fd=Db=0):(Jc=0<ta.constant.length?ta.constant[0]:0,ed=1<ta.constant.length?ta.constant[1]:0,fd=2<ta.constant.length?ta.constant[2]:0,Db=3<ta.constant.length?
ta.constant[3]:0)):(lb=Hb(ta.buffer)?ea.createStream(34962,ta.buffer):ea.getBuffer(ta.buffer),sc="type"in ta?ua[ta.type]:lb.dtype,Cb=!!ta.normalized,uc=ta.size|0,tb=ta.offset|0,nb=ta.stride|0,wb=ta.divisor|0);Wb=e.buffer;e.buffer=lb;bc=e.divisor;e.divisor=wb;Qb=e.normalized;e.normalized=Cb;Ja=e.offset;e.offset=tb;$b=e.size;e.size=uc;mb=e.state;e.state=xb;yb=e.stride;e.stride=nb;Ob=e.type;e.type=sc;Rb=e.w;e.w=Db;fc=e.x;e.x=Jc;hc=e.y;e.y=ed;Ze=e.z;e.z=fd;N.buffer=a.positionFractBuffer;xc=!1;yc=null;
Ac=0;Kc=!1;Rc=ad=0;Lc=1;Lb=0;Eb=5126;gc=Sc=Ec=Mc=0;Hb(N)?(xc=!0,yc=ea.createStream(34962,N),Eb=yc.dtype):(yc=ea.getBuffer(N))?Eb=yc.dtype:"constant"in N?(Lc=2,"number"===typeof N.constant?(Ec=N.constant,Sc=gc=Mc=0):(Ec=0<N.constant.length?N.constant[0]:0,Sc=1<N.constant.length?N.constant[1]:0,gc=2<N.constant.length?N.constant[2]:0,Mc=3<N.constant.length?N.constant[3]:0)):(yc=Hb(N.buffer)?ea.createStream(34962,N.buffer):ea.getBuffer(N.buffer),Eb="type"in N?ua[N.type]:yc.dtype,Kc=!!N.normalized,Rc=
N.size|0,ad=N.offset|0,Lb=N.stride|0,Ac=N.divisor|0);Wc=g.buffer;g.buffer=yc;gd=g.divisor;g.divisor=Ac;kd=g.normalized;g.normalized=Kc;md=g.offset;g.offset=ad;Xc=g.size;g.size=Rc;bf=g.state;g.state=Lc;Zd=g.stride;g.stride=Lb;ke=g.type;g.type=Eb;se=g.w;g.w=Mc;me=g.x;g.x=Ec;Md=g.y;g.y=Sc;Kd=g.z;g.z=gc;G.buffer=a.colorBuffer;id=!1;Bc=null;od=0;ld=!1;pd=cd=0;Fd=1;Hd=0;te=5126;fe=ne=Ae=ze=0;Hb(G)?(id=!0,Bc=ea.createStream(34962,G),te=Bc.dtype):(Bc=ea.getBuffer(G))?te=Bc.dtype:"constant"in G?(Fd=2,"number"===
typeof G.constant?(Ae=G.constant,ne=fe=ze=0):(Ae=0<G.constant.length?G.constant[0]:0,ne=1<G.constant.length?G.constant[1]:0,fe=2<G.constant.length?G.constant[2]:0,ze=3<G.constant.length?G.constant[3]:0)):(Bc=Hb(G.buffer)?ea.createStream(34962,G.buffer):ea.getBuffer(G.buffer),te="type"in G?ua[G.type]:Bc.dtype,ld=!!G.normalized,pd=G.size|0,cd=G.offset|0,Hd=G.stride|0,od=G.divisor|0);de=n.buffer;n.buffer=Bc;pe=n.divisor;n.divisor=od;be=n.normalized;n.normalized=ld;ie=n.offset;n.offset=cd;wc=n.size;n.size=
pd;Uc=n.state;n.state=Fd;qe=n.stride;n.stride=Hd;le=n.type;n.type=te;Ld=n.w;n.w=ze;Pd=n.x;n.x=Ae;Qd=n.y;n.y=ne;Rd=n.z;n.z=fe;je=p.buffer;p.buffer=m;vf=p.divisor;p.divisor=0;Ce=p.normalized;p.normalized=!1;oe=p.offset;p.offset=0;Re=p.size;p.size=0;Se=p.state;p.state=1;Ne=p.stride;p.stride=8;re=p.type;p.type=5126;Fe=p.w;p.w=0;He=p.x;p.x=0;Ie=p.y;p.y=0;Je=p.z;p.z=0;Ge=r.buffer;r.buffer=l;Nd=r.divisor;r.divisor=0;Ud=r.normalized;r.normalized=!1;$d=r.offset;r.offset=4;ce=r.size;r.size=0;Ke=r.state;r.state=
1;Bd=r.stride;r.stride=8;Sd=r.type;r.type=5126;De=r.w;r.w=0;Le=r.x;r.x=0;cf=r.y;r.y=0;af=r.z;r.z=0;Te=S.vert;S.vert=20;Oe=S.frag;S.frag=19;W.dirty=!0;f(Oa,a,d);Oa.viewportWidth=D;Oa.viewportHeight=U;F[0]=A;F[1]=H;F[2]=t;F[3]=z;da[0]=la;da[1]=P;da[2]=I;da[3]=O;ab.blend_enable=L;Ga[0]=sa;Ga[1]=M;La[0]=J;La[1]=R;La[2]=T;La[3]=oa;ab.depth_enable=ha;aa[0]=na;aa[1]=qc;aa[2]=ka;aa[3]=Ha;ab.scissor_enable=pa;ab.stencil_enable=ra;td&&(c.cpuTime+=performance.now()-Nc);Q.offset=Ic;Q.count=rc;Q.instances=zc;
Q.primitive=Ib;C[23]=Xa;C[24]=ac;C[22]=ub;C[31]=Fc;C[32]=Cc;C[33]=Zb;C[10]=Ya;C[34]=cc;C[6]=Ua;C[7]=cb;C[21]=Xb;C[8]=ic;C[9]=w;C[3]=Pa;pb&&ea.destroyStream(vb);B.buffer=va;B.divisor=qb;B.normalized=ya;B.offset=Va;B.size=bb;B.state=Ba;B.stride=eb;B.type=Na;B.w=Bb;B.x=Ab;B.y=Ta;B.z=Hc;Kb&&ea.destroyStream(Mb);y.buffer=sb;y.divisor=Za;y.normalized=$a;y.offset=kc;y.size=dd;y.state=tc;y.stride=Wa;y.type=Nb;y.w=$c;y.x=Ia;y.y=vc;y.z=Ra;Ca&&ea.destroyStream(lb);e.buffer=Wb;e.divisor=bc;e.normalized=Qb;e.offset=
Ja;e.size=$b;e.state=mb;e.stride=yb;e.type=Ob;e.w=Rb;e.x=fc;e.y=hc;e.z=Ze;xc&&ea.destroyStream(yc);g.buffer=Wc;g.divisor=gd;g.normalized=kd;g.offset=md;g.size=Xc;g.state=bf;g.stride=Zd;g.type=ke;g.w=se;g.x=me;g.y=Md;g.z=Kd;id&&ea.destroyStream(Bc);n.buffer=de;n.divisor=pe;n.normalized=be;n.offset=ie;n.size=wc;n.state=Uc;n.stride=qe;n.type=le;n.w=Ld;n.x=Pd;n.y=Qd;n.z=Rd;p.buffer=je;p.divisor=vf;p.normalized=Ce;p.offset=oe;p.size=Re;p.state=Se;p.stride=Ne;p.type=re;p.w=Fe;p.x=He;p.y=Ie;p.z=Je;r.buffer=
Ge;r.divisor=Nd;r.normalized=Ud;r.offset=$d;r.size=ce;r.state=Ke;r.stride=Bd;r.type=Sd;r.w=De;r.x=Le;r.y=cf;r.z=af;S.vert=Te;S.frag=Oe;W.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,c,d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,H,t,sa,O,oa,z,ba,I,V,J,ja,Z,ka,ma,Sa,Db,ea,Oa,W){var Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra,cc,qc,ic,td,zc,aa,P,ha,Ha,ub,Pc,Vc,
L,F,ia,ua,Y,fa,ta,N,G,ca,za,Aa,Ka,E;Q=a.attributes;M=a.buffer;T=a.context;pa=a.current;R=a.draw;Hb=a.elements;ab=a.extensions;S=a.framebuffer;C=a.gl;na=a.isBufferArgs;da=a.next;Da=a.shader;Ga=a.uniforms;nb=a.vao;La=da.blend_color;X=pa.blend_color;ob=da.blend_equation;ga=pa.blend_equation;ra=da.blend_func;cc=pa.blend_func;qc=da.colorMask;ic=pa.colorMask;td=da.depth_range;zc=pa.depth_range;aa=da.polygonOffset_offset;P=pa.polygonOffset_offset;ha=da.sample_coverage;Ha=pa.sample_coverage;ub=da.scissor_box;
Pc=pa.scissor_box;Vc=da.stencil_func;L=pa.stencil_func;F=da.stencil_opBack;ia=pa.stencil_opBack;ua=da.stencil_opFront;Y=pa.stencil_opFront;fa=da.viewport;ta=pa.viewport;N={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};G={divisor:1,offset:0,stride:4};ca={divisor:1,offset:8,stride:8};za={divisor:1,offset:4,stride:4};Aa={divisor:1,offset:16,stride:8};Ka={divisor:1,offset:24,stride:8};E={divisor:1,offset:0,stride:8};return{batch:function(b,e){var g,a,f,
n,k,p;g=S.next;g!==S.cur&&(g?C.bindFramebuffer(36160,g.framebuffer):C.bindFramebuffer(36160,null),S.cur=g);if(pa.dirty){var r,q,d,u,h,y,B,K,D,A,fa,ra,Ga,ub,Da,Vd,Wd,La,ob,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb;r=da.dither;r!==pa.dither&&(r?C.enable(3024):C.disable(3024),pa.dither=r);q=da.depth_func;q!==pa.depth_func&&(C.depthFunc(q),pa.depth_func=q);d=td[0];u=td[1];if(d!==zc[0]||u!==zc[1])C.depthRange(d,u),zc[0]=d,zc[1]=u;h=da.depth_mask;h!==pa.depth_mask&&(C.depthMask(h),pa.depth_mask=h);y=qc[0];B=qc[1];
K=qc[2];D=qc[3];if(y!==ic[0]||B!==ic[1]||K!==ic[2]||D!==ic[3])C.colorMask(y,B,K,D),ic[0]=y,ic[1]=B,ic[2]=K,ic[3]=D;A=da.frontFace;A!==pa.frontFace&&(C.frontFace(A),pa.frontFace=A);fa=da.lineWidth;fa!==pa.lineWidth&&(C.lineWidth(fa),pa.lineWidth=fa);ra=da.polygonOffset_enable;ra!==pa.polygonOffset_enable&&(ra?C.enable(32823):C.disable(32823),pa.polygonOffset_enable=ra);Ga=aa[0];ub=aa[1];if(Ga!==P[0]||ub!==P[1])C.polygonOffset(Ga,ub),P[0]=Ga,P[1]=ub;Da=da.sample_alpha;Da!==pa.sample_alpha&&(Da?C.enable(32926):
C.disable(32926),pa.sample_alpha=Da);Vd=da.sample_enable;Vd!==pa.sample_enable&&(Vd?C.enable(32928):C.disable(32928),pa.sample_enable=Vd);Wd=ha[0];La=ha[1];if(Wd!==Ha[0]||La!==Ha[1])C.sampleCoverage(Wd,La),Ha[0]=Wd,Ha[1]=La;ob=da.stencil_mask;ob!==pa.stencil_mask&&(C.stencilMask(ob),pa.stencil_mask=ob);qd=Vc[0];nd=Vc[1];vd=Vc[2];if(qd!==L[0]||nd!==L[1]||vd!==L[2])C.stencilFunc(qd,nd,vd),L[0]=qd,L[1]=nd,L[2]=vd;bd=ua[0];sd=ua[1];Tc=ua[2];Dd=ua[3];if(bd!==Y[0]||sd!==Y[1]||Tc!==Y[2]||Dd!==Y[3])C.stencilOpSeparate(bd,
sd,Tc,Dd),Y[0]=bd,Y[1]=sd,Y[2]=Tc,Y[3]=Dd;Nc=F[0];Ic=F[1];rc=F[2];gb=F[3];if(Nc!==ia[0]||Ic!==ia[1]||rc!==ia[2]||gb!==ia[3])C.stencilOpSeparate(Nc,Ic,rc,gb),ia[0]=Nc,ia[1]=Ic,ia[2]=rc,ia[3]=gb}C.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;C.enable(3042);pa.blend_enable=!0;C.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;C.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;cc[3]=1;C.enable(2884);pa.cull_enable=!0;C.cullFace(1029);pa.cull_face=1029;C.enable(3089);pa.scissor_enable=
!0;C.disable(2960);pa.stencil_enable=!1;if(a=pa.profile)f=performance.now(),c.count+=e;C.useProgram(x.program);n=ab.angle_instanced_arrays;var hd,Ib,oc,Xa,Qc;nb.setVAO(null);hd=V.location;Ib=Q[hd];Ib.buffer||C.enableVertexAttribArray(hd);if(5126!==Ib.type||1!==Ib.size||Ib.buffer!==m||!1!==Ib.normalized||0!==Ib.offset||8!==Ib.stride)C.bindBuffer(34962,m.buffer),C.vertexAttribPointer(hd,1,5126,!1,8,0),Ib.type=5126,Ib.size=1,Ib.buffer=m,Ib.normalized=!1,Ib.offset=0,Ib.stride=8;0!==Ib.divisor&&(n.vertexAttribDivisorANGLE(hd,
0),Ib.divisor=0);oc=J.location;Xa=Q[oc];Xa.buffer||C.enableVertexAttribArray(oc);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==l||!1!==Xa.normalized||4!==Xa.offset||8!==Xa.stride)C.bindBuffer(34962,l.buffer),C.vertexAttribPointer(oc,1,5126,!1,8,4),Xa.type=5126,Xa.size=1,Xa.buffer=l,Xa.normalized=!1,Xa.offset=4,Xa.stride=8;0!==Xa.divisor&&(n.vertexAttribDivisorANGLE(oc,0),Xa.divisor=0);(Qc=R.elements)?C.bindBuffer(34963,Qc.buffer.buffer):nb.currentVAO&&(Qc=Hb.getElements(nb.currentVAO.elements))&&C.bindBuffer(34963,
Qc.buffer.buffer);for(k=0;k<e;++k){p=b[k];var ac,lc,Id,rd,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ye,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc;ac=p.viewport;lc=ac.x|0;Id=
ac.y|0;rd="width"in ac?ac.width|0:T.framebufferWidth-lc;Fc="height"in ac?ac.height|0:T.framebufferHeight-Id;dc=T.viewportWidth;T.viewportWidth=rd;Cc=T.viewportHeight;T.viewportHeight=Fc;C.viewport(lc,Id,rd,Fc);ta[0]=lc;ta[1]=Id;ta[2]=rd;ta[3]=Fc;(Yc=U.call(this,T,p,k))?C.enable(2929):C.disable(2929);pa.depth_enable=Yc;Zb=p.viewport;Gc=Zb.x|0;Ya=Zb.y|0;Ea="width"in Zb?Zb.width|0:T.framebufferWidth-Gc;ud="height"in Zb?Zb.height|0:T.framebufferHeight-Ya;C.scissor(Gc,Ya,Ea,ud);Pc[0]=Gc;Pc[1]=Ya;Pc[2]=
Ea;Pc[3]=ud;ca.buffer=p.positionBuffer;Jb=!1;Ua=null;Vb=0;cb=!1;Xb=Dc=0;ye=1;jc=0;Sb=5126;pb=Pa=Tb=w=0;na(ca)?(Jb=!0,Ua=M.createStream(34962,ca),Sb=Ua.dtype):(Ua=M.getBuffer(ca))?Sb=Ua.dtype:"constant"in ca?(ye=2,"number"===typeof ca.constant?(Tb=ca.constant,Pa=pb=w=0):(Tb=0<ca.constant.length?ca.constant[0]:0,Pa=1<ca.constant.length?ca.constant[1]:0,pb=2<ca.constant.length?ca.constant[2]:0,w=3<ca.constant.length?ca.constant[3]:0)):(Ua=na(ca.buffer)?M.createStream(34962,ca.buffer):M.getBuffer(ca.buffer),
Sb="type"in ca?N[ca.type]:Ua.dtype,cb=!!ca.normalized,Xb=ca.size|0,Dc=ca.offset|0,jc=ca.stride|0,Vb=ca.divisor|0);vb=sa.location;hb=Q[vb];if(1===ye){hb.buffer||C.enableVertexAttribArray(vb);Qa=Xb||2;if(hb.type!==Sb||hb.size!==Qa||hb.buffer!==Ua||hb.normalized!==cb||hb.offset!==Dc||hb.stride!==jc)C.bindBuffer(34962,Ua.buffer),C.vertexAttribPointer(vb,Qa,Sb,cb,jc,Dc),hb.type=Sb,hb.size=Qa,hb.buffer=Ua,hb.normalized=cb,hb.offset=Dc,hb.stride=jc;hb.divisor!==Vb&&(n.vertexAttribDivisorANGLE(vb,Vb),hb.divisor=
Vb)}else if(hb.buffer&&(C.disableVertexAttribArray(vb),hb.buffer=null),hb.x!==Tb||hb.y!==Pa||hb.z!==pb||hb.w!==w)C.vertexAttrib4f(vb,Tb,Pa,pb,w),hb.x=Tb,hb.y=Pa,hb.z=pb,hb.w=w;Aa.buffer=p.positionBuffer;Oc=!1;Yb=null;jd=0;db=!1;Zc=pc=0;mc=1;jb=0;kb=5126;Va=ya=qb=va=0;na(Aa)?(Oc=!0,Yb=M.createStream(34962,Aa),kb=Yb.dtype):(Yb=M.getBuffer(Aa))?kb=Yb.dtype:"constant"in Aa?(mc=2,"number"===typeof Aa.constant?(qb=Aa.constant,ya=Va=va=0):(qb=0<Aa.constant.length?Aa.constant[0]:0,ya=1<Aa.constant.length?
Aa.constant[1]:0,Va=2<Aa.constant.length?Aa.constant[2]:0,va=3<Aa.constant.length?Aa.constant[3]:0)):(Yb=na(Aa.buffer)?M.createStream(34962,Aa.buffer):M.getBuffer(Aa.buffer),kb="type"in Aa?N[Aa.type]:Yb.dtype,db=!!Aa.normalized,Zc=Aa.size|0,pc=Aa.offset|0,jb=Aa.stride|0,jd=Aa.divisor|0);bb=oa.location;Ba=Q[bb];if(1===mc){Ba.buffer||C.enableVertexAttribArray(bb);eb=Zc||2;if(Ba.type!==kb||Ba.size!==eb||Ba.buffer!==Yb||Ba.normalized!==db||Ba.offset!==pc||Ba.stride!==jb)C.bindBuffer(34962,Yb.buffer),
C.vertexAttribPointer(bb,eb,kb,db,jb,pc),Ba.type=kb,Ba.size=eb,Ba.buffer=Yb,Ba.normalized=db,Ba.offset=pc,Ba.stride=jb;Ba.divisor!==jd&&(n.vertexAttribDivisorANGLE(bb,jd),Ba.divisor=jd)}else if(Ba.buffer&&(C.disableVertexAttribArray(bb),Ba.buffer=null),Ba.x!==qb||Ba.y!==ya||Ba.z!==Va||Ba.w!==va)C.vertexAttrib4f(bb,qb,ya,Va,va),Ba.x=qb,Ba.y=ya,Ba.z=Va,Ba.w=va;Ka.buffer=p.positionBuffer;Na=!1;Bb=null;Ab=0;Ta=!1;Kb=Hc=0;Mb=1;Ub=0;wa=5126;fb=Pb=Ma=Jd=0;na(Ka)?(Na=!0,Bb=M.createStream(34962,Ka),wa=Bb.dtype):
(Bb=M.getBuffer(Ka))?wa=Bb.dtype:"constant"in Ka?(Mb=2,"number"===typeof Ka.constant?(Ma=Ka.constant,Pb=fb=Jd=0):(Ma=0<Ka.constant.length?Ka.constant[0]:0,Pb=1<Ka.constant.length?Ka.constant[1]:0,fb=2<Ka.constant.length?Ka.constant[2]:0,Jd=3<Ka.constant.length?Ka.constant[3]:0)):(Bb=na(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),wa="type"in Ka?N[Ka.type]:Bb.dtype,Ta=!!Ka.normalized,Kb=Ka.size|0,Hc=Ka.offset|0,Ub=Ka.stride|0,Ab=Ka.divisor|0);ib=ka.location;xa=Q[ib];if(1===Mb){xa.buffer||
C.enableVertexAttribArray(ib);ec=Kb||2;if(xa.type!==wa||xa.size!==ec||xa.buffer!==Bb||xa.normalized!==Ta||xa.offset!==Hc||xa.stride!==Ub)C.bindBuffer(34962,Bb.buffer),C.vertexAttribPointer(ib,ec,wa,Ta,Ub,Hc),xa.type=wa,xa.size=ec,xa.buffer=Bb,xa.normalized=Ta,xa.offset=Hc,xa.stride=Ub;xa.divisor!==Ab&&(n.vertexAttribDivisorANGLE(ib,Ab),xa.divisor=Ab)}else if(xa.buffer&&(C.disableVertexAttribArray(ib),xa.buffer=null),xa.x!==Ma||xa.y!==Pb||xa.z!==fb||xa.w!==Jd)C.vertexAttrib4f(ib,Ma,Pb,fb,Jd),xa.x=
Ma,xa.y=Pb,xa.z=fb,xa.w=Jd;E.buffer=p.positionBuffer;Fa=!1;rb=null;sb=0;Za=!1;kc=$a=0;dd=1;tc=0;Wa=5126;vc=Ia=$c=Nb=0;na(E)?(Fa=!0,rb=M.createStream(34962,E),Wa=rb.dtype):(rb=M.getBuffer(E))?Wa=rb.dtype:"constant"in E?(dd=2,"number"===typeof E.constant?($c=E.constant,Ia=vc=Nb=0):($c=0<E.constant.length?E.constant[0]:0,Ia=1<E.constant.length?E.constant[1]:0,vc=2<E.constant.length?E.constant[2]:0,Nb=3<E.constant.length?E.constant[3]:0)):(rb=na(E.buffer)?M.createStream(34962,E.buffer):M.getBuffer(E.buffer),
Wa="type"in E?N[E.type]:rb.dtype,Za=!!E.normalized,kc=E.size|0,$a=E.offset|0,tc=E.stride|0,sb=E.divisor|0);Ra=Sa.location;Ca=Q[Ra];if(1===dd){Ca.buffer||C.enableVertexAttribArray(Ra);lb=kc||2;if(Ca.type!==Wa||Ca.size!==lb||Ca.buffer!==rb||Ca.normalized!==Za||Ca.offset!==$a||Ca.stride!==tc)C.bindBuffer(34962,rb.buffer),C.vertexAttribPointer(Ra,lb,Wa,Za,tc,$a),Ca.type=Wa,Ca.size=lb,Ca.buffer=rb,Ca.normalized=Za,Ca.offset=$a,Ca.stride=tc;Ca.divisor!==sb&&(n.vertexAttribDivisorANGLE(Ra,sb),Ca.divisor=
sb)}else if(Ca.buffer&&(C.disableVertexAttribArray(Ra),Ca.buffer=null),Ca.x!==$c||Ca.y!==Ia||Ca.z!==vc||Ca.w!==Nb)C.vertexAttrib4f(Ra,$c,Ia,vc,Nb),Ca.x=$c,Ca.y=Ia,Ca.z=vc,Ca.w=Nb;G.buffer=p.colorBuffer;wb=!1;Cb=null;tb=0;uc=!1;wd=xb=0;sc=1;Ed=0;Jc=5126;bc=Wb=fd=ed=0;na(G)?(wb=!0,Cb=M.createStream(34962,G),Jc=Cb.dtype):(Cb=M.getBuffer(G))?Jc=Cb.dtype:"constant"in G?(sc=2,"number"===typeof G.constant?(fd=G.constant,Wb=bc=ed=0):(fd=0<G.constant.length?G.constant[0]:0,Wb=1<G.constant.length?G.constant[1]:
0,bc=2<G.constant.length?G.constant[2]:0,ed=3<G.constant.length?G.constant[3]:0)):(Cb=na(G.buffer)?M.createStream(34962,G.buffer):M.getBuffer(G.buffer),Jc="type"in G?N[G.type]:Cb.dtype,uc=!!G.normalized,wd=G.size|0,xb=G.offset|0,Ed=G.stride|0,tb=G.divisor|0);Qb=t.location;Ja=Q[Qb];if(1===sc){Ja.buffer||C.enableVertexAttribArray(Qb);$b=wd||4;if(Ja.type!==Jc||Ja.size!==$b||Ja.buffer!==Cb||Ja.normalized!==uc||Ja.offset!==xb||Ja.stride!==Ed)C.bindBuffer(34962,Cb.buffer),C.vertexAttribPointer(Qb,$b,Jc,
uc,Ed,xb),Ja.type=Jc,Ja.size=$b,Ja.buffer=Cb,Ja.normalized=uc,Ja.offset=xb,Ja.stride=Ed;Ja.divisor!==tb&&(n.vertexAttribDivisorANGLE(Qb,tb),Ja.divisor=tb)}else if(Ja.buffer&&(C.disableVertexAttribArray(Qb),Ja.buffer=null),Ja.x!==fd||Ja.y!==Wb||Ja.z!==bc||Ja.w!==ed)C.vertexAttrib4f(Qb,fd,Wb,bc,ed),Ja.x=fd,Ja.y=Wb,Ja.z=bc,Ja.w=ed;za.buffer=p.colorBuffer;mb=!1;yb=null;Ob=0;Rb=!1;hc=fc=0;Ze=1;xc=0;yc=5126;Rc=ad=Kc=Ac=0;na(za)?(mb=!0,yb=M.createStream(34962,za),yc=yb.dtype):(yb=M.getBuffer(za))?yc=yb.dtype:
"constant"in za?(Ze=2,"number"===typeof za.constant?(Kc=za.constant,ad=Rc=Ac=0):(Kc=0<za.constant.length?za.constant[0]:0,ad=1<za.constant.length?za.constant[1]:0,Rc=2<za.constant.length?za.constant[2]:0,Ac=3<za.constant.length?za.constant[3]:0)):(yb=na(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),yc="type"in za?N[za.type]:yb.dtype,Rb=!!za.normalized,hc=za.size|0,fc=za.offset|0,xc=za.stride|0,Ob=za.divisor|0);Lc=O.location;Lb=Q[Lc];if(1===Ze){Lb.buffer||C.enableVertexAttribArray(Lc);
Eb=hc||4;if(Lb.type!==yc||Lb.size!==Eb||Lb.buffer!==yb||Lb.normalized!==Rb||Lb.offset!==fc||Lb.stride!==xc)C.bindBuffer(34962,yb.buffer),C.vertexAttribPointer(Lc,Eb,yc,Rb,xc,fc),Lb.type=yc,Lb.size=Eb,Lb.buffer=yb,Lb.normalized=Rb,Lb.offset=fc,Lb.stride=xc;Lb.divisor!==Ob&&(n.vertexAttribDivisorANGLE(Lc,Ob),Lb.divisor=Ob)}else if(Lb.buffer&&(C.disableVertexAttribArray(Lc),Lb.buffer=null),Lb.x!==Kc||Lb.y!==ad||Lb.z!==Rc||Lb.w!==Ac)C.vertexAttrib4f(Lc,Kc,ad,Rc,Ac),Lb.x=Kc,Lb.y=ad,Lb.z=Rc,Lb.w=Ac;Mc=
p.scale;Ec=Mc[0];gc=Mc[1];k&&Sc===Ec&&Wc===gc||(Sc=Ec,Wc=gc,C.uniform2f(Db.location,Ec,gc));gd=p.translate;kd=gd[0];Xc=gd[1];k&&md===kd&&bf===Xc||(md=kd,bf=Xc,C.uniform2f(Oa.location,kd,Xc));Zd=p.thickness;k&&ke===Zd||(ke=Zd,C.uniform1f(ea.location,Zd));se=p.depth;k&&me===se||(me=se,C.uniform1f(I.location,se));Md=v.call(this,T,p,k);Kd=Md[0];Bc=Md[1];ld=Md[2];pd=Md[3];k&&id===Kd&&od===Bc&&cd===ld&&Fd===pd||(id=Kd,od=Bc,cd=ld,Fd=pd,C.uniform4f(W.location,Kd,Bc,ld,pd));Hd=p.miterLimit;k&&te===Hd||(te=
Hd,C.uniform1f(ja.location,Hd));ze=H.call(this,T,p,k);k&&Ae===ze||(Ae=ze,C.uniform1f(Z.location,ze));ne=p.dashLength;k&&fe===ne||(fe=ne,C.uniform1f(z.location,ne));de=p.opacity;k&&pe===de||(pe=de,C.uniform1f(ma.location,de));(be=p.dashTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);ie=be._texture;C.uniform1i(ba.location,ie.bind());wc=p.count;0<wc?Qc?n.drawElementsInstancedANGLE(5,4,Qc.type,0<<(Qc.type-5121>>1),wc):n.drawArraysInstancedANGLE(5,0,4,wc):0>wc&&(Qc?C.drawElements(5,4,Qc.type,
0<<(Qc.type-5121>>1)):C.drawArrays(5,0,4));T.viewportWidth=dc;T.viewportHeight=Cc;Jb&&M.destroyStream(Ua);Oc&&M.destroyStream(Yb);Na&&M.destroyStream(Bb);Fa&&M.destroyStream(rb);wb&&M.destroyStream(Cb);mb&&M.destroyStream(yb);ie.unbind()}pa.dirty=!0;nb.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(b){var e,g,a,n,p,r,q,u,y,B,x,K,v,U,H,fa,ra,Ga,ub,Da,La,ob,Vd,Wd,ae,Yd,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb,hd,Ib,oc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ye,jc,Sb,
w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd;e=S.next;e!==S.cur&&(e?C.bindFramebuffer(36160,e.framebuffer):C.bindFramebuffer(36160,null),S.cur=e);if(pa.dirty){var sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc;sc=da.dither;sc!==pa.dither&&(sc?C.enable(3024):C.disable(3024),pa.dither=sc);Ed=da.depth_func;Ed!==pa.depth_func&&
(C.depthFunc(Ed),pa.depth_func=Ed);Jc=td[0];ed=td[1];if(Jc!==zc[0]||ed!==zc[1])C.depthRange(Jc,ed),zc[0]=Jc,zc[1]=ed;fd=da.depth_mask;fd!==pa.depth_mask&&(C.depthMask(fd),pa.depth_mask=fd);Wb=qc[0];bc=qc[1];Qb=qc[2];Ja=qc[3];if(Wb!==ic[0]||bc!==ic[1]||Qb!==ic[2]||Ja!==ic[3])C.colorMask(Wb,bc,Qb,Ja),ic[0]=Wb,ic[1]=bc,ic[2]=Qb,ic[3]=Ja;$b=da.frontFace;$b!==pa.frontFace&&(C.frontFace($b),pa.frontFace=$b);mb=da.lineWidth;mb!==pa.lineWidth&&(C.lineWidth(mb),pa.lineWidth=mb);yb=da.polygonOffset_enable;
yb!==pa.polygonOffset_enable&&(yb?C.enable(32823):C.disable(32823),pa.polygonOffset_enable=yb);Ob=aa[0];Rb=aa[1];if(Ob!==P[0]||Rb!==P[1])C.polygonOffset(Ob,Rb),P[0]=Ob,P[1]=Rb;fc=da.sample_alpha;fc!==pa.sample_alpha&&(fc?C.enable(32926):C.disable(32926),pa.sample_alpha=fc);hc=da.sample_enable;hc!==pa.sample_enable&&(hc?C.enable(32928):C.disable(32928),pa.sample_enable=hc);Ze=ha[0];xc=ha[1];if(Ze!==Ha[0]||xc!==Ha[1])C.sampleCoverage(Ze,xc),Ha[0]=Ze,Ha[1]=xc;yc=da.stencil_mask;yc!==pa.stencil_mask&&
(C.stencilMask(yc),pa.stencil_mask=yc);Ac=Vc[0];Kc=Vc[1];ad=Vc[2];if(Ac!==L[0]||Kc!==L[1]||ad!==L[2])C.stencilFunc(Ac,Kc,ad),L[0]=Ac,L[1]=Kc,L[2]=ad;Rc=ua[0];Lc=ua[1];Lb=ua[2];Eb=ua[3];if(Rc!==Y[0]||Lc!==Y[1]||Lb!==Y[2]||Eb!==Y[3])C.stencilOpSeparate(Rc,Lc,Lb,Eb),Y[0]=Rc,Y[1]=Lc,Y[2]=Lb,Y[3]=Eb;Mc=F[0];Ec=F[1];Sc=F[2];gc=F[3];if(Mc!==ia[0]||Ec!==ia[1]||Sc!==ia[2]||gc!==ia[3])C.stencilOpSeparate(Mc,Ec,Sc,gc),ia[0]=Mc,ia[1]=Ec,ia[2]=Sc,ia[3]=gc}g=b.viewport;a=g.x|0;n=g.y|0;p="width"in g?g.width|0:T.framebufferWidth-
a;r="height"in g?g.height|0:T.framebufferHeight-n;q=T.viewportWidth;T.viewportWidth=p;u=T.viewportHeight;T.viewportHeight=r;C.viewport(a,n,p,r);ta[0]=a;ta[1]=n;ta[2]=p;ta[3]=r;C.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;C.enable(3042);pa.blend_enable=!0;C.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;C.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;cc[3]=1;C.enable(2884);pa.cull_enable=!0;C.cullFace(1029);pa.cull_face=1029;(y=d.call(this,T,b,0))?C.enable(2929):C.disable(2929);
pa.depth_enable=y;B=b.viewport;x=B.x|0;K=B.y|0;v="width"in B?B.width|0:T.framebufferWidth-x;U="height"in B?B.height|0:T.framebufferHeight-K;C.scissor(x,K,v,U);Pc[0]=x;Pc[1]=K;Pc[2]=v;Pc[3]=U;C.enable(3089);pa.scissor_enable=!0;C.disable(2960);pa.stencil_enable=!1;if(H=pa.profile)fa=performance.now(),c.count++;C.useProgram(h.program);ra=ab.angle_instanced_arrays;nb.setVAO(null);ca.buffer=b.positionBuffer;Ga=!1;ub=null;Da=0;La=!1;Vd=ob=0;Wd=1;ae=0;Yd=5126;bd=vd=nd=qd=0;na(ca)?(Ga=!0,ub=M.createStream(34962,
ca),Yd=ub.dtype):(ub=M.getBuffer(ca))?Yd=ub.dtype:"constant"in ca?(Wd=2,"number"===typeof ca.constant?(nd=ca.constant,vd=bd=qd=0):(nd=0<ca.constant.length?ca.constant[0]:0,vd=1<ca.constant.length?ca.constant[1]:0,bd=2<ca.constant.length?ca.constant[2]:0,qd=3<ca.constant.length?ca.constant[3]:0)):(ub=na(ca.buffer)?M.createStream(34962,ca.buffer):M.getBuffer(ca.buffer),Yd="type"in ca?N[ca.type]:ub.dtype,La=!!ca.normalized,Vd=ca.size|0,ob=ca.offset|0,ae=ca.stride|0,Da=ca.divisor|0);sd=sa.location;Tc=
Q[sd];if(1===Wd){Tc.buffer||C.enableVertexAttribArray(sd);Dd=Vd||2;if(Tc.type!==Yd||Tc.size!==Dd||Tc.buffer!==ub||Tc.normalized!==La||Tc.offset!==ob||Tc.stride!==ae)C.bindBuffer(34962,ub.buffer),C.vertexAttribPointer(sd,Dd,Yd,La,ae,ob),Tc.type=Yd,Tc.size=Dd,Tc.buffer=ub,Tc.normalized=La,Tc.offset=ob,Tc.stride=ae;Tc.divisor!==Da&&(ra.vertexAttribDivisorANGLE(sd,Da),Tc.divisor=Da)}else if(Tc.buffer&&(C.disableVertexAttribArray(sd),Tc.buffer=null),Tc.x!==nd||Tc.y!==vd||Tc.z!==bd||Tc.w!==qd)C.vertexAttrib4f(sd,
nd,vd,bd,qd),Tc.x=nd,Tc.y=vd,Tc.z=bd,Tc.w=qd;Aa.buffer=b.positionBuffer;Nc=!1;Ic=null;rc=0;gb=!1;Ib=hd=0;oc=1;Xa=0;Qc=5126;rd=Id=lc=ac=0;na(Aa)?(Nc=!0,Ic=M.createStream(34962,Aa),Qc=Ic.dtype):(Ic=M.getBuffer(Aa))?Qc=Ic.dtype:"constant"in Aa?(oc=2,"number"===typeof Aa.constant?(lc=Aa.constant,Id=rd=ac=0):(lc=0<Aa.constant.length?Aa.constant[0]:0,Id=1<Aa.constant.length?Aa.constant[1]:0,rd=2<Aa.constant.length?Aa.constant[2]:0,ac=3<Aa.constant.length?Aa.constant[3]:0)):(Ic=na(Aa.buffer)?M.createStream(34962,
Aa.buffer):M.getBuffer(Aa.buffer),Qc="type"in Aa?N[Aa.type]:Ic.dtype,gb=!!Aa.normalized,Ib=Aa.size|0,hd=Aa.offset|0,Xa=Aa.stride|0,rc=Aa.divisor|0);Fc=oa.location;dc=Q[Fc];if(1===oc){dc.buffer||C.enableVertexAttribArray(Fc);Cc=Ib||2;if(dc.type!==Qc||dc.size!==Cc||dc.buffer!==Ic||dc.normalized!==gb||dc.offset!==hd||dc.stride!==Xa)C.bindBuffer(34962,Ic.buffer),C.vertexAttribPointer(Fc,Cc,Qc,gb,Xa,hd),dc.type=Qc,dc.size=Cc,dc.buffer=Ic,dc.normalized=gb,dc.offset=hd,dc.stride=Xa;dc.divisor!==rc&&(ra.vertexAttribDivisorANGLE(Fc,
rc),dc.divisor=rc)}else if(dc.buffer&&(C.disableVertexAttribArray(Fc),dc.buffer=null),dc.x!==lc||dc.y!==Id||dc.z!==rd||dc.w!==ac)C.vertexAttrib4f(Fc,lc,Id,rd,ac),dc.x=lc,dc.y=Id,dc.z=rd,dc.w=ac;Ka.buffer=b.positionBuffer;Yc=!1;Zb=null;Gc=0;Ya=!1;ud=Ea=0;Jb=1;Ua=0;Vb=5126;ye=Xb=Dc=cb=0;na(Ka)?(Yc=!0,Zb=M.createStream(34962,Ka),Vb=Zb.dtype):(Zb=M.getBuffer(Ka))?Vb=Zb.dtype:"constant"in Ka?(Jb=2,"number"===typeof Ka.constant?(Dc=Ka.constant,Xb=ye=cb=0):(Dc=0<Ka.constant.length?Ka.constant[0]:0,Xb=1<
Ka.constant.length?Ka.constant[1]:0,ye=2<Ka.constant.length?Ka.constant[2]:0,cb=3<Ka.constant.length?Ka.constant[3]:0)):(Zb=na(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),Vb="type"in Ka?N[Ka.type]:Zb.dtype,Ya=!!Ka.normalized,ud=Ka.size|0,Ea=Ka.offset|0,Ua=Ka.stride|0,Gc=Ka.divisor|0);jc=ka.location;Sb=Q[jc];if(1===Jb){Sb.buffer||C.enableVertexAttribArray(jc);w=ud||2;if(Sb.type!==Vb||Sb.size!==w||Sb.buffer!==Zb||Sb.normalized!==Ya||Sb.offset!==Ea||Sb.stride!==Ua)C.bindBuffer(34962,
Zb.buffer),C.vertexAttribPointer(jc,w,Vb,Ya,Ua,Ea),Sb.type=Vb,Sb.size=w,Sb.buffer=Zb,Sb.normalized=Ya,Sb.offset=Ea,Sb.stride=Ua;Sb.divisor!==Gc&&(ra.vertexAttribDivisorANGLE(jc,Gc),Sb.divisor=Gc)}else if(Sb.buffer&&(C.disableVertexAttribArray(jc),Sb.buffer=null),Sb.x!==Dc||Sb.y!==Xb||Sb.z!==ye||Sb.w!==cb)C.vertexAttrib4f(jc,Dc,Xb,ye,cb),Sb.x=Dc,Sb.y=Xb,Sb.z=ye,Sb.w=cb;E.buffer=b.positionBuffer;Tb=!1;Pa=null;pb=0;vb=!1;Qa=hb=0;Oc=1;Yb=0;jd=5126;mc=Zc=pc=db=0;na(E)?(Tb=!0,Pa=M.createStream(34962,E),
jd=Pa.dtype):(Pa=M.getBuffer(E))?jd=Pa.dtype:"constant"in E?(Oc=2,"number"===typeof E.constant?(pc=E.constant,Zc=mc=db=0):(pc=0<E.constant.length?E.constant[0]:0,Zc=1<E.constant.length?E.constant[1]:0,mc=2<E.constant.length?E.constant[2]:0,db=3<E.constant.length?E.constant[3]:0)):(Pa=na(E.buffer)?M.createStream(34962,E.buffer):M.getBuffer(E.buffer),jd="type"in E?N[E.type]:Pa.dtype,vb=!!E.normalized,Qa=E.size|0,hb=E.offset|0,Yb=E.stride|0,pb=E.divisor|0);jb=Sa.location;kb=Q[jb];if(1===Oc){kb.buffer||
C.enableVertexAttribArray(jb);va=Qa||2;if(kb.type!==jd||kb.size!==va||kb.buffer!==Pa||kb.normalized!==vb||kb.offset!==hb||kb.stride!==Yb)C.bindBuffer(34962,Pa.buffer),C.vertexAttribPointer(jb,va,jd,vb,Yb,hb),kb.type=jd,kb.size=va,kb.buffer=Pa,kb.normalized=vb,kb.offset=hb,kb.stride=Yb;kb.divisor!==pb&&(ra.vertexAttribDivisorANGLE(jb,pb),kb.divisor=pb)}else if(kb.buffer&&(C.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==pc||kb.y!==Zc||kb.z!==mc||kb.w!==db)C.vertexAttrib4f(jb,pc,Zc,mc,db),kb.x=
pc,kb.y=Zc,kb.z=mc,kb.w=db;G.buffer=b.colorBuffer;qb=!1;ya=null;Va=0;bb=!1;eb=Ba=0;Na=1;Bb=0;Ab=5126;Mb=Kb=Hc=Ta=0;na(G)?(qb=!0,ya=M.createStream(34962,G),Ab=ya.dtype):(ya=M.getBuffer(G))?Ab=ya.dtype:"constant"in G?(Na=2,"number"===typeof G.constant?(Hc=G.constant,Kb=Mb=Ta=0):(Hc=0<G.constant.length?G.constant[0]:0,Kb=1<G.constant.length?G.constant[1]:0,Mb=2<G.constant.length?G.constant[2]:0,Ta=3<G.constant.length?G.constant[3]:0)):(ya=na(G.buffer)?M.createStream(34962,G.buffer):M.getBuffer(G.buffer),
Ab="type"in G?N[G.type]:ya.dtype,bb=!!G.normalized,eb=G.size|0,Ba=G.offset|0,Bb=G.stride|0,Va=G.divisor|0);Ub=t.location;wa=Q[Ub];if(1===Na){wa.buffer||C.enableVertexAttribArray(Ub);Jd=eb||4;if(wa.type!==Ab||wa.size!==Jd||wa.buffer!==ya||wa.normalized!==bb||wa.offset!==Ba||wa.stride!==Bb)C.bindBuffer(34962,ya.buffer),C.vertexAttribPointer(Ub,Jd,Ab,bb,Bb,Ba),wa.type=Ab,wa.size=Jd,wa.buffer=ya,wa.normalized=bb,wa.offset=Ba,wa.stride=Bb;wa.divisor!==Va&&(ra.vertexAttribDivisorANGLE(Ub,Va),wa.divisor=
Va)}else if(wa.buffer&&(C.disableVertexAttribArray(Ub),wa.buffer=null),wa.x!==Hc||wa.y!==Kb||wa.z!==Mb||wa.w!==Ta)C.vertexAttrib4f(Ub,Hc,Kb,Mb,Ta),wa.x=Hc,wa.y=Kb,wa.z=Mb,wa.w=Ta;za.buffer=b.colorBuffer;Ma=!1;Pb=null;fb=0;ib=!1;ec=xa=0;Fa=1;rb=0;sb=5126;dd=kc=$a=Za=0;na(za)?(Ma=!0,Pb=M.createStream(34962,za),sb=Pb.dtype):(Pb=M.getBuffer(za))?sb=Pb.dtype:"constant"in za?(Fa=2,"number"===typeof za.constant?($a=za.constant,kc=dd=Za=0):($a=0<za.constant.length?za.constant[0]:0,kc=1<za.constant.length?
za.constant[1]:0,dd=2<za.constant.length?za.constant[2]:0,Za=3<za.constant.length?za.constant[3]:0)):(Pb=na(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),sb="type"in za?N[za.type]:Pb.dtype,ib=!!za.normalized,ec=za.size|0,xa=za.offset|0,rb=za.stride|0,fb=za.divisor|0);tc=O.location;Wa=Q[tc];if(1===Fa){Wa.buffer||C.enableVertexAttribArray(tc);Nb=ec||4;if(Wa.type!==sb||Wa.size!==Nb||Wa.buffer!==Pb||Wa.normalized!==ib||Wa.offset!==xa||Wa.stride!==rb)C.bindBuffer(34962,Pb.buffer),C.vertexAttribPointer(tc,
Nb,sb,ib,rb,xa),Wa.type=sb,Wa.size=Nb,Wa.buffer=Pb,Wa.normalized=ib,Wa.offset=xa,Wa.stride=rb;Wa.divisor!==fb&&(ra.vertexAttribDivisorANGLE(tc,fb),Wa.divisor=fb)}else if(Wa.buffer&&(C.disableVertexAttribArray(tc),Wa.buffer=null),Wa.x!==$a||Wa.y!==kc||Wa.z!==dd||Wa.w!==Za)C.vertexAttrib4f(tc,$a,kc,dd,Za),Wa.x=$a,Wa.y=kc,Wa.z=dd,Wa.w=Za;$c=V.location;Ia=Q[$c];Ia.buffer||C.enableVertexAttribArray($c);if(5126!==Ia.type||1!==Ia.size||Ia.buffer!==m||!1!==Ia.normalized||0!==Ia.offset||8!==Ia.stride)C.bindBuffer(34962,
m.buffer),C.vertexAttribPointer($c,1,5126,!1,8,0),Ia.type=5126,Ia.size=1,Ia.buffer=m,Ia.normalized=!1,Ia.offset=0,Ia.stride=8;0!==Ia.divisor&&(ra.vertexAttribDivisorANGLE($c,0),Ia.divisor=0);vc=J.location;Ra=Q[vc];Ra.buffer||C.enableVertexAttribArray(vc);if(5126!==Ra.type||1!==Ra.size||Ra.buffer!==l||!1!==Ra.normalized||4!==Ra.offset||8!==Ra.stride)C.bindBuffer(34962,l.buffer),C.vertexAttribPointer(vc,1,5126,!1,8,4),Ra.type=5126,Ra.size=1,Ra.buffer=l,Ra.normalized=!1,Ra.offset=4,Ra.stride=8;0!==Ra.divisor&&
(ra.vertexAttribDivisorANGLE(vc,0),Ra.divisor=0);Ca=b.scale;C.uniform2f(Db.location,Ca[0],Ca[1]);lb=b.translate;C.uniform2f(Oa.location,lb[0],lb[1]);C.uniform1f(ea.location,b.thickness);C.uniform1f(I.location,b.depth);wb=f.call(this,T,b,0);C.uniform4f(W.location,wb[0],wb[1],wb[2],wb[3]);C.uniform1f(ja.location,b.miterLimit);Cb=k.call(this,T,b,0);C.uniform1f(Z.location,Cb);C.uniform1f(z.location,b.dashLength);C.uniform1f(ma.location,b.opacity);(tb=b.dashTexture)&&"framebuffer"===tb._reglType&&(tb=
tb.color[0]);uc=tb._texture;C.uniform1i(ba.location,uc.bind());(xb=R.elements)?C.bindBuffer(34963,xb.buffer.buffer):nb.currentVAO&&(xb=Hb.getElements(nb.currentVAO.elements))&&C.bindBuffer(34963,xb.buffer.buffer);wd=b.count;0<wd?xb?ra.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),wd):ra.drawArraysInstancedANGLE(5,0,4,wd):0>wd&&(xb?C.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):C.drawArrays(5,0,4));pa.dirty=!0;nb.setVAO(null);T.viewportWidth=q;T.viewportHeight=u;H&&(c.cpuTime+=performance.now()-
fa);Ga&&M.destroyStream(ub);Nc&&M.destroyStream(Ic);Yc&&M.destroyStream(Zb);Tb&&M.destroyStream(Pa);qb&&M.destroyStream(ya);Ma&&M.destroyStream(Pb);uc.unbind()},scope:function(a,f,k){var d,h,x,v,D,U,A,H,t,z,la,C,F,P,I,O,L,sa,aa,J,Q,S,oa,X,Y,V,ha,ba,W,ia,Z,ga,ua,qc,ta,ka,Ha,ea,Xa,td,ac,lc,zc,ja,Pc,dc,Cc,Yc,Zb,Gc,Ya,Ea,cc,Jb,Ua,Vb,cb,ma,ic,Oa,ab,Sb,w,Tb,Pa,pb,vb,hb,Qa,Sa,Yb,Vc,db,pc,Hb,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,nb,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,
vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,Db,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;d=a.viewport;h=d.x|0;x=d.y|0;v="width"in d?d.width|0:T.framebufferWidth-h;D="height"in d?d.height|
0:T.framebufferHeight-x;U=T.viewportWidth;T.viewportWidth=v;A=T.viewportHeight;T.viewportHeight=D;H=fa[0];fa[0]=h;t=fa[1];fa[1]=x;z=fa[2];fa[2]=v;la=fa[3];fa[3]=D;C=La[0];La[0]=0;F=La[1];La[1]=0;P=La[2];La[2]=0;I=La[3];La[3]=0;O=da.blend_enable;da.blend_enable=!0;L=ob[0];ob[0]=32774;sa=ob[1];ob[1]=32774;aa=ra[0];ra[0]=770;J=ra[1];ra[1]=771;Q=ra[2];ra[2]=773;S=ra[3];ra[3]=1;oa=da.cull_enable;da.cull_enable=!0;X=da.cull_face;da.cull_face=1029;Y=b.call(this,T,a,k);V=da.depth_enable;da.depth_enable=Y;
ha=a.viewport;ba=ha.x|0;W=ha.y|0;ia="width"in ha?ha.width|0:T.framebufferWidth-ba;Z="height"in ha?ha.height|0:T.framebufferHeight-W;ga=ub[0];ub[0]=ba;ua=ub[1];ub[1]=W;qc=ub[2];ub[2]=ia;ta=ub[3];ub[3]=Z;ka=da.scissor_enable;da.scissor_enable=!0;Ha=da.stencil_enable;da.stencil_enable=!1;if(ea=pa.profile)Xa=performance.now(),c.count++;td=R.offset;R.offset=0;ac=R.count;R.count=4;lc=a.count;zc=R.instances;R.instances=lc;ja=R.primitive;R.primitive=5;Pc=a.dashLength;dc=Ga[23];Ga[23]=Pc;Cc=a.dashTexture;
Yc=Ga[24];Ga[24]=Cc;Zb=a.depth;Gc=Ga[22];Ga[22]=Zb;Ya=a.id;Ea=Ga[31];Ga[31]=Ya;cc=a.miterLimit;Jb=Ga[32];Ga[32]=cc;Ua=q.call(this,T,a,k);Vb=Ga[33];Ga[33]=Ua;cb=a.opacity;ma=Ga[10];Ga[10]=cb;ic=T.pixelRatio;Oa=Ga[34];Ga[34]=ic;ab=a.scale;Sb=Ga[6];Ga[6]=ab;w=a.scaleFract;Tb=Ga[7];Ga[7]=w;Pa=a.thickness;pb=Ga[21];Ga[21]=Pa;vb=a.translate;hb=Ga[8];Ga[8]=vb;Qa=a.translateFract;Sa=Ga[9];Ga[9]=Qa;Yb=B.call(this,T,a,k);Vc=Ga[3];Ga[3]=Yb;G.buffer=a.colorBuffer;db=!1;pc=null;Hb=0;mc=!1;kb=jb=0;va=1;qb=0;ya=
5126;eb=Ba=bb=Va=0;na(G)?(db=!0,pc=M.createStream(34962,G),ya=pc.dtype):(pc=M.getBuffer(G))?ya=pc.dtype:"constant"in G?(va=2,"number"===typeof G.constant?(bb=G.constant,Ba=eb=Va=0):(bb=0<G.constant.length?G.constant[0]:0,Ba=1<G.constant.length?G.constant[1]:0,eb=2<G.constant.length?G.constant[2]:0,Va=3<G.constant.length?G.constant[3]:0)):(pc=na(G.buffer)?M.createStream(34962,G.buffer):M.getBuffer(G.buffer),ya="type"in G?N[G.type]:pc.dtype,mc=!!G.normalized,kb=G.size|0,jb=G.offset|0,qb=G.stride|0,
Hb=G.divisor|0);Na=y.buffer;y.buffer=pc;Bb=y.divisor;y.divisor=Hb;Ab=y.normalized;y.normalized=mc;Ta=y.offset;y.offset=jb;Hc=y.size;y.size=kb;Kb=y.state;y.state=va;Mb=y.stride;y.stride=qb;Ub=y.type;y.type=ya;wa=y.w;y.w=Va;nb=y.x;y.x=bb;Ma=y.y;y.y=Ba;Pb=y.z;y.z=eb;ca.buffer=a.positionBuffer;fb=!1;ib=null;xa=0;ec=!1;rb=Fa=0;sb=1;Za=0;$a=5126;Wa=tc=dd=kc=0;na(ca)?(fb=!0,ib=M.createStream(34962,ca),$a=ib.dtype):(ib=M.getBuffer(ca))?$a=ib.dtype:"constant"in ca?(sb=2,"number"===typeof ca.constant?(dd=ca.constant,
tc=Wa=kc=0):(dd=0<ca.constant.length?ca.constant[0]:0,tc=1<ca.constant.length?ca.constant[1]:0,Wa=2<ca.constant.length?ca.constant[2]:0,kc=3<ca.constant.length?ca.constant[3]:0)):(ib=na(ca.buffer)?M.createStream(34962,ca.buffer):M.getBuffer(ca.buffer),$a="type"in ca?N[ca.type]:ib.dtype,ec=!!ca.normalized,rb=ca.size|0,Fa=ca.offset|0,Za=ca.stride|0,xa=ca.divisor|0);Nb=e.buffer;e.buffer=ib;$c=e.divisor;e.divisor=xa;Ia=e.normalized;e.normalized=ec;vc=e.offset;e.offset=Fa;Ra=e.size;e.size=rb;Ca=e.state;
e.state=sb;lb=e.stride;e.stride=Za;wb=e.type;e.type=$a;Cb=e.w;e.w=kc;tb=e.x;e.x=dd;uc=e.y;e.y=tc;xb=e.z;e.z=Wa;za.buffer=a.colorBuffer;Db=!1;sc=null;Ed=0;Jc=!1;fd=ed=0;Wb=1;bc=0;Qb=5126;yb=mb=$b=Ja=0;na(za)?(Db=!0,sc=M.createStream(34962,za),Qb=sc.dtype):(sc=M.getBuffer(za))?Qb=sc.dtype:"constant"in za?(Wb=2,"number"===typeof za.constant?($b=za.constant,mb=yb=Ja=0):($b=0<za.constant.length?za.constant[0]:0,mb=1<za.constant.length?za.constant[1]:0,yb=2<za.constant.length?za.constant[2]:0,Ja=3<za.constant.length?
za.constant[3]:0)):(sc=na(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),Qb="type"in za?N[za.type]:sc.dtype,Jc=!!za.normalized,fd=za.size|0,ed=za.offset|0,bc=za.stride|0,Ed=za.divisor|0);Ob=g.buffer;g.buffer=sc;Rb=g.divisor;g.divisor=Ed;fc=g.normalized;g.normalized=Jc;hc=g.offset;g.offset=ed;Ze=g.size;g.size=fd;xc=g.state;g.state=Wb;yc=g.stride;g.stride=bc;Ac=g.type;g.type=Qb;Kc=g.w;g.w=Ja;ad=g.x;g.x=$b;Rc=g.y;g.y=mb;Lc=g.z;g.z=yb;Aa.buffer=a.positionBuffer;Lb=!1;Eb=null;Mc=0;Ec=
!1;gc=Sc=0;Wc=1;gd=0;kd=5126;Zd=bf=Xc=md=0;na(Aa)?(Lb=!0,Eb=M.createStream(34962,Aa),kd=Eb.dtype):(Eb=M.getBuffer(Aa))?kd=Eb.dtype:"constant"in Aa?(Wc=2,"number"===typeof Aa.constant?(Xc=Aa.constant,bf=Zd=md=0):(Xc=0<Aa.constant.length?Aa.constant[0]:0,bf=1<Aa.constant.length?Aa.constant[1]:0,Zd=2<Aa.constant.length?Aa.constant[2]:0,md=3<Aa.constant.length?Aa.constant[3]:0)):(Eb=na(Aa.buffer)?M.createStream(34962,Aa.buffer):M.getBuffer(Aa.buffer),kd="type"in Aa?N[Aa.type]:Eb.dtype,Ec=!!Aa.normalized,
gc=Aa.size|0,Sc=Aa.offset|0,gd=Aa.stride|0,Mc=Aa.divisor|0);ke=n.buffer;n.buffer=Eb;se=n.divisor;n.divisor=Mc;me=n.normalized;n.normalized=Ec;Md=n.offset;n.offset=Sc;Kd=n.size;n.size=gc;id=n.state;n.state=Wc;Bc=n.stride;n.stride=gd;od=n.type;n.type=kd;ld=n.w;n.w=md;cd=n.x;n.x=Xc;pd=n.y;n.y=bf;Fd=n.z;n.z=Zd;Hd=p.buffer;p.buffer=m;te=p.divisor;p.divisor=0;ze=p.normalized;p.normalized=!1;Ae=p.offset;p.offset=0;ne=p.size;p.size=0;fe=p.state;p.state=1;de=p.stride;p.stride=8;pe=p.type;p.type=5126;be=p.w;
p.w=0;ie=p.x;p.x=0;wc=p.y;p.y=0;Uc=p.z;p.z=0;qe=r.buffer;r.buffer=l;le=r.divisor;r.divisor=0;Ld=r.normalized;r.normalized=!1;Pd=r.offset;r.offset=4;Qd=r.size;r.size=0;Rd=r.state;r.state=1;je=r.stride;r.stride=8;vf=r.type;r.type=5126;Ce=r.w;r.w=0;oe=r.x;r.x=0;Re=r.y;r.y=0;Se=r.z;r.z=0;Ka.buffer=a.positionBuffer;Ne=!1;re=null;Fe=0;He=!1;Je=Ie=0;Ge=1;Nd=0;Ud=5126;Bd=Ke=ce=$d=0;na(Ka)?(Ne=!0,re=M.createStream(34962,Ka),Ud=re.dtype):(re=M.getBuffer(Ka))?Ud=re.dtype:"constant"in Ka?(Ge=2,"number"===typeof Ka.constant?
(ce=Ka.constant,Ke=Bd=$d=0):(ce=0<Ka.constant.length?Ka.constant[0]:0,Ke=1<Ka.constant.length?Ka.constant[1]:0,Bd=2<Ka.constant.length?Ka.constant[2]:0,$d=3<Ka.constant.length?Ka.constant[3]:0)):(re=na(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),Ud="type"in Ka?N[Ka.type]:re.dtype,He=!!Ka.normalized,Je=Ka.size|0,Ie=Ka.offset|0,Nd=Ka.stride|0,Fe=Ka.divisor|0);Sd=u.buffer;u.buffer=re;De=u.divisor;u.divisor=Fe;Le=u.normalized;u.normalized=He;cf=u.offset;u.offset=Ie;af=u.size;u.size=
Je;Te=u.state;u.state=Ge;Oe=u.stride;u.stride=Nd;$e=u.type;u.type=Ud;Xe=u.w;u.w=$d;Ue=u.x;u.x=ce;Ve=u.y;u.y=Ke;Td=u.z;u.z=Bd;E.buffer=a.positionBuffer;Xd=!1;We=null;jf=0;nf=!1;kf=ff=0;lf=1;mf=0;rf=5126;Df=Cf=sf=of=0;na(E)?(Xd=!0,We=M.createStream(34962,E),rf=We.dtype):(We=M.getBuffer(E))?rf=We.dtype:"constant"in E?(lf=2,"number"===typeof E.constant?(sf=E.constant,Cf=Df=of=0):(sf=0<E.constant.length?E.constant[0]:0,Cf=1<E.constant.length?E.constant[1]:0,Df=2<E.constant.length?E.constant[2]:0,of=3<
E.constant.length?E.constant[3]:0)):(We=na(E.buffer)?M.createStream(34962,E.buffer):M.getBuffer(E.buffer),rf="type"in E?N[E.type]:We.dtype,nf=!!E.normalized,kf=E.size|0,ff=E.offset|0,mf=E.stride|0,jf=E.divisor|0);Pe=K.buffer;K.buffer=We;Ee=K.divisor;K.divisor=jf;pf=K.normalized;K.normalized=nf;qf=K.offset;K.offset=ff;Ef=K.size;K.size=kf;Hf=K.state;K.state=lf;Bf=K.stride;K.stride=mf;Ff=K.type;K.type=rf;Gf=K.w;K.w=of;xf=K.x;K.x=sf;yf=K.y;K.y=Cf;wf=K.z;K.z=Df;zf=Da.vert;Da.vert=36;Af=Da.frag;Da.frag=
35;pa.dirty=!0;f(T,a,k);T.viewportWidth=U;T.viewportHeight=A;fa[0]=H;fa[1]=t;fa[2]=z;fa[3]=la;La[0]=C;La[1]=F;La[2]=P;La[3]=I;da.blend_enable=O;ob[0]=L;ob[1]=sa;ra[0]=aa;ra[1]=J;ra[2]=Q;ra[3]=S;da.cull_enable=oa;da.cull_face=X;da.depth_enable=V;ub[0]=ga;ub[1]=ua;ub[2]=qc;ub[3]=ta;da.scissor_enable=ka;da.stencil_enable=Ha;ea&&(c.cpuTime+=performance.now()-Xa);R.offset=td;R.count=ac;R.instances=zc;R.primitive=ja;Ga[23]=dc;Ga[24]=Yc;Ga[22]=Gc;Ga[31]=Ea;Ga[32]=Jb;Ga[33]=Vb;Ga[10]=ma;Ga[34]=Oa;Ga[6]=Sb;
Ga[7]=Tb;Ga[21]=pb;Ga[8]=hb;Ga[9]=Sa;Ga[3]=Vc;db&&M.destroyStream(pc);y.buffer=Na;y.divisor=Bb;y.normalized=Ab;y.offset=Ta;y.size=Hc;y.state=Kb;y.stride=Mb;y.type=Ub;y.w=wa;y.x=nb;y.y=Ma;y.z=Pb;fb&&M.destroyStream(ib);e.buffer=Nb;e.divisor=$c;e.normalized=Ia;e.offset=vc;e.size=Ra;e.state=Ca;e.stride=lb;e.type=wb;e.w=Cb;e.x=tb;e.y=uc;e.z=xb;Db&&M.destroyStream(sc);g.buffer=Ob;g.divisor=Rb;g.normalized=fc;g.offset=hc;g.size=Ze;g.state=xc;g.stride=yc;g.type=Ac;g.w=Kc;g.x=ad;g.y=Rc;g.z=Lc;Lb&&M.destroyStream(Eb);
n.buffer=ke;n.divisor=se;n.normalized=me;n.offset=Md;n.size=Kd;n.state=id;n.stride=Bc;n.type=od;n.w=ld;n.x=cd;n.y=pd;n.z=Fd;p.buffer=Hd;p.divisor=te;p.normalized=ze;p.offset=Ae;p.size=ne;p.state=fe;p.stride=de;p.type=pe;p.w=be;p.x=ie;p.y=wc;p.z=Uc;r.buffer=qe;r.divisor=le;r.normalized=Ld;r.offset=Pd;r.size=Qd;r.state=Rd;r.stride=je;r.type=vf;r.w=Ce;r.x=oe;r.y=Re;r.z=Se;Ne&&M.destroyStream(re);u.buffer=Sd;u.divisor=De;u.normalized=Le;u.offset=cf;u.size=af;u.state=Te;u.stride=Oe;u.type=$e;u.w=Xe;u.x=
Ue;u.y=Ve;u.z=Td;Xd&&M.destroyStream(We);K.buffer=Pe;K.divisor=Ee;K.normalized=pf;K.offset=qf;K.size=Ef;K.state=Hf;K.stride=Bf;K.type=Ff;K.w=Gf;K.x=xf;K.y=yf;K.z=wf;Da.vert=zf;Da.frag=Af;pa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,c,d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K){var x,U,v,H,t,sa,O,oa,z,ba,I,V,J,ja,Z,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra;x=a.attributes;U=a.buffer;v=a.context;H=a.current;t=a.draw;
sa=a.elements;O=a.extensions;oa=a.framebuffer;z=a.gl;ba=a.isBufferArgs;I=a.next;V=a.shader;J=a.uniforms;ja=a.vao;Z=I.blend_color;ka=H.blend_color;ma=I.blend_equation;Sa=H.blend_equation;Db=I.blend_func;ea=H.blend_func;Oa=I.colorMask;W=H.colorMask;Q=I.depth_range;M=H.depth_range;T=I.polygonOffset_offset;pa=H.polygonOffset_offset;R=I.sample_coverage;Hb=H.sample_coverage;ab=I.scissor_box;S=H.scissor_box;C=I.stencil_func;na=H.stencil_func;da=I.stencil_opBack;Da=H.stencil_opBack;Ga=I.stencil_opFront;nb=
H.stencil_opFront;La=I.viewport;X=H.viewport;ob={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};ra={offset:8,stride:8};return{batch:function(a,f){var k,d,l,m,h,D;k=oa.next;k!==oa.cur&&(k?z.bindFramebuffer(36160,k.framebuffer):z.bindFramebuffer(36160,null),oa.cur=k);if(H.dirty){var A,J,V,Z,L,F,ia,ua,Y,fa,ta,N,G,ca,za,Aa,Ka,E,ma,Fb,qa,Gb,zb,La,ab,Db,ee,we,ue,Od,ge,ve;A=I.dither;A!==H.dither&&(A?z.enable(3024):z.disable(3024),H.dither=
A);J=I.depth_func;J!==H.depth_func&&(z.depthFunc(J),H.depth_func=J);V=Q[0];Z=Q[1];if(V!==M[0]||Z!==M[1])z.depthRange(V,Z),M[0]=V,M[1]=Z;L=I.depth_mask;L!==H.depth_mask&&(z.depthMask(L),H.depth_mask=L);F=Oa[0];ia=Oa[1];ua=Oa[2];Y=Oa[3];if(F!==W[0]||ia!==W[1]||ua!==W[2]||Y!==W[3])z.colorMask(F,ia,ua,Y),W[0]=F,W[1]=ia,W[2]=ua,W[3]=Y;fa=I.cull_enable;fa!==H.cull_enable&&(fa?z.enable(2884):z.disable(2884),H.cull_enable=fa);ta=I.cull_face;ta!==H.cull_face&&(z.cullFace(ta),H.cull_face=ta);N=I.frontFace;
N!==H.frontFace&&(z.frontFace(N),H.frontFace=N);G=I.lineWidth;G!==H.lineWidth&&(z.lineWidth(G),H.lineWidth=G);ca=I.polygonOffset_enable;ca!==H.polygonOffset_enable&&(ca?z.enable(32823):z.disable(32823),H.polygonOffset_enable=ca);za=T[0];Aa=T[1];if(za!==pa[0]||Aa!==pa[1])z.polygonOffset(za,Aa),pa[0]=za,pa[1]=Aa;Ka=I.sample_alpha;Ka!==H.sample_alpha&&(Ka?z.enable(32926):z.disable(32926),H.sample_alpha=Ka);E=I.sample_enable;E!==H.sample_enable&&(E?z.enable(32928):z.disable(32928),H.sample_enable=E);
ma=R[0];Fb=R[1];if(ma!==Hb[0]||Fb!==Hb[1])z.sampleCoverage(ma,Fb),Hb[0]=ma,Hb[1]=Fb;qa=I.stencil_mask;qa!==H.stencil_mask&&(z.stencilMask(qa),H.stencil_mask=qa);Gb=C[0];zb=C[1];La=C[2];if(Gb!==na[0]||zb!==na[1]||La!==na[2])z.stencilFunc(Gb,zb,La),na[0]=Gb,na[1]=zb,na[2]=La;ab=Ga[0];Db=Ga[1];ee=Ga[2];we=Ga[3];if(ab!==nb[0]||Db!==nb[1]||ee!==nb[2]||we!==nb[3])z.stencilOpSeparate(ab,Db,ee,we),nb[0]=ab,nb[1]=Db,nb[2]=ee,nb[3]=we;ue=da[0];Od=da[1];ge=da[2];ve=da[3];if(ue!==Da[0]||Od!==Da[1]||ge!==Da[2]||
ve!==Da[3])z.stencilOpSeparate(ue,Od,ge,ve),Da[0]=ue,Da[1]=Od,Da[2]=ge,Da[3]=ve}z.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;z.enable(3042);H.blend_enable=!0;z.blendEquationSeparate(32774,32774);Sa[0]=32774;Sa[1]=32774;z.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;z.disable(2929);H.depth_enable=!1;z.enable(3089);H.scissor_enable=!0;z.disable(2960);H.stencil_enable=!1;if(d=H.profile)l=performance.now(),c.count+=f;z.useProgram(b.program);m=O.angle_instanced_arrays;
var yd;ja.setVAO(null);yd=t.instances;for(h=0;h<f;++h){D=a[h];var Cd,Gd,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb,hd,Ib,oc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ye,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub;Cd=D.viewport;Gd=Cd.x|0;zd=Cd.y|0;xe="width"in Cd?Cd.width|0:v.framebufferWidth-Gd;Me="height"in Cd?Cd.height|0:v.framebufferHeight-zd;Qe=v.viewportWidth;v.viewportWidth=xe;Ad=v.viewportHeight;
v.viewportHeight=Me;z.viewport(Gd,zd,xe,Me);X[0]=Gd;X[1]=zd;X[2]=xe;X[3]=Me;Be=D.viewport;Vd=Be.x|0;Wd=Be.y|0;ae="width"in Be?Be.width|0:v.framebufferWidth-Vd;Yd="height"in Be?Be.height|0:v.framebufferHeight-Wd;z.scissor(Vd,Wd,ae,Yd);S[0]=Vd;S[1]=Wd;S[2]=ae;S[3]=Yd;ga.buffer=D.positionBuffer;qd=!1;nd=null;vd=0;bd=!1;Tc=sd=0;Dd=1;Nc=0;Ic=5126;Ib=hd=gb=rc=0;ba(ga)?(qd=!0,nd=U.createStream(34962,ga),Ic=nd.dtype):(nd=U.getBuffer(ga))?Ic=nd.dtype:"constant"in ga?(Dd=2,"number"===typeof ga.constant?(gb=
ga.constant,hd=Ib=rc=0):(gb=0<ga.constant.length?ga.constant[0]:0,hd=1<ga.constant.length?ga.constant[1]:0,Ib=2<ga.constant.length?ga.constant[2]:0,rc=3<ga.constant.length?ga.constant[3]:0)):(nd=ba(ga.buffer)?U.createStream(34962,ga.buffer):U.getBuffer(ga.buffer),Ic="type"in ga?ob[ga.type]:nd.dtype,bd=!!ga.normalized,Tc=ga.size|0,sd=ga.offset|0,Nc=ga.stride|0,vd=ga.divisor|0);oc=g.location;Xa=x[oc];if(1===Dd){Xa.buffer||z.enableVertexAttribArray(oc);Qc=Tc||2;if(Xa.type!==Ic||Xa.size!==Qc||Xa.buffer!==
nd||Xa.normalized!==bd||Xa.offset!==sd||Xa.stride!==Nc)z.bindBuffer(34962,nd.buffer),z.vertexAttribPointer(oc,Qc,Ic,bd,Nc,sd),Xa.type=Ic,Xa.size=Qc,Xa.buffer=nd,Xa.normalized=bd,Xa.offset=sd,Xa.stride=Nc;Xa.divisor!==vd&&(m.vertexAttribDivisorANGLE(oc,vd),Xa.divisor=vd)}else if(Xa.buffer&&(z.disableVertexAttribArray(oc),Xa.buffer=null),Xa.x!==gb||Xa.y!==hd||Xa.z!==Ib||Xa.w!==rc)z.vertexAttrib4f(oc,gb,hd,Ib,rc),Xa.x=gb,Xa.y=hd,Xa.z=Ib,Xa.w=rc;ra.buffer=D.positionFractBuffer;ac=!1;lc=null;Id=0;rd=!1;
dc=Fc=0;Cc=1;Yc=0;Zb=5126;ud=Ea=Ya=Gc=0;ba(ra)?(ac=!0,lc=U.createStream(34962,ra),Zb=lc.dtype):(lc=U.getBuffer(ra))?Zb=lc.dtype:"constant"in ra?(Cc=2,"number"===typeof ra.constant?(Ya=ra.constant,Ea=ud=Gc=0):(Ya=0<ra.constant.length?ra.constant[0]:0,Ea=1<ra.constant.length?ra.constant[1]:0,ud=2<ra.constant.length?ra.constant[2]:0,Gc=3<ra.constant.length?ra.constant[3]:0)):(lc=ba(ra.buffer)?U.createStream(34962,ra.buffer):U.getBuffer(ra.buffer),Zb="type"in ra?ob[ra.type]:lc.dtype,rd=!!ra.normalized,
dc=ra.size|0,Fc=ra.offset|0,Yc=ra.stride|0,Id=ra.divisor|0);Jb=n.location;Ua=x[Jb];if(1===Cc){Ua.buffer||z.enableVertexAttribArray(Jb);Vb=dc||2;if(Ua.type!==Zb||Ua.size!==Vb||Ua.buffer!==lc||Ua.normalized!==rd||Ua.offset!==Fc||Ua.stride!==Yc)z.bindBuffer(34962,lc.buffer),z.vertexAttribPointer(Jb,Vb,Zb,rd,Yc,Fc),Ua.type=Zb,Ua.size=Vb,Ua.buffer=lc,Ua.normalized=rd,Ua.offset=Fc,Ua.stride=Yc;Ua.divisor!==Id&&(m.vertexAttribDivisorANGLE(Jb,Id),Ua.divisor=Id)}else if(Ua.buffer&&(z.disableVertexAttribArray(Jb),
Ua.buffer=null),Ua.x!==Ya||Ua.y!==Ea||Ua.z!==ud||Ua.w!==Gc)z.vertexAttrib4f(Jb,Ya,Ea,ud,Gc),Ua.x=Ya,Ua.y=Ea,Ua.z=ud,Ua.w=Gc;cb=D.fill;Dc=cb[0];ye=cb[1];Sb=cb[2];Tb=cb[3];h&&Xb===Dc&&jc===ye&&w===Sb&&Pa===Tb||(Xb=Dc,jc=ye,w=Sb,Pa=Tb,z.uniform4f(B.location,Dc,ye,Sb,Tb));pb=D.scale;vb=pb[0];Qa=pb[1];h&&hb===vb&&Oc===Qa||(hb=vb,Oc=Qa,z.uniform2f(p.location,vb,Qa));Yb=D.scaleFract;jd=Yb[0];pc=Yb[1];h&&db===jd&&Zc===pc||(db=jd,Zc=pc,z.uniform2f(r.location,jd,pc));mc=D.translate;jb=mc[0];va=mc[1];h&&kb===
jb&&qb===va||(kb=jb,qb=va,z.uniform2f(u.location,jb,va));ya=D.translateFract;Va=ya[0];Ba=ya[1];h&&bb===Va&&eb===Ba||(bb=Va,eb=Ba,z.uniform2f(K.location,Va,Ba));Na=D.id;h&&Bb===Na||(Bb=Na,z.uniform1f(y.location,Na));Ab=D.opacity;h&&Ta===Ab||(Ta=Ab,z.uniform1f(e.location,Ab));Hc=q.call(this,v,D,h);Kb=null;(Kb=(Mb=ba(Hc))?sa.createStream(Hc):sa.getElements(Hc))&&z.bindBuffer(34963,Kb.buffer.buffer);if(Ub=Kb?Kb.vertCount:-1)0<yd?Kb?m.drawElementsInstancedANGLE(4,Ub,Kb.type,0<<(Kb.type-5121>>1),yd):m.drawArraysInstancedANGLE(4,
0,Ub,yd):0>yd&&(Kb?z.drawElements(4,Ub,Kb.type,0<<(Kb.type-5121>>1)):z.drawArrays(4,0,Ub)),v.viewportWidth=Qe,v.viewportHeight=Ad,qd&&U.destroyStream(nd),ac&&U.destroyStream(lc),Mb&&sa.destroyStream(Kb)}H.dirty=!0;ja.setVAO(null);d&&(c.cpuTime+=performance.now()-l)},draw:function(b){var a,f,k,q,l,m,J,V,Z,ma,La,L,F,ia,ua,Y,fa,ta,N,G,ca,za;a=oa.next;a!==oa.cur&&(a?z.bindFramebuffer(36160,a.framebuffer):z.bindFramebuffer(36160,null),oa.cur=a);if(H.dirty){a=I.dither;a!==H.dither&&(a?z.enable(3024):z.disable(3024),
H.dither=a);a=I.depth_func;a!==H.depth_func&&(z.depthFunc(a),H.depth_func=a);a=Q[0];m=Q[1];if(a!==M[0]||m!==M[1])z.depthRange(a,m),M[0]=a,M[1]=m;a=I.depth_mask;a!==H.depth_mask&&(z.depthMask(a),H.depth_mask=a);a=Oa[0];m=Oa[1];f=Oa[2];k=Oa[3];if(a!==W[0]||m!==W[1]||f!==W[2]||k!==W[3])z.colorMask(a,m,f,k),W[0]=a,W[1]=m,W[2]=f,W[3]=k;a=I.cull_enable;a!==H.cull_enable&&(a?z.enable(2884):z.disable(2884),H.cull_enable=a);a=I.cull_face;a!==H.cull_face&&(z.cullFace(a),H.cull_face=a);a=I.frontFace;a!==H.frontFace&&
(z.frontFace(a),H.frontFace=a);a=I.lineWidth;a!==H.lineWidth&&(z.lineWidth(a),H.lineWidth=a);a=I.polygonOffset_enable;a!==H.polygonOffset_enable&&(a?z.enable(32823):z.disable(32823),H.polygonOffset_enable=a);a=T[0];m=T[1];if(a!==pa[0]||m!==pa[1])z.polygonOffset(a,m),pa[0]=a,pa[1]=m;a=I.sample_alpha;a!==H.sample_alpha&&(a?z.enable(32926):z.disable(32926),H.sample_alpha=a);a=I.sample_enable;a!==H.sample_enable&&(a?z.enable(32928):z.disable(32928),H.sample_enable=a);a=R[0];m=R[1];if(a!==Hb[0]||m!==Hb[1])z.sampleCoverage(a,
m),Hb[0]=a,Hb[1]=m;a=I.stencil_mask;a!==H.stencil_mask&&(z.stencilMask(a),H.stencil_mask=a);a=C[0];m=C[1];f=C[2];if(a!==na[0]||m!==na[1]||f!==na[2])z.stencilFunc(a,m,f),na[0]=a,na[1]=m,na[2]=f;a=Ga[0];m=Ga[1];f=Ga[2];k=Ga[3];if(a!==nb[0]||m!==nb[1]||f!==nb[2]||k!==nb[3])z.stencilOpSeparate(a,m,f,k),nb[0]=a,nb[1]=m,nb[2]=f,nb[3]=k;a=da[0];m=da[1];f=da[2];k=da[3];if(a!==Da[0]||m!==Da[1]||f!==Da[2]||k!==Da[3])z.stencilOpSeparate(a,m,f,k),Da[0]=a,Da[1]=m,Da[2]=f,Da[3]=k}a=b.viewport;f=a.x|0;k=a.y|0;q=
"width"in a?a.width|0:v.framebufferWidth-f;l="height"in a?a.height|0:v.framebufferHeight-k;a=v.viewportWidth;v.viewportWidth=q;m=v.viewportHeight;v.viewportHeight=l;z.viewport(f,k,q,l);X[0]=f;X[1]=k;X[2]=q;X[3]=l;z.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;z.enable(3042);H.blend_enable=!0;z.blendEquationSeparate(32774,32774);Sa[0]=32774;Sa[1]=32774;z.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;z.disable(2929);H.depth_enable=!1;l=b.viewport;f=l.x|0;k=l.y|0;q="width"in
l?l.width|0:v.framebufferWidth-f;l="height"in l?l.height|0:v.framebufferHeight-k;z.scissor(f,k,q,l);S[0]=f;S[1]=k;S[2]=q;S[3]=l;z.enable(3089);H.scissor_enable=!0;z.disable(2960);H.stencil_enable=!1;if(f=H.profile)J=performance.now(),c.count++;z.useProgram(d.program);k=O.angle_instanced_arrays;ja.setVAO(null);ga.buffer=b.positionBuffer;q=!1;V=0;Z=!1;La=ma=0;L=1;F=0;ia=5126;ta=fa=Y=ua=0;ba(ga)?(q=!0,l=U.createStream(34962,ga),ia=l.dtype):(l=U.getBuffer(ga))?ia=l.dtype:"constant"in ga?(L=2,"number"===
typeof ga.constant?(Y=ga.constant,fa=ta=ua=0):(Y=0<ga.constant.length?ga.constant[0]:0,fa=1<ga.constant.length?ga.constant[1]:0,ta=2<ga.constant.length?ga.constant[2]:0,ua=3<ga.constant.length?ga.constant[3]:0)):(l=ba(ga.buffer)?U.createStream(34962,ga.buffer):U.getBuffer(ga.buffer),ia="type"in ga?ob[ga.type]:l.dtype,Z=!!ga.normalized,La=ga.size|0,ma=ga.offset|0,F=ga.stride|0,V=ga.divisor|0);N=g.location;G=x[N];if(1===L){G.buffer||z.enableVertexAttribArray(N);La=La||2;if(G.type!==ia||G.size!==La||
G.buffer!==l||G.normalized!==Z||G.offset!==ma||G.stride!==F)z.bindBuffer(34962,l.buffer),z.vertexAttribPointer(N,La,ia,Z,F,ma),G.type=ia,G.size=La,G.buffer=l,G.normalized=Z,G.offset=ma,G.stride=F;G.divisor!==V&&(k.vertexAttribDivisorANGLE(N,V),G.divisor=V)}else if(G.buffer&&(z.disableVertexAttribArray(N),G.buffer=null),G.x!==Y||G.y!==fa||G.z!==ta||G.w!==ua)z.vertexAttrib4f(N,Y,fa,ta,ua),G.x=Y,G.y=fa,G.z=ta,G.w=ua;ra.buffer=b.positionFractBuffer;V=!1;ma=0;F=!1;ua=ia=0;Y=1;N=0;G=5126;za=ca=ta=fa=0;
ba(ra)?(V=!0,Z=U.createStream(34962,ra),G=Z.dtype):(Z=U.getBuffer(ra))?G=Z.dtype:"constant"in ra?(Y=2,"number"===typeof ra.constant?(ta=ra.constant,ca=za=fa=0):(ta=0<ra.constant.length?ra.constant[0]:0,ca=1<ra.constant.length?ra.constant[1]:0,za=2<ra.constant.length?ra.constant[2]:0,fa=3<ra.constant.length?ra.constant[3]:0)):(Z=ba(ra.buffer)?U.createStream(34962,ra.buffer):U.getBuffer(ra.buffer),G="type"in ra?ob[ra.type]:Z.dtype,F=!!ra.normalized,ua=ra.size|0,ia=ra.offset|0,N=ra.stride|0,ma=ra.divisor|
0);La=n.location;L=x[La];if(1===Y){L.buffer||z.enableVertexAttribArray(La);ua=ua||2;if(L.type!==G||L.size!==ua||L.buffer!==Z||L.normalized!==F||L.offset!==ia||L.stride!==N)z.bindBuffer(34962,Z.buffer),z.vertexAttribPointer(La,ua,G,F,N,ia),L.type=G,L.size=ua,L.buffer=Z,L.normalized=F,L.offset=ia,L.stride=N;L.divisor!==ma&&(k.vertexAttribDivisorANGLE(La,ma),L.divisor=ma)}else if(L.buffer&&(z.disableVertexAttribArray(La),L.buffer=null),L.x!==ta||L.y!==ca||L.z!==za||L.w!==fa)z.vertexAttrib4f(La,ta,ca,
za,fa),L.x=ta,L.y=ca,L.z=za,L.w=fa;ma=b.fill;z.uniform4f(B.location,ma[0],ma[1],ma[2],ma[3]);ma=b.scale;z.uniform2f(p.location,ma[0],ma[1]);ma=b.scaleFract;z.uniform2f(r.location,ma[0],ma[1]);ma=b.translate;z.uniform2f(u.location,ma[0],ma[1]);ma=b.translateFract;z.uniform2f(K.location,ma[0],ma[1]);z.uniform1f(y.location,b.id);z.uniform1f(e.location,b.opacity);ma=h.call(this,v,b,0);(ma=(b=ba(ma))?sa.createStream(ma):sa.getElements(ma))&&z.bindBuffer(34963,ma.buffer.buffer);if(F=ma?ma.vertCount:-1)ia=
t.instances,0<ia?ma?k.drawElementsInstancedANGLE(4,F,ma.type,0<<(ma.type-5121>>1),ia):k.drawArraysInstancedANGLE(4,0,F,ia):0>ia&&(ma?z.drawElements(4,F,ma.type,0<<(ma.type-5121>>1)):z.drawArrays(4,0,F)),H.dirty=!0,ja.setVAO(null),v.viewportWidth=a,v.viewportHeight=m,f&&(c.cpuTime+=performance.now()-J),q&&U.destroyStream(l),V&&U.destroyStream(Z),b&&sa.destroyStream(ma)},scope:function(b,e,g){var a,n,p,r,q,d,u,h,y,B,x,K,D,A,z,C,O,G,M,Q,R,S,E,oa,T,X,W,da,na,ka,ea,pa,Ga,ja,Da,Oa,Sa,Hb,nb,Gd,zd,xe,Me,
Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb,hd,Ib,oc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ye,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab;a=b.viewport;n=a.x|0;p=a.y|0;r="width"in a?a.width|0:v.framebufferWidth-n;q="height"in a?a.height|0:v.framebufferHeight-p;d=v.viewportWidth;v.viewportWidth=r;u=v.viewportHeight;v.viewportHeight=q;h=La[0];La[0]=n;y=La[1];La[1]=p;B=La[2];La[2]=r;x=La[3];La[3]=q;K=Z[0];Z[0]=0;D=Z[1];Z[1]=0;A=
Z[2];Z[2]=0;z=Z[3];Z[3]=0;C=I.blend_enable;I.blend_enable=!0;O=ma[0];ma[0]=32774;G=ma[1];ma[1]=32774;M=Db[0];Db[0]=770;Q=Db[1];Db[1]=771;R=Db[2];Db[2]=773;S=Db[3];Db[3]=1;E=I.depth_enable;I.depth_enable=!1;oa=b.viewport;T=oa.x|0;X=oa.y|0;W="width"in oa?oa.width|0:v.framebufferWidth-T;da="height"in oa?oa.height|0:v.framebufferHeight-X;na=ab[0];ab[0]=T;ka=ab[1];ab[1]=X;ea=ab[2];ab[2]=W;pa=ab[3];ab[3]=da;Ga=I.scissor_enable;I.scissor_enable=!0;ja=I.stencil_enable;I.stencil_enable=!1;if(Da=H.profile)Oa=
performance.now(),c.count++;Sa=m.call(this,v,b,g);Hb=null;Hb=(nb=ba(Sa))?sa.createStream(Sa):sa.getElements(Sa);Gd=t.elements;t.elements=Hb;zd=t.offset;t.offset=0;xe=Hb?Hb.vertCount:-1;Me=t.count;t.count=xe;Qe=t.primitive;t.primitive=4;Ad=b.fill;Be=J[14];J[14]=Ad;Vd=b.id;Wd=J[31];J[31]=Vd;ae=b.opacity;Yd=J[10];J[10]=ae;qd=v.pixelRatio;nd=J[34];J[34]=qd;vd=b.scale;bd=J[6];J[6]=vd;sd=b.scaleFract;Tc=J[7];J[7]=sd;Dd=b.translate;Nc=J[8];J[8]=Dd;Ic=b.translateFract;rc=J[9];J[9]=Ic;gb=l.call(this,v,b,g);
hd=J[3];J[3]=gb;ga.buffer=b.positionBuffer;Ib=!1;oc=null;Xa=0;Qc=!1;lc=ac=0;Id=1;rd=0;Fc=5126;Zb=Yc=Cc=dc=0;ba(ga)?(Ib=!0,oc=U.createStream(34962,ga),Fc=oc.dtype):(oc=U.getBuffer(ga))?Fc=oc.dtype:"constant"in ga?(Id=2,"number"===typeof ga.constant?(Cc=ga.constant,Yc=Zb=dc=0):(Cc=0<ga.constant.length?ga.constant[0]:0,Yc=1<ga.constant.length?ga.constant[1]:0,Zb=2<ga.constant.length?ga.constant[2]:0,dc=3<ga.constant.length?ga.constant[3]:0)):(oc=ba(ga.buffer)?U.createStream(34962,ga.buffer):U.getBuffer(ga.buffer),
Fc="type"in ga?ob[ga.type]:oc.dtype,Qc=!!ga.normalized,lc=ga.size|0,ac=ga.offset|0,rd=ga.stride|0,Xa=ga.divisor|0);Gc=f.buffer;f.buffer=oc;Ya=f.divisor;f.divisor=Xa;Ea=f.normalized;f.normalized=Qc;ud=f.offset;f.offset=ac;Jb=f.size;f.size=lc;Ua=f.state;f.state=Id;Vb=f.stride;f.stride=rd;cb=f.type;f.type=Fc;Dc=f.w;f.w=dc;Xb=f.x;f.x=Cc;ye=f.y;f.y=Yc;jc=f.z;f.z=Zb;ra.buffer=b.positionFractBuffer;Sb=!1;w=null;Tb=0;Pa=!1;vb=pb=0;hb=1;Qa=0;Oc=5126;pc=db=jd=Yb=0;ba(ra)?(Sb=!0,w=U.createStream(34962,ra),Oc=
w.dtype):(w=U.getBuffer(ra))?Oc=w.dtype:"constant"in ra?(hb=2,"number"===typeof ra.constant?(jd=ra.constant,db=pc=Yb=0):(jd=0<ra.constant.length?ra.constant[0]:0,db=1<ra.constant.length?ra.constant[1]:0,pc=2<ra.constant.length?ra.constant[2]:0,Yb=3<ra.constant.length?ra.constant[3]:0)):(w=ba(ra.buffer)?U.createStream(34962,ra.buffer):U.getBuffer(ra.buffer),Oc="type"in ra?ob[ra.type]:w.dtype,Pa=!!ra.normalized,vb=ra.size|0,pb=ra.offset|0,Qa=ra.stride|0,Tb=ra.divisor|0);Zc=k.buffer;k.buffer=w;mc=k.divisor;
k.divisor=Tb;jb=k.normalized;k.normalized=Pa;kb=k.offset;k.offset=pb;va=k.size;k.size=vb;qb=k.state;k.state=hb;ya=k.stride;k.stride=Qa;Va=k.type;k.type=Oc;bb=k.w;k.w=Yb;Ba=k.x;k.x=jd;eb=k.y;k.y=db;Na=k.z;k.z=pc;Bb=V.vert;V.vert=42;Ab=V.frag;V.frag=41;H.dirty=!0;e(v,b,g);v.viewportWidth=d;v.viewportHeight=u;La[0]=h;La[1]=y;La[2]=B;La[3]=x;Z[0]=K;Z[1]=D;Z[2]=A;Z[3]=z;I.blend_enable=C;ma[0]=O;ma[1]=G;Db[0]=M;Db[1]=Q;Db[2]=R;Db[3]=S;I.depth_enable=E;ab[0]=na;ab[1]=ka;ab[2]=ea;ab[3]=pa;I.scissor_enable=
Ga;I.stencil_enable=ja;Da&&(c.cpuTime+=performance.now()-Oa);nb&&sa.destroyStream(Hb);t.elements=Gd;t.offset=zd;t.count=Me;t.primitive=Qe;J[14]=Be;J[31]=Wd;J[10]=Yd;J[34]=nd;J[6]=bd;J[7]=Tc;J[8]=Nc;J[9]=rc;J[3]=hd;Ib&&U.destroyStream(oc);f.buffer=Gc;f.divisor=Ya;f.normalized=Ea;f.offset=ud;f.size=Jb;f.state=Ua;f.stride=Vb;f.type=cb;f.w=Dc;f.x=Xb;f.y=ye;f.z=jc;Sb&&U.destroyStream(w);k.buffer=Zc;k.divisor=mc;k.normalized=jb;k.offset=kb;k.size=va;k.state=qb;k.stride=ya;k.type=Va;k.w=bb;k.x=Ba;k.y=eb;
k.z=Na;V.vert=Bb;V.frag=Ab;H.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,H,t,sa,O,oa,z,ba,I,V,J,ja,Z,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra,cc,qc,ic,td,zc){var aa,P,ha,Ha,ub,Pc,Vc,L,F,ia,ua,Y,fa,ta,N,G,ca,za,Aa,Ka,E,nc,Fb,qa,Gb,zb,Ye,xd,he,ee,we,ue,Od,ge,ve,yd,
Cd,Gd,zd;aa=a.attributes;P=a.buffer;ha=a.context;Ha=a.current;ub=a.draw;Pc=a.elements;Vc=a.extensions;L=a.framebuffer;F=a.gl;ia=a.isBufferArgs;ua=a.next;Y=a.shader;fa=a.uniforms;ta=a.vao;N=ua.blend_color;G=Ha.blend_color;ca=ua.blend_equation;za=Ha.blend_equation;Aa=ua.blend_func;Ka=Ha.blend_func;E=ua.colorMask;nc=Ha.colorMask;Fb=ua.depth_range;qa=Ha.depth_range;Gb=ua.polygonOffset_offset;zb=Ha.polygonOffset_offset;Ye=ua.sample_coverage;xd=Ha.sample_coverage;he=ua.scissor_box;ee=Ha.scissor_box;we=
ua.stencil_func;ue=Ha.stencil_func;Od=ua.stencil_opBack;ge=Ha.stencil_opBack;ve=ua.stencil_opFront;yd=Ha.stencil_opFront;Cd=ua.viewport;Gd=Ha.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,e){var g,a,f,k,n,p;g=L.next;g!==L.cur&&(g?F.bindFramebuffer(36160,g.framebuffer):F.bindFramebuffer(36160,null),L.cur=g);if(Ha.dirty){var r,q,d,u,m,l,h,y,B,x,K,v,D,U,A,t,H,z,I,la,O,N,sa,J,oa,V,Z,Y,fa,ba,Aa,Ua,ja,cb;r=ua.dither;r!==
Ha.dither&&(r?F.enable(3024):F.disable(3024),Ha.dither=r);q=ca[0];d=ca[1];if(q!==za[0]||d!==za[1])F.blendEquationSeparate(q,d),za[0]=q,za[1]=d;u=ua.depth_func;u!==Ha.depth_func&&(F.depthFunc(u),Ha.depth_func=u);m=Fb[0];l=Fb[1];if(m!==qa[0]||l!==qa[1])F.depthRange(m,l),qa[0]=m,qa[1]=l;h=ua.depth_mask;h!==Ha.depth_mask&&(F.depthMask(h),Ha.depth_mask=h);y=E[0];B=E[1];x=E[2];K=E[3];if(y!==nc[0]||B!==nc[1]||x!==nc[2]||K!==nc[3])F.colorMask(y,B,x,K),nc[0]=y,nc[1]=B,nc[2]=x,nc[3]=K;v=ua.cull_enable;v!==
Ha.cull_enable&&(v?F.enable(2884):F.disable(2884),Ha.cull_enable=v);D=ua.cull_face;D!==Ha.cull_face&&(F.cullFace(D),Ha.cull_face=D);U=ua.frontFace;U!==Ha.frontFace&&(F.frontFace(U),Ha.frontFace=U);A=ua.lineWidth;A!==Ha.lineWidth&&(F.lineWidth(A),Ha.lineWidth=A);t=ua.polygonOffset_enable;t!==Ha.polygonOffset_enable&&(t?F.enable(32823):F.disable(32823),Ha.polygonOffset_enable=t);H=Gb[0];z=Gb[1];if(H!==zb[0]||z!==zb[1])F.polygonOffset(H,z),zb[0]=H,zb[1]=z;I=ua.sample_alpha;I!==Ha.sample_alpha&&(I?F.enable(32926):
F.disable(32926),Ha.sample_alpha=I);la=ua.sample_enable;la!==Ha.sample_enable&&(la?F.enable(32928):F.disable(32928),Ha.sample_enable=la);O=Ye[0];N=Ye[1];if(O!==xd[0]||N!==xd[1])F.sampleCoverage(O,N),xd[0]=O,xd[1]=N;sa=ua.stencil_mask;sa!==Ha.stencil_mask&&(F.stencilMask(sa),Ha.stencil_mask=sa);J=we[0];oa=we[1];V=we[2];if(J!==ue[0]||oa!==ue[1]||V!==ue[2])F.stencilFunc(J,oa,V),ue[0]=J,ue[1]=oa,ue[2]=V;Z=ve[0];Y=ve[1];fa=ve[2];ba=ve[3];if(Z!==yd[0]||Y!==yd[1]||fa!==yd[2]||ba!==yd[3])F.stencilOpSeparate(Z,
Y,fa,ba),yd[0]=Z,yd[1]=Y,yd[2]=fa,yd[3]=ba;Aa=Od[0];Ua=Od[1];ja=Od[2];cb=Od[3];if(Aa!==ge[0]||Ua!==ge[1]||ja!==ge[2]||cb!==ge[3])F.stencilOpSeparate(Aa,Ua,ja,cb),ge[0]=Aa,ge[1]=Ua,ge[2]=ja,ge[3]=cb}F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);Ha.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);Ka[0]=770;Ka[1]=771;Ka[2]=773;Ka[3]=1;F.disable(2929);Ha.depth_enable=!1;F.enable(3089);Ha.scissor_enable=!0;F.disable(2960);Ha.stencil_enable=!1;if(a=Ha.profile)f=performance.now(),c.count+=
e;F.useProgram(ka.program);k=Vc.angle_instanced_arrays;var Dc;ta.setVAO(null);F.uniform1i(C.location,!1);F.uniform1i(nb.location,pa.bind());Dc=ub.instances;for(n=0;n<e;++n){p=b[n];var Xb,ye,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,Cd,Zd,ke,se,me,Md,
Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,he,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf;Xb=p.viewport;ye=Xb.x|0;jc=Xb.y|0;Sb="width"in Xb?Xb.width|0:ha.framebufferWidth-ye;w="height"in Xb?Xb.height|0:ha.framebufferHeight-jc;Tb=ha.viewportWidth;ha.viewportWidth=Sb;Pa=ha.viewportHeight;ha.viewportHeight=w;
F.viewport(ye,jc,Sb,w);Gd[0]=ye;Gd[1]=jc;Gd[2]=Sb;Gd[3]=w;pb=p.viewport;vb=pb.x|0;hb=pb.y|0;Qa="width"in pb?pb.width|0:ha.framebufferWidth-vb;Oc="height"in pb?pb.height|0:ha.framebufferHeight-hb;F.scissor(vb,hb,Qa,Oc);ee[0]=vb;ee[1]=hb;ee[2]=Qa;ee[3]=Oc;Yb=ma.call(this,ha,p,n);jd=!1;db=null;pc=0;Zc=!1;jb=mc=0;kb=1;va=0;qb=5126;Ba=bb=Va=ya=0;ia(Yb)?(jd=!0,db=P.createStream(34962,Yb),qb=db.dtype):(db=P.getBuffer(Yb))?qb=db.dtype:"constant"in Yb?(kb=2,"number"===typeof Yb.constant?(Va=Yb.constant,bb=
Ba=ya=0):(Va=0<Yb.constant.length?Yb.constant[0]:0,bb=1<Yb.constant.length?Yb.constant[1]:0,Ba=2<Yb.constant.length?Yb.constant[2]:0,ya=3<Yb.constant.length?Yb.constant[3]:0)):(db=ia(Yb.buffer)?P.createStream(34962,Yb.buffer):P.getBuffer(Yb.buffer),qb="type"in Yb?zd[Yb.type]:db.dtype,Zc=!!Yb.normalized,jb=Yb.size|0,mc=Yb.offset|0,va=Yb.stride|0,pc=Yb.divisor|0);eb=qc.location;Na=aa[eb];if(1===kb){Na.buffer||F.enableVertexAttribArray(eb);Bb=jb||1;if(Na.type!==qb||Na.size!==Bb||Na.buffer!==db||Na.normalized!==
Zc||Na.offset!==mc||Na.stride!==va)F.bindBuffer(34962,db.buffer),F.vertexAttribPointer(eb,Bb,qb,Zc,va,mc),Na.type=qb,Na.size=Bb,Na.buffer=db,Na.normalized=Zc,Na.offset=mc,Na.stride=va;Na.divisor!==pc&&(k.vertexAttribDivisorANGLE(eb,pc),Na.divisor=pc)}else if(Na.buffer&&(F.disableVertexAttribArray(eb),Na.buffer=null),Na.x!==Va||Na.y!==bb||Na.z!==Ba||Na.w!==ya)F.vertexAttrib4f(eb,Va,bb,Ba,ya),Na.x=Va,Na.y=bb,Na.z=Ba,Na.w=ya;Ab=Sa.call(this,ha,p,n);Ta=!1;Hc=null;Kb=0;Mb=!1;wa=Ub=0;Jd=1;Ma=0;Pb=5126;
ec=xa=ib=fb=0;ia(Ab)?(Ta=!0,Hc=P.createStream(34962,Ab),Pb=Hc.dtype):(Hc=P.getBuffer(Ab))?Pb=Hc.dtype:"constant"in Ab?(Jd=2,"number"===typeof Ab.constant?(ib=Ab.constant,xa=ec=fb=0):(ib=0<Ab.constant.length?Ab.constant[0]:0,xa=1<Ab.constant.length?Ab.constant[1]:0,ec=2<Ab.constant.length?Ab.constant[2]:0,fb=3<Ab.constant.length?Ab.constant[3]:0)):(Hc=ia(Ab.buffer)?P.createStream(34962,Ab.buffer):P.getBuffer(Ab.buffer),Pb="type"in Ab?zd[Ab.type]:Hc.dtype,Mb=!!Ab.normalized,wa=Ab.size|0,Ub=Ab.offset|
0,Ma=Ab.stride|0,Kb=Ab.divisor|0);Fa=td.location;rb=aa[Fa];if(1===Jd){rb.buffer||F.enableVertexAttribArray(Fa);sb=wa||1;if(rb.type!==Pb||rb.size!==sb||rb.buffer!==Hc||rb.normalized!==Mb||rb.offset!==Ub||rb.stride!==Ma)F.bindBuffer(34962,Hc.buffer),F.vertexAttribPointer(Fa,sb,Pb,Mb,Ma,Ub),rb.type=Pb,rb.size=sb,rb.buffer=Hc,rb.normalized=Mb,rb.offset=Ub,rb.stride=Ma;rb.divisor!==Kb&&(k.vertexAttribDivisorANGLE(Fa,Kb),rb.divisor=Kb)}else if(rb.buffer&&(F.disableVertexAttribArray(Fa),rb.buffer=null),
rb.x!==ib||rb.y!==xa||rb.z!==ec||rb.w!==fb)F.vertexAttrib4f(Fa,ib,xa,ec,fb),rb.x=ib,rb.y=xa,rb.z=ec,rb.w=fb;Za=Db.call(this,ha,p,n);$a=!1;kc=null;dd=0;tc=!1;Nb=Wa=0;$c=1;Ia=0;vc=5126;wb=lb=Ca=Ra=0;ia(Za)?($a=!0,kc=P.createStream(34962,Za),vc=kc.dtype):(kc=P.getBuffer(Za))?vc=kc.dtype:"constant"in Za?($c=2,"number"===typeof Za.constant?(Ca=Za.constant,lb=wb=Ra=0):(Ca=0<Za.constant.length?Za.constant[0]:0,lb=1<Za.constant.length?Za.constant[1]:0,wb=2<Za.constant.length?Za.constant[2]:0,Ra=3<Za.constant.length?
Za.constant[3]:0)):(kc=ia(Za.buffer)?P.createStream(34962,Za.buffer):P.getBuffer(Za.buffer),vc="type"in Za?zd[Za.type]:kc.dtype,tc=!!Za.normalized,Nb=Za.size|0,Wa=Za.offset|0,Ia=Za.stride|0,dd=Za.divisor|0);Cb=ic.location;tb=aa[Cb];if(1===$c){tb.buffer||F.enableVertexAttribArray(Cb);uc=Nb||1;if(tb.type!==vc||tb.size!==uc||tb.buffer!==kc||tb.normalized!==tc||tb.offset!==Wa||tb.stride!==Ia)F.bindBuffer(34962,kc.buffer),F.vertexAttribPointer(Cb,uc,vc,tc,Ia,Wa),tb.type=vc,tb.size=uc,tb.buffer=kc,tb.normalized=
tc,tb.offset=Wa,tb.stride=Ia;tb.divisor!==dd&&(k.vertexAttribDivisorANGLE(Cb,dd),tb.divisor=dd)}else if(tb.buffer&&(F.disableVertexAttribArray(Cb),tb.buffer=null),tb.x!==Ca||tb.y!==lb||tb.z!==wb||tb.w!==Ra)F.vertexAttrib4f(Cb,Ca,lb,wb,Ra),tb.x=Ca,tb.y=lb,tb.z=wb,tb.w=Ra;xb=ea.call(this,ha,p,n);wd=!1;sc=null;Ed=0;Jc=!1;fd=ed=0;Wb=1;bc=0;Qb=5126;yb=mb=$b=Ja=0;ia(xb)?(wd=!0,sc=P.createStream(34962,xb),Qb=sc.dtype):(sc=P.getBuffer(xb))?Qb=sc.dtype:"constant"in xb?(Wb=2,"number"===typeof xb.constant?($b=
xb.constant,mb=yb=Ja=0):($b=0<xb.constant.length?xb.constant[0]:0,mb=1<xb.constant.length?xb.constant[1]:0,yb=2<xb.constant.length?xb.constant[2]:0,Ja=3<xb.constant.length?xb.constant[3]:0)):(sc=ia(xb.buffer)?P.createStream(34962,xb.buffer):P.getBuffer(xb.buffer),Qb="type"in xb?zd[xb.type]:sc.dtype,Jc=!!xb.normalized,fd=xb.size|0,ed=xb.offset|0,bc=xb.stride|0,Ed=xb.divisor|0);Ob=zc.location;Rb=aa[Ob];if(1===Wb){Rb.buffer||F.enableVertexAttribArray(Ob);fc=fd||1;if(Rb.type!==Qb||Rb.size!==fc||Rb.buffer!==
sc||Rb.normalized!==Jc||Rb.offset!==ed||Rb.stride!==bc)F.bindBuffer(34962,sc.buffer),F.vertexAttribPointer(Ob,fc,Qb,Jc,bc,ed),Rb.type=Qb,Rb.size=fc,Rb.buffer=sc,Rb.normalized=Jc,Rb.offset=ed,Rb.stride=bc;Rb.divisor!==Ed&&(k.vertexAttribDivisorANGLE(Ob,Ed),Rb.divisor=Ed)}else if(Rb.buffer&&(F.disableVertexAttribArray(Ob),Rb.buffer=null),Rb.x!==$b||Rb.y!==mb||Rb.z!==yb||Rb.w!==Ja)F.vertexAttrib4f(Ob,$b,mb,yb,Ja),Rb.x=$b,Rb.y=mb,Rb.z=yb,Rb.w=Ja;hc=Oa.call(this,ha,p,n);Ze=!1;xc=null;yc=0;Ac=!1;ad=Kc=
0;Rc=1;Lc=0;Lb=5126;Sc=Ec=Mc=Eb=0;ia(hc)?(Ze=!0,xc=P.createStream(34962,hc),Lb=xc.dtype):(xc=P.getBuffer(hc))?Lb=xc.dtype:"constant"in hc?(Rc=2,"number"===typeof hc.constant?(Mc=hc.constant,Ec=Sc=Eb=0):(Mc=0<hc.constant.length?hc.constant[0]:0,Ec=1<hc.constant.length?hc.constant[1]:0,Sc=2<hc.constant.length?hc.constant[2]:0,Eb=3<hc.constant.length?hc.constant[3]:0)):(xc=ia(hc.buffer)?P.createStream(34962,hc.buffer):P.getBuffer(hc.buffer),Lb="type"in hc?zd[hc.type]:xc.dtype,Ac=!!hc.normalized,ad=hc.size|
0,Kc=hc.offset|0,Lc=hc.stride|0,yc=hc.divisor|0);gc=ga.location;Wc=aa[gc];if(1===Rc){Wc.buffer||F.enableVertexAttribArray(gc);gd=ad||1;if(Wc.type!==Lb||Wc.size!==gd||Wc.buffer!==xc||Wc.normalized!==Ac||Wc.offset!==Kc||Wc.stride!==Lc)F.bindBuffer(34962,xc.buffer),F.vertexAttribPointer(gc,gd,Lb,Ac,Lc,Kc),Wc.type=Lb,Wc.size=gd,Wc.buffer=xc,Wc.normalized=Ac,Wc.offset=Kc,Wc.stride=Lc;Wc.divisor!==yc&&(k.vertexAttribDivisorANGLE(gc,yc),Wc.divisor=yc)}else if(Wc.buffer&&(F.disableVertexAttribArray(gc),Wc.buffer=
null),Wc.x!==Mc||Wc.y!==Ec||Wc.z!==Sc||Wc.w!==Eb)F.vertexAttrib4f(gc,Mc,Ec,Sc,Eb),Wc.x=Mc,Wc.y=Ec,Wc.z=Sc,Wc.w=Eb;kd=W.call(this,ha,p,n);md=!1;Xc=null;Cd=0;Zd=!1;se=ke=0;me=1;Md=0;Kd=5126;ld=od=Bc=id=0;ia(kd)?(md=!0,Xc=P.createStream(34962,kd),Kd=Xc.dtype):(Xc=P.getBuffer(kd))?Kd=Xc.dtype:"constant"in kd?(me=2,"number"===typeof kd.constant?(Bc=kd.constant,od=ld=id=0):(Bc=0<kd.constant.length?kd.constant[0]:0,od=1<kd.constant.length?kd.constant[1]:0,ld=2<kd.constant.length?kd.constant[2]:0,id=3<kd.constant.length?
kd.constant[3]:0)):(Xc=ia(kd.buffer)?P.createStream(34962,kd.buffer):P.getBuffer(kd.buffer),Kd="type"in kd?zd[kd.type]:Xc.dtype,Zd=!!kd.normalized,se=kd.size|0,ke=kd.offset|0,Md=kd.stride|0,Cd=kd.divisor|0);cd=ab.location;pd=aa[cd];if(1===me){pd.buffer||F.enableVertexAttribArray(cd);Fd=se||1;if(pd.type!==Kd||pd.size!==Fd||pd.buffer!==Xc||pd.normalized!==Zd||pd.offset!==ke||pd.stride!==Md)F.bindBuffer(34962,Xc.buffer),F.vertexAttribPointer(cd,Fd,Kd,Zd,Md,ke),pd.type=Kd,pd.size=Fd,pd.buffer=Xc,pd.normalized=
Zd,pd.offset=ke,pd.stride=Md;pd.divisor!==Cd&&(k.vertexAttribDivisorANGLE(cd,Cd),pd.divisor=Cd)}else if(pd.buffer&&(F.disableVertexAttribArray(cd),pd.buffer=null),pd.x!==Bc||pd.y!==od||pd.z!==ld||pd.w!==id)F.vertexAttrib4f(cd,Bc,od,ld,id),pd.x=Bc,pd.y=od,pd.z=ld,pd.w=id;Hd=Q.call(this,ha,p,n);te=!1;ze=null;Ae=0;ne=!1;de=fe=0;pe=1;be=0;ie=5126;le=qe=Uc=wc=0;ia(Hd)?(te=!0,ze=P.createStream(34962,Hd),ie=ze.dtype):(ze=P.getBuffer(Hd))?ie=ze.dtype:"constant"in Hd?(pe=2,"number"===typeof Hd.constant?(Uc=
Hd.constant,qe=le=wc=0):(Uc=0<Hd.constant.length?Hd.constant[0]:0,qe=1<Hd.constant.length?Hd.constant[1]:0,le=2<Hd.constant.length?Hd.constant[2]:0,wc=3<Hd.constant.length?Hd.constant[3]:0)):(ze=ia(Hd.buffer)?P.createStream(34962,Hd.buffer):P.getBuffer(Hd.buffer),ie="type"in Hd?zd[Hd.type]:ze.dtype,ne=!!Hd.normalized,de=Hd.size|0,fe=Hd.offset|0,be=Hd.stride|0,Ae=Hd.divisor|0);Ld=S.location;Pd=aa[Ld];if(1===pe){Pd.buffer||F.enableVertexAttribArray(Ld);Qd=de||4;if(Pd.type!==ie||Pd.size!==Qd||Pd.buffer!==
ze||Pd.normalized!==ne||Pd.offset!==fe||Pd.stride!==be)F.bindBuffer(34962,ze.buffer),F.vertexAttribPointer(Ld,Qd,ie,ne,be,fe),Pd.type=ie,Pd.size=Qd,Pd.buffer=ze,Pd.normalized=ne,Pd.offset=fe,Pd.stride=be;Pd.divisor!==Ae&&(k.vertexAttribDivisorANGLE(Ld,Ae),Pd.divisor=Ae)}else if(Pd.buffer&&(F.disableVertexAttribArray(Ld),Pd.buffer=null),Pd.x!==Uc||Pd.y!==qe||Pd.z!==le||Pd.w!==wc)F.vertexAttrib4f(Ld,Uc,qe,le,wc),Pd.x=Uc,Pd.y=qe,Pd.z=le,Pd.w=wc;Rd=M.call(this,ha,p,n);je=!1;he=null;Ce=0;oe=!1;Se=Re=0;
Ne=1;re=0;Fe=5126;Ge=Je=Ie=He=0;ia(Rd)?(je=!0,he=P.createStream(34962,Rd),Fe=he.dtype):(he=P.getBuffer(Rd))?Fe=he.dtype:"constant"in Rd?(Ne=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ge=He=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?Rd.constant[1]:0,Ge=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(he=ia(Rd.buffer)?P.createStream(34962,Rd.buffer):P.getBuffer(Rd.buffer),Fe="type"in Rd?zd[Rd.type]:he.dtype,oe=!!Rd.normalized,Se=Rd.size|
0,Re=Rd.offset|0,re=Rd.stride|0,Ce=Rd.divisor|0);Nd=Hb.location;Ud=aa[Nd];if(1===Ne){Ud.buffer||F.enableVertexAttribArray(Nd);$d=Se||4;if(Ud.type!==Fe||Ud.size!==$d||Ud.buffer!==he||Ud.normalized!==oe||Ud.offset!==Re||Ud.stride!==re)F.bindBuffer(34962,he.buffer),F.vertexAttribPointer(Nd,$d,Fe,oe,re,Re),Ud.type=Fe,Ud.size=$d,Ud.buffer=he,Ud.normalized=oe,Ud.offset=Re,Ud.stride=re;Ud.divisor!==Ce&&(k.vertexAttribDivisorANGLE(Nd,Ce),Ud.divisor=Ce)}else if(Ud.buffer&&(F.disableVertexAttribArray(Nd),Ud.buffer=
null),Ud.x!==Ie||Ud.y!==Je||Ud.z!==Ge||Ud.w!==He)F.vertexAttrib4f(Nd,Ie,Je,Ge,He),Ud.x=Ie,Ud.y=Je,Ud.z=Ge,Ud.w=He;ce=T.call(this,ha,p,n);Ke=!1;Bd=null;Sd=0;De=!1;cf=Le=0;af=1;Te=0;Oe=5126;Ve=Ue=Xe=$e=0;ia(ce)?(Ke=!0,Bd=P.createStream(34962,ce),Oe=Bd.dtype):(Bd=P.getBuffer(ce))?Oe=Bd.dtype:"constant"in ce?(af=2,"number"===typeof ce.constant?(Xe=ce.constant,Ue=Ve=$e=0):(Xe=0<ce.constant.length?ce.constant[0]:0,Ue=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,$e=3<ce.constant.length?
ce.constant[3]:0)):(Bd=ia(ce.buffer)?P.createStream(34962,ce.buffer):P.getBuffer(ce.buffer),Oe="type"in ce?zd[ce.type]:Bd.dtype,De=!!ce.normalized,cf=ce.size|0,Le=ce.offset|0,Te=ce.stride|0,Sd=ce.divisor|0);Td=na.location;Xd=aa[Td];if(1===af){Xd.buffer||F.enableVertexAttribArray(Td);We=cf||1;if(Xd.type!==Oe||Xd.size!==We||Xd.buffer!==Bd||Xd.normalized!==De||Xd.offset!==Le||Xd.stride!==Te)F.bindBuffer(34962,Bd.buffer),F.vertexAttribPointer(Td,We,Oe,De,Te,Le),Xd.type=Oe,Xd.size=We,Xd.buffer=Bd,Xd.normalized=
De,Xd.offset=Le,Xd.stride=Te;Xd.divisor!==Sd&&(k.vertexAttribDivisorANGLE(Td,Sd),Xd.divisor=Sd)}else if(Xd.buffer&&(F.disableVertexAttribArray(Td),Xd.buffer=null),Xd.x!==Xe||Xd.y!==Ue||Xd.z!==Ve||Xd.w!==$e)F.vertexAttrib4f(Td,Xe,Ue,Ve,$e),Xd.x=Xe,Xd.y=Ue,Xd.z=Ve,Xd.w=$e;jf=ha.pixelRatio;n&&nf===jf||(nf=jf,F.uniform1f(La.location,jf));ff=p.scale;kf=ff[0];mf=ff[1];n&&lf===kf&&rf===mf||(lf=kf,rf=mf,F.uniform2f(X.location,kf,mf));of=p.scaleFract;sf=of[0];Df=of[1];n&&Cf===sf&&Pe===Df||(Cf=sf,Pe=Df,F.uniform2f(ob.location,
sf,Df));Ee=p.translate;pf=Ee[0];Ef=Ee[1];n&&qf===pf&&Hf===Ef||(qf=pf,Hf=Ef,F.uniform2f(ra.location,pf,Ef));Bf=p.translateFract;Ff=Bf[0];xf=Bf[1];n&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,F.uniform2f(cc.location,Ff,xf));wf=R.call(this,ha,p,n);zf=wf[0];Jf=wf[1];n&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,F.uniform2f(Ga.location,zf,Jf));Lf=p.opacity;n&&Mf===Lf||(Mf=Lf,F.uniform1f(Da.location,Lf));(tf=p.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;F.uniform1i(da.location,Rf.bind());If=
p.elements;uf=null;(uf=(dg=ia(If))?Pc.createStream(If):Pc.getElements(If))&&F.bindBuffer(34963,uf.buffer.buffer);Sf=p.offset;if(Tf=p.count)0<Dc?uf?k.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),Dc):k.drawArraysInstancedANGLE(0,Sf,Tf,Dc):0>Dc&&(uf?F.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):F.drawArrays(0,Sf,Tf)),ha.viewportWidth=Tb,ha.viewportHeight=Pa,jd&&P.destroyStream(db),Ta&&P.destroyStream(Hc),$a&&P.destroyStream(kc),wd&&P.destroyStream(sc),Ze&&P.destroyStream(xc),md&&
P.destroyStream(Xc),te&&P.destroyStream(ze),je&&P.destroyStream(he),Ke&&P.destroyStream(Bd),Rf.unbind(),dg&&Pc.destroyStream(uf)}pa.unbind();Ha.dirty=!0;ta.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(a){var n,p,r,u,x,K,v,U,t,H,z,I,la,O,N,sa,J,M,Q,R,oa,V,T,Z,Y,fa,ba,W,ka,ma,Aa,ea,pa,ja,Ya,Ea,Oa,Jb,Ua,Vb,cb,Sa,Xb,Db,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,
lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Cd,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,he,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re;n=L.next;n!==L.cur&&(n?F.bindFramebuffer(36160,n.framebuffer):F.bindFramebuffer(36160,null),L.cur=n);if(Ha.dirty){var Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf;Fe=ua.dither;Fe!==Ha.dither&&(Fe?F.enable(3024):
F.disable(3024),Ha.dither=Fe);He=ca[0];Ie=ca[1];if(He!==za[0]||Ie!==za[1])F.blendEquationSeparate(He,Ie),za[0]=He,za[1]=Ie;Je=ua.depth_func;Je!==Ha.depth_func&&(F.depthFunc(Je),Ha.depth_func=Je);Ge=Fb[0];Nd=Fb[1];if(Ge!==qa[0]||Nd!==qa[1])F.depthRange(Ge,Nd),qa[0]=Ge,qa[1]=Nd;Ud=ua.depth_mask;Ud!==Ha.depth_mask&&(F.depthMask(Ud),Ha.depth_mask=Ud);$d=E[0];ce=E[1];Ke=E[2];Bd=E[3];if($d!==nc[0]||ce!==nc[1]||Ke!==nc[2]||Bd!==nc[3])F.colorMask($d,ce,Ke,Bd),nc[0]=$d,nc[1]=ce,nc[2]=Ke,nc[3]=Bd;Sd=ua.cull_enable;
Sd!==Ha.cull_enable&&(Sd?F.enable(2884):F.disable(2884),Ha.cull_enable=Sd);De=ua.cull_face;De!==Ha.cull_face&&(F.cullFace(De),Ha.cull_face=De);Le=ua.frontFace;Le!==Ha.frontFace&&(F.frontFace(Le),Ha.frontFace=Le);cf=ua.lineWidth;cf!==Ha.lineWidth&&(F.lineWidth(cf),Ha.lineWidth=cf);af=ua.polygonOffset_enable;af!==Ha.polygonOffset_enable&&(af?F.enable(32823):F.disable(32823),Ha.polygonOffset_enable=af);Te=Gb[0];Oe=Gb[1];if(Te!==zb[0]||Oe!==zb[1])F.polygonOffset(Te,Oe),zb[0]=Te,zb[1]=Oe;$e=ua.sample_alpha;
$e!==Ha.sample_alpha&&($e?F.enable(32926):F.disable(32926),Ha.sample_alpha=$e);Xe=ua.sample_enable;Xe!==Ha.sample_enable&&(Xe?F.enable(32928):F.disable(32928),Ha.sample_enable=Xe);Ue=Ye[0];Ve=Ye[1];if(Ue!==xd[0]||Ve!==xd[1])F.sampleCoverage(Ue,Ve),xd[0]=Ue,xd[1]=Ve;Td=ua.stencil_mask;Td!==Ha.stencil_mask&&(F.stencilMask(Td),Ha.stencil_mask=Td);Xd=we[0];We=we[1];jf=we[2];if(Xd!==ue[0]||We!==ue[1]||jf!==ue[2])F.stencilFunc(Xd,We,jf),ue[0]=Xd,ue[1]=We,ue[2]=jf;nf=ve[0];ff=ve[1];kf=ve[2];lf=ve[3];if(nf!==
yd[0]||ff!==yd[1]||kf!==yd[2]||lf!==yd[3])F.stencilOpSeparate(nf,ff,kf,lf),yd[0]=nf,yd[1]=ff,yd[2]=kf,yd[3]=lf;mf=Od[0];rf=Od[1];of=Od[2];sf=Od[3];if(mf!==ge[0]||rf!==ge[1]||of!==ge[2]||sf!==ge[3])F.stencilOpSeparate(mf,rf,of,sf),ge[0]=mf,ge[1]=rf,ge[2]=of,ge[3]=sf}p=a.viewport;r=p.x|0;u=p.y|0;x="width"in p?p.width|0:ha.framebufferWidth-r;K="height"in p?p.height|0:ha.framebufferHeight-u;v=ha.viewportWidth;ha.viewportWidth=x;U=ha.viewportHeight;ha.viewportHeight=K;F.viewport(r,u,x,K);Gd[0]=r;Gd[1]=
u;Gd[2]=x;Gd[3]=K;F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);Ha.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);Ka[0]=770;Ka[1]=771;Ka[2]=773;Ka[3]=1;F.disable(2929);Ha.depth_enable=!1;t=a.viewport;H=t.x|0;z=t.y|0;I="width"in t?t.width|0:ha.framebufferWidth-H;la="height"in t?t.height|0:ha.framebufferHeight-z;F.scissor(H,z,I,la);ee[0]=H;ee[1]=z;ee[2]=I;ee[3]=la;F.enable(3089);Ha.scissor_enable=!0;F.disable(2960);Ha.stencil_enable=!1;if(O=Ha.profile)N=performance.now(),c.count++;
F.useProgram(d.program);sa=Vc.angle_instanced_arrays;ta.setVAO(null);J=h.call(this,ha,a,0);M=!1;Q=null;R=0;oa=!1;T=V=0;Z=1;Y=0;fa=5126;ma=ka=W=ba=0;ia(J)?(M=!0,Q=P.createStream(34962,J),fa=Q.dtype):(Q=P.getBuffer(J))?fa=Q.dtype:"constant"in J?(Z=2,"number"===typeof J.constant?(W=J.constant,ka=ma=ba=0):(W=0<J.constant.length?J.constant[0]:0,ka=1<J.constant.length?J.constant[1]:0,ma=2<J.constant.length?J.constant[2]:0,ba=3<J.constant.length?J.constant[3]:0)):(Q=ia(J.buffer)?P.createStream(34962,J.buffer):
P.getBuffer(J.buffer),fa="type"in J?zd[J.type]:Q.dtype,oa=!!J.normalized,T=J.size|0,V=J.offset|0,Y=J.stride|0,R=J.divisor|0);Aa=qc.location;ea=aa[Aa];if(1===Z){ea.buffer||F.enableVertexAttribArray(Aa);pa=T||1;if(ea.type!==fa||ea.size!==pa||ea.buffer!==Q||ea.normalized!==oa||ea.offset!==V||ea.stride!==Y)F.bindBuffer(34962,Q.buffer),F.vertexAttribPointer(Aa,pa,fa,oa,Y,V),ea.type=fa,ea.size=pa,ea.buffer=Q,ea.normalized=oa,ea.offset=V,ea.stride=Y;ea.divisor!==R&&(sa.vertexAttribDivisorANGLE(Aa,R),ea.divisor=
R)}else if(ea.buffer&&(F.disableVertexAttribArray(Aa),ea.buffer=null),ea.x!==W||ea.y!==ka||ea.z!==ma||ea.w!==ba)F.vertexAttrib4f(Aa,W,ka,ma,ba),ea.x=W,ea.y=ka,ea.z=ma,ea.w=ba;ja=m.call(this,ha,a,0);Ya=!1;Ea=null;Oa=0;Jb=!1;Vb=Ua=0;cb=1;Sa=0;Xb=5126;w=Sb=jc=Db=0;ia(ja)?(Ya=!0,Ea=P.createStream(34962,ja),Xb=Ea.dtype):(Ea=P.getBuffer(ja))?Xb=Ea.dtype:"constant"in ja?(cb=2,"number"===typeof ja.constant?(jc=ja.constant,Sb=w=Db=0):(jc=0<ja.constant.length?ja.constant[0]:0,Sb=1<ja.constant.length?ja.constant[1]:
0,w=2<ja.constant.length?ja.constant[2]:0,Db=3<ja.constant.length?ja.constant[3]:0)):(Ea=ia(ja.buffer)?P.createStream(34962,ja.buffer):P.getBuffer(ja.buffer),Xb="type"in ja?zd[ja.type]:Ea.dtype,Jb=!!ja.normalized,Vb=ja.size|0,Ua=ja.offset|0,Sa=ja.stride|0,Oa=ja.divisor|0);Tb=td.location;Pa=aa[Tb];if(1===cb){Pa.buffer||F.enableVertexAttribArray(Tb);pb=Vb||1;if(Pa.type!==Xb||Pa.size!==pb||Pa.buffer!==Ea||Pa.normalized!==Jb||Pa.offset!==Ua||Pa.stride!==Sa)F.bindBuffer(34962,Ea.buffer),F.vertexAttribPointer(Tb,
pb,Xb,Jb,Sa,Ua),Pa.type=Xb,Pa.size=pb,Pa.buffer=Ea,Pa.normalized=Jb,Pa.offset=Ua,Pa.stride=Sa;Pa.divisor!==Oa&&(sa.vertexAttribDivisorANGLE(Tb,Oa),Pa.divisor=Oa)}else if(Pa.buffer&&(F.disableVertexAttribArray(Tb),Pa.buffer=null),Pa.x!==jc||Pa.y!==Sb||Pa.z!==w||Pa.w!==Db)F.vertexAttrib4f(Tb,jc,Sb,w,Db),Pa.x=jc,Pa.y=Sb,Pa.z=w,Pa.w=Db;vb=l.call(this,ha,a,0);hb=!1;Qa=null;Oc=0;Yb=!1;db=jd=0;pc=1;Zc=0;mc=5126;qb=va=kb=jb=0;ia(vb)?(hb=!0,Qa=P.createStream(34962,vb),mc=Qa.dtype):(Qa=P.getBuffer(vb))?mc=
Qa.dtype:"constant"in vb?(pc=2,"number"===typeof vb.constant?(kb=vb.constant,va=qb=jb=0):(kb=0<vb.constant.length?vb.constant[0]:0,va=1<vb.constant.length?vb.constant[1]:0,qb=2<vb.constant.length?vb.constant[2]:0,jb=3<vb.constant.length?vb.constant[3]:0)):(Qa=ia(vb.buffer)?P.createStream(34962,vb.buffer):P.getBuffer(vb.buffer),mc="type"in vb?zd[vb.type]:Qa.dtype,Yb=!!vb.normalized,db=vb.size|0,jd=vb.offset|0,Zc=vb.stride|0,Oc=vb.divisor|0);ya=ic.location;Va=aa[ya];if(1===pc){Va.buffer||F.enableVertexAttribArray(ya);
bb=db||1;if(Va.type!==mc||Va.size!==bb||Va.buffer!==Qa||Va.normalized!==Yb||Va.offset!==jd||Va.stride!==Zc)F.bindBuffer(34962,Qa.buffer),F.vertexAttribPointer(ya,bb,mc,Yb,Zc,jd),Va.type=mc,Va.size=bb,Va.buffer=Qa,Va.normalized=Yb,Va.offset=jd,Va.stride=Zc;Va.divisor!==Oc&&(sa.vertexAttribDivisorANGLE(ya,Oc),Va.divisor=Oc)}else if(Va.buffer&&(F.disableVertexAttribArray(ya),Va.buffer=null),Va.x!==kb||Va.y!==va||Va.z!==qb||Va.w!==jb)F.vertexAttrib4f(ya,kb,va,qb,jb),Va.x=kb,Va.y=va,Va.z=qb,Va.w=jb;Ba=
f.call(this,ha,a,0);eb=!1;Na=null;Bb=0;Ab=!1;Hc=Ta=0;Kb=1;Mb=0;Ub=5126;Pb=Ma=Jd=wa=0;ia(Ba)?(eb=!0,Na=P.createStream(34962,Ba),Ub=Na.dtype):(Na=P.getBuffer(Ba))?Ub=Na.dtype:"constant"in Ba?(Kb=2,"number"===typeof Ba.constant?(Jd=Ba.constant,Ma=Pb=wa=0):(Jd=0<Ba.constant.length?Ba.constant[0]:0,Ma=1<Ba.constant.length?Ba.constant[1]:0,Pb=2<Ba.constant.length?Ba.constant[2]:0,wa=3<Ba.constant.length?Ba.constant[3]:0)):(Na=ia(Ba.buffer)?P.createStream(34962,Ba.buffer):P.getBuffer(Ba.buffer),Ub="type"in
Ba?zd[Ba.type]:Na.dtype,Ab=!!Ba.normalized,Hc=Ba.size|0,Ta=Ba.offset|0,Mb=Ba.stride|0,Bb=Ba.divisor|0);fb=zc.location;ib=aa[fb];if(1===Kb){ib.buffer||F.enableVertexAttribArray(fb);xa=Hc||1;if(ib.type!==Ub||ib.size!==xa||ib.buffer!==Na||ib.normalized!==Ab||ib.offset!==Ta||ib.stride!==Mb)F.bindBuffer(34962,Na.buffer),F.vertexAttribPointer(fb,xa,Ub,Ab,Mb,Ta),ib.type=Ub,ib.size=xa,ib.buffer=Na,ib.normalized=Ab,ib.offset=Ta,ib.stride=Mb;ib.divisor!==Bb&&(sa.vertexAttribDivisorANGLE(fb,Bb),ib.divisor=Bb)}else if(ib.buffer&&
(F.disableVertexAttribArray(fb),ib.buffer=null),ib.x!==Jd||ib.y!==Ma||ib.z!==Pb||ib.w!==wa)F.vertexAttrib4f(fb,Jd,Ma,Pb,wa),ib.x=Jd,ib.y=Ma,ib.z=Pb,ib.w=wa;ec=k.call(this,ha,a,0);Fa=!1;rb=null;sb=0;Za=!1;kc=$a=0;dd=1;tc=0;Wa=5126;vc=Ia=$c=Nb=0;ia(ec)?(Fa=!0,rb=P.createStream(34962,ec),Wa=rb.dtype):(rb=P.getBuffer(ec))?Wa=rb.dtype:"constant"in ec?(dd=2,"number"===typeof ec.constant?($c=ec.constant,Ia=vc=Nb=0):($c=0<ec.constant.length?ec.constant[0]:0,Ia=1<ec.constant.length?ec.constant[1]:0,vc=2<ec.constant.length?
ec.constant[2]:0,Nb=3<ec.constant.length?ec.constant[3]:0)):(rb=ia(ec.buffer)?P.createStream(34962,ec.buffer):P.getBuffer(ec.buffer),Wa="type"in ec?zd[ec.type]:rb.dtype,Za=!!ec.normalized,kc=ec.size|0,$a=ec.offset|0,tc=ec.stride|0,sb=ec.divisor|0);Ra=ga.location;Ca=aa[Ra];if(1===dd){Ca.buffer||F.enableVertexAttribArray(Ra);lb=kc||1;if(Ca.type!==Wa||Ca.size!==lb||Ca.buffer!==rb||Ca.normalized!==Za||Ca.offset!==$a||Ca.stride!==tc)F.bindBuffer(34962,rb.buffer),F.vertexAttribPointer(Ra,lb,Wa,Za,tc,$a),
Ca.type=Wa,Ca.size=lb,Ca.buffer=rb,Ca.normalized=Za,Ca.offset=$a,Ca.stride=tc;Ca.divisor!==sb&&(sa.vertexAttribDivisorANGLE(Ra,sb),Ca.divisor=sb)}else if(Ca.buffer&&(F.disableVertexAttribArray(Ra),Ca.buffer=null),Ca.x!==$c||Ca.y!==Ia||Ca.z!==vc||Ca.w!==Nb)F.vertexAttrib4f(Ra,$c,Ia,vc,Nb),Ca.x=$c,Ca.y=Ia,Ca.z=vc,Ca.w=Nb;wb=b.call(this,ha,a,0);Cb=!1;tb=null;uc=0;xb=!1;sc=wd=0;Ed=1;Jc=0;ed=5126;Qb=bc=Wb=fd=0;ia(wb)?(Cb=!0,tb=P.createStream(34962,wb),ed=tb.dtype):(tb=P.getBuffer(wb))?ed=tb.dtype:"constant"in
wb?(Ed=2,"number"===typeof wb.constant?(Wb=wb.constant,bc=Qb=fd=0):(Wb=0<wb.constant.length?wb.constant[0]:0,bc=1<wb.constant.length?wb.constant[1]:0,Qb=2<wb.constant.length?wb.constant[2]:0,fd=3<wb.constant.length?wb.constant[3]:0)):(tb=ia(wb.buffer)?P.createStream(34962,wb.buffer):P.getBuffer(wb.buffer),ed="type"in wb?zd[wb.type]:tb.dtype,xb=!!wb.normalized,sc=wb.size|0,wd=wb.offset|0,Jc=wb.stride|0,uc=wb.divisor|0);Ja=ab.location;$b=aa[Ja];if(1===Ed){$b.buffer||F.enableVertexAttribArray(Ja);mb=
sc||1;if($b.type!==ed||$b.size!==mb||$b.buffer!==tb||$b.normalized!==xb||$b.offset!==wd||$b.stride!==Jc)F.bindBuffer(34962,tb.buffer),F.vertexAttribPointer(Ja,mb,ed,xb,Jc,wd),$b.type=ed,$b.size=mb,$b.buffer=tb,$b.normalized=xb,$b.offset=wd,$b.stride=Jc;$b.divisor!==uc&&(sa.vertexAttribDivisorANGLE(Ja,uc),$b.divisor=uc)}else if($b.buffer&&(F.disableVertexAttribArray(Ja),$b.buffer=null),$b.x!==Wb||$b.y!==bc||$b.z!==Qb||$b.w!==fd)F.vertexAttrib4f(Ja,Wb,bc,Qb,fd),$b.x=Wb,$b.y=bc,$b.z=Qb,$b.w=fd;yb=q.call(this,
ha,a,0);Ob=!1;Rb=null;fc=0;hc=!1;xc=Cd=0;yc=1;Ac=0;Kc=5126;Lb=Lc=Rc=ad=0;ia(yb)?(Ob=!0,Rb=P.createStream(34962,yb),Kc=Rb.dtype):(Rb=P.getBuffer(yb))?Kc=Rb.dtype:"constant"in yb?(yc=2,"number"===typeof yb.constant?(Rc=yb.constant,Lc=Lb=ad=0):(Rc=0<yb.constant.length?yb.constant[0]:0,Lc=1<yb.constant.length?yb.constant[1]:0,Lb=2<yb.constant.length?yb.constant[2]:0,ad=3<yb.constant.length?yb.constant[3]:0)):(Rb=ia(yb.buffer)?P.createStream(34962,yb.buffer):P.getBuffer(yb.buffer),Kc="type"in yb?zd[yb.type]:
Rb.dtype,hc=!!yb.normalized,xc=yb.size|0,Cd=yb.offset|0,Ac=yb.stride|0,fc=yb.divisor|0);Eb=S.location;Mc=aa[Eb];if(1===yc){Mc.buffer||F.enableVertexAttribArray(Eb);Ec=xc||4;if(Mc.type!==Kc||Mc.size!==Ec||Mc.buffer!==Rb||Mc.normalized!==hc||Mc.offset!==Cd||Mc.stride!==Ac)F.bindBuffer(34962,Rb.buffer),F.vertexAttribPointer(Eb,Ec,Kc,hc,Ac,Cd),Mc.type=Kc,Mc.size=Ec,Mc.buffer=Rb,Mc.normalized=hc,Mc.offset=Cd,Mc.stride=Ac;Mc.divisor!==fc&&(sa.vertexAttribDivisorANGLE(Eb,fc),Mc.divisor=fc)}else if(Mc.buffer&&
(F.disableVertexAttribArray(Eb),Mc.buffer=null),Mc.x!==Rc||Mc.y!==Lc||Mc.z!==Lb||Mc.w!==ad)F.vertexAttrib4f(Eb,Rc,Lc,Lb,ad),Mc.x=Rc,Mc.y=Lc,Mc.z=Lb,Mc.w=ad;Sc=B.call(this,ha,a,0);gc=!1;Wc=null;gd=0;kd=!1;Xc=md=0;he=1;Zd=0;ke=5126;Kd=Md=me=se=0;ia(Sc)?(gc=!0,Wc=P.createStream(34962,Sc),ke=Wc.dtype):(Wc=P.getBuffer(Sc))?ke=Wc.dtype:"constant"in Sc?(he=2,"number"===typeof Sc.constant?(me=Sc.constant,Md=Kd=se=0):(me=0<Sc.constant.length?Sc.constant[0]:0,Md=1<Sc.constant.length?Sc.constant[1]:0,Kd=2<Sc.constant.length?
Sc.constant[2]:0,se=3<Sc.constant.length?Sc.constant[3]:0)):(Wc=ia(Sc.buffer)?P.createStream(34962,Sc.buffer):P.getBuffer(Sc.buffer),ke="type"in Sc?zd[Sc.type]:Wc.dtype,kd=!!Sc.normalized,Xc=Sc.size|0,md=Sc.offset|0,Zd=Sc.stride|0,gd=Sc.divisor|0);id=Hb.location;Bc=aa[id];if(1===he){Bc.buffer||F.enableVertexAttribArray(id);od=Xc||4;if(Bc.type!==ke||Bc.size!==od||Bc.buffer!==Wc||Bc.normalized!==kd||Bc.offset!==md||Bc.stride!==Zd)F.bindBuffer(34962,Wc.buffer),F.vertexAttribPointer(id,od,ke,kd,Zd,md),
Bc.type=ke,Bc.size=od,Bc.buffer=Wc,Bc.normalized=kd,Bc.offset=md,Bc.stride=Zd;Bc.divisor!==gd&&(sa.vertexAttribDivisorANGLE(id,gd),Bc.divisor=gd)}else if(Bc.buffer&&(F.disableVertexAttribArray(id),Bc.buffer=null),Bc.x!==me||Bc.y!==Md||Bc.z!==Kd||Bc.w!==se)F.vertexAttrib4f(id,me,Md,Kd,se),Bc.x=me,Bc.y=Md,Bc.z=Kd,Bc.w=se;ld=y.call(this,ha,a,0);cd=!1;pd=null;Fd=0;Hd=!1;ze=te=0;Ae=1;ne=0;fe=5126;ie=be=pe=de=0;ia(ld)?(cd=!0,pd=P.createStream(34962,ld),fe=pd.dtype):(pd=P.getBuffer(ld))?fe=pd.dtype:"constant"in
ld?(Ae=2,"number"===typeof ld.constant?(pe=ld.constant,be=ie=de=0):(pe=0<ld.constant.length?ld.constant[0]:0,be=1<ld.constant.length?ld.constant[1]:0,ie=2<ld.constant.length?ld.constant[2]:0,de=3<ld.constant.length?ld.constant[3]:0)):(pd=ia(ld.buffer)?P.createStream(34962,ld.buffer):P.getBuffer(ld.buffer),fe="type"in ld?zd[ld.type]:pd.dtype,Hd=!!ld.normalized,ze=ld.size|0,te=ld.offset|0,ne=ld.stride|0,Fd=ld.divisor|0);wc=na.location;Uc=aa[wc];if(1===Ae){Uc.buffer||F.enableVertexAttribArray(wc);qe=
ze||1;if(Uc.type!==fe||Uc.size!==qe||Uc.buffer!==pd||Uc.normalized!==Hd||Uc.offset!==te||Uc.stride!==ne)F.bindBuffer(34962,pd.buffer),F.vertexAttribPointer(wc,qe,fe,Hd,ne,te),Uc.type=fe,Uc.size=qe,Uc.buffer=pd,Uc.normalized=Hd,Uc.offset=te,Uc.stride=ne;Uc.divisor!==Fd&&(sa.vertexAttribDivisorANGLE(wc,Fd),Uc.divisor=Fd)}else if(Uc.buffer&&(F.disableVertexAttribArray(wc),Uc.buffer=null),Uc.x!==pe||Uc.y!==be||Uc.z!==ie||Uc.w!==de)F.vertexAttrib4f(wc,pe,be,ie,de),Uc.x=pe,Uc.y=be,Uc.z=ie,Uc.w=de;F.uniform1i(C.location,
!1);F.uniform1f(La.location,ha.pixelRatio);le=a.scale;F.uniform2f(X.location,le[0],le[1]);Ld=a.scaleFract;F.uniform2f(ob.location,Ld[0],Ld[1]);Pd=a.translate;F.uniform2f(ra.location,Pd[0],Pd[1]);Qd=a.translateFract;F.uniform2f(cc.location,Qd[0],Qd[1]);Rd=e.call(this,ha,a,0);F.uniform2f(Ga.location,Rd[0],Rd[1]);F.uniform1f(Da.location,a.opacity);F.uniform1i(nb.location,g.bind());(je=a.markerTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);vf=je._texture;F.uniform1i(da.location,vf.bind());Ce=
a.elements;oe=null;(oe=(Re=ia(Ce))?Pc.createStream(Ce):Pc.getElements(Ce))&&F.bindBuffer(34963,oe.buffer.buffer);Se=a.offset;if(Ne=a.count)re=ub.instances,0<re?oe?sa.drawElementsInstancedANGLE(0,Ne,oe.type,Se<<(oe.type-5121>>1),re):sa.drawArraysInstancedANGLE(0,Se,Ne,re):0>re&&(oe?F.drawElements(0,Ne,oe.type,Se<<(oe.type-5121>>1)):F.drawArrays(0,Se,Ne)),Ha.dirty=!0,ta.setVAO(null),ha.viewportWidth=v,ha.viewportHeight=U,O&&(c.cpuTime+=performance.now()-N),M&&P.destroyStream(Q),Ya&&P.destroyStream(Ea),
hb&&P.destroyStream(Qa),eb&&P.destroyStream(Na),Fa&&P.destroyStream(rb),Cb&&P.destroyStream(tb),Ob&&P.destroyStream(Rb),gc&&P.destroyStream(Wc),cd&&P.destroyStream(pd),g.unbind(),vf.unbind(),Re&&Pc.destroyStream(oe)},scope:function(b,e,a){var g,f,k,q,d,m,l,h,y,B,D,A,E,C,G,F,L,M,Q,R,aa,S,ca,T,X,W,da,ea,ga,na,qa,ka,ma,ta,ra,Ka,pa,za,Ga,La,Da,Oa,zb,Fb,w,Sa,Pa,pb,vb,hb,Qa,ab,Gb,zc,db,ob,td,Hb,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,nc,Kb,Mb,Ub,wa,Db,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,nb,tc,Wa,Nb,cc,Ia,
vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,qc,sc,ic,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Vc,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,Gd,ee,Od,xd,we,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,yd,ge,ue,ve,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;g=b.viewport;f=g.x|0;k=g.y|0;q="width"in g?g.width|0:ha.framebufferWidth-f;d="height"in g?g.height|0:ha.framebufferHeight-k;m=ha.viewportWidth;ha.viewportWidth=q;l=ha.viewportHeight;ha.viewportHeight=d;h=Cd[0];Cd[0]=f;y=Cd[1];Cd[1]=k;B=Cd[2];Cd[2]=q;D=Cd[3];Cd[3]=d;A=N[0];N[0]=0;E=N[1];N[1]=0;C=N[2];N[2]=0;G=N[3];N[3]=1;F=ua.blend_enable;ua.blend_enable=!0;L=Aa[0];Aa[0]=770;M=Aa[1];Aa[1]=771;Q=
Aa[2];Aa[2]=773;R=Aa[3];Aa[3]=1;aa=ua.depth_enable;ua.depth_enable=!1;S=b.viewport;ca=S.x|0;T=S.y|0;X="width"in S?S.width|0:ha.framebufferWidth-ca;W="height"in S?S.height|0:ha.framebufferHeight-T;da=he[0];he[0]=ca;ea=he[1];he[1]=T;ga=he[2];he[2]=X;na=he[3];he[3]=W;qa=ua.scissor_enable;ua.scissor_enable=!0;ka=ua.stencil_enable;ua.stencil_enable=!1;if(ma=Ha.profile)ta=performance.now(),c.count++;ra=b.elements;Ka=null;Ka=(pa=ia(ra))?Pc.createStream(ra):Pc.getElements(ra);za=ub.elements;ub.elements=Ka;
Ga=b.offset;La=ub.offset;ub.offset=Ga;Da=b.count;Oa=ub.count;ub.count=Da;zb=ub.primitive;ub.primitive=0;Fb=fa[45];fa[45]=!1;w=b.markerTexture;Sa=fa[48];fa[48]=w;Pa=b.opacity;pb=fa[10];fa[10]=Pa;vb=n.call(this,ha,b,a);hb=fa[46];fa[46]=vb;Qa=fa[47];fa[47]=p;ab=ha.pixelRatio;Gb=fa[34];fa[34]=ab;zc=b.scale;db=fa[6];fa[6]=zc;ob=b.scaleFract;td=fa[7];fa[7]=ob;Hb=b.translate;jb=fa[8];fa[8]=Hb;kb=b.translateFract;va=fa[9];fa[9]=kb;qb=r.call(this,ha,b,a);ya=!1;Va=null;bb=0;Ba=!1;Na=eb=0;Bb=1;Ab=0;Ta=5126;
Ub=Mb=Kb=nc=0;ia(qb)?(ya=!0,Va=P.createStream(34962,qb),Ta=Va.dtype):(Va=P.getBuffer(qb))?Ta=Va.dtype:"constant"in qb?(Bb=2,"number"===typeof qb.constant?(Kb=qb.constant,Mb=Ub=nc=0):(Kb=0<qb.constant.length?qb.constant[0]:0,Mb=1<qb.constant.length?qb.constant[1]:0,Ub=2<qb.constant.length?qb.constant[2]:0,nc=3<qb.constant.length?qb.constant[3]:0)):(Va=ia(qb.buffer)?P.createStream(34962,qb.buffer):P.getBuffer(qb.buffer),Ta="type"in qb?zd[qb.type]:Va.dtype,Ba=!!qb.normalized,Na=qb.size|0,eb=qb.offset|
0,Ab=qb.stride|0,bb=qb.divisor|0);wa=u.buffer;u.buffer=Va;Db=u.divisor;u.divisor=bb;Ma=u.normalized;u.normalized=Ba;Pb=u.offset;u.offset=eb;fb=u.size;u.size=Na;ib=u.state;u.state=Bb;xa=u.stride;u.stride=Ab;ec=u.type;u.type=Ta;Fa=u.w;u.w=nc;rb=u.x;u.x=Kb;sb=u.y;u.y=Mb;Za=u.z;u.z=Ub;$a=K.call(this,ha,b,a);kc=!1;nb=null;tc=0;Wa=!1;cc=Nb=0;Ia=1;vc=0;Ra=5126;Cb=wb=lb=Ca=0;ia($a)?(kc=!0,nb=P.createStream(34962,$a),Ra=nb.dtype):(nb=P.getBuffer($a))?Ra=nb.dtype:"constant"in $a?(Ia=2,"number"===typeof $a.constant?
(lb=$a.constant,wb=Cb=Ca=0):(lb=0<$a.constant.length?$a.constant[0]:0,wb=1<$a.constant.length?$a.constant[1]:0,Cb=2<$a.constant.length?$a.constant[2]:0,Ca=3<$a.constant.length?$a.constant[3]:0)):(nb=ia($a.buffer)?P.createStream(34962,$a.buffer):P.getBuffer($a.buffer),Ra="type"in $a?zd[$a.type]:nb.dtype,Wa=!!$a.normalized,cc=$a.size|0,Nb=$a.offset|0,vc=$a.stride|0,tc=$a.divisor|0);tb=x.buffer;x.buffer=nb;uc=x.divisor;x.divisor=tc;xb=x.normalized;x.normalized=Wa;qc=x.offset;x.offset=Nb;sc=x.size;x.size=
cc;ic=x.state;x.state=Ia;Jc=x.stride;x.stride=vc;ed=x.type;x.type=Ra;fd=x.w;x.w=Ca;Wb=x.x;x.x=lb;bc=x.y;x.y=wb;Qb=x.z;x.z=Cb;Ja=U.call(this,ha,b,a);$b=!1;mb=null;yb=0;Ob=!1;fc=Rb=0;hc=1;Vc=0;xc=5126;ad=Kc=Ac=yc=0;ia(Ja)?($b=!0,mb=P.createStream(34962,Ja),xc=mb.dtype):(mb=P.getBuffer(Ja))?xc=mb.dtype:"constant"in Ja?(hc=2,"number"===typeof Ja.constant?(Ac=Ja.constant,Kc=ad=yc=0):(Ac=0<Ja.constant.length?Ja.constant[0]:0,Kc=1<Ja.constant.length?Ja.constant[1]:0,ad=2<Ja.constant.length?Ja.constant[2]:
0,yc=3<Ja.constant.length?Ja.constant[3]:0)):(mb=ia(Ja.buffer)?P.createStream(34962,Ja.buffer):P.getBuffer(Ja.buffer),xc="type"in Ja?zd[Ja.type]:mb.dtype,Ob=!!Ja.normalized,fc=Ja.size|0,Rb=Ja.offset|0,Vc=Ja.stride|0,yb=Ja.divisor|0);Rc=v.buffer;v.buffer=mb;Lc=v.divisor;v.divisor=yb;Lb=v.normalized;v.normalized=Ob;Eb=v.offset;v.offset=Rb;Mc=v.size;v.size=fc;Ec=v.state;v.state=hc;Sc=v.stride;v.stride=Vc;gc=v.type;v.type=xc;Wc=v.w;v.w=yc;gd=v.x;v.x=Ac;kd=v.y;v.y=Kc;md=v.z;v.z=ad;Xc=H.call(this,ha,b,
a);Gd=!1;ee=null;Od=0;xd=!1;Md=we=0;Kd=1;id=0;Bc=5126;pd=cd=ld=od=0;ia(Xc)?(Gd=!0,ee=P.createStream(34962,Xc),Bc=ee.dtype):(ee=P.getBuffer(Xc))?Bc=ee.dtype:"constant"in Xc?(Kd=2,"number"===typeof Xc.constant?(ld=Xc.constant,cd=pd=od=0):(ld=0<Xc.constant.length?Xc.constant[0]:0,cd=1<Xc.constant.length?Xc.constant[1]:0,pd=2<Xc.constant.length?Xc.constant[2]:0,od=3<Xc.constant.length?Xc.constant[3]:0)):(ee=ia(Xc.buffer)?P.createStream(34962,Xc.buffer):P.getBuffer(Xc.buffer),Bc="type"in Xc?zd[Xc.type]:
ee.dtype,xd=!!Xc.normalized,Md=Xc.size|0,we=Xc.offset|0,id=Xc.stride|0,Od=Xc.divisor|0);Fd=t.buffer;t.buffer=ee;Hd=t.divisor;t.divisor=Od;yd=t.normalized;t.normalized=xd;ge=t.offset;t.offset=we;ue=t.size;t.size=Md;ve=t.state;t.state=Kd;fe=t.stride;t.stride=id;de=t.type;t.type=Bc;pe=t.w;t.w=od;be=t.x;t.x=ld;ie=t.y;t.y=cd;wc=t.z;t.z=pd;Uc=sa.call(this,ha,b,a);qe=!1;le=null;Ld=0;Pd=!1;Rd=Qd=0;je=1;Ye=0;Ce=5126;Ne=Se=Re=oe=0;ia(Uc)?(qe=!0,le=P.createStream(34962,Uc),Ce=le.dtype):(le=P.getBuffer(Uc))?
Ce=le.dtype:"constant"in Uc?(je=2,"number"===typeof Uc.constant?(Re=Uc.constant,Se=Ne=oe=0):(Re=0<Uc.constant.length?Uc.constant[0]:0,Se=1<Uc.constant.length?Uc.constant[1]:0,Ne=2<Uc.constant.length?Uc.constant[2]:0,oe=3<Uc.constant.length?Uc.constant[3]:0)):(le=ia(Uc.buffer)?P.createStream(34962,Uc.buffer):P.getBuffer(Uc.buffer),Ce="type"in Uc?zd[Uc.type]:le.dtype,Pd=!!Uc.normalized,Rd=Uc.size|0,Qd=Uc.offset|0,Ye=Uc.stride|0,Ld=Uc.divisor|0);re=O.buffer;O.buffer=le;Fe=O.divisor;O.divisor=Ld;He=O.normalized;
O.normalized=Pd;Ie=O.offset;O.offset=Qd;Je=O.size;O.size=Rd;Ge=O.state;O.state=je;Nd=O.stride;O.stride=Ye;Ud=O.type;O.type=Ce;$d=O.w;O.w=oe;ce=O.x;O.x=Re;Ke=O.y;O.y=Se;Bd=O.z;O.z=Ne;Sd=oa.call(this,ha,b,a);De=!1;Le=null;cf=0;af=!1;Oe=Te=0;$e=1;Xe=0;Ue=5126;We=Xd=Td=Ve=0;ia(Sd)?(De=!0,Le=P.createStream(34962,Sd),Ue=Le.dtype):(Le=P.getBuffer(Sd))?Ue=Le.dtype:"constant"in Sd?($e=2,"number"===typeof Sd.constant?(Td=Sd.constant,Xd=We=Ve=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,Xd=1<Sd.constant.length?
Sd.constant[1]:0,We=2<Sd.constant.length?Sd.constant[2]:0,Ve=3<Sd.constant.length?Sd.constant[3]:0)):(Le=ia(Sd.buffer)?P.createStream(34962,Sd.buffer):P.getBuffer(Sd.buffer),Ue="type"in Sd?zd[Sd.type]:Le.dtype,af=!!Sd.normalized,Oe=Sd.size|0,Te=Sd.offset|0,Xe=Sd.stride|0,cf=Sd.divisor|0);jf=z.buffer;z.buffer=Le;nf=z.divisor;z.divisor=cf;ff=z.normalized;z.normalized=af;kf=z.offset;z.offset=Te;lf=z.size;z.size=Oe;mf=z.state;z.state=$e;rf=z.stride;z.stride=Xe;of=z.type;z.type=Ue;sf=z.w;z.w=Ve;Cf=z.x;
z.x=Td;Df=z.y;z.y=Xd;Pe=z.z;z.z=We;Ee=ba.call(this,ha,b,a);pf=!1;qf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ia(Ee)?(pf=!0,qf=P.createStream(34962,Ee),yf=qf.dtype):(qf=P.getBuffer(Ee))?yf=qf.dtype:"constant"in Ee?(Gf=2,"number"===typeof Ee.constant?(zf=Ee.constant,Af=Jf=wf=0):(zf=0<Ee.constant.length?Ee.constant[0]:0,Af=1<Ee.constant.length?Ee.constant[1]:0,Jf=2<Ee.constant.length?Ee.constant[2]:0,wf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=ia(Ee.buffer)?P.createStream(34962,Ee.buffer):
P.getBuffer(Ee.buffer),yf="type"in Ee?zd[Ee.type]:qf.dtype,Hf=!!Ee.normalized,Ff=Ee.size|0,Bf=Ee.offset|0,xf=Ee.stride|0,Ef=Ee.divisor|0);Kf=I.buffer;I.buffer=qf;Lf=I.divisor;I.divisor=Ef;Mf=I.normalized;I.normalized=Hf;tf=I.offset;I.offset=Bf;Rf=I.size;I.size=Ff;If=I.state;I.state=Gf;uf=I.stride;I.stride=xf;dg=I.type;I.type=yf;Sf=I.w;I.w=wf;Tf=I.x;I.x=zf;qg=I.y;I.y=Af;gf=I.z;I.z=Jf;df=V.call(this,ha,b,a);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ia(df)?(Nf=!0,Of=P.createStream(34962,
df),Uf=Of.dtype):(Of=P.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=ia(df.buffer)?P.createStream(34962,df.buffer):P.getBuffer(df.buffer),Uf="type"in df?zd[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=J.buffer;J.buffer=
Of;sg=J.divisor;J.divisor=eg;tg=J.normalized;J.normalized=fg;ug=J.offset;J.offset=gg;vg=J.size;J.size=hg;wg=J.state;J.state=ig;xg=J.stride;J.stride=Wf;yg=J.type;J.type=Uf;zg=J.w;J.w=Xf;Ag=J.x;J.x=Yf;Bg=J.y;J.y=Zf;hf=J.z;J.z=jg;ef=ja.call(this,ha,b,a);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ia(ef)?(Pf=!0,Qf=P.createStream(34962,ef),Vf=Qf.dtype):(Qf=P.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?
ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=ia(ef.buffer)?P.createStream(34962,ef.buffer):P.getBuffer(ef.buffer),Vf="type"in ef?zd[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|0,$f=ef.stride|0,kg=ef.divisor|0);Cg=Z.buffer;Z.buffer=Qf;Dg=Z.divisor;Z.divisor=kg;Eg=Z.normalized;Z.normalized=lg;Fg=Z.offset;Z.offset=mg;Gg=Z.size;Z.size=ng;Hg=Z.state;Z.state=og;Ig=Z.stride;Z.stride=$f;
Jg=Z.type;Z.type=Vf;Kg=Z.w;Z.w=ag;Lg=Z.x;Z.x=bg;Mg=Z.y;Z.y=cg;Ng=Z.z;Z.z=pg;Og=Y.vert;Y.vert=44;Pg=Y.frag;Y.frag=43;Ha.dirty=!0;e(ha,b,a);ha.viewportWidth=m;ha.viewportHeight=l;Cd[0]=h;Cd[1]=y;Cd[2]=B;Cd[3]=D;N[0]=A;N[1]=E;N[2]=C;N[3]=G;ua.blend_enable=F;Aa[0]=L;Aa[1]=M;Aa[2]=Q;Aa[3]=R;ua.depth_enable=aa;he[0]=da;he[1]=ea;he[2]=ga;he[3]=na;ua.scissor_enable=qa;ua.stencil_enable=ka;ma&&(c.cpuTime+=performance.now()-ta);pa&&Pc.destroyStream(Ka);ub.elements=za;ub.offset=La;ub.count=Oa;ub.primitive=zb;
fa[45]=Fb;fa[48]=Sa;fa[10]=pb;fa[46]=hb;fa[47]=Qa;fa[34]=Gb;fa[6]=db;fa[7]=td;fa[8]=jb;fa[9]=va;ya&&P.destroyStream(Va);u.buffer=wa;u.divisor=Db;u.normalized=Ma;u.offset=Pb;u.size=fb;u.state=ib;u.stride=xa;u.type=ec;u.w=Fa;u.x=rb;u.y=sb;u.z=Za;kc&&P.destroyStream(nb);x.buffer=tb;x.divisor=uc;x.normalized=xb;x.offset=qc;x.size=sc;x.state=ic;x.stride=Jc;x.type=ed;x.w=fd;x.x=Wb;x.y=bc;x.z=Qb;$b&&P.destroyStream(mb);v.buffer=Rc;v.divisor=Lc;v.normalized=Lb;v.offset=Eb;v.size=Mc;v.state=Ec;v.stride=Sc;
v.type=gc;v.w=Wc;v.x=gd;v.y=kd;v.z=md;Gd&&P.destroyStream(ee);t.buffer=Fd;t.divisor=Hd;t.normalized=yd;t.offset=ge;t.size=ue;t.state=ve;t.stride=fe;t.type=de;t.w=pe;t.x=be;t.y=ie;t.z=wc;qe&&P.destroyStream(le);O.buffer=re;O.divisor=Fe;O.normalized=He;O.offset=Ie;O.size=Je;O.state=Ge;O.stride=Nd;O.type=Ud;O.w=$d;O.x=ce;O.y=Ke;O.z=Bd;De&&P.destroyStream(Le);z.buffer=jf;z.divisor=nf;z.normalized=ff;z.offset=kf;z.size=lf;z.state=mf;z.stride=rf;z.type=of;z.w=sf;z.x=Cf;z.y=Df;z.z=Pe;pf&&P.destroyStream(qf);
I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=tf;I.size=Rf;I.state=If;I.stride=uf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=gf;Nf&&P.destroyStream(Of);J.buffer=rg;J.divisor=sg;J.normalized=tg;J.offset=ug;J.size=vg;J.state=wg;J.stride=xg;J.type=yg;J.w=zg;J.x=Ag;J.y=Bg;J.z=hf;Pf&&P.destroyStream(Qf);Z.buffer=Cg;Z.divisor=Dg;Z.normalized=Eg;Z.offset=Fg;Z.size=Gg;Z.state=Hg;Z.stride=Ig;Z.type=Jg;Z.w=Kg;Z.x=Lg;Z.y=Mg;Z.z=Ng;Y.vert=Og;Y.frag=Pg;Ha.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
c,d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,t,la,sa,O,oa,z,ba,I,V,J,ja,Z,ka,ma,Sa,Db,ea,Oa,W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra,cc,qc,ic,td){var zc,aa,P,ha,Ha,ub,Pc,Vc,L,F,ia,ua,Y,fa,ta,N,G,ca,za,Aa,Ka,E,nc,Fb,qa,Gb,zb,Ye,xd,he,ee,we,ue,Od,ge,ve,yd,Cd,Gd;zc=a.attributes;aa=a.buffer;P=a.context;ha=a.current;Ha=a.draw;ub=a.elements;Pc=a.extensions;Vc=a.framebuffer;L=a.gl;F=a.isBufferArgs;ia=a.next;ua=a.shader;Y=a.uniforms;fa=a.vao;ta=ia.blend_color;N=ha.blend_color;G=ia.blend_equation;
ca=ha.blend_equation;za=ia.blend_func;Aa=ha.blend_func;Ka=ia.colorMask;E=ha.colorMask;nc=ia.depth_range;Fb=ha.depth_range;qa=ia.polygonOffset_offset;Gb=ha.polygonOffset_offset;zb=ia.sample_coverage;Ye=ha.sample_coverage;xd=ia.scissor_box;he=ha.scissor_box;ee=ia.stencil_func;we=ha.stencil_func;ue=ia.stencil_opBack;Od=ha.stencil_opBack;ge=ia.stencil_opFront;ve=ha.stencil_opFront;yd=ia.viewport;Cd=ha.viewport;Gd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(b,e){var a,g,f,k,n,p;a=Vc.next;a!==Vc.cur&&(a?L.bindFramebuffer(36160,a.framebuffer):L.bindFramebuffer(36160,null),Vc.cur=a);if(ha.dirty){var r,q,d,u,m,l,h,y,B,x,K,v,D,U,A,t,H,z,I,la,O,sa,J,oa,V,Y,Z,ba,ua,ta,ja,za,Ua,Vb;r=ia.dither;r!==ha.dither&&(r?L.enable(3024):L.disable(3024),ha.dither=r);q=G[0];d=G[1];if(q!==ca[0]||d!==ca[1])L.blendEquationSeparate(q,d),ca[0]=q,ca[1]=d;u=ia.depth_func;u!==ha.depth_func&&(L.depthFunc(u),ha.depth_func=u);m=nc[0];l=nc[1];if(m!==Fb[0]||l!==
Fb[1])L.depthRange(m,l),Fb[0]=m,Fb[1]=l;h=ia.depth_mask;h!==ha.depth_mask&&(L.depthMask(h),ha.depth_mask=h);y=Ka[0];B=Ka[1];x=Ka[2];K=Ka[3];if(y!==E[0]||B!==E[1]||x!==E[2]||K!==E[3])L.colorMask(y,B,x,K),E[0]=y,E[1]=B,E[2]=x,E[3]=K;v=ia.cull_enable;v!==ha.cull_enable&&(v?L.enable(2884):L.disable(2884),ha.cull_enable=v);D=ia.cull_face;D!==ha.cull_face&&(L.cullFace(D),ha.cull_face=D);U=ia.frontFace;U!==ha.frontFace&&(L.frontFace(U),ha.frontFace=U);A=ia.lineWidth;A!==ha.lineWidth&&(L.lineWidth(A),ha.lineWidth=
A);t=ia.polygonOffset_enable;t!==ha.polygonOffset_enable&&(t?L.enable(32823):L.disable(32823),ha.polygonOffset_enable=t);H=qa[0];z=qa[1];if(H!==Gb[0]||z!==Gb[1])L.polygonOffset(H,z),Gb[0]=H,Gb[1]=z;I=ia.sample_alpha;I!==ha.sample_alpha&&(I?L.enable(32926):L.disable(32926),ha.sample_alpha=I);la=ia.sample_enable;la!==ha.sample_enable&&(la?L.enable(32928):L.disable(32928),ha.sample_enable=la);O=zb[0];sa=zb[1];if(O!==Ye[0]||sa!==Ye[1])L.sampleCoverage(O,sa),Ye[0]=O,Ye[1]=sa;J=ia.stencil_mask;J!==ha.stencil_mask&&
(L.stencilMask(J),ha.stencil_mask=J);oa=ee[0];V=ee[1];Y=ee[2];if(oa!==we[0]||V!==we[1]||Y!==we[2])L.stencilFunc(oa,V,Y),we[0]=oa,we[1]=V,we[2]=Y;Z=ge[0];ba=ge[1];ua=ge[2];ta=ge[3];if(Z!==ve[0]||ba!==ve[1]||ua!==ve[2]||ta!==ve[3])L.stencilOpSeparate(Z,ba,ua,ta),ve[0]=Z,ve[1]=ba,ve[2]=ua,ve[3]=ta;ja=ue[0];za=ue[1];Ua=ue[2];Vb=ue[3];if(ja!==Od[0]||za!==Od[1]||Ua!==Od[2]||Vb!==Od[3])L.stencilOpSeparate(ja,za,Ua,Vb),Od[0]=ja,Od[1]=za,Od[2]=Ua,Od[3]=Vb}L.blendColor(0,0,0,1);N[0]=0;N[1]=0;N[2]=0;N[3]=1;
L.enable(3042);ha.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;L.disable(2929);ha.depth_enable=!1;L.enable(3089);ha.scissor_enable=!0;L.disable(2960);ha.stencil_enable=!1;if(g=ha.profile)f=performance.now(),c.count+=e;L.useProgram(ka.program);k=Pc.angle_instanced_arrays;var cb;fa.setVAO(null);L.uniform1i(C.location,!1);L.uniform1i(Ga.location,pa.bind());cb=Ha.instances;for(n=0;n<e;++n){p=b[n];var Dc,Xb,xd,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,
kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,yd,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,
yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf;Dc=p.viewport;Xb=Dc.x|0;xd=Dc.y|0;jc="width"in Dc?Dc.width|0:P.framebufferWidth-Xb;Sb="height"in Dc?Dc.height|0:P.framebufferHeight-xd;w=P.viewportWidth;P.viewportWidth=jc;Tb=P.viewportHeight;P.viewportHeight=Sb;L.viewport(Xb,xd,jc,Sb);Cd[0]=Xb;Cd[1]=xd;Cd[2]=jc;Cd[3]=Sb;Pa=p.viewport;pb=Pa.x|0;vb=Pa.y|0;hb="width"in Pa?Pa.width|0:P.framebufferWidth-pb;Qa="height"in Pa?Pa.height|0:P.framebufferHeight-vb;L.scissor(pb,vb,hb,Qa);he[0]=pb;he[1]=vb;he[2]=hb;he[3]=Qa;
Oc=ma.call(this,P,p,n);Yb=!1;jd=null;db=0;pc=!1;mc=Zc=0;jb=1;kb=0;va=5126;bb=Va=ya=qb=0;F(Oc)?(Yb=!0,jd=aa.createStream(34962,Oc),va=jd.dtype):(jd=aa.getBuffer(Oc))?va=jd.dtype:"constant"in Oc?(jb=2,"number"===typeof Oc.constant?(ya=Oc.constant,Va=bb=qb=0):(ya=0<Oc.constant.length?Oc.constant[0]:0,Va=1<Oc.constant.length?Oc.constant[1]:0,bb=2<Oc.constant.length?Oc.constant[2]:0,qb=3<Oc.constant.length?Oc.constant[3]:0)):(jd=F(Oc.buffer)?aa.createStream(34962,Oc.buffer):aa.getBuffer(Oc.buffer),va=
"type"in Oc?Gd[Oc.type]:jd.dtype,pc=!!Oc.normalized,mc=Oc.size|0,Zc=Oc.offset|0,kb=Oc.stride|0,db=Oc.divisor|0);Ba=cc.location;eb=zc[Ba];if(1===jb){eb.buffer||L.enableVertexAttribArray(Ba);Na=mc||1;if(eb.type!==va||eb.size!==Na||eb.buffer!==jd||eb.normalized!==pc||eb.offset!==Zc||eb.stride!==kb)L.bindBuffer(34962,jd.buffer),L.vertexAttribPointer(Ba,Na,va,pc,kb,Zc),eb.type=va,eb.size=Na,eb.buffer=jd,eb.normalized=pc,eb.offset=Zc,eb.stride=kb;eb.divisor!==db&&(k.vertexAttribDivisorANGLE(Ba,db),eb.divisor=
db)}else if(eb.buffer&&(L.disableVertexAttribArray(Ba),eb.buffer=null),eb.x!==ya||eb.y!==Va||eb.z!==bb||eb.w!==qb)L.vertexAttrib4f(Ba,ya,Va,bb,qb),eb.x=ya,eb.y=Va,eb.z=bb,eb.w=qb;Bb=Sa.call(this,P,p,n);Ab=!1;Ta=null;Hc=0;Kb=!1;Ub=Mb=0;wa=1;Jd=0;Ma=5126;xa=ib=fb=Pb=0;F(Bb)?(Ab=!0,Ta=aa.createStream(34962,Bb),Ma=Ta.dtype):(Ta=aa.getBuffer(Bb))?Ma=Ta.dtype:"constant"in Bb?(wa=2,"number"===typeof Bb.constant?(fb=Bb.constant,ib=xa=Pb=0):(fb=0<Bb.constant.length?Bb.constant[0]:0,ib=1<Bb.constant.length?
Bb.constant[1]:0,xa=2<Bb.constant.length?Bb.constant[2]:0,Pb=3<Bb.constant.length?Bb.constant[3]:0)):(Ta=F(Bb.buffer)?aa.createStream(34962,Bb.buffer):aa.getBuffer(Bb.buffer),Ma="type"in Bb?Gd[Bb.type]:Ta.dtype,Kb=!!Bb.normalized,Ub=Bb.size|0,Mb=Bb.offset|0,Jd=Bb.stride|0,Hc=Bb.divisor|0);ec=ic.location;Fa=zc[ec];if(1===wa){Fa.buffer||L.enableVertexAttribArray(ec);rb=Ub||1;if(Fa.type!==Ma||Fa.size!==rb||Fa.buffer!==Ta||Fa.normalized!==Kb||Fa.offset!==Mb||Fa.stride!==Jd)L.bindBuffer(34962,Ta.buffer),
L.vertexAttribPointer(ec,rb,Ma,Kb,Jd,Mb),Fa.type=Ma,Fa.size=rb,Fa.buffer=Ta,Fa.normalized=Kb,Fa.offset=Mb,Fa.stride=Jd;Fa.divisor!==Hc&&(k.vertexAttribDivisorANGLE(ec,Hc),Fa.divisor=Hc)}else if(Fa.buffer&&(L.disableVertexAttribArray(ec),Fa.buffer=null),Fa.x!==fb||Fa.y!==ib||Fa.z!==xa||Fa.w!==Pb)L.vertexAttrib4f(ec,fb,ib,xa,Pb),Fa.x=fb,Fa.y=ib,Fa.z=xa,Fa.w=Pb;sb=Db.call(this,P,p,n);Za=!1;$a=null;kc=0;dd=!1;Wa=tc=0;Nb=1;$c=0;Ia=5126;lb=Ca=Ra=vc=0;F(sb)?(Za=!0,$a=aa.createStream(34962,sb),Ia=$a.dtype):
($a=aa.getBuffer(sb))?Ia=$a.dtype:"constant"in sb?(Nb=2,"number"===typeof sb.constant?(Ra=sb.constant,Ca=lb=vc=0):(Ra=0<sb.constant.length?sb.constant[0]:0,Ca=1<sb.constant.length?sb.constant[1]:0,lb=2<sb.constant.length?sb.constant[2]:0,vc=3<sb.constant.length?sb.constant[3]:0)):($a=F(sb.buffer)?aa.createStream(34962,sb.buffer):aa.getBuffer(sb.buffer),Ia="type"in sb?Gd[sb.type]:$a.dtype,dd=!!sb.normalized,Wa=sb.size|0,tc=sb.offset|0,$c=sb.stride|0,kc=sb.divisor|0);wb=qc.location;Cb=zc[wb];if(1===
Nb){Cb.buffer||L.enableVertexAttribArray(wb);tb=Wa||1;if(Cb.type!==Ia||Cb.size!==tb||Cb.buffer!==$a||Cb.normalized!==dd||Cb.offset!==tc||Cb.stride!==$c)L.bindBuffer(34962,$a.buffer),L.vertexAttribPointer(wb,tb,Ia,dd,$c,tc),Cb.type=Ia,Cb.size=tb,Cb.buffer=$a,Cb.normalized=dd,Cb.offset=tc,Cb.stride=$c;Cb.divisor!==kc&&(k.vertexAttribDivisorANGLE(wb,kc),Cb.divisor=kc)}else if(Cb.buffer&&(L.disableVertexAttribArray(wb),Cb.buffer=null),Cb.x!==Ra||Cb.y!==Ca||Cb.z!==lb||Cb.w!==vc)L.vertexAttrib4f(wb,Ra,
Ca,lb,vc),Cb.x=Ra,Cb.y=Ca,Cb.z=lb,Cb.w=vc;uc=ea.call(this,P,p,n);xb=!1;wd=null;sc=0;Ed=!1;ed=Jc=0;fd=1;Wb=0;bc=5126;mb=$b=Ja=Qb=0;F(uc)?(xb=!0,wd=aa.createStream(34962,uc),bc=wd.dtype):(wd=aa.getBuffer(uc))?bc=wd.dtype:"constant"in uc?(fd=2,"number"===typeof uc.constant?(Ja=uc.constant,$b=mb=Qb=0):(Ja=0<uc.constant.length?uc.constant[0]:0,$b=1<uc.constant.length?uc.constant[1]:0,mb=2<uc.constant.length?uc.constant[2]:0,Qb=3<uc.constant.length?uc.constant[3]:0)):(wd=F(uc.buffer)?aa.createStream(34962,
uc.buffer):aa.getBuffer(uc.buffer),bc="type"in uc?Gd[uc.type]:wd.dtype,Ed=!!uc.normalized,ed=uc.size|0,Jc=uc.offset|0,Wb=uc.stride|0,sc=uc.divisor|0);yb=td.location;Ob=zc[yb];if(1===fd){Ob.buffer||L.enableVertexAttribArray(yb);Rb=ed||1;if(Ob.type!==bc||Ob.size!==Rb||Ob.buffer!==wd||Ob.normalized!==Ed||Ob.offset!==Jc||Ob.stride!==Wb)L.bindBuffer(34962,wd.buffer),L.vertexAttribPointer(yb,Rb,bc,Ed,Wb,Jc),Ob.type=bc,Ob.size=Rb,Ob.buffer=wd,Ob.normalized=Ed,Ob.offset=Jc,Ob.stride=Wb;Ob.divisor!==sc&&(k.vertexAttribDivisorANGLE(yb,
sc),Ob.divisor=sc)}else if(Ob.buffer&&(L.disableVertexAttribArray(yb),Ob.buffer=null),Ob.x!==Ja||Ob.y!==$b||Ob.z!==mb||Ob.w!==Qb)L.vertexAttrib4f(yb,Ja,$b,mb,Qb),Ob.x=Ja,Ob.y=$b,Ob.z=mb,Ob.w=Qb;fc=Oa.call(this,P,p,n);hc=!1;yd=null;xc=0;yc=!1;Kc=Ac=0;ad=1;Rc=0;Lc=5126;Ec=Mc=Eb=Lb=0;F(fc)?(hc=!0,yd=aa.createStream(34962,fc),Lc=yd.dtype):(yd=aa.getBuffer(fc))?Lc=yd.dtype:"constant"in fc?(ad=2,"number"===typeof fc.constant?(Eb=fc.constant,Mc=Ec=Lb=0):(Eb=0<fc.constant.length?fc.constant[0]:0,Mc=1<fc.constant.length?
fc.constant[1]:0,Ec=2<fc.constant.length?fc.constant[2]:0,Lb=3<fc.constant.length?fc.constant[3]:0)):(yd=F(fc.buffer)?aa.createStream(34962,fc.buffer):aa.getBuffer(fc.buffer),Lc="type"in fc?Gd[fc.type]:yd.dtype,yc=!!fc.normalized,Kc=fc.size|0,Ac=fc.offset|0,Rc=fc.stride|0,xc=fc.divisor|0);Sc=ob.location;gc=zc[Sc];if(1===ad){gc.buffer||L.enableVertexAttribArray(Sc);Wc=Kc||1;if(gc.type!==Lc||gc.size!==Wc||gc.buffer!==yd||gc.normalized!==yc||gc.offset!==Ac||gc.stride!==Rc)L.bindBuffer(34962,yd.buffer),
L.vertexAttribPointer(Sc,Wc,Lc,yc,Rc,Ac),gc.type=Lc,gc.size=Wc,gc.buffer=yd,gc.normalized=yc,gc.offset=Ac,gc.stride=Rc;gc.divisor!==xc&&(k.vertexAttribDivisorANGLE(Sc,xc),gc.divisor=xc)}else if(gc.buffer&&(L.disableVertexAttribArray(Sc),gc.buffer=null),gc.x!==Eb||gc.y!==Mc||gc.z!==Ec||gc.w!==Lb)L.vertexAttrib4f(Sc,Eb,Mc,Ec,Lb),gc.x=Eb,gc.y=Mc,gc.z=Ec,gc.w=Lb;gd=W.call(this,P,p,n);kd=!1;md=null;Xc=0;bf=!1;ke=Zd=0;se=1;me=0;Md=5126;od=Bc=id=Kd=0;F(gd)?(kd=!0,md=aa.createStream(34962,gd),Md=md.dtype):
(md=aa.getBuffer(gd))?Md=md.dtype:"constant"in gd?(se=2,"number"===typeof gd.constant?(id=gd.constant,Bc=od=Kd=0):(id=0<gd.constant.length?gd.constant[0]:0,Bc=1<gd.constant.length?gd.constant[1]:0,od=2<gd.constant.length?gd.constant[2]:0,Kd=3<gd.constant.length?gd.constant[3]:0)):(md=F(gd.buffer)?aa.createStream(34962,gd.buffer):aa.getBuffer(gd.buffer),Md="type"in gd?Gd[gd.type]:md.dtype,bf=!!gd.normalized,ke=gd.size|0,Zd=gd.offset|0,me=gd.stride|0,Xc=gd.divisor|0);ld=ab.location;cd=zc[ld];if(1===
se){cd.buffer||L.enableVertexAttribArray(ld);pd=ke||1;if(cd.type!==Md||cd.size!==pd||cd.buffer!==md||cd.normalized!==bf||cd.offset!==Zd||cd.stride!==me)L.bindBuffer(34962,md.buffer),L.vertexAttribPointer(ld,pd,Md,bf,me,Zd),cd.type=Md,cd.size=pd,cd.buffer=md,cd.normalized=bf,cd.offset=Zd,cd.stride=me;cd.divisor!==Xc&&(k.vertexAttribDivisorANGLE(ld,Xc),cd.divisor=Xc)}else if(cd.buffer&&(L.disableVertexAttribArray(ld),cd.buffer=null),cd.x!==id||cd.y!==Bc||cd.z!==od||cd.w!==Kd)L.vertexAttrib4f(ld,id,
Bc,od,Kd),cd.x=id,cd.y=Bc,cd.z=od,cd.w=Kd;Fd=Q.call(this,P,p,n);Hd=!1;te=null;ze=0;Ae=!1;fe=ne=0;de=1;pe=0;be=5126;qe=Uc=wc=ie=0;F(Fd)?(Hd=!0,te=aa.createStream(34962,Fd),be=te.dtype):(te=aa.getBuffer(Fd))?be=te.dtype:"constant"in Fd?(de=2,"number"===typeof Fd.constant?(wc=Fd.constant,Uc=qe=ie=0):(wc=0<Fd.constant.length?Fd.constant[0]:0,Uc=1<Fd.constant.length?Fd.constant[1]:0,qe=2<Fd.constant.length?Fd.constant[2]:0,ie=3<Fd.constant.length?Fd.constant[3]:0)):(te=F(Fd.buffer)?aa.createStream(34962,
Fd.buffer):aa.getBuffer(Fd.buffer),be="type"in Fd?Gd[Fd.type]:te.dtype,Ae=!!Fd.normalized,fe=Fd.size|0,ne=Fd.offset|0,pe=Fd.stride|0,ze=Fd.divisor|0);le=S.location;Ld=zc[le];if(1===de){Ld.buffer||L.enableVertexAttribArray(le);Pd=fe||4;if(Ld.type!==be||Ld.size!==Pd||Ld.buffer!==te||Ld.normalized!==Ae||Ld.offset!==ne||Ld.stride!==pe)L.bindBuffer(34962,te.buffer),L.vertexAttribPointer(le,Pd,be,Ae,pe,ne),Ld.type=be,Ld.size=Pd,Ld.buffer=te,Ld.normalized=Ae,Ld.offset=ne,Ld.stride=pe;Ld.divisor!==ze&&(k.vertexAttribDivisorANGLE(le,
ze),Ld.divisor=ze)}else if(Ld.buffer&&(L.disableVertexAttribArray(le),Ld.buffer=null),Ld.x!==wc||Ld.y!==Uc||Ld.z!==qe||Ld.w!==ie)L.vertexAttrib4f(le,wc,Uc,qe,ie),Ld.x=wc,Ld.y=Uc,Ld.z=qe,Ld.w=ie;Qd=M.call(this,P,p,n);Rd=!1;je=null;vf=0;Ce=!1;Re=oe=0;Se=1;Ne=0;re=5126;Je=Ie=He=Fe=0;F(Qd)?(Rd=!0,je=aa.createStream(34962,Qd),re=je.dtype):(je=aa.getBuffer(Qd))?re=je.dtype:"constant"in Qd?(Se=2,"number"===typeof Qd.constant?(He=Qd.constant,Ie=Je=Fe=0):(He=0<Qd.constant.length?Qd.constant[0]:0,Ie=1<Qd.constant.length?
Qd.constant[1]:0,Je=2<Qd.constant.length?Qd.constant[2]:0,Fe=3<Qd.constant.length?Qd.constant[3]:0)):(je=F(Qd.buffer)?aa.createStream(34962,Qd.buffer):aa.getBuffer(Qd.buffer),re="type"in Qd?Gd[Qd.type]:je.dtype,Ce=!!Qd.normalized,Re=Qd.size|0,oe=Qd.offset|0,Ne=Qd.stride|0,vf=Qd.divisor|0);Ge=Hb.location;Nd=zc[Ge];if(1===Se){Nd.buffer||L.enableVertexAttribArray(Ge);Ud=Re||4;if(Nd.type!==re||Nd.size!==Ud||Nd.buffer!==je||Nd.normalized!==Ce||Nd.offset!==oe||Nd.stride!==Ne)L.bindBuffer(34962,je.buffer),
L.vertexAttribPointer(Ge,Ud,re,Ce,Ne,oe),Nd.type=re,Nd.size=Ud,Nd.buffer=je,Nd.normalized=Ce,Nd.offset=oe,Nd.stride=Ne;Nd.divisor!==vf&&(k.vertexAttribDivisorANGLE(Ge,vf),Nd.divisor=vf)}else if(Nd.buffer&&(L.disableVertexAttribArray(Ge),Nd.buffer=null),Nd.x!==He||Nd.y!==Ie||Nd.z!==Je||Nd.w!==Fe)L.vertexAttrib4f(Ge,He,Ie,Je,Fe),Nd.x=He,Nd.y=Ie,Nd.z=Je,Nd.w=Fe;$d=T.call(this,P,p,n);ce=!1;Ke=null;Bd=0;Sd=!1;Le=De=0;cf=1;af=0;Te=5126;Ue=Xe=$e=Oe=0;F($d)?(ce=!0,Ke=aa.createStream(34962,$d),Te=Ke.dtype):
(Ke=aa.getBuffer($d))?Te=Ke.dtype:"constant"in $d?(cf=2,"number"===typeof $d.constant?($e=$d.constant,Xe=Ue=Oe=0):($e=0<$d.constant.length?$d.constant[0]:0,Xe=1<$d.constant.length?$d.constant[1]:0,Ue=2<$d.constant.length?$d.constant[2]:0,Oe=3<$d.constant.length?$d.constant[3]:0)):(Ke=F($d.buffer)?aa.createStream(34962,$d.buffer):aa.getBuffer($d.buffer),Te="type"in $d?Gd[$d.type]:Ke.dtype,Sd=!!$d.normalized,Le=$d.size|0,De=$d.offset|0,af=$d.stride|0,Bd=$d.divisor|0);Ve=na.location;Td=zc[Ve];if(1===
cf){Td.buffer||L.enableVertexAttribArray(Ve);Xd=Le||1;if(Td.type!==Te||Td.size!==Xd||Td.buffer!==Ke||Td.normalized!==Sd||Td.offset!==De||Td.stride!==af)L.bindBuffer(34962,Ke.buffer),L.vertexAttribPointer(Ve,Xd,Te,Sd,af,De),Td.type=Te,Td.size=Xd,Td.buffer=Ke,Td.normalized=Sd,Td.offset=De,Td.stride=af;Td.divisor!==Bd&&(k.vertexAttribDivisorANGLE(Ve,Bd),Td.divisor=Bd)}else if(Td.buffer&&(L.disableVertexAttribArray(Ve),Td.buffer=null),Td.x!==$e||Td.y!==Xe||Td.z!==Ue||Td.w!==Oe)L.vertexAttrib4f(Ve,$e,
Xe,Ue,Oe),Td.x=$e,Td.y=Xe,Td.z=Ue,Td.w=Oe;We=P.pixelRatio;n&&jf===We||(jf=We,L.uniform1f(nb.location,We));nf=R.call(this,P,p,n);ff=nf[0];lf=nf[1];n&&kf===ff&&mf===lf||(kf=ff,mf=lf,L.uniform2f(Da.location,ff,lf));rf=p.scale;of=rf[0];Cf=rf[1];n&&sf===of&&Df===Cf||(sf=of,Df=Cf,L.uniform2f(La.location,of,Cf));Pe=p.scaleFract;Ee=Pe[0];qf=Pe[1];n&&pf===Ee&&Ef===qf||(pf=Ee,Ef=qf,L.uniform2f(X.location,Ee,qf));Hf=p.translate;Bf=Hf[0];Gf=Hf[1];n&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,L.uniform2f(ga.location,Bf,Gf));
yf=p.translateFract;wf=yf[0];Af=yf[1];n&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,L.uniform2f(ra.location,wf,Af));Kf=p.opacity;n&&Lf===Kf||(Lf=Kf,L.uniform1f(da.location,Kf));Mf=p.elements;tf=null;(tf=(Rf=F(Mf))?ub.createStream(Mf):ub.getElements(Mf))&&L.bindBuffer(34963,tf.buffer.buffer);If=p.offset;if(uf=p.count)0<cb?tf?k.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),cb):k.drawArraysInstancedANGLE(0,If,uf,cb):0>cb&&(tf?L.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):L.drawArrays(0,If,uf)),
P.viewportWidth=w,P.viewportHeight=Tb,Yb&&aa.destroyStream(jd),Ab&&aa.destroyStream(Ta),Za&&aa.destroyStream($a),xb&&aa.destroyStream(wd),hc&&aa.destroyStream(yd),kd&&aa.destroyStream(md),Hd&&aa.destroyStream(te),Rd&&aa.destroyStream(je),ce&&aa.destroyStream(Ke),Rf&&ub.destroyStream(tf)}pa.unbind();ha.dirty=!0;fa.setVAO(null);g&&(c.cpuTime+=performance.now()-f)},draw:function(a){var n,p,r,u,x,K,v,U,t,H,z,I,la,O,sa,J,M,Q,R,oa,V,T,Y,Z,ba,W,ea,ua,ka,ma,ta,ja,za,pa,Oa,Ya,Ea,Sa,Jb,Ua,Vb,cb,Db,Xb,xd,jc,
Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,yd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re;n=Vc.next;n!==Vc.cur&&(n?L.bindFramebuffer(36160,n.framebuffer):L.bindFramebuffer(36160,null),Vc.cur=
n);if(ha.dirty){var Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf;Se=ia.dither;Se!==ha.dither&&(Se?L.enable(3024):L.disable(3024),ha.dither=Se);Ne=G[0];re=G[1];if(Ne!==ca[0]||re!==ca[1])L.blendEquationSeparate(Ne,re),ca[0]=Ne,ca[1]=re;Fe=ia.depth_func;Fe!==ha.depth_func&&(L.depthFunc(Fe),ha.depth_func=Fe);He=nc[0];Ie=nc[1];if(He!==Fb[0]||Ie!==Fb[1])L.depthRange(He,Ie),Fb[0]=He,Fb[1]=Ie;Je=ia.depth_mask;Je!==ha.depth_mask&&(L.depthMask(Je),ha.depth_mask=
Je);Ge=Ka[0];Nd=Ka[1];Ud=Ka[2];$d=Ka[3];if(Ge!==E[0]||Nd!==E[1]||Ud!==E[2]||$d!==E[3])L.colorMask(Ge,Nd,Ud,$d),E[0]=Ge,E[1]=Nd,E[2]=Ud,E[3]=$d;ce=ia.cull_enable;ce!==ha.cull_enable&&(ce?L.enable(2884):L.disable(2884),ha.cull_enable=ce);Ke=ia.cull_face;Ke!==ha.cull_face&&(L.cullFace(Ke),ha.cull_face=Ke);Bd=ia.frontFace;Bd!==ha.frontFace&&(L.frontFace(Bd),ha.frontFace=Bd);Sd=ia.lineWidth;Sd!==ha.lineWidth&&(L.lineWidth(Sd),ha.lineWidth=Sd);De=ia.polygonOffset_enable;De!==ha.polygonOffset_enable&&(De?
L.enable(32823):L.disable(32823),ha.polygonOffset_enable=De);Le=qa[0];cf=qa[1];if(Le!==Gb[0]||cf!==Gb[1])L.polygonOffset(Le,cf),Gb[0]=Le,Gb[1]=cf;af=ia.sample_alpha;af!==ha.sample_alpha&&(af?L.enable(32926):L.disable(32926),ha.sample_alpha=af);Te=ia.sample_enable;Te!==ha.sample_enable&&(Te?L.enable(32928):L.disable(32928),ha.sample_enable=Te);Oe=zb[0];$e=zb[1];if(Oe!==Ye[0]||$e!==Ye[1])L.sampleCoverage(Oe,$e),Ye[0]=Oe,Ye[1]=$e;Xe=ia.stencil_mask;Xe!==ha.stencil_mask&&(L.stencilMask(Xe),ha.stencil_mask=
Xe);Ue=ee[0];Ve=ee[1];Td=ee[2];if(Ue!==we[0]||Ve!==we[1]||Td!==we[2])L.stencilFunc(Ue,Ve,Td),we[0]=Ue,we[1]=Ve,we[2]=Td;Xd=ge[0];We=ge[1];jf=ge[2];nf=ge[3];if(Xd!==ve[0]||We!==ve[1]||jf!==ve[2]||nf!==ve[3])L.stencilOpSeparate(Xd,We,jf,nf),ve[0]=Xd,ve[1]=We,ve[2]=jf,ve[3]=nf;ff=ue[0];kf=ue[1];lf=ue[2];mf=ue[3];if(ff!==Od[0]||kf!==Od[1]||lf!==Od[2]||mf!==Od[3])L.stencilOpSeparate(ff,kf,lf,mf),Od[0]=ff,Od[1]=kf,Od[2]=lf,Od[3]=mf}p=a.viewport;r=p.x|0;u=p.y|0;x="width"in p?p.width|0:P.framebufferWidth-
r;K="height"in p?p.height|0:P.framebufferHeight-u;v=P.viewportWidth;P.viewportWidth=x;U=P.viewportHeight;P.viewportHeight=K;L.viewport(r,u,x,K);Cd[0]=r;Cd[1]=u;Cd[2]=x;Cd[3]=K;L.blendColor(0,0,0,1);N[0]=0;N[1]=0;N[2]=0;N[3]=1;L.enable(3042);ha.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;L.disable(2929);ha.depth_enable=!1;t=a.viewport;H=t.x|0;z=t.y|0;I="width"in t?t.width|0:P.framebufferWidth-H;la="height"in t?t.height|0:P.framebufferHeight-z;L.scissor(H,
z,I,la);he[0]=H;he[1]=z;he[2]=I;he[3]=la;L.enable(3089);ha.scissor_enable=!0;L.disable(2960);ha.stencil_enable=!1;if(O=ha.profile)sa=performance.now(),c.count++;L.useProgram(d.program);J=Pc.angle_instanced_arrays;fa.setVAO(null);M=h.call(this,P,a,0);Q=!1;R=null;oa=0;V=!1;Y=T=0;Z=1;ba=0;W=5126;ma=ka=ua=ea=0;F(M)?(Q=!0,R=aa.createStream(34962,M),W=R.dtype):(R=aa.getBuffer(M))?W=R.dtype:"constant"in M?(Z=2,"number"===typeof M.constant?(ua=M.constant,ka=ma=ea=0):(ua=0<M.constant.length?M.constant[0]:
0,ka=1<M.constant.length?M.constant[1]:0,ma=2<M.constant.length?M.constant[2]:0,ea=3<M.constant.length?M.constant[3]:0)):(R=F(M.buffer)?aa.createStream(34962,M.buffer):aa.getBuffer(M.buffer),W="type"in M?Gd[M.type]:R.dtype,V=!!M.normalized,Y=M.size|0,T=M.offset|0,ba=M.stride|0,oa=M.divisor|0);ta=cc.location;ja=zc[ta];if(1===Z){ja.buffer||L.enableVertexAttribArray(ta);za=Y||1;if(ja.type!==W||ja.size!==za||ja.buffer!==R||ja.normalized!==V||ja.offset!==T||ja.stride!==ba)L.bindBuffer(34962,R.buffer),
L.vertexAttribPointer(ta,za,W,V,ba,T),ja.type=W,ja.size=za,ja.buffer=R,ja.normalized=V,ja.offset=T,ja.stride=ba;ja.divisor!==oa&&(J.vertexAttribDivisorANGLE(ta,oa),ja.divisor=oa)}else if(ja.buffer&&(L.disableVertexAttribArray(ta),ja.buffer=null),ja.x!==ua||ja.y!==ka||ja.z!==ma||ja.w!==ea)L.vertexAttrib4f(ta,ua,ka,ma,ea),ja.x=ua,ja.y=ka,ja.z=ma,ja.w=ea;pa=m.call(this,P,a,0);Oa=!1;Ya=null;Ea=0;Sa=!1;Ua=Jb=0;Vb=1;cb=0;Db=5126;Sb=jc=xd=Xb=0;F(pa)?(Oa=!0,Ya=aa.createStream(34962,pa),Db=Ya.dtype):(Ya=aa.getBuffer(pa))?
Db=Ya.dtype:"constant"in pa?(Vb=2,"number"===typeof pa.constant?(xd=pa.constant,jc=Sb=Xb=0):(xd=0<pa.constant.length?pa.constant[0]:0,jc=1<pa.constant.length?pa.constant[1]:0,Sb=2<pa.constant.length?pa.constant[2]:0,Xb=3<pa.constant.length?pa.constant[3]:0)):(Ya=F(pa.buffer)?aa.createStream(34962,pa.buffer):aa.getBuffer(pa.buffer),Db="type"in pa?Gd[pa.type]:Ya.dtype,Sa=!!pa.normalized,Ua=pa.size|0,Jb=pa.offset|0,cb=pa.stride|0,Ea=pa.divisor|0);w=ic.location;Tb=zc[w];if(1===Vb){Tb.buffer||L.enableVertexAttribArray(w);
Pa=Ua||1;if(Tb.type!==Db||Tb.size!==Pa||Tb.buffer!==Ya||Tb.normalized!==Sa||Tb.offset!==Jb||Tb.stride!==cb)L.bindBuffer(34962,Ya.buffer),L.vertexAttribPointer(w,Pa,Db,Sa,cb,Jb),Tb.type=Db,Tb.size=Pa,Tb.buffer=Ya,Tb.normalized=Sa,Tb.offset=Jb,Tb.stride=cb;Tb.divisor!==Ea&&(J.vertexAttribDivisorANGLE(w,Ea),Tb.divisor=Ea)}else if(Tb.buffer&&(L.disableVertexAttribArray(w),Tb.buffer=null),Tb.x!==xd||Tb.y!==jc||Tb.z!==Sb||Tb.w!==Xb)L.vertexAttrib4f(w,xd,jc,Sb,Xb),Tb.x=xd,Tb.y=jc,Tb.z=Sb,Tb.w=Xb;pb=l.call(this,
P,a,0);vb=!1;hb=null;Qa=0;Oc=!1;jd=Yb=0;db=1;pc=0;Zc=5126;va=kb=jb=mc=0;F(pb)?(vb=!0,hb=aa.createStream(34962,pb),Zc=hb.dtype):(hb=aa.getBuffer(pb))?Zc=hb.dtype:"constant"in pb?(db=2,"number"===typeof pb.constant?(jb=pb.constant,kb=va=mc=0):(jb=0<pb.constant.length?pb.constant[0]:0,kb=1<pb.constant.length?pb.constant[1]:0,va=2<pb.constant.length?pb.constant[2]:0,mc=3<pb.constant.length?pb.constant[3]:0)):(hb=F(pb.buffer)?aa.createStream(34962,pb.buffer):aa.getBuffer(pb.buffer),Zc="type"in pb?Gd[pb.type]:
hb.dtype,Oc=!!pb.normalized,jd=pb.size|0,Yb=pb.offset|0,pc=pb.stride|0,Qa=pb.divisor|0);qb=qc.location;ya=zc[qb];if(1===db){ya.buffer||L.enableVertexAttribArray(qb);Va=jd||1;if(ya.type!==Zc||ya.size!==Va||ya.buffer!==hb||ya.normalized!==Oc||ya.offset!==Yb||ya.stride!==pc)L.bindBuffer(34962,hb.buffer),L.vertexAttribPointer(qb,Va,Zc,Oc,pc,Yb),ya.type=Zc,ya.size=Va,ya.buffer=hb,ya.normalized=Oc,ya.offset=Yb,ya.stride=pc;ya.divisor!==Qa&&(J.vertexAttribDivisorANGLE(qb,Qa),ya.divisor=Qa)}else if(ya.buffer&&
(L.disableVertexAttribArray(qb),ya.buffer=null),ya.x!==jb||ya.y!==kb||ya.z!==va||ya.w!==mc)L.vertexAttrib4f(qb,jb,kb,va,mc),ya.x=jb,ya.y=kb,ya.z=va,ya.w=mc;bb=f.call(this,P,a,0);Ba=!1;eb=null;Na=0;Bb=!1;Ta=Ab=0;Hc=1;Kb=0;Mb=5126;Ma=yd=wa=Ub=0;F(bb)?(Ba=!0,eb=aa.createStream(34962,bb),Mb=eb.dtype):(eb=aa.getBuffer(bb))?Mb=eb.dtype:"constant"in bb?(Hc=2,"number"===typeof bb.constant?(wa=bb.constant,yd=Ma=Ub=0):(wa=0<bb.constant.length?bb.constant[0]:0,yd=1<bb.constant.length?bb.constant[1]:0,Ma=2<bb.constant.length?
bb.constant[2]:0,Ub=3<bb.constant.length?bb.constant[3]:0)):(eb=F(bb.buffer)?aa.createStream(34962,bb.buffer):aa.getBuffer(bb.buffer),Mb="type"in bb?Gd[bb.type]:eb.dtype,Bb=!!bb.normalized,Ta=bb.size|0,Ab=bb.offset|0,Kb=bb.stride|0,Na=bb.divisor|0);Pb=td.location;fb=zc[Pb];if(1===Hc){fb.buffer||L.enableVertexAttribArray(Pb);ib=Ta||1;if(fb.type!==Mb||fb.size!==ib||fb.buffer!==eb||fb.normalized!==Bb||fb.offset!==Ab||fb.stride!==Kb)L.bindBuffer(34962,eb.buffer),L.vertexAttribPointer(Pb,ib,Mb,Bb,Kb,Ab),
fb.type=Mb,fb.size=ib,fb.buffer=eb,fb.normalized=Bb,fb.offset=Ab,fb.stride=Kb;fb.divisor!==Na&&(J.vertexAttribDivisorANGLE(Pb,Na),fb.divisor=Na)}else if(fb.buffer&&(L.disableVertexAttribArray(Pb),fb.buffer=null),fb.x!==wa||fb.y!==yd||fb.z!==Ma||fb.w!==Ub)L.vertexAttrib4f(Pb,wa,yd,Ma,Ub),fb.x=wa,fb.y=yd,fb.z=Ma,fb.w=Ub;xa=k.call(this,P,a,0);ec=!1;Fa=null;rb=0;sb=!1;$a=Za=0;kc=1;dd=0;tc=5126;Ia=$c=Nb=Wa=0;F(xa)?(ec=!0,Fa=aa.createStream(34962,xa),tc=Fa.dtype):(Fa=aa.getBuffer(xa))?tc=Fa.dtype:"constant"in
xa?(kc=2,"number"===typeof xa.constant?(Nb=xa.constant,$c=Ia=Wa=0):(Nb=0<xa.constant.length?xa.constant[0]:0,$c=1<xa.constant.length?xa.constant[1]:0,Ia=2<xa.constant.length?xa.constant[2]:0,Wa=3<xa.constant.length?xa.constant[3]:0)):(Fa=F(xa.buffer)?aa.createStream(34962,xa.buffer):aa.getBuffer(xa.buffer),tc="type"in xa?Gd[xa.type]:Fa.dtype,sb=!!xa.normalized,$a=xa.size|0,Za=xa.offset|0,dd=xa.stride|0,rb=xa.divisor|0);vc=ob.location;Ra=zc[vc];if(1===kc){Ra.buffer||L.enableVertexAttribArray(vc);Ca=
$a||1;if(Ra.type!==tc||Ra.size!==Ca||Ra.buffer!==Fa||Ra.normalized!==sb||Ra.offset!==Za||Ra.stride!==dd)L.bindBuffer(34962,Fa.buffer),L.vertexAttribPointer(vc,Ca,tc,sb,dd,Za),Ra.type=tc,Ra.size=Ca,Ra.buffer=Fa,Ra.normalized=sb,Ra.offset=Za,Ra.stride=dd;Ra.divisor!==rb&&(J.vertexAttribDivisorANGLE(vc,rb),Ra.divisor=rb)}else if(Ra.buffer&&(L.disableVertexAttribArray(vc),Ra.buffer=null),Ra.x!==Nb||Ra.y!==$c||Ra.z!==Ia||Ra.w!==Wa)L.vertexAttrib4f(vc,Nb,$c,Ia,Wa),Ra.x=Nb,Ra.y=$c,Ra.z=Ia,Ra.w=Wa;lb=b.call(this,
P,a,0);wb=!1;Cb=null;tb=0;uc=!1;wd=xb=0;sc=1;Ed=0;Jc=5126;bc=Wb=fd=ed=0;F(lb)?(wb=!0,Cb=aa.createStream(34962,lb),Jc=Cb.dtype):(Cb=aa.getBuffer(lb))?Jc=Cb.dtype:"constant"in lb?(sc=2,"number"===typeof lb.constant?(fd=lb.constant,Wb=bc=ed=0):(fd=0<lb.constant.length?lb.constant[0]:0,Wb=1<lb.constant.length?lb.constant[1]:0,bc=2<lb.constant.length?lb.constant[2]:0,ed=3<lb.constant.length?lb.constant[3]:0)):(Cb=F(lb.buffer)?aa.createStream(34962,lb.buffer):aa.getBuffer(lb.buffer),Jc="type"in lb?Gd[lb.type]:
Cb.dtype,uc=!!lb.normalized,wd=lb.size|0,xb=lb.offset|0,Ed=lb.stride|0,tb=lb.divisor|0);Qb=ab.location;Ja=zc[Qb];if(1===sc){Ja.buffer||L.enableVertexAttribArray(Qb);$b=wd||1;if(Ja.type!==Jc||Ja.size!==$b||Ja.buffer!==Cb||Ja.normalized!==uc||Ja.offset!==xb||Ja.stride!==Ed)L.bindBuffer(34962,Cb.buffer),L.vertexAttribPointer(Qb,$b,Jc,uc,Ed,xb),Ja.type=Jc,Ja.size=$b,Ja.buffer=Cb,Ja.normalized=uc,Ja.offset=xb,Ja.stride=Ed;Ja.divisor!==tb&&(J.vertexAttribDivisorANGLE(Qb,tb),Ja.divisor=tb)}else if(Ja.buffer&&
(L.disableVertexAttribArray(Qb),Ja.buffer=null),Ja.x!==fd||Ja.y!==Wb||Ja.z!==bc||Ja.w!==ed)L.vertexAttrib4f(Qb,fd,Wb,bc,ed),Ja.x=fd,Ja.y=Wb,Ja.z=bc,Ja.w=ed;mb=q.call(this,P,a,0);yb=!1;Ob=null;Rb=0;fc=!1;Ze=hc=0;xc=1;yc=0;Ac=5126;Lc=Rc=ad=Kc=0;F(mb)?(yb=!0,Ob=aa.createStream(34962,mb),Ac=Ob.dtype):(Ob=aa.getBuffer(mb))?Ac=Ob.dtype:"constant"in mb?(xc=2,"number"===typeof mb.constant?(ad=mb.constant,Rc=Lc=Kc=0):(ad=0<mb.constant.length?mb.constant[0]:0,Rc=1<mb.constant.length?mb.constant[1]:0,Lc=2<mb.constant.length?
mb.constant[2]:0,Kc=3<mb.constant.length?mb.constant[3]:0)):(Ob=F(mb.buffer)?aa.createStream(34962,mb.buffer):aa.getBuffer(mb.buffer),Ac="type"in mb?Gd[mb.type]:Ob.dtype,fc=!!mb.normalized,Ze=mb.size|0,hc=mb.offset|0,yc=mb.stride|0,Rb=mb.divisor|0);Lb=S.location;Eb=zc[Lb];if(1===xc){Eb.buffer||L.enableVertexAttribArray(Lb);Mc=Ze||4;if(Eb.type!==Ac||Eb.size!==Mc||Eb.buffer!==Ob||Eb.normalized!==fc||Eb.offset!==hc||Eb.stride!==yc)L.bindBuffer(34962,Ob.buffer),L.vertexAttribPointer(Lb,Mc,Ac,fc,yc,hc),
Eb.type=Ac,Eb.size=Mc,Eb.buffer=Ob,Eb.normalized=fc,Eb.offset=hc,Eb.stride=yc;Eb.divisor!==Rb&&(J.vertexAttribDivisorANGLE(Lb,Rb),Eb.divisor=Rb)}else if(Eb.buffer&&(L.disableVertexAttribArray(Lb),Eb.buffer=null),Eb.x!==ad||Eb.y!==Rc||Eb.z!==Lc||Eb.w!==Kc)L.vertexAttrib4f(Lb,ad,Rc,Lc,Kc),Eb.x=ad,Eb.y=Rc,Eb.z=Lc,Eb.w=Kc;Ec=B.call(this,P,a,0);Sc=!1;gc=null;Wc=0;gd=!1;md=kd=0;Xc=1;bf=0;Zd=5126;Md=me=se=ke=0;F(Ec)?(Sc=!0,gc=aa.createStream(34962,Ec),Zd=gc.dtype):(gc=aa.getBuffer(Ec))?Zd=gc.dtype:"constant"in
Ec?(Xc=2,"number"===typeof Ec.constant?(se=Ec.constant,me=Md=ke=0):(se=0<Ec.constant.length?Ec.constant[0]:0,me=1<Ec.constant.length?Ec.constant[1]:0,Md=2<Ec.constant.length?Ec.constant[2]:0,ke=3<Ec.constant.length?Ec.constant[3]:0)):(gc=F(Ec.buffer)?aa.createStream(34962,Ec.buffer):aa.getBuffer(Ec.buffer),Zd="type"in Ec?Gd[Ec.type]:gc.dtype,gd=!!Ec.normalized,md=Ec.size|0,kd=Ec.offset|0,bf=Ec.stride|0,Wc=Ec.divisor|0);Kd=Hb.location;id=zc[Kd];if(1===Xc){id.buffer||L.enableVertexAttribArray(Kd);Bc=
md||4;if(id.type!==Zd||id.size!==Bc||id.buffer!==gc||id.normalized!==gd||id.offset!==kd||id.stride!==bf)L.bindBuffer(34962,gc.buffer),L.vertexAttribPointer(Kd,Bc,Zd,gd,bf,kd),id.type=Zd,id.size=Bc,id.buffer=gc,id.normalized=gd,id.offset=kd,id.stride=bf;id.divisor!==Wc&&(J.vertexAttribDivisorANGLE(Kd,Wc),id.divisor=Wc)}else if(id.buffer&&(L.disableVertexAttribArray(Kd),id.buffer=null),id.x!==se||id.y!==me||id.z!==Md||id.w!==ke)L.vertexAttrib4f(Kd,se,me,Md,ke),id.x=se,id.y=me,id.z=Md,id.w=ke;od=y.call(this,
P,a,0);ld=!1;cd=null;pd=0;Fd=!1;te=Hd=0;ze=1;Ae=0;ne=5126;be=pe=de=fe=0;F(od)?(ld=!0,cd=aa.createStream(34962,od),ne=cd.dtype):(cd=aa.getBuffer(od))?ne=cd.dtype:"constant"in od?(ze=2,"number"===typeof od.constant?(de=od.constant,pe=be=fe=0):(de=0<od.constant.length?od.constant[0]:0,pe=1<od.constant.length?od.constant[1]:0,be=2<od.constant.length?od.constant[2]:0,fe=3<od.constant.length?od.constant[3]:0)):(cd=F(od.buffer)?aa.createStream(34962,od.buffer):aa.getBuffer(od.buffer),ne="type"in od?Gd[od.type]:
cd.dtype,Fd=!!od.normalized,te=od.size|0,Hd=od.offset|0,Ae=od.stride|0,pd=od.divisor|0);ie=na.location;wc=zc[ie];if(1===ze){wc.buffer||L.enableVertexAttribArray(ie);Uc=te||1;if(wc.type!==ne||wc.size!==Uc||wc.buffer!==cd||wc.normalized!==Fd||wc.offset!==Hd||wc.stride!==Ae)L.bindBuffer(34962,cd.buffer),L.vertexAttribPointer(ie,Uc,ne,Fd,Ae,Hd),wc.type=ne,wc.size=Uc,wc.buffer=cd,wc.normalized=Fd,wc.offset=Hd,wc.stride=Ae;wc.divisor!==pd&&(J.vertexAttribDivisorANGLE(ie,pd),wc.divisor=pd)}else if(wc.buffer&&
(L.disableVertexAttribArray(ie),wc.buffer=null),wc.x!==de||wc.y!==pe||wc.z!==be||wc.w!==fe)L.vertexAttrib4f(ie,de,pe,be,fe),wc.x=de,wc.y=pe,wc.z=be,wc.w=fe;L.uniform1i(C.location,!1);L.uniform1f(nb.location,P.pixelRatio);qe=e.call(this,P,a,0);L.uniform2f(Da.location,qe[0],qe[1]);le=a.scale;L.uniform2f(La.location,le[0],le[1]);Ld=a.scaleFract;L.uniform2f(X.location,Ld[0],Ld[1]);Pd=a.translate;L.uniform2f(ga.location,Pd[0],Pd[1]);Qd=a.translateFract;L.uniform2f(ra.location,Qd[0],Qd[1]);L.uniform1f(da.location,
a.opacity);L.uniform1i(Ga.location,g.bind());Rd=a.elements;je=null;(je=(vf=F(Rd))?ub.createStream(Rd):ub.getElements(Rd))&&L.bindBuffer(34963,je.buffer.buffer);Ce=a.offset;if(oe=a.count)Re=Ha.instances,0<Re?je?J.drawElementsInstancedANGLE(0,oe,je.type,Ce<<(je.type-5121>>1),Re):J.drawArraysInstancedANGLE(0,Ce,oe,Re):0>Re&&(je?L.drawElements(0,oe,je.type,Ce<<(je.type-5121>>1)):L.drawArrays(0,Ce,oe)),ha.dirty=!0,fa.setVAO(null),P.viewportWidth=v,P.viewportHeight=U,O&&(c.cpuTime+=performance.now()-sa),
Q&&aa.destroyStream(R),Oa&&aa.destroyStream(Ya),vb&&aa.destroyStream(hb),Ba&&aa.destroyStream(eb),ec&&aa.destroyStream(Fa),wb&&aa.destroyStream(Cb),yb&&aa.destroyStream(Ob),Sc&&aa.destroyStream(gc),ld&&aa.destroyStream(cd),g.unbind(),vf&&ub.destroyStream(je)},scope:function(b,e,a){var g,f,k,q,d,m,l,h,y,B,D,A,E,C,G,N,L,M,Q,R,S,T,ca,W,X,fa,da,ea,ga,na,ka,qa,ma,pa,Aa,ra,Ka,Ga,La,Da,Oa,Sa,zb,Fb,ab,w,Gb,Pa,pb,vb,hb,Qa,zc,ob,Db,db,td,Hb,nc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,nb,Kb,Mb,Ub,wa,cc,Ma,Pb,
fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,qc,tc,Wa,Nb,ic,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,ee,sc,Vc,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Pc,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd,kd,md,Xc,Cd,Od,we,he,ge,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,ue,ve,Ae,ne,fe,de,pe,be,ie,wc,Uc,qe,le,Ld,Pd,Qd,Rd,je,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,
eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;g=b.viewport;f=g.x|0;k=g.y|0;q="width"in g?g.width|0:P.framebufferWidth-f;d="height"in g?g.height|0:P.framebufferHeight-k;m=P.viewportWidth;P.viewportWidth=q;l=P.viewportHeight;P.viewportHeight=d;h=yd[0];yd[0]=f;y=yd[1];yd[1]=k;B=yd[2];yd[2]=q;D=yd[3];yd[3]=d;A=ta[0];ta[0]=0;E=ta[1];ta[1]=0;C=ta[2];ta[2]=0;G=ta[3];ta[3]=1;N=ia.blend_enable;ia.blend_enable=
!0;L=za[0];za[0]=770;M=za[1];za[1]=771;Q=za[2];za[2]=773;R=za[3];za[3]=1;S=ia.depth_enable;ia.depth_enable=!1;T=b.viewport;ca=T.x|0;W=T.y|0;X="width"in T?T.width|0:P.framebufferWidth-ca;fa="height"in T?T.height|0:P.framebufferHeight-W;da=xd[0];xd[0]=ca;ea=xd[1];xd[1]=W;ga=xd[2];xd[2]=X;na=xd[3];xd[3]=fa;ka=ia.scissor_enable;ia.scissor_enable=!0;qa=ia.stencil_enable;ia.stencil_enable=!1;if(ma=ha.profile)pa=performance.now(),c.count++;Aa=b.elements;ra=null;ra=(Ka=F(Aa))?ub.createStream(Aa):ub.getElements(Aa);
Ga=Ha.elements;Ha.elements=ra;La=b.offset;Da=Ha.offset;Ha.offset=La;Oa=b.count;Sa=Ha.count;Ha.count=Oa;zb=Ha.primitive;Ha.primitive=0;Fb=Y[45];Y[45]=!1;ab=b.markerTexture;w=Y[48];Y[48]=ab;Gb=b.opacity;Pa=Y[10];Y[10]=Gb;pb=n.call(this,P,b,a);vb=Y[46];Y[46]=pb;hb=Y[47];Y[47]=p;Qa=P.pixelRatio;zc=Y[34];Y[34]=Qa;ob=b.scale;Db=Y[6];Y[6]=ob;db=b.scaleFract;td=Y[7];Y[7]=db;Hb=b.translate;nc=Y[8];Y[8]=Hb;jb=b.translateFract;kb=Y[9];Y[9]=jb;va=r.call(this,P,b,a);qb=!1;ya=null;Va=0;bb=!1;eb=Ba=0;Na=1;Bb=0;
Ab=5126;Mb=Kb=nb=Ta=0;F(va)?(qb=!0,ya=aa.createStream(34962,va),Ab=ya.dtype):(ya=aa.getBuffer(va))?Ab=ya.dtype:"constant"in va?(Na=2,"number"===typeof va.constant?(nb=va.constant,Kb=Mb=Ta=0):(nb=0<va.constant.length?va.constant[0]:0,Kb=1<va.constant.length?va.constant[1]:0,Mb=2<va.constant.length?va.constant[2]:0,Ta=3<va.constant.length?va.constant[3]:0)):(ya=F(va.buffer)?aa.createStream(34962,va.buffer):aa.getBuffer(va.buffer),Ab="type"in va?Gd[va.type]:ya.dtype,bb=!!va.normalized,eb=va.size|0,Ba=
va.offset|0,Bb=va.stride|0,Va=va.divisor|0);Ub=u.buffer;u.buffer=ya;wa=u.divisor;u.divisor=Va;cc=u.normalized;u.normalized=bb;Ma=u.offset;u.offset=Ba;Pb=u.size;u.size=eb;fb=u.state;u.state=Na;ib=u.stride;u.stride=Bb;xa=u.type;u.type=Ab;ec=u.w;u.w=Ta;Fa=u.x;u.x=nb;rb=u.y;u.y=Kb;sb=u.z;u.z=Mb;Za=K.call(this,P,b,a);$a=!1;kc=null;qc=0;tc=!1;Nb=Wa=0;ic=1;Ia=0;vc=5126;wb=lb=Ca=Ra=0;F(Za)?($a=!0,kc=aa.createStream(34962,Za),vc=kc.dtype):(kc=aa.getBuffer(Za))?vc=kc.dtype:"constant"in Za?(ic=2,"number"===
typeof Za.constant?(Ca=Za.constant,lb=wb=Ra=0):(Ca=0<Za.constant.length?Za.constant[0]:0,lb=1<Za.constant.length?Za.constant[1]:0,wb=2<Za.constant.length?Za.constant[2]:0,Ra=3<Za.constant.length?Za.constant[3]:0)):(kc=F(Za.buffer)?aa.createStream(34962,Za.buffer):aa.getBuffer(Za.buffer),vc="type"in Za?Gd[Za.type]:kc.dtype,tc=!!Za.normalized,Nb=Za.size|0,Wa=Za.offset|0,Ia=Za.stride|0,qc=Za.divisor|0);Cb=x.buffer;x.buffer=kc;tb=x.divisor;x.divisor=qc;uc=x.normalized;x.normalized=tc;xb=x.offset;x.offset=
Wa;ee=x.size;x.size=Nb;sc=x.state;x.state=ic;Vc=x.stride;x.stride=Ia;Jc=x.type;x.type=vc;ed=x.w;x.w=Ra;fd=x.x;x.x=Ca;Wb=x.y;x.y=lb;bc=x.z;x.z=wb;Qb=U.call(this,P,b,a);Ja=!1;$b=null;mb=0;yb=!1;Rb=Ob=0;fc=1;hc=0;Pc=5126;Kc=Ac=yc=xc=0;F(Qb)?(Ja=!0,$b=aa.createStream(34962,Qb),Pc=$b.dtype):($b=aa.getBuffer(Qb))?Pc=$b.dtype:"constant"in Qb?(fc=2,"number"===typeof Qb.constant?(yc=Qb.constant,Ac=Kc=xc=0):(yc=0<Qb.constant.length?Qb.constant[0]:0,Ac=1<Qb.constant.length?Qb.constant[1]:0,Kc=2<Qb.constant.length?
Qb.constant[2]:0,xc=3<Qb.constant.length?Qb.constant[3]:0)):($b=F(Qb.buffer)?aa.createStream(34962,Qb.buffer):aa.getBuffer(Qb.buffer),Pc="type"in Qb?Gd[Qb.type]:$b.dtype,yb=!!Qb.normalized,Rb=Qb.size|0,Ob=Qb.offset|0,hc=Qb.stride|0,mb=Qb.divisor|0);ad=v.buffer;v.buffer=$b;Rc=v.divisor;v.divisor=mb;Lc=v.normalized;v.normalized=yb;Lb=v.offset;v.offset=Ob;Eb=v.size;v.size=Rb;Mc=v.state;v.state=fc;Ec=v.stride;v.stride=hc;Sc=v.type;v.type=Pc;gc=v.w;v.w=xc;Wc=v.x;v.x=yc;gd=v.y;v.y=Ac;kd=v.z;v.z=Kc;md=t.call(this,
P,b,a);Xc=!1;Cd=null;Od=0;we=!1;ge=he=0;Md=1;Kd=0;id=5126;cd=ld=od=Bc=0;F(md)?(Xc=!0,Cd=aa.createStream(34962,md),id=Cd.dtype):(Cd=aa.getBuffer(md))?id=Cd.dtype:"constant"in md?(Md=2,"number"===typeof md.constant?(od=md.constant,ld=cd=Bc=0):(od=0<md.constant.length?md.constant[0]:0,ld=1<md.constant.length?md.constant[1]:0,cd=2<md.constant.length?md.constant[2]:0,Bc=3<md.constant.length?md.constant[3]:0)):(Cd=F(md.buffer)?aa.createStream(34962,md.buffer):aa.getBuffer(md.buffer),id="type"in md?Gd[md.type]:
Cd.dtype,we=!!md.normalized,ge=md.size|0,he=md.offset|0,Kd=md.stride|0,Od=md.divisor|0);pd=la.buffer;la.buffer=Cd;Fd=la.divisor;la.divisor=Od;Hd=la.normalized;la.normalized=we;ue=la.offset;la.offset=he;ve=la.size;la.size=ge;Ae=la.state;la.state=Md;ne=la.stride;la.stride=Kd;fe=la.type;la.type=id;de=la.w;la.w=Bc;pe=la.x;la.x=od;be=la.y;la.y=ld;ie=la.z;la.z=cd;wc=sa.call(this,P,b,a);Uc=!1;qe=null;le=0;Ld=!1;Qd=Pd=0;Rd=1;je=0;Ye=5126;Se=Re=oe=Ce=0;F(wc)?(Uc=!0,qe=aa.createStream(34962,wc),Ye=qe.dtype):
(qe=aa.getBuffer(wc))?Ye=qe.dtype:"constant"in wc?(Rd=2,"number"===typeof wc.constant?(oe=wc.constant,Re=Se=Ce=0):(oe=0<wc.constant.length?wc.constant[0]:0,Re=1<wc.constant.length?wc.constant[1]:0,Se=2<wc.constant.length?wc.constant[2]:0,Ce=3<wc.constant.length?wc.constant[3]:0)):(qe=F(wc.buffer)?aa.createStream(34962,wc.buffer):aa.getBuffer(wc.buffer),Ye="type"in wc?Gd[wc.type]:qe.dtype,Ld=!!wc.normalized,Qd=wc.size|0,Pd=wc.offset|0,je=wc.stride|0,le=wc.divisor|0);Ne=O.buffer;O.buffer=qe;re=O.divisor;
O.divisor=le;Fe=O.normalized;O.normalized=Ld;He=O.offset;O.offset=Pd;Ie=O.size;O.size=Qd;Je=O.state;O.state=Rd;Ge=O.stride;O.stride=je;Nd=O.type;O.type=Ye;Ud=O.w;O.w=Ce;$d=O.x;O.x=oe;ce=O.y;O.y=Re;Ke=O.z;O.z=Se;Bd=oa.call(this,P,b,a);Sd=!1;De=null;Le=0;cf=!1;Te=af=0;Oe=1;$e=0;Xe=5126;Xd=Td=Ve=Ue=0;F(Bd)?(Sd=!0,De=aa.createStream(34962,Bd),Xe=De.dtype):(De=aa.getBuffer(Bd))?Xe=De.dtype:"constant"in Bd?(Oe=2,"number"===typeof Bd.constant?(Ve=Bd.constant,Td=Xd=Ue=0):(Ve=0<Bd.constant.length?Bd.constant[0]:
0,Td=1<Bd.constant.length?Bd.constant[1]:0,Xd=2<Bd.constant.length?Bd.constant[2]:0,Ue=3<Bd.constant.length?Bd.constant[3]:0)):(De=F(Bd.buffer)?aa.createStream(34962,Bd.buffer):aa.getBuffer(Bd.buffer),Xe="type"in Bd?Gd[Bd.type]:De.dtype,cf=!!Bd.normalized,Te=Bd.size|0,af=Bd.offset|0,$e=Bd.stride|0,Le=Bd.divisor|0);We=z.buffer;z.buffer=De;jf=z.divisor;z.divisor=Le;nf=z.normalized;z.normalized=cf;ff=z.offset;z.offset=af;kf=z.size;z.size=Te;lf=z.state;z.state=Oe;mf=z.stride;z.stride=$e;rf=z.type;z.type=
Xe;of=z.w;z.w=Ue;sf=z.x;z.x=Ve;Cf=z.y;z.y=Td;Df=z.z;z.z=Xd;Pe=ba.call(this,P,b,a);Ee=!1;pf=null;qf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;F(Pe)?(Ee=!0,pf=aa.createStream(34962,Pe),xf=pf.dtype):(pf=aa.getBuffer(Pe))?xf=pf.dtype:"constant"in Pe?(Ff=2,"number"===typeof Pe.constant?(wf=Pe.constant,zf=Af=yf=0):(wf=0<Pe.constant.length?Pe.constant[0]:0,zf=1<Pe.constant.length?Pe.constant[1]:0,Af=2<Pe.constant.length?Pe.constant[2]:0,yf=3<Pe.constant.length?Pe.constant[3]:0)):(pf=F(Pe.buffer)?aa.createStream(34962,
Pe.buffer):aa.getBuffer(Pe.buffer),xf="type"in Pe?Gd[Pe.type]:pf.dtype,Ef=!!Pe.normalized,Bf=Pe.size|0,Hf=Pe.offset|0,Gf=Pe.stride|0,qf=Pe.divisor|0);Jf=I.buffer;I.buffer=pf;Kf=I.divisor;I.divisor=qf;Lf=I.normalized;I.normalized=Ef;Mf=I.offset;I.offset=Hf;tf=I.size;I.size=Bf;Rf=I.state;I.state=Ff;If=I.stride;I.stride=Gf;uf=I.type;I.type=xf;dg=I.w;I.w=yf;Sf=I.x;I.x=wf;Tf=I.y;I.y=zf;qg=I.z;I.z=Af;gf=V.call(this,P,b,a);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;F(gf)?(df=!0,Nf=
aa.createStream(34962,gf),Wf=Nf.dtype):(Nf=aa.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=F(gf.buffer)?aa.createStream(34962,gf.buffer):aa.getBuffer(gf.buffer),Wf="type"in gf?Gd[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|0,ig=gf.stride|0,Of=gf.divisor|
0);jg=J.buffer;J.buffer=Nf;rg=J.divisor;J.divisor=Of;sg=J.normalized;J.normalized=eg;tg=J.offset;J.offset=fg;ug=J.size;J.size=gg;vg=J.state;J.state=hg;wg=J.stride;J.stride=ig;xg=J.type;J.type=Wf;yg=J.w;J.w=Uf;zg=J.x;J.x=Xf;Ag=J.y;J.y=Yf;Bg=J.z;J.z=Zf;hf=ja.call(this,P,b,a);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;F(hf)?(ef=!0,Pf=aa.createStream(34962,hf),$f=Pf.dtype):(Pf=aa.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?(ag=hf.constant,bg=cg=
Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=F(hf.buffer)?aa.createStream(34962,hf.buffer):aa.getBuffer(hf.buffer),$f="type"in hf?Gd[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=Z.buffer;Z.buffer=Pf;Cg=Z.divisor;Z.divisor=Qf;Dg=Z.normalized;Z.normalized=kg;Eg=Z.offset;Z.offset=lg;Fg=Z.size;Z.size=mg;Gg=Z.state;Z.state=
ng;Hg=Z.stride;Z.stride=og;Ig=Z.type;Z.type=$f;Jg=Z.w;Z.w=Vf;Kg=Z.x;Z.x=ag;Lg=Z.y;Z.y=bg;Mg=Z.z;Z.z=cg;Ng=ua.vert;ua.vert=59;Og=ua.frag;ua.frag=58;ha.dirty=!0;e(P,b,a);P.viewportWidth=m;P.viewportHeight=l;yd[0]=h;yd[1]=y;yd[2]=B;yd[3]=D;ta[0]=A;ta[1]=E;ta[2]=C;ta[3]=G;ia.blend_enable=N;za[0]=L;za[1]=M;za[2]=Q;za[3]=R;ia.depth_enable=S;xd[0]=da;xd[1]=ea;xd[2]=ga;xd[3]=na;ia.scissor_enable=ka;ia.stencil_enable=qa;ma&&(c.cpuTime+=performance.now()-pa);Ka&&ub.destroyStream(ra);Ha.elements=Ga;Ha.offset=
Da;Ha.count=Sa;Ha.primitive=zb;Y[45]=Fb;Y[48]=w;Y[10]=Pa;Y[46]=vb;Y[47]=hb;Y[34]=zc;Y[6]=Db;Y[7]=td;Y[8]=nc;Y[9]=kb;qb&&aa.destroyStream(ya);u.buffer=Ub;u.divisor=wa;u.normalized=cc;u.offset=Ma;u.size=Pb;u.state=fb;u.stride=ib;u.type=xa;u.w=ec;u.x=Fa;u.y=rb;u.z=sb;$a&&aa.destroyStream(kc);x.buffer=Cb;x.divisor=tb;x.normalized=uc;x.offset=xb;x.size=ee;x.state=sc;x.stride=Vc;x.type=Jc;x.w=ed;x.x=fd;x.y=Wb;x.z=bc;Ja&&aa.destroyStream($b);v.buffer=ad;v.divisor=Rc;v.normalized=Lc;v.offset=Lb;v.size=Eb;
v.state=Mc;v.stride=Ec;v.type=Sc;v.w=gc;v.x=Wc;v.y=gd;v.z=kd;Xc&&aa.destroyStream(Cd);la.buffer=pd;la.divisor=Fd;la.normalized=Hd;la.offset=ue;la.size=ve;la.state=Ae;la.stride=ne;la.type=fe;la.w=de;la.x=pe;la.y=be;la.z=ie;Uc&&aa.destroyStream(qe);O.buffer=Ne;O.divisor=re;O.normalized=Fe;O.offset=He;O.size=Ie;O.state=Je;O.stride=Ge;O.type=Nd;O.w=Ud;O.x=$d;O.y=ce;O.z=Ke;Sd&&aa.destroyStream(De);z.buffer=We;z.divisor=jf;z.normalized=nf;z.offset=ff;z.size=kf;z.state=lf;z.stride=mf;z.type=rf;z.w=of;z.x=
sf;z.y=Cf;z.z=Df;Ee&&aa.destroyStream(pf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=tf;I.state=Rf;I.stride=If;I.type=uf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;df&&aa.destroyStream(Nf);J.buffer=jg;J.divisor=rg;J.normalized=sg;J.offset=tg;J.size=ug;J.state=vg;J.stride=wg;J.type=xg;J.w=yg;J.x=zg;J.y=Ag;J.z=Bg;ef&&aa.destroyStream(Pf);Z.buffer=pg;Z.divisor=Cg;Z.normalized=Dg;Z.offset=Eg;Z.size=Fg;Z.state=Gg;Z.stride=Hg;Z.type=Ig;Z.w=Jg;Z.x=Kg;Z.y=Lg;Z.z=Mg;ua.vert=Ng;ua.frag=Og;ha.dirty=!0}}},
"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,c,d,h,m,l,f,k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,t,la,sa,O,oa,z,ba,I,V,J,ja,Z,ka,ma,Sa,Db,ea,Oa){var W,Q,M,T,pa,R,Hb,ab,S,C,na,da,Da,Ga,nb,La,X,ob,ga,ra,cc,qc,ic,td,zc,aa,P,ha,Ha,ub,Pc,Vc,L,F,ia,ua,Y,fa,ta,N,G;W=a.attributes;Q=a.buffer;M=a.context;T=a.current;pa=a.draw;R=a.elements;Hb=a.extensions;ab=a.framebuffer;S=a.gl;C=a.isBufferArgs;na=a.next;da=a.shader;
Da=a.uniforms;Ga=a.vao;nb=na.blend_color;La=T.blend_color;X=na.blend_equation;ob=T.blend_equation;ga=na.blend_func;ra=T.blend_func;cc=na.colorMask;qc=T.colorMask;ic=na.depth_range;td=T.depth_range;zc=na.polygonOffset_offset;aa=T.polygonOffset_offset;P=na.sample_coverage;ha=T.sample_coverage;Ha=na.scissor_box;ub=T.scissor_box;Pc=na.stencil_func;Vc=T.stencil_func;L=na.stencil_opBack;F=T.stencil_opBack;ia=na.stencil_opFront;ua=T.stencil_opFront;Y=na.viewport;fa=T.viewport;ta={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};N={offset:4,stride:8};G={offset:0,stride:8};return{batch:function(b,e){var a,g,f,n,k,p,r,q,d,m,l,h,y;a=ab.next;a!==ab.cur&&(a?S.bindFramebuffer(36160,a.framebuffer):S.bindFramebuffer(36160,null),ab.cur=a);if(T.dirty){var B,D,A,Y,da,ga,Da,nb,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb,hd,Ib,oc,Xa,Qc,ac,lc,Id,rd,Fc,dc;B=na.dither;B!==T.dither&&(B?S.enable(3024):S.disable(3024),T.dither=B);D=X[0];A=X[1];if(D!==ob[0]||A!==ob[1])S.blendEquationSeparate(D,
A),ob[0]=D,ob[1]=A;Y=na.depth_func;Y!==T.depth_func&&(S.depthFunc(Y),T.depth_func=Y);da=ic[0];ga=ic[1];if(da!==td[0]||ga!==td[1])S.depthRange(da,ga),td[0]=da,td[1]=ga;Da=na.depth_mask;Da!==T.depth_mask&&(S.depthMask(Da),T.depth_mask=Da);nb=cc[0];xe=cc[1];Me=cc[2];Qe=cc[3];if(nb!==qc[0]||xe!==qc[1]||Me!==qc[2]||Qe!==qc[3])S.colorMask(nb,xe,Me,Qe),qc[0]=nb,qc[1]=xe,qc[2]=Me,qc[3]=Qe;Ad=na.cull_enable;Ad!==T.cull_enable&&(Ad?S.enable(2884):S.disable(2884),T.cull_enable=Ad);Be=na.cull_face;Be!==T.cull_face&&
(S.cullFace(Be),T.cull_face=Be);Vd=na.frontFace;Vd!==T.frontFace&&(S.frontFace(Vd),T.frontFace=Vd);Wd=na.lineWidth;Wd!==T.lineWidth&&(S.lineWidth(Wd),T.lineWidth=Wd);ae=na.polygonOffset_enable;ae!==T.polygonOffset_enable&&(ae?S.enable(32823):S.disable(32823),T.polygonOffset_enable=ae);Yd=zc[0];qd=zc[1];if(Yd!==aa[0]||qd!==aa[1])S.polygonOffset(Yd,qd),aa[0]=Yd,aa[1]=qd;nd=na.sample_alpha;nd!==T.sample_alpha&&(nd?S.enable(32926):S.disable(32926),T.sample_alpha=nd);vd=na.sample_enable;vd!==T.sample_enable&&
(vd?S.enable(32928):S.disable(32928),T.sample_enable=vd);bd=P[0];sd=P[1];if(bd!==ha[0]||sd!==ha[1])S.sampleCoverage(bd,sd),ha[0]=bd,ha[1]=sd;Tc=na.stencil_mask;Tc!==T.stencil_mask&&(S.stencilMask(Tc),T.stencil_mask=Tc);Dd=Pc[0];Nc=Pc[1];Ic=Pc[2];if(Dd!==Vc[0]||Nc!==Vc[1]||Ic!==Vc[2])S.stencilFunc(Dd,Nc,Ic),Vc[0]=Dd,Vc[1]=Nc,Vc[2]=Ic;rc=ia[0];gb=ia[1];hd=ia[2];Ib=ia[3];if(rc!==ua[0]||gb!==ua[1]||hd!==ua[2]||Ib!==ua[3])S.stencilOpSeparate(rc,gb,hd,Ib),ua[0]=rc,ua[1]=gb,ua[2]=hd,ua[3]=Ib;oc=L[0];Xa=
L[1];Qc=L[2];ac=L[3];if(oc!==F[0]||Xa!==F[1]||Qc!==F[2]||ac!==F[3])S.stencilOpSeparate(oc,Xa,Qc,ac),F[0]=oc,F[1]=Xa,F[2]=Qc,F[3]=ac;lc=na.scissor_enable;lc!==T.scissor_enable&&(lc?S.enable(3089):S.disable(3089),T.scissor_enable=lc);Id=Ha[0];rd=Ha[1];Fc=Ha[2];dc=Ha[3];if(Id!==ub[0]||rd!==ub[1]||Fc!==ub[2]||dc!==ub[3])S.scissor(Id,rd,Fc,dc),ub[0]=Id,ub[1]=rd,ub[2]=Fc,ub[3]=dc}g=this.viewport;f=g.x|0;n=g.y|0;k="width"in g?g.width|0:M.framebufferWidth-f;p="height"in g?g.height|0:M.framebufferHeight-n;
r=M.viewportWidth;M.viewportWidth=k;q=M.viewportHeight;M.viewportHeight=p;S.viewport(f,n,k,p);fa[0]=f;fa[1]=n;fa[2]=k;fa[3]=p;S.blendColor(0,0,0,1);La[0]=0;La[1]=0;La[2]=0;La[3]=1;S.enable(3042);T.blend_enable=!0;S.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;S.disable(2929);T.depth_enable=!1;S.disable(2960);T.stencil_enable=!1;if(d=T.profile)m=performance.now(),c.count+=e;S.useProgram(u.program);l=Hb.angle_instanced_arrays;var Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ye,jc,
Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb;Ga.setVAO(null);G.buffer=this.sizeBuffer;Cc=!1;Yc=null;Zb=0;Gc=!1;Ea=Ya=0;ud=1;Jb=0;Ua=5126;Xb=Dc=cb=Vb=0;C(G)?(Cc=!0,Yc=Q.createStream(34962,G),Ua=Yc.dtype):(Yc=Q.getBuffer(G))?Ua=Yc.dtype:"constant"in G?(ud=2,"number"===typeof G.constant?(cb=G.constant,Dc=Xb=Vb=0):(cb=0<G.constant.length?G.constant[0]:0,Dc=1<G.constant.length?G.constant[1]:
0,Xb=2<G.constant.length?G.constant[2]:0,Vb=3<G.constant.length?G.constant[3]:0)):(Yc=C(G.buffer)?Q.createStream(34962,G.buffer):Q.getBuffer(G.buffer),Ua="type"in G?ta[G.type]:Yc.dtype,Gc=!!G.normalized,Ea=G.size|0,Ya=G.offset|0,Jb=G.stride|0,Zb=G.divisor|0);ye=Oa.location;jc=W[ye];if(1===ud){jc.buffer||S.enableVertexAttribArray(ye);Sb=Ea||1;if(jc.type!==Ua||jc.size!==Sb||jc.buffer!==Yc||jc.normalized!==Gc||jc.offset!==Ya||jc.stride!==Jb)S.bindBuffer(34962,Yc.buffer),S.vertexAttribPointer(ye,Sb,Ua,
Gc,Jb,Ya),jc.type=Ua,jc.size=Sb,jc.buffer=Yc,jc.normalized=Gc,jc.offset=Ya,jc.stride=Jb;jc.divisor!==Zb&&(l.vertexAttribDivisorANGLE(ye,Zb),jc.divisor=Zb)}else if(jc.buffer&&(S.disableVertexAttribArray(ye),jc.buffer=null),jc.x!==cb||jc.y!==Dc||jc.z!==Xb||jc.w!==Vb)S.vertexAttrib4f(ye,cb,Dc,Xb,Vb),jc.x=cb,jc.y=Dc,jc.z=Xb,jc.w=Vb;N.buffer=this.sizeBuffer;w=!1;Tb=null;Pa=0;pb=!1;hb=vb=0;Qa=1;Oc=0;Yb=5126;Zc=pc=db=jd=0;C(N)?(w=!0,Tb=Q.createStream(34962,N),Yb=Tb.dtype):(Tb=Q.getBuffer(N))?Yb=Tb.dtype:
"constant"in N?(Qa=2,"number"===typeof N.constant?(db=N.constant,pc=Zc=jd=0):(db=0<N.constant.length?N.constant[0]:0,pc=1<N.constant.length?N.constant[1]:0,Zc=2<N.constant.length?N.constant[2]:0,jd=3<N.constant.length?N.constant[3]:0)):(Tb=C(N.buffer)?Q.createStream(34962,N.buffer):Q.getBuffer(N.buffer),Yb="type"in N?ta[N.type]:Tb.dtype,pb=!!N.normalized,hb=N.size|0,vb=N.offset|0,Oc=N.stride|0,Pa=N.divisor|0);mc=I.location;jb=W[mc];if(1===Qa){jb.buffer||S.enableVertexAttribArray(mc);kb=hb||1;if(jb.type!==
Yb||jb.size!==kb||jb.buffer!==Tb||jb.normalized!==pb||jb.offset!==vb||jb.stride!==Oc)S.bindBuffer(34962,Tb.buffer),S.vertexAttribPointer(mc,kb,Yb,pb,Oc,vb),jb.type=Yb,jb.size=kb,jb.buffer=Tb,jb.normalized=pb,jb.offset=vb,jb.stride=Oc;jb.divisor!==Pa&&(l.vertexAttribDivisorANGLE(mc,Pa),jb.divisor=Pa)}else if(jb.buffer&&(S.disableVertexAttribArray(mc),jb.buffer=null),jb.x!==db||jb.y!==pc||jb.z!==Zc||jb.w!==jd)S.vertexAttrib4f(mc,db,pc,Zc,jd),jb.x=db,jb.y=pc,jb.z=Zc,jb.w=jd;va=this.charBuffer;qb=!1;
ya=null;Va=0;bb=!1;eb=Ba=0;Na=1;Bb=0;Ab=5126;Mb=Kb=Hc=Ta=0;C(va)?(qb=!0,ya=Q.createStream(34962,va),Ab=ya.dtype):(ya=Q.getBuffer(va))?Ab=ya.dtype:"constant"in va?(Na=2,"number"===typeof va.constant?(Hc=va.constant,Kb=Mb=Ta=0):(Hc=0<va.constant.length?va.constant[0]:0,Kb=1<va.constant.length?va.constant[1]:0,Mb=2<va.constant.length?va.constant[2]:0,Ta=3<va.constant.length?va.constant[3]:0)):(ya=C(va.buffer)?Q.createStream(34962,va.buffer):Q.getBuffer(va.buffer),Ab="type"in va?ta[va.type]:ya.dtype,
bb=!!va.normalized,eb=va.size|0,Ba=va.offset|0,Bb=va.stride|0,Va=va.divisor|0);Ub=ba.location;wa=W[Ub];if(1===Na){wa.buffer||S.enableVertexAttribArray(Ub);Jd=eb||1;if(wa.type!==Ab||wa.size!==Jd||wa.buffer!==ya||wa.normalized!==bb||wa.offset!==Ba||wa.stride!==Bb)S.bindBuffer(34962,ya.buffer),S.vertexAttribPointer(Ub,Jd,Ab,bb,Bb,Ba),wa.type=Ab,wa.size=Jd,wa.buffer=ya,wa.normalized=bb,wa.offset=Ba,wa.stride=Bb;wa.divisor!==Va&&(l.vertexAttribDivisorANGLE(Ub,Va),wa.divisor=Va)}else if(wa.buffer&&(S.disableVertexAttribArray(Ub),
wa.buffer=null),wa.x!==Hc||wa.y!==Kb||wa.z!==Mb||wa.w!==Ta)S.vertexAttrib4f(Ub,Hc,Kb,Mb,Ta),wa.x=Hc,wa.y=Kb,wa.z=Mb,wa.w=Ta;Ma=this.position;Pb=!1;fb=null;ib=0;xa=!1;Fa=ec=0;rb=1;sb=0;Za=5126;tc=dd=kc=$a=0;C(Ma)?(Pb=!0,fb=Q.createStream(34962,Ma),Za=fb.dtype):(fb=Q.getBuffer(Ma))?Za=fb.dtype:"constant"in Ma?(rb=2,"number"===typeof Ma.constant?(kc=Ma.constant,dd=tc=$a=0):(kc=0<Ma.constant.length?Ma.constant[0]:0,dd=1<Ma.constant.length?Ma.constant[1]:0,tc=2<Ma.constant.length?Ma.constant[2]:0,$a=3<
Ma.constant.length?Ma.constant[3]:0)):(fb=C(Ma.buffer)?Q.createStream(34962,Ma.buffer):Q.getBuffer(Ma.buffer),Za="type"in Ma?ta[Ma.type]:fb.dtype,xa=!!Ma.normalized,Fa=Ma.size|0,ec=Ma.offset|0,sb=Ma.stride|0,ib=Ma.divisor|0);Wa=ka.location;Nb=W[Wa];if(1===rb){Nb.buffer||S.enableVertexAttribArray(Wa);$c=Fa||2;if(Nb.type!==Za||Nb.size!==$c||Nb.buffer!==fb||Nb.normalized!==xa||Nb.offset!==ec||Nb.stride!==sb)S.bindBuffer(34962,fb.buffer),S.vertexAttribPointer(Wa,$c,Za,xa,sb,ec),Nb.type=Za,Nb.size=$c,
Nb.buffer=fb,Nb.normalized=xa,Nb.offset=ec,Nb.stride=sb;Nb.divisor!==ib&&(l.vertexAttribDivisorANGLE(Wa,ib),Nb.divisor=ib)}else if(Nb.buffer&&(S.disableVertexAttribArray(Wa),Nb.buffer=null),Nb.x!==kc||Nb.y!==dd||Nb.z!==tc||Nb.w!==$a)S.vertexAttrib4f(Wa,kc,dd,tc,$a),Nb.x=kc,Nb.y=dd,Nb.z=tc,Nb.w=$a;Ia=this.viewportArray;S.uniform4f(ea.location,Ia[0],Ia[1],Ia[2],Ia[3]);vc=this.scale;S.uniform2f(Sa.location,vc[0],vc[1]);Ra=this.translate;S.uniform2f(Db.location,Ra[0],Ra[1]);(Ca=pa.elements)?S.bindBuffer(34963,
Ca.buffer.buffer):Ga.currentVAO&&(Ca=R.getElements(Ga.currentVAO.elements))&&S.bindBuffer(34963,Ca.buffer.buffer);lb=pa.instances;for(h=0;h<e;++h){y=b[h];var wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc,gd;wb=K.call(this,M,y,h);h&&Cb===wb||(Cb=wb,S.uniform1f(V.location,wb));tb=x.call(this,M,y,h);h&&uc===tb||(uc=tb,S.uniform1f(ja.location,tb));xb=y.align;h&&wd===xb||(wd=xb,S.uniform1f(la.location,xb));sc=y.baseline;h&&Ed===sc||(Ed=sc,
S.uniform1f(z.location,sc));Jc=y.color;ed=Jc[0];Wb=Jc[1];Qb=Jc[2];$b=Jc[3];h&&fd===ed&&bc===Wb&&Ja===Qb&&mb===$b||(fd=ed,bc=Wb,Ja=Qb,mb=$b,S.uniform4f(J.location,ed,Wb,Qb,$b));yb=U.call(this,M,y,h);Ob=yb[0];fc=yb[1];h&&Rb===Ob&&hc===fc||(Rb=Ob,hc=fc,S.uniform2f(oa.location,Ob,fc));Ze=v.call(this,M,y,h);xc=Ze[0];Ac=Ze[1];h&&yc===xc&&Kc===Ac||(yc=xc,Kc=Ac,S.uniform2f(O.location,xc,Ac));ad=y.positionOffset;Rc=ad[0];Lb=ad[1];h&&Lc===Rc&&Eb===Lb||(Lc=Rc,Eb=Lb,S.uniform2f(ma.location,Rc,Lb));Mc=y.opacity;
h&&Ec===Mc||(Ec=Mc,S.uniform1f(Z.location,Mc));(Sc=t.call(this,M,y,h))&&"framebuffer"===Sc._reglType&&(Sc=Sc.color[0]);gc=Sc._texture;S.uniform1i(sa.location,gc.bind());Wc=y.offset;if(gd=y.count)0<lb?Ca?l.drawElementsInstancedANGLE(0,gd,Ca.type,Wc<<(Ca.type-5121>>1),lb):l.drawArraysInstancedANGLE(0,Wc,gd,lb):0>lb&&(Ca?S.drawElements(0,gd,Ca.type,Wc<<(Ca.type-5121>>1)):S.drawArrays(0,Wc,gd)),gc.unbind()}Cc&&Q.destroyStream(Yc);w&&Q.destroyStream(Tb);qb&&Q.destroyStream(ya);Pb&&Q.destroyStream(fb);
T.dirty=!0;Ga.setVAO(null);M.viewportWidth=r;M.viewportHeight=q;d&&(c.cpuTime+=performance.now()-m)},draw:function(b){var e,a,g,n,p,r,q,u,y,B,x,K,v,U,t,H,Y,da,ga,Da,nb,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,bd,sd,Tc,Dd,Nc,Ic,rc,gb,hd,Ib,oc,Xa,Qc,ac,lc,Id,rd,Fc,dc,Cc,Yc,Zb,Gc,Ya,Ea,ud,Jb,Ua,Vb,cb,Dc,Xb,ye,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,jd,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb;e=ab.next;e!==ab.cur&&(e?S.bindFramebuffer(36160,e.framebuffer):S.bindFramebuffer(36160,null),ab.cur=e);if(T.dirty){var Na,
Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc;Na=na.dither;Na!==T.dither&&(Na?S.enable(3024):S.disable(3024),T.dither=Na);Bb=X[0];Ab=X[1];if(Bb!==ob[0]||Ab!==ob[1])S.blendEquationSeparate(Bb,Ab),ob[0]=Bb,ob[1]=Ab;Ta=na.depth_func;Ta!==T.depth_func&&(S.depthFunc(Ta),T.depth_func=Ta);Hc=ic[0];Kb=ic[1];if(Hc!==td[0]||Kb!==td[1])S.depthRange(Hc,Kb),td[0]=Hc,td[1]=Kb;Mb=na.depth_mask;Mb!==T.depth_mask&&(S.depthMask(Mb),T.depth_mask=Mb);
Ub=cc[0];wa=cc[1];Jd=cc[2];Ma=cc[3];if(Ub!==qc[0]||wa!==qc[1]||Jd!==qc[2]||Ma!==qc[3])S.colorMask(Ub,wa,Jd,Ma),qc[0]=Ub,qc[1]=wa,qc[2]=Jd,qc[3]=Ma;Pb=na.cull_enable;Pb!==T.cull_enable&&(Pb?S.enable(2884):S.disable(2884),T.cull_enable=Pb);fb=na.cull_face;fb!==T.cull_face&&(S.cullFace(fb),T.cull_face=fb);ib=na.frontFace;ib!==T.frontFace&&(S.frontFace(ib),T.frontFace=ib);xa=na.lineWidth;xa!==T.lineWidth&&(S.lineWidth(xa),T.lineWidth=xa);ec=na.polygonOffset_enable;ec!==T.polygonOffset_enable&&(ec?S.enable(32823):
S.disable(32823),T.polygonOffset_enable=ec);Fa=zc[0];rb=zc[1];if(Fa!==aa[0]||rb!==aa[1])S.polygonOffset(Fa,rb),aa[0]=Fa,aa[1]=rb;sb=na.sample_alpha;sb!==T.sample_alpha&&(sb?S.enable(32926):S.disable(32926),T.sample_alpha=sb);Za=na.sample_enable;Za!==T.sample_enable&&(Za?S.enable(32928):S.disable(32928),T.sample_enable=Za);$a=P[0];kc=P[1];if($a!==ha[0]||kc!==ha[1])S.sampleCoverage($a,kc),ha[0]=$a,ha[1]=kc;dd=na.stencil_mask;dd!==T.stencil_mask&&(S.stencilMask(dd),T.stencil_mask=dd);tc=Pc[0];Wa=Pc[1];
Nb=Pc[2];if(tc!==Vc[0]||Wa!==Vc[1]||Nb!==Vc[2])S.stencilFunc(tc,Wa,Nb),Vc[0]=tc,Vc[1]=Wa,Vc[2]=Nb;$c=ia[0];Ia=ia[1];vc=ia[2];Ra=ia[3];if($c!==ua[0]||Ia!==ua[1]||vc!==ua[2]||Ra!==ua[3])S.stencilOpSeparate($c,Ia,vc,Ra),ua[0]=$c,ua[1]=Ia,ua[2]=vc,ua[3]=Ra;Ca=L[0];lb=L[1];wb=L[2];Cb=L[3];if(Ca!==F[0]||lb!==F[1]||wb!==F[2]||Cb!==F[3])S.stencilOpSeparate(Ca,lb,wb,Cb),F[0]=Ca,F[1]=lb,F[2]=wb,F[3]=Cb;tb=na.scissor_enable;tb!==T.scissor_enable&&(tb?S.enable(3089):S.disable(3089),T.scissor_enable=tb);uc=Ha[0];
xb=Ha[1];wd=Ha[2];sc=Ha[3];if(uc!==ub[0]||xb!==ub[1]||wd!==ub[2]||sc!==ub[3])S.scissor(uc,xb,wd,sc),ub[0]=uc,ub[1]=xb,ub[2]=wd,ub[3]=sc}a=this.viewport;g=a.x|0;n=a.y|0;p="width"in a?a.width|0:M.framebufferWidth-g;r="height"in a?a.height|0:M.framebufferHeight-n;q=M.viewportWidth;M.viewportWidth=p;u=M.viewportHeight;M.viewportHeight=r;S.viewport(g,n,p,r);fa[0]=g;fa[1]=n;fa[2]=p;fa[3]=r;S.blendColor(0,0,0,1);La[0]=0;La[1]=0;La[2]=0;La[3]=1;S.enable(3042);T.blend_enable=!0;S.blendFuncSeparate(770,771,
773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;S.disable(2929);T.depth_enable=!1;S.disable(2960);T.stencil_enable=!1;if(y=T.profile)B=performance.now(),c.count++;S.useProgram(d.program);x=Hb.angle_instanced_arrays;Ga.setVAO(null);G.buffer=this.sizeBuffer;K=!1;v=null;U=0;t=!1;Y=H=0;da=1;ga=0;Da=5126;Me=xe=zd=nb=0;C(G)?(K=!0,v=Q.createStream(34962,G),Da=v.dtype):(v=Q.getBuffer(G))?Da=v.dtype:"constant"in G?(da=2,"number"===typeof G.constant?(zd=G.constant,xe=Me=nb=0):(zd=0<G.constant.length?G.constant[0]:
0,xe=1<G.constant.length?G.constant[1]:0,Me=2<G.constant.length?G.constant[2]:0,nb=3<G.constant.length?G.constant[3]:0)):(v=C(G.buffer)?Q.createStream(34962,G.buffer):Q.getBuffer(G.buffer),Da="type"in G?ta[G.type]:v.dtype,t=!!G.normalized,Y=G.size|0,H=G.offset|0,ga=G.stride|0,U=G.divisor|0);Qe=Oa.location;Ad=W[Qe];if(1===da){Ad.buffer||S.enableVertexAttribArray(Qe);Be=Y||1;if(Ad.type!==Da||Ad.size!==Be||Ad.buffer!==v||Ad.normalized!==t||Ad.offset!==H||Ad.stride!==ga)S.bindBuffer(34962,v.buffer),S.vertexAttribPointer(Qe,
Be,Da,t,ga,H),Ad.type=Da,Ad.size=Be,Ad.buffer=v,Ad.normalized=t,Ad.offset=H,Ad.stride=ga;Ad.divisor!==U&&(x.vertexAttribDivisorANGLE(Qe,U),Ad.divisor=U)}else if(Ad.buffer&&(S.disableVertexAttribArray(Qe),Ad.buffer=null),Ad.x!==zd||Ad.y!==xe||Ad.z!==Me||Ad.w!==nb)S.vertexAttrib4f(Qe,zd,xe,Me,nb),Ad.x=zd,Ad.y=xe,Ad.z=Me,Ad.w=nb;N.buffer=this.sizeBuffer;Vd=!1;Wd=null;ae=0;Yd=!1;nd=qd=0;vd=1;bd=0;sd=5126;Ic=Nc=Dd=Tc=0;C(N)?(Vd=!0,Wd=Q.createStream(34962,N),sd=Wd.dtype):(Wd=Q.getBuffer(N))?sd=Wd.dtype:
"constant"in N?(vd=2,"number"===typeof N.constant?(Dd=N.constant,Nc=Ic=Tc=0):(Dd=0<N.constant.length?N.constant[0]:0,Nc=1<N.constant.length?N.constant[1]:0,Ic=2<N.constant.length?N.constant[2]:0,Tc=3<N.constant.length?N.constant[3]:0)):(Wd=C(N.buffer)?Q.createStream(34962,N.buffer):Q.getBuffer(N.buffer),sd="type"in N?ta[N.type]:Wd.dtype,Yd=!!N.normalized,nd=N.size|0,qd=N.offset|0,bd=N.stride|0,ae=N.divisor|0);rc=I.location;gb=W[rc];if(1===vd){gb.buffer||S.enableVertexAttribArray(rc);hd=nd||1;if(gb.type!==
sd||gb.size!==hd||gb.buffer!==Wd||gb.normalized!==Yd||gb.offset!==qd||gb.stride!==bd)S.bindBuffer(34962,Wd.buffer),S.vertexAttribPointer(rc,hd,sd,Yd,bd,qd),gb.type=sd,gb.size=hd,gb.buffer=Wd,gb.normalized=Yd,gb.offset=qd,gb.stride=bd;gb.divisor!==ae&&(x.vertexAttribDivisorANGLE(rc,ae),gb.divisor=ae)}else if(gb.buffer&&(S.disableVertexAttribArray(rc),gb.buffer=null),gb.x!==Dd||gb.y!==Nc||gb.z!==Ic||gb.w!==Tc)S.vertexAttrib4f(rc,Dd,Nc,Ic,Tc),gb.x=Dd,gb.y=Nc,gb.z=Ic,gb.w=Tc;Ib=this.charBuffer;oc=!1;
Xa=null;Qc=0;ac=!1;Id=lc=0;rd=1;Fc=0;dc=5126;Gc=Zb=Yc=Cc=0;C(Ib)?(oc=!0,Xa=Q.createStream(34962,Ib),dc=Xa.dtype):(Xa=Q.getBuffer(Ib))?dc=Xa.dtype:"constant"in Ib?(rd=2,"number"===typeof Ib.constant?(Yc=Ib.constant,Zb=Gc=Cc=0):(Yc=0<Ib.constant.length?Ib.constant[0]:0,Zb=1<Ib.constant.length?Ib.constant[1]:0,Gc=2<Ib.constant.length?Ib.constant[2]:0,Cc=3<Ib.constant.length?Ib.constant[3]:0)):(Xa=C(Ib.buffer)?Q.createStream(34962,Ib.buffer):Q.getBuffer(Ib.buffer),dc="type"in Ib?ta[Ib.type]:Xa.dtype,
ac=!!Ib.normalized,Id=Ib.size|0,lc=Ib.offset|0,Fc=Ib.stride|0,Qc=Ib.divisor|0);Ya=ba.location;Ea=W[Ya];if(1===rd){Ea.buffer||S.enableVertexAttribArray(Ya);ud=Id||1;if(Ea.type!==dc||Ea.size!==ud||Ea.buffer!==Xa||Ea.normalized!==ac||Ea.offset!==lc||Ea.stride!==Fc)S.bindBuffer(34962,Xa.buffer),S.vertexAttribPointer(Ya,ud,dc,ac,Fc,lc),Ea.type=dc,Ea.size=ud,Ea.buffer=Xa,Ea.normalized=ac,Ea.offset=lc,Ea.stride=Fc;Ea.divisor!==Qc&&(x.vertexAttribDivisorANGLE(Ya,Qc),Ea.divisor=Qc)}else if(Ea.buffer&&(S.disableVertexAttribArray(Ya),
Ea.buffer=null),Ea.x!==Yc||Ea.y!==Zb||Ea.z!==Gc||Ea.w!==Cc)S.vertexAttrib4f(Ya,Yc,Zb,Gc,Cc),Ea.x=Yc,Ea.y=Zb,Ea.z=Gc,Ea.w=Cc;Jb=this.position;Ua=!1;Vb=null;cb=0;Dc=!1;ye=Xb=0;jc=1;Sb=0;w=5126;vb=pb=Pa=Tb=0;C(Jb)?(Ua=!0,Vb=Q.createStream(34962,Jb),w=Vb.dtype):(Vb=Q.getBuffer(Jb))?w=Vb.dtype:"constant"in Jb?(jc=2,"number"===typeof Jb.constant?(Pa=Jb.constant,pb=vb=Tb=0):(Pa=0<Jb.constant.length?Jb.constant[0]:0,pb=1<Jb.constant.length?Jb.constant[1]:0,vb=2<Jb.constant.length?Jb.constant[2]:0,Tb=3<Jb.constant.length?
Jb.constant[3]:0)):(Vb=C(Jb.buffer)?Q.createStream(34962,Jb.buffer):Q.getBuffer(Jb.buffer),w="type"in Jb?ta[Jb.type]:Vb.dtype,Dc=!!Jb.normalized,ye=Jb.size|0,Xb=Jb.offset|0,Sb=Jb.stride|0,cb=Jb.divisor|0);hb=ka.location;Qa=W[hb];if(1===jc){Qa.buffer||S.enableVertexAttribArray(hb);Oc=ye||2;if(Qa.type!==w||Qa.size!==Oc||Qa.buffer!==Vb||Qa.normalized!==Dc||Qa.offset!==Xb||Qa.stride!==Sb)S.bindBuffer(34962,Vb.buffer),S.vertexAttribPointer(hb,Oc,w,Dc,Sb,Xb),Qa.type=w,Qa.size=Oc,Qa.buffer=Vb,Qa.normalized=
Dc,Qa.offset=Xb,Qa.stride=Sb;Qa.divisor!==cb&&(x.vertexAttribDivisorANGLE(hb,cb),Qa.divisor=cb)}else if(Qa.buffer&&(S.disableVertexAttribArray(hb),Qa.buffer=null),Qa.x!==Pa||Qa.y!==pb||Qa.z!==vb||Qa.w!==Tb)S.vertexAttrib4f(hb,Pa,pb,vb,Tb),Qa.x=Pa,Qa.y=pb,Qa.z=vb,Qa.w=Tb;Yb=h.call(this,M,b,0);S.uniform1f(V.location,Yb);jd=m.call(this,M,b,0);S.uniform1f(ja.location,jd);S.uniform1f(la.location,b.align);S.uniform1f(z.location,b.baseline);db=this.viewportArray;S.uniform4f(ea.location,db[0],db[1],db[2],
db[3]);pc=b.color;S.uniform4f(J.location,pc[0],pc[1],pc[2],pc[3]);Zc=l.call(this,M,b,0);S.uniform2f(oa.location,Zc[0],Zc[1]);mc=f.call(this,M,b,0);S.uniform2f(O.location,mc[0],mc[1]);jb=this.scale;S.uniform2f(Sa.location,jb[0],jb[1]);kb=this.translate;S.uniform2f(Db.location,kb[0],kb[1]);va=b.positionOffset;S.uniform2f(ma.location,va[0],va[1]);S.uniform1f(Z.location,b.opacity);(qb=k.call(this,M,b,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);ya=qb._texture;S.uniform1i(sa.location,ya.bind());
(Va=pa.elements)?S.bindBuffer(34963,Va.buffer.buffer):Ga.currentVAO&&(Va=R.getElements(Ga.currentVAO.elements))&&S.bindBuffer(34963,Va.buffer.buffer);bb=b.offset;if(Ba=b.count)eb=pa.instances,0<eb?Va?x.drawElementsInstancedANGLE(0,Ba,Va.type,bb<<(Va.type-5121>>1),eb):x.drawArraysInstancedANGLE(0,bb,Ba,eb):0>eb&&(Va?S.drawElements(0,Ba,Va.type,bb<<(Va.type-5121>>1)):S.drawArrays(0,bb,Ba)),T.dirty=!0,Ga.setVAO(null),M.viewportWidth=q,M.viewportHeight=u,y&&(c.cpuTime+=performance.now()-B),K&&Q.destroyStream(v),
Vd&&Q.destroyStream(Wd),oc&&Q.destroyStream(Xa),Ua&&Q.destroyStream(Vb),ya.unbind()},scope:function(a,f,k){var d,u,m,l,h,x,K,v,D,U,A,t,H,z,F,I,la,O,sa,J,L,P,R,oa,V,S,aa,ba,Z,W,X,fa,ea,ha,ia,ja,ka,ma,ua,ra,Ha,Ga,La,Oa,Sa,ab,zc,ub,ob,Db,td,Hb,cc,Zb,qc,Ya,Ea,ic,Jb,Ua,Vb,cb,Dc,Xb,Pc,jc,Sb,w,Tb,Pa,pb,vb,hb,Qa,Oc,Yb,Vc,db,pc,Zc,mc,jb,kb,va,qb,ya,Va,bb,Ba,eb,Na,Bb,Ab,Ta,Hc,Kb,Mb,Ub,wa,Jd,Ma,Pb,fb,ib,xa,ec,Fa,rb,sb,Za,$a,kc,dd,tc,Wa,Nb,$c,Ia,vc,Ra,Ca,lb,wb,Cb,tb,uc,xb,wd,sc,Ed,Jc,ed,fd,Wb,bc,Qb,Ja,$b,mb,
yb,Ob,Rb,fc,hc,Ze,xc,yc,Ac,Kc,ad,Rc,Lc,Lb,Eb,Mc,Ec,Sc,gc,Wc;d=this.viewport;u=d.x|0;m=d.y|0;l="width"in d?d.width|0:M.framebufferWidth-u;h="height"in d?d.height|0:M.framebufferHeight-m;x=M.viewportWidth;M.viewportWidth=l;K=M.viewportHeight;M.viewportHeight=h;v=Y[0];Y[0]=u;D=Y[1];Y[1]=m;U=Y[2];Y[2]=l;A=Y[3];Y[3]=h;t=nb[0];nb[0]=0;H=nb[1];nb[1]=0;z=nb[2];nb[2]=0;F=nb[3];nb[3]=1;I=na.blend_enable;na.blend_enable=!0;la=ga[0];ga[0]=770;O=ga[1];ga[1]=771;sa=ga[2];ga[2]=773;J=ga[3];ga[3]=1;L=na.depth_enable;
na.depth_enable=!1;P=na.stencil_enable;na.stencil_enable=!1;if(R=T.profile)oa=performance.now(),c.count++;V=a.offset;S=pa.offset;pa.offset=V;aa=a.count;ba=pa.count;pa.count=aa;Z=pa.primitive;pa.primitive=0;W=a.align;X=Da[64];Da[64]=W;fa=b.call(this,M,a,k);ea=Da[69];Da[69]=fa;ha=q.call(this,M,a,k);ia=Da[67];Da[67]=ha;ja=B.call(this,M,a,k);ka=Da[66];Da[66]=ja;ma=a.baseline;ua=Da[65];Da[65]=ma;ra=y.call(this,M,a,k);Ha=Da[62];Da[62]=ra;Ga=a.color;La=Da[14];Da[14]=Ga;Oa=e.call(this,M,a,k);Sa=Da[63];Da[63]=
Oa;ab=a.opacity;zc=Da[10];Da[10]=ab;ub=a.positionOffset;ob=Da[68];Da[68]=ub;Db=this.scale;td=Da[6];Da[6]=Db;Hb=this.translate;cc=Da[8];Da[8]=Hb;Zb=this.viewportArray;qc=Da[3];Da[3]=Zb;Ya=this.charBuffer;Ea=!1;ic=null;Jb=0;Ua=!1;cb=Vb=0;Dc=1;Xb=0;Pc=5126;Tb=w=Sb=jc=0;C(Ya)?(Ea=!0,ic=Q.createStream(34962,Ya),Pc=ic.dtype):(ic=Q.getBuffer(Ya))?Pc=ic.dtype:"constant"in Ya?(Dc=2,"number"===typeof Ya.constant?(Sb=Ya.constant,w=Tb=jc=0):(Sb=0<Ya.constant.length?Ya.constant[0]:0,w=1<Ya.constant.length?Ya.constant[1]:
0,Tb=2<Ya.constant.length?Ya.constant[2]:0,jc=3<Ya.constant.length?Ya.constant[3]:0)):(ic=C(Ya.buffer)?Q.createStream(34962,Ya.buffer):Q.getBuffer(Ya.buffer),Pc="type"in Ya?ta[Ya.type]:ic.dtype,Ua=!!Ya.normalized,cb=Ya.size|0,Vb=Ya.offset|0,Xb=Ya.stride|0,Jb=Ya.divisor|0);Pa=g.buffer;g.buffer=ic;pb=g.divisor;g.divisor=Jb;vb=g.normalized;g.normalized=Ua;hb=g.offset;g.offset=Vb;Qa=g.size;g.size=cb;Oc=g.state;g.state=Dc;Yb=g.stride;g.stride=Xb;Vc=g.type;g.type=Pc;db=g.w;g.w=jc;pc=g.x;g.x=Sb;Zc=g.y;g.y=
w;mc=g.z;g.z=Tb;N.buffer=this.sizeBuffer;jb=!1;kb=null;va=0;qb=!1;Va=ya=0;bb=1;Ba=0;eb=5126;Ta=Ab=Bb=Na=0;C(N)?(jb=!0,kb=Q.createStream(34962,N),eb=kb.dtype):(kb=Q.getBuffer(N))?eb=kb.dtype:"constant"in N?(bb=2,"number"===typeof N.constant?(Bb=N.constant,Ab=Ta=Na=0):(Bb=0<N.constant.length?N.constant[0]:0,Ab=1<N.constant.length?N.constant[1]:0,Ta=2<N.constant.length?N.constant[2]:0,Na=3<N.constant.length?N.constant[3]:0)):(kb=C(N.buffer)?Q.createStream(34962,N.buffer):Q.getBuffer(N.buffer),eb="type"in
N?ta[N.type]:kb.dtype,qb=!!N.normalized,Va=N.size|0,ya=N.offset|0,Ba=N.stride|0,va=N.divisor|0);Hc=n.buffer;n.buffer=kb;Kb=n.divisor;n.divisor=va;Mb=n.normalized;n.normalized=qb;Ub=n.offset;n.offset=ya;wa=n.size;n.size=Va;Jd=n.state;n.state=bb;Ma=n.stride;n.stride=Ba;Pb=n.type;n.type=eb;fb=n.w;n.w=Na;ib=n.x;n.x=Bb;xa=n.y;n.y=Ab;ec=n.z;n.z=Ta;Fa=this.position;rb=!1;sb=null;Za=0;$a=!1;dd=kc=0;tc=1;Wa=0;Nb=5126;Ra=vc=Ia=$c=0;C(Fa)?(rb=!0,sb=Q.createStream(34962,Fa),Nb=sb.dtype):(sb=Q.getBuffer(Fa))?
Nb=sb.dtype:"constant"in Fa?(tc=2,"number"===typeof Fa.constant?(Ia=Fa.constant,vc=Ra=$c=0):(Ia=0<Fa.constant.length?Fa.constant[0]:0,vc=1<Fa.constant.length?Fa.constant[1]:0,Ra=2<Fa.constant.length?Fa.constant[2]:0,$c=3<Fa.constant.length?Fa.constant[3]:0)):(sb=C(Fa.buffer)?Q.createStream(34962,Fa.buffer):Q.getBuffer(Fa.buffer),Nb="type"in Fa?ta[Fa.type]:sb.dtype,$a=!!Fa.normalized,dd=Fa.size|0,kc=Fa.offset|0,Wa=Fa.stride|0,Za=Fa.divisor|0);Ca=p.buffer;p.buffer=sb;lb=p.divisor;p.divisor=Za;wb=p.normalized;
p.normalized=$a;Cb=p.offset;p.offset=kc;tb=p.size;p.size=dd;uc=p.state;p.state=tc;xb=p.stride;p.stride=Wa;wd=p.type;p.type=Nb;sc=p.w;p.w=$c;Ed=p.x;p.x=Ia;Jc=p.y;p.y=vc;ed=p.z;p.z=Ra;G.buffer=this.sizeBuffer;fd=!1;Wb=null;bc=0;Qb=!1;$b=Ja=0;mb=1;yb=0;Ob=5126;Ze=hc=fc=Rb=0;C(G)?(fd=!0,Wb=Q.createStream(34962,G),Ob=Wb.dtype):(Wb=Q.getBuffer(G))?Ob=Wb.dtype:"constant"in G?(mb=2,"number"===typeof G.constant?(fc=G.constant,hc=Ze=Rb=0):(fc=0<G.constant.length?G.constant[0]:0,hc=1<G.constant.length?G.constant[1]:
0,Ze=2<G.constant.length?G.constant[2]:0,Rb=3<G.constant.length?G.constant[3]:0)):(Wb=C(G.buffer)?Q.createStream(34962,G.buffer):Q.getBuffer(G.buffer),Ob="type"in G?ta[G.type]:Wb.dtype,Qb=!!G.normalized,$b=G.size|0,Ja=G.offset|0,yb=G.stride|0,bc=G.divisor|0);xc=r.buffer;r.buffer=Wb;yc=r.divisor;r.divisor=bc;Ac=r.normalized;r.normalized=Qb;Kc=r.offset;r.offset=Ja;ad=r.size;r.size=$b;Rc=r.state;r.state=mb;Lc=r.stride;r.stride=yb;Lb=r.type;r.type=Ob;Eb=r.w;r.w=Rb;Mc=r.x;r.x=fc;Ec=r.y;r.y=hc;Sc=r.z;r.z=
Ze;gc=da.vert;da.vert=61;Wc=da.frag;da.frag=60;T.dirty=!0;f(M,a,k);M.viewportWidth=x;M.viewportHeight=K;Y[0]=v;Y[1]=D;Y[2]=U;Y[3]=A;nb[0]=t;nb[1]=H;nb[2]=z;nb[3]=F;na.blend_enable=I;ga[0]=la;ga[1]=O;ga[2]=sa;ga[3]=J;na.depth_enable=L;na.stencil_enable=P;R&&(c.cpuTime+=performance.now()-oa);pa.offset=S;pa.count=ba;pa.primitive=Z;Da[64]=X;Da[69]=ea;Da[67]=ia;Da[66]=ka;Da[65]=ua;Da[62]=Ha;Da[14]=La;Da[63]=Sa;Da[10]=zc;Da[68]=ob;Da[6]=td;Da[8]=cc;Da[3]=qc;Ea&&Q.destroyStream(ic);g.buffer=Pa;g.divisor=
pb;g.normalized=vb;g.offset=hb;g.size=Qa;g.state=Oc;g.stride=Yb;g.type=Vc;g.w=db;g.x=pc;g.y=Zc;g.z=mc;jb&&Q.destroyStream(kb);n.buffer=Hc;n.divisor=Kb;n.normalized=Mb;n.offset=Ub;n.size=wa;n.state=Jd;n.stride=Ma;n.type=Pb;n.w=fb;n.x=ib;n.y=xa;n.z=ec;rb&&Q.destroyStream(sb);p.buffer=Ca;p.divisor=lb;p.normalized=wb;p.offset=Cb;p.size=tb;p.state=uc;p.stride=xb;p.type=wd;p.w=sc;p.x=Ed;p.y=Jc;p.z=ed;fd&&Q.destroyStream(Wb);r.buffer=xc;r.divisor=yc;r.normalized=Ac;r.offset=Kc;r.size=ad;r.state=Rc;r.stride=
Lc;r.type=Lb;r.w=Eb;r.x=Mc;r.y=Ec;r.z=Sc;da.vert=gc;da.frag=Wc;T.dirty=!0}}}}},{}],25:[function(d,h,t){var a=d("./sorted-object-keys");h.exports=function(c,d){for(var h=a(d),m=0;m<h.length;++m)c[h[m]]=d[h[m]];return c}},{"./sorted-object-keys":34}],26:[function(d,h,t){function a(a,c,d,f,k,b){for(var q=0;q<c;++q)for(var h=a[q],y=0;y<d;++y)for(var e=h[y],g=0;g<f;++g)k[b++]=e[g]}function c(d,m,l,f,k){for(var b=1,q=l+1;q<m.length;++q)b*=m[q];var h=m[l];if(4===m.length-l){var y=m[l+1],e=m[l+2];m=m[l+3];
for(q=0;q<h;++q)a(d[q],y,e,m,f,k),k+=b}else for(q=0;q<h;++q)c(d[q],m,l+1,f,k),k+=b}var A=d("./pool");h.exports={shape:function(a){for(var c=[];a.length;a=a[0])c.push(a.length);return c},flatten:function(d,m,l,f){var k=1;if(m.length)for(var b=0;b<m.length;++b)k*=m[b];else k=0;l=f||A.allocType(l,k);switch(m.length){case 0:break;case 1:f=m[0];for(m=0;m<f;++m)l[m]=d[m];break;case 2:f=m[0];m=m[1];for(b=k=0;b<f;++b)for(var q=d[b],h=0;h<m;++h)l[k++]=q[h];break;case 3:a(d,m[0],m[1],m[2],l,0);break;default:c(d,
m,0,l,0)}return l}}},{"./pool":32}],27:[function(d,h,t){var a=d("./is-typed-array");h.exports=function(c){return Array.isArray(c)||a(c)}},{"./is-typed-array":30}],28:[function(d,h,t){var a=d("./is-typed-array");h.exports=function(c){return!!c&&"object"===typeof c&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&"number"===typeof c.offset&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||a(c.data))}},{"./is-typed-array":30}],29:[function(d,h,t){h.exports=function(a){return!(a&a-1)&&!!a}},
{}],30:[function(d,h,t){h.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(d,h,t){h.exports=function(a,c){for(var d=Array(a),h=0;h<a;++h)d[h]=c(h);return d}},{}],32:[function(d,h,t){function a(a){var c,d;c=(65535<a)<<4;a>>>=c;d=(255<a)<<3;a>>>=d;c|=d;d=(15<a)<<2;a>>>=
d;c|=d;d=(3<a)<<1;return c|d|a>>>d>>1}function c(){function c(f){a:{for(var k=16;268435456>=k;k*=16)if(f<=k){f=k;break a}f=0}k=l[a(f)>>2];return 0<k.length?k.pop():new ArrayBuffer(f)}function d(c){l[a(c.byteLength)>>2].push(c)}var l=A(8,function(){return[]});return{alloc:c,free:d,allocType:function(a,k){var b=null;switch(a){case 5120:b=new Int8Array(c(k),0,k);break;case 5121:b=new Uint8Array(c(k),0,k);break;case 5122:b=new Int16Array(c(2*k),0,k);break;case 5123:b=new Uint16Array(c(2*k),0,k);break;
case 5124:b=new Int32Array(c(4*k),0,k);break;case 5125:b=new Uint32Array(c(4*k),0,k);break;case 5126:b=new Float32Array(c(4*k),0,k);break;default:return null}return b.length!==k?b.subarray(0,k):b},freeType:function(a){d(a.buffer)}}}var A=d("./loop");d=c();d.zero=c();h.exports=d},{"./loop":31}],33:[function(d,h,t){h.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?
function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(d,h,t){h.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(d,h,t){var a=d("./pool"),c=new Float32Array(1),A=new Uint32Array(c.buffer);h.exports=function(d){for(var m=a.allocType(5123,d.length),l=0;l<d.length;++l)if(isNaN(d[l]))m[l]=65535;else if(Infinity===d[l])m[l]=31744;else if(-Infinity===d[l])m[l]=64512;else{c[0]=d[l];var f=A[0],k=f>>>31<<15,b=(f<<1>>>24)-127,f=f>>13&1023;m[l]=-24>b?k:-14>b?k+(f+1024>>
-14-b):15<b?k+31744:k+(b+15<<10)+f}return m}},{"./pool":32}],36:[function(d,h,t){var a=d("./sorted-object-keys");h.exports=function(c){return a(c).map(function(a){return c[a]})}},{"./sorted-object-keys":34}],37:[function(d,h,t){function a(a,c,b){function q(){var e=window.innerWidth,g=window.innerHeight;a!==document.body&&(g=d.getBoundingClientRect(),e=g.right-g.left,g=g.bottom-g.top);d.width=b*e;d.height=b*g}var d=document.createElement("canvas");l(d.style,{border:0,margin:0,padding:0,top:0,left:0,
width:"100%",height:"100%"});a.appendChild(d);a===document.body&&(d.style.position="absolute",l(a.style,{margin:0,padding:0}));var m;a!==document.body&&"function"===typeof ResizeObserver?(m=new ResizeObserver(function(){setTimeout(q)}),m.observe(a)):window.addEventListener("resize",q,!1);q();return{canvas:d,onDestroy:function(){m?m.disconnect():window.removeEventListener("resize",q);a.removeChild(d)}}}function c(a,c){function b(b){try{return a.getContext(b,c)}catch(d){return null}}return b("webgl")||
b("experimental-webgl")||b("webgl-experimental")}function A(a){if("string"===typeof a)return a.split();m(Array.isArray(a),"invalid extension array");return a}function D(a){return"string"===typeof a?(m("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var m=d("./util/check"),l=d("./util/extend");h.exports=function(f){var k=f||{},b,q,d,l;f={};var e=[],g=[],n="undefined"===typeof window?1:window.devicePixelRatio,p=!1,r=function(b){b&&m.raise(b)},u=function(){};
"string"===typeof k?(m("undefined"!==typeof document,"selector queries only supported in DOM environments"),b=document.querySelector(k),m(b,"invalid query string for element")):"object"===typeof k?"string"===typeof k.nodeName&&"function"===typeof k.appendChild&&"function"===typeof k.getBoundingClientRect?b=k:"function"===typeof k.drawArrays||"function"===typeof k.drawElements?(l=k,d=l.canvas):(m.constructor(k),"gl"in k?l=k.gl:"canvas"in k?d=D(k.canvas):"container"in k&&(q=D(k.container)),"attributes"in
k&&(f=k.attributes,m.type(f,"object","invalid context attributes")),"extensions"in k&&(e=A(k.extensions)),"optionalExtensions"in k&&(g=A(k.optionalExtensions)),"onDone"in k&&(m.type(k.onDone,"function","invalid or missing onDone callback"),r=k.onDone),"profile"in k&&(p=!!k.profile),"pixelRatio"in k&&(n=+k.pixelRatio,m(0<n,"invalid pixel ratio"))):m.raise("invalid arguments to regl");b&&("canvas"===b.nodeName.toLowerCase()?d=b:q=b);if(!l){if(!d){m("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");
b=a(q||document.body,r,n);if(!b)return null;d=b.canvas;u=b.onDestroy}void 0===f.premultipliedAlpha&&(f.premultipliedAlpha=!0);l=c(d,f)}return l?{gl:l,canvas:d,container:q,extensions:e,optionalExtensions:g,pixelRatio:n,profile:p,onDone:r,onDestroy:u}:(u(),r("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(d,h,t){var a=d("element-size");h.exports=function(d,h,m){function l(){var k=l.parent||d.parentNode;
if("function"===typeof k)var b=k(c)||c,k=b[0],b=b[1];else k&&k!==document.body?(b=a(k),k=b[0]|0,b=b[1]|0):(k=window.innerWidth,b=window.innerHeight);f?(d.setAttribute("width",k*l.scale+"px"),d.setAttribute("height",b*l.scale+"px")):(d.width=k*l.scale,d.height=b*l.scale);d.style.width=k+"px";d.style.height=b+"px";return l}var f="SVG"===d.nodeName.toUpperCase();d.style.position=d.style.position||"absolute";d.style.top=0;d.style.left=0;l.scale=parseFloat(m||1);l.parent=h;return l()};var c=new Float32Array(2)},
{"element-size":42}],39:[function(d,h,t){var a=d("orbit-camera"),c=d("scroll-speed"),A=d("mouse-position"),D=d("mouse-pressed"),m=d("key-pressed");h.exports=function(d,f){f=f||{};f.pan=!1!==f.pan;f.scale=!1!==f.scale;f.rotate=!1!==f.rotate;var k=c(d,f.scale),b=D(d,f.rotate),q=A(d),h=a([0,10,30],[0,0,0],[0,1,0]);h.tick=function(){var a=m("<control>")||m("<alt>"),e=m("<shift>"),g=d.height,c=d.width;f.rotate&&b.left&&!a&&!e&&h.rotate([q.x/c-.5,q.y/g-.5],[q.prevX/c-.5,q.prevY/g-.5]);(f.pan&&b.right||
b.left&&a&&!e)&&h.pan([1*(q.x-q.prevX)/c,1*(q.y-q.prevY)/g]);f.scale&&k[1]&&(h.distance*=Math.exp(k[1]/g));if(f.scale&&(b.middle||b.left&&!a&&e)){a=q.y-q.prevY;if(!a)return;h.distance*=Math.exp(a/g)}k.flush();q.flush()};return h}},{"key-pressed":75,"mouse-position":40,"mouse-pressed":41,"orbit-camera":76,"scroll-speed":79}],40:[function(d,h,t){var a=d("events/");h.exports=function(c,d){var h=new a;h.x=0;h.y=0;h.prevX=0;h.prevY=0;h.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===
typeof window)return h;d=d||c||window;c=c||document.body;d.addEventListener("mousemove",c===document.body||c===window?function(a){h.prevX=h.x;h.prevY=h.y;h.x=a.clientX;h.y=a.clientY;h.emit("move",a)}:function(a){h.prevX=h.x;h.prevY=h.y;var d=c.getBoundingClientRect();h.x=a.clientX-d.left;h.y=a.clientY-d.top;h.emit("move",a)},!1);return h}},{"events/":43}],41:[function(d,h,t){var a=d("events/"),c=["left","middle","right"];h.exports=function(d,h){function m(a){f.right=!1;f[c[a.button]]=!0;f.emit("down",
a);if(h){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function l(a){f.right=!1;f[c[a.button]]=!1;f.emit("up",a);h&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var f=new a;f.left=!1;f.right=!1;f.middle=!1;"undefined"!==typeof window&&(d=d||window,d.addEventListener("mousedown",m,!1),d.addEventListener("mouseup",l,!1),h&&d.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return f}},{"events/":43}],42:[function(d,
h,t){function a(a){return parseFloat(a)||0}h.exports=function(c){if(c===window||c===document.body)return[window.innerWidth,window.innerHeight];if(!c.parentNode){var d=!0;document.body.appendChild(c)}var h=c.getBoundingClientRect(),m=getComputedStyle(c),l=(h.height|0)+a(m.getPropertyValue("margin-top"))+a(m.getPropertyValue("margin-bottom")),h=(h.width|0)+a(m.getPropertyValue("margin-left"))+a(m.getPropertyValue("margin-right"));d&&document.body.removeChild(c);return[h,l]}},{}],43:[function(d,h,t){function a(){this._events=
this._events||{};this._maxListeners=this._maxListeners||void 0}function c(a){return"function"===typeof a}function A(a){return"object"===typeof a&&null!==a}h.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var d,l,f,k;this._events||(this._events={});
if("error"===a&&(!this._events.error||A(this._events.error)&&!this._events.error.length)){d=arguments[1];if(d instanceof Error)throw d;l=Error('Uncaught, unspecified "error" event. ('+d+")");l.context=d;throw l;}l=this._events[a];if(void 0===l)return!1;if(c(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),l.apply(this,d)}else if(A(l))for(d=Array.prototype.slice.call(arguments,
1),k=l.slice(),l=k.length,f=0;f<l;f++)k[f].apply(this,d);return!0};a.prototype.addListener=function(d,h){var l;if(!c(h))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",d,c(h.listener)?h.listener:h);this._events[d]?A(this._events[d])?this._events[d].push(h):this._events[d]=[this._events[d],h]:this._events[d]=h;A(this._events[d])&&!this._events[d].warned&&(l=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&
0<l&&this._events[d].length>l&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[d].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,d){function h(){this.removeListener(a,h);f||(f=!0,d.apply(this,arguments))}if(!c(d))throw TypeError("listener must be a function");var f=!1;h.listener=
d;this.on(a,h);return this};a.prototype.removeListener=function(a,d){var h,f,k;if(!c(d))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;h=this._events[a];k=h.length;f=-1;if(h===d||c(h.listener)&&h.listener===d)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,d);else if(A(h)){for(;0<k--;)if(h[k]===d||h[k].listener&&h[k].listener===d){f=k;break}if(0>f)return this;1===h.length?(h.length=0,delete this._events[a]):h.splice(f,
1);this._events.removeListener&&this.emit("removeListener",a,d)}return this};a.prototype.removeAllListeners=function(a){var d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(d in this._events)"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events={};return this}d=this._events[a];if(c(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,
d[d.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(c(a))return 1;if(a)return a.length}return 0};a.listenerCount=function(a,c){return a.listenerCount(c)}},{}],44:[function(d,h,t){h.exports=function(a,c){var d=c[0],h=c[1],m=c[2],l=c[3],f=c[4],k=c[5],b=c[6],q=c[7],B=c[8],y=c[9],e=c[10],g=c[11],
n=c[12],p=c[13],r=c[14],u=c[15];a[0]=k*(e*u-g*r)-y*(b*u-q*r)+p*(b*g-q*e);a[1]=-(h*(e*u-g*r)-y*(m*u-l*r)+p*(m*g-l*e));a[2]=h*(b*u-q*r)-k*(m*u-l*r)+p*(m*q-l*b);a[3]=-(h*(b*g-q*e)-k*(m*g-l*e)+y*(m*q-l*b));a[4]=-(f*(e*u-g*r)-B*(b*u-q*r)+n*(b*g-q*e));a[5]=d*(e*u-g*r)-B*(m*u-l*r)+n*(m*g-l*e);a[6]=-(d*(b*u-q*r)-f*(m*u-l*r)+n*(m*q-l*b));a[7]=d*(b*g-q*e)-f*(m*g-l*e)+B*(m*q-l*b);a[8]=f*(y*u-g*p)-B*(k*u-q*p)+n*(k*g-q*y);a[9]=-(d*(y*u-g*p)-B*(h*u-l*p)+n*(h*g-l*y));a[10]=d*(k*u-q*p)-f*(h*u-l*p)+n*(h*q-l*k);a[11]=
-(d*(k*g-q*y)-f*(h*g-l*y)+B*(h*q-l*k));a[12]=-(f*(y*r-e*p)-B*(k*r-b*p)+n*(k*e-b*y));a[13]=d*(y*r-e*p)-B*(h*r-m*p)+n*(h*e-m*y);a[14]=-(d*(k*r-b*p)-f*(h*r-m*p)+n*(h*b-m*k));a[15]=d*(k*e-b*y)-f*(h*e-m*y)+B*(h*b-m*k);return a}},{}],45:[function(d,h,t){h.exports=function(a){var c=new Float32Array(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c}},{}],46:[function(d,h,
t){h.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],47:[function(d,h,t){h.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(d,h,t){h.exports=function(a){var c=a[0],d=a[1],h=a[2],m=a[3],l=a[4],f=a[5],
k=a[6],b=a[7],q=a[8],B=a[9],y=a[10],e=a[11],g=a[12],n=a[13],p=a[14];a=a[15];return(c*f-d*l)*(y*a-e*p)-(c*k-h*l)*(B*a-e*n)+(c*b-m*l)*(B*p-y*n)+(d*k-h*f)*(q*a-e*g)-(d*b-m*f)*(q*p-y*g)+(h*b-m*k)*(q*n-B*g)}},{}],49:[function(d,h,t){h.exports=function(a,c){var d=c[0],h=c[1],m=c[2],l=c[3],f=d+d,k=h+h,b=m+m,d=d*f,q=h*f,h=h*k,B=m*f,y=m*k,m=m*b,f=l*f,k=l*k,l=l*b;a[0]=1-h-m;a[1]=q+l;a[2]=B-k;a[3]=0;a[4]=q-l;a[5]=1-d-m;a[6]=y+f;a[7]=0;a[8]=B+k;a[9]=y-f;a[10]=1-d-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},
{}],50:[function(d,h,t){h.exports=function(a,c,d){var h,m,l=d[0],f=d[1];d=d[2];h=Math.sqrt(l*l+f*f+d*d);if(1E-6>Math.abs(h))return null;h=1/h;l*=h;f*=h;d*=h;h=Math.sin(c);c=Math.cos(c);m=1-c;a[0]=l*l*m+c;a[1]=f*l*m+d*h;a[2]=d*l*m-f*h;a[3]=0;a[4]=l*f*m-d*h;a[5]=f*f*m+c;a[6]=d*f*m+l*h;a[7]=0;a[8]=l*d*m+f*h;a[9]=f*d*m-l*h;a[10]=d*d*m+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(d,h,t){h.exports=function(a,c,d){var h=c[0],m=c[1],l=c[2],f=c[3],k=h+h,b=m+m,q=l+l;c=h*k;var B=h*b,
h=h*q,y=m*b,m=m*q,l=l*q,k=f*k,b=f*b,f=f*q;a[0]=1-(y+l);a[1]=B+f;a[2]=h-b;a[3]=0;a[4]=B-f;a[5]=1-(c+l);a[6]=m+k;a[7]=0;a[8]=h+b;a[9]=m-k;a[10]=1-(c+y);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}},{}],52:[function(d,h,t){h.exports=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(d,h,t){h.exports=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}},{}],54:[function(d,h,t){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(d,h,t){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=h;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],
56:[function(d,h,t){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=h;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(d,h,t){h.exports=function(a,c,d,h,m,l,f){var k=1/(d-c),b=1/(m-h),q=1/(l-f);a[0]=2*l*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*l*b;a[6]=0;a[7]=0;a[8]=(d+c)*k;a[9]=(m+h)*b;a[10]=(f+l)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*l*2*q;a[15]=0;return a}},{}],58:[function(d,h,t){h.exports=function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(d,h,t){h.exports={create:d("./create"),clone:d("./clone"),copy:d("./copy"),identity:d("./identity"),transpose:d("./transpose"),invert:d("./invert"),adjoint:d("./adjoint"),determinant:d("./determinant"),multiply:d("./multiply"),translate:d("./translate"),scale:d("./scale"),rotate:d("./rotate"),rotateX:d("./rotateX"),rotateY:d("./rotateY"),rotateZ:d("./rotateZ"),
fromRotation:d("./fromRotation"),fromRotationTranslation:d("./fromRotationTranslation"),fromScaling:d("./fromScaling"),fromTranslation:d("./fromTranslation"),fromXRotation:d("./fromXRotation"),fromYRotation:d("./fromYRotation"),fromZRotation:d("./fromZRotation"),fromQuat:d("./fromQuat"),frustum:d("./frustum"),perspective:d("./perspective"),perspectiveFromFieldOfView:d("./perspectiveFromFieldOfView"),ortho:d("./ortho"),lookAt:d("./lookAt"),str:d("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,
"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(d,h,t){h.exports=function(a,
c){var d=c[0],h=c[1],m=c[2],l=c[3],f=c[4],k=c[5],b=c[6],q=c[7],B=c[8],y=c[9],e=c[10],g=c[11],n=c[12],p=c[13],r=c[14],u=c[15],K=d*k-h*f,x=d*b-m*f,U=d*q-l*f,v=h*b-m*k,t=h*q-l*k,la=m*q-l*b,sa=B*p-y*n,O=B*r-e*n,oa=B*u-g*n,z=y*r-e*p,ba=y*u-g*p,I=e*u-g*r,V=K*I-x*ba+U*z+v*oa-t*O+la*sa;if(!V)return null;V=1/V;a[0]=(k*I-b*ba+q*z)*V;a[1]=(m*ba-h*I-l*z)*V;a[2]=(p*la-r*t+u*v)*V;a[3]=(e*t-y*la-g*v)*V;a[4]=(b*oa-f*I-q*O)*V;a[5]=(d*I-m*oa+l*O)*V;a[6]=(r*U-n*la-u*x)*V;a[7]=(B*la-e*U+g*x)*V;a[8]=(f*ba-k*oa+q*sa)*
V;a[9]=(h*oa-d*ba-l*sa)*V;a[10]=(n*t-p*U+u*K)*V;a[11]=(y*U-B*t-g*K)*V;a[12]=(k*O-f*z-b*sa)*V;a[13]=(d*z-h*O+m*sa)*V;a[14]=(p*x-n*v-r*K)*V;a[15]=(B*v-y*x+e*K)*V;return a}},{}],61:[function(d,h,t){var a=d("./identity");h.exports=function(c,d,h,m){var l,f,k,b,q,B,y,e,g=d[0],n=d[1];d=d[2];k=m[0];b=m[1];f=m[2];y=h[0];m=h[1];l=h[2];if(1E-6>Math.abs(g-y)&&1E-6>Math.abs(n-m)&&1E-6>Math.abs(d-l))return a(c);h=g-y;m=n-m;y=d-l;e=1/Math.sqrt(h*h+m*m+y*y);h*=e;m*=e;y*=e;l=b*y-f*m;f=f*h-k*y;k=k*m-b*h;(e=Math.sqrt(l*
l+f*f+k*k))?(e=1/e,l*=e,f*=e,k*=e):k=f=l=0;b=m*k-y*f;q=y*l-h*k;B=h*f-m*l;(e=Math.sqrt(b*b+q*q+B*B))?(e=1/e,b*=e,q*=e,B*=e):B=q=b=0;c[0]=l;c[1]=b;c[2]=h;c[3]=0;c[4]=f;c[5]=q;c[6]=m;c[7]=0;c[8]=k;c[9]=B;c[10]=y;c[11]=0;c[12]=-(l*g+f*n+k*d);c[13]=-(b*g+q*n+B*d);c[14]=-(h*g+m*n+y*d);c[15]=1;return c}},{"./identity":58}],62:[function(d,h,t){h.exports=function(a,c,d){var h=c[0],m=c[1],l=c[2],f=c[3],k=c[4],b=c[5],q=c[6],B=c[7],y=c[8],e=c[9],g=c[10],n=c[11],p=c[12],r=c[13],u=c[14];c=c[15];var K=d[0],x=d[1],
U=d[2],v=d[3];a[0]=K*h+x*k+U*y+v*p;a[1]=K*m+x*b+U*e+v*r;a[2]=K*l+x*q+U*g+v*u;a[3]=K*f+x*B+U*n+v*c;K=d[4];x=d[5];U=d[6];v=d[7];a[4]=K*h+x*k+U*y+v*p;a[5]=K*m+x*b+U*e+v*r;a[6]=K*l+x*q+U*g+v*u;a[7]=K*f+x*B+U*n+v*c;K=d[8];x=d[9];U=d[10];v=d[11];a[8]=K*h+x*k+U*y+v*p;a[9]=K*m+x*b+U*e+v*r;a[10]=K*l+x*q+U*g+v*u;a[11]=K*f+x*B+U*n+v*c;K=d[12];x=d[13];U=d[14];v=d[15];a[12]=K*h+x*k+U*y+v*p;a[13]=K*m+x*b+U*e+v*r;a[14]=K*l+x*q+U*g+v*u;a[15]=K*f+x*B+U*n+v*c;return a}},{}],63:[function(d,h,t){h.exports=function(a,
c,d,h,m,l,f){var k=1/(c-d),b=1/(h-m),q=1/(l-f);a[0]=-2*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(c+d)*k;a[13]=(m+h)*b;a[14]=(f+l)*q;a[15]=1;return a}},{}],64:[function(d,h,t){h.exports=function(a,c,d,h,m){c=1/Math.tan(c/2);var l=1/(h-m);a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(m+h)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*m*h*l;a[15]=0;return a}},{}],65:[function(d,h,t){h.exports=function(a,c,d,h){var m=Math.tan(c.upDegrees*
Math.PI/180),l=Math.tan(c.downDegrees*Math.PI/180),f=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var k=2/(f+c),b=2/(m+l);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=-((f-c)*k*.5);a[9]=(m-l)*b*.5;a[10]=h/(d-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*d/(d-h);a[15]=0;return a}},{}],66:[function(d,h,t){h.exports=function(a,c,d,h){var m=h[0],l=h[1];h=h[2];var f=Math.sqrt(m*m+l*l+h*h),k,b,q,B,y,e,g,n,p,r,u,K,x,U,v,t,la,sa,O,oa;if(1E-6>Math.abs(f))return null;f=1/
f;m*=f;l*=f;h*=f;k=Math.sin(d);b=Math.cos(d);q=1-b;d=c[0];f=c[1];B=c[2];y=c[3];e=c[4];g=c[5];n=c[6];p=c[7];r=c[8];u=c[9];K=c[10];x=c[11];U=m*m*q+b;v=l*m*q+h*k;t=h*m*q-l*k;la=m*l*q-h*k;sa=l*l*q+b;O=h*l*q+m*k;oa=m*h*q+l*k;m=l*h*q-m*k;l=h*h*q+b;a[0]=d*U+e*v+r*t;a[1]=f*U+g*v+u*t;a[2]=B*U+n*v+K*t;a[3]=y*U+p*v+x*t;a[4]=d*la+e*sa+r*O;a[5]=f*la+g*sa+u*O;a[6]=B*la+n*sa+K*O;a[7]=y*la+p*sa+x*O;a[8]=d*oa+e*m+r*l;a[9]=f*oa+g*m+u*l;a[10]=B*oa+n*m+K*l;a[11]=y*oa+p*m+x*l;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],
a[15]=c[15]);return a}},{}],67:[function(d,h,t){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var m=c[4],l=c[5],f=c[6],k=c[7],b=c[8],q=c[9],B=c[10],y=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=m*d+b*h;a[5]=l*d+q*h;a[6]=f*d+B*h;a[7]=k*d+y*h;a[8]=b*d-m*h;a[9]=q*d-l*h;a[10]=B*d-f*h;a[11]=y*d-k*h;return a}},{}],68:[function(d,h,t){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var m=c[0],l=c[1],f=c[2],k=c[3],b=c[8],
q=c[9],B=c[10],y=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d-b*h;a[1]=l*d-q*h;a[2]=f*d-B*h;a[3]=k*d-y*h;a[8]=m*h+b*d;a[9]=l*h+q*d;a[10]=f*h+B*d;a[11]=k*h+y*d;return a}},{}],69:[function(d,h,t){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var m=c[0],l=c[1],f=c[2],k=c[3],b=c[4],q=c[5],B=c[6],y=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d+b*h;a[1]=l*d+
q*h;a[2]=f*d+B*h;a[3]=k*d+y*h;a[4]=b*d-m*h;a[5]=q*d-l*h;a[6]=B*d-f*h;a[7]=y*d-k*h;return a}},{}],70:[function(d,h,t){h.exports=function(a,c,d){var h=d[0],m=d[1];d=d[2];a[0]=c[0]*h;a[1]=c[1]*h;a[2]=c[2]*h;a[3]=c[3]*h;a[4]=c[4]*m;a[5]=c[5]*m;a[6]=c[6]*m;a[7]=c[7]*m;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],71:[function(d,h,t){h.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+
a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(d,h,t){h.exports=function(a,c,d){var h=d[0],m=d[1];d=d[2];var l,f,k,b,q,B,y,e,g,n,p,r;c===a?(a[12]=c[0]*h+c[4]*m+c[8]*d+c[12],a[13]=c[1]*h+c[5]*m+c[9]*d+c[13],a[14]=c[2]*h+c[6]*m+c[10]*d+c[14],a[15]=c[3]*h+c[7]*m+c[11]*d+c[15]):(l=c[0],f=c[1],k=c[2],b=c[3],q=c[4],B=c[5],y=c[6],e=c[7],g=c[8],n=c[9],p=c[10],r=c[11],a[0]=l,a[1]=f,a[2]=k,a[3]=b,a[4]=q,a[5]=B,a[6]=y,a[7]=e,a[8]=g,a[9]=n,a[10]=
p,a[11]=r,a[12]=l*h+q*m+g*d+c[12],a[13]=f*h+B*m+n*d+c[13],a[14]=k*h+y*m+p*d+c[14],a[15]=b*h+e*m+r*d+c[15]);return a}},{}],73:[function(d,h,t){h.exports=function(a,c){if(a===c){var d=c[1],h=c[2],m=c[3],l=c[6],f=c[7],k=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=d;a[6]=c[9];a[7]=c[13];a[8]=h;a[9]=l;a[11]=c[14];a[12]=m;a[13]=f;a[14]=k}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=
c[15];return a}},{}],74:[function(d,h,t){!function(a,c){if("object"==typeof t&&"object"==typeof h)h.exports=c();else if("function"==typeof define&&define.amd)define([],c);else{var d=c(),D;for(D in d)("object"==typeof t?t:a)[D]=d[D]}}("undefined"!=typeof self?self:this,function(){return function(a){function c(h){if(d[h])return d[h].exports;var m=d[h]={i:h,l:!1,exports:{}};return a[h].call(m.exports,m,m.exports,c),m.l=!0,m.exports}var d={};return c.m=a,c.c=d,c.d=function(a,d,h){c.o(a,d)||Object.defineProperty(a,
d,{enumerable:!0,get:h})},c.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,d){if((1&d&&(a=c(a)),8&d)||4&d&&"object"==typeof a&&a&&a.__esModule)return a;var h=Object.create(null);if(c.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var f in a)c.d(h,f,function(c){return a[c]}.bind(null,
f));return h},c.n=function(a){var d=a&&a.__esModule?function(){return a["default"]}:function(){return a};return c.d(d,"a",d),d},c.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},c.p="",c(c.s=10)}([function(a,c,d){Object.defineProperty(c,"__esModule",{value:!0});c.setMatrixArrayType=function(a){c.ARRAY_TYPE=a};c.toRadian=function(a){return a*m};c.equals=function(a,c){return Math.abs(a-c)<=h*Math.max(1,Math.abs(a),Math.abs(c))};var h=c.EPSILON=1E-6;c.ARRAY_TYPE="undefined"!=typeof Float32Array?
Float32Array:Array;c.RANDOM=Math.random;var m=Math.PI/180},function(a,c,d){function h(){var b=new y.ARRAY_TYPE(4);return y.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b}function m(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b[3]=a[3]-c[3],b}function l(b,a,c){return b[0]=a[0]*c[0],b[1]=a[1]*c[1],b[2]=a[2]*c[2],b[3]=a[3]*c[3],b}function f(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b[2]=a[2]/c[2],b[3]=a[3]/c[3],b}function k(b,a){var c=a[0]-b[0],f=a[1]-b[1],k=a[2]-b[2],d=a[3]-
b[3];return Math.sqrt(c*c+f*f+k*k+d*d)}function b(b,a){var c=a[0]-b[0],f=a[1]-b[1],k=a[2]-b[2],d=a[3]-b[3];return c*c+f*f+k*k+d*d}function q(b){var a=b[0],c=b[1],f=b[2];b=b[3];return Math.sqrt(a*a+c*c+f*f+b*b)}function B(b){var a=b[0],c=b[1],f=b[2];b=b[3];return a*a+c*c+f*f+b*b}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=h;c.clone=function(b){var a=new y.ARRAY_TYPE(4);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a};
c.fromValues=function(b,a,c,f){var k=new y.ARRAY_TYPE(4);return k[0]=b,k[1]=a,k[2]=c,k[3]=f,k};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b};c.set=function(b,a,c,f,k){return b[0]=a,b[1]=c,b[2]=f,b[3]=k,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b};c.subtract=m;c.multiply=l;c.divide=f;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b[3]=Math.ceil(a[3]),b};c.floor=function(b,a){return b[0]=
Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b[3]=Math.floor(a[3]),b};c.min=function(b,a,c){return b[0]=Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b[2]=Math.min(a[2],c[2]),b[3]=Math.min(a[3],c[3]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),b[2]=Math.max(a[2],c[2]),b[3]=Math.max(a[3],c[3]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b[3]=Math.round(a[3]),b};c.scale=function(b,a,c){return b[0]=
a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b};c.scaleAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b[2]=a[2]+c[2]*f,b[3]=a[3]+c[3]*f,b};c.distance=k;c.squaredDistance=b;c.length=q;c.squaredLength=B;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b[2]=1/a[2],b[3]=1/a[3],b};c.normalize=function(b,a){var c=a[0],f=a[1],k=a[2],d=a[3],q=c*c+f*f+k*k+d*d;0<q&&(q=1/Math.sqrt(q),b[0]=c*q,b[1]=f*q,b[2]=k*
q,b[3]=d*q);return b};c.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};c.lerp=function(b,a,c,f){var k=a[0],d=a[1],q=a[2];a=a[3];return b[0]=k+f*(c[0]-k),b[1]=d+f*(c[1]-d),b[2]=q+f*(c[2]-q),b[3]=a+f*(c[3]-a),b};c.random=function(b,a){var c,f,k,d,q,h;a=a||1;do c=2*y.RANDOM()-1,f=2*y.RANDOM()-1,q=c*c+f*f;while(1<=q);do k=2*y.RANDOM()-1,d=2*y.RANDOM()-1,h=k*k+d*d;while(1<=h);q=Math.sqrt((1-q)/h);return b[0]=a*c,b[1]=a*f,b[2]=a*k*q,b[3]=a*d*q,b};c.transformMat4=function(b,a,c){var f=
a[0],k=a[1],d=a[2];a=a[3];return b[0]=c[0]*f+c[4]*k+c[8]*d+c[12]*a,b[1]=c[1]*f+c[5]*k+c[9]*d+c[13]*a,b[2]=c[2]*f+c[6]*k+c[10]*d+c[14]*a,b[3]=c[3]*f+c[7]*k+c[11]*d+c[15]*a,b};c.transformQuat=function(b,a,c){var f=a[0],k=a[1],d=a[2],q=c[0],h=c[1],l=c[2];c=c[3];var m=c*f+h*d-l*k,y=c*k+l*f-q*d,B=c*d+q*k-h*f,f=-q*f-h*k-l*d;return b[0]=m*c+f*-q+y*-l-B*-h,b[1]=y*c+f*-h+B*-q-m*-l,b[2]=B*c+f*-l+m*-h-y*-q,b[3]=a[3],b};c.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};c.exactEquals=function(b,
a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};c.equals=function(b,a){var c=b[0],f=b[1],k=b[2],d=b[3],q=a[0],h=a[1],l=a[2],m=a[3];return Math.abs(c-q)<=y.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(f-h)<=y.EPSILON*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(k-l)<=y.EPSILON*Math.max(1,Math.abs(k),Math.abs(l))&&Math.abs(d-m)<=y.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))};var y=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.sub=m;c.mul=l;c.div=f;c.dist=k;c.sqrDist=b;c.len=q;c.sqrLen=B;c.forEach=function(){var b=h();return function(a,c,f,k,d,q){var h=void 0,l=void 0;c||(c=4);f||(f=0);l=k?Math.min(k*c+f,a.length):a.length;for(h=f;h<l;h+=c)b[0]=a[h],b[1]=a[h+1],b[2]=a[h+2],b[3]=a[h+3],d(b,b,q),a[h]=b[0],a[h+1]=b[1],a[h+2]=b[2],a[h+3]=b[3];return a}}()},function(a,c,d){function h(){var b=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function m(b){var a=
b[0],e=b[1];b=b[2];return Math.sqrt(a*a+e*e+b*b)}function l(b,a,e){var g=new n.ARRAY_TYPE(3);return g[0]=b,g[1]=a,g[2]=e,g}function f(b,a,e){return b[0]=a[0]-e[0],b[1]=a[1]-e[1],b[2]=a[2]-e[2],b}function k(b,a,e){return b[0]=a[0]*e[0],b[1]=a[1]*e[1],b[2]=a[2]*e[2],b}function b(b,a,e){return b[0]=a[0]/e[0],b[1]=a[1]/e[1],b[2]=a[2]/e[2],b}function q(b,a){var e=a[0]-b[0],g=a[1]-b[1],c=a[2]-b[2];return Math.sqrt(e*e+g*g+c*c)}function B(b,a){var e=a[0]-b[0],g=a[1]-b[1],c=a[2]-b[2];return e*e+g*g+c*c}function y(b){var a=
b[0],e=b[1];b=b[2];return a*a+e*e+b*b}function e(b,a){var e=a[0],g=a[1],c=a[2],e=e*e+g*g+c*c;return 0<e&&(e=1/Math.sqrt(e),b[0]=a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e),b}function g(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=h;c.clone=function(b){var a=new n.ARRAY_TYPE(3);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a};c.length=m;c.fromValues=l;c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],
b[2]=a[2],b};c.set=function(b,a,e,g){return b[0]=a,b[1]=e,b[2]=g,b};c.add=function(b,a,e){return b[0]=a[0]+e[0],b[1]=a[1]+e[1],b[2]=a[2]+e[2],b};c.subtract=f;c.multiply=k;c.divide=b;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b};c.min=function(b,a,e){return b[0]=Math.min(a[0],e[0]),b[1]=Math.min(a[1],e[1]),b[2]=Math.min(a[2],e[2]),b};c.max=function(b,a,e){return b[0]=
Math.max(a[0],e[0]),b[1]=Math.max(a[1],e[1]),b[2]=Math.max(a[2],e[2]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b};c.scale=function(b,a,e){return b[0]=a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e,b};c.scaleAndAdd=function(b,a,e,g){return b[0]=a[0]+e[0]*g,b[1]=a[1]+e[1]*g,b[2]=a[2]+e[2]*g,b};c.distance=q;c.squaredDistance=B;c.squaredLength=y;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/
a[1],b[2]=1/a[2],b};c.normalize=e;c.dot=g;c.cross=function(b,a,e){var g=a[0],c=a[1];a=a[2];var f=e[0],k=e[1];e=e[2];return b[0]=c*e-a*k,b[1]=a*f-g*e,b[2]=g*k-c*f,b};c.lerp=function(b,a,e,g){var c=a[0],f=a[1];a=a[2];return b[0]=c+g*(e[0]-c),b[1]=f+g*(e[1]-f),b[2]=a+g*(e[2]-a),b};c.hermite=function(b,a,e,g,c,f){var k=f*f,n=k*(2*f-3)+1,d=k*(f-2)+f,q=k*(f-1);f=k*(3-2*f);return b[0]=a[0]*n+e[0]*d+g[0]*q+c[0]*f,b[1]=a[1]*n+e[1]*d+g[1]*q+c[1]*f,b[2]=a[2]*n+e[2]*d+g[2]*q+c[2]*f,b};c.bezier=function(b,a,e,
g,c,f){var k=1-f,n=k*k,d=f*f,q=n*k,n=3*f*n,k=3*d*k;f*=d;return b[0]=a[0]*q+e[0]*n+g[0]*k+c[0]*f,b[1]=a[1]*q+e[1]*n+g[1]*k+c[1]*f,b[2]=a[2]*q+e[2]*n+g[2]*k+c[2]*f,b};c.random=function(b,a){a=a||1;var e=2*n.RANDOM()*Math.PI,g=2*n.RANDOM()-1,c=Math.sqrt(1-g*g)*a;return b[0]=Math.cos(e)*c,b[1]=Math.sin(e)*c,b[2]=g*a,b};c.transformMat4=function(b,a,e){var g=a[0],c=a[1];a=a[2];var f=e[3]*g+e[7]*c+e[11]*a+e[15];return f=f||1,b[0]=(e[0]*g+e[4]*c+e[8]*a+e[12])/f,b[1]=(e[1]*g+e[5]*c+e[9]*a+e[13])/f,b[2]=(e[2]*
g+e[6]*c+e[10]*a+e[14])/f,b};c.transformMat3=function(b,a,e){var g=a[0],c=a[1];a=a[2];return b[0]=g*e[0]+c*e[3]+a*e[6],b[1]=g*e[1]+c*e[4]+a*e[7],b[2]=g*e[2]+c*e[5]+a*e[8],b};c.transformQuat=function(b,a,e){var g=e[0],c=e[1],f=e[2],k=a[0],n=a[1];a=a[2];var d=c*a-f*n,q=f*k-g*a,h=g*n-c*k,l=c*h-f*q,f=f*d-g*h,g=g*q-c*d;e=2*e[3];return d*=e,q*=e,h*=e,l*=2,f*=2,g*=2,b[0]=k+d+l,b[1]=n+q+f,b[2]=a+h+g,b};c.rotateX=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[0],
f[1]=c[1]*Math.cos(g)-c[2]*Math.sin(g),f[2]=c[1]*Math.sin(g)+c[2]*Math.cos(g),b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.rotateY=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[2]*Math.sin(g)+c[0]*Math.cos(g),f[1]=c[1],f[2]=c[2]*Math.cos(g)-c[0]*Math.sin(g),b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.rotateZ=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[0]*Math.cos(g)-c[1]*Math.sin(g),f[1]=c[0]*Math.sin(g)+
c[1]*Math.cos(g),f[2]=c[2],b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.angle=function(b,a){var c=l(b[0],b[1],b[2]),f=l(a[0],a[1],a[2]);e(c,c);e(f,f);c=g(c,f);return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]};c.equals=function(b,a){var e=b[0],g=b[1],c=b[2],f=a[0],k=a[1],d=a[2];return Math.abs(e-f)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(g-k)<=n.EPSILON*
Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(c-d)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))};var n=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a["default"]=b,a}(d(0));c.sub=f;c.mul=k;c.div=b;c.dist=q;c.sqrDist=B;c.len=m;c.sqrLen=y;c.forEach=function(){var b=h();return function(a,e,g,c,f,k){var n=void 0,d=void 0;e||(e=3);g||(g=0);d=c?Math.min(c*e+g,a.length):a.length;for(n=g;n<d;n+=e)b[0]=a[n],b[1]=a[n+
1],b[2]=a[n+2],f(b,b,k),a[n]=b[0],a[n+1]=b[1],a[n+2]=b[2];return a}}()},function(a,c,d){function h(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a["default"]=b,a}function m(){var b=new q.ARRAY_TYPE(4);return q.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function l(b,a,e){e*=.5;var c=Math.sin(e);return b[0]=c*a[0],b[1]=c*a[1],b[2]=c*a[2],b[3]=Math.cos(e),b}function f(b,a,e){var c=a[0],f=a[1],k=a[2];a=a[3];
var d=e[0],q=e[1],h=e[2];e=e[3];return b[0]=c*e+a*d+f*h-k*q,b[1]=f*e+a*q+k*d-c*h,b[2]=k*e+a*h+c*q-f*d,b[3]=a*e-c*d-f*q-k*h,b}function k(b,a,e,c){var f=a[0],k=a[1],d=a[2];a=a[3];var h=e[0],l=e[1],m=e[2];e=e[3];var y=void 0,B=void 0,t=void 0,A=void 0,z=void 0;return 0>(B=f*h+k*l+d*m+a*e)&&(B=-B,h=-h,l=-l,m=-m,e=-e),1-B>q.EPSILON?(y=Math.acos(B),t=Math.sin(y),A=Math.sin((1-c)*y)/t,z=Math.sin(c*y)/t):(A=1-c,z=c),b[0]=A*f+z*h,b[1]=A*k+z*l,b[2]=A*d+z*m,b[3]=A*a+z*e,b}function b(b,a){var e=a[0]+a[4]+a[8],
c=void 0;if(0<e)c=Math.sqrt(e+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=2);var f=(e+1)%3,k=(e+2)%3,c=Math.sqrt(a[3*e+e]-a[3*f+f]-a[3*k+k]+1);b[e]=.5*c;c=.5/c;b[3]=(a[3*f+k]-a[3*k+f])*c;b[f]=(a[3*f+e]+a[3*e+f])*c;b[k]=(a[3*k+e]+a[3*e+k])*c}return b}Object.defineProperty(c,"__esModule",{value:!0});c.setAxes=c.sqlerp=c.rotationTo=c.equals=c.exactEquals=c.normalize=c.sqrLen=c.squaredLength=c.len=c.length=c.lerp=c.dot=c.scale=
c.mul=c.add=c.set=c.copy=c.fromValues=c.clone=void 0;c.create=m;c.identity=function(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b};c.setAxisAngle=l;c.getAxisAngle=function(b,a){var e=2*Math.acos(a[3]),c=Math.sin(e/2);c>q.EPSILON?(b[0]=a[0]/c,b[1]=a[1]/c,b[2]=a[2]/c):(b[0]=1,b[1]=0,b[2]=0);return e};c.multiply=f;c.rotateX=function(b,a,e){e*=.5;var c=a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e+a*d,b[1]=f*e+k*d,b[2]=k*e-f*d,b[3]=a*e-c*d,b};c.rotateY=function(b,a,e){e*=.5;var c=
a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e-k*d,b[1]=f*e+a*d,b[2]=k*e+c*d,b[3]=a*e-f*d,b};c.rotateZ=function(b,a,e){e*=.5;var c=a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e+f*d,b[1]=f*e-c*d,b[2]=k*e+a*d,b[3]=a*e-k*d,b};c.calculateW=function(b,a){var e=a[0],c=a[1],f=a[2];return b[0]=e,b[1]=c,b[2]=f,b[3]=Math.sqrt(Math.abs(1-e*e-c*c-f*f)),b};c.slerp=k;c.random=function(b){var a=q.RANDOM(),e=q.RANDOM(),c=q.RANDOM(),f=Math.sqrt(1-a),a=Math.sqrt(a);
return b[0]=f*Math.sin(2*Math.PI*e),b[1]=f*Math.cos(2*Math.PI*e),b[2]=a*Math.sin(2*Math.PI*c),b[3]=a*Math.cos(2*Math.PI*c),b};c.invert=function(b,a){var e=a[0],c=a[1],f=a[2],k=a[3],d=e*e+c*c+f*f+k*k,d=d?1/d:0;return b[0]=-e*d,b[1]=-c*d,b[2]=-f*d,b[3]=k*d,b};c.conjugate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b};c.fromMat3=b;c.fromEuler=function(b,a,e,c){var f=.5*Math.PI/180;a*=f;e*=f;c*=f;f=Math.sin(a);a=Math.cos(a);var k=Math.sin(e);e=Math.cos(e);var d=Math.sin(c);c=Math.cos(c);
return b[0]=f*e*c-a*k*d,b[1]=a*k*c+f*e*d,b[2]=a*e*d-f*k*c,b[3]=a*e*c+f*k*d,b};c.str=function(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};var q=h(d(0)),B=h(d(5)),y=h(d(2));a=h(d(1));c.clone=a.clone;c.fromValues=a.fromValues;c.copy=a.copy;c.set=a.set;c.add=a.add;c.mul=f;c.scale=a.scale;c.dot=a.dot;c.lerp=a.lerp;d=c.length=a.length;d=(c.len=d,c.squaredLength=a.squaredLength);var e=(c.sqrLen=d,c.normalize=a.normalize);c.exactEquals=a.exactEquals;c.equals=a.equals;c.rotationTo=function(){var b=
y.create(),a=y.fromValues(1,0,0),c=y.fromValues(0,1,0);return function(f,k,d){var q=y.dot(k,d);return-.999999>q?(y.cross(b,a,k),1E-6>y.len(b)&&y.cross(b,c,k),y.normalize(b,b),l(f,b,Math.PI),f):.999999<q?(f[0]=0,f[1]=0,f[2]=0,f[3]=1,f):(y.cross(b,k,d),f[0]=b[0],f[1]=b[1],f[2]=b[2],f[3]=1+q,e(f,f))}}();c.sqlerp=function(){var b=m(),a=m();return function(e,c,f,d,q,h){return k(b,c,q,h),k(a,f,d,h),k(e,b,a,2*h*(1-h)),e}}();c.setAxes=function(){var a=B.create();return function(c,f,k,d){return a[0]=k[0],
a[3]=k[1],a[6]=k[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=-f[0],a[5]=-f[1],a[8]=-f[2],e(c,b(c,a))}}()},function(a,c,d){function h(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function m(b,a,c){var f=a[0],e=a[1],g=a[2],k=a[3],d=a[4],h=a[5],l=a[6],m=a[7],x=a[8],t=a[9],v=a[10],H=a[11],la=a[12],A=a[13],O=a[14];a=a[15];var D=c[0],z=c[1],ba=c[2],I=c[3];return b[0]=D*f+z*d+ba*x+I*la,b[1]=D*e+z*h+ba*t+I*A,b[2]=D*g+z*l+ba*v+
I*O,b[3]=D*k+z*m+ba*H+I*a,D=c[4],z=c[5],ba=c[6],I=c[7],b[4]=D*f+z*d+ba*x+I*la,b[5]=D*e+z*h+ba*t+I*A,b[6]=D*g+z*l+ba*v+I*O,b[7]=D*k+z*m+ba*H+I*a,D=c[8],z=c[9],ba=c[10],I=c[11],b[8]=D*f+z*d+ba*x+I*la,b[9]=D*e+z*h+ba*t+I*A,b[10]=D*g+z*l+ba*v+I*O,b[11]=D*k+z*m+ba*H+I*a,D=c[12],z=c[13],ba=c[14],I=c[15],b[12]=D*f+z*d+ba*x+I*la,b[13]=D*e+z*h+ba*t+I*A,b[14]=D*g+z*l+ba*v+I*O,b[15]=D*k+z*m+ba*H+I*a,b}function l(b,a,c){var f=a[0],e=a[1],g=a[2],k=a[3],d=f+f,h=e+e,l=g+g;a=f*d;var m=f*h,f=f*l,x=e*h,e=e*l,g=g*l,
d=k*d,h=k*h,k=k*l;return b[0]=1-(x+g),b[1]=m+k,b[2]=f-h,b[3]=0,b[4]=m-k,b[5]=1-(a+g),b[6]=e+d,b[7]=0,b[8]=f+h,b[9]=e-d,b[10]=1-(a+x),b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b}function f(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b[3]=a[3]-c[3],b[4]=a[4]-c[4],b[5]=a[5]-c[5],b[6]=a[6]-c[6],b[7]=a[7]-c[7],b[8]=a[8]-c[8],b[9]=a[9]-c[9],b[10]=a[10]-c[10],b[11]=a[11]-c[11],b[12]=a[12]-c[12],b[13]=a[13]-c[13],b[14]=a[14]-c[14],b[15]=a[15]-c[15],b}Object.defineProperty(c,"__esModule",
{value:!0});c.sub=c.mul=void 0;c.create=function(){var b=new k.ARRAY_TYPE(16);k.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0);return b[0]=1,b[5]=1,b[10]=1,b[15]=1,b};c.clone=function(b){var a=new k.ARRAY_TYPE(16);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};c.copy=function(b,a){return b[0]=a[0],
b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};c.fromValues=function(b,a,c,f,e,g,d,h,l,m,K,x,t,v,H,D){var A=new k.ARRAY_TYPE(16);return A[0]=b,A[1]=a,A[2]=c,A[3]=f,A[4]=e,A[5]=g,A[6]=d,A[7]=h,A[8]=l,A[9]=m,A[10]=K,A[11]=x,A[12]=t,A[13]=v,A[14]=H,A[15]=D,A};c.set=function(b,a,c,f,e,g,k,d,h,l,m,x,t,v,H,A,D){return b[0]=a,b[1]=c,b[2]=f,b[3]=e,b[4]=g,b[5]=k,b[6]=d,b[7]=h,b[8]=l,b[9]=m,
b[10]=x,b[11]=t,b[12]=v,b[13]=H,b[14]=A,b[15]=D,b};c.identity=h;c.transpose=function(b,a){if(b===a){var c=a[1],f=a[2],e=a[3],g=a[6],k=a[7],d=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=f;b[9]=g;b[11]=a[14];b[12]=e;b[13]=k;b[14]=d}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};c.invert=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=a[4],
d=a[5],h=a[6],l=a[7],m=a[8],x=a[9],t=a[10],v=a[11],H=a[12],A=a[13],D=a[14],O=a[15],oa=c*d-f*k,z=c*h-e*k,ba=c*l-g*k,I=f*h-e*d,V=f*l-g*d,J=e*l-g*h,ja=m*A-x*H,Z=m*D-t*H,ka=m*O-v*H,ma=x*D-t*A,Sa=x*O-v*A,Db=t*O-v*D,ea=oa*Db-z*Sa+ba*ma+I*ka-V*Z+J*ja;return ea?(ea=1/ea,b[0]=(d*Db-h*Sa+l*ma)*ea,b[1]=(e*Sa-f*Db-g*ma)*ea,b[2]=(A*J-D*V+O*I)*ea,b[3]=(t*V-x*J-v*I)*ea,b[4]=(h*ka-k*Db-l*Z)*ea,b[5]=(c*Db-e*ka+g*Z)*ea,b[6]=(D*ba-H*J-O*z)*ea,b[7]=(m*J-t*ba+v*z)*ea,b[8]=(k*Sa-d*ka+l*ja)*ea,b[9]=(f*ka-c*Sa-g*ja)*ea,
b[10]=(H*V-A*ba+O*oa)*ea,b[11]=(x*ba-m*V-v*oa)*ea,b[12]=(d*Z-k*ma-h*ja)*ea,b[13]=(c*ma-f*Z+e*ja)*ea,b[14]=(A*z-H*I-D*oa)*ea,b[15]=(m*I-x*z+t*oa)*ea,b):null};c.adjoint=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=a[4],d=a[5],h=a[6],l=a[7],m=a[8],x=a[9],t=a[10],v=a[11],H=a[12],A=a[13],D=a[14],O=a[15];return b[0]=d*(t*O-v*D)-x*(h*O-l*D)+A*(h*v-l*t),b[1]=-(f*(t*O-v*D)-x*(e*O-g*D)+A*(e*v-g*t)),b[2]=f*(h*O-l*D)-d*(e*O-g*D)+A*(e*l-g*h),b[3]=-(f*(h*v-l*t)-d*(e*v-g*t)+x*(e*l-g*h)),b[4]=-(k*(t*O-v*D)-m*
(h*O-l*D)+H*(h*v-l*t)),b[5]=c*(t*O-v*D)-m*(e*O-g*D)+H*(e*v-g*t),b[6]=-(c*(h*O-l*D)-k*(e*O-g*D)+H*(e*l-g*h)),b[7]=c*(h*v-l*t)-k*(e*v-g*t)+m*(e*l-g*h),b[8]=k*(x*O-v*A)-m*(d*O-l*A)+H*(d*v-l*x),b[9]=-(c*(x*O-v*A)-m*(f*O-g*A)+H*(f*v-g*x)),b[10]=c*(d*O-l*A)-k*(f*O-g*A)+H*(f*l-g*d),b[11]=-(c*(d*v-l*x)-k*(f*v-g*x)+m*(f*l-g*d)),b[12]=-(k*(x*D-t*A)-m*(d*D-h*A)+H*(d*t-h*x)),b[13]=c*(x*D-t*A)-m*(f*D-e*A)+H*(f*t-e*x),b[14]=-(c*(d*D-h*A)-k*(f*D-e*A)+H*(f*h-e*d)),b[15]=c*(d*t-h*x)-k*(f*t-e*x)+m*(f*h-e*d),b};c.determinant=
function(b){var a=b[0],c=b[1],f=b[2],e=b[3],g=b[4],k=b[5],d=b[6],h=b[7],l=b[8],m=b[9],x=b[10],t=b[11],v=b[12],H=b[13],A=b[14];b=b[15];return(a*k-c*g)*(x*b-t*A)-(a*d-f*g)*(m*b-t*H)+(a*h-e*g)*(m*A-x*H)+(c*d-f*k)*(l*b-t*v)-(c*h-e*k)*(l*A-x*v)+(f*h-e*d)*(l*H-m*v)};c.multiply=m;c.translate=function(b,a,c){var f=c[0],e=c[1];c=c[2];var g=void 0,k=void 0,d=void 0,h=void 0,l=void 0,m=void 0,x=void 0,t=void 0,v=void 0,H=void 0,A=void 0,D=void 0;a===b?(b[12]=a[0]*f+a[4]*e+a[8]*c+a[12],b[13]=a[1]*f+a[5]*e+a[9]*
c+a[13],b[14]=a[2]*f+a[6]*e+a[10]*c+a[14],b[15]=a[3]*f+a[7]*e+a[11]*c+a[15]):(g=a[0],k=a[1],d=a[2],h=a[3],l=a[4],m=a[5],x=a[6],t=a[7],v=a[8],H=a[9],A=a[10],D=a[11],b[0]=g,b[1]=k,b[2]=d,b[3]=h,b[4]=l,b[5]=m,b[6]=x,b[7]=t,b[8]=v,b[9]=H,b[10]=A,b[11]=D,b[12]=g*f+l*e+v*c+a[12],b[13]=k*f+m*e+H*c+a[13],b[14]=d*f+x*e+A*c+a[14],b[15]=h*f+t*e+D*c+a[15]);return b};c.scale=function(b,a,c){var f=c[0],e=c[1];c=c[2];return b[0]=a[0]*f,b[1]=a[1]*f,b[2]=a[2]*f,b[3]=a[3]*f,b[4]=a[4]*e,b[5]=a[5]*e,b[6]=a[6]*e,b[7]=
a[7]*e,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};c.rotate=function(b,a,c,f){var e=f[0],g=f[1];f=f[2];var d=Math.sqrt(e*e+g*g+f*f),h=void 0,l=void 0,m=void 0,t=void 0,x=void 0,U=void 0,v=void 0,H=void 0,A=void 0,D=void 0,O=void 0,oa=void 0,z=void 0,ba=void 0,I=void 0,V=void 0,J=void 0,ja=void 0,Z=void 0,ka=void 0,ma=void 0,Sa=void 0,l=h=void 0;if(d<k.EPSILON)return null;e*=d=1/d;g*=d;f*=d;h=Math.sin(c);l=Math.cos(c);m=1-l;t=a[0];x=a[1];U=
a[2];v=a[3];H=a[4];A=a[5];D=a[6];O=a[7];oa=a[8];z=a[9];ba=a[10];I=a[11];V=e*e*m+l;J=g*e*m+f*h;ja=f*e*m-g*h;Z=e*g*m-f*h;ka=g*g*m+l;ma=f*g*m+e*h;Sa=e*f*m+g*h;h=g*f*m-e*h;l=f*f*m+l;b[0]=t*V+H*J+oa*ja;b[1]=x*V+A*J+z*ja;b[2]=U*V+D*J+ba*ja;b[3]=v*V+O*J+I*ja;b[4]=t*Z+H*ka+oa*ma;b[5]=x*Z+A*ka+z*ma;b[6]=U*Z+D*ka+ba*ma;b[7]=v*Z+O*ka+I*ma;b[8]=t*Sa+H*h+oa*l;b[9]=x*Sa+A*h+z*l;b[10]=U*Sa+D*h+ba*l;b[11]=v*Sa+O*h+I*l;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};c.rotateX=function(b,a,c){var f=
Math.sin(c);c=Math.cos(c);var e=a[4],g=a[5],k=a[6],d=a[7],h=a[8],l=a[9],m=a[10],x=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[4]=e*c+h*f,b[5]=g*c+l*f,b[6]=k*c+m*f,b[7]=d*c+x*f,b[8]=h*c-e*f,b[9]=l*c-g*f,b[10]=m*c-k*f,b[11]=x*c-d*f,b};c.rotateY=function(b,a,c){var f=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],k=a[2],d=a[3],h=a[8],l=a[9],m=a[10],x=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],
b[15]=a[15]);return b[0]=e*c-h*f,b[1]=g*c-l*f,b[2]=k*c-m*f,b[3]=d*c-x*f,b[8]=e*f+h*c,b[9]=g*f+l*c,b[10]=k*f+m*c,b[11]=d*f+x*c,b};c.rotateZ=function(b,a,c){var f=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],k=a[2],d=a[3],h=a[4],l=a[5],m=a[6],x=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[0]=e*c+h*f,b[1]=g*c+l*f,b[2]=k*c+m*f,b[3]=d*c+x*f,b[4]=h*c-e*f,b[5]=l*c-g*f,b[6]=m*c-k*f,b[7]=x*c-d*f,b};c.fromTranslation=function(b,a){return b[0]=
1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=a[0],b[13]=a[1],b[14]=a[2],b[15]=1,b};c.fromScaling=function(b,a){return b[0]=a[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=a[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromRotation=function(b,a,c){var f=c[0],e=c[1];c=c[2];var g=Math.sqrt(f*f+e*e+c*c),d=void 0,h=void 0,l=void 0;return g<k.EPSILON?null:(f*=g=1/g,e*=g,c*=g,d=Math.sin(a),h=Math.cos(a),l=1-h,b[0]=f*f*l+h,b[1]=e*f*
l+c*d,b[2]=c*f*l-e*d,b[3]=0,b[4]=f*e*l-c*d,b[5]=e*e*l+h,b[6]=c*e*l+f*d,b[7]=0,b[8]=f*c*l+e*d,b[9]=e*c*l-f*d,b[10]=c*c*l+h,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)};c.fromXRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=f,b[6]=c,b[7]=0,b[8]=0,b[9]=-c,b[10]=f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromYRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=f,b[1]=0,b[2]=-c,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=c,b[9]=0,b[10]=
f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromZRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=f,b[1]=c,b[2]=0,b[3]=0,b[4]=-c,b[5]=f,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromRotationTranslation=l;c.fromQuat2=function(b,a){var c=new k.ARRAY_TYPE(3),f=-a[0],e=-a[1],g=-a[2],d=a[3],h=a[4],m=a[5],u=a[6],t=a[7],x=f*f+e*e+g*g+d*d;0<x?(c[0]=2*(h*d+t*f+m*g-u*e)/x,c[1]=2*(m*d+t*e+u*f-h*g)/x,c[2]=2*(u*d+t*g+h*e-m*f)/x):(c[0]=2*(h*d+t*f+m*g-
u*e),c[1]=2*(m*d+t*e+u*f-h*g),c[2]=2*(u*d+t*g+h*e-m*f));return l(b,a,c),b};c.getTranslation=function(b,a){return b[0]=a[12],b[1]=a[13],b[2]=a[14],b};c.getScaling=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[4],k=a[5],d=a[6],h=a[8],l=a[9],m=a[10];return b[0]=Math.sqrt(c*c+f*f+e*e),b[1]=Math.sqrt(g*g+k*k+d*d),b[2]=Math.sqrt(h*h+l*l+m*m),b};c.getRotation=function(b,a){var c=a[0]+a[5]+a[10],f=0;0<c?(f=2*Math.sqrt(c+1),b[3]=.25*f,b[0]=(a[6]-a[9])/f,b[1]=(a[8]-a[2])/f,b[2]=(a[1]-a[4])/f):a[0]>a[5]&&a[0]>
a[10]?(f=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/f,b[0]=.25*f,b[1]=(a[1]+a[4])/f,b[2]=(a[8]+a[2])/f):a[5]>a[10]?(f=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/f,b[0]=(a[1]+a[4])/f,b[1]=.25*f,b[2]=(a[6]+a[9])/f):(f=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/f,b[0]=(a[8]+a[2])/f,b[1]=(a[6]+a[9])/f,b[2]=.25*f);return b};c.fromRotationTranslationScale=function(b,a,c,f){var e=a[0],g=a[1],k=a[2],d=a[3],h=e+e,l=g+g,m=k+k;a=e*h;var x=e*l,e=e*m,t=g*l,g=g*m,k=k*m,h=d*h,l=d*l,d=d*m,m=f[0],v=
f[1];f=f[2];return b[0]=(1-(t+k))*m,b[1]=(x+d)*m,b[2]=(e-l)*m,b[3]=0,b[4]=(x-d)*v,b[5]=(1-(a+k))*v,b[6]=(g+h)*v,b[7]=0,b[8]=(e+l)*f,b[9]=(g-h)*f,b[10]=(1-(a+t))*f,b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b};c.fromRotationTranslationScaleOrigin=function(b,a,c,f,e){var g=a[0],k=a[1],d=a[2],h=a[3],l=g+g,m=k+k,x=d+d;a=g*l;var t=g*m,v=g*x,g=k*m,k=k*x,H=d*x,d=h*l,m=h*m,A=h*x,D=f[0],O=f[1],x=f[2];f=e[0];h=e[1];e=e[2];var l=(1-(g+H))*D,oa=(t+A)*D,D=(v-m)*D,t=(t-A)*O,H=(1-(a+H))*O,O=(k+d)*O,v=(v+m)*
x,k=(k-d)*x;a=(1-(a+g))*x;return b[0]=l,b[1]=oa,b[2]=D,b[3]=0,b[4]=t,b[5]=H,b[6]=O,b[7]=0,b[8]=v,b[9]=k,b[10]=a,b[11]=0,b[12]=c[0]+f-(l*f+t*h+v*e),b[13]=c[1]+h-(oa*f+H*h+k*e),b[14]=c[2]+e-(D*f+O*h+a*e),b[15]=1,b};c.fromQuat=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=c+c,d=f+f,h=e+e,c=c*k,l=f*k,f=f*d,m=e*k,x=e*d,e=e*h,k=g*k,d=g*d,g=g*h;return b[0]=1-f-e,b[1]=l+g,b[2]=m-d,b[3]=0,b[4]=l-g,b[5]=1-c-e,b[6]=x+k,b[7]=0,b[8]=m+d,b[9]=x-k,b[10]=1-c-f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.frustum=
function(b,a,c,f,e,g,k){var d=1/(c-a),h=1/(e-f),l=1/(g-k);return b[0]=2*g*d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=2*g*h,b[6]=0,b[7]=0,b[8]=(c+a)*d,b[9]=(e+f)*h,b[10]=(k+g)*l,b[11]=-1,b[12]=0,b[13]=0,b[14]=k*g*2*l,b[15]=0,b};c.perspective=function(b,a,c,f,e){a=1/Math.tan(a/2);var g=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=e&&e!==1/0?(g=1/(f-e),b[10]=(e+f)*g,b[14]=2*e*f*g):(b[10]=-1,b[14]=-2*f);return b};c.perspectiveFromFieldOfView=
function(b,a,c,f){var e=Math.tan(a.upDegrees*Math.PI/180),g=Math.tan(a.downDegrees*Math.PI/180),k=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var d=2/(k+a),h=2/(e+g);return b[0]=d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=h,b[6]=0,b[7]=0,b[8]=-(k-a)*d*.5,b[9]=(e-g)*h*.5,b[10]=f/(c-f),b[11]=-1,b[12]=0,b[13]=0,b[14]=f*c/(c-f),b[15]=0,b};c.ortho=function(b,a,c,f,e,g,k){var d=1/(a-c),h=1/(f-e),l=1/(g-k);return b[0]=-2*d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*h,b[6]=0,b[7]=0,b[8]=0,
b[9]=0,b[10]=2*l,b[11]=0,b[12]=(a+c)*d,b[13]=(e+f)*h,b[14]=(k+g)*l,b[15]=1,b};c.lookAt=function(b,a,c,f){var e=void 0,g=void 0,d=void 0,l=void 0,m=void 0,u=void 0,t=void 0,x=void 0,U=void 0,v=void 0,H=a[0],A=a[1];a=a[2];d=f[0];l=f[1];f=f[2];t=c[0];x=c[1];c=c[2];if(Math.abs(H-t)<k.EPSILON&&Math.abs(A-x)<k.EPSILON&&Math.abs(a-c)<k.EPSILON)return h(b);t=H-t;x=A-x;U=a-c;v=1/Math.sqrt(t*t+x*x+U*U);e=l*(U*=v)-f*(x*=v);g=f*(t*=v)-d*U;d=d*x-l*t;(v=Math.sqrt(e*e+g*g+d*d))?(e*=v=1/v,g*=v,d*=v):(e=0,g=0,d=0);
l=x*d-U*g;m=U*e-t*d;u=t*g-x*e;(v=Math.sqrt(l*l+m*m+u*u))?(l*=v=1/v,m*=v,u*=v):(l=0,m=0,u=0);return b[0]=e,b[1]=l,b[2]=t,b[3]=0,b[4]=g,b[5]=m,b[6]=x,b[7]=0,b[8]=d,b[9]=u,b[10]=U,b[11]=0,b[12]=-(e*H+g*A+d*a),b[13]=-(l*H+m*A+u*a),b[14]=-(t*H+x*A+U*a),b[15]=1,b};c.targetTo=function(b,a,c,f){var e=a[0],g=a[1];a=a[2];var k=f[0],d=f[1],h=f[2];f=e-c[0];var l=g-c[1];c=a-c[2];var m=f*f+l*l+c*c;0<m&&(m=1/Math.sqrt(m),f*=m,l*=m,c*=m);var x=d*c-h*l,h=h*f-k*c,k=k*l-d*f;0<(m=x*x+h*h+k*k)&&(m=1/Math.sqrt(m),x*=m,
h*=m,k*=m);return b[0]=x,b[1]=h,b[2]=k,b[3]=0,b[4]=l*k-c*h,b[5]=c*x-f*k,b[6]=f*h-l*x,b[7]=0,b[8]=f,b[9]=l,b[10]=c,b[11]=0,b[12]=e,b[13]=g,b[14]=a,b[15]=1,b};c.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};c.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],
2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b[4]=a[4]+c[4],b[5]=a[5]+c[5],b[6]=a[6]+c[6],b[7]=a[7]+c[7],b[8]=a[8]+c[8],b[9]=a[9]+c[9],b[10]=a[10]+c[10],b[11]=a[11]+c[11],b[12]=a[12]+c[12],b[13]=a[13]+c[13],b[14]=a[14]+c[14],b[15]=a[15]+c[15],b};c.subtract=f;c.multiplyScalar=function(b,a,c){return b[0]=
a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b[4]=a[4]*c,b[5]=a[5]*c,b[6]=a[6]*c,b[7]=a[7]*c,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12]*c,b[13]=a[13]*c,b[14]=a[14]*c,b[15]=a[15]*c,b};c.multiplyScalarAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b[2]=a[2]+c[2]*f,b[3]=a[3]+c[3]*f,b[4]=a[4]+c[4]*f,b[5]=a[5]+c[5]*f,b[6]=a[6]+c[6]*f,b[7]=a[7]+c[7]*f,b[8]=a[8]+c[8]*f,b[9]=a[9]+c[9]*f,b[10]=a[10]+c[10]*f,b[11]=a[11]+c[11]*f,b[12]=a[12]+c[12]*f,b[13]=a[13]+c[13]*f,b[14]=
a[14]+c[14]*f,b[15]=a[15]+c[15]*f,b};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};c.equals=function(b,a){var c=b[0],f=b[1],e=b[2],g=b[3],d=b[4],h=b[5],l=b[6],m=b[7],t=b[8],x=b[9],U=b[10],v=b[11],H=b[12],A=b[13],D=b[14],O=b[15],oa=a[0],z=a[1],ba=a[2],I=a[3],V=a[4],J=a[5],ja=a[6],Z=a[7],ka=a[8],
ma=a[9],Sa=a[10],Db=a[11],ea=a[12],Oa=a[13],W=a[14],Q=a[15];return Math.abs(c-oa)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(oa))&&Math.abs(f-z)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(e-ba)<=k.EPSILON*Math.max(1,Math.abs(e),Math.abs(ba))&&Math.abs(g-I)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(d-V)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(V))&&Math.abs(h-J)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(J))&&Math.abs(l-ja)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(ja))&&
Math.abs(m-Z)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(Z))&&Math.abs(t-ka)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(ka))&&Math.abs(x-ma)<=k.EPSILON*Math.max(1,Math.abs(x),Math.abs(ma))&&Math.abs(U-Sa)<=k.EPSILON*Math.max(1,Math.abs(U),Math.abs(Sa))&&Math.abs(v-Db)<=k.EPSILON*Math.max(1,Math.abs(v),Math.abs(Db))&&Math.abs(H-ea)<=k.EPSILON*Math.max(1,Math.abs(H),Math.abs(ea))&&Math.abs(A-Oa)<=k.EPSILON*Math.max(1,Math.abs(A),Math.abs(Oa))&&Math.abs(D-W)<=k.EPSILON*Math.max(1,Math.abs(D),Math.abs(W))&&
Math.abs(O-Q)<=k.EPSILON*Math.max(1,Math.abs(O),Math.abs(Q))};var k=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.mul=m;c.sub=f},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2],e=c[3],g=c[4],n=c[5],p=c[6],r=c[7];c=c[8];var u=b[0],t=b[1],x=b[2],U=b[3],v=b[4],H=b[5],A=b[6],D=b[7];b=b[8];return a[0]=u*d+t*e+x*p,a[1]=u*l+t*g+x*r,a[2]=u*m+t*n+x*c,a[3]=U*d+v*e+H*p,a[4]=U*l+v*g+
H*r,a[5]=U*m+v*n+H*c,a[6]=A*d+D*e+b*p,a[7]=A*l+D*g+b*r,a[8]=A*m+D*n+b*c,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=c[5]-b[5],a[6]=c[6]-b[6],a[7]=c[7]-b[7],a[8]=c[8]-b[8],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new l.ARRAY_TYPE(9);l.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};c.fromMat4=function(a,c){return a[0]=c[0],a[1]=c[1],
a[2]=c[2],a[3]=c[4],a[4]=c[5],a[5]=c[6],a[6]=c[8],a[7]=c[9],a[8]=c[10],a};c.clone=function(a){var c=new l.ARRAY_TYPE(9);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromValues=function(a,c,b,d,h,m,e,g,n){var p=new l.ARRAY_TYPE(9);return p[0]=a,p[1]=c,p[2]=b,p[3]=d,p[4]=h,p[5]=m,p[6]=e,p[7]=g,p[8]=n,p};c.set=function(a,c,b,
d,h,l,e,g,n,m){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a[4]=l,a[5]=e,a[6]=g,a[7]=n,a[8]=m,a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.transpose=function(a,c){if(a===c){var b=c[1],d=c[2],h=c[5];a[1]=c[3];a[2]=c[6];a[3]=b;a[5]=c[7];a[6]=d;a[7]=h}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],n=c[6],m=c[7],r=c[8],u=r*e-g*m,
t=-r*l+g*n,x=m*l-e*n,U=b*u+d*t+h*x;return U?(U=1/U,a[0]=u*U,a[1]=(-r*d+h*m)*U,a[2]=(g*d-h*e)*U,a[3]=t*U,a[4]=(r*b-h*n)*U,a[5]=(-g*b+h*l)*U,a[6]=x*U,a[7]=(-m*b+d*n)*U,a[8]=(e*b-d*l)*U,a):null};c.adjoint=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],n=c[6],m=c[7],r=c[8];return a[0]=e*r-g*m,a[1]=h*m-d*r,a[2]=d*g-h*e,a[3]=g*n-l*r,a[4]=b*r-h*n,a[5]=h*l-b*g,a[6]=l*m-e*n,a[7]=d*n-b*m,a[8]=b*e-d*l,a};c.determinant=function(a){var c=a[3],b=a[4],d=a[5],h=a[6],l=a[7],e=a[8];return a[0]*(e*b-d*
l)+a[1]*(-e*c+d*h)+a[2]*(l*c-b*h)};c.multiply=h;c.translate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4],n=c[5],m=c[6],r=c[7];c=c[8];var u=b[0];b=b[1];return a[0]=d,a[1]=h,a[2]=l,a[3]=e,a[4]=g,a[5]=n,a[6]=u*d+b*e+m,a[7]=u*h+b*g+r,a[8]=u*l+b*n+c,a};c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4],n=c[5],m=c[6],r=c[7];c=c[8];var u=Math.sin(b);b=Math.cos(b);return a[0]=b*d+u*e,a[1]=b*h+u*g,a[2]=b*l+u*n,a[3]=b*e-u*d,a[4]=b*g-u*h,a[5]=b*n-u*l,a[6]=m,a[7]=r,a[8]=c,a};c.scale=function(a,
c,b){var d=b[0];b=b[1];return a[0]=d*c[0],a[1]=d*c[1],a[2]=d*c[2],a[3]=b*c[3],a[4]=b*c[4],a[5]=b*c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=c[0],a[7]=c[1],a[8]=1,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=0,a[3]=-b,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=0,a[4]=c[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromMat2d=function(a,
c){return a[0]=c[0],a[1]=c[1],a[2]=0,a[3]=c[2],a[4]=c[3],a[5]=0,a[6]=c[4],a[7]=c[5],a[8]=1,a};c.fromQuat=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=b+b,g=d+d,n=h+h,b=b*e,m=d*e,d=d*g,r=h*e,u=h*g,h=h*n,e=l*e,g=l*g,l=l*n;return a[0]=1-d-h,a[3]=m-l,a[6]=r+g,a[1]=m+l,a[4]=1-b-h,a[7]=u-e,a[2]=r-g,a[5]=u+e,a[8]=1-b-d,a};c.normalFromMat4=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],n=c[6],m=c[7],r=c[8],u=c[9],t=c[10],x=c[11],U=c[12],v=c[13],H=c[14],A=c[15],D=b*g-d*e,O=b*n-h*e,oa=b*m-l*
e,z=d*n-h*g,ba=d*m-l*g,I=h*m-l*n,V=r*v-u*U,J=r*H-t*U,r=r*A-x*U,ja=u*H-t*v,u=u*A-x*v,t=t*A-x*H;return(x=D*t-O*u+oa*ja+z*r-ba*J+I*V)?(x=1/x,a[0]=(g*t-n*u+m*ja)*x,a[1]=(n*r-e*t-m*J)*x,a[2]=(e*u-g*r+m*V)*x,a[3]=(h*u-d*t-l*ja)*x,a[4]=(b*t-h*r+l*J)*x,a[5]=(d*r-b*u-l*V)*x,a[6]=(v*I-H*ba+A*z)*x,a[7]=(H*oa-U*I-A*O)*x,a[8]=(U*ba-v*oa+A*D)*x,a):null};c.projection=function(a,c,b){return a[0]=2/c,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/b,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};c.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a[6]=c[6]+b[6],a[7]=c[7]+b[7],a[8]=c[8]+b[8],a};c.subtract=m;c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*
b,a[2]=c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a[6]=c[6]*b,a[7]=c[7]*b,a[8]=c[8]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*d,a[6]=c[6]+b[6]*d,a[7]=c[7]+b[7]*d,a[8]=c[8]+b[8]*d,a};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],m=a[3],e=
a[4],g=a[5],n=a[6],p=a[7],r=a[8],u=c[0],t=c[1],x=c[2],A=c[3],v=c[4],H=c[5],D=c[6],sa=c[7],O=c[8];return Math.abs(b-u)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(u))&&Math.abs(d-t)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(h-x)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(m-A)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(e-v)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(g-H)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(H))&&Math.abs(n-D)<=l.EPSILON*
Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(p-sa)<=l.EPSILON*Math.max(1,Math.abs(p),Math.abs(sa))&&Math.abs(r-O)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(O))};var l=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=h;c.sub=m},function(a,c,d){function h(){var b=new y.ARRAY_TYPE(2);return y.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0),b}function m(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-
c[1],b}function l(b,a,c){return b[0]=a[0]*c[0],b[1]=a[1]*c[1],b}function f(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b}function k(b,a){var c=a[0]-b[0],f=a[1]-b[1];return Math.sqrt(c*c+f*f)}function b(b,a){var c=a[0]-b[0],f=a[1]-b[1];return c*c+f*f}function q(b){var a=b[0];b=b[1];return Math.sqrt(a*a+b*b)}function t(b){var a=b[0];b=b[1];return a*a+b*b}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.sqrDist=c.dist=c.div=c.mul=c.sub=c.len=void 0;c.create=h;c.clone=function(b){var a=
new y.ARRAY_TYPE(2);return a[0]=b[0],a[1]=b[1],a};c.fromValues=function(b,a){var c=new y.ARRAY_TYPE(2);return c[0]=b,c[1]=a,c};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b};c.set=function(b,a,c){return b[0]=a,b[1]=c,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b};c.subtract=m;c.multiply=l;c.divide=f;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b};c.min=function(b,a,c){return b[0]=
Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b};c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b};c.scaleAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b};c.distance=k;c.squaredDistance=b;c.length=q;c.squaredLength=t;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=
1/a[1],b};c.normalize=function(b,a){var c=a[0],f=a[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c);return b};c.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]};c.cross=function(b,a,c){a=a[0]*c[1]-a[1]*c[0];return b[0]=b[1]=0,b[2]=a,b};c.lerp=function(b,a,c,f){var d=a[0];a=a[1];return b[0]=d+f*(c[0]-d),b[1]=a+f*(c[1]-a),b};c.random=function(b,a){a=a||1;var c=2*y.RANDOM()*Math.PI;return b[0]=Math.cos(c)*a,b[1]=Math.sin(c)*a,b};c.transformMat2=function(b,a,c){var f=a[0];a=a[1];return b[0]=
c[0]*f+c[2]*a,b[1]=c[1]*f+c[3]*a,b};c.transformMat2d=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[2]*a+c[4],b[1]=c[1]*f+c[3]*a+c[5],b};c.transformMat3=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[3]*a+c[6],b[1]=c[1]*f+c[4]*a+c[7],b};c.transformMat4=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[4]*a+c[12],b[1]=c[1]*f+c[5]*a+c[13],b};c.rotate=function(b,a,c,f){var d=a[0]-c[0];a=a[1]-c[1];var k=Math.sin(f);f=Math.cos(f);return b[0]=d*f-a*k+c[0],b[1]=d*k+a*f+c[1],b};c.angle=
function(b,a){var c=b[0],f=b[1],d=a[0],k=a[1],h=c*c+f*f;0<h&&(h=1/Math.sqrt(h));var l=d*d+k*k;0<l&&(l=1/Math.sqrt(l));c=(c*d+f*k)*h*l;return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=function(b){return"vec2("+b[0]+", "+b[1]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]};c.equals=function(b,a){var c=b[0],f=b[1],d=a[0],k=a[1];return Math.abs(c-d)<=y.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(f-k)<=y.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))};var y=function(b){if(b&&b.__esModule)return b;
var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.len=q;c.sub=m;c.mul=l;c.div=f;c.dist=k;c.sqrDist=b;c.sqrLen=t;c.forEach=function(){var b=h();return function(a,c,f,d,k,h){var l=void 0,m=void 0;c||(c=2);f||(f=0);m=d?Math.min(d*c+f,a.length):a.length;for(l=f;l<m;l+=c)b[0]=a[l],b[1]=a[l+1],k(b,b,h),a[l]=b[0],a[l+1]=b[1];return a}}()},function(a,c,d){function h(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c]);return a["default"]=b,a}function m(b,a,c){var f=.5*c[0],d=.5*c[1];c=.5*c[2];var k=a[0],h=a[1],l=a[2];a=a[3];return b[0]=k,b[1]=h,b[2]=l,b[3]=a,b[4]=f*a+d*l-c*h,b[5]=d*a+c*k-f*l,b[6]=c*a+f*h-d*k,b[7]=-f*k-d*h-c*l,b}function l(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b}function f(b,a,c){var f=a[0],d=a[1],k=a[2],h=a[3],l=c[4],m=c[5],q=c[6],t=c[7],y=a[4],B=a[5],A=a[6];a=a[7];var D=c[0],z=c[1],ba=c[2];c=c[3];return b[0]=f*c+h*D+d*ba-k*
z,b[1]=d*c+h*z+k*D-f*ba,b[2]=k*c+h*ba+f*z-d*D,b[3]=h*c-f*D-d*z-k*ba,b[4]=f*t+h*l+d*q-k*m+y*c+a*D+B*ba-A*z,b[5]=d*t+h*m+k*l-f*q+B*c+a*z+A*D-y*ba,b[6]=k*t+h*q+f*m-d*l+A*c+a*ba+y*z-B*D,b[7]=h*t-f*l-d*m-k*q+a*c-y*D-B*z-A*ba,b}Object.defineProperty(c,"__esModule",{value:!0});c.sqrLen=c.squaredLength=c.len=c.length=c.dot=c.mul=c.setReal=c.getReal=void 0;c.create=function(){var b=new k.ARRAY_TYPE(8);k.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[4]=0,b[5]=0,b[6]=0,b[7]=0);return b[3]=1,b};c.clone=function(b){var a=
new k.ARRAY_TYPE(8);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a};c.fromValues=function(b,a,c,f,d,h,l,m){var q=new k.ARRAY_TYPE(8);return q[0]=b,q[1]=a,q[2]=c,q[3]=f,q[4]=d,q[5]=h,q[6]=l,q[7]=m,q};c.fromRotationTranslationValues=function(b,a,c,f,d,h,l){var m=new k.ARRAY_TYPE(8);m[0]=b;m[1]=a;m[2]=c;m[3]=f;d*=.5;h*=.5;l*=.5;return m[4]=d*f+h*c-l*a,m[5]=h*f+l*b-d*c,m[6]=l*f+d*a-h*b,m[7]=-d*b-h*a-l*c,m};c.fromRotationTranslation=m;c.fromTranslation=function(b,
a){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b[4]=.5*a[0],b[5]=.5*a[1],b[6]=.5*a[2],b[7]=0,b};c.fromRotation=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=0,b[5]=0,b[6]=0,b[7]=0,b};c.fromMat4=function(a,c){var f=b.create();q.getRotation(f,c);var d=new k.ARRAY_TYPE(3);return q.getTranslation(d,c),m(a,f,d),a};c.copy=l;c.identity=function(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b[4]=0,b[5]=0,b[6]=0,b[7]=0,b};c.set=function(b,a,c,f,d,k,h,l,m){return b[0]=a,b[1]=c,b[2]=f,b[3]=d,b[4]=k,b[5]=
h,b[6]=l,b[7]=m,b};c.getDual=function(b,a){return b[0]=a[4],b[1]=a[5],b[2]=a[6],b[3]=a[7],b};c.setDual=function(b,a){return b[4]=a[0],b[5]=a[1],b[6]=a[2],b[7]=a[3],b};c.getTranslation=function(b,a){var c=a[4],f=a[5],d=a[6],k=a[7],h=-a[0],l=-a[1],m=-a[2],q=a[3];return b[0]=2*(c*q+k*h+f*m-d*l),b[1]=2*(f*q+k*l+d*h-c*m),b[2]=2*(d*q+k*m+c*l-f*h),b};c.translate=function(b,a,c){var f=a[0],d=a[1],k=a[2],h=a[3],l=.5*c[0],m=.5*c[1];c=.5*c[2];var q=a[4],t=a[5],y=a[6];a=a[7];return b[0]=f,b[1]=d,b[2]=k,b[3]=
h,b[4]=h*l+d*c-k*m+q,b[5]=h*m+k*l-f*c+t,b[6]=h*c+f*m-d*l+y,b[7]=-f*l-d*m-k*c+a,b};c.rotateX=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],v=c[6],t=c[7],y=m*l+t*d+q*h-v*k,B=q*l+t*k+v*d-m*h,A=v*l+t*h+m*k-q*d,m=t*l-m*d-q*k-v*h;return b.rotateX(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=y*l+m*d+B*h-A*k,a[5]=B*l+m*k+A*d-y*h,a[6]=A*l+m*h+y*k-B*d,a[7]=m*l-y*d-B*k-A*h,a};c.rotateY=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],v=c[6],t=c[7],y=m*l+t*d+q*h-v*k,B=q*l+t*k+v*
d-m*h,A=v*l+t*h+m*k-q*d,m=t*l-m*d-q*k-v*h;return b.rotateY(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=y*l+m*d+B*h-A*k,a[5]=B*l+m*k+A*d-y*h,a[6]=A*l+m*h+y*k-B*d,a[7]=m*l-y*d-B*k-A*h,a};c.rotateZ=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],v=c[6],t=c[7],y=m*l+t*d+q*h-v*k,B=q*l+t*k+v*d-m*h,A=v*l+t*h+m*k-q*d,m=t*l-m*d-q*k-v*h;return b.rotateZ(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=y*l+m*d+B*h-A*k,a[5]=B*l+m*k+A*d-y*h,a[6]=A*l+m*h+y*k-B*d,a[7]=m*l-y*d-B*k-A*h,a};c.rotateByQuatAppend=
function(b,a,c){var f=c[0],d=c[1],k=c[2];c=c[3];var h=a[0],l=a[1],m=a[2],q=a[3];return b[0]=h*c+q*f+l*k-m*d,b[1]=l*c+q*d+m*f-h*k,b[2]=m*c+q*k+h*d-l*f,b[3]=q*c-h*f-l*d-m*k,h=a[4],l=a[5],m=a[6],q=a[7],b[4]=h*c+q*f+l*k-m*d,b[5]=l*c+q*d+m*f-h*k,b[6]=m*c+q*k+h*d-l*f,b[7]=q*c-h*f-l*d-m*k,b};c.rotateByQuatPrepend=function(b,a,c){var f=a[0],d=a[1],k=a[2];a=a[3];var h=c[0],l=c[1],m=c[2],q=c[3];return b[0]=f*q+a*h+d*m-k*l,b[1]=d*q+a*l+k*h-f*m,b[2]=k*q+a*m+f*l-d*h,b[3]=a*q-f*h-d*l-k*m,h=c[4],l=c[5],m=c[6],q=
c[7],b[4]=f*q+a*h+d*m-k*l,b[5]=d*q+a*l+k*h-f*m,b[6]=k*q+a*m+f*l-d*h,b[7]=a*q-f*h-d*l-k*m,b};c.rotateAroundAxis=function(b,a,c,f){if(Math.abs(f)<k.EPSILON)return l(b,a);var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);f*=.5;var h=Math.sin(f),m=h*c[0]/d,q=h*c[1]/d;c=h*c[2]/d;f=Math.cos(f);var d=a[0],h=a[1],t=a[2],v=a[3];b[0]=d*f+v*m+h*c-t*q;b[1]=h*f+v*q+t*m-d*c;b[2]=t*f+v*c+d*q-h*m;b[3]=v*f-d*m-h*q-t*c;d=a[4];h=a[5];t=a[6];a=a[7];return b[4]=d*f+a*m+h*c-t*q,b[5]=h*f+a*q+t*m-d*c,b[6]=t*f+a*c+d*q-h*m,b[7]=
a*f-d*m-h*q-t*c,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b[4]=a[4]+c[4],b[5]=a[5]+c[5],b[6]=a[6]+c[6],b[7]=a[7]+c[7],b};c.multiply=f;c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b[4]=a[4]*c,b[5]=a[5]*c,b[6]=a[6]*c,b[7]=a[7]*c,b};c.lerp=function(b,a,c,f){var d=1-f;0>t(a,c)&&(f=-f);return b[0]=a[0]*d+c[0]*f,b[1]=a[1]*d+c[1]*f,b[2]=a[2]*d+c[2]*f,b[3]=a[3]*d+c[3]*f,b[4]=a[4]*d+c[4]*f,b[5]=a[5]*d+c[5]*f,b[6]=a[6]*d+c[6]*
f,b[7]=a[7]*d+c[7]*f,b};c.invert=function(b,a){var c=y(a);return b[0]=-a[0]/c,b[1]=-a[1]/c,b[2]=-a[2]/c,b[3]=a[3]/c,b[4]=-a[4]/c,b[5]=-a[5]/c,b[6]=-a[6]/c,b[7]=a[7]/c,b};c.conjugate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b[4]=-a[4],b[5]=-a[5],b[6]=-a[6],b[7]=a[7],b};c.normalize=function(b,a){var c=y(a);if(0<c){var c=Math.sqrt(c),f=a[0]/c,d=a[1]/c,k=a[2]/c,h=a[3]/c,l=a[4],m=a[5],q=a[6],t=a[7],B=f*l+d*m+k*q+h*t;b[0]=f;b[1]=d;b[2]=k;b[3]=h;b[4]=(l-f*B)/c;b[5]=(m-d*B)/c;b[6]=
(q-k*B)/c;b[7]=(t-h*B)/c}return b};c.str=function(b){return"quat2("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]};c.equals=function(b,a){var c=b[0],f=b[1],d=b[2],h=b[3],l=b[4],m=b[5],q=b[6],t=b[7],y=a[0],B=a[1],A=a[2],D=a[3],oa=a[4],z=a[5],ba=a[6],I=a[7];return Math.abs(c-y)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-
B)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(d-A)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-D)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(l-oa)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(oa))&&Math.abs(m-z)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(q-ba)<=k.EPSILON*Math.max(1,Math.abs(q),Math.abs(ba))&&Math.abs(t-I)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(I))};var k=h(d(0)),b=h(d(3)),q=h(d(4));c.getReal=b.copy;c.setReal=b.copy;c.mul=
f;var t=c.dot=b.dot;a=c.length=b.length;var y=(c.len=a,c.squaredLength=b.squaredLength);c.sqrLen=y},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2],e=c[3],g=c[4];c=c[5];var n=b[0],p=b[1],r=b[2],t=b[3],A=b[4];b=b[5];return a[0]=d*n+m*p,a[1]=l*n+e*p,a[2]=d*r+m*t,a[3]=l*r+e*t,a[4]=d*A+m*b+g,a[5]=l*A+e*b+c,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=c[5]-b[5],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;
c.create=function(){var a=new l.ARRAY_TYPE(6);l.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=new l.ARRAY_TYPE(6);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};c.fromValues=function(a,c,b,d,h,m){var e=new l.ARRAY_TYPE(6);return e[0]=a,e[1]=c,e[2]=b,e[3]=
d,e[4]=h,e[5]=m,e};c.set=function(a,c,b,d,h,l,e){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a[4]=l,a[5]=e,a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],m=b*l-d*h;return m?(m=1/m,a[0]=l*m,a[1]=-d*m,a[2]=-h*m,a[3]=b*m,a[4]=(h*g-l*e)*m,a[5]=(d*e-b*g)*m,a):null};c.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};c.multiply=h;c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4];c=c[5];var m=Math.sin(b);b=Math.cos(b);return a[0]=d*b+l*m,a[1]=h*b+e*m,a[2]=d*-m+l*b,a[3]=h*
-m+e*b,a[4]=g,a[5]=c,a};c.scale=function(a,c,b){var d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],m=b[0];b=b[1];return a[0]=c[0]*m,a[1]=d*m,a[2]=h*b,a[3]=l*b,a[4]=e,a[5]=g,a};c.translate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4];c=c[5];var m=b[0];b=b[1];return a[0]=d,a[1]=h,a[2]=l,a[3]=e,a[4]=d*m+l*b+g,a[5]=h*m+e*b+c,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a[4]=0,a[5]=0,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=
c[1],a[4]=0,a[5]=0,a};c.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=c[0],a[5]=c[1],a};c.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a};c.subtract=m;c.multiplyScalar=function(a,
c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*d,a};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],m=a[3],e=a[4],g=a[5],n=c[0],p=c[1],r=c[2],t=c[3],A=c[4],x=c[5];return Math.abs(b-n)<=l.EPSILON*Math.max(1,
Math.abs(b),Math.abs(n))&&Math.abs(d-p)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(p))&&Math.abs(h-r)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(r))&&Math.abs(m-t)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(t))&&Math.abs(e-A)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&Math.abs(g-x)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(x))};var l=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));
c.mul=h;c.sub=m},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2];c=c[3];var e=b[0],g=b[1],n=b[2];b=b[3];return a[0]=d*e+m*g,a[1]=l*e+c*g,a[2]=d*n+m*b,a[3]=l*n+c*b,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new l.ARRAY_TYPE(4);l.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=new l.ARRAY_TYPE(4);return c[0]=
a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a};c.fromValues=function(a,c,b,d){var h=new l.ARRAY_TYPE(4);return h[0]=a,h[1]=c,h[2]=b,h[3]=d,h};c.set=function(a,c,b,d,h){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a};c.transpose=function(a,c){if(a===c){var b=c[1];a[1]=c[2];a[2]=b}else a[0]=c[0],a[1]=c[2],a[2]=c[1],a[3]=c[3];return a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],
e=b*l-h*d;return e?(e=1/e,a[0]=l*e,a[1]=-d*e,a[2]=-h*e,a[3]=b*e,a):null};c.adjoint=function(a,c){var b=c[0];return a[0]=c[3],a[1]=-c[1],a[2]=-c[2],a[3]=b,a};c.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};c.multiply=h;c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2];c=c[3];var e=Math.sin(b);b=Math.cos(b);return a[0]=d*b+l*e,a[1]=h*b+c*e,a[2]=d*-e+l*b,a[3]=h*-e+c*b,a};c.scale=function(a,c,b){var d=c[1],h=c[2],l=c[3],e=b[0];b=b[1];return a[0]=c[0]*e,a[1]=d*e,a[2]=h*b,a[3]=l*b,a};c.fromRotation=
function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=c[1],a};c.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};c.LDU=function(a,c,b,d){return a[2]=d[2]/d[0],b[0]=d[0],b[1]=d[1],b[3]=d[3]-a[2]*b[1],[a,c,b]};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],
a[3]=c[3]+b[3],a};c.subtract=m;c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],m=a[3],e=c[0],g=c[1],n=c[2],p=c[3];return Math.abs(b-e)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))&&Math.abs(d-g)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(h-n)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(m-p)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(p))};c.multiplyScalar=function(a,c,b){return a[0]=
c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a};var l=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=h;c.sub=m},function(a,c,d){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=
a,b}Object.defineProperty(c,"__esModule",{value:!0});c.vec4=c.vec3=c.vec2=c.quat2=c.quat=c.mat4=c.mat3=c.mat2d=c.mat2=c.glMatrix=void 0;a=h(d(0));var m=h(d(9)),l=h(d(8)),f=h(d(5)),k=h(d(4)),b=h(d(3)),q=h(d(7)),t=h(d(6)),y=h(d(2));d=h(d(1));c.glMatrix=a;c.mat2=m;c.mat2d=l;c.mat3=f;c.mat4=k;c.quat=b;c.quat2=q;c.vec2=t;c.vec3=y;c.vec4=d}])})},{}],75:[function(d,h,t){(function(a){function c(){l.forEach(function(a){f[m[a]]=!1})}function t(a){f[m[a.keyCode]]=!1}function D(a){f[m[a.keyCode]]=!0}var m=d("vkey"),
l=Object.keys(m),f={};c();h.exports=function(a){return a?f[a]:f};a.browser&&(window.addEventListener("keydown",D,!1),window.addEventListener("keyup",t,!1),window.addEventListener("blur",c,!1))}).call(this,d("_process"))},{_process:77,vkey:80}],76:[function(d,h,t){function a(a,c,d){this.rotation=a;this.center=c;this.distance=d}function c(a,c){var d=c[0],f=c[1],d=d*d+f*f;1<d&&(d=1);a[0]=-c[0];a[1]=c[1];a[2]=c[2]||Math.sqrt(1-d);a[3]=0}d=d("gl-matrix");var A=d.vec3,D=d.mat3,m=d.mat4,l=d.quat,f=new Float32Array(16),
k=new Float32Array(16);d=a.prototype;d.view=function(a){a||(a=m.create());k[0]=k[1]=0;k[2]=-this.distance;m.fromRotationTranslation(a,l.conjugate(f,this.rotation),k);m.translate(a,a,A.negate(f,this.center));return a};d.lookAt=function(a,c,d){m.lookAt(f,a,c,d);D.fromMat4(f,f);l.fromMat3(this.rotation,f);A.copy(this.center,c);this.distance=A.distance(a,c)};d.pan=function(a){var c=this.distance;f[0]=-c*(a[0]||0);f[1]=c*(a[1]||0);f[2]=c*(a[2]||0);A.transformQuat(f,f,this.rotation);A.add(this.center,this.center,
f)};d.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};d.rotate=function(a,d){c(f,a);c(k,d);l.invert(k,k);l.multiply(f,f,k);1E-6>l.length(f)||(l.multiply(this.rotation,this.rotation,f),l.normalize(this.rotation,this.rotation))};h.exports=function(b,c,d){b=b||[0,0,-1];c=c||[0,0,0];d=d||[0,1,0];var f=new a(l.create(),A.create(),1);f.lookAt(b,c,d);return f}},{"gl-matrix":74}],77:[function(d,h,t){function a(){throw Error("setTimeout has not been defined");}function c(){throw Error("clearTimeout has not been defined");
}function A(c){if(b===setTimeout)return setTimeout(c,0);if((b===a||!b)&&setTimeout)return b=setTimeout,setTimeout(c,0);try{return b(c,0)}catch(e){try{return b.call(null,c,0)}catch(d){return b.call(this,c,0)}}}function D(a){if(q===clearTimeout)return clearTimeout(a);if((q===c||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(b){try{return q.call(null,a)}catch(e){return q.call(this,a)}}}function m(){y&&e&&(y=!1,e.length?B=e.concat(B):g=-1,B.length&&l())}function l(){if(!y){var a=
A(m);y=!0;for(var b=B.length;b;){e=B;for(B=[];++g<b;)e&&e[g].run();g=-1;b=B.length}e=null;y=!1;D(a)}}function f(a,b){this.fun=a;this.array=b}function k(){}d=h.exports={};var b,q;try{b="function"===typeof setTimeout?setTimeout:a}catch(n){b=a}try{q="function"===typeof clearTimeout?clearTimeout:c}catch(n){q=c}var B=[],y=!1,e,g=-1;d.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];B.push(new f(a,b));1!==B.length||y||A(l)};
f.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=k;d.addListener=k;d.once=k;d.off=k;d.removeListener=k;d.removeAllListeners=k;d.emit=k;d.prependListener=k;d.prependOnceListener=k;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");};d.umask=function(){return 0}},
{}],78:[function(d,h,t){function a(a){throw Error("resl: "+a);}function c(c,d,b){Object.keys(c).forEach(function(c){0>d.indexOf(c)&&a('invalid parameter "'+c+'" in '+b)})}function A(a,c){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=c}var D=["manifest","onDone","onProgress","onError"],m=["type","src","stream","credentials","parser"],l=["onData","onDone"];h.exports=function(d){function h(b,c){if(b in d){var e=d[b];"function"!==typeof e&&a('invalid callback "'+b+'"');return e}return null}
function b(a){function b(){if(!(2>g.readyState||1===k.state||-1===k.state)){if(200!==g.status)return t('error loading resource "'+a.name+'"');if(2<g.readyState&&0===k.state){var e;e="binary"===a.type?g.response:g.responseText;if(f.data)try{h=f.data(e)}catch(d){return t(d)}else h=e}if(3<g.readyState&&0===k.state){if(f.done)try{h=f.done()}catch(d){return t(d)}k.state=1}r[c]=h;k.progress=.75*k.progress+.25;k.ready=a.stream&&!!h||1===k.state;y()}}var c=a.name,e=a.stream,d="binary"===a.type,f=a.parser,
g=new XMLHttpRequest,h=null,k=new A(c,function(){1!==k.state&&-1!==k.state&&(g.onreadystatechange=null,g.abort(),k.state=-1)});g.onreadystatechange=e?b:function(){4===g.readyState&&b()};d&&(g.responseType="arraybuffer");a.credentials&&(g.withCredentials=!0);g.open("GET",a.src,!0);g.send();return k}function q(a,b){function c(){if(0===l.state)if(k.data)try{m=k.data(b)}catch(a){return t(a)}else m=b}function e(a){c();r[h]=m;l.progress=a.lengthComputable?Math.max(l.progress,a.loaded/a.total):.75*l.progress+
.25;y(h)}function d(){c();if(0===l.state){if(k.done)try{m=k.done()}catch(a){return t(a)}l.state=1}l.progress=1;l.ready=!0;r[h]=m;g();y("finish "+h)}function f(){t('error loading asset "'+h+'"')}function g(){a.stream&&b.removeEventListener("progress",e);"image"===a.type?b.addEventListener("load",d):b.addEventListener("canplay",d);b.removeEventListener("error",f)}var h=a.name,k=a.parser,l=new A(h,function(){1!==l.state&&-1!==l.state&&(l.state=-1,g(),b.src="")}),m=b;a.stream&&b.addEventListener("progress",
e);if("image"===a.type)b.addEventListener("load",d);else{var n=!1,q=!1;b.addEventListener("loadedmetadata",function(){q=!0;n&&d()});b.addEventListener("canplay",function(){n=!0;q&&d()})}b.addEventListener("error",f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return l}function t(a){-1!==u&&1!==u&&(u=-1,x.forEach(function(a){a.cancel()}),p?"string"===typeof a?p(Error("resl: "+a)):p(a):console.error("resl error:",a))}function y(a){if(-1!==u&&1!==u){var b=0,c=0;x.forEach(function(a){a.ready&&
(c+=1);b+=a.progress});c===x.length?(u=1,g(r)):n&&n(b/x.length,a)}}"object"===typeof d&&d||a("invalid or missing configuration");c(d,D,"config");var e=d.manifest;"object"===typeof e&&e||a("missing manifest");var g=h("onDone");g||a("missing onDone() callback");var n=h("onProgress"),p=h("onError"),r={},u=0,K={text:b,binary:function(a){return b(a)},image:function(a){return q(a,document.createElement("img"))},video:function(a){return q(a,document.createElement("video"))},audio:function(a){return q(a,
document.createElement("audio"))}},x=Object.keys(e).map(function(b){function d(b,c){if(b in f.parser){var e=f.parser[b];"function"!==typeof e&&a("invalid parser callback "+b+' for asset "'+b+'"');return e}return c}var f=e[b];"string"===typeof f?f={src:f}:"object"===typeof f&&f||a('invalid asset definition "'+b+'"');c(f,m,'asset "'+b+'"');var g={};"parser"in f&&("function"===typeof f.parser?g={data:f.parser}:"object"===typeof f.parser&&f.parser?(c(g,l,'parser for asset "'+b+'"'),"onData"in g||a('missing onData callback for parser in asset "'+
b+'"'),g={data:d("onData"),done:d("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,e,d){c in f&&(d=f[c]);0>e.indexOf(d)&&a("invalid "+c+' "'+d+'" for asset "'+b+'", possible values: '+e);return d}("type",Object.keys(K),"text"),stream:!!f.stream,credentials:!!f.credentials,src:function(c,e,d){c in f?d=f[c]:e&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof d&&a("invalid "+c+' for asset "'+b+'", must be a string');return d}("src",!0,""),parser:g}}).map(function(a){return K[a.type](a)});
0===x.length&&setTimeout(function(){y("done")},1)}},{}],79:[function(d,h,t){var a=d("events/"),c=d("wheel");h.exports=function(d,h){function m(){l[0]=l[1]=l[2]=0}var l=new a;l.flush=m;m();if("undefined"===typeof window)return l;d=d||window;c(d,function(a){var c=1===a.deltaMode?12:1;l[0]+=c*(a.deltaX||0);l[1]+=c*(a.deltaY||0);l[2]+=c*(a.deltaZ||0);l.emit("scroll",l);h&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return l}},{"events/":43,wheel:81}],80:[function(d,
h,t){var a="undefined"!==typeof window?window.navigator.userAgent:"";d=/OS X/.test(a);t=/Opera/.test(a);a=!/like Gecko/.test(a)&&!t;d=h.exports={0:d?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",
31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:d?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",
164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:d&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",
222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:t?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(h=58;65>h;++h)d[h]=String.fromCharCode(h);for(h=48;58>h;++h)d[h]=h-48+"";for(h=65;91>h;++h)d[h]=String.fromCharCode(h);for(h=96;106>h;++h)d[h]="<num-"+(h-96)+">";for(h=112;136>h;++h)d[h]="F"+(h-111)},{}],81:[function(d,h,t){function a(a,d,f,h){a[A](c+d,"wheel"==D?f:function(a){!a&&
(a=window.event);var c={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==D?(c.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(c.deltaX=-.025*a.wheelDeltaX)):c.deltaY=a.detail;return f(c)},h||!1)}h.exports=function(c,d,f){a(c,D,d,f);"DOMMouseScroll"==D&&a(c,"MozMousePixelScroll",d,f)};var c="",A,D;window.addEventListener?A="addEventListener":
(A="attachEvent",c="on");D="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],82:[function(d,h,t){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var c=d("./lib/util/check"),A=d("./lib/util/extend"),D=d("./lib/dynamic"),m=d("./lib/util/raf"),l=d("./lib/util/clock"),f=d("./lib/strings"),k=d("./lib/webgl"),b=d("./lib/extension"),q=d("./lib/limits"),B=d("./lib/buffer"),y=d("./lib/elements"),e=d("./lib/texture"),
g=d("./lib/renderbuffer"),n=d("./lib/framebuffer"),p=d("./lib/attribute"),r=d("./lib/shader"),u=d("./lib/read"),K=d("./lib/core"),x=d("./lib/stats"),U=d("./lib/timer");h.exports=function(d){function h(){if(0===ob.length)Q&&Q.update(),qc=null;else{qc=m.next(h);J();for(var a=ob.length-1;0<=a;--a){var b=ob[a];b&&b(R,null,0)}ka.flush();Q&&Q.update()}}function t(){!qc&&0<ob.length&&(qc=m.next(h))}function sa(){qc&&(m.cancel(h),qc=null)}function O(a){a.preventDefault();Sa=!0;sa();ga.forEach(function(a){a()})}
function oa(a){ka.getError();Sa=!1;Db.restore();na.restore();ab.restore();da.restore();Da.restore();Ga.restore();C.restore();Q&&Q.restore();nb.procs.refresh();t();ra.forEach(function(a){a()})}function z(a){function b(a,c){var e={},d={};Object.keys(a).forEach(function(b){var f=a[b];if(D.isDynamic(f))d[b]=D.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(D.isDynamic(f[g])){d[b]=D.unbox(f,b);return}e[b]=f}});return{dynamic:d,"static":e}}function e(a){for(;p.length<a;)p.push(null);
return p}c(!!a,"invalid args to regl({...})");c.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var e=c[a];delete c[a];Object.keys(e).forEach(function(b){c[a+"."+b]=e[b]})}}var c=A({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");
b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=nb.compile(a,g,f,d,h),l=k.draw,m=k.batch,n=k.scope,p=[];return A(function(a,b){var d;Sa&&c.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return m.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function ba(a,b){var d=0;nb.procs.poll();var e=b.color;e&&(ka.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),d|=16384);"depth"in b&&(ka.clearDepth(+b.depth),d|=256);"stencil"in b&&(ka.clearStencil(b.stencil|0),d|=1024);c(!!d,"called regl.clear with no buffer specified");ka.clear(d)}function I(b){c.type(b,"function","regl.frame() callback must be a function");
ob.push(b);t();return{cancel:function(){function d(){var b=a(ob,d);ob[b]=ob[ob.length-1];--ob.length;0>=ob.length&&sa()}var e=a(ob,b);c(0<=e,"cannot cancel a frame twice");ob[e]=d}}}function V(){var a=La.viewport,b=La.scissor_box;a[0]=a[1]=b[0]=b[1]=0;R.viewportWidth=R.framebufferWidth=R.drawingBufferWidth=a[2]=b[2]=ka.drawingBufferWidth;R.viewportHeight=R.framebufferHeight=R.drawingBufferHeight=a[3]=b[3]=ka.drawingBufferHeight}function J(){R.tick+=1;R.time=Z();V();nb.procs.poll()}function ja(){da.refresh();
V();nb.procs.refresh();Q&&Q.update()}function Z(){return(l()-M)/1E3}console.log("REGL args are:",d);d=k(d);console.log("REGL configs are:",d);if(!d)return null;var ka=d.gl,ma=ka.getContextAttributes(),Sa=ka.isContextLost(),Db=b(ka,d);if(!Db)return null;var ea=f(),Oa=x(),W=Db.extensions,Q=U(ka,W),M=l(),T=ka.drawingBufferWidth,pa=ka.drawingBufferHeight,R={tick:0,time:0,viewportWidth:T,viewportHeight:pa,framebufferWidth:T,framebufferHeight:pa,drawingBufferWidth:T,drawingBufferHeight:pa,pixelRatio:d.pixelRatio},
T={elements:null,primitive:4,count:-1,offset:0,instances:-1},Hb=q(ka,W),ab=B(ka,Oa,d,function(a){return C.destroyBuffer(a)}),S=y(ka,W,ab,Oa),C=p(ka,W,Hb,Oa,ab,S,T),na=r(ka,ea,Oa,d),da=e(ka,W,Hb,function(){nb.procs.poll()},R,Oa,d),Da=g(ka,W,Hb,Oa,d),Ga=n(ka,W,Hb,da,Da,Oa),nb=K(ka,ea,W,Hb,ab,S,da,Ga,{},C,na,T,R,Q,d),ea=u(ka,Ga,nb.procs.poll,R,ma,W,Hb),La=nb.next,X=ka.canvas,ob=[],ga=[],ra=[],cc=[d.onDestroy],qc=null;X&&(X.addEventListener("webglcontextlost",O,!1),X.addEventListener("webglcontextrestored",
oa,!1));var ic=Ga.setFBO=z({framebuffer:D.define.call(null,1,"framebuffer")});ja();ma=A(z,{clear:function(a){c("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ic(A({framebuffer:a.framebuffer.faces[b]},a),ba);else ic(a,ba);else ba(null,a)},prop:D.define.bind(null,1),context:D.define.bind(null,2),"this":D.define.bind(null,3),draw:z({}),buffer:function(a){return ab.create(a,34962,!1,
!1)},elements:function(a){return S.create(a,!1)},texture:da.create2D,cube:da.createCube,renderbuffer:Da.create,framebuffer:Ga.create,framebufferCube:Ga.createCube,vao:C.createVAO,attributes:ma,frame:I,on:function(a,b){c.type(b,"function","listener callback must be a function");var d;switch(a){case "frame":return I(b);case "lost":d=ga;break;case "restore":d=ra;break;case "destroy":d=cc;break;default:c.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(b);return{cancel:function(){for(var a=
0;a<d.length;++a)if(d[a]===b){d[a]=d[d.length-1];d.pop();break}}}},limits:Hb,hasExtension:function(a){return 0<=Hb.extensions.indexOf(a.toLowerCase())},read:ea,destroy:function(){ob.length=0;sa();X&&(X.removeEventListener("webglcontextlost",O),X.removeEventListener("webglcontextrestored",oa));na.clear();Ga.clear();Da.clear();C.clear();da.clear();S.clear();ab.clear();Q&&Q.clear();cc.forEach(function(a){a()})},_gl:ka,_refresh:ja,poll:function(){J();Q&&Q.update()},now:Z,stats:Oa});d.onDone(null,ma);
return ma}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

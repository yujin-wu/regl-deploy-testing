var $jscomp={scope:{},getGlobal:function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global?global:h}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(h){return"jscomp_symbol_"+h+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(h){$jscomp.initSymbolIterator();if(h[$jscomp.global.Symbol.iterator])return h[$jscomp.global.Symbol.iterator]();var r=0;return{next:function(){return r==h.length?{done:!0}:{done:!1,value:h[r++]}}}};
$jscomp.arrayFromIterator=function(h){for(var r,J=[];!(r=h.next()).done;)J.push(r.value);return J};$jscomp.arrayFromIterable=function(h){return h instanceof Array?h:$jscomp.arrayFromIterator($jscomp.makeIterator(h))};
$jscomp.inherits=function(h,r){function J(){}J.prototype=r.prototype;h.prototype=new J;h.prototype.constructor=h;for(var a in r)if($jscomp.global.Object.defineProperties){var d=$jscomp.global.Object.getOwnPropertyDescriptor(r,a);d&&$jscomp.global.Object.defineProperty(h,a,d)}else h[a]=r[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(h,r){h instanceof String&&(h=String(h));var J=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},d=(a.next=function(){if(J<h.length){var a=J++;return{value:r(a,h[a]),done:!1}}d.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return d},a);return d};
$jscomp.array.findInternal_=function(h,r,J){h instanceof String&&(h=String(h));for(var a=h.length,d=0;d<a;d++){var C=h[d];if(r.call(J,C,d,h))return{i:d,v:C}}return{i:-1,v:void 0}};
$jscomp.array.from=function(h,r,J){r=void 0===r?function(d){return d}:r;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(h[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();h=h[Symbol.iterator]();for(var d;!(d=h.next()).done;)a.push(r.call(J,d.value))}else{d=h.length;for(var C=0;C<d;C++)a.push(r.call(J,h[C]))}return a};$jscomp.array.of=function(h){for(var r=[],J=0;J<arguments.length;++J)r[J-0]=arguments[J];return $jscomp.array.from(r)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(h,r){return[h,r]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(h){return h})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(h,r){return r})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(h,r,J){var a=this.length;h=Number(h);r=Number(r);J=Number(null!=J?J:a);if(h<r)for(J=Math.min(J,a);r<J;)r in this?this[h++]=this[r++]:(delete this[h++],r++);else for(J=Math.min(J,a+r-h),h+=J-r;J>r;)--J in this?this[--h]=this[J]:delete this[h];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(h,r,J){null!=J&&h.length||(J=this.length||0);J=Number(J);for(r=Number((void 0===r?0:r)||0);r<J;r++)this[r]=h;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(h,r){return $jscomp.array.findInternal_(this,h,r).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(h,r){return $jscomp.array.findInternal_(this,h,r).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(h){h=void 0===h?[]:h;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(h){h=$jscomp.makeIterator(h);for(var r=h.next();!r.done;r=h.next())r=r.value,this.set(r[0],r[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var h=$jscomp.global.Map;if(!h||!h.prototype.entries||!Object.seal)return!1;try{var r=Object.seal({x:4}),J=new h($jscomp.makeIterator([[r,"s"]]));if("s"!=J.get(r)||1!=J.size||J.get({x:4})||J.set({x:4},"t")!=J||2!=J.size)return!1;var a=J.entries(),d=a.next();if(d.done||d.value[0]!=r||"s"!=d.value[1])return!1;d=a.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!a.next().done?!1:!0}catch(C){return!1}};
$jscomp.Map.createHead_=function(){var h={};return h.previous=h.next=h.head=h};$jscomp.Map.getId_=function(h){if(!(h instanceof Object))return String(h);$jscomp.Map.key_ in h||h instanceof Object&&Object.isExtensible&&Object.isExtensible(h)&&$jscomp.Map.defineProperty_(h,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in h?h[$jscomp.Map.key_]:" "+h};
$jscomp.Map.prototype.set=function(h,r){var J=this.maybeGetEntry_(h),a=J.id,d=J.list,J=J.entry;d||(d=this.data_[a]=[]);J?J.value=r:(J={next:this.head_,previous:this.head_.previous,head:this.head_,key:h,value:r},d.push(J),this.head_.previous.next=J,this.head_.previous=J,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(h){var r=this.maybeGetEntry_(h);h=r.id;var J=r.list,a=r.index;return(r=r.entry)&&J?(J.splice(a,1),J.length||delete this.data_[h],r.previous.next=r.next,r.next.previous=r.previous,r.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(h){return!!this.maybeGetEntry_(h).entry};
$jscomp.Map.prototype.get=function(h){return(h=this.maybeGetEntry_(h).entry)&&h.value};$jscomp.Map.prototype.maybeGetEntry_=function(h){var r=$jscomp.Map.getId_(h),J=this.data_[r];if(J)for(var a=0;a<J.length;a++){var d=J[a];if(h!==h&&d.key!==d.key||h===d.key)return{id:r,list:J,index:a,entry:d}}return{id:r,list:J,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(h){return[h.key,h.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(h){return h.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(h){return h.value})};$jscomp.Map.prototype.forEach=function(h,r){for(var J=$jscomp.makeIterator(this.entries()),a=J.next();!a.done;a=J.next())a=a.value,h.call(r,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(h){var r=this,J=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(J){for(;J.head!=r.head_;)J=J.previous;for(;J.next!=J.head;)return J=J.next,{done:!1,value:h(J)};J=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(h,r,J){Object.defineProperty(h,r,{value:String(J)})}:function(h,r,J){h[r]=String(J)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(h){h=Number(h)>>>0;if(0===h)return 32;var r=0;0===(h&4294901760)&&(h<<=16,r+=16);0===(h&4278190080)&&(h<<=8,r+=8);0===(h&4026531840)&&(h<<=4,r+=4);0===(h&3221225472)&&(h<<=2,r+=2);0===(h&2147483648)&&r++;return r};$jscomp.math.imul=function(h,r){h=Number(h);r=Number(r);var J=h&65535,a=r&65535;return J*a+((h>>>16&65535)*a+J*(r>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(h){h=Number(h);return 0===h||isNaN(h)?h:0<h?1:-1};
$jscomp.math.log10=function(h){return Math.log(h)/Math.LN10};$jscomp.math.log2=function(h){return Math.log(h)/Math.LN2};$jscomp.math.log1p=function(h){h=Number(h);if(.25>h&&-.25<h){for(var r=h,J=1,a=h,d=0,C=1;d!=a;)r*=h,C*=-1,a=(d=a)+C*r/++J;return a}return Math.log(1+h)};$jscomp.math.expm1=function(h){h=Number(h);if(.25>h&&-.25<h){for(var r=h,J=1,a=h,d=0;d!=a;)r*=h/++J,a=(d=a)+r;return a}return Math.exp(h)-1};$jscomp.math.cosh=function(h){h=Number(h);return(Math.exp(h)+Math.exp(-h))/2};
$jscomp.math.sinh=function(h){h=Number(h);return 0===h?h:(Math.exp(h)-Math.exp(-h))/2};$jscomp.math.tanh=function(h){h=Number(h);if(0===h)return h;var r=Math.exp(2*-Math.abs(h)),r=(1-r)/(1+r);return 0>h?-r:r};$jscomp.math.acosh=function(h){h=Number(h);return Math.log(h+Math.sqrt(h*h-1))};$jscomp.math.asinh=function(h){h=Number(h);if(0===h)return h;var r=Math.log(Math.abs(h)+Math.sqrt(h*h+1));return 0>h?-r:r};
$jscomp.math.atanh=function(h){h=Number(h);return($jscomp.math.log1p(h)-$jscomp.math.log1p(-h))/2};
$jscomp.math.hypot=function(h,r,J){for(var a=[],d=2;d<arguments.length;++d)a[d-2]=arguments[d];h=Number(h);r=Number(r);for(var C=Math.max(Math.abs(h),Math.abs(r)),u=$jscomp.makeIterator(a),d=u.next();!d.done;d=u.next())C=Math.max(C,Math.abs(d.value));if(1E100<C||1E-100>C){h/=C;r/=C;u=h*h+r*r;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d)/C,u+=d*d;return Math.sqrt(u)*C}C=h*h+r*r;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d),C+=
d*d;return Math.sqrt(C)};$jscomp.math.trunc=function(h){h=Number(h);if(isNaN(h)||Infinity===h||-Infinity===h||0===h)return h;var r=Math.floor(Math.abs(h));return 0>h?-r:r};$jscomp.math.cbrt=function(h){if(0===h)return h;h=Number(h);var r=Math.pow(Math.abs(h),1/3);return 0>h?-r:r};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(h){return"number"!==typeof h?!1:!isNaN(h)&&Infinity!==h&&-Infinity!==h};
$jscomp.number.isInteger=function(h){return $jscomp.number.isFinite(h)?h===Math.floor(h):!1};$jscomp.number.isNaN=function(h){return"number"===typeof h&&isNaN(h)};$jscomp.number.isSafeInteger=function(h){return $jscomp.number.isInteger(h)&&Math.abs(h)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(h,r){for(var J=[],a=1;a<arguments.length;++a)J[a-1]=arguments[a];J=$jscomp.makeIterator(J);for(a=J.next();!a.done;a=J.next())if(a=a.value)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(h[d]=a[d]);return h};$jscomp.object.is=function(h,r){return h===r?0!==h||1/h===1/r:h!==h&&r!==r};$jscomp.Set=function(h){h=void 0===h?[]:h;this.map_=new $jscomp.Map;if(h){h=$jscomp.makeIterator(h);for(var r=h.next();!r.done;r=h.next())this.add(r.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var h=$jscomp.global.Set;if(!h||!h.prototype.entries||!Object.seal)return!1;var r=Object.seal({x:4}),h=new h($jscomp.makeIterator([r]));if(h.has(r)||1!=h.size||h.add(r)!=h||1!=h.size||h.add({x:4})!=h||2!=h.size)return!1;var h=h.entries(),J=h.next();if(J.done||J.value[0]!=r||J.value[1]!=r)return!1;J=h.next();return J.done||J.value[0]==r||4!=J.value[0].x||J.value[1]!=J.value[0]?!1:h.next().done};
$jscomp.Set.prototype.add=function(h){this.map_.set(h,h);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(h){h=this.map_["delete"](h);this.size=this.map_.size;return h};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(h){return this.map_.has(h)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(h,r){var J=this;this.map_.forEach(function(a){return h.call(r,a,a,J)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(h,r){if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(h){for(var r=[],J=0;J<arguments.length;++J)r[J-0]=arguments[J];for(var J="",r=$jscomp.makeIterator(r),a=r.next();!a.done;a=r.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?J+=String.fromCharCode(a):(a-=65536,J+=String.fromCharCode(a>>>10&1023|55296),J+=String.fromCharCode(a&1023|56320))}return J};
$jscomp.string.repeat=function(h){var r=this.toString();if(0>h||1342177279<h)throw new RangeError("Invalid count value");h|=0;for(var J="";h;)if(h&1&&(J+=r),h>>>=1)r+=r;return J};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(h){var r=this.toString(),J=r.length;h=Number(h)||0;if(0<=h&&h<J){h|=0;var a=r.charCodeAt(h);if(55296>a||56319<a||h+1===J)return a;h=r.charCodeAt(h+1);return 56320>h||57343<h?a:1024*(a-55296)+h+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(h,r){r=void 0===r?0:r;$jscomp.string.noRegExp_(h,"includes");return-1!==this.toString().indexOf(h,r)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(h,r){r=void 0===r?0:r;$jscomp.string.noRegExp_(h,"startsWith");var J=this.toString();h+="";for(var a=J.length,d=h.length,C=Math.max(0,Math.min(r|0,J.length)),u=0;u<d&&C<a;)if(J[C++]!=h[u++])return!1;return u>=d};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(h,r){$jscomp.string.noRegExp_(h,"endsWith");var J=this.toString();h+="";void 0===r&&(r=J.length);for(var a=Math.max(0,Math.min(r|0,J.length)),d=h.length;0<d&&0<a;)if(J[--a]!=h[--d])return!1;return 0>=d};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function h(r,J,a){function d(p,n){if(!J[p]){if(!r[p]){var b="function"==typeof require&&require;if(!n&&b)return b(p,!0);if(C)return C(p,!0);b=Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b;}b=J[p]={exports:{}};r[p][0].call(b.exports,function(b){return d(r[p][1][b]||b)},b,b.exports,h,r,J,a)}return J[p].exports}for(var C="function"==typeof require&&require,u=0;u<a.length;u++)d(a[u]);return d}return h})()({1:[function(h,r,J){J=document.createElement("canvas");r=document.body.appendChild(J);
J=J.getContext("webgl",{antialias:!0,stencil:!0});var a=h("canvas-fit"),d=h("gl-mat4"),C=h("../regl")({gl:J}),u=h("canvas-orbit-camera")(r);window.addEventListener("resize",a(r),!1);u.rotate([0,0],[0,-.4]);u.zoom(-28);var p=[.7,.3,.3],n=[.3,.2,.3],b=[.7,.7,.7],f=[.3,.3,.3];h("resl")({manifest:{DATA:{type:"text",src:"assets/shadow_bunny.json",parser:JSON.parse}},onDone:function(c){var a=c.DATA;c=C.buffer(a.MESH);var y=C.buffer(a.SHADOW),z=C({uniforms:{lightDir:function(){return[-.39,-.87,-.29]},camera:function(c){var b=
1/Math.tan(Math.PI/2/2),e=[];e[0]=b/(c.viewportWidth/c.viewportHeight);e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=b;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=0;e[11]=-1;e[12]=0;e[13]=0;e[14]=-.01;e[15]=0;c=u.view();return d.multiply([],e,c)}}}),e=C({depth:{enable:!0,mask:!0,func:"<="},stencil:{enable:!1},colorMask:[!0,!0,!0,!0],cull:{enable:!0,face:"back"}}),l=C({depth:{mask:!1,enable:!0,func:"<"},stencil:{enable:!0,mask:255,func:{cmp:"always",ref:0,mask:255},opBack:{fail:"keep",zfail:"increment wrap",zpass:"keep"},
opFront:{fail:"keep",zfail:"decrement wrap",zpass:"keep"}},cull:{enable:!1},colorMask:[!1,!1,!1,!1]}),g=C({depth:{mask:!1,enable:!0,func:"<="},stencil:{enable:!0,mask:255,func:{cmp:"!=",ref:0,mask:255},op:{fail:"keep",zfail:"keep",pass:"keep"}},colorMask:[!0,!0,!0,!0],cull:{enable:!0,face:"back"}}),q=[],m=[],v=[];m.push([-10,0,-10]);m.push([10,0,-10]);m.push([-10,0,10]);m.push([10,0,10]);v.push([0,1,0]);v.push([0,1,0]);v.push([0,1,0]);v.push([0,1,0]);q.push([3,1,0]);q.push([0,2,3]);var w=C({vert:"\n    precision mediump float;\n    attribute vec3 position;\n    attribute vec3 normal;\n\n    uniform vec3 lightDir;\n    uniform mat4 camera;\n    uniform mat4 model;\n\n    varying float intensity;\n\n    void main() {\n      intensity = max(-dot(lightDir, normal), 0.0);\n      gl_Position = camera * model * vec4(position, 1);\n    }\n    ",
frag:"\n    precision mediump float;\n\n    uniform vec3 diffuse;\n    uniform vec3 ambient;\n\n    varying float intensity;\n\n    void main() {\n      gl_FragColor = vec4(diffuse * intensity + ambient, 1);\n    }\n    ",uniforms:{ambient:function(){return f},diffuse:function(c,e){var l=e.intensity;return[l*b[0],l*b[1],l*b[2]]},model:C.prop("model")},attributes:{position:m,normal:v},elements:q,cull:{enable:!0}}),B=C({vert:"\n    precision mediump float;\n    attribute vec3 position;\n    attribute vec3 normal;\n\n    uniform vec3 lightDir;\n    uniform mat4 camera;\n    uniform mat4 model;\n\n    varying float intensity;\n\n    void main() {\n      intensity = max(-dot(lightDir, normal), 0.0);\n      gl_Position = camera * model * vec4(position, 1);\n    }\n    ",
frag:"\n    precision mediump float;\n\n    uniform vec3 diffuse;\n    uniform vec3 ambient;\n\n    varying float intensity;\n\n    void main() {\n      gl_FragColor = vec4(diffuse * intensity + ambient, 1);\n    }\n    ",attributes:{position:{buffer:c,offset:0,normalized:!1,stride:24,size:3},normal:{buffer:c,offset:12,normalized:!1,stride:24,size:3}},uniforms:{ambient:function(){return n},diffuse:function(c,b){var e=b.intensity;return[e*p[0],e*p[1],e*p[2]]},model:C.prop("model")},count:function(){return a.MESH.length/
6}}),la=C({frag:"\n      precision mediump float;\n\n      void main() {\n        if(gl_FrontFacing) {\n          gl_FragColor = vec4(0,1,0,1);  // useful color for debugging.\n        } else {\n          gl_FragColor = vec4(1,0,0,1); // useful color for debugging.\n        }\n      }\n      "}),x=C({vert:"\n      precision mediump float;\n      attribute vec4 position;\n      attribute vec3 normal0, normal1;\n\n      uniform vec3 lightDir;\n      uniform mat4 camera;\n      uniform mat4 model;\n      void main() {\n        /*\n          Every edge of the rabbit is assigned a triangle. To all the vertices of that assigned\n          triangle, we assign the face-normals of the two triangles incident to that edge.\n\n          For that assigned triangle we have that:\n          The first vertex is the first edge-vertex, and w=1\n          The second vertex is the second edge-vertex, and w=1\n          The third vertex is simply (0,0,0,0)\n\n          Now clearly, only if the first normal is facing the light, and the second normal\n          is facing away from the light, we have that the edge is part of the shadow silhouette.\n\n          If it is part of the silhouette, we project the first and second vertices\n          to infinity, in the direction of the light.\n          For the third vertex, we have that w=0, so it is kept in place.\n          Because the three vertices are placed in this way, the shadow silhouette is created for that edge.\n          So that's how this vertex shader works.\n\n          (if the above doesn't make sense, try drawing it out on paper.\n          It will make sense.)\n        */\n        if(dot(normal0, lightDir) <= 0.0 &&\n           dot(normal1, lightDir) >= 0.0) {\n          gl_Position = camera*model*(position + vec4((1.0-position.w) * lightDir, 0.0));\n        } else {\n          gl_Position = vec4(0,0,0,0);\n        }\n      }\n      ",
attributes:{position:{buffer:y,offset:0,normalized:!1,stride:40,size:4},normal0:{buffer:y,offset:16,normalized:!1,stride:40,size:3},normal1:{buffer:y,offset:28,normalized:!1,stride:40,size:3}},count:function(){return a.SHADOW.length/10},uniforms:{model:C.prop("model")}}),E=C({vert:"\n      precision mediump float;\n      attribute vec3 position, normal;\n\n      uniform vec3 lightDir;\n      uniform mat4 camera;\n\n      uniform mat4 model;\n\n      /*\n        The below vertex shader needs some explaining:\n\n        We define dark cap and light cap as in figure 9-6 of this article:\n        http://http.developer.nvidia.com/GPUGems/gpugems_ch09.html\n\n        Firstly, drawing the light cap is easy, because we can just draw the rabbit mesh as usual. See figure 9-6, and you should understand.\n\n        Secondly. however, we have the dark cap. Basically, to create the dark cap,\n        we need to project the mesh onto infinity, in the direction of the light.\n        And infinity, in the case of OpenGL, is just the faces of the clip-volume.\n        The clip-volume is just a cube, and everything outside of this cube, is simply not drawn by OpenGL.\n\n        So to project something to infinity, we need to project it onto one of the faces of this cube.\n        The face we project onto depends on the light direction, and what we are doing in the function\n        'extend', is that we are finding which face to project upon, and then we project the vertex\n        of the mesh onto that face, thus creating the dark cap.\n      */\n\n      vec4 extend(vec3 p) {\n        vec4 tlightDir = camera * vec4(lightDir,0);\n        vec3 light = normalize(tlightDir.xyz);\n        vec3 dpos = (1.0 - p) / light;\n        vec3 dneg = (vec3(-1.0,-1.0,0.0) - p) / light;\n        vec3 dt   = mix(dneg, dpos, step(0.0, light));\n        return vec4(0.999 * min(min(dt.x, dt.y), dt.z) * light + p, 0);\n      }\n\n      void main() {\n        vec4 projected = camera * model * vec4(position,1);\n        if(dot(normal,lightDir) <= 0.0) {\n          // light cap\n          gl_Position = projected;\n        } else {\n          // dark cap\n          gl_Position = extend(projected.xyz/projected.w);\n        }\n      }\n      ",
attributes:{position:{buffer:c,offset:0,normalized:!1,stride:24,size:3},normal:{buffer:c,offset:12,normalized:!1,stride:24,size:3}},count:function(){return a.MESH.length/6},uniforms:{model:C.prop("model")}});C.frame(function(c){var b=[];c=.003*c.tick;for(var f=0,a,k,f=0;.9>=f;f+=.1)a=2*Math.PI*f,k=d.identity([]),d.translate(k,k,[2*Math.cos(a+c),.6,2*Math.sin(a+c)]),b.push(k);for(f=0;.9>=f;f+=.2)a=2*Math.PI*f+1.3,k=d.identity([]),d.translate(k,k,[2*Math.cos(a+.3*c),1.3,2*Math.sin(a+.3*c)]),b.push(k);
var m=d.identity([]);d.translate(m,m,[0,0,0]);z(function(){C.clear({depth:1,color:[0,0,0,1]});e(function(){for(var c=0;c<b.length;c++)B({intensity:1,model:b[c]})});w({intensity:1,model:m});l(function(){C.clear({stencil:0});la(function(){for(var c=0;c<b.length;c++)x({model:b[c]}),E({model:b[c]})})});g(function(){for(var c=0;c<b.length;c++)B({intensity:.1,model:b[c]});w({intensity:.1,model:m})})});u.tick()})}})},{"../regl":82,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59,resl:78}],2:[function(h,
r,J){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var d=h("./util/sorted-object-keys"),C=h("./util/check"),u=h("./util/values"),p=h("./constants/dtypes.json"),n=h("./util/is-typed-array"),b=h("./util/is-ndarray"),f=h("./constants/primitives.json"),c="attributes elements offset count primitive instances".split(" ");r.exports=function(k,y,z,e,l,g,q){function m(c){if(c!==h.currentVAO){var b=
y.oes_vertex_array_object;c?b.bindVertexArrayOES(c.vao):b.bindVertexArrayOES(null);h.currentVAO=c}}function v(c){if(c!==h.currentVAO){if(c)c.bindAttrs();else{for(var b=y.angle_instanced_arrays,e=0;e<E.length;++e){var l=E[e];l.buffer?(k.enableVertexAttribArray(e),l.buffer.bind(),k.vertexAttribPointer(e,l.size,l.type,l.normalized,l.stride,l.offfset),b&&l.divisor&&b.vertexAttribDivisorANGLE(e,l.divisor)):(k.disableVertexAttribArray(e),k.vertexAttrib4f(e,l.x,l.y,l.z,l.w))}q.elements?k.bindBuffer(34963,
q.elements.buffer.buffer):k.bindBuffer(34963,null)}h.currentVAO=c}}function w(){u(H).forEach(function(c){c.destroy()})}function B(){this.id=++Da;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var c=y.oes_vertex_array_object;this.vao=c?c.createVertexArrayOES():null;H[this.id]=this;this.buffers=[]}function la(){y.oes_vertex_array_object&&u(H).forEach(function(c){c.refresh()})}var x=z.maxAttributes,E=Array(x);for(z=0;z<x;++z)E[z]=
new a;var Da=0,H={},h={Record:a,scope:{},state:E,currentVAO:null,targetVAO:null,restore:y.oes_vertex_array_object?la:function(){},createVAO:function(k){function m(e){var k;if(Array.isArray(e))k=e,q.elements&&q.ownsElements&&q.elements.destroy(),q.elements=null,q.ownsElements=!1,q.offset=0,q.count=0,q.instances=-1,q.primitive=4;else{C("object"===typeof e,"invalid arguments for create vao");C("attributes"in e,"must specify attributes for vao");if(e.elements){var v=e.elements;q.ownsElements?("function"===
typeof v&&"elements"===v._reglType?q.elements.destroy():q.elements(v),q.ownsElements=!1):g.getElements(e.elements)?(q.elements=e.elements,q.ownsElements=!1):(q.elements=g.create(e.elements),q.ownsElements=!0)}else q.elements=null,q.ownsElements=!1;k=e.attributes;q.offset=0;q.count=-1;q.instances=-1;q.primitive=4;q.elements&&(q.count=q.elements._elements.vertCount,q.primitive=q.elements._elements.primType);"offset"in e&&(q.offset=e.offset|0);"count"in e&&(q.count=e.count|0);"instances"in e&&(q.instances=
e.instances|0);"primitive"in e&&(C(e.primitive in f,"bad primitive type: "+e.primitive),q.primitive=f[e.primitive]);C.optional(function(){for(var b=d(e),l=0;l<b.length;++l)C(0<=c.indexOf(b[l]),'invalid option for vao: "'+b[l]+'" valid options are '+c)});C(Array.isArray(k),"attributes must be an array")}C(k.length<x,"too many attributes");C(0<k.length,"must specify at least one attribute");var v={},w=q.attributes;w.length=k.length;for(var B=0;B<k.length;++B){var z=k[B],u=w[B]=new a,F=z.data||z;if(Array.isArray(F)||
n(F)||b(F)){var E;q.buffers[B]&&(E=q.buffers[B],n(F)&&E._buffer.byteLength>=F.byteLength?E.subdata(F):(E.destroy(),q.buffers[B]=null));q.buffers[B]||(E=q.buffers[B]=l.create(z,34962,!1,!0));u.buffer=l.getBuffer(E);u.size=u.buffer.dimension|0;u.normalized=!1;u.type=u.buffer.dtype;u.offset=0;u.stride=0;u.divisor=0;u.state=1;v[B]=1}else l.getBuffer(z)?(u.buffer=l.getBuffer(z),u.size=u.buffer.dimension|0,u.normalized=!1,u.type=u.buffer.dtype,u.offset=0,u.stride=0,u.divisor=0,u.state=1):l.getBuffer(z.buffer)?
(u.buffer=l.getBuffer(z.buffer),u.size=(+z.size||u.buffer.dimension)|0,u.normalized=!!z.normalized||!1,"type"in z?(C.parameter(z.type,p,"invalid buffer type"),u.type=p[z.type]):u.type=u.buffer.dtype,u.offset=(z.offset||0)|0,u.stride=(z.stride||0)|0,u.divisor=(z.divisor||0)|0,u.state=1,C(1<=u.size&&4>=u.size,"size must be between 1 and 4"),C(0<=u.offset,"invalid offset"),C(0<=u.stride&&255>=u.stride,"stride must be between 0 and 255"),C(0<=u.divisor,"divisor must be positive"),C(!u.divisor||!!y.angle_instanced_arrays,
"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in z?(C(0<B,"first attribute must not be a constant"),u.x=+z.x||0,u.y=+z.y||0,u.z=+z.z||0,u.w=+z.w||0,u.state=2):C(!1,"invalid attribute spec for location "+B)}for(E=0;E<q.buffers.length;++E)!v[E]&&q.buffers[E]&&(q.buffers[E].destroy(),q.buffers[E]=null);q.refresh();return m}var q=new B;e.vaoCount+=1;m.destroy=function(){for(var c=0;c<q.buffers.length;++c)q.buffers[c]&&q.buffers[c].destroy();q.buffers.length=0;q.ownsElements&&(q.elements.destroy(),
q.elements=null,q.ownsElements=!1);q.destroy()};m._vao=q;m._reglType="vao";return m(k)},getVAO:function(c){return"function"===typeof c&&c._vao?c._vao:null},destroyBuffer:function(c){for(var e=0;e<E.length;++e){var b=E[e];b.buffer===c&&(k.disableVertexAttribArray(e),b.buffer=null)}},setVAO:y.oes_vertex_array_object?m:v,clear:y.oes_vertex_array_object?w:function(){}};B.prototype.bindAttrs=function(){for(var c=y.angle_instanced_arrays,e=this.attributes,b=0;b<e.length;++b){var l=e[b];l.buffer?(k.enableVertexAttribArray(b),
k.bindBuffer(34962,l.buffer.buffer),k.vertexAttribPointer(b,l.size,l.type,l.normalized,l.stride,l.offset),c&&l.divisor&&c.vertexAttribDivisorANGLE(b,l.divisor)):(k.disableVertexAttribArray(b),k.vertexAttrib4f(b,l.x,l.y,l.z,l.w))}for(c=e.length;c<x;++c)k.disableVertexAttribArray(c);(c=g.getElements(this.elements))?k.bindBuffer(34963,c.buffer.buffer):k.bindBuffer(34963,null)};B.prototype.refresh=function(){var c=y.oes_vertex_array_object;c&&(c.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=
null,c.bindVertexArrayOES(null))};B.prototype.destroy=function(){if(this.vao){var c=y.oes_vertex_array_object;this===h.currentVAO&&(h.currentVAO=null,c.bindVertexArrayOES(null));c.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);H[this.id]&&(delete H[this.id],--e.vaoCount)};return h}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,
"./util/values":36}],3:[function(h,r,J){function a(c){return z[Object.prototype.toString.call(c)]|0}function d(c,b){for(var e=0;e<b.length;++e)c[e]=b[e]}function C(c,e,b,l,f,d,a){for(var k=0,g=0;g<b;++g)for(var n=0;n<l;++n)c[k++]=e[f*g+d*n+a]}var u=h("./util/sorted-object-keys"),p=h("./util/check"),n=h("./util/is-typed-array"),b=h("./util/is-ndarray"),f=h("./util/values"),c=h("./util/pool");J=h("./util/flatten");var k=J.flatten,y=J.shape,z=h("./constants/arraytypes.json"),e=h("./constants/dtypes.json"),
l=h("./constants/usage.json"),g=[];g[5120]=1;g[5122]=2;g[5124]=4;g[5121]=1;g[5123]=2;g[5125]=4;g[5126]=4;r.exports=function(q,m,v,w){function B(c){this.id=Da++;this.buffer=q.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;v.profile&&(this.stats={size:0})}function z(c,e,b){c.byteLength=e.byteLength;q.bufferData(c.type,e,b)}function x(e,l,f,g,q,m){e.usage=f;if(Array.isArray(l)){if(e.dtype=g||5126,0<l.length)if(Array.isArray(l[0])){q=
y(l);for(var v=g=1;v<q.length;++v)g*=q[v];e.dimension=g;l=k(l,q,e.dtype);z(e,l,f);m?e.persistentData=l:c.freeType(l)}else"number"===typeof l[0]?(e.dimension=q,q=c.allocType(e.dtype,l.length),d(q,l),z(e,q,f),m?e.persistentData=q:c.freeType(q)):n(l[0])?(e.dimension=l[0].length,e.dtype=g||a(l[0])||5126,l=k(l,[l.length,l[0].length],e.dtype),z(e,l,f),m?e.persistentData=l:c.freeType(l)):p.raise("invalid buffer data")}else if(n(l))e.dtype=g||a(l),e.dimension=q,z(e,l,f),m&&(e.persistentData=new Uint8Array(new Uint8Array(l.buffer)));
else if(b(l)){q=l.shape;var w=l.stride,v=l.offset,B=0,x=0,u=0,E=0;1===q.length?(B=q[0],x=1,u=w[0],E=0):2===q.length?(B=q[0],x=q[1],u=w[0],E=w[1]):p.raise("invalid shape");e.dtype=g||a(l.data)||5126;e.dimension=x;q=c.allocType(e.dtype,B*x);C(q,l.data,B,x,u,E,v);z(e,q,f);m?e.persistentData=q:c.freeType(q)}else l instanceof ArrayBuffer?(e.dtype=5121,e.dimension=q,z(e,l,f),m&&(e.persistentData=new Uint8Array(new Uint8Array(l)))):p.raise("invalid buffer data")}function E(c){m.bufferCount--;w(c);var e=
c.buffer;p(e,"buffer must not be deleted already");q.deleteBuffer(e);c.buffer=null;delete H[c.id]}var Da=0,H={};B.prototype.bind=function(){q.bindBuffer(this.type,this.buffer)};B.prototype.destroy=function(){E(this)};var h=[];v.profile&&(m.getTotalBufferSize=function(){var c=0;u(H).forEach(function(e){c+=H[e].stats.size});return c});return{create:function(f,w,z,u){function la(c){var f=35044,d=null,a=0,k=0,m=1;Array.isArray(c)||n(c)||b(c)||c instanceof ArrayBuffer?d=c:"number"===typeof c?a=c|0:c&&
(p.type(c,"object","buffer arguments must be an object, a number or an array"),"data"in c&&(p(null===d||Array.isArray(d)||n(d)||b(d),"invalid data for buffer"),d=c.data),"usage"in c&&(p.parameter(c.usage,l,"invalid buffer usage"),f=l[c.usage]),"type"in c&&(p.parameter(c.type,e,"invalid buffer type"),k=e[c.type]),"dimension"in c&&(p.type(c.dimension,"number","invalid dimension"),m=c.dimension|0),"length"in c&&(p.nni(a,"buffer length must be a nonnegative integer"),a=c.length|0));Da.bind();d?x(Da,d,
f,k,m,u):(a&&q.bufferData(Da.type,a,f),Da.dtype=k||5121,Da.usage=f,Da.dimension=m,Da.byteLength=a);v.profile&&(Da.stats.size=Da.byteLength*g[Da.dtype]);return la}function D(c,e){p(e+c.byteLength<=Da.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+c.byteLength+" starting from offset "+e+" to a buffer of size "+Da.byteLength);q.bufferSubData(Da.type,e,c)}m.bufferCount++;var Da=new B(w);H[Da.id]=Da;z||la(f);la._reglType="buffer";la._buffer=Da;la.subdata=function(e,
l){var f=(l||0)|0,g;Da.bind();if(n(e)||e instanceof ArrayBuffer)D(e,f);else if(Array.isArray(e)){if(0<e.length)if("number"===typeof e[0]){var q=c.allocType(Da.dtype,e.length);d(q,e);D(q,f);c.freeType(q)}else Array.isArray(e[0])||n(e[0])?(g=y(e),q=k(e,g,Da.dtype),D(q,f),c.freeType(q)):p.raise("invalid buffer data")}else if(b(e)){g=e.shape;var m=e.stride,v=q=0,w=0,B=0;1===g.length?(q=g[0],v=1,w=m[0],B=0):2===g.length?(q=g[0],v=g[1],w=m[0],B=m[1]):p.raise("invalid shape");g=Array.isArray(e.data)?Da.dtype:
a(e.data);g=c.allocType(g,q*v);C(g,e.data,q,v,w,B,e.offset);D(g,f);c.freeType(g)}else p.raise("invalid data for buffer subdata");return la};v.profile&&(la.stats=Da.stats);la.destroy=function(){E(Da)};return la},createStream:function(c,e){var b=h.pop();b||(b=new B(c));b.bind();x(b,e,35040,0,1,!1);return b},destroyStream:function(c){h.push(c)},clear:function(){f(H).forEach(E);h.forEach(E)},getBuffer:function(c){return c&&c._buffer instanceof B?c._buffer:null},restore:function(){f(H).forEach(function(c){c.buffer=
q.createBuffer();q.bindBuffer(c.type,c.buffer);q.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:x}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(h,r,J){r.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(h,r,J){r.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(h,r,J){r.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(h,r,J){r.exports={"static":35044,
dynamic:35048,stream:35040}},{}],8:[function(h,r,J){function a(c){return Array.isArray(c)||z(c)||e(c)}function d(c){return c.sort(function(c,e){return"viewport"===c?-1:"viewport"===e?1:c<e?-1:1})}function C(c,e,b,l){this.thisDep=c;this.contextDep=e;this.propDep=b;this.append=l}function u(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function p(c){return new C(!1,!1,!1,c)}function n(c,e){var b=c.type;if(0===b)return b=c.data.length,new C(!0,1<=b,2<=b,e);if(4===b)return b=c.data,new C(b.thisDep,
b.contextDep,b.propDep,e);if(5===b)return new C(!1,!1,!1,e);if(6===b){for(var l=b=!1,f=!1,d=0;d<c.data.length;++d){var a=c.data[d];1===a.type?f=!0:2===a.type?l=!0:3===a.type?b=!0:0===a.type?(b=!0,a=a.data,1<=a&&(l=!0),2<=a&&(f=!0)):4===a.type&&(b=b||a.data.thisDep,l=l||a.data.contextDep,f=f||a.data.propDep)}return new C(b,l,f,e)}return new C(3===b,2===b,1===b,e)}var b=h("./util/sorted-object-keys"),f=h("./util/check"),c=h("./util/extend"),k=h("./util/codegen"),y=h("./util/loop"),z=h("./util/is-typed-array"),
e=h("./util/is-ndarray"),l=h("./util/is-array-like"),g=h("./dynamic"),q=h("./constants/primitives.json"),m=h("./constants/dtypes.json"),v=["x","y","z","w"],w="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),B={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},la="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),x={never:512,less:513,"<":513,equal:514,"=":514,
"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},E={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Da={frag:35632,vert:35633},H={cw:2304,ccw:2305},ga=new C(!1,!1,!1,function(){});r.exports=function(e,z,h,I,G,D,ma,t,r,M,fa,Aa,T,X,S){function P(c){return c.replace(".","_")}function N(c,e,b){var l=P(c);ta.push(c);Y[l]=ja[l]=!!b;Fa[l]=e}function O(c,e,b){var l=
P(c);ta.push(c);Array.isArray(b)?(ja[l]=b.slice(),Y[l]=b.slice()):ja[l]=Y[l]=b;Ha[l]=e}function Q(){var c=k(),e=c.link,l=c.global;c.id=Kc++;c.batchId="0";var d=e(fb),a=c.shared={props:"a0"};b(fb).forEach(function(c){a[c]=l.def(d,".",c)});f.optional(function(){c.CHECK=e(f);c.commandStr=f.guessCommand();c.command=e(c.commandStr);c.assert=function(c,b,l){c("if(!(",b,"))",this.CHECK,".commandRaise(",e(l),",",this.command,");")};aa.invalidBlendCombinations=la});var g=c.next={},q=c.current={};b(Ha).forEach(function(c){Array.isArray(ja[c])&&
(g[c]=l.def(a.next,".",c),q[c]=l.def(a.current,".",c))});var m=c.constants={};b(aa).forEach(function(c){m[c]=l.def(JSON.stringify(aa[c]))});c.invoke=function(b,l){switch(l.type){case 0:var f=["this",a.context,a.props,c.batchId];return b.def(e(l.data),".call(",f.slice(0,Math.max(l.data.length+1,4)),")");case 1:return b.def(a.props,l.data);case 2:return b.def(a.context,l.data);case 3:return b.def("this",l.data);case 4:return l.data.append(c,b),l.data.ref;case 5:return l.data.toString();case 6:return l.data.map(function(e){return c.invoke(b,
e)})}};c.attribCache={};var v={};c.scopeAttrib=function(c){c=z.id(c);if(c in v)return v[c];var b=M.scope[c];b||(b=M.scope[c]=new wa);return v[c]=e(b)};return c}function R(c){var e=c["static"];c=c.dynamic;var b;if("profile"in e){var l=!!e.profile;b=p(function(c,e){return l});b.enable=l}else if("profile"in c){var f=c.profile;b=n(f,function(c,e){return c.invoke(e,f)})}return b}function qa(c,e){var b=c["static"],l=c.dynamic;if("framebuffer"in b){var d=b.framebuffer;return d?(d=t.getFramebuffer(d),f.command(d,
"invalid framebuffer object"),p(function(c,e){var b=c.link(d),l=c.shared;e.set(l.framebuffer,".next",b);l=l.context;e.set(l,".framebufferWidth",b+".width");e.set(l,".framebufferHeight",b+".height");return b})):p(function(c,e){var b=c.shared;e.set(b.framebuffer,".next","null");b=b.context;e.set(b,".framebufferWidth",b+".drawingBufferWidth");e.set(b,".framebufferHeight",b+".drawingBufferHeight");return"null"})}if("framebuffer"in l){var a=l.framebuffer;return n(a,function(c,e){var b=c.invoke(e,a),l=
c.shared,d=l.framebuffer,k=e.def(d,".getFramebuffer(",b,")");f.optional(function(){c.assert(e,"!"+b+"||"+k,"invalid framebuffer object")});e.set(d,".next",k);l=l.context;e.set(l,".framebufferWidth",k+"?"+k+".width:"+l+".drawingBufferWidth");e.set(l,".framebufferHeight",k+"?"+k+".height:"+l+".drawingBufferHeight");return k})}return null}function oa(c,e,b){function l(c){if(c in d){var k=d[c];f.commandType(k,"object","invalid "+c,b.commandStr);var g=!0,q=k.x|0,m=k.y|0,v,w;"width"in k?(v=k.width|0,f.command(0<=
v,"invalid "+c,b.commandStr)):g=!1;"height"in k?(w=k.height|0,f.command(0<=w,"invalid "+c,b.commandStr)):g=!1;return new C(!g&&e&&e.thisDep,!g&&e&&e.contextDep,!g&&e&&e.propDep,function(c,e){var b=c.shared.context,l=v;"width"in k||(l=e.def(b,".","framebufferWidth","-",q));var f=w;"height"in k||(f=e.def(b,".","framebufferHeight","-",m));return[q,m,l,f]})}if(c in a){var B=a[c],g=n(B,function(e,b){var l=e.invoke(b,B);f.optional(function(){e.assert(b,l+"&&typeof "+l+'==="object"',"invalid "+c)});var d=
e.shared.context,a=b.def(l,".x|0"),k=b.def(l,".y|0"),g=b.def('"width" in ',l,"?",l,".width|0:","(",d,".","framebufferWidth","-",a,")"),q=b.def('"height" in ',l,"?",l,".height|0:","(",d,".","framebufferHeight","-",k,")");f.optional(function(){e.assert(b,g+">=0&&"+q+">=0","invalid "+c)});return[a,k,g,q]});e&&(g.thisDep=g.thisDep||e.thisDep,g.contextDep=g.contextDep||e.contextDep,g.propDep=g.propDep||e.propDep);return g}return e?new C(e.thisDep,e.contextDep,e.propDep,function(c,e){var b=c.shared.context;
return[0,0,e.def(b,".","framebufferWidth"),e.def(b,".","framebufferHeight")]}):null}var d=c["static"],a=c.dynamic;if(c=l("viewport")){var k=c;c=new C(c.thisDep,c.contextDep,c.propDep,function(c,e){var b=k.append(c,e),l=c.shared.context;e.set(l,".viewportWidth",b[2]);e.set(l,".viewportHeight",b[3]);return b})}return{viewport:c,scissor_box:l("scissor.box")}}function K(c,e){var l=c["static"];if("string"===typeof l.frag&&"string"===typeof l.vert){if(0<b(e.dynamic).length)return null;var l=e["static"],
d=b(l);if(0<d.length&&"number"===typeof l[d[0]]){for(var a=[],k=0;k<d.length;++k)f("number"===typeof l[d[k]],"must specify all vertex attribute locations when using vaos"),a.push([l[d[k]]|0,d[k]]);return a}}return null}function L(c,e,b){function l(c){if(c in d){var e=z.id(d[c]);f.optional(function(){fa.shader(Da[c],e,f.guessCommand())});var b=p(function(){return e});b.id=e;return b}if(c in a){var k=a[c];return n(k,function(e,b){var l=e.invoke(b,k),d=b.def(e.shared.strings,".id(",l,")");f.optional(function(){b(e.shared.shader,
".shader(",Da[c],",",d,",",e.command,");")});return d})}return null}var d=c["static"],a=c.dynamic,k=l("frag"),g=l("vert"),q=null;u(k)&&u(g)?(q=fa.program(g.id,k.id,null,b),c=p(function(c,e){return c.link(q)})):c=new C(k&&k.thisDep||g&&g.thisDep,k&&k.contextDep||g&&g.contextDep,k&&k.propDep||g&&g.propDep,function(c,e){var b=c.shared.shader,l;l=k?k.append(c,e):e.def(b,".","frag");var d;d=g?g.append(c,e):e.def(b,".","vert");var a=b+".program("+d+","+l;f.optional(function(){a+=","+c.command});return e.def(a+
")")});return{frag:k,vert:g,progVar:c,program:q}}function da(c,e){function l(c,b){if(c in d){var a=d[c]|0;b?g.offset=a:g.instances=a;f.command(!b||0<=a,"invalid "+c,e.commandStr);return p(function(c,e){b&&(c.OFFSET=a);return a})}if(c in k){var q=k[c];return n(q,function(e,l){var d=e.invoke(l,q);b&&(e.OFFSET=d,f.optional(function(){e.assert(l,d+">=0","invalid "+c)}));return d})}if(b){if(w)return p(function(c,e){return c.OFFSET=0});if(m)return new C(v.thisDep,v.contextDep,v.propDep,function(c,e){return e.def(c.shared.vao+
".currentVAO?"+c.shared.vao+".currentVAO.offset:0")})}else if(m)return new C(v.thisDep,v.contextDep,v.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.instances:-1")});return null}var d=c["static"],k=c.dynamic,g={},m=!1,v=function(){if("vao"in d){var c=d.vao;null!==c&&null===M.getVAO(c)&&(c=M.createVAO(c));m=!0;g.vao=c;return p(function(e){var b=M.getVAO(c);return b?e.link(b):"null"})}if("vao"in k){m=!0;var e=k.vao;return n(e,function(c,b){var l=c.invoke(b,
e);return b.def(c.shared.vao+".getVAO("+l+")")})}return null}(),w=!1,B=function(){if("elements"in d){var c=d.elements;g.elements=c;if(a(c)){var b=g.elements=D.create(c,!0),c=D.getElements(b);w=!0}else c&&(c=D.getElements(c),w=!0,f.command(c,"invalid elements",e.commandStr));b=p(function(e,b){if(c){var l=e.link(c);return e.ELEMENTS=l}return e.ELEMENTS=null});b.value=c;return b}if("elements"in k){w=!0;var l=k.elements;return n(l,function(c,e){var b=c.shared,d=b.isBufferArgs,b=b.elements,a=c.invoke(e,
l),k=e.def("null"),d=e.def(d,"(",a,")"),g=c.cond(d).then(k,"=",b,".createStream(",a,");")["else"](k,"=",b,".getElements(",a,");");f.optional(function(){c.assert(g["else"],"!"+a+"||"+k,"invalid elements")});e.entry(g);e.exit(c.cond(d).then(b,".destroyStream(",k,");"));return c.ELEMENTS=k})}return m?new C(v.thisDep,v.contextDep,v.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.elements+".getElements("+c.shared.vao+".currentVAO.elements):null")}):null}(),z=l("offset",!0),x=function(){if("primitive"in
d){var c=d.primitive;g.primitive=c;f.commandParameter(c,q,"invalid primitve",e.commandStr);return p(function(e,b){return q[c]})}if("primitive"in k){var l=k.primitive;return n(l,function(c,e){var d=c.constants.primTypes,a=c.invoke(e,l);f.optional(function(){c.assert(e,a+" in "+d,"invalid primitive, must be one of "+b(q))});return e.def(d,"[",a,"]")})}return w?u(B)?B.value?p(function(c,e){return e.def(c.ELEMENTS,".primType")}):p(function(){return 4}):new C(B.thisDep,B.contextDep,B.propDep,function(c,
e){var b=c.ELEMENTS;return e.def(b,"?",b,".primType:",4)}):m?new C(v.thisDep,v.contextDep,v.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.primitive:4")}):null}(),y=function(){if("count"in d){var c=d.count|0;g.count=c;f.command("number"===typeof c&&0<=c,"invalid vertex count",e.commandStr);return p(function(){return c})}if("count"in k){var b=k.count;return n(b,function(c,e){var l=c.invoke(e,b);f.optional(function(){c.assert(e,"typeof "+l+'==="number"&&'+l+
">=0&&"+l+"===("+l+"|0)","invalid vertex count")});return l})}if(w){if(u(B)){if(B)return z?new C(z.thisDep,z.contextDep,z.propDep,function(c,e){var b=e.def(c.ELEMENTS,".vertCount-",c.OFFSET);f.optional(function(){c.assert(e,b+">=0","invalid vertex offset/element buffer too small")});return b}):p(function(c,e){return e.def(c.ELEMENTS,".vertCount")});var l=p(function(){return-1});f.optional(function(){l.MISSING=!0});return l}var a=new C(B.thisDep||z.thisDep,B.contextDep||z.contextDep,B.propDep||z.propDep,
function(c,e){var b=c.ELEMENTS;return c.OFFSET?e.def(b,"?",b,".vertCount-",c.OFFSET,":-1"):e.def(b,"?",b,".vertCount:-1")});f.optional(function(){a.DYNAMIC=!0});return a}return m?new C(v.thisDep,v.contextDep,v.propDep,function(c,e){return e.def(c.shared.vao,".currentVAO?",c.shared.vao,".currentVAO.count:-1")}):null}(),t=l("instances",!1);return{elements:B,primitive:x,count:y,instances:t,offset:z,vao:v,vaoActive:m,elementsActive:w,"static":g}}function V(c,e){var d=c["static"],a=c.dynamic,k={};ta.forEach(function(c){function g(e,
b){if(c in d){var l=e(d[c]);k[q]=p(function(){return l})}else if(c in a){var f=a[c];k[q]=n(f,function(c,e){return b(c,e,c.invoke(e,f))})}}var q=P(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return g(function(b){f.commandType(b,"boolean",c,e.commandStr);return b},function(e,b,l){f.optional(function(){e.assert(b,"typeof "+l+'==="boolean"',
"invalid flag "+c,e.commandStr)});return l});case "depth.func":return g(function(b){f.commandParameter(b,x,"invalid "+c,e.commandStr);return x[b]},function(e,l,d){var a=e.constants.compareFuncs;f.optional(function(){e.assert(l,d+" in "+a,"invalid "+c+", must be one of "+b(x))});return l.def(a,"[",d,"]")});case "depth.range":return g(function(c){f.command(l(c)&&2===c.length&&"number"===typeof c[0]&&"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",e.commandStr);return c},function(c,e,b){f.optional(function(){c.assert(e,
c.shared.isArrayLike+"("+b+")&&"+b+".length===2&&typeof "+b+'[0]==="number"&&typeof '+b+'[1]==="number"&&'+b+"[0]<="+b+"[1]","depth range must be a 2d array")});var l=e.def("+",b,"[0]"),d=e.def("+",b,"[1]");return[l,d]});case "blend.func":return g(function(c){f.commandType(c,"object","blend.func",e.commandStr);var b="srcRGB"in c?c.srcRGB:c.src,l="srcAlpha"in c?c.srcAlpha:c.src,d="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;f.commandParameter(b,B,q+".srcRGB",e.commandStr);f.commandParameter(l,
B,q+".srcAlpha",e.commandStr);f.commandParameter(d,B,q+".dstRGB",e.commandStr);f.commandParameter(c,B,q+".dstAlpha",e.commandStr);f.command(-1===la.indexOf(b+", "+d),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+d+")",e.commandStr);return[B[b],B[d],B[l],B[c]]},function(e,l,d){function a(g,q){var m=l.def('"',g,q,'" in ',d,"?",d,".",g,q,":",d,".",g);f.optional(function(){e.assert(l,m+" in "+k,"invalid "+c+"."+g+q+", must be one of "+b(B))});return m}var k=e.constants.blendFuncs;f.optional(function(){e.assert(l,
d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=a("src","RGB"),q=a("dst","RGB");f.optional(function(){e.assert(l,e.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+q+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var m=l.def(k,"[",g,"]"),v=l.def(k,"[",a("src","Alpha"),"]"),w=l.def(k,"[",q,"]"),n=l.def(k,"[",a("dst","Alpha"),"]");return[m,w,v,n]});case "blend.equation":return g(function(b){if("string"===typeof b)return f.commandParameter(b,
Ia,"invalid "+c,e.commandStr),[Ia[b],Ia[b]];if("object"===typeof b)return f.commandParameter(b.rgb,Ia,c+".rgb",e.commandStr),f.commandParameter(b.alpha,Ia,c+".alpha",e.commandStr),[Ia[b.rgb],Ia[b.alpha]];f.commandRaise("invalid blend.equation",e.commandStr)},function(e,l,d){var a=e.constants.blendEquations,k=l.def(),g=l.def(),q=e.cond("typeof ",d,'==="string"');f.optional(function(){function l(c,d,f){e.assert(c,f+" in "+a,"invalid "+d+", must be one of "+b(Ia))}l(q.then,c,d);e.assert(q["else"],d+
"&&typeof "+d+'==="object"',"invalid "+c);l(q["else"],c+".rgb",d+".rgb");l(q["else"],c+".alpha",d+".alpha")});q.then(k,"=",g,"=",a,"[",d,"];");q["else"](k,"=",a,"[",d,".rgb];",g,"=",a,"[",d,".alpha];");l(q);return[k,g]});case "blend.color":return g(function(c){f.command(l(c)&&4===c.length,"blend.color must be a 4d array",e.commandStr);return y(4,function(e){return+c[e]})},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","blend.color must be a 4d array")});
return y(4,function(c){return e.def("+",b,"[",c,"]")})});case "stencil.mask":return g(function(c){f.commandType(c,"number",q,e.commandStr);return c|0},function(c,e,b){f.optional(function(){c.assert(e,"typeof "+b+'==="number"',"invalid stencil.mask")});return e.def(b,"|0")});case "stencil.func":return g(function(b){f.commandType(b,"object",q,e.commandStr);var l=b.cmp||"keep",d=b.ref||0;b="mask"in b?b.mask:-1;f.commandParameter(l,x,c+".cmp",e.commandStr);f.commandType(d,"number",c+".ref",e.commandStr);
f.commandType(b,"number",c+".mask",e.commandStr);return[x[l],d,b]},function(c,e,b){var l=c.constants.compareFuncs;f.optional(function(){function d(){c.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}d(b+"&&typeof ",b,'==="object"');d('!("cmp" in ',b,")||(",b,".cmp in ",l,")")});var d=e.def('"cmp" in ',b,"?",l,"[",b,".cmp]",":",7680),a=e.def(b,".ref|0"),k=e.def('"mask" in ',b,"?",b,".mask|0:-1");return[d,a,k]});case "stencil.opFront":case "stencil.opBack":return g(function(b){f.commandType(b,
"object",q,e.commandStr);var l=b.fail||"keep",d=b.zfail||"keep";b=b.zpass||"keep";f.commandParameter(l,E,c+".fail",e.commandStr);f.commandParameter(d,E,c+".zfail",e.commandStr);f.commandParameter(b,E,c+".zpass",e.commandStr);return["stencil.opBack"===c?1029:1028,E[l],E[d],E[b]]},function(e,l,d){function a(g){f.optional(function(){e.assert(l,'!("'+g+'" in '+d+")||("+d+"."+g+" in "+k+")","invalid "+c+"."+g+", must be one of "+b(E))});return l.def('"',g,'" in ',d,"?",k,"[",d,".",g,"]:",7680)}var k=e.constants.stencilOps;
f.optional(function(){e.assert(l,d+"&&typeof "+d+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,a("fail"),a("zfail"),a("zpass")]});case "polygonOffset.offset":return g(function(c){f.commandType(c,"object",q,e.commandStr);var b=c.factor|0;c=c.units|0;f.commandType(b,"number",q+".factor",e.commandStr);f.commandType(c,"number",q+".units",e.commandStr);return[b,c]},function(e,b,l){f.optional(function(){e.assert(b,l+"&&typeof "+l+'==="object"',"invalid "+c)});var d=b.def(l,".factor|0"),
a=b.def(l,".units|0");return[d,a]});case "cull.face":return g(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);f.command(!!b,q,e.commandStr);return b},function(c,e,b){f.optional(function(){c.assert(e,b+'==="front"||'+b+'==="back"',"invalid cull.face")});return e.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return g(function(c){f.command("number"===typeof c&&c>=I.lineWidthDims[0]&&c<=I.lineWidthDims[1],"invalid line width, must be a positive number between "+I.lineWidthDims[0]+
" and "+I.lineWidthDims[1],e.commandStr);return c},function(c,e,b){f.optional(function(){c.assert(e,"typeof "+b+'==="number"&&'+b+">="+I.lineWidthDims[0]+"&&"+b+"<="+I.lineWidthDims[1],"invalid line width")});return b});case "frontFace":return g(function(c){f.commandParameter(c,H,q,e.commandStr);return H[c]},function(c,e,b){f.optional(function(){c.assert(e,b+'==="cw"||'+b+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(b+'==="cw"?2304:2305')});case "colorMask":return g(function(c){f.command(l(c)&&
4===c.length,"color.mask must be length 4 array",e.commandStr);return c.map(function(c){return!!c})},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","invalid color.mask")});return y(4,function(c){return"!!"+b+"["+c+"]"})});case "sample.coverage":return g(function(c){f.command("object"===typeof c&&c,q,e.commandStr);var b="value"in c?c.value:1;c=!!c.invert;f.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",
e.commandStr);return[b,c]},function(c,e,b){f.optional(function(){c.assert(e,b+"&&typeof "+b+'==="object"',"invalid sample.coverage")});var l=e.def('"value" in ',b,"?+",b,".value:1"),d=e.def("!!",b,".invert");return[l,d]})}});return k}function na(c,e){var d=c["static"],a=c.dynamic,k={};b(d).forEach(function(c){var b=d[c],a;if("number"===typeof b||"boolean"===typeof b)a=p(function(){return b});else if("function"===typeof b){var g=b._reglType;"texture2d"===g||"textureCube"===g?a=p(function(c){return c.link(b)}):
"framebuffer"===g||"framebufferCube"===g?(f.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',e.commandStr),a=p(function(c){return c.link(b.color[0])})):f.commandRaise('invalid data for uniform "'+c+'"',e.commandStr)}else l(b)?a=p(function(e){return e.global.def("[",y(b.length,function(l){f.command("number"===typeof b[l]||"boolean"===typeof b[l],"invalid uniform "+c,e.commandStr);return b[l]}),"]")}):f.commandRaise('invalid or missing data for uniform "'+
c+'"',e.commandStr);a.value=b;k[c]=a});b(a).forEach(function(c){var e=a[c];k[c]=n(e,function(c,b){return c.invoke(b,e)})});return k}function ia(c,e){var d=c["static"],k=c.dynamic,g={};b(d).forEach(function(c){var k=d[c],q=z.id(c),w=new wa;if(a(k))w.state=1,w.buffer=G.getBuffer(G.create(k,34962,!1,!0)),w.type=0;else{var B=G.getBuffer(k);if(B)w.state=1,w.buffer=B,w.type=0;else if(f.command("object"===typeof k&&k,"invalid data for attribute "+c,e.commandStr),"constant"in k){var n=k.constant;w.buffer=
"null";w.state=2;"number"===typeof n?w.x=n:(f.command(l(n)&&0<n.length&&4>=n.length,"invalid constant for attribute "+c,e.commandStr),v.forEach(function(c,e){e<n.length&&(w[c]=n[e])}))}else{B=a(k.buffer)?G.getBuffer(G.create(k.buffer,34962,!1,!0)):G.getBuffer(k.buffer);f.command(!!B,'missing buffer for attribute "'+c+'"',e.commandStr);var x=k.offset|0;f.command(0<=x,'invalid offset for attribute "'+c+'"',e.commandStr);var y=k.stride|0;f.command(0<=y&&256>y,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',
e.commandStr);var u=k.size|0;f.command(!("size"in k)||0<u&&4>=u,'invalid size for attribute "'+c+'", must be 1,2,3,4',e.commandStr);var D=!!k.normalized,t=0;"type"in k&&(f.commandParameter(k.type,m,"invalid type for attribute "+c,e.commandStr),t=m[k.type]);var E=k.divisor|0;f.optional(function(){"divisor"in k&&(f.command(0===E||ra,'cannot specify divisor for attribute "'+c+'", instancing not supported',e.commandStr),f.command(0<=E,'invalid divisor for attribute "'+c+'"',e.commandStr));var l=e.commandStr,
d="buffer offset divisor normalized type size stride".split(" ");b(k).forEach(function(e){f.command(0<=d.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+c+'" (valid parameters are '+d+")",l)})});w.buffer=B;w.state=1;w.size=u;w.normalized=D;w.type=t||B.dtype;w.offset=x;w.stride=y;w.divisor=E}}g[c]=p(function(c,e){var l=c.attribCache;if(q in l)return l[q];var d={isStream:!1};b(w).forEach(function(c){d[c]=w[c]});w.buffer&&(d.buffer=c.link(w.buffer),d.type=d.type||d.buffer+".dtype");return l[q]=
d})});b(k).forEach(function(c){var e=k[c];g[c]=n(e,function(l,d){function k(c){d(B[c],"=",a,".",c,"|0;")}var a=l.invoke(d,e),g=l.shared,q=l.constants,m=g.isBufferArgs,w=g.buffer;f.optional(function(){l.assert(d,a+"&&(typeof "+a+'==="object"||typeof '+a+'==="function")&&('+m+"("+a+")||"+w+".getBuffer("+a+")||"+w+".getBuffer("+a+".buffer)||"+m+"("+a+'.buffer)||("constant" in '+a+"&&(typeof "+a+'.constant==="number"||'+g.isArrayLike+"("+a+".constant))))",'invalid dynamic attribute "'+c+'"')});var B=
{isStream:d.def(!1)},n=new wa;n.state=1;b(n).forEach(function(c){B[c]=d.def(""+n[c])});var z=B.buffer,x=B.type;d("if(",m,"(",a,")){",B.isStream,"=true;",z,"=",w,".createStream(",34962,",",a,");",x,"=",z,".dtype;","}else{",z,"=",w,".getBuffer(",a,");","if(",z,"){",x,"=",z,".dtype;",'}else if("constant" in ',a,"){",B.state,"=",2,";","if(typeof "+a+'.constant === "number"){',B[v[0]],"=",a,".constant;",v.slice(1).map(function(c){return B[c]}).join("="),"=0;","}else{",v.map(function(c,e){return B[c]+"="+
a+".constant.length>"+e+"?"+a+".constant["+e+"]:0;"}).join(""),"}}else{","if(",m,"(",a,".buffer)){",z,"=",w,".createStream(",34962,",",a,".buffer);","}else{",z,"=",w,".getBuffer(",a,".buffer);","}",x,'="type" in ',a,"?",q.glTypes,"[",a,".type]:",z,".dtype;",B.normalized,"=!!",a,".normalized;");k("size");k("offset");k("stride");k("divisor");d("}}");d.exit("if(",B.isStream,"){",w,".destroyStream(",z,");","}");return B})});return g}function ya(c){var e=c["static"],l=c.dynamic,d={};b(e).forEach(function(c){var b=
e[c];d[c]=p(function(c,e){return"number"===typeof b||"boolean"===typeof b?""+b:c.link(b)})});b(l).forEach(function(c){var e=l[c];d[c]=n(e,function(c,b){return c.invoke(b,e)})});return d}function va(c,e,l,d,a){function k(c){var e=w[c];e&&(n[c]=e)}var g=c["static"],q=c.dynamic;f.optional(function(){function c(l){b(l).forEach(function(c){f.command(0<=e.indexOf(c),'unknown parameter "'+c+'"',a.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);
c(g);c(q)});var m=K(c,e),v=qa(c,a),w=oa(c,v,a),B=da(c,a),n=V(c,a),z=L(c,a,m);k("viewport");k(P("scissor.box"));var x=0<b(n).length,v={framebuffer:v,draw:B,shader:z,state:n,dirty:x,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};v.profile=R(c,a);v.uniforms=na(l,a);v.drawVAO=v.scopeVAO=B.vao;if(!v.drawVAO&&z.program&&!m&&h.angle_instanced_arrays&&B["static"].elements){var y=!0;c=z.program.attributes.map(function(c){c=e["static"][c];y=y&&!!c;return c});if(y&&0<c.length){var u=M.getVAO(M.createVAO({attributes:c,
elements:B["static"].elements}));v.drawVAO=new C(null,null,null,function(c,e){return c.link(u)});v.useVAO=!0}}m?v.useVAO=!0:v.attributes=ia(e,a);v.context=ya(d,a);return v}function ba(c,e,l){var d=c.shared.context,a=c.scope();b(l).forEach(function(b){e.save(d,"."+b);var f=l[b].append(c,e);Array.isArray(f)?a(d,".",b,"=[",f.join(),"];"):a(d,".",b,"=",f,";")});e(a)}function Ca(c,e,b,l){var d=c.shared,a=d.gl,f=d.framebuffer,k;xa&&(k=e.def(d.extensions,".webgl_draw_buffers"));var g=c.constants,d=g.drawBuffer,
g=g.backBuffer;c=b?b.append(c,e):e.def(f,".next");l||e("if(",c,"!==",f,".cur){");e("if(",c,"){",a,".bindFramebuffer(",36160,",",c,".framebuffer);");xa&&e(k,".drawBuffersWEBGL(",d,"[",c,".colorAttachments.length]);");e("}else{",a,".bindFramebuffer(",36160,",null);");xa&&e(k,".drawBuffersWEBGL(",g,");");e("}",f,".cur=",c,";");l||e("}")}function ka(c,e,l){var d=c.shared,a=d.gl,f=c.current,k=c.next,g=d.current,q=d.next,m=c.cond(g,".dirty");ta.forEach(function(e){e=P(e);if(!(e in l.state)){var b,d;if(e in
k){b=k[e];d=f[e];var v=y(ja[e].length,function(c){return m.def(b,"[",c,"]")});m(c.cond(v.map(function(c,e){return c+"!=="+d+"["+e+"]"}).join("||")).then(a,".",Ha[e],"(",v,");",v.map(function(c,e){return d+"["+e+"]="+c}).join(";"),";"))}else b=m.def(q,".",e),v=c.cond(b,"!==",g,".",e),m(v),e in Fa?v(c.cond(b).then(a,".enable(",Fa[e],");")["else"](a,".disable(",Fa[e],");"),g,".",e,"=",b,";"):v(a,".",Ha[e],"(",b,");",g,".",e,"=",b,";")}});0===b(l.state).length&&m(g,".dirty=false;");e(m)}function pa(c,
e,a,f){var k=c.shared,g=c.current,q=k.current,m=k.gl;d(b(a)).forEach(function(b){var d=a[b];if(!f||f(d)){var k=d.append(c,e);if(Fa[b]){var v=Fa[b];u(d)?k?e(m,".enable(",v,");"):e(m,".disable(",v,");"):e(c.cond(k).then(m,".enable(",v,");")["else"](m,".disable(",v,");"));e(q,".",b,"=",k,";")}else if(l(k)){var w=g[b];e(m,".",Ha[b],"(",k,");",k.map(function(c,e){return w+"["+e+"]="+c}).join(";"),";")}else e(m,".",Ha[b],"(",k,");",q,".",b,"=",k,";")}})}function za(c,e){ra&&(c.instancing=e.def(c.shared.extensions,
".angle_instanced_arrays"))}function Qa(c,e,b,l,d){function a(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function k(c){B=e.def();c(B,"=",a(),";");"string"===typeof d?c(m,".count+=",d,";"):c(m,".count++;");X&&(l?(n=e.def(),c(n,"=",w,".getNumPendingQueries();")):c(w,".beginQuery(",m,");"))}function f(c){c(m,".cpuTime+=",a(),"-",B,";");X&&(l?c(w,".pushScopeStats(",n,",",w,".getNumPendingQueries(),",m,");"):c(w,".endQuery();"))}function g(c){var b=e.def(v,".profile");e(v,
".profile=",c,";");e.exit(v,".profile=",b,";")}var q=c.shared,m=c.stats,v=q.current,w=q.timer;b=b.profile;var B,n;if(b){if(u(b)){b.enable?(k(e),f(e.exit),g("true")):g("false");return}b=b.append(c,e);g(b)}else b=e.def(v,".profile");q=c.block();k(q);e("if(",b,"){",q,"}");c=c.block();f(c);e.exit("if(",b,"){",c,"}")}function Ka(c,e,l,d,a){function k(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function g(b,l,d){function a(){e("if(!",w,".buffer){",f,".enableVertexAttribArray(",m,");}");var b=d.type,k;k=d.size?e.def(d.size,"||",l):l;e("if(",w,".type!==",b,"||",w,".size!==",k,"||",z.map(function(c){return w+"."+c+"!=="+d[c]}).join("||"),"){",f,".bindBuffer(",34962,",",B,".buffer);",f,".vertexAttribPointer(",[m,k,b,d.normalized,d.stride,d.offset],");",w,".type=",b,";",w,".size=",k,";",z.map(function(c){return w+"."+c+"="+d[c]+";"}).join(""),"}");ra&&(b=d.divisor,e("if(",w,".divisor!==",b,"){",
c.instancing,".vertexAttribDivisorANGLE(",[m,b],");",w,".divisor=",b,";}"))}function k(){e("if(",w,".buffer){",f,".disableVertexAttribArray(",m,");",w,".buffer=null;","}if(",v.map(function(c,e){return w+"."+c+"!=="+n[e]}).join("||"),"){",f,".vertexAttrib4f(",m,",",n,");",v.map(function(c,e){return w+"."+c+"="+n[e]+";"}).join(""),"}")}var f=q.gl,m=e.def(b,".location"),w=e.def(q.attributes,"[",m,"]");b=d.state;var B=d.buffer,n=[d.x,d.y,d.z,d.w],z=["buffer","normalized","offset","stride"];1===b?a():
2===b?k():(e("if(",b,"===",1,"){"),a(),e("}else{"),k(),e("}"))}var q=c.shared;d.forEach(function(d){var q=d.name,m=l.attributes[q],v;if(m){if(!a(m))return;v=m.append(c,e)}else{if(!a(ga))return;var w=c.scopeAttrib(q);f.optional(function(){c.assert(e,w+".state","missing attribute "+q)});v={};b(new wa).forEach(function(c){v[c]=e.def(w,".",c)})}g(c.link(d),k(d.info.type),v)})}function Hb(c,e,b,d,a,k){for(var g=c.shared,q=g.gl,m,v=0;v<d.length;++v){var w=d[v],B=w.name,n=w.info.type,x=b.uniforms[B],w=c.link(w)+
".location",D;if(x){if(!a(x))continue;if(u(x)){var t=x.value;f.command(null!==t&&"undefined"!==typeof t,'missing uniform "'+B+'"',c.commandStr);if(35678===n||35680===n)f.command("function"===typeof t&&(35678===n&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===n&&("textureCube"===t._reglType||"framebufferCube"===t._reglType)),"invalid texture for uniform "+B,c.commandStr),x=c.link(t._texture||t.color[0]._texture),e(q,".uniform1i(",w,",",x+".bind());"),e.exit(x,".unbind();");else if(35674===
n||35675===n||35676===n){f.optional(function(){f.command(l(t),"invalid matrix for uniform "+B,c.commandStr);f.command(35674===n&&4===t.length||35675===n&&9===t.length||35676===n&&16===t.length,"invalid length for matrix uniform "+B,c.commandStr)});var x=c.global.def("new Float32Array(["+Array.prototype.slice.call(t)+"])"),p=2;35675===n?p=3:35676===n&&(p=4);e(q,".uniformMatrix",p,"fv(",w,",false,",x,");")}else{switch(n){case 5126:f.commandType(t,"number","uniform "+B,c.commandStr);m="1f";break;case 35664:f.command(l(t)&&
2===t.length,"uniform "+B,c.commandStr);m="2f";break;case 35665:f.command(l(t)&&3===t.length,"uniform "+B,c.commandStr);m="3f";break;case 35666:f.command(l(t)&&4===t.length,"uniform "+B,c.commandStr);m="4f";break;case 35670:f.commandType(t,"boolean","uniform "+B,c.commandStr);m="1i";break;case 5124:f.commandType(t,"number","uniform "+B,c.commandStr);m="1i";break;case 35671:f.command(l(t)&&2===t.length,"uniform "+B,c.commandStr);m="2i";break;case 35667:f.command(l(t)&&2===t.length,"uniform "+B,c.commandStr);
m="2i";break;case 35672:f.command(l(t)&&3===t.length,"uniform "+B,c.commandStr);m="3i";break;case 35668:f.command(l(t)&&3===t.length,"uniform "+B,c.commandStr);m="3i";break;case 35673:f.command(l(t)&&4===t.length,"uniform "+B,c.commandStr);m="4i";break;case 35669:f.command(l(t)&&4===t.length,"uniform "+B,c.commandStr),m="4i"}e(q,".uniform",m,"(",w,",",l(t)?Array.prototype.slice.call(t):t,");")}continue}else D=x.append(c,e)}else{if(!a(ga))continue;D=e.def(g.uniforms,"[",z.id(B),"]")}35678===n?(f(!Array.isArray(D),
"must specify a scalar prop for textures"),e("if(",D,"&&",D,'._reglType==="framebuffer"){',D,"=",D,".color[0];","}")):35680===n&&(f(!Array.isArray(D),"must specify a scalar prop for cube maps"),e("if(",D,"&&",D,'._reglType==="framebufferCube"){',D,"=",D,".color[0];","}"));f.optional(function(){function b(l,d){c.assert(e,l,'bad data or missing for uniform "'+B+'".  '+d)}function l(c){f(!Array.isArray(D),"must not specify an array type for uniform");b("typeof "+D+'==="'+c+'"',"invalid type, expected "+
c)}function d(e,l){Array.isArray(D)?f(D.length===e,"must have length "+e):b(g.isArrayLike+"("+D+")&&"+D+".length==="+e,"invalid vector, should have length "+e,c.commandStr)}function a(e){f(!Array.isArray(D),"must not specify a value type");b("typeof "+D+'==="function"&&'+D+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(n){case 5124:l("number");break;case 35667:d(2,"number");break;case 35668:d(3,"number");break;case 35669:d(4,"number");break;case 5126:l("number");
break;case 35664:d(2,"number");break;case 35665:d(3,"number");break;case 35666:d(4,"number");break;case 35670:l("boolean");break;case 35671:d(2,"boolean");break;case 35672:d(3,"boolean");break;case 35673:d(4,"boolean");break;case 35674:d(4,"number");break;case 35675:d(9,"number");break;case 35676:d(16,"number");break;case 35678:a(3553);break;case 35680:a(34067)}});x=1;switch(n){case 35678:case 35680:x=e.def(D,"._texture");e(q,".uniform1i(",w,",",x,".bind());");e.exit(x,".unbind();");continue;case 5124:case 35670:m=
"1i";break;case 35667:case 35671:m="2i";x=2;break;case 35668:case 35672:m="3i";x=3;break;case 35669:case 35673:m="4i";x=4;break;case 5126:m="1f";break;case 35664:m="2f";x=2;break;case 35665:m="3f";x=3;break;case 35666:m="4f";x=4;break;case 35674:m="Matrix2fv";break;case 35675:m="Matrix3fv";break;case 35676:m="Matrix4fv"}if("M"===m.charAt(0)){e(q,".uniform",m,"(",w,",");var w=Math.pow(n-35674+2,2),E=c.global.def("new Float32Array(",w,")");Array.isArray(D)?e("false,(",y(w,function(c){return E+"["+c+
"]="+D[c]}),",",E,")"):e("false,(Array.isArray(",D,")||",D," instanceof Float32Array)?",D,":(",y(w,function(c){return E+"["+c+"]="+D+"["+c+"]"}),",",E,")");e(");")}else{if(1<x){for(var p=[],H=[],C=0;C<x;++C)Array.isArray(D)?H.push(D[C]):H.push(e.def(D+"["+C+"]")),k&&p.push(e.def());k&&e("if(!",c.batchId,"||",p.map(function(c,e){return c+"!=="+H[e]}).join("||"),"){",p.map(function(c,e){return c+"="+H[e]+";"}).join(""));e(q,".uniform",m,"(",w,",",H.join(","),");")}else f(!Array.isArray(D),"uniform value must not be an array"),
k&&(x=e.def(),e("if(!",c.batchId,"||",x,"!==",D,"){",x,"=",D,";")),e(q,".uniform",m,"(",w,",",D,");");k&&e("}")}}}function Va(c,e,b,l){function d(a){var k=v[a];return k?k.contextDep&&l.contextDynamic||k.propDep?k.append(c,b):k.append(c,e):e.def(m,".",a)}function a(){function c(){b(y,".drawElementsInstancedANGLE(",[B,x,D,n+"<<(("+D+"-5121)>>1)",z],");")}function e(){b(y,".drawArraysInstancedANGLE(",[B,n,x,z],");")}w&&"null"!==w?t?c():(b("if(",w,"){"),c(),b("}else{"),e(),b("}")):e()}function k(){function c(){b(q+
".drawElements("+[B,x,D,n+"<<(("+D+"-5121)>>1)"]+");")}function e(){b(q+".drawArrays("+[B,n,x]+");")}w&&"null"!==w?t?c():(b("if(",w,"){"),c(),b("}else{"),e(),b("}")):e()}var g=c.shared,q=g.gl,m=g.draw,v=l.draw,w=function(){var d=v.elements,a=e;if(d){if(d.contextDep&&l.contextDynamic||d.propDep)a=b;d=d.append(c,a);v.elementsActive&&a("if("+d+")"+q+".bindBuffer(34963,"+d+".buffer.buffer);")}else d=a.def(),a(d,"=",m,".","elements",";","if(",d,"){",q,".bindBuffer(",34963,",",d,".buffer.buffer);}","else if(",
g.vao,".currentVAO){",d,"=",c.shared.elements+".getElements("+g.vao,".currentVAO.elements);",Ba?"":"if("+d+")"+q+".bindBuffer(34963,"+d+".buffer.buffer);","}");return d}(),B=d("primitive"),n=d("offset"),x=function(){var d=v.count,a,k=e;if(d){if(d.contextDep&&l.contextDynamic||d.propDep)k=b;a=d.append(c,k);f.optional(function(){d.MISSING&&c.assert(e,"false","missing vertex count");d.DYNAMIC&&c.assert(k,a+">=0","missing vertex count")})}else a=k.def(m,".","count"),f.optional(function(){c.assert(k,a+
">=0","missing vertex count")});return a}();if("number"===typeof x){if(0===x)return}else b("if(",x,"){"),b.exit("}");var z,y;ra&&(z=d("instances"),y=c.instancing);var D=w+".type",t=v.elements&&u(v.elements)&&!v.vaoActive;ra&&("number"!==typeof z||0<=z)?"string"===typeof z?(b("if(",z,">0){"),a(),b("}else if(",z,"<0){"),k(),b("}")):a():k()}function ha(c,e,b,l,d){var a=Q();d=a.proc("body",d);f.optional(function(){a.commandStr=e.commandStr;a.command=a.link(e.commandStr)});ra&&(a.instancing=d.def(a.shared.extensions,
".angle_instanced_arrays"));c(a,d,b,l);return a.compile().body}function ea(c,e,b,l){za(c,e);b.useVAO?b.drawVAO?e(c.shared.vao,".setVAO(",b.drawVAO.append(c,e),");"):e(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(e(c.shared.vao,".setVAO(null);"),Ka(c,e,b,l.attributes,function(){return!0}));Hb(c,e,b,l.uniforms,function(){return!0},!1);Va(c,e,e,b)}function sa(c,e){var l=c.proc("draw",1);za(c,l);ba(c,l,e.context);Ca(c,l,e.framebuffer);ka(c,l,e);pa(c,l,e.state);Qa(c,l,e,!1,!0);var d=e.shader.progVar.append(c,
l);l(c.shared.gl,".useProgram(",d,".program);");if(e.shader.program)ea(c,l,e,e.shader.program);else{l(c.shared.vao,".setVAO(null);");var a=c.global.def("{}"),k=l.def(d,".id"),f=l.def(a,"[",k,"]");l(c.cond(f).then(f,".call(this,a0);")["else"](f,"=",a,"[",k,"]=",c.link(function(b){return ha(ea,c,e,b,1)}),"(",d,");",f,".call(this,a0);"))}0<b(e.state).length&&l(c.shared.current,".dirty=true;");c.shared.vao&&l(c.shared.vao,".setVAO(null);")}function ua(c,e,b,l){function d(){return!0}c.batchId="a1";za(c,
e);Ka(c,e,b,l.attributes,d);Hb(c,e,b,l.uniforms,d,!1);Va(c,e,e,b)}function Ea(c,e,b,l){function d(c){return c.contextDep&&k||c.propDep}function a(c){return!d(c)}za(c,e);var k=b.contextDep,f=e.def(),g=e.def();c.shared.props=g;c.batchId=f;var q=c.scope(),m=c.scope();e(q.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",g,"=","a0","[",f,"];",m,"}",q.exit);b.needsContext&&ba(c,m,b.context);b.needsFramebuffer&&Ca(c,m,b.framebuffer);pa(c,m,b.state,d);b.profile&&d(b.profile)&&Qa(c,m,b,!1,!0);l?(b.useVAO?b.drawVAO?
d(b.drawVAO)?m(c.shared.vao,".setVAO(",b.drawVAO.append(c,m),");"):q(c.shared.vao,".setVAO(",b.drawVAO.append(c,q),");"):q(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(q(c.shared.vao,".setVAO(null);"),Ka(c,q,b,l.attributes,a),Ka(c,m,b,l.attributes,d)),Hb(c,q,b,l.uniforms,a,!1),Hb(c,m,b,l.uniforms,d,!0),Va(c,q,m,b)):(e=c.global.def("{}"),l=b.shader.progVar.append(c,m),g=m.def(l,".id"),q=m.def(e,"[",g,"]"),m(c.shared.gl,".useProgram(",l,".program);","if(!",q,"){",q,"=",e,"[",g,"]=",c.link(function(e){return ha(ua,
c,b,e,2)}),"(",l,");}",q,".call(this,a0[",f,"],",f,");"))}function Ra(c,e){function l(c){return c.contextDep&&a||c.propDep}var d=c.proc("batch",2);c.batchId="0";za(c,d);var a=!1,k=!0;b(e.context).forEach(function(c){a=a||e.context[c].propDep});a||(ba(c,d,e.context),k=!1);var f=e.framebuffer,g=!1;f?(f.propDep?a=g=!0:f.contextDep&&a&&(g=!0),g||Ca(c,d,f)):Ca(c,d,null);e.state.viewport&&e.state.viewport.propDep&&(a=!0);ka(c,d,e);pa(c,d,e.state,function(c){return!l(c)});e.profile&&l(e.profile)||Qa(c,d,
e,!1,"a1");e.contextDep=a;e.needsContext=k;e.needsFramebuffer=g;k=e.shader.progVar;if(k.contextDep&&a||k.propDep)Ea(c,d,e,null);else if(k=k.append(c,d),d(c.shared.gl,".useProgram(",k,".program);"),e.shader.program)Ea(c,d,e,e.shader.program);else{d(c.shared.vao,".setVAO(null);");var f=c.global.def("{}"),g=d.def(k,".id"),q=d.def(f,"[",g,"]");d(c.cond(q).then(q,".call(this,a0,a1);")["else"](q,"=",f,"[",g,"]=",c.link(function(b){return ha(Ea,c,e,b,2)}),"(",k,");",q,".call(this,a0,a1);"))}0<b(e.state).length&&
d(c.shared.current,".dirty=true;");c.shared.vao&&d(c.shared.vao,".setVAO(null);")}function Gb(c,e){function a(b){var l=e.shader[b];l&&k.set(f.shader,"."+b,l.append(c,k))}var k=c.proc("scope",3);c.batchId="a2";var f=c.shared,g=f.current;ba(c,k,e.context);e.framebuffer&&e.framebuffer.append(c,k);d(b(e.state)).forEach(function(b){var d=e.state[b].append(c,k);l(d)?d.forEach(function(e,l){k.set(c.next[b],"["+l+"]",e)}):k.set(f.next,"."+b,d)});Qa(c,k,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var l=
e.draw[b];l&&k.set(f.draw,"."+b,""+l.append(c,k))});b(e.uniforms).forEach(function(b){var l=e.uniforms[b].append(c,k);Array.isArray(l)&&(l="["+l.join()+"]");k.set(f.uniforms,"["+z.id(b)+"]",l)});b(e.attributes).forEach(function(l){var d=e.attributes[l].append(c,k),a=c.scopeAttrib(l);b(new wa).forEach(function(c){k.set(a,"."+c,d[c])})});e.scopeVAO&&k.set(f.vao,".targetVAO",e.scopeVAO.append(c,k));a("vert");a("frag");0<b(e.state).length&&(k(g,".dirty=true;"),k.exit(g,".dirty=true;"));k("a1(",c.shared.context,
",a0,",c.batchId,");")}function Z(c){if("object"===typeof c&&!l(c)){for(var e=b(c),d=0;d<e.length;++d)if(g.isDynamic(c[e[d]]))return!0;return!1}}function W(c,e,l){function d(c,e){f.forEach(function(b){var l=a[b];g.isDynamic(l)&&(l=c.invoke(e,l),e(w,".",b,"=",l,";"))})}var a=e["static"][l];if(a&&Z(a)){var k=c.global,f=b(a),q=!1,m=!1,v=!1,w=c.global.def("{}");f.forEach(function(e){var b=a[e];if(g.isDynamic(b))"function"===typeof b&&(b=a[e]=g.unbox(b)),e=n(b,null),q=q||e.thisDep,v=v||e.propDep,m=m||
e.contextDep;else{k(w,".",e,"=");switch(typeof b){case "number":k(b);break;case "string":k('"',b,'"');break;case "object":Array.isArray(b)&&k("[",b.join(),"]");break;default:k(c.link(b))}k(";")}});e.dynamic[l]=new g.DynamicVariable(4,{thisDep:q,contextDep:m,propDep:v,ref:w,append:d});delete e["static"][l]}}var wa=M.Record,Ia={add:32774,subtract:32778,"reverse subtract":32779};h.ext_blend_minmax&&(Ia.min=32775,Ia.max=32776);var ra=h.angle_instanced_arrays,xa=h.webgl_draw_buffers,Ba=h.oes_vertex_array_object,
ja={dirty:!0,profile:S.profile},Y={},ta=[],Fa={},Ha={};N("dither",3024);N("blend.enable",3042);O("blend.color","blendColor",[0,0,0,0]);O("blend.equation","blendEquationSeparate",[32774,32774]);O("blend.func","blendFuncSeparate",[1,0,1,0]);N("depth.enable",2929,!0);O("depth.func","depthFunc",513);O("depth.range","depthRange",[0,1]);O("depth.mask","depthMask",!0);O("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);O("cull.face","cullFace",1029);O("frontFace","frontFace",2305);O("lineWidth",
"lineWidth",1);N("polygonOffset.enable",32823);O("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);O("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);O("stencil.mask","stencilMask",-1);O("stencil.func","stencilFunc",[519,0,-1]);O("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);O("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);O("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);
O("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var fb={gl:e,context:T,strings:z,next:Y,current:ja,draw:Aa,elements:D,buffer:G,shader:fa,attributes:M.state,vao:M,uniforms:r,framebuffer:t,extensions:h,timer:X,isBufferArgs:a},aa={primTypes:q,compareFuncs:x,blendFuncs:B,blendEquations:Ia,stencilOps:E,glTypes:m,orientationType:H};f.optional(function(){fb.isArrayLike=l});xa&&(aa.backBuffer=[1029],aa.drawBuffer=y(I.maxDrawbuffers,function(c){return 0===c?[0]:y(c,function(c){return 36064+
c})}));var Kc=0;return{next:Y,current:ja,procs:function(){var c=Q(),e=c.proc("poll"),d=c.proc("refresh"),a=c.block();e(a);d(a);var k=c.shared,f=k.gl,g=k.next,q=k.current;a(q,".dirty=false;");Ca(c,e);Ca(c,d,null,!0);var m;ra&&(m=c.link(ra));h.oes_vertex_array_object&&d(c.link(h.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var v=0;v<I.maxAttributes;++v){var w=d.def(k.attributes,"[",v,"]"),B=c.cond(w,".buffer");B.then(f,".enableVertexAttribArray(",v,");",f,".bindBuffer(",34962,",",w,".buffer.buffer);",
f,".vertexAttribPointer(",v,",",w,".size,",w,".type,",w,".normalized,",w,".stride,",w,".offset);")["else"](f,".disableVertexAttribArray(",v,");",f,".vertexAttrib4f(",v,",",w,".x,",w,".y,",w,".z,",w,".w);",w,".buffer=null;");d(B);ra&&d(m,".vertexAttribDivisorANGLE(",v,",",w,".divisor);")}d(c.shared.vao,".currentVAO=null;",c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);");b(Fa).forEach(function(b){var l=Fa[b],k=a.def(g,".",b),m=c.block();m("if(",k,"){",f,".enable(",l,")}else{",f,".disable(",l,")}",
q,".",b,"=",k,";");d(m);e("if(",k,"!==",q,".",b,"){",m,"}")});b(Ha).forEach(function(b){var k=Ha[b],m=ja[b],v,w,B=c.block();B(f,".",k,"(");l(m)?(k=m.length,v=c.global.def(g,".",b),w=c.global.def(q,".",b),B(y(k,function(c){return v+"["+c+"]"}),");",y(k,function(c){return w+"["+c+"]="+v+"["+c+"];"}).join("")),e("if(",y(k,function(c){return v+"["+c+"]!=="+w+"["+c+"]"}).join("||"),"){",B,"}")):(v=a.def(g,".",b),w=a.def(q,".",b),B(v,");",q,".",b,"=",v,";"),e("if(",v,"!==",w,"){",B,"}"));d(B)});return c.compile()}(),
compile:function(e,l,d,a,k){var f=Q();f.stats=f.link(k);b(l["static"]).forEach(function(c){W(f,l,c)});w.forEach(function(c){W(f,e,c)});var g=va(e,l,d,a,f);sa(f,g);Gb(f,g);Ra(f,g);return c(f.compile(),{destroy:function(){g.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],
9:[function(h,r,J){function a(b,d){this.id=n++;this.type=b;this.data=d}function d(b){if(0===b.length)return[];var a=b.charAt(0),c=b.charAt(b.length-1);if(1<b.length&&a===c&&('"'===a||"'"===a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return d(b.substr(0,a.index)).concat(d(a[1])).concat(d(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+
'"'];b=[];for(c=0;c<a.length;++c)b=b.concat(d(a[c]));return b}function C(b){return"["+d(b).join("][")+"]"}function u(b,d){if("function"===typeof b)return new a(0,b);if("number"===typeof b||"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(c,b){return u(c,d+"["+b+"]")}));if(b instanceof a)return b;p(!1,"invalid option type in uniform "+d)}var p=h("./util/check"),n=0;r.exports={DynamicVariable:a,define:function(b,d){return new a(b,C(d+""))},isDynamic:function(b){return"function"===
typeof b&&!b._reglType||b instanceof a},unbox:u,accessor:C}},{"./util/check":21}],10:[function(h,r,J){var a=h("./util/check"),d=h("./util/is-typed-array"),C=h("./util/is-ndarray"),u=h("./util/values"),p=h("./constants/primitives.json"),n=h("./constants/usage.json");r.exports=function(b,f,c,k){function y(c){this.id=g++;l[this.id]=this;this.buffer=c;this.primType=4;this.type=this.vertCount=0}function z(e,l,k,g,q,m,n){e.buffer.bind();var z;l?((z=n)||d(l)&&(!C(l)||d(l.data))||(z=f.oes_element_index_uint?
5125:5123),c._initBuffer(e.buffer,l,k,z,3)):(b.bufferData(34963,m,k),e.buffer.dtype=z||5121,e.buffer.usage=k,e.buffer.dimension=3,e.buffer.byteLength=m);z=n;if(!n){switch(e.buffer.dtype){case 5121:case 5120:z=5121;break;case 5123:case 5122:z=5123;break;case 5125:case 5124:z=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=z}e.type=z;a(5125!==z||!!f.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");l=q;0>l&&(l=e.buffer.byteLength,
5123===z?l>>=1:5125===z&&(l>>=2));e.vertCount=l;l=g;0>g&&(l=4,g=e.buffer.dimension,1===g&&(l=0),2===g&&(l=1),3===g&&(l=4));e.primType=l}function e(c){k.elementsCount--;a(null!==c.buffer,"must not double destroy elements");delete l[c.id];c.buffer.destroy();c.buffer=null}var l={},g=0,q={uint8:5121,uint16:5123};f.oes_element_index_uint&&(q.uint32=5125);y.prototype.bind=function(){this.buffer.bind()};var m=[];return{create:function(b,l){function f(c){if(c)if("number"===typeof c)g(c),m.primType=4,m.vertCount=
c|0,m.type=5121;else{var e=null,b=35044,l=-1,k=-1,v=0,w=0;if(Array.isArray(c)||d(c)||C(c))e=c;else if(a.type(c,"object","invalid arguments for elements"),"data"in c&&(e=c.data,a(Array.isArray(e)||d(e)||C(e),"invalid data for element buffer")),"usage"in c&&(a.parameter(c.usage,n,"invalid element buffer usage"),b=n[c.usage]),"primitive"in c&&(a.parameter(c.primitive,p,"invalid element buffer primitive"),l=p[c.primitive]),"count"in c&&(a("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),
k=c.count|0),"type"in c&&(a.parameter(c.type,q,"invalid buffer type"),w=q[c.type]),"length"in c)v=c.length|0;else if(v=k,5123===w||5122===w)v*=2;else if(5125===w||5124===w)v*=4;z(m,e,b,l,k,v,w)}else g(),m.primType=4,m.vertCount=0,m.type=5121;return f}var g=c.create(null,34963,!0),m=new y(g._buffer);k.elementsCount++;f(b);f._reglType="elements";f._elements=m;f.subdata=function(c,e){g.subdata(c,e);return f};f.destroy=function(){e(m)};return f},createStream:function(e){var b=m.pop();b||(b=new y(c.create(null,
34963,!0,!1)._buffer));z(b,e,35040,-1,-1,0,0);return b},destroyStream:function(c){m.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof y?c._elements:null},clear:function(){u(l).forEach(e)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(h,r,J){var a=h("./util/sorted-object-keys"),d=h("./util/check");r.exports=function(C,u){function p(c){d.type(c,"string",
"extension name must be string");c=c.toLowerCase();var b;try{b=n[c]=C.getExtension(c)}catch(a){}return!!b}for(var n={},b=0;b<u.extensions.length;++b){var f=u.extensions[b];if(!p(f))return u.onDestroy(),u.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}u.optionalExtensions.forEach(p);return{extensions:n,restore:function(){a(n).forEach(function(c){if(n[c]&&!p(c))throw Error("(regl): error restoring extension "+c);})}}}},
{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(h,r,J){var a=h("./util/check"),d=h("./util/values"),C=h("./util/extend"),u=[6407,6408],p=[];p[6408]=4;p[6407]=3;var n=[];n[5121]=1;n[5126]=4;n[36193]=2;var b=[32854,32855,36194,35907,34842,34843,34836],f={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};r.exports=function(c,k,y,z,e,l){function g(c,e,b){this.target=c;this.texture=e;this.renderbuffer=
b;var l=c=0;e?(c=e.width,l=e.height):b&&(c=b.width,l=b.height);this.width=c;this.height=l}function q(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function m(c,e,b){if(c){if(c.texture){c=c.texture._texture;var l=Math.max(1,c.height);a(Math.max(1,c.width)===e&&l===b,"inconsistent width/height for supplied texture")}else c=c.renderbuffer._renderbuffer,a(c.width===e&&c.height===b,"inconsistent width/height for renderbuffer");c.refCount+=1}}function v(e,
b){b&&(b.texture?c.framebufferTexture2D(36160,e,b.target,b.texture._texture.texture,0):c.framebufferRenderbuffer(36160,e,36161,b.renderbuffer._renderbuffer.renderbuffer))}function w(c){var e=3553,b=null,l=null,d=c;"object"===typeof c&&(d=c.data,"target"in c&&(e=c.target|0));a.type(d,"function","invalid attachment data");c=d._reglType;"texture2d"===c?(b=d,a(3553===e)):"textureCube"===c?(b=d,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===c?(l=d,e=36161):a.raise("invalid regl object for attachment");
return new g(e,b,l)}function B(c,b,l,d,a){if(l)return c=z.create2D({width:c,height:b,format:d,type:a}),c._texture.refCount=0,new g(3553,c,null);c=e.create({width:c,height:b,format:d});c._renderbuffer.refCount=0;return new g(36161,null,c)}function la(c){return c&&(c.texture||c.renderbuffer)}function x(c,e,b){c&&(c.texture?c.texture.resize(e,b):c.renderbuffer&&c.renderbuffer.resize(e,b),c.width=e,c.height=b)}function E(){this.id=D++;ma[this.id]=this;this.framebuffer=c.createFramebuffer();this.height=
this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Da(c){c.colorAttachments.forEach(q);q(c.depthAttachment);q(c.stencilAttachment);q(c.depthStencilAttachment)}function H(e){var b=e.framebuffer;a(b,"must not double destroy framebuffer");c.deleteFramebuffer(b);e.framebuffer=null;l.framebufferCount--;delete ma[e.id]}function h(e){var b;c.bindFramebuffer(36160,e.framebuffer);var l=e.colorAttachments;for(b=0;b<l.length;++b)v(36064+
b,l[b]);for(b=l.length;b<y.maxColorAttachments;++b)c.framebufferTexture2D(36160,36064+b,3553,null,0);c.framebufferTexture2D(36160,33306,3553,null,0);c.framebufferTexture2D(36160,36096,3553,null,0);c.framebufferTexture2D(36160,36128,3553,null,0);v(36096,e.depthAttachment);v(36128,e.stencilAttachment);v(33306,e.depthStencilAttachment);e=c.checkFramebufferStatus(36160);c.isContextLost()||36053===e||a.raise("framebuffer configuration not supported, status = "+f[e]);c.bindFramebuffer(36160,A.next?A.next.framebuffer:
null);A.cur=A.next;c.getError()}function F(c,e){function d(c,e){var l;a(A.next!==f,"can not update framebuffer which is currently in use");var g=0,q=0,v=!0,z=!0;l=null;var x=!0,D="rgba",t="uint8",E=1,C=null,H=null,F=null,ma=!1;if("number"===typeof c)g=c|0,q=e|0||g;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(q=c.shape,a(Array.isArray(q)&&2<=q.length,"invalid shape for framebuffer"),g=q[0],q=q[1]):("radius"in c&&(g=q=c.radius),"width"in c&&(g=c.width),"height"in c&&
(q=c.height));if("color"in c||"colors"in c)l=c.color||c.colors,Array.isArray(l)&&a(1===l.length||k.webgl_draw_buffers,"multiple render targets not supported");if(!l){"colorCount"in c&&(E=c.colorCount|0,a(0<E,"invalid color buffer count"));"colorTexture"in c&&(x=!!c.colorTexture,D="rgba4");if("colorType"in c){t=c.colorType;if(x)a(k.oes_texture_float||!("float"===t||"float32"===t),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(k.oes_texture_half_float||!("half float"===
t||"float16"===t),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===t||"float16"===t)a(k.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),D="rgba16f";else if("float"===t||"float32"===t)a(k.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),D="rgba32f";a.oneOf(t,G,"invalid color type")}"colorFormat"in c&&
(D=c.colorFormat,0<=r.indexOf(D)?x=!0:0<=I.indexOf(D)?x=!1:a.optional(function(){if(x)a.oneOf(c.colorFormat,r,"invalid color format for texture");else a.oneOf(c.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)ma=!(!c.depthTexture&&!c.depthStencilTexture),a(!ma||k.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?v=c.depth:(C=c.depth,z=!1));"stencil"in c&&("boolean"===typeof c.stencil?
z=c.stencil:(H=c.stencil,v=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?v=z=c.depthStencil:(F=c.depthStencil,z=v=!1))}else g=q=1;var ca=null,ia=null,ya=null,va=null;if(Array.isArray(l))ca=l.map(w);else if(l)ca=[w(l)];else for(ca=Array(E),l=0;l<E;++l)ca[l]=B(g,q,x,D,t);a(k.webgl_draw_buffers||1>=ca.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(ca.length<=y.maxColorAttachments,"too many color attachments, not supported");g=g||ca[0].width;
q=q||ca[0].height;C?ia=w(C):v&&!z&&(ia=B(g,q,ma,"depth","uint32"));H?ya=w(H):z&&!v&&(ya=B(g,q,!1,"stencil","uint8"));F?va=w(F):!C&&!H&&z&&v&&(va=B(g,q,ma,"depth stencil","depth stencil"));a(1>=!!C+!!H+!!F,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");v=null;for(l=0;l<ca.length;++l)m(ca[l],g,q),a(!ca[l]||ca[l].texture&&0<=u.indexOf(ca[l].texture._texture.format)||ca[l].renderbuffer&&0<=b.indexOf(ca[l].renderbuffer._renderbuffer.format),"framebuffer color attachment "+
l+" is invalid"),ca[l]&&ca[l].texture&&(z=p[ca[l].texture._texture.format]*n[ca[l].texture._texture.type],null===v?v=z:a(v===z,"all color attachments much have the same number of bits per pixel."));m(ia,g,q);a(!ia||ia.texture&&6402===ia.texture._texture.format||ia.renderbuffer&&33189===ia.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");m(ya,g,q);a(!ya||ya.renderbuffer&&36168===ya.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
m(va,g,q);a(!va||va.texture&&34041===va.texture._texture.format||va.renderbuffer&&34041===va.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");Da(f);f.width=g;f.height=q;f.colorAttachments=ca;f.depthAttachment=ia;f.stencilAttachment=ya;f.depthStencilAttachment=va;d.color=ca.map(la);d.depth=la(ia);d.stencil=la(ya);d.depthStencil=la(va);d.width=f.width;d.height=f.height;h(f);return d}var f=new E;l.framebufferCount++;d(c,e);return C(d,{resize:function(c,e){a(A.next!==
f,"can not resize a framebuffer which is currently in use");var b=Math.max(c|0,1),l=Math.max(e|0||b,1);if(b===f.width&&l===f.height)return d;for(var k=f.colorAttachments,g=0;g<k.length;++g)x(k[g],b,l);x(f.depthAttachment,b,l);x(f.stencilAttachment,b,l);x(f.depthStencilAttachment,b,l);f.width=d.width=b;f.height=d.height=l;h(f);return d},_reglType:"framebuffer",_framebuffer:f,destroy:function(){H(f);Da(f)},use:function(c){A.setFBO({framebuffer:d},c)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},
r=["rgba"],I=["rgba4","rgb565","rgb5 a1"];k.ext_srgb&&I.push("srgba");k.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");k.webgl_color_buffer_float&&I.push("rgba32f");var G=["uint8"];k.oes_texture_half_float&&G.push("half float","float16");k.oes_texture_float&&G.push("float","float32");var D=0,ma={};return C(A,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof E)?c:null},create:F,createCube:function(c){function e(c){var l;a(0>
b.indexOf(A.next),"can not update framebuffer which is currently in use");var d={color:null},f=0,g=null;l="rgba";var q="uint8",m=1;if("number"===typeof c)f=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(f=c.shape,a(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),a(f[0]===f[1],"cube framebuffer must be square"),f=f[0]):("radius"in c&&(f=c.radius|0),"width"in c?(f=c.width|0,"height"in c&&a(c.height===f,"must be square")):"height"in c&&(f=c.height|0));
if("color"in c||"colors"in c)g=c.color||c.colors,Array.isArray(g)&&a(1===g.length||k.webgl_draw_buffers,"multiple render targets not supported");g||("colorCount"in c&&(m=c.colorCount|0,a(0<m,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,G,"invalid color type"),q=c.colorType),"colorFormat"in c&&(l=c.colorFormat,a.oneOf(c.colorFormat,r,"invalid color format for texture")));"depth"in c&&(d.depth=c.depth);"stencil"in c&&(d.stencil=c.stencil);"depthStencil"in c&&(d.depthStencil=
c.depthStencil)}else f=1;if(g)if(Array.isArray(g))for(c=[],l=0;l<g.length;++l)c[l]=g[l];else c=[g];else for(c=Array(m),g={radius:f,format:l,type:q},l=0;l<m;++l)c[l]=z.createCube(g);d.color=Array(c.length);for(l=0;l<c.length;++l)m=c[l],a("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),f=f||m.width,a(m.width===f&&m.height===f,"invalid cube map shape"),d.color[l]={target:34069,data:c[l]};for(l=0;6>l;++l){for(m=0;m<c.length;++m)d.color[m].target=34069+l;0<l&&(d.depth=b[0].depth,
d.stencil=b[0].stencil,d.depthStencil=b[0].depthStencil);if(b[l])b[l](d);else b[l]=F(d)}return C(e,{width:f,height:f,color:c})}var b=Array(6);e(c);return C(e,{faces:b,resize:function(c){var l=c|0;a(0<l&&l<=y.maxCubeMapSize,"invalid radius for cube fbo");if(l===e.width)return e;var d=e.color;for(c=0;c<d.length;++c)d[c].resize(l);for(c=0;6>c;++c)b[c].resize(l);e.width=e.height=l;return e},_reglType:"framebufferCube",destroy:function(){b.forEach(function(c){c.destroy()})}})},clear:function(){d(ma).forEach(H)},
restore:function(){A.cur=null;A.next=null;A.dirty=!0;d(ma).forEach(function(e){e.framebuffer=c.createFramebuffer();h(e)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(h,r,J){var a=h("./util/sorted-object-keys"),d=h("./util/pool");r.exports=function(C,u){var p=1;u.ext_texture_filter_anisotropic&&(p=C.getParameter(34047));var n=1,b=1;u.webgl_draw_buffers&&(n=C.getParameter(34852),b=C.getParameter(36063));var f=!!u.oes_texture_float;if(f){f=C.createTexture();C.bindTexture(3553,
f);C.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var c=C.createFramebuffer();C.bindFramebuffer(36160,c);C.framebufferTexture2D(36160,36064,3553,f,0);C.bindTexture(3553,null);if(36053!==C.checkFramebufferStatus(36160))f=!1;else{C.viewport(0,0,1,1);C.clearColor(1,0,0,1);C.clear(16384);var k=d.allocType(5126,4);C.readPixels(0,0,1,1,6408,5126,k);C.getError()?f=!1:(C.deleteFramebuffer(c),C.deleteTexture(f),f=1===k[0]);d.freeType(k)}}k=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(k=C.createTexture(),c=d.allocType(5121,36),C.activeTexture(33984),C.bindTexture(34067,k),C.texImage2D(34069,0,6408,3,3,0,6408,5121,c),d.freeType(c),C.bindTexture(34067,null),C.deleteTexture(k),k=!C.getError());return{colorBits:[C.getParameter(3410),C.getParameter(3411),C.getParameter(3412),C.getParameter(3413)],depthBits:C.getParameter(3414),stencilBits:C.getParameter(3415),subpixelBits:C.getParameter(3408),extensions:a(u).filter(function(c){return!!u[c]}),
maxAnisotropic:p,maxDrawbuffers:n,maxColorAttachments:b,pointSizeDims:C.getParameter(33901),lineWidthDims:C.getParameter(33902),maxViewportDims:C.getParameter(3386),maxCombinedTextureUnits:C.getParameter(35661),maxCubeMapSize:C.getParameter(34076),maxRenderbufferSize:C.getParameter(34024),maxTextureUnits:C.getParameter(34930),maxTextureSize:C.getParameter(3379),maxAttributes:C.getParameter(34921),maxVertexUniforms:C.getParameter(36347),maxVertexTextureUnits:C.getParameter(35660),maxVaryingVectors:C.getParameter(36348),
maxFragmentUniforms:C.getParameter(36349),glsl:C.getParameter(35724),renderer:C.getParameter(7937),vendor:C.getParameter(7936),version:C.getParameter(7938),readFloat:f,npotTextureCube:k}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(h,r,J){var a=h("./util/check"),d=h("./util/is-typed-array");r.exports=function(C,u,p,n,b,f,c){function k(k){var e;null===u.next?(a(b.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(a(null!==u.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=u.next.colorAttachments[0].texture._texture.type,a.optional(function(){f.oes_texture_float?(a(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&a(c.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var l=0,g=0,q=n.framebufferWidth,m=n.framebufferHeight,v=null;d(k)?v=k:k&&(a.type(k,"object","invalid arguments to regl.read()"),l=k.x|0,g=k.y|0,a(0<=l&&l<n.framebufferWidth,"invalid x offset for regl.read"),a(0<=g&&g<n.framebufferHeight,"invalid y offset for regl.read"),q=(k.width||n.framebufferWidth-l)|0,m=(k.height||n.framebufferHeight-g)|0,v=k.data||null);v&&(5121===e?a(v instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&a(v instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<q&&q+l<=n.framebufferWidth,"invalid width for read pixels");a(0<m&&m+g<=n.framebufferHeight,"invalid height for read pixels");p();k=q*m*4;v||(5121===e?v=new Uint8Array(k):5126===e&&(v=v||new Float32Array(k)));a.isTypedArray(v,"data buffer for regl.read() must be a typedarray");a(v.byteLength>=k,"data buffer for regl.read() too small");C.pixelStorei(3333,4);C.readPixels(l,g,q,m,6408,e,v);return v}function y(c){var e;
u.setFBO({framebuffer:c.framebuffer},function(){e=k(c)});return e}return function(c){return c&&"framebuffer"in c?y(c):k(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(h,r,J){var a=h("./util/sorted-object-keys"),d=h("./util/check"),C=h("./util/values"),u=[];u[32854]=2;u[32855]=2;u[36194]=2;u[33189]=2;u[36168]=1;u[34041]=4;u[35907]=4;u[34836]=16;u[34842]=8;u[34843]=6;r.exports=function(p,n,b,f,c){function k(e){this.id=l++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;c.profile&&(this.stats={size:0})}function y(c){var e=c.renderbuffer;d(e,"must not double destroy renderbuffer");p.bindRenderbuffer(36161,null);p.deleteRenderbuffer(e);c.renderbuffer=null;c.refCount=0;delete g[c.id];f.renderbufferCount--}var z={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};n.ext_srgb&&(z.srgba=35907);n.ext_color_buffer_half_float&&(z.rgba16f=34842,z.rgb16f=34843);n.webgl_color_buffer_float&&(z.rgba32f=34836);var e=[];a(z).forEach(function(c){e[z[c]]=
c});var l=0,g={};k.prototype.decRef=function(){0>=--this.refCount&&y(this)};c.profile&&(f.getTotalRenderbufferSize=function(){var c=0;a(g).forEach(function(e){c+=g[e].stats.size});return c});return{create:function(l,a){function v(l,a){var k=0,f=0,g=32854;"object"===typeof l&&l?("shape"in l?(f=l.shape,d(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),k=f[0]|0,f=f[1]|0):("radius"in l&&(k=f=l.radius|0),"width"in l&&(k=l.width|0),"height"in l&&(f=l.height|0)),"format"in l&&(d.parameter(l.format,
z,"invalid renderbuffer format"),g=z[l.format])):"number"===typeof l?(k=l|0,f="number"===typeof a?a|0:k):l?d.raise("invalid arguments to renderbuffer constructor"):k=f=1;d(0<k&&0<f&&k<=b.maxRenderbufferSize&&f<=b.maxRenderbufferSize,"invalid renderbuffer size");if(k!==w.width||f!==w.height||g!==w.format)return v.width=w.width=k,v.height=w.height=f,w.format=g,p.bindRenderbuffer(36161,w.renderbuffer),p.renderbufferStorage(36161,g,k,f),d(0===p.getError(),"invalid render buffer format"),c.profile&&(w.stats.size=
u[w.format]*w.width*w.height),v.format=e[w.format],v}var w=new k(p.createRenderbuffer());g[w.id]=w;f.renderbufferCount++;v(l,a);v.resize=function(e,l){var k=e|0,a=l|0||k;if(k===w.width&&a===w.height)return v;d(0<k&&0<a&&k<=b.maxRenderbufferSize&&a<=b.maxRenderbufferSize,"invalid renderbuffer size");v.width=w.width=k;v.height=w.height=a;p.bindRenderbuffer(36161,w.renderbuffer);p.renderbufferStorage(36161,w.format,k,a);d(0===p.getError(),"invalid render buffer format");c.profile&&(w.stats.size=u[w.format]*
w.width*w.height);return v};v._reglType="renderbuffer";v._renderbuffer=w;c.profile&&(v.stats=w.stats);v.destroy=function(){w.decRef()};return v},clear:function(){C(g).forEach(y)},restore:function(){C(g).forEach(function(c){c.renderbuffer=p.createRenderbuffer();p.bindRenderbuffer(36161,c.renderbuffer);p.renderbufferStorage(36161,c.format,c.width,c.height)});p.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(h,r,J){var a=h("./util/sorted-object-keys"),
d=h("./util/check"),C=h("./util/extend"),u=h("./util/values");r.exports=function(p,n,b,f){function c(c,e,b,l){this.name=c;this.id=e;this.location=b;this.info=l}function k(c,e){for(var b=0;b<c.length;++b)if(c[b].id===e.id){c[b].location=e.location;return}c.push(e)}function y(c,e,b){var k=35632===c?l:g,a=k[e];if(!a){var f=n.str(e),a=p.createShader(c);p.shaderSource(a,f);p.compileShader(a);d.shaderError(p,a,f,c,b);k[e]=a}return a}function z(c,e){this.id=v++;this.fragId=c;this.vertId=e;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;f.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(e,b,l){var a;a=y(35632,e.fragId);var g=y(35633,e.vertId),q=e.program=p.createProgram();p.attachShader(q,a);p.attachShader(q,g);if(l)for(a=0;a<l.length;++a)g=l[a],p.bindAttribLocation(q,g[0],g[1]);p.linkProgram(q);d.linkError(p,q,n.str(e.fragId),n.str(e.vertId),b);l=p.getProgramParameter(q,35718);f.profile&&(e.stats.uniformsCount=l);g=e.uniforms;for(a=0;a<l;++a)if(b=p.getActiveUniform(q,
a))if(1<b.size)for(var m=0;m<b.size;++m){var v=b.name.replace("[0]","["+m+"]");k(g,new c(v,n.id(v),p.getUniformLocation(q,v),b))}else k(g,new c(b.name,n.id(b.name),p.getUniformLocation(q,b.name),b));l=p.getProgramParameter(q,35721);f.profile&&(e.stats.attributesCount=l);e=e.attributes;for(a=0;a<l;++a)(b=p.getActiveAttrib(q,a))&&k(e,new c(b.name,n.id(b.name),p.getAttribLocation(q,b.name),b))}var l={},g={},q={},m=[],v=0;f.profile&&(b.getMaxUniformsCount=function(){var c=0;m.forEach(function(e){e.stats.uniformsCount>
c&&(c=e.stats.uniformsCount)});return c},b.getMaxAttributesCount=function(){var c=0;m.forEach(function(e){e.stats.attributesCount>c&&(c=e.stats.attributesCount)});return c});return{clear:function(){var c=p.deleteShader.bind(p);u(l).forEach(c);l={};u(g).forEach(c);g={};m.forEach(function(c){p.deleteProgram(c.program)});m.length=0;q={};b.shaderCount=0},program:function(c,k,f,v){d.command(0<=c,"missing vertex shader",f);d.command(0<=k,"missing fragment shader",f);var n=q[k];n||(n=q[k]={});var y=n[c];
if(y&&(y.refCount++,!v))return y;var u=new z(k,c);b.shaderCount++;e(u,f,v);y||(n[c]=u);m.push(u);return C(u,{destroy:function(){u.refCount--;if(0>=u.refCount){p.deleteProgram(u.program);var c=m.indexOf(u);m.splice(c,1);b.shaderCount--}0>=n[u.vertId].refCount&&(p.deleteShader(g[u.vertId]),delete g[u.vertId],delete q[u.fragId][u.vertId]);a(q[u.fragId]).length||(p.deleteShader(l[u.fragId]),delete l[u.fragId],delete q[u.fragId])}})},restore:function(){l={};g={};for(var c=0;c<m.length;++c)e(m[c],null,
m[c].attributes.map(function(c){return[c.location,c.name]}))},shader:y,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(h,r,J){r.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(h,r,J){r.exports=function(){var a={"":0},d=[""];return{id:function(C){var u=a[C];if(u)return u;u=a[C]=d.length;d.push(C);
return u},str:function(a){return d[a]}}}},{}],19:[function(h,r,J){function a(c){return"[object "+c+"]"}function d(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function C(c){return Array.isArray(c)&&0!==c.length&&q(c[0])?!0:!1}function u(c){return Object.prototype.toString.call(c)}function p(c){if(!c)return!1;var b=u(c);return 0<=U.indexOf(b)?!0:d(c)||C(c)||e(c)}function n(c,e){36193===c.type?(c.data=g(e),l.freeType(e)):c.data=e}function b(c,e,b,l,d,a){c="undefined"!==typeof G[c]?
G[c]:x[c]*I[e];a&&(c*=6);if(d){for(l=0;1<=b;)l+=c*b*b,b/=2;return l}return c*b*l}var f=h("./util/sorted-object-keys"),c=h("./util/check"),k=h("./util/extend"),y=h("./util/values"),z=h("./util/is-typed-array"),e=h("./util/is-ndarray"),l=h("./util/pool"),g=h("./util/to-half-float"),q=h("./util/is-array-like"),m=h("./util/flatten"),v=h("./util/is-pow2");J=h("./constants/arraytypes.json");var w=h("./constants/arraytypes.json"),B=[9984,9986,9985,9987],la=[0,6409,6410,6407,6408],x={};x[6409]=x[6406]=x[6402]=
1;x[34041]=x[6410]=2;x[6407]=x[35904]=3;x[6408]=x[35906]=4;var E=a("HTMLCanvasElement"),Da=a("OffscreenCanvas"),H=a("CanvasRenderingContext2D"),ga=a("ImageBitmap"),F=a("HTMLImageElement"),A=a("HTMLVideoElement"),U=f(J).concat([E,Da,H,ga,F,A]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var G=[];G[32854]=2;G[32855]=2;G[36194]=2;G[34041]=4;G[33776]=.5;G[33777]=.5;G[33778]=1;G[33779]=1;G[35986]=.5;G[35987]=1;G[34798]=1;G[35840]=.5;G[35841]=.25;G[35842]=.5;G[35843]=.25;G[36196]=.5;r.exports=
function(a,h,t,I,G,r,U){function T(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function X(c,e){c.internalformat=e.internalformat;c.format=e.format;c.type=e.type;c.compressed=e.compressed;c.premultiplyAlpha=e.premultiplyAlpha;c.flipY=e.flipY;c.unpackAlignment=e.unpackAlignment;c.colorSpace=e.colorSpace;c.width=e.width;c.height=e.height;c.channels=e.channels}
function S(e,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(c.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(c.type(b.flipY,"boolean","invalid texture flip"),e.flipY=b.flipY);"alignment"in b&&(c.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=b.alignment);"colorSpace"in b&&(c.parameter(b.colorSpace,Va,"invalid colorSpace"),e.colorSpace=Va[b.colorSpace]);if("type"in b){var l=b.type;c(h.oes_texture_float||
!("float"===l||"float32"===l),"you must enable the OES_texture_float extension in order to use floating point textures.");c(h.oes_texture_half_float||!("half float"===l||"float16"===l),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");c(h.webgl_depth_texture||!("uint16"===l||"uint32"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");c.parameter(l,ha,"invalid texture type");e.type=
ha[l]}var d=e.width,a=e.height,k=e.channels,l=!1;"shape"in b?(c(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),d=b.shape[0],a=b.shape[1],3===b.shape.length&&(k=b.shape[2],c(0<k&&4>=k,"invalid number of channels"),l=!0),c(0<=d&&d<=t.maxTextureSize,"invalid width"),c(0<=a&&a<=t.maxTextureSize,"invalid height")):("radius"in b&&(d=a=b.radius,c(0<=d&&d<=t.maxTextureSize,"invalid radius")),"width"in b&&(d=b.width,c(0<=d&&d<=t.maxTextureSize,"invalid width")),"height"in b&&(a=b.height,
c(0<=a&&a<=t.maxTextureSize,"invalid height")),"channels"in b&&(k=b.channels,c(0<k&&4>=k,"invalid number of channels"),l=!0));e.width=d|0;e.height=a|0;e.channels=k|0;d=!1;"format"in b&&(d=b.format,c(h.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(d,ea,"invalid texture format"),a=e.internalformat=ea[d],e.format=Ia[a],d in ha&&!("type"in b)&&(e.type=ha[d]),d in sa&&(e.compressed=!0),d=
!0);!l&&d?e.channels=x[e.format]:l&&!d?e.channels!==la[e.format]&&(e.format=e.internalformat=la[e.channels]):d&&l&&c(e.channels===x[e.format],"number of channels inconsistent with specified format")}}function P(c){a.pixelStorei(37440,c.flipY);a.pixelStorei(37441,c.premultiplyAlpha);a.pixelStorei(37443,c.colorSpace);a.pixelStorei(3317,c.unpackAlignment)}function N(){T.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function O(b,a){var k=null;
p(a)?k=a:a&&(c.type(a,"object","invalid pixel data type"),S(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),p(a.data)&&(k=a.data));c(!b.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){c(!k,"can not specify copy and data field for the same texture");var f=G.viewportWidth,v=G.viewportHeight;b.width=b.width||f-b.xOffset;b.height=b.height||v-b.yOffset;b.needsCopy=!0;c(0<=b.xOffset&&b.xOffset<f&&0<=b.yOffset&&b.yOffset<v&&0<b.width&&b.width<=
f&&0<b.height&&b.height<=v,"copy texture read out of bounds")}else if(!k)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(z(k))b.channels=b.channels||4,b.data=k,"type"in a||5121!==b.type||(b.type=w[Object.prototype.toString.call(k)]|0);else if(d(k)){b.channels=b.channels||4;f=k;v=f.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:v=l.allocType(b.type,v);v.set(f);b.data=v;break;case 36193:b.data=g(f);break;default:c.raise("unsupported texture type, must specify a typed array")}b.alignment=
1;b.needsFree=!0}else if(e(k)){f=k.data;Array.isArray(f)||5121!==b.type||(b.type=w[Object.prototype.toString.call(f)]|0);var v=k.shape,B=k.stride,y,x,D,ha;3===v.length?(D=v[2],ha=B[2]):(c(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),ha=D=1);y=v[0];x=v[1];v=B[0];B=B[1];b.alignment=1;b.width=y;b.height=x;b.channels=D;b.format=b.internalformat=la[D];b.needsFree=!0;y=ha;k=k.offset;D=b.width;ha=b.height;x=b.channels;for(var h=l.allocType(36193===b.type?5126:b.type,D*ha*x),K=0,O=0;O<ha;++O)for(var ea=
0;ea<D;++ea)for(var W=0;W<x;++W)h[K++]=f[v*ea+B*O+y*W+k];n(b,h)}else if(u(k)===E||u(k)===Da||u(k)===H)u(k)===E||u(k)===Da?b.element=k:b.element=k.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(u(k)===ga)b.element=k,b.width=k.width,b.height=k.height,b.channels=4;else if(u(k)===F)b.element=k,b.width=k.naturalWidth,b.height=k.naturalHeight,b.channels=4;else if(u(k)===A)b.element=k,b.width=k.videoWidth,b.height=k.videoHeight,b.channels=4;else if(C(k)){f=b.width||k[0].length;
v=b.height||k.length;B=b.channels;B=q(k[0][0])?B||k[0][0].length:B||1;y=m.shape(k);D=1;for(ha=0;ha<y.length;++ha)D*=y[ha];D=l.allocType(36193===b.type?5126:b.type,D);m.flatten(k,y,"",D);n(b,D);b.alignment=1;b.width=f;b.height=v;b.channels=B;b.format=b.internalformat=la[B];b.needsFree=!0}5126===b.type?c(0<=t.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===b.type&&c(0<=t.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function Q(c,e,b,l,d){var k=c.element,f=c.data,g=c.internalformat,q=c.format,m=c.type,v=c.width,w=c.height;P(c);k?a.texSubImage2D(e,d,b,l,q,m,k):c.compressed?a.compressedTexSubImage2D(e,d,b,l,g,v,w,f):c.needsCopy?(I(),a.copyTexSubImage2D(e,d,b,l,c.xOffset,c.yOffset,v,w)):a.texSubImage2D(e,d,b,l,v,w,q,m,f)}function R(){return ra.pop()||new N}function qa(c){c.needsFree&&l.freeType(c.data);N.call(c);ra.push(c)}function oa(){T.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function K(c,e,b){var l=c.images[0]=R();c.mipmask=1;l.width=c.width=e;l.height=c.height=b;l.channels=c.channels=4}function L(e,b){var l=null;if(p(b))l=e.images[0]=R(),X(l,e),O(l,b),e.mipmask=1;else if(S(e,b),Array.isArray(b.mipmap))for(var d=b.mipmap,a=0;a<d.length;++a)l=e.images[a]=R(),X(l,e),l.width>>=a,l.height>>=a,O(l,d[a]),e.mipmask|=1<<a;else l=e.images[0]=R(),X(l,e),O(l,b),e.mipmask=1;X(e,e.images[0]);!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==e.internalformat&&
33779!==e.internalformat||c(0===e.width%4&&0===e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(c,e){for(var b=c.images,l=0;l<b.length&&b[l];++l){var d=b[l],k=e,f=l,g=d.element,q=d.data,m=d.internalformat,v=d.format,w=d.type,n=d.width,z=d.height;P(d);g?a.texImage2D(k,f,v,v,w,g):d.compressed?a.compressedTexImage2D(k,f,m,n,z,0,q):d.needsCopy?(I(),a.copyTexImage2D(k,f,v,d.xOffset,d.yOffset,n,z,0)):a.texImage2D(k,f,v,n,z,0,v,
w,q||null)}}function V(){var c=xa.pop()||new oa;T.call(c);for(var e=c.mipmask=0;16>e;++e)c.images[e]=null;return c}function na(c){for(var e=c.images,b=0;b<e.length;++b)e[b]&&qa(e[b]),e[b]=null;xa.push(c)}function ia(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ya(e,b){if("min"in b){var l=b.min;c.parameter(l,Hb);e.minFilter=Hb[l];0<=B.indexOf(e.minFilter)&&!("faces"in b)&&(e.genMipmaps=!0)}"mag"in b&&(l=b.mag,c.parameter(l,
Ka),e.magFilter=Ka[l]);var l=e.wrapS,d=e.wrapT;if("wrap"in b){var a=b.wrap;"string"===typeof a?(c.parameter(a,Qa),l=d=Qa[a]):Array.isArray(a)&&(c.parameter(a[0],Qa),c.parameter(a[1],Qa),l=Qa[a[0]],d=Qa[a[1]])}else"wrapS"in b&&(l=b.wrapS,c.parameter(l,Qa),l=Qa[l]),"wrapT"in b&&(d=b.wrapT,c.parameter(d,Qa),d=Qa[d]);e.wrapS=l;e.wrapT=d;"anisotropic"in b&&(l=b.anisotropic,c("number"===typeof l&&1<=l&&l<=t.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=b.anisotropic);if("mipmap"in
b){l=!1;switch(typeof b.mipmap){case "string":c.parameter(b.mipmap,za,"invalid mipmap hint");e.mipmapHint=za[b.mipmap];l=e.genMipmaps=!0;break;case "boolean":l=e.genMipmaps=b.mipmap;break;case "object":c(Array.isArray(b.mipmap),"invalid mipmap type");e.genMipmaps=!1;l=!0;break;default:c.raise("invalid mipmap type")}!l||"min"in b||(e.minFilter=9984)}}function va(c,e){a.texParameteri(e,10241,c.minFilter);a.texParameteri(e,10240,c.magFilter);a.texParameteri(e,10242,c.wrapS);a.texParameteri(e,10243,c.wrapT);
h.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(e))}function ba(c){T.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ba++;this.refCount=1;this.target=c;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ia;U.profile&&(this.stats={size:0})}function Ca(c){a.activeTexture(33984);a.bindTexture(c.target,c.texture)}function ka(){var c=ta[0];c?a.bindTexture(c.target,c.texture):a.bindTexture(3553,
null)}function pa(e){var b=e.texture;c(b,"must not double destroy texture");var l=e.unit,d=e.target;0<=l&&(a.activeTexture(33984+l),a.bindTexture(d,null),ta[l]=null);a.deleteTexture(b);e.texture=null;e.params=null;e.pixels=null;e.refCount=0;delete ja[e.id];r.textureCount--}var za={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Qa={repeat:10497,clamp:33071,mirror:33648},Ka={nearest:9728,linear:9729},Hb=k({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,
"linear mipmap linear":9987},Ka),Va={none:0,browser:37444},ha={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ea={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sa={};h.ext_srgb&&(ea.srgb=35904,ea.srgba=35906);h.oes_texture_float&&(ha.float32=ha["float"]=5126);h.oes_texture_half_float&&(ha.float16=ha["half float"]=36193);h.webgl_depth_texture&&(k(ea,{depth:6402,"depth stencil":34041}),k(ha,{uint16:5123,uint32:5125,"depth stencil":34042}));
h.webgl_compressed_texture_s3tc&&k(sa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&k(sa,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&k(sa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&(sa["rgb etc1"]=36196);var ua=Array.prototype.slice.call(a.getParameter(34467));
f(sa).forEach(function(c){var e=sa[c];0<=ua.indexOf(e)&&(ea[c]=e)});var Ea=f(ea);t.textureFormats=Ea;var Ra=[];f(ea).forEach(function(c){Ra[ea[c]]=c});var Gb=[];f(ha).forEach(function(c){Gb[ha[c]]=c});var Z=[];f(Ka).forEach(function(c){Z[Ka[c]]=c});var W=[];f(Hb).forEach(function(c){W[Hb[c]]=c});var wa=[];f(Qa).forEach(function(c){wa[Qa[c]]=c});var Ia=Ea.reduce(function(c,e){var b=ea[e];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||h.ext_srgb&&(35904===b||35906===b)?c[b]=b:32855===
b||0<=e.indexOf("rgba")?c[b]=6408:c[b]=6407;return c},{}),ra=[],xa=[],Ba=0,ja={},Y=t.maxTextureUnits,ta=Array(Y).map(function(){return null});k(ba.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var b=0;b<Y;++b){var l=ta[b];if(l){if(0<l.bindCount)continue;l.unit=-1}ta[b]=this;e=b;break}e>=Y&&c.raise("insufficient number of texture units");U.profile&&r.maxTextureUnits<e+1&&(r.maxTextureUnits=e+1);this.unit=e;a.activeTexture(33984+e);a.bindTexture(this.target,this.texture)}return e},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&pa(this)}});U.profile&&(r.getTotalTextureSize=function(){var c=0;f(ja).forEach(function(e){c+=ja[e].stats.size});return c});return{create2D:function(e,l){function d(e,l){var a=k.texInfo;ia.call(a);var f=V();"number"===typeof e?"number"===typeof l?K(f,e|0,l|0):K(f,e|0,e|0):e?(c.type(e,"object","invalid arguments to regl.texture"),ya(a,e),L(f,e)):K(f,1,1);a.genMipmaps&&(f.mipmask=(f.width<<1)-1);k.mipmask=f.mipmask;X(k,f);c.texture2D(a,
f,t);k.internalformat=f.internalformat;d.width=f.width;d.height=f.height;Ca(k);da(f,3553);va(a,3553);ka();na(f);U.profile&&(k.stats.size=b(k.internalformat,k.type,f.width,f.height,a.genMipmaps,!1));d.format=Ra[k.internalformat];d.type=Gb[k.type];d.mag=Z[a.magFilter];d.min=W[a.minFilter];d.wrapS=wa[a.wrapS];d.wrapT=wa[a.wrapT];return d}var k=new ba(3553);ja[k.id]=k;r.textureCount++;d(e,l);d.subimage=function(e,b,l,a){c(!!e,"must specify image data");b|=0;l|=0;a|=0;var f=R();X(f,k);f.width=0;f.height=
0;O(f,e);f.width=f.width||(k.width>>a)-b;f.height=f.height||(k.height>>a)-l;c(k.type===f.type&&k.format===f.format&&k.internalformat===f.internalformat,"incompatible format for texture.subimage");c(0<=b&&0<=l&&b+f.width<=k.width&&l+f.height<=k.height,"texture.subimage write out of bounds");c(k.mipmask&1<<a,"missing mipmap data");c(f.data||f.element||f.needsCopy,"missing image data");Ca(k);Q(f,3553,b,l,a);ka();qa(f);return d};d.resize=function(c,e){var l=c|0,f=e|0||l;if(l===k.width&&f===k.height)return d;
d.width=k.width=l;d.height=k.height=f;Ca(k);for(var g=0;k.mipmask>>g;++g){var q=l>>g,m=f>>g;if(!q||!m)break;a.texImage2D(3553,g,k.format,q,m,0,k.format,k.type,null)}ka();U.profile&&(k.stats.size=b(k.internalformat,k.type,l,f,!1,!1));return d};d._reglType="texture2d";d._texture=k;U.profile&&(d.stats=k.stats);d.destroy=function(){k.decRef()};return d},createCube:function(e,l,d,k,f,g){function q(e,l,d,a,k,f){var g,n=m.texInfo;ia.call(n);for(g=0;6>g;++g)w[g]=V();if("number"!==typeof e&&e)if("object"===
typeof e)if(l)L(w[0],e),L(w[1],l),L(w[2],d),L(w[3],a),L(w[4],k),L(w[5],f);else if(ya(n,e),S(m,e),"faces"in e)for(e=e.faces,c(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),g=0;6>g;++g)c("object"===typeof e[g]&&!!e[g],"invalid input for cube map face"),X(w[g],m),L(w[g],e[g]);else for(g=0;6>g;++g)L(w[g],e);else c.raise("invalid arguments to cube map");else for(e=e|0||1,g=0;6>g;++g)K(w[g],e,e);X(m,w[0]);c.optional(function(){t.npotTextureCube||c(v(m.width)&&v(m.height),"your browser does not support non power or two texture dimensions")});
m.mipmask=n.genMipmaps?(w[0].width<<1)-1:w[0].mipmask;c.textureCube(m,n,w,t);m.internalformat=w[0].internalformat;q.width=w[0].width;q.height=w[0].height;Ca(m);for(g=0;6>g;++g)da(w[g],34069+g);va(n,34067);ka();U.profile&&(m.stats.size=b(m.internalformat,m.type,q.width,q.height,n.genMipmaps,!0));q.format=Ra[m.internalformat];q.type=Gb[m.type];q.mag=Z[n.magFilter];q.min=W[n.minFilter];q.wrapS=wa[n.wrapS];q.wrapT=wa[n.wrapT];for(g=0;6>g;++g)na(w[g]);return q}var m=new ba(34067);ja[m.id]=m;r.cubeCount++;
var w=Array(6);q(e,l,d,k,f,g);q.subimage=function(e,b,l,d,a){c(!!b,"must specify image data");c("number"===typeof e&&e===(e|0)&&0<=e&&6>e,"invalid face");l|=0;d|=0;a|=0;var k=R();X(k,m);k.width=0;k.height=0;O(k,b);k.width=k.width||(m.width>>a)-l;k.height=k.height||(m.height>>a)-d;c(m.type===k.type&&m.format===k.format&&m.internalformat===k.internalformat,"incompatible format for texture.subimage");c(0<=l&&0<=d&&l+k.width<=m.width&&d+k.height<=m.height,"texture.subimage write out of bounds");c(m.mipmask&
1<<a,"missing mipmap data");c(k.data||k.element||k.needsCopy,"missing image data");Ca(m);Q(k,34069+e,l,d,a);ka();qa(k);return q};q.resize=function(c){c|=0;if(c!==m.width){q.width=m.width=c;q.height=m.height=c;Ca(m);for(var e=0;6>e;++e)for(var l=0;m.mipmask>>l;++l)a.texImage2D(34069+e,l,m.format,c>>l,c>>l,0,m.format,m.type,null);ka();U.profile&&(m.stats.size=b(m.internalformat,m.type,q.width,q.height,!1,!0));return q}};q._reglType="textureCube";q._texture=m;U.profile&&(q.stats=m.stats);q.destroy=function(){m.decRef()};
return q},clear:function(){for(var c=0;c<Y;++c)a.activeTexture(33984+c),a.bindTexture(3553,null),ta[c]=null;y(ja).forEach(pa);r.cubeCount=0;r.textureCount=0},getTexture:function(c){return null},restore:function(){for(var c=0;c<Y;++c){var e=ta[c];e&&(e.bindCount=0,e.unit=-1,ta[c]=null)}y(ja).forEach(function(c){c.texture=a.createTexture();a.bindTexture(c.target,c.texture);for(var e=0;32>e;++e)if(0!==(c.mipmask&1<<e))if(3553===c.target)a.texImage2D(3553,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,
c.type,null);else for(var b=0;6>b;++b)a.texImage2D(34069+b,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);va(c.texInfo,c.target)})},refresh:function(){for(var c=0;c<Y;++c){var e=ta[c];e&&(e.bindCount=0,e.unit=-1,ta[c]=null);a.activeTexture(33984+c);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(h,r,J){r.exports=function(a,d){function C(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function u(c,d,e){var l=b.pop()||new C;l.startQueryIndex=c;l.endQueryIndex=d;l.sum=0;l.stats=e;f.push(l)}if(!d.ext_disjoint_timer_query)return null;var p=[],n=[],b=[],f=[],c=[],k=[];return{beginQuery:function(c){var b=p.pop()||d.ext_disjoint_timer_query.createQueryEXT();d.ext_disjoint_timer_query.beginQueryEXT(35007,
b);n.push(b);u(n.length-1,n.length,c)},endQuery:function(){d.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:u,update:function(){var a,z;a=n.length;if(0!==a){k.length=Math.max(k.length,a+1);c.length=Math.max(c.length,a+1);c[0]=0;var e=k[0]=0;for(z=a=0;z<n.length;++z){var l=n[z];d.ext_disjoint_timer_query.getQueryObjectEXT(l,34919)?(e+=d.ext_disjoint_timer_query.getQueryObjectEXT(l,34918),p.push(l)):n[a++]=l;c[z+1]=e;k[z+1]=a}n.length=a;for(z=a=0;z<f.length;++z){var e=f[z],g=e.startQueryIndex,
l=e.endQueryIndex;e.sum+=c[l]-c[g];g=k[g];l=k[l];l===g?(e.stats.gpuTime+=e.sum/1E6,b.push(e)):(e.startQueryIndex=g,e.endQueryIndex=l,f[a++]=e)}f.length=a}},getNumPendingQueries:function(){return n.length},clear:function(){p.push.apply(p,n);for(var c=0;c<p.length;c++)d.ext_disjoint_timer_query.deleteQueryEXT(p[c]);n.length=0;p.length=0},restore:function(){n.length=0;p.length=0}}}},{}],21:[function(h,r,J){function a(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function d(c){c=Error("(regl) "+
c);console.error(c);throw c;}function C(c,e){c||d(e)}function u(c){return c?": "+c:""}function p(c,e){switch(e){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function n(c,e,b){0>e.indexOf(c)&&d("invalid value"+u(b)+". must be one of: "+e)}function b(c,e){for(c+=
"";c.length<e;)c=" "+c;return c}function f(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function c(c,e){this.number=c;this.line=e;this.errors=[]}function k(c,e,b){this.file=c;this.line=e;this.message=b}function y(){var c=Error(),c=(c.stack||c).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return e?e[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function z(){var c=Error(),c=(c.stack||c).toString(),e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return e?e[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function e(e,b){var l=e.split("\n"),d=1,k=0,g={unknown:new f,0:new f};g.unknown.name=g[0].name=b||y();g.unknown.lines.push(new c(0,""));for(var m=0;m<l.length;++m){var q=l[m],v=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(q);if(v)switch(v[1]){case "line":if(v=/(\d+)(\s+\d+)?/.exec(v[2]))d=v[1]|0,v[2]&&(k=v[2]|0,k in g||(g[k]=new f));break;case "define":if(v=/SHADER_NAME(_B64)?\s+(.*)$/.exec(v[2]))g[k].name=v[1]?a(v[2]):v[2]}g[k].lines.push(new c(d++,
q))}B(g).forEach(function(c){var e=g[c];e.lines.forEach(function(c){e.index[c.number]=c})});return g}function l(c){var e=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var b=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);b?e.push(new k(b[1]|0,b[2]|0,b[3].trim())):0<c.length&&e.push(new k("unknown",0,c))}});return e}function g(c,e){e.forEach(function(e){var b=c[e.file];if(b){var l=b.index[e.line];if(l){l.errors.push(e);b.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(e)})}
function q(c){c._commandRef=y()}function m(c,e){var b=z();d(c+" in command "+(e||y())+("unknown"===b?"":" called from "+b))}function v(c,e,b,l){p(c,e)||m("invalid parameter type"+u(b)+". expected "+e+", got "+typeof c,l||y())}function w(c,e){return 32820===c||32819===c||33635===c?2:34042===c?4:E[c]*e}var B=h("./sorted-object-keys"),la=h("./is-typed-array");h=h("./extend");var x="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),E={};E[5120]=E[5121]=
1;E[5122]=E[5123]=E[36193]=E[33635]=E[32819]=E[32820]=2;E[5124]=E[5125]=E[5126]=E[34042]=4;r.exports=h(C,{optional:function(c){c()},raise:d,commandRaise:m,command:function(c,e,b){c||m(e,b||y())},parameter:function(c,e,b){c in e||d("unknown parameter ("+c+")"+u(b)+". possible values: "+B(e).join())},commandParameter:function(c,e,b,l){c in e||m("unknown parameter ("+c+")"+u(b)+". possible values: "+B(e).join(),l||y())},constructor:function(c){B(c).forEach(function(c){0>x.indexOf(c)&&d('invalid regl constructor argument "'+
c+'". must be one of '+x)})},type:function(c,e,b){p(c,e)||d("invalid parameter type"+u(b)+". expected "+e+", got "+typeof c)},commandType:v,isTypedArray:function(c,e){la(c)||d("invalid parameter type"+u(e)+". must be a typed array")},nni:function(c,e){0<=c&&(c|0)===c||d("invalid parameter type, ("+c+")"+u(e)+". must be a nonnegative integer")},oneOf:n,shaderError:function(c,d,a,k,f){if(!c.getShaderParameter(d,c.COMPILE_STATUS)){d=c.getShaderInfoLog(d);c=k===c.FRAGMENT_SHADER?"fragment":"vertex";v(a,
"string",c+" shader source must be a string",f);var m=e(a,f);a=l(d);g(m,a);B(m).forEach(function(c){function e(c,b){d.push(c);a.push(b||"")}var l=m[c];if(l.hasErrors){var d=[""],a=[""];e("file number "+c+": "+l.name+"\n","color:red;text-decoration:underline;font-weight:bold");l.lines.forEach(function(c){if(0<c.errors.length){e(b(c.number,4)+"|  ","background-color:yellow; font-weight:bold");e(c.line+"\n","color:red; background-color:yellow; font-weight:bold");var l=0;c.errors.forEach(function(d){d=
d.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(a){var k=a[1];d=a[2];switch(k){case "assign":k="="}l=Math.max(c.line.indexOf(k,l),0)}else l=0;e(b("| ",6));e(b("^^^",l+3)+"\n","font-weight:bold");e(b("| ",6));e(d+"\n","font-weight:bold")});e(b("| ",6)+"\n")}else e(b(c.number,4)+"|  "),e(c.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(a[0]=d.join("%c"),console.log.apply(console,a))}});C.raise("Error compiling "+c+" shader, "+m[0].name)}},linkError:function(c,
b,l,d,a){c.getProgramParameter(b,c.LINK_STATUS)||(c=c.getProgramInfoLog(b),l=e(l,a),d='Error linking program with vertex shader, "'+e(d,a)[0].name+'", and fragment shader "'+l[0].name+'"',"undefined"!==typeof document?console.log("%c"+d+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(d+"\n"+c),C.raise(d))},callSite:z,saveCommandRef:q,saveDrawInfo:function(c,e,b,l){function d(c){return c?l.id(c):0}function a(c,e){B(e).forEach(function(e){c[l.id(e)]=!0})}q(c);
c._fragId=d(c["static"].frag);c._vertId=d(c["static"].vert);var k=c._uniformSet={};a(k,e["static"]);a(k,e.dynamic);e=c._attributeSet={};a(e,b["static"]);a(e,b.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,e,b){c.texture?n(c.texture._texture.internalformat,e,"unsupported texture format for attachment"):n(c.renderbuffer._renderbuffer.format,b,"unsupported renderbuffer format for attachment")},guessCommand:y,
texture2D:function(c,e,b){var l=e.width,d=e.height,a=e.channels;C(0<l&&l<=b.maxTextureSize&&0<d&&d<=b.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||C(!(l&l-1)&&!!l&&!(d&d-1)&&!!d,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==l&&1!==d&&C(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(C(!(l&l-1)&&!!l&&!(d&d-1)&&!!d,"texture must be a square power of 2 to support mipmapping"),
C(e.mipmask===(l<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>b.extensions.indexOf("oes_texture_float_linear")&&C(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),C(!c.genMipmaps,"mipmap generation not supported with float textures"));var k=e.images;for(b=0;16>b;++b)if(k[b]){var f=l>>b,g=d>>b;C(e.mipmask&1<<b,"missing mipmap data");var m=k[b];C(m.width===f&&m.height===g,"invalid shape for mip images");C(m.format===e.format&&m.internalformat===
e.internalformat&&m.type===e.type,"incompatible type for mip image");!m.compressed&&m.data&&(f=Math.ceil(w(m.type,a)*f/m.unpackAlignment)*m.unpackAlignment,C(m.data.byteLength===f*g,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||C(0===(e.mipmask&1<<b),"extra mipmap data");e.compressed&&C(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,e,b,l){var d=c.width,a=c.height,k=c.channels;C(0<d&&d<=l.maxTextureSize&&
0<a&&a<=l.maxTextureSize,"invalid texture shape");C(d===a,"cube map must be square");C(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(l=0;l<b.length;++l){var f=b[l];C(f.width===d&&f.height===a,"inconsistent cube map face shape");e.genMipmaps&&(C(!f.compressed,"can not generate mipmap for compressed textures"),C(1===f.mipmask,"can not specify mipmaps and generate mipmaps"));for(var g=f.images,m=0;16>m;++m){var q=g[m];if(q){var v=d>>m,n=a>>m;C(f.mipmask&1<<m,"missing mipmap data");
C(q.width===v&&q.height===n,"invalid shape for mip images");C(q.format===c.format&&q.internalformat===c.internalformat&&q.type===c.type,"incompatible type for mip image");q.compressed||q.data&&C(q.data.byteLength===v*n*Math.max(w(q.type,k),q.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(h,r,J){r.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(h,r,J){function a(d){return Array.prototype.slice.call(d)}function d(d){return a(d).join("")}var C=h("./extend"),u=h("./compiled-fns");r.exports=function(){function p(){var c=[],e=[];return C(function(){c.push.apply(c,a(arguments))},{def:function(){var b="v"+f;f++;e.push(b);0<arguments.length&&(c.push(b,"="),c.push.apply(c,a(arguments)),c.push(";"));return b},toString:function(){return d([0<e.length?"var "+e.join(",")+";":"",d(c)])}})}function n(){function c(d,
a){b(d,a,"=",e.def(d,a),";")}var e=p(),b=p(),d=e.toString,k=b.toString;return C(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:b,save:c,set:function(b,l,d){c(b,l);e(b,l,"=",d,";")},toString:function(){return d()+k()}})}var b=0,f=0,c={},k=p(),y={};return{global:k,link:function(d){var e="$"+b,l=!1;"object"===typeof d&&d.name&&(e=d.name.replace(/ /g,"_"),l=!0);if(e in c)return e;c[e]=d;l||b++;return e},block:p,proc:function(c,e){function b(){var c="a"+a.length;a.push(c);return c}var a=[];
e=e||0;for(var k=0;k<e;++k)b();var k=n(),f=k.toString;return y[c]=C(k,{arg:b,toString:function(){return d(["function(",a.join(),"){",f(),"}"])}})},scope:n,cond:function(){var c=d(arguments),e=n(),b=n(),k=e.toString,f=b.toString;return C(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){b.apply(b,a(arguments));return this},toString:function(){var e=f();e&&(e="else{"+e+"}");return d(["if(",c,"){",k(),"}",e])}})},compile:function(){var b=[],e=[];Object.keys(c).sort(function(c,
e){var b="$"===c.charAt(0),l="$"===e.charAt(0);return b||l?b&&l?+c.slice(1)<+e.slice(1)?-1:1:b&&!l?-1:1:c.localeCompare(e)}).forEach(function(l){var d=c[l];b.push(l);e.push(d)});for(var l=0,a=b.length-1;-1<a;a--)if("$"===b[a].charAt(0)){l=a;break}var f=['"use strict";',k,"return {"];Object.keys(y).forEach(function(c){f.push('"',c,'":',y[c].toString(),",")});f.push("}");var a=d(f).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),l=b.slice(l).join(),m=u[l];if(!m)throw console.log("src code is:"),
console.log(a),console.log("compiled values:",e),console.log("linked names:",b),console.log("Keys available:",Object.keys(u)),console.log("Key:",l),console.log('"'+l+'": function('+b.join(", ")+") \n{\n"+a+"\n},"),Error("missing precompiled function with key: "+l);return m.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(h,r,J){r.exports={$0:function(a){var d,C,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,h,x,E,Da,H,ga,F,A,r,I,G;d=a.attributes;C=a.current;u=a.framebuffer;p=a.gl;n=a.next;b=
a.vao;f=n.blend_color;c=C.blend_color;k=n.blend_equation;y=C.blend_equation;z=n.blend_func;e=C.blend_func;l=n.colorMask;g=C.colorMask;q=n.depth_range;m=C.depth_range;v=n.polygonOffset_offset;w=C.polygonOffset_offset;B=n.sample_coverage;h=C.sample_coverage;x=n.scissor_box;E=C.scissor_box;Da=n.stencil_func;H=C.stencil_func;ga=n.stencil_opBack;F=C.stencil_opBack;A=n.stencil_opFront;r=C.stencil_opFront;I=n.viewport;G=C.viewport;return{poll:function(){var b,d,a,ca,M,fa,J,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,
na;C.dirty=!1;d=n.blend_enable;a=n.cull_enable;ca=n.depth_enable;M=n.dither;fa=n.polygonOffset_enable;J=n.sample_alpha;T=n.sample_enable;X=n.scissor_enable;S=n.stencil_enable;P=n.cull_face;N=C.cull_face;O=n.depth_func;Q=C.depth_func;R=n.depth_mask;qa=C.depth_mask;oa=n.frontFace;K=C.frontFace;L=n.lineWidth;da=C.lineWidth;V=n.stencil_mask;na=C.stencil_mask;b=u.next;b!==u.cur&&(b?p.bindFramebuffer(36160,b.framebuffer):p.bindFramebuffer(36160,null),u.cur=b);d!==C.blend_enable&&(d?p.enable(3042):p.disable(3042),
C.blend_enable=d);a!==C.cull_enable&&(a?p.enable(2884):p.disable(2884),C.cull_enable=a);ca!==C.depth_enable&&(ca?p.enable(2929):p.disable(2929),C.depth_enable=ca);M!==C.dither&&(M?p.enable(3024):p.disable(3024),C.dither=M);fa!==C.polygonOffset_enable&&(fa?p.enable(32823):p.disable(32823),C.polygonOffset_enable=fa);J!==C.sample_alpha&&(J?p.enable(32926):p.disable(32926),C.sample_alpha=J);T!==C.sample_enable&&(T?p.enable(32928):p.disable(32928),C.sample_enable=T);X!==C.scissor_enable&&(X?p.enable(3089):
p.disable(3089),C.scissor_enable=X);S!==C.stencil_enable&&(S?p.enable(2960):p.disable(2960),C.stencil_enable=S);if(f[0]!==c[0]||f[1]!==c[1]||f[2]!==c[2]||f[3]!==c[3])p.blendColor(f[0],f[1],f[2],f[3]),c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3];if(k[0]!==y[0]||k[1]!==y[1])p.blendEquationSeparate(k[0],k[1]),y[0]=k[0],y[1]=k[1];if(z[0]!==e[0]||z[1]!==e[1]||z[2]!==e[2]||z[3]!==e[3])p.blendFuncSeparate(z[0],z[1],z[2],z[3]),e[0]=z[0],e[1]=z[1],e[2]=z[2],e[3]=z[3];if(l[0]!==g[0]||l[1]!==g[1]||l[2]!==g[2]||l[3]!==
g[3])p.colorMask(l[0],l[1],l[2],l[3]),g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[3];P!==N&&(p.cullFace(P),C.cull_face=P);O!==Q&&(p.depthFunc(O),C.depth_func=O);R!==qa&&(p.depthMask(R),C.depth_mask=R);if(q[0]!==m[0]||q[1]!==m[1])p.depthRange(q[0],q[1]),m[0]=q[0],m[1]=q[1];oa!==K&&(p.frontFace(oa),C.frontFace=oa);L!==da&&(p.lineWidth(L),C.lineWidth=L);if(v[0]!==w[0]||v[1]!==w[1])p.polygonOffset(v[0],v[1]),w[0]=v[0],w[1]=v[1];if(B[0]!==h[0]||B[1]!==h[1])p.sampleCoverage(B[0],B[1]),h[0]=B[0],h[1]=B[1];if(x[0]!==
E[0]||x[1]!==E[1]||x[2]!==E[2]||x[3]!==E[3])p.scissor(x[0],x[1],x[2],x[3]),E[0]=x[0],E[1]=x[1],E[2]=x[2],E[3]=x[3];if(Da[0]!==H[0]||Da[1]!==H[1]||Da[2]!==H[2])p.stencilFunc(Da[0],Da[1],Da[2]),H[0]=Da[0],H[1]=Da[1],H[2]=Da[2];V!==na&&(p.stencilMask(V),C.stencil_mask=V);if(ga[0]!==F[0]||ga[1]!==F[1]||ga[2]!==F[2]||ga[3]!==F[3])p.stencilOpSeparate(ga[0],ga[1],ga[2],ga[3]),F[0]=ga[0],F[1]=ga[1],F[2]=ga[2],F[3]=ga[3];if(A[0]!==r[0]||A[1]!==r[1]||A[2]!==r[2]||A[3]!==r[3])p.stencilOpSeparate(A[0],A[1],A[2],
A[3]),r[0]=A[0],r[1]=A[1],r[2]=A[2],r[3]=A[3];if(I[0]!==G[0]||I[1]!==G[1]||I[2]!==G[2]||I[3]!==G[3])p.viewport(I[0],I[1],I[2],I[3]),G[0]=I[0],G[1]=I[1],G[2]=I[2],G[3]=I[3]},refresh:function(){var a,ma,t,ca,M,fa,J,T,X,S,P,N,O,Q,R,qa;C.dirty=!1;ma=n.blend_enable;t=n.cull_enable;ca=n.depth_enable;M=n.dither;fa=n.polygonOffset_enable;J=n.sample_alpha;T=n.sample_enable;X=n.scissor_enable;S=n.stencil_enable;P=n.cull_face;N=n.depth_func;O=n.depth_mask;Q=n.frontFace;R=n.lineWidth;qa=n.stencil_mask;(a=u.next)?
p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null);u.cur=a;a=d[0];a.buffer?(p.enableVertexAttribArray(0),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(0),p.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=d[1];a.buffer?(p.enableVertexAttribArray(1),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(1),p.vertexAttrib4f(1,
a.x,a.y,a.z,a.w),a.buffer=null);a=d[2];a.buffer?(p.enableVertexAttribArray(2),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(2),p.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=d[3];a.buffer?(p.enableVertexAttribArray(3),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(3),p.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);
a=d[4];a.buffer?(p.enableVertexAttribArray(4),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(4),p.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=d[5];a.buffer?(p.enableVertexAttribArray(5),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(5),p.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=d[6];a.buffer?(p.enableVertexAttribArray(6),
p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(6),p.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=d[7];a.buffer?(p.enableVertexAttribArray(7),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(7),p.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=d[8];a.buffer?(p.enableVertexAttribArray(8),p.bindBuffer(34962,a.buffer.buffer),
p.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(8),p.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=d[9];a.buffer?(p.enableVertexAttribArray(9),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(9),p.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=d[10];a.buffer?(p.enableVertexAttribArray(10),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(10,a.size,
a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(10),p.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=d[11];a.buffer?(p.enableVertexAttribArray(11),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(11),p.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=d[12];a.buffer?(p.enableVertexAttribArray(12),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,
a.offset)):(p.disableVertexAttribArray(12),p.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=d[13];a.buffer?(p.enableVertexAttribArray(13),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(13),p.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=d[14];a.buffer?(p.enableVertexAttribArray(14),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(14),
p.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=d[15];a.buffer?(p.enableVertexAttribArray(15),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(15),p.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);b.currentVAO=null;b.setVAO(b.targetVAO);ma?p.enable(3042):p.disable(3042);C.blend_enable=ma;t?p.enable(2884):p.disable(2884);C.cull_enable=t;ca?p.enable(2929):p.disable(2929);C.depth_enable=ca;M?p.enable(3024):
p.disable(3024);C.dither=M;fa?p.enable(32823):p.disable(32823);C.polygonOffset_enable=fa;J?p.enable(32926):p.disable(32926);C.sample_alpha=J;T?p.enable(32928):p.disable(32928);C.sample_enable=T;X?p.enable(3089):p.disable(3089);C.scissor_enable=X;S?p.enable(2960):p.disable(2960);C.stencil_enable=S;p.blendColor(f[0],f[1],f[2],f[3]);c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];p.blendEquationSeparate(k[0],k[1]);y[0]=k[0];y[1]=k[1];p.blendFuncSeparate(z[0],z[1],z[2],z[3]);e[0]=z[0];e[1]=z[1];e[2]=z[2];e[3]=
z[3];p.colorMask(l[0],l[1],l[2],l[3]);g[0]=l[0];g[1]=l[1];g[2]=l[2];g[3]=l[3];p.cullFace(P);C.cull_face=P;p.depthFunc(N);C.depth_func=N;p.depthMask(O);C.depth_mask=O;p.depthRange(q[0],q[1]);m[0]=q[0];m[1]=q[1];p.frontFace(Q);C.frontFace=Q;p.lineWidth(R);C.lineWidth=R;p.polygonOffset(v[0],v[1]);w[0]=v[0];w[1]=v[1];p.sampleCoverage(B[0],B[1]);h[0]=B[0];h[1]=B[1];p.scissor(x[0],x[1],x[2],x[3]);E[0]=x[0];E[1]=x[1];E[2]=x[2];E[3]=x[3];p.stencilFunc(Da[0],Da[1],Da[2]);H[0]=Da[0];H[1]=Da[1];H[2]=Da[2];p.stencilMask(qa);
C.stencil_mask=qa;p.stencilOpSeparate(ga[0],ga[1],ga[2],ga[3]);F[0]=ga[0];F[1]=ga[1];F[2]=ga[2];F[3]=ga[3];p.stencilOpSeparate(A[0],A[1],A[2],A[3]);r[0]=A[0];r[1]=A[1];r[2]=A[2];r[3]=A[3];p.viewport(I[0],I[1],I[2],I[3]);G[0]=I[0];G[1]=I[1];G[2]=I[2];G[3]=I[3]}}},$3:function(a,d,C,u){var p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,h,x,E,Da,H,r,F,A,U,I,G,D,ma,t,ca,M,fa;p=a.context;n=a.current;b=a.framebuffer;f=a.gl;c=a.next;k=a.shader;y=a.vao;z=c.blend_color;e=n.blend_color;l=c.blend_equation;g=n.blend_equation;
q=c.blend_func;m=n.blend_func;v=c.colorMask;w=n.colorMask;B=c.depth_range;h=n.depth_range;x=c.polygonOffset_offset;E=n.polygonOffset_offset;Da=c.sample_coverage;H=n.sample_coverage;r=c.scissor_box;F=n.scissor_box;A=c.stencil_func;U=n.stencil_func;I=c.stencil_opBack;G=n.stencil_opBack;D=c.stencil_opFront;ma=n.stencil_opFront;t=c.viewport;ca=n.viewport;M={};fa={};return{batch:function(a,p){var C,S,P,N,O;C=b.next;C!==b.cur&&(C?f.bindFramebuffer(36160,C.framebuffer):f.bindFramebuffer(36160,null),b.cur=
C);if(n.dirty){C=c.dither;C!==n.dither&&(C?f.enable(3024):f.disable(3024),n.dither=C);C=c.blend_enable;C!==n.blend_enable&&(C?f.enable(3042):f.disable(3042),n.blend_enable=C);C=z[0];P=z[1];N=z[2];O=z[3];if(C!==e[0]||P!==e[1]||N!==e[2]||O!==e[3])f.blendColor(C,P,N,O),e[0]=C,e[1]=P,e[2]=N,e[3]=O;C=l[0];P=l[1];if(C!==g[0]||P!==g[1])f.blendEquationSeparate(C,P),g[0]=C,g[1]=P;C=q[0];P=q[1];N=q[2];O=q[3];if(C!==m[0]||P!==m[1]||N!==m[2]||O!==m[3])f.blendFuncSeparate(C,P,N,O),m[0]=C,m[1]=P,m[2]=N,m[3]=O;
C=c.depth_enable;C!==n.depth_enable&&(C?f.enable(2929):f.disable(2929),n.depth_enable=C);C=c.depth_func;C!==n.depth_func&&(f.depthFunc(C),n.depth_func=C);C=B[0];P=B[1];if(C!==h[0]||P!==h[1])f.depthRange(C,P),h[0]=C,h[1]=P;C=c.depth_mask;C!==n.depth_mask&&(f.depthMask(C),n.depth_mask=C);C=v[0];P=v[1];N=v[2];O=v[3];if(C!==w[0]||P!==w[1]||N!==w[2]||O!==w[3])f.colorMask(C,P,N,O),w[0]=C,w[1]=P,w[2]=N,w[3]=O;C=c.cull_enable;C!==n.cull_enable&&(C?f.enable(2884):f.disable(2884),n.cull_enable=C);C=c.cull_face;
C!==n.cull_face&&(f.cullFace(C),n.cull_face=C);C=c.frontFace;C!==n.frontFace&&(f.frontFace(C),n.frontFace=C);C=c.lineWidth;C!==n.lineWidth&&(f.lineWidth(C),n.lineWidth=C);C=c.polygonOffset_enable;C!==n.polygonOffset_enable&&(C?f.enable(32823):f.disable(32823),n.polygonOffset_enable=C);C=x[0];P=x[1];if(C!==E[0]||P!==E[1])f.polygonOffset(C,P),E[0]=C,E[1]=P;C=c.sample_alpha;C!==n.sample_alpha&&(C?f.enable(32926):f.disable(32926),n.sample_alpha=C);C=c.sample_enable;C!==n.sample_enable&&(C?f.enable(32928):
f.disable(32928),n.sample_enable=C);C=Da[0];P=Da[1];if(C!==H[0]||P!==H[1])f.sampleCoverage(C,P),H[0]=C,H[1]=P;C=c.stencil_enable;C!==n.stencil_enable&&(C?f.enable(2960):f.disable(2960),n.stencil_enable=C);C=c.stencil_mask;C!==n.stencil_mask&&(f.stencilMask(C),n.stencil_mask=C);C=A[0];P=A[1];N=A[2];if(C!==U[0]||P!==U[1]||N!==U[2])f.stencilFunc(C,P,N),U[0]=C,U[1]=P,U[2]=N;C=D[0];P=D[1];N=D[2];O=D[3];if(C!==ma[0]||P!==ma[1]||N!==ma[2]||O!==ma[3])f.stencilOpSeparate(C,P,N,O),ma[0]=C,ma[1]=P,ma[2]=N,ma[3]=
O;C=I[0];P=I[1];N=I[2];O=I[3];if(C!==G[0]||P!==G[1]||N!==G[2]||O!==G[3])f.stencilOpSeparate(C,P,N,O),G[0]=C,G[1]=P,G[2]=N,G[3]=O;C=c.scissor_enable;C!==n.scissor_enable&&(C?f.enable(3089):f.disable(3089),n.scissor_enable=C);C=r[0];P=r[1];N=r[2];O=r[3];if(C!==F[0]||P!==F[1]||N!==F[2]||O!==F[3])f.scissor(C,P,N,O),F[0]=C,F[1]=P,F[2]=N,F[3]=O;C=t[0];P=t[1];N=t[2];O=t[3];if(C!==ca[0]||P!==ca[1]||N!==ca[2]||O!==ca[3])f.viewport(C,P,N,O),ca[0]=C,ca[1]=P,ca[2]=N,ca[3]=O;n.dirty=!1}if(C=n.profile)S=performance.now(),
d.count+=p;P=k.program(k.vert,k.frag);f.useProgram(P.program);y.setVAO(null);N=P.id;(O=fa[N])||(O=fa[N]=u(P));O.call(this,a,p);y.setVAO(null);C&&(d.cpuTime+=performance.now()-S)},draw:function(a){var u,p,S,P,N;u=b.next;u!==b.cur&&(u?f.bindFramebuffer(36160,u.framebuffer):f.bindFramebuffer(36160,null),b.cur=u);if(n.dirty){u=c.dither;u!==n.dither&&(u?f.enable(3024):f.disable(3024),n.dither=u);u=c.blend_enable;u!==n.blend_enable&&(u?f.enable(3042):f.disable(3042),n.blend_enable=u);u=z[0];S=z[1];P=z[2];
N=z[3];if(u!==e[0]||S!==e[1]||P!==e[2]||N!==e[3])f.blendColor(u,S,P,N),e[0]=u,e[1]=S,e[2]=P,e[3]=N;u=l[0];S=l[1];if(u!==g[0]||S!==g[1])f.blendEquationSeparate(u,S),g[0]=u,g[1]=S;u=q[0];S=q[1];P=q[2];N=q[3];if(u!==m[0]||S!==m[1]||P!==m[2]||N!==m[3])f.blendFuncSeparate(u,S,P,N),m[0]=u,m[1]=S,m[2]=P,m[3]=N;u=c.depth_enable;u!==n.depth_enable&&(u?f.enable(2929):f.disable(2929),n.depth_enable=u);u=c.depth_func;u!==n.depth_func&&(f.depthFunc(u),n.depth_func=u);u=B[0];S=B[1];if(u!==h[0]||S!==h[1])f.depthRange(u,
S),h[0]=u,h[1]=S;u=c.depth_mask;u!==n.depth_mask&&(f.depthMask(u),n.depth_mask=u);u=v[0];S=v[1];P=v[2];N=v[3];if(u!==w[0]||S!==w[1]||P!==w[2]||N!==w[3])f.colorMask(u,S,P,N),w[0]=u,w[1]=S,w[2]=P,w[3]=N;u=c.cull_enable;u!==n.cull_enable&&(u?f.enable(2884):f.disable(2884),n.cull_enable=u);u=c.cull_face;u!==n.cull_face&&(f.cullFace(u),n.cull_face=u);u=c.frontFace;u!==n.frontFace&&(f.frontFace(u),n.frontFace=u);u=c.lineWidth;u!==n.lineWidth&&(f.lineWidth(u),n.lineWidth=u);u=c.polygonOffset_enable;u!==
n.polygonOffset_enable&&(u?f.enable(32823):f.disable(32823),n.polygonOffset_enable=u);u=x[0];S=x[1];if(u!==E[0]||S!==E[1])f.polygonOffset(u,S),E[0]=u,E[1]=S;u=c.sample_alpha;u!==n.sample_alpha&&(u?f.enable(32926):f.disable(32926),n.sample_alpha=u);u=c.sample_enable;u!==n.sample_enable&&(u?f.enable(32928):f.disable(32928),n.sample_enable=u);u=Da[0];S=Da[1];if(u!==H[0]||S!==H[1])f.sampleCoverage(u,S),H[0]=u,H[1]=S;u=c.stencil_enable;u!==n.stencil_enable&&(u?f.enable(2960):f.disable(2960),n.stencil_enable=
u);u=c.stencil_mask;u!==n.stencil_mask&&(f.stencilMask(u),n.stencil_mask=u);u=A[0];S=A[1];P=A[2];if(u!==U[0]||S!==U[1]||P!==U[2])f.stencilFunc(u,S,P),U[0]=u,U[1]=S,U[2]=P;u=D[0];S=D[1];P=D[2];N=D[3];if(u!==ma[0]||S!==ma[1]||P!==ma[2]||N!==ma[3])f.stencilOpSeparate(u,S,P,N),ma[0]=u,ma[1]=S,ma[2]=P,ma[3]=N;u=I[0];S=I[1];P=I[2];N=I[3];if(u!==G[0]||S!==G[1]||P!==G[2]||N!==G[3])f.stencilOpSeparate(u,S,P,N),G[0]=u,G[1]=S,G[2]=P,G[3]=N;u=c.scissor_enable;u!==n.scissor_enable&&(u?f.enable(3089):f.disable(3089),
n.scissor_enable=u);u=r[0];S=r[1];P=r[2];N=r[3];if(u!==F[0]||S!==F[1]||P!==F[2]||N!==F[3])f.scissor(u,S,P,N),F[0]=u,F[1]=S,F[2]=P,F[3]=N;u=t[0];S=t[1];P=t[2];N=t[3];if(u!==ca[0]||S!==ca[1]||P!==ca[2]||N!==ca[3])f.viewport(u,S,P,N),ca[0]=u,ca[1]=S,ca[2]=P,ca[3]=N;n.dirty=!1}if(u=n.profile)p=performance.now(),d.count++;S=k.program(k.vert,k.frag);f.useProgram(S.program);y.setVAO(null);P=S.id;(N=M[P])||(N=M[P]=C(S));N.call(this,a);y.setVAO(null);u&&(d.cpuTime+=performance.now()-p)},scope:function(c,e,
b){var l,a;if(l=n.profile)a=performance.now(),d.count++;e(p,c,b);l&&(d.cpuTime+=performance.now()-a)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,d,C,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,h,x,E,Da,H,r,F,A,U,I,G,D,ma,t,ca,M,fa,J,T,X,S,P,N,O,Q,R,qa,oa,K,
L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,xa,Ba){var ja,Y,ta,Fa,Ha,fb,aa,Kc,bc,Ga,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je,Gd,Pd,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa;ja=a.attributes;Y=a.context;ta=a.current;Fa=a.draw;Ha=a.elements;fb=a.framebuffer;aa=a.gl;Kc=a.next;bc=a.shader;Ga=a.uniforms;cc=a.vao;Sb=Kc.blend_color;Ae=ta.blend_color;Id=Kc.blend_equation;Ad=ta.blend_equation;
Sd=Kc.blend_func;De=ta.blend_func;ye=Kc.colorMask;$d=ta.colorMask;re=Kc.depth_range;je=ta.depth_range;Gd=Kc.polygonOffset_offset;Pd=ta.polygonOffset_offset;Bd=Kc.sample_coverage;Cd=ta.sample_coverage;Be=Kc.scissor_box;Qe=ta.scissor_box;Ue=Kc.stencil_func;Jd=ta.stencil_func;Ee=Kc.stencil_opBack;me=ta.stencil_opBack;ce=Kc.stencil_opFront;Md=ta.stencil_opFront;Ed=Kc.viewport;pd=ta.viewport;bd={};td={};Oc=new Float32Array(16);rd=new Float32Array(16);Gc=new Float32Array(16);gd=new Float32Array(16);Rc=
new Float32Array(16);md=new Float32Array(16);Vb=new Float32Array(16);Eb=new Float32Array(16);vc=new Float32Array(16);zb=new Float32Array(16);yc=new Float32Array(16);Bb=new Float32Array(16);Lc=new Float32Array(16);mc=new Float32Array(16);Hc=new Float32Array(16);hd=new Float32Array(16);cd=new Float32Array(16);Ec=new Float32Array(16);fc=new Float32Array(16);Ic=new Float32Array(16);pc=new Float32Array(16);rc=new Float32Array(16);nc=new Float32Array(16);qc=new Float32Array(16);nb=new Float32Array(16);
Wc=new Float32Array(16);Zb=new Float32Array(16);hb=new Float32Array(16);Mb=new Float32Array(16);bb=new Float32Array(16);kb=new Float32Array(16);Xa=new Float32Array(16);return{batch:function(a,d){var B,x,C,t;B=fb.next;B!==fb.cur&&(B?aa.bindFramebuffer(36160,B.framebuffer):aa.bindFramebuffer(36160,null),fb.cur=B);if(ta.dirty){var h,E,la,A,H,F,D,I,ma,Da,G,r,M,ga,U,ca,fa,Ga,Sb,bc,Eb,Rc,Vb,Pa,Bb;h=ye[0];E=ye[1];la=ye[2];A=ye[3];if(h!==$d[0]||E!==$d[1]||la!==$d[2]||A!==$d[3])aa.colorMask(h,E,la,A),$d[0]=
h,$d[1]=E,$d[2]=la,$d[3]=A;H=Kc.frontFace;H!==ta.frontFace&&(aa.frontFace(H),ta.frontFace=H);F=Kc.polygonOffset_enable;F!==ta.polygonOffset_enable&&(F?aa.enable(32823):aa.disable(32823),ta.polygonOffset_enable=F);D=Gd[0];I=Gd[1];if(D!==Pd[0]||I!==Pd[1])aa.polygonOffset(D,I),Pd[0]=D,Pd[1]=I;ma=Kc.sample_alpha;ma!==ta.sample_alpha&&(ma?aa.enable(32926):aa.disable(32926),ta.sample_alpha=ma);Da=Kc.sample_enable;Da!==ta.sample_enable&&(Da?aa.enable(32928):aa.disable(32928),ta.sample_enable=Da);G=Bd[0];
r=Bd[1];if(G!==Cd[0]||r!==Cd[1])aa.sampleCoverage(G,r),Cd[0]=G,Cd[1]=r;M=Kc.stencil_enable;M!==ta.stencil_enable&&(M?aa.enable(2960):aa.disable(2960),ta.stencil_enable=M);ga=Kc.stencil_mask;ga!==ta.stencil_mask&&(aa.stencilMask(ga),ta.stencil_mask=ga);U=Ue[0];ca=Ue[1];fa=Ue[2];if(U!==Jd[0]||ca!==Jd[1]||fa!==Jd[2])aa.stencilFunc(U,ca,fa),Jd[0]=U,Jd[1]=ca,Jd[2]=fa;Ga=ce[0];Sb=ce[1];bc=ce[2];Eb=ce[3];if(Ga!==Md[0]||Sb!==Md[1]||bc!==Md[2]||Eb!==Md[3])aa.stencilOpSeparate(Ga,Sb,bc,Eb),Md[0]=Ga,Md[1]=Sb,
Md[2]=bc,Md[3]=Eb;Rc=Ee[0];Vb=Ee[1];Pa=Ee[2];Bb=Ee[3];if(Rc!==me[0]||Vb!==me[1]||Pa!==me[2]||Bb!==me[3])aa.stencilOpSeparate(Rc,Vb,Pa,Bb),me[0]=Rc,me[1]=Vb,me[2]=Pa,me[3]=Bb}aa.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;aa.disable(3042);ta.blend_enable=!1;aa.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;aa.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;aa.enable(2884);ta.cull_enable=!0;aa.cullFace(1029);ta.cull_face=1029;aa.enable(2929);ta.depth_enable=!0;
aa.depthFunc(513);ta.depth_func=513;aa.depthMask(!0);ta.depth_mask=!0;aa.depthRange(0,1);je[0]=0;je[1]=1;aa.disable(3024);ta.dither=!1;aa.lineWidth(2);ta.lineWidth=2;aa.enable(3089);ta.scissor_enable=!0;x=ta.profile;ta.profile=!1;aa.useProgram(J.program);var Be,zb,md,Ma,mc,$a,Gc,Sd,ob,Oa,vc,Sa,wb,xb,Ua,pb,rd,Id,Hc,cb,Lc,gd,Za,Oc,Ab,ab,re,yc,Xb,Qb,Ed,Rb,hd;cc.setVAO(null);Be=za.location;zb=ja[Be];zb.buffer||aa.enableVertexAttribArray(Be);if(zb.type!==u.dtype||4!==zb.size||zb.buffer!==u||!1!==zb.normalized||
0!==zb.offset||0!==zb.stride)aa.bindBuffer(34962,u.buffer),aa.vertexAttribPointer(Be,4,u.dtype,!1,0,0),zb.type=u.dtype,zb.size=4,zb.buffer=u,zb.normalized=!1,zb.offset=0,zb.stride=0;md=Qa.location;Ma=ja[md];Ma.buffer||aa.enableVertexAttribArray(md);if(Ma.type!==p.dtype||4!==Ma.size||Ma.buffer!==p||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)aa.bindBuffer(34962,p.buffer),aa.vertexAttribPointer(md,4,p.dtype,!1,0,0),Ma.type=p.dtype,Ma.size=4,Ma.buffer=p,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;
mc=Ka.location;$a=ja[mc];$a.buffer||aa.enableVertexAttribArray(mc);if($a.type!==n.dtype||4!==$a.size||$a.buffer!==n||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)aa.bindBuffer(34962,n.buffer),aa.vertexAttribPointer(mc,4,n.dtype,!1,0,0),$a.type=n.dtype,$a.size=4,$a.buffer=n,$a.normalized=!1,$a.offset=0,$a.stride=0;Gc=Hb.location;Sd=ja[Gc];Sd.buffer||aa.enableVertexAttribArray(Gc);if(Sd.type!==b.dtype||4!==Sd.size||Sd.buffer!==b||!1!==Sd.normalized||0!==Sd.offset||0!==Sd.stride)aa.bindBuffer(34962,
b.buffer),aa.vertexAttribPointer(Gc,4,b.dtype,!1,0,0),Sd.type=b.dtype,Sd.size=4,Sd.buffer=b,Sd.normalized=!1,Sd.offset=0,Sd.stride=0;ob=Va.location;Oa=ja[ob];Oa.buffer||aa.enableVertexAttribArray(ob);if(Oa.type!==f.dtype||4!==Oa.size||Oa.buffer!==f||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)aa.bindBuffer(34962,f.buffer),aa.vertexAttribPointer(ob,4,f.dtype,!1,0,0),Oa.type=f.dtype,Oa.size=4,Oa.buffer=f,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;vc=ha.location;Sa=ja[vc];Sa.buffer||aa.enableVertexAttribArray(vc);
if(Sa.type!==c.dtype||4!==Sa.size||Sa.buffer!==c||!1!==Sa.normalized||0!==Sa.offset||0!==Sa.stride)aa.bindBuffer(34962,c.buffer),aa.vertexAttribPointer(vc,4,c.dtype,!1,0,0),Sa.type=c.dtype,Sa.size=4,Sa.buffer=c,Sa.normalized=!1,Sa.offset=0,Sa.stride=0;wb=ea.location;xb=ja[wb];xb.buffer||aa.enableVertexAttribArray(wb);if(xb.type!==k.dtype||4!==xb.size||xb.buffer!==k||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)aa.bindBuffer(34962,k.buffer),aa.vertexAttribPointer(wb,4,k.dtype,!1,0,0),xb.type=k.dtype,
xb.size=4,xb.buffer=k,xb.normalized=!1,xb.offset=0,xb.stride=0;Ua=sa.location;pb=ja[Ua];pb.buffer||aa.enableVertexAttribArray(Ua);if(pb.type!==y.dtype||4!==pb.size||pb.buffer!==y||!1!==pb.normalized||0!==pb.offset||0!==pb.stride)aa.bindBuffer(34962,y.buffer),aa.vertexAttribPointer(Ua,4,y.dtype,!1,0,0),pb.type=y.dtype,pb.size=4,pb.buffer=y,pb.normalized=!1,pb.offset=0,pb.stride=0;rd=ua.location;Id=ja[rd];Id.buffer||aa.enableVertexAttribArray(rd);if(Id.type!==z.dtype||4!==Id.size||Id.buffer!==z||!1!==
Id.normalized||0!==Id.offset||0!==Id.stride)aa.bindBuffer(34962,z.buffer),aa.vertexAttribPointer(rd,4,z.dtype,!1,0,0),Id.type=z.dtype,Id.size=4,Id.buffer=z,Id.normalized=!1,Id.offset=0,Id.stride=0;Hc=Ea.location;cb=ja[Hc];cb.buffer||aa.enableVertexAttribArray(Hc);if(cb.type!==e.dtype||4!==cb.size||cb.buffer!==e||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)aa.bindBuffer(34962,e.buffer),aa.vertexAttribPointer(Hc,4,e.dtype,!1,0,0),cb.type=e.dtype,cb.size=4,cb.buffer=e,cb.normalized=!1,cb.offset=
0,cb.stride=0;Lc=Ra.location;gd=ja[Lc];gd.buffer||aa.enableVertexAttribArray(Lc);if(gd.type!==l.dtype||4!==gd.size||gd.buffer!==l||!1!==gd.normalized||0!==gd.offset||0!==gd.stride)aa.bindBuffer(34962,l.buffer),aa.vertexAttribPointer(Lc,4,l.dtype,!1,0,0),gd.type=l.dtype,gd.size=4,gd.buffer=l,gd.normalized=!1,gd.offset=0,gd.stride=0;Za=Gb.location;Oc=ja[Za];Oc.buffer||aa.enableVertexAttribArray(Za);if(Oc.type!==g.dtype||4!==Oc.size||Oc.buffer!==g||!1!==Oc.normalized||0!==Oc.offset||0!==Oc.stride)aa.bindBuffer(34962,
g.buffer),aa.vertexAttribPointer(Za,4,g.dtype,!1,0,0),Oc.type=g.dtype,Oc.size=4,Oc.buffer=g,Oc.normalized=!1,Oc.offset=0,Oc.stride=0;Ab=Z.location;ab=ja[Ab];ab.buffer||aa.enableVertexAttribArray(Ab);if(ab.type!==q.dtype||4!==ab.size||ab.buffer!==q||!1!==ab.normalized||0!==ab.offset||0!==ab.stride)aa.bindBuffer(34962,q.buffer),aa.vertexAttribPointer(Ab,4,q.dtype,!1,0,0),ab.type=q.dtype,ab.size=4,ab.buffer=q,ab.normalized=!1,ab.offset=0,ab.stride=0;re=W.location;yc=ja[re];yc.buffer||aa.enableVertexAttribArray(re);
if(yc.type!==m.dtype||4!==yc.size||yc.buffer!==m||!1!==yc.normalized||0!==yc.offset||0!==yc.stride)aa.bindBuffer(34962,m.buffer),aa.vertexAttribPointer(re,4,m.dtype,!1,0,0),yc.type=m.dtype,yc.size=4,yc.buffer=m,yc.normalized=!1,yc.offset=0,yc.stride=0;Xb=wa.location;Qb=ja[Xb];Qb.buffer||aa.enableVertexAttribArray(Xb);if(Qb.type!==v.dtype||4!==Qb.size||Qb.buffer!==v||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)aa.bindBuffer(34962,v.buffer),aa.vertexAttribPointer(Xb,4,v.dtype,!1,0,0),Qb.type=v.dtype,
Qb.size=4,Qb.buffer=v,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Ed=X.location;Rb=ja[Ed];Rb.buffer||aa.enableVertexAttribArray(Ed);if(Rb.type!==w.dtype||4!==Rb.size||Rb.buffer!==w||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)aa.bindBuffer(34962,w.buffer),aa.vertexAttribPointer(Ed,4,w.dtype,!1,0,0),Rb.type=w.dtype,Rb.size=4,Rb.buffer=w,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;aa.uniform1i(Ia.location,T.bind());(hd=Fa.elements)?aa.bindBuffer(34963,hd.buffer.buffer):cc.currentVAO&&(hd=Ha.getElements(cc.currentVAO.elements))&&
aa.bindBuffer(34963,hd.buffer.buffer);for(C=0;C<d;++C){t=a[C];var Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe;bd.height=t.viewportHeight;bd.width=t.viewportWidth;bd.x=t.viewportX;bd.y=t.viewportY;Fc=bd.x|0;sd=bd.y|0;Pc="width"in bd?bd.width|0:Y.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:Y.framebufferHeight-sd;vd=Y.viewportWidth;Y.viewportWidth=Pc;oc=Y.viewportHeight;
Y.viewportHeight=Yc;aa.viewport(Fc,sd,Pc,Yc);pd[0]=Fc;pd[1]=sd;pd[2]=Pc;pd[3]=Yc;td.height=t.scissorHeight;td.width=t.scissorWidth;td.x=t.scissorX;td.y=t.scissorY;xc=td.x|0;hc=td.y|0;db="width"in td?td.width|0:Y.framebufferWidth-xc;tc="height"in td?td.height|0:Y.framebufferHeight-hc;aa.scissor(xc,hc,db,tc);Qe[0]=xc;Qe[1]=hc;Qe[2]=db;Qe[3]=tc;Tb=t.dim0A;aa.uniformMatrix4fv(P.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(cd[0]=Tb[0],cd[1]=Tb[1],cd[2]=Tb[2],cd[3]=Tb[3],cd[4]=Tb[4],cd[5]=
Tb[5],cd[6]=Tb[6],cd[7]=Tb[7],cd[8]=Tb[8],cd[9]=Tb[9],cd[10]=Tb[10],cd[11]=Tb[11],cd[12]=Tb[12],cd[13]=Tb[13],cd[14]=Tb[14],cd[15]=Tb[15],cd));Yb=t.dim1A;aa.uniformMatrix4fv(R.location,!1,Array.isArray(Yb)||Yb instanceof Float32Array?Yb:(Ec[0]=Yb[0],Ec[1]=Yb[1],Ec[2]=Yb[2],Ec[3]=Yb[3],Ec[4]=Yb[4],Ec[5]=Yb[5],Ec[6]=Yb[6],Ec[7]=Yb[7],Ec[8]=Yb[8],Ec[9]=Yb[9],Ec[10]=Yb[10],Ec[11]=Yb[11],Ec[12]=Yb[12],Ec[13]=Yb[13],Ec[14]=Yb[14],Ec[15]=Yb[15],Ec));ec=t.dim0B;aa.uniformMatrix4fv(N.location,!1,Array.isArray(ec)||
ec instanceof Float32Array?ec:(fc[0]=ec[0],fc[1]=ec[1],fc[2]=ec[2],fc[3]=ec[3],fc[4]=ec[4],fc[5]=ec[5],fc[6]=ec[6],fc[7]=ec[7],fc[8]=ec[8],fc[9]=ec[9],fc[10]=ec[10],fc[11]=ec[11],fc[12]=ec[12],fc[13]=ec[13],fc[14]=ec[14],fc[15]=ec[15],fc));ic=t.dim1B;aa.uniformMatrix4fv(qa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Ic[0]=ic[0],Ic[1]=ic[1],Ic[2]=ic[2],Ic[3]=ic[3],Ic[4]=ic[4],Ic[5]=ic[5],Ic[6]=ic[6],Ic[7]=ic[7],Ic[8]=ic[8],Ic[9]=ic[9],Ic[10]=ic[10],Ic[11]=ic[11],Ic[12]=ic[12],Ic[13]=
ic[13],Ic[14]=ic[14],Ic[15]=ic[15],Ic));zc=t.dim0C;aa.uniformMatrix4fv(O.location,!1,Array.isArray(zc)||zc instanceof Float32Array?zc:(pc[0]=zc[0],pc[1]=zc[1],pc[2]=zc[2],pc[3]=zc[3],pc[4]=zc[4],pc[5]=zc[5],pc[6]=zc[6],pc[7]=zc[7],pc[8]=zc[8],pc[9]=zc[9],pc[10]=zc[10],pc[11]=zc[11],pc[12]=zc[12],pc[13]=zc[13],pc[14]=zc[14],pc[15]=zc[15],pc));Cc=t.dim1C;aa.uniformMatrix4fv(oa.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(rc[0]=Cc[0],rc[1]=Cc[1],rc[2]=Cc[2],rc[3]=Cc[3],rc[4]=Cc[4],rc[5]=
Cc[5],rc[6]=Cc[6],rc[7]=Cc[7],rc[8]=Cc[8],rc[9]=Cc[9],rc[10]=Cc[10],rc[11]=Cc[11],rc[12]=Cc[12],rc[13]=Cc[13],rc[14]=Cc[14],rc[15]=Cc[15],rc));dd=t.dim0D;aa.uniformMatrix4fv(Q.location,!1,Array.isArray(dd)||dd instanceof Float32Array?dd:(nc[0]=dd[0],nc[1]=dd[1],nc[2]=dd[2],nc[3]=dd[3],nc[4]=dd[4],nc[5]=dd[5],nc[6]=dd[6],nc[7]=dd[7],nc[8]=dd[8],nc[9]=dd[9],nc[10]=dd[10],nc[11]=dd[11],nc[12]=dd[12],nc[13]=dd[13],nc[14]=dd[14],nc[15]=dd[15],nc));Sc=t.dim1D;aa.uniformMatrix4fv(K.location,!1,Array.isArray(Sc)||
Sc instanceof Float32Array?Sc:(qc[0]=Sc[0],qc[1]=Sc[1],qc[2]=Sc[2],qc[3]=Sc[3],qc[4]=Sc[4],qc[5]=Sc[5],qc[6]=Sc[6],qc[7]=Sc[7],qc[8]=Sc[8],qc[9]=Sc[9],qc[10]=Sc[10],qc[11]=Sc[11],qc[12]=Sc[12],qc[13]=Sc[13],qc[14]=Sc[14],qc[15]=Sc[15],qc));Tc=t.loA;aa.uniformMatrix4fv(ya.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?Tc:(nb[0]=Tc[0],nb[1]=Tc[1],nb[2]=Tc[2],nb[3]=Tc[3],nb[4]=Tc[4],nb[5]=Tc[5],nb[6]=Tc[6],nb[7]=Tc[7],nb[8]=Tc[8],nb[9]=Tc[9],nb[10]=Tc[10],nb[11]=Tc[11],nb[12]=Tc[12],nb[13]=
Tc[13],nb[14]=Tc[14],nb[15]=Tc[15],nb));Uc=t.hiA;aa.uniformMatrix4fv(da.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(Wc[0]=Uc[0],Wc[1]=Uc[1],Wc[2]=Uc[2],Wc[3]=Uc[3],Wc[4]=Uc[4],Wc[5]=Uc[5],Wc[6]=Uc[6],Wc[7]=Uc[7],Wc[8]=Uc[8],Wc[9]=Uc[9],Wc[10]=Uc[10],Wc[11]=Uc[11],Wc[12]=Uc[12],Wc[13]=Uc[13],Wc[14]=Uc[14],Wc[15]=Uc[15],Wc));Zc=t.loB;aa.uniformMatrix4fv(va.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Zb[0]=Zc[0],Zb[1]=Zc[1],Zb[2]=Zc[2],Zb[3]=Zc[3],Zb[4]=Zc[4],Zb[5]=
Zc[5],Zb[6]=Zc[6],Zb[7]=Zc[7],Zb[8]=Zc[8],Zb[9]=Zc[9],Zb[10]=Zc[10],Zb[11]=Zc[11],Zb[12]=Zc[12],Zb[13]=Zc[13],Zb[14]=Zc[14],Zb[15]=Zc[15],Zb));od=t.hiB;aa.uniformMatrix4fv(V.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(hb[0]=od[0],hb[1]=od[1],hb[2]=od[2],hb[3]=od[3],hb[4]=od[4],hb[5]=od[5],hb[6]=od[6],hb[7]=od[7],hb[8]=od[8],hb[9]=od[9],hb[10]=od[10],hb[11]=od[11],hb[12]=od[12],hb[13]=od[13],hb[14]=od[14],hb[15]=od[15],hb));ed=t.loC;aa.uniformMatrix4fv(ba.location,!1,Array.isArray(ed)||
ed instanceof Float32Array?ed:(Mb[0]=ed[0],Mb[1]=ed[1],Mb[2]=ed[2],Mb[3]=ed[3],Mb[4]=ed[4],Mb[5]=ed[5],Mb[6]=ed[6],Mb[7]=ed[7],Mb[8]=ed[8],Mb[9]=ed[9],Mb[10]=ed[10],Mb[11]=ed[11],Mb[12]=ed[12],Mb[13]=ed[13],Mb[14]=ed[14],Mb[15]=ed[15],Mb));$c=t.hiC;aa.uniformMatrix4fv(na.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(bb[0]=$c[0],bb[1]=$c[1],bb[2]=$c[2],bb[3]=$c[3],bb[4]=$c[4],bb[5]=$c[5],bb[6]=$c[6],bb[7]=$c[7],bb[8]=$c[8],bb[9]=$c[9],bb[10]=$c[10],bb[11]=$c[11],bb[12]=$c[12],bb[13]=
$c[13],bb[14]=$c[14],bb[15]=$c[15],bb));lc=t.loD;aa.uniformMatrix4fv(Ca.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(kb[0]=lc[0],kb[1]=lc[1],kb[2]=lc[2],kb[3]=lc[3],kb[4]=lc[4],kb[5]=lc[5],kb[6]=lc[6],kb[7]=lc[7],kb[8]=lc[8],kb[9]=lc[9],kb[10]=lc[10],kb[11]=lc[11],kb[12]=lc[12],kb[13]=lc[13],kb[14]=lc[14],kb[15]=lc[15],kb));dc=t.hiD;aa.uniformMatrix4fv(ia.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Xa[0]=dc[0],Xa[1]=dc[1],Xa[2]=dc[2],Xa[3]=dc[3],Xa[4]=dc[4],Xa[5]=
dc[5],Xa[6]=dc[6],Xa[7]=dc[7],Xa[8]=dc[8],Xa[9]=dc[9],Xa[10]=dc[10],Xa[11]=dc[11],Xa[12]=dc[12],Xa[13]=dc[13],Xa[14]=dc[14],Xa[15]=dc[15],Xa));ad=t.resolution;Xc=ad[0];Ac=ad[1];C&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,aa.uniform2f(ra.location,Xc,Ac));Dd=t.viewBoxPos;ze=Dd[0];kd=Dd[1];C&&xd===ze&&Fe===kd||(xd=ze,Fe=kd,aa.uniform2f(xa.location,ze,kd));Td=t.viewBoxSize;he=Td[0];Ud=Td[1];C&&ae===he&&Nd===Ud||(ae=he,Nd=Ud,aa.uniform2f(Ba.location,he,Ud));Kd=t.maskHeight;C&&qd===Kd||(qd=Kd,aa.uniform1f(ka.location,
Kd));Vc=t.drwLayer;C&&wd===Vc||(wd=Vc,aa.uniform1f(L.location,Vc));ud=t.contextColor;ld=ud[0];Fd=ud[1];ke=ud[2];ue=ud[3];C&&yd===ld&&Hd===Fd&&ne===ke&&oe===ue||(yd=ld,Hd=Fd,ne=ke,oe=ue,aa.uniform4f(S.location,ld,Fd,ke,ue));(le=t.maskTexture)&&"framebuffer"===le._reglType&&(le=le.color[0]);ie=le._texture;aa.uniform1i(pa.location,ie.bind());ve=t.offset;if(fe=t.count)hd?aa.drawElements(1,fe,hd.type,ve<<(hd.type-5121>>1)):aa.drawArrays(1,ve,fe),Y.viewportWidth=vd,Y.viewportHeight=oc,ie.unbind()}T.unbind();
ta.dirty=!0;cc.setVAO(null);ta.profile=x},draw:function(a){var d,x,t,h,E,la;d=fb.next;d!==fb.cur&&(d?aa.bindFramebuffer(36160,d.framebuffer):aa.bindFramebuffer(36160,null),fb.cur=d);if(ta.dirty){d=ye[0];la=ye[1];x=ye[2];t=ye[3];if(d!==$d[0]||la!==$d[1]||x!==$d[2]||t!==$d[3])aa.colorMask(d,la,x,t),$d[0]=d,$d[1]=la,$d[2]=x,$d[3]=t;d=Kc.frontFace;d!==ta.frontFace&&(aa.frontFace(d),ta.frontFace=d);d=Kc.polygonOffset_enable;d!==ta.polygonOffset_enable&&(d?aa.enable(32823):aa.disable(32823),ta.polygonOffset_enable=
d);d=Gd[0];la=Gd[1];if(d!==Pd[0]||la!==Pd[1])aa.polygonOffset(d,la),Pd[0]=d,Pd[1]=la;d=Kc.sample_alpha;d!==ta.sample_alpha&&(d?aa.enable(32926):aa.disable(32926),ta.sample_alpha=d);d=Kc.sample_enable;d!==ta.sample_enable&&(d?aa.enable(32928):aa.disable(32928),ta.sample_enable=d);d=Bd[0];la=Bd[1];if(d!==Cd[0]||la!==Cd[1])aa.sampleCoverage(d,la),Cd[0]=d,Cd[1]=la;d=Kc.stencil_enable;d!==ta.stencil_enable&&(d?aa.enable(2960):aa.disable(2960),ta.stencil_enable=d);d=Kc.stencil_mask;d!==ta.stencil_mask&&
(aa.stencilMask(d),ta.stencil_mask=d);d=Ue[0];la=Ue[1];x=Ue[2];if(d!==Jd[0]||la!==Jd[1]||x!==Jd[2])aa.stencilFunc(d,la,x),Jd[0]=d,Jd[1]=la,Jd[2]=x;d=ce[0];la=ce[1];x=ce[2];t=ce[3];if(d!==Md[0]||la!==Md[1]||x!==Md[2]||t!==Md[3])aa.stencilOpSeparate(d,la,x,t),Md[0]=d,Md[1]=la,Md[2]=x,Md[3]=t;d=Ee[0];la=Ee[1];x=Ee[2];t=Ee[3];if(d!==me[0]||la!==me[1]||x!==me[2]||t!==me[3])aa.stencilOpSeparate(d,la,x,t),me[0]=d,me[1]=la,me[2]=x,me[3]=t}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;
bd.y=a.viewportY;x=bd.x|0;t=bd.y|0;h="width"in bd?bd.width|0:Y.framebufferWidth-x;E="height"in bd?bd.height|0:Y.framebufferHeight-t;d=Y.viewportWidth;Y.viewportWidth=h;la=Y.viewportHeight;Y.viewportHeight=E;aa.viewport(x,t,h,E);pd[0]=x;pd[1]=t;pd[2]=h;pd[3]=E;aa.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;aa.disable(3042);ta.blend_enable=!1;aa.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;aa.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;aa.enable(2884);ta.cull_enable=
!0;aa.cullFace(1029);ta.cull_face=1029;aa.enable(2929);ta.depth_enable=!0;aa.depthFunc(513);ta.depth_func=513;aa.depthMask(!0);ta.depth_mask=!0;aa.depthRange(0,1);je[0]=0;je[1]=1;aa.disable(3024);ta.dither=!1;aa.lineWidth(2);ta.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;x=td.x|0;t=td.y|0;h="width"in td?td.width|0:Y.framebufferWidth-x;E="height"in td?td.height|0:Y.framebufferHeight-t;aa.scissor(x,t,h,E);Qe[0]=x;Qe[1]=t;Qe[2]=h;Qe[3]=E;aa.enable(3089);
ta.scissor_enable=!0;x=ta.profile;ta.profile=!1;aa.useProgram(C.program);cc.setVAO(null);t=za.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,u.buffer),aa.vertexAttribPointer(t,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;t=Qa.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==p.dtype||4!==h.size||h.buffer!==p||!1!==
h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,p.buffer),aa.vertexAttribPointer(t,4,p.dtype,!1,0,0),h.type=p.dtype,h.size=4,h.buffer=p,h.normalized=!1,h.offset=0,h.stride=0;t=Ka.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,n.buffer),aa.vertexAttribPointer(t,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,h.normalized=!1,h.offset=0,h.stride=0;t=Hb.location;
h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==b.dtype||4!==h.size||h.buffer!==b||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,b.buffer),aa.vertexAttribPointer(t,4,b.dtype,!1,0,0),h.type=b.dtype,h.size=4,h.buffer=b,h.normalized=!1,h.offset=0,h.stride=0;t=Va.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==f.dtype||4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,f.buffer),aa.vertexAttribPointer(t,4,f.dtype,
!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;t=ha.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==c.dtype||4!==h.size||h.buffer!==c||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,c.buffer),aa.vertexAttribPointer(t,4,c.dtype,!1,0,0),h.type=c.dtype,h.size=4,h.buffer=c,h.normalized=!1,h.offset=0,h.stride=0;t=ea.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||
0!==h.offset||0!==h.stride)aa.bindBuffer(34962,k.buffer),aa.vertexAttribPointer(t,4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,h.normalized=!1,h.offset=0,h.stride=0;t=sa.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==y.dtype||4!==h.size||h.buffer!==y||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,y.buffer),aa.vertexAttribPointer(t,4,y.dtype,!1,0,0),h.type=y.dtype,h.size=4,h.buffer=y,h.normalized=!1,h.offset=0,h.stride=0;t=ua.location;h=ja[t];h.buffer||
aa.enableVertexAttribArray(t);if(h.type!==z.dtype||4!==h.size||h.buffer!==z||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,z.buffer),aa.vertexAttribPointer(t,4,z.dtype,!1,0,0),h.type=z.dtype,h.size=4,h.buffer=z,h.normalized=!1,h.offset=0,h.stride=0;t=Ea.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==e.dtype||4!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,e.buffer),aa.vertexAttribPointer(t,4,e.dtype,!1,0,0),h.type=
e.dtype,h.size=4,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;t=Ra.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==l.dtype||4!==h.size||h.buffer!==l||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,l.buffer),aa.vertexAttribPointer(t,4,l.dtype,!1,0,0),h.type=l.dtype,h.size=4,h.buffer=l,h.normalized=!1,h.offset=0,h.stride=0;t=Gb.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||
0!==h.stride)aa.bindBuffer(34962,g.buffer),aa.vertexAttribPointer(t,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;t=Z.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==q.dtype||4!==h.size||h.buffer!==q||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,q.buffer),aa.vertexAttribPointer(t,4,q.dtype,!1,0,0),h.type=q.dtype,h.size=4,h.buffer=q,h.normalized=!1,h.offset=0,h.stride=0;t=W.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);
if(h.type!==m.dtype||4!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,m.buffer),aa.vertexAttribPointer(t,4,m.dtype,!1,0,0),h.type=m.dtype,h.size=4,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;t=wa.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==v.dtype||4!==h.size||h.buffer!==v||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,v.buffer),aa.vertexAttribPointer(t,4,v.dtype,!1,0,0),h.type=v.dtype,h.size=4,h.buffer=v,
h.normalized=!1,h.offset=0,h.stride=0;t=X.location;h=ja[t];h.buffer||aa.enableVertexAttribArray(t);if(h.type!==w.dtype||4!==h.size||h.buffer!==w||!1!==h.normalized||0!==h.offset||0!==h.stride)aa.bindBuffer(34962,w.buffer),aa.vertexAttribPointer(t,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;t=a.dim0A;aa.uniformMatrix4fv(P.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Oc[0]=t[0],Oc[1]=t[1],Oc[2]=t[2],Oc[3]=t[3],Oc[4]=t[4],Oc[5]=t[5],Oc[6]=
t[6],Oc[7]=t[7],Oc[8]=t[8],Oc[9]=t[9],Oc[10]=t[10],Oc[11]=t[11],Oc[12]=t[12],Oc[13]=t[13],Oc[14]=t[14],Oc[15]=t[15],Oc));t=a.dim1A;aa.uniformMatrix4fv(R.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(rd[0]=t[0],rd[1]=t[1],rd[2]=t[2],rd[3]=t[3],rd[4]=t[4],rd[5]=t[5],rd[6]=t[6],rd[7]=t[7],rd[8]=t[8],rd[9]=t[9],rd[10]=t[10],rd[11]=t[11],rd[12]=t[12],rd[13]=t[13],rd[14]=t[14],rd[15]=t[15],rd));t=a.dim0B;aa.uniformMatrix4fv(N.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Gc[0]=
t[0],Gc[1]=t[1],Gc[2]=t[2],Gc[3]=t[3],Gc[4]=t[4],Gc[5]=t[5],Gc[6]=t[6],Gc[7]=t[7],Gc[8]=t[8],Gc[9]=t[9],Gc[10]=t[10],Gc[11]=t[11],Gc[12]=t[12],Gc[13]=t[13],Gc[14]=t[14],Gc[15]=t[15],Gc));t=a.dim1B;aa.uniformMatrix4fv(qa.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(gd[0]=t[0],gd[1]=t[1],gd[2]=t[2],gd[3]=t[3],gd[4]=t[4],gd[5]=t[5],gd[6]=t[6],gd[7]=t[7],gd[8]=t[8],gd[9]=t[9],gd[10]=t[10],gd[11]=t[11],gd[12]=t[12],gd[13]=t[13],gd[14]=t[14],gd[15]=t[15],gd));t=a.dim0C;aa.uniformMatrix4fv(O.location,
!1,Array.isArray(t)||t instanceof Float32Array?t:(Rc[0]=t[0],Rc[1]=t[1],Rc[2]=t[2],Rc[3]=t[3],Rc[4]=t[4],Rc[5]=t[5],Rc[6]=t[6],Rc[7]=t[7],Rc[8]=t[8],Rc[9]=t[9],Rc[10]=t[10],Rc[11]=t[11],Rc[12]=t[12],Rc[13]=t[13],Rc[14]=t[14],Rc[15]=t[15],Rc));t=a.dim1C;aa.uniformMatrix4fv(oa.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(md[0]=t[0],md[1]=t[1],md[2]=t[2],md[3]=t[3],md[4]=t[4],md[5]=t[5],md[6]=t[6],md[7]=t[7],md[8]=t[8],md[9]=t[9],md[10]=t[10],md[11]=t[11],md[12]=t[12],md[13]=t[13],md[14]=
t[14],md[15]=t[15],md));t=a.dim0D;aa.uniformMatrix4fv(Q.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Vb[0]=t[0],Vb[1]=t[1],Vb[2]=t[2],Vb[3]=t[3],Vb[4]=t[4],Vb[5]=t[5],Vb[6]=t[6],Vb[7]=t[7],Vb[8]=t[8],Vb[9]=t[9],Vb[10]=t[10],Vb[11]=t[11],Vb[12]=t[12],Vb[13]=t[13],Vb[14]=t[14],Vb[15]=t[15],Vb));t=a.dim1D;aa.uniformMatrix4fv(K.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Eb[0]=t[0],Eb[1]=t[1],Eb[2]=t[2],Eb[3]=t[3],Eb[4]=t[4],Eb[5]=t[5],Eb[6]=t[6],Eb[7]=t[7],Eb[8]=t[8],Eb[9]=
t[9],Eb[10]=t[10],Eb[11]=t[11],Eb[12]=t[12],Eb[13]=t[13],Eb[14]=t[14],Eb[15]=t[15],Eb));t=a.loA;aa.uniformMatrix4fv(ya.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(vc[0]=t[0],vc[1]=t[1],vc[2]=t[2],vc[3]=t[3],vc[4]=t[4],vc[5]=t[5],vc[6]=t[6],vc[7]=t[7],vc[8]=t[8],vc[9]=t[9],vc[10]=t[10],vc[11]=t[11],vc[12]=t[12],vc[13]=t[13],vc[14]=t[14],vc[15]=t[15],vc));t=a.hiA;aa.uniformMatrix4fv(da.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(zb[0]=t[0],zb[1]=t[1],zb[2]=t[2],zb[3]=t[3],
zb[4]=t[4],zb[5]=t[5],zb[6]=t[6],zb[7]=t[7],zb[8]=t[8],zb[9]=t[9],zb[10]=t[10],zb[11]=t[11],zb[12]=t[12],zb[13]=t[13],zb[14]=t[14],zb[15]=t[15],zb));t=a.loB;aa.uniformMatrix4fv(va.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(yc[0]=t[0],yc[1]=t[1],yc[2]=t[2],yc[3]=t[3],yc[4]=t[4],yc[5]=t[5],yc[6]=t[6],yc[7]=t[7],yc[8]=t[8],yc[9]=t[9],yc[10]=t[10],yc[11]=t[11],yc[12]=t[12],yc[13]=t[13],yc[14]=t[14],yc[15]=t[15],yc));t=a.hiB;aa.uniformMatrix4fv(V.location,!1,Array.isArray(t)||t instanceof
Float32Array?t:(Bb[0]=t[0],Bb[1]=t[1],Bb[2]=t[2],Bb[3]=t[3],Bb[4]=t[4],Bb[5]=t[5],Bb[6]=t[6],Bb[7]=t[7],Bb[8]=t[8],Bb[9]=t[9],Bb[10]=t[10],Bb[11]=t[11],Bb[12]=t[12],Bb[13]=t[13],Bb[14]=t[14],Bb[15]=t[15],Bb));t=a.loC;aa.uniformMatrix4fv(ba.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Lc[0]=t[0],Lc[1]=t[1],Lc[2]=t[2],Lc[3]=t[3],Lc[4]=t[4],Lc[5]=t[5],Lc[6]=t[6],Lc[7]=t[7],Lc[8]=t[8],Lc[9]=t[9],Lc[10]=t[10],Lc[11]=t[11],Lc[12]=t[12],Lc[13]=t[13],Lc[14]=t[14],Lc[15]=t[15],Lc));t=a.hiC;aa.uniformMatrix4fv(na.location,
!1,Array.isArray(t)||t instanceof Float32Array?t:(mc[0]=t[0],mc[1]=t[1],mc[2]=t[2],mc[3]=t[3],mc[4]=t[4],mc[5]=t[5],mc[6]=t[6],mc[7]=t[7],mc[8]=t[8],mc[9]=t[9],mc[10]=t[10],mc[11]=t[11],mc[12]=t[12],mc[13]=t[13],mc[14]=t[14],mc[15]=t[15],mc));t=a.loD;aa.uniformMatrix4fv(Ca.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Hc[0]=t[0],Hc[1]=t[1],Hc[2]=t[2],Hc[3]=t[3],Hc[4]=t[4],Hc[5]=t[5],Hc[6]=t[6],Hc[7]=t[7],Hc[8]=t[8],Hc[9]=t[9],Hc[10]=t[10],Hc[11]=t[11],Hc[12]=t[12],Hc[13]=t[13],Hc[14]=
t[14],Hc[15]=t[15],Hc));t=a.hiD;aa.uniformMatrix4fv(ia.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(hd[0]=t[0],hd[1]=t[1],hd[2]=t[2],hd[3]=t[3],hd[4]=t[4],hd[5]=t[5],hd[6]=t[6],hd[7]=t[7],hd[8]=t[8],hd[9]=t[9],hd[10]=t[10],hd[11]=t[11],hd[12]=t[12],hd[13]=t[13],hd[14]=t[14],hd[15]=t[15],hd));t=a.resolution;aa.uniform2f(ra.location,t[0],t[1]);t=a.viewBoxPos;aa.uniform2f(xa.location,t[0],t[1]);t=a.viewBoxSize;aa.uniform2f(Ba.location,t[0],t[1]);aa.uniform1f(ka.location,a.maskHeight);aa.uniform1f(L.location,
a.drwLayer);t=a.contextColor;aa.uniform4f(S.location,t[0],t[1],t[2],t[3]);(t=a.maskTexture)&&"framebuffer"===t._reglType&&(t=t.color[0]);t=t._texture;aa.uniform1i(pa.location,t.bind());aa.uniform1i(Ia.location,B.bind());(h=Fa.elements)?aa.bindBuffer(34963,h.buffer.buffer):cc.currentVAO&&(h=Ha.getElements(cc.currentVAO.elements))&&aa.bindBuffer(34963,h.buffer.buffer);E=a.offset;if(a=a.count)h?aa.drawElements(1,a,h.type,E<<(h.type-5121>>1)):aa.drawArrays(1,E,a),ta.dirty=!0,cc.setVAO(null),Y.viewportWidth=
d,Y.viewportHeight=la,ta.profile=x,t.unbind(),B.unbind()},scope:function(a,d,B){var C,ha,O,ea,K,W,sa,Ka,wa,Qa,Ia,L,P,Hb,N,V,S,ba,ra,Z,ja,R,ua,Q,da,xa,Ba,aa,qa,ia,va,T,ka,Va,X,za,Ea,pa,Ca,oa,na,Gb,ya,J,Ra,Ha,fb,Aa,nb,fc,Eb,Rc,Vb,qc,pc,zb,Bb,Cd,Ee,nc,cc,ce,rc,hb,bb,Xa,Ic,Ue,md,mc,kb,Gc,me,gd,Jd,Oc,vc,Zb,yc,Ad,rd,Hc,Ec,Lc,$d,pd,Ae,Md,Mb,Gd,Wc,Qe,cd,hd,Bd,ye,De,Pd,je,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,
ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;
C=bd.x|0;ha=bd.y|0;O="width"in bd?bd.width|0:Y.framebufferWidth-C;ea="height"in bd?bd.height|0:Y.framebufferHeight-ha;K=Y.viewportWidth;Y.viewportWidth=O;W=Y.viewportHeight;Y.viewportHeight=ea;sa=Ed[0];Ed[0]=C;Ka=Ed[1];Ed[1]=ha;wa=Ed[2];Ed[2]=O;Qa=Ed[3];Ed[3]=ea;Ia=Sb[0];Sb[0]=0;L=Sb[1];Sb[1]=0;P=Sb[2];Sb[2]=0;Hb=Sb[3];Sb[3]=0;N=Kc.blend_enable;Kc.blend_enable=!1;V=Id[0];Id[0]=32774;S=Id[1];Id[1]=32774;ba=Sd[0];Sd[0]=770;ra=Sd[1];Sd[1]=771;Z=Sd[2];Sd[2]=1;ja=Sd[3];Sd[3]=1;R=Kc.cull_enable;Kc.cull_enable=
!0;ua=Kc.cull_face;Kc.cull_face=1029;Q=Kc.depth_enable;Kc.depth_enable=!0;da=Kc.depth_func;Kc.depth_func=513;xa=Kc.depth_mask;Kc.depth_mask=!0;Ba=re[0];re[0]=0;aa=re[1];re[1]=1;qa=Kc.dither;Kc.dither=!1;ia=Kc.lineWidth;Kc.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;va=td.x|0;T=td.y|0;ka="width"in td?td.width|0:Y.framebufferWidth-va;Va="height"in td?td.height|0:Y.framebufferHeight-T;X=Be[0];Be[0]=va;za=Be[1];Be[1]=T;Ea=Be[2];Be[2]=ka;pa=Be[3];Be[3]=
Va;Ca=Kc.scissor_enable;Kc.scissor_enable=!0;oa=ta.profile;ta.profile=!1;na=a.offset;Gb=Fa.offset;Fa.offset=na;ya=a.count;J=Fa.count;Fa.count=ya;Ra=Fa.primitive;Fa.primitive=1;Ha=a.contextColor;fb=Ga[24];Ga[24]=Ha;Aa=a.dim0A;nb=Ga[3];Ga[3]=Aa;fc=a.dim0B;Eb=Ga[5];Ga[5]=fc;Rc=a.dim0C;Vb=Ga[7];Ga[7]=Rc;qc=a.dim0D;pc=Ga[9];Ga[9]=qc;zb=a.dim1A;Bb=Ga[4];Ga[4]=zb;Cd=a.dim1B;Ee=Ga[6];Ga[6]=Cd;nc=a.dim1C;cc=Ga[8];Ga[8]=nc;ce=a.dim1D;rc=Ga[10];Ga[10]=ce;hb=a.drwLayer;bb=Ga[23];Ga[23]=hb;Xa=a.hiA;Ic=Ga[12];
Ga[12]=Xa;Ue=a.hiB;md=Ga[14];Ga[14]=Ue;mc=a.hiC;kb=Ga[16];Ga[16]=mc;Gc=a.hiD;me=Ga[18];Ga[18]=Gc;gd=a.loA;Jd=Ga[11];Ga[11]=gd;Oc=a.loB;vc=Ga[13];Ga[13]=Oc;Zb=a.loC;yc=Ga[15];Ga[15]=Zb;Ad=a.loD;rd=Ga[17];Ga[17]=Ad;Hc=a.maskHeight;Ec=Ga[22];Ga[22]=Hc;Lc=a.maskTexture;$d=Ga[25];Ga[25]=Lc;pd=Ga[26];Ga[26]=h;Ae=a.resolution;Md=Ga[19];Ga[19]=Ae;Mb=a.viewBoxPos;Gd=Ga[20];Ga[20]=Mb;Wc=a.viewBoxSize;Qe=Ga[21];Ga[21]=Wc;cd=x.buffer;x.buffer=w;hd=x.divisor;x.divisor=0;Bd=x.normalized;x.normalized=!1;ye=x.offset;
x.offset=0;De=x.size;x.size=0;Pd=x.state;x.state=1;je=x.stride;x.stride=0;ae=x.type;x.type=w.dtype;Ud=x.w;x.w=0;Nd=x.x;x.x=0;Kd=x.y;x.y=0;qd=x.z;x.z=0;Vc=E.buffer;E.buffer=u;wd=E.divisor;E.divisor=0;ud=E.normalized;E.normalized=!1;ld=E.offset;E.offset=0;yd=E.size;E.size=0;Fd=E.state;E.state=1;Hd=E.stride;E.stride=0;ke=E.type;E.type=u.dtype;ne=E.w;E.w=0;ue=E.x;E.x=0;oe=E.y;E.y=0;le=E.z;E.z=0;ie=Da.buffer;Da.buffer=p;ve=Da.divisor;Da.divisor=0;fe=Da.normalized;Da.normalized=!1;pe=Da.offset;Da.offset=
0;Qc=Da.size;Da.size=0;id=Da.state;Da.state=1;we=Da.stride;Da.stride=0;se=Da.type;Da.type=p.dtype;Qd=Da.w;Da.w=0;Vd=Da.x;Da.x=0;Wd=Da.y;Da.y=0;Xd=Da.z;Da.z=0;qe=H.buffer;H.buffer=n;Ce=H.divisor;H.divisor=0;Ge=H.normalized;H.normalized=!1;te=H.offset;H.offset=0;Ve=H.size;H.size=0;We=H.state;H.state=1;Re=H.stride;H.stride=0;xe=H.type;H.type=n.dtype;Je=H.w;H.w=0;Le=H.x;H.x=0;Me=H.y;H.y=0;Ne=H.z;H.z=0;Ke=r.buffer;r.buffer=b;Rd=r.divisor;r.divisor=0;be=r.normalized;r.normalized=!1;ee=r.offset;r.offset=
0;ge=r.size;r.size=0;Oe=r.state;r.state=1;Ld=r.stride;r.stride=0;Yd=r.type;r.type=b.dtype;He=r.w;r.w=0;Pe=r.x;r.x=0;df=r.y;r.y=0;cf=r.z;r.z=0;Xe=F.buffer;F.buffer=f;Se=F.divisor;F.divisor=0;bf=F.normalized;F.normalized=!1;af=F.offset;F.offset=0;Ye=F.size;F.size=0;Ze=F.state;F.state=1;Zd=F.stride;F.stride=0;de=F.type;F.type=f.dtype;$e=F.w;F.w=0;kf=F.x;F.x=0;of=F.y;F.y=0;gf=F.z;F.z=0;lf=A.buffer;A.buffer=c;mf=A.divisor;A.divisor=0;nf=A.normalized;A.normalized=!1;sf=A.offset;A.offset=0;pf=A.size;A.size=
0;tf=A.state;A.state=1;Cf=A.stride;A.stride=0;Df=A.type;A.type=c.dtype;Te=A.w;A.w=0;Ie=A.x;A.x=0;qf=A.y;A.y=0;rf=A.z;A.z=0;Ef=U.buffer;U.buffer=k;Hf=U.divisor;U.divisor=0;Bf=U.normalized;U.normalized=!1;Ff=U.offset;U.offset=0;Gf=U.size;U.size=0;xf=U.state;U.state=1;yf=U.stride;U.stride=0;wf=U.type;U.type=k.dtype;zf=U.w;U.w=0;Af=U.x;U.x=0;Jf=U.y;U.y=0;Kf=U.z;U.z=0;Lf=I.buffer;I.buffer=y;Mf=I.divisor;I.divisor=0;uf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;If=I.size;I.size=0;vf=I.state;I.state=
1;dg=I.stride;I.stride=0;Sf=I.type;I.type=y.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;hf=I.y;I.y=0;ef=I.z;I.z=0;Nf=G.buffer;G.buffer=z;Of=G.divisor;G.divisor=0;eg=G.normalized;G.normalized=!1;fg=G.offset;G.offset=0;gg=G.size;G.size=0;hg=G.state;G.state=1;ig=G.stride;G.stride=0;Wf=G.type;G.type=z.dtype;Uf=G.w;G.w=0;Xf=G.x;G.x=0;Yf=G.y;G.y=0;Zf=G.z;G.z=0;jg=D.buffer;D.buffer=e;rg=D.divisor;D.divisor=0;sg=D.normalized;D.normalized=!1;tg=D.offset;D.offset=0;ug=D.size;D.size=0;vg=D.state;D.state=1;wg=D.stride;D.stride=
0;xg=D.type;D.type=e.dtype;yg=D.w;D.w=0;zg=D.x;D.x=0;Ag=D.y;D.y=0;Bg=D.z;D.z=0;jf=ma.buffer;ma.buffer=l;ff=ma.divisor;ma.divisor=0;Pf=ma.normalized;ma.normalized=!1;Qf=ma.offset;ma.offset=0;kg=ma.size;ma.size=0;lg=ma.state;ma.state=1;mg=ma.stride;ma.stride=0;ng=ma.type;ma.type=l.dtype;og=ma.w;ma.w=0;$f=ma.x;ma.x=0;Vf=ma.y;ma.y=0;ag=ma.z;ma.z=0;bg=t.buffer;t.buffer=g;cg=t.divisor;t.divisor=0;pg=t.normalized;t.normalized=!1;Cg=t.offset;t.offset=0;Dg=t.size;t.size=0;Eg=t.state;t.state=1;Fg=t.stride;
t.stride=0;Gg=t.type;t.type=g.dtype;Hg=t.w;t.w=0;Ig=t.x;t.x=0;Jg=t.y;t.y=0;Kg=t.z;t.z=0;Lg=ca.buffer;ca.buffer=q;Mg=ca.divisor;ca.divisor=0;Ng=ca.normalized;ca.normalized=!1;Og=ca.offset;ca.offset=0;Pg=ca.size;ca.size=0;Qg=ca.state;ca.state=1;Rg=ca.stride;ca.stride=0;Sg=ca.type;ca.type=q.dtype;Tg=ca.w;ca.w=0;Ug=ca.x;ca.x=0;Vg=ca.y;ca.y=0;Wg=ca.z;ca.z=0;Xg=M.buffer;M.buffer=m;Yg=M.divisor;M.divisor=0;Zg=M.normalized;M.normalized=!1;$g=M.offset;M.offset=0;ah=M.size;M.size=0;bh=M.state;M.state=1;ch=
M.stride;M.stride=0;dh=M.type;M.type=m.dtype;eh=M.w;M.w=0;fh=M.x;M.x=0;gh=M.y;M.y=0;hh=M.z;M.z=0;ih=fa.buffer;fa.buffer=v;jh=fa.divisor;fa.divisor=0;kh=fa.normalized;fa.normalized=!1;lh=fa.offset;fa.offset=0;mh=fa.size;fa.size=0;nh=fa.state;fa.state=1;oh=fa.stride;fa.stride=0;ph=fa.type;fa.type=v.dtype;qh=fa.w;fa.w=0;rh=fa.x;fa.x=0;sh=fa.y;fa.y=0;th=fa.z;fa.z=0;uh=bc.vert;bc.vert=2;vh=bc.frag;bc.frag=1;ta.dirty=!0;d(Y,a,B);Y.viewportWidth=K;Y.viewportHeight=W;Ed[0]=sa;Ed[1]=Ka;Ed[2]=wa;Ed[3]=Qa;Sb[0]=
Ia;Sb[1]=L;Sb[2]=P;Sb[3]=Hb;Kc.blend_enable=N;Id[0]=V;Id[1]=S;Sd[0]=ba;Sd[1]=ra;Sd[2]=Z;Sd[3]=ja;Kc.cull_enable=R;Kc.cull_face=ua;Kc.depth_enable=Q;Kc.depth_func=da;Kc.depth_mask=xa;re[0]=Ba;re[1]=aa;Kc.dither=qa;Kc.lineWidth=ia;Be[0]=X;Be[1]=za;Be[2]=Ea;Be[3]=pa;Kc.scissor_enable=Ca;ta.profile=oa;Fa.offset=Gb;Fa.count=J;Fa.primitive=Ra;Ga[24]=fb;Ga[3]=nb;Ga[5]=Eb;Ga[7]=Vb;Ga[9]=pc;Ga[4]=Bb;Ga[6]=Ee;Ga[8]=cc;Ga[10]=rc;Ga[23]=bb;Ga[12]=Ic;Ga[14]=md;Ga[16]=kb;Ga[18]=me;Ga[11]=Jd;Ga[13]=vc;Ga[15]=yc;
Ga[17]=rd;Ga[22]=Ec;Ga[25]=$d;Ga[26]=pd;Ga[19]=Md;Ga[20]=Gd;Ga[21]=Qe;x.buffer=cd;x.divisor=hd;x.normalized=Bd;x.offset=ye;x.size=De;x.state=Pd;x.stride=je;x.type=ae;x.w=Ud;x.x=Nd;x.y=Kd;x.z=qd;E.buffer=Vc;E.divisor=wd;E.normalized=ud;E.offset=ld;E.size=yd;E.state=Fd;E.stride=Hd;E.type=ke;E.w=ne;E.x=ue;E.y=oe;E.z=le;Da.buffer=ie;Da.divisor=ve;Da.normalized=fe;Da.offset=pe;Da.size=Qc;Da.state=id;Da.stride=we;Da.type=se;Da.w=Qd;Da.x=Vd;Da.y=Wd;Da.z=Xd;H.buffer=qe;H.divisor=Ce;H.normalized=Ge;H.offset=
te;H.size=Ve;H.state=We;H.stride=Re;H.type=xe;H.w=Je;H.x=Le;H.y=Me;H.z=Ne;r.buffer=Ke;r.divisor=Rd;r.normalized=be;r.offset=ee;r.size=ge;r.state=Oe;r.stride=Ld;r.type=Yd;r.w=He;r.x=Pe;r.y=df;r.z=cf;F.buffer=Xe;F.divisor=Se;F.normalized=bf;F.offset=af;F.size=Ye;F.state=Ze;F.stride=Zd;F.type=de;F.w=$e;F.x=kf;F.y=of;F.z=gf;A.buffer=lf;A.divisor=mf;A.normalized=nf;A.offset=sf;A.size=pf;A.state=tf;A.stride=Cf;A.type=Df;A.w=Te;A.x=Ie;A.y=qf;A.z=rf;U.buffer=Ef;U.divisor=Hf;U.normalized=Bf;U.offset=Ff;U.size=
Gf;U.state=xf;U.stride=yf;U.type=wf;U.w=zf;U.x=Af;U.y=Jf;U.z=Kf;I.buffer=Lf;I.divisor=Mf;I.normalized=uf;I.offset=Rf;I.size=If;I.state=vf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=hf;I.z=ef;G.buffer=Nf;G.divisor=Of;G.normalized=eg;G.offset=fg;G.size=gg;G.state=hg;G.stride=ig;G.type=Wf;G.w=Uf;G.x=Xf;G.y=Yf;G.z=Zf;D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;ma.buffer=jf;ma.divisor=ff;ma.normalized=Pf;ma.offset=Qf;ma.size=
kg;ma.state=lg;ma.stride=mg;ma.type=ng;ma.w=og;ma.x=$f;ma.y=Vf;ma.z=ag;t.buffer=bg;t.divisor=cg;t.normalized=pg;t.offset=Cg;t.size=Dg;t.state=Eg;t.stride=Fg;t.type=Gg;t.w=Hg;t.x=Ig;t.y=Jg;t.z=Kg;ca.buffer=Lg;ca.divisor=Mg;ca.normalized=Ng;ca.offset=Og;ca.size=Pg;ca.state=Qg;ca.stride=Rg;ca.type=Sg;ca.w=Tg;ca.x=Ug;ca.y=Vg;ca.z=Wg;M.buffer=Xg;M.divisor=Yg;M.normalized=Zg;M.offset=$g;M.size=ah;M.state=bh;M.stride=ch;M.type=dh;M.w=eh;M.x=fh;M.y=gh;M.z=hh;fa.buffer=ih;fa.divisor=jh;fa.normalized=kh;fa.offset=
lh;fa.size=mh;fa.state=nh;fa.stride=oh;fa.type=ph;fa.w=qh;fa.x=rh;fa.y=sh;fa.z=th;bc.vert=uh;bc.frag=vh;ta.dirty=!0}}},$1:function(a,d){var h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,Da,H,r,F,A,U,I,G,D;h=a.attributes;u=a.current;p=a.framebuffer;n=a.gl;b=a.next;f=a.vao;c=b.blend_color;k=u.blend_color;y=b.blend_equation;z=u.blend_equation;e=b.blend_func;l=u.blend_func;g=b.colorMask;q=u.colorMask;m=b.depth_range;v=u.depth_range;w=b.polygonOffset_offset;B=u.polygonOffset_offset;la=b.sample_coverage;x=
u.sample_coverage;E=b.scissor_box;Da=u.scissor_box;H=b.stencil_func;r=u.stencil_func;F=b.stencil_opBack;A=u.stencil_opBack;U=b.stencil_opFront;I=u.stencil_opFront;G=b.viewport;D=u.viewport;return{poll:function(){var a,d,f,h,C,J,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia;u.dirty=!1;d=b.blend_enable;f=b.cull_enable;h=b.depth_enable;C=b.dither;J=b.polygonOffset_enable;T=b.sample_alpha;X=b.sample_enable;S=b.scissor_enable;P=b.stencil_enable;N=b.cull_face;O=u.cull_face;Q=b.depth_func;R=u.depth_func;qa=b.depth_mask;
oa=u.depth_mask;K=b.frontFace;L=u.frontFace;da=b.lineWidth;V=u.lineWidth;na=b.stencil_mask;ia=u.stencil_mask;a=p.next;a!==p.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),p.cur=a);d!==u.blend_enable&&(d?n.enable(3042):n.disable(3042),u.blend_enable=d);f!==u.cull_enable&&(f?n.enable(2884):n.disable(2884),u.cull_enable=f);h!==u.depth_enable&&(h?n.enable(2929):n.disable(2929),u.depth_enable=h);C!==u.dither&&(C?n.enable(3024):n.disable(3024),u.dither=C);J!==u.polygonOffset_enable&&
(J?n.enable(32823):n.disable(32823),u.polygonOffset_enable=J);T!==u.sample_alpha&&(T?n.enable(32926):n.disable(32926),u.sample_alpha=T);X!==u.sample_enable&&(X?n.enable(32928):n.disable(32928),u.sample_enable=X);S!==u.scissor_enable&&(S?n.enable(3089):n.disable(3089),u.scissor_enable=S);P!==u.stencil_enable&&(P?n.enable(2960):n.disable(2960),u.stencil_enable=P);if(c[0]!==k[0]||c[1]!==k[1]||c[2]!==k[2]||c[3]!==k[3])n.blendColor(c[0],c[1],c[2],c[3]),k[0]=c[0],k[1]=c[1],k[2]=c[2],k[3]=c[3];if(y[0]!==
z[0]||y[1]!==z[1])n.blendEquationSeparate(y[0],y[1]),z[0]=y[0],z[1]=y[1];if(e[0]!==l[0]||e[1]!==l[1]||e[2]!==l[2]||e[3]!==l[3])n.blendFuncSeparate(e[0],e[1],e[2],e[3]),l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=e[3];if(g[0]!==q[0]||g[1]!==q[1]||g[2]!==q[2]||g[3]!==q[3])n.colorMask(g[0],g[1],g[2],g[3]),q[0]=g[0],q[1]=g[1],q[2]=g[2],q[3]=g[3];N!==O&&(n.cullFace(N),u.cull_face=N);Q!==R&&(n.depthFunc(Q),u.depth_func=Q);qa!==oa&&(n.depthMask(qa),u.depth_mask=qa);if(m[0]!==v[0]||m[1]!==v[1])n.depthRange(m[0],m[1]),
v[0]=m[0],v[1]=m[1];K!==L&&(n.frontFace(K),u.frontFace=K);da!==V&&(n.lineWidth(da),u.lineWidth=da);if(w[0]!==B[0]||w[1]!==B[1])n.polygonOffset(w[0],w[1]),B[0]=w[0],B[1]=w[1];if(la[0]!==x[0]||la[1]!==x[1])n.sampleCoverage(la[0],la[1]),x[0]=la[0],x[1]=la[1];if(E[0]!==Da[0]||E[1]!==Da[1]||E[2]!==Da[2]||E[3]!==Da[3])n.scissor(E[0],E[1],E[2],E[3]),Da[0]=E[0],Da[1]=E[1],Da[2]=E[2],Da[3]=E[3];if(H[0]!==r[0]||H[1]!==r[1]||H[2]!==r[2])n.stencilFunc(H[0],H[1],H[2]),r[0]=H[0],r[1]=H[1],r[2]=H[2];na!==ia&&(n.stencilMask(na),
u.stencil_mask=na);if(F[0]!==A[0]||F[1]!==A[1]||F[2]!==A[2]||F[3]!==A[3])n.stencilOpSeparate(F[0],F[1],F[2],F[3]),A[0]=F[0],A[1]=F[1],A[2]=F[2],A[3]=F[3];if(U[0]!==I[0]||U[1]!==I[1]||U[2]!==I[2]||U[3]!==I[3])n.stencilOpSeparate(U[0],U[1],U[2],U[3]),I[0]=U[0],I[1]=U[1],I[2]=U[2],I[3]=U[3];if(G[0]!==D[0]||G[1]!==D[1]||G[2]!==D[2]||G[3]!==D[3])n.viewport(G[0],G[1],G[2],G[3]),D[0]=G[0],D[1]=G[1],D[2]=G[2],D[3]=G[3]},refresh:function(){var a,t,ca,M,fa,J,T,X,S,P,N,O,Q,R,qa,oa;u.dirty=!1;t=b.blend_enable;
ca=b.cull_enable;M=b.depth_enable;fa=b.dither;J=b.polygonOffset_enable;T=b.sample_alpha;X=b.sample_enable;S=b.scissor_enable;P=b.stencil_enable;N=b.cull_face;O=b.depth_func;Q=b.depth_mask;R=b.frontFace;qa=b.lineWidth;oa=b.stencil_mask;(a=p.next)?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null);p.cur=a;a=h[0];a.buffer?(n.enableVertexAttribArray(0),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(0),
n.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(0,a.divisor);a=h[1];a.buffer?(n.enableVertexAttribArray(1),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(1),n.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(1,a.divisor);a=h[2];a.buffer?(n.enableVertexAttribArray(2),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,
a.offset)):(n.disableVertexAttribArray(2),n.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(2,a.divisor);a=h[3];a.buffer?(n.enableVertexAttribArray(3),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(3),n.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(3,a.divisor);a=h[4];a.buffer?(n.enableVertexAttribArray(4),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(4,
a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(4),n.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(4,a.divisor);a=h[5];a.buffer?(n.enableVertexAttribArray(5),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(5),n.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(5,a.divisor);a=h[6];a.buffer?(n.enableVertexAttribArray(6),n.bindBuffer(34962,
a.buffer.buffer),n.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(6),n.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(6,a.divisor);a=h[7];a.buffer?(n.enableVertexAttribArray(7),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(7),n.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(7,a.divisor);a=h[8];a.buffer?
(n.enableVertexAttribArray(8),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(8),n.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(8,a.divisor);a=h[9];a.buffer?(n.enableVertexAttribArray(9),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(9),n.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(9,
a.divisor);a=h[10];a.buffer?(n.enableVertexAttribArray(10),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(10),n.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(10,a.divisor);a=h[11];a.buffer?(n.enableVertexAttribArray(11),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(11),n.vertexAttrib4f(11,a.x,
a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(11,a.divisor);a=h[12];a.buffer?(n.enableVertexAttribArray(12),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(12),n.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(12,a.divisor);a=h[13];a.buffer?(n.enableVertexAttribArray(13),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):
(n.disableVertexAttribArray(13),n.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(13,a.divisor);a=h[14];a.buffer?(n.enableVertexAttribArray(14),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(14),n.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(14,a.divisor);a=h[15];a.buffer?(n.enableVertexAttribArray(15),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(15,
a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(15),n.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(15,a.divisor);f.currentVAO=null;f.setVAO(f.targetVAO);t?n.enable(3042):n.disable(3042);u.blend_enable=t;ca?n.enable(2884):n.disable(2884);u.cull_enable=ca;M?n.enable(2929):n.disable(2929);u.depth_enable=M;fa?n.enable(3024):n.disable(3024);u.dither=fa;J?n.enable(32823):n.disable(32823);u.polygonOffset_enable=J;T?n.enable(32926):n.disable(32926);
u.sample_alpha=T;X?n.enable(32928):n.disable(32928);u.sample_enable=X;S?n.enable(3089):n.disable(3089);u.scissor_enable=S;P?n.enable(2960):n.disable(2960);u.stencil_enable=P;n.blendColor(c[0],c[1],c[2],c[3]);k[0]=c[0];k[1]=c[1];k[2]=c[2];k[3]=c[3];n.blendEquationSeparate(y[0],y[1]);z[0]=y[0];z[1]=y[1];n.blendFuncSeparate(e[0],e[1],e[2],e[3]);l[0]=e[0];l[1]=e[1];l[2]=e[2];l[3]=e[3];n.colorMask(g[0],g[1],g[2],g[3]);q[0]=g[0];q[1]=g[1];q[2]=g[2];q[3]=g[3];n.cullFace(N);u.cull_face=N;n.depthFunc(O);u.depth_func=
O;n.depthMask(Q);u.depth_mask=Q;n.depthRange(m[0],m[1]);v[0]=m[0];v[1]=m[1];n.frontFace(R);u.frontFace=R;n.lineWidth(qa);u.lineWidth=qa;n.polygonOffset(w[0],w[1]);B[0]=w[0];B[1]=w[1];n.sampleCoverage(la[0],la[1]);x[0]=la[0];x[1]=la[1];n.scissor(E[0],E[1],E[2],E[3]);Da[0]=E[0];Da[1]=E[1];Da[2]=E[2];Da[3]=E[3];n.stencilFunc(H[0],H[1],H[2]);r[0]=H[0];r[1]=H[1];r[2]=H[2];n.stencilMask(oa);u.stencil_mask=oa;n.stencilOpSeparate(F[0],F[1],F[2],F[3]);A[0]=F[0];A[1]=F[1];A[2]=F[2];A[3]=F[3];n.stencilOpSeparate(U[0],
U[1],U[2],U[3]);I[0]=U[0];I[1]=U[1];I[2]=U[2];I[3]=U[3];n.viewport(G[0],G[1],G[2],G[3]);D[0]=G[0];D[1]=G[1];D[2]=G[2];D[3]=G[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,Da,H,r,F,A,U,I,G,D,ma,t,ca,M,fa,J,T,X,S,P,N,O,Q,R,qa,oa){var K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,xa,Ba,ja,Y,ta,Fa,Ha,fb,
aa,Kc,bc,Ga,cc,Sb;K=a.attributes;L=a.buffer;da=a.context;V=a.current;na=a.draw;ia=a.elements;ya=a.extensions;va=a.framebuffer;ba=a.gl;Ca=a.isBufferArgs;ka=a.next;pa=a.shader;za=a.uniforms;Qa=a.vao;Ka=ka.blend_color;Hb=V.blend_color;Va=ka.blend_equation;ha=V.blend_equation;ea=ka.blend_func;sa=V.blend_func;ua=ka.colorMask;Ea=V.colorMask;Ra=ka.depth_range;Gb=V.depth_range;Z=ka.polygonOffset_offset;W=V.polygonOffset_offset;wa=ka.sample_coverage;Ia=V.sample_coverage;ra=ka.scissor_box;xa=V.scissor_box;
Ba=ka.stencil_func;ja=V.stencil_func;Y=ka.stencil_opBack;ta=V.stencil_opBack;Fa=ka.stencil_opFront;Ha=V.stencil_opFront;fb=ka.viewport;aa=V.viewport;Kc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};bc={};bc.buffer=h;bc.divisor=1;Ga={};Ga.buffer=u;Ga.divisor=1;cc={};cc.buffer=p;cc.divisor=1;Sb={};Sb.buffer=n;Sb.divisor=1;return{batch:function(c,b){var a,k,f,g,m,q;a=va.next;a!==va.cur&&(a?ba.bindFramebuffer(36160,a.framebuffer):ba.bindFramebuffer(36160,
null),va.cur=a);if(V.dirty){var v,w,n,u,h,B,x,y,C,p,E,ea,la,Ka,H,F,ra,Da,r,ga,Va,za,pa,fb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd;v=ka.dither;v!==V.dither&&(v?ba.enable(3024):ba.disable(3024),V.dither=v);w=ka.depth_func;w!==V.depth_func&&(ba.depthFunc(w),V.depth_func=w);n=Ra[0];u=Ra[1];if(n!==Gb[0]||u!==Gb[1])ba.depthRange(n,u),Gb[0]=n,Gb[1]=u;h=ka.depth_mask;h!==V.depth_mask&&(ba.depthMask(h),V.depth_mask=h);B=ua[0];x=ua[1];y=ua[2];C=ua[3];if(B!==Ea[0]||x!==Ea[1]||y!==Ea[2]||C!==Ea[3])ba.colorMask(B,x,y,C),Ea[0]=
B,Ea[1]=x,Ea[2]=y,Ea[3]=C;p=ka.cull_enable;p!==V.cull_enable&&(p?ba.enable(2884):ba.disable(2884),V.cull_enable=p);E=ka.cull_face;E!==V.cull_face&&(ba.cullFace(E),V.cull_face=E);ea=ka.frontFace;ea!==V.frontFace&&(ba.frontFace(ea),V.frontFace=ea);la=ka.lineWidth;la!==V.lineWidth&&(ba.lineWidth(la),V.lineWidth=la);Ka=ka.polygonOffset_enable;Ka!==V.polygonOffset_enable&&(Ka?ba.enable(32823):ba.disable(32823),V.polygonOffset_enable=Ka);H=Z[0];F=Z[1];if(H!==W[0]||F!==W[1])ba.polygonOffset(H,F),W[0]=H,
W[1]=F;ra=ka.sample_alpha;ra!==V.sample_alpha&&(ra?ba.enable(32926):ba.disable(32926),V.sample_alpha=ra);Da=ka.sample_enable;Da!==V.sample_enable&&(Da?ba.enable(32928):ba.disable(32928),V.sample_enable=Da);r=wa[0];ga=wa[1];if(r!==Ia[0]||ga!==Ia[1])ba.sampleCoverage(r,ga),Ia[0]=r,Ia[1]=ga;Va=ka.stencil_enable;Va!==V.stencil_enable&&(Va?ba.enable(2960):ba.disable(2960),V.stencil_enable=Va);za=ka.stencil_mask;za!==V.stencil_mask&&(ba.stencilMask(za),V.stencil_mask=za);pa=Ba[0];fb=Ba[1];Eb=Ba[2];if(pa!==
ja[0]||fb!==ja[1]||Eb!==ja[2])ba.stencilFunc(pa,fb,Eb),ja[0]=pa,ja[1]=fb,ja[2]=Eb;vc=Fa[0];zb=Fa[1];yc=Fa[2];Bb=Fa[3];if(vc!==Ha[0]||zb!==Ha[1]||yc!==Ha[2]||Bb!==Ha[3])ba.stencilOpSeparate(vc,zb,yc,Bb),Ha[0]=vc,Ha[1]=zb,Ha[2]=yc,Ha[3]=Bb;Lc=Y[0];mc=Y[1];Hc=Y[2];hd=Y[3];if(Lc!==ta[0]||mc!==ta[1]||Hc!==ta[2]||hd!==ta[3])ba.stencilOpSeparate(Lc,mc,Hc,hd),ta[0]=Lc,ta[1]=mc,ta[2]=Hc,ta[3]=hd}ba.blendColor(0,0,0,0);Hb[0]=0;Hb[1]=0;Hb[2]=0;Hb[3]=0;ba.enable(3042);V.blend_enable=!0;ba.blendEquationSeparate(32774,
32774);ha[0]=32774;ha[1]=32774;ba.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;ba.disable(2929);V.depth_enable=!1;ba.enable(3089);V.scissor_enable=!0;if(k=V.profile)f=performance.now(),d.count+=b;ba.useProgram(A.program);g=ya.angle_instanced_arrays;var cd,Ec,fc,Ic,pc,rc,nc,qc;Qa.setVAO(null);cd=fa.location;Ec=K[cd];Ec.buffer||ba.enableVertexAttribArray(cd);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==z||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)ba.bindBuffer(34962,
z.buffer),ba.vertexAttribPointer(cd,2,5126,!1,24,0),Ec.type=5126,Ec.size=2,Ec.buffer=z,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(g.vertexAttribDivisorANGLE(cd,0),Ec.divisor=0);fc=T.location;Ic=K[fc];Ic.buffer||ba.enableVertexAttribArray(fc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==e||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)ba.bindBuffer(34962,e.buffer),ba.vertexAttribPointer(fc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=e,Ic.normalized=!1,Ic.offset=8,Ic.stride=
24;0!==Ic.divisor&&(g.vertexAttribDivisorANGLE(fc,0),Ic.divisor=0);pc=t.location;rc=K[pc];rc.buffer||ba.enableVertexAttribArray(pc);if(5126!==rc.type||2!==rc.size||rc.buffer!==l||!1!==rc.normalized||16!==rc.offset||24!==rc.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(pc,2,5126,!1,24,16),rc.type=5126,rc.size=2,rc.buffer=l,rc.normalized=!1,rc.offset=16,rc.stride=24;0!==rc.divisor&&(g.vertexAttribDivisorANGLE(pc,0),rc.divisor=0);(nc=na.elements)?ba.bindBuffer(34963,nc.buffer.buffer):Qa.currentVAO&&
(nc=ia.getElements(Qa.currentVAO.elements))&&ba.bindBuffer(34963,nc.buffer.buffer);qc=na.offset;for(m=0;m<b;++m){q=c[m];var nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc;nb=q.viewport;Wc=nb.x|0;Zb=nb.y|
0;hb="width"in nb?nb.width|0:da.framebufferWidth-Wc;Mb="height"in nb?nb.height|0:da.framebufferHeight-Zb;bb=da.viewportWidth;da.viewportWidth=hb;kb=da.viewportHeight;da.viewportHeight=Mb;ba.viewport(Wc,Zb,hb,Mb);aa[0]=Wc;aa[1]=Zb;aa[2]=hb;aa[3]=Mb;Xa=q.viewport;Jc=Xa.x|0;Nb=Xa.y|0;Ib="width"in Xa?Xa.width|0:da.framebufferWidth-Jc;sc="height"in Xa?Xa.height|0:da.framebufferHeight-Nb;ba.scissor(Jc,Nb,Ib,sc);xa[0]=Jc;xa[1]=Nb;xa[2]=Ib;xa[3]=sc;Ob=U.call(this,da,q,m);cc.offset=Ob;lb=!1;Fb=null;Cb=0;yb=
!1;$b=ib=0;Pb=1;rb=0;Ta=5126;jb=jc=sb=Ub=0;Ca(cc)?(lb=!0,Fb=L.createStream(34962,cc),Ta=Fb.dtype):(Fb=L.getBuffer(cc))?Ta=Fb.dtype:"constant"in cc?(Pb=2,"number"===typeof cc.constant?(sb=cc.constant,jc=jb=Ub=0):(sb=0<cc.constant.length?cc.constant[0]:0,jc=1<cc.constant.length?cc.constant[1]:0,jb=2<cc.constant.length?cc.constant[2]:0,Ub=3<cc.constant.length?cc.constant[3]:0)):(Fb=Ca(cc.buffer)?L.createStream(34962,cc.buffer):L.getBuffer(cc.buffer),Ta="type"in cc?Kc[cc.type]:Fb.dtype,yb=!!cc.normalized,
$b=cc.size|0,ib=cc.offset|0,rb=cc.stride|0,Cb=cc.divisor|0);qb=P.location;Ja=K[qb];if(1===Pb){Ja.buffer||ba.enableVertexAttribArray(qb);tb=$b||2;if(Ja.type!==Ta||Ja.size!==tb||Ja.buffer!==Fb||Ja.normalized!==yb||Ja.offset!==ib||Ja.stride!==rb)ba.bindBuffer(34962,Fb.buffer),ba.vertexAttribPointer(qb,tb,Ta,yb,rb,ib),Ja.type=Ta,Ja.size=tb,Ja.buffer=Fb,Ja.normalized=yb,Ja.offset=ib,Ja.stride=rb;Ja.divisor!==Cb&&(g.vertexAttribDivisorANGLE(qb,Cb),Ja.divisor=Cb)}else if(Ja.buffer&&(ba.disableVertexAttribArray(qb),
Ja.buffer=null),Ja.x!==sb||Ja.y!==jc||Ja.z!==jb||Ja.w!==Ub)ba.vertexAttrib4f(qb,sb,jc,jb,Ub),Ja.x=sb,Ja.y=jc,Ja.z=jb,Ja.w=Ub;La=I.call(this,da,q,m);Sb.offset=La;eb=!1;gb=null;Na=0;mb=!1;vb=Ya=0;ub=1;Pa=0;Dc=5126;Ma=Db=Jb=Wa=0;Ca(Sb)?(eb=!0,gb=L.createStream(34962,Sb),Dc=gb.dtype):(gb=L.getBuffer(Sb))?Dc=gb.dtype:"constant"in Sb?(ub=2,"number"===typeof Sb.constant?(Jb=Sb.constant,Db=Ma=Wa=0):(Jb=0<Sb.constant.length?Sb.constant[0]:0,Db=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?
Sb.constant[2]:0,Wa=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Ca(Sb.buffer)?L.createStream(34962,Sb.buffer):L.getBuffer(Sb.buffer),Dc="type"in Sb?Kc[Sb.type]:gb.dtype,mb=!!Sb.normalized,vb=Sb.size|0,Ya=Sb.offset|0,Pa=Sb.stride|0,Na=Sb.divisor|0);zd=N.location;$a=K[zd];if(1===ub){$a.buffer||ba.enableVertexAttribArray(zd);Kb=vb||2;if($a.type!==Dc||$a.size!==Kb||$a.buffer!==gb||$a.normalized!==mb||$a.offset!==Ya||$a.stride!==Pa)ba.bindBuffer(34962,gb.buffer),ba.vertexAttribPointer(zd,Kb,Dc,mb,Pa,Ya),
$a.type=Dc,$a.size=Kb,$a.buffer=gb,$a.normalized=mb,$a.offset=Ya,$a.stride=Pa;$a.divisor!==Na&&(g.vertexAttribDivisorANGLE(zd,Na),$a.divisor=Na)}else if($a.buffer&&(ba.disableVertexAttribArray(zd),$a.buffer=null),$a.x!==Jb||$a.y!==Db||$a.z!==Ma||$a.w!==Wa)ba.vertexAttrib4f(zd,Jb,Db,Ma,Wa),$a.x=Jb,$a.y=Db,$a.z=Ma,$a.w=Wa;Lb=G.call(this,da,q,m);Ga.offset=Lb;ob=!1;Oa=null;ac=0;Sa=!1;xb=wb=0;Ua=1;pb=0;gc=5126;kc=cb=wc=Bc=0;Ca(Ga)?(ob=!0,Oa=L.createStream(34962,Ga),gc=Oa.dtype):(Oa=L.getBuffer(Ga))?gc=
Oa.dtype:"constant"in Ga?(Ua=2,"number"===typeof Ga.constant?(wc=Ga.constant,cb=kc=Bc=0):(wc=0<Ga.constant.length?Ga.constant[0]:0,cb=1<Ga.constant.length?Ga.constant[1]:0,kc=2<Ga.constant.length?Ga.constant[2]:0,Bc=3<Ga.constant.length?Ga.constant[3]:0)):(Oa=Ca(Ga.buffer)?L.createStream(34962,Ga.buffer):L.getBuffer(Ga.buffer),gc="type"in Ga?Kc[Ga.type]:Oa.dtype,Sa=!!Ga.normalized,xb=Ga.size|0,wb=Ga.offset|0,pb=Ga.stride|0,ac=Ga.divisor|0);Mc=J.location;Za=K[Mc];if(1===Ua){Za.buffer||ba.enableVertexAttribArray(Mc);
nd=xb||4;if(Za.type!==gc||Za.size!==nd||Za.buffer!==Oa||Za.normalized!==Sa||Za.offset!==wb||Za.stride!==pb)ba.bindBuffer(34962,Oa.buffer),ba.vertexAttribPointer(Mc,nd,gc,Sa,pb,wb),Za.type=gc,Za.size=nd,Za.buffer=Oa,Za.normalized=Sa,Za.offset=wb,Za.stride=pb;Za.divisor!==ac&&(g.vertexAttribDivisorANGLE(Mc,ac),Za.divisor=ac)}else if(Za.buffer&&(ba.disableVertexAttribArray(Mc),Za.buffer=null),Za.x!==wc||Za.y!==cb||Za.z!==kc||Za.w!==Bc)ba.vertexAttrib4f(Mc,wc,cb,kc,Bc),Za.x=wc,Za.y=cb,Za.z=kc,Za.w=Bc;
Ab=D.call(this,da,q,m);bc.offset=Ab;ab=!1;Wb=null;uc=0;Xb=!1;Nc=Qb=0;Rb=1;Od=0;Fc=5126;vd=Yc=Pc=sd=0;Ca(bc)?(ab=!0,Wb=L.createStream(34962,bc),Fc=Wb.dtype):(Wb=L.getBuffer(bc))?Fc=Wb.dtype:"constant"in bc?(Rb=2,"number"===typeof bc.constant?(Pc=bc.constant,Yc=vd=sd=0):(Pc=0<bc.constant.length?bc.constant[0]:0,Yc=1<bc.constant.length?bc.constant[1]:0,vd=2<bc.constant.length?bc.constant[2]:0,sd=3<bc.constant.length?bc.constant[3]:0)):(Wb=Ca(bc.buffer)?L.createStream(34962,bc.buffer):L.getBuffer(bc.buffer),
Fc="type"in bc?Kc[bc.type]:Wb.dtype,Xb=!!bc.normalized,Nc=bc.size|0,Qb=bc.offset|0,Od=bc.stride|0,uc=bc.divisor|0);oc=M.location;xc=K[oc];if(1===Rb){xc.buffer||ba.enableVertexAttribArray(oc);hc=Nc||4;if(xc.type!==Fc||xc.size!==hc||xc.buffer!==Wb||xc.normalized!==Xb||xc.offset!==Qb||xc.stride!==Od)ba.bindBuffer(34962,Wb.buffer),ba.vertexAttribPointer(oc,hc,Fc,Xb,Od,Qb),xc.type=Fc,xc.size=hc,xc.buffer=Wb,xc.normalized=Xb,xc.offset=Qb,xc.stride=Od;xc.divisor!==uc&&(g.vertexAttribDivisorANGLE(oc,uc),
xc.divisor=uc)}else if(xc.buffer&&(ba.disableVertexAttribArray(oc),xc.buffer=null),xc.x!==Pc||xc.y!==Yc||xc.z!==vd||xc.w!==sd)ba.vertexAttrib4f(oc,Pc,Yc,vd,sd),xc.x=Pc,xc.y=Yc,xc.z=vd,xc.w=sd;db=ma.call(this,da,q,m);tc=db[0];Yb=db[1];ic=db[2];Cc=db[3];m&&Tb===tc&&ec===Yb&&zc===ic&&dd===Cc||(Tb=tc,ec=Yb,zc=ic,dd=Cc,ba.uniform4f(oa.location,tc,Yb,ic,Cc));Sc=q.lineWidth;m&&Tc===Sc||(Tc=Sc,ba.uniform1f(X.location,Sc));Uc=q.capSize;m&&Zc===Uc||(Zc=Uc,ba.uniform1f(ca.location,Uc));od=q.scale;ed=od[0];lc=
od[1];m&&$c===ed&&dc===lc||($c=ed,dc=lc,ba.uniform2f(O.location,ed,lc));ad=q.scaleFract;Xc=ad[0];Ac=ad[1];m&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,ba.uniform2f(Q.location,Xc,Ac));Dd=q.translate;ze=Dd[0];kd=Dd[1];m&&xd===ze&&Fe===kd||(xd=ze,Fe=kd,ba.uniform2f(R.location,ze,kd));Td=q.translateFract;he=Td[0];Ud=Td[1];m&&ae===he&&Nd===Ud||(ae=he,Nd=Ud,ba.uniform2f(qa.location,he,Ud));Kd=q.opacity;m&&qd===Kd||(qd=Kd,ba.uniform1f(S.location,Kd));Vc=q.count;0<Vc?nc?g.drawElementsInstancedANGLE(4,36,nc.type,qc<<
(nc.type-5121>>1),Vc):g.drawArraysInstancedANGLE(4,qc,36,Vc):0>Vc&&(nc?ba.drawElements(4,36,nc.type,qc<<(nc.type-5121>>1)):ba.drawArrays(4,qc,36));da.viewportWidth=bb;da.viewportHeight=kb;lb&&L.destroyStream(Fb);eb&&L.destroyStream(gb);ob&&L.destroyStream(Oa);ab&&L.destroyStream(Wb)}V.dirty=!0;Qa.setVAO(null);k&&(d.cpuTime+=performance.now()-f)},draw:function(a){var m,q,v,w,n,u,h,B,x,C,p,E,ea,la,Ka,A,H,F,D,I,ra,Da,G,r,ga,Va,za,U,pa,ma,fb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,
hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac;m=va.next;m!==va.cur&&(m?ba.bindFramebuffer(36160,m.framebuffer):ba.bindFramebuffer(36160,null),va.cur=m);if(V.dirty){var Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb;Sa=ka.dither;Sa!==V.dither&&(Sa?ba.enable(3024):ba.disable(3024),V.dither=Sa);wb=ka.depth_func;wb!==V.depth_func&&(ba.depthFunc(wb),V.depth_func=
wb);xb=Ra[0];Ua=Ra[1];if(xb!==Gb[0]||Ua!==Gb[1])ba.depthRange(xb,Ua),Gb[0]=xb,Gb[1]=Ua;pb=ka.depth_mask;pb!==V.depth_mask&&(ba.depthMask(pb),V.depth_mask=pb);gc=ua[0];Bc=ua[1];wc=ua[2];cb=ua[3];if(gc!==Ea[0]||Bc!==Ea[1]||wc!==Ea[2]||cb!==Ea[3])ba.colorMask(gc,Bc,wc,cb),Ea[0]=gc,Ea[1]=Bc,Ea[2]=wc,Ea[3]=cb;kc=ka.cull_enable;kc!==V.cull_enable&&(kc?ba.enable(2884):ba.disable(2884),V.cull_enable=kc);Mc=ka.cull_face;Mc!==V.cull_face&&(ba.cullFace(Mc),V.cull_face=Mc);Za=ka.frontFace;Za!==V.frontFace&&(ba.frontFace(Za),
V.frontFace=Za);nd=ka.lineWidth;nd!==V.lineWidth&&(ba.lineWidth(nd),V.lineWidth=nd);Ab=ka.polygonOffset_enable;Ab!==V.polygonOffset_enable&&(Ab?ba.enable(32823):ba.disable(32823),V.polygonOffset_enable=Ab);ab=Z[0];Wb=Z[1];if(ab!==W[0]||Wb!==W[1])ba.polygonOffset(ab,Wb),W[0]=ab,W[1]=Wb;uc=ka.sample_alpha;uc!==V.sample_alpha&&(uc?ba.enable(32926):ba.disable(32926),V.sample_alpha=uc);Xb=ka.sample_enable;Xb!==V.sample_enable&&(Xb?ba.enable(32928):ba.disable(32928),V.sample_enable=Xb);Qb=wa[0];Nc=wa[1];
if(Qb!==Ia[0]||Nc!==Ia[1])ba.sampleCoverage(Qb,Nc),Ia[0]=Qb,Ia[1]=Nc;Rb=ka.stencil_enable;Rb!==V.stencil_enable&&(Rb?ba.enable(2960):ba.disable(2960),V.stencil_enable=Rb);Od=ka.stencil_mask;Od!==V.stencil_mask&&(ba.stencilMask(Od),V.stencil_mask=Od);Fc=Ba[0];sd=Ba[1];Pc=Ba[2];if(Fc!==ja[0]||sd!==ja[1]||Pc!==ja[2])ba.stencilFunc(Fc,sd,Pc),ja[0]=Fc,ja[1]=sd,ja[2]=Pc;Yc=Fa[0];vd=Fa[1];oc=Fa[2];xc=Fa[3];if(Yc!==Ha[0]||vd!==Ha[1]||oc!==Ha[2]||xc!==Ha[3])ba.stencilOpSeparate(Yc,vd,oc,xc),Ha[0]=Yc,Ha[1]=
vd,Ha[2]=oc,Ha[3]=xc;hc=Y[0];db=Y[1];tc=Y[2];Tb=Y[3];if(hc!==ta[0]||db!==ta[1]||tc!==ta[2]||Tb!==ta[3])ba.stencilOpSeparate(hc,db,tc,Tb),ta[0]=hc,ta[1]=db,ta[2]=tc,ta[3]=Tb}q=a.viewport;v=q.x|0;w=q.y|0;n="width"in q?q.width|0:da.framebufferWidth-v;u="height"in q?q.height|0:da.framebufferHeight-w;h=da.viewportWidth;da.viewportWidth=n;B=da.viewportHeight;da.viewportHeight=u;ba.viewport(v,w,n,u);aa[0]=v;aa[1]=w;aa[2]=n;aa[3]=u;ba.blendColor(0,0,0,0);Hb[0]=0;Hb[1]=0;Hb[2]=0;Hb[3]=0;ba.enable(3042);V.blend_enable=
!0;ba.blendEquationSeparate(32774,32774);ha[0]=32774;ha[1]=32774;ba.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;ba.disable(2929);V.depth_enable=!1;x=a.viewport;C=x.x|0;p=x.y|0;E="width"in x?x.width|0:da.framebufferWidth-C;ea="height"in x?x.height|0:da.framebufferHeight-p;ba.scissor(C,p,E,ea);xa[0]=C;xa[1]=p;xa[2]=E;xa[3]=ea;ba.enable(3089);V.scissor_enable=!0;if(la=V.profile)Ka=performance.now(),d.count++;ba.useProgram(b.program);A=ya.angle_instanced_arrays;Qa.setVAO(null);
H=f.call(this,da,a,0);cc.offset=H;F=!1;D=null;I=0;ra=!1;G=Da=0;r=1;ga=0;Va=5126;ma=pa=U=za=0;Ca(cc)?(F=!0,D=L.createStream(34962,cc),Va=D.dtype):(D=L.getBuffer(cc))?Va=D.dtype:"constant"in cc?(r=2,"number"===typeof cc.constant?(U=cc.constant,pa=ma=za=0):(U=0<cc.constant.length?cc.constant[0]:0,pa=1<cc.constant.length?cc.constant[1]:0,ma=2<cc.constant.length?cc.constant[2]:0,za=3<cc.constant.length?cc.constant[3]:0)):(D=Ca(cc.buffer)?L.createStream(34962,cc.buffer):L.getBuffer(cc.buffer),Va="type"in
cc?Kc[cc.type]:D.dtype,ra=!!cc.normalized,G=cc.size|0,Da=cc.offset|0,ga=cc.stride|0,I=cc.divisor|0);fb=P.location;Eb=K[fb];if(1===r){Eb.buffer||ba.enableVertexAttribArray(fb);vc=G||2;if(Eb.type!==Va||Eb.size!==vc||Eb.buffer!==D||Eb.normalized!==ra||Eb.offset!==Da||Eb.stride!==ga)ba.bindBuffer(34962,D.buffer),ba.vertexAttribPointer(fb,vc,Va,ra,ga,Da),Eb.type=Va,Eb.size=vc,Eb.buffer=D,Eb.normalized=ra,Eb.offset=Da,Eb.stride=ga;Eb.divisor!==I&&(A.vertexAttribDivisorANGLE(fb,I),Eb.divisor=I)}else if(Eb.buffer&&
(ba.disableVertexAttribArray(fb),Eb.buffer=null),Eb.x!==U||Eb.y!==pa||Eb.z!==ma||Eb.w!==za)ba.vertexAttrib4f(fb,U,pa,ma,za),Eb.x=U,Eb.y=pa,Eb.z=ma,Eb.w=za;zb=c.call(this,da,a,0);Sb.offset=zb;yc=!1;Bb=null;Lc=0;mc=!1;hd=Hc=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Ic=0;Ca(Sb)?(yc=!0,Bb=L.createStream(34962,Sb),fc=Bb.dtype):(Bb=L.getBuffer(Sb))?fc=Bb.dtype:"constant"in Sb?(cd=2,"number"===typeof Sb.constant?(pc=Sb.constant,rc=nc=Ic=0):(pc=0<Sb.constant.length?Sb.constant[0]:0,rc=1<Sb.constant.length?Sb.constant[1]:
0,nc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Bb=Ca(Sb.buffer)?L.createStream(34962,Sb.buffer):L.getBuffer(Sb.buffer),fc="type"in Sb?Kc[Sb.type]:Bb.dtype,mc=!!Sb.normalized,hd=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Lc=Sb.divisor|0);qc=N.location;nb=K[qc];if(1===cd){nb.buffer||ba.enableVertexAttribArray(qc);Wc=hd||2;if(nb.type!==fc||nb.size!==Wc||nb.buffer!==Bb||nb.normalized!==mc||nb.offset!==Hc||nb.stride!==Ec)ba.bindBuffer(34962,Bb.buffer),ba.vertexAttribPointer(qc,
Wc,fc,mc,Ec,Hc),nb.type=fc,nb.size=Wc,nb.buffer=Bb,nb.normalized=mc,nb.offset=Hc,nb.stride=Ec;nb.divisor!==Lc&&(A.vertexAttribDivisorANGLE(qc,Lc),nb.divisor=Lc)}else if(nb.buffer&&(ba.disableVertexAttribArray(qc),nb.buffer=null),nb.x!==pc||nb.y!==rc||nb.z!==nc||nb.w!==Ic)ba.vertexAttrib4f(qc,pc,rc,nc,Ic),nb.x=pc,nb.y=rc,nb.z=nc,nb.w=Ic;Zb=k.call(this,da,a,0);Ga.offset=Zb;hb=!1;Mb=null;bb=0;kb=!1;Jc=Xa=0;Nb=1;Ib=0;sc=5126;Cb=Fb=lb=Ob=0;Ca(Ga)?(hb=!0,Mb=L.createStream(34962,Ga),sc=Mb.dtype):(Mb=L.getBuffer(Ga))?
sc=Mb.dtype:"constant"in Ga?(Nb=2,"number"===typeof Ga.constant?(lb=Ga.constant,Fb=Cb=Ob=0):(lb=0<Ga.constant.length?Ga.constant[0]:0,Fb=1<Ga.constant.length?Ga.constant[1]:0,Cb=2<Ga.constant.length?Ga.constant[2]:0,Ob=3<Ga.constant.length?Ga.constant[3]:0)):(Mb=Ca(Ga.buffer)?L.createStream(34962,Ga.buffer):L.getBuffer(Ga.buffer),sc="type"in Ga?Kc[Ga.type]:Mb.dtype,kb=!!Ga.normalized,Jc=Ga.size|0,Xa=Ga.offset|0,Ib=Ga.stride|0,bb=Ga.divisor|0);yb=J.location;ib=K[yb];if(1===Nb){ib.buffer||ba.enableVertexAttribArray(yb);
$b=Jc||4;if(ib.type!==sc||ib.size!==$b||ib.buffer!==Mb||ib.normalized!==kb||ib.offset!==Xa||ib.stride!==Ib)ba.bindBuffer(34962,Mb.buffer),ba.vertexAttribPointer(yb,$b,sc,kb,Ib,Xa),ib.type=sc,ib.size=$b,ib.buffer=Mb,ib.normalized=kb,ib.offset=Xa,ib.stride=Ib;ib.divisor!==bb&&(A.vertexAttribDivisorANGLE(yb,bb),ib.divisor=bb)}else if(ib.buffer&&(ba.disableVertexAttribArray(yb),ib.buffer=null),ib.x!==lb||ib.y!==Fb||ib.z!==Cb||ib.w!==Ob)ba.vertexAttrib4f(yb,lb,Fb,Cb,Ob),ib.x=lb,ib.y=Fb,ib.z=Cb,ib.w=Ob;
Pb=y.call(this,da,a,0);bc.offset=Pb;rb=!1;Ta=null;Ub=0;sb=!1;jb=jc=0;qb=1;Ja=0;tb=5126;Na=gb=eb=La=0;Ca(bc)?(rb=!0,Ta=L.createStream(34962,bc),tb=Ta.dtype):(Ta=L.getBuffer(bc))?tb=Ta.dtype:"constant"in bc?(qb=2,"number"===typeof bc.constant?(eb=bc.constant,gb=Na=La=0):(eb=0<bc.constant.length?bc.constant[0]:0,gb=1<bc.constant.length?bc.constant[1]:0,Na=2<bc.constant.length?bc.constant[2]:0,La=3<bc.constant.length?bc.constant[3]:0)):(Ta=Ca(bc.buffer)?L.createStream(34962,bc.buffer):L.getBuffer(bc.buffer),
tb="type"in bc?Kc[bc.type]:Ta.dtype,sb=!!bc.normalized,jb=bc.size|0,jc=bc.offset|0,Ja=bc.stride|0,Ub=bc.divisor|0);mb=M.location;Ya=K[mb];if(1===qb){Ya.buffer||ba.enableVertexAttribArray(mb);vb=jb||4;if(Ya.type!==tb||Ya.size!==vb||Ya.buffer!==Ta||Ya.normalized!==sb||Ya.offset!==jc||Ya.stride!==Ja)ba.bindBuffer(34962,Ta.buffer),ba.vertexAttribPointer(mb,vb,tb,sb,Ja,jc),Ya.type=tb,Ya.size=vb,Ya.buffer=Ta,Ya.normalized=sb,Ya.offset=jc,Ya.stride=Ja;Ya.divisor!==Ub&&(A.vertexAttribDivisorANGLE(mb,Ub),
Ya.divisor=Ub)}else if(Ya.buffer&&(ba.disableVertexAttribArray(mb),Ya.buffer=null),Ya.x!==eb||Ya.y!==gb||Ya.z!==Na||Ya.w!==La)ba.vertexAttrib4f(mb,eb,gb,Na,La),Ya.x=eb,Ya.y=gb,Ya.z=Na,Ya.w=La;ub=fa.location;Pa=K[ub];Pa.buffer||ba.enableVertexAttribArray(ub);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==z||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ba.bindBuffer(34962,z.buffer),ba.vertexAttribPointer(ub,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=z,Pa.normalized=!1,Pa.offset=0,Pa.stride=
24;0!==Pa.divisor&&(A.vertexAttribDivisorANGLE(ub,0),Pa.divisor=0);Dc=T.location;Wa=K[Dc];Wa.buffer||ba.enableVertexAttribArray(Dc);if(5126!==Wa.type||2!==Wa.size||Wa.buffer!==e||!1!==Wa.normalized||8!==Wa.offset||24!==Wa.stride)ba.bindBuffer(34962,e.buffer),ba.vertexAttribPointer(Dc,2,5126,!1,24,8),Wa.type=5126,Wa.size=2,Wa.buffer=e,Wa.normalized=!1,Wa.offset=8,Wa.stride=24;0!==Wa.divisor&&(A.vertexAttribDivisorANGLE(Dc,0),Wa.divisor=0);Jb=t.location;Db=K[Jb];Db.buffer||ba.enableVertexAttribArray(Jb);
if(5126!==Db.type||2!==Db.size||Db.buffer!==l||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(Jb,2,5126,!1,24,16),Db.type=5126,Db.size=2,Db.buffer=l,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(A.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Ma=g.call(this,da,a,0);ba.uniform4f(oa.location,Ma[0],Ma[1],Ma[2],Ma[3]);ba.uniform1f(X.location,a.lineWidth);ba.uniform1f(ca.location,a.capSize);zd=a.scale;ba.uniform2f(O.location,zd[0],zd[1]);
$a=a.scaleFract;ba.uniform2f(Q.location,$a[0],$a[1]);Kb=a.translate;ba.uniform2f(R.location,Kb[0],Kb[1]);Lb=a.translateFract;ba.uniform2f(qa.location,Lb[0],Lb[1]);ba.uniform1f(S.location,a.opacity);(ob=na.elements)?ba.bindBuffer(34963,ob.buffer.buffer):Qa.currentVAO&&(ob=ia.getElements(Qa.currentVAO.elements))&&ba.bindBuffer(34963,ob.buffer.buffer);Oa=na.offset;ac=a.count;0<ac?ob?A.drawElementsInstancedANGLE(4,36,ob.type,Oa<<(ob.type-5121>>1),ac):A.drawArraysInstancedANGLE(4,Oa,36,ac):0>ac&&(ob?ba.drawElements(4,
36,ob.type,Oa<<(ob.type-5121>>1)):ba.drawArrays(4,Oa,36));V.dirty=!0;Qa.setVAO(null);da.viewportWidth=h;da.viewportHeight=B;la&&(d.cpuTime+=performance.now()-Ka);F&&L.destroyStream(D);yc&&L.destroyStream(Bb);hb&&L.destroyStream(Mb);rb&&L.destroyStream(Ta)},scope:function(c,b,a){var k,f,g,t,n,u,h,y,C,p,ha,O,K,W,A,sa,wa,Qa,D,Ia,P,I,Hb,N,S,ba,Z,G,ja,R,Y,ua,Q,M,xa,Ba,aa,qa,ia,va,T,ta,X,U,ca,Ea,ma,oa,Gb,fa,J,ya,Ra,Ha,Fa,Aa,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,
Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd;k=c.viewport;f=k.x|0;g=k.y|0;t="width"in k?k.width|0:da.framebufferWidth-f;n="height"in k?k.height|0:da.framebufferHeight-g;u=da.viewportWidth;da.viewportWidth=
t;h=da.viewportHeight;da.viewportHeight=n;y=fb[0];fb[0]=f;C=fb[1];fb[1]=g;p=fb[2];fb[2]=t;ha=fb[3];fb[3]=n;O=Ka[0];Ka[0]=0;K=Ka[1];Ka[1]=0;W=Ka[2];Ka[2]=0;A=Ka[3];Ka[3]=0;sa=ka.blend_enable;ka.blend_enable=!0;wa=Va[0];Va[0]=32774;Qa=Va[1];Va[1]=32774;D=ea[0];ea[0]=770;Ia=ea[1];ea[1]=771;P=ea[2];ea[2]=773;I=ea[3];ea[3]=1;Hb=ka.depth_enable;ka.depth_enable=!1;N=c.viewport;S=N.x|0;ba=N.y|0;Z="width"in N?N.width|0:da.framebufferWidth-S;G="height"in N?N.height|0:da.framebufferHeight-ba;ja=ra[0];ra[0]=
S;R=ra[1];ra[1]=ba;Y=ra[2];ra[2]=Z;ua=ra[3];ra[3]=G;Q=ka.scissor_enable;ka.scissor_enable=!0;if(M=V.profile)xa=performance.now(),d.count++;Ba=na.count;na.count=36;aa=c.count;qa=na.instances;na.instances=aa;ia=na.primitive;na.primitive=4;va=c.capSize;T=za[5];za[5]=va;ta=c.lineWidth;X=za[4];za[4]=ta;U=c.opacity;ca=za[10];za[10]=U;Ea=c.range;ma=za[18];za[18]=Ea;oa=c.scale;Gb=za[6];za[6]=oa;fa=c.scaleFract;J=za[7];za[7]=fa;ya=c.translate;Ra=za[8];za[8]=ya;Ha=c.translateFract;Fa=za[9];za[9]=Ha;Aa=q.call(this,
da,c,a);Ib=za[3];za[3]=Aa;sc=m.buffer;m.buffer=l;Ob=m.divisor;m.divisor=0;lb=m.normalized;m.normalized=!1;Fb=m.offset;m.offset=16;Cb=m.size;m.size=0;yb=m.state;m.state=1;ib=m.stride;m.stride=24;$b=m.type;m.type=5126;Pb=m.w;m.w=0;rb=m.x;m.x=0;Ta=m.y;m.y=0;Ub=m.z;m.z=0;sb=v.call(this,da,c,a);bc.offset=sb;jc=!1;jb=null;qb=0;Ja=!1;La=tb=0;eb=1;gb=0;Na=5126;ub=vb=Ya=mb=0;Ca(bc)?(jc=!0,jb=L.createStream(34962,bc),Na=jb.dtype):(jb=L.getBuffer(bc))?Na=jb.dtype:"constant"in bc?(eb=2,"number"===typeof bc.constant?
(Ya=bc.constant,vb=ub=mb=0):(Ya=0<bc.constant.length?bc.constant[0]:0,vb=1<bc.constant.length?bc.constant[1]:0,ub=2<bc.constant.length?bc.constant[2]:0,mb=3<bc.constant.length?bc.constant[3]:0)):(jb=Ca(bc.buffer)?L.createStream(34962,bc.buffer):L.getBuffer(bc.buffer),Na="type"in bc?Kc[bc.type]:jb.dtype,Ja=!!bc.normalized,La=bc.size|0,tb=bc.offset|0,gb=bc.stride|0,qb=bc.divisor|0);Pa=w.buffer;w.buffer=jb;Dc=w.divisor;w.divisor=qb;Wa=w.normalized;w.normalized=Ja;Jb=w.offset;w.offset=tb;Db=w.size;w.size=
La;Ma=w.state;w.state=eb;zd=w.stride;w.stride=gb;$a=w.type;w.type=Na;Kb=w.w;w.w=mb;Lb=w.x;w.x=Ya;ob=w.y;w.y=vb;Oa=w.z;w.z=ub;ac=B.buffer;B.buffer=z;Sa=B.divisor;B.divisor=0;wb=B.normalized;B.normalized=!1;xb=B.offset;B.offset=0;Ua=B.size;B.size=0;pb=B.state;B.state=1;gc=B.stride;B.stride=24;Bc=B.type;B.type=5126;wc=B.w;B.w=0;cb=B.x;B.x=0;kc=B.y;B.y=0;Mc=B.z;B.z=0;Za=la.call(this,da,c,a);Ga.offset=Za;nd=!1;Ab=null;ab=0;Wb=!1;Xb=uc=0;Qb=1;Nc=0;Rb=5126;Pc=sd=Fc=Od=0;Ca(Ga)?(nd=!0,Ab=L.createStream(34962,
Ga),Rb=Ab.dtype):(Ab=L.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Fc=Ga.constant,sd=Pc=Od=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,sd=1<Ga.constant.length?Ga.constant[1]:0,Pc=2<Ga.constant.length?Ga.constant[2]:0,Od=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Ca(Ga.buffer)?L.createStream(34962,Ga.buffer):L.getBuffer(Ga.buffer),Rb="type"in Ga?Kc[Ga.type]:Ab.dtype,Wb=!!Ga.normalized,Xb=Ga.size|0,uc=Ga.offset|0,Nc=Ga.stride|0,ab=Ga.divisor|0);Yc=x.buffer;x.buffer=
Ab;vd=x.divisor;x.divisor=ab;oc=x.normalized;x.normalized=Wb;xc=x.offset;x.offset=uc;hc=x.size;x.size=Xb;db=x.state;x.state=Qb;tc=x.stride;x.stride=Nc;Tb=x.type;x.type=Rb;Yb=x.w;x.w=Od;ec=x.x;x.x=Fc;ic=x.y;x.y=sd;zc=x.z;x.z=Pc;Cc=E.buffer;E.buffer=e;dd=E.divisor;E.divisor=0;Sc=E.normalized;E.normalized=!1;Tc=E.offset;E.offset=8;Uc=E.size;E.size=0;Zc=E.state;E.state=1;od=E.stride;E.stride=24;ed=E.type;E.type=5126;$c=E.w;E.w=0;lc=E.x;E.x=0;dc=E.y;E.y=0;ad=E.z;E.z=0;Xc=Da.call(this,da,c,a);cc.offset=
Xc;fd=!1;Ac=null;jd=0;Dd=!1;xd=ze=0;kd=1;Fe=0;Td=5126;Nd=Ud=ae=he=0;Ca(cc)?(fd=!0,Ac=L.createStream(34962,cc),Td=Ac.dtype):(Ac=L.getBuffer(cc))?Td=Ac.dtype:"constant"in cc?(kd=2,"number"===typeof cc.constant?(ae=cc.constant,Ud=Nd=he=0):(ae=0<cc.constant.length?cc.constant[0]:0,Ud=1<cc.constant.length?cc.constant[1]:0,Nd=2<cc.constant.length?cc.constant[2]:0,he=3<cc.constant.length?cc.constant[3]:0)):(Ac=Ca(cc.buffer)?L.createStream(34962,cc.buffer):L.getBuffer(cc.buffer),Td="type"in cc?Kc[cc.type]:
Ac.dtype,Dd=!!cc.normalized,xd=cc.size|0,ze=cc.offset|0,Fe=cc.stride|0,jd=cc.divisor|0);Kd=H.buffer;H.buffer=Ac;qd=H.divisor;H.divisor=jd;Vc=H.normalized;H.normalized=Dd;wd=H.offset;H.offset=ze;ud=H.size;H.size=xd;ld=H.state;H.state=kd;yd=H.stride;H.stride=Fe;Fd=H.type;H.type=Td;Hd=H.w;H.w=he;ke=H.x;H.x=ae;ne=H.y;H.y=Ud;ue=H.z;H.z=Nd;oe=r.call(this,da,c,a);Sb.offset=oe;le=!1;ie=null;ve=0;fe=!1;Qc=pe=0;id=1;we=0;se=5126;Xd=Wd=Vd=Qd=0;Ca(Sb)?(le=!0,ie=L.createStream(34962,Sb),se=ie.dtype):(ie=L.getBuffer(Sb))?
se=ie.dtype:"constant"in Sb?(id=2,"number"===typeof Sb.constant?(Vd=Sb.constant,Wd=Xd=Qd=0):(Vd=0<Sb.constant.length?Sb.constant[0]:0,Wd=1<Sb.constant.length?Sb.constant[1]:0,Xd=2<Sb.constant.length?Sb.constant[2]:0,Qd=3<Sb.constant.length?Sb.constant[3]:0)):(ie=Ca(Sb.buffer)?L.createStream(34962,Sb.buffer):L.getBuffer(Sb.buffer),se="type"in Sb?Kc[Sb.type]:ie.dtype,fe=!!Sb.normalized,Qc=Sb.size|0,pe=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);qe=F.buffer;F.buffer=ie;Ce=F.divisor;F.divisor=ve;Ge=F.normalized;
F.normalized=fe;te=F.offset;F.offset=pe;Ve=F.size;F.size=Qc;We=F.state;F.state=id;Re=F.stride;F.stride=we;xe=F.type;F.type=se;Je=F.w;F.w=Qd;Le=F.x;F.x=Vd;Me=F.y;F.y=Wd;Ne=F.z;F.z=Xd;Ke=pa.vert;pa.vert=2;Rd=pa.frag;pa.frag=1;V.dirty=!0;b(da,c,a);da.viewportWidth=u;da.viewportHeight=h;fb[0]=y;fb[1]=C;fb[2]=p;fb[3]=ha;Ka[0]=O;Ka[1]=K;Ka[2]=W;Ka[3]=A;ka.blend_enable=sa;Va[0]=wa;Va[1]=Qa;ea[0]=D;ea[1]=Ia;ea[2]=P;ea[3]=I;ka.depth_enable=Hb;ra[0]=ja;ra[1]=R;ra[2]=Y;ra[3]=ua;ka.scissor_enable=Q;M&&(d.cpuTime+=
performance.now()-xa);na.count=Ba;na.instances=qa;na.primitive=ia;za[5]=T;za[4]=X;za[10]=ca;za[18]=ma;za[6]=Gb;za[7]=J;za[8]=Ra;za[9]=Fa;za[3]=Ib;m.buffer=sc;m.divisor=Ob;m.normalized=lb;m.offset=Fb;m.size=Cb;m.state=yb;m.stride=ib;m.type=$b;m.w=Pb;m.x=rb;m.y=Ta;m.z=Ub;jc&&L.destroyStream(jb);w.buffer=Pa;w.divisor=Dc;w.normalized=Wa;w.offset=Jb;w.size=Db;w.state=Ma;w.stride=zd;w.type=$a;w.w=Kb;w.x=Lb;w.y=ob;w.z=Oa;B.buffer=ac;B.divisor=Sa;B.normalized=wb;B.offset=xb;B.size=Ua;B.state=pb;B.stride=
gc;B.type=Bc;B.w=wc;B.x=cb;B.y=kc;B.z=Mc;nd&&L.destroyStream(Ab);x.buffer=Yc;x.divisor=vd;x.normalized=oc;x.offset=xc;x.size=hc;x.state=db;x.stride=tc;x.type=Tb;x.w=Yb;x.x=ec;x.y=ic;x.z=zc;E.buffer=Cc;E.divisor=dd;E.normalized=Sc;E.offset=Tc;E.size=Uc;E.state=Zc;E.stride=od;E.type=ed;E.w=$c;E.x=lc;E.y=dc;E.z=ad;fd&&L.destroyStream(Ac);H.buffer=Kd;H.divisor=qd;H.normalized=Vc;H.offset=wd;H.size=ud;H.state=ld;H.stride=yd;H.type=Fd;H.w=Hd;H.x=ke;H.y=ne;H.z=ue;le&&L.destroyStream(ie);F.buffer=qe;F.divisor=
Ce;F.normalized=Ge;F.offset=te;F.size=Ve;F.state=We;F.stride=Re;F.type=xe;F.w=Je;F.x=Le;F.y=Me;F.z=Ne;pa.vert=Ke;pa.frag=Rd;V.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,Da,H,r,F,A,U,I,G,D,ma,t,ca,M,fa){var J,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,
xa,Ba,ja,Y;J=a.attributes;T=a.buffer;X=a.context;S=a.current;P=a.draw;N=a.elements;O=a.extensions;Q=a.framebuffer;R=a.gl;qa=a.isBufferArgs;oa=a.next;K=a.shader;L=a.uniforms;da=a.vao;V=oa.blend_color;na=S.blend_color;ia=oa.blend_equation;ya=S.blend_equation;va=oa.blend_func;ba=S.blend_func;Ca=oa.colorMask;ka=S.colorMask;pa=oa.depth_range;za=S.depth_range;Qa=oa.polygonOffset_offset;Ka=S.polygonOffset_offset;Hb=oa.sample_coverage;Va=S.sample_coverage;ha=oa.scissor_box;ea=S.scissor_box;sa=oa.stencil_func;
ua=S.stencil_func;Ea=oa.stencil_opBack;Ra=S.stencil_opBack;Gb=oa.stencil_opFront;Z=S.stencil_opFront;W=oa.viewport;wa=S.viewport;Ia={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ra={divisor:1,offset:8,stride:8};xa={divisor:1,offset:8,stride:8};Ba={divisor:1,offset:16,stride:8};ja={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(c,e){var b,a,l,k,f,g;b=Q.next;b!==Q.cur&&(b?R.bindFramebuffer(36160,b.framebuffer):R.bindFramebuffer(36160,
null),Q.cur=b);if(S.dirty){var m,q,u,h,z,y,C,ha,K,W,L,V,ia,va,Cd,Be,Qe,Ue,Jd,Ee,me,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc;m=oa.dither;m!==S.dither&&(m?R.enable(3024):R.disable(3024),S.dither=m);q=oa.depth_func;q!==S.depth_func&&(R.depthFunc(q),S.depth_func=q);u=pa[0];h=pa[1];if(u!==za[0]||h!==za[1])R.depthRange(u,h),za[0]=u,za[1]=h;z=oa.depth_mask;z!==S.depth_mask&&(R.depthMask(z),S.depth_mask=z);y=Ca[0];C=Ca[1];ha=Ca[2];K=Ca[3];if(y!==ka[0]||C!==ka[1]||ha!==ka[2]||K!==ka[3])R.colorMask(y,C,ha,K),ka[0]=
y,ka[1]=C,ka[2]=ha,ka[3]=K;W=oa.cull_enable;W!==S.cull_enable&&(W?R.enable(2884):R.disable(2884),S.cull_enable=W);L=oa.cull_face;L!==S.cull_face&&(R.cullFace(L),S.cull_face=L);V=oa.frontFace;V!==S.frontFace&&(R.frontFace(V),S.frontFace=V);ia=oa.lineWidth;ia!==S.lineWidth&&(R.lineWidth(ia),S.lineWidth=ia);va=oa.polygonOffset_enable;va!==S.polygonOffset_enable&&(va?R.enable(32823):R.disable(32823),S.polygonOffset_enable=va);Cd=Qa[0];Be=Qa[1];if(Cd!==Ka[0]||Be!==Ka[1])R.polygonOffset(Cd,Be),Ka[0]=Cd,
Ka[1]=Be;Qe=oa.sample_alpha;Qe!==S.sample_alpha&&(Qe?R.enable(32926):R.disable(32926),S.sample_alpha=Qe);Ue=oa.sample_enable;Ue!==S.sample_enable&&(Ue?R.enable(32928):R.disable(32928),S.sample_enable=Ue);Jd=Hb[0];Ee=Hb[1];if(Jd!==Va[0]||Ee!==Va[1])R.sampleCoverage(Jd,Ee),Va[0]=Jd,Va[1]=Ee;me=oa.stencil_mask;me!==S.stencil_mask&&(R.stencilMask(me),S.stencil_mask=me);ce=sa[0];Md=sa[1];Ed=sa[2];if(ce!==ua[0]||Md!==ua[1]||Ed!==ua[2])R.stencilFunc(ce,Md,Ed),ua[0]=ce,ua[1]=Md,ua[2]=Ed;pd=Gb[0];bd=Gb[1];
td=Gb[2];Oc=Gb[3];if(pd!==Z[0]||bd!==Z[1]||td!==Z[2]||Oc!==Z[3])R.stencilOpSeparate(pd,bd,td,Oc),Z[0]=pd,Z[1]=bd,Z[2]=td,Z[3]=Oc;rd=Ea[0];Gc=Ea[1];gd=Ea[2];Rc=Ea[3];if(rd!==Ra[0]||Gc!==Ra[1]||gd!==Ra[2]||Rc!==Ra[3])R.stencilOpSeparate(rd,Gc,gd,Rc),Ra[0]=rd,Ra[1]=Gc,Ra[2]=gd,Ra[3]=Rc}R.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;R.enable(3042);S.blend_enable=!0;R.blendEquationSeparate(32774,32774);ya[0]=32774;ya[1]=32774;R.blendFuncSeparate(770,771,773,1);ba[0]=770;ba[1]=771;ba[2]=773;ba[3]=
1;R.enable(3089);S.scissor_enable=!0;R.disable(2960);S.stencil_enable=!1;if(a=S.profile)l=performance.now(),d.count+=e;R.useProgram(v.program);k=O.angle_instanced_arrays;var md,Vb,Eb,vc,zb;da.setVAO(null);md=U.location;Vb=J[md];Vb.buffer||R.enableVertexAttribArray(md);if(5126!==Vb.type||1!==Vb.size||Vb.buffer!==p||!1!==Vb.normalized||0!==Vb.offset||8!==Vb.stride)R.bindBuffer(34962,p.buffer),R.vertexAttribPointer(md,1,5126,!1,8,0),Vb.type=5126,Vb.size=1,Vb.buffer=p,Vb.normalized=!1,Vb.offset=0,Vb.stride=
8;0!==Vb.divisor&&(k.vertexAttribDivisorANGLE(md,0),Vb.divisor=0);Eb=I.location;vc=J[Eb];vc.buffer||R.enableVertexAttribArray(Eb);if(5126!==vc.type||1!==vc.size||vc.buffer!==n||!1!==vc.normalized||4!==vc.offset||8!==vc.stride)R.bindBuffer(34962,n.buffer),R.vertexAttribPointer(Eb,1,5126,!1,8,4),vc.type=5126,vc.size=1,vc.buffer=n,vc.normalized=!1,vc.offset=4,vc.stride=8;0!==vc.divisor&&(k.vertexAttribDivisorANGLE(Eb,0),vc.divisor=0);(zb=P.elements)?R.bindBuffer(34963,zb.buffer.buffer):da.currentVAO&&
(zb=N.getElements(da.currentVAO.elements))&&R.bindBuffer(34963,zb.buffer.buffer);for(f=0;f<e;++f){g=c[f];var yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,
ud,ld;yc=g.viewport;Bb=yc.x|0;Lc=yc.y|0;mc="width"in yc?yc.width|0:X.framebufferWidth-Bb;Hc="height"in yc?yc.height|0:X.framebufferHeight-Lc;hd=X.viewportWidth;X.viewportWidth=mc;cd=X.viewportHeight;X.viewportHeight=Hc;R.viewport(Bb,Lc,mc,Hc);wa[0]=Bb;wa[1]=Lc;wa[2]=mc;wa[3]=Hc;(Ec=w.call(this,X,g,f))?R.enable(2929):R.disable(2929);S.depth_enable=Ec;fc=g.viewport;Ic=fc.x|0;pc=fc.y|0;rc="width"in fc?fc.width|0:X.framebufferWidth-Ic;nc="height"in fc?fc.height|0:X.framebufferHeight-pc;R.scissor(Ic,pc,
rc,nc);ea[0]=Ic;ea[1]=pc;ea[2]=rc;ea[3]=nc;ra.buffer=g.positionBuffer;qc=!1;nb=null;Wc=0;Zb=!1;Mb=hb=0;bb=1;kb=0;Xa=5126;sc=Ib=Nb=Jc=0;qa(ra)?(qc=!0,nb=T.createStream(34962,ra),Xa=nb.dtype):(nb=T.getBuffer(ra))?Xa=nb.dtype:"constant"in ra?(bb=2,"number"===typeof ra.constant?(Nb=ra.constant,Ib=sc=Jc=0):(Nb=0<ra.constant.length?ra.constant[0]:0,Ib=1<ra.constant.length?ra.constant[1]:0,sc=2<ra.constant.length?ra.constant[2]:0,Jc=3<ra.constant.length?ra.constant[3]:0)):(nb=qa(ra.buffer)?T.createStream(34962,
ra.buffer):T.getBuffer(ra.buffer),Xa="type"in ra?Ia[ra.type]:nb.dtype,Zb=!!ra.normalized,Mb=ra.size|0,hb=ra.offset|0,kb=ra.stride|0,Wc=ra.divisor|0);Ob=la.location;lb=J[Ob];if(1===bb){lb.buffer||R.enableVertexAttribArray(Ob);Fb=Mb||2;if(lb.type!==Xa||lb.size!==Fb||lb.buffer!==nb||lb.normalized!==Zb||lb.offset!==hb||lb.stride!==kb)R.bindBuffer(34962,nb.buffer),R.vertexAttribPointer(Ob,Fb,Xa,Zb,kb,hb),lb.type=Xa,lb.size=Fb,lb.buffer=nb,lb.normalized=Zb,lb.offset=hb,lb.stride=kb;lb.divisor!==Wc&&(k.vertexAttribDivisorANGLE(Ob,
Wc),lb.divisor=Wc)}else if(lb.buffer&&(R.disableVertexAttribArray(Ob),lb.buffer=null),lb.x!==Nb||lb.y!==Ib||lb.z!==sc||lb.w!==Jc)R.vertexAttrib4f(Ob,Nb,Ib,sc,Jc),lb.x=Nb,lb.y=Ib,lb.z=sc,lb.w=Jc;Ba.buffer=g.positionBuffer;Cb=!1;yb=null;ib=0;$b=!1;rb=Pb=0;Ta=1;Ub=0;sb=5126;Ja=qb=jb=jc=0;qa(Ba)?(Cb=!0,yb=T.createStream(34962,Ba),sb=yb.dtype):(yb=T.getBuffer(Ba))?sb=yb.dtype:"constant"in Ba?(Ta=2,"number"===typeof Ba.constant?(jb=Ba.constant,qb=Ja=jc=0):(jb=0<Ba.constant.length?Ba.constant[0]:0,qb=1<
Ba.constant.length?Ba.constant[1]:0,Ja=2<Ba.constant.length?Ba.constant[2]:0,jc=3<Ba.constant.length?Ba.constant[3]:0)):(yb=qa(Ba.buffer)?T.createStream(34962,Ba.buffer):T.getBuffer(Ba.buffer),sb="type"in Ba?Ia[Ba.type]:yb.dtype,$b=!!Ba.normalized,rb=Ba.size|0,Pb=Ba.offset|0,Ub=Ba.stride|0,ib=Ba.divisor|0);tb=E.location;La=J[tb];if(1===Ta){La.buffer||R.enableVertexAttribArray(tb);eb=rb||2;if(La.type!==sb||La.size!==eb||La.buffer!==yb||La.normalized!==$b||La.offset!==Pb||La.stride!==Ub)R.bindBuffer(34962,
yb.buffer),R.vertexAttribPointer(tb,eb,sb,$b,Ub,Pb),La.type=sb,La.size=eb,La.buffer=yb,La.normalized=$b,La.offset=Pb,La.stride=Ub;La.divisor!==ib&&(k.vertexAttribDivisorANGLE(tb,ib),La.divisor=ib)}else if(La.buffer&&(R.disableVertexAttribArray(tb),La.buffer=null),La.x!==jb||La.y!==qb||La.z!==Ja||La.w!==jc)R.vertexAttrib4f(tb,jb,qb,Ja,jc),La.x=jb,La.y=qb,La.z=Ja,La.w=jc;xa.buffer=g.positionFractBuffer;gb=!1;Na=null;mb=0;Ya=!1;ub=vb=0;Pa=1;Dc=0;Wa=5126;zd=Ma=Db=Jb=0;qa(xa)?(gb=!0,Na=T.createStream(34962,
xa),Wa=Na.dtype):(Na=T.getBuffer(xa))?Wa=Na.dtype:"constant"in xa?(Pa=2,"number"===typeof xa.constant?(Db=xa.constant,Ma=zd=Jb=0):(Db=0<xa.constant.length?xa.constant[0]:0,Ma=1<xa.constant.length?xa.constant[1]:0,zd=2<xa.constant.length?xa.constant[2]:0,Jb=3<xa.constant.length?xa.constant[3]:0)):(Na=qa(xa.buffer)?T.createStream(34962,xa.buffer):T.getBuffer(xa.buffer),Wa="type"in xa?Ia[xa.type]:Na.dtype,Ya=!!xa.normalized,ub=xa.size|0,vb=xa.offset|0,Dc=xa.stride|0,mb=xa.divisor|0);$a=x.location;Kb=
J[$a];if(1===Pa){Kb.buffer||R.enableVertexAttribArray($a);Lb=ub||2;if(Kb.type!==Wa||Kb.size!==Lb||Kb.buffer!==Na||Kb.normalized!==Ya||Kb.offset!==vb||Kb.stride!==Dc)R.bindBuffer(34962,Na.buffer),R.vertexAttribPointer($a,Lb,Wa,Ya,Dc,vb),Kb.type=Wa,Kb.size=Lb,Kb.buffer=Na,Kb.normalized=Ya,Kb.offset=vb,Kb.stride=Dc;Kb.divisor!==mb&&(k.vertexAttribDivisorANGLE($a,mb),Kb.divisor=mb)}else if(Kb.buffer&&(R.disableVertexAttribArray($a),Kb.buffer=null),Kb.x!==Db||Kb.y!==Ma||Kb.z!==zd||Kb.w!==Jb)R.vertexAttrib4f($a,
Db,Ma,zd,Jb),Kb.x=Db,Kb.y=Ma,Kb.z=zd,Kb.w=Jb;ja.buffer=g.positionFractBuffer;ob=!1;Oa=null;ac=0;Sa=!1;xb=wb=0;Ua=1;pb=0;gc=5126;kc=cb=wc=Bc=0;qa(ja)?(ob=!0,Oa=T.createStream(34962,ja),gc=Oa.dtype):(Oa=T.getBuffer(ja))?gc=Oa.dtype:"constant"in ja?(Ua=2,"number"===typeof ja.constant?(wc=ja.constant,cb=kc=Bc=0):(wc=0<ja.constant.length?ja.constant[0]:0,cb=1<ja.constant.length?ja.constant[1]:0,kc=2<ja.constant.length?ja.constant[2]:0,Bc=3<ja.constant.length?ja.constant[3]:0)):(Oa=qa(ja.buffer)?T.createStream(34962,
ja.buffer):T.getBuffer(ja.buffer),gc="type"in ja?Ia[ja.type]:Oa.dtype,Sa=!!ja.normalized,xb=ja.size|0,wb=ja.offset|0,pb=ja.stride|0,ac=ja.divisor|0);Mc=Da.location;Za=J[Mc];if(1===Ua){Za.buffer||R.enableVertexAttribArray(Mc);nd=xb||2;if(Za.type!==gc||Za.size!==nd||Za.buffer!==Oa||Za.normalized!==Sa||Za.offset!==wb||Za.stride!==pb)R.bindBuffer(34962,Oa.buffer),R.vertexAttribPointer(Mc,nd,gc,Sa,pb,wb),Za.type=gc,Za.size=nd,Za.buffer=Oa,Za.normalized=Sa,Za.offset=wb,Za.stride=pb;Za.divisor!==ac&&(k.vertexAttribDivisorANGLE(Mc,
ac),Za.divisor=ac)}else if(Za.buffer&&(R.disableVertexAttribArray(Mc),Za.buffer=null),Za.x!==wc||Za.y!==cb||Za.z!==kc||Za.w!==Bc)R.vertexAttrib4f(Mc,wc,cb,kc,Bc),Za.x=wc,Za.y=cb,Za.z=kc,Za.w=Bc;Y.buffer=g.colorBuffer;Ab=!1;ab=null;Wb=0;uc=!1;Qb=Xb=0;Nc=1;Rb=0;Od=5126;Yc=Pc=sd=Fc=0;qa(Y)?(Ab=!0,ab=T.createStream(34962,Y),Od=ab.dtype):(ab=T.getBuffer(Y))?Od=ab.dtype:"constant"in Y?(Nc=2,"number"===typeof Y.constant?(sd=Y.constant,Pc=Yc=Fc=0):(sd=0<Y.constant.length?Y.constant[0]:0,Pc=1<Y.constant.length?
Y.constant[1]:0,Yc=2<Y.constant.length?Y.constant[2]:0,Fc=3<Y.constant.length?Y.constant[3]:0)):(ab=qa(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),Od="type"in Y?Ia[Y.type]:ab.dtype,uc=!!Y.normalized,Qb=Y.size|0,Xb=Y.offset|0,Rb=Y.stride|0,Wb=Y.divisor|0);vd=H.location;oc=J[vd];if(1===Nc){oc.buffer||R.enableVertexAttribArray(vd);xc=Qb||4;if(oc.type!==Od||oc.size!==xc||oc.buffer!==ab||oc.normalized!==uc||oc.offset!==Xb||oc.stride!==Rb)R.bindBuffer(34962,ab.buffer),R.vertexAttribPointer(vd,
xc,Od,uc,Rb,Xb),oc.type=Od,oc.size=xc,oc.buffer=ab,oc.normalized=uc,oc.offset=Xb,oc.stride=Rb;oc.divisor!==Wb&&(k.vertexAttribDivisorANGLE(vd,Wb),oc.divisor=Wb)}else if(oc.buffer&&(R.disableVertexAttribArray(vd),oc.buffer=null),oc.x!==sd||oc.y!==Pc||oc.z!==Yc||oc.w!==Fc)R.vertexAttrib4f(vd,sd,Pc,Yc,Fc),oc.x=sd,oc.y=Pc,oc.z=Yc,oc.w=Fc;hc=g.scale;db=hc[0];Tb=hc[1];f&&tc===db&&Yb===Tb||(tc=db,Yb=Tb,R.uniform2f(D.location,db,Tb));ec=g.scaleFract;ic=ec[0];Cc=ec[1];f&&zc===ic&&dd===Cc||(zc=ic,dd=Cc,R.uniform2f(ma.location,
ic,Cc));Sc=g.translate;Tc=Sc[0];Zc=Sc[1];f&&Uc===Tc&&od===Zc||(Uc=Tc,od=Zc,R.uniform2f(ca.location,Tc,Zc));ed=g.translateFract;$c=ed[0];dc=ed[1];f&&lc===$c&&ad===dc||(lc=$c,ad=dc,R.uniform2f(M.location,$c,dc));Xc=g.thickness;f&&fd===Xc||(fd=Xc,R.uniform1f(t.location,Xc));Ac=g.depth;f&&jd===Ac||(jd=Ac,R.uniform1f(A.location,Ac));Dd=B.call(this,X,g,f);ze=Dd[0];kd=Dd[1];Td=Dd[2];ae=Dd[3];f&&xd===ze&&Fe===kd&&he===Td&&Ud===ae||(xd=ze,Fe=kd,he=Td,Ud=ae,R.uniform4f(fa.location,ze,kd,Td,ae));Nd=g.dashLength;
f&&Kd===Nd||(Kd=Nd,R.uniform1f(r.location,Nd));qd=g.opacity;f&&Vc===qd||(Vc=qd,R.uniform1f(G.location,qd));(wd=g.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);ud=wd._texture;R.uniform1i(F.location,ud.bind());ld=g.count;0<ld?zb?k.drawElementsInstancedANGLE(5,4,zb.type,0<<(zb.type-5121>>1),ld):k.drawArraysInstancedANGLE(5,0,4,ld):0>ld&&(zb?R.drawElements(5,4,zb.type,0<<(zb.type-5121>>1)):R.drawArrays(5,0,4));X.viewportWidth=hd;X.viewportHeight=cd;qc&&T.destroyStream(nb);Cb&&T.destroyStream(yb);
gb&&T.destroyStream(Na);ob&&T.destroyStream(Oa);Ab&&T.destroyStream(ab);ud.unbind()}S.dirty=!0;da.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(c){var e,a,l,k,f,g,m,q,v,w,B,z,y,ha,K,W,L,V,ia,va,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb;e=Q.next;e!==Q.cur&&
(e?R.bindFramebuffer(36160,e.framebuffer):R.bindFramebuffer(36160,null),Q.cur=e);if(S.dirty){var xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb;xb=oa.dither;xb!==S.dither&&(xb?R.enable(3024):R.disable(3024),S.dither=xb);Ua=oa.depth_func;Ua!==S.depth_func&&(R.depthFunc(Ua),S.depth_func=Ua);pb=pa[0];gc=pa[1];if(pb!==za[0]||gc!==za[1])R.depthRange(pb,gc),za[0]=pb,za[1]=gc;Bc=oa.depth_mask;Bc!==S.depth_mask&&(R.depthMask(Bc),S.depth_mask=Bc);wc=Ca[0];cb=
Ca[1];kc=Ca[2];Mc=Ca[3];if(wc!==ka[0]||cb!==ka[1]||kc!==ka[2]||Mc!==ka[3])R.colorMask(wc,cb,kc,Mc),ka[0]=wc,ka[1]=cb,ka[2]=kc,ka[3]=Mc;Za=oa.cull_enable;Za!==S.cull_enable&&(Za?R.enable(2884):R.disable(2884),S.cull_enable=Za);nd=oa.cull_face;nd!==S.cull_face&&(R.cullFace(nd),S.cull_face=nd);Ab=oa.frontFace;Ab!==S.frontFace&&(R.frontFace(Ab),S.frontFace=Ab);ab=oa.lineWidth;ab!==S.lineWidth&&(R.lineWidth(ab),S.lineWidth=ab);Wb=oa.polygonOffset_enable;Wb!==S.polygonOffset_enable&&(Wb?R.enable(32823):
R.disable(32823),S.polygonOffset_enable=Wb);uc=Qa[0];Xb=Qa[1];if(uc!==Ka[0]||Xb!==Ka[1])R.polygonOffset(uc,Xb),Ka[0]=uc,Ka[1]=Xb;Qb=oa.sample_alpha;Qb!==S.sample_alpha&&(Qb?R.enable(32926):R.disable(32926),S.sample_alpha=Qb);Nc=oa.sample_enable;Nc!==S.sample_enable&&(Nc?R.enable(32928):R.disable(32928),S.sample_enable=Nc);Rb=Hb[0];Od=Hb[1];if(Rb!==Va[0]||Od!==Va[1])R.sampleCoverage(Rb,Od),Va[0]=Rb,Va[1]=Od;Fc=oa.stencil_mask;Fc!==S.stencil_mask&&(R.stencilMask(Fc),S.stencil_mask=Fc);sd=sa[0];Pc=sa[1];
Yc=sa[2];if(sd!==ua[0]||Pc!==ua[1]||Yc!==ua[2])R.stencilFunc(sd,Pc,Yc),ua[0]=sd,ua[1]=Pc,ua[2]=Yc;vd=Gb[0];oc=Gb[1];xc=Gb[2];hc=Gb[3];if(vd!==Z[0]||oc!==Z[1]||xc!==Z[2]||hc!==Z[3])R.stencilOpSeparate(vd,oc,xc,hc),Z[0]=vd,Z[1]=oc,Z[2]=xc,Z[3]=hc;db=Ea[0];tc=Ea[1];Tb=Ea[2];Yb=Ea[3];if(db!==Ra[0]||tc!==Ra[1]||Tb!==Ra[2]||Yb!==Ra[3])R.stencilOpSeparate(db,tc,Tb,Yb),Ra[0]=db,Ra[1]=tc,Ra[2]=Tb,Ra[3]=Yb}a=c.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:X.framebufferWidth-l;g="height"in a?a.height|0:X.framebufferHeight-
k;m=X.viewportWidth;X.viewportWidth=f;q=X.viewportHeight;X.viewportHeight=g;R.viewport(l,k,f,g);wa[0]=l;wa[1]=k;wa[2]=f;wa[3]=g;R.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;R.enable(3042);S.blend_enable=!0;R.blendEquationSeparate(32774,32774);ya[0]=32774;ya[1]=32774;R.blendFuncSeparate(770,771,773,1);ba[0]=770;ba[1]=771;ba[2]=773;ba[3]=1;(v=h.call(this,X,c,0))?R.enable(2929):R.disable(2929);S.depth_enable=v;w=c.viewport;B=w.x|0;z=w.y|0;y="width"in w?w.width|0:X.framebufferWidth-B;ha="height"in
w?w.height|0:X.framebufferHeight-z;R.scissor(B,z,y,ha);ea[0]=B;ea[1]=z;ea[2]=y;ea[3]=ha;R.enable(3089);S.scissor_enable=!0;R.disable(2960);S.stencil_enable=!1;if(K=S.profile)W=performance.now(),d.count++;R.useProgram(u.program);L=O.angle_instanced_arrays;da.setVAO(null);ra.buffer=c.positionBuffer;V=!1;ia=null;va=0;Bd=!1;Be=Cd=0;Qe=1;Ue=0;Jd=5126;Md=ce=me=Ee=0;qa(ra)?(V=!0,ia=T.createStream(34962,ra),Jd=ia.dtype):(ia=T.getBuffer(ra))?Jd=ia.dtype:"constant"in ra?(Qe=2,"number"===typeof ra.constant?
(me=ra.constant,ce=Md=Ee=0):(me=0<ra.constant.length?ra.constant[0]:0,ce=1<ra.constant.length?ra.constant[1]:0,Md=2<ra.constant.length?ra.constant[2]:0,Ee=3<ra.constant.length?ra.constant[3]:0)):(ia=qa(ra.buffer)?T.createStream(34962,ra.buffer):T.getBuffer(ra.buffer),Jd="type"in ra?Ia[ra.type]:ia.dtype,Bd=!!ra.normalized,Be=ra.size|0,Cd=ra.offset|0,Ue=ra.stride|0,va=ra.divisor|0);Ed=la.location;pd=J[Ed];if(1===Qe){pd.buffer||R.enableVertexAttribArray(Ed);bd=Be||2;if(pd.type!==Jd||pd.size!==bd||pd.buffer!==
ia||pd.normalized!==Bd||pd.offset!==Cd||pd.stride!==Ue)R.bindBuffer(34962,ia.buffer),R.vertexAttribPointer(Ed,bd,Jd,Bd,Ue,Cd),pd.type=Jd,pd.size=bd,pd.buffer=ia,pd.normalized=Bd,pd.offset=Cd,pd.stride=Ue;pd.divisor!==va&&(L.vertexAttribDivisorANGLE(Ed,va),pd.divisor=va)}else if(pd.buffer&&(R.disableVertexAttribArray(Ed),pd.buffer=null),pd.x!==me||pd.y!==ce||pd.z!==Md||pd.w!==Ee)R.vertexAttrib4f(Ed,me,ce,Md,Ee),pd.x=me,pd.y=ce,pd.z=Md,pd.w=Ee;Ba.buffer=c.positionBuffer;td=!1;Oc=null;rd=0;Gc=!1;Rc=
gd=0;md=1;Vb=0;Eb=5126;Bb=yc=zb=vc=0;qa(Ba)?(td=!0,Oc=T.createStream(34962,Ba),Eb=Oc.dtype):(Oc=T.getBuffer(Ba))?Eb=Oc.dtype:"constant"in Ba?(md=2,"number"===typeof Ba.constant?(zb=Ba.constant,yc=Bb=vc=0):(zb=0<Ba.constant.length?Ba.constant[0]:0,yc=1<Ba.constant.length?Ba.constant[1]:0,Bb=2<Ba.constant.length?Ba.constant[2]:0,vc=3<Ba.constant.length?Ba.constant[3]:0)):(Oc=qa(Ba.buffer)?T.createStream(34962,Ba.buffer):T.getBuffer(Ba.buffer),Eb="type"in Ba?Ia[Ba.type]:Oc.dtype,Gc=!!Ba.normalized,Rc=
Ba.size|0,gd=Ba.offset|0,Vb=Ba.stride|0,rd=Ba.divisor|0);Lc=E.location;mc=J[Lc];if(1===md){mc.buffer||R.enableVertexAttribArray(Lc);Hc=Rc||2;if(mc.type!==Eb||mc.size!==Hc||mc.buffer!==Oc||mc.normalized!==Gc||mc.offset!==gd||mc.stride!==Vb)R.bindBuffer(34962,Oc.buffer),R.vertexAttribPointer(Lc,Hc,Eb,Gc,Vb,gd),mc.type=Eb,mc.size=Hc,mc.buffer=Oc,mc.normalized=Gc,mc.offset=gd,mc.stride=Vb;mc.divisor!==rd&&(L.vertexAttribDivisorANGLE(Lc,rd),mc.divisor=rd)}else if(mc.buffer&&(R.disableVertexAttribArray(Lc),
mc.buffer=null),mc.x!==zb||mc.y!==yc||mc.z!==Bb||mc.w!==vc)R.vertexAttrib4f(Lc,zb,yc,Bb,vc),mc.x=zb,mc.y=yc,mc.z=Bb,mc.w=vc;xa.buffer=c.positionFractBuffer;hd=!1;cd=null;Ec=0;fc=!1;pc=Ic=0;rc=1;nc=0;qc=5126;hb=Zb=Wc=nb=0;qa(xa)?(hd=!0,cd=T.createStream(34962,xa),qc=cd.dtype):(cd=T.getBuffer(xa))?qc=cd.dtype:"constant"in xa?(rc=2,"number"===typeof xa.constant?(Wc=xa.constant,Zb=hb=nb=0):(Wc=0<xa.constant.length?xa.constant[0]:0,Zb=1<xa.constant.length?xa.constant[1]:0,hb=2<xa.constant.length?xa.constant[2]:
0,nb=3<xa.constant.length?xa.constant[3]:0)):(cd=qa(xa.buffer)?T.createStream(34962,xa.buffer):T.getBuffer(xa.buffer),qc="type"in xa?Ia[xa.type]:cd.dtype,fc=!!xa.normalized,pc=xa.size|0,Ic=xa.offset|0,nc=xa.stride|0,Ec=xa.divisor|0);Mb=x.location;bb=J[Mb];if(1===rc){bb.buffer||R.enableVertexAttribArray(Mb);kb=pc||2;if(bb.type!==qc||bb.size!==kb||bb.buffer!==cd||bb.normalized!==fc||bb.offset!==Ic||bb.stride!==nc)R.bindBuffer(34962,cd.buffer),R.vertexAttribPointer(Mb,kb,qc,fc,nc,Ic),bb.type=qc,bb.size=
kb,bb.buffer=cd,bb.normalized=fc,bb.offset=Ic,bb.stride=nc;bb.divisor!==Ec&&(L.vertexAttribDivisorANGLE(Mb,Ec),bb.divisor=Ec)}else if(bb.buffer&&(R.disableVertexAttribArray(Mb),bb.buffer=null),bb.x!==Wc||bb.y!==Zb||bb.z!==hb||bb.w!==nb)R.vertexAttrib4f(Mb,Wc,Zb,hb,nb),bb.x=Wc,bb.y=Zb,bb.z=hb,bb.w=nb;ja.buffer=c.positionFractBuffer;Xa=!1;Jc=null;Nb=0;Ib=!1;Ob=sc=0;lb=1;Fb=0;Cb=5126;Pb=$b=ib=yb=0;qa(ja)?(Xa=!0,Jc=T.createStream(34962,ja),Cb=Jc.dtype):(Jc=T.getBuffer(ja))?Cb=Jc.dtype:"constant"in ja?
(lb=2,"number"===typeof ja.constant?(ib=ja.constant,$b=Pb=yb=0):(ib=0<ja.constant.length?ja.constant[0]:0,$b=1<ja.constant.length?ja.constant[1]:0,Pb=2<ja.constant.length?ja.constant[2]:0,yb=3<ja.constant.length?ja.constant[3]:0)):(Jc=qa(ja.buffer)?T.createStream(34962,ja.buffer):T.getBuffer(ja.buffer),Cb="type"in ja?Ia[ja.type]:Jc.dtype,Ib=!!ja.normalized,Ob=ja.size|0,sc=ja.offset|0,Fb=ja.stride|0,Nb=ja.divisor|0);rb=Da.location;Ta=J[rb];if(1===lb){Ta.buffer||R.enableVertexAttribArray(rb);Ub=Ob||
2;if(Ta.type!==Cb||Ta.size!==Ub||Ta.buffer!==Jc||Ta.normalized!==Ib||Ta.offset!==sc||Ta.stride!==Fb)R.bindBuffer(34962,Jc.buffer),R.vertexAttribPointer(rb,Ub,Cb,Ib,Fb,sc),Ta.type=Cb,Ta.size=Ub,Ta.buffer=Jc,Ta.normalized=Ib,Ta.offset=sc,Ta.stride=Fb;Ta.divisor!==Nb&&(L.vertexAttribDivisorANGLE(rb,Nb),Ta.divisor=Nb)}else if(Ta.buffer&&(R.disableVertexAttribArray(rb),Ta.buffer=null),Ta.x!==ib||Ta.y!==$b||Ta.z!==Pb||Ta.w!==yb)R.vertexAttrib4f(rb,ib,$b,Pb,yb),Ta.x=ib,Ta.y=$b,Ta.z=Pb,Ta.w=yb;Y.buffer=c.colorBuffer;
sb=!1;jc=null;jb=0;qb=!1;tb=Ja=0;La=1;eb=0;gb=5126;vb=Ya=mb=Na=0;qa(Y)?(sb=!0,jc=T.createStream(34962,Y),gb=jc.dtype):(jc=T.getBuffer(Y))?gb=jc.dtype:"constant"in Y?(La=2,"number"===typeof Y.constant?(mb=Y.constant,Ya=vb=Na=0):(mb=0<Y.constant.length?Y.constant[0]:0,Ya=1<Y.constant.length?Y.constant[1]:0,vb=2<Y.constant.length?Y.constant[2]:0,Na=3<Y.constant.length?Y.constant[3]:0)):(jc=qa(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),gb="type"in Y?Ia[Y.type]:jc.dtype,qb=!!Y.normalized,
tb=Y.size|0,Ja=Y.offset|0,eb=Y.stride|0,jb=Y.divisor|0);ub=H.location;Pa=J[ub];if(1===La){Pa.buffer||R.enableVertexAttribArray(ub);Dc=tb||4;if(Pa.type!==gb||Pa.size!==Dc||Pa.buffer!==jc||Pa.normalized!==qb||Pa.offset!==Ja||Pa.stride!==eb)R.bindBuffer(34962,jc.buffer),R.vertexAttribPointer(ub,Dc,gb,qb,eb,Ja),Pa.type=gb,Pa.size=Dc,Pa.buffer=jc,Pa.normalized=qb,Pa.offset=Ja,Pa.stride=eb;Pa.divisor!==jb&&(L.vertexAttribDivisorANGLE(ub,jb),Pa.divisor=jb)}else if(Pa.buffer&&(R.disableVertexAttribArray(ub),
Pa.buffer=null),Pa.x!==mb||Pa.y!==Ya||Pa.z!==vb||Pa.w!==Na)R.vertexAttrib4f(ub,mb,Ya,vb,Na),Pa.x=mb,Pa.y=Ya,Pa.z=vb,Pa.w=Na;Wa=U.location;Jb=J[Wa];Jb.buffer||R.enableVertexAttribArray(Wa);if(5126!==Jb.type||1!==Jb.size||Jb.buffer!==p||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)R.bindBuffer(34962,p.buffer),R.vertexAttribPointer(Wa,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=p,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(L.vertexAttribDivisorANGLE(Wa,0),Jb.divisor=0);Db=I.location;
Ma=J[Db];Ma.buffer||R.enableVertexAttribArray(Db);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==n||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)R.bindBuffer(34962,n.buffer),R.vertexAttribPointer(Db,1,5126,!1,8,4),Ma.type=5126,Ma.size=1,Ma.buffer=n,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(L.vertexAttribDivisorANGLE(Db,0),Ma.divisor=0);zd=c.scale;R.uniform2f(D.location,zd[0],zd[1]);$a=c.scaleFract;R.uniform2f(ma.location,$a[0],$a[1]);Kb=c.translate;R.uniform2f(ca.location,Kb[0],Kb[1]);
Lb=c.translateFract;R.uniform2f(M.location,Lb[0],Lb[1]);R.uniform1f(t.location,c.thickness);R.uniform1f(A.location,c.depth);ob=b.call(this,X,c,0);R.uniform4f(fa.location,ob[0],ob[1],ob[2],ob[3]);R.uniform1f(r.location,c.dashLength);R.uniform1f(G.location,c.opacity);(Oa=c.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);ac=Oa._texture;R.uniform1i(F.location,ac.bind());(Sa=P.elements)?R.bindBuffer(34963,Sa.buffer.buffer):da.currentVAO&&(Sa=N.getElements(da.currentVAO.elements))&&R.bindBuffer(34963,
Sa.buffer.buffer);wb=c.count;0<wb?Sa?L.drawElementsInstancedANGLE(5,4,Sa.type,0<<(Sa.type-5121>>1),wb):L.drawArraysInstancedANGLE(5,0,4,wb):0>wb&&(Sa?R.drawElements(5,4,Sa.type,0<<(Sa.type-5121>>1)):R.drawArrays(5,0,4));S.dirty=!0;da.setVAO(null);X.viewportWidth=m;X.viewportHeight=q;K&&(d.cpuTime+=performance.now()-W);V&&T.destroyStream(ia);td&&T.destroyStream(Oc);hd&&T.destroyStream(cd);Xa&&T.destroyStream(Jc);sb&&T.destroyStream(jc);ac.unbind()},scope:function(b,a,t){var v,w,u,h,B,x,C,E,ea,O,la,
A,Ka,sa,H,F,wa,Qa,D,I,N,Hb,Da,ba,Z,G,r,R,ua,Q,M,da,ka,ga,Va,za,U,ca,pa,Ea,Ca,J,ma,Gb,na,fa,ya,Ra,Aa,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,
ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se;v=b.viewport;w=v.x|0;u=v.y|0;h="width"in v?v.width|0:X.framebufferWidth-w;B="height"in v?v.height|0:X.framebufferHeight-u;x=X.viewportWidth;X.viewportWidth=h;C=X.viewportHeight;X.viewportHeight=B;E=W[0];W[0]=w;ea=W[1];W[1]=u;O=W[2];W[2]=h;la=W[3];W[3]=B;A=V[0];V[0]=0;Ka=V[1];V[1]=0;sa=V[2];V[2]=0;H=V[3];V[3]=0;F=oa.blend_enable;oa.blend_enable=!0;wa=ia[0];ia[0]=32774;Qa=ia[1];ia[1]=32774;
D=va[0];va[0]=770;I=va[1];va[1]=771;N=va[2];va[2]=773;Hb=va[3];va[3]=1;Da=f.call(this,X,b,t);ba=oa.depth_enable;oa.depth_enable=Da;Z=b.viewport;G=Z.x|0;r=Z.y|0;R="width"in Z?Z.width|0:X.framebufferWidth-G;ua="height"in Z?Z.height|0:X.framebufferHeight-r;Q=ha[0];ha[0]=G;M=ha[1];ha[1]=r;da=ha[2];ha[2]=R;ka=ha[3];ha[3]=ua;ga=oa.scissor_enable;oa.scissor_enable=!0;Va=oa.stencil_enable;oa.stencil_enable=!1;if(za=S.profile)U=performance.now(),d.count++;ca=P.offset;P.offset=0;pa=P.count;P.count=4;Ea=b.count;
Ca=P.instances;P.instances=Ea;J=P.primitive;P.primitive=5;ma=b.dashLength;Gb=L[23];L[23]=ma;na=b.dashTexture;fa=L[24];L[24]=na;ya=b.depth;Ra=L[22];L[22]=ya;Aa=b.id;Ec=L[31];L[31]=Aa;fc=b.miterLimit;Ic=L[32];L[32]=fc;pc=c.call(this,X,b,t);rc=L[33];L[33]=pc;nc=b.opacity;qc=L[10];L[10]=nc;nb=X.pixelRatio;Wc=L[34];L[34]=nb;Zb=b.scale;hb=L[6];L[6]=Zb;Mb=b.scaleFract;bb=L[7];L[7]=Mb;kb=b.thickness;Xa=L[21];L[21]=kb;Jc=b.translate;Nb=L[8];L[8]=Jc;Ib=b.translateFract;sc=L[9];L[9]=Ib;Ob=k.call(this,X,b,t);
lb=L[3];L[3]=Ob;ra.buffer=b.positionBuffer;Fb=!1;Cb=null;yb=0;ib=!1;Pb=$b=0;rb=1;Ta=0;Ub=5126;qb=jb=jc=sb=0;qa(ra)?(Fb=!0,Cb=T.createStream(34962,ra),Ub=Cb.dtype):(Cb=T.getBuffer(ra))?Ub=Cb.dtype:"constant"in ra?(rb=2,"number"===typeof ra.constant?(jc=ra.constant,jb=qb=sb=0):(jc=0<ra.constant.length?ra.constant[0]:0,jb=1<ra.constant.length?ra.constant[1]:0,qb=2<ra.constant.length?ra.constant[2]:0,sb=3<ra.constant.length?ra.constant[3]:0)):(Cb=qa(ra.buffer)?T.createStream(34962,ra.buffer):T.getBuffer(ra.buffer),
Ub="type"in ra?Ia[ra.type]:Cb.dtype,ib=!!ra.normalized,Pb=ra.size|0,$b=ra.offset|0,Ta=ra.stride|0,yb=ra.divisor|0);Ja=y.buffer;y.buffer=Cb;tb=y.divisor;y.divisor=yb;La=y.normalized;y.normalized=ib;eb=y.offset;y.offset=$b;gb=y.size;y.size=Pb;Na=y.state;y.state=rb;mb=y.stride;y.stride=Ta;Ya=y.type;y.type=Ub;vb=y.w;y.w=sb;ub=y.x;y.x=jc;Pa=y.y;y.y=jb;Dc=y.z;y.z=qb;xa.buffer=b.positionFractBuffer;Wa=!1;Jb=null;Db=0;Ma=!1;$a=zd=0;Kb=1;Lb=0;ob=5126;wb=Sa=ac=Oa=0;qa(xa)?(Wa=!0,Jb=T.createStream(34962,xa),
ob=Jb.dtype):(Jb=T.getBuffer(xa))?ob=Jb.dtype:"constant"in xa?(Kb=2,"number"===typeof xa.constant?(ac=xa.constant,Sa=wb=Oa=0):(ac=0<xa.constant.length?xa.constant[0]:0,Sa=1<xa.constant.length?xa.constant[1]:0,wb=2<xa.constant.length?xa.constant[2]:0,Oa=3<xa.constant.length?xa.constant[3]:0)):(Jb=qa(xa.buffer)?T.createStream(34962,xa.buffer):T.getBuffer(xa.buffer),ob="type"in xa?Ia[xa.type]:Jb.dtype,Ma=!!xa.normalized,$a=xa.size|0,zd=xa.offset|0,Lb=xa.stride|0,Db=xa.divisor|0);xb=z.buffer;z.buffer=
Jb;Ua=z.divisor;z.divisor=Db;pb=z.normalized;z.normalized=Ma;gc=z.offset;z.offset=zd;Bc=z.size;z.size=$a;wc=z.state;z.state=Kb;cb=z.stride;z.stride=Lb;kc=z.type;z.type=ob;Mc=z.w;z.w=Oa;Za=z.x;z.x=ac;nd=z.y;z.y=Sa;Ab=z.z;z.z=wb;Ba.buffer=b.positionBuffer;ab=!1;Wb=null;uc=0;Xb=!1;Nc=Qb=0;Rb=1;Od=0;Fc=5126;vd=Yc=Pc=sd=0;qa(Ba)?(ab=!0,Wb=T.createStream(34962,Ba),Fc=Wb.dtype):(Wb=T.getBuffer(Ba))?Fc=Wb.dtype:"constant"in Ba?(Rb=2,"number"===typeof Ba.constant?(Pc=Ba.constant,Yc=vd=sd=0):(Pc=0<Ba.constant.length?
Ba.constant[0]:0,Yc=1<Ba.constant.length?Ba.constant[1]:0,vd=2<Ba.constant.length?Ba.constant[2]:0,sd=3<Ba.constant.length?Ba.constant[3]:0)):(Wb=qa(Ba.buffer)?T.createStream(34962,Ba.buffer):T.getBuffer(Ba.buffer),Fc="type"in Ba?Ia[Ba.type]:Wb.dtype,Xb=!!Ba.normalized,Nc=Ba.size|0,Qb=Ba.offset|0,Od=Ba.stride|0,uc=Ba.divisor|0);oc=e.buffer;e.buffer=Wb;xc=e.divisor;e.divisor=uc;hc=e.normalized;e.normalized=Xb;db=e.offset;e.offset=Qb;tc=e.size;e.size=Nc;Tb=e.state;e.state=Rb;Yb=e.stride;e.stride=Od;
ec=e.type;e.type=Fc;ic=e.w;e.w=sd;zc=e.x;e.x=Pc;Cc=e.y;e.y=Yc;dd=e.z;e.z=vd;ja.buffer=b.positionFractBuffer;Sc=!1;Tc=null;Uc=0;Zc=!1;ed=od=0;$c=1;lc=0;dc=5126;Ac=fd=Xc=ad=0;qa(ja)?(Sc=!0,Tc=T.createStream(34962,ja),dc=Tc.dtype):(Tc=T.getBuffer(ja))?dc=Tc.dtype:"constant"in ja?($c=2,"number"===typeof ja.constant?(Xc=ja.constant,fd=Ac=ad=0):(Xc=0<ja.constant.length?ja.constant[0]:0,fd=1<ja.constant.length?ja.constant[1]:0,Ac=2<ja.constant.length?ja.constant[2]:0,ad=3<ja.constant.length?ja.constant[3]:
0)):(Tc=qa(ja.buffer)?T.createStream(34962,ja.buffer):T.getBuffer(ja.buffer),dc="type"in ja?Ia[ja.type]:Tc.dtype,Zc=!!ja.normalized,ed=ja.size|0,od=ja.offset|0,lc=ja.stride|0,Uc=ja.divisor|0);jd=l.buffer;l.buffer=Tc;Dd=l.divisor;l.divisor=Uc;ze=l.normalized;l.normalized=Zc;xd=l.offset;l.offset=od;kd=l.size;l.size=ed;Fe=l.state;l.state=$c;Td=l.stride;l.stride=lc;he=l.type;l.type=dc;ae=l.w;l.w=ad;Ud=l.x;l.x=Xc;Nd=l.y;l.y=fd;Kd=l.z;l.z=Ac;Y.buffer=b.colorBuffer;qd=!1;Vc=null;wd=0;ud=!1;yd=ld=0;Fd=1;
Hd=0;ke=5126;le=oe=ue=ne=0;qa(Y)?(qd=!0,Vc=T.createStream(34962,Y),ke=Vc.dtype):(Vc=T.getBuffer(Y))?ke=Vc.dtype:"constant"in Y?(Fd=2,"number"===typeof Y.constant?(ue=Y.constant,oe=le=ne=0):(ue=0<Y.constant.length?Y.constant[0]:0,oe=1<Y.constant.length?Y.constant[1]:0,le=2<Y.constant.length?Y.constant[2]:0,ne=3<Y.constant.length?Y.constant[3]:0)):(Vc=qa(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),ke="type"in Y?Ia[Y.type]:Vc.dtype,ud=!!Y.normalized,yd=Y.size|0,ld=Y.offset|0,Hd=Y.stride|
0,wd=Y.divisor|0);ie=g.buffer;g.buffer=Vc;ve=g.divisor;g.divisor=wd;fe=g.normalized;g.normalized=ud;pe=g.offset;g.offset=ld;Qc=g.size;g.size=yd;id=g.state;g.state=Fd;we=g.stride;g.stride=Hd;se=g.type;g.type=ke;Qd=g.w;g.w=ne;Vd=g.x;g.x=ue;Wd=g.y;g.y=oe;Xd=g.z;g.z=le;qe=q.buffer;q.buffer=p;Ce=q.divisor;q.divisor=0;Ge=q.normalized;q.normalized=!1;te=q.offset;q.offset=0;Ve=q.size;q.size=0;We=q.state;q.state=1;Re=q.stride;q.stride=8;xe=q.type;q.type=5126;Je=q.w;q.w=0;Le=q.x;q.x=0;Me=q.y;q.y=0;Ne=q.z;q.z=
0;Ke=m.buffer;m.buffer=n;Rd=m.divisor;m.divisor=0;be=m.normalized;m.normalized=!1;ee=m.offset;m.offset=4;ge=m.size;m.size=0;Oe=m.state;m.state=1;Ld=m.stride;m.stride=8;Yd=m.type;m.type=5126;He=m.w;m.w=0;Pe=m.x;m.x=0;df=m.y;m.y=0;cf=m.z;m.z=0;Xe=K.vert;K.vert=20;Se=K.frag;K.frag=19;S.dirty=!0;a(X,b,t);X.viewportWidth=x;X.viewportHeight=C;W[0]=E;W[1]=ea;W[2]=O;W[3]=la;V[0]=A;V[1]=Ka;V[2]=sa;V[3]=H;oa.blend_enable=F;ia[0]=wa;ia[1]=Qa;va[0]=D;va[1]=I;va[2]=N;va[3]=Hb;oa.depth_enable=ba;ha[0]=Q;ha[1]=
M;ha[2]=da;ha[3]=ka;oa.scissor_enable=ga;oa.stencil_enable=Va;za&&(d.cpuTime+=performance.now()-U);P.offset=ca;P.count=pa;P.instances=Ca;P.primitive=J;L[23]=Gb;L[24]=fa;L[22]=Ra;L[31]=Ec;L[32]=Ic;L[33]=rc;L[10]=qc;L[34]=Wc;L[6]=hb;L[7]=bb;L[21]=Xa;L[8]=Nb;L[9]=sc;L[3]=lb;Fb&&T.destroyStream(Cb);y.buffer=Ja;y.divisor=tb;y.normalized=La;y.offset=eb;y.size=gb;y.state=Na;y.stride=mb;y.type=Ya;y.w=vb;y.x=ub;y.y=Pa;y.z=Dc;Wa&&T.destroyStream(Jb);z.buffer=xb;z.divisor=Ua;z.normalized=pb;z.offset=gc;z.size=
Bc;z.state=wc;z.stride=cb;z.type=kc;z.w=Mc;z.x=Za;z.y=nd;z.z=Ab;ab&&T.destroyStream(Wb);e.buffer=oc;e.divisor=xc;e.normalized=hc;e.offset=db;e.size=tc;e.state=Tb;e.stride=Yb;e.type=ec;e.w=ic;e.x=zc;e.y=Cc;e.z=dd;Sc&&T.destroyStream(Tc);l.buffer=jd;l.divisor=Dd;l.normalized=ze;l.offset=xd;l.size=kd;l.state=Fe;l.stride=Td;l.type=he;l.w=ae;l.x=Ud;l.y=Nd;l.z=Kd;qd&&T.destroyStream(Vc);g.buffer=ie;g.divisor=ve;g.normalized=fe;g.offset=pe;g.size=Qc;g.state=id;g.stride=we;g.type=se;g.w=Qd;g.x=Vd;g.y=Wd;
g.z=Xd;q.buffer=qe;q.divisor=Ce;q.normalized=Ge;q.offset=te;q.size=Ve;q.state=We;q.stride=Re;q.type=xe;q.w=Je;q.x=Le;q.y=Me;q.z=Ne;m.buffer=Ke;m.divisor=Rd;m.normalized=be;m.offset=ee;m.size=ge;m.state=Oe;m.stride=Ld;m.type=Yd;m.w=He;m.x=Pe;m.y=df;m.z=cf;K.vert=Xe;K.frag=Se;S.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,
la,x,E,Da,H,r,F,A,U,I,G,D,J,t,ca,M,fa,Aa,T,X,S){var P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,xa,Ba,ja,Y,ta,Fa,Ha,fb,aa;P=a.attributes;N=a.buffer;O=a.context;Q=a.current;R=a.draw;qa=a.elements;oa=a.extensions;K=a.framebuffer;L=a.gl;da=a.isBufferArgs;V=a.next;na=a.shader;ia=a.uniforms;ya=a.vao;va=V.blend_color;ba=Q.blend_color;Ca=V.blend_equation;ka=Q.blend_equation;pa=V.blend_func;za=Q.blend_func;Qa=V.colorMask;Ka=Q.colorMask;Hb=V.depth_range;
Va=Q.depth_range;ha=V.polygonOffset_offset;ea=Q.polygonOffset_offset;sa=V.sample_coverage;ua=Q.sample_coverage;Ea=V.scissor_box;Ra=Q.scissor_box;Gb=V.stencil_func;Z=Q.stencil_func;W=V.stencil_opBack;wa=Q.stencil_opBack;Ia=V.stencil_opFront;ra=Q.stencil_opFront;xa=V.viewport;Ba=Q.viewport;ja={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};Fa={divisor:1,offset:4,stride:4};Ha={divisor:1,offset:16,
stride:8};fb={divisor:1,offset:24,stride:8};aa={divisor:1,offset:0,stride:8};return{batch:function(c,e){var b,a,l,k,f,g;b=K.next;b!==K.cur&&(b?L.bindFramebuffer(36160,b.framebuffer):L.bindFramebuffer(36160,null),K.cur=b);if(Q.dirty){var m,q,v,w,u,h,z,y,C,xa,ia,va,pa,Ea,Ca,na,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb;m=V.dither;m!==Q.dither&&(m?L.enable(3024):L.disable(3024),Q.dither=m);q=V.depth_func;q!==Q.depth_func&&(L.depthFunc(q),Q.depth_func=q);v=Hb[0];w=Hb[1];if(v!==Va[0]||w!==Va[1])L.depthRange(v,
w),Va[0]=v,Va[1]=w;u=V.depth_mask;u!==Q.depth_mask&&(L.depthMask(u),Q.depth_mask=u);h=Qa[0];z=Qa[1];y=Qa[2];C=Qa[3];if(h!==Ka[0]||z!==Ka[1]||y!==Ka[2]||C!==Ka[3])L.colorMask(h,z,y,C),Ka[0]=h,Ka[1]=z,Ka[2]=y,Ka[3]=C;xa=V.frontFace;xa!==Q.frontFace&&(L.frontFace(xa),Q.frontFace=xa);ia=V.lineWidth;ia!==Q.lineWidth&&(L.lineWidth(ia),Q.lineWidth=ia);va=V.polygonOffset_enable;va!==Q.polygonOffset_enable&&(va?L.enable(32823):L.disable(32823),Q.polygonOffset_enable=va);pa=ha[0];Ea=ha[1];if(pa!==ea[0]||Ea!==
ea[1])L.polygonOffset(pa,Ea),ea[0]=pa,ea[1]=Ea;Ca=V.sample_alpha;Ca!==Q.sample_alpha&&(Ca?L.enable(32926):L.disable(32926),Q.sample_alpha=Ca);na=V.sample_enable;na!==Q.sample_enable&&(na?L.enable(32928):L.disable(32928),Q.sample_enable=na);ce=sa[0];Md=sa[1];if(ce!==ua[0]||Md!==ua[1])L.sampleCoverage(ce,Md),ua[0]=ce,ua[1]=Md;Ed=V.stencil_mask;Ed!==Q.stencil_mask&&(L.stencilMask(Ed),Q.stencil_mask=Ed);pd=Gb[0];bd=Gb[1];td=Gb[2];if(pd!==Z[0]||bd!==Z[1]||td!==Z[2])L.stencilFunc(pd,bd,td),Z[0]=pd,Z[1]=
bd,Z[2]=td;Oc=Ia[0];rd=Ia[1];Gc=Ia[2];gd=Ia[3];if(Oc!==ra[0]||rd!==ra[1]||Gc!==ra[2]||gd!==ra[3])L.stencilOpSeparate(Oc,rd,Gc,gd),ra[0]=Oc,ra[1]=rd,ra[2]=Gc,ra[3]=gd;Rc=W[0];md=W[1];Vb=W[2];Eb=W[3];if(Rc!==wa[0]||md!==wa[1]||Vb!==wa[2]||Eb!==wa[3])L.stencilOpSeparate(Rc,md,Vb,Eb),wa[0]=Rc,wa[1]=md,wa[2]=Vb,wa[3]=Eb}L.blendColor(0,0,0,0);ba[0]=0;ba[1]=0;ba[2]=0;ba[3]=0;L.enable(3042);Q.blend_enable=!0;L.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;L.blendFuncSeparate(770,771,773,1);za[0]=
770;za[1]=771;za[2]=773;za[3]=1;L.enable(2884);Q.cull_enable=!0;L.cullFace(1029);Q.cull_face=1029;L.enable(3089);Q.scissor_enable=!0;L.disable(2960);Q.stencil_enable=!1;if(a=Q.profile)l=performance.now(),d.count+=e;L.useProgram(B.program);k=oa.angle_instanced_arrays;var vc,zb,yc,Bb,Lc;ya.setVAO(null);vc=G.location;zb=P[vc];zb.buffer||L.enableVertexAttribArray(vc);if(5126!==zb.type||1!==zb.size||zb.buffer!==p||!1!==zb.normalized||0!==zb.offset||8!==zb.stride)L.bindBuffer(34962,p.buffer),L.vertexAttribPointer(vc,
1,5126,!1,8,0),zb.type=5126,zb.size=1,zb.buffer=p,zb.normalized=!1,zb.offset=0,zb.stride=8;0!==zb.divisor&&(k.vertexAttribDivisorANGLE(vc,0),zb.divisor=0);yc=D.location;Bb=P[yc];Bb.buffer||L.enableVertexAttribArray(yc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==n||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)L.bindBuffer(34962,n.buffer),L.vertexAttribPointer(yc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=n,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&(k.vertexAttribDivisorANGLE(yc,
0),Bb.divisor=0);(Lc=R.elements)?L.bindBuffer(34963,Lc.buffer.buffer):ya.currentVAO&&(Lc=qa.getElements(ya.currentVAO.elements))&&L.bindBuffer(34963,Lc.buffer.buffer);for(f=0;f<e;++f){g=c[f];var mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,
Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc;mc=g.viewport;Hc=mc.x|0;hd=mc.y|0;cd="width"in mc?mc.width|0:O.framebufferWidth-Hc;Ec="height"in mc?mc.height|0:O.framebufferHeight-hd;fc=O.viewportWidth;O.viewportWidth=cd;Ic=O.viewportHeight;O.viewportHeight=Ec;L.viewport(Hc,hd,cd,Ec);Ba[0]=Hc;Ba[1]=hd;Ba[2]=cd;Ba[3]=Ec;(pc=la.call(this,O,g,f))?L.enable(2929):L.disable(2929);Q.depth_enable=pc;rc=g.viewport;nc=rc.x|0;qc=rc.y|
0;nb="width"in rc?rc.width|0:O.framebufferWidth-nc;Wc="height"in rc?rc.height|0:O.framebufferHeight-qc;L.scissor(nc,qc,nb,Wc);Ra[0]=nc;Ra[1]=qc;Ra[2]=nb;Ra[3]=Wc;ta.buffer=g.positionBuffer;Zb=!1;hb=null;Mb=0;bb=!1;Xa=kb=0;Jc=1;Nb=0;Ib=5126;Fb=lb=Ob=sc=0;da(ta)?(Zb=!0,hb=N.createStream(34962,ta),Ib=hb.dtype):(hb=N.getBuffer(ta))?Ib=hb.dtype:"constant"in ta?(Jc=2,"number"===typeof ta.constant?(Ob=ta.constant,lb=Fb=sc=0):(Ob=0<ta.constant.length?ta.constant[0]:0,lb=1<ta.constant.length?ta.constant[1]:
0,Fb=2<ta.constant.length?ta.constant[2]:0,sc=3<ta.constant.length?ta.constant[3]:0)):(hb=da(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),Ib="type"in ta?ja[ta.type]:hb.dtype,bb=!!ta.normalized,Xa=ta.size|0,kb=ta.offset|0,Nb=ta.stride|0,Mb=ta.divisor|0);Cb=H.location;yb=P[Cb];if(1===Jc){yb.buffer||L.enableVertexAttribArray(Cb);ib=Xa||2;if(yb.type!==Ib||yb.size!==ib||yb.buffer!==hb||yb.normalized!==bb||yb.offset!==kb||yb.stride!==Nb)L.bindBuffer(34962,hb.buffer),L.vertexAttribPointer(Cb,
ib,Ib,bb,Nb,kb),yb.type=Ib,yb.size=ib,yb.buffer=hb,yb.normalized=bb,yb.offset=kb,yb.stride=Nb;yb.divisor!==Mb&&(k.vertexAttribDivisorANGLE(Cb,Mb),yb.divisor=Mb)}else if(yb.buffer&&(L.disableVertexAttribArray(Cb),yb.buffer=null),yb.x!==Ob||yb.y!==lb||yb.z!==Fb||yb.w!==sc)L.vertexAttrib4f(Cb,Ob,lb,Fb,sc),yb.x=Ob,yb.y=lb,yb.z=Fb,yb.w=sc;Ha.buffer=g.positionBuffer;$b=!1;Pb=null;rb=0;Ta=!1;sb=Ub=0;jc=1;jb=0;qb=5126;eb=La=tb=Ja=0;da(Ha)?($b=!0,Pb=N.createStream(34962,Ha),qb=Pb.dtype):(Pb=N.getBuffer(Ha))?
qb=Pb.dtype:"constant"in Ha?(jc=2,"number"===typeof Ha.constant?(tb=Ha.constant,La=eb=Ja=0):(tb=0<Ha.constant.length?Ha.constant[0]:0,La=1<Ha.constant.length?Ha.constant[1]:0,eb=2<Ha.constant.length?Ha.constant[2]:0,Ja=3<Ha.constant.length?Ha.constant[3]:0)):(Pb=da(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),qb="type"in Ha?ja[Ha.type]:Pb.dtype,Ta=!!Ha.normalized,sb=Ha.size|0,Ub=Ha.offset|0,jb=Ha.stride|0,rb=Ha.divisor|0);gb=F.location;Na=P[gb];if(1===jc){Na.buffer||L.enableVertexAttribArray(gb);
mb=sb||2;if(Na.type!==qb||Na.size!==mb||Na.buffer!==Pb||Na.normalized!==Ta||Na.offset!==Ub||Na.stride!==jb)L.bindBuffer(34962,Pb.buffer),L.vertexAttribPointer(gb,mb,qb,Ta,jb,Ub),Na.type=qb,Na.size=mb,Na.buffer=Pb,Na.normalized=Ta,Na.offset=Ub,Na.stride=jb;Na.divisor!==rb&&(k.vertexAttribDivisorANGLE(gb,rb),Na.divisor=rb)}else if(Na.buffer&&(L.disableVertexAttribArray(gb),Na.buffer=null),Na.x!==tb||Na.y!==La||Na.z!==eb||Na.w!==Ja)L.vertexAttrib4f(gb,tb,La,eb,Ja),Na.x=tb,Na.y=La,Na.z=eb,Na.w=Ja;fb.buffer=
g.positionBuffer;Ya=!1;vb=null;ub=0;Pa=!1;Wa=Dc=0;Jb=1;Db=0;Ma=5126;Lb=Kb=$a=zd=0;da(fb)?(Ya=!0,vb=N.createStream(34962,fb),Ma=vb.dtype):(vb=N.getBuffer(fb))?Ma=vb.dtype:"constant"in fb?(Jb=2,"number"===typeof fb.constant?($a=fb.constant,Kb=Lb=zd=0):($a=0<fb.constant.length?fb.constant[0]:0,Kb=1<fb.constant.length?fb.constant[1]:0,Lb=2<fb.constant.length?fb.constant[2]:0,zd=3<fb.constant.length?fb.constant[3]:0)):(vb=da(fb.buffer)?N.createStream(34962,fb.buffer):N.getBuffer(fb.buffer),Ma="type"in
fb?ja[fb.type]:vb.dtype,Pa=!!fb.normalized,Wa=fb.size|0,Dc=fb.offset|0,Db=fb.stride|0,ub=fb.divisor|0);ob=ca.location;Oa=P[ob];if(1===Jb){Oa.buffer||L.enableVertexAttribArray(ob);ac=Wa||2;if(Oa.type!==Ma||Oa.size!==ac||Oa.buffer!==vb||Oa.normalized!==Pa||Oa.offset!==Dc||Oa.stride!==Db)L.bindBuffer(34962,vb.buffer),L.vertexAttribPointer(ob,ac,Ma,Pa,Db,Dc),Oa.type=Ma,Oa.size=ac,Oa.buffer=vb,Oa.normalized=Pa,Oa.offset=Dc,Oa.stride=Db;Oa.divisor!==ub&&(k.vertexAttribDivisorANGLE(ob,ub),Oa.divisor=ub)}else if(Oa.buffer&&
(L.disableVertexAttribArray(ob),Oa.buffer=null),Oa.x!==$a||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==zd)L.vertexAttrib4f(ob,$a,Kb,Lb,zd),Oa.x=$a,Oa.y=Kb,Oa.z=Lb,Oa.w=zd;aa.buffer=g.positionBuffer;Sa=!1;wb=null;xb=0;Ua=!1;gc=pb=0;Bc=1;wc=0;cb=5126;nd=Za=Mc=kc=0;da(aa)?(Sa=!0,wb=N.createStream(34962,aa),cb=wb.dtype):(wb=N.getBuffer(aa))?cb=wb.dtype:"constant"in aa?(Bc=2,"number"===typeof aa.constant?(Mc=aa.constant,Za=nd=kc=0):(Mc=0<aa.constant.length?aa.constant[0]:0,Za=1<aa.constant.length?aa.constant[1]:0,nd=
2<aa.constant.length?aa.constant[2]:0,kc=3<aa.constant.length?aa.constant[3]:0)):(wb=da(aa.buffer)?N.createStream(34962,aa.buffer):N.getBuffer(aa.buffer),cb="type"in aa?ja[aa.type]:wb.dtype,Ua=!!aa.normalized,gc=aa.size|0,pb=aa.offset|0,wc=aa.stride|0,xb=aa.divisor|0);Ab=fa.location;ab=P[Ab];if(1===Bc){ab.buffer||L.enableVertexAttribArray(Ab);Wb=gc||2;if(ab.type!==cb||ab.size!==Wb||ab.buffer!==wb||ab.normalized!==Ua||ab.offset!==pb||ab.stride!==wc)L.bindBuffer(34962,wb.buffer),L.vertexAttribPointer(Ab,
Wb,cb,Ua,wc,pb),ab.type=cb,ab.size=Wb,ab.buffer=wb,ab.normalized=Ua,ab.offset=pb,ab.stride=wc;ab.divisor!==xb&&(k.vertexAttribDivisorANGLE(Ab,xb),ab.divisor=xb)}else if(ab.buffer&&(L.disableVertexAttribArray(Ab),ab.buffer=null),ab.x!==Mc||ab.y!==Za||ab.z!==nd||ab.w!==kc)L.vertexAttrib4f(Ab,Mc,Za,nd,kc),ab.x=Mc,ab.y=Za,ab.z=nd,ab.w=kc;Y.buffer=g.colorBuffer;uc=!1;Xb=null;Qb=0;Nc=!1;Od=Rb=0;Fc=1;sd=0;Pc=5126;xc=oc=vd=Yc=0;da(Y)?(uc=!0,Xb=N.createStream(34962,Y),Pc=Xb.dtype):(Xb=N.getBuffer(Y))?Pc=Xb.dtype:
"constant"in Y?(Fc=2,"number"===typeof Y.constant?(vd=Y.constant,oc=xc=Yc=0):(vd=0<Y.constant.length?Y.constant[0]:0,oc=1<Y.constant.length?Y.constant[1]:0,xc=2<Y.constant.length?Y.constant[2]:0,Yc=3<Y.constant.length?Y.constant[3]:0)):(Xb=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),Pc="type"in Y?ja[Y.type]:Xb.dtype,Nc=!!Y.normalized,Od=Y.size|0,Rb=Y.offset|0,sd=Y.stride|0,Qb=Y.divisor|0);hc=Da.location;db=P[hc];if(1===Fc){db.buffer||L.enableVertexAttribArray(hc);tc=Od||4;if(db.type!==
Pc||db.size!==tc||db.buffer!==Xb||db.normalized!==Nc||db.offset!==Rb||db.stride!==sd)L.bindBuffer(34962,Xb.buffer),L.vertexAttribPointer(hc,tc,Pc,Nc,sd,Rb),db.type=Pc,db.size=tc,db.buffer=Xb,db.normalized=Nc,db.offset=Rb,db.stride=sd;db.divisor!==Qb&&(k.vertexAttribDivisorANGLE(hc,Qb),db.divisor=Qb)}else if(db.buffer&&(L.disableVertexAttribArray(hc),db.buffer=null),db.x!==vd||db.y!==oc||db.z!==xc||db.w!==Yc)L.vertexAttrib4f(hc,vd,oc,xc,Yc),db.x=vd,db.y=oc,db.z=xc,db.w=Yc;Fa.buffer=g.colorBuffer;Tb=
!1;Yb=null;ec=0;ic=!1;Cc=zc=0;dd=1;Sc=0;Tc=5126;ed=od=Zc=Uc=0;da(Fa)?(Tb=!0,Yb=N.createStream(34962,Fa),Tc=Yb.dtype):(Yb=N.getBuffer(Fa))?Tc=Yb.dtype:"constant"in Fa?(dd=2,"number"===typeof Fa.constant?(Zc=Fa.constant,od=ed=Uc=0):(Zc=0<Fa.constant.length?Fa.constant[0]:0,od=1<Fa.constant.length?Fa.constant[1]:0,ed=2<Fa.constant.length?Fa.constant[2]:0,Uc=3<Fa.constant.length?Fa.constant[3]:0)):(Yb=da(Fa.buffer)?N.createStream(34962,Fa.buffer):N.getBuffer(Fa.buffer),Tc="type"in Fa?ja[Fa.type]:Yb.dtype,
ic=!!Fa.normalized,Cc=Fa.size|0,zc=Fa.offset|0,Sc=Fa.stride|0,ec=Fa.divisor|0);$c=r.location;lc=P[$c];if(1===dd){lc.buffer||L.enableVertexAttribArray($c);dc=Cc||4;if(lc.type!==Tc||lc.size!==dc||lc.buffer!==Yb||lc.normalized!==ic||lc.offset!==zc||lc.stride!==Sc)L.bindBuffer(34962,Yb.buffer),L.vertexAttribPointer($c,dc,Tc,ic,Sc,zc),lc.type=Tc,lc.size=dc,lc.buffer=Yb,lc.normalized=ic,lc.offset=zc,lc.stride=Sc;lc.divisor!==ec&&(k.vertexAttribDivisorANGLE($c,ec),lc.divisor=ec)}else if(lc.buffer&&(L.disableVertexAttribArray($c),
lc.buffer=null),lc.x!==Zc||lc.y!==od||lc.z!==ed||lc.w!==Uc)L.vertexAttrib4f($c,Zc,od,ed,Uc),lc.x=Zc,lc.y=od,lc.z=ed,lc.w=Uc;ad=g.scale;Xc=ad[0];Ac=ad[1];f&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,L.uniform2f(Aa.location,Xc,Ac));Dd=g.translate;ze=Dd[0];kd=Dd[1];f&&xd===ze&&Fe===kd||(xd=ze,Fe=kd,L.uniform2f(X.location,ze,kd));Td=g.thickness;f&&he===Td||(he=Td,L.uniform1f(T.location,Td));ae=g.depth;f&&Ud===ae||(Ud=ae,L.uniform1f(I.location,ae));Nd=x.call(this,O,g,f);Kd=Nd[0];Vc=Nd[1];ud=Nd[2];yd=Nd[3];f&&qd===
Kd&&wd===Vc&&ld===ud&&Fd===yd||(qd=Kd,wd=Vc,ld=ud,Fd=yd,L.uniform4f(S.location,Kd,Vc,ud,yd));Hd=g.miterLimit;f&&ke===Hd||(ke=Hd,L.uniform1f(J.location,Hd));ne=E.call(this,O,g,f);f&&ue===ne||(ue=ne,L.uniform1f(t.location,ne));oe=g.dashLength;f&&le===oe||(le=oe,L.uniform1f(A.location,oe));ie=g.opacity;f&&ve===ie||(ve=ie,L.uniform1f(M.location,ie));(fe=g.dashTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);pe=fe._texture;L.uniform1i(U.location,pe.bind());Qc=g.count;0<Qc?Lc?k.drawElementsInstancedANGLE(5,
4,Lc.type,0<<(Lc.type-5121>>1),Qc):k.drawArraysInstancedANGLE(5,0,4,Qc):0>Qc&&(Lc?L.drawElements(5,4,Lc.type,0<<(Lc.type-5121>>1)):L.drawArrays(5,0,4));O.viewportWidth=fc;O.viewportHeight=Ic;Zb&&N.destroyStream(hb);$b&&N.destroyStream(Pb);Ya&&N.destroyStream(vb);Sa&&N.destroyStream(wb);uc&&N.destroyStream(Xb);Tb&&N.destroyStream(Yb);pe.unbind()}Q.dirty=!0;ya.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(c){var e,a,l,k,g,m,q,v,w,B,x,z,y,E,la,xa,ia,va,pa,Ea,Ca,na,me,ce,Md,Ed,pd,bd,
td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od;e=K.next;e!==K.cur&&(e?L.bindFramebuffer(36160,e.framebuffer):L.bindFramebuffer(36160,null),K.cur=e);if(Q.dirty){var Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac;Fc=
V.dither;Fc!==Q.dither&&(Fc?L.enable(3024):L.disable(3024),Q.dither=Fc);sd=V.depth_func;sd!==Q.depth_func&&(L.depthFunc(sd),Q.depth_func=sd);Pc=Hb[0];Yc=Hb[1];if(Pc!==Va[0]||Yc!==Va[1])L.depthRange(Pc,Yc),Va[0]=Pc,Va[1]=Yc;vd=V.depth_mask;vd!==Q.depth_mask&&(L.depthMask(vd),Q.depth_mask=vd);oc=Qa[0];xc=Qa[1];hc=Qa[2];db=Qa[3];if(oc!==Ka[0]||xc!==Ka[1]||hc!==Ka[2]||db!==Ka[3])L.colorMask(oc,xc,hc,db),Ka[0]=oc,Ka[1]=xc,Ka[2]=hc,Ka[3]=db;tc=V.frontFace;tc!==Q.frontFace&&(L.frontFace(tc),Q.frontFace=
tc);Tb=V.lineWidth;Tb!==Q.lineWidth&&(L.lineWidth(Tb),Q.lineWidth=Tb);Yb=V.polygonOffset_enable;Yb!==Q.polygonOffset_enable&&(Yb?L.enable(32823):L.disable(32823),Q.polygonOffset_enable=Yb);ec=ha[0];ic=ha[1];if(ec!==ea[0]||ic!==ea[1])L.polygonOffset(ec,ic),ea[0]=ec,ea[1]=ic;zc=V.sample_alpha;zc!==Q.sample_alpha&&(zc?L.enable(32926):L.disable(32926),Q.sample_alpha=zc);Cc=V.sample_enable;Cc!==Q.sample_enable&&(Cc?L.enable(32928):L.disable(32928),Q.sample_enable=Cc);dd=sa[0];Sc=sa[1];if(dd!==ua[0]||Sc!==
ua[1])L.sampleCoverage(dd,Sc),ua[0]=dd,ua[1]=Sc;Tc=V.stencil_mask;Tc!==Q.stencil_mask&&(L.stencilMask(Tc),Q.stencil_mask=Tc);Uc=Gb[0];Zc=Gb[1];od=Gb[2];if(Uc!==Z[0]||Zc!==Z[1]||od!==Z[2])L.stencilFunc(Uc,Zc,od),Z[0]=Uc,Z[1]=Zc,Z[2]=od;ed=Ia[0];$c=Ia[1];lc=Ia[2];dc=Ia[3];if(ed!==ra[0]||$c!==ra[1]||lc!==ra[2]||dc!==ra[3])L.stencilOpSeparate(ed,$c,lc,dc),ra[0]=ed,ra[1]=$c,ra[2]=lc,ra[3]=dc;ad=W[0];Xc=W[1];fd=W[2];Ac=W[3];if(ad!==wa[0]||Xc!==wa[1]||fd!==wa[2]||Ac!==wa[3])L.stencilOpSeparate(ad,Xc,fd,
Ac),wa[0]=ad,wa[1]=Xc,wa[2]=fd,wa[3]=Ac}a=c.viewport;l=a.x|0;k=a.y|0;g="width"in a?a.width|0:O.framebufferWidth-l;m="height"in a?a.height|0:O.framebufferHeight-k;q=O.viewportWidth;O.viewportWidth=g;v=O.viewportHeight;O.viewportHeight=m;L.viewport(l,k,g,m);Ba[0]=l;Ba[1]=k;Ba[2]=g;Ba[3]=m;L.blendColor(0,0,0,0);ba[0]=0;ba[1]=0;ba[2]=0;ba[3]=0;L.enable(3042);Q.blend_enable=!0;L.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;L.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;
za[3]=1;L.enable(2884);Q.cull_enable=!0;L.cullFace(1029);Q.cull_face=1029;(w=h.call(this,O,c,0))?L.enable(2929):L.disable(2929);Q.depth_enable=w;B=c.viewport;x=B.x|0;z=B.y|0;y="width"in B?B.width|0:O.framebufferWidth-x;E="height"in B?B.height|0:O.framebufferHeight-z;L.scissor(x,z,y,E);Ra[0]=x;Ra[1]=z;Ra[2]=y;Ra[3]=E;L.enable(3089);Q.scissor_enable=!0;L.disable(2960);Q.stencil_enable=!1;if(la=Q.profile)xa=performance.now(),d.count++;L.useProgram(u.program);ia=oa.angle_instanced_arrays;ya.setVAO(null);
ta.buffer=c.positionBuffer;va=!1;pa=null;Ea=0;Ca=!1;me=na=0;ce=1;Md=0;Ed=5126;Oc=td=bd=pd=0;da(ta)?(va=!0,pa=N.createStream(34962,ta),Ed=pa.dtype):(pa=N.getBuffer(ta))?Ed=pa.dtype:"constant"in ta?(ce=2,"number"===typeof ta.constant?(bd=ta.constant,td=Oc=pd=0):(bd=0<ta.constant.length?ta.constant[0]:0,td=1<ta.constant.length?ta.constant[1]:0,Oc=2<ta.constant.length?ta.constant[2]:0,pd=3<ta.constant.length?ta.constant[3]:0)):(pa=da(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),Ed=
"type"in ta?ja[ta.type]:pa.dtype,Ca=!!ta.normalized,me=ta.size|0,na=ta.offset|0,Md=ta.stride|0,Ea=ta.divisor|0);rd=H.location;Gc=P[rd];if(1===ce){Gc.buffer||L.enableVertexAttribArray(rd);gd=me||2;if(Gc.type!==Ed||Gc.size!==gd||Gc.buffer!==pa||Gc.normalized!==Ca||Gc.offset!==na||Gc.stride!==Md)L.bindBuffer(34962,pa.buffer),L.vertexAttribPointer(rd,gd,Ed,Ca,Md,na),Gc.type=Ed,Gc.size=gd,Gc.buffer=pa,Gc.normalized=Ca,Gc.offset=na,Gc.stride=Md;Gc.divisor!==Ea&&(ia.vertexAttribDivisorANGLE(rd,Ea),Gc.divisor=
Ea)}else if(Gc.buffer&&(L.disableVertexAttribArray(rd),Gc.buffer=null),Gc.x!==bd||Gc.y!==td||Gc.z!==Oc||Gc.w!==pd)L.vertexAttrib4f(rd,bd,td,Oc,pd),Gc.x=bd,Gc.y=td,Gc.z=Oc,Gc.w=pd;Ha.buffer=c.positionBuffer;Rc=!1;md=null;Vb=0;Eb=!1;zb=vc=0;yc=1;Bb=0;Lc=5126;cd=hd=Hc=mc=0;da(Ha)?(Rc=!0,md=N.createStream(34962,Ha),Lc=md.dtype):(md=N.getBuffer(Ha))?Lc=md.dtype:"constant"in Ha?(yc=2,"number"===typeof Ha.constant?(Hc=Ha.constant,hd=cd=mc=0):(Hc=0<Ha.constant.length?Ha.constant[0]:0,hd=1<Ha.constant.length?
Ha.constant[1]:0,cd=2<Ha.constant.length?Ha.constant[2]:0,mc=3<Ha.constant.length?Ha.constant[3]:0)):(md=da(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),Lc="type"in Ha?ja[Ha.type]:md.dtype,Eb=!!Ha.normalized,zb=Ha.size|0,vc=Ha.offset|0,Bb=Ha.stride|0,Vb=Ha.divisor|0);Ec=F.location;fc=P[Ec];if(1===yc){fc.buffer||L.enableVertexAttribArray(Ec);Ic=zb||2;if(fc.type!==Lc||fc.size!==Ic||fc.buffer!==md||fc.normalized!==Eb||fc.offset!==vc||fc.stride!==Bb)L.bindBuffer(34962,md.buffer),
L.vertexAttribPointer(Ec,Ic,Lc,Eb,Bb,vc),fc.type=Lc,fc.size=Ic,fc.buffer=md,fc.normalized=Eb,fc.offset=vc,fc.stride=Bb;fc.divisor!==Vb&&(ia.vertexAttribDivisorANGLE(Ec,Vb),fc.divisor=Vb)}else if(fc.buffer&&(L.disableVertexAttribArray(Ec),fc.buffer=null),fc.x!==Hc||fc.y!==hd||fc.z!==cd||fc.w!==mc)L.vertexAttrib4f(Ec,Hc,hd,cd,mc),fc.x=Hc,fc.y=hd,fc.z=cd,fc.w=mc;fb.buffer=c.positionBuffer;pc=!1;rc=null;nc=0;qc=!1;Wc=nb=0;Zb=1;hb=0;Mb=5126;Jc=Xa=kb=bb=0;da(fb)?(pc=!0,rc=N.createStream(34962,fb),Mb=rc.dtype):
(rc=N.getBuffer(fb))?Mb=rc.dtype:"constant"in fb?(Zb=2,"number"===typeof fb.constant?(kb=fb.constant,Xa=Jc=bb=0):(kb=0<fb.constant.length?fb.constant[0]:0,Xa=1<fb.constant.length?fb.constant[1]:0,Jc=2<fb.constant.length?fb.constant[2]:0,bb=3<fb.constant.length?fb.constant[3]:0)):(rc=da(fb.buffer)?N.createStream(34962,fb.buffer):N.getBuffer(fb.buffer),Mb="type"in fb?ja[fb.type]:rc.dtype,qc=!!fb.normalized,Wc=fb.size|0,nb=fb.offset|0,hb=fb.stride|0,nc=fb.divisor|0);Nb=ca.location;Ib=P[Nb];if(1===Zb){Ib.buffer||
L.enableVertexAttribArray(Nb);sc=Wc||2;if(Ib.type!==Mb||Ib.size!==sc||Ib.buffer!==rc||Ib.normalized!==qc||Ib.offset!==nb||Ib.stride!==hb)L.bindBuffer(34962,rc.buffer),L.vertexAttribPointer(Nb,sc,Mb,qc,hb,nb),Ib.type=Mb,Ib.size=sc,Ib.buffer=rc,Ib.normalized=qc,Ib.offset=nb,Ib.stride=hb;Ib.divisor!==nc&&(ia.vertexAttribDivisorANGLE(Nb,nc),Ib.divisor=nc)}else if(Ib.buffer&&(L.disableVertexAttribArray(Nb),Ib.buffer=null),Ib.x!==kb||Ib.y!==Xa||Ib.z!==Jc||Ib.w!==bb)L.vertexAttrib4f(Nb,kb,Xa,Jc,bb),Ib.x=
kb,Ib.y=Xa,Ib.z=Jc,Ib.w=bb;aa.buffer=c.positionBuffer;Ob=!1;lb=null;Fb=0;Cb=!1;ib=yb=0;$b=1;Pb=0;rb=5126;jc=sb=Ub=Ta=0;da(aa)?(Ob=!0,lb=N.createStream(34962,aa),rb=lb.dtype):(lb=N.getBuffer(aa))?rb=lb.dtype:"constant"in aa?($b=2,"number"===typeof aa.constant?(Ub=aa.constant,sb=jc=Ta=0):(Ub=0<aa.constant.length?aa.constant[0]:0,sb=1<aa.constant.length?aa.constant[1]:0,jc=2<aa.constant.length?aa.constant[2]:0,Ta=3<aa.constant.length?aa.constant[3]:0)):(lb=da(aa.buffer)?N.createStream(34962,aa.buffer):
N.getBuffer(aa.buffer),rb="type"in aa?ja[aa.type]:lb.dtype,Cb=!!aa.normalized,ib=aa.size|0,yb=aa.offset|0,Pb=aa.stride|0,Fb=aa.divisor|0);jb=fa.location;qb=P[jb];if(1===$b){qb.buffer||L.enableVertexAttribArray(jb);Ja=ib||2;if(qb.type!==rb||qb.size!==Ja||qb.buffer!==lb||qb.normalized!==Cb||qb.offset!==yb||qb.stride!==Pb)L.bindBuffer(34962,lb.buffer),L.vertexAttribPointer(jb,Ja,rb,Cb,Pb,yb),qb.type=rb,qb.size=Ja,qb.buffer=lb,qb.normalized=Cb,qb.offset=yb,qb.stride=Pb;qb.divisor!==Fb&&(ia.vertexAttribDivisorANGLE(jb,
Fb),qb.divisor=Fb)}else if(qb.buffer&&(L.disableVertexAttribArray(jb),qb.buffer=null),qb.x!==Ub||qb.y!==sb||qb.z!==jc||qb.w!==Ta)L.vertexAttrib4f(jb,Ub,sb,jc,Ta),qb.x=Ub,qb.y=sb,qb.z=jc,qb.w=Ta;Y.buffer=c.colorBuffer;tb=!1;La=null;eb=0;gb=!1;mb=Na=0;Ya=1;vb=0;ub=5126;Jb=Wa=Dc=Pa=0;da(Y)?(tb=!0,La=N.createStream(34962,Y),ub=La.dtype):(La=N.getBuffer(Y))?ub=La.dtype:"constant"in Y?(Ya=2,"number"===typeof Y.constant?(Dc=Y.constant,Wa=Jb=Pa=0):(Dc=0<Y.constant.length?Y.constant[0]:0,Wa=1<Y.constant.length?
Y.constant[1]:0,Jb=2<Y.constant.length?Y.constant[2]:0,Pa=3<Y.constant.length?Y.constant[3]:0)):(La=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),ub="type"in Y?ja[Y.type]:La.dtype,gb=!!Y.normalized,mb=Y.size|0,Na=Y.offset|0,vb=Y.stride|0,eb=Y.divisor|0);Db=Da.location;Ma=P[Db];if(1===Ya){Ma.buffer||L.enableVertexAttribArray(Db);zd=mb||4;if(Ma.type!==ub||Ma.size!==zd||Ma.buffer!==La||Ma.normalized!==gb||Ma.offset!==Na||Ma.stride!==vb)L.bindBuffer(34962,La.buffer),L.vertexAttribPointer(Db,
zd,ub,gb,vb,Na),Ma.type=ub,Ma.size=zd,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=vb;Ma.divisor!==eb&&(ia.vertexAttribDivisorANGLE(Db,eb),Ma.divisor=eb)}else if(Ma.buffer&&(L.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Dc||Ma.y!==Wa||Ma.z!==Jb||Ma.w!==Pa)L.vertexAttrib4f(Db,Dc,Wa,Jb,Pa),Ma.x=Dc,Ma.y=Wa,Ma.z=Jb,Ma.w=Pa;Fa.buffer=c.colorBuffer;$a=!1;Kb=null;Lb=0;ob=!1;ac=Oa=0;Sa=1;wb=0;xb=5126;Bc=gc=pb=Ua=0;da(Fa)?($a=!0,Kb=N.createStream(34962,Fa),xb=Kb.dtype):(Kb=N.getBuffer(Fa))?
xb=Kb.dtype:"constant"in Fa?(Sa=2,"number"===typeof Fa.constant?(pb=Fa.constant,gc=Bc=Ua=0):(pb=0<Fa.constant.length?Fa.constant[0]:0,gc=1<Fa.constant.length?Fa.constant[1]:0,Bc=2<Fa.constant.length?Fa.constant[2]:0,Ua=3<Fa.constant.length?Fa.constant[3]:0)):(Kb=da(Fa.buffer)?N.createStream(34962,Fa.buffer):N.getBuffer(Fa.buffer),xb="type"in Fa?ja[Fa.type]:Kb.dtype,ob=!!Fa.normalized,ac=Fa.size|0,Oa=Fa.offset|0,wb=Fa.stride|0,Lb=Fa.divisor|0);wc=r.location;cb=P[wc];if(1===Sa){cb.buffer||L.enableVertexAttribArray(wc);
kc=ac||4;if(cb.type!==xb||cb.size!==kc||cb.buffer!==Kb||cb.normalized!==ob||cb.offset!==Oa||cb.stride!==wb)L.bindBuffer(34962,Kb.buffer),L.vertexAttribPointer(wc,kc,xb,ob,wb,Oa),cb.type=xb,cb.size=kc,cb.buffer=Kb,cb.normalized=ob,cb.offset=Oa,cb.stride=wb;cb.divisor!==Lb&&(ia.vertexAttribDivisorANGLE(wc,Lb),cb.divisor=Lb)}else if(cb.buffer&&(L.disableVertexAttribArray(wc),cb.buffer=null),cb.x!==pb||cb.y!==gc||cb.z!==Bc||cb.w!==Ua)L.vertexAttrib4f(wc,pb,gc,Bc,Ua),cb.x=pb,cb.y=gc,cb.z=Bc,cb.w=Ua;Mc=
G.location;Za=P[Mc];Za.buffer||L.enableVertexAttribArray(Mc);if(5126!==Za.type||1!==Za.size||Za.buffer!==p||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)L.bindBuffer(34962,p.buffer),L.vertexAttribPointer(Mc,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=p,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(ia.vertexAttribDivisorANGLE(Mc,0),Za.divisor=0);nd=D.location;Ab=P[nd];Ab.buffer||L.enableVertexAttribArray(nd);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==n||!1!==Ab.normalized||4!==
Ab.offset||8!==Ab.stride)L.bindBuffer(34962,n.buffer),L.vertexAttribPointer(nd,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=n,Ab.normalized=!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ia.vertexAttribDivisorANGLE(nd,0),Ab.divisor=0);ab=c.scale;L.uniform2f(Aa.location,ab[0],ab[1]);Wb=c.translate;L.uniform2f(X.location,Wb[0],Wb[1]);L.uniform1f(T.location,c.thickness);L.uniform1f(I.location,c.depth);uc=b.call(this,O,c,0);L.uniform4f(S.location,uc[0],uc[1],uc[2],uc[3]);L.uniform1f(J.location,c.miterLimit);
Xb=f.call(this,O,c,0);L.uniform1f(t.location,Xb);L.uniform1f(A.location,c.dashLength);L.uniform1f(M.location,c.opacity);(Qb=c.dashTexture)&&"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Nc=Qb._texture;L.uniform1i(U.location,Nc.bind());(Rb=R.elements)?L.bindBuffer(34963,Rb.buffer.buffer):ya.currentVAO&&(Rb=qa.getElements(ya.currentVAO.elements))&&L.bindBuffer(34963,Rb.buffer.buffer);Od=c.count;0<Od?Rb?ia.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),Od):ia.drawArraysInstancedANGLE(5,
0,4,Od):0>Od&&(Rb?L.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):L.drawArrays(5,0,4));Q.dirty=!0;ya.setVAO(null);O.viewportWidth=q;O.viewportHeight=v;la&&(d.cpuTime+=performance.now()-xa);va&&N.destroyStream(pa);Rc&&N.destroyStream(md);pc&&N.destroyStream(rc);Ob&&N.destroyStream(lb);tb&&N.destroyStream(La);$a&&N.destroyStream(Kb);Nc.unbind()},scope:function(b,a,f){var t,u,h,B,x,C,E,ha,ea,K,la,W,A,Ka,sa,H,F,wa,Qa,D,Ia,L,P,I,Hb,ra,Z,Da,ba,S,G,r,ua,M,Ba,qa,T,ka,ga,Va,za,U,X,ca,J,Gb,ma,oa,fa,ya,Ra,
nb,Aa,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,
Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;t=b.viewport;u=t.x|0;h=t.y|0;B="width"in t?t.width|0:O.framebufferWidth-u;x="height"in t?t.height|0:O.framebufferHeight-h;C=O.viewportWidth;O.viewportWidth=B;E=O.viewportHeight;O.viewportHeight=x;ha=xa[0];xa[0]=u;ea=xa[1];xa[1]=h;K=xa[2];xa[2]=B;la=xa[3];xa[3]=x;W=va[0];va[0]=0;A=va[1];va[1]=0;Ka=va[2];va[2]=0;sa=va[3];va[3]=0;H=V.blend_enable;V.blend_enable=!0;F=Ca[0];Ca[0]=32774;wa=Ca[1];Ca[1]=32774;Qa=pa[0];
pa[0]=770;D=pa[1];pa[1]=771;Ia=pa[2];pa[2]=773;L=pa[3];pa[3]=1;P=V.cull_enable;V.cull_enable=!0;I=V.cull_face;V.cull_face=1029;Hb=c.call(this,O,b,f);ra=V.depth_enable;V.depth_enable=Hb;Z=b.viewport;Da=Z.x|0;ba=Z.y|0;S="width"in Z?Z.width|0:O.framebufferWidth-Da;G="height"in Z?Z.height|0:O.framebufferHeight-ba;r=Ea[0];Ea[0]=Da;ua=Ea[1];Ea[1]=ba;M=Ea[2];Ea[2]=S;Ba=Ea[3];Ea[3]=G;qa=V.scissor_enable;V.scissor_enable=!0;T=V.stencil_enable;V.stencil_enable=!1;if(ka=Q.profile)ga=performance.now(),d.count++;
Va=R.offset;R.offset=0;za=R.count;R.count=4;U=b.count;X=R.instances;R.instances=U;ca=R.primitive;R.primitive=5;J=b.dashLength;Gb=ia[23];ia[23]=J;ma=b.dashTexture;oa=ia[24];ia[24]=ma;fa=b.depth;ya=ia[22];ia[22]=fa;Ra=b.id;nb=ia[31];ia[31]=Ra;Aa=b.miterLimit;Zb=ia[32];ia[32]=Aa;hb=k.call(this,O,b,f);Mb=ia[33];ia[33]=hb;bb=b.opacity;kb=ia[10];ia[10]=bb;Xa=O.pixelRatio;Jc=ia[34];ia[34]=Xa;Nb=b.scale;Ib=ia[6];ia[6]=Nb;sc=b.scaleFract;Ob=ia[7];ia[7]=sc;lb=b.thickness;Fb=ia[21];ia[21]=lb;Cb=b.translate;
yb=ia[8];ia[8]=Cb;ib=b.translateFract;$b=ia[9];ia[9]=ib;Pb=y.call(this,O,b,f);rb=ia[3];ia[3]=Pb;Y.buffer=b.colorBuffer;Ta=!1;Ub=null;sb=0;jc=!1;qb=jb=0;Ja=1;tb=0;La=5126;mb=Na=gb=eb=0;da(Y)?(Ta=!0,Ub=N.createStream(34962,Y),La=Ub.dtype):(Ub=N.getBuffer(Y))?La=Ub.dtype:"constant"in Y?(Ja=2,"number"===typeof Y.constant?(gb=Y.constant,Na=mb=eb=0):(gb=0<Y.constant.length?Y.constant[0]:0,Na=1<Y.constant.length?Y.constant[1]:0,mb=2<Y.constant.length?Y.constant[2]:0,eb=3<Y.constant.length?Y.constant[3]:
0)):(Ub=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),La="type"in Y?ja[Y.type]:Ub.dtype,jc=!!Y.normalized,qb=Y.size|0,jb=Y.offset|0,tb=Y.stride|0,sb=Y.divisor|0);Ya=z.buffer;z.buffer=Ub;vb=z.divisor;z.divisor=sb;ub=z.normalized;z.normalized=jc;Pa=z.offset;z.offset=jb;Dc=z.size;z.size=qb;Wa=z.state;z.state=Ja;Jb=z.stride;z.stride=tb;Db=z.type;z.type=La;Ma=z.w;z.w=eb;zd=z.x;z.x=gb;$a=z.y;z.y=Na;Kb=z.z;z.z=mb;ta.buffer=b.positionBuffer;Lb=!1;ob=null;Oa=0;ac=!1;wb=Sa=0;xb=1;Ua=0;pb=
5126;cb=wc=Bc=gc=0;da(ta)?(Lb=!0,ob=N.createStream(34962,ta),pb=ob.dtype):(ob=N.getBuffer(ta))?pb=ob.dtype:"constant"in ta?(xb=2,"number"===typeof ta.constant?(Bc=ta.constant,wc=cb=gc=0):(Bc=0<ta.constant.length?ta.constant[0]:0,wc=1<ta.constant.length?ta.constant[1]:0,cb=2<ta.constant.length?ta.constant[2]:0,gc=3<ta.constant.length?ta.constant[3]:0)):(ob=da(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),pb="type"in ta?ja[ta.type]:ob.dtype,ac=!!ta.normalized,wb=ta.size|0,Sa=ta.offset|
0,Ua=ta.stride|0,Oa=ta.divisor|0);kc=e.buffer;e.buffer=ob;Mc=e.divisor;e.divisor=Oa;Za=e.normalized;e.normalized=ac;nd=e.offset;e.offset=Sa;Ab=e.size;e.size=wb;ab=e.state;e.state=xb;Wb=e.stride;e.stride=Ua;uc=e.type;e.type=pb;Xb=e.w;e.w=gc;Qb=e.x;e.x=Bc;Nc=e.y;e.y=wc;Rb=e.z;e.z=cb;Fa.buffer=b.colorBuffer;Od=!1;Fc=null;sd=0;Pc=!1;vd=Yc=0;oc=1;xc=0;hc=5126;Yb=Tb=tc=db=0;da(Fa)?(Od=!0,Fc=N.createStream(34962,Fa),hc=Fc.dtype):(Fc=N.getBuffer(Fa))?hc=Fc.dtype:"constant"in Fa?(oc=2,"number"===typeof Fa.constant?
(tc=Fa.constant,Tb=Yb=db=0):(tc=0<Fa.constant.length?Fa.constant[0]:0,Tb=1<Fa.constant.length?Fa.constant[1]:0,Yb=2<Fa.constant.length?Fa.constant[2]:0,db=3<Fa.constant.length?Fa.constant[3]:0)):(Fc=da(Fa.buffer)?N.createStream(34962,Fa.buffer):N.getBuffer(Fa.buffer),hc="type"in Fa?ja[Fa.type]:Fc.dtype,Pc=!!Fa.normalized,vd=Fa.size|0,Yc=Fa.offset|0,xc=Fa.stride|0,sd=Fa.divisor|0);ec=l.buffer;l.buffer=Fc;ic=l.divisor;l.divisor=sd;zc=l.normalized;l.normalized=Pc;Cc=l.offset;l.offset=Yc;dd=l.size;l.size=
vd;Sc=l.state;l.state=oc;Tc=l.stride;l.stride=xc;Uc=l.type;l.type=hc;Zc=l.w;l.w=db;od=l.x;l.x=tc;ed=l.y;l.y=Tb;$c=l.z;l.z=Yb;Ha.buffer=b.positionBuffer;lc=!1;dc=null;ad=0;Xc=!1;Ac=fd=0;jd=1;Dd=0;ze=5126;Td=Fe=kd=xd=0;da(Ha)?(lc=!0,dc=N.createStream(34962,Ha),ze=dc.dtype):(dc=N.getBuffer(Ha))?ze=dc.dtype:"constant"in Ha?(jd=2,"number"===typeof Ha.constant?(kd=Ha.constant,Fe=Td=xd=0):(kd=0<Ha.constant.length?Ha.constant[0]:0,Fe=1<Ha.constant.length?Ha.constant[1]:0,Td=2<Ha.constant.length?Ha.constant[2]:
0,xd=3<Ha.constant.length?Ha.constant[3]:0)):(dc=da(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),ze="type"in Ha?ja[Ha.type]:dc.dtype,Xc=!!Ha.normalized,Ac=Ha.size|0,fd=Ha.offset|0,Dd=Ha.stride|0,ad=Ha.divisor|0);he=g.buffer;g.buffer=dc;ae=g.divisor;g.divisor=ad;Ud=g.normalized;g.normalized=Xc;Nd=g.offset;g.offset=fd;Kd=g.size;g.size=Ac;qd=g.state;g.state=jd;Vc=g.stride;g.stride=Dd;wd=g.type;g.type=ze;ud=g.w;g.w=xd;ld=g.x;g.x=kd;yd=g.y;g.y=Fe;Fd=g.z;g.z=Td;Hd=q.buffer;q.buffer=
p;ke=q.divisor;q.divisor=0;ne=q.normalized;q.normalized=!1;ue=q.offset;q.offset=0;oe=q.size;q.size=0;le=q.state;q.state=1;ie=q.stride;q.stride=8;ve=q.type;q.type=5126;fe=q.w;q.w=0;pe=q.x;q.x=0;Qc=q.y;q.y=0;id=q.z;q.z=0;we=m.buffer;m.buffer=n;se=m.divisor;m.divisor=0;Qd=m.normalized;m.normalized=!1;Vd=m.offset;m.offset=4;Wd=m.size;m.size=0;Xd=m.state;m.state=1;qe=m.stride;m.stride=8;Ce=m.type;m.type=5126;Ge=m.w;m.w=0;te=m.x;m.x=0;Ve=m.y;m.y=0;We=m.z;m.z=0;fb.buffer=b.positionBuffer;Re=!1;xe=null;Je=
0;Le=!1;Ne=Me=0;Ke=1;Rd=0;be=5126;Ld=Oe=ge=ee=0;da(fb)?(Re=!0,xe=N.createStream(34962,fb),be=xe.dtype):(xe=N.getBuffer(fb))?be=xe.dtype:"constant"in fb?(Ke=2,"number"===typeof fb.constant?(ge=fb.constant,Oe=Ld=ee=0):(ge=0<fb.constant.length?fb.constant[0]:0,Oe=1<fb.constant.length?fb.constant[1]:0,Ld=2<fb.constant.length?fb.constant[2]:0,ee=3<fb.constant.length?fb.constant[3]:0)):(xe=da(fb.buffer)?N.createStream(34962,fb.buffer):N.getBuffer(fb.buffer),be="type"in fb?ja[fb.type]:xe.dtype,Le=!!fb.normalized,
Ne=fb.size|0,Me=fb.offset|0,Rd=fb.stride|0,Je=fb.divisor|0);Yd=v.buffer;v.buffer=xe;He=v.divisor;v.divisor=Je;Pe=v.normalized;v.normalized=Le;df=v.offset;v.offset=Me;cf=v.size;v.size=Ne;Xe=v.state;v.state=Ke;Se=v.stride;v.stride=Rd;bf=v.type;v.type=be;af=v.w;v.w=ee;Ye=v.x;v.x=ge;Ze=v.y;v.y=Oe;Zd=v.z;v.z=Ld;aa.buffer=b.positionBuffer;de=!1;$e=null;kf=0;of=!1;lf=gf=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;da(aa)?(de=!0,$e=N.createStream(34962,aa),sf=$e.dtype):($e=N.getBuffer(aa))?sf=$e.dtype:"constant"in aa?
(mf=2,"number"===typeof aa.constant?(tf=aa.constant,Cf=Df=pf=0):(tf=0<aa.constant.length?aa.constant[0]:0,Cf=1<aa.constant.length?aa.constant[1]:0,Df=2<aa.constant.length?aa.constant[2]:0,pf=3<aa.constant.length?aa.constant[3]:0)):($e=da(aa.buffer)?N.createStream(34962,aa.buffer):N.getBuffer(aa.buffer),sf="type"in aa?ja[aa.type]:$e.dtype,of=!!aa.normalized,lf=aa.size|0,gf=aa.offset|0,nf=aa.stride|0,kf=aa.divisor|0);Te=w.buffer;w.buffer=$e;Ie=w.divisor;w.divisor=kf;qf=w.normalized;w.normalized=of;
rf=w.offset;w.offset=gf;Ef=w.size;w.size=lf;Hf=w.state;w.state=mf;Bf=w.stride;w.stride=nf;Ff=w.type;w.type=sf;Gf=w.w;w.w=pf;xf=w.x;w.x=tf;yf=w.y;w.y=Cf;wf=w.z;w.z=Df;zf=na.vert;na.vert=36;Af=na.frag;na.frag=35;Q.dirty=!0;a(O,b,f);O.viewportWidth=C;O.viewportHeight=E;xa[0]=ha;xa[1]=ea;xa[2]=K;xa[3]=la;va[0]=W;va[1]=A;va[2]=Ka;va[3]=sa;V.blend_enable=H;Ca[0]=F;Ca[1]=wa;pa[0]=Qa;pa[1]=D;pa[2]=Ia;pa[3]=L;V.cull_enable=P;V.cull_face=I;V.depth_enable=ra;Ea[0]=r;Ea[1]=ua;Ea[2]=M;Ea[3]=Ba;V.scissor_enable=
qa;V.stencil_enable=T;ka&&(d.cpuTime+=performance.now()-ga);R.offset=Va;R.count=za;R.instances=X;R.primitive=ca;ia[23]=Gb;ia[24]=oa;ia[22]=ya;ia[31]=nb;ia[32]=Zb;ia[33]=Mb;ia[10]=kb;ia[34]=Jc;ia[6]=Ib;ia[7]=Ob;ia[21]=Fb;ia[8]=yb;ia[9]=$b;ia[3]=rb;Ta&&N.destroyStream(Ub);z.buffer=Ya;z.divisor=vb;z.normalized=ub;z.offset=Pa;z.size=Dc;z.state=Wa;z.stride=Jb;z.type=Db;z.w=Ma;z.x=zd;z.y=$a;z.z=Kb;Lb&&N.destroyStream(ob);e.buffer=kc;e.divisor=Mc;e.normalized=Za;e.offset=nd;e.size=Ab;e.state=ab;e.stride=
Wb;e.type=uc;e.w=Xb;e.x=Qb;e.y=Nc;e.z=Rb;Od&&N.destroyStream(Fc);l.buffer=ec;l.divisor=ic;l.normalized=zc;l.offset=Cc;l.size=dd;l.state=Sc;l.stride=Tc;l.type=Uc;l.w=Zc;l.x=od;l.y=ed;l.z=$c;lc&&N.destroyStream(dc);g.buffer=he;g.divisor=ae;g.normalized=Ud;g.offset=Nd;g.size=Kd;g.state=qd;g.stride=Vc;g.type=wd;g.w=ud;g.x=ld;g.y=yd;g.z=Fd;q.buffer=Hd;q.divisor=ke;q.normalized=ne;q.offset=ue;q.size=oe;q.state=le;q.stride=ie;q.type=ve;q.w=fe;q.x=pe;q.y=Qc;q.z=id;m.buffer=we;m.divisor=se;m.normalized=Qd;
m.offset=Vd;m.size=Wd;m.state=Xd;m.stride=qe;m.type=Ce;m.w=Ge;m.x=te;m.y=Ve;m.z=We;Re&&N.destroyStream(xe);v.buffer=Yd;v.divisor=He;v.normalized=Pe;v.offset=df;v.size=cf;v.state=Xe;v.stride=Se;v.type=bf;v.w=af;v.x=Ye;v.y=Ze;v.z=Zd;de&&N.destroyStream($e);w.buffer=Te;w.divisor=Ie;w.normalized=qf;w.offset=rf;w.size=Ef;w.state=Hf;w.stride=Bf;w.type=Ff;w.w=Gf;w.x=xf;w.y=yf;w.z=wf;na.vert=zf;na.frag=Af;Q.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,
d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w){var B,la,x,E,Da,H,r,F,A,U,I,G,D,J,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa;B=a.attributes;la=a.buffer;x=a.context;E=a.current;Da=a.draw;H=a.elements;r=a.extensions;F=a.framebuffer;A=a.gl;U=a.isBufferArgs;I=a.next;G=a.shader;D=a.uniforms;J=a.vao;t=I.blend_color;ca=E.blend_color;M=I.blend_equation;fa=E.blend_equation;Aa=I.blend_func;T=E.blend_func;X=I.colorMask;S=E.colorMask;P=I.depth_range;N=E.depth_range;O=I.polygonOffset_offset;Q=E.polygonOffset_offset;
R=I.sample_coverage;qa=E.sample_coverage;oa=I.scissor_box;K=E.scissor_box;L=I.stencil_func;da=E.stencil_func;V=I.stencil_opBack;na=E.stencil_opBack;ia=I.stencil_opFront;ya=E.stencil_opFront;va=I.viewport;ba=E.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(b,a){var f,t,h,u,n,C;f=F.next;f!==F.cur&&(f?A.bindFramebuffer(36160,f.framebuffer):A.bindFramebuffer(36160,null),F.cur=
f);if(E.dirty){var p,D,G,M,Z,W,wa,Ia,ra,xa,Ba,ja,Y,va,oa,Ha,fb,aa,Aa,bc,Ga,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je;p=I.dither;p!==E.dither&&(p?A.enable(3024):A.disable(3024),E.dither=p);D=I.depth_func;D!==E.depth_func&&(A.depthFunc(D),E.depth_func=D);G=P[0];M=P[1];if(G!==N[0]||M!==N[1])A.depthRange(G,M),N[0]=G,N[1]=M;Z=I.depth_mask;Z!==E.depth_mask&&(A.depthMask(Z),E.depth_mask=Z);W=X[0];wa=X[1];Ia=X[2];ra=X[3];if(W!==S[0]||wa!==S[1]||Ia!==S[2]||ra!==S[3])A.colorMask(W,wa,Ia,ra),S[0]=W,S[1]=wa,S[2]=Ia,S[3]=
ra;xa=I.cull_enable;xa!==E.cull_enable&&(xa?A.enable(2884):A.disable(2884),E.cull_enable=xa);Ba=I.cull_face;Ba!==E.cull_face&&(A.cullFace(Ba),E.cull_face=Ba);ja=I.frontFace;ja!==E.frontFace&&(A.frontFace(ja),E.frontFace=ja);Y=I.lineWidth;Y!==E.lineWidth&&(A.lineWidth(Y),E.lineWidth=Y);va=I.polygonOffset_enable;va!==E.polygonOffset_enable&&(va?A.enable(32823):A.disable(32823),E.polygonOffset_enable=va);oa=O[0];Ha=O[1];if(oa!==Q[0]||Ha!==Q[1])A.polygonOffset(oa,Ha),Q[0]=oa,Q[1]=Ha;fb=I.sample_alpha;
fb!==E.sample_alpha&&(fb?A.enable(32926):A.disable(32926),E.sample_alpha=fb);aa=I.sample_enable;aa!==E.sample_enable&&(aa?A.enable(32928):A.disable(32928),E.sample_enable=aa);Aa=R[0];bc=R[1];if(Aa!==qa[0]||bc!==qa[1])A.sampleCoverage(Aa,bc),qa[0]=Aa,qa[1]=bc;Ga=I.stencil_mask;Ga!==E.stencil_mask&&(A.stencilMask(Ga),E.stencil_mask=Ga);cc=L[0];Sb=L[1];Ae=L[2];if(cc!==da[0]||Sb!==da[1]||Ae!==da[2])A.stencilFunc(cc,Sb,Ae),da[0]=cc,da[1]=Sb,da[2]=Ae;Id=ia[0];Ad=ia[1];Sd=ia[2];De=ia[3];if(Id!==ya[0]||Ad!==
ya[1]||Sd!==ya[2]||De!==ya[3])A.stencilOpSeparate(Id,Ad,Sd,De),ya[0]=Id,ya[1]=Ad,ya[2]=Sd,ya[3]=De;ye=V[0];$d=V[1];re=V[2];je=V[3];if(ye!==na[0]||$d!==na[1]||re!==na[2]||je!==na[3])A.stencilOpSeparate(ye,$d,re,je),na[0]=ye,na[1]=$d,na[2]=re,na[3]=je}A.blendColor(0,0,0,0);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=0;A.enable(3042);E.blend_enable=!0;A.blendEquationSeparate(32774,32774);fa[0]=32774;fa[1]=32774;A.blendFuncSeparate(770,771,773,1);T[0]=770;T[1]=771;T[2]=773;T[3]=1;A.disable(2929);E.depth_enable=!1;
A.enable(3089);E.scissor_enable=!0;A.disable(2960);E.stencil_enable=!1;if(t=E.profile)h=performance.now(),d.count+=a;A.useProgram(c.program);u=r.angle_instanced_arrays;var Gd;J.setVAO(null);Gd=Da.instances;for(n=0;n<a;++n){C=b[n];var Pd,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db;Pd=C.viewport;Bd=Pd.x|0;
Cd=Pd.y|0;Be="width"in Pd?Pd.width|0:x.framebufferWidth-Bd;Qe="height"in Pd?Pd.height|0:x.framebufferHeight-Cd;Ue=x.viewportWidth;x.viewportWidth=Be;Jd=x.viewportHeight;x.viewportHeight=Qe;A.viewport(Bd,Cd,Be,Qe);ba[0]=Bd;ba[1]=Cd;ba[2]=Be;ba[3]=Qe;Ee=C.viewport;me=Ee.x|0;ce=Ee.y|0;Md="width"in Ee?Ee.width|0:x.framebufferWidth-me;Ed="height"in Ee?Ee.height|0:x.framebufferHeight-ce;A.scissor(me,ce,Md,Ed);K[0]=me;K[1]=ce;K[2]=Md;K[3]=Ed;ka.buffer=C.positionBuffer;pd=!1;bd=null;td=0;Oc=!1;Gc=rd=0;gd=
1;Rc=0;md=5126;zb=vc=Eb=Vb=0;U(ka)?(pd=!0,bd=la.createStream(34962,ka),md=bd.dtype):(bd=la.getBuffer(ka))?md=bd.dtype:"constant"in ka?(gd=2,"number"===typeof ka.constant?(Eb=ka.constant,vc=zb=Vb=0):(Eb=0<ka.constant.length?ka.constant[0]:0,vc=1<ka.constant.length?ka.constant[1]:0,zb=2<ka.constant.length?ka.constant[2]:0,Vb=3<ka.constant.length?ka.constant[3]:0)):(bd=U(ka.buffer)?la.createStream(34962,ka.buffer):la.getBuffer(ka.buffer),md="type"in ka?Ca[ka.type]:bd.dtype,Oc=!!ka.normalized,Gc=ka.size|
0,rd=ka.offset|0,Rc=ka.stride|0,td=ka.divisor|0);yc=l.location;Bb=B[yc];if(1===gd){Bb.buffer||A.enableVertexAttribArray(yc);Lc=Gc||2;if(Bb.type!==md||Bb.size!==Lc||Bb.buffer!==bd||Bb.normalized!==Oc||Bb.offset!==rd||Bb.stride!==Rc)A.bindBuffer(34962,bd.buffer),A.vertexAttribPointer(yc,Lc,md,Oc,Rc,rd),Bb.type=md,Bb.size=Lc,Bb.buffer=bd,Bb.normalized=Oc,Bb.offset=rd,Bb.stride=Rc;Bb.divisor!==td&&(u.vertexAttribDivisorANGLE(yc,td),Bb.divisor=td)}else if(Bb.buffer&&(A.disableVertexAttribArray(yc),Bb.buffer=
null),Bb.x!==Eb||Bb.y!==vc||Bb.z!==zb||Bb.w!==Vb)A.vertexAttrib4f(yc,Eb,vc,zb,Vb),Bb.x=Eb,Bb.y=vc,Bb.z=zb,Bb.w=Vb;pa.buffer=C.positionFractBuffer;mc=!1;Hc=null;hd=0;cd=!1;fc=Ec=0;Ic=1;pc=0;rc=5126;Wc=nb=qc=nc=0;U(pa)?(mc=!0,Hc=la.createStream(34962,pa),rc=Hc.dtype):(Hc=la.getBuffer(pa))?rc=Hc.dtype:"constant"in pa?(Ic=2,"number"===typeof pa.constant?(qc=pa.constant,nb=Wc=nc=0):(qc=0<pa.constant.length?pa.constant[0]:0,nb=1<pa.constant.length?pa.constant[1]:0,Wc=2<pa.constant.length?pa.constant[2]:
0,nc=3<pa.constant.length?pa.constant[3]:0)):(Hc=U(pa.buffer)?la.createStream(34962,pa.buffer):la.getBuffer(pa.buffer),rc="type"in pa?Ca[pa.type]:Hc.dtype,cd=!!pa.normalized,fc=pa.size|0,Ec=pa.offset|0,pc=pa.stride|0,hd=pa.divisor|0);Zb=g.location;hb=B[Zb];if(1===Ic){hb.buffer||A.enableVertexAttribArray(Zb);Mb=fc||2;if(hb.type!==rc||hb.size!==Mb||hb.buffer!==Hc||hb.normalized!==cd||hb.offset!==Ec||hb.stride!==pc)A.bindBuffer(34962,Hc.buffer),A.vertexAttribPointer(Zb,Mb,rc,cd,pc,Ec),hb.type=rc,hb.size=
Mb,hb.buffer=Hc,hb.normalized=cd,hb.offset=Ec,hb.stride=pc;hb.divisor!==hd&&(u.vertexAttribDivisorANGLE(Zb,hd),hb.divisor=hd)}else if(hb.buffer&&(A.disableVertexAttribArray(Zb),hb.buffer=null),hb.x!==qc||hb.y!==nb||hb.z!==Wc||hb.w!==nc)A.vertexAttrib4f(Zb,qc,nb,Wc,nc),hb.x=qc,hb.y=nb,hb.z=Wc,hb.w=nc;bb=C.fill;kb=bb[0];Jc=bb[1];Ib=bb[2];Ob=bb[3];n&&Xa===kb&&Nb===Jc&&sc===Ib&&lb===Ob||(Xa=kb,Nb=Jc,sc=Ib,lb=Ob,A.uniform4f(y.location,kb,Jc,Ib,Ob));Fb=C.scale;Cb=Fb[0];ib=Fb[1];n&&yb===Cb&&$b===ib||(yb=
Cb,$b=ib,A.uniform2f(q.location,Cb,ib));Pb=C.scaleFract;rb=Pb[0];Ub=Pb[1];n&&Ta===rb&&sb===Ub||(Ta=rb,sb=Ub,A.uniform2f(m.location,rb,Ub));jc=C.translate;jb=jc[0];Ja=jc[1];n&&qb===jb&&tb===Ja||(qb=jb,tb=Ja,A.uniform2f(v.location,jb,Ja));La=C.translateFract;eb=La[0];Na=La[1];n&&gb===eb&&mb===Na||(gb=eb,mb=Na,A.uniform2f(w.location,eb,Na));Ya=C.id;n&&vb===Ya||(vb=Ya,A.uniform1f(z.location,Ya));ub=C.opacity;n&&Pa===ub||(Pa=ub,A.uniform1f(e.location,ub));Dc=k.call(this,x,C,n);Wa=null;(Wa=(Jb=U(Dc))?H.createStream(Dc):
H.getElements(Dc))&&A.bindBuffer(34963,Wa.buffer.buffer);if(Db=Wa?Wa.vertCount:-1)0<Gd?Wa?u.drawElementsInstancedANGLE(4,Db,Wa.type,0<<(Wa.type-5121>>1),Gd):u.drawArraysInstancedANGLE(4,0,Db,Gd):0>Gd&&(Wa?A.drawElements(4,Db,Wa.type,0<<(Wa.type-5121>>1)):A.drawArrays(4,0,Db)),x.viewportWidth=Ue,x.viewportHeight=Jd,pd&&la.destroyStream(bd),mc&&la.destroyStream(Hc),Jb&&H.destroyStream(Wa)}E.dirty=!0;J.setVAO(null);t&&(d.cpuTime+=performance.now()-h)},draw:function(c){var b,a,k,f,t,n,p,D,G,M,va,Z,W,
wa,Ia,ra,xa,Ba,ja,Y,oa,Fa;b=F.next;b!==F.cur&&(b?A.bindFramebuffer(36160,b.framebuffer):A.bindFramebuffer(36160,null),F.cur=b);if(E.dirty){b=I.dither;b!==E.dither&&(b?A.enable(3024):A.disable(3024),E.dither=b);b=I.depth_func;b!==E.depth_func&&(A.depthFunc(b),E.depth_func=b);b=P[0];n=P[1];if(b!==N[0]||n!==N[1])A.depthRange(b,n),N[0]=b,N[1]=n;b=I.depth_mask;b!==E.depth_mask&&(A.depthMask(b),E.depth_mask=b);b=X[0];n=X[1];a=X[2];k=X[3];if(b!==S[0]||n!==S[1]||a!==S[2]||k!==S[3])A.colorMask(b,n,a,k),S[0]=
b,S[1]=n,S[2]=a,S[3]=k;b=I.cull_enable;b!==E.cull_enable&&(b?A.enable(2884):A.disable(2884),E.cull_enable=b);b=I.cull_face;b!==E.cull_face&&(A.cullFace(b),E.cull_face=b);b=I.frontFace;b!==E.frontFace&&(A.frontFace(b),E.frontFace=b);b=I.lineWidth;b!==E.lineWidth&&(A.lineWidth(b),E.lineWidth=b);b=I.polygonOffset_enable;b!==E.polygonOffset_enable&&(b?A.enable(32823):A.disable(32823),E.polygonOffset_enable=b);b=O[0];n=O[1];if(b!==Q[0]||n!==Q[1])A.polygonOffset(b,n),Q[0]=b,Q[1]=n;b=I.sample_alpha;b!==
E.sample_alpha&&(b?A.enable(32926):A.disable(32926),E.sample_alpha=b);b=I.sample_enable;b!==E.sample_enable&&(b?A.enable(32928):A.disable(32928),E.sample_enable=b);b=R[0];n=R[1];if(b!==qa[0]||n!==qa[1])A.sampleCoverage(b,n),qa[0]=b,qa[1]=n;b=I.stencil_mask;b!==E.stencil_mask&&(A.stencilMask(b),E.stencil_mask=b);b=L[0];n=L[1];a=L[2];if(b!==da[0]||n!==da[1]||a!==da[2])A.stencilFunc(b,n,a),da[0]=b,da[1]=n,da[2]=a;b=ia[0];n=ia[1];a=ia[2];k=ia[3];if(b!==ya[0]||n!==ya[1]||a!==ya[2]||k!==ya[3])A.stencilOpSeparate(b,
n,a,k),ya[0]=b,ya[1]=n,ya[2]=a,ya[3]=k;b=V[0];n=V[1];a=V[2];k=V[3];if(b!==na[0]||n!==na[1]||a!==na[2]||k!==na[3])A.stencilOpSeparate(b,n,a,k),na[0]=b,na[1]=n,na[2]=a,na[3]=k}b=c.viewport;a=b.x|0;k=b.y|0;f="width"in b?b.width|0:x.framebufferWidth-a;t="height"in b?b.height|0:x.framebufferHeight-k;b=x.viewportWidth;x.viewportWidth=f;n=x.viewportHeight;x.viewportHeight=t;A.viewport(a,k,f,t);ba[0]=a;ba[1]=k;ba[2]=f;ba[3]=t;A.blendColor(0,0,0,0);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=0;A.enable(3042);E.blend_enable=
!0;A.blendEquationSeparate(32774,32774);fa[0]=32774;fa[1]=32774;A.blendFuncSeparate(770,771,773,1);T[0]=770;T[1]=771;T[2]=773;T[3]=1;A.disable(2929);E.depth_enable=!1;t=c.viewport;a=t.x|0;k=t.y|0;f="width"in t?t.width|0:x.framebufferWidth-a;t="height"in t?t.height|0:x.framebufferHeight-k;A.scissor(a,k,f,t);K[0]=a;K[1]=k;K[2]=f;K[3]=t;A.enable(3089);E.scissor_enable=!0;A.disable(2960);E.stencil_enable=!1;if(a=E.profile)p=performance.now(),d.count++;A.useProgram(h.program);k=r.angle_instanced_arrays;
J.setVAO(null);ka.buffer=c.positionBuffer;f=!1;D=0;G=!1;va=M=0;Z=1;W=0;wa=5126;Ba=xa=ra=Ia=0;U(ka)?(f=!0,t=la.createStream(34962,ka),wa=t.dtype):(t=la.getBuffer(ka))?wa=t.dtype:"constant"in ka?(Z=2,"number"===typeof ka.constant?(ra=ka.constant,xa=Ba=Ia=0):(ra=0<ka.constant.length?ka.constant[0]:0,xa=1<ka.constant.length?ka.constant[1]:0,Ba=2<ka.constant.length?ka.constant[2]:0,Ia=3<ka.constant.length?ka.constant[3]:0)):(t=U(ka.buffer)?la.createStream(34962,ka.buffer):la.getBuffer(ka.buffer),wa="type"in
ka?Ca[ka.type]:t.dtype,G=!!ka.normalized,va=ka.size|0,M=ka.offset|0,W=ka.stride|0,D=ka.divisor|0);ja=l.location;Y=B[ja];if(1===Z){Y.buffer||A.enableVertexAttribArray(ja);va=va||2;if(Y.type!==wa||Y.size!==va||Y.buffer!==t||Y.normalized!==G||Y.offset!==M||Y.stride!==W)A.bindBuffer(34962,t.buffer),A.vertexAttribPointer(ja,va,wa,G,W,M),Y.type=wa,Y.size=va,Y.buffer=t,Y.normalized=G,Y.offset=M,Y.stride=W;Y.divisor!==D&&(k.vertexAttribDivisorANGLE(ja,D),Y.divisor=D)}else if(Y.buffer&&(A.disableVertexAttribArray(ja),
Y.buffer=null),Y.x!==ra||Y.y!==xa||Y.z!==Ba||Y.w!==Ia)A.vertexAttrib4f(ja,ra,xa,Ba,Ia),Y.x=ra,Y.y=xa,Y.z=Ba,Y.w=Ia;pa.buffer=c.positionFractBuffer;D=!1;M=0;W=!1;Ia=wa=0;ra=1;ja=0;Y=5126;Fa=oa=Ba=xa=0;U(pa)?(D=!0,G=la.createStream(34962,pa),Y=G.dtype):(G=la.getBuffer(pa))?Y=G.dtype:"constant"in pa?(ra=2,"number"===typeof pa.constant?(Ba=pa.constant,oa=Fa=xa=0):(Ba=0<pa.constant.length?pa.constant[0]:0,oa=1<pa.constant.length?pa.constant[1]:0,Fa=2<pa.constant.length?pa.constant[2]:0,xa=3<pa.constant.length?
pa.constant[3]:0)):(G=U(pa.buffer)?la.createStream(34962,pa.buffer):la.getBuffer(pa.buffer),Y="type"in pa?Ca[pa.type]:G.dtype,W=!!pa.normalized,Ia=pa.size|0,wa=pa.offset|0,ja=pa.stride|0,M=pa.divisor|0);va=g.location;Z=B[va];if(1===ra){Z.buffer||A.enableVertexAttribArray(va);Ia=Ia||2;if(Z.type!==Y||Z.size!==Ia||Z.buffer!==G||Z.normalized!==W||Z.offset!==wa||Z.stride!==ja)A.bindBuffer(34962,G.buffer),A.vertexAttribPointer(va,Ia,Y,W,ja,wa),Z.type=Y,Z.size=Ia,Z.buffer=G,Z.normalized=W,Z.offset=wa,Z.stride=
ja;Z.divisor!==M&&(k.vertexAttribDivisorANGLE(va,M),Z.divisor=M)}else if(Z.buffer&&(A.disableVertexAttribArray(va),Z.buffer=null),Z.x!==Ba||Z.y!==oa||Z.z!==Fa||Z.w!==xa)A.vertexAttrib4f(va,Ba,oa,Fa,xa),Z.x=Ba,Z.y=oa,Z.z=Fa,Z.w=xa;M=c.fill;A.uniform4f(y.location,M[0],M[1],M[2],M[3]);M=c.scale;A.uniform2f(q.location,M[0],M[1]);M=c.scaleFract;A.uniform2f(m.location,M[0],M[1]);M=c.translate;A.uniform2f(v.location,M[0],M[1]);M=c.translateFract;A.uniform2f(w.location,M[0],M[1]);A.uniform1f(z.location,c.id);
A.uniform1f(e.location,c.opacity);M=u.call(this,x,c,0);(M=(c=U(M))?H.createStream(M):H.getElements(M))&&A.bindBuffer(34963,M.buffer.buffer);if(W=M?M.vertCount:-1)wa=Da.instances,0<wa?M?k.drawElementsInstancedANGLE(4,W,M.type,0<<(M.type-5121>>1),wa):k.drawArraysInstancedANGLE(4,0,W,wa):0>wa&&(M?A.drawElements(4,W,M.type,0<<(M.type-5121>>1)):A.drawArrays(4,0,W)),E.dirty=!0,J.setVAO(null),x.viewportWidth=b,x.viewportHeight=n,a&&(d.cpuTime+=performance.now()-p),f&&la.destroyStream(t),D&&la.destroyStream(G),
c&&H.destroyStream(M)},scope:function(c,e,a){var l,k,g,m,q,v,w,u,h,B,z,y,C,K,O,A,F,L,P,N,V,ba,S,r,R,Q,da,ia,qa,T,ga,X,ca,J,na,fa,ma,ya,Pd,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub;l=c.viewport;k=l.x|0;g=l.y|0;m="width"in l?l.width|0:x.framebufferWidth-k;q="height"in l?l.height|0:x.framebufferHeight-g;v=x.viewportWidth;
x.viewportWidth=m;w=x.viewportHeight;x.viewportHeight=q;u=va[0];va[0]=k;h=va[1];va[1]=g;B=va[2];va[2]=m;z=va[3];va[3]=q;y=t[0];t[0]=0;C=t[1];t[1]=0;K=t[2];t[2]=0;O=t[3];t[3]=0;A=I.blend_enable;I.blend_enable=!0;F=M[0];M[0]=32774;L=M[1];M[1]=32774;P=Aa[0];Aa[0]=770;N=Aa[1];Aa[1]=771;V=Aa[2];Aa[2]=773;ba=Aa[3];Aa[3]=1;S=I.depth_enable;I.depth_enable=!1;r=c.viewport;R=r.x|0;Q=r.y|0;da="width"in r?r.width|0:x.framebufferWidth-R;ia="height"in r?r.height|0:x.framebufferHeight-Q;qa=oa[0];oa[0]=R;T=oa[1];
oa[1]=Q;ga=oa[2];oa[2]=da;X=oa[3];oa[3]=ia;ca=I.scissor_enable;I.scissor_enable=!0;J=I.stencil_enable;I.stencil_enable=!1;if(na=E.profile)fa=performance.now(),d.count++;ma=p.call(this,x,c,a);ya=null;ya=(Pd=U(ma))?H.createStream(ma):H.getElements(ma);Bd=Da.elements;Da.elements=ya;Cd=Da.offset;Da.offset=0;Be=ya?ya.vertCount:-1;Qe=Da.count;Da.count=Be;Ue=Da.primitive;Da.primitive=4;Jd=c.fill;Ee=D[14];D[14]=Jd;me=c.id;ce=D[31];D[31]=me;Md=c.opacity;Ed=D[10];D[10]=Md;pd=x.pixelRatio;bd=D[34];D[34]=pd;
td=c.scale;Oc=D[6];D[6]=td;rd=c.scaleFract;Gc=D[7];D[7]=rd;gd=c.translate;Rc=D[8];D[8]=gd;md=c.translateFract;Vb=D[9];D[9]=md;Eb=n.call(this,x,c,a);vc=D[3];D[3]=Eb;ka.buffer=c.positionBuffer;zb=!1;yc=null;Bb=0;Lc=!1;Hc=mc=0;hd=1;cd=0;Ec=5126;rc=pc=Ic=fc=0;U(ka)?(zb=!0,yc=la.createStream(34962,ka),Ec=yc.dtype):(yc=la.getBuffer(ka))?Ec=yc.dtype:"constant"in ka?(hd=2,"number"===typeof ka.constant?(Ic=ka.constant,pc=rc=fc=0):(Ic=0<ka.constant.length?ka.constant[0]:0,pc=1<ka.constant.length?ka.constant[1]:
0,rc=2<ka.constant.length?ka.constant[2]:0,fc=3<ka.constant.length?ka.constant[3]:0)):(yc=U(ka.buffer)?la.createStream(34962,ka.buffer):la.getBuffer(ka.buffer),Ec="type"in ka?Ca[ka.type]:yc.dtype,Lc=!!ka.normalized,Hc=ka.size|0,mc=ka.offset|0,cd=ka.stride|0,Bb=ka.divisor|0);nc=b.buffer;b.buffer=yc;qc=b.divisor;b.divisor=Bb;nb=b.normalized;b.normalized=Lc;Wc=b.offset;b.offset=mc;Zb=b.size;b.size=Hc;hb=b.state;b.state=hd;Mb=b.stride;b.stride=cd;bb=b.type;b.type=Ec;kb=b.w;b.w=fc;Xa=b.x;b.x=Ic;Jc=b.y;
b.y=pc;Nb=b.z;b.z=rc;pa.buffer=c.positionFractBuffer;Ib=!1;sc=null;Ob=0;lb=!1;Cb=Fb=0;yb=1;ib=0;$b=5126;Ub=Ta=rb=Pb=0;U(pa)?(Ib=!0,sc=la.createStream(34962,pa),$b=sc.dtype):(sc=la.getBuffer(pa))?$b=sc.dtype:"constant"in pa?(yb=2,"number"===typeof pa.constant?(rb=pa.constant,Ta=Ub=Pb=0):(rb=0<pa.constant.length?pa.constant[0]:0,Ta=1<pa.constant.length?pa.constant[1]:0,Ub=2<pa.constant.length?pa.constant[2]:0,Pb=3<pa.constant.length?pa.constant[3]:0)):(sc=U(pa.buffer)?la.createStream(34962,pa.buffer):
la.getBuffer(pa.buffer),$b="type"in pa?Ca[pa.type]:sc.dtype,lb=!!pa.normalized,Cb=pa.size|0,Fb=pa.offset|0,ib=pa.stride|0,Ob=pa.divisor|0);sb=f.buffer;f.buffer=sc;jc=f.divisor;f.divisor=Ob;jb=f.normalized;f.normalized=lb;qb=f.offset;f.offset=Fb;Ja=f.size;f.size=Cb;tb=f.state;f.state=yb;La=f.stride;f.stride=ib;eb=f.type;f.type=$b;gb=f.w;f.w=Pb;Na=f.x;f.x=rb;mb=f.y;f.y=Ta;Ya=f.z;f.z=Ub;vb=G.vert;G.vert=42;ub=G.frag;G.frag=41;E.dirty=!0;e(x,c,a);x.viewportWidth=v;x.viewportHeight=w;va[0]=u;va[1]=h;va[2]=
B;va[3]=z;t[0]=y;t[1]=C;t[2]=K;t[3]=O;I.blend_enable=A;M[0]=F;M[1]=L;Aa[0]=P;Aa[1]=N;Aa[2]=V;Aa[3]=ba;I.depth_enable=S;oa[0]=qa;oa[1]=T;oa[2]=ga;oa[3]=X;I.scissor_enable=ca;I.stencil_enable=J;na&&(d.cpuTime+=performance.now()-fa);Pd&&H.destroyStream(ya);Da.elements=Bd;Da.offset=Cd;Da.count=Qe;Da.primitive=Ue;D[14]=Ee;D[31]=ce;D[10]=Ed;D[34]=bd;D[6]=Oc;D[7]=Gc;D[8]=Rc;D[9]=Vb;D[3]=vc;zb&&la.destroyStream(yc);b.buffer=nc;b.divisor=qc;b.normalized=nb;b.offset=Wc;b.size=Zb;b.state=hb;b.stride=Mb;b.type=
bb;b.w=kb;b.x=Xa;b.y=Jc;b.z=Nb;Ib&&la.destroyStream(sc);f.buffer=sb;f.divisor=jc;f.normalized=jb;f.offset=qb;f.size=Ja;f.state=tb;f.stride=La;f.type=eb;f.w=gb;f.x=Na;f.y=mb;f.z=Ya;G.vert=vb;G.frag=ub;E.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,ga,F,A,U,I,G,D,J,t,ca,M,fa,Aa,T,X,S,P,N,
O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va){var ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,xa,Ba,ja,Y,ta,Fa,Ha,fb,aa,Kc,bc,Ga,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je,Gd,Pd,Bd,Cd;ha=a.attributes;ea=a.buffer;sa=a.context;ua=a.current;Ea=a.draw;Ra=a.elements;Gb=a.extensions;Z=a.framebuffer;W=a.gl;wa=a.isBufferArgs;Ia=a.next;ra=a.shader;xa=a.uniforms;Ba=a.vao;ja=Ia.blend_color;Y=ua.blend_color;ta=Ia.blend_equation;Fa=ua.blend_equation;Ha=Ia.blend_func;fb=ua.blend_func;aa=Ia.colorMask;Kc=ua.colorMask;
bc=Ia.depth_range;Ga=ua.depth_range;cc=Ia.polygonOffset_offset;Sb=ua.polygonOffset_offset;Ae=Ia.sample_coverage;Id=ua.sample_coverage;Ad=Ia.scissor_box;Sd=ua.scissor_box;De=Ia.stencil_func;ye=ua.stencil_func;$d=Ia.stencil_opBack;re=ua.stencil_opBack;je=Ia.stencil_opFront;Gd=ua.stencil_opFront;Pd=Ia.viewport;Bd=ua.viewport;Cd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(c,e){var b,a,l,k,f,g;b=Z.next;b!==Z.cur&&(b?W.bindFramebuffer(36160,
b.framebuffer):W.bindFramebuffer(36160,null),Z.cur=b);if(ua.dirty){var m,q,t,v,w,n,u,h,B,x,z,y,C,p,E,la,A,H,F,D,r,I,G,ra,Da,ja,xa,ga,U,J,ma,Ha,Mb,bb;m=Ia.dither;m!==ua.dither&&(m?W.enable(3024):W.disable(3024),ua.dither=m);q=ta[0];t=ta[1];if(q!==Fa[0]||t!==Fa[1])W.blendEquationSeparate(q,t),Fa[0]=q,Fa[1]=t;v=Ia.depth_func;v!==ua.depth_func&&(W.depthFunc(v),ua.depth_func=v);w=bc[0];n=bc[1];if(w!==Ga[0]||n!==Ga[1])W.depthRange(w,n),Ga[0]=w,Ga[1]=n;u=Ia.depth_mask;u!==ua.depth_mask&&(W.depthMask(u),
ua.depth_mask=u);h=aa[0];B=aa[1];x=aa[2];z=aa[3];if(h!==Kc[0]||B!==Kc[1]||x!==Kc[2]||z!==Kc[3])W.colorMask(h,B,x,z),Kc[0]=h,Kc[1]=B,Kc[2]=x,Kc[3]=z;y=Ia.cull_enable;y!==ua.cull_enable&&(y?W.enable(2884):W.disable(2884),ua.cull_enable=y);C=Ia.cull_face;C!==ua.cull_face&&(W.cullFace(C),ua.cull_face=C);p=Ia.frontFace;p!==ua.frontFace&&(W.frontFace(p),ua.frontFace=p);E=Ia.lineWidth;E!==ua.lineWidth&&(W.lineWidth(E),ua.lineWidth=E);la=Ia.polygonOffset_enable;la!==ua.polygonOffset_enable&&(la?W.enable(32823):
W.disable(32823),ua.polygonOffset_enable=la);A=cc[0];H=cc[1];if(A!==Sb[0]||H!==Sb[1])W.polygonOffset(A,H),Sb[0]=A,Sb[1]=H;F=Ia.sample_alpha;F!==ua.sample_alpha&&(F?W.enable(32926):W.disable(32926),ua.sample_alpha=F);D=Ia.sample_enable;D!==ua.sample_enable&&(D?W.enable(32928):W.disable(32928),ua.sample_enable=D);r=Ae[0];I=Ae[1];if(r!==Id[0]||I!==Id[1])W.sampleCoverage(r,I),Id[0]=r,Id[1]=I;G=Ia.stencil_mask;G!==ua.stencil_mask&&(W.stencilMask(G),ua.stencil_mask=G);ra=De[0];Da=De[1];ja=De[2];if(ra!==
ye[0]||Da!==ye[1]||ja!==ye[2])W.stencilFunc(ra,Da,ja),ye[0]=ra,ye[1]=Da,ye[2]=ja;xa=je[0];ga=je[1];U=je[2];J=je[3];if(xa!==Gd[0]||ga!==Gd[1]||U!==Gd[2]||J!==Gd[3])W.stencilOpSeparate(xa,ga,U,J),Gd[0]=xa,Gd[1]=ga,Gd[2]=U,Gd[3]=J;ma=$d[0];Ha=$d[1];Mb=$d[2];bb=$d[3];if(ma!==re[0]||Ha!==re[1]||Mb!==re[2]||bb!==re[3])W.stencilOpSeparate(ma,Ha,Mb,bb),re[0]=ma,re[1]=Ha,re[2]=Mb,re[3]=bb}W.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;W.enable(3042);ua.blend_enable=!0;W.blendFuncSeparate(770,771,773,1);
fb[0]=770;fb[1]=771;fb[2]=773;fb[3]=1;W.disable(2929);ua.depth_enable=!1;W.enable(3089);ua.scissor_enable=!0;W.disable(2960);ua.stencil_enable=!1;if(a=ua.profile)l=performance.now(),d.count+=e;W.useProgram(ca.program);k=Gb.angle_instanced_arrays;var kb;Ba.setVAO(null);W.uniform1i(L.location,!1);W.uniform1i(ya.location,Q.bind());kb=Ea.instances;for(f=0;f<e;++f){g=c[f];var Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,
Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Pd,Ad,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Xa=g.viewport;Jc=Xa.x|0;Nb=
Xa.y|0;Ib="width"in Xa?Xa.width|0:sa.framebufferWidth-Jc;sc="height"in Xa?Xa.height|0:sa.framebufferHeight-Nb;Ob=sa.viewportWidth;sa.viewportWidth=Ib;lb=sa.viewportHeight;sa.viewportHeight=sc;W.viewport(Jc,Nb,Ib,sc);Bd[0]=Jc;Bd[1]=Nb;Bd[2]=Ib;Bd[3]=sc;Fb=g.viewport;Cb=Fb.x|0;yb=Fb.y|0;ib="width"in Fb?Fb.width|0:sa.framebufferWidth-Cb;$b="height"in Fb?Fb.height|0:sa.framebufferHeight-yb;W.scissor(Cb,yb,ib,$b);Sd[0]=Cb;Sd[1]=yb;Sd[2]=ib;Sd[3]=$b;Pb=M.call(this,sa,g,f);rb=!1;Ta=null;Ub=0;sb=!1;jb=jc=
0;qb=1;Ja=0;tb=5126;Na=gb=eb=La=0;wa(Pb)?(rb=!0,Ta=ea.createStream(34962,Pb),tb=Ta.dtype):(Ta=ea.getBuffer(Pb))?tb=Ta.dtype:"constant"in Pb?(qb=2,"number"===typeof Pb.constant?(eb=Pb.constant,gb=Na=La=0):(eb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,Na=2<Pb.constant.length?Pb.constant[2]:0,La=3<Pb.constant.length?Pb.constant[3]:0)):(Ta=wa(Pb.buffer)?ea.createStream(34962,Pb.buffer):ea.getBuffer(Pb.buffer),tb="type"in Pb?Cd[Pb.type]:Ta.dtype,sb=!!Pb.normalized,
jb=Pb.size|0,jc=Pb.offset|0,Ja=Pb.stride|0,Ub=Pb.divisor|0);mb=Qa.location;Ya=ha[mb];if(1===qb){Ya.buffer||W.enableVertexAttribArray(mb);vb=jb||1;if(Ya.type!==tb||Ya.size!==vb||Ya.buffer!==Ta||Ya.normalized!==sb||Ya.offset!==jc||Ya.stride!==Ja)W.bindBuffer(34962,Ta.buffer),W.vertexAttribPointer(mb,vb,tb,sb,Ja,jc),Ya.type=tb,Ya.size=vb,Ya.buffer=Ta,Ya.normalized=sb,Ya.offset=jc,Ya.stride=Ja;Ya.divisor!==Ub&&(k.vertexAttribDivisorANGLE(mb,Ub),Ya.divisor=Ub)}else if(Ya.buffer&&(W.disableVertexAttribArray(mb),
Ya.buffer=null),Ya.x!==eb||Ya.y!==gb||Ya.z!==Na||Ya.w!==La)W.vertexAttrib4f(mb,eb,gb,Na,La),Ya.x=eb,Ya.y=gb,Ya.z=Na,Ya.w=La;ub=fa.call(this,sa,g,f);Pa=!1;Dc=null;Wa=0;Jb=!1;Ma=Db=0;zd=1;$a=0;Kb=5126;ac=Oa=ob=Lb=0;wa(ub)?(Pa=!0,Dc=ea.createStream(34962,ub),Kb=Dc.dtype):(Dc=ea.getBuffer(ub))?Kb=Dc.dtype:"constant"in ub?(zd=2,"number"===typeof ub.constant?(ob=ub.constant,Oa=ac=Lb=0):(ob=0<ub.constant.length?ub.constant[0]:0,Oa=1<ub.constant.length?ub.constant[1]:0,ac=2<ub.constant.length?ub.constant[2]:
0,Lb=3<ub.constant.length?ub.constant[3]:0)):(Dc=wa(ub.buffer)?ea.createStream(34962,ub.buffer):ea.getBuffer(ub.buffer),Kb="type"in ub?Cd[ub.type]:Dc.dtype,Jb=!!ub.normalized,Ma=ub.size|0,Db=ub.offset|0,$a=ub.stride|0,Wa=ub.divisor|0);Sa=Hb.location;wb=ha[Sa];if(1===zd){wb.buffer||W.enableVertexAttribArray(Sa);xb=Ma||1;if(wb.type!==Kb||wb.size!==xb||wb.buffer!==Dc||wb.normalized!==Jb||wb.offset!==Db||wb.stride!==$a)W.bindBuffer(34962,Dc.buffer),W.vertexAttribPointer(Sa,xb,Kb,Jb,$a,Db),wb.type=Kb,
wb.size=xb,wb.buffer=Dc,wb.normalized=Jb,wb.offset=Db,wb.stride=$a;wb.divisor!==Wa&&(k.vertexAttribDivisorANGLE(Sa,Wa),wb.divisor=Wa)}else if(wb.buffer&&(W.disableVertexAttribArray(Sa),wb.buffer=null),wb.x!==ob||wb.y!==Oa||wb.z!==ac||wb.w!==Lb)W.vertexAttrib4f(Sa,ob,Oa,ac,Lb),wb.x=ob,wb.y=Oa,wb.z=ac,wb.w=Lb;Ua=Aa.call(this,sa,g,f);pb=!1;gc=null;Bc=0;wc=!1;kc=cb=0;Mc=1;Za=0;nd=5126;uc=Wb=ab=Ab=0;wa(Ua)?(pb=!0,gc=ea.createStream(34962,Ua),nd=gc.dtype):(gc=ea.getBuffer(Ua))?nd=gc.dtype:"constant"in Ua?
(Mc=2,"number"===typeof Ua.constant?(ab=Ua.constant,Wb=uc=Ab=0):(ab=0<Ua.constant.length?Ua.constant[0]:0,Wb=1<Ua.constant.length?Ua.constant[1]:0,uc=2<Ua.constant.length?Ua.constant[2]:0,Ab=3<Ua.constant.length?Ua.constant[3]:0)):(gc=wa(Ua.buffer)?ea.createStream(34962,Ua.buffer):ea.getBuffer(Ua.buffer),nd="type"in Ua?Cd[Ua.type]:gc.dtype,wc=!!Ua.normalized,kc=Ua.size|0,cb=Ua.offset|0,Za=Ua.stride|0,Bc=Ua.divisor|0);Xb=Ka.location;Qb=ha[Xb];if(1===Mc){Qb.buffer||W.enableVertexAttribArray(Xb);Nc=
kc||1;if(Qb.type!==nd||Qb.size!==Nc||Qb.buffer!==gc||Qb.normalized!==wc||Qb.offset!==cb||Qb.stride!==Za)W.bindBuffer(34962,gc.buffer),W.vertexAttribPointer(Xb,Nc,nd,wc,Za,cb),Qb.type=nd,Qb.size=Nc,Qb.buffer=gc,Qb.normalized=wc,Qb.offset=cb,Qb.stride=Za;Qb.divisor!==Bc&&(k.vertexAttribDivisorANGLE(Xb,Bc),Qb.divisor=Bc)}else if(Qb.buffer&&(W.disableVertexAttribArray(Xb),Qb.buffer=null),Qb.x!==ab||Qb.y!==Wb||Qb.z!==uc||Qb.w!==Ab)W.vertexAttrib4f(Xb,ab,Wb,uc,Ab),Qb.x=ab,Qb.y=Wb,Qb.z=uc,Qb.w=Ab;Rb=T.call(this,
sa,g,f);Od=!1;Fc=null;sd=0;Pc=!1;vd=Yc=0;oc=1;xc=0;hc=5126;Yb=Tb=tc=db=0;wa(Rb)?(Od=!0,Fc=ea.createStream(34962,Rb),hc=Fc.dtype):(Fc=ea.getBuffer(Rb))?hc=Fc.dtype:"constant"in Rb?(oc=2,"number"===typeof Rb.constant?(tc=Rb.constant,Tb=Yb=db=0):(tc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Yb=2<Rb.constant.length?Rb.constant[2]:0,db=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=wa(Rb.buffer)?ea.createStream(34962,Rb.buffer):ea.getBuffer(Rb.buffer),hc="type"in Rb?Cd[Rb.type]:
Fc.dtype,Pc=!!Rb.normalized,vd=Rb.size|0,Yc=Rb.offset|0,xc=Rb.stride|0,sd=Rb.divisor|0);ec=Va.location;ic=ha[ec];if(1===oc){ic.buffer||W.enableVertexAttribArray(ec);zc=vd||1;if(ic.type!==hc||ic.size!==zc||ic.buffer!==Fc||ic.normalized!==Pc||ic.offset!==Yc||ic.stride!==xc)W.bindBuffer(34962,Fc.buffer),W.vertexAttribPointer(ec,zc,hc,Pc,xc,Yc),ic.type=hc,ic.size=zc,ic.buffer=Fc,ic.normalized=Pc,ic.offset=Yc,ic.stride=xc;ic.divisor!==sd&&(k.vertexAttribDivisorANGLE(ec,sd),ic.divisor=sd)}else if(ic.buffer&&
(W.disableVertexAttribArray(ec),ic.buffer=null),ic.x!==tc||ic.y!==Tb||ic.z!==Yb||ic.w!==db)W.vertexAttrib4f(ec,tc,Tb,Yb,db),ic.x=tc,ic.y=Tb,ic.z=Yb,ic.w=db;Cc=X.call(this,sa,g,f);dd=!1;Sc=null;Tc=0;Uc=!1;od=Zc=0;ed=1;$c=0;lc=5126;fd=Xc=ad=dc=0;wa(Cc)?(dd=!0,Sc=ea.createStream(34962,Cc),lc=Sc.dtype):(Sc=ea.getBuffer(Cc))?lc=Sc.dtype:"constant"in Cc?(ed=2,"number"===typeof Cc.constant?(ad=Cc.constant,Xc=fd=dc=0):(ad=0<Cc.constant.length?Cc.constant[0]:0,Xc=1<Cc.constant.length?Cc.constant[1]:0,fd=2<
Cc.constant.length?Cc.constant[2]:0,dc=3<Cc.constant.length?Cc.constant[3]:0)):(Sc=wa(Cc.buffer)?ea.createStream(34962,Cc.buffer):ea.getBuffer(Cc.buffer),lc="type"in Cc?Cd[Cc.type]:Sc.dtype,Uc=!!Cc.normalized,od=Cc.size|0,Zc=Cc.offset|0,$c=Cc.stride|0,Tc=Cc.divisor|0);Ac=ka.location;jd=ha[Ac];if(1===ed){jd.buffer||W.enableVertexAttribArray(Ac);Pd=od||1;if(jd.type!==lc||jd.size!==Pd||jd.buffer!==Sc||jd.normalized!==Uc||jd.offset!==Zc||jd.stride!==$c)W.bindBuffer(34962,Sc.buffer),W.vertexAttribPointer(Ac,
Pd,lc,Uc,$c,Zc),jd.type=lc,jd.size=Pd,jd.buffer=Sc,jd.normalized=Uc,jd.offset=Zc,jd.stride=$c;jd.divisor!==Tc&&(k.vertexAttribDivisorANGLE(Ac,Tc),jd.divisor=Tc)}else if(jd.buffer&&(W.disableVertexAttribArray(Ac),jd.buffer=null),jd.x!==ad||jd.y!==Xc||jd.z!==fd||jd.w!==dc)W.vertexAttrib4f(Ac,ad,Xc,fd,dc),jd.x=ad,jd.y=Xc,jd.z=fd,jd.w=dc;Ad=S.call(this,sa,g,f);xd=!1;kd=null;Fe=0;Td=!1;ae=he=0;Ud=1;Nd=0;Kd=5126;ud=wd=Vc=qd=0;wa(Ad)?(xd=!0,kd=ea.createStream(34962,Ad),Kd=kd.dtype):(kd=ea.getBuffer(Ad))?
Kd=kd.dtype:"constant"in Ad?(Ud=2,"number"===typeof Ad.constant?(Vc=Ad.constant,wd=ud=qd=0):(Vc=0<Ad.constant.length?Ad.constant[0]:0,wd=1<Ad.constant.length?Ad.constant[1]:0,ud=2<Ad.constant.length?Ad.constant[2]:0,qd=3<Ad.constant.length?Ad.constant[3]:0)):(kd=wa(Ad.buffer)?ea.createStream(34962,Ad.buffer):ea.getBuffer(Ad.buffer),Kd="type"in Ad?Cd[Ad.type]:kd.dtype,Td=!!Ad.normalized,ae=Ad.size|0,he=Ad.offset|0,Nd=Ad.stride|0,Fe=Ad.divisor|0);ld=oa.location;yd=ha[ld];if(1===Ud){yd.buffer||W.enableVertexAttribArray(ld);
Fd=ae||1;if(yd.type!==Kd||yd.size!==Fd||yd.buffer!==kd||yd.normalized!==Td||yd.offset!==he||yd.stride!==Nd)W.bindBuffer(34962,kd.buffer),W.vertexAttribPointer(ld,Fd,Kd,Td,Nd,he),yd.type=Kd,yd.size=Fd,yd.buffer=kd,yd.normalized=Td,yd.offset=he,yd.stride=Nd;yd.divisor!==Fe&&(k.vertexAttribDivisorANGLE(ld,Fe),yd.divisor=Fe)}else if(yd.buffer&&(W.disableVertexAttribArray(ld),yd.buffer=null),yd.x!==Vc||yd.y!==wd||yd.z!==ud||yd.w!==qd)W.vertexAttrib4f(ld,Vc,wd,ud,qd),yd.x=Vc,yd.y=wd,yd.z=ud,yd.w=qd;Hd=
P.call(this,sa,g,f);ke=!1;ne=null;ue=0;oe=!1;ie=le=0;ve=1;fe=0;pe=5126;se=we=id=Qc=0;wa(Hd)?(ke=!0,ne=ea.createStream(34962,Hd),pe=ne.dtype):(ne=ea.getBuffer(Hd))?pe=ne.dtype:"constant"in Hd?(ve=2,"number"===typeof Hd.constant?(id=Hd.constant,we=se=Qc=0):(id=0<Hd.constant.length?Hd.constant[0]:0,we=1<Hd.constant.length?Hd.constant[1]:0,se=2<Hd.constant.length?Hd.constant[2]:0,Qc=3<Hd.constant.length?Hd.constant[3]:0)):(ne=wa(Hd.buffer)?ea.createStream(34962,Hd.buffer):ea.getBuffer(Hd.buffer),pe="type"in
Hd?Cd[Hd.type]:ne.dtype,oe=!!Hd.normalized,ie=Hd.size|0,le=Hd.offset|0,fe=Hd.stride|0,ue=Hd.divisor|0);Qd=K.location;Vd=ha[Qd];if(1===ve){Vd.buffer||W.enableVertexAttribArray(Qd);Wd=ie||4;if(Vd.type!==pe||Vd.size!==Wd||Vd.buffer!==ne||Vd.normalized!==oe||Vd.offset!==le||Vd.stride!==fe)W.bindBuffer(34962,ne.buffer),W.vertexAttribPointer(Qd,Wd,pe,oe,fe,le),Vd.type=pe,Vd.size=Wd,Vd.buffer=ne,Vd.normalized=oe,Vd.offset=le,Vd.stride=fe;Vd.divisor!==ue&&(k.vertexAttribDivisorANGLE(Qd,ue),Vd.divisor=ue)}else if(Vd.buffer&&
(W.disableVertexAttribArray(Qd),Vd.buffer=null),Vd.x!==id||Vd.y!==we||Vd.z!==se||Vd.w!==Qc)W.vertexAttrib4f(Qd,id,we,se,Qc),Vd.x=id,Vd.y=we,Vd.z=se,Vd.w=Qc;Xd=N.call(this,sa,g,f);qe=!1;Ce=null;Ge=0;te=!1;We=Ve=0;Re=1;xe=0;Je=5126;Ke=Ne=Me=Le=0;wa(Xd)?(qe=!0,Ce=ea.createStream(34962,Xd),Je=Ce.dtype):(Ce=ea.getBuffer(Xd))?Je=Ce.dtype:"constant"in Xd?(Re=2,"number"===typeof Xd.constant?(Me=Xd.constant,Ne=Ke=Le=0):(Me=0<Xd.constant.length?Xd.constant[0]:0,Ne=1<Xd.constant.length?Xd.constant[1]:0,Ke=2<
Xd.constant.length?Xd.constant[2]:0,Le=3<Xd.constant.length?Xd.constant[3]:0)):(Ce=wa(Xd.buffer)?ea.createStream(34962,Xd.buffer):ea.getBuffer(Xd.buffer),Je="type"in Xd?Cd[Xd.type]:Ce.dtype,te=!!Xd.normalized,We=Xd.size|0,Ve=Xd.offset|0,xe=Xd.stride|0,Ge=Xd.divisor|0);Rd=qa.location;be=ha[Rd];if(1===Re){be.buffer||W.enableVertexAttribArray(Rd);ee=We||4;if(be.type!==Je||be.size!==ee||be.buffer!==Ce||be.normalized!==te||be.offset!==Ve||be.stride!==xe)W.bindBuffer(34962,Ce.buffer),W.vertexAttribPointer(Rd,
ee,Je,te,xe,Ve),be.type=Je,be.size=ee,be.buffer=Ce,be.normalized=te,be.offset=Ve,be.stride=xe;be.divisor!==Ge&&(k.vertexAttribDivisorANGLE(Rd,Ge),be.divisor=Ge)}else if(be.buffer&&(W.disableVertexAttribArray(Rd),be.buffer=null),be.x!==Me||be.y!==Ne||be.z!==Ke||be.w!==Le)W.vertexAttrib4f(Rd,Me,Ne,Ke,Le),be.x=Me,be.y=Ne,be.z=Ke,be.w=Le;ge=O.call(this,sa,g,f);Oe=!1;Ld=null;Yd=0;He=!1;df=Pe=0;cf=1;Xe=0;Se=5126;Ze=Ye=af=bf=0;wa(ge)?(Oe=!0,Ld=ea.createStream(34962,ge),Se=Ld.dtype):(Ld=ea.getBuffer(ge))?
Se=Ld.dtype:"constant"in ge?(cf=2,"number"===typeof ge.constant?(af=ge.constant,Ye=Ze=bf=0):(af=0<ge.constant.length?ge.constant[0]:0,Ye=1<ge.constant.length?ge.constant[1]:0,Ze=2<ge.constant.length?ge.constant[2]:0,bf=3<ge.constant.length?ge.constant[3]:0)):(Ld=wa(ge.buffer)?ea.createStream(34962,ge.buffer):ea.getBuffer(ge.buffer),Se="type"in ge?Cd[ge.type]:Ld.dtype,He=!!ge.normalized,df=ge.size|0,Pe=ge.offset|0,Xe=ge.stride|0,Yd=ge.divisor|0);Zd=da.location;de=ha[Zd];if(1===cf){de.buffer||W.enableVertexAttribArray(Zd);
$e=df||1;if(de.type!==Se||de.size!==$e||de.buffer!==Ld||de.normalized!==He||de.offset!==Pe||de.stride!==Xe)W.bindBuffer(34962,Ld.buffer),W.vertexAttribPointer(Zd,$e,Se,He,Xe,Pe),de.type=Se,de.size=$e,de.buffer=Ld,de.normalized=He,de.offset=Pe,de.stride=Xe;de.divisor!==Yd&&(k.vertexAttribDivisorANGLE(Zd,Yd),de.divisor=Yd)}else if(de.buffer&&(W.disableVertexAttribArray(Zd),de.buffer=null),de.x!==af||de.y!==Ye||de.z!==Ze||de.w!==bf)W.vertexAttrib4f(Zd,af,Ye,Ze,bf),de.x=af,de.y=Ye,de.z=Ze,de.w=bf;kf=
sa.pixelRatio;f&&of===kf||(of=kf,W.uniform1f(va.location,kf));gf=g.scale;lf=gf[0];nf=gf[1];f&&mf===lf&&sf===nf||(mf=lf,sf=nf,W.uniform2f(ba.location,lf,nf));pf=g.scaleFract;tf=pf[0];Df=pf[1];f&&Cf===tf&&Te===Df||(Cf=tf,Te=Df,W.uniform2f(Ca.location,tf,Df));Ie=g.translate;qf=Ie[0];Ef=Ie[1];f&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,W.uniform2f(pa.location,qf,Ef));Bf=g.translateFract;Ff=Bf[0];xf=Bf[1];f&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,W.uniform2f(za.location,Ff,xf));wf=R.call(this,sa,g,f);zf=wf[0];Jf=wf[1];
f&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,W.uniform2f(ia.location,zf,Jf));Lf=g.opacity;f&&Mf===Lf||(Mf=Lf,W.uniform1f(na.location,Lf));(uf=g.markerTexture)&&"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;W.uniform1i(V.location,Rf.bind());If=g.elements;vf=null;(vf=(dg=wa(If))?Ra.createStream(If):Ra.getElements(If))&&W.bindBuffer(34963,vf.buffer.buffer);Sf=g.offset;if(Tf=g.count)0<kb?vf?k.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),kb):k.drawArraysInstancedANGLE(0,Sf,Tf,kb):
0>kb&&(vf?W.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):W.drawArrays(0,Sf,Tf)),sa.viewportWidth=Ob,sa.viewportHeight=lb,rb&&ea.destroyStream(Ta),Pa&&ea.destroyStream(Dc),pb&&ea.destroyStream(gc),Od&&ea.destroyStream(Fc),dd&&ea.destroyStream(Sc),xd&&ea.destroyStream(kd),ke&&ea.destroyStream(ne),qe&&ea.destroyStream(Ce),Oe&&ea.destroyStream(Ld),Rf.unbind(),dg&&Ra.destroyStream(vf)}Q.unbind();ua.dirty=!0;Ba.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(a){var g,m,q,t,v,w,B,x,E,
O,la,A,H,F,D,r,P,I,N,G,ra,S,M,Da,ja,R,Q,xa,T,ga,U,X,ca,J,ma,fa,Ha,Aa,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,Ad,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Pd,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe;
g=Z.next;g!==Z.cur&&(g?W.bindFramebuffer(36160,g.framebuffer):W.bindFramebuffer(36160,null),Z.cur=g);if(ua.dirty){var Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf;Je=Ia.dither;Je!==ua.dither&&(Je?W.enable(3024):W.disable(3024),ua.dither=Je);Le=ta[0];Me=ta[1];if(Le!==Fa[0]||Me!==Fa[1])W.blendEquationSeparate(Le,Me),Fa[0]=Le,Fa[1]=Me;Ne=Ia.depth_func;Ne!==ua.depth_func&&(W.depthFunc(Ne),ua.depth_func=Ne);Ke=bc[0];Rd=bc[1];if(Ke!==Ga[0]||Rd!==
Ga[1])W.depthRange(Ke,Rd),Ga[0]=Ke,Ga[1]=Rd;be=Ia.depth_mask;be!==ua.depth_mask&&(W.depthMask(be),ua.depth_mask=be);ee=aa[0];ge=aa[1];Oe=aa[2];Ld=aa[3];if(ee!==Kc[0]||ge!==Kc[1]||Oe!==Kc[2]||Ld!==Kc[3])W.colorMask(ee,ge,Oe,Ld),Kc[0]=ee,Kc[1]=ge,Kc[2]=Oe,Kc[3]=Ld;Yd=Ia.cull_enable;Yd!==ua.cull_enable&&(Yd?W.enable(2884):W.disable(2884),ua.cull_enable=Yd);He=Ia.cull_face;He!==ua.cull_face&&(W.cullFace(He),ua.cull_face=He);Pe=Ia.frontFace;Pe!==ua.frontFace&&(W.frontFace(Pe),ua.frontFace=Pe);df=Ia.lineWidth;
df!==ua.lineWidth&&(W.lineWidth(df),ua.lineWidth=df);cf=Ia.polygonOffset_enable;cf!==ua.polygonOffset_enable&&(cf?W.enable(32823):W.disable(32823),ua.polygonOffset_enable=cf);Xe=cc[0];Se=cc[1];if(Xe!==Sb[0]||Se!==Sb[1])W.polygonOffset(Xe,Se),Sb[0]=Xe,Sb[1]=Se;bf=Ia.sample_alpha;bf!==ua.sample_alpha&&(bf?W.enable(32926):W.disable(32926),ua.sample_alpha=bf);af=Ia.sample_enable;af!==ua.sample_enable&&(af?W.enable(32928):W.disable(32928),ua.sample_enable=af);Ye=Ae[0];Ze=Ae[1];if(Ye!==Id[0]||Ze!==Id[1])W.sampleCoverage(Ye,
Ze),Id[0]=Ye,Id[1]=Ze;Zd=Ia.stencil_mask;Zd!==ua.stencil_mask&&(W.stencilMask(Zd),ua.stencil_mask=Zd);de=De[0];$e=De[1];kf=De[2];if(de!==ye[0]||$e!==ye[1]||kf!==ye[2])W.stencilFunc(de,$e,kf),ye[0]=de,ye[1]=$e,ye[2]=kf;of=je[0];gf=je[1];lf=je[2];mf=je[3];if(of!==Gd[0]||gf!==Gd[1]||lf!==Gd[2]||mf!==Gd[3])W.stencilOpSeparate(of,gf,lf,mf),Gd[0]=of,Gd[1]=gf,Gd[2]=lf,Gd[3]=mf;nf=$d[0];sf=$d[1];pf=$d[2];tf=$d[3];if(nf!==re[0]||sf!==re[1]||pf!==re[2]||tf!==re[3])W.stencilOpSeparate(nf,sf,pf,tf),re[0]=nf,
re[1]=sf,re[2]=pf,re[3]=tf}m=a.viewport;q=m.x|0;t=m.y|0;v="width"in m?m.width|0:sa.framebufferWidth-q;w="height"in m?m.height|0:sa.framebufferHeight-t;B=sa.viewportWidth;sa.viewportWidth=v;x=sa.viewportHeight;sa.viewportHeight=w;W.viewport(q,t,v,w);Bd[0]=q;Bd[1]=t;Bd[2]=v;Bd[3]=w;W.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;W.enable(3042);ua.blend_enable=!0;W.blendFuncSeparate(770,771,773,1);fb[0]=770;fb[1]=771;fb[2]=773;fb[3]=1;W.disable(2929);ua.depth_enable=!1;E=a.viewport;O=E.x|0;la=E.y|
0;A="width"in E?E.width|0:sa.framebufferWidth-O;H="height"in E?E.height|0:sa.framebufferHeight-la;W.scissor(O,la,A,H);Sd[0]=O;Sd[1]=la;Sd[2]=A;Sd[3]=H;W.enable(3089);ua.scissor_enable=!0;W.disable(2960);ua.stencil_enable=!1;if(F=ua.profile)D=performance.now(),d.count++;W.useProgram(h.program);r=Gb.angle_instanced_arrays;Ba.setVAO(null);P=u.call(this,sa,a,0);I=!1;N=null;G=0;ra=!1;M=S=0;Da=1;ja=0;R=5126;ga=T=xa=Q=0;wa(P)?(I=!0,N=ea.createStream(34962,P),R=N.dtype):(N=ea.getBuffer(P))?R=N.dtype:"constant"in
P?(Da=2,"number"===typeof P.constant?(xa=P.constant,T=ga=Q=0):(xa=0<P.constant.length?P.constant[0]:0,T=1<P.constant.length?P.constant[1]:0,ga=2<P.constant.length?P.constant[2]:0,Q=3<P.constant.length?P.constant[3]:0)):(N=wa(P.buffer)?ea.createStream(34962,P.buffer):ea.getBuffer(P.buffer),R="type"in P?Cd[P.type]:N.dtype,ra=!!P.normalized,M=P.size|0,S=P.offset|0,ja=P.stride|0,G=P.divisor|0);U=Qa.location;X=ha[U];if(1===Da){X.buffer||W.enableVertexAttribArray(U);ca=M||1;if(X.type!==R||X.size!==ca||
X.buffer!==N||X.normalized!==ra||X.offset!==S||X.stride!==ja)W.bindBuffer(34962,N.buffer),W.vertexAttribPointer(U,ca,R,ra,ja,S),X.type=R,X.size=ca,X.buffer=N,X.normalized=ra,X.offset=S,X.stride=ja;X.divisor!==G&&(r.vertexAttribDivisorANGLE(U,G),X.divisor=G)}else if(X.buffer&&(W.disableVertexAttribArray(U),X.buffer=null),X.x!==xa||X.y!==T||X.z!==ga||X.w!==Q)W.vertexAttrib4f(U,xa,T,ga,Q),X.x=xa,X.y=T,X.z=ga,X.w=Q;J=p.call(this,sa,a,0);ma=!1;fa=null;Ha=0;Aa=!1;Mb=hb=0;bb=1;kb=0;Xa=5126;sc=Ib=Nb=Jc=0;
wa(J)?(ma=!0,fa=ea.createStream(34962,J),Xa=fa.dtype):(fa=ea.getBuffer(J))?Xa=fa.dtype:"constant"in J?(bb=2,"number"===typeof J.constant?(Nb=J.constant,Ib=sc=Jc=0):(Nb=0<J.constant.length?J.constant[0]:0,Ib=1<J.constant.length?J.constant[1]:0,sc=2<J.constant.length?J.constant[2]:0,Jc=3<J.constant.length?J.constant[3]:0)):(fa=wa(J.buffer)?ea.createStream(34962,J.buffer):ea.getBuffer(J.buffer),Xa="type"in J?Cd[J.type]:fa.dtype,Aa=!!J.normalized,Mb=J.size|0,hb=J.offset|0,kb=J.stride|0,Ha=J.divisor|0);
Ob=Hb.location;lb=ha[Ob];if(1===bb){lb.buffer||W.enableVertexAttribArray(Ob);Fb=Mb||1;if(lb.type!==Xa||lb.size!==Fb||lb.buffer!==fa||lb.normalized!==Aa||lb.offset!==hb||lb.stride!==kb)W.bindBuffer(34962,fa.buffer),W.vertexAttribPointer(Ob,Fb,Xa,Aa,kb,hb),lb.type=Xa,lb.size=Fb,lb.buffer=fa,lb.normalized=Aa,lb.offset=hb,lb.stride=kb;lb.divisor!==Ha&&(r.vertexAttribDivisorANGLE(Ob,Ha),lb.divisor=Ha)}else if(lb.buffer&&(W.disableVertexAttribArray(Ob),lb.buffer=null),lb.x!==Nb||lb.y!==Ib||lb.z!==sc||lb.w!==
Jc)W.vertexAttrib4f(Ob,Nb,Ib,sc,Jc),lb.x=Nb,lb.y=Ib,lb.z=sc,lb.w=Jc;Cb=n.call(this,sa,a,0);yb=!1;ib=null;$b=0;Pb=!1;Ta=rb=0;Ub=1;sb=0;jc=5126;tb=Ja=qb=jb=0;wa(Cb)?(yb=!0,ib=ea.createStream(34962,Cb),jc=ib.dtype):(ib=ea.getBuffer(Cb))?jc=ib.dtype:"constant"in Cb?(Ub=2,"number"===typeof Cb.constant?(qb=Cb.constant,Ja=tb=jb=0):(qb=0<Cb.constant.length?Cb.constant[0]:0,Ja=1<Cb.constant.length?Cb.constant[1]:0,tb=2<Cb.constant.length?Cb.constant[2]:0,jb=3<Cb.constant.length?Cb.constant[3]:0)):(ib=wa(Cb.buffer)?
ea.createStream(34962,Cb.buffer):ea.getBuffer(Cb.buffer),jc="type"in Cb?Cd[Cb.type]:ib.dtype,Pb=!!Cb.normalized,Ta=Cb.size|0,rb=Cb.offset|0,sb=Cb.stride|0,$b=Cb.divisor|0);La=Ka.location;eb=ha[La];if(1===Ub){eb.buffer||W.enableVertexAttribArray(La);gb=Ta||1;if(eb.type!==jc||eb.size!==gb||eb.buffer!==ib||eb.normalized!==Pb||eb.offset!==rb||eb.stride!==sb)W.bindBuffer(34962,ib.buffer),W.vertexAttribPointer(La,gb,jc,Pb,sb,rb),eb.type=jc,eb.size=gb,eb.buffer=ib,eb.normalized=Pb,eb.offset=rb,eb.stride=
sb;eb.divisor!==$b&&(r.vertexAttribDivisorANGLE(La,$b),eb.divisor=$b)}else if(eb.buffer&&(W.disableVertexAttribArray(La),eb.buffer=null),eb.x!==qb||eb.y!==Ja||eb.z!==tb||eb.w!==jb)W.vertexAttrib4f(La,qb,Ja,tb,jb),eb.x=qb,eb.y=Ja,eb.z=tb,eb.w=jb;Na=b.call(this,sa,a,0);mb=!1;Ya=null;vb=0;ub=!1;Dc=Pa=0;Wa=1;Jb=0;Db=5126;Kb=$a=Ad=Ma=0;wa(Na)?(mb=!0,Ya=ea.createStream(34962,Na),Db=Ya.dtype):(Ya=ea.getBuffer(Na))?Db=Ya.dtype:"constant"in Na?(Wa=2,"number"===typeof Na.constant?(Ad=Na.constant,$a=Kb=Ma=0):
(Ad=0<Na.constant.length?Na.constant[0]:0,$a=1<Na.constant.length?Na.constant[1]:0,Kb=2<Na.constant.length?Na.constant[2]:0,Ma=3<Na.constant.length?Na.constant[3]:0)):(Ya=wa(Na.buffer)?ea.createStream(34962,Na.buffer):ea.getBuffer(Na.buffer),Db="type"in Na?Cd[Na.type]:Ya.dtype,ub=!!Na.normalized,Dc=Na.size|0,Pa=Na.offset|0,Jb=Na.stride|0,vb=Na.divisor|0);Lb=Va.location;ob=ha[Lb];if(1===Wa){ob.buffer||W.enableVertexAttribArray(Lb);Oa=Dc||1;if(ob.type!==Db||ob.size!==Oa||ob.buffer!==Ya||ob.normalized!==
ub||ob.offset!==Pa||ob.stride!==Jb)W.bindBuffer(34962,Ya.buffer),W.vertexAttribPointer(Lb,Oa,Db,ub,Jb,Pa),ob.type=Db,ob.size=Oa,ob.buffer=Ya,ob.normalized=ub,ob.offset=Pa,ob.stride=Jb;ob.divisor!==vb&&(r.vertexAttribDivisorANGLE(Lb,vb),ob.divisor=vb)}else if(ob.buffer&&(W.disableVertexAttribArray(Lb),ob.buffer=null),ob.x!==Ad||ob.y!==$a||ob.z!==Kb||ob.w!==Ma)W.vertexAttrib4f(Lb,Ad,$a,Kb,Ma),ob.x=Ad,ob.y=$a,ob.z=Kb,ob.w=Ma;ac=f.call(this,sa,a,0);Sa=!1;wb=null;xb=0;Ua=!1;gc=pb=0;Bc=1;wc=0;cb=5126;nd=
Za=Mc=kc=0;wa(ac)?(Sa=!0,wb=ea.createStream(34962,ac),cb=wb.dtype):(wb=ea.getBuffer(ac))?cb=wb.dtype:"constant"in ac?(Bc=2,"number"===typeof ac.constant?(Mc=ac.constant,Za=nd=kc=0):(Mc=0<ac.constant.length?ac.constant[0]:0,Za=1<ac.constant.length?ac.constant[1]:0,nd=2<ac.constant.length?ac.constant[2]:0,kc=3<ac.constant.length?ac.constant[3]:0)):(wb=wa(ac.buffer)?ea.createStream(34962,ac.buffer):ea.getBuffer(ac.buffer),cb="type"in ac?Cd[ac.type]:wb.dtype,Ua=!!ac.normalized,gc=ac.size|0,pb=ac.offset|
0,wc=ac.stride|0,xb=ac.divisor|0);Ab=ka.location;ab=ha[Ab];if(1===Bc){ab.buffer||W.enableVertexAttribArray(Ab);Wb=gc||1;if(ab.type!==cb||ab.size!==Wb||ab.buffer!==wb||ab.normalized!==Ua||ab.offset!==pb||ab.stride!==wc)W.bindBuffer(34962,wb.buffer),W.vertexAttribPointer(Ab,Wb,cb,Ua,wc,pb),ab.type=cb,ab.size=Wb,ab.buffer=wb,ab.normalized=Ua,ab.offset=pb,ab.stride=wc;ab.divisor!==xb&&(r.vertexAttribDivisorANGLE(Ab,xb),ab.divisor=xb)}else if(ab.buffer&&(W.disableVertexAttribArray(Ab),ab.buffer=null),
ab.x!==Mc||ab.y!==Za||ab.z!==nd||ab.w!==kc)W.vertexAttrib4f(Ab,Mc,Za,nd,kc),ab.x=Mc,ab.y=Za,ab.z=nd,ab.w=kc;uc=c.call(this,sa,a,0);Xb=!1;Qb=null;Nc=0;Rb=!1;Fc=Pd=0;sd=1;Pc=0;Yc=5126;hc=xc=oc=vd=0;wa(uc)?(Xb=!0,Qb=ea.createStream(34962,uc),Yc=Qb.dtype):(Qb=ea.getBuffer(uc))?Yc=Qb.dtype:"constant"in uc?(sd=2,"number"===typeof uc.constant?(oc=uc.constant,xc=hc=vd=0):(oc=0<uc.constant.length?uc.constant[0]:0,xc=1<uc.constant.length?uc.constant[1]:0,hc=2<uc.constant.length?uc.constant[2]:0,vd=3<uc.constant.length?
uc.constant[3]:0)):(Qb=wa(uc.buffer)?ea.createStream(34962,uc.buffer):ea.getBuffer(uc.buffer),Yc="type"in uc?Cd[uc.type]:Qb.dtype,Rb=!!uc.normalized,Fc=uc.size|0,Pd=uc.offset|0,Pc=uc.stride|0,Nc=uc.divisor|0);db=oa.location;tc=ha[db];if(1===sd){tc.buffer||W.enableVertexAttribArray(db);Tb=Fc||1;if(tc.type!==Yc||tc.size!==Tb||tc.buffer!==Qb||tc.normalized!==Rb||tc.offset!==Pd||tc.stride!==Pc)W.bindBuffer(34962,Qb.buffer),W.vertexAttribPointer(db,Tb,Yc,Rb,Pc,Pd),tc.type=Yc,tc.size=Tb,tc.buffer=Qb,tc.normalized=
Rb,tc.offset=Pd,tc.stride=Pc;tc.divisor!==Nc&&(r.vertexAttribDivisorANGLE(db,Nc),tc.divisor=Nc)}else if(tc.buffer&&(W.disableVertexAttribArray(db),tc.buffer=null),tc.x!==oc||tc.y!==xc||tc.z!==hc||tc.w!==vd)W.vertexAttrib4f(db,oc,xc,hc,vd),tc.x=oc,tc.y=xc,tc.z=hc,tc.w=vd;Yb=k.call(this,sa,a,0);ec=!1;ic=null;zc=0;Cc=!1;Sc=dd=0;Tc=1;Uc=0;Zc=5126;lc=$c=ed=od=0;wa(Yb)?(ec=!0,ic=ea.createStream(34962,Yb),Zc=ic.dtype):(ic=ea.getBuffer(Yb))?Zc=ic.dtype:"constant"in Yb?(Tc=2,"number"===typeof Yb.constant?
(ed=Yb.constant,$c=lc=od=0):(ed=0<Yb.constant.length?Yb.constant[0]:0,$c=1<Yb.constant.length?Yb.constant[1]:0,lc=2<Yb.constant.length?Yb.constant[2]:0,od=3<Yb.constant.length?Yb.constant[3]:0)):(ic=wa(Yb.buffer)?ea.createStream(34962,Yb.buffer):ea.getBuffer(Yb.buffer),Zc="type"in Yb?Cd[Yb.type]:ic.dtype,Cc=!!Yb.normalized,Sc=Yb.size|0,dd=Yb.offset|0,Uc=Yb.stride|0,zc=Yb.divisor|0);dc=K.location;ad=ha[dc];if(1===Tc){ad.buffer||W.enableVertexAttribArray(dc);Xc=Sc||4;if(ad.type!==Zc||ad.size!==Xc||
ad.buffer!==ic||ad.normalized!==Cc||ad.offset!==dd||ad.stride!==Uc)W.bindBuffer(34962,ic.buffer),W.vertexAttribPointer(dc,Xc,Zc,Cc,Uc,dd),ad.type=Zc,ad.size=Xc,ad.buffer=ic,ad.normalized=Cc,ad.offset=dd,ad.stride=Uc;ad.divisor!==zc&&(r.vertexAttribDivisorANGLE(dc,zc),ad.divisor=zc)}else if(ad.buffer&&(W.disableVertexAttribArray(dc),ad.buffer=null),ad.x!==ed||ad.y!==$c||ad.z!==lc||ad.w!==od)W.vertexAttrib4f(dc,ed,$c,lc,od),ad.x=ed,ad.y=$c,ad.z=lc,ad.w=od;fd=y.call(this,sa,a,0);Ac=!1;jd=null;Dd=0;ze=
!1;kd=xd=0;Fe=1;Td=0;he=5126;Kd=Nd=Ud=ae=0;wa(fd)?(Ac=!0,jd=ea.createStream(34962,fd),he=jd.dtype):(jd=ea.getBuffer(fd))?he=jd.dtype:"constant"in fd?(Fe=2,"number"===typeof fd.constant?(Ud=fd.constant,Nd=Kd=ae=0):(Ud=0<fd.constant.length?fd.constant[0]:0,Nd=1<fd.constant.length?fd.constant[1]:0,Kd=2<fd.constant.length?fd.constant[2]:0,ae=3<fd.constant.length?fd.constant[3]:0)):(jd=wa(fd.buffer)?ea.createStream(34962,fd.buffer):ea.getBuffer(fd.buffer),he="type"in fd?Cd[fd.type]:jd.dtype,ze=!!fd.normalized,
kd=fd.size|0,xd=fd.offset|0,Td=fd.stride|0,Dd=fd.divisor|0);qd=qa.location;Vc=ha[qd];if(1===Fe){Vc.buffer||W.enableVertexAttribArray(qd);wd=kd||4;if(Vc.type!==he||Vc.size!==wd||Vc.buffer!==jd||Vc.normalized!==ze||Vc.offset!==xd||Vc.stride!==Td)W.bindBuffer(34962,jd.buffer),W.vertexAttribPointer(qd,wd,he,ze,Td,xd),Vc.type=he,Vc.size=wd,Vc.buffer=jd,Vc.normalized=ze,Vc.offset=xd,Vc.stride=Td;Vc.divisor!==Dd&&(r.vertexAttribDivisorANGLE(qd,Dd),Vc.divisor=Dd)}else if(Vc.buffer&&(W.disableVertexAttribArray(qd),
Vc.buffer=null),Vc.x!==Ud||Vc.y!==Nd||Vc.z!==Kd||Vc.w!==ae)W.vertexAttrib4f(qd,Ud,Nd,Kd,ae),Vc.x=Ud,Vc.y=Nd,Vc.z=Kd,Vc.w=ae;ud=z.call(this,sa,a,0);ld=!1;yd=null;Fd=0;Hd=!1;ne=ke=0;ue=1;oe=0;le=5126;pe=fe=ve=ie=0;wa(ud)?(ld=!0,yd=ea.createStream(34962,ud),le=yd.dtype):(yd=ea.getBuffer(ud))?le=yd.dtype:"constant"in ud?(ue=2,"number"===typeof ud.constant?(ve=ud.constant,fe=pe=ie=0):(ve=0<ud.constant.length?ud.constant[0]:0,fe=1<ud.constant.length?ud.constant[1]:0,pe=2<ud.constant.length?ud.constant[2]:
0,ie=3<ud.constant.length?ud.constant[3]:0)):(yd=wa(ud.buffer)?ea.createStream(34962,ud.buffer):ea.getBuffer(ud.buffer),le="type"in ud?Cd[ud.type]:yd.dtype,Hd=!!ud.normalized,ne=ud.size|0,ke=ud.offset|0,oe=ud.stride|0,Fd=ud.divisor|0);Qc=da.location;id=ha[Qc];if(1===ue){id.buffer||W.enableVertexAttribArray(Qc);we=ne||1;if(id.type!==le||id.size!==we||id.buffer!==yd||id.normalized!==Hd||id.offset!==ke||id.stride!==oe)W.bindBuffer(34962,yd.buffer),W.vertexAttribPointer(Qc,we,le,Hd,oe,ke),id.type=le,
id.size=we,id.buffer=yd,id.normalized=Hd,id.offset=ke,id.stride=oe;id.divisor!==Fd&&(r.vertexAttribDivisorANGLE(Qc,Fd),id.divisor=Fd)}else if(id.buffer&&(W.disableVertexAttribArray(Qc),id.buffer=null),id.x!==ve||id.y!==fe||id.z!==pe||id.w!==ie)W.vertexAttrib4f(Qc,ve,fe,pe,ie),id.x=ve,id.y=fe,id.z=pe,id.w=ie;W.uniform1i(L.location,!1);W.uniform1f(va.location,sa.pixelRatio);se=a.scale;W.uniform2f(ba.location,se[0],se[1]);Qd=a.scaleFract;W.uniform2f(Ca.location,Qd[0],Qd[1]);Vd=a.translate;W.uniform2f(pa.location,
Vd[0],Vd[1]);Wd=a.translateFract;W.uniform2f(za.location,Wd[0],Wd[1]);Xd=e.call(this,sa,a,0);W.uniform2f(ia.location,Xd[0],Xd[1]);W.uniform1f(na.location,a.opacity);W.uniform1i(ya.location,l.bind());(qe=a.markerTexture)&&"framebuffer"===qe._reglType&&(qe=qe.color[0]);Ce=qe._texture;W.uniform1i(V.location,Ce.bind());Ge=a.elements;te=null;(te=(Ve=wa(Ge))?Ra.createStream(Ge):Ra.getElements(Ge))&&W.bindBuffer(34963,te.buffer.buffer);We=a.offset;if(Re=a.count)xe=Ea.instances,0<xe?te?r.drawElementsInstancedANGLE(0,
Re,te.type,We<<(te.type-5121>>1),xe):r.drawArraysInstancedANGLE(0,We,Re,xe):0>xe&&(te?W.drawElements(0,Re,te.type,We<<(te.type-5121>>1)):W.drawArrays(0,We,Re)),ua.dirty=!0,Ba.setVAO(null),sa.viewportWidth=B,sa.viewportHeight=x,F&&(d.cpuTime+=performance.now()-D),I&&ea.destroyStream(N),ma&&ea.destroyStream(fa),yb&&ea.destroyStream(ib),mb&&ea.destroyStream(Ya),Sa&&ea.destroyStream(wb),Xb&&ea.destroyStream(Qb),ec&&ea.destroyStream(ic),Ac&&ea.destroyStream(jd),ld&&ea.destroyStream(yd),l.unbind(),Ce.unbind(),
Ve&&Ra.destroyStream(te)},scope:function(c,e,b){var a,l,k,f,n,u,h,z,y,C,p,K,O,ha,W,Ka,P,L,N,V,S,Z,ba,Hb,M,R,Qa,Q,Y,da,ia,va,Ba,qa,aa,T,ka,X,Va,ca,pa,Ca,za,fa,oa,na,ya,ta,Gb,Ga,fb,Fa,Aa,Sb,Ta,bc,cc,Kc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Sd,Wa,Jb,Db,Ma,Id,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,Bd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,$d,Fc,sd,Pc,Yc,De,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Gd,re,xd,kd,ye,je,Ae,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,
le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=c.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:sa.framebufferWidth-l;n="height"in
a?a.height|0:sa.framebufferHeight-k;u=sa.viewportWidth;sa.viewportWidth=f;h=sa.viewportHeight;sa.viewportHeight=n;z=Pd[0];Pd[0]=l;y=Pd[1];Pd[1]=k;C=Pd[2];Pd[2]=f;p=Pd[3];Pd[3]=n;K=ja[0];ja[0]=0;O=ja[1];ja[1]=0;ha=ja[2];ja[2]=0;W=ja[3];ja[3]=1;Ka=Ia.blend_enable;Ia.blend_enable=!0;P=Ha[0];Ha[0]=770;L=Ha[1];Ha[1]=771;N=Ha[2];Ha[2]=773;V=Ha[3];Ha[3]=1;S=Ia.depth_enable;Ia.depth_enable=!1;Z=c.viewport;ba=Z.x|0;Hb=Z.y|0;M="width"in Z?Z.width|0:sa.framebufferWidth-ba;R="height"in Z?Z.height|0:sa.framebufferHeight-
Hb;Qa=Ad[0];Ad[0]=ba;Q=Ad[1];Ad[1]=Hb;Y=Ad[2];Ad[2]=M;da=Ad[3];Ad[3]=R;ia=Ia.scissor_enable;Ia.scissor_enable=!0;va=Ia.stencil_enable;Ia.stencil_enable=!1;if(Ba=ua.profile)qa=performance.now(),d.count++;aa=c.elements;T=null;T=(ka=wa(aa))?Ra.createStream(aa):Ra.getElements(aa);X=Ea.elements;Ea.elements=T;Va=c.offset;ca=Ea.offset;Ea.offset=Va;pa=c.count;Ca=Ea.count;Ea.count=pa;za=Ea.primitive;Ea.primitive=0;fa=xa[45];xa[45]=!1;oa=c.markerTexture;na=xa[48];xa[48]=oa;ya=c.opacity;ta=xa[10];xa[10]=ya;
Gb=g.call(this,sa,c,b);Ga=xa[46];xa[46]=Gb;fb=xa[47];xa[47]=q;Fa=sa.pixelRatio;Aa=xa[34];xa[34]=Fa;Sb=c.scale;Ta=xa[6];xa[6]=Sb;bc=c.scaleFract;cc=xa[7];xa[7]=bc;Kc=c.translate;jb=xa[8];xa[8]=Kc;qb=c.translateFract;Ja=xa[9];xa[9]=qb;tb=m.call(this,sa,c,b);La=!1;eb=null;gb=0;Na=!1;Ya=mb=0;vb=1;ub=0;Pa=5126;Db=Jb=Wa=Sd=0;wa(tb)?(La=!0,eb=ea.createStream(34962,tb),Pa=eb.dtype):(eb=ea.getBuffer(tb))?Pa=eb.dtype:"constant"in tb?(vb=2,"number"===typeof tb.constant?(Wa=tb.constant,Jb=Db=Sd=0):(Wa=0<tb.constant.length?
tb.constant[0]:0,Jb=1<tb.constant.length?tb.constant[1]:0,Db=2<tb.constant.length?tb.constant[2]:0,Sd=3<tb.constant.length?tb.constant[3]:0)):(eb=wa(tb.buffer)?ea.createStream(34962,tb.buffer):ea.getBuffer(tb.buffer),Pa="type"in tb?Cd[tb.type]:eb.dtype,Na=!!tb.normalized,Ya=tb.size|0,mb=tb.offset|0,ub=tb.stride|0,gb=tb.divisor|0);Ma=v.buffer;v.buffer=eb;Id=v.divisor;v.divisor=gb;$a=v.normalized;v.normalized=Na;Kb=v.offset;v.offset=mb;Lb=v.size;v.size=Ya;ob=v.state;v.state=vb;Oa=v.stride;v.stride=
ub;ac=v.type;v.type=Pa;Sa=v.w;v.w=Sd;wb=v.x;v.x=Wa;xb=v.y;v.y=Jb;Ua=v.z;v.z=Db;pb=w.call(this,sa,c,b);gc=!1;Bc=null;wc=0;cb=!1;Mc=kc=0;Za=1;Bd=0;Ab=5126;Xb=uc=Wb=ab=0;wa(pb)?(gc=!0,Bc=ea.createStream(34962,pb),Ab=Bc.dtype):(Bc=ea.getBuffer(pb))?Ab=Bc.dtype:"constant"in pb?(Za=2,"number"===typeof pb.constant?(Wb=pb.constant,uc=Xb=ab=0):(Wb=0<pb.constant.length?pb.constant[0]:0,uc=1<pb.constant.length?pb.constant[1]:0,Xb=2<pb.constant.length?pb.constant[2]:0,ab=3<pb.constant.length?pb.constant[3]:0)):
(Bc=wa(pb.buffer)?ea.createStream(34962,pb.buffer):ea.getBuffer(pb.buffer),Ab="type"in pb?Cd[pb.type]:Bc.dtype,cb=!!pb.normalized,Mc=pb.size|0,kc=pb.offset|0,Bd=pb.stride|0,wc=pb.divisor|0);Qb=B.buffer;B.buffer=Bc;Nc=B.divisor;B.divisor=wc;Rb=B.normalized;B.normalized=cb;$d=B.offset;B.offset=kc;Fc=B.size;B.size=Mc;sd=B.state;B.state=Za;Pc=B.stride;B.stride=Bd;Yc=B.type;B.type=Ab;De=B.w;B.w=ab;oc=B.x;B.x=Wb;xc=B.y;B.y=uc;hc=B.z;B.z=Xb;db=la.call(this,sa,c,b);tc=!1;Tb=null;Yb=0;ec=!1;zc=ic=0;Cc=1;dd=
0;Sc=5126;od=Zc=Uc=Tc=0;wa(db)?(tc=!0,Tb=ea.createStream(34962,db),Sc=Tb.dtype):(Tb=ea.getBuffer(db))?Sc=Tb.dtype:"constant"in db?(Cc=2,"number"===typeof db.constant?(Uc=db.constant,Zc=od=Tc=0):(Uc=0<db.constant.length?db.constant[0]:0,Zc=1<db.constant.length?db.constant[1]:0,od=2<db.constant.length?db.constant[2]:0,Tc=3<db.constant.length?db.constant[3]:0)):(Tb=wa(db.buffer)?ea.createStream(34962,db.buffer):ea.getBuffer(db.buffer),Sc="type"in db?Cd[db.type]:Tb.dtype,ec=!!db.normalized,zc=db.size|
0,ic=db.offset|0,dd=db.stride|0,Yb=db.divisor|0);ed=x.buffer;x.buffer=Tb;$c=x.divisor;x.divisor=Yb;lc=x.normalized;x.normalized=ec;dc=x.offset;x.offset=ic;ad=x.size;x.size=zc;Xc=x.state;x.state=Cc;fd=x.stride;x.stride=dd;Ac=x.type;x.type=Sc;jd=x.w;x.w=Tc;Gd=x.x;x.x=Uc;re=x.y;x.y=Zc;xd=x.z;x.z=od;kd=E.call(this,sa,c,b);ye=!1;je=null;Ae=0;ae=!1;Nd=Ud=0;Kd=1;qd=0;Vc=5126;yd=ld=ud=wd=0;wa(kd)?(ye=!0,je=ea.createStream(34962,kd),Vc=je.dtype):(je=ea.getBuffer(kd))?Vc=je.dtype:"constant"in kd?(Kd=2,"number"===
typeof kd.constant?(ud=kd.constant,ld=yd=wd=0):(ud=0<kd.constant.length?kd.constant[0]:0,ld=1<kd.constant.length?kd.constant[1]:0,yd=2<kd.constant.length?kd.constant[2]:0,wd=3<kd.constant.length?kd.constant[3]:0)):(je=wa(kd.buffer)?ea.createStream(34962,kd.buffer):ea.getBuffer(kd.buffer),Vc="type"in kd?Cd[kd.type]:je.dtype,ae=!!kd.normalized,Nd=kd.size|0,Ud=kd.offset|0,qd=kd.stride|0,Ae=kd.divisor|0);Fd=r.buffer;r.buffer=je;Hd=r.divisor;r.divisor=Ae;ke=r.normalized;r.normalized=ae;ne=r.offset;r.offset=
Ud;ue=r.size;r.size=Nd;oe=r.state;r.state=Kd;le=r.stride;r.stride=qd;ie=r.type;r.type=Vc;ve=r.w;r.w=wd;fe=r.x;r.x=ud;pe=r.y;r.y=ld;Qc=r.z;r.z=yd;id=H.call(this,sa,c,b);we=!1;se=null;Qd=0;Vd=!1;Xd=Wd=0;qe=1;Ce=0;Ge=5126;Re=We=Ve=te=0;wa(id)?(we=!0,se=ea.createStream(34962,id),Ge=se.dtype):(se=ea.getBuffer(id))?Ge=se.dtype:"constant"in id?(qe=2,"number"===typeof id.constant?(Ve=id.constant,We=Re=te=0):(Ve=0<id.constant.length?id.constant[0]:0,We=1<id.constant.length?id.constant[1]:0,Re=2<id.constant.length?
id.constant[2]:0,te=3<id.constant.length?id.constant[3]:0)):(se=wa(id.buffer)?ea.createStream(34962,id.buffer):ea.getBuffer(id.buffer),Ge="type"in id?Cd[id.type]:se.dtype,Vd=!!id.normalized,Xd=id.size|0,Wd=id.offset|0,Ce=id.stride|0,Qd=id.divisor|0);xe=ga.buffer;ga.buffer=se;Je=ga.divisor;ga.divisor=Qd;Le=ga.normalized;ga.normalized=Vd;Me=ga.offset;ga.offset=Wd;Ne=ga.size;ga.size=Xd;Ke=ga.state;ga.state=qe;Rd=ga.stride;ga.stride=Ce;be=ga.type;ga.type=Ge;ee=ga.w;ga.w=te;ge=ga.x;ga.x=Ve;Oe=ga.y;ga.y=
We;Ld=ga.z;ga.z=Re;Yd=F.call(this,sa,c,b);He=!1;Pe=null;df=0;cf=!1;Se=Xe=0;bf=1;af=0;Ye=5126;$e=de=Zd=Ze=0;wa(Yd)?(He=!0,Pe=ea.createStream(34962,Yd),Ye=Pe.dtype):(Pe=ea.getBuffer(Yd))?Ye=Pe.dtype:"constant"in Yd?(bf=2,"number"===typeof Yd.constant?(Zd=Yd.constant,de=$e=Ze=0):(Zd=0<Yd.constant.length?Yd.constant[0]:0,de=1<Yd.constant.length?Yd.constant[1]:0,$e=2<Yd.constant.length?Yd.constant[2]:0,Ze=3<Yd.constant.length?Yd.constant[3]:0)):(Pe=wa(Yd.buffer)?ea.createStream(34962,Yd.buffer):ea.getBuffer(Yd.buffer),
Ye="type"in Yd?Cd[Yd.type]:Pe.dtype,cf=!!Yd.normalized,Se=Yd.size|0,Xe=Yd.offset|0,af=Yd.stride|0,df=Yd.divisor|0);kf=A.buffer;A.buffer=Pe;of=A.divisor;A.divisor=df;gf=A.normalized;A.normalized=cf;lf=A.offset;A.offset=Xe;mf=A.size;A.size=Se;nf=A.state;A.state=bf;sf=A.stride;A.stride=af;pf=A.type;A.type=Ye;tf=A.w;A.w=Ze;Cf=A.x;A.x=Zd;Df=A.y;A.y=de;Te=A.z;A.z=$e;Ie=U.call(this,sa,c,b);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;wa(Ie)?(qf=!0,rf=ea.createStream(34962,Ie),yf=rf.dtype):
(rf=ea.getBuffer(Ie))?yf=rf.dtype:"constant"in Ie?(Gf=2,"number"===typeof Ie.constant?(zf=Ie.constant,Af=Jf=wf=0):(zf=0<Ie.constant.length?Ie.constant[0]:0,Af=1<Ie.constant.length?Ie.constant[1]:0,Jf=2<Ie.constant.length?Ie.constant[2]:0,wf=3<Ie.constant.length?Ie.constant[3]:0)):(rf=wa(Ie.buffer)?ea.createStream(34962,Ie.buffer):ea.getBuffer(Ie.buffer),yf="type"in Ie?Cd[Ie.type]:rf.dtype,Hf=!!Ie.normalized,Ff=Ie.size|0,Bf=Ie.offset|0,xf=Ie.stride|0,Ef=Ie.divisor|0);Kf=I.buffer;I.buffer=rf;Lf=I.divisor;
I.divisor=Ef;Mf=I.normalized;I.normalized=Hf;uf=I.offset;I.offset=Bf;Rf=I.size;I.size=Ff;If=I.state;I.state=Gf;vf=I.stride;I.stride=xf;dg=I.type;I.type=yf;Sf=I.w;I.w=wf;Tf=I.x;I.x=zf;qg=I.y;I.y=Af;hf=I.z;I.z=Jf;ef=G.call(this,sa,c,b);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;wa(ef)?(Nf=!0,Of=ea.createStream(34962,ef),Uf=Of.dtype):(Of=ea.getBuffer(ef))?Uf=Of.dtype:"constant"in ef?(ig=2,"number"===typeof ef.constant?(Yf=ef.constant,Zf=jg=Xf=0):(Yf=0<ef.constant.length?ef.constant[0]:
0,Zf=1<ef.constant.length?ef.constant[1]:0,jg=2<ef.constant.length?ef.constant[2]:0,Xf=3<ef.constant.length?ef.constant[3]:0)):(Of=wa(ef.buffer)?ea.createStream(34962,ef.buffer):ea.getBuffer(ef.buffer),Uf="type"in ef?Cd[ef.type]:Of.dtype,fg=!!ef.normalized,hg=ef.size|0,gg=ef.offset|0,Wf=ef.stride|0,eg=ef.divisor|0);rg=D.buffer;D.buffer=Of;sg=D.divisor;D.divisor=eg;tg=D.normalized;D.normalized=fg;ug=D.offset;D.offset=gg;vg=D.size;D.size=hg;wg=D.state;D.state=ig;xg=D.stride;D.stride=Wf;yg=D.type;D.type=
Uf;zg=D.w;D.w=Xf;Ag=D.x;D.x=Yf;Bg=D.y;D.y=Zf;jf=D.z;D.z=jg;ff=J.call(this,sa,c,b);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;wa(ff)?(Pf=!0,Qf=ea.createStream(34962,ff),Vf=Qf.dtype):(Qf=ea.getBuffer(ff))?Vf=Qf.dtype:"constant"in ff?(og=2,"number"===typeof ff.constant?(bg=ff.constant,cg=pg=ag=0):(bg=0<ff.constant.length?ff.constant[0]:0,cg=1<ff.constant.length?ff.constant[1]:0,pg=2<ff.constant.length?ff.constant[2]:0,ag=3<ff.constant.length?ff.constant[3]:0)):(Qf=wa(ff.buffer)?
ea.createStream(34962,ff.buffer):ea.getBuffer(ff.buffer),Vf="type"in ff?Cd[ff.type]:Qf.dtype,lg=!!ff.normalized,ng=ff.size|0,mg=ff.offset|0,$f=ff.stride|0,kg=ff.divisor|0);Cg=t.buffer;t.buffer=Qf;Dg=t.divisor;t.divisor=kg;Eg=t.normalized;t.normalized=lg;Fg=t.offset;t.offset=mg;Gg=t.size;t.size=ng;Hg=t.state;t.state=og;Ig=t.stride;t.stride=$f;Jg=t.type;t.type=Vf;Kg=t.w;t.w=ag;Lg=t.x;t.x=bg;Mg=t.y;t.y=cg;Ng=t.z;t.z=pg;Og=ra.vert;ra.vert=44;Pg=ra.frag;ra.frag=43;ua.dirty=!0;e(sa,c,b);sa.viewportWidth=
u;sa.viewportHeight=h;Pd[0]=z;Pd[1]=y;Pd[2]=C;Pd[3]=p;ja[0]=K;ja[1]=O;ja[2]=ha;ja[3]=W;Ia.blend_enable=Ka;Ha[0]=P;Ha[1]=L;Ha[2]=N;Ha[3]=V;Ia.depth_enable=S;Ad[0]=Qa;Ad[1]=Q;Ad[2]=Y;Ad[3]=da;Ia.scissor_enable=ia;Ia.stencil_enable=va;Ba&&(d.cpuTime+=performance.now()-qa);ka&&Ra.destroyStream(T);Ea.elements=X;Ea.offset=ca;Ea.count=Ca;Ea.primitive=za;xa[45]=fa;xa[48]=na;xa[10]=ta;xa[46]=Ga;xa[47]=fb;xa[34]=Aa;xa[6]=Ta;xa[7]=cc;xa[8]=jb;xa[9]=Ja;La&&ea.destroyStream(eb);v.buffer=Ma;v.divisor=Id;v.normalized=
$a;v.offset=Kb;v.size=Lb;v.state=ob;v.stride=Oa;v.type=ac;v.w=Sa;v.x=wb;v.y=xb;v.z=Ua;gc&&ea.destroyStream(Bc);B.buffer=Qb;B.divisor=Nc;B.normalized=Rb;B.offset=$d;B.size=Fc;B.state=sd;B.stride=Pc;B.type=Yc;B.w=De;B.x=oc;B.y=xc;B.z=hc;tc&&ea.destroyStream(Tb);x.buffer=ed;x.divisor=$c;x.normalized=lc;x.offset=dc;x.size=ad;x.state=Xc;x.stride=fd;x.type=Ac;x.w=jd;x.x=Gd;x.y=re;x.z=xd;ye&&ea.destroyStream(je);r.buffer=Fd;r.divisor=Hd;r.normalized=ke;r.offset=ne;r.size=ue;r.state=oe;r.stride=le;r.type=
ie;r.w=ve;r.x=fe;r.y=pe;r.z=Qc;we&&ea.destroyStream(se);ga.buffer=xe;ga.divisor=Je;ga.normalized=Le;ga.offset=Me;ga.size=Ne;ga.state=Ke;ga.stride=Rd;ga.type=be;ga.w=ee;ga.x=ge;ga.y=Oe;ga.z=Ld;He&&ea.destroyStream(Pe);A.buffer=kf;A.divisor=of;A.normalized=gf;A.offset=lf;A.size=mf;A.state=nf;A.stride=sf;A.type=pf;A.w=tf;A.x=Cf;A.y=Df;A.z=Te;qf&&ea.destroyStream(rf);I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=uf;I.size=Rf;I.state=If;I.stride=vf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=hf;Nf&&ea.destroyStream(Of);
D.buffer=rg;D.divisor=sg;D.normalized=tg;D.offset=ug;D.size=vg;D.state=wg;D.stride=xg;D.type=yg;D.w=zg;D.x=Ag;D.y=Bg;D.z=jf;Pf&&ea.destroyStream(Qf);t.buffer=Cg;t.divisor=Dg;t.normalized=Eg;t.offset=Fg;t.size=Gg;t.state=Hg;t.stride=Ig;t.type=Jg;t.w=Kg;t.x=Lg;t.y=Mg;t.z=Ng;ra.vert=Og;ra.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,d,h,u,
p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,ga,F,A,U,I,G,D,J,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb){var Va,ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,xa,Ba,ja,Y,ta,Fa,Ha,fb,aa,Kc,bc,Ga,cc,Sb,Ae,Id,Ad,Sd,De,ye,$d,re,je,Gd,Pd,Bd;Va=a.attributes;ha=a.buffer;ea=a.context;sa=a.current;ua=a.draw;Ea=a.elements;Ra=a.extensions;Gb=a.framebuffer;Z=a.gl;W=a.isBufferArgs;wa=a.next;Ia=a.shader;ra=a.uniforms;xa=a.vao;Ba=wa.blend_color;ja=sa.blend_color;Y=wa.blend_equation;ta=sa.blend_equation;
Fa=wa.blend_func;Ha=sa.blend_func;fb=wa.colorMask;aa=sa.colorMask;Kc=wa.depth_range;bc=sa.depth_range;Ga=wa.polygonOffset_offset;cc=sa.polygonOffset_offset;Sb=wa.sample_coverage;Ae=sa.sample_coverage;Id=wa.scissor_box;Ad=sa.scissor_box;Sd=wa.stencil_func;De=sa.stencil_func;ye=wa.stencil_opBack;$d=sa.stencil_opBack;re=wa.stencil_opFront;je=sa.stencil_opFront;Gd=wa.viewport;Pd=sa.viewport;Bd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(c,
e){var b,a,l,k,f,g;b=Gb.next;b!==Gb.cur&&(b?Z.bindFramebuffer(36160,b.framebuffer):Z.bindFramebuffer(36160,null),Gb.cur=b);if(sa.dirty){var m,q,t,v,w,n,h,u,B,x,z,y,C,p,E,la,A,H,F,r,D,Ia,I,G,ra,Da,Ba,ga,U,J,ma,Fa,hb,Mb;m=wa.dither;m!==sa.dither&&(m?Z.enable(3024):Z.disable(3024),sa.dither=m);q=Y[0];t=Y[1];if(q!==ta[0]||t!==ta[1])Z.blendEquationSeparate(q,t),ta[0]=q,ta[1]=t;v=wa.depth_func;v!==sa.depth_func&&(Z.depthFunc(v),sa.depth_func=v);w=Kc[0];n=Kc[1];if(w!==bc[0]||n!==bc[1])Z.depthRange(w,n),
bc[0]=w,bc[1]=n;h=wa.depth_mask;h!==sa.depth_mask&&(Z.depthMask(h),sa.depth_mask=h);u=fb[0];B=fb[1];x=fb[2];z=fb[3];if(u!==aa[0]||B!==aa[1]||x!==aa[2]||z!==aa[3])Z.colorMask(u,B,x,z),aa[0]=u,aa[1]=B,aa[2]=x,aa[3]=z;y=wa.cull_enable;y!==sa.cull_enable&&(y?Z.enable(2884):Z.disable(2884),sa.cull_enable=y);C=wa.cull_face;C!==sa.cull_face&&(Z.cullFace(C),sa.cull_face=C);p=wa.frontFace;p!==sa.frontFace&&(Z.frontFace(p),sa.frontFace=p);E=wa.lineWidth;E!==sa.lineWidth&&(Z.lineWidth(E),sa.lineWidth=E);la=
wa.polygonOffset_enable;la!==sa.polygonOffset_enable&&(la?Z.enable(32823):Z.disable(32823),sa.polygonOffset_enable=la);A=Ga[0];H=Ga[1];if(A!==cc[0]||H!==cc[1])Z.polygonOffset(A,H),cc[0]=A,cc[1]=H;F=wa.sample_alpha;F!==sa.sample_alpha&&(F?Z.enable(32926):Z.disable(32926),sa.sample_alpha=F);r=wa.sample_enable;r!==sa.sample_enable&&(r?Z.enable(32928):Z.disable(32928),sa.sample_enable=r);D=Sb[0];Ia=Sb[1];if(D!==Ae[0]||Ia!==Ae[1])Z.sampleCoverage(D,Ia),Ae[0]=D,Ae[1]=Ia;I=wa.stencil_mask;I!==sa.stencil_mask&&
(Z.stencilMask(I),sa.stencil_mask=I);G=Sd[0];ra=Sd[1];Da=Sd[2];if(G!==De[0]||ra!==De[1]||Da!==De[2])Z.stencilFunc(G,ra,Da),De[0]=G,De[1]=ra,De[2]=Da;Ba=re[0];ga=re[1];U=re[2];J=re[3];if(Ba!==je[0]||ga!==je[1]||U!==je[2]||J!==je[3])Z.stencilOpSeparate(Ba,ga,U,J),je[0]=Ba,je[1]=ga,je[2]=U,je[3]=J;ma=ye[0];Fa=ye[1];hb=ye[2];Mb=ye[3];if(ma!==$d[0]||Fa!==$d[1]||hb!==$d[2]||Mb!==$d[3])Z.stencilOpSeparate(ma,Fa,hb,Mb),$d[0]=ma,$d[1]=Fa,$d[2]=hb,$d[3]=Mb}Z.blendColor(0,0,0,1);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=
1;Z.enable(3042);sa.blend_enable=!0;Z.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;Z.disable(2929);sa.depth_enable=!1;Z.enable(3089);sa.scissor_enable=!0;Z.disable(2960);sa.stencil_enable=!1;if(a=sa.profile)l=performance.now(),d.count+=e;Z.useProgram(ca.program);k=Ra.angle_instanced_arrays;var bb;xa.setVAO(null);Z.uniform1i(L.location,!1);Z.uniform1i(ia.location,Q.bind());bb=ua.instances;for(f=0;f<e;++f){g=c[f];var kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,
jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,Id,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Gd,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,
xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;kb=g.viewport;Xa=kb.x|0;Jc=kb.y|0;Nb="width"in kb?kb.width|0:ea.framebufferWidth-Xa;Ib="height"in kb?kb.height|0:ea.framebufferHeight-Jc;sc=ea.viewportWidth;ea.viewportWidth=Nb;Ob=ea.viewportHeight;ea.viewportHeight=Ib;Z.viewport(Xa,Jc,Nb,Ib);Pd[0]=Xa;Pd[1]=Jc;Pd[2]=Nb;Pd[3]=Ib;lb=g.viewport;Fb=lb.x|0;Cb=lb.y|0;yb="width"in lb?lb.width|0:ea.framebufferWidth-Fb;ib="height"in lb?lb.height|0:ea.framebufferHeight-Cb;Z.scissor(Fb,Cb,yb,ib);Ad[0]=Fb;Ad[1]=Cb;Ad[2]=
yb;Ad[3]=ib;$b=M.call(this,ea,g,f);Pb=!1;rb=null;Ta=0;Ub=!1;jc=sb=0;jb=1;qb=0;Ja=5126;gb=eb=La=tb=0;W($b)?(Pb=!0,rb=ha.createStream(34962,$b),Ja=rb.dtype):(rb=ha.getBuffer($b))?Ja=rb.dtype:"constant"in $b?(jb=2,"number"===typeof $b.constant?(La=$b.constant,eb=gb=tb=0):(La=0<$b.constant.length?$b.constant[0]:0,eb=1<$b.constant.length?$b.constant[1]:0,gb=2<$b.constant.length?$b.constant[2]:0,tb=3<$b.constant.length?$b.constant[3]:0)):(rb=W($b.buffer)?ha.createStream(34962,$b.buffer):ha.getBuffer($b.buffer),
Ja="type"in $b?Bd[$b.type]:rb.dtype,Ub=!!$b.normalized,jc=$b.size|0,sb=$b.offset|0,qb=$b.stride|0,Ta=$b.divisor|0);Na=za.location;mb=Va[Na];if(1===jb){mb.buffer||Z.enableVertexAttribArray(Na);Ya=jc||1;if(mb.type!==Ja||mb.size!==Ya||mb.buffer!==rb||mb.normalized!==Ub||mb.offset!==sb||mb.stride!==qb)Z.bindBuffer(34962,rb.buffer),Z.vertexAttribPointer(Na,Ya,Ja,Ub,qb,sb),mb.type=Ja,mb.size=Ya,mb.buffer=rb,mb.normalized=Ub,mb.offset=sb,mb.stride=qb;mb.divisor!==Ta&&(k.vertexAttribDivisorANGLE(Na,Ta),mb.divisor=
Ta)}else if(mb.buffer&&(Z.disableVertexAttribArray(Na),mb.buffer=null),mb.x!==La||mb.y!==eb||mb.z!==gb||mb.w!==tb)Z.vertexAttrib4f(Na,La,eb,gb,tb),mb.x=La,mb.y=eb,mb.z=gb,mb.w=tb;vb=fa.call(this,ea,g,f);ub=!1;Pa=null;Dc=0;Wa=!1;Db=Jb=0;Ma=1;Id=0;$a=5126;Oa=ob=Lb=Kb=0;W(vb)?(ub=!0,Pa=ha.createStream(34962,vb),$a=Pa.dtype):(Pa=ha.getBuffer(vb))?$a=Pa.dtype:"constant"in vb?(Ma=2,"number"===typeof vb.constant?(Lb=vb.constant,ob=Oa=Kb=0):(Lb=0<vb.constant.length?vb.constant[0]:0,ob=1<vb.constant.length?
vb.constant[1]:0,Oa=2<vb.constant.length?vb.constant[2]:0,Kb=3<vb.constant.length?vb.constant[3]:0)):(Pa=W(vb.buffer)?ha.createStream(34962,vb.buffer):ha.getBuffer(vb.buffer),$a="type"in vb?Bd[vb.type]:Pa.dtype,Wa=!!vb.normalized,Db=vb.size|0,Jb=vb.offset|0,Id=vb.stride|0,Dc=vb.divisor|0);ac=Ka.location;Sa=Va[ac];if(1===Ma){Sa.buffer||Z.enableVertexAttribArray(ac);wb=Db||1;if(Sa.type!==$a||Sa.size!==wb||Sa.buffer!==Pa||Sa.normalized!==Wa||Sa.offset!==Jb||Sa.stride!==Id)Z.bindBuffer(34962,Pa.buffer),
Z.vertexAttribPointer(ac,wb,$a,Wa,Id,Jb),Sa.type=$a,Sa.size=wb,Sa.buffer=Pa,Sa.normalized=Wa,Sa.offset=Jb,Sa.stride=Id;Sa.divisor!==Dc&&(k.vertexAttribDivisorANGLE(ac,Dc),Sa.divisor=Dc)}else if(Sa.buffer&&(Z.disableVertexAttribArray(ac),Sa.buffer=null),Sa.x!==Lb||Sa.y!==ob||Sa.z!==Oa||Sa.w!==Kb)Z.vertexAttrib4f(ac,Lb,ob,Oa,Kb),Sa.x=Lb,Sa.y=ob,Sa.z=Oa,Sa.w=Kb;xb=Aa.call(this,ea,g,f);Ua=!1;pb=null;gc=0;Bc=!1;cb=wc=0;kc=1;Mc=0;Za=5126;Wb=ab=Ab=nd=0;W(xb)?(Ua=!0,pb=ha.createStream(34962,xb),Za=pb.dtype):
(pb=ha.getBuffer(xb))?Za=pb.dtype:"constant"in xb?(kc=2,"number"===typeof xb.constant?(Ab=xb.constant,ab=Wb=nd=0):(Ab=0<xb.constant.length?xb.constant[0]:0,ab=1<xb.constant.length?xb.constant[1]:0,Wb=2<xb.constant.length?xb.constant[2]:0,nd=3<xb.constant.length?xb.constant[3]:0)):(pb=W(xb.buffer)?ha.createStream(34962,xb.buffer):ha.getBuffer(xb.buffer),Za="type"in xb?Bd[xb.type]:pb.dtype,Bc=!!xb.normalized,cb=xb.size|0,wc=xb.offset|0,Mc=xb.stride|0,gc=xb.divisor|0);uc=Qa.location;Xb=Va[uc];if(1===
kc){Xb.buffer||Z.enableVertexAttribArray(uc);Qb=cb||1;if(Xb.type!==Za||Xb.size!==Qb||Xb.buffer!==pb||Xb.normalized!==Bc||Xb.offset!==wc||Xb.stride!==Mc)Z.bindBuffer(34962,pb.buffer),Z.vertexAttribPointer(uc,Qb,Za,Bc,Mc,wc),Xb.type=Za,Xb.size=Qb,Xb.buffer=pb,Xb.normalized=Bc,Xb.offset=wc,Xb.stride=Mc;Xb.divisor!==gc&&(k.vertexAttribDivisorANGLE(uc,gc),Xb.divisor=gc)}else if(Xb.buffer&&(Z.disableVertexAttribArray(uc),Xb.buffer=null),Xb.x!==Ab||Xb.y!==ab||Xb.z!==Wb||Xb.w!==nd)Z.vertexAttrib4f(uc,Ab,
ab,Wb,nd),Xb.x=Ab,Xb.y=ab,Xb.z=Wb,Xb.w=nd;Nc=T.call(this,ea,g,f);Rb=!1;Gd=null;Fc=0;sd=!1;Yc=Pc=0;vd=1;oc=0;xc=5126;Tb=tc=db=hc=0;W(Nc)?(Rb=!0,Gd=ha.createStream(34962,Nc),xc=Gd.dtype):(Gd=ha.getBuffer(Nc))?xc=Gd.dtype:"constant"in Nc?(vd=2,"number"===typeof Nc.constant?(db=Nc.constant,tc=Tb=hc=0):(db=0<Nc.constant.length?Nc.constant[0]:0,tc=1<Nc.constant.length?Nc.constant[1]:0,Tb=2<Nc.constant.length?Nc.constant[2]:0,hc=3<Nc.constant.length?Nc.constant[3]:0)):(Gd=W(Nc.buffer)?ha.createStream(34962,
Nc.buffer):ha.getBuffer(Nc.buffer),xc="type"in Nc?Bd[Nc.type]:Gd.dtype,sd=!!Nc.normalized,Yc=Nc.size|0,Pc=Nc.offset|0,oc=Nc.stride|0,Fc=Nc.divisor|0);Yb=Hb.location;ec=Va[Yb];if(1===vd){ec.buffer||Z.enableVertexAttribArray(Yb);ic=Yc||1;if(ec.type!==xc||ec.size!==ic||ec.buffer!==Gd||ec.normalized!==sd||ec.offset!==Pc||ec.stride!==oc)Z.bindBuffer(34962,Gd.buffer),Z.vertexAttribPointer(Yb,ic,xc,sd,oc,Pc),ec.type=xc,ec.size=ic,ec.buffer=Gd,ec.normalized=sd,ec.offset=Pc,ec.stride=oc;ec.divisor!==Fc&&(k.vertexAttribDivisorANGLE(Yb,
Fc),ec.divisor=Fc)}else if(ec.buffer&&(Z.disableVertexAttribArray(Yb),ec.buffer=null),ec.x!==db||ec.y!==tc||ec.z!==Tb||ec.w!==hc)Z.vertexAttrib4f(Yb,db,tc,Tb,hc),ec.x=db,ec.y=tc,ec.z=Tb,ec.w=hc;zc=X.call(this,ea,g,f);Cc=!1;dd=null;Sc=0;Tc=!1;Zc=Uc=0;od=1;ed=0;$c=5126;Xc=ad=dc=lc=0;W(zc)?(Cc=!0,dd=ha.createStream(34962,zc),$c=dd.dtype):(dd=ha.getBuffer(zc))?$c=dd.dtype:"constant"in zc?(od=2,"number"===typeof zc.constant?(dc=zc.constant,ad=Xc=lc=0):(dc=0<zc.constant.length?zc.constant[0]:0,ad=1<zc.constant.length?
zc.constant[1]:0,Xc=2<zc.constant.length?zc.constant[2]:0,lc=3<zc.constant.length?zc.constant[3]:0)):(dd=W(zc.buffer)?ha.createStream(34962,zc.buffer):ha.getBuffer(zc.buffer),$c="type"in zc?Bd[zc.type]:dd.dtype,Tc=!!zc.normalized,Zc=zc.size|0,Uc=zc.offset|0,ed=zc.stride|0,Sc=zc.divisor|0);fd=Ca.location;Ac=Va[fd];if(1===od){Ac.buffer||Z.enableVertexAttribArray(fd);jd=Zc||1;if(Ac.type!==$c||Ac.size!==jd||Ac.buffer!==dd||Ac.normalized!==Tc||Ac.offset!==Uc||Ac.stride!==ed)Z.bindBuffer(34962,dd.buffer),
Z.vertexAttribPointer(fd,jd,$c,Tc,ed,Uc),Ac.type=$c,Ac.size=jd,Ac.buffer=dd,Ac.normalized=Tc,Ac.offset=Uc,Ac.stride=ed;Ac.divisor!==Sc&&(k.vertexAttribDivisorANGLE(fd,Sc),Ac.divisor=Sc)}else if(Ac.buffer&&(Z.disableVertexAttribArray(fd),Ac.buffer=null),Ac.x!==dc||Ac.y!==ad||Ac.z!==Xc||Ac.w!==lc)Z.vertexAttrib4f(fd,dc,ad,Xc,lc),Ac.x=dc,Ac.y=ad,Ac.z=Xc,Ac.w=lc;Dd=S.call(this,ea,g,f);ze=!1;xd=null;kd=0;Fe=!1;he=Td=0;ae=1;Ud=0;Nd=5126;wd=Vc=qd=Kd=0;W(Dd)?(ze=!0,xd=ha.createStream(34962,Dd),Nd=xd.dtype):
(xd=ha.getBuffer(Dd))?Nd=xd.dtype:"constant"in Dd?(ae=2,"number"===typeof Dd.constant?(qd=Dd.constant,Vc=wd=Kd=0):(qd=0<Dd.constant.length?Dd.constant[0]:0,Vc=1<Dd.constant.length?Dd.constant[1]:0,wd=2<Dd.constant.length?Dd.constant[2]:0,Kd=3<Dd.constant.length?Dd.constant[3]:0)):(xd=W(Dd.buffer)?ha.createStream(34962,Dd.buffer):ha.getBuffer(Dd.buffer),Nd="type"in Dd?Bd[Dd.type]:xd.dtype,Fe=!!Dd.normalized,he=Dd.size|0,Td=Dd.offset|0,Ud=Dd.stride|0,kd=Dd.divisor|0);ud=oa.location;ld=Va[ud];if(1===
ae){ld.buffer||Z.enableVertexAttribArray(ud);yd=he||1;if(ld.type!==Nd||ld.size!==yd||ld.buffer!==xd||ld.normalized!==Fe||ld.offset!==Td||ld.stride!==Ud)Z.bindBuffer(34962,xd.buffer),Z.vertexAttribPointer(ud,yd,Nd,Fe,Ud,Td),ld.type=Nd,ld.size=yd,ld.buffer=xd,ld.normalized=Fe,ld.offset=Td,ld.stride=Ud;ld.divisor!==kd&&(k.vertexAttribDivisorANGLE(ud,kd),ld.divisor=kd)}else if(ld.buffer&&(Z.disableVertexAttribArray(ud),ld.buffer=null),ld.x!==qd||ld.y!==Vc||ld.z!==wd||ld.w!==Kd)Z.vertexAttrib4f(ud,qd,
Vc,wd,Kd),ld.x=qd,ld.y=Vc,ld.z=wd,ld.w=Kd;Fd=P.call(this,ea,g,f);Hd=!1;ke=null;ne=0;ue=!1;le=oe=0;ie=1;ve=0;fe=5126;we=id=Qc=pe=0;W(Fd)?(Hd=!0,ke=ha.createStream(34962,Fd),fe=ke.dtype):(ke=ha.getBuffer(Fd))?fe=ke.dtype:"constant"in Fd?(ie=2,"number"===typeof Fd.constant?(Qc=Fd.constant,id=we=pe=0):(Qc=0<Fd.constant.length?Fd.constant[0]:0,id=1<Fd.constant.length?Fd.constant[1]:0,we=2<Fd.constant.length?Fd.constant[2]:0,pe=3<Fd.constant.length?Fd.constant[3]:0)):(ke=W(Fd.buffer)?ha.createStream(34962,
Fd.buffer):ha.getBuffer(Fd.buffer),fe="type"in Fd?Bd[Fd.type]:ke.dtype,ue=!!Fd.normalized,le=Fd.size|0,oe=Fd.offset|0,ve=Fd.stride|0,ne=Fd.divisor|0);se=K.location;Qd=Va[se];if(1===ie){Qd.buffer||Z.enableVertexAttribArray(se);Vd=le||4;if(Qd.type!==fe||Qd.size!==Vd||Qd.buffer!==ke||Qd.normalized!==ue||Qd.offset!==oe||Qd.stride!==ve)Z.bindBuffer(34962,ke.buffer),Z.vertexAttribPointer(se,Vd,fe,ue,ve,oe),Qd.type=fe,Qd.size=Vd,Qd.buffer=ke,Qd.normalized=ue,Qd.offset=oe,Qd.stride=ve;Qd.divisor!==ne&&(k.vertexAttribDivisorANGLE(se,
ne),Qd.divisor=ne)}else if(Qd.buffer&&(Z.disableVertexAttribArray(se),Qd.buffer=null),Qd.x!==Qc||Qd.y!==id||Qd.z!==we||Qd.w!==pe)Z.vertexAttrib4f(se,Qc,id,we,pe),Qd.x=Qc,Qd.y=id,Qd.z=we,Qd.w=pe;Wd=N.call(this,ea,g,f);Xd=!1;qe=null;Ce=0;Ge=!1;Ve=te=0;We=1;Re=0;xe=5126;Ne=Me=Le=Je=0;W(Wd)?(Xd=!0,qe=ha.createStream(34962,Wd),xe=qe.dtype):(qe=ha.getBuffer(Wd))?xe=qe.dtype:"constant"in Wd?(We=2,"number"===typeof Wd.constant?(Le=Wd.constant,Me=Ne=Je=0):(Le=0<Wd.constant.length?Wd.constant[0]:0,Me=1<Wd.constant.length?
Wd.constant[1]:0,Ne=2<Wd.constant.length?Wd.constant[2]:0,Je=3<Wd.constant.length?Wd.constant[3]:0)):(qe=W(Wd.buffer)?ha.createStream(34962,Wd.buffer):ha.getBuffer(Wd.buffer),xe="type"in Wd?Bd[Wd.type]:qe.dtype,Ge=!!Wd.normalized,Ve=Wd.size|0,te=Wd.offset|0,Re=Wd.stride|0,Ce=Wd.divisor|0);Ke=qa.location;Rd=Va[Ke];if(1===We){Rd.buffer||Z.enableVertexAttribArray(Ke);be=Ve||4;if(Rd.type!==xe||Rd.size!==be||Rd.buffer!==qe||Rd.normalized!==Ge||Rd.offset!==te||Rd.stride!==Re)Z.bindBuffer(34962,qe.buffer),
Z.vertexAttribPointer(Ke,be,xe,Ge,Re,te),Rd.type=xe,Rd.size=be,Rd.buffer=qe,Rd.normalized=Ge,Rd.offset=te,Rd.stride=Re;Rd.divisor!==Ce&&(k.vertexAttribDivisorANGLE(Ke,Ce),Rd.divisor=Ce)}else if(Rd.buffer&&(Z.disableVertexAttribArray(Ke),Rd.buffer=null),Rd.x!==Le||Rd.y!==Me||Rd.z!==Ne||Rd.w!==Je)Z.vertexAttrib4f(Ke,Le,Me,Ne,Je),Rd.x=Le,Rd.y=Me,Rd.z=Ne,Rd.w=Je;ee=O.call(this,ea,g,f);ge=!1;Oe=null;Ld=0;Yd=!1;Pe=He=0;df=1;cf=0;Xe=5126;Ye=af=bf=Se=0;W(ee)?(ge=!0,Oe=ha.createStream(34962,ee),Xe=Oe.dtype):
(Oe=ha.getBuffer(ee))?Xe=Oe.dtype:"constant"in ee?(df=2,"number"===typeof ee.constant?(bf=ee.constant,af=Ye=Se=0):(bf=0<ee.constant.length?ee.constant[0]:0,af=1<ee.constant.length?ee.constant[1]:0,Ye=2<ee.constant.length?ee.constant[2]:0,Se=3<ee.constant.length?ee.constant[3]:0)):(Oe=W(ee.buffer)?ha.createStream(34962,ee.buffer):ha.getBuffer(ee.buffer),Xe="type"in ee?Bd[ee.type]:Oe.dtype,Yd=!!ee.normalized,Pe=ee.size|0,He=ee.offset|0,cf=ee.stride|0,Ld=ee.divisor|0);Ze=da.location;Zd=Va[Ze];if(1===
df){Zd.buffer||Z.enableVertexAttribArray(Ze);de=Pe||1;if(Zd.type!==Xe||Zd.size!==de||Zd.buffer!==Oe||Zd.normalized!==Yd||Zd.offset!==He||Zd.stride!==cf)Z.bindBuffer(34962,Oe.buffer),Z.vertexAttribPointer(Ze,de,Xe,Yd,cf,He),Zd.type=Xe,Zd.size=de,Zd.buffer=Oe,Zd.normalized=Yd,Zd.offset=He,Zd.stride=cf;Zd.divisor!==Ld&&(k.vertexAttribDivisorANGLE(Ze,Ld),Zd.divisor=Ld)}else if(Zd.buffer&&(Z.disableVertexAttribArray(Ze),Zd.buffer=null),Zd.x!==bf||Zd.y!==af||Zd.z!==Ye||Zd.w!==Se)Z.vertexAttrib4f(Ze,bf,
af,Ye,Se),Zd.x=bf,Zd.y=af,Zd.z=Ye,Zd.w=Se;$e=ea.pixelRatio;f&&kf===$e||(kf=$e,Z.uniform1f(ya.location,$e));of=R.call(this,ea,g,f);gf=of[0];mf=of[1];f&&lf===gf&&nf===mf||(lf=gf,nf=mf,Z.uniform2f(na.location,gf,mf));sf=g.scale;pf=sf[0];Cf=sf[1];f&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,Z.uniform2f(va.location,pf,Cf));Te=g.scaleFract;Ie=Te[0];rf=Te[1];f&&qf===Ie&&Ef===rf||(qf=Ie,Ef=rf,Z.uniform2f(ba.location,Ie,rf));Hf=g.translate;Bf=Hf[0];Gf=Hf[1];f&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,Z.uniform2f(ka.location,Bf,
Gf));yf=g.translateFract;wf=yf[0];Af=yf[1];f&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,Z.uniform2f(pa.location,wf,Af));Kf=g.opacity;f&&Lf===Kf||(Lf=Kf,Z.uniform1f(V.location,Kf));Mf=g.elements;uf=null;(uf=(Rf=W(Mf))?Ea.createStream(Mf):Ea.getElements(Mf))&&Z.bindBuffer(34963,uf.buffer.buffer);If=g.offset;if(vf=g.count)0<bb?uf?k.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),bb):k.drawArraysInstancedANGLE(0,If,vf,bb):0>bb&&(uf?Z.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):Z.drawArrays(0,
If,vf)),ea.viewportWidth=sc,ea.viewportHeight=Ob,Pb&&ha.destroyStream(rb),ub&&ha.destroyStream(Pa),Ua&&ha.destroyStream(pb),Rb&&ha.destroyStream(Gd),Cc&&ha.destroyStream(dd),ze&&ha.destroyStream(xd),Hd&&ha.destroyStream(ke),Xd&&ha.destroyStream(qe),ge&&ha.destroyStream(Oe),Rf&&Ea.destroyStream(uf)}Q.unbind();sa.dirty=!0;xa.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(a){var g,m,q,t,v,w,B,x,E,O,la,A,H,F,r,D,P,Ia,I,N,G,ra,S,M,R,Q,Da,Ba,T,ga,X,U,J,ca,fa,ma,Fa,Aa,Zb,hb,Mb,bb,kb,Xa,
Id,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,Gd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd,ze,xd,kd,Fe,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve;g=Gb.next;g!==Gb.cur&&(g?Z.bindFramebuffer(36160,g.framebuffer):Z.bindFramebuffer(36160,null),
Gb.cur=g);if(sa.dirty){var We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf;We=wa.dither;We!==sa.dither&&(We?Z.enable(3024):Z.disable(3024),sa.dither=We);Re=Y[0];xe=Y[1];if(Re!==ta[0]||xe!==ta[1])Z.blendEquationSeparate(Re,xe),ta[0]=Re,ta[1]=xe;Je=wa.depth_func;Je!==sa.depth_func&&(Z.depthFunc(Je),sa.depth_func=Je);Le=Kc[0];Me=Kc[1];if(Le!==bc[0]||Me!==bc[1])Z.depthRange(Le,Me),bc[0]=Le,bc[1]=Me;Ne=wa.depth_mask;Ne!==sa.depth_mask&&(Z.depthMask(Ne),
sa.depth_mask=Ne);Ke=fb[0];Rd=fb[1];be=fb[2];ee=fb[3];if(Ke!==aa[0]||Rd!==aa[1]||be!==aa[2]||ee!==aa[3])Z.colorMask(Ke,Rd,be,ee),aa[0]=Ke,aa[1]=Rd,aa[2]=be,aa[3]=ee;ge=wa.cull_enable;ge!==sa.cull_enable&&(ge?Z.enable(2884):Z.disable(2884),sa.cull_enable=ge);Oe=wa.cull_face;Oe!==sa.cull_face&&(Z.cullFace(Oe),sa.cull_face=Oe);Ld=wa.frontFace;Ld!==sa.frontFace&&(Z.frontFace(Ld),sa.frontFace=Ld);Yd=wa.lineWidth;Yd!==sa.lineWidth&&(Z.lineWidth(Yd),sa.lineWidth=Yd);He=wa.polygonOffset_enable;He!==sa.polygonOffset_enable&&
(He?Z.enable(32823):Z.disable(32823),sa.polygonOffset_enable=He);Pe=Ga[0];df=Ga[1];if(Pe!==cc[0]||df!==cc[1])Z.polygonOffset(Pe,df),cc[0]=Pe,cc[1]=df;cf=wa.sample_alpha;cf!==sa.sample_alpha&&(cf?Z.enable(32926):Z.disable(32926),sa.sample_alpha=cf);Xe=wa.sample_enable;Xe!==sa.sample_enable&&(Xe?Z.enable(32928):Z.disable(32928),sa.sample_enable=Xe);Se=Sb[0];bf=Sb[1];if(Se!==Ae[0]||bf!==Ae[1])Z.sampleCoverage(Se,bf),Ae[0]=Se,Ae[1]=bf;af=wa.stencil_mask;af!==sa.stencil_mask&&(Z.stencilMask(af),sa.stencil_mask=
af);Ye=Sd[0];Ze=Sd[1];Zd=Sd[2];if(Ye!==De[0]||Ze!==De[1]||Zd!==De[2])Z.stencilFunc(Ye,Ze,Zd),De[0]=Ye,De[1]=Ze,De[2]=Zd;de=re[0];$e=re[1];kf=re[2];of=re[3];if(de!==je[0]||$e!==je[1]||kf!==je[2]||of!==je[3])Z.stencilOpSeparate(de,$e,kf,of),je[0]=de,je[1]=$e,je[2]=kf,je[3]=of;gf=ye[0];lf=ye[1];mf=ye[2];nf=ye[3];if(gf!==$d[0]||lf!==$d[1]||mf!==$d[2]||nf!==$d[3])Z.stencilOpSeparate(gf,lf,mf,nf),$d[0]=gf,$d[1]=lf,$d[2]=mf,$d[3]=nf}m=a.viewport;q=m.x|0;t=m.y|0;v="width"in m?m.width|0:ea.framebufferWidth-
q;w="height"in m?m.height|0:ea.framebufferHeight-t;B=ea.viewportWidth;ea.viewportWidth=v;x=ea.viewportHeight;ea.viewportHeight=w;Z.viewport(q,t,v,w);Pd[0]=q;Pd[1]=t;Pd[2]=v;Pd[3]=w;Z.blendColor(0,0,0,1);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=1;Z.enable(3042);sa.blend_enable=!0;Z.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;Z.disable(2929);sa.depth_enable=!1;E=a.viewport;O=E.x|0;la=E.y|0;A="width"in E?E.width|0:ea.framebufferWidth-O;H="height"in E?E.height|0:ea.framebufferHeight-la;
Z.scissor(O,la,A,H);Ad[0]=O;Ad[1]=la;Ad[2]=A;Ad[3]=H;Z.enable(3089);sa.scissor_enable=!0;Z.disable(2960);sa.stencil_enable=!1;if(F=sa.profile)r=performance.now(),d.count++;Z.useProgram(h.program);D=Ra.angle_instanced_arrays;xa.setVAO(null);P=u.call(this,ea,a,0);Ia=!1;I=null;N=0;G=!1;S=ra=0;M=1;R=0;Q=5126;ga=T=Ba=Da=0;W(P)?(Ia=!0,I=ha.createStream(34962,P),Q=I.dtype):(I=ha.getBuffer(P))?Q=I.dtype:"constant"in P?(M=2,"number"===typeof P.constant?(Ba=P.constant,T=ga=Da=0):(Ba=0<P.constant.length?P.constant[0]:
0,T=1<P.constant.length?P.constant[1]:0,ga=2<P.constant.length?P.constant[2]:0,Da=3<P.constant.length?P.constant[3]:0)):(I=W(P.buffer)?ha.createStream(34962,P.buffer):ha.getBuffer(P.buffer),Q="type"in P?Bd[P.type]:I.dtype,G=!!P.normalized,S=P.size|0,ra=P.offset|0,R=P.stride|0,N=P.divisor|0);X=za.location;U=Va[X];if(1===M){U.buffer||Z.enableVertexAttribArray(X);J=S||1;if(U.type!==Q||U.size!==J||U.buffer!==I||U.normalized!==G||U.offset!==ra||U.stride!==R)Z.bindBuffer(34962,I.buffer),Z.vertexAttribPointer(X,
J,Q,G,R,ra),U.type=Q,U.size=J,U.buffer=I,U.normalized=G,U.offset=ra,U.stride=R;U.divisor!==N&&(D.vertexAttribDivisorANGLE(X,N),U.divisor=N)}else if(U.buffer&&(Z.disableVertexAttribArray(X),U.buffer=null),U.x!==Ba||U.y!==T||U.z!==ga||U.w!==Da)Z.vertexAttrib4f(X,Ba,T,ga,Da),U.x=Ba,U.y=T,U.z=ga,U.w=Da;ca=p.call(this,ea,a,0);fa=!1;ma=null;Fa=0;Aa=!1;hb=Zb=0;Mb=1;bb=0;kb=5126;Ib=Nb=Id=Xa=0;W(ca)?(fa=!0,ma=ha.createStream(34962,ca),kb=ma.dtype):(ma=ha.getBuffer(ca))?kb=ma.dtype:"constant"in ca?(Mb=2,"number"===
typeof ca.constant?(Id=ca.constant,Nb=Ib=Xa=0):(Id=0<ca.constant.length?ca.constant[0]:0,Nb=1<ca.constant.length?ca.constant[1]:0,Ib=2<ca.constant.length?ca.constant[2]:0,Xa=3<ca.constant.length?ca.constant[3]:0)):(ma=W(ca.buffer)?ha.createStream(34962,ca.buffer):ha.getBuffer(ca.buffer),kb="type"in ca?Bd[ca.type]:ma.dtype,Aa=!!ca.normalized,hb=ca.size|0,Zb=ca.offset|0,bb=ca.stride|0,Fa=ca.divisor|0);sc=Ka.location;Ob=Va[sc];if(1===Mb){Ob.buffer||Z.enableVertexAttribArray(sc);lb=hb||1;if(Ob.type!==
kb||Ob.size!==lb||Ob.buffer!==ma||Ob.normalized!==Aa||Ob.offset!==Zb||Ob.stride!==bb)Z.bindBuffer(34962,ma.buffer),Z.vertexAttribPointer(sc,lb,kb,Aa,bb,Zb),Ob.type=kb,Ob.size=lb,Ob.buffer=ma,Ob.normalized=Aa,Ob.offset=Zb,Ob.stride=bb;Ob.divisor!==Fa&&(D.vertexAttribDivisorANGLE(sc,Fa),Ob.divisor=Fa)}else if(Ob.buffer&&(Z.disableVertexAttribArray(sc),Ob.buffer=null),Ob.x!==Id||Ob.y!==Nb||Ob.z!==Ib||Ob.w!==Xa)Z.vertexAttrib4f(sc,Id,Nb,Ib,Xa),Ob.x=Id,Ob.y=Nb,Ob.z=Ib,Ob.w=Xa;Fb=n.call(this,ea,a,0);Cb=
!1;yb=null;ib=0;$b=!1;rb=Pb=0;Ta=1;Ub=0;sb=5126;Ja=qb=jb=jc=0;W(Fb)?(Cb=!0,yb=ha.createStream(34962,Fb),sb=yb.dtype):(yb=ha.getBuffer(Fb))?sb=yb.dtype:"constant"in Fb?(Ta=2,"number"===typeof Fb.constant?(jb=Fb.constant,qb=Ja=jc=0):(jb=0<Fb.constant.length?Fb.constant[0]:0,qb=1<Fb.constant.length?Fb.constant[1]:0,Ja=2<Fb.constant.length?Fb.constant[2]:0,jc=3<Fb.constant.length?Fb.constant[3]:0)):(yb=W(Fb.buffer)?ha.createStream(34962,Fb.buffer):ha.getBuffer(Fb.buffer),sb="type"in Fb?Bd[Fb.type]:yb.dtype,
$b=!!Fb.normalized,rb=Fb.size|0,Pb=Fb.offset|0,Ub=Fb.stride|0,ib=Fb.divisor|0);tb=Qa.location;La=Va[tb];if(1===Ta){La.buffer||Z.enableVertexAttribArray(tb);eb=rb||1;if(La.type!==sb||La.size!==eb||La.buffer!==yb||La.normalized!==$b||La.offset!==Pb||La.stride!==Ub)Z.bindBuffer(34962,yb.buffer),Z.vertexAttribPointer(tb,eb,sb,$b,Ub,Pb),La.type=sb,La.size=eb,La.buffer=yb,La.normalized=$b,La.offset=Pb,La.stride=Ub;La.divisor!==ib&&(D.vertexAttribDivisorANGLE(tb,ib),La.divisor=ib)}else if(La.buffer&&(Z.disableVertexAttribArray(tb),
La.buffer=null),La.x!==jb||La.y!==qb||La.z!==Ja||La.w!==jc)Z.vertexAttrib4f(tb,jb,qb,Ja,jc),La.x=jb,La.y=qb,La.z=Ja,La.w=jc;gb=b.call(this,ea,a,0);Na=!1;mb=null;Ya=0;vb=!1;Pa=ub=0;Dc=1;Wa=0;Jb=5126;$a=Gd=Ma=Db=0;W(gb)?(Na=!0,mb=ha.createStream(34962,gb),Jb=mb.dtype):(mb=ha.getBuffer(gb))?Jb=mb.dtype:"constant"in gb?(Dc=2,"number"===typeof gb.constant?(Ma=gb.constant,Gd=$a=Db=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Gd=1<gb.constant.length?gb.constant[1]:0,$a=2<gb.constant.length?gb.constant[2]:
0,Db=3<gb.constant.length?gb.constant[3]:0)):(mb=W(gb.buffer)?ha.createStream(34962,gb.buffer):ha.getBuffer(gb.buffer),Jb="type"in gb?Bd[gb.type]:mb.dtype,vb=!!gb.normalized,Pa=gb.size|0,ub=gb.offset|0,Wa=gb.stride|0,Ya=gb.divisor|0);Kb=Hb.location;Lb=Va[Kb];if(1===Dc){Lb.buffer||Z.enableVertexAttribArray(Kb);ob=Pa||1;if(Lb.type!==Jb||Lb.size!==ob||Lb.buffer!==mb||Lb.normalized!==vb||Lb.offset!==ub||Lb.stride!==Wa)Z.bindBuffer(34962,mb.buffer),Z.vertexAttribPointer(Kb,ob,Jb,vb,Wa,ub),Lb.type=Jb,Lb.size=
ob,Lb.buffer=mb,Lb.normalized=vb,Lb.offset=ub,Lb.stride=Wa;Lb.divisor!==Ya&&(D.vertexAttribDivisorANGLE(Kb,Ya),Lb.divisor=Ya)}else if(Lb.buffer&&(Z.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Ma||Lb.y!==Gd||Lb.z!==$a||Lb.w!==Db)Z.vertexAttrib4f(Kb,Ma,Gd,$a,Db),Lb.x=Ma,Lb.y=Gd,Lb.z=$a,Lb.w=Db;Oa=f.call(this,ea,a,0);ac=!1;Sa=null;wb=0;xb=!1;pb=Ua=0;gc=1;Bc=0;wc=5126;Za=Mc=kc=cb=0;W(Oa)?(ac=!0,Sa=ha.createStream(34962,Oa),wc=Sa.dtype):(Sa=ha.getBuffer(Oa))?wc=Sa.dtype:"constant"in Oa?(gc=2,"number"===
typeof Oa.constant?(kc=Oa.constant,Mc=Za=cb=0):(kc=0<Oa.constant.length?Oa.constant[0]:0,Mc=1<Oa.constant.length?Oa.constant[1]:0,Za=2<Oa.constant.length?Oa.constant[2]:0,cb=3<Oa.constant.length?Oa.constant[3]:0)):(Sa=W(Oa.buffer)?ha.createStream(34962,Oa.buffer):ha.getBuffer(Oa.buffer),wc="type"in Oa?Bd[Oa.type]:Sa.dtype,xb=!!Oa.normalized,pb=Oa.size|0,Ua=Oa.offset|0,Bc=Oa.stride|0,wb=Oa.divisor|0);nd=Ca.location;Ab=Va[nd];if(1===gc){Ab.buffer||Z.enableVertexAttribArray(nd);ab=pb||1;if(Ab.type!==
wc||Ab.size!==ab||Ab.buffer!==Sa||Ab.normalized!==xb||Ab.offset!==Ua||Ab.stride!==Bc)Z.bindBuffer(34962,Sa.buffer),Z.vertexAttribPointer(nd,ab,wc,xb,Bc,Ua),Ab.type=wc,Ab.size=ab,Ab.buffer=Sa,Ab.normalized=xb,Ab.offset=Ua,Ab.stride=Bc;Ab.divisor!==wb&&(D.vertexAttribDivisorANGLE(nd,wb),Ab.divisor=wb)}else if(Ab.buffer&&(Z.disableVertexAttribArray(nd),Ab.buffer=null),Ab.x!==kc||Ab.y!==Mc||Ab.z!==Za||Ab.w!==cb)Z.vertexAttrib4f(nd,kc,Mc,Za,cb),Ab.x=kc,Ab.y=Mc,Ab.z=Za,Ab.w=cb;Wb=c.call(this,ea,a,0);uc=
!1;Xb=null;Qb=0;Nc=!1;Od=Rb=0;Fc=1;sd=0;Pc=5126;xc=oc=vd=Yc=0;W(Wb)?(uc=!0,Xb=ha.createStream(34962,Wb),Pc=Xb.dtype):(Xb=ha.getBuffer(Wb))?Pc=Xb.dtype:"constant"in Wb?(Fc=2,"number"===typeof Wb.constant?(vd=Wb.constant,oc=xc=Yc=0):(vd=0<Wb.constant.length?Wb.constant[0]:0,oc=1<Wb.constant.length?Wb.constant[1]:0,xc=2<Wb.constant.length?Wb.constant[2]:0,Yc=3<Wb.constant.length?Wb.constant[3]:0)):(Xb=W(Wb.buffer)?ha.createStream(34962,Wb.buffer):ha.getBuffer(Wb.buffer),Pc="type"in Wb?Bd[Wb.type]:Xb.dtype,
Nc=!!Wb.normalized,Od=Wb.size|0,Rb=Wb.offset|0,sd=Wb.stride|0,Qb=Wb.divisor|0);hc=oa.location;db=Va[hc];if(1===Fc){db.buffer||Z.enableVertexAttribArray(hc);tc=Od||1;if(db.type!==Pc||db.size!==tc||db.buffer!==Xb||db.normalized!==Nc||db.offset!==Rb||db.stride!==sd)Z.bindBuffer(34962,Xb.buffer),Z.vertexAttribPointer(hc,tc,Pc,Nc,sd,Rb),db.type=Pc,db.size=tc,db.buffer=Xb,db.normalized=Nc,db.offset=Rb,db.stride=sd;db.divisor!==Qb&&(D.vertexAttribDivisorANGLE(hc,Qb),db.divisor=Qb)}else if(db.buffer&&(Z.disableVertexAttribArray(hc),
db.buffer=null),db.x!==vd||db.y!==oc||db.z!==xc||db.w!==Yc)Z.vertexAttrib4f(hc,vd,oc,xc,Yc),db.x=vd,db.y=oc,db.z=xc,db.w=Yc;Tb=k.call(this,ea,a,0);Yb=!1;ec=null;ic=0;zc=!1;dd=Cc=0;Sc=1;Tc=0;Uc=5126;$c=ed=od=Zc=0;W(Tb)?(Yb=!0,ec=ha.createStream(34962,Tb),Uc=ec.dtype):(ec=ha.getBuffer(Tb))?Uc=ec.dtype:"constant"in Tb?(Sc=2,"number"===typeof Tb.constant?(od=Tb.constant,ed=$c=Zc=0):(od=0<Tb.constant.length?Tb.constant[0]:0,ed=1<Tb.constant.length?Tb.constant[1]:0,$c=2<Tb.constant.length?Tb.constant[2]:
0,Zc=3<Tb.constant.length?Tb.constant[3]:0)):(ec=W(Tb.buffer)?ha.createStream(34962,Tb.buffer):ha.getBuffer(Tb.buffer),Uc="type"in Tb?Bd[Tb.type]:ec.dtype,zc=!!Tb.normalized,dd=Tb.size|0,Cc=Tb.offset|0,Tc=Tb.stride|0,ic=Tb.divisor|0);lc=K.location;dc=Va[lc];if(1===Sc){dc.buffer||Z.enableVertexAttribArray(lc);ad=dd||4;if(dc.type!==Uc||dc.size!==ad||dc.buffer!==ec||dc.normalized!==zc||dc.offset!==Cc||dc.stride!==Tc)Z.bindBuffer(34962,ec.buffer),Z.vertexAttribPointer(lc,ad,Uc,zc,Tc,Cc),dc.type=Uc,dc.size=
ad,dc.buffer=ec,dc.normalized=zc,dc.offset=Cc,dc.stride=Tc;dc.divisor!==ic&&(D.vertexAttribDivisorANGLE(lc,ic),dc.divisor=ic)}else if(dc.buffer&&(Z.disableVertexAttribArray(lc),dc.buffer=null),dc.x!==od||dc.y!==ed||dc.z!==$c||dc.w!==Zc)Z.vertexAttrib4f(lc,od,ed,$c,Zc),dc.x=od,dc.y=ed,dc.z=$c,dc.w=Zc;Xc=y.call(this,ea,a,0);fd=!1;Ac=null;jd=0;Dd=!1;xd=ze=0;kd=1;Fe=0;Td=5126;Nd=Ud=ae=he=0;W(Xc)?(fd=!0,Ac=ha.createStream(34962,Xc),Td=Ac.dtype):(Ac=ha.getBuffer(Xc))?Td=Ac.dtype:"constant"in Xc?(kd=2,"number"===
typeof Xc.constant?(ae=Xc.constant,Ud=Nd=he=0):(ae=0<Xc.constant.length?Xc.constant[0]:0,Ud=1<Xc.constant.length?Xc.constant[1]:0,Nd=2<Xc.constant.length?Xc.constant[2]:0,he=3<Xc.constant.length?Xc.constant[3]:0)):(Ac=W(Xc.buffer)?ha.createStream(34962,Xc.buffer):ha.getBuffer(Xc.buffer),Td="type"in Xc?Bd[Xc.type]:Ac.dtype,Dd=!!Xc.normalized,xd=Xc.size|0,ze=Xc.offset|0,Fe=Xc.stride|0,jd=Xc.divisor|0);Kd=qa.location;qd=Va[Kd];if(1===kd){qd.buffer||Z.enableVertexAttribArray(Kd);Vc=xd||4;if(qd.type!==
Td||qd.size!==Vc||qd.buffer!==Ac||qd.normalized!==Dd||qd.offset!==ze||qd.stride!==Fe)Z.bindBuffer(34962,Ac.buffer),Z.vertexAttribPointer(Kd,Vc,Td,Dd,Fe,ze),qd.type=Td,qd.size=Vc,qd.buffer=Ac,qd.normalized=Dd,qd.offset=ze,qd.stride=Fe;qd.divisor!==jd&&(D.vertexAttribDivisorANGLE(Kd,jd),qd.divisor=jd)}else if(qd.buffer&&(Z.disableVertexAttribArray(Kd),qd.buffer=null),qd.x!==ae||qd.y!==Ud||qd.z!==Nd||qd.w!==he)Z.vertexAttrib4f(Kd,ae,Ud,Nd,he),qd.x=ae,qd.y=Ud,qd.z=Nd,qd.w=he;wd=z.call(this,ea,a,0);ud=
!1;ld=null;yd=0;Fd=!1;ke=Hd=0;ne=1;ue=0;oe=5126;fe=ve=ie=le=0;W(wd)?(ud=!0,ld=ha.createStream(34962,wd),oe=ld.dtype):(ld=ha.getBuffer(wd))?oe=ld.dtype:"constant"in wd?(ne=2,"number"===typeof wd.constant?(ie=wd.constant,ve=fe=le=0):(ie=0<wd.constant.length?wd.constant[0]:0,ve=1<wd.constant.length?wd.constant[1]:0,fe=2<wd.constant.length?wd.constant[2]:0,le=3<wd.constant.length?wd.constant[3]:0)):(ld=W(wd.buffer)?ha.createStream(34962,wd.buffer):ha.getBuffer(wd.buffer),oe="type"in wd?Bd[wd.type]:ld.dtype,
Fd=!!wd.normalized,ke=wd.size|0,Hd=wd.offset|0,ue=wd.stride|0,yd=wd.divisor|0);pe=da.location;Qc=Va[pe];if(1===ne){Qc.buffer||Z.enableVertexAttribArray(pe);id=ke||1;if(Qc.type!==oe||Qc.size!==id||Qc.buffer!==ld||Qc.normalized!==Fd||Qc.offset!==Hd||Qc.stride!==ue)Z.bindBuffer(34962,ld.buffer),Z.vertexAttribPointer(pe,id,oe,Fd,ue,Hd),Qc.type=oe,Qc.size=id,Qc.buffer=ld,Qc.normalized=Fd,Qc.offset=Hd,Qc.stride=ue;Qc.divisor!==yd&&(D.vertexAttribDivisorANGLE(pe,yd),Qc.divisor=yd)}else if(Qc.buffer&&(Z.disableVertexAttribArray(pe),
Qc.buffer=null),Qc.x!==ie||Qc.y!==ve||Qc.z!==fe||Qc.w!==le)Z.vertexAttrib4f(pe,ie,ve,fe,le),Qc.x=ie,Qc.y=ve,Qc.z=fe,Qc.w=le;Z.uniform1i(L.location,!1);Z.uniform1f(ya.location,ea.pixelRatio);we=e.call(this,ea,a,0);Z.uniform2f(na.location,we[0],we[1]);se=a.scale;Z.uniform2f(va.location,se[0],se[1]);Qd=a.scaleFract;Z.uniform2f(ba.location,Qd[0],Qd[1]);Vd=a.translate;Z.uniform2f(ka.location,Vd[0],Vd[1]);Wd=a.translateFract;Z.uniform2f(pa.location,Wd[0],Wd[1]);Z.uniform1f(V.location,a.opacity);Z.uniform1i(ia.location,
l.bind());Xd=a.elements;qe=null;(qe=(Ce=W(Xd))?Ea.createStream(Xd):Ea.getElements(Xd))&&Z.bindBuffer(34963,qe.buffer.buffer);Ge=a.offset;if(te=a.count)Ve=ua.instances,0<Ve?qe?D.drawElementsInstancedANGLE(0,te,qe.type,Ge<<(qe.type-5121>>1),Ve):D.drawArraysInstancedANGLE(0,Ge,te,Ve):0>Ve&&(qe?Z.drawElements(0,te,qe.type,Ge<<(qe.type-5121>>1)):Z.drawArrays(0,Ge,te)),sa.dirty=!0,xa.setVAO(null),ea.viewportWidth=B,ea.viewportHeight=x,F&&(d.cpuTime+=performance.now()-r),Ia&&ha.destroyStream(I),fa&&ha.destroyStream(ma),
Cb&&ha.destroyStream(yb),Na&&ha.destroyStream(mb),ac&&ha.destroyStream(Sa),uc&&ha.destroyStream(Xb),Yb&&ha.destroyStream(ec),fd&&ha.destroyStream(Ac),ud&&ha.destroyStream(ld),l.unbind(),Ce&&Ea.destroyStream(qe)},scope:function(c,e,b){var a,l,k,f,n,h,u,z,y,C,p,O,K,P,Ka,L,N,V,S,Z,ba,M,Hb,R,ja,Qa,Q,Y,xa,da,ia,va,qa,T,aa,X,ka,ca,Va,pa,fa,Ca,za,oa,na,ya,ta,Gb,Ga,Ha,Ra,fb,Aa,Sb,bc,Ta,cc,sb,Kc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Sd,Wa,Jb,Db,Ma,Ad,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,
Pd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,$d,Fc,De,Pc,Yc,je,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,re,ye,xd,kd,Ae,Td,he,ae,Ud,Nd,Kd,qd,Vc,wd,ud,ld,yd,Fd,Hd,ke,ne,ue,oe,le,ie,ve,fe,pe,Qc,id,we,se,Qd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;a=c.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:ea.framebufferWidth-l;n="height"in a?a.height|0:ea.framebufferHeight-k;h=ea.viewportWidth;ea.viewportWidth=f;u=ea.viewportHeight;ea.viewportHeight=n;z=Gd[0];Gd[0]=l;y=Gd[1];Gd[1]=k;C=Gd[2];Gd[2]=f;p=Gd[3];Gd[3]=n;O=Ba[0];Ba[0]=0;K=Ba[1];Ba[1]=0;P=Ba[2];Ba[2]=0;Ka=Ba[3];Ba[3]=1;L=wa.blend_enable;wa.blend_enable=!0;N=Fa[0];Fa[0]=770;V=Fa[1];Fa[1]=
771;S=Fa[2];Fa[2]=773;Z=Fa[3];Fa[3]=1;ba=wa.depth_enable;wa.depth_enable=!1;M=c.viewport;Hb=M.x|0;R=M.y|0;ja="width"in M?M.width|0:ea.framebufferWidth-Hb;Qa="height"in M?M.height|0:ea.framebufferHeight-R;Q=Id[0];Id[0]=Hb;Y=Id[1];Id[1]=R;xa=Id[2];Id[2]=ja;da=Id[3];Id[3]=Qa;ia=wa.scissor_enable;wa.scissor_enable=!0;va=wa.stencil_enable;wa.stencil_enable=!1;if(qa=sa.profile)T=performance.now(),d.count++;aa=c.elements;X=null;X=(ka=W(aa))?Ea.createStream(aa):Ea.getElements(aa);ca=ua.elements;ua.elements=
X;Va=c.offset;pa=ua.offset;ua.offset=Va;fa=c.count;Ca=ua.count;ua.count=fa;za=ua.primitive;ua.primitive=0;oa=ra[45];ra[45]=!1;na=c.markerTexture;ya=ra[48];ra[48]=na;ta=c.opacity;Gb=ra[10];ra[10]=ta;Ga=g.call(this,ea,c,b);Ha=ra[46];ra[46]=Ga;Ra=ra[47];ra[47]=q;fb=ea.pixelRatio;Aa=ra[34];ra[34]=fb;Sb=c.scale;bc=ra[6];ra[6]=Sb;Ta=c.scaleFract;cc=ra[7];ra[7]=Ta;sb=c.translate;Kc=ra[8];ra[8]=sb;jb=c.translateFract;qb=ra[9];ra[9]=jb;Ja=m.call(this,ea,c,b);tb=!1;La=null;eb=0;gb=!1;mb=Na=0;Ya=1;vb=0;ub=5126;
Jb=Wa=Sd=Pa=0;W(Ja)?(tb=!0,La=ha.createStream(34962,Ja),ub=La.dtype):(La=ha.getBuffer(Ja))?ub=La.dtype:"constant"in Ja?(Ya=2,"number"===typeof Ja.constant?(Sd=Ja.constant,Wa=Jb=Pa=0):(Sd=0<Ja.constant.length?Ja.constant[0]:0,Wa=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=W(Ja.buffer)?ha.createStream(34962,Ja.buffer):ha.getBuffer(Ja.buffer),ub="type"in Ja?Bd[Ja.type]:La.dtype,gb=!!Ja.normalized,mb=Ja.size|0,Na=Ja.offset|
0,vb=Ja.stride|0,eb=Ja.divisor|0);Db=v.buffer;v.buffer=La;Ma=v.divisor;v.divisor=eb;Ad=v.normalized;v.normalized=gb;$a=v.offset;v.offset=Na;Kb=v.size;v.size=mb;Lb=v.state;v.state=Ya;ob=v.stride;v.stride=vb;Oa=v.type;v.type=ub;ac=v.w;v.w=Pa;Sa=v.x;v.x=Sd;wb=v.y;v.y=Wa;xb=v.z;v.z=Jb;Ua=w.call(this,ea,c,b);pb=!1;gc=null;Bc=0;wc=!1;kc=cb=0;Mc=1;Za=0;Pd=5126;uc=Wb=ab=Ab=0;W(Ua)?(pb=!0,gc=ha.createStream(34962,Ua),Pd=gc.dtype):(gc=ha.getBuffer(Ua))?Pd=gc.dtype:"constant"in Ua?(Mc=2,"number"===typeof Ua.constant?
(ab=Ua.constant,Wb=uc=Ab=0):(ab=0<Ua.constant.length?Ua.constant[0]:0,Wb=1<Ua.constant.length?Ua.constant[1]:0,uc=2<Ua.constant.length?Ua.constant[2]:0,Ab=3<Ua.constant.length?Ua.constant[3]:0)):(gc=W(Ua.buffer)?ha.createStream(34962,Ua.buffer):ha.getBuffer(Ua.buffer),Pd="type"in Ua?Bd[Ua.type]:gc.dtype,wc=!!Ua.normalized,kc=Ua.size|0,cb=Ua.offset|0,Za=Ua.stride|0,Bc=Ua.divisor|0);Xb=B.buffer;B.buffer=gc;Qb=B.divisor;B.divisor=Bc;Nc=B.normalized;B.normalized=wc;Rb=B.offset;B.offset=cb;$d=B.size;B.size=
kc;Fc=B.state;B.state=Mc;De=B.stride;B.stride=Za;Pc=B.type;B.type=Pd;Yc=B.w;B.w=Ab;je=B.x;B.x=ab;oc=B.y;B.y=Wb;xc=B.z;B.z=uc;hc=la.call(this,ea,c,b);db=!1;tc=null;Tb=0;Yb=!1;ic=ec=0;zc=1;Cc=0;dd=5126;Zc=Uc=Tc=Sc=0;W(hc)?(db=!0,tc=ha.createStream(34962,hc),dd=tc.dtype):(tc=ha.getBuffer(hc))?dd=tc.dtype:"constant"in hc?(zc=2,"number"===typeof hc.constant?(Tc=hc.constant,Uc=Zc=Sc=0):(Tc=0<hc.constant.length?hc.constant[0]:0,Uc=1<hc.constant.length?hc.constant[1]:0,Zc=2<hc.constant.length?hc.constant[2]:
0,Sc=3<hc.constant.length?hc.constant[3]:0)):(tc=W(hc.buffer)?ha.createStream(34962,hc.buffer):ha.getBuffer(hc.buffer),dd="type"in hc?Bd[hc.type]:tc.dtype,Yb=!!hc.normalized,ic=hc.size|0,ec=hc.offset|0,Cc=hc.stride|0,Tb=hc.divisor|0);od=x.buffer;x.buffer=tc;ed=x.divisor;x.divisor=Tb;$c=x.normalized;x.normalized=Yb;lc=x.offset;x.offset=ec;dc=x.size;x.size=ic;ad=x.state;x.state=zc;Xc=x.stride;x.stride=Cc;fd=x.type;x.type=dd;Ac=x.w;x.w=Sc;jd=x.x;x.x=Tc;re=x.y;x.y=Uc;ye=x.z;x.z=Zc;xd=E.call(this,ea,c,
b);kd=!1;Ae=null;Td=0;he=!1;Ud=ae=0;Nd=1;Kd=0;qd=5126;ld=ud=wd=Vc=0;W(xd)?(kd=!0,Ae=ha.createStream(34962,xd),qd=Ae.dtype):(Ae=ha.getBuffer(xd))?qd=Ae.dtype:"constant"in xd?(Nd=2,"number"===typeof xd.constant?(wd=xd.constant,ud=ld=Vc=0):(wd=0<xd.constant.length?xd.constant[0]:0,ud=1<xd.constant.length?xd.constant[1]:0,ld=2<xd.constant.length?xd.constant[2]:0,Vc=3<xd.constant.length?xd.constant[3]:0)):(Ae=W(xd.buffer)?ha.createStream(34962,xd.buffer):ha.getBuffer(xd.buffer),qd="type"in xd?Bd[xd.type]:
Ae.dtype,he=!!xd.normalized,Ud=xd.size|0,ae=xd.offset|0,Kd=xd.stride|0,Td=xd.divisor|0);yd=r.buffer;r.buffer=Ae;Fd=r.divisor;r.divisor=Td;Hd=r.normalized;r.normalized=he;ke=r.offset;r.offset=ae;ne=r.size;r.size=Ud;ue=r.state;r.state=Nd;oe=r.stride;r.stride=Kd;le=r.type;r.type=qd;ie=r.w;r.w=Vc;ve=r.x;r.x=wd;fe=r.y;r.y=ud;pe=r.z;r.z=ld;Qc=H.call(this,ea,c,b);id=!1;we=null;se=0;Qd=!1;Wd=Vd=0;Xd=1;qe=0;Ce=5126;We=Ve=te=Ge=0;W(Qc)?(id=!0,we=ha.createStream(34962,Qc),Ce=we.dtype):(we=ha.getBuffer(Qc))?
Ce=we.dtype:"constant"in Qc?(Xd=2,"number"===typeof Qc.constant?(te=Qc.constant,Ve=We=Ge=0):(te=0<Qc.constant.length?Qc.constant[0]:0,Ve=1<Qc.constant.length?Qc.constant[1]:0,We=2<Qc.constant.length?Qc.constant[2]:0,Ge=3<Qc.constant.length?Qc.constant[3]:0)):(we=W(Qc.buffer)?ha.createStream(34962,Qc.buffer):ha.getBuffer(Qc.buffer),Ce="type"in Qc?Bd[Qc.type]:we.dtype,Qd=!!Qc.normalized,Wd=Qc.size|0,Vd=Qc.offset|0,qe=Qc.stride|0,se=Qc.divisor|0);Re=ga.buffer;ga.buffer=we;xe=ga.divisor;ga.divisor=se;
Je=ga.normalized;ga.normalized=Qd;Le=ga.offset;ga.offset=Vd;Me=ga.size;ga.size=Wd;Ne=ga.state;ga.state=Xd;Ke=ga.stride;ga.stride=qe;Rd=ga.type;ga.type=Ce;be=ga.w;ga.w=Ge;ee=ga.x;ga.x=te;ge=ga.y;ga.y=Ve;Oe=ga.z;ga.z=We;Ld=F.call(this,ea,c,b);Yd=!1;He=null;Pe=0;df=!1;Xe=cf=0;Se=1;bf=0;af=5126;de=Zd=Ze=Ye=0;W(Ld)?(Yd=!0,He=ha.createStream(34962,Ld),af=He.dtype):(He=ha.getBuffer(Ld))?af=He.dtype:"constant"in Ld?(Se=2,"number"===typeof Ld.constant?(Ze=Ld.constant,Zd=de=Ye=0):(Ze=0<Ld.constant.length?Ld.constant[0]:
0,Zd=1<Ld.constant.length?Ld.constant[1]:0,de=2<Ld.constant.length?Ld.constant[2]:0,Ye=3<Ld.constant.length?Ld.constant[3]:0)):(He=W(Ld.buffer)?ha.createStream(34962,Ld.buffer):ha.getBuffer(Ld.buffer),af="type"in Ld?Bd[Ld.type]:He.dtype,df=!!Ld.normalized,Xe=Ld.size|0,cf=Ld.offset|0,bf=Ld.stride|0,Pe=Ld.divisor|0);$e=A.buffer;A.buffer=He;kf=A.divisor;A.divisor=Pe;of=A.normalized;A.normalized=df;gf=A.offset;A.offset=cf;lf=A.size;A.size=Xe;mf=A.state;A.state=Se;nf=A.stride;A.stride=bf;sf=A.type;A.type=
af;pf=A.w;A.w=Ye;tf=A.x;A.x=Ze;Cf=A.y;A.y=Zd;Df=A.z;A.z=de;Te=U.call(this,ea,c,b);Ie=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;W(Te)?(Ie=!0,qf=ha.createStream(34962,Te),xf=qf.dtype):(qf=ha.getBuffer(Te))?xf=qf.dtype:"constant"in Te?(Ff=2,"number"===typeof Te.constant?(wf=Te.constant,zf=Af=yf=0):(wf=0<Te.constant.length?Te.constant[0]:0,zf=1<Te.constant.length?Te.constant[1]:0,Af=2<Te.constant.length?Te.constant[2]:0,yf=3<Te.constant.length?Te.constant[3]:0)):(qf=W(Te.buffer)?ha.createStream(34962,
Te.buffer):ha.getBuffer(Te.buffer),xf="type"in Te?Bd[Te.type]:qf.dtype,Ef=!!Te.normalized,Bf=Te.size|0,Hf=Te.offset|0,Gf=Te.stride|0,rf=Te.divisor|0);Jf=I.buffer;I.buffer=qf;Kf=I.divisor;I.divisor=rf;Lf=I.normalized;I.normalized=Ef;Mf=I.offset;I.offset=Hf;uf=I.size;I.size=Bf;Rf=I.state;I.state=Ff;If=I.stride;I.stride=Gf;vf=I.type;I.type=xf;dg=I.w;I.w=yf;Sf=I.x;I.x=wf;Tf=I.y;I.y=zf;qg=I.z;I.z=Af;hf=G.call(this,ea,c,b);ef=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;W(hf)?(ef=!0,Nf=
ha.createStream(34962,hf),Wf=Nf.dtype):(Nf=ha.getBuffer(hf))?Wf=Nf.dtype:"constant"in hf?(hg=2,"number"===typeof hf.constant?(Xf=hf.constant,Yf=Zf=Uf=0):(Xf=0<hf.constant.length?hf.constant[0]:0,Yf=1<hf.constant.length?hf.constant[1]:0,Zf=2<hf.constant.length?hf.constant[2]:0,Uf=3<hf.constant.length?hf.constant[3]:0)):(Nf=W(hf.buffer)?ha.createStream(34962,hf.buffer):ha.getBuffer(hf.buffer),Wf="type"in hf?Bd[hf.type]:Nf.dtype,eg=!!hf.normalized,gg=hf.size|0,fg=hf.offset|0,ig=hf.stride|0,Of=hf.divisor|
0);jg=D.buffer;D.buffer=Nf;rg=D.divisor;D.divisor=Of;sg=D.normalized;D.normalized=eg;tg=D.offset;D.offset=fg;ug=D.size;D.size=gg;vg=D.state;D.state=hg;wg=D.stride;D.stride=ig;xg=D.type;D.type=Wf;yg=D.w;D.w=Uf;zg=D.x;D.x=Xf;Ag=D.y;D.y=Yf;Bg=D.z;D.z=Zf;jf=J.call(this,ea,c,b);ff=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;W(jf)?(ff=!0,Pf=ha.createStream(34962,jf),$f=Pf.dtype):(Pf=ha.getBuffer(jf))?$f=Pf.dtype:"constant"in jf?(ng=2,"number"===typeof jf.constant?(ag=jf.constant,bg=cg=
Vf=0):(ag=0<jf.constant.length?jf.constant[0]:0,bg=1<jf.constant.length?jf.constant[1]:0,cg=2<jf.constant.length?jf.constant[2]:0,Vf=3<jf.constant.length?jf.constant[3]:0)):(Pf=W(jf.buffer)?ha.createStream(34962,jf.buffer):ha.getBuffer(jf.buffer),$f="type"in jf?Bd[jf.type]:Pf.dtype,kg=!!jf.normalized,mg=jf.size|0,lg=jf.offset|0,og=jf.stride|0,Qf=jf.divisor|0);pg=t.buffer;t.buffer=Pf;Cg=t.divisor;t.divisor=Qf;Dg=t.normalized;t.normalized=kg;Eg=t.offset;t.offset=lg;Fg=t.size;t.size=mg;Gg=t.state;t.state=
ng;Hg=t.stride;t.stride=og;Ig=t.type;t.type=$f;Jg=t.w;t.w=Vf;Kg=t.x;t.x=ag;Lg=t.y;t.y=bg;Mg=t.z;t.z=cg;Ng=Ia.vert;Ia.vert=59;Og=Ia.frag;Ia.frag=58;sa.dirty=!0;e(ea,c,b);ea.viewportWidth=h;ea.viewportHeight=u;Gd[0]=z;Gd[1]=y;Gd[2]=C;Gd[3]=p;Ba[0]=O;Ba[1]=K;Ba[2]=P;Ba[3]=Ka;wa.blend_enable=L;Fa[0]=N;Fa[1]=V;Fa[2]=S;Fa[3]=Z;wa.depth_enable=ba;Id[0]=Q;Id[1]=Y;Id[2]=xa;Id[3]=da;wa.scissor_enable=ia;wa.stencil_enable=va;qa&&(d.cpuTime+=performance.now()-T);ka&&Ea.destroyStream(X);ua.elements=ca;ua.offset=
pa;ua.count=Ca;ua.primitive=za;ra[45]=oa;ra[48]=ya;ra[10]=Gb;ra[46]=Ha;ra[47]=Ra;ra[34]=Aa;ra[6]=bc;ra[7]=cc;ra[8]=Kc;ra[9]=qb;tb&&ha.destroyStream(La);v.buffer=Db;v.divisor=Ma;v.normalized=Ad;v.offset=$a;v.size=Kb;v.state=Lb;v.stride=ob;v.type=Oa;v.w=ac;v.x=Sa;v.y=wb;v.z=xb;pb&&ha.destroyStream(gc);B.buffer=Xb;B.divisor=Qb;B.normalized=Nc;B.offset=Rb;B.size=$d;B.state=Fc;B.stride=De;B.type=Pc;B.w=Yc;B.x=je;B.y=oc;B.z=xc;db&&ha.destroyStream(tc);x.buffer=od;x.divisor=ed;x.normalized=$c;x.offset=lc;
x.size=dc;x.state=ad;x.stride=Xc;x.type=fd;x.w=Ac;x.x=jd;x.y=re;x.z=ye;kd&&ha.destroyStream(Ae);r.buffer=yd;r.divisor=Fd;r.normalized=Hd;r.offset=ke;r.size=ne;r.state=ue;r.stride=oe;r.type=le;r.w=ie;r.x=ve;r.y=fe;r.z=pe;id&&ha.destroyStream(we);ga.buffer=Re;ga.divisor=xe;ga.normalized=Je;ga.offset=Le;ga.size=Me;ga.state=Ne;ga.stride=Ke;ga.type=Rd;ga.w=be;ga.x=ee;ga.y=ge;ga.z=Oe;Yd&&ha.destroyStream(He);A.buffer=$e;A.divisor=kf;A.normalized=of;A.offset=gf;A.size=lf;A.state=mf;A.stride=nf;A.type=sf;
A.w=pf;A.x=tf;A.y=Cf;A.z=Df;Ie&&ha.destroyStream(qf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=uf;I.state=Rf;I.stride=If;I.type=vf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;ef&&ha.destroyStream(Nf);D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;ff&&ha.destroyStream(Pf);t.buffer=pg;t.divisor=Cg;t.normalized=Dg;t.offset=Eg;t.size=Fg;t.state=Gg;t.stride=Hg;t.type=Ig;t.w=Jg;t.x=Kg;t.y=Lg;t.z=Mg;Ia.vert=Ng;Ia.frag=Og;sa.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,ga,F,A,U,I,G,D,J,t,ca,M,fa,Aa,T,X){var S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,xa,Ba,ja,Y;S=a.attributes;P=a.buffer;N=a.context;O=a.current;Q=a.draw;R=a.elements;qa=a.extensions;oa=a.framebuffer;K=a.gl;L=a.isBufferArgs;da=a.next;V=a.shader;
na=a.uniforms;ia=a.vao;ya=da.blend_color;va=O.blend_color;ba=da.blend_equation;Ca=O.blend_equation;ka=da.blend_func;pa=O.blend_func;za=da.colorMask;Qa=O.colorMask;Ka=da.depth_range;Hb=O.depth_range;Va=da.polygonOffset_offset;ha=O.polygonOffset_offset;ea=da.sample_coverage;sa=O.sample_coverage;ua=da.scissor_box;Ea=O.scissor_box;Ra=da.stencil_func;Gb=O.stencil_func;Z=da.stencil_opBack;W=O.stencil_opBack;wa=da.stencil_opFront;Ia=O.stencil_opFront;ra=da.viewport;xa=O.viewport;Ba={int8:5120,int16:5122,
int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(c,e){var b,a,l,k,f,g,m,q,n,h,u,z,y;b=oa.next;b!==oa.cur&&(b?K.bindFramebuffer(36160,b.framebuffer):K.bindFramebuffer(36160,null),oa.cur=b);if(O.dirty){var C,p,V,ra,ka,na,ya,Cd,Be,Qe,Ue,Jd,Ee,me,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc;C=da.dither;C!==O.dither&&(C?K.enable(3024):K.disable(3024),O.dither=C);p=ba[0];V=ba[1];if(p!==
Ca[0]||V!==Ca[1])K.blendEquationSeparate(p,V),Ca[0]=p,Ca[1]=V;ra=da.depth_func;ra!==O.depth_func&&(K.depthFunc(ra),O.depth_func=ra);ka=Ka[0];na=Ka[1];if(ka!==Hb[0]||na!==Hb[1])K.depthRange(ka,na),Hb[0]=ka,Hb[1]=na;ya=da.depth_mask;ya!==O.depth_mask&&(K.depthMask(ya),O.depth_mask=ya);Cd=za[0];Be=za[1];Qe=za[2];Ue=za[3];if(Cd!==Qa[0]||Be!==Qa[1]||Qe!==Qa[2]||Ue!==Qa[3])K.colorMask(Cd,Be,Qe,Ue),Qa[0]=Cd,Qa[1]=Be,Qa[2]=Qe,Qa[3]=Ue;Jd=da.cull_enable;Jd!==O.cull_enable&&(Jd?K.enable(2884):K.disable(2884),
O.cull_enable=Jd);Ee=da.cull_face;Ee!==O.cull_face&&(K.cullFace(Ee),O.cull_face=Ee);me=da.frontFace;me!==O.frontFace&&(K.frontFace(me),O.frontFace=me);ce=da.lineWidth;ce!==O.lineWidth&&(K.lineWidth(ce),O.lineWidth=ce);Md=da.polygonOffset_enable;Md!==O.polygonOffset_enable&&(Md?K.enable(32823):K.disable(32823),O.polygonOffset_enable=Md);Ed=Va[0];pd=Va[1];if(Ed!==ha[0]||pd!==ha[1])K.polygonOffset(Ed,pd),ha[0]=Ed,ha[1]=pd;bd=da.sample_alpha;bd!==O.sample_alpha&&(bd?K.enable(32926):K.disable(32926),O.sample_alpha=
bd);td=da.sample_enable;td!==O.sample_enable&&(td?K.enable(32928):K.disable(32928),O.sample_enable=td);Oc=ea[0];rd=ea[1];if(Oc!==sa[0]||rd!==sa[1])K.sampleCoverage(Oc,rd),sa[0]=Oc,sa[1]=rd;Gc=da.stencil_mask;Gc!==O.stencil_mask&&(K.stencilMask(Gc),O.stencil_mask=Gc);gd=Ra[0];Rc=Ra[1];md=Ra[2];if(gd!==Gb[0]||Rc!==Gb[1]||md!==Gb[2])K.stencilFunc(gd,Rc,md),Gb[0]=gd,Gb[1]=Rc,Gb[2]=md;Vb=wa[0];Eb=wa[1];vc=wa[2];zb=wa[3];if(Vb!==Ia[0]||Eb!==Ia[1]||vc!==Ia[2]||zb!==Ia[3])K.stencilOpSeparate(Vb,Eb,vc,zb),
Ia[0]=Vb,Ia[1]=Eb,Ia[2]=vc,Ia[3]=zb;yc=Z[0];Bb=Z[1];Lc=Z[2];mc=Z[3];if(yc!==W[0]||Bb!==W[1]||Lc!==W[2]||mc!==W[3])K.stencilOpSeparate(yc,Bb,Lc,mc),W[0]=yc,W[1]=Bb,W[2]=Lc,W[3]=mc;Hc=da.scissor_enable;Hc!==O.scissor_enable&&(Hc?K.enable(3089):K.disable(3089),O.scissor_enable=Hc);hd=ua[0];cd=ua[1];Ec=ua[2];fc=ua[3];if(hd!==Ea[0]||cd!==Ea[1]||Ec!==Ea[2]||fc!==Ea[3])K.scissor(hd,cd,Ec,fc),Ea[0]=hd,Ea[1]=cd,Ea[2]=Ec,Ea[3]=fc}a=this.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:N.framebufferWidth-l;
g="height"in a?a.height|0:N.framebufferHeight-k;m=N.viewportWidth;N.viewportWidth=f;q=N.viewportHeight;N.viewportHeight=g;K.viewport(l,k,f,g);xa[0]=l;xa[1]=k;xa[2]=f;xa[3]=g;K.blendColor(0,0,0,1);va[0]=0;va[1]=0;va[2]=0;va[3]=1;K.enable(3042);O.blend_enable=!0;K.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;K.disable(2929);O.depth_enable=!1;K.disable(2960);O.stencil_enable=!1;if(n=O.profile)h=performance.now(),d.count+=e;K.useProgram(v.program);u=qa.angle_instanced_arrays;
var Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb;ia.setVAO(null);Y.buffer=this.sizeBuffer;Ic=!1;pc=null;rc=0;nc=!1;nb=qc=0;Wc=1;Zb=0;hb=5126;Xa=kb=bb=Mb=0;L(Y)?(Ic=!0,pc=P.createStream(34962,Y),hb=pc.dtype):(pc=P.getBuffer(Y))?hb=pc.dtype:"constant"in Y?(Wc=2,"number"===typeof Y.constant?(bb=Y.constant,kb=Xa=Mb=0):(bb=0<Y.constant.length?
Y.constant[0]:0,kb=1<Y.constant.length?Y.constant[1]:0,Xa=2<Y.constant.length?Y.constant[2]:0,Mb=3<Y.constant.length?Y.constant[3]:0)):(pc=L(Y.buffer)?P.createStream(34962,Y.buffer):P.getBuffer(Y.buffer),hb="type"in Y?Ba[Y.type]:pc.dtype,nc=!!Y.normalized,nb=Y.size|0,qc=Y.offset|0,Zb=Y.stride|0,rc=Y.divisor|0);Jc=X.location;Nb=S[Jc];if(1===Wc){Nb.buffer||K.enableVertexAttribArray(Jc);Ib=nb||1;if(Nb.type!==hb||Nb.size!==Ib||Nb.buffer!==pc||Nb.normalized!==nc||Nb.offset!==qc||Nb.stride!==Zb)K.bindBuffer(34962,
pc.buffer),K.vertexAttribPointer(Jc,Ib,hb,nc,Zb,qc),Nb.type=hb,Nb.size=Ib,Nb.buffer=pc,Nb.normalized=nc,Nb.offset=qc,Nb.stride=Zb;Nb.divisor!==rc&&(u.vertexAttribDivisorANGLE(Jc,rc),Nb.divisor=rc)}else if(Nb.buffer&&(K.disableVertexAttribArray(Jc),Nb.buffer=null),Nb.x!==bb||Nb.y!==kb||Nb.z!==Xa||Nb.w!==Mb)K.vertexAttrib4f(Jc,bb,kb,Xa,Mb),Nb.x=bb,Nb.y=kb,Nb.z=Xa,Nb.w=Mb;ja.buffer=this.sizeBuffer;sc=!1;Ob=null;lb=0;Fb=!1;yb=Cb=0;ib=1;$b=0;Pb=5126;sb=Ub=Ta=rb=0;L(ja)?(sc=!0,Ob=P.createStream(34962,ja),
Pb=Ob.dtype):(Ob=P.getBuffer(ja))?Pb=Ob.dtype:"constant"in ja?(ib=2,"number"===typeof ja.constant?(Ta=ja.constant,Ub=sb=rb=0):(Ta=0<ja.constant.length?ja.constant[0]:0,Ub=1<ja.constant.length?ja.constant[1]:0,sb=2<ja.constant.length?ja.constant[2]:0,rb=3<ja.constant.length?ja.constant[3]:0)):(Ob=L(ja.buffer)?P.createStream(34962,ja.buffer):P.getBuffer(ja.buffer),Pb="type"in ja?Ba[ja.type]:Ob.dtype,Fb=!!ja.normalized,yb=ja.size|0,Cb=ja.offset|0,$b=ja.stride|0,lb=ja.divisor|0);jc=I.location;jb=S[jc];
if(1===ib){jb.buffer||K.enableVertexAttribArray(jc);qb=yb||1;if(jb.type!==Pb||jb.size!==qb||jb.buffer!==Ob||jb.normalized!==Fb||jb.offset!==Cb||jb.stride!==$b)K.bindBuffer(34962,Ob.buffer),K.vertexAttribPointer(jc,qb,Pb,Fb,$b,Cb),jb.type=Pb,jb.size=qb,jb.buffer=Ob,jb.normalized=Fb,jb.offset=Cb,jb.stride=$b;jb.divisor!==lb&&(u.vertexAttribDivisorANGLE(jc,lb),jb.divisor=lb)}else if(jb.buffer&&(K.disableVertexAttribArray(jc),jb.buffer=null),jb.x!==Ta||jb.y!==Ub||jb.z!==sb||jb.w!==rb)K.vertexAttrib4f(jc,
Ta,Ub,sb,rb),jb.x=Ta,jb.y=Ub,jb.z=sb,jb.w=rb;Ja=this.charBuffer;tb=!1;La=null;eb=0;gb=!1;mb=Na=0;Ya=1;vb=0;ub=5126;Jb=Wa=Dc=Pa=0;L(Ja)?(tb=!0,La=P.createStream(34962,Ja),ub=La.dtype):(La=P.getBuffer(Ja))?ub=La.dtype:"constant"in Ja?(Ya=2,"number"===typeof Ja.constant?(Dc=Ja.constant,Wa=Jb=Pa=0):(Dc=0<Ja.constant.length?Ja.constant[0]:0,Wa=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=L(Ja.buffer)?P.createStream(34962,
Ja.buffer):P.getBuffer(Ja.buffer),ub="type"in Ja?Ba[Ja.type]:La.dtype,gb=!!Ja.normalized,mb=Ja.size|0,Na=Ja.offset|0,vb=Ja.stride|0,eb=Ja.divisor|0);Db=U.location;Ma=S[Db];if(1===Ya){Ma.buffer||K.enableVertexAttribArray(Db);zd=mb||1;if(Ma.type!==ub||Ma.size!==zd||Ma.buffer!==La||Ma.normalized!==gb||Ma.offset!==Na||Ma.stride!==vb)K.bindBuffer(34962,La.buffer),K.vertexAttribPointer(Db,zd,ub,gb,vb,Na),Ma.type=ub,Ma.size=zd,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=vb;Ma.divisor!==eb&&(u.vertexAttribDivisorANGLE(Db,
eb),Ma.divisor=eb)}else if(Ma.buffer&&(K.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Dc||Ma.y!==Wa||Ma.z!==Jb||Ma.w!==Pa)K.vertexAttrib4f(Db,Dc,Wa,Jb,Pa),Ma.x=Dc,Ma.y=Wa,Ma.z=Jb,Ma.w=Pa;$a=this.position;Kb=!1;Lb=null;ob=0;Oa=!1;Sa=ac=0;wb=1;xb=0;Ua=5126;wc=Bc=gc=pb=0;L($a)?(Kb=!0,Lb=P.createStream(34962,$a),Ua=Lb.dtype):(Lb=P.getBuffer($a))?Ua=Lb.dtype:"constant"in $a?(wb=2,"number"===typeof $a.constant?(gc=$a.constant,Bc=wc=pb=0):(gc=0<$a.constant.length?$a.constant[0]:0,Bc=1<$a.constant.length?
$a.constant[1]:0,wc=2<$a.constant.length?$a.constant[2]:0,pb=3<$a.constant.length?$a.constant[3]:0)):(Lb=L($a.buffer)?P.createStream(34962,$a.buffer):P.getBuffer($a.buffer),Ua="type"in $a?Ba[$a.type]:Lb.dtype,Oa=!!$a.normalized,Sa=$a.size|0,ac=$a.offset|0,xb=$a.stride|0,ob=$a.divisor|0);cb=ca.location;kc=S[cb];if(1===wb){kc.buffer||K.enableVertexAttribArray(cb);Mc=Sa||2;if(kc.type!==Ua||kc.size!==Mc||kc.buffer!==Lb||kc.normalized!==Oa||kc.offset!==ac||kc.stride!==xb)K.bindBuffer(34962,Lb.buffer),
K.vertexAttribPointer(cb,Mc,Ua,Oa,xb,ac),kc.type=Ua,kc.size=Mc,kc.buffer=Lb,kc.normalized=Oa,kc.offset=ac,kc.stride=xb;kc.divisor!==ob&&(u.vertexAttribDivisorANGLE(cb,ob),kc.divisor=ob)}else if(kc.buffer&&(K.disableVertexAttribArray(cb),kc.buffer=null),kc.x!==gc||kc.y!==Bc||kc.z!==wc||kc.w!==pb)K.vertexAttrib4f(cb,gc,Bc,wc,pb),kc.x=gc,kc.y=Bc,kc.z=wc,kc.w=pb;Za=this.viewportArray;K.uniform4f(T.location,Za[0],Za[1],Za[2],Za[3]);nd=this.scale;K.uniform2f(fa.location,nd[0],nd[1]);Ab=this.translate;K.uniform2f(Aa.location,
Ab[0],Ab[1]);(ab=Q.elements)?K.bindBuffer(34963,ab.buffer.buffer):ia.currentVAO&&(ab=R.getElements(ia.currentVAO.elements))&&K.bindBuffer(34963,ab.buffer.buffer);Wb=Q.instances;for(z=0;z<e;++z){y=c[z];var uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Dd;uc=w.call(this,N,y,z);z&&Xb===uc||(Xb=uc,K.uniform1f(G.location,uc));Qb=B.call(this,N,y,z);z&&Nc===Qb||(Nc=Qb,K.uniform1f(J.location,Qb));Rb=y.align;z&&Od===Rb||(Od=Rb,K.uniform1f(r.location,
Rb));Fc=y.baseline;z&&sd===Fc||(sd=Fc,K.uniform1f(A.location,Fc));Pc=y.color;Yc=Pc[0];oc=Pc[1];hc=Pc[2];tc=Pc[3];z&&vd===Yc&&xc===oc&&db===hc&&Tb===tc||(vd=Yc,xc=oc,db=hc,Tb=tc,K.uniform4f(D.location,Yc,oc,hc,tc));Yb=la.call(this,N,y,z);ec=Yb[0];zc=Yb[1];z&&ic===ec&&Cc===zc||(ic=ec,Cc=zc,K.uniform2f(F.location,ec,zc));dd=x.call(this,N,y,z);Sc=dd[0];Uc=dd[1];z&&Tc===Sc&&Zc===Uc||(Tc=Sc,Zc=Uc,K.uniform2f(ga.location,Sc,Uc));od=y.positionOffset;ed=od[0];lc=od[1];z&&$c===ed&&dc===lc||($c=ed,dc=lc,K.uniform2f(M.location,
ed,lc));ad=y.opacity;z&&Xc===ad||(Xc=ad,K.uniform1f(t.location,ad));(fd=E.call(this,N,y,z))&&"framebuffer"===fd._reglType&&(fd=fd.color[0]);Ac=fd._texture;K.uniform1i(H.location,Ac.bind());jd=y.offset;if(Dd=y.count)0<Wb?ab?u.drawElementsInstancedANGLE(0,Dd,ab.type,jd<<(ab.type-5121>>1),Wb):u.drawArraysInstancedANGLE(0,jd,Dd,Wb):0>Wb&&(ab?K.drawElements(0,Dd,ab.type,jd<<(ab.type-5121>>1)):K.drawArrays(0,jd,Dd)),Ac.unbind()}Ic&&P.destroyStream(pc);sc&&P.destroyStream(Ob);tb&&P.destroyStream(La);Kb&&
P.destroyStream(Lb);O.dirty=!0;ia.setVAO(null);N.viewportWidth=m;N.viewportHeight=q;n&&(d.cpuTime+=performance.now()-h)},draw:function(c){var e,a,l,k,g,m,q,v,w,B,z,x,y,E,la,V,ra,ka,na,ya,Bd,Cd,Be,Qe,Ue,Jd,Ee,me,ce,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb;e=oa.next;e!==oa.cur&&(e?K.bindFramebuffer(36160,e.framebuffer):K.bindFramebuffer(36160,null),oa.cur=
e);if(O.dirty){var Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc;Ya=da.dither;Ya!==O.dither&&(Ya?K.enable(3024):K.disable(3024),O.dither=Ya);vb=ba[0];ub=ba[1];if(vb!==Ca[0]||ub!==Ca[1])K.blendEquationSeparate(vb,ub),Ca[0]=vb,Ca[1]=ub;Pa=da.depth_func;Pa!==O.depth_func&&(K.depthFunc(Pa),O.depth_func=Pa);Dc=Ka[0];Wa=Ka[1];if(Dc!==Hb[0]||Wa!==Hb[1])K.depthRange(Dc,Wa),Hb[0]=Dc,Hb[1]=Wa;Jb=da.depth_mask;Jb!==O.depth_mask&&(K.depthMask(Jb),
O.depth_mask=Jb);Db=za[0];Ma=za[1];zd=za[2];$a=za[3];if(Db!==Qa[0]||Ma!==Qa[1]||zd!==Qa[2]||$a!==Qa[3])K.colorMask(Db,Ma,zd,$a),Qa[0]=Db,Qa[1]=Ma,Qa[2]=zd,Qa[3]=$a;Kb=da.cull_enable;Kb!==O.cull_enable&&(Kb?K.enable(2884):K.disable(2884),O.cull_enable=Kb);Lb=da.cull_face;Lb!==O.cull_face&&(K.cullFace(Lb),O.cull_face=Lb);ob=da.frontFace;ob!==O.frontFace&&(K.frontFace(ob),O.frontFace=ob);Oa=da.lineWidth;Oa!==O.lineWidth&&(K.lineWidth(Oa),O.lineWidth=Oa);ac=da.polygonOffset_enable;ac!==O.polygonOffset_enable&&
(ac?K.enable(32823):K.disable(32823),O.polygonOffset_enable=ac);Sa=Va[0];wb=Va[1];if(Sa!==ha[0]||wb!==ha[1])K.polygonOffset(Sa,wb),ha[0]=Sa,ha[1]=wb;xb=da.sample_alpha;xb!==O.sample_alpha&&(xb?K.enable(32926):K.disable(32926),O.sample_alpha=xb);Ua=da.sample_enable;Ua!==O.sample_enable&&(Ua?K.enable(32928):K.disable(32928),O.sample_enable=Ua);pb=ea[0];gc=ea[1];if(pb!==sa[0]||gc!==sa[1])K.sampleCoverage(pb,gc),sa[0]=pb,sa[1]=gc;Bc=da.stencil_mask;Bc!==O.stencil_mask&&(K.stencilMask(Bc),O.stencil_mask=
Bc);wc=Ra[0];cb=Ra[1];kc=Ra[2];if(wc!==Gb[0]||cb!==Gb[1]||kc!==Gb[2])K.stencilFunc(wc,cb,kc),Gb[0]=wc,Gb[1]=cb,Gb[2]=kc;Mc=wa[0];Za=wa[1];nd=wa[2];Ab=wa[3];if(Mc!==Ia[0]||Za!==Ia[1]||nd!==Ia[2]||Ab!==Ia[3])K.stencilOpSeparate(Mc,Za,nd,Ab),Ia[0]=Mc,Ia[1]=Za,Ia[2]=nd,Ia[3]=Ab;ab=Z[0];Wb=Z[1];uc=Z[2];Xb=Z[3];if(ab!==W[0]||Wb!==W[1]||uc!==W[2]||Xb!==W[3])K.stencilOpSeparate(ab,Wb,uc,Xb),W[0]=ab,W[1]=Wb,W[2]=uc,W[3]=Xb;Qb=da.scissor_enable;Qb!==O.scissor_enable&&(Qb?K.enable(3089):K.disable(3089),O.scissor_enable=
Qb);Nc=ua[0];Rb=ua[1];Od=ua[2];Fc=ua[3];if(Nc!==Ea[0]||Rb!==Ea[1]||Od!==Ea[2]||Fc!==Ea[3])K.scissor(Nc,Rb,Od,Fc),Ea[0]=Nc,Ea[1]=Rb,Ea[2]=Od,Ea[3]=Fc}a=this.viewport;l=a.x|0;k=a.y|0;g="width"in a?a.width|0:N.framebufferWidth-l;m="height"in a?a.height|0:N.framebufferHeight-k;q=N.viewportWidth;N.viewportWidth=g;v=N.viewportHeight;N.viewportHeight=m;K.viewport(l,k,g,m);xa[0]=l;xa[1]=k;xa[2]=g;xa[3]=m;K.blendColor(0,0,0,1);va[0]=0;va[1]=0;va[2]=0;va[3]=1;K.enable(3042);O.blend_enable=!0;K.blendFuncSeparate(770,
771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;K.disable(2929);O.depth_enable=!1;K.disable(2960);O.stencil_enable=!1;if(w=O.profile)B=performance.now(),d.count++;K.useProgram(h.program);z=qa.angle_instanced_arrays;ia.setVAO(null);Y.buffer=this.sizeBuffer;x=!1;y=null;E=0;la=!1;ra=V=0;ka=1;na=0;ya=5126;Qe=Be=Cd=Bd=0;L(Y)?(x=!0,y=P.createStream(34962,Y),ya=y.dtype):(y=P.getBuffer(Y))?ya=y.dtype:"constant"in Y?(ka=2,"number"===typeof Y.constant?(Cd=Y.constant,Be=Qe=Bd=0):(Cd=0<Y.constant.length?Y.constant[0]:
0,Be=1<Y.constant.length?Y.constant[1]:0,Qe=2<Y.constant.length?Y.constant[2]:0,Bd=3<Y.constant.length?Y.constant[3]:0)):(y=L(Y.buffer)?P.createStream(34962,Y.buffer):P.getBuffer(Y.buffer),ya="type"in Y?Ba[Y.type]:y.dtype,la=!!Y.normalized,ra=Y.size|0,V=Y.offset|0,na=Y.stride|0,E=Y.divisor|0);Ue=X.location;Jd=S[Ue];if(1===ka){Jd.buffer||K.enableVertexAttribArray(Ue);Ee=ra||1;if(Jd.type!==ya||Jd.size!==Ee||Jd.buffer!==y||Jd.normalized!==la||Jd.offset!==V||Jd.stride!==na)K.bindBuffer(34962,y.buffer),
K.vertexAttribPointer(Ue,Ee,ya,la,na,V),Jd.type=ya,Jd.size=Ee,Jd.buffer=y,Jd.normalized=la,Jd.offset=V,Jd.stride=na;Jd.divisor!==E&&(z.vertexAttribDivisorANGLE(Ue,E),Jd.divisor=E)}else if(Jd.buffer&&(K.disableVertexAttribArray(Ue),Jd.buffer=null),Jd.x!==Cd||Jd.y!==Be||Jd.z!==Qe||Jd.w!==Bd)K.vertexAttrib4f(Ue,Cd,Be,Qe,Bd),Jd.x=Cd,Jd.y=Be,Jd.z=Qe,Jd.w=Bd;ja.buffer=this.sizeBuffer;me=!1;ce=null;Md=0;Ed=!1;bd=pd=0;td=1;Oc=0;rd=5126;md=Rc=gd=Gc=0;L(ja)?(me=!0,ce=P.createStream(34962,ja),rd=ce.dtype):(ce=
P.getBuffer(ja))?rd=ce.dtype:"constant"in ja?(td=2,"number"===typeof ja.constant?(gd=ja.constant,Rc=md=Gc=0):(gd=0<ja.constant.length?ja.constant[0]:0,Rc=1<ja.constant.length?ja.constant[1]:0,md=2<ja.constant.length?ja.constant[2]:0,Gc=3<ja.constant.length?ja.constant[3]:0)):(ce=L(ja.buffer)?P.createStream(34962,ja.buffer):P.getBuffer(ja.buffer),rd="type"in ja?Ba[ja.type]:ce.dtype,Ed=!!ja.normalized,bd=ja.size|0,pd=ja.offset|0,Oc=ja.stride|0,Md=ja.divisor|0);Vb=I.location;Eb=S[Vb];if(1===td){Eb.buffer||
K.enableVertexAttribArray(Vb);vc=bd||1;if(Eb.type!==rd||Eb.size!==vc||Eb.buffer!==ce||Eb.normalized!==Ed||Eb.offset!==pd||Eb.stride!==Oc)K.bindBuffer(34962,ce.buffer),K.vertexAttribPointer(Vb,vc,rd,Ed,Oc,pd),Eb.type=rd,Eb.size=vc,Eb.buffer=ce,Eb.normalized=Ed,Eb.offset=pd,Eb.stride=Oc;Eb.divisor!==Md&&(z.vertexAttribDivisorANGLE(Vb,Md),Eb.divisor=Md)}else if(Eb.buffer&&(K.disableVertexAttribArray(Vb),Eb.buffer=null),Eb.x!==gd||Eb.y!==Rc||Eb.z!==md||Eb.w!==Gc)K.vertexAttrib4f(Vb,gd,Rc,md,Gc),Eb.x=
gd,Eb.y=Rc,Eb.z=md,Eb.w=Gc;zb=this.charBuffer;yc=!1;Bb=null;Lc=0;mc=!1;hd=Hc=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Ic=0;L(zb)?(yc=!0,Bb=P.createStream(34962,zb),fc=Bb.dtype):(Bb=P.getBuffer(zb))?fc=Bb.dtype:"constant"in zb?(cd=2,"number"===typeof zb.constant?(pc=zb.constant,rc=nc=Ic=0):(pc=0<zb.constant.length?zb.constant[0]:0,rc=1<zb.constant.length?zb.constant[1]:0,nc=2<zb.constant.length?zb.constant[2]:0,Ic=3<zb.constant.length?zb.constant[3]:0)):(Bb=L(zb.buffer)?P.createStream(34962,zb.buffer):P.getBuffer(zb.buffer),
fc="type"in zb?Ba[zb.type]:Bb.dtype,mc=!!zb.normalized,hd=zb.size|0,Hc=zb.offset|0,Ec=zb.stride|0,Lc=zb.divisor|0);qc=U.location;nb=S[qc];if(1===cd){nb.buffer||K.enableVertexAttribArray(qc);Wc=hd||1;if(nb.type!==fc||nb.size!==Wc||nb.buffer!==Bb||nb.normalized!==mc||nb.offset!==Hc||nb.stride!==Ec)K.bindBuffer(34962,Bb.buffer),K.vertexAttribPointer(qc,Wc,fc,mc,Ec,Hc),nb.type=fc,nb.size=Wc,nb.buffer=Bb,nb.normalized=mc,nb.offset=Hc,nb.stride=Ec;nb.divisor!==Lc&&(z.vertexAttribDivisorANGLE(qc,Lc),nb.divisor=
Lc)}else if(nb.buffer&&(K.disableVertexAttribArray(qc),nb.buffer=null),nb.x!==pc||nb.y!==rc||nb.z!==nc||nb.w!==Ic)K.vertexAttrib4f(qc,pc,rc,nc,Ic),nb.x=pc,nb.y=rc,nb.z=nc,nb.w=Ic;Zb=this.position;hb=!1;Mb=null;bb=0;kb=!1;Jc=Xa=0;Nb=1;Ib=0;sc=5126;Cb=Fb=lb=Ob=0;L(Zb)?(hb=!0,Mb=P.createStream(34962,Zb),sc=Mb.dtype):(Mb=P.getBuffer(Zb))?sc=Mb.dtype:"constant"in Zb?(Nb=2,"number"===typeof Zb.constant?(lb=Zb.constant,Fb=Cb=Ob=0):(lb=0<Zb.constant.length?Zb.constant[0]:0,Fb=1<Zb.constant.length?Zb.constant[1]:
0,Cb=2<Zb.constant.length?Zb.constant[2]:0,Ob=3<Zb.constant.length?Zb.constant[3]:0)):(Mb=L(Zb.buffer)?P.createStream(34962,Zb.buffer):P.getBuffer(Zb.buffer),sc="type"in Zb?Ba[Zb.type]:Mb.dtype,kb=!!Zb.normalized,Jc=Zb.size|0,Xa=Zb.offset|0,Ib=Zb.stride|0,bb=Zb.divisor|0);yb=ca.location;ib=S[yb];if(1===Nb){ib.buffer||K.enableVertexAttribArray(yb);$b=Jc||2;if(ib.type!==sc||ib.size!==$b||ib.buffer!==Mb||ib.normalized!==kb||ib.offset!==Xa||ib.stride!==Ib)K.bindBuffer(34962,Mb.buffer),K.vertexAttribPointer(yb,
$b,sc,kb,Ib,Xa),ib.type=sc,ib.size=$b,ib.buffer=Mb,ib.normalized=kb,ib.offset=Xa,ib.stride=Ib;ib.divisor!==bb&&(z.vertexAttribDivisorANGLE(yb,bb),ib.divisor=bb)}else if(ib.buffer&&(K.disableVertexAttribArray(yb),ib.buffer=null),ib.x!==lb||ib.y!==Fb||ib.z!==Cb||ib.w!==Ob)K.vertexAttrib4f(yb,lb,Fb,Cb,Ob),ib.x=lb,ib.y=Fb,ib.z=Cb,ib.w=Ob;Pb=u.call(this,N,c,0);K.uniform1f(G.location,Pb);rb=p.call(this,N,c,0);K.uniform1f(J.location,rb);K.uniform1f(r.location,c.align);K.uniform1f(A.location,c.baseline);
Ta=this.viewportArray;K.uniform4f(T.location,Ta[0],Ta[1],Ta[2],Ta[3]);Ub=c.color;K.uniform4f(D.location,Ub[0],Ub[1],Ub[2],Ub[3]);sb=n.call(this,N,c,0);K.uniform2f(F.location,sb[0],sb[1]);jc=b.call(this,N,c,0);K.uniform2f(ga.location,jc[0],jc[1]);jb=this.scale;K.uniform2f(fa.location,jb[0],jb[1]);qb=this.translate;K.uniform2f(Aa.location,qb[0],qb[1]);Ja=c.positionOffset;K.uniform2f(M.location,Ja[0],Ja[1]);K.uniform1f(t.location,c.opacity);(tb=f.call(this,N,c,0))&&"framebuffer"===tb._reglType&&(tb=
tb.color[0]);La=tb._texture;K.uniform1i(H.location,La.bind());(eb=Q.elements)?K.bindBuffer(34963,eb.buffer.buffer):ia.currentVAO&&(eb=R.getElements(ia.currentVAO.elements))&&K.bindBuffer(34963,eb.buffer.buffer);gb=c.offset;if(Na=c.count)mb=Q.instances,0<mb?eb?z.drawElementsInstancedANGLE(0,Na,eb.type,gb<<(eb.type-5121>>1),mb):z.drawArraysInstancedANGLE(0,gb,Na,mb):0>mb&&(eb?K.drawElements(0,Na,eb.type,gb<<(eb.type-5121>>1)):K.drawArrays(0,gb,Na)),O.dirty=!0,ia.setVAO(null),N.viewportWidth=q,N.viewportHeight=
v,w&&(d.cpuTime+=performance.now()-B),x&&P.destroyStream(y),me&&P.destroyStream(ce),yc&&P.destroyStream(Bb),hb&&P.destroyStream(Mb),La.unbind()},scope:function(b,a,f){var t,v,w,n,u,h,B,x,C,p,E,K,la,ha,W,ea,A,H,r,F,D,sa,Ka,wa,Ia,I,G,S,Z,ba,M,Hb,R,Qa,Da,xa,ua,ia,va,qa,T,ga,X,U,ca,J,Va,pa,fa,Ca,za,ma,oa,Ea,Gb,Ra,Aa,Wc,Zb,hb,Mb,bb,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za,nd,Ab,
ab,Wb,uc,Xb,Qb,Nc,Rb,Od,Fc,sd,Pc,Yc,vd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Sc,Tc,Uc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd;t=this.viewport;v=t.x|0;w=t.y|0;n="width"in t?t.width|0:N.framebufferWidth-v;u="height"in t?t.height|0:N.framebufferHeight-w;h=N.viewportWidth;N.viewportWidth=n;B=N.viewportHeight;N.viewportHeight=u;x=ra[0];ra[0]=v;C=ra[1];ra[1]=w;p=ra[2];ra[2]=n;E=ra[3];ra[3]=u;K=ya[0];ya[0]=0;la=ya[1];ya[1]=0;ha=ya[2];ya[2]=0;W=ya[3];ya[3]=1;ea=da.blend_enable;da.blend_enable=!0;A=ka[0];ka[0]=770;
H=ka[1];ka[1]=771;r=ka[2];ka[2]=773;F=ka[3];ka[3]=1;D=da.depth_enable;da.depth_enable=!1;sa=da.stencil_enable;da.stencil_enable=!1;if(Ka=O.profile)wa=performance.now(),d.count++;Ia=b.offset;I=Q.offset;Q.offset=Ia;G=b.count;S=Q.count;Q.count=G;Z=Q.primitive;Q.primitive=0;ba=b.align;M=na[64];na[64]=ba;Hb=c.call(this,N,b,f);R=na[69];na[69]=Hb;Qa=k.call(this,N,b,f);Da=na[67];na[67]=Qa;xa=y.call(this,N,b,f);ua=na[66];na[66]=xa;ia=b.baseline;va=na[65];na[65]=ia;qa=z.call(this,N,b,f);T=na[62];na[62]=qa;
ga=b.color;X=na[14];na[14]=ga;U=e.call(this,N,b,f);ca=na[63];na[63]=U;J=b.opacity;Va=na[10];na[10]=J;pa=b.positionOffset;fa=na[68];na[68]=pa;Ca=this.scale;za=na[6];na[6]=Ca;ma=this.translate;oa=na[8];na[8]=ma;Ea=this.viewportArray;Gb=na[3];na[3]=Ea;Ra=this.charBuffer;Aa=!1;Wc=null;Zb=0;hb=!1;bb=Mb=0;kb=1;Xa=0;Jc=5126;Ob=sc=Ib=Nb=0;L(Ra)?(Aa=!0,Wc=P.createStream(34962,Ra),Jc=Wc.dtype):(Wc=P.getBuffer(Ra))?Jc=Wc.dtype:"constant"in Ra?(kb=2,"number"===typeof Ra.constant?(Ib=Ra.constant,sc=Ob=Nb=0):(Ib=
0<Ra.constant.length?Ra.constant[0]:0,sc=1<Ra.constant.length?Ra.constant[1]:0,Ob=2<Ra.constant.length?Ra.constant[2]:0,Nb=3<Ra.constant.length?Ra.constant[3]:0)):(Wc=L(Ra.buffer)?P.createStream(34962,Ra.buffer):P.getBuffer(Ra.buffer),Jc="type"in Ra?Ba[Ra.type]:Wc.dtype,hb=!!Ra.normalized,bb=Ra.size|0,Mb=Ra.offset|0,Xa=Ra.stride|0,Zb=Ra.divisor|0);lb=l.buffer;l.buffer=Wc;Fb=l.divisor;l.divisor=Zb;Cb=l.normalized;l.normalized=hb;yb=l.offset;l.offset=Mb;ib=l.size;l.size=bb;$b=l.state;l.state=kb;Pb=
l.stride;l.stride=Xa;rb=l.type;l.type=Jc;Ta=l.w;l.w=Nb;Ub=l.x;l.x=Ib;sb=l.y;l.y=sc;jc=l.z;l.z=Ob;ja.buffer=this.sizeBuffer;jb=!1;qb=null;Ja=0;tb=!1;eb=La=0;gb=1;Na=0;mb=5126;Pa=ub=vb=Ya=0;L(ja)?(jb=!0,qb=P.createStream(34962,ja),mb=qb.dtype):(qb=P.getBuffer(ja))?mb=qb.dtype:"constant"in ja?(gb=2,"number"===typeof ja.constant?(vb=ja.constant,ub=Pa=Ya=0):(vb=0<ja.constant.length?ja.constant[0]:0,ub=1<ja.constant.length?ja.constant[1]:0,Pa=2<ja.constant.length?ja.constant[2]:0,Ya=3<ja.constant.length?
ja.constant[3]:0)):(qb=L(ja.buffer)?P.createStream(34962,ja.buffer):P.getBuffer(ja.buffer),mb="type"in ja?Ba[ja.type]:qb.dtype,tb=!!ja.normalized,eb=ja.size|0,La=ja.offset|0,Na=ja.stride|0,Ja=ja.divisor|0);Dc=g.buffer;g.buffer=qb;Wa=g.divisor;g.divisor=Ja;Jb=g.normalized;g.normalized=tb;Db=g.offset;g.offset=La;Ma=g.size;g.size=eb;zd=g.state;g.state=gb;$a=g.stride;g.stride=Na;Kb=g.type;g.type=mb;Lb=g.w;g.w=Ya;ob=g.x;g.x=vb;Oa=g.y;g.y=ub;ac=g.z;g.z=Pa;Sa=this.position;wb=!1;xb=null;Ua=0;pb=!1;Bc=gc=
0;wc=1;cb=0;kc=5126;Ab=nd=Za=Mc=0;L(Sa)?(wb=!0,xb=P.createStream(34962,Sa),kc=xb.dtype):(xb=P.getBuffer(Sa))?kc=xb.dtype:"constant"in Sa?(wc=2,"number"===typeof Sa.constant?(Za=Sa.constant,nd=Ab=Mc=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,nd=1<Sa.constant.length?Sa.constant[1]:0,Ab=2<Sa.constant.length?Sa.constant[2]:0,Mc=3<Sa.constant.length?Sa.constant[3]:0)):(xb=L(Sa.buffer)?P.createStream(34962,Sa.buffer):P.getBuffer(Sa.buffer),kc="type"in Sa?Ba[Sa.type]:xb.dtype,pb=!!Sa.normalized,Bc=Sa.size|
0,gc=Sa.offset|0,cb=Sa.stride|0,Ua=Sa.divisor|0);ab=q.buffer;q.buffer=xb;Wb=q.divisor;q.divisor=Ua;uc=q.normalized;q.normalized=pb;Xb=q.offset;q.offset=gc;Qb=q.size;q.size=Bc;Nc=q.state;q.state=wc;Rb=q.stride;q.stride=cb;Od=q.type;q.type=kc;Fc=q.w;q.w=Mc;sd=q.x;q.x=Za;Pc=q.y;q.y=nd;Yc=q.z;q.z=Ab;Y.buffer=this.sizeBuffer;vd=!1;oc=null;xc=0;hc=!1;tc=db=0;Tb=1;Yb=0;ec=5126;dd=Cc=zc=ic=0;L(Y)?(vd=!0,oc=P.createStream(34962,Y),ec=oc.dtype):(oc=P.getBuffer(Y))?ec=oc.dtype:"constant"in Y?(Tb=2,"number"===
typeof Y.constant?(zc=Y.constant,Cc=dd=ic=0):(zc=0<Y.constant.length?Y.constant[0]:0,Cc=1<Y.constant.length?Y.constant[1]:0,dd=2<Y.constant.length?Y.constant[2]:0,ic=3<Y.constant.length?Y.constant[3]:0)):(oc=L(Y.buffer)?P.createStream(34962,Y.buffer):P.getBuffer(Y.buffer),ec="type"in Y?Ba[Y.type]:oc.dtype,hc=!!Y.normalized,tc=Y.size|0,db=Y.offset|0,Yb=Y.stride|0,xc=Y.divisor|0);Sc=m.buffer;m.buffer=oc;Tc=m.divisor;m.divisor=xc;Uc=m.normalized;m.normalized=hc;Zc=m.offset;m.offset=db;od=m.size;m.size=
tc;ed=m.state;m.state=Tb;$c=m.stride;m.stride=Yb;lc=m.type;m.type=ec;dc=m.w;m.w=ic;ad=m.x;m.x=zc;Xc=m.y;m.y=Cc;fd=m.z;m.z=dd;Ac=V.vert;V.vert=61;jd=V.frag;V.frag=60;O.dirty=!0;a(N,b,f);N.viewportWidth=h;N.viewportHeight=B;ra[0]=x;ra[1]=C;ra[2]=p;ra[3]=E;ya[0]=K;ya[1]=la;ya[2]=ha;ya[3]=W;da.blend_enable=ea;ka[0]=A;ka[1]=H;ka[2]=r;ka[3]=F;da.depth_enable=D;da.stencil_enable=sa;Ka&&(d.cpuTime+=performance.now()-wa);Q.offset=I;Q.count=S;Q.primitive=Z;na[64]=M;na[69]=R;na[67]=Da;na[66]=ua;na[65]=va;na[62]=
T;na[14]=X;na[63]=ca;na[10]=Va;na[68]=fa;na[6]=za;na[8]=oa;na[3]=Gb;Aa&&P.destroyStream(Wc);l.buffer=lb;l.divisor=Fb;l.normalized=Cb;l.offset=yb;l.size=ib;l.state=$b;l.stride=Pb;l.type=rb;l.w=Ta;l.x=Ub;l.y=sb;l.z=jc;jb&&P.destroyStream(qb);g.buffer=Dc;g.divisor=Wa;g.normalized=Jb;g.offset=Db;g.size=Ma;g.state=zd;g.stride=$a;g.type=Kb;g.w=Lb;g.x=ob;g.y=Oa;g.z=ac;wb&&P.destroyStream(xb);q.buffer=ab;q.divisor=Wb;q.normalized=uc;q.offset=Xb;q.size=Qb;q.state=Nc;q.stride=Rb;q.type=Od;q.w=Fc;q.x=sd;q.y=
Pc;q.z=Yc;vd&&P.destroyStream(oc);m.buffer=Sc;m.divisor=Tc;m.normalized=Uc;m.offset=Zc;m.size=od;m.state=ed;m.stride=$c;m.type=lc;m.w=dc;m.x=ad;m.y=Xc;m.z=fd;V.vert=Ac;V.frag=jd;O.dirty=!0}}},$2:function(a,d,h){var u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,ga,F,A,U,I,G,D,J;u=a.attributes;p=a.current;n=a.framebuffer;b=a.gl;f=a.next;c=a.vao;k=f.blend_color;y=p.blend_color;z=f.blend_equation;e=p.blend_equation;l=f.blend_func;g=p.blend_func;q=f.colorMask;m=p.colorMask;v=f.depth_range;w=p.depth_range;
B=f.polygonOffset_offset;la=p.polygonOffset_offset;x=f.sample_coverage;E=p.sample_coverage;r=f.scissor_box;H=p.scissor_box;ga=f.stencil_func;F=p.stencil_func;A=f.stencil_opBack;U=p.stencil_opBack;I=f.stencil_opFront;G=p.stencil_opFront;D=f.viewport;J=p.viewport;return{poll:function(){var c,a,d,u,h,C,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya;p.dirty=!1;a=f.blend_enable;d=f.cull_enable;u=f.depth_enable;h=f.dither;C=f.polygonOffset_enable;X=f.sample_alpha;S=f.sample_enable;P=f.scissor_enable;N=f.stencil_enable;
O=f.cull_face;Q=p.cull_face;R=f.depth_func;qa=p.depth_func;oa=f.depth_mask;K=p.depth_mask;L=f.frontFace;da=p.frontFace;V=f.lineWidth;na=p.lineWidth;ia=f.stencil_mask;ya=p.stencil_mask;c=n.next;c!==n.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),n.cur=c);a!==p.blend_enable&&(a?b.enable(3042):b.disable(3042),p.blend_enable=a);d!==p.cull_enable&&(d?b.enable(2884):b.disable(2884),p.cull_enable=d);u!==p.depth_enable&&(u?b.enable(2929):b.disable(2929),p.depth_enable=u);h!==
p.dither&&(h?b.enable(3024):b.disable(3024),p.dither=h);C!==p.polygonOffset_enable&&(C?b.enable(32823):b.disable(32823),p.polygonOffset_enable=C);X!==p.sample_alpha&&(X?b.enable(32926):b.disable(32926),p.sample_alpha=X);S!==p.sample_enable&&(S?b.enable(32928):b.disable(32928),p.sample_enable=S);P!==p.scissor_enable&&(P?b.enable(3089):b.disable(3089),p.scissor_enable=P);N!==p.stencil_enable&&(N?b.enable(2960):b.disable(2960),p.stencil_enable=N);if(k[0]!==y[0]||k[1]!==y[1]||k[2]!==y[2]||k[3]!==y[3])b.blendColor(k[0],
k[1],k[2],k[3]),y[0]=k[0],y[1]=k[1],y[2]=k[2],y[3]=k[3];if(z[0]!==e[0]||z[1]!==e[1])b.blendEquationSeparate(z[0],z[1]),e[0]=z[0],e[1]=z[1];if(l[0]!==g[0]||l[1]!==g[1]||l[2]!==g[2]||l[3]!==g[3])b.blendFuncSeparate(l[0],l[1],l[2],l[3]),g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[3];if(q[0]!==m[0]||q[1]!==m[1]||q[2]!==m[2]||q[3]!==m[3])b.colorMask(q[0],q[1],q[2],q[3]),m[0]=q[0],m[1]=q[1],m[2]=q[2],m[3]=q[3];O!==Q&&(b.cullFace(O),p.cull_face=O);R!==qa&&(b.depthFunc(R),p.depth_func=R);oa!==K&&(b.depthMask(oa),
p.depth_mask=oa);if(v[0]!==w[0]||v[1]!==w[1])b.depthRange(v[0],v[1]),w[0]=v[0],w[1]=v[1];L!==da&&(b.frontFace(L),p.frontFace=L);V!==na&&(b.lineWidth(V),p.lineWidth=V);if(B[0]!==la[0]||B[1]!==la[1])b.polygonOffset(B[0],B[1]),la[0]=B[0],la[1]=B[1];if(x[0]!==E[0]||x[1]!==E[1])b.sampleCoverage(x[0],x[1]),E[0]=x[0],E[1]=x[1];if(r[0]!==H[0]||r[1]!==H[1]||r[2]!==H[2]||r[3]!==H[3])b.scissor(r[0],r[1],r[2],r[3]),H[0]=r[0],H[1]=r[1],H[2]=r[2],H[3]=r[3];if(ga[0]!==F[0]||ga[1]!==F[1]||ga[2]!==F[2])b.stencilFunc(ga[0],
ga[1],ga[2]),F[0]=ga[0],F[1]=ga[1],F[2]=ga[2];ia!==ya&&(b.stencilMask(ia),p.stencil_mask=ia);if(A[0]!==U[0]||A[1]!==U[1]||A[2]!==U[2]||A[3]!==U[3])b.stencilOpSeparate(A[0],A[1],A[2],A[3]),U[0]=A[0],U[1]=A[1],U[2]=A[2],U[3]=A[3];if(I[0]!==G[0]||I[1]!==G[1]||I[2]!==G[2]||I[3]!==G[3])b.stencilOpSeparate(I[0],I[1],I[2],I[3]),G[0]=I[0],G[1]=I[1],G[2]=I[2],G[3]=I[3];if(D[0]!==J[0]||D[1]!==J[1]||D[2]!==J[2]||D[3]!==J[3])b.viewport(D[0],D[1],D[2],D[3]),J[0]=D[0],J[1]=D[1],J[2]=D[2],J[3]=D[3]},refresh:function(){var a,
d,h,C,Aa,T,X,S,P,N,O,Q,R,qa,oa,K;p.dirty=!1;d=f.blend_enable;h=f.cull_enable;C=f.depth_enable;Aa=f.dither;T=f.polygonOffset_enable;X=f.sample_alpha;S=f.sample_enable;P=f.scissor_enable;N=f.stencil_enable;O=f.cull_face;Q=f.depth_func;R=f.depth_mask;qa=f.frontFace;oa=f.lineWidth;K=f.stencil_mask;(a=n.next)?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null);n.cur=a;a=u[0];a.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(0,a.size,a.type,
a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=u[1];a.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=u[2];a.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):
(b.disableVertexAttribArray(2),b.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=u[3];a.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=u[4];a.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(4),
b.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=u[5];a.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=u[6];a.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,a.x,a.y,a.z,
a.w),a.buffer=null);a=u[7];a.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=u[8];a.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=u[9];a.buffer?
(b.enableVertexAttribArray(9),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=u[10];a.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=u[11];a.buffer?(b.enableVertexAttribArray(11),
b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=u[12];a.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=u[13];a.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,a.buffer.buffer),
b.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=u[14];a.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=u[15];a.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(15,
a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(15),b.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.currentVAO=null;c.setVAO(c.targetVAO);d?b.enable(3042):b.disable(3042);p.blend_enable=d;h?b.enable(2884):b.disable(2884);p.cull_enable=h;C?b.enable(2929):b.disable(2929);p.depth_enable=C;Aa?b.enable(3024):b.disable(3024);p.dither=Aa;T?b.enable(32823):b.disable(32823);p.polygonOffset_enable=T;X?b.enable(32926):b.disable(32926);p.sample_alpha=X;S?b.enable(32928):b.disable(32928);
p.sample_enable=S;P?b.enable(3089):b.disable(3089);p.scissor_enable=P;N?b.enable(2960):b.disable(2960);p.stencil_enable=N;b.blendColor(k[0],k[1],k[2],k[3]);y[0]=k[0];y[1]=k[1];y[2]=k[2];y[3]=k[3];b.blendEquationSeparate(z[0],z[1]);e[0]=z[0];e[1]=z[1];b.blendFuncSeparate(l[0],l[1],l[2],l[3]);g[0]=l[0];g[1]=l[1];g[2]=l[2];g[3]=l[3];b.colorMask(q[0],q[1],q[2],q[3]);m[0]=q[0];m[1]=q[1];m[2]=q[2];m[3]=q[3];b.cullFace(O);p.cull_face=O;b.depthFunc(Q);p.depth_func=Q;b.depthMask(R);p.depth_mask=R;b.depthRange(v[0],
v[1]);w[0]=v[0];w[1]=v[1];b.frontFace(qa);p.frontFace=qa;b.lineWidth(oa);p.lineWidth=oa;b.polygonOffset(B[0],B[1]);la[0]=B[0];la[1]=B[1];b.sampleCoverage(x[0],x[1]);E[0]=x[0];E[1]=x[1];b.scissor(r[0],r[1],r[2],r[3]);H[0]=r[0];H[1]=r[1];H[2]=r[2];H[3]=r[3];b.stencilFunc(ga[0],ga[1],ga[2]);F[0]=ga[0];F[1]=ga[1];F[2]=ga[2];b.stencilMask(K);p.stencil_mask=K;b.stencilOpSeparate(A[0],A[1],A[2],A[3]);U[0]=A[0];U[1]=A[1];U[2]=A[2];U[3]=A[3];b.stencilOpSeparate(I[0],I[1],I[2],I[3]);G[0]=I[0];G[1]=I[1];G[2]=
I[2];G[3]=I[3];b.viewport(D[0],D[1],D[2],D[3]);J[0]=D[0];J[1]=D[1];J[2]=D[2];J[3]=D[3]}}},$7:function(a,d,h,u,p,n,b,f){var c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,ga,F,A,U,I,G,D,J,t,ca,M,fa,Aa,T,X,S;c=a.context;k=a.current;y=a.framebuffer;z=a.gl;e=a.next;l=a.shader;g=a.vao;q=e.blend_color;m=k.blend_color;v=e.blend_equation;w=k.blend_equation;B=e.blend_func;la=k.blend_func;x=e.colorMask;E=k.colorMask;r=e.depth_range;H=k.depth_range;ga=e.polygonOffset_offset;F=k.polygonOffset_offset;A=e.sample_coverage;
U=k.sample_coverage;I=e.scissor_box;G=k.scissor_box;D=e.stencil_func;J=k.stencil_func;t=e.stencil_opBack;ca=k.stencil_opBack;M=e.stencil_opFront;fa=k.stencil_opFront;Aa=e.viewport;T=k.viewport;X={};S={};return{draw:function(a){var b,f,I,S,qa,oa,K,L,da,V;b=a.framebuffer;f=y.getFramebuffer(b);b&&!f&&d.commandRaise(p,h);b=y.next;y.next=f;I=c.framebufferWidth;c.framebufferWidth=f?f.width:c.drawingBufferWidth;S=c.framebufferHeight;c.framebufferHeight=f?f.height:c.drawingBufferHeight;f!==y.cur&&(f?z.bindFramebuffer(36160,
f.framebuffer):z.bindFramebuffer(36160,null),y.cur=f);if(k.dirty){f=e.dither;f!==k.dither&&(f?z.enable(3024):z.disable(3024),k.dither=f);f=e.blend_enable;f!==k.blend_enable&&(f?z.enable(3042):z.disable(3042),k.blend_enable=f);f=q[0];K=q[1];qa=q[2];oa=q[3];if(f!==m[0]||K!==m[1]||qa!==m[2]||oa!==m[3])z.blendColor(f,K,qa,oa),m[0]=f,m[1]=K,m[2]=qa,m[3]=oa;f=v[0];K=v[1];if(f!==w[0]||K!==w[1])z.blendEquationSeparate(f,K),w[0]=f,w[1]=K;f=B[0];K=B[1];qa=B[2];oa=B[3];if(f!==la[0]||K!==la[1]||qa!==la[2]||oa!==
la[3])z.blendFuncSeparate(f,K,qa,oa),la[0]=f,la[1]=K,la[2]=qa,la[3]=oa;f=e.depth_enable;f!==k.depth_enable&&(f?z.enable(2929):z.disable(2929),k.depth_enable=f);f=e.depth_func;f!==k.depth_func&&(z.depthFunc(f),k.depth_func=f);f=r[0];K=r[1];if(f!==H[0]||K!==H[1])z.depthRange(f,K),H[0]=f,H[1]=K;f=e.depth_mask;f!==k.depth_mask&&(z.depthMask(f),k.depth_mask=f);f=x[0];K=x[1];qa=x[2];oa=x[3];if(f!==E[0]||K!==E[1]||qa!==E[2]||oa!==E[3])z.colorMask(f,K,qa,oa),E[0]=f,E[1]=K,E[2]=qa,E[3]=oa;f=e.cull_enable;
f!==k.cull_enable&&(f?z.enable(2884):z.disable(2884),k.cull_enable=f);f=e.cull_face;f!==k.cull_face&&(z.cullFace(f),k.cull_face=f);f=e.frontFace;f!==k.frontFace&&(z.frontFace(f),k.frontFace=f);f=e.lineWidth;f!==k.lineWidth&&(z.lineWidth(f),k.lineWidth=f);f=e.polygonOffset_enable;f!==k.polygonOffset_enable&&(f?z.enable(32823):z.disable(32823),k.polygonOffset_enable=f);f=ga[0];K=ga[1];if(f!==F[0]||K!==F[1])z.polygonOffset(f,K),F[0]=f,F[1]=K;f=e.sample_alpha;f!==k.sample_alpha&&(f?z.enable(32926):z.disable(32926),
k.sample_alpha=f);f=e.sample_enable;f!==k.sample_enable&&(f?z.enable(32928):z.disable(32928),k.sample_enable=f);f=A[0];K=A[1];if(f!==U[0]||K!==U[1])z.sampleCoverage(f,K),U[0]=f,U[1]=K;f=e.stencil_enable;f!==k.stencil_enable&&(f?z.enable(2960):z.disable(2960),k.stencil_enable=f);f=e.stencil_mask;f!==k.stencil_mask&&(z.stencilMask(f),k.stencil_mask=f);f=D[0];K=D[1];qa=D[2];if(f!==J[0]||K!==J[1]||qa!==J[2])z.stencilFunc(f,K,qa),J[0]=f,J[1]=K,J[2]=qa;f=M[0];K=M[1];qa=M[2];oa=M[3];if(f!==fa[0]||K!==fa[1]||
qa!==fa[2]||oa!==fa[3])z.stencilOpSeparate(f,K,qa,oa),fa[0]=f,fa[1]=K,fa[2]=qa,fa[3]=oa;f=t[0];K=t[1];qa=t[2];oa=t[3];if(f!==ca[0]||K!==ca[1]||qa!==ca[2]||oa!==ca[3])z.stencilOpSeparate(f,K,qa,oa),ca[0]=f,ca[1]=K,ca[2]=qa,ca[3]=oa;f=e.scissor_enable;f!==k.scissor_enable&&(f?z.enable(3089):z.disable(3089),k.scissor_enable=f)}qa=c.framebufferWidth;oa=c.framebufferHeight;f=c.viewportWidth;c.viewportWidth=qa;K=c.viewportHeight;c.viewportHeight=oa;z.viewport(0,0,qa,oa);T[0]=0;T[1]=0;T[2]=qa;T[3]=oa;qa=
c.framebufferWidth;oa=c.framebufferHeight;z.scissor(0,0,qa,oa);G[0]=0;G[1]=0;G[2]=qa;G[3]=oa;if(qa=k.profile)L=performance.now(),u.count++;oa=l.program(l.vert,l.frag,h);z.useProgram(oa.program);g.setVAO(null);da=oa.id;(V=X[da])||(V=X[da]=n(oa));V.call(this,a);k.dirty=!0;g.setVAO(null);y.next=b;c.framebufferWidth=I;c.framebufferHeight=S;c.viewportWidth=f;c.viewportHeight=K;qa&&(u.cpuTime+=performance.now()-L)},scope:function(a,e,l){var f,g,m,q,v,w,n,t,B,z,x,p,E,la,r;f=a.framebuffer;g=y.getFramebuffer(f);
f&&!g&&d.commandRaise(b,h);f=y.next;y.next=g;m=c.framebufferWidth;c.framebufferWidth=g?g.width:c.drawingBufferWidth;q=c.framebufferHeight;c.framebufferHeight=g?g.height:c.drawingBufferHeight;v=c.framebufferWidth;w=c.framebufferHeight;g=c.viewportWidth;c.viewportWidth=v;n=c.viewportHeight;c.viewportHeight=w;t=Aa[0];Aa[0]=0;B=Aa[1];Aa[1]=0;z=Aa[2];Aa[2]=v;v=Aa[3];Aa[3]=w;x=c.framebufferWidth;p=c.framebufferHeight;w=I[0];I[0]=0;E=I[1];I[1]=0;la=I[2];I[2]=x;x=I[3];I[3]=p;if(p=k.profile)r=performance.now(),
u.count++;k.dirty=!0;e(c,a,l);y.next=f;c.framebufferWidth=m;c.framebufferHeight=q;c.viewportWidth=g;c.viewportHeight=n;Aa[0]=t;Aa[1]=B;Aa[2]=z;Aa[3]=v;I[0]=w;I[1]=E;I[2]=la;I[3]=x;p&&(u.cpuTime+=performance.now()-r);k.dirty=!0},batch:function(c,a){var b,d,n,y,p;if(k.dirty){b=e.dither;b!==k.dither&&(b?z.enable(3024):z.disable(3024),k.dither=b);b=e.blend_enable;b!==k.blend_enable&&(b?z.enable(3042):z.disable(3042),k.blend_enable=b);b=q[0];n=q[1];y=q[2];p=q[3];if(b!==m[0]||n!==m[1]||y!==m[2]||p!==m[3])z.blendColor(b,
n,y,p),m[0]=b,m[1]=n,m[2]=y,m[3]=p;b=v[0];n=v[1];if(b!==w[0]||n!==w[1])z.blendEquationSeparate(b,n),w[0]=b,w[1]=n;b=B[0];n=B[1];y=B[2];p=B[3];if(b!==la[0]||n!==la[1]||y!==la[2]||p!==la[3])z.blendFuncSeparate(b,n,y,p),la[0]=b,la[1]=n,la[2]=y,la[3]=p;b=e.depth_enable;b!==k.depth_enable&&(b?z.enable(2929):z.disable(2929),k.depth_enable=b);b=e.depth_func;b!==k.depth_func&&(z.depthFunc(b),k.depth_func=b);b=r[0];n=r[1];if(b!==H[0]||n!==H[1])z.depthRange(b,n),H[0]=b,H[1]=n;b=e.depth_mask;b!==k.depth_mask&&
(z.depthMask(b),k.depth_mask=b);b=x[0];n=x[1];y=x[2];p=x[3];if(b!==E[0]||n!==E[1]||y!==E[2]||p!==E[3])z.colorMask(b,n,y,p),E[0]=b,E[1]=n,E[2]=y,E[3]=p;b=e.cull_enable;b!==k.cull_enable&&(b?z.enable(2884):z.disable(2884),k.cull_enable=b);b=e.cull_face;b!==k.cull_face&&(z.cullFace(b),k.cull_face=b);b=e.frontFace;b!==k.frontFace&&(z.frontFace(b),k.frontFace=b);b=e.lineWidth;b!==k.lineWidth&&(z.lineWidth(b),k.lineWidth=b);b=e.polygonOffset_enable;b!==k.polygonOffset_enable&&(b?z.enable(32823):z.disable(32823),
k.polygonOffset_enable=b);b=ga[0];n=ga[1];if(b!==F[0]||n!==F[1])z.polygonOffset(b,n),F[0]=b,F[1]=n;b=e.sample_alpha;b!==k.sample_alpha&&(b?z.enable(32926):z.disable(32926),k.sample_alpha=b);b=e.sample_enable;b!==k.sample_enable&&(b?z.enable(32928):z.disable(32928),k.sample_enable=b);b=A[0];n=A[1];if(b!==U[0]||n!==U[1])z.sampleCoverage(b,n),U[0]=b,U[1]=n;b=e.stencil_enable;b!==k.stencil_enable&&(b?z.enable(2960):z.disable(2960),k.stencil_enable=b);b=e.stencil_mask;b!==k.stencil_mask&&(z.stencilMask(b),
k.stencil_mask=b);b=D[0];n=D[1];y=D[2];if(b!==J[0]||n!==J[1]||y!==J[2])z.stencilFunc(b,n,y),J[0]=b,J[1]=n,J[2]=y;b=M[0];n=M[1];y=M[2];p=M[3];if(b!==fa[0]||n!==fa[1]||y!==fa[2]||p!==fa[3])z.stencilOpSeparate(b,n,y,p),fa[0]=b,fa[1]=n,fa[2]=y,fa[3]=p;b=t[0];n=t[1];y=t[2];p=t[3];if(b!==ca[0]||n!==ca[1]||y!==ca[2]||p!==ca[3])z.stencilOpSeparate(b,n,y,p),ca[0]=b,ca[1]=n,ca[2]=y,ca[3]=p;b=e.scissor_enable;b!==k.scissor_enable&&(b?z.enable(3089):z.disable(3089),k.scissor_enable=b)}if(b=k.profile)d=performance.now(),
u.count+=a;n=l.program(l.vert,l.frag,h);z.useProgram(n.program);g.setVAO(null);y=n.id;(p=S[y])||(p=S[y]=f(n));p.call(this,c,a);k.dirty=!0;g.setVAO(null);b&&(u.cpuTime+=performance.now()-d)}}},$5:function(a,d,h,u,p,n){var b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,ga,F,A,J,I,G,D,ma,t,ca,M,fa,Aa,T;b=a.context;f=a.current;c=a.framebuffer;k=a.gl;y=a.next;z=a.shader;e=a.vao;l=y.blend_color;g=f.blend_color;q=y.blend_equation;m=f.blend_equation;v=y.blend_func;w=f.blend_func;B=y.colorMask;la=f.colorMask;x=y.depth_range;
E=f.depth_range;r=y.polygonOffset_offset;H=f.polygonOffset_offset;ga=y.sample_coverage;F=f.sample_coverage;A=y.scissor_box;J=f.scissor_box;I=y.stencil_func;G=f.stencil_func;D=y.stencil_opBack;ma=f.stencil_opBack;t=y.stencil_opFront;ca=f.stencil_opFront;M=y.viewport;fa=f.viewport;Aa={};T={};return{draw:function(b){var a,d,n,O,Q;a=c.next;a!==c.cur&&(a?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null),c.cur=a);if(f.dirty){a=y.dither;a!==f.dither&&(a?k.enable(3024):k.disable(3024),
f.dither=a);a=y.blend_enable;a!==f.blend_enable&&(a?k.enable(3042):k.disable(3042),f.blend_enable=a);a=l[0];n=l[1];O=l[2];Q=l[3];if(a!==g[0]||n!==g[1]||O!==g[2]||Q!==g[3])k.blendColor(a,n,O,Q),g[0]=a,g[1]=n,g[2]=O,g[3]=Q;a=q[0];n=q[1];if(a!==m[0]||n!==m[1])k.blendEquationSeparate(a,n),m[0]=a,m[1]=n;a=v[0];n=v[1];O=v[2];Q=v[3];if(a!==w[0]||n!==w[1]||O!==w[2]||Q!==w[3])k.blendFuncSeparate(a,n,O,Q),w[0]=a,w[1]=n,w[2]=O,w[3]=Q;a=y.depth_enable;a!==f.depth_enable&&(a?k.enable(2929):k.disable(2929),f.depth_enable=
a);a=y.depth_func;a!==f.depth_func&&(k.depthFunc(a),f.depth_func=a);a=x[0];n=x[1];if(a!==E[0]||n!==E[1])k.depthRange(a,n),E[0]=a,E[1]=n;a=y.depth_mask;a!==f.depth_mask&&(k.depthMask(a),f.depth_mask=a);a=B[0];n=B[1];O=B[2];Q=B[3];if(a!==la[0]||n!==la[1]||O!==la[2]||Q!==la[3])k.colorMask(a,n,O,Q),la[0]=a,la[1]=n,la[2]=O,la[3]=Q;a=y.cull_enable;a!==f.cull_enable&&(a?k.enable(2884):k.disable(2884),f.cull_enable=a);a=y.cull_face;a!==f.cull_face&&(k.cullFace(a),f.cull_face=a);a=y.frontFace;a!==f.frontFace&&
(k.frontFace(a),f.frontFace=a);a=y.lineWidth;a!==f.lineWidth&&(k.lineWidth(a),f.lineWidth=a);a=y.polygonOffset_enable;a!==f.polygonOffset_enable&&(a?k.enable(32823):k.disable(32823),f.polygonOffset_enable=a);a=r[0];n=r[1];if(a!==H[0]||n!==H[1])k.polygonOffset(a,n),H[0]=a,H[1]=n;a=y.sample_alpha;a!==f.sample_alpha&&(a?k.enable(32926):k.disable(32926),f.sample_alpha=a);a=y.sample_enable;a!==f.sample_enable&&(a?k.enable(32928):k.disable(32928),f.sample_enable=a);a=ga[0];n=ga[1];if(a!==F[0]||n!==F[1])k.sampleCoverage(a,
n),F[0]=a,F[1]=n;a=y.stencil_enable;a!==f.stencil_enable&&(a?k.enable(2960):k.disable(2960),f.stencil_enable=a);a=y.stencil_mask;a!==f.stencil_mask&&(k.stencilMask(a),f.stencil_mask=a);a=I[0];n=I[1];O=I[2];if(a!==G[0]||n!==G[1]||O!==G[2])k.stencilFunc(a,n,O),G[0]=a,G[1]=n,G[2]=O;a=t[0];n=t[1];O=t[2];Q=t[3];if(a!==ca[0]||n!==ca[1]||O!==ca[2]||Q!==ca[3])k.stencilOpSeparate(a,n,O,Q),ca[0]=a,ca[1]=n,ca[2]=O,ca[3]=Q;a=D[0];n=D[1];O=D[2];Q=D[3];if(a!==ma[0]||n!==ma[1]||O!==ma[2]||Q!==ma[3])k.stencilOpSeparate(a,
n,O,Q),ma[0]=a,ma[1]=n,ma[2]=O,ma[3]=Q;a=y.scissor_enable;a!==f.scissor_enable&&(a?k.enable(3089):k.disable(3089),f.scissor_enable=a);a=A[0];n=A[1];O=A[2];Q=A[3];if(a!==J[0]||n!==J[1]||O!==J[2]||Q!==J[3])k.scissor(a,n,O,Q),J[0]=a,J[1]=n,J[2]=O,J[3]=Q;a=M[0];n=M[1];O=M[2];Q=M[3];if(a!==fa[0]||n!==fa[1]||O!==fa[2]||Q!==fa[3])k.viewport(a,n,O,Q),fa[0]=a,fa[1]=n,fa[2]=O,fa[3]=Q;f.dirty=!1}if(a=f.profile)d=performance.now(),u.count++;n=z.program(z.vert,z.frag,h);k.useProgram(n.program);e.setVAO(null);
O=n.id;(Q=Aa[O])||(Q=Aa[O]=p(n));Q.call(this,b);e.setVAO(null);a&&(u.cpuTime+=performance.now()-d)},scope:function(c,a,e){var l,d;if(l=f.profile)d=performance.now(),u.count++;a(b,c,e);l&&(u.cpuTime+=performance.now()-d)},batch:function(a,b){var d,p,O,Q,R;d=c.next;d!==c.cur&&(d?k.bindFramebuffer(36160,d.framebuffer):k.bindFramebuffer(36160,null),c.cur=d);if(f.dirty){d=y.dither;d!==f.dither&&(d?k.enable(3024):k.disable(3024),f.dither=d);d=y.blend_enable;d!==f.blend_enable&&(d?k.enable(3042):k.disable(3042),
f.blend_enable=d);d=l[0];O=l[1];Q=l[2];R=l[3];if(d!==g[0]||O!==g[1]||Q!==g[2]||R!==g[3])k.blendColor(d,O,Q,R),g[0]=d,g[1]=O,g[2]=Q,g[3]=R;d=q[0];O=q[1];if(d!==m[0]||O!==m[1])k.blendEquationSeparate(d,O),m[0]=d,m[1]=O;d=v[0];O=v[1];Q=v[2];R=v[3];if(d!==w[0]||O!==w[1]||Q!==w[2]||R!==w[3])k.blendFuncSeparate(d,O,Q,R),w[0]=d,w[1]=O,w[2]=Q,w[3]=R;d=y.depth_enable;d!==f.depth_enable&&(d?k.enable(2929):k.disable(2929),f.depth_enable=d);d=y.depth_func;d!==f.depth_func&&(k.depthFunc(d),f.depth_func=d);d=x[0];
O=x[1];if(d!==E[0]||O!==E[1])k.depthRange(d,O),E[0]=d,E[1]=O;d=y.depth_mask;d!==f.depth_mask&&(k.depthMask(d),f.depth_mask=d);d=B[0];O=B[1];Q=B[2];R=B[3];if(d!==la[0]||O!==la[1]||Q!==la[2]||R!==la[3])k.colorMask(d,O,Q,R),la[0]=d,la[1]=O,la[2]=Q,la[3]=R;d=y.cull_enable;d!==f.cull_enable&&(d?k.enable(2884):k.disable(2884),f.cull_enable=d);d=y.cull_face;d!==f.cull_face&&(k.cullFace(d),f.cull_face=d);d=y.frontFace;d!==f.frontFace&&(k.frontFace(d),f.frontFace=d);d=y.lineWidth;d!==f.lineWidth&&(k.lineWidth(d),
f.lineWidth=d);d=y.polygonOffset_enable;d!==f.polygonOffset_enable&&(d?k.enable(32823):k.disable(32823),f.polygonOffset_enable=d);d=r[0];O=r[1];if(d!==H[0]||O!==H[1])k.polygonOffset(d,O),H[0]=d,H[1]=O;d=y.sample_alpha;d!==f.sample_alpha&&(d?k.enable(32926):k.disable(32926),f.sample_alpha=d);d=y.sample_enable;d!==f.sample_enable&&(d?k.enable(32928):k.disable(32928),f.sample_enable=d);d=ga[0];O=ga[1];if(d!==F[0]||O!==F[1])k.sampleCoverage(d,O),F[0]=d,F[1]=O;d=y.stencil_enable;d!==f.stencil_enable&&
(d?k.enable(2960):k.disable(2960),f.stencil_enable=d);d=y.stencil_mask;d!==f.stencil_mask&&(k.stencilMask(d),f.stencil_mask=d);d=I[0];O=I[1];Q=I[2];if(d!==G[0]||O!==G[1]||Q!==G[2])k.stencilFunc(d,O,Q),G[0]=d,G[1]=O,G[2]=Q;d=t[0];O=t[1];Q=t[2];R=t[3];if(d!==ca[0]||O!==ca[1]||Q!==ca[2]||R!==ca[3])k.stencilOpSeparate(d,O,Q,R),ca[0]=d,ca[1]=O,ca[2]=Q,ca[3]=R;d=D[0];O=D[1];Q=D[2];R=D[3];if(d!==ma[0]||O!==ma[1]||Q!==ma[2]||R!==ma[3])k.stencilOpSeparate(d,O,Q,R),ma[0]=d,ma[1]=O,ma[2]=Q,ma[3]=R;d=y.scissor_enable;
d!==f.scissor_enable&&(d?k.enable(3089):k.disable(3089),f.scissor_enable=d);d=A[0];O=A[1];Q=A[2];R=A[3];if(d!==J[0]||O!==J[1]||Q!==J[2]||R!==J[3])k.scissor(d,O,Q,R),J[0]=d,J[1]=O,J[2]=Q,J[3]=R;d=M[0];O=M[1];Q=M[2];R=M[3];if(d!==fa[0]||O!==fa[1]||Q!==fa[2]||R!==fa[3])k.viewport(d,O,Q,R),fa[0]=d,fa[1]=O,fa[2]=Q,fa[3]=R;f.dirty=!1}if(d=f.profile)p=performance.now(),u.count+=b;O=z.program(z.vert,z.frag,h);k.useProgram(O.program);e.setVAO(null);Q=O.id;(R=T[Q])||(R=T[Q]=n(O));R.call(this,a,b);e.setVAO(null);
d&&(u.cpuTime+=performance.now()-p)}}},"$26,color,freq,phase,projection,time,view":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,J,F,A,U,I,G,D,ma){var t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb,Z;t=a.attributes;ca=a.context;M=a.current;fa=a.draw;Aa=a.elements;T=a.framebuffer;X=a.gl;S=a.isArrayLike;P=a.next;N=a.shader;O=a.uniforms;Q=a.vao;R=P.blend_color;qa=M.blend_color;oa=P.blend_equation;K=M.blend_equation;L=P.blend_func;
da=M.blend_func;V=P.colorMask;na=M.colorMask;ia=P.depth_range;ya=M.depth_range;va=P.polygonOffset_offset;ba=M.polygonOffset_offset;Ca=P.sample_coverage;ka=M.sample_coverage;pa=P.scissor_box;za=M.scissor_box;Qa=P.stencil_func;Ka=M.stencil_func;Hb=P.stencil_opBack;Va=M.stencil_opBack;ha=P.stencil_opFront;ea=M.stencil_opFront;sa=P.viewport;ua=M.viewport;Ea=new Float32Array(16);Ra=new Float32Array(16);Gb=new Float32Array(16);Z=new Float32Array(16);return{draw:function(a){var g,m,q,v;g=T.next;g!==T.cur&&
(g?X.bindFramebuffer(36160,g.framebuffer):X.bindFramebuffer(36160,null),T.cur=g);if(M.dirty){var w;g=P.dither;g!==M.dither&&(g?X.enable(3024):X.disable(3024),M.dither=g);g=P.blend_enable;g!==M.blend_enable&&(g?X.enable(3042):X.disable(3042),M.blend_enable=g);g=R[0];q=R[1];v=R[2];w=R[3];if(g!==qa[0]||q!==qa[1]||v!==qa[2]||w!==qa[3])X.blendColor(g,q,v,w),qa[0]=g,qa[1]=q,qa[2]=v,qa[3]=w;g=oa[0];q=oa[1];if(g!==K[0]||q!==K[1])X.blendEquationSeparate(g,q),K[0]=g,K[1]=q;g=L[0];q=L[1];v=L[2];w=L[3];if(g!==
da[0]||q!==da[1]||v!==da[2]||w!==da[3])X.blendFuncSeparate(g,q,v,w),da[0]=g,da[1]=q,da[2]=v,da[3]=w;g=P.depth_enable;g!==M.depth_enable&&(g?X.enable(2929):X.disable(2929),M.depth_enable=g);g=P.depth_func;g!==M.depth_func&&(X.depthFunc(g),M.depth_func=g);g=ia[0];q=ia[1];if(g!==ya[0]||q!==ya[1])X.depthRange(g,q),ya[0]=g,ya[1]=q;g=P.depth_mask;g!==M.depth_mask&&(X.depthMask(g),M.depth_mask=g);g=V[0];q=V[1];v=V[2];w=V[3];if(g!==na[0]||q!==na[1]||v!==na[2]||w!==na[3])X.colorMask(g,q,v,w),na[0]=g,na[1]=
q,na[2]=v,na[3]=w;g=P.cull_enable;g!==M.cull_enable&&(g?X.enable(2884):X.disable(2884),M.cull_enable=g);g=P.cull_face;g!==M.cull_face&&(X.cullFace(g),M.cull_face=g);g=P.frontFace;g!==M.frontFace&&(X.frontFace(g),M.frontFace=g);g=P.lineWidth;g!==M.lineWidth&&(X.lineWidth(g),M.lineWidth=g);g=P.polygonOffset_enable;g!==M.polygonOffset_enable&&(g?X.enable(32823):X.disable(32823),M.polygonOffset_enable=g);g=va[0];q=va[1];if(g!==ba[0]||q!==ba[1])X.polygonOffset(g,q),ba[0]=g,ba[1]=q;g=P.sample_alpha;g!==
M.sample_alpha&&(g?X.enable(32926):X.disable(32926),M.sample_alpha=g);g=P.sample_enable;g!==M.sample_enable&&(g?X.enable(32928):X.disable(32928),M.sample_enable=g);g=Ca[0];q=Ca[1];if(g!==ka[0]||q!==ka[1])X.sampleCoverage(g,q),ka[0]=g,ka[1]=q;g=P.stencil_enable;g!==M.stencil_enable&&(g?X.enable(2960):X.disable(2960),M.stencil_enable=g);g=P.stencil_mask;g!==M.stencil_mask&&(X.stencilMask(g),M.stencil_mask=g);g=Qa[0];q=Qa[1];v=Qa[2];if(g!==Ka[0]||q!==Ka[1]||v!==Ka[2])X.stencilFunc(g,q,v),Ka[0]=g,Ka[1]=
q,Ka[2]=v;g=ha[0];q=ha[1];v=ha[2];w=ha[3];if(g!==ea[0]||q!==ea[1]||v!==ea[2]||w!==ea[3])X.stencilOpSeparate(g,q,v,w),ea[0]=g,ea[1]=q,ea[2]=v,ea[3]=w;g=Hb[0];q=Hb[1];v=Hb[2];w=Hb[3];if(g!==Va[0]||q!==Va[1]||v!==Va[2]||w!==Va[3])X.stencilOpSeparate(g,q,v,w),Va[0]=g,Va[1]=q,Va[2]=v,Va[3]=w;g=P.scissor_enable;g!==M.scissor_enable&&(g?X.enable(3089):X.disable(3089),M.scissor_enable=g);g=pa[0];q=pa[1];v=pa[2];w=pa[3];if(g!==za[0]||q!==za[1]||v!==za[2]||w!==za[3])X.scissor(g,q,v,w),za[0]=g,za[1]=q,za[2]=
v,za[3]=w;g=sa[0];q=sa[1];v=sa[2];w=sa[3];if(g!==ua[0]||q!==ua[1]||v!==ua[2]||w!==ua[3])X.viewport(g,q,v,w),ua[0]=g,ua[1]=q,ua[2]=v,ua[3]=w;M.dirty=!1}if(g=M.profile)m=performance.now(),u.count++;X.useProgram(p.program);Q.setVAO(null);q=U.location;v=t[q];v.buffer||X.enableVertexAttribArray(q);if(5126!==v.type||4!==v.size||v.buffer!==n||!1!==v.normalized||0!==v.offset||44!==v.stride)X.bindBuffer(34962,n.buffer),X.vertexAttribPointer(q,4,5126,!1,44,0),v.type=5126,v.size=4,v.buffer=n,v.normalized=!1,
v.offset=0,v.stride=44;q=I.location;v=t[q];v.buffer||X.enableVertexAttribArray(q);if(5126!==v.type||4!==v.size||v.buffer!==b||!1!==v.normalized||16!==v.offset||44!==v.stride)X.bindBuffer(34962,b.buffer),X.vertexAttribPointer(q,4,5126,!1,44,16),v.type=5126,v.size=4,v.buffer=b,v.normalized=!1,v.offset=16,v.stride=44;q=A.location;v=t[q];v.buffer||X.enableVertexAttribArray(q);if(5126!==v.type||3!==v.size||v.buffer!==f||!1!==v.normalized||32!==v.offset||44!==v.stride)X.bindBuffer(34962,f.buffer),X.vertexAttribPointer(q,
3,5126,!1,44,32),v.type=5126,v.size=3,v.buffer=f,v.normalized=!1,v.offset=32,v.stride=44;q=c.call(this,ca,a,0);"number"!==typeof q&&d.commandRaise(k,h);X.uniform1f(D.location,q);q=y.call(this,ca,a,0);S(q)&&16===q.length||d.commandRaise(z,h);X.uniformMatrix4fv(ma.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(Ea[0]=q[0],Ea[1]=q[1],Ea[2]=q[2],Ea[3]=q[3],Ea[4]=q[4],Ea[5]=q[5],Ea[6]=q[6],Ea[7]=q[7],Ea[8]=q[8],Ea[9]=q[9],Ea[10]=q[10],Ea[11]=q[11],Ea[12]=q[12],Ea[13]=q[13],Ea[14]=q[14],Ea[15]=
q[15],Ea));a=e.call(this,ca,a,0);S(a)&&16===a.length||d.commandRaise(l,h);X.uniformMatrix4fv(G.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Ra[0]=a[0],Ra[1]=a[1],Ra[2]=a[2],Ra[3]=a[3],Ra[4]=a[4],Ra[5]=a[5],Ra[6]=a[6],Ra[7]=a[7],Ra[8]=a[8],Ra[9]=a[9],Ra[10]=a[10],Ra[11]=a[11],Ra[12]=a[12],Ra[13]=a[13],Ra[14]=a[14],Ra[15]=a[15],Ra));(a=fa.elements)?X.bindBuffer(34963,a.buffer.buffer):Q.currentVAO&&(a=Aa.getElements(Q.currentVAO.elements))&&X.bindBuffer(34963,a.buffer.buffer);q=fa.offset;
a?X.drawElements(0,1E4,a.type,q<<(a.type-5121>>1)):X.drawArrays(0,q,1E4);Q.setVAO(null);g&&(u.cpuTime+=performance.now()-m)},scope:function(c,a,e){var l,d,k,h,t,x,y,z,p,C,E,K,la,ha,r,ea,A,H,F,D,sa,Ka,I,L,G,V,Z,ba,Hb,Qa,P,Q,da,ua,R,ia,va,Da,S,J,T,ga,qa,ka,X;if(l=M.profile)d=performance.now(),u.count++;k=fa.count;fa.count=1E4;h=fa.primitive;fa.primitive=0;t=g.call(this,ca,c,e);x=O[5];O[5]=t;y=q.call(this,ca,c,e);t=O[3];O[3]=y;z=m.call(this,ca,c,e);y=O[4];O[4]=z;z=v.buffer;v.buffer=f;p=v.divisor;v.divisor=
0;C=v.normalized;v.normalized=!1;E=v.offset;v.offset=32;K=v.size;v.size=0;la=v.state;v.state=1;ha=v.stride;v.stride=44;r=v.type;v.type=5126;ea=v.w;v.w=0;A=v.x;v.x=0;H=v.y;v.y=0;F=v.z;v.z=0;D=w.buffer;w.buffer=n;sa=w.divisor;w.divisor=0;Ka=w.normalized;w.normalized=!1;I=w.offset;w.offset=0;L=w.size;w.size=0;G=w.state;w.state=1;V=w.stride;w.stride=44;Z=w.type;w.type=5126;ba=w.w;w.w=0;Hb=w.x;w.x=0;Qa=w.y;w.y=0;P=w.z;w.z=0;Q=B.buffer;B.buffer=b;da=B.divisor;B.divisor=0;ua=B.normalized;B.normalized=!1;
R=B.offset;B.offset=16;ia=B.size;B.size=0;va=B.state;B.state=1;Da=B.stride;B.stride=44;S=B.type;B.type=5126;J=B.w;B.w=0;T=B.x;B.x=0;ga=B.y;B.y=0;qa=B.z;B.z=0;ka=N.vert;N.vert=2;X=N.frag;N.frag=1;a(ca,c,e);l&&(u.cpuTime+=performance.now()-d);fa.count=k;fa.primitive=h;O[5]=x;O[3]=t;O[4]=y;v.buffer=z;v.divisor=p;v.normalized=C;v.offset=E;v.size=K;v.state=la;v.stride=ha;v.type=r;v.w=ea;v.x=A;v.y=H;v.z=F;w.buffer=D;w.divisor=sa;w.normalized=Ka;w.offset=I;w.size=L;w.state=G;w.stride=V;w.type=Z;w.w=ba;w.x=
Hb;w.y=Qa;w.z=P;B.buffer=Q;B.divisor=da;B.normalized=ua;B.offset=R;B.size=ia;B.state=va;B.stride=Da;B.type=S;B.w=J;B.x=T;B.y=ga;B.z=qa;N.vert=ka;N.frag=X},batch:function(c,a){var e,l,k;e=T.next;e!==T.cur&&(e?X.bindFramebuffer(36160,e.framebuffer):X.bindFramebuffer(36160,null),T.cur=e);if(M.dirty){var g,q,m;e=P.dither;e!==M.dither&&(e?X.enable(3024):X.disable(3024),M.dither=e);e=P.blend_enable;e!==M.blend_enable&&(e?X.enable(3042):X.disable(3042),M.blend_enable=e);e=R[0];g=R[1];q=R[2];m=R[3];if(e!==
qa[0]||g!==qa[1]||q!==qa[2]||m!==qa[3])X.blendColor(e,g,q,m),qa[0]=e,qa[1]=g,qa[2]=q,qa[3]=m;e=oa[0];g=oa[1];if(e!==K[0]||g!==K[1])X.blendEquationSeparate(e,g),K[0]=e,K[1]=g;e=L[0];g=L[1];q=L[2];m=L[3];if(e!==da[0]||g!==da[1]||q!==da[2]||m!==da[3])X.blendFuncSeparate(e,g,q,m),da[0]=e,da[1]=g,da[2]=q,da[3]=m;e=P.depth_enable;e!==M.depth_enable&&(e?X.enable(2929):X.disable(2929),M.depth_enable=e);e=P.depth_func;e!==M.depth_func&&(X.depthFunc(e),M.depth_func=e);e=ia[0];g=ia[1];if(e!==ya[0]||g!==ya[1])X.depthRange(e,
g),ya[0]=e,ya[1]=g;e=P.depth_mask;e!==M.depth_mask&&(X.depthMask(e),M.depth_mask=e);e=V[0];g=V[1];q=V[2];m=V[3];if(e!==na[0]||g!==na[1]||q!==na[2]||m!==na[3])X.colorMask(e,g,q,m),na[0]=e,na[1]=g,na[2]=q,na[3]=m;e=P.cull_enable;e!==M.cull_enable&&(e?X.enable(2884):X.disable(2884),M.cull_enable=e);e=P.cull_face;e!==M.cull_face&&(X.cullFace(e),M.cull_face=e);e=P.frontFace;e!==M.frontFace&&(X.frontFace(e),M.frontFace=e);e=P.lineWidth;e!==M.lineWidth&&(X.lineWidth(e),M.lineWidth=e);e=P.polygonOffset_enable;
e!==M.polygonOffset_enable&&(e?X.enable(32823):X.disable(32823),M.polygonOffset_enable=e);e=va[0];g=va[1];if(e!==ba[0]||g!==ba[1])X.polygonOffset(e,g),ba[0]=e,ba[1]=g;e=P.sample_alpha;e!==M.sample_alpha&&(e?X.enable(32926):X.disable(32926),M.sample_alpha=e);e=P.sample_enable;e!==M.sample_enable&&(e?X.enable(32928):X.disable(32928),M.sample_enable=e);e=Ca[0];g=Ca[1];if(e!==ka[0]||g!==ka[1])X.sampleCoverage(e,g),ka[0]=e,ka[1]=g;e=P.stencil_enable;e!==M.stencil_enable&&(e?X.enable(2960):X.disable(2960),
M.stencil_enable=e);e=P.stencil_mask;e!==M.stencil_mask&&(X.stencilMask(e),M.stencil_mask=e);e=Qa[0];g=Qa[1];q=Qa[2];if(e!==Ka[0]||g!==Ka[1]||q!==Ka[2])X.stencilFunc(e,g,q),Ka[0]=e,Ka[1]=g,Ka[2]=q;e=ha[0];g=ha[1];q=ha[2];m=ha[3];if(e!==ea[0]||g!==ea[1]||q!==ea[2]||m!==ea[3])X.stencilOpSeparate(e,g,q,m),ea[0]=e,ea[1]=g,ea[2]=q,ea[3]=m;e=Hb[0];g=Hb[1];q=Hb[2];m=Hb[3];if(e!==Va[0]||g!==Va[1]||q!==Va[2]||m!==Va[3])X.stencilOpSeparate(e,g,q,m),Va[0]=e,Va[1]=g,Va[2]=q,Va[3]=m;e=P.scissor_enable;e!==M.scissor_enable&&
(e?X.enable(3089):X.disable(3089),M.scissor_enable=e);e=pa[0];g=pa[1];q=pa[2];m=pa[3];if(e!==za[0]||g!==za[1]||q!==za[2]||m!==za[3])X.scissor(e,g,q,m),za[0]=e,za[1]=g,za[2]=q,za[3]=m;e=sa[0];g=sa[1];q=sa[2];m=sa[3];if(e!==ua[0]||g!==ua[1]||q!==ua[2]||m!==ua[3])X.viewport(e,g,q,m),ua[0]=e,ua[1]=g,ua[2]=q,ua[3]=m;M.dirty=!1}if(e=M.profile)l=performance.now(),u.count+=a;X.useProgram(la.program);Q.setVAO(null);g=U.location;q=t[g];q.buffer||X.enableVertexAttribArray(g);if(5126!==q.type||4!==q.size||q.buffer!==
n||!1!==q.normalized||0!==q.offset||44!==q.stride)X.bindBuffer(34962,n.buffer),X.vertexAttribPointer(g,4,5126,!1,44,0),q.type=5126,q.size=4,q.buffer=n,q.normalized=!1,q.offset=0,q.stride=44;g=I.location;q=t[g];q.buffer||X.enableVertexAttribArray(g);if(5126!==q.type||4!==q.size||q.buffer!==b||!1!==q.normalized||16!==q.offset||44!==q.stride)X.bindBuffer(34962,b.buffer),X.vertexAttribPointer(g,4,5126,!1,44,16),q.type=5126,q.size=4,q.buffer=b,q.normalized=!1,q.offset=16,q.stride=44;g=A.location;q=t[g];
q.buffer||X.enableVertexAttribArray(g);if(5126!==q.type||3!==q.size||q.buffer!==f||!1!==q.normalized||32!==q.offset||44!==q.stride)X.bindBuffer(34962,f.buffer),X.vertexAttribPointer(g,3,5126,!1,44,32),q.type=5126,q.size=3,q.buffer=f,q.normalized=!1,q.offset=32,q.stride=44;g=x.call(this,ca,void 0,k);"number"!==typeof g&&d.commandRaise(E,h);X.uniform1f(D.location,g);g=r.call(this,ca,void 0,k);S(g)&&16===g.length||d.commandRaise(H,h);X.uniformMatrix4fv(ma.location,!1,Array.isArray(g)||g instanceof Float32Array?
g:(Gb[0]=g[0],Gb[1]=g[1],Gb[2]=g[2],Gb[3]=g[3],Gb[4]=g[4],Gb[5]=g[5],Gb[6]=g[6],Gb[7]=g[7],Gb[8]=g[8],Gb[9]=g[9],Gb[10]=g[10],Gb[11]=g[11],Gb[12]=g[12],Gb[13]=g[13],Gb[14]=g[14],Gb[15]=g[15],Gb));k=J.call(this,ca,void 0,k);S(k)&&16===k.length||d.commandRaise(F,h);X.uniformMatrix4fv(G.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Z[0]=k[0],Z[1]=k[1],Z[2]=k[2],Z[3]=k[3],Z[4]=k[4],Z[5]=k[5],Z[6]=k[6],Z[7]=k[7],Z[8]=k[8],Z[9]=k[9],Z[10]=k[10],Z[11]=k[11],Z[12]=k[12],Z[13]=k[13],Z[14]=k[14],
Z[15]=k[15],Z));(g=fa.elements)?X.bindBuffer(34963,g.buffer.buffer):Q.currentVAO&&(g=Aa.getElements(Q.currentVAO.elements))&&X.bindBuffer(34963,g.buffer.buffer);q=fa.offset;for(k=0;k<a;++k)g?X.drawElements(0,1E4,g.type,q<<(g.type-5121>>1)):X.drawArrays(0,q,1E4);Q.setVAO(null);e&&(u.cpuTime+=performance.now()-l)}}},"$34,atlas,normal,position,projection,uv,view":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,la,x,E,r,H,J,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S){var P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,
ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb,Z,W,wa,Ia,ra,xa,Ba,ja,Y,ta,Fa,Ha;P=a.attributes;N=a.buffer;O=a.context;Q=a.current;R=a.draw;qa=a.elements;oa=a.framebuffer;K=a.gl;L=a.isArrayLike;da=a.isBufferArgs;V=a.next;na=a.shader;ia=a.uniforms;ya=a.vao;va=V.blend_color;ba=Q.blend_color;Ca=V.blend_equation;ka=Q.blend_equation;pa=V.blend_func;za=Q.blend_func;Qa=V.colorMask;Ka=Q.colorMask;Hb=V.depth_range;Va=Q.depth_range;ha=V.polygonOffset_offset;ea=Q.polygonOffset_offset;sa=V.sample_coverage;ua=
Q.sample_coverage;Ea=V.scissor_box;Ra=Q.scissor_box;Gb=V.stencil_func;Z=Q.stencil_func;W=V.stencil_opBack;wa=Q.stencil_opBack;Ia=V.stencil_opFront;ra=Q.stencil_opFront;xa=V.viewport;Ba=Q.viewport;ja={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);ta=new Float32Array(16);Fa=new Float32Array(16);Ha=new Float32Array(16);return{draw:function(a){var q,m,v,w,t,B,x,E,r,la,A,H,F,D,I,G,R,ia,J,ga,Da,U,ca,na,ma,Fa,Ha,Ed,pd,bd,td,Oc,rd,Gc,
gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb,bb,kb;q=O.view;m=p.call(this,O,a,0);O.view=m;v=oa.next;v!==oa.cur&&(v?K.bindFramebuffer(36160,v.framebuffer):K.bindFramebuffer(36160,null),oa.cur=v);if(Q.dirty){var Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb;Xa=V.dither;Xa!==Q.dither&&(Xa?K.enable(3024):K.disable(3024),Q.dither=Xa);Jc=V.blend_enable;Jc!==Q.blend_enable&&
(Jc?K.enable(3042):K.disable(3042),Q.blend_enable=Jc);Nb=va[0];Ib=va[1];sc=va[2];Ob=va[3];if(Nb!==ba[0]||Ib!==ba[1]||sc!==ba[2]||Ob!==ba[3])K.blendColor(Nb,Ib,sc,Ob),ba[0]=Nb,ba[1]=Ib,ba[2]=sc,ba[3]=Ob;lb=Ca[0];Fb=Ca[1];if(lb!==ka[0]||Fb!==ka[1])K.blendEquationSeparate(lb,Fb),ka[0]=lb,ka[1]=Fb;Cb=pa[0];yb=pa[1];ib=pa[2];$b=pa[3];if(Cb!==za[0]||yb!==za[1]||ib!==za[2]||$b!==za[3])K.blendFuncSeparate(Cb,yb,ib,$b),za[0]=Cb,za[1]=yb,za[2]=ib,za[3]=$b;Pb=V.depth_enable;Pb!==Q.depth_enable&&(Pb?K.enable(2929):
K.disable(2929),Q.depth_enable=Pb);rb=V.depth_func;rb!==Q.depth_func&&(K.depthFunc(rb),Q.depth_func=rb);Ta=Hb[0];Ub=Hb[1];if(Ta!==Va[0]||Ub!==Va[1])K.depthRange(Ta,Ub),Va[0]=Ta,Va[1]=Ub;sb=V.depth_mask;sb!==Q.depth_mask&&(K.depthMask(sb),Q.depth_mask=sb);jc=Qa[0];jb=Qa[1];qb=Qa[2];Ja=Qa[3];if(jc!==Ka[0]||jb!==Ka[1]||qb!==Ka[2]||Ja!==Ka[3])K.colorMask(jc,jb,qb,Ja),Ka[0]=jc,Ka[1]=jb,Ka[2]=qb,Ka[3]=Ja;tb=V.frontFace;tb!==Q.frontFace&&(K.frontFace(tb),Q.frontFace=tb);La=V.lineWidth;La!==Q.lineWidth&&
(K.lineWidth(La),Q.lineWidth=La);eb=V.polygonOffset_enable;eb!==Q.polygonOffset_enable&&(eb?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=eb);gb=ha[0];Na=ha[1];if(gb!==ea[0]||Na!==ea[1])K.polygonOffset(gb,Na),ea[0]=gb,ea[1]=Na;mb=V.sample_alpha;mb!==Q.sample_alpha&&(mb?K.enable(32926):K.disable(32926),Q.sample_alpha=mb);Ya=V.sample_enable;Ya!==Q.sample_enable&&(Ya?K.enable(32928):K.disable(32928),Q.sample_enable=Ya);vb=sa[0];ub=sa[1];if(vb!==ua[0]||ub!==ua[1])K.sampleCoverage(vb,ub),ua[0]=
vb,ua[1]=ub;Pa=V.stencil_enable;Pa!==Q.stencil_enable&&(Pa?K.enable(2960):K.disable(2960),Q.stencil_enable=Pa);Dc=V.stencil_mask;Dc!==Q.stencil_mask&&(K.stencilMask(Dc),Q.stencil_mask=Dc);Wa=Gb[0];Jb=Gb[1];Db=Gb[2];if(Wa!==Z[0]||Jb!==Z[1]||Db!==Z[2])K.stencilFunc(Wa,Jb,Db),Z[0]=Wa,Z[1]=Jb,Z[2]=Db;Ma=Ia[0];zd=Ia[1];$a=Ia[2];Kb=Ia[3];if(Ma!==ra[0]||zd!==ra[1]||$a!==ra[2]||Kb!==ra[3])K.stencilOpSeparate(Ma,zd,$a,Kb),ra[0]=Ma,ra[1]=zd,ra[2]=$a,ra[3]=Kb;Lb=W[0];ob=W[1];Oa=W[2];ac=W[3];if(Lb!==wa[0]||ob!==
wa[1]||Oa!==wa[2]||ac!==wa[3])K.stencilOpSeparate(Lb,ob,Oa,ac),wa[0]=Lb,wa[1]=ob,wa[2]=Oa,wa[3]=ac;Sa=V.scissor_enable;Sa!==Q.scissor_enable&&(Sa?K.enable(3089):K.disable(3089),Q.scissor_enable=Sa);wb=Ea[0];xb=Ea[1];Ua=Ea[2];pb=Ea[3];if(wb!==Ra[0]||xb!==Ra[1]||Ua!==Ra[2]||pb!==Ra[3])K.scissor(wb,xb,Ua,pb),Ra[0]=wb,Ra[1]=xb,Ra[2]=Ua,Ra[3]=pb;gc=xa[0];Bc=xa[1];wc=xa[2];cb=xa[3];if(gc!==Ba[0]||Bc!==Ba[1]||wc!==Ba[2]||cb!==Ba[3])K.viewport(gc,Bc,wc,cb),Ba[0]=gc,Ba[1]=Bc,Ba[2]=wc,Ba[3]=cb}K.enable(2884);
Q.cull_enable=!0;K.cullFace(1029);Q.cull_face=1029;if(w=Q.profile)t=performance.now(),u.count++;K.useProgram(n.program);ya.setVAO(null);(B=a.position)&&("object"===typeof B||"function"===typeof B)&&(da(B)||N.getBuffer(B)||N.getBuffer(B.buffer)||da(B.buffer)||"constant"in B&&("number"===typeof B.constant||L(B.constant)))||d.commandRaise(b,h);x=!1;E=null;r=!1;A=la=0;H=1;F=0;D=5126;ia=R=G=I=0;da(B)?(x=!0,E=N.createStream(34962,B),D=E.dtype):(E=N.getBuffer(B))?D=E.dtype:"constant"in B?(H=2,"number"===
typeof B.constant?(G=B.constant,R=ia=I=0):(G=0<B.constant.length?B.constant[0]:0,R=1<B.constant.length?B.constant[1]:0,ia=2<B.constant.length?B.constant[2]:0,I=3<B.constant.length?B.constant[3]:0)):(E=da(B.buffer)?N.createStream(34962,B.buffer):N.getBuffer(B.buffer),D="type"in B?ja[B.type]:E.dtype,r=!!B.normalized,A=B.size|0,la=B.offset|0,F=B.stride|0);J=Aa.location;ga=P[J];if(1===H){if(ga.buffer||K.enableVertexAttribArray(J),Da=A||3,ga.type!==D||ga.size!==Da||ga.buffer!==E||ga.normalized!==r||ga.offset!==
la||ga.stride!==F)K.bindBuffer(34962,E.buffer),K.vertexAttribPointer(J,Da,D,r,F,la),ga.type=D,ga.size=Da,ga.buffer=E,ga.normalized=r,ga.offset=la,ga.stride=F}else if(ga.buffer&&(K.disableVertexAttribArray(J),ga.buffer=null),ga.x!==G||ga.y!==R||ga.z!==ia||ga.w!==I)K.vertexAttrib4f(J,G,R,ia,I),ga.x=G,ga.y=R,ga.z=ia,ga.w=I;(U=a.normal)&&("object"===typeof U||"function"===typeof U)&&(da(U)||N.getBuffer(U)||N.getBuffer(U.buffer)||da(U.buffer)||"constant"in U&&("number"===typeof U.constant||L(U.constant)))||
d.commandRaise(f,h);ca=!1;na=null;ma=!1;Ha=Fa=0;Ed=1;pd=0;bd=5126;Gc=rd=Oc=td=0;da(U)?(ca=!0,na=N.createStream(34962,U),bd=na.dtype):(na=N.getBuffer(U))?bd=na.dtype:"constant"in U?(Ed=2,"number"===typeof U.constant?(Oc=U.constant,rd=Gc=td=0):(Oc=0<U.constant.length?U.constant[0]:0,rd=1<U.constant.length?U.constant[1]:0,Gc=2<U.constant.length?U.constant[2]:0,td=3<U.constant.length?U.constant[3]:0)):(na=da(U.buffer)?N.createStream(34962,U.buffer):N.getBuffer(U.buffer),bd="type"in U?ja[U.type]:na.dtype,
ma=!!U.normalized,Ha=U.size|0,Fa=U.offset|0,pd=U.stride|0);gd=fa.location;Rc=P[gd];if(1===Ed){if(Rc.buffer||K.enableVertexAttribArray(gd),md=Ha||3,Rc.type!==bd||Rc.size!==md||Rc.buffer!==na||Rc.normalized!==ma||Rc.offset!==Fa||Rc.stride!==pd)K.bindBuffer(34962,na.buffer),K.vertexAttribPointer(gd,md,bd,ma,pd,Fa),Rc.type=bd,Rc.size=md,Rc.buffer=na,Rc.normalized=ma,Rc.offset=Fa,Rc.stride=pd}else if(Rc.buffer&&(K.disableVertexAttribArray(gd),Rc.buffer=null),Rc.x!==Oc||Rc.y!==rd||Rc.z!==Gc||Rc.w!==td)K.vertexAttrib4f(gd,
Oc,rd,Gc,td),Rc.x=Oc,Rc.y=rd,Rc.z=Gc,Rc.w=td;(Vb=a.uv)&&("object"===typeof Vb||"function"===typeof Vb)&&(da(Vb)||N.getBuffer(Vb)||N.getBuffer(Vb.buffer)||da(Vb.buffer)||"constant"in Vb&&("number"===typeof Vb.constant||L(Vb.constant)))||d.commandRaise(c,h);Eb=!1;vc=null;zb=!1;Bb=yc=0;Lc=1;mc=0;Hc=5126;fc=Ec=cd=hd=0;da(Vb)?(Eb=!0,vc=N.createStream(34962,Vb),Hc=vc.dtype):(vc=N.getBuffer(Vb))?Hc=vc.dtype:"constant"in Vb?(Lc=2,"number"===typeof Vb.constant?(cd=Vb.constant,Ec=fc=hd=0):(cd=0<Vb.constant.length?
Vb.constant[0]:0,Ec=1<Vb.constant.length?Vb.constant[1]:0,fc=2<Vb.constant.length?Vb.constant[2]:0,hd=3<Vb.constant.length?Vb.constant[3]:0)):(vc=da(Vb.buffer)?N.createStream(34962,Vb.buffer):N.getBuffer(Vb.buffer),Hc="type"in Vb?ja[Vb.type]:vc.dtype,zb=!!Vb.normalized,Bb=Vb.size|0,yc=Vb.offset|0,mc=Vb.stride|0);Ic=X.location;pc=P[Ic];if(1===Lc){if(pc.buffer||K.enableVertexAttribArray(Ic),rc=Bb||2,pc.type!==Hc||pc.size!==rc||pc.buffer!==vc||pc.normalized!==zb||pc.offset!==yc||pc.stride!==mc)K.bindBuffer(34962,
vc.buffer),K.vertexAttribPointer(Ic,rc,Hc,zb,mc,yc),pc.type=Hc,pc.size=rc,pc.buffer=vc,pc.normalized=zb,pc.offset=yc,pc.stride=mc}else if(pc.buffer&&(K.disableVertexAttribArray(Ic),pc.buffer=null),pc.x!==cd||pc.y!==Ec||pc.z!==fc||pc.w!==hd)K.vertexAttrib4f(Ic,cd,Ec,fc,hd),pc.x=cd,pc.y=Ec,pc.z=fc,pc.w=hd;nc=k.call(this,O,a,0);L(nc)&&16===nc.length||d.commandRaise(y,h);K.uniformMatrix4fv(T.location,!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(Y[0]=nc[0],Y[1]=nc[1],Y[2]=nc[2],Y[3]=nc[3],Y[4]=
nc[4],Y[5]=nc[5],Y[6]=nc[6],Y[7]=nc[7],Y[8]=nc[8],Y[9]=nc[9],Y[10]=nc[10],Y[11]=nc[11],Y[12]=nc[12],Y[13]=nc[13],Y[14]=nc[14],Y[15]=nc[15],Y));qc=O.view;L(qc)&&16===qc.length||d.commandRaise(z,h);K.uniformMatrix4fv(S.location,!1,Array.isArray(qc)||qc instanceof Float32Array?qc:(ta[0]=qc[0],ta[1]=qc[1],ta[2]=qc[2],ta[3]=qc[3],ta[4]=qc[4],ta[5]=qc[5],ta[6]=qc[6],ta[7]=qc[7],ta[8]=qc[8],ta[9]=qc[9],ta[10]=qc[10],ta[11]=qc[11],ta[12]=qc[12],ta[13]=qc[13],ta[14]=qc[14],ta[15]=qc[15],ta));(nb=a.atlas)&&
"framebuffer"===nb._reglType&&(nb=nb.color[0]);"function"===typeof nb&&"texture2d"===nb._reglType||d.commandRaise(e,h);Wc=nb._texture;K.uniform1i(M.location,Wc.bind());Zb=a.elements;hb=null;(Mb=da(Zb))?hb=qa.createStream(Zb):(hb=qa.getElements(Zb),Zb&&!hb&&d.commandRaise(l,h));hb&&K.bindBuffer(34963,hb.buffer.buffer);bb=hb?hb.primType:4;kb=hb?hb.vertCount:-1;0<=kb||d.commandRaise(g,h);kb&&(hb?K.drawElements(bb,kb,hb.type,0<<(hb.type-5121>>1)):K.drawArrays(bb,0,kb),Q.dirty=!0,ya.setVAO(null),O.view=
q,w&&(u.cpuTime+=performance.now()-t),x&&N.destroyStream(E),ca&&N.destroyStream(na),Eb&&N.destroyStream(vc),Wc.unbind(),Mb&&qa.destroyStream(hb))},scope:function(c,a,e){var b,l,f,g,k,n,t,y,z,p,K,ha,ea,A,H,F,D,W,sa,Ka,I,G,Z,ba,Hb,M,Qa,P,wa,Ia,ua,ra,va,Y,J,ga,S,T,U,ka,X,ca,Va,xa,pa,za,Ca,fa,Ba,ya,Ea,ma,oa,Gb,ta,Ra,Aa,Fa,Ha,kb,Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob;b=O.view;l=q.call(this,O,c,e);O.view=l;f=V.cull_enable;
V.cull_enable=!0;g=V.cull_face;V.cull_face=1029;if(k=Q.profile)n=performance.now(),u.count++;t=c.elements;y=null;(z=da(t))?y=qa.createStream(t):(y=qa.getElements(t),t&&!y&&d.commandRaise(m,h));p=R.elements;R.elements=y;K=R.offset;R.offset=0;ha=y?y.vertCount:-1;ea=R.count;R.count=ha;A=y?y.primType:4;H=R.primitive;R.primitive=A;F=c.atlas;D=ia[5];ia[5]=F;W=v.call(this,O,c,e);sa=ia[3];ia[3]=W;Ka=O.view;I=ia[4];ia[4]=Ka;(G=c.normal)&&("object"===typeof G||"function"===typeof G)&&(da(G)||N.getBuffer(G)||
N.getBuffer(G.buffer)||da(G.buffer)||"constant"in G&&("number"===typeof G.constant||L(G.constant)))||d.commandRaise(w,h);Z=!1;ba=null;Hb=0;M=!1;P=Qa=0;wa=1;Ia=0;ua=5126;J=Y=va=ra=0;da(G)?(Z=!0,ba=N.createStream(34962,G),ua=ba.dtype):(ba=N.getBuffer(G))?ua=ba.dtype:"constant"in G?(wa=2,"number"===typeof G.constant?(va=G.constant,Y=J=ra=0):(va=0<G.constant.length?G.constant[0]:0,Y=1<G.constant.length?G.constant[1]:0,J=2<G.constant.length?G.constant[2]:0,ra=3<G.constant.length?G.constant[3]:0)):(ba=
da(G.buffer)?N.createStream(34962,G.buffer):N.getBuffer(G.buffer),ua="type"in G?ja[G.type]:ba.dtype,M=!!G.normalized,P=G.size|0,Qa=G.offset|0,Ia=G.stride|0,Hb=G.divisor|0);ga=B.buffer;B.buffer=ba;S=B.divisor;B.divisor=Hb;T=B.normalized;B.normalized=M;U=B.offset;B.offset=Qa;ka=B.size;B.size=P;X=B.state;B.state=wa;ca=B.stride;B.stride=Ia;Va=B.type;B.type=ua;xa=B.w;B.w=ra;pa=B.x;B.x=va;za=B.y;B.y=Y;Ca=B.z;B.z=J;(fa=c.position)&&("object"===typeof fa||"function"===typeof fa)&&(da(fa)||N.getBuffer(fa)||
N.getBuffer(fa.buffer)||da(fa.buffer)||"constant"in fa&&("number"===typeof fa.constant||L(fa.constant)))||d.commandRaise(la,h);Ba=!1;ya=null;Ea=0;ma=!1;Gb=oa=0;ta=1;Ra=0;Aa=5126;Xa=kb=Ha=Fa=0;da(fa)?(Ba=!0,ya=N.createStream(34962,fa),Aa=ya.dtype):(ya=N.getBuffer(fa))?Aa=ya.dtype:"constant"in fa?(ta=2,"number"===typeof fa.constant?(Ha=fa.constant,kb=Xa=Fa=0):(Ha=0<fa.constant.length?fa.constant[0]:0,kb=1<fa.constant.length?fa.constant[1]:0,Xa=2<fa.constant.length?fa.constant[2]:0,Fa=3<fa.constant.length?
fa.constant[3]:0)):(ya=da(fa.buffer)?N.createStream(34962,fa.buffer):N.getBuffer(fa.buffer),Aa="type"in fa?ja[fa.type]:ya.dtype,ma=!!fa.normalized,Gb=fa.size|0,oa=fa.offset|0,Ra=fa.stride|0,Ea=fa.divisor|0);Jc=x.buffer;x.buffer=ya;Nb=x.divisor;x.divisor=Ea;Ib=x.normalized;x.normalized=ma;sc=x.offset;x.offset=oa;Ob=x.size;x.size=Gb;lb=x.state;x.state=ta;Fb=x.stride;x.stride=Ra;Cb=x.type;x.type=Aa;yb=x.w;x.w=Fa;ib=x.x;x.x=Ha;$b=x.y;x.y=kb;Pb=x.z;x.z=Xa;(rb=c.uv)&&("object"===typeof rb||"function"===
typeof rb)&&(da(rb)||N.getBuffer(rb)||N.getBuffer(rb.buffer)||da(rb.buffer)||"constant"in rb&&("number"===typeof rb.constant||L(rb.constant)))||d.commandRaise(E,h);Ta=!1;Ub=null;sb=0;jc=!1;qb=jb=0;Ja=1;tb=0;La=5126;mb=Na=gb=eb=0;da(rb)?(Ta=!0,Ub=N.createStream(34962,rb),La=Ub.dtype):(Ub=N.getBuffer(rb))?La=Ub.dtype:"constant"in rb?(Ja=2,"number"===typeof rb.constant?(gb=rb.constant,Na=mb=eb=0):(gb=0<rb.constant.length?rb.constant[0]:0,Na=1<rb.constant.length?rb.constant[1]:0,mb=2<rb.constant.length?
rb.constant[2]:0,eb=3<rb.constant.length?rb.constant[3]:0)):(Ub=da(rb.buffer)?N.createStream(34962,rb.buffer):N.getBuffer(rb.buffer),La="type"in rb?ja[rb.type]:Ub.dtype,jc=!!rb.normalized,qb=rb.size|0,jb=rb.offset|0,tb=rb.stride|0,sb=rb.divisor|0);Ya=r.buffer;r.buffer=Ub;vb=r.divisor;r.divisor=sb;ub=r.normalized;r.normalized=jc;Pa=r.offset;r.offset=jb;Dc=r.size;r.size=qb;Wa=r.state;r.state=Ja;Jb=r.stride;r.stride=tb;Db=r.type;r.type=La;Ma=r.w;r.w=eb;zd=r.x;r.x=gb;$a=r.y;r.y=Na;Kb=r.z;r.z=mb;Lb=na.vert;
na.vert=2;ob=na.frag;na.frag=1;Q.dirty=!0;a(O,c,e);O.view=b;V.cull_enable=f;V.cull_face=g;k&&(u.cpuTime+=performance.now()-n);z&&qa.destroyStream(y);R.elements=p;R.offset=K;R.count=ea;R.primitive=H;ia[5]=D;ia[3]=sa;ia[4]=I;Z&&N.destroyStream(ba);B.buffer=ga;B.divisor=S;B.normalized=T;B.offset=U;B.size=ka;B.state=X;B.stride=ca;B.type=Va;B.w=xa;B.x=pa;B.y=za;B.z=Ca;Ba&&N.destroyStream(ya);x.buffer=Jc;x.divisor=Nb;x.normalized=Ib;x.offset=sc;x.size=Ob;x.state=lb;x.stride=Fb;x.type=Cb;x.w=yb;x.x=ib;x.y=
$b;x.z=Pb;Ta&&N.destroyStream(Ub);r.buffer=Ya;r.divisor=vb;r.normalized=ub;r.offset=Pa;r.size=Dc;r.state=Wa;r.stride=Jb;r.type=Db;r.w=Ma;r.x=zd;r.y=$a;r.z=Kb;na.vert=Lb;na.frag=ob;Q.dirty=!0},batch:function(c,a){var e,b,l,f,g,k,q;e=O.view;b=H.call(this,O,c,0);O.view=b;l=oa.next;l!==oa.cur&&(l?K.bindFramebuffer(36160,l.framebuffer):K.bindFramebuffer(36160,null),oa.cur=l);if(Q.dirty){var m,v,n,w,B,y,z,x,p,E,r,la,R,ia,Y,Da,na,ta,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Rc,md,Vb,Eb,vc,zb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,
Ic,pc,rc,nc,qc,nb,Wc,Zb,hb,Mb;m=V.dither;m!==Q.dither&&(m?K.enable(3024):K.disable(3024),Q.dither=m);v=V.blend_enable;v!==Q.blend_enable&&(v?K.enable(3042):K.disable(3042),Q.blend_enable=v);n=va[0];w=va[1];B=va[2];y=va[3];if(n!==ba[0]||w!==ba[1]||B!==ba[2]||y!==ba[3])K.blendColor(n,w,B,y),ba[0]=n,ba[1]=w,ba[2]=B,ba[3]=y;z=Ca[0];x=Ca[1];if(z!==ka[0]||x!==ka[1])K.blendEquationSeparate(z,x),ka[0]=z,ka[1]=x;p=pa[0];E=pa[1];r=pa[2];la=pa[3];if(p!==za[0]||E!==za[1]||r!==za[2]||la!==za[3])K.blendFuncSeparate(p,
E,r,la),za[0]=p,za[1]=E,za[2]=r,za[3]=la;R=V.depth_enable;R!==Q.depth_enable&&(R?K.enable(2929):K.disable(2929),Q.depth_enable=R);ia=V.depth_func;ia!==Q.depth_func&&(K.depthFunc(ia),Q.depth_func=ia);Y=Hb[0];Da=Hb[1];if(Y!==Va[0]||Da!==Va[1])K.depthRange(Y,Da),Va[0]=Y,Va[1]=Da;na=V.depth_mask;na!==Q.depth_mask&&(K.depthMask(na),Q.depth_mask=na);ta=Qa[0];Md=Qa[1];Ed=Qa[2];pd=Qa[3];if(ta!==Ka[0]||Md!==Ka[1]||Ed!==Ka[2]||pd!==Ka[3])K.colorMask(ta,Md,Ed,pd),Ka[0]=ta,Ka[1]=Md,Ka[2]=Ed,Ka[3]=pd;bd=V.frontFace;
bd!==Q.frontFace&&(K.frontFace(bd),Q.frontFace=bd);td=V.lineWidth;td!==Q.lineWidth&&(K.lineWidth(td),Q.lineWidth=td);Oc=V.polygonOffset_enable;Oc!==Q.polygonOffset_enable&&(Oc?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=Oc);rd=ha[0];Gc=ha[1];if(rd!==ea[0]||Gc!==ea[1])K.polygonOffset(rd,Gc),ea[0]=rd,ea[1]=Gc;gd=V.sample_alpha;gd!==Q.sample_alpha&&(gd?K.enable(32926):K.disable(32926),Q.sample_alpha=gd);Rc=V.sample_enable;Rc!==Q.sample_enable&&(Rc?K.enable(32928):K.disable(32928),Q.sample_enable=
Rc);md=sa[0];Vb=sa[1];if(md!==ua[0]||Vb!==ua[1])K.sampleCoverage(md,Vb),ua[0]=md,ua[1]=Vb;Eb=V.stencil_enable;Eb!==Q.stencil_enable&&(Eb?K.enable(2960):K.disable(2960),Q.stencil_enable=Eb);vc=V.stencil_mask;vc!==Q.stencil_mask&&(K.stencilMask(vc),Q.stencil_mask=vc);zb=Gb[0];yc=Gb[1];Bb=Gb[2];if(zb!==Z[0]||yc!==Z[1]||Bb!==Z[2])K.stencilFunc(zb,yc,Bb),Z[0]=zb,Z[1]=yc,Z[2]=Bb;Lc=Ia[0];mc=Ia[1];Hc=Ia[2];hd=Ia[3];if(Lc!==ra[0]||mc!==ra[1]||Hc!==ra[2]||hd!==ra[3])K.stencilOpSeparate(Lc,mc,Hc,hd),ra[0]=
Lc,ra[1]=mc,ra[2]=Hc,ra[3]=hd;cd=W[0];Ec=W[1];fc=W[2];Ic=W[3];if(cd!==wa[0]||Ec!==wa[1]||fc!==wa[2]||Ic!==wa[3])K.stencilOpSeparate(cd,Ec,fc,Ic),wa[0]=cd,wa[1]=Ec,wa[2]=fc,wa[3]=Ic;pc=V.scissor_enable;pc!==Q.scissor_enable&&(pc?K.enable(3089):K.disable(3089),Q.scissor_enable=pc);rc=Ea[0];nc=Ea[1];qc=Ea[2];nb=Ea[3];if(rc!==Ra[0]||nc!==Ra[1]||qc!==Ra[2]||nb!==Ra[3])K.scissor(rc,nc,qc,nb),Ra[0]=rc,Ra[1]=nc,Ra[2]=qc,Ra[3]=nb;Wc=xa[0];Zb=xa[1];hb=xa[2];Mb=xa[3];if(Wc!==Ba[0]||Zb!==Ba[1]||hb!==Ba[2]||Mb!==
Ba[3])K.viewport(Wc,Zb,hb,Mb),Ba[0]=Wc,Ba[1]=Zb,Ba[2]=hb,Ba[3]=Mb}K.enable(2884);Q.cull_enable=!0;K.cullFace(1029);Q.cull_face=1029;if(f=Q.profile)g=performance.now(),u.count+=a;K.useProgram(J.program);var bb,kb;ya.setVAO(null);bb=I.call(this,O,q,k);L(bb)&&16===bb.length||d.commandRaise(G,h);K.uniformMatrix4fv(T.location,!1,Array.isArray(bb)||bb instanceof Float32Array?bb:(Fa[0]=bb[0],Fa[1]=bb[1],Fa[2]=bb[2],Fa[3]=bb[3],Fa[4]=bb[4],Fa[5]=bb[5],Fa[6]=bb[6],Fa[7]=bb[7],Fa[8]=bb[8],Fa[9]=bb[9],Fa[10]=
bb[10],Fa[11]=bb[11],Fa[12]=bb[12],Fa[13]=bb[13],Fa[14]=bb[14],Fa[15]=bb[15],Fa));kb=O.view;L(kb)&&16===kb.length||d.commandRaise(D,h);K.uniformMatrix4fv(S.location,!1,Array.isArray(kb)||kb instanceof Float32Array?kb:(Ha[0]=kb[0],Ha[1]=kb[1],Ha[2]=kb[2],Ha[3]=kb[3],Ha[4]=kb[4],Ha[5]=kb[5],Ha[6]=kb[6],Ha[7]=kb[7],Ha[8]=kb[8],Ha[9]=kb[9],Ha[10]=kb[10],Ha[11]=kb[11],Ha[12]=kb[12],Ha[13]=kb[13],Ha[14]=kb[14],Ha[15]=kb[15],Ha));for(k=0;k<a;++k){q=c[k];var Xa,Jc,Nb,Ib,sc,Ob,lb,Fb,Cb,yb,ib,$b,Pb,rb,Ta,Ub,
sb,jc,jb,qb,Ja,tb,La,eb,gb,Na,mb,Ya,vb,ub,Pa,Dc,Wa,Jb,Db,Ma,zd,$a,Kb,Lb,ob,Oa,ac,Sa,wb,xb,Ua,pb,gc,Bc,wc,cb,kc,Mc,Za;(Xa=q.position)&&("object"===typeof Xa||"function"===typeof Xa)&&(da(Xa)||N.getBuffer(Xa)||N.getBuffer(Xa.buffer)||da(Xa.buffer)||"constant"in Xa&&("number"===typeof Xa.constant||L(Xa.constant)))||d.commandRaise(F,h);Jc=!1;Nb=null;Ib=!1;Ob=sc=0;lb=1;Fb=0;Cb=5126;Pb=$b=ib=yb=0;da(Xa)?(Jc=!0,Nb=N.createStream(34962,Xa),Cb=Nb.dtype):(Nb=N.getBuffer(Xa))?Cb=Nb.dtype:"constant"in Xa?(lb=
2,"number"===typeof Xa.constant?(ib=Xa.constant,$b=Pb=yb=0):(ib=0<Xa.constant.length?Xa.constant[0]:0,$b=1<Xa.constant.length?Xa.constant[1]:0,Pb=2<Xa.constant.length?Xa.constant[2]:0,yb=3<Xa.constant.length?Xa.constant[3]:0)):(Nb=da(Xa.buffer)?N.createStream(34962,Xa.buffer):N.getBuffer(Xa.buffer),Cb="type"in Xa?ja[Xa.type]:Nb.dtype,Ib=!!Xa.normalized,Ob=Xa.size|0,sc=Xa.offset|0,Fb=Xa.stride|0);rb=Aa.location;Ta=P[rb];if(1===lb){if(Ta.buffer||K.enableVertexAttribArray(rb),Ub=Ob||3,Ta.type!==Cb||
Ta.size!==Ub||Ta.buffer!==Nb||Ta.normalized!==Ib||Ta.offset!==sc||Ta.stride!==Fb)K.bindBuffer(34962,Nb.buffer),K.vertexAttribPointer(rb,Ub,Cb,Ib,Fb,sc),Ta.type=Cb,Ta.size=Ub,Ta.buffer=Nb,Ta.normalized=Ib,Ta.offset=sc,Ta.stride=Fb}else if(Ta.buffer&&(K.disableVertexAttribArray(rb),Ta.buffer=null),Ta.x!==ib||Ta.y!==$b||Ta.z!==Pb||Ta.w!==yb)K.vertexAttrib4f(rb,ib,$b,Pb,yb),Ta.x=ib,Ta.y=$b,Ta.z=Pb,Ta.w=yb;(sb=q.normal)&&("object"===typeof sb||"function"===typeof sb)&&(da(sb)||N.getBuffer(sb)||N.getBuffer(sb.buffer)||
da(sb.buffer)||"constant"in sb&&("number"===typeof sb.constant||L(sb.constant)))||d.commandRaise(A,h);jc=!1;jb=null;qb=!1;tb=Ja=0;La=1;eb=0;gb=5126;vb=Ya=mb=Na=0;da(sb)?(jc=!0,jb=N.createStream(34962,sb),gb=jb.dtype):(jb=N.getBuffer(sb))?gb=jb.dtype:"constant"in sb?(La=2,"number"===typeof sb.constant?(mb=sb.constant,Ya=vb=Na=0):(mb=0<sb.constant.length?sb.constant[0]:0,Ya=1<sb.constant.length?sb.constant[1]:0,vb=2<sb.constant.length?sb.constant[2]:0,Na=3<sb.constant.length?sb.constant[3]:0)):(jb=
da(sb.buffer)?N.createStream(34962,sb.buffer):N.getBuffer(sb.buffer),gb="type"in sb?ja[sb.type]:jb.dtype,qb=!!sb.normalized,tb=sb.size|0,Ja=sb.offset|0,eb=sb.stride|0);ub=fa.location;Pa=P[ub];if(1===La){if(Pa.buffer||K.enableVertexAttribArray(ub),Dc=tb||3,Pa.type!==gb||Pa.size!==Dc||Pa.buffer!==jb||Pa.normalized!==qb||Pa.offset!==Ja||Pa.stride!==eb)K.bindBuffer(34962,jb.buffer),K.vertexAttribPointer(ub,Dc,gb,qb,eb,Ja),Pa.type=gb,Pa.size=Dc,Pa.buffer=jb,Pa.normalized=qb,Pa.offset=Ja,Pa.stride=eb}else if(Pa.buffer&&
(K.disableVertexAttribArray(ub),Pa.buffer=null),Pa.x!==mb||Pa.y!==Ya||Pa.z!==vb||Pa.w!==Na)K.vertexAttrib4f(ub,mb,Ya,vb,Na),Pa.x=mb,Pa.y=Ya,Pa.z=vb,Pa.w=Na;(Wa=q.uv)&&("object"===typeof Wa||"function"===typeof Wa)&&(da(Wa)||N.getBuffer(Wa)||N.getBuffer(Wa.buffer)||da(Wa.buffer)||"constant"in Wa&&("number"===typeof Wa.constant||L(Wa.constant)))||d.commandRaise(U,h);Jb=!1;Db=null;Ma=!1;$a=zd=0;Kb=1;Lb=0;ob=5126;wb=Sa=ac=Oa=0;da(Wa)?(Jb=!0,Db=N.createStream(34962,Wa),ob=Db.dtype):(Db=N.getBuffer(Wa))?
ob=Db.dtype:"constant"in Wa?(Kb=2,"number"===typeof Wa.constant?(ac=Wa.constant,Sa=wb=Oa=0):(ac=0<Wa.constant.length?Wa.constant[0]:0,Sa=1<Wa.constant.length?Wa.constant[1]:0,wb=2<Wa.constant.length?Wa.constant[2]:0,Oa=3<Wa.constant.length?Wa.constant[3]:0)):(Db=da(Wa.buffer)?N.createStream(34962,Wa.buffer):N.getBuffer(Wa.buffer),ob="type"in Wa?ja[Wa.type]:Db.dtype,Ma=!!Wa.normalized,$a=Wa.size|0,zd=Wa.offset|0,Lb=Wa.stride|0);xb=X.location;Ua=P[xb];if(1===Kb){if(Ua.buffer||K.enableVertexAttribArray(xb),
pb=$a||2,Ua.type!==ob||Ua.size!==pb||Ua.buffer!==Db||Ua.normalized!==Ma||Ua.offset!==zd||Ua.stride!==Lb)K.bindBuffer(34962,Db.buffer),K.vertexAttribPointer(xb,pb,ob,Ma,Lb,zd),Ua.type=ob,Ua.size=pb,Ua.buffer=Db,Ua.normalized=Ma,Ua.offset=zd,Ua.stride=Lb}else if(Ua.buffer&&(K.disableVertexAttribArray(xb),Ua.buffer=null),Ua.x!==ac||Ua.y!==Sa||Ua.z!==wb||Ua.w!==Oa)K.vertexAttrib4f(xb,ac,Sa,wb,Oa),Ua.x=ac,Ua.y=Sa,Ua.z=wb,Ua.w=Oa;(gc=q.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===
typeof gc&&"texture2d"===gc._reglType||d.commandRaise(ma,h);Bc=gc._texture;K.uniform1i(M.location,Bc.bind());wc=q.elements;cb=null;(kc=da(wc))?cb=qa.createStream(wc):(cb=qa.getElements(wc),wc&&!cb&&d.commandRaise(t,h));cb&&K.bindBuffer(34963,cb.buffer.buffer);Mc=cb?cb.primType:4;Za=cb?cb.vertCount:-1;0<=Za||d.commandRaise(ca,h);Za&&(cb?K.drawElements(Mc,Za,cb.type,0<<(cb.type-5121>>1)):K.drawArrays(Mc,0,Za),Jc&&N.destroyStream(Nb),jc&&N.destroyStream(jb),Jb&&N.destroyStream(Db),Bc.unbind(),kc&&qa.destroyStream(cb))}Q.dirty=
!0;ya.setVAO(null);O.view=e;f&&(u.cpuTime+=performance.now()-g)}}},"$7,color,position":function(a,d,h,u,p,n,b,f,c,k){var y,z,e,l,g,q,m,v,w,B,r,x,E,J,H,ga,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R;y=a.attributes;z=a.context;e=a.current;l=a.draw;g=a.elements;q=a.framebuffer;m=a.gl;v=a.next;w=a.shader;B=a.uniforms;r=a.vao;x=v.blend_color;E=e.blend_color;J=v.blend_equation;H=e.blend_equation;ga=v.blend_func;F=e.blend_func;A=v.colorMask;U=e.colorMask;I=v.depth_range;G=e.depth_range;D=v.polygonOffset_offset;
ma=e.polygonOffset_offset;t=v.sample_coverage;ca=e.sample_coverage;M=v.scissor_box;fa=e.scissor_box;Aa=v.stencil_func;T=e.stencil_func;X=v.stencil_opBack;S=e.stencil_opBack;P=v.stencil_opFront;N=e.stencil_opFront;O=v.viewport;Q=e.viewport;R=[1,0,0,1];return{draw:function(a){var b,d,f,w;a=q.next;a!==q.cur&&(a?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null),q.cur=a);if(e.dirty){a=v.dither;a!==e.dither&&(a?m.enable(3024):m.disable(3024),e.dither=a);a=v.blend_enable;a!==e.blend_enable&&
(a?m.enable(3042):m.disable(3042),e.blend_enable=a);a=x[0];d=x[1];f=x[2];w=x[3];if(a!==E[0]||d!==E[1]||f!==E[2]||w!==E[3])m.blendColor(a,d,f,w),E[0]=a,E[1]=d,E[2]=f,E[3]=w;a=J[0];d=J[1];if(a!==H[0]||d!==H[1])m.blendEquationSeparate(a,d),H[0]=a,H[1]=d;a=ga[0];d=ga[1];f=ga[2];w=ga[3];if(a!==F[0]||d!==F[1]||f!==F[2]||w!==F[3])m.blendFuncSeparate(a,d,f,w),F[0]=a,F[1]=d,F[2]=f,F[3]=w;a=v.depth_enable;a!==e.depth_enable&&(a?m.enable(2929):m.disable(2929),e.depth_enable=a);a=v.depth_func;a!==e.depth_func&&
(m.depthFunc(a),e.depth_func=a);a=I[0];d=I[1];if(a!==G[0]||d!==G[1])m.depthRange(a,d),G[0]=a,G[1]=d;a=v.depth_mask;a!==e.depth_mask&&(m.depthMask(a),e.depth_mask=a);a=A[0];d=A[1];f=A[2];w=A[3];if(a!==U[0]||d!==U[1]||f!==U[2]||w!==U[3])m.colorMask(a,d,f,w),U[0]=a,U[1]=d,U[2]=f,U[3]=w;a=v.cull_enable;a!==e.cull_enable&&(a?m.enable(2884):m.disable(2884),e.cull_enable=a);a=v.cull_face;a!==e.cull_face&&(m.cullFace(a),e.cull_face=a);a=v.frontFace;a!==e.frontFace&&(m.frontFace(a),e.frontFace=a);a=v.lineWidth;
a!==e.lineWidth&&(m.lineWidth(a),e.lineWidth=a);a=v.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?m.enable(32823):m.disable(32823),e.polygonOffset_enable=a);a=D[0];d=D[1];if(a!==ma[0]||d!==ma[1])m.polygonOffset(a,d),ma[0]=a,ma[1]=d;a=v.sample_alpha;a!==e.sample_alpha&&(a?m.enable(32926):m.disable(32926),e.sample_alpha=a);a=v.sample_enable;a!==e.sample_enable&&(a?m.enable(32928):m.disable(32928),e.sample_enable=a);a=t[0];d=t[1];if(a!==ca[0]||d!==ca[1])m.sampleCoverage(a,d),ca[0]=a,ca[1]=d;a=
v.stencil_enable;a!==e.stencil_enable&&(a?m.enable(2960):m.disable(2960),e.stencil_enable=a);a=v.stencil_mask;a!==e.stencil_mask&&(m.stencilMask(a),e.stencil_mask=a);a=Aa[0];d=Aa[1];f=Aa[2];if(a!==T[0]||d!==T[1]||f!==T[2])m.stencilFunc(a,d,f),T[0]=a,T[1]=d,T[2]=f;a=P[0];d=P[1];f=P[2];w=P[3];if(a!==N[0]||d!==N[1]||f!==N[2]||w!==N[3])m.stencilOpSeparate(a,d,f,w),N[0]=a,N[1]=d,N[2]=f,N[3]=w;a=X[0];d=X[1];f=X[2];w=X[3];if(a!==S[0]||d!==S[1]||f!==S[2]||w!==S[3])m.stencilOpSeparate(a,d,f,w),S[0]=a,S[1]=
d,S[2]=f,S[3]=w;a=v.scissor_enable;a!==e.scissor_enable&&(a?m.enable(3089):m.disable(3089),e.scissor_enable=a);a=M[0];d=M[1];f=M[2];w=M[3];if(a!==fa[0]||d!==fa[1]||f!==fa[2]||w!==fa[3])m.scissor(a,d,f,w),fa[0]=a,fa[1]=d,fa[2]=f,fa[3]=w;a=O[0];d=O[1];f=O[2];w=O[3];if(a!==Q[0]||d!==Q[1]||f!==Q[2]||w!==Q[3])m.viewport(a,d,f,w),Q[0]=a,Q[1]=d,Q[2]=f,Q[3]=w;e.dirty=!1}if(a=e.profile)b=performance.now(),u.count++;m.useProgram(p.program);r.setVAO(null);d=k.location;f=y[d];f.buffer||m.enableVertexAttribArray(d);
if(f.type!==n.dtype||2!==f.size||f.buffer!==n||!1!==f.normalized||0!==f.offset||0!==f.stride)m.bindBuffer(34962,n.buffer),m.vertexAttribPointer(d,2,n.dtype,!1,0,0),f.type=n.dtype,f.size=2,f.buffer=n,f.normalized=!1,f.offset=0,f.stride=0;m.uniform4f(c.location,1,0,0,1);(d=l.elements)?m.bindBuffer(34963,d.buffer.buffer):r.currentVAO&&(d=g.getElements(r.currentVAO.elements))&&m.bindBuffer(34963,d.buffer.buffer);f=l.primitive;w=l.offset;d?m.drawElements(f,3,d.type,w<<(d.type-5121>>1)):m.drawArrays(f,
w,3);r.setVAO(null);a&&(u.cpuTime+=performance.now()-b)},scope:function(c,a,d){var f,g,k,q,m,v,h,t,y,x,p,C,E,r,la,A,ha,ea;if(f=e.profile)g=performance.now(),u.count++;k=l.count;l.count=3;q=B[3];B[3]=R;m=b.buffer;b.buffer=n;v=b.divisor;b.divisor=0;h=b.normalized;b.normalized=!1;t=b.offset;b.offset=0;y=b.size;b.size=0;x=b.state;b.state=1;p=b.stride;b.stride=0;C=b.type;b.type=n.dtype;E=b.w;b.w=0;r=b.x;b.x=0;la=b.y;b.y=0;A=b.z;b.z=0;ha=w.vert;w.vert=2;ea=w.frag;w.frag=1;a(z,c,d);f&&(u.cpuTime+=performance.now()-
g);l.count=k;B[3]=q;b.buffer=m;b.divisor=v;b.normalized=h;b.offset=t;b.size=y;b.state=x;b.stride=p;b.type=C;b.w=E;b.x=r;b.y=la;b.z=A;w.vert=ha;w.frag=ea},batch:function(a,b){var d,w,h;d=q.next;d!==q.cur&&(d?m.bindFramebuffer(36160,d.framebuffer):m.bindFramebuffer(36160,null),q.cur=d);if(e.dirty){var B,z;d=v.dither;d!==e.dither&&(d?m.enable(3024):m.disable(3024),e.dither=d);d=v.blend_enable;d!==e.blend_enable&&(d?m.enable(3042):m.disable(3042),e.blend_enable=d);d=x[0];h=x[1];B=x[2];z=x[3];if(d!==E[0]||
h!==E[1]||B!==E[2]||z!==E[3])m.blendColor(d,h,B,z),E[0]=d,E[1]=h,E[2]=B,E[3]=z;d=J[0];h=J[1];if(d!==H[0]||h!==H[1])m.blendEquationSeparate(d,h),H[0]=d,H[1]=h;d=ga[0];h=ga[1];B=ga[2];z=ga[3];if(d!==F[0]||h!==F[1]||B!==F[2]||z!==F[3])m.blendFuncSeparate(d,h,B,z),F[0]=d,F[1]=h,F[2]=B,F[3]=z;d=v.depth_enable;d!==e.depth_enable&&(d?m.enable(2929):m.disable(2929),e.depth_enable=d);d=v.depth_func;d!==e.depth_func&&(m.depthFunc(d),e.depth_func=d);d=I[0];h=I[1];if(d!==G[0]||h!==G[1])m.depthRange(d,h),G[0]=
d,G[1]=h;d=v.depth_mask;d!==e.depth_mask&&(m.depthMask(d),e.depth_mask=d);d=A[0];h=A[1];B=A[2];z=A[3];if(d!==U[0]||h!==U[1]||B!==U[2]||z!==U[3])m.colorMask(d,h,B,z),U[0]=d,U[1]=h,U[2]=B,U[3]=z;d=v.cull_enable;d!==e.cull_enable&&(d?m.enable(2884):m.disable(2884),e.cull_enable=d);d=v.cull_face;d!==e.cull_face&&(m.cullFace(d),e.cull_face=d);d=v.frontFace;d!==e.frontFace&&(m.frontFace(d),e.frontFace=d);d=v.lineWidth;d!==e.lineWidth&&(m.lineWidth(d),e.lineWidth=d);d=v.polygonOffset_enable;d!==e.polygonOffset_enable&&
(d?m.enable(32823):m.disable(32823),e.polygonOffset_enable=d);d=D[0];h=D[1];if(d!==ma[0]||h!==ma[1])m.polygonOffset(d,h),ma[0]=d,ma[1]=h;d=v.sample_alpha;d!==e.sample_alpha&&(d?m.enable(32926):m.disable(32926),e.sample_alpha=d);d=v.sample_enable;d!==e.sample_enable&&(d?m.enable(32928):m.disable(32928),e.sample_enable=d);d=t[0];h=t[1];if(d!==ca[0]||h!==ca[1])m.sampleCoverage(d,h),ca[0]=d,ca[1]=h;d=v.stencil_enable;d!==e.stencil_enable&&(d?m.enable(2960):m.disable(2960),e.stencil_enable=d);d=v.stencil_mask;
d!==e.stencil_mask&&(m.stencilMask(d),e.stencil_mask=d);d=Aa[0];h=Aa[1];B=Aa[2];if(d!==T[0]||h!==T[1]||B!==T[2])m.stencilFunc(d,h,B),T[0]=d,T[1]=h,T[2]=B;d=P[0];h=P[1];B=P[2];z=P[3];if(d!==N[0]||h!==N[1]||B!==N[2]||z!==N[3])m.stencilOpSeparate(d,h,B,z),N[0]=d,N[1]=h,N[2]=B,N[3]=z;d=X[0];h=X[1];B=X[2];z=X[3];if(d!==S[0]||h!==S[1]||B!==S[2]||z!==S[3])m.stencilOpSeparate(d,h,B,z),S[0]=d,S[1]=h,S[2]=B,S[3]=z;d=v.scissor_enable;d!==e.scissor_enable&&(d?m.enable(3089):m.disable(3089),e.scissor_enable=d);
d=M[0];h=M[1];B=M[2];z=M[3];if(d!==fa[0]||h!==fa[1]||B!==fa[2]||z!==fa[3])m.scissor(d,h,B,z),fa[0]=d,fa[1]=h,fa[2]=B,fa[3]=z;d=O[0];h=O[1];B=O[2];z=O[3];if(d!==Q[0]||h!==Q[1]||B!==Q[2]||z!==Q[3])m.viewport(d,h,B,z),Q[0]=d,Q[1]=h,Q[2]=B,Q[3]=z;e.dirty=!1}if(d=e.profile)w=performance.now(),u.count+=b;m.useProgram(f.program);var p;r.setVAO(null);h=k.location;B=y[h];B.buffer||m.enableVertexAttribArray(h);if(B.type!==n.dtype||2!==B.size||B.buffer!==n||!1!==B.normalized||0!==B.offset||0!==B.stride)m.bindBuffer(34962,
n.buffer),m.vertexAttribPointer(h,2,n.dtype,!1,0,0),B.type=n.dtype,B.size=2,B.buffer=n,B.normalized=!1,B.offset=0,B.stride=0;m.uniform4f(c.location,1,0,0,1);(B=l.elements)?m.bindBuffer(34963,B.buffer.buffer):r.currentVAO&&(B=g.getElements(r.currentVAO.elements))&&m.bindBuffer(34963,B.buffer.buffer);z=l.primitive;p=l.offset;for(h=0;h<b;++h)B?m.drawElements(z,3,B.type,p<<(B.type-5121>>1)):m.drawArrays(z,p,3);r.setVAO(null);d&&(u.cpuTime+=performance.now()-w)}}},"$19,angle,color,offset,position":function(a,
d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,r,x,E,J){var H,ga,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa;H=a.attributes;ga=a.context;F=a.current;A=a.draw;U=a.elements;I=a.framebuffer;G=a.gl;D=a.isArrayLike;ma=a.next;t=a.shader;ca=a.uniforms;M=a.vao;fa=ma.blend_color;Aa=F.blend_color;T=ma.blend_equation;X=F.blend_equation;S=ma.blend_func;P=F.blend_func;N=ma.colorMask;O=F.colorMask;Q=ma.depth_range;R=F.depth_range;qa=ma.polygonOffset_offset;oa=F.polygonOffset_offset;
K=ma.sample_coverage;L=F.sample_coverage;da=ma.scissor_box;V=F.scissor_box;na=ma.stencil_func;ia=F.stencil_func;ya=ma.stencil_opBack;va=F.stencil_opBack;ba=ma.stencil_opFront;Ca=F.stencil_opFront;ka=ma.viewport;pa=F.viewport;return{draw:function(a){var e,l,g,q;e=I.next;e!==I.cur&&(e?G.bindFramebuffer(36160,e.framebuffer):G.bindFramebuffer(36160,null),I.cur=e);if(F.dirty){var m;e=ma.dither;e!==F.dither&&(e?G.enable(3024):G.disable(3024),F.dither=e);e=ma.blend_enable;e!==F.blend_enable&&(e?G.enable(3042):
G.disable(3042),F.blend_enable=e);e=fa[0];g=fa[1];q=fa[2];m=fa[3];if(e!==Aa[0]||g!==Aa[1]||q!==Aa[2]||m!==Aa[3])G.blendColor(e,g,q,m),Aa[0]=e,Aa[1]=g,Aa[2]=q,Aa[3]=m;e=T[0];g=T[1];if(e!==X[0]||g!==X[1])G.blendEquationSeparate(e,g),X[0]=e,X[1]=g;e=S[0];g=S[1];q=S[2];m=S[3];if(e!==P[0]||g!==P[1]||q!==P[2]||m!==P[3])G.blendFuncSeparate(e,g,q,m),P[0]=e,P[1]=g,P[2]=q,P[3]=m;e=ma.depth_func;e!==F.depth_func&&(G.depthFunc(e),F.depth_func=e);e=Q[0];g=Q[1];if(e!==R[0]||g!==R[1])G.depthRange(e,g),R[0]=e,R[1]=
g;e=ma.depth_mask;e!==F.depth_mask&&(G.depthMask(e),F.depth_mask=e);e=N[0];g=N[1];q=N[2];m=N[3];if(e!==O[0]||g!==O[1]||q!==O[2]||m!==O[3])G.colorMask(e,g,q,m),O[0]=e,O[1]=g,O[2]=q,O[3]=m;e=ma.cull_enable;e!==F.cull_enable&&(e?G.enable(2884):G.disable(2884),F.cull_enable=e);e=ma.cull_face;e!==F.cull_face&&(G.cullFace(e),F.cull_face=e);e=ma.frontFace;e!==F.frontFace&&(G.frontFace(e),F.frontFace=e);e=ma.lineWidth;e!==F.lineWidth&&(G.lineWidth(e),F.lineWidth=e);e=ma.polygonOffset_enable;e!==F.polygonOffset_enable&&
(e?G.enable(32823):G.disable(32823),F.polygonOffset_enable=e);e=qa[0];g=qa[1];if(e!==oa[0]||g!==oa[1])G.polygonOffset(e,g),oa[0]=e,oa[1]=g;e=ma.sample_alpha;e!==F.sample_alpha&&(e?G.enable(32926):G.disable(32926),F.sample_alpha=e);e=ma.sample_enable;e!==F.sample_enable&&(e?G.enable(32928):G.disable(32928),F.sample_enable=e);e=K[0];g=K[1];if(e!==L[0]||g!==L[1])G.sampleCoverage(e,g),L[0]=e,L[1]=g;e=ma.stencil_enable;e!==F.stencil_enable&&(e?G.enable(2960):G.disable(2960),F.stencil_enable=e);e=ma.stencil_mask;
e!==F.stencil_mask&&(G.stencilMask(e),F.stencil_mask=e);e=na[0];g=na[1];q=na[2];if(e!==ia[0]||g!==ia[1]||q!==ia[2])G.stencilFunc(e,g,q),ia[0]=e,ia[1]=g,ia[2]=q;e=ba[0];g=ba[1];q=ba[2];m=ba[3];if(e!==Ca[0]||g!==Ca[1]||q!==Ca[2]||m!==Ca[3])G.stencilOpSeparate(e,g,q,m),Ca[0]=e,Ca[1]=g,Ca[2]=q,Ca[3]=m;e=ya[0];g=ya[1];q=ya[2];m=ya[3];if(e!==va[0]||g!==va[1]||q!==va[2]||m!==va[3])G.stencilOpSeparate(e,g,q,m),va[0]=e,va[1]=g,va[2]=q,va[3]=m;e=ma.scissor_enable;e!==F.scissor_enable&&(e?G.enable(3089):G.disable(3089),
F.scissor_enable=e);e=da[0];g=da[1];q=da[2];m=da[3];if(e!==V[0]||g!==V[1]||q!==V[2]||m!==V[3])G.scissor(e,g,q,m),V[0]=e,V[1]=g,V[2]=q,V[3]=m;e=ka[0];g=ka[1];q=ka[2];m=ka[3];if(e!==pa[0]||g!==pa[1]||q!==pa[2]||m!==pa[3])G.viewport(e,g,q,m),pa[0]=e,pa[1]=g,pa[2]=q,pa[3]=m}G.disable(2929);F.depth_enable=!1;if(e=F.profile)l=performance.now(),u.count++;G.useProgram(p.program);M.setVAO(null);g=J.location;q=H[g];q.buffer||G.enableVertexAttribArray(g);if(q.type!==n.dtype||2!==q.size||q.buffer!==n||!1!==q.normalized||
0!==q.offset||0!==q.stride)G.bindBuffer(34962,n.buffer),G.vertexAttribPointer(g,2,n.dtype,!1,0,0),q.type=n.dtype,q.size=2,q.buffer=n,q.normalized=!1,q.offset=0,q.stride=0;g=b.call(this,ga,a,0);"number"!==typeof g&&d.commandRaise(f,h);G.uniform1f(r.location,g);g=a.offset;D(g)&&2===g.length||d.commandRaise(c,h);G.uniform2f(E.location,g[0],g[1]);a=k.call(this,ga,a,0);D(a)&&4===a.length||d.commandRaise(y,h);G.uniform4f(x.location,a[0],a[1],a[2],a[3]);(a=A.elements)?G.bindBuffer(34963,a.buffer.buffer):
M.currentVAO&&(a=U.getElements(M.currentVAO.elements))&&G.bindBuffer(34963,a.buffer.buffer);g=A.primitive;q=A.offset;a?G.drawElements(g,3,a.type,q<<(a.type-5121>>1)):G.drawArrays(g,q,3);F.dirty=!0;M.setVAO(null);e&&(u.cpuTime+=performance.now()-l)},scope:function(c,a,b){var d,g,f,k,q,m,v,w,h,B,y,x,p,C,E,r,la,H,D,G,I;d=ma.depth_enable;ma.depth_enable=!1;if(g=F.profile)f=performance.now(),u.count++;k=A.count;A.count=3;q=z.call(this,ga,c,b);m=ca[3];ca[3]=q;v=e.call(this,ga,c,b);q=ca[5];ca[5]=v;w=c.offset;
v=ca[4];ca[4]=w;w=l.buffer;l.buffer=n;h=l.divisor;l.divisor=0;B=l.normalized;l.normalized=!1;y=l.offset;l.offset=0;x=l.size;l.size=0;p=l.state;l.state=1;C=l.stride;l.stride=0;E=l.type;l.type=n.dtype;r=l.w;l.w=0;la=l.x;l.x=0;H=l.y;l.y=0;D=l.z;l.z=0;G=t.vert;t.vert=2;I=t.frag;t.frag=1;F.dirty=!0;a(ga,c,b);ma.depth_enable=d;g&&(u.cpuTime+=performance.now()-f);A.count=k;ca[3]=m;ca[5]=q;ca[4]=v;l.buffer=w;l.divisor=h;l.normalized=B;l.offset=y;l.size=x;l.state=p;l.stride=C;l.type=E;l.w=r;l.x=la;l.y=H;l.z=
D;t.vert=G;t.frag=I;F.dirty=!0},batch:function(c,a){var e,b,l,f;e=I.next;e!==I.cur&&(e?G.bindFramebuffer(36160,e.framebuffer):G.bindFramebuffer(36160,null),I.cur=e);if(F.dirty){var k,t,z;e=ma.dither;e!==F.dither&&(e?G.enable(3024):G.disable(3024),F.dither=e);e=ma.blend_enable;e!==F.blend_enable&&(e?G.enable(3042):G.disable(3042),F.blend_enable=e);e=fa[0];k=fa[1];t=fa[2];z=fa[3];if(e!==Aa[0]||k!==Aa[1]||t!==Aa[2]||z!==Aa[3])G.blendColor(e,k,t,z),Aa[0]=e,Aa[1]=k,Aa[2]=t,Aa[3]=z;e=T[0];k=T[1];if(e!==
X[0]||k!==X[1])G.blendEquationSeparate(e,k),X[0]=e,X[1]=k;e=S[0];k=S[1];t=S[2];z=S[3];if(e!==P[0]||k!==P[1]||t!==P[2]||z!==P[3])G.blendFuncSeparate(e,k,t,z),P[0]=e,P[1]=k,P[2]=t,P[3]=z;e=ma.depth_func;e!==F.depth_func&&(G.depthFunc(e),F.depth_func=e);e=Q[0];k=Q[1];if(e!==R[0]||k!==R[1])G.depthRange(e,k),R[0]=e,R[1]=k;e=ma.depth_mask;e!==F.depth_mask&&(G.depthMask(e),F.depth_mask=e);e=N[0];k=N[1];t=N[2];z=N[3];if(e!==O[0]||k!==O[1]||t!==O[2]||z!==O[3])G.colorMask(e,k,t,z),O[0]=e,O[1]=k,O[2]=t,O[3]=
z;e=ma.cull_enable;e!==F.cull_enable&&(e?G.enable(2884):G.disable(2884),F.cull_enable=e);e=ma.cull_face;e!==F.cull_face&&(G.cullFace(e),F.cull_face=e);e=ma.frontFace;e!==F.frontFace&&(G.frontFace(e),F.frontFace=e);e=ma.lineWidth;e!==F.lineWidth&&(G.lineWidth(e),F.lineWidth=e);e=ma.polygonOffset_enable;e!==F.polygonOffset_enable&&(e?G.enable(32823):G.disable(32823),F.polygonOffset_enable=e);e=qa[0];k=qa[1];if(e!==oa[0]||k!==oa[1])G.polygonOffset(e,k),oa[0]=e,oa[1]=k;e=ma.sample_alpha;e!==F.sample_alpha&&
(e?G.enable(32926):G.disable(32926),F.sample_alpha=e);e=ma.sample_enable;e!==F.sample_enable&&(e?G.enable(32928):G.disable(32928),F.sample_enable=e);e=K[0];k=K[1];if(e!==L[0]||k!==L[1])G.sampleCoverage(e,k),L[0]=e,L[1]=k;e=ma.stencil_enable;e!==F.stencil_enable&&(e?G.enable(2960):G.disable(2960),F.stencil_enable=e);e=ma.stencil_mask;e!==F.stencil_mask&&(G.stencilMask(e),F.stencil_mask=e);e=na[0];k=na[1];t=na[2];if(e!==ia[0]||k!==ia[1]||t!==ia[2])G.stencilFunc(e,k,t),ia[0]=e,ia[1]=k,ia[2]=t;e=ba[0];
k=ba[1];t=ba[2];z=ba[3];if(e!==Ca[0]||k!==Ca[1]||t!==Ca[2]||z!==Ca[3])G.stencilOpSeparate(e,k,t,z),Ca[0]=e,Ca[1]=k,Ca[2]=t,Ca[3]=z;e=ya[0];k=ya[1];t=ya[2];z=ya[3];if(e!==va[0]||k!==va[1]||t!==va[2]||z!==va[3])G.stencilOpSeparate(e,k,t,z),va[0]=e,va[1]=k,va[2]=t,va[3]=z;e=ma.scissor_enable;e!==F.scissor_enable&&(e?G.enable(3089):G.disable(3089),F.scissor_enable=e);e=da[0];k=da[1];t=da[2];z=da[3];if(e!==V[0]||k!==V[1]||t!==V[2]||z!==V[3])G.scissor(e,k,t,z),V[0]=e,V[1]=k,V[2]=t,V[3]=z;e=ka[0];k=ka[1];
t=ka[2];z=ka[3];if(e!==pa[0]||k!==pa[1]||t!==pa[2]||z!==pa[3])G.viewport(e,k,t,z),pa[0]=e,pa[1]=k,pa[2]=t,pa[3]=z}G.disable(2929);F.depth_enable=!1;if(e=F.profile)b=performance.now(),u.count+=a;G.useProgram(g.program);M.setVAO(null);k=J.location;t=H[k];t.buffer||G.enableVertexAttribArray(k);if(t.type!==n.dtype||2!==t.size||t.buffer!==n||!1!==t.normalized||0!==t.offset||0!==t.stride)G.bindBuffer(34962,n.buffer),G.vertexAttribPointer(k,2,n.dtype,!1,0,0),t.type=n.dtype,t.size=2,t.buffer=n,t.normalized=
!1,t.offset=0,t.stride=0;l=q.call(this,ga,f,l);"number"!==typeof l&&d.commandRaise(m,h);G.uniform1f(r.location,l);(k=A.elements)?G.bindBuffer(34963,k.buffer.buffer):M.currentVAO&&(k=U.getElements(M.currentVAO.elements))&&G.bindBuffer(34963,k.buffer.buffer);t=A.primitive;z=A.offset;for(l=0;l<a;++l){f=c[l];var y,p,ca,Z,W,wa,Ia,ra,xa;y=f.offset;D(y)&&2===y.length||d.commandRaise(v,h);p=y[0];y=y[1];l&&ca===p&&Z===y||(ca=p,Z=y,G.uniform2f(E.location,p,y));W=w.call(this,ga,f,l);D(W)&&4===W.length||d.commandRaise(B,
h);f=W[0];p=W[1];y=W[2];W=W[3];l&&wa===f&&Ia===p&&ra===y&&xa===W||(wa=f,Ia=p,ra=y,xa=W,G.uniform4f(x.location,f,p,y,W));k?G.drawElements(t,3,k.type,z<<(k.type-5121>>1)):G.drawArrays(t,z,3)}F.dirty=!0;M.setVAO(null);e&&(u.cpuTime+=performance.now()-b)}}},"$23,model,position,projection,view":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,r,x,E,J,H,ga,F,A){var U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,Hb,Va,ha,ea,sa,ua,Ea;U=a.attributes;I=a.context;G=a.current;
D=a.draw;ma=a.framebuffer;t=a.gl;ca=a.isArrayLike;M=a.next;fa=a.shader;Aa=a.uniforms;T=a.vao;X=M.blend_color;S=G.blend_color;P=M.blend_equation;N=G.blend_equation;O=M.blend_func;Q=G.blend_func;R=M.colorMask;qa=G.colorMask;oa=M.depth_range;K=G.depth_range;L=M.polygonOffset_offset;da=G.polygonOffset_offset;V=M.sample_coverage;na=G.sample_coverage;ia=M.scissor_box;ya=G.scissor_box;va=M.stencil_func;ba=G.stencil_func;Ca=M.stencil_opBack;ka=G.stencil_opBack;pa=M.stencil_opFront;za=G.stencil_opFront;Qa=
M.viewport;Ka=G.viewport;Hb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Va=new Float32Array(16);ha=new Float32Array(16);ea=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];sa=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);Ea=new Float32Array(16);return{draw:function(e){var a,l,g,q;a=ma.next;a!==ma.cur&&(a?t.bindFramebuffer(36160,a.framebuffer):t.bindFramebuffer(36160,null),ma.cur=a);if(G.dirty){var m;a=M.dither;a!==G.dither&&(a?t.enable(3024):t.disable(3024),G.dither=a);a=M.blend_enable;
a!==G.blend_enable&&(a?t.enable(3042):t.disable(3042),G.blend_enable=a);a=X[0];g=X[1];q=X[2];m=X[3];if(a!==S[0]||g!==S[1]||q!==S[2]||m!==S[3])t.blendColor(a,g,q,m),S[0]=a,S[1]=g,S[2]=q,S[3]=m;a=P[0];g=P[1];if(a!==N[0]||g!==N[1])t.blendEquationSeparate(a,g),N[0]=a,N[1]=g;a=O[0];g=O[1];q=O[2];m=O[3];if(a!==Q[0]||g!==Q[1]||q!==Q[2]||m!==Q[3])t.blendFuncSeparate(a,g,q,m),Q[0]=a,Q[1]=g,Q[2]=q,Q[3]=m;a=M.depth_enable;a!==G.depth_enable&&(a?t.enable(2929):t.disable(2929),G.depth_enable=a);a=M.depth_func;
a!==G.depth_func&&(t.depthFunc(a),G.depth_func=a);a=oa[0];g=oa[1];if(a!==K[0]||g!==K[1])t.depthRange(a,g),K[0]=a,K[1]=g;a=M.depth_mask;a!==G.depth_mask&&(t.depthMask(a),G.depth_mask=a);a=R[0];g=R[1];q=R[2];m=R[3];if(a!==qa[0]||g!==qa[1]||q!==qa[2]||m!==qa[3])t.colorMask(a,g,q,m),qa[0]=a,qa[1]=g,qa[2]=q,qa[3]=m;a=M.cull_enable;a!==G.cull_enable&&(a?t.enable(2884):t.disable(2884),G.cull_enable=a);a=M.cull_face;a!==G.cull_face&&(t.cullFace(a),G.cull_face=a);a=M.frontFace;a!==G.frontFace&&(t.frontFace(a),
G.frontFace=a);a=M.lineWidth;a!==G.lineWidth&&(t.lineWidth(a),G.lineWidth=a);a=M.polygonOffset_enable;a!==G.polygonOffset_enable&&(a?t.enable(32823):t.disable(32823),G.polygonOffset_enable=a);a=L[0];g=L[1];if(a!==da[0]||g!==da[1])t.polygonOffset(a,g),da[0]=a,da[1]=g;a=M.sample_alpha;a!==G.sample_alpha&&(a?t.enable(32926):t.disable(32926),G.sample_alpha=a);a=M.sample_enable;a!==G.sample_enable&&(a?t.enable(32928):t.disable(32928),G.sample_enable=a);a=V[0];g=V[1];if(a!==na[0]||g!==na[1])t.sampleCoverage(a,
g),na[0]=a,na[1]=g;a=M.stencil_enable;a!==G.stencil_enable&&(a?t.enable(2960):t.disable(2960),G.stencil_enable=a);a=M.stencil_mask;a!==G.stencil_mask&&(t.stencilMask(a),G.stencil_mask=a);a=va[0];g=va[1];q=va[2];if(a!==ba[0]||g!==ba[1]||q!==ba[2])t.stencilFunc(a,g,q),ba[0]=a,ba[1]=g,ba[2]=q;a=pa[0];g=pa[1];q=pa[2];m=pa[3];if(a!==za[0]||g!==za[1]||q!==za[2]||m!==za[3])t.stencilOpSeparate(a,g,q,m),za[0]=a,za[1]=g,za[2]=q,za[3]=m;a=Ca[0];g=Ca[1];q=Ca[2];m=Ca[3];if(a!==ka[0]||g!==ka[1]||q!==ka[2]||m!==
ka[3])t.stencilOpSeparate(a,g,q,m),ka[0]=a,ka[1]=g,ka[2]=q,ka[3]=m;a=M.scissor_enable;a!==G.scissor_enable&&(a?t.enable(3089):t.disable(3089),G.scissor_enable=a);a=ia[0];g=ia[1];q=ia[2];m=ia[3];if(a!==ya[0]||g!==ya[1]||q!==ya[2]||m!==ya[3])t.scissor(a,g,q,m),ya[0]=a,ya[1]=g,ya[2]=q,ya[3]=m;a=Qa[0];g=Qa[1];q=Qa[2];m=Qa[3];if(a!==Ka[0]||g!==Ka[1]||q!==Ka[2]||m!==Ka[3])t.viewport(a,g,q,m),Ka[0]=a,Ka[1]=g,Ka[2]=q,Ka[3]=m;G.dirty=!1}if(a=G.profile)l=performance.now(),u.count++;t.useProgram(p.program);
T.setVAO(null);g=ga.location;q=U[g];q.buffer||t.enableVertexAttribArray(g);if(q.type!==n.dtype||3!==q.size||q.buffer!==n||!1!==q.normalized||0!==q.offset||0!==q.stride)t.bindBuffer(34962,n.buffer),t.vertexAttribPointer(g,3,n.dtype,!1,0,0),q.type=n.dtype,q.size=3,q.buffer=n,q.normalized=!1,q.offset=0,q.stride=0;t.uniformMatrix4fv(H.location,!1,Hb);g=b.call(this,I,e,0);ca(g)&&16===g.length||d.commandRaise(f,h);t.uniformMatrix4fv(A.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Va[0]=g[0],
Va[1]=g[1],Va[2]=g[2],Va[3]=g[3],Va[4]=g[4],Va[5]=g[5],Va[6]=g[6],Va[7]=g[7],Va[8]=g[8],Va[9]=g[9],Va[10]=g[10],Va[11]=g[11],Va[12]=g[12],Va[13]=g[13],Va[14]=g[14],Va[15]=g[15],Va));e=c.call(this,I,e,0);ca(e)&&16===e.length||d.commandRaise(k,h);t.uniformMatrix4fv(F.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ha[0]=e[0],ha[1]=e[1],ha[2]=e[2],ha[3]=e[3],ha[4]=e[4],ha[5]=e[5],ha[6]=e[6],ha[7]=e[7],ha[8]=e[8],ha[9]=e[9],ha[10]=e[10],ha[11]=e[11],ha[12]=e[12],ha[13]=e[13],ha[14]=e[14],ha[15]=
e[15],ha));y&&t.bindBuffer(34963,y.buffer.buffer);e=y.primType;g=y.vertCount-0;0<=g||d.commandRaise(z,h);g&&(t.drawElements(e,g,y.type,0<<(y.type-5121>>1)),T.setVAO(null),a&&(u.cpuTime+=performance.now()-l))},scope:function(c,a,b){var f,k,v,w,t,B,z,y,x,p,E,r,la,A,ha,H,F,sa,ba,K,L,M,V;if(f=G.profile)k=performance.now(),u.count++;v=D.elements;D.elements=e;w=D.offset;D.offset=0;t=e.vertCount-0;0<=t||d.commandRaise(l,h);B=D.count;D.count=t;z=e.primType;t=D.primitive;D.primitive=z;z=Aa[3];Aa[3]=ea;y=g.call(this,
I,c,b);x=Aa[5];Aa[5]=y;p=q.call(this,I,c,b);y=Aa[4];Aa[4]=p;p=m.buffer;m.buffer=n;E=m.divisor;m.divisor=0;r=m.normalized;m.normalized=!1;la=m.offset;m.offset=0;A=m.size;m.size=0;ha=m.state;m.state=1;H=m.stride;m.stride=0;F=m.type;m.type=n.dtype;sa=m.w;m.w=0;ba=m.x;m.x=0;K=m.y;m.y=0;L=m.z;m.z=0;M=fa.vert;fa.vert=2;V=fa.frag;fa.frag=1;a(I,c,b);f&&(u.cpuTime+=performance.now()-k);D.elements=v;D.offset=w;D.count=B;D.primitive=t;Aa[3]=z;Aa[5]=x;Aa[4]=y;m.buffer=p;m.divisor=E;m.normalized=r;m.offset=la;
m.size=A;m.state=ha;m.stride=H;m.type=F;m.w=sa;m.x=ba;m.y=K;m.z=L;fa.vert=M;fa.frag=V},batch:function(c,a){var e,b,l;e=ma.next;e!==ma.cur&&(e?t.bindFramebuffer(36160,e.framebuffer):t.bindFramebuffer(36160,null),ma.cur=e);if(G.dirty){var g,f,k;e=M.dither;e!==G.dither&&(e?t.enable(3024):t.disable(3024),G.dither=e);e=M.blend_enable;e!==G.blend_enable&&(e?t.enable(3042):t.disable(3042),G.blend_enable=e);e=X[0];g=X[1];f=X[2];k=X[3];if(e!==S[0]||g!==S[1]||f!==S[2]||k!==S[3])t.blendColor(e,g,f,k),S[0]=e,
S[1]=g,S[2]=f,S[3]=k;e=P[0];g=P[1];if(e!==N[0]||g!==N[1])t.blendEquationSeparate(e,g),N[0]=e,N[1]=g;e=O[0];g=O[1];f=O[2];k=O[3];if(e!==Q[0]||g!==Q[1]||f!==Q[2]||k!==Q[3])t.blendFuncSeparate(e,g,f,k),Q[0]=e,Q[1]=g,Q[2]=f,Q[3]=k;e=M.depth_enable;e!==G.depth_enable&&(e?t.enable(2929):t.disable(2929),G.depth_enable=e);e=M.depth_func;e!==G.depth_func&&(t.depthFunc(e),G.depth_func=e);e=oa[0];g=oa[1];if(e!==K[0]||g!==K[1])t.depthRange(e,g),K[0]=e,K[1]=g;e=M.depth_mask;e!==G.depth_mask&&(t.depthMask(e),G.depth_mask=
e);e=R[0];g=R[1];f=R[2];k=R[3];if(e!==qa[0]||g!==qa[1]||f!==qa[2]||k!==qa[3])t.colorMask(e,g,f,k),qa[0]=e,qa[1]=g,qa[2]=f,qa[3]=k;e=M.cull_enable;e!==G.cull_enable&&(e?t.enable(2884):t.disable(2884),G.cull_enable=e);e=M.cull_face;e!==G.cull_face&&(t.cullFace(e),G.cull_face=e);e=M.frontFace;e!==G.frontFace&&(t.frontFace(e),G.frontFace=e);e=M.lineWidth;e!==G.lineWidth&&(t.lineWidth(e),G.lineWidth=e);e=M.polygonOffset_enable;e!==G.polygonOffset_enable&&(e?t.enable(32823):t.disable(32823),G.polygonOffset_enable=
e);e=L[0];g=L[1];if(e!==da[0]||g!==da[1])t.polygonOffset(e,g),da[0]=e,da[1]=g;e=M.sample_alpha;e!==G.sample_alpha&&(e?t.enable(32926):t.disable(32926),G.sample_alpha=e);e=M.sample_enable;e!==G.sample_enable&&(e?t.enable(32928):t.disable(32928),G.sample_enable=e);e=V[0];g=V[1];if(e!==na[0]||g!==na[1])t.sampleCoverage(e,g),na[0]=e,na[1]=g;e=M.stencil_enable;e!==G.stencil_enable&&(e?t.enable(2960):t.disable(2960),G.stencil_enable=e);e=M.stencil_mask;e!==G.stencil_mask&&(t.stencilMask(e),G.stencil_mask=
e);e=va[0];g=va[1];f=va[2];if(e!==ba[0]||g!==ba[1]||f!==ba[2])t.stencilFunc(e,g,f),ba[0]=e,ba[1]=g,ba[2]=f;e=pa[0];g=pa[1];f=pa[2];k=pa[3];if(e!==za[0]||g!==za[1]||f!==za[2]||k!==za[3])t.stencilOpSeparate(e,g,f,k),za[0]=e,za[1]=g,za[2]=f,za[3]=k;e=Ca[0];g=Ca[1];f=Ca[2];k=Ca[3];if(e!==ka[0]||g!==ka[1]||f!==ka[2]||k!==ka[3])t.stencilOpSeparate(e,g,f,k),ka[0]=e,ka[1]=g,ka[2]=f,ka[3]=k;e=M.scissor_enable;e!==G.scissor_enable&&(e?t.enable(3089):t.disable(3089),G.scissor_enable=e);e=ia[0];g=ia[1];f=ia[2];
k=ia[3];if(e!==ya[0]||g!==ya[1]||f!==ya[2]||k!==ya[3])t.scissor(e,g,f,k),ya[0]=e,ya[1]=g,ya[2]=f,ya[3]=k;e=Qa[0];g=Qa[1];f=Qa[2];k=Qa[3];if(e!==Ka[0]||g!==Ka[1]||f!==Ka[2]||k!==Ka[3])t.viewport(e,g,f,k),Ka[0]=e,Ka[1]=g,Ka[2]=f,Ka[3]=k;G.dirty=!1}if(e=G.profile)b=performance.now(),u.count+=a;t.useProgram(v.program);T.setVAO(null);g=ga.location;f=U[g];f.buffer||t.enableVertexAttribArray(g);if(f.type!==n.dtype||3!==f.size||f.buffer!==n||!1!==f.normalized||0!==f.offset||0!==f.stride)t.bindBuffer(34962,
n.buffer),t.vertexAttribPointer(g,3,n.dtype,!1,0,0),f.type=n.dtype,f.size=3,f.buffer=n,f.normalized=!1,f.offset=0,f.stride=0;t.uniformMatrix4fv(H.location,!1,sa);g=w.call(this,I,void 0,l);ca(g)&&16===g.length||d.commandRaise(B,h);t.uniformMatrix4fv(A.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(ua[0]=g[0],ua[1]=g[1],ua[2]=g[2],ua[3]=g[3],ua[4]=g[4],ua[5]=g[5],ua[6]=g[6],ua[7]=g[7],ua[8]=g[8],ua[9]=g[9],ua[10]=g[10],ua[11]=g[11],ua[12]=g[12],ua[13]=g[13],ua[14]=g[14],ua[15]=g[15],ua));
l=r.call(this,I,void 0,l);ca(l)&&16===l.length||d.commandRaise(x,h);t.uniformMatrix4fv(F.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ea[0]=l[0],Ea[1]=l[1],Ea[2]=l[2],Ea[3]=l[3],Ea[4]=l[4],Ea[5]=l[5],Ea[6]=l[6],Ea[7]=l[7],Ea[8]=l[8],Ea[9]=l[9],Ea[10]=l[10],Ea[11]=l[11],Ea[12]=l[12],Ea[13]=l[13],Ea[14]=l[14],Ea[15]=l[15],Ea));E&&t.bindBuffer(34963,E.buffer.buffer);g=E.primType;f=E.vertCount-0;0<=f||d.commandRaise(J,h);for(l=0;l<a;++l)f&&t.drawElements(g,f,E.type,0<<(E.type-5121>>1));
T.setVAO(null);e&&(u.cpuTime+=performance.now()-b)}}},$20:function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,r){var x,E,J,H,ga,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya;x=a.context;E=a.current;J=a.framebuffer;H=a.gl;ga=a.next;F=a.shader;A=a.uniforms;U=a.vao;I=ga.blend_color;G=E.blend_color;D=ga.blend_equation;ma=E.blend_equation;t=ga.blend_func;ca=E.blend_func;M=ga.colorMask;fa=E.colorMask;Aa=ga.depth_range;T=E.depth_range;X=ga.polygonOffset_offset;S=E.polygonOffset_offset;
P=ga.sample_coverage;N=E.sample_coverage;O=ga.scissor_box;Q=E.scissor_box;R=ga.stencil_func;qa=E.stencil_func;oa=ga.stencil_opBack;K=E.stencil_opBack;L=ga.stencil_opFront;da=E.stencil_opFront;V=ga.viewport;na=E.viewport;ia={};ya={};return{draw:function(e){var a,l,d,g,q,m,v,w,B,z,y,r,la;a=x.center;l=x.distance;d=x.eye;g=x.phi;q=x.projection;m=b.call(this,x,e,0);v=x.theta;w=x.up;B=x.view;x.center=p;x.distance=2.302585092994046;x.eye=n;x.phi=0;x.projection=m;x.theta=0;x.up=f;x.view=c;m=J.next;m!==J.cur&&
(m?H.bindFramebuffer(36160,m.framebuffer):H.bindFramebuffer(36160,null),J.cur=m);if(E.dirty){m=ga.dither;m!==E.dither&&(m?H.enable(3024):H.disable(3024),E.dither=m);m=ga.blend_enable;m!==E.blend_enable&&(m?H.enable(3042):H.disable(3042),E.blend_enable=m);m=I[0];y=I[1];r=I[2];la=I[3];if(m!==G[0]||y!==G[1]||r!==G[2]||la!==G[3])H.blendColor(m,y,r,la),G[0]=m,G[1]=y,G[2]=r,G[3]=la;m=D[0];y=D[1];if(m!==ma[0]||y!==ma[1])H.blendEquationSeparate(m,y),ma[0]=m,ma[1]=y;m=t[0];y=t[1];r=t[2];la=t[3];if(m!==ca[0]||
y!==ca[1]||r!==ca[2]||la!==ca[3])H.blendFuncSeparate(m,y,r,la),ca[0]=m,ca[1]=y,ca[2]=r,ca[3]=la;m=ga.depth_enable;m!==E.depth_enable&&(m?H.enable(2929):H.disable(2929),E.depth_enable=m);m=ga.depth_func;m!==E.depth_func&&(H.depthFunc(m),E.depth_func=m);m=Aa[0];y=Aa[1];if(m!==T[0]||y!==T[1])H.depthRange(m,y),T[0]=m,T[1]=y;m=ga.depth_mask;m!==E.depth_mask&&(H.depthMask(m),E.depth_mask=m);m=M[0];y=M[1];r=M[2];la=M[3];if(m!==fa[0]||y!==fa[1]||r!==fa[2]||la!==fa[3])H.colorMask(m,y,r,la),fa[0]=m,fa[1]=y,
fa[2]=r,fa[3]=la;m=ga.cull_enable;m!==E.cull_enable&&(m?H.enable(2884):H.disable(2884),E.cull_enable=m);m=ga.cull_face;m!==E.cull_face&&(H.cullFace(m),E.cull_face=m);m=ga.frontFace;m!==E.frontFace&&(H.frontFace(m),E.frontFace=m);m=ga.lineWidth;m!==E.lineWidth&&(H.lineWidth(m),E.lineWidth=m);m=ga.polygonOffset_enable;m!==E.polygonOffset_enable&&(m?H.enable(32823):H.disable(32823),E.polygonOffset_enable=m);m=X[0];y=X[1];if(m!==S[0]||y!==S[1])H.polygonOffset(m,y),S[0]=m,S[1]=y;m=ga.sample_alpha;m!==
E.sample_alpha&&(m?H.enable(32926):H.disable(32926),E.sample_alpha=m);m=ga.sample_enable;m!==E.sample_enable&&(m?H.enable(32928):H.disable(32928),E.sample_enable=m);m=P[0];y=P[1];if(m!==N[0]||y!==N[1])H.sampleCoverage(m,y),N[0]=m,N[1]=y;m=ga.stencil_enable;m!==E.stencil_enable&&(m?H.enable(2960):H.disable(2960),E.stencil_enable=m);m=ga.stencil_mask;m!==E.stencil_mask&&(H.stencilMask(m),E.stencil_mask=m);m=R[0];y=R[1];r=R[2];if(m!==qa[0]||y!==qa[1]||r!==qa[2])H.stencilFunc(m,y,r),qa[0]=m,qa[1]=y,qa[2]=
r;m=L[0];y=L[1];r=L[2];la=L[3];if(m!==da[0]||y!==da[1]||r!==da[2]||la!==da[3])H.stencilOpSeparate(m,y,r,la),da[0]=m,da[1]=y,da[2]=r,da[3]=la;m=oa[0];y=oa[1];r=oa[2];la=oa[3];if(m!==K[0]||y!==K[1]||r!==K[2]||la!==K[3])H.stencilOpSeparate(m,y,r,la),K[0]=m,K[1]=y,K[2]=r,K[3]=la;m=ga.scissor_enable;m!==E.scissor_enable&&(m?H.enable(3089):H.disable(3089),E.scissor_enable=m);m=O[0];y=O[1];r=O[2];la=O[3];if(m!==Q[0]||y!==Q[1]||r!==Q[2]||la!==Q[3])H.scissor(m,y,r,la),Q[0]=m,Q[1]=y,Q[2]=r,Q[3]=la;m=V[0];y=
V[1];r=V[2];la=V[3];if(m!==na[0]||y!==na[1]||r!==na[2]||la!==na[3])H.viewport(m,y,r,la),na[0]=m,na[1]=y,na[2]=r,na[3]=la;E.dirty=!1}if(m=E.profile)z=performance.now(),u.count++;y=F.program(F.vert,F.frag,h);H.useProgram(y.program);U.setVAO(null);r=y.id;(la=ia[r])||(la=ia[r]=k(y));la.call(this,e);U.setVAO(null);x.center=a;x.distance=l;x.eye=d;x.phi=g;x.projection=q;x.theta=v;x.up=w;x.view=B;m&&(u.cpuTime+=performance.now()-z)},scope:function(c,a,b){var d,f,k,q,m,v,n,h,w,t,B,p,C,r,la,H,F,D,G;d=x.center;
f=x.distance;k=x.eye;q=x.phi;m=x.projection;v=e.call(this,x,c,b);n=x.theta;h=x.up;w=x.view;x.center=y;x.distance=2.302585092994046;x.eye=z;x.phi=0;x.projection=v;x.theta=0;x.up=l;x.view=g;if(v=E.profile)t=performance.now(),u.count++;B=x.center;p=A[1];A[1]=B;C=x.distance;B=A[2];A[2]=C;r=x.eye;C=A[3];A[3]=r;la=x.phi;r=A[4];A[4]=la;H=x.projection;la=A[5];A[5]=H;F=x.theta;H=A[6];A[6]=F;D=x.up;F=A[7];A[7]=D;D=x.view;G=A[8];A[8]=D;a(x,c,b);x.center=d;x.distance=f;x.eye=k;x.phi=q;x.projection=m;x.theta=
n;x.up=h;x.view=w;v&&(u.cpuTime+=performance.now()-t);A[1]=p;A[2]=B;A[3]=C;A[4]=r;A[5]=la;A[6]=H;A[7]=F;A[8]=G},batch:function(c,e){var a,b,l,d,g,f,k,n,y,z,p,A,ia;a=x.center;b=x.distance;l=x.eye;d=x.phi;g=x.projection;f=v.call(this,x,c,0);k=x.theta;n=x.up;y=x.view;x.center=q;x.distance=2.302585092994046;x.eye=m;x.phi=0;x.projection=f;x.theta=0;x.up=w;x.view=B;f=J.next;f!==J.cur&&(f?H.bindFramebuffer(36160,f.framebuffer):H.bindFramebuffer(36160,null),J.cur=f);if(E.dirty){f=ga.dither;f!==E.dither&&
(f?H.enable(3024):H.disable(3024),E.dither=f);f=ga.blend_enable;f!==E.blend_enable&&(f?H.enable(3042):H.disable(3042),E.blend_enable=f);f=I[0];p=I[1];A=I[2];ia=I[3];if(f!==G[0]||p!==G[1]||A!==G[2]||ia!==G[3])H.blendColor(f,p,A,ia),G[0]=f,G[1]=p,G[2]=A,G[3]=ia;f=D[0];p=D[1];if(f!==ma[0]||p!==ma[1])H.blendEquationSeparate(f,p),ma[0]=f,ma[1]=p;f=t[0];p=t[1];A=t[2];ia=t[3];if(f!==ca[0]||p!==ca[1]||A!==ca[2]||ia!==ca[3])H.blendFuncSeparate(f,p,A,ia),ca[0]=f,ca[1]=p,ca[2]=A,ca[3]=ia;f=ga.depth_enable;f!==
E.depth_enable&&(f?H.enable(2929):H.disable(2929),E.depth_enable=f);f=ga.depth_func;f!==E.depth_func&&(H.depthFunc(f),E.depth_func=f);f=Aa[0];p=Aa[1];if(f!==T[0]||p!==T[1])H.depthRange(f,p),T[0]=f,T[1]=p;f=ga.depth_mask;f!==E.depth_mask&&(H.depthMask(f),E.depth_mask=f);f=M[0];p=M[1];A=M[2];ia=M[3];if(f!==fa[0]||p!==fa[1]||A!==fa[2]||ia!==fa[3])H.colorMask(f,p,A,ia),fa[0]=f,fa[1]=p,fa[2]=A,fa[3]=ia;f=ga.cull_enable;f!==E.cull_enable&&(f?H.enable(2884):H.disable(2884),E.cull_enable=f);f=ga.cull_face;
f!==E.cull_face&&(H.cullFace(f),E.cull_face=f);f=ga.frontFace;f!==E.frontFace&&(H.frontFace(f),E.frontFace=f);f=ga.lineWidth;f!==E.lineWidth&&(H.lineWidth(f),E.lineWidth=f);f=ga.polygonOffset_enable;f!==E.polygonOffset_enable&&(f?H.enable(32823):H.disable(32823),E.polygonOffset_enable=f);f=X[0];p=X[1];if(f!==S[0]||p!==S[1])H.polygonOffset(f,p),S[0]=f,S[1]=p;f=ga.sample_alpha;f!==E.sample_alpha&&(f?H.enable(32926):H.disable(32926),E.sample_alpha=f);f=ga.sample_enable;f!==E.sample_enable&&(f?H.enable(32928):
H.disable(32928),E.sample_enable=f);f=P[0];p=P[1];if(f!==N[0]||p!==N[1])H.sampleCoverage(f,p),N[0]=f,N[1]=p;f=ga.stencil_enable;f!==E.stencil_enable&&(f?H.enable(2960):H.disable(2960),E.stencil_enable=f);f=ga.stencil_mask;f!==E.stencil_mask&&(H.stencilMask(f),E.stencil_mask=f);f=R[0];p=R[1];A=R[2];if(f!==qa[0]||p!==qa[1]||A!==qa[2])H.stencilFunc(f,p,A),qa[0]=f,qa[1]=p,qa[2]=A;f=L[0];p=L[1];A=L[2];ia=L[3];if(f!==da[0]||p!==da[1]||A!==da[2]||ia!==da[3])H.stencilOpSeparate(f,p,A,ia),da[0]=f,da[1]=p,
da[2]=A,da[3]=ia;f=oa[0];p=oa[1];A=oa[2];ia=oa[3];if(f!==K[0]||p!==K[1]||A!==K[2]||ia!==K[3])H.stencilOpSeparate(f,p,A,ia),K[0]=f,K[1]=p,K[2]=A,K[3]=ia;f=ga.scissor_enable;f!==E.scissor_enable&&(f?H.enable(3089):H.disable(3089),E.scissor_enable=f);f=O[0];p=O[1];A=O[2];ia=O[3];if(f!==Q[0]||p!==Q[1]||A!==Q[2]||ia!==Q[3])H.scissor(f,p,A,ia),Q[0]=f,Q[1]=p,Q[2]=A,Q[3]=ia;f=V[0];p=V[1];A=V[2];ia=V[3];if(f!==na[0]||p!==na[1]||A!==na[2]||ia!==na[3])H.viewport(f,p,A,ia),na[0]=f,na[1]=p,na[2]=A,na[3]=ia;E.dirty=
!1}if(f=E.profile)z=performance.now(),u.count+=e;p=F.program(F.vert,F.frag,h);H.useProgram(p.program);U.setVAO(null);A=p.id;(ia=ya[A])||(ia=ya[A]=r(p));ia.call(this,c,e);U.setVAO(null);x.center=a;x.distance=b;x.eye=l;x.phi=d;x.projection=g;x.theta=k;x.up=n;x.view=y;f&&(u.cpuTime+=performance.now()-z)}}},"$27,position,projection,tex,uv,view":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,r,x,E,J,H,ga,F,A,U,I,G,D,ma){var t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka,
Hb,Va,ha,ea,sa,ua,Ea,Ra,Gb;t=a.attributes;ca=a.context;M=a.current;fa=a.draw;Aa=a.framebuffer;T=a.gl;X=a.isArrayLike;S=a.next;P=a.shader;N=a.uniforms;O=a.vao;Q=S.blend_color;R=M.blend_color;qa=S.blend_equation;oa=M.blend_equation;K=S.blend_func;L=M.blend_func;da=S.colorMask;V=M.colorMask;na=S.depth_range;ia=M.depth_range;ya=S.polygonOffset_offset;va=M.polygonOffset_offset;ba=S.sample_coverage;Ca=M.sample_coverage;ka=S.scissor_box;pa=M.scissor_box;za=S.stencil_func;Qa=M.stencil_func;Ka=S.stencil_opBack;
Hb=M.stencil_opBack;Va=S.stencil_opFront;ha=M.stencil_opFront;ea=S.viewport;sa=M.viewport;ua=new Float32Array(16);Ea=new Float32Array(16);Ra=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(a){var g,q,m,v;g=Aa.next;g!==Aa.cur&&(g?T.bindFramebuffer(36160,g.framebuffer):T.bindFramebuffer(36160,null),Aa.cur=g);if(M.dirty){var w;g=S.dither;g!==M.dither&&(g?T.enable(3024):T.disable(3024),M.dither=g);g=S.blend_enable;g!==M.blend_enable&&(g?T.enable(3042):T.disable(3042),M.blend_enable=
g);g=Q[0];m=Q[1];v=Q[2];w=Q[3];if(g!==R[0]||m!==R[1]||v!==R[2]||w!==R[3])T.blendColor(g,m,v,w),R[0]=g,R[1]=m,R[2]=v,R[3]=w;g=qa[0];m=qa[1];if(g!==oa[0]||m!==oa[1])T.blendEquationSeparate(g,m),oa[0]=g,oa[1]=m;g=K[0];m=K[1];v=K[2];w=K[3];if(g!==L[0]||m!==L[1]||v!==L[2]||w!==L[3])T.blendFuncSeparate(g,m,v,w),L[0]=g,L[1]=m,L[2]=v,L[3]=w;g=S.depth_enable;g!==M.depth_enable&&(g?T.enable(2929):T.disable(2929),M.depth_enable=g);g=S.depth_func;g!==M.depth_func&&(T.depthFunc(g),M.depth_func=g);g=na[0];m=na[1];
if(g!==ia[0]||m!==ia[1])T.depthRange(g,m),ia[0]=g,ia[1]=m;g=S.depth_mask;g!==M.depth_mask&&(T.depthMask(g),M.depth_mask=g);g=da[0];m=da[1];v=da[2];w=da[3];if(g!==V[0]||m!==V[1]||v!==V[2]||w!==V[3])T.colorMask(g,m,v,w),V[0]=g,V[1]=m,V[2]=v,V[3]=w;g=S.cull_enable;g!==M.cull_enable&&(g?T.enable(2884):T.disable(2884),M.cull_enable=g);g=S.cull_face;g!==M.cull_face&&(T.cullFace(g),M.cull_face=g);g=S.frontFace;g!==M.frontFace&&(T.frontFace(g),M.frontFace=g);g=S.lineWidth;g!==M.lineWidth&&(T.lineWidth(g),
M.lineWidth=g);g=S.polygonOffset_enable;g!==M.polygonOffset_enable&&(g?T.enable(32823):T.disable(32823),M.polygonOffset_enable=g);g=ya[0];m=ya[1];if(g!==va[0]||m!==va[1])T.polygonOffset(g,m),va[0]=g,va[1]=m;g=S.sample_alpha;g!==M.sample_alpha&&(g?T.enable(32926):T.disable(32926),M.sample_alpha=g);g=S.sample_enable;g!==M.sample_enable&&(g?T.enable(32928):T.disable(32928),M.sample_enable=g);g=ba[0];m=ba[1];if(g!==Ca[0]||m!==Ca[1])T.sampleCoverage(g,m),Ca[0]=g,Ca[1]=m;g=S.stencil_enable;g!==M.stencil_enable&&
(g?T.enable(2960):T.disable(2960),M.stencil_enable=g);g=S.stencil_mask;g!==M.stencil_mask&&(T.stencilMask(g),M.stencil_mask=g);g=za[0];m=za[1];v=za[2];if(g!==Qa[0]||m!==Qa[1]||v!==Qa[2])T.stencilFunc(g,m,v),Qa[0]=g,Qa[1]=m,Qa[2]=v;g=Va[0];m=Va[1];v=Va[2];w=Va[3];if(g!==ha[0]||m!==ha[1]||v!==ha[2]||w!==ha[3])T.stencilOpSeparate(g,m,v,w),ha[0]=g,ha[1]=m,ha[2]=v,ha[3]=w;g=Ka[0];m=Ka[1];v=Ka[2];w=Ka[3];if(g!==Hb[0]||m!==Hb[1]||v!==Hb[2]||w!==Hb[3])T.stencilOpSeparate(g,m,v,w),Hb[0]=g,Hb[1]=m,Hb[2]=v,
Hb[3]=w;g=S.scissor_enable;g!==M.scissor_enable&&(g?T.enable(3089):T.disable(3089),M.scissor_enable=g);g=ka[0];m=ka[1];v=ka[2];w=ka[3];if(g!==pa[0]||m!==pa[1]||v!==pa[2]||w!==pa[3])T.scissor(g,m,v,w),pa[0]=g,pa[1]=m,pa[2]=v,pa[3]=w;g=ea[0];m=ea[1];v=ea[2];w=ea[3];if(g!==sa[0]||m!==sa[1]||v!==sa[2]||w!==sa[3])T.viewport(g,m,v,w),sa[0]=g,sa[1]=m,sa[2]=v,sa[3]=w;M.dirty=!1}if(g=M.profile)q=performance.now(),u.count++;T.useProgram(p.program);O.setVAO(null);m=U.location;v=t[m];v.buffer||T.enableVertexAttribArray(m);
if(v.type!==n.dtype||3!==v.size||v.buffer!==n||!1!==v.normalized||0!==v.offset||0!==v.stride)T.bindBuffer(34962,n.buffer),T.vertexAttribPointer(m,3,n.dtype,!1,0,0),v.type=n.dtype,v.size=3,v.buffer=n,v.normalized=!1,v.offset=0,v.stride=0;m=D.location;v=t[m];v.buffer||T.enableVertexAttribArray(m);if(v.type!==b.dtype||2!==v.size||v.buffer!==b||!1!==v.normalized||0!==v.offset||0!==v.stride)T.bindBuffer(34962,b.buffer),T.vertexAttribPointer(m,2,b.dtype,!1,0,0),v.type=b.dtype,v.size=2,v.buffer=b,v.normalized=
!1,v.offset=0,v.stride=0;m=f.call(this,ca,a,0);X(m)&&16===m.length||d.commandRaise(c,h);T.uniformMatrix4fv(I.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(ua[0]=m[0],ua[1]=m[1],ua[2]=m[2],ua[3]=m[3],ua[4]=m[4],ua[5]=m[5],ua[6]=m[6],ua[7]=m[7],ua[8]=m[8],ua[9]=m[9],ua[10]=m[10],ua[11]=m[11],ua[12]=m[12],ua[13]=m[13],ua[14]=m[14],ua[15]=m[15],ua));m=k.call(this,ca,a,0);X(m)&&16===m.length||d.commandRaise(y,h);T.uniformMatrix4fv(ma.location,!1,Array.isArray(m)||m instanceof Float32Array?
m:(Ea[0]=m[0],Ea[1]=m[1],Ea[2]=m[2],Ea[3]=m[3],Ea[4]=m[4],Ea[5]=m[5],Ea[6]=m[6],Ea[7]=m[7],Ea[8]=m[8],Ea[9]=m[9],Ea[10]=m[10],Ea[11]=m[11],Ea[12]=m[12],Ea[13]=m[13],Ea[14]=m[14],Ea[15]=m[15],Ea));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||d.commandRaise(z,h);a=a._texture;T.uniform1i(G.location,a.bind());e&&T.bindBuffer(34963,e.buffer.buffer);m=e.primType;v=e.vertCount-0;0<=v||d.commandRaise(l,h);v&&(T.drawElements(m,v,e.type,0<<(e.type-
5121>>1)),O.setVAO(null),g&&(u.cpuTime+=performance.now()-q),a.unbind())},scope:function(c,e,a){var l,f,k,t,y,z,x,p,r,E,la,A,H,F,ha,D,G,I,ea,ba,K,L,V,O,ia,Q,R,sa,J,va,Hb,ga,S,T,U;if(l=M.profile)f=performance.now(),u.count++;k=fa.elements;fa.elements=g;t=fa.offset;fa.offset=0;y=g.vertCount-0;0<=y||d.commandRaise(q,h);z=fa.count;fa.count=y;x=g.primType;y=fa.primitive;fa.primitive=x;p=m.call(this,ca,c,a);x=N[3];N[3]=p;r=c.texture;p=N[5];N[5]=r;E=v.call(this,ca,c,a);r=N[4];N[4]=E;E=w.buffer;w.buffer=
n;la=w.divisor;w.divisor=0;A=w.normalized;w.normalized=!1;H=w.offset;w.offset=0;F=w.size;w.size=0;ha=w.state;w.state=1;D=w.stride;w.stride=0;G=w.type;w.type=n.dtype;I=w.w;w.w=0;ea=w.x;w.x=0;ba=w.y;w.y=0;K=w.z;w.z=0;L=B.buffer;B.buffer=b;V=B.divisor;B.divisor=0;O=B.normalized;B.normalized=!1;ia=B.offset;B.offset=0;Q=B.size;B.size=0;R=B.state;B.state=1;sa=B.stride;B.stride=0;J=B.type;B.type=b.dtype;va=B.w;B.w=0;Hb=B.x;B.x=0;ga=B.y;B.y=0;S=B.z;B.z=0;T=P.vert;P.vert=2;U=P.frag;P.frag=1;e(ca,c,a);l&&(u.cpuTime+=
performance.now()-f);fa.elements=k;fa.offset=t;fa.count=z;fa.primitive=y;N[3]=x;N[5]=p;N[4]=r;w.buffer=E;w.divisor=la;w.normalized=A;w.offset=H;w.size=F;w.state=ha;w.stride=D;w.type=G;w.w=I;w.x=ea;w.y=ba;w.z=K;B.buffer=L;B.divisor=V;B.normalized=O;B.offset=ia;B.size=Q;B.state=R;B.stride=sa;B.type=J;B.w=va;B.x=Hb;B.y=ga;B.z=S;P.vert=T;P.frag=U},batch:function(c,e){var a,l,g,f;a=Aa.next;a!==Aa.cur&&(a?T.bindFramebuffer(36160,a.framebuffer):T.bindFramebuffer(36160,null),Aa.cur=a);if(M.dirty){var k,m,
q;a=S.dither;a!==M.dither&&(a?T.enable(3024):T.disable(3024),M.dither=a);a=S.blend_enable;a!==M.blend_enable&&(a?T.enable(3042):T.disable(3042),M.blend_enable=a);a=Q[0];k=Q[1];m=Q[2];q=Q[3];if(a!==R[0]||k!==R[1]||m!==R[2]||q!==R[3])T.blendColor(a,k,m,q),R[0]=a,R[1]=k,R[2]=m,R[3]=q;a=qa[0];k=qa[1];if(a!==oa[0]||k!==oa[1])T.blendEquationSeparate(a,k),oa[0]=a,oa[1]=k;a=K[0];k=K[1];m=K[2];q=K[3];if(a!==L[0]||k!==L[1]||m!==L[2]||q!==L[3])T.blendFuncSeparate(a,k,m,q),L[0]=a,L[1]=k,L[2]=m,L[3]=q;a=S.depth_enable;
a!==M.depth_enable&&(a?T.enable(2929):T.disable(2929),M.depth_enable=a);a=S.depth_func;a!==M.depth_func&&(T.depthFunc(a),M.depth_func=a);a=na[0];k=na[1];if(a!==ia[0]||k!==ia[1])T.depthRange(a,k),ia[0]=a,ia[1]=k;a=S.depth_mask;a!==M.depth_mask&&(T.depthMask(a),M.depth_mask=a);a=da[0];k=da[1];m=da[2];q=da[3];if(a!==V[0]||k!==V[1]||m!==V[2]||q!==V[3])T.colorMask(a,k,m,q),V[0]=a,V[1]=k,V[2]=m,V[3]=q;a=S.cull_enable;a!==M.cull_enable&&(a?T.enable(2884):T.disable(2884),M.cull_enable=a);a=S.cull_face;a!==
M.cull_face&&(T.cullFace(a),M.cull_face=a);a=S.frontFace;a!==M.frontFace&&(T.frontFace(a),M.frontFace=a);a=S.lineWidth;a!==M.lineWidth&&(T.lineWidth(a),M.lineWidth=a);a=S.polygonOffset_enable;a!==M.polygonOffset_enable&&(a?T.enable(32823):T.disable(32823),M.polygonOffset_enable=a);a=ya[0];k=ya[1];if(a!==va[0]||k!==va[1])T.polygonOffset(a,k),va[0]=a,va[1]=k;a=S.sample_alpha;a!==M.sample_alpha&&(a?T.enable(32926):T.disable(32926),M.sample_alpha=a);a=S.sample_enable;a!==M.sample_enable&&(a?T.enable(32928):
T.disable(32928),M.sample_enable=a);a=ba[0];k=ba[1];if(a!==Ca[0]||k!==Ca[1])T.sampleCoverage(a,k),Ca[0]=a,Ca[1]=k;a=S.stencil_enable;a!==M.stencil_enable&&(a?T.enable(2960):T.disable(2960),M.stencil_enable=a);a=S.stencil_mask;a!==M.stencil_mask&&(T.stencilMask(a),M.stencil_mask=a);a=za[0];k=za[1];m=za[2];if(a!==Qa[0]||k!==Qa[1]||m!==Qa[2])T.stencilFunc(a,k,m),Qa[0]=a,Qa[1]=k,Qa[2]=m;a=Va[0];k=Va[1];m=Va[2];q=Va[3];if(a!==ha[0]||k!==ha[1]||m!==ha[2]||q!==ha[3])T.stencilOpSeparate(a,k,m,q),ha[0]=a,
ha[1]=k,ha[2]=m,ha[3]=q;a=Ka[0];k=Ka[1];m=Ka[2];q=Ka[3];if(a!==Hb[0]||k!==Hb[1]||m!==Hb[2]||q!==Hb[3])T.stencilOpSeparate(a,k,m,q),Hb[0]=a,Hb[1]=k,Hb[2]=m,Hb[3]=q;a=S.scissor_enable;a!==M.scissor_enable&&(a?T.enable(3089):T.disable(3089),M.scissor_enable=a);a=ka[0];k=ka[1];m=ka[2];q=ka[3];if(a!==pa[0]||k!==pa[1]||m!==pa[2]||q!==pa[3])T.scissor(a,k,m,q),pa[0]=a,pa[1]=k,pa[2]=m,pa[3]=q;a=ea[0];k=ea[1];m=ea[2];q=ea[3];if(a!==sa[0]||k!==sa[1]||m!==sa[2]||q!==sa[3])T.viewport(a,k,m,q),sa[0]=a,sa[1]=k,
sa[2]=m,sa[3]=q;M.dirty=!1}if(a=M.profile)l=performance.now(),u.count+=e;T.useProgram(r.program);O.setVAO(null);k=U.location;m=t[k];m.buffer||T.enableVertexAttribArray(k);if(m.type!==n.dtype||3!==m.size||m.buffer!==n||!1!==m.normalized||0!==m.offset||0!==m.stride)T.bindBuffer(34962,n.buffer),T.vertexAttribPointer(k,3,n.dtype,!1,0,0),m.type=n.dtype,m.size=3,m.buffer=n,m.normalized=!1,m.offset=0,m.stride=0;k=D.location;m=t[k];m.buffer||T.enableVertexAttribArray(k);if(m.type!==b.dtype||2!==m.size||m.buffer!==
b||!1!==m.normalized||0!==m.offset||0!==m.stride)T.bindBuffer(34962,b.buffer),T.vertexAttribPointer(k,2,b.dtype,!1,0,0),m.type=b.dtype,m.size=2,m.buffer=b,m.normalized=!1,m.offset=0,m.stride=0;k=x.call(this,ca,f,g);X(k)&&16===k.length||d.commandRaise(E,h);T.uniformMatrix4fv(I.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ra[0]=k[0],Ra[1]=k[1],Ra[2]=k[2],Ra[3]=k[3],Ra[4]=k[4],Ra[5]=k[5],Ra[6]=k[6],Ra[7]=k[7],Ra[8]=k[8],Ra[9]=k[9],Ra[10]=k[10],Ra[11]=k[11],Ra[12]=k[12],Ra[13]=k[13],Ra[14]=
k[14],Ra[15]=k[15],Ra));g=J.call(this,ca,f,g);X(g)&&16===g.length||d.commandRaise(H,h);T.uniformMatrix4fv(ma.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Gb[0]=g[0],Gb[1]=g[1],Gb[2]=g[2],Gb[3]=g[3],Gb[4]=g[4],Gb[5]=g[5],Gb[6]=g[6],Gb[7]=g[7],Gb[8]=g[8],Gb[9]=g[9],Gb[10]=g[10],Gb[11]=g[11],Gb[12]=g[12],Gb[13]=g[13],Gb[14]=g[14],Gb[15]=g[15],Gb));F&&T.bindBuffer(34963,F.buffer.buffer);k=F.primType;m=F.vertCount-0;0<=m||d.commandRaise(A,h);for(g=0;g<e;++g)f=c[g],(f=f.texture)&&"framebuffer"===
f._reglType&&(f=f.color[0]),"function"===typeof f&&"texture2d"===f._reglType||d.commandRaise(ga,h),f=f._texture,T.uniform1i(G.location,f.bind()),m&&(T.drawElements(k,m,F.type,0<<(F.type-5121>>1)),f.unbind());O.setVAO(null);a&&(u.cpuTime+=performance.now()-l)}}},"$19,normal,position,projection,view":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,r,x,E,J){var H,ga,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za,Qa,Ka;H=a.attributes;ga=a.context;F=a.current;A=
a.draw;U=a.framebuffer;I=a.gl;G=a.isArrayLike;D=a.next;ma=a.shader;t=a.uniforms;ca=a.vao;M=D.blend_color;fa=F.blend_color;Aa=D.blend_equation;T=F.blend_equation;X=D.blend_func;S=F.blend_func;P=D.colorMask;N=F.colorMask;O=D.depth_range;Q=F.depth_range;R=D.polygonOffset_offset;qa=F.polygonOffset_offset;oa=D.sample_coverage;K=F.sample_coverage;L=D.scissor_box;da=F.scissor_box;V=D.stencil_func;na=F.stencil_func;ia=D.stencil_opBack;ya=F.stencil_opBack;va=D.stencil_opFront;ba=F.stencil_opFront;Ca=D.viewport;
ka=F.viewport;pa=new Float32Array(16);za=new Float32Array(16);Qa=new Float32Array(16);Ka=new Float32Array(16);return{draw:function(a){var e,g,l;a=U.next;a!==U.cur&&(a?I.bindFramebuffer(36160,a.framebuffer):I.bindFramebuffer(36160,null),U.cur=a);if(F.dirty){var m;a=D.dither;a!==F.dither&&(a?I.enable(3024):I.disable(3024),F.dither=a);a=D.blend_enable;a!==F.blend_enable&&(a?I.enable(3042):I.disable(3042),F.blend_enable=a);a=M[0];g=M[1];l=M[2];m=M[3];if(a!==fa[0]||g!==fa[1]||l!==fa[2]||m!==fa[3])I.blendColor(a,
g,l,m),fa[0]=a,fa[1]=g,fa[2]=l,fa[3]=m;a=Aa[0];g=Aa[1];if(a!==T[0]||g!==T[1])I.blendEquationSeparate(a,g),T[0]=a,T[1]=g;a=X[0];g=X[1];l=X[2];m=X[3];if(a!==S[0]||g!==S[1]||l!==S[2]||m!==S[3])I.blendFuncSeparate(a,g,l,m),S[0]=a,S[1]=g,S[2]=l,S[3]=m;a=D.depth_enable;a!==F.depth_enable&&(a?I.enable(2929):I.disable(2929),F.depth_enable=a);a=D.depth_func;a!==F.depth_func&&(I.depthFunc(a),F.depth_func=a);a=O[0];g=O[1];if(a!==Q[0]||g!==Q[1])I.depthRange(a,g),Q[0]=a,Q[1]=g;a=D.depth_mask;a!==F.depth_mask&&
(I.depthMask(a),F.depth_mask=a);a=P[0];g=P[1];l=P[2];m=P[3];if(a!==N[0]||g!==N[1]||l!==N[2]||m!==N[3])I.colorMask(a,g,l,m),N[0]=a,N[1]=g,N[2]=l,N[3]=m;a=D.cull_enable;a!==F.cull_enable&&(a?I.enable(2884):I.disable(2884),F.cull_enable=a);a=D.cull_face;a!==F.cull_face&&(I.cullFace(a),F.cull_face=a);a=D.frontFace;a!==F.frontFace&&(I.frontFace(a),F.frontFace=a);a=D.lineWidth;a!==F.lineWidth&&(I.lineWidth(a),F.lineWidth=a);a=D.polygonOffset_enable;a!==F.polygonOffset_enable&&(a?I.enable(32823):I.disable(32823),
F.polygonOffset_enable=a);a=R[0];g=R[1];if(a!==qa[0]||g!==qa[1])I.polygonOffset(a,g),qa[0]=a,qa[1]=g;a=D.sample_alpha;a!==F.sample_alpha&&(a?I.enable(32926):I.disable(32926),F.sample_alpha=a);a=D.sample_enable;a!==F.sample_enable&&(a?I.enable(32928):I.disable(32928),F.sample_enable=a);a=oa[0];g=oa[1];if(a!==K[0]||g!==K[1])I.sampleCoverage(a,g),K[0]=a,K[1]=g;a=D.stencil_enable;a!==F.stencil_enable&&(a?I.enable(2960):I.disable(2960),F.stencil_enable=a);a=D.stencil_mask;a!==F.stencil_mask&&(I.stencilMask(a),
F.stencil_mask=a);a=V[0];g=V[1];l=V[2];if(a!==na[0]||g!==na[1]||l!==na[2])I.stencilFunc(a,g,l),na[0]=a,na[1]=g,na[2]=l;a=va[0];g=va[1];l=va[2];m=va[3];if(a!==ba[0]||g!==ba[1]||l!==ba[2]||m!==ba[3])I.stencilOpSeparate(a,g,l,m),ba[0]=a,ba[1]=g,ba[2]=l,ba[3]=m;a=ia[0];g=ia[1];l=ia[2];m=ia[3];if(a!==ya[0]||g!==ya[1]||l!==ya[2]||m!==ya[3])I.stencilOpSeparate(a,g,l,m),ya[0]=a,ya[1]=g,ya[2]=l,ya[3]=m;a=D.scissor_enable;a!==F.scissor_enable&&(a?I.enable(3089):I.disable(3089),F.scissor_enable=a);a=L[0];g=
L[1];l=L[2];m=L[3];if(a!==da[0]||g!==da[1]||l!==da[2]||m!==da[3])I.scissor(a,g,l,m),da[0]=a,da[1]=g,da[2]=l,da[3]=m;a=Ca[0];g=Ca[1];l=Ca[2];m=Ca[3];if(a!==ka[0]||g!==ka[1]||l!==ka[2]||m!==ka[3])I.viewport(a,g,l,m),ka[0]=a,ka[1]=g,ka[2]=l,ka[3]=m;F.dirty=!1}if(a=F.profile)e=performance.now(),u.count++;I.useProgram(p.program);ca.setVAO(null);g=x.location;l=H[g];l.buffer||I.enableVertexAttribArray(g);if(l.type!==n.dtype||3!==l.size||l.buffer!==n||!1!==l.normalized||0!==l.offset||0!==l.stride)I.bindBuffer(34962,
n.buffer),I.vertexAttribPointer(g,3,n.dtype,!1,0,0),l.type=n.dtype,l.size=3,l.buffer=n,l.normalized=!1,l.offset=0,l.stride=0;g=r.location;l=H[g];l.buffer||I.enableVertexAttribArray(g);if(l.type!==b.dtype||3!==l.size||l.buffer!==b||!1!==l.normalized||0!==l.offset||0!==l.stride)I.bindBuffer(34962,b.buffer),I.vertexAttribPointer(g,3,b.dtype,!1,0,0),l.type=b.dtype,l.size=3,l.buffer=b,l.normalized=!1,l.offset=0,l.stride=0;g=t[5];G(g)&&16===g.length||d.commandRaise(f,h);I.uniformMatrix4fv(E.location,!1,
Array.isArray(g)||g instanceof Float32Array?g:(pa[0]=g[0],pa[1]=g[1],pa[2]=g[2],pa[3]=g[3],pa[4]=g[4],pa[5]=g[5],pa[6]=g[6],pa[7]=g[7],pa[8]=g[8],pa[9]=g[9],pa[10]=g[10],pa[11]=g[11],pa[12]=g[12],pa[13]=g[13],pa[14]=g[14],pa[15]=g[15],pa));g=t[8];G(g)&&16===g.length||d.commandRaise(c,h);I.uniformMatrix4fv(J.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(za[0]=g[0],za[1]=g[1],za[2]=g[2],za[3]=g[3],za[4]=g[4],za[5]=g[5],za[6]=g[6],za[7]=g[7],za[8]=g[8],za[9]=g[9],za[10]=g[10],za[11]=g[11],
za[12]=g[12],za[13]=g[13],za[14]=g[14],za[15]=g[15],za));k&&I.bindBuffer(34963,k.buffer.buffer);g=k.primType;l=k.vertCount-0;0<=l||d.commandRaise(y,h);l&&(I.drawElements(g,l,k.type,0<<(k.type-5121>>1)),ca.setVAO(null),a&&(u.cpuTime+=performance.now()-e))},scope:function(c,a,f){var k,m,q,v,w,t,B,y,x,p,r,E,la,H,D,G,I,ba,K,L,M,V,N,O,ia,P,Q,R,J,va,S,T;if(k=F.profile)m=performance.now(),u.count++;q=A.elements;A.elements=z;v=A.offset;A.offset=0;w=z.vertCount-0;0<=w||d.commandRaise(e,h);t=A.count;A.count=
w;B=z.primType;w=A.primitive;A.primitive=B;B=l.buffer;l.buffer=b;y=l.divisor;l.divisor=0;x=l.normalized;l.normalized=!1;p=l.offset;l.offset=0;r=l.size;l.size=0;E=l.state;l.state=1;la=l.stride;l.stride=0;H=l.type;l.type=b.dtype;D=l.w;l.w=0;G=l.x;l.x=0;I=l.y;l.y=0;ba=l.z;l.z=0;K=g.buffer;g.buffer=n;L=g.divisor;g.divisor=0;M=g.normalized;g.normalized=!1;V=g.offset;g.offset=0;N=g.size;g.size=0;O=g.state;g.state=1;ia=g.stride;g.stride=0;P=g.type;g.type=n.dtype;Q=g.w;g.w=0;R=g.x;g.x=0;J=g.y;g.y=0;va=g.z;
g.z=0;S=ma.vert;ma.vert=10;T=ma.frag;ma.frag=9;a(ga,c,f);k&&(u.cpuTime+=performance.now()-m);A.elements=q;A.offset=v;A.count=t;A.primitive=w;l.buffer=B;l.divisor=y;l.normalized=x;l.offset=p;l.size=r;l.state=E;l.stride=la;l.type=H;l.w=D;l.x=G;l.y=I;l.z=ba;g.buffer=K;g.divisor=L;g.normalized=M;g.offset=V;g.size=N;g.state=O;g.stride=ia;g.type=P;g.w=Q;g.x=R;g.y=J;g.z=va;ma.vert=S;ma.frag=T},batch:function(c,a){var e,g,l;e=U.next;e!==U.cur&&(e?I.bindFramebuffer(36160,e.framebuffer):I.bindFramebuffer(36160,
null),U.cur=e);if(F.dirty){var f,k;e=D.dither;e!==F.dither&&(e?I.enable(3024):I.disable(3024),F.dither=e);e=D.blend_enable;e!==F.blend_enable&&(e?I.enable(3042):I.disable(3042),F.blend_enable=e);e=M[0];l=M[1];f=M[2];k=M[3];if(e!==fa[0]||l!==fa[1]||f!==fa[2]||k!==fa[3])I.blendColor(e,l,f,k),fa[0]=e,fa[1]=l,fa[2]=f,fa[3]=k;e=Aa[0];l=Aa[1];if(e!==T[0]||l!==T[1])I.blendEquationSeparate(e,l),T[0]=e,T[1]=l;e=X[0];l=X[1];f=X[2];k=X[3];if(e!==S[0]||l!==S[1]||f!==S[2]||k!==S[3])I.blendFuncSeparate(e,l,f,k),
S[0]=e,S[1]=l,S[2]=f,S[3]=k;e=D.depth_enable;e!==F.depth_enable&&(e?I.enable(2929):I.disable(2929),F.depth_enable=e);e=D.depth_func;e!==F.depth_func&&(I.depthFunc(e),F.depth_func=e);e=O[0];l=O[1];if(e!==Q[0]||l!==Q[1])I.depthRange(e,l),Q[0]=e,Q[1]=l;e=D.depth_mask;e!==F.depth_mask&&(I.depthMask(e),F.depth_mask=e);e=P[0];l=P[1];f=P[2];k=P[3];if(e!==N[0]||l!==N[1]||f!==N[2]||k!==N[3])I.colorMask(e,l,f,k),N[0]=e,N[1]=l,N[2]=f,N[3]=k;e=D.cull_enable;e!==F.cull_enable&&(e?I.enable(2884):I.disable(2884),
F.cull_enable=e);e=D.cull_face;e!==F.cull_face&&(I.cullFace(e),F.cull_face=e);e=D.frontFace;e!==F.frontFace&&(I.frontFace(e),F.frontFace=e);e=D.lineWidth;e!==F.lineWidth&&(I.lineWidth(e),F.lineWidth=e);e=D.polygonOffset_enable;e!==F.polygonOffset_enable&&(e?I.enable(32823):I.disable(32823),F.polygonOffset_enable=e);e=R[0];l=R[1];if(e!==qa[0]||l!==qa[1])I.polygonOffset(e,l),qa[0]=e,qa[1]=l;e=D.sample_alpha;e!==F.sample_alpha&&(e?I.enable(32926):I.disable(32926),F.sample_alpha=e);e=D.sample_enable;
e!==F.sample_enable&&(e?I.enable(32928):I.disable(32928),F.sample_enable=e);e=oa[0];l=oa[1];if(e!==K[0]||l!==K[1])I.sampleCoverage(e,l),K[0]=e,K[1]=l;e=D.stencil_enable;e!==F.stencil_enable&&(e?I.enable(2960):I.disable(2960),F.stencil_enable=e);e=D.stencil_mask;e!==F.stencil_mask&&(I.stencilMask(e),F.stencil_mask=e);e=V[0];l=V[1];f=V[2];if(e!==na[0]||l!==na[1]||f!==na[2])I.stencilFunc(e,l,f),na[0]=e,na[1]=l,na[2]=f;e=va[0];l=va[1];f=va[2];k=va[3];if(e!==ba[0]||l!==ba[1]||f!==ba[2]||k!==ba[3])I.stencilOpSeparate(e,
l,f,k),ba[0]=e,ba[1]=l,ba[2]=f,ba[3]=k;e=ia[0];l=ia[1];f=ia[2];k=ia[3];if(e!==ya[0]||l!==ya[1]||f!==ya[2]||k!==ya[3])I.stencilOpSeparate(e,l,f,k),ya[0]=e,ya[1]=l,ya[2]=f,ya[3]=k;e=D.scissor_enable;e!==F.scissor_enable&&(e?I.enable(3089):I.disable(3089),F.scissor_enable=e);e=L[0];l=L[1];f=L[2];k=L[3];if(e!==da[0]||l!==da[1]||f!==da[2]||k!==da[3])I.scissor(e,l,f,k),da[0]=e,da[1]=l,da[2]=f,da[3]=k;e=Ca[0];l=Ca[1];f=Ca[2];k=Ca[3];if(e!==ka[0]||l!==ka[1]||f!==ka[2]||k!==ka[3])I.viewport(e,l,f,k),ka[0]=
e,ka[1]=l,ka[2]=f,ka[3]=k;F.dirty=!1}if(e=F.profile)g=performance.now(),u.count+=a;I.useProgram(q.program);ca.setVAO(null);l=x.location;f=H[l];f.buffer||I.enableVertexAttribArray(l);if(f.type!==n.dtype||3!==f.size||f.buffer!==n||!1!==f.normalized||0!==f.offset||0!==f.stride)I.bindBuffer(34962,n.buffer),I.vertexAttribPointer(l,3,n.dtype,!1,0,0),f.type=n.dtype,f.size=3,f.buffer=n,f.normalized=!1,f.offset=0,f.stride=0;l=r.location;f=H[l];f.buffer||I.enableVertexAttribArray(l);if(f.type!==b.dtype||3!==
f.size||f.buffer!==b||!1!==f.normalized||0!==f.offset||0!==f.stride)I.bindBuffer(34962,b.buffer),I.vertexAttribPointer(l,3,b.dtype,!1,0,0),f.type=b.dtype,f.size=3,f.buffer=b,f.normalized=!1,f.offset=0,f.stride=0;l=t[5];G(l)&&16===l.length||d.commandRaise(m,h);I.uniformMatrix4fv(E.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Qa[0]=l[0],Qa[1]=l[1],Qa[2]=l[2],Qa[3]=l[3],Qa[4]=l[4],Qa[5]=l[5],Qa[6]=l[6],Qa[7]=l[7],Qa[8]=l[8],Qa[9]=l[9],Qa[10]=l[10],Qa[11]=l[11],Qa[12]=l[12],Qa[13]=l[13],
Qa[14]=l[14],Qa[15]=l[15],Qa));l=t[8];G(l)&&16===l.length||d.commandRaise(v,h);I.uniformMatrix4fv(J.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ka[0]=l[0],Ka[1]=l[1],Ka[2]=l[2],Ka[3]=l[3],Ka[4]=l[4],Ka[5]=l[5],Ka[6]=l[6],Ka[7]=l[7],Ka[8]=l[8],Ka[9]=l[9],Ka[10]=l[10],Ka[11]=l[11],Ka[12]=l[12],Ka[13]=l[13],Ka[14]=l[14],Ka[15]=l[15],Ka));w&&I.bindBuffer(34963,w.buffer.buffer);f=w.primType;k=w.vertCount-0;0<=k||d.commandRaise(B,h);for(l=0;l<a;++l)k&&I.drawElements(f,k,w.type,0<<(w.type-
5121>>1));ca.setVAO(null);e&&(u.cpuTime+=performance.now()-g)}}},"$14,angle,color,position":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v){var w,B,r,x,E,J,H,ga,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia;w=a.attributes;B=a.context;r=a.current;x=a.draw;E=a.elements;J=a.framebuffer;H=a.gl;ga=a.isArrayLike;F=a.next;A=a.shader;U=a.uniforms;I=a.vao;G=F.blend_color;D=r.blend_color;ma=F.blend_equation;t=r.blend_equation;ca=F.blend_func;M=r.blend_func;fa=F.colorMask;Aa=r.colorMask;T=F.depth_range;
X=r.depth_range;S=F.polygonOffset_offset;P=r.polygonOffset_offset;N=F.sample_coverage;O=r.sample_coverage;Q=F.scissor_box;R=r.scissor_box;qa=F.stencil_func;oa=r.stencil_func;K=F.stencil_opBack;L=r.stencil_opBack;da=F.stencil_opFront;V=r.stencil_opFront;na=F.viewport;ia=r.viewport;return{draw:function(a){var e,l,g,k;e=J.next;e!==J.cur&&(e?H.bindFramebuffer(36160,e.framebuffer):H.bindFramebuffer(36160,null),J.cur=e);if(r.dirty){var y;e=F.dither;e!==r.dither&&(e?H.enable(3024):H.disable(3024),r.dither=
e);e=F.blend_enable;e!==r.blend_enable&&(e?H.enable(3042):H.disable(3042),r.blend_enable=e);e=G[0];g=G[1];k=G[2];y=G[3];if(e!==D[0]||g!==D[1]||k!==D[2]||y!==D[3])H.blendColor(e,g,k,y),D[0]=e,D[1]=g,D[2]=k,D[3]=y;e=ma[0];g=ma[1];if(e!==t[0]||g!==t[1])H.blendEquationSeparate(e,g),t[0]=e,t[1]=g;e=ca[0];g=ca[1];k=ca[2];y=ca[3];if(e!==M[0]||g!==M[1]||k!==M[2]||y!==M[3])H.blendFuncSeparate(e,g,k,y),M[0]=e,M[1]=g,M[2]=k,M[3]=y;e=F.depth_func;e!==r.depth_func&&(H.depthFunc(e),r.depth_func=e);e=T[0];g=T[1];
if(e!==X[0]||g!==X[1])H.depthRange(e,g),X[0]=e,X[1]=g;e=F.depth_mask;e!==r.depth_mask&&(H.depthMask(e),r.depth_mask=e);e=fa[0];g=fa[1];k=fa[2];y=fa[3];if(e!==Aa[0]||g!==Aa[1]||k!==Aa[2]||y!==Aa[3])H.colorMask(e,g,k,y),Aa[0]=e,Aa[1]=g,Aa[2]=k,Aa[3]=y;e=F.cull_enable;e!==r.cull_enable&&(e?H.enable(2884):H.disable(2884),r.cull_enable=e);e=F.cull_face;e!==r.cull_face&&(H.cullFace(e),r.cull_face=e);e=F.frontFace;e!==r.frontFace&&(H.frontFace(e),r.frontFace=e);e=F.lineWidth;e!==r.lineWidth&&(H.lineWidth(e),
r.lineWidth=e);e=F.polygonOffset_enable;e!==r.polygonOffset_enable&&(e?H.enable(32823):H.disable(32823),r.polygonOffset_enable=e);e=S[0];g=S[1];if(e!==P[0]||g!==P[1])H.polygonOffset(e,g),P[0]=e,P[1]=g;e=F.sample_alpha;e!==r.sample_alpha&&(e?H.enable(32926):H.disable(32926),r.sample_alpha=e);e=F.sample_enable;e!==r.sample_enable&&(e?H.enable(32928):H.disable(32928),r.sample_enable=e);e=N[0];g=N[1];if(e!==O[0]||g!==O[1])H.sampleCoverage(e,g),O[0]=e,O[1]=g;e=F.stencil_enable;e!==r.stencil_enable&&(e?
H.enable(2960):H.disable(2960),r.stencil_enable=e);e=F.stencil_mask;e!==r.stencil_mask&&(H.stencilMask(e),r.stencil_mask=e);e=qa[0];g=qa[1];k=qa[2];if(e!==oa[0]||g!==oa[1]||k!==oa[2])H.stencilFunc(e,g,k),oa[0]=e,oa[1]=g,oa[2]=k;e=da[0];g=da[1];k=da[2];y=da[3];if(e!==V[0]||g!==V[1]||k!==V[2]||y!==V[3])H.stencilOpSeparate(e,g,k,y),V[0]=e,V[1]=g,V[2]=k,V[3]=y;e=K[0];g=K[1];k=K[2];y=K[3];if(e!==L[0]||g!==L[1]||k!==L[2]||y!==L[3])H.stencilOpSeparate(e,g,k,y),L[0]=e,L[1]=g,L[2]=k,L[3]=y;e=F.scissor_enable;
e!==r.scissor_enable&&(e?H.enable(3089):H.disable(3089),r.scissor_enable=e);e=Q[0];g=Q[1];k=Q[2];y=Q[3];if(e!==R[0]||g!==R[1]||k!==R[2]||y!==R[3])H.scissor(e,g,k,y),R[0]=e,R[1]=g,R[2]=k,R[3]=y;e=na[0];g=na[1];k=na[2];y=na[3];if(e!==ia[0]||g!==ia[1]||k!==ia[2]||y!==ia[3])H.viewport(e,g,k,y),ia[0]=e,ia[1]=g,ia[2]=k,ia[3]=y}H.disable(2929);r.depth_enable=!1;if(e=r.profile)l=performance.now(),u.count++;H.useProgram(p.program);I.setVAO(null);g=v.location;k=w[g];k.buffer||H.enableVertexAttribArray(g);if(k.type!==
n.dtype||2!==k.size||k.buffer!==n||!1!==k.normalized||0!==k.offset||0!==k.stride)H.bindBuffer(34962,n.buffer),H.vertexAttribPointer(g,2,n.dtype,!1,0,0),k.type=n.dtype,k.size=2,k.buffer=n,k.normalized=!1,k.offset=0,k.stride=0;g=b.call(this,B,a,0);"number"!==typeof g&&d.commandRaise(f,h);H.uniform1f(q.location,g);a=a.color;ga(a)&&4===a.length||d.commandRaise(c,h);H.uniform4f(m.location,a[0],a[1],a[2],a[3]);(a=x.elements)?H.bindBuffer(34963,a.buffer.buffer):I.currentVAO&&(a=E.getElements(I.currentVAO.elements))&&
H.bindBuffer(34963,a.buffer.buffer);g=x.primitive;k=x.offset;a?H.drawElements(g,3,a.type,k<<(a.type-5121>>1)):H.drawArrays(g,k,3);r.dirty=!0;I.setVAO(null);e&&(u.cpuTime+=performance.now()-l)},scope:function(c,a,e){var b,l,g,d,f,m,q,v,w,h,t,z,p,C,E,H,D,G,I,K;b=F.depth_enable;F.depth_enable=!1;if(l=r.profile)g=performance.now(),u.count++;d=x.count;x.count=3;f=k.call(this,B,c,e);m=U[3];U[3]=f;q=c.color;f=U[4];U[4]=q;q=y.buffer;y.buffer=n;v=y.divisor;y.divisor=0;w=y.normalized;y.normalized=!1;h=y.offset;
y.offset=0;t=y.size;y.size=0;z=y.state;y.state=1;p=y.stride;y.stride=0;C=y.type;y.type=n.dtype;E=y.w;y.w=0;H=y.x;y.x=0;D=y.y;y.y=0;G=y.z;y.z=0;I=A.vert;A.vert=2;K=A.frag;A.frag=1;r.dirty=!0;a(B,c,e);F.depth_enable=b;l&&(u.cpuTime+=performance.now()-g);x.count=d;U[3]=m;U[4]=f;y.buffer=q;y.divisor=v;y.normalized=w;y.offset=h;y.size=t;y.state=z;y.stride=p;y.type=C;y.w=E;y.x=H;y.y=D;y.z=G;A.vert=I;A.frag=K;r.dirty=!0},batch:function(c,a){var b,f,k,y;b=J.next;b!==J.cur&&(b?H.bindFramebuffer(36160,b.framebuffer):
H.bindFramebuffer(36160,null),J.cur=b);if(r.dirty){var p,A,U;b=F.dither;b!==r.dither&&(b?H.enable(3024):H.disable(3024),r.dither=b);b=F.blend_enable;b!==r.blend_enable&&(b?H.enable(3042):H.disable(3042),r.blend_enable=b);b=G[0];p=G[1];A=G[2];U=G[3];if(b!==D[0]||p!==D[1]||A!==D[2]||U!==D[3])H.blendColor(b,p,A,U),D[0]=b,D[1]=p,D[2]=A,D[3]=U;b=ma[0];p=ma[1];if(b!==t[0]||p!==t[1])H.blendEquationSeparate(b,p),t[0]=b,t[1]=p;b=ca[0];p=ca[1];A=ca[2];U=ca[3];if(b!==M[0]||p!==M[1]||A!==M[2]||U!==M[3])H.blendFuncSeparate(b,
p,A,U),M[0]=b,M[1]=p,M[2]=A,M[3]=U;b=F.depth_func;b!==r.depth_func&&(H.depthFunc(b),r.depth_func=b);b=T[0];p=T[1];if(b!==X[0]||p!==X[1])H.depthRange(b,p),X[0]=b,X[1]=p;b=F.depth_mask;b!==r.depth_mask&&(H.depthMask(b),r.depth_mask=b);b=fa[0];p=fa[1];A=fa[2];U=fa[3];if(b!==Aa[0]||p!==Aa[1]||A!==Aa[2]||U!==Aa[3])H.colorMask(b,p,A,U),Aa[0]=b,Aa[1]=p,Aa[2]=A,Aa[3]=U;b=F.cull_enable;b!==r.cull_enable&&(b?H.enable(2884):H.disable(2884),r.cull_enable=b);b=F.cull_face;b!==r.cull_face&&(H.cullFace(b),r.cull_face=
b);b=F.frontFace;b!==r.frontFace&&(H.frontFace(b),r.frontFace=b);b=F.lineWidth;b!==r.lineWidth&&(H.lineWidth(b),r.lineWidth=b);b=F.polygonOffset_enable;b!==r.polygonOffset_enable&&(b?H.enable(32823):H.disable(32823),r.polygonOffset_enable=b);b=S[0];p=S[1];if(b!==P[0]||p!==P[1])H.polygonOffset(b,p),P[0]=b,P[1]=p;b=F.sample_alpha;b!==r.sample_alpha&&(b?H.enable(32926):H.disable(32926),r.sample_alpha=b);b=F.sample_enable;b!==r.sample_enable&&(b?H.enable(32928):H.disable(32928),r.sample_enable=b);b=N[0];
p=N[1];if(b!==O[0]||p!==O[1])H.sampleCoverage(b,p),O[0]=b,O[1]=p;b=F.stencil_enable;b!==r.stencil_enable&&(b?H.enable(2960):H.disable(2960),r.stencil_enable=b);b=F.stencil_mask;b!==r.stencil_mask&&(H.stencilMask(b),r.stencil_mask=b);b=qa[0];p=qa[1];A=qa[2];if(b!==oa[0]||p!==oa[1]||A!==oa[2])H.stencilFunc(b,p,A),oa[0]=b,oa[1]=p,oa[2]=A;b=da[0];p=da[1];A=da[2];U=da[3];if(b!==V[0]||p!==V[1]||A!==V[2]||U!==V[3])H.stencilOpSeparate(b,p,A,U),V[0]=b,V[1]=p,V[2]=A,V[3]=U;b=K[0];p=K[1];A=K[2];U=K[3];if(b!==
L[0]||p!==L[1]||A!==L[2]||U!==L[3])H.stencilOpSeparate(b,p,A,U),L[0]=b,L[1]=p,L[2]=A,L[3]=U;b=F.scissor_enable;b!==r.scissor_enable&&(b?H.enable(3089):H.disable(3089),r.scissor_enable=b);b=Q[0];p=Q[1];A=Q[2];U=Q[3];if(b!==R[0]||p!==R[1]||A!==R[2]||U!==R[3])H.scissor(b,p,A,U),R[0]=b,R[1]=p,R[2]=A,R[3]=U;b=na[0];p=na[1];A=na[2];U=na[3];if(b!==ia[0]||p!==ia[1]||A!==ia[2]||U!==ia[3])H.viewport(b,p,A,U),ia[0]=b,ia[1]=p,ia[2]=A,ia[3]=U}H.disable(2929);r.depth_enable=!1;if(b=r.profile)f=performance.now(),
u.count+=a;H.useProgram(z.program);I.setVAO(null);p=v.location;A=w[p];A.buffer||H.enableVertexAttribArray(p);if(A.type!==n.dtype||2!==A.size||A.buffer!==n||!1!==A.normalized||0!==A.offset||0!==A.stride)H.bindBuffer(34962,n.buffer),H.vertexAttribPointer(p,2,n.dtype,!1,0,0),A.type=n.dtype,A.size=2,A.buffer=n,A.normalized=!1,A.offset=0,A.stride=0;k=e.call(this,B,y,k);"number"!==typeof k&&d.commandRaise(l,h);H.uniform1f(q.location,k);(p=x.elements)?H.bindBuffer(34963,p.buffer.buffer):I.currentVAO&&(p=
E.getElements(I.currentVAO.elements))&&H.bindBuffer(34963,p.buffer.buffer);A=x.primitive;U=x.offset;for(k=0;k<a;++k){y=c[k];var Hb,Va,ha,ea,sa,ua,Ea;Hb=y.color;ga(Hb)&&4===Hb.length||d.commandRaise(g,h);y=Hb[0];ha=Hb[1];sa=Hb[2];Hb=Hb[3];k&&Va===y&&ea===ha&&ua===sa&&Ea===Hb||(Va=y,ea=ha,ua=sa,Ea=Hb,H.uniform4f(m.location,y,ha,sa,Hb));p?H.drawElements(A,3,p.type,U<<(p.type-5121>>1)):H.drawArrays(A,U,3)}r.dirty=!0;I.setVAO(null);b&&(u.cpuTime+=performance.now()-f)}}},"$13,color,position":function(a,
d,h,u,p,n,b,f,c,k,y,z,e,l,g,q){var m,v,w,B,r,x,E,J,H,ga,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,X,S,P,N,O,Q,R,qa,oa,K,L,da;m=a.attributes;v=a.context;w=a.current;B=a.draw;r=a.framebuffer;x=a.gl;E=a.next;J=a.shader;H=a.uniforms;ga=a.vao;F=E.blend_color;A=w.blend_color;U=E.blend_equation;I=w.blend_equation;G=E.blend_func;D=w.blend_func;ma=E.colorMask;t=w.colorMask;ca=E.depth_range;M=w.depth_range;fa=E.polygonOffset_offset;Aa=w.polygonOffset_offset;T=E.sample_coverage;X=w.sample_coverage;S=E.scissor_box;P=w.scissor_box;
N=E.stencil_func;O=w.stencil_func;Q=E.stencil_opBack;R=w.stencil_opBack;qa=E.stencil_opFront;oa=w.stencil_opFront;K=E.viewport;L=w.viewport;da=[1,0,0,1];return{draw:function(c){var a,e,l;c=r.next;c!==r.cur&&(c?x.bindFramebuffer(36160,c.framebuffer):x.bindFramebuffer(36160,null),r.cur=c);if(w.dirty){var k;c=E.dither;c!==w.dither&&(c?x.enable(3024):x.disable(3024),w.dither=c);c=E.blend_enable;c!==w.blend_enable&&(c?x.enable(3042):x.disable(3042),w.blend_enable=c);c=F[0];e=F[1];l=F[2];k=F[3];if(c!==
A[0]||e!==A[1]||l!==A[2]||k!==A[3])x.blendColor(c,e,l,k),A[0]=c,A[1]=e,A[2]=l,A[3]=k;c=U[0];e=U[1];if(c!==I[0]||e!==I[1])x.blendEquationSeparate(c,e),I[0]=c,I[1]=e;c=G[0];e=G[1];l=G[2];k=G[3];if(c!==D[0]||e!==D[1]||l!==D[2]||k!==D[3])x.blendFuncSeparate(c,e,l,k),D[0]=c,D[1]=e,D[2]=l,D[3]=k;c=E.depth_enable;c!==w.depth_enable&&(c?x.enable(2929):x.disable(2929),w.depth_enable=c);c=E.depth_func;c!==w.depth_func&&(x.depthFunc(c),w.depth_func=c);c=ca[0];e=ca[1];if(c!==M[0]||e!==M[1])x.depthRange(c,e),
M[0]=c,M[1]=e;c=E.depth_mask;c!==w.depth_mask&&(x.depthMask(c),w.depth_mask=c);c=ma[0];e=ma[1];l=ma[2];k=ma[3];if(c!==t[0]||e!==t[1]||l!==t[2]||k!==t[3])x.colorMask(c,e,l,k),t[0]=c,t[1]=e,t[2]=l,t[3]=k;c=E.cull_enable;c!==w.cull_enable&&(c?x.enable(2884):x.disable(2884),w.cull_enable=c);c=E.cull_face;c!==w.cull_face&&(x.cullFace(c),w.cull_face=c);c=E.frontFace;c!==w.frontFace&&(x.frontFace(c),w.frontFace=c);c=E.polygonOffset_enable;c!==w.polygonOffset_enable&&(c?x.enable(32823):x.disable(32823),w.polygonOffset_enable=
c);c=fa[0];e=fa[1];if(c!==Aa[0]||e!==Aa[1])x.polygonOffset(c,e),Aa[0]=c,Aa[1]=e;c=E.sample_alpha;c!==w.sample_alpha&&(c?x.enable(32926):x.disable(32926),w.sample_alpha=c);c=E.sample_enable;c!==w.sample_enable&&(c?x.enable(32928):x.disable(32928),w.sample_enable=c);c=T[0];e=T[1];if(c!==X[0]||e!==X[1])x.sampleCoverage(c,e),X[0]=c,X[1]=e;c=E.stencil_enable;c!==w.stencil_enable&&(c?x.enable(2960):x.disable(2960),w.stencil_enable=c);c=E.stencil_mask;c!==w.stencil_mask&&(x.stencilMask(c),w.stencil_mask=
c);c=N[0];e=N[1];l=N[2];if(c!==O[0]||e!==O[1]||l!==O[2])x.stencilFunc(c,e,l),O[0]=c,O[1]=e,O[2]=l;c=qa[0];e=qa[1];l=qa[2];k=qa[3];if(c!==oa[0]||e!==oa[1]||l!==oa[2]||k!==oa[3])x.stencilOpSeparate(c,e,l,k),oa[0]=c,oa[1]=e,oa[2]=l,oa[3]=k;c=Q[0];e=Q[1];l=Q[2];k=Q[3];if(c!==R[0]||e!==R[1]||l!==R[2]||k!==R[3])x.stencilOpSeparate(c,e,l,k),R[0]=c,R[1]=e,R[2]=l,R[3]=k;c=E.scissor_enable;c!==w.scissor_enable&&(c?x.enable(3089):x.disable(3089),w.scissor_enable=c);c=S[0];e=S[1];l=S[2];k=S[3];if(c!==P[0]||e!==
P[1]||l!==P[2]||k!==P[3])x.scissor(c,e,l,k),P[0]=c,P[1]=e,P[2]=l,P[3]=k;c=K[0];e=K[1];l=K[2];k=K[3];if(c!==L[0]||e!==L[1]||l!==L[2]||k!==L[3])x.viewport(c,e,l,k),L[0]=c,L[1]=e,L[2]=l,L[3]=k}x.lineWidth(1);w.lineWidth=1;if(c=w.profile)a=performance.now(),u.count++;x.useProgram(p.program);ga.setVAO(null);e=q.location;l=m[e];l.buffer||x.enableVertexAttribArray(e);if(l.type!==n.dtype||2!==l.size||l.buffer!==n||!1!==l.normalized||0!==l.offset||0!==l.stride)x.bindBuffer(34962,n.buffer),x.vertexAttribPointer(e,
2,n.dtype,!1,0,0),l.type=n.dtype,l.size=2,l.buffer=n,l.normalized=!1,l.offset=0,l.stride=0;x.uniform4f(g.location,1,0,0,1);b&&x.bindBuffer(34963,b.buffer.buffer);e=b.primType;l=b.vertCount-0;0<=l||d.commandRaise(f,h);l&&(x.drawElements(e,l,b.type,0<<(b.type-5121>>1)),w.dirty=!0,ga.setVAO(null),c&&(u.cpuTime+=performance.now()-a))},scope:function(e,a,b){var l,g,f,m,q,t,z,p,x,r,A,la,F,D,G,I,K,L,M,N,O,P;l=E.lineWidth;E.lineWidth=1;if(g=w.profile)f=performance.now(),u.count++;m=B.elements;B.elements=
c;q=B.offset;B.offset=0;t=c.vertCount-0;0<=t||d.commandRaise(k,h);z=B.count;B.count=t;p=c.primType;t=B.primitive;B.primitive=p;p=H[3];H[3]=da;x=y.buffer;y.buffer=n;r=y.divisor;y.divisor=0;A=y.normalized;y.normalized=!1;la=y.offset;y.offset=0;F=y.size;y.size=0;D=y.state;y.state=1;G=y.stride;y.stride=0;I=y.type;y.type=n.dtype;K=y.w;y.w=0;L=y.x;y.x=0;M=y.y;y.y=0;N=y.z;y.z=0;O=J.vert;J.vert=2;P=J.frag;J.frag=1;w.dirty=!0;a(v,e,b);E.lineWidth=l;g&&(u.cpuTime+=performance.now()-f);B.elements=m;B.offset=
q;B.count=z;B.primitive=t;H[3]=p;y.buffer=x;y.divisor=r;y.normalized=A;y.offset=la;y.size=F;y.state=D;y.stride=G;y.type=I;y.w=K;y.x=L;y.y=M;y.z=N;J.vert=O;J.frag=P;w.dirty=!0},batch:function(c,a){var b,f,k;b=r.next;b!==r.cur&&(b?x.bindFramebuffer(36160,b.framebuffer):x.bindFramebuffer(36160,null),r.cur=b);if(w.dirty){var v,y;b=E.dither;b!==w.dither&&(b?x.enable(3024):x.disable(3024),w.dither=b);b=E.blend_enable;b!==w.blend_enable&&(b?x.enable(3042):x.disable(3042),w.blend_enable=b);b=F[0];k=F[1];
v=F[2];y=F[3];if(b!==A[0]||k!==A[1]||v!==A[2]||y!==A[3])x.blendColor(b,k,v,y),A[0]=b,A[1]=k,A[2]=v,A[3]=y;b=U[0];k=U[1];if(b!==I[0]||k!==I[1])x.blendEquationSeparate(b,k),I[0]=b,I[1]=k;b=G[0];k=G[1];v=G[2];y=G[3];if(b!==D[0]||k!==D[1]||v!==D[2]||y!==D[3])x.blendFuncSeparate(b,k,v,y),D[0]=b,D[1]=k,D[2]=v,D[3]=y;b=E.depth_enable;b!==w.depth_enable&&(b?x.enable(2929):x.disable(2929),w.depth_enable=b);b=E.depth_func;b!==w.depth_func&&(x.depthFunc(b),w.depth_func=b);b=ca[0];k=ca[1];if(b!==M[0]||k!==M[1])x.depthRange(b,
k),M[0]=b,M[1]=k;b=E.depth_mask;b!==w.depth_mask&&(x.depthMask(b),w.depth_mask=b);b=ma[0];k=ma[1];v=ma[2];y=ma[3];if(b!==t[0]||k!==t[1]||v!==t[2]||y!==t[3])x.colorMask(b,k,v,y),t[0]=b,t[1]=k,t[2]=v,t[3]=y;b=E.cull_enable;b!==w.cull_enable&&(b?x.enable(2884):x.disable(2884),w.cull_enable=b);b=E.cull_face;b!==w.cull_face&&(x.cullFace(b),w.cull_face=b);b=E.frontFace;b!==w.frontFace&&(x.frontFace(b),w.frontFace=b);b=E.polygonOffset_enable;b!==w.polygonOffset_enable&&(b?x.enable(32823):x.disable(32823),
w.polygonOffset_enable=b);b=fa[0];k=fa[1];if(b!==Aa[0]||k!==Aa[1])x.polygonOffset(b,k),Aa[0]=b,Aa[1]=k;b=E.sample_alpha;b!==w.sample_alpha&&(b?x.enable(32926):x.disable(32926),w.sample_alpha=b);b=E.sample_enable;b!==w.sample_enable&&(b?x.enable(32928):x.disable(32928),w.sample_enable=b);b=T[0];k=T[1];if(b!==X[0]||k!==X[1])x.sampleCoverage(b,k),X[0]=b,X[1]=k;b=E.stencil_enable;b!==w.stencil_enable&&(b?x.enable(2960):x.disable(2960),w.stencil_enable=b);b=E.stencil_mask;b!==w.stencil_mask&&(x.stencilMask(b),
w.stencil_mask=b);b=N[0];k=N[1];v=N[2];if(b!==O[0]||k!==O[1]||v!==O[2])x.stencilFunc(b,k,v),O[0]=b,O[1]=k,O[2]=v;b=qa[0];k=qa[1];v=qa[2];y=qa[3];if(b!==oa[0]||k!==oa[1]||v!==oa[2]||y!==oa[3])x.stencilOpSeparate(b,k,v,y),oa[0]=b,oa[1]=k,oa[2]=v,oa[3]=y;b=Q[0];k=Q[1];v=Q[2];y=Q[3];if(b!==R[0]||k!==R[1]||v!==R[2]||y!==R[3])x.stencilOpSeparate(b,k,v,y),R[0]=b,R[1]=k,R[2]=v,R[3]=y;b=E.scissor_enable;b!==w.scissor_enable&&(b?x.enable(3089):x.disable(3089),w.scissor_enable=b);b=S[0];k=S[1];v=S[2];y=S[3];
if(b!==P[0]||k!==P[1]||v!==P[2]||y!==P[3])x.scissor(b,k,v,y),P[0]=b,P[1]=k,P[2]=v,P[3]=y;b=K[0];k=K[1];v=K[2];y=K[3];if(b!==L[0]||k!==L[1]||v!==L[2]||y!==L[3])x.viewport(b,k,v,y),L[0]=b,L[1]=k,L[2]=v,L[3]=y}x.lineWidth(1);w.lineWidth=1;if(b=w.profile)f=performance.now(),u.count+=a;x.useProgram(z.program);ga.setVAO(null);k=q.location;v=m[k];v.buffer||x.enableVertexAttribArray(k);if(v.type!==n.dtype||2!==v.size||v.buffer!==n||!1!==v.normalized||0!==v.offset||0!==v.stride)x.bindBuffer(34962,n.buffer),
x.vertexAttribPointer(k,2,n.dtype,!1,0,0),v.type=n.dtype,v.size=2,v.buffer=n,v.normalized=!1,v.offset=0,v.stride=0;x.uniform4f(g.location,1,0,0,1);e&&x.bindBuffer(34963,e.buffer.buffer);v=e.primType;y=e.vertCount-0;0<=y||d.commandRaise(l,h);for(k=0;k<a;++k)y&&x.drawElements(v,y,e.type,0<<(e.type-5121>>1));w.dirty=!0;ga.setVAO(null);b&&(u.cpuTime+=performance.now()-f)}}},"$20,mouse,position,t,texture":function(a,d,h,u,p,n,b,f,c,k,y,z,e,l,g,q,m,v,w,B,r,x,E,J,H){var ga,F,A,U,I,G,D,ma,t,ca,M,fa,Aa,T,
X,S,P,N,O,Q,R,qa,oa,K,L,da,V,na,ia,ya,va,ba,Ca,ka,pa,za;ga=a.attributes;F=a.context;A=a.current;U=a.draw;I=a.elements;G=a.framebuffer;D=a.gl;ma=a.isArrayLike;t=a.next;ca=a.shader;M=a.uniforms;fa=a.vao;Aa=t.blend_color;T=A.blend_color;X=t.blend_equation;S=A.blend_equation;P=t.blend_func;N=A.blend_func;O=t.colorMask;Q=A.colorMask;R=t.depth_range;qa=A.depth_range;oa=t.polygonOffset_offset;K=A.polygonOffset_offset;L=t.sample_coverage;da=A.sample_coverage;V=t.scissor_box;na=A.scissor_box;ia=t.stencil_func;
ya=A.stencil_func;va=t.stencil_opBack;ba=A.stencil_opBack;Ca=t.stencil_opFront;ka=A.stencil_opFront;pa=t.viewport;za=A.viewport;return{draw:function(e){var a,l,g,m;a=G.next;a!==G.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),G.cur=a);if(A.dirty){var q;a=t.dither;a!==A.dither&&(a?D.enable(3024):D.disable(3024),A.dither=a);a=t.blend_enable;a!==A.blend_enable&&(a?D.enable(3042):D.disable(3042),A.blend_enable=a);a=Aa[0];g=Aa[1];m=Aa[2];q=Aa[3];if(a!==T[0]||g!==T[1]||m!==
T[2]||q!==T[3])D.blendColor(a,g,m,q),T[0]=a,T[1]=g,T[2]=m,T[3]=q;a=X[0];g=X[1];if(a!==S[0]||g!==S[1])D.blendEquationSeparate(a,g),S[0]=a,S[1]=g;a=P[0];g=P[1];m=P[2];q=P[3];if(a!==N[0]||g!==N[1]||m!==N[2]||q!==N[3])D.blendFuncSeparate(a,g,m,q),N[0]=a,N[1]=g,N[2]=m,N[3]=q;a=t.depth_enable;a!==A.depth_enable&&(a?D.enable(2929):D.disable(2929),A.depth_enable=a);a=t.depth_func;a!==A.depth_func&&(D.depthFunc(a),A.depth_func=a);a=R[0];g=R[1];if(a!==qa[0]||g!==qa[1])D.depthRange(a,g),qa[0]=a,qa[1]=g;a=t.depth_mask;
a!==A.depth_mask&&(D.depthMask(a),A.depth_mask=a);a=O[0];g=O[1];m=O[2];q=O[3];if(a!==Q[0]||g!==Q[1]||m!==Q[2]||q!==Q[3])D.colorMask(a,g,m,q),Q[0]=a,Q[1]=g,Q[2]=m,Q[3]=q;a=t.cull_enable;a!==A.cull_enable&&(a?D.enable(2884):D.disable(2884),A.cull_enable=a);a=t.cull_face;a!==A.cull_face&&(D.cullFace(a),A.cull_face=a);a=t.frontFace;a!==A.frontFace&&(D.frontFace(a),A.frontFace=a);a=t.lineWidth;a!==A.lineWidth&&(D.lineWidth(a),A.lineWidth=a);a=t.polygonOffset_enable;a!==A.polygonOffset_enable&&(a?D.enable(32823):
D.disable(32823),A.polygonOffset_enable=a);a=oa[0];g=oa[1];if(a!==K[0]||g!==K[1])D.polygonOffset(a,g),K[0]=a,K[1]=g;a=t.sample_alpha;a!==A.sample_alpha&&(a?D.enable(32926):D.disable(32926),A.sample_alpha=a);a=t.sample_enable;a!==A.sample_enable&&(a?D.enable(32928):D.disable(32928),A.sample_enable=a);a=L[0];g=L[1];if(a!==da[0]||g!==da[1])D.sampleCoverage(a,g),da[0]=a,da[1]=g;a=t.stencil_enable;a!==A.stencil_enable&&(a?D.enable(2960):D.disable(2960),A.stencil_enable=a);a=t.stencil_mask;a!==A.stencil_mask&&
(D.stencilMask(a),A.stencil_mask=a);a=ia[0];g=ia[1];m=ia[2];if(a!==ya[0]||g!==ya[1]||m!==ya[2])D.stencilFunc(a,g,m),ya[0]=a,ya[1]=g,ya[2]=m;a=Ca[0];g=Ca[1];m=Ca[2];q=Ca[3];if(a!==ka[0]||g!==ka[1]||m!==ka[2]||q!==ka[3])D.stencilOpSeparate(a,g,m,q),ka[0]=a,ka[1]=g,ka[2]=m,ka[3]=q;a=va[0];g=va[1];m=va[2];q=va[3];if(a!==ba[0]||g!==ba[1]||m!==ba[2]||q!==ba[3])D.stencilOpSeparate(a,g,m,q),ba[0]=a,ba[1]=g,ba[2]=m,ba[3]=q;a=t.scissor_enable;a!==A.scissor_enable&&(a?D.enable(3089):D.disable(3089),A.scissor_enable=
a);a=V[0];g=V[1];m=V[2];q=V[3];if(a!==na[0]||g!==na[1]||m!==na[2]||q!==na[3])D.scissor(a,g,m,q),na[0]=a,na[1]=g,na[2]=m,na[3]=q;a=pa[0];g=pa[1];m=pa[2];q=pa[3];if(a!==za[0]||g!==za[1]||m!==za[2]||q!==za[3])D.viewport(a,g,m,q),za[0]=a,za[1]=g,za[2]=m,za[3]=q;A.dirty=!1}if(a=A.profile)l=performance.now(),u.count++;D.useProgram(p.program);fa.setVAO(null);g=E.location;m=ga[g];m.buffer||D.enableVertexAttribArray(g);if(m.type!==n.dtype||2!==m.size||m.buffer!==n||!1!==m.normalized||0!==m.offset||0!==m.stride)D.bindBuffer(34962,
n.buffer),D.vertexAttribPointer(g,2,n.dtype,!1,0,0),m.type=n.dtype,m.size=2,m.buffer=n,m.normalized=!1,m.offset=0,m.stride=0;g=b.call(this,F,e,0);ma(g)&&2===g.length||d.commandRaise(f,h);D.uniform2f(x.location,g[0],g[1]);e=c.call(this,F,e,0);"number"!==typeof e&&d.commandRaise(k,h);D.uniform1f(J.location,e);D.uniform1i(H.location,y.bind());(e=U.elements)?D.bindBuffer(34963,e.buffer.buffer):fa.currentVAO&&(e=I.getElements(fa.currentVAO.elements))&&D.bindBuffer(34963,e.buffer.buffer);g=U.primitive;
m=U.offset;e?D.drawElements(g,3,e.type,m<<(e.type-5121>>1)):D.drawArrays(g,m,3);fa.setVAO(null);a&&(u.cpuTime+=performance.now()-l);y.unbind()},scope:function(c,a,b){var k,d,f,m,q,v,w,h,y,t,B,p,x,r,C,E,H,la,D,G;if(k=A.profile)d=performance.now(),u.count++;f=U.count;U.count=3;m=z.call(this,F,c,b);q=M[3];M[3]=m;v=e.call(this,F,c,b);m=M[4];M[4]=v;v=M[5];M[5]=l;w=g.buffer;g.buffer=n;h=g.divisor;g.divisor=0;y=g.normalized;g.normalized=!1;t=g.offset;g.offset=0;B=g.size;g.size=0;p=g.state;g.state=1;x=g.stride;
g.stride=0;r=g.type;g.type=n.dtype;C=g.w;g.w=0;E=g.x;g.x=0;H=g.y;g.y=0;la=g.z;g.z=0;D=ca.vert;ca.vert=2;G=ca.frag;ca.frag=1;a(F,c,b);k&&(u.cpuTime+=performance.now()-d);U.count=f;M[3]=q;M[4]=m;M[5]=v;g.buffer=w;g.divisor=h;g.normalized=y;g.offset=t;g.size=B;g.state=p;g.stride=x;g.type=r;g.w=C;g.x=E;g.y=H;g.z=la;ca.vert=D;ca.frag=G},batch:function(c,a){var e,b,g;e=G.next;e!==G.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),G.cur=e);if(A.dirty){var l,k,f;e=t.dither;e!==
A.dither&&(e?D.enable(3024):D.disable(3024),A.dither=e);e=t.blend_enable;e!==A.blend_enable&&(e?D.enable(3042):D.disable(3042),A.blend_enable=e);e=Aa[0];l=Aa[1];k=Aa[2];f=Aa[3];if(e!==T[0]||l!==T[1]||k!==T[2]||f!==T[3])D.blendColor(e,l,k,f),T[0]=e,T[1]=l,T[2]=k,T[3]=f;e=X[0];l=X[1];if(e!==S[0]||l!==S[1])D.blendEquationSeparate(e,l),S[0]=e,S[1]=l;e=P[0];l=P[1];k=P[2];f=P[3];if(e!==N[0]||l!==N[1]||k!==N[2]||f!==N[3])D.blendFuncSeparate(e,l,k,f),N[0]=e,N[1]=l,N[2]=k,N[3]=f;e=t.depth_enable;e!==A.depth_enable&&
(e?D.enable(2929):D.disable(2929),A.depth_enable=e);e=t.depth_func;e!==A.depth_func&&(D.depthFunc(e),A.depth_func=e);e=R[0];l=R[1];if(e!==qa[0]||l!==qa[1])D.depthRange(e,l),qa[0]=e,qa[1]=l;e=t.depth_mask;e!==A.depth_mask&&(D.depthMask(e),A.depth_mask=e);e=O[0];l=O[1];k=O[2];f=O[3];if(e!==Q[0]||l!==Q[1]||k!==Q[2]||f!==Q[3])D.colorMask(e,l,k,f),Q[0]=e,Q[1]=l,Q[2]=k,Q[3]=f;e=t.cull_enable;e!==A.cull_enable&&(e?D.enable(2884):D.disable(2884),A.cull_enable=e);e=t.cull_face;e!==A.cull_face&&(D.cullFace(e),
A.cull_face=e);e=t.frontFace;e!==A.frontFace&&(D.frontFace(e),A.frontFace=e);e=t.lineWidth;e!==A.lineWidth&&(D.lineWidth(e),A.lineWidth=e);e=t.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?D.enable(32823):D.disable(32823),A.polygonOffset_enable=e);e=oa[0];l=oa[1];if(e!==K[0]||l!==K[1])D.polygonOffset(e,l),K[0]=e,K[1]=l;e=t.sample_alpha;e!==A.sample_alpha&&(e?D.enable(32926):D.disable(32926),A.sample_alpha=e);e=t.sample_enable;e!==A.sample_enable&&(e?D.enable(32928):D.disable(32928),A.sample_enable=
e);e=L[0];l=L[1];if(e!==da[0]||l!==da[1])D.sampleCoverage(e,l),da[0]=e,da[1]=l;e=t.stencil_enable;e!==A.stencil_enable&&(e?D.enable(2960):D.disable(2960),A.stencil_enable=e);e=t.stencil_mask;e!==A.stencil_mask&&(D.stencilMask(e),A.stencil_mask=e);e=ia[0];l=ia[1];k=ia[2];if(e!==ya[0]||l!==ya[1]||k!==ya[2])D.stencilFunc(e,l,k),ya[0]=e,ya[1]=l,ya[2]=k;e=Ca[0];l=Ca[1];k=Ca[2];f=Ca[3];if(e!==ka[0]||l!==ka[1]||k!==ka[2]||f!==ka[3])D.stencilOpSeparate(e,l,k,f),ka[0]=e,ka[1]=l,ka[2]=k,ka[3]=f;e=va[0];l=va[1];
k=va[2];f=va[3];if(e!==ba[0]||l!==ba[1]||k!==ba[2]||f!==ba[3])D.stencilOpSeparate(e,l,k,f),ba[0]=e,ba[1]=l,ba[2]=k,ba[3]=f;e=t.scissor_enable;e!==A.scissor_enable&&(e?D.enable(3089):D.disable(3089),A.scissor_enable=e);e=V[0];l=V[1];k=V[2];f=V[3];if(e!==na[0]||l!==na[1]||k!==na[2]||f!==na[3])D.scissor(e,l,k,f),na[0]=e,na[1]=l,na[2]=k,na[3]=f;e=pa[0];l=pa[1];k=pa[2];f=pa[3];if(e!==za[0]||l!==za[1]||k!==za[2]||f!==za[3])D.viewport(e,l,k,f),za[0]=e,za[1]=l,za[2]=k,za[3]=f;A.dirty=!1}if(e=A.profile)b=
performance.now(),u.count+=a;D.useProgram(q.program);fa.setVAO(null);l=E.location;k=ga[l];k.buffer||D.enableVertexAttribArray(l);if(k.type!==n.dtype||2!==k.size||k.buffer!==n||!1!==k.normalized||0!==k.offset||0!==k.stride)D.bindBuffer(34962,n.buffer),D.vertexAttribPointer(l,2,n.dtype,!1,0,0),k.type=n.dtype,k.size=2,k.buffer=n,k.normalized=!1,k.offset=0,k.stride=0;l=m.call(this,F,void 0,g);ma(l)&&2===l.length||d.commandRaise(v,h);D.uniform2f(x.location,l[0],l[1]);g=w.call(this,F,void 0,g);"number"!==
typeof g&&d.commandRaise(B,h);D.uniform1f(J.location,g);D.uniform1i(H.location,r.bind());(l=U.elements)?D.bindBuffer(34963,l.buffer.buffer):fa.currentVAO&&(l=I.getElements(fa.currentVAO.elements))&&D.bindBuffer(34963,l.buffer.buffer);k=U.primitive;f=U.offset;for(g=0;g<a;++g)l?D.drawElements(k,3,l.type,f<<(l.type-5121>>1)):D.drawArrays(k,f,3);r.unbind();fa.setVAO(null);e&&(u.cpuTime+=performance.now()-b)}}}}},{}],25:[function(h,r,J){var a=h("./sorted-object-keys");r.exports=function(d,h){for(var u=
a(h),p=0;p<u.length;++p)d[u[p]]=h[u[p]];return d}},{"./sorted-object-keys":34}],26:[function(h,r,J){function a(a,d,h,b,f,c){for(var k=0;k<d;++k)for(var y=a[k],z=0;z<h;++z)for(var e=y[z],l=0;l<b;++l)f[c++]=e[l]}function d(h,p,n,b,f){for(var c=1,k=n+1;k<p.length;++k)c*=p[k];var y=p[n];if(4===p.length-n){var z=p[n+1],e=p[n+2];p=p[n+3];for(k=0;k<y;++k)a(h[k],z,e,p,b,f),f+=c}else for(k=0;k<y;++k)d(h[k],p,n+1,b,f),f+=c}var C=h("./pool");r.exports={shape:function(a){for(var d=[];a.length;a=a[0])d.push(a.length);
return d},flatten:function(h,p,n,b){var f=1;if(p.length)for(var c=0;c<p.length;++c)f*=p[c];else f=0;n=b||C.allocType(n,f);switch(p.length){case 0:break;case 1:b=p[0];for(p=0;p<b;++p)n[p]=h[p];break;case 2:b=p[0];p=p[1];for(c=f=0;c<b;++c)for(var k=h[c],y=0;y<p;++y)n[f++]=k[y];break;case 3:a(h,p[0],p[1],p[2],n,0);break;default:d(h,p,0,n,0)}return n}}},{"./pool":32}],27:[function(h,r,J){var a=h("./is-typed-array");r.exports=function(d){return Array.isArray(d)||a(d)}},{"./is-typed-array":30}],28:[function(h,
r,J){var a=h("./is-typed-array");r.exports=function(d){return!!d&&"object"===typeof d&&Array.isArray(d.shape)&&Array.isArray(d.stride)&&"number"===typeof d.offset&&d.shape.length===d.stride.length&&(Array.isArray(d.data)||a(d.data))}},{"./is-typed-array":30}],29:[function(h,r,J){r.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(h,r,J){r.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||
a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(h,r,J){r.exports=function(a,d){for(var h=Array(a),u=0;u<a;++u)h[u]=d(u);return h}},{}],32:[function(h,r,J){function a(a){var d,h;d=(65535<a)<<4;a>>>=d;h=(255<a)<<3;a>>>=h;d|=h;h=(15<a)<<2;a>>>=h;d|=h;h=(3<a)<<1;return d|h|a>>>h>>1}function d(){function d(b){a:{for(var f=16;268435456>=f;f*=16)if(b<=f){b=f;break a}b=0}f=n[a(b)>>2];return 0<f.length?f.pop():new ArrayBuffer(b)}
function h(b){n[a(b.byteLength)>>2].push(b)}var n=C(8,function(){return[]});return{alloc:d,free:h,allocType:function(a,f){var c=null;switch(a){case 5120:c=new Int8Array(d(f),0,f);break;case 5121:c=new Uint8Array(d(f),0,f);break;case 5122:c=new Int16Array(d(2*f),0,f);break;case 5123:c=new Uint16Array(d(2*f),0,f);break;case 5124:c=new Int32Array(d(4*f),0,f);break;case 5125:c=new Uint32Array(d(4*f),0,f);break;case 5126:c=new Float32Array(d(4*f),0,f);break;default:return null}return c.length!==f?c.subarray(0,
f):c},freeType:function(a){h(a.buffer)}}}var C=h("./loop");h=d();h.zero=d();r.exports=h},{"./loop":31}],33:[function(h,r,J){r.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(h,r,J){r.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(h,r,J){var a=h("./pool"),d=new Float32Array(1),
C=new Uint32Array(d.buffer);r.exports=function(h){for(var p=a.allocType(5123,h.length),n=0;n<h.length;++n)if(isNaN(h[n]))p[n]=65535;else if(Infinity===h[n])p[n]=31744;else if(-Infinity===h[n])p[n]=64512;else{d[0]=h[n];var b=C[0],f=b>>>31<<15,c=(b<<1>>>24)-127,b=b>>13&1023;p[n]=-24>c?f:-14>c?f+(b+1024>>-14-c):15<c?f+31744:f+(c+15<<10)+b}return p}},{"./pool":32}],36:[function(h,r,J){var a=h("./sorted-object-keys");r.exports=function(d){return a(d).map(function(a){return d[a]})}},{"./sorted-object-keys":34}],
37:[function(h,r,J){function a(a,d,c){function k(){var e=window.innerWidth,l=window.innerHeight;a!==document.body&&(l=h.getBoundingClientRect(),e=l.right-l.left,l=l.bottom-l.top);h.width=c*e;h.height=c*l}var h=document.createElement("canvas");n(h.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(h);a===document.body&&(h.style.position="absolute",n(a.style,{margin:0,padding:0}));var z;a!==document.body&&"function"===typeof ResizeObserver?(z=new ResizeObserver(function(){setTimeout(k)}),
z.observe(a)):window.addEventListener("resize",k,!1);k();return{canvas:h,onDestroy:function(){z?z.disconnect():window.removeEventListener("resize",k);a.removeChild(h)}}}function d(a,d){function c(c){try{return a.getContext(c,d)}catch(h){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function C(a){if("string"===typeof a)return a.split();p(Array.isArray(a),"invalid extension array");return a}function u(a){return"string"===typeof a?(p("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(a)):a}var p=h("./util/check"),n=h("./util/extend");r.exports=function(b){var f=b||{},c,k,h,n;b={};var e=[],l=[],g="undefined"===typeof window?1:window.devicePixelRatio,q=!1,m=function(c){c&&p.raise(c)},v=function(){};"string"===typeof f?(p("undefined"!==typeof document,"selector queries only supported in DOM environments"),c=document.querySelector(f),p(c,"invalid query string for element")):"object"===typeof f?"string"===typeof f.nodeName&&"function"===typeof f.appendChild&&
"function"===typeof f.getBoundingClientRect?c=f:"function"===typeof f.drawArrays||"function"===typeof f.drawElements?(n=f,h=n.canvas):(p.constructor(f),"gl"in f?n=f.gl:"canvas"in f?h=u(f.canvas):"container"in f&&(k=u(f.container)),"attributes"in f&&(b=f.attributes,p.type(b,"object","invalid context attributes")),"extensions"in f&&(e=C(f.extensions)),"optionalExtensions"in f&&(l=C(f.optionalExtensions)),"onDone"in f&&(p.type(f.onDone,"function","invalid or missing onDone callback"),m=f.onDone),"profile"in
f&&(q=!!f.profile),"pixelRatio"in f&&(g=+f.pixelRatio,p(0<g,"invalid pixel ratio"))):p.raise("invalid arguments to regl");c&&("canvas"===c.nodeName.toLowerCase()?h=c:k=c);if(!n){if(!h){p("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");c=a(k||document.body,m,g);if(!c)return null;h=c.canvas;v=c.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);n=d(h,b)}return n?{gl:n,canvas:h,container:k,extensions:e,optionalExtensions:l,pixelRatio:g,
profile:q,onDone:m,onDestroy:v}:(v(),m("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(h,r,J){var a=h("element-size");r.exports=function(h,u,p){function n(){var f=n.parent||h.parentNode;if("function"===typeof f)var c=f(d)||d,f=c[0],c=c[1];else f&&f!==document.body?(c=a(f),f=c[0]|0,c=c[1]|0):(f=window.innerWidth,c=window.innerHeight);b?(h.setAttribute("width",f*n.scale+"px"),h.setAttribute("height",
c*n.scale+"px")):(h.width=f*n.scale,h.height=c*n.scale);h.style.width=f+"px";h.style.height=c+"px";return n}var b="SVG"===h.nodeName.toUpperCase();h.style.position=h.style.position||"absolute";h.style.top=0;h.style.left=0;n.scale=parseFloat(p||1);n.parent=u;return n()};var d=new Float32Array(2)},{"element-size":42}],39:[function(h,r,J){var a=h("orbit-camera"),d=h("scroll-speed"),C=h("mouse-position"),u=h("mouse-pressed"),p=h("key-pressed");r.exports=function(h,b){b=b||{};b.pan=!1!==b.pan;b.scale=
!1!==b.scale;b.rotate=!1!==b.rotate;var f=d(h,b.scale),c=u(h,b.rotate),k=C(h),y=a([0,10,30],[0,0,0],[0,1,0]);y.tick=function(){var a=p("<control>")||p("<alt>"),e=p("<shift>"),l=h.height,g=h.width;b.rotate&&c.left&&!a&&!e&&y.rotate([k.x/g-.5,k.y/l-.5],[k.prevX/g-.5,k.prevY/l-.5]);(b.pan&&c.right||c.left&&a&&!e)&&y.pan([1*(k.x-k.prevX)/g,1*(k.y-k.prevY)/l]);b.scale&&f[1]&&(y.distance*=Math.exp(f[1]/l));if(b.scale&&(c.middle||c.left&&!a&&e)){a=k.y-k.prevY;if(!a)return;y.distance*=Math.exp(a/l)}f.flush();
k.flush()};return y}},{"key-pressed":75,"mouse-position":40,"mouse-pressed":41,"orbit-camera":76,"scroll-speed":79}],40:[function(h,r,J){var a=h("events/");r.exports=function(d,h){var u=new a;u.x=0;u.y=0;u.prevX=0;u.prevY=0;u.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===typeof window)return u;h=h||d||window;d=d||document.body;h.addEventListener("mousemove",d===document.body||d===window?function(a){u.prevX=u.x;u.prevY=u.y;u.x=a.clientX;u.y=a.clientY;u.emit("move",a)}:function(a){u.prevX=
u.x;u.prevY=u.y;var h=d.getBoundingClientRect();u.x=a.clientX-h.left;u.y=a.clientY-h.top;u.emit("move",a)},!1);return u}},{"events/":43}],41:[function(h,r,J){var a=h("events/"),d=["left","middle","right"];r.exports=function(h,u){function p(a){b.right=!1;b[d[a.button]]=!0;b.emit("down",a);if(u){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function n(a){b.right=!1;b[d[a.button]]=!1;b.emit("up",a);u&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var b=new a;b.left=
!1;b.right=!1;b.middle=!1;"undefined"!==typeof window&&(h=h||window,h.addEventListener("mousedown",p,!1),h.addEventListener("mouseup",n,!1),u&&h.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return b}},{"events/":43}],42:[function(h,r,J){function a(a){return parseFloat(a)||0}r.exports=function(d){if(d===window||d===document.body)return[window.innerWidth,window.innerHeight];if(!d.parentNode){var h=!0;document.body.appendChild(d)}var u=d.getBoundingClientRect(),
p=getComputedStyle(d),n=(u.height|0)+a(p.getPropertyValue("margin-top"))+a(p.getPropertyValue("margin-bottom")),u=(u.width|0)+a(p.getPropertyValue("margin-left"))+a(p.getPropertyValue("margin-right"));h&&document.body.removeChild(d);return[u,n]}},{}],43:[function(h,r,J){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function d(a){return"function"===typeof a}function C(a){return"object"===typeof a&&null!==a}r.exports=a;a.EventEmitter=a;a.prototype._events=
void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var h,n,b,f;this._events||(this._events={});if("error"===a&&(!this._events.error||C(this._events.error)&&!this._events.error.length)){h=arguments[1];if(h instanceof Error)throw h;n=Error('Uncaught, unspecified "error" event. ('+h+")");n.context=h;throw n;
}n=this._events[a];if(void 0===n)return!1;if(d(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),n.apply(this,h)}else if(C(n))for(h=Array.prototype.slice.call(arguments,1),f=n.slice(),n=f.length,b=0;b<n;b++)f[b].apply(this,h);return!0};a.prototype.addListener=function(h,p){var n;if(!d(p))throw TypeError("listener must be a function");this._events||(this._events=
{});this._events.newListener&&this.emit("newListener",h,d(p.listener)?p.listener:p);this._events[h]?C(this._events[h])?this._events[h].push(p):this._events[h]=[this._events[h],p]:this._events[h]=p;C(this._events[h])&&!this._events[h].warned&&(n=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<n&&this._events[h].length>n&&(this._events[h].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",
this._events[h].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,h){function n(){this.removeListener(a,n);b||(b=!0,h.apply(this,arguments))}if(!d(h))throw TypeError("listener must be a function");var b=!1;n.listener=h;this.on(a,n);return this};a.prototype.removeListener=function(a,h){var n,b,f;if(!d(h))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;n=this._events[a];
f=n.length;b=-1;if(n===h||d(n.listener)&&n.listener===h)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,h);else if(C(n)){for(;0<f--;)if(n[f]===h||n[f].listener&&n[f].listener===h){b=f;break}if(0>b)return this;1===n.length?(n.length=0,delete this._events[a]):n.splice(b,1);this._events.removeListener&&this.emit("removeListener",a,h)}return this};a.prototype.removeAllListeners=function(a){var h;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?
this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(h in this._events)"removeListener"!==h&&this.removeAllListeners(h);this.removeAllListeners("removeListener");this._events={};return this}h=this._events[a];if(d(h))this.removeListener(a,h);else if(h)for(;h.length;)this.removeListener(a,h[h.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():
[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(d(a))return 1;if(a)return a.length}return 0};a.listenerCount=function(a,d){return a.listenerCount(d)}},{}],44:[function(h,r,J){r.exports=function(a,d){var h=d[0],u=d[1],p=d[2],n=d[3],b=d[4],f=d[5],c=d[6],k=d[7],y=d[8],z=d[9],e=d[10],l=d[11],g=d[12],q=d[13],m=d[14],v=d[15];a[0]=f*(e*v-l*m)-z*(c*v-k*m)+q*(c*l-k*e);a[1]=-(u*(e*v-l*m)-z*(p*v-n*m)+q*(p*l-n*e));a[2]=u*(c*v-k*m)-f*(p*v-n*m)+q*(p*k-n*c);a[3]=-(u*(c*l-k*e)-f*(p*
l-n*e)+z*(p*k-n*c));a[4]=-(b*(e*v-l*m)-y*(c*v-k*m)+g*(c*l-k*e));a[5]=h*(e*v-l*m)-y*(p*v-n*m)+g*(p*l-n*e);a[6]=-(h*(c*v-k*m)-b*(p*v-n*m)+g*(p*k-n*c));a[7]=h*(c*l-k*e)-b*(p*l-n*e)+y*(p*k-n*c);a[8]=b*(z*v-l*q)-y*(f*v-k*q)+g*(f*l-k*z);a[9]=-(h*(z*v-l*q)-y*(u*v-n*q)+g*(u*l-n*z));a[10]=h*(f*v-k*q)-b*(u*v-n*q)+g*(u*k-n*f);a[11]=-(h*(f*l-k*z)-b*(u*l-n*z)+y*(u*k-n*f));a[12]=-(b*(z*m-e*q)-y*(f*m-c*q)+g*(f*e-c*z));a[13]=h*(z*m-e*q)-y*(u*m-p*q)+g*(u*e-p*z);a[14]=-(h*(f*m-c*q)-b*(u*m-p*q)+g*(u*c-p*f));a[15]=h*
(f*e-c*z)-b*(u*e-p*z)+y*(u*c-p*f);return a}},{}],45:[function(h,r,J){r.exports=function(a){var d=new Float32Array(16);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d}},{}],46:[function(h,r,J){r.exports=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=
d[14];a[15]=d[15];return a}},{}],47:[function(h,r,J){r.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(h,r,J){r.exports=function(a){var d=a[0],h=a[1],u=a[2],p=a[3],n=a[4],b=a[5],f=a[6],c=a[7],k=a[8],y=a[9],z=a[10],e=a[11],l=a[12],g=a[13],q=a[14];a=a[15];return(d*b-h*n)*(z*a-e*q)-(d*f-u*n)*(y*a-e*g)+(d*c-p*n)*(y*q-z*g)+(h*f-u*b)*(k*a-e*l)-(h*c-p*b)*(k*q-z*
l)+(u*c-p*f)*(k*g-y*l)}},{}],49:[function(h,r,J){r.exports=function(a,d){var h=d[0],u=d[1],p=d[2],n=d[3],b=h+h,f=u+u,c=p+p,h=h*b,k=u*b,u=u*f,y=p*b,z=p*f,p=p*c,b=n*b,f=n*f,n=n*c;a[0]=1-u-p;a[1]=k+n;a[2]=y-f;a[3]=0;a[4]=k-n;a[5]=1-h-p;a[6]=z+b;a[7]=0;a[8]=y+f;a[9]=z-b;a[10]=1-h-u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(h,r,J){r.exports=function(a,d,h){var u,p,n=h[0],b=h[1];h=h[2];u=Math.sqrt(n*n+b*b+h*h);if(1E-6>Math.abs(u))return null;u=1/u;n*=u;b*=u;h*=u;u=Math.sin(d);
d=Math.cos(d);p=1-d;a[0]=n*n*p+d;a[1]=b*n*p+h*u;a[2]=h*n*p-b*u;a[3]=0;a[4]=n*b*p-h*u;a[5]=b*b*p+d;a[6]=h*b*p+n*u;a[7]=0;a[8]=n*h*p+b*u;a[9]=b*h*p-n*u;a[10]=h*h*p+d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(h,r,J){r.exports=function(a,d,h){var u=d[0],p=d[1],n=d[2],b=d[3],f=u+u,c=p+p,k=n+n;d=u*f;var y=u*c,u=u*k,z=p*c,p=p*k,n=n*k,f=b*f,c=b*c,b=b*k;a[0]=1-(z+n);a[1]=y+b;a[2]=u-c;a[3]=0;a[4]=y-b;a[5]=1-(d+n);a[6]=p+f;a[7]=0;a[8]=u+c;a[9]=p-f;a[10]=1-(d+z);a[11]=0;a[12]=h[0];a[13]=
h[1];a[14]=h[2];a[15]=1;return a}},{}],52:[function(h,r,J){r.exports=function(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(h,r,J){r.exports=function(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}},{}],54:[function(h,r,J){r.exports=function(a,d){var h=Math.sin(d),u=Math.cos(d);a[0]=1;a[1]=0;
a[2]=0;a[3]=0;a[4]=0;a[5]=u;a[6]=h;a[7]=0;a[8]=0;a[9]=-h;a[10]=u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(h,r,J){r.exports=function(a,d){var h=Math.sin(d),u=Math.cos(d);a[0]=u;a[1]=0;a[2]=-h;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=h;a[9]=0;a[10]=u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],56:[function(h,r,J){r.exports=function(a,d){var h=Math.sin(d),u=Math.cos(d);a[0]=u;a[1]=h;a[2]=0;a[3]=0;a[4]=-h;a[5]=u;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;
a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(h,r,J){r.exports=function(a,d,h,u,p,n,b){var f=1/(h-d),c=1/(p-u),k=1/(n-b);a[0]=2*n*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*n*c;a[6]=0;a[7]=0;a[8]=(h+d)*f;a[9]=(p+u)*c;a[10]=(b+n)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=b*n*2*k;a[15]=0;return a}},{}],58:[function(h,r,J){r.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(h,r,J){r.exports={create:h("./create"),
clone:h("./clone"),copy:h("./copy"),identity:h("./identity"),transpose:h("./transpose"),invert:h("./invert"),adjoint:h("./adjoint"),determinant:h("./determinant"),multiply:h("./multiply"),translate:h("./translate"),scale:h("./scale"),rotate:h("./rotate"),rotateX:h("./rotateX"),rotateY:h("./rotateY"),rotateZ:h("./rotateZ"),fromRotation:h("./fromRotation"),fromRotationTranslation:h("./fromRotationTranslation"),fromScaling:h("./fromScaling"),fromTranslation:h("./fromTranslation"),fromXRotation:h("./fromXRotation"),
fromYRotation:h("./fromYRotation"),fromZRotation:h("./fromZRotation"),fromQuat:h("./fromQuat"),frustum:h("./frustum"),perspective:h("./perspective"),perspectiveFromFieldOfView:h("./perspectiveFromFieldOfView"),ortho:h("./ortho"),lookAt:h("./lookAt"),str:h("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,
"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(h,r,J){r.exports=function(a,d){var h=d[0],u=d[1],p=d[2],n=d[3],b=d[4],f=d[5],c=d[6],k=d[7],y=d[8],z=d[9],e=d[10],l=d[11],g=d[12],q=d[13],m=d[14],v=d[15],w=h*f-u*b,B=h*c-p*b,r=h*k-n*b,x=u*c-p*f,E=u*k-n*f,J=p*k-n*c,H=y*q-z*g,ga=y*
m-e*g,F=y*v-l*g,A=z*m-e*q,U=z*v-l*q,I=e*v-l*m,G=w*I-B*U+r*A+x*F-E*ga+J*H;if(!G)return null;G=1/G;a[0]=(f*I-c*U+k*A)*G;a[1]=(p*U-u*I-n*A)*G;a[2]=(q*J-m*E+v*x)*G;a[3]=(e*E-z*J-l*x)*G;a[4]=(c*F-b*I-k*ga)*G;a[5]=(h*I-p*F+n*ga)*G;a[6]=(m*r-g*J-v*B)*G;a[7]=(y*J-e*r+l*B)*G;a[8]=(b*U-f*F+k*H)*G;a[9]=(u*F-h*U-n*H)*G;a[10]=(g*E-q*r+v*w)*G;a[11]=(z*r-y*E-l*w)*G;a[12]=(f*ga-b*A-c*H)*G;a[13]=(h*A-u*ga+p*H)*G;a[14]=(q*B-g*x-m*w)*G;a[15]=(y*x-z*B+e*w)*G;return a}},{}],61:[function(h,r,J){var a=h("./identity");r.exports=
function(d,h,u,p){var n,b,f,c,k,y,z,e,l=h[0],g=h[1];h=h[2];f=p[0];c=p[1];b=p[2];z=u[0];p=u[1];n=u[2];if(1E-6>Math.abs(l-z)&&1E-6>Math.abs(g-p)&&1E-6>Math.abs(h-n))return a(d);u=l-z;p=g-p;z=h-n;e=1/Math.sqrt(u*u+p*p+z*z);u*=e;p*=e;z*=e;n=c*z-b*p;b=b*u-f*z;f=f*p-c*u;(e=Math.sqrt(n*n+b*b+f*f))?(e=1/e,n*=e,b*=e,f*=e):f=b=n=0;c=p*f-z*b;k=z*n-u*f;y=u*b-p*n;(e=Math.sqrt(c*c+k*k+y*y))?(e=1/e,c*=e,k*=e,y*=e):y=k=c=0;d[0]=n;d[1]=c;d[2]=u;d[3]=0;d[4]=b;d[5]=k;d[6]=p;d[7]=0;d[8]=f;d[9]=y;d[10]=z;d[11]=0;d[12]=
-(n*l+b*g+f*h);d[13]=-(c*l+k*g+y*h);d[14]=-(u*l+p*g+z*h);d[15]=1;return d}},{"./identity":58}],62:[function(h,r,J){r.exports=function(a,d,h){var u=d[0],p=d[1],n=d[2],b=d[3],f=d[4],c=d[5],k=d[6],y=d[7],z=d[8],e=d[9],l=d[10],g=d[11],q=d[12],m=d[13],v=d[14];d=d[15];var w=h[0],B=h[1],r=h[2],x=h[3];a[0]=w*u+B*f+r*z+x*q;a[1]=w*p+B*c+r*e+x*m;a[2]=w*n+B*k+r*l+x*v;a[3]=w*b+B*y+r*g+x*d;w=h[4];B=h[5];r=h[6];x=h[7];a[4]=w*u+B*f+r*z+x*q;a[5]=w*p+B*c+r*e+x*m;a[6]=w*n+B*k+r*l+x*v;a[7]=w*b+B*y+r*g+x*d;w=h[8];B=h[9];
r=h[10];x=h[11];a[8]=w*u+B*f+r*z+x*q;a[9]=w*p+B*c+r*e+x*m;a[10]=w*n+B*k+r*l+x*v;a[11]=w*b+B*y+r*g+x*d;w=h[12];B=h[13];r=h[14];x=h[15];a[12]=w*u+B*f+r*z+x*q;a[13]=w*p+B*c+r*e+x*m;a[14]=w*n+B*k+r*l+x*v;a[15]=w*b+B*y+r*g+x*d;return a}},{}],63:[function(h,r,J){r.exports=function(a,d,h,u,p,n,b){var f=1/(d-h),c=1/(u-p),k=1/(n-b);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*k;a[11]=0;a[12]=(d+h)*f;a[13]=(p+u)*c;a[14]=(b+n)*k;a[15]=1;return a}},{}],64:[function(h,r,
J){r.exports=function(a,d,h,u,p){d=1/Math.tan(d/2);var n=1/(u-p);a[0]=d/h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(p+u)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*p*u*n;a[15]=0;return a}},{}],65:[function(h,r,J){r.exports=function(a,d,h,u){var p=Math.tan(d.upDegrees*Math.PI/180),n=Math.tan(d.downDegrees*Math.PI/180),b=Math.tan(d.leftDegrees*Math.PI/180);d=Math.tan(d.rightDegrees*Math.PI/180);var f=2/(b+d),c=2/(p+n);a[0]=f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=
-((b-d)*f*.5);a[9]=(p-n)*c*.5;a[10]=u/(h-u);a[11]=-1;a[12]=0;a[13]=0;a[14]=u*h/(h-u);a[15]=0;return a}},{}],66:[function(h,r,J){r.exports=function(a,d,h,u){var p=u[0],n=u[1];u=u[2];var b=Math.sqrt(p*p+n*n+u*u),f,c,k,y,z,e,l,g,q,m,v,w,B,r,x,E,J,H,ga,F;if(1E-6>Math.abs(b))return null;b=1/b;p*=b;n*=b;u*=b;f=Math.sin(h);c=Math.cos(h);k=1-c;h=d[0];b=d[1];y=d[2];z=d[3];e=d[4];l=d[5];g=d[6];q=d[7];m=d[8];v=d[9];w=d[10];B=d[11];r=p*p*k+c;x=n*p*k+u*f;E=u*p*k-n*f;J=p*n*k-u*f;H=n*n*k+c;ga=u*n*k+p*f;F=p*u*k+
n*f;p=n*u*k-p*f;n=u*u*k+c;a[0]=h*r+e*x+m*E;a[1]=b*r+l*x+v*E;a[2]=y*r+g*x+w*E;a[3]=z*r+q*x+B*E;a[4]=h*J+e*H+m*ga;a[5]=b*J+l*H+v*ga;a[6]=y*J+g*H+w*ga;a[7]=z*J+q*H+B*ga;a[8]=h*F+e*p+m*n;a[9]=b*F+l*p+v*n;a[10]=y*F+g*p+w*n;a[11]=z*F+q*p+B*n;d!==a&&(a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a}},{}],67:[function(h,r,J){r.exports=function(a,d,h){var u=Math.sin(h);h=Math.cos(h);var p=d[4],n=d[5],b=d[6],f=d[7],c=d[8],k=d[9],y=d[10],z=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=
d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[4]=p*h+c*u;a[5]=n*h+k*u;a[6]=b*h+y*u;a[7]=f*h+z*u;a[8]=c*h-p*u;a[9]=k*h-n*u;a[10]=y*h-b*u;a[11]=z*h-f*u;return a}},{}],68:[function(h,r,J){r.exports=function(a,d,h){var u=Math.sin(h);h=Math.cos(h);var p=d[0],n=d[1],b=d[2],f=d[3],c=d[8],k=d[9],y=d[10],z=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=p*h-c*u;a[1]=n*h-k*u;a[2]=b*h-y*u;a[3]=f*h-z*u;a[8]=p*u+c*h;a[9]=n*u+k*h;a[10]=b*u+y*h;a[11]=f*
u+z*h;return a}},{}],69:[function(h,r,J){r.exports=function(a,d,h){var u=Math.sin(h);h=Math.cos(h);var p=d[0],n=d[1],b=d[2],f=d[3],c=d[4],k=d[5],y=d[6],z=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=p*h+c*u;a[1]=n*h+k*u;a[2]=b*h+y*u;a[3]=f*h+z*u;a[4]=c*h-p*u;a[5]=k*h-n*u;a[6]=y*h-b*u;a[7]=z*h-f*u;return a}},{}],70:[function(h,r,J){r.exports=function(a,d,h){var u=h[0],p=h[1];h=h[2];a[0]=d[0]*u;a[1]=d[1]*u;a[2]=d[2]*u;a[3]=d[3]*u;a[4]=
d[4]*p;a[5]=d[5]*p;a[6]=d[6]*p;a[7]=d[7]*p;a[8]=d[8]*h;a[9]=d[9]*h;a[10]=d[10]*h;a[11]=d[11]*h;a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a}},{}],71:[function(h,r,J){r.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(h,r,J){r.exports=function(a,d,h){var u=h[0],p=h[1];h=h[2];var n,b,f,c,k,y,z,e,l,g,q,m;d===a?(a[12]=d[0]*
u+d[4]*p+d[8]*h+d[12],a[13]=d[1]*u+d[5]*p+d[9]*h+d[13],a[14]=d[2]*u+d[6]*p+d[10]*h+d[14],a[15]=d[3]*u+d[7]*p+d[11]*h+d[15]):(n=d[0],b=d[1],f=d[2],c=d[3],k=d[4],y=d[5],z=d[6],e=d[7],l=d[8],g=d[9],q=d[10],m=d[11],a[0]=n,a[1]=b,a[2]=f,a[3]=c,a[4]=k,a[5]=y,a[6]=z,a[7]=e,a[8]=l,a[9]=g,a[10]=q,a[11]=m,a[12]=n*u+k*p+l*h+d[12],a[13]=b*u+y*p+g*h+d[13],a[14]=f*u+z*p+q*h+d[14],a[15]=c*u+e*p+m*h+d[15]);return a}},{}],73:[function(h,r,J){r.exports=function(a,d){if(a===d){var h=d[1],u=d[2],p=d[3],n=d[6],b=d[7],
f=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=h;a[6]=d[9];a[7]=d[13];a[8]=u;a[9]=n;a[11]=d[14];a[12]=p;a[13]=b;a[14]=f}else a[0]=d[0],a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a}},{}],74:[function(h,r,J){!function(a,d){if("object"==typeof J&&"object"==typeof r)r.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var h=d(),u;for(u in h)("object"==typeof J?
J:a)[u]=h[u]}}("undefined"!=typeof self?self:this,function(){return function(a){function d(u){if(h[u])return h[u].exports;var p=h[u]={i:u,l:!1,exports:{}};return a[u].call(p.exports,p,p.exports,d),p.l=!0,p.exports}var h={};return d.m=a,d.c=h,d.d=function(a,h,n){d.o(a,h)||Object.defineProperty(a,h,{enumerable:!0,get:n})},d.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,h){if((1&h&&(a=d(a)),8&h)||4&h&&"object"==typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&h&&"string"!=typeof a)for(var b in a)d.d(n,b,function(b){return a[b]}.bind(null,b));return n},d.n=function(a){var h=a&&a.__esModule?function(){return a["default"]}:function(){return a};return d.d(h,"a",h),h},d.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,
d)},d.p="",d(d.s=10)}([function(a,d,h){Object.defineProperty(d,"__esModule",{value:!0});d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};d.toRadian=function(a){return a*p};d.equals=function(a,b){return Math.abs(a-b)<=r*Math.max(1,Math.abs(a),Math.abs(b))};var r=d.EPSILON=1E-6;d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;var p=Math.PI/180},function(a,d,h){function r(){var a=new z.ARRAY_TYPE(4);return z.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0),
a}function p(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a}function n(a,c,b){return a[0]=c[0]*b[0],a[1]=c[1]*b[1],a[2]=c[2]*b[2],a[3]=c[3]*b[3],a}function b(a,c,b){return a[0]=c[0]/b[0],a[1]=c[1]/b[1],a[2]=c[2]/b[2],a[3]=c[3]/b[3],a}function f(a,c){var b=c[0]-a[0],k=c[1]-a[1],d=c[2]-a[2],f=c[3]-a[3];return Math.sqrt(b*b+k*k+d*d+f*f)}function c(a,c){var b=c[0]-a[0],k=c[1]-a[1],d=c[2]-a[2],f=c[3]-a[3];return b*b+k*k+d*d+f*f}function k(a){var c=a[0],b=a[1],k=a[2];a=a[3];
return Math.sqrt(c*c+b*b+k*k+a*a)}function y(a){var c=a[0],b=a[1],k=a[2];a=a[3];return c*c+b*b+k*k+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(a){var c=new z.ARRAY_TYPE(4);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};d.fromValues=function(a,c,b,k){var d=new z.ARRAY_TYPE(4);return d[0]=a,d[1]=c,d[2]=b,d[3]=k,d};d.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};d.set=function(a,
c,b,k,d){return a[0]=c,a[1]=b,a[2]=k,a[3]=d,a};d.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a};d.subtract=p;d.multiply=n;d.divide=b;d.ceil=function(a,c){return a[0]=Math.ceil(c[0]),a[1]=Math.ceil(c[1]),a[2]=Math.ceil(c[2]),a[3]=Math.ceil(c[3]),a};d.floor=function(a,c){return a[0]=Math.floor(c[0]),a[1]=Math.floor(c[1]),a[2]=Math.floor(c[2]),a[3]=Math.floor(c[3]),a};d.min=function(a,c,b){return a[0]=Math.min(c[0],b[0]),a[1]=Math.min(c[1],b[1]),a[2]=Math.min(c[2],
b[2]),a[3]=Math.min(c[3],b[3]),a};d.max=function(a,c,b){return a[0]=Math.max(c[0],b[0]),a[1]=Math.max(c[1],b[1]),a[2]=Math.max(c[2],b[2]),a[3]=Math.max(c[3],b[3]),a};d.round=function(a,c){return a[0]=Math.round(c[0]),a[1]=Math.round(c[1]),a[2]=Math.round(c[2]),a[3]=Math.round(c[3]),a};d.scale=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a};d.scaleAndAdd=function(a,c,b,k){return a[0]=c[0]+b[0]*k,a[1]=c[1]+b[1]*k,a[2]=c[2]+b[2]*k,a[3]=c[3]+b[3]*k,a};d.distance=f;d.squaredDistance=
c;d.length=k;d.squaredLength=y;d.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a[3]=-c[3],a};d.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a[3]=1/c[3],a};d.normalize=function(a,c){var b=c[0],k=c[1],d=c[2],f=c[3],h=b*b+k*k+d*d+f*f;0<h&&(h=1/Math.sqrt(h),a[0]=b*h,a[1]=k*h,a[2]=d*h,a[3]=f*h);return a};d.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};d.lerp=function(a,c,b,k){var d=c[0],f=c[1],h=c[2];c=c[3];return a[0]=d+k*(b[0]-d),a[1]=f+k*(b[1]-
f),a[2]=h+k*(b[2]-h),a[3]=c+k*(b[3]-c),a};d.random=function(a,c){var b,k,d,f,h,n;c=c||1;do b=2*z.RANDOM()-1,k=2*z.RANDOM()-1,h=b*b+k*k;while(1<=h);do d=2*z.RANDOM()-1,f=2*z.RANDOM()-1,n=d*d+f*f;while(1<=n);h=Math.sqrt((1-h)/n);return a[0]=c*b,a[1]=c*k,a[2]=c*d*h,a[3]=c*f*h,a};d.transformMat4=function(a,c,b){var k=c[0],d=c[1],f=c[2];c=c[3];return a[0]=b[0]*k+b[4]*d+b[8]*f+b[12]*c,a[1]=b[1]*k+b[5]*d+b[9]*f+b[13]*c,a[2]=b[2]*k+b[6]*d+b[10]*f+b[14]*c,a[3]=b[3]*k+b[7]*d+b[11]*f+b[15]*c,a};d.transformQuat=
function(a,c,b){var k=c[0],d=c[1],f=c[2],h=b[0],n=b[1],y=b[2];b=b[3];var z=b*k+n*f-y*d,p=b*d+y*k-h*f,r=b*f+h*d-n*k,k=-h*k-n*d-y*f;return a[0]=z*b+k*-h+p*-y-r*-n,a[1]=p*b+k*-n+r*-h-z*-y,a[2]=r*b+k*-y+z*-n-p*-h,a[3]=c[3],a};d.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};d.equals=function(a,c){var b=a[0],k=a[1],d=a[2],f=a[3],h=c[0],n=c[1],y=c[2],x=c[3];return Math.abs(b-h)<=z.EPSILON*Math.max(1,
Math.abs(b),Math.abs(h))&&Math.abs(k-n)<=z.EPSILON*Math.max(1,Math.abs(k),Math.abs(n))&&Math.abs(d-y)<=z.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(f-x)<=z.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))};var z=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(h(0));d.sub=p;d.mul=n;d.div=b;d.dist=f;d.sqrDist=c;d.len=k;d.sqrLen=y;d.forEach=function(){var a=r();return function(c,b,k,d,f,h){var n=
void 0,y=void 0;b||(b=4);k||(k=0);y=d?Math.min(d*b+k,c.length):c.length;for(n=k;n<y;n+=b)a[0]=c[n],a[1]=c[n+1],a[2]=c[n+2],a[3]=c[n+3],f(a,a,h),c[n]=a[0],c[n+1]=a[1],c[n+2]=a[2],c[n+3]=a[3];return c}}()},function(a,d,h){function r(){var a=new g.ARRAY_TYPE(3);return g.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function p(a){var c=a[0],e=a[1];a=a[2];return Math.sqrt(c*c+e*e+a*a)}function n(a,c,e){var b=new g.ARRAY_TYPE(3);return b[0]=a,b[1]=c,b[2]=e,b}function b(a,c,e){return a[0]=c[0]-e[0],
a[1]=c[1]-e[1],a[2]=c[2]-e[2],a}function f(a,c,e){return a[0]=c[0]*e[0],a[1]=c[1]*e[1],a[2]=c[2]*e[2],a}function c(a,c,e){return a[0]=c[0]/e[0],a[1]=c[1]/e[1],a[2]=c[2]/e[2],a}function k(a,c){var e=c[0]-a[0],b=c[1]-a[1],l=c[2]-a[2];return Math.sqrt(e*e+b*b+l*l)}function y(a,c){var e=c[0]-a[0],b=c[1]-a[1],l=c[2]-a[2];return e*e+b*b+l*l}function z(a){var c=a[0],e=a[1];a=a[2];return c*c+e*e+a*a}function e(a,c){var e=c[0],b=c[1],l=c[2],e=e*e+b*b+l*l;return 0<e&&(e=1/Math.sqrt(e),a[0]=c[0]*e,a[1]=c[1]*
e,a[2]=c[2]*e),a}function l(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(a){var c=new g.ARRAY_TYPE(3);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c};d.length=p;d.fromValues=n;d.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a};d.set=function(a,c,e,b){return a[0]=c,a[1]=e,a[2]=b,a};d.add=function(a,c,e){return a[0]=c[0]+e[0],a[1]=c[1]+e[1],a[2]=c[2]+e[2],a};
d.subtract=b;d.multiply=f;d.divide=c;d.ceil=function(a,c){return a[0]=Math.ceil(c[0]),a[1]=Math.ceil(c[1]),a[2]=Math.ceil(c[2]),a};d.floor=function(a,c){return a[0]=Math.floor(c[0]),a[1]=Math.floor(c[1]),a[2]=Math.floor(c[2]),a};d.min=function(a,c,e){return a[0]=Math.min(c[0],e[0]),a[1]=Math.min(c[1],e[1]),a[2]=Math.min(c[2],e[2]),a};d.max=function(a,c,e){return a[0]=Math.max(c[0],e[0]),a[1]=Math.max(c[1],e[1]),a[2]=Math.max(c[2],e[2]),a};d.round=function(a,c){return a[0]=Math.round(c[0]),a[1]=Math.round(c[1]),
a[2]=Math.round(c[2]),a};d.scale=function(a,c,e){return a[0]=c[0]*e,a[1]=c[1]*e,a[2]=c[2]*e,a};d.scaleAndAdd=function(a,c,e,b){return a[0]=c[0]+e[0]*b,a[1]=c[1]+e[1]*b,a[2]=c[2]+e[2]*b,a};d.distance=k;d.squaredDistance=y;d.squaredLength=z;d.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a};d.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a};d.normalize=e;d.dot=l;d.cross=function(a,c,e){var b=c[0],l=c[1];c=c[2];var g=e[0],k=e[1];e=e[2];return a[0]=l*e-c*k,a[1]=c*g-b*
e,a[2]=b*k-l*g,a};d.lerp=function(a,c,e,b){var l=c[0],g=c[1];c=c[2];return a[0]=l+b*(e[0]-l),a[1]=g+b*(e[1]-g),a[2]=c+b*(e[2]-c),a};d.hermite=function(a,c,e,b,l,g){var k=g*g,d=k*(2*g-3)+1,f=k*(g-2)+g,h=k*(g-1);g=k*(3-2*g);return a[0]=c[0]*d+e[0]*f+b[0]*h+l[0]*g,a[1]=c[1]*d+e[1]*f+b[1]*h+l[1]*g,a[2]=c[2]*d+e[2]*f+b[2]*h+l[2]*g,a};d.bezier=function(a,c,e,b,l,g){var k=1-g,d=k*k,f=g*g,h=d*k,d=3*g*d,k=3*f*k;g*=f;return a[0]=c[0]*h+e[0]*d+b[0]*k+l[0]*g,a[1]=c[1]*h+e[1]*d+b[1]*k+l[1]*g,a[2]=c[2]*h+e[2]*
d+b[2]*k+l[2]*g,a};d.random=function(a,c){c=c||1;var e=2*g.RANDOM()*Math.PI,b=2*g.RANDOM()-1,l=Math.sqrt(1-b*b)*c;return a[0]=Math.cos(e)*l,a[1]=Math.sin(e)*l,a[2]=b*c,a};d.transformMat4=function(a,c,e){var b=c[0],g=c[1];c=c[2];var l=e[3]*b+e[7]*g+e[11]*c+e[15];return l=l||1,a[0]=(e[0]*b+e[4]*g+e[8]*c+e[12])/l,a[1]=(e[1]*b+e[5]*g+e[9]*c+e[13])/l,a[2]=(e[2]*b+e[6]*g+e[10]*c+e[14])/l,a};d.transformMat3=function(a,c,e){var b=c[0],l=c[1];c=c[2];return a[0]=b*e[0]+l*e[3]+c*e[6],a[1]=b*e[1]+l*e[4]+c*e[7],
a[2]=b*e[2]+l*e[5]+c*e[8],a};d.transformQuat=function(a,c,e){var b=e[0],l=e[1],g=e[2],k=c[0],d=c[1];c=c[2];var f=l*c-g*d,h=g*k-b*c,n=b*d-l*k,y=l*n-g*h,g=g*f-b*n,b=b*h-l*f;e=2*e[3];return f*=e,h*=e,n*=e,y*=2,g*=2,b*=2,a[0]=k+f+y,a[1]=d+h+g,a[2]=c+n+b,a};d.rotateX=function(a,c,e,b){var l=[],g=[];return l[0]=c[0]-e[0],l[1]=c[1]-e[1],l[2]=c[2]-e[2],g[0]=l[0],g[1]=l[1]*Math.cos(b)-l[2]*Math.sin(b),g[2]=l[1]*Math.sin(b)+l[2]*Math.cos(b),a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.rotateY=function(a,
c,e,b){var l=[],g=[];return l[0]=c[0]-e[0],l[1]=c[1]-e[1],l[2]=c[2]-e[2],g[0]=l[2]*Math.sin(b)+l[0]*Math.cos(b),g[1]=l[1],g[2]=l[2]*Math.cos(b)-l[0]*Math.sin(b),a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.rotateZ=function(a,c,e,b){var l=[],g=[];return l[0]=c[0]-e[0],l[1]=c[1]-e[1],l[2]=c[2]-e[2],g[0]=l[0]*Math.cos(b)-l[1]*Math.sin(b),g[1]=l[0]*Math.sin(b)+l[1]*Math.cos(b),g[2]=l[2],a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.angle=function(a,c){var b=n(a[0],a[1],a[2]),g=n(c[0],c[1],c[2]);
e(b,b);e(g,g);b=l(b,g);return 1<b?0:-1>b?Math.PI:Math.acos(b)};d.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]};d.equals=function(a,c){var e=a[0],b=a[1],l=a[2],k=c[0],d=c[1],f=c[2];return Math.abs(e-k)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(b-d)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))&&Math.abs(l-f)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))};var g=function(a){if(a&&a.__esModule)return a;
var c={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);return c["default"]=a,c}(h(0));d.sub=b;d.mul=f;d.div=c;d.dist=k;d.sqrDist=y;d.len=p;d.sqrLen=z;d.forEach=function(){var a=r();return function(c,e,b,l,g,k){var d=void 0,f=void 0;e||(e=3);b||(b=0);f=l?Math.min(l*e+b,c.length):c.length;for(d=b;d<f;d+=e)a[0]=c[d],a[1]=c[d+1],a[2]=c[d+2],g(a,a,k),c[d]=a[0],c[d+1]=a[1],c[d+2]=a[2];return c}}()},function(a,d,h){function r(a){if(a&&a.__esModule)return a;var c={};if(null!=
a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);return c["default"]=a,c}function p(){var a=new k.ARRAY_TYPE(4);return k.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function n(a,c,e){e*=.5;var b=Math.sin(e);return a[0]=b*c[0],a[1]=b*c[1],a[2]=b*c[2],a[3]=Math.cos(e),a}function b(a,c,e){var b=c[0],k=c[1],d=c[2];c=c[3];var f=e[0],h=e[1],n=e[2];e=e[3];return a[0]=b*e+c*f+k*n-d*h,a[1]=k*e+c*h+d*f-b*n,a[2]=d*e+c*n+b*h-k*f,a[3]=c*e-b*f-k*h-d*n,a}function f(a,c,e,b){var d=
c[0],f=c[1],h=c[2];c=c[3];var n=e[0],y=e[1],z=e[2];e=e[3];var p=void 0,r=void 0,u=void 0,F=void 0,A=void 0;return 0>(r=d*n+f*y+h*z+c*e)&&(r=-r,n=-n,y=-y,z=-z,e=-e),1-r>k.EPSILON?(p=Math.acos(r),u=Math.sin(p),F=Math.sin((1-b)*p)/u,A=Math.sin(b*p)/u):(F=1-b,A=b),a[0]=F*d+A*n,a[1]=F*f+A*y,a[2]=F*h+A*z,a[3]=F*c+A*e,a}function c(a,c){var e=c[0]+c[4]+c[8],b=void 0;if(0<e)b=Math.sqrt(e+1),a[3]=.5*b,b=.5/b,a[0]=(c[5]-c[7])*b,a[1]=(c[6]-c[2])*b,a[2]=(c[1]-c[3])*b;else{e=0;c[4]>c[0]&&(e=1);c[8]>c[3*e+e]&&(e=
2);var k=(e+1)%3,d=(e+2)%3,b=Math.sqrt(c[3*e+e]-c[3*k+k]-c[3*d+d]+1);a[e]=.5*b;b=.5/b;a[3]=(c[3*k+d]-c[3*d+k])*b;a[k]=(c[3*k+e]+c[3*e+k])*b;a[d]=(c[3*d+e]+c[3*e+d])*b}return a}Object.defineProperty(d,"__esModule",{value:!0});d.setAxes=d.sqlerp=d.rotationTo=d.equals=d.exactEquals=d.normalize=d.sqrLen=d.squaredLength=d.len=d.length=d.lerp=d.dot=d.scale=d.mul=d.add=d.set=d.copy=d.fromValues=d.clone=void 0;d.create=p;d.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};d.setAxisAngle=n;d.getAxisAngle=
function(a,c){var e=2*Math.acos(c[3]),b=Math.sin(e/2);b>k.EPSILON?(a[0]=c[0]/b,a[1]=c[1]/b,a[2]=c[2]/b):(a[0]=1,a[1]=0,a[2]=0);return e};d.multiply=b;d.rotateX=function(a,c,e){e*=.5;var b=c[0],k=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e+c*f,a[1]=k*e+d*f,a[2]=d*e-k*f,a[3]=c*e-b*f,a};d.rotateY=function(a,c,e){e*=.5;var b=c[0],k=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e-d*f,a[1]=k*e+c*f,a[2]=d*e+b*f,a[3]=c*e-k*f,a};d.rotateZ=function(a,c,e){e*=.5;var b=
c[0],k=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e+k*f,a[1]=k*e-b*f,a[2]=d*e+c*f,a[3]=c*e-d*f,a};d.calculateW=function(a,c){var e=c[0],b=c[1],k=c[2];return a[0]=e,a[1]=b,a[2]=k,a[3]=Math.sqrt(Math.abs(1-e*e-b*b-k*k)),a};d.slerp=f;d.random=function(a){var c=k.RANDOM(),e=k.RANDOM(),b=k.RANDOM(),d=Math.sqrt(1-c),c=Math.sqrt(c);return a[0]=d*Math.sin(2*Math.PI*e),a[1]=d*Math.cos(2*Math.PI*e),a[2]=c*Math.sin(2*Math.PI*b),a[3]=c*Math.cos(2*Math.PI*b),a};d.invert=function(a,c){var e=
c[0],b=c[1],k=c[2],d=c[3],f=e*e+b*b+k*k+d*d,f=f?1/f:0;return a[0]=-e*f,a[1]=-b*f,a[2]=-k*f,a[3]=d*f,a};d.conjugate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a[3]=c[3],a};d.fromMat3=c;d.fromEuler=function(a,c,e,b){var k=.5*Math.PI/180;c*=k;e*=k;b*=k;k=Math.sin(c);c=Math.cos(c);var d=Math.sin(e);e=Math.cos(e);var f=Math.sin(b);b=Math.cos(b);return a[0]=k*e*b-c*d*f,a[1]=c*d*b+k*e*f,a[2]=c*e*f-k*d*b,a[3]=c*e*b+k*d*f,a};d.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};
var k=r(h(0)),y=r(h(5)),z=r(h(2));a=r(h(1));d.clone=a.clone;d.fromValues=a.fromValues;d.copy=a.copy;d.set=a.set;d.add=a.add;d.mul=b;d.scale=a.scale;d.dot=a.dot;d.lerp=a.lerp;h=d.length=a.length;h=(d.len=h,d.squaredLength=a.squaredLength);var e=(d.sqrLen=h,d.normalize=a.normalize);d.exactEquals=a.exactEquals;d.equals=a.equals;d.rotationTo=function(){var a=z.create(),c=z.fromValues(1,0,0),b=z.fromValues(0,1,0);return function(k,d,f){var h=z.dot(d,f);return-.999999>h?(z.cross(a,c,d),1E-6>z.len(a)&&z.cross(a,
b,d),z.normalize(a,a),n(k,a,Math.PI),k):.999999<h?(k[0]=0,k[1]=0,k[2]=0,k[3]=1,k):(z.cross(a,d,f),k[0]=a[0],k[1]=a[1],k[2]=a[2],k[3]=1+h,e(k,k))}}();d.sqlerp=function(){var a=p(),c=p();return function(e,b,k,d,h,n){return f(a,b,h,n),f(c,k,d,n),f(e,a,c,2*n*(1-n)),e}}();d.setAxes=function(){var a=y.create();return function(b,k,d,f){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=f[0],a[4]=f[1],a[7]=f[2],a[2]=-k[0],a[5]=-k[1],a[8]=-k[2],e(b,c(b,a))}}()},function(a,d,h){function r(a){return a[0]=1,a[1]=0,a[2]=
0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function p(a,b,d){var f=b[0],e=b[1],l=b[2],g=b[3],h=b[4],m=b[5],n=b[6],w=b[7],p=b[8],r=b[9],x=b[10],u=b[11],C=b[12],H=b[13],J=b[14];b=b[15];var F=d[0],A=d[1],U=d[2],I=d[3];return a[0]=F*f+A*h+U*p+I*C,a[1]=F*e+A*m+U*r+I*H,a[2]=F*l+A*n+U*x+I*J,a[3]=F*g+A*w+U*u+I*b,F=d[4],A=d[5],U=d[6],I=d[7],a[4]=F*f+A*h+U*p+I*C,a[5]=F*e+A*m+U*r+I*H,a[6]=F*l+A*n+U*x+I*J,a[7]=F*g+A*w+U*u+I*b,F=d[8],A=d[9],U=d[10],I=d[11],
a[8]=F*f+A*h+U*p+I*C,a[9]=F*e+A*m+U*r+I*H,a[10]=F*l+A*n+U*x+I*J,a[11]=F*g+A*w+U*u+I*b,F=d[12],A=d[13],U=d[14],I=d[15],a[12]=F*f+A*h+U*p+I*C,a[13]=F*e+A*m+U*r+I*H,a[14]=F*l+A*n+U*x+I*J,a[15]=F*g+A*w+U*u+I*b,a}function n(a,b,d){var f=b[0],e=b[1],l=b[2],g=b[3],h=f+f,m=e+e,n=l+l;b=f*h;var w=f*m,f=f*n,p=e*m,e=e*n,l=l*n,h=g*h,m=g*m,g=g*n;return a[0]=1-(p+l),a[1]=w+g,a[2]=f-m,a[3]=0,a[4]=w-g,a[5]=1-(b+l),a[6]=e+h,a[7]=0,a[8]=f+m,a[9]=e-h,a[10]=1-(b+p),a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],a[15]=1,a}function b(a,
b,d){return a[0]=b[0]-d[0],a[1]=b[1]-d[1],a[2]=b[2]-d[2],a[3]=b[3]-d[3],a[4]=b[4]-d[4],a[5]=b[5]-d[5],a[6]=b[6]-d[6],a[7]=b[7]-d[7],a[8]=b[8]-d[8],a[9]=b[9]-d[9],a[10]=b[10]-d[10],a[11]=b[11]-d[11],a[12]=b[12]-d[12],a[13]=b[13]-d[13],a[14]=b[14]-d[14],a[15]=b[15]-d[15],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new f.ARRAY_TYPE(16);f.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=
0);return a[0]=1,a[5]=1,a[10]=1,a[15]=1,a};d.clone=function(a){var b=new f.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};d.fromValues=function(a,b,
d,h,e,l,g,q,m,n,w,p,r,x,u,C){var H=new f.ARRAY_TYPE(16);return H[0]=a,H[1]=b,H[2]=d,H[3]=h,H[4]=e,H[5]=l,H[6]=g,H[7]=q,H[8]=m,H[9]=n,H[10]=w,H[11]=p,H[12]=r,H[13]=x,H[14]=u,H[15]=C,H};d.set=function(a,b,d,f,e,l,g,h,m,n,w,p,r,x,u,C,H){return a[0]=b,a[1]=d,a[2]=f,a[3]=e,a[4]=l,a[5]=g,a[6]=h,a[7]=m,a[8]=n,a[9]=w,a[10]=p,a[11]=r,a[12]=x,a[13]=u,a[14]=C,a[15]=H,a};d.identity=r;d.transpose=function(a,b){if(a===b){var d=b[1],f=b[2],e=b[3],l=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=
b[9];a[7]=b[13];a[8]=f;a[9]=l;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};d.invert=function(a,b){var d=b[0],f=b[1],e=b[2],l=b[3],g=b[4],h=b[5],m=b[6],n=b[7],w=b[8],p=b[9],r=b[10],x=b[11],u=b[12],C=b[13],H=b[14],J=b[15],F=d*h-f*g,A=d*m-e*g,U=d*n-l*g,I=f*m-e*h,G=f*n-l*h,D=e*n-l*m,ma=w*C-p*u,t=w*H-r*u,ca=w*J-x*u,M=p*H-r*C,fa=
p*J-x*C,Aa=r*J-x*H,T=F*Aa-A*fa+U*M+I*ca-G*t+D*ma;return T?(T=1/T,a[0]=(h*Aa-m*fa+n*M)*T,a[1]=(e*fa-f*Aa-l*M)*T,a[2]=(C*D-H*G+J*I)*T,a[3]=(r*G-p*D-x*I)*T,a[4]=(m*ca-g*Aa-n*t)*T,a[5]=(d*Aa-e*ca+l*t)*T,a[6]=(H*U-u*D-J*A)*T,a[7]=(w*D-r*U+x*A)*T,a[8]=(g*fa-h*ca+n*ma)*T,a[9]=(f*ca-d*fa-l*ma)*T,a[10]=(u*G-C*U+J*F)*T,a[11]=(p*U-w*G-x*F)*T,a[12]=(h*t-g*M-m*ma)*T,a[13]=(d*M-f*t+e*ma)*T,a[14]=(C*A-u*I-H*F)*T,a[15]=(w*I-p*A+r*F)*T,a):null};d.adjoint=function(a,b){var d=b[0],f=b[1],e=b[2],l=b[3],g=b[4],h=b[5],
m=b[6],n=b[7],w=b[8],p=b[9],r=b[10],x=b[11],u=b[12],C=b[13],H=b[14],J=b[15];return a[0]=h*(r*J-x*H)-p*(m*J-n*H)+C*(m*x-n*r),a[1]=-(f*(r*J-x*H)-p*(e*J-l*H)+C*(e*x-l*r)),a[2]=f*(m*J-n*H)-h*(e*J-l*H)+C*(e*n-l*m),a[3]=-(f*(m*x-n*r)-h*(e*x-l*r)+p*(e*n-l*m)),a[4]=-(g*(r*J-x*H)-w*(m*J-n*H)+u*(m*x-n*r)),a[5]=d*(r*J-x*H)-w*(e*J-l*H)+u*(e*x-l*r),a[6]=-(d*(m*J-n*H)-g*(e*J-l*H)+u*(e*n-l*m)),a[7]=d*(m*x-n*r)-g*(e*x-l*r)+w*(e*n-l*m),a[8]=g*(p*J-x*C)-w*(h*J-n*C)+u*(h*x-n*p),a[9]=-(d*(p*J-x*C)-w*(f*J-l*C)+u*(f*x-
l*p)),a[10]=d*(h*J-n*C)-g*(f*J-l*C)+u*(f*n-l*h),a[11]=-(d*(h*x-n*p)-g*(f*x-l*p)+w*(f*n-l*h)),a[12]=-(g*(p*H-r*C)-w*(h*H-m*C)+u*(h*r-m*p)),a[13]=d*(p*H-r*C)-w*(f*H-e*C)+u*(f*r-e*p),a[14]=-(d*(h*H-m*C)-g*(f*H-e*C)+u*(f*m-e*h)),a[15]=d*(h*r-m*p)-g*(f*r-e*p)+w*(f*m-e*h),a};d.determinant=function(a){var b=a[0],d=a[1],f=a[2],e=a[3],l=a[4],g=a[5],h=a[6],m=a[7],n=a[8],w=a[9],p=a[10],r=a[11],x=a[12],u=a[13],C=a[14];a=a[15];return(b*g-d*l)*(p*a-r*C)-(b*h-f*l)*(w*a-r*u)+(b*m-e*l)*(w*C-p*u)+(d*h-f*g)*(n*a-r*
x)-(d*m-e*g)*(n*C-p*x)+(f*m-e*h)*(n*u-w*x)};d.multiply=p;d.translate=function(a,b,d){var f=d[0],e=d[1];d=d[2];var l=void 0,g=void 0,h=void 0,m=void 0,n=void 0,w=void 0,p=void 0,r=void 0,x=void 0,u=void 0,C=void 0,H=void 0;b===a?(a[12]=b[0]*f+b[4]*e+b[8]*d+b[12],a[13]=b[1]*f+b[5]*e+b[9]*d+b[13],a[14]=b[2]*f+b[6]*e+b[10]*d+b[14],a[15]=b[3]*f+b[7]*e+b[11]*d+b[15]):(l=b[0],g=b[1],h=b[2],m=b[3],n=b[4],w=b[5],p=b[6],r=b[7],x=b[8],u=b[9],C=b[10],H=b[11],a[0]=l,a[1]=g,a[2]=h,a[3]=m,a[4]=n,a[5]=w,a[6]=p,a[7]=
r,a[8]=x,a[9]=u,a[10]=C,a[11]=H,a[12]=l*f+n*e+x*d+b[12],a[13]=g*f+w*e+u*d+b[13],a[14]=h*f+p*e+C*d+b[14],a[15]=m*f+r*e+H*d+b[15]);return a};d.scale=function(a,b,d){var f=d[0],e=d[1];d=d[2];return a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f,a[3]=b[3]*f,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};d.rotate=function(a,b,d,h){var e=h[0],l=h[1];h=h[2];var g=Math.sqrt(e*e+l*l+h*h),q=void 0,m=void 0,n=void 0,
w=void 0,p=void 0,r=void 0,x=void 0,u=void 0,C=void 0,H=void 0,J=void 0,F=void 0,A=void 0,U=void 0,I=void 0,G=void 0,D=void 0,ma=void 0,t=void 0,ca=void 0,M=void 0,fa=void 0,m=q=void 0;if(g<f.EPSILON)return null;e*=g=1/g;l*=g;h*=g;q=Math.sin(d);m=Math.cos(d);n=1-m;w=b[0];p=b[1];r=b[2];x=b[3];u=b[4];C=b[5];H=b[6];J=b[7];F=b[8];A=b[9];U=b[10];I=b[11];G=e*e*n+m;D=l*e*n+h*q;ma=h*e*n-l*q;t=e*l*n-h*q;ca=l*l*n+m;M=h*l*n+e*q;fa=e*h*n+l*q;q=l*h*n-e*q;m=h*h*n+m;a[0]=w*G+u*D+F*ma;a[1]=p*G+C*D+A*ma;a[2]=r*G+
H*D+U*ma;a[3]=x*G+J*D+I*ma;a[4]=w*t+u*ca+F*M;a[5]=p*t+C*ca+A*M;a[6]=r*t+H*ca+U*M;a[7]=x*t+J*ca+I*M;a[8]=w*fa+u*q+F*m;a[9]=p*fa+C*q+A*m;a[10]=r*fa+H*q+U*m;a[11]=x*fa+J*q+I*m;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};d.rotateX=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[4],l=b[5],g=b[6],h=b[7],m=b[8],n=b[9],w=b[10],p=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[4]=e*d+m*f,a[5]=l*d+n*f,a[6]=g*d+w*
f,a[7]=h*d+p*f,a[8]=m*d-e*f,a[9]=n*d-l*f,a[10]=w*d-g*f,a[11]=p*d-h*f,a};d.rotateY=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[0],l=b[1],g=b[2],h=b[3],m=b[8],n=b[9],w=b[10],p=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[0]=e*d-m*f,a[1]=l*d-n*f,a[2]=g*d-w*f,a[3]=h*d-p*f,a[8]=e*f+m*d,a[9]=l*f+n*d,a[10]=g*f+w*d,a[11]=h*f+p*d,a};d.rotateZ=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[0],l=b[1],g=b[2],h=b[3],m=b[4],
n=b[5],w=b[6],p=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[0]=e*d+m*f,a[1]=l*d+n*f,a[2]=g*d+w*f,a[3]=h*d+p*f,a[4]=m*d-e*f,a[5]=n*d-l*f,a[6]=w*d-g*f,a[7]=p*d-h*f,a};d.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a};d.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,
a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromRotation=function(a,b,d){var h=d[0],e=d[1];d=d[2];var l=Math.sqrt(h*h+e*e+d*d),g=void 0,q=void 0,m=void 0;return l<f.EPSILON?null:(h*=l=1/l,e*=l,d*=l,g=Math.sin(b),q=Math.cos(b),m=1-q,a[0]=h*h*m+q,a[1]=e*h*m+d*g,a[2]=d*h*m-e*g,a[3]=0,a[4]=h*e*m-d*g,a[5]=e*e*m+q,a[6]=d*e*m+h*g,a[7]=0,a[8]=h*d*m+e*g,a[9]=e*d*m-h*g,a[10]=d*d*m+q,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)};d.fromXRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);
return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=d,a[7]=0,a[8]=0,a[9]=-d,a[10]=f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromYRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);return a[0]=f,a[1]=0,a[2]=-d,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=d,a[9]=0,a[10]=f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromZRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);return a[0]=f,a[1]=d,a[2]=0,a[3]=0,a[4]=-d,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=
1,a};d.fromRotationTranslation=n;d.fromQuat2=function(a,b){var d=new f.ARRAY_TYPE(3),h=-b[0],e=-b[1],l=-b[2],g=b[3],q=b[4],m=b[5],v=b[6],w=b[7],p=h*h+e*e+l*l+g*g;0<p?(d[0]=2*(q*g+w*h+m*l-v*e)/p,d[1]=2*(m*g+w*e+v*h-q*l)/p,d[2]=2*(v*g+w*l+q*e-m*h)/p):(d[0]=2*(q*g+w*h+m*l-v*e),d[1]=2*(m*g+w*e+v*h-q*l),d[2]=2*(v*g+w*l+q*e-m*h));return n(a,b,d),a};d.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a};d.getScaling=function(a,b){var d=b[0],f=b[1],e=b[2],l=b[4],g=b[5],h=b[6],m=b[8],n=
b[9],w=b[10];return a[0]=Math.sqrt(d*d+f*f+e*e),a[1]=Math.sqrt(l*l+g*g+h*h),a[2]=Math.sqrt(m*m+n*n+w*w),a};d.getRotation=function(a,b){var d=b[0]+b[5]+b[10],f=0;0<d?(f=2*Math.sqrt(d+1),a[3]=.25*f,a[0]=(b[6]-b[9])/f,a[1]=(b[8]-b[2])/f,a[2]=(b[1]-b[4])/f):b[0]>b[5]&&b[0]>b[10]?(f=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/f,a[0]=.25*f,a[1]=(b[1]+b[4])/f,a[2]=(b[8]+b[2])/f):b[5]>b[10]?(f=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/f,a[0]=(b[1]+b[4])/f,a[1]=.25*f,a[2]=(b[6]+b[9])/f):(f=2*Math.sqrt(1+
b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/f,a[0]=(b[8]+b[2])/f,a[1]=(b[6]+b[9])/f,a[2]=.25*f);return a};d.fromRotationTranslationScale=function(a,b,d,f){var e=b[0],l=b[1],g=b[2],h=b[3],m=e+e,n=l+l,w=g+g;b=e*m;var p=e*n,e=e*w,r=l*n,l=l*w,g=g*w,m=h*m,n=h*n,h=h*w,w=f[0],x=f[1];f=f[2];return a[0]=(1-(r+g))*w,a[1]=(p+h)*w,a[2]=(e-n)*w,a[3]=0,a[4]=(p-h)*x,a[5]=(1-(b+g))*x,a[6]=(l+m)*x,a[7]=0,a[8]=(e+n)*f,a[9]=(l-m)*f,a[10]=(1-(b+r))*f,a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],a[15]=1,a};d.fromRotationTranslationScaleOrigin=
function(a,b,d,f,e){var l=b[0],g=b[1],h=b[2],m=b[3],n=l+l,w=g+g,p=h+h;b=l*n;var r=l*w,x=l*p,l=g*w,g=g*p,u=h*p,h=m*n,w=m*w,C=m*p,H=f[0],J=f[1],p=f[2];f=e[0];m=e[1];e=e[2];var n=(1-(l+u))*H,F=(r+C)*H,H=(x-w)*H,r=(r-C)*J,u=(1-(b+u))*J,J=(g+h)*J,x=(x+w)*p,g=(g-h)*p;b=(1-(b+l))*p;return a[0]=n,a[1]=F,a[2]=H,a[3]=0,a[4]=r,a[5]=u,a[6]=J,a[7]=0,a[8]=x,a[9]=g,a[10]=b,a[11]=0,a[12]=d[0]+f-(n*f+r*m+x*e),a[13]=d[1]+m-(F*f+u*m+g*e),a[14]=d[2]+e-(H*f+J*m+b*e),a[15]=1,a};d.fromQuat=function(a,b){var d=b[0],f=b[1],
e=b[2],l=b[3],g=d+d,h=f+f,m=e+e,d=d*g,n=f*g,f=f*h,p=e*g,r=e*h,e=e*m,g=l*g,h=l*h,l=l*m;return a[0]=1-f-e,a[1]=n+l,a[2]=p-h,a[3]=0,a[4]=n-l,a[5]=1-d-e,a[6]=r+g,a[7]=0,a[8]=p+h,a[9]=r-g,a[10]=1-d-f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.frustum=function(a,b,d,f,e,l,g){var h=1/(d-b),m=1/(e-f),n=1/(l-g);return a[0]=2*l*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*l*m,a[6]=0,a[7]=0,a[8]=(d+b)*h,a[9]=(e+f)*m,a[10]=(g+l)*n,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*l*2*n,a[15]=0,a};d.perspective=function(a,b,d,f,e){b=
1/Math.tan(b/2);var l=void 0;a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=e&&e!==1/0?(l=1/(f-e),a[10]=(e+f)*l,a[14]=2*e*f*l):(a[10]=-1,a[14]=-2*f);return a};d.perspectiveFromFieldOfView=function(a,b,d,f){var e=Math.tan(b.upDegrees*Math.PI/180),l=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+b),m=2/(e+l);return a[0]=h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=m,a[6]=
0,a[7]=0,a[8]=-(g-b)*h*.5,a[9]=(e-l)*m*.5,a[10]=f/(d-f),a[11]=-1,a[12]=0,a[13]=0,a[14]=f*d/(d-f),a[15]=0,a};d.ortho=function(a,b,d,f,e,l,g){var h=1/(b-d),m=1/(f-e),n=1/(l-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*m,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*n,a[11]=0,a[12]=(b+d)*h,a[13]=(e+f)*m,a[14]=(g+l)*n,a[15]=1,a};d.lookAt=function(a,b,d,h){var e=void 0,l=void 0,g=void 0,q=void 0,m=void 0,n=void 0,p=void 0,B=void 0,C=void 0,x=void 0,E=b[0],J=b[1];b=b[2];g=h[0];q=h[1];h=h[2];p=d[0];B=d[1];
d=d[2];if(Math.abs(E-p)<f.EPSILON&&Math.abs(J-B)<f.EPSILON&&Math.abs(b-d)<f.EPSILON)return r(a);p=E-p;B=J-B;C=b-d;x=1/Math.sqrt(p*p+B*B+C*C);e=q*(C*=x)-h*(B*=x);l=h*(p*=x)-g*C;g=g*B-q*p;(x=Math.sqrt(e*e+l*l+g*g))?(e*=x=1/x,l*=x,g*=x):(e=0,l=0,g=0);q=B*g-C*l;m=C*e-p*g;n=p*l-B*e;(x=Math.sqrt(q*q+m*m+n*n))?(q*=x=1/x,m*=x,n*=x):(q=0,m=0,n=0);return a[0]=e,a[1]=q,a[2]=p,a[3]=0,a[4]=l,a[5]=m,a[6]=B,a[7]=0,a[8]=g,a[9]=n,a[10]=C,a[11]=0,a[12]=-(e*E+l*J+g*b),a[13]=-(q*E+m*J+n*b),a[14]=-(p*E+B*J+C*b),a[15]=
1,a};d.targetTo=function(a,b,d,f){var e=b[0],l=b[1];b=b[2];var g=f[0],h=f[1],m=f[2];f=e-d[0];var n=l-d[1];d=b-d[2];var p=f*f+n*n+d*d;0<p&&(p=1/Math.sqrt(p),f*=p,n*=p,d*=p);var r=h*d-m*n,m=m*f-g*d,g=g*n-h*f;0<(p=r*r+m*m+g*g)&&(p=1/Math.sqrt(p),r*=p,m*=p,g*=p);return a[0]=r,a[1]=m,a[2]=g,a[3]=0,a[4]=n*g-d*m,a[5]=d*r-f*g,a[6]=f*m-n*r,a[7]=0,a[8]=f,a[9]=n,a[10]=d,a[11]=0,a[12]=e,a[13]=l,a[14]=b,a[15]=1,a};d.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+
", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,b,d){return a[0]=b[0]+d[0],a[1]=b[1]+d[1],a[2]=b[2]+d[2],a[3]=b[3]+
d[3],a[4]=b[4]+d[4],a[5]=b[5]+d[5],a[6]=b[6]+d[6],a[7]=b[7]+d[7],a[8]=b[8]+d[8],a[9]=b[9]+d[9],a[10]=b[10]+d[10],a[11]=b[11]+d[11],a[12]=b[12]+d[12],a[13]=b[13]+d[13],a[14]=b[14]+d[14],a[15]=b[15]+d[15],a};d.subtract=b;d.multiplyScalar=function(a,b,d){return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*d,a[5]=b[5]*d,a[6]=b[6]*d,a[7]=b[7]*d,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12]*d,a[13]=b[13]*d,a[14]=b[14]*d,a[15]=b[15]*d,a};d.multiplyScalarAndAdd=function(a,b,
d,f){return a[0]=b[0]+d[0]*f,a[1]=b[1]+d[1]*f,a[2]=b[2]+d[2]*f,a[3]=b[3]+d[3]*f,a[4]=b[4]+d[4]*f,a[5]=b[5]+d[5]*f,a[6]=b[6]+d[6]*f,a[7]=b[7]+d[7]*f,a[8]=b[8]+d[8]*f,a[9]=b[9]+d[9]*f,a[10]=b[10]+d[10]*f,a[11]=b[11]+d[11]*f,a[12]=b[12]+d[12]*f,a[13]=b[13]+d[13]*f,a[14]=b[14]+d[14]*f,a[15]=b[15]+d[15]*f,a};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===
b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};d.equals=function(a,b){var d=a[0],h=a[1],e=a[2],l=a[3],g=a[4],q=a[5],m=a[6],n=a[7],p=a[8],r=a[9],u=a[10],x=a[11],E=a[12],C=a[13],H=a[14],J=a[15],F=b[0],A=b[1],U=b[2],I=b[3],G=b[4],D=b[5],ma=b[6],t=b[7],ca=b[8],M=b[9],fa=b[10],Aa=b[11],T=b[12],X=b[13],S=b[14],P=b[15];return Math.abs(d-F)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(h-A)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(e-U)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(U))&&
Math.abs(l-I)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(g-G)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(q-D)<=f.EPSILON*Math.max(1,Math.abs(q),Math.abs(D))&&Math.abs(m-ma)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(ma))&&Math.abs(n-t)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(p-ca)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(ca))&&Math.abs(r-M)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(u-fa)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(fa))&&
Math.abs(x-Aa)<=f.EPSILON*Math.max(1,Math.abs(x),Math.abs(Aa))&&Math.abs(E-T)<=f.EPSILON*Math.max(1,Math.abs(E),Math.abs(T))&&Math.abs(C-X)<=f.EPSILON*Math.max(1,Math.abs(C),Math.abs(X))&&Math.abs(H-S)<=f.EPSILON*Math.max(1,Math.abs(H),Math.abs(S))&&Math.abs(J-P)<=f.EPSILON*Math.max(1,Math.abs(J),Math.abs(P))};var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=a[d]);return b["default"]=a,b}(h(0));d.mul=p;d.sub=b},function(a,
d,h){function r(a,d,c){var k=d[0],h=d[1],n=d[2],e=d[3],l=d[4],g=d[5],q=d[6],m=d[7];d=d[8];var p=c[0],w=c[1],u=c[2],C=c[3],x=c[4],E=c[5],J=c[6],H=c[7];c=c[8];return a[0]=p*k+w*e+u*q,a[1]=p*h+w*l+u*m,a[2]=p*n+w*g+u*d,a[3]=C*k+x*e+E*q,a[4]=C*h+x*l+E*m,a[5]=C*n+x*g+E*d,a[6]=J*k+H*e+c*q,a[7]=J*h+H*l+c*m,a[8]=J*n+H*g+c*d,a}function p(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a[6]=d[6]-c[6],a[7]=d[7]-c[7],a[8]=d[8]-c[8],a}Object.defineProperty(d,
"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new n.ARRAY_TYPE(9);n.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};d.fromMat4=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[4],a[4]=d[5],a[5]=d[6],a[6]=d[8],a[7]=d[9],a[8]=d[10],a};d.clone=function(a){var d=new n.ARRAY_TYPE(9);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d};d.copy=function(a,d){return a[0]=d[0],
a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a};d.fromValues=function(a,d,c,k,h,p,e,l,g){var q=new n.ARRAY_TYPE(9);return q[0]=a,q[1]=d,q[2]=c,q[3]=k,q[4]=h,q[5]=p,q[6]=e,q[7]=l,q[8]=g,q};d.set=function(a,d,c,k,h,n,e,l,g,q){return a[0]=d,a[1]=c,a[2]=k,a[3]=h,a[4]=n,a[5]=e,a[6]=l,a[7]=g,a[8]=q,a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.transpose=function(a,d){if(a===d){var c=d[1],k=d[2],h=d[5];a[1]=d[3];a[2]=
d[6];a[3]=c;a[5]=d[7];a[6]=k;a[7]=h}else a[0]=d[0],a[1]=d[3],a[2]=d[6],a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=d[5],a[8]=d[8];return a};d.invert=function(a,d){var c=d[0],k=d[1],h=d[2],n=d[3],e=d[4],l=d[5],g=d[6],q=d[7],m=d[8],p=m*e-l*q,r=-m*n+l*g,u=q*n-e*g,C=c*p+k*r+h*u;return C?(C=1/C,a[0]=p*C,a[1]=(-m*k+h*q)*C,a[2]=(l*k-h*e)*C,a[3]=r*C,a[4]=(m*c-h*g)*C,a[5]=(-l*c+h*n)*C,a[6]=u*C,a[7]=(-q*c+k*g)*C,a[8]=(e*c-k*n)*C,a):null};d.adjoint=function(a,d){var c=d[0],k=d[1],h=d[2],n=d[3],e=d[4],l=d[5],
g=d[6],q=d[7],m=d[8];return a[0]=e*m-l*q,a[1]=h*q-k*m,a[2]=k*l-h*e,a[3]=l*g-n*m,a[4]=c*m-h*g,a[5]=h*n-c*l,a[6]=n*q-e*g,a[7]=k*g-c*q,a[8]=c*e-k*n,a};d.determinant=function(a){var d=a[3],c=a[4],k=a[5],h=a[6],n=a[7],e=a[8];return a[0]*(e*c-k*n)+a[1]*(-e*d+k*h)+a[2]*(n*d-c*h)};d.multiply=r;d.translate=function(a,d,c){var k=d[0],h=d[1],n=d[2],e=d[3],l=d[4],g=d[5],q=d[6],m=d[7];d=d[8];var p=c[0];c=c[1];return a[0]=k,a[1]=h,a[2]=n,a[3]=e,a[4]=l,a[5]=g,a[6]=p*k+c*e+q,a[7]=p*h+c*l+m,a[8]=p*n+c*g+d,a};d.rotate=
function(a,d,c){var k=d[0],h=d[1],n=d[2],e=d[3],l=d[4],g=d[5],q=d[6],m=d[7];d=d[8];var p=Math.sin(c);c=Math.cos(c);return a[0]=c*k+p*e,a[1]=c*h+p*l,a[2]=c*n+p*g,a[3]=c*e-p*k,a[4]=c*l-p*h,a[5]=c*g-p*n,a[6]=q,a[7]=m,a[8]=d,a};d.scale=function(a,d,c){var k=c[0];c=c[1];return a[0]=k*d[0],a[1]=k*d[1],a[2]=k*d[2],a[3]=c*d[3],a[4]=c*d[4],a[5]=c*d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=d[0],a[7]=d[1],a[8]=1,a};d.fromRotation=
function(a,d){var c=Math.sin(d),k=Math.cos(d);return a[0]=k,a[1]=c,a[2]=0,a[3]=-c,a[4]=k,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=0,a[4]=d[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromMat2d=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=0,a[3]=d[2],a[4]=d[3],a[5]=0,a[6]=d[4],a[7]=d[5],a[8]=1,a};d.fromQuat=function(a,d){var c=d[0],k=d[1],h=d[2],n=d[3],e=c+c,l=k+k,g=h+h,c=c*e,q=k*e,k=k*l,m=h*e,p=h*l,h=h*g,e=n*e,l=n*l,n=n*g;return a[0]=1-k-h,a[3]=q-n,a[6]=
m+l,a[1]=q+n,a[4]=1-c-h,a[7]=p-e,a[2]=m-l,a[5]=p+e,a[8]=1-c-k,a};d.normalFromMat4=function(a,d){var c=d[0],k=d[1],h=d[2],n=d[3],e=d[4],l=d[5],g=d[6],q=d[7],m=d[8],p=d[9],r=d[10],u=d[11],C=d[12],x=d[13],E=d[14],J=d[15],H=c*l-k*e,ga=c*g-h*e,F=c*q-n*e,A=k*g-h*l,U=k*q-n*l,I=h*q-n*g,G=m*x-p*C,D=m*E-r*C,m=m*J-u*C,ma=p*E-r*x,p=p*J-u*x,r=r*J-u*E;return(u=H*r-ga*p+F*ma+A*m-U*D+I*G)?(u=1/u,a[0]=(l*r-g*p+q*ma)*u,a[1]=(g*m-e*r-q*D)*u,a[2]=(e*p-l*m+q*G)*u,a[3]=(h*p-k*r-n*ma)*u,a[4]=(c*r-h*m+n*D)*u,a[5]=(k*m-c*
p-n*G)*u,a[6]=(x*I-E*U+J*A)*u,a[7]=(E*F-C*I-J*ga)*u,a[8]=(C*U-x*F+J*H)*u,a):null};d.projection=function(a,d,c){return a[0]=2/d,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/c,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};d.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};
d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a[6]=d[6]+c[6],a[7]=d[7]+c[7],a[8]=d[8]+c[8],a};d.subtract=p;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a[6]=d[6]*c,a[7]=d[7]*c,a[8]=d[8]*c,a};d.multiplyScalarAndAdd=function(a,d,c,k){return a[0]=d[0]+c[0]*k,a[1]=d[1]+c[1]*k,a[2]=d[2]+c[2]*k,a[3]=d[3]+c[3]*k,a[4]=d[4]+c[4]*k,a[5]=d[5]+c[5]*k,a[6]=d[6]+c[6]*k,a[7]=
d[7]+c[7]*k,a[8]=d[8]+c[8]*k,a};d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]};d.equals=function(a,d){var c=a[0],k=a[1],h=a[2],p=a[3],e=a[4],l=a[5],g=a[6],q=a[7],m=a[8],r=d[0],w=d[1],u=d[2],C=d[3],x=d[4],E=d[5],J=d[6],H=d[7],ga=d[8];return Math.abs(c-r)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(r))&&Math.abs(k-w)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(w))&&Math.abs(h-u)<=n.EPSILON*Math.max(1,
Math.abs(h),Math.abs(u))&&Math.abs(p-C)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(e-x)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(l-E)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(g-J)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(J))&&Math.abs(q-H)<=n.EPSILON*Math.max(1,Math.abs(q),Math.abs(H))&&Math.abs(m-ga)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(ga))};var n=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(d[c]=a[c]);return d["default"]=a,d}(h(0));d.mul=r;d.sub=p},function(a,d,h){function r(){var a=new z.ARRAY_TYPE(2);return z.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0),a}function p(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function n(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a}function b(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a}function f(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)}function c(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d}function k(a){var b=a[0];a=a[1];
return Math.sqrt(b*b+a*a)}function y(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.sqrDist=d.dist=d.div=d.mul=d.sub=d.len=void 0;d.create=r;d.clone=function(a){var b=new z.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b};d.fromValues=function(a,b){var c=new z.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c};d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a};d.set=function(a,b,c){return a[0]=b,a[1]=c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+
c[1],a};d.subtract=p;d.multiply=n;d.divide=b;d.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a};d.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a};d.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a};d.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};d.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a};d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};d.scaleAndAdd=
function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a};d.distance=f;d.squaredDistance=c;d.length=k;d.squaredLength=y;d.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};d.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a};d.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a};d.lerp=function(a,b,c,d){var f=
b[0];b=b[1];return a[0]=f+d*(c[0]-f),a[1]=b+d*(c[1]-b),a};d.random=function(a,b){b=b||1;var c=2*z.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};d.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a};d.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*b+c[5],a};d.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a};d.transformMat4=function(a,
b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a};d.rotate=function(a,b,c,d){var f=b[0]-c[0];b=b[1]-c[1];var k=Math.sin(d);d=Math.cos(d);return a[0]=f*d-b*k+c[0],a[1]=f*k+b*d+c[1],a};d.angle=function(a,b){var c=a[0],d=a[1],f=b[0],k=b[1],h=c*c+d*d;0<h&&(h=1/Math.sqrt(h));var n=f*f+k*k;0<n&&(n=1/Math.sqrt(n));c=(c*f+d*k)*h*n;return 1<c?0:-1>c?Math.PI:Math.acos(c)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===
b[1]};d.equals=function(a,b){var c=a[0],d=a[1],f=b[0],k=b[1];return Math.abs(c-f)<=z.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-k)<=z.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))};var z=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(h(0));d.len=k;d.sub=p;d.mul=n;d.div=b;d.dist=f;d.sqrDist=c;d.sqrLen=y;d.forEach=function(){var a=r();return function(b,c,d,f,k,h){var n=void 0,p=void 0;
c||(c=2);d||(d=0);p=f?Math.min(f*c+d,b.length):b.length;for(n=d;n<p;n+=c)a[0]=b[n],a[1]=b[n+1],k(a,a,h),b[n]=a[0],b[n+1]=a[1];return b}}()},function(a,d,h){function r(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function p(a,b,c){var d=.5*c[0],f=.5*c[1];c=.5*c[2];var k=b[0],h=b[1],n=b[2];b=b[3];return a[0]=k,a[1]=h,a[2]=n,a[3]=b,a[4]=d*b+f*n-c*h,a[5]=f*b+c*k-d*n,a[6]=c*b+d*h-f*k,a[7]=-d*k-f*h-c*n,a}
function n(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a}function b(a,b,c){var d=b[0],f=b[1],k=b[2],h=b[3],n=c[4],p=c[5],r=c[6],u=c[7],y=b[4],z=b[5],C=b[6];b=b[7];var F=c[0],A=c[1],J=c[2];c=c[3];return a[0]=d*c+h*F+f*J-k*A,a[1]=f*c+h*A+k*F-d*J,a[2]=k*c+h*J+d*A-f*F,a[3]=h*c-d*F-f*A-k*J,a[4]=d*u+h*n+f*r-k*p+y*c+b*F+z*J-C*A,a[5]=f*u+h*p+k*n-d*r+z*c+b*A+C*F-y*J,a[6]=k*u+h*r+d*p-f*n+C*c+b*J+y*A-z*F,a[7]=h*u-d*n-f*p-k*r+b*c-y*F-z*A-C*J,a}Object.defineProperty(d,
"__esModule",{value:!0});d.sqrLen=d.squaredLength=d.len=d.length=d.dot=d.mul=d.setReal=d.getReal=void 0;d.create=function(){var a=new f.ARRAY_TYPE(8);f.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);return a[3]=1,a};d.clone=function(a){var b=new f.ARRAY_TYPE(8);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b};d.fromValues=function(a,b,c,d,k,h,n,p){var r=new f.ARRAY_TYPE(8);return r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=k,r[5]=h,r[6]=
n,r[7]=p,r};d.fromRotationTranslationValues=function(a,b,c,d,k,h,n){var p=new f.ARRAY_TYPE(8);p[0]=a;p[1]=b;p[2]=c;p[3]=d;k*=.5;h*=.5;n*=.5;return p[4]=k*d+h*c-n*b,p[5]=h*d+n*a-k*c,p[6]=n*d+k*b-h*a,p[7]=-k*a-h*b-n*c,p};d.fromRotationTranslation=p;d.fromTranslation=function(a,b){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=.5*b[0],a[5]=.5*b[1],a[6]=.5*b[2],a[7]=0,a};d.fromRotation=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.fromMat4=function(a,b){var d=
c.create();k.getRotation(d,b);var h=new f.ARRAY_TYPE(3);return k.getTranslation(h,b),p(a,d,h),a};d.copy=n;d.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.set=function(a,b,c,d,f,k,h,n,p){return a[0]=b,a[1]=c,a[2]=d,a[3]=f,a[4]=k,a[5]=h,a[6]=n,a[7]=p,a};d.getDual=function(a,b){return a[0]=b[4],a[1]=b[5],a[2]=b[6],a[3]=b[7],a};d.setDual=function(a,b){return a[4]=b[0],a[5]=b[1],a[6]=b[2],a[7]=b[3],a};d.getTranslation=function(a,b){var c=b[4],d=b[5],f=b[6],k=
b[7],h=-b[0],n=-b[1],p=-b[2],r=b[3];return a[0]=2*(c*r+k*h+d*p-f*n),a[1]=2*(d*r+k*n+f*h-c*p),a[2]=2*(f*r+k*p+c*n-d*h),a};d.translate=function(a,b,c){var d=b[0],f=b[1],k=b[2],h=b[3],n=.5*c[0],p=.5*c[1];c=.5*c[2];var r=b[4],u=b[5],y=b[6];b=b[7];return a[0]=d,a[1]=f,a[2]=k,a[3]=h,a[4]=h*n+f*c-k*p+r,a[5]=h*p+k*n-d*c+u,a[6]=h*c+d*p-f*n+y,a[7]=-d*n-f*p-k*c+b,a};d.rotateX=function(a,b,d){var f=-b[0],k=-b[1],h=-b[2],n=b[3],p=b[4],r=b[5],u=b[6],y=b[7],z=p*n+y*f+r*h-u*k,C=r*n+y*k+u*f-p*h,J=u*n+y*h+p*k-r*f,
p=y*n-p*f-r*k-u*h;return c.rotateX(a,b,d),f=a[0],k=a[1],h=a[2],n=a[3],a[4]=z*n+p*f+C*h-J*k,a[5]=C*n+p*k+J*f-z*h,a[6]=J*n+p*h+z*k-C*f,a[7]=p*n-z*f-C*k-J*h,a};d.rotateY=function(a,b,d){var f=-b[0],k=-b[1],h=-b[2],n=b[3],p=b[4],r=b[5],u=b[6],y=b[7],z=p*n+y*f+r*h-u*k,C=r*n+y*k+u*f-p*h,J=u*n+y*h+p*k-r*f,p=y*n-p*f-r*k-u*h;return c.rotateY(a,b,d),f=a[0],k=a[1],h=a[2],n=a[3],a[4]=z*n+p*f+C*h-J*k,a[5]=C*n+p*k+J*f-z*h,a[6]=J*n+p*h+z*k-C*f,a[7]=p*n-z*f-C*k-J*h,a};d.rotateZ=function(a,b,d){var f=-b[0],k=-b[1],
h=-b[2],n=b[3],p=b[4],r=b[5],u=b[6],y=b[7],z=p*n+y*f+r*h-u*k,C=r*n+y*k+u*f-p*h,J=u*n+y*h+p*k-r*f,p=y*n-p*f-r*k-u*h;return c.rotateZ(a,b,d),f=a[0],k=a[1],h=a[2],n=a[3],a[4]=z*n+p*f+C*h-J*k,a[5]=C*n+p*k+J*f-z*h,a[6]=J*n+p*h+z*k-C*f,a[7]=p*n-z*f-C*k-J*h,a};d.rotateByQuatAppend=function(a,b,c){var d=c[0],f=c[1],k=c[2];c=c[3];var h=b[0],n=b[1],p=b[2],r=b[3];return a[0]=h*c+r*d+n*k-p*f,a[1]=n*c+r*f+p*d-h*k,a[2]=p*c+r*k+h*f-n*d,a[3]=r*c-h*d-n*f-p*k,h=b[4],n=b[5],p=b[6],r=b[7],a[4]=h*c+r*d+n*k-p*f,a[5]=n*
c+r*f+p*d-h*k,a[6]=p*c+r*k+h*f-n*d,a[7]=r*c-h*d-n*f-p*k,a};d.rotateByQuatPrepend=function(a,b,c){var d=b[0],f=b[1],k=b[2];b=b[3];var h=c[0],n=c[1],p=c[2],r=c[3];return a[0]=d*r+b*h+f*p-k*n,a[1]=f*r+b*n+k*h-d*p,a[2]=k*r+b*p+d*n-f*h,a[3]=b*r-d*h-f*n-k*p,h=c[4],n=c[5],p=c[6],r=c[7],a[4]=d*r+b*h+f*p-k*n,a[5]=f*r+b*n+k*h-d*p,a[6]=k*r+b*p+d*n-f*h,a[7]=b*r-d*h-f*n-k*p,a};d.rotateAroundAxis=function(a,b,c,d){if(Math.abs(d)<f.EPSILON)return n(a,b);var k=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);d*=.5;var h=
Math.sin(d),p=h*c[0]/k,r=h*c[1]/k;c=h*c[2]/k;d=Math.cos(d);var k=b[0],h=b[1],u=b[2],x=b[3];a[0]=k*d+x*p+h*c-u*r;a[1]=h*d+x*r+u*p-k*c;a[2]=u*d+x*c+k*r-h*p;a[3]=x*d-k*p-h*r-u*c;k=b[4];h=b[5];u=b[6];b=b[7];return a[4]=k*d+b*p+h*c-u*r,a[5]=h*d+b*r+u*p-k*c,a[6]=u*d+b*c+k*r-h*p,a[7]=b*d-k*p-h*r-u*c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a};d.multiply=b;d.scale=function(a,b,c){return a[0]=b[0]*
c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a};d.lerp=function(a,b,c,d){var f=1-d;0>y(b,c)&&(d=-d);return a[0]=b[0]*f+c[0]*d,a[1]=b[1]*f+c[1]*d,a[2]=b[2]*f+c[2]*d,a[3]=b[3]*f+c[3]*d,a[4]=b[4]*f+c[4]*d,a[5]=b[5]*f+c[5]*d,a[6]=b[6]*f+c[6]*d,a[7]=b[7]*f+c[7]*d,a};d.invert=function(a,b){var c=z(b);return a[0]=-b[0]/c,a[1]=-b[1]/c,a[2]=-b[2]/c,a[3]=b[3]/c,a[4]=-b[4]/c,a[5]=-b[5]/c,a[6]=-b[6]/c,a[7]=b[7]/c,a};d.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],
a[2]=-b[2],a[3]=b[3],a[4]=-b[4],a[5]=-b[5],a[6]=-b[6],a[7]=b[7],a};d.normalize=function(a,b){var c=z(b);if(0<c){var c=Math.sqrt(c),d=b[0]/c,f=b[1]/c,k=b[2]/c,h=b[3]/c,n=b[4],p=b[5],r=b[6],u=b[7],y=d*n+f*p+k*r+h*u;a[0]=d;a[1]=f;a[2]=k;a[3]=h;a[4]=(n-d*y)/c;a[5]=(p-f*y)/c;a[6]=(r-k*y)/c;a[7]=(u-h*y)/c}return a};d.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===
b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};d.equals=function(a,b){var c=a[0],d=a[1],k=a[2],h=a[3],n=a[4],p=a[5],r=a[6],u=a[7],y=b[0],z=b[1],C=b[2],J=b[3],F=b[4],A=b[5],U=b[6],I=b[7];return Math.abs(c-y)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(d-z)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(k-C)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(C))&&Math.abs(h-J)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(J))&&Math.abs(n-F)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(F))&&
Math.abs(p-A)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(r-U)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(U))&&Math.abs(u-I)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))};var f=r(h(0)),c=r(h(3)),k=r(h(4));d.getReal=c.copy;d.setReal=c.copy;d.mul=b;var y=d.dot=c.dot;a=d.length=c.length;var z=(d.len=a,d.squaredLength=c.squaredLength);d.sqrLen=z},function(a,d,h){function r(a,d,c){var k=d[0],h=d[1],n=d[2],e=d[3],l=d[4];d=d[5];var g=c[0],p=c[1],m=c[2],u=c[3],w=c[4];c=c[5];return a[0]=k*g+
n*p,a[1]=h*g+e*p,a[2]=k*m+n*u,a[3]=h*m+e*u,a[4]=k*w+n*c+l,a[5]=h*w+e*c+d,a}function p(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new n.ARRAY_TYPE(6);n.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new n.ARRAY_TYPE(6);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],
d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};d.fromValues=function(a,d,c,k,h,p){var e=new n.ARRAY_TYPE(6);return e[0]=a,e[1]=d,e[2]=c,e[3]=k,e[4]=h,e[5]=p,e};d.set=function(a,d,c,k,h,n,e){return a[0]=d,a[1]=c,a[2]=k,a[3]=h,a[4]=n,a[5]=e,a};d.invert=function(a,d){var c=d[0],k=d[1],h=d[2],n=d[3],e=d[4],l=d[5],g=c*n-k*h;return g?(g=1/g,a[0]=n*g,a[1]=-k*g,a[2]=-h*g,a[3]=c*g,a[4]=
(h*l-n*e)*g,a[5]=(k*e-c*l)*g,a):null};d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};d.multiply=r;d.rotate=function(a,d,c){var k=d[0],h=d[1],n=d[2],e=d[3],l=d[4];d=d[5];var g=Math.sin(c);c=Math.cos(c);return a[0]=k*c+n*g,a[1]=h*c+e*g,a[2]=k*-g+n*c,a[3]=h*-g+e*c,a[4]=l,a[5]=d,a};d.scale=function(a,d,c){var k=d[1],h=d[2],n=d[3],e=d[4],l=d[5],g=c[0];c=c[1];return a[0]=d[0]*g,a[1]=k*g,a[2]=h*c,a[3]=n*c,a[4]=e,a[5]=l,a};d.translate=function(a,d,c){var k=d[0],h=d[1],n=d[2],e=d[3],l=d[4];d=d[5];var g=
c[0];c=c[1];return a[0]=k,a[1]=h,a[2]=n,a[3]=e,a[4]=k*g+n*c+l,a[5]=h*g+e*c+d,a};d.fromRotation=function(a,d){var c=Math.sin(d),k=Math.cos(d);return a[0]=k,a[1]=c,a[2]=-c,a[3]=k,a[4]=0,a[5]=0,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],a[4]=0,a[5]=0,a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=d[0],a[5]=d[1],a};d.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a};d.subtract=p;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a};d.multiplyScalarAndAdd=function(a,d,c,k){return a[0]=d[0]+c[0]*k,a[1]=d[1]+c[1]*k,a[2]=d[2]+c[2]*k,a[3]=d[3]+c[3]*k,a[4]=d[4]+c[4]*k,a[5]=d[5]+c[5]*k,a};d.exactEquals=
function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]};d.equals=function(a,d){var c=a[0],k=a[1],h=a[2],p=a[3],e=a[4],l=a[5],g=d[0],q=d[1],m=d[2],r=d[3],u=d[4],B=d[5];return Math.abs(c-g)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(k-q)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(q))&&Math.abs(h-m)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(p-r)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(r))&&Math.abs(e-u)<=n.EPSILON*Math.max(1,
Math.abs(e),Math.abs(u))&&Math.abs(l-B)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))};var n=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d["default"]=a,d}(h(0));d.mul=r;d.sub=p},function(a,d,h){function r(a,d,c){var k=d[0],h=d[1],n=d[2];d=d[3];var e=c[0],l=c[1],g=c[2];c=c[3];return a[0]=k*e+n*l,a[1]=h*e+d*l,a[2]=k*g+n*c,a[3]=h*g+d*c,a}function p(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],
a[3]=d[3]-c[3],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new n.ARRAY_TYPE(4);n.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new n.ARRAY_TYPE(4);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a};d.fromValues=function(a,d,c,k){var h=new n.ARRAY_TYPE(4);return h[0]=a,h[1]=
d,h[2]=c,h[3]=k,h};d.set=function(a,d,c,k,h){return a[0]=d,a[1]=c,a[2]=k,a[3]=h,a};d.transpose=function(a,d){if(a===d){var c=d[1];a[1]=d[2];a[2]=c}else a[0]=d[0],a[1]=d[2],a[2]=d[1],a[3]=d[3];return a};d.invert=function(a,d){var c=d[0],k=d[1],h=d[2],n=d[3],e=c*n-h*k;return e?(e=1/e,a[0]=n*e,a[1]=-k*e,a[2]=-h*e,a[3]=c*e,a):null};d.adjoint=function(a,d){var c=d[0];return a[0]=d[3],a[1]=-d[1],a[2]=-d[2],a[3]=c,a};d.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};d.multiply=r;d.rotate=function(a,
d,c){var k=d[0],h=d[1],n=d[2];d=d[3];var e=Math.sin(c);c=Math.cos(c);return a[0]=k*c+n*e,a[1]=h*c+d*e,a[2]=k*-e+n*c,a[3]=h*-e+d*c,a};d.scale=function(a,d,c){var k=d[1],h=d[2],n=d[3],e=c[0];c=c[1];return a[0]=d[0]*e,a[1]=k*e,a[2]=h*c,a[3]=n*c,a};d.fromRotation=function(a,d){var c=Math.sin(d),k=Math.cos(d);return a[0]=k,a[1]=c,a[2]=-c,a[3]=k,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],a};d.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};d.LDU=function(a,d,c,k){return a[2]=k[2]/k[0],c[0]=k[0],c[1]=k[1],c[3]=k[3]-a[2]*c[1],[a,d,c]};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a};d.subtract=p;d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]};d.equals=function(a,d){var c=a[0],k=a[1],h=a[2],p=a[3],e=d[0],l=d[1],g=d[2],q=d[3];return Math.abs(c-e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(k-
l)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(l))&&Math.abs(h-g)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(p-q)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))};d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a};d.multiplyScalarAndAdd=function(a,d,c,k){return a[0]=d[0]+c[0]*k,a[1]=d[1]+c[1]*k,a[2]=d[2]+c[2]*k,a[3]=d[3]+c[3]*k,a};var n=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(d[c]=a[c]);return d["default"]=a,d}(h(0));d.mul=r;d.sub=p},function(a,d,h){function r(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}Object.defineProperty(d,"__esModule",{value:!0});d.vec4=d.vec3=d.vec2=d.quat2=d.quat=d.mat4=d.mat3=d.mat2d=d.mat2=d.glMatrix=void 0;a=r(h(0));var p=r(h(9)),n=r(h(8)),b=r(h(5)),f=r(h(4)),c=r(h(3)),k=r(h(7)),y=r(h(6)),z=r(h(2));h=r(h(1));d.glMatrix=a;d.mat2=p;d.mat2d=
n;d.mat3=b;d.mat4=f;d.quat=c;d.quat2=k;d.vec2=y;d.vec3=z;d.vec4=h}])})},{}],75:[function(h,r,J){(function(a){function d(){n.forEach(function(a){b[p[a]]=!1})}function C(a){b[p[a.keyCode]]=!1}function u(a){b[p[a.keyCode]]=!0}var p=h("vkey"),n=Object.keys(p),b={};d();r.exports=function(a){return a?b[a]:b};a.browser&&(window.addEventListener("keydown",u,!1),window.addEventListener("keyup",C,!1),window.addEventListener("blur",d,!1))}).call(this,h("_process"))},{_process:77,vkey:80}],76:[function(h,r,J){function a(a,
b,d){this.rotation=a;this.center=b;this.distance=d}function d(a,b){var d=b[0],f=b[1],d=d*d+f*f;1<d&&(d=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-d);a[3]=0}h=h("gl-matrix");var C=h.vec3,u=h.mat3,p=h.mat4,n=h.quat,b=new Float32Array(16),f=new Float32Array(16);h=a.prototype;h.view=function(a){a||(a=p.create());f[0]=f[1]=0;f[2]=-this.distance;p.fromRotationTranslation(a,n.conjugate(b,this.rotation),f);p.translate(a,a,C.negate(b,this.center));return a};h.lookAt=function(a,d,f){p.lookAt(b,a,d,f);u.fromMat4(b,
b);n.fromMat3(this.rotation,b);C.copy(this.center,d);this.distance=C.distance(a,d)};h.pan=function(a){var d=this.distance;b[0]=-d*(a[0]||0);b[1]=d*(a[1]||0);b[2]=d*(a[2]||0);C.transformQuat(b,b,this.rotation);C.add(this.center,this.center,b)};h.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};h.rotate=function(a,h){d(b,a);d(f,h);n.invert(f,f);n.multiply(b,b,f);1E-6>n.length(b)||(n.multiply(this.rotation,this.rotation,b),n.normalize(this.rotation,this.rotation))};r.exports=function(c,
b,d){c=c||[0,0,-1];b=b||[0,0,0];d=d||[0,1,0];var f=new a(n.create(),C.create(),1);f.lookAt(c,b,d);return f}},{"gl-matrix":74}],77:[function(h,r,J){function a(){throw Error("setTimeout has not been defined");}function d(){throw Error("clearTimeout has not been defined");}function C(b){if(c===setTimeout)return setTimeout(b,0);if((c===a||!c)&&setTimeout)return c=setTimeout,setTimeout(b,0);try{return c(b,0)}catch(d){try{return c.call(null,b,0)}catch(e){return c.call(this,b,0)}}}function u(a){if(k===clearTimeout)return clearTimeout(a);
if((k===d||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(b){try{return k.call(null,a)}catch(c){return k.call(this,a)}}}function p(){z&&e&&(z=!1,e.length?y=e.concat(y):l=-1,y.length&&n())}function n(){if(!z){var a=C(p);z=!0;for(var b=y.length;b;){e=y;for(y=[];++l<b;)e&&e[l].run();l=-1;b=y.length}e=null;z=!1;u(a)}}function b(a,b){this.fun=a;this.array=b}function f(){}h=r.exports={};var c,k;try{c="function"===typeof setTimeout?setTimeout:a}catch(g){c=a}try{k="function"===
typeof clearTimeout?clearTimeout:d}catch(g){k=d}var y=[],z=!1,e,l=-1;h.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];y.push(new b(a,c));1!==y.length||z||C(n)};b.prototype.run=function(){this.fun.apply(null,this.array)};h.title="browser";h.browser=!0;h.env={};h.argv=[];h.version="";h.versions={};h.on=f;h.addListener=f;h.once=f;h.off=f;h.removeListener=f;h.removeAllListeners=f;h.emit=f;h.prependListener=f;h.prependOnceListener=
f;h.listeners=function(a){return[]};h.binding=function(a){throw Error("process.binding is not supported");};h.cwd=function(){return"/"};h.chdir=function(a){throw Error("process.chdir is not supported");};h.umask=function(){return 0}},{}],78:[function(h,r,J){function a(a){throw Error("resl: "+a);}function d(b,d,c){Object.keys(b).forEach(function(b){0>d.indexOf(b)&&a('invalid parameter "'+b+'" in '+c)})}function C(a,d){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=d}var u=["manifest",
"onDone","onProgress","onError"],p=["type","src","stream","credentials","parser"],n=["onData","onDone"];r.exports=function(b){function f(c,d){if(c in b){var e=b[c];"function"!==typeof e&&a('invalid callback "'+c+'"');return e}return null}function c(a){function b(){if(!(2>g.readyState||1===k.state||-1===k.state)){if(200!==g.status)return r('error loading resource "'+a.name+'"');if(2<g.readyState&&0===k.state){var d;d="binary"===a.type?g.response:g.responseText;if(f.data)try{h=f.data(d)}catch(e){return r(e)}else h=
d}if(3<g.readyState&&0===k.state){if(f.done)try{h=f.done()}catch(e){return r(e)}k.state=1}m[c]=h;k.progress=.75*k.progress+.25;k.ready=a.stream&&!!h||1===k.state;z()}}var c=a.name,d=a.stream,e="binary"===a.type,f=a.parser,g=new XMLHttpRequest,h=null,k=new C(c,function(){1!==k.state&&-1!==k.state&&(g.onreadystatechange=null,g.abort(),k.state=-1)});g.onreadystatechange=d?b:function(){4===g.readyState&&b()};e&&(g.responseType="arraybuffer");a.credentials&&(g.withCredentials=!0);g.open("GET",a.src,!0);
g.send();return k}function h(a,b){function c(){if(0===n.state)if(l.data)try{p=l.data(b)}catch(a){return r(a)}else p=b}function d(a){c();m[k]=p;n.progress=a.lengthComputable?Math.max(n.progress,a.loaded/a.total):.75*n.progress+.25;z(k)}function e(){c();if(0===n.state){if(l.done)try{p=l.done()}catch(a){return r(a)}n.state=1}n.progress=1;n.ready=!0;m[k]=p;g();z("finish "+k)}function f(){r('error loading asset "'+k+'"')}function g(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",
e):b.addEventListener("canplay",e);b.removeEventListener("error",f)}var k=a.name,l=a.parser,n=new C(k,function(){1!==n.state&&-1!==n.state&&(n.state=-1,g(),b.src="")}),p=b;a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",e);else{var q=!1,u=!1;b.addEventListener("loadedmetadata",function(){u=!0;q&&e()});b.addEventListener("canplay",function(){q=!0;u&&e()})}b.addEventListener("error",f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return n}
function r(a){-1!==v&&1!==v&&(v=-1,B.forEach(function(a){a.cancel()}),q?"string"===typeof a?q(Error("resl: "+a)):q(a):console.error("resl error:",a))}function z(a){if(-1!==v&&1!==v){var b=0,c=0;B.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===B.length?(v=1,l(m)):g&&g(b/B.length,a)}}"object"===typeof b&&b||a("invalid or missing configuration");d(b,u,"config");var e=b.manifest;"object"===typeof e&&e||a("missing manifest");var l=f("onDone");l||a("missing onDone() callback");var g=f("onProgress"),
q=f("onError"),m={},v=0,w={text:c,binary:function(a){return c(a)},image:function(a){return h(a,document.createElement("img"))},video:function(a){return h(a,document.createElement("video"))},audio:function(a){return h(a,document.createElement("audio"))}},B=Object.keys(e).map(function(b){function c(b,d){if(b in f.parser){var e=f.parser[b];"function"!==typeof e&&a("invalid parser callback "+b+' for asset "'+b+'"');return e}return d}var f=e[b];"string"===typeof f?f={src:f}:"object"===typeof f&&f||a('invalid asset definition "'+
b+'"');d(f,p,'asset "'+b+'"');var g={};"parser"in f&&("function"===typeof f.parser?g={data:f.parser}:"object"===typeof f.parser&&f.parser?(d(g,n,'parser for asset "'+b+'"'),"onData"in g||a('missing onData callback for parser in asset "'+b+'"'),g={data:c("onData"),done:c("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,d,e){c in f&&(e=f[c]);0>d.indexOf(e)&&a("invalid "+c+' "'+e+'" for asset "'+b+'", possible values: '+d);return e}("type",Object.keys(w),"text"),stream:!!f.stream,
credentials:!!f.credentials,src:function(c,d,e){c in f?e=f[c]:d&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof e&&a("invalid "+c+' for asset "'+b+'", must be a string');return e}("src",!0,""),parser:g}}).map(function(a){return w[a.type](a)});0===B.length&&setTimeout(function(){z("done")},1)}},{}],79:[function(h,r,J){var a=h("events/"),d=h("wheel");r.exports=function(h,r){function p(){n[0]=n[1]=n[2]=0}var n=new a;n.flush=p;p();if("undefined"===typeof window)return n;h=h||window;d(h,function(a){var d=
1===a.deltaMode?12:1;n[0]+=d*(a.deltaX||0);n[1]+=d*(a.deltaY||0);n[2]+=d*(a.deltaZ||0);n.emit("scroll",n);r&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return n}},{"events/":43,wheel:81}],80:[function(h,r,J){var a="undefined"!==typeof window?window.navigator.userAgent:"";h=/OS X/.test(a);J=/Opera/.test(a);a=!/like Gecko/.test(a)&&!J;h=r.exports={0:h?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",
9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",
92:"<meta>",93:h?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:h&&a?"-":"<volume-mute>",174:"<volume-down>",
175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:J?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(r=58;65>r;++r)h[r]=
String.fromCharCode(r);for(r=48;58>r;++r)h[r]=r-48+"";for(r=65;91>r;++r)h[r]=String.fromCharCode(r);for(r=96;106>r;++r)h[r]="<num-"+(r-96)+">";for(r=112;136>r;++r)h[r]="F"+(r-111)},{}],81:[function(h,r,J){function a(a,h,b,f){a[C](d+h,"wheel"==u?b:function(a){!a&&(a=window.event);var d={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==
u?(d.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(d.deltaX=-.025*a.wheelDeltaX)):d.deltaY=a.detail;return b(d)},f||!1)}r.exports=function(d,h,b){a(d,u,h,b);"DOMMouseScroll"==u&&a(d,"MozMousePixelScroll",h,b)};var d="",C,u;window.addEventListener?C="addEventListener":(C="attachEvent",d="on");u="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],82:[function(h,r,J){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var d=
h("./lib/util/check"),C=h("./lib/util/extend"),u=h("./lib/dynamic"),p=h("./lib/util/raf"),n=h("./lib/util/clock"),b=h("./lib/strings"),f=h("./lib/webgl"),c=h("./lib/extension"),k=h("./lib/limits"),y=h("./lib/buffer"),z=h("./lib/elements"),e=h("./lib/texture"),l=h("./lib/renderbuffer"),g=h("./lib/framebuffer"),q=h("./lib/attribute"),m=h("./lib/shader"),v=h("./lib/read"),w=h("./lib/core"),B=h("./lib/stats"),la=h("./lib/timer");r.exports=function(h){function r(){if(0===Ca.length)P&&P.update(),Qa=null;
else{Qa=p.next(r);D();for(var a=Ca.length-1;0<=a;--a){var b=Ca[a];b&&b(R,null,0)}ca.flush();P&&P.update()}}function J(){!Qa&&0<Ca.length&&(Qa=p.next(r))}function H(){Qa&&(p.cancel(r),Qa=null)}function ga(a){a.preventDefault();fa=!0;H();ka.forEach(function(a){a()})}function F(a){ca.getError();fa=!1;Aa.restore();da.restore();oa.restore();V.restore();na.restore();ia.restore();L.restore();P&&P.restore();ya.procs.refresh();J();pa.forEach(function(a){a()})}function A(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=
a[b];if(u.isDynamic(f))e[b]=u.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(u.isDynamic(f[g])){e[b]=u.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}d(!!a,"invalid args to regl({...})");d.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+
b]=d[b]})}}var c=C({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=ya.compile(a,g,f,e,h),l=k.draw,m=k.batch,n=k.scope,p=[];return C(function(a,b){var e;fa&&d.raise("context lost");if("function"===typeof a)return n.call(this,
null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)n.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)n.call(this,a[e],b,e);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function U(a,b){var c=0;ya.procs.poll();var e=b.color;e&&(ca.clearColor(+e[0]||0,+e[1]||0,+e[2]||
0,+e[3]||0),c|=16384);"depth"in b&&(ca.clearDepth(+b.depth),c|=256);"stencil"in b&&(ca.clearStencil(b.stencil|0),c|=1024);d(!!c,"called regl.clear with no buffer specified");ca.clear(c)}function I(b){d.type(b,"function","regl.frame() callback must be a function");Ca.push(b);J();return{cancel:function(){function c(){var b=a(Ca,c);Ca[b]=Ca[Ca.length-1];--Ca.length;0>=Ca.length&&H()}var e=a(Ca,b);d(0<=e,"cannot cancel a frame twice");Ca[e]=c}}}function G(){var a=va.viewport,b=va.scissor_box;a[0]=a[1]=
b[0]=b[1]=0;R.viewportWidth=R.framebufferWidth=R.drawingBufferWidth=a[2]=b[2]=ca.drawingBufferWidth;R.viewportHeight=R.framebufferHeight=R.drawingBufferHeight=a[3]=b[3]=ca.drawingBufferHeight}function D(){R.tick+=1;R.time=t();G();ya.procs.poll()}function ma(){V.refresh();G();ya.procs.refresh();P&&P.update()}function t(){return(n()-N)/1E3}console.log("REGL args are:",h);h=f(h);console.log("REGL configs are:",h);if(!h)return null;var ca=h.gl,M=ca.getContextAttributes(),fa=ca.isContextLost(),Aa=c(ca,
h);if(!Aa)return null;var T=b(),X=B(),S=Aa.extensions,P=la(ca,S),N=n(),O=ca.drawingBufferWidth,Q=ca.drawingBufferHeight,R={tick:0,time:0,viewportWidth:O,viewportHeight:Q,framebufferWidth:O,framebufferHeight:Q,drawingBufferWidth:O,drawingBufferHeight:Q,pixelRatio:h.pixelRatio},O={elements:null,primitive:4,count:-1,offset:0,instances:-1},qa=k(ca,S),oa=y(ca,X,h,function(a){return L.destroyBuffer(a)}),K=z(ca,S,oa,X),L=q(ca,S,qa,X,oa,K,O),da=m(ca,T,X,h),V=e(ca,S,qa,function(){ya.procs.poll()},R,X,h),na=
l(ca,S,qa,X,h),ia=g(ca,S,qa,V,na,X),ya=w(ca,T,S,qa,oa,K,V,ia,{},L,da,O,R,P,h),T=v(ca,ia,ya.procs.poll,R,M,S,qa),va=ya.next,ba=ca.canvas,Ca=[],ka=[],pa=[],za=[h.onDestroy],Qa=null;ba&&(ba.addEventListener("webglcontextlost",ga,!1),ba.addEventListener("webglcontextrestored",F,!1));var Ka=ia.setFBO=A({framebuffer:u.define.call(null,1,"framebuffer")});ma();M=C(A,{clear:function(a){d("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===
a.framebuffer_reglType)for(var b=0;6>b;++b)Ka(C({framebuffer:a.framebuffer.faces[b]},a),U);else Ka(a,U);else U(null,a)},prop:u.define.bind(null,1),context:u.define.bind(null,2),"this":u.define.bind(null,3),draw:A({}),buffer:function(a){return oa.create(a,34962,!1,!1)},elements:function(a){return K.create(a,!1)},texture:V.create2D,cube:V.createCube,renderbuffer:na.create,framebuffer:ia.create,framebufferCube:ia.createCube,vao:L.createVAO,attributes:M,frame:I,on:function(a,b){d.type(b,"function","listener callback must be a function");
var c;switch(a){case "frame":return I(b);case "lost":c=ka;break;case "restore":c=pa;break;case "destroy":c=za;break;default:d.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:qa,hasExtension:function(a){return 0<=qa.extensions.indexOf(a.toLowerCase())},read:T,destroy:function(){Ca.length=0;H();ba&&(ba.removeEventListener("webglcontextlost",ga),ba.removeEventListener("webglcontextrestored",
F));da.clear();ia.clear();na.clear();L.clear();V.clear();K.clear();oa.clear();P&&P.clear();za.forEach(function(a){a()})},_gl:ca,_refresh:ma,poll:function(){D();P&&P.update()},now:t,stats:X});h.onDone(null,M);return M}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,
"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

<!DOCTYPE html>
      <html>
        <head>
          <title>example/tile.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function C(aa,Ra,k){function y(f,c){if(!Ra[f]){if(!aa[f]){var x="function"==typeof require&&require;if(!c&&x)return x(f,!0);if(q)return q(f,!0);x=Error("Cannot find module '"+f+"'");throw x.code="MODULE_NOT_FOUND",x;}x=Ra[f]={exports:{}};aa[f][0].call(x.exports,function(a){return y(aa[f][1][a]||a)},x,x.exports,C,aa,Ra,k)}return Ra[f].exports}for(var q="function"==typeof require&&require,I=0;I<k.length;I++)y(k[I]);return y}return C})()({1:[function(C,aa,Ra){var k=C("../regl")(),y=C("mouse-change")();
C("resl")({manifest:{map:{type:"text",src:"assets/map.json",parser:JSON.parse},tiles:{type:"image",src:"assets/tiles.png",parser:k.texture}},onDone:function(q){var I=q.map,f=k({frag:"\n      precision mediump float;\n      uniform sampler2D map, tiles;\n      uniform vec2 mapSize, tileSize;\n      varying vec2 uv;\n      void main() {\n        vec2 tileCoord = floor(255.0 * texture2D(map, floor(uv) / mapSize).ra);\n        gl_FragColor = texture2D(tiles, (tileCoord + fract(uv)) / tileSize);\n      }",
vert:"\n      precision mediump float;\n      attribute vec2 position;\n      uniform vec4 view;\n      varying vec2 uv;\n      void main() {\n        uv = mix(view.xw, view.zy, 0.5 * (1.0 + position));\n        gl_Position = vec4(position, 1, 1);\n      }",depth:{enable:!1},uniforms:{tiles:q.tiles,tileSize:[16,16],map:k.texture(I),mapSize:[I[0].length,I.length],view:k.prop("view")},attributes:{position:[-1,-1,1,-1,-1,1,1,1,-1,1,1,-1]},count:6});k.frame(function(c){var k=c.viewportWidth,a=c.viewportHeight;
c=I[0].length*y.x/k;var w=I.length*y.y/a,k=k/a*10;f({view:[c-.5*k,w-5,c+.5*k,w+5]})})}})},{"../regl":41,"mouse-change":38,resl:40}],2:[function(C,aa,Ra){function k(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var y=C("./util/sorted-object-keys"),q=C("./util/check"),I=C("./util/values"),f=C("./constants/dtypes.json"),c=C("./util/is-typed-array"),x=C("./util/is-ndarray"),a=C("./constants/primitives.json"),
w="attributes elements offset count primitive instances".split(" ");aa.exports=function(la,W,O,F,r,D,z){function B(a){if(a!==P.currentVAO){var c=W.oes_vertex_array_object;a?c.bindVertexArrayOES(a.vao):c.bindVertexArrayOES(null);P.currentVAO=a}}function H(a){if(a!==P.currentVAO){if(a)a.bindAttrs();else{for(var c=W.angle_instanced_arrays,f=0;f<g.length;++f){var d=g[f];d.buffer?(la.enableVertexAttribArray(f),d.buffer.bind(),la.vertexAttribPointer(f,d.size,d.type,d.normalized,d.stride,d.offfset),c&&d.divisor&&
c.vertexAttribDivisorANGLE(f,d.divisor)):(la.disableVertexAttribArray(f),la.vertexAttrib4f(f,d.x,d.y,d.z,d.w))}z.elements?la.bindBuffer(34963,z.elements.buffer.buffer):la.bindBuffer(34963,null)}P.currentVAO=a}}function m(){I(A).forEach(function(a){a.destroy()})}function Q(){this.id=++d;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=W.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;A[this.id]=this;this.buffers=
[]}function Ia(){W.oes_vertex_array_object&&I(A).forEach(function(a){a.refresh()})}var h=O.maxAttributes,g=Array(h);for(O=0;O<h;++O)g[O]=new k;var d=0,A={},P={Record:k,scope:{},state:g,currentVAO:null,targetVAO:null,restore:W.oes_vertex_array_object?Ia:function(){},createVAO:function(d){function n(d){var ea;if(Array.isArray(d))ea=d,g.elements&&g.ownsElements&&g.elements.destroy(),g.elements=null,g.ownsElements=!1,g.offset=0,g.count=0,g.instances=-1,g.primitive=4;else{q("object"===typeof d,"invalid arguments for create vao");
q("attributes"in d,"must specify attributes for vao");if(d.elements){var b=d.elements;g.ownsElements?("function"===typeof b&&"elements"===b._reglType?g.elements.destroy():g.elements(b),g.ownsElements=!1):D.getElements(d.elements)?(g.elements=d.elements,g.ownsElements=!1):(g.elements=D.create(d.elements),g.ownsElements=!0)}else g.elements=null,g.ownsElements=!1;ea=d.attributes;g.offset=0;g.count=-1;g.instances=-1;g.primitive=4;g.elements&&(g.count=g.elements._elements.vertCount,g.primitive=g.elements._elements.primType);
"offset"in d&&(g.offset=d.offset|0);"count"in d&&(g.count=d.count|0);"instances"in d&&(g.instances=d.instances|0);"primitive"in d&&(q(d.primitive in a,"bad primitive type: "+d.primitive),g.primitive=a[d.primitive]);q.optional(function(){for(var b=y(d),a=0;a<b.length;++a)q(0<=w.indexOf(b[a]),'invalid option for vao: "'+b[a]+'" valid options are '+w)});q(Array.isArray(ea),"attributes must be an array")}q(ea.length<h,"too many attributes");q(0<ea.length,"must specify at least one attribute");var b={},
e=g.attributes;e.length=ea.length;for(var Z=0;Z<ea.length;++Z){var A=ea[Z],m=e[Z]=new k,Q=A.data||A;if(Array.isArray(Q)||c(Q)||x(Q)){var z;g.buffers[Z]&&(z=g.buffers[Z],c(Q)&&z._buffer.byteLength>=Q.byteLength?z.subdata(Q):(z.destroy(),g.buffers[Z]=null));g.buffers[Z]||(z=g.buffers[Z]=r.create(A,34962,!1,!0));m.buffer=r.getBuffer(z);m.size=m.buffer.dimension|0;m.normalized=!1;m.type=m.buffer.dtype;m.offset=0;m.stride=0;m.divisor=0;m.state=1;b[Z]=1}else r.getBuffer(A)?(m.buffer=r.getBuffer(A),m.size=
m.buffer.dimension|0,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1):r.getBuffer(A.buffer)?(m.buffer=r.getBuffer(A.buffer),m.size=(+A.size||m.buffer.dimension)|0,m.normalized=!!A.normalized||!1,"type"in A?(q.parameter(A.type,f,"invalid buffer type"),m.type=f[A.type]):m.type=m.buffer.dtype,m.offset=(A.offset||0)|0,m.stride=(A.stride||0)|0,m.divisor=(A.divisor||0)|0,m.state=1,q(1<=m.size&&4>=m.size,"size must be between 1 and 4"),q(0<=m.offset,"invalid offset"),q(0<=
m.stride&&255>=m.stride,"stride must be between 0 and 255"),q(0<=m.divisor,"divisor must be positive"),q(!m.divisor||!!W.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in A?(q(0<Z,"first attribute must not be a constant"),m.x=+A.x||0,m.y=+A.y||0,m.z=+A.z||0,m.w=+A.w||0,m.state=2):q(!1,"invalid attribute spec for location "+Z)}for(z=0;z<g.buffers.length;++z)!b[z]&&g.buffers[z]&&(g.buffers[z].destroy(),g.buffers[z]=null);g.refresh();return n}var g=new Q;F.vaoCount+=
1;n.destroy=function(){for(var a=0;a<g.buffers.length;++a)g.buffers[a]&&g.buffers[a].destroy();g.buffers.length=0;g.ownsElements&&(g.elements.destroy(),g.elements=null,g.ownsElements=!1);g.destroy()};n._vao=g;n._reglType="vao";return n(d)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var c=0;c<g.length;++c){var d=g[c];d.buffer===a&&(la.disableVertexAttribArray(c),d.buffer=null)}},setVAO:W.oes_vertex_array_object?B:H,clear:W.oes_vertex_array_object?
m:function(){}};Q.prototype.bindAttrs=function(){for(var a=W.angle_instanced_arrays,c=this.attributes,d=0;d<c.length;++d){var f=c[d];f.buffer?(la.enableVertexAttribArray(d),la.bindBuffer(34962,f.buffer.buffer),la.vertexAttribPointer(d,f.size,f.type,f.normalized,f.stride,f.offset),a&&f.divisor&&a.vertexAttribDivisorANGLE(d,f.divisor)):(la.disableVertexAttribArray(d),la.vertexAttrib4f(d,f.x,f.y,f.z,f.w))}for(a=c.length;a<h;++a)la.disableVertexAttribArray(a);(a=D.getElements(this.elements))?la.bindBuffer(34963,
a.buffer.buffer):la.bindBuffer(34963,null)};Q.prototype.refresh=function(){var a=W.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),P.currentVAO=null,a.bindVertexArrayOES(null))};Q.prototype.destroy=function(){if(this.vao){var a=W.oes_vertex_array_object;this===P.currentVAO&&(P.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);A[this.id]&&(delete A[this.id],
--F.vaoCount)};return P}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(C,aa,Ra){function k(a){return O[Object.prototype.toString.call(a)]|0}function y(a,c){for(var f=0;f<c.length;++f)a[f]=c[f]}function q(a,c,f,k,x,w,h){for(var g=0,d=0;d<f;++d)for(var A=0;A<k;++A)a[g++]=c[x*d+w*A+h]}var I=C("./util/sorted-object-keys"),f=C("./util/check"),c=C("./util/is-typed-array"),
x=C("./util/is-ndarray"),a=C("./util/values"),w=C("./util/pool");Ra=C("./util/flatten");var la=Ra.flatten,W=Ra.shape,O=C("./constants/arraytypes.json"),F=C("./constants/dtypes.json"),r=C("./constants/usage.json"),D=[];D[5120]=1;D[5122]=2;D[5124]=4;D[5121]=1;D[5123]=2;D[5125]=4;D[5126]=4;aa.exports=function(z,B,O,m){function Q(a){this.id=d++;this.buffer=z.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;O.profile&&(this.stats={size:0})}
function Ia(a,c,f){a.byteLength=c.byteLength;z.bufferData(a.type,c,f)}function h(a,d,g,h,m,b){a.usage=g;if(Array.isArray(d)){if(a.dtype=h||5126,0<d.length)if(Array.isArray(d[0])){m=W(d);for(var e=h=1;e<m.length;++e)h*=m[e];a.dimension=h;d=la(d,m,a.dtype);Ia(a,d,g);b?a.persistentData=d:w.freeType(d)}else"number"===typeof d[0]?(a.dimension=m,m=w.allocType(a.dtype,d.length),y(m,d),Ia(a,m,g),b?a.persistentData=m:w.freeType(m)):c(d[0])?(a.dimension=d[0].length,a.dtype=h||k(d[0])||5126,d=la(d,[d.length,
d[0].length],a.dtype),Ia(a,d,g),b?a.persistentData=d:w.freeType(d)):f.raise("invalid buffer data")}else if(c(d))a.dtype=h||k(d),a.dimension=m,Ia(a,d,g),b&&(a.persistentData=new Uint8Array(new Uint8Array(d.buffer)));else if(x(d)){m=d.shape;var Z=d.stride,e=d.offset,A=0,r=0,z=0,Q=0;1===m.length?(A=m[0],r=1,z=Z[0],Q=0):2===m.length?(A=m[0],r=m[1],z=Z[0],Q=Z[1]):f.raise("invalid shape");a.dtype=h||k(d.data)||5126;a.dimension=r;m=w.allocType(a.dtype,A*r);q(m,d.data,A,r,z,Q,e);Ia(a,m,g);b?a.persistentData=
m:w.freeType(m)}else d instanceof ArrayBuffer?(a.dtype=5121,a.dimension=m,Ia(a,d,g),b&&(a.persistentData=new Uint8Array(new Uint8Array(d)))):f.raise("invalid buffer data")}function g(a){B.bufferCount--;m(a);var c=a.buffer;f(c,"buffer must not be deleted already");z.deleteBuffer(c);a.buffer=null;delete A[a.id]}var d=0,A={};Q.prototype.bind=function(){z.bindBuffer(this.type,this.buffer)};Q.prototype.destroy=function(){g(this)};var P=[];O.profile&&(B.getTotalBufferSize=function(){var a=0;I(A).forEach(function(c){a+=
A[c].stats.size});return a});return{create:function(a,d,m,M){function P(a){var b=35044,d=null,g=0,n=0,m=1;Array.isArray(a)||c(a)||x(a)||a instanceof ArrayBuffer?d=a:"number"===typeof a?g=a|0:a&&(f.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(f(null===d||Array.isArray(d)||c(d)||x(d),"invalid data for buffer"),d=a.data),"usage"in a&&(f.parameter(a.usage,r,"invalid buffer usage"),b=r[a.usage]),"type"in a&&(f.parameter(a.type,F,"invalid buffer type"),n=F[a.type]),
"dimension"in a&&(f.type(a.dimension,"number","invalid dimension"),m=a.dimension|0),"length"in a&&(f.nni(g,"buffer length must be a nonnegative integer"),g=a.length|0));e.bind();d?h(e,d,b,n,m,M):(g&&z.bufferData(e.type,g,b),e.dtype=n||5121,e.usage=b,e.dimension=m,e.byteLength=g);O.profile&&(e.stats.size=e.byteLength*D[e.dtype]);return P}function b(a,b){f(b+a.byteLength<=e.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+
b+" to a buffer of size "+e.byteLength);z.bufferSubData(e.type,b,a)}B.bufferCount++;var e=new Q(d);A[e.id]=e;m||P(a);P._reglType="buffer";P._buffer=e;P.subdata=function(a,d){var g=(d||0)|0,n;e.bind();if(c(a)||a instanceof ArrayBuffer)b(a,g);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var h=w.allocType(e.dtype,a.length);y(h,a);b(h,g);w.freeType(h)}else Array.isArray(a[0])||c(a[0])?(n=W(a),h=la(a,n,e.dtype),b(h,g),w.freeType(h)):f.raise("invalid buffer data")}else if(x(a)){n=
a.shape;var m=a.stride,A=h=0,r=0,z=0;1===n.length?(h=n[0],A=1,r=m[0],z=0):2===n.length?(h=n[0],A=n[1],r=m[0],z=m[1]):f.raise("invalid shape");n=Array.isArray(a.data)?e.dtype:k(a.data);n=w.allocType(n,h*A);q(n,a.data,h,A,r,z,a.offset);b(n,g);w.freeType(n)}else f.raise("invalid data for buffer subdata");return P};O.profile&&(P.stats=e.stats);P.destroy=function(){g(e)};return P},createStream:function(a,c){var d=P.pop();d||(d=new Q(a));d.bind();h(d,c,35040,0,1,!1);return d},destroyStream:function(a){P.push(a)},
clear:function(){a(A).forEach(g);P.forEach(g)},getBuffer:function(a){return a&&a._buffer instanceof Q?a._buffer:null},restore:function(){a(A).forEach(function(a){a.buffer=z.createBuffer();z.bindBuffer(a.type,a.buffer);z.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:h}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,
"./util/values":36}],4:[function(C,aa,Ra){aa.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(C,aa,Ra){aa.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(C,aa,Ra){aa.exports=
{points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(C,aa,Ra){aa.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(C,aa,Ra){function k(a){return Array.isArray(a)||O(a)||F(a)}function y(a){return a.sort(function(a,c){return"viewport"===a?-1:"viewport"===c?1:a<c?-1:1})}function q(a,c,d,f){this.thisDep=a;this.contextDep=c;this.propDep=d;this.append=f}function I(a){return a&&!(a.thisDep||a.contextDep||
a.propDep)}function f(a){return new q(!1,!1,!1,a)}function c(a,c){var d=a.type;if(0===d)return d=a.data.length,new q(!0,1<=d,2<=d,c);if(4===d)return d=a.data,new q(d.thisDep,d.contextDep,d.propDep,c);if(5===d)return new q(!1,!1,!1,c);if(6===d){for(var f=d=!1,g=!1,b=0;b<a.data.length;++b){var e=a.data[b];1===e.type?g=!0:2===e.type?f=!0:3===e.type?d=!0:0===e.type?(d=!0,e=e.data,1<=e&&(f=!0),2<=e&&(g=!0)):4===e.type&&(d=d||e.data.thisDep,f=f||e.data.contextDep,g=g||e.data.propDep)}return new q(d,f,g,
c)}return new q(3===d,2===d,1===d,c)}var x=C("./util/sorted-object-keys"),a=C("./util/check"),w=C("./util/extend"),la=C("./util/codegen"),W=C("./util/loop"),O=C("./util/is-typed-array"),F=C("./util/is-ndarray"),r=C("./util/is-array-like"),D=C("./dynamic"),z=C("./constants/primitives.json"),B=C("./constants/dtypes.json"),H=["x","y","z","w"],m="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Q={0:0,1:1,zero:0,
one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ia="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
h={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},g={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},d={frag:35632,vert:35633},A={cw:2304,ccw:2305},P=new q(!1,!1,!1,function(){});aa.exports=function(O,n,F,M,fa,b,e,Z,Ka,Ke,zb,Xb,na,Qa,X){function K(a){return a.replace(".","_")}function L(a,p,b){var d=K(a);
ba.push(a);t[d]=G[d]=!!b;R[d]=p}function T(a,p,b){var d=K(a);ba.push(a);Array.isArray(b)?(G[d]=b.slice(),t[d]=b.slice()):G[d]=t[d]=b;wa[d]=p}function C(){var b=la(),p=b.link,d=b.global;b.id=lc++;b.batchId="0";var c=p(oa),f=b.shared={props:"a0"};x(oa).forEach(function(a){f[a]=d.def(c,".",a)});a.optional(function(){b.CHECK=p(a);b.commandStr=a.guessCommand();b.command=p(b.commandStr);b.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",p(d),",",this.command,");")};l.invalidBlendCombinations=
Ia});var R=b.next={},g=b.current={};x(wa).forEach(function(a){Array.isArray(G[a])&&(R[a]=d.def(f.next,".",a),g[a]=d.def(f.current,".",a))});var e=b.constants={};x(l).forEach(function(a){e[a]=d.def(JSON.stringify(l[a]))});b.invoke=function(a,d){switch(d.type){case 0:var c=["this",f.context,f.props,b.batchId];return a.def(p(d.data),".call(",c.slice(0,Math.max(d.data.length+1,4)),")");case 1:return a.def(f.props,d.data);case 2:return a.def(f.context,d.data);case 3:return a.def("this",d.data);case 4:return d.data.append(b,
a),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(p){return b.invoke(a,p)})}};b.attribCache={};var Id={};b.scopeAttrib=function(a){a=n.id(a);if(a in Id)return Id[a];var b=Ke.scope[a];b||(b=Ke.scope[a]=new ha);return Id[a]=p(b)};return b}function N(a){var p=a["static"];a=a.dynamic;var b;if("profile"in p){var d=!!p.profile;b=f(function(a,p){return d});b.enable=d}else if("profile"in a){var l=a.profile;b=c(l,function(a,p){return a.invoke(p,l)})}return b}function Rb(b,p){var d=
b["static"],l=b.dynamic;if("framebuffer"in d){var R=d.framebuffer;return R?(R=Z.getFramebuffer(R),a.command(R,"invalid framebuffer object"),f(function(a,p){var b=a.link(R),d=a.shared;p.set(d.framebuffer,".next",b);d=d.context;p.set(d,".framebufferWidth",b+".width");p.set(d,".framebufferHeight",b+".height");return b})):f(function(a,p){var b=a.shared;p.set(b.framebuffer,".next","null");b=b.context;p.set(b,".framebufferWidth",b+".drawingBufferWidth");p.set(b,".framebufferHeight",b+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var g=l.framebuffer;return c(g,function(b,p){var d=b.invoke(p,g),c=b.shared,l=c.framebuffer,ia=p.def(l,".getFramebuffer(",d,")");a.optional(function(){b.assert(p,"!"+d+"||"+ia,"invalid framebuffer object")});p.set(l,".next",ia);c=c.context;p.set(c,".framebufferWidth",ia+"?"+ia+".width:"+c+".drawingBufferWidth");p.set(c,".framebufferHeight",ia+"?"+ia+".height:"+c+".drawingBufferHeight");return ia})}return null}function Za(b,p,d){function l(b){if(b in f){var ia=
f[b];a.commandType(ia,"object","invalid "+b,d.commandStr);var g=!0,e=ia.x|0,h=ia.y|0,n,m;"width"in ia?(n=ia.width|0,a.command(0<=n,"invalid "+b,d.commandStr)):g=!1;"height"in ia?(m=ia.height|0,a.command(0<=m,"invalid "+b,d.commandStr)):g=!1;return new q(!g&&p&&p.thisDep,!g&&p&&p.contextDep,!g&&p&&p.propDep,function(a,b){var p=a.shared.context,d=n;"width"in ia||(d=b.def(p,".","framebufferWidth","-",e));var c=m;"height"in ia||(c=b.def(p,".","framebufferHeight","-",h));return[e,h,d,c]})}if(b in R){var t=
R[b],g=c(t,function(p,d){var c=p.invoke(d,t);a.optional(function(){p.assert(d,c+"&&typeof "+c+'==="object"',"invalid "+b)});var l=p.shared.context,ia=d.def(c,".x|0"),f=d.def(c,".y|0"),g=d.def('"width" in ',c,"?",c,".width|0:","(",l,".","framebufferWidth","-",ia,")"),R=d.def('"height" in ',c,"?",c,".height|0:","(",l,".","framebufferHeight","-",f,")");a.optional(function(){p.assert(d,g+">=0&&"+R+">=0","invalid "+b)});return[ia,f,g,R]});p&&(g.thisDep=g.thisDep||p.thisDep,g.contextDep=g.contextDep||p.contextDep,
g.propDep=g.propDep||p.propDep);return g}return p?new q(p.thisDep,p.contextDep,p.propDep,function(a,b){var p=a.shared.context;return[0,0,b.def(p,".","framebufferWidth"),b.def(p,".","framebufferHeight")]}):null}var f=b["static"],R=b.dynamic;if(b=l("viewport")){var g=b;b=new q(b.thisDep,b.contextDep,b.propDep,function(a,b){var p=g.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",p[2]);b.set(d,".viewportHeight",p[3]);return p})}return{viewport:b,scissor_box:l("scissor.box")}}function S(b,p){var d=
b["static"];if("string"===typeof d.frag&&"string"===typeof d.vert){if(0<x(p.dynamic).length)return null;var d=p["static"],c=x(d);if(0<c.length&&"number"===typeof d[c[0]]){for(var l=[],f=0;f<c.length;++f)a("number"===typeof d[c[f]],"must specify all vertex attribute locations when using vaos"),l.push([d[c[f]]|0,c[f]]);return l}}return null}function u(b,p,l){function g(b){if(b in R){var p=n.id(R[b]);a.optional(function(){zb.shader(d[b],p,a.guessCommand())});var l=f(function(){return p});l.id=p;return l}if(b in
e){var ia=e[b];return c(ia,function(p,c){var l=p.invoke(c,ia),f=c.def(p.shared.strings,".id(",l,")");a.optional(function(){c(p.shared.shader,".shader(",d[b],",",f,",",p.command,");")});return f})}return null}var R=b["static"],e=b.dynamic,h=g("frag"),m=g("vert"),Id=null;I(h)&&I(m)?(Id=zb.program(m.id,h.id,null,l),b=f(function(a,b){return a.link(Id)})):b=new q(h&&h.thisDep||m&&m.thisDep,h&&h.contextDep||m&&m.contextDep,h&&h.propDep||m&&m.propDep,function(b,p){var d=b.shared.shader,c;c=h?h.append(b,
p):p.def(d,".","frag");var l;l=m?m.append(b,p):p.def(d,".","vert");var f=d+".program("+l+","+c;a.optional(function(){f+=","+b.command});return p.def(f+")")});return{frag:h,vert:m,progVar:b,program:Id}}function ka(d,p){function l(b,d){if(b in g){var ia=g[b]|0;d?e.offset=ia:e.instances=ia;a.command(!d||0<=ia,"invalid "+b,p.commandStr);return f(function(a,b){d&&(a.OFFSET=ia);return ia})}if(b in R){var n=R[b];return c(n,function(p,c){var l=p.invoke(c,n);d&&(p.OFFSET=l,a.optional(function(){p.assert(c,
l+">=0","invalid "+b)}));return l})}if(d){if(Id)return f(function(a,b){return a.OFFSET=0});if(h)return new q(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(h)return new q(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var g=d["static"],R=d.dynamic,e={},h=!1,m=function(){if("vao"in g){var a=g.vao;null!==a&&null===Ke.getVAO(a)&&
(a=Ke.createVAO(a));h=!0;e.vao=a;return f(function(b){var p=Ke.getVAO(a);return p?b.link(p):"null"})}if("vao"in R){h=!0;var b=R.vao;return c(b,function(a,p){var d=a.invoke(p,b);return p.def(a.shared.vao+".getVAO("+d+")")})}return null}(),Id=!1,n=function(){if("elements"in g){var d=g.elements;e.elements=d;if(k(d)){var l=e.elements=b.create(d,!0),d=b.getElements(l);Id=!0}else d&&(d=b.getElements(d),Id=!0,a.command(d,"invalid elements",p.commandStr));l=f(function(a,b){if(d){var p=a.link(d);return a.ELEMENTS=
p}return a.ELEMENTS=null});l.value=d;return l}if("elements"in R){Id=!0;var ia=R.elements;return c(ia,function(b,p){var d=b.shared,c=d.isBufferArgs,d=d.elements,l=b.invoke(p,ia),f=p.def("null"),c=p.def(c,"(",l,")"),g=b.cond(c).then(f,"=",d,".createStream(",l,");")["else"](f,"=",d,".getElements(",l,");");a.optional(function(){b.assert(g["else"],"!"+l+"||"+f,"invalid elements")});p.entry(g);p.exit(b.cond(c).then(d,".destroyStream(",f,");"));return b.ELEMENTS=f})}return h?new q(m.thisDep,m.contextDep,
m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),Ic=l("offset",!0),t=function(){if("primitive"in g){var b=g.primitive;e.primitive=b;a.commandParameter(b,z,"invalid primitve",p.commandStr);return f(function(a,p){return z[b]})}if("primitive"in R){var d=R.primitive;return c(d,function(b,p){var c=b.constants.primTypes,l=b.invoke(p,d);a.optional(function(){b.assert(p,l+" in "+c,"invalid primitive, must be one of "+
x(z))});return p.def(c,"[",l,"]")})}return Id?I(n)?n.value?f(function(a,b){return b.def(a.ELEMENTS,".primType")}):f(function(){return 4}):new q(n.thisDep,n.contextDep,n.propDep,function(a,b){var p=a.ELEMENTS;return b.def(p,"?",p,".primType:",4)}):h?new q(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),u=function(){if("count"in g){var b=g.count|0;e.count=b;a.command("number"===typeof b&&0<=b,"invalid vertex count",
p.commandStr);return f(function(){return b})}if("count"in R){var d=R.count;return c(d,function(b,p){var c=b.invoke(p,d);a.optional(function(){b.assert(p,"typeof "+c+'==="number"&&'+c+">=0&&"+c+"===("+c+"|0)","invalid vertex count")});return c})}if(Id){if(I(n)){if(n)return Ic?new q(Ic.thisDep,Ic.contextDep,Ic.propDep,function(b,p){var d=p.def(b.ELEMENTS,".vertCount-",b.OFFSET);a.optional(function(){b.assert(p,d+">=0","invalid vertex offset/element buffer too small")});return d}):f(function(a,b){return b.def(a.ELEMENTS,
".vertCount")});var l=f(function(){return-1});a.optional(function(){l.MISSING=!0});return l}var ia=new q(n.thisDep||Ic.thisDep,n.contextDep||Ic.contextDep,n.propDep||Ic.propDep,function(a,b){var p=a.ELEMENTS;return a.OFFSET?b.def(p,"?",p,".vertCount-",a.OFFSET,":-1"):b.def(p,"?",p,".vertCount:-1")});a.optional(function(){ia.DYNAMIC=!0});return ia}return h?new q(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),oa=
l("instances",!1);return{elements:n,primitive:t,count:u,instances:oa,offset:Ic,vao:m,vaoActive:h,elementsActive:Id,"static":e}}function ca(b,p){var d=b["static"],l=b.dynamic,R={};ba.forEach(function(b){function ia(a,p){if(b in d){var g=a(d[b]);R[e]=f(function(){return g})}else if(b in l){var h=l[b];R[e]=c(h,function(a,b){return p(a,b,a.invoke(b,h))})}}var e=K(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return ia(function(d){a.commandType(d,
"boolean",b,p.commandStr);return d},function(p,d,c){a.optional(function(){p.assert(d,"typeof "+c+'==="boolean"',"invalid flag "+b,p.commandStr)});return c});case "depth.func":return ia(function(d){a.commandParameter(d,h,"invalid "+b,p.commandStr);return h[d]},function(p,d,c){var l=p.constants.compareFuncs;a.optional(function(){p.assert(d,c+" in "+l,"invalid "+b+", must be one of "+x(h))});return d.def(l,"[",c,"]")});case "depth.range":return ia(function(b){a.command(r(b)&&2===b.length&&"number"===
typeof b[0]&&"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",p.commandStr);return b},function(b,p,d){a.optional(function(){b.assert(p,b.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var c=p.def("+",d,"[0]"),l=p.def("+",d,"[1]");return[c,l]});case "blend.func":return ia(function(b){a.commandType(b,"object","blend.func",p.commandStr);var d="srcRGB"in b?b.srcRGB:b.src,c="srcAlpha"in
b?b.srcAlpha:b.src,l="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;a.commandParameter(d,Q,e+".srcRGB",p.commandStr);a.commandParameter(c,Q,e+".srcAlpha",p.commandStr);a.commandParameter(l,Q,e+".dstRGB",p.commandStr);a.commandParameter(b,Q,e+".dstAlpha",p.commandStr);a.command(-1===Ia.indexOf(d+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+l+")",p.commandStr);return[Q[d],Q[l],Q[c],Q[b]]},function(p,d,c){function l(f,g){var R=d.def('"',f,g,'" in ',c,"?",c,".",
f,g,":",c,".",f);a.optional(function(){p.assert(d,R+" in "+ia,"invalid "+b+"."+f+g+", must be one of "+x(Q))});return R}var ia=p.constants.blendFuncs;a.optional(function(){p.assert(d,c+"&&typeof "+c+'==="object"',"invalid blend func, must be an object")});var f=l("src","RGB"),g=l("dst","RGB");a.optional(function(){p.assert(d,p.constants.invalidBlendCombinations+".indexOf("+f+'+", "+'+g+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var R=d.def(ia,"[",f,"]"),e=d.def(ia,"[",l("src",
"Alpha"),"]"),h=d.def(ia,"[",g,"]"),m=d.def(ia,"[",l("dst","Alpha"),"]");return[R,h,e,m]});case "blend.equation":return ia(function(d){if("string"===typeof d)return a.commandParameter(d,ta,"invalid "+b,p.commandStr),[ta[d],ta[d]];if("object"===typeof d)return a.commandParameter(d.rgb,ta,b+".rgb",p.commandStr),a.commandParameter(d.alpha,ta,b+".alpha",p.commandStr),[ta[d.rgb],ta[d.alpha]];a.commandRaise("invalid blend.equation",p.commandStr)},function(d,p,c){var l=d.constants.blendEquations,ia=p.def(),
f=p.def(),g=d.cond("typeof ",c,'==="string"');a.optional(function(){function a(b,p,c){d.assert(b,c+" in "+l,"invalid "+p+", must be one of "+x(ta))}a(g.then,b,c);d.assert(g["else"],c+"&&typeof "+c+'==="object"',"invalid "+b);a(g["else"],b+".rgb",c+".rgb");a(g["else"],b+".alpha",c+".alpha")});g.then(ia,"=",f,"=",l,"[",c,"];");g["else"](ia,"=",l,"[",c,".rgb];",f,"=",l,"[",c,".alpha];");p(g);return[ia,f]});case "blend.color":return ia(function(b){a.command(r(b)&&4===b.length,"blend.color must be a 4d array",
p.commandStr);return W(4,function(a){return+b[a]})},function(b,d,p){a.optional(function(){b.assert(d,b.shared.isArrayLike+"("+p+")&&"+p+".length===4","blend.color must be a 4d array")});return W(4,function(a){return d.def("+",p,"[",a,"]")})});case "stencil.mask":return ia(function(b){a.commandType(b,"number",e,p.commandStr);return b|0},function(b,d,p){a.optional(function(){b.assert(d,"typeof "+p+'==="number"',"invalid stencil.mask")});return d.def(p,"|0")});case "stencil.func":return ia(function(d){a.commandType(d,
"object",e,p.commandStr);var c=d.cmp||"keep",l=d.ref||0;d="mask"in d?d.mask:-1;a.commandParameter(c,h,b+".cmp",p.commandStr);a.commandType(l,"number",b+".ref",p.commandStr);a.commandType(d,"number",b+".mask",p.commandStr);return[h[c],l,d]},function(b,d,p){var c=b.constants.compareFuncs;a.optional(function(){function a(){b.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(p+"&&typeof ",p,'==="object"');a('!("cmp" in ',p,")||(",p,".cmp in ",c,")")});var l=d.def('"cmp" in ',
p,"?",c,"[",p,".cmp]",":",7680),ia=d.def(p,".ref|0"),f=d.def('"mask" in ',p,"?",p,".mask|0:-1");return[l,ia,f]});case "stencil.opFront":case "stencil.opBack":return ia(function(d){a.commandType(d,"object",e,p.commandStr);var c=d.fail||"keep",l=d.zfail||"keep";d=d.zpass||"keep";a.commandParameter(c,g,b+".fail",p.commandStr);a.commandParameter(l,g,b+".zfail",p.commandStr);a.commandParameter(d,g,b+".zpass",p.commandStr);return["stencil.opBack"===b?1029:1028,g[c],g[l],g[d]]},function(d,p,c){function l(f){a.optional(function(){d.assert(p,
'!("'+f+'" in '+c+")||("+c+"."+f+" in "+ia+")","invalid "+b+"."+f+", must be one of "+x(g))});return p.def('"',f,'" in ',c,"?",ia,"[",c,".",f,"]:",7680)}var ia=d.constants.stencilOps;a.optional(function(){d.assert(p,c+"&&typeof "+c+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return ia(function(b){a.commandType(b,"object",e,p.commandStr);var d=b.factor|0;b=b.units|0;a.commandType(d,"number",e+".factor",p.commandStr);
a.commandType(b,"number",e+".units",p.commandStr);return[d,b]},function(d,p,c){a.optional(function(){d.assert(p,c+"&&typeof "+c+'==="object"',"invalid "+b)});var l=p.def(c,".factor|0"),ia=p.def(c,".units|0");return[l,ia]});case "cull.face":return ia(function(b){var d=0;"front"===b?d=1028:"back"===b&&(d=1029);a.command(!!d,e,p.commandStr);return d},function(b,d,p){a.optional(function(){b.assert(d,p+'==="front"||'+p+'==="back"',"invalid cull.face")});return d.def(p,'==="front"?',1028,":",1029)});case "lineWidth":return ia(function(b){a.command("number"===
typeof b&&b>=M.lineWidthDims[0]&&b<=M.lineWidthDims[1],"invalid line width, must be a positive number between "+M.lineWidthDims[0]+" and "+M.lineWidthDims[1],p.commandStr);return b},function(b,d,p){a.optional(function(){b.assert(d,"typeof "+p+'==="number"&&'+p+">="+M.lineWidthDims[0]+"&&"+p+"<="+M.lineWidthDims[1],"invalid line width")});return p});case "frontFace":return ia(function(b){a.commandParameter(b,A,e,p.commandStr);return A[b]},function(b,d,p){a.optional(function(){b.assert(d,p+'==="cw"||'+
p+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(p+'==="cw"?2304:2305')});case "colorMask":return ia(function(b){a.command(r(b)&&4===b.length,"color.mask must be length 4 array",p.commandStr);return b.map(function(b){return!!b})},function(b,d,p){a.optional(function(){b.assert(d,b.shared.isArrayLike+"("+p+")&&"+p+".length===4","invalid color.mask")});return W(4,function(b){return"!!"+p+"["+b+"]"})});case "sample.coverage":return ia(function(b){a.command("object"===typeof b&&
b,e,p.commandStr);var d="value"in b?b.value:1;b=!!b.invert;a.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",p.commandStr);return[d,b]},function(b,d,p){a.optional(function(){b.assert(d,p+"&&typeof "+p+'==="object"',"invalid sample.coverage")});var c=d.def('"value" in ',p,"?+",p,".value:1"),l=d.def("!!",p,".invert");return[c,l]})}});return R}function za(b,d){var l=b["static"],g=b.dynamic,R={};x(l).forEach(function(b){var c=l[b],ia;if("number"===typeof c||
"boolean"===typeof c)ia=f(function(){return c});else if("function"===typeof c){var g=c._reglType;"texture2d"===g||"textureCube"===g?ia=f(function(b){return b.link(c)}):"framebuffer"===g||"framebufferCube"===g?(a.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',d.commandStr),ia=f(function(b){return b.link(c.color[0])})):a.commandRaise('invalid data for uniform "'+b+'"',d.commandStr)}else r(c)?ia=f(function(d){return d.global.def("[",W(c.length,function(p){a.command("number"===
typeof c[p]||"boolean"===typeof c[p],"invalid uniform "+b,d.commandStr);return c[p]}),"]")}):a.commandRaise('invalid or missing data for uniform "'+b+'"',d.commandStr);ia.value=c;R[b]=ia});x(g).forEach(function(b){var a=g[b];R[b]=c(a,function(b,d){return b.invoke(d,a)})});return R}function Na(b,d){var l=b["static"],g=b.dynamic,R={};x(l).forEach(function(b){var c=l[b],ia=n.id(b),g=new ha;if(k(c))g.state=1,g.buffer=fa.getBuffer(fa.create(c,34962,!1,!0)),g.type=0;else{var e=fa.getBuffer(c);if(e)g.state=
1,g.buffer=e,g.type=0;else if(a.command("object"===typeof c&&c,"invalid data for attribute "+b,d.commandStr),"constant"in c){var h=c.constant;g.buffer="null";g.state=2;"number"===typeof h?g.x=h:(a.command(r(h)&&0<h.length&&4>=h.length,"invalid constant for attribute "+b,d.commandStr),H.forEach(function(b,a){a<h.length&&(g[b]=h[a])}))}else{e=k(c.buffer)?fa.getBuffer(fa.create(c.buffer,34962,!1,!0)):fa.getBuffer(c.buffer);a.command(!!e,'missing buffer for attribute "'+b+'"',d.commandStr);var m=c.offset|
0;a.command(0<=m,'invalid offset for attribute "'+b+'"',d.commandStr);var t=c.stride|0;a.command(0<=t&&256>t,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',d.commandStr);var u=c.size|0;a.command(!("size"in c)||0<u&&4>=u,'invalid size for attribute "'+b+'", must be 1,2,3,4',d.commandStr);var oa=!!c.normalized,A=0;"type"in c&&(a.commandParameter(c.type,B,"invalid type for attribute "+b,d.commandStr),A=B[c.type]);var v=c.divisor|0;a.optional(function(){"divisor"in c&&(a.command(0===
v||V,'cannot specify divisor for attribute "'+b+'", instancing not supported',d.commandStr),a.command(0<=v,'invalid divisor for attribute "'+b+'"',d.commandStr));var l=d.commandStr,g="buffer offset divisor normalized type size stride".split(" ");x(c).forEach(function(d){a.command(0<=g.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+b+'" (valid parameters are '+g+")",l)})});g.buffer=e;g.state=1;g.size=u;g.normalized=oa;g.type=A||e.dtype;g.offset=m;g.stride=t;g.divisor=v}}R[b]=f(function(b,
a){var d=b.attribCache;if(ia in d)return d[ia];var p={isStream:!1};x(g).forEach(function(b){p[b]=g[b]});g.buffer&&(p.buffer=b.link(g.buffer),p.type=p.type||p.buffer+".dtype");return d[ia]=p})});x(g).forEach(function(b){var d=g[b];R[b]=c(d,function(p,c){function l(b){c(h[b],"=",g,".",b,"|0;")}var g=p.invoke(c,d),ia=p.shared,f=p.constants,R=ia.isBufferArgs,e=ia.buffer;a.optional(function(){p.assert(c,g+"&&(typeof "+g+'==="object"||typeof '+g+'==="function")&&('+R+"("+g+")||"+e+".getBuffer("+g+")||"+
e+".getBuffer("+g+".buffer)||"+R+"("+g+'.buffer)||("constant" in '+g+"&&(typeof "+g+'.constant==="number"||'+ia.isArrayLike+"("+g+".constant))))",'invalid dynamic attribute "'+b+'"')});var h={isStream:c.def(!1)},m=new ha;m.state=1;x(m).forEach(function(b){h[b]=c.def(""+m[b])});var n=h.buffer,t=h.type;c("if(",R,"(",g,")){",h.isStream,"=true;",n,"=",e,".createStream(",34962,",",g,");",t,"=",n,".dtype;","}else{",n,"=",e,".getBuffer(",g,");","if(",n,"){",t,"=",n,".dtype;",'}else if("constant" in ',g,
"){",h.state,"=",2,";","if(typeof "+g+'.constant === "number"){',h[H[0]],"=",g,".constant;",H.slice(1).map(function(b){return h[b]}).join("="),"=0;","}else{",H.map(function(b,a){return h[b]+"="+g+".constant.length>"+a+"?"+g+".constant["+a+"]:0;"}).join(""),"}}else{","if(",R,"(",g,".buffer)){",n,"=",e,".createStream(",34962,",",g,".buffer);","}else{",n,"=",e,".getBuffer(",g,".buffer);","}",t,'="type" in ',g,"?",f.glTypes,"[",g,".type]:",n,".dtype;",h.normalized,"=!!",g,".normalized;");l("size");l("offset");
l("stride");l("divisor");c("}}");c.exit("if(",h.isStream,"){",e,".destroyStream(",n,");","}");return h})});return R}function aa(b){var a=b["static"],d=b.dynamic,l={};x(a).forEach(function(b){var d=a[b];l[b]=f(function(b,a){return"number"===typeof d||"boolean"===typeof d?""+d:b.link(d)})});x(d).forEach(function(b){var a=d[b];l[b]=c(a,function(b,d){return b.invoke(d,a)})});return l}function Ga(b,d,c,l,g){function f(b){var a=n[b];a&&(k[b]=a)}var R=b["static"],e=b.dynamic;a.optional(function(){function b(p){x(p).forEach(function(b){a.command(0<=
d.indexOf(b),'unknown parameter "'+b+'"',g.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ba);b(R);b(e)});var h=S(b,d),m=Rb(b,g),n=Za(b,m,g),t=ka(b,g),k=ca(b,g),oa=u(b,g,h);f("viewport");f(K("scissor.box"));var A=0<x(k).length,m={framebuffer:m,draw:t,shader:oa,state:k,dirty:A,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=N(b,g);m.uniforms=za(c,g);m.drawVAO=m.scopeVAO=t.vao;if(!m.drawVAO&&oa.program&&!h&&F.angle_instanced_arrays&&
t["static"].elements){var v=!0;b=oa.program.attributes.map(function(b){b=d["static"][b];v=v&&!!b;return b});if(v&&0<b.length){var Z=Ke.getVAO(Ke.createVAO({attributes:b,elements:t["static"].elements}));m.drawVAO=new q(null,null,null,function(b,a){return b.link(Z)});m.useVAO=!0}}h?m.useVAO=!0:m.attributes=Na(d,g);m.context=aa(l,g);return m}function U(b,a,d){var c=b.shared.context,l=b.scope();x(d).forEach(function(g){a.save(c,"."+g);var f=d[g].append(b,a);Array.isArray(f)?l(c,".",g,"=[",f.join(),"];"):
l(c,".",g,"=",f,";")});a(l)}function rb(b,a,d,c){var l=b.shared,g=l.gl,f=l.framebuffer,R;ga&&(R=a.def(l.extensions,".webgl_draw_buffers"));var e=b.constants,l=e.drawBuffer,e=e.backBuffer;b=d?d.append(b,a):a.def(f,".next");c||a("if(",b,"!==",f,".cur){");a("if(",b,"){",g,".bindFramebuffer(",36160,",",b,".framebuffer);");ga&&a(R,".drawBuffersWEBGL(",l,"[",b,".colorAttachments.length]);");a("}else{",g,".bindFramebuffer(",36160,",null);");ga&&a(R,".drawBuffersWEBGL(",e,");");a("}",f,".cur=",b,";");c||
a("}")}function da(b,a,d){var c=b.shared,l=c.gl,g=b.current,f=b.next,e=c.current,h=c.next,m=b.cond(e,".dirty");ba.forEach(function(a){a=K(a);if(!(a in d.state)){var p,c;if(a in f){p=f[a];c=g[a];var n=W(G[a].length,function(b){return m.def(p,"[",b,"]")});m(b.cond(n.map(function(b,a){return b+"!=="+c+"["+a+"]"}).join("||")).then(l,".",wa[a],"(",n,");",n.map(function(b,a){return c+"["+a+"]="+b}).join(";"),";"))}else p=m.def(h,".",a),n=b.cond(p,"!==",e,".",a),m(n),a in R?n(b.cond(p).then(l,".enable(",
R[a],");")["else"](l,".disable(",R[a],");"),e,".",a,"=",p,";"):n(l,".",wa[a],"(",p,");",e,".",a,"=",p,";")}});0===x(d.state).length&&m(e,".dirty=false;");a(m)}function ra(b,a,d,c){var l=b.shared,g=b.current,f=l.current,e=l.gl;y(x(d)).forEach(function(l){var h=d[l];if(!c||c(h)){var m=h.append(b,a);if(R[l]){var n=R[l];I(h)?m?a(e,".enable(",n,");"):a(e,".disable(",n,");"):a(b.cond(m).then(e,".enable(",n,");")["else"](e,".disable(",n,");"));a(f,".",l,"=",m,";")}else if(r(m)){var t=g[l];a(e,".",wa[l],
"(",m,");",m.map(function(b,a){return t+"["+a+"]="+b}).join(";"),";")}else a(e,".",wa[l],"(",m,");",f,".",l,"=",m,";")}})}function Yb(b,a){V&&(b.instancing=a.def(b.shared.extensions,".angle_instanced_arrays"))}function dc(b,a,d,c,l){function g(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function f(b){u=a.def();b(u,"=",g(),";");"string"===typeof l?b(m,".count+=",l,";"):b(m,".count++;");Qa&&(c?(k=a.def(),b(k,"=",t,".getNumPendingQueries();")):b(t,".beginQuery(",m,");"))}
function R(b){b(m,".cpuTime+=",g(),"-",u,";");Qa&&(c?b(t,".pushScopeStats(",k,",",t,".getNumPendingQueries(),",m,");"):b(t,".endQuery();"))}function e(b){var d=a.def(n,".profile");a(n,".profile=",b,";");a.exit(n,".profile=",d,";")}var h=b.shared,m=b.stats,n=h.current,t=h.timer;d=d.profile;var u,k;if(d){if(I(d)){d.enable?(f(a),R(a.exit),e("true")):e("false");return}d=d.append(b,a);e(d)}else d=a.def(n,".profile");h=b.block();f(h);a("if(",d,"){",h,"}");b=b.block();R(b);a.exit("if(",d,"){",b,"}")}function qc(b,
d,c,l,g){function f(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function R(a,c,l){function g(){d("if(!",n,".buffer){",h,".enableVertexAttribArray(",m,");}");var a=l.type,f;f=l.size?d.def(l.size,"||",c):c;d("if(",n,".type!==",a,"||",n,".size!==",f,"||",k.map(function(b){return n+"."+b+"!=="+l[b]}).join("||"),"){",h,".bindBuffer(",34962,",",t,".buffer);",h,".vertexAttribPointer(",[m,f,a,
l.normalized,l.stride,l.offset],");",n,".type=",a,";",n,".size=",f,";",k.map(function(b){return n+"."+b+"="+l[b]+";"}).join(""),"}");V&&(a=l.divisor,d("if(",n,".divisor!==",a,"){",b.instancing,".vertexAttribDivisorANGLE(",[m,a],");",n,".divisor=",a,";}"))}function f(){d("if(",n,".buffer){",h,".disableVertexAttribArray(",m,");",n,".buffer=null;","}if(",H.map(function(b,a){return n+"."+b+"!=="+u[a]}).join("||"),"){",h,".vertexAttrib4f(",m,",",u,");",H.map(function(b,a){return n+"."+b+"="+u[a]+";"}).join(""),
"}")}var h=e.gl,m=d.def(a,".location"),n=d.def(e.attributes,"[",m,"]");a=l.state;var t=l.buffer,u=[l.x,l.y,l.z,l.w],k=["buffer","normalized","offset","stride"];1===a?g():2===a?f():(d("if(",a,"===",1,"){"),g(),d("}else{"),f(),d("}"))}var e=b.shared;l.forEach(function(l){var e=l.name,h=c.attributes[e],m;if(h){if(!g(h))return;m=h.append(b,d)}else{if(!g(P))return;var n=b.scopeAttrib(e);a.optional(function(){b.assert(d,n+".state","missing attribute "+e)});m={};x(new ha).forEach(function(b){m[b]=d.def(n,
".",b)})}R(b.link(l),f(l.info.type),m)})}function sd(b,d,c,l,g,f){for(var R=b.shared,e=R.gl,h,m=0;m<l.length;++m){var t=l[m],u=t.name,k=t.info.type,oa=c.uniforms[u],t=b.link(t)+".location",A;if(oa){if(!g(oa))continue;if(I(oa)){var v=oa.value;a.command(null!==v&&"undefined"!==typeof v,'missing uniform "'+u+'"',b.commandStr);if(35678===k||35680===k)a.command("function"===typeof v&&(35678===k&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||35680===k&&("textureCube"===v._reglType||"framebufferCube"===
v._reglType)),"invalid texture for uniform "+u,b.commandStr),oa=b.link(v._texture||v.color[0]._texture),d(e,".uniform1i(",t,",",oa+".bind());"),d.exit(oa,".unbind();");else if(35674===k||35675===k||35676===k){a.optional(function(){a.command(r(v),"invalid matrix for uniform "+u,b.commandStr);a.command(35674===k&&4===v.length||35675===k&&9===v.length||35676===k&&16===v.length,"invalid length for matrix uniform "+u,b.commandStr)});var oa=b.global.def("new Float32Array(["+Array.prototype.slice.call(v)+
"])"),x=2;35675===k?x=3:35676===k&&(x=4);d(e,".uniformMatrix",x,"fv(",t,",false,",oa,");")}else{switch(k){case 5126:a.commandType(v,"number","uniform "+u,b.commandStr);h="1f";break;case 35664:a.command(r(v)&&2===v.length,"uniform "+u,b.commandStr);h="2f";break;case 35665:a.command(r(v)&&3===v.length,"uniform "+u,b.commandStr);h="3f";break;case 35666:a.command(r(v)&&4===v.length,"uniform "+u,b.commandStr);h="4f";break;case 35670:a.commandType(v,"boolean","uniform "+u,b.commandStr);h="1i";break;case 5124:a.commandType(v,
"number","uniform "+u,b.commandStr);h="1i";break;case 35671:a.command(r(v)&&2===v.length,"uniform "+u,b.commandStr);h="2i";break;case 35667:a.command(r(v)&&2===v.length,"uniform "+u,b.commandStr);h="2i";break;case 35672:a.command(r(v)&&3===v.length,"uniform "+u,b.commandStr);h="3i";break;case 35668:a.command(r(v)&&3===v.length,"uniform "+u,b.commandStr);h="3i";break;case 35673:a.command(r(v)&&4===v.length,"uniform "+u,b.commandStr);h="4i";break;case 35669:a.command(r(v)&&4===v.length,"uniform "+u,
b.commandStr),h="4i"}d(e,".uniform",h,"(",t,",",r(v)?Array.prototype.slice.call(v):v,");")}continue}else A=oa.append(b,d)}else{if(!g(P))continue;A=d.def(R.uniforms,"[",n.id(u),"]")}35678===k?(a(!Array.isArray(A),"must specify a scalar prop for textures"),d("if(",A,"&&",A,'._reglType==="framebuffer"){',A,"=",A,".color[0];","}")):35680===k&&(a(!Array.isArray(A),"must specify a scalar prop for cube maps"),d("if(",A,"&&",A,'._reglType==="framebufferCube"){',A,"=",A,".color[0];","}"));a.optional(function(){function c(a,
l){b.assert(d,a,'bad data or missing for uniform "'+u+'".  '+l)}function l(b){a(!Array.isArray(A),"must not specify an array type for uniform");c("typeof "+A+'==="'+b+'"',"invalid type, expected "+b)}function g(d,p){Array.isArray(A)?a(A.length===d,"must have length "+d):c(R.isArrayLike+"("+A+")&&"+A+".length==="+d,"invalid vector, should have length "+d,b.commandStr)}function f(d){a(!Array.isArray(A),"must not specify a value type");c("typeof "+A+'==="function"&&'+A+'._reglType==="texture'+(3553===
d?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(k){case 5124:l("number");break;case 35667:g(2,"number");break;case 35668:g(3,"number");break;case 35669:g(4,"number");break;case 5126:l("number");break;case 35664:g(2,"number");break;case 35665:g(3,"number");break;case 35666:g(4,"number");break;case 35670:l("boolean");break;case 35671:g(2,"boolean");break;case 35672:g(3,"boolean");break;case 35673:g(4,"boolean");break;case 35674:g(4,"number");break;case 35675:g(9,"number");break;case 35676:g(16,
"number");break;case 35678:f(3553);break;case 35680:f(34067)}});oa=1;switch(k){case 35678:case 35680:oa=d.def(A,"._texture");d(e,".uniform1i(",t,",",oa,".bind());");d.exit(oa,".unbind();");continue;case 5124:case 35670:h="1i";break;case 35667:case 35671:h="2i";oa=2;break;case 35668:case 35672:h="3i";oa=3;break;case 35669:case 35673:h="4i";oa=4;break;case 5126:h="1f";break;case 35664:h="2f";oa=2;break;case 35665:h="3f";oa=3;break;case 35666:h="4f";oa=4;break;case 35674:h="Matrix2fv";break;case 35675:h=
"Matrix3fv";break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){d(e,".uniform",h,"(",t,",");var t=Math.pow(k-35674+2,2),Z=b.global.def("new Float32Array(",t,")");Array.isArray(A)?d("false,(",W(t,function(b){return Z+"["+b+"]="+A[b]}),",",Z,")"):d("false,(Array.isArray(",A,")||",A," instanceof Float32Array)?",A,":(",W(t,function(b){return Z+"["+b+"]="+A+"["+b+"]"}),",",Z,")");d(");")}else{if(1<oa){for(var x=[],wa=[],J=0;J<oa;++J)Array.isArray(A)?wa.push(A[J]):wa.push(d.def(A+"["+J+"]")),f&&x.push(d.def());
f&&d("if(!",b.batchId,"||",x.map(function(b,a){return b+"!=="+wa[a]}).join("||"),"){",x.map(function(b,a){return b+"="+wa[a]+";"}).join(""));d(e,".uniform",h,"(",t,",",wa.join(","),");")}else a(!Array.isArray(A),"uniform value must not be an array"),f&&(oa=d.def(),d("if(!",b.batchId,"||",oa,"!==",A,"){",oa,"=",A,";")),d(e,".uniform",h,"(",t,",",A,");");f&&d("}")}}}function vc(b,d,c,l){function g(a){var f=n[a];return f?f.contextDep&&l.contextDynamic||f.propDep?f.append(b,c):f.append(b,d):d.def(m,".",
a)}function f(){function b(){c(oa,".drawElementsInstancedANGLE(",[u,v,x,A+"<<(("+x+"-5121)>>1)",k],");")}function a(){c(oa,".drawArraysInstancedANGLE(",[u,A,v,k],");")}t&&"null"!==t?Z?b():(c("if(",t,"){"),b(),c("}else{"),a(),c("}")):a()}function R(){function b(){c(h+".drawElements("+[u,v,x,A+"<<(("+x+"-5121)>>1)"]+");")}function a(){c(h+".drawArrays("+[u,A,v]+");")}t&&"null"!==t?Z?b():(c("if(",t,"){"),b(),c("}else{"),a(),c("}")):a()}var e=b.shared,h=e.gl,m=e.draw,n=l.draw,t=function(){var a=n.elements,
g=d;if(a){if(a.contextDep&&l.contextDynamic||a.propDep)g=c;a=a.append(b,g);n.elementsActive&&g("if("+a+")"+h+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=g.def(),g(a,"=",m,".","elements",";","if(",a,"){",h,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",e.vao,".currentVAO){",a,"=",b.shared.elements+".getElements("+e.vao,".currentVAO.elements);",qa?"":"if("+a+")"+h+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),u=g("primitive"),A=g("offset"),v=function(){var g=n.count,f,
R=d;if(g){if(g.contextDep&&l.contextDynamic||g.propDep)R=c;f=g.append(b,R);a.optional(function(){g.MISSING&&b.assert(d,"false","missing vertex count");g.DYNAMIC&&b.assert(R,f+">=0","missing vertex count")})}else f=R.def(m,".","count"),a.optional(function(){b.assert(R,f+">=0","missing vertex count")});return f}();if("number"===typeof v){if(0===v)return}else c("if(",v,"){"),c.exit("}");var k,oa;V&&(k=g("instances"),oa=b.instancing);var x=t+".type",Z=n.elements&&I(n.elements)&&!n.vaoActive;V&&("number"!==
typeof k||0<=k)?"string"===typeof k?(c("if(",k,">0){"),f(),c("}else if(",k,"<0){"),R(),c("}")):f():R()}function Y(b,d,c,l,g){var f=C();g=f.proc("body",g);a.optional(function(){f.commandStr=d.commandStr;f.command=f.link(d.commandStr)});V&&(f.instancing=g.def(f.shared.extensions,".angle_instanced_arrays"));b(f,g,c,l);return f.compile().body}function J(b,a,d,c){Yb(b,a);d.useVAO?d.drawVAO?a(b.shared.vao,".setVAO(",d.drawVAO.append(b,a),");"):a(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(a(b.shared.vao,
".setVAO(null);"),qc(b,a,d,c.attributes,function(){return!0}));sd(b,a,d,c.uniforms,function(){return!0},!1);vc(b,a,a,d)}function ja(b,a){var d=b.proc("draw",1);Yb(b,d);U(b,d,a.context);rb(b,d,a.framebuffer);da(b,d,a);ra(b,d,a.state);dc(b,d,a,!1,!0);var c=a.shader.progVar.append(b,d);d(b.shared.gl,".useProgram(",c,".program);");if(a.shader.program)J(b,d,a,a.shader.program);else{d(b.shared.vao,".setVAO(null);");var l=b.global.def("{}"),g=d.def(c,".id"),f=d.def(l,"[",g,"]");d(b.cond(f).then(f,".call(this,a0);")["else"](f,
"=",l,"[",g,"]=",b.link(function(d){return Y(J,b,a,d,1)}),"(",c,");",f,".call(this,a0);"))}0<x(a.state).length&&d(b.shared.current,".dirty=true;");b.shared.vao&&d(b.shared.vao,".setVAO(null);")}function Ca(b,a,d,c){function l(){return!0}b.batchId="a1";Yb(b,a);qc(b,a,d,c.attributes,l);sd(b,a,d,c.uniforms,l,!1);vc(b,a,a,d)}function sb(b,a,d,c){function l(b){return b.contextDep&&f||b.propDep}function g(b){return!l(b)}Yb(b,a);var f=d.contextDep,R=a.def(),e=a.def();b.shared.props=e;b.batchId=R;var h=b.scope(),
m=b.scope();a(h.entry,"for(",R,"=0;",R,"<","a1",";++",R,"){",e,"=","a0","[",R,"];",m,"}",h.exit);d.needsContext&&U(b,m,d.context);d.needsFramebuffer&&rb(b,m,d.framebuffer);ra(b,m,d.state,l);d.profile&&l(d.profile)&&dc(b,m,d,!1,!0);c?(d.useVAO?d.drawVAO?l(d.drawVAO)?m(b.shared.vao,".setVAO(",d.drawVAO.append(b,m),");"):h(b.shared.vao,".setVAO(",d.drawVAO.append(b,h),");"):h(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(h(b.shared.vao,".setVAO(null);"),qc(b,h,d,c.attributes,g),qc(b,m,d,c.attributes,
l)),sd(b,h,d,c.uniforms,g,!1),sd(b,m,d,c.uniforms,l,!0),vc(b,h,m,d)):(a=b.global.def("{}"),c=d.shader.progVar.append(b,m),e=m.def(c,".id"),h=m.def(a,"[",e,"]"),m(b.shared.gl,".useProgram(",c,".program);","if(!",h,"){",h,"=",a,"[",e,"]=",b.link(function(a){return Y(Ca,b,d,a,2)}),"(",c,");}",h,".call(this,a0[",R,"],",R,");"))}function Qc(b,a){function d(b){return b.contextDep&&l||b.propDep}var c=b.proc("batch",2);b.batchId="0";Yb(b,c);var l=!1,g=!0;x(a.context).forEach(function(b){l=l||a.context[b].propDep});
l||(U(b,c,a.context),g=!1);var f=a.framebuffer,R=!1;f?(f.propDep?l=R=!0:f.contextDep&&l&&(R=!0),R||rb(b,c,f)):rb(b,c,null);a.state.viewport&&a.state.viewport.propDep&&(l=!0);da(b,c,a);ra(b,c,a.state,function(b){return!d(b)});a.profile&&d(a.profile)||dc(b,c,a,!1,"a1");a.contextDep=l;a.needsContext=g;a.needsFramebuffer=R;g=a.shader.progVar;if(g.contextDep&&l||g.propDep)sb(b,c,a,null);else if(g=g.append(b,c),c(b.shared.gl,".useProgram(",g,".program);"),a.shader.program)sb(b,c,a,a.shader.program);else{c(b.shared.vao,
".setVAO(null);");var f=b.global.def("{}"),R=c.def(g,".id"),e=c.def(f,"[",R,"]");c(b.cond(e).then(e,".call(this,a0,a1);")["else"](e,"=",f,"[",R,"]=",b.link(function(d){return Y(sb,b,a,d,2)}),"(",g,");",e,".call(this,a0,a1);"))}0<x(a.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function Zc(b,a){function d(g){var f=a.shader[g];f&&c.set(l.shader,"."+g,f.append(b,c))}var c=b.proc("scope",3);b.batchId="a2";var l=b.shared,g=l.current;U(b,c,a.context);
a.framebuffer&&a.framebuffer.append(b,c);y(x(a.state)).forEach(function(d){var g=a.state[d].append(b,c);r(g)?g.forEach(function(a,l){c.set(b.next[d],"["+l+"]",a)}):c.set(l.next,"."+d,g)});dc(b,c,a,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var g=a.draw[d];g&&c.set(l.draw,"."+d,""+g.append(b,c))});x(a.uniforms).forEach(function(d){var g=a.uniforms[d].append(b,c);Array.isArray(g)&&(g="["+g.join()+"]");c.set(l.uniforms,"["+n.id(d)+"]",g)});x(a.attributes).forEach(function(d){var l=
a.attributes[d].append(b,c),g=b.scopeAttrib(d);x(new ha).forEach(function(b){c.set(g,"."+b,l[b])})});a.scopeVAO&&c.set(l.vao,".targetVAO",a.scopeVAO.append(b,c));d("vert");d("frag");0<x(a.state).length&&(c(g,".dirty=true;"),c.exit(g,".dirty=true;"));c("a1(",b.shared.context,",a0,",b.batchId,");")}function E(b){if("object"===typeof b&&!r(b)){for(var a=x(b),d=0;d<a.length;++d)if(D.isDynamic(b[a[d]]))return!0;return!1}}function v(b,a,d){function l(b,a){R.forEach(function(d){var c=g[d];D.isDynamic(c)&&
(c=b.invoke(a,c),a(n,".",d,"=",c,";"))})}var g=a["static"][d];if(g&&E(g)){var f=b.global,R=x(g),e=!1,h=!1,m=!1,n=b.global.def("{}");R.forEach(function(a){var d=g[a];if(D.isDynamic(d))"function"===typeof d&&(d=g[a]=D.unbox(d)),a=c(d,null),e=e||a.thisDep,m=m||a.propDep,h=h||a.contextDep;else{f(n,".",a,"=");switch(typeof d){case "number":f(d);break;case "string":f('"',d,'"');break;case "object":Array.isArray(d)&&f("[",d.join(),"]");break;default:f(b.link(d))}f(";")}});a.dynamic[d]=new D.DynamicVariable(4,
{thisDep:e,contextDep:h,propDep:m,ref:n,append:l});delete a["static"][d]}}var ha=Ke.Record,ta={add:32774,subtract:32778,"reverse subtract":32779};F.ext_blend_minmax&&(ta.min=32775,ta.max=32776);var V=F.angle_instanced_arrays,ga=F.webgl_draw_buffers,qa=F.oes_vertex_array_object,G={dirty:!0,profile:X.profile},t={},ba=[],R={},wa={};L("dither",3024);L("blend.enable",3042);T("blend.color","blendColor",[0,0,0,0]);T("blend.equation","blendEquationSeparate",[32774,32774]);T("blend.func","blendFuncSeparate",
[1,0,1,0]);L("depth.enable",2929,!0);T("depth.func","depthFunc",513);T("depth.range","depthRange",[0,1]);T("depth.mask","depthMask",!0);T("colorMask","colorMask",[!0,!0,!0,!0]);L("cull.enable",2884);T("cull.face","cullFace",1029);T("frontFace","frontFace",2305);T("lineWidth","lineWidth",1);L("polygonOffset.enable",32823);T("polygonOffset.offset","polygonOffset",[0,0]);L("sample.alpha",32926);L("sample.enable",32928);T("sample.coverage","sampleCoverage",[1,!1]);L("stencil.enable",2960);T("stencil.mask",
"stencilMask",-1);T("stencil.func","stencilFunc",[519,0,-1]);T("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);T("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);L("scissor.enable",3089);T("scissor.box","scissor",[0,0,O.drawingBufferWidth,O.drawingBufferHeight]);T("viewport","viewport",[0,0,O.drawingBufferWidth,O.drawingBufferHeight]);var oa={gl:O,context:na,strings:n,next:t,current:G,draw:Xb,elements:b,buffer:fa,shader:zb,attributes:Ke.state,vao:Ke,uniforms:Ka,framebuffer:Z,
extensions:F,timer:Qa,isBufferArgs:k},l={primTypes:z,compareFuncs:h,blendFuncs:Q,blendEquations:ta,stencilOps:g,glTypes:B,orientationType:A};a.optional(function(){oa.isArrayLike=r});ga&&(l.backBuffer=[1029],l.drawBuffer=W(M.maxDrawbuffers,function(b){return 0===b?[0]:W(b,function(b){return 36064+b})}));var lc=0;return{next:t,current:G,procs:function(){var b=C(),a=b.proc("poll"),d=b.proc("refresh"),c=b.block();a(c);d(c);var l=b.shared,g=l.gl,f=l.next,e=l.current;c(e,".dirty=false;");rb(b,a);rb(b,d,
null,!0);var h;V&&(h=b.link(V));F.oes_vertex_array_object&&d(b.link(F.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<M.maxAttributes;++m){var n=d.def(l.attributes,"[",m,"]"),t=b.cond(n,".buffer");t.then(g,".enableVertexAttribArray(",m,");",g,".bindBuffer(",34962,",",n,".buffer.buffer);",g,".vertexAttribPointer(",m,",",n,".size,",n,".type,",n,".normalized,",n,".stride,",n,".offset);")["else"](g,".disableVertexAttribArray(",m,");",g,".vertexAttrib4f(",m,",",n,".x,",n,".y,",n,".z,",
n,".w);",n,".buffer=null;");d(t);V&&d(h,".vertexAttribDivisorANGLE(",m,",",n,".divisor);")}d(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");x(R).forEach(function(l){var h=R[l],m=c.def(f,".",l),n=b.block();n("if(",m,"){",g,".enable(",h,")}else{",g,".disable(",h,")}",e,".",l,"=",m,";");d(n);a("if(",m,"!==",e,".",l,"){",n,"}")});x(wa).forEach(function(l){var R=wa[l],h=G[l],m,n,t=b.block();t(g,".",R,"(");r(h)?(R=h.length,m=b.global.def(f,".",l),n=b.global.def(e,
".",l),t(W(R,function(b){return m+"["+b+"]"}),");",W(R,function(b){return n+"["+b+"]="+m+"["+b+"];"}).join("")),a("if(",W(R,function(b){return m+"["+b+"]!=="+n+"["+b+"]"}).join("||"),"){",t,"}")):(m=c.def(f,".",l),n=c.def(e,".",l),t(m,");",e,".",l,"=",m,";"),a("if(",m,"!==",n,"){",t,"}"));d(t)});return b.compile()}(),compile:function(b,a,d,c,l){var g=C();g.stats=g.link(l);x(a["static"]).forEach(function(b){v(g,a,b)});m.forEach(function(a){v(g,b,a)});var f=Ga(b,a,d,c,g);ja(g,f);Zc(g,f);Qc(g,f);return w(g.compile(),
{destroy:function(){f.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(C,aa,Ra){function k(f,a){this.id=c++;this.type=f;this.data=a}function y(c){if(0===c.length)return[];var a=c.charAt(0),f=c.charAt(c.length-1);if(1<c.length&&a===f&&('"'===a||"'"===
a))return['"'+c.substr(1,c.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c))return y(c.substr(0,a.index)).concat(y(a[1])).concat(y(c.substr(a.index+a[0].length)));a=c.split(".");if(1===a.length)return['"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];c=[];for(f=0;f<a.length;++f)c=c.concat(y(a[f]));return c}function q(c){return"["+y(c).join("][")+"]"}function I(c,a){if("function"===typeof c)return new k(0,c);if("number"===typeof c||
"boolean"===typeof c)return new k(5,c);if(Array.isArray(c))return new k(6,c.map(function(c,f){return I(c,a+"["+f+"]")}));if(c instanceof k)return c;f(!1,"invalid option type in uniform "+a)}var f=C("./util/check"),c=0;aa.exports={DynamicVariable:k,define:function(c,a){return new k(c,q(a+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof k},unbox:I,accessor:q}},{"./util/check":21}],10:[function(C,aa,Ra){var k=C("./util/check"),y=C("./util/is-typed-array"),q=C("./util/is-ndarray"),
I=C("./util/values"),f=C("./constants/primitives.json"),c=C("./constants/usage.json");aa.exports=function(x,a,w,la){function W(a){this.id=D++;r[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function O(c,f,r,z,h,g,d){c.buffer.bind();var A;f?((A=d)||y(f)&&(!q(f)||y(f.data))||(A=a.oes_element_index_uint?5125:5123),w._initBuffer(c.buffer,f,r,A,3)):(x.bufferData(34963,g,r),c.buffer.dtype=A||5121,c.buffer.usage=r,c.buffer.dimension=3,c.buffer.byteLength=g);A=d;if(!d){switch(c.buffer.dtype){case 5121:case 5120:A=
5121;break;case 5123:case 5122:A=5123;break;case 5125:case 5124:A=5125;break;default:k.raise("unsupported type for element array")}c.buffer.dtype=A}c.type=A;k(5125!==A||!!a.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=h;0>f&&(f=c.buffer.byteLength,5123===A?f>>=1:5125===A&&(f>>=2));c.vertCount=f;f=z;0>z&&(f=4,z=c.buffer.dimension,1===z&&(f=0),2===z&&(f=1),3===z&&(f=4));c.primType=f}function F(a){la.elementsCount--;k(null!==a.buffer,"must not double destroy elements");
delete r[a.id];a.buffer.destroy();a.buffer=null}var r={},D=0,z={uint8:5121,uint16:5123};a.oes_element_index_uint&&(z.uint32=5125);W.prototype.bind=function(){this.buffer.bind()};var B=[];return{create:function(a,m){function r(a){if(a)if("number"===typeof a)x(a),h.primType=4,h.vertCount=a|0,h.type=5121;else{var d=null,m=35044,w=-1,B=-1,n=0,D=0;if(Array.isArray(a)||y(a)||q(a))d=a;else if(k.type(a,"object","invalid arguments for elements"),"data"in a&&(d=a.data,k(Array.isArray(d)||y(d)||q(d),"invalid data for element buffer")),
"usage"in a&&(k.parameter(a.usage,c,"invalid element buffer usage"),m=c[a.usage]),"primitive"in a&&(k.parameter(a.primitive,f,"invalid element buffer primitive"),w=f[a.primitive]),"count"in a&&(k("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),B=a.count|0),"type"in a&&(k.parameter(a.type,z,"invalid buffer type"),D=z[a.type]),"length"in a)n=a.length|0;else if(n=B,5123===D||5122===D)n*=2;else if(5125===D||5124===D)n*=4;O(h,d,m,w,B,n,D)}else x(),h.primType=4,h.vertCount=0,
h.type=5121;return r}var x=w.create(null,34963,!0),h=new W(x._buffer);la.elementsCount++;r(a);r._reglType="elements";r._elements=h;r.subdata=function(a,d){x.subdata(a,d);return r};r.destroy=function(){F(h)};return r},createStream:function(a){var c=B.pop();c||(c=new W(w.create(null,34963,!0,!1)._buffer));O(c,a,35040,-1,-1,0,0);return c},destroyStream:function(a){B.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof W?a._elements:null},clear:function(){I(r).forEach(F)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(C,aa,Ra){var k=C("./util/sorted-object-keys"),y=C("./util/check");aa.exports=function(q,I){function f(a){y.type(a,"string","extension name must be string");a=a.toLowerCase();var f;try{f=c[a]=q.getExtension(a)}catch(k){}return!!f}for(var c={},x=0;x<I.extensions.length;++x){var a=I.extensions[x];if(!f(a))return I.onDestroy(),I.onDone('"'+a+
'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}I.optionalExtensions.forEach(f);return{extensions:c,restore:function(){k(c).forEach(function(a){if(c[a]&&!f(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(C,aa,Ra){var k=C("./util/check"),y=C("./util/values"),q=C("./util/extend"),I=[6407,6408],f=[];f[6408]=4;f[6407]=3;var c=[];c[5121]=1;c[5126]=4;c[36193]=
2;var x=[32854,32855,36194,35907,34842,34843,34836],a={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};aa.exports=function(w,la,W,O,F,r){function D(b,a,d){this.target=b;this.texture=a;this.renderbuffer=d;var c=b=0;a?(b=a.width,c=a.height):d&&(b=d.width,c=d.height);this.width=b;this.height=c}function z(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function B(b,
a,d){if(b){if(b.texture){b=b.texture._texture;var c=Math.max(1,b.height);k(Math.max(1,b.width)===a&&c===d,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,k(b.width===a&&b.height===d,"inconsistent width/height for renderbuffer");b.refCount+=1}}function H(b,a){a&&(a.texture?w.framebufferTexture2D(36160,b,a.target,a.texture._texture.texture,0):w.framebufferRenderbuffer(36160,b,36161,a.renderbuffer._renderbuffer.renderbuffer))}function m(b){var a=3553,d=null,c=null,
g=b;"object"===typeof b&&(g=b.data,"target"in b&&(a=b.target|0));k.type(g,"function","invalid attachment data");b=g._reglType;"texture2d"===b?(d=g,k(3553===a)):"textureCube"===b?(d=g,k(34069<=a&&34075>a,"invalid cube map target")):"renderbuffer"===b?(c=g,a=36161):k.raise("invalid regl object for attachment");return new D(a,d,c)}function Q(b,a,d,c,g){if(d)return b=O.create2D({width:b,height:a,format:c,type:g}),b._texture.refCount=0,new D(3553,b,null);b=F.create({width:b,height:a,format:c});b._renderbuffer.refCount=
0;return new D(36161,null,b)}function Ia(b){return b&&(b.texture||b.renderbuffer)}function h(b,a,d){b&&(b.texture?b.texture.resize(a,d):b.renderbuffer&&b.renderbuffer.resize(a,d),b.width=a,b.height=d)}function g(){this.id=b++;e[this.id]=this;this.framebuffer=w.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function d(b){b.colorAttachments.forEach(z);z(b.depthAttachment);z(b.stencilAttachment);z(b.depthStencilAttachment)}
function A(b){var a=b.framebuffer;k(a,"must not double destroy framebuffer");w.deleteFramebuffer(a);b.framebuffer=null;r.framebufferCount--;delete e[b.id]}function P(b){var d;w.bindFramebuffer(36160,b.framebuffer);var c=b.colorAttachments;for(d=0;d<c.length;++d)H(36064+d,c[d]);for(d=c.length;d<W.maxColorAttachments;++d)w.framebufferTexture2D(36160,36064+d,3553,null,0);w.framebufferTexture2D(36160,33306,3553,null,0);w.framebufferTexture2D(36160,36096,3553,null,0);w.framebufferTexture2D(36160,36128,
3553,null,0);H(36096,b.depthAttachment);H(36128,b.stencilAttachment);H(33306,b.depthStencilAttachment);b=w.checkFramebufferStatus(36160);w.isContextLost()||36053===b||k.raise("framebuffer configuration not supported, status = "+a[b]);w.bindFramebuffer(36160,n.next?n.next.framebuffer:null);n.cur=n.next;w.getError()}function ea(b,a){function e(b,a){var g;k(n.next!==y,"can not update framebuffer which is currently in use");var h=0,A=0,r=!0,z=!0;g=null;var w=!0,q="rgba",D="uint8",O=1,F=null,u=null,Z=
null,ea=!1;if("number"===typeof b)h=b|0,A=a|0||h;else if(b){k.type(b,"object","invalid arguments for framebuffer");"shape"in b?(A=b.shape,k(Array.isArray(A)&&2<=A.length,"invalid shape for framebuffer"),h=A[0],A=A[1]):("radius"in b&&(h=A=b.radius),"width"in b&&(h=b.width),"height"in b&&(A=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&k(1===g.length||la.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(O=b.colorCount|0,k(0<O,"invalid color buffer count"));
"colorTexture"in b&&(w=!!b.colorTexture,q="rgba4");if("colorType"in b){D=b.colorType;if(w)k(la.oes_texture_float||!("float"===D||"float32"===D),"you must enable OES_texture_float in order to use floating point framebuffer objects"),k(la.oes_texture_half_float||!("half float"===D||"float16"===D),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===D||"float16"===D)k(la.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
q="rgba16f";else if("float"===D||"float32"===D)k(la.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),q="rgba32f";k.oneOf(D,fa,"invalid color type")}"colorFormat"in b&&(q=b.colorFormat,0<=pa.indexOf(q)?w=!0:0<=M.indexOf(q)?w=!1:k.optional(function(){if(w)k.oneOf(b.colorFormat,pa,"invalid color format for texture");else k.oneOf(b.colorFormat,M,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in
b)ea=!(!b.depthTexture&&!b.depthStencilTexture),k(!ea||la.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?r=b.depth:(F=b.depth,z=!1));"stencil"in b&&("boolean"===typeof b.stencil?z=b.stencil:(u=b.stencil,r=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?r=z=b.depthStencil:(Z=b.depthStencil,z=r=!1))}else h=A=1;var H=null,Ka=null,C=null,Ga=null;if(Array.isArray(g))H=g.map(m);else if(g)H=[m(g)];else for(H=Array(O),g=0;g<O;++g)H[g]=
Q(h,A,w,q,D);k(la.webgl_draw_buffers||1>=H.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");k(H.length<=W.maxColorAttachments,"too many color attachments, not supported");h=h||H[0].width;A=A||H[0].height;F?Ka=m(F):r&&!z&&(Ka=Q(h,A,ea,"depth","uint32"));u?C=m(u):z&&!r&&(C=Q(h,A,!1,"stencil","uint8"));Z?Ga=m(Z):!F&&!u&&z&&r&&(Ga=Q(h,A,ea,"depth stencil","depth stencil"));k(1>=!!F+!!u+!!Z,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
r=null;for(g=0;g<H.length;++g)B(H[g],h,A),k(!H[g]||H[g].texture&&0<=I.indexOf(H[g].texture._texture.format)||H[g].renderbuffer&&0<=x.indexOf(H[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+g+" is invalid"),H[g]&&H[g].texture&&(z=f[H[g].texture._texture.format]*c[H[g].texture._texture.type],null===r?r=z:k(r===z,"all color attachments much have the same number of bits per pixel."));B(Ka,h,A);k(!Ka||Ka.texture&&6402===Ka.texture._texture.format||Ka.renderbuffer&&33189===Ka.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");B(C,h,A);k(!C||C.renderbuffer&&36168===C.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");B(Ga,h,A);k(!Ga||Ga.texture&&34041===Ga.texture._texture.format||Ga.renderbuffer&&34041===Ga.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");d(y);y.width=h;y.height=A;y.colorAttachments=H;y.depthAttachment=Ka;y.stencilAttachment=C;y.depthStencilAttachment=Ga;e.color=H.map(Ia);
e.depth=Ia(Ka);e.stencil=Ia(C);e.depthStencil=Ia(Ga);e.width=y.width;e.height=y.height;P(y);return e}var y=new g;r.framebufferCount++;e(b,a);return q(e,{resize:function(b,a){k(n.next!==y,"can not resize a framebuffer which is currently in use");var d=Math.max(b|0,1),c=Math.max(a|0||d,1);if(d===y.width&&c===y.height)return e;for(var g=y.colorAttachments,f=0;f<g.length;++f)h(g[f],d,c);h(y.depthAttachment,d,c);h(y.stencilAttachment,d,c);h(y.depthStencilAttachment,d,c);y.width=e.width=d;y.height=e.height=
c;P(y);return e},_reglType:"framebuffer",_framebuffer:y,destroy:function(){A(y);d(y)},use:function(b){n.setFBO({framebuffer:e},b)}})}var n={cur:null,next:null,dirty:!1,setFBO:null},pa=["rgba"],M=["rgba4","rgb565","rgb5 a1"];la.ext_srgb&&M.push("srgba");la.ext_color_buffer_half_float&&M.push("rgba16f","rgb16f");la.webgl_color_buffer_float&&M.push("rgba32f");var fa=["uint8"];la.oes_texture_half_float&&fa.push("half float","float16");la.oes_texture_float&&fa.push("float","float32");var b=0,e={};return q(n,
{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof g)?b:null},create:ea,createCube:function(b){function a(b){var c;k(0>d.indexOf(n.next),"can not update framebuffer which is currently in use");var g={color:null},f=0,e=null;c="rgba";var h="uint8",m=1;if("number"===typeof b)f=b|0;else if(b){k.type(b,"object","invalid arguments for framebuffer");"shape"in b?(f=b.shape,k(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),k(f[0]===
f[1],"cube framebuffer must be square"),f=f[0]):("radius"in b&&(f=b.radius|0),"width"in b?(f=b.width|0,"height"in b&&k(b.height===f,"must be square")):"height"in b&&(f=b.height|0));if("color"in b||"colors"in b)e=b.color||b.colors,Array.isArray(e)&&k(1===e.length||la.webgl_draw_buffers,"multiple render targets not supported");e||("colorCount"in b&&(m=b.colorCount|0,k(0<m,"invalid color buffer count")),"colorType"in b&&(k.oneOf(b.colorType,fa,"invalid color type"),h=b.colorType),"colorFormat"in b&&
(c=b.colorFormat,k.oneOf(b.colorFormat,pa,"invalid color format for texture")));"depth"in b&&(g.depth=b.depth);"stencil"in b&&(g.stencil=b.stencil);"depthStencil"in b&&(g.depthStencil=b.depthStencil)}else f=1;if(e)if(Array.isArray(e))for(b=[],c=0;c<e.length;++c)b[c]=e[c];else b=[e];else for(b=Array(m),e={radius:f,format:c,type:h},c=0;c<m;++c)b[c]=O.createCube(e);g.color=Array(b.length);for(c=0;c<b.length;++c)m=b[c],k("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),f=f||m.width,
k(m.width===f&&m.height===f,"invalid cube map shape"),g.color[c]={target:34069,data:b[c]};for(c=0;6>c;++c){for(m=0;m<b.length;++m)g.color[m].target=34069+c;0<c&&(g.depth=d[0].depth,g.stencil=d[0].stencil,g.depthStencil=d[0].depthStencil);if(d[c])d[c](g);else d[c]=ea(g)}return q(a,{width:f,height:f,color:b})}var d=Array(6);a(b);return q(a,{faces:d,resize:function(b){var c=b|0;k(0<c&&c<=W.maxCubeMapSize,"invalid radius for cube fbo");if(c===a.width)return a;var g=a.color;for(b=0;b<g.length;++b)g[b].resize(c);
for(b=0;6>b;++b)d[b].resize(c);a.width=a.height=c;return a},_reglType:"framebufferCube",destroy:function(){d.forEach(function(b){b.destroy()})}})},clear:function(){y(e).forEach(A)},restore:function(){n.cur=null;n.next=null;n.dirty=!0;y(e).forEach(function(b){b.framebuffer=w.createFramebuffer();P(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(C,aa,Ra){var k=C("./util/sorted-object-keys"),y=C("./util/pool");aa.exports=function(q,I){var f=1;I.ext_texture_filter_anisotropic&&
(f=q.getParameter(34047));var c=1,x=1;I.webgl_draw_buffers&&(c=q.getParameter(34852),x=q.getParameter(36063));var a=!!I.oes_texture_float;if(a){a=q.createTexture();q.bindTexture(3553,a);q.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var w=q.createFramebuffer();q.bindFramebuffer(36160,w);q.framebufferTexture2D(36160,36064,3553,a,0);q.bindTexture(3553,null);if(36053!==q.checkFramebufferStatus(36160))a=!1;else{q.viewport(0,0,1,1);q.clearColor(1,0,0,1);q.clear(16384);var la=y.allocType(5126,4);q.readPixels(0,
0,1,1,6408,5126,la);q.getError()?a=!1:(q.deleteFramebuffer(w),q.deleteTexture(a),a=1===la[0]);y.freeType(la)}}la=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(la=q.createTexture(),w=y.allocType(5121,36),q.activeTexture(33984),q.bindTexture(34067,la),q.texImage2D(34069,0,6408,3,3,0,6408,5121,w),y.freeType(w),q.bindTexture(34067,null),q.deleteTexture(la),la=!q.getError());return{colorBits:[q.getParameter(3410),
q.getParameter(3411),q.getParameter(3412),q.getParameter(3413)],depthBits:q.getParameter(3414),stencilBits:q.getParameter(3415),subpixelBits:q.getParameter(3408),extensions:k(I).filter(function(a){return!!I[a]}),maxAnisotropic:f,maxDrawbuffers:c,maxColorAttachments:x,pointSizeDims:q.getParameter(33901),lineWidthDims:q.getParameter(33902),maxViewportDims:q.getParameter(3386),maxCombinedTextureUnits:q.getParameter(35661),maxCubeMapSize:q.getParameter(34076),maxRenderbufferSize:q.getParameter(34024),
maxTextureUnits:q.getParameter(34930),maxTextureSize:q.getParameter(3379),maxAttributes:q.getParameter(34921),maxVertexUniforms:q.getParameter(36347),maxVertexTextureUnits:q.getParameter(35660),maxVaryingVectors:q.getParameter(36348),maxFragmentUniforms:q.getParameter(36349),glsl:q.getParameter(35724),renderer:q.getParameter(7937),vendor:q.getParameter(7936),version:q.getParameter(7938),readFloat:a,npotTextureCube:la}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(C,aa,Ra){var k=
C("./util/check"),y=C("./util/is-typed-array");aa.exports=function(q,I,f,c,x,a,w){function la(O){var F;null===I.next?(k(x.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),F=5121):(k(null!==I.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),F=I.next.colorAttachments[0].texture._texture.type,k.optional(function(){a.oes_texture_float?(k(5121===F||5126===F,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),
5126===F&&k(w.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):k(5121===F,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var r=0,D=0,z=c.framebufferWidth,B=c.framebufferHeight,H=null;y(O)?H=O:O&&(k.type(O,"object","invalid arguments to regl.read()"),r=O.x|0,D=O.y|0,k(0<=r&&r<c.framebufferWidth,"invalid x offset for regl.read"),k(0<=D&&D<c.framebufferHeight,"invalid y offset for regl.read"),
z=(O.width||c.framebufferWidth-r)|0,B=(O.height||c.framebufferHeight-D)|0,H=O.data||null);H&&(5121===F?k(H instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===F&&k(H instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));k(0<z&&z+r<=c.framebufferWidth,"invalid width for read pixels");k(0<B&&B+D<=c.framebufferHeight,"invalid height for read pixels");f();O=z*B*4;H||(5121===F?H=new Uint8Array(O):
5126===F&&(H=H||new Float32Array(O)));k.isTypedArray(H,"data buffer for regl.read() must be a typedarray");k(H.byteLength>=O,"data buffer for regl.read() too small");q.pixelStorei(3333,4);q.readPixels(r,D,z,B,6408,F,H);return H}function W(a){var c;I.setFBO({framebuffer:a.framebuffer},function(){c=la(a)});return c}return function(a){return a&&"framebuffer"in a?W(a):la(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(C,aa,Ra){var k=C("./util/sorted-object-keys"),y=C("./util/check"),
q=C("./util/values"),I=[];I[32854]=2;I[32855]=2;I[36194]=2;I[33189]=2;I[36168]=1;I[34041]=4;I[35907]=4;I[34836]=16;I[34842]=8;I[34843]=6;aa.exports=function(f,c,x,a,w){function la(a){this.id=r++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;w.profile&&(this.stats={size:0})}function W(c){var k=c.renderbuffer;y(k,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(k);c.renderbuffer=null;c.refCount=0;delete D[c.id];a.renderbufferCount--}
var O={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(O.srgba=35907);c.ext_color_buffer_half_float&&(O.rgba16f=34842,O.rgb16f=34843);c.webgl_color_buffer_float&&(O.rgba32f=34836);var F=[];k(O).forEach(function(a){F[O[a]]=a});var r=0,D={};la.prototype.decRef=function(){0>=--this.refCount&&W(this)};w.profile&&(a.getTotalRenderbufferSize=function(){var a=0;k(D).forEach(function(c){a+=D[c].stats.size});return a});return{create:function(c,k){function r(a,
c){var h=0,g=0,d=32854;"object"===typeof a&&a?("shape"in a?(g=a.shape,y(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),h=g[0]|0,g=g[1]|0):("radius"in a&&(h=g=a.radius|0),"width"in a&&(h=a.width|0),"height"in a&&(g=a.height|0)),"format"in a&&(y.parameter(a.format,O,"invalid renderbuffer format"),d=O[a.format])):"number"===typeof a?(h=a|0,g="number"===typeof c?c|0:h):a?y.raise("invalid arguments to renderbuffer constructor"):h=g=1;y(0<h&&0<g&&h<=x.maxRenderbufferSize&&g<=x.maxRenderbufferSize,
"invalid renderbuffer size");if(h!==m.width||g!==m.height||d!==m.format)return r.width=m.width=h,r.height=m.height=g,m.format=d,f.bindRenderbuffer(36161,m.renderbuffer),f.renderbufferStorage(36161,d,h,g),y(0===f.getError(),"invalid render buffer format"),w.profile&&(m.stats.size=I[m.format]*m.width*m.height),r.format=F[m.format],r}var m=new la(f.createRenderbuffer());D[m.id]=m;a.renderbufferCount++;r(c,k);r.resize=function(a,c){var h=a|0,g=c|0||h;if(h===m.width&&g===m.height)return r;y(0<h&&0<g&&
h<=x.maxRenderbufferSize&&g<=x.maxRenderbufferSize,"invalid renderbuffer size");r.width=m.width=h;r.height=m.height=g;f.bindRenderbuffer(36161,m.renderbuffer);f.renderbufferStorage(36161,m.format,h,g);y(0===f.getError(),"invalid render buffer format");w.profile&&(m.stats.size=I[m.format]*m.width*m.height);return r};r._reglType="renderbuffer";r._renderbuffer=m;w.profile&&(r.stats=m.stats);r.destroy=function(){m.decRef()};return r},clear:function(){q(D).forEach(W)},restore:function(){q(D).forEach(function(a){a.renderbuffer=
f.createRenderbuffer();f.bindRenderbuffer(36161,a.renderbuffer);f.renderbufferStorage(36161,a.format,a.width,a.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(C,aa,Ra){var k=C("./util/sorted-object-keys"),y=C("./util/check"),q=C("./util/extend"),I=C("./util/values");aa.exports=function(f,c,x,a){function w(a,c,f,h){this.name=a;this.id=c;this.location=f;this.info=h}function la(a,c){for(var f=0;f<a.length;++f)if(a[f].id===
c.id){a[f].location=c.location;return}a.push(c)}function W(a,k,x){var h=35632===a?r:D,g=h[k];if(!g){var d=c.str(k),g=f.createShader(a);f.shaderSource(g,d);f.compileShader(g);y.shaderError(f,g,d,a,x);h[k]=g}return g}function O(c,f){this.id=H++;this.fragId=c;this.vertId=f;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function F(m,k,r){var h;h=W(35632,m.fragId);var g=W(35633,m.vertId),d=m.program=f.createProgram();f.attachShader(d,
h);f.attachShader(d,g);if(r)for(h=0;h<r.length;++h)g=r[h],f.bindAttribLocation(d,g[0],g[1]);f.linkProgram(d);y.linkError(f,d,c.str(m.fragId),c.str(m.vertId),k);r=f.getProgramParameter(d,35718);a.profile&&(m.stats.uniformsCount=r);g=m.uniforms;for(h=0;h<r;++h)if(k=f.getActiveUniform(d,h))if(1<k.size)for(var A=0;A<k.size;++A){var x=k.name.replace("[0]","["+A+"]");la(g,new w(x,c.id(x),f.getUniformLocation(d,x),k))}else la(g,new w(k.name,c.id(k.name),f.getUniformLocation(d,k.name),k));r=f.getProgramParameter(d,
35721);a.profile&&(m.stats.attributesCount=r);m=m.attributes;for(h=0;h<r;++h)(k=f.getActiveAttrib(d,h))&&la(m,new w(k.name,c.id(k.name),f.getAttribLocation(d,k.name),k))}var r={},D={},z={},B=[],H=0;a.profile&&(x.getMaxUniformsCount=function(){var a=0;B.forEach(function(c){c.stats.uniformsCount>a&&(a=c.stats.uniformsCount)});return a},x.getMaxAttributesCount=function(){var a=0;B.forEach(function(c){c.stats.attributesCount>a&&(a=c.stats.attributesCount)});return a});return{clear:function(){var a=f.deleteShader.bind(f);
I(r).forEach(a);r={};I(D).forEach(a);D={};B.forEach(function(a){f.deleteProgram(a.program)});B.length=0;z={};x.shaderCount=0},program:function(a,c,w,h){y.command(0<=a,"missing vertex shader",w);y.command(0<=c,"missing fragment shader",w);var g=z[c];g||(g=z[c]={});var d=g[a];if(d&&(d.refCount++,!h))return d;var A=new O(c,a);x.shaderCount++;F(A,w,h);d||(g[a]=A);B.push(A);return q(A,{destroy:function(){A.refCount--;if(0>=A.refCount){f.deleteProgram(A.program);var a=B.indexOf(A);B.splice(a,1);x.shaderCount--}0>=
g[A.vertId].refCount&&(f.deleteShader(D[A.vertId]),delete D[A.vertId],delete z[A.fragId][A.vertId]);k(z[A.fragId]).length||(f.deleteShader(r[A.fragId]),delete r[A.fragId],delete z[A.fragId])}})},restore:function(){r={};D={};for(var a=0;a<B.length;++a)F(B[a],null,B[a].attributes.map(function(a){return[a.location,a.name]}))},shader:W,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(C,aa,Ra){aa.exports=function(){return{vaoCount:0,
bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(C,aa,Ra){aa.exports=function(){var k={"":0},y=[""];return{id:function(q){var I=k[q];if(I)return I;I=k[q]=y.length;y.push(q);return I},str:function(k){return y[k]}}}},{}],19:[function(C,aa,Ra){function k(b){return"[object "+b+"]"}function y(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function q(b){return Array.isArray(b)&&0!==b.length&&
z(b[0])?!0:!1}function I(b){return Object.prototype.toString.call(b)}function f(b){if(!b)return!1;var a=I(b);return 0<=pa.indexOf(a)?!0:y(b)||q(b)||F(b)}function c(b,a){36193===b.type?(b.data=D(a),r.freeType(a)):b.data=a}function x(b,a,d,c,g,f){b="undefined"!==typeof fa[b]?fa[b]:h[b]*M[a];f&&(b*=6);if(g){for(c=0;1<=d;)c+=b*d*d,d/=2;return c}return b*d*c}var a=C("./util/sorted-object-keys"),w=C("./util/check"),la=C("./util/extend"),W=C("./util/values"),O=C("./util/is-typed-array"),F=C("./util/is-ndarray"),
r=C("./util/pool"),D=C("./util/to-half-float"),z=C("./util/is-array-like"),B=C("./util/flatten"),H=C("./util/is-pow2");Ra=C("./constants/arraytypes.json");var m=C("./constants/arraytypes.json"),Q=[9984,9986,9985,9987],Ia=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;h[6408]=h[35906]=4;var g=k("HTMLCanvasElement"),d=k("OffscreenCanvas"),A=k("CanvasRenderingContext2D"),P=k("ImageBitmap"),ea=k("HTMLImageElement"),n=k("HTMLVideoElement"),pa=a(Ra).concat([g,
d,A,P,ea,n]),M=[];M[5121]=1;M[5126]=4;M[36193]=2;M[5123]=2;M[5125]=4;var fa=[];fa[32854]=2;fa[32855]=2;fa[36194]=2;fa[34041]=4;fa[33776]=.5;fa[33777]=.5;fa[33778]=1;fa[33779]=1;fa[35986]=.5;fa[35987]=1;fa[34798]=1;fa[35840]=.5;fa[35841]=.25;fa[35842]=.5;fa[35843]=.25;fa[36196]=.5;aa.exports=function(b,e,k,M,fa,pa,C){function na(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=
this.width=0}function Qa(b,a){b.internalformat=a.internalformat;b.format=a.format;b.type=a.type;b.compressed=a.compressed;b.premultiplyAlpha=a.premultiplyAlpha;b.flipY=a.flipY;b.unpackAlignment=a.unpackAlignment;b.colorSpace=a.colorSpace;b.width=a.width;b.height=a.height;b.channels=a.channels}function X(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(w.type(a.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(w.type(a.flipY,"boolean",
"invalid texture flip"),b.flipY=a.flipY);"alignment"in a&&(w.oneOf(a.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=a.alignment);"colorSpace"in a&&(w.parameter(a.colorSpace,vc,"invalid colorSpace"),b.colorSpace=vc[a.colorSpace]);if("type"in a){var d=a.type;w(e.oes_texture_float||!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");w(e.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");
w(e.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");w.parameter(d,Y,"invalid texture type");b.type=Y[d]}var c=b.width,g=b.height,f=b.channels,d=!1;"shape"in a?(w(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),c=a.shape[0],g=a.shape[1],3===a.shape.length&&(f=a.shape[2],w(0<f&&4>=f,"invalid number of channels"),d=!0),w(0<=c&&c<=k.maxTextureSize,"invalid width"),w(0<=
g&&g<=k.maxTextureSize,"invalid height")):("radius"in a&&(c=g=a.radius,w(0<=c&&c<=k.maxTextureSize,"invalid radius")),"width"in a&&(c=a.width,w(0<=c&&c<=k.maxTextureSize,"invalid width")),"height"in a&&(g=a.height,w(0<=g&&g<=k.maxTextureSize,"invalid height")),"channels"in a&&(f=a.channels,w(0<f&&4>=f,"invalid number of channels"),d=!0));b.width=c|0;b.height=g|0;b.channels=f|0;c=!1;"format"in a&&(c=a.format,w(e.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),
w.parameter(c,J,"invalid texture format"),g=b.internalformat=J[c],b.format=ta[g],c in Y&&!("type"in a)&&(b.type=Y[c]),c in ja&&(b.compressed=!0),c=!0);!d&&c?b.channels=h[b.format]:d&&!c?b.channels!==Ia[b.format]&&(b.format=b.internalformat=Ia[b.channels]):c&&d&&w(b.channels===h[b.format],"number of channels inconsistent with specified format")}}function K(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}
function L(){na.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function T(b,a){var e=null;f(a)?e=a:a&&(w.type(a,"object","invalid pixel data type"),X(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),f(a.data)&&(e=a.data));w(!b.compressed||e instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){w(!e,"can not specify copy and data field for the same texture");var l=fa.viewportWidth,h=fa.viewportHeight;
b.width=b.width||l-b.xOffset;b.height=b.height||h-b.yOffset;b.needsCopy=!0;w(0<=b.xOffset&&b.xOffset<l&&0<=b.yOffset&&b.yOffset<h&&0<b.width&&b.width<=l&&0<b.height&&b.height<=h,"copy texture read out of bounds")}else if(!e)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(O(e))b.channels=b.channels||4,b.data=e,"type"in a||5121!==b.type||(b.type=m[Object.prototype.toString.call(e)]|0);else if(y(e)){b.channels=b.channels||4;l=e;h=l.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:h=
r.allocType(b.type,h);h.set(l);b.data=h;break;case 36193:b.data=D(l);break;default:w.raise("unsupported texture type, must specify a typed array")}b.alignment=1;b.needsFree=!0}else if(F(e)){l=e.data;Array.isArray(l)||5121!==b.type||(b.type=m[Object.prototype.toString.call(l)]|0);var h=e.shape,t=e.stride,p,v,u,J;3===h.length?(u=h[2],J=t[2]):(w(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),J=u=1);p=h[0];v=h[1];h=t[0];t=t[1];b.alignment=1;b.width=p;b.height=v;b.channels=u;b.format=b.internalformat=
Ia[u];b.needsFree=!0;p=J;e=e.offset;u=b.width;J=b.height;v=b.channels;for(var x=r.allocType(36193===b.type?5126:b.type,u*J*v),G=0,ba=0;ba<J;++ba)for(var E=0;E<u;++E)for(var M=0;M<v;++M)x[G++]=l[h*E+t*ba+p*M+e];c(b,x)}else if(I(e)===g||I(e)===d||I(e)===A)I(e)===g||I(e)===d?b.element=e:b.element=e.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(I(e)===P)b.element=e,b.width=e.width,b.height=e.height,b.channels=4;else if(I(e)===ea)b.element=e,b.width=e.naturalWidth,b.height=
e.naturalHeight,b.channels=4;else if(I(e)===n)b.element=e,b.width=e.videoWidth,b.height=e.videoHeight,b.channels=4;else if(q(e)){l=b.width||e[0].length;h=b.height||e.length;t=b.channels;t=z(e[0][0])?t||e[0][0].length:t||1;p=B.shape(e);u=1;for(J=0;J<p.length;++J)u*=p[J];u=r.allocType(36193===b.type?5126:b.type,u);B.flatten(e,p,"",u);c(b,u);b.alignment=1;b.width=l;b.height=h;b.channels=t;b.format=b.internalformat=Ia[t];b.needsFree=!0}5126===b.type?w(0<=k.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):
36193===b.type&&w(0<=k.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function ma(a,d,c,g,f){var e=a.element,h=a.data,n=a.internalformat,m=a.format,k=a.type,t=a.width,A=a.height;K(a);e?b.texSubImage2D(d,f,c,g,m,k,e):a.compressed?b.compressedTexSubImage2D(d,f,c,g,n,t,A,h):a.needsCopy?(M(),b.copyTexSubImage2D(d,f,c,g,a.xOffset,a.yOffset,t,A)):b.texSubImage2D(d,f,c,g,t,A,m,k,h)}function N(){return V.pop()||new L}function Rb(b){b.needsFree&&r.freeType(b.data);
L.call(b);V.push(b)}function Za(){na.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function S(b,a,d){var c=b.images[0]=N();b.mipmask=1;c.width=b.width=a;c.height=b.height=d;c.channels=b.channels=4}function u(b,a){var d=null;if(f(a))d=b.images[0]=N(),Qa(d,b),T(d,a),b.mipmask=1;else if(X(b,a),Array.isArray(a.mipmap))for(var c=a.mipmap,g=0;g<c.length;++g)d=b.images[g]=N(),Qa(d,b),d.width>>=g,d.height>>=g,T(d,c[g]),b.mipmask|=1<<g;else d=b.images[0]=N(),Qa(d,
b),T(d,a),b.mipmask=1;Qa(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==b.internalformat&&33779!==b.internalformat||w(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ka(a,d){for(var c=a.images,g=0;g<c.length&&c[g];++g){var f=c[g],e=d,h=g,n=f.element,m=f.data,k=f.internalformat,t=f.format,A=f.type,u=f.width,v=f.height;K(f);n?b.texImage2D(e,h,t,t,A,n):f.compressed?
b.compressedTexImage2D(e,h,k,u,v,0,m):f.needsCopy?(M(),b.copyTexImage2D(e,h,t,f.xOffset,f.yOffset,u,v,0)):b.texImage2D(e,h,t,u,v,0,t,A,m||null)}}function ca(){var b=ga.pop()||new Za;na.call(b);for(var a=b.mipmask=0;16>a;++a)b.images[a]=null;return b}function za(b){for(var a=b.images,d=0;d<a.length;++d)a[d]&&Rb(a[d]),a[d]=null;ga.push(b)}function Na(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function aa(b,a){if("min"in
a){var d=a.min;w.parameter(d,sd);b.minFilter=sd[d];0<=Q.indexOf(b.minFilter)&&!("faces"in a)&&(b.genMipmaps=!0)}"mag"in a&&(d=a.mag,w.parameter(d,qc),b.magFilter=qc[d]);var d=b.wrapS,c=b.wrapT;if("wrap"in a){var g=a.wrap;"string"===typeof g?(w.parameter(g,dc),d=c=dc[g]):Array.isArray(g)&&(w.parameter(g[0],dc),w.parameter(g[1],dc),d=dc[g[0]],c=dc[g[1]])}else"wrapS"in a&&(d=a.wrapS,w.parameter(d,dc),d=dc[d]),"wrapT"in a&&(c=a.wrapT,w.parameter(c,dc),c=dc[c]);b.wrapS=d;b.wrapT=c;"anisotropic"in a&&(d=
a.anisotropic,w("number"===typeof d&&1<=d&&d<=k.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=a.anisotropic);if("mipmap"in a){d=!1;switch(typeof a.mipmap){case "string":w.parameter(a.mipmap,Yb,"invalid mipmap hint");b.mipmapHint=Yb[a.mipmap];d=b.genMipmaps=!0;break;case "boolean":d=b.genMipmaps=a.mipmap;break;case "object":w(Array.isArray(a.mipmap),"invalid mipmap type");b.genMipmaps=!1;d=!0;break;default:w.raise("invalid mipmap type")}!d||"min"in a||(b.minFilter=9984)}}function Ga(a,
d){b.texParameteri(d,10241,a.minFilter);b.texParameteri(d,10240,a.magFilter);b.texParameteri(d,10242,a.wrapS);b.texParameteri(d,10243,a.wrapT);e.ext_texture_filter_anisotropic&&b.texParameteri(d,34046,a.anisotropic);a.genMipmaps&&(b.hint(33170,a.mipmapHint),b.generateMipmap(d))}function U(a){na.call(this);this.mipmask=0;this.internalformat=6408;this.id=qa++;this.refCount=1;this.target=a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Na;C.profile&&(this.stats={size:0})}
function rb(a){b.activeTexture(33984);b.bindTexture(a.target,a.texture)}function da(){var a=ba[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function ra(a){var d=a.texture;w(d,"must not double destroy texture");var c=a.unit,g=a.target;0<=c&&(b.activeTexture(33984+c),b.bindTexture(g,null),ba[c]=null);b.deleteTexture(d);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete G[a.id];pa.textureCount--}var Yb={"don't care":4352,"dont care":4352,nice:4354,fast:4353},dc={repeat:10497,
clamp:33071,mirror:33648},qc={nearest:9728,linear:9729},sd=la({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},qc),vc={none:0,browser:37444},Y={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},J={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ja={};e.ext_srgb&&(J.srgb=35904,J.srgba=35906);e.oes_texture_float&&(Y.float32=Y["float"]=5126);e.oes_texture_half_float&&
(Y.float16=Y["half float"]=36193);e.webgl_depth_texture&&(la(J,{depth:6402,"depth stencil":34041}),la(Y,{uint16:5123,uint32:5125,"depth stencil":34042}));e.webgl_compressed_texture_s3tc&&la(ja,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});e.webgl_compressed_texture_atc&&la(ja,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});e.webgl_compressed_texture_pvrtc&&la(ja,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,
"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});e.webgl_compressed_texture_etc1&&(ja["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(b.getParameter(34467));a(ja).forEach(function(b){var a=ja[b];0<=Ca.indexOf(a)&&(J[b]=a)});var sb=a(J);k.textureFormats=sb;var Qc=[];a(J).forEach(function(b){Qc[J[b]]=b});var Zc=[];a(Y).forEach(function(b){Zc[Y[b]]=b});var E=[];a(qc).forEach(function(b){E[qc[b]]=b});var v=[];a(sd).forEach(function(b){v[sd[b]]=b});var ha=[];a(dc).forEach(function(b){ha[dc[b]]=
b});var ta=sb.reduce(function(b,a){var d=J[a];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||e.ext_srgb&&(35904===d||35906===d)?b[d]=d:32855===d||0<=a.indexOf("rgba")?b[d]=6408:b[d]=6407;return b},{}),V=[],ga=[],qa=0,G={},t=k.maxTextureUnits,ba=Array(t).map(function(){return null});la(U.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var d=0;d<t;++d){var c=ba[d];if(c){if(0<c.bindCount)continue;c.unit=-1}ba[d]=this;a=d;break}a>=t&&w.raise("insufficient number of texture units");
C.profile&&pa.maxTextureUnits<a+1&&(pa.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ra(this)}});C.profile&&(pa.getTotalTextureSize=function(){var b=0;a(G).forEach(function(a){b+=G[a].stats.size});return b});return{create2D:function(a,d){function c(b,a){var d=g.texInfo;Na.call(d);var f=ca();"number"===typeof b?"number"===typeof a?S(f,b|0,a|0):S(f,b|0,b|0):b?(w.type(b,
"object","invalid arguments to regl.texture"),aa(d,b),u(f,b)):S(f,1,1);d.genMipmaps&&(f.mipmask=(f.width<<1)-1);g.mipmask=f.mipmask;Qa(g,f);w.texture2D(d,f,k);g.internalformat=f.internalformat;c.width=f.width;c.height=f.height;rb(g);ka(f,3553);Ga(d,3553);da();za(f);C.profile&&(g.stats.size=x(g.internalformat,g.type,f.width,f.height,d.genMipmaps,!1));c.format=Qc[g.internalformat];c.type=Zc[g.type];c.mag=E[d.magFilter];c.min=v[d.minFilter];c.wrapS=ha[d.wrapS];c.wrapT=ha[d.wrapT];return c}var g=new U(3553);
G[g.id]=g;pa.textureCount++;c(a,d);c.subimage=function(b,a,d,f){w(!!b,"must specify image data");a|=0;d|=0;f|=0;var e=N();Qa(e,g);e.width=0;e.height=0;T(e,b);e.width=e.width||(g.width>>f)-a;e.height=e.height||(g.height>>f)-d;w(g.type===e.type&&g.format===e.format&&g.internalformat===e.internalformat,"incompatible format for texture.subimage");w(0<=a&&0<=d&&a+e.width<=g.width&&d+e.height<=g.height,"texture.subimage write out of bounds");w(g.mipmask&1<<f,"missing mipmap data");w(e.data||e.element||
e.needsCopy,"missing image data");rb(g);ma(e,3553,a,d,f);da();Rb(e);return c};c.resize=function(a,d){var f=a|0,e=d|0||f;if(f===g.width&&e===g.height)return c;c.width=g.width=f;c.height=g.height=e;rb(g);for(var h=0;g.mipmask>>h;++h){var n=f>>h,m=e>>h;if(!n||!m)break;b.texImage2D(3553,h,g.format,n,m,0,g.format,g.type,null)}da();C.profile&&(g.stats.size=x(g.internalformat,g.type,f,e,!1,!1));return c};c._reglType="texture2d";c._texture=g;C.profile&&(c.stats=g.stats);c.destroy=function(){g.decRef()};return c},
createCube:function(a,d,c,g,f,e){function h(b,a,d,c,g,f){var e,l=n.texInfo;Na.call(l);for(e=0;6>e;++e)m[e]=ca();if("number"!==typeof b&&b)if("object"===typeof b)if(a)u(m[0],b),u(m[1],a),u(m[2],d),u(m[3],c),u(m[4],g),u(m[5],f);else if(aa(l,b),X(n,b),"faces"in b)for(b=b.faces,w(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),e=0;6>e;++e)w("object"===typeof b[e]&&!!b[e],"invalid input for cube map face"),Qa(m[e],n),u(m[e],b[e]);else for(e=0;6>e;++e)u(m[e],b);else w.raise("invalid arguments to cube map");
else for(b=b|0||1,e=0;6>e;++e)S(m[e],b,b);Qa(n,m[0]);w.optional(function(){k.npotTextureCube||w(H(n.width)&&H(n.height),"your browser does not support non power or two texture dimensions")});n.mipmask=l.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;w.textureCube(n,l,m,k);n.internalformat=m[0].internalformat;h.width=m[0].width;h.height=m[0].height;rb(n);for(e=0;6>e;++e)ka(m[e],34069+e);Ga(l,34067);da();C.profile&&(n.stats.size=x(n.internalformat,n.type,h.width,h.height,l.genMipmaps,!0));h.format=Qc[n.internalformat];
h.type=Zc[n.type];h.mag=E[l.magFilter];h.min=v[l.minFilter];h.wrapS=ha[l.wrapS];h.wrapT=ha[l.wrapT];for(e=0;6>e;++e)za(m[e]);return h}var n=new U(34067);G[n.id]=n;pa.cubeCount++;var m=Array(6);h(a,d,c,g,f,e);h.subimage=function(b,a,d,c,g){w(!!a,"must specify image data");w("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");d|=0;c|=0;g|=0;var f=N();Qa(f,n);f.width=0;f.height=0;T(f,a);f.width=f.width||(n.width>>g)-d;f.height=f.height||(n.height>>g)-c;w(n.type===f.type&&n.format===f.format&&n.internalformat===
f.internalformat,"incompatible format for texture.subimage");w(0<=d&&0<=c&&d+f.width<=n.width&&c+f.height<=n.height,"texture.subimage write out of bounds");w(n.mipmask&1<<g,"missing mipmap data");w(f.data||f.element||f.needsCopy,"missing image data");rb(n);ma(f,34069+b,d,c,g);da();Rb(f);return h};h.resize=function(a){a|=0;if(a!==n.width){h.width=n.width=a;h.height=n.height=a;rb(n);for(var d=0;6>d;++d)for(var c=0;n.mipmask>>c;++c)b.texImage2D(34069+d,c,n.format,a>>c,a>>c,0,n.format,n.type,null);da();
C.profile&&(n.stats.size=x(n.internalformat,n.type,h.width,h.height,!1,!0));return h}};h._reglType="textureCube";h._texture=n;C.profile&&(h.stats=n.stats);h.destroy=function(){n.decRef()};return h},clear:function(){for(var a=0;a<t;++a)b.activeTexture(33984+a),b.bindTexture(3553,null),ba[a]=null;W(G).forEach(ra);pa.cubeCount=0;pa.textureCount=0},getTexture:function(b){return null},restore:function(){for(var a=0;a<t;++a){var d=ba[a];d&&(d.bindCount=0,d.unit=-1,ba[a]=null)}W(G).forEach(function(a){a.texture=
b.createTexture();b.bindTexture(a.target,a.texture);for(var d=0;32>d;++d)if(0!==(a.mipmask&1<<d))if(3553===a.target)b.texImage2D(3553,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);else for(var c=0;6>c;++c)b.texImage2D(34069+c,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);Ga(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<t;++a){var d=ba[a];d&&(d.bindCount=0,d.unit=-1,ba[a]=null);b.activeTexture(33984+a);b.bindTexture(3553,null);b.bindTexture(34067,
null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(C,aa,Ra){aa.exports=function(k,y){function q(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function I(c,f,k){var r=x.pop()||new q;r.startQueryIndex=c;r.endQueryIndex=f;r.sum=
0;r.stats=k;a.push(r)}if(!y.ext_disjoint_timer_query)return null;var f=[],c=[],x=[],a=[],w=[],la=[];return{beginQuery:function(a){var k=f.pop()||y.ext_disjoint_timer_query.createQueryEXT();y.ext_disjoint_timer_query.beginQueryEXT(35007,k);c.push(k);I(c.length-1,c.length,a)},endQuery:function(){y.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:I,update:function(){var k,q;k=c.length;if(0!==k){la.length=Math.max(la.length,k+1);w.length=Math.max(w.length,k+1);w[0]=0;var F=la[0]=0;for(q=k=
0;q<c.length;++q){var r=c[q];y.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(F+=y.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),f.push(r)):c[k++]=r;w[q+1]=F;la[q+1]=k}c.length=k;for(q=k=0;q<a.length;++q){var F=a[q],D=F.startQueryIndex,r=F.endQueryIndex;F.sum+=w[r]-w[D];D=la[D];r=la[r];r===D?(F.stats.gpuTime+=F.sum/1E6,x.push(F)):(F.startQueryIndex=D,F.endQueryIndex=r,a[k++]=F)}a.length=k}},getNumPendingQueries:function(){return c.length},clear:function(){f.push.apply(f,c);for(var a=0;a<
f.length;a++)y.ext_disjoint_timer_query.deleteQueryEXT(f[a]);c.length=0;f.length=0},restore:function(){c.length=0;f.length=0}}}},{}],21:[function(C,aa,Ra){function k(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function y(a){a=Error("(regl) "+a);console.error(a);throw a;}function q(a,c){a||y(c)}function I(a){return a?": "+a:""}function f(a,c){switch(c){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===
typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function c(a,c,g){0>c.indexOf(a)&&y("invalid value"+I(g)+". must be one of: "+c)}function x(a,c){for(a+="";a.length<c;)a=" "+a;return a}function a(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function w(a,c){this.number=a;this.line=c;this.errors=[]}function la(a,c,g){this.file=a;this.line=c;this.message=g}function W(){var a=Error(),a=(a.stack||
a).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return c?c[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function O(){var a=Error(),a=(a.stack||a).toString(),c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return c?c[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function F(d,c){var g=d.split("\n"),f=1,h=0,m={unknown:new a,0:new a};m.unknown.name=m[0].name=c||W();m.unknown.lines.push(new w(0,""));for(var r=0;r<g.length;++r){var y=g[r],b=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(y);
if(b)switch(b[1]){case "line":if(b=/(\d+)(\s+\d+)?/.exec(b[2]))f=b[1]|0,b[2]&&(h=b[2]|0,h in m||(m[h]=new a));break;case "define":if(b=/SHADER_NAME(_B64)?\s+(.*)$/.exec(b[2]))m[h].name=b[1]?k(b[2]):b[2]}m[h].lines.push(new w(f++,y))}Q(m).forEach(function(b){var a=m[b];a.lines.forEach(function(b){a.index[b.number]=b})});return m}function r(a){var c=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var d=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);d?c.push(new la(d[1]|0,d[2]|0,d[3].trim())):0<a.length&&
c.push(new la("unknown",0,a))}});return c}function D(a,c){c.forEach(function(c){var g=a[c.file];if(g){var f=g.index[c.line];if(f){f.errors.push(c);g.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(c)})}function z(a){a._commandRef=W()}function B(a,c){var g=O();y(a+" in command "+(c||W())+("unknown"===g?"":" called from "+g))}function H(a,c,g,h){f(a,c)||B("invalid parameter type"+I(g)+". expected "+c+", got "+typeof a,h||W())}function m(a,c){return 32820===a||32819===a||33635===
a?2:34042===a?4:g[a]*c}var Q=C("./sorted-object-keys"),Ia=C("./is-typed-array");C=C("./extend");var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),g={};g[5120]=g[5121]=1;g[5122]=g[5123]=g[36193]=g[33635]=g[32819]=g[32820]=2;g[5124]=g[5125]=g[5126]=g[34042]=4;aa.exports=C(q,{optional:function(a){a()},raise:y,commandRaise:B,command:function(a,c,g){a||B(c,g||W())},parameter:function(a,c,g){a in c||y("unknown parameter ("+a+")"+I(g)+". possible values: "+
Q(c).join())},commandParameter:function(a,c,g,f){a in c||B("unknown parameter ("+a+")"+I(g)+". possible values: "+Q(c).join(),f||W())},constructor:function(a){Q(a).forEach(function(a){0>h.indexOf(a)&&y('invalid regl constructor argument "'+a+'". must be one of '+h)})},type:function(a,c,g){f(a,c)||y("invalid parameter type"+I(g)+". expected "+c+", got "+typeof a)},commandType:H,isTypedArray:function(a,c){Ia(a)||y("invalid parameter type"+I(c)+". must be a typed array")},nni:function(a,c){0<=a&&(a|
0)===a||y("invalid parameter type, ("+a+")"+I(c)+". must be a nonnegative integer")},oneOf:c,shaderError:function(a,c,g,f,h){if(!a.getShaderParameter(c,a.COMPILE_STATUS)){c=a.getShaderInfoLog(c);a=f===a.FRAGMENT_SHADER?"fragment":"vertex";H(g,"string",a+" shader source must be a string",h);var m=F(g,h);g=r(c);D(m,g);Q(m).forEach(function(a){function c(b,a){d.push(b);g.push(a||"")}var b=m[a];if(b.hasErrors){var d=[""],g=[""];c("file number "+a+": "+b.name+"\n","color:red;text-decoration:underline;font-weight:bold");
b.lines.forEach(function(b){if(0<b.errors.length){c(x(b.number,4)+"|  ","background-color:yellow; font-weight:bold");c(b.line+"\n","color:red; background-color:yellow; font-weight:bold");var a=0;b.errors.forEach(function(d){d=d.message;var g=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(g){var f=g[1];d=g[2];switch(f){case "assign":f="="}a=Math.max(b.line.indexOf(f,a),0)}else a=0;c(x("| ",6));c(x("^^^",a+3)+"\n","font-weight:bold");c(x("| ",6));c(d+"\n","font-weight:bold")});c(x("| ",6)+"\n")}else c(x(b.number,
4)+"|  "),c(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(g[0]=d.join("%c"),console.log.apply(console,g))}});q.raise("Error compiling "+a+" shader, "+m[0].name)}},linkError:function(a,c,g,f,h){a.getProgramParameter(c,a.LINK_STATUS)||(a=a.getProgramInfoLog(c),g=F(g,h),f='Error linking program with vertex shader, "'+F(f,h)[0].name+'", and fragment shader "'+g[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold",
"color:red"):console.log(f+"\n"+a),q.raise(f))},callSite:O,saveCommandRef:z,saveDrawInfo:function(a,c,g,f){function h(a){return a?f.id(a):0}function m(a,b){Q(b).forEach(function(b){a[f.id(b)]=!0})}z(a);a._fragId=h(a["static"].frag);a._vertId=h(a["static"].vert);var k=a._uniformSet={};m(k,c["static"]);m(k,c.dynamic);c=a._attributeSet={};m(c,g["static"]);m(c,g.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,
g,f){a.texture?c(a.texture._texture.internalformat,g,"unsupported texture format for attachment"):c(a.renderbuffer._renderbuffer.format,f,"unsupported renderbuffer format for attachment")},guessCommand:W,texture2D:function(a,c,g){var f=c.width,h=c.height,k=c.channels;q(0<f&&f<=g.maxTextureSize&&0<h&&h<=g.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||q(!(f&f-1)&&!!f&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===c.mipmask?
1!==f&&1!==h&&q(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(q(!(f&f-1)&&!!f&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),q(c.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===c.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&q(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),q(!a.genMipmaps,"mipmap generation not supported with float textures"));
var r=c.images;for(g=0;16>g;++g)if(r[g]){var y=f>>g,b=h>>g;q(c.mipmask&1<<g,"missing mipmap data");var e=r[g];q(e.width===y&&e.height===b,"invalid shape for mip images");q(e.format===c.format&&e.internalformat===c.internalformat&&e.type===c.type,"incompatible type for mip image");!e.compressed&&e.data&&(y=Math.ceil(m(e.type,k)*y/e.unpackAlignment)*e.unpackAlignment,q(e.data.byteLength===y*b,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||q(0===(c.mipmask&
1<<g),"extra mipmap data");c.compressed&&q(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,c,g,f){var h=a.width,k=a.height,r=a.channels;q(0<h&&h<=f.maxTextureSize&&0<k&&k<=f.maxTextureSize,"invalid texture shape");q(h===k,"cube map must be square");q(33071===c.wrapS&&33071===c.wrapT,"wrap mode not supported by cube map");for(f=0;f<g.length;++f){var y=g[f];q(y.width===h&&y.height===k,"inconsistent cube map face shape");c.genMipmaps&&(q(!y.compressed,"can not generate mipmap for compressed textures"),
q(1===y.mipmask,"can not specify mipmaps and generate mipmaps"));for(var b=y.images,e=0;16>e;++e){var x=b[e];if(x){var w=h>>e,z=k>>e;q(y.mipmask&1<<e,"missing mipmap data");q(x.width===w&&x.height===z,"invalid shape for mip images");q(x.format===a.format&&x.internalformat===a.internalformat&&x.type===a.type,"incompatible type for mip image");x.compressed||x.data&&q(x.data.byteLength===w*z*Math.max(m(x.type,r),x.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},
{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(C,aa,Ra){aa.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(C,aa,Ra){function k(k){return Array.prototype.slice.call(k)}var y=C("./extend"),q=C("./compiled-fns");aa.exports=function(){function I(){var a=[],c=[];return y(function(){a.push.apply(a,k(arguments))},{def:function(){var f="v"+x;x++;c.push(f);0<arguments.length&&(a.push(f,
"="),a.push.apply(a,k(arguments)),a.push(";"));return f},toString:function(){return k([0<c.length?"var "+c.join(",")+";":"",k(a).join("")]).join("")}})}function f(){function a(k,r){f(k,r,"=",c.def(k,r),";")}var c=I(),f=I(),x=c.toString,r=f.toString;return y(function(){c.apply(c,k(arguments))},{def:c.def,entry:c,exit:f,save:a,set:function(f,k,r){a(f,k);c(f,k,"=",r,";")},toString:function(){return x()+r()}})}var c=0,x=0,a={},w={};return{global:I(),link:function(f){var k="$"+c,y=!1;"object"===typeof f&&
f.name&&(k=f.name.replace(/ /g,"_"),y=!0);if(k in a)return k;a[k]=f;y||c++;return k},block:I,proc:function(a,c){function x(){var a="a"+q.length;q.push(a);return a}var q=[];c=c||0;for(var r=0;r<c;++r)x();var r=f(),D=r.toString;return w[a]=y(r,{arg:x,toString:function(){return k(["function(",q.join(),"){",D(),"}"]).join("")}})},scope:f,cond:function(){var a=k(arguments).join(""),c=f(),x=f(),w=c.toString,r=x.toString;return y(c,{then:function(){c.apply(c,k(arguments));return this},"else":function(){x.apply(x,
k(arguments));return this},toString:function(){var c=r();c&&(c="else{"+c+"}");return k(["if(",a,"){",w(),"}",c]).join("")}})},compile:function(){var c=[],f=[];Object.keys(a).sort(function(a,c){var f="$"===a.charAt(0),k="$"===c.charAt(0);return f||k?f&&k?+a.slice(1)<+c.slice(1)?-1:1:f&&!k?-1:1:a.localeCompare(c)}).forEach(function(k){var y=a[k];c.push(k);f.push(y)});for(var k=0,y=c.length-1;-1<y;y--)if("$"===c[y].charAt(0)){k=y;break}k=c.slice(k).join();y=q[k];if(!y)throw Error("missing precompiled function with key: "+
k);return y.apply(null,f)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(C,aa,Ra){aa.exports={$0:function(k){var y,q,I,f,c,x,a,w,la,W,O,F,r,D,z,B,H,m,Q,C,h,g,d,A,P,ea,n,pa,M,fa;y=k.attributes;q=k.current;I=k.framebuffer;f=k.gl;c=k.next;x=k.vao;a=c.blend_color;w=q.blend_color;la=c.blend_equation;W=q.blend_equation;O=c.blend_func;F=q.blend_func;r=c.colorMask;D=q.colorMask;z=c.depth_range;B=q.depth_range;H=c.polygonOffset_offset;m=q.polygonOffset_offset;Q=c.sample_coverage;C=q.sample_coverage;
h=c.scissor_box;g=q.scissor_box;d=c.stencil_func;A=q.stencil_func;P=c.stencil_opBack;ea=q.stencil_opBack;n=c.stencil_opFront;pa=q.stencil_opFront;M=c.viewport;fa=q.viewport;return{poll:function(){var b,e,k,y,x,aa,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za;q.dirty=!1;e=c.blend_enable;k=c.cull_enable;y=c.depth_enable;x=c.dither;aa=c.polygonOffset_enable;Xb=c.sample_alpha;na=c.sample_enable;Qa=c.scissor_enable;X=c.stencil_enable;K=c.cull_face;L=q.cull_face;T=c.depth_func;ma=q.depth_func;N=c.depth_mask;
Rb=q.depth_mask;Za=c.frontFace;S=q.frontFace;u=c.lineWidth;ka=q.lineWidth;ca=c.stencil_mask;za=q.stencil_mask;b=I.next;b!==I.cur&&(b?f.bindFramebuffer(36160,b.framebuffer):f.bindFramebuffer(36160,null),I.cur=b);e!==q.blend_enable&&(e?f.enable(3042):f.disable(3042),q.blend_enable=e);k!==q.cull_enable&&(k?f.enable(2884):f.disable(2884),q.cull_enable=k);y!==q.depth_enable&&(y?f.enable(2929):f.disable(2929),q.depth_enable=y);x!==q.dither&&(x?f.enable(3024):f.disable(3024),q.dither=x);aa!==q.polygonOffset_enable&&
(aa?f.enable(32823):f.disable(32823),q.polygonOffset_enable=aa);Xb!==q.sample_alpha&&(Xb?f.enable(32926):f.disable(32926),q.sample_alpha=Xb);na!==q.sample_enable&&(na?f.enable(32928):f.disable(32928),q.sample_enable=na);Qa!==q.scissor_enable&&(Qa?f.enable(3089):f.disable(3089),q.scissor_enable=Qa);X!==q.stencil_enable&&(X?f.enable(2960):f.disable(2960),q.stencil_enable=X);if(a[0]!==w[0]||a[1]!==w[1]||a[2]!==w[2]||a[3]!==w[3])f.blendColor(a[0],a[1],a[2],a[3]),w[0]=a[0],w[1]=a[1],w[2]=a[2],w[3]=a[3];
if(la[0]!==W[0]||la[1]!==W[1])f.blendEquationSeparate(la[0],la[1]),W[0]=la[0],W[1]=la[1];if(O[0]!==F[0]||O[1]!==F[1]||O[2]!==F[2]||O[3]!==F[3])f.blendFuncSeparate(O[0],O[1],O[2],O[3]),F[0]=O[0],F[1]=O[1],F[2]=O[2],F[3]=O[3];if(r[0]!==D[0]||r[1]!==D[1]||r[2]!==D[2]||r[3]!==D[3])f.colorMask(r[0],r[1],r[2],r[3]),D[0]=r[0],D[1]=r[1],D[2]=r[2],D[3]=r[3];K!==L&&(f.cullFace(K),q.cull_face=K);T!==ma&&(f.depthFunc(T),q.depth_func=T);N!==Rb&&(f.depthMask(N),q.depth_mask=N);if(z[0]!==B[0]||z[1]!==B[1])f.depthRange(z[0],
z[1]),B[0]=z[0],B[1]=z[1];Za!==S&&(f.frontFace(Za),q.frontFace=Za);u!==ka&&(f.lineWidth(u),q.lineWidth=u);if(H[0]!==m[0]||H[1]!==m[1])f.polygonOffset(H[0],H[1]),m[0]=H[0],m[1]=H[1];if(Q[0]!==C[0]||Q[1]!==C[1])f.sampleCoverage(Q[0],Q[1]),C[0]=Q[0],C[1]=Q[1];if(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3])f.scissor(h[0],h[1],h[2],h[3]),g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3];if(d[0]!==A[0]||d[1]!==A[1]||d[2]!==A[2])f.stencilFunc(d[0],d[1],d[2]),A[0]=d[0],A[1]=d[1],A[2]=d[2];ca!==za&&(f.stencilMask(ca),
q.stencil_mask=ca);if(P[0]!==ea[0]||P[1]!==ea[1]||P[2]!==ea[2]||P[3]!==ea[3])f.stencilOpSeparate(P[0],P[1],P[2],P[3]),ea[0]=P[0],ea[1]=P[1],ea[2]=P[2],ea[3]=P[3];if(n[0]!==pa[0]||n[1]!==pa[1]||n[2]!==pa[2]||n[3]!==pa[3])f.stencilOpSeparate(n[0],n[1],n[2],n[3]),pa[0]=n[0],pa[1]=n[1],pa[2]=n[2],pa[3]=n[3];if(M[0]!==fa[0]||M[1]!==fa[1]||M[2]!==fa[2]||M[3]!==fa[3])f.viewport(M[0],M[1],M[2],M[3]),fa[0]=M[0],fa[1]=M[1],fa[2]=M[2],fa[3]=M[3]},refresh:function(){var b,e,k,Ka,aa,zb,Xb,na,Qa,X,K,L,T,ma,N,Rb;
q.dirty=!1;e=c.blend_enable;k=c.cull_enable;Ka=c.depth_enable;aa=c.dither;zb=c.polygonOffset_enable;Xb=c.sample_alpha;na=c.sample_enable;Qa=c.scissor_enable;X=c.stencil_enable;K=c.cull_face;L=c.depth_func;T=c.depth_mask;ma=c.frontFace;N=c.lineWidth;Rb=c.stencil_mask;(b=I.next)?f.bindFramebuffer(36160,b.framebuffer):f.bindFramebuffer(36160,null);I.cur=b;b=y[0];b.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):
(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=null);b=y[1];b.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);b=y[2];b.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(2),
f.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);b=y[3];b.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);b=y[4];b.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(4,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,b.x,b.y,b.z,
b.w),b.buffer=null);b=y[5];b.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);b=y[6];b.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);b=y[7];b.buffer?
(f.enableVertexAttribArray(7),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);b=y[8];b.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);b=y[9];b.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,
b.buffer.buffer),f.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);b=y[10];b.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);b=y[11];b.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(11,
b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,b.x,b.y,b.z,b.w),b.buffer=null);b=y[12];b.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);b=y[13];b.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(13,b.size,b.type,b.normalized,
b.stride,b.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);b=y[14];b.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);b=y[15];b.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,b.buffer.buffer),f.vertexAttribPointer(15,b.size,b.type,b.normalized,b.stride,b.offset)):(f.disableVertexAttribArray(15),
f.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);x.currentVAO=null;x.setVAO(x.targetVAO);e?f.enable(3042):f.disable(3042);q.blend_enable=e;k?f.enable(2884):f.disable(2884);q.cull_enable=k;Ka?f.enable(2929):f.disable(2929);q.depth_enable=Ka;aa?f.enable(3024):f.disable(3024);q.dither=aa;zb?f.enable(32823):f.disable(32823);q.polygonOffset_enable=zb;Xb?f.enable(32926):f.disable(32926);q.sample_alpha=Xb;na?f.enable(32928):f.disable(32928);q.sample_enable=na;Qa?f.enable(3089):f.disable(3089);q.scissor_enable=
Qa;X?f.enable(2960):f.disable(2960);q.stencil_enable=X;f.blendColor(a[0],a[1],a[2],a[3]);w[0]=a[0];w[1]=a[1];w[2]=a[2];w[3]=a[3];f.blendEquationSeparate(la[0],la[1]);W[0]=la[0];W[1]=la[1];f.blendFuncSeparate(O[0],O[1],O[2],O[3]);F[0]=O[0];F[1]=O[1];F[2]=O[2];F[3]=O[3];f.colorMask(r[0],r[1],r[2],r[3]);D[0]=r[0];D[1]=r[1];D[2]=r[2];D[3]=r[3];f.cullFace(K);q.cull_face=K;f.depthFunc(L);q.depth_func=L;f.depthMask(T);q.depth_mask=T;f.depthRange(z[0],z[1]);B[0]=z[0];B[1]=z[1];f.frontFace(ma);q.frontFace=
ma;f.lineWidth(N);q.lineWidth=N;f.polygonOffset(H[0],H[1]);m[0]=H[0];m[1]=H[1];f.sampleCoverage(Q[0],Q[1]);C[0]=Q[0];C[1]=Q[1];f.scissor(h[0],h[1],h[2],h[3]);g[0]=h[0];g[1]=h[1];g[2]=h[2];g[3]=h[3];f.stencilFunc(d[0],d[1],d[2]);A[0]=d[0];A[1]=d[1];A[2]=d[2];f.stencilMask(Rb);q.stencil_mask=Rb;f.stencilOpSeparate(P[0],P[1],P[2],P[3]);ea[0]=P[0];ea[1]=P[1];ea[2]=P[2];ea[3]=P[3];f.stencilOpSeparate(n[0],n[1],n[2],n[3]);pa[0]=n[0];pa[1]=n[1];pa[2]=n[2];pa[3]=n[3];f.viewport(M[0],M[1],M[2],M[3]);fa[0]=
M[0];fa[1]=M[1];fa[2]=M[2];fa[3]=M[3]}}},$3:function(k,y,q,I){var f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,Ia,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,Ka,aa,zb;f=k.context;c=k.current;x=k.framebuffer;a=k.gl;w=k.next;C=k.shader;W=k.vao;O=w.blend_color;F=c.blend_color;r=w.blend_equation;D=c.blend_equation;z=w.blend_func;B=c.blend_func;H=w.colorMask;m=c.colorMask;Q=w.depth_range;Ia=c.depth_range;h=w.polygonOffset_offset;g=c.polygonOffset_offset;d=w.sample_coverage;A=c.sample_coverage;P=w.scissor_box;ea=c.scissor_box;n=w.stencil_func;
pa=c.stencil_func;M=w.stencil_opBack;fa=c.stencil_opBack;b=w.stencil_opFront;e=c.stencil_opFront;Z=w.viewport;Ka=c.viewport;aa={};zb={};return{batch:function(f,k){var q,X,K,L,T;q=x.next;q!==x.cur&&(q?a.bindFramebuffer(36160,q.framebuffer):a.bindFramebuffer(36160,null),x.cur=q);if(c.dirty){q=w.dither;q!==c.dither&&(q?a.enable(3024):a.disable(3024),c.dither=q);q=w.blend_enable;q!==c.blend_enable&&(q?a.enable(3042):a.disable(3042),c.blend_enable=q);q=O[0];K=O[1];L=O[2];T=O[3];if(q!==F[0]||K!==F[1]||
L!==F[2]||T!==F[3])a.blendColor(q,K,L,T),F[0]=q,F[1]=K,F[2]=L,F[3]=T;q=r[0];K=r[1];if(q!==D[0]||K!==D[1])a.blendEquationSeparate(q,K),D[0]=q,D[1]=K;q=z[0];K=z[1];L=z[2];T=z[3];if(q!==B[0]||K!==B[1]||L!==B[2]||T!==B[3])a.blendFuncSeparate(q,K,L,T),B[0]=q,B[1]=K,B[2]=L,B[3]=T;q=w.depth_enable;q!==c.depth_enable&&(q?a.enable(2929):a.disable(2929),c.depth_enable=q);q=w.depth_func;q!==c.depth_func&&(a.depthFunc(q),c.depth_func=q);q=Q[0];K=Q[1];if(q!==Ia[0]||K!==Ia[1])a.depthRange(q,K),Ia[0]=q,Ia[1]=K;
q=w.depth_mask;q!==c.depth_mask&&(a.depthMask(q),c.depth_mask=q);q=H[0];K=H[1];L=H[2];T=H[3];if(q!==m[0]||K!==m[1]||L!==m[2]||T!==m[3])a.colorMask(q,K,L,T),m[0]=q,m[1]=K,m[2]=L,m[3]=T;q=w.cull_enable;q!==c.cull_enable&&(q?a.enable(2884):a.disable(2884),c.cull_enable=q);q=w.cull_face;q!==c.cull_face&&(a.cullFace(q),c.cull_face=q);q=w.frontFace;q!==c.frontFace&&(a.frontFace(q),c.frontFace=q);q=w.lineWidth;q!==c.lineWidth&&(a.lineWidth(q),c.lineWidth=q);q=w.polygonOffset_enable;q!==c.polygonOffset_enable&&
(q?a.enable(32823):a.disable(32823),c.polygonOffset_enable=q);q=h[0];K=h[1];if(q!==g[0]||K!==g[1])a.polygonOffset(q,K),g[0]=q,g[1]=K;q=w.sample_alpha;q!==c.sample_alpha&&(q?a.enable(32926):a.disable(32926),c.sample_alpha=q);q=w.sample_enable;q!==c.sample_enable&&(q?a.enable(32928):a.disable(32928),c.sample_enable=q);q=d[0];K=d[1];if(q!==A[0]||K!==A[1])a.sampleCoverage(q,K),A[0]=q,A[1]=K;q=w.stencil_enable;q!==c.stencil_enable&&(q?a.enable(2960):a.disable(2960),c.stencil_enable=q);q=w.stencil_mask;
q!==c.stencil_mask&&(a.stencilMask(q),c.stencil_mask=q);q=n[0];K=n[1];L=n[2];if(q!==pa[0]||K!==pa[1]||L!==pa[2])a.stencilFunc(q,K,L),pa[0]=q,pa[1]=K,pa[2]=L;q=b[0];K=b[1];L=b[2];T=b[3];if(q!==e[0]||K!==e[1]||L!==e[2]||T!==e[3])a.stencilOpSeparate(q,K,L,T),e[0]=q,e[1]=K,e[2]=L,e[3]=T;q=M[0];K=M[1];L=M[2];T=M[3];if(q!==fa[0]||K!==fa[1]||L!==fa[2]||T!==fa[3])a.stencilOpSeparate(q,K,L,T),fa[0]=q,fa[1]=K,fa[2]=L,fa[3]=T;q=w.scissor_enable;q!==c.scissor_enable&&(q?a.enable(3089):a.disable(3089),c.scissor_enable=
q);q=P[0];K=P[1];L=P[2];T=P[3];if(q!==ea[0]||K!==ea[1]||L!==ea[2]||T!==ea[3])a.scissor(q,K,L,T),ea[0]=q,ea[1]=K,ea[2]=L,ea[3]=T;q=Z[0];K=Z[1];L=Z[2];T=Z[3];if(q!==Ka[0]||K!==Ka[1]||L!==Ka[2]||T!==Ka[3])a.viewport(q,K,L,T),Ka[0]=q,Ka[1]=K,Ka[2]=L,Ka[3]=T;c.dirty=!1}if(q=c.profile)X=performance.now(),y.count+=k;K=C.program(C.vert,C.frag);a.useProgram(K.program);W.setVAO(null);L=K.id;(T=zb[L])||(T=zb[L]=I(K));T.call(this,f,k);W.setVAO(null);q&&(y.cpuTime+=performance.now()-X)},draw:function(f){var k,
I,X,K,L;k=x.next;k!==x.cur&&(k?a.bindFramebuffer(36160,k.framebuffer):a.bindFramebuffer(36160,null),x.cur=k);if(c.dirty){k=w.dither;k!==c.dither&&(k?a.enable(3024):a.disable(3024),c.dither=k);k=w.blend_enable;k!==c.blend_enable&&(k?a.enable(3042):a.disable(3042),c.blend_enable=k);k=O[0];X=O[1];K=O[2];L=O[3];if(k!==F[0]||X!==F[1]||K!==F[2]||L!==F[3])a.blendColor(k,X,K,L),F[0]=k,F[1]=X,F[2]=K,F[3]=L;k=r[0];X=r[1];if(k!==D[0]||X!==D[1])a.blendEquationSeparate(k,X),D[0]=k,D[1]=X;k=z[0];X=z[1];K=z[2];
L=z[3];if(k!==B[0]||X!==B[1]||K!==B[2]||L!==B[3])a.blendFuncSeparate(k,X,K,L),B[0]=k,B[1]=X,B[2]=K,B[3]=L;k=w.depth_enable;k!==c.depth_enable&&(k?a.enable(2929):a.disable(2929),c.depth_enable=k);k=w.depth_func;k!==c.depth_func&&(a.depthFunc(k),c.depth_func=k);k=Q[0];X=Q[1];if(k!==Ia[0]||X!==Ia[1])a.depthRange(k,X),Ia[0]=k,Ia[1]=X;k=w.depth_mask;k!==c.depth_mask&&(a.depthMask(k),c.depth_mask=k);k=H[0];X=H[1];K=H[2];L=H[3];if(k!==m[0]||X!==m[1]||K!==m[2]||L!==m[3])a.colorMask(k,X,K,L),m[0]=k,m[1]=X,
m[2]=K,m[3]=L;k=w.cull_enable;k!==c.cull_enable&&(k?a.enable(2884):a.disable(2884),c.cull_enable=k);k=w.cull_face;k!==c.cull_face&&(a.cullFace(k),c.cull_face=k);k=w.frontFace;k!==c.frontFace&&(a.frontFace(k),c.frontFace=k);k=w.lineWidth;k!==c.lineWidth&&(a.lineWidth(k),c.lineWidth=k);k=w.polygonOffset_enable;k!==c.polygonOffset_enable&&(k?a.enable(32823):a.disable(32823),c.polygonOffset_enable=k);k=h[0];X=h[1];if(k!==g[0]||X!==g[1])a.polygonOffset(k,X),g[0]=k,g[1]=X;k=w.sample_alpha;k!==c.sample_alpha&&
(k?a.enable(32926):a.disable(32926),c.sample_alpha=k);k=w.sample_enable;k!==c.sample_enable&&(k?a.enable(32928):a.disable(32928),c.sample_enable=k);k=d[0];X=d[1];if(k!==A[0]||X!==A[1])a.sampleCoverage(k,X),A[0]=k,A[1]=X;k=w.stencil_enable;k!==c.stencil_enable&&(k?a.enable(2960):a.disable(2960),c.stencil_enable=k);k=w.stencil_mask;k!==c.stencil_mask&&(a.stencilMask(k),c.stencil_mask=k);k=n[0];X=n[1];K=n[2];if(k!==pa[0]||X!==pa[1]||K!==pa[2])a.stencilFunc(k,X,K),pa[0]=k,pa[1]=X,pa[2]=K;k=b[0];X=b[1];
K=b[2];L=b[3];if(k!==e[0]||X!==e[1]||K!==e[2]||L!==e[3])a.stencilOpSeparate(k,X,K,L),e[0]=k,e[1]=X,e[2]=K,e[3]=L;k=M[0];X=M[1];K=M[2];L=M[3];if(k!==fa[0]||X!==fa[1]||K!==fa[2]||L!==fa[3])a.stencilOpSeparate(k,X,K,L),fa[0]=k,fa[1]=X,fa[2]=K,fa[3]=L;k=w.scissor_enable;k!==c.scissor_enable&&(k?a.enable(3089):a.disable(3089),c.scissor_enable=k);k=P[0];X=P[1];K=P[2];L=P[3];if(k!==ea[0]||X!==ea[1]||K!==ea[2]||L!==ea[3])a.scissor(k,X,K,L),ea[0]=k,ea[1]=X,ea[2]=K,ea[3]=L;k=Z[0];X=Z[1];K=Z[2];L=Z[3];if(k!==
Ka[0]||X!==Ka[1]||K!==Ka[2]||L!==Ka[3])a.viewport(k,X,K,L),Ka[0]=k,Ka[1]=X,Ka[2]=K,Ka[3]=L;c.dirty=!1}if(k=c.profile)I=performance.now(),y.count++;X=C.program(C.vert,C.frag);a.useProgram(X.program);W.setVAO(null);K=X.id;(L=aa[K])||(L=aa[K]=q(X));L.call(this,f);W.setVAO(null);k&&(y.cpuTime+=performance.now()-I)},scope:function(b,a,d){var g,e;if(g=c.profile)e=performance.now(),y.count++;a(f,b,d);g&&(y.cpuTime+=performance.now()-e)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(k,
y,q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,Ia,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,Ka,aa,zb,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra,Yb,dc,qc,sd,vc,Y,J,ja,Ca,sb,Qc,Zc,E,v,ha,ta,V,ga,qa){var G,t,ba,R,wa,oa,l,lc,ia,p,Hb,xb,Ve,me,Ae,be,Id,se,Ic,fe,te,Jd,zd,Xd,Ld,Ze,yf,bf,xd,De,Rd,Sd,$d,Vd,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb;G=k.attributes;t=k.context;ba=k.current;R=k.draw;wa=k.elements;oa=k.framebuffer;l=k.gl;lc=k.next;ia=k.shader;
p=k.uniforms;Hb=k.vao;xb=lc.blend_color;Ve=ba.blend_color;me=lc.blend_equation;Ae=ba.blend_equation;be=lc.blend_func;Id=ba.blend_func;se=lc.colorMask;Ic=ba.colorMask;fe=lc.depth_range;te=ba.depth_range;Jd=lc.polygonOffset_offset;zd=ba.polygonOffset_offset;Xd=lc.sample_coverage;Ld=ba.sample_coverage;Ze=lc.scissor_box;yf=ba.scissor_box;bf=lc.stencil_func;xd=ba.stencil_func;De=lc.stencil_opBack;Rd=ba.stencil_opBack;Sd=lc.stencil_opFront;$d=ba.stencil_opFront;Vd=lc.viewport;pd=ba.viewport;ld={};ud={};
od=new Float32Array(16);gd=new Float32Array(16);zc=new Float32Array(16);qd=new Float32Array(16);Rc=new Float32Array(16);Lc=new Float32Array(16);rc=new Float32Array(16);fb=new Float32Array(16);kc=new Float32Array(16);Db=new Float32Array(16);pc=new Float32Array(16);Ta=new Float32Array(16);Jc=new Float32Array(16);bc=new Float32Array(16);$c=new Float32Array(16);Cd=new Float32Array(16);md=new Float32Array(16);Ac=new Float32Array(16);Zb=new Float32Array(16);Fc=new Float32Array(16);ad=new Float32Array(16);
La=new Float32Array(16);Eb=new Float32Array(16);Wa=new Float32Array(16);ua=new Float32Array(16);td=new Float32Array(16);Ab=new Float32Array(16);$a=new Float32Array(16);Gb=new Float32Array(16);bb=new Float32Array(16);wc=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(b,d){var g,e,h,k;g=oa.next;g!==oa.cur&&(g?l.bindFramebuffer(36160,g.framebuffer):l.bindFramebuffer(36160,null),oa.cur=g);if(ba.dirty){var p,n,q,y,A,M,ia,Q,P,ea,Z,fb,fa,sa,Ta,va,pa,Ia,Aa,xb,Ha,Db,aa,Sa,bc;p=se[0];n=se[1];
q=se[2];y=se[3];if(p!==Ic[0]||n!==Ic[1]||q!==Ic[2]||y!==Ic[3])l.colorMask(p,n,q,y),Ic[0]=p,Ic[1]=n,Ic[2]=q,Ic[3]=y;A=lc.frontFace;A!==ba.frontFace&&(l.frontFace(A),ba.frontFace=A);M=lc.polygonOffset_enable;M!==ba.polygonOffset_enable&&(M?l.enable(32823):l.disable(32823),ba.polygonOffset_enable=M);ia=Jd[0];Q=Jd[1];if(ia!==zd[0]||Q!==zd[1])l.polygonOffset(ia,Q),zd[0]=ia,zd[1]=Q;P=lc.sample_alpha;P!==ba.sample_alpha&&(P?l.enable(32926):l.disable(32926),ba.sample_alpha=P);ea=lc.sample_enable;ea!==ba.sample_enable&&
(ea?l.enable(32928):l.disable(32928),ba.sample_enable=ea);Z=Xd[0];fb=Xd[1];if(Z!==Ld[0]||fb!==Ld[1])l.sampleCoverage(Z,fb),Ld[0]=Z,Ld[1]=fb;fa=lc.stencil_enable;fa!==ba.stencil_enable&&(fa?l.enable(2960):l.disable(2960),ba.stencil_enable=fa);sa=lc.stencil_mask;sa!==ba.stencil_mask&&(l.stencilMask(sa),ba.stencil_mask=sa);Ta=bf[0];va=bf[1];pa=bf[2];if(Ta!==xd[0]||va!==xd[1]||pa!==xd[2])l.stencilFunc(Ta,va,pa),xd[0]=Ta,xd[1]=va,xd[2]=pa;Ia=Sd[0];Aa=Sd[1];xb=Sd[2];Ha=Sd[3];if(Ia!==$d[0]||Aa!==$d[1]||
xb!==$d[2]||Ha!==$d[3])l.stencilOpSeparate(Ia,Aa,xb,Ha),$d[0]=Ia,$d[1]=Aa,$d[2]=xb,$d[3]=Ha;Db=De[0];aa=De[1];Sa=De[2];bc=De[3];if(Db!==Rd[0]||aa!==Rd[1]||Sa!==Rd[2]||bc!==Rd[3])l.stencilOpSeparate(Db,aa,Sa,bc),Rd[0]=Db,Rd[1]=aa,Rd[2]=Sa,Rd[3]=bc}l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);ba.blend_enable=!1;l.blendEquationSeparate(32774,32774);Ae[0]=32774;Ae[1]=32774;l.blendFuncSeparate(770,771,1,1);Id[0]=770;Id[1]=771;Id[2]=1;Id[3]=1;l.enable(2884);ba.cull_enable=!0;l.cullFace(1029);
ba.cull_face=1029;l.enable(2929);ba.depth_enable=!0;l.depthFunc(513);ba.depth_func=513;l.depthMask(!0);ba.depth_mask=!0;l.depthRange(0,1);te[0]=0;te[1]=1;l.disable(3024);ba.dither=!1;l.lineWidth(2);ba.lineWidth=2;l.enable(3089);ba.scissor_enable=!0;e=ba.profile;ba.profile=!1;l.useProgram(Xb.program);var Lc,Rc,Ka,xa,rc,Ja,Ze,eb,hb,ya,zc,Da,ob,pb,Xa,Ya,Jc,kc,$c,Va,Mb,gd,Ea,pc,Pa,Ba,kb,ub,Cb,qb,od,vb,qd;Hb.setVAO(null);Lc=Yb.location;Rc=G[Lc];Rc.buffer||l.enableVertexAttribArray(Lc);if(Rc.type!==I.dtype||
4!==Rc.size||Rc.buffer!==I||!1!==Rc.normalized||0!==Rc.offset||0!==Rc.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(Lc,4,I.dtype,!1,0,0),Rc.type=I.dtype,Rc.size=4,Rc.buffer=I,Rc.normalized=!1,Rc.offset=0,Rc.stride=0;Ka=dc.location;xa=G[Ka];xa.buffer||l.enableVertexAttribArray(Ka);if(xa.type!==f.dtype||4!==xa.size||xa.buffer!==f||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)l.bindBuffer(34962,f.buffer),l.vertexAttribPointer(Ka,4,f.dtype,!1,0,0),xa.type=f.dtype,xa.size=4,xa.buffer=f,
xa.normalized=!1,xa.offset=0,xa.stride=0;rc=qc.location;Ja=G[rc];Ja.buffer||l.enableVertexAttribArray(rc);if(Ja.type!==c.dtype||4!==Ja.size||Ja.buffer!==c||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(rc,4,c.dtype,!1,0,0),Ja.type=c.dtype,Ja.size=4,Ja.buffer=c,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;Ze=sd.location;eb=G[Ze];eb.buffer||l.enableVertexAttribArray(Ze);if(eb.type!==x.dtype||4!==eb.size||eb.buffer!==x||!1!==eb.normalized||0!==eb.offset||
0!==eb.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(Ze,4,x.dtype,!1,0,0),eb.type=x.dtype,eb.size=4,eb.buffer=x,eb.normalized=!1,eb.offset=0,eb.stride=0;hb=vc.location;ya=G[hb];ya.buffer||l.enableVertexAttribArray(hb);if(ya.type!==a.dtype||4!==ya.size||ya.buffer!==a||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(hb,4,a.dtype,!1,0,0),ya.type=a.dtype,ya.size=4,ya.buffer=a,ya.normalized=!1,ya.offset=0,ya.stride=0;zc=Y.location;Da=G[zc];
Da.buffer||l.enableVertexAttribArray(zc);if(Da.type!==w.dtype||4!==Da.size||Da.buffer!==w||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(zc,4,w.dtype,!1,0,0),Da.type=w.dtype,Da.size=4,Da.buffer=w,Da.normalized=!1,Da.offset=0,Da.stride=0;ob=J.location;pb=G[ob];pb.buffer||l.enableVertexAttribArray(ob);if(pb.type!==C.dtype||4!==pb.size||pb.buffer!==C||!1!==pb.normalized||0!==pb.offset||0!==pb.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(ob,
4,C.dtype,!1,0,0),pb.type=C.dtype,pb.size=4,pb.buffer=C,pb.normalized=!1,pb.offset=0,pb.stride=0;Xa=ja.location;Ya=G[Xa];Ya.buffer||l.enableVertexAttribArray(Xa);if(Ya.type!==W.dtype||4!==Ya.size||Ya.buffer!==W||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)l.bindBuffer(34962,W.buffer),l.vertexAttribPointer(Xa,4,W.dtype,!1,0,0),Ya.type=W.dtype,Ya.size=4,Ya.buffer=W,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Jc=Ca.location;kc=G[Jc];kc.buffer||l.enableVertexAttribArray(Jc);if(kc.type!==O.dtype||4!==
kc.size||kc.buffer!==O||!1!==kc.normalized||0!==kc.offset||0!==kc.stride)l.bindBuffer(34962,O.buffer),l.vertexAttribPointer(Jc,4,O.dtype,!1,0,0),kc.type=O.dtype,kc.size=4,kc.buffer=O,kc.normalized=!1,kc.offset=0,kc.stride=0;$c=sb.location;Va=G[$c];Va.buffer||l.enableVertexAttribArray($c);if(Va.type!==F.dtype||4!==Va.size||Va.buffer!==F||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer($c,4,F.dtype,!1,0,0),Va.type=F.dtype,Va.size=4,Va.buffer=F,Va.normalized=
!1,Va.offset=0,Va.stride=0;Mb=Qc.location;gd=G[Mb];gd.buffer||l.enableVertexAttribArray(Mb);if(gd.type!==r.dtype||4!==gd.size||gd.buffer!==r||!1!==gd.normalized||0!==gd.offset||0!==gd.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(Mb,4,r.dtype,!1,0,0),gd.type=r.dtype,gd.size=4,gd.buffer=r,gd.normalized=!1,gd.offset=0,gd.stride=0;Ea=Zc.location;pc=G[Ea];pc.buffer||l.enableVertexAttribArray(Ea);if(pc.type!==D.dtype||4!==pc.size||pc.buffer!==D||!1!==pc.normalized||0!==pc.offset||0!==pc.stride)l.bindBuffer(34962,
D.buffer),l.vertexAttribPointer(Ea,4,D.dtype,!1,0,0),pc.type=D.dtype,pc.size=4,pc.buffer=D,pc.normalized=!1,pc.offset=0,pc.stride=0;Pa=E.location;Ba=G[Pa];Ba.buffer||l.enableVertexAttribArray(Pa);if(Ba.type!==z.dtype||4!==Ba.size||Ba.buffer!==z||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(Pa,4,z.dtype,!1,0,0),Ba.type=z.dtype,Ba.size=4,Ba.buffer=z,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;kb=v.location;ub=G[kb];ub.buffer||l.enableVertexAttribArray(kb);
if(ub.type!==B.dtype||4!==ub.size||ub.buffer!==B||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(kb,4,B.dtype,!1,0,0),ub.type=B.dtype,ub.size=4,ub.buffer=B,ub.normalized=!1,ub.offset=0,ub.stride=0;Cb=ha.location;qb=G[Cb];qb.buffer||l.enableVertexAttribArray(Cb);if(qb.type!==H.dtype||4!==qb.size||qb.buffer!==H||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(Cb,4,H.dtype,!1,0,0),qb.type=H.dtype,
qb.size=4,qb.buffer=H,qb.normalized=!1,qb.offset=0,qb.stride=0;od=Qa.location;vb=G[od];vb.buffer||l.enableVertexAttribArray(od);if(vb.type!==m.dtype||4!==vb.size||vb.buffer!==m||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)l.bindBuffer(34962,m.buffer),l.vertexAttribPointer(od,4,m.dtype,!1,0,0),vb.type=m.dtype,vb.size=4,vb.buffer=m,vb.normalized=!1,vb.offset=0,vb.stride=0;l.uniform1i(ta.location,na.bind());(qd=R.elements)?l.bindBuffer(34963,qd.buffer.buffer):Hb.currentVAO&&(qd=wa.getElements(Hb.currentVAO.elements))&&
l.bindBuffer(34963,qd.buffer.buffer);for(h=0;h<d;++h){k=b[h];var be,fe,Vd,Cd,me,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,zb,he,Yc,Jf,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Ra,ne,Ke,ee,de,ae,pe,Yd;ld.height=k.viewportHeight;ld.width=k.viewportWidth;ld.x=k.viewportX;ld.y=k.viewportY;be=ld.x|0;fe=ld.y|0;Vd="width"in ld?ld.width|0:t.framebufferWidth-be;Cd="height"in ld?ld.height|0:t.framebufferHeight-fe;me=t.viewportWidth;t.viewportWidth=Vd;Wb=t.viewportHeight;
t.viewportHeight=Cd;l.viewport(be,fe,Vd,Cd);pd[0]=be;pd[1]=fe;pd[2]=Vd;pd[3]=Cd;ud.height=k.scissorHeight;ud.width=k.scissorWidth;ud.x=k.scissorX;ud.y=k.scissorY;cc=ud.x|0;Pb=ud.y|0;Fa="width"in ud?ud.width|0:t.framebufferWidth-cc;$b="height"in ud?ud.height|0:t.framebufferHeight-Pb;l.scissor(cc,Pb,Fa,$b);yf[0]=cc;yf[1]=Pb;yf[2]=Fa;yf[3]=$b;lb=k.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(lb)||lb instanceof Float32Array?lb:(md[0]=lb[0],md[1]=lb[1],md[2]=lb[2],md[3]=lb[3],md[4]=lb[4],md[5]=
lb[5],md[6]=lb[6],md[7]=lb[7],md[8]=lb[8],md[9]=lb[9],md[10]=lb[10],md[11]=lb[11],md[12]=lb[12],md[13]=lb[13],md[14]=lb[14],md[15]=lb[15],md));wb=k.dim1A;l.uniformMatrix4fv(N.location,!1,Array.isArray(wb)||wb instanceof Float32Array?wb:(Ac[0]=wb[0],Ac[1]=wb[1],Ac[2]=wb[2],Ac[3]=wb[3],Ac[4]=wb[4],Ac[5]=wb[5],Ac[6]=wb[6],Ac[7]=wb[7],Ac[8]=wb[8],Ac[9]=wb[9],Ac[10]=wb[10],Ac[11]=wb[11],Ac[12]=wb[12],Ac[13]=wb[13],Ac[14]=wb[14],Ac[15]=wb[15],Ac));Nb=k.dim0B;l.uniformMatrix4fv(L.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(Zb[0]=Nb[0],Zb[1]=Nb[1],Zb[2]=Nb[2],Zb[3]=Nb[3],Zb[4]=Nb[4],Zb[5]=Nb[5],Zb[6]=Nb[6],Zb[7]=Nb[7],Zb[8]=Nb[8],Zb[9]=Nb[9],Zb[10]=Nb[10],Zb[11]=Nb[11],Zb[12]=Nb[12],Zb[13]=Nb[13],Zb[14]=Nb[14],Zb[15]=Nb[15],Zb));Qb=k.dim1B;l.uniformMatrix4fv(Rb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Fc[0]=Qb[0],Fc[1]=Qb[1],Fc[2]=Qb[2],Fc[3]=Qb[3],Fc[4]=Qb[4],Fc[5]=Qb[5],Fc[6]=Qb[6],Fc[7]=Qb[7],Fc[8]=Qb[8],Fc[9]=Qb[9],Fc[10]=Qb[10],Fc[11]=Qb[11],Fc[12]=Qb[12],Fc[13]=
Qb[13],Fc[14]=Qb[14],Fc[15]=Qb[15],Fc));hc=k.dim0C;l.uniformMatrix4fv(T.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(ad[0]=hc[0],ad[1]=hc[1],ad[2]=hc[2],ad[3]=hc[3],ad[4]=hc[4],ad[5]=hc[5],ad[6]=hc[6],ad[7]=hc[7],ad[8]=hc[8],ad[9]=hc[9],ad[10]=hc[10],ad[11]=hc[11],ad[12]=hc[12],ad[13]=hc[13],ad[14]=hc[14],ad[15]=hc[15],ad));jc=k.dim1C;l.uniformMatrix4fv(Za.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(La[0]=jc[0],La[1]=jc[1],La[2]=jc[2],La[3]=jc[3],La[4]=jc[4],La[5]=
jc[5],La[6]=jc[6],La[7]=jc[7],La[8]=jc[8],La[9]=jc[9],La[10]=jc[10],La[11]=jc[11],La[12]=jc[12],La[13]=jc[13],La[14]=jc[14],La[15]=jc[15],La));Sc=k.dim0D;l.uniformMatrix4fv(ma.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(Eb[0]=Sc[0],Eb[1]=Sc[1],Eb[2]=Sc[2],Eb[3]=Sc[3],Eb[4]=Sc[4],Eb[5]=Sc[5],Eb[6]=Sc[6],Eb[7]=Sc[7],Eb[8]=Sc[8],Eb[9]=Sc[9],Eb[10]=Sc[10],Eb[11]=Sc[11],Eb[12]=Sc[12],Eb[13]=Sc[13],Eb[14]=Sc[14],Eb[15]=Sc[15],Eb));Bc=k.dim1D;l.uniformMatrix4fv(S.location,!1,Array.isArray(Bc)||
Bc instanceof Float32Array?Bc:(Wa[0]=Bc[0],Wa[1]=Bc[1],Wa[2]=Bc[2],Wa[3]=Bc[3],Wa[4]=Bc[4],Wa[5]=Bc[5],Wa[6]=Bc[6],Wa[7]=Bc[7],Wa[8]=Bc[8],Wa[9]=Bc[9],Wa[10]=Bc[10],Wa[11]=Bc[11],Wa[12]=Bc[12],Wa[13]=Bc[13],Wa[14]=Bc[14],Wa[15]=Bc[15],Wa));Cc=k.loA;l.uniformMatrix4fv(fc.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(ua[0]=Cc[0],ua[1]=Cc[1],ua[2]=Cc[2],ua[3]=Cc[3],ua[4]=Cc[4],ua[5]=Cc[5],ua[6]=Cc[6],ua[7]=Cc[7],ua[8]=Cc[8],ua[9]=Cc[9],ua[10]=Cc[10],ua[11]=Cc[11],ua[12]=Cc[12],ua[13]=
Cc[13],ua[14]=Cc[14],ua[15]=Cc[15],ua));Dc=k.hiA;l.uniformMatrix4fv(ka.location,!1,Array.isArray(Dc)||Dc instanceof Float32Array?Dc:(td[0]=Dc[0],td[1]=Dc[1],td[2]=Dc[2],td[3]=Dc[3],td[4]=Dc[4],td[5]=Dc[5],td[6]=Dc[6],td[7]=Dc[7],td[8]=Dc[8],td[9]=Dc[9],td[10]=Dc[10],td[11]=Dc[11],td[12]=Dc[12],td[13]=Dc[13],td[14]=Dc[14],td[15]=Dc[15],td));Nc=k.loB;l.uniformMatrix4fv(Ga.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(Ab[0]=Nc[0],Ab[1]=Nc[1],Ab[2]=Nc[2],Ab[3]=Nc[3],Ab[4]=Nc[4],Ab[5]=
Nc[5],Ab[6]=Nc[6],Ab[7]=Nc[7],Ab[8]=Nc[8],Ab[9]=Nc[9],Ab[10]=Nc[10],Ab[11]=Nc[11],Ab[12]=Nc[12],Ab[13]=Nc[13],Ab[14]=Nc[14],Ab[15]=Nc[15],Ab));cd=k.hiB;l.uniformMatrix4fv(ca.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:($a[0]=cd[0],$a[1]=cd[1],$a[2]=cd[2],$a[3]=cd[3],$a[4]=cd[4],$a[5]=cd[5],$a[6]=cd[6],$a[7]=cd[7],$a[8]=cd[8],$a[9]=cd[9],$a[10]=cd[10],$a[11]=cd[11],$a[12]=cd[12],$a[13]=cd[13],$a[14]=cd[14],$a[15]=cd[15],$a));Tc=k.loC;l.uniformMatrix4fv(U.location,!1,Array.isArray(Tc)||
Tc instanceof Float32Array?Tc:(Gb[0]=Tc[0],Gb[1]=Tc[1],Gb[2]=Tc[2],Gb[3]=Tc[3],Gb[4]=Tc[4],Gb[5]=Tc[5],Gb[6]=Tc[6],Gb[7]=Tc[7],Gb[8]=Tc[8],Gb[9]=Tc[9],Gb[10]=Tc[10],Gb[11]=Tc[11],Gb[12]=Tc[12],Gb[13]=Tc[13],Gb[14]=Tc[14],Gb[15]=Tc[15],Gb));Oc=k.hiC;l.uniformMatrix4fv(za.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(bb[0]=Oc[0],bb[1]=Oc[1],bb[2]=Oc[2],bb[3]=Oc[3],bb[4]=Oc[4],bb[5]=Oc[5],bb[6]=Oc[6],bb[7]=Oc[7],bb[8]=Oc[8],bb[9]=Oc[9],bb[10]=Oc[10],bb[11]=Oc[11],bb[12]=Oc[12],bb[13]=
Oc[13],bb[14]=Oc[14],bb[15]=Oc[15],bb));Kb=k.loD;l.uniformMatrix4fv(rb.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(wc[0]=Kb[0],wc[1]=Kb[1],wc[2]=Kb[2],wc[3]=Kb[3],wc[4]=Kb[4],wc[5]=Kb[5],wc[6]=Kb[6],wc[7]=Kb[7],wc[8]=Kb[8],wc[9]=Kb[9],wc[10]=Kb[10],wc[11]=Kb[11],wc[12]=Kb[12],wc[13]=Kb[13],wc[14]=Kb[14],wc[15]=Kb[15],wc));Fb=k.hiD;l.uniformMatrix4fv(Na.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Sb[0]=Fb[0],Sb[1]=Fb[1],Sb[2]=Fb[2],Sb[3]=Fb[3],Sb[4]=Fb[4],Sb[5]=
Fb[5],Sb[6]=Fb[6],Sb[7]=Fb[7],Sb[8]=Fb[8],Sb[9]=Fb[9],Sb[10]=Fb[10],Sb[11]=Fb[11],Sb[12]=Fb[12],Sb[13]=Fb[13],Sb[14]=Fb[14],Sb[15]=Fb[15],Sb));Pc=k.resolution;Hc=Pc[0];ic=Pc[1];h&&Uc===Hc&&Xc===ic||(Uc=Hc,Xc=ic,l.uniform2f(V.location,Hc,ic));fd=k.viewBoxPos;zb=fd[0];Yc=fd[1];h&&he===zb&&Jf===Yc||(he=zb,Jf=Yc,l.uniform2f(ga.location,zb,Yc));ke=k.viewBoxSize;ve=ke[0];Td=ke[1];h&&ue===ve&&Fd===Td||(ue=ve,Fd=Td,l.uniform2f(qa.location,ve,Td));Dd=k.maskHeight;h&&hd===Dd||(hd=Dd,l.uniform1f(da.location,
Dd));Ec=k.drwLayer;h&&nd===Ec||(nd=Ec,l.uniform1f(u.location,Ec));jd=k.contextColor;dd=jd[0];Ad=jd[1];Ra=jd[2];Ke=jd[3];h&&kd===dd&&Bd===Ad&&ne===Ra&&ee===Ke||(kd=dd,Bd=Ad,ne=Ra,ee=Ke,l.uniform4f(X.location,dd,Ad,Ra,Ke));(de=k.maskTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);ae=de._texture;l.uniform1i(ra.location,ae.bind());pe=k.offset;if(Yd=k.count)qd?l.drawElements(1,Yd,qd.type,pe<<(qd.type-5121>>1)):l.drawArrays(1,pe,Yd),t.viewportWidth=me,t.viewportHeight=Wb,ae.unbind()}na.unbind();
ba.dirty=!0;Hb.setVAO(null);ba.profile=e},draw:function(b){var d,g,e,h,k,p;d=oa.next;d!==oa.cur&&(d?l.bindFramebuffer(36160,d.framebuffer):l.bindFramebuffer(36160,null),oa.cur=d);if(ba.dirty){d=se[0];p=se[1];g=se[2];e=se[3];if(d!==Ic[0]||p!==Ic[1]||g!==Ic[2]||e!==Ic[3])l.colorMask(d,p,g,e),Ic[0]=d,Ic[1]=p,Ic[2]=g,Ic[3]=e;d=lc.frontFace;d!==ba.frontFace&&(l.frontFace(d),ba.frontFace=d);d=lc.polygonOffset_enable;d!==ba.polygonOffset_enable&&(d?l.enable(32823):l.disable(32823),ba.polygonOffset_enable=
d);d=Jd[0];p=Jd[1];if(d!==zd[0]||p!==zd[1])l.polygonOffset(d,p),zd[0]=d,zd[1]=p;d=lc.sample_alpha;d!==ba.sample_alpha&&(d?l.enable(32926):l.disable(32926),ba.sample_alpha=d);d=lc.sample_enable;d!==ba.sample_enable&&(d?l.enable(32928):l.disable(32928),ba.sample_enable=d);d=Xd[0];p=Xd[1];if(d!==Ld[0]||p!==Ld[1])l.sampleCoverage(d,p),Ld[0]=d,Ld[1]=p;d=lc.stencil_enable;d!==ba.stencil_enable&&(d?l.enable(2960):l.disable(2960),ba.stencil_enable=d);d=lc.stencil_mask;d!==ba.stencil_mask&&(l.stencilMask(d),
ba.stencil_mask=d);d=bf[0];p=bf[1];g=bf[2];if(d!==xd[0]||p!==xd[1]||g!==xd[2])l.stencilFunc(d,p,g),xd[0]=d,xd[1]=p,xd[2]=g;d=Sd[0];p=Sd[1];g=Sd[2];e=Sd[3];if(d!==$d[0]||p!==$d[1]||g!==$d[2]||e!==$d[3])l.stencilOpSeparate(d,p,g,e),$d[0]=d,$d[1]=p,$d[2]=g,$d[3]=e;d=De[0];p=De[1];g=De[2];e=De[3];if(d!==Rd[0]||p!==Rd[1]||g!==Rd[2]||e!==Rd[3])l.stencilOpSeparate(d,p,g,e),Rd[0]=d,Rd[1]=p,Rd[2]=g,Rd[3]=e}ld.height=b.viewportHeight;ld.width=b.viewportWidth;ld.x=b.viewportX;ld.y=b.viewportY;g=ld.x|0;e=ld.y|
0;h="width"in ld?ld.width|0:t.framebufferWidth-g;k="height"in ld?ld.height|0:t.framebufferHeight-e;d=t.viewportWidth;t.viewportWidth=h;p=t.viewportHeight;t.viewportHeight=k;l.viewport(g,e,h,k);pd[0]=g;pd[1]=e;pd[2]=h;pd[3]=k;l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);ba.blend_enable=!1;l.blendEquationSeparate(32774,32774);Ae[0]=32774;Ae[1]=32774;l.blendFuncSeparate(770,771,1,1);Id[0]=770;Id[1]=771;Id[2]=1;Id[3]=1;l.enable(2884);ba.cull_enable=!0;l.cullFace(1029);ba.cull_face=
1029;l.enable(2929);ba.depth_enable=!0;l.depthFunc(513);ba.depth_func=513;l.depthMask(!0);ba.depth_mask=!0;l.depthRange(0,1);te[0]=0;te[1]=1;l.disable(3024);ba.dither=!1;l.lineWidth(2);ba.lineWidth=2;ud.height=b.scissorHeight;ud.width=b.scissorWidth;ud.x=b.scissorX;ud.y=b.scissorY;g=ud.x|0;e=ud.y|0;h="width"in ud?ud.width|0:t.framebufferWidth-g;k="height"in ud?ud.height|0:t.framebufferHeight-e;l.scissor(g,e,h,k);yf[0]=g;yf[1]=e;yf[2]=h;yf[3]=k;l.enable(3089);ba.scissor_enable=!0;g=ba.profile;ba.profile=
!1;l.useProgram(q.program);Hb.setVAO(null);e=Yb.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==I.dtype||4!==h.size||h.buffer!==I||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(e,4,I.dtype,!1,0,0),h.type=I.dtype,h.size=4,h.buffer=I,h.normalized=!1,h.offset=0,h.stride=0;e=dc.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==f.dtype||4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,
f.buffer),l.vertexAttribPointer(e,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;e=qc.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==c.dtype||4!==h.size||h.buffer!==c||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(e,4,c.dtype,!1,0,0),h.type=c.dtype,h.size=4,h.buffer=c,h.normalized=!1,h.offset=0,h.stride=0;e=sd.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==x.dtype||
4!==h.size||h.buffer!==x||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(e,4,x.dtype,!1,0,0),h.type=x.dtype,h.size=4,h.buffer=x,h.normalized=!1,h.offset=0,h.stride=0;e=vc.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==a.dtype||4!==h.size||h.buffer!==a||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(e,4,a.dtype,!1,0,0),h.type=a.dtype,h.size=4,h.buffer=a,h.normalized=!1,h.offset=0,
h.stride=0;e=Y.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==w.dtype||4!==h.size||h.buffer!==w||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(e,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;e=J.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==C.dtype||4!==h.size||h.buffer!==C||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(e,
4,C.dtype,!1,0,0),h.type=C.dtype,h.size=4,h.buffer=C,h.normalized=!1,h.offset=0,h.stride=0;e=ja.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==W.dtype||4!==h.size||h.buffer!==W||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,W.buffer),l.vertexAttribPointer(e,4,W.dtype,!1,0,0),h.type=W.dtype,h.size=4,h.buffer=W,h.normalized=!1,h.offset=0,h.stride=0;e=Ca.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==O.dtype||4!==h.size||h.buffer!==O||!1!==h.normalized||
0!==h.offset||0!==h.stride)l.bindBuffer(34962,O.buffer),l.vertexAttribPointer(e,4,O.dtype,!1,0,0),h.type=O.dtype,h.size=4,h.buffer=O,h.normalized=!1,h.offset=0,h.stride=0;e=sb.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==F.dtype||4!==h.size||h.buffer!==F||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer(e,4,F.dtype,!1,0,0),h.type=F.dtype,h.size=4,h.buffer=F,h.normalized=!1,h.offset=0,h.stride=0;e=Qc.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);
if(h.type!==r.dtype||4!==h.size||h.buffer!==r||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(e,4,r.dtype,!1,0,0),h.type=r.dtype,h.size=4,h.buffer=r,h.normalized=!1,h.offset=0,h.stride=0;e=Zc.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==D.dtype||4!==h.size||h.buffer!==D||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,D.buffer),l.vertexAttribPointer(e,4,D.dtype,!1,0,0),h.type=D.dtype,h.size=4,h.buffer=D,h.normalized=
!1,h.offset=0,h.stride=0;e=E.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==z.dtype||4!==h.size||h.buffer!==z||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(e,4,z.dtype,!1,0,0),h.type=z.dtype,h.size=4,h.buffer=z,h.normalized=!1,h.offset=0,h.stride=0;e=v.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==B.dtype||4!==h.size||h.buffer!==B||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,B.buffer),
l.vertexAttribPointer(e,4,B.dtype,!1,0,0),h.type=B.dtype,h.size=4,h.buffer=B,h.normalized=!1,h.offset=0,h.stride=0;e=ha.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==H.dtype||4!==h.size||h.buffer!==H||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(e,4,H.dtype,!1,0,0),h.type=H.dtype,h.size=4,h.buffer=H,h.normalized=!1,h.offset=0,h.stride=0;e=Qa.location;h=G[e];h.buffer||l.enableVertexAttribArray(e);if(h.type!==m.dtype||4!==h.size||
h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,m.buffer),l.vertexAttribPointer(e,4,m.dtype,!1,0,0),h.type=m.dtype,h.size=4,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;e=b.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(od[0]=e[0],od[1]=e[1],od[2]=e[2],od[3]=e[3],od[4]=e[4],od[5]=e[5],od[6]=e[6],od[7]=e[7],od[8]=e[8],od[9]=e[9],od[10]=e[10],od[11]=e[11],od[12]=e[12],od[13]=e[13],od[14]=e[14],od[15]=e[15],od));e=b.dim1A;l.uniformMatrix4fv(N.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(gd[0]=e[0],gd[1]=e[1],gd[2]=e[2],gd[3]=e[3],gd[4]=e[4],gd[5]=e[5],gd[6]=e[6],gd[7]=e[7],gd[8]=e[8],gd[9]=e[9],gd[10]=e[10],gd[11]=e[11],gd[12]=e[12],gd[13]=e[13],gd[14]=e[14],gd[15]=e[15],gd));e=b.dim0B;l.uniformMatrix4fv(L.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(zc[0]=e[0],zc[1]=e[1],zc[2]=e[2],zc[3]=e[3],zc[4]=e[4],zc[5]=e[5],zc[6]=e[6],zc[7]=e[7],zc[8]=e[8],zc[9]=e[9],zc[10]=e[10],zc[11]=e[11],zc[12]=e[12],zc[13]=e[13],zc[14]=
e[14],zc[15]=e[15],zc));e=b.dim1B;l.uniformMatrix4fv(Rb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(qd[0]=e[0],qd[1]=e[1],qd[2]=e[2],qd[3]=e[3],qd[4]=e[4],qd[5]=e[5],qd[6]=e[6],qd[7]=e[7],qd[8]=e[8],qd[9]=e[9],qd[10]=e[10],qd[11]=e[11],qd[12]=e[12],qd[13]=e[13],qd[14]=e[14],qd[15]=e[15],qd));e=b.dim0C;l.uniformMatrix4fv(T.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Rc[0]=e[0],Rc[1]=e[1],Rc[2]=e[2],Rc[3]=e[3],Rc[4]=e[4],Rc[5]=e[5],Rc[6]=e[6],Rc[7]=e[7],Rc[8]=e[8],Rc[9]=
e[9],Rc[10]=e[10],Rc[11]=e[11],Rc[12]=e[12],Rc[13]=e[13],Rc[14]=e[14],Rc[15]=e[15],Rc));e=b.dim1C;l.uniformMatrix4fv(Za.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Lc[0]=e[0],Lc[1]=e[1],Lc[2]=e[2],Lc[3]=e[3],Lc[4]=e[4],Lc[5]=e[5],Lc[6]=e[6],Lc[7]=e[7],Lc[8]=e[8],Lc[9]=e[9],Lc[10]=e[10],Lc[11]=e[11],Lc[12]=e[12],Lc[13]=e[13],Lc[14]=e[14],Lc[15]=e[15],Lc));e=b.dim0D;l.uniformMatrix4fv(ma.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(rc[0]=e[0],rc[1]=e[1],rc[2]=e[2],rc[3]=
e[3],rc[4]=e[4],rc[5]=e[5],rc[6]=e[6],rc[7]=e[7],rc[8]=e[8],rc[9]=e[9],rc[10]=e[10],rc[11]=e[11],rc[12]=e[12],rc[13]=e[13],rc[14]=e[14],rc[15]=e[15],rc));e=b.dim1D;l.uniformMatrix4fv(S.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(fb[0]=e[0],fb[1]=e[1],fb[2]=e[2],fb[3]=e[3],fb[4]=e[4],fb[5]=e[5],fb[6]=e[6],fb[7]=e[7],fb[8]=e[8],fb[9]=e[9],fb[10]=e[10],fb[11]=e[11],fb[12]=e[12],fb[13]=e[13],fb[14]=e[14],fb[15]=e[15],fb));e=b.loA;l.uniformMatrix4fv(fc.location,!1,Array.isArray(e)||e instanceof
Float32Array?e:(kc[0]=e[0],kc[1]=e[1],kc[2]=e[2],kc[3]=e[3],kc[4]=e[4],kc[5]=e[5],kc[6]=e[6],kc[7]=e[7],kc[8]=e[8],kc[9]=e[9],kc[10]=e[10],kc[11]=e[11],kc[12]=e[12],kc[13]=e[13],kc[14]=e[14],kc[15]=e[15],kc));e=b.hiA;l.uniformMatrix4fv(ka.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Db[0]=e[0],Db[1]=e[1],Db[2]=e[2],Db[3]=e[3],Db[4]=e[4],Db[5]=e[5],Db[6]=e[6],Db[7]=e[7],Db[8]=e[8],Db[9]=e[9],Db[10]=e[10],Db[11]=e[11],Db[12]=e[12],Db[13]=e[13],Db[14]=e[14],Db[15]=e[15],Db));e=b.loB;l.uniformMatrix4fv(Ga.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(pc[0]=e[0],pc[1]=e[1],pc[2]=e[2],pc[3]=e[3],pc[4]=e[4],pc[5]=e[5],pc[6]=e[6],pc[7]=e[7],pc[8]=e[8],pc[9]=e[9],pc[10]=e[10],pc[11]=e[11],pc[12]=e[12],pc[13]=e[13],pc[14]=e[14],pc[15]=e[15],pc));e=b.hiB;l.uniformMatrix4fv(ca.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ta[0]=e[0],Ta[1]=e[1],Ta[2]=e[2],Ta[3]=e[3],Ta[4]=e[4],Ta[5]=e[5],Ta[6]=e[6],Ta[7]=e[7],Ta[8]=e[8],Ta[9]=e[9],Ta[10]=e[10],Ta[11]=e[11],Ta[12]=e[12],Ta[13]=e[13],Ta[14]=
e[14],Ta[15]=e[15],Ta));e=b.loC;l.uniformMatrix4fv(U.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Jc[0]=e[0],Jc[1]=e[1],Jc[2]=e[2],Jc[3]=e[3],Jc[4]=e[4],Jc[5]=e[5],Jc[6]=e[6],Jc[7]=e[7],Jc[8]=e[8],Jc[9]=e[9],Jc[10]=e[10],Jc[11]=e[11],Jc[12]=e[12],Jc[13]=e[13],Jc[14]=e[14],Jc[15]=e[15],Jc));e=b.hiC;l.uniformMatrix4fv(za.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(bc[0]=e[0],bc[1]=e[1],bc[2]=e[2],bc[3]=e[3],bc[4]=e[4],bc[5]=e[5],bc[6]=e[6],bc[7]=e[7],bc[8]=e[8],bc[9]=e[9],
bc[10]=e[10],bc[11]=e[11],bc[12]=e[12],bc[13]=e[13],bc[14]=e[14],bc[15]=e[15],bc));e=b.loD;l.uniformMatrix4fv(rb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:($c[0]=e[0],$c[1]=e[1],$c[2]=e[2],$c[3]=e[3],$c[4]=e[4],$c[5]=e[5],$c[6]=e[6],$c[7]=e[7],$c[8]=e[8],$c[9]=e[9],$c[10]=e[10],$c[11]=e[11],$c[12]=e[12],$c[13]=e[13],$c[14]=e[14],$c[15]=e[15],$c));e=b.hiD;l.uniformMatrix4fv(Na.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Cd[0]=e[0],Cd[1]=e[1],Cd[2]=e[2],Cd[3]=e[3],Cd[4]=
e[4],Cd[5]=e[5],Cd[6]=e[6],Cd[7]=e[7],Cd[8]=e[8],Cd[9]=e[9],Cd[10]=e[10],Cd[11]=e[11],Cd[12]=e[12],Cd[13]=e[13],Cd[14]=e[14],Cd[15]=e[15],Cd));e=b.resolution;l.uniform2f(V.location,e[0],e[1]);e=b.viewBoxPos;l.uniform2f(ga.location,e[0],e[1]);e=b.viewBoxSize;l.uniform2f(qa.location,e[0],e[1]);l.uniform1f(da.location,b.maskHeight);l.uniform1f(u.location,b.drwLayer);e=b.contextColor;l.uniform4f(X.location,e[0],e[1],e[2],e[3]);(e=b.maskTexture)&&"framebuffer"===e._reglType&&(e=e.color[0]);e=e._texture;
l.uniform1i(ra.location,e.bind());l.uniform1i(ta.location,Q.bind());(h=R.elements)?l.bindBuffer(34963,h.buffer.buffer):Hb.currentVAO&&(h=wa.getElements(Hb.currentVAO.elements))&&l.bindBuffer(34963,h.buffer.buffer);k=b.offset;if(b=b.count)h?l.drawElements(1,b,h.type,k<<(h.type-5121>>1)):l.drawArrays(1,k,b),ba.dirty=!0,Hb.setVAO(null),t.viewportWidth=d,t.viewportHeight=p,ba.profile=g,e.unbind(),Q.unbind()},scope:function(k,l,q){var u,v,y,J,G,E,Y,L,K,N,Q,T,S,U,V,ga,ja,X,oa,ha,ca,wa,da,ka,ta,ua,dc,fb,
qa,Ta,Ca,xa,La,Ld,Db,Rc,Hb,ya,Wa,Da,Sd,bc,Fc,Lc,Zb,kc,$a,ma,Eb,rc,Ea,ad,Pa,Ba,sd,ra,gd,Ab,bb,na,zc,pc,xd,Rd,Jc,Ac,Ic,$c,Gb,Fa,sb,lb,wb,pd,qd,$d,Qc,Sb,od,vc,td,wc,za,md,Ve,Kb,Fb,Ae,Id,Jd,yf,De,Cd,Yb,bf,Za,Qa,qc,Xd,se,Na,rb,zd,Rb,Ec,te,Ga,Zc,kd,fc,Xb,Ra,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Hf,Oe,Le,re,Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,pf,mf,qf,Af,Bf,Ne,ze,nf,of,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Kf,Lf,Mf,rf,Rf,Gf,sf,dg,
Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ld.height=k.viewportHeight;ld.width=k.viewportWidth;ld.x=k.viewportX;ld.y=k.viewportY;u=ld.x|0;v=ld.y|0;y="width"in ld?ld.width|0:t.framebufferWidth-u;J="height"in ld?ld.height|0:t.framebufferHeight-v;G=t.viewportWidth;t.viewportWidth=
y;E=t.viewportHeight;t.viewportHeight=J;Y=Vd[0];Vd[0]=u;L=Vd[1];Vd[1]=v;K=Vd[2];Vd[2]=y;N=Vd[3];Vd[3]=J;Q=xb[0];xb[0]=0;T=xb[1];xb[1]=0;S=xb[2];xb[2]=0;U=xb[3];xb[3]=0;V=lc.blend_enable;lc.blend_enable=!1;ga=me[0];me[0]=32774;ja=me[1];me[1]=32774;X=be[0];be[0]=770;oa=be[1];be[1]=771;ha=be[2];be[2]=1;ca=be[3];be[3]=1;wa=lc.cull_enable;lc.cull_enable=!0;da=lc.cull_face;lc.cull_face=1029;ka=lc.depth_enable;lc.depth_enable=!0;ta=lc.depth_func;lc.depth_func=513;ua=lc.depth_mask;lc.depth_mask=!0;dc=fe[0];
fe[0]=0;fb=fe[1];fe[1]=1;qa=lc.dither;lc.dither=!1;Ta=lc.lineWidth;lc.lineWidth=2;ud.height=k.scissorHeight;ud.width=k.scissorWidth;ud.x=k.scissorX;ud.y=k.scissorY;Ca=ud.x|0;xa=ud.y|0;La="width"in ud?ud.width|0:t.framebufferWidth-Ca;Ld="height"in ud?ud.height|0:t.framebufferHeight-xa;Db=Ze[0];Ze[0]=Ca;Rc=Ze[1];Ze[1]=xa;Hb=Ze[2];Ze[2]=La;ya=Ze[3];Ze[3]=Ld;Wa=lc.scissor_enable;lc.scissor_enable=!0;Da=ba.profile;ba.profile=!1;Sd=k.offset;bc=R.offset;R.offset=Sd;Fc=k.count;Lc=R.count;R.count=Fc;Zb=R.primitive;
R.primitive=1;kc=k.contextColor;$a=p[24];p[24]=kc;ma=k.dim0A;Eb=p[3];p[3]=ma;rc=k.dim0B;Ea=p[5];p[5]=rc;ad=k.dim0C;Pa=p[7];p[7]=ad;Ba=k.dim0D;sd=p[9];p[9]=Ba;ra=k.dim1A;gd=p[4];p[4]=ra;Ab=k.dim1B;bb=p[6];p[6]=Ab;na=k.dim1C;zc=p[8];p[8]=na;pc=k.dim1D;xd=p[10];p[10]=pc;Rd=k.drwLayer;Jc=p[23];p[23]=Rd;Ac=k.hiA;Ic=p[12];p[12]=Ac;$c=k.hiB;Gb=p[14];p[14]=$c;Fa=k.hiC;sb=p[16];p[16]=Fa;lb=k.hiD;wb=p[18];p[18]=lb;pd=k.loA;qd=p[11];p[11]=pd;$d=k.loB;Qc=p[13];p[13]=$d;Sb=k.loC;od=p[15];p[15]=Sb;vc=k.loD;td=
p[17];p[17]=vc;wc=k.maskHeight;za=p[22];p[22]=wc;md=k.maskTexture;Ve=p[25];p[25]=md;Kb=p[26];p[26]=Ia;Fb=k.resolution;Ae=p[19];p[19]=Fb;Id=k.viewBoxPos;Jd=p[20];p[20]=Id;yf=k.viewBoxSize;De=p[21];p[21]=yf;Cd=h.buffer;h.buffer=m;Yb=h.divisor;h.divisor=0;bf=h.normalized;h.normalized=!1;Za=h.offset;h.offset=0;Qa=h.size;h.size=0;qc=h.state;h.state=1;Xd=h.stride;h.stride=0;se=h.type;h.type=m.dtype;Na=h.w;h.w=0;rb=h.x;h.x=0;zd=h.y;h.y=0;Rb=h.z;h.z=0;Ec=g.buffer;g.buffer=I;te=g.divisor;g.divisor=0;Ga=g.normalized;
g.normalized=!1;Zc=g.offset;g.offset=0;kd=g.size;g.size=0;fc=g.state;g.state=1;Xb=g.stride;g.stride=0;Ra=g.type;g.type=I.dtype;ne=g.w;g.w=0;Ue=g.x;g.x=0;ee=g.y;g.y=0;de=g.z;g.z=0;ae=d.buffer;d.buffer=f;pe=d.divisor;d.divisor=0;Yd=d.normalized;d.normalized=!1;ie=d.offset;d.offset=0;yc=d.size;d.size=0;Wc=d.state;d.state=1;qe=d.stride;d.stride=0;le=d.type;d.type=f.dtype;Ed=d.w;d.w=0;Kd=d.x;d.x=0;Md=d.y;d.y=0;Nd=d.z;d.z=0;je=A.buffer;A.buffer=c;Ee=A.divisor;A.divisor=0;we=A.normalized;A.normalized=!1;
oe=A.offset;A.offset=0;Hf=A.size;A.size=0;Oe=A.state;A.state=1;Le=A.stride;A.stride=0;re=A.type;A.type=c.dtype;Be=A.w;A.w=0;Fe=A.x;A.x=0;Ge=A.y;A.y=0;He=A.z;A.z=0;Ce=P.buffer;P.buffer=x;Gd=P.divisor;P.divisor=0;Qd=P.normalized;P.normalized=!1;Wd=P.offset;P.offset=0;Zd=P.size;P.size=0;Ie=P.state;P.state=1;yd=P.stride;P.stride=0;Od=P.type;P.type=x.dtype;ye=P.w;P.w=0;Je=P.x;P.x=0;ff=P.y;P.y=0;Ye=P.z;P.z=0;Pe=ea.buffer;ea.buffer=a;Me=ea.divisor;ea.divisor=0;We=ea.normalized;ea.normalized=!1;Te=ea.offset;
ea.offset=0;Qe=ea.size;ea.size=0;Re=ea.state;ea.state=1;Pd=ea.stride;ea.stride=0;Ud=ea.type;ea.type=a.dtype;Se=ea.w;ea.w=0;gf=ea.x;ea.x=0;lf=ea.y;ea.y=0;cf=ea.z;ea.z=0;hf=n.buffer;n.buffer=w;jf=n.divisor;n.divisor=0;kf=n.normalized;n.normalized=!1;pf=n.offset;n.offset=0;mf=n.size;n.size=0;qf=n.state;n.state=1;Af=n.stride;n.stride=0;Bf=n.type;n.type=w.dtype;Ne=n.w;n.w=0;ze=n.x;n.x=0;nf=n.y;n.y=0;of=n.z;n.z=0;Cf=pa.buffer;pa.buffer=C;Ff=pa.divisor;pa.divisor=0;zf=pa.normalized;pa.normalized=!1;Df=pa.offset;
pa.offset=0;Ef=pa.size;pa.size=0;uf=pa.state;pa.state=1;vf=pa.stride;pa.stride=0;tf=pa.type;pa.type=C.dtype;wf=pa.w;pa.w=0;xf=pa.x;pa.x=0;If=pa.y;pa.y=0;Kf=pa.z;pa.z=0;Lf=M.buffer;M.buffer=W;Mf=M.divisor;M.divisor=0;rf=M.normalized;M.normalized=!1;Rf=M.offset;M.offset=0;Gf=M.size;M.size=0;sf=M.state;M.state=1;dg=M.stride;M.stride=0;Sf=M.type;M.type=W.dtype;Tf=M.w;M.w=0;qg=M.x;M.x=0;df=M.y;M.y=0;$e=M.z;M.z=0;Nf=fa.buffer;fa.buffer=O;Of=fa.divisor;fa.divisor=0;eg=fa.normalized;fa.normalized=!1;fg=fa.offset;
fa.offset=0;gg=fa.size;fa.size=0;hg=fa.state;fa.state=1;ig=fa.stride;fa.stride=0;Wf=fa.type;fa.type=O.dtype;Uf=fa.w;fa.w=0;Xf=fa.x;fa.x=0;Yf=fa.y;fa.y=0;Zf=fa.z;fa.z=0;jg=b.buffer;b.buffer=F;rg=b.divisor;b.divisor=0;sg=b.normalized;b.normalized=!1;tg=b.offset;b.offset=0;ug=b.size;b.size=0;vg=b.state;b.state=1;wg=b.stride;b.stride=0;xg=b.type;b.type=F.dtype;yg=b.w;b.w=0;zg=b.x;b.x=0;Ag=b.y;b.y=0;Bg=b.z;b.z=0;ef=e.buffer;e.buffer=r;af=e.divisor;e.divisor=0;Pf=e.normalized;e.normalized=!1;Qf=e.offset;
e.offset=0;kg=e.size;e.size=0;lg=e.state;e.state=1;mg=e.stride;e.stride=0;ng=e.type;e.type=r.dtype;og=e.w;e.w=0;$f=e.x;e.x=0;Vf=e.y;e.y=0;ag=e.z;e.z=0;bg=Z.buffer;Z.buffer=D;cg=Z.divisor;Z.divisor=0;pg=Z.normalized;Z.normalized=!1;Cg=Z.offset;Z.offset=0;Dg=Z.size;Z.size=0;Eg=Z.state;Z.state=1;Fg=Z.stride;Z.stride=0;Gg=Z.type;Z.type=D.dtype;Hg=Z.w;Z.w=0;Ig=Z.x;Z.x=0;Jg=Z.y;Z.y=0;Kg=Z.z;Z.z=0;Lg=Ka.buffer;Ka.buffer=z;Mg=Ka.divisor;Ka.divisor=0;Ng=Ka.normalized;Ka.normalized=!1;Og=Ka.offset;Ka.offset=
0;Pg=Ka.size;Ka.size=0;Qg=Ka.state;Ka.state=1;Rg=Ka.stride;Ka.stride=0;Sg=Ka.type;Ka.type=z.dtype;Tg=Ka.w;Ka.w=0;Ug=Ka.x;Ka.x=0;Vg=Ka.y;Ka.y=0;Wg=Ka.z;Ka.z=0;Xg=aa.buffer;aa.buffer=B;Yg=aa.divisor;aa.divisor=0;Zg=aa.normalized;aa.normalized=!1;$g=aa.offset;aa.offset=0;ah=aa.size;aa.size=0;bh=aa.state;aa.state=1;ch=aa.stride;aa.stride=0;dh=aa.type;aa.type=B.dtype;eh=aa.w;aa.w=0;fh=aa.x;aa.x=0;gh=aa.y;aa.y=0;hh=aa.z;aa.z=0;ih=zb.buffer;zb.buffer=H;jh=zb.divisor;zb.divisor=0;kh=zb.normalized;zb.normalized=
!1;lh=zb.offset;zb.offset=0;mh=zb.size;zb.size=0;nh=zb.state;zb.state=1;oh=zb.stride;zb.stride=0;ph=zb.type;zb.type=H.dtype;qh=zb.w;zb.w=0;rh=zb.x;zb.x=0;sh=zb.y;zb.y=0;th=zb.z;zb.z=0;uh=ia.vert;ia.vert=2;vh=ia.frag;ia.frag=1;ba.dirty=!0;l(t,k,q);t.viewportWidth=G;t.viewportHeight=E;Vd[0]=Y;Vd[1]=L;Vd[2]=K;Vd[3]=N;xb[0]=Q;xb[1]=T;xb[2]=S;xb[3]=U;lc.blend_enable=V;me[0]=ga;me[1]=ja;be[0]=X;be[1]=oa;be[2]=ha;be[3]=ca;lc.cull_enable=wa;lc.cull_face=da;lc.depth_enable=ka;lc.depth_func=ta;lc.depth_mask=
ua;fe[0]=dc;fe[1]=fb;lc.dither=qa;lc.lineWidth=Ta;Ze[0]=Db;Ze[1]=Rc;Ze[2]=Hb;Ze[3]=ya;lc.scissor_enable=Wa;ba.profile=Da;R.offset=bc;R.count=Lc;R.primitive=Zb;p[24]=$a;p[3]=Eb;p[5]=Ea;p[7]=Pa;p[9]=sd;p[4]=gd;p[6]=bb;p[8]=zc;p[10]=xd;p[23]=Jc;p[12]=Ic;p[14]=Gb;p[16]=sb;p[18]=wb;p[11]=qd;p[13]=Qc;p[15]=od;p[17]=td;p[22]=za;p[25]=Ve;p[26]=Kb;p[19]=Ae;p[20]=Jd;p[21]=De;h.buffer=Cd;h.divisor=Yb;h.normalized=bf;h.offset=Za;h.size=Qa;h.state=qc;h.stride=Xd;h.type=se;h.w=Na;h.x=rb;h.y=zd;h.z=Rb;g.buffer=
Ec;g.divisor=te;g.normalized=Ga;g.offset=Zc;g.size=kd;g.state=fc;g.stride=Xb;g.type=Ra;g.w=ne;g.x=Ue;g.y=ee;g.z=de;d.buffer=ae;d.divisor=pe;d.normalized=Yd;d.offset=ie;d.size=yc;d.state=Wc;d.stride=qe;d.type=le;d.w=Ed;d.x=Kd;d.y=Md;d.z=Nd;A.buffer=je;A.divisor=Ee;A.normalized=we;A.offset=oe;A.size=Hf;A.state=Oe;A.stride=Le;A.type=re;A.w=Be;A.x=Fe;A.y=Ge;A.z=He;P.buffer=Ce;P.divisor=Gd;P.normalized=Qd;P.offset=Wd;P.size=Zd;P.state=Ie;P.stride=yd;P.type=Od;P.w=ye;P.x=Je;P.y=ff;P.z=Ye;ea.buffer=Pe;ea.divisor=
Me;ea.normalized=We;ea.offset=Te;ea.size=Qe;ea.state=Re;ea.stride=Pd;ea.type=Ud;ea.w=Se;ea.x=gf;ea.y=lf;ea.z=cf;n.buffer=hf;n.divisor=jf;n.normalized=kf;n.offset=pf;n.size=mf;n.state=qf;n.stride=Af;n.type=Bf;n.w=Ne;n.x=ze;n.y=nf;n.z=of;pa.buffer=Cf;pa.divisor=Ff;pa.normalized=zf;pa.offset=Df;pa.size=Ef;pa.state=uf;pa.stride=vf;pa.type=tf;pa.w=wf;pa.x=xf;pa.y=If;pa.z=Kf;M.buffer=Lf;M.divisor=Mf;M.normalized=rf;M.offset=Rf;M.size=Gf;M.state=sf;M.stride=dg;M.type=Sf;M.w=Tf;M.x=qg;M.y=df;M.z=$e;fa.buffer=
Nf;fa.divisor=Of;fa.normalized=eg;fa.offset=fg;fa.size=gg;fa.state=hg;fa.stride=ig;fa.type=Wf;fa.w=Uf;fa.x=Xf;fa.y=Yf;fa.z=Zf;b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=ug;b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;e.buffer=ef;e.divisor=af;e.normalized=Pf;e.offset=Qf;e.size=kg;e.state=lg;e.stride=mg;e.type=ng;e.w=og;e.x=$f;e.y=Vf;e.z=ag;Z.buffer=bg;Z.divisor=cg;Z.normalized=pg;Z.offset=Cg;Z.size=Dg;Z.state=Eg;Z.stride=Fg;Z.type=Gg;Z.w=Hg;Z.x=Ig;Z.y=Jg;Z.z=Kg;Ka.buffer=
Lg;Ka.divisor=Mg;Ka.normalized=Ng;Ka.offset=Og;Ka.size=Pg;Ka.state=Qg;Ka.stride=Rg;Ka.type=Sg;Ka.w=Tg;Ka.x=Ug;Ka.y=Vg;Ka.z=Wg;aa.buffer=Xg;aa.divisor=Yg;aa.normalized=Zg;aa.offset=$g;aa.size=ah;aa.state=bh;aa.stride=ch;aa.type=dh;aa.w=eh;aa.x=fh;aa.y=gh;aa.z=hh;zb.buffer=ih;zb.divisor=jh;zb.normalized=kh;zb.offset=lh;zb.size=mh;zb.state=nh;zb.stride=oh;zb.type=ph;zb.w=qh;zb.x=rh;zb.y=sh;zb.z=th;ia.vert=uh;ia.frag=vh;ba.dirty=!0}}},$1:function(k,y){var q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,Ia,h,g,d,
A,P,ea,n,pa,M,fa,b;q=k.attributes;I=k.current;f=k.framebuffer;c=k.gl;x=k.next;a=k.vao;w=x.blend_color;C=I.blend_color;W=x.blend_equation;O=I.blend_equation;F=x.blend_func;r=I.blend_func;D=x.colorMask;z=I.colorMask;B=x.depth_range;H=I.depth_range;m=x.polygonOffset_offset;Q=I.polygonOffset_offset;Ia=x.sample_coverage;h=I.sample_coverage;g=x.scissor_box;d=I.scissor_box;A=x.stencil_func;P=I.stencil_func;ea=x.stencil_opBack;n=I.stencil_opBack;pa=x.stencil_opFront;M=I.stencil_opFront;fa=x.viewport;b=I.viewport;
return{poll:function(){var a,k,q,y,aa,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na;I.dirty=!1;k=x.blend_enable;q=x.cull_enable;y=x.depth_enable;aa=x.dither;Xb=x.polygonOffset_enable;na=x.sample_alpha;Qa=x.sample_enable;X=x.scissor_enable;K=x.stencil_enable;L=x.cull_face;T=I.cull_face;ma=x.depth_func;N=I.depth_func;Rb=x.depth_mask;Za=I.depth_mask;S=x.frontFace;u=I.frontFace;ka=x.lineWidth;ca=I.lineWidth;za=x.stencil_mask;Na=I.stencil_mask;a=f.next;a!==f.cur&&(a?c.bindFramebuffer(36160,a.framebuffer):
c.bindFramebuffer(36160,null),f.cur=a);k!==I.blend_enable&&(k?c.enable(3042):c.disable(3042),I.blend_enable=k);q!==I.cull_enable&&(q?c.enable(2884):c.disable(2884),I.cull_enable=q);y!==I.depth_enable&&(y?c.enable(2929):c.disable(2929),I.depth_enable=y);aa!==I.dither&&(aa?c.enable(3024):c.disable(3024),I.dither=aa);Xb!==I.polygonOffset_enable&&(Xb?c.enable(32823):c.disable(32823),I.polygonOffset_enable=Xb);na!==I.sample_alpha&&(na?c.enable(32926):c.disable(32926),I.sample_alpha=na);Qa!==I.sample_enable&&
(Qa?c.enable(32928):c.disable(32928),I.sample_enable=Qa);X!==I.scissor_enable&&(X?c.enable(3089):c.disable(3089),I.scissor_enable=X);K!==I.stencil_enable&&(K?c.enable(2960):c.disable(2960),I.stencil_enable=K);if(w[0]!==C[0]||w[1]!==C[1]||w[2]!==C[2]||w[3]!==C[3])c.blendColor(w[0],w[1],w[2],w[3]),C[0]=w[0],C[1]=w[1],C[2]=w[2],C[3]=w[3];if(W[0]!==O[0]||W[1]!==O[1])c.blendEquationSeparate(W[0],W[1]),O[0]=W[0],O[1]=W[1];if(F[0]!==r[0]||F[1]!==r[1]||F[2]!==r[2]||F[3]!==r[3])c.blendFuncSeparate(F[0],F[1],
F[2],F[3]),r[0]=F[0],r[1]=F[1],r[2]=F[2],r[3]=F[3];if(D[0]!==z[0]||D[1]!==z[1]||D[2]!==z[2]||D[3]!==z[3])c.colorMask(D[0],D[1],D[2],D[3]),z[0]=D[0],z[1]=D[1],z[2]=D[2],z[3]=D[3];L!==T&&(c.cullFace(L),I.cull_face=L);ma!==N&&(c.depthFunc(ma),I.depth_func=ma);Rb!==Za&&(c.depthMask(Rb),I.depth_mask=Rb);if(B[0]!==H[0]||B[1]!==H[1])c.depthRange(B[0],B[1]),H[0]=B[0],H[1]=B[1];S!==u&&(c.frontFace(S),I.frontFace=S);ka!==ca&&(c.lineWidth(ka),I.lineWidth=ka);if(m[0]!==Q[0]||m[1]!==Q[1])c.polygonOffset(m[0],
m[1]),Q[0]=m[0],Q[1]=m[1];if(Ia[0]!==h[0]||Ia[1]!==h[1])c.sampleCoverage(Ia[0],Ia[1]),h[0]=Ia[0],h[1]=Ia[1];if(g[0]!==d[0]||g[1]!==d[1]||g[2]!==d[2]||g[3]!==d[3])c.scissor(g[0],g[1],g[2],g[3]),d[0]=g[0],d[1]=g[1],d[2]=g[2],d[3]=g[3];if(A[0]!==P[0]||A[1]!==P[1]||A[2]!==P[2])c.stencilFunc(A[0],A[1],A[2]),P[0]=A[0],P[1]=A[1],P[2]=A[2];za!==Na&&(c.stencilMask(za),I.stencil_mask=za);if(ea[0]!==n[0]||ea[1]!==n[1]||ea[2]!==n[2]||ea[3]!==n[3])c.stencilOpSeparate(ea[0],ea[1],ea[2],ea[3]),n[0]=ea[0],n[1]=ea[1],
n[2]=ea[2],n[3]=ea[3];if(pa[0]!==M[0]||pa[1]!==M[1]||pa[2]!==M[2]||pa[3]!==M[3])c.stencilOpSeparate(pa[0],pa[1],pa[2],pa[3]),M[0]=pa[0],M[1]=pa[1],M[2]=pa[2],M[3]=pa[3];if(fa[0]!==b[0]||fa[1]!==b[1]||fa[2]!==b[2]||fa[3]!==b[3])c.viewport(fa[0],fa[1],fa[2],fa[3]),b[0]=fa[0],b[1]=fa[1],b[2]=fa[2],b[3]=fa[3]},refresh:function(){var e,k,aa,Ra,zb,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za;I.dirty=!1;k=x.blend_enable;aa=x.cull_enable;Ra=x.depth_enable;zb=x.dither;Xb=x.polygonOffset_enable;na=x.sample_alpha;Qa=x.sample_enable;
X=x.scissor_enable;K=x.stencil_enable;L=x.cull_face;T=x.depth_func;ma=x.depth_mask;N=x.frontFace;Rb=x.lineWidth;Za=x.stencil_mask;(e=f.next)?c.bindFramebuffer(36160,e.framebuffer):c.bindFramebuffer(36160,null);f.cur=e;e=q[0];e.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(0,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(0,e.divisor);e=q[1];e.buffer?
(c.enableVertexAttribArray(1),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(1,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(1,e.divisor);e=q[2];e.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(2,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(2),c.vertexAttrib4f(2,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(2,
e.divisor);e=q[3];e.buffer?(c.enableVertexAttribArray(3),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(3,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(3,e.divisor);e=q[4];e.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(4,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,e.x,e.y,e.z,
e.w),e.buffer=null);y.vertexAttribDivisorANGLE(4,e.divisor);e=q[5];e.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(5,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(5,e.divisor);e=q[6];e.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(6,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(6),
c.vertexAttrib4f(6,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(6,e.divisor);e=q[7];e.buffer?(c.enableVertexAttribArray(7),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(7,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(7,e.divisor);e=q[8];e.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(8,e.size,e.type,e.normalized,e.stride,
e.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(8,e.divisor);e=q[9];e.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(9,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(9,e.divisor);e=q[10];e.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(10,
e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(10,e.divisor);e=q[11];e.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(11,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(11),c.vertexAttrib4f(11,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(11,e.divisor);e=q[12];e.buffer?(c.enableVertexAttribArray(12),
c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(12,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(12,e.divisor);e=q[13];e.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(13,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(13,
e.divisor);e=q[14];e.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(14,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,e.x,e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(14,e.divisor);e=q[15];e.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(15,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(15),c.vertexAttrib4f(15,e.x,
e.y,e.z,e.w),e.buffer=null);y.vertexAttribDivisorANGLE(15,e.divisor);a.currentVAO=null;a.setVAO(a.targetVAO);k?c.enable(3042):c.disable(3042);I.blend_enable=k;aa?c.enable(2884):c.disable(2884);I.cull_enable=aa;Ra?c.enable(2929):c.disable(2929);I.depth_enable=Ra;zb?c.enable(3024):c.disable(3024);I.dither=zb;Xb?c.enable(32823):c.disable(32823);I.polygonOffset_enable=Xb;na?c.enable(32926):c.disable(32926);I.sample_alpha=na;Qa?c.enable(32928):c.disable(32928);I.sample_enable=Qa;X?c.enable(3089):c.disable(3089);
I.scissor_enable=X;K?c.enable(2960):c.disable(2960);I.stencil_enable=K;c.blendColor(w[0],w[1],w[2],w[3]);C[0]=w[0];C[1]=w[1];C[2]=w[2];C[3]=w[3];c.blendEquationSeparate(W[0],W[1]);O[0]=W[0];O[1]=W[1];c.blendFuncSeparate(F[0],F[1],F[2],F[3]);r[0]=F[0];r[1]=F[1];r[2]=F[2];r[3]=F[3];c.colorMask(D[0],D[1],D[2],D[3]);z[0]=D[0];z[1]=D[1];z[2]=D[2];z[3]=D[3];c.cullFace(L);I.cull_face=L;c.depthFunc(T);I.depth_func=T;c.depthMask(ma);I.depth_mask=ma;c.depthRange(B[0],B[1]);H[0]=B[0];H[1]=B[1];c.frontFace(N);
I.frontFace=N;c.lineWidth(Rb);I.lineWidth=Rb;c.polygonOffset(m[0],m[1]);Q[0]=m[0];Q[1]=m[1];c.sampleCoverage(Ia[0],Ia[1]);h[0]=Ia[0];h[1]=Ia[1];c.scissor(g[0],g[1],g[2],g[3]);d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];c.stencilFunc(A[0],A[1],A[2]);P[0]=A[0];P[1]=A[1];P[2]=A[2];c.stencilMask(Za);I.stencil_mask=Za;c.stencilOpSeparate(ea[0],ea[1],ea[2],ea[3]);n[0]=ea[0];n[1]=ea[1];n[2]=ea[2];n[3]=ea[3];c.stencilOpSeparate(pa[0],pa[1],pa[2],pa[3]);M[0]=pa[0];M[1]=pa[1];M[2]=pa[2];M[3]=pa[3];c.viewport(fa[0],
fa[1],fa[2],fa[3]);b[0]=fa[0];b[1]=fa[1];b[2]=fa[2];b[3]=fa[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(k,y,q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,Ia,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,aa,Ra,zb,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za){var S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra,Yb,dc,qc,sd,vc,Y,J,ja,Ca,sb,Qc,Zc,E,v,ha,ta,V,ga,qa,G,t,ba,R,wa,oa,l,lc,ia,p,Hb,xb;S=k.attributes;u=k.buffer;ka=k.context;ca=k.current;
za=k.draw;Na=k.elements;fc=k.extensions;Ga=k.framebuffer;U=k.gl;rb=k.isBufferArgs;da=k.next;ra=k.shader;Yb=k.uniforms;dc=k.vao;qc=da.blend_color;sd=ca.blend_color;vc=da.blend_equation;Y=ca.blend_equation;J=da.blend_func;ja=ca.blend_func;Ca=da.colorMask;sb=ca.colorMask;Qc=da.depth_range;Zc=ca.depth_range;E=da.polygonOffset_offset;v=ca.polygonOffset_offset;ha=da.sample_coverage;ta=ca.sample_coverage;V=da.scissor_box;ga=ca.scissor_box;qa=da.stencil_func;G=ca.stencil_func;t=da.stencil_opBack;ba=ca.stencil_opBack;
R=da.stencil_opFront;wa=ca.stencil_opFront;oa=da.viewport;l=ca.viewport;lc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ia={};ia.buffer=q;ia.divisor=1;p={};p.buffer=I;p.divisor=1;Hb={};Hb.buffer=f;Hb.divisor=1;xb={};xb.buffer=c;xb.divisor=1;return{batch:function(a,c){var d,g,h,f,k,m;d=Ga.next;d!==Ga.cur&&(d?U.bindFramebuffer(36160,d.framebuffer):U.bindFramebuffer(36160,null),Ga.cur=d);if(ca.dirty){var q,x,J,A,w,z,D,B,I,H,Q,P,C,V,oa,ea,W,Ia,la,ra,qd,
Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,vc;q=da.dither;q!==ca.dither&&(q?U.enable(3024):U.disable(3024),ca.dither=q);x=da.depth_func;x!==ca.depth_func&&(U.depthFunc(x),ca.depth_func=x);J=Qc[0];A=Qc[1];if(J!==Zc[0]||A!==Zc[1])U.depthRange(J,A),Zc[0]=J,Zc[1]=A;w=da.depth_mask;w!==ca.depth_mask&&(U.depthMask(w),ca.depth_mask=w);z=Ca[0];D=Ca[1];B=Ca[2];I=Ca[3];if(z!==sb[0]||D!==sb[1]||B!==sb[2]||I!==sb[3])U.colorMask(z,D,B,I),sb[0]=z,sb[1]=D,sb[2]=B,sb[3]=I;H=da.cull_enable;H!==ca.cull_enable&&(H?U.enable(2884):
U.disable(2884),ca.cull_enable=H);Q=da.cull_face;Q!==ca.cull_face&&(U.cullFace(Q),ca.cull_face=Q);P=da.frontFace;P!==ca.frontFace&&(U.frontFace(P),ca.frontFace=P);C=da.lineWidth;C!==ca.lineWidth&&(U.lineWidth(C),ca.lineWidth=C);V=da.polygonOffset_enable;V!==ca.polygonOffset_enable&&(V?U.enable(32823):U.disable(32823),ca.polygonOffset_enable=V);oa=E[0];ea=E[1];if(oa!==v[0]||ea!==v[1])U.polygonOffset(oa,ea),v[0]=oa,v[1]=ea;W=da.sample_alpha;W!==ca.sample_alpha&&(W?U.enable(32926):U.disable(32926),ca.sample_alpha=
W);Ia=da.sample_enable;Ia!==ca.sample_enable&&(Ia?U.enable(32928):U.disable(32928),ca.sample_enable=Ia);la=ha[0];ra=ha[1];if(la!==ta[0]||ra!==ta[1])U.sampleCoverage(la,ra),ta[0]=la,ta[1]=ra;qd=da.stencil_enable;qd!==ca.stencil_enable&&(qd?U.enable(2960):U.disable(2960),ca.stencil_enable=qd);Rc=da.stencil_mask;Rc!==ca.stencil_mask&&(U.stencilMask(Rc),ca.stencil_mask=Rc);Lc=qa[0];rc=qa[1];fb=qa[2];if(Lc!==G[0]||rc!==G[1]||fb!==G[2])U.stencilFunc(Lc,rc,fb),G[0]=Lc,G[1]=rc,G[2]=fb;kc=R[0];Db=R[1];pc=
R[2];Ta=R[3];if(kc!==wa[0]||Db!==wa[1]||pc!==wa[2]||Ta!==wa[3])U.stencilOpSeparate(kc,Db,pc,Ta),wa[0]=kc,wa[1]=Db,wa[2]=pc,wa[3]=Ta;Jc=t[0];bc=t[1];$c=t[2];vc=t[3];if(Jc!==ba[0]||bc!==ba[1]||$c!==ba[2]||vc!==ba[3])U.stencilOpSeparate(Jc,bc,$c,vc),ba[0]=Jc,ba[1]=bc,ba[2]=$c,ba[3]=vc}U.blendColor(0,0,0,0);sd[0]=0;sd[1]=0;sd[2]=0;sd[3]=0;U.enable(3042);ca.blend_enable=!0;U.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;U.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=
1;U.disable(2929);ca.depth_enable=!1;U.enable(3089);ca.scissor_enable=!0;if(g=ca.profile)h=performance.now(),y.count+=c;U.useProgram(n.program);f=fc.angle_instanced_arrays;var md,Ac,Zb,Fc,ad,La,Eb,Wa;dc.setVAO(null);md=zb.location;Ac=S[md];Ac.buffer||U.enableVertexAttribArray(md);if(5126!==Ac.type||2!==Ac.size||Ac.buffer!==O||!1!==Ac.normalized||0!==Ac.offset||24!==Ac.stride)U.bindBuffer(34962,O.buffer),U.vertexAttribPointer(md,2,5126,!1,24,0),Ac.type=5126,Ac.size=2,Ac.buffer=O,Ac.normalized=!1,Ac.offset=
0,Ac.stride=24;0!==Ac.divisor&&(f.vertexAttribDivisorANGLE(md,0),Ac.divisor=0);Zb=na.location;Fc=S[Zb];Fc.buffer||U.enableVertexAttribArray(Zb);if(5126!==Fc.type||2!==Fc.size||Fc.buffer!==F||!1!==Fc.normalized||8!==Fc.offset||24!==Fc.stride)U.bindBuffer(34962,F.buffer),U.vertexAttribPointer(Zb,2,5126,!1,24,8),Fc.type=5126,Fc.size=2,Fc.buffer=F,Fc.normalized=!1,Fc.offset=8,Fc.stride=24;0!==Fc.divisor&&(f.vertexAttribDivisorANGLE(Zb,0),Fc.divisor=0);ad=Z.location;La=S[ad];La.buffer||U.enableVertexAttribArray(ad);
if(5126!==La.type||2!==La.size||La.buffer!==r||!1!==La.normalized||16!==La.offset||24!==La.stride)U.bindBuffer(34962,r.buffer),U.vertexAttribPointer(ad,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=r,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(f.vertexAttribDivisorANGLE(ad,0),La.divisor=0);(Eb=za.elements)?U.bindBuffer(34963,Eb.buffer.buffer):dc.currentVAO&&(Eb=Na.getElements(dc.currentVAO.elements))&&U.bindBuffer(34963,Eb.buffer.buffer);Wa=za.offset;for(k=0;k<c;++k){m=a[k];var ua,
td,Ab,$a,Gb,bb,wc,Sb,Yb,ac,Tb,qc,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,xe,he,Yc,Jf,ke,ve,ue,Td,Fd,Dd,hd,Ec;ua=m.viewport;td=ua.x|0;Ab=ua.y|0;$a="width"in ua?ua.width|0:ka.framebufferWidth-td;Gb="height"in ua?ua.height|0:ka.framebufferHeight-Ab;bb=ka.viewportWidth;
ka.viewportWidth=$a;wc=ka.viewportHeight;ka.viewportHeight=Gb;U.viewport(td,Ab,$a,Gb);l[0]=td;l[1]=Ab;l[2]=$a;l[3]=Gb;Sb=m.viewport;Yb=Sb.x|0;ac=Sb.y|0;Tb="width"in Sb?Sb.width|0:ka.framebufferWidth-Yb;qc="height"in Sb?Sb.height|0:ka.framebufferHeight-ac;U.scissor(Yb,ac,Tb,qc);ga[0]=Yb;ga[1]=ac;ga[2]=Tb;ga[3]=qc;Ub=pa.call(this,ka,m,k);Hb.offset=Ub;Ma=!1;mb=null;tb=0;gb=!1;oc=Oa=0;Ib=1;Vc=0;cb=5126;ib=ec=Gc=mc=0;rb(Hb)?(Ma=!0,mb=u.createStream(34962,Hb),cb=mb.dtype):(mb=u.getBuffer(Hb))?cb=mb.dtype:
"constant"in Hb?(Ib=2,"number"===typeof Hb.constant?(Gc=Hb.constant,ec=ib=mc=0):(Gc=0<Hb.constant.length?Hb.constant[0]:0,ec=1<Hb.constant.length?Hb.constant[1]:0,ib=2<Hb.constant.length?Hb.constant[2]:0,mc=3<Hb.constant.length?Hb.constant[3]:0)):(mb=rb(Hb.buffer)?u.createStream(34962,Hb.buffer):u.getBuffer(Hb.buffer),cb="type"in Hb?lc[Hb.type]:mb.dtype,gb=!!Hb.normalized,oc=Hb.size|0,Oa=Hb.offset|0,Vc=Hb.stride|0,tb=Hb.divisor|0);jb=K.location;sa=S[jb];if(1===Ib){sa.buffer||U.enableVertexAttribArray(jb);
nb=oc||2;if(sa.type!==cb||sa.size!==nb||sa.buffer!==mb||sa.normalized!==gb||sa.offset!==Oa||sa.stride!==Vc)U.bindBuffer(34962,mb.buffer),U.vertexAttribPointer(jb,nb,cb,gb,Vc,Oa),sa.type=cb,sa.size=nb,sa.buffer=mb,sa.normalized=gb,sa.offset=Oa,sa.stride=Vc;sa.divisor!==tb&&(f.vertexAttribDivisorANGLE(jb,tb),sa.divisor=tb)}else if(sa.buffer&&(U.disableVertexAttribArray(jb),sa.buffer=null),sa.x!==Gc||sa.y!==ec||sa.z!==ib||sa.w!==mc)U.vertexAttrib4f(jb,Gc,ec,ib,mc),sa.x=Gc,sa.y=ec,sa.z=ib,sa.w=mc;va=
M.call(this,ka,m,k);xb.offset=va;Ua=!1;ab=null;Aa=0;db=!1;Bb=Ha=0;yb=1;Sa=0;Kc=5126;xa=Vb=Lb=Jb=0;rb(xb)?(Ua=!0,ab=u.createStream(34962,xb),Kc=ab.dtype):(ab=u.getBuffer(xb))?Kc=ab.dtype:"constant"in xb?(yb=2,"number"===typeof xb.constant?(Lb=xb.constant,Vb=xa=Jb=0):(Lb=0<xb.constant.length?xb.constant[0]:0,Vb=1<xb.constant.length?xb.constant[1]:0,xa=2<xb.constant.length?xb.constant[2]:0,Jb=3<xb.constant.length?xb.constant[3]:0)):(ab=rb(xb.buffer)?u.createStream(34962,xb.buffer):u.getBuffer(xb.buffer),
Kc="type"in xb?lc[xb.type]:ab.dtype,db=!!xb.normalized,Bb=xb.size|0,Ha=xb.offset|0,Sa=xb.stride|0,Aa=xb.divisor|0);ce=L.location;Ja=S[ce];if(1===yb){Ja.buffer||U.enableVertexAttribArray(ce);Ob=Bb||2;if(Ja.type!==Kc||Ja.size!==Ob||Ja.buffer!==ab||Ja.normalized!==db||Ja.offset!==Ha||Ja.stride!==Sa)U.bindBuffer(34962,ab.buffer),U.vertexAttribPointer(ce,Ob,Kc,db,Sa,Ha),Ja.type=Kc,Ja.size=Ob,Ja.buffer=ab,Ja.normalized=db,Ja.offset=Ha,Ja.stride=Sa;Ja.divisor!==Aa&&(f.vertexAttribDivisorANGLE(ce,Aa),Ja.divisor=
Aa)}else if(Ja.buffer&&(U.disableVertexAttribArray(ce),Ja.buffer=null),Ja.x!==Lb||Ja.y!==Vb||Ja.z!==xa||Ja.w!==Jb)U.vertexAttrib4f(ce,Lb,Vb,xa,Jb),Ja.x=Lb,Ja.y=Vb,Ja.z=xa,Ja.w=Jb;eb=fa.call(this,ka,m,k);p.offset=eb;hb=!1;ya=null;gc=0;Da=!1;pb=ob=0;Xa=1;Ya=0;nc=5126;Mb=Va=tc=ed=0;rb(p)?(hb=!0,ya=u.createStream(34962,p),nc=ya.dtype):(ya=u.getBuffer(p))?nc=ya.dtype:"constant"in p?(Xa=2,"number"===typeof p.constant?(tc=p.constant,Va=Mb=ed=0):(tc=0<p.constant.length?p.constant[0]:0,Va=1<p.constant.length?
p.constant[1]:0,Mb=2<p.constant.length?p.constant[2]:0,ed=3<p.constant.length?p.constant[3]:0)):(ya=rb(p.buffer)?u.createStream(34962,p.buffer):u.getBuffer(p.buffer),nc="type"in p?lc[p.type]:ya.dtype,Da=!!p.normalized,pb=p.size|0,ob=p.offset|0,Ya=p.stride|0,gc=p.divisor|0);bd=Xb.location;Ea=S[bd];if(1===Xa){Ea.buffer||U.enableVertexAttribArray(bd);xc=pb||4;if(Ea.type!==nc||Ea.size!==xc||Ea.buffer!==ya||Ea.normalized!==Da||Ea.offset!==ob||Ea.stride!==Ya)U.bindBuffer(34962,ya.buffer),U.vertexAttribPointer(bd,
xc,nc,Da,Ya,ob),Ea.type=nc,Ea.size=xc,Ea.buffer=ya,Ea.normalized=Da,Ea.offset=ob,Ea.stride=Ya;Ea.divisor!==gc&&(f.vertexAttribDivisorANGLE(bd,gc),Ea.divisor=gc)}else if(Ea.buffer&&(U.disableVertexAttribArray(bd),Ea.buffer=null),Ea.x!==tc||Ea.y!==Va||Ea.z!==Mb||Ea.w!==ed)U.vertexAttrib4f(bd,tc,Va,Mb,ed),Ea.x=tc,Ea.y=Va,Ea.z=Mb,Ea.w=ed;Pa=b.call(this,ka,m,k);ia.offset=Pa;Ba=!1;kb=null;ub=0;Cb=!1;uc=qb=0;vb=1;vd=0;sc=5126;wd=id=Mc=Hd=0;rb(ia)?(Ba=!0,kb=u.createStream(34962,ia),sc=kb.dtype):(kb=u.getBuffer(ia))?
sc=kb.dtype:"constant"in ia?(vb=2,"number"===typeof ia.constant?(Mc=ia.constant,id=wd=Hd=0):(Mc=0<ia.constant.length?ia.constant[0]:0,id=1<ia.constant.length?ia.constant[1]:0,wd=2<ia.constant.length?ia.constant[2]:0,Hd=3<ia.constant.length?ia.constant[3]:0)):(kb=rb(ia.buffer)?u.createStream(34962,ia.buffer):u.getBuffer(ia.buffer),sc="type"in ia?lc[ia.type]:kb.dtype,Cb=!!ia.normalized,uc=ia.size|0,qb=ia.offset|0,vd=ia.stride|0,ub=ia.divisor|0);Wb=Ra.location;cc=S[Wb];if(1===vb){cc.buffer||U.enableVertexAttribArray(Wb);
Pb=uc||4;if(cc.type!==sc||cc.size!==Pb||cc.buffer!==kb||cc.normalized!==Cb||cc.offset!==qb||cc.stride!==vd)U.bindBuffer(34962,kb.buffer),U.vertexAttribPointer(Wb,Pb,sc,Cb,vd,qb),cc.type=sc,cc.size=Pb,cc.buffer=kb,cc.normalized=Cb,cc.offset=qb,cc.stride=vd;cc.divisor!==ub&&(f.vertexAttribDivisorANGLE(Wb,ub),cc.divisor=ub)}else if(cc.buffer&&(U.disableVertexAttribArray(Wb),cc.buffer=null),cc.x!==Mc||cc.y!==id||cc.z!==wd||cc.w!==Hd)U.vertexAttrib4f(Wb,Mc,id,wd,Hd),cc.x=Mc,cc.y=id,cc.z=wd,cc.w=Hd;Fa=
e.call(this,ka,m,k);$b=Fa[0];wb=Fa[1];Qb=Fa[2];jc=Fa[3];k&&lb===$b&&Nb===wb&&hc===Qb&&Sc===jc||(lb=$b,Nb=wb,hc=Qb,Sc=jc,U.uniform4f(Za.location,$b,wb,Qb,jc));Bc=m.lineWidth;k&&Cc===Bc||(Cc=Bc,U.uniform1f(Qa.location,Bc));Dc=m.capSize;k&&Nc===Dc||(Nc=Dc,U.uniform1f(aa.location,Dc));cd=m.scale;Tc=cd[0];Kb=cd[1];k&&Oc===Tc&&Fb===Kb||(Oc=Tc,Fb=Kb,U.uniform2f(T.location,Tc,Kb));Pc=m.scaleFract;Hc=Pc[0];ic=Pc[1];k&&Uc===Hc&&Xc===ic||(Uc=Hc,Xc=ic,U.uniform2f(ma.location,Hc,ic));fd=m.translate;xe=fd[0];Yc=
fd[1];k&&he===xe&&Jf===Yc||(he=xe,Jf=Yc,U.uniform2f(N.location,xe,Yc));ke=m.translateFract;ve=ke[0];Td=ke[1];k&&ue===ve&&Fd===Td||(ue=ve,Fd=Td,U.uniform2f(Rb.location,ve,Td));Dd=m.opacity;k&&hd===Dd||(hd=Dd,U.uniform1f(X.location,Dd));Ec=m.count;0<Ec?Eb?f.drawElementsInstancedANGLE(4,36,Eb.type,Wa<<(Eb.type-5121>>1),Ec):f.drawArraysInstancedANGLE(4,Wa,36,Ec):0>Ec&&(Eb?U.drawElements(4,36,Eb.type,Wa<<(Eb.type-5121>>1)):U.drawArrays(4,Wa,36));ka.viewportWidth=bb;ka.viewportHeight=wc;Ma&&u.destroyStream(mb);
Ua&&u.destroyStream(ab);hb&&u.destroyStream(ya);Ba&&u.destroyStream(kb)}ca.dirty=!0;dc.setVAO(null);g&&(y.cpuTime+=performance.now()-h)},draw:function(b){var c,d,e,g,h,f,k,m,n,q,J,A,z,B,M,I,H,Q,P,V,oa,ea,fa,pa,Ia,ra,zc,vc,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Yb,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,qc,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc;c=Ga.next;c!==Ga.cur&&(c?U.bindFramebuffer(36160,c.framebuffer):U.bindFramebuffer(36160,
null),Ga.cur=c);if(ca.dirty){var Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb;Da=da.dither;Da!==ca.dither&&(Da?U.enable(3024):U.disable(3024),ca.dither=Da);ob=da.depth_func;ob!==ca.depth_func&&(U.depthFunc(ob),ca.depth_func=ob);pb=Qc[0];Xa=Qc[1];if(pb!==Zc[0]||Xa!==Zc[1])U.depthRange(pb,Xa),Zc[0]=pb,Zc[1]=Xa;Ya=da.depth_mask;Ya!==ca.depth_mask&&(U.depthMask(Ya),ca.depth_mask=Ya);nc=Ca[0];ed=Ca[1];tc=Ca[2];Va=Ca[3];if(nc!==sb[0]||ed!==sb[1]||tc!==
sb[2]||Va!==sb[3])U.colorMask(nc,ed,tc,Va),sb[0]=nc,sb[1]=ed,sb[2]=tc,sb[3]=Va;Mb=da.cull_enable;Mb!==ca.cull_enable&&(Mb?U.enable(2884):U.disable(2884),ca.cull_enable=Mb);bd=da.cull_face;bd!==ca.cull_face&&(U.cullFace(bd),ca.cull_face=bd);Ea=da.frontFace;Ea!==ca.frontFace&&(U.frontFace(Ea),ca.frontFace=Ea);xc=da.lineWidth;xc!==ca.lineWidth&&(U.lineWidth(xc),ca.lineWidth=xc);Pa=da.polygonOffset_enable;Pa!==ca.polygonOffset_enable&&(Pa?U.enable(32823):U.disable(32823),ca.polygonOffset_enable=Pa);Ba=
E[0];kb=E[1];if(Ba!==v[0]||kb!==v[1])U.polygonOffset(Ba,kb),v[0]=Ba,v[1]=kb;ub=da.sample_alpha;ub!==ca.sample_alpha&&(ub?U.enable(32926):U.disable(32926),ca.sample_alpha=ub);Cb=da.sample_enable;Cb!==ca.sample_enable&&(Cb?U.enable(32928):U.disable(32928),ca.sample_enable=Cb);qb=ha[0];uc=ha[1];if(qb!==ta[0]||uc!==ta[1])U.sampleCoverage(qb,uc),ta[0]=qb,ta[1]=uc;vb=da.stencil_enable;vb!==ca.stencil_enable&&(vb?U.enable(2960):U.disable(2960),ca.stencil_enable=vb);vd=da.stencil_mask;vd!==ca.stencil_mask&&
(U.stencilMask(vd),ca.stencil_mask=vd);sc=qa[0];Hd=qa[1];Mc=qa[2];if(sc!==G[0]||Hd!==G[1]||Mc!==G[2])U.stencilFunc(sc,Hd,Mc),G[0]=sc,G[1]=Hd,G[2]=Mc;id=R[0];wd=R[1];Wb=R[2];cc=R[3];if(id!==wa[0]||wd!==wa[1]||Wb!==wa[2]||cc!==wa[3])U.stencilOpSeparate(id,wd,Wb,cc),wa[0]=id,wa[1]=wd,wa[2]=Wb,wa[3]=cc;Pb=t[0];Fa=t[1];$b=t[2];lb=t[3];if(Pb!==ba[0]||Fa!==ba[1]||$b!==ba[2]||lb!==ba[3])U.stencilOpSeparate(Pb,Fa,$b,lb),ba[0]=Pb,ba[1]=Fa,ba[2]=$b,ba[3]=lb}d=b.viewport;e=d.x|0;g=d.y|0;h="width"in d?d.width|
0:ka.framebufferWidth-e;f="height"in d?d.height|0:ka.framebufferHeight-g;k=ka.viewportWidth;ka.viewportWidth=h;m=ka.viewportHeight;ka.viewportHeight=f;U.viewport(e,g,h,f);l[0]=e;l[1]=g;l[2]=h;l[3]=f;U.blendColor(0,0,0,0);sd[0]=0;sd[1]=0;sd[2]=0;sd[3]=0;U.enable(3042);ca.blend_enable=!0;U.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;U.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;U.disable(2929);ca.depth_enable=!1;n=b.viewport;q=n.x|0;J=n.y|0;A="width"in n?n.width|
0:ka.framebufferWidth-q;z="height"in n?n.height|0:ka.framebufferHeight-J;U.scissor(q,J,A,z);ga[0]=q;ga[1]=J;ga[2]=A;ga[3]=z;U.enable(3089);ca.scissor_enable=!0;if(B=ca.profile)M=performance.now(),y.count++;U.useProgram(x.program);I=fc.angle_instanced_arrays;dc.setVAO(null);H=a.call(this,ka,b,0);Hb.offset=H;Q=!1;P=null;V=0;oa=!1;fa=ea=0;pa=1;Ia=0;ra=5126;Lc=Rc=vc=zc=0;rb(Hb)?(Q=!0,P=u.createStream(34962,Hb),ra=P.dtype):(P=u.getBuffer(Hb))?ra=P.dtype:"constant"in Hb?(pa=2,"number"===typeof Hb.constant?
(vc=Hb.constant,Rc=Lc=zc=0):(vc=0<Hb.constant.length?Hb.constant[0]:0,Rc=1<Hb.constant.length?Hb.constant[1]:0,Lc=2<Hb.constant.length?Hb.constant[2]:0,zc=3<Hb.constant.length?Hb.constant[3]:0)):(P=rb(Hb.buffer)?u.createStream(34962,Hb.buffer):u.getBuffer(Hb.buffer),ra="type"in Hb?lc[Hb.type]:P.dtype,oa=!!Hb.normalized,fa=Hb.size|0,ea=Hb.offset|0,Ia=Hb.stride|0,V=Hb.divisor|0);rc=K.location;fb=S[rc];if(1===pa){fb.buffer||U.enableVertexAttribArray(rc);kc=fa||2;if(fb.type!==ra||fb.size!==kc||fb.buffer!==
P||fb.normalized!==oa||fb.offset!==ea||fb.stride!==Ia)U.bindBuffer(34962,P.buffer),U.vertexAttribPointer(rc,kc,ra,oa,Ia,ea),fb.type=ra,fb.size=kc,fb.buffer=P,fb.normalized=oa,fb.offset=ea,fb.stride=Ia;fb.divisor!==V&&(I.vertexAttribDivisorANGLE(rc,V),fb.divisor=V)}else if(fb.buffer&&(U.disableVertexAttribArray(rc),fb.buffer=null),fb.x!==vc||fb.y!==Rc||fb.z!==Lc||fb.w!==zc)U.vertexAttrib4f(rc,vc,Rc,Lc,zc),fb.x=vc,fb.y=Rc,fb.z=Lc,fb.w=zc;Db=w.call(this,ka,b,0);xb.offset=Db;pc=!1;Ta=null;Jc=0;bc=!1;
Yb=$c=0;md=1;Ac=0;Zb=5126;Eb=La=ad=Fc=0;rb(xb)?(pc=!0,Ta=u.createStream(34962,xb),Zb=Ta.dtype):(Ta=u.getBuffer(xb))?Zb=Ta.dtype:"constant"in xb?(md=2,"number"===typeof xb.constant?(ad=xb.constant,La=Eb=Fc=0):(ad=0<xb.constant.length?xb.constant[0]:0,La=1<xb.constant.length?xb.constant[1]:0,Eb=2<xb.constant.length?xb.constant[2]:0,Fc=3<xb.constant.length?xb.constant[3]:0)):(Ta=rb(xb.buffer)?u.createStream(34962,xb.buffer):u.getBuffer(xb.buffer),Zb="type"in xb?lc[xb.type]:Ta.dtype,bc=!!xb.normalized,
Yb=xb.size|0,$c=xb.offset|0,Ac=xb.stride|0,Jc=xb.divisor|0);Wa=L.location;ua=S[Wa];if(1===md){ua.buffer||U.enableVertexAttribArray(Wa);td=Yb||2;if(ua.type!==Zb||ua.size!==td||ua.buffer!==Ta||ua.normalized!==bc||ua.offset!==$c||ua.stride!==Ac)U.bindBuffer(34962,Ta.buffer),U.vertexAttribPointer(Wa,td,Zb,bc,Ac,$c),ua.type=Zb,ua.size=td,ua.buffer=Ta,ua.normalized=bc,ua.offset=$c,ua.stride=Ac;ua.divisor!==Jc&&(I.vertexAttribDivisorANGLE(Wa,Jc),ua.divisor=Jc)}else if(ua.buffer&&(U.disableVertexAttribArray(Wa),
ua.buffer=null),ua.x!==ad||ua.y!==La||ua.z!==Eb||ua.w!==Fc)U.vertexAttrib4f(Wa,ad,La,Eb,Fc),ua.x=ad,ua.y=La,ua.z=Eb,ua.w=Fc;Ab=C.call(this,ka,b,0);p.offset=Ab;$a=!1;Gb=null;bb=0;wc=!1;qc=Sb=0;ac=1;Tb=0;rd=5126;tb=mb=Ma=Ub=0;rb(p)?($a=!0,Gb=u.createStream(34962,p),rd=Gb.dtype):(Gb=u.getBuffer(p))?rd=Gb.dtype:"constant"in p?(ac=2,"number"===typeof p.constant?(Ma=p.constant,mb=tb=Ub=0):(Ma=0<p.constant.length?p.constant[0]:0,mb=1<p.constant.length?p.constant[1]:0,tb=2<p.constant.length?p.constant[2]:
0,Ub=3<p.constant.length?p.constant[3]:0)):(Gb=rb(p.buffer)?u.createStream(34962,p.buffer):u.getBuffer(p.buffer),rd="type"in p?lc[p.type]:Gb.dtype,wc=!!p.normalized,qc=p.size|0,Sb=p.offset|0,Tb=p.stride|0,bb=p.divisor|0);gb=Xb.location;Oa=S[gb];if(1===ac){Oa.buffer||U.enableVertexAttribArray(gb);oc=qc||4;if(Oa.type!==rd||Oa.size!==oc||Oa.buffer!==Gb||Oa.normalized!==wc||Oa.offset!==Sb||Oa.stride!==Tb)U.bindBuffer(34962,Gb.buffer),U.vertexAttribPointer(gb,oc,rd,wc,Tb,Sb),Oa.type=rd,Oa.size=oc,Oa.buffer=
Gb,Oa.normalized=wc,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==bb&&(I.vertexAttribDivisorANGLE(gb,bb),Oa.divisor=bb)}else if(Oa.buffer&&(U.disableVertexAttribArray(gb),Oa.buffer=null),Oa.x!==Ma||Oa.y!==mb||Oa.z!==tb||Oa.w!==Ub)U.vertexAttrib4f(gb,Ma,mb,tb,Ub),Oa.x=Ma,Oa.y=mb,Oa.z=tb,Oa.w=Ub;Ib=W.call(this,ka,b,0);ia.offset=Ib;Vc=!1;cb=null;mc=0;Gc=!1;ib=ec=0;jb=1;sa=0;nb=5126;Aa=ab=Ua=va=0;rb(ia)?(Vc=!0,cb=u.createStream(34962,ia),nb=cb.dtype):(cb=u.getBuffer(ia))?nb=cb.dtype:"constant"in ia?(jb=2,"number"===
typeof ia.constant?(Ua=ia.constant,ab=Aa=va=0):(Ua=0<ia.constant.length?ia.constant[0]:0,ab=1<ia.constant.length?ia.constant[1]:0,Aa=2<ia.constant.length?ia.constant[2]:0,va=3<ia.constant.length?ia.constant[3]:0)):(cb=rb(ia.buffer)?u.createStream(34962,ia.buffer):u.getBuffer(ia.buffer),nb="type"in ia?lc[ia.type]:cb.dtype,Gc=!!ia.normalized,ib=ia.size|0,ec=ia.offset|0,sa=ia.stride|0,mc=ia.divisor|0);db=Ra.location;Ha=S[db];if(1===jb){Ha.buffer||U.enableVertexAttribArray(db);Bb=ib||4;if(Ha.type!==nb||
Ha.size!==Bb||Ha.buffer!==cb||Ha.normalized!==Gc||Ha.offset!==ec||Ha.stride!==sa)U.bindBuffer(34962,cb.buffer),U.vertexAttribPointer(db,Bb,nb,Gc,sa,ec),Ha.type=nb,Ha.size=Bb,Ha.buffer=cb,Ha.normalized=Gc,Ha.offset=ec,Ha.stride=sa;Ha.divisor!==mc&&(I.vertexAttribDivisorANGLE(db,mc),Ha.divisor=mc)}else if(Ha.buffer&&(U.disableVertexAttribArray(db),Ha.buffer=null),Ha.x!==Ua||Ha.y!==ab||Ha.z!==Aa||Ha.w!==va)U.vertexAttrib4f(db,Ua,ab,Aa,va),Ha.x=Ua,Ha.y=ab,Ha.z=Aa,Ha.w=va;yb=zb.location;Sa=S[yb];Sa.buffer||
U.enableVertexAttribArray(yb);if(5126!==Sa.type||2!==Sa.size||Sa.buffer!==O||!1!==Sa.normalized||0!==Sa.offset||24!==Sa.stride)U.bindBuffer(34962,O.buffer),U.vertexAttribPointer(yb,2,5126,!1,24,0),Sa.type=5126,Sa.size=2,Sa.buffer=O,Sa.normalized=!1,Sa.offset=0,Sa.stride=24;0!==Sa.divisor&&(I.vertexAttribDivisorANGLE(yb,0),Sa.divisor=0);Kc=na.location;Jb=S[Kc];Jb.buffer||U.enableVertexAttribArray(Kc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==F||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)U.bindBuffer(34962,
F.buffer),U.vertexAttribPointer(Kc,2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=F,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(I.vertexAttribDivisorANGLE(Kc,0),Jb.divisor=0);Lb=Z.location;Vb=S[Lb];Vb.buffer||U.enableVertexAttribArray(Lb);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==r||!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)U.bindBuffer(34962,r.buffer),U.vertexAttribPointer(Lb,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=r,Vb.normalized=!1,Vb.offset=16,Vb.stride=24;
0!==Vb.divisor&&(I.vertexAttribDivisorANGLE(Lb,0),Vb.divisor=0);xa=D.call(this,ka,b,0);U.uniform4f(Za.location,xa[0],xa[1],xa[2],xa[3]);U.uniform1f(Qa.location,b.lineWidth);U.uniform1f(aa.location,b.capSize);ce=b.scale;U.uniform2f(T.location,ce[0],ce[1]);Ja=b.scaleFract;U.uniform2f(ma.location,Ja[0],Ja[1]);Ob=b.translate;U.uniform2f(N.location,Ob[0],Ob[1]);eb=b.translateFract;U.uniform2f(Rb.location,eb[0],eb[1]);U.uniform1f(X.location,b.opacity);(hb=za.elements)?U.bindBuffer(34963,hb.buffer.buffer):
dc.currentVAO&&(hb=Na.getElements(dc.currentVAO.elements))&&U.bindBuffer(34963,hb.buffer.buffer);ya=za.offset;gc=b.count;0<gc?hb?I.drawElementsInstancedANGLE(4,36,hb.type,ya<<(hb.type-5121>>1),gc):I.drawArraysInstancedANGLE(4,ya,36,gc):0>gc&&(hb?U.drawElements(4,36,hb.type,ya<<(hb.type-5121>>1)):U.drawArrays(4,ya,36));ca.dirty=!0;dc.setVAO(null);ka.viewportWidth=k;ka.viewportHeight=m;B&&(y.cpuTime+=performance.now()-M);Q&&u.destroyStream(P);pc&&u.destroyStream(Ta);$a&&u.destroyStream(Gb);Vc&&u.destroyStream(cb)},
scope:function(b,a,c){var e,f,k,l,n,q,t,v,x,w,G,E,ba,I,D,M,Y,R,L,K,N,C,T,S,U,ga,ja,X,ha,Z,W,wa,ta,dc,fa,qa,pa,Ca,aa,la,Zb,Fc,ma,La,Eb,Wa,ua,sd,Ab,$a,na,bb,Ka,sb,Qc,ac,Tb,Za,Ub,Ma,mb,tb,gb,Oa,Qa,Ib,Na,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,Rb,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,Ga,sc,Zc,Mc,id,zb,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,xe,he,Yc,fc,Xb,Ra,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,
Xe,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Ke,Oe,Le,re,Be,Fe,Ge,He,Ce,Gd;e=b.viewport;f=e.x|0;k=e.y|0;l="width"in e?e.width|0:ka.framebufferWidth-f;n="height"in e?e.height|0:ka.framebufferHeight-k;q=ka.viewportWidth;ka.viewportWidth=l;t=ka.viewportHeight;ka.viewportHeight=n;v=oa[0];oa[0]=f;x=oa[1];oa[1]=k;w=oa[2];oa[2]=l;G=oa[3];oa[3]=n;E=qc[0];qc[0]=0;ba=qc[1];qc[1]=0;I=qc[2];qc[2]=0;D=qc[3];qc[3]=0;M=da.blend_enable;da.blend_enable=!0;Y=vc[0];vc[0]=32774;R=vc[1];vc[1]=32774;
L=J[0];J[0]=770;K=J[1];J[1]=771;N=J[2];J[2]=773;C=J[3];J[3]=1;T=da.depth_enable;da.depth_enable=!1;S=b.viewport;U=S.x|0;ga=S.y|0;ja="width"in S?S.width|0:ka.framebufferWidth-U;X="height"in S?S.height|0:ka.framebufferHeight-ga;ha=V[0];V[0]=U;Z=V[1];V[1]=ga;W=V[2];V[2]=ja;wa=V[3];V[3]=X;ta=da.scissor_enable;da.scissor_enable=!0;if(dc=ca.profile)fa=performance.now(),y.count++;qa=za.count;za.count=36;pa=b.count;Ca=za.instances;za.instances=pa;aa=za.primitive;za.primitive=4;la=b.capSize;Zb=Yb[5];Yb[5]=
la;Fc=b.lineWidth;ma=Yb[4];Yb[4]=Fc;La=b.opacity;Eb=Yb[10];Yb[10]=La;Wa=b.range;ua=Yb[18];Yb[18]=Wa;sd=b.scale;Ab=Yb[6];Yb[6]=sd;$a=b.scaleFract;na=Yb[7];Yb[7]=$a;bb=b.translate;Ka=Yb[8];Yb[8]=bb;sb=b.translateFract;Qc=Yb[9];Yb[9]=sb;ac=z.call(this,ka,b,c);Tb=Yb[3];Yb[3]=ac;Za=B.buffer;B.buffer=r;Ub=B.divisor;B.divisor=0;Ma=B.normalized;B.normalized=!1;mb=B.offset;B.offset=16;tb=B.size;B.size=0;gb=B.state;B.state=1;Oa=B.stride;B.stride=24;Qa=B.type;B.type=5126;Ib=B.w;B.w=0;Na=B.x;B.x=0;cb=B.y;B.y=
0;mc=B.z;B.z=0;Gc=H.call(this,ka,b,c);ia.offset=Gc;ec=!1;ib=null;jb=0;sa=!1;va=nb=0;Ua=1;ab=0;Aa=5126;yb=Bb=Ha=db=0;rb(ia)?(ec=!0,ib=u.createStream(34962,ia),Aa=ib.dtype):(ib=u.getBuffer(ia))?Aa=ib.dtype:"constant"in ia?(Ua=2,"number"===typeof ia.constant?(Ha=ia.constant,Bb=yb=db=0):(Ha=0<ia.constant.length?ia.constant[0]:0,Bb=1<ia.constant.length?ia.constant[1]:0,yb=2<ia.constant.length?ia.constant[2]:0,db=3<ia.constant.length?ia.constant[3]:0)):(ib=rb(ia.buffer)?u.createStream(34962,ia.buffer):
u.getBuffer(ia.buffer),Aa="type"in ia?lc[ia.type]:ib.dtype,sa=!!ia.normalized,va=ia.size|0,nb=ia.offset|0,ab=ia.stride|0,jb=ia.divisor|0);Sa=m.buffer;m.buffer=ib;Kc=m.divisor;m.divisor=jb;Jb=m.normalized;m.normalized=sa;Lb=m.offset;m.offset=nb;Vb=m.size;m.size=va;xa=m.state;m.state=Ua;Rb=m.stride;m.stride=ab;Ja=m.type;m.type=Aa;Ob=m.w;m.w=db;eb=m.x;m.x=Ha;hb=m.y;m.y=Bb;ya=m.z;m.z=yb;gc=Q.buffer;Q.buffer=O;Da=Q.divisor;Q.divisor=0;ob=Q.normalized;Q.normalized=!1;pb=Q.offset;Q.offset=0;Xa=Q.size;Q.size=
0;Ya=Q.state;Q.state=1;nc=Q.stride;Q.stride=24;ed=Q.type;Q.type=5126;tc=Q.w;Q.w=0;Va=Q.x;Q.x=0;Mb=Q.y;Q.y=0;bd=Q.z;Q.z=0;Ea=Ia.call(this,ka,b,c);p.offset=Ea;xc=!1;Pa=null;Ba=0;kb=!1;Cb=ub=0;qb=1;uc=0;vb=5126;Mc=Zc=sc=Ga=0;rb(p)?(xc=!0,Pa=u.createStream(34962,p),vb=Pa.dtype):(Pa=u.getBuffer(p))?vb=Pa.dtype:"constant"in p?(qb=2,"number"===typeof p.constant?(sc=p.constant,Zc=Mc=Ga=0):(sc=0<p.constant.length?p.constant[0]:0,Zc=1<p.constant.length?p.constant[1]:0,Mc=2<p.constant.length?p.constant[2]:0,
Ga=3<p.constant.length?p.constant[3]:0)):(Pa=rb(p.buffer)?u.createStream(34962,p.buffer):u.getBuffer(p.buffer),vb="type"in p?lc[p.type]:Pa.dtype,kb=!!p.normalized,Cb=p.size|0,ub=p.offset|0,uc=p.stride|0,Ba=p.divisor|0);id=h.buffer;h.buffer=Pa;zb=h.divisor;h.divisor=Ba;Wb=h.normalized;h.normalized=kb;cc=h.offset;h.offset=ub;Pb=h.size;h.size=Cb;Fa=h.state;h.state=qb;$b=h.stride;h.stride=uc;lb=h.type;h.type=vb;wb=h.w;h.w=Ga;Nb=h.x;h.x=sc;Qb=h.y;h.y=Zc;hc=h.z;h.z=Mc;jc=g.buffer;g.buffer=F;Sc=g.divisor;
g.divisor=0;Bc=g.normalized;g.normalized=!1;Cc=g.offset;g.offset=8;Dc=g.size;g.size=0;Nc=g.state;g.state=1;cd=g.stride;g.stride=24;Tc=g.type;g.type=5126;Oc=g.w;g.w=0;Kb=g.x;g.x=0;Fb=g.y;g.y=0;Pc=g.z;g.z=0;Hc=d.call(this,ka,b,c);Hb.offset=Hc;Uc=!1;ic=null;Xc=0;fd=!1;he=xe=0;Yc=1;fc=0;Xb=5126;Fd=Td=ue=Ra=0;rb(Hb)?(Uc=!0,ic=u.createStream(34962,Hb),Xb=ic.dtype):(ic=u.getBuffer(Hb))?Xb=ic.dtype:"constant"in Hb?(Yc=2,"number"===typeof Hb.constant?(ue=Hb.constant,Td=Fd=Ra=0):(ue=0<Hb.constant.length?Hb.constant[0]:
0,Td=1<Hb.constant.length?Hb.constant[1]:0,Fd=2<Hb.constant.length?Hb.constant[2]:0,Ra=3<Hb.constant.length?Hb.constant[3]:0)):(ic=rb(Hb.buffer)?u.createStream(34962,Hb.buffer):u.getBuffer(Hb.buffer),Xb="type"in Hb?lc[Hb.type]:ic.dtype,fd=!!Hb.normalized,he=Hb.size|0,xe=Hb.offset|0,fc=Hb.stride|0,Xc=Hb.divisor|0);Dd=A.buffer;A.buffer=ic;hd=A.divisor;A.divisor=Xc;Ec=A.normalized;A.normalized=fd;nd=A.offset;A.offset=xe;jd=A.size;A.size=he;dd=A.state;A.state=Yc;kd=A.stride;A.stride=fc;Ad=A.type;A.type=
Xb;Bd=A.w;A.w=Ra;Xe=A.x;A.x=ue;ne=A.y;A.y=Td;Ue=A.z;A.z=Fd;ee=P.call(this,ka,b,c);xb.offset=ee;de=!1;ae=null;pe=0;Yd=!1;yc=ie=0;Wc=1;qe=0;le=5126;Nd=Md=Kd=Ed=0;rb(xb)?(de=!0,ae=u.createStream(34962,xb),le=ae.dtype):(ae=u.getBuffer(xb))?le=ae.dtype:"constant"in xb?(Wc=2,"number"===typeof xb.constant?(Kd=xb.constant,Md=Nd=Ed=0):(Kd=0<xb.constant.length?xb.constant[0]:0,Md=1<xb.constant.length?xb.constant[1]:0,Nd=2<xb.constant.length?xb.constant[2]:0,Ed=3<xb.constant.length?xb.constant[3]:0)):(ae=rb(xb.buffer)?
u.createStream(34962,xb.buffer):u.getBuffer(xb.buffer),le="type"in xb?lc[xb.type]:ae.dtype,Yd=!!xb.normalized,yc=xb.size|0,ie=xb.offset|0,qe=xb.stride|0,pe=xb.divisor|0);je=ea.buffer;ea.buffer=ae;Ee=ea.divisor;ea.divisor=pe;we=ea.normalized;ea.normalized=Yd;oe=ea.offset;ea.offset=ie;Ke=ea.size;ea.size=yc;Oe=ea.state;ea.state=Wc;Le=ea.stride;ea.stride=qe;re=ea.type;ea.type=le;Be=ea.w;ea.w=Ed;Fe=ea.x;ea.x=Kd;Ge=ea.y;ea.y=Md;He=ea.z;ea.z=Nd;Ce=ra.vert;ra.vert=2;Gd=ra.frag;ra.frag=1;ca.dirty=!0;a(ka,
b,c);ka.viewportWidth=q;ka.viewportHeight=t;oa[0]=v;oa[1]=x;oa[2]=w;oa[3]=G;qc[0]=E;qc[1]=ba;qc[2]=I;qc[3]=D;da.blend_enable=M;vc[0]=Y;vc[1]=R;J[0]=L;J[1]=K;J[2]=N;J[3]=C;da.depth_enable=T;V[0]=ha;V[1]=Z;V[2]=W;V[3]=wa;da.scissor_enable=ta;dc&&(y.cpuTime+=performance.now()-fa);za.count=qa;za.instances=Ca;za.primitive=aa;Yb[5]=Zb;Yb[4]=ma;Yb[10]=Eb;Yb[18]=ua;Yb[6]=Ab;Yb[7]=na;Yb[8]=Ka;Yb[9]=Qc;Yb[3]=Tb;B.buffer=Za;B.divisor=Ub;B.normalized=Ma;B.offset=mb;B.size=tb;B.state=gb;B.stride=Oa;B.type=Qa;
B.w=Ib;B.x=Na;B.y=cb;B.z=mc;ec&&u.destroyStream(ib);m.buffer=Sa;m.divisor=Kc;m.normalized=Jb;m.offset=Lb;m.size=Vb;m.state=xa;m.stride=Rb;m.type=Ja;m.w=Ob;m.x=eb;m.y=hb;m.z=ya;Q.buffer=gc;Q.divisor=Da;Q.normalized=ob;Q.offset=pb;Q.size=Xa;Q.state=Ya;Q.stride=nc;Q.type=ed;Q.w=tc;Q.x=Va;Q.y=Mb;Q.z=bd;xc&&u.destroyStream(Pa);h.buffer=id;h.divisor=zb;h.normalized=Wb;h.offset=cc;h.size=Pb;h.state=Fa;h.stride=$b;h.type=lb;h.w=wb;h.x=Nb;h.y=Qb;h.z=hc;g.buffer=jc;g.divisor=Sc;g.normalized=Bc;g.offset=Cc;
g.size=Dc;g.state=Nc;g.stride=cd;g.type=Tc;g.w=Oc;g.x=Kb;g.y=Fb;g.z=Pc;Uc&&u.destroyStream(ic);A.buffer=Dd;A.divisor=hd;A.normalized=Ec;A.offset=nd;A.size=jd;A.state=dd;A.stride=kd;A.type=Ad;A.w=Bd;A.x=Xe;A.y=ne;A.z=Ue;de&&u.destroyStream(ae);ea.buffer=je;ea.divisor=Ee;ea.normalized=we;ea.offset=oe;ea.size=Ke;ea.state=Oe;ea.stride=Le;ea.type=re;ea.w=Be;ea.x=Fe;ea.y=Ge;ea.z=He;ra.vert=Ce;ra.frag=Gd;ca.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(k,
y,q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,Ia,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,aa,Ra,zb){var Xb,na,Qa,X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra,Yb,dc,qc,sd,vc,Y,J,ja,Ca,sb,Qc,Zc,E,v,ha,ta,V,ga,qa,G,t;Xb=k.attributes;na=k.buffer;Qa=k.context;X=k.current;K=k.draw;L=k.elements;T=k.extensions;ma=k.framebuffer;N=k.gl;Rb=k.isBufferArgs;Za=k.next;S=k.shader;u=k.uniforms;ka=k.vao;ca=Za.blend_color;za=X.blend_color;Na=Za.blend_equation;fc=X.blend_equation;Ga=Za.blend_func;U=X.blend_func;rb=Za.colorMask;da=
X.colorMask;ra=Za.depth_range;Yb=X.depth_range;dc=Za.polygonOffset_offset;qc=X.polygonOffset_offset;sd=Za.sample_coverage;vc=X.sample_coverage;Y=Za.scissor_box;J=X.scissor_box;ja=Za.stencil_func;Ca=X.stencil_func;sb=Za.stencil_opBack;Qc=X.stencil_opBack;Zc=Za.stencil_opFront;E=X.stencil_opFront;v=Za.viewport;ha=X.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V={divisor:1,offset:8,stride:8};ga={divisor:1,offset:8,stride:8};qa={divisor:1,
offset:16,stride:8};G={divisor:1,offset:16,stride:8};t={divisor:1,offset:0,stride:4};return{batch:function(a,k){var q,u,l,v,r,p;q=ma.next;q!==ma.cur&&(q?N.bindFramebuffer(36160,q.framebuffer):N.bindFramebuffer(36160,null),ma.cur=q);if(X.dirty){var x,w,z,I,D,B,Y,F,O,C,S,W,ca,la,Ld,Ze,Na,bf,xd,De,Rd,Sd,$d,Vd,pd,ld,ud,od,gd,zc,qd,Rc;x=Za.dither;x!==X.dither&&(x?N.enable(3024):N.disable(3024),X.dither=x);w=Za.depth_func;w!==X.depth_func&&(N.depthFunc(w),X.depth_func=w);z=ra[0];I=ra[1];if(z!==Yb[0]||I!==
Yb[1])N.depthRange(z,I),Yb[0]=z,Yb[1]=I;D=Za.depth_mask;D!==X.depth_mask&&(N.depthMask(D),X.depth_mask=D);B=rb[0];Y=rb[1];F=rb[2];O=rb[3];if(B!==da[0]||Y!==da[1]||F!==da[2]||O!==da[3])N.colorMask(B,Y,F,O),da[0]=B,da[1]=Y,da[2]=F,da[3]=O;C=Za.cull_enable;C!==X.cull_enable&&(C?N.enable(2884):N.disable(2884),X.cull_enable=C);S=Za.cull_face;S!==X.cull_face&&(N.cullFace(S),X.cull_face=S);W=Za.frontFace;W!==X.frontFace&&(N.frontFace(W),X.frontFace=W);ca=Za.lineWidth;ca!==X.lineWidth&&(N.lineWidth(ca),X.lineWidth=
ca);la=Za.polygonOffset_enable;la!==X.polygonOffset_enable&&(la?N.enable(32823):N.disable(32823),X.polygonOffset_enable=la);Ld=dc[0];Ze=dc[1];if(Ld!==qc[0]||Ze!==qc[1])N.polygonOffset(Ld,Ze),qc[0]=Ld,qc[1]=Ze;Na=Za.sample_alpha;Na!==X.sample_alpha&&(Na?N.enable(32926):N.disable(32926),X.sample_alpha=Na);bf=Za.sample_enable;bf!==X.sample_enable&&(bf?N.enable(32928):N.disable(32928),X.sample_enable=bf);xd=sd[0];De=sd[1];if(xd!==vc[0]||De!==vc[1])N.sampleCoverage(xd,De),vc[0]=xd,vc[1]=De;Rd=Za.stencil_mask;
Rd!==X.stencil_mask&&(N.stencilMask(Rd),X.stencil_mask=Rd);Sd=ja[0];$d=ja[1];Vd=ja[2];if(Sd!==Ca[0]||$d!==Ca[1]||Vd!==Ca[2])N.stencilFunc(Sd,$d,Vd),Ca[0]=Sd,Ca[1]=$d,Ca[2]=Vd;pd=Zc[0];ld=Zc[1];ud=Zc[2];od=Zc[3];if(pd!==E[0]||ld!==E[1]||ud!==E[2]||od!==E[3])N.stencilOpSeparate(pd,ld,ud,od),E[0]=pd,E[1]=ld,E[2]=ud,E[3]=od;gd=sb[0];zc=sb[1];qd=sb[2];Rc=sb[3];if(gd!==Qc[0]||zc!==Qc[1]||qd!==Qc[2]||Rc!==Qc[3])N.stencilOpSeparate(gd,zc,qd,Rc),Qc[0]=gd,Qc[1]=zc,Qc[2]=qd,Qc[3]=Rc}N.blendColor(0,0,0,0);za[0]=
0;za[1]=0;za[2]=0;za[3]=0;N.enable(3042);X.blend_enable=!0;N.blendEquationSeparate(32774,32774);fc[0]=32774;fc[1]=32774;N.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;N.enable(3089);X.scissor_enable=!0;N.disable(2960);X.stencil_enable=!1;if(u=X.profile)l=performance.now(),y.count+=k;N.useProgram(H.program);v=T.angle_instanced_arrays;var Lc,rc,fb,kc,Db;ka.setVAO(null);Lc=pa.location;rc=Xb[Lc];rc.buffer||N.enableVertexAttribArray(Lc);if(5126!==rc.type||1!==rc.size||rc.buffer!==
f||!1!==rc.normalized||0!==rc.offset||8!==rc.stride)N.bindBuffer(34962,f.buffer),N.vertexAttribPointer(Lc,1,5126,!1,8,0),rc.type=5126,rc.size=1,rc.buffer=f,rc.normalized=!1,rc.offset=0,rc.stride=8;0!==rc.divisor&&(v.vertexAttribDivisorANGLE(Lc,0),rc.divisor=0);fb=M.location;kc=Xb[fb];kc.buffer||N.enableVertexAttribArray(fb);if(5126!==kc.type||1!==kc.size||kc.buffer!==c||!1!==kc.normalized||4!==kc.offset||8!==kc.stride)N.bindBuffer(34962,c.buffer),N.vertexAttribPointer(fb,1,5126,!1,8,4),kc.type=5126,
kc.size=1,kc.buffer=c,kc.normalized=!1,kc.offset=4,kc.stride=8;0!==kc.divisor&&(v.vertexAttribDivisorANGLE(fb,0),kc.divisor=0);(Db=K.elements)?N.bindBuffer(34963,Db.buffer.buffer):ka.currentVAO&&(Db=L.getElements(ka.currentVAO.elements))&&N.bindBuffer(34963,Db.buffer.buffer);for(r=0;r<k;++r){p=a[r];var pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,Ga,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob,
pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,xe,he,Yc,Jf,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd;pc=p.viewport;Ta=pc.x|0;Jc=pc.y|0;bc="width"in pc?pc.width|0:Qa.framebufferWidth-Ta;$c="height"in pc?pc.height|0:Qa.framebufferHeight-Jc;Cd=Qa.viewportWidth;Qa.viewportWidth=bc;md=Qa.viewportHeight;Qa.viewportHeight=$c;N.viewport(Ta,Jc,bc,$c);ha[0]=Ta;ha[1]=Jc;ha[2]=bc;ha[3]=$c;(Ac=m.call(this,Qa,p,
r))?N.enable(2929):N.disable(2929);X.depth_enable=Ac;Zb=p.viewport;Fc=Zb.x|0;ad=Zb.y|0;La="width"in Zb?Zb.width|0:Qa.framebufferWidth-Fc;Eb="height"in Zb?Zb.height|0:Qa.framebufferHeight-ad;N.scissor(Fc,ad,La,Eb);J[0]=Fc;J[1]=ad;J[2]=La;J[3]=Eb;V.buffer=p.positionBuffer;Wa=!1;ua=null;td=0;Ab=!1;Gb=$a=0;bb=1;wc=0;Sb=5126;rd=Tb=ac=Ga=0;Rb(V)?(Wa=!0,ua=na.createStream(34962,V),Sb=ua.dtype):(ua=na.getBuffer(V))?Sb=ua.dtype:"constant"in V?(bb=2,"number"===typeof V.constant?(ac=V.constant,Tb=rd=Ga=0):(ac=
0<V.constant.length?V.constant[0]:0,Tb=1<V.constant.length?V.constant[1]:0,rd=2<V.constant.length?V.constant[2]:0,Ga=3<V.constant.length?V.constant[3]:0)):(ua=Rb(V.buffer)?na.createStream(34962,V.buffer):na.getBuffer(V.buffer),Sb="type"in V?ta[V.type]:ua.dtype,Ab=!!V.normalized,Gb=V.size|0,$a=V.offset|0,wc=V.stride|0,td=V.divisor|0);Ub=Ia.location;Ma=Xb[Ub];if(1===bb){Ma.buffer||N.enableVertexAttribArray(Ub);mb=Gb||2;if(Ma.type!==Sb||Ma.size!==mb||Ma.buffer!==ua||Ma.normalized!==Ab||Ma.offset!==$a||
Ma.stride!==wc)N.bindBuffer(34962,ua.buffer),N.vertexAttribPointer(Ub,mb,Sb,Ab,wc,$a),Ma.type=Sb,Ma.size=mb,Ma.buffer=ua,Ma.normalized=Ab,Ma.offset=$a,Ma.stride=wc;Ma.divisor!==td&&(v.vertexAttribDivisorANGLE(Ub,td),Ma.divisor=td)}else if(Ma.buffer&&(N.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==ac||Ma.y!==Tb||Ma.z!==rd||Ma.w!==Ga)N.vertexAttrib4f(Ub,ac,Tb,rd,Ga),Ma.x=ac,Ma.y=Tb,Ma.z=rd,Ma.w=Ga;qa.buffer=p.positionBuffer;tb=!1;gb=null;Oa=0;oc=!1;Vc=Ib=0;cb=1;mc=0;Gc=5126;sa=jb=ib=ec=0;Rb(qa)?
(tb=!0,gb=na.createStream(34962,qa),Gc=gb.dtype):(gb=na.getBuffer(qa))?Gc=gb.dtype:"constant"in qa?(cb=2,"number"===typeof qa.constant?(ib=qa.constant,jb=sa=ec=0):(ib=0<qa.constant.length?qa.constant[0]:0,jb=1<qa.constant.length?qa.constant[1]:0,sa=2<qa.constant.length?qa.constant[2]:0,ec=3<qa.constant.length?qa.constant[3]:0)):(gb=Rb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),Gc="type"in qa?ta[qa.type]:gb.dtype,oc=!!qa.normalized,Vc=qa.size|0,Ib=qa.offset|0,mc=qa.stride|
0,Oa=qa.divisor|0);nb=g.location;va=Xb[nb];if(1===cb){va.buffer||N.enableVertexAttribArray(nb);Ua=Vc||2;if(va.type!==Gc||va.size!==Ua||va.buffer!==gb||va.normalized!==oc||va.offset!==Ib||va.stride!==mc)N.bindBuffer(34962,gb.buffer),N.vertexAttribPointer(nb,Ua,Gc,oc,mc,Ib),va.type=Gc,va.size=Ua,va.buffer=gb,va.normalized=oc,va.offset=Ib,va.stride=mc;va.divisor!==Oa&&(v.vertexAttribDivisorANGLE(nb,Oa),va.divisor=Oa)}else if(va.buffer&&(N.disableVertexAttribArray(nb),va.buffer=null),va.x!==ib||va.y!==
jb||va.z!==sa||va.w!==ec)N.vertexAttrib4f(nb,ib,jb,sa,ec),va.x=ib,va.y=jb,va.z=sa,va.w=ec;ga.buffer=p.positionFractBuffer;ab=!1;Aa=null;db=0;Ha=!1;yb=Bb=0;Sa=1;Kc=0;Jb=5126;ce=xa=Vb=Lb=0;Rb(ga)?(ab=!0,Aa=na.createStream(34962,ga),Jb=Aa.dtype):(Aa=na.getBuffer(ga))?Jb=Aa.dtype:"constant"in ga?(Sa=2,"number"===typeof ga.constant?(Vb=ga.constant,xa=ce=Lb=0):(Vb=0<ga.constant.length?ga.constant[0]:0,xa=1<ga.constant.length?ga.constant[1]:0,ce=2<ga.constant.length?ga.constant[2]:0,Lb=3<ga.constant.length?
ga.constant[3]:0)):(Aa=Rb(ga.buffer)?na.createStream(34962,ga.buffer):na.getBuffer(ga.buffer),Jb="type"in ga?ta[ga.type]:Aa.dtype,Ha=!!ga.normalized,yb=ga.size|0,Bb=ga.offset|0,Kc=ga.stride|0,db=ga.divisor|0);Ja=h.location;Ob=Xb[Ja];if(1===Sa){Ob.buffer||N.enableVertexAttribArray(Ja);eb=yb||2;if(Ob.type!==Jb||Ob.size!==eb||Ob.buffer!==Aa||Ob.normalized!==Ha||Ob.offset!==Bb||Ob.stride!==Kc)N.bindBuffer(34962,Aa.buffer),N.vertexAttribPointer(Ja,eb,Jb,Ha,Kc,Bb),Ob.type=Jb,Ob.size=eb,Ob.buffer=Aa,Ob.normalized=
Ha,Ob.offset=Bb,Ob.stride=Kc;Ob.divisor!==db&&(v.vertexAttribDivisorANGLE(Ja,db),Ob.divisor=db)}else if(Ob.buffer&&(N.disableVertexAttribArray(Ja),Ob.buffer=null),Ob.x!==Vb||Ob.y!==xa||Ob.z!==ce||Ob.w!==Lb)N.vertexAttrib4f(Ja,Vb,xa,ce,Lb),Ob.x=Vb,Ob.y=xa,Ob.z=ce,Ob.w=Lb;G.buffer=p.positionFractBuffer;hb=!1;ya=null;gc=0;Da=!1;pb=ob=0;Xa=1;Ya=0;nc=5126;Mb=Va=tc=ed=0;Rb(G)?(hb=!0,ya=na.createStream(34962,G),nc=ya.dtype):(ya=na.getBuffer(G))?nc=ya.dtype:"constant"in G?(Xa=2,"number"===typeof G.constant?
(tc=G.constant,Va=Mb=ed=0):(tc=0<G.constant.length?G.constant[0]:0,Va=1<G.constant.length?G.constant[1]:0,Mb=2<G.constant.length?G.constant[2]:0,ed=3<G.constant.length?G.constant[3]:0)):(ya=Rb(G.buffer)?na.createStream(34962,G.buffer):na.getBuffer(G.buffer),nc="type"in G?ta[G.type]:ya.dtype,Da=!!G.normalized,pb=G.size|0,ob=G.offset|0,Ya=G.stride|0,gc=G.divisor|0);bd=d.location;Ea=Xb[bd];if(1===Xa){Ea.buffer||N.enableVertexAttribArray(bd);xc=pb||2;if(Ea.type!==nc||Ea.size!==xc||Ea.buffer!==ya||Ea.normalized!==
Da||Ea.offset!==ob||Ea.stride!==Ya)N.bindBuffer(34962,ya.buffer),N.vertexAttribPointer(bd,xc,nc,Da,Ya,ob),Ea.type=nc,Ea.size=xc,Ea.buffer=ya,Ea.normalized=Da,Ea.offset=ob,Ea.stride=Ya;Ea.divisor!==gc&&(v.vertexAttribDivisorANGLE(bd,gc),Ea.divisor=gc)}else if(Ea.buffer&&(N.disableVertexAttribArray(bd),Ea.buffer=null),Ea.x!==tc||Ea.y!==Va||Ea.z!==Mb||Ea.w!==ed)N.vertexAttrib4f(bd,tc,Va,Mb,ed),Ea.x=tc,Ea.y=Va,Ea.z=Mb,Ea.w=ed;t.buffer=p.colorBuffer;Pa=!1;Ba=null;kb=0;ub=!1;qb=Cb=0;uc=1;vb=0;vd=5126;id=
Mc=Hd=sc=0;Rb(t)?(Pa=!0,Ba=na.createStream(34962,t),vd=Ba.dtype):(Ba=na.getBuffer(t))?vd=Ba.dtype:"constant"in t?(uc=2,"number"===typeof t.constant?(Hd=t.constant,Mc=id=sc=0):(Hd=0<t.constant.length?t.constant[0]:0,Mc=1<t.constant.length?t.constant[1]:0,id=2<t.constant.length?t.constant[2]:0,sc=3<t.constant.length?t.constant[3]:0)):(Ba=Rb(t.buffer)?na.createStream(34962,t.buffer):na.getBuffer(t.buffer),vd="type"in t?ta[t.type]:Ba.dtype,ub=!!t.normalized,qb=t.size|0,Cb=t.offset|0,vb=t.stride|0,kb=
t.divisor|0);wd=A.location;Wb=Xb[wd];if(1===uc){Wb.buffer||N.enableVertexAttribArray(wd);cc=qb||4;if(Wb.type!==vd||Wb.size!==cc||Wb.buffer!==Ba||Wb.normalized!==ub||Wb.offset!==Cb||Wb.stride!==vb)N.bindBuffer(34962,Ba.buffer),N.vertexAttribPointer(wd,cc,vd,ub,vb,Cb),Wb.type=vd,Wb.size=cc,Wb.buffer=Ba,Wb.normalized=ub,Wb.offset=Cb,Wb.stride=vb;Wb.divisor!==kb&&(v.vertexAttribDivisorANGLE(wd,kb),Wb.divisor=kb)}else if(Wb.buffer&&(N.disableVertexAttribArray(wd),Wb.buffer=null),Wb.x!==Hd||Wb.y!==Mc||
Wb.z!==id||Wb.w!==sc)N.vertexAttrib4f(wd,Hd,Mc,id,sc),Wb.x=Hd,Wb.y=Mc,Wb.z=id,Wb.w=sc;Pb=p.scale;Fa=Pb[0];lb=Pb[1];r&&$b===Fa&&wb===lb||($b=Fa,wb=lb,N.uniform2f(b.location,Fa,lb));Nb=p.scaleFract;Qb=Nb[0];jc=Nb[1];r&&hc===Qb&&Sc===jc||(hc=Qb,Sc=jc,N.uniform2f(e.location,Qb,jc));Bc=p.translate;Cc=Bc[0];Nc=Bc[1];r&&Dc===Cc&&cd===Nc||(Dc=Cc,cd=Nc,N.uniform2f(aa.location,Cc,Nc));Tc=p.translateFract;Oc=Tc[0];Fb=Tc[1];r&&Kb===Oc&&Pc===Fb||(Kb=Oc,Pc=Fb,N.uniform2f(Ra.location,Oc,Fb));Hc=p.thickness;r&&Uc===
Hc||(Uc=Hc,N.uniform1f(Z.location,Hc));ic=p.depth;r&&Xc===ic||(Xc=ic,N.uniform1f(n.location,ic));fd=Q.call(this,Qa,p,r);xe=fd[0];Yc=fd[1];ke=fd[2];ue=fd[3];r&&he===xe&&Jf===Yc&&ve===ke&&Td===ue||(he=xe,Jf=Yc,ve=ke,Td=ue,N.uniform4f(zb.location,xe,Yc,ke,ue));Fd=p.dashLength;r&&Dd===Fd||(Dd=Fd,N.uniform1f(P.location,Fd));hd=p.opacity;r&&Ec===hd||(Ec=hd,N.uniform1f(fa.location,hd));(nd=p.dashTexture)&&"framebuffer"===nd._reglType&&(nd=nd.color[0]);jd=nd._texture;N.uniform1i(ea.location,jd.bind());dd=
p.count;0<dd?Db?v.drawElementsInstancedANGLE(5,4,Db.type,0<<(Db.type-5121>>1),dd):v.drawArraysInstancedANGLE(5,0,4,dd):0>dd&&(Db?N.drawElements(5,4,Db.type,0<<(Db.type-5121>>1)):N.drawArrays(5,0,4));Qa.viewportWidth=Cd;Qa.viewportHeight=md;Wa&&na.destroyStream(ua);tb&&na.destroyStream(gb);ab&&na.destroyStream(Aa);hb&&na.destroyStream(ya);Pa&&na.destroyStream(Ba);jd.unbind()}X.dirty=!0;ka.setVAO(null);u&&(y.cpuTime+=performance.now()-l)},draw:function(a){var k,m,v,l,u,r,p,w,z,D,B,Y,F,H,O,Q,C,S,W,ca,
la,Ld,Ze,Na,Ga,xd,De,Rd,Sd,$d,Vd,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob;k=ma.next;k!==ma.cur&&(k?N.bindFramebuffer(36160,k.framebuffer):N.bindFramebuffer(36160,null),ma.cur=k);if(X.dirty){var pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb;pb=Za.dither;pb!==
X.dither&&(pb?N.enable(3024):N.disable(3024),X.dither=pb);Xa=Za.depth_func;Xa!==X.depth_func&&(N.depthFunc(Xa),X.depth_func=Xa);Ya=ra[0];nc=ra[1];if(Ya!==Yb[0]||nc!==Yb[1])N.depthRange(Ya,nc),Yb[0]=Ya,Yb[1]=nc;ed=Za.depth_mask;ed!==X.depth_mask&&(N.depthMask(ed),X.depth_mask=ed);tc=rb[0];Va=rb[1];Mb=rb[2];bd=rb[3];if(tc!==da[0]||Va!==da[1]||Mb!==da[2]||bd!==da[3])N.colorMask(tc,Va,Mb,bd),da[0]=tc,da[1]=Va,da[2]=Mb,da[3]=bd;Ea=Za.cull_enable;Ea!==X.cull_enable&&(Ea?N.enable(2884):N.disable(2884),X.cull_enable=
Ea);xc=Za.cull_face;xc!==X.cull_face&&(N.cullFace(xc),X.cull_face=xc);Pa=Za.frontFace;Pa!==X.frontFace&&(N.frontFace(Pa),X.frontFace=Pa);Ba=Za.lineWidth;Ba!==X.lineWidth&&(N.lineWidth(Ba),X.lineWidth=Ba);kb=Za.polygonOffset_enable;kb!==X.polygonOffset_enable&&(kb?N.enable(32823):N.disable(32823),X.polygonOffset_enable=kb);ub=dc[0];Cb=dc[1];if(ub!==qc[0]||Cb!==qc[1])N.polygonOffset(ub,Cb),qc[0]=ub,qc[1]=Cb;qb=Za.sample_alpha;qb!==X.sample_alpha&&(qb?N.enable(32926):N.disable(32926),X.sample_alpha=
qb);uc=Za.sample_enable;uc!==X.sample_enable&&(uc?N.enable(32928):N.disable(32928),X.sample_enable=uc);vb=sd[0];vd=sd[1];if(vb!==vc[0]||vd!==vc[1])N.sampleCoverage(vb,vd),vc[0]=vb,vc[1]=vd;sc=Za.stencil_mask;sc!==X.stencil_mask&&(N.stencilMask(sc),X.stencil_mask=sc);Hd=ja[0];Mc=ja[1];id=ja[2];if(Hd!==Ca[0]||Mc!==Ca[1]||id!==Ca[2])N.stencilFunc(Hd,Mc,id),Ca[0]=Hd,Ca[1]=Mc,Ca[2]=id;wd=Zc[0];Wb=Zc[1];cc=Zc[2];Pb=Zc[3];if(wd!==E[0]||Wb!==E[1]||cc!==E[2]||Pb!==E[3])N.stencilOpSeparate(wd,Wb,cc,Pb),E[0]=
wd,E[1]=Wb,E[2]=cc,E[3]=Pb;Fa=sb[0];$b=sb[1];lb=sb[2];wb=sb[3];if(Fa!==Qc[0]||$b!==Qc[1]||lb!==Qc[2]||wb!==Qc[3])N.stencilOpSeparate(Fa,$b,lb,wb),Qc[0]=Fa,Qc[1]=$b,Qc[2]=lb,Qc[3]=wb}m=a.viewport;v=m.x|0;l=m.y|0;u="width"in m?m.width|0:Qa.framebufferWidth-v;r="height"in m?m.height|0:Qa.framebufferHeight-l;p=Qa.viewportWidth;Qa.viewportWidth=u;w=Qa.viewportHeight;Qa.viewportHeight=r;N.viewport(v,l,u,r);ha[0]=v;ha[1]=l;ha[2]=u;ha[3]=r;N.blendColor(0,0,0,0);za[0]=0;za[1]=0;za[2]=0;za[3]=0;N.enable(3042);
X.blend_enable=!0;N.blendEquationSeparate(32774,32774);fc[0]=32774;fc[1]=32774;N.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;(z=q.call(this,Qa,a,0))?N.enable(2929):N.disable(2929);X.depth_enable=z;D=a.viewport;B=D.x|0;Y=D.y|0;F="width"in D?D.width|0:Qa.framebufferWidth-B;H="height"in D?D.height|0:Qa.framebufferHeight-Y;N.scissor(B,Y,F,H);J[0]=B;J[1]=Y;J[2]=F;J[3]=H;N.enable(3089);X.scissor_enable=!0;N.disable(2960);X.stencil_enable=!1;if(O=X.profile)Q=performance.now(),y.count++;
N.useProgram(I.program);C=T.angle_instanced_arrays;ka.setVAO(null);V.buffer=a.positionBuffer;S=!1;W=null;ca=0;la=!1;Ze=Ld=0;Na=1;Ga=0;xd=5126;$d=Sd=Rd=De=0;Rb(V)?(S=!0,W=na.createStream(34962,V),xd=W.dtype):(W=na.getBuffer(V))?xd=W.dtype:"constant"in V?(Na=2,"number"===typeof V.constant?(Rd=V.constant,Sd=$d=De=0):(Rd=0<V.constant.length?V.constant[0]:0,Sd=1<V.constant.length?V.constant[1]:0,$d=2<V.constant.length?V.constant[2]:0,De=3<V.constant.length?V.constant[3]:0)):(W=Rb(V.buffer)?na.createStream(34962,
V.buffer):na.getBuffer(V.buffer),xd="type"in V?ta[V.type]:W.dtype,la=!!V.normalized,Ze=V.size|0,Ld=V.offset|0,Ga=V.stride|0,ca=V.divisor|0);Vd=Ia.location;pd=Xb[Vd];if(1===Na){pd.buffer||N.enableVertexAttribArray(Vd);ld=Ze||2;if(pd.type!==xd||pd.size!==ld||pd.buffer!==W||pd.normalized!==la||pd.offset!==Ld||pd.stride!==Ga)N.bindBuffer(34962,W.buffer),N.vertexAttribPointer(Vd,ld,xd,la,Ga,Ld),pd.type=xd,pd.size=ld,pd.buffer=W,pd.normalized=la,pd.offset=Ld,pd.stride=Ga;pd.divisor!==ca&&(C.vertexAttribDivisorANGLE(Vd,
ca),pd.divisor=ca)}else if(pd.buffer&&(N.disableVertexAttribArray(Vd),pd.buffer=null),pd.x!==Rd||pd.y!==Sd||pd.z!==$d||pd.w!==De)N.vertexAttrib4f(Vd,Rd,Sd,$d,De),pd.x=Rd,pd.y=Sd,pd.z=$d,pd.w=De;qa.buffer=a.positionBuffer;ud=!1;od=null;gd=0;zc=!1;Rc=qd=0;Lc=1;rc=0;fb=5126;Ta=pc=Db=kc=0;Rb(qa)?(ud=!0,od=na.createStream(34962,qa),fb=od.dtype):(od=na.getBuffer(qa))?fb=od.dtype:"constant"in qa?(Lc=2,"number"===typeof qa.constant?(Db=qa.constant,pc=Ta=kc=0):(Db=0<qa.constant.length?qa.constant[0]:0,pc=
1<qa.constant.length?qa.constant[1]:0,Ta=2<qa.constant.length?qa.constant[2]:0,kc=3<qa.constant.length?qa.constant[3]:0)):(od=Rb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),fb="type"in qa?ta[qa.type]:od.dtype,zc=!!qa.normalized,Rc=qa.size|0,qd=qa.offset|0,rc=qa.stride|0,gd=qa.divisor|0);Jc=g.location;bc=Xb[Jc];if(1===Lc){bc.buffer||N.enableVertexAttribArray(Jc);$c=Rc||2;if(bc.type!==fb||bc.size!==$c||bc.buffer!==od||bc.normalized!==zc||bc.offset!==qd||bc.stride!==rc)N.bindBuffer(34962,
od.buffer),N.vertexAttribPointer(Jc,$c,fb,zc,rc,qd),bc.type=fb,bc.size=$c,bc.buffer=od,bc.normalized=zc,bc.offset=qd,bc.stride=rc;bc.divisor!==gd&&(C.vertexAttribDivisorANGLE(Jc,gd),bc.divisor=gd)}else if(bc.buffer&&(N.disableVertexAttribArray(Jc),bc.buffer=null),bc.x!==Db||bc.y!==pc||bc.z!==Ta||bc.w!==kc)N.vertexAttrib4f(Jc,Db,pc,Ta,kc),bc.x=Db,bc.y=pc,bc.z=Ta,bc.w=kc;ga.buffer=a.positionFractBuffer;Cd=!1;md=null;Ac=0;Zb=!1;ad=Fc=0;La=1;Eb=0;Wa=5126;$a=Ab=td=ua=0;Rb(ga)?(Cd=!0,md=na.createStream(34962,
ga),Wa=md.dtype):(md=na.getBuffer(ga))?Wa=md.dtype:"constant"in ga?(La=2,"number"===typeof ga.constant?(td=ga.constant,Ab=$a=ua=0):(td=0<ga.constant.length?ga.constant[0]:0,Ab=1<ga.constant.length?ga.constant[1]:0,$a=2<ga.constant.length?ga.constant[2]:0,ua=3<ga.constant.length?ga.constant[3]:0)):(md=Rb(ga.buffer)?na.createStream(34962,ga.buffer):na.getBuffer(ga.buffer),Wa="type"in ga?ta[ga.type]:md.dtype,Zb=!!ga.normalized,ad=ga.size|0,Fc=ga.offset|0,Eb=ga.stride|0,Ac=ga.divisor|0);Gb=h.location;
bb=Xb[Gb];if(1===La){bb.buffer||N.enableVertexAttribArray(Gb);wc=ad||2;if(bb.type!==Wa||bb.size!==wc||bb.buffer!==md||bb.normalized!==Zb||bb.offset!==Fc||bb.stride!==Eb)N.bindBuffer(34962,md.buffer),N.vertexAttribPointer(Gb,wc,Wa,Zb,Eb,Fc),bb.type=Wa,bb.size=wc,bb.buffer=md,bb.normalized=Zb,bb.offset=Fc,bb.stride=Eb;bb.divisor!==Ac&&(C.vertexAttribDivisorANGLE(Gb,Ac),bb.divisor=Ac)}else if(bb.buffer&&(N.disableVertexAttribArray(Gb),bb.buffer=null),bb.x!==td||bb.y!==Ab||bb.z!==$a||bb.w!==ua)N.vertexAttrib4f(Gb,
td,Ab,$a,ua),bb.x=td,bb.y=Ab,bb.z=$a,bb.w=ua;G.buffer=a.positionFractBuffer;Sb=!1;ge=null;ac=0;Tb=!1;Ub=rd=0;Ma=1;mb=0;tb=5126;Ib=oc=Oa=gb=0;Rb(G)?(Sb=!0,ge=na.createStream(34962,G),tb=ge.dtype):(ge=na.getBuffer(G))?tb=ge.dtype:"constant"in G?(Ma=2,"number"===typeof G.constant?(Oa=G.constant,oc=Ib=gb=0):(Oa=0<G.constant.length?G.constant[0]:0,oc=1<G.constant.length?G.constant[1]:0,Ib=2<G.constant.length?G.constant[2]:0,gb=3<G.constant.length?G.constant[3]:0)):(ge=Rb(G.buffer)?na.createStream(34962,
G.buffer):na.getBuffer(G.buffer),tb="type"in G?ta[G.type]:ge.dtype,Tb=!!G.normalized,Ub=G.size|0,rd=G.offset|0,mb=G.stride|0,ac=G.divisor|0);Vc=d.location;cb=Xb[Vc];if(1===Ma){cb.buffer||N.enableVertexAttribArray(Vc);mc=Ub||2;if(cb.type!==tb||cb.size!==mc||cb.buffer!==ge||cb.normalized!==Tb||cb.offset!==rd||cb.stride!==mb)N.bindBuffer(34962,ge.buffer),N.vertexAttribPointer(Vc,mc,tb,Tb,mb,rd),cb.type=tb,cb.size=mc,cb.buffer=ge,cb.normalized=Tb,cb.offset=rd,cb.stride=mb;cb.divisor!==ac&&(C.vertexAttribDivisorANGLE(Vc,
ac),cb.divisor=ac)}else if(cb.buffer&&(N.disableVertexAttribArray(Vc),cb.buffer=null),cb.x!==Oa||cb.y!==oc||cb.z!==Ib||cb.w!==gb)N.vertexAttrib4f(Vc,Oa,oc,Ib,gb),cb.x=Oa,cb.y=oc,cb.z=Ib,cb.w=gb;t.buffer=a.colorBuffer;Gc=!1;ec=null;ib=0;jb=!1;nb=sa=0;va=1;Ua=0;ab=5126;Bb=Ha=db=Aa=0;Rb(t)?(Gc=!0,ec=na.createStream(34962,t),ab=ec.dtype):(ec=na.getBuffer(t))?ab=ec.dtype:"constant"in t?(va=2,"number"===typeof t.constant?(db=t.constant,Ha=Bb=Aa=0):(db=0<t.constant.length?t.constant[0]:0,Ha=1<t.constant.length?
t.constant[1]:0,Bb=2<t.constant.length?t.constant[2]:0,Aa=3<t.constant.length?t.constant[3]:0)):(ec=Rb(t.buffer)?na.createStream(34962,t.buffer):na.getBuffer(t.buffer),ab="type"in t?ta[t.type]:ec.dtype,jb=!!t.normalized,nb=t.size|0,sa=t.offset|0,Ua=t.stride|0,ib=t.divisor|0);yb=A.location;Sa=Xb[yb];if(1===va){Sa.buffer||N.enableVertexAttribArray(yb);Kc=nb||4;if(Sa.type!==ab||Sa.size!==Kc||Sa.buffer!==ec||Sa.normalized!==jb||Sa.offset!==sa||Sa.stride!==Ua)N.bindBuffer(34962,ec.buffer),N.vertexAttribPointer(yb,
Kc,ab,jb,Ua,sa),Sa.type=ab,Sa.size=Kc,Sa.buffer=ec,Sa.normalized=jb,Sa.offset=sa,Sa.stride=Ua;Sa.divisor!==ib&&(C.vertexAttribDivisorANGLE(yb,ib),Sa.divisor=ib)}else if(Sa.buffer&&(N.disableVertexAttribArray(yb),Sa.buffer=null),Sa.x!==db||Sa.y!==Ha||Sa.z!==Bb||Sa.w!==Aa)N.vertexAttrib4f(yb,db,Ha,Bb,Aa),Sa.x=db,Sa.y=Ha,Sa.z=Bb,Sa.w=Aa;Jb=pa.location;Lb=Xb[Jb];Lb.buffer||N.enableVertexAttribArray(Jb);if(5126!==Lb.type||1!==Lb.size||Lb.buffer!==f||!1!==Lb.normalized||0!==Lb.offset||8!==Lb.stride)N.bindBuffer(34962,
f.buffer),N.vertexAttribPointer(Jb,1,5126,!1,8,0),Lb.type=5126,Lb.size=1,Lb.buffer=f,Lb.normalized=!1,Lb.offset=0,Lb.stride=8;0!==Lb.divisor&&(C.vertexAttribDivisorANGLE(Jb,0),Lb.divisor=0);Vb=M.location;xa=Xb[Vb];xa.buffer||N.enableVertexAttribArray(Vb);if(5126!==xa.type||1!==xa.size||xa.buffer!==c||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)N.bindBuffer(34962,c.buffer),N.vertexAttribPointer(Vb,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=c,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&
(C.vertexAttribDivisorANGLE(Vb,0),xa.divisor=0);ce=a.scale;N.uniform2f(b.location,ce[0],ce[1]);Ja=a.scaleFract;N.uniform2f(e.location,Ja[0],Ja[1]);Ob=a.translate;N.uniform2f(aa.location,Ob[0],Ob[1]);eb=a.translateFract;N.uniform2f(Ra.location,eb[0],eb[1]);N.uniform1f(Z.location,a.thickness);N.uniform1f(n.location,a.depth);hb=x.call(this,Qa,a,0);N.uniform4f(zb.location,hb[0],hb[1],hb[2],hb[3]);N.uniform1f(P.location,a.dashLength);N.uniform1f(fa.location,a.opacity);(ya=a.dashTexture)&&"framebuffer"===
ya._reglType&&(ya=ya.color[0]);gc=ya._texture;N.uniform1i(ea.location,gc.bind());(Da=K.elements)?N.bindBuffer(34963,Da.buffer.buffer):ka.currentVAO&&(Da=L.getElements(ka.currentVAO.elements))&&N.bindBuffer(34963,Da.buffer.buffer);ob=a.count;0<ob?Da?C.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),ob):C.drawArraysInstancedANGLE(5,0,4,ob):0>ob&&(Da?N.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):N.drawArrays(5,0,4));X.dirty=!0;ka.setVAO(null);Qa.viewportWidth=p;Qa.viewportHeight=w;O&&
(y.cpuTime+=performance.now()-Q);S&&na.destroyStream(W);ud&&na.destroyStream(od);Cd&&na.destroyStream(md);Sb&&na.destroyStream(ge);Gc&&na.destroyStream(ec);gc.unbind()},scope:function(b,d,e){var g,h,k,m,p,n,q,x,J,A,E,I,M,L,H,N,Q,P,T,U,ea,ja,ha,Z,da,ka,dc,fa,pa,Ca,Ia,aa,ra,ma,sd,vc,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,sb,Qc,Ka,Ac,Zb,Fc,ad,La,Eb,Wa,ua,Yb,Ab,$a,Gb,bb,za,Sb,qc,ac,Tb,rb,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,Zc,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,
Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,zb,sc,Ra,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,Xb,he,Yc,fc,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Xe,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Ke,Oe,Le,re,Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,Pe,Me;g=b.viewport;h=g.x|0;k=g.y|0;m="width"in g?g.width|0:Qa.framebufferWidth-h;p="height"in g?g.height|0:Qa.framebufferHeight-k;n=Qa.viewportWidth;Qa.viewportWidth=m;q=Qa.viewportHeight;
Qa.viewportHeight=p;x=v[0];v[0]=h;J=v[1];v[1]=k;A=v[2];v[2]=m;E=v[3];v[3]=p;I=ca[0];ca[0]=0;M=ca[1];ca[1]=0;L=ca[2];ca[2]=0;H=ca[3];ca[3]=0;N=Za.blend_enable;Za.blend_enable=!0;Q=Na[0];Na[0]=32774;P=Na[1];Na[1]=32774;T=Ga[0];Ga[0]=770;U=Ga[1];Ga[1]=771;ea=Ga[2];Ga[2]=773;ja=Ga[3];Ga[3]=1;ha=a.call(this,Qa,b,e);Z=Za.depth_enable;Za.depth_enable=ha;da=b.viewport;ka=da.x|0;dc=da.y|0;fa="width"in da?da.width|0:Qa.framebufferWidth-ka;pa="height"in da?da.height|0:Qa.framebufferHeight-dc;Ca=Y[0];Y[0]=ka;
Ia=Y[1];Y[1]=dc;aa=Y[2];Y[2]=fa;ra=Y[3];Y[3]=pa;ma=Za.scissor_enable;Za.scissor_enable=!0;sd=Za.stencil_enable;Za.stencil_enable=!1;if(vc=X.profile)Rc=performance.now(),y.count++;Lc=K.offset;K.offset=0;rc=K.count;K.count=4;fb=b.count;kc=K.instances;K.instances=fb;Db=K.primitive;K.primitive=5;pc=b.dashLength;Ta=u[23];u[23]=pc;Jc=b.dashTexture;bc=u[24];u[24]=Jc;sb=b.depth;Qc=u[22];u[22]=sb;Ka=b.id;Ac=u[31];u[31]=Ka;Zb=b.miterLimit;Fc=u[32];u[32]=Zb;ad=w.call(this,Qa,b,e);La=u[33];u[33]=ad;Eb=b.opacity;
Wa=u[10];u[10]=Eb;ua=Qa.pixelRatio;Yb=u[34];u[34]=ua;Ab=b.scale;$a=u[6];u[6]=Ab;Gb=b.scaleFract;bb=u[7];u[7]=Gb;za=b.thickness;Sb=u[21];u[21]=za;qc=b.translate;ac=u[8];u[8]=qc;Tb=b.translateFract;rb=u[9];u[9]=Tb;Ub=C.call(this,Qa,b,e);Ma=u[3];u[3]=Ub;V.buffer=b.positionBuffer;mb=!1;tb=null;gb=0;Oa=!1;Ib=oc=0;Vc=1;cb=0;mc=5126;jb=ib=ec=Gc=0;Rb(V)?(mb=!0,tb=na.createStream(34962,V),mc=tb.dtype):(tb=na.getBuffer(V))?mc=tb.dtype:"constant"in V?(Vc=2,"number"===typeof V.constant?(ec=V.constant,ib=jb=Gc=
0):(ec=0<V.constant.length?V.constant[0]:0,ib=1<V.constant.length?V.constant[1]:0,jb=2<V.constant.length?V.constant[2]:0,Gc=3<V.constant.length?V.constant[3]:0)):(tb=Rb(V.buffer)?na.createStream(34962,V.buffer):na.getBuffer(V.buffer),mc="type"in V?ta[V.type]:tb.dtype,Oa=!!V.normalized,Ib=V.size|0,oc=V.offset|0,cb=V.stride|0,gb=V.divisor|0);sa=W.buffer;W.buffer=tb;nb=W.divisor;W.divisor=gb;va=W.normalized;W.normalized=Oa;Ua=W.offset;W.offset=oc;ab=W.size;W.size=Ib;Aa=W.state;W.state=Vc;db=W.stride;
W.stride=cb;Ha=W.type;W.type=mc;Bb=W.w;W.w=Gc;yb=W.x;W.x=ec;Sa=W.y;W.y=ib;Kc=W.z;W.z=jb;ga.buffer=b.positionFractBuffer;Jb=!1;Lb=null;Vb=0;xa=!1;Ja=Zc=0;Ob=1;eb=0;hb=5126;ob=Da=gc=ya=0;Rb(ga)?(Jb=!0,Lb=na.createStream(34962,ga),hb=Lb.dtype):(Lb=na.getBuffer(ga))?hb=Lb.dtype:"constant"in ga?(Ob=2,"number"===typeof ga.constant?(gc=ga.constant,Da=ob=ya=0):(gc=0<ga.constant.length?ga.constant[0]:0,Da=1<ga.constant.length?ga.constant[1]:0,ob=2<ga.constant.length?ga.constant[2]:0,ya=3<ga.constant.length?
ga.constant[3]:0)):(Lb=Rb(ga.buffer)?na.createStream(34962,ga.buffer):na.getBuffer(ga.buffer),hb="type"in ga?ta[ga.type]:Lb.dtype,xa=!!ga.normalized,Ja=ga.size|0,Zc=ga.offset|0,eb=ga.stride|0,Vb=ga.divisor|0);pb=O.buffer;O.buffer=Lb;Xa=O.divisor;O.divisor=Vb;Ya=O.normalized;O.normalized=xa;nc=O.offset;O.offset=Zc;ed=O.size;O.size=Ja;tc=O.state;O.state=Ob;Va=O.stride;O.stride=eb;Mb=O.type;O.type=hb;bd=O.w;O.w=ya;Ea=O.x;O.x=gc;xc=O.y;O.y=Da;Pa=O.z;O.z=ob;qa.buffer=b.positionBuffer;Ba=!1;kb=null;ub=
0;Cb=!1;uc=qb=0;vb=1;zb=0;sc=5126;wd=id=Mc=Ra=0;Rb(qa)?(Ba=!0,kb=na.createStream(34962,qa),sc=kb.dtype):(kb=na.getBuffer(qa))?sc=kb.dtype:"constant"in qa?(vb=2,"number"===typeof qa.constant?(Mc=qa.constant,id=wd=Ra=0):(Mc=0<qa.constant.length?qa.constant[0]:0,id=1<qa.constant.length?qa.constant[1]:0,wd=2<qa.constant.length?qa.constant[2]:0,Ra=3<qa.constant.length?qa.constant[3]:0)):(kb=Rb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),sc="type"in qa?ta[qa.type]:kb.dtype,Cb=!!qa.normalized,
uc=qa.size|0,qb=qa.offset|0,zb=qa.stride|0,ub=qa.divisor|0);Wb=F.buffer;F.buffer=kb;cc=F.divisor;F.divisor=ub;Pb=F.normalized;F.normalized=Cb;Fa=F.offset;F.offset=qb;$b=F.size;F.size=uc;lb=F.state;F.state=vb;wb=F.stride;F.stride=zb;Nb=F.type;F.type=sc;Qb=F.w;F.w=Ra;hc=F.x;F.x=Mc;jc=F.y;F.y=id;Sc=F.z;F.z=wd;G.buffer=b.positionFractBuffer;Bc=!1;Cc=null;Dc=0;Nc=!1;Tc=cd=0;Oc=1;Kb=0;Fb=5126;ic=Uc=Hc=Pc=0;Rb(G)?(Bc=!0,Cc=na.createStream(34962,G),Fb=Cc.dtype):(Cc=na.getBuffer(G))?Fb=Cc.dtype:"constant"in
G?(Oc=2,"number"===typeof G.constant?(Hc=G.constant,Uc=ic=Pc=0):(Hc=0<G.constant.length?G.constant[0]:0,Uc=1<G.constant.length?G.constant[1]:0,ic=2<G.constant.length?G.constant[2]:0,Pc=3<G.constant.length?G.constant[3]:0)):(Cc=Rb(G.buffer)?na.createStream(34962,G.buffer):na.getBuffer(G.buffer),Fb="type"in G?ta[G.type]:Cc.dtype,Nc=!!G.normalized,Tc=G.size|0,cd=G.offset|0,Kb=G.stride|0,Dc=G.divisor|0);Xc=r.buffer;r.buffer=Cc;fd=r.divisor;r.divisor=Dc;Xb=r.normalized;r.normalized=Nc;he=r.offset;r.offset=
cd;Yc=r.size;r.size=Tc;fc=r.state;r.state=Oc;ke=r.stride;r.stride=Kb;ve=r.type;r.type=Fb;ue=r.w;r.w=Pc;Td=r.x;r.x=Hc;Fd=r.y;r.y=Uc;Dd=r.z;r.z=ic;t.buffer=b.colorBuffer;hd=!1;Ec=null;nd=0;jd=!1;kd=dd=0;Ad=1;Bd=0;Xe=5126;de=ee=Ue=ne=0;Rb(t)?(hd=!0,Ec=na.createStream(34962,t),Xe=Ec.dtype):(Ec=na.getBuffer(t))?Xe=Ec.dtype:"constant"in t?(Ad=2,"number"===typeof t.constant?(Ue=t.constant,ee=de=ne=0):(Ue=0<t.constant.length?t.constant[0]:0,ee=1<t.constant.length?t.constant[1]:0,de=2<t.constant.length?t.constant[2]:
0,ne=3<t.constant.length?t.constant[3]:0)):(Ec=Rb(t.buffer)?na.createStream(34962,t.buffer):na.getBuffer(t.buffer),Xe="type"in t?ta[t.type]:Ec.dtype,jd=!!t.normalized,kd=t.size|0,dd=t.offset|0,Bd=t.stride|0,nd=t.divisor|0);ae=D.buffer;D.buffer=Ec;pe=D.divisor;D.divisor=nd;Yd=D.normalized;D.normalized=jd;ie=D.offset;D.offset=dd;yc=D.size;D.size=kd;Wc=D.state;D.state=Ad;qe=D.stride;D.stride=Bd;le=D.type;D.type=Xe;Ed=D.w;D.w=ne;Kd=D.x;D.x=Ue;Md=D.y;D.y=ee;Nd=D.z;D.z=de;je=z.buffer;z.buffer=f;Ee=z.divisor;
z.divisor=0;we=z.normalized;z.normalized=!1;oe=z.offset;z.offset=0;Ke=z.size;z.size=0;Oe=z.state;z.state=1;Le=z.stride;z.stride=8;re=z.type;z.type=5126;Be=z.w;z.w=0;Fe=z.x;z.x=0;Ge=z.y;z.y=0;He=z.z;z.z=0;Ce=B.buffer;B.buffer=c;Gd=B.divisor;B.divisor=0;Qd=B.normalized;B.normalized=!1;Wd=B.offset;B.offset=4;Zd=B.size;B.size=0;Ie=B.state;B.state=1;yd=B.stride;B.stride=8;Od=B.type;B.type=5126;ye=B.w;B.w=0;Je=B.x;B.x=0;ff=B.y;B.y=0;Ye=B.z;B.z=0;Pe=S.vert;S.vert=20;Me=S.frag;S.frag=19;X.dirty=!0;d(Qa,b,
e);Qa.viewportWidth=n;Qa.viewportHeight=q;v[0]=x;v[1]=J;v[2]=A;v[3]=E;ca[0]=I;ca[1]=M;ca[2]=L;ca[3]=H;Za.blend_enable=N;Na[0]=Q;Na[1]=P;Ga[0]=T;Ga[1]=U;Ga[2]=ea;Ga[3]=ja;Za.depth_enable=Z;Y[0]=Ca;Y[1]=Ia;Y[2]=aa;Y[3]=ra;Za.scissor_enable=ma;Za.stencil_enable=sd;vc&&(y.cpuTime+=performance.now()-Rc);K.offset=Lc;K.count=rc;K.instances=kc;K.primitive=Db;u[23]=Ta;u[24]=bc;u[22]=Qc;u[31]=Ac;u[32]=Fc;u[33]=La;u[10]=Wa;u[34]=Yb;u[6]=$a;u[7]=bb;u[21]=Sb;u[8]=ac;u[9]=rb;u[3]=Ma;mb&&na.destroyStream(tb);W.buffer=
sa;W.divisor=nb;W.normalized=va;W.offset=Ua;W.size=ab;W.state=Aa;W.stride=db;W.type=Ha;W.w=Bb;W.x=yb;W.y=Sa;W.z=Kc;Jb&&na.destroyStream(Lb);O.buffer=pb;O.divisor=Xa;O.normalized=Ya;O.offset=nc;O.size=ed;O.state=tc;O.stride=Va;O.type=Mb;O.w=bd;O.x=Ea;O.y=xc;O.z=Pa;Ba&&na.destroyStream(kb);F.buffer=Wb;F.divisor=cc;F.normalized=Pb;F.offset=Fa;F.size=$b;F.state=lb;F.stride=wb;F.type=Nb;F.w=Qb;F.x=hc;F.y=jc;F.z=Sc;Bc&&na.destroyStream(Cc);r.buffer=Xc;r.divisor=fd;r.normalized=Xb;r.offset=he;r.size=Yc;
r.state=fc;r.stride=ke;r.type=ve;r.w=ue;r.x=Td;r.y=Fd;r.z=Dd;hd&&na.destroyStream(Ec);D.buffer=ae;D.divisor=pe;D.normalized=Yd;D.offset=ie;D.size=yc;D.state=Wc;D.stride=qe;D.type=le;D.w=Ed;D.x=Kd;D.y=Md;D.z=Nd;z.buffer=je;z.divisor=Ee;z.normalized=we;z.offset=oe;z.size=Ke;z.state=Oe;z.stride=Le;z.type=re;z.w=Be;z.x=Fe;z.y=Ge;z.z=He;B.buffer=Ce;B.divisor=Gd;B.normalized=Qd;B.offset=Wd;B.size=Zd;B.state=Ie;B.stride=yd;B.type=Od;B.w=ye;B.x=Je;B.y=ff;B.z=Ye;S.vert=Pe;S.frag=Me;X.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(k,
y,q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,Ia,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,aa,Ra,zb,Xb,na,Qa,X){var K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra,Yb,dc,qc,sd,vc,Y,J,ja,Ca,sb,Qc,Zc,E,v,ha,ta,V,ga,qa,G,t,ba,R,wa,oa,l;K=k.attributes;L=k.buffer;T=k.context;ma=k.current;N=k.draw;Rb=k.elements;Za=k.extensions;S=k.framebuffer;u=k.gl;ka=k.isBufferArgs;ca=k.next;za=k.shader;Na=k.uniforms;fc=k.vao;Ga=ca.blend_color;U=ma.blend_color;rb=ca.blend_equation;da=ma.blend_equation;ra=ca.blend_func;Yb=ma.blend_func;
dc=ca.colorMask;qc=ma.colorMask;sd=ca.depth_range;vc=ma.depth_range;Y=ca.polygonOffset_offset;J=ma.polygonOffset_offset;ja=ca.sample_coverage;Ca=ma.sample_coverage;sb=ca.scissor_box;Qc=ma.scissor_box;Zc=ca.stencil_func;E=ma.stencil_func;v=ca.stencil_opBack;ha=ma.stencil_opBack;ta=ca.stencil_opFront;V=ma.stencil_opFront;ga=ca.viewport;qa=ma.viewport;G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};t={divisor:1,offset:0,stride:4};ba={divisor:1,offset:8,
stride:8};R={divisor:1,offset:4,stride:4};wa={divisor:1,offset:16,stride:8};oa={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(a,k){var m,q,r,x,w,z;m=S.next;m!==S.cur&&(m?u.bindFramebuffer(36160,m.framebuffer):u.bindFramebuffer(36160,null),S.cur=m);if(ma.dirty){var D,I,B,F,H,C,O,ga,W,la,ra,sb,za,Na,Ga,Rd,Sd,$d,rb,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb;D=ca.dither;D!==ma.dither&&(D?u.enable(3024):u.disable(3024),ma.dither=D);I=ca.depth_func;I!==ma.depth_func&&(u.depthFunc(I),
ma.depth_func=I);B=sd[0];F=sd[1];if(B!==vc[0]||F!==vc[1])u.depthRange(B,F),vc[0]=B,vc[1]=F;H=ca.depth_mask;H!==ma.depth_mask&&(u.depthMask(H),ma.depth_mask=H);C=dc[0];O=dc[1];ga=dc[2];W=dc[3];if(C!==qc[0]||O!==qc[1]||ga!==qc[2]||W!==qc[3])u.colorMask(C,O,ga,W),qc[0]=C,qc[1]=O,qc[2]=ga,qc[3]=W;la=ca.frontFace;la!==ma.frontFace&&(u.frontFace(la),ma.frontFace=la);ra=ca.lineWidth;ra!==ma.lineWidth&&(u.lineWidth(ra),ma.lineWidth=ra);sb=ca.polygonOffset_enable;sb!==ma.polygonOffset_enable&&(sb?u.enable(32823):
u.disable(32823),ma.polygonOffset_enable=sb);za=Y[0];Na=Y[1];if(za!==J[0]||Na!==J[1])u.polygonOffset(za,Na),J[0]=za,J[1]=Na;Ga=ca.sample_alpha;Ga!==ma.sample_alpha&&(Ga?u.enable(32926):u.disable(32926),ma.sample_alpha=Ga);Rd=ca.sample_enable;Rd!==ma.sample_enable&&(Rd?u.enable(32928):u.disable(32928),ma.sample_enable=Rd);Sd=ja[0];$d=ja[1];if(Sd!==Ca[0]||$d!==Ca[1])u.sampleCoverage(Sd,$d),Ca[0]=Sd,Ca[1]=$d;rb=ca.stencil_mask;rb!==ma.stencil_mask&&(u.stencilMask(rb),ma.stencil_mask=rb);pd=Zc[0];ld=
Zc[1];ud=Zc[2];if(pd!==E[0]||ld!==E[1]||ud!==E[2])u.stencilFunc(pd,ld,ud),E[0]=pd,E[1]=ld,E[2]=ud;od=ta[0];gd=ta[1];zc=ta[2];qd=ta[3];if(od!==V[0]||gd!==V[1]||zc!==V[2]||qd!==V[3])u.stencilOpSeparate(od,gd,zc,qd),V[0]=od,V[1]=gd,V[2]=zc,V[3]=qd;Rc=v[0];Lc=v[1];rc=v[2];fb=v[3];if(Rc!==ha[0]||Lc!==ha[1]||rc!==ha[2]||fb!==ha[3])u.stencilOpSeparate(Rc,Lc,rc,fb),ha[0]=Rc,ha[1]=Lc,ha[2]=rc,ha[3]=fb}u.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;u.enable(3042);ma.blend_enable=!0;u.blendEquationSeparate(32774,
32774);da[0]=32774;da[1]=32774;u.blendFuncSeparate(770,771,773,1);Yb[0]=770;Yb[1]=771;Yb[2]=773;Yb[3]=1;u.enable(2884);ma.cull_enable=!0;u.cullFace(1029);ma.cull_face=1029;u.enable(3089);ma.scissor_enable=!0;u.disable(2960);ma.stencil_enable=!1;if(q=ma.profile)r=performance.now(),y.count+=k;u.useProgram(Q.program);x=Za.angle_instanced_arrays;var kc,Db,pc,Ta,Jc;fc.setVAO(null);kc=fa.location;Db=K[kc];Db.buffer||u.enableVertexAttribArray(kc);if(5126!==Db.type||1!==Db.size||Db.buffer!==f||!1!==Db.normalized||
0!==Db.offset||8!==Db.stride)u.bindBuffer(34962,f.buffer),u.vertexAttribPointer(kc,1,5126,!1,8,0),Db.type=5126,Db.size=1,Db.buffer=f,Db.normalized=!1,Db.offset=0,Db.stride=8;0!==Db.divisor&&(x.vertexAttribDivisorANGLE(kc,0),Db.divisor=0);pc=b.location;Ta=K[pc];Ta.buffer||u.enableVertexAttribArray(pc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==c||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)u.bindBuffer(34962,c.buffer),u.vertexAttribPointer(pc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=c,
Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(x.vertexAttribDivisorANGLE(pc,0),Ta.divisor=0);(Jc=N.elements)?u.bindBuffer(34963,Jc.buffer.buffer):fc.currentVAO&&(Jc=Rb.getElements(fc.currentVAO.elements))&&u.bindBuffer(34963,Jc.buffer.buffer);for(w=0;w<k;++w){z=a[w];var bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,
xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,xe,he,Yc,Jf,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Xe,ne,Ue,ee,de,ae,pe,Yd,ie,yc;bc=z.viewport;$c=bc.x|0;Cd=bc.y|0;md="width"in bc?bc.width|0:T.framebufferWidth-$c;Ac="height"in bc?bc.height|0:T.framebufferHeight-Cd;Zb=T.viewportWidth;T.viewportWidth=md;Fc=T.viewportHeight;T.viewportHeight=Ac;u.viewport($c,Cd,md,Ac);qa[0]=$c;qa[1]=Cd;qa[2]=md;qa[3]=Ac;(ad=Ia.call(this,T,
z,w))?u.enable(2929):u.disable(2929);ma.depth_enable=ad;La=z.viewport;Eb=La.x|0;Wa=La.y|0;ua="width"in La?La.width|0:T.framebufferWidth-Eb;td="height"in La?La.height|0:T.framebufferHeight-Wa;u.scissor(Eb,Wa,ua,td);Qc[0]=Eb;Qc[1]=Wa;Qc[2]=ua;Qc[3]=td;ba.buffer=z.positionBuffer;Ab=!1;$a=null;Gb=0;bb=!1;Sb=wc=0;ge=1;ac=0;Tb=5126;mb=Ma=Ub=rd=0;ka(ba)?(Ab=!0,$a=L.createStream(34962,ba),Tb=$a.dtype):($a=L.getBuffer(ba))?Tb=$a.dtype:"constant"in ba?(ge=2,"number"===typeof ba.constant?(Ub=ba.constant,Ma=
mb=rd=0):(Ub=0<ba.constant.length?ba.constant[0]:0,Ma=1<ba.constant.length?ba.constant[1]:0,mb=2<ba.constant.length?ba.constant[2]:0,rd=3<ba.constant.length?ba.constant[3]:0)):($a=ka(ba.buffer)?L.createStream(34962,ba.buffer):L.getBuffer(ba.buffer),Tb="type"in ba?G[ba.type]:$a.dtype,bb=!!ba.normalized,Sb=ba.size|0,wc=ba.offset|0,ac=ba.stride|0,Gb=ba.divisor|0);tb=A.location;gb=K[tb];if(1===ge){gb.buffer||u.enableVertexAttribArray(tb);Oa=Sb||2;if(gb.type!==Tb||gb.size!==Oa||gb.buffer!==$a||gb.normalized!==
bb||gb.offset!==wc||gb.stride!==ac)u.bindBuffer(34962,$a.buffer),u.vertexAttribPointer(tb,Oa,Tb,bb,ac,wc),gb.type=Tb,gb.size=Oa,gb.buffer=$a,gb.normalized=bb,gb.offset=wc,gb.stride=ac;gb.divisor!==Gb&&(x.vertexAttribDivisorANGLE(tb,Gb),gb.divisor=Gb)}else if(gb.buffer&&(u.disableVertexAttribArray(tb),gb.buffer=null),gb.x!==Ub||gb.y!==Ma||gb.z!==mb||gb.w!==rd)u.vertexAttrib4f(tb,Ub,Ma,mb,rd),gb.x=Ub,gb.y=Ma,gb.z=mb,gb.w=rd;wa.buffer=z.positionBuffer;oc=!1;Ib=null;Vc=0;cb=!1;Gc=mc=0;ec=1;ib=0;jb=5126;
Ua=va=nb=sa=0;ka(wa)?(oc=!0,Ib=L.createStream(34962,wa),jb=Ib.dtype):(Ib=L.getBuffer(wa))?jb=Ib.dtype:"constant"in wa?(ec=2,"number"===typeof wa.constant?(nb=wa.constant,va=Ua=sa=0):(nb=0<wa.constant.length?wa.constant[0]:0,va=1<wa.constant.length?wa.constant[1]:0,Ua=2<wa.constant.length?wa.constant[2]:0,sa=3<wa.constant.length?wa.constant[3]:0)):(Ib=ka(wa.buffer)?L.createStream(34962,wa.buffer):L.getBuffer(wa.buffer),jb="type"in wa?G[wa.type]:Ib.dtype,cb=!!wa.normalized,Gc=wa.size|0,mc=wa.offset|
0,ib=wa.stride|0,Vc=wa.divisor|0);ab=ea.location;Aa=K[ab];if(1===ec){Aa.buffer||u.enableVertexAttribArray(ab);db=Gc||2;if(Aa.type!==jb||Aa.size!==db||Aa.buffer!==Ib||Aa.normalized!==cb||Aa.offset!==mc||Aa.stride!==ib)u.bindBuffer(34962,Ib.buffer),u.vertexAttribPointer(ab,db,jb,cb,ib,mc),Aa.type=jb,Aa.size=db,Aa.buffer=Ib,Aa.normalized=cb,Aa.offset=mc,Aa.stride=ib;Aa.divisor!==Vc&&(x.vertexAttribDivisorANGLE(ab,Vc),Aa.divisor=Vc)}else if(Aa.buffer&&(u.disableVertexAttribArray(ab),Aa.buffer=null),Aa.x!==
nb||Aa.y!==va||Aa.z!==Ua||Aa.w!==sa)u.vertexAttrib4f(ab,nb,va,Ua,sa),Aa.x=nb,Aa.y=va,Aa.z=Ua,Aa.w=sa;oa.buffer=z.positionBuffer;Ha=!1;Bb=null;yb=0;Sa=!1;Jb=Kc=0;Lb=1;Vb=0;xa=5126;eb=Ob=Ja=ce=0;ka(oa)?(Ha=!0,Bb=L.createStream(34962,oa),xa=Bb.dtype):(Bb=L.getBuffer(oa))?xa=Bb.dtype:"constant"in oa?(Lb=2,"number"===typeof oa.constant?(Ja=oa.constant,Ob=eb=ce=0):(Ja=0<oa.constant.length?oa.constant[0]:0,Ob=1<oa.constant.length?oa.constant[1]:0,eb=2<oa.constant.length?oa.constant[2]:0,ce=3<oa.constant.length?
oa.constant[3]:0)):(Bb=ka(oa.buffer)?L.createStream(34962,oa.buffer):L.getBuffer(oa.buffer),xa="type"in oa?G[oa.type]:Bb.dtype,Sa=!!oa.normalized,Jb=oa.size|0,Kc=oa.offset|0,Vb=oa.stride|0,yb=oa.divisor|0);hb=aa.location;ya=K[hb];if(1===Lb){ya.buffer||u.enableVertexAttribArray(hb);gc=Jb||2;if(ya.type!==xa||ya.size!==gc||ya.buffer!==Bb||ya.normalized!==Sa||ya.offset!==Kc||ya.stride!==Vb)u.bindBuffer(34962,Bb.buffer),u.vertexAttribPointer(hb,gc,xa,Sa,Vb,Kc),ya.type=xa,ya.size=gc,ya.buffer=Bb,ya.normalized=
Sa,ya.offset=Kc,ya.stride=Vb;ya.divisor!==yb&&(x.vertexAttribDivisorANGLE(hb,yb),ya.divisor=yb)}else if(ya.buffer&&(u.disableVertexAttribArray(hb),ya.buffer=null),ya.x!==Ja||ya.y!==Ob||ya.z!==eb||ya.w!==ce)u.vertexAttrib4f(hb,Ja,Ob,eb,ce),ya.x=Ja,ya.y=Ob,ya.z=eb,ya.w=ce;l.buffer=z.positionBuffer;Da=!1;ob=null;pb=0;Xa=!1;nc=Ya=0;ed=1;tc=0;Va=5126;xc=Ea=bd=Mb=0;ka(l)?(Da=!0,ob=L.createStream(34962,l),Va=ob.dtype):(ob=L.getBuffer(l))?Va=ob.dtype:"constant"in l?(ed=2,"number"===typeof l.constant?(bd=
l.constant,Ea=xc=Mb=0):(bd=0<l.constant.length?l.constant[0]:0,Ea=1<l.constant.length?l.constant[1]:0,xc=2<l.constant.length?l.constant[2]:0,Mb=3<l.constant.length?l.constant[3]:0)):(ob=ka(l.buffer)?L.createStream(34962,l.buffer):L.getBuffer(l.buffer),Va="type"in l?G[l.type]:ob.dtype,Xa=!!l.normalized,nc=l.size|0,Ya=l.offset|0,tc=l.stride|0,pb=l.divisor|0);Pa=zb.location;Ba=K[Pa];if(1===ed){Ba.buffer||u.enableVertexAttribArray(Pa);kb=nc||2;if(Ba.type!==Va||Ba.size!==kb||Ba.buffer!==ob||Ba.normalized!==
Xa||Ba.offset!==Ya||Ba.stride!==tc)u.bindBuffer(34962,ob.buffer),u.vertexAttribPointer(Pa,kb,Va,Xa,tc,Ya),Ba.type=Va,Ba.size=kb,Ba.buffer=ob,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=tc;Ba.divisor!==pb&&(x.vertexAttribDivisorANGLE(Pa,pb),Ba.divisor=pb)}else if(Ba.buffer&&(u.disableVertexAttribArray(Pa),Ba.buffer=null),Ba.x!==bd||Ba.y!==Ea||Ba.z!==xc||Ba.w!==Mb)u.vertexAttrib4f(Pa,bd,Ea,xc,Mb),Ba.x=bd,Ba.y=Ea,Ba.z=xc,Ba.w=Mb;t.buffer=z.colorBuffer;ub=!1;Cb=null;qb=0;uc=!1;vd=vb=0;sc=1;Hd=0;Mc=5126;cc=
Wb=wd=id=0;ka(t)?(ub=!0,Cb=L.createStream(34962,t),Mc=Cb.dtype):(Cb=L.getBuffer(t))?Mc=Cb.dtype:"constant"in t?(sc=2,"number"===typeof t.constant?(wd=t.constant,Wb=cc=id=0):(wd=0<t.constant.length?t.constant[0]:0,Wb=1<t.constant.length?t.constant[1]:0,cc=2<t.constant.length?t.constant[2]:0,id=3<t.constant.length?t.constant[3]:0)):(Cb=ka(t.buffer)?L.createStream(34962,t.buffer):L.getBuffer(t.buffer),Mc="type"in t?G[t.type]:Cb.dtype,uc=!!t.normalized,vd=t.size|0,vb=t.offset|0,Hd=t.stride|0,qb=t.divisor|
0);Pb=d.location;Fa=K[Pb];if(1===sc){Fa.buffer||u.enableVertexAttribArray(Pb);$b=vd||4;if(Fa.type!==Mc||Fa.size!==$b||Fa.buffer!==Cb||Fa.normalized!==uc||Fa.offset!==vb||Fa.stride!==Hd)u.bindBuffer(34962,Cb.buffer),u.vertexAttribPointer(Pb,$b,Mc,uc,Hd,vb),Fa.type=Mc,Fa.size=$b,Fa.buffer=Cb,Fa.normalized=uc,Fa.offset=vb,Fa.stride=Hd;Fa.divisor!==qb&&(x.vertexAttribDivisorANGLE(Pb,qb),Fa.divisor=qb)}else if(Fa.buffer&&(u.disableVertexAttribArray(Pb),Fa.buffer=null),Fa.x!==wd||Fa.y!==Wb||Fa.z!==cc||
Fa.w!==id)u.vertexAttrib4f(Pb,wd,Wb,cc,id),Fa.x=wd,Fa.y=Wb,Fa.z=cc,Fa.w=id;R.buffer=z.colorBuffer;lb=!1;wb=null;Nb=0;Qb=!1;jc=hc=0;Sc=1;Bc=0;Cc=5126;Tc=cd=Nc=Dc=0;ka(R)?(lb=!0,wb=L.createStream(34962,R),Cc=wb.dtype):(wb=L.getBuffer(R))?Cc=wb.dtype:"constant"in R?(Sc=2,"number"===typeof R.constant?(Nc=R.constant,cd=Tc=Dc=0):(Nc=0<R.constant.length?R.constant[0]:0,cd=1<R.constant.length?R.constant[1]:0,Tc=2<R.constant.length?R.constant[2]:0,Dc=3<R.constant.length?R.constant[3]:0)):(wb=ka(R.buffer)?
L.createStream(34962,R.buffer):L.getBuffer(R.buffer),Cc="type"in R?G[R.type]:wb.dtype,Qb=!!R.normalized,jc=R.size|0,hc=R.offset|0,Bc=R.stride|0,Nb=R.divisor|0);Oc=P.location;Kb=K[Oc];if(1===Sc){Kb.buffer||u.enableVertexAttribArray(Oc);Fb=jc||4;if(Kb.type!==Cc||Kb.size!==Fb||Kb.buffer!==wb||Kb.normalized!==Qb||Kb.offset!==hc||Kb.stride!==Bc)u.bindBuffer(34962,wb.buffer),u.vertexAttribPointer(Oc,Fb,Cc,Qb,Bc,hc),Kb.type=Cc,Kb.size=Fb,Kb.buffer=wb,Kb.normalized=Qb,Kb.offset=hc,Kb.stride=Bc;Kb.divisor!==
Nb&&(x.vertexAttribDivisorANGLE(Oc,Nb),Kb.divisor=Nb)}else if(Kb.buffer&&(u.disableVertexAttribArray(Oc),Kb.buffer=null),Kb.x!==Nc||Kb.y!==cd||Kb.z!==Tc||Kb.w!==Dc)u.vertexAttrib4f(Oc,Nc,cd,Tc,Dc),Kb.x=Nc,Kb.y=cd,Kb.z=Tc,Kb.w=Dc;Pc=z.scale;Hc=Pc[0];ic=Pc[1];w&&Uc===Hc&&Xc===ic||(Uc=Hc,Xc=ic,u.uniform2f(Xb.location,Hc,ic));fd=z.translate;xe=fd[0];Yc=fd[1];w&&he===xe&&Jf===Yc||(he=xe,Jf=Yc,u.uniform2f(Qa.location,xe,Yc));ke=z.thickness;w&&ve===ke||(ve=ke,u.uniform1f(na.location,ke));ue=z.depth;w&&Td===
ue||(Td=ue,u.uniform1f(M.location,ue));Fd=h.call(this,T,z,w);Dd=Fd[0];Ec=Fd[1];jd=Fd[2];kd=Fd[3];w&&hd===Dd&&nd===Ec&&dd===jd&&Ad===kd||(hd=Dd,nd=Ec,dd=jd,Ad=kd,u.uniform4f(X.location,Dd,Ec,jd,kd));Bd=z.miterLimit;w&&Xe===Bd||(Xe=Bd,u.uniform1f(e.location,Bd));ne=g.call(this,T,z,w);w&&Ue===ne||(Ue=ne,u.uniform1f(Z.location,ne));ee=z.dashLength;w&&de===ee||(de=ee,u.uniform1f(n.location,ee));ae=z.opacity;w&&pe===ae||(pe=ae,u.uniform1f(Ra.location,ae));(Yd=z.dashTexture)&&"framebuffer"===Yd._reglType&&
(Yd=Yd.color[0]);ie=Yd._texture;u.uniform1i(pa.location,ie.bind());yc=z.count;0<yc?Jc?x.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),yc):x.drawArraysInstancedANGLE(5,0,4,yc):0>yc&&(Jc?u.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):u.drawArrays(5,0,4));T.viewportWidth=Zb;T.viewportHeight=Fc;Ab&&L.destroyStream($a);oc&&L.destroyStream(Ib);Ha&&L.destroyStream(Bb);Da&&L.destroyStream(ob);ub&&L.destroyStream(Cb);lb&&L.destroyStream(wb);ie.unbind()}ma.dirty=!0;fc.setVAO(null);q&&(y.cpuTime+=
performance.now()-r)},draw:function(g){var h,k,m,r,w,z,D,B,F,H,C,O,Q,ga,W,Ia,la,ra,sb,za,Na,Ga,Rd,Sd,rb,Vd,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd;h=S.next;h!==S.cur&&(h?u.bindFramebuffer(36160,h.framebuffer):u.bindFramebuffer(36160,null),S.cur=
h);if(ma.dirty){var sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic;sc=ca.dither;sc!==ma.dither&&(sc?u.enable(3024):u.disable(3024),ma.dither=sc);Hd=ca.depth_func;Hd!==ma.depth_func&&(u.depthFunc(Hd),ma.depth_func=Hd);Mc=sd[0];id=sd[1];if(Mc!==vc[0]||id!==vc[1])u.depthRange(Mc,id),vc[0]=Mc,vc[1]=id;wd=ca.depth_mask;wd!==ma.depth_mask&&(u.depthMask(wd),ma.depth_mask=wd);Wb=dc[0];cc=dc[1];Pb=dc[2];Fa=dc[3];if(Wb!==qc[0]||cc!==qc[1]||Pb!==qc[2]||Fa!==qc[3])u.colorMask(Wb,
cc,Pb,Fa),qc[0]=Wb,qc[1]=cc,qc[2]=Pb,qc[3]=Fa;$b=ca.frontFace;$b!==ma.frontFace&&(u.frontFace($b),ma.frontFace=$b);lb=ca.lineWidth;lb!==ma.lineWidth&&(u.lineWidth(lb),ma.lineWidth=lb);wb=ca.polygonOffset_enable;wb!==ma.polygonOffset_enable&&(wb?u.enable(32823):u.disable(32823),ma.polygonOffset_enable=wb);Nb=Y[0];Qb=Y[1];if(Nb!==J[0]||Qb!==J[1])u.polygonOffset(Nb,Qb),J[0]=Nb,J[1]=Qb;hc=ca.sample_alpha;hc!==ma.sample_alpha&&(hc?u.enable(32926):u.disable(32926),ma.sample_alpha=hc);jc=ca.sample_enable;
jc!==ma.sample_enable&&(jc?u.enable(32928):u.disable(32928),ma.sample_enable=jc);Sc=ja[0];Bc=ja[1];if(Sc!==Ca[0]||Bc!==Ca[1])u.sampleCoverage(Sc,Bc),Ca[0]=Sc,Ca[1]=Bc;Cc=ca.stencil_mask;Cc!==ma.stencil_mask&&(u.stencilMask(Cc),ma.stencil_mask=Cc);Dc=Zc[0];Nc=Zc[1];cd=Zc[2];if(Dc!==E[0]||Nc!==E[1]||cd!==E[2])u.stencilFunc(Dc,Nc,cd),E[0]=Dc,E[1]=Nc,E[2]=cd;Tc=ta[0];Oc=ta[1];Kb=ta[2];Fb=ta[3];if(Tc!==V[0]||Oc!==V[1]||Kb!==V[2]||Fb!==V[3])u.stencilOpSeparate(Tc,Oc,Kb,Fb),V[0]=Tc,V[1]=Oc,V[2]=Kb,V[3]=
Fb;Pc=v[0];Hc=v[1];Uc=v[2];ic=v[3];if(Pc!==ha[0]||Hc!==ha[1]||Uc!==ha[2]||ic!==ha[3])u.stencilOpSeparate(Pc,Hc,Uc,ic),ha[0]=Pc,ha[1]=Hc,ha[2]=Uc,ha[3]=ic}k=g.viewport;m=k.x|0;r=k.y|0;w="width"in k?k.width|0:T.framebufferWidth-m;z="height"in k?k.height|0:T.framebufferHeight-r;D=T.viewportWidth;T.viewportWidth=w;B=T.viewportHeight;T.viewportHeight=z;u.viewport(m,r,w,z);qa[0]=m;qa[1]=r;qa[2]=w;qa[3]=z;u.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;u.enable(3042);ma.blend_enable=!0;u.blendEquationSeparate(32774,
32774);da[0]=32774;da[1]=32774;u.blendFuncSeparate(770,771,773,1);Yb[0]=770;Yb[1]=771;Yb[2]=773;Yb[3]=1;u.enable(2884);ma.cull_enable=!0;u.cullFace(1029);ma.cull_face=1029;(F=q.call(this,T,g,0))?u.enable(2929):u.disable(2929);ma.depth_enable=F;H=g.viewport;C=H.x|0;O=H.y|0;Q="width"in H?H.width|0:T.framebufferWidth-C;ga="height"in H?H.height|0:T.framebufferHeight-O;u.scissor(C,O,Q,ga);Qc[0]=C;Qc[1]=O;Qc[2]=Q;Qc[3]=ga;u.enable(3089);ma.scissor_enable=!0;u.disable(2960);ma.stencil_enable=!1;if(W=ma.profile)Ia=
performance.now(),y.count++;u.useProgram(I.program);la=Za.angle_instanced_arrays;fc.setVAO(null);ba.buffer=g.positionBuffer;ra=!1;sb=null;za=0;Na=!1;Rd=Ga=0;Sd=1;rb=0;Vd=5126;od=ud=ld=pd=0;ka(ba)?(ra=!0,sb=L.createStream(34962,ba),Vd=sb.dtype):(sb=L.getBuffer(ba))?Vd=sb.dtype:"constant"in ba?(Sd=2,"number"===typeof ba.constant?(ld=ba.constant,ud=od=pd=0):(ld=0<ba.constant.length?ba.constant[0]:0,ud=1<ba.constant.length?ba.constant[1]:0,od=2<ba.constant.length?ba.constant[2]:0,pd=3<ba.constant.length?
ba.constant[3]:0)):(sb=ka(ba.buffer)?L.createStream(34962,ba.buffer):L.getBuffer(ba.buffer),Vd="type"in ba?G[ba.type]:sb.dtype,Na=!!ba.normalized,Rd=ba.size|0,Ga=ba.offset|0,rb=ba.stride|0,za=ba.divisor|0);gd=A.location;zc=K[gd];if(1===Sd){zc.buffer||u.enableVertexAttribArray(gd);qd=Rd||2;if(zc.type!==Vd||zc.size!==qd||zc.buffer!==sb||zc.normalized!==Na||zc.offset!==Ga||zc.stride!==rb)u.bindBuffer(34962,sb.buffer),u.vertexAttribPointer(gd,qd,Vd,Na,rb,Ga),zc.type=Vd,zc.size=qd,zc.buffer=sb,zc.normalized=
Na,zc.offset=Ga,zc.stride=rb;zc.divisor!==za&&(la.vertexAttribDivisorANGLE(gd,za),zc.divisor=za)}else if(zc.buffer&&(u.disableVertexAttribArray(gd),zc.buffer=null),zc.x!==ld||zc.y!==ud||zc.z!==od||zc.w!==pd)u.vertexAttrib4f(gd,ld,ud,od,pd),zc.x=ld,zc.y=ud,zc.z=od,zc.w=pd;wa.buffer=g.positionBuffer;Rc=!1;Lc=null;rc=0;fb=!1;Db=kc=0;pc=1;Ta=0;Jc=5126;md=Cd=$c=bc=0;ka(wa)?(Rc=!0,Lc=L.createStream(34962,wa),Jc=Lc.dtype):(Lc=L.getBuffer(wa))?Jc=Lc.dtype:"constant"in wa?(pc=2,"number"===typeof wa.constant?
($c=wa.constant,Cd=md=bc=0):($c=0<wa.constant.length?wa.constant[0]:0,Cd=1<wa.constant.length?wa.constant[1]:0,md=2<wa.constant.length?wa.constant[2]:0,bc=3<wa.constant.length?wa.constant[3]:0)):(Lc=ka(wa.buffer)?L.createStream(34962,wa.buffer):L.getBuffer(wa.buffer),Jc="type"in wa?G[wa.type]:Lc.dtype,fb=!!wa.normalized,Db=wa.size|0,kc=wa.offset|0,Ta=wa.stride|0,rc=wa.divisor|0);Ac=ea.location;Zb=K[Ac];if(1===pc){Zb.buffer||u.enableVertexAttribArray(Ac);Fc=Db||2;if(Zb.type!==Jc||Zb.size!==Fc||Zb.buffer!==
Lc||Zb.normalized!==fb||Zb.offset!==kc||Zb.stride!==Ta)u.bindBuffer(34962,Lc.buffer),u.vertexAttribPointer(Ac,Fc,Jc,fb,Ta,kc),Zb.type=Jc,Zb.size=Fc,Zb.buffer=Lc,Zb.normalized=fb,Zb.offset=kc,Zb.stride=Ta;Zb.divisor!==rc&&(la.vertexAttribDivisorANGLE(Ac,rc),Zb.divisor=rc)}else if(Zb.buffer&&(u.disableVertexAttribArray(Ac),Zb.buffer=null),Zb.x!==$c||Zb.y!==Cd||Zb.z!==md||Zb.w!==bc)u.vertexAttrib4f(Ac,$c,Cd,md,bc),Zb.x=$c,Zb.y=Cd,Zb.z=md,Zb.w=bc;oa.buffer=g.positionBuffer;ad=!1;La=null;Eb=0;Wa=!1;td=
ua=0;Ab=1;$a=0;Gb=5126;ge=Sb=wc=bb=0;ka(oa)?(ad=!0,La=L.createStream(34962,oa),Gb=La.dtype):(La=L.getBuffer(oa))?Gb=La.dtype:"constant"in oa?(Ab=2,"number"===typeof oa.constant?(wc=oa.constant,Sb=ge=bb=0):(wc=0<oa.constant.length?oa.constant[0]:0,Sb=1<oa.constant.length?oa.constant[1]:0,ge=2<oa.constant.length?oa.constant[2]:0,bb=3<oa.constant.length?oa.constant[3]:0)):(La=ka(oa.buffer)?L.createStream(34962,oa.buffer):L.getBuffer(oa.buffer),Gb="type"in oa?G[oa.type]:La.dtype,Wa=!!oa.normalized,td=
oa.size|0,ua=oa.offset|0,$a=oa.stride|0,Eb=oa.divisor|0);ac=aa.location;Tb=K[ac];if(1===Ab){Tb.buffer||u.enableVertexAttribArray(ac);rd=td||2;if(Tb.type!==Gb||Tb.size!==rd||Tb.buffer!==La||Tb.normalized!==Wa||Tb.offset!==ua||Tb.stride!==$a)u.bindBuffer(34962,La.buffer),u.vertexAttribPointer(ac,rd,Gb,Wa,$a,ua),Tb.type=Gb,Tb.size=rd,Tb.buffer=La,Tb.normalized=Wa,Tb.offset=ua,Tb.stride=$a;Tb.divisor!==Eb&&(la.vertexAttribDivisorANGLE(ac,Eb),Tb.divisor=Eb)}else if(Tb.buffer&&(u.disableVertexAttribArray(ac),
Tb.buffer=null),Tb.x!==wc||Tb.y!==Sb||Tb.z!==ge||Tb.w!==bb)u.vertexAttrib4f(ac,wc,Sb,ge,bb),Tb.x=wc,Tb.y=Sb,Tb.z=ge,Tb.w=bb;l.buffer=g.positionBuffer;Ub=!1;Ma=null;mb=0;tb=!1;Oa=gb=0;oc=1;Ib=0;Vc=5126;ec=Gc=mc=cb=0;ka(l)?(Ub=!0,Ma=L.createStream(34962,l),Vc=Ma.dtype):(Ma=L.getBuffer(l))?Vc=Ma.dtype:"constant"in l?(oc=2,"number"===typeof l.constant?(mc=l.constant,Gc=ec=cb=0):(mc=0<l.constant.length?l.constant[0]:0,Gc=1<l.constant.length?l.constant[1]:0,ec=2<l.constant.length?l.constant[2]:0,cb=3<l.constant.length?
l.constant[3]:0)):(Ma=ka(l.buffer)?L.createStream(34962,l.buffer):L.getBuffer(l.buffer),Vc="type"in l?G[l.type]:Ma.dtype,tb=!!l.normalized,Oa=l.size|0,gb=l.offset|0,Ib=l.stride|0,mb=l.divisor|0);ib=zb.location;jb=K[ib];if(1===oc){jb.buffer||u.enableVertexAttribArray(ib);sa=Oa||2;if(jb.type!==Vc||jb.size!==sa||jb.buffer!==Ma||jb.normalized!==tb||jb.offset!==gb||jb.stride!==Ib)u.bindBuffer(34962,Ma.buffer),u.vertexAttribPointer(ib,sa,Vc,tb,Ib,gb),jb.type=Vc,jb.size=sa,jb.buffer=Ma,jb.normalized=tb,
jb.offset=gb,jb.stride=Ib;jb.divisor!==mb&&(la.vertexAttribDivisorANGLE(ib,mb),jb.divisor=mb)}else if(jb.buffer&&(u.disableVertexAttribArray(ib),jb.buffer=null),jb.x!==mc||jb.y!==Gc||jb.z!==ec||jb.w!==cb)u.vertexAttrib4f(ib,mc,Gc,ec,cb),jb.x=mc,jb.y=Gc,jb.z=ec,jb.w=cb;t.buffer=g.colorBuffer;nb=!1;va=null;Ua=0;ab=!1;db=Aa=0;Ha=1;Bb=0;yb=5126;Lb=Jb=Kc=Sa=0;ka(t)?(nb=!0,va=L.createStream(34962,t),yb=va.dtype):(va=L.getBuffer(t))?yb=va.dtype:"constant"in t?(Ha=2,"number"===typeof t.constant?(Kc=t.constant,
Jb=Lb=Sa=0):(Kc=0<t.constant.length?t.constant[0]:0,Jb=1<t.constant.length?t.constant[1]:0,Lb=2<t.constant.length?t.constant[2]:0,Sa=3<t.constant.length?t.constant[3]:0)):(va=ka(t.buffer)?L.createStream(34962,t.buffer):L.getBuffer(t.buffer),yb="type"in t?G[t.type]:va.dtype,ab=!!t.normalized,db=t.size|0,Aa=t.offset|0,Bb=t.stride|0,Ua=t.divisor|0);Vb=d.location;xa=K[Vb];if(1===Ha){xa.buffer||u.enableVertexAttribArray(Vb);ce=db||4;if(xa.type!==yb||xa.size!==ce||xa.buffer!==va||xa.normalized!==ab||xa.offset!==
Aa||xa.stride!==Bb)u.bindBuffer(34962,va.buffer),u.vertexAttribPointer(Vb,ce,yb,ab,Bb,Aa),xa.type=yb,xa.size=ce,xa.buffer=va,xa.normalized=ab,xa.offset=Aa,xa.stride=Bb;xa.divisor!==Ua&&(la.vertexAttribDivisorANGLE(Vb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(u.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Kc||xa.y!==Jb||xa.z!==Lb||xa.w!==Sa)u.vertexAttrib4f(Vb,Kc,Jb,Lb,Sa),xa.x=Kc,xa.y=Jb,xa.z=Lb,xa.w=Sa;R.buffer=g.colorBuffer;Ja=!1;Ob=null;eb=0;hb=!1;gc=ya=0;Da=1;ob=0;pb=5126;ed=nc=Ya=Xa=0;ka(R)?
(Ja=!0,Ob=L.createStream(34962,R),pb=Ob.dtype):(Ob=L.getBuffer(R))?pb=Ob.dtype:"constant"in R?(Da=2,"number"===typeof R.constant?(Ya=R.constant,nc=ed=Xa=0):(Ya=0<R.constant.length?R.constant[0]:0,nc=1<R.constant.length?R.constant[1]:0,ed=2<R.constant.length?R.constant[2]:0,Xa=3<R.constant.length?R.constant[3]:0)):(Ob=ka(R.buffer)?L.createStream(34962,R.buffer):L.getBuffer(R.buffer),pb="type"in R?G[R.type]:Ob.dtype,hb=!!R.normalized,gc=R.size|0,ya=R.offset|0,ob=R.stride|0,eb=R.divisor|0);tc=P.location;
Va=K[tc];if(1===Da){Va.buffer||u.enableVertexAttribArray(tc);Mb=gc||4;if(Va.type!==pb||Va.size!==Mb||Va.buffer!==Ob||Va.normalized!==hb||Va.offset!==ya||Va.stride!==ob)u.bindBuffer(34962,Ob.buffer),u.vertexAttribPointer(tc,Mb,pb,hb,ob,ya),Va.type=pb,Va.size=Mb,Va.buffer=Ob,Va.normalized=hb,Va.offset=ya,Va.stride=ob;Va.divisor!==eb&&(la.vertexAttribDivisorANGLE(tc,eb),Va.divisor=eb)}else if(Va.buffer&&(u.disableVertexAttribArray(tc),Va.buffer=null),Va.x!==Ya||Va.y!==nc||Va.z!==ed||Va.w!==Xa)u.vertexAttrib4f(tc,
Ya,nc,ed,Xa),Va.x=Ya,Va.y=nc,Va.z=ed,Va.w=Xa;bd=fa.location;Ea=K[bd];Ea.buffer||u.enableVertexAttribArray(bd);if(5126!==Ea.type||1!==Ea.size||Ea.buffer!==f||!1!==Ea.normalized||0!==Ea.offset||8!==Ea.stride)u.bindBuffer(34962,f.buffer),u.vertexAttribPointer(bd,1,5126,!1,8,0),Ea.type=5126,Ea.size=1,Ea.buffer=f,Ea.normalized=!1,Ea.offset=0,Ea.stride=8;0!==Ea.divisor&&(la.vertexAttribDivisorANGLE(bd,0),Ea.divisor=0);xc=b.location;Pa=K[xc];Pa.buffer||u.enableVertexAttribArray(xc);if(5126!==Pa.type||1!==
Pa.size||Pa.buffer!==c||!1!==Pa.normalized||4!==Pa.offset||8!==Pa.stride)u.bindBuffer(34962,c.buffer),u.vertexAttribPointer(xc,1,5126,!1,8,4),Pa.type=5126,Pa.size=1,Pa.buffer=c,Pa.normalized=!1,Pa.offset=4,Pa.stride=8;0!==Pa.divisor&&(la.vertexAttribDivisorANGLE(xc,0),Pa.divisor=0);Ba=g.scale;u.uniform2f(Xb.location,Ba[0],Ba[1]);kb=g.translate;u.uniform2f(Qa.location,kb[0],kb[1]);u.uniform1f(na.location,g.thickness);u.uniform1f(M.location,g.depth);ub=x.call(this,T,g,0);u.uniform4f(X.location,ub[0],
ub[1],ub[2],ub[3]);u.uniform1f(e.location,g.miterLimit);Cb=a.call(this,T,g,0);u.uniform1f(Z.location,Cb);u.uniform1f(n.location,g.dashLength);u.uniform1f(Ra.location,g.opacity);(qb=g.dashTexture)&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);uc=qb._texture;u.uniform1i(pa.location,uc.bind());(vb=N.elements)?u.bindBuffer(34963,vb.buffer.buffer):fc.currentVAO&&(vb=Rb.getElements(fc.currentVAO.elements))&&u.bindBuffer(34963,vb.buffer.buffer);vd=g.count;0<vd?vb?la.drawElementsInstancedANGLE(5,4,vb.type,
0<<(vb.type-5121>>1),vd):la.drawArraysInstancedANGLE(5,0,4,vd):0>vd&&(vb?u.drawElements(5,4,vb.type,0<<(vb.type-5121>>1)):u.drawArrays(5,0,4));ma.dirty=!0;fc.setVAO(null);T.viewportWidth=D;T.viewportHeight=B;W&&(y.cpuTime+=performance.now()-Ia);ra&&L.destroyStream(sb);Rc&&L.destroyStream(Lc);ad&&L.destroyStream(La);Ub&&L.destroyStream(Ma);nb&&L.destroyStream(va);Ja&&L.destroyStream(Ob);uc.unbind()},scope:function(b,a,d){var e,g,h,k,n,q,v,u,x,J,A,E,I,Y,M,Q,K,P,S,U,V,ea,ja,X,ha,Z,da,ta,dc,fa,pa,Ia,
qa,Ca,aa,sd,Db,na,Ta,vc,bc,Qc,Ka,Yb,Ac,Zb,Fc,ad,La,Eb,Wa,ua,qc,Ab,$a,Gb,bb,wc,Sb,Za,ac,Tb,Qa,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Zc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,Rb,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,zb,sc,Ra,Mc,id,Xb,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,fc,he,Yc,Jf,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Xe,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Ke,Oe,Le,re,Be,
Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,pf,mf,qf,Af,Bf,Ne,ze,nf,of,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf;e=b.viewport;g=e.x|0;h=e.y|0;k="width"in e?e.width|0:T.framebufferWidth-g;n="height"in e?e.height|0:T.framebufferHeight-h;q=T.viewportWidth;T.viewportWidth=k;v=T.viewportHeight;T.viewportHeight=n;u=ga[0];ga[0]=g;x=ga[1];ga[1]=h;J=ga[2];ga[2]=k;A=ga[3];ga[3]=n;E=Ga[0];Ga[0]=0;I=Ga[1];Ga[1]=0;Y=Ga[2];Ga[2]=0;M=Ga[3];Ga[3]=0;Q=ca.blend_enable;ca.blend_enable=
!0;K=rb[0];rb[0]=32774;P=rb[1];rb[1]=32774;S=ra[0];ra[0]=770;U=ra[1];ra[1]=771;V=ra[2];ra[2]=773;ea=ra[3];ra[3]=1;ja=ca.cull_enable;ca.cull_enable=!0;X=ca.cull_face;ca.cull_face=1029;ha=w.call(this,T,b,d);Z=ca.depth_enable;ca.depth_enable=ha;da=b.viewport;ta=da.x|0;dc=da.y|0;fa="width"in da?da.width|0:T.framebufferWidth-ta;pa="height"in da?da.height|0:T.framebufferHeight-dc;Ia=sb[0];sb[0]=ta;qa=sb[1];sb[1]=dc;Ca=sb[2];sb[2]=fa;aa=sb[3];sb[3]=pa;sd=ca.scissor_enable;ca.scissor_enable=!0;Db=ca.stencil_enable;
ca.stencil_enable=!1;if(na=ma.profile)Ta=performance.now(),y.count++;vc=N.offset;N.offset=0;bc=N.count;N.count=4;Qc=b.count;Ka=N.instances;N.instances=Qc;Yb=N.primitive;N.primitive=5;Ac=b.dashLength;Zb=Na[23];Na[23]=Ac;Fc=b.dashTexture;ad=Na[24];Na[24]=Fc;La=b.depth;Eb=Na[22];Na[22]=La;Wa=b.id;ua=Na[31];Na[31]=Wa;qc=b.miterLimit;Ab=Na[32];Na[32]=qc;$a=C.call(this,T,b,d);Gb=Na[33];Na[33]=$a;bb=b.opacity;wc=Na[10];Na[10]=bb;Sb=T.pixelRatio;Za=Na[34];Na[34]=Sb;ac=b.scale;Tb=Na[6];Na[6]=ac;Qa=b.scaleFract;
Ub=Na[7];Na[7]=Qa;Ma=b.thickness;mb=Na[21];Na[21]=Ma;tb=b.translate;gb=Na[8];Na[8]=tb;Oa=b.translateFract;oc=Na[9];Na[9]=Oa;Ib=W.call(this,T,b,d);Zc=Na[3];Na[3]=Ib;t.buffer=b.colorBuffer;cb=!1;mc=null;Gc=0;ec=!1;jb=ib=0;sa=1;nb=0;va=5126;db=Aa=ab=Ua=0;ka(t)?(cb=!0,mc=L.createStream(34962,t),va=mc.dtype):(mc=L.getBuffer(t))?va=mc.dtype:"constant"in t?(sa=2,"number"===typeof t.constant?(ab=t.constant,Aa=db=Ua=0):(ab=0<t.constant.length?t.constant[0]:0,Aa=1<t.constant.length?t.constant[1]:0,db=2<t.constant.length?
t.constant[2]:0,Ua=3<t.constant.length?t.constant[3]:0)):(mc=ka(t.buffer)?L.createStream(34962,t.buffer):L.getBuffer(t.buffer),va="type"in t?G[t.type]:mc.dtype,ec=!!t.normalized,jb=t.size|0,ib=t.offset|0,nb=t.stride|0,Gc=t.divisor|0);Ha=O.buffer;O.buffer=mc;Bb=O.divisor;O.divisor=Gc;yb=O.normalized;O.normalized=ec;Sa=O.offset;O.offset=ib;Kc=O.size;O.size=jb;Jb=O.state;O.state=sa;Lb=O.stride;O.stride=nb;Vb=O.type;O.type=va;xa=O.w;O.w=Ua;Rb=O.x;O.x=ab;Ja=O.y;O.y=Aa;Ob=O.z;O.z=db;ba.buffer=b.positionBuffer;
eb=!1;hb=null;ya=0;gc=!1;ob=Da=0;pb=1;Xa=0;Ya=5126;Va=tc=ed=nc=0;ka(ba)?(eb=!0,hb=L.createStream(34962,ba),Ya=hb.dtype):(hb=L.getBuffer(ba))?Ya=hb.dtype:"constant"in ba?(pb=2,"number"===typeof ba.constant?(ed=ba.constant,tc=Va=nc=0):(ed=0<ba.constant.length?ba.constant[0]:0,tc=1<ba.constant.length?ba.constant[1]:0,Va=2<ba.constant.length?ba.constant[2]:0,nc=3<ba.constant.length?ba.constant[3]:0)):(hb=ka(ba.buffer)?L.createStream(34962,ba.buffer):L.getBuffer(ba.buffer),Ya="type"in ba?G[ba.type]:hb.dtype,
gc=!!ba.normalized,ob=ba.size|0,Da=ba.offset|0,Xa=ba.stride|0,ya=ba.divisor|0);Mb=F.buffer;F.buffer=hb;bd=F.divisor;F.divisor=ya;Ea=F.normalized;F.normalized=gc;xc=F.offset;F.offset=Da;Pa=F.size;F.size=ob;Ba=F.state;F.state=pb;kb=F.stride;F.stride=Xa;ub=F.type;F.type=Ya;Cb=F.w;F.w=nc;qb=F.x;F.x=ed;uc=F.y;F.y=tc;vb=F.z;F.z=Va;R.buffer=b.colorBuffer;zb=!1;sc=null;Ra=0;Mc=!1;Xb=id=0;Wb=1;cc=0;Pb=5126;wb=lb=$b=Fa=0;ka(R)?(zb=!0,sc=L.createStream(34962,R),Pb=sc.dtype):(sc=L.getBuffer(R))?Pb=sc.dtype:"constant"in
R?(Wb=2,"number"===typeof R.constant?($b=R.constant,lb=wb=Fa=0):($b=0<R.constant.length?R.constant[0]:0,lb=1<R.constant.length?R.constant[1]:0,wb=2<R.constant.length?R.constant[2]:0,Fa=3<R.constant.length?R.constant[3]:0)):(sc=ka(R.buffer)?L.createStream(34962,R.buffer):L.getBuffer(R.buffer),Pb="type"in R?G[R.type]:sc.dtype,Mc=!!R.normalized,Xb=R.size|0,id=R.offset|0,cc=R.stride|0,Ra=R.divisor|0);Nb=r.buffer;r.buffer=sc;Qb=r.divisor;r.divisor=Ra;hc=r.normalized;r.normalized=Mc;jc=r.offset;r.offset=
id;Sc=r.size;r.size=Xb;Bc=r.state;r.state=Wb;Cc=r.stride;r.stride=cc;Dc=r.type;r.type=Pb;Nc=r.w;r.w=Fa;cd=r.x;r.x=$b;Tc=r.y;r.y=lb;Oc=r.z;r.z=wb;wa.buffer=b.positionBuffer;Kb=!1;Fb=null;Pc=0;Hc=!1;ic=Uc=0;Xc=1;fd=0;fc=5126;ke=Jf=Yc=he=0;ka(wa)?(Kb=!0,Fb=L.createStream(34962,wa),fc=Fb.dtype):(Fb=L.getBuffer(wa))?fc=Fb.dtype:"constant"in wa?(Xc=2,"number"===typeof wa.constant?(Yc=wa.constant,Jf=ke=he=0):(Yc=0<wa.constant.length?wa.constant[0]:0,Jf=1<wa.constant.length?wa.constant[1]:0,ke=2<wa.constant.length?
wa.constant[2]:0,he=3<wa.constant.length?wa.constant[3]:0)):(Fb=ka(wa.buffer)?L.createStream(34962,wa.buffer):L.getBuffer(wa.buffer),fc="type"in wa?G[wa.type]:Fb.dtype,Hc=!!wa.normalized,ic=wa.size|0,Uc=wa.offset|0,fd=wa.stride|0,Pc=wa.divisor|0);ve=D.buffer;D.buffer=Fb;ue=D.divisor;D.divisor=Pc;Td=D.normalized;D.normalized=Hc;Fd=D.offset;D.offset=Uc;Dd=D.size;D.size=ic;hd=D.state;D.state=Xc;Ec=D.stride;D.stride=fd;nd=D.type;D.type=fc;jd=D.w;D.w=he;dd=D.x;D.x=Yc;kd=D.y;D.y=Jf;Ad=D.z;D.z=ke;Bd=z.buffer;
z.buffer=f;Xe=z.divisor;z.divisor=0;ne=z.normalized;z.normalized=!1;Ue=z.offset;z.offset=0;ee=z.size;z.size=0;de=z.state;z.state=1;ae=z.stride;z.stride=8;pe=z.type;z.type=5126;Yd=z.w;z.w=0;ie=z.x;z.x=0;yc=z.y;z.y=0;Wc=z.z;z.z=0;qe=B.buffer;B.buffer=c;le=B.divisor;B.divisor=0;Ed=B.normalized;B.normalized=!1;Kd=B.offset;B.offset=4;Md=B.size;B.size=0;Nd=B.state;B.state=1;je=B.stride;B.stride=8;Ee=B.type;B.type=5126;we=B.w;B.w=0;oe=B.x;B.x=0;Ke=B.y;B.y=0;Oe=B.z;B.z=0;oa.buffer=b.positionBuffer;Le=!1;
re=null;Be=0;Fe=!1;He=Ge=0;Ce=1;Gd=0;Qd=5126;yd=Ie=Zd=Wd=0;ka(oa)?(Le=!0,re=L.createStream(34962,oa),Qd=re.dtype):(re=L.getBuffer(oa))?Qd=re.dtype:"constant"in oa?(Ce=2,"number"===typeof oa.constant?(Zd=oa.constant,Ie=yd=Wd=0):(Zd=0<oa.constant.length?oa.constant[0]:0,Ie=1<oa.constant.length?oa.constant[1]:0,yd=2<oa.constant.length?oa.constant[2]:0,Wd=3<oa.constant.length?oa.constant[3]:0)):(re=ka(oa.buffer)?L.createStream(34962,oa.buffer):L.getBuffer(oa.buffer),Qd="type"in oa?G[oa.type]:re.dtype,
Fe=!!oa.normalized,He=oa.size|0,Ge=oa.offset|0,Gd=oa.stride|0,Be=oa.divisor|0);Od=H.buffer;H.buffer=re;ye=H.divisor;H.divisor=Be;Je=H.normalized;H.normalized=Fe;ff=H.offset;H.offset=Ge;Ye=H.size;H.size=He;Pe=H.state;H.state=Ce;Me=H.stride;H.stride=Gd;We=H.type;H.type=Qd;Te=H.w;H.w=Wd;Qe=H.x;H.x=Zd;Re=H.y;H.y=Ie;Pd=H.z;H.z=yd;l.buffer=b.positionBuffer;Ud=!1;Se=null;gf=0;lf=!1;hf=cf=0;jf=1;kf=0;pf=5126;Bf=Af=qf=mf=0;ka(l)?(Ud=!0,Se=L.createStream(34962,l),pf=Se.dtype):(Se=L.getBuffer(l))?pf=Se.dtype:
"constant"in l?(jf=2,"number"===typeof l.constant?(qf=l.constant,Af=Bf=mf=0):(qf=0<l.constant.length?l.constant[0]:0,Af=1<l.constant.length?l.constant[1]:0,Bf=2<l.constant.length?l.constant[2]:0,mf=3<l.constant.length?l.constant[3]:0)):(Se=ka(l.buffer)?L.createStream(34962,l.buffer):L.getBuffer(l.buffer),pf="type"in l?G[l.type]:Se.dtype,lf=!!l.normalized,hf=l.size|0,cf=l.offset|0,kf=l.stride|0,gf=l.divisor|0);Ne=m.buffer;m.buffer=Se;ze=m.divisor;m.divisor=gf;nf=m.normalized;m.normalized=lf;of=m.offset;
m.offset=cf;Cf=m.size;m.size=hf;Ff=m.state;m.state=jf;zf=m.stride;m.stride=kf;Df=m.type;m.type=pf;Ef=m.w;m.w=mf;uf=m.x;m.x=qf;vf=m.y;m.y=Af;tf=m.z;m.z=Bf;wf=za.vert;za.vert=36;xf=za.frag;za.frag=35;ma.dirty=!0;a(T,b,d);T.viewportWidth=q;T.viewportHeight=v;ga[0]=u;ga[1]=x;ga[2]=J;ga[3]=A;Ga[0]=E;Ga[1]=I;Ga[2]=Y;Ga[3]=M;ca.blend_enable=Q;rb[0]=K;rb[1]=P;ra[0]=S;ra[1]=U;ra[2]=V;ra[3]=ea;ca.cull_enable=ja;ca.cull_face=X;ca.depth_enable=Z;sb[0]=Ia;sb[1]=qa;sb[2]=Ca;sb[3]=aa;ca.scissor_enable=sd;ca.stencil_enable=
Db;na&&(y.cpuTime+=performance.now()-Ta);N.offset=vc;N.count=bc;N.instances=Ka;N.primitive=Yb;Na[23]=Zb;Na[24]=ad;Na[22]=Eb;Na[31]=ua;Na[32]=Ab;Na[33]=Gb;Na[10]=wc;Na[34]=Za;Na[6]=Tb;Na[7]=Ub;Na[21]=mb;Na[8]=gb;Na[9]=oc;Na[3]=Zc;cb&&L.destroyStream(mc);O.buffer=Ha;O.divisor=Bb;O.normalized=yb;O.offset=Sa;O.size=Kc;O.state=Jb;O.stride=Lb;O.type=Vb;O.w=xa;O.x=Rb;O.y=Ja;O.z=Ob;eb&&L.destroyStream(hb);F.buffer=Mb;F.divisor=bd;F.normalized=Ea;F.offset=xc;F.size=Pa;F.state=Ba;F.stride=kb;F.type=ub;F.w=
Cb;F.x=qb;F.y=uc;F.z=vb;zb&&L.destroyStream(sc);r.buffer=Nb;r.divisor=Qb;r.normalized=hc;r.offset=jc;r.size=Sc;r.state=Bc;r.stride=Cc;r.type=Dc;r.w=Nc;r.x=cd;r.y=Tc;r.z=Oc;Kb&&L.destroyStream(Fb);D.buffer=ve;D.divisor=ue;D.normalized=Td;D.offset=Fd;D.size=Dd;D.state=hd;D.stride=Ec;D.type=nd;D.w=jd;D.x=dd;D.y=kd;D.z=Ad;z.buffer=Bd;z.divisor=Xe;z.normalized=ne;z.offset=Ue;z.size=ee;z.state=de;z.stride=ae;z.type=pe;z.w=Yd;z.x=ie;z.y=yc;z.z=Wc;B.buffer=qe;B.divisor=le;B.normalized=Ed;B.offset=Kd;B.size=
Md;B.state=Nd;B.stride=je;B.type=Ee;B.w=we;B.x=oe;B.y=Ke;B.z=Oe;Le&&L.destroyStream(re);H.buffer=Od;H.divisor=ye;H.normalized=Je;H.offset=ff;H.size=Ye;H.state=Pe;H.stride=Me;H.type=We;H.w=Te;H.x=Qe;H.y=Re;H.z=Pd;Ud&&L.destroyStream(Se);m.buffer=Ne;m.divisor=ze;m.normalized=nf;m.offset=of;m.size=Cf;m.state=Ff;m.stride=zf;m.type=Df;m.w=Ef;m.x=uf;m.y=vf;m.z=tf;za.vert=wf;za.frag=xf;ma.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(k,y,q,I,
f,c,x,a,w,C,W,O,F,r,D,z,B,H,m){var Q,Ia,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,aa,Ra,zb,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra;Q=k.attributes;Ia=k.buffer;h=k.context;g=k.current;d=k.draw;A=k.elements;P=k.extensions;ea=k.framebuffer;n=k.gl;pa=k.isBufferArgs;M=k.next;fa=k.shader;b=k.uniforms;e=k.vao;Z=M.blend_color;aa=g.blend_color;Ra=M.blend_equation;zb=g.blend_equation;Xb=M.blend_func;na=g.blend_func;Qa=M.colorMask;X=g.colorMask;K=M.depth_range;L=g.depth_range;T=M.polygonOffset_offset;
ma=g.polygonOffset_offset;N=M.sample_coverage;Rb=g.sample_coverage;Za=M.scissor_box;S=g.scissor_box;u=M.stencil_func;ka=g.stencil_func;ca=M.stencil_opBack;za=g.stencil_opBack;Na=M.stencil_opFront;fc=g.stencil_opFront;Ga=M.viewport;U=g.viewport;rb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};da={offset:8,stride:8};ra={offset:8,stride:8};return{batch:function(b,a){var c,f,k,q,x,I;c=ea.next;c!==ea.cur&&(c?n.bindFramebuffer(36160,c.framebuffer):n.bindFramebuffer(36160,
null),ea.cur=c);if(g.dirty){var Z,fa,Qc,Ga,E,v,ha,ta,V,ga,qa,G,t,ba,R,wa,oa,l,lc,ia,p,Hb,xb,Za,Ra,Xb,be,Id,se,Ic,fe,te;Z=M.dither;Z!==g.dither&&(Z?n.enable(3024):n.disable(3024),g.dither=Z);fa=M.depth_func;fa!==g.depth_func&&(n.depthFunc(fa),g.depth_func=fa);Qc=K[0];Ga=K[1];if(Qc!==L[0]||Ga!==L[1])n.depthRange(Qc,Ga),L[0]=Qc,L[1]=Ga;E=M.depth_mask;E!==g.depth_mask&&(n.depthMask(E),g.depth_mask=E);v=Qa[0];ha=Qa[1];ta=Qa[2];V=Qa[3];if(v!==X[0]||ha!==X[1]||ta!==X[2]||V!==X[3])n.colorMask(v,ha,ta,V),
X[0]=v,X[1]=ha,X[2]=ta,X[3]=V;ga=M.cull_enable;ga!==g.cull_enable&&(ga?n.enable(2884):n.disable(2884),g.cull_enable=ga);qa=M.cull_face;qa!==g.cull_face&&(n.cullFace(qa),g.cull_face=qa);G=M.frontFace;G!==g.frontFace&&(n.frontFace(G),g.frontFace=G);t=M.lineWidth;t!==g.lineWidth&&(n.lineWidth(t),g.lineWidth=t);ba=M.polygonOffset_enable;ba!==g.polygonOffset_enable&&(ba?n.enable(32823):n.disable(32823),g.polygonOffset_enable=ba);R=T[0];wa=T[1];if(R!==ma[0]||wa!==ma[1])n.polygonOffset(R,wa),ma[0]=R,ma[1]=
wa;oa=M.sample_alpha;oa!==g.sample_alpha&&(oa?n.enable(32926):n.disable(32926),g.sample_alpha=oa);l=M.sample_enable;l!==g.sample_enable&&(l?n.enable(32928):n.disable(32928),g.sample_enable=l);lc=N[0];ia=N[1];if(lc!==Rb[0]||ia!==Rb[1])n.sampleCoverage(lc,ia),Rb[0]=lc,Rb[1]=ia;p=M.stencil_mask;p!==g.stencil_mask&&(n.stencilMask(p),g.stencil_mask=p);Hb=u[0];xb=u[1];Za=u[2];if(Hb!==ka[0]||xb!==ka[1]||Za!==ka[2])n.stencilFunc(Hb,xb,Za),ka[0]=Hb,ka[1]=xb,ka[2]=Za;Ra=Na[0];Xb=Na[1];be=Na[2];Id=Na[3];if(Ra!==
fc[0]||Xb!==fc[1]||be!==fc[2]||Id!==fc[3])n.stencilOpSeparate(Ra,Xb,be,Id),fc[0]=Ra,fc[1]=Xb,fc[2]=be,fc[3]=Id;se=ca[0];Ic=ca[1];fe=ca[2];te=ca[3];if(se!==za[0]||Ic!==za[1]||fe!==za[2]||te!==za[3])n.stencilOpSeparate(se,Ic,fe,te),za[0]=se,za[1]=Ic,za[2]=fe,za[3]=te}n.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;n.enable(3042);g.blend_enable=!0;n.blendEquationSeparate(32774,32774);zb[0]=32774;zb[1]=32774;n.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;n.disable(2929);
g.depth_enable=!1;n.enable(3089);g.scissor_enable=!0;n.disable(2960);g.stencil_enable=!1;if(f=g.profile)k=performance.now(),y.count+=a;n.useProgram(w.program);q=P.angle_instanced_arrays;var Jd;e.setVAO(null);Jd=d.instances;for(x=0;x<a;++x){I=b[x];var zd,Xd,Ld,Ze,yf,bf,xd,De,Rd,Sd,$d,Vd,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb;zd=I.viewport;
Xd=zd.x|0;Ld=zd.y|0;Ze="width"in zd?zd.width|0:h.framebufferWidth-Xd;yf="height"in zd?zd.height|0:h.framebufferHeight-Ld;bf=h.viewportWidth;h.viewportWidth=Ze;xd=h.viewportHeight;h.viewportHeight=yf;n.viewport(Xd,Ld,Ze,yf);U[0]=Xd;U[1]=Ld;U[2]=Ze;U[3]=yf;De=I.viewport;Rd=De.x|0;Sd=De.y|0;$d="width"in De?De.width|0:h.framebufferWidth-Rd;Vd="height"in De?De.height|0:h.framebufferHeight-Sd;n.scissor(Rd,Sd,$d,Vd);S[0]=Rd;S[1]=Sd;S[2]=$d;S[3]=Vd;da.buffer=I.positionBuffer;pd=!1;ld=null;ud=0;od=!1;zc=gd=
0;qd=1;Rc=0;Lc=5126;Db=kc=fb=rc=0;pa(da)?(pd=!0,ld=Ia.createStream(34962,da),Lc=ld.dtype):(ld=Ia.getBuffer(da))?Lc=ld.dtype:"constant"in da?(qd=2,"number"===typeof da.constant?(fb=da.constant,kc=Db=rc=0):(fb=0<da.constant.length?da.constant[0]:0,kc=1<da.constant.length?da.constant[1]:0,Db=2<da.constant.length?da.constant[2]:0,rc=3<da.constant.length?da.constant[3]:0)):(ld=pa(da.buffer)?Ia.createStream(34962,da.buffer):Ia.getBuffer(da.buffer),Lc="type"in da?rb[da.type]:ld.dtype,od=!!da.normalized,
zc=da.size|0,gd=da.offset|0,Rc=da.stride|0,ud=da.divisor|0);pc=r.location;Ta=Q[pc];if(1===qd){Ta.buffer||n.enableVertexAttribArray(pc);Jc=zc||2;if(Ta.type!==Lc||Ta.size!==Jc||Ta.buffer!==ld||Ta.normalized!==od||Ta.offset!==gd||Ta.stride!==Rc)n.bindBuffer(34962,ld.buffer),n.vertexAttribPointer(pc,Jc,Lc,od,Rc,gd),Ta.type=Lc,Ta.size=Jc,Ta.buffer=ld,Ta.normalized=od,Ta.offset=gd,Ta.stride=Rc;Ta.divisor!==ud&&(q.vertexAttribDivisorANGLE(pc,ud),Ta.divisor=ud)}else if(Ta.buffer&&(n.disableVertexAttribArray(pc),
Ta.buffer=null),Ta.x!==fb||Ta.y!==kc||Ta.z!==Db||Ta.w!==rc)n.vertexAttrib4f(pc,fb,kc,Db,rc),Ta.x=fb,Ta.y=kc,Ta.z=Db,Ta.w=rc;ra.buffer=I.positionFractBuffer;bc=!1;$c=null;Cd=0;md=!1;Zb=Ac=0;Fc=1;ad=0;La=5126;td=ua=Wa=Eb=0;pa(ra)?(bc=!0,$c=Ia.createStream(34962,ra),La=$c.dtype):($c=Ia.getBuffer(ra))?La=$c.dtype:"constant"in ra?(Fc=2,"number"===typeof ra.constant?(Wa=ra.constant,ua=td=Eb=0):(Wa=0<ra.constant.length?ra.constant[0]:0,ua=1<ra.constant.length?ra.constant[1]:0,td=2<ra.constant.length?ra.constant[2]:
0,Eb=3<ra.constant.length?ra.constant[3]:0)):($c=pa(ra.buffer)?Ia.createStream(34962,ra.buffer):Ia.getBuffer(ra.buffer),La="type"in ra?rb[ra.type]:$c.dtype,md=!!ra.normalized,Zb=ra.size|0,Ac=ra.offset|0,ad=ra.stride|0,Cd=ra.divisor|0);Ab=D.location;$a=Q[Ab];if(1===Fc){$a.buffer||n.enableVertexAttribArray(Ab);Gb=Zb||2;if($a.type!==La||$a.size!==Gb||$a.buffer!==$c||$a.normalized!==md||$a.offset!==Ac||$a.stride!==ad)n.bindBuffer(34962,$c.buffer),n.vertexAttribPointer(Ab,Gb,La,md,ad,Ac),$a.type=La,$a.size=
Gb,$a.buffer=$c,$a.normalized=md,$a.offset=Ac,$a.stride=ad;$a.divisor!==Cd&&(q.vertexAttribDivisorANGLE(Ab,Cd),$a.divisor=Cd)}else if($a.buffer&&(n.disableVertexAttribArray(Ab),$a.buffer=null),$a.x!==Wa||$a.y!==ua||$a.z!==td||$a.w!==Eb)n.vertexAttrib4f(Ab,Wa,ua,td,Eb),$a.x=Wa,$a.y=ua,$a.z=td,$a.w=Eb;bb=I.fill;wc=bb[0];ge=bb[1];Tb=bb[2];Ub=bb[3];x&&Sb===wc&&ac===ge&&rd===Tb&&Ma===Ub||(Sb=wc,ac=ge,rd=Tb,Ma=Ub,n.uniform4f(W.location,wc,ge,Tb,Ub));mb=I.scale;tb=mb[0];Oa=mb[1];x&&gb===tb&&oc===Oa||(gb=
tb,oc=Oa,n.uniform2f(z.location,tb,Oa));Ib=I.scaleFract;Vc=Ib[0];mc=Ib[1];x&&cb===Vc&&Gc===mc||(cb=Vc,Gc=mc,n.uniform2f(B.location,Vc,mc));ec=I.translate;ib=ec[0];sa=ec[1];x&&jb===ib&&nb===sa||(jb=ib,nb=sa,n.uniform2f(H.location,ib,sa));va=I.translateFract;Ua=va[0];Aa=va[1];x&&ab===Ua&&db===Aa||(ab=Ua,db=Aa,n.uniform2f(m.location,Ua,Aa));Ha=I.id;x&&Bb===Ha||(Bb=Ha,n.uniform1f(O.location,Ha));yb=I.opacity;x&&Sa===yb||(Sa=yb,n.uniform1f(F.location,yb));Kc=C.call(this,h,I,x);Jb=null;(Jb=(Lb=pa(Kc))?
A.createStream(Kc):A.getElements(Kc))&&n.bindBuffer(34963,Jb.buffer.buffer);if(Vb=Jb?Jb.vertCount:-1)0<Jd?Jb?q.drawElementsInstancedANGLE(4,Vb,Jb.type,0<<(Jb.type-5121>>1),Jd):q.drawArraysInstancedANGLE(4,0,Vb,Jd):0>Jd&&(Jb?n.drawElements(4,Vb,Jb.type,0<<(Jb.type-5121>>1)):n.drawArrays(4,0,Vb)),h.viewportWidth=bf,h.viewportHeight=xd,pd&&Ia.destroyStream(ld),bc&&Ia.destroyStream($c),Lb&&A.destroyStream(Jb)}g.dirty=!0;e.setVAO(null);f&&(y.cpuTime+=performance.now()-k)},draw:function(b){var a,c,f,k,
x,w,C,Z,fa,la,Ga,E,v,ha,ta,V,ga,qa,G,t,ba,R;a=ea.next;a!==ea.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),ea.cur=a);if(g.dirty){a=M.dither;a!==g.dither&&(a?n.enable(3024):n.disable(3024),g.dither=a);a=M.depth_func;a!==g.depth_func&&(n.depthFunc(a),g.depth_func=a);a=K[0];w=K[1];if(a!==L[0]||w!==L[1])n.depthRange(a,w),L[0]=a,L[1]=w;a=M.depth_mask;a!==g.depth_mask&&(n.depthMask(a),g.depth_mask=a);a=Qa[0];w=Qa[1];c=Qa[2];f=Qa[3];if(a!==X[0]||w!==X[1]||c!==X[2]||f!==X[3])n.colorMask(a,
w,c,f),X[0]=a,X[1]=w,X[2]=c,X[3]=f;a=M.cull_enable;a!==g.cull_enable&&(a?n.enable(2884):n.disable(2884),g.cull_enable=a);a=M.cull_face;a!==g.cull_face&&(n.cullFace(a),g.cull_face=a);a=M.frontFace;a!==g.frontFace&&(n.frontFace(a),g.frontFace=a);a=M.lineWidth;a!==g.lineWidth&&(n.lineWidth(a),g.lineWidth=a);a=M.polygonOffset_enable;a!==g.polygonOffset_enable&&(a?n.enable(32823):n.disable(32823),g.polygonOffset_enable=a);a=T[0];w=T[1];if(a!==ma[0]||w!==ma[1])n.polygonOffset(a,w),ma[0]=a,ma[1]=w;a=M.sample_alpha;
a!==g.sample_alpha&&(a?n.enable(32926):n.disable(32926),g.sample_alpha=a);a=M.sample_enable;a!==g.sample_enable&&(a?n.enable(32928):n.disable(32928),g.sample_enable=a);a=N[0];w=N[1];if(a!==Rb[0]||w!==Rb[1])n.sampleCoverage(a,w),Rb[0]=a,Rb[1]=w;a=M.stencil_mask;a!==g.stencil_mask&&(n.stencilMask(a),g.stencil_mask=a);a=u[0];w=u[1];c=u[2];if(a!==ka[0]||w!==ka[1]||c!==ka[2])n.stencilFunc(a,w,c),ka[0]=a,ka[1]=w,ka[2]=c;a=Na[0];w=Na[1];c=Na[2];f=Na[3];if(a!==fc[0]||w!==fc[1]||c!==fc[2]||f!==fc[3])n.stencilOpSeparate(a,
w,c,f),fc[0]=a,fc[1]=w,fc[2]=c,fc[3]=f;a=ca[0];w=ca[1];c=ca[2];f=ca[3];if(a!==za[0]||w!==za[1]||c!==za[2]||f!==za[3])n.stencilOpSeparate(a,w,c,f),za[0]=a,za[1]=w,za[2]=c,za[3]=f}a=b.viewport;c=a.x|0;f=a.y|0;k="width"in a?a.width|0:h.framebufferWidth-c;x="height"in a?a.height|0:h.framebufferHeight-f;a=h.viewportWidth;h.viewportWidth=k;w=h.viewportHeight;h.viewportHeight=x;n.viewport(c,f,k,x);U[0]=c;U[1]=f;U[2]=k;U[3]=x;n.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;n.enable(3042);g.blend_enable=
!0;n.blendEquationSeparate(32774,32774);zb[0]=32774;zb[1]=32774;n.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;n.disable(2929);g.depth_enable=!1;x=b.viewport;c=x.x|0;f=x.y|0;k="width"in x?x.width|0:h.framebufferWidth-c;x="height"in x?x.height|0:h.framebufferHeight-f;n.scissor(c,f,k,x);S[0]=c;S[1]=f;S[2]=k;S[3]=x;n.enable(3089);g.scissor_enable=!0;n.disable(2960);g.stencil_enable=!1;if(c=g.profile)C=performance.now(),y.count++;n.useProgram(q.program);f=P.angle_instanced_arrays;
e.setVAO(null);da.buffer=b.positionBuffer;k=!1;Z=0;fa=!1;Ga=la=0;E=1;v=0;ha=5126;qa=ga=V=ta=0;pa(da)?(k=!0,x=Ia.createStream(34962,da),ha=x.dtype):(x=Ia.getBuffer(da))?ha=x.dtype:"constant"in da?(E=2,"number"===typeof da.constant?(V=da.constant,ga=qa=ta=0):(V=0<da.constant.length?da.constant[0]:0,ga=1<da.constant.length?da.constant[1]:0,qa=2<da.constant.length?da.constant[2]:0,ta=3<da.constant.length?da.constant[3]:0)):(x=pa(da.buffer)?Ia.createStream(34962,da.buffer):Ia.getBuffer(da.buffer),ha="type"in
da?rb[da.type]:x.dtype,fa=!!da.normalized,Ga=da.size|0,la=da.offset|0,v=da.stride|0,Z=da.divisor|0);G=r.location;t=Q[G];if(1===E){t.buffer||n.enableVertexAttribArray(G);Ga=Ga||2;if(t.type!==ha||t.size!==Ga||t.buffer!==x||t.normalized!==fa||t.offset!==la||t.stride!==v)n.bindBuffer(34962,x.buffer),n.vertexAttribPointer(G,Ga,ha,fa,v,la),t.type=ha,t.size=Ga,t.buffer=x,t.normalized=fa,t.offset=la,t.stride=v;t.divisor!==Z&&(f.vertexAttribDivisorANGLE(G,Z),t.divisor=Z)}else if(t.buffer&&(n.disableVertexAttribArray(G),
t.buffer=null),t.x!==V||t.y!==ga||t.z!==qa||t.w!==ta)n.vertexAttrib4f(G,V,ga,qa,ta),t.x=V,t.y=ga,t.z=qa,t.w=ta;ra.buffer=b.positionFractBuffer;Z=!1;la=0;v=!1;ta=ha=0;V=1;G=0;t=5126;R=ba=qa=ga=0;pa(ra)?(Z=!0,fa=Ia.createStream(34962,ra),t=fa.dtype):(fa=Ia.getBuffer(ra))?t=fa.dtype:"constant"in ra?(V=2,"number"===typeof ra.constant?(qa=ra.constant,ba=R=ga=0):(qa=0<ra.constant.length?ra.constant[0]:0,ba=1<ra.constant.length?ra.constant[1]:0,R=2<ra.constant.length?ra.constant[2]:0,ga=3<ra.constant.length?
ra.constant[3]:0)):(fa=pa(ra.buffer)?Ia.createStream(34962,ra.buffer):Ia.getBuffer(ra.buffer),t="type"in ra?rb[ra.type]:fa.dtype,v=!!ra.normalized,ta=ra.size|0,ha=ra.offset|0,G=ra.stride|0,la=ra.divisor|0);Ga=D.location;E=Q[Ga];if(1===V){E.buffer||n.enableVertexAttribArray(Ga);ta=ta||2;if(E.type!==t||E.size!==ta||E.buffer!==fa||E.normalized!==v||E.offset!==ha||E.stride!==G)n.bindBuffer(34962,fa.buffer),n.vertexAttribPointer(Ga,ta,t,v,G,ha),E.type=t,E.size=ta,E.buffer=fa,E.normalized=v,E.offset=ha,
E.stride=G;E.divisor!==la&&(f.vertexAttribDivisorANGLE(Ga,la),E.divisor=la)}else if(E.buffer&&(n.disableVertexAttribArray(Ga),E.buffer=null),E.x!==qa||E.y!==ba||E.z!==R||E.w!==ga)n.vertexAttrib4f(Ga,qa,ba,R,ga),E.x=qa,E.y=ba,E.z=R,E.w=ga;la=b.fill;n.uniform4f(W.location,la[0],la[1],la[2],la[3]);la=b.scale;n.uniform2f(z.location,la[0],la[1]);la=b.scaleFract;n.uniform2f(B.location,la[0],la[1]);la=b.translate;n.uniform2f(H.location,la[0],la[1]);la=b.translateFract;n.uniform2f(m.location,la[0],la[1]);
n.uniform1f(O.location,b.id);n.uniform1f(F.location,b.opacity);la=I.call(this,h,b,0);(la=(b=pa(la))?A.createStream(la):A.getElements(la))&&n.bindBuffer(34963,la.buffer.buffer);if(v=la?la.vertCount:-1)ha=d.instances,0<ha?la?f.drawElementsInstancedANGLE(4,v,la.type,0<<(la.type-5121>>1),ha):f.drawArraysInstancedANGLE(4,0,v,ha):0>ha&&(la?n.drawElements(4,v,la.type,0<<(la.type-5121>>1)):n.drawArrays(4,0,v)),g.dirty=!0,e.setVAO(null),h.viewportWidth=a,h.viewportHeight=w,c&&(y.cpuTime+=performance.now()-
C),k&&Ia.destroyStream(x),Z&&Ia.destroyStream(fa),b&&A.destroyStream(la)},scope:function(e,k,m){var n,q,u,r,w,z,I,D,B,E,v,F,H,L,C,O,G,t,Q,R,K,P,l,N,S,p,U,T,ea,W,la,X,ca,ka,aa,ma,na,za,Na,Ka,Ld,Qa,Rb,zb,xd,fc,Rd,Sd,$d,Vd,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb;n=e.viewport;q=n.x|0;u=n.y|0;r="width"in n?n.width|0:h.framebufferWidth-q;w="height"in n?
n.height|0:h.framebufferHeight-u;z=h.viewportWidth;h.viewportWidth=r;I=h.viewportHeight;h.viewportHeight=w;D=Ga[0];Ga[0]=q;B=Ga[1];Ga[1]=u;E=Ga[2];Ga[2]=r;v=Ga[3];Ga[3]=w;F=Z[0];Z[0]=0;H=Z[1];Z[1]=0;L=Z[2];Z[2]=0;C=Z[3];Z[3]=0;O=M.blend_enable;M.blend_enable=!0;G=Ra[0];Ra[0]=32774;t=Ra[1];Ra[1]=32774;Q=Xb[0];Xb[0]=770;R=Xb[1];Xb[1]=771;K=Xb[2];Xb[2]=773;P=Xb[3];Xb[3]=1;l=M.depth_enable;M.depth_enable=!1;N=e.viewport;S=N.x|0;p=N.y|0;U="width"in N?N.width|0:h.framebufferWidth-S;T="height"in N?N.height|
0:h.framebufferHeight-p;ea=Za[0];Za[0]=S;W=Za[1];Za[1]=p;la=Za[2];Za[2]=U;X=Za[3];Za[3]=T;ca=M.scissor_enable;M.scissor_enable=!0;ka=M.stencil_enable;M.stencil_enable=!1;if(aa=g.profile)ma=performance.now(),y.count++;na=f.call(this,h,e,m);za=null;za=(Na=pa(na))?A.createStream(na):A.getElements(na);Ka=d.elements;d.elements=za;Ld=d.offset;d.offset=0;Qa=za?za.vertCount:-1;Rb=d.count;d.count=Qa;zb=d.primitive;d.primitive=4;xd=e.fill;fc=b[14];b[14]=xd;Rd=e.id;Sd=b[31];b[31]=Rd;$d=e.opacity;Vd=b[10];b[10]=
$d;pd=h.pixelRatio;ld=b[34];b[34]=pd;ud=e.scale;od=b[6];b[6]=ud;gd=e.scaleFract;zc=b[7];b[7]=gd;qd=e.translate;Rc=b[8];b[8]=qd;Lc=e.translateFract;rc=b[9];b[9]=Lc;fb=c.call(this,h,e,m);kc=b[3];b[3]=fb;da.buffer=e.positionBuffer;Db=!1;pc=null;Ta=0;Jc=!1;$c=bc=0;Cd=1;md=0;Ac=5126;La=ad=Fc=Zb=0;pa(da)?(Db=!0,pc=Ia.createStream(34962,da),Ac=pc.dtype):(pc=Ia.getBuffer(da))?Ac=pc.dtype:"constant"in da?(Cd=2,"number"===typeof da.constant?(Fc=da.constant,ad=La=Zb=0):(Fc=0<da.constant.length?da.constant[0]:
0,ad=1<da.constant.length?da.constant[1]:0,La=2<da.constant.length?da.constant[2]:0,Zb=3<da.constant.length?da.constant[3]:0)):(pc=pa(da.buffer)?Ia.createStream(34962,da.buffer):Ia.getBuffer(da.buffer),Ac="type"in da?rb[da.type]:pc.dtype,Jc=!!da.normalized,$c=da.size|0,bc=da.offset|0,md=da.stride|0,Ta=da.divisor|0);Eb=x.buffer;x.buffer=pc;Wa=x.divisor;x.divisor=Ta;ua=x.normalized;x.normalized=Jc;td=x.offset;x.offset=bc;Ab=x.size;x.size=$c;$a=x.state;x.state=Cd;Gb=x.stride;x.stride=md;bb=x.type;x.type=
Ac;wc=x.w;x.w=Zb;Sb=x.x;x.x=Fc;ge=x.y;x.y=ad;ac=x.z;x.z=La;ra.buffer=e.positionFractBuffer;Tb=!1;rd=null;Ub=0;Ma=!1;tb=mb=0;gb=1;Oa=0;oc=5126;mc=cb=Vc=Ib=0;pa(ra)?(Tb=!0,rd=Ia.createStream(34962,ra),oc=rd.dtype):(rd=Ia.getBuffer(ra))?oc=rd.dtype:"constant"in ra?(gb=2,"number"===typeof ra.constant?(Vc=ra.constant,cb=mc=Ib=0):(Vc=0<ra.constant.length?ra.constant[0]:0,cb=1<ra.constant.length?ra.constant[1]:0,mc=2<ra.constant.length?ra.constant[2]:0,Ib=3<ra.constant.length?ra.constant[3]:0)):(rd=pa(ra.buffer)?
Ia.createStream(34962,ra.buffer):Ia.getBuffer(ra.buffer),oc="type"in ra?rb[ra.type]:rd.dtype,Ma=!!ra.normalized,tb=ra.size|0,mb=ra.offset|0,Oa=ra.stride|0,Ub=ra.divisor|0);Gc=a.buffer;a.buffer=rd;ec=a.divisor;a.divisor=Ub;ib=a.normalized;a.normalized=Ma;jb=a.offset;a.offset=mb;sa=a.size;a.size=tb;nb=a.state;a.state=gb;va=a.stride;a.stride=Oa;Ua=a.type;a.type=oc;ab=a.w;a.w=Ib;Aa=a.x;a.x=Vc;db=a.y;a.y=cb;Ha=a.z;a.z=mc;Bb=fa.vert;fa.vert=42;yb=fa.frag;fa.frag=41;g.dirty=!0;k(h,e,m);h.viewportWidth=z;
h.viewportHeight=I;Ga[0]=D;Ga[1]=B;Ga[2]=E;Ga[3]=v;Z[0]=F;Z[1]=H;Z[2]=L;Z[3]=C;M.blend_enable=O;Ra[0]=G;Ra[1]=t;Xb[0]=Q;Xb[1]=R;Xb[2]=K;Xb[3]=P;M.depth_enable=l;Za[0]=ea;Za[1]=W;Za[2]=la;Za[3]=X;M.scissor_enable=ca;M.stencil_enable=ka;aa&&(y.cpuTime+=performance.now()-ma);Na&&A.destroyStream(za);d.elements=Ka;d.offset=Ld;d.count=Rb;d.primitive=zb;b[14]=fc;b[31]=Sd;b[10]=Vd;b[34]=ld;b[6]=od;b[7]=zc;b[8]=Rc;b[9]=rc;b[3]=kc;Db&&Ia.destroyStream(pc);x.buffer=Eb;x.divisor=Wa;x.normalized=ua;x.offset=td;
x.size=Ab;x.state=$a;x.stride=Gb;x.type=bb;x.w=wc;x.x=Sb;x.y=ge;x.z=ac;Tb&&Ia.destroyStream(rd);a.buffer=Gc;a.divisor=ec;a.normalized=ib;a.offset=jb;a.size=sa;a.state=nb;a.stride=va;a.type=Ua;a.w=ab;a.x=Aa;a.y=db;a.z=Ha;fa.vert=Bb;fa.frag=yb;g.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(k,y,q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,aa,h,g,d,
A,P,ea,n,pa,M,fa,b,e,Z,Ka,Ra,zb,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra,Yb,dc,qc,sd,vc){var Y,J,ja,Ca,sb,Qc,Zc,E,v,ha,ta,V,ga,qa,G,t,ba,R,wa,oa,l,lc,ia,p,Hb,xb,Ve,me,Ae,be,Id,se,Ic,fe,te,Jd,zd,Xd,Ld;Y=k.attributes;J=k.buffer;ja=k.context;Ca=k.current;sb=k.draw;Qc=k.elements;Zc=k.extensions;E=k.framebuffer;v=k.gl;ha=k.isBufferArgs;ta=k.next;V=k.shader;ga=k.uniforms;qa=k.vao;G=ta.blend_color;t=Ca.blend_color;ba=ta.blend_equation;R=Ca.blend_equation;wa=ta.blend_func;oa=Ca.blend_func;
l=ta.colorMask;lc=Ca.colorMask;ia=ta.depth_range;p=Ca.depth_range;Hb=ta.polygonOffset_offset;xb=Ca.polygonOffset_offset;Ve=ta.sample_coverage;me=Ca.sample_coverage;Ae=ta.scissor_box;be=Ca.scissor_box;Id=ta.stencil_func;se=Ca.stencil_func;Ic=ta.stencil_opBack;fe=Ca.stencil_opBack;te=ta.stencil_opFront;Jd=Ca.stencil_opFront;zd=ta.viewport;Xd=Ca.viewport;Ld={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var c,d,e,g,h,f;c=E.next;
c!==E.cur&&(c?v.bindFramebuffer(36160,c.framebuffer):v.bindFramebuffer(36160,null),E.cur=c);if(Ca.dirty){var k,m,n,q,x,r,w,A,z,I,D,B,G,M,F,H,C,O,Q,P,ea,V,ga,W,Z,la,fa,aa,ua,pa,Ia,wa,Gb,bb;k=ta.dither;k!==Ca.dither&&(k?v.enable(3024):v.disable(3024),Ca.dither=k);m=ba[0];n=ba[1];if(m!==R[0]||n!==R[1])v.blendEquationSeparate(m,n),R[0]=m,R[1]=n;q=ta.depth_func;q!==Ca.depth_func&&(v.depthFunc(q),Ca.depth_func=q);x=ia[0];r=ia[1];if(x!==p[0]||r!==p[1])v.depthRange(x,r),p[0]=x,p[1]=r;w=ta.depth_mask;w!==
Ca.depth_mask&&(v.depthMask(w),Ca.depth_mask=w);A=l[0];z=l[1];I=l[2];D=l[3];if(A!==lc[0]||z!==lc[1]||I!==lc[2]||D!==lc[3])v.colorMask(A,z,I,D),lc[0]=A,lc[1]=z,lc[2]=I,lc[3]=D;B=ta.cull_enable;B!==Ca.cull_enable&&(B?v.enable(2884):v.disable(2884),Ca.cull_enable=B);G=ta.cull_face;G!==Ca.cull_face&&(v.cullFace(G),Ca.cull_face=G);M=ta.frontFace;M!==Ca.frontFace&&(v.frontFace(M),Ca.frontFace=M);F=ta.lineWidth;F!==Ca.lineWidth&&(v.lineWidth(F),Ca.lineWidth=F);H=ta.polygonOffset_enable;H!==Ca.polygonOffset_enable&&
(H?v.enable(32823):v.disable(32823),Ca.polygonOffset_enable=H);C=Hb[0];O=Hb[1];if(C!==xb[0]||O!==xb[1])v.polygonOffset(C,O),xb[0]=C,xb[1]=O;Q=ta.sample_alpha;Q!==Ca.sample_alpha&&(Q?v.enable(32926):v.disable(32926),Ca.sample_alpha=Q);P=ta.sample_enable;P!==Ca.sample_enable&&(P?v.enable(32928):v.disable(32928),Ca.sample_enable=P);ea=Ve[0];V=Ve[1];if(ea!==me[0]||V!==me[1])v.sampleCoverage(ea,V),me[0]=ea,me[1]=V;ga=ta.stencil_mask;ga!==Ca.stencil_mask&&(v.stencilMask(ga),Ca.stencil_mask=ga);W=Id[0];
Z=Id[1];la=Id[2];if(W!==se[0]||Z!==se[1]||la!==se[2])v.stencilFunc(W,Z,la),se[0]=W,se[1]=Z,se[2]=la;fa=te[0];aa=te[1];ua=te[2];pa=te[3];if(fa!==Jd[0]||aa!==Jd[1]||ua!==Jd[2]||pa!==Jd[3])v.stencilOpSeparate(fa,aa,ua,pa),Jd[0]=fa,Jd[1]=aa,Jd[2]=ua,Jd[3]=pa;Ia=Ic[0];wa=Ic[1];Gb=Ic[2];bb=Ic[3];if(Ia!==fe[0]||wa!==fe[1]||Gb!==fe[2]||bb!==fe[3])v.stencilOpSeparate(Ia,wa,Gb,bb),fe[0]=Ia,fe[1]=wa,fe[2]=Gb,fe[3]=bb}v.blendColor(0,0,0,1);t[0]=0;t[1]=0;t[2]=0;t[3]=1;v.enable(3042);Ca.blend_enable=!0;v.blendFuncSeparate(770,
771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;v.disable(2929);Ca.depth_enable=!1;v.enable(3089);Ca.scissor_enable=!0;v.disable(2960);Ca.stencil_enable=!1;if(d=Ca.profile)e=performance.now(),y.count+=a;v.useProgram(Ka.program);g=Zc.angle_instanced_arrays;var wc;qa.setVAO(null);v.uniform1i(u.location,!1);v.uniform1i(fc.location,ma.bind());wc=sb.instances;for(h=0;h<a;++h){f=b[h];var Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,
eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,xe,he,Yc,zd,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Ae,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Hf,Oe,Le,re,Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,pf,mf,qf,Af,Bf,Ne,ze,nf,of,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Kf,Lf,Mf,rf,Rf,Gf,sf,dg,Sf,Tf;Sb=f.viewport;ge=
Sb.x|0;ac=Sb.y|0;Tb="width"in Sb?Sb.width|0:ja.framebufferWidth-ge;rd="height"in Sb?Sb.height|0:ja.framebufferHeight-ac;Ub=ja.viewportWidth;ja.viewportWidth=Tb;Ma=ja.viewportHeight;ja.viewportHeight=rd;v.viewport(ge,ac,Tb,rd);Xd[0]=ge;Xd[1]=ac;Xd[2]=Tb;Xd[3]=rd;mb=f.viewport;tb=mb.x|0;gb=mb.y|0;Oa="width"in mb?mb.width|0:ja.framebufferWidth-tb;oc="height"in mb?mb.height|0:ja.framebufferHeight-gb;v.scissor(tb,gb,Oa,oc);be[0]=tb;be[1]=gb;be[2]=Oa;be[3]=oc;Ib=Ra.call(this,ja,f,h);Vc=!1;cb=null;mc=0;
Gc=!1;ib=ec=0;jb=1;sa=0;nb=5126;Aa=ab=Ua=va=0;ha(Ib)?(Vc=!0,cb=J.createStream(34962,Ib),nb=cb.dtype):(cb=J.getBuffer(Ib))?nb=cb.dtype:"constant"in Ib?(jb=2,"number"===typeof Ib.constant?(Ua=Ib.constant,ab=Aa=va=0):(Ua=0<Ib.constant.length?Ib.constant[0]:0,ab=1<Ib.constant.length?Ib.constant[1]:0,Aa=2<Ib.constant.length?Ib.constant[2]:0,va=3<Ib.constant.length?Ib.constant[3]:0)):(cb=ha(Ib.buffer)?J.createStream(34962,Ib.buffer):J.getBuffer(Ib.buffer),nb="type"in Ib?Ld[Ib.type]:cb.dtype,Gc=!!Ib.normalized,
ib=Ib.size|0,ec=Ib.offset|0,sa=Ib.stride|0,mc=Ib.divisor|0);db=dc.location;Ha=Y[db];if(1===jb){Ha.buffer||v.enableVertexAttribArray(db);Bb=ib||1;if(Ha.type!==nb||Ha.size!==Bb||Ha.buffer!==cb||Ha.normalized!==Gc||Ha.offset!==ec||Ha.stride!==sa)v.bindBuffer(34962,cb.buffer),v.vertexAttribPointer(db,Bb,nb,Gc,sa,ec),Ha.type=nb,Ha.size=Bb,Ha.buffer=cb,Ha.normalized=Gc,Ha.offset=ec,Ha.stride=sa;Ha.divisor!==mc&&(g.vertexAttribDivisorANGLE(db,mc),Ha.divisor=mc)}else if(Ha.buffer&&(v.disableVertexAttribArray(db),
Ha.buffer=null),Ha.x!==Ua||Ha.y!==ab||Ha.z!==Aa||Ha.w!==va)v.vertexAttrib4f(db,Ua,ab,Aa,va),Ha.x=Ua,Ha.y=ab,Ha.z=Aa,Ha.w=va;yb=zb.call(this,ja,f,h);Sa=!1;Kc=null;Jb=0;Lb=!1;xa=Vb=0;ce=1;Ja=0;Ob=5126;gc=ya=hb=eb=0;ha(yb)?(Sa=!0,Kc=J.createStream(34962,yb),Ob=Kc.dtype):(Kc=J.getBuffer(yb))?Ob=Kc.dtype:"constant"in yb?(ce=2,"number"===typeof yb.constant?(hb=yb.constant,ya=gc=eb=0):(hb=0<yb.constant.length?yb.constant[0]:0,ya=1<yb.constant.length?yb.constant[1]:0,gc=2<yb.constant.length?yb.constant[2]:
0,eb=3<yb.constant.length?yb.constant[3]:0)):(Kc=ha(yb.buffer)?J.createStream(34962,yb.buffer):J.getBuffer(yb.buffer),Ob="type"in yb?Ld[yb.type]:Kc.dtype,Lb=!!yb.normalized,xa=yb.size|0,Vb=yb.offset|0,Ja=yb.stride|0,Jb=yb.divisor|0);Da=sd.location;ob=Y[Da];if(1===ce){ob.buffer||v.enableVertexAttribArray(Da);pb=xa||1;if(ob.type!==Ob||ob.size!==pb||ob.buffer!==Kc||ob.normalized!==Lb||ob.offset!==Vb||ob.stride!==Ja)v.bindBuffer(34962,Kc.buffer),v.vertexAttribPointer(Da,pb,Ob,Lb,Ja,Vb),ob.type=Ob,ob.size=
pb,ob.buffer=Kc,ob.normalized=Lb,ob.offset=Vb,ob.stride=Ja;ob.divisor!==Jb&&(g.vertexAttribDivisorANGLE(Da,Jb),ob.divisor=Jb)}else if(ob.buffer&&(v.disableVertexAttribArray(Da),ob.buffer=null),ob.x!==hb||ob.y!==ya||ob.z!==gc||ob.w!==eb)v.vertexAttrib4f(Da,hb,ya,gc,eb),ob.x=hb,ob.y=ya,ob.z=gc,ob.w=eb;Xa=Xb.call(this,ja,f,h);Ya=!1;nc=null;ed=0;tc=!1;Mb=Va=0;bd=1;Ea=0;xc=5126;ub=kb=Ba=Pa=0;ha(Xa)?(Ya=!0,nc=J.createStream(34962,Xa),xc=nc.dtype):(nc=J.getBuffer(Xa))?xc=nc.dtype:"constant"in Xa?(bd=2,"number"===
typeof Xa.constant?(Ba=Xa.constant,kb=ub=Pa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,kb=1<Xa.constant.length?Xa.constant[1]:0,ub=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=ha(Xa.buffer)?J.createStream(34962,Xa.buffer):J.getBuffer(Xa.buffer),xc="type"in Xa?Ld[Xa.type]:nc.dtype,tc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|0,Ea=Xa.stride|0,ed=Xa.divisor|0);Cb=qc.location;qb=Y[Cb];if(1===bd){qb.buffer||v.enableVertexAttribArray(Cb);uc=Mb||1;if(qb.type!==xc||
qb.size!==uc||qb.buffer!==nc||qb.normalized!==tc||qb.offset!==Va||qb.stride!==Ea)v.bindBuffer(34962,nc.buffer),v.vertexAttribPointer(Cb,uc,xc,tc,Ea,Va),qb.type=xc,qb.size=uc,qb.buffer=nc,qb.normalized=tc,qb.offset=Va,qb.stride=Ea;qb.divisor!==ed&&(g.vertexAttribDivisorANGLE(Cb,ed),qb.divisor=ed)}else if(qb.buffer&&(v.disableVertexAttribArray(Cb),qb.buffer=null),qb.x!==Ba||qb.y!==kb||qb.z!==ub||qb.w!==Pa)v.vertexAttrib4f(Cb,Ba,kb,ub,Pa),qb.x=Ba,qb.y=kb,qb.z=ub,qb.w=Pa;vb=na.call(this,ja,f,h);vd=!1;
sc=null;Hd=0;Mc=!1;wd=id=0;Wb=1;cc=0;Pb=5126;wb=lb=$b=Fa=0;ha(vb)?(vd=!0,sc=J.createStream(34962,vb),Pb=sc.dtype):(sc=J.getBuffer(vb))?Pb=sc.dtype:"constant"in vb?(Wb=2,"number"===typeof vb.constant?($b=vb.constant,lb=wb=Fa=0):($b=0<vb.constant.length?vb.constant[0]:0,lb=1<vb.constant.length?vb.constant[1]:0,wb=2<vb.constant.length?vb.constant[2]:0,Fa=3<vb.constant.length?vb.constant[3]:0)):(sc=ha(vb.buffer)?J.createStream(34962,vb.buffer):J.getBuffer(vb.buffer),Pb="type"in vb?Ld[vb.type]:sc.dtype,
Mc=!!vb.normalized,wd=vb.size|0,id=vb.offset|0,cc=vb.stride|0,Hd=vb.divisor|0);Nb=vc.location;Qb=Y[Nb];if(1===Wb){Qb.buffer||v.enableVertexAttribArray(Nb);hc=wd||1;if(Qb.type!==Pb||Qb.size!==hc||Qb.buffer!==sc||Qb.normalized!==Mc||Qb.offset!==id||Qb.stride!==cc)v.bindBuffer(34962,sc.buffer),v.vertexAttribPointer(Nb,hc,Pb,Mc,cc,id),Qb.type=Pb,Qb.size=hc,Qb.buffer=sc,Qb.normalized=Mc,Qb.offset=id,Qb.stride=cc;Qb.divisor!==Hd&&(g.vertexAttribDivisorANGLE(Nb,Hd),Qb.divisor=Hd)}else if(Qb.buffer&&(v.disableVertexAttribArray(Nb),
Qb.buffer=null),Qb.x!==$b||Qb.y!==lb||Qb.z!==wb||Qb.w!==Fa)v.vertexAttrib4f(Nb,$b,lb,wb,Fa),Qb.x=$b,Qb.y=lb,Qb.z=wb,Qb.w=Fa;jc=Qa.call(this,ja,f,h);Sc=!1;Bc=null;Cc=0;Dc=!1;cd=Nc=0;Tc=1;Oc=0;Kb=5126;Uc=Hc=Pc=Fb=0;ha(jc)?(Sc=!0,Bc=J.createStream(34962,jc),Kb=Bc.dtype):(Bc=J.getBuffer(jc))?Kb=Bc.dtype:"constant"in jc?(Tc=2,"number"===typeof jc.constant?(Pc=jc.constant,Hc=Uc=Fb=0):(Pc=0<jc.constant.length?jc.constant[0]:0,Hc=1<jc.constant.length?jc.constant[1]:0,Uc=2<jc.constant.length?jc.constant[2]:
0,Fb=3<jc.constant.length?jc.constant[3]:0)):(Bc=ha(jc.buffer)?J.createStream(34962,jc.buffer):J.getBuffer(jc.buffer),Kb="type"in jc?Ld[jc.type]:Bc.dtype,Dc=!!jc.normalized,cd=jc.size|0,Nc=jc.offset|0,Oc=jc.stride|0,Cc=jc.divisor|0);ic=da.location;Xc=Y[ic];if(1===Tc){Xc.buffer||v.enableVertexAttribArray(ic);fd=cd||1;if(Xc.type!==Kb||Xc.size!==fd||Xc.buffer!==Bc||Xc.normalized!==Dc||Xc.offset!==Nc||Xc.stride!==Oc)v.bindBuffer(34962,Bc.buffer),v.vertexAttribPointer(ic,fd,Kb,Dc,Oc,Nc),Xc.type=Kb,Xc.size=
fd,Xc.buffer=Bc,Xc.normalized=Dc,Xc.offset=Nc,Xc.stride=Oc;Xc.divisor!==Cc&&(g.vertexAttribDivisorANGLE(ic,Cc),Xc.divisor=Cc)}else if(Xc.buffer&&(v.disableVertexAttribArray(ic),Xc.buffer=null),Xc.x!==Pc||Xc.y!==Hc||Xc.z!==Uc||Xc.w!==Fb)v.vertexAttrib4f(ic,Pc,Hc,Uc,Fb),Xc.x=Pc,Xc.y=Hc,Xc.z=Uc,Xc.w=Fb;xe=X.call(this,ja,f,h);he=!1;Yc=null;zd=0;ke=!1;ue=ve=0;Td=1;Fd=0;Dd=5126;jd=nd=Ec=hd=0;ha(xe)?(he=!0,Yc=J.createStream(34962,xe),Dd=Yc.dtype):(Yc=J.getBuffer(xe))?Dd=Yc.dtype:"constant"in xe?(Td=2,"number"===
typeof xe.constant?(Ec=xe.constant,nd=jd=hd=0):(Ec=0<xe.constant.length?xe.constant[0]:0,nd=1<xe.constant.length?xe.constant[1]:0,jd=2<xe.constant.length?xe.constant[2]:0,hd=3<xe.constant.length?xe.constant[3]:0)):(Yc=ha(xe.buffer)?J.createStream(34962,xe.buffer):J.getBuffer(xe.buffer),Dd="type"in xe?Ld[xe.type]:Yc.dtype,ke=!!xe.normalized,ue=xe.size|0,ve=xe.offset|0,Fd=xe.stride|0,zd=xe.divisor|0);dd=Za.location;kd=Y[dd];if(1===Td){kd.buffer||v.enableVertexAttribArray(dd);Ad=ue||1;if(kd.type!==Dd||
kd.size!==Ad||kd.buffer!==Yc||kd.normalized!==ke||kd.offset!==ve||kd.stride!==Fd)v.bindBuffer(34962,Yc.buffer),v.vertexAttribPointer(dd,Ad,Dd,ke,Fd,ve),kd.type=Dd,kd.size=Ad,kd.buffer=Yc,kd.normalized=ke,kd.offset=ve,kd.stride=Fd;kd.divisor!==zd&&(g.vertexAttribDivisorANGLE(dd,zd),kd.divisor=zd)}else if(kd.buffer&&(v.disableVertexAttribArray(dd),kd.buffer=null),kd.x!==Ec||kd.y!==nd||kd.z!==jd||kd.w!==hd)v.vertexAttrib4f(dd,Ec,nd,jd,hd),kd.x=Ec,kd.y=nd,kd.z=jd,kd.w=hd;Bd=K.call(this,ja,f,h);Ae=!1;
ne=null;Ue=0;ee=!1;ae=de=0;pe=1;Yd=0;ie=5126;le=qe=Wc=yc=0;ha(Bd)?(Ae=!0,ne=J.createStream(34962,Bd),ie=ne.dtype):(ne=J.getBuffer(Bd))?ie=ne.dtype:"constant"in Bd?(pe=2,"number"===typeof Bd.constant?(Wc=Bd.constant,qe=le=yc=0):(Wc=0<Bd.constant.length?Bd.constant[0]:0,qe=1<Bd.constant.length?Bd.constant[1]:0,le=2<Bd.constant.length?Bd.constant[2]:0,yc=3<Bd.constant.length?Bd.constant[3]:0)):(ne=ha(Bd.buffer)?J.createStream(34962,Bd.buffer):J.getBuffer(Bd.buffer),ie="type"in Bd?Ld[Bd.type]:ne.dtype,
ee=!!Bd.normalized,ae=Bd.size|0,de=Bd.offset|0,Yd=Bd.stride|0,Ue=Bd.divisor|0);Ed=S.location;Kd=Y[Ed];if(1===pe){Kd.buffer||v.enableVertexAttribArray(Ed);Md=ae||4;if(Kd.type!==ie||Kd.size!==Md||Kd.buffer!==ne||Kd.normalized!==ee||Kd.offset!==de||Kd.stride!==Yd)v.bindBuffer(34962,ne.buffer),v.vertexAttribPointer(Ed,Md,ie,ee,Yd,de),Kd.type=ie,Kd.size=Md,Kd.buffer=ne,Kd.normalized=ee,Kd.offset=de,Kd.stride=Yd;Kd.divisor!==Ue&&(g.vertexAttribDivisorANGLE(Ed,Ue),Kd.divisor=Ue)}else if(Kd.buffer&&(v.disableVertexAttribArray(Ed),
Kd.buffer=null),Kd.x!==Wc||Kd.y!==qe||Kd.z!==le||Kd.w!==yc)v.vertexAttrib4f(Ed,Wc,qe,le,yc),Kd.x=Wc,Kd.y=qe,Kd.z=le,Kd.w=yc;Nd=L.call(this,ja,f,h);je=!1;Ee=null;we=0;oe=!1;Oe=Hf=0;Le=1;re=0;Be=5126;Ce=He=Ge=Fe=0;ha(Nd)?(je=!0,Ee=J.createStream(34962,Nd),Be=Ee.dtype):(Ee=J.getBuffer(Nd))?Be=Ee.dtype:"constant"in Nd?(Le=2,"number"===typeof Nd.constant?(Ge=Nd.constant,He=Ce=Fe=0):(Ge=0<Nd.constant.length?Nd.constant[0]:0,He=1<Nd.constant.length?Nd.constant[1]:0,Ce=2<Nd.constant.length?Nd.constant[2]:
0,Fe=3<Nd.constant.length?Nd.constant[3]:0)):(Ee=ha(Nd.buffer)?J.createStream(34962,Nd.buffer):J.getBuffer(Nd.buffer),Be="type"in Nd?Ld[Nd.type]:Ee.dtype,oe=!!Nd.normalized,Oe=Nd.size|0,Hf=Nd.offset|0,re=Nd.stride|0,we=Nd.divisor|0);Gd=Rb.location;Qd=Y[Gd];if(1===Le){Qd.buffer||v.enableVertexAttribArray(Gd);Wd=Oe||4;if(Qd.type!==Be||Qd.size!==Wd||Qd.buffer!==Ee||Qd.normalized!==oe||Qd.offset!==Hf||Qd.stride!==re)v.bindBuffer(34962,Ee.buffer),v.vertexAttribPointer(Gd,Wd,Be,oe,re,Hf),Qd.type=Be,Qd.size=
Wd,Qd.buffer=Ee,Qd.normalized=oe,Qd.offset=Hf,Qd.stride=re;Qd.divisor!==we&&(g.vertexAttribDivisorANGLE(Gd,we),Qd.divisor=we)}else if(Qd.buffer&&(v.disableVertexAttribArray(Gd),Qd.buffer=null),Qd.x!==Ge||Qd.y!==He||Qd.z!==Ce||Qd.w!==Fe)v.vertexAttrib4f(Gd,Ge,He,Ce,Fe),Qd.x=Ge,Qd.y=He,Qd.z=Ce,Qd.w=Fe;Zd=T.call(this,ja,f,h);Ie=!1;yd=null;Od=0;ye=!1;ff=Je=0;Ye=1;Pe=0;Me=5126;Re=Qe=Te=We=0;ha(Zd)?(Ie=!0,yd=J.createStream(34962,Zd),Me=yd.dtype):(yd=J.getBuffer(Zd))?Me=yd.dtype:"constant"in Zd?(Ye=2,"number"===
typeof Zd.constant?(Te=Zd.constant,Qe=Re=We=0):(Te=0<Zd.constant.length?Zd.constant[0]:0,Qe=1<Zd.constant.length?Zd.constant[1]:0,Re=2<Zd.constant.length?Zd.constant[2]:0,We=3<Zd.constant.length?Zd.constant[3]:0)):(yd=ha(Zd.buffer)?J.createStream(34962,Zd.buffer):J.getBuffer(Zd.buffer),Me="type"in Zd?Ld[Zd.type]:yd.dtype,ye=!!Zd.normalized,ff=Zd.size|0,Je=Zd.offset|0,Pe=Zd.stride|0,Od=Zd.divisor|0);Pd=ka.location;Ud=Y[Pd];if(1===Ye){Ud.buffer||v.enableVertexAttribArray(Pd);Se=ff||1;if(Ud.type!==Me||
Ud.size!==Se||Ud.buffer!==yd||Ud.normalized!==ye||Ud.offset!==Je||Ud.stride!==Pe)v.bindBuffer(34962,yd.buffer),v.vertexAttribPointer(Pd,Se,Me,ye,Pe,Je),Ud.type=Me,Ud.size=Se,Ud.buffer=yd,Ud.normalized=ye,Ud.offset=Je,Ud.stride=Pe;Ud.divisor!==Od&&(g.vertexAttribDivisorANGLE(Pd,Od),Ud.divisor=Od)}else if(Ud.buffer&&(v.disableVertexAttribArray(Pd),Ud.buffer=null),Ud.x!==Te||Ud.y!==Qe||Ud.z!==Re||Ud.w!==We)v.vertexAttrib4f(Pd,Te,Qe,Re,We),Ud.x=Te,Ud.y=Qe,Ud.z=Re,Ud.w=We;gf=ja.pixelRatio;h&&lf===gf||
(lf=gf,v.uniform1f(Ga.location,gf));cf=f.scale;hf=cf[0];kf=cf[1];h&&jf===hf&&pf===kf||(jf=hf,pf=kf,v.uniform2f(U.location,hf,kf));mf=f.scaleFract;qf=mf[0];Bf=mf[1];h&&Af===qf&&Ne===Bf||(Af=qf,Ne=Bf,v.uniform2f(rb.location,qf,Bf));ze=f.translate;nf=ze[0];Cf=ze[1];h&&of===nf&&Ff===Cf||(of=nf,Ff=Cf,v.uniform2f(ra.location,nf,Cf));zf=f.translateFract;Df=zf[0];uf=zf[1];h&&Ef===Df&&vf===uf||(Ef=Df,vf=uf,v.uniform2f(Yb.location,Df,uf));tf=N.call(this,ja,f,h);wf=tf[0];If=tf[1];h&&xf===wf&&Kf===If||(xf=wf,
Kf=If,v.uniform2f(Na.location,wf,If));Lf=f.opacity;h&&Mf===Lf||(Mf=Lf,v.uniform1f(za.location,Lf));(rf=f.markerTexture)&&"framebuffer"===rf._reglType&&(rf=rf.color[0]);Rf=rf._texture;v.uniform1i(ca.location,Rf.bind());Gf=f.elements;sf=null;(sf=(dg=ha(Gf))?Qc.createStream(Gf):Qc.getElements(Gf))&&v.bindBuffer(34963,sf.buffer.buffer);Sf=f.offset;if(Tf=f.count)0<wc?sf?g.drawElementsInstancedANGLE(0,Tf,sf.type,Sf<<(sf.type-5121>>1),wc):g.drawArraysInstancedANGLE(0,Sf,Tf,wc):0>wc&&(sf?v.drawElements(0,
Tf,sf.type,Sf<<(sf.type-5121>>1)):v.drawArrays(0,Sf,Tf)),ja.viewportWidth=Ub,ja.viewportHeight=Ma,Vc&&J.destroyStream(cb),Sa&&J.destroyStream(Kc),Ya&&J.destroyStream(nc),vd&&J.destroyStream(sc),Sc&&J.destroyStream(Bc),he&&J.destroyStream(Yc),Ae&&J.destroyStream(ne),je&&J.destroyStream(Ee),Ie&&J.destroyStream(yd),Rf.unbind(),dg&&Qc.destroyStream(sf)}ma.unbind();Ca.dirty=!0;qa.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(b){var d,e,g,h,k,m,n,A,z,D,B,G,M,H,L,Q,P,N,K,ea,T,V,ga,Z,X,
fa,aa,pa,Ia,wa,ma,na,La,Eb,Wa,ua,Ka,Ab,$a,Gb,bb,Qa,Sb,Ra,ac,Tb,zb,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,Xb,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,zd,he,Yc,Ae,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Xe,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Ke,Oe,Le,re;d=E.next;d!==E.cur&&(d?v.bindFramebuffer(36160,
d.framebuffer):v.bindFramebuffer(36160,null),E.cur=d);if(Ca.dirty){var Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,pf,mf,qf;Be=ta.dither;Be!==Ca.dither&&(Be?v.enable(3024):v.disable(3024),Ca.dither=Be);Fe=ba[0];Ge=ba[1];if(Fe!==R[0]||Ge!==R[1])v.blendEquationSeparate(Fe,Ge),R[0]=Fe,R[1]=Ge;He=ta.depth_func;He!==Ca.depth_func&&(v.depthFunc(He),Ca.depth_func=He);Ce=ia[0];Gd=ia[1];if(Ce!==p[0]||Gd!==p[1])v.depthRange(Ce,Gd),p[0]=Ce,p[1]=Gd;Qd=ta.depth_mask;
Qd!==Ca.depth_mask&&(v.depthMask(Qd),Ca.depth_mask=Qd);Wd=l[0];Zd=l[1];Ie=l[2];yd=l[3];if(Wd!==lc[0]||Zd!==lc[1]||Ie!==lc[2]||yd!==lc[3])v.colorMask(Wd,Zd,Ie,yd),lc[0]=Wd,lc[1]=Zd,lc[2]=Ie,lc[3]=yd;Od=ta.cull_enable;Od!==Ca.cull_enable&&(Od?v.enable(2884):v.disable(2884),Ca.cull_enable=Od);ye=ta.cull_face;ye!==Ca.cull_face&&(v.cullFace(ye),Ca.cull_face=ye);Je=ta.frontFace;Je!==Ca.frontFace&&(v.frontFace(Je),Ca.frontFace=Je);ff=ta.lineWidth;ff!==Ca.lineWidth&&(v.lineWidth(ff),Ca.lineWidth=ff);Ye=ta.polygonOffset_enable;
Ye!==Ca.polygonOffset_enable&&(Ye?v.enable(32823):v.disable(32823),Ca.polygonOffset_enable=Ye);Pe=Hb[0];Me=Hb[1];if(Pe!==xb[0]||Me!==xb[1])v.polygonOffset(Pe,Me),xb[0]=Pe,xb[1]=Me;We=ta.sample_alpha;We!==Ca.sample_alpha&&(We?v.enable(32926):v.disable(32926),Ca.sample_alpha=We);Te=ta.sample_enable;Te!==Ca.sample_enable&&(Te?v.enable(32928):v.disable(32928),Ca.sample_enable=Te);Qe=Ve[0];Re=Ve[1];if(Qe!==me[0]||Re!==me[1])v.sampleCoverage(Qe,Re),me[0]=Qe,me[1]=Re;Pd=ta.stencil_mask;Pd!==Ca.stencil_mask&&
(v.stencilMask(Pd),Ca.stencil_mask=Pd);Ud=Id[0];Se=Id[1];gf=Id[2];if(Ud!==se[0]||Se!==se[1]||gf!==se[2])v.stencilFunc(Ud,Se,gf),se[0]=Ud,se[1]=Se,se[2]=gf;lf=te[0];cf=te[1];hf=te[2];jf=te[3];if(lf!==Jd[0]||cf!==Jd[1]||hf!==Jd[2]||jf!==Jd[3])v.stencilOpSeparate(lf,cf,hf,jf),Jd[0]=lf,Jd[1]=cf,Jd[2]=hf,Jd[3]=jf;kf=Ic[0];pf=Ic[1];mf=Ic[2];qf=Ic[3];if(kf!==fe[0]||pf!==fe[1]||mf!==fe[2]||qf!==fe[3])v.stencilOpSeparate(kf,pf,mf,qf),fe[0]=kf,fe[1]=pf,fe[2]=mf,fe[3]=qf}e=b.viewport;g=e.x|0;h=e.y|0;k="width"in
e?e.width|0:ja.framebufferWidth-g;m="height"in e?e.height|0:ja.framebufferHeight-h;n=ja.viewportWidth;ja.viewportWidth=k;A=ja.viewportHeight;ja.viewportHeight=m;v.viewport(g,h,k,m);Xd[0]=g;Xd[1]=h;Xd[2]=k;Xd[3]=m;v.blendColor(0,0,0,1);t[0]=0;t[1]=0;t[2]=0;t[3]=1;v.enable(3042);Ca.blend_enable=!0;v.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;v.disable(2929);Ca.depth_enable=!1;z=b.viewport;D=z.x|0;B=z.y|0;G="width"in z?z.width|0:ja.framebufferWidth-D;M="height"in z?z.height|
0:ja.framebufferHeight-B;v.scissor(D,B,G,M);be[0]=D;be[1]=B;be[2]=G;be[3]=M;v.enable(3089);Ca.scissor_enable=!0;v.disable(2960);Ca.stencil_enable=!1;if(H=Ca.profile)L=performance.now(),y.count++;v.useProgram(q.program);Q=Zc.angle_instanced_arrays;qa.setVAO(null);P=I.call(this,ja,b,0);N=!1;K=null;ea=0;T=!1;ga=V=0;Z=1;X=0;fa=5126;wa=Ia=pa=aa=0;ha(P)?(N=!0,K=J.createStream(34962,P),fa=K.dtype):(K=J.getBuffer(P))?fa=K.dtype:"constant"in P?(Z=2,"number"===typeof P.constant?(pa=P.constant,Ia=wa=aa=0):(pa=
0<P.constant.length?P.constant[0]:0,Ia=1<P.constant.length?P.constant[1]:0,wa=2<P.constant.length?P.constant[2]:0,aa=3<P.constant.length?P.constant[3]:0)):(K=ha(P.buffer)?J.createStream(34962,P.buffer):J.getBuffer(P.buffer),fa="type"in P?Ld[P.type]:K.dtype,T=!!P.normalized,ga=P.size|0,V=P.offset|0,X=P.stride|0,ea=P.divisor|0);ma=dc.location;na=Y[ma];if(1===Z){na.buffer||v.enableVertexAttribArray(ma);La=ga||1;if(na.type!==fa||na.size!==La||na.buffer!==K||na.normalized!==T||na.offset!==V||na.stride!==
X)v.bindBuffer(34962,K.buffer),v.vertexAttribPointer(ma,La,fa,T,X,V),na.type=fa,na.size=La,na.buffer=K,na.normalized=T,na.offset=V,na.stride=X;na.divisor!==ea&&(Q.vertexAttribDivisorANGLE(ma,ea),na.divisor=ea)}else if(na.buffer&&(v.disableVertexAttribArray(ma),na.buffer=null),na.x!==pa||na.y!==Ia||na.z!==wa||na.w!==aa)v.vertexAttrib4f(ma,pa,Ia,wa,aa),na.x=pa,na.y=Ia,na.z=wa,na.w=aa;Eb=f.call(this,ja,b,0);Wa=!1;ua=null;Ka=0;Ab=!1;Gb=$a=0;bb=1;Qa=0;Sb=5126;zb=Tb=ac=Ra=0;ha(Eb)?(Wa=!0,ua=J.createStream(34962,
Eb),Sb=ua.dtype):(ua=J.getBuffer(Eb))?Sb=ua.dtype:"constant"in Eb?(bb=2,"number"===typeof Eb.constant?(ac=Eb.constant,Tb=zb=Ra=0):(ac=0<Eb.constant.length?Eb.constant[0]:0,Tb=1<Eb.constant.length?Eb.constant[1]:0,zb=2<Eb.constant.length?Eb.constant[2]:0,Ra=3<Eb.constant.length?Eb.constant[3]:0)):(ua=ha(Eb.buffer)?J.createStream(34962,Eb.buffer):J.getBuffer(Eb.buffer),Sb="type"in Eb?Ld[Eb.type]:ua.dtype,Ab=!!Eb.normalized,Gb=Eb.size|0,$a=Eb.offset|0,Qa=Eb.stride|0,Ka=Eb.divisor|0);Ub=sd.location;Ma=
Y[Ub];if(1===bb){Ma.buffer||v.enableVertexAttribArray(Ub);mb=Gb||1;if(Ma.type!==Sb||Ma.size!==mb||Ma.buffer!==ua||Ma.normalized!==Ab||Ma.offset!==$a||Ma.stride!==Qa)v.bindBuffer(34962,ua.buffer),v.vertexAttribPointer(Ub,mb,Sb,Ab,Qa,$a),Ma.type=Sb,Ma.size=mb,Ma.buffer=ua,Ma.normalized=Ab,Ma.offset=$a,Ma.stride=Qa;Ma.divisor!==Ka&&(Q.vertexAttribDivisorANGLE(Ub,Ka),Ma.divisor=Ka)}else if(Ma.buffer&&(v.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==ac||Ma.y!==Tb||Ma.z!==zb||Ma.w!==Ra)v.vertexAttrib4f(Ub,
ac,Tb,zb,Ra),Ma.x=ac,Ma.y=Tb,Ma.z=zb,Ma.w=Ra;tb=c.call(this,ja,b,0);gb=!1;Oa=null;oc=0;Ib=!1;cb=Vc=0;mc=1;Gc=0;ec=5126;nb=sa=jb=ib=0;ha(tb)?(gb=!0,Oa=J.createStream(34962,tb),ec=Oa.dtype):(Oa=J.getBuffer(tb))?ec=Oa.dtype:"constant"in tb?(mc=2,"number"===typeof tb.constant?(jb=tb.constant,sa=nb=ib=0):(jb=0<tb.constant.length?tb.constant[0]:0,sa=1<tb.constant.length?tb.constant[1]:0,nb=2<tb.constant.length?tb.constant[2]:0,ib=3<tb.constant.length?tb.constant[3]:0)):(Oa=ha(tb.buffer)?J.createStream(34962,
tb.buffer):J.getBuffer(tb.buffer),ec="type"in tb?Ld[tb.type]:Oa.dtype,Ib=!!tb.normalized,cb=tb.size|0,Vc=tb.offset|0,Gc=tb.stride|0,oc=tb.divisor|0);va=qc.location;Ua=Y[va];if(1===mc){Ua.buffer||v.enableVertexAttribArray(va);ab=cb||1;if(Ua.type!==ec||Ua.size!==ab||Ua.buffer!==Oa||Ua.normalized!==Ib||Ua.offset!==Vc||Ua.stride!==Gc)v.bindBuffer(34962,Oa.buffer),v.vertexAttribPointer(va,ab,ec,Ib,Gc,Vc),Ua.type=ec,Ua.size=ab,Ua.buffer=Oa,Ua.normalized=Ib,Ua.offset=Vc,Ua.stride=Gc;Ua.divisor!==oc&&(Q.vertexAttribDivisorANGLE(va,
oc),Ua.divisor=oc)}else if(Ua.buffer&&(v.disableVertexAttribArray(va),Ua.buffer=null),Ua.x!==jb||Ua.y!==sa||Ua.z!==nb||Ua.w!==ib)v.vertexAttrib4f(va,jb,sa,nb,ib),Ua.x=jb,Ua.y=sa,Ua.z=nb,Ua.w=ib;Aa=x.call(this,ja,b,0);db=!1;Ha=null;Bb=0;yb=!1;Kc=Sa=0;Jb=1;Lb=0;Vb=5126;Ob=Ja=Xb=xa=0;ha(Aa)?(db=!0,Ha=J.createStream(34962,Aa),Vb=Ha.dtype):(Ha=J.getBuffer(Aa))?Vb=Ha.dtype:"constant"in Aa?(Jb=2,"number"===typeof Aa.constant?(Xb=Aa.constant,Ja=Ob=xa=0):(Xb=0<Aa.constant.length?Aa.constant[0]:0,Ja=1<Aa.constant.length?
Aa.constant[1]:0,Ob=2<Aa.constant.length?Aa.constant[2]:0,xa=3<Aa.constant.length?Aa.constant[3]:0)):(Ha=ha(Aa.buffer)?J.createStream(34962,Aa.buffer):J.getBuffer(Aa.buffer),Vb="type"in Aa?Ld[Aa.type]:Ha.dtype,yb=!!Aa.normalized,Kc=Aa.size|0,Sa=Aa.offset|0,Lb=Aa.stride|0,Bb=Aa.divisor|0);eb=vc.location;hb=Y[eb];if(1===Jb){hb.buffer||v.enableVertexAttribArray(eb);ya=Kc||1;if(hb.type!==Vb||hb.size!==ya||hb.buffer!==Ha||hb.normalized!==yb||hb.offset!==Sa||hb.stride!==Lb)v.bindBuffer(34962,Ha.buffer),
v.vertexAttribPointer(eb,ya,Vb,yb,Lb,Sa),hb.type=Vb,hb.size=ya,hb.buffer=Ha,hb.normalized=yb,hb.offset=Sa,hb.stride=Lb;hb.divisor!==Bb&&(Q.vertexAttribDivisorANGLE(eb,Bb),hb.divisor=Bb)}else if(hb.buffer&&(v.disableVertexAttribArray(eb),hb.buffer=null),hb.x!==Xb||hb.y!==Ja||hb.z!==Ob||hb.w!==xa)v.vertexAttrib4f(eb,Xb,Ja,Ob,xa),hb.x=Xb,hb.y=Ja,hb.z=Ob,hb.w=xa;gc=a.call(this,ja,b,0);Da=!1;ob=null;pb=0;Xa=!1;nc=Ya=0;ed=1;tc=0;Va=5126;xc=Ea=bd=Mb=0;ha(gc)?(Da=!0,ob=J.createStream(34962,gc),Va=ob.dtype):
(ob=J.getBuffer(gc))?Va=ob.dtype:"constant"in gc?(ed=2,"number"===typeof gc.constant?(bd=gc.constant,Ea=xc=Mb=0):(bd=0<gc.constant.length?gc.constant[0]:0,Ea=1<gc.constant.length?gc.constant[1]:0,xc=2<gc.constant.length?gc.constant[2]:0,Mb=3<gc.constant.length?gc.constant[3]:0)):(ob=ha(gc.buffer)?J.createStream(34962,gc.buffer):J.getBuffer(gc.buffer),Va="type"in gc?Ld[gc.type]:ob.dtype,Xa=!!gc.normalized,nc=gc.size|0,Ya=gc.offset|0,tc=gc.stride|0,pb=gc.divisor|0);Pa=da.location;Ba=Y[Pa];if(1===ed){Ba.buffer||
v.enableVertexAttribArray(Pa);kb=nc||1;if(Ba.type!==Va||Ba.size!==kb||Ba.buffer!==ob||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==tc)v.bindBuffer(34962,ob.buffer),v.vertexAttribPointer(Pa,kb,Va,Xa,tc,Ya),Ba.type=Va,Ba.size=kb,Ba.buffer=ob,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=tc;Ba.divisor!==pb&&(Q.vertexAttribDivisorANGLE(Pa,pb),Ba.divisor=pb)}else if(Ba.buffer&&(v.disableVertexAttribArray(Pa),Ba.buffer=null),Ba.x!==bd||Ba.y!==Ea||Ba.z!==xc||Ba.w!==Mb)v.vertexAttrib4f(Pa,bd,Ea,xc,Mb),Ba.x=
bd,Ba.y=Ea,Ba.z=xc,Ba.w=Mb;ub=w.call(this,ja,b,0);Cb=!1;qb=null;uc=0;vb=!1;sc=vd=0;Hd=1;Mc=0;id=5126;Pb=cc=Wb=wd=0;ha(ub)?(Cb=!0,qb=J.createStream(34962,ub),id=qb.dtype):(qb=J.getBuffer(ub))?id=qb.dtype:"constant"in ub?(Hd=2,"number"===typeof ub.constant?(Wb=ub.constant,cc=Pb=wd=0):(Wb=0<ub.constant.length?ub.constant[0]:0,cc=1<ub.constant.length?ub.constant[1]:0,Pb=2<ub.constant.length?ub.constant[2]:0,wd=3<ub.constant.length?ub.constant[3]:0)):(qb=ha(ub.buffer)?J.createStream(34962,ub.buffer):J.getBuffer(ub.buffer),
id="type"in ub?Ld[ub.type]:qb.dtype,vb=!!ub.normalized,sc=ub.size|0,vd=ub.offset|0,Mc=ub.stride|0,uc=ub.divisor|0);Fa=Za.location;$b=Y[Fa];if(1===Hd){$b.buffer||v.enableVertexAttribArray(Fa);lb=sc||1;if($b.type!==id||$b.size!==lb||$b.buffer!==qb||$b.normalized!==vb||$b.offset!==vd||$b.stride!==Mc)v.bindBuffer(34962,qb.buffer),v.vertexAttribPointer(Fa,lb,id,vb,Mc,vd),$b.type=id,$b.size=lb,$b.buffer=qb,$b.normalized=vb,$b.offset=vd,$b.stride=Mc;$b.divisor!==uc&&(Q.vertexAttribDivisorANGLE(Fa,uc),$b.divisor=
uc)}else if($b.buffer&&(v.disableVertexAttribArray(Fa),$b.buffer=null),$b.x!==Wb||$b.y!==cc||$b.z!==Pb||$b.w!==wd)v.vertexAttrib4f(Fa,Wb,cc,Pb,wd),$b.x=Wb,$b.y=cc,$b.z=Pb,$b.w=wd;wb=C.call(this,ja,b,0);Nb=!1;Qb=null;hc=0;jc=!1;Bc=Sc=0;Cc=1;Dc=0;Nc=5126;Kb=Oc=Tc=cd=0;ha(wb)?(Nb=!0,Qb=J.createStream(34962,wb),Nc=Qb.dtype):(Qb=J.getBuffer(wb))?Nc=Qb.dtype:"constant"in wb?(Cc=2,"number"===typeof wb.constant?(Tc=wb.constant,Oc=Kb=cd=0):(Tc=0<wb.constant.length?wb.constant[0]:0,Oc=1<wb.constant.length?
wb.constant[1]:0,Kb=2<wb.constant.length?wb.constant[2]:0,cd=3<wb.constant.length?wb.constant[3]:0)):(Qb=ha(wb.buffer)?J.createStream(34962,wb.buffer):J.getBuffer(wb.buffer),Nc="type"in wb?Ld[wb.type]:Qb.dtype,jc=!!wb.normalized,Bc=wb.size|0,Sc=wb.offset|0,Dc=wb.stride|0,hc=wb.divisor|0);Fb=S.location;Pc=Y[Fb];if(1===Cc){Pc.buffer||v.enableVertexAttribArray(Fb);Hc=Bc||4;if(Pc.type!==Nc||Pc.size!==Hc||Pc.buffer!==Qb||Pc.normalized!==jc||Pc.offset!==Sc||Pc.stride!==Dc)v.bindBuffer(34962,Qb.buffer),
v.vertexAttribPointer(Fb,Hc,Nc,jc,Dc,Sc),Pc.type=Nc,Pc.size=Hc,Pc.buffer=Qb,Pc.normalized=jc,Pc.offset=Sc,Pc.stride=Dc;Pc.divisor!==hc&&(Q.vertexAttribDivisorANGLE(Fb,hc),Pc.divisor=hc)}else if(Pc.buffer&&(v.disableVertexAttribArray(Fb),Pc.buffer=null),Pc.x!==Tc||Pc.y!==Oc||Pc.z!==Kb||Pc.w!==cd)v.vertexAttrib4f(Fb,Tc,Oc,Kb,cd),Pc.x=Tc,Pc.y=Oc,Pc.z=Kb,Pc.w=cd;Uc=W.call(this,ja,b,0);ic=!1;Xc=null;fd=0;zd=!1;Yc=he=0;Ae=1;ke=0;ve=5126;Dd=Fd=Td=ue=0;ha(Uc)?(ic=!0,Xc=J.createStream(34962,Uc),ve=Xc.dtype):
(Xc=J.getBuffer(Uc))?ve=Xc.dtype:"constant"in Uc?(Ae=2,"number"===typeof Uc.constant?(Td=Uc.constant,Fd=Dd=ue=0):(Td=0<Uc.constant.length?Uc.constant[0]:0,Fd=1<Uc.constant.length?Uc.constant[1]:0,Dd=2<Uc.constant.length?Uc.constant[2]:0,ue=3<Uc.constant.length?Uc.constant[3]:0)):(Xc=ha(Uc.buffer)?J.createStream(34962,Uc.buffer):J.getBuffer(Uc.buffer),ve="type"in Uc?Ld[Uc.type]:Xc.dtype,zd=!!Uc.normalized,Yc=Uc.size|0,he=Uc.offset|0,ke=Uc.stride|0,fd=Uc.divisor|0);hd=Rb.location;Ec=Y[hd];if(1===Ae){Ec.buffer||
v.enableVertexAttribArray(hd);nd=Yc||4;if(Ec.type!==ve||Ec.size!==nd||Ec.buffer!==Xc||Ec.normalized!==zd||Ec.offset!==he||Ec.stride!==ke)v.bindBuffer(34962,Xc.buffer),v.vertexAttribPointer(hd,nd,ve,zd,ke,he),Ec.type=ve,Ec.size=nd,Ec.buffer=Xc,Ec.normalized=zd,Ec.offset=he,Ec.stride=ke;Ec.divisor!==fd&&(Q.vertexAttribDivisorANGLE(hd,fd),Ec.divisor=fd)}else if(Ec.buffer&&(v.disableVertexAttribArray(hd),Ec.buffer=null),Ec.x!==Td||Ec.y!==Fd||Ec.z!==Dd||Ec.w!==ue)v.vertexAttrib4f(hd,Td,Fd,Dd,ue),Ec.x=
Td,Ec.y=Fd,Ec.z=Dd,Ec.w=ue;jd=O.call(this,ja,b,0);dd=!1;kd=null;Ad=0;Bd=!1;ne=Xe=0;Ue=1;ee=0;de=5126;ie=Yd=pe=ae=0;ha(jd)?(dd=!0,kd=J.createStream(34962,jd),de=kd.dtype):(kd=J.getBuffer(jd))?de=kd.dtype:"constant"in jd?(Ue=2,"number"===typeof jd.constant?(pe=jd.constant,Yd=ie=ae=0):(pe=0<jd.constant.length?jd.constant[0]:0,Yd=1<jd.constant.length?jd.constant[1]:0,ie=2<jd.constant.length?jd.constant[2]:0,ae=3<jd.constant.length?jd.constant[3]:0)):(kd=ha(jd.buffer)?J.createStream(34962,jd.buffer):J.getBuffer(jd.buffer),
de="type"in jd?Ld[jd.type]:kd.dtype,Bd=!!jd.normalized,ne=jd.size|0,Xe=jd.offset|0,ee=jd.stride|0,Ad=jd.divisor|0);yc=ka.location;Wc=Y[yc];if(1===Ue){Wc.buffer||v.enableVertexAttribArray(yc);qe=ne||1;if(Wc.type!==de||Wc.size!==qe||Wc.buffer!==kd||Wc.normalized!==Bd||Wc.offset!==Xe||Wc.stride!==ee)v.bindBuffer(34962,kd.buffer),v.vertexAttribPointer(yc,qe,de,Bd,ee,Xe),Wc.type=de,Wc.size=qe,Wc.buffer=kd,Wc.normalized=Bd,Wc.offset=Xe,Wc.stride=ee;Wc.divisor!==Ad&&(Q.vertexAttribDivisorANGLE(yc,Ad),Wc.divisor=
Ad)}else if(Wc.buffer&&(v.disableVertexAttribArray(yc),Wc.buffer=null),Wc.x!==pe||Wc.y!==Yd||Wc.z!==ie||Wc.w!==ae)v.vertexAttrib4f(yc,pe,Yd,ie,ae),Wc.x=pe,Wc.y=Yd,Wc.z=ie,Wc.w=ae;v.uniform1i(u.location,!1);v.uniform1f(Ga.location,ja.pixelRatio);le=b.scale;v.uniform2f(U.location,le[0],le[1]);Ed=b.scaleFract;v.uniform2f(rb.location,Ed[0],Ed[1]);Kd=b.translate;v.uniform2f(ra.location,Kd[0],Kd[1]);Md=b.translateFract;v.uniform2f(Yb.location,Md[0],Md[1]);Nd=F.call(this,ja,b,0);v.uniform2f(Na.location,
Nd[0],Nd[1]);v.uniform1f(za.location,b.opacity);v.uniform1i(fc.location,r.bind());(je=b.markerTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);Ee=je._texture;v.uniform1i(ca.location,Ee.bind());we=b.elements;oe=null;(oe=(Ke=ha(we))?Qc.createStream(we):Qc.getElements(we))&&v.bindBuffer(34963,oe.buffer.buffer);Oe=b.offset;if(Le=b.count)re=sb.instances,0<re?oe?Q.drawElementsInstancedANGLE(0,Le,oe.type,Oe<<(oe.type-5121>>1),re):Q.drawArraysInstancedANGLE(0,Oe,Le,re):0>re&&(oe?v.drawElements(0,
Le,oe.type,Oe<<(oe.type-5121>>1)):v.drawArrays(0,Oe,Le)),Ca.dirty=!0,qa.setVAO(null),ja.viewportWidth=n,ja.viewportHeight=A,H&&(y.cpuTime+=performance.now()-L),N&&J.destroyStream(K),Wa&&J.destroyStream(ua),gb&&J.destroyStream(Oa),db&&J.destroyStream(Ha),Da&&J.destroyStream(ob),Cb&&J.destroyStream(qb),Nb&&J.destroyStream(Qb),ic&&J.destroyStream(Xc),dd&&J.destroyStream(kd),r.unbind(),Ee.unbind(),Ke&&Qc.destroyStream(oe)},scope:function(a,c,f){var k,l,p,q,t,u,v,x,r,w,I,E,F,C,L,K,O,R,N,Y,ba,S,T,U,W,X,
la,ia,ca,da,oa,ka,na,ua,qa,ra,ma,za,Ga,Na,Ka,xb,Qa,Za,vc,Hb,Ma,mb,tb,gb,Oa,rb,Ib,Ra,cb,lc,sd,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,zb,Jb,Lb,Vb,xa,Rb,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,Yb,tc,Va,Mb,Xb,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,dc,sc,fc,Mc,qc,Zc,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,Id,he,Yc,Ic,be,Xd,Jd,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,fe,se,te,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,me,we,oe,Ke,Oe,Le,re,Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,
Je,Ve,Ye,Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,pf,mf,qf,Af,Bf,Ne,ze,nf,of,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Kf,Lf,Mf,rf,Rf,Gf,sf,dg,Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;k=a.viewport;l=k.x|0;p=k.y|0;q="width"in k?k.width|0:ja.framebufferWidth-l;t="height"in k?k.height|0:ja.framebufferHeight-p;u=ja.viewportWidth;ja.viewportWidth=q;v=ja.viewportHeight;ja.viewportHeight=
t;x=zd[0];zd[0]=l;r=zd[1];zd[1]=p;w=zd[2];zd[2]=q;I=zd[3];zd[3]=t;E=G[0];G[0]=0;F=G[1];G[1]=0;C=G[2];G[2]=0;L=G[3];G[3]=1;K=ta.blend_enable;ta.blend_enable=!0;O=wa[0];wa[0]=770;R=wa[1];wa[1]=771;N=wa[2];wa[2]=773;Y=wa[3];wa[3]=1;ba=ta.depth_enable;ta.depth_enable=!1;S=a.viewport;T=S.x|0;U=S.y|0;W="width"in S?S.width|0:ja.framebufferWidth-T;X="height"in S?S.height|0:ja.framebufferHeight-U;la=Ae[0];Ae[0]=T;ia=Ae[1];Ae[1]=U;ca=Ae[2];Ae[2]=W;da=Ae[3];Ae[3]=X;oa=ta.scissor_enable;ta.scissor_enable=!0;
ka=ta.stencil_enable;ta.stencil_enable=!1;if(na=Ca.profile)ua=performance.now(),y.count++;qa=a.elements;ra=null;ra=(ma=ha(qa))?Qc.createStream(qa):Qc.getElements(qa);za=sb.elements;sb.elements=ra;Ga=a.offset;Na=sb.offset;sb.offset=Ga;Ka=a.count;xb=sb.count;sb.count=Ka;Qa=sb.primitive;sb.primitive=0;Za=ga[45];ga[45]=!1;vc=a.markerTexture;Hb=ga[48];ga[48]=vc;Ma=a.opacity;mb=ga[10];ga[10]=Ma;tb=D.call(this,ja,a,f);gb=ga[46];ga[46]=tb;Oa=ga[47];ga[47]=z;rb=ja.pixelRatio;Ib=ga[34];ga[34]=rb;Ra=a.scale;
cb=ga[6];ga[6]=Ra;lc=a.scaleFract;sd=ga[7];ga[7]=lc;ec=a.translate;ib=ga[8];ga[8]=ec;jb=a.translateFract;sa=ga[9];ga[9]=jb;nb=B.call(this,ja,a,f);va=!1;Ua=null;ab=0;Aa=!1;Ha=db=0;Bb=1;yb=0;Sa=5126;Vb=Lb=Jb=zb=0;ha(nb)?(va=!0,Ua=J.createStream(34962,nb),Sa=Ua.dtype):(Ua=J.getBuffer(nb))?Sa=Ua.dtype:"constant"in nb?(Bb=2,"number"===typeof nb.constant?(Jb=nb.constant,Lb=Vb=zb=0):(Jb=0<nb.constant.length?nb.constant[0]:0,Lb=1<nb.constant.length?nb.constant[1]:0,Vb=2<nb.constant.length?nb.constant[2]:
0,zb=3<nb.constant.length?nb.constant[3]:0)):(Ua=ha(nb.buffer)?J.createStream(34962,nb.buffer):J.getBuffer(nb.buffer),Sa="type"in nb?Ld[nb.type]:Ua.dtype,Aa=!!nb.normalized,Ha=nb.size|0,db=nb.offset|0,yb=nb.stride|0,ab=nb.divisor|0);xa=H.buffer;H.buffer=Ua;Rb=H.divisor;H.divisor=ab;Ja=H.normalized;H.normalized=Aa;Ob=H.offset;H.offset=db;eb=H.size;H.size=Ha;hb=H.state;H.state=Bb;ya=H.stride;H.stride=yb;gc=H.type;H.type=Sa;Da=H.w;H.w=zb;ob=H.x;H.x=Jb;pb=H.y;H.y=Lb;Xa=H.z;H.z=Vb;Ya=m.call(this,ja,a,
f);nc=!1;Yb=null;tc=0;Va=!1;Xb=Mb=0;Ea=1;xc=0;Pa=5126;Cb=ub=kb=Ba=0;ha(Ya)?(nc=!0,Yb=J.createStream(34962,Ya),Pa=Yb.dtype):(Yb=J.getBuffer(Ya))?Pa=Yb.dtype:"constant"in Ya?(Ea=2,"number"===typeof Ya.constant?(kb=Ya.constant,ub=Cb=Ba=0):(kb=0<Ya.constant.length?Ya.constant[0]:0,ub=1<Ya.constant.length?Ya.constant[1]:0,Cb=2<Ya.constant.length?Ya.constant[2]:0,Ba=3<Ya.constant.length?Ya.constant[3]:0)):(Yb=ha(Ya.buffer)?J.createStream(34962,Ya.buffer):J.getBuffer(Ya.buffer),Pa="type"in Ya?Ld[Ya.type]:
Yb.dtype,Va=!!Ya.normalized,Xb=Ya.size|0,Mb=Ya.offset|0,xc=Ya.stride|0,tc=Ya.divisor|0);qb=Q.buffer;Q.buffer=Yb;uc=Q.divisor;Q.divisor=tc;vb=Q.normalized;Q.normalized=Va;dc=Q.offset;Q.offset=Mb;sc=Q.size;Q.size=Xb;fc=Q.state;Q.state=Ea;Mc=Q.stride;Q.stride=xc;qc=Q.type;Q.type=Pa;Zc=Q.w;Q.w=Ba;Wb=Q.x;Q.x=kb;cc=Q.y;Q.y=ub;Pb=Q.z;Q.z=Cb;Fa=aa.call(this,ja,a,f);$b=!1;lb=null;wb=0;Nb=!1;hc=Qb=0;jc=1;Sc=0;Bc=5126;cd=Nc=Dc=Cc=0;ha(Fa)?($b=!0,lb=J.createStream(34962,Fa),Bc=lb.dtype):(lb=J.getBuffer(Fa))?
Bc=lb.dtype:"constant"in Fa?(jc=2,"number"===typeof Fa.constant?(Dc=Fa.constant,Nc=cd=Cc=0):(Dc=0<Fa.constant.length?Fa.constant[0]:0,Nc=1<Fa.constant.length?Fa.constant[1]:0,cd=2<Fa.constant.length?Fa.constant[2]:0,Cc=3<Fa.constant.length?Fa.constant[3]:0)):(lb=ha(Fa.buffer)?J.createStream(34962,Fa.buffer):J.getBuffer(Fa.buffer),Bc="type"in Fa?Ld[Fa.type]:lb.dtype,Nb=!!Fa.normalized,hc=Fa.size|0,Qb=Fa.offset|0,Sc=Fa.stride|0,wb=Fa.divisor|0);Tc=h.buffer;h.buffer=lb;Oc=h.divisor;h.divisor=wb;Kb=h.normalized;
h.normalized=Nb;Fb=h.offset;h.offset=Qb;Pc=h.size;h.size=hc;Hc=h.state;h.state=jc;Uc=h.stride;h.stride=Sc;ic=h.type;h.type=Bc;Xc=h.w;h.w=Cc;fd=h.x;h.x=Dc;Id=h.y;h.y=Nc;he=h.z;h.z=cd;Yc=g.call(this,ja,a,f);Ic=!1;be=null;Xd=0;Jd=!1;Fd=Td=0;Dd=1;hd=0;Ec=5126;kd=dd=jd=nd=0;ha(Yc)?(Ic=!0,be=J.createStream(34962,Yc),Ec=be.dtype):(be=J.getBuffer(Yc))?Ec=be.dtype:"constant"in Yc?(Dd=2,"number"===typeof Yc.constant?(jd=Yc.constant,dd=kd=nd=0):(jd=0<Yc.constant.length?Yc.constant[0]:0,dd=1<Yc.constant.length?
Yc.constant[1]:0,kd=2<Yc.constant.length?Yc.constant[2]:0,nd=3<Yc.constant.length?Yc.constant[3]:0)):(be=ha(Yc.buffer)?J.createStream(34962,Yc.buffer):J.getBuffer(Yc.buffer),Ec="type"in Yc?Ld[Yc.type]:be.dtype,Jd=!!Yc.normalized,Fd=Yc.size|0,Td=Yc.offset|0,hd=Yc.stride|0,Xd=Yc.divisor|0);Ad=d.buffer;d.buffer=be;Bd=d.divisor;d.divisor=Xd;fe=d.normalized;d.normalized=Jd;se=d.offset;d.offset=Td;te=d.size;d.size=Fd;ee=d.state;d.state=Dd;de=d.stride;d.stride=hd;ae=d.type;d.type=Ec;pe=d.w;d.w=nd;Yd=d.x;
d.x=jd;ie=d.y;d.y=dd;yc=d.z;d.z=kd;Wc=A.call(this,ja,a,f);qe=!1;le=null;Ed=0;Kd=!1;Nd=Md=0;je=1;me=0;we=5126;Le=Oe=Ke=oe=0;ha(Wc)?(qe=!0,le=J.createStream(34962,Wc),we=le.dtype):(le=J.getBuffer(Wc))?we=le.dtype:"constant"in Wc?(je=2,"number"===typeof Wc.constant?(Ke=Wc.constant,Oe=Le=oe=0):(Ke=0<Wc.constant.length?Wc.constant[0]:0,Oe=1<Wc.constant.length?Wc.constant[1]:0,Le=2<Wc.constant.length?Wc.constant[2]:0,oe=3<Wc.constant.length?Wc.constant[3]:0)):(le=ha(Wc.buffer)?J.createStream(34962,Wc.buffer):
J.getBuffer(Wc.buffer),we="type"in Wc?Ld[Wc.type]:le.dtype,Kd=!!Wc.normalized,Nd=Wc.size|0,Md=Wc.offset|0,me=Wc.stride|0,Ed=Wc.divisor|0);re=P.buffer;P.buffer=le;Be=P.divisor;P.divisor=Ed;Fe=P.normalized;P.normalized=Kd;Ge=P.offset;P.offset=Md;He=P.size;P.size=Nd;Ce=P.state;P.state=je;Gd=P.stride;P.stride=me;Qd=P.type;P.type=we;Wd=P.w;P.w=oe;Zd=P.x;P.x=Ke;Ie=P.y;P.y=Oe;yd=P.z;P.z=Le;Od=ea.call(this,ja,a,f);ye=!1;Je=null;Ve=0;Ye=!1;Me=Pe=0;We=1;Te=0;Qe=5126;Se=Ud=Pd=Re=0;ha(Od)?(ye=!0,Je=J.createStream(34962,
Od),Qe=Je.dtype):(Je=J.getBuffer(Od))?Qe=Je.dtype:"constant"in Od?(We=2,"number"===typeof Od.constant?(Pd=Od.constant,Ud=Se=Re=0):(Pd=0<Od.constant.length?Od.constant[0]:0,Ud=1<Od.constant.length?Od.constant[1]:0,Se=2<Od.constant.length?Od.constant[2]:0,Re=3<Od.constant.length?Od.constant[3]:0)):(Je=ha(Od.buffer)?J.createStream(34962,Od.buffer):J.getBuffer(Od.buffer),Qe="type"in Od?Ld[Od.type]:Je.dtype,Ye=!!Od.normalized,Me=Od.size|0,Pe=Od.offset|0,Te=Od.stride|0,Ve=Od.divisor|0);gf=n.buffer;n.buffer=
Je;lf=n.divisor;n.divisor=Ve;cf=n.normalized;n.normalized=Ye;hf=n.offset;n.offset=Pe;jf=n.size;n.size=Me;kf=n.state;n.state=We;pf=n.stride;n.stride=Te;mf=n.type;n.type=Qe;qf=n.w;n.w=Re;Af=n.x;n.x=Pd;Bf=n.y;n.y=Ud;Ne=n.z;n.z=Se;ze=pa.call(this,ja,a,f);nf=!1;of=null;Cf=0;Ff=!1;Df=zf=0;Ef=1;uf=0;vf=5126;If=xf=wf=tf=0;ha(ze)?(nf=!0,of=J.createStream(34962,ze),vf=of.dtype):(of=J.getBuffer(ze))?vf=of.dtype:"constant"in ze?(Ef=2,"number"===typeof ze.constant?(wf=ze.constant,xf=If=tf=0):(wf=0<ze.constant.length?
ze.constant[0]:0,xf=1<ze.constant.length?ze.constant[1]:0,If=2<ze.constant.length?ze.constant[2]:0,tf=3<ze.constant.length?ze.constant[3]:0)):(of=ha(ze.buffer)?J.createStream(34962,ze.buffer):J.getBuffer(ze.buffer),vf="type"in ze?Ld[ze.type]:of.dtype,Ff=!!ze.normalized,Df=ze.size|0,zf=ze.offset|0,uf=ze.stride|0,Cf=ze.divisor|0);Kf=M.buffer;M.buffer=of;Lf=M.divisor;M.divisor=Cf;Mf=M.normalized;M.normalized=Ff;rf=M.offset;M.offset=zf;Rf=M.size;M.size=Df;Gf=M.state;M.state=Ef;sf=M.stride;M.stride=uf;
dg=M.type;M.type=vf;Sf=M.w;M.w=tf;Tf=M.x;M.x=wf;qg=M.y;M.y=xf;df=M.z;M.z=If;$e=fa.call(this,ja,a,f);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ha($e)?(Nf=!0,Of=J.createStream(34962,$e),Uf=Of.dtype):(Of=J.getBuffer($e))?Uf=Of.dtype:"constant"in $e?(ig=2,"number"===typeof $e.constant?(Yf=$e.constant,Zf=jg=Xf=0):(Yf=0<$e.constant.length?$e.constant[0]:0,Zf=1<$e.constant.length?$e.constant[1]:0,jg=2<$e.constant.length?$e.constant[2]:0,Xf=3<$e.constant.length?$e.constant[3]:0)):(Of=
ha($e.buffer)?J.createStream(34962,$e.buffer):J.getBuffer($e.buffer),Uf="type"in $e?Ld[$e.type]:Of.dtype,fg=!!$e.normalized,hg=$e.size|0,gg=$e.offset|0,Wf=$e.stride|0,eg=$e.divisor|0);rg=b.buffer;b.buffer=Of;sg=b.divisor;b.divisor=eg;tg=b.normalized;b.normalized=fg;ug=b.offset;b.offset=gg;vg=b.size;b.size=hg;wg=b.state;b.state=ig;xg=b.stride;b.stride=Wf;yg=b.type;b.type=Uf;zg=b.w;b.w=Xf;Ag=b.x;b.x=Yf;Bg=b.y;b.y=Zf;ef=b.z;b.z=jg;af=e.call(this,ja,a,f);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=
5126;pg=cg=bg=ag=0;ha(af)?(Pf=!0,Qf=J.createStream(34962,af),Vf=Qf.dtype):(Qf=J.getBuffer(af))?Vf=Qf.dtype:"constant"in af?(og=2,"number"===typeof af.constant?(bg=af.constant,cg=pg=ag=0):(bg=0<af.constant.length?af.constant[0]:0,cg=1<af.constant.length?af.constant[1]:0,pg=2<af.constant.length?af.constant[2]:0,ag=3<af.constant.length?af.constant[3]:0)):(Qf=ha(af.buffer)?J.createStream(34962,af.buffer):J.getBuffer(af.buffer),Vf="type"in af?Ld[af.type]:Qf.dtype,lg=!!af.normalized,ng=af.size|0,mg=af.offset|
0,$f=af.stride|0,kg=af.divisor|0);Cg=Z.buffer;Z.buffer=Qf;Dg=Z.divisor;Z.divisor=kg;Eg=Z.normalized;Z.normalized=lg;Fg=Z.offset;Z.offset=mg;Gg=Z.size;Z.size=ng;Hg=Z.state;Z.state=og;Ig=Z.stride;Z.stride=$f;Jg=Z.type;Z.type=Vf;Kg=Z.w;Z.w=ag;Lg=Z.x;Z.x=bg;Mg=Z.y;Z.y=cg;Ng=Z.z;Z.z=pg;Og=V.vert;V.vert=44;Pg=V.frag;V.frag=43;Ca.dirty=!0;c(ja,a,f);ja.viewportWidth=u;ja.viewportHeight=v;zd[0]=x;zd[1]=r;zd[2]=w;zd[3]=I;G[0]=E;G[1]=F;G[2]=C;G[3]=L;ta.blend_enable=K;wa[0]=O;wa[1]=R;wa[2]=N;wa[3]=Y;ta.depth_enable=
ba;Ae[0]=la;Ae[1]=ia;Ae[2]=ca;Ae[3]=da;ta.scissor_enable=oa;ta.stencil_enable=ka;na&&(y.cpuTime+=performance.now()-ua);ma&&Qc.destroyStream(ra);sb.elements=za;sb.offset=Na;sb.count=xb;sb.primitive=Qa;ga[45]=Za;ga[48]=Hb;ga[10]=mb;ga[46]=gb;ga[47]=Oa;ga[34]=Ib;ga[6]=cb;ga[7]=sd;ga[8]=ib;ga[9]=sa;va&&J.destroyStream(Ua);H.buffer=xa;H.divisor=Rb;H.normalized=Ja;H.offset=Ob;H.size=eb;H.state=hb;H.stride=ya;H.type=gc;H.w=Da;H.x=ob;H.y=pb;H.z=Xa;nc&&J.destroyStream(Yb);Q.buffer=qb;Q.divisor=uc;Q.normalized=
vb;Q.offset=dc;Q.size=sc;Q.state=fc;Q.stride=Mc;Q.type=qc;Q.w=Zc;Q.x=Wb;Q.y=cc;Q.z=Pb;$b&&J.destroyStream(lb);h.buffer=Tc;h.divisor=Oc;h.normalized=Kb;h.offset=Fb;h.size=Pc;h.state=Hc;h.stride=Uc;h.type=ic;h.w=Xc;h.x=fd;h.y=Id;h.z=he;Ic&&J.destroyStream(be);d.buffer=Ad;d.divisor=Bd;d.normalized=fe;d.offset=se;d.size=te;d.state=ee;d.stride=de;d.type=ae;d.w=pe;d.x=Yd;d.y=ie;d.z=yc;qe&&J.destroyStream(le);P.buffer=re;P.divisor=Be;P.normalized=Fe;P.offset=Ge;P.size=He;P.state=Ce;P.stride=Gd;P.type=Qd;
P.w=Wd;P.x=Zd;P.y=Ie;P.z=yd;ye&&J.destroyStream(Je);n.buffer=gf;n.divisor=lf;n.normalized=cf;n.offset=hf;n.size=jf;n.state=kf;n.stride=pf;n.type=mf;n.w=qf;n.x=Af;n.y=Bf;n.z=Ne;nf&&J.destroyStream(of);M.buffer=Kf;M.divisor=Lf;M.normalized=Mf;M.offset=rf;M.size=Rf;M.state=Gf;M.stride=sf;M.type=dg;M.w=Sf;M.x=Tf;M.y=qg;M.z=df;Nf&&J.destroyStream(Of);b.buffer=rg;b.divisor=sg;b.normalized=tg;b.offset=ug;b.size=vg;b.state=wg;b.stride=xg;b.type=yg;b.w=zg;b.x=Ag;b.y=Bg;b.z=ef;Pf&&J.destroyStream(Qf);Z.buffer=
Cg;Z.divisor=Dg;Z.normalized=Eg;Z.offset=Fg;Z.size=Gg;Z.state=Hg;Z.stride=Ig;Z.type=Jg;Z.w=Kg;Z.x=Lg;Z.y=Mg;Z.z=Ng;V.vert=Og;V.frag=Pg;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(k,y,q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,aa,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,Ka,Ra,zb,Xb,na,Qa,X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra,Yb,dc,qc,sd){var vc,Y,J,ja,
Ca,sb,Qc,Zc,E,v,ha,ta,V,ga,qa,G,t,ba,R,wa,oa,l,lc,ia,p,Hb,xb,Ve,me,Ae,be,Id,se,Ic,fe,te,Jd,zd,Xd;vc=k.attributes;Y=k.buffer;J=k.context;ja=k.current;Ca=k.draw;sb=k.elements;Qc=k.extensions;Zc=k.framebuffer;E=k.gl;v=k.isBufferArgs;ha=k.next;ta=k.shader;V=k.uniforms;ga=k.vao;qa=ha.blend_color;G=ja.blend_color;t=ha.blend_equation;ba=ja.blend_equation;R=ha.blend_func;wa=ja.blend_func;oa=ha.colorMask;l=ja.colorMask;lc=ha.depth_range;ia=ja.depth_range;p=ha.polygonOffset_offset;Hb=ja.polygonOffset_offset;
xb=ha.sample_coverage;Ve=ja.sample_coverage;me=ha.scissor_box;Ae=ja.scissor_box;be=ha.stencil_func;Id=ja.stencil_func;se=ha.stencil_opBack;Ic=ja.stencil_opBack;fe=ha.stencil_opFront;te=ja.stencil_opFront;Jd=ha.viewport;zd=ja.viewport;Xd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var c,d,e,g,h,f;c=Zc.next;c!==Zc.cur&&(c?E.bindFramebuffer(36160,c.framebuffer):E.bindFramebuffer(36160,null),Zc.cur=c);if(ja.dirty){var k,m,n,
q,x,r,w,A,z,I,D,B,M,F,P,C,H,Q,O,R,ea,V,W,Z,la,fa,aa,pa,ta,Ia,qa,Ab,$a,Gb;k=ha.dither;k!==ja.dither&&(k?E.enable(3024):E.disable(3024),ja.dither=k);m=t[0];n=t[1];if(m!==ba[0]||n!==ba[1])E.blendEquationSeparate(m,n),ba[0]=m,ba[1]=n;q=ha.depth_func;q!==ja.depth_func&&(E.depthFunc(q),ja.depth_func=q);x=lc[0];r=lc[1];if(x!==ia[0]||r!==ia[1])E.depthRange(x,r),ia[0]=x,ia[1]=r;w=ha.depth_mask;w!==ja.depth_mask&&(E.depthMask(w),ja.depth_mask=w);A=oa[0];z=oa[1];I=oa[2];D=oa[3];if(A!==l[0]||z!==l[1]||I!==l[2]||
D!==l[3])E.colorMask(A,z,I,D),l[0]=A,l[1]=z,l[2]=I,l[3]=D;B=ha.cull_enable;B!==ja.cull_enable&&(B?E.enable(2884):E.disable(2884),ja.cull_enable=B);M=ha.cull_face;M!==ja.cull_face&&(E.cullFace(M),ja.cull_face=M);F=ha.frontFace;F!==ja.frontFace&&(E.frontFace(F),ja.frontFace=F);P=ha.lineWidth;P!==ja.lineWidth&&(E.lineWidth(P),ja.lineWidth=P);C=ha.polygonOffset_enable;C!==ja.polygonOffset_enable&&(C?E.enable(32823):E.disable(32823),ja.polygonOffset_enable=C);H=p[0];Q=p[1];if(H!==Hb[0]||Q!==Hb[1])E.polygonOffset(H,
Q),Hb[0]=H,Hb[1]=Q;O=ha.sample_alpha;O!==ja.sample_alpha&&(O?E.enable(32926):E.disable(32926),ja.sample_alpha=O);R=ha.sample_enable;R!==ja.sample_enable&&(R?E.enable(32928):E.disable(32928),ja.sample_enable=R);ea=xb[0];V=xb[1];if(ea!==Ve[0]||V!==Ve[1])E.sampleCoverage(ea,V),Ve[0]=ea,Ve[1]=V;W=ha.stencil_mask;W!==ja.stencil_mask&&(E.stencilMask(W),ja.stencil_mask=W);Z=be[0];la=be[1];fa=be[2];if(Z!==Id[0]||la!==Id[1]||fa!==Id[2])E.stencilFunc(Z,la,fa),Id[0]=Z,Id[1]=la,Id[2]=fa;aa=fe[0];pa=fe[1];ta=
fe[2];Ia=fe[3];if(aa!==te[0]||pa!==te[1]||ta!==te[2]||Ia!==te[3])E.stencilOpSeparate(aa,pa,ta,Ia),te[0]=aa,te[1]=pa,te[2]=ta,te[3]=Ia;qa=se[0];Ab=se[1];$a=se[2];Gb=se[3];if(qa!==Ic[0]||Ab!==Ic[1]||$a!==Ic[2]||Gb!==Ic[3])E.stencilOpSeparate(qa,Ab,$a,Gb),Ic[0]=qa,Ic[1]=Ab,Ic[2]=$a,Ic[3]=Gb}E.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;E.enable(3042);ja.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;E.disable(2929);ja.depth_enable=!1;E.enable(3089);ja.scissor_enable=
!0;E.disable(2960);ja.stencil_enable=!1;if(d=ja.profile)e=performance.now(),y.count+=a;E.useProgram(Ka.program);g=Qc.angle_instanced_arrays;var bb;ga.setVAO(null);E.uniform1i(u.location,!1);E.uniform1i(Na.location,ma.bind());bb=Ca.instances;for(h=0;h<a;++h){f=b[h];var wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,
Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,Jd,he,Yc,me,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Xe,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Hf,Oe,Le,re,Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,pf,mf,qf,Af,Bf,Ne,ze,nf,of,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Kf,Lf,Mf,rf,Rf,Gf,sf;wc=f.viewport;Sb=wc.x|0;ge=wc.y|0;ac="width"in wc?wc.width|0:J.framebufferWidth-Sb;Tb="height"in wc?wc.height|0:J.framebufferHeight-ge;rd=
J.viewportWidth;J.viewportWidth=ac;Ub=J.viewportHeight;J.viewportHeight=Tb;E.viewport(Sb,ge,ac,Tb);zd[0]=Sb;zd[1]=ge;zd[2]=ac;zd[3]=Tb;Ma=f.viewport;mb=Ma.x|0;tb=Ma.y|0;gb="width"in Ma?Ma.width|0:J.framebufferWidth-mb;Oa="height"in Ma?Ma.height|0:J.framebufferHeight-tb;E.scissor(mb,tb,gb,Oa);Ae[0]=mb;Ae[1]=tb;Ae[2]=gb;Ae[3]=Oa;oc=Ra.call(this,J,f,h);Ib=!1;Vc=null;cb=0;mc=!1;ec=Gc=0;ib=1;jb=0;sa=5126;ab=Ua=va=nb=0;v(oc)?(Ib=!0,Vc=Y.createStream(34962,oc),sa=Vc.dtype):(Vc=Y.getBuffer(oc))?sa=Vc.dtype:
"constant"in oc?(ib=2,"number"===typeof oc.constant?(va=oc.constant,Ua=ab=nb=0):(va=0<oc.constant.length?oc.constant[0]:0,Ua=1<oc.constant.length?oc.constant[1]:0,ab=2<oc.constant.length?oc.constant[2]:0,nb=3<oc.constant.length?oc.constant[3]:0)):(Vc=v(oc.buffer)?Y.createStream(34962,oc.buffer):Y.getBuffer(oc.buffer),sa="type"in oc?Xd[oc.type]:Vc.dtype,mc=!!oc.normalized,ec=oc.size|0,Gc=oc.offset|0,jb=oc.stride|0,cb=oc.divisor|0);Aa=Yb.location;db=vc[Aa];if(1===ib){db.buffer||E.enableVertexAttribArray(Aa);
Ha=ec||1;if(db.type!==sa||db.size!==Ha||db.buffer!==Vc||db.normalized!==mc||db.offset!==Gc||db.stride!==jb)E.bindBuffer(34962,Vc.buffer),E.vertexAttribPointer(Aa,Ha,sa,mc,jb,Gc),db.type=sa,db.size=Ha,db.buffer=Vc,db.normalized=mc,db.offset=Gc,db.stride=jb;db.divisor!==cb&&(g.vertexAttribDivisorANGLE(Aa,cb),db.divisor=cb)}else if(db.buffer&&(E.disableVertexAttribArray(Aa),db.buffer=null),db.x!==va||db.y!==Ua||db.z!==ab||db.w!==nb)E.vertexAttrib4f(Aa,va,Ua,ab,nb),db.x=va,db.y=Ua,db.z=ab,db.w=nb;Bb=
zb.call(this,J,f,h);yb=!1;Sa=null;Kc=0;Jb=!1;Vb=Lb=0;xa=1;ce=0;Ja=5126;ya=hb=eb=Ob=0;v(Bb)?(yb=!0,Sa=Y.createStream(34962,Bb),Ja=Sa.dtype):(Sa=Y.getBuffer(Bb))?Ja=Sa.dtype:"constant"in Bb?(xa=2,"number"===typeof Bb.constant?(eb=Bb.constant,hb=ya=Ob=0):(eb=0<Bb.constant.length?Bb.constant[0]:0,hb=1<Bb.constant.length?Bb.constant[1]:0,ya=2<Bb.constant.length?Bb.constant[2]:0,Ob=3<Bb.constant.length?Bb.constant[3]:0)):(Sa=v(Bb.buffer)?Y.createStream(34962,Bb.buffer):Y.getBuffer(Bb.buffer),Ja="type"in
Bb?Xd[Bb.type]:Sa.dtype,Jb=!!Bb.normalized,Vb=Bb.size|0,Lb=Bb.offset|0,ce=Bb.stride|0,Kc=Bb.divisor|0);gc=qc.location;Da=vc[gc];if(1===xa){Da.buffer||E.enableVertexAttribArray(gc);ob=Vb||1;if(Da.type!==Ja||Da.size!==ob||Da.buffer!==Sa||Da.normalized!==Jb||Da.offset!==Lb||Da.stride!==ce)E.bindBuffer(34962,Sa.buffer),E.vertexAttribPointer(gc,ob,Ja,Jb,ce,Lb),Da.type=Ja,Da.size=ob,Da.buffer=Sa,Da.normalized=Jb,Da.offset=Lb,Da.stride=ce;Da.divisor!==Kc&&(g.vertexAttribDivisorANGLE(gc,Kc),Da.divisor=Kc)}else if(Da.buffer&&
(E.disableVertexAttribArray(gc),Da.buffer=null),Da.x!==eb||Da.y!==hb||Da.z!==ya||Da.w!==Ob)E.vertexAttrib4f(gc,eb,hb,ya,Ob),Da.x=eb,Da.y=hb,Da.z=ya,Da.w=Ob;pb=Xb.call(this,J,f,h);Xa=!1;Ya=null;nc=0;ed=!1;Va=tc=0;Mb=1;bd=0;Ea=5126;kb=Ba=Pa=xc=0;v(pb)?(Xa=!0,Ya=Y.createStream(34962,pb),Ea=Ya.dtype):(Ya=Y.getBuffer(pb))?Ea=Ya.dtype:"constant"in pb?(Mb=2,"number"===typeof pb.constant?(Pa=pb.constant,Ba=kb=xc=0):(Pa=0<pb.constant.length?pb.constant[0]:0,Ba=1<pb.constant.length?pb.constant[1]:0,kb=2<pb.constant.length?
pb.constant[2]:0,xc=3<pb.constant.length?pb.constant[3]:0)):(Ya=v(pb.buffer)?Y.createStream(34962,pb.buffer):Y.getBuffer(pb.buffer),Ea="type"in pb?Xd[pb.type]:Ya.dtype,ed=!!pb.normalized,Va=pb.size|0,tc=pb.offset|0,bd=pb.stride|0,nc=pb.divisor|0);ub=dc.location;Cb=vc[ub];if(1===Mb){Cb.buffer||E.enableVertexAttribArray(ub);qb=Va||1;if(Cb.type!==Ea||Cb.size!==qb||Cb.buffer!==Ya||Cb.normalized!==ed||Cb.offset!==tc||Cb.stride!==bd)E.bindBuffer(34962,Ya.buffer),E.vertexAttribPointer(ub,qb,Ea,ed,bd,tc),
Cb.type=Ea,Cb.size=qb,Cb.buffer=Ya,Cb.normalized=ed,Cb.offset=tc,Cb.stride=bd;Cb.divisor!==nc&&(g.vertexAttribDivisorANGLE(ub,nc),Cb.divisor=nc)}else if(Cb.buffer&&(E.disableVertexAttribArray(ub),Cb.buffer=null),Cb.x!==Pa||Cb.y!==Ba||Cb.z!==kb||Cb.w!==xc)E.vertexAttrib4f(ub,Pa,Ba,kb,xc),Cb.x=Pa,Cb.y=Ba,Cb.z=kb,Cb.w=xc;uc=na.call(this,J,f,h);vb=!1;vd=null;sc=0;Hd=!1;id=Mc=0;wd=1;Wb=0;cc=5126;lb=$b=Fa=Pb=0;v(uc)?(vb=!0,vd=Y.createStream(34962,uc),cc=vd.dtype):(vd=Y.getBuffer(uc))?cc=vd.dtype:"constant"in
uc?(wd=2,"number"===typeof uc.constant?(Fa=uc.constant,$b=lb=Pb=0):(Fa=0<uc.constant.length?uc.constant[0]:0,$b=1<uc.constant.length?uc.constant[1]:0,lb=2<uc.constant.length?uc.constant[2]:0,Pb=3<uc.constant.length?uc.constant[3]:0)):(vd=v(uc.buffer)?Y.createStream(34962,uc.buffer):Y.getBuffer(uc.buffer),cc="type"in uc?Xd[uc.type]:vd.dtype,Hd=!!uc.normalized,id=uc.size|0,Mc=uc.offset|0,Wb=uc.stride|0,sc=uc.divisor|0);wb=sd.location;Nb=vc[wb];if(1===wd){Nb.buffer||E.enableVertexAttribArray(wb);Qb=
id||1;if(Nb.type!==cc||Nb.size!==Qb||Nb.buffer!==vd||Nb.normalized!==Hd||Nb.offset!==Mc||Nb.stride!==Wb)E.bindBuffer(34962,vd.buffer),E.vertexAttribPointer(wb,Qb,cc,Hd,Wb,Mc),Nb.type=cc,Nb.size=Qb,Nb.buffer=vd,Nb.normalized=Hd,Nb.offset=Mc,Nb.stride=Wb;Nb.divisor!==sc&&(g.vertexAttribDivisorANGLE(wb,sc),Nb.divisor=sc)}else if(Nb.buffer&&(E.disableVertexAttribArray(wb),Nb.buffer=null),Nb.x!==Fa||Nb.y!==$b||Nb.z!==lb||Nb.w!==Pb)E.vertexAttrib4f(wb,Fa,$b,lb,Pb),Nb.x=Fa,Nb.y=$b,Nb.z=lb,Nb.w=Pb;hc=Qa.call(this,
J,f,h);jc=!1;Sc=null;Bc=0;Cc=!1;Nc=Dc=0;cd=1;Tc=0;Oc=5126;Hc=Pc=Fb=Kb=0;v(hc)?(jc=!0,Sc=Y.createStream(34962,hc),Oc=Sc.dtype):(Sc=Y.getBuffer(hc))?Oc=Sc.dtype:"constant"in hc?(cd=2,"number"===typeof hc.constant?(Fb=hc.constant,Pc=Hc=Kb=0):(Fb=0<hc.constant.length?hc.constant[0]:0,Pc=1<hc.constant.length?hc.constant[1]:0,Hc=2<hc.constant.length?hc.constant[2]:0,Kb=3<hc.constant.length?hc.constant[3]:0)):(Sc=v(hc.buffer)?Y.createStream(34962,hc.buffer):Y.getBuffer(hc.buffer),Oc="type"in hc?Xd[hc.type]:
Sc.dtype,Cc=!!hc.normalized,Nc=hc.size|0,Dc=hc.offset|0,Tc=hc.stride|0,Bc=hc.divisor|0);Uc=rb.location;ic=vc[Uc];if(1===cd){ic.buffer||E.enableVertexAttribArray(Uc);Xc=Nc||1;if(ic.type!==Oc||ic.size!==Xc||ic.buffer!==Sc||ic.normalized!==Cc||ic.offset!==Dc||ic.stride!==Tc)E.bindBuffer(34962,Sc.buffer),E.vertexAttribPointer(Uc,Xc,Oc,Cc,Tc,Dc),ic.type=Oc,ic.size=Xc,ic.buffer=Sc,ic.normalized=Cc,ic.offset=Dc,ic.stride=Tc;ic.divisor!==Bc&&(g.vertexAttribDivisorANGLE(Uc,Bc),ic.divisor=Bc)}else if(ic.buffer&&
(E.disableVertexAttribArray(Uc),ic.buffer=null),ic.x!==Fb||ic.y!==Pc||ic.z!==Hc||ic.w!==Kb)E.vertexAttrib4f(Uc,Fb,Pc,Hc,Kb),ic.x=Fb,ic.y=Pc,ic.z=Hc,ic.w=Kb;fd=X.call(this,J,f,h);Jd=!1;he=null;Yc=0;me=!1;ve=ke=0;ue=1;Td=0;Fd=5126;nd=Ec=hd=Dd=0;v(fd)?(Jd=!0,he=Y.createStream(34962,fd),Fd=he.dtype):(he=Y.getBuffer(fd))?Fd=he.dtype:"constant"in fd?(ue=2,"number"===typeof fd.constant?(hd=fd.constant,Ec=nd=Dd=0):(hd=0<fd.constant.length?fd.constant[0]:0,Ec=1<fd.constant.length?fd.constant[1]:0,nd=2<fd.constant.length?
fd.constant[2]:0,Dd=3<fd.constant.length?fd.constant[3]:0)):(he=v(fd.buffer)?Y.createStream(34962,fd.buffer):Y.getBuffer(fd.buffer),Fd="type"in fd?Xd[fd.type]:he.dtype,me=!!fd.normalized,ve=fd.size|0,ke=fd.offset|0,Td=fd.stride|0,Yc=fd.divisor|0);jd=Za.location;dd=vc[jd];if(1===ue){dd.buffer||E.enableVertexAttribArray(jd);kd=ve||1;if(dd.type!==Fd||dd.size!==kd||dd.buffer!==he||dd.normalized!==me||dd.offset!==ke||dd.stride!==Td)E.bindBuffer(34962,he.buffer),E.vertexAttribPointer(jd,kd,Fd,me,Td,ke),
dd.type=Fd,dd.size=kd,dd.buffer=he,dd.normalized=me,dd.offset=ke,dd.stride=Td;dd.divisor!==Yc&&(g.vertexAttribDivisorANGLE(jd,Yc),dd.divisor=Yc)}else if(dd.buffer&&(E.disableVertexAttribArray(jd),dd.buffer=null),dd.x!==hd||dd.y!==Ec||dd.z!==nd||dd.w!==Dd)E.vertexAttrib4f(jd,hd,Ec,nd,Dd),dd.x=hd,dd.y=Ec,dd.z=nd,dd.w=Dd;Ad=K.call(this,J,f,h);Bd=!1;Xe=null;ne=0;Ue=!1;de=ee=0;ae=1;pe=0;Yd=5126;qe=Wc=yc=ie=0;v(Ad)?(Bd=!0,Xe=Y.createStream(34962,Ad),Yd=Xe.dtype):(Xe=Y.getBuffer(Ad))?Yd=Xe.dtype:"constant"in
Ad?(ae=2,"number"===typeof Ad.constant?(yc=Ad.constant,Wc=qe=ie=0):(yc=0<Ad.constant.length?Ad.constant[0]:0,Wc=1<Ad.constant.length?Ad.constant[1]:0,qe=2<Ad.constant.length?Ad.constant[2]:0,ie=3<Ad.constant.length?Ad.constant[3]:0)):(Xe=v(Ad.buffer)?Y.createStream(34962,Ad.buffer):Y.getBuffer(Ad.buffer),Yd="type"in Ad?Xd[Ad.type]:Xe.dtype,Ue=!!Ad.normalized,de=Ad.size|0,ee=Ad.offset|0,pe=Ad.stride|0,ne=Ad.divisor|0);le=S.location;Ed=vc[le];if(1===ae){Ed.buffer||E.enableVertexAttribArray(le);Kd=de||
4;if(Ed.type!==Yd||Ed.size!==Kd||Ed.buffer!==Xe||Ed.normalized!==Ue||Ed.offset!==ee||Ed.stride!==pe)E.bindBuffer(34962,Xe.buffer),E.vertexAttribPointer(le,Kd,Yd,Ue,pe,ee),Ed.type=Yd,Ed.size=Kd,Ed.buffer=Xe,Ed.normalized=Ue,Ed.offset=ee,Ed.stride=pe;Ed.divisor!==ne&&(g.vertexAttribDivisorANGLE(le,ne),Ed.divisor=ne)}else if(Ed.buffer&&(E.disableVertexAttribArray(le),Ed.buffer=null),Ed.x!==yc||Ed.y!==Wc||Ed.z!==qe||Ed.w!==ie)E.vertexAttrib4f(le,yc,Wc,qe,ie),Ed.x=yc,Ed.y=Wc,Ed.z=qe,Ed.w=ie;Md=L.call(this,
J,f,h);Nd=!1;je=null;Ee=0;we=!1;Hf=oe=0;Oe=1;Le=0;re=5126;He=Ge=Fe=Be=0;v(Md)?(Nd=!0,je=Y.createStream(34962,Md),re=je.dtype):(je=Y.getBuffer(Md))?re=je.dtype:"constant"in Md?(Oe=2,"number"===typeof Md.constant?(Fe=Md.constant,Ge=He=Be=0):(Fe=0<Md.constant.length?Md.constant[0]:0,Ge=1<Md.constant.length?Md.constant[1]:0,He=2<Md.constant.length?Md.constant[2]:0,Be=3<Md.constant.length?Md.constant[3]:0)):(je=v(Md.buffer)?Y.createStream(34962,Md.buffer):Y.getBuffer(Md.buffer),re="type"in Md?Xd[Md.type]:
je.dtype,we=!!Md.normalized,Hf=Md.size|0,oe=Md.offset|0,Le=Md.stride|0,Ee=Md.divisor|0);Ce=Rb.location;Gd=vc[Ce];if(1===Oe){Gd.buffer||E.enableVertexAttribArray(Ce);Qd=Hf||4;if(Gd.type!==re||Gd.size!==Qd||Gd.buffer!==je||Gd.normalized!==we||Gd.offset!==oe||Gd.stride!==Le)E.bindBuffer(34962,je.buffer),E.vertexAttribPointer(Ce,Qd,re,we,Le,oe),Gd.type=re,Gd.size=Qd,Gd.buffer=je,Gd.normalized=we,Gd.offset=oe,Gd.stride=Le;Gd.divisor!==Ee&&(g.vertexAttribDivisorANGLE(Ce,Ee),Gd.divisor=Ee)}else if(Gd.buffer&&
(E.disableVertexAttribArray(Ce),Gd.buffer=null),Gd.x!==Fe||Gd.y!==Ge||Gd.z!==He||Gd.w!==Be)E.vertexAttrib4f(Ce,Fe,Ge,He,Be),Gd.x=Fe,Gd.y=Ge,Gd.z=He,Gd.w=Be;Wd=T.call(this,J,f,h);Zd=!1;Ie=null;yd=0;Od=!1;Je=ye=0;ff=1;Ye=0;Pe=5126;Qe=Te=We=Me=0;v(Wd)?(Zd=!0,Ie=Y.createStream(34962,Wd),Pe=Ie.dtype):(Ie=Y.getBuffer(Wd))?Pe=Ie.dtype:"constant"in Wd?(ff=2,"number"===typeof Wd.constant?(We=Wd.constant,Te=Qe=Me=0):(We=0<Wd.constant.length?Wd.constant[0]:0,Te=1<Wd.constant.length?Wd.constant[1]:0,Qe=2<Wd.constant.length?
Wd.constant[2]:0,Me=3<Wd.constant.length?Wd.constant[3]:0)):(Ie=v(Wd.buffer)?Y.createStream(34962,Wd.buffer):Y.getBuffer(Wd.buffer),Pe="type"in Wd?Xd[Wd.type]:Ie.dtype,Od=!!Wd.normalized,Je=Wd.size|0,ye=Wd.offset|0,Ye=Wd.stride|0,yd=Wd.divisor|0);Re=ka.location;Pd=vc[Re];if(1===ff){Pd.buffer||E.enableVertexAttribArray(Re);Ud=Je||1;if(Pd.type!==Pe||Pd.size!==Ud||Pd.buffer!==Ie||Pd.normalized!==Od||Pd.offset!==ye||Pd.stride!==Ye)E.bindBuffer(34962,Ie.buffer),E.vertexAttribPointer(Re,Ud,Pe,Od,Ye,ye),
Pd.type=Pe,Pd.size=Ud,Pd.buffer=Ie,Pd.normalized=Od,Pd.offset=ye,Pd.stride=Ye;Pd.divisor!==yd&&(g.vertexAttribDivisorANGLE(Re,yd),Pd.divisor=yd)}else if(Pd.buffer&&(E.disableVertexAttribArray(Re),Pd.buffer=null),Pd.x!==We||Pd.y!==Te||Pd.z!==Qe||Pd.w!==Me)E.vertexAttrib4f(Re,We,Te,Qe,Me),Pd.x=We,Pd.y=Te,Pd.z=Qe,Pd.w=Me;Se=J.pixelRatio;h&&gf===Se||(gf=Se,E.uniform1f(fc.location,Se));lf=N.call(this,J,f,h);cf=lf[0];jf=lf[1];h&&hf===cf&&kf===jf||(hf=cf,kf=jf,E.uniform2f(za.location,cf,jf));pf=f.scale;
mf=pf[0];Af=pf[1];h&&qf===mf&&Bf===Af||(qf=mf,Bf=Af,E.uniform2f(Ga.location,mf,Af));Ne=f.scaleFract;ze=Ne[0];of=Ne[1];h&&nf===ze&&Cf===of||(nf=ze,Cf=of,E.uniform2f(U.location,ze,of));Ff=f.translate;zf=Ff[0];Ef=Ff[1];h&&Df===zf&&uf===Ef||(Df=zf,uf=Ef,E.uniform2f(da.location,zf,Ef));vf=f.translateFract;tf=vf[0];xf=vf[1];h&&wf===tf&&If===xf||(wf=tf,If=xf,E.uniform2f(ra.location,tf,xf));Kf=f.opacity;h&&Lf===Kf||(Lf=Kf,E.uniform1f(ca.location,Kf));Mf=f.elements;rf=null;(rf=(Rf=v(Mf))?sb.createStream(Mf):
sb.getElements(Mf))&&E.bindBuffer(34963,rf.buffer.buffer);Gf=f.offset;if(sf=f.count)0<bb?rf?g.drawElementsInstancedANGLE(0,sf,rf.type,Gf<<(rf.type-5121>>1),bb):g.drawArraysInstancedANGLE(0,Gf,sf,bb):0>bb&&(rf?E.drawElements(0,sf,rf.type,Gf<<(rf.type-5121>>1)):E.drawArrays(0,Gf,sf)),J.viewportWidth=rd,J.viewportHeight=Ub,Ib&&Y.destroyStream(Vc),yb&&Y.destroyStream(Sa),Xa&&Y.destroyStream(Ya),vb&&Y.destroyStream(vd),jc&&Y.destroyStream(Sc),Jd&&Y.destroyStream(he),Bd&&Y.destroyStream(Xe),Nd&&Y.destroyStream(je),
Zd&&Y.destroyStream(Ie),Rf&&sb.destroyStream(rf)}ma.unbind();ja.dirty=!0;ga.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(b){var d,e,g,h,k,m,n,A,z,D,B,M,P,H,Q,L,K,R,N,ea,T,V,Z,X,fa,aa,pa,ta,Ia,qa,na,ma,Ka,La,Qa,Wa,ua,Ra,Ab,$a,Gb,bb,zb,Sb,Xb,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,Jd,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,
Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,me,he,Yc,Ke,ke,ve,ue,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Xe,ne,Ue,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Hf;d=Zc.next;d!==Zc.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),Zc.cur=d);if(ja.dirty){var Oe,Le,re,Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf;Oe=ha.dither;Oe!==ja.dither&&(Oe?E.enable(3024):E.disable(3024),ja.dither=Oe);Le=t[0];re=t[1];if(Le!==ba[0]||re!==ba[1])E.blendEquationSeparate(Le,
re),ba[0]=Le,ba[1]=re;Be=ha.depth_func;Be!==ja.depth_func&&(E.depthFunc(Be),ja.depth_func=Be);Fe=lc[0];Ge=lc[1];if(Fe!==ia[0]||Ge!==ia[1])E.depthRange(Fe,Ge),ia[0]=Fe,ia[1]=Ge;He=ha.depth_mask;He!==ja.depth_mask&&(E.depthMask(He),ja.depth_mask=He);Ce=oa[0];Gd=oa[1];Qd=oa[2];Wd=oa[3];if(Ce!==l[0]||Gd!==l[1]||Qd!==l[2]||Wd!==l[3])E.colorMask(Ce,Gd,Qd,Wd),l[0]=Ce,l[1]=Gd,l[2]=Qd,l[3]=Wd;Zd=ha.cull_enable;Zd!==ja.cull_enable&&(Zd?E.enable(2884):E.disable(2884),ja.cull_enable=Zd);Ie=ha.cull_face;Ie!==
ja.cull_face&&(E.cullFace(Ie),ja.cull_face=Ie);yd=ha.frontFace;yd!==ja.frontFace&&(E.frontFace(yd),ja.frontFace=yd);Od=ha.lineWidth;Od!==ja.lineWidth&&(E.lineWidth(Od),ja.lineWidth=Od);ye=ha.polygonOffset_enable;ye!==ja.polygonOffset_enable&&(ye?E.enable(32823):E.disable(32823),ja.polygonOffset_enable=ye);Je=p[0];ff=p[1];if(Je!==Hb[0]||ff!==Hb[1])E.polygonOffset(Je,ff),Hb[0]=Je,Hb[1]=ff;Ye=ha.sample_alpha;Ye!==ja.sample_alpha&&(Ye?E.enable(32926):E.disable(32926),ja.sample_alpha=Ye);Pe=ha.sample_enable;
Pe!==ja.sample_enable&&(Pe?E.enable(32928):E.disable(32928),ja.sample_enable=Pe);Me=xb[0];We=xb[1];if(Me!==Ve[0]||We!==Ve[1])E.sampleCoverage(Me,We),Ve[0]=Me,Ve[1]=We;Te=ha.stencil_mask;Te!==ja.stencil_mask&&(E.stencilMask(Te),ja.stencil_mask=Te);Qe=be[0];Re=be[1];Pd=be[2];if(Qe!==Id[0]||Re!==Id[1]||Pd!==Id[2])E.stencilFunc(Qe,Re,Pd),Id[0]=Qe,Id[1]=Re,Id[2]=Pd;Ud=fe[0];Se=fe[1];gf=fe[2];lf=fe[3];if(Ud!==te[0]||Se!==te[1]||gf!==te[2]||lf!==te[3])E.stencilOpSeparate(Ud,Se,gf,lf),te[0]=Ud,te[1]=Se,te[2]=
gf,te[3]=lf;cf=se[0];hf=se[1];jf=se[2];kf=se[3];if(cf!==Ic[0]||hf!==Ic[1]||jf!==Ic[2]||kf!==Ic[3])E.stencilOpSeparate(cf,hf,jf,kf),Ic[0]=cf,Ic[1]=hf,Ic[2]=jf,Ic[3]=kf}e=b.viewport;g=e.x|0;h=e.y|0;k="width"in e?e.width|0:J.framebufferWidth-g;m="height"in e?e.height|0:J.framebufferHeight-h;n=J.viewportWidth;J.viewportWidth=k;A=J.viewportHeight;J.viewportHeight=m;E.viewport(g,h,k,m);zd[0]=g;zd[1]=h;zd[2]=k;zd[3]=m;E.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;E.enable(3042);ja.blend_enable=!0;E.blendFuncSeparate(770,
771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;E.disable(2929);ja.depth_enable=!1;z=b.viewport;D=z.x|0;B=z.y|0;M="width"in z?z.width|0:J.framebufferWidth-D;P="height"in z?z.height|0:J.framebufferHeight-B;E.scissor(D,B,M,P);Ae[0]=D;Ae[1]=B;Ae[2]=M;Ae[3]=P;E.enable(3089);ja.scissor_enable=!0;E.disable(2960);ja.stencil_enable=!1;if(H=ja.profile)Q=performance.now(),y.count++;E.useProgram(q.program);L=Qc.angle_instanced_arrays;ga.setVAO(null);K=I.call(this,J,b,0);R=!1;N=null;ea=0;T=!1;Z=V=0;X=1;fa=0;
aa=5126;qa=Ia=ta=pa=0;v(K)?(R=!0,N=Y.createStream(34962,K),aa=N.dtype):(N=Y.getBuffer(K))?aa=N.dtype:"constant"in K?(X=2,"number"===typeof K.constant?(ta=K.constant,Ia=qa=pa=0):(ta=0<K.constant.length?K.constant[0]:0,Ia=1<K.constant.length?K.constant[1]:0,qa=2<K.constant.length?K.constant[2]:0,pa=3<K.constant.length?K.constant[3]:0)):(N=v(K.buffer)?Y.createStream(34962,K.buffer):Y.getBuffer(K.buffer),aa="type"in K?Xd[K.type]:N.dtype,T=!!K.normalized,Z=K.size|0,V=K.offset|0,fa=K.stride|0,ea=K.divisor|
0);na=Yb.location;ma=vc[na];if(1===X){ma.buffer||E.enableVertexAttribArray(na);Ka=Z||1;if(ma.type!==aa||ma.size!==Ka||ma.buffer!==N||ma.normalized!==T||ma.offset!==V||ma.stride!==fa)E.bindBuffer(34962,N.buffer),E.vertexAttribPointer(na,Ka,aa,T,fa,V),ma.type=aa,ma.size=Ka,ma.buffer=N,ma.normalized=T,ma.offset=V,ma.stride=fa;ma.divisor!==ea&&(L.vertexAttribDivisorANGLE(na,ea),ma.divisor=ea)}else if(ma.buffer&&(E.disableVertexAttribArray(na),ma.buffer=null),ma.x!==ta||ma.y!==Ia||ma.z!==qa||ma.w!==pa)E.vertexAttrib4f(na,
ta,Ia,qa,pa),ma.x=ta,ma.y=Ia,ma.z=qa,ma.w=pa;La=f.call(this,J,b,0);Qa=!1;Wa=null;ua=0;Ra=!1;$a=Ab=0;Gb=1;bb=0;zb=5126;Tb=ac=Xb=Sb=0;v(La)?(Qa=!0,Wa=Y.createStream(34962,La),zb=Wa.dtype):(Wa=Y.getBuffer(La))?zb=Wa.dtype:"constant"in La?(Gb=2,"number"===typeof La.constant?(Xb=La.constant,ac=Tb=Sb=0):(Xb=0<La.constant.length?La.constant[0]:0,ac=1<La.constant.length?La.constant[1]:0,Tb=2<La.constant.length?La.constant[2]:0,Sb=3<La.constant.length?La.constant[3]:0)):(Wa=v(La.buffer)?Y.createStream(34962,
La.buffer):Y.getBuffer(La.buffer),zb="type"in La?Xd[La.type]:Wa.dtype,Ra=!!La.normalized,$a=La.size|0,Ab=La.offset|0,bb=La.stride|0,ua=La.divisor|0);rd=qc.location;Ub=vc[rd];if(1===Gb){Ub.buffer||E.enableVertexAttribArray(rd);Ma=$a||1;if(Ub.type!==zb||Ub.size!==Ma||Ub.buffer!==Wa||Ub.normalized!==Ra||Ub.offset!==Ab||Ub.stride!==bb)E.bindBuffer(34962,Wa.buffer),E.vertexAttribPointer(rd,Ma,zb,Ra,bb,Ab),Ub.type=zb,Ub.size=Ma,Ub.buffer=Wa,Ub.normalized=Ra,Ub.offset=Ab,Ub.stride=bb;Ub.divisor!==ua&&(L.vertexAttribDivisorANGLE(rd,
ua),Ub.divisor=ua)}else if(Ub.buffer&&(E.disableVertexAttribArray(rd),Ub.buffer=null),Ub.x!==Xb||Ub.y!==ac||Ub.z!==Tb||Ub.w!==Sb)E.vertexAttrib4f(rd,Xb,ac,Tb,Sb),Ub.x=Xb,Ub.y=ac,Ub.z=Tb,Ub.w=Sb;mb=c.call(this,J,b,0);tb=!1;gb=null;Oa=0;oc=!1;Vc=Ib=0;cb=1;mc=0;Gc=5126;sa=jb=ib=ec=0;v(mb)?(tb=!0,gb=Y.createStream(34962,mb),Gc=gb.dtype):(gb=Y.getBuffer(mb))?Gc=gb.dtype:"constant"in mb?(cb=2,"number"===typeof mb.constant?(ib=mb.constant,jb=sa=ec=0):(ib=0<mb.constant.length?mb.constant[0]:0,jb=1<mb.constant.length?
mb.constant[1]:0,sa=2<mb.constant.length?mb.constant[2]:0,ec=3<mb.constant.length?mb.constant[3]:0)):(gb=v(mb.buffer)?Y.createStream(34962,mb.buffer):Y.getBuffer(mb.buffer),Gc="type"in mb?Xd[mb.type]:gb.dtype,oc=!!mb.normalized,Vc=mb.size|0,Ib=mb.offset|0,mc=mb.stride|0,Oa=mb.divisor|0);nb=dc.location;va=vc[nb];if(1===cb){va.buffer||E.enableVertexAttribArray(nb);Ua=Vc||1;if(va.type!==Gc||va.size!==Ua||va.buffer!==gb||va.normalized!==oc||va.offset!==Ib||va.stride!==mc)E.bindBuffer(34962,gb.buffer),
E.vertexAttribPointer(nb,Ua,Gc,oc,mc,Ib),va.type=Gc,va.size=Ua,va.buffer=gb,va.normalized=oc,va.offset=Ib,va.stride=mc;va.divisor!==Oa&&(L.vertexAttribDivisorANGLE(nb,Oa),va.divisor=Oa)}else if(va.buffer&&(E.disableVertexAttribArray(nb),va.buffer=null),va.x!==ib||va.y!==jb||va.z!==sa||va.w!==ec)E.vertexAttrib4f(nb,ib,jb,sa,ec),va.x=ib,va.y=jb,va.z=sa,va.w=ec;ab=x.call(this,J,b,0);Aa=!1;db=null;Ha=0;Bb=!1;Sa=yb=0;Kc=1;Jb=0;Lb=5126;Ja=Jd=xa=Vb=0;v(ab)?(Aa=!0,db=Y.createStream(34962,ab),Lb=db.dtype):
(db=Y.getBuffer(ab))?Lb=db.dtype:"constant"in ab?(Kc=2,"number"===typeof ab.constant?(xa=ab.constant,Jd=Ja=Vb=0):(xa=0<ab.constant.length?ab.constant[0]:0,Jd=1<ab.constant.length?ab.constant[1]:0,Ja=2<ab.constant.length?ab.constant[2]:0,Vb=3<ab.constant.length?ab.constant[3]:0)):(db=v(ab.buffer)?Y.createStream(34962,ab.buffer):Y.getBuffer(ab.buffer),Lb="type"in ab?Xd[ab.type]:db.dtype,Bb=!!ab.normalized,Sa=ab.size|0,yb=ab.offset|0,Jb=ab.stride|0,Ha=ab.divisor|0);Ob=sd.location;eb=vc[Ob];if(1===Kc){eb.buffer||
E.enableVertexAttribArray(Ob);hb=Sa||1;if(eb.type!==Lb||eb.size!==hb||eb.buffer!==db||eb.normalized!==Bb||eb.offset!==yb||eb.stride!==Jb)E.bindBuffer(34962,db.buffer),E.vertexAttribPointer(Ob,hb,Lb,Bb,Jb,yb),eb.type=Lb,eb.size=hb,eb.buffer=db,eb.normalized=Bb,eb.offset=yb,eb.stride=Jb;eb.divisor!==Ha&&(L.vertexAttribDivisorANGLE(Ob,Ha),eb.divisor=Ha)}else if(eb.buffer&&(E.disableVertexAttribArray(Ob),eb.buffer=null),eb.x!==xa||eb.y!==Jd||eb.z!==Ja||eb.w!==Vb)E.vertexAttrib4f(Ob,xa,Jd,Ja,Vb),eb.x=
xa,eb.y=Jd,eb.z=Ja,eb.w=Vb;ya=a.call(this,J,b,0);gc=!1;Da=null;ob=0;pb=!1;Ya=Xa=0;nc=1;ed=0;tc=5126;Ea=bd=Mb=Va=0;v(ya)?(gc=!0,Da=Y.createStream(34962,ya),tc=Da.dtype):(Da=Y.getBuffer(ya))?tc=Da.dtype:"constant"in ya?(nc=2,"number"===typeof ya.constant?(Mb=ya.constant,bd=Ea=Va=0):(Mb=0<ya.constant.length?ya.constant[0]:0,bd=1<ya.constant.length?ya.constant[1]:0,Ea=2<ya.constant.length?ya.constant[2]:0,Va=3<ya.constant.length?ya.constant[3]:0)):(Da=v(ya.buffer)?Y.createStream(34962,ya.buffer):Y.getBuffer(ya.buffer),
tc="type"in ya?Xd[ya.type]:Da.dtype,pb=!!ya.normalized,Ya=ya.size|0,Xa=ya.offset|0,ed=ya.stride|0,ob=ya.divisor|0);xc=rb.location;Pa=vc[xc];if(1===nc){Pa.buffer||E.enableVertexAttribArray(xc);Ba=Ya||1;if(Pa.type!==tc||Pa.size!==Ba||Pa.buffer!==Da||Pa.normalized!==pb||Pa.offset!==Xa||Pa.stride!==ed)E.bindBuffer(34962,Da.buffer),E.vertexAttribPointer(xc,Ba,tc,pb,ed,Xa),Pa.type=tc,Pa.size=Ba,Pa.buffer=Da,Pa.normalized=pb,Pa.offset=Xa,Pa.stride=ed;Pa.divisor!==ob&&(L.vertexAttribDivisorANGLE(xc,ob),Pa.divisor=
ob)}else if(Pa.buffer&&(E.disableVertexAttribArray(xc),Pa.buffer=null),Pa.x!==Mb||Pa.y!==bd||Pa.z!==Ea||Pa.w!==Va)E.vertexAttrib4f(xc,Mb,bd,Ea,Va),Pa.x=Mb,Pa.y=bd,Pa.z=Ea,Pa.w=Va;kb=w.call(this,J,b,0);ub=!1;Cb=null;qb=0;uc=!1;vd=vb=0;sc=1;Hd=0;Mc=5126;cc=Wb=wd=id=0;v(kb)?(ub=!0,Cb=Y.createStream(34962,kb),Mc=Cb.dtype):(Cb=Y.getBuffer(kb))?Mc=Cb.dtype:"constant"in kb?(sc=2,"number"===typeof kb.constant?(wd=kb.constant,Wb=cc=id=0):(wd=0<kb.constant.length?kb.constant[0]:0,Wb=1<kb.constant.length?kb.constant[1]:
0,cc=2<kb.constant.length?kb.constant[2]:0,id=3<kb.constant.length?kb.constant[3]:0)):(Cb=v(kb.buffer)?Y.createStream(34962,kb.buffer):Y.getBuffer(kb.buffer),Mc="type"in kb?Xd[kb.type]:Cb.dtype,uc=!!kb.normalized,vd=kb.size|0,vb=kb.offset|0,Hd=kb.stride|0,qb=kb.divisor|0);Pb=Za.location;Fa=vc[Pb];if(1===sc){Fa.buffer||E.enableVertexAttribArray(Pb);$b=vd||1;if(Fa.type!==Mc||Fa.size!==$b||Fa.buffer!==Cb||Fa.normalized!==uc||Fa.offset!==vb||Fa.stride!==Hd)E.bindBuffer(34962,Cb.buffer),E.vertexAttribPointer(Pb,
$b,Mc,uc,Hd,vb),Fa.type=Mc,Fa.size=$b,Fa.buffer=Cb,Fa.normalized=uc,Fa.offset=vb,Fa.stride=Hd;Fa.divisor!==qb&&(L.vertexAttribDivisorANGLE(Pb,qb),Fa.divisor=qb)}else if(Fa.buffer&&(E.disableVertexAttribArray(Pb),Fa.buffer=null),Fa.x!==wd||Fa.y!==Wb||Fa.z!==cc||Fa.w!==id)E.vertexAttrib4f(Pb,wd,Wb,cc,id),Fa.x=wd,Fa.y=Wb,Fa.z=cc,Fa.w=id;lb=C.call(this,J,b,0);wb=!1;Nb=null;Qb=0;hc=!1;Sc=jc=0;Bc=1;Cc=0;Dc=5126;Oc=Tc=cd=Nc=0;v(lb)?(wb=!0,Nb=Y.createStream(34962,lb),Dc=Nb.dtype):(Nb=Y.getBuffer(lb))?Dc=
Nb.dtype:"constant"in lb?(Bc=2,"number"===typeof lb.constant?(cd=lb.constant,Tc=Oc=Nc=0):(cd=0<lb.constant.length?lb.constant[0]:0,Tc=1<lb.constant.length?lb.constant[1]:0,Oc=2<lb.constant.length?lb.constant[2]:0,Nc=3<lb.constant.length?lb.constant[3]:0)):(Nb=v(lb.buffer)?Y.createStream(34962,lb.buffer):Y.getBuffer(lb.buffer),Dc="type"in lb?Xd[lb.type]:Nb.dtype,hc=!!lb.normalized,Sc=lb.size|0,jc=lb.offset|0,Cc=lb.stride|0,Qb=lb.divisor|0);Kb=S.location;Fb=vc[Kb];if(1===Bc){Fb.buffer||E.enableVertexAttribArray(Kb);
Pc=Sc||4;if(Fb.type!==Dc||Fb.size!==Pc||Fb.buffer!==Nb||Fb.normalized!==hc||Fb.offset!==jc||Fb.stride!==Cc)E.bindBuffer(34962,Nb.buffer),E.vertexAttribPointer(Kb,Pc,Dc,hc,Cc,jc),Fb.type=Dc,Fb.size=Pc,Fb.buffer=Nb,Fb.normalized=hc,Fb.offset=jc,Fb.stride=Cc;Fb.divisor!==Qb&&(L.vertexAttribDivisorANGLE(Kb,Qb),Fb.divisor=Qb)}else if(Fb.buffer&&(E.disableVertexAttribArray(Kb),Fb.buffer=null),Fb.x!==cd||Fb.y!==Tc||Fb.z!==Oc||Fb.w!==Nc)E.vertexAttrib4f(Kb,cd,Tc,Oc,Nc),Fb.x=cd,Fb.y=Tc,Fb.z=Oc,Fb.w=Nc;Hc=
W.call(this,J,b,0);Uc=!1;ic=null;Xc=0;fd=!1;he=me=0;Yc=1;Ke=0;ke=5126;Fd=Td=ue=ve=0;v(Hc)?(Uc=!0,ic=Y.createStream(34962,Hc),ke=ic.dtype):(ic=Y.getBuffer(Hc))?ke=ic.dtype:"constant"in Hc?(Yc=2,"number"===typeof Hc.constant?(ue=Hc.constant,Td=Fd=ve=0):(ue=0<Hc.constant.length?Hc.constant[0]:0,Td=1<Hc.constant.length?Hc.constant[1]:0,Fd=2<Hc.constant.length?Hc.constant[2]:0,ve=3<Hc.constant.length?Hc.constant[3]:0)):(ic=v(Hc.buffer)?Y.createStream(34962,Hc.buffer):Y.getBuffer(Hc.buffer),ke="type"in
Hc?Xd[Hc.type]:ic.dtype,fd=!!Hc.normalized,he=Hc.size|0,me=Hc.offset|0,Ke=Hc.stride|0,Xc=Hc.divisor|0);Dd=Rb.location;hd=vc[Dd];if(1===Yc){hd.buffer||E.enableVertexAttribArray(Dd);Ec=he||4;if(hd.type!==ke||hd.size!==Ec||hd.buffer!==ic||hd.normalized!==fd||hd.offset!==me||hd.stride!==Ke)E.bindBuffer(34962,ic.buffer),E.vertexAttribPointer(Dd,Ec,ke,fd,Ke,me),hd.type=ke,hd.size=Ec,hd.buffer=ic,hd.normalized=fd,hd.offset=me,hd.stride=Ke;hd.divisor!==Xc&&(L.vertexAttribDivisorANGLE(Dd,Xc),hd.divisor=Xc)}else if(hd.buffer&&
(E.disableVertexAttribArray(Dd),hd.buffer=null),hd.x!==ue||hd.y!==Td||hd.z!==Fd||hd.w!==ve)E.vertexAttrib4f(Dd,ue,Td,Fd,ve),hd.x=ue,hd.y=Td,hd.z=Fd,hd.w=ve;nd=O.call(this,J,b,0);jd=!1;dd=null;kd=0;Ad=!1;Xe=Bd=0;ne=1;Ue=0;ee=5126;Yd=pe=ae=de=0;v(nd)?(jd=!0,dd=Y.createStream(34962,nd),ee=dd.dtype):(dd=Y.getBuffer(nd))?ee=dd.dtype:"constant"in nd?(ne=2,"number"===typeof nd.constant?(ae=nd.constant,pe=Yd=de=0):(ae=0<nd.constant.length?nd.constant[0]:0,pe=1<nd.constant.length?nd.constant[1]:0,Yd=2<nd.constant.length?
nd.constant[2]:0,de=3<nd.constant.length?nd.constant[3]:0)):(dd=v(nd.buffer)?Y.createStream(34962,nd.buffer):Y.getBuffer(nd.buffer),ee="type"in nd?Xd[nd.type]:dd.dtype,Ad=!!nd.normalized,Xe=nd.size|0,Bd=nd.offset|0,Ue=nd.stride|0,kd=nd.divisor|0);ie=ka.location;yc=vc[ie];if(1===ne){yc.buffer||E.enableVertexAttribArray(ie);Wc=Xe||1;if(yc.type!==ee||yc.size!==Wc||yc.buffer!==dd||yc.normalized!==Ad||yc.offset!==Bd||yc.stride!==Ue)E.bindBuffer(34962,dd.buffer),E.vertexAttribPointer(ie,Wc,ee,Ad,Ue,Bd),
yc.type=ee,yc.size=Wc,yc.buffer=dd,yc.normalized=Ad,yc.offset=Bd,yc.stride=Ue;yc.divisor!==kd&&(L.vertexAttribDivisorANGLE(ie,kd),yc.divisor=kd)}else if(yc.buffer&&(E.disableVertexAttribArray(ie),yc.buffer=null),yc.x!==ae||yc.y!==pe||yc.z!==Yd||yc.w!==de)E.vertexAttrib4f(ie,ae,pe,Yd,de),yc.x=ae,yc.y=pe,yc.z=Yd,yc.w=de;E.uniform1i(u.location,!1);E.uniform1f(fc.location,J.pixelRatio);qe=F.call(this,J,b,0);E.uniform2f(za.location,qe[0],qe[1]);le=b.scale;E.uniform2f(Ga.location,le[0],le[1]);Ed=b.scaleFract;
E.uniform2f(U.location,Ed[0],Ed[1]);Kd=b.translate;E.uniform2f(da.location,Kd[0],Kd[1]);Md=b.translateFract;E.uniform2f(ra.location,Md[0],Md[1]);E.uniform1f(ca.location,b.opacity);E.uniform1i(Na.location,r.bind());Nd=b.elements;je=null;(je=(Ee=v(Nd))?sb.createStream(Nd):sb.getElements(Nd))&&E.bindBuffer(34963,je.buffer.buffer);we=b.offset;if(oe=b.count)Hf=Ca.instances,0<Hf?je?L.drawElementsInstancedANGLE(0,oe,je.type,we<<(je.type-5121>>1),Hf):L.drawArraysInstancedANGLE(0,we,oe,Hf):0>Hf&&(je?E.drawElements(0,
oe,je.type,we<<(je.type-5121>>1)):E.drawArrays(0,we,oe)),ja.dirty=!0,ga.setVAO(null),J.viewportWidth=n,J.viewportHeight=A,H&&(y.cpuTime+=performance.now()-Q),R&&Y.destroyStream(N),Qa&&Y.destroyStream(Wa),tb&&Y.destroyStream(gb),Aa&&Y.destroyStream(db),gc&&Y.destroyStream(Da),ub&&Y.destroyStream(Cb),wb&&Y.destroyStream(Nb),Uc&&Y.destroyStream(ic),jd&&Y.destroyStream(dd),r.unbind(),Ee&&sb.destroyStream(je)},scope:function(a,c,f){var k,l,p,q,t,x,u,r,w,I,G,E,K,F,L,C,N,O,S,ba,T,U,W,ga,X,la,ia,ca,da,oa,
ka,ma,na,wa,ua,ra,za,Ga,Ka,Na,Qa,xb,Za,vc,Hb,Ra,rb,Ma,mb,tb,gb,Oa,zb,Ib,lc,cb,sd,Xb,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Rb,Jb,Lb,Vb,xa,Yb,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,dc,tc,Va,Mb,fc,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,qc,sc,Qc,Mc,be,Zc,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd,Id,Ic,Yc,zd,fe,se,te,Td,Fd,Dd,hd,Ec,nd,jd,dd,kd,Ad,Bd,Ae,ne,Ke,ee,de,ae,pe,Yd,ie,yc,Wc,qe,le,Ed,Kd,Md,Nd,je,Ee,we,oe,Ve,Oe,Le,re,Be,Fe,Ge,He,Ce,Gd,Qd,Wd,Zd,Ie,yd,Od,ye,Je,ff,Ye,
Pe,Me,We,Te,Qe,Re,Pd,Ud,Se,gf,lf,cf,hf,jf,kf,pf,mf,qf,Af,Bf,Ne,ze,nf,of,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Kf,Lf,Mf,rf,Rf,Gf,sf,dg,Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;k=a.viewport;l=k.x|0;p=k.y|0;q="width"in k?k.width|0:J.framebufferWidth-l;t="height"in k?k.height|0:J.framebufferHeight-p;x=J.viewportWidth;J.viewportWidth=q;u=J.viewportHeight;J.viewportHeight=t;r=Jd[0];
Jd[0]=l;w=Jd[1];Jd[1]=p;I=Jd[2];Jd[2]=q;G=Jd[3];Jd[3]=t;E=qa[0];qa[0]=0;K=qa[1];qa[1]=0;F=qa[2];qa[2]=0;L=qa[3];qa[3]=1;C=ha.blend_enable;ha.blend_enable=!0;N=R[0];R[0]=770;O=R[1];R[1]=771;S=R[2];R[2]=773;ba=R[3];R[3]=1;T=ha.depth_enable;ha.depth_enable=!1;U=a.viewport;W=U.x|0;ga=U.y|0;X="width"in U?U.width|0:J.framebufferWidth-W;la="height"in U?U.height|0:J.framebufferHeight-ga;ia=me[0];me[0]=W;ca=me[1];me[1]=ga;da=me[2];me[2]=X;oa=me[3];me[3]=la;ka=ha.scissor_enable;ha.scissor_enable=!0;ma=ha.stencil_enable;
ha.stencil_enable=!1;if(na=ja.profile)wa=performance.now(),y.count++;ua=a.elements;ra=null;ra=(za=v(ua))?sb.createStream(ua):sb.getElements(ua);Ga=Ca.elements;Ca.elements=ra;Ka=a.offset;Na=Ca.offset;Ca.offset=Ka;Qa=a.count;xb=Ca.count;Ca.count=Qa;Za=Ca.primitive;Ca.primitive=0;vc=V[45];V[45]=!1;Hb=a.markerTexture;Ra=V[48];V[48]=Hb;rb=a.opacity;Ma=V[10];V[10]=rb;mb=D.call(this,J,a,f);tb=V[46];V[46]=mb;gb=V[47];V[47]=z;Oa=J.pixelRatio;zb=V[34];V[34]=Oa;Ib=a.scale;lc=V[6];V[6]=Ib;cb=a.scaleFract;sd=
V[7];V[7]=cb;Xb=a.translate;ec=V[8];V[8]=Xb;ib=a.translateFract;jb=V[9];V[9]=ib;sa=B.call(this,J,a,f);nb=!1;va=null;Ua=0;ab=!1;db=Aa=0;Ha=1;Bb=0;yb=5126;Lb=Jb=Rb=Sa=0;v(sa)?(nb=!0,va=Y.createStream(34962,sa),yb=va.dtype):(va=Y.getBuffer(sa))?yb=va.dtype:"constant"in sa?(Ha=2,"number"===typeof sa.constant?(Rb=sa.constant,Jb=Lb=Sa=0):(Rb=0<sa.constant.length?sa.constant[0]:0,Jb=1<sa.constant.length?sa.constant[1]:0,Lb=2<sa.constant.length?sa.constant[2]:0,Sa=3<sa.constant.length?sa.constant[3]:0)):
(va=v(sa.buffer)?Y.createStream(34962,sa.buffer):Y.getBuffer(sa.buffer),yb="type"in sa?Xd[sa.type]:va.dtype,ab=!!sa.normalized,db=sa.size|0,Aa=sa.offset|0,Bb=sa.stride|0,Ua=sa.divisor|0);Vb=H.buffer;H.buffer=va;xa=H.divisor;H.divisor=Ua;Yb=H.normalized;H.normalized=ab;Ja=H.offset;H.offset=Aa;Ob=H.size;H.size=db;eb=H.state;H.state=Ha;hb=H.stride;H.stride=Bb;ya=H.type;H.type=yb;gc=H.w;H.w=Sa;Da=H.x;H.x=Rb;ob=H.y;H.y=Jb;pb=H.z;H.z=Lb;Xa=m.call(this,J,a,f);Ya=!1;nc=null;dc=0;tc=!1;Mb=Va=0;fc=1;Ea=0;xc=
5126;ub=kb=Ba=Pa=0;v(Xa)?(Ya=!0,nc=Y.createStream(34962,Xa),xc=nc.dtype):(nc=Y.getBuffer(Xa))?xc=nc.dtype:"constant"in Xa?(fc=2,"number"===typeof Xa.constant?(Ba=Xa.constant,kb=ub=Pa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,kb=1<Xa.constant.length?Xa.constant[1]:0,ub=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=v(Xa.buffer)?Y.createStream(34962,Xa.buffer):Y.getBuffer(Xa.buffer),xc="type"in Xa?Xd[Xa.type]:nc.dtype,tc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|
0,Ea=Xa.stride|0,dc=Xa.divisor|0);Cb=Q.buffer;Q.buffer=nc;qb=Q.divisor;Q.divisor=dc;uc=Q.normalized;Q.normalized=tc;vb=Q.offset;Q.offset=Va;qc=Q.size;Q.size=Mb;sc=Q.state;Q.state=fc;Qc=Q.stride;Q.stride=Ea;Mc=Q.type;Q.type=xc;be=Q.w;Q.w=Pa;Zc=Q.x;Q.x=Ba;Wb=Q.y;Q.y=kb;cc=Q.z;Q.z=ub;Pb=aa.call(this,J,a,f);Fa=!1;$b=null;lb=0;wb=!1;Qb=Nb=0;hc=1;jc=0;Sc=5126;Nc=Dc=Cc=Bc=0;v(Pb)?(Fa=!0,$b=Y.createStream(34962,Pb),Sc=$b.dtype):($b=Y.getBuffer(Pb))?Sc=$b.dtype:"constant"in Pb?(hc=2,"number"===typeof Pb.constant?
(Cc=Pb.constant,Dc=Nc=Bc=0):(Cc=0<Pb.constant.length?Pb.constant[0]:0,Dc=1<Pb.constant.length?Pb.constant[1]:0,Nc=2<Pb.constant.length?Pb.constant[2]:0,Bc=3<Pb.constant.length?Pb.constant[3]:0)):($b=v(Pb.buffer)?Y.createStream(34962,Pb.buffer):Y.getBuffer(Pb.buffer),Sc="type"in Pb?Xd[Pb.type]:$b.dtype,wb=!!Pb.normalized,Qb=Pb.size|0,Nb=Pb.offset|0,jc=Pb.stride|0,lb=Pb.divisor|0);cd=h.buffer;h.buffer=$b;Tc=h.divisor;h.divisor=lb;Oc=h.normalized;h.normalized=wb;Kb=h.offset;h.offset=Nb;Fb=h.size;h.size=
Qb;Pc=h.state;h.state=hc;Hc=h.stride;h.stride=jc;Uc=h.type;h.type=Sc;ic=h.w;h.w=Bc;Xc=h.x;h.x=Cc;fd=h.y;h.y=Dc;Id=h.z;h.z=Nc;Ic=g.call(this,J,a,f);Yc=!1;zd=null;fe=0;se=!1;Td=te=0;Fd=1;Dd=0;hd=5126;dd=jd=nd=Ec=0;v(Ic)?(Yc=!0,zd=Y.createStream(34962,Ic),hd=zd.dtype):(zd=Y.getBuffer(Ic))?hd=zd.dtype:"constant"in Ic?(Fd=2,"number"===typeof Ic.constant?(nd=Ic.constant,jd=dd=Ec=0):(nd=0<Ic.constant.length?Ic.constant[0]:0,jd=1<Ic.constant.length?Ic.constant[1]:0,dd=2<Ic.constant.length?Ic.constant[2]:
0,Ec=3<Ic.constant.length?Ic.constant[3]:0)):(zd=v(Ic.buffer)?Y.createStream(34962,Ic.buffer):Y.getBuffer(Ic.buffer),hd="type"in Ic?Xd[Ic.type]:zd.dtype,se=!!Ic.normalized,Td=Ic.size|0,te=Ic.offset|0,Dd=Ic.stride|0,fe=Ic.divisor|0);kd=d.buffer;d.buffer=zd;Ad=d.divisor;d.divisor=fe;Bd=d.normalized;d.normalized=se;Ae=d.offset;d.offset=te;ne=d.size;d.size=Td;Ke=d.state;d.state=Fd;ee=d.stride;d.stride=Dd;de=d.type;d.type=hd;ae=d.w;d.w=Ec;pe=d.x;d.x=nd;Yd=d.y;d.y=jd;ie=d.z;d.z=dd;yc=A.call(this,J,a,f);
Wc=!1;qe=null;le=0;Ed=!1;Md=Kd=0;Nd=1;je=0;Ee=5126;Oe=Ve=oe=we=0;v(yc)?(Wc=!0,qe=Y.createStream(34962,yc),Ee=qe.dtype):(qe=Y.getBuffer(yc))?Ee=qe.dtype:"constant"in yc?(Nd=2,"number"===typeof yc.constant?(oe=yc.constant,Ve=Oe=we=0):(oe=0<yc.constant.length?yc.constant[0]:0,Ve=1<yc.constant.length?yc.constant[1]:0,Oe=2<yc.constant.length?yc.constant[2]:0,we=3<yc.constant.length?yc.constant[3]:0)):(qe=v(yc.buffer)?Y.createStream(34962,yc.buffer):Y.getBuffer(yc.buffer),Ee="type"in yc?Xd[yc.type]:qe.dtype,
Ed=!!yc.normalized,Md=yc.size|0,Kd=yc.offset|0,je=yc.stride|0,le=yc.divisor|0);Le=P.buffer;P.buffer=qe;re=P.divisor;P.divisor=le;Be=P.normalized;P.normalized=Ed;Fe=P.offset;P.offset=Kd;Ge=P.size;P.size=Md;He=P.state;P.state=Nd;Ce=P.stride;P.stride=je;Gd=P.type;P.type=Ee;Qd=P.w;P.w=we;Wd=P.x;P.x=oe;Zd=P.y;P.y=Ve;Ie=P.z;P.z=Oe;yd=ea.call(this,J,a,f);Od=!1;ye=null;Je=0;ff=!1;Pe=Ye=0;Me=1;We=0;Te=5126;Ud=Pd=Re=Qe=0;v(yd)?(Od=!0,ye=Y.createStream(34962,yd),Te=ye.dtype):(ye=Y.getBuffer(yd))?Te=ye.dtype:
"constant"in yd?(Me=2,"number"===typeof yd.constant?(Re=yd.constant,Pd=Ud=Qe=0):(Re=0<yd.constant.length?yd.constant[0]:0,Pd=1<yd.constant.length?yd.constant[1]:0,Ud=2<yd.constant.length?yd.constant[2]:0,Qe=3<yd.constant.length?yd.constant[3]:0)):(ye=v(yd.buffer)?Y.createStream(34962,yd.buffer):Y.getBuffer(yd.buffer),Te="type"in yd?Xd[yd.type]:ye.dtype,ff=!!yd.normalized,Pe=yd.size|0,Ye=yd.offset|0,We=yd.stride|0,Je=yd.divisor|0);Se=n.buffer;n.buffer=ye;gf=n.divisor;n.divisor=Je;lf=n.normalized;n.normalized=
ff;cf=n.offset;n.offset=Ye;hf=n.size;n.size=Pe;jf=n.state;n.state=Me;kf=n.stride;n.stride=We;pf=n.type;n.type=Te;mf=n.w;n.w=Qe;qf=n.x;n.x=Re;Af=n.y;n.y=Pd;Bf=n.z;n.z=Ud;Ne=pa.call(this,J,a,f);ze=!1;nf=null;of=0;Cf=!1;zf=Ff=0;Df=1;Ef=0;uf=5126;xf=wf=tf=vf=0;v(Ne)?(ze=!0,nf=Y.createStream(34962,Ne),uf=nf.dtype):(nf=Y.getBuffer(Ne))?uf=nf.dtype:"constant"in Ne?(Df=2,"number"===typeof Ne.constant?(tf=Ne.constant,wf=xf=vf=0):(tf=0<Ne.constant.length?Ne.constant[0]:0,wf=1<Ne.constant.length?Ne.constant[1]:
0,xf=2<Ne.constant.length?Ne.constant[2]:0,vf=3<Ne.constant.length?Ne.constant[3]:0)):(nf=v(Ne.buffer)?Y.createStream(34962,Ne.buffer):Y.getBuffer(Ne.buffer),uf="type"in Ne?Xd[Ne.type]:nf.dtype,Cf=!!Ne.normalized,zf=Ne.size|0,Ff=Ne.offset|0,Ef=Ne.stride|0,of=Ne.divisor|0);If=M.buffer;M.buffer=nf;Kf=M.divisor;M.divisor=of;Lf=M.normalized;M.normalized=Cf;Mf=M.offset;M.offset=Ff;rf=M.size;M.size=zf;Rf=M.state;M.state=Df;Gf=M.stride;M.stride=Ef;sf=M.type;M.type=uf;dg=M.w;M.w=vf;Sf=M.x;M.x=tf;Tf=M.y;M.y=
wf;qg=M.z;M.z=xf;df=fa.call(this,J,a,f);$e=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;v(df)?($e=!0,Nf=Y.createStream(34962,df),Wf=Nf.dtype):(Nf=Y.getBuffer(df))?Wf=Nf.dtype:"constant"in df?(hg=2,"number"===typeof df.constant?(Xf=df.constant,Yf=Zf=Uf=0):(Xf=0<df.constant.length?df.constant[0]:0,Yf=1<df.constant.length?df.constant[1]:0,Zf=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Nf=v(df.buffer)?Y.createStream(34962,df.buffer):Y.getBuffer(df.buffer),
Wf="type"in df?Xd[df.type]:Nf.dtype,eg=!!df.normalized,gg=df.size|0,fg=df.offset|0,ig=df.stride|0,Of=df.divisor|0);jg=b.buffer;b.buffer=Nf;rg=b.divisor;b.divisor=Of;sg=b.normalized;b.normalized=eg;tg=b.offset;b.offset=fg;ug=b.size;b.size=gg;vg=b.state;b.state=hg;wg=b.stride;b.stride=ig;xg=b.type;b.type=Wf;yg=b.w;b.w=Uf;zg=b.x;b.x=Xf;Ag=b.y;b.y=Yf;Bg=b.z;b.z=Zf;ef=e.call(this,J,a,f);af=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;v(ef)?(af=!0,Pf=Y.createStream(34962,ef),$f=Pf.dtype):
(Pf=Y.getBuffer(ef))?$f=Pf.dtype:"constant"in ef?(ng=2,"number"===typeof ef.constant?(ag=ef.constant,bg=cg=Vf=0):(ag=0<ef.constant.length?ef.constant[0]:0,bg=1<ef.constant.length?ef.constant[1]:0,cg=2<ef.constant.length?ef.constant[2]:0,Vf=3<ef.constant.length?ef.constant[3]:0)):(Pf=v(ef.buffer)?Y.createStream(34962,ef.buffer):Y.getBuffer(ef.buffer),$f="type"in ef?Xd[ef.type]:Pf.dtype,kg=!!ef.normalized,mg=ef.size|0,lg=ef.offset|0,og=ef.stride|0,Qf=ef.divisor|0);pg=Z.buffer;Z.buffer=Pf;Cg=Z.divisor;
Z.divisor=Qf;Dg=Z.normalized;Z.normalized=kg;Eg=Z.offset;Z.offset=lg;Fg=Z.size;Z.size=mg;Gg=Z.state;Z.state=ng;Hg=Z.stride;Z.stride=og;Ig=Z.type;Z.type=$f;Jg=Z.w;Z.w=Vf;Kg=Z.x;Z.x=ag;Lg=Z.y;Z.y=bg;Mg=Z.z;Z.z=cg;Ng=ta.vert;ta.vert=59;Og=ta.frag;ta.frag=58;ja.dirty=!0;c(J,a,f);J.viewportWidth=x;J.viewportHeight=u;Jd[0]=r;Jd[1]=w;Jd[2]=I;Jd[3]=G;qa[0]=E;qa[1]=K;qa[2]=F;qa[3]=L;ha.blend_enable=C;R[0]=N;R[1]=O;R[2]=S;R[3]=ba;ha.depth_enable=T;me[0]=ia;me[1]=ca;me[2]=da;me[3]=oa;ha.scissor_enable=ka;ha.stencil_enable=
ma;na&&(y.cpuTime+=performance.now()-wa);za&&sb.destroyStream(ra);Ca.elements=Ga;Ca.offset=Na;Ca.count=xb;Ca.primitive=Za;V[45]=vc;V[48]=Ra;V[10]=Ma;V[46]=tb;V[47]=gb;V[34]=zb;V[6]=lc;V[7]=sd;V[8]=ec;V[9]=jb;nb&&Y.destroyStream(va);H.buffer=Vb;H.divisor=xa;H.normalized=Yb;H.offset=Ja;H.size=Ob;H.state=eb;H.stride=hb;H.type=ya;H.w=gc;H.x=Da;H.y=ob;H.z=pb;Ya&&Y.destroyStream(nc);Q.buffer=Cb;Q.divisor=qb;Q.normalized=uc;Q.offset=vb;Q.size=qc;Q.state=sc;Q.stride=Qc;Q.type=Mc;Q.w=be;Q.x=Zc;Q.y=Wb;Q.z=
cc;Fa&&Y.destroyStream($b);h.buffer=cd;h.divisor=Tc;h.normalized=Oc;h.offset=Kb;h.size=Fb;h.state=Pc;h.stride=Hc;h.type=Uc;h.w=ic;h.x=Xc;h.y=fd;h.z=Id;Yc&&Y.destroyStream(zd);d.buffer=kd;d.divisor=Ad;d.normalized=Bd;d.offset=Ae;d.size=ne;d.state=Ke;d.stride=ee;d.type=de;d.w=ae;d.x=pe;d.y=Yd;d.z=ie;Wc&&Y.destroyStream(qe);P.buffer=Le;P.divisor=re;P.normalized=Be;P.offset=Fe;P.size=Ge;P.state=He;P.stride=Ce;P.type=Gd;P.w=Qd;P.x=Wd;P.y=Zd;P.z=Ie;Od&&Y.destroyStream(ye);n.buffer=Se;n.divisor=gf;n.normalized=
lf;n.offset=cf;n.size=hf;n.state=jf;n.stride=kf;n.type=pf;n.w=mf;n.x=qf;n.y=Af;n.z=Bf;ze&&Y.destroyStream(nf);M.buffer=If;M.divisor=Kf;M.normalized=Lf;M.offset=Mf;M.size=rf;M.state=Rf;M.stride=Gf;M.type=sf;M.w=dg;M.x=Sf;M.y=Tf;M.z=qg;$e&&Y.destroyStream(Nf);b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=ug;b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;af&&Y.destroyStream(Pf);Z.buffer=pg;Z.divisor=Cg;Z.normalized=Dg;Z.offset=Eg;Z.size=Fg;Z.state=Gg;Z.stride=Hg;Z.type=Ig;
Z.w=Jg;Z.x=Kg;Z.y=Lg;Z.z=Mg;ta.vert=Ng;ta.frag=Og;ja.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(k,y,q,I,f,c,x,a,w,C,W,O,F,r,D,z,B,H,m,Q,aa,h,g,d,A,P,ea,n,pa,M,fa,b,e,Z,Ka,Ra,zb,Xb,na,Qa){var X,K,L,T,ma,N,Rb,Za,S,u,ka,ca,za,Na,fc,Ga,U,rb,da,ra,Yb,dc,qc,sd,vc,Y,J,ja,Ca,sb,Qc,Zc,E,v,ha,ta,V,ga,qa,G,t;X=k.attributes;K=k.buffer;L=k.context;T=k.current;ma=k.draw;N=k.elements;Rb=k.extensions;
Za=k.framebuffer;S=k.gl;u=k.isBufferArgs;ka=k.next;ca=k.shader;za=k.uniforms;Na=k.vao;fc=ka.blend_color;Ga=T.blend_color;U=ka.blend_equation;rb=T.blend_equation;da=ka.blend_func;ra=T.blend_func;Yb=ka.colorMask;dc=T.colorMask;qc=ka.depth_range;sd=T.depth_range;vc=ka.polygonOffset_offset;Y=T.polygonOffset_offset;J=ka.sample_coverage;ja=T.sample_coverage;Ca=ka.scissor_box;sb=T.scissor_box;Qc=ka.stencil_func;Zc=T.stencil_func;E=ka.stencil_opBack;v=T.stencil_opBack;ha=ka.stencil_opFront;ta=T.stencil_opFront;
V=ka.viewport;ga=T.viewport;qa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};G={offset:4,stride:8};t={offset:0,stride:8};return{batch:function(a,c){var f,k,l,q,x,p,r,w,z,I,D,B,F;f=Za.next;f!==Za.cur&&(f?S.bindFramebuffer(36160,f.framebuffer):S.bindFramebuffer(36160,null),Za.cur=f);if(T.dirty){var C,O,V,W,la,ca,da,za,fc,yf,bf,xd,De,Rd,Sd,$d,Vd,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb;C=ka.dither;C!==T.dither&&(C?S.enable(3024):
S.disable(3024),T.dither=C);O=U[0];V=U[1];if(O!==rb[0]||V!==rb[1])S.blendEquationSeparate(O,V),rb[0]=O,rb[1]=V;W=ka.depth_func;W!==T.depth_func&&(S.depthFunc(W),T.depth_func=W);la=qc[0];ca=qc[1];if(la!==sd[0]||ca!==sd[1])S.depthRange(la,ca),sd[0]=la,sd[1]=ca;da=ka.depth_mask;da!==T.depth_mask&&(S.depthMask(da),T.depth_mask=da);za=Yb[0];fc=Yb[1];yf=Yb[2];bf=Yb[3];if(za!==dc[0]||fc!==dc[1]||yf!==dc[2]||bf!==dc[3])S.colorMask(za,fc,yf,bf),dc[0]=za,dc[1]=fc,dc[2]=yf,dc[3]=bf;xd=ka.cull_enable;xd!==T.cull_enable&&
(xd?S.enable(2884):S.disable(2884),T.cull_enable=xd);De=ka.cull_face;De!==T.cull_face&&(S.cullFace(De),T.cull_face=De);Rd=ka.frontFace;Rd!==T.frontFace&&(S.frontFace(Rd),T.frontFace=Rd);Sd=ka.lineWidth;Sd!==T.lineWidth&&(S.lineWidth(Sd),T.lineWidth=Sd);$d=ka.polygonOffset_enable;$d!==T.polygonOffset_enable&&($d?S.enable(32823):S.disable(32823),T.polygonOffset_enable=$d);Vd=vc[0];pd=vc[1];if(Vd!==Y[0]||pd!==Y[1])S.polygonOffset(Vd,pd),Y[0]=Vd,Y[1]=pd;ld=ka.sample_alpha;ld!==T.sample_alpha&&(ld?S.enable(32926):
S.disable(32926),T.sample_alpha=ld);ud=ka.sample_enable;ud!==T.sample_enable&&(ud?S.enable(32928):S.disable(32928),T.sample_enable=ud);od=J[0];gd=J[1];if(od!==ja[0]||gd!==ja[1])S.sampleCoverage(od,gd),ja[0]=od,ja[1]=gd;zc=ka.stencil_mask;zc!==T.stencil_mask&&(S.stencilMask(zc),T.stencil_mask=zc);qd=Qc[0];Rc=Qc[1];Lc=Qc[2];if(qd!==Zc[0]||Rc!==Zc[1]||Lc!==Zc[2])S.stencilFunc(qd,Rc,Lc),Zc[0]=qd,Zc[1]=Rc,Zc[2]=Lc;rc=ha[0];fb=ha[1];kc=ha[2];Db=ha[3];if(rc!==ta[0]||fb!==ta[1]||kc!==ta[2]||Db!==ta[3])S.stencilOpSeparate(rc,
fb,kc,Db),ta[0]=rc,ta[1]=fb,ta[2]=kc,ta[3]=Db;pc=E[0];Ta=E[1];Jc=E[2];bc=E[3];if(pc!==v[0]||Ta!==v[1]||Jc!==v[2]||bc!==v[3])S.stencilOpSeparate(pc,Ta,Jc,bc),v[0]=pc,v[1]=Ta,v[2]=Jc,v[3]=bc;$c=ka.scissor_enable;$c!==T.scissor_enable&&($c?S.enable(3089):S.disable(3089),T.scissor_enable=$c);Cd=Ca[0];md=Ca[1];Ac=Ca[2];Zb=Ca[3];if(Cd!==sb[0]||md!==sb[1]||Ac!==sb[2]||Zb!==sb[3])S.scissor(Cd,md,Ac,Zb),sb[0]=Cd,sb[1]=md,sb[2]=Ac,sb[3]=Zb}k=this.viewport;l=k.x|0;q=k.y|0;x="width"in k?k.width|0:L.framebufferWidth-
l;p="height"in k?k.height|0:L.framebufferHeight-q;r=L.viewportWidth;L.viewportWidth=x;w=L.viewportHeight;L.viewportHeight=p;S.viewport(l,q,x,p);ga[0]=l;ga[1]=q;ga[2]=x;ga[3]=p;S.blendColor(0,0,0,1);Ga[0]=0;Ga[1]=0;Ga[2]=0;Ga[3]=1;S.enable(3042);T.blend_enable=!0;S.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;S.disable(2929);T.depth_enable=!1;S.disable(2960);T.stencil_enable=!1;if(z=T.profile)I=performance.now(),y.count+=c;S.useProgram(H.program);D=Rb.angle_instanced_arrays;
var Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb;Na.setVAO(null);t.buffer=this.sizeBuffer;Fc=!1;ad=null;La=0;Eb=!1;ua=Wa=0;td=1;Ab=0;$a=5126;Sb=wc=bb=Gb=0;u(t)?(Fc=!0,ad=K.createStream(34962,t),$a=ad.dtype):(ad=K.getBuffer(t))?$a=ad.dtype:"constant"in t?(td=2,"number"===typeof t.constant?(bb=t.constant,wc=Sb=Gb=0):(bb=0<t.constant.length?
t.constant[0]:0,wc=1<t.constant.length?t.constant[1]:0,Sb=2<t.constant.length?t.constant[2]:0,Gb=3<t.constant.length?t.constant[3]:0)):(ad=u(t.buffer)?K.createStream(34962,t.buffer):K.getBuffer(t.buffer),$a="type"in t?qa[t.type]:ad.dtype,Eb=!!t.normalized,ua=t.size|0,Wa=t.offset|0,Ab=t.stride|0,La=t.divisor|0);ge=Qa.location;ac=X[ge];if(1===td){ac.buffer||S.enableVertexAttribArray(ge);Tb=ua||1;if(ac.type!==$a||ac.size!==Tb||ac.buffer!==ad||ac.normalized!==Eb||ac.offset!==Wa||ac.stride!==Ab)S.bindBuffer(34962,
ad.buffer),S.vertexAttribPointer(ge,Tb,$a,Eb,Ab,Wa),ac.type=$a,ac.size=Tb,ac.buffer=ad,ac.normalized=Eb,ac.offset=Wa,ac.stride=Ab;ac.divisor!==La&&(D.vertexAttribDivisorANGLE(ge,La),ac.divisor=La)}else if(ac.buffer&&(S.disableVertexAttribArray(ge),ac.buffer=null),ac.x!==bb||ac.y!==wc||ac.z!==Sb||ac.w!==Gb)S.vertexAttrib4f(ge,bb,wc,Sb,Gb),ac.x=bb,ac.y=wc,ac.z=Sb,ac.w=Gb;G.buffer=this.sizeBuffer;rd=!1;Ub=null;Ma=0;mb=!1;gb=tb=0;Oa=1;oc=0;Ib=5126;Gc=mc=cb=Vc=0;u(G)?(rd=!0,Ub=K.createStream(34962,G),
Ib=Ub.dtype):(Ub=K.getBuffer(G))?Ib=Ub.dtype:"constant"in G?(Oa=2,"number"===typeof G.constant?(cb=G.constant,mc=Gc=Vc=0):(cb=0<G.constant.length?G.constant[0]:0,mc=1<G.constant.length?G.constant[1]:0,Gc=2<G.constant.length?G.constant[2]:0,Vc=3<G.constant.length?G.constant[3]:0)):(Ub=u(G.buffer)?K.createStream(34962,G.buffer):K.getBuffer(G.buffer),Ib="type"in G?qa[G.type]:Ub.dtype,mb=!!G.normalized,gb=G.size|0,tb=G.offset|0,oc=G.stride|0,Ma=G.divisor|0);ec=M.location;ib=X[ec];if(1===Oa){ib.buffer||
S.enableVertexAttribArray(ec);jb=gb||1;if(ib.type!==Ib||ib.size!==jb||ib.buffer!==Ub||ib.normalized!==mb||ib.offset!==tb||ib.stride!==oc)S.bindBuffer(34962,Ub.buffer),S.vertexAttribPointer(ec,jb,Ib,mb,oc,tb),ib.type=Ib,ib.size=jb,ib.buffer=Ub,ib.normalized=mb,ib.offset=tb,ib.stride=oc;ib.divisor!==Ma&&(D.vertexAttribDivisorANGLE(ec,Ma),ib.divisor=Ma)}else if(ib.buffer&&(S.disableVertexAttribArray(ec),ib.buffer=null),ib.x!==cb||ib.y!==mc||ib.z!==Gc||ib.w!==Vc)S.vertexAttrib4f(ec,cb,mc,Gc,Vc),ib.x=
cb,ib.y=mc,ib.z=Gc,ib.w=Vc;sa=this.charBuffer;nb=!1;va=null;Ua=0;ab=!1;db=Aa=0;Ha=1;Bb=0;yb=5126;Lb=Jb=Kc=Sa=0;u(sa)?(nb=!0,va=K.createStream(34962,sa),yb=va.dtype):(va=K.getBuffer(sa))?yb=va.dtype:"constant"in sa?(Ha=2,"number"===typeof sa.constant?(Kc=sa.constant,Jb=Lb=Sa=0):(Kc=0<sa.constant.length?sa.constant[0]:0,Jb=1<sa.constant.length?sa.constant[1]:0,Lb=2<sa.constant.length?sa.constant[2]:0,Sa=3<sa.constant.length?sa.constant[3]:0)):(va=u(sa.buffer)?K.createStream(34962,sa.buffer):K.getBuffer(sa.buffer),
yb="type"in sa?qa[sa.type]:va.dtype,ab=!!sa.normalized,db=sa.size|0,Aa=sa.offset|0,Bb=sa.stride|0,Ua=sa.divisor|0);Vb=pa.location;xa=X[Vb];if(1===Ha){xa.buffer||S.enableVertexAttribArray(Vb);ce=db||1;if(xa.type!==yb||xa.size!==ce||xa.buffer!==va||xa.normalized!==ab||xa.offset!==Aa||xa.stride!==Bb)S.bindBuffer(34962,va.buffer),S.vertexAttribPointer(Vb,ce,yb,ab,Bb,Aa),xa.type=yb,xa.size=ce,xa.buffer=va,xa.normalized=ab,xa.offset=Aa,xa.stride=Bb;xa.divisor!==Ua&&(D.vertexAttribDivisorANGLE(Vb,Ua),xa.divisor=
Ua)}else if(xa.buffer&&(S.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Kc||xa.y!==Jb||xa.z!==Lb||xa.w!==Sa)S.vertexAttrib4f(Vb,Kc,Jb,Lb,Sa),xa.x=Kc,xa.y=Jb,xa.z=Lb,xa.w=Sa;Ja=this.position;Ob=!1;eb=null;hb=0;ya=!1;Da=gc=0;ob=1;pb=0;Xa=5126;tc=ed=nc=Ya=0;u(Ja)?(Ob=!0,eb=K.createStream(34962,Ja),Xa=eb.dtype):(eb=K.getBuffer(Ja))?Xa=eb.dtype:"constant"in Ja?(ob=2,"number"===typeof Ja.constant?(nc=Ja.constant,ed=tc=Ya=0):(nc=0<Ja.constant.length?Ja.constant[0]:0,ed=1<Ja.constant.length?Ja.constant[1]:
0,tc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(eb=u(Ja.buffer)?K.createStream(34962,Ja.buffer):K.getBuffer(Ja.buffer),Xa="type"in Ja?qa[Ja.type]:eb.dtype,ya=!!Ja.normalized,Da=Ja.size|0,gc=Ja.offset|0,pb=Ja.stride|0,hb=Ja.divisor|0);Va=Ka.location;Mb=X[Va];if(1===ob){Mb.buffer||S.enableVertexAttribArray(Va);bd=Da||2;if(Mb.type!==Xa||Mb.size!==bd||Mb.buffer!==eb||Mb.normalized!==ya||Mb.offset!==gc||Mb.stride!==pb)S.bindBuffer(34962,eb.buffer),S.vertexAttribPointer(Va,
bd,Xa,ya,pb,gc),Mb.type=Xa,Mb.size=bd,Mb.buffer=eb,Mb.normalized=ya,Mb.offset=gc,Mb.stride=pb;Mb.divisor!==hb&&(D.vertexAttribDivisorANGLE(Va,hb),Mb.divisor=hb)}else if(Mb.buffer&&(S.disableVertexAttribArray(Va),Mb.buffer=null),Mb.x!==nc||Mb.y!==ed||Mb.z!==tc||Mb.w!==Ya)S.vertexAttrib4f(Va,nc,ed,tc,Ya),Mb.x=nc,Mb.y=ed,Mb.z=tc,Mb.w=Ya;Ea=this.viewportArray;S.uniform4f(na.location,Ea[0],Ea[1],Ea[2],Ea[3]);xc=this.scale;S.uniform2f(zb.location,xc[0],xc[1]);Pa=this.translate;S.uniform2f(Xb.location,Pa[0],
Pa[1]);(Ba=ma.elements)?S.bindBuffer(34963,Ba.buffer.buffer):Na.currentVAO&&(Ba=N.getElements(Na.currentVAO.elements))&&S.bindBuffer(34963,Ba.buffer.buffer);kb=ma.instances;for(B=0;B<c;++B){F=a[B];var ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc,fd;ub=m.call(this,L,F,B);B&&Cb===ub||(Cb=ub,S.uniform1f(fa.location,ub));qb=Q.call(this,L,F,B);B&&uc===qb||(uc=qb,S.uniform1f(e.location,qb));vb=F.align;B&&vd===vb||(vd=vb,S.uniform1f(d.location,
vb));sc=F.baseline;B&&Hd===sc||(Hd=sc,S.uniform1f(n.location,sc));Mc=F.color;id=Mc[0];Wb=Mc[1];Pb=Mc[2];$b=Mc[3];B&&wd===id&&cc===Wb&&Fa===Pb&&lb===$b||(wd=id,cc=Wb,Fa=Pb,lb=$b,S.uniform4f(b.location,id,Wb,Pb,$b));wb=aa.call(this,L,F,B);Nb=wb[0];hc=wb[1];B&&Qb===Nb&&jc===hc||(Qb=Nb,jc=hc,S.uniform2f(ea.location,Nb,hc));Sc=h.call(this,L,F,B);Bc=Sc[0];Dc=Sc[1];B&&Cc===Bc&&Nc===Dc||(Cc=Bc,Nc=Dc,S.uniform2f(P.location,Bc,Dc));cd=F.positionOffset;Tc=cd[0];Kb=cd[1];B&&Oc===Tc&&Fb===Kb||(Oc=Tc,Fb=Kb,S.uniform2f(Ra.location,
Tc,Kb));Pc=F.opacity;B&&Hc===Pc||(Hc=Pc,S.uniform1f(Z.location,Pc));(Uc=g.call(this,L,F,B))&&"framebuffer"===Uc._reglType&&(Uc=Uc.color[0]);ic=Uc._texture;S.uniform1i(A.location,ic.bind());Xc=F.offset;if(fd=F.count)0<kb?Ba?D.drawElementsInstancedANGLE(0,fd,Ba.type,Xc<<(Ba.type-5121>>1),kb):D.drawArraysInstancedANGLE(0,Xc,fd,kb):0>kb&&(Ba?S.drawElements(0,fd,Ba.type,Xc<<(Ba.type-5121>>1)):S.drawArrays(0,Xc,fd)),ic.unbind()}Fc&&K.destroyStream(ad);rd&&K.destroyStream(Ub);nb&&K.destroyStream(va);Ob&&
K.destroyStream(eb);T.dirty=!0;Na.setVAO(null);L.viewportWidth=r;L.viewportHeight=w;z&&(y.cpuTime+=performance.now()-I)},draw:function(g){var h,k,m,l,r,w,p,z,B,D,F,C,H,Q,O,V,W,la,ca,aa,da,Ia,za,fc,bf,xd,De,Rd,Sd,$d,Vd,pd,ld,ud,od,gd,zc,qd,Rc,Lc,rc,fb,kc,Db,pc,Ta,Jc,bc,$c,Cd,md,Ac,Zb,Fc,ad,La,Eb,Wa,ua,td,Ab,$a,Gb,bb,wc,Sb,ge,ac,Tb,rd,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db;h=Za.next;h!==Za.cur&&(h?S.bindFramebuffer(36160,h.framebuffer):S.bindFramebuffer(36160,null),Za.cur=
h);if(T.dirty){var Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,ce,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc;Ha=ka.dither;Ha!==T.dither&&(Ha?S.enable(3024):S.disable(3024),T.dither=Ha);Bb=U[0];yb=U[1];if(Bb!==rb[0]||yb!==rb[1])S.blendEquationSeparate(Bb,yb),rb[0]=Bb,rb[1]=yb;Sa=ka.depth_func;Sa!==T.depth_func&&(S.depthFunc(Sa),T.depth_func=Sa);Kc=qc[0];Jb=qc[1];if(Kc!==sd[0]||Jb!==sd[1])S.depthRange(Kc,Jb),sd[0]=Kc,sd[1]=Jb;Lb=ka.depth_mask;Lb!==T.depth_mask&&(S.depthMask(Lb),
T.depth_mask=Lb);Vb=Yb[0];xa=Yb[1];ce=Yb[2];Ja=Yb[3];if(Vb!==dc[0]||xa!==dc[1]||ce!==dc[2]||Ja!==dc[3])S.colorMask(Vb,xa,ce,Ja),dc[0]=Vb,dc[1]=xa,dc[2]=ce,dc[3]=Ja;Ob=ka.cull_enable;Ob!==T.cull_enable&&(Ob?S.enable(2884):S.disable(2884),T.cull_enable=Ob);eb=ka.cull_face;eb!==T.cull_face&&(S.cullFace(eb),T.cull_face=eb);hb=ka.frontFace;hb!==T.frontFace&&(S.frontFace(hb),T.frontFace=hb);ya=ka.lineWidth;ya!==T.lineWidth&&(S.lineWidth(ya),T.lineWidth=ya);gc=ka.polygonOffset_enable;gc!==T.polygonOffset_enable&&
(gc?S.enable(32823):S.disable(32823),T.polygonOffset_enable=gc);Da=vc[0];ob=vc[1];if(Da!==Y[0]||ob!==Y[1])S.polygonOffset(Da,ob),Y[0]=Da,Y[1]=ob;pb=ka.sample_alpha;pb!==T.sample_alpha&&(pb?S.enable(32926):S.disable(32926),T.sample_alpha=pb);Xa=ka.sample_enable;Xa!==T.sample_enable&&(Xa?S.enable(32928):S.disable(32928),T.sample_enable=Xa);Ya=J[0];nc=J[1];if(Ya!==ja[0]||nc!==ja[1])S.sampleCoverage(Ya,nc),ja[0]=Ya,ja[1]=nc;ed=ka.stencil_mask;ed!==T.stencil_mask&&(S.stencilMask(ed),T.stencil_mask=ed);
tc=Qc[0];Va=Qc[1];Mb=Qc[2];if(tc!==Zc[0]||Va!==Zc[1]||Mb!==Zc[2])S.stencilFunc(tc,Va,Mb),Zc[0]=tc,Zc[1]=Va,Zc[2]=Mb;bd=ha[0];Ea=ha[1];xc=ha[2];Pa=ha[3];if(bd!==ta[0]||Ea!==ta[1]||xc!==ta[2]||Pa!==ta[3])S.stencilOpSeparate(bd,Ea,xc,Pa),ta[0]=bd,ta[1]=Ea,ta[2]=xc,ta[3]=Pa;Ba=E[0];kb=E[1];ub=E[2];Cb=E[3];if(Ba!==v[0]||kb!==v[1]||ub!==v[2]||Cb!==v[3])S.stencilOpSeparate(Ba,kb,ub,Cb),v[0]=Ba,v[1]=kb,v[2]=ub,v[3]=Cb;qb=ka.scissor_enable;qb!==T.scissor_enable&&(qb?S.enable(3089):S.disable(3089),T.scissor_enable=
qb);uc=Ca[0];vb=Ca[1];vd=Ca[2];sc=Ca[3];if(uc!==sb[0]||vb!==sb[1]||vd!==sb[2]||sc!==sb[3])S.scissor(uc,vb,vd,sc),sb[0]=uc,sb[1]=vb,sb[2]=vd,sb[3]=sc}k=this.viewport;m=k.x|0;l=k.y|0;r="width"in k?k.width|0:L.framebufferWidth-m;w="height"in k?k.height|0:L.framebufferHeight-l;p=L.viewportWidth;L.viewportWidth=r;z=L.viewportHeight;L.viewportHeight=w;S.viewport(m,l,r,w);ga[0]=m;ga[1]=l;ga[2]=r;ga[3]=w;S.blendColor(0,0,0,1);Ga[0]=0;Ga[1]=0;Ga[2]=0;Ga[3]=1;S.enable(3042);T.blend_enable=!0;S.blendFuncSeparate(770,
771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;S.disable(2929);T.depth_enable=!1;S.disable(2960);T.stencil_enable=!1;if(B=T.profile)D=performance.now(),y.count++;S.useProgram(q.program);F=Rb.angle_instanced_arrays;Na.setVAO(null);t.buffer=this.sizeBuffer;C=!1;H=null;Q=0;O=!1;W=V=0;la=1;ca=0;aa=5126;fc=za=Ia=da=0;u(t)?(C=!0,H=K.createStream(34962,t),aa=H.dtype):(H=K.getBuffer(t))?aa=H.dtype:"constant"in t?(la=2,"number"===typeof t.constant?(Ia=t.constant,za=fc=da=0):(Ia=0<t.constant.length?t.constant[0]:
0,za=1<t.constant.length?t.constant[1]:0,fc=2<t.constant.length?t.constant[2]:0,da=3<t.constant.length?t.constant[3]:0)):(H=u(t.buffer)?K.createStream(34962,t.buffer):K.getBuffer(t.buffer),aa="type"in t?qa[t.type]:H.dtype,O=!!t.normalized,W=t.size|0,V=t.offset|0,ca=t.stride|0,Q=t.divisor|0);bf=Qa.location;xd=X[bf];if(1===la){xd.buffer||S.enableVertexAttribArray(bf);De=W||1;if(xd.type!==aa||xd.size!==De||xd.buffer!==H||xd.normalized!==O||xd.offset!==V||xd.stride!==ca)S.bindBuffer(34962,H.buffer),S.vertexAttribPointer(bf,
De,aa,O,ca,V),xd.type=aa,xd.size=De,xd.buffer=H,xd.normalized=O,xd.offset=V,xd.stride=ca;xd.divisor!==Q&&(F.vertexAttribDivisorANGLE(bf,Q),xd.divisor=Q)}else if(xd.buffer&&(S.disableVertexAttribArray(bf),xd.buffer=null),xd.x!==Ia||xd.y!==za||xd.z!==fc||xd.w!==da)S.vertexAttrib4f(bf,Ia,za,fc,da),xd.x=Ia,xd.y=za,xd.z=fc,xd.w=da;G.buffer=this.sizeBuffer;Rd=!1;Sd=null;$d=0;Vd=!1;ld=pd=0;ud=1;od=0;gd=5126;Lc=Rc=qd=zc=0;u(G)?(Rd=!0,Sd=K.createStream(34962,G),gd=Sd.dtype):(Sd=K.getBuffer(G))?gd=Sd.dtype:
"constant"in G?(ud=2,"number"===typeof G.constant?(qd=G.constant,Rc=Lc=zc=0):(qd=0<G.constant.length?G.constant[0]:0,Rc=1<G.constant.length?G.constant[1]:0,Lc=2<G.constant.length?G.constant[2]:0,zc=3<G.constant.length?G.constant[3]:0)):(Sd=u(G.buffer)?K.createStream(34962,G.buffer):K.getBuffer(G.buffer),gd="type"in G?qa[G.type]:Sd.dtype,Vd=!!G.normalized,ld=G.size|0,pd=G.offset|0,od=G.stride|0,$d=G.divisor|0);rc=M.location;fb=X[rc];if(1===ud){fb.buffer||S.enableVertexAttribArray(rc);kc=ld||1;if(fb.type!==
gd||fb.size!==kc||fb.buffer!==Sd||fb.normalized!==Vd||fb.offset!==pd||fb.stride!==od)S.bindBuffer(34962,Sd.buffer),S.vertexAttribPointer(rc,kc,gd,Vd,od,pd),fb.type=gd,fb.size=kc,fb.buffer=Sd,fb.normalized=Vd,fb.offset=pd,fb.stride=od;fb.divisor!==$d&&(F.vertexAttribDivisorANGLE(rc,$d),fb.divisor=$d)}else if(fb.buffer&&(S.disableVertexAttribArray(rc),fb.buffer=null),fb.x!==qd||fb.y!==Rc||fb.z!==Lc||fb.w!==zc)S.vertexAttrib4f(rc,qd,Rc,Lc,zc),fb.x=qd,fb.y=Rc,fb.z=Lc,fb.w=zc;Db=this.charBuffer;pc=!1;
Ta=null;Jc=0;bc=!1;Cd=$c=0;md=1;Ac=0;Zb=5126;Eb=La=ad=Fc=0;u(Db)?(pc=!0,Ta=K.createStream(34962,Db),Zb=Ta.dtype):(Ta=K.getBuffer(Db))?Zb=Ta.dtype:"constant"in Db?(md=2,"number"===typeof Db.constant?(ad=Db.constant,La=Eb=Fc=0):(ad=0<Db.constant.length?Db.constant[0]:0,La=1<Db.constant.length?Db.constant[1]:0,Eb=2<Db.constant.length?Db.constant[2]:0,Fc=3<Db.constant.length?Db.constant[3]:0)):(Ta=u(Db.buffer)?K.createStream(34962,Db.buffer):K.getBuffer(Db.buffer),Zb="type"in Db?qa[Db.type]:Ta.dtype,
bc=!!Db.normalized,Cd=Db.size|0,$c=Db.offset|0,Ac=Db.stride|0,Jc=Db.divisor|0);Wa=pa.location;ua=X[Wa];if(1===md){ua.buffer||S.enableVertexAttribArray(Wa);td=Cd||1;if(ua.type!==Zb||ua.size!==td||ua.buffer!==Ta||ua.normalized!==bc||ua.offset!==$c||ua.stride!==Ac)S.bindBuffer(34962,Ta.buffer),S.vertexAttribPointer(Wa,td,Zb,bc,Ac,$c),ua.type=Zb,ua.size=td,ua.buffer=Ta,ua.normalized=bc,ua.offset=$c,ua.stride=Ac;ua.divisor!==Jc&&(F.vertexAttribDivisorANGLE(Wa,Jc),ua.divisor=Jc)}else if(ua.buffer&&(S.disableVertexAttribArray(Wa),
ua.buffer=null),ua.x!==ad||ua.y!==La||ua.z!==Eb||ua.w!==Fc)S.vertexAttrib4f(Wa,ad,La,Eb,Fc),ua.x=ad,ua.y=La,ua.z=Eb,ua.w=Fc;Ab=this.position;$a=!1;Gb=null;bb=0;wc=!1;ge=Sb=0;ac=1;Tb=0;rd=5126;tb=mb=Ma=Ub=0;u(Ab)?($a=!0,Gb=K.createStream(34962,Ab),rd=Gb.dtype):(Gb=K.getBuffer(Ab))?rd=Gb.dtype:"constant"in Ab?(ac=2,"number"===typeof Ab.constant?(Ma=Ab.constant,mb=tb=Ub=0):(Ma=0<Ab.constant.length?Ab.constant[0]:0,mb=1<Ab.constant.length?Ab.constant[1]:0,tb=2<Ab.constant.length?Ab.constant[2]:0,Ub=3<
Ab.constant.length?Ab.constant[3]:0)):(Gb=u(Ab.buffer)?K.createStream(34962,Ab.buffer):K.getBuffer(Ab.buffer),rd="type"in Ab?qa[Ab.type]:Gb.dtype,wc=!!Ab.normalized,ge=Ab.size|0,Sb=Ab.offset|0,Tb=Ab.stride|0,bb=Ab.divisor|0);gb=Ka.location;Oa=X[gb];if(1===ac){Oa.buffer||S.enableVertexAttribArray(gb);oc=ge||2;if(Oa.type!==rd||Oa.size!==oc||Oa.buffer!==Gb||Oa.normalized!==wc||Oa.offset!==Sb||Oa.stride!==Tb)S.bindBuffer(34962,Gb.buffer),S.vertexAttribPointer(gb,oc,rd,wc,Tb,Sb),Oa.type=rd,Oa.size=oc,
Oa.buffer=Gb,Oa.normalized=wc,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==bb&&(F.vertexAttribDivisorANGLE(gb,bb),Oa.divisor=bb)}else if(Oa.buffer&&(S.disableVertexAttribArray(gb),Oa.buffer=null),Oa.x!==Ma||Oa.y!==mb||Oa.z!==tb||Oa.w!==Ub)S.vertexAttrib4f(gb,Ma,mb,tb,Ub),Oa.x=Ma,Oa.y=mb,Oa.z=tb,Oa.w=Ub;Ib=I.call(this,L,g,0);S.uniform1f(fa.location,Ib);Vc=f.call(this,L,g,0);S.uniform1f(e.location,Vc);S.uniform1f(d.location,g.align);S.uniform1f(n.location,g.baseline);cb=this.viewportArray;S.uniform4f(na.location,
cb[0],cb[1],cb[2],cb[3]);mc=g.color;S.uniform4f(b.location,mc[0],mc[1],mc[2],mc[3]);Gc=c.call(this,L,g,0);S.uniform2f(ea.location,Gc[0],Gc[1]);ec=x.call(this,L,g,0);S.uniform2f(P.location,ec[0],ec[1]);ib=this.scale;S.uniform2f(zb.location,ib[0],ib[1]);jb=this.translate;S.uniform2f(Xb.location,jb[0],jb[1]);sa=g.positionOffset;S.uniform2f(Ra.location,sa[0],sa[1]);S.uniform1f(Z.location,g.opacity);(nb=a.call(this,L,g,0))&&"framebuffer"===nb._reglType&&(nb=nb.color[0]);va=nb._texture;S.uniform1i(A.location,
va.bind());(Ua=ma.elements)?S.bindBuffer(34963,Ua.buffer.buffer):Na.currentVAO&&(Ua=N.getElements(Na.currentVAO.elements))&&S.bindBuffer(34963,Ua.buffer.buffer);ab=g.offset;if(Aa=g.count)db=ma.instances,0<db?Ua?F.drawElementsInstancedANGLE(0,Aa,Ua.type,ab<<(Ua.type-5121>>1),db):F.drawArraysInstancedANGLE(0,ab,Aa,db):0>db&&(Ua?S.drawElements(0,Aa,Ua.type,ab<<(Ua.type-5121>>1)):S.drawArrays(0,ab,Aa)),T.dirty=!0,Na.setVAO(null),L.viewportWidth=p,L.viewportHeight=z,B&&(y.cpuTime+=performance.now()-D),
C&&K.destroyStream(H),Rd&&K.destroyStream(Sd),pc&&K.destroyStream(Ta),$a&&K.destroyStream(Gb),va.unbind()},scope:function(b,a,c){var d,e,g,h,f,k,m,n,q,x,v,A,I,E,J,M,H,P,Q,N,Y,S,ea,U,Z,ga,X,fa,aa,ha,ja,Ia,pa,ta,na,ra,Ca,Ga,Ka,Na,Qa,Ra,Za,Ta,vc,sb,rb,zb,sd,Rb,Zb,Xb,Yb,La,Eb,Wa,ua,dc,Ab,$a,Gb,bb,wc,Sb,qc,ac,Tb,Qc,Ub,Ma,mb,tb,gb,Oa,oc,Ib,Vc,cb,mc,Gc,ec,ib,jb,sa,nb,va,Ua,ab,Aa,db,Ha,Bb,yb,Sa,Kc,Jb,Lb,Vb,xa,Zc,Ja,Ob,eb,hb,ya,gc,Da,ob,pb,Xa,Ya,nc,ed,tc,Va,Mb,bd,Ea,xc,Pa,Ba,kb,ub,Cb,qb,uc,vb,vd,sc,Hd,Mc,
id,wd,Wb,cc,Pb,Fa,$b,lb,wb,Nb,Qb,hc,jc,Sc,Bc,Cc,Dc,Nc,cd,Tc,Oc,Kb,Fb,Pc,Hc,Uc,ic,Xc;d=this.viewport;e=d.x|0;g=d.y|0;h="width"in d?d.width|0:L.framebufferWidth-e;f="height"in d?d.height|0:L.framebufferHeight-g;k=L.viewportWidth;L.viewportWidth=h;m=L.viewportHeight;L.viewportHeight=f;n=V[0];V[0]=e;q=V[1];V[1]=g;x=V[2];V[2]=h;v=V[3];V[3]=f;A=fc[0];fc[0]=0;I=fc[1];fc[1]=0;E=fc[2];fc[2]=0;J=fc[3];fc[3]=1;M=ka.blend_enable;ka.blend_enable=!0;H=da[0];da[0]=770;P=da[1];da[1]=771;Q=da[2];da[2]=773;N=da[3];
da[3]=1;Y=ka.depth_enable;ka.depth_enable=!1;S=ka.stencil_enable;ka.stencil_enable=!1;if(ea=T.profile)U=performance.now(),y.count++;Z=b.offset;ga=ma.offset;ma.offset=Z;X=b.count;fa=ma.count;ma.count=X;aa=ma.primitive;ma.primitive=0;ha=b.align;ja=za[64];za[64]=ha;Ia=w.call(this,L,b,c);pa=za[69];za[69]=Ia;ta=C.call(this,L,b,c);na=za[67];za[67]=ta;ra=W.call(this,L,b,c);Ca=za[66];za[66]=ra;Ga=b.baseline;Ka=za[65];za[65]=Ga;Na=O.call(this,L,b,c);Qa=za[62];za[62]=Na;Ra=b.color;Za=za[14];za[14]=Ra;Ta=F.call(this,
L,b,c);vc=za[63];za[63]=Ta;sb=b.opacity;rb=za[10];za[10]=sb;zb=b.positionOffset;sd=za[68];za[68]=zb;Rb=this.scale;Zb=za[6];za[6]=Rb;Xb=this.translate;Yb=za[8];za[8]=Xb;La=this.viewportArray;Eb=za[3];za[3]=La;Wa=this.charBuffer;ua=!1;dc=null;Ab=0;$a=!1;bb=Gb=0;wc=1;Sb=0;qc=5126;Ub=Qc=Tb=ac=0;u(Wa)?(ua=!0,dc=K.createStream(34962,Wa),qc=dc.dtype):(dc=K.getBuffer(Wa))?qc=dc.dtype:"constant"in Wa?(wc=2,"number"===typeof Wa.constant?(Tb=Wa.constant,Qc=Ub=ac=0):(Tb=0<Wa.constant.length?Wa.constant[0]:0,
Qc=1<Wa.constant.length?Wa.constant[1]:0,Ub=2<Wa.constant.length?Wa.constant[2]:0,ac=3<Wa.constant.length?Wa.constant[3]:0)):(dc=u(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),qc="type"in Wa?qa[Wa.type]:dc.dtype,$a=!!Wa.normalized,bb=Wa.size|0,Gb=Wa.offset|0,Sb=Wa.stride|0,Ab=Wa.divisor|0);Ma=r.buffer;r.buffer=dc;mb=r.divisor;r.divisor=Ab;tb=r.normalized;r.normalized=$a;gb=r.offset;r.offset=Gb;Oa=r.size;r.size=bb;oc=r.state;r.state=wc;Ib=r.stride;r.stride=Sb;Vc=r.type;r.type=
qc;cb=r.w;r.w=ac;mc=r.x;r.x=Tb;Gc=r.y;r.y=Qc;ec=r.z;r.z=Ub;G.buffer=this.sizeBuffer;ib=!1;jb=null;sa=0;nb=!1;Ua=va=0;ab=1;Aa=0;db=5126;Sa=yb=Bb=Ha=0;u(G)?(ib=!0,jb=K.createStream(34962,G),db=jb.dtype):(jb=K.getBuffer(G))?db=jb.dtype:"constant"in G?(ab=2,"number"===typeof G.constant?(Bb=G.constant,yb=Sa=Ha=0):(Bb=0<G.constant.length?G.constant[0]:0,yb=1<G.constant.length?G.constant[1]:0,Sa=2<G.constant.length?G.constant[2]:0,Ha=3<G.constant.length?G.constant[3]:0)):(jb=u(G.buffer)?K.createStream(34962,
G.buffer):K.getBuffer(G.buffer),db="type"in G?qa[G.type]:jb.dtype,nb=!!G.normalized,Ua=G.size|0,va=G.offset|0,Aa=G.stride|0,sa=G.divisor|0);Kc=D.buffer;D.buffer=jb;Jb=D.divisor;D.divisor=sa;Lb=D.normalized;D.normalized=nb;Vb=D.offset;D.offset=va;xa=D.size;D.size=Ua;Zc=D.state;D.state=ab;Ja=D.stride;D.stride=Aa;Ob=D.type;D.type=db;eb=D.w;D.w=Ha;hb=D.x;D.x=Bb;ya=D.y;D.y=yb;gc=D.z;D.z=Sa;Da=this.position;ob=!1;pb=null;Xa=0;Ya=!1;ed=nc=0;tc=1;Va=0;Mb=5126;Pa=xc=Ea=bd=0;u(Da)?(ob=!0,pb=K.createStream(34962,
Da),Mb=pb.dtype):(pb=K.getBuffer(Da))?Mb=pb.dtype:"constant"in Da?(tc=2,"number"===typeof Da.constant?(Ea=Da.constant,xc=Pa=bd=0):(Ea=0<Da.constant.length?Da.constant[0]:0,xc=1<Da.constant.length?Da.constant[1]:0,Pa=2<Da.constant.length?Da.constant[2]:0,bd=3<Da.constant.length?Da.constant[3]:0)):(pb=u(Da.buffer)?K.createStream(34962,Da.buffer):K.getBuffer(Da.buffer),Mb="type"in Da?qa[Da.type]:pb.dtype,Ya=!!Da.normalized,ed=Da.size|0,nc=Da.offset|0,Va=Da.stride|0,Xa=Da.divisor|0);Ba=z.buffer;z.buffer=
pb;kb=z.divisor;z.divisor=Xa;ub=z.normalized;z.normalized=Ya;Cb=z.offset;z.offset=nc;qb=z.size;z.size=ed;uc=z.state;z.state=tc;vb=z.stride;z.stride=Va;vd=z.type;z.type=Mb;sc=z.w;z.w=bd;Hd=z.x;z.x=Ea;Mc=z.y;z.y=xc;id=z.z;z.z=Pa;t.buffer=this.sizeBuffer;wd=!1;Wb=null;cc=0;Pb=!1;$b=Fa=0;lb=1;wb=0;Nb=5126;Sc=jc=hc=Qb=0;u(t)?(wd=!0,Wb=K.createStream(34962,t),Nb=Wb.dtype):(Wb=K.getBuffer(t))?Nb=Wb.dtype:"constant"in t?(lb=2,"number"===typeof t.constant?(hc=t.constant,jc=Sc=Qb=0):(hc=0<t.constant.length?
t.constant[0]:0,jc=1<t.constant.length?t.constant[1]:0,Sc=2<t.constant.length?t.constant[2]:0,Qb=3<t.constant.length?t.constant[3]:0)):(Wb=u(t.buffer)?K.createStream(34962,t.buffer):K.getBuffer(t.buffer),Nb="type"in t?qa[t.type]:Wb.dtype,Pb=!!t.normalized,$b=t.size|0,Fa=t.offset|0,wb=t.stride|0,cc=t.divisor|0);Bc=B.buffer;B.buffer=Wb;Cc=B.divisor;B.divisor=cc;Dc=B.normalized;B.normalized=Pb;Nc=B.offset;B.offset=Fa;cd=B.size;B.size=$b;Tc=B.state;B.state=lb;Oc=B.stride;B.stride=wb;Kb=B.type;B.type=
Nb;Fb=B.w;B.w=Qb;Pc=B.x;B.x=hc;Hc=B.y;B.y=jc;Uc=B.z;B.z=Sc;ic=ca.vert;ca.vert=61;Xc=ca.frag;ca.frag=60;T.dirty=!0;a(L,b,c);L.viewportWidth=k;L.viewportHeight=m;V[0]=n;V[1]=q;V[2]=x;V[3]=v;fc[0]=A;fc[1]=I;fc[2]=E;fc[3]=J;ka.blend_enable=M;da[0]=H;da[1]=P;da[2]=Q;da[3]=N;ka.depth_enable=Y;ka.stencil_enable=S;ea&&(y.cpuTime+=performance.now()-U);ma.offset=ga;ma.count=fa;ma.primitive=aa;za[64]=ja;za[69]=pa;za[67]=na;za[66]=Ca;za[65]=Ka;za[62]=Qa;za[14]=Za;za[63]=vc;za[10]=rb;za[68]=sd;za[6]=Zb;za[8]=
Yb;za[3]=Eb;ua&&K.destroyStream(dc);r.buffer=Ma;r.divisor=mb;r.normalized=tb;r.offset=gb;r.size=Oa;r.state=oc;r.stride=Ib;r.type=Vc;r.w=cb;r.x=mc;r.y=Gc;r.z=ec;ib&&K.destroyStream(jb);D.buffer=Kc;D.divisor=Jb;D.normalized=Lb;D.offset=Vb;D.size=xa;D.state=Zc;D.stride=Ja;D.type=Ob;D.w=eb;D.x=hb;D.y=ya;D.z=gc;ob&&K.destroyStream(pb);z.buffer=Ba;z.divisor=kb;z.normalized=ub;z.offset=Cb;z.size=qb;z.state=uc;z.stride=vb;z.type=vd;z.w=sc;z.x=Hd;z.y=Mc;z.z=id;wd&&K.destroyStream(Wb);B.buffer=Bc;B.divisor=
Cc;B.normalized=Dc;B.offset=Nc;B.size=cd;B.state=Tc;B.stride=Oc;B.type=Kb;B.w=Fb;B.x=Pc;B.y=Hc;B.z=Uc;ca.vert=ic;ca.frag=Xc;T.dirty=!0}}}}},{}],25:[function(C,aa,Ra){var k=C("./sorted-object-keys");aa.exports=function(y,q){for(var I=k(q),f=0;f<I.length;++f)y[I[f]]=q[I[f]];return y}},{"./sorted-object-keys":34}],26:[function(C,aa,Ra){function k(k,f,c,q,a,w){for(var y=0;y<f;++y)for(var C=k[y],O=0;O<c;++O)for(var F=C[O],r=0;r<q;++r)a[w++]=F[r]}function y(q,f,c,x,a){for(var w=1,C=c+1;C<f.length;++C)w*=
f[C];var W=f[c];if(4===f.length-c){var O=f[c+1],F=f[c+2];f=f[c+3];for(C=0;C<W;++C)k(q[C],O,F,f,x,a),a+=w}else for(C=0;C<W;++C)y(q[C],f,c+1,x,a),a+=w}var q=C("./pool");aa.exports={shape:function(k){for(var f=[];k.length;k=k[0])f.push(k.length);return f},flatten:function(I,f,c,x){var a=1;if(f.length)for(var w=0;w<f.length;++w)a*=f[w];else a=0;c=x||q.allocType(c,a);switch(f.length){case 0:break;case 1:x=f[0];for(f=0;f<x;++f)c[f]=I[f];break;case 2:x=f[0];f=f[1];for(w=a=0;w<x;++w)for(var C=I[w],W=0;W<
f;++W)c[a++]=C[W];break;case 3:k(I,f[0],f[1],f[2],c,0);break;default:y(I,f,0,c,0)}return c}}},{"./pool":32}],27:[function(C,aa,Ra){var k=C("./is-typed-array");aa.exports=function(y){return Array.isArray(y)||k(y)}},{"./is-typed-array":30}],28:[function(C,aa,Ra){var k=C("./is-typed-array");aa.exports=function(y){return!!y&&"object"===typeof y&&Array.isArray(y.shape)&&Array.isArray(y.stride)&&"number"===typeof y.offset&&y.shape.length===y.stride.length&&(Array.isArray(y.data)||k(y.data))}},{"./is-typed-array":30}],
29:[function(C,aa,Ra){aa.exports=function(k){return!(k&k-1)&&!!k}},{}],30:[function(C,aa,Ra){aa.exports=function(k){return k instanceof Uint8Array||k instanceof Uint16Array||k instanceof Uint32Array||k instanceof Int8Array||k instanceof Int16Array||k instanceof Int32Array||k instanceof Float32Array||k instanceof Float64Array||k instanceof Uint8ClampedArray}},{}],31:[function(C,aa,Ra){aa.exports=function(k,y){for(var q=Array(k),I=0;I<k;++I)q[I]=y(I);return q}},{}],32:[function(C,aa,Ra){function k(k){var f,
c;f=(65535<k)<<4;k>>>=f;c=(255<k)<<3;k>>>=c;f|=c;c=(15<k)<<2;k>>>=c;f|=c;c=(3<k)<<1;return f|c|k>>>c>>1}function y(){function y(f){a:{for(var a=16;268435456>=a;a*=16)if(f<=a){f=a;break a}f=0}a=c[k(f)>>2];return 0<a.length?a.pop():new ArrayBuffer(f)}function f(f){c[k(f.byteLength)>>2].push(f)}var c=q(8,function(){return[]});return{alloc:y,free:f,allocType:function(c,a){var f=null;switch(c){case 5120:f=new Int8Array(y(a),0,a);break;case 5121:f=new Uint8Array(y(a),0,a);break;case 5122:f=new Int16Array(y(2*
a),0,a);break;case 5123:f=new Uint16Array(y(2*a),0,a);break;case 5124:f=new Int32Array(y(4*a),0,a);break;case 5125:f=new Uint32Array(y(4*a),0,a);break;case 5126:f=new Float32Array(y(4*a),0,a);break;default:return null}return f.length!==a?f.subarray(0,a):f},freeType:function(c){f(c.buffer)}}}var q=C("./loop");C=y();C.zero=y();aa.exports=C},{"./loop":31}],33:[function(C,aa,Ra){aa.exports={next:"function"===typeof requestAnimationFrame?function(k){return requestAnimationFrame(k)}:function(k){return setTimeout(k,
16)},cancel:"function"===typeof cancelAnimationFrame?function(k){return cancelAnimationFrame(k)}:clearTimeout}},{}],34:[function(C,aa,Ra){aa.exports=function(k){return Object.keys(k).sort()}},{}],35:[function(C,aa,Ra){var k=C("./pool"),y=new Float32Array(1),q=new Uint32Array(y.buffer);aa.exports=function(C){for(var f=k.allocType(5123,C.length),c=0;c<C.length;++c)if(isNaN(C[c]))f[c]=65535;else if(Infinity===C[c])f[c]=31744;else if(-Infinity===C[c])f[c]=64512;else{y[0]=C[c];var x=q[0],a=x>>>31<<15,
w=(x<<1>>>24)-127,x=x>>13&1023;f[c]=-24>w?a:-14>w?a+(x+1024>>-14-w):15<w?a+31744:a+(w+15<<10)+x}return f}},{"./pool":32}],36:[function(C,aa,Ra){var k=C("./sorted-object-keys");aa.exports=function(y){return k(y).map(function(k){return y[k]})}},{"./sorted-object-keys":34}],37:[function(C,aa,Ra){function k(f,a,k){function q(){var a=window.innerWidth,c=window.innerHeight;f!==document.body&&(c=y.getBoundingClientRect(),a=c.right-c.left,c=c.bottom-c.top);y.width=k*a;y.height=k*c}var y=document.createElement("canvas");
c(y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});f.appendChild(y);f===document.body&&(y.style.position="absolute",c(f.style,{margin:0,padding:0}));var C;f!==document.body&&"function"===typeof ResizeObserver?(C=new ResizeObserver(function(){setTimeout(q)}),C.observe(f)):window.addEventListener("resize",q,!1);q();return{canvas:y,onDestroy:function(){C?C.disconnect():window.removeEventListener("resize",q);f.removeChild(y)}}}function y(c,a){function f(k){try{return c.getContext(k,
a)}catch(q){return null}}return f("webgl")||f("experimental-webgl")||f("webgl-experimental")}function q(c){if("string"===typeof c)return c.split();f(Array.isArray(c),"invalid extension array");return c}function I(c){return"string"===typeof c?(f("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(c)):c}var f=C("./util/check"),c=C("./util/extend");aa.exports=function(c){var a=c||{},w,C,W,O;c={};var F=[],r=[],D="undefined"===typeof window?1:window.devicePixelRatio,z=
!1,B=function(a){a&&f.raise(a)},H=function(){};"string"===typeof a?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),w=document.querySelector(a),f(w,"invalid query string for element")):"object"===typeof a?"string"===typeof a.nodeName&&"function"===typeof a.appendChild&&"function"===typeof a.getBoundingClientRect?w=a:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?(O=a,W=O.canvas):(f.constructor(a),"gl"in a?O=a.gl:"canvas"in a?W=I(a.canvas):
"container"in a&&(C=I(a.container)),"attributes"in a&&(c=a.attributes,f.type(c,"object","invalid context attributes")),"extensions"in a&&(F=q(a.extensions)),"optionalExtensions"in a&&(r=q(a.optionalExtensions)),"onDone"in a&&(f.type(a.onDone,"function","invalid or missing onDone callback"),B=a.onDone),"profile"in a&&(z=!!a.profile),"pixelRatio"in a&&(D=+a.pixelRatio,f(0<D,"invalid pixel ratio"))):f.raise("invalid arguments to regl");w&&("canvas"===w.nodeName.toLowerCase()?W=w:C=w);if(!O){if(!W){f("undefined"!==
typeof document,"must manually specify webgl context outside of DOM environments");w=k(C||document.body,B,D);if(!w)return null;W=w.canvas;H=w.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);O=y(W,c)}return O?{gl:O,canvas:W,container:C,extensions:F,optionalExtensions:r,pixelRatio:D,profile:z,onDone:B,onDestroy:H}:(H(),B("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(C,aa,Ra){aa.exports=
function(y,q){function C(a){var c=!1;"altKey"in a&&(c=c||a.altKey!==z.alt,z.alt=!!a.altKey);"shiftKey"in a&&(c=c||a.shiftKey!==z.shift,z.shift=!!a.shiftKey);"ctrlKey"in a&&(c=c||a.ctrlKey!==z.control,z.control=!!a.ctrlKey);"metaKey"in a&&(c=c||a.metaKey!==z.meta,z.meta=!!a.metaKey);return c}function f(a,c){var f=k.x(c),h=k.y(c);"buttons"in c&&(a=c.buttons|0);if(a!==F||f!==r||h!==D||C(c))F=a|0,r=f||0,D=h||0,q&&q(F,r,D,z)}function c(a){f(0,a)}function x(){if(F||r||D||z.shift||z.alt||z.meta||z.control)F=
r=D=0,z.shift=z.alt=z.control=z.meta=!1,q&&q(0,0,0,z)}function a(a){C(a)&&q&&q(F,r,D,z)}function w(a){0===k.buttons(a)?f(0,a):f(F,a)}function aa(a){f(F|k.buttons(a),a)}function W(a){f(F&~k.buttons(a),a)}function O(){B||(B=!0,y.addEventListener("mousemove",w),y.addEventListener("mousedown",aa),y.addEventListener("mouseup",W),y.addEventListener("mouseleave",c),y.addEventListener("mouseenter",c),y.addEventListener("mouseout",c),y.addEventListener("mouseover",c),y.addEventListener("blur",x),y.addEventListener("keyup",
a),y.addEventListener("keydown",a),y.addEventListener("keypress",a),y!==window&&(window.addEventListener("blur",x),window.addEventListener("keyup",a),window.addEventListener("keydown",a),window.addEventListener("keypress",a)))}q||(q=y,y=window);var F=0,r=0,D=0,z={shift:!1,alt:!1,control:!1,meta:!1},B=!1;O();var H={element:y};Object.defineProperties(H,{enabled:{get:function(){return B},set:function(f){f?O():B&&(B=!1,y.removeEventListener("mousemove",w),y.removeEventListener("mousedown",aa),y.removeEventListener("mouseup",
W),y.removeEventListener("mouseleave",c),y.removeEventListener("mouseenter",c),y.removeEventListener("mouseout",c),y.removeEventListener("mouseover",c),y.removeEventListener("blur",x),y.removeEventListener("keyup",a),y.removeEventListener("keydown",a),y.removeEventListener("keypress",a),y!==window&&(window.removeEventListener("blur",x),window.removeEventListener("keyup",a),window.removeEventListener("keydown",a),window.removeEventListener("keypress",a)))},enumerable:!0},buttons:{get:function(){return F},
enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return D},enumerable:!0},mods:{get:function(){return z},enumerable:!0}});return H};var k=C("mouse-event")},{"mouse-event":39}],39:[function(C,aa,Ra){function k(k){return k.target||k.srcElement||window}Ra.buttons=function(k){if("object"===typeof k){if("buttons"in k)return k.buttons;if("which"in k){k=k.which;if(2===k)return 4;if(3===k)return 2;if(0<k)return 1<<k-1}else if("button"in k){k=k.button;if(1===k)return 4;if(2===k)return 2;
if(0<=k)return 1<<k}}return 0};Ra.element=k;Ra.x=function(y){if("object"===typeof y){if("offsetX"in y)return y.offsetX;var q=k(y).getBoundingClientRect();return y.clientX-q.left}return 0};Ra.y=function(y){if("object"===typeof y){if("offsetY"in y)return y.offsetY;var q=k(y).getBoundingClientRect();return y.clientY-q.top}return 0}},{}],40:[function(C,aa,Ra){function k(c){throw Error("resl: "+c);}function y(c,a,f){Object.keys(c).forEach(function(c){0>a.indexOf(c)&&k('invalid parameter "'+c+'" in '+f)})}
function q(c,a){this.state=0;this.ready=!1;this.progress=0;this.name=c;this.cancel=a}var I=["manifest","onDone","onProgress","onError"],f=["type","src","stream","credentials","parser"],c=["onData","onDone"];aa.exports=function(x){function a(a,c){if(a in x){var g=x[a];"function"!==typeof g&&k('invalid callback "'+a+'"');return g}return null}function w(a){function c(){if(!(2>m.readyState||1===r.state||-1===r.state)){if(200!==m.status)return W('error loading resource "'+a.name+'"');if(2<m.readyState&&
0===r.state){var d;d="binary"===a.type?m.response:m.responseText;if(k.data)try{n=k.data(d)}catch(f){return W(f)}else n=d}if(3<m.readyState&&0===r.state){if(k.done)try{n=k.done()}catch(f){return W(f)}r.state=1}B[g]=n;r.progress=.75*r.progress+.25;r.ready=a.stream&&!!n||1===r.state;O()}}var g=a.name,d=a.stream,f="binary"===a.type,k=a.parser,m=new XMLHttpRequest,n=null,r=new q(g,function(){1!==r.state&&-1!==r.state&&(m.onreadystatechange=null,m.abort(),r.state=-1)});m.onreadystatechange=d?c:function(){4===
m.readyState&&c()};f&&(m.responseType="arraybuffer");a.credentials&&(m.withCredentials=!0);m.open("GET",a.src,!0);m.send();return r}function C(a,c){function g(){if(0===w.state)if(r.data)try{x=r.data(c)}catch(b){return W(b)}else x=c}function d(b){g();B[n]=x;w.progress=b.lengthComputable?Math.max(w.progress,b.loaded/b.total):.75*w.progress+.25;O(n)}function f(){g();if(0===w.state){if(r.done)try{x=r.done()}catch(b){return W(b)}w.state=1}w.progress=1;w.ready=!0;B[n]=x;m();O("finish "+n)}function k(){W('error loading asset "'+
n+'"')}function m(){a.stream&&c.removeEventListener("progress",d);"image"===a.type?c.addEventListener("load",f):c.addEventListener("canplay",f);c.removeEventListener("error",k)}var n=a.name,r=a.parser,w=new q(n,function(){1!==w.state&&-1!==w.state&&(w.state=-1,m(),c.src="")}),x=c;a.stream&&c.addEventListener("progress",d);if("image"===a.type)c.addEventListener("load",f);else{var b=!1,e=!1;c.addEventListener("loadedmetadata",function(){e=!0;b&&f()});c.addEventListener("canplay",function(){b=!0;e&&
f()})}c.addEventListener("error",k);c.crossOrigin=a.credentials?"use-credentials":"anonymous";c.src=a.src;return w}function W(a){-1!==H&&1!==H&&(H=-1,Q.forEach(function(a){a.cancel()}),z?"string"===typeof a?z(Error("resl: "+a)):z(a):console.error("resl error:",a))}function O(a){if(-1!==H&&1!==H){var c=0,f=0;Q.forEach(function(a){a.ready&&(f+=1);c+=a.progress});f===Q.length?(H=1,r(B)):D&&D(c/Q.length,a)}}"object"===typeof x&&x||k("invalid or missing configuration");y(x,I,"config");var F=x.manifest;
"object"===typeof F&&F||k("missing manifest");var r=a("onDone");r||k("missing onDone() callback");var D=a("onProgress"),z=a("onError"),B={},H=0,m={text:w,binary:function(a){return w(a)},image:function(a){return C(a,document.createElement("img"))},video:function(a){return C(a,document.createElement("video"))},audio:function(a){return C(a,document.createElement("audio"))}},Q=Object.keys(F).map(function(a){function h(a,c){if(a in g.parser){var d=g.parser[a];"function"!==typeof d&&k("invalid parser callback "+
a+' for asset "'+a+'"');return d}return c}var g=F[a];"string"===typeof g?g={src:g}:"object"===typeof g&&g||k('invalid asset definition "'+a+'"');y(g,f,'asset "'+a+'"');var d={};"parser"in g&&("function"===typeof g.parser?d={data:g.parser}:"object"===typeof g.parser&&g.parser?(y(d,c,'parser for asset "'+a+'"'),"onData"in d||k('missing onData callback for parser in asset "'+a+'"'),d={data:h("onData"),done:h("onDone")}):k('invalid parser for asset "'+a+'"'));return{name:a,type:function(c,d,f){c in g&&
(f=g[c]);0>d.indexOf(f)&&k("invalid "+c+' "'+f+'" for asset "'+a+'", possible values: '+d);return f}("type",Object.keys(m),"text"),stream:!!g.stream,credentials:!!g.credentials,src:function(c,d,f){c in g?f=g[c]:d&&k("missing "+c+' for asset "'+a+'"');"string"!==typeof f&&k("invalid "+c+' for asset "'+a+'", must be a string');return f}("src",!0,""),parser:d}}).map(function(a){return m[a.type](a)});0===Q.length&&setTimeout(function(){O("done")},1)}},{}],41:[function(C,aa,Ra){function k(a,c){for(var d=
0;d<a.length;++d)if(a[d]===c)return d;return-1}var y=C("./lib/util/check"),q=C("./lib/util/extend"),I=C("./lib/dynamic"),f=C("./lib/util/raf"),c=C("./lib/util/clock"),x=C("./lib/strings"),a=C("./lib/webgl"),w=C("./lib/extension"),la=C("./lib/limits"),W=C("./lib/buffer"),O=C("./lib/elements"),F=C("./lib/texture"),r=C("./lib/renderbuffer"),D=C("./lib/framebuffer"),z=C("./lib/attribute"),B=C("./lib/shader"),H=C("./lib/read"),m=C("./lib/core"),Q=C("./lib/stats"),Ia=C("./lib/timer");aa.exports=function(h){function g(){if(0===
rb.length)K&&K.update(),dc=null;else{dc=f.next(g);b();for(var a=rb.length-1;0<=a;--a){var c=rb[a];c&&c(N,null,0)}Ka.flush();K&&K.update()}}function d(){!dc&&0<rb.length&&(dc=f.next(g))}function A(){dc&&(f.cancel(g),dc=null)}function C(a){a.preventDefault();zb=!0;A();da.forEach(function(a){a()})}function aa(a){Ka.getError();zb=!1;Xb.restore();ka.restore();Za.restore();ca.restore();za.restore();Na.restore();u.restore();K&&K.restore();fc.procs.refresh();d();ra.forEach(function(a){a()})}function n(a){function b(a,
c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(I.isDynamic(f))e[b]=I.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(I.isDynamic(f[g])){e[b]=I.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}y(!!a,"invalid args to regl({...})");y.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];
delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=q({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=fc.compile(a,f,e,d,g),k=h.draw,m=h.batch,n=h.scope,r=[];return q(function(a,b){var d;
zb&&y.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function pa(a,b){var c=0;
fc.procs.poll();var d=b.color;d&&(Ka.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Ka.clearDepth(+b.depth),c|=256);"stencil"in b&&(Ka.clearStencil(b.stencil|0),c|=1024);y(!!c,"called regl.clear with no buffer specified");Ka.clear(c)}function M(a){y.type(a,"function","regl.frame() callback must be a function");rb.push(a);d();return{cancel:function(){function b(){var a=k(rb,b);rb[a]=rb[rb.length-1];--rb.length;0>=rb.length&&A()}var c=k(rb,a);y(0<=c,"cannot cancel a frame twice");
rb[c]=b}}}function fa(){var a=Ga.viewport,b=Ga.scissor_box;a[0]=a[1]=b[0]=b[1]=0;N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=a[2]=b[2]=Ka.drawingBufferWidth;N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=a[3]=b[3]=Ka.drawingBufferHeight}function b(){N.tick+=1;N.time=Z();fa();fc.procs.poll()}function e(){ca.refresh();fa();fc.procs.refresh();K&&K.update()}function Z(){return(c()-L)/1E3}console.log("REGL args are:",h);h=a(h);console.log("REGL configs are:",h);if(!h)return null;
var Ka=h.gl,Ra=Ka.getContextAttributes(),zb=Ka.isContextLost(),Xb=w(Ka,h);if(!Xb)return null;var na=x(),Qa=Q(),X=Xb.extensions,K=Ia(Ka,X),L=c(),T=Ka.drawingBufferWidth,ma=Ka.drawingBufferHeight,N={tick:0,time:0,viewportWidth:T,viewportHeight:ma,framebufferWidth:T,framebufferHeight:ma,drawingBufferWidth:T,drawingBufferHeight:ma,pixelRatio:h.pixelRatio},T={elements:null,primitive:4,count:-1,offset:0,instances:-1},Rb=la(Ka,X),Za=W(Ka,Qa,h,function(a){return u.destroyBuffer(a)}),S=O(Ka,X,Za,Qa),u=z(Ka,
X,Rb,Qa,Za,S,T),ka=B(Ka,na,Qa,h),ca=F(Ka,X,Rb,function(){fc.procs.poll()},N,Qa,h),za=r(Ka,X,Rb,Qa,h),Na=D(Ka,X,Rb,ca,za,Qa),fc=m(Ka,na,X,Rb,Za,S,ca,Na,{},u,ka,T,N,K,h),na=H(Ka,Na,fc.procs.poll,N,Ra,X,Rb),Ga=fc.next,U=Ka.canvas,rb=[],da=[],ra=[],Yb=[h.onDestroy],dc=null;U&&(U.addEventListener("webglcontextlost",C,!1),U.addEventListener("webglcontextrestored",aa,!1));var qc=Na.setFBO=n({framebuffer:I.define.call(null,1,"framebuffer")});e();Ra=q(n,{clear:function(a){y("object"===typeof a&&a,"regl.clear() takes an object as input");
if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)qc(q({framebuffer:a.framebuffer.faces[b]},a),pa);else qc(a,pa);else pa(null,a)},prop:I.define.bind(null,1),context:I.define.bind(null,2),"this":I.define.bind(null,3),draw:n({}),buffer:function(a){return Za.create(a,34962,!1,!1)},elements:function(a){return S.create(a,!1)},texture:ca.create2D,cube:ca.createCube,renderbuffer:za.create,framebuffer:Na.create,framebufferCube:Na.createCube,vao:u.createVAO,
attributes:Ra,frame:M,on:function(a,b){y.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return M(b);case "lost":c=da;break;case "restore":c=ra;break;case "destroy":c=Yb;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Rb,hasExtension:function(a){return 0<=Rb.extensions.indexOf(a.toLowerCase())},read:na,destroy:function(){rb.length=
0;A();U&&(U.removeEventListener("webglcontextlost",C),U.removeEventListener("webglcontextrestored",aa));ka.clear();Na.clear();za.clear();u.clear();ca.clear();S.clear();Za.clear();K&&K.clear();Yb.forEach(function(a){a()})},_gl:Ka,_refresh:e,poll:function(){b();K&&K.update()},now:Z,stats:Qa});h.onDone(null,Ra);return Ra}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,
"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
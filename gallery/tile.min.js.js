(function(){function aa(ba,Ma,d){function V(g,l){if(!Ma[g]){if(!ba[g]){var n="function"==typeof require&&require;if(!l&&n)return n(g,!0);if(H)return H(g,!0);n=Error("Cannot find module '"+g+"'");throw n.code="MODULE_NOT_FOUND",n;}n=Ma[g]={exports:{}};ba[g][0].call(n.exports,function(f){return V(ba[g][1][f]||f)},n,n.exports,aa,ba,Ma,d)}return Ma[g].exports}for(var H="function"==typeof require&&require,J=0;J<d.length;J++)V(d[J]);return V}return aa})()({1:[function(aa,ba,Ma){var d=aa("../regl")(),V=
aa("mouse-change")();aa("resl")({manifest:{map:{type:"text",src:"assets/map.json",parser:JSON.parse},tiles:{type:"image",src:"assets/tiles.png",parser:d.texture}},onDone:function(H){var J=H.map,g=d({frag:"\n      precision mediump float;\n      uniform sampler2D map, tiles;\n      uniform vec2 mapSize, tileSize;\n      varying vec2 uv;\n      void main() {\n        vec2 tileCoord = floor(255.0 * texture2D(map, floor(uv) / mapSize).ra);\n        gl_FragColor = texture2D(tiles, (tileCoord + fract(uv)) / tileSize);\n      }",
vert:"\n      precision mediump float;\n      attribute vec2 position;\n      uniform vec4 view;\n      varying vec2 uv;\n      void main() {\n        uv = mix(view.xw, view.zy, 0.5 * (1.0 + position));\n        gl_Position = vec4(position, 1, 1);\n      }",depth:{enable:!1},uniforms:{tiles:H.tiles,tileSize:[16,16],map:d.texture(J),mapSize:[J[0].length,J.length],view:d.prop("view")},attributes:{position:[-1,-1,1,-1,-1,1,1,1,-1,1,1,-1]},count:6});d.frame(function(l){var n=l.viewportWidth,f=l.viewportHeight;
l=J[0].length*V.x/n;var d=J.length*V.y/f,n=n/f*10;g({view:[l-.5*n,d-5,l+.5*n,d+5]})})}})},{"../regl":41,"mouse-change":38,resl:40}],2:[function(aa,ba,Ma){function d(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var V=aa("./util/sorted-object-keys"),H=aa("./util/check"),J=aa("./util/values"),g=aa("./constants/dtypes.json"),l=aa("./util/is-typed-array"),n=aa("./util/is-ndarray"),f=aa("./constants/primitives.json"),
F="attributes elements offset count primitive instances".split(" ");ba.exports=function(C,O,I,k,u,L,W){function t(h){if(h!==Z.currentVAO){var y=O.oes_vertex_array_object;h?y.bindVertexArrayOES(h.vao):y.bindVertexArrayOES(null);Z.currentVAO=h}}function N(h){if(h!==Z.currentVAO){if(h)h.bindAttrs();else{for(var y=O.angle_instanced_arrays,c=0;c<e.length;++c){var f=e[c];f.buffer?(C.enableVertexAttribArray(c),f.buffer.bind(),C.vertexAttribPointer(c,f.size,f.type,f.normalized,f.stride,f.offfset),y&&f.divisor&&
y.vertexAttribDivisorANGLE(c,f.divisor)):(C.disableVertexAttribArray(c),C.vertexAttrib4f(c,f.x,f.y,f.z,f.w))}W.elements?C.bindBuffer(34963,W.elements.buffer.buffer):C.bindBuffer(34963,null)}Z.currentVAO=h}}function w(){J(p).forEach(function(h){h.destroy()})}function B(){this.id=++U;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var h=O.oes_vertex_array_object;this.vao=h?h.createVertexArrayOES():null;p[this.id]=this;this.buffers=
[]}function ha(){O.oes_vertex_array_object&&J(p).forEach(function(h){h.refresh()})}var c=I.maxAttributes,e=Array(c);for(I=0;I<c;++I)e[I]=new d;var U=0,p={},Z={Record:d,scope:{},state:e,currentVAO:null,targetVAO:null,restore:O.oes_vertex_array_object?ha:function(){},createVAO:function(h){function y(h){var p;if(Array.isArray(h))p=h,e.elements&&e.ownsElements&&e.elements.destroy(),e.elements=null,e.ownsElements=!1,e.offset=0,e.count=0,e.instances=-1,e.primitive=4;else{H("object"===typeof h,"invalid arguments for create vao");
H("attributes"in h,"must specify attributes for vao");if(h.elements){var b=h.elements;e.ownsElements?("function"===typeof b&&"elements"===b._reglType?e.elements.destroy():e.elements(b),e.ownsElements=!1):L.getElements(h.elements)?(e.elements=h.elements,e.ownsElements=!1):(e.elements=L.create(h.elements),e.ownsElements=!0)}else e.elements=null,e.ownsElements=!1;p=h.attributes;e.offset=0;e.count=-1;e.instances=-1;e.primitive=4;e.elements&&(e.count=e.elements._elements.vertCount,e.primitive=e.elements._elements.primType);
"offset"in h&&(e.offset=h.offset|0);"count"in h&&(e.count=h.count|0);"instances"in h&&(e.instances=h.instances|0);"primitive"in h&&(H(h.primitive in f,"bad primitive type: "+h.primitive),e.primitive=f[h.primitive]);H.optional(function(){for(var a=V(h),b=0;b<a.length;++b)H(0<=F.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+F)});H(Array.isArray(p),"attributes must be an array")}H(p.length<c,"too many attributes");H(0<p.length,"must specify at least one attribute");var b={},x=
e.attributes;x.length=p.length;for(var a=0;a<p.length;++a){var w=p[a],z=x[a]=new d,U=w.data||w;if(Array.isArray(U)||l(U)||n(U)){var t;e.buffers[a]&&(t=e.buffers[a],l(U)&&t._buffer.byteLength>=U.byteLength?t.subdata(U):(t.destroy(),e.buffers[a]=null));e.buffers[a]||(t=e.buffers[a]=u.create(w,34962,!1,!0));z.buffer=u.getBuffer(t);z.size=z.buffer.dimension|0;z.normalized=!1;z.type=z.buffer.dtype;z.offset=0;z.stride=0;z.divisor=0;z.state=1;b[a]=1}else u.getBuffer(w)?(z.buffer=u.getBuffer(w),z.size=z.buffer.dimension|
0,z.normalized=!1,z.type=z.buffer.dtype,z.offset=0,z.stride=0,z.divisor=0,z.state=1):u.getBuffer(w.buffer)?(z.buffer=u.getBuffer(w.buffer),z.size=(+w.size||z.buffer.dimension)|0,z.normalized=!!w.normalized||!1,"type"in w?(H.parameter(w.type,g,"invalid buffer type"),z.type=g[w.type]):z.type=z.buffer.dtype,z.offset=(w.offset||0)|0,z.stride=(w.stride||0)|0,z.divisor=(w.divisor||0)|0,z.state=1,H(1<=z.size&&4>=z.size,"size must be between 1 and 4"),H(0<=z.offset,"invalid offset"),H(0<=z.stride&&255>=z.stride,
"stride must be between 0 and 255"),H(0<=z.divisor,"divisor must be positive"),H(!z.divisor||!!O.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in w?(H(0<a,"first attribute must not be a constant"),z.x=+w.x||0,z.y=+w.y||0,z.z=+w.z||0,z.w=+w.w||0,z.state=2):H(!1,"invalid attribute spec for location "+a)}for(t=0;t<e.buffers.length;++t)!b[t]&&e.buffers[t]&&(e.buffers[t].destroy(),e.buffers[t]=null);e.refresh();return y}var e=new B;k.vaoCount+=1;y.destroy=function(){for(var h=
0;h<e.buffers.length;++h)e.buffers[h]&&e.buffers[h].destroy();e.buffers.length=0;e.ownsElements&&(e.elements.destroy(),e.elements=null,e.ownsElements=!1);e.destroy()};y._vao=e;y._reglType="vao";return y(h)},getVAO:function(h){return"function"===typeof h&&h._vao?h._vao:null},destroyBuffer:function(h){for(var c=0;c<e.length;++c){var f=e[c];f.buffer===h&&(C.disableVertexAttribArray(c),f.buffer=null)}},setVAO:O.oes_vertex_array_object?t:N,clear:O.oes_vertex_array_object?w:function(){}};B.prototype.bindAttrs=
function(){for(var h=O.angle_instanced_arrays,f=this.attributes,e=0;e<f.length;++e){var l=f[e];l.buffer?(C.enableVertexAttribArray(e),C.bindBuffer(34962,l.buffer.buffer),C.vertexAttribPointer(e,l.size,l.type,l.normalized,l.stride,l.offset),h&&l.divisor&&h.vertexAttribDivisorANGLE(e,l.divisor)):(C.disableVertexAttribArray(e),C.vertexAttrib4f(e,l.x,l.y,l.z,l.w))}for(h=f.length;h<c;++h)C.disableVertexAttribArray(h);(h=L.getElements(this.elements))?C.bindBuffer(34963,h.buffer.buffer):C.bindBuffer(34963,
null)};B.prototype.refresh=function(){var h=O.oes_vertex_array_object;h&&(h.bindVertexArrayOES(this.vao),this.bindAttrs(),Z.currentVAO=null,h.bindVertexArrayOES(null))};B.prototype.destroy=function(){if(this.vao){var h=O.oes_vertex_array_object;this===Z.currentVAO&&(Z.currentVAO=null,h.bindVertexArrayOES(null));h.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);p[this.id]&&(delete p[this.id],--k.vaoCount)};return Z}},
{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(aa,ba,Ma){function d(f){return I[Object.prototype.toString.call(f)]|0}function V(f,l){for(var n=0;n<l.length;++n)f[n]=l[n]}function H(f,l,n,w,g,d,c){for(var e=0,U=0;U<n;++U)for(var p=0;p<w;++p)f[e++]=l[g*U+d*p+c]}var J=aa("./util/sorted-object-keys"),g=aa("./util/check"),l=aa("./util/is-typed-array"),n=aa("./util/is-ndarray"),
f=aa("./util/values"),F=aa("./util/pool");Ma=aa("./util/flatten");var C=Ma.flatten,O=Ma.shape,I=aa("./constants/arraytypes.json"),k=aa("./constants/dtypes.json"),u=aa("./constants/usage.json"),L=[];L[5120]=1;L[5122]=2;L[5124]=4;L[5121]=1;L[5123]=2;L[5125]=4;L[5126]=4;ba.exports=function(I,t,N,w){function B(h){this.id=U++;this.buffer=I.createBuffer();this.type=h;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;N.profile&&(this.stats={size:0})}function ha(h,
f,c){h.byteLength=f.byteLength;I.bufferData(h.type,f,c)}function c(h,f,c,e,p,b){h.usage=c;if(Array.isArray(f)){if(h.dtype=e||5126,0<f.length)if(Array.isArray(f[0])){p=O(f);for(var x=e=1;x<p.length;++x)e*=p[x];h.dimension=e;f=C(f,p,h.dtype);ha(h,f,c);b?h.persistentData=f:F.freeType(f)}else"number"===typeof f[0]?(h.dimension=p,p=F.allocType(h.dtype,f.length),V(p,f),ha(h,p,c),b?h.persistentData=p:F.freeType(p)):l(f[0])?(h.dimension=f[0].length,h.dtype=e||d(f[0])||5126,f=C(f,[f.length,f[0].length],h.dtype),
ha(h,f,c),b?h.persistentData=f:F.freeType(f)):g.raise("invalid buffer data")}else if(l(f))h.dtype=e||d(f),h.dimension=p,ha(h,f,c),b&&(h.persistentData=new Uint8Array(new Uint8Array(f.buffer)));else if(n(f)){p=f.shape;var a=f.stride,x=f.offset,w=0,z=0,U=0,t=0;1===p.length?(w=p[0],z=1,U=a[0],t=0):2===p.length?(w=p[0],z=p[1],U=a[0],t=a[1]):g.raise("invalid shape");h.dtype=e||d(f.data)||5126;h.dimension=z;p=F.allocType(h.dtype,w*z);H(p,f.data,w,z,U,t,x);ha(h,p,c);b?h.persistentData=p:F.freeType(p)}else f instanceof
ArrayBuffer?(h.dtype=5121,h.dimension=p,ha(h,f,c),b&&(h.persistentData=new Uint8Array(new Uint8Array(f)))):g.raise("invalid buffer data")}function e(f){t.bufferCount--;w(f);var c=f.buffer;g(c,"buffer must not be deleted already");I.deleteBuffer(c);f.buffer=null;delete p[f.id]}var U=0,p={};B.prototype.bind=function(){I.bindBuffer(this.type,this.buffer)};B.prototype.destroy=function(){e(this)};var Z=[];N.profile&&(t.getTotalBufferSize=function(){var f=0;J(p).forEach(function(c){f+=p[c].stats.size});
return f});return{create:function(f,y,w,U){function E(a){var b=35044,f=null,h=0,e=0,y=1;Array.isArray(a)||l(a)||n(a)||a instanceof ArrayBuffer?f=a:"number"===typeof a?h=a|0:a&&(g.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(g(null===f||Array.isArray(f)||l(f)||n(f),"invalid data for buffer"),f=a.data),"usage"in a&&(g.parameter(a.usage,u,"invalid buffer usage"),b=u[a.usage]),"type"in a&&(g.parameter(a.type,k,"invalid buffer type"),e=k[a.type]),"dimension"in
a&&(g.type(a.dimension,"number","invalid dimension"),y=a.dimension|0),"length"in a&&(g.nni(h,"buffer length must be a nonnegative integer"),h=a.length|0));x.bind();f?c(x,f,b,e,y,U):(h&&I.bufferData(x.type,h,b),x.dtype=e||5121,x.usage=b,x.dimension=y,x.byteLength=h);N.profile&&(x.stats.size=x.byteLength*L[x.dtype]);return E}function b(a,b){g(b+a.byteLength<=x.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+b+" to a buffer of size "+
x.byteLength);I.bufferSubData(x.type,b,a)}t.bufferCount++;var x=new B(y);p[x.id]=x;w||E(f);E._reglType="buffer";E._buffer=x;E.subdata=function(a,f){var h=(f||0)|0,c;x.bind();if(l(a)||a instanceof ArrayBuffer)b(a,h);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var e=F.allocType(x.dtype,a.length);V(e,a);b(e,h);F.freeType(e)}else Array.isArray(a[0])||l(a[0])?(c=O(a),e=C(a,c,x.dtype),b(e,h),F.freeType(e)):g.raise("invalid buffer data")}else if(n(a)){c=a.shape;var y=a.stride,p=e=
0,w=0,T=0;1===c.length?(e=c[0],p=1,w=y[0],T=0):2===c.length?(e=c[0],p=c[1],w=y[0],T=y[1]):g.raise("invalid shape");c=Array.isArray(a.data)?x.dtype:d(a.data);c=F.allocType(c,e*p);H(c,a.data,e,p,w,T,a.offset);b(c,h);F.freeType(c)}else g.raise("invalid data for buffer subdata");return E};N.profile&&(E.stats=x.stats);E.destroy=function(){e(x)};return E},createStream:function(f,e){var l=Z.pop();l||(l=new B(f));l.bind();c(l,e,35040,0,1,!1);return l},destroyStream:function(f){Z.push(f)},clear:function(){f(p).forEach(e);
Z.forEach(e)},getBuffer:function(f){return f&&f._buffer instanceof B?f._buffer:null},restore:function(){f(p).forEach(function(f){f.buffer=I.createBuffer();I.bindBuffer(f.type,f.buffer);I.bufferData(f.type,f.persistentData||f.byteLength,f.usage)})},_initBuffer:c}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],
4:[function(aa,ba,Ma){ba.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(aa,ba,Ma){ba.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(aa,ba,Ma){ba.exports={points:0,point:0,
lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(aa,ba,Ma){ba.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(aa,ba,Ma){function d(f){return Array.isArray(f)||I(f)||k(f)}function V(f){return f.sort(function(f,c){return"viewport"===f?-1:"viewport"===c?1:f<c?-1:1})}function H(f,c,e,l){this.thisDep=f;this.contextDep=c;this.propDep=e;this.append=l}function J(f){return f&&!(f.thisDep||f.contextDep||f.propDep)}
function g(f){return new H(!1,!1,!1,f)}function l(f,c){var e=f.type;if(0===e)return e=f.data.length,new H(!0,1<=e,2<=e,c);if(4===e)return e=f.data,new H(e.thisDep,e.contextDep,e.propDep,c);if(5===e)return new H(!1,!1,!1,c);if(6===e){for(var l=e=!1,n=!1,b=0;b<f.data.length;++b){var p=f.data[b];1===p.type?n=!0:2===p.type?l=!0:3===p.type?e=!0:0===p.type?(e=!0,p=p.data,1<=p&&(l=!0),2<=p&&(n=!0)):4===p.type&&(e=e||p.data.thisDep,l=l||p.data.contextDep,n=n||p.data.propDep)}return new H(e,l,n,c)}return new H(3===
e,2===e,1===e,c)}var n=aa("./util/sorted-object-keys"),f=aa("./util/check"),F=aa("./util/extend"),C=aa("./util/codegen"),O=aa("./util/loop"),I=aa("./util/is-typed-array"),k=aa("./util/is-ndarray"),u=aa("./util/is-array-like"),L=aa("./dynamic"),W=aa("./constants/primitives.json"),t=aa("./constants/dtypes.json"),N=["x","y","z","w"],w="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),B={0:0,1:1,zero:0,one:1,"src color":768,
"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ha="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
c={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},e={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},U={frag:35632,vert:35633},p={cw:2304,ccw:2305},Z=new H(!1,!1,!1,function(){});ba.exports=function(h,y,k,D,E,b,x,a,I,z,ja,gd,X,fa,R){function T(a){return a.replace(".","_")}function A(a,b,f){var c=T(a);ta.push(a);
Y[c]=la[c]=!!f;Ia[c]=b}function q(a,b,f){var c=T(a);ta.push(a);Array.isArray(f)?(la[c]=f.slice(),Y[c]=f.slice()):la[c]=Y[c]=f;Da[c]=b}function M(){var a=C(),b=a.link,c=a.global;a.id=zd++;a.batchId="0";var e=b(hb),q=a.shared={props:"a0"};n(hb).forEach(function(a){q[a]=c.def(e,".",a)});f.optional(function(){a.CHECK=b(f);a.commandStr=f.guessCommand();a.command=b(a.commandStr);a.assert=function(a,f,c){a("if(!(",f,"))",this.CHECK,".commandRaise(",b(c),",",this.command,");")};ea.invalidBlendCombinations=
ha});var r=a.next={},v=a.current={};n(Da).forEach(function(a){Array.isArray(la[a])&&(r[a]=c.def(q.next,".",a),v[a]=c.def(q.current,".",a))});var m=a.constants={};n(ea).forEach(function(a){m[a]=c.def(JSON.stringify(ea[a]))});a.invoke=function(f,c){switch(c.type){case 0:var e=["this",q.context,q.props,a.batchId];return f.def(b(c.data),".call(",e.slice(0,Math.max(c.data.length+1,4)),")");case 1:return f.def(q.props,c.data);case 2:return f.def(q.context,c.data);case 3:return f.def("this",c.data);case 4:return c.data.append(a,
f),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(b){return a.invoke(f,b)})}};a.attribCache={};var l={};a.scopeAttrib=function(a){a=y.id(a);if(a in l)return l[a];var f=z.scope[a];f||(f=z.scope[a]=new sa);return l[a]=b(f)};return a}function P(a){var b=a["static"];a=a.dynamic;var f;if("profile"in b){var c=!!b.profile;f=g(function(a,b){return c});f.enable=c}else if("profile"in a){var e=a.profile;f=l(e,function(a,b){return a.invoke(b,e)})}return f}function wa(b,c){var e=
b["static"],q=b.dynamic;if("framebuffer"in e){var r=e.framebuffer;return r?(r=a.getFramebuffer(r),f.command(r,"invalid framebuffer object"),g(function(a,b){var f=a.link(r),c=a.shared;b.set(c.framebuffer,".next",f);c=c.context;b.set(c,".framebufferWidth",f+".width");b.set(c,".framebufferHeight",f+".height");return f})):g(function(a,b){var f=a.shared;b.set(f.framebuffer,".next","null");f=f.context;b.set(f,".framebufferWidth",f+".drawingBufferWidth");b.set(f,".framebufferHeight",f+".drawingBufferHeight");
return"null"})}if("framebuffer"in q){var v=q.framebuffer;return l(v,function(a,b){var c=a.invoke(b,v),e=a.shared,q=e.framebuffer,r=b.def(q,".getFramebuffer(",c,")");f.optional(function(){a.assert(b,"!"+c+"||"+r,"invalid framebuffer object")});b.set(q,".next",r);e=e.context;b.set(e,".framebufferWidth",r+"?"+r+".width:"+e+".drawingBufferWidth");b.set(e,".framebufferHeight",r+"?"+r+".height:"+e+".drawingBufferHeight");return r})}return null}function qa(a,b,c){function e(a){if(a in q){var v=q[a];f.commandType(v,
"object","invalid "+a,c.commandStr);var m=!0,h=v.x|0,Q=v.y|0,p,n;"width"in v?(p=v.width|0,f.command(0<=p,"invalid "+a,c.commandStr)):m=!1;"height"in v?(n=v.height|0,f.command(0<=n,"invalid "+a,c.commandStr)):m=!1;return new H(!m&&b&&b.thisDep,!m&&b&&b.contextDep,!m&&b&&b.propDep,function(a,b){var f=a.shared.context,c=p;"width"in v||(c=b.def(f,".","framebufferWidth","-",h));var e=n;"height"in v||(e=b.def(f,".","framebufferHeight","-",Q));return[h,Q,c,e]})}if(a in r){var y=r[a],m=l(y,function(b,c){var e=
b.invoke(c,y);f.optional(function(){b.assert(c,e+"&&typeof "+e+'==="object"',"invalid "+a)});var q=b.shared.context,r=c.def(e,".x|0"),v=c.def(e,".y|0"),m=c.def('"width" in ',e,"?",e,".width|0:","(",q,".","framebufferWidth","-",r,")"),l=c.def('"height" in ',e,"?",e,".height|0:","(",q,".","framebufferHeight","-",v,")");f.optional(function(){b.assert(c,m+">=0&&"+l+">=0","invalid "+a)});return[r,v,m,l]});b&&(m.thisDep=m.thisDep||b.thisDep,m.contextDep=m.contextDep||b.contextDep,m.propDep=m.propDep||b.propDep);
return m}return b?new H(b.thisDep,b.contextDep,b.propDep,function(a,b){var f=a.shared.context;return[0,0,b.def(f,".","framebufferWidth"),b.def(f,".","framebufferHeight")]}):null}var q=a["static"],r=a.dynamic;if(a=e("viewport")){var v=a;a=new H(a.thisDep,a.contextDep,a.propDep,function(a,b){var f=v.append(a,b),c=a.shared.context;b.set(c,".viewportWidth",f[2]);b.set(c,".viewportHeight",f[3]);return f})}return{viewport:a,scissor_box:e("scissor.box")}}function r(a,b){var c=a["static"];if("string"===typeof c.frag&&
"string"===typeof c.vert){if(0<n(b.dynamic).length)return null;var c=b["static"],e=n(c);if(0<e.length&&"number"===typeof c[e[0]]){for(var q=[],r=0;r<e.length;++r)f("number"===typeof c[e[r]],"must specify all vertex attribute locations when using vaos"),q.push([c[e[r]]|0,e[r]]);return q}}return null}function G(a,b,c){function e(a){if(a in r){var b=y.id(r[a]);f.optional(function(){ja.shader(U[a],b,f.guessCommand())});var c=g(function(){return b});c.id=b;return c}if(a in q){var v=q[a];return l(v,function(b,
c){var e=b.invoke(c,v),r=c.def(b.shared.strings,".id(",e,")");f.optional(function(){c(b.shared.shader,".shader(",U[a],",",r,",",b.command,");")});return r})}return null}var r=a["static"],q=a.dynamic,v=e("frag"),m=e("vert"),h=null;J(v)&&J(m)?(h=ja.program(m.id,v.id,null,c),a=g(function(a,b){return a.link(h)})):a=new H(v&&v.thisDep||m&&m.thisDep,v&&v.contextDep||m&&m.contextDep,v&&v.propDep||m&&m.propDep,function(a,b){var c=a.shared.shader,e;e=v?v.append(a,b):b.def(c,".","frag");var r;r=m?m.append(a,
b):b.def(c,".","vert");var q=c+".program("+r+","+e;f.optional(function(){q+=","+a.command});return b.def(q+")")});return{frag:v,vert:m,progVar:a,program:h}}function ca(a,c){function e(a,b){if(a in r){var p=r[a]|0;b?v.offset=p:v.instances=p;f.command(!b||0<=p,"invalid "+a,c.commandStr);return g(function(a,f){b&&(a.OFFSET=p);return p})}if(a in q){var n=q[a];return l(n,function(c,e){var r=c.invoke(e,n);b&&(c.OFFSET=r,f.optional(function(){c.assert(e,r+">=0","invalid "+a)}));return r})}if(b){if(Q)return g(function(a,
b){return a.OFFSET=0});if(m)return new H(h.thisDep,h.contextDep,h.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(m)return new H(h.thisDep,h.contextDep,h.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var r=a["static"],q=a.dynamic,v={},m=!1,h=function(){if("vao"in r){var a=r.vao;null!==a&&null===z.getVAO(a)&&(a=z.createVAO(a));m=!0;v.vao=a;return g(function(b){var f=
z.getVAO(a);return f?b.link(f):"null"})}if("vao"in q){m=!0;var b=q.vao;return l(b,function(a,f){var c=a.invoke(f,b);return f.def(a.shared.vao+".getVAO("+c+")")})}return null}(),Q=!1,p=function(){if("elements"in r){var a=r.elements;v.elements=a;if(d(a)){var e=v.elements=b.create(a,!0),a=b.getElements(e);Q=!0}else a&&(a=b.getElements(a),Q=!0,f.command(a,"invalid elements",c.commandStr));e=g(function(b,f){if(a){var c=b.link(a);return b.ELEMENTS=c}return b.ELEMENTS=null});e.value=a;return e}if("elements"in
q){Q=!0;var p=q.elements;return l(p,function(a,b){var c=a.shared,e=c.isBufferArgs,c=c.elements,r=a.invoke(b,p),q=b.def("null"),e=b.def(e,"(",r,")"),v=a.cond(e).then(q,"=",c,".createStream(",r,");")["else"](q,"=",c,".getElements(",r,");");f.optional(function(){a.assert(v["else"],"!"+r+"||"+q,"invalid elements")});b.entry(v);b.exit(a.cond(e).then(c,".destroyStream(",q,");"));return a.ELEMENTS=q})}return m?new H(h.thisDep,h.contextDep,h.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),y=e("offset",!0),K=function(){if("primitive"in r){var a=r.primitive;v.primitive=a;f.commandParameter(a,W,"invalid primitve",c.commandStr);return g(function(b,f){return W[a]})}if("primitive"in q){var b=q.primitive;return l(b,function(a,c){var e=a.constants.primTypes,r=a.invoke(c,b);f.optional(function(){a.assert(c,r+" in "+e,"invalid primitive, must be one of "+n(W))});return c.def(e,"[",r,"]")})}return Q?J(p)?p.value?
g(function(a,b){return b.def(a.ELEMENTS,".primType")}):g(function(){return 4}):new H(p.thisDep,p.contextDep,p.propDep,function(a,b){var f=a.ELEMENTS;return b.def(f,"?",f,".primType:",4)}):m?new H(h.thisDep,h.contextDep,h.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),oa=function(){if("count"in r){var a=r.count|0;v.count=a;f.command("number"===typeof a&&0<=a,"invalid vertex count",c.commandStr);return g(function(){return a})}if("count"in
q){var b=q.count;return l(b,function(a,c){var e=a.invoke(c,b);f.optional(function(){a.assert(c,"typeof "+e+'==="number"&&'+e+">=0&&"+e+"===("+e+"|0)","invalid vertex count")});return e})}if(Q){if(J(p)){if(p)return y?new H(y.thisDep,y.contextDep,y.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);f.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")});return c}):g(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var e=g(function(){return-1});
f.optional(function(){e.MISSING=!0});return e}var n=new H(p.thisDep||y.thisDep,p.contextDep||y.contextDep,p.propDep||y.propDep,function(a,b){var f=a.ELEMENTS;return a.OFFSET?b.def(f,"?",f,".vertCount-",a.OFFSET,":-1"):b.def(f,"?",f,".vertCount:-1")});f.optional(function(){n.DYNAMIC=!0});return n}return m?new H(h.thisDep,h.contextDep,h.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),x=e("instances",!1);return{elements:p,primitive:K,count:oa,
instances:x,offset:y,vao:h,vaoActive:m,elementsActive:Q,"static":v}}function S(a,b){var r=a["static"],q=a.dynamic,v={};ta.forEach(function(a){function m(b,f){if(a in r){var c=b(r[a]);v[h]=g(function(){return c})}else if(a in q){var e=q[a];v[h]=l(e,function(a,b){return f(a,b,a.invoke(b,e))})}}var h=T(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return m(function(c){f.commandType(c,
"boolean",a,b.commandStr);return c},function(b,c,e){f.optional(function(){b.assert(c,"typeof "+e+'==="boolean"',"invalid flag "+a,b.commandStr)});return e});case "depth.func":return m(function(e){f.commandParameter(e,c,"invalid "+a,b.commandStr);return c[e]},function(b,e,r){var q=b.constants.compareFuncs;f.optional(function(){b.assert(e,r+" in "+q,"invalid "+a+", must be one of "+n(c))});return e.def(q,"[",r,"]")});case "depth.range":return m(function(a){f.command(u(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",b.commandStr);return a},function(a,b,c){f.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var e=b.def("+",c,"[0]"),r=b.def("+",c,"[1]");return[e,r]});case "blend.func":return m(function(a){f.commandType(a,"object","blend.func",b.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,e="srcAlpha"in a?a.srcAlpha:
a.src,r="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;f.commandParameter(c,B,h+".srcRGB",b.commandStr);f.commandParameter(e,B,h+".srcAlpha",b.commandStr);f.commandParameter(r,B,h+".dstRGB",b.commandStr);f.commandParameter(a,B,h+".dstAlpha",b.commandStr);f.command(-1===ha.indexOf(c+", "+r),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+r+")",b.commandStr);return[B[c],B[r],B[e],B[a]]},function(b,c,e){function r(v,m){var h=c.def('"',v,m,'" in ',e,"?",e,".",v,m,":",e,".",
v);f.optional(function(){b.assert(c,h+" in "+q,"invalid "+a+"."+v+m+", must be one of "+n(B))});return h}var q=b.constants.blendFuncs;f.optional(function(){b.assert(c,e+"&&typeof "+e+'==="object"',"invalid blend func, must be an object")});var v=r("src","RGB"),m=r("dst","RGB");f.optional(function(){b.assert(c,b.constants.invalidBlendCombinations+".indexOf("+v+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var h=c.def(q,"[",v,"]"),l=c.def(q,"[",r("src","Alpha"),"]"),
p=c.def(q,"[",m,"]"),Q=c.def(q,"[",r("dst","Alpha"),"]");return[h,p,l,Q]});case "blend.equation":return m(function(c){if("string"===typeof c)return f.commandParameter(c,Fa,"invalid "+a,b.commandStr),[Fa[c],Fa[c]];if("object"===typeof c)return f.commandParameter(c.rgb,Fa,a+".rgb",b.commandStr),f.commandParameter(c.alpha,Fa,a+".alpha",b.commandStr),[Fa[c.rgb],Fa[c.alpha]];f.commandRaise("invalid blend.equation",b.commandStr)},function(b,c,e){var r=b.constants.blendEquations,q=c.def(),v=c.def(),m=b.cond("typeof ",
e,'==="string"');f.optional(function(){function c(a,f,e){b.assert(a,e+" in "+r,"invalid "+f+", must be one of "+n(Fa))}c(m.then,a,e);b.assert(m["else"],e+"&&typeof "+e+'==="object"',"invalid "+a);c(m["else"],a+".rgb",e+".rgb");c(m["else"],a+".alpha",e+".alpha")});m.then(q,"=",v,"=",r,"[",e,"];");m["else"](q,"=",r,"[",e,".rgb];",v,"=",r,"[",e,".alpha];");c(m);return[q,v]});case "blend.color":return m(function(a){f.command(u(a)&&4===a.length,"blend.color must be a 4d array",b.commandStr);return O(4,
function(b){return+a[b]})},function(a,b,c){f.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return O(4,function(a){return b.def("+",c,"[",a,"]")})});case "stencil.mask":return m(function(a){f.commandType(a,"number",h,b.commandStr);return a|0},function(a,b,c){f.optional(function(){a.assert(b,"typeof "+c+'==="number"',"invalid stencil.mask")});return b.def(c,"|0")});case "stencil.func":return m(function(e){f.commandType(e,"object",
h,b.commandStr);var r=e.cmp||"keep",q=e.ref||0;e="mask"in e?e.mask:-1;f.commandParameter(r,c,a+".cmp",b.commandStr);f.commandType(q,"number",a+".ref",b.commandStr);f.commandType(e,"number",a+".mask",b.commandStr);return[c[r],q,e]},function(a,b,c){var e=a.constants.compareFuncs;f.optional(function(){function f(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}f(c+"&&typeof ",c,'==="object"');f('!("cmp" in ',c,")||(",c,".cmp in ",e,")")});var r=b.def('"cmp" in ',c,"?",e,"[",
c,".cmp]",":",7680),q=b.def(c,".ref|0"),m=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[r,q,m]});case "stencil.opFront":case "stencil.opBack":return m(function(c){f.commandType(c,"object",h,b.commandStr);var r=c.fail||"keep",q=c.zfail||"keep";c=c.zpass||"keep";f.commandParameter(r,e,a+".fail",b.commandStr);f.commandParameter(q,e,a+".zfail",b.commandStr);f.commandParameter(c,e,a+".zpass",b.commandStr);return["stencil.opBack"===a?1029:1028,e[r],e[q],e[c]]},function(b,c,r){function q(v){f.optional(function(){b.assert(c,
'!("'+v+'" in '+r+")||("+r+"."+v+" in "+m+")","invalid "+a+"."+v+", must be one of "+n(e))});return c.def('"',v,'" in ',r,"?",m,"[",r,".",v,"]:",7680)}var m=b.constants.stencilOps;f.optional(function(){b.assert(c,r+"&&typeof "+r+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,q("fail"),q("zfail"),q("zpass")]});case "polygonOffset.offset":return m(function(a){f.commandType(a,"object",h,b.commandStr);var c=a.factor|0;a=a.units|0;f.commandType(c,"number",h+".factor",b.commandStr);
f.commandType(a,"number",h+".units",b.commandStr);return[c,a]},function(b,c,e){f.optional(function(){b.assert(c,e+"&&typeof "+e+'==="object"',"invalid "+a)});var r=c.def(e,".factor|0"),q=c.def(e,".units|0");return[r,q]});case "cull.face":return m(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);f.command(!!c,h,b.commandStr);return c},function(a,b,c){f.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return b.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return m(function(a){f.command("number"===
typeof a&&a>=D.lineWidthDims[0]&&a<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+" and "+D.lineWidthDims[1],b.commandStr);return a},function(a,b,c){f.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+D.lineWidthDims[0]+"&&"+c+"<="+D.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return m(function(a){f.commandParameter(a,p,h,b.commandStr);return p[a]},function(a,b,c){f.optional(function(){a.assert(b,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(c+'==="cw"?2304:2305')});case "colorMask":return m(function(a){f.command(u(a)&&4===a.length,"color.mask must be length 4 array",b.commandStr);return a.map(function(a){return!!a})},function(a,b,c){f.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return O(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return m(function(a){f.command("object"===typeof a&&a,
h,b.commandStr);var c="value"in a?a.value:1;a=!!a.invert;f.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",b.commandStr);return[c,a]},function(a,b,c){f.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var e=b.def('"value" in ',c,"?+",c,".value:1"),r=b.def("!!",c,".invert");return[e,r]})}});return v}function ma(a,b){var c=a["static"],e=a.dynamic,r={};n(c).forEach(function(a){var e=c[a],q;if("number"===typeof e||
"boolean"===typeof e)q=g(function(){return e});else if("function"===typeof e){var m=e._reglType;"texture2d"===m||"textureCube"===m?q=g(function(a){return a.link(e)}):"framebuffer"===m||"framebufferCube"===m?(f.command(0<e.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',b.commandStr),q=g(function(a){return a.link(e.color[0])})):f.commandRaise('invalid data for uniform "'+a+'"',b.commandStr)}else u(e)?q=g(function(b){return b.global.def("[",O(e.length,function(c){f.command("number"===
typeof e[c]||"boolean"===typeof e[c],"invalid uniform "+a,b.commandStr);return e[c]}),"]")}):f.commandRaise('invalid or missing data for uniform "'+a+'"',b.commandStr);q.value=e;r[a]=q});n(e).forEach(function(a){var b=e[a];r[a]=l(b,function(a,c){return a.invoke(c,b)})});return r}function ra(a,b){var c=a["static"],e=a.dynamic,r={};n(c).forEach(function(a){var e=c[a],q=y.id(a),m=new sa;if(d(e))m.state=1,m.buffer=E.getBuffer(E.create(e,34962,!1,!0)),m.type=0;else{var v=E.getBuffer(e);if(v)m.state=1,
m.buffer=v,m.type=0;else if(f.command("object"===typeof e&&e,"invalid data for attribute "+a,b.commandStr),"constant"in e){var h=e.constant;m.buffer="null";m.state=2;"number"===typeof h?m.x=h:(f.command(u(h)&&0<h.length&&4>=h.length,"invalid constant for attribute "+a,b.commandStr),N.forEach(function(a,b){b<h.length&&(m[a]=h[b])}))}else{v=d(e.buffer)?E.getBuffer(E.create(e.buffer,34962,!1,!0)):E.getBuffer(e.buffer);f.command(!!v,'missing buffer for attribute "'+a+'"',b.commandStr);var l=e.offset|
0;f.command(0<=l,'invalid offset for attribute "'+a+'"',b.commandStr);var p=e.stride|0;f.command(0<=p&&256>p,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',b.commandStr);var Q=e.size|0;f.command(!("size"in e)||0<Q&&4>=Q,'invalid size for attribute "'+a+'", must be 1,2,3,4',b.commandStr);var K=!!e.normalized,oa=0;"type"in e&&(f.commandParameter(e.type,t,"invalid type for attribute "+a,b.commandStr),oa=t[e.type]);var x=e.divisor|0;f.optional(function(){"divisor"in e&&(f.command(0===
x||na,'cannot specify divisor for attribute "'+a+'", instancing not supported',b.commandStr),f.command(0<=x,'invalid divisor for attribute "'+a+'"',b.commandStr));var c=b.commandStr,r="buffer offset divisor normalized type size stride".split(" ");n(e).forEach(function(b){f.command(0<=r.indexOf(b),'unknown parameter "'+b+'" for attribute pointer "'+a+'" (valid parameters are '+r+")",c)})});m.buffer=v;m.state=1;m.size=Q;m.normalized=K;m.type=oa||v.dtype;m.offset=l;m.stride=p;m.divisor=x}}r[a]=g(function(a,
b){var c=a.attribCache;if(q in c)return c[q];var e={isStream:!1};n(m).forEach(function(a){e[a]=m[a]});m.buffer&&(e.buffer=a.link(m.buffer),e.type=e.type||e.buffer+".dtype");return c[q]=e})});n(e).forEach(function(a){var b=e[a];r[a]=l(b,function(c,e){function r(a){e(p[a],"=",m,".",a,"|0;")}var m=c.invoke(e,b),q=c.shared,v=c.constants,h=q.isBufferArgs,l=q.buffer;f.optional(function(){c.assert(e,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+h+"("+m+")||"+l+".getBuffer("+m+")||"+l+".getBuffer("+
m+".buffer)||"+h+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+q.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+a+'"')});var p={isStream:e.def(!1)},Q=new sa;Q.state=1;n(Q).forEach(function(a){p[a]=e.def(""+Q[a])});var y=p.buffer,K=p.type;e("if(",h,"(",m,")){",p.isStream,"=true;",y,"=",l,".createStream(",34962,",",m,");",K,"=",y,".dtype;","}else{",y,"=",l,".getBuffer(",m,");","if(",y,"){",K,"=",y,".dtype;",'}else if("constant" in ',m,"){",p.state,"=",
2,";","if(typeof "+m+'.constant === "number"){',p[N[0]],"=",m,".constant;",N.slice(1).map(function(a){return p[a]}).join("="),"=0;","}else{",N.map(function(a,b){return p[a]+"="+m+".constant.length>"+b+"?"+m+".constant["+b+"]:0;"}).join(""),"}}else{","if(",h,"(",m,".buffer)){",y,"=",l,".createStream(",34962,",",m,".buffer);","}else{",y,"=",l,".getBuffer(",m,".buffer);","}",K,'="type" in ',m,"?",v.glTypes,"[",m,".type]:",y,".dtype;",p.normalized,"=!!",m,".normalized;");r("size");r("offset");r("stride");
r("divisor");e("}}");e.exit("if(",p.isStream,"){",l,".destroyStream(",y,");","}");return p})});return r}function za(a){var b=a["static"],c=a.dynamic,e={};n(b).forEach(function(a){var c=b[a];e[a]=g(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});n(c).forEach(function(a){var b=c[a];e[a]=l(b,function(a,c){return a.invoke(c,b)})});return e}function ya(a,b,c,e,m){function q(a){var b=Q[a];b&&(K[a]=b)}var v=a["static"],h=a.dynamic;f.optional(function(){function a(c){n(c).forEach(function(a){f.command(0<=
b.indexOf(a),'unknown parameter "'+a+'"',m.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);a(v);a(h)});var l=r(a,b),p=wa(a,m),Q=qa(a,p,m),y=ca(a,m),K=S(a,m),oa=G(a,m,l);q("viewport");q(T("scissor.box"));var x=0<n(K).length,p={framebuffer:p,draw:y,shader:oa,state:K,dirty:x,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};p.profile=P(a,m);p.uniforms=ma(c,m);p.drawVAO=p.scopeVAO=y.vao;if(!p.drawVAO&&oa.program&&!l&&k.angle_instanced_arrays&&
y["static"].elements){var w=!0;a=oa.program.attributes.map(function(a){a=b["static"][a];w=w&&!!a;return a});if(w&&0<a.length){var sa=z.getVAO(z.createVAO({attributes:a,elements:y["static"].elements}));p.drawVAO=new H(null,null,null,function(a,b){return a.link(sa)});p.useVAO=!0}}l?p.useVAO=!0:p.attributes=ra(b,m);p.context=za(e,m);return p}function ga(a,b,c){var e=a.shared.context,f=a.scope();n(c).forEach(function(m){b.save(e,"."+m);var r=c[m].append(a,b);Array.isArray(r)?f(e,".",m,"=[",r.join(),"];"):
f(e,".",m,"=",r,";")});b(f)}function Ca(a,b,c,e){var f=a.shared,m=f.gl,r=f.framebuffer,q;Aa&&(q=b.def(f.extensions,".webgl_draw_buffers"));var v=a.constants,f=v.drawBuffer,v=v.backBuffer;a=c?c.append(a,b):b.def(r,".next");e||b("if(",a,"!==",r,".cur){");b("if(",a,"){",m,".bindFramebuffer(",36160,",",a,".framebuffer);");Aa&&b(q,".drawBuffersWEBGL(",f,"[",a,".colorAttachments.length]);");b("}else{",m,".bindFramebuffer(",36160,",null);");Aa&&b(q,".drawBuffersWEBGL(",v,");");b("}",r,".cur=",a,";");e||
b("}")}function ka(a,b,c){var e=a.shared,f=e.gl,m=a.current,r=a.next,q=e.current,v=e.next,h=a.cond(q,".dirty");ta.forEach(function(b){b=T(b);if(!(b in c.state)){var e,l;if(b in r){e=r[b];l=m[b];var p=O(la[b].length,function(a){return h.def(e,"[",a,"]")});h(a.cond(p.map(function(a,b){return a+"!=="+l+"["+b+"]"}).join("||")).then(f,".",Da[b],"(",p,");",p.map(function(a,b){return l+"["+b+"]="+a}).join(";"),";"))}else e=h.def(v,".",b),p=a.cond(e,"!==",q,".",b),h(p),b in Ia?p(a.cond(e).then(f,".enable(",
Ia[b],");")["else"](f,".disable(",Ia[b],");"),q,".",b,"=",e,";"):p(f,".",Da[b],"(",e,");",q,".",b,"=",e,";")}});0===n(c.state).length&&h(q,".dirty=false;");b(h)}function pa(a,b,c,e){var f=a.shared,m=a.current,r=f.current,q=f.gl;V(n(c)).forEach(function(f){var v=c[f];if(!e||e(v)){var h=v.append(a,b);if(Ia[f]){var l=Ia[f];J(v)?h?b(q,".enable(",l,");"):b(q,".disable(",l,");"):b(a.cond(h).then(q,".enable(",l,");")["else"](q,".disable(",l,");"));b(r,".",f,"=",h,";")}else if(u(h)){var p=m[f];b(q,".",Da[f],
"(",h,");",h.map(function(a,b){return p+"["+b+"]="+a}).join(";"),";")}else b(q,".",Da[f],"(",h,");",r,".",f,"=",h,";")}})}function xa(a,b){na&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function La(a,b,c,e,f){function m(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function r(a){y=b.def();a(y,"=",m(),";");"string"===typeof f?a(l,".count+=",f,";"):a(l,".count++;");fa&&(e?(n=b.def(),a(n,"=",Q,".getNumPendingQueries();")):a(Q,".beginQuery(",l,");"))}
function q(a){a(l,".cpuTime+=",m(),"-",y,";");fa&&(e?a(Q,".pushScopeStats(",n,",",Q,".getNumPendingQueries(),",l,");"):a(Q,".endQuery();"))}function v(a){var c=b.def(p,".profile");b(p,".profile=",a,";");b.exit(p,".profile=",c,";")}var h=a.shared,l=a.stats,p=h.current,Q=h.timer;c=c.profile;var y,n;if(c){if(J(c)){c.enable?(r(b),q(b.exit),v("true")):v("false");return}c=c.append(a,b);v(c)}else c=b.def(p,".profile");h=a.block();r(h);b("if(",c,"){",h,"}");a=a.block();q(a);b.exit("if(",c,"){",a,"}")}function oa(a,
b,c,e,m){function r(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function q(c,e,f){function m(){b("if(!",p,".buffer){",h,".enableVertexAttribArray(",l,");}");var c=f.type,r;r=f.size?b.def(f.size,"||",e):e;b("if(",p,".type!==",c,"||",p,".size!==",r,"||",n.map(function(a){return p+"."+a+"!=="+f[a]}).join("||"),"){",h,".bindBuffer(",34962,",",Q,".buffer);",h,".vertexAttribPointer(",[l,r,c,
f.normalized,f.stride,f.offset],");",p,".type=",c,";",p,".size=",r,";",n.map(function(a){return p+"."+a+"="+f[a]+";"}).join(""),"}");na&&(c=f.divisor,b("if(",p,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[l,c],");",p,".divisor=",c,";}"))}function r(){b("if(",p,".buffer){",h,".disableVertexAttribArray(",l,");",p,".buffer=null;","}if(",N.map(function(a,b){return p+"."+a+"!=="+y[b]}).join("||"),"){",h,".vertexAttrib4f(",l,",",y,");",N.map(function(a,b){return p+"."+a+"="+y[b]+";"}).join(""),
"}")}var h=v.gl,l=b.def(c,".location"),p=b.def(v.attributes,"[",l,"]");c=f.state;var Q=f.buffer,y=[f.x,f.y,f.z,f.w],n=["buffer","normalized","offset","stride"];1===c?m():2===c?r():(b("if(",c,"===",1,"){"),m(),b("}else{"),r(),b("}"))}var v=a.shared;e.forEach(function(e){var v=e.name,h=c.attributes[v],l;if(h){if(!m(h))return;l=h.append(a,b)}else{if(!m(Z))return;var p=a.scopeAttrib(v);f.optional(function(){a.assert(b,p+".state","missing attribute "+v)});l={};n(new sa).forEach(function(a){l[a]=b.def(p,
".",a)})}q(a.link(e),r(e.info.type),l)})}function fb(a,b,c,e,m,r){for(var q=a.shared,v=q.gl,h,l=0;l<e.length;++l){var p=e[l],Q=p.name,n=p.info.type,K=c.uniforms[Q],p=a.link(p)+".location",oa;if(K){if(!m(K))continue;if(J(K)){var x=K.value;f.command(null!==x&&"undefined"!==typeof x,'missing uniform "'+Q+'"',a.commandStr);if(35678===n||35680===n)f.command("function"===typeof x&&(35678===n&&("texture2d"===x._reglType||"framebuffer"===x._reglType)||35680===n&&("textureCube"===x._reglType||"framebufferCube"===
x._reglType)),"invalid texture for uniform "+Q,a.commandStr),K=a.link(x._texture||x.color[0]._texture),b(v,".uniform1i(",p,",",K+".bind());"),b.exit(K,".unbind();");else if(35674===n||35675===n||35676===n){f.optional(function(){f.command(u(x),"invalid matrix for uniform "+Q,a.commandStr);f.command(35674===n&&4===x.length||35675===n&&9===x.length||35676===n&&16===x.length,"invalid length for matrix uniform "+Q,a.commandStr)});var K=a.global.def("new Float32Array(["+Array.prototype.slice.call(x)+"])"),
w=2;35675===n?w=3:35676===n&&(w=4);b(v,".uniformMatrix",w,"fv(",p,",false,",K,");")}else{switch(n){case 5126:f.commandType(x,"number","uniform "+Q,a.commandStr);h="1f";break;case 35664:f.command(u(x)&&2===x.length,"uniform "+Q,a.commandStr);h="2f";break;case 35665:f.command(u(x)&&3===x.length,"uniform "+Q,a.commandStr);h="3f";break;case 35666:f.command(u(x)&&4===x.length,"uniform "+Q,a.commandStr);h="4f";break;case 35670:f.commandType(x,"boolean","uniform "+Q,a.commandStr);h="1i";break;case 5124:f.commandType(x,
"number","uniform "+Q,a.commandStr);h="1i";break;case 35671:f.command(u(x)&&2===x.length,"uniform "+Q,a.commandStr);h="2i";break;case 35667:f.command(u(x)&&2===x.length,"uniform "+Q,a.commandStr);h="2i";break;case 35672:f.command(u(x)&&3===x.length,"uniform "+Q,a.commandStr);h="3i";break;case 35668:f.command(u(x)&&3===x.length,"uniform "+Q,a.commandStr);h="3i";break;case 35673:f.command(u(x)&&4===x.length,"uniform "+Q,a.commandStr);h="4i";break;case 35669:f.command(u(x)&&4===x.length,"uniform "+Q,
a.commandStr),h="4i"}b(v,".uniform",h,"(",p,",",u(x)?Array.prototype.slice.call(x):x,");")}continue}else oa=K.append(a,b)}else{if(!m(Z))continue;oa=b.def(q.uniforms,"[",y.id(Q),"]")}35678===n?(f(!Array.isArray(oa),"must specify a scalar prop for textures"),b("if(",oa,"&&",oa,'._reglType==="framebuffer"){',oa,"=",oa,".color[0];","}")):35680===n&&(f(!Array.isArray(oa),"must specify a scalar prop for cube maps"),b("if(",oa,"&&",oa,'._reglType==="framebufferCube"){',oa,"=",oa,".color[0];","}"));f.optional(function(){function c(e,
f){a.assert(b,e,'bad data or missing for uniform "'+Q+'".  '+f)}function e(a){f(!Array.isArray(oa),"must not specify an array type for uniform");c("typeof "+oa+'==="'+a+'"',"invalid type, expected "+a)}function m(b,e){Array.isArray(oa)?f(oa.length===b,"must have length "+b):c(q.isArrayLike+"("+oa+")&&"+oa+".length==="+b,"invalid vector, should have length "+b,a.commandStr)}function r(b){f(!Array.isArray(oa),"must not specify a value type");c("typeof "+oa+'==="function"&&'+oa+'._reglType==="texture'+
(3553===b?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(n){case 5124:e("number");break;case 35667:m(2,"number");break;case 35668:m(3,"number");break;case 35669:m(4,"number");break;case 5126:e("number");break;case 35664:m(2,"number");break;case 35665:m(3,"number");break;case 35666:m(4,"number");break;case 35670:e("boolean");break;case 35671:m(2,"boolean");break;case 35672:m(3,"boolean");break;case 35673:m(4,"boolean");break;case 35674:m(4,"number");break;case 35675:m(9,"number");break;
case 35676:m(16,"number");break;case 35678:r(3553);break;case 35680:r(34067)}});K=1;switch(n){case 35678:case 35680:K=b.def(oa,"._texture");b(v,".uniform1i(",p,",",K,".bind());");b.exit(K,".unbind();");continue;case 5124:case 35670:h="1i";break;case 35667:case 35671:h="2i";K=2;break;case 35668:case 35672:h="3i";K=3;break;case 35669:case 35673:h="4i";K=4;break;case 5126:h="1f";break;case 35664:h="2f";K=2;break;case 35665:h="3f";K=3;break;case 35666:h="4f";K=4;break;case 35674:h="Matrix2fv";break;case 35675:h=
"Matrix3fv";break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){b(v,".uniform",h,"(",p,",");var p=Math.pow(n-35674+2,2),T=a.global.def("new Float32Array(",p,")");Array.isArray(oa)?b("false,(",O(p,function(a){return T+"["+a+"]="+oa[a]}),",",T,")"):b("false,(Array.isArray(",oa,")||",oa," instanceof Float32Array)?",oa,":(",O(p,function(a){return T+"["+a+"]="+oa+"["+a+"]"}),",",T,")");b(");")}else{if(1<K){for(var w=[],sa=[],La=0;La<K;++La)Array.isArray(oa)?sa.push(oa[La]):sa.push(b.def(oa+"["+La+"]")),
r&&w.push(b.def());r&&b("if(!",a.batchId,"||",w.map(function(a,b){return a+"!=="+sa[b]}).join("||"),"){",w.map(function(a,b){return a+"="+sa[b]+";"}).join(""));b(v,".uniform",h,"(",p,",",sa.join(","),");")}else f(!Array.isArray(oa),"uniform value must not be an array"),r&&(K=b.def(),b("if(!",a.batchId,"||",K,"!==",oa,"){",K,"=",oa,";")),b(v,".uniform",h,"(",p,",",oa,");");r&&b("}")}}}function Ta(a,b,c,e){function m(f){var r=l[f];return r?r.contextDep&&e.contextDynamic||r.propDep?r.append(a,c):r.append(a,
b):b.def(p,".",f)}function r(){function a(){c(x,".drawElementsInstancedANGLE(",[n,K,w,oa+"<<(("+w+"-5121)>>1)",y],");")}function b(){c(x,".drawArraysInstancedANGLE(",[n,oa,K,y],");")}Q&&"null"!==Q?T?a():(c("if(",Q,"){"),a(),c("}else{"),b(),c("}")):b()}function q(){function a(){c(h+".drawElements("+[n,K,w,oa+"<<(("+w+"-5121)>>1)"]+");")}function b(){c(h+".drawArrays("+[n,oa,K]+");")}Q&&"null"!==Q?T?a():(c("if(",Q,"){"),a(),c("}else{"),b(),c("}")):b()}var v=a.shared,h=v.gl,p=v.draw,l=e.draw,Q=function(){var f=
l.elements,m=b;if(f){if(f.contextDep&&e.contextDynamic||f.propDep)m=c;f=f.append(a,m);l.elementsActive&&m("if("+f+")"+h+".bindBuffer(34963,"+f+".buffer.buffer);")}else f=m.def(),m(f,"=",p,".","elements",";","if(",f,"){",h,".bindBuffer(",34963,",",f,".buffer.buffer);}","else if(",v.vao,".currentVAO){",f,"=",a.shared.elements+".getElements("+v.vao,".currentVAO.elements);",Ea?"":"if("+f+")"+h+".bindBuffer(34963,"+f+".buffer.buffer);","}");return f}(),n=m("primitive"),oa=m("offset"),K=function(){var m=
l.count,r,q=b;if(m){if(m.contextDep&&e.contextDynamic||m.propDep)q=c;r=m.append(a,q);f.optional(function(){m.MISSING&&a.assert(b,"false","missing vertex count");m.DYNAMIC&&a.assert(q,r+">=0","missing vertex count")})}else r=q.def(p,".","count"),f.optional(function(){a.assert(q,r+">=0","missing vertex count")});return r}();if("number"===typeof K){if(0===K)return}else c("if(",K,"){"),c.exit("}");var y,x;na&&(y=m("instances"),x=a.instancing);var w=Q+".type",T=l.elements&&J(l.elements)&&!l.vaoActive;
na&&("number"!==typeof y||0<=y)?"string"===typeof y?(c("if(",y,">0){"),r(),c("}else if(",y,"<0){"),q(),c("}")):r():q()}function v(a,b,c,e,m){var r=M();m=r.proc("body",m);f.optional(function(){r.commandStr=b.commandStr;r.command=r.link(b.commandStr)});na&&(r.instancing=m.def(r.shared.extensions,".angle_instanced_arrays"));a(r,m,c,e);return r.compile().body}function m(a,b,c,e){xa(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):
(b(a.shared.vao,".setVAO(null);"),oa(a,b,c,e.attributes,function(){return!0}));fb(a,b,c,e.uniforms,function(){return!0},!1);Ta(a,b,b,c)}function K(a,b){var c=a.proc("draw",1);xa(a,c);ga(a,c,b.context);Ca(a,c,b.framebuffer);ka(a,c,b);pa(a,c,b.state);La(a,c,b,!1,!0);var e=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",e,".program);");if(b.shader.program)m(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var f=a.global.def("{}"),r=c.def(e,".id"),q=c.def(f,"[",r,"]");c(a.cond(q).then(q,
".call(this,a0);")["else"](q,"=",f,"[",r,"]=",a.link(function(c){return v(m,a,b,c,1)}),"(",e,");",q,".call(this,a0);"))}0<n(b.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function ua(a,b,c,e){function f(){return!0}a.batchId="a1";xa(a,b);oa(a,b,c,e.attributes,f);fb(a,b,c,e.uniforms,f,!1);Ta(a,b,b,c)}function Ba(a,b,c,e){function f(a){return a.contextDep&&r||a.propDep}function m(a){return!f(a)}xa(a,b);var r=c.contextDep,q=b.def(),h=b.def();a.shared.props=
h;a.batchId=q;var p=a.scope(),l=a.scope();b(p.entry,"for(",q,"=0;",q,"<","a1",";++",q,"){",h,"=","a0","[",q,"];",l,"}",p.exit);c.needsContext&&ga(a,l,c.context);c.needsFramebuffer&&Ca(a,l,c.framebuffer);pa(a,l,c.state,f);c.profile&&f(c.profile)&&La(a,l,c,!1,!0);e?(c.useVAO?c.drawVAO?f(c.drawVAO)?l(a.shared.vao,".setVAO(",c.drawVAO.append(a,l),");"):p(a.shared.vao,".setVAO(",c.drawVAO.append(a,p),");"):p(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(p(a.shared.vao,".setVAO(null);"),oa(a,p,
c,e.attributes,m),oa(a,l,c,e.attributes,f)),fb(a,p,c,e.uniforms,m,!1),fb(a,l,c,e.uniforms,f,!0),Ta(a,p,l,c)):(b=a.global.def("{}"),e=c.shader.progVar.append(a,l),h=l.def(e,".id"),p=l.def(b,"[",h,"]"),l(a.shared.gl,".useProgram(",e,".program);","if(!",p,"){",p,"=",b,"[",h,"]=",a.link(function(b){return v(ua,a,c,b,2)}),"(",e,");}",p,".call(this,a0[",q,"],",q,");"))}function dd(a,b){function c(a){return a.contextDep&&f||a.propDep}var e=a.proc("batch",2);a.batchId="0";xa(a,e);var f=!1,m=!0;n(b.context).forEach(function(a){f=
f||b.context[a].propDep});f||(ga(a,e,b.context),m=!1);var r=b.framebuffer,q=!1;r?(r.propDep?f=q=!0:r.contextDep&&f&&(q=!0),q||Ca(a,e,r)):Ca(a,e,null);b.state.viewport&&b.state.viewport.propDep&&(f=!0);ka(a,e,b);pa(a,e,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||La(a,e,b,!1,"a1");b.contextDep=f;b.needsContext=m;b.needsFramebuffer=q;m=b.shader.progVar;if(m.contextDep&&f||m.propDep)Ba(a,e,b,null);else if(m=m.append(a,e),e(a.shared.gl,".useProgram(",m,".program);"),b.shader.program)Ba(a,
e,b,b.shader.program);else{e(a.shared.vao,".setVAO(null);");var r=a.global.def("{}"),q=e.def(m,".id"),h=e.def(r,"[",q,"]");e(a.cond(h).then(h,".call(this,a0,a1);")["else"](h,"=",r,"[",q,"]=",a.link(function(c){return v(Ba,a,b,c,2)}),"(",m,");",h,".call(this,a0,a1);"))}0<n(b.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function Hb(a,b){function c(m){var r=b.shader[m];r&&e.set(f.shader,"."+m,r.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var f=
a.shared,m=f.current;ga(a,e,b.context);b.framebuffer&&b.framebuffer.append(a,e);V(n(b.state)).forEach(function(c){var m=b.state[c].append(a,e);u(m)?m.forEach(function(b,f){e.set(a.next[c],"["+f+"]",b)}):e.set(f.next,"."+c,m)});La(a,e,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var m=b.draw[c];m&&e.set(f.draw,"."+c,""+m.append(a,e))});n(b.uniforms).forEach(function(c){var m=b.uniforms[c].append(a,e);Array.isArray(m)&&(m="["+m.join()+"]");e.set(f.uniforms,"["+
y.id(c)+"]",m)});n(b.attributes).forEach(function(c){var f=b.attributes[c].append(a,e),m=a.scopeAttrib(c);n(new sa).forEach(function(a){e.set(m,"."+a,f[a])})});b.scopeVAO&&e.set(f.vao,".targetVAO",b.scopeVAO.append(a,e));c("vert");c("frag");0<n(b.state).length&&(e(m,".dirty=true;"),e.exit(m,".dirty=true;"));e("a1(",a.shared.context,",a0,",a.batchId,");")}function ia(a){if("object"===typeof a&&!u(a)){for(var b=n(a),c=0;c<b.length;++c)if(L.isDynamic(a[b[c]]))return!0;return!1}}function Q(a,b,c){function e(a,
b){r.forEach(function(c){var e=f[c];L.isDynamic(e)&&(e=a.invoke(b,e),b(p,".",c,"=",e,";"))})}var f=b["static"][c];if(f&&ia(f)){var m=a.global,r=n(f),q=!1,h=!1,v=!1,p=a.global.def("{}");r.forEach(function(b){var c=f[b];if(L.isDynamic(c))"function"===typeof c&&(c=f[b]=L.unbox(c)),b=l(c,null),q=q||b.thisDep,v=v||b.propDep,h=h||b.contextDep;else{m(p,".",b,"=");switch(typeof c){case "number":m(c);break;case "string":m('"',c,'"');break;case "object":Array.isArray(c)&&m("[",c.join(),"]");break;default:m(a.link(c))}m(";")}});
b.dynamic[c]=new L.DynamicVariable(4,{thisDep:q,contextDep:h,propDep:v,ref:p,append:e});delete b["static"][c]}}var sa=z.Record,Fa={add:32774,subtract:32778,"reverse subtract":32779};k.ext_blend_minmax&&(Fa.min=32775,Fa.max=32776);var na=k.angle_instanced_arrays,Aa=k.webgl_draw_buffers,Ea=k.oes_vertex_array_object,la={dirty:!0,profile:R.profile},Y={},ta=[],Ia={},Da={};A("dither",3024);A("blend.enable",3042);q("blend.color","blendColor",[0,0,0,0]);q("blend.equation","blendEquationSeparate",[32774,32774]);
q("blend.func","blendFuncSeparate",[1,0,1,0]);A("depth.enable",2929,!0);q("depth.func","depthFunc",513);q("depth.range","depthRange",[0,1]);q("depth.mask","depthMask",!0);q("colorMask","colorMask",[!0,!0,!0,!0]);A("cull.enable",2884);q("cull.face","cullFace",1029);q("frontFace","frontFace",2305);q("lineWidth","lineWidth",1);A("polygonOffset.enable",32823);q("polygonOffset.offset","polygonOffset",[0,0]);A("sample.alpha",32926);A("sample.enable",32928);q("sample.coverage","sampleCoverage",[1,!1]);A("stencil.enable",
2960);q("stencil.mask","stencilMask",-1);q("stencil.func","stencilFunc",[519,0,-1]);q("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);q("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);A("scissor.enable",3089);q("scissor.box","scissor",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);q("viewport","viewport",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);var hb={gl:h,context:X,strings:y,next:Y,current:la,draw:gd,elements:b,buffer:E,shader:ja,attributes:z.state,vao:z,uniforms:I,
framebuffer:a,extensions:k,timer:fa,isBufferArgs:d},ea={primTypes:W,compareFuncs:c,blendFuncs:B,blendEquations:Fa,stencilOps:e,glTypes:t,orientationType:p};f.optional(function(){hb.isArrayLike=u});Aa&&(ea.backBuffer=[1029],ea.drawBuffer=O(D.maxDrawbuffers,function(a){return 0===a?[0]:O(a,function(a){return 36064+a})}));var zd=0;return{next:Y,current:la,procs:function(){var a=M(),b=a.proc("poll"),c=a.proc("refresh"),e=a.block();b(e);c(e);var f=a.shared,m=f.gl,r=f.next,q=f.current;e(q,".dirty=false;");
Ca(a,b);Ca(a,c,null,!0);var h;na&&(h=a.link(na));k.oes_vertex_array_object&&c(a.link(k.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var v=0;v<D.maxAttributes;++v){var p=c.def(f.attributes,"[",v,"]"),l=a.cond(p,".buffer");l.then(m,".enableVertexAttribArray(",v,");",m,".bindBuffer(",34962,",",p,".buffer.buffer);",m,".vertexAttribPointer(",v,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);")["else"](m,".disableVertexAttribArray(",v,");",m,".vertexAttrib4f(",v,",",p,
".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;");c(l);na&&c(h,".vertexAttribDivisorANGLE(",v,",",p,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");n(Ia).forEach(function(f){var h=Ia[f],v=e.def(r,".",f),p=a.block();p("if(",v,"){",m,".enable(",h,")}else{",m,".disable(",h,")}",q,".",f,"=",v,";");c(p);b("if(",v,"!==",q,".",f,"){",p,"}")});n(Da).forEach(function(f){var v=Da[f],h=la[f],p,l,Q=a.block();Q(m,".",v,"(");u(h)?(v=h.length,p=a.global.def(r,
".",f),l=a.global.def(q,".",f),Q(O(v,function(a){return p+"["+a+"]"}),");",O(v,function(a){return l+"["+a+"]="+p+"["+a+"];"}).join("")),b("if(",O(v,function(a){return p+"["+a+"]!=="+l+"["+a+"]"}).join("||"),"){",Q,"}")):(p=e.def(r,".",f),l=e.def(q,".",f),Q(p,");",q,".",f,"=",p,";"),b("if(",p,"!==",l,"){",Q,"}"));c(Q)});return a.compile()}(),compile:function(a,b,c,e,f){var m=M();m.stats=m.link(f);n(b["static"]).forEach(function(a){Q(m,b,a)});w.forEach(function(b){Q(m,a,b)});var r=ya(a,b,c,e,m);K(m,
r);Hb(m,r);dd(m,r);return F(m.compile(),{destroy:function(){r.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(aa,ba,Ma){function d(n,f){this.id=l++;this.type=n;this.data=f}function V(l){if(0===l.length)return[];var f=l.charAt(0),g=l.charAt(l.length-
1);if(1<l.length&&f===g&&('"'===f||"'"===f))return['"'+l.substr(1,l.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(l))return V(l.substr(0,f.index)).concat(V(f[1])).concat(V(l.substr(f.index+f[0].length)));f=l.split(".");if(1===f.length)return['"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];l=[];for(g=0;g<f.length;++g)l=l.concat(V(f[g]));return l}function H(l){return"["+V(l).join("][")+"]"}function J(l,f){if("function"===typeof l)return new d(0,
l);if("number"===typeof l||"boolean"===typeof l)return new d(5,l);if(Array.isArray(l))return new d(6,l.map(function(l,n){return J(l,f+"["+n+"]")}));if(l instanceof d)return l;g(!1,"invalid option type in uniform "+f)}var g=aa("./util/check"),l=0;ba.exports={DynamicVariable:d,define:function(l,f){return new d(l,H(f+""))},isDynamic:function(l){return"function"===typeof l&&!l._reglType||l instanceof d},unbox:J,accessor:H}},{"./util/check":21}],10:[function(aa,ba,Ma){var d=aa("./util/check"),V=aa("./util/is-typed-array"),
H=aa("./util/is-ndarray"),J=aa("./util/values"),g=aa("./constants/primitives.json"),l=aa("./constants/usage.json");ba.exports=function(n,f,F,C){function O(f){this.id=L++;u[this.id]=this;this.buffer=f;this.primType=4;this.type=this.vertCount=0}function I(l,w,g,t,c,e,U){l.buffer.bind();var p;w?((p=U)||V(w)&&(!H(w)||V(w.data))||(p=f.oes_element_index_uint?5125:5123),F._initBuffer(l.buffer,w,g,p,3)):(n.bufferData(34963,e,g),l.buffer.dtype=p||5121,l.buffer.usage=g,l.buffer.dimension=3,l.buffer.byteLength=
e);p=U;if(!U){switch(l.buffer.dtype){case 5121:case 5120:p=5121;break;case 5123:case 5122:p=5123;break;case 5125:case 5124:p=5125;break;default:d.raise("unsupported type for element array")}l.buffer.dtype=p}l.type=p;d(5125!==p||!!f.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");w=c;0>w&&(w=l.buffer.byteLength,5123===p?w>>=1:5125===p&&(w>>=2));l.vertCount=w;w=t;0>t&&(w=4,t=l.buffer.dimension,1===t&&(w=0),2===t&&(w=1),3===t&&(w=4));l.primType=w}function k(f){C.elementsCount--;
d(null!==f.buffer,"must not double destroy elements");delete u[f.id];f.buffer.destroy();f.buffer=null}var u={},L=0,W={uint8:5121,uint16:5123};f.oes_element_index_uint&&(W.uint32=5125);O.prototype.bind=function(){this.buffer.bind()};var t=[];return{create:function(f,n){function t(e){if(e)if("number"===typeof e)u(e),c.primType=4,c.vertCount=e|0,c.type=5121;else{var f=null,p=35044,n=-1,h=-1,y=0,w=0;if(Array.isArray(e)||V(e)||H(e))f=e;else if(d.type(e,"object","invalid arguments for elements"),"data"in
e&&(f=e.data,d(Array.isArray(f)||V(f)||H(f),"invalid data for element buffer")),"usage"in e&&(d.parameter(e.usage,l,"invalid element buffer usage"),p=l[e.usage]),"primitive"in e&&(d.parameter(e.primitive,g,"invalid element buffer primitive"),n=g[e.primitive]),"count"in e&&(d("number"===typeof e.count&&0<=e.count,"invalid vertex count for elements"),h=e.count|0),"type"in e&&(d.parameter(e.type,W,"invalid buffer type"),w=W[e.type]),"length"in e)y=e.length|0;else if(y=h,5123===w||5122===w)y*=2;else if(5125===
w||5124===w)y*=4;I(c,f,p,n,h,y,w)}else u(),c.primType=4,c.vertCount=0,c.type=5121;return t}var u=F.create(null,34963,!0),c=new O(u._buffer);C.elementsCount++;t(f);t._reglType="elements";t._elements=c;t.subdata=function(c,f){u.subdata(c,f);return t};t.destroy=function(){k(c)};return t},createStream:function(f){var l=t.pop();l||(l=new O(F.create(null,34963,!0,!1)._buffer));I(l,f,35040,-1,-1,0,0);return l},destroyStream:function(f){t.push(f)},getElements:function(f){return"function"===typeof f&&f._elements instanceof
O?f._elements:null},clear:function(){J(u).forEach(k)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(aa,ba,Ma){var d=aa("./util/sorted-object-keys"),V=aa("./util/check");ba.exports=function(H,J){function g(f){V.type(f,"string","extension name must be string");f=f.toLowerCase();var n;try{n=l[f]=H.getExtension(f)}catch(g){}return!!n}for(var l={},n=0;n<J.extensions.length;++n){var f=
J.extensions[n];if(!g(f))return J.onDestroy(),J.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}J.optionalExtensions.forEach(g);return{extensions:l,restore:function(){d(l).forEach(function(f){if(l[f]&&!g(f))throw Error("(regl): error restoring extension "+f);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(aa,ba,Ma){var d=aa("./util/check"),V=aa("./util/values"),H=aa("./util/extend"),J=[6407,6408],
g=[];g[6408]=4;g[6407]=3;var l=[];l[5121]=1;l[5126]=4;l[36193]=2;var n=[32854,32855,36194,35907,34842,34843,34836],f={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ba.exports=function(F,C,O,I,k,u){function L(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var f=a=0;b?(a=b.width,f=b.height):c&&(a=c.width,f=c.height);this.width=a;this.height=f}function W(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&
a.renderbuffer._renderbuffer.decRef())}function t(a,b,c){if(a){if(a.texture){a=a.texture._texture;var f=Math.max(1,a.height);d(Math.max(1,a.width)===b&&f===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,d(a.width===b&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function N(a,b){b&&(b.texture?F.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):F.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer))}
function w(a){var b=3553,c=null,f=null,e=a;"object"===typeof a&&(e=a.data,"target"in a&&(b=a.target|0));d.type(e,"function","invalid attachment data");a=e._reglType;"texture2d"===a?(c=e,d(3553===b)):"textureCube"===a?(c=e,d(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(f=e,b=36161):d.raise("invalid regl object for attachment");return new L(b,c,f)}function B(a,b,c,f,e){if(c)return a=I.create2D({width:a,height:b,format:f,type:e}),a._texture.refCount=0,new L(3553,a,null);a=k.create({width:a,
height:b,format:f});a._renderbuffer.refCount=0;return new L(36161,null,a)}function ha(a){return a&&(a.texture||a.renderbuffer)}function c(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function e(){this.id=b++;x[this.id]=this;this.framebuffer=F.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function U(a){a.colorAttachments.forEach(W);W(a.depthAttachment);
W(a.stencilAttachment);W(a.depthStencilAttachment)}function p(a){var b=a.framebuffer;d(b,"must not double destroy framebuffer");F.deleteFramebuffer(b);a.framebuffer=null;u.framebufferCount--;delete x[a.id]}function Z(a){var b;F.bindFramebuffer(36160,a.framebuffer);var c=a.colorAttachments;for(b=0;b<c.length;++b)N(36064+b,c[b]);for(b=c.length;b<O.maxColorAttachments;++b)F.framebufferTexture2D(36160,36064+b,3553,null,0);F.framebufferTexture2D(36160,33306,3553,null,0);F.framebufferTexture2D(36160,36096,
3553,null,0);F.framebufferTexture2D(36160,36128,3553,null,0);N(36096,a.depthAttachment);N(36128,a.stencilAttachment);N(33306,a.depthStencilAttachment);a=F.checkFramebufferStatus(36160);F.isContextLost()||36053===a||d.raise("framebuffer configuration not supported, status = "+f[a]);F.bindFramebuffer(36160,y.next?y.next.framebuffer:null);y.cur=y.next;F.getError()}function h(a,b){function f(a,b){var c;d(y.next!==h,"can not update framebuffer which is currently in use");var e=0,p=0,x=!0,q=!0;c=null;var u=
!0,P="rgba",k="uint8",L=1,r=null,G=null,ca=null,S=!1;if("number"===typeof a)e=a|0,p=b|0||e;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(p=a.shape,d(Array.isArray(p)&&2<=p.length,"invalid shape for framebuffer"),e=p[0],p=p[1]):("radius"in a&&(e=p=a.radius),"width"in a&&(e=a.width),"height"in a&&(p=a.height));if("color"in a||"colors"in a)c=a.color||a.colors,Array.isArray(c)&&d(1===c.length||C.webgl_draw_buffers,"multiple render targets not supported");if(!c){"colorCount"in
a&&(L=a.colorCount|0,d(0<L,"invalid color buffer count"));"colorTexture"in a&&(u=!!a.colorTexture,P="rgba4");if("colorType"in a){k=a.colorType;if(u)d(C.oes_texture_float||!("float"===k||"float32"===k),"you must enable OES_texture_float in order to use floating point framebuffer objects"),d(C.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===k||"float16"===k)d(C.ext_color_buffer_half_float,
"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),P="rgba16f";else if("float"===k||"float32"===k)d(C.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),P="rgba32f";d.oneOf(k,E,"invalid color type")}"colorFormat"in a&&(P=a.colorFormat,0<=da.indexOf(P)?u=!0:0<=D.indexOf(P)?u=!1:d.optional(function(){if(u)d.oneOf(a.colorFormat,da,"invalid color format for texture");else d.oneOf(a.colorFormat,D,"invalid color format for renderbuffer")}))}if("depthTexture"in
a||"depthStencilTexture"in a)S=!(!a.depthTexture&&!a.depthStencilTexture),d(!S||C.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?x=a.depth:(r=a.depth,q=!1));"stencil"in a&&("boolean"===typeof a.stencil?q=a.stencil:(G=a.stencil,x=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?x=q=a.depthStencil:(ca=a.depthStencil,q=x=!1))}else e=p=1;var I=null,V=null,N=null,H=null;if(Array.isArray(c))I=c.map(w);else if(c)I=[w(c)];else for(I=
Array(L),c=0;c<L;++c)I[c]=B(e,p,u,P,k);d(C.webgl_draw_buffers||1>=I.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");d(I.length<=O.maxColorAttachments,"too many color attachments, not supported");e=e||I[0].width;p=p||I[0].height;r?V=w(r):x&&!q&&(V=B(e,p,S,"depth","uint32"));G?N=w(G):q&&!x&&(N=B(e,p,!1,"stencil","uint8"));ca?H=w(ca):!r&&!G&&q&&x&&(H=B(e,p,S,"depth stencil","depth stencil"));d(1>=!!r+!!G+!!ca,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
x=null;for(c=0;c<I.length;++c)t(I[c],e,p),d(!I[c]||I[c].texture&&0<=J.indexOf(I[c].texture._texture.format)||I[c].renderbuffer&&0<=n.indexOf(I[c].renderbuffer._renderbuffer.format),"framebuffer color attachment "+c+" is invalid"),I[c]&&I[c].texture&&(q=g[I[c].texture._texture.format]*l[I[c].texture._texture.type],null===x?x=q:d(x===q,"all color attachments much have the same number of bits per pixel."));t(V,e,p);d(!V||V.texture&&6402===V.texture._texture.format||V.renderbuffer&&33189===V.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");t(N,e,p);d(!N||N.renderbuffer&&36168===N.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");t(H,e,p);d(!H||H.texture&&34041===H.texture._texture.format||H.renderbuffer&&34041===H.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");U(h);h.width=e;h.height=p;h.colorAttachments=I;h.depthAttachment=V;h.stencilAttachment=N;h.depthStencilAttachment=H;f.color=I.map(ha);f.depth=
ha(V);f.stencil=ha(N);f.depthStencil=ha(H);f.width=h.width;f.height=h.height;Z(h);return f}var h=new e;u.framebufferCount++;f(a,b);return H(f,{resize:function(a,b){d(y.next!==h,"can not resize a framebuffer which is currently in use");var e=Math.max(a|0,1),l=Math.max(b|0||e,1);if(e===h.width&&l===h.height)return f;for(var p=h.colorAttachments,x=0;x<p.length;++x)c(p[x],e,l);c(h.depthAttachment,e,l);c(h.stencilAttachment,e,l);c(h.depthStencilAttachment,e,l);h.width=f.width=e;h.height=f.height=l;Z(h);
return f},_reglType:"framebuffer",_framebuffer:h,destroy:function(){p(h);U(h)},use:function(a){y.setFBO({framebuffer:f},a)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},da=["rgba"],D=["rgba4","rgb565","rgb5 a1"];C.ext_srgb&&D.push("srgba");C.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");C.webgl_color_buffer_float&&D.push("rgba32f");var E=["uint8"];C.oes_texture_half_float&&E.push("half float","float16");C.oes_texture_float&&E.push("float","float32");var b=0,x={};return H(y,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof e)?a:null},create:h,createCube:function(a){function b(a){var e;d(0>c.indexOf(y.next),"can not update framebuffer which is currently in use");var f={color:null},l=0,p=null;e="rgba";var x="uint8",n=1;if("number"===typeof a)l=a|0;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(l=a.shape,d(Array.isArray(l)&&2<=l.length,"invalid shape for framebuffer"),d(l[0]===l[1],"cube framebuffer must be square"),l=
l[0]):("radius"in a&&(l=a.radius|0),"width"in a?(l=a.width|0,"height"in a&&d(a.height===l,"must be square")):"height"in a&&(l=a.height|0));if("color"in a||"colors"in a)p=a.color||a.colors,Array.isArray(p)&&d(1===p.length||C.webgl_draw_buffers,"multiple render targets not supported");p||("colorCount"in a&&(n=a.colorCount|0,d(0<n,"invalid color buffer count")),"colorType"in a&&(d.oneOf(a.colorType,E,"invalid color type"),x=a.colorType),"colorFormat"in a&&(e=a.colorFormat,d.oneOf(a.colorFormat,da,"invalid color format for texture")));
"depth"in a&&(f.depth=a.depth);"stencil"in a&&(f.stencil=a.stencil);"depthStencil"in a&&(f.depthStencil=a.depthStencil)}else l=1;if(p)if(Array.isArray(p))for(a=[],e=0;e<p.length;++e)a[e]=p[e];else a=[p];else for(a=Array(n),p={radius:l,format:e,type:x},e=0;e<n;++e)a[e]=I.createCube(p);f.color=Array(a.length);for(e=0;e<a.length;++e)n=a[e],d("function"===typeof n&&"textureCube"===n._reglType,"invalid cube map"),l=l||n.width,d(n.width===l&&n.height===l,"invalid cube map shape"),f.color[e]={target:34069,
data:a[e]};for(e=0;6>e;++e){for(n=0;n<a.length;++n)f.color[n].target=34069+e;0<e&&(f.depth=c[0].depth,f.stencil=c[0].stencil,f.depthStencil=c[0].depthStencil);if(c[e])c[e](f);else c[e]=h(f)}return H(b,{width:l,height:l,color:a})}var c=Array(6);b(a);return H(b,{faces:c,resize:function(a){var e=a|0;d(0<e&&e<=O.maxCubeMapSize,"invalid radius for cube fbo");if(e===b.width)return b;var f=b.color;for(a=0;a<f.length;++a)f[a].resize(e);for(a=0;6>a;++a)c[a].resize(e);b.width=b.height=e;return b},_reglType:"framebufferCube",
destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){V(x).forEach(p)},restore:function(){y.cur=null;y.next=null;y.dirty=!0;V(x).forEach(function(a){a.framebuffer=F.createFramebuffer();Z(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(aa,ba,Ma){var d=aa("./util/sorted-object-keys"),V=aa("./util/pool");ba.exports=function(H,J){var g=1;J.ext_texture_filter_anisotropic&&(g=H.getParameter(34047));var l=1,n=1;J.webgl_draw_buffers&&(l=H.getParameter(34852),
n=H.getParameter(36063));var f=!!J.oes_texture_float;if(f){f=H.createTexture();H.bindTexture(3553,f);H.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var F=H.createFramebuffer();H.bindFramebuffer(36160,F);H.framebufferTexture2D(36160,36064,3553,f,0);H.bindTexture(3553,null);if(36053!==H.checkFramebufferStatus(36160))f=!1;else{H.viewport(0,0,1,1);H.clearColor(1,0,0,1);H.clear(16384);var C=V.allocType(5126,4);H.readPixels(0,0,1,1,6408,5126,C);H.getError()?f=!1:(H.deleteFramebuffer(F),H.deleteTexture(f),
f=1===C[0]);V.freeType(C)}}C=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(C=H.createTexture(),F=V.allocType(5121,36),H.activeTexture(33984),H.bindTexture(34067,C),H.texImage2D(34069,0,6408,3,3,0,6408,5121,F),V.freeType(F),H.bindTexture(34067,null),H.deleteTexture(C),C=!H.getError());return{colorBits:[H.getParameter(3410),H.getParameter(3411),H.getParameter(3412),H.getParameter(3413)],depthBits:H.getParameter(3414),
stencilBits:H.getParameter(3415),subpixelBits:H.getParameter(3408),extensions:d(J).filter(function(f){return!!J[f]}),maxAnisotropic:g,maxDrawbuffers:l,maxColorAttachments:n,pointSizeDims:H.getParameter(33901),lineWidthDims:H.getParameter(33902),maxViewportDims:H.getParameter(3386),maxCombinedTextureUnits:H.getParameter(35661),maxCubeMapSize:H.getParameter(34076),maxRenderbufferSize:H.getParameter(34024),maxTextureUnits:H.getParameter(34930),maxTextureSize:H.getParameter(3379),maxAttributes:H.getParameter(34921),
maxVertexUniforms:H.getParameter(36347),maxVertexTextureUnits:H.getParameter(35660),maxVaryingVectors:H.getParameter(36348),maxFragmentUniforms:H.getParameter(36349),glsl:H.getParameter(35724),renderer:H.getParameter(7937),vendor:H.getParameter(7936),version:H.getParameter(7938),readFloat:f,npotTextureCube:C}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(aa,ba,Ma){var d=aa("./util/check"),V=aa("./util/is-typed-array");ba.exports=function(H,J,g,l,n,f,F){function C(I){var k;null===
J.next?(d(n.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),k=5121):(d(null!==J.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),k=J.next.colorAttachments[0].texture._texture.type,d.optional(function(){f.oes_texture_float?(d(5121===k||5126===k,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===k&&d(F.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
d(5121===k,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var u=0,L=0,C=l.framebufferWidth,t=l.framebufferHeight,N=null;V(I)?N=I:I&&(d.type(I,"object","invalid arguments to regl.read()"),u=I.x|0,L=I.y|0,d(0<=u&&u<l.framebufferWidth,"invalid x offset for regl.read"),d(0<=L&&L<l.framebufferHeight,"invalid y offset for regl.read"),C=(I.width||l.framebufferWidth-u)|0,t=(I.height||l.framebufferHeight-L)|0,N=I.data||null);N&&(5121===k?d(N instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===k&&d(N instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));d(0<C&&C+u<=l.framebufferWidth,"invalid width for read pixels");d(0<t&&t+L<=l.framebufferHeight,"invalid height for read pixels");g();I=C*t*4;N||(5121===k?N=new Uint8Array(I):5126===k&&(N=N||new Float32Array(I)));d.isTypedArray(N,"data buffer for regl.read() must be a typedarray");d(N.byteLength>=I,"data buffer for regl.read() too small");H.pixelStorei(3333,4);H.readPixels(u,L,C,
t,6408,k,N);return N}function O(f){var l;J.setFBO({framebuffer:f.framebuffer},function(){l=C(f)});return l}return function(f){return f&&"framebuffer"in f?O(f):C(f)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(aa,ba,Ma){var d=aa("./util/sorted-object-keys"),V=aa("./util/check"),H=aa("./util/values"),J=[];J[32854]=2;J[32855]=2;J[36194]=2;J[33189]=2;J[36168]=1;J[34041]=4;J[35907]=4;J[34836]=16;J[34842]=8;J[34843]=6;ba.exports=function(g,l,n,f,F){function C(f){this.id=u++;this.refCount=
1;this.renderbuffer=f;this.format=32854;this.height=this.width=0;F.profile&&(this.stats={size:0})}function O(l){var n=l.renderbuffer;V(n,"must not double destroy renderbuffer");g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(n);l.renderbuffer=null;l.refCount=0;delete L[l.id];f.renderbufferCount--}var I={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};l.ext_srgb&&(I.srgba=35907);l.ext_color_buffer_half_float&&(I.rgba16f=34842,I.rgb16f=34843);l.webgl_color_buffer_float&&
(I.rgba32f=34836);var k=[];d(I).forEach(function(f){k[I[f]]=f});var u=0,L={};C.prototype.decRef=function(){0>=--this.refCount&&O(this)};F.profile&&(f.getTotalRenderbufferSize=function(){var f=0;d(L).forEach(function(l){f+=L[l].stats.size});return f});return{create:function(l,t){function d(f,l){var c=0,e=0,U=32854;"object"===typeof f&&f?("shape"in f?(e=f.shape,V(Array.isArray(e)&&2<=e.length,"invalid renderbuffer shape"),c=e[0]|0,e=e[1]|0):("radius"in f&&(c=e=f.radius|0),"width"in f&&(c=f.width|0),
"height"in f&&(e=f.height|0)),"format"in f&&(V.parameter(f.format,I,"invalid renderbuffer format"),U=I[f.format])):"number"===typeof f?(c=f|0,e="number"===typeof l?l|0:c):f?V.raise("invalid arguments to renderbuffer constructor"):c=e=1;V(0<c&&0<e&&c<=n.maxRenderbufferSize&&e<=n.maxRenderbufferSize,"invalid renderbuffer size");if(c!==w.width||e!==w.height||U!==w.format)return d.width=w.width=c,d.height=w.height=e,w.format=U,g.bindRenderbuffer(36161,w.renderbuffer),g.renderbufferStorage(36161,U,c,e),
V(0===g.getError(),"invalid render buffer format"),F.profile&&(w.stats.size=J[w.format]*w.width*w.height),d.format=k[w.format],d}var w=new C(g.createRenderbuffer());L[w.id]=w;f.renderbufferCount++;d(l,t);d.resize=function(f,l){var c=f|0,e=l|0||c;if(c===w.width&&e===w.height)return d;V(0<c&&0<e&&c<=n.maxRenderbufferSize&&e<=n.maxRenderbufferSize,"invalid renderbuffer size");d.width=w.width=c;d.height=w.height=e;g.bindRenderbuffer(36161,w.renderbuffer);g.renderbufferStorage(36161,w.format,c,e);V(0===
g.getError(),"invalid render buffer format");F.profile&&(w.stats.size=J[w.format]*w.width*w.height);return d};d._reglType="renderbuffer";d._renderbuffer=w;F.profile&&(d.stats=w.stats);d.destroy=function(){w.decRef()};return d},clear:function(){H(L).forEach(O)},restore:function(){H(L).forEach(function(f){f.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,f.renderbuffer);g.renderbufferStorage(36161,f.format,f.width,f.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,
"./util/values":36}],16:[function(aa,ba,Ma){var d=aa("./util/sorted-object-keys"),V=aa("./util/check"),H=aa("./util/extend"),J=aa("./util/values");ba.exports=function(g,l,n,f){function F(f,l,n,c){this.name=f;this.id=l;this.location=n;this.info=c}function C(f,l){for(var n=0;n<f.length;++n)if(f[n].id===l.id){f[n].location=l.location;return}f.push(l)}function O(f,n,d){var c=35632===f?u:L,e=c[n];if(!e){var U=l.str(n),e=g.createShader(f);g.shaderSource(e,U);g.compileShader(e);V.shaderError(g,e,U,f,d);
c[n]=e}return e}function I(l,n){this.id=N++;this.fragId=l;this.vertId=n;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;f.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function k(n,d,t){var c;c=O(35632,n.fragId);var e=O(35633,n.vertId),U=n.program=g.createProgram();g.attachShader(U,c);g.attachShader(U,e);if(t)for(c=0;c<t.length;++c)e=t[c],g.bindAttribLocation(U,e[0],e[1]);g.linkProgram(U);V.linkError(g,U,l.str(n.fragId),l.str(n.vertId),d);t=g.getProgramParameter(U,
35718);f.profile&&(n.stats.uniformsCount=t);e=n.uniforms;for(c=0;c<t;++c)if(d=g.getActiveUniform(U,c))if(1<d.size)for(var p=0;p<d.size;++p){var u=d.name.replace("[0]","["+p+"]");C(e,new F(u,l.id(u),g.getUniformLocation(U,u),d))}else C(e,new F(d.name,l.id(d.name),g.getUniformLocation(U,d.name),d));t=g.getProgramParameter(U,35721);f.profile&&(n.stats.attributesCount=t);n=n.attributes;for(c=0;c<t;++c)(d=g.getActiveAttrib(U,c))&&C(n,new F(d.name,l.id(d.name),g.getAttribLocation(U,d.name),d))}var u={},
L={},W={},t=[],N=0;f.profile&&(n.getMaxUniformsCount=function(){var f=0;t.forEach(function(l){l.stats.uniformsCount>f&&(f=l.stats.uniformsCount)});return f},n.getMaxAttributesCount=function(){var f=0;t.forEach(function(l){l.stats.attributesCount>f&&(f=l.stats.attributesCount)});return f});return{clear:function(){var f=g.deleteShader.bind(g);J(u).forEach(f);u={};J(L).forEach(f);L={};t.forEach(function(f){g.deleteProgram(f.program)});t.length=0;W={};n.shaderCount=0},program:function(f,l,J,c){V.command(0<=
f,"missing vertex shader",J);V.command(0<=l,"missing fragment shader",J);var e=W[l];e||(e=W[l]={});var U=e[f];if(U&&(U.refCount++,!c))return U;var p=new I(l,f);n.shaderCount++;k(p,J,c);U||(e[f]=p);t.push(p);return H(p,{destroy:function(){p.refCount--;if(0>=p.refCount){g.deleteProgram(p.program);var c=t.indexOf(p);t.splice(c,1);n.shaderCount--}0>=e[p.vertId].refCount&&(g.deleteShader(L[p.vertId]),delete L[p.vertId],delete W[p.fragId][p.vertId]);d(W[p.fragId]).length||(g.deleteShader(u[p.fragId]),delete u[p.fragId],
delete W[p.fragId])}})},restore:function(){u={};L={};for(var f=0;f<t.length;++f)k(t[f],null,t[f].attributes.map(function(f){return[f.location,f.name]}))},shader:O,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(aa,ba,Ma){ba.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(aa,ba,Ma){ba.exports=
function(){var d={"":0},V=[""];return{id:function(H){var J=d[H];if(J)return J;J=d[H]=V.length;V.push(H);return J},str:function(d){return V[d]}}}},{}],19:[function(aa,ba,Ma){function d(b){return"[object "+b+"]"}function V(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function H(b){return Array.isArray(b)&&0!==b.length&&W(b[0])?!0:!1}function J(b){return Object.prototype.toString.call(b)}function g(b){if(!b)return!1;var c=J(b);return 0<=da.indexOf(c)?!0:V(b)||H(b)||k(b)}function l(b,
c){36193===b.type?(b.data=L(c),u.freeType(c)):b.data=c}function n(b,f,a,e,l,h){b="undefined"!==typeof E[b]?E[b]:c[b]*D[f];h&&(b*=6);if(l){for(e=0;1<=a;)e+=b*a*a,a/=2;return e}return b*a*e}var f=aa("./util/sorted-object-keys"),F=aa("./util/check"),C=aa("./util/extend"),O=aa("./util/values"),I=aa("./util/is-typed-array"),k=aa("./util/is-ndarray"),u=aa("./util/pool"),L=aa("./util/to-half-float"),W=aa("./util/is-array-like"),t=aa("./util/flatten"),N=aa("./util/is-pow2");Ma=aa("./constants/arraytypes.json");
var w=aa("./constants/arraytypes.json"),B=[9984,9986,9985,9987],ha=[0,6409,6410,6407,6408],c={};c[6409]=c[6406]=c[6402]=1;c[34041]=c[6410]=2;c[6407]=c[35904]=3;c[6408]=c[35906]=4;var e=d("HTMLCanvasElement"),U=d("OffscreenCanvas"),p=d("CanvasRenderingContext2D"),Z=d("ImageBitmap"),h=d("HTMLImageElement"),y=d("HTMLVideoElement"),da=f(Ma).concat([e,U,p,Z,h,y]),D=[];D[5121]=1;D[5126]=4;D[36193]=2;D[5123]=2;D[5125]=4;var E=[];E[32854]=2;E[32855]=2;E[36194]=2;E[34041]=4;E[33776]=.5;E[33777]=.5;E[33778]=
1;E[33779]=1;E[35986]=.5;E[35987]=1;E[34798]=1;E[35840]=.5;E[35841]=.25;E[35842]=.5;E[35843]=.25;E[36196]=.5;ba.exports=function(b,x,a,d,E,D,da){function X(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function fa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=
b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function R(b,f){if("object"===typeof f&&f){"premultiplyAlpha"in f&&(F.type(f.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=f.premultiplyAlpha);"flipY"in f&&(F.type(f.flipY,"boolean","invalid texture flip"),b.flipY=f.flipY);"alignment"in f&&(F.oneOf(f.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=f.alignment);"colorSpace"in
f&&(F.parameter(f.colorSpace,Ta,"invalid colorSpace"),b.colorSpace=Ta[f.colorSpace]);if("type"in f){var e=f.type;F(x.oes_texture_float||!("float"===e||"float32"===e),"you must enable the OES_texture_float extension in order to use floating point textures.");F(x.oes_texture_half_float||!("half float"===e||"float16"===e),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");F(x.webgl_depth_texture||!("uint16"===e||"uint32"===e||"depth stencil"===e),
"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");F.parameter(e,v,"invalid texture type");b.type=v[e]}var r=b.width,l=b.height,q=b.channels,e=!1;"shape"in f?(F(Array.isArray(f.shape)&&2<=f.shape.length,"shape must be an array"),r=f.shape[0],l=f.shape[1],3===f.shape.length&&(q=f.shape[2],F(0<q&&4>=q,"invalid number of channels"),e=!0),F(0<=r&&r<=a.maxTextureSize,"invalid width"),F(0<=l&&l<=a.maxTextureSize,"invalid height")):("radius"in f&&(r=l=f.radius,F(0<=
r&&r<=a.maxTextureSize,"invalid radius")),"width"in f&&(r=f.width,F(0<=r&&r<=a.maxTextureSize,"invalid width")),"height"in f&&(l=f.height,F(0<=l&&l<=a.maxTextureSize,"invalid height")),"channels"in f&&(q=f.channels,F(0<q&&4>=q,"invalid number of channels"),e=!0));b.width=r|0;b.height=l|0;b.channels=q|0;r=!1;"format"in f&&(r=f.format,F(x.webgl_depth_texture||!("depth"===r||"depth stencil"===r),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(r,
m,"invalid texture format"),l=b.internalformat=m[r],b.format=Fa[l],r in v&&!("type"in f)&&(b.type=v[r]),r in K&&(b.compressed=!0),r=!0);!e&&r?b.channels=c[b.format]:e&&!r?b.channels!==ha[b.format]&&(b.format=b.internalformat=ha[b.channels]):r&&e&&F(b.channels===c[b.format],"number of channels inconsistent with specified format")}}function T(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}function A(){X.call(this);
this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function q(b,c){var f=null;g(c)?f=c:c&&(F.type(c,"object","invalid pixel data type"),R(b,c),"x"in c&&(b.xOffset=c.x|0),"y"in c&&(b.yOffset=c.y|0),g(c.data)&&(f=c.data));F(!b.compressed||f instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){F(!f,"can not specify copy and data field for the same texture");var m=E.viewportWidth,r=E.viewportHeight;b.width=b.width||m-
b.xOffset;b.height=b.height||r-b.yOffset;b.needsCopy=!0;F(0<=b.xOffset&&b.xOffset<m&&0<=b.yOffset&&b.yOffset<r&&0<b.width&&b.width<=m&&0<b.height&&b.height<=r,"copy texture read out of bounds")}else if(!f)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(I(f))b.channels=b.channels||4,b.data=f,"type"in c||5121!==b.type||(b.type=w[Object.prototype.toString.call(f)]|0);else if(V(f)){b.channels=b.channels||4;m=f;r=m.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:r=
u.allocType(b.type,r);r.set(m);b.data=r;break;case 36193:b.data=L(m);break;default:F.raise("unsupported texture type, must specify a typed array")}b.alignment=1;b.needsFree=!0}else if(k(f)){m=f.data;Array.isArray(m)||5121!==b.type||(b.type=w[Object.prototype.toString.call(m)]|0);var r=f.shape,q=f.stride,v,Q,n,K;3===r.length?(n=r[2],K=q[2]):(F(2===r.length,"invalid ndarray pixel data, must be 2 or 3D"),K=n=1);v=r[0];Q=r[1];r=q[0];q=q[1];b.alignment=1;b.width=v;b.height=Q;b.channels=n;b.format=b.internalformat=
ha[n];b.needsFree=!0;v=K;f=f.offset;n=b.width;K=b.height;Q=b.channels;for(var oa=u.allocType(36193===b.type?5126:b.type,n*K*Q),x=0,sa=0;sa<K;++sa)for(var La=0;La<n;++La)for(var Fa=0;Fa<Q;++Fa)oa[x++]=m[r*La+q*sa+v*Fa+f];l(b,oa)}else if(J(f)===e||J(f)===U||J(f)===p)J(f)===e||J(f)===U?b.element=f:b.element=f.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(J(f)===Z)b.element=f,b.width=f.width,b.height=f.height,b.channels=4;else if(J(f)===h)b.element=f,b.width=f.naturalWidth,
b.height=f.naturalHeight,b.channels=4;else if(J(f)===y)b.element=f,b.width=f.videoWidth,b.height=f.videoHeight,b.channels=4;else if(H(f)){m=b.width||f[0].length;r=b.height||f.length;q=b.channels;q=W(f[0][0])?q||f[0][0].length:q||1;v=t.shape(f);n=1;for(K=0;K<v.length;++K)n*=v[K];n=u.allocType(36193===b.type?5126:b.type,n);t.flatten(f,v,"",n);l(b,n);b.alignment=1;b.width=m;b.height=r;b.channels=q;b.format=b.internalformat=ha[q];b.needsFree=!0}5126===b.type?F(0<=a.extensions.indexOf("oes_texture_float"),
"oes_texture_float extension not enabled"):36193===b.type&&F(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function M(a,c,f,e,m){var r=a.element,l=a.data,q=a.internalformat,h=a.format,v=a.type,p=a.width,Q=a.height;T(a);r?b.texSubImage2D(c,m,f,e,h,v,r):a.compressed?b.compressedTexSubImage2D(c,m,f,e,q,p,Q,l):a.needsCopy?(d(),b.copyTexSubImage2D(c,m,f,e,a.xOffset,a.yOffset,p,Q)):b.texSubImage2D(c,m,f,e,p,Q,h,v,l)}function P(){return na.pop()||new A}
function wa(a){a.needsFree&&u.freeType(a.data);A.call(a);na.push(a)}function qa(){X.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function r(a,b,c){var f=a.images[0]=P();a.mipmask=1;f.width=a.width=b;f.height=a.height=c;f.channels=a.channels=4}function G(a,b){var c=null;if(g(b))c=a.images[0]=P(),fa(c,a),q(c,b),a.mipmask=1;else if(R(a,b),Array.isArray(b.mipmap))for(var f=b.mipmap,e=0;e<f.length;++e)c=a.images[e]=P(),fa(c,a),c.width>>=e,c.height>>=e,q(c,f[e]),
a.mipmask|=1<<e;else c=a.images[0]=P(),fa(c,a),q(c,b),a.mipmask=1;fa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||F(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ca(a,c){for(var f=a.images,e=0;e<f.length&&f[e];++e){var m=f[e],r=c,l=e,q=m.element,h=m.data,v=m.internalformat,p=m.format,Q=m.type,n=m.width,K=m.height;T(m);
q?b.texImage2D(r,l,p,p,Q,q):m.compressed?b.compressedTexImage2D(r,l,v,n,K,0,h):m.needsCopy?(d(),b.copyTexImage2D(r,l,p,m.xOffset,m.yOffset,n,K,0)):b.texImage2D(r,l,p,n,K,0,p,Q,h||null)}}function S(){var a=Aa.pop()||new qa;X.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function ma(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&wa(b[c]),b[c]=null;Aa.push(a)}function ra(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=
4352}function za(b,c){if("min"in c){var f=c.min;F.parameter(f,fb);b.minFilter=fb[f];0<=B.indexOf(b.minFilter)&&!("faces"in c)&&(b.genMipmaps=!0)}"mag"in c&&(f=c.mag,F.parameter(f,oa),b.magFilter=oa[f]);var f=b.wrapS,e=b.wrapT;if("wrap"in c){var m=c.wrap;"string"===typeof m?(F.parameter(m,La),f=e=La[m]):Array.isArray(m)&&(F.parameter(m[0],La),F.parameter(m[1],La),f=La[m[0]],e=La[m[1]])}else"wrapS"in c&&(f=c.wrapS,F.parameter(f,La),f=La[f]),"wrapT"in c&&(e=c.wrapT,F.parameter(e,La),e=La[e]);b.wrapS=
f;b.wrapT=e;"anisotropic"in c&&(f=c.anisotropic,F("number"===typeof f&&1<=f&&f<=a.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=c.anisotropic);if("mipmap"in c){f=!1;switch(typeof c.mipmap){case "string":F.parameter(c.mipmap,xa,"invalid mipmap hint");b.mipmapHint=xa[c.mipmap];f=b.genMipmaps=!0;break;case "boolean":f=b.genMipmaps=c.mipmap;break;case "object":F(Array.isArray(c.mipmap),"invalid mipmap type");b.genMipmaps=!1;f=!0;break;default:F.raise("invalid mipmap type")}!f||
"min"in c||(b.minFilter=9984)}}function ya(a,c){b.texParameteri(c,10241,a.minFilter);b.texParameteri(c,10240,a.magFilter);b.texParameteri(c,10242,a.wrapS);b.texParameteri(c,10243,a.wrapT);x.ext_texture_filter_anisotropic&&b.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(b.hint(33170,a.mipmapHint),b.generateMipmap(c))}function ga(a){X.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ea++;this.refCount=1;this.target=a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=
new ra;da.profile&&(this.stats={size:0})}function Ca(a){b.activeTexture(33984);b.bindTexture(a.target,a.texture)}function ka(){var a=ta[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function pa(a){var c=a.texture;F(c,"must not double destroy texture");var f=a.unit,e=a.target;0<=f&&(b.activeTexture(33984+f),b.bindTexture(e,null),ta[f]=null);b.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete la[a.id];D.textureCount--}var xa={"don't care":4352,"dont care":4352,
nice:4354,fast:4353},La={repeat:10497,clamp:33071,mirror:33648},oa={nearest:9728,linear:9729},fb=C({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},oa),Ta={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},K={};x.ext_srgb&&(m.srgb=35904,m.srgba=35906);x.oes_texture_float&&(v.float32=
v["float"]=5126);x.oes_texture_half_float&&(v.float16=v["half float"]=36193);x.webgl_depth_texture&&(C(m,{depth:6402,"depth stencil":34041}),C(v,{uint16:5123,uint32:5125,"depth stencil":34042}));x.webgl_compressed_texture_s3tc&&C(K,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});x.webgl_compressed_texture_atc&&C(K,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});x.webgl_compressed_texture_pvrtc&&C(K,{"rgb pvrtc 4bppv1":35840,
"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});x.webgl_compressed_texture_etc1&&(K["rgb etc1"]=36196);var ua=Array.prototype.slice.call(b.getParameter(34467));f(K).forEach(function(a){var b=K[a];0<=ua.indexOf(b)&&(m[a]=b)});var Ba=f(m);a.textureFormats=Ba;var dd=[];f(m).forEach(function(a){dd[m[a]]=a});var Hb=[];f(v).forEach(function(a){Hb[v[a]]=a});var ia=[];f(oa).forEach(function(a){ia[oa[a]]=a});var Q=[];f(fb).forEach(function(a){Q[fb[a]]=a});var sa=[];f(La).forEach(function(a){sa[La[a]]=
a});var Fa=Ba.reduce(function(a,b){var c=m[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||x.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),na=[],Aa=[],Ea=0,la={},Y=a.maxTextureUnits,ta=Array(Y).map(function(){return null});C(ga.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<Y;++c){var f=ta[c];if(f){if(0<f.bindCount)continue;f.unit=-1}ta[c]=this;a=c;break}a>=Y&&F.raise("insufficient number of texture units");
da.profile&&D.maxTextureUnits<a+1&&(D.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&pa(this)}});da.profile&&(D.getTotalTextureSize=function(){var a=0;f(la).forEach(function(b){a+=la[b].stats.size});return a});return{create2D:function(c,f){function e(b,c){var f=m.texInfo;ra.call(f);var l=S();"number"===typeof b?"number"===typeof c?r(l,b|0,c|0):r(l,b|0,b|0):b?(F.type(b,
"object","invalid arguments to regl.texture"),za(f,b),G(l,b)):r(l,1,1);f.genMipmaps&&(l.mipmask=(l.width<<1)-1);m.mipmask=l.mipmask;fa(m,l);F.texture2D(f,l,a);m.internalformat=l.internalformat;e.width=l.width;e.height=l.height;Ca(m);ca(l,3553);ya(f,3553);ka();ma(l);da.profile&&(m.stats.size=n(m.internalformat,m.type,l.width,l.height,f.genMipmaps,!1));e.format=dd[m.internalformat];e.type=Hb[m.type];e.mag=ia[f.magFilter];e.min=Q[f.minFilter];e.wrapS=sa[f.wrapS];e.wrapT=sa[f.wrapT];return e}var m=new ga(3553);
la[m.id]=m;D.textureCount++;e(c,f);e.subimage=function(a,b,c,f){F(!!a,"must specify image data");b|=0;c|=0;f|=0;var r=P();fa(r,m);r.width=0;r.height=0;q(r,a);r.width=r.width||(m.width>>f)-b;r.height=r.height||(m.height>>f)-c;F(m.type===r.type&&m.format===r.format&&m.internalformat===r.internalformat,"incompatible format for texture.subimage");F(0<=b&&0<=c&&b+r.width<=m.width&&c+r.height<=m.height,"texture.subimage write out of bounds");F(m.mipmask&1<<f,"missing mipmap data");F(r.data||r.element||
r.needsCopy,"missing image data");Ca(m);M(r,3553,b,c,f);ka();wa(r);return e};e.resize=function(a,c){var f=a|0,r=c|0||f;if(f===m.width&&r===m.height)return e;e.width=m.width=f;e.height=m.height=r;Ca(m);for(var l=0;m.mipmask>>l;++l){var q=f>>l,h=r>>l;if(!q||!h)break;b.texImage2D(3553,l,m.format,q,h,0,m.format,m.type,null)}ka();da.profile&&(m.stats.size=n(m.internalformat,m.type,f,r,!1,!1));return e};e._reglType="texture2d";e._texture=m;da.profile&&(e.stats=m.stats);e.destroy=function(){m.decRef()};
return e},createCube:function(c,f,e,m,l,h){function v(b,c,f,e,m,l){var q,h=p.texInfo;ra.call(h);for(q=0;6>q;++q)K[q]=S();if("number"!==typeof b&&b)if("object"===typeof b)if(c)G(K[0],b),G(K[1],c),G(K[2],f),G(K[3],e),G(K[4],m),G(K[5],l);else if(za(h,b),R(p,b),"faces"in b)for(b=b.faces,F(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),q=0;6>q;++q)F("object"===typeof b[q]&&!!b[q],"invalid input for cube map face"),fa(K[q],p),G(K[q],b[q]);else for(q=0;6>q;++q)G(K[q],b);else F.raise("invalid arguments to cube map");
else for(b=b|0||1,q=0;6>q;++q)r(K[q],b,b);fa(p,K[0]);F.optional(function(){a.npotTextureCube||F(N(p.width)&&N(p.height),"your browser does not support non power or two texture dimensions")});p.mipmask=h.genMipmaps?(K[0].width<<1)-1:K[0].mipmask;F.textureCube(p,h,K,a);p.internalformat=K[0].internalformat;v.width=K[0].width;v.height=K[0].height;Ca(p);for(q=0;6>q;++q)ca(K[q],34069+q);ya(h,34067);ka();da.profile&&(p.stats.size=n(p.internalformat,p.type,v.width,v.height,h.genMipmaps,!0));v.format=dd[p.internalformat];
v.type=Hb[p.type];v.mag=ia[h.magFilter];v.min=Q[h.minFilter];v.wrapS=sa[h.wrapS];v.wrapT=sa[h.wrapT];for(q=0;6>q;++q)ma(K[q]);return v}var p=new ga(34067);la[p.id]=p;D.cubeCount++;var K=Array(6);v(c,f,e,m,l,h);v.subimage=function(a,b,c,f,e){F(!!b,"must specify image data");F("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;f|=0;e|=0;var m=P();fa(m,p);m.width=0;m.height=0;q(m,b);m.width=m.width||(p.width>>e)-c;m.height=m.height||(p.height>>e)-f;F(p.type===m.type&&p.format===m.format&&
p.internalformat===m.internalformat,"incompatible format for texture.subimage");F(0<=c&&0<=f&&c+m.width<=p.width&&f+m.height<=p.height,"texture.subimage write out of bounds");F(p.mipmask&1<<e,"missing mipmap data");F(m.data||m.element||m.needsCopy,"missing image data");Ca(p);M(m,34069+a,c,f,e);ka();wa(m);return v};v.resize=function(a){a|=0;if(a!==p.width){v.width=p.width=a;v.height=p.height=a;Ca(p);for(var c=0;6>c;++c)for(var f=0;p.mipmask>>f;++f)b.texImage2D(34069+c,f,p.format,a>>f,a>>f,0,p.format,
p.type,null);ka();da.profile&&(p.stats.size=n(p.internalformat,p.type,v.width,v.height,!1,!0));return v}};v._reglType="textureCube";v._texture=p;da.profile&&(v.stats=p.stats);v.destroy=function(){p.decRef()};return v},clear:function(){for(var a=0;a<Y;++a)b.activeTexture(33984+a),b.bindTexture(3553,null),ta[a]=null;O(la).forEach(pa);D.cubeCount=0;D.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<Y;++a){var c=ta[a];c&&(c.bindCount=0,c.unit=-1,ta[a]=null)}O(la).forEach(function(a){a.texture=
b.createTexture();b.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)b.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);else for(var f=0;6>f;++f)b.texImage2D(34069+f,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);ya(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<Y;++a){var c=ta[a];c&&(c.bindCount=0,c.unit=-1,ta[a]=null);b.activeTexture(33984+a);b.bindTexture(3553,null);b.bindTexture(34067,
null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(aa,ba,Ma){ba.exports=function(d,V){function H(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function J(l,d,g){var u=n.pop()||new H;u.startQueryIndex=l;u.endQueryIndex=d;u.sum=
0;u.stats=g;f.push(u)}if(!V.ext_disjoint_timer_query)return null;var g=[],l=[],n=[],f=[],F=[],C=[];return{beginQuery:function(f){var n=g.pop()||V.ext_disjoint_timer_query.createQueryEXT();V.ext_disjoint_timer_query.beginQueryEXT(35007,n);l.push(n);J(l.length-1,l.length,f)},endQuery:function(){V.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:J,update:function(){var d,J;d=l.length;if(0!==d){C.length=Math.max(C.length,d+1);F.length=Math.max(F.length,d+1);F[0]=0;var k=C[0]=0;for(J=d=0;J<
l.length;++J){var u=l[J];V.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(k+=V.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),g.push(u)):l[d++]=u;F[J+1]=k;C[J+1]=d}l.length=d;for(J=d=0;J<f.length;++J){var k=f[J],L=k.startQueryIndex,u=k.endQueryIndex;k.sum+=F[u]-F[L];L=C[L];u=C[u];u===L?(k.stats.gpuTime+=k.sum/1E6,n.push(k)):(k.startQueryIndex=L,k.endQueryIndex=u,f[d++]=k)}f.length=d}},getNumPendingQueries:function(){return l.length},clear:function(){g.push.apply(g,l);for(var f=0;f<g.length;f++)V.ext_disjoint_timer_query.deleteQueryEXT(g[f]);
l.length=0;g.length=0},restore:function(){l.length=0;g.length=0}}}},{}],21:[function(aa,ba,Ma){function d(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function V(c){c=Error("(regl) "+c);console.error(c);throw c;}function H(c,f){c||V(f)}function J(c){return c?": "+c:""}function g(c,f){switch(f){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===
typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function l(c,f,e){0>f.indexOf(c)&&V("invalid value"+J(e)+". must be one of: "+f)}function n(c,f){for(c+="";c.length<f;)c=" "+c;return c}function f(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function F(c,f){this.number=c;this.line=f;this.errors=[]}function C(c,f,e){this.file=c;this.line=f;this.message=e}function O(){var c=Error(),c=(c.stack||c).toString(),f=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);
return f?f[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function I(){var c=Error(),c=(c.stack||c).toString(),f=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);return f?f[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function k(c,e){var l=c.split("\n"),h=1,n=0,w={unknown:new f,0:new f};w.unknown.name=w[0].name=e||O();w.unknown.lines.push(new F(0,""));for(var t=0;t<l.length;++t){var g=l[t],b=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(g);if(b)switch(b[1]){case "line":if(b=
/(\d+)(\s+\d+)?/.exec(b[2]))h=b[1]|0,b[2]&&(n=b[2]|0,n in w||(w[n]=new f));break;case "define":if(b=/SHADER_NAME(_B64)?\s+(.*)$/.exec(b[2]))w[n].name=b[1]?d(b[2]):b[2]}w[n].lines.push(new F(h++,g))}B(w).forEach(function(b){var a=w[b];a.lines.forEach(function(b){a.index[b.number]=b})});return w}function u(c){var f=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);e?f.push(new C(e[1]|0,e[2]|0,e[3].trim())):0<c.length&&f.push(new C("unknown",0,c))}});
return f}function L(c,f){f.forEach(function(f){var e=c[f.file];if(e){var l=e.index[f.line];if(l){l.errors.push(f);e.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(f)})}function W(c){c._commandRef=O()}function t(c,f){var e=I();V(c+" in command "+(f||O())+("unknown"===e?"":" called from "+e))}function N(c,f,e,l){g(c,f)||t("invalid parameter type"+J(e)+". expected "+f+", got "+typeof c,l||O())}function w(c,f){return 32820===c||32819===c||33635===c?2:34042===c?4:e[c]*f}var B=
aa("./sorted-object-keys"),ha=aa("./is-typed-array");aa=aa("./extend");var c="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),e={};e[5120]=e[5121]=1;e[5122]=e[5123]=e[36193]=e[33635]=e[32819]=e[32820]=2;e[5124]=e[5125]=e[5126]=e[34042]=4;ba.exports=aa(H,{optional:function(c){c()},raise:V,commandRaise:t,command:function(c,f,e){c||t(f,e||O())},parameter:function(c,f,e){c in f||V("unknown parameter ("+c+")"+J(e)+". possible values: "+B(f).join())},commandParameter:function(c,
f,e,l){c in f||t("unknown parameter ("+c+")"+J(e)+". possible values: "+B(f).join(),l||O())},constructor:function(f){B(f).forEach(function(f){0>c.indexOf(f)&&V('invalid regl constructor argument "'+f+'". must be one of '+c)})},type:function(c,f,e){g(c,f)||V("invalid parameter type"+J(e)+". expected "+f+", got "+typeof c)},commandType:N,isTypedArray:function(c,f){ha(c)||V("invalid parameter type"+J(f)+". must be a typed array")},nni:function(c,f){0<=c&&(c|0)===c||V("invalid parameter type, ("+c+")"+
J(f)+". must be a nonnegative integer")},oneOf:l,shaderError:function(c,f,e,l,y){if(!c.getShaderParameter(f,c.COMPILE_STATUS)){f=c.getShaderInfoLog(f);c=l===c.FRAGMENT_SHADER?"fragment":"vertex";N(e,"string",c+" shader source must be a string",y);var d=k(e,y);e=u(f);L(d,e);B(d).forEach(function(c){function f(b,c){e.push(b);a.push(c||"")}var b=d[c];if(b.hasErrors){var e=[""],a=[""];f("file number "+c+": "+b.name+"\n","color:red;text-decoration:underline;font-weight:bold");b.lines.forEach(function(a){if(0<
a.errors.length){f(n(a.number,4)+"|  ","background-color:yellow; font-weight:bold");f(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var b=0;a.errors.forEach(function(c){c=c.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(e){var l=e[1];c=e[2];switch(l){case "assign":l="="}b=Math.max(a.line.indexOf(l,b),0)}else b=0;f(n("| ",6));f(n("^^^",b+3)+"\n","font-weight:bold");f(n("| ",6));f(c+"\n","font-weight:bold")});f(n("| ",6)+"\n")}else f(n(a.number,4)+"|  "),f(a.line+"\n","color:red")});
"undefined"===typeof document||window.chrome?console.log(e.join("")):(a[0]=e.join("%c"),console.log.apply(console,a))}});H.raise("Error compiling "+c+" shader, "+d[0].name)}},linkError:function(c,f,e,l,n){c.getProgramParameter(f,c.LINK_STATUS)||(c=c.getProgramInfoLog(f),e=k(e,n),l='Error linking program with vertex shader, "'+k(l,n)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+l+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):
console.log(l+"\n"+c),H.raise(l))},callSite:I,saveCommandRef:W,saveDrawInfo:function(c,f,e,l){function n(c){return c?l.id(c):0}function d(c,b){B(b).forEach(function(b){c[l.id(b)]=!0})}W(c);c._fragId=n(c["static"].frag);c._vertId=n(c["static"].vert);var w=c._uniformSet={};d(w,f["static"]);d(w,f.dynamic);f=c._attributeSet={};d(f,e["static"]);d(f,e.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,f,e){c.texture?
l(c.texture._texture.internalformat,f,"unsupported texture format for attachment"):l(c.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},guessCommand:O,texture2D:function(c,f,e){var l=f.width,n=f.height,d=f.channels;H(0<l&&l<=e.maxTextureSize&&0<n&&n<=e.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||H(!(l&l-1)&&!!l&&!(n&n-1)&&!!n,"incompatible wrap mode for texture, both width and height must be power of 2");1===f.mipmask?1!==l&&1!==
n&&H(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(H(!(l&l-1)&&!!l&&!(n&n-1)&&!!n,"texture must be a square power of 2 to support mipmapping"),H(f.mipmask===(l<<1)-1,"missing or incomplete mipmap data"));5126===f.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&H(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),H(!c.genMipmaps,"mipmap generation not supported with float textures"));
var t=f.images;for(e=0;16>e;++e)if(t[e]){var g=l>>e,b=n>>e;H(f.mipmask&1<<e,"missing mipmap data");var x=t[e];H(x.width===g&&x.height===b,"invalid shape for mip images");H(x.format===f.format&&x.internalformat===f.internalformat&&x.type===f.type,"incompatible type for mip image");!x.compressed&&x.data&&(g=Math.ceil(w(x.type,d)*g/x.unpackAlignment)*x.unpackAlignment,H(x.data.byteLength===g*b,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||H(0===(f.mipmask&
1<<e),"extra mipmap data");f.compressed&&H(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,f,e,l){var n=c.width,d=c.height,g=c.channels;H(0<n&&n<=l.maxTextureSize&&0<d&&d<=l.maxTextureSize,"invalid texture shape");H(n===d,"cube map must be square");H(33071===f.wrapS&&33071===f.wrapT,"wrap mode not supported by cube map");for(l=0;l<e.length;++l){var t=e[l];H(t.width===n&&t.height===d,"inconsistent cube map face shape");f.genMipmaps&&(H(!t.compressed,"can not generate mipmap for compressed textures"),
H(1===t.mipmask,"can not specify mipmaps and generate mipmaps"));for(var b=t.images,x=0;16>x;++x){var a=b[x];if(a){var u=n>>x,z=d>>x;H(t.mipmask&1<<x,"missing mipmap data");H(a.width===u&&a.height===z,"invalid shape for mip images");H(a.format===c.format&&a.internalformat===c.internalformat&&a.type===c.type,"incompatible type for mip image");a.compressed||a.data&&H(a.data.byteLength===u*z*Math.max(w(a.type,g),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},
{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(aa,ba,Ma){ba.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(aa,ba,Ma){function d(d){return Array.prototype.slice.call(d)}function V(g){return d(g).join("")}var H=aa("./extend"),J=aa("./compiled-fns");ba.exports=function(){function g(){var l=[],n=[];return H(function(){l.push.apply(l,d(arguments))},{def:function(){var g="v"+f;f++;
n.push(g);0<arguments.length&&(l.push(g,"="),l.push.apply(l,d(arguments)),l.push(";"));return g},toString:function(){return V([0<n.length?"var "+n.join(",")+";":"",V(l)])}})}function l(){function f(d,g){n(d,g,"=",l.def(d,g),";")}var l=g(),n=g(),J=l.toString,V=n.toString;return H(function(){l.apply(l,d(arguments))},{def:l.def,entry:l,exit:n,save:f,set:function(n,d,w){f(n,d);l(n,d,"=",w,";")},toString:function(){return J()+V()}})}var n=0,f=0,F={},C=g(),O={};return{global:C,link:function(f){var l="$"+
n,d=!1;"object"===typeof f&&f.name&&(l=f.name.replace(/ /g,"_"),d=!0);if(l in F)return l;F[l]=f;d||n++;return l},block:g,proc:function(f,n){function d(){var f="a"+g.length;g.push(f);return f}var g=[];n=n||0;for(var J=0;J<n;++J)d();var J=l(),t=J.toString;return O[f]=H(J,{arg:d,toString:function(){return V(["function(",g.join(),"){",t(),"}"])}})},scope:l,cond:function(){var f=V(arguments),n=l(),g=l(),J=n.toString,C=g.toString;return H(n,{then:function(){n.apply(n,d(arguments));return this},"else":function(){g.apply(g,
d(arguments));return this},toString:function(){var l=C();l&&(l="else{"+l+"}");return V(["if(",f,"){",J(),"}",l])}})},compile:function(){var f=[],l=[];Object.keys(F).sort(function(f,l){var n="$"===f.charAt(0),d="$"===l.charAt(0);return n||d?n&&d?+f.slice(1)<+l.slice(1)?-1:1:n&&!d?-1:1:f.localeCompare(l)}).forEach(function(n){var d=F[n];f.push(n);l.push(d)});for(var n=0,d=f.length-1;-1<d;d--)if("$"===f[d].charAt(0)){n=d;break}var g=['"use strict";',C,"return {"];Object.keys(O).forEach(function(f){g.push('"',
f,'":',O[f].toString(),",")});g.push("}");var d=V(g).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),n=f.slice(n).join(),t=J[n];if(!t)throw console.log("src code is:"),console.log(d),console.log("compiled values:",l),console.log("linked names:",f),console.log("Keys available:",Object.keys(J)),console.log("Key:",n),console.log('"'+n+'": function('+f.join(", ")+") \n{\n"+d+"\n},"),Error("missing precompiled function with key: "+n);return t.apply(null,l)}}}},{"./compiled-fns":24,"./extend":25}],
24:[function(aa,ba,Ma){ba.exports={$0:function(d){var V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E;V=d.attributes;H=d.current;J=d.framebuffer;g=d.gl;l=d.next;n=d.vao;f=l.blend_color;F=H.blend_color;C=l.blend_equation;O=H.blend_equation;I=l.blend_func;k=H.blend_func;u=l.colorMask;L=H.colorMask;W=l.depth_range;t=H.depth_range;N=l.polygonOffset_offset;w=H.polygonOffset_offset;B=l.sample_coverage;ha=H.sample_coverage;c=l.scissor_box;e=H.scissor_box;U=l.stencil_func;p=H.stencil_func;Z=
l.stencil_opBack;h=H.stencil_opBack;y=l.stencil_opFront;da=H.stencil_opFront;D=l.viewport;E=H.viewport;return{poll:function(){var b,n,a,d,z,V,gd,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma;H.dirty=!1;n=l.blend_enable;a=l.cull_enable;d=l.depth_enable;z=l.dither;V=l.polygonOffset_enable;gd=l.sample_alpha;X=l.sample_enable;fa=l.scissor_enable;R=l.stencil_enable;T=l.cull_face;A=H.cull_face;q=l.depth_func;M=H.depth_func;P=l.depth_mask;wa=H.depth_mask;qa=l.frontFace;r=H.frontFace;G=l.lineWidth;ca=H.lineWidth;S=
l.stencil_mask;ma=H.stencil_mask;b=J.next;b!==J.cur&&(b?g.bindFramebuffer(36160,b.framebuffer):g.bindFramebuffer(36160,null),J.cur=b);n!==H.blend_enable&&(n?g.enable(3042):g.disable(3042),H.blend_enable=n);a!==H.cull_enable&&(a?g.enable(2884):g.disable(2884),H.cull_enable=a);d!==H.depth_enable&&(d?g.enable(2929):g.disable(2929),H.depth_enable=d);z!==H.dither&&(z?g.enable(3024):g.disable(3024),H.dither=z);V!==H.polygonOffset_enable&&(V?g.enable(32823):g.disable(32823),H.polygonOffset_enable=V);gd!==
H.sample_alpha&&(gd?g.enable(32926):g.disable(32926),H.sample_alpha=gd);X!==H.sample_enable&&(X?g.enable(32928):g.disable(32928),H.sample_enable=X);fa!==H.scissor_enable&&(fa?g.enable(3089):g.disable(3089),H.scissor_enable=fa);R!==H.stencil_enable&&(R?g.enable(2960):g.disable(2960),H.stencil_enable=R);if(f[0]!==F[0]||f[1]!==F[1]||f[2]!==F[2]||f[3]!==F[3])g.blendColor(f[0],f[1],f[2],f[3]),F[0]=f[0],F[1]=f[1],F[2]=f[2],F[3]=f[3];if(C[0]!==O[0]||C[1]!==O[1])g.blendEquationSeparate(C[0],C[1]),O[0]=C[0],
O[1]=C[1];if(I[0]!==k[0]||I[1]!==k[1]||I[2]!==k[2]||I[3]!==k[3])g.blendFuncSeparate(I[0],I[1],I[2],I[3]),k[0]=I[0],k[1]=I[1],k[2]=I[2],k[3]=I[3];if(u[0]!==L[0]||u[1]!==L[1]||u[2]!==L[2]||u[3]!==L[3])g.colorMask(u[0],u[1],u[2],u[3]),L[0]=u[0],L[1]=u[1],L[2]=u[2],L[3]=u[3];T!==A&&(g.cullFace(T),H.cull_face=T);q!==M&&(g.depthFunc(q),H.depth_func=q);P!==wa&&(g.depthMask(P),H.depth_mask=P);if(W[0]!==t[0]||W[1]!==t[1])g.depthRange(W[0],W[1]),t[0]=W[0],t[1]=W[1];qa!==r&&(g.frontFace(qa),H.frontFace=qa);
G!==ca&&(g.lineWidth(G),H.lineWidth=G);if(N[0]!==w[0]||N[1]!==w[1])g.polygonOffset(N[0],N[1]),w[0]=N[0],w[1]=N[1];if(B[0]!==ha[0]||B[1]!==ha[1])g.sampleCoverage(B[0],B[1]),ha[0]=B[0],ha[1]=B[1];if(c[0]!==e[0]||c[1]!==e[1]||c[2]!==e[2]||c[3]!==e[3])g.scissor(c[0],c[1],c[2],c[3]),e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=c[3];if(U[0]!==p[0]||U[1]!==p[1]||U[2]!==p[2])g.stencilFunc(U[0],U[1],U[2]),p[0]=U[0],p[1]=U[1],p[2]=U[2];S!==ma&&(g.stencilMask(S),H.stencil_mask=S);if(Z[0]!==h[0]||Z[1]!==h[1]||Z[2]!==h[2]||
Z[3]!==h[3])g.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]),h[0]=Z[0],h[1]=Z[1],h[2]=Z[2],h[3]=Z[3];if(y[0]!==da[0]||y[1]!==da[1]||y[2]!==da[2]||y[3]!==da[3])g.stencilOpSeparate(y[0],y[1],y[2],y[3]),da[0]=y[0],da[1]=y[1],da[2]=y[2],da[3]=y[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])g.viewport(D[0],D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3]},refresh:function(){var b,x,a,d,z,ja,gd,X,fa,R,T,A,q,M,P,wa;H.dirty=!1;x=l.blend_enable;a=l.cull_enable;d=l.depth_enable;z=l.dither;ja=l.polygonOffset_enable;
gd=l.sample_alpha;X=l.sample_enable;fa=l.scissor_enable;R=l.stencil_enable;T=l.cull_face;A=l.depth_func;q=l.depth_mask;M=l.frontFace;P=l.lineWidth;wa=l.stencil_mask;(b=J.next)?g.bindFramebuffer(36160,b.framebuffer):g.bindFramebuffer(36160,null);J.cur=b;b=V[0];b.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=null);b=V[1];b.buffer?
(g.enableVertexAttribArray(1),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);b=V[2];b.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);b=V[3];b.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,
b.buffer.buffer),g.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);b=V[4];b.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(4,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);b=V[5];b.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(5,
b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);b=V[6];b.buffer?(g.enableVertexAttribArray(6),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);b=V[7];b.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,
b.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);b=V[8];b.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);b=V[9];b.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(9),
g.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);b=V[10];b.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);b=V[11];b.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,b.x,
b.y,b.z,b.w),b.buffer=null);b=V[12];b.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);b=V[13];b.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=
null);b=V[14];b.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);b=V[15];b.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,b.buffer.buffer),g.vertexAttribPointer(15,b.size,b.type,b.normalized,b.stride,b.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);n.currentVAO=null;
n.setVAO(n.targetVAO);x?g.enable(3042):g.disable(3042);H.blend_enable=x;a?g.enable(2884):g.disable(2884);H.cull_enable=a;d?g.enable(2929):g.disable(2929);H.depth_enable=d;z?g.enable(3024):g.disable(3024);H.dither=z;ja?g.enable(32823):g.disable(32823);H.polygonOffset_enable=ja;gd?g.enable(32926):g.disable(32926);H.sample_alpha=gd;X?g.enable(32928):g.disable(32928);H.sample_enable=X;fa?g.enable(3089):g.disable(3089);H.scissor_enable=fa;R?g.enable(2960):g.disable(2960);H.stencil_enable=R;g.blendColor(f[0],
f[1],f[2],f[3]);F[0]=f[0];F[1]=f[1];F[2]=f[2];F[3]=f[3];g.blendEquationSeparate(C[0],C[1]);O[0]=C[0];O[1]=C[1];g.blendFuncSeparate(I[0],I[1],I[2],I[3]);k[0]=I[0];k[1]=I[1];k[2]=I[2];k[3]=I[3];g.colorMask(u[0],u[1],u[2],u[3]);L[0]=u[0];L[1]=u[1];L[2]=u[2];L[3]=u[3];g.cullFace(T);H.cull_face=T;g.depthFunc(A);H.depth_func=A;g.depthMask(q);H.depth_mask=q;g.depthRange(W[0],W[1]);t[0]=W[0];t[1]=W[1];g.frontFace(M);H.frontFace=M;g.lineWidth(P);H.lineWidth=P;g.polygonOffset(N[0],N[1]);w[0]=N[0];w[1]=N[1];
g.sampleCoverage(B[0],B[1]);ha[0]=B[0];ha[1]=B[1];g.scissor(c[0],c[1],c[2],c[3]);e[0]=c[0];e[1]=c[1];e[2]=c[2];e[3]=c[3];g.stencilFunc(U[0],U[1],U[2]);p[0]=U[0];p[1]=U[1];p[2]=U[2];g.stencilMask(wa);H.stencil_mask=wa;g.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]);h[0]=Z[0];h[1]=Z[1];h[2]=Z[2];h[3]=Z[3];g.stencilOpSeparate(y[0],y[1],y[2],y[3]);da[0]=y[0];da[1]=y[1];da[2]=y[2];da[3]=y[3];g.viewport(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=D[1];E[2]=D[2];E[3]=D[3]}}},$3:function(d,V,H,J){var g,l,n,f,F,C,O,I,k,
u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja;g=d.context;l=d.current;n=d.framebuffer;f=d.gl;F=d.next;C=d.shader;O=d.vao;I=F.blend_color;k=l.blend_color;u=F.blend_equation;L=l.blend_equation;W=F.blend_func;t=l.blend_func;N=F.colorMask;w=l.colorMask;B=F.depth_range;ha=l.depth_range;c=F.polygonOffset_offset;e=l.polygonOffset_offset;U=F.sample_coverage;p=l.sample_coverage;Z=F.scissor_box;h=l.scissor_box;y=F.stencil_func;da=l.stencil_func;D=F.stencil_opBack;E=l.stencil_opBack;b=F.stencil_opFront;
x=l.stencil_opFront;a=F.viewport;va=l.viewport;z={};ja={};return{batch:function(d,g){var z,R,T,A,q;z=n.next;z!==n.cur&&(z?f.bindFramebuffer(36160,z.framebuffer):f.bindFramebuffer(36160,null),n.cur=z);if(l.dirty){z=F.dither;z!==l.dither&&(z?f.enable(3024):f.disable(3024),l.dither=z);z=F.blend_enable;z!==l.blend_enable&&(z?f.enable(3042):f.disable(3042),l.blend_enable=z);z=I[0];T=I[1];A=I[2];q=I[3];if(z!==k[0]||T!==k[1]||A!==k[2]||q!==k[3])f.blendColor(z,T,A,q),k[0]=z,k[1]=T,k[2]=A,k[3]=q;z=u[0];T=
u[1];if(z!==L[0]||T!==L[1])f.blendEquationSeparate(z,T),L[0]=z,L[1]=T;z=W[0];T=W[1];A=W[2];q=W[3];if(z!==t[0]||T!==t[1]||A!==t[2]||q!==t[3])f.blendFuncSeparate(z,T,A,q),t[0]=z,t[1]=T,t[2]=A,t[3]=q;z=F.depth_enable;z!==l.depth_enable&&(z?f.enable(2929):f.disable(2929),l.depth_enable=z);z=F.depth_func;z!==l.depth_func&&(f.depthFunc(z),l.depth_func=z);z=B[0];T=B[1];if(z!==ha[0]||T!==ha[1])f.depthRange(z,T),ha[0]=z,ha[1]=T;z=F.depth_mask;z!==l.depth_mask&&(f.depthMask(z),l.depth_mask=z);z=N[0];T=N[1];
A=N[2];q=N[3];if(z!==w[0]||T!==w[1]||A!==w[2]||q!==w[3])f.colorMask(z,T,A,q),w[0]=z,w[1]=T,w[2]=A,w[3]=q;z=F.cull_enable;z!==l.cull_enable&&(z?f.enable(2884):f.disable(2884),l.cull_enable=z);z=F.cull_face;z!==l.cull_face&&(f.cullFace(z),l.cull_face=z);z=F.frontFace;z!==l.frontFace&&(f.frontFace(z),l.frontFace=z);z=F.lineWidth;z!==l.lineWidth&&(f.lineWidth(z),l.lineWidth=z);z=F.polygonOffset_enable;z!==l.polygonOffset_enable&&(z?f.enable(32823):f.disable(32823),l.polygonOffset_enable=z);z=c[0];T=c[1];
if(z!==e[0]||T!==e[1])f.polygonOffset(z,T),e[0]=z,e[1]=T;z=F.sample_alpha;z!==l.sample_alpha&&(z?f.enable(32926):f.disable(32926),l.sample_alpha=z);z=F.sample_enable;z!==l.sample_enable&&(z?f.enable(32928):f.disable(32928),l.sample_enable=z);z=U[0];T=U[1];if(z!==p[0]||T!==p[1])f.sampleCoverage(z,T),p[0]=z,p[1]=T;z=F.stencil_enable;z!==l.stencil_enable&&(z?f.enable(2960):f.disable(2960),l.stencil_enable=z);z=F.stencil_mask;z!==l.stencil_mask&&(f.stencilMask(z),l.stencil_mask=z);z=y[0];T=y[1];A=y[2];
if(z!==da[0]||T!==da[1]||A!==da[2])f.stencilFunc(z,T,A),da[0]=z,da[1]=T,da[2]=A;z=b[0];T=b[1];A=b[2];q=b[3];if(z!==x[0]||T!==x[1]||A!==x[2]||q!==x[3])f.stencilOpSeparate(z,T,A,q),x[0]=z,x[1]=T,x[2]=A,x[3]=q;z=D[0];T=D[1];A=D[2];q=D[3];if(z!==E[0]||T!==E[1]||A!==E[2]||q!==E[3])f.stencilOpSeparate(z,T,A,q),E[0]=z,E[1]=T,E[2]=A,E[3]=q;z=F.scissor_enable;z!==l.scissor_enable&&(z?f.enable(3089):f.disable(3089),l.scissor_enable=z);z=Z[0];T=Z[1];A=Z[2];q=Z[3];if(z!==h[0]||T!==h[1]||A!==h[2]||q!==h[3])f.scissor(z,
T,A,q),h[0]=z,h[1]=T,h[2]=A,h[3]=q;z=a[0];T=a[1];A=a[2];q=a[3];if(z!==va[0]||T!==va[1]||A!==va[2]||q!==va[3])f.viewport(z,T,A,q),va[0]=z,va[1]=T,va[2]=A,va[3]=q;l.dirty=!1}if(z=l.profile)R=performance.now(),V.count+=g;T=C.program(C.vert,C.frag);f.useProgram(T.program);O.setVAO(null);A=T.id;(q=ja[A])||(q=ja[A]=J(T));q.call(this,d,g);O.setVAO(null);z&&(V.cpuTime+=performance.now()-R)},draw:function(d){var g,J,R,T,A;g=n.next;g!==n.cur&&(g?f.bindFramebuffer(36160,g.framebuffer):f.bindFramebuffer(36160,
null),n.cur=g);if(l.dirty){g=F.dither;g!==l.dither&&(g?f.enable(3024):f.disable(3024),l.dither=g);g=F.blend_enable;g!==l.blend_enable&&(g?f.enable(3042):f.disable(3042),l.blend_enable=g);g=I[0];R=I[1];T=I[2];A=I[3];if(g!==k[0]||R!==k[1]||T!==k[2]||A!==k[3])f.blendColor(g,R,T,A),k[0]=g,k[1]=R,k[2]=T,k[3]=A;g=u[0];R=u[1];if(g!==L[0]||R!==L[1])f.blendEquationSeparate(g,R),L[0]=g,L[1]=R;g=W[0];R=W[1];T=W[2];A=W[3];if(g!==t[0]||R!==t[1]||T!==t[2]||A!==t[3])f.blendFuncSeparate(g,R,T,A),t[0]=g,t[1]=R,t[2]=
T,t[3]=A;g=F.depth_enable;g!==l.depth_enable&&(g?f.enable(2929):f.disable(2929),l.depth_enable=g);g=F.depth_func;g!==l.depth_func&&(f.depthFunc(g),l.depth_func=g);g=B[0];R=B[1];if(g!==ha[0]||R!==ha[1])f.depthRange(g,R),ha[0]=g,ha[1]=R;g=F.depth_mask;g!==l.depth_mask&&(f.depthMask(g),l.depth_mask=g);g=N[0];R=N[1];T=N[2];A=N[3];if(g!==w[0]||R!==w[1]||T!==w[2]||A!==w[3])f.colorMask(g,R,T,A),w[0]=g,w[1]=R,w[2]=T,w[3]=A;g=F.cull_enable;g!==l.cull_enable&&(g?f.enable(2884):f.disable(2884),l.cull_enable=
g);g=F.cull_face;g!==l.cull_face&&(f.cullFace(g),l.cull_face=g);g=F.frontFace;g!==l.frontFace&&(f.frontFace(g),l.frontFace=g);g=F.lineWidth;g!==l.lineWidth&&(f.lineWidth(g),l.lineWidth=g);g=F.polygonOffset_enable;g!==l.polygonOffset_enable&&(g?f.enable(32823):f.disable(32823),l.polygonOffset_enable=g);g=c[0];R=c[1];if(g!==e[0]||R!==e[1])f.polygonOffset(g,R),e[0]=g,e[1]=R;g=F.sample_alpha;g!==l.sample_alpha&&(g?f.enable(32926):f.disable(32926),l.sample_alpha=g);g=F.sample_enable;g!==l.sample_enable&&
(g?f.enable(32928):f.disable(32928),l.sample_enable=g);g=U[0];R=U[1];if(g!==p[0]||R!==p[1])f.sampleCoverage(g,R),p[0]=g,p[1]=R;g=F.stencil_enable;g!==l.stencil_enable&&(g?f.enable(2960):f.disable(2960),l.stencil_enable=g);g=F.stencil_mask;g!==l.stencil_mask&&(f.stencilMask(g),l.stencil_mask=g);g=y[0];R=y[1];T=y[2];if(g!==da[0]||R!==da[1]||T!==da[2])f.stencilFunc(g,R,T),da[0]=g,da[1]=R,da[2]=T;g=b[0];R=b[1];T=b[2];A=b[3];if(g!==x[0]||R!==x[1]||T!==x[2]||A!==x[3])f.stencilOpSeparate(g,R,T,A),x[0]=g,
x[1]=R,x[2]=T,x[3]=A;g=D[0];R=D[1];T=D[2];A=D[3];if(g!==E[0]||R!==E[1]||T!==E[2]||A!==E[3])f.stencilOpSeparate(g,R,T,A),E[0]=g,E[1]=R,E[2]=T,E[3]=A;g=F.scissor_enable;g!==l.scissor_enable&&(g?f.enable(3089):f.disable(3089),l.scissor_enable=g);g=Z[0];R=Z[1];T=Z[2];A=Z[3];if(g!==h[0]||R!==h[1]||T!==h[2]||A!==h[3])f.scissor(g,R,T,A),h[0]=g,h[1]=R,h[2]=T,h[3]=A;g=a[0];R=a[1];T=a[2];A=a[3];if(g!==va[0]||R!==va[1]||T!==va[2]||A!==va[3])f.viewport(g,R,T,A),va[0]=g,va[1]=R,va[2]=T,va[3]=A;l.dirty=!1}if(g=
l.profile)J=performance.now(),V.count++;R=C.program(C.vert,C.frag);f.useProgram(R.program);O.setVAO(null);T=R.id;(A=z[T])||(A=z[T]=H(R));A.call(this,d);O.setVAO(null);g&&(V.cpuTime+=performance.now()-J)},scope:function(a,b,c){var f,e;if(f=l.profile)e=performance.now(),V.count++;b(g,a,c);f&&(V.cpuTime+=performance.now()-e)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(d,
V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,gd,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,dd,Hb,ia,Q,sa,Fa,na,Aa,Ea){var la,Y,ta,Ia,Da,hb,ea,zd,$b,Ga,ac,Sb,aa,Gd,xe,Wd,ze,Ad,Rd,oe,ie,Ed,rd,ge,be,Ce,Ne,Re,Hd,Ae,re,$d,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va;la=d.attributes;Y=d.context;ta=d.current;Ia=d.draw;Da=d.elements;hb=d.framebuffer;ea=d.gl;zd=d.next;$b=
d.shader;Ga=d.uniforms;ac=d.vao;Sb=zd.blend_color;aa=ta.blend_color;Gd=zd.blend_equation;xe=ta.blend_equation;Wd=zd.blend_func;ze=ta.blend_func;Ad=zd.colorMask;Rd=ta.colorMask;oe=zd.depth_range;ie=ta.depth_range;Ed=zd.polygonOffset_offset;rd=ta.polygonOffset_offset;ge=zd.sample_coverage;be=ta.sample_coverage;Ce=zd.scissor_box;Ne=ta.scissor_box;Re=zd.stencil_func;Hd=ta.stencil_func;Ae=zd.stencil_opBack;re=ta.stencil_opBack;$d=zd.stencil_opFront;Xd=ta.stencil_opFront;Bd=zd.viewport;md=ta.viewport;$c=
{};sd={};Kc=new Float32Array(16);pd=new Float32Array(16);Ec=new Float32Array(16);ed=new Float32Array(16);Nc=new Float32Array(16);kd=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);tc=new Float32Array(16);xb=new Float32Array(16);wc=new Float32Array(16);Cb=new Float32Array(16);Ic=new Float32Array(16);lc=new Float32Array(16);Fc=new Float32Array(16);Vc=new Float32Array(16);Tc=new Float32Array(16);Bc=new Float32Array(16);ec=new Float32Array(16);Gc=new Float32Array(16);oc=new Float32Array(16);
pc=new Float32Array(16);mc=new Float32Array(16);fc=new Float32Array(16);$a=new Float32Array(16);Hc=new Float32Array(16);yb=new Float32Array(16);cb=new Float32Array(16);Nb=new Float32Array(16);ab=new Float32Array(16);ob=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,b){var c,e,h,p;c=hb.next;c!==hb.cur&&(c?ea.bindFramebuffer(36160,c.framebuffer):ea.bindFramebuffer(36160,null),hb.cur=c);if(ta.dirty){var x,d,y,z,D,E,V,H,B,U,Z,ha,da,Ga,va,ja,Sb,$b,Ka,Fb,Nc,Bb,Cb,Pa,Ce;x=Ad[0];d=Ad[1];
y=Ad[2];z=Ad[3];if(x!==Rd[0]||d!==Rd[1]||y!==Rd[2]||z!==Rd[3])ea.colorMask(x,d,y,z),Rd[0]=x,Rd[1]=d,Rd[2]=y,Rd[3]=z;D=zd.frontFace;D!==ta.frontFace&&(ea.frontFace(D),ta.frontFace=D);E=zd.polygonOffset_enable;E!==ta.polygonOffset_enable&&(E?ea.enable(32823):ea.disable(32823),ta.polygonOffset_enable=E);V=Ed[0];H=Ed[1];if(V!==rd[0]||H!==rd[1])ea.polygonOffset(V,H),rd[0]=V,rd[1]=H;B=zd.sample_alpha;B!==ta.sample_alpha&&(B?ea.enable(32926):ea.disable(32926),ta.sample_alpha=B);U=zd.sample_enable;U!==ta.sample_enable&&
(U?ea.enable(32928):ea.disable(32928),ta.sample_enable=U);Z=ge[0];ha=ge[1];if(Z!==be[0]||ha!==be[1])ea.sampleCoverage(Z,ha),be[0]=Z,be[1]=ha;da=zd.stencil_enable;da!==ta.stencil_enable&&(da?ea.enable(2960):ea.disable(2960),ta.stencil_enable=da);Ga=zd.stencil_mask;Ga!==ta.stencil_mask&&(ea.stencilMask(Ga),ta.stencil_mask=Ga);va=Re[0];ja=Re[1];Sb=Re[2];if(va!==Hd[0]||ja!==Hd[1]||Sb!==Hd[2])ea.stencilFunc(va,ja,Sb),Hd[0]=va,Hd[1]=ja,Hd[2]=Sb;$b=$d[0];Ka=$d[1];Fb=$d[2];Nc=$d[3];if($b!==Xd[0]||Ka!==Xd[1]||
Fb!==Xd[2]||Nc!==Xd[3])ea.stencilOpSeparate($b,Ka,Fb,Nc),Xd[0]=$b,Xd[1]=Ka,Xd[2]=Fb,Xd[3]=Nc;Bb=Ae[0];Cb=Ae[1];Pa=Ae[2];Ce=Ae[3];if(Bb!==re[0]||Cb!==re[1]||Pa!==re[2]||Ce!==re[3])ea.stencilOpSeparate(Bb,Cb,Pa,Ce),re[0]=Bb,re[1]=Cb,re[2]=Pa,re[3]=Ce}ea.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;ea.disable(3042);ta.blend_enable=!1;ea.blendEquationSeparate(32774,32774);xe[0]=32774;xe[1]=32774;ea.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);ta.cull_enable=
!0;ea.cullFace(1029);ta.cull_face=1029;ea.enable(2929);ta.depth_enable=!0;ea.depthFunc(513);ta.depth_func=513;ea.depthMask(!0);ta.depth_mask=!0;ea.depthRange(0,1);ie[0]=0;ie[1]=1;ea.disable(3024);ta.dither=!1;ea.lineWidth(2);ta.lineWidth=2;ea.enable(3089);ta.scissor_enable=!0;e=ta.profile;ta.profile=!1;ea.useProgram(gd.program);var Ra,xb,kd,Na,lc,Ya,Ec,Wd,mb,Oa,tc,Qa,ub,vb,Sa,nb,pd,Gd,Fc,bb,Ic,ed,Xa,Kc,Ab,Za,oe,wc,Wb,Qb,Bd,Rb,Vc;ac.setVAO(null);Ra=xa.location;xb=la[Ra];xb.buffer||ea.enableVertexAttribArray(Ra);
if(xb.type!==J.dtype||4!==xb.size||xb.buffer!==J||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)ea.bindBuffer(34962,J.buffer),ea.vertexAttribPointer(Ra,4,J.dtype,!1,0,0),xb.type=J.dtype,xb.size=4,xb.buffer=J,xb.normalized=!1,xb.offset=0,xb.stride=0;kd=La.location;Na=la[kd];Na.buffer||ea.enableVertexAttribArray(kd);if(Na.type!==g.dtype||4!==Na.size||Na.buffer!==g||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(kd,4,g.dtype,!1,0,0),Na.type=g.dtype,
Na.size=4,Na.buffer=g,Na.normalized=!1,Na.offset=0,Na.stride=0;lc=oa.location;Ya=la[lc];Ya.buffer||ea.enableVertexAttribArray(lc);if(Ya.type!==l.dtype||4!==Ya.size||Ya.buffer!==l||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(lc,4,l.dtype,!1,0,0),Ya.type=l.dtype,Ya.size=4,Ya.buffer=l,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ec=fb.location;Wd=la[Ec];Wd.buffer||ea.enableVertexAttribArray(Ec);if(Wd.type!==n.dtype||4!==Wd.size||Wd.buffer!==n||!1!==
Wd.normalized||0!==Wd.offset||0!==Wd.stride)ea.bindBuffer(34962,n.buffer),ea.vertexAttribPointer(Ec,4,n.dtype,!1,0,0),Wd.type=n.dtype,Wd.size=4,Wd.buffer=n,Wd.normalized=!1,Wd.offset=0,Wd.stride=0;mb=Ta.location;Oa=la[mb];Oa.buffer||ea.enableVertexAttribArray(mb);if(Oa.type!==f.dtype||4!==Oa.size||Oa.buffer!==f||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ea.bindBuffer(34962,f.buffer),ea.vertexAttribPointer(mb,4,f.dtype,!1,0,0),Oa.type=f.dtype,Oa.size=4,Oa.buffer=f,Oa.normalized=!1,Oa.offset=
0,Oa.stride=0;tc=v.location;Qa=la[tc];Qa.buffer||ea.enableVertexAttribArray(tc);if(Qa.type!==F.dtype||4!==Qa.size||Qa.buffer!==F||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)ea.bindBuffer(34962,F.buffer),ea.vertexAttribPointer(tc,4,F.dtype,!1,0,0),Qa.type=F.dtype,Qa.size=4,Qa.buffer=F,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;ub=m.location;vb=la[ub];vb.buffer||ea.enableVertexAttribArray(ub);if(vb.type!==C.dtype||4!==vb.size||vb.buffer!==C||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)ea.bindBuffer(34962,
C.buffer),ea.vertexAttribPointer(ub,4,C.dtype,!1,0,0),vb.type=C.dtype,vb.size=4,vb.buffer=C,vb.normalized=!1,vb.offset=0,vb.stride=0;Sa=K.location;nb=la[Sa];nb.buffer||ea.enableVertexAttribArray(Sa);if(nb.type!==O.dtype||4!==nb.size||nb.buffer!==O||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)ea.bindBuffer(34962,O.buffer),ea.vertexAttribPointer(Sa,4,O.dtype,!1,0,0),nb.type=O.dtype,nb.size=4,nb.buffer=O,nb.normalized=!1,nb.offset=0,nb.stride=0;pd=ua.location;Gd=la[pd];Gd.buffer||ea.enableVertexAttribArray(pd);
if(Gd.type!==I.dtype||4!==Gd.size||Gd.buffer!==I||!1!==Gd.normalized||0!==Gd.offset||0!==Gd.stride)ea.bindBuffer(34962,I.buffer),ea.vertexAttribPointer(pd,4,I.dtype,!1,0,0),Gd.type=I.dtype,Gd.size=4,Gd.buffer=I,Gd.normalized=!1,Gd.offset=0,Gd.stride=0;Fc=Ba.location;bb=la[Fc];bb.buffer||ea.enableVertexAttribArray(Fc);if(bb.type!==k.dtype||4!==bb.size||bb.buffer!==k||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(Fc,4,k.dtype,!1,0,0),bb.type=k.dtype,
bb.size=4,bb.buffer=k,bb.normalized=!1,bb.offset=0,bb.stride=0;Ic=dd.location;ed=la[Ic];ed.buffer||ea.enableVertexAttribArray(Ic);if(ed.type!==u.dtype||4!==ed.size||ed.buffer!==u||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)ea.bindBuffer(34962,u.buffer),ea.vertexAttribPointer(Ic,4,u.dtype,!1,0,0),ed.type=u.dtype,ed.size=4,ed.buffer=u,ed.normalized=!1,ed.offset=0,ed.stride=0;Xa=Hb.location;Kc=la[Xa];Kc.buffer||ea.enableVertexAttribArray(Xa);if(Kc.type!==L.dtype||4!==Kc.size||Kc.buffer!==L||!1!==
Kc.normalized||0!==Kc.offset||0!==Kc.stride)ea.bindBuffer(34962,L.buffer),ea.vertexAttribPointer(Xa,4,L.dtype,!1,0,0),Kc.type=L.dtype,Kc.size=4,Kc.buffer=L,Kc.normalized=!1,Kc.offset=0,Kc.stride=0;Ab=ia.location;Za=la[Ab];Za.buffer||ea.enableVertexAttribArray(Ab);if(Za.type!==W.dtype||4!==Za.size||Za.buffer!==W||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ea.bindBuffer(34962,W.buffer),ea.vertexAttribPointer(Ab,4,W.dtype,!1,0,0),Za.type=W.dtype,Za.size=4,Za.buffer=W,Za.normalized=!1,Za.offset=
0,Za.stride=0;oe=Q.location;wc=la[oe];wc.buffer||ea.enableVertexAttribArray(oe);if(wc.type!==t.dtype||4!==wc.size||wc.buffer!==t||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)ea.bindBuffer(34962,t.buffer),ea.vertexAttribPointer(oe,4,t.dtype,!1,0,0),wc.type=t.dtype,wc.size=4,wc.buffer=t,wc.normalized=!1,wc.offset=0,wc.stride=0;Wb=sa.location;Qb=la[Wb];Qb.buffer||ea.enableVertexAttribArray(Wb);if(Qb.type!==N.dtype||4!==Qb.size||Qb.buffer!==N||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ea.bindBuffer(34962,
N.buffer),ea.vertexAttribPointer(Wb,4,N.dtype,!1,0,0),Qb.type=N.dtype,Qb.size=4,Qb.buffer=N,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Bd=fa.location;Rb=la[Bd];Rb.buffer||ea.enableVertexAttribArray(Bd);if(Rb.type!==w.dtype||4!==Rb.size||Rb.buffer!==w||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)ea.bindBuffer(34962,w.buffer),ea.vertexAttribPointer(Bd,4,w.dtype,!1,0,0),Rb.type=w.dtype,Rb.size=4,Rb.buffer=w,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;ea.uniform1i(Fa.location,X.bind());(Vc=Ia.elements)?
ea.bindBuffer(34963,Vc.buffer.buffer):ac.currentVAO&&(Vc=Da.getElements(ac.currentVAO.elements))&&ea.bindBuffer(34963,Vc.buffer.buffer);for(h=0;h<b;++h){p=a[h];var Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,ba,se,id,qf,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Ma,ke,te,le,je,he,ue,ee;$c.height=p.viewportHeight;$c.width=p.viewportWidth;$c.x=p.viewportX;$c.y=p.viewportY;Cc=$c.x|0;ud=$c.y|0;Lc="width"in $c?$c.width|0:Y.framebufferWidth-Cc;Wc="height"in
$c?$c.height|0:Y.framebufferHeight-ud;vd=Y.viewportWidth;Y.viewportWidth=Lc;nc=Y.viewportHeight;Y.viewportHeight=Wc;ea.viewport(Cc,ud,Lc,Wc);md[0]=Cc;md[1]=ud;md[2]=Lc;md[3]=Wc;sd.height=p.scissorHeight;sd.width=p.scissorWidth;sd.x=p.scissorX;sd.y=p.scissorY;vc=sd.x|0;hc=sd.y|0;db="width"in sd?sd.width|0:Y.framebufferWidth-vc;rc="height"in sd?sd.height|0:Y.framebufferHeight-hc;ea.scissor(vc,hc,db,rc);Ne[0]=vc;Ne[1]=hc;Ne[2]=db;Ne[3]=rc;Tb=p.dim0A;ea.uniformMatrix4fv(T.location,!1,Array.isArray(Tb)||
Tb instanceof Float32Array?Tb:(Tc[0]=Tb[0],Tc[1]=Tb[1],Tc[2]=Tb[2],Tc[3]=Tb[3],Tc[4]=Tb[4],Tc[5]=Tb[5],Tc[6]=Tb[6],Tc[7]=Tb[7],Tc[8]=Tb[8],Tc[9]=Tb[9],Tc[10]=Tb[10],Tc[11]=Tb[11],Tc[12]=Tb[12],Tc[13]=Tb[13],Tc[14]=Tb[14],Tc[15]=Tb[15],Tc));Xb=p.dim1A;ea.uniformMatrix4fv(P.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Bc[0]=Xb[0],Bc[1]=Xb[1],Bc[2]=Xb[2],Bc[3]=Xb[3],Bc[4]=Xb[4],Bc[5]=Xb[5],Bc[6]=Xb[6],Bc[7]=Xb[7],Bc[8]=Xb[8],Bc[9]=Xb[9],Bc[10]=Xb[10],Bc[11]=Xb[11],Bc[12]=Xb[12],Bc[13]=
Xb[13],Bc[14]=Xb[14],Bc[15]=Xb[15],Bc));dc=p.dim0B;ea.uniformMatrix4fv(A.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));ic=p.dim1B;ea.uniformMatrix4fv(wa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Gc[0]=ic[0],Gc[1]=ic[1],Gc[2]=ic[2],Gc[3]=ic[3],Gc[4]=ic[4],Gc[5]=
ic[5],Gc[6]=ic[6],Gc[7]=ic[7],Gc[8]=ic[8],Gc[9]=ic[9],Gc[10]=ic[10],Gc[11]=ic[11],Gc[12]=ic[12],Gc[13]=ic[13],Gc[14]=ic[14],Gc[15]=ic[15],Gc));xc=p.dim0C;ea.uniformMatrix4fv(q.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));zc=p.dim1C;ea.uniformMatrix4fv(qa.location,!1,Array.isArray(zc)||
zc instanceof Float32Array?zc:(pc[0]=zc[0],pc[1]=zc[1],pc[2]=zc[2],pc[3]=zc[3],pc[4]=zc[4],pc[5]=zc[5],pc[6]=zc[6],pc[7]=zc[7],pc[8]=zc[8],pc[9]=zc[9],pc[10]=zc[10],pc[11]=zc[11],pc[12]=zc[12],pc[13]=zc[13],pc[14]=zc[14],pc[15]=zc[15],pc));ad=p.dim0D;ea.uniformMatrix4fv(M.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(mc[0]=ad[0],mc[1]=ad[1],mc[2]=ad[2],mc[3]=ad[3],mc[4]=ad[4],mc[5]=ad[5],mc[6]=ad[6],mc[7]=ad[7],mc[8]=ad[8],mc[9]=ad[9],mc[10]=ad[10],mc[11]=ad[11],mc[12]=ad[12],mc[13]=
ad[13],mc[14]=ad[14],mc[15]=ad[15],mc));Oc=p.dim1D;ea.uniformMatrix4fv(r.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(fc[0]=Oc[0],fc[1]=Oc[1],fc[2]=Oc[2],fc[3]=Oc[3],fc[4]=Oc[4],fc[5]=Oc[5],fc[6]=Oc[6],fc[7]=Oc[7],fc[8]=Oc[8],fc[9]=Oc[9],fc[10]=Oc[10],fc[11]=Oc[11],fc[12]=Oc[12],fc[13]=Oc[13],fc[14]=Oc[14],fc[15]=Oc[15],fc));Pc=p.loA;ea.uniformMatrix4fv(za.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:($a[0]=Pc[0],$a[1]=Pc[1],$a[2]=Pc[2],$a[3]=Pc[3],$a[4]=Pc[4],$a[5]=
Pc[5],$a[6]=Pc[6],$a[7]=Pc[7],$a[8]=Pc[8],$a[9]=Pc[9],$a[10]=Pc[10],$a[11]=Pc[11],$a[12]=Pc[12],$a[13]=Pc[13],$a[14]=Pc[14],$a[15]=Pc[15],$a));Qc=p.hiA;ea.uniformMatrix4fv(ca.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:(Hc[0]=Qc[0],Hc[1]=Qc[1],Hc[2]=Qc[2],Hc[3]=Qc[3],Hc[4]=Qc[4],Hc[5]=Qc[5],Hc[6]=Qc[6],Hc[7]=Qc[7],Hc[8]=Qc[8],Hc[9]=Qc[9],Hc[10]=Qc[10],Hc[11]=Qc[11],Hc[12]=Qc[12],Hc[13]=Qc[13],Hc[14]=Qc[14],Hc[15]=Qc[15],Hc));Xc=p.loB;ea.uniformMatrix4fv(ya.location,!1,Array.isArray(Xc)||
Xc instanceof Float32Array?Xc:(yb[0]=Xc[0],yb[1]=Xc[1],yb[2]=Xc[2],yb[3]=Xc[3],yb[4]=Xc[4],yb[5]=Xc[5],yb[6]=Xc[6],yb[7]=Xc[7],yb[8]=Xc[8],yb[9]=Xc[9],yb[10]=Xc[10],yb[11]=Xc[11],yb[12]=Xc[12],yb[13]=Xc[13],yb[14]=Xc[14],yb[15]=Xc[15],yb));ld=p.hiB;ea.uniformMatrix4fv(S.location,!1,Array.isArray(ld)||ld instanceof Float32Array?ld:(cb[0]=ld[0],cb[1]=ld[1],cb[2]=ld[2],cb[3]=ld[3],cb[4]=ld[4],cb[5]=ld[5],cb[6]=ld[6],cb[7]=ld[7],cb[8]=ld[8],cb[9]=ld[9],cb[10]=ld[10],cb[11]=ld[11],cb[12]=ld[12],cb[13]=
ld[13],cb[14]=ld[14],cb[15]=ld[15],cb));bd=p.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:(Nb[0]=bd[0],Nb[1]=bd[1],Nb[2]=bd[2],Nb[3]=bd[3],Nb[4]=bd[4],Nb[5]=bd[5],Nb[6]=bd[6],Nb[7]=bd[7],Nb[8]=bd[8],Nb[9]=bd[9],Nb[10]=bd[10],Nb[11]=bd[11],Nb[12]=bd[12],Nb[13]=bd[13],Nb[14]=bd[14],Nb[15]=bd[15],Nb));Yc=p.hiC;ea.uniformMatrix4fv(ma.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(ab[0]=Yc[0],ab[1]=Yc[1],ab[2]=Yc[2],ab[3]=Yc[3],ab[4]=Yc[4],ab[5]=
Yc[5],ab[6]=Yc[6],ab[7]=Yc[7],ab[8]=Yc[8],ab[9]=Yc[9],ab[10]=Yc[10],ab[11]=Yc[11],ab[12]=Yc[12],ab[13]=Yc[13],ab[14]=Yc[14],ab[15]=Yc[15],ab));kc=p.loD;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(ob[0]=kc[0],ob[1]=kc[1],ob[2]=kc[2],ob[3]=kc[3],ob[4]=kc[4],ob[5]=kc[5],ob[6]=kc[6],ob[7]=kc[7],ob[8]=kc[8],ob[9]=kc[9],ob[10]=kc[10],ob[11]=kc[11],ob[12]=kc[12],ob[13]=kc[13],ob[14]=kc[14],ob[15]=kc[15],ob));cc=p.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(cc)||
cc instanceof Float32Array?cc:(Va[0]=cc[0],Va[1]=cc[1],Va[2]=cc[2],Va[3]=cc[3],Va[4]=cc[4],Va[5]=cc[5],Va[6]=cc[6],Va[7]=cc[7],Va[8]=cc[8],Va[9]=cc[9],Va[10]=cc[10],Va[11]=cc[11],Va[12]=cc[12],Va[13]=cc[13],Va[14]=cc[14],Va[15]=cc[15],Va));Zc=p.resolution;Sc=Zc[0];yc=Zc[1];h&&cd===Sc&&hd===yc||(cd=Sc,hd=yc,ea.uniform2f(na.location,Sc,yc));qd=p.viewBoxPos;ba=qd[0];id=qd[1];h&&se===ba&&qf===id||(se=ba,qf=id,ea.uniform2f(Aa.location,ba,id));Od=p.viewBoxSize;Yd=Od[0];Pd=Od[1];h&&de===Yd&&Kd===Pd||(de=
Yd,Kd=Pd,ea.uniform2f(Ea.location,Yd,Pd));Id=p.maskHeight;h&&od===Id||(od=Id,ea.uniform1f(ka.location,Id));Rc=p.drwLayer;h&&wd===Rc||(wd=Rc,ea.uniform1f(G.location,Rc));td=p.contextColor;jd=td[0];Dd=td[1];Ma=td[2];te=td[3];h&&yd===jd&&Fd===Dd&&ke===Ma&&le===te||(yd=jd,Fd=Dd,ke=Ma,le=te,ea.uniform4f(R.location,jd,Dd,Ma,te));(je=p.maskTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);he=je._texture;ea.uniform1i(pa.location,he.bind());ue=p.offset;if(ee=p.count)Vc?ea.drawElements(1,ee,Vc.type,
ue<<(Vc.type-5121>>1)):ea.drawArrays(1,ue,ee),Y.viewportWidth=vd,Y.viewportHeight=nc,he.unbind()}X.unbind();ta.dirty=!0;ac.setVAO(null);ta.profile=e},draw:function(a){var b,c,e,h,p,x;b=hb.next;b!==hb.cur&&(b?ea.bindFramebuffer(36160,b.framebuffer):ea.bindFramebuffer(36160,null),hb.cur=b);if(ta.dirty){b=Ad[0];x=Ad[1];c=Ad[2];e=Ad[3];if(b!==Rd[0]||x!==Rd[1]||c!==Rd[2]||e!==Rd[3])ea.colorMask(b,x,c,e),Rd[0]=b,Rd[1]=x,Rd[2]=c,Rd[3]=e;b=zd.frontFace;b!==ta.frontFace&&(ea.frontFace(b),ta.frontFace=b);b=
zd.polygonOffset_enable;b!==ta.polygonOffset_enable&&(b?ea.enable(32823):ea.disable(32823),ta.polygonOffset_enable=b);b=Ed[0];x=Ed[1];if(b!==rd[0]||x!==rd[1])ea.polygonOffset(b,x),rd[0]=b,rd[1]=x;b=zd.sample_alpha;b!==ta.sample_alpha&&(b?ea.enable(32926):ea.disable(32926),ta.sample_alpha=b);b=zd.sample_enable;b!==ta.sample_enable&&(b?ea.enable(32928):ea.disable(32928),ta.sample_enable=b);b=ge[0];x=ge[1];if(b!==be[0]||x!==be[1])ea.sampleCoverage(b,x),be[0]=b,be[1]=x;b=zd.stencil_enable;b!==ta.stencil_enable&&
(b?ea.enable(2960):ea.disable(2960),ta.stencil_enable=b);b=zd.stencil_mask;b!==ta.stencil_mask&&(ea.stencilMask(b),ta.stencil_mask=b);b=Re[0];x=Re[1];c=Re[2];if(b!==Hd[0]||x!==Hd[1]||c!==Hd[2])ea.stencilFunc(b,x,c),Hd[0]=b,Hd[1]=x,Hd[2]=c;b=$d[0];x=$d[1];c=$d[2];e=$d[3];if(b!==Xd[0]||x!==Xd[1]||c!==Xd[2]||e!==Xd[3])ea.stencilOpSeparate(b,x,c,e),Xd[0]=b,Xd[1]=x,Xd[2]=c,Xd[3]=e;b=Ae[0];x=Ae[1];c=Ae[2];e=Ae[3];if(b!==re[0]||x!==re[1]||c!==re[2]||e!==re[3])ea.stencilOpSeparate(b,x,c,e),re[0]=b,re[1]=
x,re[2]=c,re[3]=e}$c.height=a.viewportHeight;$c.width=a.viewportWidth;$c.x=a.viewportX;$c.y=a.viewportY;c=$c.x|0;e=$c.y|0;h="width"in $c?$c.width|0:Y.framebufferWidth-c;p="height"in $c?$c.height|0:Y.framebufferHeight-e;b=Y.viewportWidth;Y.viewportWidth=h;x=Y.viewportHeight;Y.viewportHeight=p;ea.viewport(c,e,h,p);md[0]=c;md[1]=e;md[2]=h;md[3]=p;ea.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;ea.disable(3042);ta.blend_enable=!1;ea.blendEquationSeparate(32774,32774);xe[0]=32774;xe[1]=32774;ea.blendFuncSeparate(770,
771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);ta.cull_enable=!0;ea.cullFace(1029);ta.cull_face=1029;ea.enable(2929);ta.depth_enable=!0;ea.depthFunc(513);ta.depth_func=513;ea.depthMask(!0);ta.depth_mask=!0;ea.depthRange(0,1);ie[0]=0;ie[1]=1;ea.disable(3024);ta.dither=!1;ea.lineWidth(2);ta.lineWidth=2;sd.height=a.scissorHeight;sd.width=a.scissorWidth;sd.x=a.scissorX;sd.y=a.scissorY;c=sd.x|0;e=sd.y|0;h="width"in sd?sd.width|0:Y.framebufferWidth-c;p="height"in sd?sd.height|0:Y.framebufferHeight-
e;ea.scissor(c,e,h,p);Ne[0]=c;Ne[1]=e;Ne[2]=h;Ne[3]=p;ea.enable(3089);ta.scissor_enable=!0;c=ta.profile;ta.profile=!1;ea.useProgram(H.program);ac.setVAO(null);e=xa.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==J.dtype||4!==h.size||h.buffer!==J||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,J.buffer),ea.vertexAttribPointer(e,4,J.dtype,!1,0,0),h.type=J.dtype,h.size=4,h.buffer=J,h.normalized=!1,h.offset=0,h.stride=0;e=La.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);
if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(e,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;e=oa.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==l.dtype||4!==h.size||h.buffer!==l||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(e,4,l.dtype,!1,0,0),h.type=l.dtype,h.size=4,h.buffer=l,
h.normalized=!1,h.offset=0,h.stride=0;e=fb.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,n.buffer),ea.vertexAttribPointer(e,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,h.normalized=!1,h.offset=0,h.stride=0;e=Ta.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==f.dtype||4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,
f.buffer),ea.vertexAttribPointer(e,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;e=v.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==F.dtype||4!==h.size||h.buffer!==F||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,F.buffer),ea.vertexAttribPointer(e,4,F.dtype,!1,0,0),h.type=F.dtype,h.size=4,h.buffer=F,h.normalized=!1,h.offset=0,h.stride=0;e=m.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==C.dtype||
4!==h.size||h.buffer!==C||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,C.buffer),ea.vertexAttribPointer(e,4,C.dtype,!1,0,0),h.type=C.dtype,h.size=4,h.buffer=C,h.normalized=!1,h.offset=0,h.stride=0;e=K.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==O.dtype||4!==h.size||h.buffer!==O||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,O.buffer),ea.vertexAttribPointer(e,4,O.dtype,!1,0,0),h.type=O.dtype,h.size=4,h.buffer=O,h.normalized=!1,h.offset=
0,h.stride=0;e=ua.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==I.dtype||4!==h.size||h.buffer!==I||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,I.buffer),ea.vertexAttribPointer(e,4,I.dtype,!1,0,0),h.type=I.dtype,h.size=4,h.buffer=I,h.normalized=!1,h.offset=0,h.stride=0;e=Ba.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(e,
4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,h.normalized=!1,h.offset=0,h.stride=0;e=dd.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,u.buffer),ea.vertexAttribPointer(e,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;e=Hb.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==L.dtype||4!==h.size||h.buffer!==L||
!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,L.buffer),ea.vertexAttribPointer(e,4,L.dtype,!1,0,0),h.type=L.dtype,h.size=4,h.buffer=L,h.normalized=!1,h.offset=0,h.stride=0;e=ia.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==W.dtype||4!==h.size||h.buffer!==W||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,W.buffer),ea.vertexAttribPointer(e,4,W.dtype,!1,0,0),h.type=W.dtype,h.size=4,h.buffer=W,h.normalized=!1,h.offset=0,h.stride=0;e=Q.location;
h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==t.dtype||4!==h.size||h.buffer!==t||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,t.buffer),ea.vertexAttribPointer(e,4,t.dtype,!1,0,0),h.type=t.dtype,h.size=4,h.buffer=t,h.normalized=!1,h.offset=0,h.stride=0;e=sa.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==N.dtype||4!==h.size||h.buffer!==N||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,N.buffer),ea.vertexAttribPointer(e,4,N.dtype,
!1,0,0),h.type=N.dtype,h.size=4,h.buffer=N,h.normalized=!1,h.offset=0,h.stride=0;e=fa.location;h=la[e];h.buffer||ea.enableVertexAttribArray(e);if(h.type!==w.dtype||4!==h.size||h.buffer!==w||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,w.buffer),ea.vertexAttribPointer(e,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;e=a.dim0A;ea.uniformMatrix4fv(T.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Kc[0]=e[0],Kc[1]=e[1],Kc[2]=
e[2],Kc[3]=e[3],Kc[4]=e[4],Kc[5]=e[5],Kc[6]=e[6],Kc[7]=e[7],Kc[8]=e[8],Kc[9]=e[9],Kc[10]=e[10],Kc[11]=e[11],Kc[12]=e[12],Kc[13]=e[13],Kc[14]=e[14],Kc[15]=e[15],Kc));e=a.dim1A;ea.uniformMatrix4fv(P.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(pd[0]=e[0],pd[1]=e[1],pd[2]=e[2],pd[3]=e[3],pd[4]=e[4],pd[5]=e[5],pd[6]=e[6],pd[7]=e[7],pd[8]=e[8],pd[9]=e[9],pd[10]=e[10],pd[11]=e[11],pd[12]=e[12],pd[13]=e[13],pd[14]=e[14],pd[15]=e[15],pd));e=a.dim0B;ea.uniformMatrix4fv(A.location,!1,Array.isArray(e)||
e instanceof Float32Array?e:(Ec[0]=e[0],Ec[1]=e[1],Ec[2]=e[2],Ec[3]=e[3],Ec[4]=e[4],Ec[5]=e[5],Ec[6]=e[6],Ec[7]=e[7],Ec[8]=e[8],Ec[9]=e[9],Ec[10]=e[10],Ec[11]=e[11],Ec[12]=e[12],Ec[13]=e[13],Ec[14]=e[14],Ec[15]=e[15],Ec));e=a.dim1B;ea.uniformMatrix4fv(wa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ed[0]=e[0],ed[1]=e[1],ed[2]=e[2],ed[3]=e[3],ed[4]=e[4],ed[5]=e[5],ed[6]=e[6],ed[7]=e[7],ed[8]=e[8],ed[9]=e[9],ed[10]=e[10],ed[11]=e[11],ed[12]=e[12],ed[13]=e[13],ed[14]=e[14],ed[15]=e[15],
ed));e=a.dim0C;ea.uniformMatrix4fv(q.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Nc[0]=e[0],Nc[1]=e[1],Nc[2]=e[2],Nc[3]=e[3],Nc[4]=e[4],Nc[5]=e[5],Nc[6]=e[6],Nc[7]=e[7],Nc[8]=e[8],Nc[9]=e[9],Nc[10]=e[10],Nc[11]=e[11],Nc[12]=e[12],Nc[13]=e[13],Nc[14]=e[14],Nc[15]=e[15],Nc));e=a.dim1C;ea.uniformMatrix4fv(qa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(kd[0]=e[0],kd[1]=e[1],kd[2]=e[2],kd[3]=e[3],kd[4]=e[4],kd[5]=e[5],kd[6]=e[6],kd[7]=e[7],kd[8]=e[8],kd[9]=e[9],kd[10]=e[10],
kd[11]=e[11],kd[12]=e[12],kd[13]=e[13],kd[14]=e[14],kd[15]=e[15],kd));e=a.dim0D;ea.uniformMatrix4fv(M.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Bb[0]=e[0],Bb[1]=e[1],Bb[2]=e[2],Bb[3]=e[3],Bb[4]=e[4],Bb[5]=e[5],Bb[6]=e[6],Bb[7]=e[7],Bb[8]=e[8],Bb[9]=e[9],Bb[10]=e[10],Bb[11]=e[11],Bb[12]=e[12],Bb[13]=e[13],Bb[14]=e[14],Bb[15]=e[15],Bb));e=a.dim1D;ea.uniformMatrix4fv(r.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fb[0]=e[0],Fb[1]=e[1],Fb[2]=e[2],Fb[3]=e[3],Fb[4]=e[4],Fb[5]=
e[5],Fb[6]=e[6],Fb[7]=e[7],Fb[8]=e[8],Fb[9]=e[9],Fb[10]=e[10],Fb[11]=e[11],Fb[12]=e[12],Fb[13]=e[13],Fb[14]=e[14],Fb[15]=e[15],Fb));e=a.loA;ea.uniformMatrix4fv(za.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(tc[0]=e[0],tc[1]=e[1],tc[2]=e[2],tc[3]=e[3],tc[4]=e[4],tc[5]=e[5],tc[6]=e[6],tc[7]=e[7],tc[8]=e[8],tc[9]=e[9],tc[10]=e[10],tc[11]=e[11],tc[12]=e[12],tc[13]=e[13],tc[14]=e[14],tc[15]=e[15],tc));e=a.hiA;ea.uniformMatrix4fv(ca.location,!1,Array.isArray(e)||e instanceof Float32Array?
e:(xb[0]=e[0],xb[1]=e[1],xb[2]=e[2],xb[3]=e[3],xb[4]=e[4],xb[5]=e[5],xb[6]=e[6],xb[7]=e[7],xb[8]=e[8],xb[9]=e[9],xb[10]=e[10],xb[11]=e[11],xb[12]=e[12],xb[13]=e[13],xb[14]=e[14],xb[15]=e[15],xb));e=a.loB;ea.uniformMatrix4fv(ya.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(wc[0]=e[0],wc[1]=e[1],wc[2]=e[2],wc[3]=e[3],wc[4]=e[4],wc[5]=e[5],wc[6]=e[6],wc[7]=e[7],wc[8]=e[8],wc[9]=e[9],wc[10]=e[10],wc[11]=e[11],wc[12]=e[12],wc[13]=e[13],wc[14]=e[14],wc[15]=e[15],wc));e=a.hiB;ea.uniformMatrix4fv(S.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(Cb[0]=e[0],Cb[1]=e[1],Cb[2]=e[2],Cb[3]=e[3],Cb[4]=e[4],Cb[5]=e[5],Cb[6]=e[6],Cb[7]=e[7],Cb[8]=e[8],Cb[9]=e[9],Cb[10]=e[10],Cb[11]=e[11],Cb[12]=e[12],Cb[13]=e[13],Cb[14]=e[14],Cb[15]=e[15],Cb));e=a.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ic[0]=e[0],Ic[1]=e[1],Ic[2]=e[2],Ic[3]=e[3],Ic[4]=e[4],Ic[5]=e[5],Ic[6]=e[6],Ic[7]=e[7],Ic[8]=e[8],Ic[9]=e[9],Ic[10]=e[10],Ic[11]=e[11],Ic[12]=e[12],Ic[13]=e[13],Ic[14]=
e[14],Ic[15]=e[15],Ic));e=a.hiC;ea.uniformMatrix4fv(ma.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(lc[0]=e[0],lc[1]=e[1],lc[2]=e[2],lc[3]=e[3],lc[4]=e[4],lc[5]=e[5],lc[6]=e[6],lc[7]=e[7],lc[8]=e[8],lc[9]=e[9],lc[10]=e[10],lc[11]=e[11],lc[12]=e[12],lc[13]=e[13],lc[14]=e[14],lc[15]=e[15],lc));e=a.loD;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fc[0]=e[0],Fc[1]=e[1],Fc[2]=e[2],Fc[3]=e[3],Fc[4]=e[4],Fc[5]=e[5],Fc[6]=e[6],Fc[7]=e[7],Fc[8]=e[8],Fc[9]=
e[9],Fc[10]=e[10],Fc[11]=e[11],Fc[12]=e[12],Fc[13]=e[13],Fc[14]=e[14],Fc[15]=e[15],Fc));e=a.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Vc[0]=e[0],Vc[1]=e[1],Vc[2]=e[2],Vc[3]=e[3],Vc[4]=e[4],Vc[5]=e[5],Vc[6]=e[6],Vc[7]=e[7],Vc[8]=e[8],Vc[9]=e[9],Vc[10]=e[10],Vc[11]=e[11],Vc[12]=e[12],Vc[13]=e[13],Vc[14]=e[14],Vc[15]=e[15],Vc));e=a.resolution;ea.uniform2f(na.location,e[0],e[1]);e=a.viewBoxPos;ea.uniform2f(Aa.location,e[0],e[1]);e=a.viewBoxSize;ea.uniform2f(Ea.location,
e[0],e[1]);ea.uniform1f(ka.location,a.maskHeight);ea.uniform1f(G.location,a.drwLayer);e=a.contextColor;ea.uniform4f(R.location,e[0],e[1],e[2],e[3]);(e=a.maskTexture)&&"framebuffer"===e._reglType&&(e=e.color[0]);e=e._texture;ea.uniform1i(pa.location,e.bind());ea.uniform1i(Fa.location,B.bind());(h=Ia.elements)?ea.bindBuffer(34963,h.buffer.buffer):ac.currentVAO&&(h=Da.getElements(ac.currentVAO.elements))&&ea.bindBuffer(34963,h.buffer.buffer);p=a.offset;if(a=a.count)h?ea.drawElements(1,a,h.type,p<<(h.type-
5121>>1)):ea.drawArrays(1,p,a),ta.dirty=!0,ac.setVAO(null),Y.viewportWidth=b,Y.viewportHeight=x,ta.profile=c,e.unbind(),B.unbind()},scope:function(m,r,q){var v,Q,K,oa,d,sa,La,Fa,G,T,S,fb,A,ga,na,ia,R,la,P,ua,M,ca,Aa,V,Ea,H,ea,B,wa,ra,ya,ka,X,Ta,fa,xa,Ba,pa,Ca,qa,ma,Hb,za,dd,Da,hb,gd,$a,ec,Fb,Nc,Bb,fc,oc,xb,Cb,be,Ae,mc,ac,$d,pc,cb,ab,Va,aa,Gc,Re,kd,lc,ob,Ec,re,ed,Hd,Kc,tc,yb,wc,xe,pd,Fc,Bc,Ic,Rd,md,Xd,Nb,Ed,Hc,Ne,Tc,Qf,Vc,ge,Ad,ze,rd,ie,ba,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Ma,ke,te,le,je,he,ue,ee,me,
Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,We,Vd,ae,Xe,gf,lf,df,hf,jf,kf,rf,mf,sf,Bf,Cf,Qe,Ee,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ef,bf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ff,cf,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=
m.viewportHeight;$c.width=m.viewportWidth;$c.x=m.viewportX;$c.y=m.viewportY;v=$c.x|0;Q=$c.y|0;K="width"in $c?$c.width|0:Y.framebufferWidth-v;oa="height"in $c?$c.height|0:Y.framebufferHeight-Q;d=Y.viewportWidth;Y.viewportWidth=K;sa=Y.viewportHeight;Y.viewportHeight=oa;La=Bd[0];Bd[0]=v;Fa=Bd[1];Bd[1]=Q;G=Bd[2];Bd[2]=K;T=Bd[3];Bd[3]=oa;S=Sb[0];Sb[0]=0;fb=Sb[1];Sb[1]=0;A=Sb[2];Sb[2]=0;ga=Sb[3];Sb[3]=0;na=zd.blend_enable;zd.blend_enable=!1;ia=Gd[0];Gd[0]=32774;R=Gd[1];Gd[1]=32774;la=Wd[0];Wd[0]=770;P=
Wd[1];Wd[1]=771;ua=Wd[2];Wd[2]=1;M=Wd[3];Wd[3]=1;ca=zd.cull_enable;zd.cull_enable=!0;Aa=zd.cull_face;zd.cull_face=1029;V=zd.depth_enable;zd.depth_enable=!0;Ea=zd.depth_func;zd.depth_func=513;H=zd.depth_mask;zd.depth_mask=!0;ea=oe[0];oe[0]=0;B=oe[1];oe[1]=1;wa=zd.dither;zd.dither=!1;ra=zd.lineWidth;zd.lineWidth=2;sd.height=m.scissorHeight;sd.width=m.scissorWidth;sd.x=m.scissorX;sd.y=m.scissorY;ya=sd.x|0;ka=sd.y|0;X="width"in sd?sd.width|0:Y.framebufferWidth-ya;Ta="height"in sd?sd.height|0:Y.framebufferHeight-
ka;fa=Ce[0];Ce[0]=ya;xa=Ce[1];Ce[1]=ka;Ba=Ce[2];Ce[2]=X;pa=Ce[3];Ce[3]=Ta;Ca=zd.scissor_enable;zd.scissor_enable=!0;qa=ta.profile;ta.profile=!1;ma=m.offset;Hb=Ia.offset;Ia.offset=ma;za=m.count;dd=Ia.count;Ia.count=za;Da=Ia.primitive;Ia.primitive=1;hb=m.contextColor;gd=Ga[24];Ga[24]=hb;$a=m.dim0A;ec=Ga[3];Ga[3]=$a;Fb=m.dim0B;Nc=Ga[5];Ga[5]=Fb;Bb=m.dim0C;fc=Ga[7];Ga[7]=Bb;oc=m.dim0D;xb=Ga[9];Ga[9]=oc;Cb=m.dim1A;be=Ga[4];Ga[4]=Cb;Ae=m.dim1B;mc=Ga[6];Ga[6]=Ae;ac=m.dim1C;$d=Ga[8];Ga[8]=ac;pc=m.dim1D;cb=
Ga[10];Ga[10]=pc;ab=m.drwLayer;Va=Ga[23];Ga[23]=ab;aa=m.hiA;Gc=Ga[12];Ga[12]=aa;Re=m.hiB;kd=Ga[14];Ga[14]=Re;lc=m.hiC;ob=Ga[16];Ga[16]=lc;Ec=m.hiD;re=Ga[18];Ga[18]=Ec;ed=m.loA;Hd=Ga[11];Ga[11]=ed;Kc=m.loB;tc=Ga[13];Ga[13]=Kc;yb=m.loC;wc=Ga[15];Ga[15]=yb;xe=m.loD;pd=Ga[17];Ga[17]=xe;Fc=m.maskHeight;Bc=Ga[22];Ga[22]=Fc;Ic=m.maskTexture;Rd=Ga[25];Ga[25]=Ic;md=Ga[26];Ga[26]=ha;Xd=m.resolution;Nb=Ga[19];Ga[19]=Xd;Ed=m.viewBoxPos;Hc=Ga[20];Ga[20]=Ed;Ne=m.viewBoxSize;Tc=Ga[21];Ga[21]=Ne;Qf=c.buffer;c.buffer=
w;Vc=c.divisor;c.divisor=0;ge=c.normalized;c.normalized=!1;Ad=c.offset;c.offset=0;ze=c.size;c.size=0;rd=c.state;c.state=1;ie=c.stride;c.stride=0;ba=c.type;c.type=w.dtype;Pd=c.w;c.w=0;Kd=c.x;c.x=0;Id=c.y;c.y=0;od=c.z;c.z=0;Rc=e.buffer;e.buffer=J;wd=e.divisor;e.divisor=0;td=e.normalized;e.normalized=!1;jd=e.offset;e.offset=0;yd=e.size;e.size=0;Dd=e.state;e.state=1;Fd=e.stride;e.stride=0;Ma=e.type;e.type=J.dtype;ke=e.w;e.w=0;te=e.x;e.x=0;le=e.y;e.y=0;je=e.z;e.z=0;he=U.buffer;U.buffer=g;ue=U.divisor;
U.divisor=0;ee=U.normalized;U.normalized=!1;me=U.offset;U.offset=0;Mc=U.size;U.size=0;fd=U.state;U.state=1;ve=U.stride;U.stride=0;pe=U.type;U.type=g.dtype;Md=U.w;U.w=0;Qd=U.x;U.x=0;Sd=U.y;U.y=0;Td=U.z;U.z=0;ne=p.buffer;p.buffer=l;ye=p.divisor;p.divisor=0;Be=p.normalized;p.normalized=!1;qe=p.offset;p.offset=0;Se=p.size;p.size=0;Te=p.state;p.state=1;Oe=p.stride;p.stride=0;we=p.type;p.type=l.dtype;Ge=p.w;p.w=0;Ie=p.x;p.x=0;Je=p.y;p.y=0;Ke=p.z;p.z=0;He=Z.buffer;Z.buffer=n;Nd=Z.divisor;Z.divisor=0;Zd=
Z.normalized;Z.normalized=!1;ce=Z.offset;Z.offset=0;fe=Z.size;Z.size=0;Le=Z.state;Z.state=1;Jd=Z.stride;Z.stride=0;Ud=Z.type;Z.type=n.dtype;De=Z.w;Z.w=0;Me=Z.x;Z.x=0;af=Z.y;Z.y=0;$e=Z.z;Z.z=0;Ue=h.buffer;h.buffer=f;Pe=h.divisor;h.divisor=0;Ze=h.normalized;h.normalized=!1;Ye=h.offset;h.offset=0;Ve=h.size;h.size=0;We=h.state;h.state=1;Vd=h.stride;h.stride=0;ae=h.type;h.type=f.dtype;Xe=h.w;h.w=0;gf=h.x;h.x=0;lf=h.y;h.y=0;df=h.z;h.z=0;hf=y.buffer;y.buffer=F;jf=y.divisor;y.divisor=0;kf=y.normalized;y.normalized=
!1;rf=y.offset;y.offset=0;mf=y.size;y.size=0;sf=y.state;y.state=1;Bf=y.stride;y.stride=0;Cf=y.type;y.type=F.dtype;Qe=y.w;y.w=0;Ee=y.x;y.x=0;nf=y.y;y.y=0;of=y.z;y.z=0;Df=da.buffer;da.buffer=C;Gf=da.divisor;da.divisor=0;Af=da.normalized;da.normalized=!1;Ef=da.offset;da.offset=0;Ff=da.size;da.size=0;wf=da.state;da.state=1;xf=da.stride;da.stride=0;vf=da.type;da.type=C.dtype;yf=da.w;da.w=0;zf=da.x;da.x=0;If=da.y;da.y=0;Jf=da.z;da.z=0;Kf=D.buffer;D.buffer=O;Lf=D.divisor;D.divisor=0;tf=D.normalized;D.normalized=
!1;Rf=D.offset;D.offset=0;Hf=D.size;D.size=0;uf=D.state;D.state=1;dg=D.stride;D.stride=0;Sf=D.type;D.type=O.dtype;Tf=D.w;D.w=0;qg=D.x;D.x=0;ef=D.y;D.y=0;bf=D.z;D.z=0;Mf=E.buffer;E.buffer=I;Nf=E.divisor;E.divisor=0;eg=E.normalized;E.normalized=!1;fg=E.offset;E.offset=0;gg=E.size;E.size=0;hg=E.state;E.state=1;ig=E.stride;E.stride=0;Wf=E.type;E.type=I.dtype;Uf=E.w;E.w=0;Xf=E.x;E.x=0;Yf=E.y;E.y=0;Zf=E.z;E.z=0;jg=b.buffer;b.buffer=k;rg=b.divisor;b.divisor=0;sg=b.normalized;b.normalized=!1;tg=b.offset;
b.offset=0;ug=b.size;b.size=0;vg=b.state;b.state=1;wg=b.stride;b.stride=0;xg=b.type;b.type=k.dtype;yg=b.w;b.w=0;zg=b.x;b.x=0;Ag=b.y;b.y=0;Bg=b.z;b.z=0;ff=x.buffer;x.buffer=u;cf=x.divisor;x.divisor=0;Of=x.normalized;x.normalized=!1;Pf=x.offset;x.offset=0;kg=x.size;x.size=0;lg=x.state;x.state=1;mg=x.stride;x.stride=0;ng=x.type;x.type=u.dtype;og=x.w;x.w=0;$f=x.x;x.x=0;Vf=x.y;x.y=0;ag=x.z;x.z=0;bg=a.buffer;a.buffer=L;cg=a.divisor;a.divisor=0;pg=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;
a.size=0;Eg=a.state;a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=L.dtype;Hg=a.w;a.w=0;Ig=a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=va.buffer;va.buffer=W;Mg=va.divisor;va.divisor=0;Ng=va.normalized;va.normalized=!1;Og=va.offset;va.offset=0;Pg=va.size;va.size=0;Qg=va.state;va.state=1;Rg=va.stride;va.stride=0;Sg=va.type;va.type=W.dtype;Tg=va.w;va.w=0;Ug=va.x;va.x=0;Vg=va.y;va.y=0;Wg=va.z;va.z=0;Xg=z.buffer;z.buffer=t;Yg=z.divisor;z.divisor=0;Zg=z.normalized;z.normalized=!1;$g=z.offset;z.offset=0;ah=
z.size;z.size=0;bh=z.state;z.state=1;ch=z.stride;z.stride=0;dh=z.type;z.type=t.dtype;eh=z.w;z.w=0;fh=z.x;z.x=0;gh=z.y;z.y=0;hh=z.z;z.z=0;ih=ja.buffer;ja.buffer=N;jh=ja.divisor;ja.divisor=0;kh=ja.normalized;ja.normalized=!1;lh=ja.offset;ja.offset=0;mh=ja.size;ja.size=0;nh=ja.state;ja.state=1;oh=ja.stride;ja.stride=0;ph=ja.type;ja.type=N.dtype;qh=ja.w;ja.w=0;rh=ja.x;ja.x=0;sh=ja.y;ja.y=0;th=ja.z;ja.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ta.dirty=!0;r(Y,m,q);Y.viewportWidth=d;Y.viewportHeight=
sa;Bd[0]=La;Bd[1]=Fa;Bd[2]=G;Bd[3]=T;Sb[0]=S;Sb[1]=fb;Sb[2]=A;Sb[3]=ga;zd.blend_enable=na;Gd[0]=ia;Gd[1]=R;Wd[0]=la;Wd[1]=P;Wd[2]=ua;Wd[3]=M;zd.cull_enable=ca;zd.cull_face=Aa;zd.depth_enable=V;zd.depth_func=Ea;zd.depth_mask=H;oe[0]=ea;oe[1]=B;zd.dither=wa;zd.lineWidth=ra;Ce[0]=fa;Ce[1]=xa;Ce[2]=Ba;Ce[3]=pa;zd.scissor_enable=Ca;ta.profile=qa;Ia.offset=Hb;Ia.count=dd;Ia.primitive=Da;Ga[24]=gd;Ga[3]=ec;Ga[5]=Nc;Ga[7]=fc;Ga[9]=xb;Ga[4]=be;Ga[6]=mc;Ga[8]=$d;Ga[10]=cb;Ga[23]=Va;Ga[12]=Gc;Ga[14]=kd;Ga[16]=
ob;Ga[18]=re;Ga[11]=Hd;Ga[13]=tc;Ga[15]=wc;Ga[17]=pd;Ga[22]=Bc;Ga[25]=Rd;Ga[26]=md;Ga[19]=Nb;Ga[20]=Hc;Ga[21]=Tc;c.buffer=Qf;c.divisor=Vc;c.normalized=ge;c.offset=Ad;c.size=ze;c.state=rd;c.stride=ie;c.type=ba;c.w=Pd;c.x=Kd;c.y=Id;c.z=od;e.buffer=Rc;e.divisor=wd;e.normalized=td;e.offset=jd;e.size=yd;e.state=Dd;e.stride=Fd;e.type=Ma;e.w=ke;e.x=te;e.y=le;e.z=je;U.buffer=he;U.divisor=ue;U.normalized=ee;U.offset=me;U.size=Mc;U.state=fd;U.stride=ve;U.type=pe;U.w=Md;U.x=Qd;U.y=Sd;U.z=Td;p.buffer=ne;p.divisor=
ye;p.normalized=Be;p.offset=qe;p.size=Se;p.state=Te;p.stride=Oe;p.type=we;p.w=Ge;p.x=Ie;p.y=Je;p.z=Ke;Z.buffer=He;Z.divisor=Nd;Z.normalized=Zd;Z.offset=ce;Z.size=fe;Z.state=Le;Z.stride=Jd;Z.type=Ud;Z.w=De;Z.x=Me;Z.y=af;Z.z=$e;h.buffer=Ue;h.divisor=Pe;h.normalized=Ze;h.offset=Ye;h.size=Ve;h.state=We;h.stride=Vd;h.type=ae;h.w=Xe;h.x=gf;h.y=lf;h.z=df;y.buffer=hf;y.divisor=jf;y.normalized=kf;y.offset=rf;y.size=mf;y.state=sf;y.stride=Bf;y.type=Cf;y.w=Qe;y.x=Ee;y.y=nf;y.z=of;da.buffer=Df;da.divisor=Gf;
da.normalized=Af;da.offset=Ef;da.size=Ff;da.state=wf;da.stride=xf;da.type=vf;da.w=yf;da.x=zf;da.y=If;da.z=Jf;D.buffer=Kf;D.divisor=Lf;D.normalized=tf;D.offset=Rf;D.size=Hf;D.state=uf;D.stride=dg;D.type=Sf;D.w=Tf;D.x=qg;D.y=ef;D.z=bf;E.buffer=Mf;E.divisor=Nf;E.normalized=eg;E.offset=fg;E.size=gg;E.state=hg;E.stride=ig;E.type=Wf;E.w=Uf;E.x=Xf;E.y=Yf;E.z=Zf;b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=ug;b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;x.buffer=ff;x.divisor=
cf;x.normalized=Of;x.offset=Pf;x.size=kg;x.state=lg;x.stride=mg;x.type=ng;x.w=og;x.x=$f;x.y=Vf;x.z=ag;a.buffer=bg;a.divisor=cg;a.normalized=pg;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;va.buffer=Lg;va.divisor=Mg;va.normalized=Ng;va.offset=Og;va.size=Pg;va.state=Qg;va.stride=Rg;va.type=Sg;va.w=Tg;va.x=Ug;va.y=Vg;va.z=Wg;z.buffer=Xg;z.divisor=Yg;z.normalized=Zg;z.offset=$g;z.size=ah;z.state=bh;z.stride=ch;z.type=dh;z.w=eh;z.x=fh;z.y=gh;z.z=hh;ja.buffer=ih;ja.divisor=
jh;ja.normalized=kh;ja.offset=lh;ja.size=mh;ja.state=nh;ja.stride=oh;ja.type=ph;ja.w=qh;ja.x=rh;ja.y=sh;ja.z=th;$b.vert=uh;$b.frag=vh;ta.dirty=!0}}},$1:function(d,V){var H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b;H=d.attributes;J=d.current;g=d.framebuffer;l=d.gl;n=d.next;f=d.vao;F=n.blend_color;C=J.blend_color;O=n.blend_equation;I=J.blend_equation;k=n.blend_func;u=J.blend_func;L=n.colorMask;W=J.colorMask;t=n.depth_range;N=J.depth_range;w=n.polygonOffset_offset;B=J.polygonOffset_offset;
ha=n.sample_coverage;c=J.sample_coverage;e=n.scissor_box;U=J.scissor_box;p=n.stencil_func;Z=J.stencil_func;h=n.stencil_opBack;y=J.stencil_opBack;da=n.stencil_opFront;D=J.stencil_opFront;E=n.viewport;b=J.viewport;return{poll:function(){var f,a,d,z,V,H,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra;J.dirty=!1;a=n.blend_enable;d=n.cull_enable;z=n.depth_enable;V=n.dither;H=n.polygonOffset_enable;X=n.sample_alpha;fa=n.sample_enable;R=n.scissor_enable;T=n.stencil_enable;A=n.cull_face;q=J.cull_face;M=n.depth_func;
P=J.depth_func;wa=n.depth_mask;qa=J.depth_mask;r=n.frontFace;G=J.frontFace;ca=n.lineWidth;S=J.lineWidth;ma=n.stencil_mask;ra=J.stencil_mask;f=g.next;f!==g.cur&&(f?l.bindFramebuffer(36160,f.framebuffer):l.bindFramebuffer(36160,null),g.cur=f);a!==J.blend_enable&&(a?l.enable(3042):l.disable(3042),J.blend_enable=a);d!==J.cull_enable&&(d?l.enable(2884):l.disable(2884),J.cull_enable=d);z!==J.depth_enable&&(z?l.enable(2929):l.disable(2929),J.depth_enable=z);V!==J.dither&&(V?l.enable(3024):l.disable(3024),
J.dither=V);H!==J.polygonOffset_enable&&(H?l.enable(32823):l.disable(32823),J.polygonOffset_enable=H);X!==J.sample_alpha&&(X?l.enable(32926):l.disable(32926),J.sample_alpha=X);fa!==J.sample_enable&&(fa?l.enable(32928):l.disable(32928),J.sample_enable=fa);R!==J.scissor_enable&&(R?l.enable(3089):l.disable(3089),J.scissor_enable=R);T!==J.stencil_enable&&(T?l.enable(2960):l.disable(2960),J.stencil_enable=T);if(F[0]!==C[0]||F[1]!==C[1]||F[2]!==C[2]||F[3]!==C[3])l.blendColor(F[0],F[1],F[2],F[3]),C[0]=F[0],
C[1]=F[1],C[2]=F[2],C[3]=F[3];if(O[0]!==I[0]||O[1]!==I[1])l.blendEquationSeparate(O[0],O[1]),I[0]=O[0],I[1]=O[1];if(k[0]!==u[0]||k[1]!==u[1]||k[2]!==u[2]||k[3]!==u[3])l.blendFuncSeparate(k[0],k[1],k[2],k[3]),u[0]=k[0],u[1]=k[1],u[2]=k[2],u[3]=k[3];if(L[0]!==W[0]||L[1]!==W[1]||L[2]!==W[2]||L[3]!==W[3])l.colorMask(L[0],L[1],L[2],L[3]),W[0]=L[0],W[1]=L[1],W[2]=L[2],W[3]=L[3];A!==q&&(l.cullFace(A),J.cull_face=A);M!==P&&(l.depthFunc(M),J.depth_func=M);wa!==qa&&(l.depthMask(wa),J.depth_mask=wa);if(t[0]!==
N[0]||t[1]!==N[1])l.depthRange(t[0],t[1]),N[0]=t[0],N[1]=t[1];r!==G&&(l.frontFace(r),J.frontFace=r);ca!==S&&(l.lineWidth(ca),J.lineWidth=ca);if(w[0]!==B[0]||w[1]!==B[1])l.polygonOffset(w[0],w[1]),B[0]=w[0],B[1]=w[1];if(ha[0]!==c[0]||ha[1]!==c[1])l.sampleCoverage(ha[0],ha[1]),c[0]=ha[0],c[1]=ha[1];if(e[0]!==U[0]||e[1]!==U[1]||e[2]!==U[2]||e[3]!==U[3])l.scissor(e[0],e[1],e[2],e[3]),U[0]=e[0],U[1]=e[1],U[2]=e[2],U[3]=e[3];if(p[0]!==Z[0]||p[1]!==Z[1]||p[2]!==Z[2])l.stencilFunc(p[0],p[1],p[2]),Z[0]=p[0],
Z[1]=p[1],Z[2]=p[2];ma!==ra&&(l.stencilMask(ma),J.stencil_mask=ma);if(h[0]!==y[0]||h[1]!==y[1]||h[2]!==y[2]||h[3]!==y[3])l.stencilOpSeparate(h[0],h[1],h[2],h[3]),y[0]=h[0],y[1]=h[1],y[2]=h[2],y[3]=h[3];if(da[0]!==D[0]||da[1]!==D[1]||da[2]!==D[2]||da[3]!==D[3])l.stencilOpSeparate(da[0],da[1],da[2],da[3]),D[0]=da[0],D[1]=da[1],D[2]=da[2],D[3]=da[3];if(E[0]!==b[0]||E[1]!==b[1]||E[2]!==b[2]||E[3]!==b[3])l.viewport(E[0],E[1],E[2],E[3]),b[0]=E[0],b[1]=E[1],b[2]=E[2],b[3]=E[3]},refresh:function(){var x,
a,d,z,ja,gd,X,fa,R,T,A,q,M,P,wa,qa;J.dirty=!1;a=n.blend_enable;d=n.cull_enable;z=n.depth_enable;ja=n.dither;gd=n.polygonOffset_enable;X=n.sample_alpha;fa=n.sample_enable;R=n.scissor_enable;T=n.stencil_enable;A=n.cull_face;q=n.depth_func;M=n.depth_mask;P=n.frontFace;wa=n.lineWidth;qa=n.stencil_mask;(x=g.next)?l.bindFramebuffer(36160,x.framebuffer):l.bindFramebuffer(36160,null);g.cur=x;x=H[0];x.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(0,x.size,x.type,
x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(0,x.divisor);x=H[1];x.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(1,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(1,x.divisor);x=H[2];x.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,x.buffer.buffer),
l.vertexAttribPointer(2,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(2),l.vertexAttrib4f(2,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(2,x.divisor);x=H[3];x.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(3,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(3,x.divisor);x=H[4];x.buffer?(l.enableVertexAttribArray(4),
l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(4,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(4,x.divisor);x=H[5];x.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(5,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(5,x.divisor);
x=H[6];x.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(6,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(6,x.divisor);x=H[7];x.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(7,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,x.x,x.y,x.z,x.w),x.buffer=
null);V.vertexAttribDivisorANGLE(7,x.divisor);x=H[8];x.buffer?(l.enableVertexAttribArray(8),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(8,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(8,x.divisor);x=H[9];x.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(9,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(9),
l.vertexAttrib4f(9,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(9,x.divisor);x=H[10];x.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(10,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(10,x.divisor);x=H[11];x.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(11,x.size,x.type,x.normalized,
x.stride,x.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(11,x.divisor);x=H[12];x.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(12,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(12,x.divisor);x=H[13];x.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,x.buffer.buffer),
l.vertexAttribPointer(13,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(13),l.vertexAttrib4f(13,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(13,x.divisor);x=H[14];x.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(14,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(14,x.divisor);x=H[15];x.buffer?(l.enableVertexAttribArray(15),
l.bindBuffer(34962,x.buffer.buffer),l.vertexAttribPointer(15,x.size,x.type,x.normalized,x.stride,x.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,x.x,x.y,x.z,x.w),x.buffer=null);V.vertexAttribDivisorANGLE(15,x.divisor);f.currentVAO=null;f.setVAO(f.targetVAO);a?l.enable(3042):l.disable(3042);J.blend_enable=a;d?l.enable(2884):l.disable(2884);J.cull_enable=d;z?l.enable(2929):l.disable(2929);J.depth_enable=z;ja?l.enable(3024):l.disable(3024);J.dither=ja;gd?l.enable(32823):l.disable(32823);
J.polygonOffset_enable=gd;X?l.enable(32926):l.disable(32926);J.sample_alpha=X;fa?l.enable(32928):l.disable(32928);J.sample_enable=fa;R?l.enable(3089):l.disable(3089);J.scissor_enable=R;T?l.enable(2960):l.disable(2960);J.stencil_enable=T;l.blendColor(F[0],F[1],F[2],F[3]);C[0]=F[0];C[1]=F[1];C[2]=F[2];C[3]=F[3];l.blendEquationSeparate(O[0],O[1]);I[0]=O[0];I[1]=O[1];l.blendFuncSeparate(k[0],k[1],k[2],k[3]);u[0]=k[0];u[1]=k[1];u[2]=k[2];u[3]=k[3];l.colorMask(L[0],L[1],L[2],L[3]);W[0]=L[0];W[1]=L[1];W[2]=
L[2];W[3]=L[3];l.cullFace(A);J.cull_face=A;l.depthFunc(q);J.depth_func=q;l.depthMask(M);J.depth_mask=M;l.depthRange(t[0],t[1]);N[0]=t[0];N[1]=t[1];l.frontFace(P);J.frontFace=P;l.lineWidth(wa);J.lineWidth=wa;l.polygonOffset(w[0],w[1]);B[0]=w[0];B[1]=w[1];l.sampleCoverage(ha[0],ha[1]);c[0]=ha[0];c[1]=ha[1];l.scissor(e[0],e[1],e[2],e[3]);U[0]=e[0];U[1]=e[1];U[2]=e[2];U[3]=e[3];l.stencilFunc(p[0],p[1],p[2]);Z[0]=p[0];Z[1]=p[1];Z[2]=p[2];l.stencilMask(qa);J.stencil_mask=qa;l.stencilOpSeparate(h[0],h[1],
h[2],h[3]);y[0]=h[0];y[1]=h[1];y[2]=h[2];y[3]=h[3];l.stencilOpSeparate(da[0],da[1],da[2],da[3]);D[0]=da[0];D[1]=da[1];D[2]=da[2];D[3]=da[3];l.viewport(E[0],E[1],E[2],E[3]);b[0]=E[0];b[1]=E[1];b[2]=E[2];b[3]=E[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,gd,X,fa,R,T,A,q,M,P,wa,qa){var r,G,ca,S,ma,ra,za,ya,
ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,dd,Hb,ia,Q,sa,Fa,na,Aa,Ea,la,Y,ta,Ia,Da,hb,ea,zd,$b,Ga,ac,Sb;r=d.attributes;G=d.buffer;ca=d.context;S=d.current;ma=d.draw;ra=d.elements;za=d.extensions;ya=d.framebuffer;ga=d.gl;Ca=d.isBufferArgs;ka=d.next;pa=d.shader;xa=d.uniforms;La=d.vao;oa=ka.blend_color;fb=S.blend_color;Ta=ka.blend_equation;v=S.blend_equation;m=ka.blend_func;K=S.blend_func;ua=ka.colorMask;Ba=S.colorMask;dd=ka.depth_range;Hb=S.depth_range;ia=ka.polygonOffset_offset;Q=S.polygonOffset_offset;
sa=ka.sample_coverage;Fa=S.sample_coverage;na=ka.scissor_box;Aa=S.scissor_box;Ea=ka.stencil_func;la=S.stencil_func;Y=ka.stencil_opBack;ta=S.stencil_opBack;Ia=ka.stencil_opFront;Da=S.stencil_opFront;hb=ka.viewport;ea=S.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=H;$b.divisor=1;Ga={};Ga.buffer=J;Ga.divisor=1;ac={};ac.buffer=g;ac.divisor=1;Sb={};Sb.buffer=l;Sb.divisor=1;return{batch:function(e,c){var f,m,h,l,p,n;f=ya.next;
f!==ya.cur&&(f?ga.bindFramebuffer(36160,f.framebuffer):ga.bindFramebuffer(36160,null),ya.cur=f);if(S.dirty){var g,oa,d,w,t,na,J,H,C,B,L,U,F,O,N,Ta,Z,ha,xa,W,pa,hb,aa,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc;g=ka.dither;g!==S.dither&&(g?ga.enable(3024):ga.disable(3024),S.dither=g);oa=ka.depth_func;oa!==S.depth_func&&(ga.depthFunc(oa),S.depth_func=oa);d=dd[0];w=dd[1];if(d!==Hb[0]||w!==Hb[1])ga.depthRange(d,w),Hb[0]=d,Hb[1]=w;t=ka.depth_mask;t!==S.depth_mask&&(ga.depthMask(t),S.depth_mask=t);na=ua[0];J=ua[1];H=
ua[2];C=ua[3];if(na!==Ba[0]||J!==Ba[1]||H!==Ba[2]||C!==Ba[3])ga.colorMask(na,J,H,C),Ba[0]=na,Ba[1]=J,Ba[2]=H,Ba[3]=C;B=ka.cull_enable;B!==S.cull_enable&&(B?ga.enable(2884):ga.disable(2884),S.cull_enable=B);L=ka.cull_face;L!==S.cull_face&&(ga.cullFace(L),S.cull_face=L);U=ka.frontFace;U!==S.frontFace&&(ga.frontFace(U),S.frontFace=U);F=ka.lineWidth;F!==S.lineWidth&&(ga.lineWidth(F),S.lineWidth=F);O=ka.polygonOffset_enable;O!==S.polygonOffset_enable&&(O?ga.enable(32823):ga.disable(32823),S.polygonOffset_enable=
O);N=ia[0];Ta=ia[1];if(N!==Q[0]||Ta!==Q[1])ga.polygonOffset(N,Ta),Q[0]=N,Q[1]=Ta;Z=ka.sample_alpha;Z!==S.sample_alpha&&(Z?ga.enable(32926):ga.disable(32926),S.sample_alpha=Z);ha=ka.sample_enable;ha!==S.sample_enable&&(ha?ga.enable(32928):ga.disable(32928),S.sample_enable=ha);xa=sa[0];W=sa[1];if(xa!==Fa[0]||W!==Fa[1])ga.sampleCoverage(xa,W),Fa[0]=xa,Fa[1]=W;pa=ka.stencil_enable;pa!==S.stencil_enable&&(pa?ga.enable(2960):ga.disable(2960),S.stencil_enable=pa);hb=ka.stencil_mask;hb!==S.stencil_mask&&
(ga.stencilMask(hb),S.stencil_mask=hb);aa=Ea[0];Bb=Ea[1];Fb=Ea[2];if(aa!==la[0]||Bb!==la[1]||Fb!==la[2])ga.stencilFunc(aa,Bb,Fb),la[0]=aa,la[1]=Bb,la[2]=Fb;tc=Ia[0];xb=Ia[1];wc=Ia[2];Cb=Ia[3];if(tc!==Da[0]||xb!==Da[1]||wc!==Da[2]||Cb!==Da[3])ga.stencilOpSeparate(tc,xb,wc,Cb),Da[0]=tc,Da[1]=xb,Da[2]=wc,Da[3]=Cb;Ic=Y[0];lc=Y[1];Fc=Y[2];Vc=Y[3];if(Ic!==ta[0]||lc!==ta[1]||Fc!==ta[2]||Vc!==ta[3])ga.stencilOpSeparate(Ic,lc,Fc,Vc),ta[0]=Ic,ta[1]=lc,ta[2]=Fc,ta[3]=Vc}ga.blendColor(0,0,0,0);fb[0]=0;fb[1]=
0;fb[2]=0;fb[3]=0;ga.enable(3042);S.blend_enable=!0;ga.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ga.blendFuncSeparate(770,771,773,1);K[0]=770;K[1]=771;K[2]=773;K[3]=1;ga.disable(2929);S.depth_enable=!1;ga.enable(3089);S.scissor_enable=!0;if(m=S.profile)h=performance.now(),V.count+=c;ga.useProgram(y.program);l=za.angle_instanced_arrays;var Tc,Bc,ec,Gc,oc,pc,mc,fc;La.setVAO(null);Tc=ja.location;Bc=r[Tc];Bc.buffer||ga.enableVertexAttribArray(Tc);if(5126!==Bc.type||2!==Bc.size||Bc.buffer!==
I||!1!==Bc.normalized||0!==Bc.offset||24!==Bc.stride)ga.bindBuffer(34962,I.buffer),ga.vertexAttribPointer(Tc,2,5126,!1,24,0),Bc.type=5126,Bc.size=2,Bc.buffer=I,Bc.normalized=!1,Bc.offset=0,Bc.stride=24;0!==Bc.divisor&&(l.vertexAttribDivisorANGLE(Tc,0),Bc.divisor=0);ec=X.location;Gc=r[ec];Gc.buffer||ga.enableVertexAttribArray(ec);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==k||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)ga.bindBuffer(34962,k.buffer),ga.vertexAttribPointer(ec,2,5126,!1,24,8),Gc.type=
5126,Gc.size=2,Gc.buffer=k,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(l.vertexAttribDivisorANGLE(ec,0),Gc.divisor=0);oc=a.location;pc=r[oc];pc.buffer||ga.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==u||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)ga.bindBuffer(34962,u.buffer),ga.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=u,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(l.vertexAttribDivisorANGLE(oc,0),pc.divisor=
0);(mc=ma.elements)?ga.bindBuffer(34963,mc.buffer.buffer):La.currentVAO&&(mc=ra.getElements(La.currentVAO.elements))&&ga.bindBuffer(34963,mc.buffer.buffer);fc=ma.offset;for(p=0;p<c;++p){n=e[p];var $a,Hc,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,ba,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,
hd,qd,pf,se,id,Ma,Od,Yd,de,Pd,Kd,Id,od,Rc;$a=n.viewport;Hc=$a.x|0;yb=$a.y|0;cb="width"in $a?$a.width|0:ca.framebufferWidth-Hc;Nb="height"in $a?$a.height|0:ca.framebufferHeight-yb;ab=ca.viewportWidth;ca.viewportWidth=cb;ob=ca.viewportHeight;ca.viewportHeight=Nb;ga.viewport(Hc,yb,cb,Nb);ea[0]=Hc;ea[1]=yb;ea[2]=cb;ea[3]=Nb;Va=n.viewport;Cd=Va.x|0;Ib=Va.y|0;Jb="width"in Va?Va.width|0:ca.framebufferWidth-Cd;qc="height"in Va?Va.height|0:ca.framebufferHeight-Ib;ga.scissor(Cd,Ib,Jb,qc);Aa[0]=Cd;Aa[1]=Ib;
Aa[2]=Jb;Aa[3]=qc;Ob=da.call(this,ca,n,p);ac.offset=Ob;kb=!1;Gb=null;Db=0;wb=!1;Yb=ib=0;Pb=1;qb=0;Ua=5126;jb=bc=zb=Ub=0;Ca(ac)?(kb=!0,Gb=G.createStream(34962,ac),Ua=Gb.dtype):(Gb=G.getBuffer(ac))?Ua=Gb.dtype:"constant"in ac?(Pb=2,"number"===typeof ac.constant?(zb=ac.constant,bc=jb=Ub=0):(zb=0<ac.constant.length?ac.constant[0]:0,bc=1<ac.constant.length?ac.constant[1]:0,jb=2<ac.constant.length?ac.constant[2]:0,Ub=3<ac.constant.length?ac.constant[3]:0)):(Gb=Ca(ac.buffer)?G.createStream(34962,ac.buffer):
G.getBuffer(ac.buffer),Ua="type"in ac?zd[ac.type]:Gb.dtype,wb=!!ac.normalized,Yb=ac.size|0,ib=ac.offset|0,qb=ac.stride|0,Db=ac.divisor|0);pb=T.location;Ha=r[pb];if(1===Pb){Ha.buffer||ga.enableVertexAttribArray(pb);rb=Yb||2;if(Ha.type!==Ua||Ha.size!==rb||Ha.buffer!==Gb||Ha.normalized!==wb||Ha.offset!==ib||Ha.stride!==qb)ga.bindBuffer(34962,Gb.buffer),ga.vertexAttribPointer(pb,rb,Ua,wb,qb,ib),Ha.type=Ua,Ha.size=rb,Ha.buffer=Gb,Ha.normalized=wb,Ha.offset=ib,Ha.stride=qb;Ha.divisor!==Db&&(l.vertexAttribDivisorANGLE(pb,
Db),Ha.divisor=Db)}else if(Ha.buffer&&(ga.disableVertexAttribArray(pb),Ha.buffer=null),Ha.x!==zb||Ha.y!==bc||Ha.z!==jb||Ha.w!==Ub)ga.vertexAttrib4f(pb,zb,bc,jb,Ub),Ha.x=zb,Ha.y=bc,Ha.z=jb,Ha.w=Ub;Ja=D.call(this,ca,n,p);Sb.offset=Ja;eb=!1;gb=null;Ka=0;lb=!1;tb=Wa=0;sb=1;Pa=0;Ac=5126;Na=Eb=Kb=Ra=0;Ca(Sb)?(eb=!0,gb=G.createStream(34962,Sb),Ac=gb.dtype):(gb=G.getBuffer(Sb))?Ac=gb.dtype:"constant"in Sb?(sb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Na=Ra=0):(Kb=0<Sb.constant.length?Sb.constant[0]:
0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Na=2<Sb.constant.length?Sb.constant[2]:0,Ra=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Ca(Sb.buffer)?G.createStream(34962,Sb.buffer):G.getBuffer(Sb.buffer),Ac="type"in Sb?zd[Sb.type]:gb.dtype,lb=!!Sb.normalized,tb=Sb.size|0,Wa=Sb.offset|0,Pa=Sb.stride|0,Ka=Sb.divisor|0);xd=A.location;Ya=r[xd];if(1===sb){Ya.buffer||ga.enableVertexAttribArray(xd);Lb=tb||2;if(Ya.type!==Ac||Ya.size!==Lb||Ya.buffer!==gb||Ya.normalized!==lb||Ya.offset!==Wa||Ya.stride!==Pa)ga.bindBuffer(34962,
gb.buffer),ga.vertexAttribPointer(xd,Lb,Ac,lb,Pa,Wa),Ya.type=Ac,Ya.size=Lb,Ya.buffer=gb,Ya.normalized=lb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==Ka&&(l.vertexAttribDivisorANGLE(xd,Ka),Ya.divisor=Ka)}else if(Ya.buffer&&(ga.disableVertexAttribArray(xd),Ya.buffer=null),Ya.x!==Kb||Ya.y!==Eb||Ya.z!==Na||Ya.w!==Ra)ga.vertexAttrib4f(xd,Kb,Eb,Na,Ra),Ya.x=Kb,Ya.y=Eb,Ya.z=Na,Ya.w=Ra;Mb=E.call(this,ca,n,p);Ga.offset=Mb;mb=!1;Oa=null;Zb=0;Qa=!1;vb=ub=0;Sa=1;nb=0;gc=5126;jc=bb=uc=Dc=0;Ca(Ga)?(mb=!0,Oa=G.createStream(34962,
Ga),gc=Oa.dtype):(Oa=G.getBuffer(Ga))?gc=Oa.dtype:"constant"in Ga?(Sa=2,"number"===typeof Ga.constant?(uc=Ga.constant,bb=jc=Dc=0):(uc=0<Ga.constant.length?Ga.constant[0]:0,bb=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,Dc=3<Ga.constant.length?Ga.constant[3]:0)):(Oa=Ca(Ga.buffer)?G.createStream(34962,Ga.buffer):G.getBuffer(Ga.buffer),gc="type"in Ga?zd[Ga.type]:Oa.dtype,Qa=!!Ga.normalized,vb=Ga.size|0,ub=Ga.offset|0,nb=Ga.stride|0,Zb=Ga.divisor|0);nd=gd.location;Xa=
r[nd];if(1===Sa){Xa.buffer||ga.enableVertexAttribArray(nd);Uc=vb||4;if(Xa.type!==gc||Xa.size!==Uc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==ub||Xa.stride!==nb)ga.bindBuffer(34962,Oa.buffer),ga.vertexAttribPointer(nd,Uc,gc,Qa,nb,ub),Xa.type=gc,Xa.size=Uc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=ub,Xa.stride=nb;Xa.divisor!==Zb&&(l.vertexAttribDivisorANGLE(nd,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(ga.disableVertexAttribArray(nd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==Dc)ga.vertexAttrib4f(nd,
uc,bb,jc,Dc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=Dc;Ab=b.call(this,ca,n,p);$b.offset=Ab;Za=!1;Vb=null;sc=0;Wb=!1;Jc=Qb=0;Rb=1;ba=0;Cc=5126;vd=Wc=Lc=ud=0;Ca($b)?(Za=!0,Vb=G.createStream(34962,$b),Cc=Vb.dtype):(Vb=G.getBuffer($b))?Cc=Vb.dtype:"constant"in $b?(Rb=2,"number"===typeof $b.constant?(Lc=$b.constant,Wc=vd=ud=0):(Lc=0<$b.constant.length?$b.constant[0]:0,Wc=1<$b.constant.length?$b.constant[1]:0,vd=2<$b.constant.length?$b.constant[2]:0,ud=3<$b.constant.length?$b.constant[3]:0)):(Vb=Ca($b.buffer)?G.createStream(34962,
$b.buffer):G.getBuffer($b.buffer),Cc="type"in $b?zd[$b.type]:Vb.dtype,Wb=!!$b.normalized,Jc=$b.size|0,Qb=$b.offset|0,ba=$b.stride|0,sc=$b.divisor|0);nc=z.location;vc=r[nc];if(1===Rb){vc.buffer||ga.enableVertexAttribArray(nc);hc=Jc||4;if(vc.type!==Cc||vc.size!==hc||vc.buffer!==Vb||vc.normalized!==Wb||vc.offset!==Qb||vc.stride!==ba)ga.bindBuffer(34962,Vb.buffer),ga.vertexAttribPointer(nc,hc,Cc,Wb,ba,Qb),vc.type=Cc,vc.size=hc,vc.buffer=Vb,vc.normalized=Wb,vc.offset=Qb,vc.stride=ba;vc.divisor!==sc&&(l.vertexAttribDivisorANGLE(nc,
sc),vc.divisor=sc)}else if(vc.buffer&&(ga.disableVertexAttribArray(nc),vc.buffer=null),vc.x!==Lc||vc.y!==Wc||vc.z!==vd||vc.w!==ud)ga.vertexAttrib4f(nc,Lc,Wc,vd,ud),vc.x=Lc,vc.y=Wc,vc.z=vd,vc.w=ud;db=x.call(this,ca,n,p);rc=db[0];Xb=db[1];ic=db[2];zc=db[3];p&&Tb===rc&&dc===Xb&&xc===ic&&ad===zc||(Tb=rc,dc=Xb,xc=ic,ad=zc,ga.uniform4f(qa.location,rc,Xb,ic,zc));Oc=n.lineWidth;p&&Pc===Oc||(Pc=Oc,ga.uniform1f(fa.location,Oc));Qc=n.capSize;p&&Xc===Qc||(Xc=Qc,ga.uniform1f(va.location,Qc));ld=n.scale;bd=ld[0];
kc=ld[1];p&&Yc===bd&&cc===kc||(Yc=bd,cc=kc,ga.uniform2f(q.location,bd,kc));Zc=n.scaleFract;Sc=Zc[0];yc=Zc[1];p&&cd===Sc&&hd===yc||(cd=Sc,hd=yc,ga.uniform2f(M.location,Sc,yc));qd=n.translate;pf=qd[0];id=qd[1];p&&se===pf&&Ma===id||(se=pf,Ma=id,ga.uniform2f(P.location,pf,id));Od=n.translateFract;Yd=Od[0];Pd=Od[1];p&&de===Yd&&Kd===Pd||(de=Yd,Kd=Pd,ga.uniform2f(wa.location,Yd,Pd));Id=n.opacity;p&&od===Id||(od=Id,ga.uniform1f(R.location,Id));Rc=n.count;0<Rc?mc?l.drawElementsInstancedANGLE(4,36,mc.type,
fc<<(mc.type-5121>>1),Rc):l.drawArraysInstancedANGLE(4,fc,36,Rc):0>Rc&&(mc?ga.drawElements(4,36,mc.type,fc<<(mc.type-5121>>1)):ga.drawArrays(4,fc,36));ca.viewportWidth=ab;ca.viewportHeight=ob;kb&&G.destroyStream(Gb);eb&&G.destroyStream(gb);mb&&G.destroyStream(Oa);Za&&G.destroyStream(Vb)}S.dirty=!0;La.setVAO(null);m&&(V.cpuTime+=performance.now()-h)},draw:function(e){var b,c,m,h,l,p,g,oa,x,d,y,w,t,na,D,E,J,H,B,U,N,Ta,Z,ha,xa,W,pa,da,hb,aa,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,
yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb;b=ya.next;b!==ya.cur&&(b?ga.bindFramebuffer(36160,b.framebuffer):ga.bindFramebuffer(36160,null),ya.cur=b);if(S.dirty){var Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,ba,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb;Qa=ka.dither;Qa!==S.dither&&(Qa?ga.enable(3024):ga.disable(3024),S.dither=Qa);ub=ka.depth_func;ub!==S.depth_func&&(ga.depthFunc(ub),S.depth_func=
ub);vb=dd[0];Sa=dd[1];if(vb!==Hb[0]||Sa!==Hb[1])ga.depthRange(vb,Sa),Hb[0]=vb,Hb[1]=Sa;nb=ka.depth_mask;nb!==S.depth_mask&&(ga.depthMask(nb),S.depth_mask=nb);gc=ua[0];Dc=ua[1];uc=ua[2];bb=ua[3];if(gc!==Ba[0]||Dc!==Ba[1]||uc!==Ba[2]||bb!==Ba[3])ga.colorMask(gc,Dc,uc,bb),Ba[0]=gc,Ba[1]=Dc,Ba[2]=uc,Ba[3]=bb;jc=ka.cull_enable;jc!==S.cull_enable&&(jc?ga.enable(2884):ga.disable(2884),S.cull_enable=jc);ba=ka.cull_face;ba!==S.cull_face&&(ga.cullFace(ba),S.cull_face=ba);Xa=ka.frontFace;Xa!==S.frontFace&&(ga.frontFace(Xa),
S.frontFace=Xa);Uc=ka.lineWidth;Uc!==S.lineWidth&&(ga.lineWidth(Uc),S.lineWidth=Uc);Ab=ka.polygonOffset_enable;Ab!==S.polygonOffset_enable&&(Ab?ga.enable(32823):ga.disable(32823),S.polygonOffset_enable=Ab);Za=ia[0];Vb=ia[1];if(Za!==Q[0]||Vb!==Q[1])ga.polygonOffset(Za,Vb),Q[0]=Za,Q[1]=Vb;sc=ka.sample_alpha;sc!==S.sample_alpha&&(sc?ga.enable(32926):ga.disable(32926),S.sample_alpha=sc);Wb=ka.sample_enable;Wb!==S.sample_enable&&(Wb?ga.enable(32928):ga.disable(32928),S.sample_enable=Wb);Qb=sa[0];Jc=sa[1];
if(Qb!==Fa[0]||Jc!==Fa[1])ga.sampleCoverage(Qb,Jc),Fa[0]=Qb,Fa[1]=Jc;Rb=ka.stencil_enable;Rb!==S.stencil_enable&&(Rb?ga.enable(2960):ga.disable(2960),S.stencil_enable=Rb);Ld=ka.stencil_mask;Ld!==S.stencil_mask&&(ga.stencilMask(Ld),S.stencil_mask=Ld);Cc=Ea[0];ud=Ea[1];Lc=Ea[2];if(Cc!==la[0]||ud!==la[1]||Lc!==la[2])ga.stencilFunc(Cc,ud,Lc),la[0]=Cc,la[1]=ud,la[2]=Lc;Wc=Ia[0];vd=Ia[1];nc=Ia[2];vc=Ia[3];if(Wc!==Da[0]||vd!==Da[1]||nc!==Da[2]||vc!==Da[3])ga.stencilOpSeparate(Wc,vd,nc,vc),Da[0]=Wc,Da[1]=
vd,Da[2]=nc,Da[3]=vc;hc=Y[0];db=Y[1];rc=Y[2];Tb=Y[3];if(hc!==ta[0]||db!==ta[1]||rc!==ta[2]||Tb!==ta[3])ga.stencilOpSeparate(hc,db,rc,Tb),ta[0]=hc,ta[1]=db,ta[2]=rc,ta[3]=Tb}c=e.viewport;m=c.x|0;h=c.y|0;l="width"in c?c.width|0:ca.framebufferWidth-m;p="height"in c?c.height|0:ca.framebufferHeight-h;g=ca.viewportWidth;ca.viewportWidth=l;oa=ca.viewportHeight;ca.viewportHeight=p;ga.viewport(m,h,l,p);ea[0]=m;ea[1]=h;ea[2]=l;ea[3]=p;ga.blendColor(0,0,0,0);fb[0]=0;fb[1]=0;fb[2]=0;fb[3]=0;ga.enable(3042);S.blend_enable=
!0;ga.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ga.blendFuncSeparate(770,771,773,1);K[0]=770;K[1]=771;K[2]=773;K[3]=1;ga.disable(2929);S.depth_enable=!1;x=e.viewport;d=x.x|0;y=x.y|0;w="width"in x?x.width|0:ca.framebufferWidth-d;t="height"in x?x.height|0:ca.framebufferHeight-y;ga.scissor(d,y,w,t);Aa[0]=d;Aa[1]=y;Aa[2]=w;Aa[3]=t;ga.enable(3089);S.scissor_enable=!0;if(na=S.profile)D=performance.now(),V.count++;ga.useProgram(n.program);E=za.angle_instanced_arrays;La.setVAO(null);J=f.call(this,
ca,e,0);ac.offset=J;H=!1;B=null;U=0;N=!1;Z=Ta=0;ha=1;xa=0;W=5126;aa=hb=da=pa=0;Ca(ac)?(H=!0,B=G.createStream(34962,ac),W=B.dtype):(B=G.getBuffer(ac))?W=B.dtype:"constant"in ac?(ha=2,"number"===typeof ac.constant?(da=ac.constant,hb=aa=pa=0):(da=0<ac.constant.length?ac.constant[0]:0,hb=1<ac.constant.length?ac.constant[1]:0,aa=2<ac.constant.length?ac.constant[2]:0,pa=3<ac.constant.length?ac.constant[3]:0)):(B=Ca(ac.buffer)?G.createStream(34962,ac.buffer):G.getBuffer(ac.buffer),W="type"in ac?zd[ac.type]:
B.dtype,N=!!ac.normalized,Z=ac.size|0,Ta=ac.offset|0,xa=ac.stride|0,U=ac.divisor|0);Bb=T.location;Fb=r[Bb];if(1===ha){Fb.buffer||ga.enableVertexAttribArray(Bb);tc=Z||2;if(Fb.type!==W||Fb.size!==tc||Fb.buffer!==B||Fb.normalized!==N||Fb.offset!==Ta||Fb.stride!==xa)ga.bindBuffer(34962,B.buffer),ga.vertexAttribPointer(Bb,tc,W,N,xa,Ta),Fb.type=W,Fb.size=tc,Fb.buffer=B,Fb.normalized=N,Fb.offset=Ta,Fb.stride=xa;Fb.divisor!==U&&(E.vertexAttribDivisorANGLE(Bb,U),Fb.divisor=U)}else if(Fb.buffer&&(ga.disableVertexAttribArray(Bb),
Fb.buffer=null),Fb.x!==da||Fb.y!==hb||Fb.z!==aa||Fb.w!==pa)ga.vertexAttrib4f(Bb,da,hb,aa,pa),Fb.x=da,Fb.y=hb,Fb.z=aa,Fb.w=pa;xb=F.call(this,ca,e,0);Sb.offset=xb;wc=!1;Cb=null;Ic=0;lc=!1;Vc=Fc=0;Tc=1;Bc=0;ec=5126;mc=pc=oc=Gc=0;Ca(Sb)?(wc=!0,Cb=G.createStream(34962,Sb),ec=Cb.dtype):(Cb=G.getBuffer(Sb))?ec=Cb.dtype:"constant"in Sb?(Tc=2,"number"===typeof Sb.constant?(oc=Sb.constant,pc=mc=Gc=0):(oc=0<Sb.constant.length?Sb.constant[0]:0,pc=1<Sb.constant.length?Sb.constant[1]:0,mc=2<Sb.constant.length?
Sb.constant[2]:0,Gc=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Ca(Sb.buffer)?G.createStream(34962,Sb.buffer):G.getBuffer(Sb.buffer),ec="type"in Sb?zd[Sb.type]:Cb.dtype,lc=!!Sb.normalized,Vc=Sb.size|0,Fc=Sb.offset|0,Bc=Sb.stride|0,Ic=Sb.divisor|0);fc=A.location;$a=r[fc];if(1===Tc){$a.buffer||ga.enableVertexAttribArray(fc);Hc=Vc||2;if($a.type!==ec||$a.size!==Hc||$a.buffer!==Cb||$a.normalized!==lc||$a.offset!==Fc||$a.stride!==Bc)ga.bindBuffer(34962,Cb.buffer),ga.vertexAttribPointer(fc,Hc,ec,lc,Bc,Fc),
$a.type=ec,$a.size=Hc,$a.buffer=Cb,$a.normalized=lc,$a.offset=Fc,$a.stride=Bc;$a.divisor!==Ic&&(E.vertexAttribDivisorANGLE(fc,Ic),$a.divisor=Ic)}else if($a.buffer&&(ga.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Gc)ga.vertexAttrib4f(fc,oc,pc,mc,Gc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Gc;yb=C.call(this,ca,e,0);Ga.offset=yb;cb=!1;Nb=null;ab=0;ob=!1;Cd=Va=0;Ib=1;Jb=0;qc=5126;Db=Gb=kb=Ob=0;Ca(Ga)?(cb=!0,Nb=G.createStream(34962,Ga),qc=Nb.dtype):(Nb=G.getBuffer(Ga))?qc=
Nb.dtype:"constant"in Ga?(Ib=2,"number"===typeof Ga.constant?(kb=Ga.constant,Gb=Db=Ob=0):(kb=0<Ga.constant.length?Ga.constant[0]:0,Gb=1<Ga.constant.length?Ga.constant[1]:0,Db=2<Ga.constant.length?Ga.constant[2]:0,Ob=3<Ga.constant.length?Ga.constant[3]:0)):(Nb=Ca(Ga.buffer)?G.createStream(34962,Ga.buffer):G.getBuffer(Ga.buffer),qc="type"in Ga?zd[Ga.type]:Nb.dtype,ob=!!Ga.normalized,Cd=Ga.size|0,Va=Ga.offset|0,Jb=Ga.stride|0,ab=Ga.divisor|0);wb=gd.location;ib=r[wb];if(1===Ib){ib.buffer||ga.enableVertexAttribArray(wb);
Yb=Cd||4;if(ib.type!==qc||ib.size!==Yb||ib.buffer!==Nb||ib.normalized!==ob||ib.offset!==Va||ib.stride!==Jb)ga.bindBuffer(34962,Nb.buffer),ga.vertexAttribPointer(wb,Yb,qc,ob,Jb,Va),ib.type=qc,ib.size=Yb,ib.buffer=Nb,ib.normalized=ob,ib.offset=Va,ib.stride=Jb;ib.divisor!==ab&&(E.vertexAttribDivisorANGLE(wb,ab),ib.divisor=ab)}else if(ib.buffer&&(ga.disableVertexAttribArray(wb),ib.buffer=null),ib.x!==kb||ib.y!==Gb||ib.z!==Db||ib.w!==Ob)ga.vertexAttrib4f(wb,kb,Gb,Db,Ob),ib.x=kb,ib.y=Gb,ib.z=Db,ib.w=Ob;
Pb=O.call(this,ca,e,0);$b.offset=Pb;qb=!1;Ua=null;Ub=0;zb=!1;jb=bc=0;pb=1;Ha=0;rb=5126;Ka=gb=eb=Ja=0;Ca($b)?(qb=!0,Ua=G.createStream(34962,$b),rb=Ua.dtype):(Ua=G.getBuffer($b))?rb=Ua.dtype:"constant"in $b?(pb=2,"number"===typeof $b.constant?(eb=$b.constant,gb=Ka=Ja=0):(eb=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,Ka=2<$b.constant.length?$b.constant[2]:0,Ja=3<$b.constant.length?$b.constant[3]:0)):(Ua=Ca($b.buffer)?G.createStream(34962,$b.buffer):G.getBuffer($b.buffer),
rb="type"in $b?zd[$b.type]:Ua.dtype,zb=!!$b.normalized,jb=$b.size|0,bc=$b.offset|0,Ha=$b.stride|0,Ub=$b.divisor|0);lb=z.location;Wa=r[lb];if(1===pb){Wa.buffer||ga.enableVertexAttribArray(lb);tb=jb||4;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Ua||Wa.normalized!==zb||Wa.offset!==bc||Wa.stride!==Ha)ga.bindBuffer(34962,Ua.buffer),ga.vertexAttribPointer(lb,tb,rb,zb,Ha,bc),Wa.type=rb,Wa.size=tb,Wa.buffer=Ua,Wa.normalized=zb,Wa.offset=bc,Wa.stride=Ha;Wa.divisor!==Ub&&(E.vertexAttribDivisorANGLE(lb,Ub),
Wa.divisor=Ub)}else if(Wa.buffer&&(ga.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==eb||Wa.y!==gb||Wa.z!==Ka||Wa.w!==Ja)ga.vertexAttrib4f(lb,eb,gb,Ka,Ja),Wa.x=eb,Wa.y=gb,Wa.z=Ka,Wa.w=Ja;sb=ja.location;Pa=r[sb];Pa.buffer||ga.enableVertexAttribArray(sb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==I||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ga.bindBuffer(34962,I.buffer),ga.vertexAttribPointer(sb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=I,Pa.normalized=!1,Pa.offset=0,Pa.stride=
24;0!==Pa.divisor&&(E.vertexAttribDivisorANGLE(sb,0),Pa.divisor=0);Ac=X.location;Ra=r[Ac];Ra.buffer||ga.enableVertexAttribArray(Ac);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==k||!1!==Ra.normalized||8!==Ra.offset||24!==Ra.stride)ga.bindBuffer(34962,k.buffer),ga.vertexAttribPointer(Ac,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=k,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(E.vertexAttribDivisorANGLE(Ac,0),Ra.divisor=0);Kb=a.location;Eb=r[Kb];Eb.buffer||ga.enableVertexAttribArray(Kb);
if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==u||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)ga.bindBuffer(34962,u.buffer),ga.vertexAttribPointer(Kb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,Eb.buffer=u,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(E.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Na=L.call(this,ca,e,0);ga.uniform4f(qa.location,Na[0],Na[1],Na[2],Na[3]);ga.uniform1f(fa.location,e.lineWidth);ga.uniform1f(va.location,e.capSize);xd=e.scale;ga.uniform2f(q.location,xd[0],
xd[1]);Ya=e.scaleFract;ga.uniform2f(M.location,Ya[0],Ya[1]);Lb=e.translate;ga.uniform2f(P.location,Lb[0],Lb[1]);Mb=e.translateFract;ga.uniform2f(wa.location,Mb[0],Mb[1]);ga.uniform1f(R.location,e.opacity);(mb=ma.elements)?ga.bindBuffer(34963,mb.buffer.buffer):La.currentVAO&&(mb=ra.getElements(La.currentVAO.elements))&&ga.bindBuffer(34963,mb.buffer.buffer);Oa=ma.offset;Zb=e.count;0<Zb?mb?E.drawElementsInstancedANGLE(4,36,mb.type,Oa<<(mb.type-5121>>1),Zb):E.drawArraysInstancedANGLE(4,Oa,36,Zb):0>Zb&&
(mb?ga.drawElements(4,36,mb.type,Oa<<(mb.type-5121>>1)):ga.drawArrays(4,Oa,36));S.dirty=!0;La.setVAO(null);ca.viewportWidth=g;ca.viewportHeight=oa;na&&(V.cpuTime+=performance.now()-D);H&&G.destroyStream(B);wc&&G.destroyStream(Cb);cb&&G.destroyStream(Nb);qb&&G.destroyStream(Ua)},scope:function(a,b,f){var l,r,q,v,n,Q,K,g,x,d,y,z,sa,La,Fa,T,fb,A,ga,ia,R,D,la,E,P,J,Y,ua,M,Aa,H,C,Ea,L,ea,wa,F,ra,ya,O,X,ta,fa,Ba,da,qa,Hb,va,ja,za,dd,Da,Ia,gd,aa,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,
Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,ba,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,pf,se,id,Ma,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd;l=a.viewport;r=l.x|0;q=l.y|0;v="width"in l?l.width|0:ca.framebufferWidth-r;n="height"in l?l.height|0:ca.framebufferHeight-q;Q=ca.viewportWidth;
ca.viewportWidth=v;K=ca.viewportHeight;ca.viewportHeight=n;g=hb[0];hb[0]=r;x=hb[1];hb[1]=q;d=hb[2];hb[2]=v;y=hb[3];hb[3]=n;z=oa[0];oa[0]=0;sa=oa[1];oa[1]=0;La=oa[2];oa[2]=0;Fa=oa[3];oa[3]=0;T=ka.blend_enable;ka.blend_enable=!0;fb=Ta[0];Ta[0]=32774;A=Ta[1];Ta[1]=32774;ga=m[0];m[0]=770;ia=m[1];m[1]=771;R=m[2];m[2]=773;D=m[3];m[3]=1;la=ka.depth_enable;ka.depth_enable=!1;E=a.viewport;P=E.x|0;J=E.y|0;Y="width"in E?E.width|0:ca.framebufferWidth-P;ua="height"in E?E.height|0:ca.framebufferHeight-J;M=na[0];
na[0]=P;Aa=na[1];na[1]=J;H=na[2];na[2]=Y;C=na[3];na[3]=ua;Ea=ka.scissor_enable;ka.scissor_enable=!0;if(L=S.profile)ea=performance.now(),V.count++;wa=ma.count;ma.count=36;F=a.count;ra=ma.instances;ma.instances=F;ya=ma.primitive;ma.primitive=4;O=a.capSize;X=xa[5];xa[5]=O;ta=a.lineWidth;fa=xa[4];xa[4]=ta;Ba=a.opacity;da=xa[10];xa[10]=Ba;qa=a.range;Hb=xa[18];xa[18]=qa;va=a.scale;ja=xa[6];xa[6]=va;za=a.scaleFract;dd=xa[7];xa[7]=za;Da=a.translate;Ia=xa[8];xa[8]=Da;gd=a.translateFract;aa=xa[9];xa[9]=gd;
Ib=W.call(this,ca,a,f);Jb=xa[3];xa[3]=Ib;qc=t.buffer;t.buffer=u;Ob=t.divisor;t.divisor=0;kb=t.normalized;t.normalized=!1;Gb=t.offset;t.offset=16;Db=t.size;t.size=0;wb=t.state;t.state=1;ib=t.stride;t.stride=24;Yb=t.type;t.type=5126;Pb=t.w;t.w=0;qb=t.x;t.x=0;Ua=t.y;t.y=0;Ub=t.z;t.z=0;zb=N.call(this,ca,a,f);$b.offset=zb;bc=!1;jb=null;pb=0;Ha=!1;Ja=rb=0;eb=1;gb=0;Ka=5126;sb=tb=Wa=lb=0;Ca($b)?(bc=!0,jb=G.createStream(34962,$b),Ka=jb.dtype):(jb=G.getBuffer($b))?Ka=jb.dtype:"constant"in $b?(eb=2,"number"===
typeof $b.constant?(Wa=$b.constant,tb=sb=lb=0):(Wa=0<$b.constant.length?$b.constant[0]:0,tb=1<$b.constant.length?$b.constant[1]:0,sb=2<$b.constant.length?$b.constant[2]:0,lb=3<$b.constant.length?$b.constant[3]:0)):(jb=Ca($b.buffer)?G.createStream(34962,$b.buffer):G.getBuffer($b.buffer),Ka="type"in $b?zd[$b.type]:jb.dtype,Ha=!!$b.normalized,Ja=$b.size|0,rb=$b.offset|0,gb=$b.stride|0,pb=$b.divisor|0);Pa=w.buffer;w.buffer=jb;Ac=w.divisor;w.divisor=pb;Ra=w.normalized;w.normalized=Ha;Kb=w.offset;w.offset=
rb;Eb=w.size;w.size=Ja;Na=w.state;w.state=eb;ba=w.stride;w.stride=gb;Ya=w.type;w.type=Ka;Lb=w.w;w.w=lb;Mb=w.x;w.x=Wa;mb=w.y;w.y=tb;Oa=w.z;w.z=sb;Zb=B.buffer;B.buffer=I;Qa=B.divisor;B.divisor=0;ub=B.normalized;B.normalized=!1;vb=B.offset;B.offset=0;Sa=B.size;B.size=0;nb=B.state;B.state=1;gc=B.stride;B.stride=24;Dc=B.type;B.type=5126;uc=B.w;B.w=0;bb=B.x;B.x=0;jc=B.y;B.y=0;nd=B.z;B.z=0;Xa=ha.call(this,ca,a,f);Ga.offset=Xa;Uc=!1;Ab=null;Za=0;Vb=!1;Wb=sc=0;Qb=1;Jc=0;Rb=5126;Lc=ud=Cc=Ld=0;Ca(Ga)?(Uc=!0,
Ab=G.createStream(34962,Ga),Rb=Ab.dtype):(Ab=G.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Cc=Ga.constant,ud=Lc=Ld=0):(Cc=0<Ga.constant.length?Ga.constant[0]:0,ud=1<Ga.constant.length?Ga.constant[1]:0,Lc=2<Ga.constant.length?Ga.constant[2]:0,Ld=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Ca(Ga.buffer)?G.createStream(34962,Ga.buffer):G.getBuffer(Ga.buffer),Rb="type"in Ga?zd[Ga.type]:Ab.dtype,Vb=!!Ga.normalized,Wb=Ga.size|0,sc=Ga.offset|0,Jc=Ga.stride|0,Za=Ga.divisor|
0);Wc=c.buffer;c.buffer=Ab;vd=c.divisor;c.divisor=Za;nc=c.normalized;c.normalized=Vb;vc=c.offset;c.offset=sc;hc=c.size;c.size=Wb;db=c.state;c.state=Qb;rc=c.stride;c.stride=Jc;Tb=c.type;c.type=Rb;Xb=c.w;c.w=Ld;dc=c.x;c.x=Cc;ic=c.y;c.y=ud;xc=c.z;c.z=Lc;zc=e.buffer;e.buffer=k;ad=e.divisor;e.divisor=0;Oc=e.normalized;e.normalized=!1;Pc=e.offset;e.offset=8;Qc=e.size;e.size=0;Xc=e.state;e.state=1;ld=e.stride;e.stride=24;bd=e.type;e.type=5126;Yc=e.w;e.w=0;kc=e.x;e.x=0;cc=e.y;e.y=0;Zc=e.z;e.z=0;Sc=U.call(this,
ca,a,f);ac.offset=Sc;cd=!1;yc=null;hd=0;qd=!1;se=pf=0;id=1;Ma=0;Od=5126;Kd=Pd=de=Yd=0;Ca(ac)?(cd=!0,yc=G.createStream(34962,ac),Od=yc.dtype):(yc=G.getBuffer(ac))?Od=yc.dtype:"constant"in ac?(id=2,"number"===typeof ac.constant?(de=ac.constant,Pd=Kd=Yd=0):(de=0<ac.constant.length?ac.constant[0]:0,Pd=1<ac.constant.length?ac.constant[1]:0,Kd=2<ac.constant.length?ac.constant[2]:0,Yd=3<ac.constant.length?ac.constant[3]:0)):(yc=Ca(ac.buffer)?G.createStream(34962,ac.buffer):G.getBuffer(ac.buffer),Od="type"in
ac?zd[ac.type]:yc.dtype,qd=!!ac.normalized,se=ac.size|0,pf=ac.offset|0,Ma=ac.stride|0,hd=ac.divisor|0);Id=p.buffer;p.buffer=yc;od=p.divisor;p.divisor=hd;Rc=p.normalized;p.normalized=qd;wd=p.offset;p.offset=pf;td=p.size;p.size=se;jd=p.state;p.state=id;yd=p.stride;p.stride=Ma;Dd=p.type;p.type=Od;Fd=p.w;p.w=Yd;Fe=p.x;p.x=de;ke=p.y;p.y=Pd;te=p.z;p.z=Kd;le=Z.call(this,ca,a,f);Sb.offset=le;je=!1;he=null;ue=0;ee=!1;Mc=me=0;fd=1;ve=0;pe=5126;Td=Sd=Qd=Md=0;Ca(Sb)?(je=!0,he=G.createStream(34962,Sb),pe=he.dtype):
(he=G.getBuffer(Sb))?pe=he.dtype:"constant"in Sb?(fd=2,"number"===typeof Sb.constant?(Qd=Sb.constant,Sd=Td=Md=0):(Qd=0<Sb.constant.length?Sb.constant[0]:0,Sd=1<Sb.constant.length?Sb.constant[1]:0,Td=2<Sb.constant.length?Sb.constant[2]:0,Md=3<Sb.constant.length?Sb.constant[3]:0)):(he=Ca(Sb.buffer)?G.createStream(34962,Sb.buffer):G.getBuffer(Sb.buffer),pe="type"in Sb?zd[Sb.type]:he.dtype,ee=!!Sb.normalized,Mc=Sb.size|0,me=Sb.offset|0,ve=Sb.stride|0,ue=Sb.divisor|0);ne=h.buffer;h.buffer=he;ye=h.divisor;
h.divisor=ue;Be=h.normalized;h.normalized=ee;qe=h.offset;h.offset=me;Se=h.size;h.size=Mc;Te=h.state;h.state=fd;Oe=h.stride;h.stride=ve;we=h.type;h.type=pe;Ge=h.w;h.w=Md;Ie=h.x;h.x=Qd;Je=h.y;h.y=Sd;Ke=h.z;h.z=Td;He=pa.vert;pa.vert=2;Nd=pa.frag;pa.frag=1;S.dirty=!0;b(ca,a,f);ca.viewportWidth=Q;ca.viewportHeight=K;hb[0]=g;hb[1]=x;hb[2]=d;hb[3]=y;oa[0]=z;oa[1]=sa;oa[2]=La;oa[3]=Fa;ka.blend_enable=T;Ta[0]=fb;Ta[1]=A;m[0]=ga;m[1]=ia;m[2]=R;m[3]=D;ka.depth_enable=la;na[0]=M;na[1]=Aa;na[2]=H;na[3]=C;ka.scissor_enable=
Ea;L&&(V.cpuTime+=performance.now()-ea);ma.count=wa;ma.instances=ra;ma.primitive=ya;xa[5]=X;xa[4]=fa;xa[10]=da;xa[18]=Hb;xa[6]=ja;xa[7]=dd;xa[8]=Ia;xa[9]=aa;xa[3]=Jb;t.buffer=qc;t.divisor=Ob;t.normalized=kb;t.offset=Gb;t.size=Db;t.state=wb;t.stride=ib;t.type=Yb;t.w=Pb;t.x=qb;t.y=Ua;t.z=Ub;bc&&G.destroyStream(jb);w.buffer=Pa;w.divisor=Ac;w.normalized=Ra;w.offset=Kb;w.size=Eb;w.state=Na;w.stride=ba;w.type=Ya;w.w=Lb;w.x=Mb;w.y=mb;w.z=Oa;B.buffer=Zb;B.divisor=Qa;B.normalized=ub;B.offset=vb;B.size=Sa;
B.state=nb;B.stride=gc;B.type=Dc;B.w=uc;B.x=bb;B.y=jc;B.z=nd;Uc&&G.destroyStream(Ab);c.buffer=Wc;c.divisor=vd;c.normalized=nc;c.offset=vc;c.size=hc;c.state=db;c.stride=rc;c.type=Tb;c.w=Xb;c.x=dc;c.y=ic;c.z=xc;e.buffer=zc;e.divisor=ad;e.normalized=Oc;e.offset=Pc;e.size=Qc;e.state=Xc;e.stride=ld;e.type=bd;e.w=Yc;e.x=kc;e.y=cc;e.z=Zc;cd&&G.destroyStream(yc);p.buffer=Id;p.divisor=od;p.normalized=Rc;p.offset=wd;p.size=td;p.state=jd;p.stride=yd;p.type=Dd;p.w=Fd;p.x=Fe;p.y=ke;p.z=te;je&&G.destroyStream(he);
h.buffer=ne;h.divisor=ye;h.normalized=Be;h.offset=qe;h.size=Se;h.state=Te;h.stride=Oe;h.type=we;h.w=Ge;h.x=Ie;h.y=Je;h.z=Ke;pa.vert=He;pa.frag=Nd;S.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja){var gd,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,
dd,Hb,ia,Q,sa,Fa,na,Aa,Ea,la,Y;gd=d.attributes;X=d.buffer;fa=d.context;R=d.current;T=d.draw;A=d.elements;q=d.extensions;M=d.framebuffer;P=d.gl;wa=d.isBufferArgs;qa=d.next;r=d.shader;G=d.uniforms;ca=d.vao;S=qa.blend_color;ma=R.blend_color;ra=qa.blend_equation;za=R.blend_equation;ya=qa.blend_func;ga=R.blend_func;Ca=qa.colorMask;ka=R.colorMask;pa=qa.depth_range;xa=R.depth_range;La=qa.polygonOffset_offset;oa=R.polygonOffset_offset;fb=qa.sample_coverage;Ta=R.sample_coverage;v=qa.scissor_box;m=R.scissor_box;
K=qa.stencil_func;ua=R.stencil_func;Ba=qa.stencil_opBack;dd=R.stencil_opBack;Hb=qa.stencil_opFront;ia=R.stencil_opFront;Q=qa.viewport;sa=R.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};na={divisor:1,offset:8,stride:8};Aa={divisor:1,offset:8,stride:8};Ea={divisor:1,offset:16,stride:8};la={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(f,r){var v,n,Q,d,G,t;v=M.next;v!==M.cur&&(v?P.bindFramebuffer(36160,
v.framebuffer):P.bindFramebuffer(36160,null),M.cur=v);if(R.dirty){var S,J,u,k,H,C,L,F,ra,ya,I,O,W,aa,be,Ce,Ne,Re,Hd,Ae,re,$d,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc;S=qa.dither;S!==R.dither&&(S?P.enable(3024):P.disable(3024),R.dither=S);J=qa.depth_func;J!==R.depth_func&&(P.depthFunc(J),R.depth_func=J);u=pa[0];k=pa[1];if(u!==xa[0]||k!==xa[1])P.depthRange(u,k),xa[0]=u,xa[1]=k;H=qa.depth_mask;H!==R.depth_mask&&(P.depthMask(H),R.depth_mask=H);C=Ca[0];L=Ca[1];F=Ca[2];ra=Ca[3];if(C!==ka[0]||L!==ka[1]||F!==ka[2]||
ra!==ka[3])P.colorMask(C,L,F,ra),ka[0]=C,ka[1]=L,ka[2]=F,ka[3]=ra;ya=qa.cull_enable;ya!==R.cull_enable&&(ya?P.enable(2884):P.disable(2884),R.cull_enable=ya);I=qa.cull_face;I!==R.cull_face&&(P.cullFace(I),R.cull_face=I);O=qa.frontFace;O!==R.frontFace&&(P.frontFace(O),R.frontFace=O);W=qa.lineWidth;W!==R.lineWidth&&(P.lineWidth(W),R.lineWidth=W);aa=qa.polygonOffset_enable;aa!==R.polygonOffset_enable&&(aa?P.enable(32823):P.disable(32823),R.polygonOffset_enable=aa);be=La[0];Ce=La[1];if(be!==oa[0]||Ce!==
oa[1])P.polygonOffset(be,Ce),oa[0]=be,oa[1]=Ce;Ne=qa.sample_alpha;Ne!==R.sample_alpha&&(Ne?P.enable(32926):P.disable(32926),R.sample_alpha=Ne);Re=qa.sample_enable;Re!==R.sample_enable&&(Re?P.enable(32928):P.disable(32928),R.sample_enable=Re);Hd=fb[0];Ae=fb[1];if(Hd!==Ta[0]||Ae!==Ta[1])P.sampleCoverage(Hd,Ae),Ta[0]=Hd,Ta[1]=Ae;re=qa.stencil_mask;re!==R.stencil_mask&&(P.stencilMask(re),R.stencil_mask=re);$d=K[0];Xd=K[1];Bd=K[2];if($d!==ua[0]||Xd!==ua[1]||Bd!==ua[2])P.stencilFunc($d,Xd,Bd),ua[0]=$d,
ua[1]=Xd,ua[2]=Bd;md=Hb[0];$c=Hb[1];sd=Hb[2];Kc=Hb[3];if(md!==ia[0]||$c!==ia[1]||sd!==ia[2]||Kc!==ia[3])P.stencilOpSeparate(md,$c,sd,Kc),ia[0]=md,ia[1]=$c,ia[2]=sd,ia[3]=Kc;pd=Ba[0];Ec=Ba[1];ed=Ba[2];Nc=Ba[3];if(pd!==dd[0]||Ec!==dd[1]||ed!==dd[2]||Nc!==dd[3])P.stencilOpSeparate(pd,Ec,ed,Nc),dd[0]=pd,dd[1]=Ec,dd[2]=ed,dd[3]=Nc}P.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;P.enable(3042);R.blend_enable=!0;P.blendEquationSeparate(32774,32774);za[0]=32774;za[1]=32774;P.blendFuncSeparate(770,771,
773,1);ga[0]=770;ga[1]=771;ga[2]=773;ga[3]=1;P.enable(3089);R.scissor_enable=!0;P.disable(2960);R.stencil_enable=!1;if(n=R.profile)Q=performance.now(),V.count+=r;P.useProgram(N.program);d=q.angle_instanced_arrays;var kd,Bb,Fb,tc,xb;ca.setVAO(null);kd=da.location;Bb=gd[kd];Bb.buffer||P.enableVertexAttribArray(kd);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==g||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)P.bindBuffer(34962,g.buffer),P.vertexAttribPointer(kd,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,
Bb.buffer=g,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(d.vertexAttribDivisorANGLE(kd,0),Bb.divisor=0);Fb=D.location;tc=gd[Fb];tc.buffer||P.enableVertexAttribArray(Fb);if(5126!==tc.type||1!==tc.size||tc.buffer!==l||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)P.bindBuffer(34962,l.buffer),P.vertexAttribPointer(Fb,1,5126,!1,8,4),tc.type=5126,tc.size=1,tc.buffer=l,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(d.vertexAttribDivisorANGLE(Fb,0),tc.divisor=0);(xb=T.elements)?
P.bindBuffer(34963,xb.buffer.buffer):ca.currentVAO&&(xb=A.getElements(ca.currentVAO.elements))&&P.bindBuffer(34963,xb.buffer.buffer);for(G=0;G<r;++G){t=f[G];var wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,ba,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,
cd,yc,hd,qd,pf,se,id,Ma,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd;wc=t.viewport;Cb=wc.x|0;Ic=wc.y|0;lc="width"in wc?wc.width|0:fa.framebufferWidth-Cb;Fc="height"in wc?wc.height|0:fa.framebufferHeight-Ic;Vc=fa.viewportWidth;fa.viewportWidth=lc;Tc=fa.viewportHeight;fa.viewportHeight=Fc;P.viewport(Cb,Ic,lc,Fc);sa[0]=Cb;sa[1]=Ic;sa[2]=lc;sa[3]=Fc;(Bc=w.call(this,fa,t,G))?P.enable(2929):P.disable(2929);R.depth_enable=Bc;ec=t.viewport;Gc=ec.x|0;oc=ec.y|0;pc="width"in ec?ec.width|0:fa.framebufferWidth-Gc;mc="height"in
ec?ec.height|0:fa.framebufferHeight-oc;P.scissor(Gc,oc,pc,mc);m[0]=Gc;m[1]=oc;m[2]=pc;m[3]=mc;na.buffer=t.positionBuffer;fc=!1;$a=null;Hc=0;yb=!1;Nb=cb=0;ab=1;ob=0;Va=5126;qc=Jb=Ib=Cd=0;wa(na)?(fc=!0,$a=X.createStream(34962,na),Va=$a.dtype):($a=X.getBuffer(na))?Va=$a.dtype:"constant"in na?(ab=2,"number"===typeof na.constant?(Ib=na.constant,Jb=qc=Cd=0):(Ib=0<na.constant.length?na.constant[0]:0,Jb=1<na.constant.length?na.constant[1]:0,qc=2<na.constant.length?na.constant[2]:0,Cd=3<na.constant.length?
na.constant[3]:0)):($a=wa(na.buffer)?X.createStream(34962,na.buffer):X.getBuffer(na.buffer),Va="type"in na?Fa[na.type]:$a.dtype,yb=!!na.normalized,Nb=na.size|0,cb=na.offset|0,ob=na.stride|0,Hc=na.divisor|0);Ob=ha.location;kb=gd[Ob];if(1===ab){kb.buffer||P.enableVertexAttribArray(Ob);Gb=Nb||2;if(kb.type!==Va||kb.size!==Gb||kb.buffer!==$a||kb.normalized!==yb||kb.offset!==cb||kb.stride!==ob)P.bindBuffer(34962,$a.buffer),P.vertexAttribPointer(Ob,Gb,Va,yb,ob,cb),kb.type=Va,kb.size=Gb,kb.buffer=$a,kb.normalized=
yb,kb.offset=cb,kb.stride=ob;kb.divisor!==Hc&&(d.vertexAttribDivisorANGLE(Ob,Hc),kb.divisor=Hc)}else if(kb.buffer&&(P.disableVertexAttribArray(Ob),kb.buffer=null),kb.x!==Ib||kb.y!==Jb||kb.z!==qc||kb.w!==Cd)P.vertexAttrib4f(Ob,Ib,Jb,qc,Cd),kb.x=Ib,kb.y=Jb,kb.z=qc,kb.w=Cd;Ea.buffer=t.positionBuffer;Db=!1;wb=null;ib=0;Yb=!1;qb=Pb=0;Ua=1;Ub=0;zb=5126;Ha=pb=jb=bc=0;wa(Ea)?(Db=!0,wb=X.createStream(34962,Ea),zb=wb.dtype):(wb=X.getBuffer(Ea))?zb=wb.dtype:"constant"in Ea?(Ua=2,"number"===typeof Ea.constant?
(jb=Ea.constant,pb=Ha=bc=0):(jb=0<Ea.constant.length?Ea.constant[0]:0,pb=1<Ea.constant.length?Ea.constant[1]:0,Ha=2<Ea.constant.length?Ea.constant[2]:0,bc=3<Ea.constant.length?Ea.constant[3]:0)):(wb=wa(Ea.buffer)?X.createStream(34962,Ea.buffer):X.getBuffer(Ea.buffer),zb="type"in Ea?Fa[Ea.type]:wb.dtype,Yb=!!Ea.normalized,qb=Ea.size|0,Pb=Ea.offset|0,Ub=Ea.stride|0,ib=Ea.divisor|0);rb=e.location;Ja=gd[rb];if(1===Ua){Ja.buffer||P.enableVertexAttribArray(rb);eb=qb||2;if(Ja.type!==zb||Ja.size!==eb||Ja.buffer!==
wb||Ja.normalized!==Yb||Ja.offset!==Pb||Ja.stride!==Ub)P.bindBuffer(34962,wb.buffer),P.vertexAttribPointer(rb,eb,zb,Yb,Ub,Pb),Ja.type=zb,Ja.size=eb,Ja.buffer=wb,Ja.normalized=Yb,Ja.offset=Pb,Ja.stride=Ub;Ja.divisor!==ib&&(d.vertexAttribDivisorANGLE(rb,ib),Ja.divisor=ib)}else if(Ja.buffer&&(P.disableVertexAttribArray(rb),Ja.buffer=null),Ja.x!==jb||Ja.y!==pb||Ja.z!==Ha||Ja.w!==bc)P.vertexAttrib4f(rb,jb,pb,Ha,bc),Ja.x=jb,Ja.y=pb,Ja.z=Ha,Ja.w=bc;Aa.buffer=t.positionFractBuffer;gb=!1;Ka=null;lb=0;Wa=!1;
sb=tb=0;Pa=1;Ac=0;Ra=5126;ba=Na=Eb=Kb=0;wa(Aa)?(gb=!0,Ka=X.createStream(34962,Aa),Ra=Ka.dtype):(Ka=X.getBuffer(Aa))?Ra=Ka.dtype:"constant"in Aa?(Pa=2,"number"===typeof Aa.constant?(Eb=Aa.constant,Na=ba=Kb=0):(Eb=0<Aa.constant.length?Aa.constant[0]:0,Na=1<Aa.constant.length?Aa.constant[1]:0,ba=2<Aa.constant.length?Aa.constant[2]:0,Kb=3<Aa.constant.length?Aa.constant[3]:0)):(Ka=wa(Aa.buffer)?X.createStream(34962,Aa.buffer):X.getBuffer(Aa.buffer),Ra="type"in Aa?Fa[Aa.type]:Ka.dtype,Wa=!!Aa.normalized,
sb=Aa.size|0,tb=Aa.offset|0,Ac=Aa.stride|0,lb=Aa.divisor|0);Ya=c.location;Lb=gd[Ya];if(1===Pa){Lb.buffer||P.enableVertexAttribArray(Ya);Mb=sb||2;if(Lb.type!==Ra||Lb.size!==Mb||Lb.buffer!==Ka||Lb.normalized!==Wa||Lb.offset!==tb||Lb.stride!==Ac)P.bindBuffer(34962,Ka.buffer),P.vertexAttribPointer(Ya,Mb,Ra,Wa,Ac,tb),Lb.type=Ra,Lb.size=Mb,Lb.buffer=Ka,Lb.normalized=Wa,Lb.offset=tb,Lb.stride=Ac;Lb.divisor!==lb&&(d.vertexAttribDivisorANGLE(Ya,lb),Lb.divisor=lb)}else if(Lb.buffer&&(P.disableVertexAttribArray(Ya),
Lb.buffer=null),Lb.x!==Eb||Lb.y!==Na||Lb.z!==ba||Lb.w!==Kb)P.vertexAttrib4f(Ya,Eb,Na,ba,Kb),Lb.x=Eb,Lb.y=Na,Lb.z=ba,Lb.w=Kb;la.buffer=t.positionFractBuffer;mb=!1;Oa=null;Zb=0;Qa=!1;vb=ub=0;Sa=1;nb=0;gc=5126;jc=bb=uc=Dc=0;wa(la)?(mb=!0,Oa=X.createStream(34962,la),gc=Oa.dtype):(Oa=X.getBuffer(la))?gc=Oa.dtype:"constant"in la?(Sa=2,"number"===typeof la.constant?(uc=la.constant,bb=jc=Dc=0):(uc=0<la.constant.length?la.constant[0]:0,bb=1<la.constant.length?la.constant[1]:0,jc=2<la.constant.length?la.constant[2]:
0,Dc=3<la.constant.length?la.constant[3]:0)):(Oa=wa(la.buffer)?X.createStream(34962,la.buffer):X.getBuffer(la.buffer),gc="type"in la?Fa[la.type]:Oa.dtype,Qa=!!la.normalized,vb=la.size|0,ub=la.offset|0,nb=la.stride|0,Zb=la.divisor|0);nd=U.location;Xa=gd[nd];if(1===Sa){Xa.buffer||P.enableVertexAttribArray(nd);Uc=vb||2;if(Xa.type!==gc||Xa.size!==Uc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==ub||Xa.stride!==nb)P.bindBuffer(34962,Oa.buffer),P.vertexAttribPointer(nd,Uc,gc,Qa,nb,ub),Xa.type=gc,Xa.size=
Uc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=ub,Xa.stride=nb;Xa.divisor!==Zb&&(d.vertexAttribDivisorANGLE(nd,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(P.disableVertexAttribArray(nd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==Dc)P.vertexAttrib4f(nd,uc,bb,jc,Dc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=Dc;Y.buffer=t.colorBuffer;Ab=!1;Za=null;Vb=0;sc=!1;Qb=Wb=0;Jc=1;Rb=0;Ld=5126;Wc=Lc=ud=Cc=0;wa(Y)?(Ab=!0,Za=X.createStream(34962,Y),Ld=Za.dtype):(Za=X.getBuffer(Y))?Ld=Za.dtype:"constant"in Y?(Jc=2,"number"===
typeof Y.constant?(ud=Y.constant,Lc=Wc=Cc=0):(ud=0<Y.constant.length?Y.constant[0]:0,Lc=1<Y.constant.length?Y.constant[1]:0,Wc=2<Y.constant.length?Y.constant[2]:0,Cc=3<Y.constant.length?Y.constant[3]:0)):(Za=wa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),Ld="type"in Y?Fa[Y.type]:Za.dtype,sc=!!Y.normalized,Qb=Y.size|0,Wb=Y.offset|0,Rb=Y.stride|0,Vb=Y.divisor|0);vd=p.location;nc=gd[vd];if(1===Jc){nc.buffer||P.enableVertexAttribArray(vd);vc=Qb||4;if(nc.type!==Ld||nc.size!==vc||nc.buffer!==
Za||nc.normalized!==sc||nc.offset!==Wb||nc.stride!==Rb)P.bindBuffer(34962,Za.buffer),P.vertexAttribPointer(vd,vc,Ld,sc,Rb,Wb),nc.type=Ld,nc.size=vc,nc.buffer=Za,nc.normalized=sc,nc.offset=Wb,nc.stride=Rb;nc.divisor!==Vb&&(d.vertexAttribDivisorANGLE(vd,Vb),nc.divisor=Vb)}else if(nc.buffer&&(P.disableVertexAttribArray(vd),nc.buffer=null),nc.x!==ud||nc.y!==Lc||nc.z!==Wc||nc.w!==Cc)P.vertexAttrib4f(vd,ud,Lc,Wc,Cc),nc.x=ud,nc.y=Lc,nc.z=Wc,nc.w=Cc;hc=t.scale;db=hc[0];Tb=hc[1];G&&rc===db&&Xb===Tb||(rc=db,
Xb=Tb,P.uniform2f(b.location,db,Tb));dc=t.scaleFract;ic=dc[0];zc=dc[1];G&&xc===ic&&ad===zc||(xc=ic,ad=zc,P.uniform2f(x.location,ic,zc));Oc=t.translate;Pc=Oc[0];Xc=Oc[1];G&&Qc===Pc&&ld===Xc||(Qc=Pc,ld=Xc,P.uniform2f(va.location,Pc,Xc));bd=t.translateFract;Yc=bd[0];cc=bd[1];G&&kc===Yc&&Zc===cc||(kc=Yc,Zc=cc,P.uniform2f(z.location,Yc,cc));Sc=t.thickness;G&&cd===Sc||(cd=Sc,P.uniform1f(a.location,Sc));yc=t.depth;G&&hd===yc||(hd=yc,P.uniform1f(y.location,yc));qd=B.call(this,fa,t,G);pf=qd[0];id=qd[1];Od=
qd[2];de=qd[3];G&&se===pf&&Ma===id&&Yd===Od&&Pd===de||(se=pf,Ma=id,Yd=Od,Pd=de,P.uniform4f(ja.location,pf,id,Od,de));Kd=t.dashLength;G&&Id===Kd||(Id=Kd,P.uniform1f(Z.location,Kd));od=t.opacity;G&&Rc===od||(Rc=od,P.uniform1f(E.location,od));(wd=t.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);td=wd._texture;P.uniform1i(h.location,td.bind());jd=t.count;0<jd?xb?d.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),jd):d.drawArraysInstancedANGLE(5,0,4,jd):0>jd&&(xb?P.drawElements(5,
4,xb.type,0<<(xb.type-5121>>1)):P.drawArrays(5,0,4));fa.viewportWidth=Vc;fa.viewportHeight=Tc;fc&&X.destroyStream($a);Db&&X.destroyStream(wb);gb&&X.destroyStream(Ka);mb&&X.destroyStream(Oa);Ab&&X.destroyStream(Za);td.unbind()}R.dirty=!0;ca.setVAO(null);n&&(V.cpuTime+=performance.now()-Q)},draw:function(f){var r,v,Q,d,G,t,w,S,u,k,C,B,L,F,ra,ya,I,O,N,W,aa,be,Ce,Ne,Re,Hd,Ae,re,$d,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,ba,Ib,Jb,qc,
Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub;r=M.next;r!==M.cur&&(r?P.bindFramebuffer(36160,r.framebuffer):P.bindFramebuffer(36160,null),M.cur=r);if(R.dirty){var vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb;vb=qa.dither;vb!==R.dither&&(vb?P.enable(3024):P.disable(3024),R.dither=vb);Sa=qa.depth_func;Sa!==R.depth_func&&(P.depthFunc(Sa),R.depth_func=Sa);nb=pa[0];gc=pa[1];if(nb!==
xa[0]||gc!==xa[1])P.depthRange(nb,gc),xa[0]=nb,xa[1]=gc;Dc=qa.depth_mask;Dc!==R.depth_mask&&(P.depthMask(Dc),R.depth_mask=Dc);uc=Ca[0];bb=Ca[1];jc=Ca[2];nd=Ca[3];if(uc!==ka[0]||bb!==ka[1]||jc!==ka[2]||nd!==ka[3])P.colorMask(uc,bb,jc,nd),ka[0]=uc,ka[1]=bb,ka[2]=jc,ka[3]=nd;Xa=qa.cull_enable;Xa!==R.cull_enable&&(Xa?P.enable(2884):P.disable(2884),R.cull_enable=Xa);Uc=qa.cull_face;Uc!==R.cull_face&&(P.cullFace(Uc),R.cull_face=Uc);Ab=qa.frontFace;Ab!==R.frontFace&&(P.frontFace(Ab),R.frontFace=Ab);Za=qa.lineWidth;
Za!==R.lineWidth&&(P.lineWidth(Za),R.lineWidth=Za);Vb=qa.polygonOffset_enable;Vb!==R.polygonOffset_enable&&(Vb?P.enable(32823):P.disable(32823),R.polygonOffset_enable=Vb);sc=La[0];Wb=La[1];if(sc!==oa[0]||Wb!==oa[1])P.polygonOffset(sc,Wb),oa[0]=sc,oa[1]=Wb;Qb=qa.sample_alpha;Qb!==R.sample_alpha&&(Qb?P.enable(32926):P.disable(32926),R.sample_alpha=Qb);Jc=qa.sample_enable;Jc!==R.sample_enable&&(Jc?P.enable(32928):P.disable(32928),R.sample_enable=Jc);Rb=fb[0];Ld=fb[1];if(Rb!==Ta[0]||Ld!==Ta[1])P.sampleCoverage(Rb,
Ld),Ta[0]=Rb,Ta[1]=Ld;Cc=qa.stencil_mask;Cc!==R.stencil_mask&&(P.stencilMask(Cc),R.stencil_mask=Cc);ud=K[0];Lc=K[1];Wc=K[2];if(ud!==ua[0]||Lc!==ua[1]||Wc!==ua[2])P.stencilFunc(ud,Lc,Wc),ua[0]=ud,ua[1]=Lc,ua[2]=Wc;vd=Hb[0];nc=Hb[1];vc=Hb[2];hc=Hb[3];if(vd!==ia[0]||nc!==ia[1]||vc!==ia[2]||hc!==ia[3])P.stencilOpSeparate(vd,nc,vc,hc),ia[0]=vd,ia[1]=nc,ia[2]=vc,ia[3]=hc;db=Ba[0];rc=Ba[1];Tb=Ba[2];Xb=Ba[3];if(db!==dd[0]||rc!==dd[1]||Tb!==dd[2]||Xb!==dd[3])P.stencilOpSeparate(db,rc,Tb,Xb),dd[0]=db,dd[1]=
rc,dd[2]=Tb,dd[3]=Xb}v=f.viewport;Q=v.x|0;d=v.y|0;G="width"in v?v.width|0:fa.framebufferWidth-Q;t="height"in v?v.height|0:fa.framebufferHeight-d;w=fa.viewportWidth;fa.viewportWidth=G;S=fa.viewportHeight;fa.viewportHeight=t;P.viewport(Q,d,G,t);sa[0]=Q;sa[1]=d;sa[2]=G;sa[3]=t;P.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;P.enable(3042);R.blend_enable=!0;P.blendEquationSeparate(32774,32774);za[0]=32774;za[1]=32774;P.blendFuncSeparate(770,771,773,1);ga[0]=770;ga[1]=771;ga[2]=773;ga[3]=1;(u=H.call(this,
fa,f,0))?P.enable(2929):P.disable(2929);R.depth_enable=u;k=f.viewport;C=k.x|0;B=k.y|0;L="width"in k?k.width|0:fa.framebufferWidth-C;F="height"in k?k.height|0:fa.framebufferHeight-B;P.scissor(C,B,L,F);m[0]=C;m[1]=B;m[2]=L;m[3]=F;P.enable(3089);R.scissor_enable=!0;P.disable(2960);R.stencil_enable=!1;if(ra=R.profile)ya=performance.now(),V.count++;P.useProgram(J.program);I=q.angle_instanced_arrays;ca.setVAO(null);na.buffer=f.positionBuffer;O=!1;N=null;W=0;aa=!1;Ce=be=0;Ne=1;Re=0;Hd=5126;Xd=$d=re=Ae=0;
wa(na)?(O=!0,N=X.createStream(34962,na),Hd=N.dtype):(N=X.getBuffer(na))?Hd=N.dtype:"constant"in na?(Ne=2,"number"===typeof na.constant?(re=na.constant,$d=Xd=Ae=0):(re=0<na.constant.length?na.constant[0]:0,$d=1<na.constant.length?na.constant[1]:0,Xd=2<na.constant.length?na.constant[2]:0,Ae=3<na.constant.length?na.constant[3]:0)):(N=wa(na.buffer)?X.createStream(34962,na.buffer):X.getBuffer(na.buffer),Hd="type"in na?Fa[na.type]:N.dtype,aa=!!na.normalized,Ce=na.size|0,be=na.offset|0,Re=na.stride|0,W=
na.divisor|0);Bd=ha.location;md=gd[Bd];if(1===Ne){md.buffer||P.enableVertexAttribArray(Bd);$c=Ce||2;if(md.type!==Hd||md.size!==$c||md.buffer!==N||md.normalized!==aa||md.offset!==be||md.stride!==Re)P.bindBuffer(34962,N.buffer),P.vertexAttribPointer(Bd,$c,Hd,aa,Re,be),md.type=Hd,md.size=$c,md.buffer=N,md.normalized=aa,md.offset=be,md.stride=Re;md.divisor!==W&&(I.vertexAttribDivisorANGLE(Bd,W),md.divisor=W)}else if(md.buffer&&(P.disableVertexAttribArray(Bd),md.buffer=null),md.x!==re||md.y!==$d||md.z!==
Xd||md.w!==Ae)P.vertexAttrib4f(Bd,re,$d,Xd,Ae),md.x=re,md.y=$d,md.z=Xd,md.w=Ae;Ea.buffer=f.positionBuffer;sd=!1;Kc=null;pd=0;Ec=!1;Nc=ed=0;kd=1;Bb=0;Fb=5126;Cb=wc=xb=tc=0;wa(Ea)?(sd=!0,Kc=X.createStream(34962,Ea),Fb=Kc.dtype):(Kc=X.getBuffer(Ea))?Fb=Kc.dtype:"constant"in Ea?(kd=2,"number"===typeof Ea.constant?(xb=Ea.constant,wc=Cb=tc=0):(xb=0<Ea.constant.length?Ea.constant[0]:0,wc=1<Ea.constant.length?Ea.constant[1]:0,Cb=2<Ea.constant.length?Ea.constant[2]:0,tc=3<Ea.constant.length?Ea.constant[3]:
0)):(Kc=wa(Ea.buffer)?X.createStream(34962,Ea.buffer):X.getBuffer(Ea.buffer),Fb="type"in Ea?Fa[Ea.type]:Kc.dtype,Ec=!!Ea.normalized,Nc=Ea.size|0,ed=Ea.offset|0,Bb=Ea.stride|0,pd=Ea.divisor|0);Ic=e.location;lc=gd[Ic];if(1===kd){lc.buffer||P.enableVertexAttribArray(Ic);Fc=Nc||2;if(lc.type!==Fb||lc.size!==Fc||lc.buffer!==Kc||lc.normalized!==Ec||lc.offset!==ed||lc.stride!==Bb)P.bindBuffer(34962,Kc.buffer),P.vertexAttribPointer(Ic,Fc,Fb,Ec,Bb,ed),lc.type=Fb,lc.size=Fc,lc.buffer=Kc,lc.normalized=Ec,lc.offset=
ed,lc.stride=Bb;lc.divisor!==pd&&(I.vertexAttribDivisorANGLE(Ic,pd),lc.divisor=pd)}else if(lc.buffer&&(P.disableVertexAttribArray(Ic),lc.buffer=null),lc.x!==xb||lc.y!==wc||lc.z!==Cb||lc.w!==tc)P.vertexAttrib4f(Ic,xb,wc,Cb,tc),lc.x=xb,lc.y=wc,lc.z=Cb,lc.w=tc;Aa.buffer=f.positionFractBuffer;Vc=!1;Tc=null;Bc=0;ec=!1;oc=Gc=0;pc=1;mc=0;fc=5126;cb=yb=Hc=$a=0;wa(Aa)?(Vc=!0,Tc=X.createStream(34962,Aa),fc=Tc.dtype):(Tc=X.getBuffer(Aa))?fc=Tc.dtype:"constant"in Aa?(pc=2,"number"===typeof Aa.constant?(Hc=Aa.constant,
yb=cb=$a=0):(Hc=0<Aa.constant.length?Aa.constant[0]:0,yb=1<Aa.constant.length?Aa.constant[1]:0,cb=2<Aa.constant.length?Aa.constant[2]:0,$a=3<Aa.constant.length?Aa.constant[3]:0)):(Tc=wa(Aa.buffer)?X.createStream(34962,Aa.buffer):X.getBuffer(Aa.buffer),fc="type"in Aa?Fa[Aa.type]:Tc.dtype,ec=!!Aa.normalized,oc=Aa.size|0,Gc=Aa.offset|0,mc=Aa.stride|0,Bc=Aa.divisor|0);Nb=c.location;ab=gd[Nb];if(1===pc){ab.buffer||P.enableVertexAttribArray(Nb);ob=oc||2;if(ab.type!==fc||ab.size!==ob||ab.buffer!==Tc||ab.normalized!==
ec||ab.offset!==Gc||ab.stride!==mc)P.bindBuffer(34962,Tc.buffer),P.vertexAttribPointer(Nb,ob,fc,ec,mc,Gc),ab.type=fc,ab.size=ob,ab.buffer=Tc,ab.normalized=ec,ab.offset=Gc,ab.stride=mc;ab.divisor!==Bc&&(I.vertexAttribDivisorANGLE(Nb,Bc),ab.divisor=Bc)}else if(ab.buffer&&(P.disableVertexAttribArray(Nb),ab.buffer=null),ab.x!==Hc||ab.y!==yb||ab.z!==cb||ab.w!==$a)P.vertexAttrib4f(Nb,Hc,yb,cb,$a),ab.x=Hc,ab.y=yb,ab.z=cb,ab.w=$a;la.buffer=f.positionFractBuffer;Va=!1;ba=null;Ib=0;Jb=!1;Ob=qc=0;kb=1;Gb=0;
Db=5126;Pb=Yb=ib=wb=0;wa(la)?(Va=!0,ba=X.createStream(34962,la),Db=ba.dtype):(ba=X.getBuffer(la))?Db=ba.dtype:"constant"in la?(kb=2,"number"===typeof la.constant?(ib=la.constant,Yb=Pb=wb=0):(ib=0<la.constant.length?la.constant[0]:0,Yb=1<la.constant.length?la.constant[1]:0,Pb=2<la.constant.length?la.constant[2]:0,wb=3<la.constant.length?la.constant[3]:0)):(ba=wa(la.buffer)?X.createStream(34962,la.buffer):X.getBuffer(la.buffer),Db="type"in la?Fa[la.type]:ba.dtype,Jb=!!la.normalized,Ob=la.size|0,qc=
la.offset|0,Gb=la.stride|0,Ib=la.divisor|0);qb=U.location;Ua=gd[qb];if(1===kb){Ua.buffer||P.enableVertexAttribArray(qb);Ub=Ob||2;if(Ua.type!==Db||Ua.size!==Ub||Ua.buffer!==ba||Ua.normalized!==Jb||Ua.offset!==qc||Ua.stride!==Gb)P.bindBuffer(34962,ba.buffer),P.vertexAttribPointer(qb,Ub,Db,Jb,Gb,qc),Ua.type=Db,Ua.size=Ub,Ua.buffer=ba,Ua.normalized=Jb,Ua.offset=qc,Ua.stride=Gb;Ua.divisor!==Ib&&(I.vertexAttribDivisorANGLE(qb,Ib),Ua.divisor=Ib)}else if(Ua.buffer&&(P.disableVertexAttribArray(qb),Ua.buffer=
null),Ua.x!==ib||Ua.y!==Yb||Ua.z!==Pb||Ua.w!==wb)P.vertexAttrib4f(qb,ib,Yb,Pb,wb),Ua.x=ib,Ua.y=Yb,Ua.z=Pb,Ua.w=wb;Y.buffer=f.colorBuffer;zb=!1;bc=null;jb=0;pb=!1;rb=Ha=0;Ja=1;eb=0;gb=5126;tb=Wa=lb=Ka=0;wa(Y)?(zb=!0,bc=X.createStream(34962,Y),gb=bc.dtype):(bc=X.getBuffer(Y))?gb=bc.dtype:"constant"in Y?(Ja=2,"number"===typeof Y.constant?(lb=Y.constant,Wa=tb=Ka=0):(lb=0<Y.constant.length?Y.constant[0]:0,Wa=1<Y.constant.length?Y.constant[1]:0,tb=2<Y.constant.length?Y.constant[2]:0,Ka=3<Y.constant.length?
Y.constant[3]:0)):(bc=wa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),gb="type"in Y?Fa[Y.type]:bc.dtype,pb=!!Y.normalized,rb=Y.size|0,Ha=Y.offset|0,eb=Y.stride|0,jb=Y.divisor|0);sb=p.location;Pa=gd[sb];if(1===Ja){Pa.buffer||P.enableVertexAttribArray(sb);Ac=rb||4;if(Pa.type!==gb||Pa.size!==Ac||Pa.buffer!==bc||Pa.normalized!==pb||Pa.offset!==Ha||Pa.stride!==eb)P.bindBuffer(34962,bc.buffer),P.vertexAttribPointer(sb,Ac,gb,pb,eb,Ha),Pa.type=gb,Pa.size=Ac,Pa.buffer=bc,Pa.normalized=pb,
Pa.offset=Ha,Pa.stride=eb;Pa.divisor!==jb&&(I.vertexAttribDivisorANGLE(sb,jb),Pa.divisor=jb)}else if(Pa.buffer&&(P.disableVertexAttribArray(sb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==tb||Pa.w!==Ka)P.vertexAttrib4f(sb,lb,Wa,tb,Ka),Pa.x=lb,Pa.y=Wa,Pa.z=tb,Pa.w=Ka;Ra=da.location;Kb=gd[Ra];Kb.buffer||P.enableVertexAttribArray(Ra);if(5126!==Kb.type||1!==Kb.size||Kb.buffer!==g||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)P.bindBuffer(34962,g.buffer),P.vertexAttribPointer(Ra,1,5126,!1,8,0),Kb.type=
5126,Kb.size=1,Kb.buffer=g,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(I.vertexAttribDivisorANGLE(Ra,0),Kb.divisor=0);Eb=D.location;Na=gd[Eb];Na.buffer||P.enableVertexAttribArray(Eb);if(5126!==Na.type||1!==Na.size||Na.buffer!==l||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)P.bindBuffer(34962,l.buffer),P.vertexAttribPointer(Eb,1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=l,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(I.vertexAttribDivisorANGLE(Eb,0),Na.divisor=0);
xd=f.scale;P.uniform2f(b.location,xd[0],xd[1]);Ya=f.scaleFract;P.uniform2f(x.location,Ya[0],Ya[1]);Lb=f.translate;P.uniform2f(va.location,Lb[0],Lb[1]);Mb=f.translateFract;P.uniform2f(z.location,Mb[0],Mb[1]);P.uniform1f(a.location,f.thickness);P.uniform1f(y.location,f.depth);mb=n.call(this,fa,f,0);P.uniform4f(ja.location,mb[0],mb[1],mb[2],mb[3]);P.uniform1f(Z.location,f.dashLength);P.uniform1f(E.location,f.opacity);(Oa=f.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);Zb=Oa._texture;P.uniform1i(h.location,
Zb.bind());(Qa=T.elements)?P.bindBuffer(34963,Qa.buffer.buffer):ca.currentVAO&&(Qa=A.getElements(ca.currentVAO.elements))&&P.bindBuffer(34963,Qa.buffer.buffer);ub=f.count;0<ub?Qa?I.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),ub):I.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Qa?P.drawElements(5,4,Qa.type,0<<(Qa.type-5121>>1)):P.drawArrays(5,0,4));R.dirty=!0;ca.setVAO(null);fa.viewportWidth=w;fa.viewportHeight=S;ra&&(V.cpuTime+=performance.now()-ya);O&&X.destroyStream(N);sd&&X.destroyStream(Kc);
Vc&&X.destroyStream(Tc);Va&&X.destroyStream(ba);zb&&X.destroyStream(bc);Zb.unbind()},scope:function(a,e,b){var c,m,h,q,p,n,K,d,oa,x,y,z,sa,La,w,fb,A,ga,ia,D,E,P,J,ua,M,ca,H,B,U,N,ka,Ta,Z,ha,xa,pa,Ba,Ca,da,Hb,ma,va,ja,za,dd,gd,aa,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,ba,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,
Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,pf,se,id,Ma,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe;c=a.viewport;m=c.x|0;h=c.y|0;q="width"in c?c.width|0:fa.framebufferWidth-m;p="height"in c?c.height|0:fa.framebufferHeight-h;n=fa.viewportWidth;fa.viewportWidth=q;K=fa.viewportHeight;fa.viewportHeight=p;d=Q[0];Q[0]=m;oa=Q[1];Q[1]=h;x=Q[2];Q[2]=q;y=Q[3];
Q[3]=p;z=S[0];S[0]=0;sa=S[1];S[1]=0;La=S[2];S[2]=0;w=S[3];S[3]=0;fb=qa.blend_enable;qa.blend_enable=!0;A=ra[0];ra[0]=32774;ga=ra[1];ra[1]=32774;ia=ya[0];ya[0]=770;D=ya[1];ya[1]=771;E=ya[2];ya[2]=773;P=ya[3];ya[3]=1;J=f.call(this,fa,a,b);ua=qa.depth_enable;qa.depth_enable=J;M=a.viewport;ca=M.x|0;H=M.y|0;B="width"in M?M.width|0:fa.framebufferWidth-ca;U="height"in M?M.height|0:fa.framebufferHeight-H;N=v[0];v[0]=ca;ka=v[1];v[1]=H;Ta=v[2];v[2]=B;Z=v[3];v[3]=U;ha=qa.scissor_enable;qa.scissor_enable=!0;
xa=qa.stencil_enable;qa.stencil_enable=!1;if(pa=R.profile)Ba=performance.now(),V.count++;Ca=T.offset;T.offset=0;da=T.count;T.count=4;Hb=a.count;ma=T.instances;T.instances=Hb;va=T.primitive;T.primitive=5;ja=a.dashLength;za=G[23];G[23]=ja;dd=a.dashTexture;gd=G[24];G[24]=dd;aa=a.depth;Vc=G[22];G[22]=aa;Tc=a.id;Bc=G[31];G[31]=Tc;ec=a.miterLimit;Gc=G[32];G[32]=ec;oc=F.call(this,fa,a,b);pc=G[33];G[33]=oc;mc=a.opacity;fc=G[10];G[10]=mc;$a=fa.pixelRatio;Hc=G[34];G[34]=$a;yb=a.scale;cb=G[6];G[6]=yb;Nb=a.scaleFract;
ab=G[7];G[7]=Nb;ob=a.thickness;Va=G[21];G[21]=ob;ba=a.translate;Ib=G[8];G[8]=ba;Jb=a.translateFract;qc=G[9];G[9]=Jb;Ob=C.call(this,fa,a,b);kb=G[3];G[3]=Ob;na.buffer=a.positionBuffer;Gb=!1;Db=null;wb=0;ib=!1;Pb=Yb=0;qb=1;Ua=0;Ub=5126;pb=jb=bc=zb=0;wa(na)?(Gb=!0,Db=X.createStream(34962,na),Ub=Db.dtype):(Db=X.getBuffer(na))?Ub=Db.dtype:"constant"in na?(qb=2,"number"===typeof na.constant?(bc=na.constant,jb=pb=zb=0):(bc=0<na.constant.length?na.constant[0]:0,jb=1<na.constant.length?na.constant[1]:0,pb=
2<na.constant.length?na.constant[2]:0,zb=3<na.constant.length?na.constant[3]:0)):(Db=wa(na.buffer)?X.createStream(34962,na.buffer):X.getBuffer(na.buffer),Ub="type"in na?Fa[na.type]:Db.dtype,ib=!!na.normalized,Pb=na.size|0,Yb=na.offset|0,Ua=na.stride|0,wb=na.divisor|0);Ha=O.buffer;O.buffer=Db;rb=O.divisor;O.divisor=wb;Ja=O.normalized;O.normalized=ib;eb=O.offset;O.offset=Yb;gb=O.size;O.size=Pb;Ka=O.state;O.state=qb;lb=O.stride;O.stride=Ua;Wa=O.type;O.type=Ub;tb=O.w;O.w=zb;sb=O.x;O.x=bc;Pa=O.y;O.y=jb;
Ac=O.z;O.z=pb;Aa.buffer=a.positionFractBuffer;Ra=!1;Kb=null;Eb=0;Na=!1;Ya=xd=0;Lb=1;Mb=0;mb=5126;ub=Qa=Zb=Oa=0;wa(Aa)?(Ra=!0,Kb=X.createStream(34962,Aa),mb=Kb.dtype):(Kb=X.getBuffer(Aa))?mb=Kb.dtype:"constant"in Aa?(Lb=2,"number"===typeof Aa.constant?(Zb=Aa.constant,Qa=ub=Oa=0):(Zb=0<Aa.constant.length?Aa.constant[0]:0,Qa=1<Aa.constant.length?Aa.constant[1]:0,ub=2<Aa.constant.length?Aa.constant[2]:0,Oa=3<Aa.constant.length?Aa.constant[3]:0)):(Kb=wa(Aa.buffer)?X.createStream(34962,Aa.buffer):X.getBuffer(Aa.buffer),
mb="type"in Aa?Fa[Aa.type]:Kb.dtype,Na=!!Aa.normalized,Ya=Aa.size|0,xd=Aa.offset|0,Mb=Aa.stride|0,Eb=Aa.divisor|0);vb=I.buffer;I.buffer=Kb;Sa=I.divisor;I.divisor=Eb;nb=I.normalized;I.normalized=Na;gc=I.offset;I.offset=xd;Dc=I.size;I.size=Ya;uc=I.state;I.state=Lb;bb=I.stride;I.stride=Mb;jc=I.type;I.type=mb;nd=I.w;I.w=Oa;Xa=I.x;I.x=Zb;Uc=I.y;I.y=Qa;Ab=I.z;I.z=ub;Ea.buffer=a.positionBuffer;Za=!1;Vb=null;sc=0;Wb=!1;Jc=Qb=0;Rb=1;Ld=0;Cc=5126;vd=Wc=Lc=ud=0;wa(Ea)?(Za=!0,Vb=X.createStream(34962,Ea),Cc=Vb.dtype):
(Vb=X.getBuffer(Ea))?Cc=Vb.dtype:"constant"in Ea?(Rb=2,"number"===typeof Ea.constant?(Lc=Ea.constant,Wc=vd=ud=0):(Lc=0<Ea.constant.length?Ea.constant[0]:0,Wc=1<Ea.constant.length?Ea.constant[1]:0,vd=2<Ea.constant.length?Ea.constant[2]:0,ud=3<Ea.constant.length?Ea.constant[3]:0)):(Vb=wa(Ea.buffer)?X.createStream(34962,Ea.buffer):X.getBuffer(Ea.buffer),Cc="type"in Ea?Fa[Ea.type]:Vb.dtype,Wb=!!Ea.normalized,Jc=Ea.size|0,Qb=Ea.offset|0,Ld=Ea.stride|0,sc=Ea.divisor|0);nc=k.buffer;k.buffer=Vb;vc=k.divisor;
k.divisor=sc;hc=k.normalized;k.normalized=Wb;db=k.offset;k.offset=Qb;rc=k.size;k.size=Jc;Tb=k.state;k.state=Rb;Xb=k.stride;k.stride=Ld;dc=k.type;k.type=Cc;ic=k.w;k.w=ud;xc=k.x;k.x=Lc;zc=k.y;k.y=Wc;ad=k.z;k.z=vd;la.buffer=a.positionFractBuffer;Oc=!1;Pc=null;Qc=0;Xc=!1;bd=ld=0;Yc=1;kc=0;cc=5126;yc=cd=Sc=Zc=0;wa(la)?(Oc=!0,Pc=X.createStream(34962,la),cc=Pc.dtype):(Pc=X.getBuffer(la))?cc=Pc.dtype:"constant"in la?(Yc=2,"number"===typeof la.constant?(Sc=la.constant,cd=yc=Zc=0):(Sc=0<la.constant.length?
la.constant[0]:0,cd=1<la.constant.length?la.constant[1]:0,yc=2<la.constant.length?la.constant[2]:0,Zc=3<la.constant.length?la.constant[3]:0)):(Pc=wa(la.buffer)?X.createStream(34962,la.buffer):X.getBuffer(la.buffer),cc="type"in la?Fa[la.type]:Pc.dtype,Xc=!!la.normalized,bd=la.size|0,ld=la.offset|0,kc=la.stride|0,Qc=la.divisor|0);hd=u.buffer;u.buffer=Pc;qd=u.divisor;u.divisor=Qc;pf=u.normalized;u.normalized=Xc;se=u.offset;u.offset=ld;id=u.size;u.size=bd;Ma=u.state;u.state=Yc;Od=u.stride;u.stride=kc;
Yd=u.type;u.type=cc;de=u.w;u.w=Zc;Pd=u.x;u.x=Sc;Kd=u.y;u.y=cd;Id=u.z;u.z=yc;Y.buffer=a.colorBuffer;od=!1;Rc=null;wd=0;td=!1;yd=jd=0;Dd=1;Fd=0;Fe=5126;je=le=te=ke=0;wa(Y)?(od=!0,Rc=X.createStream(34962,Y),Fe=Rc.dtype):(Rc=X.getBuffer(Y))?Fe=Rc.dtype:"constant"in Y?(Dd=2,"number"===typeof Y.constant?(te=Y.constant,le=je=ke=0):(te=0<Y.constant.length?Y.constant[0]:0,le=1<Y.constant.length?Y.constant[1]:0,je=2<Y.constant.length?Y.constant[2]:0,ke=3<Y.constant.length?Y.constant[3]:0)):(Rc=wa(Y.buffer)?
X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),Fe="type"in Y?Fa[Y.type]:Rc.dtype,td=!!Y.normalized,yd=Y.size|0,jd=Y.offset|0,Fd=Y.stride|0,wd=Y.divisor|0);he=L.buffer;L.buffer=Rc;ue=L.divisor;L.divisor=wd;ee=L.normalized;L.normalized=td;me=L.offset;L.offset=jd;Mc=L.size;L.size=yd;fd=L.state;L.state=Dd;ve=L.stride;L.stride=Fd;pe=L.type;L.type=Fe;Md=L.w;L.w=ke;Qd=L.x;L.x=te;Sd=L.y;L.y=le;Td=L.z;L.z=je;ne=W.buffer;W.buffer=g;ye=W.divisor;W.divisor=0;Be=W.normalized;W.normalized=!1;qe=W.offset;
W.offset=0;Se=W.size;W.size=0;Te=W.state;W.state=1;Oe=W.stride;W.stride=8;we=W.type;W.type=5126;Ge=W.w;W.w=0;Ie=W.x;W.x=0;Je=W.y;W.y=0;Ke=W.z;W.z=0;He=t.buffer;t.buffer=l;Nd=t.divisor;t.divisor=0;Zd=t.normalized;t.normalized=!1;ce=t.offset;t.offset=4;fe=t.size;t.size=0;Le=t.state;t.state=1;Jd=t.stride;t.stride=8;Ud=t.type;t.type=5126;De=t.w;t.w=0;Me=t.x;t.x=0;af=t.y;t.y=0;$e=t.z;t.z=0;Ue=r.vert;r.vert=20;Pe=r.frag;r.frag=19;R.dirty=!0;e(fa,a,b);fa.viewportWidth=n;fa.viewportHeight=K;Q[0]=d;Q[1]=oa;
Q[2]=x;Q[3]=y;S[0]=z;S[1]=sa;S[2]=La;S[3]=w;qa.blend_enable=fb;ra[0]=A;ra[1]=ga;ya[0]=ia;ya[1]=D;ya[2]=E;ya[3]=P;qa.depth_enable=ua;v[0]=N;v[1]=ka;v[2]=Ta;v[3]=Z;qa.scissor_enable=ha;qa.stencil_enable=xa;pa&&(V.cpuTime+=performance.now()-Ba);T.offset=Ca;T.count=da;T.instances=ma;T.primitive=va;G[23]=za;G[24]=gd;G[22]=Vc;G[31]=Bc;G[32]=Gc;G[33]=pc;G[10]=fc;G[34]=Hc;G[6]=cb;G[7]=ab;G[21]=Va;G[8]=Ib;G[9]=qc;G[3]=kb;Gb&&X.destroyStream(Db);O.buffer=Ha;O.divisor=rb;O.normalized=Ja;O.offset=eb;O.size=gb;
O.state=Ka;O.stride=lb;O.type=Wa;O.w=tb;O.x=sb;O.y=Pa;O.z=Ac;Ra&&X.destroyStream(Kb);I.buffer=vb;I.divisor=Sa;I.normalized=nb;I.offset=gc;I.size=Dc;I.state=uc;I.stride=bb;I.type=jc;I.w=nd;I.x=Xa;I.y=Uc;I.z=Ab;Za&&X.destroyStream(Vb);k.buffer=nc;k.divisor=vc;k.normalized=hc;k.offset=db;k.size=rc;k.state=Tb;k.stride=Xb;k.type=dc;k.w=ic;k.x=xc;k.y=zc;k.z=ad;Oc&&X.destroyStream(Pc);u.buffer=hd;u.divisor=qd;u.normalized=pf;u.offset=se;u.size=id;u.state=Ma;u.stride=Od;u.type=Yd;u.w=de;u.x=Pd;u.y=Kd;u.z=
Id;od&&X.destroyStream(Rc);L.buffer=he;L.divisor=ue;L.normalized=ee;L.offset=me;L.size=Mc;L.state=fd;L.stride=ve;L.type=pe;L.w=Md;L.x=Qd;L.y=Sd;L.z=Td;W.buffer=ne;W.divisor=ye;W.normalized=Be;W.offset=qe;W.size=Se;W.state=Te;W.stride=Oe;W.type=we;W.w=Ge;W.x=Ie;W.y=Je;W.z=Ke;t.buffer=He;t.divisor=Nd;t.normalized=Zd;t.offset=ce;t.size=fe;t.state=Le;t.stride=Jd;t.type=Ud;t.w=De;t.x=Me;t.y=af;t.z=$e;r.vert=Ue;r.frag=Pe;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(d,
V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,gd,X,fa,R){var T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,dd,Hb,ia,Q,sa,Fa,na,Aa,Ea,la,Y,ta,Ia,Da,hb,ea;T=d.attributes;A=d.buffer;q=d.context;M=d.current;P=d.draw;wa=d.elements;qa=d.extensions;r=d.framebuffer;G=d.gl;ca=d.isBufferArgs;S=d.next;ma=d.shader;ra=d.uniforms;za=d.vao;ya=S.blend_color;ga=M.blend_color;Ca=S.blend_equation;ka=M.blend_equation;pa=S.blend_func;xa=M.blend_func;La=S.colorMask;
oa=M.colorMask;fb=S.depth_range;Ta=M.depth_range;v=S.polygonOffset_offset;m=M.polygonOffset_offset;K=S.sample_coverage;ua=M.sample_coverage;Ba=S.scissor_box;dd=M.scissor_box;Hb=S.stencil_func;ia=M.stencil_func;Q=S.stencil_opBack;sa=M.stencil_opBack;Fa=S.stencil_opFront;na=M.stencil_opFront;Aa=S.viewport;Ea=M.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};Ia={divisor:1,offset:4,
stride:4};Da={divisor:1,offset:16,stride:8};hb={divisor:1,offset:24,stride:8};ea={divisor:1,offset:0,stride:8};return{batch:function(f,n){var d,t,w,J,u,k;d=r.next;d!==r.cur&&(d?G.bindFramebuffer(36160,d.framebuffer):G.bindFramebuffer(36160,null),r.cur=d);if(M.dirty){var H,Aa,C,L,F,I,ra,ya,N,O,W,pa,Ba,Ca,ma,aa,$d,ba,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb;H=S.dither;H!==M.dither&&(H?G.enable(3024):G.disable(3024),M.dither=H);Aa=S.depth_func;Aa!==M.depth_func&&(G.depthFunc(Aa),M.depth_func=Aa);C=fb[0];
L=fb[1];if(C!==Ta[0]||L!==Ta[1])G.depthRange(C,L),Ta[0]=C,Ta[1]=L;F=S.depth_mask;F!==M.depth_mask&&(G.depthMask(F),M.depth_mask=F);I=La[0];ra=La[1];ya=La[2];N=La[3];if(I!==oa[0]||ra!==oa[1]||ya!==oa[2]||N!==oa[3])G.colorMask(I,ra,ya,N),oa[0]=I,oa[1]=ra,oa[2]=ya,oa[3]=N;O=S.frontFace;O!==M.frontFace&&(G.frontFace(O),M.frontFace=O);W=S.lineWidth;W!==M.lineWidth&&(G.lineWidth(W),M.lineWidth=W);pa=S.polygonOffset_enable;pa!==M.polygonOffset_enable&&(pa?G.enable(32823):G.disable(32823),M.polygonOffset_enable=
pa);Ba=v[0];Ca=v[1];if(Ba!==m[0]||Ca!==m[1])G.polygonOffset(Ba,Ca),m[0]=Ba,m[1]=Ca;ma=S.sample_alpha;ma!==M.sample_alpha&&(ma?G.enable(32926):G.disable(32926),M.sample_alpha=ma);aa=S.sample_enable;aa!==M.sample_enable&&(aa?G.enable(32928):G.disable(32928),M.sample_enable=aa);$d=K[0];ba=K[1];if($d!==ua[0]||ba!==ua[1])G.sampleCoverage($d,ba),ua[0]=$d,ua[1]=ba;Bd=S.stencil_mask;Bd!==M.stencil_mask&&(G.stencilMask(Bd),M.stencil_mask=Bd);md=Hb[0];$c=Hb[1];sd=Hb[2];if(md!==ia[0]||$c!==ia[1]||sd!==ia[2])G.stencilFunc(md,
$c,sd),ia[0]=md,ia[1]=$c,ia[2]=sd;Kc=Fa[0];pd=Fa[1];Ec=Fa[2];ed=Fa[3];if(Kc!==na[0]||pd!==na[1]||Ec!==na[2]||ed!==na[3])G.stencilOpSeparate(Kc,pd,Ec,ed),na[0]=Kc,na[1]=pd,na[2]=Ec,na[3]=ed;Nc=Q[0];kd=Q[1];Bb=Q[2];Fb=Q[3];if(Nc!==sa[0]||kd!==sa[1]||Bb!==sa[2]||Fb!==sa[3])G.stencilOpSeparate(Nc,kd,Bb,Fb),sa[0]=Nc,sa[1]=kd,sa[2]=Bb,sa[3]=Fb}G.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;G.enable(3042);M.blend_enable=!0;G.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;G.blendFuncSeparate(770,
771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;G.enable(2884);M.cull_enable=!0;G.cullFace(1029);M.cull_face=1029;G.enable(3089);M.scissor_enable=!0;G.disable(2960);M.stencil_enable=!1;if(t=M.profile)w=performance.now(),V.count+=n;G.useProgram(B.program);J=qa.angle_instanced_arrays;var tc,xb,wc,Cb,Ic;za.setVAO(null);tc=E.location;xb=T[tc];xb.buffer||G.enableVertexAttribArray(tc);if(5126!==xb.type||1!==xb.size||xb.buffer!==g||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)G.bindBuffer(34962,g.buffer),
G.vertexAttribPointer(tc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=g,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(J.vertexAttribDivisorANGLE(tc,0),xb.divisor=0);wc=b.location;Cb=T[wc];Cb.buffer||G.enableVertexAttribArray(wc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==l||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)G.bindBuffer(34962,l.buffer),G.vertexAttribPointer(wc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=l,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&
(J.vertexAttribDivisorANGLE(wc,0),Cb.divisor=0);(Ic=P.elements)?G.bindBuffer(34963,Ic.buffer.buffer):za.currentVAO&&(Ic=wa.getElements(za.currentVAO.elements))&&G.bindBuffer(34963,Ic.buffer.buffer);for(u=0;u<n;++u){k=f[u];var lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,
rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,Ma,se,id,qf,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc;lc=k.viewport;Fc=lc.x|0;Vc=lc.y|0;Tc="width"in lc?lc.width|0:q.framebufferWidth-Fc;Bc="height"in lc?lc.height|0:q.framebufferHeight-Vc;ec=q.viewportWidth;q.viewportWidth=Tc;Gc=q.viewportHeight;q.viewportHeight=Bc;G.viewport(Fc,Vc,Tc,Bc);Ea[0]=Fc;Ea[1]=Vc;Ea[2]=Tc;Ea[3]=Bc;(oc=ha.call(this,q,k,u))?G.enable(2929):G.disable(2929);M.depth_enable=oc;pc=
k.viewport;mc=pc.x|0;fc=pc.y|0;$a="width"in pc?pc.width|0:q.framebufferWidth-mc;Hc="height"in pc?pc.height|0:q.framebufferHeight-fc;G.scissor(mc,fc,$a,Hc);dd[0]=mc;dd[1]=fc;dd[2]=$a;dd[3]=Hc;ta.buffer=k.positionBuffer;yb=!1;cb=null;Nb=0;ab=!1;Va=ob=0;Cd=1;Ib=0;Jb=5126;Gb=kb=Ob=qc=0;ca(ta)?(yb=!0,cb=A.createStream(34962,ta),Jb=cb.dtype):(cb=A.getBuffer(ta))?Jb=cb.dtype:"constant"in ta?(Cd=2,"number"===typeof ta.constant?(Ob=ta.constant,kb=Gb=qc=0):(Ob=0<ta.constant.length?ta.constant[0]:0,kb=1<ta.constant.length?
ta.constant[1]:0,Gb=2<ta.constant.length?ta.constant[2]:0,qc=3<ta.constant.length?ta.constant[3]:0)):(cb=ca(ta.buffer)?A.createStream(34962,ta.buffer):A.getBuffer(ta.buffer),Jb="type"in ta?la[ta.type]:cb.dtype,ab=!!ta.normalized,Va=ta.size|0,ob=ta.offset|0,Ib=ta.stride|0,Nb=ta.divisor|0);Db=p.location;wb=T[Db];if(1===Cd){wb.buffer||G.enableVertexAttribArray(Db);ib=Va||2;if(wb.type!==Jb||wb.size!==ib||wb.buffer!==cb||wb.normalized!==ab||wb.offset!==ob||wb.stride!==Ib)G.bindBuffer(34962,cb.buffer),
G.vertexAttribPointer(Db,ib,Jb,ab,Ib,ob),wb.type=Jb,wb.size=ib,wb.buffer=cb,wb.normalized=ab,wb.offset=ob,wb.stride=Ib;wb.divisor!==Nb&&(J.vertexAttribDivisorANGLE(Db,Nb),wb.divisor=Nb)}else if(wb.buffer&&(G.disableVertexAttribArray(Db),wb.buffer=null),wb.x!==Ob||wb.y!==kb||wb.z!==Gb||wb.w!==qc)G.vertexAttrib4f(Db,Ob,kb,Gb,qc),wb.x=Ob,wb.y=kb,wb.z=Gb,wb.w=qc;Da.buffer=k.positionBuffer;Yb=!1;Pb=null;qb=0;Ua=!1;zb=Ub=0;bc=1;jb=0;pb=5126;eb=Ja=rb=Ha=0;ca(Da)?(Yb=!0,Pb=A.createStream(34962,Da),pb=Pb.dtype):
(Pb=A.getBuffer(Da))?pb=Pb.dtype:"constant"in Da?(bc=2,"number"===typeof Da.constant?(rb=Da.constant,Ja=eb=Ha=0):(rb=0<Da.constant.length?Da.constant[0]:0,Ja=1<Da.constant.length?Da.constant[1]:0,eb=2<Da.constant.length?Da.constant[2]:0,Ha=3<Da.constant.length?Da.constant[3]:0)):(Pb=ca(Da.buffer)?A.createStream(34962,Da.buffer):A.getBuffer(Da.buffer),pb="type"in Da?la[Da.type]:Pb.dtype,Ua=!!Da.normalized,zb=Da.size|0,Ub=Da.offset|0,jb=Da.stride|0,qb=Da.divisor|0);gb=h.location;Ka=T[gb];if(1===bc){Ka.buffer||
G.enableVertexAttribArray(gb);lb=zb||2;if(Ka.type!==pb||Ka.size!==lb||Ka.buffer!==Pb||Ka.normalized!==Ua||Ka.offset!==Ub||Ka.stride!==jb)G.bindBuffer(34962,Pb.buffer),G.vertexAttribPointer(gb,lb,pb,Ua,jb,Ub),Ka.type=pb,Ka.size=lb,Ka.buffer=Pb,Ka.normalized=Ua,Ka.offset=Ub,Ka.stride=jb;Ka.divisor!==qb&&(J.vertexAttribDivisorANGLE(gb,qb),Ka.divisor=qb)}else if(Ka.buffer&&(G.disableVertexAttribArray(gb),Ka.buffer=null),Ka.x!==rb||Ka.y!==Ja||Ka.z!==eb||Ka.w!==Ha)G.vertexAttrib4f(gb,rb,Ja,eb,Ha),Ka.x=
rb,Ka.y=Ja,Ka.z=eb,Ka.w=Ha;hb.buffer=k.positionBuffer;Wa=!1;tb=null;sb=0;Pa=!1;Ra=Ac=0;Kb=1;Eb=0;Na=5126;Mb=Lb=Ya=xd=0;ca(hb)?(Wa=!0,tb=A.createStream(34962,hb),Na=tb.dtype):(tb=A.getBuffer(hb))?Na=tb.dtype:"constant"in hb?(Kb=2,"number"===typeof hb.constant?(Ya=hb.constant,Lb=Mb=xd=0):(Ya=0<hb.constant.length?hb.constant[0]:0,Lb=1<hb.constant.length?hb.constant[1]:0,Mb=2<hb.constant.length?hb.constant[2]:0,xd=3<hb.constant.length?hb.constant[3]:0)):(tb=ca(hb.buffer)?A.createStream(34962,hb.buffer):
A.getBuffer(hb.buffer),Na="type"in hb?la[hb.type]:tb.dtype,Pa=!!hb.normalized,Ra=hb.size|0,Ac=hb.offset|0,Eb=hb.stride|0,sb=hb.divisor|0);mb=va.location;Oa=T[mb];if(1===Kb){Oa.buffer||G.enableVertexAttribArray(mb);Zb=Ra||2;if(Oa.type!==Na||Oa.size!==Zb||Oa.buffer!==tb||Oa.normalized!==Pa||Oa.offset!==Ac||Oa.stride!==Eb)G.bindBuffer(34962,tb.buffer),G.vertexAttribPointer(mb,Zb,Na,Pa,Eb,Ac),Oa.type=Na,Oa.size=Zb,Oa.buffer=tb,Oa.normalized=Pa,Oa.offset=Ac,Oa.stride=Eb;Oa.divisor!==sb&&(J.vertexAttribDivisorANGLE(mb,
sb),Oa.divisor=sb)}else if(Oa.buffer&&(G.disableVertexAttribArray(mb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Lb||Oa.z!==Mb||Oa.w!==xd)G.vertexAttrib4f(mb,Ya,Lb,Mb,xd),Oa.x=Ya,Oa.y=Lb,Oa.z=Mb,Oa.w=xd;ea.buffer=k.positionBuffer;Qa=!1;ub=null;vb=0;Sa=!1;gc=nb=0;Dc=1;uc=0;bb=5126;Uc=Xa=nd=jc=0;ca(ea)?(Qa=!0,ub=A.createStream(34962,ea),bb=ub.dtype):(ub=A.getBuffer(ea))?bb=ub.dtype:"constant"in ea?(Dc=2,"number"===typeof ea.constant?(nd=ea.constant,Xa=Uc=jc=0):(nd=0<ea.constant.length?ea.constant[0]:0,Xa=1<
ea.constant.length?ea.constant[1]:0,Uc=2<ea.constant.length?ea.constant[2]:0,jc=3<ea.constant.length?ea.constant[3]:0)):(ub=ca(ea.buffer)?A.createStream(34962,ea.buffer):A.getBuffer(ea.buffer),bb="type"in ea?la[ea.type]:ub.dtype,Sa=!!ea.normalized,gc=ea.size|0,nb=ea.offset|0,uc=ea.stride|0,vb=ea.divisor|0);Ab=ja.location;Za=T[Ab];if(1===Dc){Za.buffer||G.enableVertexAttribArray(Ab);Vb=gc||2;if(Za.type!==bb||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==nb||Za.stride!==uc)G.bindBuffer(34962,
ub.buffer),G.vertexAttribPointer(Ab,Vb,bb,Sa,uc,nb),Za.type=bb,Za.size=Vb,Za.buffer=ub,Za.normalized=Sa,Za.offset=nb,Za.stride=uc;Za.divisor!==vb&&(J.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&(G.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==nd||Za.y!==Xa||Za.z!==Uc||Za.w!==jc)G.vertexAttrib4f(Ab,nd,Xa,Uc,jc),Za.x=nd,Za.y=Xa,Za.z=Uc,Za.w=jc;Y.buffer=k.colorBuffer;sc=!1;Wb=null;Qb=0;Jc=!1;Ld=Rb=0;Cc=1;ud=0;Lc=5126;vc=nc=vd=Wc=0;ca(Y)?(sc=!0,Wb=A.createStream(34962,Y),Lc=
Wb.dtype):(Wb=A.getBuffer(Y))?Lc=Wb.dtype:"constant"in Y?(Cc=2,"number"===typeof Y.constant?(vd=Y.constant,nc=vc=Wc=0):(vd=0<Y.constant.length?Y.constant[0]:0,nc=1<Y.constant.length?Y.constant[1]:0,vc=2<Y.constant.length?Y.constant[2]:0,Wc=3<Y.constant.length?Y.constant[3]:0)):(Wb=ca(Y.buffer)?A.createStream(34962,Y.buffer):A.getBuffer(Y.buffer),Lc="type"in Y?la[Y.type]:Wb.dtype,Jc=!!Y.normalized,Ld=Y.size|0,Rb=Y.offset|0,ud=Y.stride|0,Qb=Y.divisor|0);hc=U.location;db=T[hc];if(1===Cc){db.buffer||
G.enableVertexAttribArray(hc);rc=Ld||4;if(db.type!==Lc||db.size!==rc||db.buffer!==Wb||db.normalized!==Jc||db.offset!==Rb||db.stride!==ud)G.bindBuffer(34962,Wb.buffer),G.vertexAttribPointer(hc,rc,Lc,Jc,ud,Rb),db.type=Lc,db.size=rc,db.buffer=Wb,db.normalized=Jc,db.offset=Rb,db.stride=ud;db.divisor!==Qb&&(J.vertexAttribDivisorANGLE(hc,Qb),db.divisor=Qb)}else if(db.buffer&&(G.disableVertexAttribArray(hc),db.buffer=null),db.x!==vd||db.y!==nc||db.z!==vc||db.w!==Wc)G.vertexAttrib4f(hc,vd,nc,vc,Wc),db.x=
vd,db.y=nc,db.z=vc,db.w=Wc;Ia.buffer=k.colorBuffer;Tb=!1;Xb=null;dc=0;ic=!1;zc=xc=0;ad=1;Oc=0;Pc=5126;bd=ld=Xc=Qc=0;ca(Ia)?(Tb=!0,Xb=A.createStream(34962,Ia),Pc=Xb.dtype):(Xb=A.getBuffer(Ia))?Pc=Xb.dtype:"constant"in Ia?(ad=2,"number"===typeof Ia.constant?(Xc=Ia.constant,ld=bd=Qc=0):(Xc=0<Ia.constant.length?Ia.constant[0]:0,ld=1<Ia.constant.length?Ia.constant[1]:0,bd=2<Ia.constant.length?Ia.constant[2]:0,Qc=3<Ia.constant.length?Ia.constant[3]:0)):(Xb=ca(Ia.buffer)?A.createStream(34962,Ia.buffer):
A.getBuffer(Ia.buffer),Pc="type"in Ia?la[Ia.type]:Xb.dtype,ic=!!Ia.normalized,zc=Ia.size|0,xc=Ia.offset|0,Oc=Ia.stride|0,dc=Ia.divisor|0);Yc=Z.location;kc=T[Yc];if(1===ad){kc.buffer||G.enableVertexAttribArray(Yc);cc=zc||4;if(kc.type!==Pc||kc.size!==cc||kc.buffer!==Xb||kc.normalized!==ic||kc.offset!==xc||kc.stride!==Oc)G.bindBuffer(34962,Xb.buffer),G.vertexAttribPointer(Yc,cc,Pc,ic,Oc,xc),kc.type=Pc,kc.size=cc,kc.buffer=Xb,kc.normalized=ic,kc.offset=xc,kc.stride=Oc;kc.divisor!==dc&&(J.vertexAttribDivisorANGLE(Yc,
dc),kc.divisor=dc)}else if(kc.buffer&&(G.disableVertexAttribArray(Yc),kc.buffer=null),kc.x!==Xc||kc.y!==ld||kc.z!==bd||kc.w!==Qc)G.vertexAttrib4f(Yc,Xc,ld,bd,Qc),kc.x=Xc,kc.y=ld,kc.z=bd,kc.w=Qc;Zc=k.scale;Sc=Zc[0];yc=Zc[1];u&&cd===Sc&&hd===yc||(cd=Sc,hd=yc,G.uniform2f(gd.location,Sc,yc));qd=k.translate;Ma=qd[0];id=qd[1];u&&se===Ma&&qf===id||(se=Ma,qf=id,G.uniform2f(fa.location,Ma,id));Od=k.thickness;u&&Yd===Od||(Yd=Od,G.uniform1f(X.location,Od));de=k.depth;u&&Pd===de||(Pd=de,G.uniform1f(D.location,
de));Kd=c.call(this,q,k,u);Id=Kd[0];Rc=Kd[1];td=Kd[2];yd=Kd[3];u&&od===Id&&wd===Rc&&jd===td&&Dd===yd||(od=Id,wd=Rc,jd=td,Dd=yd,G.uniform4f(R.location,Id,Rc,td,yd));Fd=k.miterLimit;u&&Fe===Fd||(Fe=Fd,G.uniform1f(x.location,Fd));ke=e.call(this,q,k,u);u&&te===ke||(te=ke,G.uniform1f(a.location,ke));le=k.dashLength;u&&je===le||(je=le,G.uniform1f(y.location,le));he=k.opacity;u&&ue===he||(ue=he,G.uniform1f(z.location,he));(ee=k.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);me=ee._texture;
G.uniform1i(da.location,me.bind());Mc=k.count;0<Mc?Ic?J.drawElementsInstancedANGLE(5,4,Ic.type,0<<(Ic.type-5121>>1),Mc):J.drawArraysInstancedANGLE(5,0,4,Mc):0>Mc&&(Ic?G.drawElements(5,4,Ic.type,0<<(Ic.type-5121>>1)):G.drawArrays(5,0,4));q.viewportWidth=ec;q.viewportHeight=Gc;yb&&A.destroyStream(cb);Yb&&A.destroyStream(Pb);Wa&&A.destroyStream(tb);Qa&&A.destroyStream(ub);sc&&A.destroyStream(Wb);Tb&&A.destroyStream(Xb);me.unbind()}M.dirty=!0;za.setVAO(null);t&&(V.cpuTime+=performance.now()-w)},draw:function(e){var c,
d,t,w,u,k,Aa,C,B,L,F,I,ra,ya,N,O,ha,W,pa,Ba,Ca,ma,aa,$d,ba,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld;c=r.next;c!==r.cur&&(c?G.bindFramebuffer(36160,c.framebuffer):G.bindFramebuffer(36160,null),r.cur=c);if(M.dirty){var Cc,ud,Lc,Wc,vd,nc,vc,hc,db,
rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc;Cc=S.dither;Cc!==M.dither&&(Cc?G.enable(3024):G.disable(3024),M.dither=Cc);ud=S.depth_func;ud!==M.depth_func&&(G.depthFunc(ud),M.depth_func=ud);Lc=fb[0];Wc=fb[1];if(Lc!==Ta[0]||Wc!==Ta[1])G.depthRange(Lc,Wc),Ta[0]=Lc,Ta[1]=Wc;vd=S.depth_mask;vd!==M.depth_mask&&(G.depthMask(vd),M.depth_mask=vd);nc=La[0];vc=La[1];hc=La[2];db=La[3];if(nc!==oa[0]||vc!==oa[1]||hc!==oa[2]||db!==oa[3])G.colorMask(nc,vc,hc,db),oa[0]=nc,oa[1]=vc,oa[2]=hc,oa[3]=
db;rc=S.frontFace;rc!==M.frontFace&&(G.frontFace(rc),M.frontFace=rc);Tb=S.lineWidth;Tb!==M.lineWidth&&(G.lineWidth(Tb),M.lineWidth=Tb);Xb=S.polygonOffset_enable;Xb!==M.polygonOffset_enable&&(Xb?G.enable(32823):G.disable(32823),M.polygonOffset_enable=Xb);dc=v[0];ic=v[1];if(dc!==m[0]||ic!==m[1])G.polygonOffset(dc,ic),m[0]=dc,m[1]=ic;xc=S.sample_alpha;xc!==M.sample_alpha&&(xc?G.enable(32926):G.disable(32926),M.sample_alpha=xc);zc=S.sample_enable;zc!==M.sample_enable&&(zc?G.enable(32928):G.disable(32928),
M.sample_enable=zc);ad=K[0];Oc=K[1];if(ad!==ua[0]||Oc!==ua[1])G.sampleCoverage(ad,Oc),ua[0]=ad,ua[1]=Oc;Pc=S.stencil_mask;Pc!==M.stencil_mask&&(G.stencilMask(Pc),M.stencil_mask=Pc);Qc=Hb[0];Xc=Hb[1];ld=Hb[2];if(Qc!==ia[0]||Xc!==ia[1]||ld!==ia[2])G.stencilFunc(Qc,Xc,ld),ia[0]=Qc,ia[1]=Xc,ia[2]=ld;bd=Fa[0];Yc=Fa[1];kc=Fa[2];cc=Fa[3];if(bd!==na[0]||Yc!==na[1]||kc!==na[2]||cc!==na[3])G.stencilOpSeparate(bd,Yc,kc,cc),na[0]=bd,na[1]=Yc,na[2]=kc,na[3]=cc;Zc=Q[0];Sc=Q[1];cd=Q[2];yc=Q[3];if(Zc!==sa[0]||Sc!==
sa[1]||cd!==sa[2]||yc!==sa[3])G.stencilOpSeparate(Zc,Sc,cd,yc),sa[0]=Zc,sa[1]=Sc,sa[2]=cd,sa[3]=yc}d=e.viewport;t=d.x|0;w=d.y|0;u="width"in d?d.width|0:q.framebufferWidth-t;k="height"in d?d.height|0:q.framebufferHeight-w;Aa=q.viewportWidth;q.viewportWidth=u;C=q.viewportHeight;q.viewportHeight=k;G.viewport(t,w,u,k);Ea[0]=t;Ea[1]=w;Ea[2]=u;Ea[3]=k;G.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;G.enable(3042);M.blend_enable=!0;G.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;G.blendFuncSeparate(770,
771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;G.enable(2884);M.cull_enable=!0;G.cullFace(1029);M.cull_face=1029;(B=H.call(this,q,e,0))?G.enable(2929):G.disable(2929);M.depth_enable=B;L=e.viewport;F=L.x|0;I=L.y|0;ra="width"in L?L.width|0:q.framebufferWidth-F;ya="height"in L?L.height|0:q.framebufferHeight-I;G.scissor(F,I,ra,ya);dd[0]=F;dd[1]=I;dd[2]=ra;dd[3]=ya;G.enable(3089);M.scissor_enable=!0;G.disable(2960);M.stencil_enable=!1;if(N=M.profile)O=performance.now(),V.count++;G.useProgram(J.program);
ha=qa.angle_instanced_arrays;za.setVAO(null);ta.buffer=e.positionBuffer;W=!1;pa=null;Ba=0;Ca=!1;aa=ma=0;$d=1;ba=0;Bd=5126;Kc=sd=$c=md=0;ca(ta)?(W=!0,pa=A.createStream(34962,ta),Bd=pa.dtype):(pa=A.getBuffer(ta))?Bd=pa.dtype:"constant"in ta?($d=2,"number"===typeof ta.constant?($c=ta.constant,sd=Kc=md=0):($c=0<ta.constant.length?ta.constant[0]:0,sd=1<ta.constant.length?ta.constant[1]:0,Kc=2<ta.constant.length?ta.constant[2]:0,md=3<ta.constant.length?ta.constant[3]:0)):(pa=ca(ta.buffer)?A.createStream(34962,
ta.buffer):A.getBuffer(ta.buffer),Bd="type"in ta?la[ta.type]:pa.dtype,Ca=!!ta.normalized,aa=ta.size|0,ma=ta.offset|0,ba=ta.stride|0,Ba=ta.divisor|0);pd=p.location;Ec=T[pd];if(1===$d){Ec.buffer||G.enableVertexAttribArray(pd);ed=aa||2;if(Ec.type!==Bd||Ec.size!==ed||Ec.buffer!==pa||Ec.normalized!==Ca||Ec.offset!==ma||Ec.stride!==ba)G.bindBuffer(34962,pa.buffer),G.vertexAttribPointer(pd,ed,Bd,Ca,ba,ma),Ec.type=Bd,Ec.size=ed,Ec.buffer=pa,Ec.normalized=Ca,Ec.offset=ma,Ec.stride=ba;Ec.divisor!==Ba&&(ha.vertexAttribDivisorANGLE(pd,
Ba),Ec.divisor=Ba)}else if(Ec.buffer&&(G.disableVertexAttribArray(pd),Ec.buffer=null),Ec.x!==$c||Ec.y!==sd||Ec.z!==Kc||Ec.w!==md)G.vertexAttrib4f(pd,$c,sd,Kc,md),Ec.x=$c,Ec.y=sd,Ec.z=Kc,Ec.w=md;Da.buffer=e.positionBuffer;Nc=!1;kd=null;Bb=0;Fb=!1;xb=tc=0;wc=1;Cb=0;Ic=5126;Tc=Vc=Fc=lc=0;ca(Da)?(Nc=!0,kd=A.createStream(34962,Da),Ic=kd.dtype):(kd=A.getBuffer(Da))?Ic=kd.dtype:"constant"in Da?(wc=2,"number"===typeof Da.constant?(Fc=Da.constant,Vc=Tc=lc=0):(Fc=0<Da.constant.length?Da.constant[0]:0,Vc=1<
Da.constant.length?Da.constant[1]:0,Tc=2<Da.constant.length?Da.constant[2]:0,lc=3<Da.constant.length?Da.constant[3]:0)):(kd=ca(Da.buffer)?A.createStream(34962,Da.buffer):A.getBuffer(Da.buffer),Ic="type"in Da?la[Da.type]:kd.dtype,Fb=!!Da.normalized,xb=Da.size|0,tc=Da.offset|0,Cb=Da.stride|0,Bb=Da.divisor|0);Bc=h.location;ec=T[Bc];if(1===wc){ec.buffer||G.enableVertexAttribArray(Bc);Gc=xb||2;if(ec.type!==Ic||ec.size!==Gc||ec.buffer!==kd||ec.normalized!==Fb||ec.offset!==tc||ec.stride!==Cb)G.bindBuffer(34962,
kd.buffer),G.vertexAttribPointer(Bc,Gc,Ic,Fb,Cb,tc),ec.type=Ic,ec.size=Gc,ec.buffer=kd,ec.normalized=Fb,ec.offset=tc,ec.stride=Cb;ec.divisor!==Bb&&(ha.vertexAttribDivisorANGLE(Bc,Bb),ec.divisor=Bb)}else if(ec.buffer&&(G.disableVertexAttribArray(Bc),ec.buffer=null),ec.x!==Fc||ec.y!==Vc||ec.z!==Tc||ec.w!==lc)G.vertexAttrib4f(Bc,Fc,Vc,Tc,lc),ec.x=Fc,ec.y=Vc,ec.z=Tc,ec.w=lc;hb.buffer=e.positionBuffer;oc=!1;pc=null;mc=0;fc=!1;Hc=$a=0;yb=1;cb=0;Nb=5126;Cd=Va=ob=ab=0;ca(hb)?(oc=!0,pc=A.createStream(34962,
hb),Nb=pc.dtype):(pc=A.getBuffer(hb))?Nb=pc.dtype:"constant"in hb?(yb=2,"number"===typeof hb.constant?(ob=hb.constant,Va=Cd=ab=0):(ob=0<hb.constant.length?hb.constant[0]:0,Va=1<hb.constant.length?hb.constant[1]:0,Cd=2<hb.constant.length?hb.constant[2]:0,ab=3<hb.constant.length?hb.constant[3]:0)):(pc=ca(hb.buffer)?A.createStream(34962,hb.buffer):A.getBuffer(hb.buffer),Nb="type"in hb?la[hb.type]:pc.dtype,fc=!!hb.normalized,Hc=hb.size|0,$a=hb.offset|0,cb=hb.stride|0,mc=hb.divisor|0);Ib=va.location;Jb=
T[Ib];if(1===yb){Jb.buffer||G.enableVertexAttribArray(Ib);qc=Hc||2;if(Jb.type!==Nb||Jb.size!==qc||Jb.buffer!==pc||Jb.normalized!==fc||Jb.offset!==$a||Jb.stride!==cb)G.bindBuffer(34962,pc.buffer),G.vertexAttribPointer(Ib,qc,Nb,fc,cb,$a),Jb.type=Nb,Jb.size=qc,Jb.buffer=pc,Jb.normalized=fc,Jb.offset=$a,Jb.stride=cb;Jb.divisor!==mc&&(ha.vertexAttribDivisorANGLE(Ib,mc),Jb.divisor=mc)}else if(Jb.buffer&&(G.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==ob||Jb.y!==Va||Jb.z!==Cd||Jb.w!==ab)G.vertexAttrib4f(Ib,
ob,Va,Cd,ab),Jb.x=ob,Jb.y=Va,Jb.z=Cd,Jb.w=ab;ea.buffer=e.positionBuffer;Ob=!1;kb=null;Gb=0;Db=!1;ib=wb=0;Yb=1;Pb=0;qb=5126;bc=zb=Ub=Ua=0;ca(ea)?(Ob=!0,kb=A.createStream(34962,ea),qb=kb.dtype):(kb=A.getBuffer(ea))?qb=kb.dtype:"constant"in ea?(Yb=2,"number"===typeof ea.constant?(Ub=ea.constant,zb=bc=Ua=0):(Ub=0<ea.constant.length?ea.constant[0]:0,zb=1<ea.constant.length?ea.constant[1]:0,bc=2<ea.constant.length?ea.constant[2]:0,Ua=3<ea.constant.length?ea.constant[3]:0)):(kb=ca(ea.buffer)?A.createStream(34962,
ea.buffer):A.getBuffer(ea.buffer),qb="type"in ea?la[ea.type]:kb.dtype,Db=!!ea.normalized,ib=ea.size|0,wb=ea.offset|0,Pb=ea.stride|0,Gb=ea.divisor|0);jb=ja.location;pb=T[jb];if(1===Yb){pb.buffer||G.enableVertexAttribArray(jb);Ha=ib||2;if(pb.type!==qb||pb.size!==Ha||pb.buffer!==kb||pb.normalized!==Db||pb.offset!==wb||pb.stride!==Pb)G.bindBuffer(34962,kb.buffer),G.vertexAttribPointer(jb,Ha,qb,Db,Pb,wb),pb.type=qb,pb.size=Ha,pb.buffer=kb,pb.normalized=Db,pb.offset=wb,pb.stride=Pb;pb.divisor!==Gb&&(ha.vertexAttribDivisorANGLE(jb,
Gb),pb.divisor=Gb)}else if(pb.buffer&&(G.disableVertexAttribArray(jb),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==bc||pb.w!==Ua)G.vertexAttrib4f(jb,Ub,zb,bc,Ua),pb.x=Ub,pb.y=zb,pb.z=bc,pb.w=Ua;Y.buffer=e.colorBuffer;rb=!1;Ja=null;eb=0;gb=!1;lb=Ka=0;Wa=1;tb=0;sb=5126;Kb=Ra=Ac=Pa=0;ca(Y)?(rb=!0,Ja=A.createStream(34962,Y),sb=Ja.dtype):(Ja=A.getBuffer(Y))?sb=Ja.dtype:"constant"in Y?(Wa=2,"number"===typeof Y.constant?(Ac=Y.constant,Ra=Kb=Pa=0):(Ac=0<Y.constant.length?Y.constant[0]:0,Ra=1<Y.constant.length?
Y.constant[1]:0,Kb=2<Y.constant.length?Y.constant[2]:0,Pa=3<Y.constant.length?Y.constant[3]:0)):(Ja=ca(Y.buffer)?A.createStream(34962,Y.buffer):A.getBuffer(Y.buffer),sb="type"in Y?la[Y.type]:Ja.dtype,gb=!!Y.normalized,lb=Y.size|0,Ka=Y.offset|0,tb=Y.stride|0,eb=Y.divisor|0);Eb=U.location;Na=T[Eb];if(1===Wa){Na.buffer||G.enableVertexAttribArray(Eb);xd=lb||4;if(Na.type!==sb||Na.size!==xd||Na.buffer!==Ja||Na.normalized!==gb||Na.offset!==Ka||Na.stride!==tb)G.bindBuffer(34962,Ja.buffer),G.vertexAttribPointer(Eb,
xd,sb,gb,tb,Ka),Na.type=sb,Na.size=xd,Na.buffer=Ja,Na.normalized=gb,Na.offset=Ka,Na.stride=tb;Na.divisor!==eb&&(ha.vertexAttribDivisorANGLE(Eb,eb),Na.divisor=eb)}else if(Na.buffer&&(G.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Ac||Na.y!==Ra||Na.z!==Kb||Na.w!==Pa)G.vertexAttrib4f(Eb,Ac,Ra,Kb,Pa),Na.x=Ac,Na.y=Ra,Na.z=Kb,Na.w=Pa;Ia.buffer=e.colorBuffer;Ya=!1;Lb=null;Mb=0;mb=!1;Zb=Oa=0;Qa=1;ub=0;vb=5126;Dc=gc=nb=Sa=0;ca(Ia)?(Ya=!0,Lb=A.createStream(34962,Ia),vb=Lb.dtype):(Lb=A.getBuffer(Ia))?
vb=Lb.dtype:"constant"in Ia?(Qa=2,"number"===typeof Ia.constant?(nb=Ia.constant,gc=Dc=Sa=0):(nb=0<Ia.constant.length?Ia.constant[0]:0,gc=1<Ia.constant.length?Ia.constant[1]:0,Dc=2<Ia.constant.length?Ia.constant[2]:0,Sa=3<Ia.constant.length?Ia.constant[3]:0)):(Lb=ca(Ia.buffer)?A.createStream(34962,Ia.buffer):A.getBuffer(Ia.buffer),vb="type"in Ia?la[Ia.type]:Lb.dtype,mb=!!Ia.normalized,Zb=Ia.size|0,Oa=Ia.offset|0,ub=Ia.stride|0,Mb=Ia.divisor|0);uc=Z.location;bb=T[uc];if(1===Qa){bb.buffer||G.enableVertexAttribArray(uc);
jc=Zb||4;if(bb.type!==vb||bb.size!==jc||bb.buffer!==Lb||bb.normalized!==mb||bb.offset!==Oa||bb.stride!==ub)G.bindBuffer(34962,Lb.buffer),G.vertexAttribPointer(uc,jc,vb,mb,ub,Oa),bb.type=vb,bb.size=jc,bb.buffer=Lb,bb.normalized=mb,bb.offset=Oa,bb.stride=ub;bb.divisor!==Mb&&(ha.vertexAttribDivisorANGLE(uc,Mb),bb.divisor=Mb)}else if(bb.buffer&&(G.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==nb||bb.y!==gc||bb.z!==Dc||bb.w!==Sa)G.vertexAttrib4f(uc,nb,gc,Dc,Sa),bb.x=nb,bb.y=gc,bb.z=Dc,bb.w=Sa;nd=
E.location;Xa=T[nd];Xa.buffer||G.enableVertexAttribArray(nd);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==g||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)G.bindBuffer(34962,g.buffer),G.vertexAttribPointer(nd,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=g,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(ha.vertexAttribDivisorANGLE(nd,0),Xa.divisor=0);Uc=b.location;Ab=T[Uc];Ab.buffer||G.enableVertexAttribArray(Uc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==l||!1!==Ab.normalized||4!==
Ab.offset||8!==Ab.stride)G.bindBuffer(34962,l.buffer),G.vertexAttribPointer(Uc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=l,Ab.normalized=!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ha.vertexAttribDivisorANGLE(Uc,0),Ab.divisor=0);Za=e.scale;G.uniform2f(gd.location,Za[0],Za[1]);Vb=e.translate;G.uniform2f(fa.location,Vb[0],Vb[1]);G.uniform1f(X.location,e.thickness);G.uniform1f(D.location,e.depth);sc=n.call(this,q,e,0);G.uniform4f(R.location,sc[0],sc[1],sc[2],sc[3]);G.uniform1f(x.location,e.miterLimit);
Wb=f.call(this,q,e,0);G.uniform1f(a.location,Wb);G.uniform1f(y.location,e.dashLength);G.uniform1f(z.location,e.opacity);(Qb=e.dashTexture)&&"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Jc=Qb._texture;G.uniform1i(da.location,Jc.bind());(Rb=P.elements)?G.bindBuffer(34963,Rb.buffer.buffer):za.currentVAO&&(Rb=wa.getElements(za.currentVAO.elements))&&G.bindBuffer(34963,Rb.buffer.buffer);Ld=e.count;0<Ld?Rb?ha.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),Ld):ha.drawArraysInstancedANGLE(5,
0,4,Ld):0>Ld&&(Rb?G.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):G.drawArrays(5,0,4));M.dirty=!0;za.setVAO(null);q.viewportWidth=Aa;q.viewportHeight=C;N&&(V.cpuTime+=performance.now()-O);W&&A.destroyStream(pa);Nc&&A.destroyStream(kd);oc&&A.destroyStream(pc);Ob&&A.destroyStream(kb);rb&&A.destroyStream(Ja);Ya&&A.destroyStream(Lb);Jc.unbind()},scope:function(a,e,b){var c,f,m,h,r,v,p,n,Q,K,d,oa,x,y,z,sa,La,G,Fa,T,fb,na,ga,ia,R,D,J,E,ua,H,B,Ea,wa,U,ka,Ta,ha,X,Z,xa,fa,da,Hb,qa,va,ja,za,dd,aa,gd,fc,$a,
ba,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,Ma,se,id,qf,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,
We,Vd,ae,Xe,gf,lf,df,hf,jf,kf,rf,mf,sf,Bf,Cf,Qe,Ee,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;c=a.viewport;f=c.x|0;m=c.y|0;h="width"in c?c.width|0:q.framebufferWidth-f;r="height"in c?c.height|0:q.framebufferHeight-m;v=q.viewportWidth;q.viewportWidth=h;p=q.viewportHeight;q.viewportHeight=r;n=Aa[0];Aa[0]=f;Q=Aa[1];Aa[1]=m;K=Aa[2];Aa[2]=h;d=Aa[3];Aa[3]=r;oa=ya[0];ya[0]=0;x=ya[1];ya[1]=0;y=ya[2];ya[2]=0;z=ya[3];ya[3]=0;sa=S.blend_enable;S.blend_enable=!0;La=Ca[0];Ca[0]=32774;G=Ca[1];Ca[1]=32774;Fa=pa[0];pa[0]=
770;T=pa[1];pa[1]=771;fb=pa[2];pa[2]=773;na=pa[3];pa[3]=1;ga=S.cull_enable;S.cull_enable=!0;ia=S.cull_face;S.cull_face=1029;R=F.call(this,q,a,b);D=S.depth_enable;S.depth_enable=R;J=a.viewport;E=J.x|0;ua=J.y|0;H="width"in J?J.width|0:q.framebufferWidth-E;B="height"in J?J.height|0:q.framebufferHeight-ua;Ea=Ba[0];Ba[0]=E;wa=Ba[1];Ba[1]=ua;U=Ba[2];Ba[2]=H;ka=Ba[3];Ba[3]=B;Ta=S.scissor_enable;S.scissor_enable=!0;ha=S.stencil_enable;S.stencil_enable=!1;if(X=M.profile)Z=performance.now(),V.count++;xa=P.offset;
P.offset=0;fa=P.count;P.count=4;da=a.count;Hb=P.instances;P.instances=da;qa=P.primitive;P.primitive=5;va=a.dashLength;ja=ra[23];ra[23]=va;za=a.dashTexture;dd=ra[24];ra[24]=za;aa=a.depth;gd=ra[22];ra[22]=aa;fc=a.id;$a=ra[31];ra[31]=fc;ba=a.miterLimit;yb=ra[32];ra[32]=ba;cb=C.call(this,q,a,b);Nb=ra[33];ra[33]=cb;ab=a.opacity;ob=ra[10];ra[10]=ab;Va=q.pixelRatio;Cd=ra[34];ra[34]=Va;Ib=a.scale;Jb=ra[6];ra[6]=Ib;qc=a.scaleFract;Ob=ra[7];ra[7]=qc;kb=a.thickness;Gb=ra[21];ra[21]=kb;Db=a.translate;wb=ra[8];
ra[8]=Db;ib=a.translateFract;Yb=ra[9];ra[9]=ib;Pb=O.call(this,q,a,b);qb=ra[3];ra[3]=Pb;Y.buffer=a.colorBuffer;Ua=!1;Ub=null;zb=0;bc=!1;pb=jb=0;Ha=1;rb=0;Ja=5126;lb=Ka=gb=eb=0;ca(Y)?(Ua=!0,Ub=A.createStream(34962,Y),Ja=Ub.dtype):(Ub=A.getBuffer(Y))?Ja=Ub.dtype:"constant"in Y?(Ha=2,"number"===typeof Y.constant?(gb=Y.constant,Ka=lb=eb=0):(gb=0<Y.constant.length?Y.constant[0]:0,Ka=1<Y.constant.length?Y.constant[1]:0,lb=2<Y.constant.length?Y.constant[2]:0,eb=3<Y.constant.length?Y.constant[3]:0)):(Ub=ca(Y.buffer)?
A.createStream(34962,Y.buffer):A.getBuffer(Y.buffer),Ja="type"in Y?la[Y.type]:Ub.dtype,bc=!!Y.normalized,pb=Y.size|0,jb=Y.offset|0,rb=Y.stride|0,zb=Y.divisor|0);Wa=I.buffer;I.buffer=Ub;tb=I.divisor;I.divisor=zb;sb=I.normalized;I.normalized=bc;Pa=I.offset;I.offset=jb;Ac=I.size;I.size=pb;Ra=I.state;I.state=Ha;Kb=I.stride;I.stride=rb;Eb=I.type;I.type=Ja;Na=I.w;I.w=eb;xd=I.x;I.x=gb;Ya=I.y;I.y=Ka;Lb=I.z;I.z=lb;ta.buffer=a.positionBuffer;Mb=!1;mb=null;Oa=0;Zb=!1;ub=Qa=0;vb=1;Sa=0;nb=5126;bb=uc=Dc=gc=0;
ca(ta)?(Mb=!0,mb=A.createStream(34962,ta),nb=mb.dtype):(mb=A.getBuffer(ta))?nb=mb.dtype:"constant"in ta?(vb=2,"number"===typeof ta.constant?(Dc=ta.constant,uc=bb=gc=0):(Dc=0<ta.constant.length?ta.constant[0]:0,uc=1<ta.constant.length?ta.constant[1]:0,bb=2<ta.constant.length?ta.constant[2]:0,gc=3<ta.constant.length?ta.constant[3]:0)):(mb=ca(ta.buffer)?A.createStream(34962,ta.buffer):A.getBuffer(ta.buffer),nb="type"in ta?la[ta.type]:mb.dtype,Zb=!!ta.normalized,ub=ta.size|0,Qa=ta.offset|0,Sa=ta.stride|
0,Oa=ta.divisor|0);jc=k.buffer;k.buffer=mb;nd=k.divisor;k.divisor=Oa;Xa=k.normalized;k.normalized=Zb;Uc=k.offset;k.offset=Qa;Ab=k.size;k.size=ub;Za=k.state;k.state=vb;Vb=k.stride;k.stride=Sa;sc=k.type;k.type=nb;Wb=k.w;k.w=gc;Qb=k.x;k.x=Dc;Jc=k.y;k.y=uc;Rb=k.z;k.z=bb;Ia.buffer=a.colorBuffer;Ld=!1;Cc=null;ud=0;Lc=!1;vd=Wc=0;nc=1;vc=0;hc=5126;Xb=Tb=rc=db=0;ca(Ia)?(Ld=!0,Cc=A.createStream(34962,Ia),hc=Cc.dtype):(Cc=A.getBuffer(Ia))?hc=Cc.dtype:"constant"in Ia?(nc=2,"number"===typeof Ia.constant?(rc=Ia.constant,
Tb=Xb=db=0):(rc=0<Ia.constant.length?Ia.constant[0]:0,Tb=1<Ia.constant.length?Ia.constant[1]:0,Xb=2<Ia.constant.length?Ia.constant[2]:0,db=3<Ia.constant.length?Ia.constant[3]:0)):(Cc=ca(Ia.buffer)?A.createStream(34962,Ia.buffer):A.getBuffer(Ia.buffer),hc="type"in Ia?la[Ia.type]:Cc.dtype,Lc=!!Ia.normalized,vd=Ia.size|0,Wc=Ia.offset|0,vc=Ia.stride|0,ud=Ia.divisor|0);dc=u.buffer;u.buffer=Cc;ic=u.divisor;u.divisor=ud;xc=u.normalized;u.normalized=Lc;zc=u.offset;u.offset=Wc;ad=u.size;u.size=vd;Oc=u.state;
u.state=nc;Pc=u.stride;u.stride=vc;Qc=u.type;u.type=hc;Xc=u.w;u.w=db;ld=u.x;u.x=rc;bd=u.y;u.y=Tb;Yc=u.z;u.z=Xb;Da.buffer=a.positionBuffer;kc=!1;cc=null;Zc=0;Sc=!1;yc=cd=0;hd=1;qd=0;Ma=5126;Od=qf=id=se=0;ca(Da)?(kc=!0,cc=A.createStream(34962,Da),Ma=cc.dtype):(cc=A.getBuffer(Da))?Ma=cc.dtype:"constant"in Da?(hd=2,"number"===typeof Da.constant?(id=Da.constant,qf=Od=se=0):(id=0<Da.constant.length?Da.constant[0]:0,qf=1<Da.constant.length?Da.constant[1]:0,Od=2<Da.constant.length?Da.constant[2]:0,se=3<Da.constant.length?
Da.constant[3]:0)):(cc=ca(Da.buffer)?A.createStream(34962,Da.buffer):A.getBuffer(Da.buffer),Ma="type"in Da?la[Da.type]:cc.dtype,Sc=!!Da.normalized,yc=Da.size|0,cd=Da.offset|0,qd=Da.stride|0,Zc=Da.divisor|0);Yd=L.buffer;L.buffer=cc;de=L.divisor;L.divisor=Zc;Pd=L.normalized;L.normalized=Sc;Kd=L.offset;L.offset=cd;Id=L.size;L.size=yc;od=L.state;L.state=hd;Rc=L.stride;L.stride=qd;wd=L.type;L.type=Ma;td=L.w;L.w=se;jd=L.x;L.x=id;yd=L.y;L.y=qf;Dd=L.z;L.z=Od;Fd=W.buffer;W.buffer=g;Fe=W.divisor;W.divisor=
0;ke=W.normalized;W.normalized=!1;te=W.offset;W.offset=0;le=W.size;W.size=0;je=W.state;W.state=1;he=W.stride;W.stride=8;ue=W.type;W.type=5126;ee=W.w;W.w=0;me=W.x;W.x=0;Mc=W.y;W.y=0;fd=W.z;W.z=0;ve=t.buffer;t.buffer=l;pe=t.divisor;t.divisor=0;Md=t.normalized;t.normalized=!1;Qd=t.offset;t.offset=4;Sd=t.size;t.size=0;Td=t.state;t.state=1;ne=t.stride;t.stride=8;ye=t.type;t.type=5126;Be=t.w;t.w=0;qe=t.x;t.x=0;Se=t.y;t.y=0;Te=t.z;t.z=0;hb.buffer=a.positionBuffer;Oe=!1;we=null;Ge=0;Ie=!1;Ke=Je=0;He=1;Nd=
0;Zd=5126;Jd=Le=fe=ce=0;ca(hb)?(Oe=!0,we=A.createStream(34962,hb),Zd=we.dtype):(we=A.getBuffer(hb))?Zd=we.dtype:"constant"in hb?(He=2,"number"===typeof hb.constant?(fe=hb.constant,Le=Jd=ce=0):(fe=0<hb.constant.length?hb.constant[0]:0,Le=1<hb.constant.length?hb.constant[1]:0,Jd=2<hb.constant.length?hb.constant[2]:0,ce=3<hb.constant.length?hb.constant[3]:0)):(we=ca(hb.buffer)?A.createStream(34962,hb.buffer):A.getBuffer(hb.buffer),Zd="type"in hb?la[hb.type]:we.dtype,Ie=!!hb.normalized,Ke=hb.size|0,Je=
hb.offset|0,Nd=hb.stride|0,Ge=hb.divisor|0);Ud=N.buffer;N.buffer=we;De=N.divisor;N.divisor=Ge;Me=N.normalized;N.normalized=Ie;af=N.offset;N.offset=Je;$e=N.size;N.size=Ke;Ue=N.state;N.state=He;Pe=N.stride;N.stride=Nd;Ze=N.type;N.type=Zd;Ye=N.w;N.w=ce;Ve=N.x;N.x=fe;We=N.y;N.y=Le;Vd=N.z;N.z=Jd;ea.buffer=a.positionBuffer;ae=!1;Xe=null;gf=0;lf=!1;hf=df=0;jf=1;kf=0;rf=5126;Cf=Bf=sf=mf=0;ca(ea)?(ae=!0,Xe=A.createStream(34962,ea),rf=Xe.dtype):(Xe=A.getBuffer(ea))?rf=Xe.dtype:"constant"in ea?(jf=2,"number"===
typeof ea.constant?(sf=ea.constant,Bf=Cf=mf=0):(sf=0<ea.constant.length?ea.constant[0]:0,Bf=1<ea.constant.length?ea.constant[1]:0,Cf=2<ea.constant.length?ea.constant[2]:0,mf=3<ea.constant.length?ea.constant[3]:0)):(Xe=ca(ea.buffer)?A.createStream(34962,ea.buffer):A.getBuffer(ea.buffer),rf="type"in ea?la[ea.type]:Xe.dtype,lf=!!ea.normalized,hf=ea.size|0,df=ea.offset|0,kf=ea.stride|0,gf=ea.divisor|0);Qe=w.buffer;w.buffer=Xe;Ee=w.divisor;w.divisor=gf;nf=w.normalized;w.normalized=lf;of=w.offset;w.offset=
df;Df=w.size;w.size=hf;Gf=w.state;w.state=jf;Af=w.stride;w.stride=kf;Ef=w.type;w.type=rf;Ff=w.w;w.w=mf;wf=w.x;w.x=sf;xf=w.y;w.y=Bf;vf=w.z;w.z=Cf;yf=ma.vert;ma.vert=36;zf=ma.frag;ma.frag=35;M.dirty=!0;e(q,a,b);q.viewportWidth=v;q.viewportHeight=p;Aa[0]=n;Aa[1]=Q;Aa[2]=K;Aa[3]=d;ya[0]=oa;ya[1]=x;ya[2]=y;ya[3]=z;S.blend_enable=sa;Ca[0]=La;Ca[1]=G;pa[0]=Fa;pa[1]=T;pa[2]=fb;pa[3]=na;S.cull_enable=ga;S.cull_face=ia;S.depth_enable=D;Ba[0]=Ea;Ba[1]=wa;Ba[2]=U;Ba[3]=ka;S.scissor_enable=Ta;S.stencil_enable=
ha;X&&(V.cpuTime+=performance.now()-Z);P.offset=xa;P.count=fa;P.instances=Hb;P.primitive=qa;ra[23]=ja;ra[24]=dd;ra[22]=gd;ra[31]=$a;ra[32]=yb;ra[33]=Nb;ra[10]=ob;ra[34]=Cd;ra[6]=Jb;ra[7]=Ob;ra[21]=Gb;ra[8]=wb;ra[9]=Yb;ra[3]=qb;Ua&&A.destroyStream(Ub);I.buffer=Wa;I.divisor=tb;I.normalized=sb;I.offset=Pa;I.size=Ac;I.state=Ra;I.stride=Kb;I.type=Eb;I.w=Na;I.x=xd;I.y=Ya;I.z=Lb;Mb&&A.destroyStream(mb);k.buffer=jc;k.divisor=nd;k.normalized=Xa;k.offset=Uc;k.size=Ab;k.state=Za;k.stride=Vb;k.type=sc;k.w=Wb;
k.x=Qb;k.y=Jc;k.z=Rb;Ld&&A.destroyStream(Cc);u.buffer=dc;u.divisor=ic;u.normalized=xc;u.offset=zc;u.size=ad;u.state=Oc;u.stride=Pc;u.type=Qc;u.w=Xc;u.x=ld;u.y=bd;u.z=Yc;kc&&A.destroyStream(cc);L.buffer=Yd;L.divisor=de;L.normalized=Pd;L.offset=Kd;L.size=Id;L.state=od;L.stride=Rc;L.type=wd;L.w=td;L.x=jd;L.y=yd;L.z=Dd;W.buffer=Fd;W.divisor=Fe;W.normalized=ke;W.offset=te;W.size=le;W.state=je;W.stride=he;W.type=ue;W.w=ee;W.x=me;W.y=Mc;W.z=fd;t.buffer=ve;t.divisor=pe;t.normalized=Md;t.offset=Qd;t.size=
Sd;t.state=Td;t.stride=ne;t.type=ye;t.w=Be;t.x=qe;t.y=Se;t.z=Te;Oe&&A.destroyStream(we);N.buffer=Ud;N.divisor=De;N.normalized=Me;N.offset=af;N.size=$e;N.state=Ue;N.stride=Pe;N.type=Ze;N.w=Ye;N.x=Ve;N.y=We;N.z=Vd;ae&&A.destroyStream(Xe);w.buffer=Qe;w.divisor=Ee;w.normalized=nf;w.offset=of;w.size=Df;w.state=Gf;w.stride=Af;w.type=Ef;w.w=Ff;w.x=wf;w.y=xf;w.z=vf;ma.vert=yf;ma.frag=zf;M.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(d,V,H,J,g,
l,n,f,F,C,O,I,k,u,L,W,t,N,w){var B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa;B=d.attributes;ha=d.buffer;c=d.context;e=d.current;U=d.draw;p=d.elements;Z=d.extensions;h=d.framebuffer;y=d.gl;da=d.isBufferArgs;D=d.next;E=d.shader;b=d.uniforms;x=d.vao;a=D.blend_color;va=e.blend_color;z=D.blend_equation;ja=e.blend_equation;aa=D.blend_func;X=e.blend_func;fa=D.colorMask;R=e.colorMask;T=D.depth_range;A=e.depth_range;q=D.polygonOffset_offset;M=e.polygonOffset_offset;
P=D.sample_coverage;wa=e.sample_coverage;qa=D.scissor_box;r=e.scissor_box;G=D.stencil_func;ca=e.stencil_func;S=D.stencil_opBack;ma=e.stencil_opBack;ra=D.stencil_opFront;za=e.stencil_opFront;ya=D.viewport;ga=e.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,b){var f,l,n,v,m,K;f=h.next;f!==h.cur&&(f?y.bindFramebuffer(36160,f.framebuffer):y.bindFramebuffer(36160,null),h.cur=
f);if(e.dirty){var g,d,z,J,ia,Q,sa,Fa,na,E,H,la,Y,ya,qa,aa,hb,ea,gd,$b,Ga,ac,Sb,ba,Gd,Ma,Wd,ze,Ad,Rd,oe,ie;g=D.dither;g!==e.dither&&(g?y.enable(3024):y.disable(3024),e.dither=g);d=D.depth_func;d!==e.depth_func&&(y.depthFunc(d),e.depth_func=d);z=T[0];J=T[1];if(z!==A[0]||J!==A[1])y.depthRange(z,J),A[0]=z,A[1]=J;ia=D.depth_mask;ia!==e.depth_mask&&(y.depthMask(ia),e.depth_mask=ia);Q=fa[0];sa=fa[1];Fa=fa[2];na=fa[3];if(Q!==R[0]||sa!==R[1]||Fa!==R[2]||na!==R[3])y.colorMask(Q,sa,Fa,na),R[0]=Q,R[1]=sa,R[2]=
Fa,R[3]=na;E=D.cull_enable;E!==e.cull_enable&&(E?y.enable(2884):y.disable(2884),e.cull_enable=E);H=D.cull_face;H!==e.cull_face&&(y.cullFace(H),e.cull_face=H);la=D.frontFace;la!==e.frontFace&&(y.frontFace(la),e.frontFace=la);Y=D.lineWidth;Y!==e.lineWidth&&(y.lineWidth(Y),e.lineWidth=Y);ya=D.polygonOffset_enable;ya!==e.polygonOffset_enable&&(ya?y.enable(32823):y.disable(32823),e.polygonOffset_enable=ya);qa=q[0];aa=q[1];if(qa!==M[0]||aa!==M[1])y.polygonOffset(qa,aa),M[0]=qa,M[1]=aa;hb=D.sample_alpha;
hb!==e.sample_alpha&&(hb?y.enable(32926):y.disable(32926),e.sample_alpha=hb);ea=D.sample_enable;ea!==e.sample_enable&&(ea?y.enable(32928):y.disable(32928),e.sample_enable=ea);gd=P[0];$b=P[1];if(gd!==wa[0]||$b!==wa[1])y.sampleCoverage(gd,$b),wa[0]=gd,wa[1]=$b;Ga=D.stencil_mask;Ga!==e.stencil_mask&&(y.stencilMask(Ga),e.stencil_mask=Ga);ac=G[0];Sb=G[1];ba=G[2];if(ac!==ca[0]||Sb!==ca[1]||ba!==ca[2])y.stencilFunc(ac,Sb,ba),ca[0]=ac,ca[1]=Sb,ca[2]=ba;Gd=ra[0];Ma=ra[1];Wd=ra[2];ze=ra[3];if(Gd!==za[0]||Ma!==
za[1]||Wd!==za[2]||ze!==za[3])y.stencilOpSeparate(Gd,Ma,Wd,ze),za[0]=Gd,za[1]=Ma,za[2]=Wd,za[3]=ze;Ad=S[0];Rd=S[1];oe=S[2];ie=S[3];if(Ad!==ma[0]||Rd!==ma[1]||oe!==ma[2]||ie!==ma[3])y.stencilOpSeparate(Ad,Rd,oe,ie),ma[0]=Ad,ma[1]=Rd,ma[2]=oe,ma[3]=ie}y.blendColor(0,0,0,0);va[0]=0;va[1]=0;va[2]=0;va[3]=0;y.enable(3042);e.blend_enable=!0;y.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;y.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;y.disable(2929);e.depth_enable=!1;
y.enable(3089);e.scissor_enable=!0;y.disable(2960);e.stencil_enable=!1;if(l=e.profile)n=performance.now(),V.count+=b;y.useProgram(F.program);v=Z.angle_instanced_arrays;var Ed;x.setVAO(null);Ed=U.instances;for(m=0;m<b;++m){K=a[m];var rd,ge,be,Ce,Ne,Re,Hd,Ae,re,$d,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb;rd=K.viewport;ge=rd.x|0;be=
rd.y|0;Ce="width"in rd?rd.width|0:c.framebufferWidth-ge;Ne="height"in rd?rd.height|0:c.framebufferHeight-be;Re=c.viewportWidth;c.viewportWidth=Ce;Hd=c.viewportHeight;c.viewportHeight=Ne;y.viewport(ge,be,Ce,Ne);ga[0]=ge;ga[1]=be;ga[2]=Ce;ga[3]=Ne;Ae=K.viewport;re=Ae.x|0;$d=Ae.y|0;Xd="width"in Ae?Ae.width|0:c.framebufferWidth-re;Bd="height"in Ae?Ae.height|0:c.framebufferHeight-$d;y.scissor(re,$d,Xd,Bd);r[0]=re;r[1]=$d;r[2]=Xd;r[3]=Bd;ka.buffer=K.positionBuffer;md=!1;$c=null;sd=0;Kc=!1;Ec=pd=0;ed=1;
Nc=0;kd=5126;xb=tc=Fb=Bb=0;da(ka)?(md=!0,$c=ha.createStream(34962,ka),kd=$c.dtype):($c=ha.getBuffer(ka))?kd=$c.dtype:"constant"in ka?(ed=2,"number"===typeof ka.constant?(Fb=ka.constant,tc=xb=Bb=0):(Fb=0<ka.constant.length?ka.constant[0]:0,tc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Bb=3<ka.constant.length?ka.constant[3]:0)):($c=da(ka.buffer)?ha.createStream(34962,ka.buffer):ha.getBuffer(ka.buffer),kd="type"in ka?Ca[ka.type]:$c.dtype,Kc=!!ka.normalized,Ec=ka.size|
0,pd=ka.offset|0,Nc=ka.stride|0,sd=ka.divisor|0);wc=u.location;Cb=B[wc];if(1===ed){Cb.buffer||y.enableVertexAttribArray(wc);Ic=Ec||2;if(Cb.type!==kd||Cb.size!==Ic||Cb.buffer!==$c||Cb.normalized!==Kc||Cb.offset!==pd||Cb.stride!==Nc)y.bindBuffer(34962,$c.buffer),y.vertexAttribPointer(wc,Ic,kd,Kc,Nc,pd),Cb.type=kd,Cb.size=Ic,Cb.buffer=$c,Cb.normalized=Kc,Cb.offset=pd,Cb.stride=Nc;Cb.divisor!==sd&&(v.vertexAttribDivisorANGLE(wc,sd),Cb.divisor=sd)}else if(Cb.buffer&&(y.disableVertexAttribArray(wc),Cb.buffer=
null),Cb.x!==Fb||Cb.y!==tc||Cb.z!==xb||Cb.w!==Bb)y.vertexAttrib4f(wc,Fb,tc,xb,Bb),Cb.x=Fb,Cb.y=tc,Cb.z=xb,Cb.w=Bb;pa.buffer=K.positionFractBuffer;lc=!1;Fc=null;Vc=0;Tc=!1;ec=Bc=0;Gc=1;oc=0;pc=5126;Hc=$a=fc=mc=0;da(pa)?(lc=!0,Fc=ha.createStream(34962,pa),pc=Fc.dtype):(Fc=ha.getBuffer(pa))?pc=Fc.dtype:"constant"in pa?(Gc=2,"number"===typeof pa.constant?(fc=pa.constant,$a=Hc=mc=0):(fc=0<pa.constant.length?pa.constant[0]:0,$a=1<pa.constant.length?pa.constant[1]:0,Hc=2<pa.constant.length?pa.constant[2]:
0,mc=3<pa.constant.length?pa.constant[3]:0)):(Fc=da(pa.buffer)?ha.createStream(34962,pa.buffer):ha.getBuffer(pa.buffer),pc="type"in pa?Ca[pa.type]:Fc.dtype,Tc=!!pa.normalized,ec=pa.size|0,Bc=pa.offset|0,oc=pa.stride|0,Vc=pa.divisor|0);yb=L.location;cb=B[yb];if(1===Gc){cb.buffer||y.enableVertexAttribArray(yb);Nb=ec||2;if(cb.type!==pc||cb.size!==Nb||cb.buffer!==Fc||cb.normalized!==Tc||cb.offset!==Bc||cb.stride!==oc)y.bindBuffer(34962,Fc.buffer),y.vertexAttribPointer(yb,Nb,pc,Tc,oc,Bc),cb.type=pc,cb.size=
Nb,cb.buffer=Fc,cb.normalized=Tc,cb.offset=Bc,cb.stride=oc;cb.divisor!==Vc&&(v.vertexAttribDivisorANGLE(yb,Vc),cb.divisor=Vc)}else if(cb.buffer&&(y.disableVertexAttribArray(yb),cb.buffer=null),cb.x!==fc||cb.y!==$a||cb.z!==Hc||cb.w!==mc)y.vertexAttrib4f(yb,fc,$a,Hc,mc),cb.x=fc,cb.y=$a,cb.z=Hc,cb.w=mc;ab=K.fill;ob=ab[0];Cd=ab[1];Jb=ab[2];Ob=ab[3];m&&Va===ob&&Ib===Cd&&qc===Jb&&kb===Ob||(Va=ob,Ib=Cd,qc=Jb,kb=Ob,y.uniform4f(O.location,ob,Cd,Jb,Ob));Gb=K.scale;Db=Gb[0];ib=Gb[1];m&&wb===Db&&Yb===ib||(wb=
Db,Yb=ib,y.uniform2f(W.location,Db,ib));Pb=K.scaleFract;qb=Pb[0];Ub=Pb[1];m&&Ua===qb&&zb===Ub||(Ua=qb,zb=Ub,y.uniform2f(t.location,qb,Ub));bc=K.translate;jb=bc[0];Ha=bc[1];m&&pb===jb&&rb===Ha||(pb=jb,rb=Ha,y.uniform2f(N.location,jb,Ha));Ja=K.translateFract;eb=Ja[0];Ka=Ja[1];m&&gb===eb&&lb===Ka||(gb=eb,lb=Ka,y.uniform2f(w.location,eb,Ka));Wa=K.id;m&&tb===Wa||(tb=Wa,y.uniform1f(I.location,Wa));sb=K.opacity;m&&Pa===sb||(Pa=sb,y.uniform1f(k.location,sb));Ac=C.call(this,c,K,m);Ra=null;(Ra=(Kb=da(Ac))?
p.createStream(Ac):p.getElements(Ac))&&y.bindBuffer(34963,Ra.buffer.buffer);if(Eb=Ra?Ra.vertCount:-1)0<Ed?Ra?v.drawElementsInstancedANGLE(4,Eb,Ra.type,0<<(Ra.type-5121>>1),Ed):v.drawArraysInstancedANGLE(4,0,Eb,Ed):0>Ed&&(Ra?y.drawElements(4,Eb,Ra.type,0<<(Ra.type-5121>>1)):y.drawArrays(4,0,Eb)),c.viewportWidth=Re,c.viewportHeight=Hd,md&&ha.destroyStream($c),lc&&ha.destroyStream(Fc),Kb&&p.destroyStream(Ra)}e.dirty=!0;x.setVAO(null);l&&(V.cpuTime+=performance.now()-n)},draw:function(a){var b,f,l,n,
v,m,K,g,d,z,E,ia,Q,sa,Fa,na,C,Ea,la,Y,F,ya;b=h.next;b!==h.cur&&(b?y.bindFramebuffer(36160,b.framebuffer):y.bindFramebuffer(36160,null),h.cur=b);if(e.dirty){b=D.dither;b!==e.dither&&(b?y.enable(3024):y.disable(3024),e.dither=b);b=D.depth_func;b!==e.depth_func&&(y.depthFunc(b),e.depth_func=b);b=T[0];m=T[1];if(b!==A[0]||m!==A[1])y.depthRange(b,m),A[0]=b,A[1]=m;b=D.depth_mask;b!==e.depth_mask&&(y.depthMask(b),e.depth_mask=b);b=fa[0];m=fa[1];f=fa[2];l=fa[3];if(b!==R[0]||m!==R[1]||f!==R[2]||l!==R[3])y.colorMask(b,
m,f,l),R[0]=b,R[1]=m,R[2]=f,R[3]=l;b=D.cull_enable;b!==e.cull_enable&&(b?y.enable(2884):y.disable(2884),e.cull_enable=b);b=D.cull_face;b!==e.cull_face&&(y.cullFace(b),e.cull_face=b);b=D.frontFace;b!==e.frontFace&&(y.frontFace(b),e.frontFace=b);b=D.lineWidth;b!==e.lineWidth&&(y.lineWidth(b),e.lineWidth=b);b=D.polygonOffset_enable;b!==e.polygonOffset_enable&&(b?y.enable(32823):y.disable(32823),e.polygonOffset_enable=b);b=q[0];m=q[1];if(b!==M[0]||m!==M[1])y.polygonOffset(b,m),M[0]=b,M[1]=m;b=D.sample_alpha;
b!==e.sample_alpha&&(b?y.enable(32926):y.disable(32926),e.sample_alpha=b);b=D.sample_enable;b!==e.sample_enable&&(b?y.enable(32928):y.disable(32928),e.sample_enable=b);b=P[0];m=P[1];if(b!==wa[0]||m!==wa[1])y.sampleCoverage(b,m),wa[0]=b,wa[1]=m;b=D.stencil_mask;b!==e.stencil_mask&&(y.stencilMask(b),e.stencil_mask=b);b=G[0];m=G[1];f=G[2];if(b!==ca[0]||m!==ca[1]||f!==ca[2])y.stencilFunc(b,m,f),ca[0]=b,ca[1]=m,ca[2]=f;b=ra[0];m=ra[1];f=ra[2];l=ra[3];if(b!==za[0]||m!==za[1]||f!==za[2]||l!==za[3])y.stencilOpSeparate(b,
m,f,l),za[0]=b,za[1]=m,za[2]=f,za[3]=l;b=S[0];m=S[1];f=S[2];l=S[3];if(b!==ma[0]||m!==ma[1]||f!==ma[2]||l!==ma[3])y.stencilOpSeparate(b,m,f,l),ma[0]=b,ma[1]=m,ma[2]=f,ma[3]=l}b=a.viewport;f=b.x|0;l=b.y|0;n="width"in b?b.width|0:c.framebufferWidth-f;v="height"in b?b.height|0:c.framebufferHeight-l;b=c.viewportWidth;c.viewportWidth=n;m=c.viewportHeight;c.viewportHeight=v;y.viewport(f,l,n,v);ga[0]=f;ga[1]=l;ga[2]=n;ga[3]=v;y.blendColor(0,0,0,0);va[0]=0;va[1]=0;va[2]=0;va[3]=0;y.enable(3042);e.blend_enable=
!0;y.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;y.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;y.disable(2929);e.depth_enable=!1;v=a.viewport;f=v.x|0;l=v.y|0;n="width"in v?v.width|0:c.framebufferWidth-f;v="height"in v?v.height|0:c.framebufferHeight-l;y.scissor(f,l,n,v);r[0]=f;r[1]=l;r[2]=n;r[3]=v;y.enable(3089);e.scissor_enable=!0;y.disable(2960);e.stencil_enable=!1;if(f=e.profile)K=performance.now(),V.count++;y.useProgram(H.program);l=Z.angle_instanced_arrays;
x.setVAO(null);ka.buffer=a.positionBuffer;n=!1;g=0;d=!1;E=z=0;ia=1;Q=0;sa=5126;Ea=C=na=Fa=0;da(ka)?(n=!0,v=ha.createStream(34962,ka),sa=v.dtype):(v=ha.getBuffer(ka))?sa=v.dtype:"constant"in ka?(ia=2,"number"===typeof ka.constant?(na=ka.constant,C=Ea=Fa=0):(na=0<ka.constant.length?ka.constant[0]:0,C=1<ka.constant.length?ka.constant[1]:0,Ea=2<ka.constant.length?ka.constant[2]:0,Fa=3<ka.constant.length?ka.constant[3]:0)):(v=da(ka.buffer)?ha.createStream(34962,ka.buffer):ha.getBuffer(ka.buffer),sa="type"in
ka?Ca[ka.type]:v.dtype,d=!!ka.normalized,E=ka.size|0,z=ka.offset|0,Q=ka.stride|0,g=ka.divisor|0);la=u.location;Y=B[la];if(1===ia){Y.buffer||y.enableVertexAttribArray(la);E=E||2;if(Y.type!==sa||Y.size!==E||Y.buffer!==v||Y.normalized!==d||Y.offset!==z||Y.stride!==Q)y.bindBuffer(34962,v.buffer),y.vertexAttribPointer(la,E,sa,d,Q,z),Y.type=sa,Y.size=E,Y.buffer=v,Y.normalized=d,Y.offset=z,Y.stride=Q;Y.divisor!==g&&(l.vertexAttribDivisorANGLE(la,g),Y.divisor=g)}else if(Y.buffer&&(y.disableVertexAttribArray(la),
Y.buffer=null),Y.x!==na||Y.y!==C||Y.z!==Ea||Y.w!==Fa)y.vertexAttrib4f(la,na,C,Ea,Fa),Y.x=na,Y.y=C,Y.z=Ea,Y.w=Fa;pa.buffer=a.positionFractBuffer;g=!1;z=0;Q=!1;Fa=sa=0;na=1;la=0;Y=5126;ya=F=Ea=C=0;da(pa)?(g=!0,d=ha.createStream(34962,pa),Y=d.dtype):(d=ha.getBuffer(pa))?Y=d.dtype:"constant"in pa?(na=2,"number"===typeof pa.constant?(Ea=pa.constant,F=ya=C=0):(Ea=0<pa.constant.length?pa.constant[0]:0,F=1<pa.constant.length?pa.constant[1]:0,ya=2<pa.constant.length?pa.constant[2]:0,C=3<pa.constant.length?
pa.constant[3]:0)):(d=da(pa.buffer)?ha.createStream(34962,pa.buffer):ha.getBuffer(pa.buffer),Y="type"in pa?Ca[pa.type]:d.dtype,Q=!!pa.normalized,Fa=pa.size|0,sa=pa.offset|0,la=pa.stride|0,z=pa.divisor|0);E=L.location;ia=B[E];if(1===na){ia.buffer||y.enableVertexAttribArray(E);Fa=Fa||2;if(ia.type!==Y||ia.size!==Fa||ia.buffer!==d||ia.normalized!==Q||ia.offset!==sa||ia.stride!==la)y.bindBuffer(34962,d.buffer),y.vertexAttribPointer(E,Fa,Y,Q,la,sa),ia.type=Y,ia.size=Fa,ia.buffer=d,ia.normalized=Q,ia.offset=
sa,ia.stride=la;ia.divisor!==z&&(l.vertexAttribDivisorANGLE(E,z),ia.divisor=z)}else if(ia.buffer&&(y.disableVertexAttribArray(E),ia.buffer=null),ia.x!==Ea||ia.y!==F||ia.z!==ya||ia.w!==C)y.vertexAttrib4f(E,Ea,F,ya,C),ia.x=Ea,ia.y=F,ia.z=ya,ia.w=C;z=a.fill;y.uniform4f(O.location,z[0],z[1],z[2],z[3]);z=a.scale;y.uniform2f(W.location,z[0],z[1]);z=a.scaleFract;y.uniform2f(t.location,z[0],z[1]);z=a.translate;y.uniform2f(N.location,z[0],z[1]);z=a.translateFract;y.uniform2f(w.location,z[0],z[1]);y.uniform1f(I.location,
a.id);y.uniform1f(k.location,a.opacity);z=J.call(this,c,a,0);(z=(a=da(z))?p.createStream(z):p.getElements(z))&&y.bindBuffer(34963,z.buffer.buffer);if(Q=z?z.vertCount:-1)sa=U.instances,0<sa?z?l.drawElementsInstancedANGLE(4,Q,z.type,0<<(z.type-5121>>1),sa):l.drawArraysInstancedANGLE(4,0,Q,sa):0>sa&&(z?y.drawElements(4,Q,z.type,0<<(z.type-5121>>1)):y.drawArrays(4,0,Q)),e.dirty=!0,x.setVAO(null),c.viewportWidth=b,c.viewportHeight=m,f&&(V.cpuTime+=performance.now()-K),n&&ha.destroyStream(v),g&&ha.destroyStream(d),
a&&p.destroyStream(z)},scope:function(h,r,q){var d,x,v,m,K,y,t,G,w,T,Q,sa,Fa,S,A,ga,R,J,u,P,k,M,C,ca,H,B,L,F,wa,I,ra,N,O,X,Z,W,fa,ma,va,ja,za,ba,Ne,Re,Hd,Ae,re,$d,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb;d=h.viewport;x=d.x|0;v=d.y|0;m="width"in d?d.width|0:c.framebufferWidth-x;K="height"in d?d.height|0:c.framebufferHeight-v;y=c.viewportWidth;
c.viewportWidth=m;t=c.viewportHeight;c.viewportHeight=K;G=ya[0];ya[0]=x;w=ya[1];ya[1]=v;T=ya[2];ya[2]=m;Q=ya[3];ya[3]=K;sa=a[0];a[0]=0;Fa=a[1];a[1]=0;S=a[2];a[2]=0;A=a[3];a[3]=0;ga=D.blend_enable;D.blend_enable=!0;R=z[0];z[0]=32774;J=z[1];z[1]=32774;u=aa[0];aa[0]=770;P=aa[1];aa[1]=771;k=aa[2];aa[2]=773;M=aa[3];aa[3]=1;C=D.depth_enable;D.depth_enable=!1;ca=h.viewport;H=ca.x|0;B=ca.y|0;L="width"in ca?ca.width|0:c.framebufferWidth-H;F="height"in ca?ca.height|0:c.framebufferHeight-B;wa=qa[0];qa[0]=H;
I=qa[1];qa[1]=B;ra=qa[2];qa[2]=L;N=qa[3];qa[3]=F;O=D.scissor_enable;D.scissor_enable=!0;X=D.stencil_enable;D.stencil_enable=!1;if(Z=e.profile)W=performance.now(),V.count++;fa=g.call(this,c,h,q);ma=null;ma=(va=da(fa))?p.createStream(fa):p.getElements(fa);ja=U.elements;U.elements=ma;za=U.offset;U.offset=0;ba=ma?ma.vertCount:-1;Ne=U.count;U.count=ba;Re=U.primitive;U.primitive=4;Hd=h.fill;Ae=b[14];b[14]=Hd;re=h.id;$d=b[31];b[31]=re;Xd=h.opacity;Bd=b[10];b[10]=Xd;md=c.pixelRatio;$c=b[34];b[34]=md;sd=h.scale;
Kc=b[6];b[6]=sd;pd=h.scaleFract;Ec=b[7];b[7]=pd;ed=h.translate;Nc=b[8];b[8]=ed;kd=h.translateFract;Bb=b[9];b[9]=kd;Fb=l.call(this,c,h,q);tc=b[3];b[3]=Fb;ka.buffer=h.positionBuffer;xb=!1;wc=null;Cb=0;Ic=!1;Fc=lc=0;Vc=1;Tc=0;Bc=5126;pc=oc=Gc=ec=0;da(ka)?(xb=!0,wc=ha.createStream(34962,ka),Bc=wc.dtype):(wc=ha.getBuffer(ka))?Bc=wc.dtype:"constant"in ka?(Vc=2,"number"===typeof ka.constant?(Gc=ka.constant,oc=pc=ec=0):(Gc=0<ka.constant.length?ka.constant[0]:0,oc=1<ka.constant.length?ka.constant[1]:0,pc=
2<ka.constant.length?ka.constant[2]:0,ec=3<ka.constant.length?ka.constant[3]:0)):(wc=da(ka.buffer)?ha.createStream(34962,ka.buffer):ha.getBuffer(ka.buffer),Bc="type"in ka?Ca[ka.type]:wc.dtype,Ic=!!ka.normalized,Fc=ka.size|0,lc=ka.offset|0,Tc=ka.stride|0,Cb=ka.divisor|0);mc=n.buffer;n.buffer=wc;fc=n.divisor;n.divisor=Cb;$a=n.normalized;n.normalized=Ic;Hc=n.offset;n.offset=lc;yb=n.size;n.size=Fc;cb=n.state;n.state=Vc;Nb=n.stride;n.stride=Tc;ab=n.type;n.type=Bc;ob=n.w;n.w=ec;Va=n.x;n.x=Gc;Cd=n.y;n.y=
oc;Ib=n.z;n.z=pc;pa.buffer=h.positionFractBuffer;Jb=!1;qc=null;Ob=0;kb=!1;Db=Gb=0;wb=1;ib=0;Yb=5126;Ub=Ua=qb=Pb=0;da(pa)?(Jb=!0,qc=ha.createStream(34962,pa),Yb=qc.dtype):(qc=ha.getBuffer(pa))?Yb=qc.dtype:"constant"in pa?(wb=2,"number"===typeof pa.constant?(qb=pa.constant,Ua=Ub=Pb=0):(qb=0<pa.constant.length?pa.constant[0]:0,Ua=1<pa.constant.length?pa.constant[1]:0,Ub=2<pa.constant.length?pa.constant[2]:0,Pb=3<pa.constant.length?pa.constant[3]:0)):(qc=da(pa.buffer)?ha.createStream(34962,pa.buffer):
ha.getBuffer(pa.buffer),Yb="type"in pa?Ca[pa.type]:qc.dtype,kb=!!pa.normalized,Db=pa.size|0,Gb=pa.offset|0,ib=pa.stride|0,Ob=pa.divisor|0);zb=f.buffer;f.buffer=qc;bc=f.divisor;f.divisor=Ob;jb=f.normalized;f.normalized=kb;pb=f.offset;f.offset=Gb;Ha=f.size;f.size=Db;rb=f.state;f.state=wb;Ja=f.stride;f.stride=ib;eb=f.type;f.type=Yb;gb=f.w;f.w=Pb;Ka=f.x;f.x=qb;lb=f.y;f.y=Ua;Wa=f.z;f.z=Ub;tb=E.vert;E.vert=42;sb=E.frag;E.frag=41;e.dirty=!0;r(c,h,q);c.viewportWidth=y;c.viewportHeight=t;ya[0]=G;ya[1]=w;ya[2]=
T;ya[3]=Q;a[0]=sa;a[1]=Fa;a[2]=S;a[3]=A;D.blend_enable=ga;z[0]=R;z[1]=J;aa[0]=u;aa[1]=P;aa[2]=k;aa[3]=M;D.depth_enable=C;qa[0]=wa;qa[1]=I;qa[2]=ra;qa[3]=N;D.scissor_enable=O;D.stencil_enable=X;Z&&(V.cpuTime+=performance.now()-W);va&&p.destroyStream(ma);U.elements=ja;U.offset=za;U.count=Ne;U.primitive=Re;b[14]=Ae;b[31]=$d;b[10]=Bd;b[34]=$c;b[6]=Kc;b[7]=Ec;b[8]=Nc;b[9]=Bb;b[3]=tc;xb&&ha.destroyStream(wc);n.buffer=mc;n.divisor=fc;n.normalized=$a;n.offset=Hc;n.size=yb;n.state=cb;n.stride=Nb;n.type=ab;
n.w=ob;n.x=Va;n.y=Cd;n.z=Ib;Jb&&ha.destroyStream(qc);f.buffer=zb;f.divisor=bc;f.normalized=jb;f.offset=pb;f.size=Ha;f.state=rb;f.stride=Ja;f.type=eb;f.w=gb;f.x=Ka;f.y=lb;f.z=Wa;E.vert=tb;E.frag=sb;e.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa,R,T,A,q,
M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta){var v,m,K,ua,Ba,dd,Hb,ia,Q,sa,Fa,na,Aa,Ea,la,Y,ta,Ia,Da,hb,ea,ba,$b,Ga,ac,Sb,Ma,Gd,xe,Wd,ze,Ad,Rd,oe,ie,Ed,rd,ge,be;v=d.attributes;m=d.buffer;K=d.context;ua=d.current;Ba=d.draw;dd=d.elements;Hb=d.extensions;ia=d.framebuffer;Q=d.gl;sa=d.isBufferArgs;Fa=d.next;na=d.shader;Aa=d.uniforms;Ea=d.vao;la=Fa.blend_color;Y=ua.blend_color;ta=Fa.blend_equation;Ia=ua.blend_equation;Da=Fa.blend_func;hb=ua.blend_func;ea=Fa.colorMask;ba=ua.colorMask;$b=Fa.depth_range;
Ga=ua.depth_range;ac=Fa.polygonOffset_offset;Sb=ua.polygonOffset_offset;Ma=Fa.sample_coverage;Gd=ua.sample_coverage;xe=Fa.scissor_box;Wd=ua.scissor_box;ze=Fa.stencil_func;Ad=ua.stencil_func;Rd=Fa.stencil_opBack;oe=ua.stencil_opBack;ie=Fa.stencil_opFront;Ed=ua.stencil_opFront;rd=Fa.viewport;ge=ua.viewport;be={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var e,c,f,h,l,p;e=ia.next;e!==ia.cur&&(e?Q.bindFramebuffer(36160,e.framebuffer):
Q.bindFramebuffer(36160,null),ia.cur=e);if(ua.dirty){var n,d,g,x,y,t,w,E,na,J,D,u,k,la,C,H,B,L,Aa,F,I,N,U,O,ha,Z,W,da,Da,Hc,yb,cb,Nb,ab;n=Fa.dither;n!==ua.dither&&(n?Q.enable(3024):Q.disable(3024),ua.dither=n);d=ta[0];g=ta[1];if(d!==Ia[0]||g!==Ia[1])Q.blendEquationSeparate(d,g),Ia[0]=d,Ia[1]=g;x=Fa.depth_func;x!==ua.depth_func&&(Q.depthFunc(x),ua.depth_func=x);y=$b[0];t=$b[1];if(y!==Ga[0]||t!==Ga[1])Q.depthRange(y,t),Ga[0]=y,Ga[1]=t;w=Fa.depth_mask;w!==ua.depth_mask&&(Q.depthMask(w),ua.depth_mask=
w);E=ea[0];na=ea[1];J=ea[2];D=ea[3];if(E!==ba[0]||na!==ba[1]||J!==ba[2]||D!==ba[3])Q.colorMask(E,na,J,D),ba[0]=E,ba[1]=na,ba[2]=J,ba[3]=D;u=Fa.cull_enable;u!==ua.cull_enable&&(u?Q.enable(2884):Q.disable(2884),ua.cull_enable=u);k=Fa.cull_face;k!==ua.cull_face&&(Q.cullFace(k),ua.cull_face=k);la=Fa.frontFace;la!==ua.frontFace&&(Q.frontFace(la),ua.frontFace=la);C=Fa.lineWidth;C!==ua.lineWidth&&(Q.lineWidth(C),ua.lineWidth=C);H=Fa.polygonOffset_enable;H!==ua.polygonOffset_enable&&(H?Q.enable(32823):Q.disable(32823),
ua.polygonOffset_enable=H);B=ac[0];L=ac[1];if(B!==Sb[0]||L!==Sb[1])Q.polygonOffset(B,L),Sb[0]=B,Sb[1]=L;Aa=Fa.sample_alpha;Aa!==ua.sample_alpha&&(Aa?Q.enable(32926):Q.disable(32926),ua.sample_alpha=Aa);F=Fa.sample_enable;F!==ua.sample_enable&&(F?Q.enable(32928):Q.disable(32928),ua.sample_enable=F);I=Ma[0];N=Ma[1];if(I!==Gd[0]||N!==Gd[1])Q.sampleCoverage(I,N),Gd[0]=I,Gd[1]=N;U=Fa.stencil_mask;U!==ua.stencil_mask&&(Q.stencilMask(U),ua.stencil_mask=U);O=ze[0];ha=ze[1];Z=ze[2];if(O!==Ad[0]||ha!==Ad[1]||
Z!==Ad[2])Q.stencilFunc(O,ha,Z),Ad[0]=O,Ad[1]=ha,Ad[2]=Z;W=ie[0];da=ie[1];Da=ie[2];Hc=ie[3];if(W!==Ed[0]||da!==Ed[1]||Da!==Ed[2]||Hc!==Ed[3])Q.stencilOpSeparate(W,da,Da,Hc),Ed[0]=W,Ed[1]=da,Ed[2]=Da,Ed[3]=Hc;yb=Rd[0];cb=Rd[1];Nb=Rd[2];ab=Rd[3];if(yb!==oe[0]||cb!==oe[1]||Nb!==oe[2]||ab!==oe[3])Q.stencilOpSeparate(yb,cb,Nb,ab),oe[0]=yb,oe[1]=cb,oe[2]=Nb,oe[3]=ab}Q.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;Q.enable(3042);ua.blend_enable=!0;Q.blendFuncSeparate(770,771,773,1);hb[0]=770;hb[1]=771;
hb[2]=773;hb[3]=1;Q.disable(2929);ua.depth_enable=!1;Q.enable(3089);ua.scissor_enable=!0;Q.disable(2960);ua.stencil_enable=!1;if(c=ua.profile)f=performance.now(),V.count+=b;Q.useProgram(va.program);h=Hb.angle_instanced_arrays;var ob;Ea.setVAO(null);Q.uniform1i(G.location,!1);Q.uniform1i(za.location,M.bind());ob=Ba.instances;for(l=0;l<b;++l){p=a[l];var Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,
Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,rd,se,id,xe,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,We,Vd,ae,Xe,gf,lf,df,hf,jf,kf,rf,mf,sf,Bf,Cf,Qe,Ee,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf,dg,Sf,Tf;Va=p.viewport;Cd=Va.x|0;Ib=Va.y|0;Jb="width"in
Va?Va.width|0:K.framebufferWidth-Cd;qc="height"in Va?Va.height|0:K.framebufferHeight-Ib;Ob=K.viewportWidth;K.viewportWidth=Jb;kb=K.viewportHeight;K.viewportHeight=qc;Q.viewport(Cd,Ib,Jb,qc);ge[0]=Cd;ge[1]=Ib;ge[2]=Jb;ge[3]=qc;Gb=p.viewport;Db=Gb.x|0;wb=Gb.y|0;ib="width"in Gb?Gb.width|0:K.framebufferWidth-Db;Yb="height"in Gb?Gb.height|0:K.framebufferHeight-wb;Q.scissor(Db,wb,ib,Yb);Wd[0]=Db;Wd[1]=wb;Wd[2]=ib;Wd[3]=Yb;Pb=z.call(this,K,p,l);qb=!1;Ua=null;Ub=0;zb=!1;jb=bc=0;pb=1;Ha=0;rb=5126;Ka=gb=eb=
Ja=0;sa(Pb)?(qb=!0,Ua=m.createStream(34962,Pb),rb=Ua.dtype):(Ua=m.getBuffer(Pb))?rb=Ua.dtype:"constant"in Pb?(pb=2,"number"===typeof Pb.constant?(eb=Pb.constant,gb=Ka=Ja=0):(eb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,Ka=2<Pb.constant.length?Pb.constant[2]:0,Ja=3<Pb.constant.length?Pb.constant[3]:0)):(Ua=sa(Pb.buffer)?m.createStream(34962,Pb.buffer):m.getBuffer(Pb.buffer),rb="type"in Pb?be[Pb.type]:Ua.dtype,zb=!!Pb.normalized,jb=Pb.size|0,bc=Pb.offset|0,Ha=Pb.stride|
0,Ub=Pb.divisor|0);lb=La.location;Wa=v[lb];if(1===pb){Wa.buffer||Q.enableVertexAttribArray(lb);tb=jb||1;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Ua||Wa.normalized!==zb||Wa.offset!==bc||Wa.stride!==Ha)Q.bindBuffer(34962,Ua.buffer),Q.vertexAttribPointer(lb,tb,rb,zb,Ha,bc),Wa.type=rb,Wa.size=tb,Wa.buffer=Ua,Wa.normalized=zb,Wa.offset=bc,Wa.stride=Ha;Wa.divisor!==Ub&&(h.vertexAttribDivisorANGLE(lb,Ub),Wa.divisor=Ub)}else if(Wa.buffer&&(Q.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==eb||Wa.y!==
gb||Wa.z!==Ka||Wa.w!==Ja)Q.vertexAttrib4f(lb,eb,gb,Ka,Ja),Wa.x=eb,Wa.y=gb,Wa.z=Ka,Wa.w=Ja;sb=ja.call(this,K,p,l);Pa=!1;Ac=null;Ra=0;Kb=!1;Na=Eb=0;xd=1;Ya=0;Lb=5126;Zb=Oa=mb=Mb=0;sa(sb)?(Pa=!0,Ac=m.createStream(34962,sb),Lb=Ac.dtype):(Ac=m.getBuffer(sb))?Lb=Ac.dtype:"constant"in sb?(xd=2,"number"===typeof sb.constant?(mb=sb.constant,Oa=Zb=Mb=0):(mb=0<sb.constant.length?sb.constant[0]:0,Oa=1<sb.constant.length?sb.constant[1]:0,Zb=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?sb.constant[3]:
0)):(Ac=sa(sb.buffer)?m.createStream(34962,sb.buffer):m.getBuffer(sb.buffer),Lb="type"in sb?be[sb.type]:Ac.dtype,Kb=!!sb.normalized,Na=sb.size|0,Eb=sb.offset|0,Ya=sb.stride|0,Ra=sb.divisor|0);Qa=fb.location;ub=v[Qa];if(1===xd){ub.buffer||Q.enableVertexAttribArray(Qa);vb=Na||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==Ac||ub.normalized!==Kb||ub.offset!==Eb||ub.stride!==Ya)Q.bindBuffer(34962,Ac.buffer),Q.vertexAttribPointer(Qa,vb,Lb,Kb,Ya,Eb),ub.type=Lb,ub.size=vb,ub.buffer=Ac,ub.normalized=Kb,ub.offset=
Eb,ub.stride=Ya;ub.divisor!==Ra&&(h.vertexAttribDivisorANGLE(Qa,Ra),ub.divisor=Ra)}else if(ub.buffer&&(Q.disableVertexAttribArray(Qa),ub.buffer=null),ub.x!==mb||ub.y!==Oa||ub.z!==Zb||ub.w!==Mb)Q.vertexAttrib4f(Qa,mb,Oa,Zb,Mb),ub.x=mb,ub.y=Oa,ub.z=Zb,ub.w=Mb;Sa=aa.call(this,K,p,l);nb=!1;gc=null;Dc=0;uc=!1;jc=bb=0;nd=1;Xa=0;Uc=5126;sc=Vb=Za=Ab=0;sa(Sa)?(nb=!0,gc=m.createStream(34962,Sa),Uc=gc.dtype):(gc=m.getBuffer(Sa))?Uc=gc.dtype:"constant"in Sa?(nd=2,"number"===typeof Sa.constant?(Za=Sa.constant,
Vb=sc=Ab=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(gc=sa(Sa.buffer)?m.createStream(34962,Sa.buffer):m.getBuffer(Sa.buffer),Uc="type"in Sa?be[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,Dc=Sa.divisor|0);Wb=oa.location;Qb=v[Wb];if(1===nd){Qb.buffer||Q.enableVertexAttribArray(Wb);Jc=jc||1;if(Qb.type!==Uc||Qb.size!==Jc||Qb.buffer!==gc||Qb.normalized!==
uc||Qb.offset!==bb||Qb.stride!==Xa)Q.bindBuffer(34962,gc.buffer),Q.vertexAttribPointer(Wb,Jc,Uc,uc,Xa,bb),Qb.type=Uc,Qb.size=Jc,Qb.buffer=gc,Qb.normalized=uc,Qb.offset=bb,Qb.stride=Xa;Qb.divisor!==Dc&&(h.vertexAttribDivisorANGLE(Wb,Dc),Qb.divisor=Dc)}else if(Qb.buffer&&(Q.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==Za||Qb.y!==Vb||Qb.z!==sc||Qb.w!==Ab)Q.vertexAttrib4f(Wb,Za,Vb,sc,Ab),Qb.x=Za,Qb.y=Vb,Qb.z=sc,Qb.w=Ab;Rb=X.call(this,K,p,l);Ld=!1;Cc=null;ud=0;Lc=!1;vd=Wc=0;nc=1;vc=0;hc=5126;Xb=
Tb=rc=db=0;sa(Rb)?(Ld=!0,Cc=m.createStream(34962,Rb),hc=Cc.dtype):(Cc=m.getBuffer(Rb))?hc=Cc.dtype:"constant"in Rb?(nc=2,"number"===typeof Rb.constant?(rc=Rb.constant,Tb=Xb=db=0):(rc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Xb=2<Rb.constant.length?Rb.constant[2]:0,db=3<Rb.constant.length?Rb.constant[3]:0)):(Cc=sa(Rb.buffer)?m.createStream(34962,Rb.buffer):m.getBuffer(Rb.buffer),hc="type"in Rb?be[Rb.type]:Cc.dtype,Lc=!!Rb.normalized,vd=Rb.size|0,Wc=Rb.offset|0,
vc=Rb.stride|0,ud=Rb.divisor|0);dc=Ta.location;ic=v[dc];if(1===nc){ic.buffer||Q.enableVertexAttribArray(dc);xc=vd||1;if(ic.type!==hc||ic.size!==xc||ic.buffer!==Cc||ic.normalized!==Lc||ic.offset!==Wc||ic.stride!==vc)Q.bindBuffer(34962,Cc.buffer),Q.vertexAttribPointer(dc,xc,hc,Lc,vc,Wc),ic.type=hc,ic.size=xc,ic.buffer=Cc,ic.normalized=Lc,ic.offset=Wc,ic.stride=vc;ic.divisor!==ud&&(h.vertexAttribDivisorANGLE(dc,ud),ic.divisor=ud)}else if(ic.buffer&&(Q.disableVertexAttribArray(dc),ic.buffer=null),ic.x!==
rc||ic.y!==Tb||ic.z!==Xb||ic.w!==db)Q.vertexAttrib4f(dc,rc,Tb,Xb,db),ic.x=rc,ic.y=Tb,ic.z=Xb,ic.w=db;zc=fa.call(this,K,p,l);ad=!1;Oc=null;Pc=0;Qc=!1;ld=Xc=0;bd=1;Yc=0;kc=5126;cd=Sc=Zc=cc=0;sa(zc)?(ad=!0,Oc=m.createStream(34962,zc),kc=Oc.dtype):(Oc=m.getBuffer(zc))?kc=Oc.dtype:"constant"in zc?(bd=2,"number"===typeof zc.constant?(Zc=zc.constant,Sc=cd=cc=0):(Zc=0<zc.constant.length?zc.constant[0]:0,Sc=1<zc.constant.length?zc.constant[1]:0,cd=2<zc.constant.length?zc.constant[2]:0,cc=3<zc.constant.length?
zc.constant[3]:0)):(Oc=sa(zc.buffer)?m.createStream(34962,zc.buffer):m.getBuffer(zc.buffer),kc="type"in zc?be[zc.type]:Oc.dtype,Qc=!!zc.normalized,ld=zc.size|0,Xc=zc.offset|0,Yc=zc.stride|0,Pc=zc.divisor|0);yc=ka.location;hd=v[yc];if(1===bd){hd.buffer||Q.enableVertexAttribArray(yc);qd=ld||1;if(hd.type!==kc||hd.size!==qd||hd.buffer!==Oc||hd.normalized!==Qc||hd.offset!==Xc||hd.stride!==Yc)Q.bindBuffer(34962,Oc.buffer),Q.vertexAttribPointer(yc,qd,kc,Qc,Yc,Xc),hd.type=kc,hd.size=qd,hd.buffer=Oc,hd.normalized=
Qc,hd.offset=Xc,hd.stride=Yc;hd.divisor!==Pc&&(h.vertexAttribDivisorANGLE(yc,Pc),hd.divisor=Pc)}else if(hd.buffer&&(Q.disableVertexAttribArray(yc),hd.buffer=null),hd.x!==Zc||hd.y!==Sc||hd.z!==cd||hd.w!==cc)Q.vertexAttrib4f(yc,Zc,Sc,cd,cc),hd.x=Zc,hd.y=Sc,hd.z=cd,hd.w=cc;rd=R.call(this,K,p,l);se=!1;id=null;xe=0;Od=!1;de=Yd=0;Pd=1;Kd=0;Id=5126;td=wd=Rc=od=0;sa(rd)?(se=!0,id=m.createStream(34962,rd),Id=id.dtype):(id=m.getBuffer(rd))?Id=id.dtype:"constant"in rd?(Pd=2,"number"===typeof rd.constant?(Rc=
rd.constant,wd=td=od=0):(Rc=0<rd.constant.length?rd.constant[0]:0,wd=1<rd.constant.length?rd.constant[1]:0,td=2<rd.constant.length?rd.constant[2]:0,od=3<rd.constant.length?rd.constant[3]:0)):(id=sa(rd.buffer)?m.createStream(34962,rd.buffer):m.getBuffer(rd.buffer),Id="type"in rd?be[rd.type]:id.dtype,Od=!!rd.normalized,de=rd.size|0,Yd=rd.offset|0,Kd=rd.stride|0,xe=rd.divisor|0);jd=qa.location;yd=v[jd];if(1===Pd){yd.buffer||Q.enableVertexAttribArray(jd);Dd=de||1;if(yd.type!==Id||yd.size!==Dd||yd.buffer!==
id||yd.normalized!==Od||yd.offset!==Yd||yd.stride!==Kd)Q.bindBuffer(34962,id.buffer),Q.vertexAttribPointer(jd,Dd,Id,Od,Kd,Yd),yd.type=Id,yd.size=Dd,yd.buffer=id,yd.normalized=Od,yd.offset=Yd,yd.stride=Kd;yd.divisor!==xe&&(h.vertexAttribDivisorANGLE(jd,xe),yd.divisor=xe)}else if(yd.buffer&&(Q.disableVertexAttribArray(jd),yd.buffer=null),yd.x!==Rc||yd.y!==wd||yd.z!==td||yd.w!==od)Q.vertexAttrib4f(jd,Rc,wd,td,od),yd.x=Rc,yd.y=wd,yd.z=td,yd.w=od;Fd=T.call(this,K,p,l);Fe=!1;ke=null;te=0;le=!1;he=je=0;
ue=1;ee=0;me=5126;pe=ve=fd=Mc=0;sa(Fd)?(Fe=!0,ke=m.createStream(34962,Fd),me=ke.dtype):(ke=m.getBuffer(Fd))?me=ke.dtype:"constant"in Fd?(ue=2,"number"===typeof Fd.constant?(fd=Fd.constant,ve=pe=Mc=0):(fd=0<Fd.constant.length?Fd.constant[0]:0,ve=1<Fd.constant.length?Fd.constant[1]:0,pe=2<Fd.constant.length?Fd.constant[2]:0,Mc=3<Fd.constant.length?Fd.constant[3]:0)):(ke=sa(Fd.buffer)?m.createStream(34962,Fd.buffer):m.getBuffer(Fd.buffer),me="type"in Fd?be[Fd.type]:ke.dtype,le=!!Fd.normalized,he=Fd.size|
0,je=Fd.offset|0,ee=Fd.stride|0,te=Fd.divisor|0);Md=r.location;Qd=v[Md];if(1===ue){Qd.buffer||Q.enableVertexAttribArray(Md);Sd=he||4;if(Qd.type!==me||Qd.size!==Sd||Qd.buffer!==ke||Qd.normalized!==le||Qd.offset!==je||Qd.stride!==ee)Q.bindBuffer(34962,ke.buffer),Q.vertexAttribPointer(Md,Sd,me,le,ee,je),Qd.type=me,Qd.size=Sd,Qd.buffer=ke,Qd.normalized=le,Qd.offset=je,Qd.stride=ee;Qd.divisor!==te&&(h.vertexAttribDivisorANGLE(Md,te),Qd.divisor=te)}else if(Qd.buffer&&(Q.disableVertexAttribArray(Md),Qd.buffer=
null),Qd.x!==fd||Qd.y!==ve||Qd.z!==pe||Qd.w!==Mc)Q.vertexAttrib4f(Md,fd,ve,pe,Mc),Qd.x=fd,Qd.y=ve,Qd.z=pe,Qd.w=Mc;Td=A.call(this,K,p,l);ne=!1;ye=null;Be=0;qe=!1;Te=Se=0;Oe=1;we=0;Ge=5126;He=Ke=Je=Ie=0;sa(Td)?(ne=!0,ye=m.createStream(34962,Td),Ge=ye.dtype):(ye=m.getBuffer(Td))?Ge=ye.dtype:"constant"in Td?(Oe=2,"number"===typeof Td.constant?(Je=Td.constant,Ke=He=Ie=0):(Je=0<Td.constant.length?Td.constant[0]:0,Ke=1<Td.constant.length?Td.constant[1]:0,He=2<Td.constant.length?Td.constant[2]:0,Ie=3<Td.constant.length?
Td.constant[3]:0)):(ye=sa(Td.buffer)?m.createStream(34962,Td.buffer):m.getBuffer(Td.buffer),Ge="type"in Td?be[Td.type]:ye.dtype,qe=!!Td.normalized,Te=Td.size|0,Se=Td.offset|0,we=Td.stride|0,Be=Td.divisor|0);Nd=wa.location;Zd=v[Nd];if(1===Oe){Zd.buffer||Q.enableVertexAttribArray(Nd);ce=Te||4;if(Zd.type!==Ge||Zd.size!==ce||Zd.buffer!==ye||Zd.normalized!==qe||Zd.offset!==Se||Zd.stride!==we)Q.bindBuffer(34962,ye.buffer),Q.vertexAttribPointer(Nd,ce,Ge,qe,we,Se),Zd.type=Ge,Zd.size=ce,Zd.buffer=ye,Zd.normalized=
qe,Zd.offset=Se,Zd.stride=we;Zd.divisor!==Be&&(h.vertexAttribDivisorANGLE(Nd,Be),Zd.divisor=Be)}else if(Zd.buffer&&(Q.disableVertexAttribArray(Nd),Zd.buffer=null),Zd.x!==Je||Zd.y!==Ke||Zd.z!==He||Zd.w!==Ie)Q.vertexAttrib4f(Nd,Je,Ke,He,Ie),Zd.x=Je,Zd.y=Ke,Zd.z=He,Zd.w=Ie;fe=q.call(this,K,p,l);Le=!1;Jd=null;Ud=0;De=!1;af=Me=0;$e=1;Ue=0;Pe=5126;We=Ve=Ye=Ze=0;sa(fe)?(Le=!0,Jd=m.createStream(34962,fe),Pe=Jd.dtype):(Jd=m.getBuffer(fe))?Pe=Jd.dtype:"constant"in fe?($e=2,"number"===typeof fe.constant?(Ye=
fe.constant,Ve=We=Ze=0):(Ye=0<fe.constant.length?fe.constant[0]:0,Ve=1<fe.constant.length?fe.constant[1]:0,We=2<fe.constant.length?fe.constant[2]:0,Ze=3<fe.constant.length?fe.constant[3]:0)):(Jd=sa(fe.buffer)?m.createStream(34962,fe.buffer):m.getBuffer(fe.buffer),Pe="type"in fe?be[fe.type]:Jd.dtype,De=!!fe.normalized,af=fe.size|0,Me=fe.offset|0,Ue=fe.stride|0,Ud=fe.divisor|0);Vd=ca.location;ae=v[Vd];if(1===$e){ae.buffer||Q.enableVertexAttribArray(Vd);Xe=af||1;if(ae.type!==Pe||ae.size!==Xe||ae.buffer!==
Jd||ae.normalized!==De||ae.offset!==Me||ae.stride!==Ue)Q.bindBuffer(34962,Jd.buffer),Q.vertexAttribPointer(Vd,Xe,Pe,De,Ue,Me),ae.type=Pe,ae.size=Xe,ae.buffer=Jd,ae.normalized=De,ae.offset=Me,ae.stride=Ue;ae.divisor!==Ud&&(h.vertexAttribDivisorANGLE(Vd,Ud),ae.divisor=Ud)}else if(ae.buffer&&(Q.disableVertexAttribArray(Vd),ae.buffer=null),ae.x!==Ye||ae.y!==Ve||ae.z!==We||ae.w!==Ze)Q.vertexAttrib4f(Vd,Ye,Ve,We,Ze),ae.x=Ye,ae.y=Ve,ae.z=We,ae.w=Ze;gf=K.pixelRatio;l&&lf===gf||(lf=gf,Q.uniform1f(ya.location,
gf));df=p.scale;hf=df[0];kf=df[1];l&&jf===hf&&rf===kf||(jf=hf,rf=kf,Q.uniform2f(ga.location,hf,kf));mf=p.scaleFract;sf=mf[0];Cf=mf[1];l&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,Q.uniform2f(Ca.location,sf,Cf));Ee=p.translate;nf=Ee[0];Df=Ee[1];l&&of===nf&&Gf===Df||(of=nf,Gf=Df,Q.uniform2f(pa.location,nf,Df));Af=p.translateFract;Ef=Af[0];wf=Af[1];l&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,Q.uniform2f(xa.location,Ef,wf));vf=P.call(this,K,p,l);yf=vf[0];If=vf[1];l&&zf===yf&&Jf===If||(zf=yf,Jf=If,Q.uniform2f(ra.location,
yf,If));Kf=p.opacity;l&&Lf===Kf||(Lf=Kf,Q.uniform1f(ma.location,Kf));(tf=p.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;Q.uniform1i(S.location,Rf.bind());Hf=p.elements;uf=null;(uf=(dg=sa(Hf))?dd.createStream(Hf):dd.getElements(Hf))&&Q.bindBuffer(34963,uf.buffer.buffer);Sf=p.offset;if(Tf=p.count)0<ob?uf?h.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),ob):h.drawArraysInstancedANGLE(0,Sf,Tf,ob):0>ob&&(uf?Q.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>
1)):Q.drawArrays(0,Sf,Tf)),K.viewportWidth=Ob,K.viewportHeight=kb,qb&&m.destroyStream(Ua),Pa&&m.destroyStream(Ac),nb&&m.destroyStream(gc),Ld&&m.destroyStream(Cc),ad&&m.destroyStream(Oc),se&&m.destroyStream(id),Fe&&m.destroyStream(ke),ne&&m.destroyStream(ye),Le&&m.destroyStream(Jd),Rf.unbind(),dg&&dd.destroyStream(uf)}M.unbind();ua.dirty=!0;Ea.setVAO(null);c&&(V.cpuTime+=performance.now()-f)},draw:function(a){var b,e,c,h,q,p,d,x,z,y,t,w,T,A,E,na,R,D,P,la,M,B,L,Aa,N,U,ha,Z,X,W,fa,da,va,ja,aa,Da,gd,
yb,cb,Nb,ab,ob,Va,rd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,xe,se,id,qf,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we;b=ia.next;b!==ia.cur&&(b?Q.bindFramebuffer(36160,b.framebuffer):Q.bindFramebuffer(36160,
null),ia.cur=b);if(ua.dirty){var Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,We,Vd,ae,Xe,gf,lf,df,hf,jf,kf,rf,mf,sf;Ge=Fa.dither;Ge!==ua.dither&&(Ge?Q.enable(3024):Q.disable(3024),ua.dither=Ge);Ie=ta[0];Je=ta[1];if(Ie!==Ia[0]||Je!==Ia[1])Q.blendEquationSeparate(Ie,Je),Ia[0]=Ie,Ia[1]=Je;Ke=Fa.depth_func;Ke!==ua.depth_func&&(Q.depthFunc(Ke),ua.depth_func=Ke);He=$b[0];Nd=$b[1];if(He!==Ga[0]||Nd!==Ga[1])Q.depthRange(He,Nd),Ga[0]=He,Ga[1]=Nd;Zd=Fa.depth_mask;Zd!==ua.depth_mask&&(Q.depthMask(Zd),
ua.depth_mask=Zd);ce=ea[0];fe=ea[1];Le=ea[2];Jd=ea[3];if(ce!==ba[0]||fe!==ba[1]||Le!==ba[2]||Jd!==ba[3])Q.colorMask(ce,fe,Le,Jd),ba[0]=ce,ba[1]=fe,ba[2]=Le,ba[3]=Jd;Ud=Fa.cull_enable;Ud!==ua.cull_enable&&(Ud?Q.enable(2884):Q.disable(2884),ua.cull_enable=Ud);De=Fa.cull_face;De!==ua.cull_face&&(Q.cullFace(De),ua.cull_face=De);Me=Fa.frontFace;Me!==ua.frontFace&&(Q.frontFace(Me),ua.frontFace=Me);af=Fa.lineWidth;af!==ua.lineWidth&&(Q.lineWidth(af),ua.lineWidth=af);$e=Fa.polygonOffset_enable;$e!==ua.polygonOffset_enable&&
($e?Q.enable(32823):Q.disable(32823),ua.polygonOffset_enable=$e);Ue=ac[0];Pe=ac[1];if(Ue!==Sb[0]||Pe!==Sb[1])Q.polygonOffset(Ue,Pe),Sb[0]=Ue,Sb[1]=Pe;Ze=Fa.sample_alpha;Ze!==ua.sample_alpha&&(Ze?Q.enable(32926):Q.disable(32926),ua.sample_alpha=Ze);Ye=Fa.sample_enable;Ye!==ua.sample_enable&&(Ye?Q.enable(32928):Q.disable(32928),ua.sample_enable=Ye);Ve=Ma[0];We=Ma[1];if(Ve!==Gd[0]||We!==Gd[1])Q.sampleCoverage(Ve,We),Gd[0]=Ve,Gd[1]=We;Vd=Fa.stencil_mask;Vd!==ua.stencil_mask&&(Q.stencilMask(Vd),ua.stencil_mask=
Vd);ae=ze[0];Xe=ze[1];gf=ze[2];if(ae!==Ad[0]||Xe!==Ad[1]||gf!==Ad[2])Q.stencilFunc(ae,Xe,gf),Ad[0]=ae,Ad[1]=Xe,Ad[2]=gf;lf=ie[0];df=ie[1];hf=ie[2];jf=ie[3];if(lf!==Ed[0]||df!==Ed[1]||hf!==Ed[2]||jf!==Ed[3])Q.stencilOpSeparate(lf,df,hf,jf),Ed[0]=lf,Ed[1]=df,Ed[2]=hf,Ed[3]=jf;kf=Rd[0];rf=Rd[1];mf=Rd[2];sf=Rd[3];if(kf!==oe[0]||rf!==oe[1]||mf!==oe[2]||sf!==oe[3])Q.stencilOpSeparate(kf,rf,mf,sf),oe[0]=kf,oe[1]=rf,oe[2]=mf,oe[3]=sf}e=a.viewport;c=e.x|0;h=e.y|0;q="width"in e?e.width|0:K.framebufferWidth-
c;p="height"in e?e.height|0:K.framebufferHeight-h;d=K.viewportWidth;K.viewportWidth=q;x=K.viewportHeight;K.viewportHeight=p;Q.viewport(c,h,q,p);ge[0]=c;ge[1]=h;ge[2]=q;ge[3]=p;Q.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;Q.enable(3042);ua.blend_enable=!0;Q.blendFuncSeparate(770,771,773,1);hb[0]=770;hb[1]=771;hb[2]=773;hb[3]=1;Q.disable(2929);ua.depth_enable=!1;z=a.viewport;y=z.x|0;t=z.y|0;w="width"in z?z.width|0:K.framebufferWidth-y;T="height"in z?z.height|0:K.framebufferHeight-t;Q.scissor(y,
t,w,T);Wd[0]=y;Wd[1]=t;Wd[2]=w;Wd[3]=T;Q.enable(3089);ua.scissor_enable=!0;Q.disable(2960);ua.stencil_enable=!1;if(A=ua.profile)E=performance.now(),V.count++;Q.useProgram(H.program);na=Hb.angle_instanced_arrays;Ea.setVAO(null);R=J.call(this,K,a,0);D=!1;P=null;la=0;M=!1;L=B=0;Aa=1;N=0;U=5126;W=X=Z=ha=0;sa(R)?(D=!0,P=m.createStream(34962,R),U=P.dtype):(P=m.getBuffer(R))?U=P.dtype:"constant"in R?(Aa=2,"number"===typeof R.constant?(Z=R.constant,X=W=ha=0):(Z=0<R.constant.length?R.constant[0]:0,X=1<R.constant.length?
R.constant[1]:0,W=2<R.constant.length?R.constant[2]:0,ha=3<R.constant.length?R.constant[3]:0)):(P=sa(R.buffer)?m.createStream(34962,R.buffer):m.getBuffer(R.buffer),U="type"in R?be[R.type]:P.dtype,M=!!R.normalized,L=R.size|0,B=R.offset|0,N=R.stride|0,la=R.divisor|0);fa=La.location;da=v[fa];if(1===Aa){da.buffer||Q.enableVertexAttribArray(fa);va=L||1;if(da.type!==U||da.size!==va||da.buffer!==P||da.normalized!==M||da.offset!==B||da.stride!==N)Q.bindBuffer(34962,P.buffer),Q.vertexAttribPointer(fa,va,U,
M,N,B),da.type=U,da.size=va,da.buffer=P,da.normalized=M,da.offset=B,da.stride=N;da.divisor!==la&&(na.vertexAttribDivisorANGLE(fa,la),da.divisor=la)}else if(da.buffer&&(Q.disableVertexAttribArray(fa),da.buffer=null),da.x!==Z||da.y!==X||da.z!==W||da.w!==ha)Q.vertexAttrib4f(fa,Z,X,W,ha),da.x=Z,da.y=X,da.z=W,da.w=ha;ja=g.call(this,K,a,0);aa=!1;Da=null;gd=0;yb=!1;Nb=cb=0;ab=1;ob=0;Va=5126;qc=Jb=Ib=rd=0;sa(ja)?(aa=!0,Da=m.createStream(34962,ja),Va=Da.dtype):(Da=m.getBuffer(ja))?Va=Da.dtype:"constant"in
ja?(ab=2,"number"===typeof ja.constant?(Ib=ja.constant,Jb=qc=rd=0):(Ib=0<ja.constant.length?ja.constant[0]:0,Jb=1<ja.constant.length?ja.constant[1]:0,qc=2<ja.constant.length?ja.constant[2]:0,rd=3<ja.constant.length?ja.constant[3]:0)):(Da=sa(ja.buffer)?m.createStream(34962,ja.buffer):m.getBuffer(ja.buffer),Va="type"in ja?be[ja.type]:Da.dtype,yb=!!ja.normalized,Nb=ja.size|0,cb=ja.offset|0,ob=ja.stride|0,gd=ja.divisor|0);Ob=fb.location;kb=v[Ob];if(1===ab){kb.buffer||Q.enableVertexAttribArray(Ob);Gb=
Nb||1;if(kb.type!==Va||kb.size!==Gb||kb.buffer!==Da||kb.normalized!==yb||kb.offset!==cb||kb.stride!==ob)Q.bindBuffer(34962,Da.buffer),Q.vertexAttribPointer(Ob,Gb,Va,yb,ob,cb),kb.type=Va,kb.size=Gb,kb.buffer=Da,kb.normalized=yb,kb.offset=cb,kb.stride=ob;kb.divisor!==gd&&(na.vertexAttribDivisorANGLE(Ob,gd),kb.divisor=gd)}else if(kb.buffer&&(Q.disableVertexAttribArray(Ob),kb.buffer=null),kb.x!==Ib||kb.y!==Jb||kb.z!==qc||kb.w!==rd)Q.vertexAttrib4f(Ob,Ib,Jb,qc,rd),kb.x=Ib,kb.y=Jb,kb.z=qc,kb.w=rd;Db=l.call(this,
K,a,0);wb=!1;ib=null;Yb=0;Pb=!1;Ua=qb=0;Ub=1;zb=0;bc=5126;rb=Ha=pb=jb=0;sa(Db)?(wb=!0,ib=m.createStream(34962,Db),bc=ib.dtype):(ib=m.getBuffer(Db))?bc=ib.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(pb=Db.constant,Ha=rb=jb=0):(pb=0<Db.constant.length?Db.constant[0]:0,Ha=1<Db.constant.length?Db.constant[1]:0,rb=2<Db.constant.length?Db.constant[2]:0,jb=3<Db.constant.length?Db.constant[3]:0)):(ib=sa(Db.buffer)?m.createStream(34962,Db.buffer):m.getBuffer(Db.buffer),bc="type"in Db?be[Db.type]:
ib.dtype,Pb=!!Db.normalized,Ua=Db.size|0,qb=Db.offset|0,zb=Db.stride|0,Yb=Db.divisor|0);Ja=oa.location;eb=v[Ja];if(1===Ub){eb.buffer||Q.enableVertexAttribArray(Ja);gb=Ua||1;if(eb.type!==bc||eb.size!==gb||eb.buffer!==ib||eb.normalized!==Pb||eb.offset!==qb||eb.stride!==zb)Q.bindBuffer(34962,ib.buffer),Q.vertexAttribPointer(Ja,gb,bc,Pb,zb,qb),eb.type=bc,eb.size=gb,eb.buffer=ib,eb.normalized=Pb,eb.offset=qb,eb.stride=zb;eb.divisor!==Yb&&(na.vertexAttribDivisorANGLE(Ja,Yb),eb.divisor=Yb)}else if(eb.buffer&&
(Q.disableVertexAttribArray(Ja),eb.buffer=null),eb.x!==pb||eb.y!==Ha||eb.z!==rb||eb.w!==jb)Q.vertexAttrib4f(Ja,pb,Ha,rb,jb),eb.x=pb,eb.y=Ha,eb.z=rb,eb.w=jb;Ka=n.call(this,K,a,0);lb=!1;Wa=null;tb=0;sb=!1;Ac=Pa=0;Ra=1;Kb=0;Eb=5126;Lb=Ya=xd=Na=0;sa(Ka)?(lb=!0,Wa=m.createStream(34962,Ka),Eb=Wa.dtype):(Wa=m.getBuffer(Ka))?Eb=Wa.dtype:"constant"in Ka?(Ra=2,"number"===typeof Ka.constant?(xd=Ka.constant,Ya=Lb=Na=0):(xd=0<Ka.constant.length?Ka.constant[0]:0,Ya=1<Ka.constant.length?Ka.constant[1]:0,Lb=2<Ka.constant.length?
Ka.constant[2]:0,Na=3<Ka.constant.length?Ka.constant[3]:0)):(Wa=sa(Ka.buffer)?m.createStream(34962,Ka.buffer):m.getBuffer(Ka.buffer),Eb="type"in Ka?be[Ka.type]:Wa.dtype,sb=!!Ka.normalized,Ac=Ka.size|0,Pa=Ka.offset|0,Kb=Ka.stride|0,tb=Ka.divisor|0);Mb=Ta.location;mb=v[Mb];if(1===Ra){mb.buffer||Q.enableVertexAttribArray(Mb);Oa=Ac||1;if(mb.type!==Eb||mb.size!==Oa||mb.buffer!==Wa||mb.normalized!==sb||mb.offset!==Pa||mb.stride!==Kb)Q.bindBuffer(34962,Wa.buffer),Q.vertexAttribPointer(Mb,Oa,Eb,sb,Kb,Pa),
mb.type=Eb,mb.size=Oa,mb.buffer=Wa,mb.normalized=sb,mb.offset=Pa,mb.stride=Kb;mb.divisor!==tb&&(na.vertexAttribDivisorANGLE(Mb,tb),mb.divisor=tb)}else if(mb.buffer&&(Q.disableVertexAttribArray(Mb),mb.buffer=null),mb.x!==xd||mb.y!==Ya||mb.z!==Lb||mb.w!==Na)Q.vertexAttrib4f(Mb,xd,Ya,Lb,Na),mb.x=xd,mb.y=Ya,mb.z=Lb,mb.w=Na;Zb=f.call(this,K,a,0);Qa=!1;ub=null;vb=0;Sa=!1;gc=nb=0;Dc=1;uc=0;bb=5126;Uc=Xa=nd=jc=0;sa(Zb)?(Qa=!0,ub=m.createStream(34962,Zb),bb=ub.dtype):(ub=m.getBuffer(Zb))?bb=ub.dtype:"constant"in
Zb?(Dc=2,"number"===typeof Zb.constant?(nd=Zb.constant,Xa=Uc=jc=0):(nd=0<Zb.constant.length?Zb.constant[0]:0,Xa=1<Zb.constant.length?Zb.constant[1]:0,Uc=2<Zb.constant.length?Zb.constant[2]:0,jc=3<Zb.constant.length?Zb.constant[3]:0)):(ub=sa(Zb.buffer)?m.createStream(34962,Zb.buffer):m.getBuffer(Zb.buffer),bb="type"in Zb?be[Zb.type]:ub.dtype,Sa=!!Zb.normalized,gc=Zb.size|0,nb=Zb.offset|0,uc=Zb.stride|0,vb=Zb.divisor|0);Ab=ka.location;Za=v[Ab];if(1===Dc){Za.buffer||Q.enableVertexAttribArray(Ab);Vb=
gc||1;if(Za.type!==bb||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==nb||Za.stride!==uc)Q.bindBuffer(34962,ub.buffer),Q.vertexAttribPointer(Ab,Vb,bb,Sa,uc,nb),Za.type=bb,Za.size=Vb,Za.buffer=ub,Za.normalized=Sa,Za.offset=nb,Za.stride=uc;Za.divisor!==vb&&(na.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&(Q.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==nd||Za.y!==Xa||Za.z!==Uc||Za.w!==jc)Q.vertexAttrib4f(Ab,nd,Xa,Uc,jc),Za.x=nd,Za.y=Xa,Za.z=Uc,Za.w=jc;sc=F.call(this,
K,a,0);Wb=!1;Qb=null;Jc=0;Rb=!1;Cc=Ld=0;ud=1;Lc=0;Wc=5126;hc=vc=nc=vd=0;sa(sc)?(Wb=!0,Qb=m.createStream(34962,sc),Wc=Qb.dtype):(Qb=m.getBuffer(sc))?Wc=Qb.dtype:"constant"in sc?(ud=2,"number"===typeof sc.constant?(nc=sc.constant,vc=hc=vd=0):(nc=0<sc.constant.length?sc.constant[0]:0,vc=1<sc.constant.length?sc.constant[1]:0,hc=2<sc.constant.length?sc.constant[2]:0,vd=3<sc.constant.length?sc.constant[3]:0)):(Qb=sa(sc.buffer)?m.createStream(34962,sc.buffer):m.getBuffer(sc.buffer),Wc="type"in sc?be[sc.type]:
Qb.dtype,Rb=!!sc.normalized,Cc=sc.size|0,Ld=sc.offset|0,Lc=sc.stride|0,Jc=sc.divisor|0);db=qa.location;rc=v[db];if(1===ud){rc.buffer||Q.enableVertexAttribArray(db);Tb=Cc||1;if(rc.type!==Wc||rc.size!==Tb||rc.buffer!==Qb||rc.normalized!==Rb||rc.offset!==Ld||rc.stride!==Lc)Q.bindBuffer(34962,Qb.buffer),Q.vertexAttribPointer(db,Tb,Wc,Rb,Lc,Ld),rc.type=Wc,rc.size=Tb,rc.buffer=Qb,rc.normalized=Rb,rc.offset=Ld,rc.stride=Lc;rc.divisor!==Jc&&(na.vertexAttribDivisorANGLE(db,Jc),rc.divisor=Jc)}else if(rc.buffer&&
(Q.disableVertexAttribArray(db),rc.buffer=null),rc.x!==nc||rc.y!==vc||rc.z!==hc||rc.w!==vd)Q.vertexAttrib4f(db,nc,vc,hc,vd),rc.x=nc,rc.y=vc,rc.z=hc,rc.w=vd;Xb=C.call(this,K,a,0);dc=!1;ic=null;xc=0;zc=!1;Oc=ad=0;Pc=1;Qc=0;Xc=5126;kc=Yc=bd=ld=0;sa(Xb)?(dc=!0,ic=m.createStream(34962,Xb),Xc=ic.dtype):(ic=m.getBuffer(Xb))?Xc=ic.dtype:"constant"in Xb?(Pc=2,"number"===typeof Xb.constant?(bd=Xb.constant,Yc=kc=ld=0):(bd=0<Xb.constant.length?Xb.constant[0]:0,Yc=1<Xb.constant.length?Xb.constant[1]:0,kc=2<Xb.constant.length?
Xb.constant[2]:0,ld=3<Xb.constant.length?Xb.constant[3]:0)):(ic=sa(Xb.buffer)?m.createStream(34962,Xb.buffer):m.getBuffer(Xb.buffer),Xc="type"in Xb?be[Xb.type]:ic.dtype,zc=!!Xb.normalized,Oc=Xb.size|0,ad=Xb.offset|0,Qc=Xb.stride|0,xc=Xb.divisor|0);cc=r.location;Zc=v[cc];if(1===Pc){Zc.buffer||Q.enableVertexAttribArray(cc);Sc=Oc||4;if(Zc.type!==Xc||Zc.size!==Sc||Zc.buffer!==ic||Zc.normalized!==zc||Zc.offset!==ad||Zc.stride!==Qc)Q.bindBuffer(34962,ic.buffer),Q.vertexAttribPointer(cc,Sc,Xc,zc,Qc,ad),
Zc.type=Xc,Zc.size=Sc,Zc.buffer=ic,Zc.normalized=zc,Zc.offset=ad,Zc.stride=Qc;Zc.divisor!==xc&&(na.vertexAttribDivisorANGLE(cc,xc),Zc.divisor=xc)}else if(Zc.buffer&&(Q.disableVertexAttribArray(cc),Zc.buffer=null),Zc.x!==bd||Zc.y!==Yc||Zc.z!==kc||Zc.w!==ld)Q.vertexAttrib4f(cc,bd,Yc,kc,ld),Zc.x=bd,Zc.y=Yc,Zc.z=kc,Zc.w=ld;cd=O.call(this,K,a,0);yc=!1;hd=null;qd=0;xe=!1;id=se=0;qf=1;Od=0;Yd=5126;Id=Kd=Pd=de=0;sa(cd)?(yc=!0,hd=m.createStream(34962,cd),Yd=hd.dtype):(hd=m.getBuffer(cd))?Yd=hd.dtype:"constant"in
cd?(qf=2,"number"===typeof cd.constant?(Pd=cd.constant,Kd=Id=de=0):(Pd=0<cd.constant.length?cd.constant[0]:0,Kd=1<cd.constant.length?cd.constant[1]:0,Id=2<cd.constant.length?cd.constant[2]:0,de=3<cd.constant.length?cd.constant[3]:0)):(hd=sa(cd.buffer)?m.createStream(34962,cd.buffer):m.getBuffer(cd.buffer),Yd="type"in cd?be[cd.type]:hd.dtype,xe=!!cd.normalized,id=cd.size|0,se=cd.offset|0,Od=cd.stride|0,qd=cd.divisor|0);od=wa.location;Rc=v[od];if(1===qf){Rc.buffer||Q.enableVertexAttribArray(od);wd=
id||4;if(Rc.type!==Yd||Rc.size!==wd||Rc.buffer!==hd||Rc.normalized!==xe||Rc.offset!==se||Rc.stride!==Od)Q.bindBuffer(34962,hd.buffer),Q.vertexAttribPointer(od,wd,Yd,xe,Od,se),Rc.type=Yd,Rc.size=wd,Rc.buffer=hd,Rc.normalized=xe,Rc.offset=se,Rc.stride=Od;Rc.divisor!==qd&&(na.vertexAttribDivisorANGLE(od,qd),Rc.divisor=qd)}else if(Rc.buffer&&(Q.disableVertexAttribArray(od),Rc.buffer=null),Rc.x!==Pd||Rc.y!==Kd||Rc.z!==Id||Rc.w!==de)Q.vertexAttrib4f(od,Pd,Kd,Id,de),Rc.x=Pd,Rc.y=Kd,Rc.z=Id,Rc.w=de;td=I.call(this,
K,a,0);jd=!1;yd=null;Dd=0;Fd=!1;ke=Fe=0;te=1;le=0;je=5126;me=ee=ue=he=0;sa(td)?(jd=!0,yd=m.createStream(34962,td),je=yd.dtype):(yd=m.getBuffer(td))?je=yd.dtype:"constant"in td?(te=2,"number"===typeof td.constant?(ue=td.constant,ee=me=he=0):(ue=0<td.constant.length?td.constant[0]:0,ee=1<td.constant.length?td.constant[1]:0,me=2<td.constant.length?td.constant[2]:0,he=3<td.constant.length?td.constant[3]:0)):(yd=sa(td.buffer)?m.createStream(34962,td.buffer):m.getBuffer(td.buffer),je="type"in td?be[td.type]:
yd.dtype,Fd=!!td.normalized,ke=td.size|0,Fe=td.offset|0,le=td.stride|0,Dd=td.divisor|0);Mc=ca.location;fd=v[Mc];if(1===te){fd.buffer||Q.enableVertexAttribArray(Mc);ve=ke||1;if(fd.type!==je||fd.size!==ve||fd.buffer!==yd||fd.normalized!==Fd||fd.offset!==Fe||fd.stride!==le)Q.bindBuffer(34962,yd.buffer),Q.vertexAttribPointer(Mc,ve,je,Fd,le,Fe),fd.type=je,fd.size=ve,fd.buffer=yd,fd.normalized=Fd,fd.offset=Fe,fd.stride=le;fd.divisor!==Dd&&(na.vertexAttribDivisorANGLE(Mc,Dd),fd.divisor=Dd)}else if(fd.buffer&&
(Q.disableVertexAttribArray(Mc),fd.buffer=null),fd.x!==ue||fd.y!==ee||fd.z!==me||fd.w!==he)Q.vertexAttrib4f(Mc,ue,ee,me,he),fd.x=ue,fd.y=ee,fd.z=me,fd.w=he;Q.uniform1i(G.location,!1);Q.uniform1f(ya.location,K.pixelRatio);pe=a.scale;Q.uniform2f(ga.location,pe[0],pe[1]);Md=a.scaleFract;Q.uniform2f(Ca.location,Md[0],Md[1]);Qd=a.translate;Q.uniform2f(pa.location,Qd[0],Qd[1]);Sd=a.translateFract;Q.uniform2f(xa.location,Sd[0],Sd[1]);Td=k.call(this,K,a,0);Q.uniform2f(ra.location,Td[0],Td[1]);Q.uniform1f(ma.location,
a.opacity);Q.uniform1i(za.location,u.bind());(ne=a.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);ye=ne._texture;Q.uniform1i(S.location,ye.bind());Be=a.elements;qe=null;(qe=(Se=sa(Be))?dd.createStream(Be):dd.getElements(Be))&&Q.bindBuffer(34963,qe.buffer.buffer);Te=a.offset;if(Oe=a.count)we=Ba.instances,0<we?qe?na.drawElementsInstancedANGLE(0,Oe,qe.type,Te<<(qe.type-5121>>1),we):na.drawArraysInstancedANGLE(0,Te,Oe,we):0>we&&(qe?Q.drawElements(0,Oe,qe.type,Te<<(qe.type-5121>>1)):Q.drawArrays(0,
Te,Oe)),ua.dirty=!0,Ea.setVAO(null),K.viewportWidth=d,K.viewportHeight=x,A&&(V.cpuTime+=performance.now()-E),D&&m.destroyStream(P),aa&&m.destroyStream(Da),wb&&m.destroyStream(ib),lb&&m.destroyStream(Wa),Qa&&m.destroyStream(ub),Wb&&m.destroyStream(Qb),dc&&m.destroyStream(ic),yc&&m.destroyStream(hd),jd&&m.destroyStream(yd),u.unbind(),ye.unbind(),Se&&dd.destroyStream(qe)},scope:function(f,l,r){var q,v,n,Q,d,g,z,oa,G,T,S,A,R,ga,J,ia,fb,P,u,k,La,M,Y,C,ca,H,F,I,ya,wa,Ea,ra,O,ea,ka,X,fa,Ta,pa,Ca,ma,xa,ja,
qa,va,ta,za,Hb,aa,Ga,gd,hb,Ia,Sb,ba,$b,ac,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Wd,Ra,Kb,Eb,Na,zd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,Gd,Xa,Ma,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Rd,Cc,ge,Lc,Wc,ze,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,Ed,oe,id,Ad,ie,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Qf,ke,te,le,je,he,ue,ee,me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,We,Vd,ae,Xe,gf,lf,df,hf,jf,
kf,rf,mf,sf,Bf,Cf,Qe,Ee,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ef,bf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ff,cf,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;q=f.viewport;v=q.x|0;n=q.y|0;Q="width"in q?q.width|0:K.framebufferWidth-v;d="height"in q?q.height|0:K.framebufferHeight-n;g=K.viewportWidth;K.viewportWidth=Q;z=K.viewportHeight;K.viewportHeight=d;oa=rd[0];rd[0]=v;G=rd[1];rd[1]=n;T=rd[2];rd[2]=
Q;S=rd[3];rd[3]=d;A=la[0];la[0]=0;R=la[1];la[1]=0;ga=la[2];la[2]=0;J=la[3];la[3]=1;ia=Fa.blend_enable;Fa.blend_enable=!0;fb=Da[0];Da[0]=770;P=Da[1];Da[1]=771;u=Da[2];Da[2]=773;k=Da[3];Da[3]=1;La=Fa.depth_enable;Fa.depth_enable=!1;M=f.viewport;Y=M.x|0;C=M.y|0;ca="width"in M?M.width|0:K.framebufferWidth-Y;H="height"in M?M.height|0:K.framebufferHeight-C;F=xe[0];xe[0]=Y;I=xe[1];xe[1]=C;ya=xe[2];xe[2]=ca;wa=xe[3];xe[3]=H;Ea=Fa.scissor_enable;Fa.scissor_enable=!0;ra=Fa.stencil_enable;Fa.stencil_enable=
!1;if(O=ua.profile)ea=performance.now(),V.count++;ka=f.elements;X=null;X=(fa=sa(ka))?dd.createStream(ka):dd.getElements(ka);Ta=Ba.elements;Ba.elements=X;pa=f.offset;Ca=Ba.offset;Ba.offset=pa;ma=f.count;xa=Ba.count;Ba.count=ma;ja=Ba.primitive;Ba.primitive=0;qa=Aa[45];Aa[45]=!1;va=f.markerTexture;ta=Aa[48];Aa[48]=va;za=f.opacity;Hb=Aa[10];Aa[10]=za;aa=L.call(this,K,f,r);Ga=Aa[46];Aa[46]=aa;gd=Aa[47];Aa[47]=W;hb=K.pixelRatio;Ia=Aa[34];Aa[34]=hb;Sb=f.scale;ba=Aa[6];Aa[6]=Sb;$b=f.scaleFract;ac=Aa[7];Aa[7]=
$b;bc=f.translate;jb=Aa[8];Aa[8]=bc;pb=f.translateFract;Ha=Aa[9];Aa[9]=pb;rb=t.call(this,K,f,r);Ja=!1;eb=null;gb=0;Ka=!1;Wa=lb=0;tb=1;sb=0;Pa=5126;Eb=Kb=Ra=Wd=0;sa(rb)?(Ja=!0,eb=m.createStream(34962,rb),Pa=eb.dtype):(eb=m.getBuffer(rb))?Pa=eb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Ra=rb.constant,Kb=Eb=Wd=0):(Ra=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Eb=2<rb.constant.length?rb.constant[2]:0,Wd=3<rb.constant.length?rb.constant[3]:0)):(eb=sa(rb.buffer)?
m.createStream(34962,rb.buffer):m.getBuffer(rb.buffer),Pa="type"in rb?be[rb.type]:eb.dtype,Ka=!!rb.normalized,Wa=rb.size|0,lb=rb.offset|0,sb=rb.stride|0,gb=rb.divisor|0);Na=N.buffer;N.buffer=eb;zd=N.divisor;N.divisor=gb;Ya=N.normalized;N.normalized=Ka;Lb=N.offset;N.offset=lb;Mb=N.size;N.size=Wa;mb=N.state;N.state=tb;Oa=N.stride;N.stride=sb;Zb=N.type;N.type=Pa;Qa=N.w;N.w=Wd;ub=N.x;N.x=Ra;vb=N.y;N.y=Kb;Sa=N.z;N.z=Eb;nb=w.call(this,K,f,r);gc=!1;Dc=null;uc=0;bb=!1;Gd=jc=0;Xa=1;Ma=0;Ab=5126;Wb=sc=Vb=Za=
0;sa(nb)?(gc=!0,Dc=m.createStream(34962,nb),Ab=Dc.dtype):(Dc=m.getBuffer(nb))?Ab=Dc.dtype:"constant"in nb?(Xa=2,"number"===typeof nb.constant?(Vb=nb.constant,sc=Wb=Za=0):(Vb=0<nb.constant.length?nb.constant[0]:0,sc=1<nb.constant.length?nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,Za=3<nb.constant.length?nb.constant[3]:0)):(Dc=sa(nb.buffer)?m.createStream(34962,nb.buffer):m.getBuffer(nb.buffer),Ab="type"in nb?be[nb.type]:Dc.dtype,bb=!!nb.normalized,Gd=nb.size|0,jc=nb.offset|0,Ma=nb.stride|
0,uc=nb.divisor|0);Qb=B.buffer;B.buffer=Dc;Jc=B.divisor;B.divisor=uc;Rb=B.normalized;B.normalized=bb;Rd=B.offset;B.offset=jc;Cc=B.size;B.size=Gd;ge=B.state;B.state=Xa;Lc=B.stride;B.stride=Ma;Wc=B.type;B.type=Ab;ze=B.w;B.w=Za;nc=B.x;B.x=Vb;vc=B.y;B.y=sc;hc=B.z;B.z=Wb;db=ha.call(this,K,f,r);rc=!1;Tb=null;Xb=0;dc=!1;xc=ic=0;zc=1;ad=0;Oc=5126;ld=Xc=Qc=Pc=0;sa(db)?(rc=!0,Tb=m.createStream(34962,db),Oc=Tb.dtype):(Tb=m.getBuffer(db))?Oc=Tb.dtype:"constant"in db?(zc=2,"number"===typeof db.constant?(Qc=db.constant,
Xc=ld=Pc=0):(Qc=0<db.constant.length?db.constant[0]:0,Xc=1<db.constant.length?db.constant[1]:0,ld=2<db.constant.length?db.constant[2]:0,Pc=3<db.constant.length?db.constant[3]:0)):(Tb=sa(db.buffer)?m.createStream(34962,db.buffer):m.getBuffer(db.buffer),Oc="type"in db?be[db.type]:Tb.dtype,dc=!!db.normalized,xc=db.size|0,ic=db.offset|0,ad=db.stride|0,Xb=db.divisor|0);bd=c.buffer;c.buffer=Tb;Yc=c.divisor;c.divisor=Xb;kc=c.normalized;c.normalized=dc;cc=c.offset;c.offset=ic;Zc=c.size;c.size=xc;Sc=c.state;
c.state=zc;cd=c.stride;c.stride=ad;yc=c.type;c.type=Oc;hd=c.w;c.w=Pc;qd=c.x;c.x=Qc;Ed=c.y;c.y=Xc;oe=c.z;c.z=ld;id=e.call(this,K,f,r);Ad=!1;ie=null;Yd=0;de=!1;Kd=Pd=0;Id=1;od=0;Rc=5126;yd=jd=td=wd=0;sa(id)?(Ad=!0,ie=m.createStream(34962,id),Rc=ie.dtype):(ie=m.getBuffer(id))?Rc=ie.dtype:"constant"in id?(Id=2,"number"===typeof id.constant?(td=id.constant,jd=yd=wd=0):(td=0<id.constant.length?id.constant[0]:0,jd=1<id.constant.length?id.constant[1]:0,yd=2<id.constant.length?id.constant[2]:0,wd=3<id.constant.length?
id.constant[3]:0)):(ie=sa(id.buffer)?m.createStream(34962,id.buffer):m.getBuffer(id.buffer),Rc="type"in id?be[id.type]:ie.dtype,de=!!id.normalized,Kd=id.size|0,Pd=id.offset|0,od=id.stride|0,Yd=id.divisor|0);Dd=U.buffer;U.buffer=ie;Fd=U.divisor;U.divisor=Yd;Qf=U.normalized;U.normalized=de;ke=U.offset;U.offset=Pd;te=U.size;U.size=Kd;le=U.state;U.state=Id;je=U.stride;U.stride=od;he=U.type;U.type=Rc;ue=U.w;U.w=wd;ee=U.x;U.x=td;me=U.y;U.y=jd;Mc=U.z;U.z=yd;fd=p.call(this,K,f,r);ve=!1;pe=null;Md=0;Qd=!1;
Td=Sd=0;ne=1;ye=0;Be=5126;Oe=Te=Se=qe=0;sa(fd)?(ve=!0,pe=m.createStream(34962,fd),Be=pe.dtype):(pe=m.getBuffer(fd))?Be=pe.dtype:"constant"in fd?(ne=2,"number"===typeof fd.constant?(Se=fd.constant,Te=Oe=qe=0):(Se=0<fd.constant.length?fd.constant[0]:0,Te=1<fd.constant.length?fd.constant[1]:0,Oe=2<fd.constant.length?fd.constant[2]:0,qe=3<fd.constant.length?fd.constant[3]:0)):(pe=sa(fd.buffer)?m.createStream(34962,fd.buffer):m.getBuffer(fd.buffer),Be="type"in fd?be[fd.type]:pe.dtype,Qd=!!fd.normalized,
Td=fd.size|0,Sd=fd.offset|0,ye=fd.stride|0,Md=fd.divisor|0);we=Z.buffer;Z.buffer=pe;Ge=Z.divisor;Z.divisor=Md;Ie=Z.normalized;Z.normalized=Qd;Je=Z.offset;Z.offset=Sd;Ke=Z.size;Z.size=Td;He=Z.state;Z.state=ne;Nd=Z.stride;Z.stride=ye;Zd=Z.type;Z.type=Be;ce=Z.w;Z.w=qe;fe=Z.x;Z.x=Se;Le=Z.y;Z.y=Te;Jd=Z.z;Z.z=Oe;Ud=h.call(this,K,f,r);De=!1;Me=null;af=0;$e=!1;Pe=Ue=0;Ze=1;Ye=0;Ve=5126;Xe=ae=Vd=We=0;sa(Ud)?(De=!0,Me=m.createStream(34962,Ud),Ve=Me.dtype):(Me=m.getBuffer(Ud))?Ve=Me.dtype:"constant"in Ud?(Ze=
2,"number"===typeof Ud.constant?(Vd=Ud.constant,ae=Xe=We=0):(Vd=0<Ud.constant.length?Ud.constant[0]:0,ae=1<Ud.constant.length?Ud.constant[1]:0,Xe=2<Ud.constant.length?Ud.constant[2]:0,We=3<Ud.constant.length?Ud.constant[3]:0)):(Me=sa(Ud.buffer)?m.createStream(34962,Ud.buffer):m.getBuffer(Ud.buffer),Ve="type"in Ud?be[Ud.type]:Me.dtype,$e=!!Ud.normalized,Pe=Ud.size|0,Ue=Ud.offset|0,Ye=Ud.stride|0,af=Ud.divisor|0);gf=y.buffer;y.buffer=Me;lf=y.divisor;y.divisor=af;df=y.normalized;y.normalized=$e;hf=y.offset;
y.offset=Ue;jf=y.size;y.size=Pe;kf=y.state;y.state=Ze;rf=y.stride;y.stride=Ye;mf=y.type;y.type=Ve;sf=y.w;y.w=We;Bf=y.x;y.x=Vd;Cf=y.y;y.y=ae;Qe=y.z;y.z=Xe;Ee=da.call(this,K,f,r);nf=!1;of=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Ee)?(nf=!0,of=m.createStream(34962,Ee),xf=of.dtype):(of=m.getBuffer(Ee))?xf=of.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?
Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(of=sa(Ee.buffer)?m.createStream(34962,Ee.buffer):m.getBuffer(Ee.buffer),xf="type"in Ee?be[Ee.type]:of.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Jf=D.buffer;D.buffer=of;Kf=D.divisor;D.divisor=Df;Lf=D.normalized;D.normalized=Gf;tf=D.offset;D.offset=Af;Rf=D.size;D.size=Ef;Hf=D.state;D.state=Ff;uf=D.stride;D.stride=wf;dg=D.type;D.type=xf;Sf=D.w;D.w=vf;Tf=D.x;D.x=yf;qg=D.y;D.y=zf;ef=D.z;D.z=If;bf=E.call(this,
K,f,r);Mf=!1;Nf=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;sa(bf)?(Mf=!0,Nf=m.createStream(34962,bf),Uf=Nf.dtype):(Nf=m.getBuffer(bf))?Uf=Nf.dtype:"constant"in bf?(ig=2,"number"===typeof bf.constant?(Yf=bf.constant,Zf=jg=Xf=0):(Yf=0<bf.constant.length?bf.constant[0]:0,Zf=1<bf.constant.length?bf.constant[1]:0,jg=2<bf.constant.length?bf.constant[2]:0,Xf=3<bf.constant.length?bf.constant[3]:0)):(Nf=sa(bf.buffer)?m.createStream(34962,bf.buffer):m.getBuffer(bf.buffer),Uf="type"in bf?be[bf.type]:
Nf.dtype,fg=!!bf.normalized,hg=bf.size|0,gg=bf.offset|0,Wf=bf.stride|0,eg=bf.divisor|0);rg=b.buffer;b.buffer=Nf;sg=b.divisor;b.divisor=eg;tg=b.normalized;b.normalized=fg;ug=b.offset;b.offset=gg;vg=b.size;b.size=hg;wg=b.state;b.state=ig;xg=b.stride;b.stride=Wf;yg=b.type;b.type=Uf;zg=b.w;b.w=Xf;Ag=b.x;b.x=Yf;Bg=b.y;b.y=Zf;ff=b.z;b.z=jg;cf=x.call(this,K,f,r);Of=!1;Pf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;sa(cf)?(Of=!0,Pf=m.createStream(34962,cf),Vf=Pf.dtype):(Pf=m.getBuffer(cf))?Vf=
Pf.dtype:"constant"in cf?(og=2,"number"===typeof cf.constant?(bg=cf.constant,cg=pg=ag=0):(bg=0<cf.constant.length?cf.constant[0]:0,cg=1<cf.constant.length?cf.constant[1]:0,pg=2<cf.constant.length?cf.constant[2]:0,ag=3<cf.constant.length?cf.constant[3]:0)):(Pf=sa(cf.buffer)?m.createStream(34962,cf.buffer):m.getBuffer(cf.buffer),Vf="type"in cf?be[cf.type]:Pf.dtype,lg=!!cf.normalized,ng=cf.size|0,mg=cf.offset|0,$f=cf.stride|0,kg=cf.divisor|0);Cg=a.buffer;a.buffer=Pf;Dg=a.divisor;a.divisor=kg;Eg=a.normalized;
a.normalized=lg;Fg=a.offset;a.offset=mg;Gg=a.size;a.size=ng;Hg=a.state;a.state=og;Ig=a.stride;a.stride=$f;Jg=a.type;a.type=Vf;Kg=a.w;a.w=ag;Lg=a.x;a.x=bg;Mg=a.y;a.y=cg;Ng=a.z;a.z=pg;Og=na.vert;na.vert=44;Pg=na.frag;na.frag=43;ua.dirty=!0;l(K,f,r);K.viewportWidth=g;K.viewportHeight=z;rd[0]=oa;rd[1]=G;rd[2]=T;rd[3]=S;la[0]=A;la[1]=R;la[2]=ga;la[3]=J;Fa.blend_enable=ia;Da[0]=fb;Da[1]=P;Da[2]=u;Da[3]=k;Fa.depth_enable=La;xe[0]=F;xe[1]=I;xe[2]=ya;xe[3]=wa;Fa.scissor_enable=Ea;Fa.stencil_enable=ra;O&&(V.cpuTime+=
performance.now()-ea);fa&&dd.destroyStream(X);Ba.elements=Ta;Ba.offset=Ca;Ba.count=xa;Ba.primitive=ja;Aa[45]=qa;Aa[48]=ta;Aa[10]=Hb;Aa[46]=Ga;Aa[47]=gd;Aa[34]=Ia;Aa[6]=ba;Aa[7]=ac;Aa[8]=jb;Aa[9]=Ha;Ja&&m.destroyStream(eb);N.buffer=Na;N.divisor=zd;N.normalized=Ya;N.offset=Lb;N.size=Mb;N.state=mb;N.stride=Oa;N.type=Zb;N.w=Qa;N.x=ub;N.y=vb;N.z=Sa;gc&&m.destroyStream(Dc);B.buffer=Qb;B.divisor=Jc;B.normalized=Rb;B.offset=Rd;B.size=Cc;B.state=ge;B.stride=Lc;B.type=Wc;B.w=ze;B.x=nc;B.y=vc;B.z=hc;rc&&m.destroyStream(Tb);
c.buffer=bd;c.divisor=Yc;c.normalized=kc;c.offset=cc;c.size=Zc;c.state=Sc;c.stride=cd;c.type=yc;c.w=hd;c.x=qd;c.y=Ed;c.z=oe;Ad&&m.destroyStream(ie);U.buffer=Dd;U.divisor=Fd;U.normalized=Qf;U.offset=ke;U.size=te;U.state=le;U.stride=je;U.type=he;U.w=ue;U.x=ee;U.y=me;U.z=Mc;ve&&m.destroyStream(pe);Z.buffer=we;Z.divisor=Ge;Z.normalized=Ie;Z.offset=Je;Z.size=Ke;Z.state=He;Z.stride=Nd;Z.type=Zd;Z.w=ce;Z.x=fe;Z.y=Le;Z.z=Jd;De&&m.destroyStream(Me);y.buffer=gf;y.divisor=lf;y.normalized=df;y.offset=hf;y.size=
jf;y.state=kf;y.stride=rf;y.type=mf;y.w=sf;y.x=Bf;y.y=Cf;y.z=Qe;nf&&m.destroyStream(of);D.buffer=Jf;D.divisor=Kf;D.normalized=Lf;D.offset=tf;D.size=Rf;D.state=Hf;D.stride=uf;D.type=dg;D.w=Sf;D.x=Tf;D.y=qg;D.z=ef;Mf&&m.destroyStream(Nf);b.buffer=rg;b.divisor=sg;b.normalized=tg;b.offset=ug;b.size=vg;b.state=wg;b.stride=xg;b.type=yg;b.w=zg;b.x=Ag;b.y=Bg;b.z=ff;Of&&m.destroyStream(Pf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;
a.z=Ng;na.vert=Og;na.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb){var Ta,v,m,K,ua,Ba,dd,Hb,ia,Q,sa,Fa,na,Aa,Ea,la,Y,ta,Ia,Da,hb,ea,ba,$b,Ga,ac,Sb,Ma,Gd,xe,Wd,ze,Ad,Rd,oe,ie,Ed,rd,ge;Ta=d.attributes;
v=d.buffer;m=d.context;K=d.current;ua=d.draw;Ba=d.elements;dd=d.extensions;Hb=d.framebuffer;ia=d.gl;Q=d.isBufferArgs;sa=d.next;Fa=d.shader;na=d.uniforms;Aa=d.vao;Ea=sa.blend_color;la=K.blend_color;Y=sa.blend_equation;ta=K.blend_equation;Ia=sa.blend_func;Da=K.blend_func;hb=sa.colorMask;ea=K.colorMask;ba=sa.depth_range;$b=K.depth_range;Ga=sa.polygonOffset_offset;ac=K.polygonOffset_offset;Sb=sa.sample_coverage;Ma=K.sample_coverage;Gd=sa.scissor_box;xe=K.scissor_box;Wd=sa.stencil_func;ze=K.stencil_func;
Ad=sa.stencil_opBack;Rd=K.stencil_opBack;oe=sa.stencil_opFront;ie=K.stencil_opFront;Ed=sa.viewport;rd=K.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var e,c,f,h,l,p;e=Hb.next;e!==Hb.cur&&(e?ia.bindFramebuffer(36160,e.framebuffer):ia.bindFramebuffer(36160,null),Hb.cur=e);if(K.dirty){var n,d,g,x,y,t,w,Fa,na,E,J,D,u,k,C,H,B,L,F,I,U,Ea,N,O,ha,Z,W,da,Ia,$a,Hc,yb,cb,Nb;n=sa.dither;n!==K.dither&&(n?ia.enable(3024):ia.disable(3024),
K.dither=n);d=Y[0];g=Y[1];if(d!==ta[0]||g!==ta[1])ia.blendEquationSeparate(d,g),ta[0]=d,ta[1]=g;x=sa.depth_func;x!==K.depth_func&&(ia.depthFunc(x),K.depth_func=x);y=ba[0];t=ba[1];if(y!==$b[0]||t!==$b[1])ia.depthRange(y,t),$b[0]=y,$b[1]=t;w=sa.depth_mask;w!==K.depth_mask&&(ia.depthMask(w),K.depth_mask=w);Fa=hb[0];na=hb[1];E=hb[2];J=hb[3];if(Fa!==ea[0]||na!==ea[1]||E!==ea[2]||J!==ea[3])ia.colorMask(Fa,na,E,J),ea[0]=Fa,ea[1]=na,ea[2]=E,ea[3]=J;D=sa.cull_enable;D!==K.cull_enable&&(D?ia.enable(2884):ia.disable(2884),
K.cull_enable=D);u=sa.cull_face;u!==K.cull_face&&(ia.cullFace(u),K.cull_face=u);k=sa.frontFace;k!==K.frontFace&&(ia.frontFace(k),K.frontFace=k);C=sa.lineWidth;C!==K.lineWidth&&(ia.lineWidth(C),K.lineWidth=C);H=sa.polygonOffset_enable;H!==K.polygonOffset_enable&&(H?ia.enable(32823):ia.disable(32823),K.polygonOffset_enable=H);B=Ga[0];L=Ga[1];if(B!==ac[0]||L!==ac[1])ia.polygonOffset(B,L),ac[0]=B,ac[1]=L;F=sa.sample_alpha;F!==K.sample_alpha&&(F?ia.enable(32926):ia.disable(32926),K.sample_alpha=F);I=sa.sample_enable;
I!==K.sample_enable&&(I?ia.enable(32928):ia.disable(32928),K.sample_enable=I);U=Sb[0];Ea=Sb[1];if(U!==Ma[0]||Ea!==Ma[1])ia.sampleCoverage(U,Ea),Ma[0]=U,Ma[1]=Ea;N=sa.stencil_mask;N!==K.stencil_mask&&(ia.stencilMask(N),K.stencil_mask=N);O=Wd[0];ha=Wd[1];Z=Wd[2];if(O!==ze[0]||ha!==ze[1]||Z!==ze[2])ia.stencilFunc(O,ha,Z),ze[0]=O,ze[1]=ha,ze[2]=Z;W=oe[0];da=oe[1];Ia=oe[2];$a=oe[3];if(W!==ie[0]||da!==ie[1]||Ia!==ie[2]||$a!==ie[3])ia.stencilOpSeparate(W,da,Ia,$a),ie[0]=W,ie[1]=da,ie[2]=Ia,ie[3]=$a;Hc=Ad[0];
yb=Ad[1];cb=Ad[2];Nb=Ad[3];if(Hc!==Rd[0]||yb!==Rd[1]||cb!==Rd[2]||Nb!==Rd[3])ia.stencilOpSeparate(Hc,yb,cb,Nb),Rd[0]=Hc,Rd[1]=yb,Rd[2]=cb,Rd[3]=Nb}ia.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ia.enable(3042);K.blend_enable=!0;ia.blendFuncSeparate(770,771,773,1);Da[0]=770;Da[1]=771;Da[2]=773;Da[3]=1;ia.disable(2929);K.depth_enable=!1;ia.enable(3089);K.scissor_enable=!0;ia.disable(2960);K.stencil_enable=!1;if(c=K.profile)f=performance.now(),V.count+=b;ia.useProgram(va.program);h=dd.angle_instanced_arrays;
var ab;Aa.setVAO(null);ia.uniform1i(G.location,!1);ia.uniform1i(ra.location,M.bind());ab=ua.instances;for(l=0;l<b;++l){p=a[l];var ob,Va,Gd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ed,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,pf,se,id,qf,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,
me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,We,Vd,ae,Xe,gf,lf,df,hf,jf,kf,rf,mf,sf,Bf,Cf,Qe,Ee,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf;ob=p.viewport;Va=ob.x|0;Gd=ob.y|0;Ib="width"in ob?ob.width|0:m.framebufferWidth-Va;Jb="height"in ob?ob.height|0:m.framebufferHeight-Gd;qc=m.viewportWidth;m.viewportWidth=Ib;Ob=m.viewportHeight;m.viewportHeight=Jb;ia.viewport(Va,Gd,Ib,Jb);rd[0]=Va;rd[1]=Gd;rd[2]=Ib;rd[3]=Jb;kb=
p.viewport;Gb=kb.x|0;Db=kb.y|0;wb="width"in kb?kb.width|0:m.framebufferWidth-Gb;ib="height"in kb?kb.height|0:m.framebufferHeight-Db;ia.scissor(Gb,Db,wb,ib);xe[0]=Gb;xe[1]=Db;xe[2]=wb;xe[3]=ib;Yb=z.call(this,m,p,l);Pb=!1;qb=null;Ua=0;Ub=!1;bc=zb=0;jb=1;pb=0;Ha=5126;gb=eb=Ja=rb=0;Q(Yb)?(Pb=!0,qb=v.createStream(34962,Yb),Ha=qb.dtype):(qb=v.getBuffer(Yb))?Ha=qb.dtype:"constant"in Yb?(jb=2,"number"===typeof Yb.constant?(Ja=Yb.constant,eb=gb=rb=0):(Ja=0<Yb.constant.length?Yb.constant[0]:0,eb=1<Yb.constant.length?
Yb.constant[1]:0,gb=2<Yb.constant.length?Yb.constant[2]:0,rb=3<Yb.constant.length?Yb.constant[3]:0)):(qb=Q(Yb.buffer)?v.createStream(34962,Yb.buffer):v.getBuffer(Yb.buffer),Ha="type"in Yb?ge[Yb.type]:qb.dtype,Ub=!!Yb.normalized,bc=Yb.size|0,zb=Yb.offset|0,pb=Yb.stride|0,Ua=Yb.divisor|0);Ka=xa.location;lb=Ta[Ka];if(1===jb){lb.buffer||ia.enableVertexAttribArray(Ka);Wa=bc||1;if(lb.type!==Ha||lb.size!==Wa||lb.buffer!==qb||lb.normalized!==Ub||lb.offset!==zb||lb.stride!==pb)ia.bindBuffer(34962,qb.buffer),
ia.vertexAttribPointer(Ka,Wa,Ha,Ub,pb,zb),lb.type=Ha,lb.size=Wa,lb.buffer=qb,lb.normalized=Ub,lb.offset=zb,lb.stride=pb;lb.divisor!==Ua&&(h.vertexAttribDivisorANGLE(Ka,Ua),lb.divisor=Ua)}else if(lb.buffer&&(ia.disableVertexAttribArray(Ka),lb.buffer=null),lb.x!==Ja||lb.y!==eb||lb.z!==gb||lb.w!==rb)ia.vertexAttrib4f(Ka,Ja,eb,gb,rb),lb.x=Ja,lb.y=eb,lb.z=gb,lb.w=rb;tb=ja.call(this,m,p,l);sb=!1;Pa=null;Ac=0;Ra=!1;Eb=Kb=0;Na=1;xd=0;Ya=5126;Oa=mb=Mb=Lb=0;Q(tb)?(sb=!0,Pa=v.createStream(34962,tb),Ya=Pa.dtype):
(Pa=v.getBuffer(tb))?Ya=Pa.dtype:"constant"in tb?(Na=2,"number"===typeof tb.constant?(Mb=tb.constant,mb=Oa=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,mb=1<tb.constant.length?tb.constant[1]:0,Oa=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Pa=Q(tb.buffer)?v.createStream(34962,tb.buffer):v.getBuffer(tb.buffer),Ya="type"in tb?ge[tb.type]:Pa.dtype,Ra=!!tb.normalized,Eb=tb.size|0,Kb=tb.offset|0,xd=tb.stride|0,Ac=tb.divisor|0);Zb=oa.location;Qa=Ta[Zb];if(1===Na){Qa.buffer||
ia.enableVertexAttribArray(Zb);ub=Eb||1;if(Qa.type!==Ya||Qa.size!==ub||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Kb||Qa.stride!==xd)ia.bindBuffer(34962,Pa.buffer),ia.vertexAttribPointer(Zb,ub,Ya,Ra,xd,Kb),Qa.type=Ya,Qa.size=ub,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Kb,Qa.stride=xd;Qa.divisor!==Ac&&(h.vertexAttribDivisorANGLE(Zb,Ac),Qa.divisor=Ac)}else if(Qa.buffer&&(ia.disableVertexAttribArray(Zb),Qa.buffer=null),Qa.x!==Mb||Qa.y!==mb||Qa.z!==Oa||Qa.w!==Lb)ia.vertexAttrib4f(Zb,Mb,mb,Oa,Lb),
Qa.x=Mb,Qa.y=mb,Qa.z=Oa,Qa.w=Lb;vb=aa.call(this,m,p,l);Sa=!1;nb=null;gc=0;Dc=!1;bb=uc=0;jc=1;nd=0;Xa=5126;Vb=Za=Ab=Uc=0;Q(vb)?(Sa=!0,nb=v.createStream(34962,vb),Xa=nb.dtype):(nb=v.getBuffer(vb))?Xa=nb.dtype:"constant"in vb?(jc=2,"number"===typeof vb.constant?(Ab=vb.constant,Za=Vb=Uc=0):(Ab=0<vb.constant.length?vb.constant[0]:0,Za=1<vb.constant.length?vb.constant[1]:0,Vb=2<vb.constant.length?vb.constant[2]:0,Uc=3<vb.constant.length?vb.constant[3]:0)):(nb=Q(vb.buffer)?v.createStream(34962,vb.buffer):
v.getBuffer(vb.buffer),Xa="type"in vb?ge[vb.type]:nb.dtype,Dc=!!vb.normalized,bb=vb.size|0,uc=vb.offset|0,nd=vb.stride|0,gc=vb.divisor|0);sc=La.location;Wb=Ta[sc];if(1===jc){Wb.buffer||ia.enableVertexAttribArray(sc);Qb=bb||1;if(Wb.type!==Xa||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==Dc||Wb.offset!==uc||Wb.stride!==nd)ia.bindBuffer(34962,nb.buffer),ia.vertexAttribPointer(sc,Qb,Xa,Dc,nd,uc),Wb.type=Xa,Wb.size=Qb,Wb.buffer=nb,Wb.normalized=Dc,Wb.offset=uc,Wb.stride=nd;Wb.divisor!==gc&&(h.vertexAttribDivisorANGLE(sc,
gc),Wb.divisor=gc)}else if(Wb.buffer&&(ia.disableVertexAttribArray(sc),Wb.buffer=null),Wb.x!==Ab||Wb.y!==Za||Wb.z!==Vb||Wb.w!==Uc)ia.vertexAttrib4f(sc,Ab,Za,Vb,Uc),Wb.x=Ab,Wb.y=Za,Wb.z=Vb,Wb.w=Uc;Jc=X.call(this,m,p,l);Rb=!1;Ed=null;Cc=0;ud=!1;Wc=Lc=0;vd=1;nc=0;vc=5126;Tb=rc=db=hc=0;Q(Jc)?(Rb=!0,Ed=v.createStream(34962,Jc),vc=Ed.dtype):(Ed=v.getBuffer(Jc))?vc=Ed.dtype:"constant"in Jc?(vd=2,"number"===typeof Jc.constant?(db=Jc.constant,rc=Tb=hc=0):(db=0<Jc.constant.length?Jc.constant[0]:0,rc=1<Jc.constant.length?
Jc.constant[1]:0,Tb=2<Jc.constant.length?Jc.constant[2]:0,hc=3<Jc.constant.length?Jc.constant[3]:0)):(Ed=Q(Jc.buffer)?v.createStream(34962,Jc.buffer):v.getBuffer(Jc.buffer),vc="type"in Jc?ge[Jc.type]:Ed.dtype,ud=!!Jc.normalized,Wc=Jc.size|0,Lc=Jc.offset|0,nc=Jc.stride|0,Cc=Jc.divisor|0);Xb=fb.location;dc=Ta[Xb];if(1===vd){dc.buffer||ia.enableVertexAttribArray(Xb);ic=Wc||1;if(dc.type!==vc||dc.size!==ic||dc.buffer!==Ed||dc.normalized!==ud||dc.offset!==Lc||dc.stride!==nc)ia.bindBuffer(34962,Ed.buffer),
ia.vertexAttribPointer(Xb,ic,vc,ud,nc,Lc),dc.type=vc,dc.size=ic,dc.buffer=Ed,dc.normalized=ud,dc.offset=Lc,dc.stride=nc;dc.divisor!==Cc&&(h.vertexAttribDivisorANGLE(Xb,Cc),dc.divisor=Cc)}else if(dc.buffer&&(ia.disableVertexAttribArray(Xb),dc.buffer=null),dc.x!==db||dc.y!==rc||dc.z!==Tb||dc.w!==hc)ia.vertexAttrib4f(Xb,db,rc,Tb,hc),dc.x=db,dc.y=rc,dc.z=Tb,dc.w=hc;xc=fa.call(this,m,p,l);zc=!1;ad=null;Oc=0;Pc=!1;Xc=Qc=0;ld=1;bd=0;Yc=5126;Sc=Zc=cc=kc=0;Q(xc)?(zc=!0,ad=v.createStream(34962,xc),Yc=ad.dtype):
(ad=v.getBuffer(xc))?Yc=ad.dtype:"constant"in xc?(ld=2,"number"===typeof xc.constant?(cc=xc.constant,Zc=Sc=kc=0):(cc=0<xc.constant.length?xc.constant[0]:0,Zc=1<xc.constant.length?xc.constant[1]:0,Sc=2<xc.constant.length?xc.constant[2]:0,kc=3<xc.constant.length?xc.constant[3]:0)):(ad=Q(xc.buffer)?v.createStream(34962,xc.buffer):v.getBuffer(xc.buffer),Yc="type"in xc?ge[xc.type]:ad.dtype,Pc=!!xc.normalized,Xc=xc.size|0,Qc=xc.offset|0,bd=xc.stride|0,Oc=xc.divisor|0);cd=Ca.location;yc=Ta[cd];if(1===ld){yc.buffer||
ia.enableVertexAttribArray(cd);hd=Xc||1;if(yc.type!==Yc||yc.size!==hd||yc.buffer!==ad||yc.normalized!==Pc||yc.offset!==Qc||yc.stride!==bd)ia.bindBuffer(34962,ad.buffer),ia.vertexAttribPointer(cd,hd,Yc,Pc,bd,Qc),yc.type=Yc,yc.size=hd,yc.buffer=ad,yc.normalized=Pc,yc.offset=Qc,yc.stride=bd;yc.divisor!==Oc&&(h.vertexAttribDivisorANGLE(cd,Oc),yc.divisor=Oc)}else if(yc.buffer&&(ia.disableVertexAttribArray(cd),yc.buffer=null),yc.x!==cc||yc.y!==Zc||yc.z!==Sc||yc.w!==kc)ia.vertexAttrib4f(cd,cc,Zc,Sc,kc),
yc.x=cc,yc.y=Zc,yc.z=Sc,yc.w=kc;qd=R.call(this,m,p,l);pf=!1;se=null;id=0;qf=!1;Yd=Od=0;de=1;Pd=0;Kd=5126;wd=Rc=od=Id=0;Q(qd)?(pf=!0,se=v.createStream(34962,qd),Kd=se.dtype):(se=v.getBuffer(qd))?Kd=se.dtype:"constant"in qd?(de=2,"number"===typeof qd.constant?(od=qd.constant,Rc=wd=Id=0):(od=0<qd.constant.length?qd.constant[0]:0,Rc=1<qd.constant.length?qd.constant[1]:0,wd=2<qd.constant.length?qd.constant[2]:0,Id=3<qd.constant.length?qd.constant[3]:0)):(se=Q(qd.buffer)?v.createStream(34962,qd.buffer):
v.getBuffer(qd.buffer),Kd="type"in qd?ge[qd.type]:se.dtype,qf=!!qd.normalized,Yd=qd.size|0,Od=qd.offset|0,Pd=qd.stride|0,id=qd.divisor|0);td=qa.location;jd=Ta[td];if(1===de){jd.buffer||ia.enableVertexAttribArray(td);yd=Yd||1;if(jd.type!==Kd||jd.size!==yd||jd.buffer!==se||jd.normalized!==qf||jd.offset!==Od||jd.stride!==Pd)ia.bindBuffer(34962,se.buffer),ia.vertexAttribPointer(td,yd,Kd,qf,Pd,Od),jd.type=Kd,jd.size=yd,jd.buffer=se,jd.normalized=qf,jd.offset=Od,jd.stride=Pd;jd.divisor!==id&&(h.vertexAttribDivisorANGLE(td,
id),jd.divisor=id)}else if(jd.buffer&&(ia.disableVertexAttribArray(td),jd.buffer=null),jd.x!==od||jd.y!==Rc||jd.z!==wd||jd.w!==Id)ia.vertexAttrib4f(td,od,Rc,wd,Id),jd.x=od,jd.y=Rc,jd.z=wd,jd.w=Id;Dd=T.call(this,m,p,l);Fd=!1;Fe=null;ke=0;te=!1;je=le=0;he=1;ue=0;ee=5126;ve=fd=Mc=me=0;Q(Dd)?(Fd=!0,Fe=v.createStream(34962,Dd),ee=Fe.dtype):(Fe=v.getBuffer(Dd))?ee=Fe.dtype:"constant"in Dd?(he=2,"number"===typeof Dd.constant?(Mc=Dd.constant,fd=ve=me=0):(Mc=0<Dd.constant.length?Dd.constant[0]:0,fd=1<Dd.constant.length?
Dd.constant[1]:0,ve=2<Dd.constant.length?Dd.constant[2]:0,me=3<Dd.constant.length?Dd.constant[3]:0)):(Fe=Q(Dd.buffer)?v.createStream(34962,Dd.buffer):v.getBuffer(Dd.buffer),ee="type"in Dd?ge[Dd.type]:Fe.dtype,te=!!Dd.normalized,je=Dd.size|0,le=Dd.offset|0,ue=Dd.stride|0,ke=Dd.divisor|0);pe=r.location;Md=Ta[pe];if(1===he){Md.buffer||ia.enableVertexAttribArray(pe);Qd=je||4;if(Md.type!==ee||Md.size!==Qd||Md.buffer!==Fe||Md.normalized!==te||Md.offset!==le||Md.stride!==ue)ia.bindBuffer(34962,Fe.buffer),
ia.vertexAttribPointer(pe,Qd,ee,te,ue,le),Md.type=ee,Md.size=Qd,Md.buffer=Fe,Md.normalized=te,Md.offset=le,Md.stride=ue;Md.divisor!==ke&&(h.vertexAttribDivisorANGLE(pe,ke),Md.divisor=ke)}else if(Md.buffer&&(ia.disableVertexAttribArray(pe),Md.buffer=null),Md.x!==Mc||Md.y!==fd||Md.z!==ve||Md.w!==me)ia.vertexAttrib4f(pe,Mc,fd,ve,me),Md.x=Mc,Md.y=fd,Md.z=ve,Md.w=me;Sd=A.call(this,m,p,l);Td=!1;ne=null;ye=0;Be=!1;Se=qe=0;Te=1;Oe=0;we=5126;Ke=Je=Ie=Ge=0;Q(Sd)?(Td=!0,ne=v.createStream(34962,Sd),we=ne.dtype):
(ne=v.getBuffer(Sd))?we=ne.dtype:"constant"in Sd?(Te=2,"number"===typeof Sd.constant?(Ie=Sd.constant,Je=Ke=Ge=0):(Ie=0<Sd.constant.length?Sd.constant[0]:0,Je=1<Sd.constant.length?Sd.constant[1]:0,Ke=2<Sd.constant.length?Sd.constant[2]:0,Ge=3<Sd.constant.length?Sd.constant[3]:0)):(ne=Q(Sd.buffer)?v.createStream(34962,Sd.buffer):v.getBuffer(Sd.buffer),we="type"in Sd?ge[Sd.type]:ne.dtype,Be=!!Sd.normalized,Se=Sd.size|0,qe=Sd.offset|0,Oe=Sd.stride|0,ye=Sd.divisor|0);He=wa.location;Nd=Ta[He];if(1===Te){Nd.buffer||
ia.enableVertexAttribArray(He);Zd=Se||4;if(Nd.type!==we||Nd.size!==Zd||Nd.buffer!==ne||Nd.normalized!==Be||Nd.offset!==qe||Nd.stride!==Oe)ia.bindBuffer(34962,ne.buffer),ia.vertexAttribPointer(He,Zd,we,Be,Oe,qe),Nd.type=we,Nd.size=Zd,Nd.buffer=ne,Nd.normalized=Be,Nd.offset=qe,Nd.stride=Oe;Nd.divisor!==ye&&(h.vertexAttribDivisorANGLE(He,ye),Nd.divisor=ye)}else if(Nd.buffer&&(ia.disableVertexAttribArray(He),Nd.buffer=null),Nd.x!==Ie||Nd.y!==Je||Nd.z!==Ke||Nd.w!==Ge)ia.vertexAttrib4f(He,Ie,Je,Ke,Ge),
Nd.x=Ie,Nd.y=Je,Nd.z=Ke,Nd.w=Ge;ce=q.call(this,m,p,l);fe=!1;Le=null;Jd=0;Ud=!1;Me=De=0;af=1;$e=0;Ue=5126;Ve=Ye=Ze=Pe=0;Q(ce)?(fe=!0,Le=v.createStream(34962,ce),Ue=Le.dtype):(Le=v.getBuffer(ce))?Ue=Le.dtype:"constant"in ce?(af=2,"number"===typeof ce.constant?(Ze=ce.constant,Ye=Ve=Pe=0):(Ze=0<ce.constant.length?ce.constant[0]:0,Ye=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,Pe=3<ce.constant.length?ce.constant[3]:0)):(Le=Q(ce.buffer)?v.createStream(34962,ce.buffer):
v.getBuffer(ce.buffer),Ue="type"in ce?ge[ce.type]:Le.dtype,Ud=!!ce.normalized,Me=ce.size|0,De=ce.offset|0,$e=ce.stride|0,Jd=ce.divisor|0);We=ca.location;Vd=Ta[We];if(1===af){Vd.buffer||ia.enableVertexAttribArray(We);ae=Me||1;if(Vd.type!==Ue||Vd.size!==ae||Vd.buffer!==Le||Vd.normalized!==Ud||Vd.offset!==De||Vd.stride!==$e)ia.bindBuffer(34962,Le.buffer),ia.vertexAttribPointer(We,ae,Ue,Ud,$e,De),Vd.type=Ue,Vd.size=ae,Vd.buffer=Le,Vd.normalized=Ud,Vd.offset=De,Vd.stride=$e;Vd.divisor!==Jd&&(h.vertexAttribDivisorANGLE(We,
Jd),Vd.divisor=Jd)}else if(Vd.buffer&&(ia.disableVertexAttribArray(We),Vd.buffer=null),Vd.x!==Ze||Vd.y!==Ye||Vd.z!==Ve||Vd.w!==Pe)ia.vertexAttrib4f(We,Ze,Ye,Ve,Pe),Vd.x=Ze,Vd.y=Ye,Vd.z=Ve,Vd.w=Pe;Xe=m.pixelRatio;l&&gf===Xe||(gf=Xe,ia.uniform1f(za.location,Xe));lf=P.call(this,m,p,l);df=lf[0];jf=lf[1];l&&hf===df&&kf===jf||(hf=df,kf=jf,ia.uniform2f(ma.location,df,jf));rf=p.scale;mf=rf[0];Bf=rf[1];l&&sf===mf&&Cf===Bf||(sf=mf,Cf=Bf,ia.uniform2f(ya.location,mf,Bf));Qe=p.scaleFract;Ee=Qe[0];of=Qe[1];l&&
nf===Ee&&Df===of||(nf=Ee,Df=of,ia.uniform2f(ga.location,Ee,of));Gf=p.translate;Af=Gf[0];Ff=Gf[1];l&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ia.uniform2f(ka.location,Af,Ff));xf=p.translateFract;vf=xf[0];zf=xf[1];l&&yf===vf&&If===zf||(yf=vf,If=zf,ia.uniform2f(pa.location,vf,zf));Jf=p.opacity;l&&Kf===Jf||(Kf=Jf,ia.uniform1f(S.location,Jf));Lf=p.elements;tf=null;(tf=(Rf=Q(Lf))?Ba.createStream(Lf):Ba.getElements(Lf))&&ia.bindBuffer(34963,tf.buffer.buffer);Hf=p.offset;if(uf=p.count)0<ab?tf?h.drawElementsInstancedANGLE(0,
uf,tf.type,Hf<<(tf.type-5121>>1),ab):h.drawArraysInstancedANGLE(0,Hf,uf,ab):0>ab&&(tf?ia.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ia.drawArrays(0,Hf,uf)),m.viewportWidth=qc,m.viewportHeight=Ob,Pb&&v.destroyStream(qb),sb&&v.destroyStream(Pa),Sa&&v.destroyStream(nb),Rb&&v.destroyStream(Ed),zc&&v.destroyStream(ad),pf&&v.destroyStream(se),Fd&&v.destroyStream(Fe),Td&&v.destroyStream(ne),fe&&v.destroyStream(Le),Rf&&Ba.destroyStream(tf)}M.unbind();K.dirty=!0;Aa.setVAO(null);c&&(V.cpuTime+=performance.now()-
f)},draw:function(a){var b,e,c,h,q,p,d,x,z,y,t,w,Fa,T,A,R,na,E,D,P,M,B,L,U,Ea,N,ha,Z,X,W,fa,da,ja,va,aa,gd,Ia,Hc,yb,cb,Nb,ab,ob,Va,Gd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,Ed,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,pf,se,id,qf,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc,
fd,ve,pe,Md,Qd,Sd,Td,ne,ye,Be,qe,Se;b=Hb.next;b!==Hb.cur&&(b?ia.bindFramebuffer(36160,b.framebuffer):ia.bindFramebuffer(36160,null),Hb.cur=b);if(K.dirty){var Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,We,Vd,ae,Xe,gf,lf,df,hf,jf,kf;Te=sa.dither;Te!==K.dither&&(Te?ia.enable(3024):ia.disable(3024),K.dither=Te);Oe=Y[0];we=Y[1];if(Oe!==ta[0]||we!==ta[1])ia.blendEquationSeparate(Oe,we),ta[0]=Oe,ta[1]=we;Ge=sa.depth_func;Ge!==K.depth_func&&(ia.depthFunc(Ge),K.depth_func=Ge);
Ie=ba[0];Je=ba[1];if(Ie!==$b[0]||Je!==$b[1])ia.depthRange(Ie,Je),$b[0]=Ie,$b[1]=Je;Ke=sa.depth_mask;Ke!==K.depth_mask&&(ia.depthMask(Ke),K.depth_mask=Ke);He=hb[0];Nd=hb[1];Zd=hb[2];ce=hb[3];if(He!==ea[0]||Nd!==ea[1]||Zd!==ea[2]||ce!==ea[3])ia.colorMask(He,Nd,Zd,ce),ea[0]=He,ea[1]=Nd,ea[2]=Zd,ea[3]=ce;fe=sa.cull_enable;fe!==K.cull_enable&&(fe?ia.enable(2884):ia.disable(2884),K.cull_enable=fe);Le=sa.cull_face;Le!==K.cull_face&&(ia.cullFace(Le),K.cull_face=Le);Jd=sa.frontFace;Jd!==K.frontFace&&(ia.frontFace(Jd),
K.frontFace=Jd);Ud=sa.lineWidth;Ud!==K.lineWidth&&(ia.lineWidth(Ud),K.lineWidth=Ud);De=sa.polygonOffset_enable;De!==K.polygonOffset_enable&&(De?ia.enable(32823):ia.disable(32823),K.polygonOffset_enable=De);Me=Ga[0];af=Ga[1];if(Me!==ac[0]||af!==ac[1])ia.polygonOffset(Me,af),ac[0]=Me,ac[1]=af;$e=sa.sample_alpha;$e!==K.sample_alpha&&($e?ia.enable(32926):ia.disable(32926),K.sample_alpha=$e);Ue=sa.sample_enable;Ue!==K.sample_enable&&(Ue?ia.enable(32928):ia.disable(32928),K.sample_enable=Ue);Pe=Sb[0];Ze=
Sb[1];if(Pe!==Ma[0]||Ze!==Ma[1])ia.sampleCoverage(Pe,Ze),Ma[0]=Pe,Ma[1]=Ze;Ye=sa.stencil_mask;Ye!==K.stencil_mask&&(ia.stencilMask(Ye),K.stencil_mask=Ye);Ve=Wd[0];We=Wd[1];Vd=Wd[2];if(Ve!==ze[0]||We!==ze[1]||Vd!==ze[2])ia.stencilFunc(Ve,We,Vd),ze[0]=Ve,ze[1]=We,ze[2]=Vd;ae=oe[0];Xe=oe[1];gf=oe[2];lf=oe[3];if(ae!==ie[0]||Xe!==ie[1]||gf!==ie[2]||lf!==ie[3])ia.stencilOpSeparate(ae,Xe,gf,lf),ie[0]=ae,ie[1]=Xe,ie[2]=gf,ie[3]=lf;df=Ad[0];hf=Ad[1];jf=Ad[2];kf=Ad[3];if(df!==Rd[0]||hf!==Rd[1]||jf!==Rd[2]||
kf!==Rd[3])ia.stencilOpSeparate(df,hf,jf,kf),Rd[0]=df,Rd[1]=hf,Rd[2]=jf,Rd[3]=kf}e=a.viewport;c=e.x|0;h=e.y|0;q="width"in e?e.width|0:m.framebufferWidth-c;p="height"in e?e.height|0:m.framebufferHeight-h;d=m.viewportWidth;m.viewportWidth=q;x=m.viewportHeight;m.viewportHeight=p;ia.viewport(c,h,q,p);rd[0]=c;rd[1]=h;rd[2]=q;rd[3]=p;ia.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ia.enable(3042);K.blend_enable=!0;ia.blendFuncSeparate(770,771,773,1);Da[0]=770;Da[1]=771;Da[2]=773;Da[3]=1;ia.disable(2929);
K.depth_enable=!1;z=a.viewport;y=z.x|0;t=z.y|0;w="width"in z?z.width|0:m.framebufferWidth-y;Fa="height"in z?z.height|0:m.framebufferHeight-t;ia.scissor(y,t,w,Fa);xe[0]=y;xe[1]=t;xe[2]=w;xe[3]=Fa;ia.enable(3089);K.scissor_enable=!0;ia.disable(2960);K.stencil_enable=!1;if(T=K.profile)A=performance.now(),V.count++;ia.useProgram(H.program);R=dd.angle_instanced_arrays;Aa.setVAO(null);na=J.call(this,m,a,0);E=!1;D=null;P=0;M=!1;L=B=0;U=1;Ea=0;N=5126;W=X=Z=ha=0;Q(na)?(E=!0,D=v.createStream(34962,na),N=D.dtype):
(D=v.getBuffer(na))?N=D.dtype:"constant"in na?(U=2,"number"===typeof na.constant?(Z=na.constant,X=W=ha=0):(Z=0<na.constant.length?na.constant[0]:0,X=1<na.constant.length?na.constant[1]:0,W=2<na.constant.length?na.constant[2]:0,ha=3<na.constant.length?na.constant[3]:0)):(D=Q(na.buffer)?v.createStream(34962,na.buffer):v.getBuffer(na.buffer),N="type"in na?ge[na.type]:D.dtype,M=!!na.normalized,L=na.size|0,B=na.offset|0,Ea=na.stride|0,P=na.divisor|0);fa=xa.location;da=Ta[fa];if(1===U){da.buffer||ia.enableVertexAttribArray(fa);
ja=L||1;if(da.type!==N||da.size!==ja||da.buffer!==D||da.normalized!==M||da.offset!==B||da.stride!==Ea)ia.bindBuffer(34962,D.buffer),ia.vertexAttribPointer(fa,ja,N,M,Ea,B),da.type=N,da.size=ja,da.buffer=D,da.normalized=M,da.offset=B,da.stride=Ea;da.divisor!==P&&(R.vertexAttribDivisorANGLE(fa,P),da.divisor=P)}else if(da.buffer&&(ia.disableVertexAttribArray(fa),da.buffer=null),da.x!==Z||da.y!==X||da.z!==W||da.w!==ha)ia.vertexAttrib4f(fa,Z,X,W,ha),da.x=Z,da.y=X,da.z=W,da.w=ha;va=g.call(this,m,a,0);aa=
!1;gd=null;Ia=0;Hc=!1;cb=yb=0;Nb=1;ab=0;ob=5126;Jb=Ib=Gd=Va=0;Q(va)?(aa=!0,gd=v.createStream(34962,va),ob=gd.dtype):(gd=v.getBuffer(va))?ob=gd.dtype:"constant"in va?(Nb=2,"number"===typeof va.constant?(Gd=va.constant,Ib=Jb=Va=0):(Gd=0<va.constant.length?va.constant[0]:0,Ib=1<va.constant.length?va.constant[1]:0,Jb=2<va.constant.length?va.constant[2]:0,Va=3<va.constant.length?va.constant[3]:0)):(gd=Q(va.buffer)?v.createStream(34962,va.buffer):v.getBuffer(va.buffer),ob="type"in va?ge[va.type]:gd.dtype,
Hc=!!va.normalized,cb=va.size|0,yb=va.offset|0,ab=va.stride|0,Ia=va.divisor|0);qc=oa.location;Ob=Ta[qc];if(1===Nb){Ob.buffer||ia.enableVertexAttribArray(qc);kb=cb||1;if(Ob.type!==ob||Ob.size!==kb||Ob.buffer!==gd||Ob.normalized!==Hc||Ob.offset!==yb||Ob.stride!==ab)ia.bindBuffer(34962,gd.buffer),ia.vertexAttribPointer(qc,kb,ob,Hc,ab,yb),Ob.type=ob,Ob.size=kb,Ob.buffer=gd,Ob.normalized=Hc,Ob.offset=yb,Ob.stride=ab;Ob.divisor!==Ia&&(R.vertexAttribDivisorANGLE(qc,Ia),Ob.divisor=Ia)}else if(Ob.buffer&&
(ia.disableVertexAttribArray(qc),Ob.buffer=null),Ob.x!==Gd||Ob.y!==Ib||Ob.z!==Jb||Ob.w!==Va)ia.vertexAttrib4f(qc,Gd,Ib,Jb,Va),Ob.x=Gd,Ob.y=Ib,Ob.z=Jb,Ob.w=Va;Gb=l.call(this,m,a,0);Db=!1;wb=null;ib=0;Yb=!1;qb=Pb=0;Ua=1;Ub=0;zb=5126;Ha=pb=jb=bc=0;Q(Gb)?(Db=!0,wb=v.createStream(34962,Gb),zb=wb.dtype):(wb=v.getBuffer(Gb))?zb=wb.dtype:"constant"in Gb?(Ua=2,"number"===typeof Gb.constant?(jb=Gb.constant,pb=Ha=bc=0):(jb=0<Gb.constant.length?Gb.constant[0]:0,pb=1<Gb.constant.length?Gb.constant[1]:0,Ha=2<Gb.constant.length?
Gb.constant[2]:0,bc=3<Gb.constant.length?Gb.constant[3]:0)):(wb=Q(Gb.buffer)?v.createStream(34962,Gb.buffer):v.getBuffer(Gb.buffer),zb="type"in Gb?ge[Gb.type]:wb.dtype,Yb=!!Gb.normalized,qb=Gb.size|0,Pb=Gb.offset|0,Ub=Gb.stride|0,ib=Gb.divisor|0);rb=La.location;Ja=Ta[rb];if(1===Ua){Ja.buffer||ia.enableVertexAttribArray(rb);eb=qb||1;if(Ja.type!==zb||Ja.size!==eb||Ja.buffer!==wb||Ja.normalized!==Yb||Ja.offset!==Pb||Ja.stride!==Ub)ia.bindBuffer(34962,wb.buffer),ia.vertexAttribPointer(rb,eb,zb,Yb,Ub,
Pb),Ja.type=zb,Ja.size=eb,Ja.buffer=wb,Ja.normalized=Yb,Ja.offset=Pb,Ja.stride=Ub;Ja.divisor!==ib&&(R.vertexAttribDivisorANGLE(rb,ib),Ja.divisor=ib)}else if(Ja.buffer&&(ia.disableVertexAttribArray(rb),Ja.buffer=null),Ja.x!==jb||Ja.y!==pb||Ja.z!==Ha||Ja.w!==bc)ia.vertexAttrib4f(rb,jb,pb,Ha,bc),Ja.x=jb,Ja.y=pb,Ja.z=Ha,Ja.w=bc;gb=n.call(this,m,a,0);Ka=!1;lb=null;Wa=0;tb=!1;Pa=sb=0;Ac=1;Ra=0;Kb=5126;Ya=Ed=Na=Eb=0;Q(gb)?(Ka=!0,lb=v.createStream(34962,gb),Kb=lb.dtype):(lb=v.getBuffer(gb))?Kb=lb.dtype:"constant"in
gb?(Ac=2,"number"===typeof gb.constant?(Na=gb.constant,Ed=Ya=Eb=0):(Na=0<gb.constant.length?gb.constant[0]:0,Ed=1<gb.constant.length?gb.constant[1]:0,Ya=2<gb.constant.length?gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(lb=Q(gb.buffer)?v.createStream(34962,gb.buffer):v.getBuffer(gb.buffer),Kb="type"in gb?ge[gb.type]:lb.dtype,tb=!!gb.normalized,Pa=gb.size|0,sb=gb.offset|0,Ra=gb.stride|0,Wa=gb.divisor|0);Lb=fb.location;Mb=Ta[Lb];if(1===Ac){Mb.buffer||ia.enableVertexAttribArray(Lb);mb=
Pa||1;if(Mb.type!==Kb||Mb.size!==mb||Mb.buffer!==lb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Ra)ia.bindBuffer(34962,lb.buffer),ia.vertexAttribPointer(Lb,mb,Kb,tb,Ra,sb),Mb.type=Kb,Mb.size=mb,Mb.buffer=lb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Ra;Mb.divisor!==Wa&&(R.vertexAttribDivisorANGLE(Lb,Wa),Mb.divisor=Wa)}else if(Mb.buffer&&(ia.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Na||Mb.y!==Ed||Mb.z!==Ya||Mb.w!==Eb)ia.vertexAttrib4f(Lb,Na,Ed,Ya,Eb),Mb.x=Na,Mb.y=Ed,Mb.z=Ya,Mb.w=Eb;Oa=
f.call(this,m,a,0);Zb=!1;Qa=null;ub=0;vb=!1;nb=Sa=0;gc=1;Dc=0;uc=5126;Xa=nd=jc=bb=0;Q(Oa)?(Zb=!0,Qa=v.createStream(34962,Oa),uc=Qa.dtype):(Qa=v.getBuffer(Oa))?uc=Qa.dtype:"constant"in Oa?(gc=2,"number"===typeof Oa.constant?(jc=Oa.constant,nd=Xa=bb=0):(jc=0<Oa.constant.length?Oa.constant[0]:0,nd=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=Q(Oa.buffer)?v.createStream(34962,Oa.buffer):v.getBuffer(Oa.buffer),uc="type"in
Oa?ge[Oa.type]:Qa.dtype,vb=!!Oa.normalized,nb=Oa.size|0,Sa=Oa.offset|0,Dc=Oa.stride|0,ub=Oa.divisor|0);Uc=Ca.location;Ab=Ta[Uc];if(1===gc){Ab.buffer||ia.enableVertexAttribArray(Uc);Za=nb||1;if(Ab.type!==uc||Ab.size!==Za||Ab.buffer!==Qa||Ab.normalized!==vb||Ab.offset!==Sa||Ab.stride!==Dc)ia.bindBuffer(34962,Qa.buffer),ia.vertexAttribPointer(Uc,Za,uc,vb,Dc,Sa),Ab.type=uc,Ab.size=Za,Ab.buffer=Qa,Ab.normalized=vb,Ab.offset=Sa,Ab.stride=Dc;Ab.divisor!==ub&&(R.vertexAttribDivisorANGLE(Uc,ub),Ab.divisor=
ub)}else if(Ab.buffer&&(ia.disableVertexAttribArray(Uc),Ab.buffer=null),Ab.x!==jc||Ab.y!==nd||Ab.z!==Xa||Ab.w!==bb)ia.vertexAttrib4f(Uc,jc,nd,Xa,bb),Ab.x=jc,Ab.y=nd,Ab.z=Xa,Ab.w=bb;Vb=F.call(this,m,a,0);sc=!1;Wb=null;Qb=0;Jc=!1;Ld=Rb=0;Cc=1;ud=0;Lc=5126;vc=nc=vd=Wc=0;Q(Vb)?(sc=!0,Wb=v.createStream(34962,Vb),Lc=Wb.dtype):(Wb=v.getBuffer(Vb))?Lc=Wb.dtype:"constant"in Vb?(Cc=2,"number"===typeof Vb.constant?(vd=Vb.constant,nc=vc=Wc=0):(vd=0<Vb.constant.length?Vb.constant[0]:0,nc=1<Vb.constant.length?
Vb.constant[1]:0,vc=2<Vb.constant.length?Vb.constant[2]:0,Wc=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=Q(Vb.buffer)?v.createStream(34962,Vb.buffer):v.getBuffer(Vb.buffer),Lc="type"in Vb?ge[Vb.type]:Wb.dtype,Jc=!!Vb.normalized,Ld=Vb.size|0,Rb=Vb.offset|0,ud=Vb.stride|0,Qb=Vb.divisor|0);hc=qa.location;db=Ta[hc];if(1===Cc){db.buffer||ia.enableVertexAttribArray(hc);rc=Ld||1;if(db.type!==Lc||db.size!==rc||db.buffer!==Wb||db.normalized!==Jc||db.offset!==Rb||db.stride!==ud)ia.bindBuffer(34962,Wb.buffer),
ia.vertexAttribPointer(hc,rc,Lc,Jc,ud,Rb),db.type=Lc,db.size=rc,db.buffer=Wb,db.normalized=Jc,db.offset=Rb,db.stride=ud;db.divisor!==Qb&&(R.vertexAttribDivisorANGLE(hc,Qb),db.divisor=Qb)}else if(db.buffer&&(ia.disableVertexAttribArray(hc),db.buffer=null),db.x!==vd||db.y!==nc||db.z!==vc||db.w!==Wc)ia.vertexAttrib4f(hc,vd,nc,vc,Wc),db.x=vd,db.y=nc,db.z=vc,db.w=Wc;Tb=C.call(this,m,a,0);Xb=!1;dc=null;ic=0;xc=!1;ad=zc=0;Oc=1;Pc=0;Qc=5126;Yc=bd=ld=Xc=0;Q(Tb)?(Xb=!0,dc=v.createStream(34962,Tb),Qc=dc.dtype):
(dc=v.getBuffer(Tb))?Qc=dc.dtype:"constant"in Tb?(Oc=2,"number"===typeof Tb.constant?(ld=Tb.constant,bd=Yc=Xc=0):(ld=0<Tb.constant.length?Tb.constant[0]:0,bd=1<Tb.constant.length?Tb.constant[1]:0,Yc=2<Tb.constant.length?Tb.constant[2]:0,Xc=3<Tb.constant.length?Tb.constant[3]:0)):(dc=Q(Tb.buffer)?v.createStream(34962,Tb.buffer):v.getBuffer(Tb.buffer),Qc="type"in Tb?ge[Tb.type]:dc.dtype,xc=!!Tb.normalized,ad=Tb.size|0,zc=Tb.offset|0,Pc=Tb.stride|0,ic=Tb.divisor|0);kc=r.location;cc=Ta[kc];if(1===Oc){cc.buffer||
ia.enableVertexAttribArray(kc);Zc=ad||4;if(cc.type!==Qc||cc.size!==Zc||cc.buffer!==dc||cc.normalized!==xc||cc.offset!==zc||cc.stride!==Pc)ia.bindBuffer(34962,dc.buffer),ia.vertexAttribPointer(kc,Zc,Qc,xc,Pc,zc),cc.type=Qc,cc.size=Zc,cc.buffer=dc,cc.normalized=xc,cc.offset=zc,cc.stride=Pc;cc.divisor!==ic&&(R.vertexAttribDivisorANGLE(kc,ic),cc.divisor=ic)}else if(cc.buffer&&(ia.disableVertexAttribArray(kc),cc.buffer=null),cc.x!==ld||cc.y!==bd||cc.z!==Yc||cc.w!==Xc)ia.vertexAttrib4f(kc,ld,bd,Yc,Xc),
cc.x=ld,cc.y=bd,cc.z=Yc,cc.w=Xc;Sc=O.call(this,m,a,0);cd=!1;yc=null;hd=0;qd=!1;se=pf=0;id=1;qf=0;Od=5126;Kd=Pd=de=Yd=0;Q(Sc)?(cd=!0,yc=v.createStream(34962,Sc),Od=yc.dtype):(yc=v.getBuffer(Sc))?Od=yc.dtype:"constant"in Sc?(id=2,"number"===typeof Sc.constant?(de=Sc.constant,Pd=Kd=Yd=0):(de=0<Sc.constant.length?Sc.constant[0]:0,Pd=1<Sc.constant.length?Sc.constant[1]:0,Kd=2<Sc.constant.length?Sc.constant[2]:0,Yd=3<Sc.constant.length?Sc.constant[3]:0)):(yc=Q(Sc.buffer)?v.createStream(34962,Sc.buffer):
v.getBuffer(Sc.buffer),Od="type"in Sc?ge[Sc.type]:yc.dtype,qd=!!Sc.normalized,se=Sc.size|0,pf=Sc.offset|0,qf=Sc.stride|0,hd=Sc.divisor|0);Id=wa.location;od=Ta[Id];if(1===id){od.buffer||ia.enableVertexAttribArray(Id);Rc=se||4;if(od.type!==Od||od.size!==Rc||od.buffer!==yc||od.normalized!==qd||od.offset!==pf||od.stride!==qf)ia.bindBuffer(34962,yc.buffer),ia.vertexAttribPointer(Id,Rc,Od,qd,qf,pf),od.type=Od,od.size=Rc,od.buffer=yc,od.normalized=qd,od.offset=pf,od.stride=qf;od.divisor!==hd&&(R.vertexAttribDivisorANGLE(Id,
hd),od.divisor=hd)}else if(od.buffer&&(ia.disableVertexAttribArray(Id),od.buffer=null),od.x!==de||od.y!==Pd||od.z!==Kd||od.w!==Yd)ia.vertexAttrib4f(Id,de,Pd,Kd,Yd),od.x=de,od.y=Pd,od.z=Kd,od.w=Yd;wd=I.call(this,m,a,0);td=!1;jd=null;yd=0;Dd=!1;Fe=Fd=0;ke=1;te=0;le=5126;ee=ue=he=je=0;Q(wd)?(td=!0,jd=v.createStream(34962,wd),le=jd.dtype):(jd=v.getBuffer(wd))?le=jd.dtype:"constant"in wd?(ke=2,"number"===typeof wd.constant?(he=wd.constant,ue=ee=je=0):(he=0<wd.constant.length?wd.constant[0]:0,ue=1<wd.constant.length?
wd.constant[1]:0,ee=2<wd.constant.length?wd.constant[2]:0,je=3<wd.constant.length?wd.constant[3]:0)):(jd=Q(wd.buffer)?v.createStream(34962,wd.buffer):v.getBuffer(wd.buffer),le="type"in wd?ge[wd.type]:jd.dtype,Dd=!!wd.normalized,Fe=wd.size|0,Fd=wd.offset|0,te=wd.stride|0,yd=wd.divisor|0);me=ca.location;Mc=Ta[me];if(1===ke){Mc.buffer||ia.enableVertexAttribArray(me);fd=Fe||1;if(Mc.type!==le||Mc.size!==fd||Mc.buffer!==jd||Mc.normalized!==Dd||Mc.offset!==Fd||Mc.stride!==te)ia.bindBuffer(34962,jd.buffer),
ia.vertexAttribPointer(me,fd,le,Dd,te,Fd),Mc.type=le,Mc.size=fd,Mc.buffer=jd,Mc.normalized=Dd,Mc.offset=Fd,Mc.stride=te;Mc.divisor!==yd&&(R.vertexAttribDivisorANGLE(me,yd),Mc.divisor=yd)}else if(Mc.buffer&&(ia.disableVertexAttribArray(me),Mc.buffer=null),Mc.x!==he||Mc.y!==ue||Mc.z!==ee||Mc.w!==je)ia.vertexAttrib4f(me,he,ue,ee,je),Mc.x=he,Mc.y=ue,Mc.z=ee,Mc.w=je;ia.uniform1i(G.location,!1);ia.uniform1f(za.location,m.pixelRatio);ve=k.call(this,m,a,0);ia.uniform2f(ma.location,ve[0],ve[1]);pe=a.scale;
ia.uniform2f(ya.location,pe[0],pe[1]);Md=a.scaleFract;ia.uniform2f(ga.location,Md[0],Md[1]);Qd=a.translate;ia.uniform2f(ka.location,Qd[0],Qd[1]);Sd=a.translateFract;ia.uniform2f(pa.location,Sd[0],Sd[1]);ia.uniform1f(S.location,a.opacity);ia.uniform1i(ra.location,u.bind());Td=a.elements;ne=null;(ne=(ye=Q(Td))?Ba.createStream(Td):Ba.getElements(Td))&&ia.bindBuffer(34963,ne.buffer.buffer);Be=a.offset;if(qe=a.count)Se=ua.instances,0<Se?ne?R.drawElementsInstancedANGLE(0,qe,ne.type,Be<<(ne.type-5121>>1),
Se):R.drawArraysInstancedANGLE(0,Be,qe,Se):0>Se&&(ne?ia.drawElements(0,qe,ne.type,Be<<(ne.type-5121>>1)):ia.drawArrays(0,Be,qe)),K.dirty=!0,Aa.setVAO(null),m.viewportWidth=d,m.viewportHeight=x,T&&(V.cpuTime+=performance.now()-A),E&&v.destroyStream(D),aa&&v.destroyStream(gd),Db&&v.destroyStream(wb),Ka&&v.destroyStream(lb),Zb&&v.destroyStream(Qa),sc&&v.destroyStream(Wb),Xb&&v.destroyStream(dc),cd&&v.destroyStream(yc),td&&v.destroyStream(jd),u.unbind(),ye&&Ba.destroyStream(ne)},scope:function(f,l,r){var q,
n,d,g,z,oa,G,T,R,A,S,ga,J,ia,P,u,fb,k,la,La,M,C,Y,H,ca,F,Aa,I,ya,wa,ra,O,ea,ka,X,fa,Ta,pa,Ca,ma,xa,va,ja,qa,ta,za,Hb,aa,Ga,Da,gd,dd,hb,Sb,ba,Ua,$b,ac,Wd,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,rd,Ra,Kb,Eb,Na,Ma,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,zd,uc,bb,jc,Rd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,ze,Cc,xe,Lc,Wc,ie,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd,qd,oe,Ad,id,Qf,Od,Yd,de,Pd,Kd,Id,od,Rc,wd,td,jd,yd,Dd,Fd,Fe,ke,te,le,je,he,ue,ee,me,Mc,fd,ve,pe,Md,Qd,Sd,Td,ne,ye,
Be,qe,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Nd,Zd,ce,fe,Le,Jd,Ud,De,Me,af,$e,Ue,Pe,Ze,Ye,Ve,We,Vd,ae,Xe,gf,lf,df,hf,jf,kf,rf,mf,sf,Bf,Cf,Qe,Ee,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ef,bf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ff,cf,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;q=f.viewport;n=q.x|0;d=q.y|0;g="width"in q?q.width|0:m.framebufferWidth-n;z="height"in q?q.height|0:m.framebufferHeight-d;oa=m.viewportWidth;
m.viewportWidth=g;G=m.viewportHeight;m.viewportHeight=z;T=Ed[0];Ed[0]=n;R=Ed[1];Ed[1]=d;A=Ed[2];Ed[2]=g;S=Ed[3];Ed[3]=z;ga=Ea[0];Ea[0]=0;J=Ea[1];Ea[1]=0;ia=Ea[2];Ea[2]=0;P=Ea[3];Ea[3]=1;u=sa.blend_enable;sa.blend_enable=!0;fb=Ia[0];Ia[0]=770;k=Ia[1];Ia[1]=771;la=Ia[2];Ia[2]=773;La=Ia[3];Ia[3]=1;M=sa.depth_enable;sa.depth_enable=!1;C=f.viewport;Y=C.x|0;H=C.y|0;ca="width"in C?C.width|0:m.framebufferWidth-Y;F="height"in C?C.height|0:m.framebufferHeight-H;Aa=Gd[0];Gd[0]=Y;I=Gd[1];Gd[1]=H;ya=Gd[2];Gd[2]=
ca;wa=Gd[3];Gd[3]=F;ra=sa.scissor_enable;sa.scissor_enable=!0;O=sa.stencil_enable;sa.stencil_enable=!1;if(ea=K.profile)ka=performance.now(),V.count++;X=f.elements;fa=null;fa=(Ta=Q(X))?Ba.createStream(X):Ba.getElements(X);pa=ua.elements;ua.elements=fa;Ca=f.offset;ma=ua.offset;ua.offset=Ca;xa=f.count;va=ua.count;ua.count=xa;ja=ua.primitive;ua.primitive=0;qa=na[45];na[45]=!1;ta=f.markerTexture;za=na[48];na[48]=ta;Hb=f.opacity;aa=na[10];na[10]=Hb;Ga=L.call(this,m,f,r);Da=na[46];na[46]=Ga;gd=na[47];na[47]=
W;dd=m.pixelRatio;hb=na[34];na[34]=dd;Sb=f.scale;ba=na[6];na[6]=Sb;Ua=f.scaleFract;$b=na[7];na[7]=Ua;ac=f.translate;Wd=na[8];na[8]=ac;jb=f.translateFract;pb=na[9];na[9]=jb;Ha=t.call(this,m,f,r);rb=!1;Ja=null;eb=0;gb=!1;lb=Ka=0;Wa=1;tb=0;sb=5126;Kb=Ra=rd=Pa=0;Q(Ha)?(rb=!0,Ja=v.createStream(34962,Ha),sb=Ja.dtype):(Ja=v.getBuffer(Ha))?sb=Ja.dtype:"constant"in Ha?(Wa=2,"number"===typeof Ha.constant?(rd=Ha.constant,Ra=Kb=Pa=0):(rd=0<Ha.constant.length?Ha.constant[0]:0,Ra=1<Ha.constant.length?Ha.constant[1]:
0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Pa=3<Ha.constant.length?Ha.constant[3]:0)):(Ja=Q(Ha.buffer)?v.createStream(34962,Ha.buffer):v.getBuffer(Ha.buffer),sb="type"in Ha?ge[Ha.type]:Ja.dtype,gb=!!Ha.normalized,lb=Ha.size|0,Ka=Ha.offset|0,tb=Ha.stride|0,eb=Ha.divisor|0);Eb=N.buffer;N.buffer=Ja;Na=N.divisor;N.divisor=eb;Ma=N.normalized;N.normalized=gb;Ya=N.offset;N.offset=Ka;Lb=N.size;N.size=lb;Mb=N.state;N.state=Wa;mb=N.stride;N.stride=tb;Oa=N.type;N.type=sb;Zb=N.w;N.w=Pa;Qa=N.x;N.x=rd;ub=N.y;N.y=
Ra;vb=N.z;N.z=Kb;Sa=w.call(this,m,f,r);nb=!1;gc=null;zd=0;uc=!1;jc=bb=0;Rd=1;Xa=0;Uc=5126;sc=Vb=Za=Ab=0;Q(Sa)?(nb=!0,gc=v.createStream(34962,Sa),Uc=gc.dtype):(gc=v.getBuffer(Sa))?Uc=gc.dtype:"constant"in Sa?(Rd=2,"number"===typeof Sa.constant?(Za=Sa.constant,Vb=sc=Ab=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(gc=Q(Sa.buffer)?v.createStream(34962,Sa.buffer):v.getBuffer(Sa.buffer),
Uc="type"in Sa?ge[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,zd=Sa.divisor|0);Wb=B.buffer;B.buffer=gc;Qb=B.divisor;B.divisor=zd;Jc=B.normalized;B.normalized=uc;Rb=B.offset;B.offset=bb;ze=B.size;B.size=jc;Cc=B.state;B.state=Rd;xe=B.stride;B.stride=Xa;Lc=B.type;B.type=Uc;Wc=B.w;B.w=Ab;ie=B.x;B.x=Za;nc=B.y;B.y=Vb;vc=B.z;B.z=sc;hc=ha.call(this,m,f,r);db=!1;rc=null;Tb=0;Xb=!1;ic=dc=0;xc=1;zc=0;ad=5126;Xc=Qc=Pc=Oc=0;Q(hc)?(db=!0,rc=v.createStream(34962,hc),ad=rc.dtype):
(rc=v.getBuffer(hc))?ad=rc.dtype:"constant"in hc?(xc=2,"number"===typeof hc.constant?(Pc=hc.constant,Qc=Xc=Oc=0):(Pc=0<hc.constant.length?hc.constant[0]:0,Qc=1<hc.constant.length?hc.constant[1]:0,Xc=2<hc.constant.length?hc.constant[2]:0,Oc=3<hc.constant.length?hc.constant[3]:0)):(rc=Q(hc.buffer)?v.createStream(34962,hc.buffer):v.getBuffer(hc.buffer),ad="type"in hc?ge[hc.type]:rc.dtype,Xb=!!hc.normalized,ic=hc.size|0,dc=hc.offset|0,zc=hc.stride|0,Tb=hc.divisor|0);ld=c.buffer;c.buffer=rc;bd=c.divisor;
c.divisor=Tb;Yc=c.normalized;c.normalized=Xb;kc=c.offset;c.offset=dc;cc=c.size;c.size=ic;Zc=c.state;c.state=xc;Sc=c.stride;c.stride=zc;cd=c.type;c.type=ad;yc=c.w;c.w=Oc;hd=c.x;c.x=Pc;qd=c.y;c.y=Qc;oe=c.z;c.z=Xc;Ad=e.call(this,m,f,r);id=!1;Qf=null;Od=0;Yd=!1;Pd=de=0;Kd=1;Id=0;od=5126;jd=td=wd=Rc=0;Q(Ad)?(id=!0,Qf=v.createStream(34962,Ad),od=Qf.dtype):(Qf=v.getBuffer(Ad))?od=Qf.dtype:"constant"in Ad?(Kd=2,"number"===typeof Ad.constant?(wd=Ad.constant,td=jd=Rc=0):(wd=0<Ad.constant.length?Ad.constant[0]:
0,td=1<Ad.constant.length?Ad.constant[1]:0,jd=2<Ad.constant.length?Ad.constant[2]:0,Rc=3<Ad.constant.length?Ad.constant[3]:0)):(Qf=Q(Ad.buffer)?v.createStream(34962,Ad.buffer):v.getBuffer(Ad.buffer),od="type"in Ad?ge[Ad.type]:Qf.dtype,Yd=!!Ad.normalized,Pd=Ad.size|0,de=Ad.offset|0,Id=Ad.stride|0,Od=Ad.divisor|0);yd=U.buffer;U.buffer=Qf;Dd=U.divisor;U.divisor=Od;Fd=U.normalized;U.normalized=Yd;Fe=U.offset;U.offset=de;ke=U.size;U.size=Pd;te=U.state;U.state=Kd;le=U.stride;U.stride=Id;je=U.type;U.type=
od;he=U.w;U.w=Rc;ue=U.x;U.x=wd;ee=U.y;U.y=td;me=U.z;U.z=jd;Mc=p.call(this,m,f,r);fd=!1;ve=null;pe=0;Md=!1;Sd=Qd=0;Td=1;ne=0;ye=5126;Te=Se=qe=Be=0;Q(Mc)?(fd=!0,ve=v.createStream(34962,Mc),ye=ve.dtype):(ve=v.getBuffer(Mc))?ye=ve.dtype:"constant"in Mc?(Td=2,"number"===typeof Mc.constant?(qe=Mc.constant,Se=Te=Be=0):(qe=0<Mc.constant.length?Mc.constant[0]:0,Se=1<Mc.constant.length?Mc.constant[1]:0,Te=2<Mc.constant.length?Mc.constant[2]:0,Be=3<Mc.constant.length?Mc.constant[3]:0)):(ve=Q(Mc.buffer)?v.createStream(34962,
Mc.buffer):v.getBuffer(Mc.buffer),ye="type"in Mc?ge[Mc.type]:ve.dtype,Md=!!Mc.normalized,Sd=Mc.size|0,Qd=Mc.offset|0,ne=Mc.stride|0,pe=Mc.divisor|0);Oe=Z.buffer;Z.buffer=ve;we=Z.divisor;Z.divisor=pe;Ge=Z.normalized;Z.normalized=Md;Ie=Z.offset;Z.offset=Qd;Je=Z.size;Z.size=Sd;Ke=Z.state;Z.state=Td;He=Z.stride;Z.stride=ne;Nd=Z.type;Z.type=ye;Zd=Z.w;Z.w=Be;ce=Z.x;Z.x=qe;fe=Z.y;Z.y=Se;Le=Z.z;Z.z=Te;Jd=h.call(this,m,f,r);Ud=!1;De=null;Me=0;af=!1;Ue=$e=0;Pe=1;Ze=0;Ye=5126;ae=Vd=We=Ve=0;Q(Jd)?(Ud=!0,De=v.createStream(34962,
Jd),Ye=De.dtype):(De=v.getBuffer(Jd))?Ye=De.dtype:"constant"in Jd?(Pe=2,"number"===typeof Jd.constant?(We=Jd.constant,Vd=ae=Ve=0):(We=0<Jd.constant.length?Jd.constant[0]:0,Vd=1<Jd.constant.length?Jd.constant[1]:0,ae=2<Jd.constant.length?Jd.constant[2]:0,Ve=3<Jd.constant.length?Jd.constant[3]:0)):(De=Q(Jd.buffer)?v.createStream(34962,Jd.buffer):v.getBuffer(Jd.buffer),Ye="type"in Jd?ge[Jd.type]:De.dtype,af=!!Jd.normalized,Ue=Jd.size|0,$e=Jd.offset|0,Ze=Jd.stride|0,Me=Jd.divisor|0);Xe=y.buffer;y.buffer=
De;gf=y.divisor;y.divisor=Me;lf=y.normalized;y.normalized=af;df=y.offset;y.offset=$e;hf=y.size;y.size=Ue;jf=y.state;y.state=Pe;kf=y.stride;y.stride=Ze;rf=y.type;y.type=Ye;mf=y.w;y.w=Ve;sf=y.x;y.x=We;Bf=y.y;y.y=Vd;Cf=y.z;y.z=ae;Qe=da.call(this,m,f,r);Ee=!1;nf=null;of=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;Q(Qe)?(Ee=!0,nf=v.createStream(34962,Qe),wf=nf.dtype):(nf=v.getBuffer(Qe))?wf=nf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?
Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(nf=Q(Qe.buffer)?v.createStream(34962,Qe.buffer):v.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:nf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,of=Qe.divisor|0);If=D.buffer;D.buffer=nf;Jf=D.divisor;D.divisor=of;Kf=D.normalized;D.normalized=Df;Lf=D.offset;D.offset=Gf;tf=D.size;D.size=Af;Rf=D.state;D.state=Ef;Hf=D.stride;D.stride=Ff;
uf=D.type;D.type=wf;dg=D.w;D.w=xf;Sf=D.x;D.x=vf;Tf=D.y;D.y=yf;qg=D.z;D.z=zf;ef=E.call(this,m,f,r);bf=!1;Mf=null;Nf=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;Q(ef)?(bf=!0,Mf=v.createStream(34962,ef),Wf=Mf.dtype):(Mf=v.getBuffer(ef))?Wf=Mf.dtype:"constant"in ef?(hg=2,"number"===typeof ef.constant?(Xf=ef.constant,Yf=Zf=Uf=0):(Xf=0<ef.constant.length?ef.constant[0]:0,Yf=1<ef.constant.length?ef.constant[1]:0,Zf=2<ef.constant.length?ef.constant[2]:0,Uf=3<ef.constant.length?ef.constant[3]:0)):(Mf=
Q(ef.buffer)?v.createStream(34962,ef.buffer):v.getBuffer(ef.buffer),Wf="type"in ef?ge[ef.type]:Mf.dtype,eg=!!ef.normalized,gg=ef.size|0,fg=ef.offset|0,ig=ef.stride|0,Nf=ef.divisor|0);jg=b.buffer;b.buffer=Mf;rg=b.divisor;b.divisor=Nf;sg=b.normalized;b.normalized=eg;tg=b.offset;b.offset=fg;ug=b.size;b.size=gg;vg=b.state;b.state=hg;wg=b.stride;b.stride=ig;xg=b.type;b.type=Wf;yg=b.w;b.w=Uf;zg=b.x;b.x=Xf;Ag=b.y;b.y=Yf;Bg=b.z;b.z=Zf;ff=x.call(this,m,f,r);cf=!1;Of=null;Pf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;
cg=bg=ag=Vf=0;Q(ff)?(cf=!0,Of=v.createStream(34962,ff),$f=Of.dtype):(Of=v.getBuffer(ff))?$f=Of.dtype:"constant"in ff?(ng=2,"number"===typeof ff.constant?(ag=ff.constant,bg=cg=Vf=0):(ag=0<ff.constant.length?ff.constant[0]:0,bg=1<ff.constant.length?ff.constant[1]:0,cg=2<ff.constant.length?ff.constant[2]:0,Vf=3<ff.constant.length?ff.constant[3]:0)):(Of=Q(ff.buffer)?v.createStream(34962,ff.buffer):v.getBuffer(ff.buffer),$f="type"in ff?ge[ff.type]:Of.dtype,kg=!!ff.normalized,mg=ff.size|0,lg=ff.offset|
0,og=ff.stride|0,Pf=ff.divisor|0);pg=a.buffer;a.buffer=Of;Cg=a.divisor;a.divisor=Pf;Dg=a.normalized;a.normalized=kg;Eg=a.offset;a.offset=lg;Fg=a.size;a.size=mg;Gg=a.state;a.state=ng;Hg=a.stride;a.stride=og;Ig=a.type;a.type=$f;Jg=a.w;a.w=Vf;Kg=a.x;a.x=ag;Lg=a.y;a.y=bg;Mg=a.z;a.z=cg;Ng=Fa.vert;Fa.vert=59;Og=Fa.frag;Fa.frag=58;K.dirty=!0;l(m,f,r);m.viewportWidth=oa;m.viewportHeight=G;Ed[0]=T;Ed[1]=R;Ed[2]=A;Ed[3]=S;Ea[0]=ga;Ea[1]=J;Ea[2]=ia;Ea[3]=P;sa.blend_enable=u;Ia[0]=fb;Ia[1]=k;Ia[2]=la;Ia[3]=La;
sa.depth_enable=M;Gd[0]=Aa;Gd[1]=I;Gd[2]=ya;Gd[3]=wa;sa.scissor_enable=ra;sa.stencil_enable=O;ea&&(V.cpuTime+=performance.now()-ka);Ta&&Ba.destroyStream(fa);ua.elements=pa;ua.offset=ma;ua.count=va;ua.primitive=ja;na[45]=qa;na[48]=za;na[10]=aa;na[46]=Da;na[47]=gd;na[34]=hb;na[6]=ba;na[7]=$b;na[8]=Wd;na[9]=pb;rb&&v.destroyStream(Ja);N.buffer=Eb;N.divisor=Na;N.normalized=Ma;N.offset=Ya;N.size=Lb;N.state=Mb;N.stride=mb;N.type=Oa;N.w=Zb;N.x=Qa;N.y=ub;N.z=vb;nb&&v.destroyStream(gc);B.buffer=Wb;B.divisor=
Qb;B.normalized=Jc;B.offset=Rb;B.size=ze;B.state=Cc;B.stride=xe;B.type=Lc;B.w=Wc;B.x=ie;B.y=nc;B.z=vc;db&&v.destroyStream(rc);c.buffer=ld;c.divisor=bd;c.normalized=Yc;c.offset=kc;c.size=cc;c.state=Zc;c.stride=Sc;c.type=cd;c.w=yc;c.x=hd;c.y=qd;c.z=oe;id&&v.destroyStream(Qf);U.buffer=yd;U.divisor=Dd;U.normalized=Fd;U.offset=Fe;U.size=ke;U.state=te;U.stride=le;U.type=je;U.w=he;U.x=ue;U.y=ee;U.z=me;fd&&v.destroyStream(ve);Z.buffer=Oe;Z.divisor=we;Z.normalized=Ge;Z.offset=Ie;Z.size=Je;Z.state=Ke;Z.stride=
He;Z.type=Nd;Z.w=Zd;Z.x=ce;Z.y=fe;Z.z=Le;Ud&&v.destroyStream(De);y.buffer=Xe;y.divisor=gf;y.normalized=lf;y.offset=df;y.size=hf;y.state=jf;y.stride=kf;y.type=rf;y.w=mf;y.x=sf;y.y=Bf;y.z=Cf;Ee&&v.destroyStream(nf);D.buffer=If;D.divisor=Jf;D.normalized=Kf;D.offset=Lf;D.size=tf;D.state=Rf;D.stride=Hf;D.type=uf;D.w=dg;D.x=Sf;D.y=Tf;D.z=qg;bf&&v.destroyStream(Mf);b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=ug;b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;cf&&v.destroyStream(Of);
a.buffer=pg;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Fa.vert=Ng;Fa.frag=Og;K.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa){var R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,dd,Hb,ia,Q,sa,Fa,na,
Aa,Ea,la,Y;R=d.attributes;T=d.buffer;A=d.context;q=d.current;M=d.draw;P=d.elements;wa=d.extensions;qa=d.framebuffer;r=d.gl;G=d.isBufferArgs;ca=d.next;S=d.shader;ma=d.uniforms;ra=d.vao;za=ca.blend_color;ya=q.blend_color;ga=ca.blend_equation;Ca=q.blend_equation;ka=ca.blend_func;pa=q.blend_func;xa=ca.colorMask;La=q.colorMask;oa=ca.depth_range;fb=q.depth_range;Ta=ca.polygonOffset_offset;v=q.polygonOffset_offset;m=ca.sample_coverage;K=q.sample_coverage;ua=ca.scissor_box;Ba=q.scissor_box;dd=ca.stencil_func;
Hb=q.stencil_func;ia=ca.stencil_opBack;Q=q.stencil_opBack;sa=ca.stencil_opFront;Fa=q.stencil_opFront;na=ca.viewport;Aa=q.viewport;Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(f,l){var n,d,g,t,na,S,J,u,k,C,H,L,F;n=qa.next;n!==qa.cur&&(n?r.bindFramebuffer(36160,n.framebuffer):r.bindFramebuffer(36160,null),qa.cur=n);if(q.dirty){var I,O,ka,W,ma,za,ba,Ma,Ce,Ne,Re,Hd,Ae,re,$d,Xd,Bd,md,
$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec;I=ca.dither;I!==q.dither&&(I?r.enable(3024):r.disable(3024),q.dither=I);O=ga[0];ka=ga[1];if(O!==Ca[0]||ka!==Ca[1])r.blendEquationSeparate(O,ka),Ca[0]=O,Ca[1]=ka;W=ca.depth_func;W!==q.depth_func&&(r.depthFunc(W),q.depth_func=W);ma=oa[0];za=oa[1];if(ma!==fb[0]||za!==fb[1])r.depthRange(ma,za),fb[0]=ma,fb[1]=za;ba=ca.depth_mask;ba!==q.depth_mask&&(r.depthMask(ba),q.depth_mask=ba);Ma=xa[0];Ce=xa[1];Ne=xa[2];Re=xa[3];if(Ma!==La[0]||Ce!==La[1]||
Ne!==La[2]||Re!==La[3])r.colorMask(Ma,Ce,Ne,Re),La[0]=Ma,La[1]=Ce,La[2]=Ne,La[3]=Re;Hd=ca.cull_enable;Hd!==q.cull_enable&&(Hd?r.enable(2884):r.disable(2884),q.cull_enable=Hd);Ae=ca.cull_face;Ae!==q.cull_face&&(r.cullFace(Ae),q.cull_face=Ae);re=ca.frontFace;re!==q.frontFace&&(r.frontFace(re),q.frontFace=re);$d=ca.lineWidth;$d!==q.lineWidth&&(r.lineWidth($d),q.lineWidth=$d);Xd=ca.polygonOffset_enable;Xd!==q.polygonOffset_enable&&(Xd?r.enable(32823):r.disable(32823),q.polygonOffset_enable=Xd);Bd=Ta[0];
md=Ta[1];if(Bd!==v[0]||md!==v[1])r.polygonOffset(Bd,md),v[0]=Bd,v[1]=md;$c=ca.sample_alpha;$c!==q.sample_alpha&&($c?r.enable(32926):r.disable(32926),q.sample_alpha=$c);sd=ca.sample_enable;sd!==q.sample_enable&&(sd?r.enable(32928):r.disable(32928),q.sample_enable=sd);Kc=m[0];pd=m[1];if(Kc!==K[0]||pd!==K[1])r.sampleCoverage(Kc,pd),K[0]=Kc,K[1]=pd;Ec=ca.stencil_mask;Ec!==q.stencil_mask&&(r.stencilMask(Ec),q.stencil_mask=Ec);ed=dd[0];Nc=dd[1];kd=dd[2];if(ed!==Hb[0]||Nc!==Hb[1]||kd!==Hb[2])r.stencilFunc(ed,
Nc,kd),Hb[0]=ed,Hb[1]=Nc,Hb[2]=kd;Bb=sa[0];Fb=sa[1];tc=sa[2];xb=sa[3];if(Bb!==Fa[0]||Fb!==Fa[1]||tc!==Fa[2]||xb!==Fa[3])r.stencilOpSeparate(Bb,Fb,tc,xb),Fa[0]=Bb,Fa[1]=Fb,Fa[2]=tc,Fa[3]=xb;wc=ia[0];Cb=ia[1];Ic=ia[2];lc=ia[3];if(wc!==Q[0]||Cb!==Q[1]||Ic!==Q[2]||lc!==Q[3])r.stencilOpSeparate(wc,Cb,Ic,lc),Q[0]=wc,Q[1]=Cb,Q[2]=Ic,Q[3]=lc;Fc=ca.scissor_enable;Fc!==q.scissor_enable&&(Fc?r.enable(3089):r.disable(3089),q.scissor_enable=Fc);Vc=ua[0];Tc=ua[1];Bc=ua[2];ec=ua[3];if(Vc!==Ba[0]||Tc!==Ba[1]||Bc!==
Ba[2]||ec!==Ba[3])r.scissor(Vc,Tc,Bc,ec),Ba[0]=Vc,Ba[1]=Tc,Ba[2]=Bc,Ba[3]=ec}d=this.viewport;g=d.x|0;t=d.y|0;na="width"in d?d.width|0:A.framebufferWidth-g;S="height"in d?d.height|0:A.framebufferHeight-t;J=A.viewportWidth;A.viewportWidth=na;u=A.viewportHeight;A.viewportHeight=S;r.viewport(g,t,na,S);Aa[0]=g;Aa[1]=t;Aa[2]=na;Aa[3]=S;r.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;r.enable(3042);q.blend_enable=!0;r.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;r.disable(2929);
q.depth_enable=!1;r.disable(2960);q.stencil_enable=!1;if(k=q.profile)C=performance.now(),V.count+=l;r.useProgram(N.program);H=wa.angle_instanced_arrays;var Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb;ra.setVAO(null);Y.buffer=this.sizeBuffer;Gc=!1;oc=null;pc=0;mc=!1;$a=fc=0;Hc=1;yb=0;cb=5126;Va=ob=ab=Nb=0;G(Y)?(Gc=!0,oc=T.createStream(34962,
Y),cb=oc.dtype):(oc=T.getBuffer(Y))?cb=oc.dtype:"constant"in Y?(Hc=2,"number"===typeof Y.constant?(ab=Y.constant,ob=Va=Nb=0):(ab=0<Y.constant.length?Y.constant[0]:0,ob=1<Y.constant.length?Y.constant[1]:0,Va=2<Y.constant.length?Y.constant[2]:0,Nb=3<Y.constant.length?Y.constant[3]:0)):(oc=G(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),cb="type"in Y?Ea[Y.type]:oc.dtype,mc=!!Y.normalized,$a=Y.size|0,fc=Y.offset|0,yb=Y.stride|0,pc=Y.divisor|0);Cd=fa.location;Ib=R[Cd];if(1===Hc){Ib.buffer||
r.enableVertexAttribArray(Cd);Jb=$a||1;if(Ib.type!==cb||Ib.size!==Jb||Ib.buffer!==oc||Ib.normalized!==mc||Ib.offset!==fc||Ib.stride!==yb)r.bindBuffer(34962,oc.buffer),r.vertexAttribPointer(Cd,Jb,cb,mc,yb,fc),Ib.type=cb,Ib.size=Jb,Ib.buffer=oc,Ib.normalized=mc,Ib.offset=fc,Ib.stride=yb;Ib.divisor!==pc&&(H.vertexAttribDivisorANGLE(Cd,pc),Ib.divisor=pc)}else if(Ib.buffer&&(r.disableVertexAttribArray(Cd),Ib.buffer=null),Ib.x!==ab||Ib.y!==ob||Ib.z!==Va||Ib.w!==Nb)r.vertexAttrib4f(Cd,ab,ob,Va,Nb),Ib.x=
ab,Ib.y=ob,Ib.z=Va,Ib.w=Nb;la.buffer=this.sizeBuffer;qc=!1;Ob=null;kb=0;Gb=!1;wb=Db=0;ib=1;Yb=0;Pb=5126;zb=Ub=Ua=qb=0;G(la)?(qc=!0,Ob=T.createStream(34962,la),Pb=Ob.dtype):(Ob=T.getBuffer(la))?Pb=Ob.dtype:"constant"in la?(ib=2,"number"===typeof la.constant?(Ua=la.constant,Ub=zb=qb=0):(Ua=0<la.constant.length?la.constant[0]:0,Ub=1<la.constant.length?la.constant[1]:0,zb=2<la.constant.length?la.constant[2]:0,qb=3<la.constant.length?la.constant[3]:0)):(Ob=G(la.buffer)?T.createStream(34962,la.buffer):
T.getBuffer(la.buffer),Pb="type"in la?Ea[la.type]:Ob.dtype,Gb=!!la.normalized,wb=la.size|0,Db=la.offset|0,Yb=la.stride|0,kb=la.divisor|0);bc=D.location;jb=R[bc];if(1===ib){jb.buffer||r.enableVertexAttribArray(bc);pb=wb||1;if(jb.type!==Pb||jb.size!==pb||jb.buffer!==Ob||jb.normalized!==Gb||jb.offset!==Db||jb.stride!==Yb)r.bindBuffer(34962,Ob.buffer),r.vertexAttribPointer(bc,pb,Pb,Gb,Yb,Db),jb.type=Pb,jb.size=pb,jb.buffer=Ob,jb.normalized=Gb,jb.offset=Db,jb.stride=Yb;jb.divisor!==kb&&(H.vertexAttribDivisorANGLE(bc,
kb),jb.divisor=kb)}else if(jb.buffer&&(r.disableVertexAttribArray(bc),jb.buffer=null),jb.x!==Ua||jb.y!==Ub||jb.z!==zb||jb.w!==qb)r.vertexAttrib4f(bc,Ua,Ub,zb,qb),jb.x=Ua,jb.y=Ub,jb.z=zb,jb.w=qb;Ha=this.charBuffer;rb=!1;Ja=null;eb=0;gb=!1;lb=Ka=0;Wa=1;tb=0;sb=5126;Kb=Ra=Ac=Pa=0;G(Ha)?(rb=!0,Ja=T.createStream(34962,Ha),sb=Ja.dtype):(Ja=T.getBuffer(Ha))?sb=Ja.dtype:"constant"in Ha?(Wa=2,"number"===typeof Ha.constant?(Ac=Ha.constant,Ra=Kb=Pa=0):(Ac=0<Ha.constant.length?Ha.constant[0]:0,Ra=1<Ha.constant.length?
Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Pa=3<Ha.constant.length?Ha.constant[3]:0)):(Ja=G(Ha.buffer)?T.createStream(34962,Ha.buffer):T.getBuffer(Ha.buffer),sb="type"in Ha?Ea[Ha.type]:Ja.dtype,gb=!!Ha.normalized,lb=Ha.size|0,Ka=Ha.offset|0,tb=Ha.stride|0,eb=Ha.divisor|0);Eb=da.location;Na=R[Eb];if(1===Wa){Na.buffer||r.enableVertexAttribArray(Eb);xd=lb||1;if(Na.type!==sb||Na.size!==xd||Na.buffer!==Ja||Na.normalized!==gb||Na.offset!==Ka||Na.stride!==tb)r.bindBuffer(34962,Ja.buffer),
r.vertexAttribPointer(Eb,xd,sb,gb,tb,Ka),Na.type=sb,Na.size=xd,Na.buffer=Ja,Na.normalized=gb,Na.offset=Ka,Na.stride=tb;Na.divisor!==eb&&(H.vertexAttribDivisorANGLE(Eb,eb),Na.divisor=eb)}else if(Na.buffer&&(r.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Ac||Na.y!==Ra||Na.z!==Kb||Na.w!==Pa)r.vertexAttrib4f(Eb,Ac,Ra,Kb,Pa),Na.x=Ac,Na.y=Ra,Na.z=Kb,Na.w=Pa;Ya=this.position;Lb=!1;Mb=null;mb=0;Oa=!1;Qa=Zb=0;ub=1;vb=0;Sa=5126;uc=Dc=gc=nb=0;G(Ya)?(Lb=!0,Mb=T.createStream(34962,Ya),Sa=Mb.dtype):(Mb=
T.getBuffer(Ya))?Sa=Mb.dtype:"constant"in Ya?(ub=2,"number"===typeof Ya.constant?(gc=Ya.constant,Dc=uc=nb=0):(gc=0<Ya.constant.length?Ya.constant[0]:0,Dc=1<Ya.constant.length?Ya.constant[1]:0,uc=2<Ya.constant.length?Ya.constant[2]:0,nb=3<Ya.constant.length?Ya.constant[3]:0)):(Mb=G(Ya.buffer)?T.createStream(34962,Ya.buffer):T.getBuffer(Ya.buffer),Sa="type"in Ya?Ea[Ya.type]:Mb.dtype,Oa=!!Ya.normalized,Qa=Ya.size|0,Zb=Ya.offset|0,vb=Ya.stride|0,mb=Ya.divisor|0);bb=va.location;jc=R[bb];if(1===ub){jc.buffer||
r.enableVertexAttribArray(bb);nd=Qa||2;if(jc.type!==Sa||jc.size!==nd||jc.buffer!==Mb||jc.normalized!==Oa||jc.offset!==Zb||jc.stride!==vb)r.bindBuffer(34962,Mb.buffer),r.vertexAttribPointer(bb,nd,Sa,Oa,vb,Zb),jc.type=Sa,jc.size=nd,jc.buffer=Mb,jc.normalized=Oa,jc.offset=Zb,jc.stride=vb;jc.divisor!==mb&&(H.vertexAttribDivisorANGLE(bb,mb),jc.divisor=mb)}else if(jc.buffer&&(r.disableVertexAttribArray(bb),jc.buffer=null),jc.x!==gc||jc.y!==Dc||jc.z!==uc||jc.w!==nb)r.vertexAttrib4f(bb,gc,Dc,uc,nb),jc.x=
gc,jc.y=Dc,jc.z=uc,jc.w=nb;Xa=this.viewportArray;r.uniform4f(X.location,Xa[0],Xa[1],Xa[2],Xa[3]);Uc=this.scale;r.uniform2f(ja.location,Uc[0],Uc[1]);Ab=this.translate;r.uniform2f(aa.location,Ab[0],Ab[1]);(Za=M.elements)?r.bindBuffer(34963,Za.buffer.buffer):ra.currentVAO&&(Za=P.getElements(ra.currentVAO.elements))&&r.bindBuffer(34963,Za.buffer.buffer);Vb=M.instances;for(L=0;L<l;++L){F=f[L];var sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,
hd,qd;sc=w.call(this,A,F,L);L&&Wb===sc||(Wb=sc,r.uniform1f(E.location,sc));Qb=B.call(this,A,F,L);L&&Jc===Qb||(Jc=Qb,r.uniform1f(x.location,Qb));Rb=F.align;L&&Ld===Rb||(Ld=Rb,r.uniform1f(U.location,Rb));Cc=F.baseline;L&&ud===Cc||(ud=Cc,r.uniform1f(y.location,Cc));Lc=F.color;Wc=Lc[0];nc=Lc[1];hc=Lc[2];rc=Lc[3];L&&vd===Wc&&vc===nc&&db===hc&&Tb===rc||(vd=Wc,vc=nc,db=hc,Tb=rc,r.uniform4f(b.location,Wc,nc,hc,rc));Xb=ha.call(this,A,F,L);dc=Xb[0];xc=Xb[1];L&&ic===dc&&zc===xc||(ic=dc,zc=xc,r.uniform2f(h.location,
dc,xc));ad=c.call(this,A,F,L);Oc=ad[0];Qc=ad[1];L&&Pc===Oc&&Xc===Qc||(Pc=Oc,Xc=Qc,r.uniform2f(Z.location,Oc,Qc));ld=F.positionOffset;bd=ld[0];kc=ld[1];L&&Yc===bd&&cc===kc||(Yc=bd,cc=kc,r.uniform2f(z.location,bd,kc));Zc=F.opacity;L&&Sc===Zc||(Sc=Zc,r.uniform1f(a.location,Zc));(cd=e.call(this,A,F,L))&&"framebuffer"===cd._reglType&&(cd=cd.color[0]);yc=cd._texture;r.uniform1i(p.location,yc.bind());hd=F.offset;if(qd=F.count)0<Vb?Za?H.drawElementsInstancedANGLE(0,qd,Za.type,hd<<(Za.type-5121>>1),Vb):H.drawArraysInstancedANGLE(0,
hd,qd,Vb):0>Vb&&(Za?r.drawElements(0,qd,Za.type,hd<<(Za.type-5121>>1)):r.drawArrays(0,hd,qd)),yc.unbind()}Gc&&T.destroyStream(oc);qc&&T.destroyStream(Ob);rb&&T.destroyStream(Ja);Lb&&T.destroyStream(Mb);q.dirty=!0;ra.setVAO(null);A.viewportWidth=J;A.viewportHeight=u;k&&(V.cpuTime+=performance.now()-C)},draw:function(e){var c,d,t,w,na,S,u,k,C,L,B,F,I,N,O,ka,ha,W,ma,za,ba,Ma,Ce,Ne,Re,Hd,Ae,re,$d,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,
ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb;c=qa.next;c!==qa.cur&&(c?r.bindFramebuffer(36160,c.framebuffer):r.bindFramebuffer(36160,null),qa.cur=c);if(q.dirty){var Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc;Wa=ca.dither;Wa!==q.dither&&(Wa?r.enable(3024):r.disable(3024),q.dither=Wa);tb=ga[0];sb=ga[1];if(tb!==Ca[0]||sb!==Ca[1])r.blendEquationSeparate(tb,sb),Ca[0]=tb,Ca[1]=sb;Pa=ca.depth_func;
Pa!==q.depth_func&&(r.depthFunc(Pa),q.depth_func=Pa);Ac=oa[0];Ra=oa[1];if(Ac!==fb[0]||Ra!==fb[1])r.depthRange(Ac,Ra),fb[0]=Ac,fb[1]=Ra;Kb=ca.depth_mask;Kb!==q.depth_mask&&(r.depthMask(Kb),q.depth_mask=Kb);Eb=xa[0];Na=xa[1];xd=xa[2];Ya=xa[3];if(Eb!==La[0]||Na!==La[1]||xd!==La[2]||Ya!==La[3])r.colorMask(Eb,Na,xd,Ya),La[0]=Eb,La[1]=Na,La[2]=xd,La[3]=Ya;Lb=ca.cull_enable;Lb!==q.cull_enable&&(Lb?r.enable(2884):r.disable(2884),q.cull_enable=Lb);Mb=ca.cull_face;Mb!==q.cull_face&&(r.cullFace(Mb),q.cull_face=
Mb);mb=ca.frontFace;mb!==q.frontFace&&(r.frontFace(mb),q.frontFace=mb);Oa=ca.lineWidth;Oa!==q.lineWidth&&(r.lineWidth(Oa),q.lineWidth=Oa);Zb=ca.polygonOffset_enable;Zb!==q.polygonOffset_enable&&(Zb?r.enable(32823):r.disable(32823),q.polygonOffset_enable=Zb);Qa=Ta[0];ub=Ta[1];if(Qa!==v[0]||ub!==v[1])r.polygonOffset(Qa,ub),v[0]=Qa,v[1]=ub;vb=ca.sample_alpha;vb!==q.sample_alpha&&(vb?r.enable(32926):r.disable(32926),q.sample_alpha=vb);Sa=ca.sample_enable;Sa!==q.sample_enable&&(Sa?r.enable(32928):r.disable(32928),
q.sample_enable=Sa);nb=m[0];gc=m[1];if(nb!==K[0]||gc!==K[1])r.sampleCoverage(nb,gc),K[0]=nb,K[1]=gc;Dc=ca.stencil_mask;Dc!==q.stencil_mask&&(r.stencilMask(Dc),q.stencil_mask=Dc);uc=dd[0];bb=dd[1];jc=dd[2];if(uc!==Hb[0]||bb!==Hb[1]||jc!==Hb[2])r.stencilFunc(uc,bb,jc),Hb[0]=uc,Hb[1]=bb,Hb[2]=jc;nd=sa[0];Xa=sa[1];Uc=sa[2];Ab=sa[3];if(nd!==Fa[0]||Xa!==Fa[1]||Uc!==Fa[2]||Ab!==Fa[3])r.stencilOpSeparate(nd,Xa,Uc,Ab),Fa[0]=nd,Fa[1]=Xa,Fa[2]=Uc,Fa[3]=Ab;Za=ia[0];Vb=ia[1];sc=ia[2];Wb=ia[3];if(Za!==Q[0]||Vb!==
Q[1]||sc!==Q[2]||Wb!==Q[3])r.stencilOpSeparate(Za,Vb,sc,Wb),Q[0]=Za,Q[1]=Vb,Q[2]=sc,Q[3]=Wb;Qb=ca.scissor_enable;Qb!==q.scissor_enable&&(Qb?r.enable(3089):r.disable(3089),q.scissor_enable=Qb);Jc=ua[0];Rb=ua[1];Ld=ua[2];Cc=ua[3];if(Jc!==Ba[0]||Rb!==Ba[1]||Ld!==Ba[2]||Cc!==Ba[3])r.scissor(Jc,Rb,Ld,Cc),Ba[0]=Jc,Ba[1]=Rb,Ba[2]=Ld,Ba[3]=Cc}d=this.viewport;t=d.x|0;w=d.y|0;na="width"in d?d.width|0:A.framebufferWidth-t;S="height"in d?d.height|0:A.framebufferHeight-w;u=A.viewportWidth;A.viewportWidth=na;k=
A.viewportHeight;A.viewportHeight=S;r.viewport(t,w,na,S);Aa[0]=t;Aa[1]=w;Aa[2]=na;Aa[3]=S;r.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;r.enable(3042);q.blend_enable=!0;r.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;r.disable(2929);q.depth_enable=!1;r.disable(2960);q.stencil_enable=!1;if(C=q.profile)L=performance.now(),V.count++;r.useProgram(H.program);B=wa.angle_instanced_arrays;ra.setVAO(null);Y.buffer=this.sizeBuffer;F=!1;I=null;N=0;O=!1;ha=ka=0;W=1;ma=0;za=5126;
Ne=Ce=Ma=ba=0;G(Y)?(F=!0,I=T.createStream(34962,Y),za=I.dtype):(I=T.getBuffer(Y))?za=I.dtype:"constant"in Y?(W=2,"number"===typeof Y.constant?(Ma=Y.constant,Ce=Ne=ba=0):(Ma=0<Y.constant.length?Y.constant[0]:0,Ce=1<Y.constant.length?Y.constant[1]:0,Ne=2<Y.constant.length?Y.constant[2]:0,ba=3<Y.constant.length?Y.constant[3]:0)):(I=G(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),za="type"in Y?Ea[Y.type]:I.dtype,O=!!Y.normalized,ha=Y.size|0,ka=Y.offset|0,ma=Y.stride|0,N=Y.divisor|0);
Re=fa.location;Hd=R[Re];if(1===W){Hd.buffer||r.enableVertexAttribArray(Re);Ae=ha||1;if(Hd.type!==za||Hd.size!==Ae||Hd.buffer!==I||Hd.normalized!==O||Hd.offset!==ka||Hd.stride!==ma)r.bindBuffer(34962,I.buffer),r.vertexAttribPointer(Re,Ae,za,O,ma,ka),Hd.type=za,Hd.size=Ae,Hd.buffer=I,Hd.normalized=O,Hd.offset=ka,Hd.stride=ma;Hd.divisor!==N&&(B.vertexAttribDivisorANGLE(Re,N),Hd.divisor=N)}else if(Hd.buffer&&(r.disableVertexAttribArray(Re),Hd.buffer=null),Hd.x!==Ma||Hd.y!==Ce||Hd.z!==Ne||Hd.w!==ba)r.vertexAttrib4f(Re,
Ma,Ce,Ne,ba),Hd.x=Ma,Hd.y=Ce,Hd.z=Ne,Hd.w=ba;la.buffer=this.sizeBuffer;re=!1;$d=null;Xd=0;Bd=!1;$c=md=0;sd=1;Kc=0;pd=5126;kd=Nc=ed=Ec=0;G(la)?(re=!0,$d=T.createStream(34962,la),pd=$d.dtype):($d=T.getBuffer(la))?pd=$d.dtype:"constant"in la?(sd=2,"number"===typeof la.constant?(ed=la.constant,Nc=kd=Ec=0):(ed=0<la.constant.length?la.constant[0]:0,Nc=1<la.constant.length?la.constant[1]:0,kd=2<la.constant.length?la.constant[2]:0,Ec=3<la.constant.length?la.constant[3]:0)):($d=G(la.buffer)?T.createStream(34962,
la.buffer):T.getBuffer(la.buffer),pd="type"in la?Ea[la.type]:$d.dtype,Bd=!!la.normalized,$c=la.size|0,md=la.offset|0,Kc=la.stride|0,Xd=la.divisor|0);Bb=D.location;Fb=R[Bb];if(1===sd){Fb.buffer||r.enableVertexAttribArray(Bb);tc=$c||1;if(Fb.type!==pd||Fb.size!==tc||Fb.buffer!==$d||Fb.normalized!==Bd||Fb.offset!==md||Fb.stride!==Kc)r.bindBuffer(34962,$d.buffer),r.vertexAttribPointer(Bb,tc,pd,Bd,Kc,md),Fb.type=pd,Fb.size=tc,Fb.buffer=$d,Fb.normalized=Bd,Fb.offset=md,Fb.stride=Kc;Fb.divisor!==Xd&&(B.vertexAttribDivisorANGLE(Bb,
Xd),Fb.divisor=Xd)}else if(Fb.buffer&&(r.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==ed||Fb.y!==Nc||Fb.z!==kd||Fb.w!==Ec)r.vertexAttrib4f(Bb,ed,Nc,kd,Ec),Fb.x=ed,Fb.y=Nc,Fb.z=kd,Fb.w=Ec;xb=this.charBuffer;wc=!1;Cb=null;Ic=0;lc=!1;Vc=Fc=0;Tc=1;Bc=0;ec=5126;mc=pc=oc=Gc=0;G(xb)?(wc=!0,Cb=T.createStream(34962,xb),ec=Cb.dtype):(Cb=T.getBuffer(xb))?ec=Cb.dtype:"constant"in xb?(Tc=2,"number"===typeof xb.constant?(oc=xb.constant,pc=mc=Gc=0):(oc=0<xb.constant.length?xb.constant[0]:0,pc=1<xb.constant.length?
xb.constant[1]:0,mc=2<xb.constant.length?xb.constant[2]:0,Gc=3<xb.constant.length?xb.constant[3]:0)):(Cb=G(xb.buffer)?T.createStream(34962,xb.buffer):T.getBuffer(xb.buffer),ec="type"in xb?Ea[xb.type]:Cb.dtype,lc=!!xb.normalized,Vc=xb.size|0,Fc=xb.offset|0,Bc=xb.stride|0,Ic=xb.divisor|0);fc=da.location;$a=R[fc];if(1===Tc){$a.buffer||r.enableVertexAttribArray(fc);Hc=Vc||1;if($a.type!==ec||$a.size!==Hc||$a.buffer!==Cb||$a.normalized!==lc||$a.offset!==Fc||$a.stride!==Bc)r.bindBuffer(34962,Cb.buffer),
r.vertexAttribPointer(fc,Hc,ec,lc,Bc,Fc),$a.type=ec,$a.size=Hc,$a.buffer=Cb,$a.normalized=lc,$a.offset=Fc,$a.stride=Bc;$a.divisor!==Ic&&(B.vertexAttribDivisorANGLE(fc,Ic),$a.divisor=Ic)}else if($a.buffer&&(r.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Gc)r.vertexAttrib4f(fc,oc,pc,mc,Gc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Gc;yb=this.position;cb=!1;Nb=null;ab=0;ob=!1;Cd=Va=0;Ib=1;Jb=0;qc=5126;Db=Gb=kb=Ob=0;G(yb)?(cb=!0,Nb=T.createStream(34962,yb),qc=Nb.dtype):(Nb=
T.getBuffer(yb))?qc=Nb.dtype:"constant"in yb?(Ib=2,"number"===typeof yb.constant?(kb=yb.constant,Gb=Db=Ob=0):(kb=0<yb.constant.length?yb.constant[0]:0,Gb=1<yb.constant.length?yb.constant[1]:0,Db=2<yb.constant.length?yb.constant[2]:0,Ob=3<yb.constant.length?yb.constant[3]:0)):(Nb=G(yb.buffer)?T.createStream(34962,yb.buffer):T.getBuffer(yb.buffer),qc="type"in yb?Ea[yb.type]:Nb.dtype,ob=!!yb.normalized,Cd=yb.size|0,Va=yb.offset|0,Jb=yb.stride|0,ab=yb.divisor|0);wb=va.location;ib=R[wb];if(1===Ib){ib.buffer||
r.enableVertexAttribArray(wb);Yb=Cd||2;if(ib.type!==qc||ib.size!==Yb||ib.buffer!==Nb||ib.normalized!==ob||ib.offset!==Va||ib.stride!==Jb)r.bindBuffer(34962,Nb.buffer),r.vertexAttribPointer(wb,Yb,qc,ob,Jb,Va),ib.type=qc,ib.size=Yb,ib.buffer=Nb,ib.normalized=ob,ib.offset=Va,ib.stride=Jb;ib.divisor!==ab&&(B.vertexAttribDivisorANGLE(wb,ab),ib.divisor=ab)}else if(ib.buffer&&(r.disableVertexAttribArray(wb),ib.buffer=null),ib.x!==kb||ib.y!==Gb||ib.z!==Db||ib.w!==Ob)r.vertexAttrib4f(wb,kb,Gb,Db,Ob),ib.x=
kb,ib.y=Gb,ib.z=Db,ib.w=Ob;Pb=J.call(this,A,e,0);r.uniform1f(E.location,Pb);qb=g.call(this,A,e,0);r.uniform1f(x.location,qb);r.uniform1f(U.location,e.align);r.uniform1f(y.location,e.baseline);Ua=this.viewportArray;r.uniform4f(X.location,Ua[0],Ua[1],Ua[2],Ua[3]);Ub=e.color;r.uniform4f(b.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=l.call(this,A,e,0);r.uniform2f(h.location,zb[0],zb[1]);bc=n.call(this,A,e,0);r.uniform2f(Z.location,bc[0],bc[1]);jb=this.scale;r.uniform2f(ja.location,jb[0],jb[1]);pb=this.translate;
r.uniform2f(aa.location,pb[0],pb[1]);Ha=e.positionOffset;r.uniform2f(z.location,Ha[0],Ha[1]);r.uniform1f(a.location,e.opacity);(rb=f.call(this,A,e,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);Ja=rb._texture;r.uniform1i(p.location,Ja.bind());(eb=M.elements)?r.bindBuffer(34963,eb.buffer.buffer):ra.currentVAO&&(eb=P.getElements(ra.currentVAO.elements))&&r.bindBuffer(34963,eb.buffer.buffer);gb=e.offset;if(Ka=e.count)lb=M.instances,0<lb?eb?B.drawElementsInstancedANGLE(0,Ka,eb.type,gb<<(eb.type-
5121>>1),lb):B.drawArraysInstancedANGLE(0,gb,Ka,lb):0>lb&&(eb?r.drawElements(0,Ka,eb.type,gb<<(eb.type-5121>>1)):r.drawArrays(0,gb,Ka)),q.dirty=!0,ra.setVAO(null),A.viewportWidth=u,A.viewportHeight=k,C&&(V.cpuTime+=performance.now()-L),F&&T.destroyStream(I),re&&T.destroyStream($d),wc&&T.destroyStream(Cb),cb&&T.destroyStream(Nb),Ja.unbind()},scope:function(a,b,e){var c,f,h,l,m,r,p,v,n,d,Q,g,K,x,z,y,oa,w,sa,Fa,R,E,D,J,ga,ia,P,fb,La,H,B,ua,N,Aa,U,ya,wa,ra,ha,X,Z,da,fa,Ta,pa,Ca,xa,va,ja,qa,Ba,Hb,aa,gd,
dd,ba,$a,Ma,yb,cb,Nb,ab,ob,Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa,Uc,Ab,Za,Vb,sc,Wb,Qb,Jc,Rb,Ld,Cc,ud,Lc,Wc,vd,nc,vc,hc,db,rc,Tb,Xb,dc,ic,xc,zc,ad,Oc,Pc,Qc,Xc,ld,bd,Yc,kc,cc,Zc,Sc,cd,yc,hd;c=this.viewport;f=c.x|0;h=c.y|0;l="width"in c?c.width|0:A.framebufferWidth-f;m="height"in c?c.height|0:A.framebufferHeight-h;r=A.viewportWidth;A.viewportWidth=l;p=A.viewportHeight;A.viewportHeight=
m;v=na[0];na[0]=f;n=na[1];na[1]=h;d=na[2];na[2]=l;Q=na[3];na[3]=m;g=za[0];za[0]=0;K=za[1];za[1]=0;x=za[2];za[2]=0;z=za[3];za[3]=1;y=ca.blend_enable;ca.blend_enable=!0;oa=ka[0];ka[0]=770;w=ka[1];ka[1]=771;sa=ka[2];ka[2]=773;Fa=ka[3];ka[3]=1;R=ca.depth_enable;ca.depth_enable=!1;E=ca.stencil_enable;ca.stencil_enable=!1;if(D=q.profile)J=performance.now(),V.count++;ga=a.offset;ia=M.offset;M.offset=ga;P=a.count;fb=M.count;M.count=P;La=M.primitive;M.primitive=0;H=a.align;B=ma[64];ma[64]=H;ua=F.call(this,
A,a,e);N=ma[69];ma[69]=ua;Aa=C.call(this,A,a,e);U=ma[67];ma[67]=Aa;ya=O.call(this,A,a,e);wa=ma[66];ma[66]=ya;ra=a.baseline;ha=ma[65];ma[65]=ra;X=I.call(this,A,a,e);Z=ma[62];ma[62]=X;da=a.color;fa=ma[14];ma[14]=da;Ta=k.call(this,A,a,e);pa=ma[63];ma[63]=Ta;Ca=a.opacity;xa=ma[10];ma[10]=Ca;va=a.positionOffset;ja=ma[68];ma[68]=va;qa=this.scale;Ba=ma[6];ma[6]=qa;Hb=this.translate;aa=ma[8];ma[8]=Hb;gd=this.viewportArray;dd=ma[3];ma[3]=gd;ba=this.charBuffer;$a=!1;Ma=null;yb=0;cb=!1;ab=Nb=0;ob=1;Va=0;Cd=
5126;Ob=qc=Jb=Ib=0;G(ba)?($a=!0,Ma=T.createStream(34962,ba),Cd=Ma.dtype):(Ma=T.getBuffer(ba))?Cd=Ma.dtype:"constant"in ba?(ob=2,"number"===typeof ba.constant?(Jb=ba.constant,qc=Ob=Ib=0):(Jb=0<ba.constant.length?ba.constant[0]:0,qc=1<ba.constant.length?ba.constant[1]:0,Ob=2<ba.constant.length?ba.constant[2]:0,Ib=3<ba.constant.length?ba.constant[3]:0)):(Ma=G(ba.buffer)?T.createStream(34962,ba.buffer):T.getBuffer(ba.buffer),Cd="type"in ba?Ea[ba.type]:Ma.dtype,cb=!!ba.normalized,ab=ba.size|0,Nb=ba.offset|
0,Va=ba.stride|0,yb=ba.divisor|0);kb=u.buffer;u.buffer=Ma;Gb=u.divisor;u.divisor=yb;Db=u.normalized;u.normalized=cb;wb=u.offset;u.offset=Nb;ib=u.size;u.size=ab;Yb=u.state;u.state=ob;Pb=u.stride;u.stride=Va;qb=u.type;u.type=Cd;Ua=u.w;u.w=Ib;Ub=u.x;u.x=Jb;zb=u.y;u.y=qc;bc=u.z;u.z=Ob;la.buffer=this.sizeBuffer;jb=!1;pb=null;Ha=0;rb=!1;eb=Ja=0;gb=1;Ka=0;lb=5126;Pa=sb=tb=Wa=0;G(la)?(jb=!0,pb=T.createStream(34962,la),lb=pb.dtype):(pb=T.getBuffer(la))?lb=pb.dtype:"constant"in la?(gb=2,"number"===typeof la.constant?
(tb=la.constant,sb=Pa=Wa=0):(tb=0<la.constant.length?la.constant[0]:0,sb=1<la.constant.length?la.constant[1]:0,Pa=2<la.constant.length?la.constant[2]:0,Wa=3<la.constant.length?la.constant[3]:0)):(pb=G(la.buffer)?T.createStream(34962,la.buffer):T.getBuffer(la.buffer),lb="type"in la?Ea[la.type]:pb.dtype,rb=!!la.normalized,eb=la.size|0,Ja=la.offset|0,Ka=la.stride|0,Ha=la.divisor|0);Ac=L.buffer;L.buffer=pb;Ra=L.divisor;L.divisor=Ha;Kb=L.normalized;L.normalized=rb;Eb=L.offset;L.offset=Ja;Na=L.size;L.size=
eb;xd=L.state;L.state=gb;Ya=L.stride;L.stride=Ka;Lb=L.type;L.type=lb;Mb=L.w;L.w=Wa;mb=L.x;L.x=tb;Oa=L.y;L.y=sb;Zb=L.z;L.z=Pa;Qa=this.position;ub=!1;vb=null;Sa=0;nb=!1;Dc=gc=0;uc=1;bb=0;jc=5126;Ab=Uc=Xa=nd=0;G(Qa)?(ub=!0,vb=T.createStream(34962,Qa),jc=vb.dtype):(vb=T.getBuffer(Qa))?jc=vb.dtype:"constant"in Qa?(uc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,Uc=Ab=nd=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,Uc=1<Qa.constant.length?Qa.constant[1]:0,Ab=2<Qa.constant.length?Qa.constant[2]:0,nd=
3<Qa.constant.length?Qa.constant[3]:0)):(vb=G(Qa.buffer)?T.createStream(34962,Qa.buffer):T.getBuffer(Qa.buffer),jc="type"in Qa?Ea[Qa.type]:vb.dtype,nb=!!Qa.normalized,Dc=Qa.size|0,gc=Qa.offset|0,bb=Qa.stride|0,Sa=Qa.divisor|0);Za=W.buffer;W.buffer=vb;Vb=W.divisor;W.divisor=Sa;sc=W.normalized;W.normalized=nb;Wb=W.offset;W.offset=gc;Qb=W.size;W.size=Dc;Jc=W.state;W.state=uc;Rb=W.stride;W.stride=bb;Ld=W.type;W.type=jc;Cc=W.w;W.w=nd;ud=W.x;W.x=Xa;Lc=W.y;W.y=Uc;Wc=W.z;W.z=Ab;Y.buffer=this.sizeBuffer;vd=
!1;nc=null;vc=0;hc=!1;rc=db=0;Tb=1;Xb=0;dc=5126;ad=zc=xc=ic=0;G(Y)?(vd=!0,nc=T.createStream(34962,Y),dc=nc.dtype):(nc=T.getBuffer(Y))?dc=nc.dtype:"constant"in Y?(Tb=2,"number"===typeof Y.constant?(xc=Y.constant,zc=ad=ic=0):(xc=0<Y.constant.length?Y.constant[0]:0,zc=1<Y.constant.length?Y.constant[1]:0,ad=2<Y.constant.length?Y.constant[2]:0,ic=3<Y.constant.length?Y.constant[3]:0)):(nc=G(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),dc="type"in Y?Ea[Y.type]:nc.dtype,hc=!!Y.normalized,
rc=Y.size|0,db=Y.offset|0,Xb=Y.stride|0,vc=Y.divisor|0);Oc=t.buffer;t.buffer=nc;Pc=t.divisor;t.divisor=vc;Qc=t.normalized;t.normalized=hc;Xc=t.offset;t.offset=db;ld=t.size;t.size=rc;bd=t.state;t.state=Tb;Yc=t.stride;t.stride=Xb;kc=t.type;t.type=dc;cc=t.w;t.w=ic;Zc=t.x;t.x=xc;Sc=t.y;t.y=zc;cd=t.z;t.z=ad;yc=S.vert;S.vert=61;hd=S.frag;S.frag=60;q.dirty=!0;b(A,a,e);A.viewportWidth=r;A.viewportHeight=p;na[0]=v;na[1]=n;na[2]=d;na[3]=Q;za[0]=g;za[1]=K;za[2]=x;za[3]=z;ca.blend_enable=y;ka[0]=oa;ka[1]=w;ka[2]=
sa;ka[3]=Fa;ca.depth_enable=R;ca.stencil_enable=E;D&&(V.cpuTime+=performance.now()-J);M.offset=ia;M.count=fb;M.primitive=La;ma[64]=B;ma[69]=N;ma[67]=U;ma[66]=wa;ma[65]=ha;ma[62]=Z;ma[14]=fa;ma[63]=pa;ma[10]=xa;ma[68]=ja;ma[6]=Ba;ma[8]=aa;ma[3]=dd;$a&&T.destroyStream(Ma);u.buffer=kb;u.divisor=Gb;u.normalized=Db;u.offset=wb;u.size=ib;u.state=Yb;u.stride=Pb;u.type=qb;u.w=Ua;u.x=Ub;u.y=zb;u.z=bc;jb&&T.destroyStream(pb);L.buffer=Ac;L.divisor=Ra;L.normalized=Kb;L.offset=Eb;L.size=Na;L.state=xd;L.stride=
Ya;L.type=Lb;L.w=Mb;L.x=mb;L.y=Oa;L.z=Zb;ub&&T.destroyStream(vb);W.buffer=Za;W.divisor=Vb;W.normalized=sc;W.offset=Wb;W.size=Qb;W.state=Jc;W.stride=Rb;W.type=Ld;W.w=Cc;W.x=ud;W.y=Lc;W.z=Wc;vd&&T.destroyStream(nc);t.buffer=Oc;t.divisor=Pc;t.normalized=Qc;t.offset=Xc;t.size=ld;t.state=bd;t.stride=Yc;t.type=kc;t.w=cc;t.x=Zc;t.y=Sc;t.z=cd;S.vert=yc;S.frag=hd;q.dirty=!0}}},$2:function(d,V,H){var J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x;J=d.attributes;g=d.current;l=d.framebuffer;n=
d.gl;f=d.next;F=d.vao;C=f.blend_color;O=g.blend_color;I=f.blend_equation;k=g.blend_equation;u=f.blend_func;L=g.blend_func;W=f.colorMask;t=g.colorMask;N=f.depth_range;w=g.depth_range;B=f.polygonOffset_offset;ha=g.polygonOffset_offset;c=f.sample_coverage;e=g.sample_coverage;U=f.scissor_box;p=g.scissor_box;Z=f.stencil_func;h=g.stencil_func;y=f.stencil_opBack;da=g.stencil_opBack;D=f.stencil_opFront;E=g.stencil_opFront;b=f.viewport;x=g.viewport;return{poll:function(){var a,d,z,J,H,F,V,R,T,A,q,M,P,wa,qa,
r,G,ca,S,ma,ra,za;g.dirty=!1;d=f.blend_enable;z=f.cull_enable;J=f.depth_enable;H=f.dither;F=f.polygonOffset_enable;V=f.sample_alpha;R=f.sample_enable;T=f.scissor_enable;A=f.stencil_enable;q=f.cull_face;M=g.cull_face;P=f.depth_func;wa=g.depth_func;qa=f.depth_mask;r=g.depth_mask;G=f.frontFace;ca=g.frontFace;S=f.lineWidth;ma=g.lineWidth;ra=f.stencil_mask;za=g.stencil_mask;a=l.next;a!==l.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),l.cur=a);d!==g.blend_enable&&(d?n.enable(3042):
n.disable(3042),g.blend_enable=d);z!==g.cull_enable&&(z?n.enable(2884):n.disable(2884),g.cull_enable=z);J!==g.depth_enable&&(J?n.enable(2929):n.disable(2929),g.depth_enable=J);H!==g.dither&&(H?n.enable(3024):n.disable(3024),g.dither=H);F!==g.polygonOffset_enable&&(F?n.enable(32823):n.disable(32823),g.polygonOffset_enable=F);V!==g.sample_alpha&&(V?n.enable(32926):n.disable(32926),g.sample_alpha=V);R!==g.sample_enable&&(R?n.enable(32928):n.disable(32928),g.sample_enable=R);T!==g.scissor_enable&&(T?
n.enable(3089):n.disable(3089),g.scissor_enable=T);A!==g.stencil_enable&&(A?n.enable(2960):n.disable(2960),g.stencil_enable=A);if(C[0]!==O[0]||C[1]!==O[1]||C[2]!==O[2]||C[3]!==O[3])n.blendColor(C[0],C[1],C[2],C[3]),O[0]=C[0],O[1]=C[1],O[2]=C[2],O[3]=C[3];if(I[0]!==k[0]||I[1]!==k[1])n.blendEquationSeparate(I[0],I[1]),k[0]=I[0],k[1]=I[1];if(u[0]!==L[0]||u[1]!==L[1]||u[2]!==L[2]||u[3]!==L[3])n.blendFuncSeparate(u[0],u[1],u[2],u[3]),L[0]=u[0],L[1]=u[1],L[2]=u[2],L[3]=u[3];if(W[0]!==t[0]||W[1]!==t[1]||
W[2]!==t[2]||W[3]!==t[3])n.colorMask(W[0],W[1],W[2],W[3]),t[0]=W[0],t[1]=W[1],t[2]=W[2],t[3]=W[3];q!==M&&(n.cullFace(q),g.cull_face=q);P!==wa&&(n.depthFunc(P),g.depth_func=P);qa!==r&&(n.depthMask(qa),g.depth_mask=qa);if(N[0]!==w[0]||N[1]!==w[1])n.depthRange(N[0],N[1]),w[0]=N[0],w[1]=N[1];G!==ca&&(n.frontFace(G),g.frontFace=G);S!==ma&&(n.lineWidth(S),g.lineWidth=S);if(B[0]!==ha[0]||B[1]!==ha[1])n.polygonOffset(B[0],B[1]),ha[0]=B[0],ha[1]=B[1];if(c[0]!==e[0]||c[1]!==e[1])n.sampleCoverage(c[0],c[1]),
e[0]=c[0],e[1]=c[1];if(U[0]!==p[0]||U[1]!==p[1]||U[2]!==p[2]||U[3]!==p[3])n.scissor(U[0],U[1],U[2],U[3]),p[0]=U[0],p[1]=U[1],p[2]=U[2],p[3]=U[3];if(Z[0]!==h[0]||Z[1]!==h[1]||Z[2]!==h[2])n.stencilFunc(Z[0],Z[1],Z[2]),h[0]=Z[0],h[1]=Z[1],h[2]=Z[2];ra!==za&&(n.stencilMask(ra),g.stencil_mask=ra);if(y[0]!==da[0]||y[1]!==da[1]||y[2]!==da[2]||y[3]!==da[3])n.stencilOpSeparate(y[0],y[1],y[2],y[3]),da[0]=y[0],da[1]=y[1],da[2]=y[2],da[3]=y[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])n.stencilOpSeparate(D[0],
D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3];if(b[0]!==x[0]||b[1]!==x[1]||b[2]!==x[2]||b[3]!==x[3])n.viewport(b[0],b[1],b[2],b[3]),x[0]=b[0],x[1]=b[1],x[2]=b[2],x[3]=b[3]},refresh:function(){var a,d,z,H,V,X,fa,R,T,A,q,M,P,wa,qa,r;g.dirty=!1;d=f.blend_enable;z=f.cull_enable;H=f.depth_enable;V=f.dither;X=f.polygonOffset_enable;fa=f.sample_alpha;R=f.sample_enable;T=f.scissor_enable;A=f.stencil_enable;q=f.cull_face;M=f.depth_func;P=f.depth_mask;wa=f.frontFace;qa=f.lineWidth;r=f.stencil_mask;
(a=l.next)?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null);l.cur=a;a=J[0];a.buffer?(n.enableVertexAttribArray(0),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(0),n.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=J[1];a.buffer?(n.enableVertexAttribArray(1),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(1),
n.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=J[2];a.buffer?(n.enableVertexAttribArray(2),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(2),n.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=J[3];a.buffer?(n.enableVertexAttribArray(3),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(3),n.vertexAttrib4f(3,a.x,a.y,a.z,
a.w),a.buffer=null);a=J[4];a.buffer?(n.enableVertexAttribArray(4),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(4),n.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=J[5];a.buffer?(n.enableVertexAttribArray(5),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(5),n.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=J[6];a.buffer?
(n.enableVertexAttribArray(6),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(6),n.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=J[7];a.buffer?(n.enableVertexAttribArray(7),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(7),n.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=J[8];a.buffer?(n.enableVertexAttribArray(8),n.bindBuffer(34962,
a.buffer.buffer),n.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(8),n.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=J[9];a.buffer?(n.enableVertexAttribArray(9),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(9),n.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=J[10];a.buffer?(n.enableVertexAttribArray(10),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(10),n.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=J[11];a.buffer?(n.enableVertexAttribArray(11),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(11),n.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=J[12];a.buffer?(n.enableVertexAttribArray(12),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(12,a.size,a.type,a.normalized,
a.stride,a.offset)):(n.disableVertexAttribArray(12),n.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=J[13];a.buffer?(n.enableVertexAttribArray(13),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(13),n.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=J[14];a.buffer?(n.enableVertexAttribArray(14),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(14),
n.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=J[15];a.buffer?(n.enableVertexAttribArray(15),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(15),n.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);F.currentVAO=null;F.setVAO(F.targetVAO);d?n.enable(3042):n.disable(3042);g.blend_enable=d;z?n.enable(2884):n.disable(2884);g.cull_enable=z;H?n.enable(2929):n.disable(2929);g.depth_enable=H;V?n.enable(3024):n.disable(3024);
g.dither=V;X?n.enable(32823):n.disable(32823);g.polygonOffset_enable=X;fa?n.enable(32926):n.disable(32926);g.sample_alpha=fa;R?n.enable(32928):n.disable(32928);g.sample_enable=R;T?n.enable(3089):n.disable(3089);g.scissor_enable=T;A?n.enable(2960):n.disable(2960);g.stencil_enable=A;n.blendColor(C[0],C[1],C[2],C[3]);O[0]=C[0];O[1]=C[1];O[2]=C[2];O[3]=C[3];n.blendEquationSeparate(I[0],I[1]);k[0]=I[0];k[1]=I[1];n.blendFuncSeparate(u[0],u[1],u[2],u[3]);L[0]=u[0];L[1]=u[1];L[2]=u[2];L[3]=u[3];n.colorMask(W[0],
W[1],W[2],W[3]);t[0]=W[0];t[1]=W[1];t[2]=W[2];t[3]=W[3];n.cullFace(q);g.cull_face=q;n.depthFunc(M);g.depth_func=M;n.depthMask(P);g.depth_mask=P;n.depthRange(N[0],N[1]);w[0]=N[0];w[1]=N[1];n.frontFace(wa);g.frontFace=wa;n.lineWidth(qa);g.lineWidth=qa;n.polygonOffset(B[0],B[1]);ha[0]=B[0];ha[1]=B[1];n.sampleCoverage(c[0],c[1]);e[0]=c[0];e[1]=c[1];n.scissor(U[0],U[1],U[2],U[3]);p[0]=U[0];p[1]=U[1];p[2]=U[2];p[3]=U[3];n.stencilFunc(Z[0],Z[1],Z[2]);h[0]=Z[0];h[1]=Z[1];h[2]=Z[2];n.stencilMask(r);g.stencil_mask=
r;n.stencilOpSeparate(y[0],y[1],y[2],y[3]);da[0]=y[0];da[1]=y[1];da[2]=y[2];da[3]=y[3];n.stencilOpSeparate(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=D[1];E[2]=D[2];E[3]=D[3];n.viewport(b[0],b[1],b[2],b[3]);x[0]=b[0];x[1]=b[1];x[2]=b[2];x[3]=b[3]}}},$7:function(d,V,H,J,g,l,n,f){var F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa,R;F=d.context;C=d.current;O=d.framebuffer;I=d.gl;k=d.next;u=d.shader;L=d.vao;W=k.blend_color;t=C.blend_color;N=k.blend_equation;w=C.blend_equation;B=k.blend_func;
ha=C.blend_func;c=k.colorMask;e=C.colorMask;U=k.depth_range;p=C.depth_range;Z=k.polygonOffset_offset;h=C.polygonOffset_offset;y=k.sample_coverage;da=C.sample_coverage;D=k.scissor_box;E=C.scissor_box;b=k.stencil_func;x=C.stencil_func;a=k.stencil_opBack;va=C.stencil_opBack;z=k.stencil_opFront;ja=C.stencil_opFront;aa=k.viewport;X=C.viewport;fa={};R={};return{draw:function(f){var n,q,d,R,D,qa,r,G,ca,S;n=f.framebuffer;q=O.getFramebuffer(n);n&&!q&&V.commandRaise(g,H);n=O.next;O.next=q;d=F.framebufferWidth;
F.framebufferWidth=q?q.width:F.drawingBufferWidth;R=F.framebufferHeight;F.framebufferHeight=q?q.height:F.drawingBufferHeight;q!==O.cur&&(q?I.bindFramebuffer(36160,q.framebuffer):I.bindFramebuffer(36160,null),O.cur=q);if(C.dirty){q=k.dither;q!==C.dither&&(q?I.enable(3024):I.disable(3024),C.dither=q);q=k.blend_enable;q!==C.blend_enable&&(q?I.enable(3042):I.disable(3042),C.blend_enable=q);q=W[0];r=W[1];D=W[2];qa=W[3];if(q!==t[0]||r!==t[1]||D!==t[2]||qa!==t[3])I.blendColor(q,r,D,qa),t[0]=q,t[1]=r,t[2]=
D,t[3]=qa;q=N[0];r=N[1];if(q!==w[0]||r!==w[1])I.blendEquationSeparate(q,r),w[0]=q,w[1]=r;q=B[0];r=B[1];D=B[2];qa=B[3];if(q!==ha[0]||r!==ha[1]||D!==ha[2]||qa!==ha[3])I.blendFuncSeparate(q,r,D,qa),ha[0]=q,ha[1]=r,ha[2]=D,ha[3]=qa;q=k.depth_enable;q!==C.depth_enable&&(q?I.enable(2929):I.disable(2929),C.depth_enable=q);q=k.depth_func;q!==C.depth_func&&(I.depthFunc(q),C.depth_func=q);q=U[0];r=U[1];if(q!==p[0]||r!==p[1])I.depthRange(q,r),p[0]=q,p[1]=r;q=k.depth_mask;q!==C.depth_mask&&(I.depthMask(q),C.depth_mask=
q);q=c[0];r=c[1];D=c[2];qa=c[3];if(q!==e[0]||r!==e[1]||D!==e[2]||qa!==e[3])I.colorMask(q,r,D,qa),e[0]=q,e[1]=r,e[2]=D,e[3]=qa;q=k.cull_enable;q!==C.cull_enable&&(q?I.enable(2884):I.disable(2884),C.cull_enable=q);q=k.cull_face;q!==C.cull_face&&(I.cullFace(q),C.cull_face=q);q=k.frontFace;q!==C.frontFace&&(I.frontFace(q),C.frontFace=q);q=k.lineWidth;q!==C.lineWidth&&(I.lineWidth(q),C.lineWidth=q);q=k.polygonOffset_enable;q!==C.polygonOffset_enable&&(q?I.enable(32823):I.disable(32823),C.polygonOffset_enable=
q);q=Z[0];r=Z[1];if(q!==h[0]||r!==h[1])I.polygonOffset(q,r),h[0]=q,h[1]=r;q=k.sample_alpha;q!==C.sample_alpha&&(q?I.enable(32926):I.disable(32926),C.sample_alpha=q);q=k.sample_enable;q!==C.sample_enable&&(q?I.enable(32928):I.disable(32928),C.sample_enable=q);q=y[0];r=y[1];if(q!==da[0]||r!==da[1])I.sampleCoverage(q,r),da[0]=q,da[1]=r;q=k.stencil_enable;q!==C.stencil_enable&&(q?I.enable(2960):I.disable(2960),C.stencil_enable=q);q=k.stencil_mask;q!==C.stencil_mask&&(I.stencilMask(q),C.stencil_mask=q);
q=b[0];r=b[1];D=b[2];if(q!==x[0]||r!==x[1]||D!==x[2])I.stencilFunc(q,r,D),x[0]=q,x[1]=r,x[2]=D;q=z[0];r=z[1];D=z[2];qa=z[3];if(q!==ja[0]||r!==ja[1]||D!==ja[2]||qa!==ja[3])I.stencilOpSeparate(q,r,D,qa),ja[0]=q,ja[1]=r,ja[2]=D,ja[3]=qa;q=a[0];r=a[1];D=a[2];qa=a[3];if(q!==va[0]||r!==va[1]||D!==va[2]||qa!==va[3])I.stencilOpSeparate(q,r,D,qa),va[0]=q,va[1]=r,va[2]=D,va[3]=qa;q=k.scissor_enable;q!==C.scissor_enable&&(q?I.enable(3089):I.disable(3089),C.scissor_enable=q)}D=F.framebufferWidth;qa=F.framebufferHeight;
q=F.viewportWidth;F.viewportWidth=D;r=F.viewportHeight;F.viewportHeight=qa;I.viewport(0,0,D,qa);X[0]=0;X[1]=0;X[2]=D;X[3]=qa;D=F.framebufferWidth;qa=F.framebufferHeight;I.scissor(0,0,D,qa);E[0]=0;E[1]=0;E[2]=D;E[3]=qa;if(D=C.profile)G=performance.now(),J.count++;qa=u.program(u.vert,u.frag,H);I.useProgram(qa.program);L.setVAO(null);ca=qa.id;(S=fa[ca])||(S=fa[ca]=l(qa));S.call(this,f);C.dirty=!0;L.setVAO(null);O.next=n;F.framebufferWidth=d;F.framebufferHeight=R;F.viewportWidth=q;F.viewportHeight=r;
D&&(J.cpuTime+=performance.now()-G)},scope:function(a,b,e){var c,f,h,l,r,p,d,g,x,z,y,t,w,R,E;c=a.framebuffer;f=O.getFramebuffer(c);c&&!f&&V.commandRaise(n,H);c=O.next;O.next=f;h=F.framebufferWidth;F.framebufferWidth=f?f.width:F.drawingBufferWidth;l=F.framebufferHeight;F.framebufferHeight=f?f.height:F.drawingBufferHeight;r=F.framebufferWidth;p=F.framebufferHeight;f=F.viewportWidth;F.viewportWidth=r;d=F.viewportHeight;F.viewportHeight=p;g=aa[0];aa[0]=0;x=aa[1];aa[1]=0;z=aa[2];aa[2]=r;r=aa[3];aa[3]=
p;y=F.framebufferWidth;t=F.framebufferHeight;p=D[0];D[0]=0;w=D[1];D[1]=0;R=D[2];D[2]=y;y=D[3];D[3]=t;if(t=C.profile)E=performance.now(),J.count++;C.dirty=!0;b(F,a,e);O.next=c;F.framebufferWidth=h;F.framebufferHeight=l;F.viewportWidth=f;F.viewportHeight=d;aa[0]=g;aa[1]=x;aa[2]=z;aa[3]=r;D[0]=p;D[1]=w;D[2]=R;D[3]=y;t&&(J.cpuTime+=performance.now()-E);C.dirty=!0},batch:function(l,n){var q,d,g,D,E;if(C.dirty){q=k.dither;q!==C.dither&&(q?I.enable(3024):I.disable(3024),C.dither=q);q=k.blend_enable;q!==
C.blend_enable&&(q?I.enable(3042):I.disable(3042),C.blend_enable=q);q=W[0];g=W[1];D=W[2];E=W[3];if(q!==t[0]||g!==t[1]||D!==t[2]||E!==t[3])I.blendColor(q,g,D,E),t[0]=q,t[1]=g,t[2]=D,t[3]=E;q=N[0];g=N[1];if(q!==w[0]||g!==w[1])I.blendEquationSeparate(q,g),w[0]=q,w[1]=g;q=B[0];g=B[1];D=B[2];E=B[3];if(q!==ha[0]||g!==ha[1]||D!==ha[2]||E!==ha[3])I.blendFuncSeparate(q,g,D,E),ha[0]=q,ha[1]=g,ha[2]=D,ha[3]=E;q=k.depth_enable;q!==C.depth_enable&&(q?I.enable(2929):I.disable(2929),C.depth_enable=q);q=k.depth_func;
q!==C.depth_func&&(I.depthFunc(q),C.depth_func=q);q=U[0];g=U[1];if(q!==p[0]||g!==p[1])I.depthRange(q,g),p[0]=q,p[1]=g;q=k.depth_mask;q!==C.depth_mask&&(I.depthMask(q),C.depth_mask=q);q=c[0];g=c[1];D=c[2];E=c[3];if(q!==e[0]||g!==e[1]||D!==e[2]||E!==e[3])I.colorMask(q,g,D,E),e[0]=q,e[1]=g,e[2]=D,e[3]=E;q=k.cull_enable;q!==C.cull_enable&&(q?I.enable(2884):I.disable(2884),C.cull_enable=q);q=k.cull_face;q!==C.cull_face&&(I.cullFace(q),C.cull_face=q);q=k.frontFace;q!==C.frontFace&&(I.frontFace(q),C.frontFace=
q);q=k.lineWidth;q!==C.lineWidth&&(I.lineWidth(q),C.lineWidth=q);q=k.polygonOffset_enable;q!==C.polygonOffset_enable&&(q?I.enable(32823):I.disable(32823),C.polygonOffset_enable=q);q=Z[0];g=Z[1];if(q!==h[0]||g!==h[1])I.polygonOffset(q,g),h[0]=q,h[1]=g;q=k.sample_alpha;q!==C.sample_alpha&&(q?I.enable(32926):I.disable(32926),C.sample_alpha=q);q=k.sample_enable;q!==C.sample_enable&&(q?I.enable(32928):I.disable(32928),C.sample_enable=q);q=y[0];g=y[1];if(q!==da[0]||g!==da[1])I.sampleCoverage(q,g),da[0]=
q,da[1]=g;q=k.stencil_enable;q!==C.stencil_enable&&(q?I.enable(2960):I.disable(2960),C.stencil_enable=q);q=k.stencil_mask;q!==C.stencil_mask&&(I.stencilMask(q),C.stencil_mask=q);q=b[0];g=b[1];D=b[2];if(q!==x[0]||g!==x[1]||D!==x[2])I.stencilFunc(q,g,D),x[0]=q,x[1]=g,x[2]=D;q=z[0];g=z[1];D=z[2];E=z[3];if(q!==ja[0]||g!==ja[1]||D!==ja[2]||E!==ja[3])I.stencilOpSeparate(q,g,D,E),ja[0]=q,ja[1]=g,ja[2]=D,ja[3]=E;q=a[0];g=a[1];D=a[2];E=a[3];if(q!==va[0]||g!==va[1]||D!==va[2]||E!==va[3])I.stencilOpSeparate(q,
g,D,E),va[0]=q,va[1]=g,va[2]=D,va[3]=E;q=k.scissor_enable;q!==C.scissor_enable&&(q?I.enable(3089):I.disable(3089),C.scissor_enable=q)}if(q=C.profile)d=performance.now(),J.count+=n;g=u.program(u.vert,u.frag,H);I.useProgram(g.program);L.setVAO(null);D=g.id;(E=R[D])||(E=R[D]=f(g));E.call(this,l,n);C.dirty=!0;L.setVAO(null);q&&(J.cpuTime+=performance.now()-d)}}},$5:function(d,V,H,J,g,l){var n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X;n=d.context;f=d.current;F=d.framebuffer;
C=d.gl;O=d.next;I=d.shader;k=d.vao;u=O.blend_color;L=f.blend_color;W=O.blend_equation;t=f.blend_equation;N=O.blend_func;w=f.blend_func;B=O.colorMask;ha=f.colorMask;c=O.depth_range;e=f.depth_range;U=O.polygonOffset_offset;p=f.polygonOffset_offset;Z=O.sample_coverage;h=f.sample_coverage;y=O.scissor_box;da=f.scissor_box;D=O.stencil_func;E=f.stencil_func;b=O.stencil_opBack;x=f.stencil_opBack;a=O.stencil_opFront;va=f.stencil_opFront;z=O.viewport;ja=f.viewport;aa={};X={};return{draw:function(l){var n,d,
A,q,M;n=F.next;n!==F.cur&&(n?C.bindFramebuffer(36160,n.framebuffer):C.bindFramebuffer(36160,null),F.cur=n);if(f.dirty){n=O.dither;n!==f.dither&&(n?C.enable(3024):C.disable(3024),f.dither=n);n=O.blend_enable;n!==f.blend_enable&&(n?C.enable(3042):C.disable(3042),f.blend_enable=n);n=u[0];A=u[1];q=u[2];M=u[3];if(n!==L[0]||A!==L[1]||q!==L[2]||M!==L[3])C.blendColor(n,A,q,M),L[0]=n,L[1]=A,L[2]=q,L[3]=M;n=W[0];A=W[1];if(n!==t[0]||A!==t[1])C.blendEquationSeparate(n,A),t[0]=n,t[1]=A;n=N[0];A=N[1];q=N[2];M=
N[3];if(n!==w[0]||A!==w[1]||q!==w[2]||M!==w[3])C.blendFuncSeparate(n,A,q,M),w[0]=n,w[1]=A,w[2]=q,w[3]=M;n=O.depth_enable;n!==f.depth_enable&&(n?C.enable(2929):C.disable(2929),f.depth_enable=n);n=O.depth_func;n!==f.depth_func&&(C.depthFunc(n),f.depth_func=n);n=c[0];A=c[1];if(n!==e[0]||A!==e[1])C.depthRange(n,A),e[0]=n,e[1]=A;n=O.depth_mask;n!==f.depth_mask&&(C.depthMask(n),f.depth_mask=n);n=B[0];A=B[1];q=B[2];M=B[3];if(n!==ha[0]||A!==ha[1]||q!==ha[2]||M!==ha[3])C.colorMask(n,A,q,M),ha[0]=n,ha[1]=A,
ha[2]=q,ha[3]=M;n=O.cull_enable;n!==f.cull_enable&&(n?C.enable(2884):C.disable(2884),f.cull_enable=n);n=O.cull_face;n!==f.cull_face&&(C.cullFace(n),f.cull_face=n);n=O.frontFace;n!==f.frontFace&&(C.frontFace(n),f.frontFace=n);n=O.lineWidth;n!==f.lineWidth&&(C.lineWidth(n),f.lineWidth=n);n=O.polygonOffset_enable;n!==f.polygonOffset_enable&&(n?C.enable(32823):C.disable(32823),f.polygonOffset_enable=n);n=U[0];A=U[1];if(n!==p[0]||A!==p[1])C.polygonOffset(n,A),p[0]=n,p[1]=A;n=O.sample_alpha;n!==f.sample_alpha&&
(n?C.enable(32926):C.disable(32926),f.sample_alpha=n);n=O.sample_enable;n!==f.sample_enable&&(n?C.enable(32928):C.disable(32928),f.sample_enable=n);n=Z[0];A=Z[1];if(n!==h[0]||A!==h[1])C.sampleCoverage(n,A),h[0]=n,h[1]=A;n=O.stencil_enable;n!==f.stencil_enable&&(n?C.enable(2960):C.disable(2960),f.stencil_enable=n);n=O.stencil_mask;n!==f.stencil_mask&&(C.stencilMask(n),f.stencil_mask=n);n=D[0];A=D[1];q=D[2];if(n!==E[0]||A!==E[1]||q!==E[2])C.stencilFunc(n,A,q),E[0]=n,E[1]=A,E[2]=q;n=a[0];A=a[1];q=a[2];
M=a[3];if(n!==va[0]||A!==va[1]||q!==va[2]||M!==va[3])C.stencilOpSeparate(n,A,q,M),va[0]=n,va[1]=A,va[2]=q,va[3]=M;n=b[0];A=b[1];q=b[2];M=b[3];if(n!==x[0]||A!==x[1]||q!==x[2]||M!==x[3])C.stencilOpSeparate(n,A,q,M),x[0]=n,x[1]=A,x[2]=q,x[3]=M;n=O.scissor_enable;n!==f.scissor_enable&&(n?C.enable(3089):C.disable(3089),f.scissor_enable=n);n=y[0];A=y[1];q=y[2];M=y[3];if(n!==da[0]||A!==da[1]||q!==da[2]||M!==da[3])C.scissor(n,A,q,M),da[0]=n,da[1]=A,da[2]=q,da[3]=M;n=z[0];A=z[1];q=z[2];M=z[3];if(n!==ja[0]||
A!==ja[1]||q!==ja[2]||M!==ja[3])C.viewport(n,A,q,M),ja[0]=n,ja[1]=A,ja[2]=q,ja[3]=M;f.dirty=!1}if(n=f.profile)d=performance.now(),J.count++;A=I.program(I.vert,I.frag,H);C.useProgram(A.program);k.setVAO(null);q=A.id;(M=aa[q])||(M=aa[q]=g(A));M.call(this,l);k.setVAO(null);n&&(J.cpuTime+=performance.now()-d)},scope:function(a,b,e){var c,h;if(c=f.profile)h=performance.now(),J.count++;b(n,a,e);c&&(J.cpuTime+=performance.now()-h)},batch:function(n,d){var g,A,q,M,P;g=F.next;g!==F.cur&&(g?C.bindFramebuffer(36160,
g.framebuffer):C.bindFramebuffer(36160,null),F.cur=g);if(f.dirty){g=O.dither;g!==f.dither&&(g?C.enable(3024):C.disable(3024),f.dither=g);g=O.blend_enable;g!==f.blend_enable&&(g?C.enable(3042):C.disable(3042),f.blend_enable=g);g=u[0];q=u[1];M=u[2];P=u[3];if(g!==L[0]||q!==L[1]||M!==L[2]||P!==L[3])C.blendColor(g,q,M,P),L[0]=g,L[1]=q,L[2]=M,L[3]=P;g=W[0];q=W[1];if(g!==t[0]||q!==t[1])C.blendEquationSeparate(g,q),t[0]=g,t[1]=q;g=N[0];q=N[1];M=N[2];P=N[3];if(g!==w[0]||q!==w[1]||M!==w[2]||P!==w[3])C.blendFuncSeparate(g,
q,M,P),w[0]=g,w[1]=q,w[2]=M,w[3]=P;g=O.depth_enable;g!==f.depth_enable&&(g?C.enable(2929):C.disable(2929),f.depth_enable=g);g=O.depth_func;g!==f.depth_func&&(C.depthFunc(g),f.depth_func=g);g=c[0];q=c[1];if(g!==e[0]||q!==e[1])C.depthRange(g,q),e[0]=g,e[1]=q;g=O.depth_mask;g!==f.depth_mask&&(C.depthMask(g),f.depth_mask=g);g=B[0];q=B[1];M=B[2];P=B[3];if(g!==ha[0]||q!==ha[1]||M!==ha[2]||P!==ha[3])C.colorMask(g,q,M,P),ha[0]=g,ha[1]=q,ha[2]=M,ha[3]=P;g=O.cull_enable;g!==f.cull_enable&&(g?C.enable(2884):
C.disable(2884),f.cull_enable=g);g=O.cull_face;g!==f.cull_face&&(C.cullFace(g),f.cull_face=g);g=O.frontFace;g!==f.frontFace&&(C.frontFace(g),f.frontFace=g);g=O.lineWidth;g!==f.lineWidth&&(C.lineWidth(g),f.lineWidth=g);g=O.polygonOffset_enable;g!==f.polygonOffset_enable&&(g?C.enable(32823):C.disable(32823),f.polygonOffset_enable=g);g=U[0];q=U[1];if(g!==p[0]||q!==p[1])C.polygonOffset(g,q),p[0]=g,p[1]=q;g=O.sample_alpha;g!==f.sample_alpha&&(g?C.enable(32926):C.disable(32926),f.sample_alpha=g);g=O.sample_enable;
g!==f.sample_enable&&(g?C.enable(32928):C.disable(32928),f.sample_enable=g);g=Z[0];q=Z[1];if(g!==h[0]||q!==h[1])C.sampleCoverage(g,q),h[0]=g,h[1]=q;g=O.stencil_enable;g!==f.stencil_enable&&(g?C.enable(2960):C.disable(2960),f.stencil_enable=g);g=O.stencil_mask;g!==f.stencil_mask&&(C.stencilMask(g),f.stencil_mask=g);g=D[0];q=D[1];M=D[2];if(g!==E[0]||q!==E[1]||M!==E[2])C.stencilFunc(g,q,M),E[0]=g,E[1]=q,E[2]=M;g=a[0];q=a[1];M=a[2];P=a[3];if(g!==va[0]||q!==va[1]||M!==va[2]||P!==va[3])C.stencilOpSeparate(g,
q,M,P),va[0]=g,va[1]=q,va[2]=M,va[3]=P;g=b[0];q=b[1];M=b[2];P=b[3];if(g!==x[0]||q!==x[1]||M!==x[2]||P!==x[3])C.stencilOpSeparate(g,q,M,P),x[0]=g,x[1]=q,x[2]=M,x[3]=P;g=O.scissor_enable;g!==f.scissor_enable&&(g?C.enable(3089):C.disable(3089),f.scissor_enable=g);g=y[0];q=y[1];M=y[2];P=y[3];if(g!==da[0]||q!==da[1]||M!==da[2]||P!==da[3])C.scissor(g,q,M,P),da[0]=g,da[1]=q,da[2]=M,da[3]=P;g=z[0];q=z[1];M=z[2];P=z[3];if(g!==ja[0]||q!==ja[1]||M!==ja[2]||P!==ja[3])C.viewport(g,q,M,P),ja[0]=g,ja[1]=q,ja[2]=
M,ja[3]=P;f.dirty=!1}if(g=f.profile)A=performance.now(),J.count+=d;q=I.program(I.vert,I.frag,H);C.useProgram(q.program);k.setVAO(null);M=q.id;(P=X[M])||(P=X[M]=l(q));P.call(this,n,d);k.setVAO(null);g&&(J.cpuTime+=performance.now()-A)}}},"$26,color,freq,phase,projection,time,view":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x){var a,va,z,ja,aa,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,ba,Hb,ia;a=d.attributes;va=d.context;z=d.current;
ja=d.draw;aa=d.elements;X=d.framebuffer;fa=d.gl;R=d.isArrayLike;T=d.next;A=d.shader;q=d.uniforms;M=d.vao;P=T.blend_color;wa=z.blend_color;qa=T.blend_equation;r=z.blend_equation;G=T.blend_func;ca=z.blend_func;S=T.colorMask;ma=z.colorMask;ra=T.depth_range;za=z.depth_range;ya=T.polygonOffset_offset;ga=z.polygonOffset_offset;Ca=T.sample_coverage;ka=z.sample_coverage;pa=T.scissor_box;xa=z.scissor_box;La=T.stencil_func;oa=z.stencil_func;fb=T.stencil_opBack;Ta=z.stencil_opBack;v=T.stencil_opFront;m=z.stencil_opFront;
K=T.viewport;ua=z.viewport;Ba=new Float32Array(16);ba=new Float32Array(16);Hb=new Float32Array(16);ia=new Float32Array(16);return{draw:function(e){var c,h,q,p;c=X.next;c!==X.cur&&(c?fa.bindFramebuffer(36160,c.framebuffer):fa.bindFramebuffer(36160,null),X.cur=c);if(z.dirty){var d;c=T.dither;c!==z.dither&&(c?fa.enable(3024):fa.disable(3024),z.dither=c);c=T.blend_enable;c!==z.blend_enable&&(c?fa.enable(3042):fa.disable(3042),z.blend_enable=c);c=P[0];q=P[1];p=P[2];d=P[3];if(c!==wa[0]||q!==wa[1]||p!==
wa[2]||d!==wa[3])fa.blendColor(c,q,p,d),wa[0]=c,wa[1]=q,wa[2]=p,wa[3]=d;c=qa[0];q=qa[1];if(c!==r[0]||q!==r[1])fa.blendEquationSeparate(c,q),r[0]=c,r[1]=q;c=G[0];q=G[1];p=G[2];d=G[3];if(c!==ca[0]||q!==ca[1]||p!==ca[2]||d!==ca[3])fa.blendFuncSeparate(c,q,p,d),ca[0]=c,ca[1]=q,ca[2]=p,ca[3]=d;c=T.depth_enable;c!==z.depth_enable&&(c?fa.enable(2929):fa.disable(2929),z.depth_enable=c);c=T.depth_func;c!==z.depth_func&&(fa.depthFunc(c),z.depth_func=c);c=ra[0];q=ra[1];if(c!==za[0]||q!==za[1])fa.depthRange(c,
q),za[0]=c,za[1]=q;c=T.depth_mask;c!==z.depth_mask&&(fa.depthMask(c),z.depth_mask=c);c=S[0];q=S[1];p=S[2];d=S[3];if(c!==ma[0]||q!==ma[1]||p!==ma[2]||d!==ma[3])fa.colorMask(c,q,p,d),ma[0]=c,ma[1]=q,ma[2]=p,ma[3]=d;c=T.cull_enable;c!==z.cull_enable&&(c?fa.enable(2884):fa.disable(2884),z.cull_enable=c);c=T.cull_face;c!==z.cull_face&&(fa.cullFace(c),z.cull_face=c);c=T.frontFace;c!==z.frontFace&&(fa.frontFace(c),z.frontFace=c);c=T.lineWidth;c!==z.lineWidth&&(fa.lineWidth(c),z.lineWidth=c);c=T.polygonOffset_enable;
c!==z.polygonOffset_enable&&(c?fa.enable(32823):fa.disable(32823),z.polygonOffset_enable=c);c=ya[0];q=ya[1];if(c!==ga[0]||q!==ga[1])fa.polygonOffset(c,q),ga[0]=c,ga[1]=q;c=T.sample_alpha;c!==z.sample_alpha&&(c?fa.enable(32926):fa.disable(32926),z.sample_alpha=c);c=T.sample_enable;c!==z.sample_enable&&(c?fa.enable(32928):fa.disable(32928),z.sample_enable=c);c=Ca[0];q=Ca[1];if(c!==ka[0]||q!==ka[1])fa.sampleCoverage(c,q),ka[0]=c,ka[1]=q;c=T.stencil_enable;c!==z.stencil_enable&&(c?fa.enable(2960):fa.disable(2960),
z.stencil_enable=c);c=T.stencil_mask;c!==z.stencil_mask&&(fa.stencilMask(c),z.stencil_mask=c);c=La[0];q=La[1];p=La[2];if(c!==oa[0]||q!==oa[1]||p!==oa[2])fa.stencilFunc(c,q,p),oa[0]=c,oa[1]=q,oa[2]=p;c=v[0];q=v[1];p=v[2];d=v[3];if(c!==m[0]||q!==m[1]||p!==m[2]||d!==m[3])fa.stencilOpSeparate(c,q,p,d),m[0]=c,m[1]=q,m[2]=p,m[3]=d;c=fb[0];q=fb[1];p=fb[2];d=fb[3];if(c!==Ta[0]||q!==Ta[1]||p!==Ta[2]||d!==Ta[3])fa.stencilOpSeparate(c,q,p,d),Ta[0]=c,Ta[1]=q,Ta[2]=p,Ta[3]=d;c=T.scissor_enable;c!==z.scissor_enable&&
(c?fa.enable(3089):fa.disable(3089),z.scissor_enable=c);c=pa[0];q=pa[1];p=pa[2];d=pa[3];if(c!==xa[0]||q!==xa[1]||p!==xa[2]||d!==xa[3])fa.scissor(c,q,p,d),xa[0]=c,xa[1]=q,xa[2]=p,xa[3]=d;c=K[0];q=K[1];p=K[2];d=K[3];if(c!==ua[0]||q!==ua[1]||p!==ua[2]||d!==ua[3])fa.viewport(c,q,p,d),ua[0]=c,ua[1]=q,ua[2]=p,ua[3]=d;z.dirty=!1}if(c=z.profile)h=performance.now(),J.count++;fa.useProgram(g.program);M.setVAO(null);q=da.location;p=a[q];p.buffer||fa.enableVertexAttribArray(q);if(5126!==p.type||4!==p.size||p.buffer!==
l||!1!==p.normalized||0!==p.offset||44!==p.stride)fa.bindBuffer(34962,l.buffer),fa.vertexAttribPointer(q,4,5126,!1,44,0),p.type=5126,p.size=4,p.buffer=l,p.normalized=!1,p.offset=0,p.stride=44;q=D.location;p=a[q];p.buffer||fa.enableVertexAttribArray(q);if(5126!==p.type||4!==p.size||p.buffer!==n||!1!==p.normalized||16!==p.offset||44!==p.stride)fa.bindBuffer(34962,n.buffer),fa.vertexAttribPointer(q,4,5126,!1,44,16),p.type=5126,p.size=4,p.buffer=n,p.normalized=!1,p.offset=16,p.stride=44;q=y.location;
p=a[q];p.buffer||fa.enableVertexAttribArray(q);if(5126!==p.type||3!==p.size||p.buffer!==f||!1!==p.normalized||32!==p.offset||44!==p.stride)fa.bindBuffer(34962,f.buffer),fa.vertexAttribPointer(q,3,5126,!1,44,32),p.type=5126,p.size=3,p.buffer=f,p.normalized=!1,p.offset=32,p.stride=44;q=F.call(this,va,e,0);"number"!==typeof q&&V.commandRaise(C,H);fa.uniform1f(b.location,q);q=O.call(this,va,e,0);R(q)&&16===q.length||V.commandRaise(I,H);fa.uniformMatrix4fv(x.location,!1,Array.isArray(q)||q instanceof Float32Array?
q:(Ba[0]=q[0],Ba[1]=q[1],Ba[2]=q[2],Ba[3]=q[3],Ba[4]=q[4],Ba[5]=q[5],Ba[6]=q[6],Ba[7]=q[7],Ba[8]=q[8],Ba[9]=q[9],Ba[10]=q[10],Ba[11]=q[11],Ba[12]=q[12],Ba[13]=q[13],Ba[14]=q[14],Ba[15]=q[15],Ba));e=k.call(this,va,e,0);R(e)&&16===e.length||V.commandRaise(u,H);fa.uniformMatrix4fv(E.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ba[0]=e[0],ba[1]=e[1],ba[2]=e[2],ba[3]=e[3],ba[4]=e[4],ba[5]=e[5],ba[6]=e[6],ba[7]=e[7],ba[8]=e[8],ba[9]=e[9],ba[10]=e[10],ba[11]=e[11],ba[12]=e[12],ba[13]=e[13],
ba[14]=e[14],ba[15]=e[15],ba));(e=ja.elements)?fa.bindBuffer(34963,e.buffer.buffer):M.currentVAO&&(e=aa.getElements(M.currentVAO.elements))&&fa.bindBuffer(34963,e.buffer.buffer);q=ja.offset;e?fa.drawElements(0,1E4,e.type,q<<(e.type-5121>>1)):fa.drawArrays(0,q,1E4);M.setVAO(null);c&&(J.cpuTime+=performance.now()-h)},scope:function(a,b,e){var c,h,m,r,p,g,v,d,K,x,y,oa,D,G,E,S,ga,ia,u,fb,k,La,H,C,M,ca,F,P,ua,I,R,V,T,U,O,ya,ra,ka,ha,Z,X,da,wa,fa,Ta;if(c=z.profile)h=performance.now(),J.count++;m=ja.count;
ja.count=1E4;r=ja.primitive;ja.primitive=0;p=L.call(this,va,a,e);g=q[5];q[5]=p;v=W.call(this,va,a,e);p=q[3];q[3]=v;d=t.call(this,va,a,e);v=q[4];q[4]=d;d=N.buffer;N.buffer=f;K=N.divisor;N.divisor=0;x=N.normalized;N.normalized=!1;y=N.offset;N.offset=32;oa=N.size;N.size=0;D=N.state;N.state=1;G=N.stride;N.stride=44;E=N.type;N.type=5126;S=N.w;N.w=0;ga=N.x;N.x=0;ia=N.y;N.y=0;u=N.z;N.z=0;fb=w.buffer;w.buffer=l;k=w.divisor;w.divisor=0;La=w.normalized;w.normalized=!1;H=w.offset;w.offset=0;C=w.size;w.size=
0;M=w.state;w.state=1;ca=w.stride;w.stride=44;F=w.type;w.type=5126;P=w.w;w.w=0;ua=w.x;w.x=0;I=w.y;w.y=0;R=w.z;w.z=0;V=B.buffer;B.buffer=n;T=B.divisor;B.divisor=0;U=B.normalized;B.normalized=!1;O=B.offset;B.offset=16;ya=B.size;B.size=0;ra=B.state;B.state=1;ka=B.stride;B.stride=44;ha=B.type;B.type=5126;Z=B.w;B.w=0;X=B.x;B.x=0;da=B.y;B.y=0;wa=B.z;B.z=0;fa=A.vert;A.vert=2;Ta=A.frag;A.frag=1;b(va,a,e);c&&(J.cpuTime+=performance.now()-h);ja.count=m;ja.primitive=r;q[5]=g;q[3]=p;q[4]=v;N.buffer=d;N.divisor=
K;N.normalized=x;N.offset=y;N.size=oa;N.state=D;N.stride=G;N.type=E;N.w=S;N.x=ga;N.y=ia;N.z=u;w.buffer=fb;w.divisor=k;w.normalized=La;w.offset=H;w.size=C;w.state=M;w.stride=ca;w.type=F;w.w=P;w.x=ua;w.y=I;w.z=R;B.buffer=V;B.divisor=T;B.normalized=U;B.offset=O;B.size=ya;B.state=ra;B.stride=ka;B.type=ha;B.w=Z;B.x=X;B.y=da;B.z=wa;A.vert=fa;A.frag=Ta},batch:function(q,g){var d,t,w;d=X.next;d!==X.cur&&(d?fa.bindFramebuffer(36160,d.framebuffer):fa.bindFramebuffer(36160,null),X.cur=d);if(z.dirty){var A,u,
k;d=T.dither;d!==z.dither&&(d?fa.enable(3024):fa.disable(3024),z.dither=d);d=T.blend_enable;d!==z.blend_enable&&(d?fa.enable(3042):fa.disable(3042),z.blend_enable=d);d=P[0];A=P[1];u=P[2];k=P[3];if(d!==wa[0]||A!==wa[1]||u!==wa[2]||k!==wa[3])fa.blendColor(d,A,u,k),wa[0]=d,wa[1]=A,wa[2]=u,wa[3]=k;d=qa[0];A=qa[1];if(d!==r[0]||A!==r[1])fa.blendEquationSeparate(d,A),r[0]=d,r[1]=A;d=G[0];A=G[1];u=G[2];k=G[3];if(d!==ca[0]||A!==ca[1]||u!==ca[2]||k!==ca[3])fa.blendFuncSeparate(d,A,u,k),ca[0]=d,ca[1]=A,ca[2]=
u,ca[3]=k;d=T.depth_enable;d!==z.depth_enable&&(d?fa.enable(2929):fa.disable(2929),z.depth_enable=d);d=T.depth_func;d!==z.depth_func&&(fa.depthFunc(d),z.depth_func=d);d=ra[0];A=ra[1];if(d!==za[0]||A!==za[1])fa.depthRange(d,A),za[0]=d,za[1]=A;d=T.depth_mask;d!==z.depth_mask&&(fa.depthMask(d),z.depth_mask=d);d=S[0];A=S[1];u=S[2];k=S[3];if(d!==ma[0]||A!==ma[1]||u!==ma[2]||k!==ma[3])fa.colorMask(d,A,u,k),ma[0]=d,ma[1]=A,ma[2]=u,ma[3]=k;d=T.cull_enable;d!==z.cull_enable&&(d?fa.enable(2884):fa.disable(2884),
z.cull_enable=d);d=T.cull_face;d!==z.cull_face&&(fa.cullFace(d),z.cull_face=d);d=T.frontFace;d!==z.frontFace&&(fa.frontFace(d),z.frontFace=d);d=T.lineWidth;d!==z.lineWidth&&(fa.lineWidth(d),z.lineWidth=d);d=T.polygonOffset_enable;d!==z.polygonOffset_enable&&(d?fa.enable(32823):fa.disable(32823),z.polygonOffset_enable=d);d=ya[0];A=ya[1];if(d!==ga[0]||A!==ga[1])fa.polygonOffset(d,A),ga[0]=d,ga[1]=A;d=T.sample_alpha;d!==z.sample_alpha&&(d?fa.enable(32926):fa.disable(32926),z.sample_alpha=d);d=T.sample_enable;
d!==z.sample_enable&&(d?fa.enable(32928):fa.disable(32928),z.sample_enable=d);d=Ca[0];A=Ca[1];if(d!==ka[0]||A!==ka[1])fa.sampleCoverage(d,A),ka[0]=d,ka[1]=A;d=T.stencil_enable;d!==z.stencil_enable&&(d?fa.enable(2960):fa.disable(2960),z.stencil_enable=d);d=T.stencil_mask;d!==z.stencil_mask&&(fa.stencilMask(d),z.stencil_mask=d);d=La[0];A=La[1];u=La[2];if(d!==oa[0]||A!==oa[1]||u!==oa[2])fa.stencilFunc(d,A,u),oa[0]=d,oa[1]=A,oa[2]=u;d=v[0];A=v[1];u=v[2];k=v[3];if(d!==m[0]||A!==m[1]||u!==m[2]||k!==m[3])fa.stencilOpSeparate(d,
A,u,k),m[0]=d,m[1]=A,m[2]=u,m[3]=k;d=fb[0];A=fb[1];u=fb[2];k=fb[3];if(d!==Ta[0]||A!==Ta[1]||u!==Ta[2]||k!==Ta[3])fa.stencilOpSeparate(d,A,u,k),Ta[0]=d,Ta[1]=A,Ta[2]=u,Ta[3]=k;d=T.scissor_enable;d!==z.scissor_enable&&(d?fa.enable(3089):fa.disable(3089),z.scissor_enable=d);d=pa[0];A=pa[1];u=pa[2];k=pa[3];if(d!==xa[0]||A!==xa[1]||u!==xa[2]||k!==xa[3])fa.scissor(d,A,u,k),xa[0]=d,xa[1]=A,xa[2]=u,xa[3]=k;d=K[0];A=K[1];u=K[2];k=K[3];if(d!==ua[0]||A!==ua[1]||u!==ua[2]||k!==ua[3])fa.viewport(d,A,u,k),ua[0]=
d,ua[1]=A,ua[2]=u,ua[3]=k;z.dirty=!1}if(d=z.profile)t=performance.now(),J.count+=g;fa.useProgram(ha.program);M.setVAO(null);A=da.location;u=a[A];u.buffer||fa.enableVertexAttribArray(A);if(5126!==u.type||4!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||44!==u.stride)fa.bindBuffer(34962,l.buffer),fa.vertexAttribPointer(A,4,5126,!1,44,0),u.type=5126,u.size=4,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=44;A=D.location;u=a[A];u.buffer||fa.enableVertexAttribArray(A);if(5126!==u.type||4!==u.size||
u.buffer!==n||!1!==u.normalized||16!==u.offset||44!==u.stride)fa.bindBuffer(34962,n.buffer),fa.vertexAttribPointer(A,4,5126,!1,44,16),u.type=5126,u.size=4,u.buffer=n,u.normalized=!1,u.offset=16,u.stride=44;A=y.location;u=a[A];u.buffer||fa.enableVertexAttribArray(A);if(5126!==u.type||3!==u.size||u.buffer!==f||!1!==u.normalized||32!==u.offset||44!==u.stride)fa.bindBuffer(34962,f.buffer),fa.vertexAttribPointer(A,3,5126,!1,44,32),u.type=5126,u.size=3,u.buffer=f,u.normalized=!1,u.offset=32,u.stride=44;
A=c.call(this,va,void 0,w);"number"!==typeof A&&V.commandRaise(e,H);fa.uniform1f(b.location,A);A=U.call(this,va,void 0,w);R(A)&&16===A.length||V.commandRaise(p,H);fa.uniformMatrix4fv(x.location,!1,Array.isArray(A)||A instanceof Float32Array?A:(Hb[0]=A[0],Hb[1]=A[1],Hb[2]=A[2],Hb[3]=A[3],Hb[4]=A[4],Hb[5]=A[5],Hb[6]=A[6],Hb[7]=A[7],Hb[8]=A[8],Hb[9]=A[9],Hb[10]=A[10],Hb[11]=A[11],Hb[12]=A[12],Hb[13]=A[13],Hb[14]=A[14],Hb[15]=A[15],Hb));w=Z.call(this,va,void 0,w);R(w)&&16===w.length||V.commandRaise(h,
H);fa.uniformMatrix4fv(E.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(ia[0]=w[0],ia[1]=w[1],ia[2]=w[2],ia[3]=w[3],ia[4]=w[4],ia[5]=w[5],ia[6]=w[6],ia[7]=w[7],ia[8]=w[8],ia[9]=w[9],ia[10]=w[10],ia[11]=w[11],ia[12]=w[12],ia[13]=w[13],ia[14]=w[14],ia[15]=w[15],ia));(A=ja.elements)?fa.bindBuffer(34963,A.buffer.buffer):M.currentVAO&&(A=aa.getElements(M.currentVAO.elements))&&fa.bindBuffer(34963,A.buffer.buffer);u=ja.offset;for(w=0;w<g;++w)A?fa.drawElements(0,1E4,A.type,u<<(A.type-5121>>1)):
fa.drawArrays(0,u,1E4);M.setVAO(null);d&&(J.cpuTime+=performance.now()-t)}}},"$34,atlas,normal,position,projection,uv,view":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa,R){var T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,ba,Hb,ia,Q,sa,Fa,na,Aa,Ea,la,Y,ta,Ia,Da;T=d.attributes;A=d.buffer;q=d.context;M=d.current;P=d.draw;wa=d.elements;qa=d.framebuffer;r=d.gl;G=d.isArrayLike;ca=d.isBufferArgs;S=d.next;ma=d.shader;ra=d.uniforms;
za=d.vao;ya=S.blend_color;ga=M.blend_color;Ca=S.blend_equation;ka=M.blend_equation;pa=S.blend_func;xa=M.blend_func;La=S.colorMask;oa=M.colorMask;fb=S.depth_range;Ta=M.depth_range;v=S.polygonOffset_offset;m=M.polygonOffset_offset;K=S.sample_coverage;ua=M.sample_coverage;Ba=S.scissor_box;ba=M.scissor_box;Hb=S.stencil_func;ia=M.stencil_func;Q=S.stencil_opBack;sa=M.stencil_opBack;Fa=S.stencil_opFront;na=M.stencil_opFront;Aa=S.viewport;Ea=M.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,
uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);ta=new Float32Array(16);Ia=new Float32Array(16);Da=new Float32Array(16);return{draw:function(a){var b,e,c,h,p,d,x,y,w,t,D,E,B,P,N,U,ra,ha,Z,W,da,ma,va,Da,Ia,Ma,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb,ab,ob;b=q.view;e=g.call(this,q,a,0);q.view=e;c=qa.next;c!==qa.cur&&(c?r.bindFramebuffer(36160,c.framebuffer):r.bindFramebuffer(36160,null),qa.cur=c);if(M.dirty){var Va,Cd,Ib,Jb,
qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb;Va=S.dither;Va!==M.dither&&(Va?r.enable(3024):r.disable(3024),M.dither=Va);Cd=S.blend_enable;Cd!==M.blend_enable&&(Cd?r.enable(3042):r.disable(3042),M.blend_enable=Cd);Ib=ya[0];Jb=ya[1];qc=ya[2];Ob=ya[3];if(Ib!==ga[0]||Jb!==ga[1]||qc!==ga[2]||Ob!==ga[3])r.blendColor(Ib,Jb,qc,Ob),ga[0]=Ib,ga[1]=Jb,ga[2]=qc,ga[3]=Ob;kb=Ca[0];Gb=Ca[1];if(kb!==ka[0]||Gb!==ka[1])r.blendEquationSeparate(kb,
Gb),ka[0]=kb,ka[1]=Gb;Db=pa[0];wb=pa[1];ib=pa[2];Yb=pa[3];if(Db!==xa[0]||wb!==xa[1]||ib!==xa[2]||Yb!==xa[3])r.blendFuncSeparate(Db,wb,ib,Yb),xa[0]=Db,xa[1]=wb,xa[2]=ib,xa[3]=Yb;Pb=S.depth_enable;Pb!==M.depth_enable&&(Pb?r.enable(2929):r.disable(2929),M.depth_enable=Pb);qb=S.depth_func;qb!==M.depth_func&&(r.depthFunc(qb),M.depth_func=qb);Ua=fb[0];Ub=fb[1];if(Ua!==Ta[0]||Ub!==Ta[1])r.depthRange(Ua,Ub),Ta[0]=Ua,Ta[1]=Ub;zb=S.depth_mask;zb!==M.depth_mask&&(r.depthMask(zb),M.depth_mask=zb);bc=La[0];jb=
La[1];pb=La[2];Ha=La[3];if(bc!==oa[0]||jb!==oa[1]||pb!==oa[2]||Ha!==oa[3])r.colorMask(bc,jb,pb,Ha),oa[0]=bc,oa[1]=jb,oa[2]=pb,oa[3]=Ha;rb=S.frontFace;rb!==M.frontFace&&(r.frontFace(rb),M.frontFace=rb);Ja=S.lineWidth;Ja!==M.lineWidth&&(r.lineWidth(Ja),M.lineWidth=Ja);eb=S.polygonOffset_enable;eb!==M.polygonOffset_enable&&(eb?r.enable(32823):r.disable(32823),M.polygonOffset_enable=eb);gb=v[0];Ka=v[1];if(gb!==m[0]||Ka!==m[1])r.polygonOffset(gb,Ka),m[0]=gb,m[1]=Ka;lb=S.sample_alpha;lb!==M.sample_alpha&&
(lb?r.enable(32926):r.disable(32926),M.sample_alpha=lb);Wa=S.sample_enable;Wa!==M.sample_enable&&(Wa?r.enable(32928):r.disable(32928),M.sample_enable=Wa);tb=K[0];sb=K[1];if(tb!==ua[0]||sb!==ua[1])r.sampleCoverage(tb,sb),ua[0]=tb,ua[1]=sb;Pa=S.stencil_enable;Pa!==M.stencil_enable&&(Pa?r.enable(2960):r.disable(2960),M.stencil_enable=Pa);Ac=S.stencil_mask;Ac!==M.stencil_mask&&(r.stencilMask(Ac),M.stencil_mask=Ac);Ra=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Ra!==ia[0]||Kb!==ia[1]||Eb!==ia[2])r.stencilFunc(Ra,Kb,Eb),
ia[0]=Ra,ia[1]=Kb,ia[2]=Eb;Na=Fa[0];xd=Fa[1];Ya=Fa[2];Lb=Fa[3];if(Na!==na[0]||xd!==na[1]||Ya!==na[2]||Lb!==na[3])r.stencilOpSeparate(Na,xd,Ya,Lb),na[0]=Na,na[1]=xd,na[2]=Ya,na[3]=Lb;Mb=Q[0];mb=Q[1];Oa=Q[2];Zb=Q[3];if(Mb!==sa[0]||mb!==sa[1]||Oa!==sa[2]||Zb!==sa[3])r.stencilOpSeparate(Mb,mb,Oa,Zb),sa[0]=Mb,sa[1]=mb,sa[2]=Oa,sa[3]=Zb;Qa=S.scissor_enable;Qa!==M.scissor_enable&&(Qa?r.enable(3089):r.disable(3089),M.scissor_enable=Qa);ub=Ba[0];vb=Ba[1];Sa=Ba[2];nb=Ba[3];if(ub!==ba[0]||vb!==ba[1]||Sa!==ba[2]||
nb!==ba[3])r.scissor(ub,vb,Sa,nb),ba[0]=ub,ba[1]=vb,ba[2]=Sa,ba[3]=nb;gc=Aa[0];Dc=Aa[1];uc=Aa[2];bb=Aa[3];if(gc!==Ea[0]||Dc!==Ea[1]||uc!==Ea[2]||bb!==Ea[3])r.viewport(gc,Dc,uc,bb),Ea[0]=gc,Ea[1]=Dc,Ea[2]=uc,Ea[3]=bb}r.enable(2884);M.cull_enable=!0;r.cullFace(1029);M.cull_face=1029;if(h=M.profile)p=performance.now(),J.count++;r.useProgram(l.program);za.setVAO(null);(d=a.position)&&("object"===typeof d||"function"===typeof d)&&(ca(d)||A.getBuffer(d)||A.getBuffer(d.buffer)||ca(d.buffer)||"constant"in
d&&("number"===typeof d.constant||G(d.constant)))||V.commandRaise(n,H);x=!1;y=null;w=!1;D=t=0;E=1;B=0;P=5126;ha=ra=U=N=0;ca(d)?(x=!0,y=A.createStream(34962,d),P=y.dtype):(y=A.getBuffer(d))?P=y.dtype:"constant"in d?(E=2,"number"===typeof d.constant?(U=d.constant,ra=ha=N=0):(U=0<d.constant.length?d.constant[0]:0,ra=1<d.constant.length?d.constant[1]:0,ha=2<d.constant.length?d.constant[2]:0,N=3<d.constant.length?d.constant[3]:0)):(y=ca(d.buffer)?A.createStream(34962,d.buffer):A.getBuffer(d.buffer),P=
"type"in d?la[d.type]:y.dtype,w=!!d.normalized,D=d.size|0,t=d.offset|0,B=d.stride|0);Z=aa.location;W=T[Z];if(1===E){if(W.buffer||r.enableVertexAttribArray(Z),da=D||3,W.type!==P||W.size!==da||W.buffer!==y||W.normalized!==w||W.offset!==t||W.stride!==B)r.bindBuffer(34962,y.buffer),r.vertexAttribPointer(Z,da,P,w,B,t),W.type=P,W.size=da,W.buffer=y,W.normalized=w,W.offset=t,W.stride=B}else if(W.buffer&&(r.disableVertexAttribArray(Z),W.buffer=null),W.x!==U||W.y!==ra||W.z!==ha||W.w!==N)r.vertexAttrib4f(Z,
U,ra,ha,N),W.x=U,W.y=ra,W.z=ha,W.w=N;(ma=a.normal)&&("object"===typeof ma||"function"===typeof ma)&&(ca(ma)||A.getBuffer(ma)||A.getBuffer(ma.buffer)||ca(ma.buffer)||"constant"in ma&&("number"===typeof ma.constant||G(ma.constant)))||V.commandRaise(f,H);va=!1;Da=null;Ia=!1;Xd=Ma=0;Bd=1;md=0;$c=5126;Ec=pd=Kc=sd=0;ca(ma)?(va=!0,Da=A.createStream(34962,ma),$c=Da.dtype):(Da=A.getBuffer(ma))?$c=Da.dtype:"constant"in ma?(Bd=2,"number"===typeof ma.constant?(Kc=ma.constant,pd=Ec=sd=0):(Kc=0<ma.constant.length?
ma.constant[0]:0,pd=1<ma.constant.length?ma.constant[1]:0,Ec=2<ma.constant.length?ma.constant[2]:0,sd=3<ma.constant.length?ma.constant[3]:0)):(Da=ca(ma.buffer)?A.createStream(34962,ma.buffer):A.getBuffer(ma.buffer),$c="type"in ma?la[ma.type]:Da.dtype,Ia=!!ma.normalized,Xd=ma.size|0,Ma=ma.offset|0,md=ma.stride|0);ed=ja.location;Nc=T[ed];if(1===Bd){if(Nc.buffer||r.enableVertexAttribArray(ed),kd=Xd||3,Nc.type!==$c||Nc.size!==kd||Nc.buffer!==Da||Nc.normalized!==Ia||Nc.offset!==Ma||Nc.stride!==md)r.bindBuffer(34962,
Da.buffer),r.vertexAttribPointer(ed,kd,$c,Ia,md,Ma),Nc.type=$c,Nc.size=kd,Nc.buffer=Da,Nc.normalized=Ia,Nc.offset=Ma,Nc.stride=md}else if(Nc.buffer&&(r.disableVertexAttribArray(ed),Nc.buffer=null),Nc.x!==Kc||Nc.y!==pd||Nc.z!==Ec||Nc.w!==sd)r.vertexAttrib4f(ed,Kc,pd,Ec,sd),Nc.x=Kc,Nc.y=pd,Nc.z=Ec,Nc.w=sd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(ca(Bb)||A.getBuffer(Bb)||A.getBuffer(Bb.buffer)||ca(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||G(Bb.constant)))||V.commandRaise(F,
H);Fb=!1;tc=null;xb=!1;Cb=wc=0;Ic=1;lc=0;Fc=5126;ec=Bc=Tc=Vc=0;ca(Bb)?(Fb=!0,tc=A.createStream(34962,Bb),Fc=tc.dtype):(tc=A.getBuffer(Bb))?Fc=tc.dtype:"constant"in Bb?(Ic=2,"number"===typeof Bb.constant?(Tc=Bb.constant,Bc=ec=Vc=0):(Tc=0<Bb.constant.length?Bb.constant[0]:0,Bc=1<Bb.constant.length?Bb.constant[1]:0,ec=2<Bb.constant.length?Bb.constant[2]:0,Vc=3<Bb.constant.length?Bb.constant[3]:0)):(tc=ca(Bb.buffer)?A.createStream(34962,Bb.buffer):A.getBuffer(Bb.buffer),Fc="type"in Bb?la[Bb.type]:tc.dtype,
xb=!!Bb.normalized,Cb=Bb.size|0,wc=Bb.offset|0,lc=Bb.stride|0);Gc=fa.location;oc=T[Gc];if(1===Ic){if(oc.buffer||r.enableVertexAttribArray(Gc),pc=Cb||2,oc.type!==Fc||oc.size!==pc||oc.buffer!==tc||oc.normalized!==xb||oc.offset!==wc||oc.stride!==lc)r.bindBuffer(34962,tc.buffer),r.vertexAttribPointer(Gc,pc,Fc,xb,lc,wc),oc.type=Fc,oc.size=pc,oc.buffer=tc,oc.normalized=xb,oc.offset=wc,oc.stride=lc}else if(oc.buffer&&(r.disableVertexAttribArray(Gc),oc.buffer=null),oc.x!==Tc||oc.y!==Bc||oc.z!==ec||oc.w!==
Vc)r.vertexAttrib4f(Gc,Tc,Bc,ec,Vc),oc.x=Tc,oc.y=Bc,oc.z=ec,oc.w=Vc;mc=C.call(this,q,a,0);G(mc)&&16===mc.length||V.commandRaise(O,H);r.uniformMatrix4fv(X.location,!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(Y[0]=mc[0],Y[1]=mc[1],Y[2]=mc[2],Y[3]=mc[3],Y[4]=mc[4],Y[5]=mc[5],Y[6]=mc[6],Y[7]=mc[7],Y[8]=mc[8],Y[9]=mc[9],Y[10]=mc[10],Y[11]=mc[11],Y[12]=mc[12],Y[13]=mc[13],Y[14]=mc[14],Y[15]=mc[15],Y));fc=q.view;G(fc)&&16===fc.length||V.commandRaise(I,H);r.uniformMatrix4fv(R.location,!1,Array.isArray(fc)||
fc instanceof Float32Array?fc:(ta[0]=fc[0],ta[1]=fc[1],ta[2]=fc[2],ta[3]=fc[3],ta[4]=fc[4],ta[5]=fc[5],ta[6]=fc[6],ta[7]=fc[7],ta[8]=fc[8],ta[9]=fc[9],ta[10]=fc[10],ta[11]=fc[11],ta[12]=fc[12],ta[13]=fc[13],ta[14]=fc[14],ta[15]=fc[15],ta));($a=a.atlas)&&"framebuffer"===$a._reglType&&($a=$a.color[0]);"function"===typeof $a&&"texture2d"===$a._reglType||V.commandRaise(k,H);Hc=$a._texture;r.uniform1i(z.location,Hc.bind());yb=a.elements;cb=null;(Nb=ca(yb))?cb=wa.createStream(yb):(cb=wa.getElements(yb),
yb&&!cb&&V.commandRaise(u,H));cb&&r.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;ob=cb?cb.vertCount:-1;0<=ob||V.commandRaise(L,H);ob&&(cb?r.drawElements(ab,ob,cb.type,0<<(cb.type-5121>>1)):r.drawArrays(ab,0,ob),M.dirty=!0,za.setVAO(null),q.view=b,h&&(J.cpuTime+=performance.now()-p),x&&A.destroyStream(y),va&&A.destroyStream(Da),Fb&&A.destroyStream(tc),Hc.unbind(),Nb&&wa.destroyStream(cb))},scope:function(a,b,f){var h,l,m,r,p,d,n,g,v,K,x,Q,z,y,oa,D,u,E,k,ga,ia,fb,La,C,L,na,sa,F,Fa,ua,I,R,
T,Y,O,ya,Z,ka,X,da,fa,Ta,pa,Aa,xa,Ca,va,ja,Ea,Ba,za,Hb,qa,aa,ba,ta,Da,Ia,gd,dd,Va,Ma,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb;h=q.view;l=W.call(this,q,a,f);q.view=l;m=S.cull_enable;S.cull_enable=!0;r=S.cull_face;S.cull_face=1029;if(p=M.profile)d=performance.now(),J.count++;n=a.elements;g=null;(v=ca(n))?g=wa.createStream(n):(g=wa.getElements(n),n&&!g&&V.commandRaise(t,H));K=P.elements;P.elements=g;x=P.offset;P.offset=0;Q=g?
g.vertCount:-1;z=P.count;P.count=Q;y=g?g.primType:4;oa=P.primitive;P.primitive=y;D=a.atlas;u=ra[5];ra[5]=D;E=N.call(this,q,a,f);k=ra[3];ra[3]=E;ga=q.view;ia=ra[4];ra[4]=ga;(fb=a.normal)&&("object"===typeof fb||"function"===typeof fb)&&(ca(fb)||A.getBuffer(fb)||A.getBuffer(fb.buffer)||ca(fb.buffer)||"constant"in fb&&("number"===typeof fb.constant||G(fb.constant)))||V.commandRaise(w,H);La=!1;C=null;L=0;na=!1;F=sa=0;Fa=1;ua=0;I=5126;O=Y=T=R=0;ca(fb)?(La=!0,C=A.createStream(34962,fb),I=C.dtype):(C=A.getBuffer(fb))?
I=C.dtype:"constant"in fb?(Fa=2,"number"===typeof fb.constant?(T=fb.constant,Y=O=R=0):(T=0<fb.constant.length?fb.constant[0]:0,Y=1<fb.constant.length?fb.constant[1]:0,O=2<fb.constant.length?fb.constant[2]:0,R=3<fb.constant.length?fb.constant[3]:0)):(C=ca(fb.buffer)?A.createStream(34962,fb.buffer):A.getBuffer(fb.buffer),I="type"in fb?la[fb.type]:C.dtype,na=!!fb.normalized,F=fb.size|0,sa=fb.offset|0,ua=fb.stride|0,L=fb.divisor|0);ya=B.buffer;B.buffer=C;Z=B.divisor;B.divisor=L;ka=B.normalized;B.normalized=
na;X=B.offset;B.offset=sa;da=B.size;B.size=F;fa=B.state;B.state=Fa;Ta=B.stride;B.stride=ua;pa=B.type;B.type=I;Aa=B.w;B.w=R;xa=B.x;B.x=T;Ca=B.y;B.y=Y;va=B.z;B.z=O;(ja=a.position)&&("object"===typeof ja||"function"===typeof ja)&&(ca(ja)||A.getBuffer(ja)||A.getBuffer(ja.buffer)||ca(ja.buffer)||"constant"in ja&&("number"===typeof ja.constant||G(ja.constant)))||V.commandRaise(ha,H);Ea=!1;Ba=null;za=0;Hb=!1;aa=qa=0;ba=1;ta=0;Da=5126;Va=dd=gd=Ia=0;ca(ja)?(Ea=!0,Ba=A.createStream(34962,ja),Da=Ba.dtype):(Ba=
A.getBuffer(ja))?Da=Ba.dtype:"constant"in ja?(ba=2,"number"===typeof ja.constant?(gd=ja.constant,dd=Va=Ia=0):(gd=0<ja.constant.length?ja.constant[0]:0,dd=1<ja.constant.length?ja.constant[1]:0,Va=2<ja.constant.length?ja.constant[2]:0,Ia=3<ja.constant.length?ja.constant[3]:0)):(Ba=ca(ja.buffer)?A.createStream(34962,ja.buffer):A.getBuffer(ja.buffer),Da="type"in ja?la[ja.type]:Ba.dtype,Hb=!!ja.normalized,aa=ja.size|0,qa=ja.offset|0,ta=ja.stride|0,za=ja.divisor|0);Ma=c.buffer;c.buffer=Ba;Ib=c.divisor;
c.divisor=za;Jb=c.normalized;c.normalized=Hb;qc=c.offset;c.offset=qa;Ob=c.size;c.size=aa;kb=c.state;c.state=ba;Gb=c.stride;c.stride=ta;Db=c.type;c.type=Da;wb=c.w;c.w=Ia;ib=c.x;c.x=gd;Yb=c.y;c.y=dd;Pb=c.z;c.z=Va;(qb=a.uv)&&("object"===typeof qb||"function"===typeof qb)&&(ca(qb)||A.getBuffer(qb)||A.getBuffer(qb.buffer)||ca(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||G(qb.constant)))||V.commandRaise(e,H);Ua=!1;Ub=null;zb=0;bc=!1;pb=jb=0;Ha=1;rb=0;Ja=5126;lb=Ka=gb=eb=0;ca(qb)?(Ua=!0,
Ub=A.createStream(34962,qb),Ja=Ub.dtype):(Ub=A.getBuffer(qb))?Ja=Ub.dtype:"constant"in qb?(Ha=2,"number"===typeof qb.constant?(gb=qb.constant,Ka=lb=eb=0):(gb=0<qb.constant.length?qb.constant[0]:0,Ka=1<qb.constant.length?qb.constant[1]:0,lb=2<qb.constant.length?qb.constant[2]:0,eb=3<qb.constant.length?qb.constant[3]:0)):(Ub=ca(qb.buffer)?A.createStream(34962,qb.buffer):A.getBuffer(qb.buffer),Ja="type"in qb?la[qb.type]:Ub.dtype,bc=!!qb.normalized,pb=qb.size|0,jb=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|
0);Wa=U.buffer;U.buffer=Ub;tb=U.divisor;U.divisor=zb;sb=U.normalized;U.normalized=bc;Pa=U.offset;U.offset=jb;Ac=U.size;U.size=pb;Ra=U.state;U.state=Ha;Kb=U.stride;U.stride=rb;Eb=U.type;U.type=Ja;Na=U.w;U.w=eb;xd=U.x;U.x=gb;Ya=U.y;U.y=Ka;Lb=U.z;U.z=lb;Mb=ma.vert;ma.vert=2;mb=ma.frag;ma.frag=1;M.dirty=!0;b(q,a,f);q.view=h;S.cull_enable=m;S.cull_face=r;p&&(J.cpuTime+=performance.now()-d);v&&wa.destroyStream(g);P.elements=K;P.offset=x;P.count=z;P.primitive=oa;ra[5]=u;ra[3]=k;ra[4]=ia;La&&A.destroyStream(C);
B.buffer=ya;B.divisor=Z;B.normalized=ka;B.offset=X;B.size=da;B.state=fa;B.stride=Ta;B.type=pa;B.w=Aa;B.x=xa;B.y=Ca;B.z=va;Ea&&A.destroyStream(Ba);c.buffer=Ma;c.divisor=Ib;c.normalized=Jb;c.offset=qc;c.size=Ob;c.state=kb;c.stride=Gb;c.type=Db;c.w=wb;c.x=ib;c.y=Yb;c.z=Pb;Ua&&A.destroyStream(Ub);U.buffer=Wa;U.divisor=tb;U.normalized=sb;U.offset=Pa;U.size=Ac;U.state=Ra;U.stride=Kb;U.type=Eb;U.w=Na;U.x=xd;U.y=Ya;U.z=Lb;ma.vert=Mb;ma.frag=mb;M.dirty=!0},batch:function(e,c){var f,l,n,d,g,w,t;f=q.view;l=
p.call(this,q,e,0);q.view=l;n=qa.next;n!==qa.cur&&(n?r.bindFramebuffer(36160,n.framebuffer):r.bindFramebuffer(36160,null),qa.cur=n);if(M.dirty){var u,k,C,L,B,F,P,I,N,Y,U,O,ra,W,ha,ma,ta,Ma,Xd,Bd,md,$c,sd,Kc,pd,Ec,ed,Nc,kd,Bb,Fb,tc,xb,wc,Cb,Ic,lc,Fc,Vc,Tc,Bc,ec,Gc,oc,pc,mc,fc,$a,Hc,yb,cb,Nb;u=S.dither;u!==M.dither&&(u?r.enable(3024):r.disable(3024),M.dither=u);k=S.blend_enable;k!==M.blend_enable&&(k?r.enable(3042):r.disable(3042),M.blend_enable=k);C=ya[0];L=ya[1];B=ya[2];F=ya[3];if(C!==ga[0]||L!==
ga[1]||B!==ga[2]||F!==ga[3])r.blendColor(C,L,B,F),ga[0]=C,ga[1]=L,ga[2]=B,ga[3]=F;P=Ca[0];I=Ca[1];if(P!==ka[0]||I!==ka[1])r.blendEquationSeparate(P,I),ka[0]=P,ka[1]=I;N=pa[0];Y=pa[1];U=pa[2];O=pa[3];if(N!==xa[0]||Y!==xa[1]||U!==xa[2]||O!==xa[3])r.blendFuncSeparate(N,Y,U,O),xa[0]=N,xa[1]=Y,xa[2]=U,xa[3]=O;ra=S.depth_enable;ra!==M.depth_enable&&(ra?r.enable(2929):r.disable(2929),M.depth_enable=ra);W=S.depth_func;W!==M.depth_func&&(r.depthFunc(W),M.depth_func=W);ha=fb[0];ma=fb[1];if(ha!==Ta[0]||ma!==
Ta[1])r.depthRange(ha,ma),Ta[0]=ha,Ta[1]=ma;ta=S.depth_mask;ta!==M.depth_mask&&(r.depthMask(ta),M.depth_mask=ta);Ma=La[0];Xd=La[1];Bd=La[2];md=La[3];if(Ma!==oa[0]||Xd!==oa[1]||Bd!==oa[2]||md!==oa[3])r.colorMask(Ma,Xd,Bd,md),oa[0]=Ma,oa[1]=Xd,oa[2]=Bd,oa[3]=md;$c=S.frontFace;$c!==M.frontFace&&(r.frontFace($c),M.frontFace=$c);sd=S.lineWidth;sd!==M.lineWidth&&(r.lineWidth(sd),M.lineWidth=sd);Kc=S.polygonOffset_enable;Kc!==M.polygonOffset_enable&&(Kc?r.enable(32823):r.disable(32823),M.polygonOffset_enable=
Kc);pd=v[0];Ec=v[1];if(pd!==m[0]||Ec!==m[1])r.polygonOffset(pd,Ec),m[0]=pd,m[1]=Ec;ed=S.sample_alpha;ed!==M.sample_alpha&&(ed?r.enable(32926):r.disable(32926),M.sample_alpha=ed);Nc=S.sample_enable;Nc!==M.sample_enable&&(Nc?r.enable(32928):r.disable(32928),M.sample_enable=Nc);kd=K[0];Bb=K[1];if(kd!==ua[0]||Bb!==ua[1])r.sampleCoverage(kd,Bb),ua[0]=kd,ua[1]=Bb;Fb=S.stencil_enable;Fb!==M.stencil_enable&&(Fb?r.enable(2960):r.disable(2960),M.stencil_enable=Fb);tc=S.stencil_mask;tc!==M.stencil_mask&&(r.stencilMask(tc),
M.stencil_mask=tc);xb=Hb[0];wc=Hb[1];Cb=Hb[2];if(xb!==ia[0]||wc!==ia[1]||Cb!==ia[2])r.stencilFunc(xb,wc,Cb),ia[0]=xb,ia[1]=wc,ia[2]=Cb;Ic=Fa[0];lc=Fa[1];Fc=Fa[2];Vc=Fa[3];if(Ic!==na[0]||lc!==na[1]||Fc!==na[2]||Vc!==na[3])r.stencilOpSeparate(Ic,lc,Fc,Vc),na[0]=Ic,na[1]=lc,na[2]=Fc,na[3]=Vc;Tc=Q[0];Bc=Q[1];ec=Q[2];Gc=Q[3];if(Tc!==sa[0]||Bc!==sa[1]||ec!==sa[2]||Gc!==sa[3])r.stencilOpSeparate(Tc,Bc,ec,Gc),sa[0]=Tc,sa[1]=Bc,sa[2]=ec,sa[3]=Gc;oc=S.scissor_enable;oc!==M.scissor_enable&&(oc?r.enable(3089):
r.disable(3089),M.scissor_enable=oc);pc=Ba[0];mc=Ba[1];fc=Ba[2];$a=Ba[3];if(pc!==ba[0]||mc!==ba[1]||fc!==ba[2]||$a!==ba[3])r.scissor(pc,mc,fc,$a),ba[0]=pc,ba[1]=mc,ba[2]=fc,ba[3]=$a;Hc=Aa[0];yb=Aa[1];cb=Aa[2];Nb=Aa[3];if(Hc!==Ea[0]||yb!==Ea[1]||cb!==Ea[2]||Nb!==Ea[3])r.viewport(Hc,yb,cb,Nb),Ea[0]=Hc,Ea[1]=yb,Ea[2]=cb,Ea[3]=Nb}r.enable(2884);M.cull_enable=!0;r.cullFace(1029);M.cull_face=1029;if(d=M.profile)g=performance.now(),J.count+=c;r.useProgram(Z.program);var ab,ob;za.setVAO(null);ab=D.call(this,
q,t,w);G(ab)&&16===ab.length||V.commandRaise(E,H);r.uniformMatrix4fv(X.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ia[0]=ab[0],Ia[1]=ab[1],Ia[2]=ab[2],Ia[3]=ab[3],Ia[4]=ab[4],Ia[5]=ab[5],Ia[6]=ab[6],Ia[7]=ab[7],Ia[8]=ab[8],Ia[9]=ab[9],Ia[10]=ab[10],Ia[11]=ab[11],Ia[12]=ab[12],Ia[13]=ab[13],Ia[14]=ab[14],Ia[15]=ab[15],Ia));ob=q.view;G(ob)&&16===ob.length||V.commandRaise(b,H);r.uniformMatrix4fv(R.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Da[0]=ob[0],Da[1]=ob[1],
Da[2]=ob[2],Da[3]=ob[3],Da[4]=ob[4],Da[5]=ob[5],Da[6]=ob[6],Da[7]=ob[7],Da[8]=ob[8],Da[9]=ob[9],Da[10]=ob[10],Da[11]=ob[11],Da[12]=ob[12],Da[13]=ob[13],Da[14]=ob[14],Da[15]=ob[15],Da));for(w=0;w<c;++w){t=e[w];var Va,Cd,Ib,Jb,qc,Ob,kb,Gb,Db,wb,ib,Yb,Pb,qb,Ua,Ub,zb,bc,jb,pb,Ha,rb,Ja,eb,gb,Ka,lb,Wa,tb,sb,Pa,Ac,Ra,Kb,Eb,Na,xd,Ya,Lb,Mb,mb,Oa,Zb,Qa,ub,vb,Sa,nb,gc,Dc,uc,bb,jc,nd,Xa;(Va=t.position)&&("object"===typeof Va||"function"===typeof Va)&&(ca(Va)||A.getBuffer(Va)||A.getBuffer(Va.buffer)||ca(Va.buffer)||
"constant"in Va&&("number"===typeof Va.constant||G(Va.constant)))||V.commandRaise(h,H);Cd=!1;Ib=null;Jb=!1;Ob=qc=0;kb=1;Gb=0;Db=5126;Pb=Yb=ib=wb=0;ca(Va)?(Cd=!0,Ib=A.createStream(34962,Va),Db=Ib.dtype):(Ib=A.getBuffer(Va))?Db=Ib.dtype:"constant"in Va?(kb=2,"number"===typeof Va.constant?(ib=Va.constant,Yb=Pb=wb=0):(ib=0<Va.constant.length?Va.constant[0]:0,Yb=1<Va.constant.length?Va.constant[1]:0,Pb=2<Va.constant.length?Va.constant[2]:0,wb=3<Va.constant.length?Va.constant[3]:0)):(Ib=ca(Va.buffer)?A.createStream(34962,
Va.buffer):A.getBuffer(Va.buffer),Db="type"in Va?la[Va.type]:Ib.dtype,Jb=!!Va.normalized,Ob=Va.size|0,qc=Va.offset|0,Gb=Va.stride|0);qb=aa.location;Ua=T[qb];if(1===kb){if(Ua.buffer||r.enableVertexAttribArray(qb),Ub=Ob||3,Ua.type!==Db||Ua.size!==Ub||Ua.buffer!==Ib||Ua.normalized!==Jb||Ua.offset!==qc||Ua.stride!==Gb)r.bindBuffer(34962,Ib.buffer),r.vertexAttribPointer(qb,Ub,Db,Jb,Gb,qc),Ua.type=Db,Ua.size=Ub,Ua.buffer=Ib,Ua.normalized=Jb,Ua.offset=qc,Ua.stride=Gb}else if(Ua.buffer&&(r.disableVertexAttribArray(qb),
Ua.buffer=null),Ua.x!==ib||Ua.y!==Yb||Ua.z!==Pb||Ua.w!==wb)r.vertexAttrib4f(qb,ib,Yb,Pb,wb),Ua.x=ib,Ua.y=Yb,Ua.z=Pb,Ua.w=wb;(zb=t.normal)&&("object"===typeof zb||"function"===typeof zb)&&(ca(zb)||A.getBuffer(zb)||A.getBuffer(zb.buffer)||ca(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||G(zb.constant)))||V.commandRaise(y,H);bc=!1;jb=null;pb=!1;rb=Ha=0;Ja=1;eb=0;gb=5126;tb=Wa=lb=Ka=0;ca(zb)?(bc=!0,jb=A.createStream(34962,zb),gb=jb.dtype):(jb=A.getBuffer(zb))?gb=jb.dtype:"constant"in zb?
(Ja=2,"number"===typeof zb.constant?(lb=zb.constant,Wa=tb=Ka=0):(lb=0<zb.constant.length?zb.constant[0]:0,Wa=1<zb.constant.length?zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,Ka=3<zb.constant.length?zb.constant[3]:0)):(jb=ca(zb.buffer)?A.createStream(34962,zb.buffer):A.getBuffer(zb.buffer),gb="type"in zb?la[zb.type]:jb.dtype,pb=!!zb.normalized,rb=zb.size|0,Ha=zb.offset|0,eb=zb.stride|0);sb=ja.location;Pa=T[sb];if(1===Ja){if(Pa.buffer||r.enableVertexAttribArray(sb),Ac=rb||3,Pa.type!==
gb||Pa.size!==Ac||Pa.buffer!==jb||Pa.normalized!==pb||Pa.offset!==Ha||Pa.stride!==eb)r.bindBuffer(34962,jb.buffer),r.vertexAttribPointer(sb,Ac,gb,pb,eb,Ha),Pa.type=gb,Pa.size=Ac,Pa.buffer=jb,Pa.normalized=pb,Pa.offset=Ha,Pa.stride=eb}else if(Pa.buffer&&(r.disableVertexAttribArray(sb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==tb||Pa.w!==Ka)r.vertexAttrib4f(sb,lb,Wa,tb,Ka),Pa.x=lb,Pa.y=Wa,Pa.z=tb,Pa.w=Ka;(Ra=t.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(ca(Ra)||A.getBuffer(Ra)||A.getBuffer(Ra.buffer)||
ca(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||G(Ra.constant)))||V.commandRaise(da,H);Kb=!1;Eb=null;Na=!1;Ya=xd=0;Lb=1;Mb=0;mb=5126;ub=Qa=Zb=Oa=0;ca(Ra)?(Kb=!0,Eb=A.createStream(34962,Ra),mb=Eb.dtype):(Eb=A.getBuffer(Ra))?mb=Eb.dtype:"constant"in Ra?(Lb=2,"number"===typeof Ra.constant?(Zb=Ra.constant,Qa=ub=Oa=0):(Zb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,ub=2<Ra.constant.length?Ra.constant[2]:0,Oa=3<Ra.constant.length?Ra.constant[3]:0)):(Eb=
ca(Ra.buffer)?A.createStream(34962,Ra.buffer):A.getBuffer(Ra.buffer),mb="type"in Ra?la[Ra.type]:Eb.dtype,Na=!!Ra.normalized,Ya=Ra.size|0,xd=Ra.offset|0,Mb=Ra.stride|0);vb=fa.location;Sa=T[vb];if(1===Lb){if(Sa.buffer||r.enableVertexAttribArray(vb),nb=Ya||2,Sa.type!==mb||Sa.size!==nb||Sa.buffer!==Eb||Sa.normalized!==Na||Sa.offset!==xd||Sa.stride!==Mb)r.bindBuffer(34962,Eb.buffer),r.vertexAttribPointer(vb,nb,mb,Na,Mb,xd),Sa.type=mb,Sa.size=nb,Sa.buffer=Eb,Sa.normalized=Na,Sa.offset=xd,Sa.stride=Mb}else if(Sa.buffer&&
(r.disableVertexAttribArray(vb),Sa.buffer=null),Sa.x!==Zb||Sa.y!==Qa||Sa.z!==ub||Sa.w!==Oa)r.vertexAttrib4f(vb,Zb,Qa,ub,Oa),Sa.x=Zb,Sa.y=Qa,Sa.z=ub,Sa.w=Oa;(gc=t.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||V.commandRaise(x,H);Dc=gc._texture;r.uniform1i(z.location,Dc.bind());uc=t.elements;bb=null;(jc=ca(uc))?bb=wa.createStream(uc):(bb=wa.getElements(uc),uc&&!bb&&V.commandRaise(a,H));bb&&r.bindBuffer(34963,bb.buffer.buffer);nd=bb?bb.primType:
4;Xa=bb?bb.vertCount:-1;0<=Xa||V.commandRaise(va,H);Xa&&(bb?r.drawElements(nd,Xa,bb.type,0<<(bb.type-5121>>1)):r.drawArrays(nd,0,Xa),Cd&&A.destroyStream(Ib),bc&&A.destroyStream(jb),Kb&&A.destroyStream(Eb),Dc.unbind(),jc&&wa.destroyStream(bb))}M.dirty=!0;za.setVAO(null);q.view=f;d&&(J.cpuTime+=performance.now()-g)}}},"$7,color,position":function(d,V,H,J,g,l,n,f,F,C){var O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa,R,T,A,q,M,P;O=d.attributes;I=d.context;k=d.current;u=d.draw;L=d.elements;
W=d.framebuffer;t=d.gl;N=d.next;w=d.shader;B=d.uniforms;ha=d.vao;c=N.blend_color;e=k.blend_color;U=N.blend_equation;p=k.blend_equation;Z=N.blend_func;h=k.blend_func;y=N.colorMask;da=k.colorMask;D=N.depth_range;E=k.depth_range;b=N.polygonOffset_offset;x=k.polygonOffset_offset;a=N.sample_coverage;va=k.sample_coverage;z=N.scissor_box;ja=k.scissor_box;aa=N.stencil_func;X=k.stencil_func;fa=N.stencil_opBack;R=k.stencil_opBack;T=N.stencil_opFront;A=k.stencil_opFront;q=N.viewport;M=k.viewport;P=[1,0,0,1];
return{draw:function(f){var n,r,d,w;f=W.next;f!==W.cur&&(f?t.bindFramebuffer(36160,f.framebuffer):t.bindFramebuffer(36160,null),W.cur=f);if(k.dirty){f=N.dither;f!==k.dither&&(f?t.enable(3024):t.disable(3024),k.dither=f);f=N.blend_enable;f!==k.blend_enable&&(f?t.enable(3042):t.disable(3042),k.blend_enable=f);f=c[0];r=c[1];d=c[2];w=c[3];if(f!==e[0]||r!==e[1]||d!==e[2]||w!==e[3])t.blendColor(f,r,d,w),e[0]=f,e[1]=r,e[2]=d,e[3]=w;f=U[0];r=U[1];if(f!==p[0]||r!==p[1])t.blendEquationSeparate(f,r),p[0]=f,
p[1]=r;f=Z[0];r=Z[1];d=Z[2];w=Z[3];if(f!==h[0]||r!==h[1]||d!==h[2]||w!==h[3])t.blendFuncSeparate(f,r,d,w),h[0]=f,h[1]=r,h[2]=d,h[3]=w;f=N.depth_enable;f!==k.depth_enable&&(f?t.enable(2929):t.disable(2929),k.depth_enable=f);f=N.depth_func;f!==k.depth_func&&(t.depthFunc(f),k.depth_func=f);f=D[0];r=D[1];if(f!==E[0]||r!==E[1])t.depthRange(f,r),E[0]=f,E[1]=r;f=N.depth_mask;f!==k.depth_mask&&(t.depthMask(f),k.depth_mask=f);f=y[0];r=y[1];d=y[2];w=y[3];if(f!==da[0]||r!==da[1]||d!==da[2]||w!==da[3])t.colorMask(f,
r,d,w),da[0]=f,da[1]=r,da[2]=d,da[3]=w;f=N.cull_enable;f!==k.cull_enable&&(f?t.enable(2884):t.disable(2884),k.cull_enable=f);f=N.cull_face;f!==k.cull_face&&(t.cullFace(f),k.cull_face=f);f=N.frontFace;f!==k.frontFace&&(t.frontFace(f),k.frontFace=f);f=N.lineWidth;f!==k.lineWidth&&(t.lineWidth(f),k.lineWidth=f);f=N.polygonOffset_enable;f!==k.polygonOffset_enable&&(f?t.enable(32823):t.disable(32823),k.polygonOffset_enable=f);f=b[0];r=b[1];if(f!==x[0]||r!==x[1])t.polygonOffset(f,r),x[0]=f,x[1]=r;f=N.sample_alpha;
f!==k.sample_alpha&&(f?t.enable(32926):t.disable(32926),k.sample_alpha=f);f=N.sample_enable;f!==k.sample_enable&&(f?t.enable(32928):t.disable(32928),k.sample_enable=f);f=a[0];r=a[1];if(f!==va[0]||r!==va[1])t.sampleCoverage(f,r),va[0]=f,va[1]=r;f=N.stencil_enable;f!==k.stencil_enable&&(f?t.enable(2960):t.disable(2960),k.stencil_enable=f);f=N.stencil_mask;f!==k.stencil_mask&&(t.stencilMask(f),k.stencil_mask=f);f=aa[0];r=aa[1];d=aa[2];if(f!==X[0]||r!==X[1]||d!==X[2])t.stencilFunc(f,r,d),X[0]=f,X[1]=
r,X[2]=d;f=T[0];r=T[1];d=T[2];w=T[3];if(f!==A[0]||r!==A[1]||d!==A[2]||w!==A[3])t.stencilOpSeparate(f,r,d,w),A[0]=f,A[1]=r,A[2]=d,A[3]=w;f=fa[0];r=fa[1];d=fa[2];w=fa[3];if(f!==R[0]||r!==R[1]||d!==R[2]||w!==R[3])t.stencilOpSeparate(f,r,d,w),R[0]=f,R[1]=r,R[2]=d,R[3]=w;f=N.scissor_enable;f!==k.scissor_enable&&(f?t.enable(3089):t.disable(3089),k.scissor_enable=f);f=z[0];r=z[1];d=z[2];w=z[3];if(f!==ja[0]||r!==ja[1]||d!==ja[2]||w!==ja[3])t.scissor(f,r,d,w),ja[0]=f,ja[1]=r,ja[2]=d,ja[3]=w;f=q[0];r=q[1];
d=q[2];w=q[3];if(f!==M[0]||r!==M[1]||d!==M[2]||w!==M[3])t.viewport(f,r,d,w),M[0]=f,M[1]=r,M[2]=d,M[3]=w;k.dirty=!1}if(f=k.profile)n=performance.now(),J.count++;t.useProgram(g.program);ha.setVAO(null);r=C.location;d=O[r];d.buffer||t.enableVertexAttribArray(r);if(d.type!==l.dtype||2!==d.size||d.buffer!==l||!1!==d.normalized||0!==d.offset||0!==d.stride)t.bindBuffer(34962,l.buffer),t.vertexAttribPointer(r,2,l.dtype,!1,0,0),d.type=l.dtype,d.size=2,d.buffer=l,d.normalized=!1,d.offset=0,d.stride=0;t.uniform4f(F.location,
1,0,0,1);(r=u.elements)?t.bindBuffer(34963,r.buffer.buffer):ha.currentVAO&&(r=L.getElements(ha.currentVAO.elements))&&t.bindBuffer(34963,r.buffer.buffer);d=u.primitive;w=u.offset;r?t.drawElements(d,3,r.type,w<<(r.type-5121>>1)):t.drawArrays(d,w,3);ha.setVAO(null);f&&(J.cpuTime+=performance.now()-n)},scope:function(a,e,b){var c,f,h,q,d,p,g,x,z,y,t,A,D,oa,E,C,v,m;if(c=k.profile)f=performance.now(),J.count++;h=u.count;u.count=3;q=B[3];B[3]=P;d=n.buffer;n.buffer=l;p=n.divisor;n.divisor=0;g=n.normalized;
n.normalized=!1;x=n.offset;n.offset=0;z=n.size;n.size=0;y=n.state;n.state=1;t=n.stride;n.stride=0;A=n.type;n.type=l.dtype;D=n.w;n.w=0;oa=n.x;n.x=0;E=n.y;n.y=0;C=n.z;n.z=0;v=w.vert;w.vert=2;m=w.frag;w.frag=1;e(I,a,b);c&&(J.cpuTime+=performance.now()-f);u.count=h;B[3]=q;n.buffer=d;n.divisor=p;n.normalized=g;n.offset=x;n.size=z;n.state=y;n.stride=t;n.type=A;n.w=D;n.x=oa;n.y=E;n.z=C;w.vert=v;w.frag=m},batch:function(d,n){var r,g,w;r=W.next;r!==W.cur&&(r?t.bindFramebuffer(36160,r.framebuffer):t.bindFramebuffer(36160,
null),W.cur=r);if(k.dirty){var S,H;r=N.dither;r!==k.dither&&(r?t.enable(3024):t.disable(3024),k.dither=r);r=N.blend_enable;r!==k.blend_enable&&(r?t.enable(3042):t.disable(3042),k.blend_enable=r);r=c[0];w=c[1];S=c[2];H=c[3];if(r!==e[0]||w!==e[1]||S!==e[2]||H!==e[3])t.blendColor(r,w,S,H),e[0]=r,e[1]=w,e[2]=S,e[3]=H;r=U[0];w=U[1];if(r!==p[0]||w!==p[1])t.blendEquationSeparate(r,w),p[0]=r,p[1]=w;r=Z[0];w=Z[1];S=Z[2];H=Z[3];if(r!==h[0]||w!==h[1]||S!==h[2]||H!==h[3])t.blendFuncSeparate(r,w,S,H),h[0]=r,h[1]=
w,h[2]=S,h[3]=H;r=N.depth_enable;r!==k.depth_enable&&(r?t.enable(2929):t.disable(2929),k.depth_enable=r);r=N.depth_func;r!==k.depth_func&&(t.depthFunc(r),k.depth_func=r);r=D[0];w=D[1];if(r!==E[0]||w!==E[1])t.depthRange(r,w),E[0]=r,E[1]=w;r=N.depth_mask;r!==k.depth_mask&&(t.depthMask(r),k.depth_mask=r);r=y[0];w=y[1];S=y[2];H=y[3];if(r!==da[0]||w!==da[1]||S!==da[2]||H!==da[3])t.colorMask(r,w,S,H),da[0]=r,da[1]=w,da[2]=S,da[3]=H;r=N.cull_enable;r!==k.cull_enable&&(r?t.enable(2884):t.disable(2884),k.cull_enable=
r);r=N.cull_face;r!==k.cull_face&&(t.cullFace(r),k.cull_face=r);r=N.frontFace;r!==k.frontFace&&(t.frontFace(r),k.frontFace=r);r=N.lineWidth;r!==k.lineWidth&&(t.lineWidth(r),k.lineWidth=r);r=N.polygonOffset_enable;r!==k.polygonOffset_enable&&(r?t.enable(32823):t.disable(32823),k.polygonOffset_enable=r);r=b[0];w=b[1];if(r!==x[0]||w!==x[1])t.polygonOffset(r,w),x[0]=r,x[1]=w;r=N.sample_alpha;r!==k.sample_alpha&&(r?t.enable(32926):t.disable(32926),k.sample_alpha=r);r=N.sample_enable;r!==k.sample_enable&&
(r?t.enable(32928):t.disable(32928),k.sample_enable=r);r=a[0];w=a[1];if(r!==va[0]||w!==va[1])t.sampleCoverage(r,w),va[0]=r,va[1]=w;r=N.stencil_enable;r!==k.stencil_enable&&(r?t.enable(2960):t.disable(2960),k.stencil_enable=r);r=N.stencil_mask;r!==k.stencil_mask&&(t.stencilMask(r),k.stencil_mask=r);r=aa[0];w=aa[1];S=aa[2];if(r!==X[0]||w!==X[1]||S!==X[2])t.stencilFunc(r,w,S),X[0]=r,X[1]=w,X[2]=S;r=T[0];w=T[1];S=T[2];H=T[3];if(r!==A[0]||w!==A[1]||S!==A[2]||H!==A[3])t.stencilOpSeparate(r,w,S,H),A[0]=
r,A[1]=w,A[2]=S,A[3]=H;r=fa[0];w=fa[1];S=fa[2];H=fa[3];if(r!==R[0]||w!==R[1]||S!==R[2]||H!==R[3])t.stencilOpSeparate(r,w,S,H),R[0]=r,R[1]=w,R[2]=S,R[3]=H;r=N.scissor_enable;r!==k.scissor_enable&&(r?t.enable(3089):t.disable(3089),k.scissor_enable=r);r=z[0];w=z[1];S=z[2];H=z[3];if(r!==ja[0]||w!==ja[1]||S!==ja[2]||H!==ja[3])t.scissor(r,w,S,H),ja[0]=r,ja[1]=w,ja[2]=S,ja[3]=H;r=q[0];w=q[1];S=q[2];H=q[3];if(r!==M[0]||w!==M[1]||S!==M[2]||H!==M[3])t.viewport(r,w,S,H),M[0]=r,M[1]=w,M[2]=S,M[3]=H;k.dirty=!1}if(r=
k.profile)g=performance.now(),J.count+=n;t.useProgram(f.program);var B;ha.setVAO(null);w=C.location;S=O[w];S.buffer||t.enableVertexAttribArray(w);if(S.type!==l.dtype||2!==S.size||S.buffer!==l||!1!==S.normalized||0!==S.offset||0!==S.stride)t.bindBuffer(34962,l.buffer),t.vertexAttribPointer(w,2,l.dtype,!1,0,0),S.type=l.dtype,S.size=2,S.buffer=l,S.normalized=!1,S.offset=0,S.stride=0;t.uniform4f(F.location,1,0,0,1);(S=u.elements)?t.bindBuffer(34963,S.buffer.buffer):ha.currentVAO&&(S=L.getElements(ha.currentVAO.elements))&&
t.bindBuffer(34963,S.buffer.buffer);H=u.primitive;B=u.offset;for(w=0;w<n;++w)S?t.drawElements(H,3,S.type,B<<(S.type-5121>>1)):t.drawArrays(H,B,3);ha.setVAO(null);r&&(J.cpuTime+=performance.now()-g)}}},"$19,angle,color,offset,position":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U){var p,Z,h,y,da,D,E,b,x,a,va,z,ja,aa,X,fa,R,T,A,q,M,P,ba,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa;p=d.attributes;Z=d.context;h=d.current;y=d.draw;da=d.elements;D=d.framebuffer;E=d.gl;b=d.isArrayLike;x=d.next;a=d.shader;
va=d.uniforms;z=d.vao;ja=x.blend_color;aa=h.blend_color;X=x.blend_equation;fa=h.blend_equation;R=x.blend_func;T=h.blend_func;A=x.colorMask;q=h.colorMask;M=x.depth_range;P=h.depth_range;ba=x.polygonOffset_offset;qa=h.polygonOffset_offset;r=x.sample_coverage;G=h.sample_coverage;ca=x.scissor_box;S=h.scissor_box;ma=x.stencil_func;ra=h.stencil_func;za=x.stencil_opBack;ya=h.stencil_opBack;ga=x.stencil_opFront;Ca=h.stencil_opFront;ka=x.viewport;pa=h.viewport;return{draw:function(a){var d,w,t,u;d=D.next;
d!==D.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),D.cur=d);if(h.dirty){var v;d=x.dither;d!==h.dither&&(d?E.enable(3024):E.disable(3024),h.dither=d);d=x.blend_enable;d!==h.blend_enable&&(d?E.enable(3042):E.disable(3042),h.blend_enable=d);d=ja[0];t=ja[1];u=ja[2];v=ja[3];if(d!==aa[0]||t!==aa[1]||u!==aa[2]||v!==aa[3])E.blendColor(d,t,u,v),aa[0]=d,aa[1]=t,aa[2]=u,aa[3]=v;d=X[0];t=X[1];if(d!==fa[0]||t!==fa[1])E.blendEquationSeparate(d,t),fa[0]=d,fa[1]=t;d=R[0];t=R[1];u=
R[2];v=R[3];if(d!==T[0]||t!==T[1]||u!==T[2]||v!==T[3])E.blendFuncSeparate(d,t,u,v),T[0]=d,T[1]=t,T[2]=u,T[3]=v;d=x.depth_func;d!==h.depth_func&&(E.depthFunc(d),h.depth_func=d);d=M[0];t=M[1];if(d!==P[0]||t!==P[1])E.depthRange(d,t),P[0]=d,P[1]=t;d=x.depth_mask;d!==h.depth_mask&&(E.depthMask(d),h.depth_mask=d);d=A[0];t=A[1];u=A[2];v=A[3];if(d!==q[0]||t!==q[1]||u!==q[2]||v!==q[3])E.colorMask(d,t,u,v),q[0]=d,q[1]=t,q[2]=u,q[3]=v;d=x.cull_enable;d!==h.cull_enable&&(d?E.enable(2884):E.disable(2884),h.cull_enable=
d);d=x.cull_face;d!==h.cull_face&&(E.cullFace(d),h.cull_face=d);d=x.frontFace;d!==h.frontFace&&(E.frontFace(d),h.frontFace=d);d=x.lineWidth;d!==h.lineWidth&&(E.lineWidth(d),h.lineWidth=d);d=x.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?E.enable(32823):E.disable(32823),h.polygonOffset_enable=d);d=ba[0];t=ba[1];if(d!==qa[0]||t!==qa[1])E.polygonOffset(d,t),qa[0]=d,qa[1]=t;d=x.sample_alpha;d!==h.sample_alpha&&(d?E.enable(32926):E.disable(32926),h.sample_alpha=d);d=x.sample_enable;d!==h.sample_enable&&
(d?E.enable(32928):E.disable(32928),h.sample_enable=d);d=r[0];t=r[1];if(d!==G[0]||t!==G[1])E.sampleCoverage(d,t),G[0]=d,G[1]=t;d=x.stencil_enable;d!==h.stencil_enable&&(d?E.enable(2960):E.disable(2960),h.stencil_enable=d);d=x.stencil_mask;d!==h.stencil_mask&&(E.stencilMask(d),h.stencil_mask=d);d=ma[0];t=ma[1];u=ma[2];if(d!==ra[0]||t!==ra[1]||u!==ra[2])E.stencilFunc(d,t,u),ra[0]=d,ra[1]=t,ra[2]=u;d=ga[0];t=ga[1];u=ga[2];v=ga[3];if(d!==Ca[0]||t!==Ca[1]||u!==Ca[2]||v!==Ca[3])E.stencilOpSeparate(d,t,
u,v),Ca[0]=d,Ca[1]=t,Ca[2]=u,Ca[3]=v;d=za[0];t=za[1];u=za[2];v=za[3];if(d!==ya[0]||t!==ya[1]||u!==ya[2]||v!==ya[3])E.stencilOpSeparate(d,t,u,v),ya[0]=d,ya[1]=t,ya[2]=u,ya[3]=v;d=x.scissor_enable;d!==h.scissor_enable&&(d?E.enable(3089):E.disable(3089),h.scissor_enable=d);d=ca[0];t=ca[1];u=ca[2];v=ca[3];if(d!==S[0]||t!==S[1]||u!==S[2]||v!==S[3])E.scissor(d,t,u,v),S[0]=d,S[1]=t,S[2]=u,S[3]=v;d=ka[0];t=ka[1];u=ka[2];v=ka[3];if(d!==pa[0]||t!==pa[1]||u!==pa[2]||v!==pa[3])E.viewport(d,t,u,v),pa[0]=d,pa[1]=
t,pa[2]=u,pa[3]=v}E.disable(2929);h.depth_enable=!1;if(d=h.profile)w=performance.now(),J.count++;E.useProgram(g.program);z.setVAO(null);t=U.location;u=p[t];u.buffer||E.enableVertexAttribArray(t);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(t,2,l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;t=n.call(this,Z,a,0);"number"!==typeof t&&V.commandRaise(f,H);E.uniform1f(ha.location,
t);t=a.offset;b(t)&&2===t.length||V.commandRaise(F,H);E.uniform2f(e.location,t[0],t[1]);a=C.call(this,Z,a,0);b(a)&&4===a.length||V.commandRaise(O,H);E.uniform4f(c.location,a[0],a[1],a[2],a[3]);(a=y.elements)?E.bindBuffer(34963,a.buffer.buffer):z.currentVAO&&(a=da.getElements(z.currentVAO.elements))&&E.bindBuffer(34963,a.buffer.buffer);t=y.primitive;u=y.offset;a?E.drawElements(t,3,a.type,u<<(a.type-5121>>1)):E.drawArrays(t,u,3);h.dirty=!0;z.setVAO(null);d&&(J.cpuTime+=performance.now()-w)},scope:function(e,
b,c){var f,d,q,m,r,p,n,g,w,t,Q,z,A,D,E,S,G,ga,H,C,B;f=x.depth_enable;x.depth_enable=!1;if(d=h.profile)q=performance.now(),J.count++;m=y.count;y.count=3;r=I.call(this,Z,e,c);p=va[3];va[3]=r;n=k.call(this,Z,e,c);r=va[5];va[5]=n;g=e.offset;n=va[4];va[4]=g;g=u.buffer;u.buffer=l;w=u.divisor;u.divisor=0;t=u.normalized;u.normalized=!1;Q=u.offset;u.offset=0;z=u.size;u.size=0;A=u.state;u.state=1;D=u.stride;u.stride=0;E=u.type;u.type=l.dtype;S=u.w;u.w=0;G=u.x;u.x=0;ga=u.y;u.y=0;H=u.z;u.z=0;C=a.vert;a.vert=
2;B=a.frag;a.frag=1;h.dirty=!0;b(Z,e,c);x.depth_enable=f;d&&(J.cpuTime+=performance.now()-q);y.count=m;va[3]=p;va[5]=r;va[4]=n;u.buffer=g;u.divisor=w;u.normalized=t;u.offset=Q;u.size=z;u.state=A;u.stride=D;u.type=E;u.w=S;u.x=G;u.y=ga;u.z=H;a.vert=C;a.frag=B;h.dirty=!0},batch:function(a,f){var d,n,g,v;d=D.next;d!==D.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),D.cur=d);if(h.dirty){var m,K,u;d=x.dither;d!==h.dither&&(d?E.enable(3024):E.disable(3024),h.dither=d);d=x.blend_enable;
d!==h.blend_enable&&(d?E.enable(3042):E.disable(3042),h.blend_enable=d);d=ja[0];m=ja[1];K=ja[2];u=ja[3];if(d!==aa[0]||m!==aa[1]||K!==aa[2]||u!==aa[3])E.blendColor(d,m,K,u),aa[0]=d,aa[1]=m,aa[2]=K,aa[3]=u;d=X[0];m=X[1];if(d!==fa[0]||m!==fa[1])E.blendEquationSeparate(d,m),fa[0]=d,fa[1]=m;d=R[0];m=R[1];K=R[2];u=R[3];if(d!==T[0]||m!==T[1]||K!==T[2]||u!==T[3])E.blendFuncSeparate(d,m,K,u),T[0]=d,T[1]=m,T[2]=K,T[3]=u;d=x.depth_func;d!==h.depth_func&&(E.depthFunc(d),h.depth_func=d);d=M[0];m=M[1];if(d!==P[0]||
m!==P[1])E.depthRange(d,m),P[0]=d,P[1]=m;d=x.depth_mask;d!==h.depth_mask&&(E.depthMask(d),h.depth_mask=d);d=A[0];m=A[1];K=A[2];u=A[3];if(d!==q[0]||m!==q[1]||K!==q[2]||u!==q[3])E.colorMask(d,m,K,u),q[0]=d,q[1]=m,q[2]=K,q[3]=u;d=x.cull_enable;d!==h.cull_enable&&(d?E.enable(2884):E.disable(2884),h.cull_enable=d);d=x.cull_face;d!==h.cull_face&&(E.cullFace(d),h.cull_face=d);d=x.frontFace;d!==h.frontFace&&(E.frontFace(d),h.frontFace=d);d=x.lineWidth;d!==h.lineWidth&&(E.lineWidth(d),h.lineWidth=d);d=x.polygonOffset_enable;
d!==h.polygonOffset_enable&&(d?E.enable(32823):E.disable(32823),h.polygonOffset_enable=d);d=ba[0];m=ba[1];if(d!==qa[0]||m!==qa[1])E.polygonOffset(d,m),qa[0]=d,qa[1]=m;d=x.sample_alpha;d!==h.sample_alpha&&(d?E.enable(32926):E.disable(32926),h.sample_alpha=d);d=x.sample_enable;d!==h.sample_enable&&(d?E.enable(32928):E.disable(32928),h.sample_enable=d);d=r[0];m=r[1];if(d!==G[0]||m!==G[1])E.sampleCoverage(d,m),G[0]=d,G[1]=m;d=x.stencil_enable;d!==h.stencil_enable&&(d?E.enable(2960):E.disable(2960),h.stencil_enable=
d);d=x.stencil_mask;d!==h.stencil_mask&&(E.stencilMask(d),h.stencil_mask=d);d=ma[0];m=ma[1];K=ma[2];if(d!==ra[0]||m!==ra[1]||K!==ra[2])E.stencilFunc(d,m,K),ra[0]=d,ra[1]=m,ra[2]=K;d=ga[0];m=ga[1];K=ga[2];u=ga[3];if(d!==Ca[0]||m!==Ca[1]||K!==Ca[2]||u!==Ca[3])E.stencilOpSeparate(d,m,K,u),Ca[0]=d,Ca[1]=m,Ca[2]=K,Ca[3]=u;d=za[0];m=za[1];K=za[2];u=za[3];if(d!==ya[0]||m!==ya[1]||K!==ya[2]||u!==ya[3])E.stencilOpSeparate(d,m,K,u),ya[0]=d,ya[1]=m,ya[2]=K,ya[3]=u;d=x.scissor_enable;d!==h.scissor_enable&&(d?
E.enable(3089):E.disable(3089),h.scissor_enable=d);d=ca[0];m=ca[1];K=ca[2];u=ca[3];if(d!==S[0]||m!==S[1]||K!==S[2]||u!==S[3])E.scissor(d,m,K,u),S[0]=d,S[1]=m,S[2]=K,S[3]=u;d=ka[0];m=ka[1];K=ka[2];u=ka[3];if(d!==pa[0]||m!==pa[1]||K!==pa[2]||u!==pa[3])E.viewport(d,m,K,u),pa[0]=d,pa[1]=m,pa[2]=K,pa[3]=u}E.disable(2929);h.depth_enable=!1;if(d=h.profile)n=performance.now(),J.count+=f;E.useProgram(L.program);z.setVAO(null);m=U.location;K=p[m];K.buffer||E.enableVertexAttribArray(m);if(K.type!==l.dtype||
2!==K.size||K.buffer!==l||!1!==K.normalized||0!==K.offset||0!==K.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(m,2,l.dtype,!1,0,0),K.type=l.dtype,K.size=2,K.buffer=l,K.normalized=!1,K.offset=0,K.stride=0;g=W.call(this,Z,v,g);"number"!==typeof g&&V.commandRaise(t,H);E.uniform1f(ha.location,g);(m=y.elements)?E.bindBuffer(34963,m.buffer.buffer):z.currentVAO&&(m=da.getElements(z.currentVAO.elements))&&E.bindBuffer(34963,m.buffer.buffer);K=y.primitive;u=y.offset;for(g=0;g<f;++g){v=a[g];var k,
C,F,ia,Q,sa,Fa,na,I;k=v.offset;b(k)&&2===k.length||V.commandRaise(N,H);C=k[0];k=k[1];g&&F===C&&ia===k||(F=C,ia=k,E.uniform2f(e.location,C,k));Q=w.call(this,Z,v,g);b(Q)&&4===Q.length||V.commandRaise(B,H);v=Q[0];C=Q[1];k=Q[2];Q=Q[3];g&&sa===v&&Fa===C&&na===k&&I===Q||(sa=v,Fa=C,na=k,I=Q,E.uniform4f(c.location,v,C,k,Q));m?E.drawElements(K,3,m.type,u<<(m.type-5121>>1)):E.drawArrays(K,u,3)}h.dirty=!0;z.setVAO(null);d&&(J.cpuTime+=performance.now()-n)}}},"$23,model,position,projection,view":function(d,V,
H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y){var da,D,E,b,x,a,va,z,ja,aa,X,fa,R,T,A,q,M,P,ba,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba;da=d.attributes;D=d.context;E=d.current;b=d.draw;x=d.framebuffer;a=d.gl;va=d.isArrayLike;z=d.next;ja=d.shader;aa=d.uniforms;X=d.vao;fa=z.blend_color;R=E.blend_color;T=z.blend_equation;A=E.blend_equation;q=z.blend_func;M=E.blend_func;P=z.colorMask;ba=E.colorMask;qa=z.depth_range;r=E.depth_range;G=z.polygonOffset_offset;ca=E.polygonOffset_offset;
S=z.sample_coverage;ma=E.sample_coverage;ra=z.scissor_box;za=E.scissor_box;ya=z.stencil_func;ga=E.stencil_func;Ca=z.stencil_opBack;ka=E.stencil_opBack;pa=z.stencil_opFront;xa=E.stencil_opFront;La=z.viewport;oa=E.viewport;fb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);v=new Float32Array(16);m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];K=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);Ba=new Float32Array(16);return{draw:function(e){var b,c,d,m;b=x.next;
b!==x.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),x.cur=b);if(E.dirty){var w;b=z.dither;b!==E.dither&&(b?a.enable(3024):a.disable(3024),E.dither=b);b=z.blend_enable;b!==E.blend_enable&&(b?a.enable(3042):a.disable(3042),E.blend_enable=b);b=fa[0];d=fa[1];m=fa[2];w=fa[3];if(b!==R[0]||d!==R[1]||m!==R[2]||w!==R[3])a.blendColor(b,d,m,w),R[0]=b,R[1]=d,R[2]=m,R[3]=w;b=T[0];d=T[1];if(b!==A[0]||d!==A[1])a.blendEquationSeparate(b,d),A[0]=b,A[1]=d;b=q[0];d=q[1];m=q[2];w=q[3];
if(b!==M[0]||d!==M[1]||m!==M[2]||w!==M[3])a.blendFuncSeparate(b,d,m,w),M[0]=b,M[1]=d,M[2]=m,M[3]=w;b=z.depth_enable;b!==E.depth_enable&&(b?a.enable(2929):a.disable(2929),E.depth_enable=b);b=z.depth_func;b!==E.depth_func&&(a.depthFunc(b),E.depth_func=b);b=qa[0];d=qa[1];if(b!==r[0]||d!==r[1])a.depthRange(b,d),r[0]=b,r[1]=d;b=z.depth_mask;b!==E.depth_mask&&(a.depthMask(b),E.depth_mask=b);b=P[0];d=P[1];m=P[2];w=P[3];if(b!==ba[0]||d!==ba[1]||m!==ba[2]||w!==ba[3])a.colorMask(b,d,m,w),ba[0]=b,ba[1]=d,ba[2]=
m,ba[3]=w;b=z.cull_enable;b!==E.cull_enable&&(b?a.enable(2884):a.disable(2884),E.cull_enable=b);b=z.cull_face;b!==E.cull_face&&(a.cullFace(b),E.cull_face=b);b=z.frontFace;b!==E.frontFace&&(a.frontFace(b),E.frontFace=b);b=z.lineWidth;b!==E.lineWidth&&(a.lineWidth(b),E.lineWidth=b);b=z.polygonOffset_enable;b!==E.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),E.polygonOffset_enable=b);b=G[0];d=G[1];if(b!==ca[0]||d!==ca[1])a.polygonOffset(b,d),ca[0]=b,ca[1]=d;b=z.sample_alpha;b!==E.sample_alpha&&
(b?a.enable(32926):a.disable(32926),E.sample_alpha=b);b=z.sample_enable;b!==E.sample_enable&&(b?a.enable(32928):a.disable(32928),E.sample_enable=b);b=S[0];d=S[1];if(b!==ma[0]||d!==ma[1])a.sampleCoverage(b,d),ma[0]=b,ma[1]=d;b=z.stencil_enable;b!==E.stencil_enable&&(b?a.enable(2960):a.disable(2960),E.stencil_enable=b);b=z.stencil_mask;b!==E.stencil_mask&&(a.stencilMask(b),E.stencil_mask=b);b=ya[0];d=ya[1];m=ya[2];if(b!==ga[0]||d!==ga[1]||m!==ga[2])a.stencilFunc(b,d,m),ga[0]=b,ga[1]=d,ga[2]=m;b=pa[0];
d=pa[1];m=pa[2];w=pa[3];if(b!==xa[0]||d!==xa[1]||m!==xa[2]||w!==xa[3])a.stencilOpSeparate(b,d,m,w),xa[0]=b,xa[1]=d,xa[2]=m,xa[3]=w;b=Ca[0];d=Ca[1];m=Ca[2];w=Ca[3];if(b!==ka[0]||d!==ka[1]||m!==ka[2]||w!==ka[3])a.stencilOpSeparate(b,d,m,w),ka[0]=b,ka[1]=d,ka[2]=m,ka[3]=w;b=z.scissor_enable;b!==E.scissor_enable&&(b?a.enable(3089):a.disable(3089),E.scissor_enable=b);b=ra[0];d=ra[1];m=ra[2];w=ra[3];if(b!==za[0]||d!==za[1]||m!==za[2]||w!==za[3])a.scissor(b,d,m,w),za[0]=b,za[1]=d,za[2]=m,za[3]=w;b=La[0];
d=La[1];m=La[2];w=La[3];if(b!==oa[0]||d!==oa[1]||m!==oa[2]||w!==oa[3])a.viewport(b,d,m,w),oa[0]=b,oa[1]=d,oa[2]=m,oa[3]=w;E.dirty=!1}if(b=E.profile)c=performance.now(),J.count++;a.useProgram(g.program);X.setVAO(null);d=Z.location;m=da[d];m.buffer||a.enableVertexAttribArray(d);if(m.type!==l.dtype||3!==m.size||m.buffer!==l||!1!==m.normalized||0!==m.offset||0!==m.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(d,3,l.dtype,!1,0,0),m.type=l.dtype,m.size=3,m.buffer=l,m.normalized=!1,m.offset=
0,m.stride=0;a.uniformMatrix4fv(p.location,!1,fb);d=n.call(this,D,e,0);va(d)&&16===d.length||V.commandRaise(f,H);a.uniformMatrix4fv(y.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Ta[0]=d[0],Ta[1]=d[1],Ta[2]=d[2],Ta[3]=d[3],Ta[4]=d[4],Ta[5]=d[5],Ta[6]=d[6],Ta[7]=d[7],Ta[8]=d[8],Ta[9]=d[9],Ta[10]=d[10],Ta[11]=d[11],Ta[12]=d[12],Ta[13]=d[13],Ta[14]=d[14],Ta[15]=d[15],Ta));e=F.call(this,D,e,0);va(e)&&16===e.length||V.commandRaise(C,H);a.uniformMatrix4fv(h.location,!1,Array.isArray(e)||e instanceof
Float32Array?e:(v[0]=e[0],v[1]=e[1],v[2]=e[2],v[3]=e[3],v[4]=e[4],v[5]=e[5],v[6]=e[6],v[7]=e[7],v[8]=e[8],v[9]=e[9],v[10]=e[10],v[11]=e[11],v[12]=e[12],v[13]=e[13],v[14]=e[14],v[15]=e[15],v));O&&a.bindBuffer(34963,O.buffer.buffer);e=O.primType;d=O.vertCount-0;0<=d||V.commandRaise(I,H);d&&(a.drawElements(e,d,O.type,0<<(O.type-5121>>1)),X.setVAO(null),b&&(J.cpuTime+=performance.now()-c))},scope:function(a,e,c){var f,d,h,q,r,p,n,g,v,w,x,K,z,y,A,S,G,ga,oa,C,B,F,M;if(f=E.profile)d=performance.now(),J.count++;
h=b.elements;b.elements=k;q=b.offset;b.offset=0;r=k.vertCount-0;0<=r||V.commandRaise(u,H);p=b.count;b.count=r;n=k.primType;r=b.primitive;b.primitive=n;n=aa[3];aa[3]=m;g=L.call(this,D,a,c);v=aa[5];aa[5]=g;w=W.call(this,D,a,c);g=aa[4];aa[4]=w;w=t.buffer;t.buffer=l;x=t.divisor;t.divisor=0;K=t.normalized;t.normalized=!1;z=t.offset;t.offset=0;y=t.size;t.size=0;A=t.state;t.state=1;S=t.stride;t.stride=0;G=t.type;t.type=l.dtype;ga=t.w;t.w=0;oa=t.x;t.x=0;C=t.y;t.y=0;B=t.z;t.z=0;F=ja.vert;ja.vert=2;M=ja.frag;
ja.frag=1;e(D,a,c);f&&(J.cpuTime+=performance.now()-d);b.elements=h;b.offset=q;b.count=p;b.primitive=r;aa[3]=n;aa[5]=v;aa[4]=g;t.buffer=w;t.divisor=x;t.normalized=K;t.offset=z;t.size=y;t.state=A;t.stride=S;t.type=G;t.w=ga;t.x=oa;t.y=C;t.z=B;ja.vert=F;ja.frag=M},batch:function(b,f){var d,m,n;d=x.next;d!==x.cur&&(d?a.bindFramebuffer(36160,d.framebuffer):a.bindFramebuffer(36160,null),x.cur=d);if(E.dirty){var g,v,t;d=z.dither;d!==E.dither&&(d?a.enable(3024):a.disable(3024),E.dither=d);d=z.blend_enable;
d!==E.blend_enable&&(d?a.enable(3042):a.disable(3042),E.blend_enable=d);d=fa[0];g=fa[1];v=fa[2];t=fa[3];if(d!==R[0]||g!==R[1]||v!==R[2]||t!==R[3])a.blendColor(d,g,v,t),R[0]=d,R[1]=g,R[2]=v,R[3]=t;d=T[0];g=T[1];if(d!==A[0]||g!==A[1])a.blendEquationSeparate(d,g),A[0]=d,A[1]=g;d=q[0];g=q[1];v=q[2];t=q[3];if(d!==M[0]||g!==M[1]||v!==M[2]||t!==M[3])a.blendFuncSeparate(d,g,v,t),M[0]=d,M[1]=g,M[2]=v,M[3]=t;d=z.depth_enable;d!==E.depth_enable&&(d?a.enable(2929):a.disable(2929),E.depth_enable=d);d=z.depth_func;
d!==E.depth_func&&(a.depthFunc(d),E.depth_func=d);d=qa[0];g=qa[1];if(d!==r[0]||g!==r[1])a.depthRange(d,g),r[0]=d,r[1]=g;d=z.depth_mask;d!==E.depth_mask&&(a.depthMask(d),E.depth_mask=d);d=P[0];g=P[1];v=P[2];t=P[3];if(d!==ba[0]||g!==ba[1]||v!==ba[2]||t!==ba[3])a.colorMask(d,g,v,t),ba[0]=d,ba[1]=g,ba[2]=v,ba[3]=t;d=z.cull_enable;d!==E.cull_enable&&(d?a.enable(2884):a.disable(2884),E.cull_enable=d);d=z.cull_face;d!==E.cull_face&&(a.cullFace(d),E.cull_face=d);d=z.frontFace;d!==E.frontFace&&(a.frontFace(d),
E.frontFace=d);d=z.lineWidth;d!==E.lineWidth&&(a.lineWidth(d),E.lineWidth=d);d=z.polygonOffset_enable;d!==E.polygonOffset_enable&&(d?a.enable(32823):a.disable(32823),E.polygonOffset_enable=d);d=G[0];g=G[1];if(d!==ca[0]||g!==ca[1])a.polygonOffset(d,g),ca[0]=d,ca[1]=g;d=z.sample_alpha;d!==E.sample_alpha&&(d?a.enable(32926):a.disable(32926),E.sample_alpha=d);d=z.sample_enable;d!==E.sample_enable&&(d?a.enable(32928):a.disable(32928),E.sample_enable=d);d=S[0];g=S[1];if(d!==ma[0]||g!==ma[1])a.sampleCoverage(d,
g),ma[0]=d,ma[1]=g;d=z.stencil_enable;d!==E.stencil_enable&&(d?a.enable(2960):a.disable(2960),E.stencil_enable=d);d=z.stencil_mask;d!==E.stencil_mask&&(a.stencilMask(d),E.stencil_mask=d);d=ya[0];g=ya[1];v=ya[2];if(d!==ga[0]||g!==ga[1]||v!==ga[2])a.stencilFunc(d,g,v),ga[0]=d,ga[1]=g,ga[2]=v;d=pa[0];g=pa[1];v=pa[2];t=pa[3];if(d!==xa[0]||g!==xa[1]||v!==xa[2]||t!==xa[3])a.stencilOpSeparate(d,g,v,t),xa[0]=d,xa[1]=g,xa[2]=v,xa[3]=t;d=Ca[0];g=Ca[1];v=Ca[2];t=Ca[3];if(d!==ka[0]||g!==ka[1]||v!==ka[2]||t!==
ka[3])a.stencilOpSeparate(d,g,v,t),ka[0]=d,ka[1]=g,ka[2]=v,ka[3]=t;d=z.scissor_enable;d!==E.scissor_enable&&(d?a.enable(3089):a.disable(3089),E.scissor_enable=d);d=ra[0];g=ra[1];v=ra[2];t=ra[3];if(d!==za[0]||g!==za[1]||v!==za[2]||t!==za[3])a.scissor(d,g,v,t),za[0]=d,za[1]=g,za[2]=v,za[3]=t;d=La[0];g=La[1];v=La[2];t=La[3];if(d!==oa[0]||g!==oa[1]||v!==oa[2]||t!==oa[3])a.viewport(d,g,v,t),oa[0]=d,oa[1]=g,oa[2]=v,oa[3]=t;E.dirty=!1}if(d=E.profile)m=performance.now(),J.count+=f;a.useProgram(N.program);
X.setVAO(null);g=Z.location;v=da[g];v.buffer||a.enableVertexAttribArray(g);if(v.type!==l.dtype||3!==v.size||v.buffer!==l||!1!==v.normalized||0!==v.offset||0!==v.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(g,3,l.dtype,!1,0,0),v.type=l.dtype,v.size=3,v.buffer=l,v.normalized=!1,v.offset=0,v.stride=0;a.uniformMatrix4fv(p.location,!1,K);g=w.call(this,D,void 0,n);va(g)&&16===g.length||V.commandRaise(B,H);a.uniformMatrix4fv(y.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(ua[0]=
g[0],ua[1]=g[1],ua[2]=g[2],ua[3]=g[3],ua[4]=g[4],ua[5]=g[5],ua[6]=g[6],ua[7]=g[7],ua[8]=g[8],ua[9]=g[9],ua[10]=g[10],ua[11]=g[11],ua[12]=g[12],ua[13]=g[13],ua[14]=g[14],ua[15]=g[15],ua));n=ha.call(this,D,void 0,n);va(n)&&16===n.length||V.commandRaise(c,H);a.uniformMatrix4fv(h.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ba[0]=n[0],Ba[1]=n[1],Ba[2]=n[2],Ba[3]=n[3],Ba[4]=n[4],Ba[5]=n[5],Ba[6]=n[6],Ba[7]=n[7],Ba[8]=n[8],Ba[9]=n[9],Ba[10]=n[10],Ba[11]=n[11],Ba[12]=n[12],Ba[13]=n[13],Ba[14]=
n[14],Ba[15]=n[15],Ba));e&&a.bindBuffer(34963,e.buffer.buffer);g=e.primType;v=e.vertCount-0;0<=v||V.commandRaise(U,H);for(n=0;n<f;++n)v&&a.drawElements(g,v,e.type,0<<(e.type-5121>>1));X.setVAO(null);d&&(J.cpuTime+=performance.now()-m)}}},$20:function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha){var c,e,U,p,Z,h,y,da,D,E,b,x,a,aa,z,ja,ba,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za;c=d.context;e=d.current;U=d.framebuffer;p=d.gl;Z=d.next;h=d.shader;y=d.uniforms;da=d.vao;D=Z.blend_color;E=e.blend_color;b=
Z.blend_equation;x=e.blend_equation;a=Z.blend_func;aa=e.blend_func;z=Z.colorMask;ja=e.colorMask;ba=Z.depth_range;X=e.depth_range;fa=Z.polygonOffset_offset;R=e.polygonOffset_offset;T=Z.sample_coverage;A=e.sample_coverage;q=Z.scissor_box;M=e.scissor_box;P=Z.stencil_func;wa=e.stencil_func;qa=Z.stencil_opBack;r=e.stencil_opBack;G=Z.stencil_opFront;ca=e.stencil_opFront;S=Z.viewport;ma=e.viewport;ra={};za={};return{draw:function(d){var w,t,y,u,k,B,oa,L,I,v,m,K,N;w=c.center;t=c.distance;y=c.eye;u=c.phi;
k=c.projection;B=n.call(this,c,d,0);oa=c.theta;L=c.up;I=c.view;c.center=g;c.distance=2.302585092994046;c.eye=l;c.phi=0;c.projection=B;c.theta=0;c.up=f;c.view=F;B=U.next;B!==U.cur&&(B?p.bindFramebuffer(36160,B.framebuffer):p.bindFramebuffer(36160,null),U.cur=B);if(e.dirty){B=Z.dither;B!==e.dither&&(B?p.enable(3024):p.disable(3024),e.dither=B);B=Z.blend_enable;B!==e.blend_enable&&(B?p.enable(3042):p.disable(3042),e.blend_enable=B);B=D[0];m=D[1];K=D[2];N=D[3];if(B!==E[0]||m!==E[1]||K!==E[2]||N!==E[3])p.blendColor(B,
m,K,N),E[0]=B,E[1]=m,E[2]=K,E[3]=N;B=b[0];m=b[1];if(B!==x[0]||m!==x[1])p.blendEquationSeparate(B,m),x[0]=B,x[1]=m;B=a[0];m=a[1];K=a[2];N=a[3];if(B!==aa[0]||m!==aa[1]||K!==aa[2]||N!==aa[3])p.blendFuncSeparate(B,m,K,N),aa[0]=B,aa[1]=m,aa[2]=K,aa[3]=N;B=Z.depth_enable;B!==e.depth_enable&&(B?p.enable(2929):p.disable(2929),e.depth_enable=B);B=Z.depth_func;B!==e.depth_func&&(p.depthFunc(B),e.depth_func=B);B=ba[0];m=ba[1];if(B!==X[0]||m!==X[1])p.depthRange(B,m),X[0]=B,X[1]=m;B=Z.depth_mask;B!==e.depth_mask&&
(p.depthMask(B),e.depth_mask=B);B=z[0];m=z[1];K=z[2];N=z[3];if(B!==ja[0]||m!==ja[1]||K!==ja[2]||N!==ja[3])p.colorMask(B,m,K,N),ja[0]=B,ja[1]=m,ja[2]=K,ja[3]=N;B=Z.cull_enable;B!==e.cull_enable&&(B?p.enable(2884):p.disable(2884),e.cull_enable=B);B=Z.cull_face;B!==e.cull_face&&(p.cullFace(B),e.cull_face=B);B=Z.frontFace;B!==e.frontFace&&(p.frontFace(B),e.frontFace=B);B=Z.lineWidth;B!==e.lineWidth&&(p.lineWidth(B),e.lineWidth=B);B=Z.polygonOffset_enable;B!==e.polygonOffset_enable&&(B?p.enable(32823):
p.disable(32823),e.polygonOffset_enable=B);B=fa[0];m=fa[1];if(B!==R[0]||m!==R[1])p.polygonOffset(B,m),R[0]=B,R[1]=m;B=Z.sample_alpha;B!==e.sample_alpha&&(B?p.enable(32926):p.disable(32926),e.sample_alpha=B);B=Z.sample_enable;B!==e.sample_enable&&(B?p.enable(32928):p.disable(32928),e.sample_enable=B);B=T[0];m=T[1];if(B!==A[0]||m!==A[1])p.sampleCoverage(B,m),A[0]=B,A[1]=m;B=Z.stencil_enable;B!==e.stencil_enable&&(B?p.enable(2960):p.disable(2960),e.stencil_enable=B);B=Z.stencil_mask;B!==e.stencil_mask&&
(p.stencilMask(B),e.stencil_mask=B);B=P[0];m=P[1];K=P[2];if(B!==wa[0]||m!==wa[1]||K!==wa[2])p.stencilFunc(B,m,K),wa[0]=B,wa[1]=m,wa[2]=K;B=G[0];m=G[1];K=G[2];N=G[3];if(B!==ca[0]||m!==ca[1]||K!==ca[2]||N!==ca[3])p.stencilOpSeparate(B,m,K,N),ca[0]=B,ca[1]=m,ca[2]=K,ca[3]=N;B=qa[0];m=qa[1];K=qa[2];N=qa[3];if(B!==r[0]||m!==r[1]||K!==r[2]||N!==r[3])p.stencilOpSeparate(B,m,K,N),r[0]=B,r[1]=m,r[2]=K,r[3]=N;B=Z.scissor_enable;B!==e.scissor_enable&&(B?p.enable(3089):p.disable(3089),e.scissor_enable=B);B=q[0];
m=q[1];K=q[2];N=q[3];if(B!==M[0]||m!==M[1]||K!==M[2]||N!==M[3])p.scissor(B,m,K,N),M[0]=B,M[1]=m,M[2]=K,M[3]=N;B=S[0];m=S[1];K=S[2];N=S[3];if(B!==ma[0]||m!==ma[1]||K!==ma[2]||N!==ma[3])p.viewport(B,m,K,N),ma[0]=B,ma[1]=m,ma[2]=K,ma[3]=N;e.dirty=!1}if(B=e.profile)v=performance.now(),J.count++;m=h.program(h.vert,h.frag,H);p.useProgram(m.program);da.setVAO(null);K=m.id;(N=ra[K])||(N=ra[K]=C(m));N.call(this,d);da.setVAO(null);c.center=w;c.distance=t;c.eye=y;c.phi=u;c.projection=k;c.theta=oa;c.up=L;c.view=
I;B&&(J.cpuTime+=performance.now()-v)},scope:function(a,b,f){var d,h,l,q,n,r,g,p,m,w,t,x,z,A,B,Q,D,E,S;d=c.center;h=c.distance;l=c.eye;q=c.phi;n=c.projection;r=k.call(this,c,a,f);g=c.theta;p=c.up;m=c.view;c.center=O;c.distance=2.302585092994046;c.eye=I;c.phi=0;c.projection=r;c.theta=0;c.up=u;c.view=L;if(r=e.profile)w=performance.now(),J.count++;t=c.center;x=y[1];y[1]=t;z=c.distance;t=y[2];y[2]=z;A=c.eye;z=y[3];y[3]=A;B=c.phi;A=y[4];y[4]=B;Q=c.projection;B=y[5];y[5]=Q;D=c.theta;Q=y[6];y[6]=D;E=c.up;
D=y[7];y[7]=E;E=c.view;S=y[8];y[8]=E;b(c,a,f);c.center=d;c.distance=h;c.eye=l;c.phi=q;c.projection=n;c.theta=g;c.up=p;c.view=m;r&&(J.cpuTime+=performance.now()-w);y[1]=x;y[2]=t;y[3]=z;y[4]=A;y[5]=B;y[6]=Q;y[7]=D;y[8]=S},batch:function(f,d){var l,n,g,y,u,k,C,L,v,m,K,F,I;l=c.center;n=c.distance;g=c.eye;y=c.phi;u=c.projection;k=N.call(this,c,f,0);C=c.theta;L=c.up;v=c.view;c.center=W;c.distance=2.302585092994046;c.eye=t;c.phi=0;c.projection=k;c.theta=0;c.up=w;c.view=B;k=U.next;k!==U.cur&&(k?p.bindFramebuffer(36160,
k.framebuffer):p.bindFramebuffer(36160,null),U.cur=k);if(e.dirty){k=Z.dither;k!==e.dither&&(k?p.enable(3024):p.disable(3024),e.dither=k);k=Z.blend_enable;k!==e.blend_enable&&(k?p.enable(3042):p.disable(3042),e.blend_enable=k);k=D[0];K=D[1];F=D[2];I=D[3];if(k!==E[0]||K!==E[1]||F!==E[2]||I!==E[3])p.blendColor(k,K,F,I),E[0]=k,E[1]=K,E[2]=F,E[3]=I;k=b[0];K=b[1];if(k!==x[0]||K!==x[1])p.blendEquationSeparate(k,K),x[0]=k,x[1]=K;k=a[0];K=a[1];F=a[2];I=a[3];if(k!==aa[0]||K!==aa[1]||F!==aa[2]||I!==aa[3])p.blendFuncSeparate(k,
K,F,I),aa[0]=k,aa[1]=K,aa[2]=F,aa[3]=I;k=Z.depth_enable;k!==e.depth_enable&&(k?p.enable(2929):p.disable(2929),e.depth_enable=k);k=Z.depth_func;k!==e.depth_func&&(p.depthFunc(k),e.depth_func=k);k=ba[0];K=ba[1];if(k!==X[0]||K!==X[1])p.depthRange(k,K),X[0]=k,X[1]=K;k=Z.depth_mask;k!==e.depth_mask&&(p.depthMask(k),e.depth_mask=k);k=z[0];K=z[1];F=z[2];I=z[3];if(k!==ja[0]||K!==ja[1]||F!==ja[2]||I!==ja[3])p.colorMask(k,K,F,I),ja[0]=k,ja[1]=K,ja[2]=F,ja[3]=I;k=Z.cull_enable;k!==e.cull_enable&&(k?p.enable(2884):
p.disable(2884),e.cull_enable=k);k=Z.cull_face;k!==e.cull_face&&(p.cullFace(k),e.cull_face=k);k=Z.frontFace;k!==e.frontFace&&(p.frontFace(k),e.frontFace=k);k=Z.lineWidth;k!==e.lineWidth&&(p.lineWidth(k),e.lineWidth=k);k=Z.polygonOffset_enable;k!==e.polygonOffset_enable&&(k?p.enable(32823):p.disable(32823),e.polygonOffset_enable=k);k=fa[0];K=fa[1];if(k!==R[0]||K!==R[1])p.polygonOffset(k,K),R[0]=k,R[1]=K;k=Z.sample_alpha;k!==e.sample_alpha&&(k?p.enable(32926):p.disable(32926),e.sample_alpha=k);k=Z.sample_enable;
k!==e.sample_enable&&(k?p.enable(32928):p.disable(32928),e.sample_enable=k);k=T[0];K=T[1];if(k!==A[0]||K!==A[1])p.sampleCoverage(k,K),A[0]=k,A[1]=K;k=Z.stencil_enable;k!==e.stencil_enable&&(k?p.enable(2960):p.disable(2960),e.stencil_enable=k);k=Z.stencil_mask;k!==e.stencil_mask&&(p.stencilMask(k),e.stencil_mask=k);k=P[0];K=P[1];F=P[2];if(k!==wa[0]||K!==wa[1]||F!==wa[2])p.stencilFunc(k,K,F),wa[0]=k,wa[1]=K,wa[2]=F;k=G[0];K=G[1];F=G[2];I=G[3];if(k!==ca[0]||K!==ca[1]||F!==ca[2]||I!==ca[3])p.stencilOpSeparate(k,
K,F,I),ca[0]=k,ca[1]=K,ca[2]=F,ca[3]=I;k=qa[0];K=qa[1];F=qa[2];I=qa[3];if(k!==r[0]||K!==r[1]||F!==r[2]||I!==r[3])p.stencilOpSeparate(k,K,F,I),r[0]=k,r[1]=K,r[2]=F,r[3]=I;k=Z.scissor_enable;k!==e.scissor_enable&&(k?p.enable(3089):p.disable(3089),e.scissor_enable=k);k=q[0];K=q[1];F=q[2];I=q[3];if(k!==M[0]||K!==M[1]||F!==M[2]||I!==M[3])p.scissor(k,K,F,I),M[0]=k,M[1]=K,M[2]=F,M[3]=I;k=S[0];K=S[1];F=S[2];I=S[3];if(k!==ma[0]||K!==ma[1]||F!==ma[2]||I!==ma[3])p.viewport(k,K,F,I),ma[0]=k,ma[1]=K,ma[2]=F,ma[3]=
I;e.dirty=!1}if(k=e.profile)m=performance.now(),J.count+=d;K=h.program(h.vert,h.frag,H);p.useProgram(K.program);da.setVAO(null);F=K.id;(I=za[F])||(I=za[F]=ha(K));I.call(this,f,d);da.setVAO(null);c.center=l;c.distance=n;c.eye=g;c.phi=y;c.projection=u;c.theta=C;c.up=L;c.view=v;k&&(J.cpuTime+=performance.now()-m)}}},"$27,position,projection,tex,uv,view":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x){var a,aa,z,ja,ba,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,
pa,xa,La,oa,fb,Ta,v,m,K,ua,Ba,Ma,Hb;a=d.attributes;aa=d.context;z=d.current;ja=d.draw;ba=d.framebuffer;X=d.gl;fa=d.isArrayLike;R=d.next;T=d.shader;A=d.uniforms;q=d.vao;M=R.blend_color;P=z.blend_color;wa=R.blend_equation;qa=z.blend_equation;r=R.blend_func;G=z.blend_func;ca=R.colorMask;S=z.colorMask;ma=R.depth_range;ra=z.depth_range;za=R.polygonOffset_offset;ya=z.polygonOffset_offset;ga=R.sample_coverage;Ca=z.sample_coverage;ka=R.scissor_box;pa=z.scissor_box;xa=R.stencil_func;La=z.stencil_func;oa=R.stencil_opBack;
fb=z.stencil_opBack;Ta=R.stencil_opFront;v=z.stencil_opFront;m=R.viewport;K=z.viewport;ua=new Float32Array(16);Ba=new Float32Array(16);Ma=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(e){var c,d,h,p;c=ba.next;c!==ba.cur&&(c?X.bindFramebuffer(36160,c.framebuffer):X.bindFramebuffer(36160,null),ba.cur=c);if(z.dirty){var w;c=R.dither;c!==z.dither&&(c?X.enable(3024):X.disable(3024),z.dither=c);c=R.blend_enable;c!==z.blend_enable&&(c?X.enable(3042):X.disable(3042),z.blend_enable=c);
c=M[0];h=M[1];p=M[2];w=M[3];if(c!==P[0]||h!==P[1]||p!==P[2]||w!==P[3])X.blendColor(c,h,p,w),P[0]=c,P[1]=h,P[2]=p,P[3]=w;c=wa[0];h=wa[1];if(c!==qa[0]||h!==qa[1])X.blendEquationSeparate(c,h),qa[0]=c,qa[1]=h;c=r[0];h=r[1];p=r[2];w=r[3];if(c!==G[0]||h!==G[1]||p!==G[2]||w!==G[3])X.blendFuncSeparate(c,h,p,w),G[0]=c,G[1]=h,G[2]=p,G[3]=w;c=R.depth_enable;c!==z.depth_enable&&(c?X.enable(2929):X.disable(2929),z.depth_enable=c);c=R.depth_func;c!==z.depth_func&&(X.depthFunc(c),z.depth_func=c);c=ma[0];h=ma[1];
if(c!==ra[0]||h!==ra[1])X.depthRange(c,h),ra[0]=c,ra[1]=h;c=R.depth_mask;c!==z.depth_mask&&(X.depthMask(c),z.depth_mask=c);c=ca[0];h=ca[1];p=ca[2];w=ca[3];if(c!==S[0]||h!==S[1]||p!==S[2]||w!==S[3])X.colorMask(c,h,p,w),S[0]=c,S[1]=h,S[2]=p,S[3]=w;c=R.cull_enable;c!==z.cull_enable&&(c?X.enable(2884):X.disable(2884),z.cull_enable=c);c=R.cull_face;c!==z.cull_face&&(X.cullFace(c),z.cull_face=c);c=R.frontFace;c!==z.frontFace&&(X.frontFace(c),z.frontFace=c);c=R.lineWidth;c!==z.lineWidth&&(X.lineWidth(c),
z.lineWidth=c);c=R.polygonOffset_enable;c!==z.polygonOffset_enable&&(c?X.enable(32823):X.disable(32823),z.polygonOffset_enable=c);c=za[0];h=za[1];if(c!==ya[0]||h!==ya[1])X.polygonOffset(c,h),ya[0]=c,ya[1]=h;c=R.sample_alpha;c!==z.sample_alpha&&(c?X.enable(32926):X.disable(32926),z.sample_alpha=c);c=R.sample_enable;c!==z.sample_enable&&(c?X.enable(32928):X.disable(32928),z.sample_enable=c);c=ga[0];h=ga[1];if(c!==Ca[0]||h!==Ca[1])X.sampleCoverage(c,h),Ca[0]=c,Ca[1]=h;c=R.stencil_enable;c!==z.stencil_enable&&
(c?X.enable(2960):X.disable(2960),z.stencil_enable=c);c=R.stencil_mask;c!==z.stencil_mask&&(X.stencilMask(c),z.stencil_mask=c);c=xa[0];h=xa[1];p=xa[2];if(c!==La[0]||h!==La[1]||p!==La[2])X.stencilFunc(c,h,p),La[0]=c,La[1]=h,La[2]=p;c=Ta[0];h=Ta[1];p=Ta[2];w=Ta[3];if(c!==v[0]||h!==v[1]||p!==v[2]||w!==v[3])X.stencilOpSeparate(c,h,p,w),v[0]=c,v[1]=h,v[2]=p,v[3]=w;c=oa[0];h=oa[1];p=oa[2];w=oa[3];if(c!==fb[0]||h!==fb[1]||p!==fb[2]||w!==fb[3])X.stencilOpSeparate(c,h,p,w),fb[0]=c,fb[1]=h,fb[2]=p,fb[3]=w;
c=R.scissor_enable;c!==z.scissor_enable&&(c?X.enable(3089):X.disable(3089),z.scissor_enable=c);c=ka[0];h=ka[1];p=ka[2];w=ka[3];if(c!==pa[0]||h!==pa[1]||p!==pa[2]||w!==pa[3])X.scissor(c,h,p,w),pa[0]=c,pa[1]=h,pa[2]=p,pa[3]=w;c=m[0];h=m[1];p=m[2];w=m[3];if(c!==K[0]||h!==K[1]||p!==K[2]||w!==K[3])X.viewport(c,h,p,w),K[0]=c,K[1]=h,K[2]=p,K[3]=w;z.dirty=!1}if(c=z.profile)d=performance.now(),J.count++;X.useProgram(g.program);q.setVAO(null);h=da.location;p=a[h];p.buffer||X.enableVertexAttribArray(h);if(p.type!==
l.dtype||3!==p.size||p.buffer!==l||!1!==p.normalized||0!==p.offset||0!==p.stride)X.bindBuffer(34962,l.buffer),X.vertexAttribPointer(h,3,l.dtype,!1,0,0),p.type=l.dtype,p.size=3,p.buffer=l,p.normalized=!1,p.offset=0,p.stride=0;h=b.location;p=a[h];p.buffer||X.enableVertexAttribArray(h);if(p.type!==n.dtype||2!==p.size||p.buffer!==n||!1!==p.normalized||0!==p.offset||0!==p.stride)X.bindBuffer(34962,n.buffer),X.vertexAttribPointer(h,2,n.dtype,!1,0,0),p.type=n.dtype,p.size=2,p.buffer=n,p.normalized=!1,p.offset=
0,p.stride=0;h=f.call(this,aa,e,0);fa(h)&&16===h.length||V.commandRaise(F,H);X.uniformMatrix4fv(D.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(ua[0]=h[0],ua[1]=h[1],ua[2]=h[2],ua[3]=h[3],ua[4]=h[4],ua[5]=h[5],ua[6]=h[6],ua[7]=h[7],ua[8]=h[8],ua[9]=h[9],ua[10]=h[10],ua[11]=h[11],ua[12]=h[12],ua[13]=h[13],ua[14]=h[14],ua[15]=h[15],ua));h=C.call(this,aa,e,0);fa(h)&&16===h.length||V.commandRaise(O,H);X.uniformMatrix4fv(x.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ba[0]=h[0],
Ba[1]=h[1],Ba[2]=h[2],Ba[3]=h[3],Ba[4]=h[4],Ba[5]=h[5],Ba[6]=h[6],Ba[7]=h[7],Ba[8]=h[8],Ba[9]=h[9],Ba[10]=h[10],Ba[11]=h[11],Ba[12]=h[12],Ba[13]=h[13],Ba[14]=h[14],Ba[15]=h[15],Ba));(e=e.texture)&&"framebuffer"===e._reglType&&(e=e.color[0]);"function"===typeof e&&"texture2d"===e._reglType||V.commandRaise(I,H);e=e._texture;X.uniform1i(E.location,e.bind());k&&X.bindBuffer(34963,k.buffer.buffer);h=k.primType;p=k.vertCount-0;0<=p||V.commandRaise(u,H);p&&(X.drawElements(h,p,k.type,0<<(k.type-5121>>1)),
q.setVAO(null),c&&(J.cpuTime+=performance.now()-d),e.unbind())},scope:function(a,b,c){var e,f,d,h,m,p,q,r,g,v,x,K,y,u,k,D,E,S,G,ga,C,F,I,M,P,fb,R,U,O,ra,ya,oa,ha,Z,X;if(e=z.profile)f=performance.now(),J.count++;d=ja.elements;ja.elements=L;h=ja.offset;ja.offset=0;m=L.vertCount-0;0<=m||V.commandRaise(W,H);p=ja.count;ja.count=m;q=L.primType;m=ja.primitive;ja.primitive=q;r=t.call(this,aa,a,c);q=A[3];A[3]=r;g=a.texture;r=A[5];A[5]=g;v=N.call(this,aa,a,c);g=A[4];A[4]=v;v=w.buffer;w.buffer=l;x=w.divisor;
w.divisor=0;K=w.normalized;w.normalized=!1;y=w.offset;w.offset=0;u=w.size;w.size=0;k=w.state;w.state=1;D=w.stride;w.stride=0;E=w.type;w.type=l.dtype;S=w.w;w.w=0;G=w.x;w.x=0;ga=w.y;w.y=0;C=w.z;w.z=0;F=B.buffer;B.buffer=n;I=B.divisor;B.divisor=0;M=B.normalized;B.normalized=!1;P=B.offset;B.offset=0;fb=B.size;B.size=0;R=B.state;B.state=1;U=B.stride;B.stride=0;O=B.type;B.type=n.dtype;ra=B.w;B.w=0;ya=B.x;B.x=0;oa=B.y;B.y=0;ha=B.z;B.z=0;Z=T.vert;T.vert=2;X=T.frag;T.frag=1;b(aa,a,c);e&&(J.cpuTime+=performance.now()-
f);ja.elements=d;ja.offset=h;ja.count=p;ja.primitive=m;A[3]=q;A[5]=r;A[4]=g;w.buffer=v;w.divisor=x;w.normalized=K;w.offset=y;w.size=u;w.state=k;w.stride=D;w.type=E;w.w=S;w.x=G;w.y=ga;w.z=C;B.buffer=F;B.divisor=I;B.normalized=M;B.offset=P;B.size=fb;B.state=R;B.stride=U;B.type=O;B.w=ra;B.x=ya;B.y=oa;B.z=ha;T.vert=Z;T.frag=X},batch:function(f,d){var g,w,t,u;g=ba.next;g!==ba.cur&&(g?X.bindFramebuffer(36160,g.framebuffer):X.bindFramebuffer(36160,null),ba.cur=g);if(z.dirty){var k,A,B;g=R.dither;g!==z.dither&&
(g?X.enable(3024):X.disable(3024),z.dither=g);g=R.blend_enable;g!==z.blend_enable&&(g?X.enable(3042):X.disable(3042),z.blend_enable=g);g=M[0];k=M[1];A=M[2];B=M[3];if(g!==P[0]||k!==P[1]||A!==P[2]||B!==P[3])X.blendColor(g,k,A,B),P[0]=g,P[1]=k,P[2]=A,P[3]=B;g=wa[0];k=wa[1];if(g!==qa[0]||k!==qa[1])X.blendEquationSeparate(g,k),qa[0]=g,qa[1]=k;g=r[0];k=r[1];A=r[2];B=r[3];if(g!==G[0]||k!==G[1]||A!==G[2]||B!==G[3])X.blendFuncSeparate(g,k,A,B),G[0]=g,G[1]=k,G[2]=A,G[3]=B;g=R.depth_enable;g!==z.depth_enable&&
(g?X.enable(2929):X.disable(2929),z.depth_enable=g);g=R.depth_func;g!==z.depth_func&&(X.depthFunc(g),z.depth_func=g);g=ma[0];k=ma[1];if(g!==ra[0]||k!==ra[1])X.depthRange(g,k),ra[0]=g,ra[1]=k;g=R.depth_mask;g!==z.depth_mask&&(X.depthMask(g),z.depth_mask=g);g=ca[0];k=ca[1];A=ca[2];B=ca[3];if(g!==S[0]||k!==S[1]||A!==S[2]||B!==S[3])X.colorMask(g,k,A,B),S[0]=g,S[1]=k,S[2]=A,S[3]=B;g=R.cull_enable;g!==z.cull_enable&&(g?X.enable(2884):X.disable(2884),z.cull_enable=g);g=R.cull_face;g!==z.cull_face&&(X.cullFace(g),
z.cull_face=g);g=R.frontFace;g!==z.frontFace&&(X.frontFace(g),z.frontFace=g);g=R.lineWidth;g!==z.lineWidth&&(X.lineWidth(g),z.lineWidth=g);g=R.polygonOffset_enable;g!==z.polygonOffset_enable&&(g?X.enable(32823):X.disable(32823),z.polygonOffset_enable=g);g=za[0];k=za[1];if(g!==ya[0]||k!==ya[1])X.polygonOffset(g,k),ya[0]=g,ya[1]=k;g=R.sample_alpha;g!==z.sample_alpha&&(g?X.enable(32926):X.disable(32926),z.sample_alpha=g);g=R.sample_enable;g!==z.sample_enable&&(g?X.enable(32928):X.disable(32928),z.sample_enable=
g);g=ga[0];k=ga[1];if(g!==Ca[0]||k!==Ca[1])X.sampleCoverage(g,k),Ca[0]=g,Ca[1]=k;g=R.stencil_enable;g!==z.stencil_enable&&(g?X.enable(2960):X.disable(2960),z.stencil_enable=g);g=R.stencil_mask;g!==z.stencil_mask&&(X.stencilMask(g),z.stencil_mask=g);g=xa[0];k=xa[1];A=xa[2];if(g!==La[0]||k!==La[1]||A!==La[2])X.stencilFunc(g,k,A),La[0]=g,La[1]=k,La[2]=A;g=Ta[0];k=Ta[1];A=Ta[2];B=Ta[3];if(g!==v[0]||k!==v[1]||A!==v[2]||B!==v[3])X.stencilOpSeparate(g,k,A,B),v[0]=g,v[1]=k,v[2]=A,v[3]=B;g=oa[0];k=oa[1];A=
oa[2];B=oa[3];if(g!==fb[0]||k!==fb[1]||A!==fb[2]||B!==fb[3])X.stencilOpSeparate(g,k,A,B),fb[0]=g,fb[1]=k,fb[2]=A,fb[3]=B;g=R.scissor_enable;g!==z.scissor_enable&&(g?X.enable(3089):X.disable(3089),z.scissor_enable=g);g=ka[0];k=ka[1];A=ka[2];B=ka[3];if(g!==pa[0]||k!==pa[1]||A!==pa[2]||B!==pa[3])X.scissor(g,k,A,B),pa[0]=g,pa[1]=k,pa[2]=A,pa[3]=B;g=m[0];k=m[1];A=m[2];B=m[3];if(g!==K[0]||k!==K[1]||A!==K[2]||B!==K[3])X.viewport(g,k,A,B),K[0]=g,K[1]=k,K[2]=A,K[3]=B;z.dirty=!1}if(g=z.profile)w=performance.now(),
J.count+=d;X.useProgram(ha.program);q.setVAO(null);k=da.location;A=a[k];A.buffer||X.enableVertexAttribArray(k);if(A.type!==l.dtype||3!==A.size||A.buffer!==l||!1!==A.normalized||0!==A.offset||0!==A.stride)X.bindBuffer(34962,l.buffer),X.vertexAttribPointer(k,3,l.dtype,!1,0,0),A.type=l.dtype,A.size=3,A.buffer=l,A.normalized=!1,A.offset=0,A.stride=0;k=b.location;A=a[k];A.buffer||X.enableVertexAttribArray(k);if(A.type!==n.dtype||2!==A.size||A.buffer!==n||!1!==A.normalized||0!==A.offset||0!==A.stride)X.bindBuffer(34962,
n.buffer),X.vertexAttribPointer(k,2,n.dtype,!1,0,0),A.type=n.dtype,A.size=2,A.buffer=n,A.normalized=!1,A.offset=0,A.stride=0;k=c.call(this,aa,u,t);fa(k)&&16===k.length||V.commandRaise(e,H);X.uniformMatrix4fv(D.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ma[0]=k[0],Ma[1]=k[1],Ma[2]=k[2],Ma[3]=k[3],Ma[4]=k[4],Ma[5]=k[5],Ma[6]=k[6],Ma[7]=k[7],Ma[8]=k[8],Ma[9]=k[9],Ma[10]=k[10],Ma[11]=k[11],Ma[12]=k[12],Ma[13]=k[13],Ma[14]=k[14],Ma[15]=k[15],Ma));t=U.call(this,aa,u,t);fa(t)&&16===t.length||
V.commandRaise(p,H);X.uniformMatrix4fv(x.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Hb[0]=t[0],Hb[1]=t[1],Hb[2]=t[2],Hb[3]=t[3],Hb[4]=t[4],Hb[5]=t[5],Hb[6]=t[6],Hb[7]=t[7],Hb[8]=t[8],Hb[9]=t[9],Hb[10]=t[10],Hb[11]=t[11],Hb[12]=t[12],Hb[13]=t[13],Hb[14]=t[14],Hb[15]=t[15],Hb));h&&X.bindBuffer(34963,h.buffer.buffer);k=h.primType;A=h.vertCount-0;0<=A||V.commandRaise(y,H);for(t=0;t<d;++t)u=f[t],(u=u.texture)&&"framebuffer"===u._reglType&&(u=u.color[0]),"function"===typeof u&&"texture2d"===
u._reglType||V.commandRaise(Z,H),u=u._texture,X.uniform1i(E.location,u.bind()),A&&(X.drawElements(k,A,h.type,0<<(h.type-5121>>1)),u.unbind());q.setVAO(null);g&&(J.cpuTime+=performance.now()-w)}}},"$19,normal,position,projection,view":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U){var p,Z,h,y,da,D,E,b,x,a,aa,z,ja,ba,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa,La,oa;p=d.attributes;Z=d.context;h=d.current;y=d.draw;da=d.framebuffer;D=d.gl;E=d.isArrayLike;b=d.next;x=d.shader;
a=d.uniforms;aa=d.vao;z=b.blend_color;ja=h.blend_color;ba=b.blend_equation;X=h.blend_equation;fa=b.blend_func;R=h.blend_func;T=b.colorMask;A=h.colorMask;q=b.depth_range;M=h.depth_range;P=b.polygonOffset_offset;wa=h.polygonOffset_offset;qa=b.sample_coverage;r=h.sample_coverage;G=b.scissor_box;ca=h.scissor_box;S=b.stencil_func;ma=h.stencil_func;ra=b.stencil_opBack;za=h.stencil_opBack;ya=b.stencil_opFront;ga=h.stencil_opFront;Ca=b.viewport;ka=h.viewport;pa=new Float32Array(16);xa=new Float32Array(16);
La=new Float32Array(16);oa=new Float32Array(16);return{draw:function(d){var w,v,m;d=da.next;d!==da.cur&&(d?D.bindFramebuffer(36160,d.framebuffer):D.bindFramebuffer(36160,null),da.cur=d);if(h.dirty){var t;d=b.dither;d!==h.dither&&(d?D.enable(3024):D.disable(3024),h.dither=d);d=b.blend_enable;d!==h.blend_enable&&(d?D.enable(3042):D.disable(3042),h.blend_enable=d);d=z[0];v=z[1];m=z[2];t=z[3];if(d!==ja[0]||v!==ja[1]||m!==ja[2]||t!==ja[3])D.blendColor(d,v,m,t),ja[0]=d,ja[1]=v,ja[2]=m,ja[3]=t;d=ba[0];v=
ba[1];if(d!==X[0]||v!==X[1])D.blendEquationSeparate(d,v),X[0]=d,X[1]=v;d=fa[0];v=fa[1];m=fa[2];t=fa[3];if(d!==R[0]||v!==R[1]||m!==R[2]||t!==R[3])D.blendFuncSeparate(d,v,m,t),R[0]=d,R[1]=v,R[2]=m,R[3]=t;d=b.depth_enable;d!==h.depth_enable&&(d?D.enable(2929):D.disable(2929),h.depth_enable=d);d=b.depth_func;d!==h.depth_func&&(D.depthFunc(d),h.depth_func=d);d=q[0];v=q[1];if(d!==M[0]||v!==M[1])D.depthRange(d,v),M[0]=d,M[1]=v;d=b.depth_mask;d!==h.depth_mask&&(D.depthMask(d),h.depth_mask=d);d=T[0];v=T[1];
m=T[2];t=T[3];if(d!==A[0]||v!==A[1]||m!==A[2]||t!==A[3])D.colorMask(d,v,m,t),A[0]=d,A[1]=v,A[2]=m,A[3]=t;d=b.cull_enable;d!==h.cull_enable&&(d?D.enable(2884):D.disable(2884),h.cull_enable=d);d=b.cull_face;d!==h.cull_face&&(D.cullFace(d),h.cull_face=d);d=b.frontFace;d!==h.frontFace&&(D.frontFace(d),h.frontFace=d);d=b.lineWidth;d!==h.lineWidth&&(D.lineWidth(d),h.lineWidth=d);d=b.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?D.enable(32823):D.disable(32823),h.polygonOffset_enable=d);d=P[0];v=P[1];
if(d!==wa[0]||v!==wa[1])D.polygonOffset(d,v),wa[0]=d,wa[1]=v;d=b.sample_alpha;d!==h.sample_alpha&&(d?D.enable(32926):D.disable(32926),h.sample_alpha=d);d=b.sample_enable;d!==h.sample_enable&&(d?D.enable(32928):D.disable(32928),h.sample_enable=d);d=qa[0];v=qa[1];if(d!==r[0]||v!==r[1])D.sampleCoverage(d,v),r[0]=d,r[1]=v;d=b.stencil_enable;d!==h.stencil_enable&&(d?D.enable(2960):D.disable(2960),h.stencil_enable=d);d=b.stencil_mask;d!==h.stencil_mask&&(D.stencilMask(d),h.stencil_mask=d);d=S[0];v=S[1];
m=S[2];if(d!==ma[0]||v!==ma[1]||m!==ma[2])D.stencilFunc(d,v,m),ma[0]=d,ma[1]=v,ma[2]=m;d=ya[0];v=ya[1];m=ya[2];t=ya[3];if(d!==ga[0]||v!==ga[1]||m!==ga[2]||t!==ga[3])D.stencilOpSeparate(d,v,m,t),ga[0]=d,ga[1]=v,ga[2]=m,ga[3]=t;d=ra[0];v=ra[1];m=ra[2];t=ra[3];if(d!==za[0]||v!==za[1]||m!==za[2]||t!==za[3])D.stencilOpSeparate(d,v,m,t),za[0]=d,za[1]=v,za[2]=m,za[3]=t;d=b.scissor_enable;d!==h.scissor_enable&&(d?D.enable(3089):D.disable(3089),h.scissor_enable=d);d=G[0];v=G[1];m=G[2];t=G[3];if(d!==ca[0]||
v!==ca[1]||m!==ca[2]||t!==ca[3])D.scissor(d,v,m,t),ca[0]=d,ca[1]=v,ca[2]=m,ca[3]=t;d=Ca[0];v=Ca[1];m=Ca[2];t=Ca[3];if(d!==ka[0]||v!==ka[1]||m!==ka[2]||t!==ka[3])D.viewport(d,v,m,t),ka[0]=d,ka[1]=v,ka[2]=m,ka[3]=t;h.dirty=!1}if(d=h.profile)w=performance.now(),J.count++;D.useProgram(g.program);aa.setVAO(null);v=c.location;m=p[v];m.buffer||D.enableVertexAttribArray(v);if(m.type!==l.dtype||3!==m.size||m.buffer!==l||!1!==m.normalized||0!==m.offset||0!==m.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(v,
3,l.dtype,!1,0,0),m.type=l.dtype,m.size=3,m.buffer=l,m.normalized=!1,m.offset=0,m.stride=0;v=ha.location;m=p[v];m.buffer||D.enableVertexAttribArray(v);if(m.type!==n.dtype||3!==m.size||m.buffer!==n||!1!==m.normalized||0!==m.offset||0!==m.stride)D.bindBuffer(34962,n.buffer),D.vertexAttribPointer(v,3,n.dtype,!1,0,0),m.type=n.dtype,m.size=3,m.buffer=n,m.normalized=!1,m.offset=0,m.stride=0;v=a[5];E(v)&&16===v.length||V.commandRaise(f,H);D.uniformMatrix4fv(e.location,!1,Array.isArray(v)||v instanceof Float32Array?
v:(pa[0]=v[0],pa[1]=v[1],pa[2]=v[2],pa[3]=v[3],pa[4]=v[4],pa[5]=v[5],pa[6]=v[6],pa[7]=v[7],pa[8]=v[8],pa[9]=v[9],pa[10]=v[10],pa[11]=v[11],pa[12]=v[12],pa[13]=v[13],pa[14]=v[14],pa[15]=v[15],pa));v=a[8];E(v)&&16===v.length||V.commandRaise(F,H);D.uniformMatrix4fv(U.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(xa[0]=v[0],xa[1]=v[1],xa[2]=v[2],xa[3]=v[3],xa[4]=v[4],xa[5]=v[5],xa[6]=v[6],xa[7]=v[7],xa[8]=v[8],xa[9]=v[9],xa[10]=v[10],xa[11]=v[11],xa[12]=v[12],xa[13]=v[13],xa[14]=v[14],xa[15]=
v[15],xa));C&&D.bindBuffer(34963,C.buffer.buffer);v=C.primType;m=C.vertCount-0;0<=m||V.commandRaise(O,H);m&&(D.drawElements(v,m,C.type,0<<(C.type-5121>>1)),aa.setVAO(null),d&&(J.cpuTime+=performance.now()-w))},scope:function(a,b,c){var e,f,d,g,p,q,r,w,t,A,z,B,D,E,S,G,ga,C,F,N,M,P,R,T,U,O,ra,ya,oa,ha,W,X;if(e=h.profile)f=performance.now(),J.count++;d=y.elements;y.elements=I;g=y.offset;y.offset=0;p=I.vertCount-0;0<=p||V.commandRaise(k,H);q=y.count;y.count=p;r=I.primType;p=y.primitive;y.primitive=r;
r=u.buffer;u.buffer=n;w=u.divisor;u.divisor=0;t=u.normalized;u.normalized=!1;A=u.offset;u.offset=0;z=u.size;u.size=0;B=u.state;u.state=1;D=u.stride;u.stride=0;E=u.type;u.type=n.dtype;S=u.w;u.w=0;G=u.x;u.x=0;ga=u.y;u.y=0;C=u.z;u.z=0;F=L.buffer;L.buffer=l;N=L.divisor;L.divisor=0;M=L.normalized;L.normalized=!1;P=L.offset;L.offset=0;R=L.size;L.size=0;T=L.state;L.state=1;U=L.stride;L.stride=0;O=L.type;L.type=l.dtype;ra=L.w;L.w=0;ya=L.x;L.x=0;oa=L.y;L.y=0;ha=L.z;L.z=0;W=x.vert;x.vert=10;X=x.frag;x.frag=
9;b(Z,a,c);e&&(J.cpuTime+=performance.now()-f);y.elements=d;y.offset=g;y.count=q;y.primitive=p;u.buffer=r;u.divisor=w;u.normalized=t;u.offset=A;u.size=z;u.state=B;u.stride=D;u.type=E;u.w=S;u.x=G;u.y=ga;u.z=C;L.buffer=F;L.divisor=N;L.normalized=M;L.offset=P;L.size=R;L.state=T;L.stride=U;L.type=O;L.w=ra;L.x=ya;L.y=oa;L.z=ha;x.vert=W;x.frag=X},batch:function(f,d){var g,m,k;g=da.next;g!==da.cur&&(g?D.bindFramebuffer(36160,g.framebuffer):D.bindFramebuffer(36160,null),da.cur=g);if(h.dirty){var x,u;g=b.dither;
g!==h.dither&&(g?D.enable(3024):D.disable(3024),h.dither=g);g=b.blend_enable;g!==h.blend_enable&&(g?D.enable(3042):D.disable(3042),h.blend_enable=g);g=z[0];k=z[1];x=z[2];u=z[3];if(g!==ja[0]||k!==ja[1]||x!==ja[2]||u!==ja[3])D.blendColor(g,k,x,u),ja[0]=g,ja[1]=k,ja[2]=x,ja[3]=u;g=ba[0];k=ba[1];if(g!==X[0]||k!==X[1])D.blendEquationSeparate(g,k),X[0]=g,X[1]=k;g=fa[0];k=fa[1];x=fa[2];u=fa[3];if(g!==R[0]||k!==R[1]||x!==R[2]||u!==R[3])D.blendFuncSeparate(g,k,x,u),R[0]=g,R[1]=k,R[2]=x,R[3]=u;g=b.depth_enable;
g!==h.depth_enable&&(g?D.enable(2929):D.disable(2929),h.depth_enable=g);g=b.depth_func;g!==h.depth_func&&(D.depthFunc(g),h.depth_func=g);g=q[0];k=q[1];if(g!==M[0]||k!==M[1])D.depthRange(g,k),M[0]=g,M[1]=k;g=b.depth_mask;g!==h.depth_mask&&(D.depthMask(g),h.depth_mask=g);g=T[0];k=T[1];x=T[2];u=T[3];if(g!==A[0]||k!==A[1]||x!==A[2]||u!==A[3])D.colorMask(g,k,x,u),A[0]=g,A[1]=k,A[2]=x,A[3]=u;g=b.cull_enable;g!==h.cull_enable&&(g?D.enable(2884):D.disable(2884),h.cull_enable=g);g=b.cull_face;g!==h.cull_face&&
(D.cullFace(g),h.cull_face=g);g=b.frontFace;g!==h.frontFace&&(D.frontFace(g),h.frontFace=g);g=b.lineWidth;g!==h.lineWidth&&(D.lineWidth(g),h.lineWidth=g);g=b.polygonOffset_enable;g!==h.polygonOffset_enable&&(g?D.enable(32823):D.disable(32823),h.polygonOffset_enable=g);g=P[0];k=P[1];if(g!==wa[0]||k!==wa[1])D.polygonOffset(g,k),wa[0]=g,wa[1]=k;g=b.sample_alpha;g!==h.sample_alpha&&(g?D.enable(32926):D.disable(32926),h.sample_alpha=g);g=b.sample_enable;g!==h.sample_enable&&(g?D.enable(32928):D.disable(32928),
h.sample_enable=g);g=qa[0];k=qa[1];if(g!==r[0]||k!==r[1])D.sampleCoverage(g,k),r[0]=g,r[1]=k;g=b.stencil_enable;g!==h.stencil_enable&&(g?D.enable(2960):D.disable(2960),h.stencil_enable=g);g=b.stencil_mask;g!==h.stencil_mask&&(D.stencilMask(g),h.stencil_mask=g);g=S[0];k=S[1];x=S[2];if(g!==ma[0]||k!==ma[1]||x!==ma[2])D.stencilFunc(g,k,x),ma[0]=g,ma[1]=k,ma[2]=x;g=ya[0];k=ya[1];x=ya[2];u=ya[3];if(g!==ga[0]||k!==ga[1]||x!==ga[2]||u!==ga[3])D.stencilOpSeparate(g,k,x,u),ga[0]=g,ga[1]=k,ga[2]=x,ga[3]=u;
g=ra[0];k=ra[1];x=ra[2];u=ra[3];if(g!==za[0]||k!==za[1]||x!==za[2]||u!==za[3])D.stencilOpSeparate(g,k,x,u),za[0]=g,za[1]=k,za[2]=x,za[3]=u;g=b.scissor_enable;g!==h.scissor_enable&&(g?D.enable(3089):D.disable(3089),h.scissor_enable=g);g=G[0];k=G[1];x=G[2];u=G[3];if(g!==ca[0]||k!==ca[1]||x!==ca[2]||u!==ca[3])D.scissor(g,k,x,u),ca[0]=g,ca[1]=k,ca[2]=x,ca[3]=u;g=Ca[0];k=Ca[1];x=Ca[2];u=Ca[3];if(g!==ka[0]||k!==ka[1]||x!==ka[2]||u!==ka[3])D.viewport(g,k,x,u),ka[0]=g,ka[1]=k,ka[2]=x,ka[3]=u;h.dirty=!1}if(g=
h.profile)m=performance.now(),J.count+=d;D.useProgram(W.program);aa.setVAO(null);k=c.location;x=p[k];x.buffer||D.enableVertexAttribArray(k);if(x.type!==l.dtype||3!==x.size||x.buffer!==l||!1!==x.normalized||0!==x.offset||0!==x.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(k,3,l.dtype,!1,0,0),x.type=l.dtype,x.size=3,x.buffer=l,x.normalized=!1,x.offset=0,x.stride=0;k=ha.location;x=p[k];x.buffer||D.enableVertexAttribArray(k);if(x.type!==n.dtype||3!==x.size||x.buffer!==n||!1!==x.normalized||
0!==x.offset||0!==x.stride)D.bindBuffer(34962,n.buffer),D.vertexAttribPointer(k,3,n.dtype,!1,0,0),x.type=n.dtype,x.size=3,x.buffer=n,x.normalized=!1,x.offset=0,x.stride=0;k=a[5];E(k)&&16===k.length||V.commandRaise(t,H);D.uniformMatrix4fv(e.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(La[0]=k[0],La[1]=k[1],La[2]=k[2],La[3]=k[3],La[4]=k[4],La[5]=k[5],La[6]=k[6],La[7]=k[7],La[8]=k[8],La[9]=k[9],La[10]=k[10],La[11]=k[11],La[12]=k[12],La[13]=k[13],La[14]=k[14],La[15]=k[15],La));k=a[8];E(k)&&
16===k.length||V.commandRaise(N,H);D.uniformMatrix4fv(U.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(oa[0]=k[0],oa[1]=k[1],oa[2]=k[2],oa[3]=k[3],oa[4]=k[4],oa[5]=k[5],oa[6]=k[6],oa[7]=k[7],oa[8]=k[8],oa[9]=k[9],oa[10]=k[10],oa[11]=k[11],oa[12]=k[12],oa[13]=k[13],oa[14]=k[14],oa[15]=k[15],oa));w&&D.bindBuffer(34963,w.buffer.buffer);x=w.primType;u=w.vertCount-0;0<=u||V.commandRaise(B,H);for(k=0;k<d;++k)u&&D.drawElements(x,u,w.type,0<<(w.type-5121>>1));aa.setVAO(null);g&&(J.cpuTime+=performance.now()-
m)}}},"$14,angle,color,position":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N){var w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,aa,z,ja,ba,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra;w=d.attributes;B=d.context;ha=d.current;c=d.draw;e=d.elements;U=d.framebuffer;p=d.gl;Z=d.isArrayLike;h=d.next;y=d.shader;da=d.uniforms;D=d.vao;E=h.blend_color;b=ha.blend_color;x=h.blend_equation;a=ha.blend_equation;aa=h.blend_func;z=ha.blend_func;ja=h.colorMask;ba=ha.colorMask;X=h.depth_range;fa=ha.depth_range;R=h.polygonOffset_offset;
T=ha.polygonOffset_offset;A=h.sample_coverage;q=ha.sample_coverage;M=h.scissor_box;P=ha.scissor_box;wa=h.stencil_func;qa=ha.stencil_func;r=h.stencil_opBack;G=ha.stencil_opBack;ca=h.stencil_opFront;S=ha.stencil_opFront;ma=h.viewport;ra=ha.viewport;return{draw:function(d){var k,u,y,C;k=U.next;k!==U.cur&&(k?p.bindFramebuffer(36160,k.framebuffer):p.bindFramebuffer(36160,null),U.cur=k);if(ha.dirty){var I;k=h.dither;k!==ha.dither&&(k?p.enable(3024):p.disable(3024),ha.dither=k);k=h.blend_enable;k!==ha.blend_enable&&
(k?p.enable(3042):p.disable(3042),ha.blend_enable=k);k=E[0];y=E[1];C=E[2];I=E[3];if(k!==b[0]||y!==b[1]||C!==b[2]||I!==b[3])p.blendColor(k,y,C,I),b[0]=k,b[1]=y,b[2]=C,b[3]=I;k=x[0];y=x[1];if(k!==a[0]||y!==a[1])p.blendEquationSeparate(k,y),a[0]=k,a[1]=y;k=aa[0];y=aa[1];C=aa[2];I=aa[3];if(k!==z[0]||y!==z[1]||C!==z[2]||I!==z[3])p.blendFuncSeparate(k,y,C,I),z[0]=k,z[1]=y,z[2]=C,z[3]=I;k=h.depth_func;k!==ha.depth_func&&(p.depthFunc(k),ha.depth_func=k);k=X[0];y=X[1];if(k!==fa[0]||y!==fa[1])p.depthRange(k,
y),fa[0]=k,fa[1]=y;k=h.depth_mask;k!==ha.depth_mask&&(p.depthMask(k),ha.depth_mask=k);k=ja[0];y=ja[1];C=ja[2];I=ja[3];if(k!==ba[0]||y!==ba[1]||C!==ba[2]||I!==ba[3])p.colorMask(k,y,C,I),ba[0]=k,ba[1]=y,ba[2]=C,ba[3]=I;k=h.cull_enable;k!==ha.cull_enable&&(k?p.enable(2884):p.disable(2884),ha.cull_enable=k);k=h.cull_face;k!==ha.cull_face&&(p.cullFace(k),ha.cull_face=k);k=h.frontFace;k!==ha.frontFace&&(p.frontFace(k),ha.frontFace=k);k=h.lineWidth;k!==ha.lineWidth&&(p.lineWidth(k),ha.lineWidth=k);k=h.polygonOffset_enable;
k!==ha.polygonOffset_enable&&(k?p.enable(32823):p.disable(32823),ha.polygonOffset_enable=k);k=R[0];y=R[1];if(k!==T[0]||y!==T[1])p.polygonOffset(k,y),T[0]=k,T[1]=y;k=h.sample_alpha;k!==ha.sample_alpha&&(k?p.enable(32926):p.disable(32926),ha.sample_alpha=k);k=h.sample_enable;k!==ha.sample_enable&&(k?p.enable(32928):p.disable(32928),ha.sample_enable=k);k=A[0];y=A[1];if(k!==q[0]||y!==q[1])p.sampleCoverage(k,y),q[0]=k,q[1]=y;k=h.stencil_enable;k!==ha.stencil_enable&&(k?p.enable(2960):p.disable(2960),ha.stencil_enable=
k);k=h.stencil_mask;k!==ha.stencil_mask&&(p.stencilMask(k),ha.stencil_mask=k);k=wa[0];y=wa[1];C=wa[2];if(k!==qa[0]||y!==qa[1]||C!==qa[2])p.stencilFunc(k,y,C),qa[0]=k,qa[1]=y,qa[2]=C;k=ca[0];y=ca[1];C=ca[2];I=ca[3];if(k!==S[0]||y!==S[1]||C!==S[2]||I!==S[3])p.stencilOpSeparate(k,y,C,I),S[0]=k,S[1]=y,S[2]=C,S[3]=I;k=r[0];y=r[1];C=r[2];I=r[3];if(k!==G[0]||y!==G[1]||C!==G[2]||I!==G[3])p.stencilOpSeparate(k,y,C,I),G[0]=k,G[1]=y,G[2]=C,G[3]=I;k=h.scissor_enable;k!==ha.scissor_enable&&(k?p.enable(3089):p.disable(3089),
ha.scissor_enable=k);k=M[0];y=M[1];C=M[2];I=M[3];if(k!==P[0]||y!==P[1]||C!==P[2]||I!==P[3])p.scissor(k,y,C,I),P[0]=k,P[1]=y,P[2]=C,P[3]=I;k=ma[0];y=ma[1];C=ma[2];I=ma[3];if(k!==ra[0]||y!==ra[1]||C!==ra[2]||I!==ra[3])p.viewport(k,y,C,I),ra[0]=k,ra[1]=y,ra[2]=C,ra[3]=I}p.disable(2929);ha.depth_enable=!1;if(k=ha.profile)u=performance.now(),J.count++;p.useProgram(g.program);D.setVAO(null);y=N.location;C=w[y];C.buffer||p.enableVertexAttribArray(y);if(C.type!==l.dtype||2!==C.size||C.buffer!==l||!1!==C.normalized||
0!==C.offset||0!==C.stride)p.bindBuffer(34962,l.buffer),p.vertexAttribPointer(y,2,l.dtype,!1,0,0),C.type=l.dtype,C.size=2,C.buffer=l,C.normalized=!1,C.offset=0,C.stride=0;y=n.call(this,B,d,0);"number"!==typeof y&&V.commandRaise(f,H);p.uniform1f(W.location,y);d=d.color;Z(d)&&4===d.length||V.commandRaise(F,H);p.uniform4f(t.location,d[0],d[1],d[2],d[3]);(d=c.elements)?p.bindBuffer(34963,d.buffer.buffer):D.currentVAO&&(d=e.getElements(D.currentVAO.elements))&&p.bindBuffer(34963,d.buffer.buffer);y=c.primitive;
C=c.offset;d?p.drawElements(y,3,d.type,C<<(d.type-5121>>1)):p.drawArrays(y,C,3);ha.dirty=!0;D.setVAO(null);k&&(J.cpuTime+=performance.now()-u)},scope:function(a,b,e){var f,d,g,p,q,r,n,k,v,m,w,t,x,u,A,z,D,E,S,G;f=h.depth_enable;h.depth_enable=!1;if(d=ha.profile)g=performance.now(),J.count++;p=c.count;c.count=3;q=C.call(this,B,a,e);r=da[3];da[3]=q;n=a.color;q=da[4];da[4]=n;n=O.buffer;O.buffer=l;k=O.divisor;O.divisor=0;v=O.normalized;O.normalized=!1;m=O.offset;O.offset=0;w=O.size;O.size=0;t=O.state;
O.state=1;x=O.stride;O.stride=0;u=O.type;O.type=l.dtype;A=O.w;O.w=0;z=O.x;O.x=0;D=O.y;O.y=0;E=O.z;O.z=0;S=y.vert;y.vert=2;G=y.frag;y.frag=1;ha.dirty=!0;b(B,a,e);h.depth_enable=f;d&&(J.cpuTime+=performance.now()-g);c.count=p;da[3]=r;da[4]=q;O.buffer=n;O.divisor=k;O.normalized=v;O.offset=m;O.size=w;O.state=t;O.stride=x;O.type=u;O.w=A;O.x=z;O.y=D;O.z=E;y.vert=S;y.frag=G;ha.dirty=!0},batch:function(f,d){var g,n,y,C;g=U.next;g!==U.cur&&(g?p.bindFramebuffer(36160,g.framebuffer):p.bindFramebuffer(36160,
null),U.cur=g);if(ha.dirty){var F,O,oa;g=h.dither;g!==ha.dither&&(g?p.enable(3024):p.disable(3024),ha.dither=g);g=h.blend_enable;g!==ha.blend_enable&&(g?p.enable(3042):p.disable(3042),ha.blend_enable=g);g=E[0];F=E[1];O=E[2];oa=E[3];if(g!==b[0]||F!==b[1]||O!==b[2]||oa!==b[3])p.blendColor(g,F,O,oa),b[0]=g,b[1]=F,b[2]=O,b[3]=oa;g=x[0];F=x[1];if(g!==a[0]||F!==a[1])p.blendEquationSeparate(g,F),a[0]=g,a[1]=F;g=aa[0];F=aa[1];O=aa[2];oa=aa[3];if(g!==z[0]||F!==z[1]||O!==z[2]||oa!==z[3])p.blendFuncSeparate(g,
F,O,oa),z[0]=g,z[1]=F,z[2]=O,z[3]=oa;g=h.depth_func;g!==ha.depth_func&&(p.depthFunc(g),ha.depth_func=g);g=X[0];F=X[1];if(g!==fa[0]||F!==fa[1])p.depthRange(g,F),fa[0]=g,fa[1]=F;g=h.depth_mask;g!==ha.depth_mask&&(p.depthMask(g),ha.depth_mask=g);g=ja[0];F=ja[1];O=ja[2];oa=ja[3];if(g!==ba[0]||F!==ba[1]||O!==ba[2]||oa!==ba[3])p.colorMask(g,F,O,oa),ba[0]=g,ba[1]=F,ba[2]=O,ba[3]=oa;g=h.cull_enable;g!==ha.cull_enable&&(g?p.enable(2884):p.disable(2884),ha.cull_enable=g);g=h.cull_face;g!==ha.cull_face&&(p.cullFace(g),
ha.cull_face=g);g=h.frontFace;g!==ha.frontFace&&(p.frontFace(g),ha.frontFace=g);g=h.lineWidth;g!==ha.lineWidth&&(p.lineWidth(g),ha.lineWidth=g);g=h.polygonOffset_enable;g!==ha.polygonOffset_enable&&(g?p.enable(32823):p.disable(32823),ha.polygonOffset_enable=g);g=R[0];F=R[1];if(g!==T[0]||F!==T[1])p.polygonOffset(g,F),T[0]=g,T[1]=F;g=h.sample_alpha;g!==ha.sample_alpha&&(g?p.enable(32926):p.disable(32926),ha.sample_alpha=g);g=h.sample_enable;g!==ha.sample_enable&&(g?p.enable(32928):p.disable(32928),
ha.sample_enable=g);g=A[0];F=A[1];if(g!==q[0]||F!==q[1])p.sampleCoverage(g,F),q[0]=g,q[1]=F;g=h.stencil_enable;g!==ha.stencil_enable&&(g?p.enable(2960):p.disable(2960),ha.stencil_enable=g);g=h.stencil_mask;g!==ha.stencil_mask&&(p.stencilMask(g),ha.stencil_mask=g);g=wa[0];F=wa[1];O=wa[2];if(g!==qa[0]||F!==qa[1]||O!==qa[2])p.stencilFunc(g,F,O),qa[0]=g,qa[1]=F,qa[2]=O;g=ca[0];F=ca[1];O=ca[2];oa=ca[3];if(g!==S[0]||F!==S[1]||O!==S[2]||oa!==S[3])p.stencilOpSeparate(g,F,O,oa),S[0]=g,S[1]=F,S[2]=O,S[3]=oa;
g=r[0];F=r[1];O=r[2];oa=r[3];if(g!==G[0]||F!==G[1]||O!==G[2]||oa!==G[3])p.stencilOpSeparate(g,F,O,oa),G[0]=g,G[1]=F,G[2]=O,G[3]=oa;g=h.scissor_enable;g!==ha.scissor_enable&&(g?p.enable(3089):p.disable(3089),ha.scissor_enable=g);g=M[0];F=M[1];O=M[2];oa=M[3];if(g!==P[0]||F!==P[1]||O!==P[2]||oa!==P[3])p.scissor(g,F,O,oa),P[0]=g,P[1]=F,P[2]=O,P[3]=oa;g=ma[0];F=ma[1];O=ma[2];oa=ma[3];if(g!==ra[0]||F!==ra[1]||O!==ra[2]||oa!==ra[3])p.viewport(g,F,O,oa),ra[0]=g,ra[1]=F,ra[2]=O,ra[3]=oa}p.disable(2929);ha.depth_enable=
!1;if(g=ha.profile)n=performance.now(),J.count+=d;p.useProgram(I.program);D.setVAO(null);F=N.location;O=w[F];O.buffer||p.enableVertexAttribArray(F);if(O.type!==l.dtype||2!==O.size||O.buffer!==l||!1!==O.normalized||0!==O.offset||0!==O.stride)p.bindBuffer(34962,l.buffer),p.vertexAttribPointer(F,2,l.dtype,!1,0,0),O.type=l.dtype,O.size=2,O.buffer=l,O.normalized=!1,O.offset=0,O.stride=0;y=k.call(this,B,C,y);"number"!==typeof y&&V.commandRaise(u,H);p.uniform1f(W.location,y);(F=c.elements)?p.bindBuffer(34963,
F.buffer.buffer):D.currentVAO&&(F=e.getElements(D.currentVAO.elements))&&p.bindBuffer(34963,F.buffer.buffer);O=c.primitive;oa=c.offset;for(y=0;y<d;++y){C=f[y];var da,Ta,v,m,K,ua,Ba;da=C.color;Z(da)&&4===da.length||V.commandRaise(L,H);C=da[0];v=da[1];K=da[2];da=da[3];y&&Ta===C&&m===v&&ua===K&&Ba===da||(Ta=C,m=v,ua=K,Ba=da,p.uniform4f(t.location,C,v,K,da));F?p.drawElements(O,3,F.type,oa<<(F.type-5121>>1)):p.drawArrays(O,oa,3)}ha.dirty=!0;D.setVAO(null);g&&(J.cpuTime+=performance.now()-n)}}},"$13,color,position":function(d,
V,H,J,g,l,n,f,F,C,O,I,k,u,L,W){var t,N,w,B,ha,c,e,U,p,Z,h,y,da,D,E,b,x,a,aa,z,ja,ba,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca;t=d.attributes;N=d.context;w=d.current;B=d.draw;ha=d.framebuffer;c=d.gl;e=d.next;U=d.shader;p=d.uniforms;Z=d.vao;h=e.blend_color;y=w.blend_color;da=e.blend_equation;D=w.blend_equation;E=e.blend_func;b=w.blend_func;x=e.colorMask;a=w.colorMask;aa=e.depth_range;z=w.depth_range;ja=e.polygonOffset_offset;ba=w.polygonOffset_offset;X=e.sample_coverage;fa=w.sample_coverage;R=e.scissor_box;T=w.scissor_box;
A=e.stencil_func;q=w.stencil_func;M=e.stencil_opBack;P=w.stencil_opBack;wa=e.stencil_opFront;qa=w.stencil_opFront;r=e.viewport;G=w.viewport;ca=[1,0,0,1];return{draw:function(d){var p,k,u;d=ha.next;d!==ha.cur&&(d?c.bindFramebuffer(36160,d.framebuffer):c.bindFramebuffer(36160,null),ha.cur=d);if(w.dirty){var B;d=e.dither;d!==w.dither&&(d?c.enable(3024):c.disable(3024),w.dither=d);d=e.blend_enable;d!==w.blend_enable&&(d?c.enable(3042):c.disable(3042),w.blend_enable=d);d=h[0];k=h[1];u=h[2];B=h[3];if(d!==
y[0]||k!==y[1]||u!==y[2]||B!==y[3])c.blendColor(d,k,u,B),y[0]=d,y[1]=k,y[2]=u,y[3]=B;d=da[0];k=da[1];if(d!==D[0]||k!==D[1])c.blendEquationSeparate(d,k),D[0]=d,D[1]=k;d=E[0];k=E[1];u=E[2];B=E[3];if(d!==b[0]||k!==b[1]||u!==b[2]||B!==b[3])c.blendFuncSeparate(d,k,u,B),b[0]=d,b[1]=k,b[2]=u,b[3]=B;d=e.depth_enable;d!==w.depth_enable&&(d?c.enable(2929):c.disable(2929),w.depth_enable=d);d=e.depth_func;d!==w.depth_func&&(c.depthFunc(d),w.depth_func=d);d=aa[0];k=aa[1];if(d!==z[0]||k!==z[1])c.depthRange(d,k),
z[0]=d,z[1]=k;d=e.depth_mask;d!==w.depth_mask&&(c.depthMask(d),w.depth_mask=d);d=x[0];k=x[1];u=x[2];B=x[3];if(d!==a[0]||k!==a[1]||u!==a[2]||B!==a[3])c.colorMask(d,k,u,B),a[0]=d,a[1]=k,a[2]=u,a[3]=B;d=e.cull_enable;d!==w.cull_enable&&(d?c.enable(2884):c.disable(2884),w.cull_enable=d);d=e.cull_face;d!==w.cull_face&&(c.cullFace(d),w.cull_face=d);d=e.frontFace;d!==w.frontFace&&(c.frontFace(d),w.frontFace=d);d=e.polygonOffset_enable;d!==w.polygonOffset_enable&&(d?c.enable(32823):c.disable(32823),w.polygonOffset_enable=
d);d=ja[0];k=ja[1];if(d!==ba[0]||k!==ba[1])c.polygonOffset(d,k),ba[0]=d,ba[1]=k;d=e.sample_alpha;d!==w.sample_alpha&&(d?c.enable(32926):c.disable(32926),w.sample_alpha=d);d=e.sample_enable;d!==w.sample_enable&&(d?c.enable(32928):c.disable(32928),w.sample_enable=d);d=X[0];k=X[1];if(d!==fa[0]||k!==fa[1])c.sampleCoverage(d,k),fa[0]=d,fa[1]=k;d=e.stencil_enable;d!==w.stencil_enable&&(d?c.enable(2960):c.disable(2960),w.stencil_enable=d);d=e.stencil_mask;d!==w.stencil_mask&&(c.stencilMask(d),w.stencil_mask=
d);d=A[0];k=A[1];u=A[2];if(d!==q[0]||k!==q[1]||u!==q[2])c.stencilFunc(d,k,u),q[0]=d,q[1]=k,q[2]=u;d=wa[0];k=wa[1];u=wa[2];B=wa[3];if(d!==qa[0]||k!==qa[1]||u!==qa[2]||B!==qa[3])c.stencilOpSeparate(d,k,u,B),qa[0]=d,qa[1]=k,qa[2]=u,qa[3]=B;d=M[0];k=M[1];u=M[2];B=M[3];if(d!==P[0]||k!==P[1]||u!==P[2]||B!==P[3])c.stencilOpSeparate(d,k,u,B),P[0]=d,P[1]=k,P[2]=u,P[3]=B;d=e.scissor_enable;d!==w.scissor_enable&&(d?c.enable(3089):c.disable(3089),w.scissor_enable=d);d=R[0];k=R[1];u=R[2];B=R[3];if(d!==T[0]||k!==
T[1]||u!==T[2]||B!==T[3])c.scissor(d,k,u,B),T[0]=d,T[1]=k,T[2]=u,T[3]=B;d=r[0];k=r[1];u=r[2];B=r[3];if(d!==G[0]||k!==G[1]||u!==G[2]||B!==G[3])c.viewport(d,k,u,B),G[0]=d,G[1]=k,G[2]=u,G[3]=B}c.lineWidth(1);w.lineWidth=1;if(d=w.profile)p=performance.now(),J.count++;c.useProgram(g.program);Z.setVAO(null);k=W.location;u=t[k];u.buffer||c.enableVertexAttribArray(k);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)c.bindBuffer(34962,l.buffer),c.vertexAttribPointer(k,
2,l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;c.uniform4f(L.location,1,0,0,1);n&&c.bindBuffer(34963,n.buffer.buffer);k=n.primType;u=n.vertCount-0;0<=u||V.commandRaise(f,H);u&&(c.drawElements(k,u,n.type,0<<(n.type-5121>>1)),w.dirty=!0,Z.setVAO(null),d&&(J.cpuTime+=performance.now()-p))},scope:function(a,b,c){var f,d,g,h,q,r,n,k,t,u,x,v,m,y,A,z,D,E,G,I,L,M;f=e.lineWidth;e.lineWidth=1;if(d=w.profile)g=performance.now(),J.count++;h=B.elements;B.elements=F;
q=B.offset;B.offset=0;r=F.vertCount-0;0<=r||V.commandRaise(C,H);n=B.count;B.count=r;k=F.primType;r=B.primitive;B.primitive=k;k=p[3];p[3]=ca;t=O.buffer;O.buffer=l;u=O.divisor;O.divisor=0;x=O.normalized;O.normalized=!1;v=O.offset;O.offset=0;m=O.size;O.size=0;y=O.state;O.state=1;A=O.stride;O.stride=0;z=O.type;O.type=l.dtype;D=O.w;O.w=0;E=O.x;O.x=0;G=O.y;O.y=0;I=O.z;O.z=0;L=U.vert;U.vert=2;M=U.frag;U.frag=1;w.dirty=!0;b(N,a,c);e.lineWidth=f;d&&(J.cpuTime+=performance.now()-g);B.elements=h;B.offset=q;
B.count=n;B.primitive=r;p[3]=k;O.buffer=t;O.divisor=u;O.normalized=x;O.offset=v;O.size=m;O.state=y;O.stride=A;O.type=z;O.w=D;O.x=E;O.y=G;O.z=I;U.vert=L;U.frag=M;w.dirty=!0},batch:function(f,d){var g,p,n;g=ha.next;g!==ha.cur&&(g?c.bindFramebuffer(36160,g.framebuffer):c.bindFramebuffer(36160,null),ha.cur=g);if(w.dirty){var B,C;g=e.dither;g!==w.dither&&(g?c.enable(3024):c.disable(3024),w.dither=g);g=e.blend_enable;g!==w.blend_enable&&(g?c.enable(3042):c.disable(3042),w.blend_enable=g);g=h[0];n=h[1];
B=h[2];C=h[3];if(g!==y[0]||n!==y[1]||B!==y[2]||C!==y[3])c.blendColor(g,n,B,C),y[0]=g,y[1]=n,y[2]=B,y[3]=C;g=da[0];n=da[1];if(g!==D[0]||n!==D[1])c.blendEquationSeparate(g,n),D[0]=g,D[1]=n;g=E[0];n=E[1];B=E[2];C=E[3];if(g!==b[0]||n!==b[1]||B!==b[2]||C!==b[3])c.blendFuncSeparate(g,n,B,C),b[0]=g,b[1]=n,b[2]=B,b[3]=C;g=e.depth_enable;g!==w.depth_enable&&(g?c.enable(2929):c.disable(2929),w.depth_enable=g);g=e.depth_func;g!==w.depth_func&&(c.depthFunc(g),w.depth_func=g);g=aa[0];n=aa[1];if(g!==z[0]||n!==
z[1])c.depthRange(g,n),z[0]=g,z[1]=n;g=e.depth_mask;g!==w.depth_mask&&(c.depthMask(g),w.depth_mask=g);g=x[0];n=x[1];B=x[2];C=x[3];if(g!==a[0]||n!==a[1]||B!==a[2]||C!==a[3])c.colorMask(g,n,B,C),a[0]=g,a[1]=n,a[2]=B,a[3]=C;g=e.cull_enable;g!==w.cull_enable&&(g?c.enable(2884):c.disable(2884),w.cull_enable=g);g=e.cull_face;g!==w.cull_face&&(c.cullFace(g),w.cull_face=g);g=e.frontFace;g!==w.frontFace&&(c.frontFace(g),w.frontFace=g);g=e.polygonOffset_enable;g!==w.polygonOffset_enable&&(g?c.enable(32823):
c.disable(32823),w.polygonOffset_enable=g);g=ja[0];n=ja[1];if(g!==ba[0]||n!==ba[1])c.polygonOffset(g,n),ba[0]=g,ba[1]=n;g=e.sample_alpha;g!==w.sample_alpha&&(g?c.enable(32926):c.disable(32926),w.sample_alpha=g);g=e.sample_enable;g!==w.sample_enable&&(g?c.enable(32928):c.disable(32928),w.sample_enable=g);g=X[0];n=X[1];if(g!==fa[0]||n!==fa[1])c.sampleCoverage(g,n),fa[0]=g,fa[1]=n;g=e.stencil_enable;g!==w.stencil_enable&&(g?c.enable(2960):c.disable(2960),w.stencil_enable=g);g=e.stencil_mask;g!==w.stencil_mask&&
(c.stencilMask(g),w.stencil_mask=g);g=A[0];n=A[1];B=A[2];if(g!==q[0]||n!==q[1]||B!==q[2])c.stencilFunc(g,n,B),q[0]=g,q[1]=n,q[2]=B;g=wa[0];n=wa[1];B=wa[2];C=wa[3];if(g!==qa[0]||n!==qa[1]||B!==qa[2]||C!==qa[3])c.stencilOpSeparate(g,n,B,C),qa[0]=g,qa[1]=n,qa[2]=B,qa[3]=C;g=M[0];n=M[1];B=M[2];C=M[3];if(g!==P[0]||n!==P[1]||B!==P[2]||C!==P[3])c.stencilOpSeparate(g,n,B,C),P[0]=g,P[1]=n,P[2]=B,P[3]=C;g=e.scissor_enable;g!==w.scissor_enable&&(g?c.enable(3089):c.disable(3089),w.scissor_enable=g);g=R[0];n=
R[1];B=R[2];C=R[3];if(g!==T[0]||n!==T[1]||B!==T[2]||C!==T[3])c.scissor(g,n,B,C),T[0]=g,T[1]=n,T[2]=B,T[3]=C;g=r[0];n=r[1];B=r[2];C=r[3];if(g!==G[0]||n!==G[1]||B!==G[2]||C!==G[3])c.viewport(g,n,B,C),G[0]=g,G[1]=n,G[2]=B,G[3]=C}c.lineWidth(1);w.lineWidth=1;if(g=w.profile)p=performance.now(),J.count+=d;c.useProgram(I.program);Z.setVAO(null);n=W.location;B=t[n];B.buffer||c.enableVertexAttribArray(n);if(B.type!==l.dtype||2!==B.size||B.buffer!==l||!1!==B.normalized||0!==B.offset||0!==B.stride)c.bindBuffer(34962,
l.buffer),c.vertexAttribPointer(n,2,l.dtype,!1,0,0),B.type=l.dtype,B.size=2,B.buffer=l,B.normalized=!1,B.offset=0,B.stride=0;c.uniform4f(L.location,1,0,0,1);k&&c.bindBuffer(34963,k.buffer.buffer);B=k.primType;C=k.vertCount-0;0<=C||V.commandRaise(u,H);for(n=0;n<d;++n)C&&c.drawElements(B,C,k.type,0<<(k.type-5121>>1));w.dirty=!0;Z.setVAO(null);g&&(J.cpuTime+=performance.now()-p)}}},"$20,mouse,position,t,texture":function(d,V,H,J,g,l,n,f,F,C,O,I,k,u,L,W,t,N,w,B,ha,c,e,U,p){var Z,h,y,da,D,E,b,x,a,aa,z,
ja,ba,X,fa,R,T,A,q,M,P,wa,qa,r,G,ca,S,ma,ra,za,ya,ga,Ca,ka,pa,xa;Z=d.attributes;h=d.context;y=d.current;da=d.draw;D=d.elements;E=d.framebuffer;b=d.gl;x=d.isArrayLike;a=d.next;aa=d.shader;z=d.uniforms;ja=d.vao;ba=a.blend_color;X=y.blend_color;fa=a.blend_equation;R=y.blend_equation;T=a.blend_func;A=y.blend_func;q=a.colorMask;M=y.colorMask;P=a.depth_range;wa=y.depth_range;qa=a.polygonOffset_offset;r=y.polygonOffset_offset;G=a.sample_coverage;ca=y.sample_coverage;S=a.scissor_box;ma=y.scissor_box;ra=a.stencil_func;
za=y.stencil_func;ya=a.stencil_opBack;ga=y.stencil_opBack;Ca=a.stencil_opFront;ka=y.stencil_opFront;pa=a.viewport;xa=y.viewport;return{draw:function(d){var k,w,t,v;k=E.next;k!==E.cur&&(k?b.bindFramebuffer(36160,k.framebuffer):b.bindFramebuffer(36160,null),E.cur=k);if(y.dirty){var m;k=a.dither;k!==y.dither&&(k?b.enable(3024):b.disable(3024),y.dither=k);k=a.blend_enable;k!==y.blend_enable&&(k?b.enable(3042):b.disable(3042),y.blend_enable=k);k=ba[0];t=ba[1];v=ba[2];m=ba[3];if(k!==X[0]||t!==X[1]||v!==
X[2]||m!==X[3])b.blendColor(k,t,v,m),X[0]=k,X[1]=t,X[2]=v,X[3]=m;k=fa[0];t=fa[1];if(k!==R[0]||t!==R[1])b.blendEquationSeparate(k,t),R[0]=k,R[1]=t;k=T[0];t=T[1];v=T[2];m=T[3];if(k!==A[0]||t!==A[1]||v!==A[2]||m!==A[3])b.blendFuncSeparate(k,t,v,m),A[0]=k,A[1]=t,A[2]=v,A[3]=m;k=a.depth_enable;k!==y.depth_enable&&(k?b.enable(2929):b.disable(2929),y.depth_enable=k);k=a.depth_func;k!==y.depth_func&&(b.depthFunc(k),y.depth_func=k);k=P[0];t=P[1];if(k!==wa[0]||t!==wa[1])b.depthRange(k,t),wa[0]=k,wa[1]=t;k=
a.depth_mask;k!==y.depth_mask&&(b.depthMask(k),y.depth_mask=k);k=q[0];t=q[1];v=q[2];m=q[3];if(k!==M[0]||t!==M[1]||v!==M[2]||m!==M[3])b.colorMask(k,t,v,m),M[0]=k,M[1]=t,M[2]=v,M[3]=m;k=a.cull_enable;k!==y.cull_enable&&(k?b.enable(2884):b.disable(2884),y.cull_enable=k);k=a.cull_face;k!==y.cull_face&&(b.cullFace(k),y.cull_face=k);k=a.frontFace;k!==y.frontFace&&(b.frontFace(k),y.frontFace=k);k=a.lineWidth;k!==y.lineWidth&&(b.lineWidth(k),y.lineWidth=k);k=a.polygonOffset_enable;k!==y.polygonOffset_enable&&
(k?b.enable(32823):b.disable(32823),y.polygonOffset_enable=k);k=qa[0];t=qa[1];if(k!==r[0]||t!==r[1])b.polygonOffset(k,t),r[0]=k,r[1]=t;k=a.sample_alpha;k!==y.sample_alpha&&(k?b.enable(32926):b.disable(32926),y.sample_alpha=k);k=a.sample_enable;k!==y.sample_enable&&(k?b.enable(32928):b.disable(32928),y.sample_enable=k);k=G[0];t=G[1];if(k!==ca[0]||t!==ca[1])b.sampleCoverage(k,t),ca[0]=k,ca[1]=t;k=a.stencil_enable;k!==y.stencil_enable&&(k?b.enable(2960):b.disable(2960),y.stencil_enable=k);k=a.stencil_mask;
k!==y.stencil_mask&&(b.stencilMask(k),y.stencil_mask=k);k=ra[0];t=ra[1];v=ra[2];if(k!==za[0]||t!==za[1]||v!==za[2])b.stencilFunc(k,t,v),za[0]=k,za[1]=t,za[2]=v;k=Ca[0];t=Ca[1];v=Ca[2];m=Ca[3];if(k!==ka[0]||t!==ka[1]||v!==ka[2]||m!==ka[3])b.stencilOpSeparate(k,t,v,m),ka[0]=k,ka[1]=t,ka[2]=v,ka[3]=m;k=ya[0];t=ya[1];v=ya[2];m=ya[3];if(k!==ga[0]||t!==ga[1]||v!==ga[2]||m!==ga[3])b.stencilOpSeparate(k,t,v,m),ga[0]=k,ga[1]=t,ga[2]=v,ga[3]=m;k=a.scissor_enable;k!==y.scissor_enable&&(k?b.enable(3089):b.disable(3089),
y.scissor_enable=k);k=S[0];t=S[1];v=S[2];m=S[3];if(k!==ma[0]||t!==ma[1]||v!==ma[2]||m!==ma[3])b.scissor(k,t,v,m),ma[0]=k,ma[1]=t,ma[2]=v,ma[3]=m;k=pa[0];t=pa[1];v=pa[2];m=pa[3];if(k!==xa[0]||t!==xa[1]||v!==xa[2]||m!==xa[3])b.viewport(k,t,v,m),xa[0]=k,xa[1]=t,xa[2]=v,xa[3]=m;y.dirty=!1}if(k=y.profile)w=performance.now(),J.count++;b.useProgram(g.program);ja.setVAO(null);t=e.location;v=Z[t];v.buffer||b.enableVertexAttribArray(t);if(v.type!==l.dtype||2!==v.size||v.buffer!==l||!1!==v.normalized||0!==v.offset||
0!==v.stride)b.bindBuffer(34962,l.buffer),b.vertexAttribPointer(t,2,l.dtype,!1,0,0),v.type=l.dtype,v.size=2,v.buffer=l,v.normalized=!1,v.offset=0,v.stride=0;t=n.call(this,h,d,0);x(t)&&2===t.length||V.commandRaise(f,H);b.uniform2f(c.location,t[0],t[1]);d=F.call(this,h,d,0);"number"!==typeof d&&V.commandRaise(C,H);b.uniform1f(U.location,d);b.uniform1i(p.location,O.bind());(d=da.elements)?b.bindBuffer(34963,d.buffer.buffer):ja.currentVAO&&(d=D.getElements(ja.currentVAO.elements))&&b.bindBuffer(34963,
d.buffer.buffer);t=da.primitive;v=da.offset;d?b.drawElements(t,3,d.type,v<<(d.type-5121>>1)):b.drawArrays(t,v,3);ja.setVAO(null);k&&(J.cpuTime+=performance.now()-w);O.unbind()},scope:function(a,b,c){var e,f,d,g,n,p,q,r,t,w,x,B,A,D,C,E,F,G,H,O;if(e=y.profile)f=performance.now(),J.count++;d=da.count;da.count=3;g=I.call(this,h,a,c);n=z[3];z[3]=g;p=k.call(this,h,a,c);g=z[4];z[4]=p;p=z[5];z[5]=u;q=L.buffer;L.buffer=l;r=L.divisor;L.divisor=0;t=L.normalized;L.normalized=!1;w=L.offset;L.offset=0;x=L.size;
L.size=0;B=L.state;L.state=1;A=L.stride;L.stride=0;D=L.type;L.type=l.dtype;C=L.w;L.w=0;E=L.x;L.x=0;F=L.y;L.y=0;G=L.z;L.z=0;H=aa.vert;aa.vert=2;O=aa.frag;aa.frag=1;b(h,a,c);e&&(J.cpuTime+=performance.now()-f);da.count=d;z[3]=n;z[4]=g;z[5]=p;L.buffer=q;L.divisor=r;L.normalized=t;L.offset=w;L.size=x;L.state=B;L.stride=A;L.type=D;L.w=C;L.x=E;L.y=F;L.z=G;aa.vert=H;aa.frag=O},batch:function(f,d){var g,k,n;g=E.next;g!==E.cur&&(g?b.bindFramebuffer(36160,g.framebuffer):b.bindFramebuffer(36160,null),E.cur=
g);if(y.dirty){var m,u,z;g=a.dither;g!==y.dither&&(g?b.enable(3024):b.disable(3024),y.dither=g);g=a.blend_enable;g!==y.blend_enable&&(g?b.enable(3042):b.disable(3042),y.blend_enable=g);g=ba[0];m=ba[1];u=ba[2];z=ba[3];if(g!==X[0]||m!==X[1]||u!==X[2]||z!==X[3])b.blendColor(g,m,u,z),X[0]=g,X[1]=m,X[2]=u,X[3]=z;g=fa[0];m=fa[1];if(g!==R[0]||m!==R[1])b.blendEquationSeparate(g,m),R[0]=g,R[1]=m;g=T[0];m=T[1];u=T[2];z=T[3];if(g!==A[0]||m!==A[1]||u!==A[2]||z!==A[3])b.blendFuncSeparate(g,m,u,z),A[0]=g,A[1]=
m,A[2]=u,A[3]=z;g=a.depth_enable;g!==y.depth_enable&&(g?b.enable(2929):b.disable(2929),y.depth_enable=g);g=a.depth_func;g!==y.depth_func&&(b.depthFunc(g),y.depth_func=g);g=P[0];m=P[1];if(g!==wa[0]||m!==wa[1])b.depthRange(g,m),wa[0]=g,wa[1]=m;g=a.depth_mask;g!==y.depth_mask&&(b.depthMask(g),y.depth_mask=g);g=q[0];m=q[1];u=q[2];z=q[3];if(g!==M[0]||m!==M[1]||u!==M[2]||z!==M[3])b.colorMask(g,m,u,z),M[0]=g,M[1]=m,M[2]=u,M[3]=z;g=a.cull_enable;g!==y.cull_enable&&(g?b.enable(2884):b.disable(2884),y.cull_enable=
g);g=a.cull_face;g!==y.cull_face&&(b.cullFace(g),y.cull_face=g);g=a.frontFace;g!==y.frontFace&&(b.frontFace(g),y.frontFace=g);g=a.lineWidth;g!==y.lineWidth&&(b.lineWidth(g),y.lineWidth=g);g=a.polygonOffset_enable;g!==y.polygonOffset_enable&&(g?b.enable(32823):b.disable(32823),y.polygonOffset_enable=g);g=qa[0];m=qa[1];if(g!==r[0]||m!==r[1])b.polygonOffset(g,m),r[0]=g,r[1]=m;g=a.sample_alpha;g!==y.sample_alpha&&(g?b.enable(32926):b.disable(32926),y.sample_alpha=g);g=a.sample_enable;g!==y.sample_enable&&
(g?b.enable(32928):b.disable(32928),y.sample_enable=g);g=G[0];m=G[1];if(g!==ca[0]||m!==ca[1])b.sampleCoverage(g,m),ca[0]=g,ca[1]=m;g=a.stencil_enable;g!==y.stencil_enable&&(g?b.enable(2960):b.disable(2960),y.stencil_enable=g);g=a.stencil_mask;g!==y.stencil_mask&&(b.stencilMask(g),y.stencil_mask=g);g=ra[0];m=ra[1];u=ra[2];if(g!==za[0]||m!==za[1]||u!==za[2])b.stencilFunc(g,m,u),za[0]=g,za[1]=m,za[2]=u;g=Ca[0];m=Ca[1];u=Ca[2];z=Ca[3];if(g!==ka[0]||m!==ka[1]||u!==ka[2]||z!==ka[3])b.stencilOpSeparate(g,
m,u,z),ka[0]=g,ka[1]=m,ka[2]=u,ka[3]=z;g=ya[0];m=ya[1];u=ya[2];z=ya[3];if(g!==ga[0]||m!==ga[1]||u!==ga[2]||z!==ga[3])b.stencilOpSeparate(g,m,u,z),ga[0]=g,ga[1]=m,ga[2]=u,ga[3]=z;g=a.scissor_enable;g!==y.scissor_enable&&(g?b.enable(3089):b.disable(3089),y.scissor_enable=g);g=S[0];m=S[1];u=S[2];z=S[3];if(g!==ma[0]||m!==ma[1]||u!==ma[2]||z!==ma[3])b.scissor(g,m,u,z),ma[0]=g,ma[1]=m,ma[2]=u,ma[3]=z;g=pa[0];m=pa[1];u=pa[2];z=pa[3];if(g!==xa[0]||m!==xa[1]||u!==xa[2]||z!==xa[3])b.viewport(g,m,u,z),xa[0]=
g,xa[1]=m,xa[2]=u,xa[3]=z;y.dirty=!1}if(g=y.profile)k=performance.now(),J.count+=d;b.useProgram(W.program);ja.setVAO(null);m=e.location;u=Z[m];u.buffer||b.enableVertexAttribArray(m);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)b.bindBuffer(34962,l.buffer),b.vertexAttribPointer(m,2,l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;m=t.call(this,h,void 0,n);x(m)&&2===m.length||V.commandRaise(N,H);b.uniform2f(c.location,
m[0],m[1]);n=w.call(this,h,void 0,n);"number"!==typeof n&&V.commandRaise(B,H);b.uniform1f(U.location,n);b.uniform1i(p.location,ha.bind());(m=da.elements)?b.bindBuffer(34963,m.buffer.buffer):ja.currentVAO&&(m=D.getElements(ja.currentVAO.elements))&&b.bindBuffer(34963,m.buffer.buffer);u=da.primitive;z=da.offset;for(n=0;n<d;++n)m?b.drawElements(u,3,m.type,z<<(m.type-5121>>1)):b.drawArrays(u,z,3);ha.unbind();ja.setVAO(null);g&&(J.cpuTime+=performance.now()-k)}}}}},{}],25:[function(aa,ba,Ma){var d=aa("./sorted-object-keys");
ba.exports=function(V,H){for(var J=d(H),g=0;g<J.length;++g)V[J[g]]=H[J[g]];return V}},{"./sorted-object-keys":34}],26:[function(aa,ba,Ma){function d(d,g,l,n,f,F){for(var C=0;C<g;++C)for(var H=d[C],I=0;I<l;++I)for(var k=H[I],u=0;u<n;++u)f[F++]=k[u]}function V(H,g,l,n,f){for(var F=1,C=l+1;C<g.length;++C)F*=g[C];var O=g[l];if(4===g.length-l){var I=g[l+1],k=g[l+2];g=g[l+3];for(C=0;C<O;++C)d(H[C],I,k,g,n,f),f+=F}else for(C=0;C<O;++C)V(H[C],g,l+1,n,f),f+=F}var H=aa("./pool");ba.exports={shape:function(d){for(var g=
[];d.length;d=d[0])g.push(d.length);return g},flatten:function(J,g,l,n){var f=1;if(g.length)for(var F=0;F<g.length;++F)f*=g[F];else f=0;l=n||H.allocType(l,f);switch(g.length){case 0:break;case 1:n=g[0];for(g=0;g<n;++g)l[g]=J[g];break;case 2:n=g[0];g=g[1];for(F=f=0;F<n;++F)for(var C=J[F],O=0;O<g;++O)l[f++]=C[O];break;case 3:d(J,g[0],g[1],g[2],l,0);break;default:V(J,g,0,l,0)}return l}}},{"./pool":32}],27:[function(aa,ba,Ma){var d=aa("./is-typed-array");ba.exports=function(V){return Array.isArray(V)||
d(V)}},{"./is-typed-array":30}],28:[function(aa,ba,Ma){var d=aa("./is-typed-array");ba.exports=function(V){return!!V&&"object"===typeof V&&Array.isArray(V.shape)&&Array.isArray(V.stride)&&"number"===typeof V.offset&&V.shape.length===V.stride.length&&(Array.isArray(V.data)||d(V.data))}},{"./is-typed-array":30}],29:[function(aa,ba,Ma){ba.exports=function(d){return!(d&d-1)&&!!d}},{}],30:[function(aa,ba,Ma){ba.exports=function(d){return d instanceof Uint8Array||d instanceof Uint16Array||d instanceof Uint32Array||
d instanceof Int8Array||d instanceof Int16Array||d instanceof Int32Array||d instanceof Float32Array||d instanceof Float64Array||d instanceof Uint8ClampedArray}},{}],31:[function(aa,ba,Ma){ba.exports=function(d,V){for(var H=Array(d),J=0;J<d;++J)H[J]=V(J);return H}},{}],32:[function(aa,ba,Ma){function d(d){var g,l;g=(65535<d)<<4;d>>>=g;l=(255<d)<<3;d>>>=l;g|=l;l=(15<d)<<2;d>>>=l;g|=l;l=(3<d)<<1;return g|l|d>>>l>>1}function V(){function J(g){a:{for(var f=16;268435456>=f;f*=16)if(g<=f){g=f;break a}g=
0}f=l[d(g)>>2];return 0<f.length?f.pop():new ArrayBuffer(g)}function g(g){l[d(g.byteLength)>>2].push(g)}var l=H(8,function(){return[]});return{alloc:J,free:g,allocType:function(d,f){var g=null;switch(d){case 5120:g=new Int8Array(J(f),0,f);break;case 5121:g=new Uint8Array(J(f),0,f);break;case 5122:g=new Int16Array(J(2*f),0,f);break;case 5123:g=new Uint16Array(J(2*f),0,f);break;case 5124:g=new Int32Array(J(4*f),0,f);break;case 5125:g=new Uint32Array(J(4*f),0,f);break;case 5126:g=new Float32Array(J(4*
f),0,f);break;default:return null}return g.length!==f?g.subarray(0,f):g},freeType:function(d){g(d.buffer)}}}var H=aa("./loop");aa=V();aa.zero=V();ba.exports=aa},{"./loop":31}],33:[function(aa,ba,Ma){ba.exports={next:"function"===typeof requestAnimationFrame?function(d){return requestAnimationFrame(d)}:function(d){return setTimeout(d,16)},cancel:"function"===typeof cancelAnimationFrame?function(d){return cancelAnimationFrame(d)}:clearTimeout}},{}],34:[function(aa,ba,Ma){ba.exports=function(d){return Object.keys(d).sort()}},
{}],35:[function(aa,ba,Ma){var d=aa("./pool"),V=new Float32Array(1),H=new Uint32Array(V.buffer);ba.exports=function(J){for(var g=d.allocType(5123,J.length),l=0;l<J.length;++l)if(isNaN(J[l]))g[l]=65535;else if(Infinity===J[l])g[l]=31744;else if(-Infinity===J[l])g[l]=64512;else{V[0]=J[l];var n=H[0],f=n>>>31<<15,F=(n<<1>>>24)-127,n=n>>13&1023;g[l]=-24>F?f:-14>F?f+(n+1024>>-14-F):15<F?f+31744:f+(F+15<<10)+n}return g}},{"./pool":32}],36:[function(aa,ba,Ma){var d=aa("./sorted-object-keys");ba.exports=function(V){return d(V).map(function(d){return V[d]})}},
{"./sorted-object-keys":34}],37:[function(aa,ba,Ma){function d(d,f,g){function C(){var f=window.innerWidth,l=window.innerHeight;d!==document.body&&(l=H.getBoundingClientRect(),f=l.right-l.left,l=l.bottom-l.top);H.width=g*f;H.height=g*l}var H=document.createElement("canvas");l(H.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});d.appendChild(H);d===document.body&&(H.style.position="absolute",l(d.style,{margin:0,padding:0}));var I;d!==document.body&&"function"===typeof ResizeObserver?
(I=new ResizeObserver(function(){setTimeout(C)}),I.observe(d)):window.addEventListener("resize",C,!1);C();return{canvas:H,onDestroy:function(){I?I.disconnect():window.removeEventListener("resize",C);d.removeChild(H)}}}function V(d,f){function g(l){try{return d.getContext(l,f)}catch(F){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}function H(d){if("string"===typeof d)return d.split();g(Array.isArray(d),"invalid extension array");return d}function J(d){return"string"===
typeof d?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(d)):d}var g=aa("./util/check"),l=aa("./util/extend");ba.exports=function(l){var f=l||{},F,C,O,I;l={};var k=[],u=[],L="undefined"===typeof window?1:window.devicePixelRatio,W=!1,t=function(d){d&&g.raise(d)},N=function(){};"string"===typeof f?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),F=document.querySelector(f),g(F,"invalid query string for element")):"object"===
typeof f?"string"===typeof f.nodeName&&"function"===typeof f.appendChild&&"function"===typeof f.getBoundingClientRect?F=f:"function"===typeof f.drawArrays||"function"===typeof f.drawElements?(I=f,O=I.canvas):(g.constructor(f),"gl"in f?I=f.gl:"canvas"in f?O=J(f.canvas):"container"in f&&(C=J(f.container)),"attributes"in f&&(l=f.attributes,g.type(l,"object","invalid context attributes")),"extensions"in f&&(k=H(f.extensions)),"optionalExtensions"in f&&(u=H(f.optionalExtensions)),"onDone"in f&&(g.type(f.onDone,
"function","invalid or missing onDone callback"),t=f.onDone),"profile"in f&&(W=!!f.profile),"pixelRatio"in f&&(L=+f.pixelRatio,g(0<L,"invalid pixel ratio"))):g.raise("invalid arguments to regl");F&&("canvas"===F.nodeName.toLowerCase()?O=F:C=F);if(!I){if(!O){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");F=d(C||document.body,t,L);if(!F)return null;O=F.canvas;N=F.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0);I=V(O,l)}return I?
{gl:I,canvas:O,container:C,extensions:k,optionalExtensions:u,pixelRatio:L,profile:W,onDone:t,onDestroy:N}:(N(),t("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(aa,ba,Ma){ba.exports=function(V,H){function J(d){var f=!1;"altKey"in d&&(f=f||d.altKey!==W.alt,W.alt=!!d.altKey);"shiftKey"in d&&(f=f||d.shiftKey!==W.shift,W.shift=!!d.shiftKey);"ctrlKey"in d&&(f=f||d.ctrlKey!==W.control,W.control=!!d.ctrlKey);
"metaKey"in d&&(f=f||d.metaKey!==W.meta,W.meta=!!d.metaKey);return f}function g(f,g){var l=d.x(g),c=d.y(g);"buttons"in g&&(f=g.buttons|0);if(f!==k||l!==u||c!==L||J(g))k=f|0,u=l||0,L=c||0,H&&H(k,u,L,W)}function l(d){g(0,d)}function n(){if(k||u||L||W.shift||W.alt||W.meta||W.control)k=u=L=0,W.shift=W.alt=W.control=W.meta=!1,H&&H(0,0,0,W)}function f(d){J(d)&&H&&H(k,u,L,W)}function F(f){0===d.buttons(f)?g(0,f):g(k,f)}function C(f){g(k|d.buttons(f),f)}function O(f){g(k&~d.buttons(f),f)}function I(){t||
(t=!0,V.addEventListener("mousemove",F),V.addEventListener("mousedown",C),V.addEventListener("mouseup",O),V.addEventListener("mouseleave",l),V.addEventListener("mouseenter",l),V.addEventListener("mouseout",l),V.addEventListener("mouseover",l),V.addEventListener("blur",n),V.addEventListener("keyup",f),V.addEventListener("keydown",f),V.addEventListener("keypress",f),V!==window&&(window.addEventListener("blur",n),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",
f)))}H||(H=V,V=window);var k=0,u=0,L=0,W={shift:!1,alt:!1,control:!1,meta:!1},t=!1;I();var N={element:V};Object.defineProperties(N,{enabled:{get:function(){return t},set:function(d){d?I():t&&(t=!1,V.removeEventListener("mousemove",F),V.removeEventListener("mousedown",C),V.removeEventListener("mouseup",O),V.removeEventListener("mouseleave",l),V.removeEventListener("mouseenter",l),V.removeEventListener("mouseout",l),V.removeEventListener("mouseover",l),V.removeEventListener("blur",n),V.removeEventListener("keyup",
f),V.removeEventListener("keydown",f),V.removeEventListener("keypress",f),V!==window&&(window.removeEventListener("blur",n),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))},enumerable:!0},buttons:{get:function(){return k},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return L},enumerable:!0},mods:{get:function(){return W},enumerable:!0}});return N};var d=aa("mouse-event")},{"mouse-event":39}],39:[function(aa,
ba,Ma){function d(d){return d.target||d.srcElement||window}Ma.buttons=function(d){if("object"===typeof d){if("buttons"in d)return d.buttons;if("which"in d){d=d.which;if(2===d)return 4;if(3===d)return 2;if(0<d)return 1<<d-1}else if("button"in d){d=d.button;if(1===d)return 4;if(2===d)return 2;if(0<=d)return 1<<d}}return 0};Ma.element=d;Ma.x=function(V){if("object"===typeof V){if("offsetX"in V)return V.offsetX;var H=d(V).getBoundingClientRect();return V.clientX-H.left}return 0};Ma.y=function(V){if("object"===
typeof V){if("offsetY"in V)return V.offsetY;var H=d(V).getBoundingClientRect();return V.clientY-H.top}return 0}},{}],40:[function(aa,ba,Ma){function d(d){throw Error("resl: "+d);}function V(g,f,l){Object.keys(g).forEach(function(g){0>f.indexOf(g)&&d('invalid parameter "'+g+'" in '+l)})}function H(d,f){this.state=0;this.ready=!1;this.progress=0;this.name=d;this.cancel=f}var J=["manifest","onDone","onProgress","onError"],g=["type","src","stream","credentials","parser"],l=["onData","onDone"];ba.exports=
function(n){function f(f,c){if(f in n){var e=n[f];"function"!==typeof e&&d('invalid callback "'+f+'"');return e}return null}function F(d){function c(){if(!(2>h.readyState||1===n.state||-1===n.state)){if(200!==h.status)return O('error loading resource "'+d.name+'"');if(2<h.readyState&&0===n.state){var c;c="binary"===d.type?h.response:h.responseText;if(k.data)try{l=k.data(c)}catch(f){return O(f)}else l=c}if(3<h.readyState&&0===n.state){if(k.done)try{l=k.done()}catch(f){return O(f)}n.state=1}t[e]=l;
n.progress=.75*n.progress+.25;n.ready=d.stream&&!!l||1===n.state;I()}}var e=d.name,f=d.stream,g="binary"===d.type,k=d.parser,h=new XMLHttpRequest,l=null,n=new H(e,function(){1!==n.state&&-1!==n.state&&(h.onreadystatechange=null,h.abort(),n.state=-1)});h.onreadystatechange=f?c:function(){4===h.readyState&&c()};g&&(h.responseType="arraybuffer");d.credentials&&(h.withCredentials=!0);h.open("GET",d.src,!0);h.send();return n}function C(d,c){function e(){if(0===u.state)if(n.data)try{w=n.data(c)}catch(a){return O(a)}else w=
c}function f(a){e();t[l]=w;u.progress=a.lengthComputable?Math.max(u.progress,a.loaded/a.total):.75*u.progress+.25;I(l)}function g(){e();if(0===u.state){if(n.done)try{w=n.done()}catch(a){return O(a)}u.state=1}u.progress=1;u.ready=!0;t[l]=w;h();I("finish "+l)}function k(){O('error loading asset "'+l+'"')}function h(){d.stream&&c.removeEventListener("progress",f);"image"===d.type?c.addEventListener("load",g):c.addEventListener("canplay",g);c.removeEventListener("error",k)}var l=d.name,n=d.parser,u=new H(l,
function(){1!==u.state&&-1!==u.state&&(u.state=-1,h(),c.src="")}),w=c;d.stream&&c.addEventListener("progress",f);if("image"===d.type)c.addEventListener("load",g);else{var b=!1,x=!1;c.addEventListener("loadedmetadata",function(){x=!0;b&&g()});c.addEventListener("canplay",function(){b=!0;x&&g()})}c.addEventListener("error",k);c.crossOrigin=d.credentials?"use-credentials":"anonymous";c.src=d.src;return u}function O(d){-1!==N&&1!==N&&(N=-1,B.forEach(function(c){c.cancel()}),W?"string"===typeof d?W(Error("resl: "+
d)):W(d):console.error("resl error:",d))}function I(d){if(-1!==N&&1!==N){var c=0,e=0;B.forEach(function(d){d.ready&&(e+=1);c+=d.progress});e===B.length?(N=1,u(t)):L&&L(c/B.length,d)}}"object"===typeof n&&n||d("invalid or missing configuration");V(n,J,"config");var k=n.manifest;"object"===typeof k&&k||d("missing manifest");var u=f("onDone");u||d("missing onDone() callback");var L=f("onProgress"),W=f("onError"),t={},N=0,w={text:F,binary:function(d){return F(d)},image:function(d){return C(d,document.createElement("img"))},
video:function(d){return C(d,document.createElement("video"))},audio:function(d){return C(d,document.createElement("audio"))}},B=Object.keys(k).map(function(f){function c(c,f){if(c in e.parser){var g=e.parser[c];"function"!==typeof g&&d("invalid parser callback "+c+' for asset "'+c+'"');return g}return f}var e=k[f];"string"===typeof e?e={src:e}:"object"===typeof e&&e||d('invalid asset definition "'+f+'"');V(e,g,'asset "'+f+'"');var n={};"parser"in e&&("function"===typeof e.parser?n={data:e.parser}:
"object"===typeof e.parser&&e.parser?(V(n,l,'parser for asset "'+f+'"'),"onData"in n||d('missing onData callback for parser in asset "'+f+'"'),n={data:c("onData"),done:c("onDone")}):d('invalid parser for asset "'+f+'"'));return{name:f,type:function(c,g,h){c in e&&(h=e[c]);0>g.indexOf(h)&&d("invalid "+c+' "'+h+'" for asset "'+f+'", possible values: '+g);return h}("type",Object.keys(w),"text"),stream:!!e.stream,credentials:!!e.credentials,src:function(c,g,h){c in e?h=e[c]:g&&d("missing "+c+' for asset "'+
f+'"');"string"!==typeof h&&d("invalid "+c+' for asset "'+f+'", must be a string');return h}("src",!0,""),parser:n}}).map(function(d){return w[d.type](d)});0===B.length&&setTimeout(function(){I("done")},1)}},{}],41:[function(aa,ba,Ma){function d(c,d){for(var f=0;f<c.length;++f)if(c[f]===d)return f;return-1}var V=aa("./lib/util/check"),H=aa("./lib/util/extend"),J=aa("./lib/dynamic"),g=aa("./lib/util/raf"),l=aa("./lib/util/clock"),n=aa("./lib/strings"),f=aa("./lib/webgl"),F=aa("./lib/extension"),C=
aa("./lib/limits"),O=aa("./lib/buffer"),I=aa("./lib/elements"),k=aa("./lib/texture"),u=aa("./lib/renderbuffer"),L=aa("./lib/framebuffer"),W=aa("./lib/attribute"),t=aa("./lib/shader"),N=aa("./lib/read"),w=aa("./lib/core"),B=aa("./lib/stats"),ha=aa("./lib/timer");ba.exports=function(c){function e(){if(0===Ca.length)T&&T.update(),La=null;else{La=g.next(e);b();for(var a=Ca.length-1;0<=a;--a){var c=Ca[a];c&&c(P,null,0)}ba.flush();T&&T.update()}}function U(){!La&&0<Ca.length&&(La=g.next(e))}function p(){La&&
(g.cancel(e),La=null)}function Z(a){a.preventDefault();ja=!0;p();ka.forEach(function(a){a()})}function h(a){ba.getError();ja=!1;Ma.restore();ca.restore();qa.restore();S.restore();ma.restore();ra.restore();G.restore();T&&T.restore();za.procs.refresh();U();pa.forEach(function(a){a()})}function y(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(J.isDynamic(f))e[b]=J.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(J.isDynamic(f[g])){e[b]=J.unbox(f,
b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}V(!!a,"invalid args to regl({...})");V.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=H({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=
c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=za.compile(a,f,e,d,g),k=h.draw,l=h.batch,n=h.scope,p=[];return H(function(a,b){var d;ja&&V.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function aa(a,b){var c=0;za.procs.poll();var d=b.color;d&&(ba.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ba.clearDepth(+b.depth),c|=256);"stencil"in b&&(ba.clearStencil(b.stencil|0),c|=1024);V(!!c,
"called regl.clear with no buffer specified");ba.clear(c)}function D(a){V.type(a,"function","regl.frame() callback must be a function");Ca.push(a);U();return{cancel:function(){function b(){var a=d(Ca,b);Ca[a]=Ca[Ca.length-1];--Ca.length;0>=Ca.length&&p()}var c=d(Ca,a);V(0<=c,"cannot cancel a frame twice");Ca[c]=b}}}function E(){var a=ya.viewport,b=ya.scissor_box;a[0]=a[1]=b[0]=b[1]=0;P.viewportWidth=P.framebufferWidth=P.drawingBufferWidth=a[2]=b[2]=ba.drawingBufferWidth;P.viewportHeight=P.framebufferHeight=
P.drawingBufferHeight=a[3]=b[3]=ba.drawingBufferHeight}function b(){P.tick+=1;P.time=a();E();za.procs.poll()}function x(){S.refresh();E();za.procs.refresh();T&&T.update()}function a(){return(l()-A)/1E3}console.log("REGL args are:",c);c=f(c);console.log("REGL configs are:",c);if(!c)return null;var ba=c.gl,z=ba.getContextAttributes(),ja=ba.isContextLost(),Ma=F(ba,c);if(!Ma)return null;var X=n(),fa=B(),R=Ma.extensions,T=ha(ba,R),A=l(),q=ba.drawingBufferWidth,M=ba.drawingBufferHeight,P={tick:0,time:0,
viewportWidth:q,viewportHeight:M,framebufferWidth:q,framebufferHeight:M,drawingBufferWidth:q,drawingBufferHeight:M,pixelRatio:c.pixelRatio},q={elements:null,primitive:4,count:-1,offset:0,instances:-1},wa=C(ba,R),qa=O(ba,fa,c,function(a){return G.destroyBuffer(a)}),r=I(ba,R,qa,fa),G=W(ba,R,wa,fa,qa,r,q),ca=t(ba,X,fa,c),S=k(ba,R,wa,function(){za.procs.poll()},P,fa,c),ma=u(ba,R,wa,fa,c),ra=L(ba,R,wa,S,ma,fa),za=w(ba,X,R,wa,qa,r,S,ra,{},G,ca,q,P,T,c),X=N(ba,ra,za.procs.poll,P,z,R,wa),ya=za.next,ga=ba.canvas,
Ca=[],ka=[],pa=[],xa=[c.onDestroy],La=null;ga&&(ga.addEventListener("webglcontextlost",Z,!1),ga.addEventListener("webglcontextrestored",h,!1));var oa=ra.setFBO=y({framebuffer:J.define.call(null,1,"framebuffer")});x();z=H(y,{clear:function(a){V("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)oa(H({framebuffer:a.framebuffer.faces[b]},a),aa);else oa(a,aa);else aa(null,a)},prop:J.define.bind(null,
1),context:J.define.bind(null,2),"this":J.define.bind(null,3),draw:y({}),buffer:function(a){return qa.create(a,34962,!1,!1)},elements:function(a){return r.create(a,!1)},texture:S.create2D,cube:S.createCube,renderbuffer:ma.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:G.createVAO,attributes:z,frame:D,on:function(a,b){V.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return D(b);case "lost":c=ka;break;case "restore":c=pa;break;case "destroy":c=
xa;break;default:V.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:wa,hasExtension:function(a){return 0<=wa.extensions.indexOf(a.toLowerCase())},read:X,destroy:function(){Ca.length=0;p();ga&&(ga.removeEventListener("webglcontextlost",Z),ga.removeEventListener("webglcontextrestored",h));ca.clear();ra.clear();ma.clear();G.clear();S.clear();r.clear();qa.clear();T&&
T.clear();xa.forEach(function(a){a()})},_gl:ba,_refresh:x,poll:function(){b();T&&T.update()},now:a,stats:fa});c.onDone(null,z);return z}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,
"./lib/webgl":37}]},{},[1]);

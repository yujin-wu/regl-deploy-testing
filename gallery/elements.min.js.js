(function(){function A(R,Ib,k){function Z(f,c){if(!Ib[f]){if(!R[f]){var y="function"==typeof require&&require;if(!c&&y)return y(f,!0);if(r)return r(f,!0);y=Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y;}y=Ib[f]={exports:{}};R[f][0].call(y.exports,function(b){return Z(R[f][1][b]||b)},y,y.exports,A,R,Ib,k)}return Ib[f].exports}for(var r="function"==typeof require&&require,O=0;O<k.length;O++)Z(k[O]);return Z}return A})()({1:[function(A,R,Ib){A=A("../regl")();A.clear({color:[0,
0,0,1],depth:1});R=3;R>A.limits.lineWidthDims[1]&&(R=A.limits.lineWidthDims[1]);A({frag:"\n    precision mediump float;\n    uniform vec4 color;\n    void main() {\n      gl_FragColor = color;\n    }",vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n      gl_Position = vec4(position, 0, 1);\n    }",attributes:{position:Array(5).fill().map(function(k,Z){var r=2*Math.PI*Z/5;return[Math.sin(r),Math.cos(r)]})},uniforms:{color:[1,0,0,1]},elements:[[0,1],[0,2],[0,3],
[0,4],[1,2],[1,3],[1,4],[2,3],[2,4],[3,4]],lineWidth:R})()},{"../regl":38}],2:[function(A,R,Ib){function k(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var Z=A("./util/sorted-object-keys"),r=A("./util/check"),O=A("./util/values"),f=A("./constants/dtypes.json"),c=A("./util/is-typed-array"),y=A("./util/is-ndarray"),b=A("./constants/primitives.json"),v="attributes elements offset count primitive instances".split(" ");
R.exports=function(pa,ea,G,F,w,B,N){function n(b){if(b!==U.currentVAO){var c=ea.oes_vertex_array_object;b?c.bindVertexArrayOES(b.vao):c.bindVertexArrayOES(null);U.currentVAO=b}}function H(b){if(b!==U.currentVAO){if(b)b.bindAttrs();else{for(var c=ea.angle_instanced_arrays,f=0;f<g.length;++f){var d=g[f];d.buffer?(pa.enableVertexAttribArray(f),d.buffer.bind(),pa.vertexAttribPointer(f,d.size,d.type,d.normalized,d.stride,d.offfset),c&&d.divisor&&c.vertexAttribDivisorANGLE(f,d.divisor)):(pa.disableVertexAttribArray(f),
pa.vertexAttrib4f(f,d.x,d.y,d.z,d.w))}N.elements?pa.bindBuffer(34963,N.elements.buffer.buffer):pa.bindBuffer(34963,null)}U.currentVAO=b}}function ca(){O(z).forEach(function(b){b.destroy()})}function I(){this.id=++d;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=ea.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;z[this.id]=this;this.buffers=[]}function A(){ea.oes_vertex_array_object&&O(z).forEach(function(b){b.refresh()})}
var e=G.maxAttributes,g=Array(e);for(G=0;G<e;++G)g[G]=new k;var d=0,z={},U={Record:k,scope:{},state:g,currentVAO:null,targetVAO:null,restore:ea.oes_vertex_array_object?A:function(){},createVAO:function(d){function q(d){var W;if(Array.isArray(d))W=d,g.elements&&g.ownsElements&&g.elements.destroy(),g.elements=null,g.ownsElements=!1,g.offset=0,g.count=0,g.instances=-1,g.primitive=4;else{r("object"===typeof d,"invalid arguments for create vao");r("attributes"in d,"must specify attributes for vao");if(d.elements){var a=
d.elements;g.ownsElements?("function"===typeof a&&"elements"===a._reglType?g.elements.destroy():g.elements(a),g.ownsElements=!1):B.getElements(d.elements)?(g.elements=d.elements,g.ownsElements=!1):(g.elements=B.create(d.elements),g.ownsElements=!0)}else g.elements=null,g.ownsElements=!1;W=d.attributes;g.offset=0;g.count=-1;g.instances=-1;g.primitive=4;g.elements&&(g.count=g.elements._elements.vertCount,g.primitive=g.elements._elements.primType);"offset"in d&&(g.offset=d.offset|0);"count"in d&&(g.count=
d.count|0);"instances"in d&&(g.instances=d.instances|0);"primitive"in d&&(r(d.primitive in b,"bad primitive type: "+d.primitive),g.primitive=b[d.primitive]);r.optional(function(){for(var a=Z(d),b=0;b<a.length;++b)r(0<=v.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+v)});r(Array.isArray(W),"attributes must be an array")}r(W.length<e,"too many attributes");r(0<W.length,"must specify at least one attribute");var a={},h=g.attributes;h.length=W.length;for(var X=0;X<W.length;++X){var z=
W[X],n=h[X]=new k,I=z.data||z;if(Array.isArray(I)||c(I)||y(I)){var H;g.buffers[X]&&(H=g.buffers[X],c(I)&&H._buffer.byteLength>=I.byteLength?H.subdata(I):(H.destroy(),g.buffers[X]=null));g.buffers[X]||(H=g.buffers[X]=w.create(z,34962,!1,!0));n.buffer=w.getBuffer(H);n.size=n.buffer.dimension|0;n.normalized=!1;n.type=n.buffer.dtype;n.offset=0;n.stride=0;n.divisor=0;n.state=1;a[X]=1}else w.getBuffer(z)?(n.buffer=w.getBuffer(z),n.size=n.buffer.dimension|0,n.normalized=!1,n.type=n.buffer.dtype,n.offset=
0,n.stride=0,n.divisor=0,n.state=1):w.getBuffer(z.buffer)?(n.buffer=w.getBuffer(z.buffer),n.size=(+z.size||n.buffer.dimension)|0,n.normalized=!!z.normalized||!1,"type"in z?(r.parameter(z.type,f,"invalid buffer type"),n.type=f[z.type]):n.type=n.buffer.dtype,n.offset=(z.offset||0)|0,n.stride=(z.stride||0)|0,n.divisor=(z.divisor||0)|0,n.state=1,r(1<=n.size&&4>=n.size,"size must be between 1 and 4"),r(0<=n.offset,"invalid offset"),r(0<=n.stride&&255>=n.stride,"stride must be between 0 and 255"),r(0<=
n.divisor,"divisor must be positive"),r(!n.divisor||!!ea.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in z?(r(0<X,"first attribute must not be a constant"),n.x=+z.x||0,n.y=+z.y||0,n.z=+z.z||0,n.w=+z.w||0,n.state=2):r(!1,"invalid attribute spec for location "+X)}for(H=0;H<g.buffers.length;++H)!a[H]&&g.buffers[H]&&(g.buffers[H].destroy(),g.buffers[H]=null);g.refresh();return q}var g=new I;F.vaoCount+=1;q.destroy=function(){for(var b=0;b<g.buffers.length;++b)g.buffers[b]&&
g.buffers[b].destroy();g.buffers.length=0;g.ownsElements&&(g.elements.destroy(),g.elements=null,g.ownsElements=!1);g.destroy()};q._vao=g;q._reglType="vao";return q(d)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var c=0;c<g.length;++c){var d=g[c];d.buffer===b&&(pa.disableVertexAttribArray(c),d.buffer=null)}},setVAO:ea.oes_vertex_array_object?n:H,clear:ea.oes_vertex_array_object?ca:function(){}};I.prototype.bindAttrs=function(){for(var b=ea.angle_instanced_arrays,
c=this.attributes,d=0;d<c.length;++d){var f=c[d];f.buffer?(pa.enableVertexAttribArray(d),pa.bindBuffer(34962,f.buffer.buffer),pa.vertexAttribPointer(d,f.size,f.type,f.normalized,f.stride,f.offset),b&&f.divisor&&b.vertexAttribDivisorANGLE(d,f.divisor)):(pa.disableVertexAttribArray(d),pa.vertexAttrib4f(d,f.x,f.y,f.z,f.w))}for(b=c.length;b<e;++b)pa.disableVertexAttribArray(b);(b=B.getElements(this.elements))?pa.bindBuffer(34963,b.buffer.buffer):pa.bindBuffer(34963,null)};I.prototype.refresh=function(){var b=
ea.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),U.currentVAO=null,b.bindVertexArrayOES(null))};I.prototype.destroy=function(){if(this.vao){var b=ea.oes_vertex_array_object;this===U.currentVAO&&(U.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);z[this.id]&&(delete z[this.id],--F.vaoCount)};return U}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(A,R,Ib){function k(b){return G[Object.prototype.toString.call(b)]|0}function Z(b,c){for(var f=0;f<c.length;++f)b[f]=c[f]}function r(b,c,f,y,k,v,e){for(var g=0,d=0;d<f;++d)for(var z=0;z<y;++z)b[g++]=c[k*d+v*z+e]}var O=A("./util/sorted-object-keys"),f=A("./util/check"),c=A("./util/is-typed-array"),y=A("./util/is-ndarray"),b=A("./util/values"),v=A("./util/pool");Ib=A("./util/flatten");
var pa=Ib.flatten,ea=Ib.shape,G=A("./constants/arraytypes.json"),F=A("./constants/dtypes.json"),w=A("./constants/usage.json"),B=[];B[5120]=1;B[5122]=2;B[5124]=4;B[5121]=1;B[5123]=2;B[5125]=4;B[5126]=4;R.exports=function(G,n,H,ca){function I(b){this.id=d++;this.buffer=G.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;H.profile&&(this.stats={size:0})}function A(b,c,f){b.byteLength=c.byteLength;G.bufferData(b.type,c,f)}function e(b,
d,g,e,n,a){b.usage=g;if(Array.isArray(d)){if(b.dtype=e||5126,0<d.length)if(Array.isArray(d[0])){n=ea(d);for(var h=e=1;h<n.length;++h)e*=n[h];b.dimension=e;d=pa(d,n,b.dtype);A(b,d,g);a?b.persistentData=d:v.freeType(d)}else"number"===typeof d[0]?(b.dimension=n,n=v.allocType(b.dtype,d.length),Z(n,d),A(b,n,g),a?b.persistentData=n:v.freeType(n)):c(d[0])?(b.dimension=d[0].length,b.dtype=e||k(d[0])||5126,d=pa(d,[d.length,d[0].length],b.dtype),A(b,d,g),a?b.persistentData=d:v.freeType(d)):f.raise("invalid buffer data")}else if(c(d))b.dtype=
e||k(d),b.dimension=n,A(b,d,g),a&&(b.persistentData=new Uint8Array(new Uint8Array(d.buffer)));else if(y(d)){n=d.shape;var X=d.stride,h=d.offset,z=0,w=0,H=0,I=0;1===n.length?(z=n[0],w=1,H=X[0],I=0):2===n.length?(z=n[0],w=n[1],H=X[0],I=X[1]):f.raise("invalid shape");b.dtype=e||k(d.data)||5126;b.dimension=w;n=v.allocType(b.dtype,z*w);r(n,d.data,z,w,H,I,h);A(b,n,g);a?b.persistentData=n:v.freeType(n)}else d instanceof ArrayBuffer?(b.dtype=5121,b.dimension=n,A(b,d,g),a&&(b.persistentData=new Uint8Array(new Uint8Array(d)))):
f.raise("invalid buffer data")}function g(b){n.bufferCount--;ca(b);var c=b.buffer;f(c,"buffer must not be deleted already");G.deleteBuffer(c);b.buffer=null;delete z[b.id]}var d=0,z={};I.prototype.bind=function(){G.bindBuffer(this.type,this.buffer)};I.prototype.destroy=function(){g(this)};var U=[];H.profile&&(n.getTotalBufferSize=function(){var b=0;O(z).forEach(function(c){b+=z[c].stats.size});return b});return{create:function(b,d,U,L){function ca(b){var a=35044,d=null,g=0,q=0,n=1;Array.isArray(b)||
c(b)||y(b)||b instanceof ArrayBuffer?d=b:"number"===typeof b?g=b|0:b&&(f.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(f(null===d||Array.isArray(d)||c(d)||y(d),"invalid data for buffer"),d=b.data),"usage"in b&&(f.parameter(b.usage,w,"invalid buffer usage"),a=w[b.usage]),"type"in b&&(f.parameter(b.type,F,"invalid buffer type"),q=F[b.type]),"dimension"in b&&(f.type(b.dimension,"number","invalid dimension"),n=b.dimension|0),"length"in b&&(f.nni(g,"buffer length must be a nonnegative integer"),
g=b.length|0));h.bind();d?e(h,d,a,q,n,L):(g&&G.bufferData(h.type,g,a),h.dtype=q||5121,h.usage=a,h.dimension=n,h.byteLength=g);H.profile&&(h.stats.size=h.byteLength*B[h.dtype]);return ca}function a(b,a){f(a+b.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+a+" to a buffer of size "+h.byteLength);G.bufferSubData(h.type,a,b)}n.bufferCount++;var h=new I(d);z[h.id]=h;U||ca(b);ca._reglType="buffer";ca._buffer=
h;ca.subdata=function(b,d){var g=(d||0)|0,q;h.bind();if(c(b)||b instanceof ArrayBuffer)a(b,g);else if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var e=v.allocType(h.dtype,b.length);Z(e,b);a(e,g);v.freeType(e)}else Array.isArray(b[0])||c(b[0])?(q=ea(b),e=pa(b,q,h.dtype),a(e,g),v.freeType(e)):f.raise("invalid buffer data")}else if(y(b)){q=b.shape;var n=b.stride,z=e=0,w=0,H=0;1===q.length?(e=q[0],z=1,w=n[0],H=0):2===q.length?(e=q[0],z=q[1],w=n[0],H=n[1]):f.raise("invalid shape");q=Array.isArray(b.data)?
h.dtype:k(b.data);q=v.allocType(q,e*z);r(q,b.data,e,z,w,H,b.offset);a(q,g);v.freeType(q)}else f.raise("invalid data for buffer subdata");return ca};H.profile&&(ca.stats=h.stats);ca.destroy=function(){g(h)};return ca},createStream:function(b,c){var d=U.pop();d||(d=new I(b));d.bind();e(d,c,35040,0,1,!1);return d},destroyStream:function(b){U.push(b)},clear:function(){b(z).forEach(g);U.forEach(g)},getBuffer:function(b){return b&&b._buffer instanceof I?b._buffer:null},restore:function(){b(z).forEach(function(b){b.buffer=
G.createBuffer();G.bindBuffer(b.type,b.buffer);G.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:e}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(A,R,Ib){R.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(A,R,Ib){R.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(A,R,Ib){R.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(A,R,Ib){R.exports={"static":35044,
dynamic:35048,stream:35040}},{}],8:[function(A,R,Ib){function k(b){return Array.isArray(b)||G(b)||F(b)}function Z(b){return b.sort(function(b,c){return"viewport"===b?-1:"viewport"===c?1:b<c?-1:1})}function r(b,c,d,f){this.thisDep=b;this.contextDep=c;this.propDep=d;this.append=f}function O(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function f(b){return new r(!1,!1,!1,b)}function c(b,c){var d=b.type;if(0===d)return d=b.data.length,new r(!0,1<=d,2<=d,c);if(4===d)return d=b.data,new r(d.thisDep,
d.contextDep,d.propDep,c);if(5===d)return new r(!1,!1,!1,c);if(6===d){for(var f=d=!1,g=!1,a=0;a<b.data.length;++a){var h=b.data[a];1===h.type?g=!0:2===h.type?f=!0:3===h.type?d=!0:0===h.type?(d=!0,h=h.data,1<=h&&(f=!0),2<=h&&(g=!0)):4===h.type&&(d=d||h.data.thisDep,f=f||h.data.contextDep,g=g||h.data.propDep)}return new r(d,f,g,c)}return new r(3===d,2===d,1===d,c)}var y=A("./util/sorted-object-keys"),b=A("./util/check"),v=A("./util/extend"),pa=A("./util/codegen"),ea=A("./util/loop"),G=A("./util/is-typed-array"),
F=A("./util/is-ndarray"),w=A("./util/is-array-like"),B=A("./dynamic"),N=A("./constants/primitives.json"),n=A("./constants/dtypes.json"),H=["x","y","z","w"],ca="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),I={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},be="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),e={never:512,less:513,"<":513,equal:514,"=":514,
"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},g={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},d={frag:35632,vert:35633},z={cw:2304,ccw:2305},U=new r(!1,!1,!1,function(){});R.exports=function(G,q,F,L,fa,a,h,X,ra,xa,jb,ec,na,Na,Y){function K(b){return b.replace(".","_")}function M(b,p,a){var d=K(b);ba.push(b);m[d]=E[d]=!!a;x[d]=p}function P(b,p,a){var d=
K(b);ba.push(b);Array.isArray(a)?(E[d]=a.slice(),m[d]=a.slice()):E[d]=m[d]=a;ja[d]=p}function A(){var a=pa(),p=a.link,d=a.global;a.id=tc++;a.batchId="0";var c=p(ia),x=a.shared={props:"a0"};y(ia).forEach(function(b){x[b]=d.def(c,".",b)});b.optional(function(){a.CHECK=p(b);a.commandStr=b.guessCommand();a.command=p(a.commandStr);a.assert=function(b,a,d){b("if(!(",a,"))",this.CHECK,".commandRaise(",p(d),",",this.command,");")};l.invalidBlendCombinations=be});var f=a.next={},h=a.current={};y(ja).forEach(function(b){Array.isArray(E[b])&&
(f[b]=d.def(x.next,".",b),h[b]=d.def(x.current,".",b))});var g=a.constants={};y(l).forEach(function(b){g[b]=d.def(JSON.stringify(l[b]))});a.invoke=function(b,d){switch(d.type){case 0:var c=["this",x.context,x.props,a.batchId];return b.def(p(d.data),".call(",c.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(x.props,d.data);case 2:return b.def(x.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,b),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(p){return a.invoke(b,
p)})}};a.attribCache={};var Kd={};a.scopeAttrib=function(b){b=q.id(b);if(b in Kd)return Kd[b];var a=xa.scope[b];a||(a=xa.scope[b]=new ka);return Kd[b]=p(a)};return a}function J(b){var p=b["static"];b=b.dynamic;var a;if("profile"in p){var d=!!p.profile;a=f(function(b,p){return d});a.enable=d}else if("profile"in b){var l=b.profile;a=c(l,function(b,p){return b.invoke(p,l)})}return a}function Wb(a,p){var d=a["static"],l=a.dynamic;if("framebuffer"in d){var x=d.framebuffer;return x?(x=X.getFramebuffer(x),
b.command(x,"invalid framebuffer object"),f(function(b,p){var a=b.link(x),d=b.shared;p.set(d.framebuffer,".next",a);d=d.context;p.set(d,".framebufferWidth",a+".width");p.set(d,".framebufferHeight",a+".height");return a})):f(function(b,p){var a=b.shared;p.set(a.framebuffer,".next","null");a=a.context;p.set(a,".framebufferWidth",a+".drawingBufferWidth");p.set(a,".framebufferHeight",a+".drawingBufferHeight");return"null"})}if("framebuffer"in l){var h=l.framebuffer;return c(h,function(a,p){var d=a.invoke(p,
h),c=a.shared,l=c.framebuffer,aa=p.def(l,".getFramebuffer(",d,")");b.optional(function(){a.assert(p,"!"+d+"||"+aa,"invalid framebuffer object")});p.set(l,".next",aa);c=c.context;p.set(c,".framebufferWidth",aa+"?"+aa+".width:"+c+".drawingBufferWidth");p.set(c,".framebufferHeight",aa+"?"+aa+".height:"+c+".drawingBufferHeight");return aa})}return null}function $a(a,p,d){function l(a){if(a in x){var aa=x[a];b.commandType(aa,"object","invalid "+a,d.commandStr);var h=!0,od=aa.x|0,g=aa.y|0,q,e;"width"in
aa?(q=aa.width|0,b.command(0<=q,"invalid "+a,d.commandStr)):h=!1;"height"in aa?(e=aa.height|0,b.command(0<=e,"invalid "+a,d.commandStr)):h=!1;return new r(!h&&p&&p.thisDep,!h&&p&&p.contextDep,!h&&p&&p.propDep,function(b,a){var p=b.shared.context,d=q;"width"in aa||(d=a.def(p,".","framebufferWidth","-",od));var c=e;"height"in aa||(c=a.def(p,".","framebufferHeight","-",g));return[od,g,d,c]})}if(a in f){var m=f[a],h=c(m,function(p,d){var c=p.invoke(d,m);b.optional(function(){p.assert(d,c+"&&typeof "+
c+'==="object"',"invalid "+a)});var l=p.shared.context,aa=d.def(c,".x|0"),x=d.def(c,".y|0"),f=d.def('"width" in ',c,"?",c,".width|0:","(",l,".","framebufferWidth","-",aa,")"),h=d.def('"height" in ',c,"?",c,".height|0:","(",l,".","framebufferHeight","-",x,")");b.optional(function(){p.assert(d,f+">=0&&"+h+">=0","invalid "+a)});return[aa,x,f,h]});p&&(h.thisDep=h.thisDep||p.thisDep,h.contextDep=h.contextDep||p.contextDep,h.propDep=h.propDep||p.propDep);return h}return p?new r(p.thisDep,p.contextDep,p.propDep,
function(b,a){var p=b.shared.context;return[0,0,a.def(p,".","framebufferWidth"),a.def(p,".","framebufferHeight")]}):null}var x=a["static"],f=a.dynamic;if(a=l("viewport")){var h=a;a=new r(a.thisDep,a.contextDep,a.propDep,function(b,a){var p=h.append(b,a),d=b.shared.context;a.set(d,".viewportWidth",p[2]);a.set(d,".viewportHeight",p[3]);return p})}return{viewport:a,scissor_box:l("scissor.box")}}function Q(a,p){var d=a["static"];if("string"===typeof d.frag&&"string"===typeof d.vert){if(0<y(p.dynamic).length)return null;
var d=p["static"],c=y(d);if(0<c.length&&"number"===typeof d[c[0]]){for(var l=[],x=0;x<c.length;++x)b("number"===typeof d[c[x]],"must specify all vertex attribute locations when using vaos"),l.push([d[c[x]]|0,c[x]]);return l}}return null}function t(a,p,l){function x(a){if(a in h){var p=q.id(h[a]);b.optional(function(){jb.shader(d[a],p,b.guessCommand())});var l=f(function(){return p});l.id=p;return l}if(a in g){var aa=g[a];return c(aa,function(p,c){var l=p.invoke(c,aa),x=c.def(p.shared.strings,".id(",
l,")");b.optional(function(){c(p.shared.shader,".shader(",d[a],",",x,",",p.command,");")});return x})}return null}var h=a["static"],g=a.dynamic,e=x("frag"),m=x("vert"),Kd=null;O(e)&&O(m)?(Kd=jb.program(m.id,e.id,null,l),a=f(function(b,a){return b.link(Kd)})):a=new r(e&&e.thisDep||m&&m.thisDep,e&&e.contextDep||m&&m.contextDep,e&&e.propDep||m&&m.propDep,function(a,p){var d=a.shared.shader,c;c=e?e.append(a,p):p.def(d,".","frag");var l;l=m?m.append(a,p):p.def(d,".","vert");var x=d+".program("+l+","+c;
b.optional(function(){x+=","+a.command});return p.def(x+")")});return{frag:e,vert:m,progVar:a,program:Kd}}function ma(d,p){function l(a,d){if(a in x){var aa=x[a]|0;d?g.offset=aa:g.instances=aa;b.command(!d||0<=aa,"invalid "+a,p.commandStr);return f(function(b,a){d&&(b.OFFSET=aa);return aa})}if(a in h){var od=h[a];return c(od,function(p,c){var l=p.invoke(c,od);d&&(p.OFFSET=l,b.optional(function(){p.assert(c,l+">=0","invalid "+a)}));return l})}if(d){if(Kd)return f(function(b,a){return b.OFFSET=0});
if(q)return new r(e.thisDep,e.contextDep,e.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(q)return new r(e.thisDep,e.contextDep,e.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var x=d["static"],h=d.dynamic,g={},q=!1,e=function(){if("vao"in x){var b=x.vao;null!==b&&null===xa.getVAO(b)&&(b=xa.createVAO(b));q=!0;g.vao=b;return f(function(a){var p=xa.getVAO(b);return p?
a.link(p):"null"})}if("vao"in h){q=!0;var a=h.vao;return c(a,function(b,p){var d=b.invoke(p,a);return p.def(b.shared.vao+".getVAO("+d+")")})}return null}(),Kd=!1,m=function(){if("elements"in x){var d=x.elements;g.elements=d;if(k(d)){var l=g.elements=a.create(d,!0),d=a.getElements(l);Kd=!0}else d&&(d=a.getElements(d),Kd=!0,b.command(d,"invalid elements",p.commandStr));l=f(function(b,a){if(d){var p=b.link(d);return b.ELEMENTS=p}return b.ELEMENTS=null});l.value=d;return l}if("elements"in h){Kd=!0;var aa=
h.elements;return c(aa,function(a,p){var d=a.shared,c=d.isBufferArgs,d=d.elements,l=a.invoke(p,aa),x=p.def("null"),c=p.def(c,"(",l,")"),h=a.cond(c).then(x,"=",d,".createStream(",l,");")["else"](x,"=",d,".getElements(",l,");");b.optional(function(){a.assert(h["else"],"!"+l+"||"+x,"invalid elements")});p.entry(h);p.exit(a.cond(c).then(d,".destroyStream(",x,");"));return a.ELEMENTS=x})}return q?new r(e.thisDep,e.contextDep,e.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.elements+
".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),od=l("offset",!0),t=function(){if("primitive"in x){var a=x.primitive;g.primitive=a;b.commandParameter(a,N,"invalid primitve",p.commandStr);return f(function(b,p){return N[a]})}if("primitive"in h){var d=h.primitive;return c(d,function(a,p){var c=a.constants.primTypes,l=a.invoke(p,d);b.optional(function(){a.assert(p,l+" in "+c,"invalid primitive, must be one of "+y(N))});return p.def(c,"[",l,"]")})}return Kd?O(m)?m.value?f(function(b,
a){return a.def(b.ELEMENTS,".primType")}):f(function(){return 4}):new r(m.thisDep,m.contextDep,m.propDep,function(b,a){var p=b.ELEMENTS;return a.def(p,"?",p,".primType:",4)}):q?new r(e.thisDep,e.contextDep,e.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),n=function(){if("count"in x){var a=x.count|0;g.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",p.commandStr);return f(function(){return a})}if("count"in h){var d=
h.count;return c(d,function(a,p){var c=a.invoke(p,d);b.optional(function(){a.assert(p,"typeof "+c+'==="number"&&'+c+">=0&&"+c+"===("+c+"|0)","invalid vertex count")});return c})}if(Kd){if(O(m)){if(m)return od?new r(od.thisDep,od.contextDep,od.propDep,function(a,p){var d=p.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(p,d+">=0","invalid vertex offset/element buffer too small")});return d}):f(function(b,a){return a.def(b.ELEMENTS,".vertCount")});var l=f(function(){return-1});
b.optional(function(){l.MISSING=!0});return l}var aa=new r(m.thisDep||od.thisDep,m.contextDep||od.contextDep,m.propDep||od.propDep,function(b,a){var p=b.ELEMENTS;return b.OFFSET?a.def(p,"?",p,".vertCount-",b.OFFSET,":-1"):a.def(p,"?",p,".vertCount:-1")});b.optional(function(){aa.DYNAMIC=!0});return aa}return q?new r(e.thisDep,e.contextDep,e.propDep,function(b,a){return a.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),ia=l("instances",!1);return{elements:m,primitive:t,
count:n,instances:ia,offset:od,vao:e,vaoActive:q,elementsActive:Kd,"static":g}}function da(a,p){var d=a["static"],l=a.dynamic,x={};ba.forEach(function(a){function aa(b,p){if(a in d){var g=b(d[a]);x[h]=f(function(){return g})}else if(a in l){var e=l[a];x[h]=c(e,function(b,a){return p(b,a,b.invoke(a,e))})}}var h=K(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return aa(function(d){b.commandType(d,
"boolean",a,p.commandStr);return d},function(p,d,c){b.optional(function(){p.assert(d,"typeof "+c+'==="boolean"',"invalid flag "+a,p.commandStr)});return c});case "depth.func":return aa(function(d){b.commandParameter(d,e,"invalid "+a,p.commandStr);return e[d]},function(p,d,c){var l=p.constants.compareFuncs;b.optional(function(){p.assert(d,c+" in "+l,"invalid "+a+", must be one of "+y(e))});return d.def(l,"[",c,"]")});case "depth.range":return aa(function(a){b.command(w(a)&&2===a.length&&"number"===
typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",p.commandStr);return a},function(a,p,d){b.optional(function(){a.assert(p,a.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var c=p.def("+",d,"[0]"),l=p.def("+",d,"[1]");return[c,l]});case "blend.func":return aa(function(a){b.commandType(a,"object","blend.func",p.commandStr);var d="srcRGB"in a?a.srcRGB:a.src,c="srcAlpha"in
a?a.srcAlpha:a.src,l="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(d,I,h+".srcRGB",p.commandStr);b.commandParameter(c,I,h+".srcAlpha",p.commandStr);b.commandParameter(l,I,h+".dstRGB",p.commandStr);b.commandParameter(a,I,h+".dstAlpha",p.commandStr);b.command(-1===be.indexOf(d+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+l+")",p.commandStr);return[I[d],I[l],I[c],I[a]]},function(p,d,c){function l(aa,h){var f=d.def('"',aa,h,'" in ',c,"?",c,".",
aa,h,":",c,".",aa);b.optional(function(){p.assert(d,f+" in "+x,"invalid "+a+"."+aa+h+", must be one of "+y(I))});return f}var x=p.constants.blendFuncs;b.optional(function(){p.assert(d,c+"&&typeof "+c+'==="object"',"invalid blend func, must be an object")});var aa=l("src","RGB"),h=l("dst","RGB");b.optional(function(){p.assert(d,p.constants.invalidBlendCombinations+".indexOf("+aa+'+", "+'+h+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=d.def(x,"[",aa,"]"),g=d.def(x,"[",
l("src","Alpha"),"]"),e=d.def(x,"[",h,"]"),q=d.def(x,"[",l("dst","Alpha"),"]");return[f,e,g,q]});case "blend.equation":return aa(function(d){if("string"===typeof d)return b.commandParameter(d,ua,"invalid "+a,p.commandStr),[ua[d],ua[d]];if("object"===typeof d)return b.commandParameter(d.rgb,ua,a+".rgb",p.commandStr),b.commandParameter(d.alpha,ua,a+".alpha",p.commandStr),[ua[d.rgb],ua[d.alpha]];b.commandRaise("invalid blend.equation",p.commandStr)},function(p,d,c){var l=p.constants.blendEquations,x=
d.def(),aa=d.def(),h=p.cond("typeof ",c,'==="string"');b.optional(function(){function b(a,d,c){p.assert(a,c+" in "+l,"invalid "+d+", must be one of "+y(ua))}b(h.then,a,c);p.assert(h["else"],c+"&&typeof "+c+'==="object"',"invalid "+a);b(h["else"],a+".rgb",c+".rgb");b(h["else"],a+".alpha",c+".alpha")});h.then(x,"=",aa,"=",l,"[",c,"];");h["else"](x,"=",l,"[",c,".rgb];",aa,"=",l,"[",c,".alpha];");d(h);return[x,aa]});case "blend.color":return aa(function(a){b.command(w(a)&&4===a.length,"blend.color must be a 4d array",
p.commandStr);return ea(4,function(b){return+a[b]})},function(a,p,d){b.optional(function(){a.assert(p,a.shared.isArrayLike+"("+d+")&&"+d+".length===4","blend.color must be a 4d array")});return ea(4,function(a){return p.def("+",d,"[",a,"]")})});case "stencil.mask":return aa(function(a){b.commandType(a,"number",h,p.commandStr);return a|0},function(a,p,d){b.optional(function(){a.assert(p,"typeof "+d+'==="number"',"invalid stencil.mask")});return p.def(d,"|0")});case "stencil.func":return aa(function(d){b.commandType(d,
"object",h,p.commandStr);var c=d.cmp||"keep",l=d.ref||0;d="mask"in d?d.mask:-1;b.commandParameter(c,e,a+".cmp",p.commandStr);b.commandType(l,"number",a+".ref",p.commandStr);b.commandType(d,"number",a+".mask",p.commandStr);return[e[c],l,d]},function(a,p,d){var c=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(p,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(d+"&&typeof ",d,'==="object"');b('!("cmp" in ',d,")||(",d,".cmp in ",c,")")});var l=p.def('"cmp" in ',
d,"?",c,"[",d,".cmp]",":",7680),x=p.def(d,".ref|0"),aa=p.def('"mask" in ',d,"?",d,".mask|0:-1");return[l,x,aa]});case "stencil.opFront":case "stencil.opBack":return aa(function(d){b.commandType(d,"object",h,p.commandStr);var c=d.fail||"keep",l=d.zfail||"keep";d=d.zpass||"keep";b.commandParameter(c,g,a+".fail",p.commandStr);b.commandParameter(l,g,a+".zfail",p.commandStr);b.commandParameter(d,g,a+".zpass",p.commandStr);return["stencil.opBack"===a?1029:1028,g[c],g[l],g[d]]},function(d,p,c){function l(aa){b.optional(function(){d.assert(p,
'!("'+aa+'" in '+c+")||("+c+"."+aa+" in "+x+")","invalid "+a+"."+aa+", must be one of "+y(g))});return p.def('"',aa,'" in ',c,"?",x,"[",c,".",aa,"]:",7680)}var x=d.constants.stencilOps;b.optional(function(){d.assert(p,c+"&&typeof "+c+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return aa(function(a){b.commandType(a,"object",h,p.commandStr);var d=a.factor|0;a=a.units|0;b.commandType(d,"number",h+".factor",p.commandStr);
b.commandType(a,"number",h+".units",p.commandStr);return[d,a]},function(d,p,c){b.optional(function(){d.assert(p,c+"&&typeof "+c+'==="object"',"invalid "+a)});var l=p.def(c,".factor|0"),x=p.def(c,".units|0");return[l,x]});case "cull.face":return aa(function(a){var d=0;"front"===a?d=1028:"back"===a&&(d=1029);b.command(!!d,h,p.commandStr);return d},function(a,d,p){b.optional(function(){a.assert(d,p+'==="front"||'+p+'==="back"',"invalid cull.face")});return d.def(p,'==="front"?',1028,":",1029)});case "lineWidth":return aa(function(a){b.command("number"===
typeof a&&a>=L.lineWidthDims[0]&&a<=L.lineWidthDims[1],"invalid line width, must be a positive number between "+L.lineWidthDims[0]+" and "+L.lineWidthDims[1],p.commandStr);return a},function(a,d,p){b.optional(function(){a.assert(d,"typeof "+p+'==="number"&&'+p+">="+L.lineWidthDims[0]+"&&"+p+"<="+L.lineWidthDims[1],"invalid line width")});return p});case "frontFace":return aa(function(a){b.commandParameter(a,z,h,p.commandStr);return z[a]},function(a,d,p){b.optional(function(){a.assert(d,p+'==="cw"||'+
p+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(p+'==="cw"?2304:2305')});case "colorMask":return aa(function(a){b.command(w(a)&&4===a.length,"color.mask must be length 4 array",p.commandStr);return a.map(function(a){return!!a})},function(a,d,p){b.optional(function(){a.assert(d,a.shared.isArrayLike+"("+p+")&&"+p+".length===4","invalid color.mask")});return ea(4,function(a){return"!!"+p+"["+a+"]"})});case "sample.coverage":return aa(function(a){b.command("object"===typeof a&&
a,h,p.commandStr);var d="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",p.commandStr);return[d,a]},function(a,d,p){b.optional(function(){a.assert(d,p+"&&typeof "+p+'==="object"',"invalid sample.coverage")});var c=d.def('"value" in ',p,"?+",p,".value:1"),l=d.def("!!",p,".invert");return[c,l]})}});return x}function Fa(a,d){var l=a["static"],x=a.dynamic,h={};y(l).forEach(function(a){var c=l[a],x;if("number"===typeof c||
"boolean"===typeof c)x=f(function(){return c});else if("function"===typeof c){var aa=c._reglType;"texture2d"===aa||"textureCube"===aa?x=f(function(a){return a.link(c)}):"framebuffer"===aa||"framebufferCube"===aa?(b.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',d.commandStr),x=f(function(a){return a.link(c.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',d.commandStr)}else w(c)?x=f(function(d){return d.global.def("[",ea(c.length,function(p){b.command("number"===
typeof c[p]||"boolean"===typeof c[p],"invalid uniform "+a,d.commandStr);return c[p]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',d.commandStr);x.value=c;h[a]=x});y(x).forEach(function(a){var b=x[a];h[a]=c(b,function(a,d){return a.invoke(d,b)})});return h}function Oa(a,d){var l=a["static"],x=a.dynamic,h={};y(l).forEach(function(a){var c=l[a],x=q.id(a),aa=new ka;if(k(c))aa.state=1,aa.buffer=fa.getBuffer(fa.create(c,34962,!1,!0)),aa.type=0;else{var g=fa.getBuffer(c);if(g)aa.state=
1,aa.buffer=g,aa.type=0;else if(b.command("object"===typeof c&&c,"invalid data for attribute "+a,d.commandStr),"constant"in c){var e=c.constant;aa.buffer="null";aa.state=2;"number"===typeof e?aa.x=e:(b.command(w(e)&&0<e.length&&4>=e.length,"invalid constant for attribute "+a,d.commandStr),H.forEach(function(a,b){b<e.length&&(aa[a]=e[b])}))}else{g=k(c.buffer)?fa.getBuffer(fa.create(c.buffer,34962,!1,!0)):fa.getBuffer(c.buffer);b.command(!!g,'missing buffer for attribute "'+a+'"',d.commandStr);var m=
c.offset|0;b.command(0<=m,'invalid offset for attribute "'+a+'"',d.commandStr);var t=c.stride|0;b.command(0<=t&&256>t,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',d.commandStr);var ia=c.size|0;b.command(!("size"in c)||0<ia&&4>=ia,'invalid size for attribute "'+a+'", must be 1,2,3,4',d.commandStr);var u=!!c.normalized,ja=0;"type"in c&&(b.commandParameter(c.type,n,"invalid type for attribute "+a,d.commandStr),ja=n[c.type]);var z=c.divisor|0;b.optional(function(){"divisor"in
c&&(b.command(0===z||T,'cannot specify divisor for attribute "'+a+'", instancing not supported',d.commandStr),b.command(0<=z,'invalid divisor for attribute "'+a+'"',d.commandStr));var l=d.commandStr,x="buffer offset divisor normalized type size stride".split(" ");y(c).forEach(function(d){b.command(0<=x.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+a+'" (valid parameters are '+x+")",l)})});aa.buffer=g;aa.state=1;aa.size=ia;aa.normalized=u;aa.type=ja||g.dtype;aa.offset=m;aa.stride=
t;aa.divisor=z}}h[a]=f(function(a,b){var d=a.attribCache;if(x in d)return d[x];var p={isStream:!1};y(aa).forEach(function(a){p[a]=aa[a]});aa.buffer&&(p.buffer=a.link(aa.buffer),p.type=p.type||p.buffer+".dtype");return d[x]=p})});y(x).forEach(function(a){var d=x[a];h[a]=c(d,function(p,c){function l(a){c(e[a],"=",x,".",a,"|0;")}var x=p.invoke(c,d),aa=p.shared,h=p.constants,f=aa.isBufferArgs,g=aa.buffer;b.optional(function(){p.assert(c,x+"&&(typeof "+x+'==="object"||typeof '+x+'==="function")&&('+f+
"("+x+")||"+g+".getBuffer("+x+")||"+g+".getBuffer("+x+".buffer)||"+f+"("+x+'.buffer)||("constant" in '+x+"&&(typeof "+x+'.constant==="number"||'+aa.isArrayLike+"("+x+".constant))))",'invalid dynamic attribute "'+a+'"')});var e={isStream:c.def(!1)},q=new ka;q.state=1;y(q).forEach(function(a){e[a]=c.def(""+q[a])});var m=e.buffer,Db=e.type;c("if(",f,"(",x,")){",e.isStream,"=true;",m,"=",g,".createStream(",34962,",",x,");",Db,"=",m,".dtype;","}else{",m,"=",g,".getBuffer(",x,");","if(",m,"){",Db,"=",m,
".dtype;",'}else if("constant" in ',x,"){",e.state,"=",2,";","if(typeof "+x+'.constant === "number"){',e[H[0]],"=",x,".constant;",H.slice(1).map(function(a){return e[a]}).join("="),"=0;","}else{",H.map(function(a,b){return e[a]+"="+x+".constant.length>"+b+"?"+x+".constant["+b+"]:0;"}).join(""),"}}else{","if(",f,"(",x,".buffer)){",m,"=",g,".createStream(",34962,",",x,".buffer);","}else{",m,"=",g,".getBuffer(",x,".buffer);","}",Db,'="type" in ',x,"?",h.glTypes,"[",x,".type]:",m,".dtype;",e.normalized,
"=!!",x,".normalized;");l("size");l("offset");l("stride");l("divisor");c("}}");c.exit("if(",e.isStream,"){",g,".destroyStream(",m,");","}");return e})});return h}function R(a){var b=a["static"],d=a.dynamic,l={};y(b).forEach(function(a){var d=b[a];l[a]=f(function(a,b){return"number"===typeof d||"boolean"===typeof d?""+d:a.link(d)})});y(d).forEach(function(a){var b=d[a];l[a]=c(b,function(a,d){return a.invoke(d,b)})});return l}function Ia(a,d,c,l,x){function h(a){var d=q[a];d&&(n[a]=d)}var f=a["static"],
g=a.dynamic;b.optional(function(){function a(p){y(p).forEach(function(a){b.command(0<=d.indexOf(a),'unknown parameter "'+a+'"',x.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ba);a(f);a(g)});var e=Q(a,d),m=Wb(a,x),q=$a(a,m,x),ia=ma(a,x),n=da(a,x),u=t(a,x,e);h("viewport");h(K("scissor.box"));var z=0<y(n).length,m={framebuffer:m,draw:ia,shader:u,state:n,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=J(a,x);
m.uniforms=Fa(c,x);m.drawVAO=m.scopeVAO=ia.vao;if(!m.drawVAO&&u.program&&!e&&F.angle_instanced_arrays&&ia["static"].elements){var ja=!0;a=u.program.attributes.map(function(a){a=d["static"][a];ja=ja&&!!a;return a});if(ja&&0<a.length){var C=xa.getVAO(xa.createVAO({attributes:a,elements:ia["static"].elements}));m.drawVAO=new r(null,null,null,function(a,d){return a.link(C)});m.useVAO=!0}}e?m.useVAO=!0:m.attributes=Oa(d,x);m.context=R(l,x);return m}function S(a,d,b){var c=a.shared.context,l=a.scope();
y(b).forEach(function(x){d.save(c,"."+x);var h=b[x].append(a,d);Array.isArray(h)?l(c,".",x,"=[",h.join(),"];"):l(c,".",x,"=",h,";")});d(l)}function ob(a,d,b,c){var l=a.shared,x=l.gl,h=l.framebuffer,f;ha&&(f=d.def(l.extensions,".webgl_draw_buffers"));var g=a.constants,l=g.drawBuffer,g=g.backBuffer;a=b?b.append(a,d):d.def(h,".next");c||d("if(",a,"!==",h,".cur){");d("if(",a,"){",x,".bindFramebuffer(",36160,",",a,".framebuffer);");ha&&d(f,".drawBuffersWEBGL(",l,"[",a,".colorAttachments.length]);");d("}else{",
x,".bindFramebuffer(",36160,",null);");ha&&d(f,".drawBuffersWEBGL(",g,");");d("}",h,".cur=",a,";");c||d("}")}function ga(a,d,b){var c=a.shared,l=c.gl,h=a.current,f=a.next,g=c.current,e=c.next,m=a.cond(g,".dirty");ba.forEach(function(d){d=K(d);if(!(d in b.state)){var p,c;if(d in f){p=f[d];c=h[d];var q=ea(E[d].length,function(a){return m.def(p,"[",a,"]")});m(a.cond(q.map(function(a,d){return a+"!=="+c+"["+d+"]"}).join("||")).then(l,".",ja[d],"(",q,");",q.map(function(a,d){return c+"["+d+"]="+a}).join(";"),
";"))}else p=m.def(e,".",d),q=a.cond(p,"!==",g,".",d),m(q),d in x?q(a.cond(p).then(l,".enable(",x[d],");")["else"](l,".disable(",x[d],");"),g,".",d,"=",p,";"):q(l,".",ja[d],"(",p,");",g,".",d,"=",p,";")}});0===y(b.state).length&&m(g,".dirty=false;");d(m)}function ta(a,d,b,c){var l=a.shared,h=a.current,f=l.current,g=l.gl;Z(y(b)).forEach(function(l){var e=b[l];if(!c||c(e)){var m=e.append(a,d);if(x[l]){var q=x[l];O(e)?m?d(g,".enable(",q,");"):d(g,".disable(",q,");"):d(a.cond(m).then(g,".enable(",q,");")["else"](g,
".disable(",q,");"));d(f,".",l,"=",m,";")}else if(w(m)){var t=h[l];d(g,".",ja[l],"(",m,");",m.map(function(a,d){return t+"["+d+"]="+a}).join(";"),";")}else d(g,".",ja[l],"(",m,");",f,".",l,"=",m,";")}})}function cc(a,d){T&&(a.instancing=d.def(a.shared.extensions,".angle_instanced_arrays"))}function nc(a,d,b,c,l){function x(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function h(a){ia=d.def();a(ia,"=",x(),";");"string"===typeof l?a(m,".count+=",l,";"):a(m,".count++;");
Na&&(c?(n=d.def(),a(n,"=",t,".getNumPendingQueries();")):a(t,".beginQuery(",m,");"))}function f(a){a(m,".cpuTime+=",x(),"-",ia,";");Na&&(c?a(t,".pushScopeStats(",n,",",t,".getNumPendingQueries(),",m,");"):a(t,".endQuery();"))}function g(a){var b=d.def(q,".profile");d(q,".profile=",a,";");d.exit(q,".profile=",b,";")}var e=a.shared,m=a.stats,q=e.current,t=e.timer;b=b.profile;var ia,n;if(b){if(O(b)){b.enable?(h(d),f(d.exit),g("true")):g("false");return}b=b.append(a,d);g(b)}else b=d.def(q,".profile");
e=a.block();h(e);d("if(",b,"){",e,"}");a=a.block();f(a);d.exit("if(",b,"){",a,"}")}function kc(a,d,c,l,x){function h(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function f(b,c,l){function x(){d("if(!",q,".buffer){",e,".enableVertexAttribArray(",m,");}");var b=l.type,h;h=l.size?d.def(l.size,"||",c):c;d("if(",q,".type!==",b,"||",q,".size!==",h,"||",n.map(function(a){return q+"."+a+"!=="+
l[a]}).join("||"),"){",e,".bindBuffer(",34962,",",t,".buffer);",e,".vertexAttribPointer(",[m,h,b,l.normalized,l.stride,l.offset],");",q,".type=",b,";",q,".size=",h,";",n.map(function(a){return q+"."+a+"="+l[a]+";"}).join(""),"}");T&&(b=l.divisor,d("if(",q,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,b],");",q,".divisor=",b,";}"))}function h(){d("if(",q,".buffer){",e,".disableVertexAttribArray(",m,");",q,".buffer=null;","}if(",H.map(function(a,d){return q+"."+a+"!=="+ia[d]}).join("||"),
"){",e,".vertexAttrib4f(",m,",",ia,");",H.map(function(a,d){return q+"."+a+"="+ia[d]+";"}).join(""),"}")}var e=g.gl,m=d.def(b,".location"),q=d.def(g.attributes,"[",m,"]");b=l.state;var t=l.buffer,ia=[l.x,l.y,l.z,l.w],n=["buffer","normalized","offset","stride"];1===b?x():2===b?h():(d("if(",b,"===",1,"){"),x(),d("}else{"),h(),d("}"))}var g=a.shared;l.forEach(function(l){var g=l.name,e=c.attributes[g],m;if(e){if(!x(e))return;m=e.append(a,d)}else{if(!x(U))return;var q=a.scopeAttrib(g);b.optional(function(){a.assert(d,
q+".state","missing attribute "+g)});m={};y(new ka).forEach(function(a){m[a]=d.def(q,".",a)})}f(a.link(l),h(l.info.type),m)})}function ud(a,d,c,l,x,h){for(var f=a.shared,g=f.gl,e,m=0;m<l.length;++m){var t=l[m],ia=t.name,n=t.info.type,u=c.uniforms[ia],t=a.link(t)+".location",ja;if(u){if(!x(u))continue;if(O(u)){var z=u.value;b.command(null!==z&&"undefined"!==typeof z,'missing uniform "'+ia+'"',a.commandStr);if(35678===n||35680===n)b.command("function"===typeof z&&(35678===n&&("texture2d"===z._reglType||
"framebuffer"===z._reglType)||35680===n&&("textureCube"===z._reglType||"framebufferCube"===z._reglType)),"invalid texture for uniform "+ia,a.commandStr),u=a.link(z._texture||z.color[0]._texture),d(g,".uniform1i(",t,",",u+".bind());"),d.exit(u,".unbind();");else if(35674===n||35675===n||35676===n){b.optional(function(){b.command(w(z),"invalid matrix for uniform "+ia,a.commandStr);b.command(35674===n&&4===z.length||35675===n&&9===z.length||35676===n&&16===z.length,"invalid length for matrix uniform "+
ia,a.commandStr)});var u=a.global.def("new Float32Array(["+Array.prototype.slice.call(z)+"])"),C=2;35675===n?C=3:35676===n&&(C=4);d(g,".uniformMatrix",C,"fv(",t,",false,",u,");")}else{switch(n){case 5126:b.commandType(z,"number","uniform "+ia,a.commandStr);e="1f";break;case 35664:b.command(w(z)&&2===z.length,"uniform "+ia,a.commandStr);e="2f";break;case 35665:b.command(w(z)&&3===z.length,"uniform "+ia,a.commandStr);e="3f";break;case 35666:b.command(w(z)&&4===z.length,"uniform "+ia,a.commandStr);e=
"4f";break;case 35670:b.commandType(z,"boolean","uniform "+ia,a.commandStr);e="1i";break;case 5124:b.commandType(z,"number","uniform "+ia,a.commandStr);e="1i";break;case 35671:b.command(w(z)&&2===z.length,"uniform "+ia,a.commandStr);e="2i";break;case 35667:b.command(w(z)&&2===z.length,"uniform "+ia,a.commandStr);e="2i";break;case 35672:b.command(w(z)&&3===z.length,"uniform "+ia,a.commandStr);e="3i";break;case 35668:b.command(w(z)&&3===z.length,"uniform "+ia,a.commandStr);e="3i";break;case 35673:b.command(w(z)&&
4===z.length,"uniform "+ia,a.commandStr);e="4i";break;case 35669:b.command(w(z)&&4===z.length,"uniform "+ia,a.commandStr),e="4i"}d(g,".uniform",e,"(",t,",",w(z)?Array.prototype.slice.call(z):z,");")}continue}else ja=u.append(a,d)}else{if(!x(U))continue;ja=d.def(f.uniforms,"[",q.id(ia),"]")}35678===n?(b(!Array.isArray(ja),"must specify a scalar prop for textures"),d("if(",ja,"&&",ja,'._reglType==="framebuffer"){',ja,"=",ja,".color[0];","}")):35680===n&&(b(!Array.isArray(ja),"must specify a scalar prop for cube maps"),
d("if(",ja,"&&",ja,'._reglType==="framebufferCube"){',ja,"=",ja,".color[0];","}"));b.optional(function(){function c(b,l){a.assert(d,b,'bad data or missing for uniform "'+ia+'".  '+l)}function l(a){b(!Array.isArray(ja),"must not specify an array type for uniform");c("typeof "+ja+'==="'+a+'"',"invalid type, expected "+a)}function x(d,l){Array.isArray(ja)?b(ja.length===d,"must have length "+d):c(f.isArrayLike+"("+ja+")&&"+ja+".length==="+d,"invalid vector, should have length "+d,a.commandStr)}function h(d){b(!Array.isArray(ja),
"must not specify a value type");c("typeof "+ja+'==="function"&&'+ja+'._reglType==="texture'+(3553===d?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(n){case 5124:l("number");break;case 35667:x(2,"number");break;case 35668:x(3,"number");break;case 35669:x(4,"number");break;case 5126:l("number");break;case 35664:x(2,"number");break;case 35665:x(3,"number");break;case 35666:x(4,"number");break;case 35670:l("boolean");break;case 35671:x(2,"boolean");break;case 35672:x(3,"boolean");break;
case 35673:x(4,"boolean");break;case 35674:x(4,"number");break;case 35675:x(9,"number");break;case 35676:x(16,"number");break;case 35678:h(3553);break;case 35680:h(34067)}});u=1;switch(n){case 35678:case 35680:u=d.def(ja,"._texture");d(g,".uniform1i(",t,",",u,".bind());");d.exit(u,".unbind();");continue;case 5124:case 35670:e="1i";break;case 35667:case 35671:e="2i";u=2;break;case 35668:case 35672:e="3i";u=3;break;case 35669:case 35673:e="4i";u=4;break;case 5126:e="1f";break;case 35664:e="2f";u=2;
break;case 35665:e="3f";u=3;break;case 35666:e="4f";u=4;break;case 35674:e="Matrix2fv";break;case 35675:e="Matrix3fv";break;case 35676:e="Matrix4fv"}if("M"===e.charAt(0)){d(g,".uniform",e,"(",t,",");var t=Math.pow(n-35674+2,2),X=a.global.def("new Float32Array(",t,")");Array.isArray(ja)?d("false,(",ea(t,function(a){return X+"["+a+"]="+ja[a]}),",",X,")"):d("false,(Array.isArray(",ja,")||",ja," instanceof Float32Array)?",ja,":(",ea(t,function(a){return X+"["+a+"]="+ja+"["+a+"]"}),",",X,")");d(");")}else{if(1<
u){for(var C=[],y=[],k=0;k<u;++k)Array.isArray(ja)?y.push(ja[k]):y.push(d.def(ja+"["+k+"]")),h&&C.push(d.def());h&&d("if(!",a.batchId,"||",C.map(function(a,d){return a+"!=="+y[d]}).join("||"),"){",C.map(function(a,d){return a+"="+y[d]+";"}).join(""));d(g,".uniform",e,"(",t,",",y.join(","),");")}else b(!Array.isArray(ja),"uniform value must not be an array"),h&&(u=d.def(),d("if(!",a.batchId,"||",u,"!==",ja,"){",u,"=",ja,";")),d(g,".uniform",e,"(",t,",",ja,");");h&&d("}")}}}function yc(a,d,c,l){function x(b){var h=
q[b];return h?h.contextDep&&l.contextDynamic||h.propDep?h.append(a,c):h.append(a,d):d.def(m,".",b)}function h(){function a(){c(ja,".drawElementsInstancedANGLE(",[t,u,C,n+"<<(("+C+"-5121)>>1)",z],");")}function d(){c(ja,".drawArraysInstancedANGLE(",[t,n,u,z],");")}ia&&"null"!==ia?y?a():(c("if(",ia,"){"),a(),c("}else{"),d(),c("}")):d()}function f(){function a(){c(e+".drawElements("+[t,u,C,n+"<<(("+C+"-5121)>>1)"]+");")}function d(){c(e+".drawArrays("+[t,n,u]+");")}ia&&"null"!==ia?y?a():(c("if(",ia,
"){"),a(),c("}else{"),d(),c("}")):d()}var g=a.shared,e=g.gl,m=g.draw,q=l.draw,ia=function(){var b=q.elements,x=d;if(b){if(b.contextDep&&l.contextDynamic||b.propDep)x=c;b=b.append(a,x);q.elementsActive&&x("if("+b+")"+e+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=x.def(),x(b,"=",m,".","elements",";","if(",b,"){",e,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",g.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+g.vao,".currentVAO.elements);",qa?"":"if("+b+")"+e+".bindBuffer(34963,"+
b+".buffer.buffer);","}");return b}(),t=x("primitive"),n=x("offset"),u=function(){var x=q.count,h,f=d;if(x){if(x.contextDep&&l.contextDynamic||x.propDep)f=c;h=x.append(a,f);b.optional(function(){x.MISSING&&a.assert(d,"false","missing vertex count");x.DYNAMIC&&a.assert(f,h+">=0","missing vertex count")})}else h=f.def(m,".","count"),b.optional(function(){a.assert(f,h+">=0","missing vertex count")});return h}();if("number"===typeof u){if(0===u)return}else c("if(",u,"){"),c.exit("}");var z,ja;T&&(z=x("instances"),
ja=a.instancing);var C=ia+".type",y=q.elements&&O(q.elements)&&!q.vaoActive;T&&("number"!==typeof z||0<=z)?"string"===typeof z?(c("if(",z,">0){"),h(),c("}else if(",z,"<0){"),f(),c("}")):h():f()}function V(a,d,c,l,x){var h=A();x=h.proc("body",x);b.optional(function(){h.commandStr=d.commandStr;h.command=h.link(d.commandStr)});T&&(h.instancing=x.def(h.shared.extensions,".angle_instanced_arrays"));a(h,x,c,l);return h.compile().body}function C(a,d,b,c){cc(a,d);b.useVAO?b.drawVAO?d(a.shared.vao,".setVAO(",
b.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(d(a.shared.vao,".setVAO(null);"),kc(a,d,b,c.attributes,function(){return!0}));ud(a,d,b,c.uniforms,function(){return!0},!1);yc(a,d,d,b)}function la(a,d){var b=a.proc("draw",1);cc(a,b);S(a,b,d.context);ob(a,b,d.framebuffer);ga(a,b,d);ta(a,b,d.state);nc(a,b,d,!1,!0);var c=d.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",c,".program);");if(d.shader.program)C(a,b,d,d.shader.program);else{b(a.shared.vao,".setVAO(null);");
var l=a.global.def("{}"),x=b.def(c,".id"),h=b.def(l,"[",x,"]");b(a.cond(h).then(h,".call(this,a0);")["else"](h,"=",l,"[",x,"]=",a.link(function(b){return V(C,a,d,b,1)}),"(",c,");",h,".call(this,a0);"))}0<y(d.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function Da(a,d,b,c){function l(){return!0}a.batchId="a1";cc(a,d);kc(a,d,b,c.attributes,l);ud(a,d,b,c.uniforms,l,!1);yc(a,d,d,b)}function ub(a,d,b,c){function l(a){return a.contextDep&&h||a.propDep}
function x(a){return!l(a)}cc(a,d);var h=b.contextDep,f=d.def(),g=d.def();a.shared.props=g;a.batchId=f;var e=a.scope(),m=a.scope();d(e.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",g,"=","a0","[",f,"];",m,"}",e.exit);b.needsContext&&S(a,m,b.context);b.needsFramebuffer&&ob(a,m,b.framebuffer);ta(a,m,b.state,l);b.profile&&l(b.profile)&&nc(a,m,b,!1,!0);c?(b.useVAO?b.drawVAO?l(b.drawVAO)?m(a.shared.vao,".setVAO(",b.drawVAO.append(a,m),");"):e(a.shared.vao,".setVAO(",b.drawVAO.append(a,e),");"):e(a.shared.vao,
".setVAO(",a.shared.vao,".targetVAO);"):(e(a.shared.vao,".setVAO(null);"),kc(a,e,b,c.attributes,x),kc(a,m,b,c.attributes,l)),ud(a,e,b,c.uniforms,x,!1),ud(a,m,b,c.uniforms,l,!0),yc(a,e,m,b)):(d=a.global.def("{}"),c=b.shader.progVar.append(a,m),g=m.def(c,".id"),e=m.def(d,"[",g,"]"),m(a.shared.gl,".useProgram(",c,".program);","if(!",e,"){",e,"=",d,"[",g,"]=",a.link(function(d){return V(Da,a,b,d,2)}),"(",c,");}",e,".call(this,a0[",f,"],",f,");"))}function Qc(a,d){function b(a){return a.contextDep&&l||
a.propDep}var c=a.proc("batch",2);a.batchId="0";cc(a,c);var l=!1,x=!0;y(d.context).forEach(function(a){l=l||d.context[a].propDep});l||(S(a,c,d.context),x=!1);var h=d.framebuffer,f=!1;h?(h.propDep?l=f=!0:h.contextDep&&l&&(f=!0),f||ob(a,c,h)):ob(a,c,null);d.state.viewport&&d.state.viewport.propDep&&(l=!0);ga(a,c,d);ta(a,c,d.state,function(a){return!b(a)});d.profile&&b(d.profile)||nc(a,c,d,!1,"a1");d.contextDep=l;d.needsContext=x;d.needsFramebuffer=f;x=d.shader.progVar;if(x.contextDep&&l||x.propDep)ub(a,
c,d,null);else if(x=x.append(a,c),c(a.shared.gl,".useProgram(",x,".program);"),d.shader.program)ub(a,c,d,d.shader.program);else{c(a.shared.vao,".setVAO(null);");var h=a.global.def("{}"),f=c.def(x,".id"),g=c.def(h,"[",f,"]");c(a.cond(g).then(g,".call(this,a0,a1);")["else"](g,"=",h,"[",f,"]=",a.link(function(b){return V(ub,a,d,b,2)}),"(",x,");",g,".call(this,a0,a1);"))}0<y(d.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Uc(a,d){function b(x){var h=
d.shader[x];h&&c.set(l.shader,"."+x,h.append(a,c))}var c=a.proc("scope",3);a.batchId="a2";var l=a.shared,x=l.current;S(a,c,d.context);d.framebuffer&&d.framebuffer.append(a,c);Z(y(d.state)).forEach(function(b){var x=d.state[b].append(a,c);w(x)?x.forEach(function(d,l){c.set(a.next[b],"["+l+"]",d)}):c.set(l.next,"."+b,x)});nc(a,c,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var x=d.draw[b];x&&c.set(l.draw,"."+b,""+x.append(a,c))});y(d.uniforms).forEach(function(b){var x=
d.uniforms[b].append(a,c);Array.isArray(x)&&(x="["+x.join()+"]");c.set(l.uniforms,"["+q.id(b)+"]",x)});y(d.attributes).forEach(function(b){var l=d.attributes[b].append(a,c),x=a.scopeAttrib(b);y(new ka).forEach(function(a){c.set(x,"."+a,l[a])})});d.scopeVAO&&c.set(l.vao,".targetVAO",d.scopeVAO.append(a,c));b("vert");b("frag");0<y(d.state).length&&(c(x,".dirty=true;"),c.exit(x,".dirty=true;"));c("a1(",a.shared.context,",a0,",a.batchId,");")}function D(a){if("object"===typeof a&&!w(a)){for(var d=y(a),
b=0;b<d.length;++b)if(B.isDynamic(a[d[b]]))return!0;return!1}}function u(a,d,b){function l(a,d){f.forEach(function(b){var c=x[b];B.isDynamic(c)&&(c=a.invoke(d,c),d(q,".",b,"=",c,";"))})}var x=d["static"][b];if(x&&D(x)){var h=a.global,f=y(x),g=!1,e=!1,m=!1,q=a.global.def("{}");f.forEach(function(d){var b=x[d];if(B.isDynamic(b))"function"===typeof b&&(b=x[d]=B.unbox(b)),d=c(b,null),g=g||d.thisDep,m=m||d.propDep,e=e||d.contextDep;else{h(q,".",d,"=");switch(typeof b){case "number":h(b);break;case "string":h('"',
b,'"');break;case "object":Array.isArray(b)&&h("[",b.join(),"]");break;default:h(a.link(b))}h(";")}});d.dynamic[b]=new B.DynamicVariable(4,{thisDep:g,contextDep:e,propDep:m,ref:q,append:l});delete d["static"][b]}}var ka=xa.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};F.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var T=F.angle_instanced_arrays,ha=F.webgl_draw_buffers,qa=F.oes_vertex_array_object,E={dirty:!0,profile:Y.profile},m={},ba=[],x={},ja={};M("dither",3024);M("blend.enable",
3042);P("blend.color","blendColor",[0,0,0,0]);P("blend.equation","blendEquationSeparate",[32774,32774]);P("blend.func","blendFuncSeparate",[1,0,1,0]);M("depth.enable",2929,!0);P("depth.func","depthFunc",513);P("depth.range","depthRange",[0,1]);P("depth.mask","depthMask",!0);P("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);P("cull.face","cullFace",1029);P("frontFace","frontFace",2305);P("lineWidth","lineWidth",1);M("polygonOffset.enable",32823);P("polygonOffset.offset","polygonOffset",
[0,0]);M("sample.alpha",32926);M("sample.enable",32928);P("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",2960);P("stencil.mask","stencilMask",-1);P("stencil.func","stencilFunc",[519,0,-1]);P("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);P("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);P("scissor.box","scissor",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);P("viewport","viewport",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);
var ia={gl:G,context:na,strings:q,next:m,current:E,draw:ec,elements:a,buffer:fa,shader:jb,attributes:xa.state,vao:xa,uniforms:ra,framebuffer:X,extensions:F,timer:Na,isBufferArgs:k},l={primTypes:N,compareFuncs:e,blendFuncs:I,blendEquations:ua,stencilOps:g,glTypes:n,orientationType:z};b.optional(function(){ia.isArrayLike=w});ha&&(l.backBuffer=[1029],l.drawBuffer=ea(L.maxDrawbuffers,function(a){return 0===a?[0]:ea(a,function(a){return 36064+a})}));var tc=0;return{next:m,current:E,procs:function(){var a=
A(),d=a.proc("poll"),b=a.proc("refresh"),c=a.block();d(c);b(c);var l=a.shared,h=l.gl,f=l.next,g=l.current;c(g,".dirty=false;");ob(a,d);ob(a,b,null,!0);var e;T&&(e=a.link(T));F.oes_vertex_array_object&&b(a.link(F.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<L.maxAttributes;++m){var q=b.def(l.attributes,"[",m,"]"),ia=a.cond(q,".buffer");ia.then(h,".enableVertexAttribArray(",m,");",h,".bindBuffer(",34962,",",q,".buffer.buffer);",h,".vertexAttribPointer(",m,",",q,".size,",q,".type,",
q,".normalized,",q,".stride,",q,".offset);")["else"](h,".disableVertexAttribArray(",m,");",h,".vertexAttrib4f(",m,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer=null;");b(ia);T&&b(e,".vertexAttribDivisorANGLE(",m,",",q,".divisor);")}b(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");y(x).forEach(function(l){var e=x[l],m=c.def(f,".",l),q=a.block();q("if(",m,"){",h,".enable(",e,")}else{",h,".disable(",e,")}",g,".",l,"=",m,";");b(q);d("if(",m,"!==",g,".",l,"){",
q,"}")});y(ja).forEach(function(l){var x=ja[l],e=E[l],m,q,ia=a.block();ia(h,".",x,"(");w(e)?(x=e.length,m=a.global.def(f,".",l),q=a.global.def(g,".",l),ia(ea(x,function(a){return m+"["+a+"]"}),");",ea(x,function(a){return q+"["+a+"]="+m+"["+a+"];"}).join("")),d("if(",ea(x,function(a){return m+"["+a+"]!=="+q+"["+a+"]"}).join("||"),"){",ia,"}")):(m=c.def(f,".",l),q=c.def(g,".",l),ia(m,");",g,".",l,"=",m,";"),d("if(",m,"!==",q,"){",ia,"}"));b(ia)});return a.compile()}(),compile:function(a,d,b,c,l){var x=
A();x.stats=x.link(l);y(d["static"]).forEach(function(a){u(x,d,a)});ca.forEach(function(d){u(x,a,d)});var h=Ia(a,d,b,c,x);la(x,h);Uc(x,h);Qc(x,h);return v(x.compile(),{destroy:function(){h.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(A,R,Ib){function k(f,
b){this.id=c++;this.type=f;this.data=b}function Z(c){if(0===c.length)return[];var b=c.charAt(0),f=c.charAt(c.length-1);if(1<c.length&&b===f&&('"'===b||"'"===b))return['"'+c.substr(1,c.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c))return Z(c.substr(0,b.index)).concat(Z(b[1])).concat(Z(c.substr(b.index+b[0].length)));b=c.split(".");if(1===b.length)return['"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];c=[];for(f=0;f<b.length;++f)c=
c.concat(Z(b[f]));return c}function r(c){return"["+Z(c).join("][")+"]"}function O(c,b){if("function"===typeof c)return new k(0,c);if("number"===typeof c||"boolean"===typeof c)return new k(5,c);if(Array.isArray(c))return new k(6,c.map(function(c,f){return O(c,b+"["+f+"]")}));if(c instanceof k)return c;f(!1,"invalid option type in uniform "+b)}var f=A("./util/check"),c=0;R.exports={DynamicVariable:k,define:function(c,b){return new k(c,r(b+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||
c instanceof k},unbox:O,accessor:r}},{"./util/check":21}],10:[function(A,R,Ib){var k=A("./util/check"),Z=A("./util/is-typed-array"),r=A("./util/is-ndarray"),O=A("./util/values"),f=A("./constants/primitives.json"),c=A("./constants/usage.json");R.exports=function(y,b,v,pa){function ea(b){this.id=B++;w[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function G(c,f,n,w,e,g,d){c.buffer.bind();var z;f?((z=d)||Z(f)&&(!r(f)||Z(f.data))||(z=b.oes_element_index_uint?5125:5123),v._initBuffer(c.buffer,
f,n,z,3)):(y.bufferData(34963,g,n),c.buffer.dtype=z||5121,c.buffer.usage=n,c.buffer.dimension=3,c.buffer.byteLength=g);z=d;if(!d){switch(c.buffer.dtype){case 5121:case 5120:z=5121;break;case 5123:case 5122:z=5123;break;case 5125:case 5124:z=5125;break;default:k.raise("unsupported type for element array")}c.buffer.dtype=z}c.type=z;k(5125!==z||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=e;0>f&&(f=c.buffer.byteLength,5123===z?f>>=1:5125===
z&&(f>>=2));c.vertCount=f;f=w;0>w&&(f=4,w=c.buffer.dimension,1===w&&(f=0),2===w&&(f=1),3===w&&(f=4));c.primType=f}function F(b){pa.elementsCount--;k(null!==b.buffer,"must not double destroy elements");delete w[b.id];b.buffer.destroy();b.buffer=null}var w={},B=0,N={uint8:5121,uint16:5123};b.oes_element_index_uint&&(N.uint32=5125);ea.prototype.bind=function(){this.buffer.bind()};var n=[];return{create:function(b,n){function w(b){if(b)if("number"===typeof b)y(b),e.primType=4,e.vertCount=b|0,e.type=5121;
else{var d=null,n=35044,v=-1,B=-1,q=0,H=0;if(Array.isArray(b)||Z(b)||r(b))d=b;else if(k.type(b,"object","invalid arguments for elements"),"data"in b&&(d=b.data,k(Array.isArray(d)||Z(d)||r(d),"invalid data for element buffer")),"usage"in b&&(k.parameter(b.usage,c,"invalid element buffer usage"),n=c[b.usage]),"primitive"in b&&(k.parameter(b.primitive,f,"invalid element buffer primitive"),v=f[b.primitive]),"count"in b&&(k("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),B=b.count|
0),"type"in b&&(k.parameter(b.type,N,"invalid buffer type"),H=N[b.type]),"length"in b)q=b.length|0;else if(q=B,5123===H||5122===H)q*=2;else if(5125===H||5124===H)q*=4;G(e,d,n,v,B,q,H)}else y(),e.primType=4,e.vertCount=0,e.type=5121;return w}var y=v.create(null,34963,!0),e=new ea(y._buffer);pa.elementsCount++;w(b);w._reglType="elements";w._elements=e;w.subdata=function(b,d){y.subdata(b,d);return w};w.destroy=function(){F(e)};return w},createStream:function(b){var c=n.pop();c||(c=new ea(v.create(null,
34963,!0,!1)._buffer));G(c,b,35040,-1,-1,0,0);return c},destroyStream:function(b){n.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof ea?b._elements:null},clear:function(){O(w).forEach(F)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(A,R,Ib){var k=A("./util/sorted-object-keys"),Z=A("./util/check");R.exports=function(r,O){function f(b){Z.type(b,
"string","extension name must be string");b=b.toLowerCase();var f;try{f=c[b]=r.getExtension(b)}catch(k){}return!!f}for(var c={},y=0;y<O.extensions.length;++y){var b=O.extensions[y];if(!f(b))return O.onDestroy(),O.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}O.optionalExtensions.forEach(f);return{extensions:c,restore:function(){k(c).forEach(function(b){if(c[b]&&!f(b))throw Error("(regl): error restoring extension "+
b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(A,R,Ib){var k=A("./util/check"),Z=A("./util/values"),r=A("./util/extend"),O=[6407,6408],f=[];f[6408]=4;f[6407]=3;var c=[];c[5121]=1;c[5126]=4;c[36193]=2;var y=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};R.exports=function(v,pa,ea,G,F,w){function B(a,d,b){this.target=a;this.texture=d;this.renderbuffer=
b;var c=a=0;d?(a=d.width,c=d.height):b&&(a=b.width,c=b.height);this.width=a;this.height=c}function N(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function n(a,d,b){if(a){if(a.texture){a=a.texture._texture;var c=Math.max(1,a.height);k(Math.max(1,a.width)===d&&c===b,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,k(a.width===d&&a.height===b,"inconsistent width/height for renderbuffer");a.refCount+=1}}function H(a,
d){d&&(d.texture?v.framebufferTexture2D(36160,a,d.target,d.texture._texture.texture,0):v.framebufferRenderbuffer(36160,a,36161,d.renderbuffer._renderbuffer.renderbuffer))}function ca(a){var d=3553,b=null,c=null,h=a;"object"===typeof a&&(h=a.data,"target"in a&&(d=a.target|0));k.type(h,"function","invalid attachment data");a=h._reglType;"texture2d"===a?(b=h,k(3553===d)):"textureCube"===a?(b=h,k(34069<=d&&34075>d,"invalid cube map target")):"renderbuffer"===a?(c=h,d=36161):k.raise("invalid regl object for attachment");
return new B(d,b,c)}function I(a,d,b,c,h){if(b)return a=G.create2D({width:a,height:d,format:c,type:h}),a._texture.refCount=0,new B(3553,a,null);a=F.create({width:a,height:d,format:c});a._renderbuffer.refCount=0;return new B(36161,null,a)}function A(a){return a&&(a.texture||a.renderbuffer)}function e(a,d,b){a&&(a.texture?a.texture.resize(d,b):a.renderbuffer&&a.renderbuffer.resize(d,b),a.width=d,a.height=b)}function g(){this.id=a++;h[this.id]=this;this.framebuffer=v.createFramebuffer();this.height=
this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function d(a){a.colorAttachments.forEach(N);N(a.depthAttachment);N(a.stencilAttachment);N(a.depthStencilAttachment)}function z(a){var d=a.framebuffer;k(d,"must not double destroy framebuffer");v.deleteFramebuffer(d);a.framebuffer=null;w.framebufferCount--;delete h[a.id]}function U(a){var d;v.bindFramebuffer(36160,a.framebuffer);var c=a.colorAttachments;for(d=0;d<c.length;++d)H(36064+
d,c[d]);for(d=c.length;d<ea.maxColorAttachments;++d)v.framebufferTexture2D(36160,36064+d,3553,null,0);v.framebufferTexture2D(36160,33306,3553,null,0);v.framebufferTexture2D(36160,36096,3553,null,0);v.framebufferTexture2D(36160,36128,3553,null,0);H(36096,a.depthAttachment);H(36128,a.stencilAttachment);H(33306,a.depthStencilAttachment);a=v.checkFramebufferStatus(36160);v.isContextLost()||36053===a||k.raise("framebuffer configuration not supported, status = "+b[a]);v.bindFramebuffer(36160,q.next?q.next.framebuffer:
null);q.cur=q.next;v.getError()}function W(a,b){function h(a,b){var e;k(q.next!==v,"can not update framebuffer which is currently in use");var g=0,z=0,w=!0,r=!0;e=null;var G=!0,B="rgba",F="uint8",H=1,Z=null,t=null,N=null,X=!1;if("number"===typeof a)g=a|0,z=b|0||g;else if(a){k.type(a,"object","invalid arguments for framebuffer");"shape"in a?(z=a.shape,k(Array.isArray(z)&&2<=z.length,"invalid shape for framebuffer"),g=z[0],z=z[1]):("radius"in a&&(g=z=a.radius),"width"in a&&(g=a.width),"height"in a&&
(z=a.height));if("color"in a||"colors"in a)e=a.color||a.colors,Array.isArray(e)&&k(1===e.length||pa.webgl_draw_buffers,"multiple render targets not supported");if(!e){"colorCount"in a&&(H=a.colorCount|0,k(0<H,"invalid color buffer count"));"colorTexture"in a&&(G=!!a.colorTexture,B="rgba4");if("colorType"in a){F=a.colorType;if(G)k(pa.oes_texture_float||!("float"===F||"float32"===F),"you must enable OES_texture_float in order to use floating point framebuffer objects"),k(pa.oes_texture_half_float||
!("half float"===F||"float16"===F),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===F||"float16"===F)k(pa.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),B="rgba16f";else if("float"===F||"float32"===F)k(pa.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),B="rgba32f";k.oneOf(F,fa,"invalid color type")}"colorFormat"in
a&&(B=a.colorFormat,0<=oa.indexOf(B)?G=!0:0<=L.indexOf(B)?G=!1:k.optional(function(){if(G)k.oneOf(a.colorFormat,oa,"invalid color format for texture");else k.oneOf(a.colorFormat,L,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)X=!(!a.depthTexture&&!a.depthStencilTexture),k(!X||pa.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?w=a.depth:(Z=a.depth,r=!1));"stencil"in a&&("boolean"===typeof a.stencil?
r=a.stencil:(t=a.stencil,w=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?w=r=a.depthStencil:(N=a.depthStencil,r=w=!1))}else g=z=1;var W=null,ra=null,R=null,Ia=null;if(Array.isArray(e))W=e.map(ca);else if(e)W=[ca(e)];else for(W=Array(H),e=0;e<H;++e)W[e]=I(g,z,G,B,F);k(pa.webgl_draw_buffers||1>=W.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");k(W.length<=ea.maxColorAttachments,"too many color attachments, not supported");g=g||W[0].width;
z=z||W[0].height;Z?ra=ca(Z):w&&!r&&(ra=I(g,z,X,"depth","uint32"));t?R=ca(t):r&&!w&&(R=I(g,z,!1,"stencil","uint8"));N?Ia=ca(N):!Z&&!t&&r&&w&&(Ia=I(g,z,X,"depth stencil","depth stencil"));k(1>=!!Z+!!t+!!N,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");w=null;for(e=0;e<W.length;++e)n(W[e],g,z),k(!W[e]||W[e].texture&&0<=O.indexOf(W[e].texture._texture.format)||W[e].renderbuffer&&0<=y.indexOf(W[e].renderbuffer._renderbuffer.format),"framebuffer color attachment "+
e+" is invalid"),W[e]&&W[e].texture&&(r=f[W[e].texture._texture.format]*c[W[e].texture._texture.type],null===w?w=r:k(w===r,"all color attachments much have the same number of bits per pixel."));n(ra,g,z);k(!ra||ra.texture&&6402===ra.texture._texture.format||ra.renderbuffer&&33189===ra.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");n(R,g,z);k(!R||R.renderbuffer&&36168===R.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");n(Ia,
g,z);k(!Ia||Ia.texture&&34041===Ia.texture._texture.format||Ia.renderbuffer&&34041===Ia.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");d(v);v.width=g;v.height=z;v.colorAttachments=W;v.depthAttachment=ra;v.stencilAttachment=R;v.depthStencilAttachment=Ia;h.color=W.map(A);h.depth=A(ra);h.stencil=A(R);h.depthStencil=A(Ia);h.width=v.width;h.height=v.height;U(v);return h}var v=new g;w.framebufferCount++;h(a,b);return r(h,{resize:function(a,d){k(q.next!==v,"can not resize a framebuffer which is currently in use");
var b=Math.max(a|0,1),c=Math.max(d|0||b,1);if(b===v.width&&c===v.height)return h;for(var f=v.colorAttachments,g=0;g<f.length;++g)e(f[g],b,c);e(v.depthAttachment,b,c);e(v.stencilAttachment,b,c);e(v.depthStencilAttachment,b,c);v.width=h.width=b;v.height=h.height=c;U(v);return h},_reglType:"framebuffer",_framebuffer:v,destroy:function(){z(v);d(v)},use:function(a){q.setFBO({framebuffer:h},a)}})}var q={cur:null,next:null,dirty:!1,setFBO:null},oa=["rgba"],L=["rgba4","rgb565","rgb5 a1"];pa.ext_srgb&&L.push("srgba");
pa.ext_color_buffer_half_float&&L.push("rgba16f","rgb16f");pa.webgl_color_buffer_float&&L.push("rgba32f");var fa=["uint8"];pa.oes_texture_half_float&&fa.push("half float","float16");pa.oes_texture_float&&fa.push("float","float32");var a=0,h={};return r(q,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof g)?a:null},create:W,createCube:function(a){function d(a){var c;k(0>b.indexOf(q.next),"can not update framebuffer which is currently in use");
var h={color:null},f=0,e=null;c="rgba";var g="uint8",z=1;if("number"===typeof a)f=a|0;else if(a){k.type(a,"object","invalid arguments for framebuffer");"shape"in a?(f=a.shape,k(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),k(f[0]===f[1],"cube framebuffer must be square"),f=f[0]):("radius"in a&&(f=a.radius|0),"width"in a?(f=a.width|0,"height"in a&&k(a.height===f,"must be square")):"height"in a&&(f=a.height|0));if("color"in a||"colors"in a)e=a.color||a.colors,Array.isArray(e)&&k(1===
e.length||pa.webgl_draw_buffers,"multiple render targets not supported");e||("colorCount"in a&&(z=a.colorCount|0,k(0<z,"invalid color buffer count")),"colorType"in a&&(k.oneOf(a.colorType,fa,"invalid color type"),g=a.colorType),"colorFormat"in a&&(c=a.colorFormat,k.oneOf(a.colorFormat,oa,"invalid color format for texture")));"depth"in a&&(h.depth=a.depth);"stencil"in a&&(h.stencil=a.stencil);"depthStencil"in a&&(h.depthStencil=a.depthStencil)}else f=1;if(e)if(Array.isArray(e))for(a=[],c=0;c<e.length;++c)a[c]=
e[c];else a=[e];else for(a=Array(z),e={radius:f,format:c,type:g},c=0;c<z;++c)a[c]=G.createCube(e);h.color=Array(a.length);for(c=0;c<a.length;++c)z=a[c],k("function"===typeof z&&"textureCube"===z._reglType,"invalid cube map"),f=f||z.width,k(z.width===f&&z.height===f,"invalid cube map shape"),h.color[c]={target:34069,data:a[c]};for(c=0;6>c;++c){for(z=0;z<a.length;++z)h.color[z].target=34069+c;0<c&&(h.depth=b[0].depth,h.stencil=b[0].stencil,h.depthStencil=b[0].depthStencil);if(b[c])b[c](h);else b[c]=
W(h)}return r(d,{width:f,height:f,color:a})}var b=Array(6);d(a);return r(d,{faces:b,resize:function(a){var c=a|0;k(0<c&&c<=ea.maxCubeMapSize,"invalid radius for cube fbo");if(c===d.width)return d;var h=d.color;for(a=0;a<h.length;++a)h[a].resize(c);for(a=0;6>a;++a)b[a].resize(c);d.width=d.height=c;return d},_reglType:"framebufferCube",destroy:function(){b.forEach(function(a){a.destroy()})}})},clear:function(){Z(h).forEach(z)},restore:function(){q.cur=null;q.next=null;q.dirty=!0;Z(h).forEach(function(a){a.framebuffer=
v.createFramebuffer();U(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(A,R,Ib){var k=A("./util/sorted-object-keys"),Z=A("./util/pool");R.exports=function(r,O){var f=1;O.ext_texture_filter_anisotropic&&(f=r.getParameter(34047));var c=1,y=1;O.webgl_draw_buffers&&(c=r.getParameter(34852),y=r.getParameter(36063));var b=!!O.oes_texture_float;if(b){b=r.createTexture();r.bindTexture(3553,b);r.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var v=r.createFramebuffer();r.bindFramebuffer(36160,
v);r.framebufferTexture2D(36160,36064,3553,b,0);r.bindTexture(3553,null);if(36053!==r.checkFramebufferStatus(36160))b=!1;else{r.viewport(0,0,1,1);r.clearColor(1,0,0,1);r.clear(16384);var pa=Z.allocType(5126,4);r.readPixels(0,0,1,1,6408,5126,pa);r.getError()?b=!1:(r.deleteFramebuffer(v),r.deleteTexture(b),b=1===pa[0]);Z.freeType(pa)}}pa=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(pa=r.createTexture(),
v=Z.allocType(5121,36),r.activeTexture(33984),r.bindTexture(34067,pa),r.texImage2D(34069,0,6408,3,3,0,6408,5121,v),Z.freeType(v),r.bindTexture(34067,null),r.deleteTexture(pa),pa=!r.getError());return{colorBits:[r.getParameter(3410),r.getParameter(3411),r.getParameter(3412),r.getParameter(3413)],depthBits:r.getParameter(3414),stencilBits:r.getParameter(3415),subpixelBits:r.getParameter(3408),extensions:k(O).filter(function(b){return!!O[b]}),maxAnisotropic:f,maxDrawbuffers:c,maxColorAttachments:y,pointSizeDims:r.getParameter(33901),
lineWidthDims:r.getParameter(33902),maxViewportDims:r.getParameter(3386),maxCombinedTextureUnits:r.getParameter(35661),maxCubeMapSize:r.getParameter(34076),maxRenderbufferSize:r.getParameter(34024),maxTextureUnits:r.getParameter(34930),maxTextureSize:r.getParameter(3379),maxAttributes:r.getParameter(34921),maxVertexUniforms:r.getParameter(36347),maxVertexTextureUnits:r.getParameter(35660),maxVaryingVectors:r.getParameter(36348),maxFragmentUniforms:r.getParameter(36349),glsl:r.getParameter(35724),
renderer:r.getParameter(7937),vendor:r.getParameter(7936),version:r.getParameter(7938),readFloat:b,npotTextureCube:pa}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(A,R,Ib){var k=A("./util/check"),Z=A("./util/is-typed-array");R.exports=function(r,O,f,c,y,b,v){function pa(G){var F;null===O.next?(k(y.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),F=5121):(k(null!==O.next.colorAttachments[0].texture,
"You cannot read from a renderbuffer"),F=O.next.colorAttachments[0].texture._texture.type,k.optional(function(){b.oes_texture_float?(k(5121===F||5126===F,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===F&&k(v.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):k(5121===F,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var w=0,B=0,N=c.framebufferWidth,
n=c.framebufferHeight,H=null;Z(G)?H=G:G&&(k.type(G,"object","invalid arguments to regl.read()"),w=G.x|0,B=G.y|0,k(0<=w&&w<c.framebufferWidth,"invalid x offset for regl.read"),k(0<=B&&B<c.framebufferHeight,"invalid y offset for regl.read"),N=(G.width||c.framebufferWidth-w)|0,n=(G.height||c.framebufferHeight-B)|0,H=G.data||null);H&&(5121===F?k(H instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===F&&k(H instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));
k(0<N&&N+w<=c.framebufferWidth,"invalid width for read pixels");k(0<n&&n+B<=c.framebufferHeight,"invalid height for read pixels");f();G=N*n*4;H||(5121===F?H=new Uint8Array(G):5126===F&&(H=H||new Float32Array(G)));k.isTypedArray(H,"data buffer for regl.read() must be a typedarray");k(H.byteLength>=G,"data buffer for regl.read() too small");r.pixelStorei(3333,4);r.readPixels(w,B,N,n,6408,F,H);return H}function ea(b){var c;O.setFBO({framebuffer:b.framebuffer},function(){c=pa(b)});return c}return function(b){return b&&
"framebuffer"in b?ea(b):pa(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(A,R,Ib){var k=A("./util/sorted-object-keys"),Z=A("./util/check"),r=A("./util/values"),O=[];O[32854]=2;O[32855]=2;O[36194]=2;O[33189]=2;O[36168]=1;O[34041]=4;O[35907]=4;O[34836]=16;O[34842]=8;O[34843]=6;R.exports=function(f,c,y,b,v){function pa(b){this.id=w++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;v.profile&&(this.stats={size:0})}function ea(c){var n=c.renderbuffer;
Z(n,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(n);c.renderbuffer=null;c.refCount=0;delete B[c.id];b.renderbufferCount--}var G={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(G.srgba=35907);c.ext_color_buffer_half_float&&(G.rgba16f=34842,G.rgb16f=34843);c.webgl_color_buffer_float&&(G.rgba32f=34836);var F=[];k(G).forEach(function(b){F[G[b]]=b});var w=0,B={};pa.prototype.decRef=function(){0>=--this.refCount&&
ea(this)};v.profile&&(b.getTotalRenderbufferSize=function(){var b=0;k(B).forEach(function(c){b+=B[c].stats.size});return b});return{create:function(c,n){function w(b,c){var e=0,g=0,d=32854;"object"===typeof b&&b?("shape"in b?(g=b.shape,Z(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),e=g[0]|0,g=g[1]|0):("radius"in b&&(e=g=b.radius|0),"width"in b&&(e=b.width|0),"height"in b&&(g=b.height|0)),"format"in b&&(Z.parameter(b.format,G,"invalid renderbuffer format"),d=G[b.format])):"number"===
typeof b?(e=b|0,g="number"===typeof c?c|0:e):b?Z.raise("invalid arguments to renderbuffer constructor"):e=g=1;Z(0<e&&0<g&&e<=y.maxRenderbufferSize&&g<=y.maxRenderbufferSize,"invalid renderbuffer size");if(e!==k.width||g!==k.height||d!==k.format)return w.width=k.width=e,w.height=k.height=g,k.format=d,f.bindRenderbuffer(36161,k.renderbuffer),f.renderbufferStorage(36161,d,e,g),Z(0===f.getError(),"invalid render buffer format"),v.profile&&(k.stats.size=O[k.format]*k.width*k.height),w.format=F[k.format],
w}var k=new pa(f.createRenderbuffer());B[k.id]=k;b.renderbufferCount++;w(c,n);w.resize=function(b,c){var e=b|0,g=c|0||e;if(e===k.width&&g===k.height)return w;Z(0<e&&0<g&&e<=y.maxRenderbufferSize&&g<=y.maxRenderbufferSize,"invalid renderbuffer size");w.width=k.width=e;w.height=k.height=g;f.bindRenderbuffer(36161,k.renderbuffer);f.renderbufferStorage(36161,k.format,e,g);Z(0===f.getError(),"invalid render buffer format");v.profile&&(k.stats.size=O[k.format]*k.width*k.height);return w};w._reglType="renderbuffer";
w._renderbuffer=k;v.profile&&(w.stats=k.stats);w.destroy=function(){k.decRef()};return w},clear:function(){r(B).forEach(ea)},restore:function(){r(B).forEach(function(b){b.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,b.renderbuffer);f.renderbufferStorage(36161,b.format,b.width,b.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(A,R,Ib){var k=A("./util/sorted-object-keys"),Z=A("./util/check"),r=A("./util/extend"),
O=A("./util/values");R.exports=function(f,c,y,b){function v(b,c,f,e){this.name=b;this.id=c;this.location=f;this.info=e}function pa(b,c){for(var f=0;f<b.length;++f)if(b[f].id===c.id){b[f].location=c.location;return}b.push(c)}function ea(b,n,k){var e=35632===b?w:B,g=e[n];if(!g){var d=c.str(n),g=f.createShader(b);f.shaderSource(g,d);f.compileShader(g);Z.shaderError(f,g,d,b,k);e[n]=g}return g}function G(c,f){this.id=H++;this.fragId=c;this.vertId=f;this.program=null;this.uniforms=[];this.attributes=[];
this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function F(n,k,w){var e;e=ea(35632,n.fragId);var g=ea(35633,n.vertId),d=n.program=f.createProgram();f.attachShader(d,e);f.attachShader(d,g);if(w)for(e=0;e<w.length;++e)g=w[e],f.bindAttribLocation(d,g[0],g[1]);f.linkProgram(d);Z.linkError(f,d,c.str(n.fragId),c.str(n.vertId),k);w=f.getProgramParameter(d,35718);b.profile&&(n.stats.uniformsCount=w);g=n.uniforms;for(e=0;e<w;++e)if(k=f.getActiveUniform(d,e))if(1<k.size)for(var z=
0;z<k.size;++z){var y=k.name.replace("[0]","["+z+"]");pa(g,new v(y,c.id(y),f.getUniformLocation(d,y),k))}else pa(g,new v(k.name,c.id(k.name),f.getUniformLocation(d,k.name),k));w=f.getProgramParameter(d,35721);b.profile&&(n.stats.attributesCount=w);n=n.attributes;for(e=0;e<w;++e)(k=f.getActiveAttrib(d,e))&&pa(n,new v(k.name,c.id(k.name),f.getAttribLocation(d,k.name),k))}var w={},B={},N={},n=[],H=0;b.profile&&(y.getMaxUniformsCount=function(){var b=0;n.forEach(function(c){c.stats.uniformsCount>b&&(b=
c.stats.uniformsCount)});return b},y.getMaxAttributesCount=function(){var b=0;n.forEach(function(c){c.stats.attributesCount>b&&(b=c.stats.attributesCount)});return b});return{clear:function(){var b=f.deleteShader.bind(f);O(w).forEach(b);w={};O(B).forEach(b);B={};n.forEach(function(b){f.deleteProgram(b.program)});n.length=0;N={};y.shaderCount=0},program:function(b,c,v,e){Z.command(0<=b,"missing vertex shader",v);Z.command(0<=c,"missing fragment shader",v);var g=N[c];g||(g=N[c]={});var d=g[b];if(d&&
(d.refCount++,!e))return d;var z=new G(c,b);y.shaderCount++;F(z,v,e);d||(g[b]=z);n.push(z);return r(z,{destroy:function(){z.refCount--;if(0>=z.refCount){f.deleteProgram(z.program);var b=n.indexOf(z);n.splice(b,1);y.shaderCount--}0>=g[z.vertId].refCount&&(f.deleteShader(B[z.vertId]),delete B[z.vertId],delete N[z.fragId][z.vertId]);k(N[z.fragId]).length||(f.deleteShader(w[z.fragId]),delete w[z.fragId],delete N[z.fragId])}})},restore:function(){w={};B={};for(var b=0;b<n.length;++b)F(n[b],null,n[b].attributes.map(function(b){return[b.location,
b.name]}))},shader:ea,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(A,R,Ib){R.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(A,R,Ib){R.exports=function(){var k={"":0},Z=[""];return{id:function(r){var O=k[r];if(O)return O;O=k[r]=Z.length;Z.push(r);return O},str:function(k){return Z[k]}}}},
{}],19:[function(A,R,Ib){function k(a){return"[object "+a+"]"}function Z(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function r(a){return Array.isArray(a)&&0!==a.length&&N(a[0])?!0:!1}function O(a){return Object.prototype.toString.call(a)}function f(a){if(!a)return!1;var b=O(a);return 0<=oa.indexOf(b)?!0:Z(a)||r(a)||F(a)}function c(a,b){36193===a.type?(a.data=B(b),w.freeType(b)):a.data=b}function y(a,b,d,c,f,g){a="undefined"!==typeof fa[a]?fa[a]:e[a]*L[b];g&&(a*=6);if(f){for(c=
0;1<=d;)c+=a*d*d,d/=2;return c}return a*d*c}var b=A("./util/sorted-object-keys"),v=A("./util/check"),pa=A("./util/extend"),ea=A("./util/values"),G=A("./util/is-typed-array"),F=A("./util/is-ndarray"),w=A("./util/pool"),B=A("./util/to-half-float"),N=A("./util/is-array-like"),n=A("./util/flatten"),H=A("./util/is-pow2");Ib=A("./constants/arraytypes.json");var ca=A("./constants/arraytypes.json"),I=[9984,9986,9985,9987],be=[0,6409,6410,6407,6408],e={};e[6409]=e[6406]=e[6402]=1;e[34041]=e[6410]=2;e[6407]=
e[35904]=3;e[6408]=e[35906]=4;var g=k("HTMLCanvasElement"),d=k("OffscreenCanvas"),z=k("CanvasRenderingContext2D"),U=k("ImageBitmap"),W=k("HTMLImageElement"),q=k("HTMLVideoElement"),oa=b(Ib).concat([g,d,z,U,W,q]),L=[];L[5121]=1;L[5126]=4;L[36193]=2;L[5123]=2;L[5125]=4;var fa=[];fa[32854]=2;fa[32855]=2;fa[36194]=2;fa[34041]=4;fa[33776]=.5;fa[33777]=.5;fa[33778]=1;fa[33779]=1;fa[35986]=.5;fa[35987]=1;fa[34798]=1;fa[35840]=.5;fa[35841]=.25;fa[35842]=.5;fa[35843]=.25;fa[36196]=.5;R.exports=function(a,
h,k,L,fa,A,oa){function na(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Na(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Y(a,
b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(v.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(v.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(v.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(v.parameter(b.colorSpace,yc,"invalid colorSpace"),a.colorSpace=yc[b.colorSpace]);if("type"in b){var d=b.type;v(h.oes_texture_float||
!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");v(h.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");v(h.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");v.parameter(d,V,"invalid texture type");a.type=
V[d]}var c=a.width,f=a.height,g=a.channels,d=!1;"shape"in b?(v(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),c=b.shape[0],f=b.shape[1],3===b.shape.length&&(g=b.shape[2],v(0<g&&4>=g,"invalid number of channels"),d=!0),v(0<=c&&c<=k.maxTextureSize,"invalid width"),v(0<=f&&f<=k.maxTextureSize,"invalid height")):("radius"in b&&(c=f=b.radius,v(0<=c&&c<=k.maxTextureSize,"invalid radius")),"width"in b&&(c=b.width,v(0<=c&&c<=k.maxTextureSize,"invalid width")),"height"in b&&(f=b.height,
v(0<=f&&f<=k.maxTextureSize,"invalid height")),"channels"in b&&(g=b.channels,v(0<g&&4>=g,"invalid number of channels"),d=!0));a.width=c|0;a.height=f|0;a.channels=g|0;c=!1;"format"in b&&(c=b.format,v(h.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),v.parameter(c,C,"invalid texture format"),f=a.internalformat=C[c],a.format=ua[f],c in V&&!("type"in b)&&(a.type=V[c]),c in la&&(a.compressed=!0),c=!0);
!d&&c?a.channels=e[a.format]:d&&!c?a.channels!==be[a.format]&&(a.format=a.internalformat=be[a.channels]):c&&d&&v(a.channels===e[a.format],"number of channels inconsistent with specified format")}}function K(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function M(){na.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function P(a,b){var h=null;
f(b)?h=b:b&&(v.type(b,"object","invalid pixel data type"),Y(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),f(b.data)&&(h=b.data));v(!a.compressed||h instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){v(!h,"can not specify copy and data field for the same texture");var l=fa.viewportWidth,e=fa.viewportHeight;a.width=a.width||l-a.xOffset;a.height=a.height||e-a.yOffset;a.needsCopy=!0;v(0<=a.xOffset&&a.xOffset<l&&0<=a.yOffset&&a.yOffset<e&&0<a.width&&
a.width<=l&&0<a.height&&a.height<=e,"copy texture read out of bounds")}else if(!h)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(G(h))a.channels=a.channels||4,a.data=h,"type"in b||5121!==a.type||(a.type=ca[Object.prototype.toString.call(h)]|0);else if(Z(h)){a.channels=a.channels||4;l=h;e=l.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:e=w.allocType(a.type,e);e.set(l);a.data=e;break;case 36193:a.data=B(l);break;default:v.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(F(h)){l=h.data;Array.isArray(l)||5121!==a.type||(a.type=ca[Object.prototype.toString.call(l)]|0);var e=h.shape,m=h.stride,p,t,u,C;3===e.length?(u=e[2],C=m[2]):(v(2===e.length,"invalid ndarray pixel data, must be 2 or 3D"),C=u=1);p=e[0];t=e[1];e=m[0];m=m[1];a.alignment=1;a.width=p;a.height=t;a.channels=u;a.format=a.internalformat=be[u];a.needsFree=!0;p=C;h=h.offset;u=a.width;C=a.height;t=a.channels;for(var y=w.allocType(36193===a.type?5126:a.type,u*C*t),E=0,ba=0;ba<C;++ba)for(var D=
0;D<u;++D)for(var V=0;V<t;++V)y[E++]=l[e*D+m*ba+p*V+h];c(a,y)}else if(O(h)===g||O(h)===d||O(h)===z)O(h)===g||O(h)===d?a.element=h:a.element=h.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(O(h)===U)a.element=h,a.width=h.width,a.height=h.height,a.channels=4;else if(O(h)===W)a.element=h,a.width=h.naturalWidth,a.height=h.naturalHeight,a.channels=4;else if(O(h)===q)a.element=h,a.width=h.videoWidth,a.height=h.videoHeight,a.channels=4;else if(r(h)){l=a.width||h[0].length;
e=a.height||h.length;m=a.channels;m=N(h[0][0])?m||h[0][0].length:m||1;p=n.shape(h);u=1;for(C=0;C<p.length;++C)u*=p[C];u=w.allocType(36193===a.type?5126:a.type,u);n.flatten(h,p,"",u);c(a,u);a.alignment=1;a.width=l;a.height=e;a.channels=m;a.format=a.internalformat=be[m];a.needsFree=!0}5126===a.type?v(0<=k.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&v(0<=k.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function sa(b,d,c,l,h){var f=b.element,e=b.data,g=b.internalformat,m=b.format,q=b.type,z=b.width,n=b.height;K(b);f?a.texSubImage2D(d,h,c,l,m,q,f):b.compressed?a.compressedTexSubImage2D(d,h,c,l,g,z,n,e):b.needsCopy?(L(),a.copyTexSubImage2D(d,h,c,l,b.xOffset,b.yOffset,z,n)):a.texSubImage2D(d,h,c,l,z,n,m,q,e)}function J(){return T.pop()||new M}function R(a){a.needsFree&&w.freeType(a.data);M.call(a);T.push(a)}function $a(){na.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function Q(a,b,d){var c=a.images[0]=J();a.mipmask=1;c.width=a.width=b;c.height=a.height=d;c.channels=a.channels=4}function t(a,b){var d=null;if(f(b))d=a.images[0]=J(),Na(d,a),P(d,b),a.mipmask=1;else if(Y(a,b),Array.isArray(b.mipmap))for(var c=b.mipmap,h=0;h<c.length;++h)d=a.images[h]=J(),Na(d,a),d.width>>=h,d.height>>=h,P(d,c[h]),a.mipmask|=1<<h;else d=a.images[0]=J(),Na(d,a),P(d,b),a.mipmask=1;Na(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||v(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ma(b,d){for(var c=b.images,l=0;l<c.length&&c[l];++l){var h=c[l],f=d,e=l,g=h.element,m=h.data,q=h.internalformat,z=h.format,n=h.type,t=h.width,u=h.height;K(h);g?a.texImage2D(f,e,z,z,n,g):h.compressed?a.compressedTexImage2D(f,e,q,t,u,0,m):h.needsCopy?(L(),a.copyTexImage2D(f,e,z,h.xOffset,h.yOffset,t,u,0)):a.texImage2D(f,
e,z,t,u,0,z,n,m||null)}}function da(){var a=ha.pop()||new $a;na.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Fa(a){for(var b=a.images,d=0;d<b.length;++d)b[d]&&R(b[d]),b[d]=null;ha.push(a)}function Oa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function $b(a,b){if("min"in b){var d=b.min;v.parameter(d,ud);a.minFilter=ud[d];0<=I.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&
(d=b.mag,v.parameter(d,kc),a.magFilter=kc[d]);var d=a.wrapS,c=a.wrapT;if("wrap"in b){var h=b.wrap;"string"===typeof h?(v.parameter(h,nc),d=c=nc[h]):Array.isArray(h)&&(v.parameter(h[0],nc),v.parameter(h[1],nc),d=nc[h[0]],c=nc[h[1]])}else"wrapS"in b&&(d=b.wrapS,v.parameter(d,nc),d=nc[d]),"wrapT"in b&&(c=b.wrapT,v.parameter(c,nc),c=nc[c]);a.wrapS=d;a.wrapT=c;"anisotropic"in b&&(d=b.anisotropic,v("number"===typeof d&&1<=d&&d<=k.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);
if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":v.parameter(b.mipmap,cc,"invalid mipmap hint");a.mipmapHint=cc[b.mipmap];d=a.genMipmaps=!0;break;case "boolean":d=a.genMipmaps=b.mipmap;break;case "object":v(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;d=!0;break;default:v.raise("invalid mipmap type")}!d||"min"in b||(a.minFilter=9984)}}function Ia(b,d){a.texParameteri(d,10241,b.minFilter);a.texParameteri(d,10240,b.magFilter);a.texParameteri(d,10242,b.wrapS);a.texParameteri(d,
10243,b.wrapT);h.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(d))}function S(b){na.call(this);this.mipmask=0;this.internalformat=6408;this.id=qa++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Oa;oa.profile&&(this.stats={size:0})}function ob(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=ba[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function ta(b){var d=b.texture;v(d,"must not double destroy texture");var c=b.unit,h=b.target;0<=c&&(a.activeTexture(33984+c),a.bindTexture(h,null),ba[c]=null);a.deleteTexture(d);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete E[b.id];A.textureCount--}var cc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},nc={repeat:10497,clamp:33071,mirror:33648},kc={nearest:9728,linear:9729},ud=pa({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},kc),yc={none:0,browser:37444},V={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},C={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},la={};h.ext_srgb&&(C.srgb=35904,C.srgba=35906);h.oes_texture_float&&(V.float32=V["float"]=5126);h.oes_texture_half_float&&(V.float16=V["half float"]=36193);h.webgl_depth_texture&&(pa(C,{depth:6402,"depth stencil":34041}),pa(V,{uint16:5123,uint32:5125,
"depth stencil":34042}));h.webgl_compressed_texture_s3tc&&pa(la,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&pa(la,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&pa(la,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&(la["rgb etc1"]=36196);var Da=Array.prototype.slice.call(a.getParameter(34467));
b(la).forEach(function(a){var b=la[a];0<=Da.indexOf(b)&&(C[a]=b)});var ub=b(C);k.textureFormats=ub;var Qc=[];b(C).forEach(function(a){Qc[C[a]]=a});var Uc=[];b(V).forEach(function(a){Uc[V[a]]=a});var D=[];b(kc).forEach(function(a){D[kc[a]]=a});var u=[];b(ud).forEach(function(a){u[ud[a]]=a});var ka=[];b(nc).forEach(function(a){ka[nc[a]]=a});var ua=ub.reduce(function(a,b){var d=C[b];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||h.ext_srgb&&(35904===d||35906===d)?a[d]=d:32855===d||0<=b.indexOf("rgba")?
a[d]=6408:a[d]=6407;return a},{}),T=[],ha=[],qa=0,E={},m=k.maxTextureUnits,ba=Array(m).map(function(){return null});pa(S.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var d=0;d<m;++d){var c=ba[d];if(c){if(0<c.bindCount)continue;c.unit=-1}ba[d]=this;b=d;break}b>=m&&v.raise("insufficient number of texture units");oa.profile&&A.maxTextureUnits<b+1&&(A.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&ta(this)}});oa.profile&&(A.getTotalTextureSize=function(){var a=0;b(E).forEach(function(b){a+=E[b].stats.size});return a});return{create2D:function(b,d){function c(a,b){var d=h.texInfo;Oa.call(d);var f=da();"number"===typeof a?"number"===typeof b?Q(f,a|0,b|0):Q(f,a|0,a|0):a?(v.type(a,"object","invalid arguments to regl.texture"),$b(d,a),t(f,a)):Q(f,1,1);d.genMipmaps&&(f.mipmask=(f.width<<1)-1);h.mipmask=f.mipmask;Na(h,f);v.texture2D(d,f,k);h.internalformat=f.internalformat;
c.width=f.width;c.height=f.height;ob(h);ma(f,3553);Ia(d,3553);ga();Fa(f);oa.profile&&(h.stats.size=y(h.internalformat,h.type,f.width,f.height,d.genMipmaps,!1));c.format=Qc[h.internalformat];c.type=Uc[h.type];c.mag=D[d.magFilter];c.min=u[d.minFilter];c.wrapS=ka[d.wrapS];c.wrapT=ka[d.wrapT];return c}var h=new S(3553);E[h.id]=h;A.textureCount++;c(b,d);c.subimage=function(a,b,d,f){v(!!a,"must specify image data");b|=0;d|=0;f|=0;var e=J();Na(e,h);e.width=0;e.height=0;P(e,a);e.width=e.width||(h.width>>
f)-b;e.height=e.height||(h.height>>f)-d;v(h.type===e.type&&h.format===e.format&&h.internalformat===e.internalformat,"incompatible format for texture.subimage");v(0<=b&&0<=d&&b+e.width<=h.width&&d+e.height<=h.height,"texture.subimage write out of bounds");v(h.mipmask&1<<f,"missing mipmap data");v(e.data||e.element||e.needsCopy,"missing image data");ob(h);sa(e,3553,b,d,f);ga();R(e);return c};c.resize=function(b,d){var f=b|0,e=d|0||f;if(f===h.width&&e===h.height)return c;c.width=h.width=f;c.height=h.height=
e;ob(h);for(var g=0;h.mipmask>>g;++g){var m=f>>g,q=e>>g;if(!m||!q)break;a.texImage2D(3553,g,h.format,m,q,0,h.format,h.type,null)}ga();oa.profile&&(h.stats.size=y(h.internalformat,h.type,f,e,!1,!1));return c};c._reglType="texture2d";c._texture=h;oa.profile&&(c.stats=h.stats);c.destroy=function(){h.decRef()};return c},createCube:function(b,d,c,h,f,e){function g(a,b,d,c,h,l){var f,e=m.texInfo;Oa.call(e);for(f=0;6>f;++f)q[f]=da();if("number"!==typeof a&&a)if("object"===typeof a)if(b)t(q[0],a),t(q[1],
b),t(q[2],d),t(q[3],c),t(q[4],h),t(q[5],l);else if($b(e,a),Y(m,a),"faces"in a)for(a=a.faces,v(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),f=0;6>f;++f)v("object"===typeof a[f]&&!!a[f],"invalid input for cube map face"),Na(q[f],m),t(q[f],a[f]);else for(f=0;6>f;++f)t(q[f],a);else v.raise("invalid arguments to cube map");else for(a=a|0||1,f=0;6>f;++f)Q(q[f],a,a);Na(m,q[0]);v.optional(function(){k.npotTextureCube||v(H(m.width)&&H(m.height),"your browser does not support non power or two texture dimensions")});
m.mipmask=e.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;v.textureCube(m,e,q,k);m.internalformat=q[0].internalformat;g.width=q[0].width;g.height=q[0].height;ob(m);for(f=0;6>f;++f)ma(q[f],34069+f);Ia(e,34067);ga();oa.profile&&(m.stats.size=y(m.internalformat,m.type,g.width,g.height,e.genMipmaps,!0));g.format=Qc[m.internalformat];g.type=Uc[m.type];g.mag=D[e.magFilter];g.min=u[e.minFilter];g.wrapS=ka[e.wrapS];g.wrapT=ka[e.wrapT];for(f=0;6>f;++f)Fa(q[f]);return g}var m=new S(34067);E[m.id]=m;A.cubeCount++;
var q=Array(6);g(b,d,c,h,f,e);g.subimage=function(a,b,d,c,h){v(!!b,"must specify image data");v("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");d|=0;c|=0;h|=0;var f=J();Na(f,m);f.width=0;f.height=0;P(f,b);f.width=f.width||(m.width>>h)-d;f.height=f.height||(m.height>>h)-c;v(m.type===f.type&&m.format===f.format&&m.internalformat===f.internalformat,"incompatible format for texture.subimage");v(0<=d&&0<=c&&d+f.width<=m.width&&c+f.height<=m.height,"texture.subimage write out of bounds");v(m.mipmask&
1<<h,"missing mipmap data");v(f.data||f.element||f.needsCopy,"missing image data");ob(m);sa(f,34069+a,d,c,h);ga();R(f);return g};g.resize=function(b){b|=0;if(b!==m.width){g.width=m.width=b;g.height=m.height=b;ob(m);for(var d=0;6>d;++d)for(var c=0;m.mipmask>>c;++c)a.texImage2D(34069+d,c,m.format,b>>c,b>>c,0,m.format,m.type,null);ga();oa.profile&&(m.stats.size=y(m.internalformat,m.type,g.width,g.height,!1,!0));return g}};g._reglType="textureCube";g._texture=m;oa.profile&&(g.stats=m.stats);g.destroy=
function(){m.decRef()};return g},clear:function(){for(var b=0;b<m;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ba[b]=null;ea(E).forEach(ta);A.cubeCount=0;A.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<m;++b){var d=ba[b];d&&(d.bindCount=0,d.unit=-1,ba[b]=null)}ea(E).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var d=0;32>d;++d)if(0!==(b.mipmask&1<<d))if(3553===b.target)a.texImage2D(3553,d,b.internalformat,b.width>>
d,b.height>>d,0,b.internalformat,b.type,null);else for(var c=0;6>c;++c)a.texImage2D(34069+c,d,b.internalformat,b.width>>d,b.height>>d,0,b.internalformat,b.type,null);Ia(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<m;++b){var d=ba[b];d&&(d.bindCount=0,d.unit=-1,ba[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(A,R,Ib){R.exports=function(k,Z){function r(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function O(c,f,k){var w=y.pop()||new r;w.startQueryIndex=c;w.endQueryIndex=f;w.sum=0;w.stats=k;b.push(w)}if(!Z.ext_disjoint_timer_query)return null;var f=[],c=[],y=[],b=[],v=[],pa=[];return{beginQuery:function(b){var k=f.pop()||Z.ext_disjoint_timer_query.createQueryEXT();
Z.ext_disjoint_timer_query.beginQueryEXT(35007,k);c.push(k);O(c.length-1,c.length,b)},endQuery:function(){Z.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:O,update:function(){var k,r;k=c.length;if(0!==k){pa.length=Math.max(pa.length,k+1);v.length=Math.max(v.length,k+1);v[0]=0;var F=pa[0]=0;for(r=k=0;r<c.length;++r){var w=c[r];Z.ext_disjoint_timer_query.getQueryObjectEXT(w,34919)?(F+=Z.ext_disjoint_timer_query.getQueryObjectEXT(w,34918),f.push(w)):c[k++]=w;v[r+1]=F;pa[r+1]=k}c.length=
k;for(r=k=0;r<b.length;++r){var F=b[r],B=F.startQueryIndex,w=F.endQueryIndex;F.sum+=v[w]-v[B];B=pa[B];w=pa[w];w===B?(F.stats.gpuTime+=F.sum/1E6,y.push(F)):(F.startQueryIndex=B,F.endQueryIndex=w,b[k++]=F)}b.length=k}},getNumPendingQueries:function(){return c.length},clear:function(){f.push.apply(f,c);for(var b=0;b<f.length;b++)Z.ext_disjoint_timer_query.deleteQueryEXT(f[b]);c.length=0;f.length=0},restore:function(){c.length=0;f.length=0}}}},{}],21:[function(A,R,Ib){function k(b){return"undefined"!==
typeof atob?atob(b):"base64:"+b}function Z(b){b=Error("(regl) "+b);console.error(b);throw b;}function r(b,c){b||Z(c)}function O(b){return b?": "+b:""}function f(b,c){switch(c){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function c(b,c,f){0>c.indexOf(b)&&
Z("invalid value"+O(f)+". must be one of: "+c)}function y(b,c){for(b+="";b.length<c;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function v(b,c){this.number=b;this.line=c;this.errors=[]}function pa(b,c,f){this.file=b;this.line=c;this.message=f}function ea(){var b=Error(),b=(b.stack||b).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return c?c[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function G(){var b=Error(),
b=(b.stack||b).toString(),c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return c?c[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function F(d,c){var f=d.split("\n"),e=1,g=0,n={unknown:new b,0:new b};n.unknown.name=n[0].name=c||ea();n.unknown.lines.push(new v(0,""));for(var w=0;w<f.length;++w){var y=f[w],a=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(y);if(a)switch(a[1]){case "line":if(a=/(\d+)(\s+\d+)?/.exec(a[2]))e=a[1]|0,a[2]&&(g=a[2]|0,g in n||(n[g]=new b));break;case "define":if(a=/SHADER_NAME(_B64)?\s+(.*)$/.exec(a[2]))n[g].name=
a[1]?k(a[2]):a[2]}n[g].lines.push(new v(e++,y))}I(n).forEach(function(a){var b=n[a];b.lines.forEach(function(a){b.index[a.number]=a})});return n}function w(b){var c=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var d=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);d?c.push(new pa(d[1]|0,d[2]|0,d[3].trim())):0<b.length&&c.push(new pa("unknown",0,b))}});return c}function B(b,c){c.forEach(function(c){var f=b[c.file];if(f){var e=f.index[c.line];if(e){e.errors.push(c);f.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(c)})}function N(b){b._commandRef=ea()}function n(b,c){var f=G();Z(b+" in command "+(c||ea())+("unknown"===f?"":" called from "+f))}function H(b,c,e,g){f(b,c)||n("invalid parameter type"+O(e)+". expected "+c+", got "+typeof b,g||ea())}function ca(b,c){return 32820===b||32819===b||33635===b?2:34042===b?4:g[b]*c}var I=A("./sorted-object-keys"),be=A("./is-typed-array");A=A("./extend");var e="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
g={};g[5120]=g[5121]=1;g[5122]=g[5123]=g[36193]=g[33635]=g[32819]=g[32820]=2;g[5124]=g[5125]=g[5126]=g[34042]=4;R.exports=A(r,{optional:function(b){b()},raise:Z,commandRaise:n,command:function(b,c,f){b||n(c,f||ea())},parameter:function(b,c,f){b in c||Z("unknown parameter ("+b+")"+O(f)+". possible values: "+I(c).join())},commandParameter:function(b,c,f,e){b in c||n("unknown parameter ("+b+")"+O(f)+". possible values: "+I(c).join(),e||ea())},constructor:function(b){I(b).forEach(function(b){0>e.indexOf(b)&&
Z('invalid regl constructor argument "'+b+'". must be one of '+e)})},type:function(b,c,e){f(b,c)||Z("invalid parameter type"+O(e)+". expected "+c+", got "+typeof b)},commandType:H,isTypedArray:function(b,c){be(b)||Z("invalid parameter type"+O(c)+". must be a typed array")},nni:function(b,c){0<=b&&(b|0)===b||Z("invalid parameter type, ("+b+")"+O(c)+". must be a nonnegative integer")},oneOf:c,shaderError:function(b,c,f,e,g){if(!b.getShaderParameter(c,b.COMPILE_STATUS)){c=b.getShaderInfoLog(c);b=e===
b.FRAGMENT_SHADER?"fragment":"vertex";H(f,"string",b+" shader source must be a string",g);var n=F(f,g);f=w(c);B(n,f);I(n).forEach(function(b){function d(a,b){c.push(a);f.push(b||"")}var a=n[b];if(a.hasErrors){var c=[""],f=[""];d("file number "+b+": "+a.name+"\n","color:red;text-decoration:underline;font-weight:bold");a.lines.forEach(function(a){if(0<a.errors.length){d(y(a.number,4)+"|  ","background-color:yellow; font-weight:bold");d(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var b=0;a.errors.forEach(function(c){c=c.message;var h=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(h){var f=h[1];c=h[2];switch(f){case "assign":f="="}b=Math.max(a.line.indexOf(f,b),0)}else b=0;d(y("| ",6));d(y("^^^",b+3)+"\n","font-weight:bold");d(y("| ",6));d(c+"\n","font-weight:bold")});d(y("| ",6)+"\n")}else d(y(a.number,4)+"|  "),d(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(c.join("")):(f[0]=c.join("%c"),console.log.apply(console,f))}});r.raise("Error compiling "+
b+" shader, "+n[0].name)}},linkError:function(b,c,f,e,g){b.getProgramParameter(c,b.LINK_STATUS)||(b=b.getProgramInfoLog(c),f=F(f,g),e='Error linking program with vertex shader, "'+F(e,g)[0].name+'", and fragment shader "'+f[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(e+"\n"+b),r.raise(e))},callSite:G,saveCommandRef:N,saveDrawInfo:function(b,c,f,e){function g(b){return b?e.id(b):0}function n(b,
a){I(a).forEach(function(a){b[e.id(a)]=!0})}N(b);b._fragId=g(b["static"].frag);b._vertId=g(b["static"].vert);var k=b._uniformSet={};n(k,c["static"]);n(k,c.dynamic);c=b._attributeSet={};n(c,f["static"]);n(c,f.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,f,e){b.texture?c(b.texture._texture.internalformat,f,"unsupported texture format for attachment"):c(b.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},
guessCommand:ea,texture2D:function(b,c,f){var e=c.width,g=c.height,n=c.channels;r(0<e&&e<=f.maxTextureSize&&0<g&&g<=f.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||r(!(e&e-1)&&!!e&&!(g&g-1)&&!!g,"incompatible wrap mode for texture, both width and height must be power of 2");1===c.mipmask?1!==e&&1!==g&&r(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(r(!(e&e-1)&&!!e&&!(g&g-1)&&!!g,"texture must be a square power of 2 to support mipmapping"),
r(c.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));5126===c.type&&(0>f.extensions.indexOf("oes_texture_float_linear")&&r(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!b.genMipmaps,"mipmap generation not supported with float textures"));var k=c.images;for(f=0;16>f;++f)if(k[f]){var w=e>>f,a=g>>f;r(c.mipmask&1<<f,"missing mipmap data");var h=k[f];r(h.width===w&&h.height===a,"invalid shape for mip images");r(h.format===c.format&&h.internalformat===
c.internalformat&&h.type===c.type,"incompatible type for mip image");!h.compressed&&h.data&&(w=Math.ceil(ca(h.type,n)*w/h.unpackAlignment)*h.unpackAlignment,r(h.data.byteLength===w*a,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||r(0===(c.mipmask&1<<f),"extra mipmap data");c.compressed&&r(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,c,f,e){var g=b.width,n=b.height,k=b.channels;r(0<g&&g<=e.maxTextureSize&&
0<n&&n<=e.maxTextureSize,"invalid texture shape");r(g===n,"cube map must be square");r(33071===c.wrapS&&33071===c.wrapT,"wrap mode not supported by cube map");for(e=0;e<f.length;++e){var w=f[e];r(w.width===g&&w.height===n,"inconsistent cube map face shape");c.genMipmaps&&(r(!w.compressed,"can not generate mipmap for compressed textures"),r(1===w.mipmask,"can not specify mipmaps and generate mipmaps"));for(var a=w.images,h=0;16>h;++h){var v=a[h];if(v){var y=g>>h,B=n>>h;r(w.mipmask&1<<h,"missing mipmap data");
r(v.width===y&&v.height===B,"invalid shape for mip images");r(v.format===b.format&&v.internalformat===b.internalformat&&v.type===b.type,"incompatible type for mip image");v.compressed||v.data&&r(v.data.byteLength===y*B*Math.max(ca(v.type,k),v.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(A,R,Ib){R.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(A,R,Ib){function k(k){return Array.prototype.slice.call(k)}var Z=A("./extend"),r=A("./compiled-fns");R.exports=function(){function O(){var b=[],c=[];return Z(function(){b.push.apply(b,k(arguments))},{def:function(){var f="v"+y;y++;c.push(f);0<arguments.length&&(b.push(f,"="),b.push.apply(b,k(arguments)),b.push(";"));return f},toString:function(){return k([0<c.length?"var "+c.join(",")+";":"",k(b).join("")]).join("")}})}function f(){function b(k,w){f(k,
w,"=",c.def(k,w),";")}var c=O(),f=O(),v=c.toString,w=f.toString;return Z(function(){c.apply(c,k(arguments))},{def:c.def,entry:c,exit:f,save:b,set:function(f,k,n){b(f,k);c(f,k,"=",n,";")},toString:function(){return v()+w()}})}var c=0,y=0,b={},v={};return{global:O(),link:function(f){var k="$"+c,v=!1;"object"===typeof f&&f.name&&(k=f.name.replace(/ /g,"_"),v=!0);if(k in b)return k;b[k]=f;v||c++;return k},block:O,proc:function(b,c){function y(){var b="a"+r.length;r.push(b);return b}var r=[];c=c||0;for(var w=
0;w<c;++w)y();var w=f(),B=w.toString;return v[b]=Z(w,{arg:y,toString:function(){return k(["function(",r.join(),"){",B(),"}"]).join("")}})},scope:f,cond:function(){var b=k(arguments).join(""),c=f(),v=f(),y=c.toString,w=v.toString;return Z(c,{then:function(){c.apply(c,k(arguments));return this},"else":function(){v.apply(v,k(arguments));return this},toString:function(){var c=w();c&&(c="else{"+c+"}");return k(["if(",b,"){",y(),"}",c]).join("")}})},compile:function(){var c=[],f=[];Object.keys(b).sort(function(b,
c){var f="$"===b.charAt(0),n="$"===c.charAt(0);return f||n?f&&n?+b.slice(1)<+c.slice(1)?-1:1:f&&!n?-1:1:b.localeCompare(c)}).forEach(function(k){var v=b[k];c.push(k);f.push(v)});for(var k=0,v=c.length-1;-1<v;v--)if("$"===c[v].charAt(0)){k=v;break}k=c.slice(k).join();v=r[k];if(!v)throw Error("missing precompiled function with key: "+k);return v.apply(null,f)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(A,R,Ib){R.exports={$0:function(k){var Z,r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca,I,R,e,g,d,z,
U,W,q,oa,L,fa;Z=k.attributes;r=k.current;O=k.framebuffer;f=k.gl;c=k.next;y=k.vao;b=c.blend_color;v=r.blend_color;A=c.blend_equation;ea=r.blend_equation;G=c.blend_func;F=r.blend_func;w=c.colorMask;B=r.colorMask;N=c.depth_range;n=r.depth_range;H=c.polygonOffset_offset;ca=r.polygonOffset_offset;I=c.sample_coverage;R=r.sample_coverage;e=c.scissor_box;g=r.scissor_box;d=c.stencil_func;z=r.stencil_func;U=c.stencil_opBack;W=r.stencil_opBack;q=c.stencil_opFront;oa=r.stencil_opFront;L=c.viewport;fa=r.viewport;
return{poll:function(){var a,h,k,y,Z,jb,ec,na,Na,Y,K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa;r.dirty=!1;h=c.blend_enable;k=c.cull_enable;y=c.depth_enable;Z=c.dither;jb=c.polygonOffset_enable;ec=c.sample_alpha;na=c.sample_enable;Na=c.scissor_enable;Y=c.stencil_enable;K=c.cull_face;M=r.cull_face;P=c.depth_func;sa=r.depth_func;J=c.depth_mask;Wb=r.depth_mask;$a=c.frontFace;Q=r.frontFace;t=c.lineWidth;ma=r.lineWidth;da=c.stencil_mask;Fa=r.stencil_mask;a=O.next;a!==O.cur&&(a?f.bindFramebuffer(36160,a.framebuffer):
f.bindFramebuffer(36160,null),O.cur=a);h!==r.blend_enable&&(h?f.enable(3042):f.disable(3042),r.blend_enable=h);k!==r.cull_enable&&(k?f.enable(2884):f.disable(2884),r.cull_enable=k);y!==r.depth_enable&&(y?f.enable(2929):f.disable(2929),r.depth_enable=y);Z!==r.dither&&(Z?f.enable(3024):f.disable(3024),r.dither=Z);jb!==r.polygonOffset_enable&&(jb?f.enable(32823):f.disable(32823),r.polygonOffset_enable=jb);ec!==r.sample_alpha&&(ec?f.enable(32926):f.disable(32926),r.sample_alpha=ec);na!==r.sample_enable&&
(na?f.enable(32928):f.disable(32928),r.sample_enable=na);Na!==r.scissor_enable&&(Na?f.enable(3089):f.disable(3089),r.scissor_enable=Na);Y!==r.stencil_enable&&(Y?f.enable(2960):f.disable(2960),r.stencil_enable=Y);if(b[0]!==v[0]||b[1]!==v[1]||b[2]!==v[2]||b[3]!==v[3])f.blendColor(b[0],b[1],b[2],b[3]),v[0]=b[0],v[1]=b[1],v[2]=b[2],v[3]=b[3];if(A[0]!==ea[0]||A[1]!==ea[1])f.blendEquationSeparate(A[0],A[1]),ea[0]=A[0],ea[1]=A[1];if(G[0]!==F[0]||G[1]!==F[1]||G[2]!==F[2]||G[3]!==F[3])f.blendFuncSeparate(G[0],
G[1],G[2],G[3]),F[0]=G[0],F[1]=G[1],F[2]=G[2],F[3]=G[3];if(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3])f.colorMask(w[0],w[1],w[2],w[3]),B[0]=w[0],B[1]=w[1],B[2]=w[2],B[3]=w[3];K!==M&&(f.cullFace(K),r.cull_face=K);P!==sa&&(f.depthFunc(P),r.depth_func=P);J!==Wb&&(f.depthMask(J),r.depth_mask=J);if(N[0]!==n[0]||N[1]!==n[1])f.depthRange(N[0],N[1]),n[0]=N[0],n[1]=N[1];$a!==Q&&(f.frontFace($a),r.frontFace=$a);t!==ma&&(f.lineWidth(t),r.lineWidth=t);if(H[0]!==ca[0]||H[1]!==ca[1])f.polygonOffset(H[0],
H[1]),ca[0]=H[0],ca[1]=H[1];if(I[0]!==R[0]||I[1]!==R[1])f.sampleCoverage(I[0],I[1]),R[0]=I[0],R[1]=I[1];if(e[0]!==g[0]||e[1]!==g[1]||e[2]!==g[2]||e[3]!==g[3])f.scissor(e[0],e[1],e[2],e[3]),g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=e[3];if(d[0]!==z[0]||d[1]!==z[1]||d[2]!==z[2])f.stencilFunc(d[0],d[1],d[2]),z[0]=d[0],z[1]=d[1],z[2]=d[2];da!==Fa&&(f.stencilMask(da),r.stencil_mask=da);if(U[0]!==W[0]||U[1]!==W[1]||U[2]!==W[2]||U[3]!==W[3])f.stencilOpSeparate(U[0],U[1],U[2],U[3]),W[0]=U[0],W[1]=U[1],W[2]=U[2],
W[3]=U[3];if(q[0]!==oa[0]||q[1]!==oa[1]||q[2]!==oa[2]||q[3]!==oa[3])f.stencilOpSeparate(q[0],q[1],q[2],q[3]),oa[0]=q[0],oa[1]=q[1],oa[2]=q[2],oa[3]=q[3];if(L[0]!==fa[0]||L[1]!==fa[1]||L[2]!==fa[2]||L[3]!==fa[3])f.viewport(L[0],L[1],L[2],L[3]),fa[0]=L[0],fa[1]=L[1],fa[2]=L[2],fa[3]=L[3]},refresh:function(){var a,h,k,ra,xa,jb,ec,na,Na,Y,K,M,P,sa,J,Wb;r.dirty=!1;h=c.blend_enable;k=c.cull_enable;ra=c.depth_enable;xa=c.dither;jb=c.polygonOffset_enable;ec=c.sample_alpha;na=c.sample_enable;Na=c.scissor_enable;
Y=c.stencil_enable;K=c.cull_face;M=c.depth_func;P=c.depth_mask;sa=c.frontFace;J=c.lineWidth;Wb=c.stencil_mask;(a=O.next)?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);O.cur=a;a=Z[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),
f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,
a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):
(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[6];a.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[7];a.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),
f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=Z[10];a.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=
Z[12];a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[14];a.buffer?(f.enableVertexAttribArray(14),
f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=Z[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);y.currentVAO=null;y.setVAO(y.targetVAO);h?f.enable(3042):f.disable(3042);
r.blend_enable=h;k?f.enable(2884):f.disable(2884);r.cull_enable=k;ra?f.enable(2929):f.disable(2929);r.depth_enable=ra;xa?f.enable(3024):f.disable(3024);r.dither=xa;jb?f.enable(32823):f.disable(32823);r.polygonOffset_enable=jb;ec?f.enable(32926):f.disable(32926);r.sample_alpha=ec;na?f.enable(32928):f.disable(32928);r.sample_enable=na;Na?f.enable(3089):f.disable(3089);r.scissor_enable=Na;Y?f.enable(2960):f.disable(2960);r.stencil_enable=Y;f.blendColor(b[0],b[1],b[2],b[3]);v[0]=b[0];v[1]=b[1];v[2]=b[2];
v[3]=b[3];f.blendEquationSeparate(A[0],A[1]);ea[0]=A[0];ea[1]=A[1];f.blendFuncSeparate(G[0],G[1],G[2],G[3]);F[0]=G[0];F[1]=G[1];F[2]=G[2];F[3]=G[3];f.colorMask(w[0],w[1],w[2],w[3]);B[0]=w[0];B[1]=w[1];B[2]=w[2];B[3]=w[3];f.cullFace(K);r.cull_face=K;f.depthFunc(M);r.depth_func=M;f.depthMask(P);r.depth_mask=P;f.depthRange(N[0],N[1]);n[0]=N[0];n[1]=N[1];f.frontFace(sa);r.frontFace=sa;f.lineWidth(J);r.lineWidth=J;f.polygonOffset(H[0],H[1]);ca[0]=H[0];ca[1]=H[1];f.sampleCoverage(I[0],I[1]);R[0]=I[0];R[1]=
I[1];f.scissor(e[0],e[1],e[2],e[3]);g[0]=e[0];g[1]=e[1];g[2]=e[2];g[3]=e[3];f.stencilFunc(d[0],d[1],d[2]);z[0]=d[0];z[1]=d[1];z[2]=d[2];f.stencilMask(Wb);r.stencil_mask=Wb;f.stencilOpSeparate(U[0],U[1],U[2],U[3]);W[0]=U[0];W[1]=U[1];W[2]=U[2];W[3]=U[3];f.stencilOpSeparate(q[0],q[1],q[2],q[3]);oa[0]=q[0];oa[1]=q[1];oa[2]=q[2];oa[3]=q[3];f.viewport(L[0],L[1],L[2],L[3]);fa[0]=L[0];fa[1]=L[1];fa[2]=L[2];fa[3]=L[3]}}},$3:function(k,Z,r,O){var f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca,I,R,e,g,d,z,U,W,q,oa,L,fa,a,
h,X,ra,xa,jb;f=k.context;c=k.current;y=k.framebuffer;b=k.gl;v=k.next;A=k.shader;ea=k.vao;G=v.blend_color;F=c.blend_color;w=v.blend_equation;B=c.blend_equation;N=v.blend_func;n=c.blend_func;H=v.colorMask;ca=c.colorMask;I=v.depth_range;R=c.depth_range;e=v.polygonOffset_offset;g=c.polygonOffset_offset;d=v.sample_coverage;z=c.sample_coverage;U=v.scissor_box;W=c.scissor_box;q=v.stencil_func;oa=c.stencil_func;L=v.stencil_opBack;fa=c.stencil_opBack;a=v.stencil_opFront;h=c.stencil_opFront;X=v.viewport;ra=
c.viewport;xa={};jb={};return{batch:function(f,k){var r,Y,K,M,P;r=y.next;r!==y.cur&&(r?b.bindFramebuffer(36160,r.framebuffer):b.bindFramebuffer(36160,null),y.cur=r);if(c.dirty){r=v.dither;r!==c.dither&&(r?b.enable(3024):b.disable(3024),c.dither=r);r=v.blend_enable;r!==c.blend_enable&&(r?b.enable(3042):b.disable(3042),c.blend_enable=r);r=G[0];K=G[1];M=G[2];P=G[3];if(r!==F[0]||K!==F[1]||M!==F[2]||P!==F[3])b.blendColor(r,K,M,P),F[0]=r,F[1]=K,F[2]=M,F[3]=P;r=w[0];K=w[1];if(r!==B[0]||K!==B[1])b.blendEquationSeparate(r,
K),B[0]=r,B[1]=K;r=N[0];K=N[1];M=N[2];P=N[3];if(r!==n[0]||K!==n[1]||M!==n[2]||P!==n[3])b.blendFuncSeparate(r,K,M,P),n[0]=r,n[1]=K,n[2]=M,n[3]=P;r=v.depth_enable;r!==c.depth_enable&&(r?b.enable(2929):b.disable(2929),c.depth_enable=r);r=v.depth_func;r!==c.depth_func&&(b.depthFunc(r),c.depth_func=r);r=I[0];K=I[1];if(r!==R[0]||K!==R[1])b.depthRange(r,K),R[0]=r,R[1]=K;r=v.depth_mask;r!==c.depth_mask&&(b.depthMask(r),c.depth_mask=r);r=H[0];K=H[1];M=H[2];P=H[3];if(r!==ca[0]||K!==ca[1]||M!==ca[2]||P!==ca[3])b.colorMask(r,
K,M,P),ca[0]=r,ca[1]=K,ca[2]=M,ca[3]=P;r=v.cull_enable;r!==c.cull_enable&&(r?b.enable(2884):b.disable(2884),c.cull_enable=r);r=v.cull_face;r!==c.cull_face&&(b.cullFace(r),c.cull_face=r);r=v.frontFace;r!==c.frontFace&&(b.frontFace(r),c.frontFace=r);r=v.lineWidth;r!==c.lineWidth&&(b.lineWidth(r),c.lineWidth=r);r=v.polygonOffset_enable;r!==c.polygonOffset_enable&&(r?b.enable(32823):b.disable(32823),c.polygonOffset_enable=r);r=e[0];K=e[1];if(r!==g[0]||K!==g[1])b.polygonOffset(r,K),g[0]=r,g[1]=K;r=v.sample_alpha;
r!==c.sample_alpha&&(r?b.enable(32926):b.disable(32926),c.sample_alpha=r);r=v.sample_enable;r!==c.sample_enable&&(r?b.enable(32928):b.disable(32928),c.sample_enable=r);r=d[0];K=d[1];if(r!==z[0]||K!==z[1])b.sampleCoverage(r,K),z[0]=r,z[1]=K;r=v.stencil_enable;r!==c.stencil_enable&&(r?b.enable(2960):b.disable(2960),c.stencil_enable=r);r=v.stencil_mask;r!==c.stencil_mask&&(b.stencilMask(r),c.stencil_mask=r);r=q[0];K=q[1];M=q[2];if(r!==oa[0]||K!==oa[1]||M!==oa[2])b.stencilFunc(r,K,M),oa[0]=r,oa[1]=K,
oa[2]=M;r=a[0];K=a[1];M=a[2];P=a[3];if(r!==h[0]||K!==h[1]||M!==h[2]||P!==h[3])b.stencilOpSeparate(r,K,M,P),h[0]=r,h[1]=K,h[2]=M,h[3]=P;r=L[0];K=L[1];M=L[2];P=L[3];if(r!==fa[0]||K!==fa[1]||M!==fa[2]||P!==fa[3])b.stencilOpSeparate(r,K,M,P),fa[0]=r,fa[1]=K,fa[2]=M,fa[3]=P;r=v.scissor_enable;r!==c.scissor_enable&&(r?b.enable(3089):b.disable(3089),c.scissor_enable=r);r=U[0];K=U[1];M=U[2];P=U[3];if(r!==W[0]||K!==W[1]||M!==W[2]||P!==W[3])b.scissor(r,K,M,P),W[0]=r,W[1]=K,W[2]=M,W[3]=P;r=X[0];K=X[1];M=X[2];
P=X[3];if(r!==ra[0]||K!==ra[1]||M!==ra[2]||P!==ra[3])b.viewport(r,K,M,P),ra[0]=r,ra[1]=K,ra[2]=M,ra[3]=P;c.dirty=!1}if(r=c.profile)Y=performance.now(),Z.count+=k;K=A.program(A.vert,A.frag);b.useProgram(K.program);ea.setVAO(null);M=K.id;(P=jb[M])||(P=jb[M]=O(K));P.call(this,f,k);ea.setVAO(null);r&&(Z.cpuTime+=performance.now()-Y)},draw:function(f){var k,O,Y,K,M;k=y.next;k!==y.cur&&(k?b.bindFramebuffer(36160,k.framebuffer):b.bindFramebuffer(36160,null),y.cur=k);if(c.dirty){k=v.dither;k!==c.dither&&
(k?b.enable(3024):b.disable(3024),c.dither=k);k=v.blend_enable;k!==c.blend_enable&&(k?b.enable(3042):b.disable(3042),c.blend_enable=k);k=G[0];Y=G[1];K=G[2];M=G[3];if(k!==F[0]||Y!==F[1]||K!==F[2]||M!==F[3])b.blendColor(k,Y,K,M),F[0]=k,F[1]=Y,F[2]=K,F[3]=M;k=w[0];Y=w[1];if(k!==B[0]||Y!==B[1])b.blendEquationSeparate(k,Y),B[0]=k,B[1]=Y;k=N[0];Y=N[1];K=N[2];M=N[3];if(k!==n[0]||Y!==n[1]||K!==n[2]||M!==n[3])b.blendFuncSeparate(k,Y,K,M),n[0]=k,n[1]=Y,n[2]=K,n[3]=M;k=v.depth_enable;k!==c.depth_enable&&(k?
b.enable(2929):b.disable(2929),c.depth_enable=k);k=v.depth_func;k!==c.depth_func&&(b.depthFunc(k),c.depth_func=k);k=I[0];Y=I[1];if(k!==R[0]||Y!==R[1])b.depthRange(k,Y),R[0]=k,R[1]=Y;k=v.depth_mask;k!==c.depth_mask&&(b.depthMask(k),c.depth_mask=k);k=H[0];Y=H[1];K=H[2];M=H[3];if(k!==ca[0]||Y!==ca[1]||K!==ca[2]||M!==ca[3])b.colorMask(k,Y,K,M),ca[0]=k,ca[1]=Y,ca[2]=K,ca[3]=M;k=v.cull_enable;k!==c.cull_enable&&(k?b.enable(2884):b.disable(2884),c.cull_enable=k);k=v.cull_face;k!==c.cull_face&&(b.cullFace(k),
c.cull_face=k);k=v.frontFace;k!==c.frontFace&&(b.frontFace(k),c.frontFace=k);k=v.lineWidth;k!==c.lineWidth&&(b.lineWidth(k),c.lineWidth=k);k=v.polygonOffset_enable;k!==c.polygonOffset_enable&&(k?b.enable(32823):b.disable(32823),c.polygonOffset_enable=k);k=e[0];Y=e[1];if(k!==g[0]||Y!==g[1])b.polygonOffset(k,Y),g[0]=k,g[1]=Y;k=v.sample_alpha;k!==c.sample_alpha&&(k?b.enable(32926):b.disable(32926),c.sample_alpha=k);k=v.sample_enable;k!==c.sample_enable&&(k?b.enable(32928):b.disable(32928),c.sample_enable=
k);k=d[0];Y=d[1];if(k!==z[0]||Y!==z[1])b.sampleCoverage(k,Y),z[0]=k,z[1]=Y;k=v.stencil_enable;k!==c.stencil_enable&&(k?b.enable(2960):b.disable(2960),c.stencil_enable=k);k=v.stencil_mask;k!==c.stencil_mask&&(b.stencilMask(k),c.stencil_mask=k);k=q[0];Y=q[1];K=q[2];if(k!==oa[0]||Y!==oa[1]||K!==oa[2])b.stencilFunc(k,Y,K),oa[0]=k,oa[1]=Y,oa[2]=K;k=a[0];Y=a[1];K=a[2];M=a[3];if(k!==h[0]||Y!==h[1]||K!==h[2]||M!==h[3])b.stencilOpSeparate(k,Y,K,M),h[0]=k,h[1]=Y,h[2]=K,h[3]=M;k=L[0];Y=L[1];K=L[2];M=L[3];if(k!==
fa[0]||Y!==fa[1]||K!==fa[2]||M!==fa[3])b.stencilOpSeparate(k,Y,K,M),fa[0]=k,fa[1]=Y,fa[2]=K,fa[3]=M;k=v.scissor_enable;k!==c.scissor_enable&&(k?b.enable(3089):b.disable(3089),c.scissor_enable=k);k=U[0];Y=U[1];K=U[2];M=U[3];if(k!==W[0]||Y!==W[1]||K!==W[2]||M!==W[3])b.scissor(k,Y,K,M),W[0]=k,W[1]=Y,W[2]=K,W[3]=M;k=X[0];Y=X[1];K=X[2];M=X[3];if(k!==ra[0]||Y!==ra[1]||K!==ra[2]||M!==ra[3])b.viewport(k,Y,K,M),ra[0]=k,ra[1]=Y,ra[2]=K,ra[3]=M;c.dirty=!1}if(k=c.profile)O=performance.now(),Z.count++;Y=A.program(A.vert,
A.frag);b.useProgram(Y.program);ea.setVAO(null);K=Y.id;(M=xa[K])||(M=xa[K]=r(Y));M.call(this,f);ea.setVAO(null);k&&(Z.cpuTime+=performance.now()-O)},scope:function(a,b,d){var h,e;if(h=c.profile)e=performance.now(),Z.count++;b(f,a,d);h&&(Z.cpuTime+=performance.now()-e)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(k,
Z,r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca,I,R,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb,ec,na,Na,Y,K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta,cc,nc,kc,ud,yc,V,C,la,Da,ub,Qc,Uc,D,u,ka,ua,T,ha,qa){var E,m,ba,x,ja,ia,l,tc,aa,p,Db,Ab,Ve,de,we,ee,Kd,se,od,he,ue,Gd,Bd,Zd,Wd,Ze,yf,bf,wd,Fe,Sd,Td,ne,Xd,rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb;E=k.attributes;m=k.context;ba=k.current;x=k.draw;ja=k.elements;ia=k.framebuffer;l=k.gl;tc=k.next;aa=k.shader;
p=k.uniforms;Db=k.vao;Ab=tc.blend_color;Ve=ba.blend_color;de=tc.blend_equation;we=ba.blend_equation;ee=tc.blend_func;Kd=ba.blend_func;se=tc.colorMask;od=ba.colorMask;he=tc.depth_range;ue=ba.depth_range;Gd=tc.polygonOffset_offset;Bd=ba.polygonOffset_offset;Zd=tc.sample_coverage;Wd=ba.sample_coverage;Ze=tc.scissor_box;yf=ba.scissor_box;bf=tc.stencil_func;wd=ba.stencil_func;Fe=tc.stencil_opBack;Sd=ba.stencil_opBack;Td=tc.stencil_opFront;ne=ba.stencil_opFront;Xd=tc.viewport;rd=ba.viewport;id={};vd={};
pd=new Float32Array(16);dd=new Float32Array(16);oc=new Float32Array(16);sd=new Float32Array(16);fd=new Float32Array(16);Lc=new Float32Array(16);qc=new Float32Array(16);ab=new Float32Array(16);Ic=new Float32Array(16);Fb=new Float32Array(16);pc=new Float32Array(16);Ta=new Float32Array(16);Jc=new Float32Array(16);ac=new Float32Array(16);rc=new Float32Array(16);Cd=new Float32Array(16);xd=new Float32Array(16);Bc=new Float32Array(16);Xb=new Float32Array(16);Gc=new Float32Array(16);Rc=new Float32Array(16);
La=new Float32Array(16);vb=new Float32Array(16);Wa=new Float32Array(16);Aa=new Float32Array(16);ld=new Float32Array(16);gb=new Float32Array(16);Sa=new Float32Array(16);Hb=new Float32Array(16);cb=new Float32Array(16);fc=new Float32Array(16);Rb=new Float32Array(16);return{batch:function(a,d){var h,e,g,k;h=ia.next;h!==ia.cur&&(h?l.bindFramebuffer(36160,h.framebuffer):l.bindFramebuffer(36160,null),ia.cur=h);if(ba.dirty){var p,q,r,z,aa,Z,L,I,U,W,X,ab,Ta,va,fa,wa,Ab,Fb,Ba,ac,Ja,oa,Lc,Ra,fd;p=se[0];q=se[1];
r=se[2];z=se[3];if(p!==od[0]||q!==od[1]||r!==od[2]||z!==od[3])l.colorMask(p,q,r,z),od[0]=p,od[1]=q,od[2]=r,od[3]=z;aa=tc.frontFace;aa!==ba.frontFace&&(l.frontFace(aa),ba.frontFace=aa);Z=tc.polygonOffset_enable;Z!==ba.polygonOffset_enable&&(Z?l.enable(32823):l.disable(32823),ba.polygonOffset_enable=Z);L=Gd[0];I=Gd[1];if(L!==Bd[0]||I!==Bd[1])l.polygonOffset(L,I),Bd[0]=L,Bd[1]=I;U=tc.sample_alpha;U!==ba.sample_alpha&&(U?l.enable(32926):l.disable(32926),ba.sample_alpha=U);W=tc.sample_enable;W!==ba.sample_enable&&
(W?l.enable(32928):l.disable(32928),ba.sample_enable=W);X=Zd[0];ab=Zd[1];if(X!==Wd[0]||ab!==Wd[1])l.sampleCoverage(X,ab),Wd[0]=X,Wd[1]=ab;Ta=tc.stencil_enable;Ta!==ba.stencil_enable&&(Ta?l.enable(2960):l.disable(2960),ba.stencil_enable=Ta);va=tc.stencil_mask;va!==ba.stencil_mask&&(l.stencilMask(va),ba.stencil_mask=va);fa=bf[0];wa=bf[1];Ab=bf[2];if(fa!==wd[0]||wa!==wd[1]||Ab!==wd[2])l.stencilFunc(fa,wa,Ab),wd[0]=fa,wd[1]=wa,wd[2]=Ab;Fb=Td[0];Ba=Td[1];ac=Td[2];Ja=Td[3];if(Fb!==ne[0]||Ba!==ne[1]||ac!==
ne[2]||Ja!==ne[3])l.stencilOpSeparate(Fb,Ba,ac,Ja),ne[0]=Fb,ne[1]=Ba,ne[2]=ac,ne[3]=Ja;oa=Fe[0];Lc=Fe[1];Ra=Fe[2];fd=Fe[3];if(oa!==Sd[0]||Lc!==Sd[1]||Ra!==Sd[2]||fd!==Sd[3])l.stencilOpSeparate(oa,Lc,Ra,fd),Sd[0]=oa,Sd[1]=Lc,Sd[2]=Ra,Sd[3]=fd}l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);ba.blend_enable=!1;l.blendEquationSeparate(32774,32774);we[0]=32774;we[1]=32774;l.blendFuncSeparate(770,771,1,1);Kd[0]=770;Kd[1]=771;Kd[2]=1;Kd[3]=1;l.enable(2884);ba.cull_enable=!0;l.cullFace(1029);
ba.cull_face=1029;l.enable(2929);ba.depth_enable=!0;l.depthFunc(513);ba.depth_func=513;l.depthMask(!0);ba.depth_mask=!0;l.depthRange(0,1);ue[0]=0;ue[1]=1;l.disable(3024);ba.dither=!1;l.lineWidth(2);ba.lineWidth=2;l.enable(3089);ba.scissor_enable=!0;e=ba.profile;ba.profile=!1;l.useProgram(ec.program);var ra,Za,qc,ya,Ze,Ka,oc,fb,ib,za,Jc,Ea,rb,sb,Xa,Ya,Ic,rc,R,Va,Mb,dd,Ga,pc,Qa,Ca,mb,xb,Eb,tb,pd,yb,sd;Db.setVAO(null);ra=cc.location;Za=E[ra];Za.buffer||l.enableVertexAttribArray(ra);if(Za.type!==O.dtype||
4!==Za.size||Za.buffer!==O||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)l.bindBuffer(34962,O.buffer),l.vertexAttribPointer(ra,4,O.dtype,!1,0,0),Za.type=O.dtype,Za.size=4,Za.buffer=O,Za.normalized=!1,Za.offset=0,Za.stride=0;qc=nc.location;ya=E[qc];ya.buffer||l.enableVertexAttribArray(qc);if(ya.type!==f.dtype||4!==ya.size||ya.buffer!==f||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,f.buffer),l.vertexAttribPointer(qc,4,f.dtype,!1,0,0),ya.type=f.dtype,ya.size=4,ya.buffer=f,
ya.normalized=!1,ya.offset=0,ya.stride=0;Ze=kc.location;Ka=E[Ze];Ka.buffer||l.enableVertexAttribArray(Ze);if(Ka.type!==c.dtype||4!==Ka.size||Ka.buffer!==c||!1!==Ka.normalized||0!==Ka.offset||0!==Ka.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(Ze,4,c.dtype,!1,0,0),Ka.type=c.dtype,Ka.size=4,Ka.buffer=c,Ka.normalized=!1,Ka.offset=0,Ka.stride=0;oc=ud.location;fb=E[oc];fb.buffer||l.enableVertexAttribArray(oc);if(fb.type!==y.dtype||4!==fb.size||fb.buffer!==y||!1!==fb.normalized||0!==fb.offset||
0!==fb.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(oc,4,y.dtype,!1,0,0),fb.type=y.dtype,fb.size=4,fb.buffer=y,fb.normalized=!1,fb.offset=0,fb.stride=0;ib=yc.location;za=E[ib];za.buffer||l.enableVertexAttribArray(ib);if(za.type!==b.dtype||4!==za.size||za.buffer!==b||!1!==za.normalized||0!==za.offset||0!==za.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(ib,4,b.dtype,!1,0,0),za.type=b.dtype,za.size=4,za.buffer=b,za.normalized=!1,za.offset=0,za.stride=0;Jc=V.location;Ea=E[Jc];
Ea.buffer||l.enableVertexAttribArray(Jc);if(Ea.type!==v.dtype||4!==Ea.size||Ea.buffer!==v||!1!==Ea.normalized||0!==Ea.offset||0!==Ea.stride)l.bindBuffer(34962,v.buffer),l.vertexAttribPointer(Jc,4,v.dtype,!1,0,0),Ea.type=v.dtype,Ea.size=4,Ea.buffer=v,Ea.normalized=!1,Ea.offset=0,Ea.stride=0;rb=C.location;sb=E[rb];sb.buffer||l.enableVertexAttribArray(rb);if(sb.type!==A.dtype||4!==sb.size||sb.buffer!==A||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(rb,
4,A.dtype,!1,0,0),sb.type=A.dtype,sb.size=4,sb.buffer=A,sb.normalized=!1,sb.offset=0,sb.stride=0;Xa=la.location;Ya=E[Xa];Ya.buffer||l.enableVertexAttribArray(Xa);if(Ya.type!==ea.dtype||4!==Ya.size||Ya.buffer!==ea||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)l.bindBuffer(34962,ea.buffer),l.vertexAttribPointer(Xa,4,ea.dtype,!1,0,0),Ya.type=ea.dtype,Ya.size=4,Ya.buffer=ea,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ic=Da.location;rc=E[Ic];rc.buffer||l.enableVertexAttribArray(Ic);if(rc.type!==G.dtype||
4!==rc.size||rc.buffer!==G||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)l.bindBuffer(34962,G.buffer),l.vertexAttribPointer(Ic,4,G.dtype,!1,0,0),rc.type=G.dtype,rc.size=4,rc.buffer=G,rc.normalized=!1,rc.offset=0,rc.stride=0;R=ub.location;Va=E[R];Va.buffer||l.enableVertexAttribArray(R);if(Va.type!==F.dtype||4!==Va.size||Va.buffer!==F||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer(R,4,F.dtype,!1,0,0),Va.type=F.dtype,Va.size=4,Va.buffer=F,Va.normalized=
!1,Va.offset=0,Va.stride=0;Mb=Qc.location;dd=E[Mb];dd.buffer||l.enableVertexAttribArray(Mb);if(dd.type!==w.dtype||4!==dd.size||dd.buffer!==w||!1!==dd.normalized||0!==dd.offset||0!==dd.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(Mb,4,w.dtype,!1,0,0),dd.type=w.dtype,dd.size=4,dd.buffer=w,dd.normalized=!1,dd.offset=0,dd.stride=0;Ga=Uc.location;pc=E[Ga];pc.buffer||l.enableVertexAttribArray(Ga);if(pc.type!==B.dtype||4!==pc.size||pc.buffer!==B||!1!==pc.normalized||0!==pc.offset||0!==pc.stride)l.bindBuffer(34962,
B.buffer),l.vertexAttribPointer(Ga,4,B.dtype,!1,0,0),pc.type=B.dtype,pc.size=4,pc.buffer=B,pc.normalized=!1,pc.offset=0,pc.stride=0;Qa=D.location;Ca=E[Qa];Ca.buffer||l.enableVertexAttribArray(Qa);if(Ca.type!==N.dtype||4!==Ca.size||Ca.buffer!==N||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)l.bindBuffer(34962,N.buffer),l.vertexAttribPointer(Qa,4,N.dtype,!1,0,0),Ca.type=N.dtype,Ca.size=4,Ca.buffer=N,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;mb=u.location;xb=E[mb];xb.buffer||l.enableVertexAttribArray(mb);
if(xb.type!==n.dtype||4!==xb.size||xb.buffer!==n||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)l.bindBuffer(34962,n.buffer),l.vertexAttribPointer(mb,4,n.dtype,!1,0,0),xb.type=n.dtype,xb.size=4,xb.buffer=n,xb.normalized=!1,xb.offset=0,xb.stride=0;Eb=ka.location;tb=E[Eb];tb.buffer||l.enableVertexAttribArray(Eb);if(tb.type!==H.dtype||4!==tb.size||tb.buffer!==H||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(Eb,4,H.dtype,!1,0,0),tb.type=H.dtype,
tb.size=4,tb.buffer=H,tb.normalized=!1,tb.offset=0,tb.stride=0;pd=Na.location;yb=E[pd];yb.buffer||l.enableVertexAttribArray(pd);if(yb.type!==ca.dtype||4!==yb.size||yb.buffer!==ca||!1!==yb.normalized||0!==yb.offset||0!==yb.stride)l.bindBuffer(34962,ca.buffer),l.vertexAttribPointer(pd,4,ca.dtype,!1,0,0),yb.type=ca.dtype,yb.size=4,yb.buffer=ca,yb.normalized=!1,yb.offset=0,yb.stride=0;l.uniform1i(ua.location,na.bind());(sd=x.elements)?l.bindBuffer(34963,sd.buffer.buffer):Db.currentVAO&&(sd=ja.getElements(Db.currentVAO.elements))&&
l.bindBuffer(34963,sd.buffer.buffer);for(g=0;g<d;++g){k=a[g];var ee,he,Xd,Cd,de,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,xa,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,jb,kd,qd,Xc,be,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d;id.height=k.viewportHeight;id.width=k.viewportWidth;id.x=k.viewportX;id.y=k.viewportY;ee=id.x|0;he=id.y|0;Xd="width"in id?id.width|0:m.framebufferWidth-ee;Cd="height"in id?id.height|0:m.framebufferHeight-he;de=m.viewportWidth;m.viewportWidth=Xd;Vb=m.viewportHeight;
m.viewportHeight=Cd;l.viewport(ee,he,Xd,Cd);rd[0]=ee;rd[1]=he;rd[2]=Xd;rd[3]=Cd;vd.height=k.scissorHeight;vd.width=k.scissorWidth;vd.x=k.scissorX;vd.y=k.scissorY;bc=vd.x|0;Pb=vd.y|0;Ha="width"in vd?vd.width|0:m.framebufferWidth-bc;Yb="height"in vd?vd.height|0:m.framebufferHeight-Pb;l.scissor(bc,Pb,Ha,Yb);yf[0]=bc;yf[1]=Pb;yf[2]=Ha;yf[3]=Yb;nb=k.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(xd[0]=nb[0],xd[1]=nb[1],xd[2]=nb[2],xd[3]=nb[3],xd[4]=nb[4],xd[5]=
nb[5],xd[6]=nb[6],xd[7]=nb[7],xd[8]=nb[8],xd[9]=nb[9],xd[10]=nb[10],xd[11]=nb[11],xd[12]=nb[12],xd[13]=nb[13],xd[14]=nb[14],xd[15]=nb[15],xd));zb=k.dim1A;l.uniformMatrix4fv(J.location,!1,Array.isArray(zb)||zb instanceof Float32Array?zb:(Bc[0]=zb[0],Bc[1]=zb[1],Bc[2]=zb[2],Bc[3]=zb[3],Bc[4]=zb[4],Bc[5]=zb[5],Bc[6]=zb[6],Bc[7]=zb[7],Bc[8]=zb[8],Bc[9]=zb[9],Bc[10]=zb[10],Bc[11]=zb[11],Bc[12]=zb[12],Bc[13]=zb[13],Bc[14]=zb[14],Bc[15]=zb[15],Bc));Nb=k.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(Xb[0]=Nb[0],Xb[1]=Nb[1],Xb[2]=Nb[2],Xb[3]=Nb[3],Xb[4]=Nb[4],Xb[5]=Nb[5],Xb[6]=Nb[6],Xb[7]=Nb[7],Xb[8]=Nb[8],Xb[9]=Nb[9],Xb[10]=Nb[10],Xb[11]=Nb[11],Xb[12]=Nb[12],Xb[13]=Nb[13],Xb[14]=Nb[14],Xb[15]=Nb[15],Xb));Qb=k.dim1B;l.uniformMatrix4fv(Wb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Gc[0]=Qb[0],Gc[1]=Qb[1],Gc[2]=Qb[2],Gc[3]=Qb[3],Gc[4]=Qb[4],Gc[5]=Qb[5],Gc[6]=Qb[6],Gc[7]=Qb[7],Gc[8]=Qb[8],Gc[9]=Qb[9],Gc[10]=Qb[10],Gc[11]=Qb[11],Gc[12]=Qb[12],Gc[13]=
Qb[13],Gc[14]=Qb[14],Gc[15]=Qb[15],Gc));hc=k.dim0C;l.uniformMatrix4fv(P.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Rc[0]=hc[0],Rc[1]=hc[1],Rc[2]=hc[2],Rc[3]=hc[3],Rc[4]=hc[4],Rc[5]=hc[5],Rc[6]=hc[6],Rc[7]=hc[7],Rc[8]=hc[8],Rc[9]=hc[9],Rc[10]=hc[10],Rc[11]=hc[11],Rc[12]=hc[12],Rc[13]=hc[13],Rc[14]=hc[14],Rc[15]=hc[15],Rc));jc=k.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(La[0]=jc[0],La[1]=jc[1],La[2]=jc[2],La[3]=jc[3],La[4]=jc[4],La[5]=
jc[5],La[6]=jc[6],La[7]=jc[7],La[8]=jc[8],La[9]=jc[9],La[10]=jc[10],La[11]=jc[11],La[12]=jc[12],La[13]=jc[13],La[14]=jc[14],La[15]=jc[15],La));xa=k.dim0D;l.uniformMatrix4fv(sa.location,!1,Array.isArray(xa)||xa instanceof Float32Array?xa:(vb[0]=xa[0],vb[1]=xa[1],vb[2]=xa[2],vb[3]=xa[3],vb[4]=xa[4],vb[5]=xa[5],vb[6]=xa[6],vb[7]=xa[7],vb[8]=xa[8],vb[9]=xa[9],vb[10]=xa[10],vb[11]=xa[11],vb[12]=xa[12],vb[13]=xa[13],vb[14]=xa[14],vb[15]=xa[15],vb));Cc=k.dim1D;l.uniformMatrix4fv(Q.location,!1,Array.isArray(Cc)||
Cc instanceof Float32Array?Cc:(Wa[0]=Cc[0],Wa[1]=Cc[1],Wa[2]=Cc[2],Wa[3]=Cc[3],Wa[4]=Cc[4],Wa[5]=Cc[5],Wa[6]=Cc[6],Wa[7]=Cc[7],Wa[8]=Cc[8],Wa[9]=Cc[9],Wa[10]=Cc[10],Wa[11]=Cc[11],Wa[12]=Cc[12],Wa[13]=Cc[13],Wa[14]=Cc[14],Wa[15]=Cc[15],Wa));Dc=k.loA;l.uniformMatrix4fv($b.location,!1,Array.isArray(Dc)||Dc instanceof Float32Array?Dc:(Aa[0]=Dc[0],Aa[1]=Dc[1],Aa[2]=Dc[2],Aa[3]=Dc[3],Aa[4]=Dc[4],Aa[5]=Dc[5],Aa[6]=Dc[6],Aa[7]=Dc[7],Aa[8]=Dc[8],Aa[9]=Dc[9],Aa[10]=Dc[10],Aa[11]=Dc[11],Aa[12]=Dc[12],Aa[13]=
Dc[13],Aa[14]=Dc[14],Aa[15]=Dc[15],Aa));Ec=k.hiA;l.uniformMatrix4fv(ma.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(ld[0]=Ec[0],ld[1]=Ec[1],ld[2]=Ec[2],ld[3]=Ec[3],ld[4]=Ec[4],ld[5]=Ec[5],ld[6]=Ec[6],ld[7]=Ec[7],ld[8]=Ec[8],ld[9]=Ec[9],ld[10]=Ec[10],ld[11]=Ec[11],ld[12]=Ec[12],ld[13]=Ec[13],ld[14]=Ec[14],ld[15]=Ec[15],ld));Nc=k.loB;l.uniformMatrix4fv(Ia.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(gb[0]=Nc[0],gb[1]=Nc[1],gb[2]=Nc[2],gb[3]=Nc[3],gb[4]=Nc[4],gb[5]=
Nc[5],gb[6]=Nc[6],gb[7]=Nc[7],gb[8]=Nc[8],gb[9]=Nc[9],gb[10]=Nc[10],gb[11]=Nc[11],gb[12]=Nc[12],gb[13]=Nc[13],gb[14]=Nc[14],gb[15]=Nc[15],gb));$c=k.hiB;l.uniformMatrix4fv(da.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Sa[0]=$c[0],Sa[1]=$c[1],Sa[2]=$c[2],Sa[3]=$c[3],Sa[4]=$c[4],Sa[5]=$c[5],Sa[6]=$c[6],Sa[7]=$c[7],Sa[8]=$c[8],Sa[9]=$c[9],Sa[10]=$c[10],Sa[11]=$c[11],Sa[12]=$c[12],Sa[13]=$c[13],Sa[14]=$c[14],Sa[15]=$c[15],Sa));Sc=k.loC;l.uniformMatrix4fv(S.location,!1,Array.isArray(Sc)||
Sc instanceof Float32Array?Sc:(Hb[0]=Sc[0],Hb[1]=Sc[1],Hb[2]=Sc[2],Hb[3]=Sc[3],Hb[4]=Sc[4],Hb[5]=Sc[5],Hb[6]=Sc[6],Hb[7]=Sc[7],Hb[8]=Sc[8],Hb[9]=Sc[9],Hb[10]=Sc[10],Hb[11]=Sc[11],Hb[12]=Sc[12],Hb[13]=Sc[13],Hb[14]=Sc[14],Hb[15]=Sc[15],Hb));Oc=k.hiC;l.uniformMatrix4fv(Fa.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(cb[0]=Oc[0],cb[1]=Oc[1],cb[2]=Oc[2],cb[3]=Oc[3],cb[4]=Oc[4],cb[5]=Oc[5],cb[6]=Oc[6],cb[7]=Oc[7],cb[8]=Oc[8],cb[9]=Oc[9],cb[10]=Oc[10],cb[11]=Oc[11],cb[12]=Oc[12],cb[13]=
Oc[13],cb[14]=Oc[14],cb[15]=Oc[15],cb));Lb=k.loD;l.uniformMatrix4fv(ob.location,!1,Array.isArray(Lb)||Lb instanceof Float32Array?Lb:(fc[0]=Lb[0],fc[1]=Lb[1],fc[2]=Lb[2],fc[3]=Lb[3],fc[4]=Lb[4],fc[5]=Lb[5],fc[6]=Lb[6],fc[7]=Lb[7],fc[8]=Lb[8],fc[9]=Lb[9],fc[10]=Lb[10],fc[11]=Lb[11],fc[12]=Lb[12],fc[13]=Lb[13],fc[14]=Lb[14],fc[15]=Lb[15],fc));Gb=k.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(Gb)||Gb instanceof Float32Array?Gb:(Rb[0]=Gb[0],Rb[1]=Gb[1],Rb[2]=Gb[2],Rb[3]=Gb[3],Rb[4]=Gb[4],Rb[5]=
Gb[5],Rb[6]=Gb[6],Rb[7]=Gb[7],Rb[8]=Gb[8],Rb[9]=Gb[9],Rb[10]=Gb[10],Rb[11]=Gb[11],Rb[12]=Gb[12],Rb[13]=Gb[13],Rb[14]=Gb[14],Rb[15]=Gb[15],Rb));Pc=k.resolution;Hc=Pc[0];ic=Pc[1];g&&Tc===Hc&&Wc===ic||(Tc=Hc,Wc=ic,l.uniform2f(T.location,Hc,ic));jb=k.viewBoxPos;kd=jb[0];Xc=jb[1];g&&qd===kd&&be===Xc||(qd=kd,be=Xc,l.uniform2f(ha.location,kd,Xc));Ld=k.viewBoxSize;le=Ld[0];Ud=Ld[1];g&&xe===le&&Hd===Ud||(xe=le,Hd=Ud,l.uniform2f(qa.location,le,Ud));Ed=k.maskHeight;g&&ed===Ed||(ed=Ed,l.uniform1f(ga.location,
Ed));Fc=k.drwLayer;g&&nd===Fc||(nd=Fc,l.uniform1f(t.location,Fc));gd=k.contextColor;bd=gd[0];zd=gd[1];te=gd[2];Ce=gd[3];g&&hd===bd&&Ad===zd&&ve===te&&ge===Ce||(hd=bd,Ad=zd,ve=te,ge=Ce,l.uniform4f(Y.location,bd,zd,te,Ce));(fe=k.maskTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);ce=fe._texture;l.uniform1i(ta.location,ce.bind());pe=k.offset;if($d=k.count)sd?l.drawElements(1,$d,sd.type,pe<<(sd.type-5121>>1)):l.drawArrays(1,pe,$d),m.viewportWidth=de,m.viewportHeight=Vb,ce.unbind()}na.unbind();
ba.dirty=!0;Db.setVAO(null);ba.profile=e},draw:function(a){var d,h,e,g,k,p;d=ia.next;d!==ia.cur&&(d?l.bindFramebuffer(36160,d.framebuffer):l.bindFramebuffer(36160,null),ia.cur=d);if(ba.dirty){d=se[0];p=se[1];h=se[2];e=se[3];if(d!==od[0]||p!==od[1]||h!==od[2]||e!==od[3])l.colorMask(d,p,h,e),od[0]=d,od[1]=p,od[2]=h,od[3]=e;d=tc.frontFace;d!==ba.frontFace&&(l.frontFace(d),ba.frontFace=d);d=tc.polygonOffset_enable;d!==ba.polygonOffset_enable&&(d?l.enable(32823):l.disable(32823),ba.polygonOffset_enable=
d);d=Gd[0];p=Gd[1];if(d!==Bd[0]||p!==Bd[1])l.polygonOffset(d,p),Bd[0]=d,Bd[1]=p;d=tc.sample_alpha;d!==ba.sample_alpha&&(d?l.enable(32926):l.disable(32926),ba.sample_alpha=d);d=tc.sample_enable;d!==ba.sample_enable&&(d?l.enable(32928):l.disable(32928),ba.sample_enable=d);d=Zd[0];p=Zd[1];if(d!==Wd[0]||p!==Wd[1])l.sampleCoverage(d,p),Wd[0]=d,Wd[1]=p;d=tc.stencil_enable;d!==ba.stencil_enable&&(d?l.enable(2960):l.disable(2960),ba.stencil_enable=d);d=tc.stencil_mask;d!==ba.stencil_mask&&(l.stencilMask(d),
ba.stencil_mask=d);d=bf[0];p=bf[1];h=bf[2];if(d!==wd[0]||p!==wd[1]||h!==wd[2])l.stencilFunc(d,p,h),wd[0]=d,wd[1]=p,wd[2]=h;d=Td[0];p=Td[1];h=Td[2];e=Td[3];if(d!==ne[0]||p!==ne[1]||h!==ne[2]||e!==ne[3])l.stencilOpSeparate(d,p,h,e),ne[0]=d,ne[1]=p,ne[2]=h,ne[3]=e;d=Fe[0];p=Fe[1];h=Fe[2];e=Fe[3];if(d!==Sd[0]||p!==Sd[1]||h!==Sd[2]||e!==Sd[3])l.stencilOpSeparate(d,p,h,e),Sd[0]=d,Sd[1]=p,Sd[2]=h,Sd[3]=e}id.height=a.viewportHeight;id.width=a.viewportWidth;id.x=a.viewportX;id.y=a.viewportY;h=id.x|0;e=id.y|
0;g="width"in id?id.width|0:m.framebufferWidth-h;k="height"in id?id.height|0:m.framebufferHeight-e;d=m.viewportWidth;m.viewportWidth=g;p=m.viewportHeight;m.viewportHeight=k;l.viewport(h,e,g,k);rd[0]=h;rd[1]=e;rd[2]=g;rd[3]=k;l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);ba.blend_enable=!1;l.blendEquationSeparate(32774,32774);we[0]=32774;we[1]=32774;l.blendFuncSeparate(770,771,1,1);Kd[0]=770;Kd[1]=771;Kd[2]=1;Kd[3]=1;l.enable(2884);ba.cull_enable=!0;l.cullFace(1029);ba.cull_face=
1029;l.enable(2929);ba.depth_enable=!0;l.depthFunc(513);ba.depth_func=513;l.depthMask(!0);ba.depth_mask=!0;l.depthRange(0,1);ue[0]=0;ue[1]=1;l.disable(3024);ba.dither=!1;l.lineWidth(2);ba.lineWidth=2;vd.height=a.scissorHeight;vd.width=a.scissorWidth;vd.x=a.scissorX;vd.y=a.scissorY;h=vd.x|0;e=vd.y|0;g="width"in vd?vd.width|0:m.framebufferWidth-h;k="height"in vd?vd.height|0:m.framebufferHeight-e;l.scissor(h,e,g,k);yf[0]=h;yf[1]=e;yf[2]=g;yf[3]=k;l.enable(3089);ba.scissor_enable=!0;h=ba.profile;ba.profile=
!1;l.useProgram(r.program);Db.setVAO(null);e=cc.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==O.dtype||4!==g.size||g.buffer!==O||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,O.buffer),l.vertexAttribPointer(e,4,O.dtype,!1,0,0),g.type=O.dtype,g.size=4,g.buffer=O,g.normalized=!1,g.offset=0,g.stride=0;e=nc.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==f.dtype||4!==g.size||g.buffer!==f||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,
f.buffer),l.vertexAttribPointer(e,4,f.dtype,!1,0,0),g.type=f.dtype,g.size=4,g.buffer=f,g.normalized=!1,g.offset=0,g.stride=0;e=kc.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==c.dtype||4!==g.size||g.buffer!==c||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(e,4,c.dtype,!1,0,0),g.type=c.dtype,g.size=4,g.buffer=c,g.normalized=!1,g.offset=0,g.stride=0;e=ud.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==y.dtype||
4!==g.size||g.buffer!==y||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(e,4,y.dtype,!1,0,0),g.type=y.dtype,g.size=4,g.buffer=y,g.normalized=!1,g.offset=0,g.stride=0;e=yc.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==b.dtype||4!==g.size||g.buffer!==b||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(e,4,b.dtype,!1,0,0),g.type=b.dtype,g.size=4,g.buffer=b,g.normalized=!1,g.offset=0,
g.stride=0;e=V.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==v.dtype||4!==g.size||g.buffer!==v||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,v.buffer),l.vertexAttribPointer(e,4,v.dtype,!1,0,0),g.type=v.dtype,g.size=4,g.buffer=v,g.normalized=!1,g.offset=0,g.stride=0;e=C.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==A.dtype||4!==g.size||g.buffer!==A||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(e,
4,A.dtype,!1,0,0),g.type=A.dtype,g.size=4,g.buffer=A,g.normalized=!1,g.offset=0,g.stride=0;e=la.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==ea.dtype||4!==g.size||g.buffer!==ea||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,ea.buffer),l.vertexAttribPointer(e,4,ea.dtype,!1,0,0),g.type=ea.dtype,g.size=4,g.buffer=ea,g.normalized=!1,g.offset=0,g.stride=0;e=Da.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==G.dtype||4!==g.size||g.buffer!==G||
!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,G.buffer),l.vertexAttribPointer(e,4,G.dtype,!1,0,0),g.type=G.dtype,g.size=4,g.buffer=G,g.normalized=!1,g.offset=0,g.stride=0;e=ub.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==F.dtype||4!==g.size||g.buffer!==F||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer(e,4,F.dtype,!1,0,0),g.type=F.dtype,g.size=4,g.buffer=F,g.normalized=!1,g.offset=0,g.stride=0;e=Qc.location;
g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==w.dtype||4!==g.size||g.buffer!==w||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(e,4,w.dtype,!1,0,0),g.type=w.dtype,g.size=4,g.buffer=w,g.normalized=!1,g.offset=0,g.stride=0;e=Uc.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==B.dtype||4!==g.size||g.buffer!==B||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(e,4,B.dtype,!1,
0,0),g.type=B.dtype,g.size=4,g.buffer=B,g.normalized=!1,g.offset=0,g.stride=0;e=D.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==N.dtype||4!==g.size||g.buffer!==N||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,N.buffer),l.vertexAttribPointer(e,4,N.dtype,!1,0,0),g.type=N.dtype,g.size=4,g.buffer=N,g.normalized=!1,g.offset=0,g.stride=0;e=u.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==n.dtype||4!==g.size||g.buffer!==n||!1!==g.normalized||0!==
g.offset||0!==g.stride)l.bindBuffer(34962,n.buffer),l.vertexAttribPointer(e,4,n.dtype,!1,0,0),g.type=n.dtype,g.size=4,g.buffer=n,g.normalized=!1,g.offset=0,g.stride=0;e=ka.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);if(g.type!==H.dtype||4!==g.size||g.buffer!==H||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(e,4,H.dtype,!1,0,0),g.type=H.dtype,g.size=4,g.buffer=H,g.normalized=!1,g.offset=0,g.stride=0;e=Na.location;g=E[e];g.buffer||l.enableVertexAttribArray(e);
if(g.type!==ca.dtype||4!==g.size||g.buffer!==ca||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,ca.buffer),l.vertexAttribPointer(e,4,ca.dtype,!1,0,0),g.type=ca.dtype,g.size=4,g.buffer=ca,g.normalized=!1,g.offset=0,g.stride=0;e=a.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(pd[0]=e[0],pd[1]=e[1],pd[2]=e[2],pd[3]=e[3],pd[4]=e[4],pd[5]=e[5],pd[6]=e[6],pd[7]=e[7],pd[8]=e[8],pd[9]=e[9],pd[10]=e[10],pd[11]=e[11],pd[12]=e[12],pd[13]=e[13],pd[14]=
e[14],pd[15]=e[15],pd));e=a.dim1A;l.uniformMatrix4fv(J.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(dd[0]=e[0],dd[1]=e[1],dd[2]=e[2],dd[3]=e[3],dd[4]=e[4],dd[5]=e[5],dd[6]=e[6],dd[7]=e[7],dd[8]=e[8],dd[9]=e[9],dd[10]=e[10],dd[11]=e[11],dd[12]=e[12],dd[13]=e[13],dd[14]=e[14],dd[15]=e[15],dd));e=a.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(oc[0]=e[0],oc[1]=e[1],oc[2]=e[2],oc[3]=e[3],oc[4]=e[4],oc[5]=e[5],oc[6]=e[6],oc[7]=e[7],oc[8]=e[8],oc[9]=
e[9],oc[10]=e[10],oc[11]=e[11],oc[12]=e[12],oc[13]=e[13],oc[14]=e[14],oc[15]=e[15],oc));e=a.dim1B;l.uniformMatrix4fv(Wb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(sd[0]=e[0],sd[1]=e[1],sd[2]=e[2],sd[3]=e[3],sd[4]=e[4],sd[5]=e[5],sd[6]=e[6],sd[7]=e[7],sd[8]=e[8],sd[9]=e[9],sd[10]=e[10],sd[11]=e[11],sd[12]=e[12],sd[13]=e[13],sd[14]=e[14],sd[15]=e[15],sd));e=a.dim0C;l.uniformMatrix4fv(P.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(fd[0]=e[0],fd[1]=e[1],fd[2]=e[2],fd[3]=
e[3],fd[4]=e[4],fd[5]=e[5],fd[6]=e[6],fd[7]=e[7],fd[8]=e[8],fd[9]=e[9],fd[10]=e[10],fd[11]=e[11],fd[12]=e[12],fd[13]=e[13],fd[14]=e[14],fd[15]=e[15],fd));e=a.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Lc[0]=e[0],Lc[1]=e[1],Lc[2]=e[2],Lc[3]=e[3],Lc[4]=e[4],Lc[5]=e[5],Lc[6]=e[6],Lc[7]=e[7],Lc[8]=e[8],Lc[9]=e[9],Lc[10]=e[10],Lc[11]=e[11],Lc[12]=e[12],Lc[13]=e[13],Lc[14]=e[14],Lc[15]=e[15],Lc));e=a.dim0D;l.uniformMatrix4fv(sa.location,!1,Array.isArray(e)||e instanceof
Float32Array?e:(qc[0]=e[0],qc[1]=e[1],qc[2]=e[2],qc[3]=e[3],qc[4]=e[4],qc[5]=e[5],qc[6]=e[6],qc[7]=e[7],qc[8]=e[8],qc[9]=e[9],qc[10]=e[10],qc[11]=e[11],qc[12]=e[12],qc[13]=e[13],qc[14]=e[14],qc[15]=e[15],qc));e=a.dim1D;l.uniformMatrix4fv(Q.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ab[0]=e[0],ab[1]=e[1],ab[2]=e[2],ab[3]=e[3],ab[4]=e[4],ab[5]=e[5],ab[6]=e[6],ab[7]=e[7],ab[8]=e[8],ab[9]=e[9],ab[10]=e[10],ab[11]=e[11],ab[12]=e[12],ab[13]=e[13],ab[14]=e[14],ab[15]=e[15],ab));e=a.loA;l.uniformMatrix4fv($b.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(Ic[0]=e[0],Ic[1]=e[1],Ic[2]=e[2],Ic[3]=e[3],Ic[4]=e[4],Ic[5]=e[5],Ic[6]=e[6],Ic[7]=e[7],Ic[8]=e[8],Ic[9]=e[9],Ic[10]=e[10],Ic[11]=e[11],Ic[12]=e[12],Ic[13]=e[13],Ic[14]=e[14],Ic[15]=e[15],Ic));e=a.hiA;l.uniformMatrix4fv(ma.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fb[0]=e[0],Fb[1]=e[1],Fb[2]=e[2],Fb[3]=e[3],Fb[4]=e[4],Fb[5]=e[5],Fb[6]=e[6],Fb[7]=e[7],Fb[8]=e[8],Fb[9]=e[9],Fb[10]=e[10],Fb[11]=e[11],Fb[12]=e[12],Fb[13]=e[13],Fb[14]=
e[14],Fb[15]=e[15],Fb));e=a.loB;l.uniformMatrix4fv(Ia.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(pc[0]=e[0],pc[1]=e[1],pc[2]=e[2],pc[3]=e[3],pc[4]=e[4],pc[5]=e[5],pc[6]=e[6],pc[7]=e[7],pc[8]=e[8],pc[9]=e[9],pc[10]=e[10],pc[11]=e[11],pc[12]=e[12],pc[13]=e[13],pc[14]=e[14],pc[15]=e[15],pc));e=a.hiB;l.uniformMatrix4fv(da.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ta[0]=e[0],Ta[1]=e[1],Ta[2]=e[2],Ta[3]=e[3],Ta[4]=e[4],Ta[5]=e[5],Ta[6]=e[6],Ta[7]=e[7],Ta[8]=e[8],Ta[9]=e[9],
Ta[10]=e[10],Ta[11]=e[11],Ta[12]=e[12],Ta[13]=e[13],Ta[14]=e[14],Ta[15]=e[15],Ta));e=a.loC;l.uniformMatrix4fv(S.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Jc[0]=e[0],Jc[1]=e[1],Jc[2]=e[2],Jc[3]=e[3],Jc[4]=e[4],Jc[5]=e[5],Jc[6]=e[6],Jc[7]=e[7],Jc[8]=e[8],Jc[9]=e[9],Jc[10]=e[10],Jc[11]=e[11],Jc[12]=e[12],Jc[13]=e[13],Jc[14]=e[14],Jc[15]=e[15],Jc));e=a.hiC;l.uniformMatrix4fv(Fa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ac[0]=e[0],ac[1]=e[1],ac[2]=e[2],ac[3]=e[3],ac[4]=
e[4],ac[5]=e[5],ac[6]=e[6],ac[7]=e[7],ac[8]=e[8],ac[9]=e[9],ac[10]=e[10],ac[11]=e[11],ac[12]=e[12],ac[13]=e[13],ac[14]=e[14],ac[15]=e[15],ac));e=a.loD;l.uniformMatrix4fv(ob.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(rc[0]=e[0],rc[1]=e[1],rc[2]=e[2],rc[3]=e[3],rc[4]=e[4],rc[5]=e[5],rc[6]=e[6],rc[7]=e[7],rc[8]=e[8],rc[9]=e[9],rc[10]=e[10],rc[11]=e[11],rc[12]=e[12],rc[13]=e[13],rc[14]=e[14],rc[15]=e[15],rc));e=a.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(e)||e instanceof Float32Array?
e:(Cd[0]=e[0],Cd[1]=e[1],Cd[2]=e[2],Cd[3]=e[3],Cd[4]=e[4],Cd[5]=e[5],Cd[6]=e[6],Cd[7]=e[7],Cd[8]=e[8],Cd[9]=e[9],Cd[10]=e[10],Cd[11]=e[11],Cd[12]=e[12],Cd[13]=e[13],Cd[14]=e[14],Cd[15]=e[15],Cd));e=a.resolution;l.uniform2f(T.location,e[0],e[1]);e=a.viewBoxPos;l.uniform2f(ha.location,e[0],e[1]);e=a.viewBoxSize;l.uniform2f(qa.location,e[0],e[1]);l.uniform1f(ga.location,a.maskHeight);l.uniform1f(t.location,a.drwLayer);e=a.contextColor;l.uniform4f(Y.location,e[0],e[1],e[2],e[3]);(e=a.maskTexture)&&"framebuffer"===
e._reglType&&(e=e.color[0]);e=e._texture;l.uniform1i(ta.location,e.bind());l.uniform1i(ua.location,I.bind());(g=x.elements)?l.bindBuffer(34963,g.buffer.buffer):Db.currentVAO&&(g=ja.getElements(Db.currentVAO.elements))&&l.bindBuffer(34963,g.buffer.buffer);k=a.offset;if(a=a.count)g?l.drawElements(1,a,g.type,k<<(g.type-5121>>1)):l.drawArrays(1,k,a),ba.dirty=!0,Db.setVAO(null),m.viewportWidth=d,m.viewportHeight=p,ba.profile=h,e.unbind(),I.unbind()},scope:function(l,k,r){var t,u,C,E,D,V,Z,M,K,J,ja,ia,
P,Q,S,T,ha,la,I,Y,ka,da,ga,ma,ua,Aa,nc,ab,qa,Ta,Da,ya,La,Wd,Db,Fb,Wa,za,Td,Ea,ac,Gc,Lc,fd,Xb,Sa,sa,vb,qc,rc,Ga,Rc,Qa,Ca,ud,od,ta,dd,gb,cb,na,oc,pc,wd,Sd,Jc,Ic,Bc,Hb,Ha,ub,nb,zb,rd,sd,ne,Qc,Rb,pd,yc,ld,fc,Fa,xd,Ve,Lb,Gb,we,Kd,Gd,yf,Fe,Cd,cc,bf,$a,Na,kc,Zd,se,Oa,ob,Bd,ue,Fc,Wb,Ia,Uc,hd,$b,ec,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ib,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,qf,nf,cf,gf,hf,jf,of,kf,pf,Af,Bf,Ne,Be,lf,mf,Cf,Ff,zf,Df,Ef,
uf,vf,tf,wf,xf,If,Jf,Kf,Lf,rf,Qf,Gf,sf,cg,Rf,Sf,pg,df,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,ef,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh;id.height=l.viewportHeight;id.width=l.viewportWidth;id.x=l.viewportX;id.y=l.viewportY;t=id.x|0;u=id.y|0;C="width"in id?id.width|0:m.framebufferWidth-t;E="height"in id?id.height|0:m.framebufferHeight-
u;D=m.viewportWidth;m.viewportWidth=C;V=m.viewportHeight;m.viewportHeight=E;Z=Xd[0];Xd[0]=t;M=Xd[1];Xd[1]=u;K=Xd[2];Xd[2]=C;J=Xd[3];Xd[3]=E;ja=Ab[0];Ab[0]=0;ia=Ab[1];Ab[1]=0;P=Ab[2];Ab[2]=0;Q=Ab[3];Ab[3]=0;S=tc.blend_enable;tc.blend_enable=!1;T=de[0];de[0]=32774;ha=de[1];de[1]=32774;la=ee[0];ee[0]=770;I=ee[1];ee[1]=771;Y=ee[2];ee[2]=1;ka=ee[3];ee[3]=1;da=tc.cull_enable;tc.cull_enable=!0;ga=tc.cull_face;tc.cull_face=1029;ma=tc.depth_enable;tc.depth_enable=!0;ua=tc.depth_func;tc.depth_func=513;Aa=tc.depth_mask;
tc.depth_mask=!0;nc=he[0];he[0]=0;ab=he[1];he[1]=1;qa=tc.dither;tc.dither=!1;Ta=tc.lineWidth;tc.lineWidth=2;vd.height=l.scissorHeight;vd.width=l.scissorWidth;vd.x=l.scissorX;vd.y=l.scissorY;Da=vd.x|0;ya=vd.y|0;La="width"in vd?vd.width|0:m.framebufferWidth-Da;Wd="height"in vd?vd.height|0:m.framebufferHeight-ya;Db=Ze[0];Ze[0]=Da;Fb=Ze[1];Ze[1]=ya;Wa=Ze[2];Ze[2]=La;za=Ze[3];Ze[3]=Wd;Td=tc.scissor_enable;tc.scissor_enable=!0;Ea=ba.profile;ba.profile=!1;ac=l.offset;Gc=x.offset;x.offset=ac;Lc=l.count;fd=
x.count;x.count=Lc;Xb=x.primitive;x.primitive=1;Sa=l.contextColor;sa=p[24];p[24]=Sa;vb=l.dim0A;qc=p[3];p[3]=vb;rc=l.dim0B;Ga=p[5];p[5]=rc;Rc=l.dim0C;Qa=p[7];p[7]=Rc;Ca=l.dim0D;ud=p[9];p[9]=Ca;od=l.dim1A;ta=p[4];p[4]=od;dd=l.dim1B;gb=p[6];p[6]=dd;cb=l.dim1C;na=p[8];p[8]=cb;oc=l.dim1D;pc=p[10];p[10]=oc;wd=l.drwLayer;Sd=p[23];p[23]=wd;Jc=l.hiA;Ic=p[12];p[12]=Jc;Bc=l.hiB;Hb=p[14];p[14]=Bc;Ha=l.hiC;ub=p[16];p[16]=Ha;nb=l.hiD;zb=p[18];p[18]=nb;rd=l.loA;sd=p[11];p[11]=rd;ne=l.loB;Qc=p[13];p[13]=ne;Rb=l.loC;
pd=p[15];p[15]=Rb;yc=l.loD;ld=p[17];p[17]=yc;fc=l.maskHeight;Fa=p[22];p[22]=fc;xd=l.maskTexture;Ve=p[25];p[25]=xd;Lb=p[26];p[26]=R;Gb=l.resolution;we=p[19];p[19]=Gb;Kd=l.viewBoxPos;Gd=p[20];p[20]=Kd;yf=l.viewBoxSize;Fe=p[21];p[21]=yf;Cd=e.buffer;e.buffer=ca;cc=e.divisor;e.divisor=0;bf=e.normalized;e.normalized=!1;$a=e.offset;e.offset=0;Na=e.size;e.size=0;kc=e.state;e.state=1;Zd=e.stride;e.stride=0;se=e.type;e.type=ca.dtype;Oa=e.w;e.w=0;ob=e.x;e.x=0;Bd=e.y;e.y=0;ue=e.z;e.z=0;Fc=g.buffer;g.buffer=O;
Wb=g.divisor;g.divisor=0;Ia=g.normalized;g.normalized=!1;Uc=g.offset;g.offset=0;hd=g.size;g.size=0;$b=g.state;g.state=1;ec=g.stride;g.stride=0;te=g.type;g.type=O.dtype;ve=g.w;g.w=0;Ce=g.x;g.x=0;ge=g.y;g.y=0;fe=g.z;g.z=0;ce=d.buffer;d.buffer=f;pe=d.divisor;d.divisor=0;$d=d.normalized;d.normalized=!1;ie=d.offset;d.offset=0;Ac=d.size;d.size=0;Vc=d.state;d.state=1;qe=d.stride;d.stride=0;me=d.type;d.type=f.dtype;Fd=d.w;d.w=0;Md=d.x;d.x=0;Nd=d.y;d.y=0;Od=d.z;d.z=0;je=z.buffer;z.buffer=c;Ib=z.divisor;z.divisor=
0;ye=z.normalized;z.normalized=!1;oe=z.offset;z.offset=0;Oe=z.size;z.size=0;Pe=z.state;z.state=1;Le=z.stride;z.stride=0;re=z.type;z.type=c.dtype;De=z.w;z.w=0;Ge=z.x;z.x=0;He=z.y;z.y=0;Ie=z.z;z.z=0;Ee=U.buffer;U.buffer=y;Id=U.divisor;U.divisor=0;Rd=U.normalized;U.normalized=!1;Yd=U.offset;U.offset=0;ae=U.size;U.size=0;Je=U.state;U.state=1;yd=U.stride;U.stride=0;Pd=U.type;U.type=y.dtype;Ae=U.w;U.w=0;Ke=U.x;U.x=0;ff=U.y;U.y=0;Xe=U.z;U.z=0;Qe=W.buffer;W.buffer=b;Me=W.divisor;W.divisor=0;We=W.normalized;
W.normalized=!1;Ue=W.offset;W.offset=0;Re=W.size;W.size=0;Se=W.state;W.state=1;Qd=W.stride;W.stride=0;Vd=W.type;W.type=b.dtype;Te=W.w;W.w=0;qf=W.x;W.x=0;nf=W.y;W.y=0;cf=W.z;W.z=0;gf=q.buffer;q.buffer=v;hf=q.divisor;q.divisor=0;jf=q.normalized;q.normalized=!1;of=q.offset;q.offset=0;kf=q.size;q.size=0;pf=q.state;q.state=1;Af=q.stride;q.stride=0;Bf=q.type;q.type=v.dtype;Ne=q.w;q.w=0;Be=q.x;q.x=0;lf=q.y;q.y=0;mf=q.z;q.z=0;Cf=oa.buffer;oa.buffer=A;Ff=oa.divisor;oa.divisor=0;zf=oa.normalized;oa.normalized=
!1;Df=oa.offset;oa.offset=0;Ef=oa.size;oa.size=0;uf=oa.state;oa.state=1;vf=oa.stride;oa.stride=0;tf=oa.type;oa.type=A.dtype;wf=oa.w;oa.w=0;xf=oa.x;oa.x=0;If=oa.y;oa.y=0;Jf=oa.z;oa.z=0;Kf=L.buffer;L.buffer=ea;Lf=L.divisor;L.divisor=0;rf=L.normalized;L.normalized=!1;Qf=L.offset;L.offset=0;Gf=L.size;L.size=0;sf=L.state;L.state=1;cg=L.stride;L.stride=0;Rf=L.type;L.type=ea.dtype;Sf=L.w;L.w=0;pg=L.x;L.x=0;df=L.y;L.y=0;$e=L.z;L.z=0;Mf=fa.buffer;fa.buffer=G;Nf=fa.divisor;fa.divisor=0;dg=fa.normalized;fa.normalized=
!1;eg=fa.offset;fa.offset=0;fg=fa.size;fa.size=0;gg=fa.state;fa.state=1;hg=fa.stride;fa.stride=0;Vf=fa.type;fa.type=G.dtype;Tf=fa.w;fa.w=0;Wf=fa.x;fa.x=0;Xf=fa.y;fa.y=0;Yf=fa.z;fa.z=0;ig=a.buffer;a.buffer=F;qg=a.divisor;a.divisor=0;rg=a.normalized;a.normalized=!1;sg=a.offset;a.offset=0;tg=a.size;a.size=0;ug=a.state;a.state=1;vg=a.stride;a.stride=0;wg=a.type;a.type=F.dtype;xg=a.w;a.w=0;yg=a.x;a.x=0;zg=a.y;a.y=0;Ag=a.z;a.z=0;ef=h.buffer;h.buffer=w;af=h.divisor;h.divisor=0;Of=h.normalized;h.normalized=
!1;Pf=h.offset;h.offset=0;jg=h.size;h.size=0;kg=h.state;h.state=1;lg=h.stride;h.stride=0;mg=h.type;h.type=w.dtype;ng=h.w;h.w=0;Zf=h.x;h.x=0;Uf=h.y;h.y=0;$f=h.z;h.z=0;ag=X.buffer;X.buffer=B;bg=X.divisor;X.divisor=0;og=X.normalized;X.normalized=!1;Bg=X.offset;X.offset=0;Cg=X.size;X.size=0;Dg=X.state;X.state=1;Eg=X.stride;X.stride=0;Fg=X.type;X.type=B.dtype;Gg=X.w;X.w=0;Hg=X.x;X.x=0;Ig=X.y;X.y=0;Jg=X.z;X.z=0;Kg=ra.buffer;ra.buffer=N;Lg=ra.divisor;ra.divisor=0;Mg=ra.normalized;ra.normalized=!1;Ng=ra.offset;
ra.offset=0;Og=ra.size;ra.size=0;Pg=ra.state;ra.state=1;Qg=ra.stride;ra.stride=0;Rg=ra.type;ra.type=N.dtype;Sg=ra.w;ra.w=0;Tg=ra.x;ra.x=0;Ug=ra.y;ra.y=0;Vg=ra.z;ra.z=0;Wg=xa.buffer;xa.buffer=n;Xg=xa.divisor;xa.divisor=0;Yg=xa.normalized;xa.normalized=!1;Zg=xa.offset;xa.offset=0;$g=xa.size;xa.size=0;ah=xa.state;xa.state=1;bh=xa.stride;xa.stride=0;ch=xa.type;xa.type=n.dtype;dh=xa.w;xa.w=0;eh=xa.x;xa.x=0;fh=xa.y;xa.y=0;gh=xa.z;xa.z=0;hh=jb.buffer;jb.buffer=H;ih=jb.divisor;jb.divisor=0;jh=jb.normalized;
jb.normalized=!1;kh=jb.offset;jb.offset=0;lh=jb.size;jb.size=0;mh=jb.state;jb.state=1;nh=jb.stride;jb.stride=0;oh=jb.type;jb.type=H.dtype;ph=jb.w;jb.w=0;qh=jb.x;jb.x=0;rh=jb.y;jb.y=0;sh=jb.z;jb.z=0;th=aa.vert;aa.vert=2;uh=aa.frag;aa.frag=1;ba.dirty=!0;k(m,l,r);m.viewportWidth=D;m.viewportHeight=V;Xd[0]=Z;Xd[1]=M;Xd[2]=K;Xd[3]=J;Ab[0]=ja;Ab[1]=ia;Ab[2]=P;Ab[3]=Q;tc.blend_enable=S;de[0]=T;de[1]=ha;ee[0]=la;ee[1]=I;ee[2]=Y;ee[3]=ka;tc.cull_enable=da;tc.cull_face=ga;tc.depth_enable=ma;tc.depth_func=ua;
tc.depth_mask=Aa;he[0]=nc;he[1]=ab;tc.dither=qa;tc.lineWidth=Ta;Ze[0]=Db;Ze[1]=Fb;Ze[2]=Wa;Ze[3]=za;tc.scissor_enable=Td;ba.profile=Ea;x.offset=Gc;x.count=fd;x.primitive=Xb;p[24]=sa;p[3]=qc;p[5]=Ga;p[7]=Qa;p[9]=ud;p[4]=ta;p[6]=gb;p[8]=na;p[10]=pc;p[23]=Sd;p[12]=Ic;p[14]=Hb;p[16]=ub;p[18]=zb;p[11]=sd;p[13]=Qc;p[15]=pd;p[17]=ld;p[22]=Fa;p[25]=Ve;p[26]=Lb;p[19]=we;p[20]=Gd;p[21]=Fe;e.buffer=Cd;e.divisor=cc;e.normalized=bf;e.offset=$a;e.size=Na;e.state=kc;e.stride=Zd;e.type=se;e.w=Oa;e.x=ob;e.y=Bd;e.z=
ue;g.buffer=Fc;g.divisor=Wb;g.normalized=Ia;g.offset=Uc;g.size=hd;g.state=$b;g.stride=ec;g.type=te;g.w=ve;g.x=Ce;g.y=ge;g.z=fe;d.buffer=ce;d.divisor=pe;d.normalized=$d;d.offset=ie;d.size=Ac;d.state=Vc;d.stride=qe;d.type=me;d.w=Fd;d.x=Md;d.y=Nd;d.z=Od;z.buffer=je;z.divisor=Ib;z.normalized=ye;z.offset=oe;z.size=Oe;z.state=Pe;z.stride=Le;z.type=re;z.w=De;z.x=Ge;z.y=He;z.z=Ie;U.buffer=Ee;U.divisor=Id;U.normalized=Rd;U.offset=Yd;U.size=ae;U.state=Je;U.stride=yd;U.type=Pd;U.w=Ae;U.x=Ke;U.y=ff;U.z=Xe;W.buffer=
Qe;W.divisor=Me;W.normalized=We;W.offset=Ue;W.size=Re;W.state=Se;W.stride=Qd;W.type=Vd;W.w=Te;W.x=qf;W.y=nf;W.z=cf;q.buffer=gf;q.divisor=hf;q.normalized=jf;q.offset=of;q.size=kf;q.state=pf;q.stride=Af;q.type=Bf;q.w=Ne;q.x=Be;q.y=lf;q.z=mf;oa.buffer=Cf;oa.divisor=Ff;oa.normalized=zf;oa.offset=Df;oa.size=Ef;oa.state=uf;oa.stride=vf;oa.type=tf;oa.w=wf;oa.x=xf;oa.y=If;oa.z=Jf;L.buffer=Kf;L.divisor=Lf;L.normalized=rf;L.offset=Qf;L.size=Gf;L.state=sf;L.stride=cg;L.type=Rf;L.w=Sf;L.x=pg;L.y=df;L.z=$e;fa.buffer=
Mf;fa.divisor=Nf;fa.normalized=dg;fa.offset=eg;fa.size=fg;fa.state=gg;fa.stride=hg;fa.type=Vf;fa.w=Tf;fa.x=Wf;fa.y=Xf;fa.z=Yf;a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;h.buffer=ef;h.divisor=af;h.normalized=Of;h.offset=Pf;h.size=jg;h.state=kg;h.stride=lg;h.type=mg;h.w=ng;h.x=Zf;h.y=Uf;h.z=$f;X.buffer=ag;X.divisor=bg;X.normalized=og;X.offset=Bg;X.size=Cg;X.state=Dg;X.stride=Eg;X.type=Fg;X.w=Gg;X.x=Hg;X.y=Ig;X.z=Jg;ra.buffer=
Kg;ra.divisor=Lg;ra.normalized=Mg;ra.offset=Ng;ra.size=Og;ra.state=Pg;ra.stride=Qg;ra.type=Rg;ra.w=Sg;ra.x=Tg;ra.y=Ug;ra.z=Vg;xa.buffer=Wg;xa.divisor=Xg;xa.normalized=Yg;xa.offset=Zg;xa.size=$g;xa.state=ah;xa.stride=bh;xa.type=ch;xa.w=dh;xa.x=eh;xa.y=fh;xa.z=gh;jb.buffer=hh;jb.divisor=ih;jb.normalized=jh;jb.offset=kh;jb.size=lh;jb.state=mh;jb.stride=nh;jb.type=oh;jb.w=ph;jb.x=qh;jb.y=rh;jb.z=sh;aa.vert=th;aa.frag=uh;ba.dirty=!0}}},$1:function(k,Z){var r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca,I,R,e,g,d,
z,U,W,q,oa,L,fa,a;r=k.attributes;O=k.current;f=k.framebuffer;c=k.gl;y=k.next;b=k.vao;v=y.blend_color;A=O.blend_color;ea=y.blend_equation;G=O.blend_equation;F=y.blend_func;w=O.blend_func;B=y.colorMask;N=O.colorMask;n=y.depth_range;H=O.depth_range;ca=y.polygonOffset_offset;I=O.polygonOffset_offset;R=y.sample_coverage;e=O.sample_coverage;g=y.scissor_box;d=O.scissor_box;z=y.stencil_func;U=O.stencil_func;W=y.stencil_opBack;q=O.stencil_opBack;oa=y.stencil_opFront;L=O.stencil_opFront;fa=y.viewport;a=O.viewport;
return{poll:function(){var b,k,r,Z,jb,ec,na,Na,Y,K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa;O.dirty=!1;k=y.blend_enable;r=y.cull_enable;Z=y.depth_enable;jb=y.dither;ec=y.polygonOffset_enable;na=y.sample_alpha;Na=y.sample_enable;Y=y.scissor_enable;K=y.stencil_enable;M=y.cull_face;P=O.cull_face;sa=y.depth_func;J=O.depth_func;Wb=y.depth_mask;$a=O.depth_mask;Q=y.frontFace;t=O.frontFace;ma=y.lineWidth;da=O.lineWidth;Fa=y.stencil_mask;Oa=O.stencil_mask;b=f.next;b!==f.cur&&(b?c.bindFramebuffer(36160,b.framebuffer):
c.bindFramebuffer(36160,null),f.cur=b);k!==O.blend_enable&&(k?c.enable(3042):c.disable(3042),O.blend_enable=k);r!==O.cull_enable&&(r?c.enable(2884):c.disable(2884),O.cull_enable=r);Z!==O.depth_enable&&(Z?c.enable(2929):c.disable(2929),O.depth_enable=Z);jb!==O.dither&&(jb?c.enable(3024):c.disable(3024),O.dither=jb);ec!==O.polygonOffset_enable&&(ec?c.enable(32823):c.disable(32823),O.polygonOffset_enable=ec);na!==O.sample_alpha&&(na?c.enable(32926):c.disable(32926),O.sample_alpha=na);Na!==O.sample_enable&&
(Na?c.enable(32928):c.disable(32928),O.sample_enable=Na);Y!==O.scissor_enable&&(Y?c.enable(3089):c.disable(3089),O.scissor_enable=Y);K!==O.stencil_enable&&(K?c.enable(2960):c.disable(2960),O.stencil_enable=K);if(v[0]!==A[0]||v[1]!==A[1]||v[2]!==A[2]||v[3]!==A[3])c.blendColor(v[0],v[1],v[2],v[3]),A[0]=v[0],A[1]=v[1],A[2]=v[2],A[3]=v[3];if(ea[0]!==G[0]||ea[1]!==G[1])c.blendEquationSeparate(ea[0],ea[1]),G[0]=ea[0],G[1]=ea[1];if(F[0]!==w[0]||F[1]!==w[1]||F[2]!==w[2]||F[3]!==w[3])c.blendFuncSeparate(F[0],
F[1],F[2],F[3]),w[0]=F[0],w[1]=F[1],w[2]=F[2],w[3]=F[3];if(B[0]!==N[0]||B[1]!==N[1]||B[2]!==N[2]||B[3]!==N[3])c.colorMask(B[0],B[1],B[2],B[3]),N[0]=B[0],N[1]=B[1],N[2]=B[2],N[3]=B[3];M!==P&&(c.cullFace(M),O.cull_face=M);sa!==J&&(c.depthFunc(sa),O.depth_func=sa);Wb!==$a&&(c.depthMask(Wb),O.depth_mask=Wb);if(n[0]!==H[0]||n[1]!==H[1])c.depthRange(n[0],n[1]),H[0]=n[0],H[1]=n[1];Q!==t&&(c.frontFace(Q),O.frontFace=Q);ma!==da&&(c.lineWidth(ma),O.lineWidth=ma);if(ca[0]!==I[0]||ca[1]!==I[1])c.polygonOffset(ca[0],
ca[1]),I[0]=ca[0],I[1]=ca[1];if(R[0]!==e[0]||R[1]!==e[1])c.sampleCoverage(R[0],R[1]),e[0]=R[0],e[1]=R[1];if(g[0]!==d[0]||g[1]!==d[1]||g[2]!==d[2]||g[3]!==d[3])c.scissor(g[0],g[1],g[2],g[3]),d[0]=g[0],d[1]=g[1],d[2]=g[2],d[3]=g[3];if(z[0]!==U[0]||z[1]!==U[1]||z[2]!==U[2])c.stencilFunc(z[0],z[1],z[2]),U[0]=z[0],U[1]=z[1],U[2]=z[2];Fa!==Oa&&(c.stencilMask(Fa),O.stencil_mask=Fa);if(W[0]!==q[0]||W[1]!==q[1]||W[2]!==q[2]||W[3]!==q[3])c.stencilOpSeparate(W[0],W[1],W[2],W[3]),q[0]=W[0],q[1]=W[1],q[2]=W[2],
q[3]=W[3];if(oa[0]!==L[0]||oa[1]!==L[1]||oa[2]!==L[2]||oa[3]!==L[3])c.stencilOpSeparate(oa[0],oa[1],oa[2],oa[3]),L[0]=oa[0],L[1]=oa[1],L[2]=oa[2],L[3]=oa[3];if(fa[0]!==a[0]||fa[1]!==a[1]||fa[2]!==a[2]||fa[3]!==a[3])c.viewport(fa[0],fa[1],fa[2],fa[3]),a[0]=fa[0],a[1]=fa[1],a[2]=fa[2],a[3]=fa[3]},refresh:function(){var h,k,ra,xa,jb,ec,na,Na,Y,K,M,P,sa,J,Wb,$a;O.dirty=!1;k=y.blend_enable;ra=y.cull_enable;xa=y.depth_enable;jb=y.dither;ec=y.polygonOffset_enable;na=y.sample_alpha;Na=y.sample_enable;Y=y.scissor_enable;
K=y.stencil_enable;M=y.cull_face;P=y.depth_func;sa=y.depth_mask;J=y.frontFace;Wb=y.lineWidth;$a=y.stencil_mask;(h=f.next)?c.bindFramebuffer(36160,h.framebuffer):c.bindFramebuffer(36160,null);f.cur=h;h=r[0];h.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(0,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(0,h.divisor);h=r[1];h.buffer?(c.enableVertexAttribArray(1),
c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(1,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(1,h.divisor);h=r[2];h.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(2,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(2),c.vertexAttrib4f(2,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(2,h.divisor);
h=r[3];h.buffer?(c.enableVertexAttribArray(3),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(3,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(3,h.divisor);h=r[4];h.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(4,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,h.x,h.y,h.z,h.w),h.buffer=
null);Z.vertexAttribDivisorANGLE(4,h.divisor);h=r[5];h.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(5,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(5,h.divisor);h=r[6];h.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(6,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(6),
c.vertexAttrib4f(6,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(6,h.divisor);h=r[7];h.buffer?(c.enableVertexAttribArray(7),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(7,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(7,h.divisor);h=r[8];h.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(8,h.size,h.type,h.normalized,h.stride,
h.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(8,h.divisor);h=r[9];h.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(9,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(9,h.divisor);h=r[10];h.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(10,
h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(10,h.divisor);h=r[11];h.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(11,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(11),c.vertexAttrib4f(11,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(11,h.divisor);h=r[12];h.buffer?(c.enableVertexAttribArray(12),
c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(12,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(12,h.divisor);h=r[13];h.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(13,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(13,
h.divisor);h=r[14];h.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(14,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,h.x,h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(14,h.divisor);h=r[15];h.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,h.buffer.buffer),c.vertexAttribPointer(15,h.size,h.type,h.normalized,h.stride,h.offset)):(c.disableVertexAttribArray(15),c.vertexAttrib4f(15,h.x,
h.y,h.z,h.w),h.buffer=null);Z.vertexAttribDivisorANGLE(15,h.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);k?c.enable(3042):c.disable(3042);O.blend_enable=k;ra?c.enable(2884):c.disable(2884);O.cull_enable=ra;xa?c.enable(2929):c.disable(2929);O.depth_enable=xa;jb?c.enable(3024):c.disable(3024);O.dither=jb;ec?c.enable(32823):c.disable(32823);O.polygonOffset_enable=ec;na?c.enable(32926):c.disable(32926);O.sample_alpha=na;Na?c.enable(32928):c.disable(32928);O.sample_enable=Na;Y?c.enable(3089):c.disable(3089);
O.scissor_enable=Y;K?c.enable(2960):c.disable(2960);O.stencil_enable=K;c.blendColor(v[0],v[1],v[2],v[3]);A[0]=v[0];A[1]=v[1];A[2]=v[2];A[3]=v[3];c.blendEquationSeparate(ea[0],ea[1]);G[0]=ea[0];G[1]=ea[1];c.blendFuncSeparate(F[0],F[1],F[2],F[3]);w[0]=F[0];w[1]=F[1];w[2]=F[2];w[3]=F[3];c.colorMask(B[0],B[1],B[2],B[3]);N[0]=B[0];N[1]=B[1];N[2]=B[2];N[3]=B[3];c.cullFace(M);O.cull_face=M;c.depthFunc(P);O.depth_func=P;c.depthMask(sa);O.depth_mask=sa;c.depthRange(n[0],n[1]);H[0]=n[0];H[1]=n[1];c.frontFace(J);
O.frontFace=J;c.lineWidth(Wb);O.lineWidth=Wb;c.polygonOffset(ca[0],ca[1]);I[0]=ca[0];I[1]=ca[1];c.sampleCoverage(R[0],R[1]);e[0]=R[0];e[1]=R[1];c.scissor(g[0],g[1],g[2],g[3]);d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];c.stencilFunc(z[0],z[1],z[2]);U[0]=z[0];U[1]=z[1];U[2]=z[2];c.stencilMask($a);O.stencil_mask=$a;c.stencilOpSeparate(W[0],W[1],W[2],W[3]);q[0]=W[0];q[1]=W[1];q[2]=W[2];q[3]=W[3];c.stencilOpSeparate(oa[0],oa[1],oa[2],oa[3]);L[0]=oa[0];L[1]=oa[1];L[2]=oa[2];L[3]=oa[3];c.viewport(fa[0],fa[1],
fa[2],fa[3]);a[0]=fa[0];a[1]=fa[1];a[2]=fa[2];a[3]=fa[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(k,Z,r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca,I,R,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb,ec,na,Na,Y,K,M,P,sa,J,Wb,$a){var Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta,cc,nc,kc,ud,yc,V,C,la,Da,ub,Qc,Uc,D,u,ka,ua,T,ha,qa,E,m,ba,x,ja,ia,l,tc,aa,p,Db,Ab;Q=k.attributes;t=k.buffer;ma=k.context;da=k.current;Fa=
k.draw;Oa=k.elements;$b=k.extensions;Ia=k.framebuffer;S=k.gl;ob=k.isBufferArgs;ga=k.next;ta=k.shader;cc=k.uniforms;nc=k.vao;kc=ga.blend_color;ud=da.blend_color;yc=ga.blend_equation;V=da.blend_equation;C=ga.blend_func;la=da.blend_func;Da=ga.colorMask;ub=da.colorMask;Qc=ga.depth_range;Uc=da.depth_range;D=ga.polygonOffset_offset;u=da.polygonOffset_offset;ka=ga.sample_coverage;ua=da.sample_coverage;T=ga.scissor_box;ha=da.scissor_box;qa=ga.stencil_func;E=da.stencil_func;m=ga.stencil_opBack;ba=da.stencil_opBack;
x=ga.stencil_opFront;ja=da.stencil_opFront;ia=ga.viewport;l=da.viewport;tc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa={};aa.buffer=r;aa.divisor=1;p={};p.buffer=O;p.divisor=1;Db={};Db.buffer=f;Db.divisor=1;Ab={};Ab.buffer=c;Ab.divisor=1;return{batch:function(b,d){var c,e,g,f,k,n;c=Ia.next;c!==Ia.cur&&(c?S.bindFramebuffer(36160,c.framebuffer):S.bindFramebuffer(36160,null),Ia.cur=c);if(da.dirty){var r,v,C,z,y,B,O,H,A,ia,N,T,I,U,W,ea,ca,R,ta,oc,sd,
fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,yc;r=ga.dither;r!==da.dither&&(r?S.enable(3024):S.disable(3024),da.dither=r);v=ga.depth_func;v!==da.depth_func&&(S.depthFunc(v),da.depth_func=v);C=Qc[0];z=Qc[1];if(C!==Uc[0]||z!==Uc[1])S.depthRange(C,z),Uc[0]=C,Uc[1]=z;y=ga.depth_mask;y!==da.depth_mask&&(S.depthMask(y),da.depth_mask=y);B=Da[0];O=Da[1];H=Da[2];A=Da[3];if(B!==ub[0]||O!==ub[1]||H!==ub[2]||A!==ub[3])S.colorMask(B,O,H,A),ub[0]=B,ub[1]=O,ub[2]=H,ub[3]=A;ia=ga.cull_enable;ia!==da.cull_enable&&(ia?S.enable(2884):
S.disable(2884),da.cull_enable=ia);N=ga.cull_face;N!==da.cull_face&&(S.cullFace(N),da.cull_face=N);T=ga.frontFace;T!==da.frontFace&&(S.frontFace(T),da.frontFace=T);I=ga.lineWidth;I!==da.lineWidth&&(S.lineWidth(I),da.lineWidth=I);U=ga.polygonOffset_enable;U!==da.polygonOffset_enable&&(U?S.enable(32823):S.disable(32823),da.polygonOffset_enable=U);W=D[0];ea=D[1];if(W!==u[0]||ea!==u[1])S.polygonOffset(W,ea),u[0]=W,u[1]=ea;ca=ga.sample_alpha;ca!==da.sample_alpha&&(ca?S.enable(32926):S.disable(32926),da.sample_alpha=
ca);R=ga.sample_enable;R!==da.sample_enable&&(R?S.enable(32928):S.disable(32928),da.sample_enable=R);ta=ka[0];oc=ka[1];if(ta!==ua[0]||oc!==ua[1])S.sampleCoverage(ta,oc),ua[0]=ta,ua[1]=oc;sd=ga.stencil_enable;sd!==da.stencil_enable&&(sd?S.enable(2960):S.disable(2960),da.stencil_enable=sd);fd=ga.stencil_mask;fd!==da.stencil_mask&&(S.stencilMask(fd),da.stencil_mask=fd);Lc=qa[0];qc=qa[1];ab=qa[2];if(Lc!==E[0]||qc!==E[1]||ab!==E[2])S.stencilFunc(Lc,qc,ab),E[0]=Lc,E[1]=qc,E[2]=ab;Ic=x[0];Fb=x[1];pc=x[2];
Ta=x[3];if(Ic!==ja[0]||Fb!==ja[1]||pc!==ja[2]||Ta!==ja[3])S.stencilOpSeparate(Ic,Fb,pc,Ta),ja[0]=Ic,ja[1]=Fb,ja[2]=pc,ja[3]=Ta;Jc=m[0];ac=m[1];rc=m[2];yc=m[3];if(Jc!==ba[0]||ac!==ba[1]||rc!==ba[2]||yc!==ba[3])S.stencilOpSeparate(Jc,ac,rc,yc),ba[0]=Jc,ba[1]=ac,ba[2]=rc,ba[3]=yc}S.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;S.enable(3042);da.blend_enable=!0;S.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;S.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;S.disable(2929);
da.depth_enable=!1;S.enable(3089);da.scissor_enable=!0;if(e=da.profile)g=performance.now(),Z.count+=d;S.useProgram(q.program);f=$b.angle_instanced_arrays;var pa,Bc,Xb,Gc,Rc,La,vb,Wa;nc.setVAO(null);pa=jb.location;Bc=Q[pa];Bc.buffer||S.enableVertexAttribArray(pa);if(5126!==Bc.type||2!==Bc.size||Bc.buffer!==G||!1!==Bc.normalized||0!==Bc.offset||24!==Bc.stride)S.bindBuffer(34962,G.buffer),S.vertexAttribPointer(pa,2,5126,!1,24,0),Bc.type=5126,Bc.size=2,Bc.buffer=G,Bc.normalized=!1,Bc.offset=0,Bc.stride=
24;0!==Bc.divisor&&(f.vertexAttribDivisorANGLE(pa,0),Bc.divisor=0);Xb=na.location;Gc=Q[Xb];Gc.buffer||S.enableVertexAttribArray(Xb);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==F||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)S.bindBuffer(34962,F.buffer),S.vertexAttribPointer(Xb,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=F,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(f.vertexAttribDivisorANGLE(Xb,0),Gc.divisor=0);Rc=X.location;La=Q[Rc];La.buffer||S.enableVertexAttribArray(Rc);
if(5126!==La.type||2!==La.size||La.buffer!==w||!1!==La.normalized||16!==La.offset||24!==La.stride)S.bindBuffer(34962,w.buffer),S.vertexAttribPointer(Rc,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=w,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(f.vertexAttribDivisorANGLE(Rc,0),La.divisor=0);(vb=Fa.elements)?S.bindBuffer(34963,vb.buffer.buffer):nc.currentVAO&&(vb=Oa.getElements(nc.currentVAO.elements))&&S.bindBuffer(34963,vb.buffer.buffer);Wa=Fa.offset;for(k=0;k<d;++k){n=b[k];var Aa,
ld,gb,Sa,Hb,cb,fc,Rb,cc,Zb,Sb,kc,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Hf,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,be,Ld,le,xe,Ud,Hd,Ed,ed,Fc;Aa=n.viewport;ld=Aa.x|0;gb=Aa.y|0;Sa="width"in Aa?Aa.width|0:ma.framebufferWidth-ld;Hb="height"in Aa?Aa.height|0:ma.framebufferHeight-gb;cb=ma.viewportWidth;
ma.viewportWidth=Sa;fc=ma.viewportHeight;ma.viewportHeight=Hb;S.viewport(ld,gb,Sa,Hb);l[0]=ld;l[1]=gb;l[2]=Sa;l[3]=Hb;Rb=n.viewport;cc=Rb.x|0;Zb=Rb.y|0;Sb="width"in Rb?Rb.width|0:ma.framebufferWidth-cc;kc="height"in Rb?Rb.height|0:ma.framebufferHeight-Zb;S.scissor(cc,Zb,Sb,kc);ha[0]=cc;ha[1]=Zb;ha[2]=Sb;ha[3]=kc;Tb=oa.call(this,ma,n,k);Db.offset=Tb;Ma=!1;pb=null;wb=0;hb=!1;uc=Pa=0;Jb=1;ad=0;db=5126;kb=dc=Yc=lc=0;ob(Db)?(Ma=!0,pb=t.createStream(34962,Db),db=pb.dtype):(pb=t.getBuffer(Db))?db=pb.dtype:
"constant"in Db?(Jb=2,"number"===typeof Db.constant?(Yc=Db.constant,dc=kb=lc=0):(Yc=0<Db.constant.length?Db.constant[0]:0,dc=1<Db.constant.length?Db.constant[1]:0,kb=2<Db.constant.length?Db.constant[2]:0,lc=3<Db.constant.length?Db.constant[3]:0)):(pb=ob(Db.buffer)?t.createStream(34962,Db.buffer):t.getBuffer(Db.buffer),db="type"in Db?tc[Db.type]:pb.dtype,hb=!!Db.normalized,uc=Db.size|0,Pa=Db.offset|0,ad=Db.stride|0,wb=Db.divisor|0);lb=K.location;va=Q[lb];if(1===Jb){va.buffer||S.enableVertexAttribArray(lb);
qb=uc||2;if(va.type!==db||va.size!==qb||va.buffer!==pb||va.normalized!==hb||va.offset!==Pa||va.stride!==ad)S.bindBuffer(34962,pb.buffer),S.vertexAttribPointer(lb,qb,db,hb,ad,Pa),va.type=db,va.size=qb,va.buffer=pb,va.normalized=hb,va.offset=Pa,va.stride=ad;va.divisor!==wb&&(f.vertexAttribDivisorANGLE(lb,wb),va.divisor=wb)}else if(va.buffer&&(S.disableVertexAttribArray(lb),va.buffer=null),va.x!==Yc||va.y!==dc||va.z!==kb||va.w!==lc)S.vertexAttrib4f(lb,Yc,dc,kb,lc),va.x=Yc,va.y=dc,va.z=kb,va.w=lc;wa=
L.call(this,ma,n,k);Ab.offset=wa;Ua=!1;bb=null;Ba=0;eb=!1;Cb=Ja=0;Bb=1;Ra=0;Kc=5126;ya=Ub=Za=Kb=0;ob(Ab)?(Ua=!0,bb=t.createStream(34962,Ab),Kc=bb.dtype):(bb=t.getBuffer(Ab))?Kc=bb.dtype:"constant"in Ab?(Bb=2,"number"===typeof Ab.constant?(Za=Ab.constant,Ub=ya=Kb=0):(Za=0<Ab.constant.length?Ab.constant[0]:0,Ub=1<Ab.constant.length?Ab.constant[1]:0,ya=2<Ab.constant.length?Ab.constant[2]:0,Kb=3<Ab.constant.length?Ab.constant[3]:0)):(bb=ob(Ab.buffer)?t.createStream(34962,Ab.buffer):t.getBuffer(Ab.buffer),
Kc="type"in Ab?tc[Ab.type]:bb.dtype,eb=!!Ab.normalized,Cb=Ab.size|0,Ja=Ab.offset|0,Ra=Ab.stride|0,Ba=Ab.divisor|0);ze=M.location;Ka=Q[ze];if(1===Bb){Ka.buffer||S.enableVertexAttribArray(ze);Ob=Cb||2;if(Ka.type!==Kc||Ka.size!==Ob||Ka.buffer!==bb||Ka.normalized!==eb||Ka.offset!==Ja||Ka.stride!==Ra)S.bindBuffer(34962,bb.buffer),S.vertexAttribPointer(ze,Ob,Kc,eb,Ra,Ja),Ka.type=Kc,Ka.size=Ob,Ka.buffer=bb,Ka.normalized=eb,Ka.offset=Ja,Ka.stride=Ra;Ka.divisor!==Ba&&(f.vertexAttribDivisorANGLE(ze,Ba),Ka.divisor=
Ba)}else if(Ka.buffer&&(S.disableVertexAttribArray(ze),Ka.buffer=null),Ka.x!==Za||Ka.y!==Ub||Ka.z!==ya||Ka.w!==Kb)S.vertexAttrib4f(ze,Za,Ub,ya,Kb),Ka.x=Za,Ka.y=Ub,Ka.z=ya,Ka.w=Kb;fb=fa.call(this,ma,n,k);p.offset=fb;ib=!1;za=null;gc=0;Ea=!1;sb=rb=0;Xa=1;Ya=0;mc=5126;Mb=Va=vc=xc=0;ob(p)?(ib=!0,za=t.createStream(34962,p),mc=za.dtype):(za=t.getBuffer(p))?mc=za.dtype:"constant"in p?(Xa=2,"number"===typeof p.constant?(vc=p.constant,Va=Mb=xc=0):(vc=0<p.constant.length?p.constant[0]:0,Va=1<p.constant.length?
p.constant[1]:0,Mb=2<p.constant.length?p.constant[2]:0,xc=3<p.constant.length?p.constant[3]:0)):(za=ob(p.buffer)?t.createStream(34962,p.buffer):t.getBuffer(p.buffer),mc="type"in p?tc[p.type]:za.dtype,Ea=!!p.normalized,sb=p.size|0,rb=p.offset|0,Ya=p.stride|0,gc=p.divisor|0);Zc=ec.location;Ga=Q[Zc];if(1===Xa){Ga.buffer||S.enableVertexAttribArray(Zc);zc=sb||4;if(Ga.type!==mc||Ga.size!==zc||Ga.buffer!==za||Ga.normalized!==Ea||Ga.offset!==rb||Ga.stride!==Ya)S.bindBuffer(34962,za.buffer),S.vertexAttribPointer(Zc,
zc,mc,Ea,Ya,rb),Ga.type=mc,Ga.size=zc,Ga.buffer=za,Ga.normalized=Ea,Ga.offset=rb,Ga.stride=Ya;Ga.divisor!==gc&&(f.vertexAttribDivisorANGLE(Zc,gc),Ga.divisor=gc)}else if(Ga.buffer&&(S.disableVertexAttribArray(Zc),Ga.buffer=null),Ga.x!==vc||Ga.y!==Va||Ga.z!==Mb||Ga.w!==xc)S.vertexAttrib4f(Zc,vc,Va,Mb,xc),Ga.x=vc,Ga.y=Va,Ga.z=Mb,Ga.w=xc;Qa=a.call(this,ma,n,k);aa.offset=Qa;Ca=!1;mb=null;xb=0;Eb=!1;wc=tb=0;yb=1;Dd=0;sc=5126;cd=jd=Mc=Jd=0;ob(aa)?(Ca=!0,mb=t.createStream(34962,aa),sc=mb.dtype):(mb=t.getBuffer(aa))?
sc=mb.dtype:"constant"in aa?(yb=2,"number"===typeof aa.constant?(Mc=aa.constant,jd=cd=Jd=0):(Mc=0<aa.constant.length?aa.constant[0]:0,jd=1<aa.constant.length?aa.constant[1]:0,cd=2<aa.constant.length?aa.constant[2]:0,Jd=3<aa.constant.length?aa.constant[3]:0)):(mb=ob(aa.buffer)?t.createStream(34962,aa.buffer):t.getBuffer(aa.buffer),sc="type"in aa?tc[aa.type]:mb.dtype,Eb=!!aa.normalized,wc=aa.size|0,tb=aa.offset|0,Dd=aa.stride|0,xb=aa.divisor|0);Vb=xa.location;bc=Q[Vb];if(1===yb){bc.buffer||S.enableVertexAttribArray(Vb);
Pb=wc||4;if(bc.type!==sc||bc.size!==Pb||bc.buffer!==mb||bc.normalized!==Eb||bc.offset!==tb||bc.stride!==Dd)S.bindBuffer(34962,mb.buffer),S.vertexAttribPointer(Vb,Pb,sc,Eb,Dd,tb),bc.type=sc,bc.size=Pb,bc.buffer=mb,bc.normalized=Eb,bc.offset=tb,bc.stride=Dd;bc.divisor!==xb&&(f.vertexAttribDivisorANGLE(Vb,xb),bc.divisor=xb)}else if(bc.buffer&&(S.disableVertexAttribArray(Vb),bc.buffer=null),bc.x!==Mc||bc.y!==jd||bc.z!==cd||bc.w!==Jd)S.vertexAttrib4f(Vb,Mc,jd,cd,Jd),bc.x=Mc,bc.y=jd,bc.z=cd,bc.w=Jd;Ha=
h.call(this,ma,n,k);Yb=Ha[0];zb=Ha[1];Qb=Ha[2];jc=Ha[3];k&&nb===Yb&&Nb===zb&&hc===Qb&&Hf===jc||(nb=Yb,Nb=zb,hc=Qb,Hf=jc,S.uniform4f($a.location,Yb,zb,Qb,jc));Cc=n.lineWidth;k&&Dc===Cc||(Dc=Cc,S.uniform1f(Na.location,Cc));Ec=n.capSize;k&&Nc===Ec||(Nc=Ec,S.uniform1f(ra.location,Ec));$c=n.scale;Sc=$c[0];Lb=$c[1];k&&Oc===Sc&&Gb===Lb||(Oc=Sc,Gb=Lb,S.uniform2f(P.location,Sc,Lb));Pc=n.scaleFract;Hc=Pc[0];ic=Pc[1];k&&Tc===Hc&&Wc===ic||(Tc=Hc,Wc=ic,S.uniform2f(sa.location,Hc,ic));md=n.translate;kd=md[0];Xc=
md[1];k&&qd===kd&&be===Xc||(qd=kd,be=Xc,S.uniform2f(J.location,kd,Xc));Ld=n.translateFract;le=Ld[0];Ud=Ld[1];k&&xe===le&&Hd===Ud||(xe=le,Hd=Ud,S.uniform2f(Wb.location,le,Ud));Ed=n.opacity;k&&ed===Ed||(ed=Ed,S.uniform1f(Y.location,Ed));Fc=n.count;0<Fc?vb?f.drawElementsInstancedANGLE(4,36,vb.type,Wa<<(vb.type-5121>>1),Fc):f.drawArraysInstancedANGLE(4,Wa,36,Fc):0>Fc&&(vb?S.drawElements(4,36,vb.type,Wa<<(vb.type-5121>>1)):S.drawArrays(4,Wa,36));ma.viewportWidth=cb;ma.viewportHeight=fc;Ma&&t.destroyStream(pb);
Ua&&t.destroyStream(bb);ib&&t.destroyStream(za);Ca&&t.destroyStream(mb)}da.dirty=!0;nc.setVAO(null);e&&(Z.cpuTime+=performance.now()-g)},draw:function(a){var d,c,e,g,h,f,k,q,n,r,C,z,O,H,L,ia,N,T,I,U,W,ca,fa,oa,R,ta,oc,yc,fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,cc,kc,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,fb,ib,za,gc;d=Ia.next;d!==Ia.cur&&(d?S.bindFramebuffer(36160,d.framebuffer):S.bindFramebuffer(36160,
null),Ia.cur=d);if(da.dirty){var Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb;Ea=ga.dither;Ea!==da.dither&&(Ea?S.enable(3024):S.disable(3024),da.dither=Ea);rb=ga.depth_func;rb!==da.depth_func&&(S.depthFunc(rb),da.depth_func=rb);sb=Qc[0];Xa=Qc[1];if(sb!==Uc[0]||Xa!==Uc[1])S.depthRange(sb,Xa),Uc[0]=sb,Uc[1]=Xa;Ya=ga.depth_mask;Ya!==da.depth_mask&&(S.depthMask(Ya),da.depth_mask=Ya);mc=Da[0];xc=Da[1];vc=Da[2];Va=Da[3];if(mc!==ub[0]||xc!==ub[1]||vc!==
ub[2]||Va!==ub[3])S.colorMask(mc,xc,vc,Va),ub[0]=mc,ub[1]=xc,ub[2]=vc,ub[3]=Va;Mb=ga.cull_enable;Mb!==da.cull_enable&&(Mb?S.enable(2884):S.disable(2884),da.cull_enable=Mb);Zc=ga.cull_face;Zc!==da.cull_face&&(S.cullFace(Zc),da.cull_face=Zc);Ga=ga.frontFace;Ga!==da.frontFace&&(S.frontFace(Ga),da.frontFace=Ga);zc=ga.lineWidth;zc!==da.lineWidth&&(S.lineWidth(zc),da.lineWidth=zc);Qa=ga.polygonOffset_enable;Qa!==da.polygonOffset_enable&&(Qa?S.enable(32823):S.disable(32823),da.polygonOffset_enable=Qa);Ca=
D[0];mb=D[1];if(Ca!==u[0]||mb!==u[1])S.polygonOffset(Ca,mb),u[0]=Ca,u[1]=mb;xb=ga.sample_alpha;xb!==da.sample_alpha&&(xb?S.enable(32926):S.disable(32926),da.sample_alpha=xb);Eb=ga.sample_enable;Eb!==da.sample_enable&&(Eb?S.enable(32928):S.disable(32928),da.sample_enable=Eb);tb=ka[0];wc=ka[1];if(tb!==ua[0]||wc!==ua[1])S.sampleCoverage(tb,wc),ua[0]=tb,ua[1]=wc;yb=ga.stencil_enable;yb!==da.stencil_enable&&(yb?S.enable(2960):S.disable(2960),da.stencil_enable=yb);Dd=ga.stencil_mask;Dd!==da.stencil_mask&&
(S.stencilMask(Dd),da.stencil_mask=Dd);sc=qa[0];Jd=qa[1];Mc=qa[2];if(sc!==E[0]||Jd!==E[1]||Mc!==E[2])S.stencilFunc(sc,Jd,Mc),E[0]=sc,E[1]=Jd,E[2]=Mc;jd=x[0];cd=x[1];Vb=x[2];bc=x[3];if(jd!==ja[0]||cd!==ja[1]||Vb!==ja[2]||bc!==ja[3])S.stencilOpSeparate(jd,cd,Vb,bc),ja[0]=jd,ja[1]=cd,ja[2]=Vb,ja[3]=bc;Pb=m[0];Ha=m[1];Yb=m[2];nb=m[3];if(Pb!==ba[0]||Ha!==ba[1]||Yb!==ba[2]||nb!==ba[3])S.stencilOpSeparate(Pb,Ha,Yb,nb),ba[0]=Pb,ba[1]=Ha,ba[2]=Yb,ba[3]=nb}c=a.viewport;e=c.x|0;g=c.y|0;h="width"in c?c.width|
0:ma.framebufferWidth-e;f="height"in c?c.height|0:ma.framebufferHeight-g;k=ma.viewportWidth;ma.viewportWidth=h;q=ma.viewportHeight;ma.viewportHeight=f;S.viewport(e,g,h,f);l[0]=e;l[1]=g;l[2]=h;l[3]=f;S.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;S.enable(3042);da.blend_enable=!0;S.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;S.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;S.disable(2929);da.depth_enable=!1;n=a.viewport;r=n.x|0;C=n.y|0;z="width"in n?n.width|
0:ma.framebufferWidth-r;O="height"in n?n.height|0:ma.framebufferHeight-C;S.scissor(r,C,z,O);ha[0]=r;ha[1]=C;ha[2]=z;ha[3]=O;S.enable(3089);da.scissor_enable=!0;if(H=da.profile)L=performance.now(),Z.count++;S.useProgram(y.program);ia=$b.angle_instanced_arrays;nc.setVAO(null);N=b.call(this,ma,a,0);Db.offset=N;T=!1;I=null;U=0;W=!1;fa=ca=0;oa=1;R=0;ta=5126;Lc=fd=yc=oc=0;ob(Db)?(T=!0,I=t.createStream(34962,Db),ta=I.dtype):(I=t.getBuffer(Db))?ta=I.dtype:"constant"in Db?(oa=2,"number"===typeof Db.constant?
(yc=Db.constant,fd=Lc=oc=0):(yc=0<Db.constant.length?Db.constant[0]:0,fd=1<Db.constant.length?Db.constant[1]:0,Lc=2<Db.constant.length?Db.constant[2]:0,oc=3<Db.constant.length?Db.constant[3]:0)):(I=ob(Db.buffer)?t.createStream(34962,Db.buffer):t.getBuffer(Db.buffer),ta="type"in Db?tc[Db.type]:I.dtype,W=!!Db.normalized,fa=Db.size|0,ca=Db.offset|0,R=Db.stride|0,U=Db.divisor|0);qc=K.location;ab=Q[qc];if(1===oa){ab.buffer||S.enableVertexAttribArray(qc);Ic=fa||2;if(ab.type!==ta||ab.size!==Ic||ab.buffer!==
I||ab.normalized!==W||ab.offset!==ca||ab.stride!==R)S.bindBuffer(34962,I.buffer),S.vertexAttribPointer(qc,Ic,ta,W,R,ca),ab.type=ta,ab.size=Ic,ab.buffer=I,ab.normalized=W,ab.offset=ca,ab.stride=R;ab.divisor!==U&&(ia.vertexAttribDivisorANGLE(qc,U),ab.divisor=U)}else if(ab.buffer&&(S.disableVertexAttribArray(qc),ab.buffer=null),ab.x!==yc||ab.y!==fd||ab.z!==Lc||ab.w!==oc)S.vertexAttrib4f(qc,yc,fd,Lc,oc),ab.x=yc,ab.y=fd,ab.z=Lc,ab.w=oc;Fb=v.call(this,ma,a,0);Ab.offset=Fb;pc=!1;Ta=null;Jc=0;ac=!1;cc=rc=
0;kc=1;Bc=0;Xb=5126;vb=La=Rc=Gc=0;ob(Ab)?(pc=!0,Ta=t.createStream(34962,Ab),Xb=Ta.dtype):(Ta=t.getBuffer(Ab))?Xb=Ta.dtype:"constant"in Ab?(kc=2,"number"===typeof Ab.constant?(Rc=Ab.constant,La=vb=Gc=0):(Rc=0<Ab.constant.length?Ab.constant[0]:0,La=1<Ab.constant.length?Ab.constant[1]:0,vb=2<Ab.constant.length?Ab.constant[2]:0,Gc=3<Ab.constant.length?Ab.constant[3]:0)):(Ta=ob(Ab.buffer)?t.createStream(34962,Ab.buffer):t.getBuffer(Ab.buffer),Xb="type"in Ab?tc[Ab.type]:Ta.dtype,ac=!!Ab.normalized,cc=Ab.size|
0,rc=Ab.offset|0,Bc=Ab.stride|0,Jc=Ab.divisor|0);Wa=M.location;Aa=Q[Wa];if(1===kc){Aa.buffer||S.enableVertexAttribArray(Wa);ld=cc||2;if(Aa.type!==Xb||Aa.size!==ld||Aa.buffer!==Ta||Aa.normalized!==ac||Aa.offset!==rc||Aa.stride!==Bc)S.bindBuffer(34962,Ta.buffer),S.vertexAttribPointer(Wa,ld,Xb,ac,Bc,rc),Aa.type=Xb,Aa.size=ld,Aa.buffer=Ta,Aa.normalized=ac,Aa.offset=rc,Aa.stride=Bc;Aa.divisor!==Jc&&(ia.vertexAttribDivisorANGLE(Wa,Jc),Aa.divisor=Jc)}else if(Aa.buffer&&(S.disableVertexAttribArray(Wa),Aa.buffer=
null),Aa.x!==Rc||Aa.y!==La||Aa.z!==vb||Aa.w!==Gc)S.vertexAttrib4f(Wa,Rc,La,vb,Gc),Aa.x=Rc,Aa.y=La,Aa.z=vb,Aa.w=Gc;gb=A.call(this,ma,a,0);p.offset=gb;Sa=!1;Hb=null;cb=0;fc=!1;ke=Rb=0;Zb=1;Sb=0;td=5126;wb=pb=Ma=Tb=0;ob(p)?(Sa=!0,Hb=t.createStream(34962,p),td=Hb.dtype):(Hb=t.getBuffer(p))?td=Hb.dtype:"constant"in p?(Zb=2,"number"===typeof p.constant?(Ma=p.constant,pb=wb=Tb=0):(Ma=0<p.constant.length?p.constant[0]:0,pb=1<p.constant.length?p.constant[1]:0,wb=2<p.constant.length?p.constant[2]:0,Tb=3<p.constant.length?
p.constant[3]:0)):(Hb=ob(p.buffer)?t.createStream(34962,p.buffer):t.getBuffer(p.buffer),td="type"in p?tc[p.type]:Hb.dtype,fc=!!p.normalized,ke=p.size|0,Rb=p.offset|0,Sb=p.stride|0,cb=p.divisor|0);hb=ec.location;Pa=Q[hb];if(1===Zb){Pa.buffer||S.enableVertexAttribArray(hb);uc=ke||4;if(Pa.type!==td||Pa.size!==uc||Pa.buffer!==Hb||Pa.normalized!==fc||Pa.offset!==Rb||Pa.stride!==Sb)S.bindBuffer(34962,Hb.buffer),S.vertexAttribPointer(hb,uc,td,fc,Sb,Rb),Pa.type=td,Pa.size=uc,Pa.buffer=Hb,Pa.normalized=fc,
Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==cb&&(ia.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(S.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==pb||Pa.z!==wb||Pa.w!==Tb)S.vertexAttrib4f(hb,Ma,pb,wb,Tb),Pa.x=Ma,Pa.y=pb,Pa.z=wb,Pa.w=Tb;Jb=ea.call(this,ma,a,0);aa.offset=Jb;ad=!1;db=null;lc=0;Yc=!1;kb=dc=0;lb=1;va=0;qb=5126;Ba=bb=Ua=wa=0;ob(aa)?(ad=!0,db=t.createStream(34962,aa),qb=db.dtype):(db=t.getBuffer(aa))?qb=db.dtype:"constant"in aa?(lb=2,"number"===typeof aa.constant?
(Ua=aa.constant,bb=Ba=wa=0):(Ua=0<aa.constant.length?aa.constant[0]:0,bb=1<aa.constant.length?aa.constant[1]:0,Ba=2<aa.constant.length?aa.constant[2]:0,wa=3<aa.constant.length?aa.constant[3]:0)):(db=ob(aa.buffer)?t.createStream(34962,aa.buffer):t.getBuffer(aa.buffer),qb="type"in aa?tc[aa.type]:db.dtype,Yc=!!aa.normalized,kb=aa.size|0,dc=aa.offset|0,va=aa.stride|0,lc=aa.divisor|0);eb=xa.location;Ja=Q[eb];if(1===lb){Ja.buffer||S.enableVertexAttribArray(eb);Cb=kb||4;if(Ja.type!==qb||Ja.size!==Cb||Ja.buffer!==
db||Ja.normalized!==Yc||Ja.offset!==dc||Ja.stride!==va)S.bindBuffer(34962,db.buffer),S.vertexAttribPointer(eb,Cb,qb,Yc,va,dc),Ja.type=qb,Ja.size=Cb,Ja.buffer=db,Ja.normalized=Yc,Ja.offset=dc,Ja.stride=va;Ja.divisor!==lc&&(ia.vertexAttribDivisorANGLE(eb,lc),Ja.divisor=lc)}else if(Ja.buffer&&(S.disableVertexAttribArray(eb),Ja.buffer=null),Ja.x!==Ua||Ja.y!==bb||Ja.z!==Ba||Ja.w!==wa)S.vertexAttrib4f(eb,Ua,bb,Ba,wa),Ja.x=Ua,Ja.y=bb,Ja.z=Ba,Ja.w=wa;Bb=jb.location;Ra=Q[Bb];Ra.buffer||S.enableVertexAttribArray(Bb);
if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==G||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)S.bindBuffer(34962,G.buffer),S.vertexAttribPointer(Bb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=G,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(ia.vertexAttribDivisorANGLE(Bb,0),Ra.divisor=0);Kc=na.location;Kb=Q[Kc];Kb.buffer||S.enableVertexAttribArray(Kc);if(5126!==Kb.type||2!==Kb.size||Kb.buffer!==F||!1!==Kb.normalized||8!==Kb.offset||24!==Kb.stride)S.bindBuffer(34962,F.buffer),S.vertexAttribPointer(Kc,
2,5126,!1,24,8),Kb.type=5126,Kb.size=2,Kb.buffer=F,Kb.normalized=!1,Kb.offset=8,Kb.stride=24;0!==Kb.divisor&&(ia.vertexAttribDivisorANGLE(Kc,0),Kb.divisor=0);Za=X.location;Ub=Q[Za];Ub.buffer||S.enableVertexAttribArray(Za);if(5126!==Ub.type||2!==Ub.size||Ub.buffer!==w||!1!==Ub.normalized||16!==Ub.offset||24!==Ub.stride)S.bindBuffer(34962,w.buffer),S.vertexAttribPointer(Za,2,5126,!1,24,16),Ub.type=5126,Ub.size=2,Ub.buffer=w,Ub.normalized=!1,Ub.offset=16,Ub.stride=24;0!==Ub.divisor&&(ia.vertexAttribDivisorANGLE(Za,
0),Ub.divisor=0);ya=B.call(this,ma,a,0);S.uniform4f($a.location,ya[0],ya[1],ya[2],ya[3]);S.uniform1f(Na.location,a.lineWidth);S.uniform1f(ra.location,a.capSize);ze=a.scale;S.uniform2f(P.location,ze[0],ze[1]);Ka=a.scaleFract;S.uniform2f(sa.location,Ka[0],Ka[1]);Ob=a.translate;S.uniform2f(J.location,Ob[0],Ob[1]);fb=a.translateFract;S.uniform2f(Wb.location,fb[0],fb[1]);S.uniform1f(Y.location,a.opacity);(ib=Fa.elements)?S.bindBuffer(34963,ib.buffer.buffer):nc.currentVAO&&(ib=Oa.getElements(nc.currentVAO.elements))&&
S.bindBuffer(34963,ib.buffer.buffer);za=Fa.offset;gc=a.count;0<gc?ib?ia.drawElementsInstancedANGLE(4,36,ib.type,za<<(ib.type-5121>>1),gc):ia.drawArraysInstancedANGLE(4,za,36,gc):0>gc&&(ib?S.drawElements(4,36,ib.type,za<<(ib.type-5121>>1)):S.drawArrays(4,za,36));da.dirty=!0;nc.setVAO(null);ma.viewportWidth=k;ma.viewportHeight=q;H&&(Z.cpuTime+=performance.now()-L);T&&t.destroyStream(I);pc&&t.destroyStream(Ta);Sa&&t.destroyStream(Hb);ad&&t.destroyStream(db)},scope:function(a,b,c){var h,f,l,k,m,q,r,x,
u,v,y,E,D,ba,V,B,O,M,L,K,J,A,ja,P,Q,S,ha,la,Y,ka,X,ea,ua,nc,qa,Da,fa,oa,sa,ud,Xb,Gc,Rc,La,vb,Wa,Aa,na,gb,Sa,ra,cb,pa,ub,Qc,Zb,Sb,$a,Tb,Ma,pb,wb,hb,Pa,Na,Jb,xa,db,lc,Oa,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,jb,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Wb,sc,Ia,Mc,Uc,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,$b,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,ec,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ib,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,
Fd,Md,Nd,Od,je,Ye,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id;h=a.viewport;f=h.x|0;l=h.y|0;k="width"in h?h.width|0:ma.framebufferWidth-f;m="height"in h?h.height|0:ma.framebufferHeight-l;q=ma.viewportWidth;ma.viewportWidth=k;r=ma.viewportHeight;ma.viewportHeight=m;x=ia[0];ia[0]=f;u=ia[1];ia[1]=l;v=ia[2];ia[2]=k;y=ia[3];ia[3]=m;E=kc[0];kc[0]=0;D=kc[1];kc[1]=0;ba=kc[2];kc[2]=0;V=kc[3];kc[3]=0;B=ga.blend_enable;ga.blend_enable=!0;O=yc[0];yc[0]=32774;M=yc[1];yc[1]=32774;L=C[0];C[0]=770;K=C[1];C[1]=771;J=C[2];
C[2]=773;A=C[3];C[3]=1;ja=ga.depth_enable;ga.depth_enable=!1;P=a.viewport;Q=P.x|0;S=P.y|0;ha="width"in P?P.width|0:ma.framebufferWidth-Q;la="height"in P?P.height|0:ma.framebufferHeight-S;Y=T[0];T[0]=Q;ka=T[1];T[1]=S;X=T[2];T[2]=ha;ea=T[3];T[3]=la;ua=ga.scissor_enable;ga.scissor_enable=!0;if(nc=da.profile)qa=performance.now(),Z.count++;Da=Fa.count;Fa.count=36;fa=a.count;oa=Fa.instances;Fa.instances=fa;sa=Fa.primitive;Fa.primitive=4;ud=a.capSize;Xb=cc[5];cc[5]=ud;Gc=a.lineWidth;Rc=cc[4];cc[4]=Gc;La=
a.opacity;vb=cc[10];cc[10]=La;Wa=a.range;Aa=cc[18];cc[18]=Wa;na=a.scale;gb=cc[6];cc[6]=na;Sa=a.scaleFract;ra=cc[7];cc[7]=Sa;cb=a.translate;pa=cc[8];cc[8]=cb;ub=a.translateFract;Qc=cc[9];cc[9]=ub;Zb=N.call(this,ma,a,c);Sb=cc[3];cc[3]=Zb;$a=n.buffer;n.buffer=w;Tb=n.divisor;n.divisor=0;Ma=n.normalized;n.normalized=!1;pb=n.offset;n.offset=16;wb=n.size;n.size=0;hb=n.state;n.state=1;Pa=n.stride;n.stride=24;Na=n.type;n.type=5126;Jb=n.w;n.w=0;xa=n.x;n.x=0;db=n.y;n.y=0;lc=n.z;n.z=0;Oa=H.call(this,ma,a,c);
aa.offset=Oa;dc=!1;kb=null;lb=0;va=!1;wa=qb=0;Ua=1;bb=0;Ba=5126;Bb=Cb=Ja=eb=0;ob(aa)?(dc=!0,kb=t.createStream(34962,aa),Ba=kb.dtype):(kb=t.getBuffer(aa))?Ba=kb.dtype:"constant"in aa?(Ua=2,"number"===typeof aa.constant?(Ja=aa.constant,Cb=Bb=eb=0):(Ja=0<aa.constant.length?aa.constant[0]:0,Cb=1<aa.constant.length?aa.constant[1]:0,Bb=2<aa.constant.length?aa.constant[2]:0,eb=3<aa.constant.length?aa.constant[3]:0)):(kb=ob(aa.buffer)?t.createStream(34962,aa.buffer):t.getBuffer(aa.buffer),Ba="type"in aa?
tc[aa.type]:kb.dtype,va=!!aa.normalized,wa=aa.size|0,qb=aa.offset|0,bb=aa.stride|0,lb=aa.divisor|0);Ra=ca.buffer;ca.buffer=kb;Kc=ca.divisor;ca.divisor=lb;Kb=ca.normalized;ca.normalized=va;Za=ca.offset;ca.offset=qb;Ub=ca.size;ca.size=wa;ya=ca.state;ca.state=Ua;jb=ca.stride;ca.stride=bb;Ka=ca.type;ca.type=Ba;Ob=ca.w;ca.w=eb;fb=ca.x;ca.x=Ja;ib=ca.y;ca.y=Cb;za=ca.z;ca.z=Bb;gc=I.buffer;I.buffer=G;Ea=I.divisor;I.divisor=0;rb=I.normalized;I.normalized=!1;sb=I.offset;I.offset=0;Xa=I.size;I.size=0;Ya=I.state;
I.state=1;mc=I.stride;I.stride=24;xc=I.type;I.type=5126;vc=I.w;I.w=0;Va=I.x;I.x=0;Mb=I.y;I.y=0;Zc=I.z;I.z=0;Ga=R.call(this,ma,a,c);p.offset=Ga;zc=!1;Qa=null;Ca=0;mb=!1;Eb=xb=0;tb=1;wc=0;yb=5126;Mc=Ia=sc=Wb=0;ob(p)?(zc=!0,Qa=t.createStream(34962,p),yb=Qa.dtype):(Qa=t.getBuffer(p))?yb=Qa.dtype:"constant"in p?(tb=2,"number"===typeof p.constant?(sc=p.constant,Ia=Mc=Wb=0):(sc=0<p.constant.length?p.constant[0]:0,Ia=1<p.constant.length?p.constant[1]:0,Mc=2<p.constant.length?p.constant[2]:0,Wb=3<p.constant.length?
p.constant[3]:0)):(Qa=ob(p.buffer)?t.createStream(34962,p.buffer):t.getBuffer(p.buffer),yb="type"in p?tc[p.type]:Qa.dtype,mb=!!p.normalized,Eb=p.size|0,xb=p.offset|0,wc=p.stride|0,Ca=p.divisor|0);Uc=e.buffer;e.buffer=Qa;cd=e.divisor;e.divisor=Ca;Vb=e.normalized;e.normalized=mb;bc=e.offset;e.offset=xb;Pb=e.size;e.size=Eb;Ha=e.state;e.state=tb;Yb=e.stride;e.stride=wc;nb=e.type;e.type=yb;zb=e.w;e.w=Wb;Nb=e.x;e.x=sc;Qb=e.y;e.y=Ia;hc=e.z;e.z=Mc;jc=g.buffer;g.buffer=F;$b=g.divisor;g.divisor=0;Cc=g.normalized;
g.normalized=!1;Dc=g.offset;g.offset=8;Ec=g.size;g.size=0;Nc=g.state;g.state=1;$c=g.stride;g.stride=24;Sc=g.type;g.type=5126;Oc=g.w;g.w=0;Lb=g.x;g.x=0;Gb=g.y;g.y=0;Pc=g.z;g.z=0;Hc=d.call(this,ma,a,c);Db.offset=Hc;Tc=!1;ic=null;Wc=0;md=!1;qd=kd=0;Xc=1;ec=0;Ld=5126;Hd=Ud=xe=le=0;ob(Db)?(Tc=!0,ic=t.createStream(34962,Db),Ld=ic.dtype):(ic=t.getBuffer(Db))?Ld=ic.dtype:"constant"in Db?(Xc=2,"number"===typeof Db.constant?(xe=Db.constant,Ud=Hd=le=0):(xe=0<Db.constant.length?Db.constant[0]:0,Ud=1<Db.constant.length?
Db.constant[1]:0,Hd=2<Db.constant.length?Db.constant[2]:0,le=3<Db.constant.length?Db.constant[3]:0)):(ic=ob(Db.buffer)?t.createStream(34962,Db.buffer):t.getBuffer(Db.buffer),Ld="type"in Db?tc[Db.type]:ic.dtype,md=!!Db.normalized,qd=Db.size|0,kd=Db.offset|0,ec=Db.stride|0,Wc=Db.divisor|0);Ed=z.buffer;z.buffer=ic;ed=z.divisor;z.divisor=Wc;Fc=z.normalized;z.normalized=md;nd=z.offset;z.offset=kd;gd=z.size;z.size=qd;bd=z.state;z.state=Xc;hd=z.stride;z.stride=ec;zd=z.type;z.type=Ld;Ad=z.w;z.w=le;te=z.x;
z.x=xe;ve=z.y;z.y=Ud;Ib=z.z;z.z=Hd;ge=U.call(this,ma,a,c);Ab.offset=ge;fe=!1;ce=null;pe=0;$d=!1;Ac=ie=0;Vc=1;qe=0;me=5126;Od=Nd=Md=Fd=0;ob(Ab)?(fe=!0,ce=t.createStream(34962,Ab),me=ce.dtype):(ce=t.getBuffer(Ab))?me=ce.dtype:"constant"in Ab?(Vc=2,"number"===typeof Ab.constant?(Md=Ab.constant,Nd=Od=Fd=0):(Md=0<Ab.constant.length?Ab.constant[0]:0,Nd=1<Ab.constant.length?Ab.constant[1]:0,Od=2<Ab.constant.length?Ab.constant[2]:0,Fd=3<Ab.constant.length?Ab.constant[3]:0)):(ce=ob(Ab.buffer)?t.createStream(34962,
Ab.buffer):t.getBuffer(Ab.buffer),me="type"in Ab?tc[Ab.type]:ce.dtype,$d=!!Ab.normalized,Ac=Ab.size|0,ie=Ab.offset|0,qe=Ab.stride|0,pe=Ab.divisor|0);je=W.buffer;W.buffer=ce;Ye=W.divisor;W.divisor=pe;ye=W.normalized;W.normalized=$d;oe=W.offset;W.offset=ie;Oe=W.size;W.size=Ac;Pe=W.state;W.state=Vc;Le=W.stride;W.stride=qe;re=W.type;W.type=me;De=W.w;W.w=Fd;Ge=W.x;W.x=Md;He=W.y;W.y=Nd;Ie=W.z;W.z=Od;Ee=ta.vert;ta.vert=2;Id=ta.frag;ta.frag=1;da.dirty=!0;b(ma,a,c);ma.viewportWidth=q;ma.viewportHeight=r;ia[0]=
x;ia[1]=u;ia[2]=v;ia[3]=y;kc[0]=E;kc[1]=D;kc[2]=ba;kc[3]=V;ga.blend_enable=B;yc[0]=O;yc[1]=M;C[0]=L;C[1]=K;C[2]=J;C[3]=A;ga.depth_enable=ja;T[0]=Y;T[1]=ka;T[2]=X;T[3]=ea;ga.scissor_enable=ua;nc&&(Z.cpuTime+=performance.now()-qa);Fa.count=Da;Fa.instances=oa;Fa.primitive=sa;cc[5]=Xb;cc[4]=Rc;cc[10]=vb;cc[18]=Aa;cc[6]=gb;cc[7]=ra;cc[8]=pa;cc[9]=Qc;cc[3]=Sb;n.buffer=$a;n.divisor=Tb;n.normalized=Ma;n.offset=pb;n.size=wb;n.state=hb;n.stride=Pa;n.type=Na;n.w=Jb;n.x=xa;n.y=db;n.z=lc;dc&&t.destroyStream(kb);
ca.buffer=Ra;ca.divisor=Kc;ca.normalized=Kb;ca.offset=Za;ca.size=Ub;ca.state=ya;ca.stride=jb;ca.type=Ka;ca.w=Ob;ca.x=fb;ca.y=ib;ca.z=za;I.buffer=gc;I.divisor=Ea;I.normalized=rb;I.offset=sb;I.size=Xa;I.state=Ya;I.stride=mc;I.type=xc;I.w=vc;I.x=Va;I.y=Mb;I.z=Zc;zc&&t.destroyStream(Qa);e.buffer=Uc;e.divisor=cd;e.normalized=Vb;e.offset=bc;e.size=Pb;e.state=Ha;e.stride=Yb;e.type=nb;e.w=zb;e.x=Nb;e.y=Qb;e.z=hc;g.buffer=jc;g.divisor=$b;g.normalized=Cc;g.offset=Dc;g.size=Ec;g.state=Nc;g.stride=$c;g.type=
Sc;g.w=Oc;g.x=Lb;g.y=Gb;g.z=Pc;Tc&&t.destroyStream(ic);z.buffer=Ed;z.divisor=ed;z.normalized=Fc;z.offset=nd;z.size=gd;z.state=bd;z.stride=hd;z.type=zd;z.w=Ad;z.x=te;z.y=ve;z.z=Ib;fe&&t.destroyStream(ce);W.buffer=je;W.divisor=Ye;W.normalized=ye;W.offset=oe;W.size=Oe;W.state=Pe;W.stride=Le;W.type=re;W.w=De;W.x=Ge;W.y=He;W.z=Ie;ta.vert=Ee;ta.frag=Id;da.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(k,
Z,r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca,I,R,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb){var ec,na,Na,Y,K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta,cc,nc,kc,ud,yc,V,C,la,Da,ub,Qc,Uc,D,u,ka,ua,T,ha,qa,E,m;ec=k.attributes;na=k.buffer;Na=k.context;Y=k.current;K=k.draw;M=k.elements;P=k.extensions;sa=k.framebuffer;J=k.gl;Wb=k.isBufferArgs;$a=k.next;Q=k.shader;t=k.uniforms;ma=k.vao;da=$a.blend_color;Fa=Y.blend_color;Oa=$a.blend_equation;$b=Y.blend_equation;Ia=$a.blend_func;S=Y.blend_func;ob=$a.colorMask;ga=
Y.colorMask;ta=$a.depth_range;cc=Y.depth_range;nc=$a.polygonOffset_offset;kc=Y.polygonOffset_offset;ud=$a.sample_coverage;yc=Y.sample_coverage;V=$a.scissor_box;C=Y.scissor_box;la=$a.stencil_func;Da=Y.stencil_func;ub=$a.stencil_opBack;Qc=Y.stencil_opBack;Uc=$a.stencil_opFront;D=Y.stencil_opFront;u=$a.viewport;ka=Y.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};T={divisor:1,offset:8,stride:8};ha={divisor:1,offset:8,stride:8};qa={divisor:1,
offset:16,stride:8};E={divisor:1,offset:16,stride:8};m={divisor:1,offset:0,stride:4};return{batch:function(b,k){var n,r,l,t,u,p;n=sa.next;n!==sa.cur&&(n?J.bindFramebuffer(36160,n.framebuffer):J.bindFramebuffer(36160,null),sa.cur=n);if(Y.dirty){var w,v,y,V,B,O,F,A,G,Q,N,da,ea,pa,Wd,Ze,Oa,bf,wd,Fe,Sd,Td,ne,Xd,rd,id,vd,pd,dd,oc,sd,fd;w=$a.dither;w!==Y.dither&&(w?J.enable(3024):J.disable(3024),Y.dither=w);v=$a.depth_func;v!==Y.depth_func&&(J.depthFunc(v),Y.depth_func=v);y=ta[0];V=ta[1];if(y!==cc[0]||
V!==cc[1])J.depthRange(y,V),cc[0]=y,cc[1]=V;B=$a.depth_mask;B!==Y.depth_mask&&(J.depthMask(B),Y.depth_mask=B);O=ob[0];F=ob[1];A=ob[2];G=ob[3];if(O!==ga[0]||F!==ga[1]||A!==ga[2]||G!==ga[3])J.colorMask(O,F,A,G),ga[0]=O,ga[1]=F,ga[2]=A,ga[3]=G;Q=$a.cull_enable;Q!==Y.cull_enable&&(Q?J.enable(2884):J.disable(2884),Y.cull_enable=Q);N=$a.cull_face;N!==Y.cull_face&&(J.cullFace(N),Y.cull_face=N);da=$a.frontFace;da!==Y.frontFace&&(J.frontFace(da),Y.frontFace=da);ea=$a.lineWidth;ea!==Y.lineWidth&&(J.lineWidth(ea),
Y.lineWidth=ea);pa=$a.polygonOffset_enable;pa!==Y.polygonOffset_enable&&(pa?J.enable(32823):J.disable(32823),Y.polygonOffset_enable=pa);Wd=nc[0];Ze=nc[1];if(Wd!==kc[0]||Ze!==kc[1])J.polygonOffset(Wd,Ze),kc[0]=Wd,kc[1]=Ze;Oa=$a.sample_alpha;Oa!==Y.sample_alpha&&(Oa?J.enable(32926):J.disable(32926),Y.sample_alpha=Oa);bf=$a.sample_enable;bf!==Y.sample_enable&&(bf?J.enable(32928):J.disable(32928),Y.sample_enable=bf);wd=ud[0];Fe=ud[1];if(wd!==yc[0]||Fe!==yc[1])J.sampleCoverage(wd,Fe),yc[0]=wd,yc[1]=Fe;
Sd=$a.stencil_mask;Sd!==Y.stencil_mask&&(J.stencilMask(Sd),Y.stencil_mask=Sd);Td=la[0];ne=la[1];Xd=la[2];if(Td!==Da[0]||ne!==Da[1]||Xd!==Da[2])J.stencilFunc(Td,ne,Xd),Da[0]=Td,Da[1]=ne,Da[2]=Xd;rd=Uc[0];id=Uc[1];vd=Uc[2];pd=Uc[3];if(rd!==D[0]||id!==D[1]||vd!==D[2]||pd!==D[3])J.stencilOpSeparate(rd,id,vd,pd),D[0]=rd,D[1]=id,D[2]=vd,D[3]=pd;dd=ub[0];oc=ub[1];sd=ub[2];fd=ub[3];if(dd!==Qc[0]||oc!==Qc[1]||sd!==Qc[2]||fd!==Qc[3])J.stencilOpSeparate(dd,oc,sd,fd),Qc[0]=dd,Qc[1]=oc,Qc[2]=sd,Qc[3]=fd}J.blendColor(0,
0,0,0);Fa[0]=0;Fa[1]=0;Fa[2]=0;Fa[3]=0;J.enable(3042);Y.blend_enable=!0;J.blendEquationSeparate(32774,32774);$b[0]=32774;$b[1]=32774;J.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;J.enable(3089);Y.scissor_enable=!0;J.disable(2960);Y.stencil_enable=!1;if(r=Y.profile)l=performance.now(),Z.count+=k;J.useProgram(H.program);t=P.angle_instanced_arrays;var Lc,qc,ab,Ic,Fb;ma.setVAO(null);Lc=oa.location;qc=ec[Lc];qc.buffer||J.enableVertexAttribArray(Lc);if(5126!==qc.type||1!==qc.size||
qc.buffer!==f||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)J.bindBuffer(34962,f.buffer),J.vertexAttribPointer(Lc,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=f,qc.normalized=!1,qc.offset=0,qc.stride=8;0!==qc.divisor&&(t.vertexAttribDivisorANGLE(Lc,0),qc.divisor=0);ab=L.location;Ic=ec[ab];Ic.buffer||J.enableVertexAttribArray(ab);if(5126!==Ic.type||1!==Ic.size||Ic.buffer!==c||!1!==Ic.normalized||4!==Ic.offset||8!==Ic.stride)J.bindBuffer(34962,c.buffer),J.vertexAttribPointer(ab,1,5126,!1,8,4),
Ic.type=5126,Ic.size=1,Ic.buffer=c,Ic.normalized=!1,Ic.offset=4,Ic.stride=8;0!==Ic.divisor&&(t.vertexAttribDivisorANGLE(ab,0),Ic.divisor=0);(Fb=K.elements)?J.bindBuffer(34963,Fb.buffer.buffer):ma.currentVAO&&(Fb=M.getElements(ma.currentVAO.elements))&&J.bindBuffer(34963,Fb.buffer.buffer);for(u=0;u<k;++u){p=b[u];var pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,Ia,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,fb,ib,
za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Hf,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,Ib,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd;pc=p.viewport;Ta=pc.x|0;Jc=pc.y|0;ac="width"in pc?pc.width|0:Na.framebufferWidth-Ta;rc="height"in pc?pc.height|0:Na.framebufferHeight-Jc;Cd=Na.viewportWidth;Na.viewportWidth=ac;xd=Na.viewportHeight;Na.viewportHeight=rc;J.viewport(Ta,Jc,ac,rc);ka[0]=Ta;ka[1]=Jc;ka[2]=ac;ka[3]=rc;(Bc=ca.call(this,
Na,p,u))?J.enable(2929):J.disable(2929);Y.depth_enable=Bc;Xb=p.viewport;Gc=Xb.x|0;Rc=Xb.y|0;La="width"in Xb?Xb.width|0:Na.framebufferWidth-Gc;vb="height"in Xb?Xb.height|0:Na.framebufferHeight-Rc;J.scissor(Gc,Rc,La,vb);C[0]=Gc;C[1]=Rc;C[2]=La;C[3]=vb;T.buffer=p.positionBuffer;Wa=!1;Aa=null;ld=0;gb=!1;Hb=Sa=0;cb=1;fc=0;Rb=5126;td=Sb=Zb=Ia=0;Wb(T)?(Wa=!0,Aa=na.createStream(34962,T),Rb=Aa.dtype):(Aa=na.getBuffer(T))?Rb=Aa.dtype:"constant"in T?(cb=2,"number"===typeof T.constant?(Zb=T.constant,Sb=td=Ia=
0):(Zb=0<T.constant.length?T.constant[0]:0,Sb=1<T.constant.length?T.constant[1]:0,td=2<T.constant.length?T.constant[2]:0,Ia=3<T.constant.length?T.constant[3]:0)):(Aa=Wb(T.buffer)?na.createStream(34962,T.buffer):na.getBuffer(T.buffer),Rb="type"in T?ua[T.type]:Aa.dtype,gb=!!T.normalized,Hb=T.size|0,Sa=T.offset|0,fc=T.stride|0,ld=T.divisor|0);Tb=R.location;Ma=ec[Tb];if(1===cb){Ma.buffer||J.enableVertexAttribArray(Tb);pb=Hb||2;if(Ma.type!==Rb||Ma.size!==pb||Ma.buffer!==Aa||Ma.normalized!==gb||Ma.offset!==
Sa||Ma.stride!==fc)J.bindBuffer(34962,Aa.buffer),J.vertexAttribPointer(Tb,pb,Rb,gb,fc,Sa),Ma.type=Rb,Ma.size=pb,Ma.buffer=Aa,Ma.normalized=gb,Ma.offset=Sa,Ma.stride=fc;Ma.divisor!==ld&&(t.vertexAttribDivisorANGLE(Tb,ld),Ma.divisor=ld)}else if(Ma.buffer&&(J.disableVertexAttribArray(Tb),Ma.buffer=null),Ma.x!==Zb||Ma.y!==Sb||Ma.z!==td||Ma.w!==Ia)J.vertexAttrib4f(Tb,Zb,Sb,td,Ia),Ma.x=Zb,Ma.y=Sb,Ma.z=td,Ma.w=Ia;qa.buffer=p.positionBuffer;wb=!1;hb=null;Pa=0;uc=!1;ad=Jb=0;db=1;lc=0;Yc=5126;va=lb=kb=dc=0;
Wb(qa)?(wb=!0,hb=na.createStream(34962,qa),Yc=hb.dtype):(hb=na.getBuffer(qa))?Yc=hb.dtype:"constant"in qa?(db=2,"number"===typeof qa.constant?(kb=qa.constant,lb=va=dc=0):(kb=0<qa.constant.length?qa.constant[0]:0,lb=1<qa.constant.length?qa.constant[1]:0,va=2<qa.constant.length?qa.constant[2]:0,dc=3<qa.constant.length?qa.constant[3]:0)):(hb=Wb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),Yc="type"in qa?ua[qa.type]:hb.dtype,uc=!!qa.normalized,ad=qa.size|0,Jb=qa.offset|0,lc=qa.stride|
0,Pa=qa.divisor|0);qb=g.location;wa=ec[qb];if(1===db){wa.buffer||J.enableVertexAttribArray(qb);Ua=ad||2;if(wa.type!==Yc||wa.size!==Ua||wa.buffer!==hb||wa.normalized!==uc||wa.offset!==Jb||wa.stride!==lc)J.bindBuffer(34962,hb.buffer),J.vertexAttribPointer(qb,Ua,Yc,uc,lc,Jb),wa.type=Yc,wa.size=Ua,wa.buffer=hb,wa.normalized=uc,wa.offset=Jb,wa.stride=lc;wa.divisor!==Pa&&(t.vertexAttribDivisorANGLE(qb,Pa),wa.divisor=Pa)}else if(wa.buffer&&(J.disableVertexAttribArray(qb),wa.buffer=null),wa.x!==kb||wa.y!==
lb||wa.z!==va||wa.w!==dc)J.vertexAttrib4f(qb,kb,lb,va,dc),wa.x=kb,wa.y=lb,wa.z=va,wa.w=dc;ha.buffer=p.positionFractBuffer;bb=!1;Ba=null;eb=0;Ja=!1;Bb=Cb=0;Ra=1;Kc=0;Kb=5126;ze=ya=Ub=Za=0;Wb(ha)?(bb=!0,Ba=na.createStream(34962,ha),Kb=Ba.dtype):(Ba=na.getBuffer(ha))?Kb=Ba.dtype:"constant"in ha?(Ra=2,"number"===typeof ha.constant?(Ub=ha.constant,ya=ze=Za=0):(Ub=0<ha.constant.length?ha.constant[0]:0,ya=1<ha.constant.length?ha.constant[1]:0,ze=2<ha.constant.length?ha.constant[2]:0,Za=3<ha.constant.length?
ha.constant[3]:0)):(Ba=Wb(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),Kb="type"in ha?ua[ha.type]:Ba.dtype,Ja=!!ha.normalized,Bb=ha.size|0,Cb=ha.offset|0,Kc=ha.stride|0,eb=ha.divisor|0);Ka=e.location;Ob=ec[Ka];if(1===Ra){Ob.buffer||J.enableVertexAttribArray(Ka);fb=Bb||2;if(Ob.type!==Kb||Ob.size!==fb||Ob.buffer!==Ba||Ob.normalized!==Ja||Ob.offset!==Cb||Ob.stride!==Kc)J.bindBuffer(34962,Ba.buffer),J.vertexAttribPointer(Ka,fb,Kb,Ja,Kc,Cb),Ob.type=Kb,Ob.size=fb,Ob.buffer=Ba,Ob.normalized=
Ja,Ob.offset=Cb,Ob.stride=Kc;Ob.divisor!==eb&&(t.vertexAttribDivisorANGLE(Ka,eb),Ob.divisor=eb)}else if(Ob.buffer&&(J.disableVertexAttribArray(Ka),Ob.buffer=null),Ob.x!==Ub||Ob.y!==ya||Ob.z!==ze||Ob.w!==Za)J.vertexAttrib4f(Ka,Ub,ya,ze,Za),Ob.x=Ub,Ob.y=ya,Ob.z=ze,Ob.w=Za;E.buffer=p.positionFractBuffer;ib=!1;za=null;gc=0;Ea=!1;sb=rb=0;Xa=1;Ya=0;mc=5126;Mb=Va=vc=xc=0;Wb(E)?(ib=!0,za=na.createStream(34962,E),mc=za.dtype):(za=na.getBuffer(E))?mc=za.dtype:"constant"in E?(Xa=2,"number"===typeof E.constant?
(vc=E.constant,Va=Mb=xc=0):(vc=0<E.constant.length?E.constant[0]:0,Va=1<E.constant.length?E.constant[1]:0,Mb=2<E.constant.length?E.constant[2]:0,xc=3<E.constant.length?E.constant[3]:0)):(za=Wb(E.buffer)?na.createStream(34962,E.buffer):na.getBuffer(E.buffer),mc="type"in E?ua[E.type]:za.dtype,Ea=!!E.normalized,sb=E.size|0,rb=E.offset|0,Ya=E.stride|0,gc=E.divisor|0);Zc=d.location;Ga=ec[Zc];if(1===Xa){Ga.buffer||J.enableVertexAttribArray(Zc);zc=sb||2;if(Ga.type!==mc||Ga.size!==zc||Ga.buffer!==za||Ga.normalized!==
Ea||Ga.offset!==rb||Ga.stride!==Ya)J.bindBuffer(34962,za.buffer),J.vertexAttribPointer(Zc,zc,mc,Ea,Ya,rb),Ga.type=mc,Ga.size=zc,Ga.buffer=za,Ga.normalized=Ea,Ga.offset=rb,Ga.stride=Ya;Ga.divisor!==gc&&(t.vertexAttribDivisorANGLE(Zc,gc),Ga.divisor=gc)}else if(Ga.buffer&&(J.disableVertexAttribArray(Zc),Ga.buffer=null),Ga.x!==vc||Ga.y!==Va||Ga.z!==Mb||Ga.w!==xc)J.vertexAttrib4f(Zc,vc,Va,Mb,xc),Ga.x=vc,Ga.y=Va,Ga.z=Mb,Ga.w=xc;m.buffer=p.colorBuffer;Qa=!1;Ca=null;mb=0;xb=!1;tb=Eb=0;wc=1;yb=0;Dd=5126;jd=
Mc=Jd=sc=0;Wb(m)?(Qa=!0,Ca=na.createStream(34962,m),Dd=Ca.dtype):(Ca=na.getBuffer(m))?Dd=Ca.dtype:"constant"in m?(wc=2,"number"===typeof m.constant?(Jd=m.constant,Mc=jd=sc=0):(Jd=0<m.constant.length?m.constant[0]:0,Mc=1<m.constant.length?m.constant[1]:0,jd=2<m.constant.length?m.constant[2]:0,sc=3<m.constant.length?m.constant[3]:0)):(Ca=Wb(m.buffer)?na.createStream(34962,m.buffer):na.getBuffer(m.buffer),Dd="type"in m?ua[m.type]:Ca.dtype,xb=!!m.normalized,tb=m.size|0,Eb=m.offset|0,yb=m.stride|0,mb=
m.divisor|0);cd=z.location;Vb=ec[cd];if(1===wc){Vb.buffer||J.enableVertexAttribArray(cd);bc=tb||4;if(Vb.type!==Dd||Vb.size!==bc||Vb.buffer!==Ca||Vb.normalized!==xb||Vb.offset!==Eb||Vb.stride!==yb)J.bindBuffer(34962,Ca.buffer),J.vertexAttribPointer(cd,bc,Dd,xb,yb,Eb),Vb.type=Dd,Vb.size=bc,Vb.buffer=Ca,Vb.normalized=xb,Vb.offset=Eb,Vb.stride=yb;Vb.divisor!==mb&&(t.vertexAttribDivisorANGLE(cd,mb),Vb.divisor=mb)}else if(Vb.buffer&&(J.disableVertexAttribArray(cd),Vb.buffer=null),Vb.x!==Jd||Vb.y!==Mc||
Vb.z!==jd||Vb.w!==sc)J.vertexAttrib4f(cd,Jd,Mc,jd,sc),Vb.x=Jd,Vb.y=Mc,Vb.z=jd,Vb.w=sc;Pb=p.scale;Ha=Pb[0];nb=Pb[1];u&&Yb===Ha&&zb===nb||(Yb=Ha,zb=nb,J.uniform2f(a.location,Ha,nb));Nb=p.scaleFract;Qb=Nb[0];jc=Nb[1];u&&hc===Qb&&Hf===jc||(hc=Qb,Hf=jc,J.uniform2f(h.location,Qb,jc));Cc=p.translate;Dc=Cc[0];Nc=Cc[1];u&&Ec===Dc&&$c===Nc||(Ec=Dc,$c=Nc,J.uniform2f(ra.location,Dc,Nc));Sc=p.translateFract;Oc=Sc[0];Gb=Sc[1];u&&Lb===Oc&&Pc===Gb||(Lb=Oc,Pc=Gb,J.uniform2f(xa.location,Oc,Gb));Hc=p.thickness;u&&Tc===
Hc||(Tc=Hc,J.uniform1f(X.location,Hc));ic=p.depth;u&&Wc===ic||(Wc=ic,J.uniform1f(q.location,ic));md=I.call(this,Na,p,u);kd=md[0];Xc=md[1];Ld=md[2];xe=md[3];u&&qd===kd&&Ib===Xc&&le===Ld&&Ud===xe||(qd=kd,Ib=Xc,le=Ld,Ud=xe,J.uniform4f(jb.location,kd,Xc,Ld,xe));Hd=p.dashLength;u&&Ed===Hd||(Ed=Hd,J.uniform1f(U.location,Hd));ed=p.opacity;u&&Fc===ed||(Fc=ed,J.uniform1f(fa.location,ed));(nd=p.dashTexture)&&"framebuffer"===nd._reglType&&(nd=nd.color[0]);gd=nd._texture;J.uniform1i(W.location,gd.bind());bd=
p.count;0<bd?Fb?t.drawElementsInstancedANGLE(5,4,Fb.type,0<<(Fb.type-5121>>1),bd):t.drawArraysInstancedANGLE(5,0,4,bd):0>bd&&(Fb?J.drawElements(5,4,Fb.type,0<<(Fb.type-5121>>1)):J.drawArrays(5,0,4));Na.viewportWidth=Cd;Na.viewportHeight=xd;Wa&&na.destroyStream(Aa);wb&&na.destroyStream(hb);bb&&na.destroyStream(Ba);ib&&na.destroyStream(za);Qa&&na.destroyStream(Ca);gd.unbind()}Y.dirty=!0;ma.setVAO(null);r&&(Z.cpuTime+=performance.now()-l)},draw:function(b){var k,n,u,l,t,w,p,v,V,B,H,F,A,G,Q,N,I,da,ea,
ca,pa,Wd,Ze,Oa,Ia,wd,Fe,Sd,Td,ne,Xd,rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,fb,ib,za,gc,Ea,rb;k=sa.next;k!==sa.cur&&(k?J.bindFramebuffer(36160,k.framebuffer):J.bindFramebuffer(36160,null),sa.cur=k);if(Y.dirty){var sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb;sb=$a.dither;
sb!==Y.dither&&(sb?J.enable(3024):J.disable(3024),Y.dither=sb);Xa=$a.depth_func;Xa!==Y.depth_func&&(J.depthFunc(Xa),Y.depth_func=Xa);Ya=ta[0];mc=ta[1];if(Ya!==cc[0]||mc!==cc[1])J.depthRange(Ya,mc),cc[0]=Ya,cc[1]=mc;xc=$a.depth_mask;xc!==Y.depth_mask&&(J.depthMask(xc),Y.depth_mask=xc);vc=ob[0];Va=ob[1];Mb=ob[2];Zc=ob[3];if(vc!==ga[0]||Va!==ga[1]||Mb!==ga[2]||Zc!==ga[3])J.colorMask(vc,Va,Mb,Zc),ga[0]=vc,ga[1]=Va,ga[2]=Mb,ga[3]=Zc;Ga=$a.cull_enable;Ga!==Y.cull_enable&&(Ga?J.enable(2884):J.disable(2884),
Y.cull_enable=Ga);zc=$a.cull_face;zc!==Y.cull_face&&(J.cullFace(zc),Y.cull_face=zc);Qa=$a.frontFace;Qa!==Y.frontFace&&(J.frontFace(Qa),Y.frontFace=Qa);Ca=$a.lineWidth;Ca!==Y.lineWidth&&(J.lineWidth(Ca),Y.lineWidth=Ca);mb=$a.polygonOffset_enable;mb!==Y.polygonOffset_enable&&(mb?J.enable(32823):J.disable(32823),Y.polygonOffset_enable=mb);xb=nc[0];Eb=nc[1];if(xb!==kc[0]||Eb!==kc[1])J.polygonOffset(xb,Eb),kc[0]=xb,kc[1]=Eb;tb=$a.sample_alpha;tb!==Y.sample_alpha&&(tb?J.enable(32926):J.disable(32926),Y.sample_alpha=
tb);wc=$a.sample_enable;wc!==Y.sample_enable&&(wc?J.enable(32928):J.disable(32928),Y.sample_enable=wc);yb=ud[0];Dd=ud[1];if(yb!==yc[0]||Dd!==yc[1])J.sampleCoverage(yb,Dd),yc[0]=yb,yc[1]=Dd;sc=$a.stencil_mask;sc!==Y.stencil_mask&&(J.stencilMask(sc),Y.stencil_mask=sc);Jd=la[0];Mc=la[1];jd=la[2];if(Jd!==Da[0]||Mc!==Da[1]||jd!==Da[2])J.stencilFunc(Jd,Mc,jd),Da[0]=Jd,Da[1]=Mc,Da[2]=jd;cd=Uc[0];Vb=Uc[1];bc=Uc[2];Pb=Uc[3];if(cd!==D[0]||Vb!==D[1]||bc!==D[2]||Pb!==D[3])J.stencilOpSeparate(cd,Vb,bc,Pb),D[0]=
cd,D[1]=Vb,D[2]=bc,D[3]=Pb;Ha=ub[0];Yb=ub[1];nb=ub[2];zb=ub[3];if(Ha!==Qc[0]||Yb!==Qc[1]||nb!==Qc[2]||zb!==Qc[3])J.stencilOpSeparate(Ha,Yb,nb,zb),Qc[0]=Ha,Qc[1]=Yb,Qc[2]=nb,Qc[3]=zb}n=b.viewport;u=n.x|0;l=n.y|0;t="width"in n?n.width|0:Na.framebufferWidth-u;w="height"in n?n.height|0:Na.framebufferHeight-l;p=Na.viewportWidth;Na.viewportWidth=t;v=Na.viewportHeight;Na.viewportHeight=w;J.viewport(u,l,t,w);ka[0]=u;ka[1]=l;ka[2]=t;ka[3]=w;J.blendColor(0,0,0,0);Fa[0]=0;Fa[1]=0;Fa[2]=0;Fa[3]=0;J.enable(3042);
Y.blend_enable=!0;J.blendEquationSeparate(32774,32774);$b[0]=32774;$b[1]=32774;J.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;(V=r.call(this,Na,b,0))?J.enable(2929):J.disable(2929);Y.depth_enable=V;B=b.viewport;H=B.x|0;F=B.y|0;A="width"in B?B.width|0:Na.framebufferWidth-H;G="height"in B?B.height|0:Na.framebufferHeight-F;J.scissor(H,F,A,G);C[0]=H;C[1]=F;C[2]=A;C[3]=G;J.enable(3089);Y.scissor_enable=!0;J.disable(2960);Y.stencil_enable=!1;if(Q=Y.profile)N=performance.now(),Z.count++;
J.useProgram(O.program);I=P.angle_instanced_arrays;ma.setVAO(null);T.buffer=b.positionBuffer;da=!1;ea=null;ca=0;pa=!1;Ze=Wd=0;Oa=1;Ia=0;wd=5126;ne=Td=Sd=Fe=0;Wb(T)?(da=!0,ea=na.createStream(34962,T),wd=ea.dtype):(ea=na.getBuffer(T))?wd=ea.dtype:"constant"in T?(Oa=2,"number"===typeof T.constant?(Sd=T.constant,Td=ne=Fe=0):(Sd=0<T.constant.length?T.constant[0]:0,Td=1<T.constant.length?T.constant[1]:0,ne=2<T.constant.length?T.constant[2]:0,Fe=3<T.constant.length?T.constant[3]:0)):(ea=Wb(T.buffer)?na.createStream(34962,
T.buffer):na.getBuffer(T.buffer),wd="type"in T?ua[T.type]:ea.dtype,pa=!!T.normalized,Ze=T.size|0,Wd=T.offset|0,Ia=T.stride|0,ca=T.divisor|0);Xd=R.location;rd=ec[Xd];if(1===Oa){rd.buffer||J.enableVertexAttribArray(Xd);id=Ze||2;if(rd.type!==wd||rd.size!==id||rd.buffer!==ea||rd.normalized!==pa||rd.offset!==Wd||rd.stride!==Ia)J.bindBuffer(34962,ea.buffer),J.vertexAttribPointer(Xd,id,wd,pa,Ia,Wd),rd.type=wd,rd.size=id,rd.buffer=ea,rd.normalized=pa,rd.offset=Wd,rd.stride=Ia;rd.divisor!==ca&&(I.vertexAttribDivisorANGLE(Xd,
ca),rd.divisor=ca)}else if(rd.buffer&&(J.disableVertexAttribArray(Xd),rd.buffer=null),rd.x!==Sd||rd.y!==Td||rd.z!==ne||rd.w!==Fe)J.vertexAttrib4f(Xd,Sd,Td,ne,Fe),rd.x=Sd,rd.y=Td,rd.z=ne,rd.w=Fe;qa.buffer=b.positionBuffer;vd=!1;pd=null;dd=0;oc=!1;fd=sd=0;Lc=1;qc=0;ab=5126;Ta=pc=Fb=Ic=0;Wb(qa)?(vd=!0,pd=na.createStream(34962,qa),ab=pd.dtype):(pd=na.getBuffer(qa))?ab=pd.dtype:"constant"in qa?(Lc=2,"number"===typeof qa.constant?(Fb=qa.constant,pc=Ta=Ic=0):(Fb=0<qa.constant.length?qa.constant[0]:0,pc=
1<qa.constant.length?qa.constant[1]:0,Ta=2<qa.constant.length?qa.constant[2]:0,Ic=3<qa.constant.length?qa.constant[3]:0)):(pd=Wb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),ab="type"in qa?ua[qa.type]:pd.dtype,oc=!!qa.normalized,fd=qa.size|0,sd=qa.offset|0,qc=qa.stride|0,dd=qa.divisor|0);Jc=g.location;ac=ec[Jc];if(1===Lc){ac.buffer||J.enableVertexAttribArray(Jc);rc=fd||2;if(ac.type!==ab||ac.size!==rc||ac.buffer!==pd||ac.normalized!==oc||ac.offset!==sd||ac.stride!==qc)J.bindBuffer(34962,
pd.buffer),J.vertexAttribPointer(Jc,rc,ab,oc,qc,sd),ac.type=ab,ac.size=rc,ac.buffer=pd,ac.normalized=oc,ac.offset=sd,ac.stride=qc;ac.divisor!==dd&&(I.vertexAttribDivisorANGLE(Jc,dd),ac.divisor=dd)}else if(ac.buffer&&(J.disableVertexAttribArray(Jc),ac.buffer=null),ac.x!==Fb||ac.y!==pc||ac.z!==Ta||ac.w!==Ic)J.vertexAttrib4f(Jc,Fb,pc,Ta,Ic),ac.x=Fb,ac.y=pc,ac.z=Ta,ac.w=Ic;ha.buffer=b.positionFractBuffer;Cd=!1;xd=null;Bc=0;Xb=!1;Rc=Gc=0;La=1;vb=0;Wa=5126;Sa=gb=ld=Aa=0;Wb(ha)?(Cd=!0,xd=na.createStream(34962,
ha),Wa=xd.dtype):(xd=na.getBuffer(ha))?Wa=xd.dtype:"constant"in ha?(La=2,"number"===typeof ha.constant?(ld=ha.constant,gb=Sa=Aa=0):(ld=0<ha.constant.length?ha.constant[0]:0,gb=1<ha.constant.length?ha.constant[1]:0,Sa=2<ha.constant.length?ha.constant[2]:0,Aa=3<ha.constant.length?ha.constant[3]:0)):(xd=Wb(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),Wa="type"in ha?ua[ha.type]:xd.dtype,Xb=!!ha.normalized,Rc=ha.size|0,Gc=ha.offset|0,vb=ha.stride|0,Bc=ha.divisor|0);Hb=e.location;
cb=ec[Hb];if(1===La){cb.buffer||J.enableVertexAttribArray(Hb);fc=Rc||2;if(cb.type!==Wa||cb.size!==fc||cb.buffer!==xd||cb.normalized!==Xb||cb.offset!==Gc||cb.stride!==vb)J.bindBuffer(34962,xd.buffer),J.vertexAttribPointer(Hb,fc,Wa,Xb,vb,Gc),cb.type=Wa,cb.size=fc,cb.buffer=xd,cb.normalized=Xb,cb.offset=Gc,cb.stride=vb;cb.divisor!==Bc&&(I.vertexAttribDivisorANGLE(Hb,Bc),cb.divisor=Bc)}else if(cb.buffer&&(J.disableVertexAttribArray(Hb),cb.buffer=null),cb.x!==ld||cb.y!==gb||cb.z!==Sa||cb.w!==Aa)J.vertexAttrib4f(Hb,
ld,gb,Sa,Aa),cb.x=ld,cb.y=gb,cb.z=Sa,cb.w=Aa;E.buffer=b.positionFractBuffer;Rb=!1;ke=null;Zb=0;Sb=!1;Tb=td=0;Ma=1;pb=0;wb=5126;Jb=uc=Pa=hb=0;Wb(E)?(Rb=!0,ke=na.createStream(34962,E),wb=ke.dtype):(ke=na.getBuffer(E))?wb=ke.dtype:"constant"in E?(Ma=2,"number"===typeof E.constant?(Pa=E.constant,uc=Jb=hb=0):(Pa=0<E.constant.length?E.constant[0]:0,uc=1<E.constant.length?E.constant[1]:0,Jb=2<E.constant.length?E.constant[2]:0,hb=3<E.constant.length?E.constant[3]:0)):(ke=Wb(E.buffer)?na.createStream(34962,
E.buffer):na.getBuffer(E.buffer),wb="type"in E?ua[E.type]:ke.dtype,Sb=!!E.normalized,Tb=E.size|0,td=E.offset|0,pb=E.stride|0,Zb=E.divisor|0);ad=d.location;db=ec[ad];if(1===Ma){db.buffer||J.enableVertexAttribArray(ad);lc=Tb||2;if(db.type!==wb||db.size!==lc||db.buffer!==ke||db.normalized!==Sb||db.offset!==td||db.stride!==pb)J.bindBuffer(34962,ke.buffer),J.vertexAttribPointer(ad,lc,wb,Sb,pb,td),db.type=wb,db.size=lc,db.buffer=ke,db.normalized=Sb,db.offset=td,db.stride=pb;db.divisor!==Zb&&(I.vertexAttribDivisorANGLE(ad,
Zb),db.divisor=Zb)}else if(db.buffer&&(J.disableVertexAttribArray(ad),db.buffer=null),db.x!==Pa||db.y!==uc||db.z!==Jb||db.w!==hb)J.vertexAttrib4f(ad,Pa,uc,Jb,hb),db.x=Pa,db.y=uc,db.z=Jb,db.w=hb;m.buffer=b.colorBuffer;Yc=!1;dc=null;kb=0;lb=!1;qb=va=0;wa=1;Ua=0;bb=5126;Cb=Ja=eb=Ba=0;Wb(m)?(Yc=!0,dc=na.createStream(34962,m),bb=dc.dtype):(dc=na.getBuffer(m))?bb=dc.dtype:"constant"in m?(wa=2,"number"===typeof m.constant?(eb=m.constant,Ja=Cb=Ba=0):(eb=0<m.constant.length?m.constant[0]:0,Ja=1<m.constant.length?
m.constant[1]:0,Cb=2<m.constant.length?m.constant[2]:0,Ba=3<m.constant.length?m.constant[3]:0)):(dc=Wb(m.buffer)?na.createStream(34962,m.buffer):na.getBuffer(m.buffer),bb="type"in m?ua[m.type]:dc.dtype,lb=!!m.normalized,qb=m.size|0,va=m.offset|0,Ua=m.stride|0,kb=m.divisor|0);Bb=z.location;Ra=ec[Bb];if(1===wa){Ra.buffer||J.enableVertexAttribArray(Bb);Kc=qb||4;if(Ra.type!==bb||Ra.size!==Kc||Ra.buffer!==dc||Ra.normalized!==lb||Ra.offset!==va||Ra.stride!==Ua)J.bindBuffer(34962,dc.buffer),J.vertexAttribPointer(Bb,
Kc,bb,lb,Ua,va),Ra.type=bb,Ra.size=Kc,Ra.buffer=dc,Ra.normalized=lb,Ra.offset=va,Ra.stride=Ua;Ra.divisor!==kb&&(I.vertexAttribDivisorANGLE(Bb,kb),Ra.divisor=kb)}else if(Ra.buffer&&(J.disableVertexAttribArray(Bb),Ra.buffer=null),Ra.x!==eb||Ra.y!==Ja||Ra.z!==Cb||Ra.w!==Ba)J.vertexAttrib4f(Bb,eb,Ja,Cb,Ba),Ra.x=eb,Ra.y=Ja,Ra.z=Cb,Ra.w=Ba;Kb=oa.location;Za=ec[Kb];Za.buffer||J.enableVertexAttribArray(Kb);if(5126!==Za.type||1!==Za.size||Za.buffer!==f||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)J.bindBuffer(34962,
f.buffer),J.vertexAttribPointer(Kb,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=f,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(I.vertexAttribDivisorANGLE(Kb,0),Za.divisor=0);Ub=L.location;ya=ec[Ub];ya.buffer||J.enableVertexAttribArray(Ub);if(5126!==ya.type||1!==ya.size||ya.buffer!==c||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)J.bindBuffer(34962,c.buffer),J.vertexAttribPointer(Ub,1,5126,!1,8,4),ya.type=5126,ya.size=1,ya.buffer=c,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&
(I.vertexAttribDivisorANGLE(Ub,0),ya.divisor=0);ze=b.scale;J.uniform2f(a.location,ze[0],ze[1]);Ka=b.scaleFract;J.uniform2f(h.location,Ka[0],Ka[1]);Ob=b.translate;J.uniform2f(ra.location,Ob[0],Ob[1]);fb=b.translateFract;J.uniform2f(xa.location,fb[0],fb[1]);J.uniform1f(X.location,b.thickness);J.uniform1f(q.location,b.depth);ib=y.call(this,Na,b,0);J.uniform4f(jb.location,ib[0],ib[1],ib[2],ib[3]);J.uniform1f(U.location,b.dashLength);J.uniform1f(fa.location,b.opacity);(za=b.dashTexture)&&"framebuffer"===
za._reglType&&(za=za.color[0]);gc=za._texture;J.uniform1i(W.location,gc.bind());(Ea=K.elements)?J.bindBuffer(34963,Ea.buffer.buffer):ma.currentVAO&&(Ea=M.getElements(ma.currentVAO.elements))&&J.bindBuffer(34963,Ea.buffer.buffer);rb=b.count;0<rb?Ea?I.drawElementsInstancedANGLE(5,4,Ea.type,0<<(Ea.type-5121>>1),rb):I.drawArraysInstancedANGLE(5,0,4,rb):0>rb&&(Ea?J.drawElements(5,4,Ea.type,0<<(Ea.type-5121>>1)):J.drawArrays(5,0,4));Y.dirty=!0;ma.setVAO(null);Na.viewportWidth=p;Na.viewportHeight=v;Q&&(Z.cpuTime+=
performance.now()-N);da&&na.destroyStream(ea);vd&&na.destroyStream(pd);Cd&&na.destroyStream(xd);Rb&&na.destroyStream(ke);Yc&&na.destroyStream(dc);gc.unbind()},scope:function(a,d,e){var g,h,k,q,p,r,C,z,y,D,O,M,H,L,J,I,P,S,la,U,W,ka,ca,X,ga,ma,nc,Da,fa,R,oa,ta,sa,ud,ra,yc,fd,Lc,qc,ab,ub,Fb,pc,Ta,Jc,ac,rc,Qc,cc,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,Fa,gb,Sa,Hb,cb,fc,Rb,kc,Zb,Sb,xa,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ob,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,jb,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,
vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Uc,sc,$b,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,ec,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,be,Ld,le,Ib,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ye,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me;g=a.viewport;h=g.x|0;k=g.y|0;q="width"in g?g.width|0:Na.framebufferWidth-h;p="height"in g?g.height|0:Na.framebufferHeight-k;r=Na.viewportWidth;Na.viewportWidth=q;C=Na.viewportHeight;
Na.viewportHeight=p;z=u[0];u[0]=h;y=u[1];u[1]=k;D=u[2];u[2]=q;O=u[3];u[3]=p;M=da[0];da[0]=0;H=da[1];da[1]=0;L=da[2];da[2]=0;J=da[3];da[3]=0;I=$a.blend_enable;$a.blend_enable=!0;P=Oa[0];Oa[0]=32774;S=Oa[1];Oa[1]=32774;la=Ia[0];Ia[0]=770;U=Ia[1];Ia[1]=771;W=Ia[2];Ia[2]=773;ka=Ia[3];Ia[3]=1;ca=b.call(this,Na,a,e);X=$a.depth_enable;$a.depth_enable=ca;ga=a.viewport;ma=ga.x|0;nc=ga.y|0;Da="width"in ga?ga.width|0:Na.framebufferWidth-ma;fa="height"in ga?ga.height|0:Na.framebufferHeight-nc;R=V[0];V[0]=ma;
oa=V[1];V[1]=nc;ta=V[2];V[2]=Da;sa=V[3];V[3]=fa;ud=$a.scissor_enable;$a.scissor_enable=!0;ra=$a.stencil_enable;$a.stencil_enable=!1;if(yc=Y.profile)fd=performance.now(),Z.count++;Lc=K.offset;K.offset=0;qc=K.count;K.count=4;ab=a.count;ub=K.instances;K.instances=ab;Fb=K.primitive;K.primitive=5;pc=a.dashLength;Ta=t[23];t[23]=pc;Jc=a.dashTexture;ac=t[24];t[24]=Jc;rc=a.depth;Qc=t[22];t[22]=rc;cc=a.id;Bc=t[31];t[31]=cc;Xb=a.miterLimit;Gc=t[32];t[32]=Xb;Rc=v.call(this,Na,a,e);La=t[33];t[33]=Rc;vb=a.opacity;
Wa=t[10];t[10]=vb;Aa=Na.pixelRatio;Fa=t[34];t[34]=Aa;gb=a.scale;Sa=t[6];t[6]=gb;Hb=a.scaleFract;cb=t[7];t[7]=Hb;fc=a.thickness;Rb=t[21];t[21]=fc;kc=a.translate;Zb=t[8];t[8]=kc;Sb=a.translateFract;xa=t[9];t[9]=Sb;Tb=A.call(this,Na,a,e);Ma=t[3];t[3]=Tb;T.buffer=a.positionBuffer;pb=!1;wb=null;hb=0;Pa=!1;Jb=uc=0;ob=1;db=0;lc=5126;lb=kb=dc=Yc=0;Wb(T)?(pb=!0,wb=na.createStream(34962,T),lc=wb.dtype):(wb=na.getBuffer(T))?lc=wb.dtype:"constant"in T?(ob=2,"number"===typeof T.constant?(dc=T.constant,kb=lb=Yc=
0):(dc=0<T.constant.length?T.constant[0]:0,kb=1<T.constant.length?T.constant[1]:0,lb=2<T.constant.length?T.constant[2]:0,Yc=3<T.constant.length?T.constant[3]:0)):(wb=Wb(T.buffer)?na.createStream(34962,T.buffer):na.getBuffer(T.buffer),lc="type"in T?ua[T.type]:wb.dtype,Pa=!!T.normalized,Jb=T.size|0,uc=T.offset|0,db=T.stride|0,hb=T.divisor|0);va=ea.buffer;ea.buffer=wb;qb=ea.divisor;ea.divisor=hb;wa=ea.normalized;ea.normalized=Pa;Ua=ea.offset;ea.offset=uc;bb=ea.size;ea.size=Jb;Ba=ea.state;ea.state=ob;
eb=ea.stride;ea.stride=db;Ja=ea.type;ea.type=lc;Cb=ea.w;ea.w=Yc;Bb=ea.x;ea.x=dc;Ra=ea.y;ea.y=kb;Kc=ea.z;ea.z=lb;ha.buffer=a.positionFractBuffer;Kb=!1;Za=null;Ub=0;ya=!1;Ka=jb=0;Ob=1;fb=0;ib=5126;rb=Ea=gc=za=0;Wb(ha)?(Kb=!0,Za=na.createStream(34962,ha),ib=Za.dtype):(Za=na.getBuffer(ha))?ib=Za.dtype:"constant"in ha?(Ob=2,"number"===typeof ha.constant?(gc=ha.constant,Ea=rb=za=0):(gc=0<ha.constant.length?ha.constant[0]:0,Ea=1<ha.constant.length?ha.constant[1]:0,rb=2<ha.constant.length?ha.constant[2]:
0,za=3<ha.constant.length?ha.constant[3]:0)):(Za=Wb(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),ib="type"in ha?ua[ha.type]:Za.dtype,ya=!!ha.normalized,Ka=ha.size|0,jb=ha.offset|0,fb=ha.stride|0,Ub=ha.divisor|0);sb=G.buffer;G.buffer=Za;Xa=G.divisor;G.divisor=Ub;Ya=G.normalized;G.normalized=ya;mc=G.offset;G.offset=jb;xc=G.size;G.size=Ka;vc=G.state;G.state=Ob;Va=G.stride;G.stride=fb;Mb=G.type;G.type=ib;Zc=G.w;G.w=za;Ga=G.x;G.x=gc;zc=G.y;G.y=Ea;Qa=G.z;G.z=rb;qa.buffer=a.positionBuffer;
Ca=!1;mb=null;xb=0;Eb=!1;wc=tb=0;yb=1;Uc=0;sc=5126;cd=jd=Mc=$b=0;Wb(qa)?(Ca=!0,mb=na.createStream(34962,qa),sc=mb.dtype):(mb=na.getBuffer(qa))?sc=mb.dtype:"constant"in qa?(yb=2,"number"===typeof qa.constant?(Mc=qa.constant,jd=cd=$b=0):(Mc=0<qa.constant.length?qa.constant[0]:0,jd=1<qa.constant.length?qa.constant[1]:0,cd=2<qa.constant.length?qa.constant[2]:0,$b=3<qa.constant.length?qa.constant[3]:0)):(mb=Wb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),sc="type"in qa?ua[qa.type]:
mb.dtype,Eb=!!qa.normalized,wc=qa.size|0,tb=qa.offset|0,Uc=qa.stride|0,xb=qa.divisor|0);Vb=F.buffer;F.buffer=mb;bc=F.divisor;F.divisor=xb;Pb=F.normalized;F.normalized=Eb;Ha=F.offset;F.offset=tb;Yb=F.size;F.size=wc;nb=F.state;F.state=yb;zb=F.stride;F.stride=Uc;Nb=F.type;F.type=sc;Qb=F.w;F.w=$b;hc=F.x;F.x=Mc;jc=F.y;F.y=jd;ec=F.z;F.z=cd;E.buffer=a.positionFractBuffer;Cc=!1;Dc=null;Ec=0;Nc=!1;Sc=$c=0;Oc=1;Lb=0;Gb=5126;ic=Tc=Hc=Pc=0;Wb(E)?(Cc=!0,Dc=na.createStream(34962,E),Gb=Dc.dtype):(Dc=na.getBuffer(E))?
Gb=Dc.dtype:"constant"in E?(Oc=2,"number"===typeof E.constant?(Hc=E.constant,Tc=ic=Pc=0):(Hc=0<E.constant.length?E.constant[0]:0,Tc=1<E.constant.length?E.constant[1]:0,ic=2<E.constant.length?E.constant[2]:0,Pc=3<E.constant.length?E.constant[3]:0)):(Dc=Wb(E.buffer)?na.createStream(34962,E.buffer):na.getBuffer(E.buffer),Gb="type"in E?ua[E.type]:Dc.dtype,Nc=!!E.normalized,Sc=E.size|0,$c=E.offset|0,Lb=E.stride|0,Ec=E.divisor|0);Wc=w.buffer;w.buffer=Dc;md=w.divisor;w.divisor=Ec;kd=w.normalized;w.normalized=
Nc;qd=w.offset;w.offset=$c;Xc=w.size;w.size=Sc;be=w.state;w.state=Oc;Ld=w.stride;w.stride=Lb;le=w.type;w.type=Gb;Ib=w.w;w.w=Pc;Ud=w.x;w.x=Hc;Hd=w.y;w.y=Tc;Ed=w.z;w.z=ic;m.buffer=a.colorBuffer;ed=!1;Fc=null;nd=0;gd=!1;hd=bd=0;zd=1;Ad=0;te=5126;fe=ge=Ce=ve=0;Wb(m)?(ed=!0,Fc=na.createStream(34962,m),te=Fc.dtype):(Fc=na.getBuffer(m))?te=Fc.dtype:"constant"in m?(zd=2,"number"===typeof m.constant?(Ce=m.constant,ge=fe=ve=0):(Ce=0<m.constant.length?m.constant[0]:0,ge=1<m.constant.length?m.constant[1]:0,fe=
2<m.constant.length?m.constant[2]:0,ve=3<m.constant.length?m.constant[3]:0)):(Fc=Wb(m.buffer)?na.createStream(34962,m.buffer):na.getBuffer(m.buffer),te="type"in m?ua[m.type]:Fc.dtype,gd=!!m.normalized,hd=m.size|0,bd=m.offset|0,Ad=m.stride|0,nd=m.divisor|0);ce=B.buffer;B.buffer=Fc;pe=B.divisor;B.divisor=nd;$d=B.normalized;B.normalized=gd;ie=B.offset;B.offset=bd;Ac=B.size;B.size=hd;Vc=B.state;B.state=zd;qe=B.stride;B.stride=Ad;me=B.type;B.type=te;Fd=B.w;B.w=ve;Md=B.x;B.x=Ce;Nd=B.y;B.y=ge;Od=B.z;B.z=
fe;je=N.buffer;N.buffer=f;Ye=N.divisor;N.divisor=0;ye=N.normalized;N.normalized=!1;oe=N.offset;N.offset=0;Oe=N.size;N.size=0;Pe=N.state;N.state=1;Le=N.stride;N.stride=8;re=N.type;N.type=5126;De=N.w;N.w=0;Ge=N.x;N.x=0;He=N.y;N.y=0;Ie=N.z;N.z=0;Ee=n.buffer;n.buffer=c;Id=n.divisor;n.divisor=0;Rd=n.normalized;n.normalized=!1;Yd=n.offset;n.offset=4;ae=n.size;n.size=0;Je=n.state;n.state=1;yd=n.stride;n.stride=8;Pd=n.type;n.type=5126;Ae=n.w;n.w=0;Ke=n.x;n.x=0;ff=n.y;n.y=0;Xe=n.z;n.z=0;Qe=Q.vert;Q.vert=20;
Me=Q.frag;Q.frag=19;Y.dirty=!0;d(Na,a,e);Na.viewportWidth=r;Na.viewportHeight=C;u[0]=z;u[1]=y;u[2]=D;u[3]=O;da[0]=M;da[1]=H;da[2]=L;da[3]=J;$a.blend_enable=I;Oa[0]=P;Oa[1]=S;Ia[0]=la;Ia[1]=U;Ia[2]=W;Ia[3]=ka;$a.depth_enable=X;V[0]=R;V[1]=oa;V[2]=ta;V[3]=sa;$a.scissor_enable=ud;$a.stencil_enable=ra;yc&&(Z.cpuTime+=performance.now()-fd);K.offset=Lc;K.count=qc;K.instances=ub;K.primitive=Fb;t[23]=Ta;t[24]=ac;t[22]=Qc;t[31]=Bc;t[32]=Gc;t[33]=La;t[10]=Wa;t[34]=Fa;t[6]=Sa;t[7]=cb;t[21]=Rb;t[8]=Zb;t[9]=xa;
t[3]=Ma;pb&&na.destroyStream(wb);ea.buffer=va;ea.divisor=qb;ea.normalized=wa;ea.offset=Ua;ea.size=bb;ea.state=Ba;ea.stride=eb;ea.type=Ja;ea.w=Cb;ea.x=Bb;ea.y=Ra;ea.z=Kc;Kb&&na.destroyStream(Za);G.buffer=sb;G.divisor=Xa;G.normalized=Ya;G.offset=mc;G.size=xc;G.state=vc;G.stride=Va;G.type=Mb;G.w=Zc;G.x=Ga;G.y=zc;G.z=Qa;Ca&&na.destroyStream(mb);F.buffer=Vb;F.divisor=bc;F.normalized=Pb;F.offset=Ha;F.size=Yb;F.state=nb;F.stride=zb;F.type=Nb;F.w=Qb;F.x=hc;F.y=jc;F.z=ec;Cc&&na.destroyStream(Dc);w.buffer=
Wc;w.divisor=md;w.normalized=kd;w.offset=qd;w.size=Xc;w.state=be;w.stride=Ld;w.type=le;w.w=Ib;w.x=Ud;w.y=Hd;w.z=Ed;ed&&na.destroyStream(Fc);B.buffer=ce;B.divisor=pe;B.normalized=$d;B.offset=ie;B.size=Ac;B.state=Vc;B.stride=qe;B.type=me;B.w=Fd;B.x=Md;B.y=Nd;B.z=Od;N.buffer=je;N.divisor=Ye;N.normalized=ye;N.offset=oe;N.size=Oe;N.state=Pe;N.stride=Le;N.type=re;N.w=De;N.x=Ge;N.y=He;N.z=Ie;n.buffer=Ee;n.divisor=Id;n.normalized=Rd;n.offset=Yd;n.size=ae;n.state=Je;n.stride=yd;n.type=Pd;n.w=Ae;n.x=Ke;n.y=
ff;n.z=Xe;Q.vert=Qe;Q.frag=Me;Y.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(k,Z,r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca,I,R,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb,ec,na,Na,Y){var K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta,cc,nc,kc,ud,yc,V,C,la,Da,ub,Qc,Uc,D,u,ka,ua,T,ha,qa,E,m,ba,x,ja,ia,l;K=k.attributes;M=k.buffer;P=k.context;sa=k.current;J=k.draw;Wb=k.elements;
$a=k.extensions;Q=k.framebuffer;t=k.gl;ma=k.isBufferArgs;da=k.next;Fa=k.shader;Oa=k.uniforms;$b=k.vao;Ia=da.blend_color;S=sa.blend_color;ob=da.blend_equation;ga=sa.blend_equation;ta=da.blend_func;cc=sa.blend_func;nc=da.colorMask;kc=sa.colorMask;ud=da.depth_range;yc=sa.depth_range;V=da.polygonOffset_offset;C=sa.polygonOffset_offset;la=da.sample_coverage;Da=sa.sample_coverage;ub=da.scissor_box;Qc=sa.scissor_box;Uc=da.stencil_func;D=sa.stencil_func;u=da.stencil_opBack;ka=sa.stencil_opBack;ua=da.stencil_opFront;
T=sa.stencil_opFront;ha=da.viewport;qa=sa.viewport;E={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};m={divisor:1,offset:0,stride:4};ba={divisor:1,offset:8,stride:8};x={divisor:1,offset:4,stride:4};ja={divisor:1,offset:16,stride:8};ia={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(b,k){var p,n,r,w,v,y;p=Q.next;p!==Q.cur&&(p?t.bindFramebuffer(36160,p.framebuffer):t.bindFramebuffer(36160,null),Q.cur=p);if(sa.dirty){var B,
O,H,F,A,G,N,ha,ea,ca,ta,pa,ub,Fa,Oa,Sd,Td,Ia,ob,rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab;B=da.dither;B!==sa.dither&&(B?t.enable(3024):t.disable(3024),sa.dither=B);O=da.depth_func;O!==sa.depth_func&&(t.depthFunc(O),sa.depth_func=O);H=ud[0];F=ud[1];if(H!==yc[0]||F!==yc[1])t.depthRange(H,F),yc[0]=H,yc[1]=F;A=da.depth_mask;A!==sa.depth_mask&&(t.depthMask(A),sa.depth_mask=A);G=nc[0];N=nc[1];ha=nc[2];ea=nc[3];if(G!==kc[0]||N!==kc[1]||ha!==kc[2]||ea!==kc[3])t.colorMask(G,N,ha,ea),kc[0]=G,kc[1]=N,kc[2]=ha,kc[3]=
ea;ca=da.frontFace;ca!==sa.frontFace&&(t.frontFace(ca),sa.frontFace=ca);ta=da.lineWidth;ta!==sa.lineWidth&&(t.lineWidth(ta),sa.lineWidth=ta);pa=da.polygonOffset_enable;pa!==sa.polygonOffset_enable&&(pa?t.enable(32823):t.disable(32823),sa.polygonOffset_enable=pa);ub=V[0];Fa=V[1];if(ub!==C[0]||Fa!==C[1])t.polygonOffset(ub,Fa),C[0]=ub,C[1]=Fa;Oa=da.sample_alpha;Oa!==sa.sample_alpha&&(Oa?t.enable(32926):t.disable(32926),sa.sample_alpha=Oa);Sd=da.sample_enable;Sd!==sa.sample_enable&&(Sd?t.enable(32928):
t.disable(32928),sa.sample_enable=Sd);Td=la[0];Ia=la[1];if(Td!==Da[0]||Ia!==Da[1])t.sampleCoverage(Td,Ia),Da[0]=Td,Da[1]=Ia;ob=da.stencil_mask;ob!==sa.stencil_mask&&(t.stencilMask(ob),sa.stencil_mask=ob);rd=Uc[0];id=Uc[1];vd=Uc[2];if(rd!==D[0]||id!==D[1]||vd!==D[2])t.stencilFunc(rd,id,vd),D[0]=rd,D[1]=id,D[2]=vd;pd=ua[0];dd=ua[1];oc=ua[2];sd=ua[3];if(pd!==T[0]||dd!==T[1]||oc!==T[2]||sd!==T[3])t.stencilOpSeparate(pd,dd,oc,sd),T[0]=pd,T[1]=dd,T[2]=oc,T[3]=sd;fd=u[0];Lc=u[1];qc=u[2];ab=u[3];if(fd!==
ka[0]||Lc!==ka[1]||qc!==ka[2]||ab!==ka[3])t.stencilOpSeparate(fd,Lc,qc,ab),ka[0]=fd,ka[1]=Lc,ka[2]=qc,ka[3]=ab}t.blendColor(0,0,0,0);S[0]=0;S[1]=0;S[2]=0;S[3]=0;t.enable(3042);sa.blend_enable=!0;t.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;t.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;cc[3]=1;t.enable(2884);sa.cull_enable=!0;t.cullFace(1029);sa.cull_face=1029;t.enable(3089);sa.scissor_enable=!0;t.disable(2960);sa.stencil_enable=!1;if(n=sa.profile)r=performance.now(),
Z.count+=k;t.useProgram(I.program);w=$a.angle_instanced_arrays;var Ic,Fb,pc,Ta,Jc;$b.setVAO(null);Ic=fa.location;Fb=K[Ic];Fb.buffer||t.enableVertexAttribArray(Ic);if(5126!==Fb.type||1!==Fb.size||Fb.buffer!==f||!1!==Fb.normalized||0!==Fb.offset||8!==Fb.stride)t.bindBuffer(34962,f.buffer),t.vertexAttribPointer(Ic,1,5126,!1,8,0),Fb.type=5126,Fb.size=1,Fb.buffer=f,Fb.normalized=!1,Fb.offset=0,Fb.stride=8;0!==Fb.divisor&&(w.vertexAttribDivisorANGLE(Ic,0),Fb.divisor=0);pc=a.location;Ta=K[pc];Ta.buffer||
t.enableVertexAttribArray(pc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==c||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)t.bindBuffer(34962,c.buffer),t.vertexAttribPointer(pc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=c,Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(w.vertexAttribDivisorANGLE(pc,0),Ta.divisor=0);(Jc=J.elements)?t.bindBuffer(34963,Jc.buffer.buffer):$b.currentVAO&&(Jc=Wb.getElements($b.currentVAO.elements))&&t.bindBuffer(34963,Jc.buffer.buffer);for(v=0;v<k;++v){y=
b[v];var ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Hf,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,Ib,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac;ac=y.viewport;rc=ac.x|0;Cd=ac.y|0;xd="width"in ac?ac.width|0:P.framebufferWidth-
rc;Bc="height"in ac?ac.height|0:P.framebufferHeight-Cd;Xb=P.viewportWidth;P.viewportWidth=xd;Gc=P.viewportHeight;P.viewportHeight=Bc;t.viewport(rc,Cd,xd,Bc);qa[0]=rc;qa[1]=Cd;qa[2]=xd;qa[3]=Bc;(Rc=R.call(this,P,y,v))?t.enable(2929):t.disable(2929);sa.depth_enable=Rc;La=y.viewport;vb=La.x|0;Wa=La.y|0;Aa="width"in La?La.width|0:P.framebufferWidth-vb;ld="height"in La?La.height|0:P.framebufferHeight-Wa;t.scissor(vb,Wa,Aa,ld);Qc[0]=vb;Qc[1]=Wa;Qc[2]=Aa;Qc[3]=ld;ba.buffer=y.positionBuffer;gb=!1;Sa=null;
Hb=0;cb=!1;Rb=fc=0;ke=1;Zb=0;Sb=5126;pb=Ma=Tb=td=0;ma(ba)?(gb=!0,Sa=M.createStream(34962,ba),Sb=Sa.dtype):(Sa=M.getBuffer(ba))?Sb=Sa.dtype:"constant"in ba?(ke=2,"number"===typeof ba.constant?(Tb=ba.constant,Ma=pb=td=0):(Tb=0<ba.constant.length?ba.constant[0]:0,Ma=1<ba.constant.length?ba.constant[1]:0,pb=2<ba.constant.length?ba.constant[2]:0,td=3<ba.constant.length?ba.constant[3]:0)):(Sa=ma(ba.buffer)?M.createStream(34962,ba.buffer):M.getBuffer(ba.buffer),Sb="type"in ba?E[ba.type]:Sa.dtype,cb=!!ba.normalized,
Rb=ba.size|0,fc=ba.offset|0,Zb=ba.stride|0,Hb=ba.divisor|0);wb=z.location;hb=K[wb];if(1===ke){hb.buffer||t.enableVertexAttribArray(wb);Pa=Rb||2;if(hb.type!==Sb||hb.size!==Pa||hb.buffer!==Sa||hb.normalized!==cb||hb.offset!==fc||hb.stride!==Zb)t.bindBuffer(34962,Sa.buffer),t.vertexAttribPointer(wb,Pa,Sb,cb,Zb,fc),hb.type=Sb,hb.size=Pa,hb.buffer=Sa,hb.normalized=cb,hb.offset=fc,hb.stride=Zb;hb.divisor!==Hb&&(w.vertexAttribDivisorANGLE(wb,Hb),hb.divisor=Hb)}else if(hb.buffer&&(t.disableVertexAttribArray(wb),
hb.buffer=null),hb.x!==Tb||hb.y!==Ma||hb.z!==pb||hb.w!==td)t.vertexAttrib4f(wb,Tb,Ma,pb,td),hb.x=Tb,hb.y=Ma,hb.z=pb,hb.w=td;ja.buffer=y.positionBuffer;uc=!1;Jb=null;ad=0;db=!1;Yc=lc=0;dc=1;kb=0;lb=5126;Ua=wa=qb=va=0;ma(ja)?(uc=!0,Jb=M.createStream(34962,ja),lb=Jb.dtype):(Jb=M.getBuffer(ja))?lb=Jb.dtype:"constant"in ja?(dc=2,"number"===typeof ja.constant?(qb=ja.constant,wa=Ua=va=0):(qb=0<ja.constant.length?ja.constant[0]:0,wa=1<ja.constant.length?ja.constant[1]:0,Ua=2<ja.constant.length?ja.constant[2]:
0,va=3<ja.constant.length?ja.constant[3]:0)):(Jb=ma(ja.buffer)?M.createStream(34962,ja.buffer):M.getBuffer(ja.buffer),lb="type"in ja?E[ja.type]:Jb.dtype,db=!!ja.normalized,Yc=ja.size|0,lc=ja.offset|0,kb=ja.stride|0,ad=ja.divisor|0);bb=W.location;Ba=K[bb];if(1===dc){Ba.buffer||t.enableVertexAttribArray(bb);eb=Yc||2;if(Ba.type!==lb||Ba.size!==eb||Ba.buffer!==Jb||Ba.normalized!==db||Ba.offset!==lc||Ba.stride!==kb)t.bindBuffer(34962,Jb.buffer),t.vertexAttribPointer(bb,eb,lb,db,kb,lc),Ba.type=lb,Ba.size=
eb,Ba.buffer=Jb,Ba.normalized=db,Ba.offset=lc,Ba.stride=kb;Ba.divisor!==ad&&(w.vertexAttribDivisorANGLE(bb,ad),Ba.divisor=ad)}else if(Ba.buffer&&(t.disableVertexAttribArray(bb),Ba.buffer=null),Ba.x!==qb||Ba.y!==wa||Ba.z!==Ua||Ba.w!==va)t.vertexAttrib4f(bb,qb,wa,Ua,va),Ba.x=qb,Ba.y=wa,Ba.z=Ua,Ba.w=va;ia.buffer=y.positionBuffer;Ja=!1;Cb=null;Bb=0;Ra=!1;Kb=Kc=0;Za=1;Ub=0;ya=5126;fb=Ob=Ka=ze=0;ma(ia)?(Ja=!0,Cb=M.createStream(34962,ia),ya=Cb.dtype):(Cb=M.getBuffer(ia))?ya=Cb.dtype:"constant"in ia?(Za=
2,"number"===typeof ia.constant?(Ka=ia.constant,Ob=fb=ze=0):(Ka=0<ia.constant.length?ia.constant[0]:0,Ob=1<ia.constant.length?ia.constant[1]:0,fb=2<ia.constant.length?ia.constant[2]:0,ze=3<ia.constant.length?ia.constant[3]:0)):(Cb=ma(ia.buffer)?M.createStream(34962,ia.buffer):M.getBuffer(ia.buffer),ya="type"in ia?E[ia.type]:Cb.dtype,Ra=!!ia.normalized,Kb=ia.size|0,Kc=ia.offset|0,Ub=ia.stride|0,Bb=ia.divisor|0);ib=ra.location;za=K[ib];if(1===Za){za.buffer||t.enableVertexAttribArray(ib);gc=Kb||2;if(za.type!==
ya||za.size!==gc||za.buffer!==Cb||za.normalized!==Ra||za.offset!==Kc||za.stride!==Ub)t.bindBuffer(34962,Cb.buffer),t.vertexAttribPointer(ib,gc,ya,Ra,Ub,Kc),za.type=ya,za.size=gc,za.buffer=Cb,za.normalized=Ra,za.offset=Kc,za.stride=Ub;za.divisor!==Bb&&(w.vertexAttribDivisorANGLE(ib,Bb),za.divisor=Bb)}else if(za.buffer&&(t.disableVertexAttribArray(ib),za.buffer=null),za.x!==Ka||za.y!==Ob||za.z!==fb||za.w!==ze)t.vertexAttrib4f(ib,Ka,Ob,fb,ze),za.x=Ka,za.y=Ob,za.z=fb,za.w=ze;l.buffer=y.positionBuffer;
Ea=!1;rb=null;sb=0;Xa=!1;mc=Ya=0;xc=1;vc=0;Va=5126;zc=Ga=Zc=Mb=0;ma(l)?(Ea=!0,rb=M.createStream(34962,l),Va=rb.dtype):(rb=M.getBuffer(l))?Va=rb.dtype:"constant"in l?(xc=2,"number"===typeof l.constant?(Zc=l.constant,Ga=zc=Mb=0):(Zc=0<l.constant.length?l.constant[0]:0,Ga=1<l.constant.length?l.constant[1]:0,zc=2<l.constant.length?l.constant[2]:0,Mb=3<l.constant.length?l.constant[3]:0)):(rb=ma(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),Va="type"in l?E[l.type]:rb.dtype,Xa=!!l.normalized,
mc=l.size|0,Ya=l.offset|0,vc=l.stride|0,sb=l.divisor|0);Qa=jb.location;Ca=K[Qa];if(1===xc){Ca.buffer||t.enableVertexAttribArray(Qa);mb=mc||2;if(Ca.type!==Va||Ca.size!==mb||Ca.buffer!==rb||Ca.normalized!==Xa||Ca.offset!==Ya||Ca.stride!==vc)t.bindBuffer(34962,rb.buffer),t.vertexAttribPointer(Qa,mb,Va,Xa,vc,Ya),Ca.type=Va,Ca.size=mb,Ca.buffer=rb,Ca.normalized=Xa,Ca.offset=Ya,Ca.stride=vc;Ca.divisor!==sb&&(w.vertexAttribDivisorANGLE(Qa,sb),Ca.divisor=sb)}else if(Ca.buffer&&(t.disableVertexAttribArray(Qa),
Ca.buffer=null),Ca.x!==Zc||Ca.y!==Ga||Ca.z!==zc||Ca.w!==Mb)t.vertexAttrib4f(Qa,Zc,Ga,zc,Mb),Ca.x=Zc,Ca.y=Ga,Ca.z=zc,Ca.w=Mb;m.buffer=y.colorBuffer;xb=!1;Eb=null;tb=0;wc=!1;Dd=yb=0;sc=1;Jd=0;Mc=5126;bc=Vb=cd=jd=0;ma(m)?(xb=!0,Eb=M.createStream(34962,m),Mc=Eb.dtype):(Eb=M.getBuffer(m))?Mc=Eb.dtype:"constant"in m?(sc=2,"number"===typeof m.constant?(cd=m.constant,Vb=bc=jd=0):(cd=0<m.constant.length?m.constant[0]:0,Vb=1<m.constant.length?m.constant[1]:0,bc=2<m.constant.length?m.constant[2]:0,jd=3<m.constant.length?
m.constant[3]:0)):(Eb=ma(m.buffer)?M.createStream(34962,m.buffer):M.getBuffer(m.buffer),Mc="type"in m?E[m.type]:Eb.dtype,wc=!!m.normalized,Dd=m.size|0,yb=m.offset|0,Jd=m.stride|0,tb=m.divisor|0);Pb=d.location;Ha=K[Pb];if(1===sc){Ha.buffer||t.enableVertexAttribArray(Pb);Yb=Dd||4;if(Ha.type!==Mc||Ha.size!==Yb||Ha.buffer!==Eb||Ha.normalized!==wc||Ha.offset!==yb||Ha.stride!==Jd)t.bindBuffer(34962,Eb.buffer),t.vertexAttribPointer(Pb,Yb,Mc,wc,Jd,yb),Ha.type=Mc,Ha.size=Yb,Ha.buffer=Eb,Ha.normalized=wc,Ha.offset=
yb,Ha.stride=Jd;Ha.divisor!==tb&&(w.vertexAttribDivisorANGLE(Pb,tb),Ha.divisor=tb)}else if(Ha.buffer&&(t.disableVertexAttribArray(Pb),Ha.buffer=null),Ha.x!==cd||Ha.y!==Vb||Ha.z!==bc||Ha.w!==jd)t.vertexAttrib4f(Pb,cd,Vb,bc,jd),Ha.x=cd,Ha.y=Vb,Ha.z=bc,Ha.w=jd;x.buffer=y.colorBuffer;nb=!1;zb=null;Nb=0;Qb=!1;jc=hc=0;Hf=1;Cc=0;Dc=5126;Sc=$c=Nc=Ec=0;ma(x)?(nb=!0,zb=M.createStream(34962,x),Dc=zb.dtype):(zb=M.getBuffer(x))?Dc=zb.dtype:"constant"in x?(Hf=2,"number"===typeof x.constant?(Nc=x.constant,$c=Sc=
Ec=0):(Nc=0<x.constant.length?x.constant[0]:0,$c=1<x.constant.length?x.constant[1]:0,Sc=2<x.constant.length?x.constant[2]:0,Ec=3<x.constant.length?x.constant[3]:0)):(zb=ma(x.buffer)?M.createStream(34962,x.buffer):M.getBuffer(x.buffer),Dc="type"in x?E[x.type]:zb.dtype,Qb=!!x.normalized,jc=x.size|0,hc=x.offset|0,Cc=x.stride|0,Nb=x.divisor|0);Oc=U.location;Lb=K[Oc];if(1===Hf){Lb.buffer||t.enableVertexAttribArray(Oc);Gb=jc||4;if(Lb.type!==Dc||Lb.size!==Gb||Lb.buffer!==zb||Lb.normalized!==Qb||Lb.offset!==
hc||Lb.stride!==Cc)t.bindBuffer(34962,zb.buffer),t.vertexAttribPointer(Oc,Gb,Dc,Qb,Cc,hc),Lb.type=Dc,Lb.size=Gb,Lb.buffer=zb,Lb.normalized=Qb,Lb.offset=hc,Lb.stride=Cc;Lb.divisor!==Nb&&(w.vertexAttribDivisorANGLE(Oc,Nb),Lb.divisor=Nb)}else if(Lb.buffer&&(t.disableVertexAttribArray(Oc),Lb.buffer=null),Lb.x!==Nc||Lb.y!==$c||Lb.z!==Sc||Lb.w!==Ec)t.vertexAttrib4f(Oc,Nc,$c,Sc,Ec),Lb.x=Nc,Lb.y=$c,Lb.z=Sc,Lb.w=Ec;Pc=y.scale;Hc=Pc[0];ic=Pc[1];v&&Tc===Hc&&Wc===ic||(Tc=Hc,Wc=ic,t.uniform2f(ec.location,Hc,ic));
md=y.translate;kd=md[0];Xc=md[1];v&&qd===kd&&Ib===Xc||(qd=kd,Ib=Xc,t.uniform2f(Na.location,kd,Xc));Ld=y.thickness;v&&le===Ld||(le=Ld,t.uniform1f(na.location,Ld));xe=y.depth;v&&Ud===xe||(Ud=xe,t.uniform1f(L.location,xe));Hd=e.call(this,P,y,v);Ed=Hd[0];Fc=Hd[1];gd=Hd[2];hd=Hd[3];v&&ed===Ed&&nd===Fc&&bd===gd&&zd===hd||(ed=Ed,nd=Fc,bd=gd,zd=hd,t.uniform4f(Y.location,Ed,Fc,gd,hd));Ad=y.miterLimit;v&&te===Ad||(te=Ad,t.uniform1f(h.location,Ad));ve=g.call(this,P,y,v);v&&Ce===ve||(Ce=ve,t.uniform1f(X.location,
ve));ge=y.dashLength;v&&fe===ge||(fe=ge,t.uniform1f(q.location,ge));ce=y.opacity;v&&pe===ce||(pe=ce,t.uniform1f(xa.location,ce));($d=y.dashTexture)&&"framebuffer"===$d._reglType&&($d=$d.color[0]);ie=$d._texture;t.uniform1i(oa.location,ie.bind());Ac=y.count;0<Ac?Jc?w.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Ac):w.drawArraysInstancedANGLE(5,0,4,Ac):0>Ac&&(Jc?t.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):t.drawArrays(5,0,4));P.viewportWidth=Xb;P.viewportHeight=Gc;gb&&M.destroyStream(Sa);
uc&&M.destroyStream(Jb);Ja&&M.destroyStream(Cb);Ea&&M.destroyStream(rb);xb&&M.destroyStream(Eb);nb&&M.destroyStream(zb);ie.unbind()}sa.dirty=!0;$b.setVAO(null);n&&(Z.cpuTime+=performance.now()-r)},draw:function(e){var g,k,n,w,v,B,H,F,A,G,I,N,ha,ea,ca,ta,R,pa,ub,Fa,Oa,Ia,Sd,Td,ob,Xd,rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,
fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd;g=Q.next;g!==Q.cur&&(g?t.bindFramebuffer(36160,g.framebuffer):t.bindFramebuffer(36160,null),Q.cur=g);if(sa.dirty){var sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Ib,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic;sc=da.dither;sc!==sa.dither&&(sc?t.enable(3024):t.disable(3024),sa.dither=sc);Jd=da.depth_func;Jd!==sa.depth_func&&(t.depthFunc(Jd),sa.depth_func=Jd);Mc=ud[0];jd=ud[1];if(Mc!==yc[0]||jd!==yc[1])t.depthRange(Mc,jd),yc[0]=
Mc,yc[1]=jd;cd=da.depth_mask;cd!==sa.depth_mask&&(t.depthMask(cd),sa.depth_mask=cd);Vb=nc[0];bc=nc[1];Pb=nc[2];Ha=nc[3];if(Vb!==kc[0]||bc!==kc[1]||Pb!==kc[2]||Ha!==kc[3])t.colorMask(Vb,bc,Pb,Ha),kc[0]=Vb,kc[1]=bc,kc[2]=Pb,kc[3]=Ha;Yb=da.frontFace;Yb!==sa.frontFace&&(t.frontFace(Yb),sa.frontFace=Yb);nb=da.lineWidth;nb!==sa.lineWidth&&(t.lineWidth(nb),sa.lineWidth=nb);zb=da.polygonOffset_enable;zb!==sa.polygonOffset_enable&&(zb?t.enable(32823):t.disable(32823),sa.polygonOffset_enable=zb);Nb=V[0];Qb=
V[1];if(Nb!==C[0]||Qb!==C[1])t.polygonOffset(Nb,Qb),C[0]=Nb,C[1]=Qb;hc=da.sample_alpha;hc!==sa.sample_alpha&&(hc?t.enable(32926):t.disable(32926),sa.sample_alpha=hc);jc=da.sample_enable;jc!==sa.sample_enable&&(jc?t.enable(32928):t.disable(32928),sa.sample_enable=jc);Ib=la[0];Cc=la[1];if(Ib!==Da[0]||Cc!==Da[1])t.sampleCoverage(Ib,Cc),Da[0]=Ib,Da[1]=Cc;Dc=da.stencil_mask;Dc!==sa.stencil_mask&&(t.stencilMask(Dc),sa.stencil_mask=Dc);Ec=Uc[0];Nc=Uc[1];$c=Uc[2];if(Ec!==D[0]||Nc!==D[1]||$c!==D[2])t.stencilFunc(Ec,
Nc,$c),D[0]=Ec,D[1]=Nc,D[2]=$c;Sc=ua[0];Oc=ua[1];Lb=ua[2];Gb=ua[3];if(Sc!==T[0]||Oc!==T[1]||Lb!==T[2]||Gb!==T[3])t.stencilOpSeparate(Sc,Oc,Lb,Gb),T[0]=Sc,T[1]=Oc,T[2]=Lb,T[3]=Gb;Pc=u[0];Hc=u[1];Tc=u[2];ic=u[3];if(Pc!==ka[0]||Hc!==ka[1]||Tc!==ka[2]||ic!==ka[3])t.stencilOpSeparate(Pc,Hc,Tc,ic),ka[0]=Pc,ka[1]=Hc,ka[2]=Tc,ka[3]=ic}k=e.viewport;n=k.x|0;w=k.y|0;v="width"in k?k.width|0:P.framebufferWidth-n;B="height"in k?k.height|0:P.framebufferHeight-w;H=P.viewportWidth;P.viewportWidth=v;F=P.viewportHeight;
P.viewportHeight=B;t.viewport(n,w,v,B);qa[0]=n;qa[1]=w;qa[2]=v;qa[3]=B;t.blendColor(0,0,0,0);S[0]=0;S[1]=0;S[2]=0;S[3]=0;t.enable(3042);sa.blend_enable=!0;t.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;t.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;cc[3]=1;t.enable(2884);sa.cull_enable=!0;t.cullFace(1029);sa.cull_face=1029;(A=r.call(this,P,e,0))?t.enable(2929):t.disable(2929);sa.depth_enable=A;G=e.viewport;I=G.x|0;N=G.y|0;ha="width"in G?G.width|0:P.framebufferWidth-
I;ea="height"in G?G.height|0:P.framebufferHeight-N;t.scissor(I,N,ha,ea);Qc[0]=I;Qc[1]=N;Qc[2]=ha;Qc[3]=ea;t.enable(3089);sa.scissor_enable=!0;t.disable(2960);sa.stencil_enable=!1;if(ca=sa.profile)ta=performance.now(),Z.count++;t.useProgram(O.program);R=$a.angle_instanced_arrays;$b.setVAO(null);ba.buffer=e.positionBuffer;pa=!1;ub=null;Fa=0;Oa=!1;Sd=Ia=0;Td=1;ob=0;Xd=5126;pd=vd=id=rd=0;ma(ba)?(pa=!0,ub=M.createStream(34962,ba),Xd=ub.dtype):(ub=M.getBuffer(ba))?Xd=ub.dtype:"constant"in ba?(Td=2,"number"===
typeof ba.constant?(id=ba.constant,vd=pd=rd=0):(id=0<ba.constant.length?ba.constant[0]:0,vd=1<ba.constant.length?ba.constant[1]:0,pd=2<ba.constant.length?ba.constant[2]:0,rd=3<ba.constant.length?ba.constant[3]:0)):(ub=ma(ba.buffer)?M.createStream(34962,ba.buffer):M.getBuffer(ba.buffer),Xd="type"in ba?E[ba.type]:ub.dtype,Oa=!!ba.normalized,Sd=ba.size|0,Ia=ba.offset|0,ob=ba.stride|0,Fa=ba.divisor|0);dd=z.location;oc=K[dd];if(1===Td){oc.buffer||t.enableVertexAttribArray(dd);sd=Sd||2;if(oc.type!==Xd||
oc.size!==sd||oc.buffer!==ub||oc.normalized!==Oa||oc.offset!==Ia||oc.stride!==ob)t.bindBuffer(34962,ub.buffer),t.vertexAttribPointer(dd,sd,Xd,Oa,ob,Ia),oc.type=Xd,oc.size=sd,oc.buffer=ub,oc.normalized=Oa,oc.offset=Ia,oc.stride=ob;oc.divisor!==Fa&&(R.vertexAttribDivisorANGLE(dd,Fa),oc.divisor=Fa)}else if(oc.buffer&&(t.disableVertexAttribArray(dd),oc.buffer=null),oc.x!==id||oc.y!==vd||oc.z!==pd||oc.w!==rd)t.vertexAttrib4f(dd,id,vd,pd,rd),oc.x=id,oc.y=vd,oc.z=pd,oc.w=rd;ja.buffer=e.positionBuffer;fd=
!1;Lc=null;qc=0;ab=!1;Fb=Ic=0;pc=1;Ta=0;Jc=5126;xd=Cd=rc=ac=0;ma(ja)?(fd=!0,Lc=M.createStream(34962,ja),Jc=Lc.dtype):(Lc=M.getBuffer(ja))?Jc=Lc.dtype:"constant"in ja?(pc=2,"number"===typeof ja.constant?(rc=ja.constant,Cd=xd=ac=0):(rc=0<ja.constant.length?ja.constant[0]:0,Cd=1<ja.constant.length?ja.constant[1]:0,xd=2<ja.constant.length?ja.constant[2]:0,ac=3<ja.constant.length?ja.constant[3]:0)):(Lc=ma(ja.buffer)?M.createStream(34962,ja.buffer):M.getBuffer(ja.buffer),Jc="type"in ja?E[ja.type]:Lc.dtype,
ab=!!ja.normalized,Fb=ja.size|0,Ic=ja.offset|0,Ta=ja.stride|0,qc=ja.divisor|0);Bc=W.location;Xb=K[Bc];if(1===pc){Xb.buffer||t.enableVertexAttribArray(Bc);Gc=Fb||2;if(Xb.type!==Jc||Xb.size!==Gc||Xb.buffer!==Lc||Xb.normalized!==ab||Xb.offset!==Ic||Xb.stride!==Ta)t.bindBuffer(34962,Lc.buffer),t.vertexAttribPointer(Bc,Gc,Jc,ab,Ta,Ic),Xb.type=Jc,Xb.size=Gc,Xb.buffer=Lc,Xb.normalized=ab,Xb.offset=Ic,Xb.stride=Ta;Xb.divisor!==qc&&(R.vertexAttribDivisorANGLE(Bc,qc),Xb.divisor=qc)}else if(Xb.buffer&&(t.disableVertexAttribArray(Bc),
Xb.buffer=null),Xb.x!==rc||Xb.y!==Cd||Xb.z!==xd||Xb.w!==ac)t.vertexAttrib4f(Bc,rc,Cd,xd,ac),Xb.x=rc,Xb.y=Cd,Xb.z=xd,Xb.w=ac;ia.buffer=e.positionBuffer;Rc=!1;La=null;vb=0;Wa=!1;ld=Aa=0;gb=1;Sa=0;Hb=5126;ke=Rb=fc=cb=0;ma(ia)?(Rc=!0,La=M.createStream(34962,ia),Hb=La.dtype):(La=M.getBuffer(ia))?Hb=La.dtype:"constant"in ia?(gb=2,"number"===typeof ia.constant?(fc=ia.constant,Rb=ke=cb=0):(fc=0<ia.constant.length?ia.constant[0]:0,Rb=1<ia.constant.length?ia.constant[1]:0,ke=2<ia.constant.length?ia.constant[2]:
0,cb=3<ia.constant.length?ia.constant[3]:0)):(La=ma(ia.buffer)?M.createStream(34962,ia.buffer):M.getBuffer(ia.buffer),Hb="type"in ia?E[ia.type]:La.dtype,Wa=!!ia.normalized,ld=ia.size|0,Aa=ia.offset|0,Sa=ia.stride|0,vb=ia.divisor|0);Zb=ra.location;Sb=K[Zb];if(1===gb){Sb.buffer||t.enableVertexAttribArray(Zb);td=ld||2;if(Sb.type!==Hb||Sb.size!==td||Sb.buffer!==La||Sb.normalized!==Wa||Sb.offset!==Aa||Sb.stride!==Sa)t.bindBuffer(34962,La.buffer),t.vertexAttribPointer(Zb,td,Hb,Wa,Sa,Aa),Sb.type=Hb,Sb.size=
td,Sb.buffer=La,Sb.normalized=Wa,Sb.offset=Aa,Sb.stride=Sa;Sb.divisor!==vb&&(R.vertexAttribDivisorANGLE(Zb,vb),Sb.divisor=vb)}else if(Sb.buffer&&(t.disableVertexAttribArray(Zb),Sb.buffer=null),Sb.x!==fc||Sb.y!==Rb||Sb.z!==ke||Sb.w!==cb)t.vertexAttrib4f(Zb,fc,Rb,ke,cb),Sb.x=fc,Sb.y=Rb,Sb.z=ke,Sb.w=cb;l.buffer=e.positionBuffer;Tb=!1;Ma=null;pb=0;wb=!1;Pa=hb=0;uc=1;Jb=0;ad=5126;dc=Yc=lc=db=0;ma(l)?(Tb=!0,Ma=M.createStream(34962,l),ad=Ma.dtype):(Ma=M.getBuffer(l))?ad=Ma.dtype:"constant"in l?(uc=2,"number"===
typeof l.constant?(lc=l.constant,Yc=dc=db=0):(lc=0<l.constant.length?l.constant[0]:0,Yc=1<l.constant.length?l.constant[1]:0,dc=2<l.constant.length?l.constant[2]:0,db=3<l.constant.length?l.constant[3]:0)):(Ma=ma(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),ad="type"in l?E[l.type]:Ma.dtype,wb=!!l.normalized,Pa=l.size|0,hb=l.offset|0,Jb=l.stride|0,pb=l.divisor|0);kb=jb.location;lb=K[kb];if(1===uc){lb.buffer||t.enableVertexAttribArray(kb);va=Pa||2;if(lb.type!==ad||lb.size!==va||lb.buffer!==
Ma||lb.normalized!==wb||lb.offset!==hb||lb.stride!==Jb)t.bindBuffer(34962,Ma.buffer),t.vertexAttribPointer(kb,va,ad,wb,Jb,hb),lb.type=ad,lb.size=va,lb.buffer=Ma,lb.normalized=wb,lb.offset=hb,lb.stride=Jb;lb.divisor!==pb&&(R.vertexAttribDivisorANGLE(kb,pb),lb.divisor=pb)}else if(lb.buffer&&(t.disableVertexAttribArray(kb),lb.buffer=null),lb.x!==lc||lb.y!==Yc||lb.z!==dc||lb.w!==db)t.vertexAttrib4f(kb,lc,Yc,dc,db),lb.x=lc,lb.y=Yc,lb.z=dc,lb.w=db;m.buffer=e.colorBuffer;qb=!1;wa=null;Ua=0;bb=!1;eb=Ba=0;
Ja=1;Cb=0;Bb=5126;Za=Kb=Kc=Ra=0;ma(m)?(qb=!0,wa=M.createStream(34962,m),Bb=wa.dtype):(wa=M.getBuffer(m))?Bb=wa.dtype:"constant"in m?(Ja=2,"number"===typeof m.constant?(Kc=m.constant,Kb=Za=Ra=0):(Kc=0<m.constant.length?m.constant[0]:0,Kb=1<m.constant.length?m.constant[1]:0,Za=2<m.constant.length?m.constant[2]:0,Ra=3<m.constant.length?m.constant[3]:0)):(wa=ma(m.buffer)?M.createStream(34962,m.buffer):M.getBuffer(m.buffer),Bb="type"in m?E[m.type]:wa.dtype,bb=!!m.normalized,eb=m.size|0,Ba=m.offset|0,Cb=
m.stride|0,Ua=m.divisor|0);Ub=d.location;ya=K[Ub];if(1===Ja){ya.buffer||t.enableVertexAttribArray(Ub);ze=eb||4;if(ya.type!==Bb||ya.size!==ze||ya.buffer!==wa||ya.normalized!==bb||ya.offset!==Ba||ya.stride!==Cb)t.bindBuffer(34962,wa.buffer),t.vertexAttribPointer(Ub,ze,Bb,bb,Cb,Ba),ya.type=Bb,ya.size=ze,ya.buffer=wa,ya.normalized=bb,ya.offset=Ba,ya.stride=Cb;ya.divisor!==Ua&&(R.vertexAttribDivisorANGLE(Ub,Ua),ya.divisor=Ua)}else if(ya.buffer&&(t.disableVertexAttribArray(Ub),ya.buffer=null),ya.x!==Kc||
ya.y!==Kb||ya.z!==Za||ya.w!==Ra)t.vertexAttrib4f(Ub,Kc,Kb,Za,Ra),ya.x=Kc,ya.y=Kb,ya.z=Za,ya.w=Ra;x.buffer=e.colorBuffer;Ka=!1;Ob=null;fb=0;ib=!1;gc=za=0;Ea=1;rb=0;sb=5126;xc=mc=Ya=Xa=0;ma(x)?(Ka=!0,Ob=M.createStream(34962,x),sb=Ob.dtype):(Ob=M.getBuffer(x))?sb=Ob.dtype:"constant"in x?(Ea=2,"number"===typeof x.constant?(Ya=x.constant,mc=xc=Xa=0):(Ya=0<x.constant.length?x.constant[0]:0,mc=1<x.constant.length?x.constant[1]:0,xc=2<x.constant.length?x.constant[2]:0,Xa=3<x.constant.length?x.constant[3]:
0)):(Ob=ma(x.buffer)?M.createStream(34962,x.buffer):M.getBuffer(x.buffer),sb="type"in x?E[x.type]:Ob.dtype,ib=!!x.normalized,gc=x.size|0,za=x.offset|0,rb=x.stride|0,fb=x.divisor|0);vc=U.location;Va=K[vc];if(1===Ea){Va.buffer||t.enableVertexAttribArray(vc);Mb=gc||4;if(Va.type!==sb||Va.size!==Mb||Va.buffer!==Ob||Va.normalized!==ib||Va.offset!==za||Va.stride!==rb)t.bindBuffer(34962,Ob.buffer),t.vertexAttribPointer(vc,Mb,sb,ib,rb,za),Va.type=sb,Va.size=Mb,Va.buffer=Ob,Va.normalized=ib,Va.offset=za,Va.stride=
rb;Va.divisor!==fb&&(R.vertexAttribDivisorANGLE(vc,fb),Va.divisor=fb)}else if(Va.buffer&&(t.disableVertexAttribArray(vc),Va.buffer=null),Va.x!==Ya||Va.y!==mc||Va.z!==xc||Va.w!==Xa)t.vertexAttrib4f(vc,Ya,mc,xc,Xa),Va.x=Ya,Va.y=mc,Va.z=xc,Va.w=Xa;Zc=fa.location;Ga=K[Zc];Ga.buffer||t.enableVertexAttribArray(Zc);if(5126!==Ga.type||1!==Ga.size||Ga.buffer!==f||!1!==Ga.normalized||0!==Ga.offset||8!==Ga.stride)t.bindBuffer(34962,f.buffer),t.vertexAttribPointer(Zc,1,5126,!1,8,0),Ga.type=5126,Ga.size=1,Ga.buffer=
f,Ga.normalized=!1,Ga.offset=0,Ga.stride=8;0!==Ga.divisor&&(R.vertexAttribDivisorANGLE(Zc,0),Ga.divisor=0);zc=a.location;Qa=K[zc];Qa.buffer||t.enableVertexAttribArray(zc);if(5126!==Qa.type||1!==Qa.size||Qa.buffer!==c||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)t.bindBuffer(34962,c.buffer),t.vertexAttribPointer(zc,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=c,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(R.vertexAttribDivisorANGLE(zc,0),Qa.divisor=0);Ca=e.scale;t.uniform2f(ec.location,
Ca[0],Ca[1]);mb=e.translate;t.uniform2f(Na.location,mb[0],mb[1]);t.uniform1f(na.location,e.thickness);t.uniform1f(L.location,e.depth);xb=y.call(this,P,e,0);t.uniform4f(Y.location,xb[0],xb[1],xb[2],xb[3]);t.uniform1f(h.location,e.miterLimit);Eb=b.call(this,P,e,0);t.uniform1f(X.location,Eb);t.uniform1f(q.location,e.dashLength);t.uniform1f(xa.location,e.opacity);(tb=e.dashTexture)&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);wc=tb._texture;t.uniform1i(oa.location,wc.bind());(yb=J.elements)?t.bindBuffer(34963,
yb.buffer.buffer):$b.currentVAO&&(yb=Wb.getElements($b.currentVAO.elements))&&t.bindBuffer(34963,yb.buffer.buffer);Dd=e.count;0<Dd?yb?R.drawElementsInstancedANGLE(5,4,yb.type,0<<(yb.type-5121>>1),Dd):R.drawArraysInstancedANGLE(5,0,4,Dd):0>Dd&&(yb?t.drawElements(5,4,yb.type,0<<(yb.type-5121>>1)):t.drawArrays(5,0,4));sa.dirty=!0;$b.setVAO(null);P.viewportWidth=H;P.viewportHeight=F;ca&&(Z.cpuTime+=performance.now()-ta);pa&&M.destroyStream(ub);fd&&M.destroyStream(Lc);Rc&&M.destroyStream(La);Tb&&M.destroyStream(Ma);
qb&&M.destroyStream(wa);Ka&&M.destroyStream(Ob);wc.unbind()},scope:function(a,b,d){var e,g,h,k,q,r,u,t,C,y,z,D,V,O,L,K,I,Q,S,T,la,U,Y,W,ka,ga,X,ua,nc,qa,Da,R,fa,oa,ab,ud,Fb,ra,Ta,na,ac,yc,Qc,cc,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,kc,gb,Sa,Hb,cb,fc,Rb,xa,Zb,Sb,$a,Tb,Ma,pb,wb,hb,Pa,Na,Jb,jb,db,lc,Uc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,Wb,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,$b,sc,ec,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Ib,Cc,Dc,Ec,Nc,$c,Sc,Oc,
Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,be,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ye,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,qf,nf,cf,gf,hf,jf,of,kf,pf,Af,Bf,Ne,Be,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf;e=a.viewport;g=e.x|0;h=e.y|0;k="width"in e?e.width|0:P.framebufferWidth-g;q="height"in e?e.height|0:P.framebufferHeight-h;r=P.viewportWidth;P.viewportWidth=k;u=P.viewportHeight;P.viewportHeight=q;t=
ha[0];ha[0]=g;C=ha[1];ha[1]=h;y=ha[2];ha[2]=k;z=ha[3];ha[3]=q;D=Ia[0];Ia[0]=0;V=Ia[1];Ia[1]=0;O=Ia[2];Ia[2]=0;L=Ia[3];Ia[3]=0;K=da.blend_enable;da.blend_enable=!0;I=ob[0];ob[0]=32774;Q=ob[1];ob[1]=32774;S=ta[0];ta[0]=770;T=ta[1];ta[1]=771;la=ta[2];ta[2]=773;U=ta[3];ta[3]=1;Y=da.cull_enable;da.cull_enable=!0;W=da.cull_face;da.cull_face=1029;ka=v.call(this,P,a,d);ga=da.depth_enable;da.depth_enable=ka;X=a.viewport;ua=X.x|0;nc=X.y|0;qa="width"in X?X.width|0:P.framebufferWidth-ua;Da="height"in X?X.height|
0:P.framebufferHeight-nc;R=ub[0];ub[0]=ua;fa=ub[1];ub[1]=nc;oa=ub[2];ub[2]=qa;ab=ub[3];ub[3]=Da;ud=da.scissor_enable;da.scissor_enable=!0;Fb=da.stencil_enable;da.stencil_enable=!1;if(ra=sa.profile)Ta=performance.now(),Z.count++;na=J.offset;J.offset=0;ac=J.count;J.count=4;yc=a.count;Qc=J.instances;J.instances=yc;cc=J.primitive;J.primitive=5;Bc=a.dashLength;Xb=Oa[23];Oa[23]=Bc;Gc=a.dashTexture;Rc=Oa[24];Oa[24]=Gc;La=a.depth;vb=Oa[22];Oa[22]=La;Wa=a.id;Aa=Oa[31];Oa[31]=Wa;kc=a.miterLimit;gb=Oa[32];Oa[32]=
kc;Sa=A.call(this,P,a,d);Hb=Oa[33];Oa[33]=Sa;cb=a.opacity;fc=Oa[10];Oa[10]=cb;Rb=P.pixelRatio;xa=Oa[34];Oa[34]=Rb;Zb=a.scale;Sb=Oa[6];Oa[6]=Zb;$a=a.scaleFract;Tb=Oa[7];Oa[7]=$a;Ma=a.thickness;pb=Oa[21];Oa[21]=Ma;wb=a.translate;hb=Oa[8];Oa[8]=wb;Pa=a.translateFract;Na=Oa[9];Oa[9]=Pa;Jb=ea.call(this,P,a,d);jb=Oa[3];Oa[3]=Jb;m.buffer=a.colorBuffer;db=!1;lc=null;Uc=0;dc=!1;lb=kb=0;va=1;qb=0;wa=5126;eb=Ba=bb=Ua=0;ma(m)?(db=!0,lc=M.createStream(34962,m),wa=lc.dtype):(lc=M.getBuffer(m))?wa=lc.dtype:"constant"in
m?(va=2,"number"===typeof m.constant?(bb=m.constant,Ba=eb=Ua=0):(bb=0<m.constant.length?m.constant[0]:0,Ba=1<m.constant.length?m.constant[1]:0,eb=2<m.constant.length?m.constant[2]:0,Ua=3<m.constant.length?m.constant[3]:0)):(lc=ma(m.buffer)?M.createStream(34962,m.buffer):M.getBuffer(m.buffer),wa="type"in m?E[m.type]:lc.dtype,dc=!!m.normalized,lb=m.size|0,kb=m.offset|0,qb=m.stride|0,Uc=m.divisor|0);Ja=G.buffer;G.buffer=lc;Cb=G.divisor;G.divisor=Uc;Bb=G.normalized;G.normalized=dc;Ra=G.offset;G.offset=
kb;Kc=G.size;G.size=lb;Kb=G.state;G.state=va;Za=G.stride;G.stride=qb;Ub=G.type;G.type=wa;ya=G.w;G.w=Ua;Wb=G.x;G.x=bb;Ka=G.y;G.y=Ba;Ob=G.z;G.z=eb;ba.buffer=a.positionBuffer;fb=!1;ib=null;za=0;gc=!1;rb=Ea=0;sb=1;Xa=0;Ya=5126;Va=vc=xc=mc=0;ma(ba)?(fb=!0,ib=M.createStream(34962,ba),Ya=ib.dtype):(ib=M.getBuffer(ba))?Ya=ib.dtype:"constant"in ba?(sb=2,"number"===typeof ba.constant?(xc=ba.constant,vc=Va=mc=0):(xc=0<ba.constant.length?ba.constant[0]:0,vc=1<ba.constant.length?ba.constant[1]:0,Va=2<ba.constant.length?
ba.constant[2]:0,mc=3<ba.constant.length?ba.constant[3]:0)):(ib=ma(ba.buffer)?M.createStream(34962,ba.buffer):M.getBuffer(ba.buffer),Ya="type"in ba?E[ba.type]:ib.dtype,gc=!!ba.normalized,rb=ba.size|0,Ea=ba.offset|0,Xa=ba.stride|0,za=ba.divisor|0);Mb=F.buffer;F.buffer=ib;Zc=F.divisor;F.divisor=za;Ga=F.normalized;F.normalized=gc;zc=F.offset;F.offset=Ea;Qa=F.size;F.size=rb;Ca=F.state;F.state=sb;mb=F.stride;F.stride=Xa;xb=F.type;F.type=Ya;Eb=F.w;F.w=mc;tb=F.x;F.x=xc;wc=F.y;F.y=vc;yb=F.z;F.z=Va;x.buffer=
a.colorBuffer;$b=!1;sc=null;ec=0;Mc=!1;cd=jd=0;Vb=1;bc=0;Pb=5126;zb=nb=Yb=Ha=0;ma(x)?($b=!0,sc=M.createStream(34962,x),Pb=sc.dtype):(sc=M.getBuffer(x))?Pb=sc.dtype:"constant"in x?(Vb=2,"number"===typeof x.constant?(Yb=x.constant,nb=zb=Ha=0):(Yb=0<x.constant.length?x.constant[0]:0,nb=1<x.constant.length?x.constant[1]:0,zb=2<x.constant.length?x.constant[2]:0,Ha=3<x.constant.length?x.constant[3]:0)):(sc=ma(x.buffer)?M.createStream(34962,x.buffer):M.getBuffer(x.buffer),Pb="type"in x?E[x.type]:sc.dtype,
Mc=!!x.normalized,cd=x.size|0,jd=x.offset|0,bc=x.stride|0,ec=x.divisor|0);Nb=w.buffer;w.buffer=sc;Qb=w.divisor;w.divisor=ec;hc=w.normalized;w.normalized=Mc;jc=w.offset;w.offset=jd;Ib=w.size;w.size=cd;Cc=w.state;w.state=Vb;Dc=w.stride;w.stride=bc;Ec=w.type;w.type=Pb;Nc=w.w;w.w=Ha;$c=w.x;w.x=Yb;Sc=w.y;w.y=nb;Oc=w.z;w.z=zb;ja.buffer=a.positionBuffer;Lb=!1;Gb=null;Pc=0;Hc=!1;ic=Tc=0;Wc=1;md=0;kd=5126;Ld=be=Xc=qd=0;ma(ja)?(Lb=!0,Gb=M.createStream(34962,ja),kd=Gb.dtype):(Gb=M.getBuffer(ja))?kd=Gb.dtype:
"constant"in ja?(Wc=2,"number"===typeof ja.constant?(Xc=ja.constant,be=Ld=qd=0):(Xc=0<ja.constant.length?ja.constant[0]:0,be=1<ja.constant.length?ja.constant[1]:0,Ld=2<ja.constant.length?ja.constant[2]:0,qd=3<ja.constant.length?ja.constant[3]:0)):(Gb=ma(ja.buffer)?M.createStream(34962,ja.buffer):M.getBuffer(ja.buffer),kd="type"in ja?E[ja.type]:Gb.dtype,Hc=!!ja.normalized,ic=ja.size|0,Tc=ja.offset|0,md=ja.stride|0,Pc=ja.divisor|0);le=B.buffer;B.buffer=Gb;xe=B.divisor;B.divisor=Pc;Ud=B.normalized;B.normalized=
Hc;Hd=B.offset;B.offset=Tc;Ed=B.size;B.size=ic;ed=B.state;B.state=Wc;Fc=B.stride;B.stride=md;nd=B.type;B.type=kd;gd=B.w;B.w=qd;bd=B.x;B.x=Xc;hd=B.y;B.y=be;zd=B.z;B.z=Ld;Ad=N.buffer;N.buffer=f;te=N.divisor;N.divisor=0;ve=N.normalized;N.normalized=!1;Ce=N.offset;N.offset=0;ge=N.size;N.size=0;fe=N.state;N.state=1;ce=N.stride;N.stride=8;pe=N.type;N.type=5126;$d=N.w;N.w=0;ie=N.x;N.x=0;Ac=N.y;N.y=0;Vc=N.z;N.z=0;qe=n.buffer;n.buffer=c;me=n.divisor;n.divisor=0;Fd=n.normalized;n.normalized=!1;Md=n.offset;
n.offset=4;Nd=n.size;n.size=0;Od=n.state;n.state=1;je=n.stride;n.stride=8;Ye=n.type;n.type=5126;ye=n.w;n.w=0;oe=n.x;n.x=0;Oe=n.y;n.y=0;Pe=n.z;n.z=0;ia.buffer=a.positionBuffer;Le=!1;re=null;De=0;Ge=!1;Ie=He=0;Ee=1;Id=0;Rd=5126;yd=Je=ae=Yd=0;ma(ia)?(Le=!0,re=M.createStream(34962,ia),Rd=re.dtype):(re=M.getBuffer(ia))?Rd=re.dtype:"constant"in ia?(Ee=2,"number"===typeof ia.constant?(ae=ia.constant,Je=yd=Yd=0):(ae=0<ia.constant.length?ia.constant[0]:0,Je=1<ia.constant.length?ia.constant[1]:0,yd=2<ia.constant.length?
ia.constant[2]:0,Yd=3<ia.constant.length?ia.constant[3]:0)):(re=ma(ia.buffer)?M.createStream(34962,ia.buffer):M.getBuffer(ia.buffer),Rd="type"in ia?E[ia.type]:re.dtype,Ge=!!ia.normalized,Ie=ia.size|0,He=ia.offset|0,Id=ia.stride|0,De=ia.divisor|0);Pd=H.buffer;H.buffer=re;Ae=H.divisor;H.divisor=De;Ke=H.normalized;H.normalized=Ge;ff=H.offset;H.offset=He;Xe=H.size;H.size=Ie;Qe=H.state;H.state=Ee;Me=H.stride;H.stride=Id;We=H.type;H.type=Rd;Ue=H.w;H.w=Yd;Re=H.x;H.x=ae;Se=H.y;H.y=Je;Qd=H.z;H.z=yd;l.buffer=
a.positionBuffer;Vd=!1;Te=null;qf=0;nf=!1;gf=cf=0;hf=1;jf=0;of=5126;Bf=Af=pf=kf=0;ma(l)?(Vd=!0,Te=M.createStream(34962,l),of=Te.dtype):(Te=M.getBuffer(l))?of=Te.dtype:"constant"in l?(hf=2,"number"===typeof l.constant?(pf=l.constant,Af=Bf=kf=0):(pf=0<l.constant.length?l.constant[0]:0,Af=1<l.constant.length?l.constant[1]:0,Bf=2<l.constant.length?l.constant[2]:0,kf=3<l.constant.length?l.constant[3]:0)):(Te=ma(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),of="type"in l?E[l.type]:Te.dtype,
nf=!!l.normalized,gf=l.size|0,cf=l.offset|0,jf=l.stride|0,qf=l.divisor|0);Ne=ca.buffer;ca.buffer=Te;Be=ca.divisor;ca.divisor=qf;lf=ca.normalized;ca.normalized=nf;mf=ca.offset;ca.offset=cf;Cf=ca.size;ca.size=gf;Ff=ca.state;ca.state=hf;zf=ca.stride;ca.stride=jf;Df=ca.type;ca.type=of;Ef=ca.w;ca.w=kf;uf=ca.x;ca.x=pf;vf=ca.y;ca.y=Af;tf=ca.z;ca.z=Bf;wf=Fa.vert;Fa.vert=36;xf=Fa.frag;Fa.frag=35;sa.dirty=!0;b(P,a,d);P.viewportWidth=r;P.viewportHeight=u;ha[0]=t;ha[1]=C;ha[2]=y;ha[3]=z;Ia[0]=D;Ia[1]=V;Ia[2]=
O;Ia[3]=L;da.blend_enable=K;ob[0]=I;ob[1]=Q;ta[0]=S;ta[1]=T;ta[2]=la;ta[3]=U;da.cull_enable=Y;da.cull_face=W;da.depth_enable=ga;ub[0]=R;ub[1]=fa;ub[2]=oa;ub[3]=ab;da.scissor_enable=ud;da.stencil_enable=Fb;ra&&(Z.cpuTime+=performance.now()-Ta);J.offset=na;J.count=ac;J.instances=Qc;J.primitive=cc;Oa[23]=Xb;Oa[24]=Rc;Oa[22]=vb;Oa[31]=Aa;Oa[32]=gb;Oa[33]=Hb;Oa[10]=fc;Oa[34]=xa;Oa[6]=Sb;Oa[7]=Tb;Oa[21]=pb;Oa[8]=hb;Oa[9]=Na;Oa[3]=jb;db&&M.destroyStream(lc);G.buffer=Ja;G.divisor=Cb;G.normalized=Bb;G.offset=
Ra;G.size=Kc;G.state=Kb;G.stride=Za;G.type=Ub;G.w=ya;G.x=Wb;G.y=Ka;G.z=Ob;fb&&M.destroyStream(ib);F.buffer=Mb;F.divisor=Zc;F.normalized=Ga;F.offset=zc;F.size=Qa;F.state=Ca;F.stride=mb;F.type=xb;F.w=Eb;F.x=tb;F.y=wc;F.z=yb;$b&&M.destroyStream(sc);w.buffer=Nb;w.divisor=Qb;w.normalized=hc;w.offset=jc;w.size=Ib;w.state=Cc;w.stride=Dc;w.type=Ec;w.w=Nc;w.x=$c;w.y=Sc;w.z=Oc;Lb&&M.destroyStream(Gb);B.buffer=le;B.divisor=xe;B.normalized=Ud;B.offset=Hd;B.size=Ed;B.state=ed;B.stride=Fc;B.type=nd;B.w=gd;B.x=
bd;B.y=hd;B.z=zd;N.buffer=Ad;N.divisor=te;N.normalized=ve;N.offset=Ce;N.size=ge;N.state=fe;N.stride=ce;N.type=pe;N.w=$d;N.x=ie;N.y=Ac;N.z=Vc;n.buffer=qe;n.divisor=me;n.normalized=Fd;n.offset=Md;n.size=Nd;n.state=Od;n.stride=je;n.type=Ye;n.w=ye;n.x=oe;n.y=Oe;n.z=Pe;Le&&M.destroyStream(re);H.buffer=Pd;H.divisor=Ae;H.normalized=Ke;H.offset=ff;H.size=Xe;H.state=Qe;H.stride=Me;H.type=We;H.w=Ue;H.x=Re;H.y=Se;H.z=Qd;Vd&&M.destroyStream(Te);ca.buffer=Ne;ca.divisor=Be;ca.normalized=lf;ca.offset=mf;ca.size=
Cf;ca.state=Ff;ca.stride=zf;ca.type=Df;ca.w=Ef;ca.x=uf;ca.y=vf;ca.z=tf;Fa.vert=wf;Fa.frag=xf;sa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(k,Z,r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,ca){var I,R,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb,ec,na,Na,Y,K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta;I=k.attributes;R=k.buffer;e=k.context;g=k.current;d=k.draw;z=k.elements;U=k.extensions;W=k.framebuffer;q=k.gl;oa=k.isBufferArgs;L=k.next;fa=k.shader;a=
k.uniforms;h=k.vao;X=L.blend_color;ra=g.blend_color;xa=L.blend_equation;jb=g.blend_equation;ec=L.blend_func;na=g.blend_func;Na=L.colorMask;Y=g.colorMask;K=L.depth_range;M=g.depth_range;P=L.polygonOffset_offset;sa=g.polygonOffset_offset;J=L.sample_coverage;Wb=g.sample_coverage;$a=L.scissor_box;Q=g.scissor_box;t=L.stencil_func;ma=g.stencil_func;da=L.stencil_opBack;Fa=g.stencil_opBack;Oa=L.stencil_opFront;$b=g.stencil_opFront;Ia=L.viewport;S=g.viewport;ob={int8:5120,int16:5122,int32:5124,uint8:5121,
uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};ta={offset:8,stride:8};return{batch:function(a,b){var c,f,k,r,C,y;c=W.next;c!==W.cur&&(c?q.bindFramebuffer(36160,c.framebuffer):q.bindFramebuffer(36160,null),W.cur=c);if(g.dirty){var O,X,fa,Ia,D,u,ka,ua,T,ha,qa,E,m,ba,x,ja,ia,l,xa,aa,p,Db,Ab,$a,ec,Ib,ee,Kd,se,od,he,ue;O=L.dither;O!==g.dither&&(O?q.enable(3024):q.disable(3024),g.dither=O);X=L.depth_func;X!==g.depth_func&&(q.depthFunc(X),g.depth_func=X);fa=K[0];Ia=K[1];if(fa!==
M[0]||Ia!==M[1])q.depthRange(fa,Ia),M[0]=fa,M[1]=Ia;D=L.depth_mask;D!==g.depth_mask&&(q.depthMask(D),g.depth_mask=D);u=Na[0];ka=Na[1];ua=Na[2];T=Na[3];if(u!==Y[0]||ka!==Y[1]||ua!==Y[2]||T!==Y[3])q.colorMask(u,ka,ua,T),Y[0]=u,Y[1]=ka,Y[2]=ua,Y[3]=T;ha=L.cull_enable;ha!==g.cull_enable&&(ha?q.enable(2884):q.disable(2884),g.cull_enable=ha);qa=L.cull_face;qa!==g.cull_face&&(q.cullFace(qa),g.cull_face=qa);E=L.frontFace;E!==g.frontFace&&(q.frontFace(E),g.frontFace=E);m=L.lineWidth;m!==g.lineWidth&&(q.lineWidth(m),
g.lineWidth=m);ba=L.polygonOffset_enable;ba!==g.polygonOffset_enable&&(ba?q.enable(32823):q.disable(32823),g.polygonOffset_enable=ba);x=P[0];ja=P[1];if(x!==sa[0]||ja!==sa[1])q.polygonOffset(x,ja),sa[0]=x,sa[1]=ja;ia=L.sample_alpha;ia!==g.sample_alpha&&(ia?q.enable(32926):q.disable(32926),g.sample_alpha=ia);l=L.sample_enable;l!==g.sample_enable&&(l?q.enable(32928):q.disable(32928),g.sample_enable=l);xa=J[0];aa=J[1];if(xa!==Wb[0]||aa!==Wb[1])q.sampleCoverage(xa,aa),Wb[0]=xa,Wb[1]=aa;p=L.stencil_mask;
p!==g.stencil_mask&&(q.stencilMask(p),g.stencil_mask=p);Db=t[0];Ab=t[1];$a=t[2];if(Db!==ma[0]||Ab!==ma[1]||$a!==ma[2])q.stencilFunc(Db,Ab,$a),ma[0]=Db,ma[1]=Ab,ma[2]=$a;ec=Oa[0];Ib=Oa[1];ee=Oa[2];Kd=Oa[3];if(ec!==$b[0]||Ib!==$b[1]||ee!==$b[2]||Kd!==$b[3])q.stencilOpSeparate(ec,Ib,ee,Kd),$b[0]=ec,$b[1]=Ib,$b[2]=ee,$b[3]=Kd;se=da[0];od=da[1];he=da[2];ue=da[3];if(se!==Fa[0]||od!==Fa[1]||he!==Fa[2]||ue!==Fa[3])q.stencilOpSeparate(se,od,he,ue),Fa[0]=se,Fa[1]=od,Fa[2]=he,Fa[3]=ue}q.blendColor(0,0,0,0);
ra[0]=0;ra[1]=0;ra[2]=0;ra[3]=0;q.enable(3042);g.blend_enable=!0;q.blendEquationSeparate(32774,32774);jb[0]=32774;jb[1]=32774;q.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;q.disable(2929);g.depth_enable=!1;q.enable(3089);g.scissor_enable=!0;q.disable(2960);g.stencil_enable=!1;if(f=g.profile)k=performance.now(),Z.count+=b;q.useProgram(v.program);r=U.angle_instanced_arrays;var Gd;h.setVAO(null);Gd=d.instances;for(C=0;C<b;++C){y=a[C];var Bd,Zd,Wd,Ze,yf,bf,wd,Fe,Sd,Td,ne,Xd,
rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub;Bd=y.viewport;Zd=Bd.x|0;Wd=Bd.y|0;Ze="width"in Bd?Bd.width|0:e.framebufferWidth-Zd;yf="height"in Bd?Bd.height|0:e.framebufferHeight-Wd;bf=e.viewportWidth;e.viewportWidth=Ze;wd=e.viewportHeight;e.viewportHeight=yf;q.viewport(Zd,Wd,Ze,yf);S[0]=Zd;S[1]=Wd;S[2]=Ze;S[3]=yf;Fe=y.viewport;Sd=Fe.x|0;Td=
Fe.y|0;ne="width"in Fe?Fe.width|0:e.framebufferWidth-Sd;Xd="height"in Fe?Fe.height|0:e.framebufferHeight-Td;q.scissor(Sd,Td,ne,Xd);Q[0]=Sd;Q[1]=Td;Q[2]=ne;Q[3]=Xd;ga.buffer=y.positionBuffer;rd=!1;id=null;vd=0;pd=!1;oc=dd=0;sd=1;fd=0;Lc=5126;Fb=Ic=ab=qc=0;oa(ga)?(rd=!0,id=R.createStream(34962,ga),Lc=id.dtype):(id=R.getBuffer(ga))?Lc=id.dtype:"constant"in ga?(sd=2,"number"===typeof ga.constant?(ab=ga.constant,Ic=Fb=qc=0):(ab=0<ga.constant.length?ga.constant[0]:0,Ic=1<ga.constant.length?ga.constant[1]:
0,Fb=2<ga.constant.length?ga.constant[2]:0,qc=3<ga.constant.length?ga.constant[3]:0)):(id=oa(ga.buffer)?R.createStream(34962,ga.buffer):R.getBuffer(ga.buffer),Lc="type"in ga?ob[ga.type]:id.dtype,pd=!!ga.normalized,oc=ga.size|0,dd=ga.offset|0,fd=ga.stride|0,vd=ga.divisor|0);pc=w.location;Ta=I[pc];if(1===sd){Ta.buffer||q.enableVertexAttribArray(pc);Jc=oc||2;if(Ta.type!==Lc||Ta.size!==Jc||Ta.buffer!==id||Ta.normalized!==pd||Ta.offset!==dd||Ta.stride!==fd)q.bindBuffer(34962,id.buffer),q.vertexAttribPointer(pc,
Jc,Lc,pd,fd,dd),Ta.type=Lc,Ta.size=Jc,Ta.buffer=id,Ta.normalized=pd,Ta.offset=dd,Ta.stride=fd;Ta.divisor!==vd&&(r.vertexAttribDivisorANGLE(pc,vd),Ta.divisor=vd)}else if(Ta.buffer&&(q.disableVertexAttribArray(pc),Ta.buffer=null),Ta.x!==ab||Ta.y!==Ic||Ta.z!==Fb||Ta.w!==qc)q.vertexAttrib4f(pc,ab,Ic,Fb,qc),Ta.x=ab,Ta.y=Ic,Ta.z=Fb,Ta.w=qc;ta.buffer=y.positionFractBuffer;ac=!1;rc=null;Cd=0;xd=!1;Xb=Bc=0;Gc=1;Rc=0;La=5126;ld=Aa=Wa=vb=0;oa(ta)?(ac=!0,rc=R.createStream(34962,ta),La=rc.dtype):(rc=R.getBuffer(ta))?
La=rc.dtype:"constant"in ta?(Gc=2,"number"===typeof ta.constant?(Wa=ta.constant,Aa=ld=vb=0):(Wa=0<ta.constant.length?ta.constant[0]:0,Aa=1<ta.constant.length?ta.constant[1]:0,ld=2<ta.constant.length?ta.constant[2]:0,vb=3<ta.constant.length?ta.constant[3]:0)):(rc=oa(ta.buffer)?R.createStream(34962,ta.buffer):R.getBuffer(ta.buffer),La="type"in ta?ob[ta.type]:rc.dtype,xd=!!ta.normalized,Xb=ta.size|0,Bc=ta.offset|0,Rc=ta.stride|0,Cd=ta.divisor|0);gb=B.location;Sa=I[gb];if(1===Gc){Sa.buffer||q.enableVertexAttribArray(gb);
Hb=Xb||2;if(Sa.type!==La||Sa.size!==Hb||Sa.buffer!==rc||Sa.normalized!==xd||Sa.offset!==Bc||Sa.stride!==Rc)q.bindBuffer(34962,rc.buffer),q.vertexAttribPointer(gb,Hb,La,xd,Rc,Bc),Sa.type=La,Sa.size=Hb,Sa.buffer=rc,Sa.normalized=xd,Sa.offset=Bc,Sa.stride=Rc;Sa.divisor!==Cd&&(r.vertexAttribDivisorANGLE(gb,Cd),Sa.divisor=Cd)}else if(Sa.buffer&&(q.disableVertexAttribArray(gb),Sa.buffer=null),Sa.x!==Wa||Sa.y!==Aa||Sa.z!==ld||Sa.w!==vb)q.vertexAttrib4f(gb,Wa,Aa,ld,vb),Sa.x=Wa,Sa.y=Aa,Sa.z=ld,Sa.w=vb;cb=
y.fill;fc=cb[0];ke=cb[1];Sb=cb[2];Tb=cb[3];C&&Rb===fc&&Zb===ke&&td===Sb&&Ma===Tb||(Rb=fc,Zb=ke,td=Sb,Ma=Tb,q.uniform4f(ea.location,fc,ke,Sb,Tb));pb=y.scale;wb=pb[0];Pa=pb[1];C&&hb===wb&&uc===Pa||(hb=wb,uc=Pa,q.uniform2f(N.location,wb,Pa));Jb=y.scaleFract;ad=Jb[0];lc=Jb[1];C&&db===ad&&Yc===lc||(db=ad,Yc=lc,q.uniform2f(n.location,ad,lc));dc=y.translate;kb=dc[0];va=dc[1];C&&lb===kb&&qb===va||(lb=kb,qb=va,q.uniform2f(H.location,kb,va));wa=y.translateFract;Ua=wa[0];Ba=wa[1];C&&bb===Ua&&eb===Ba||(bb=Ua,
eb=Ba,q.uniform2f(ca.location,Ua,Ba));Ja=y.id;C&&Cb===Ja||(Cb=Ja,q.uniform1f(G.location,Ja));Bb=y.opacity;C&&Ra===Bb||(Ra=Bb,q.uniform1f(F.location,Bb));Kc=A.call(this,e,y,C);Kb=null;(Kb=(Za=oa(Kc))?z.createStream(Kc):z.getElements(Kc))&&q.bindBuffer(34963,Kb.buffer.buffer);if(Ub=Kb?Kb.vertCount:-1)0<Gd?Kb?r.drawElementsInstancedANGLE(4,Ub,Kb.type,0<<(Kb.type-5121>>1),Gd):r.drawArraysInstancedANGLE(4,0,Ub,Gd):0>Gd&&(Kb?q.drawElements(4,Ub,Kb.type,0<<(Kb.type-5121>>1)):q.drawArrays(4,0,Ub)),e.viewportWidth=
bf,e.viewportHeight=wd,rd&&R.destroyStream(id),ac&&R.destroyStream(rc),Za&&z.destroyStream(Kb)}g.dirty=!0;h.setVAO(null);f&&(Z.cpuTime+=performance.now()-k)},draw:function(a){var b,c,f,k,v,y,A,X,fa,pa,Ia,D,u,ka,ua,T,ha,qa,E,m,ba,x;b=W.next;b!==W.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),W.cur=b);if(g.dirty){b=L.dither;b!==g.dither&&(b?q.enable(3024):q.disable(3024),g.dither=b);b=L.depth_func;b!==g.depth_func&&(q.depthFunc(b),g.depth_func=b);b=K[0];y=K[1];if(b!==
M[0]||y!==M[1])q.depthRange(b,y),M[0]=b,M[1]=y;b=L.depth_mask;b!==g.depth_mask&&(q.depthMask(b),g.depth_mask=b);b=Na[0];y=Na[1];c=Na[2];f=Na[3];if(b!==Y[0]||y!==Y[1]||c!==Y[2]||f!==Y[3])q.colorMask(b,y,c,f),Y[0]=b,Y[1]=y,Y[2]=c,Y[3]=f;b=L.cull_enable;b!==g.cull_enable&&(b?q.enable(2884):q.disable(2884),g.cull_enable=b);b=L.cull_face;b!==g.cull_face&&(q.cullFace(b),g.cull_face=b);b=L.frontFace;b!==g.frontFace&&(q.frontFace(b),g.frontFace=b);b=L.lineWidth;b!==g.lineWidth&&(q.lineWidth(b),g.lineWidth=
b);b=L.polygonOffset_enable;b!==g.polygonOffset_enable&&(b?q.enable(32823):q.disable(32823),g.polygonOffset_enable=b);b=P[0];y=P[1];if(b!==sa[0]||y!==sa[1])q.polygonOffset(b,y),sa[0]=b,sa[1]=y;b=L.sample_alpha;b!==g.sample_alpha&&(b?q.enable(32926):q.disable(32926),g.sample_alpha=b);b=L.sample_enable;b!==g.sample_enable&&(b?q.enable(32928):q.disable(32928),g.sample_enable=b);b=J[0];y=J[1];if(b!==Wb[0]||y!==Wb[1])q.sampleCoverage(b,y),Wb[0]=b,Wb[1]=y;b=L.stencil_mask;b!==g.stencil_mask&&(q.stencilMask(b),
g.stencil_mask=b);b=t[0];y=t[1];c=t[2];if(b!==ma[0]||y!==ma[1]||c!==ma[2])q.stencilFunc(b,y,c),ma[0]=b,ma[1]=y,ma[2]=c;b=Oa[0];y=Oa[1];c=Oa[2];f=Oa[3];if(b!==$b[0]||y!==$b[1]||c!==$b[2]||f!==$b[3])q.stencilOpSeparate(b,y,c,f),$b[0]=b,$b[1]=y,$b[2]=c,$b[3]=f;b=da[0];y=da[1];c=da[2];f=da[3];if(b!==Fa[0]||y!==Fa[1]||c!==Fa[2]||f!==Fa[3])q.stencilOpSeparate(b,y,c,f),Fa[0]=b,Fa[1]=y,Fa[2]=c,Fa[3]=f}b=a.viewport;c=b.x|0;f=b.y|0;k="width"in b?b.width|0:e.framebufferWidth-c;v="height"in b?b.height|0:e.framebufferHeight-
f;b=e.viewportWidth;e.viewportWidth=k;y=e.viewportHeight;e.viewportHeight=v;q.viewport(c,f,k,v);S[0]=c;S[1]=f;S[2]=k;S[3]=v;q.blendColor(0,0,0,0);ra[0]=0;ra[1]=0;ra[2]=0;ra[3]=0;q.enable(3042);g.blend_enable=!0;q.blendEquationSeparate(32774,32774);jb[0]=32774;jb[1]=32774;q.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;q.disable(2929);g.depth_enable=!1;v=a.viewport;c=v.x|0;f=v.y|0;k="width"in v?v.width|0:e.framebufferWidth-c;v="height"in v?v.height|0:e.framebufferHeight-f;
q.scissor(c,f,k,v);Q[0]=c;Q[1]=f;Q[2]=k;Q[3]=v;q.enable(3089);g.scissor_enable=!0;q.disable(2960);g.stencil_enable=!1;if(c=g.profile)A=performance.now(),Z.count++;q.useProgram(r.program);f=U.angle_instanced_arrays;h.setVAO(null);ga.buffer=a.positionBuffer;k=!1;X=0;fa=!1;Ia=pa=0;D=1;u=0;ka=5126;qa=ha=T=ua=0;oa(ga)?(k=!0,v=R.createStream(34962,ga),ka=v.dtype):(v=R.getBuffer(ga))?ka=v.dtype:"constant"in ga?(D=2,"number"===typeof ga.constant?(T=ga.constant,ha=qa=ua=0):(T=0<ga.constant.length?ga.constant[0]:
0,ha=1<ga.constant.length?ga.constant[1]:0,qa=2<ga.constant.length?ga.constant[2]:0,ua=3<ga.constant.length?ga.constant[3]:0)):(v=oa(ga.buffer)?R.createStream(34962,ga.buffer):R.getBuffer(ga.buffer),ka="type"in ga?ob[ga.type]:v.dtype,fa=!!ga.normalized,Ia=ga.size|0,pa=ga.offset|0,u=ga.stride|0,X=ga.divisor|0);E=w.location;m=I[E];if(1===D){m.buffer||q.enableVertexAttribArray(E);Ia=Ia||2;if(m.type!==ka||m.size!==Ia||m.buffer!==v||m.normalized!==fa||m.offset!==pa||m.stride!==u)q.bindBuffer(34962,v.buffer),
q.vertexAttribPointer(E,Ia,ka,fa,u,pa),m.type=ka,m.size=Ia,m.buffer=v,m.normalized=fa,m.offset=pa,m.stride=u;m.divisor!==X&&(f.vertexAttribDivisorANGLE(E,X),m.divisor=X)}else if(m.buffer&&(q.disableVertexAttribArray(E),m.buffer=null),m.x!==T||m.y!==ha||m.z!==qa||m.w!==ua)q.vertexAttrib4f(E,T,ha,qa,ua),m.x=T,m.y=ha,m.z=qa,m.w=ua;ta.buffer=a.positionFractBuffer;X=!1;pa=0;u=!1;ua=ka=0;T=1;E=0;m=5126;x=ba=qa=ha=0;oa(ta)?(X=!0,fa=R.createStream(34962,ta),m=fa.dtype):(fa=R.getBuffer(ta))?m=fa.dtype:"constant"in
ta?(T=2,"number"===typeof ta.constant?(qa=ta.constant,ba=x=ha=0):(qa=0<ta.constant.length?ta.constant[0]:0,ba=1<ta.constant.length?ta.constant[1]:0,x=2<ta.constant.length?ta.constant[2]:0,ha=3<ta.constant.length?ta.constant[3]:0)):(fa=oa(ta.buffer)?R.createStream(34962,ta.buffer):R.getBuffer(ta.buffer),m="type"in ta?ob[ta.type]:fa.dtype,u=!!ta.normalized,ua=ta.size|0,ka=ta.offset|0,E=ta.stride|0,pa=ta.divisor|0);Ia=B.location;D=I[Ia];if(1===T){D.buffer||q.enableVertexAttribArray(Ia);ua=ua||2;if(D.type!==
m||D.size!==ua||D.buffer!==fa||D.normalized!==u||D.offset!==ka||D.stride!==E)q.bindBuffer(34962,fa.buffer),q.vertexAttribPointer(Ia,ua,m,u,E,ka),D.type=m,D.size=ua,D.buffer=fa,D.normalized=u,D.offset=ka,D.stride=E;D.divisor!==pa&&(f.vertexAttribDivisorANGLE(Ia,pa),D.divisor=pa)}else if(D.buffer&&(q.disableVertexAttribArray(Ia),D.buffer=null),D.x!==qa||D.y!==ba||D.z!==x||D.w!==ha)q.vertexAttrib4f(Ia,qa,ba,x,ha),D.x=qa,D.y=ba,D.z=x,D.w=ha;pa=a.fill;q.uniform4f(ea.location,pa[0],pa[1],pa[2],pa[3]);pa=
a.scale;q.uniform2f(N.location,pa[0],pa[1]);pa=a.scaleFract;q.uniform2f(n.location,pa[0],pa[1]);pa=a.translate;q.uniform2f(H.location,pa[0],pa[1]);pa=a.translateFract;q.uniform2f(ca.location,pa[0],pa[1]);q.uniform1f(G.location,a.id);q.uniform1f(F.location,a.opacity);pa=O.call(this,e,a,0);(pa=(a=oa(pa))?z.createStream(pa):z.getElements(pa))&&q.bindBuffer(34963,pa.buffer.buffer);if(u=pa?pa.vertCount:-1)ka=d.instances,0<ka?pa?f.drawElementsInstancedANGLE(4,u,pa.type,0<<(pa.type-5121>>1),ka):f.drawArraysInstancedANGLE(4,
0,u,ka):0>ka&&(pa?q.drawElements(4,u,pa.type,0<<(pa.type-5121>>1)):q.drawArrays(4,0,u)),g.dirty=!0,h.setVAO(null),e.viewportWidth=b,e.viewportHeight=y,c&&(Z.cpuTime+=performance.now()-A),k&&R.destroyStream(v),X&&R.destroyStream(fa),a&&z.destroyStream(pa)},scope:function(h,k,n){var q,r,t,v,w,B,O,H,F,D,u,M,A,G,K,I,E,m,ba,x,J,N,l,Q,aa,p,P,S,U,Y,ea,W,da,ca,ma,pa,sa,ra,na,Fa,Oa,Na,jb,Wb,wd,$b,Sd,Td,ne,Xd,rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,
fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb;q=h.viewport;r=q.x|0;t=q.y|0;v="width"in q?q.width|0:e.framebufferWidth-r;w="height"in q?q.height|0:e.framebufferHeight-t;B=e.viewportWidth;e.viewportWidth=v;O=e.viewportHeight;e.viewportHeight=w;H=Ia[0];Ia[0]=r;F=Ia[1];Ia[1]=t;D=Ia[2];Ia[2]=v;u=Ia[3];Ia[3]=w;M=X[0];X[0]=0;A=X[1];X[1]=0;G=X[2];X[2]=0;K=X[3];X[3]=0;I=L.blend_enable;L.blend_enable=!0;E=xa[0];xa[0]=32774;m=xa[1];xa[1]=32774;ba=ec[0];ec[0]=770;
x=ec[1];ec[1]=771;J=ec[2];ec[2]=773;N=ec[3];ec[3]=1;l=L.depth_enable;L.depth_enable=!1;Q=h.viewport;aa=Q.x|0;p=Q.y|0;P="width"in Q?Q.width|0:e.framebufferWidth-aa;S="height"in Q?Q.height|0:e.framebufferHeight-p;U=$a[0];$a[0]=aa;Y=$a[1];$a[1]=p;ea=$a[2];$a[2]=P;W=$a[3];$a[3]=S;da=L.scissor_enable;L.scissor_enable=!0;ca=L.stencil_enable;L.stencil_enable=!1;if(ma=g.profile)pa=performance.now(),Z.count++;sa=f.call(this,e,h,n);ra=null;ra=(na=oa(sa))?z.createStream(sa):z.getElements(sa);Fa=d.elements;d.elements=
ra;Oa=d.offset;d.offset=0;Na=ra?ra.vertCount:-1;jb=d.count;d.count=Na;Wb=d.primitive;d.primitive=4;wd=h.fill;$b=a[14];a[14]=wd;Sd=h.id;Td=a[31];a[31]=Sd;ne=h.opacity;Xd=a[10];a[10]=ne;rd=e.pixelRatio;id=a[34];a[34]=rd;vd=h.scale;pd=a[6];a[6]=vd;dd=h.scaleFract;oc=a[7];a[7]=dd;sd=h.translate;fd=a[8];a[8]=sd;Lc=h.translateFract;qc=a[9];a[9]=Lc;ab=c.call(this,e,h,n);Ic=a[3];a[3]=ab;ga.buffer=h.positionBuffer;Fb=!1;pc=null;Ta=0;Jc=!1;rc=ac=0;Cd=1;xd=0;Bc=5126;La=Rc=Gc=Xb=0;oa(ga)?(Fb=!0,pc=R.createStream(34962,
ga),Bc=pc.dtype):(pc=R.getBuffer(ga))?Bc=pc.dtype:"constant"in ga?(Cd=2,"number"===typeof ga.constant?(Gc=ga.constant,Rc=La=Xb=0):(Gc=0<ga.constant.length?ga.constant[0]:0,Rc=1<ga.constant.length?ga.constant[1]:0,La=2<ga.constant.length?ga.constant[2]:0,Xb=3<ga.constant.length?ga.constant[3]:0)):(pc=oa(ga.buffer)?R.createStream(34962,ga.buffer):R.getBuffer(ga.buffer),Bc="type"in ga?ob[ga.type]:pc.dtype,Jc=!!ga.normalized,rc=ga.size|0,ac=ga.offset|0,xd=ga.stride|0,Ta=ga.divisor|0);vb=y.buffer;y.buffer=
pc;Wa=y.divisor;y.divisor=Ta;Aa=y.normalized;y.normalized=Jc;ld=y.offset;y.offset=ac;gb=y.size;y.size=rc;Sa=y.state;y.state=Cd;Hb=y.stride;y.stride=xd;cb=y.type;y.type=Bc;fc=y.w;y.w=Xb;Rb=y.x;y.x=Gc;ke=y.y;y.y=Rc;Zb=y.z;y.z=La;ta.buffer=h.positionFractBuffer;Sb=!1;td=null;Tb=0;Ma=!1;wb=pb=0;hb=1;Pa=0;uc=5126;lc=db=ad=Jb=0;oa(ta)?(Sb=!0,td=R.createStream(34962,ta),uc=td.dtype):(td=R.getBuffer(ta))?uc=td.dtype:"constant"in ta?(hb=2,"number"===typeof ta.constant?(ad=ta.constant,db=lc=Jb=0):(ad=0<ta.constant.length?
ta.constant[0]:0,db=1<ta.constant.length?ta.constant[1]:0,lc=2<ta.constant.length?ta.constant[2]:0,Jb=3<ta.constant.length?ta.constant[3]:0)):(td=oa(ta.buffer)?R.createStream(34962,ta.buffer):R.getBuffer(ta.buffer),uc="type"in ta?ob[ta.type]:td.dtype,Ma=!!ta.normalized,wb=ta.size|0,pb=ta.offset|0,Pa=ta.stride|0,Tb=ta.divisor|0);Yc=b.buffer;b.buffer=td;dc=b.divisor;b.divisor=Tb;kb=b.normalized;b.normalized=Ma;lb=b.offset;b.offset=pb;va=b.size;b.size=wb;qb=b.state;b.state=hb;wa=b.stride;b.stride=Pa;
Ua=b.type;b.type=uc;bb=b.w;b.w=Jb;Ba=b.x;b.x=ad;eb=b.y;b.y=db;Ja=b.z;b.z=lc;Cb=fa.vert;fa.vert=42;Bb=fa.frag;fa.frag=41;g.dirty=!0;k(e,h,n);e.viewportWidth=B;e.viewportHeight=O;Ia[0]=H;Ia[1]=F;Ia[2]=D;Ia[3]=u;X[0]=M;X[1]=A;X[2]=G;X[3]=K;L.blend_enable=I;xa[0]=E;xa[1]=m;ec[0]=ba;ec[1]=x;ec[2]=J;ec[3]=N;L.depth_enable=l;$a[0]=U;$a[1]=Y;$a[2]=ea;$a[3]=W;L.scissor_enable=da;L.stencil_enable=ca;ma&&(Z.cpuTime+=performance.now()-pa);na&&z.destroyStream(ra);d.elements=Fa;d.offset=Oa;d.count=jb;d.primitive=
Wb;a[14]=$b;a[31]=Td;a[10]=Xd;a[34]=id;a[6]=pd;a[7]=oc;a[8]=fd;a[9]=qc;a[3]=Ic;Fb&&R.destroyStream(pc);y.buffer=vb;y.divisor=Wa;y.normalized=Aa;y.offset=ld;y.size=gb;y.state=Sa;y.stride=Hb;y.type=cb;y.w=fc;y.x=Rb;y.y=ke;y.z=Zb;Sb&&R.destroyStream(td);b.buffer=Yc;b.divisor=dc;b.normalized=kb;b.offset=lb;b.size=va;b.state=qb;b.stride=wa;b.type=Ua;b.w=bb;b.x=Ba;b.y=eb;b.z=Ja;fa.vert=Cb;fa.frag=Bb;g.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(k,
Z,r,O,f,c,y,b,v,A,ea,G,F,w,B,N,n,H,R,I,Ib,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb,ec,na,Na,Y,K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta,cc,nc,kc,ud,yc){var V,C,la,Da,ub,Qc,Uc,D,u,ka,ua,T,ha,qa,E,m,ba,x,ja,ia,l,tc,aa,p,Db,Ab,Ve,de,we,ee,Kd,se,od,he,ue,Gd,Bd,Zd,Wd;V=k.attributes;C=k.buffer;la=k.context;Da=k.current;ub=k.draw;Qc=k.elements;Uc=k.extensions;D=k.framebuffer;u=k.gl;ka=k.isBufferArgs;ua=k.next;T=k.shader;ha=k.uniforms;qa=k.vao;E=ua.blend_color;m=Da.blend_color;ba=ua.blend_equation;x=
Da.blend_equation;ja=ua.blend_func;ia=Da.blend_func;l=ua.colorMask;tc=Da.colorMask;aa=ua.depth_range;p=Da.depth_range;Db=ua.polygonOffset_offset;Ab=Da.polygonOffset_offset;Ve=ua.sample_coverage;de=Da.sample_coverage;we=ua.scissor_box;ee=Da.scissor_box;Kd=ua.stencil_func;se=Da.stencil_func;od=ua.stencil_opBack;he=Da.stencil_opBack;ue=ua.stencil_opFront;Gd=Da.stencil_opFront;Bd=ua.viewport;Zd=Da.viewport;Wd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,b){var c,d,e,g,h,f;c=D.next;c!==D.cur&&(c?u.bindFramebuffer(36160,c.framebuffer):u.bindFramebuffer(36160,null),D.cur=c);if(Da.dirty){var k,n,q,r,v,w,y,z,E,B,O,H,F,A,L,G,I,N,T,ha,U,ea,W,X,ja,R,ca,fa,pa,oa,gb,Sa,Hb,cb;k=ua.dither;k!==Da.dither&&(k?u.enable(3024):u.disable(3024),Da.dither=k);n=ba[0];q=ba[1];if(n!==x[0]||q!==x[1])u.blendEquationSeparate(n,q),x[0]=n,x[1]=q;r=ua.depth_func;r!==Da.depth_func&&(u.depthFunc(r),Da.depth_func=r);v=aa[0];w=aa[1];if(v!==p[0]||w!==p[1])u.depthRange(v,
w),p[0]=v,p[1]=w;y=ua.depth_mask;y!==Da.depth_mask&&(u.depthMask(y),Da.depth_mask=y);z=l[0];E=l[1];B=l[2];O=l[3];if(z!==tc[0]||E!==tc[1]||B!==tc[2]||O!==tc[3])u.colorMask(z,E,B,O),tc[0]=z,tc[1]=E,tc[2]=B,tc[3]=O;H=ua.cull_enable;H!==Da.cull_enable&&(H?u.enable(2884):u.disable(2884),Da.cull_enable=H);F=ua.cull_face;F!==Da.cull_face&&(u.cullFace(F),Da.cull_face=F);A=ua.frontFace;A!==Da.frontFace&&(u.frontFace(A),Da.frontFace=A);L=ua.lineWidth;L!==Da.lineWidth&&(u.lineWidth(L),Da.lineWidth=L);G=ua.polygonOffset_enable;
G!==Da.polygonOffset_enable&&(G?u.enable(32823):u.disable(32823),Da.polygonOffset_enable=G);I=Db[0];N=Db[1];if(I!==Ab[0]||N!==Ab[1])u.polygonOffset(I,N),Ab[0]=I,Ab[1]=N;T=ua.sample_alpha;T!==Da.sample_alpha&&(T?u.enable(32926):u.disable(32926),Da.sample_alpha=T);ha=ua.sample_enable;ha!==Da.sample_enable&&(ha?u.enable(32928):u.disable(32928),Da.sample_enable=ha);U=Ve[0];ea=Ve[1];if(U!==de[0]||ea!==de[1])u.sampleCoverage(U,ea),de[0]=U,de[1]=ea;W=ua.stencil_mask;W!==Da.stencil_mask&&(u.stencilMask(W),
Da.stencil_mask=W);X=Kd[0];ja=Kd[1];R=Kd[2];if(X!==se[0]||ja!==se[1]||R!==se[2])u.stencilFunc(X,ja,R),se[0]=X,se[1]=ja,se[2]=R;ca=ue[0];fa=ue[1];pa=ue[2];oa=ue[3];if(ca!==Gd[0]||fa!==Gd[1]||pa!==Gd[2]||oa!==Gd[3])u.stencilOpSeparate(ca,fa,pa,oa),Gd[0]=ca,Gd[1]=fa,Gd[2]=pa,Gd[3]=oa;gb=od[0];Sa=od[1];Hb=od[2];cb=od[3];if(gb!==he[0]||Sa!==he[1]||Hb!==he[2]||cb!==he[3])u.stencilOpSeparate(gb,Sa,Hb,cb),he[0]=gb,he[1]=Sa,he[2]=Hb,he[3]=cb}u.blendColor(0,0,0,1);m[0]=0;m[1]=0;m[2]=0;m[3]=1;u.enable(3042);
Da.blend_enable=!0;u.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;u.disable(2929);Da.depth_enable=!1;u.enable(3089);Da.scissor_enable=!0;u.disable(2960);Da.stencil_enable=!1;if(d=Da.profile)e=performance.now(),Z.count+=b;u.useProgram(ra.program);g=Uc.angle_instanced_arrays;var fc;qa.setVAO(null);u.uniform1i(t.location,!1);u.uniform1i($b.location,sa.bind());fc=ub.instances;for(h=0;h<b;++h){f=a[h];var Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,
bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,Ib,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Bd,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,we,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ye,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,qf,be,cf,gf,hf,jf,of,kf,pf,Af,Bf,Ne,Be,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,
Jf,Kf,Lf,rf,Qf,Gf,sf,cg,Rf,Sf;Rb=f.viewport;ke=Rb.x|0;Zb=Rb.y|0;Sb="width"in Rb?Rb.width|0:la.framebufferWidth-ke;td="height"in Rb?Rb.height|0:la.framebufferHeight-Zb;Tb=la.viewportWidth;la.viewportWidth=Sb;Ma=la.viewportHeight;la.viewportHeight=td;u.viewport(ke,Zb,Sb,td);Zd[0]=ke;Zd[1]=Zb;Zd[2]=Sb;Zd[3]=td;pb=f.viewport;wb=pb.x|0;hb=pb.y|0;Pa="width"in pb?pb.width|0:la.framebufferWidth-wb;uc="height"in pb?pb.height|0:la.framebufferHeight-hb;u.scissor(wb,hb,Pa,uc);ee[0]=wb;ee[1]=hb;ee[2]=Pa;ee[3]=
uc;Jb=xa.call(this,la,f,h);ad=!1;db=null;lc=0;Yc=!1;kb=dc=0;lb=1;va=0;qb=5126;Ba=bb=Ua=wa=0;ka(Jb)?(ad=!0,db=C.createStream(34962,Jb),qb=db.dtype):(db=C.getBuffer(Jb))?qb=db.dtype:"constant"in Jb?(lb=2,"number"===typeof Jb.constant?(Ua=Jb.constant,bb=Ba=wa=0):(Ua=0<Jb.constant.length?Jb.constant[0]:0,bb=1<Jb.constant.length?Jb.constant[1]:0,Ba=2<Jb.constant.length?Jb.constant[2]:0,wa=3<Jb.constant.length?Jb.constant[3]:0)):(db=ka(Jb.buffer)?C.createStream(34962,Jb.buffer):C.getBuffer(Jb.buffer),qb=
"type"in Jb?Wd[Jb.type]:db.dtype,Yc=!!Jb.normalized,kb=Jb.size|0,dc=Jb.offset|0,va=Jb.stride|0,lc=Jb.divisor|0);eb=nc.location;Ja=V[eb];if(1===lb){Ja.buffer||u.enableVertexAttribArray(eb);Cb=kb||1;if(Ja.type!==qb||Ja.size!==Cb||Ja.buffer!==db||Ja.normalized!==Yc||Ja.offset!==dc||Ja.stride!==va)u.bindBuffer(34962,db.buffer),u.vertexAttribPointer(eb,Cb,qb,Yc,va,dc),Ja.type=qb,Ja.size=Cb,Ja.buffer=db,Ja.normalized=Yc,Ja.offset=dc,Ja.stride=va;Ja.divisor!==lc&&(g.vertexAttribDivisorANGLE(eb,lc),Ja.divisor=
lc)}else if(Ja.buffer&&(u.disableVertexAttribArray(eb),Ja.buffer=null),Ja.x!==Ua||Ja.y!==bb||Ja.z!==Ba||Ja.w!==wa)u.vertexAttrib4f(eb,Ua,bb,Ba,wa),Ja.x=Ua,Ja.y=bb,Ja.z=Ba,Ja.w=wa;Bb=jb.call(this,la,f,h);Ra=!1;Kc=null;Kb=0;Za=!1;ya=Ub=0;Ib=1;Ka=0;Ob=5126;gc=za=ib=fb=0;ka(Bb)?(Ra=!0,Kc=C.createStream(34962,Bb),Ob=Kc.dtype):(Kc=C.getBuffer(Bb))?Ob=Kc.dtype:"constant"in Bb?(Ib=2,"number"===typeof Bb.constant?(ib=Bb.constant,za=gc=fb=0):(ib=0<Bb.constant.length?Bb.constant[0]:0,za=1<Bb.constant.length?
Bb.constant[1]:0,gc=2<Bb.constant.length?Bb.constant[2]:0,fb=3<Bb.constant.length?Bb.constant[3]:0)):(Kc=ka(Bb.buffer)?C.createStream(34962,Bb.buffer):C.getBuffer(Bb.buffer),Ob="type"in Bb?Wd[Bb.type]:Kc.dtype,Za=!!Bb.normalized,ya=Bb.size|0,Ub=Bb.offset|0,Ka=Bb.stride|0,Kb=Bb.divisor|0);Ea=ud.location;rb=V[Ea];if(1===Ib){rb.buffer||u.enableVertexAttribArray(Ea);sb=ya||1;if(rb.type!==Ob||rb.size!==sb||rb.buffer!==Kc||rb.normalized!==Za||rb.offset!==Ub||rb.stride!==Ka)u.bindBuffer(34962,Kc.buffer),
u.vertexAttribPointer(Ea,sb,Ob,Za,Ka,Ub),rb.type=Ob,rb.size=sb,rb.buffer=Kc,rb.normalized=Za,rb.offset=Ub,rb.stride=Ka;rb.divisor!==Kb&&(g.vertexAttribDivisorANGLE(Ea,Kb),rb.divisor=Kb)}else if(rb.buffer&&(u.disableVertexAttribArray(Ea),rb.buffer=null),rb.x!==ib||rb.y!==za||rb.z!==gc||rb.w!==fb)u.vertexAttrib4f(Ea,ib,za,gc,fb),rb.x=ib,rb.y=za,rb.z=gc,rb.w=fb;Xa=ec.call(this,la,f,h);Ya=!1;mc=null;xc=0;vc=!1;Mb=Va=0;Zc=1;Ga=0;zc=5126;xb=mb=Ca=Qa=0;ka(Xa)?(Ya=!0,mc=C.createStream(34962,Xa),zc=mc.dtype):
(mc=C.getBuffer(Xa))?zc=mc.dtype:"constant"in Xa?(Zc=2,"number"===typeof Xa.constant?(Ca=Xa.constant,mb=xb=Qa=0):(Ca=0<Xa.constant.length?Xa.constant[0]:0,mb=1<Xa.constant.length?Xa.constant[1]:0,xb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(mc=ka(Xa.buffer)?C.createStream(34962,Xa.buffer):C.getBuffer(Xa.buffer),zc="type"in Xa?Wd[Xa.type]:mc.dtype,vc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|0,Ga=Xa.stride|0,xc=Xa.divisor|0);Eb=kc.location;tb=V[Eb];if(1===Zc){tb.buffer||
u.enableVertexAttribArray(Eb);wc=Mb||1;if(tb.type!==zc||tb.size!==wc||tb.buffer!==mc||tb.normalized!==vc||tb.offset!==Va||tb.stride!==Ga)u.bindBuffer(34962,mc.buffer),u.vertexAttribPointer(Eb,wc,zc,vc,Ga,Va),tb.type=zc,tb.size=wc,tb.buffer=mc,tb.normalized=vc,tb.offset=Va,tb.stride=Ga;tb.divisor!==xc&&(g.vertexAttribDivisorANGLE(Eb,xc),tb.divisor=xc)}else if(tb.buffer&&(u.disableVertexAttribArray(Eb),tb.buffer=null),tb.x!==Ca||tb.y!==mb||tb.z!==xb||tb.w!==Qa)u.vertexAttrib4f(Eb,Ca,mb,xb,Qa),tb.x=
Ca,tb.y=mb,tb.z=xb,tb.w=Qa;yb=na.call(this,la,f,h);Dd=!1;sc=null;Jd=0;Mc=!1;cd=jd=0;Vb=1;bc=0;Pb=5126;zb=nb=Yb=Ha=0;ka(yb)?(Dd=!0,sc=C.createStream(34962,yb),Pb=sc.dtype):(sc=C.getBuffer(yb))?Pb=sc.dtype:"constant"in yb?(Vb=2,"number"===typeof yb.constant?(Yb=yb.constant,nb=zb=Ha=0):(Yb=0<yb.constant.length?yb.constant[0]:0,nb=1<yb.constant.length?yb.constant[1]:0,zb=2<yb.constant.length?yb.constant[2]:0,Ha=3<yb.constant.length?yb.constant[3]:0)):(sc=ka(yb.buffer)?C.createStream(34962,yb.buffer):
C.getBuffer(yb.buffer),Pb="type"in yb?Wd[yb.type]:sc.dtype,Mc=!!yb.normalized,cd=yb.size|0,jd=yb.offset|0,bc=yb.stride|0,Jd=yb.divisor|0);Nb=yc.location;Qb=V[Nb];if(1===Vb){Qb.buffer||u.enableVertexAttribArray(Nb);hc=cd||1;if(Qb.type!==Pb||Qb.size!==hc||Qb.buffer!==sc||Qb.normalized!==Mc||Qb.offset!==jd||Qb.stride!==bc)u.bindBuffer(34962,sc.buffer),u.vertexAttribPointer(Nb,hc,Pb,Mc,bc,jd),Qb.type=Pb,Qb.size=hc,Qb.buffer=sc,Qb.normalized=Mc,Qb.offset=jd,Qb.stride=bc;Qb.divisor!==Jd&&(g.vertexAttribDivisorANGLE(Nb,
Jd),Qb.divisor=Jd)}else if(Qb.buffer&&(u.disableVertexAttribArray(Nb),Qb.buffer=null),Qb.x!==Yb||Qb.y!==nb||Qb.z!==zb||Qb.w!==Ha)u.vertexAttrib4f(Nb,Yb,nb,zb,Ha),Qb.x=Yb,Qb.y=nb,Qb.z=zb,Qb.w=Ha;jc=Na.call(this,la,f,h);Bd=!1;Cc=null;Dc=0;Ec=!1;$c=Nc=0;Sc=1;Oc=0;Lb=5126;Tc=Hc=Pc=Gb=0;ka(jc)?(Bd=!0,Cc=C.createStream(34962,jc),Lb=Cc.dtype):(Cc=C.getBuffer(jc))?Lb=Cc.dtype:"constant"in jc?(Sc=2,"number"===typeof jc.constant?(Pc=jc.constant,Hc=Tc=Gb=0):(Pc=0<jc.constant.length?jc.constant[0]:0,Hc=1<jc.constant.length?
jc.constant[1]:0,Tc=2<jc.constant.length?jc.constant[2]:0,Gb=3<jc.constant.length?jc.constant[3]:0)):(Cc=ka(jc.buffer)?C.createStream(34962,jc.buffer):C.getBuffer(jc.buffer),Lb="type"in jc?Wd[jc.type]:Cc.dtype,Ec=!!jc.normalized,$c=jc.size|0,Nc=jc.offset|0,Oc=jc.stride|0,Dc=jc.divisor|0);ic=ga.location;Wc=V[ic];if(1===Sc){Wc.buffer||u.enableVertexAttribArray(ic);md=$c||1;if(Wc.type!==Lb||Wc.size!==md||Wc.buffer!==Cc||Wc.normalized!==Ec||Wc.offset!==Nc||Wc.stride!==Oc)u.bindBuffer(34962,Cc.buffer),
u.vertexAttribPointer(ic,md,Lb,Ec,Oc,Nc),Wc.type=Lb,Wc.size=md,Wc.buffer=Cc,Wc.normalized=Ec,Wc.offset=Nc,Wc.stride=Oc;Wc.divisor!==Dc&&(g.vertexAttribDivisorANGLE(ic,Dc),Wc.divisor=Dc)}else if(Wc.buffer&&(u.disableVertexAttribArray(ic),Wc.buffer=null),Wc.x!==Pc||Wc.y!==Hc||Wc.z!==Tc||Wc.w!==Gb)u.vertexAttrib4f(ic,Pc,Hc,Tc,Gb),Wc.x=Pc,Wc.y=Hc,Wc.z=Tc,Wc.w=Gb;kd=Y.call(this,la,f,h);qd=!1;Xc=null;we=0;Ld=!1;xe=le=0;Ud=1;Hd=0;Ed=5126;gd=nd=Fc=ed=0;ka(kd)?(qd=!0,Xc=C.createStream(34962,kd),Ed=Xc.dtype):
(Xc=C.getBuffer(kd))?Ed=Xc.dtype:"constant"in kd?(Ud=2,"number"===typeof kd.constant?(Fc=kd.constant,nd=gd=ed=0):(Fc=0<kd.constant.length?kd.constant[0]:0,nd=1<kd.constant.length?kd.constant[1]:0,gd=2<kd.constant.length?kd.constant[2]:0,ed=3<kd.constant.length?kd.constant[3]:0)):(Xc=ka(kd.buffer)?C.createStream(34962,kd.buffer):C.getBuffer(kd.buffer),Ed="type"in kd?Wd[kd.type]:Xc.dtype,Ld=!!kd.normalized,xe=kd.size|0,le=kd.offset|0,Hd=kd.stride|0,we=kd.divisor|0);bd=$a.location;hd=V[bd];if(1===Ud){hd.buffer||
u.enableVertexAttribArray(bd);zd=xe||1;if(hd.type!==Ed||hd.size!==zd||hd.buffer!==Xc||hd.normalized!==Ld||hd.offset!==le||hd.stride!==Hd)u.bindBuffer(34962,Xc.buffer),u.vertexAttribPointer(bd,zd,Ed,Ld,Hd,le),hd.type=Ed,hd.size=zd,hd.buffer=Xc,hd.normalized=Ld,hd.offset=le,hd.stride=Hd;hd.divisor!==we&&(g.vertexAttribDivisorANGLE(bd,we),hd.divisor=we)}else if(hd.buffer&&(u.disableVertexAttribArray(bd),hd.buffer=null),hd.x!==Fc||hd.y!==nd||hd.z!==gd||hd.w!==ed)u.vertexAttrib4f(bd,Fc,nd,gd,ed),hd.x=
Fc,hd.y=nd,hd.z=gd,hd.w=ed;Ad=K.call(this,la,f,h);te=!1;ve=null;Ce=0;ge=!1;ce=fe=0;pe=1;$d=0;ie=5126;me=qe=Vc=Ac=0;ka(Ad)?(te=!0,ve=C.createStream(34962,Ad),ie=ve.dtype):(ve=C.getBuffer(Ad))?ie=ve.dtype:"constant"in Ad?(pe=2,"number"===typeof Ad.constant?(Vc=Ad.constant,qe=me=Ac=0):(Vc=0<Ad.constant.length?Ad.constant[0]:0,qe=1<Ad.constant.length?Ad.constant[1]:0,me=2<Ad.constant.length?Ad.constant[2]:0,Ac=3<Ad.constant.length?Ad.constant[3]:0)):(ve=ka(Ad.buffer)?C.createStream(34962,Ad.buffer):C.getBuffer(Ad.buffer),
ie="type"in Ad?Wd[Ad.type]:ve.dtype,ge=!!Ad.normalized,ce=Ad.size|0,fe=Ad.offset|0,$d=Ad.stride|0,Ce=Ad.divisor|0);Fd=Q.location;Md=V[Fd];if(1===pe){Md.buffer||u.enableVertexAttribArray(Fd);Nd=ce||4;if(Md.type!==ie||Md.size!==Nd||Md.buffer!==ve||Md.normalized!==ge||Md.offset!==fe||Md.stride!==$d)u.bindBuffer(34962,ve.buffer),u.vertexAttribPointer(Fd,Nd,ie,ge,$d,fe),Md.type=ie,Md.size=Nd,Md.buffer=ve,Md.normalized=ge,Md.offset=fe,Md.stride=$d;Md.divisor!==Ce&&(g.vertexAttribDivisorANGLE(Fd,Ce),Md.divisor=
Ce)}else if(Md.buffer&&(u.disableVertexAttribArray(Fd),Md.buffer=null),Md.x!==Vc||Md.y!==qe||Md.z!==me||Md.w!==Ac)u.vertexAttrib4f(Fd,Vc,qe,me,Ac),Md.x=Vc,Md.y=qe,Md.z=me,Md.w=Ac;Od=M.call(this,la,f,h);je=!1;Ye=null;ye=0;oe=!1;Pe=Oe=0;Le=1;re=0;De=5126;Ee=Ie=He=Ge=0;ka(Od)?(je=!0,Ye=C.createStream(34962,Od),De=Ye.dtype):(Ye=C.getBuffer(Od))?De=Ye.dtype:"constant"in Od?(Le=2,"number"===typeof Od.constant?(He=Od.constant,Ie=Ee=Ge=0):(He=0<Od.constant.length?Od.constant[0]:0,Ie=1<Od.constant.length?
Od.constant[1]:0,Ee=2<Od.constant.length?Od.constant[2]:0,Ge=3<Od.constant.length?Od.constant[3]:0)):(Ye=ka(Od.buffer)?C.createStream(34962,Od.buffer):C.getBuffer(Od.buffer),De="type"in Od?Wd[Od.type]:Ye.dtype,oe=!!Od.normalized,Pe=Od.size|0,Oe=Od.offset|0,re=Od.stride|0,ye=Od.divisor|0);Id=Wb.location;Rd=V[Id];if(1===Le){Rd.buffer||u.enableVertexAttribArray(Id);Yd=Pe||4;if(Rd.type!==De||Rd.size!==Yd||Rd.buffer!==Ye||Rd.normalized!==oe||Rd.offset!==Oe||Rd.stride!==re)u.bindBuffer(34962,Ye.buffer),
u.vertexAttribPointer(Id,Yd,De,oe,re,Oe),Rd.type=De,Rd.size=Yd,Rd.buffer=Ye,Rd.normalized=oe,Rd.offset=Oe,Rd.stride=re;Rd.divisor!==ye&&(g.vertexAttribDivisorANGLE(Id,ye),Rd.divisor=ye)}else if(Rd.buffer&&(u.disableVertexAttribArray(Id),Rd.buffer=null),Rd.x!==He||Rd.y!==Ie||Rd.z!==Ee||Rd.w!==Ge)u.vertexAttrib4f(Id,He,Ie,Ee,Ge),Rd.x=He,Rd.y=Ie,Rd.z=Ee,Rd.w=Ge;ae=P.call(this,la,f,h);Je=!1;yd=null;Pd=0;Ae=!1;ff=Ke=0;Xe=1;Qe=0;Me=5126;Se=Re=Ue=We=0;ka(ae)?(Je=!0,yd=C.createStream(34962,ae),Me=yd.dtype):
(yd=C.getBuffer(ae))?Me=yd.dtype:"constant"in ae?(Xe=2,"number"===typeof ae.constant?(Ue=ae.constant,Re=Se=We=0):(Ue=0<ae.constant.length?ae.constant[0]:0,Re=1<ae.constant.length?ae.constant[1]:0,Se=2<ae.constant.length?ae.constant[2]:0,We=3<ae.constant.length?ae.constant[3]:0)):(yd=ka(ae.buffer)?C.createStream(34962,ae.buffer):C.getBuffer(ae.buffer),Me="type"in ae?Wd[ae.type]:yd.dtype,Ae=!!ae.normalized,ff=ae.size|0,Ke=ae.offset|0,Qe=ae.stride|0,Pd=ae.divisor|0);Qd=ma.location;Vd=V[Qd];if(1===Xe){Vd.buffer||
u.enableVertexAttribArray(Qd);Te=ff||1;if(Vd.type!==Me||Vd.size!==Te||Vd.buffer!==yd||Vd.normalized!==Ae||Vd.offset!==Ke||Vd.stride!==Qe)u.bindBuffer(34962,yd.buffer),u.vertexAttribPointer(Qd,Te,Me,Ae,Qe,Ke),Vd.type=Me,Vd.size=Te,Vd.buffer=yd,Vd.normalized=Ae,Vd.offset=Ke,Vd.stride=Qe;Vd.divisor!==Pd&&(g.vertexAttribDivisorANGLE(Qd,Pd),Vd.divisor=Pd)}else if(Vd.buffer&&(u.disableVertexAttribArray(Qd),Vd.buffer=null),Vd.x!==Ue||Vd.y!==Re||Vd.z!==Se||Vd.w!==We)u.vertexAttrib4f(Qd,Ue,Re,Se,We),Vd.x=
Ue,Vd.y=Re,Vd.z=Se,Vd.w=We;qf=la.pixelRatio;h&&be===qf||(be=qf,u.uniform1f(Ia.location,qf));cf=f.scale;gf=cf[0];jf=cf[1];h&&hf===gf&&of===jf||(hf=gf,of=jf,u.uniform2f(S.location,gf,jf));kf=f.scaleFract;pf=kf[0];Bf=kf[1];h&&Af===pf&&Ne===Bf||(Af=pf,Ne=Bf,u.uniform2f(ob.location,pf,Bf));Be=f.translate;lf=Be[0];Cf=Be[1];h&&mf===lf&&Ff===Cf||(mf=lf,Ff=Cf,u.uniform2f(ta.location,lf,Cf));zf=f.translateFract;Df=zf[0];uf=zf[1];h&&Ef===Df&&vf===uf||(Ef=Df,vf=uf,u.uniform2f(cc.location,Df,uf));tf=J.call(this,
la,f,h);wf=tf[0];If=tf[1];h&&xf===wf&&Jf===If||(xf=wf,Jf=If,u.uniform2f(Oa.location,wf,If));Kf=f.opacity;h&&Lf===Kf||(Lf=Kf,u.uniform1f(Fa.location,Kf));(rf=f.markerTexture)&&"framebuffer"===rf._reglType&&(rf=rf.color[0]);Qf=rf._texture;u.uniform1i(da.location,Qf.bind());Gf=f.elements;sf=null;(sf=(cg=ka(Gf))?Qc.createStream(Gf):Qc.getElements(Gf))&&u.bindBuffer(34963,sf.buffer.buffer);Rf=f.offset;if(Sf=f.count)0<fc?sf?g.drawElementsInstancedANGLE(0,Sf,sf.type,Rf<<(sf.type-5121>>1),fc):g.drawArraysInstancedANGLE(0,
Rf,Sf,fc):0>fc&&(sf?u.drawElements(0,Sf,sf.type,Rf<<(sf.type-5121>>1)):u.drawArrays(0,Rf,Sf)),la.viewportWidth=Tb,la.viewportHeight=Ma,ad&&C.destroyStream(db),Ra&&C.destroyStream(Kc),Ya&&C.destroyStream(mc),Dd&&C.destroyStream(sc),Bd&&C.destroyStream(Cc),qd&&C.destroyStream(Xc),te&&C.destroyStream(ve),je&&C.destroyStream(Ye),Je&&C.destroyStream(yd),Qf.unbind(),cg&&Qc.destroyStream(sf)}sa.unbind();Da.dirty=!0;qa.setVAO(null);d&&(Z.cpuTime+=performance.now()-e)},draw:function(a){var d,e,g,h,k,n,q,z,
E,B,H,M,L,I,K,N,J,P,T,ha,U,W,X,Y,ja,R,ca,fa,oa,sa,ra,na,La,vb,Wa,Aa,xa,gb,Sa,Hb,cb,Na,Rb,jb,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ec,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Ib,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Bd,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,we,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ye,ye,oe,Oe,Pe,Le,
re;d=D.next;d!==D.cur&&(d?u.bindFramebuffer(36160,d.framebuffer):u.bindFramebuffer(36160,null),D.cur=d);if(Da.dirty){var De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,be,nf,cf,gf,hf,jf,of,kf,pf;De=ua.dither;De!==Da.dither&&(De?u.enable(3024):u.disable(3024),Da.dither=De);Ge=ba[0];He=ba[1];if(Ge!==x[0]||He!==x[1])u.blendEquationSeparate(Ge,He),x[0]=Ge,x[1]=He;Ie=ua.depth_func;Ie!==Da.depth_func&&(u.depthFunc(Ie),Da.depth_func=Ie);Ee=aa[0];Id=aa[1];if(Ee!==p[0]||Id!==p[1])u.depthRange(Ee,
Id),p[0]=Ee,p[1]=Id;Rd=ua.depth_mask;Rd!==Da.depth_mask&&(u.depthMask(Rd),Da.depth_mask=Rd);Yd=l[0];ae=l[1];Je=l[2];yd=l[3];if(Yd!==tc[0]||ae!==tc[1]||Je!==tc[2]||yd!==tc[3])u.colorMask(Yd,ae,Je,yd),tc[0]=Yd,tc[1]=ae,tc[2]=Je,tc[3]=yd;Pd=ua.cull_enable;Pd!==Da.cull_enable&&(Pd?u.enable(2884):u.disable(2884),Da.cull_enable=Pd);Ae=ua.cull_face;Ae!==Da.cull_face&&(u.cullFace(Ae),Da.cull_face=Ae);Ke=ua.frontFace;Ke!==Da.frontFace&&(u.frontFace(Ke),Da.frontFace=Ke);ff=ua.lineWidth;ff!==Da.lineWidth&&(u.lineWidth(ff),
Da.lineWidth=ff);Xe=ua.polygonOffset_enable;Xe!==Da.polygonOffset_enable&&(Xe?u.enable(32823):u.disable(32823),Da.polygonOffset_enable=Xe);Qe=Db[0];Me=Db[1];if(Qe!==Ab[0]||Me!==Ab[1])u.polygonOffset(Qe,Me),Ab[0]=Qe,Ab[1]=Me;We=ua.sample_alpha;We!==Da.sample_alpha&&(We?u.enable(32926):u.disable(32926),Da.sample_alpha=We);Ue=ua.sample_enable;Ue!==Da.sample_enable&&(Ue?u.enable(32928):u.disable(32928),Da.sample_enable=Ue);Re=Ve[0];Se=Ve[1];if(Re!==de[0]||Se!==de[1])u.sampleCoverage(Re,Se),de[0]=Re,de[1]=
Se;Qd=ua.stencil_mask;Qd!==Da.stencil_mask&&(u.stencilMask(Qd),Da.stencil_mask=Qd);Vd=Kd[0];Te=Kd[1];be=Kd[2];if(Vd!==se[0]||Te!==se[1]||be!==se[2])u.stencilFunc(Vd,Te,be),se[0]=Vd,se[1]=Te,se[2]=be;nf=ue[0];cf=ue[1];gf=ue[2];hf=ue[3];if(nf!==Gd[0]||cf!==Gd[1]||gf!==Gd[2]||hf!==Gd[3])u.stencilOpSeparate(nf,cf,gf,hf),Gd[0]=nf,Gd[1]=cf,Gd[2]=gf,Gd[3]=hf;jf=od[0];of=od[1];kf=od[2];pf=od[3];if(jf!==he[0]||of!==he[1]||kf!==he[2]||pf!==he[3])u.stencilOpSeparate(jf,of,kf,pf),he[0]=jf,he[1]=of,he[2]=kf,he[3]=
pf}e=a.viewport;g=e.x|0;h=e.y|0;k="width"in e?e.width|0:la.framebufferWidth-g;n="height"in e?e.height|0:la.framebufferHeight-h;q=la.viewportWidth;la.viewportWidth=k;z=la.viewportHeight;la.viewportHeight=n;u.viewport(g,h,k,n);Zd[0]=g;Zd[1]=h;Zd[2]=k;Zd[3]=n;u.blendColor(0,0,0,1);m[0]=0;m[1]=0;m[2]=0;m[3]=1;u.enable(3042);Da.blend_enable=!0;u.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;u.disable(2929);Da.depth_enable=!1;E=a.viewport;B=E.x|0;H=E.y|0;M="width"in E?E.width|0:
la.framebufferWidth-B;L="height"in E?E.height|0:la.framebufferHeight-H;u.scissor(B,H,M,L);ee[0]=B;ee[1]=H;ee[2]=M;ee[3]=L;u.enable(3089);Da.scissor_enable=!0;u.disable(2960);Da.stencil_enable=!1;if(I=Da.profile)K=performance.now(),Z.count++;u.useProgram(r.program);N=Uc.angle_instanced_arrays;qa.setVAO(null);J=O.call(this,la,a,0);P=!1;T=null;ha=0;U=!1;X=W=0;Y=1;ja=0;R=5126;sa=oa=fa=ca=0;ka(J)?(P=!0,T=C.createStream(34962,J),R=T.dtype):(T=C.getBuffer(J))?R=T.dtype:"constant"in J?(Y=2,"number"===typeof J.constant?
(fa=J.constant,oa=sa=ca=0):(fa=0<J.constant.length?J.constant[0]:0,oa=1<J.constant.length?J.constant[1]:0,sa=2<J.constant.length?J.constant[2]:0,ca=3<J.constant.length?J.constant[3]:0)):(T=ka(J.buffer)?C.createStream(34962,J.buffer):C.getBuffer(J.buffer),R="type"in J?Wd[J.type]:T.dtype,U=!!J.normalized,X=J.size|0,W=J.offset|0,ja=J.stride|0,ha=J.divisor|0);ra=nc.location;na=V[ra];if(1===Y){na.buffer||u.enableVertexAttribArray(ra);La=X||1;if(na.type!==R||na.size!==La||na.buffer!==T||na.normalized!==
U||na.offset!==W||na.stride!==ja)u.bindBuffer(34962,T.buffer),u.vertexAttribPointer(ra,La,R,U,ja,W),na.type=R,na.size=La,na.buffer=T,na.normalized=U,na.offset=W,na.stride=ja;na.divisor!==ha&&(N.vertexAttribDivisorANGLE(ra,ha),na.divisor=ha)}else if(na.buffer&&(u.disableVertexAttribArray(ra),na.buffer=null),na.x!==fa||na.y!==oa||na.z!==sa||na.w!==ca)u.vertexAttrib4f(ra,fa,oa,sa,ca),na.x=fa,na.y=oa,na.z=sa,na.w=ca;vb=f.call(this,la,a,0);Wa=!1;Aa=null;xa=0;gb=!1;Hb=Sa=0;cb=1;Na=0;Rb=5126;td=Sb=Zb=jb=
0;ka(vb)?(Wa=!0,Aa=C.createStream(34962,vb),Rb=Aa.dtype):(Aa=C.getBuffer(vb))?Rb=Aa.dtype:"constant"in vb?(cb=2,"number"===typeof vb.constant?(Zb=vb.constant,Sb=td=jb=0):(Zb=0<vb.constant.length?vb.constant[0]:0,Sb=1<vb.constant.length?vb.constant[1]:0,td=2<vb.constant.length?vb.constant[2]:0,jb=3<vb.constant.length?vb.constant[3]:0)):(Aa=ka(vb.buffer)?C.createStream(34962,vb.buffer):C.getBuffer(vb.buffer),Rb="type"in vb?Wd[vb.type]:Aa.dtype,gb=!!vb.normalized,Hb=vb.size|0,Sa=vb.offset|0,Na=vb.stride|
0,xa=vb.divisor|0);Tb=ud.location;Ma=V[Tb];if(1===cb){Ma.buffer||u.enableVertexAttribArray(Tb);pb=Hb||1;if(Ma.type!==Rb||Ma.size!==pb||Ma.buffer!==Aa||Ma.normalized!==gb||Ma.offset!==Sa||Ma.stride!==Na)u.bindBuffer(34962,Aa.buffer),u.vertexAttribPointer(Tb,pb,Rb,gb,Na,Sa),Ma.type=Rb,Ma.size=pb,Ma.buffer=Aa,Ma.normalized=gb,Ma.offset=Sa,Ma.stride=Na;Ma.divisor!==xa&&(N.vertexAttribDivisorANGLE(Tb,xa),Ma.divisor=xa)}else if(Ma.buffer&&(u.disableVertexAttribArray(Tb),Ma.buffer=null),Ma.x!==Zb||Ma.y!==
Sb||Ma.z!==td||Ma.w!==jb)u.vertexAttrib4f(Tb,Zb,Sb,td,jb),Ma.x=Zb,Ma.y=Sb,Ma.z=td,Ma.w=jb;wb=c.call(this,la,a,0);hb=!1;Pa=null;uc=0;Jb=!1;db=ad=0;lc=1;Yc=0;dc=5126;qb=va=lb=kb=0;ka(wb)?(hb=!0,Pa=C.createStream(34962,wb),dc=Pa.dtype):(Pa=C.getBuffer(wb))?dc=Pa.dtype:"constant"in wb?(lc=2,"number"===typeof wb.constant?(lb=wb.constant,va=qb=kb=0):(lb=0<wb.constant.length?wb.constant[0]:0,va=1<wb.constant.length?wb.constant[1]:0,qb=2<wb.constant.length?wb.constant[2]:0,kb=3<wb.constant.length?wb.constant[3]:
0)):(Pa=ka(wb.buffer)?C.createStream(34962,wb.buffer):C.getBuffer(wb.buffer),dc="type"in wb?Wd[wb.type]:Pa.dtype,Jb=!!wb.normalized,db=wb.size|0,ad=wb.offset|0,Yc=wb.stride|0,uc=wb.divisor|0);wa=kc.location;Ua=V[wa];if(1===lc){Ua.buffer||u.enableVertexAttribArray(wa);bb=db||1;if(Ua.type!==dc||Ua.size!==bb||Ua.buffer!==Pa||Ua.normalized!==Jb||Ua.offset!==ad||Ua.stride!==Yc)u.bindBuffer(34962,Pa.buffer),u.vertexAttribPointer(wa,bb,dc,Jb,Yc,ad),Ua.type=dc,Ua.size=bb,Ua.buffer=Pa,Ua.normalized=Jb,Ua.offset=
ad,Ua.stride=Yc;Ua.divisor!==uc&&(N.vertexAttribDivisorANGLE(wa,uc),Ua.divisor=uc)}else if(Ua.buffer&&(u.disableVertexAttribArray(wa),Ua.buffer=null),Ua.x!==lb||Ua.y!==va||Ua.z!==qb||Ua.w!==kb)u.vertexAttrib4f(wa,lb,va,qb,kb),Ua.x=lb,Ua.y=va,Ua.z=qb,Ua.w=kb;Ba=y.call(this,la,a,0);eb=!1;Ja=null;Cb=0;Bb=!1;Kc=Ra=0;Kb=1;Za=0;Ub=5126;Ob=Ka=ec=ya=0;ka(Ba)?(eb=!0,Ja=C.createStream(34962,Ba),Ub=Ja.dtype):(Ja=C.getBuffer(Ba))?Ub=Ja.dtype:"constant"in Ba?(Kb=2,"number"===typeof Ba.constant?(ec=Ba.constant,
Ka=Ob=ya=0):(ec=0<Ba.constant.length?Ba.constant[0]:0,Ka=1<Ba.constant.length?Ba.constant[1]:0,Ob=2<Ba.constant.length?Ba.constant[2]:0,ya=3<Ba.constant.length?Ba.constant[3]:0)):(Ja=ka(Ba.buffer)?C.createStream(34962,Ba.buffer):C.getBuffer(Ba.buffer),Ub="type"in Ba?Wd[Ba.type]:Ja.dtype,Bb=!!Ba.normalized,Kc=Ba.size|0,Ra=Ba.offset|0,Za=Ba.stride|0,Cb=Ba.divisor|0);fb=yc.location;ib=V[fb];if(1===Kb){ib.buffer||u.enableVertexAttribArray(fb);za=Kc||1;if(ib.type!==Ub||ib.size!==za||ib.buffer!==Ja||ib.normalized!==
Bb||ib.offset!==Ra||ib.stride!==Za)u.bindBuffer(34962,Ja.buffer),u.vertexAttribPointer(fb,za,Ub,Bb,Za,Ra),ib.type=Ub,ib.size=za,ib.buffer=Ja,ib.normalized=Bb,ib.offset=Ra,ib.stride=Za;ib.divisor!==Cb&&(N.vertexAttribDivisorANGLE(fb,Cb),ib.divisor=Cb)}else if(ib.buffer&&(u.disableVertexAttribArray(fb),ib.buffer=null),ib.x!==ec||ib.y!==Ka||ib.z!==Ob||ib.w!==ya)u.vertexAttrib4f(fb,ec,Ka,Ob,ya),ib.x=ec,ib.y=Ka,ib.z=Ob,ib.w=ya;gc=b.call(this,la,a,0);Ea=!1;rb=null;sb=0;Xa=!1;mc=Ya=0;xc=1;vc=0;Va=5126;zc=
Ga=Zc=Mb=0;ka(gc)?(Ea=!0,rb=C.createStream(34962,gc),Va=rb.dtype):(rb=C.getBuffer(gc))?Va=rb.dtype:"constant"in gc?(xc=2,"number"===typeof gc.constant?(Zc=gc.constant,Ga=zc=Mb=0):(Zc=0<gc.constant.length?gc.constant[0]:0,Ga=1<gc.constant.length?gc.constant[1]:0,zc=2<gc.constant.length?gc.constant[2]:0,Mb=3<gc.constant.length?gc.constant[3]:0)):(rb=ka(gc.buffer)?C.createStream(34962,gc.buffer):C.getBuffer(gc.buffer),Va="type"in gc?Wd[gc.type]:rb.dtype,Xa=!!gc.normalized,mc=gc.size|0,Ya=gc.offset|0,
vc=gc.stride|0,sb=gc.divisor|0);Qa=ga.location;Ca=V[Qa];if(1===xc){Ca.buffer||u.enableVertexAttribArray(Qa);mb=mc||1;if(Ca.type!==Va||Ca.size!==mb||Ca.buffer!==rb||Ca.normalized!==Xa||Ca.offset!==Ya||Ca.stride!==vc)u.bindBuffer(34962,rb.buffer),u.vertexAttribPointer(Qa,mb,Va,Xa,vc,Ya),Ca.type=Va,Ca.size=mb,Ca.buffer=rb,Ca.normalized=Xa,Ca.offset=Ya,Ca.stride=vc;Ca.divisor!==sb&&(N.vertexAttribDivisorANGLE(Qa,sb),Ca.divisor=sb)}else if(Ca.buffer&&(u.disableVertexAttribArray(Qa),Ca.buffer=null),Ca.x!==
Zc||Ca.y!==Ga||Ca.z!==zc||Ca.w!==Mb)u.vertexAttrib4f(Qa,Zc,Ga,zc,Mb),Ca.x=Zc,Ca.y=Ga,Ca.z=zc,Ca.w=Mb;xb=v.call(this,la,a,0);Eb=!1;tb=null;wc=0;yb=!1;sc=Ib=0;Jd=1;Mc=0;jd=5126;Pb=bc=Vb=cd=0;ka(xb)?(Eb=!0,tb=C.createStream(34962,xb),jd=tb.dtype):(tb=C.getBuffer(xb))?jd=tb.dtype:"constant"in xb?(Jd=2,"number"===typeof xb.constant?(Vb=xb.constant,bc=Pb=cd=0):(Vb=0<xb.constant.length?xb.constant[0]:0,bc=1<xb.constant.length?xb.constant[1]:0,Pb=2<xb.constant.length?xb.constant[2]:0,cd=3<xb.constant.length?
xb.constant[3]:0)):(tb=ka(xb.buffer)?C.createStream(34962,xb.buffer):C.getBuffer(xb.buffer),jd="type"in xb?Wd[xb.type]:tb.dtype,yb=!!xb.normalized,sc=xb.size|0,Ib=xb.offset|0,Mc=xb.stride|0,wc=xb.divisor|0);Ha=$a.location;Yb=V[Ha];if(1===Jd){Yb.buffer||u.enableVertexAttribArray(Ha);nb=sc||1;if(Yb.type!==jd||Yb.size!==nb||Yb.buffer!==tb||Yb.normalized!==yb||Yb.offset!==Ib||Yb.stride!==Mc)u.bindBuffer(34962,tb.buffer),u.vertexAttribPointer(Ha,nb,jd,yb,Mc,Ib),Yb.type=jd,Yb.size=nb,Yb.buffer=tb,Yb.normalized=
yb,Yb.offset=Ib,Yb.stride=Mc;Yb.divisor!==wc&&(N.vertexAttribDivisorANGLE(Ha,wc),Yb.divisor=wc)}else if(Yb.buffer&&(u.disableVertexAttribArray(Ha),Yb.buffer=null),Yb.x!==Vb||Yb.y!==bc||Yb.z!==Pb||Yb.w!==cd)u.vertexAttrib4f(Ha,Vb,bc,Pb,cd),Yb.x=Vb,Yb.y=bc,Yb.z=Pb,Yb.w=cd;zb=A.call(this,la,a,0);Nb=!1;Qb=null;hc=0;jc=!1;Cc=Bd=0;Dc=1;Ec=0;Nc=5126;Lb=Oc=Sc=$c=0;ka(zb)?(Nb=!0,Qb=C.createStream(34962,zb),Nc=Qb.dtype):(Qb=C.getBuffer(zb))?Nc=Qb.dtype:"constant"in zb?(Dc=2,"number"===typeof zb.constant?(Sc=
zb.constant,Oc=Lb=$c=0):(Sc=0<zb.constant.length?zb.constant[0]:0,Oc=1<zb.constant.length?zb.constant[1]:0,Lb=2<zb.constant.length?zb.constant[2]:0,$c=3<zb.constant.length?zb.constant[3]:0)):(Qb=ka(zb.buffer)?C.createStream(34962,zb.buffer):C.getBuffer(zb.buffer),Nc="type"in zb?Wd[zb.type]:Qb.dtype,jc=!!zb.normalized,Cc=zb.size|0,Bd=zb.offset|0,Ec=zb.stride|0,hc=zb.divisor|0);Gb=Q.location;Pc=V[Gb];if(1===Dc){Pc.buffer||u.enableVertexAttribArray(Gb);Hc=Cc||4;if(Pc.type!==Nc||Pc.size!==Hc||Pc.buffer!==
Qb||Pc.normalized!==jc||Pc.offset!==Bd||Pc.stride!==Ec)u.bindBuffer(34962,Qb.buffer),u.vertexAttribPointer(Gb,Hc,Nc,jc,Ec,Bd),Pc.type=Nc,Pc.size=Hc,Pc.buffer=Qb,Pc.normalized=jc,Pc.offset=Bd,Pc.stride=Ec;Pc.divisor!==hc&&(N.vertexAttribDivisorANGLE(Gb,hc),Pc.divisor=hc)}else if(Pc.buffer&&(u.disableVertexAttribArray(Gb),Pc.buffer=null),Pc.x!==Sc||Pc.y!==Oc||Pc.z!==Lb||Pc.w!==$c)u.vertexAttrib4f(Gb,Sc,Oc,Lb,$c),Pc.x=Sc,Pc.y=Oc,Pc.z=Lb,Pc.w=$c;Tc=ea.call(this,la,a,0);ic=!1;Wc=null;md=0;kd=!1;Xc=qd=
0;we=1;Ld=0;le=5126;Ed=Hd=Ud=xe=0;ka(Tc)?(ic=!0,Wc=C.createStream(34962,Tc),le=Wc.dtype):(Wc=C.getBuffer(Tc))?le=Wc.dtype:"constant"in Tc?(we=2,"number"===typeof Tc.constant?(Ud=Tc.constant,Hd=Ed=xe=0):(Ud=0<Tc.constant.length?Tc.constant[0]:0,Hd=1<Tc.constant.length?Tc.constant[1]:0,Ed=2<Tc.constant.length?Tc.constant[2]:0,xe=3<Tc.constant.length?Tc.constant[3]:0)):(Wc=ka(Tc.buffer)?C.createStream(34962,Tc.buffer):C.getBuffer(Tc.buffer),le="type"in Tc?Wd[Tc.type]:Wc.dtype,kd=!!Tc.normalized,Xc=Tc.size|
0,qd=Tc.offset|0,Ld=Tc.stride|0,md=Tc.divisor|0);ed=Wb.location;Fc=V[ed];if(1===we){Fc.buffer||u.enableVertexAttribArray(ed);nd=Xc||4;if(Fc.type!==le||Fc.size!==nd||Fc.buffer!==Wc||Fc.normalized!==kd||Fc.offset!==qd||Fc.stride!==Ld)u.bindBuffer(34962,Wc.buffer),u.vertexAttribPointer(ed,nd,le,kd,Ld,qd),Fc.type=le,Fc.size=nd,Fc.buffer=Wc,Fc.normalized=kd,Fc.offset=qd,Fc.stride=Ld;Fc.divisor!==md&&(N.vertexAttribDivisorANGLE(ed,md),Fc.divisor=md)}else if(Fc.buffer&&(u.disableVertexAttribArray(ed),Fc.buffer=
null),Fc.x!==Ud||Fc.y!==Hd||Fc.z!==Ed||Fc.w!==xe)u.vertexAttrib4f(ed,Ud,Hd,Ed,xe),Fc.x=Ud,Fc.y=Hd,Fc.z=Ed,Fc.w=xe;gd=G.call(this,la,a,0);bd=!1;hd=null;zd=0;Ad=!1;ve=te=0;Ce=1;ge=0;fe=5126;ie=$d=pe=ce=0;ka(gd)?(bd=!0,hd=C.createStream(34962,gd),fe=hd.dtype):(hd=C.getBuffer(gd))?fe=hd.dtype:"constant"in gd?(Ce=2,"number"===typeof gd.constant?(pe=gd.constant,$d=ie=ce=0):(pe=0<gd.constant.length?gd.constant[0]:0,$d=1<gd.constant.length?gd.constant[1]:0,ie=2<gd.constant.length?gd.constant[2]:0,ce=3<gd.constant.length?
gd.constant[3]:0)):(hd=ka(gd.buffer)?C.createStream(34962,gd.buffer):C.getBuffer(gd.buffer),fe="type"in gd?Wd[gd.type]:hd.dtype,Ad=!!gd.normalized,ve=gd.size|0,te=gd.offset|0,ge=gd.stride|0,zd=gd.divisor|0);Ac=ma.location;Vc=V[Ac];if(1===Ce){Vc.buffer||u.enableVertexAttribArray(Ac);qe=ve||1;if(Vc.type!==fe||Vc.size!==qe||Vc.buffer!==hd||Vc.normalized!==Ad||Vc.offset!==te||Vc.stride!==ge)u.bindBuffer(34962,hd.buffer),u.vertexAttribPointer(Ac,qe,fe,Ad,ge,te),Vc.type=fe,Vc.size=qe,Vc.buffer=hd,Vc.normalized=
Ad,Vc.offset=te,Vc.stride=ge;Vc.divisor!==zd&&(N.vertexAttribDivisorANGLE(Ac,zd),Vc.divisor=zd)}else if(Vc.buffer&&(u.disableVertexAttribArray(Ac),Vc.buffer=null),Vc.x!==pe||Vc.y!==$d||Vc.z!==ie||Vc.w!==ce)u.vertexAttrib4f(Ac,pe,$d,ie,ce),Vc.x=pe,Vc.y=$d,Vc.z=ie,Vc.w=ce;u.uniform1i(t.location,!1);u.uniform1f(Ia.location,la.pixelRatio);me=a.scale;u.uniform2f(S.location,me[0],me[1]);Fd=a.scaleFract;u.uniform2f(ob.location,Fd[0],Fd[1]);Md=a.translate;u.uniform2f(ta.location,Md[0],Md[1]);Nd=a.translateFract;
u.uniform2f(cc.location,Nd[0],Nd[1]);Od=F.call(this,la,a,0);u.uniform2f(Oa.location,Od[0],Od[1]);u.uniform1f(Fa.location,a.opacity);u.uniform1i($b.location,w.bind());(je=a.markerTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);Ye=je._texture;u.uniform1i(da.location,Ye.bind());ye=a.elements;oe=null;(oe=(Oe=ka(ye))?Qc.createStream(ye):Qc.getElements(ye))&&u.bindBuffer(34963,oe.buffer.buffer);Pe=a.offset;if(Le=a.count)re=ub.instances,0<re?oe?N.drawElementsInstancedANGLE(0,Le,oe.type,Pe<<(oe.type-
5121>>1),re):N.drawArraysInstancedANGLE(0,Pe,Le,re):0>re&&(oe?u.drawElements(0,Le,oe.type,Pe<<(oe.type-5121>>1)):u.drawArrays(0,Pe,Le)),Da.dirty=!0,qa.setVAO(null),la.viewportWidth=q,la.viewportHeight=z,I&&(Z.cpuTime+=performance.now()-K),P&&C.destroyStream(T),Wa&&C.destroyStream(Aa),hb&&C.destroyStream(Pa),eb&&C.destroyStream(Ja),Ea&&C.destroyStream(rb),Eb&&C.destroyStream(tb),Nb&&C.destroyStream(Qb),ic&&C.destroyStream(Wc),bd&&C.destroyStream(hd),w.unbind(),Ye.unbind(),Oe&&Qc.destroyStream(oe)},
scope:function(b,c,f){var k,l,m,p,r,u,t,v,w,y,x,D,O,J,F,M,A,G,V,K,ba,Q,P,aa,S,ia,Y,ea,da,ga,pa,ma,na,qa,ta,sa,ra,Ia,Fa,xa,Oa,Ab,Na,Db,$a,yc,Ma,pb,wb,hb,Pa,ob,Jb,jb,db,ud,tc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Wb,Kb,Za,Ub,ya,cc,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,ec,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,nc,sc,$b,Mc,kc,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,od,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,Kd,Xc,Uc,ee,Zd,Gd,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,he,se,ue,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,
me,Fd,Md,Nd,Od,je,de,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,Ve,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,qf,nf,cf,gf,hf,jf,of,kf,pf,Af,Bf,Ne,Be,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Jf,Kf,Lf,rf,Qf,Gf,sf,cg,Rf,Sf,pg,df,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,ef,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;k=b.viewport;l=k.x|0;m=k.y|0;p="width"in k?k.width|0:la.framebufferWidth-l;r="height"in k?k.height|0:la.framebufferHeight-
m;u=la.viewportWidth;la.viewportWidth=p;t=la.viewportHeight;la.viewportHeight=r;v=Bd[0];Bd[0]=l;w=Bd[1];Bd[1]=m;y=Bd[2];Bd[2]=p;x=Bd[3];Bd[3]=r;D=E[0];E[0]=0;O=E[1];E[1]=0;J=E[2];E[2]=0;F=E[3];E[3]=1;M=ua.blend_enable;ua.blend_enable=!0;A=ja[0];ja[0]=770;G=ja[1];ja[1]=771;V=ja[2];ja[2]=773;K=ja[3];ja[3]=1;ba=ua.depth_enable;ua.depth_enable=!1;Q=b.viewport;P=Q.x|0;aa=Q.y|0;S="width"in Q?Q.width|0:la.framebufferWidth-P;ia="height"in Q?Q.height|0:la.framebufferHeight-aa;Y=we[0];we[0]=P;ea=we[1];we[1]=
aa;da=we[2];we[2]=S;ga=we[3];we[3]=ia;pa=ua.scissor_enable;ua.scissor_enable=!0;ma=ua.stencil_enable;ua.stencil_enable=!1;if(na=Da.profile)qa=performance.now(),Z.count++;ta=b.elements;sa=null;sa=(ra=ka(ta))?Qc.createStream(ta):Qc.getElements(ta);Ia=ub.elements;ub.elements=sa;Fa=b.offset;xa=ub.offset;ub.offset=Fa;Oa=b.count;Ab=ub.count;ub.count=Oa;Na=ub.primitive;ub.primitive=0;Db=ha[45];ha[45]=!1;$a=b.markerTexture;yc=ha[48];ha[48]=$a;Ma=b.opacity;pb=ha[10];ha[10]=Ma;wb=B.call(this,la,b,f);hb=ha[46];
ha[46]=wb;Pa=ha[47];ha[47]=N;ob=la.pixelRatio;Jb=ha[34];ha[34]=ob;jb=b.scale;db=ha[6];ha[6]=jb;ud=b.scaleFract;tc=ha[7];ha[7]=ud;dc=b.translate;kb=ha[8];ha[8]=dc;lb=b.translateFract;va=ha[9];ha[9]=lb;qb=n.call(this,la,b,f);wa=!1;Ua=null;bb=0;Ba=!1;Ja=eb=0;Cb=1;Bb=0;Ra=5126;Ub=Za=Kb=Wb=0;ka(qb)?(wa=!0,Ua=C.createStream(34962,qb),Ra=Ua.dtype):(Ua=C.getBuffer(qb))?Ra=Ua.dtype:"constant"in qb?(Cb=2,"number"===typeof qb.constant?(Kb=qb.constant,Za=Ub=Wb=0):(Kb=0<qb.constant.length?qb.constant[0]:0,Za=
1<qb.constant.length?qb.constant[1]:0,Ub=2<qb.constant.length?qb.constant[2]:0,Wb=3<qb.constant.length?qb.constant[3]:0)):(Ua=ka(qb.buffer)?C.createStream(34962,qb.buffer):C.getBuffer(qb.buffer),Ra="type"in qb?Wd[qb.type]:Ua.dtype,Ba=!!qb.normalized,Ja=qb.size|0,eb=qb.offset|0,Bb=qb.stride|0,bb=qb.divisor|0);ya=H.buffer;H.buffer=Ua;cc=H.divisor;H.divisor=bb;Ka=H.normalized;H.normalized=Ba;Ob=H.offset;H.offset=eb;fb=H.size;H.size=Ja;ib=H.state;H.state=Cb;za=H.stride;H.stride=Bb;gc=H.type;H.type=Ra;
Ea=H.w;H.w=Wb;rb=H.x;H.x=Kb;sb=H.y;H.y=Za;Xa=H.z;H.z=Ub;Ya=R.call(this,la,b,f);mc=!1;xc=null;vc=0;Va=!1;ec=Mb=0;Ga=1;zc=0;Qa=5126;Eb=xb=mb=Ca=0;ka(Ya)?(mc=!0,xc=C.createStream(34962,Ya),Qa=xc.dtype):(xc=C.getBuffer(Ya))?Qa=xc.dtype:"constant"in Ya?(Ga=2,"number"===typeof Ya.constant?(mb=Ya.constant,xb=Eb=Ca=0):(mb=0<Ya.constant.length?Ya.constant[0]:0,xb=1<Ya.constant.length?Ya.constant[1]:0,Eb=2<Ya.constant.length?Ya.constant[2]:0,Ca=3<Ya.constant.length?Ya.constant[3]:0)):(xc=ka(Ya.buffer)?C.createStream(34962,
Ya.buffer):C.getBuffer(Ya.buffer),Qa="type"in Ya?Wd[Ya.type]:xc.dtype,Va=!!Ya.normalized,ec=Ya.size|0,Mb=Ya.offset|0,zc=Ya.stride|0,vc=Ya.divisor|0);tb=I.buffer;I.buffer=xc;wc=I.divisor;I.divisor=vc;yb=I.normalized;I.normalized=Va;nc=I.offset;I.offset=Mb;sc=I.size;I.size=ec;$b=I.state;I.state=Ga;Mc=I.stride;I.stride=zc;kc=I.type;I.type=Qa;cd=I.w;I.w=Ca;Vb=I.x;I.x=mb;bc=I.y;I.y=xb;Pb=I.z;I.z=Eb;Ha=Ib.call(this,la,b,f);Yb=!1;nb=null;zb=0;Nb=!1;hc=Qb=0;jc=1;od=0;Cc=5126;$c=Nc=Ec=Dc=0;ka(Ha)?(Yb=!0,nb=
C.createStream(34962,Ha),Cc=nb.dtype):(nb=C.getBuffer(Ha))?Cc=nb.dtype:"constant"in Ha?(jc=2,"number"===typeof Ha.constant?(Ec=Ha.constant,Nc=$c=Dc=0):(Ec=0<Ha.constant.length?Ha.constant[0]:0,Nc=1<Ha.constant.length?Ha.constant[1]:0,$c=2<Ha.constant.length?Ha.constant[2]:0,Dc=3<Ha.constant.length?Ha.constant[3]:0)):(nb=ka(Ha.buffer)?C.createStream(34962,Ha.buffer):C.getBuffer(Ha.buffer),Cc="type"in Ha?Wd[Ha.type]:nb.dtype,Nb=!!Ha.normalized,hc=Ha.size|0,Qb=Ha.offset|0,od=Ha.stride|0,zb=Ha.divisor|
0);Sc=e.buffer;e.buffer=nb;Oc=e.divisor;e.divisor=zb;Lb=e.normalized;e.normalized=Nb;Gb=e.offset;e.offset=Qb;Pc=e.size;e.size=hc;Hc=e.state;e.state=jc;Tc=e.stride;e.stride=od;ic=e.type;e.type=Cc;Wc=e.w;e.w=Dc;md=e.x;e.x=Ec;kd=e.y;e.y=Nc;Kd=e.z;e.z=$c;Xc=g.call(this,la,b,f);Uc=!1;ee=null;Zd=0;Gd=!1;Hd=Ud=0;Ed=1;ed=0;Fc=5126;hd=bd=gd=nd=0;ka(Xc)?(Uc=!0,ee=C.createStream(34962,Xc),Fc=ee.dtype):(ee=C.getBuffer(Xc))?Fc=ee.dtype:"constant"in Xc?(Ed=2,"number"===typeof Xc.constant?(gd=Xc.constant,bd=hd=
nd=0):(gd=0<Xc.constant.length?Xc.constant[0]:0,bd=1<Xc.constant.length?Xc.constant[1]:0,hd=2<Xc.constant.length?Xc.constant[2]:0,nd=3<Xc.constant.length?Xc.constant[3]:0)):(ee=ka(Xc.buffer)?C.createStream(34962,Xc.buffer):C.getBuffer(Xc.buffer),Fc="type"in Xc?Wd[Xc.type]:ee.dtype,Gd=!!Xc.normalized,Hd=Xc.size|0,Ud=Xc.offset|0,ed=Xc.stride|0,Zd=Xc.divisor|0);zd=d.buffer;d.buffer=ee;Ad=d.divisor;d.divisor=Zd;he=d.normalized;d.normalized=Gd;se=d.offset;d.offset=Ud;ue=d.size;d.size=Hd;ge=d.state;d.state=
Ed;fe=d.stride;d.stride=ed;ce=d.type;d.type=Fc;pe=d.w;d.w=nd;$d=d.x;d.x=gd;ie=d.y;d.y=bd;Ac=d.z;d.z=hd;Vc=z.call(this,la,b,f);qe=!1;me=null;Fd=0;Md=!1;Od=Nd=0;je=1;de=0;ye=5126;Le=Pe=Oe=oe=0;ka(Vc)?(qe=!0,me=C.createStream(34962,Vc),ye=me.dtype):(me=C.getBuffer(Vc))?ye=me.dtype:"constant"in Vc?(je=2,"number"===typeof Vc.constant?(Oe=Vc.constant,Pe=Le=oe=0):(Oe=0<Vc.constant.length?Vc.constant[0]:0,Pe=1<Vc.constant.length?Vc.constant[1]:0,Le=2<Vc.constant.length?Vc.constant[2]:0,oe=3<Vc.constant.length?
Vc.constant[3]:0)):(me=ka(Vc.buffer)?C.createStream(34962,Vc.buffer):C.getBuffer(Vc.buffer),ye="type"in Vc?Wd[Vc.type]:me.dtype,Md=!!Vc.normalized,Od=Vc.size|0,Nd=Vc.offset|0,de=Vc.stride|0,Fd=Vc.divisor|0);re=U.buffer;U.buffer=me;De=U.divisor;U.divisor=Fd;Ge=U.normalized;U.normalized=Md;He=U.offset;U.offset=Nd;Ie=U.size;U.size=Od;Ee=U.state;U.state=je;Id=U.stride;U.stride=de;Rd=U.type;U.type=ye;Yd=U.w;U.w=oe;ae=U.x;U.x=Oe;Je=U.y;U.y=Pe;yd=U.z;U.z=Le;Pd=W.call(this,la,b,f);Ae=!1;Ke=null;Ve=0;Xe=!1;
Me=Qe=0;We=1;Ue=0;Re=5126;Te=Vd=Qd=Se=0;ka(Pd)?(Ae=!0,Ke=C.createStream(34962,Pd),Re=Ke.dtype):(Ke=C.getBuffer(Pd))?Re=Ke.dtype:"constant"in Pd?(We=2,"number"===typeof Pd.constant?(Qd=Pd.constant,Vd=Te=Se=0):(Qd=0<Pd.constant.length?Pd.constant[0]:0,Vd=1<Pd.constant.length?Pd.constant[1]:0,Te=2<Pd.constant.length?Pd.constant[2]:0,Se=3<Pd.constant.length?Pd.constant[3]:0)):(Ke=ka(Pd.buffer)?C.createStream(34962,Pd.buffer):C.getBuffer(Pd.buffer),Re="type"in Pd?Wd[Pd.type]:Ke.dtype,Xe=!!Pd.normalized,
Me=Pd.size|0,Qe=Pd.offset|0,Ue=Pd.stride|0,Ve=Pd.divisor|0);qf=q.buffer;q.buffer=Ke;nf=q.divisor;q.divisor=Ve;cf=q.normalized;q.normalized=Xe;gf=q.offset;q.offset=Qe;hf=q.size;q.size=Me;jf=q.state;q.state=We;of=q.stride;q.stride=Ue;kf=q.type;q.type=Re;pf=q.w;q.w=Se;Af=q.x;q.x=Qd;Bf=q.y;q.y=Vd;Ne=q.z;q.z=Te;Be=oa.call(this,la,b,f);lf=!1;mf=null;Cf=0;Ff=!1;Df=zf=0;Ef=1;uf=0;vf=5126;If=xf=wf=tf=0;ka(Be)?(lf=!0,mf=C.createStream(34962,Be),vf=mf.dtype):(mf=C.getBuffer(Be))?vf=mf.dtype:"constant"in Be?
(Ef=2,"number"===typeof Be.constant?(wf=Be.constant,xf=If=tf=0):(wf=0<Be.constant.length?Be.constant[0]:0,xf=1<Be.constant.length?Be.constant[1]:0,If=2<Be.constant.length?Be.constant[2]:0,tf=3<Be.constant.length?Be.constant[3]:0)):(mf=ka(Be.buffer)?C.createStream(34962,Be.buffer):C.getBuffer(Be.buffer),vf="type"in Be?Wd[Be.type]:mf.dtype,Ff=!!Be.normalized,Df=Be.size|0,zf=Be.offset|0,uf=Be.stride|0,Cf=Be.divisor|0);Jf=L.buffer;L.buffer=mf;Kf=L.divisor;L.divisor=Cf;Lf=L.normalized;L.normalized=Ff;
rf=L.offset;L.offset=zf;Qf=L.size;L.size=Df;Gf=L.state;L.state=Ef;sf=L.stride;L.stride=uf;cg=L.type;L.type=vf;Rf=L.w;L.w=tf;Sf=L.x;L.x=wf;pg=L.y;L.y=xf;df=L.z;L.z=If;$e=fa.call(this,la,b,f);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ka($e)?(Mf=!0,Nf=C.createStream(34962,$e),Tf=Nf.dtype):(Nf=C.getBuffer($e))?Tf=Nf.dtype:"constant"in $e?(hg=2,"number"===typeof $e.constant?(Xf=$e.constant,Yf=ig=Wf=0):(Xf=0<$e.constant.length?$e.constant[0]:0,Yf=1<$e.constant.length?$e.constant[1]:
0,ig=2<$e.constant.length?$e.constant[2]:0,Wf=3<$e.constant.length?$e.constant[3]:0)):(Nf=ka($e.buffer)?C.createStream(34962,$e.buffer):C.getBuffer($e.buffer),Tf="type"in $e?Wd[$e.type]:Nf.dtype,eg=!!$e.normalized,gg=$e.size|0,fg=$e.offset|0,Vf=$e.stride|0,dg=$e.divisor|0);qg=a.buffer;a.buffer=Nf;rg=a.divisor;a.divisor=dg;sg=a.normalized;a.normalized=eg;tg=a.offset;a.offset=fg;ug=a.size;a.size=gg;vg=a.state;a.state=hg;wg=a.stride;a.stride=Vf;xg=a.type;a.type=Tf;yg=a.w;a.w=Wf;zg=a.x;a.x=Xf;Ag=a.y;
a.y=Yf;ef=a.z;a.z=ig;af=h.call(this,la,b,f);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;ka(af)?(Of=!0,Pf=C.createStream(34962,af),Uf=Pf.dtype):(Pf=C.getBuffer(af))?Uf=Pf.dtype:"constant"in af?(ng=2,"number"===typeof af.constant?(ag=af.constant,bg=og=$f=0):(ag=0<af.constant.length?af.constant[0]:0,bg=1<af.constant.length?af.constant[1]:0,og=2<af.constant.length?af.constant[2]:0,$f=3<af.constant.length?af.constant[3]:0)):(Pf=ka(af.buffer)?C.createStream(34962,af.buffer):C.getBuffer(af.buffer),
Uf="type"in af?Wd[af.type]:Pf.dtype,kg=!!af.normalized,mg=af.size|0,lg=af.offset|0,Zf=af.stride|0,jg=af.divisor|0);Bg=X.buffer;X.buffer=Pf;Cg=X.divisor;X.divisor=jg;Dg=X.normalized;X.normalized=kg;Eg=X.offset;X.offset=lg;Fg=X.size;X.size=mg;Gg=X.state;X.state=ng;Hg=X.stride;X.stride=Zf;Ig=X.type;X.type=Uf;Jg=X.w;X.w=$f;Kg=X.x;X.x=ag;Lg=X.y;X.y=bg;Mg=X.z;X.z=og;Ng=T.vert;T.vert=44;Og=T.frag;T.frag=43;Da.dirty=!0;c(la,b,f);la.viewportWidth=u;la.viewportHeight=t;Bd[0]=v;Bd[1]=w;Bd[2]=y;Bd[3]=x;E[0]=
D;E[1]=O;E[2]=J;E[3]=F;ua.blend_enable=M;ja[0]=A;ja[1]=G;ja[2]=V;ja[3]=K;ua.depth_enable=ba;we[0]=Y;we[1]=ea;we[2]=da;we[3]=ga;ua.scissor_enable=pa;ua.stencil_enable=ma;na&&(Z.cpuTime+=performance.now()-qa);ra&&Qc.destroyStream(sa);ub.elements=Ia;ub.offset=xa;ub.count=Ab;ub.primitive=Na;ha[45]=Db;ha[48]=yc;ha[10]=pb;ha[46]=hb;ha[47]=Pa;ha[34]=Jb;ha[6]=db;ha[7]=tc;ha[8]=kb;ha[9]=va;wa&&C.destroyStream(Ua);H.buffer=ya;H.divisor=cc;H.normalized=Ka;H.offset=Ob;H.size=fb;H.state=ib;H.stride=za;H.type=
gc;H.w=Ea;H.x=rb;H.y=sb;H.z=Xa;mc&&C.destroyStream(xc);I.buffer=tb;I.divisor=wc;I.normalized=yb;I.offset=nc;I.size=sc;I.state=$b;I.stride=Mc;I.type=kc;I.w=cd;I.x=Vb;I.y=bc;I.z=Pb;Yb&&C.destroyStream(nb);e.buffer=Sc;e.divisor=Oc;e.normalized=Lb;e.offset=Gb;e.size=Pc;e.state=Hc;e.stride=Tc;e.type=ic;e.w=Wc;e.x=md;e.y=kd;e.z=Kd;Uc&&C.destroyStream(ee);d.buffer=zd;d.divisor=Ad;d.normalized=he;d.offset=se;d.size=ue;d.state=ge;d.stride=fe;d.type=ce;d.w=pe;d.x=$d;d.y=ie;d.z=Ac;qe&&C.destroyStream(me);U.buffer=
re;U.divisor=De;U.normalized=Ge;U.offset=He;U.size=Ie;U.state=Ee;U.stride=Id;U.type=Rd;U.w=Yd;U.x=ae;U.y=Je;U.z=yd;Ae&&C.destroyStream(Ke);q.buffer=qf;q.divisor=nf;q.normalized=cf;q.offset=gf;q.size=hf;q.state=jf;q.stride=of;q.type=kf;q.w=pf;q.x=Af;q.y=Bf;q.z=Ne;lf&&C.destroyStream(mf);L.buffer=Jf;L.divisor=Kf;L.normalized=Lf;L.offset=rf;L.size=Qf;L.state=Gf;L.stride=sf;L.type=cg;L.w=Rf;L.x=Sf;L.y=pg;L.z=df;Mf&&C.destroyStream(Nf);a.buffer=qg;a.divisor=rg;a.normalized=sg;a.offset=tg;a.size=ug;a.state=
vg;a.stride=wg;a.type=xg;a.w=yg;a.x=zg;a.y=Ag;a.z=ef;Of&&C.destroyStream(Pf);X.buffer=Bg;X.divisor=Cg;X.normalized=Dg;X.offset=Eg;X.size=Fg;X.state=Gg;X.stride=Hg;X.type=Ig;X.w=Jg;X.x=Kg;X.y=Lg;X.z=Mg;T.vert=Ng;T.frag=Og;Da.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(k,A,r,O,f,c,y,b,v,R,ea,G,F,w,B,N,n,H,ca,I,Ib,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb,
ec,na,Na,Y,K,M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta,cc,nc,kc,ud){var yc,V,C,la,Da,ub,Qc,Uc,D,u,ka,ua,T,ha,qa,E,m,ba,x,ja,ia,l,tc,aa,p,Db,Ab,Ve,de,we,ee,Kd,se,od,he,ue,Gd,Bd,Zd;yc=k.attributes;V=k.buffer;C=k.context;la=k.current;Da=k.draw;ub=k.elements;Qc=k.extensions;Uc=k.framebuffer;D=k.gl;u=k.isBufferArgs;ka=k.next;ua=k.shader;T=k.uniforms;ha=k.vao;qa=ka.blend_color;E=la.blend_color;m=ka.blend_equation;ba=la.blend_equation;x=ka.blend_func;ja=la.blend_func;ia=ka.colorMask;l=la.colorMask;
tc=ka.depth_range;aa=la.depth_range;p=ka.polygonOffset_offset;Db=la.polygonOffset_offset;Ab=ka.sample_coverage;Ve=la.sample_coverage;de=ka.scissor_box;we=la.scissor_box;ee=ka.stencil_func;Kd=la.stencil_func;se=ka.stencil_opBack;od=la.stencil_opBack;he=ka.stencil_opFront;ue=la.stencil_opFront;Gd=ka.viewport;Bd=la.viewport;Zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,e,g,f,h;c=Uc.next;c!==Uc.cur&&(c?D.bindFramebuffer(36160,
c.framebuffer):D.bindFramebuffer(36160,null),Uc.cur=c);if(la.dirty){var k,n,q,r,v,w,y,x,z,B,O,H,F,L,G,N,I,T,U,W,ea,X,R,ca,fa,pa,ua,qa,oa,Aa,ld,gb,Sa,Hb;k=ka.dither;k!==la.dither&&(k?D.enable(3024):D.disable(3024),la.dither=k);n=m[0];q=m[1];if(n!==ba[0]||q!==ba[1])D.blendEquationSeparate(n,q),ba[0]=n,ba[1]=q;r=ka.depth_func;r!==la.depth_func&&(D.depthFunc(r),la.depth_func=r);v=tc[0];w=tc[1];if(v!==aa[0]||w!==aa[1])D.depthRange(v,w),aa[0]=v,aa[1]=w;y=ka.depth_mask;y!==la.depth_mask&&(D.depthMask(y),
la.depth_mask=y);x=ia[0];z=ia[1];B=ia[2];O=ia[3];if(x!==l[0]||z!==l[1]||B!==l[2]||O!==l[3])D.colorMask(x,z,B,O),l[0]=x,l[1]=z,l[2]=B,l[3]=O;H=ka.cull_enable;H!==la.cull_enable&&(H?D.enable(2884):D.disable(2884),la.cull_enable=H);F=ka.cull_face;F!==la.cull_face&&(D.cullFace(F),la.cull_face=F);L=ka.frontFace;L!==la.frontFace&&(D.frontFace(L),la.frontFace=L);G=ka.lineWidth;G!==la.lineWidth&&(D.lineWidth(G),la.lineWidth=G);N=ka.polygonOffset_enable;N!==la.polygonOffset_enable&&(N?D.enable(32823):D.disable(32823),
la.polygonOffset_enable=N);I=p[0];T=p[1];if(I!==Db[0]||T!==Db[1])D.polygonOffset(I,T),Db[0]=I,Db[1]=T;U=ka.sample_alpha;U!==la.sample_alpha&&(U?D.enable(32926):D.disable(32926),la.sample_alpha=U);W=ka.sample_enable;W!==la.sample_enable&&(W?D.enable(32928):D.disable(32928),la.sample_enable=W);ea=Ab[0];X=Ab[1];if(ea!==Ve[0]||X!==Ve[1])D.sampleCoverage(ea,X),Ve[0]=ea,Ve[1]=X;R=ka.stencil_mask;R!==la.stencil_mask&&(D.stencilMask(R),la.stencil_mask=R);ca=ee[0];fa=ee[1];pa=ee[2];if(ca!==Kd[0]||fa!==Kd[1]||
pa!==Kd[2])D.stencilFunc(ca,fa,pa),Kd[0]=ca,Kd[1]=fa,Kd[2]=pa;ua=he[0];qa=he[1];oa=he[2];Aa=he[3];if(ua!==ue[0]||qa!==ue[1]||oa!==ue[2]||Aa!==ue[3])D.stencilOpSeparate(ua,qa,oa,Aa),ue[0]=ua,ue[1]=qa,ue[2]=oa,ue[3]=Aa;ld=se[0];gb=se[1];Sa=se[2];Hb=se[3];if(ld!==od[0]||gb!==od[1]||Sa!==od[2]||Hb!==od[3])D.stencilOpSeparate(ld,gb,Sa,Hb),od[0]=ld,od[1]=gb,od[2]=Sa,od[3]=Hb}D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);la.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);ja[0]=770;
ja[1]=771;ja[2]=773;ja[3]=1;D.disable(2929);la.depth_enable=!1;D.enable(3089);la.scissor_enable=!0;D.disable(2960);la.stencil_enable=!1;if(d=la.profile)e=performance.now(),A.count+=b;D.useProgram(ra.program);g=Qc.angle_instanced_arrays;var cb;ha.setVAO(null);D.uniform1i(t.location,!1);D.uniform1i(Oa.location,sa.bind());cb=Da.instances;for(f=0;f<b;++f){h=a[f];var fc,Rb,Ib,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,Gd,Ka,Ob,fb,ib,za,gc,Ea,rb,
sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,de,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,be,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ye,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,qf,nf,cf,gf,hf,jf,of,kf,pf,Af,Bf,Ne,Be,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Jf,Kf,Lf,rf,Qf,Gf,sf;fc=h.viewport;Rb=fc.x|0;Ib=fc.y|0;Zb="width"in
fc?fc.width|0:C.framebufferWidth-Rb;Sb="height"in fc?fc.height|0:C.framebufferHeight-Ib;td=C.viewportWidth;C.viewportWidth=Zb;Tb=C.viewportHeight;C.viewportHeight=Sb;D.viewport(Rb,Ib,Zb,Sb);Bd[0]=Rb;Bd[1]=Ib;Bd[2]=Zb;Bd[3]=Sb;Ma=h.viewport;pb=Ma.x|0;wb=Ma.y|0;hb="width"in Ma?Ma.width|0:C.framebufferWidth-pb;Pa="height"in Ma?Ma.height|0:C.framebufferHeight-wb;D.scissor(pb,wb,hb,Pa);we[0]=pb;we[1]=wb;we[2]=hb;we[3]=Pa;uc=xa.call(this,C,h,f);Jb=!1;ad=null;db=0;lc=!1;dc=Yc=0;kb=1;lb=0;va=5126;bb=Ua=wa=
qb=0;u(uc)?(Jb=!0,ad=V.createStream(34962,uc),va=ad.dtype):(ad=V.getBuffer(uc))?va=ad.dtype:"constant"in uc?(kb=2,"number"===typeof uc.constant?(wa=uc.constant,Ua=bb=qb=0):(wa=0<uc.constant.length?uc.constant[0]:0,Ua=1<uc.constant.length?uc.constant[1]:0,bb=2<uc.constant.length?uc.constant[2]:0,qb=3<uc.constant.length?uc.constant[3]:0)):(ad=u(uc.buffer)?V.createStream(34962,uc.buffer):V.getBuffer(uc.buffer),va="type"in uc?Zd[uc.type]:ad.dtype,lc=!!uc.normalized,dc=uc.size|0,Yc=uc.offset|0,lb=uc.stride|
0,db=uc.divisor|0);Ba=cc.location;eb=yc[Ba];if(1===kb){eb.buffer||D.enableVertexAttribArray(Ba);Ja=dc||1;if(eb.type!==va||eb.size!==Ja||eb.buffer!==ad||eb.normalized!==lc||eb.offset!==Yc||eb.stride!==lb)D.bindBuffer(34962,ad.buffer),D.vertexAttribPointer(Ba,Ja,va,lc,lb,Yc),eb.type=va,eb.size=Ja,eb.buffer=ad,eb.normalized=lc,eb.offset=Yc,eb.stride=lb;eb.divisor!==db&&(g.vertexAttribDivisorANGLE(Ba,db),eb.divisor=db)}else if(eb.buffer&&(D.disableVertexAttribArray(Ba),eb.buffer=null),eb.x!==wa||eb.y!==
Ua||eb.z!==bb||eb.w!==qb)D.vertexAttrib4f(Ba,wa,Ua,bb,qb),eb.x=wa,eb.y=Ua,eb.z=bb,eb.w=qb;Cb=jb.call(this,C,h,f);Bb=!1;Ra=null;Kc=0;Kb=!1;Ub=Za=0;ya=1;Gd=0;Ka=5126;za=ib=fb=Ob=0;u(Cb)?(Bb=!0,Ra=V.createStream(34962,Cb),Ka=Ra.dtype):(Ra=V.getBuffer(Cb))?Ka=Ra.dtype:"constant"in Cb?(ya=2,"number"===typeof Cb.constant?(fb=Cb.constant,ib=za=Ob=0):(fb=0<Cb.constant.length?Cb.constant[0]:0,ib=1<Cb.constant.length?Cb.constant[1]:0,za=2<Cb.constant.length?Cb.constant[2]:0,Ob=3<Cb.constant.length?Cb.constant[3]:
0)):(Ra=u(Cb.buffer)?V.createStream(34962,Cb.buffer):V.getBuffer(Cb.buffer),Ka="type"in Cb?Zd[Cb.type]:Ra.dtype,Kb=!!Cb.normalized,Ub=Cb.size|0,Za=Cb.offset|0,Gd=Cb.stride|0,Kc=Cb.divisor|0);gc=kc.location;Ea=yc[gc];if(1===ya){Ea.buffer||D.enableVertexAttribArray(gc);rb=Ub||1;if(Ea.type!==Ka||Ea.size!==rb||Ea.buffer!==Ra||Ea.normalized!==Kb||Ea.offset!==Za||Ea.stride!==Gd)D.bindBuffer(34962,Ra.buffer),D.vertexAttribPointer(gc,rb,Ka,Kb,Gd,Za),Ea.type=Ka,Ea.size=rb,Ea.buffer=Ra,Ea.normalized=Kb,Ea.offset=
Za,Ea.stride=Gd;Ea.divisor!==Kc&&(g.vertexAttribDivisorANGLE(gc,Kc),Ea.divisor=Kc)}else if(Ea.buffer&&(D.disableVertexAttribArray(gc),Ea.buffer=null),Ea.x!==fb||Ea.y!==ib||Ea.z!==za||Ea.w!==Ob)D.vertexAttrib4f(gc,fb,ib,za,Ob),Ea.x=fb,Ea.y=ib,Ea.z=za,Ea.w=Ob;sb=ec.call(this,C,h,f);Xa=!1;Ya=null;mc=0;xc=!1;Va=vc=0;Mb=1;Zc=0;Ga=5126;mb=Ca=Qa=zc=0;u(sb)?(Xa=!0,Ya=V.createStream(34962,sb),Ga=Ya.dtype):(Ya=V.getBuffer(sb))?Ga=Ya.dtype:"constant"in sb?(Mb=2,"number"===typeof sb.constant?(Qa=sb.constant,
Ca=mb=zc=0):(Qa=0<sb.constant.length?sb.constant[0]:0,Ca=1<sb.constant.length?sb.constant[1]:0,mb=2<sb.constant.length?sb.constant[2]:0,zc=3<sb.constant.length?sb.constant[3]:0)):(Ya=u(sb.buffer)?V.createStream(34962,sb.buffer):V.getBuffer(sb.buffer),Ga="type"in sb?Zd[sb.type]:Ya.dtype,xc=!!sb.normalized,Va=sb.size|0,vc=sb.offset|0,Zc=sb.stride|0,mc=sb.divisor|0);xb=nc.location;Eb=yc[xb];if(1===Mb){Eb.buffer||D.enableVertexAttribArray(xb);tb=Va||1;if(Eb.type!==Ga||Eb.size!==tb||Eb.buffer!==Ya||Eb.normalized!==
xc||Eb.offset!==vc||Eb.stride!==Zc)D.bindBuffer(34962,Ya.buffer),D.vertexAttribPointer(xb,tb,Ga,xc,Zc,vc),Eb.type=Ga,Eb.size=tb,Eb.buffer=Ya,Eb.normalized=xc,Eb.offset=vc,Eb.stride=Zc;Eb.divisor!==mc&&(g.vertexAttribDivisorANGLE(xb,mc),Eb.divisor=mc)}else if(Eb.buffer&&(D.disableVertexAttribArray(xb),Eb.buffer=null),Eb.x!==Qa||Eb.y!==Ca||Eb.z!==mb||Eb.w!==zc)D.vertexAttrib4f(xb,Qa,Ca,mb,zc),Eb.x=Qa,Eb.y=Ca,Eb.z=mb,Eb.w=zc;wc=na.call(this,C,h,f);yb=!1;Dd=null;sc=0;Jd=!1;jd=Mc=0;cd=1;Vb=0;bc=5126;nb=
Yb=Ha=Pb=0;u(wc)?(yb=!0,Dd=V.createStream(34962,wc),bc=Dd.dtype):(Dd=V.getBuffer(wc))?bc=Dd.dtype:"constant"in wc?(cd=2,"number"===typeof wc.constant?(Ha=wc.constant,Yb=nb=Pb=0):(Ha=0<wc.constant.length?wc.constant[0]:0,Yb=1<wc.constant.length?wc.constant[1]:0,nb=2<wc.constant.length?wc.constant[2]:0,Pb=3<wc.constant.length?wc.constant[3]:0)):(Dd=u(wc.buffer)?V.createStream(34962,wc.buffer):V.getBuffer(wc.buffer),bc="type"in wc?Zd[wc.type]:Dd.dtype,Jd=!!wc.normalized,jd=wc.size|0,Mc=wc.offset|0,Vb=
wc.stride|0,sc=wc.divisor|0);zb=ud.location;Nb=yc[zb];if(1===cd){Nb.buffer||D.enableVertexAttribArray(zb);Qb=jd||1;if(Nb.type!==bc||Nb.size!==Qb||Nb.buffer!==Dd||Nb.normalized!==Jd||Nb.offset!==Mc||Nb.stride!==Vb)D.bindBuffer(34962,Dd.buffer),D.vertexAttribPointer(zb,Qb,bc,Jd,Vb,Mc),Nb.type=bc,Nb.size=Qb,Nb.buffer=Dd,Nb.normalized=Jd,Nb.offset=Mc,Nb.stride=Vb;Nb.divisor!==sc&&(g.vertexAttribDivisorANGLE(zb,sc),Nb.divisor=sc)}else if(Nb.buffer&&(D.disableVertexAttribArray(zb),Nb.buffer=null),Nb.x!==
Ha||Nb.y!==Yb||Nb.z!==nb||Nb.w!==Pb)D.vertexAttrib4f(zb,Ha,Yb,nb,Pb),Nb.x=Ha,Nb.y=Yb,Nb.z=nb,Nb.w=Pb;hc=Na.call(this,C,h,f);jc=!1;de=null;Cc=0;Dc=!1;Nc=Ec=0;$c=1;Sc=0;Oc=5126;Hc=Pc=Gb=Lb=0;u(hc)?(jc=!0,de=V.createStream(34962,hc),Oc=de.dtype):(de=V.getBuffer(hc))?Oc=de.dtype:"constant"in hc?($c=2,"number"===typeof hc.constant?(Gb=hc.constant,Pc=Hc=Lb=0):(Gb=0<hc.constant.length?hc.constant[0]:0,Pc=1<hc.constant.length?hc.constant[1]:0,Hc=2<hc.constant.length?hc.constant[2]:0,Lb=3<hc.constant.length?
hc.constant[3]:0)):(de=u(hc.buffer)?V.createStream(34962,hc.buffer):V.getBuffer(hc.buffer),Oc="type"in hc?Zd[hc.type]:de.dtype,Dc=!!hc.normalized,Nc=hc.size|0,Ec=hc.offset|0,Sc=hc.stride|0,Cc=hc.divisor|0);Tc=ob.location;ic=yc[Tc];if(1===$c){ic.buffer||D.enableVertexAttribArray(Tc);Wc=Nc||1;if(ic.type!==Oc||ic.size!==Wc||ic.buffer!==de||ic.normalized!==Dc||ic.offset!==Ec||ic.stride!==Sc)D.bindBuffer(34962,de.buffer),D.vertexAttribPointer(Tc,Wc,Oc,Dc,Sc,Ec),ic.type=Oc,ic.size=Wc,ic.buffer=de,ic.normalized=
Dc,ic.offset=Ec,ic.stride=Sc;ic.divisor!==Cc&&(g.vertexAttribDivisorANGLE(Tc,Cc),ic.divisor=Cc)}else if(ic.buffer&&(D.disableVertexAttribArray(Tc),ic.buffer=null),ic.x!==Gb||ic.y!==Pc||ic.z!==Hc||ic.w!==Lb)D.vertexAttrib4f(Tc,Gb,Pc,Hc,Lb),ic.x=Gb,ic.y=Pc,ic.z=Hc,ic.w=Lb;md=Y.call(this,C,h,f);kd=!1;qd=null;Xc=0;be=!1;le=Ld=0;xe=1;Ud=0;Hd=5126;nd=Fc=ed=Ed=0;u(md)?(kd=!0,qd=V.createStream(34962,md),Hd=qd.dtype):(qd=V.getBuffer(md))?Hd=qd.dtype:"constant"in md?(xe=2,"number"===typeof md.constant?(ed=
md.constant,Fc=nd=Ed=0):(ed=0<md.constant.length?md.constant[0]:0,Fc=1<md.constant.length?md.constant[1]:0,nd=2<md.constant.length?md.constant[2]:0,Ed=3<md.constant.length?md.constant[3]:0)):(qd=u(md.buffer)?V.createStream(34962,md.buffer):V.getBuffer(md.buffer),Hd="type"in md?Zd[md.type]:qd.dtype,be=!!md.normalized,le=md.size|0,Ld=md.offset|0,Ud=md.stride|0,Xc=md.divisor|0);gd=$a.location;bd=yc[gd];if(1===xe){bd.buffer||D.enableVertexAttribArray(gd);hd=le||1;if(bd.type!==Hd||bd.size!==hd||bd.buffer!==
qd||bd.normalized!==be||bd.offset!==Ld||bd.stride!==Ud)D.bindBuffer(34962,qd.buffer),D.vertexAttribPointer(gd,hd,Hd,be,Ud,Ld),bd.type=Hd,bd.size=hd,bd.buffer=qd,bd.normalized=be,bd.offset=Ld,bd.stride=Ud;bd.divisor!==Xc&&(g.vertexAttribDivisorANGLE(gd,Xc),bd.divisor=Xc)}else if(bd.buffer&&(D.disableVertexAttribArray(gd),bd.buffer=null),bd.x!==ed||bd.y!==Fc||bd.z!==nd||bd.w!==Ed)D.vertexAttrib4f(gd,ed,Fc,nd,Ed),bd.x=ed,bd.y=Fc,bd.z=nd,bd.w=Ed;zd=K.call(this,C,h,f);Ad=!1;te=null;ve=0;Ce=!1;fe=ge=0;
ce=1;pe=0;$d=5126;qe=Vc=Ac=ie=0;u(zd)?(Ad=!0,te=V.createStream(34962,zd),$d=te.dtype):(te=V.getBuffer(zd))?$d=te.dtype:"constant"in zd?(ce=2,"number"===typeof zd.constant?(Ac=zd.constant,Vc=qe=ie=0):(Ac=0<zd.constant.length?zd.constant[0]:0,Vc=1<zd.constant.length?zd.constant[1]:0,qe=2<zd.constant.length?zd.constant[2]:0,ie=3<zd.constant.length?zd.constant[3]:0)):(te=u(zd.buffer)?V.createStream(34962,zd.buffer):V.getBuffer(zd.buffer),$d="type"in zd?Zd[zd.type]:te.dtype,Ce=!!zd.normalized,fe=zd.size|
0,ge=zd.offset|0,pe=zd.stride|0,ve=zd.divisor|0);me=Q.location;Fd=yc[me];if(1===ce){Fd.buffer||D.enableVertexAttribArray(me);Md=fe||4;if(Fd.type!==$d||Fd.size!==Md||Fd.buffer!==te||Fd.normalized!==Ce||Fd.offset!==ge||Fd.stride!==pe)D.bindBuffer(34962,te.buffer),D.vertexAttribPointer(me,Md,$d,Ce,pe,ge),Fd.type=$d,Fd.size=Md,Fd.buffer=te,Fd.normalized=Ce,Fd.offset=ge,Fd.stride=pe;Fd.divisor!==ve&&(g.vertexAttribDivisorANGLE(me,ve),Fd.divisor=ve)}else if(Fd.buffer&&(D.disableVertexAttribArray(me),Fd.buffer=
null),Fd.x!==Ac||Fd.y!==Vc||Fd.z!==qe||Fd.w!==ie)D.vertexAttrib4f(me,Ac,Vc,qe,ie),Fd.x=Ac,Fd.y=Vc,Fd.z=qe,Fd.w=ie;Nd=M.call(this,C,h,f);Od=!1;je=null;Ye=0;ye=!1;Oe=oe=0;Pe=1;Le=0;re=5126;Ie=He=Ge=De=0;u(Nd)?(Od=!0,je=V.createStream(34962,Nd),re=je.dtype):(je=V.getBuffer(Nd))?re=je.dtype:"constant"in Nd?(Pe=2,"number"===typeof Nd.constant?(Ge=Nd.constant,He=Ie=De=0):(Ge=0<Nd.constant.length?Nd.constant[0]:0,He=1<Nd.constant.length?Nd.constant[1]:0,Ie=2<Nd.constant.length?Nd.constant[2]:0,De=3<Nd.constant.length?
Nd.constant[3]:0)):(je=u(Nd.buffer)?V.createStream(34962,Nd.buffer):V.getBuffer(Nd.buffer),re="type"in Nd?Zd[Nd.type]:je.dtype,ye=!!Nd.normalized,Oe=Nd.size|0,oe=Nd.offset|0,Le=Nd.stride|0,Ye=Nd.divisor|0);Ee=Wb.location;Id=yc[Ee];if(1===Pe){Id.buffer||D.enableVertexAttribArray(Ee);Rd=Oe||4;if(Id.type!==re||Id.size!==Rd||Id.buffer!==je||Id.normalized!==ye||Id.offset!==oe||Id.stride!==Le)D.bindBuffer(34962,je.buffer),D.vertexAttribPointer(Ee,Rd,re,ye,Le,oe),Id.type=re,Id.size=Rd,Id.buffer=je,Id.normalized=
ye,Id.offset=oe,Id.stride=Le;Id.divisor!==Ye&&(g.vertexAttribDivisorANGLE(Ee,Ye),Id.divisor=Ye)}else if(Id.buffer&&(D.disableVertexAttribArray(Ee),Id.buffer=null),Id.x!==Ge||Id.y!==He||Id.z!==Ie||Id.w!==De)D.vertexAttrib4f(Ee,Ge,He,Ie,De),Id.x=Ge,Id.y=He,Id.z=Ie,Id.w=De;Yd=P.call(this,C,h,f);ae=!1;Je=null;yd=0;Pd=!1;Ke=Ae=0;ff=1;Xe=0;Qe=5126;Re=Ue=We=Me=0;u(Yd)?(ae=!0,Je=V.createStream(34962,Yd),Qe=Je.dtype):(Je=V.getBuffer(Yd))?Qe=Je.dtype:"constant"in Yd?(ff=2,"number"===typeof Yd.constant?(We=
Yd.constant,Ue=Re=Me=0):(We=0<Yd.constant.length?Yd.constant[0]:0,Ue=1<Yd.constant.length?Yd.constant[1]:0,Re=2<Yd.constant.length?Yd.constant[2]:0,Me=3<Yd.constant.length?Yd.constant[3]:0)):(Je=u(Yd.buffer)?V.createStream(34962,Yd.buffer):V.getBuffer(Yd.buffer),Qe="type"in Yd?Zd[Yd.type]:Je.dtype,Pd=!!Yd.normalized,Ke=Yd.size|0,Ae=Yd.offset|0,Xe=Yd.stride|0,yd=Yd.divisor|0);Se=ma.location;Qd=yc[Se];if(1===ff){Qd.buffer||D.enableVertexAttribArray(Se);Vd=Ke||1;if(Qd.type!==Qe||Qd.size!==Vd||Qd.buffer!==
Je||Qd.normalized!==Pd||Qd.offset!==Ae||Qd.stride!==Xe)D.bindBuffer(34962,Je.buffer),D.vertexAttribPointer(Se,Vd,Qe,Pd,Xe,Ae),Qd.type=Qe,Qd.size=Vd,Qd.buffer=Je,Qd.normalized=Pd,Qd.offset=Ae,Qd.stride=Xe;Qd.divisor!==yd&&(g.vertexAttribDivisorANGLE(Se,yd),Qd.divisor=yd)}else if(Qd.buffer&&(D.disableVertexAttribArray(Se),Qd.buffer=null),Qd.x!==We||Qd.y!==Ue||Qd.z!==Re||Qd.w!==Me)D.vertexAttrib4f(Se,We,Ue,Re,Me),Qd.x=We,Qd.y=Ue,Qd.z=Re,Qd.w=Me;Te=C.pixelRatio;f&&qf===Te||(qf=Te,D.uniform1f($b.location,
Te));nf=J.call(this,C,h,f);cf=nf[0];hf=nf[1];f&&gf===cf&&jf===hf||(gf=cf,jf=hf,D.uniform2f(Fa.location,cf,hf));of=h.scale;kf=of[0];Af=of[1];f&&pf===kf&&Bf===Af||(pf=kf,Bf=Af,D.uniform2f(Ia.location,kf,Af));Ne=h.scaleFract;Be=Ne[0];mf=Ne[1];f&&lf===Be&&Cf===mf||(lf=Be,Cf=mf,D.uniform2f(S.location,Be,mf));Ff=h.translate;zf=Ff[0];Ef=Ff[1];f&&Df===zf&&uf===Ef||(Df=zf,uf=Ef,D.uniform2f(ga.location,zf,Ef));vf=h.translateFract;tf=vf[0];xf=vf[1];f&&wf===tf&&If===xf||(wf=tf,If=xf,D.uniform2f(ta.location,tf,
xf));Jf=h.opacity;f&&Kf===Jf||(Kf=Jf,D.uniform1f(da.location,Jf));Lf=h.elements;rf=null;(rf=(Qf=u(Lf))?ub.createStream(Lf):ub.getElements(Lf))&&D.bindBuffer(34963,rf.buffer.buffer);Gf=h.offset;if(sf=h.count)0<cb?rf?g.drawElementsInstancedANGLE(0,sf,rf.type,Gf<<(rf.type-5121>>1),cb):g.drawArraysInstancedANGLE(0,Gf,sf,cb):0>cb&&(rf?D.drawElements(0,sf,rf.type,Gf<<(rf.type-5121>>1)):D.drawArrays(0,Gf,sf)),C.viewportWidth=td,C.viewportHeight=Tb,Jb&&V.destroyStream(ad),Bb&&V.destroyStream(Ra),Xa&&V.destroyStream(Ya),
yb&&V.destroyStream(Dd),jc&&V.destroyStream(de),kd&&V.destroyStream(qd),Ad&&V.destroyStream(te),Od&&V.destroyStream(je),ae&&V.destroyStream(Je),Qf&&ub.destroyStream(rf)}sa.unbind();la.dirty=!0;ha.setVAO(null);d&&(A.cpuTime+=performance.now()-e)},draw:function(a){var d,e,g,h,k,n,q,x,z,B,H,J,L,M,N,I,K,T,P,U,W,X,Y,ca,fa,ua,qa,na,oa,sa,ra,xa,Na,La,vb,Wa,Aa,jb,gb,Sa,Hb,cb,fc,Rb,ec,Zb,Sb,Ib,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,Gd,Ka,Ob,fb,ib,za,gc,
Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,de,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md,kd,qd,Xc,be,Ld,le,xe,Ud,Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,te,ve,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ye,ye,oe,Oe;d=Uc.next;d!==Uc.cur&&(d?D.bindFramebuffer(36160,d.framebuffer):D.bindFramebuffer(36160,null),Uc.cur=d);if(la.dirty){var Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,qf,nf,cf,gf,hf,
jf;Pe=ka.dither;Pe!==la.dither&&(Pe?D.enable(3024):D.disable(3024),la.dither=Pe);Le=m[0];re=m[1];if(Le!==ba[0]||re!==ba[1])D.blendEquationSeparate(Le,re),ba[0]=Le,ba[1]=re;De=ka.depth_func;De!==la.depth_func&&(D.depthFunc(De),la.depth_func=De);Ge=tc[0];He=tc[1];if(Ge!==aa[0]||He!==aa[1])D.depthRange(Ge,He),aa[0]=Ge,aa[1]=He;Ie=ka.depth_mask;Ie!==la.depth_mask&&(D.depthMask(Ie),la.depth_mask=Ie);Ee=ia[0];Id=ia[1];Rd=ia[2];Yd=ia[3];if(Ee!==l[0]||Id!==l[1]||Rd!==l[2]||Yd!==l[3])D.colorMask(Ee,Id,Rd,
Yd),l[0]=Ee,l[1]=Id,l[2]=Rd,l[3]=Yd;ae=ka.cull_enable;ae!==la.cull_enable&&(ae?D.enable(2884):D.disable(2884),la.cull_enable=ae);Je=ka.cull_face;Je!==la.cull_face&&(D.cullFace(Je),la.cull_face=Je);yd=ka.frontFace;yd!==la.frontFace&&(D.frontFace(yd),la.frontFace=yd);Pd=ka.lineWidth;Pd!==la.lineWidth&&(D.lineWidth(Pd),la.lineWidth=Pd);Ae=ka.polygonOffset_enable;Ae!==la.polygonOffset_enable&&(Ae?D.enable(32823):D.disable(32823),la.polygonOffset_enable=Ae);Ke=p[0];ff=p[1];if(Ke!==Db[0]||ff!==Db[1])D.polygonOffset(Ke,
ff),Db[0]=Ke,Db[1]=ff;Xe=ka.sample_alpha;Xe!==la.sample_alpha&&(Xe?D.enable(32926):D.disable(32926),la.sample_alpha=Xe);Qe=ka.sample_enable;Qe!==la.sample_enable&&(Qe?D.enable(32928):D.disable(32928),la.sample_enable=Qe);Me=Ab[0];We=Ab[1];if(Me!==Ve[0]||We!==Ve[1])D.sampleCoverage(Me,We),Ve[0]=Me,Ve[1]=We;Ue=ka.stencil_mask;Ue!==la.stencil_mask&&(D.stencilMask(Ue),la.stencil_mask=Ue);Re=ee[0];Se=ee[1];Qd=ee[2];if(Re!==Kd[0]||Se!==Kd[1]||Qd!==Kd[2])D.stencilFunc(Re,Se,Qd),Kd[0]=Re,Kd[1]=Se,Kd[2]=Qd;
Vd=he[0];Te=he[1];qf=he[2];nf=he[3];if(Vd!==ue[0]||Te!==ue[1]||qf!==ue[2]||nf!==ue[3])D.stencilOpSeparate(Vd,Te,qf,nf),ue[0]=Vd,ue[1]=Te,ue[2]=qf,ue[3]=nf;cf=se[0];gf=se[1];hf=se[2];jf=se[3];if(cf!==od[0]||gf!==od[1]||hf!==od[2]||jf!==od[3])D.stencilOpSeparate(cf,gf,hf,jf),od[0]=cf,od[1]=gf,od[2]=hf,od[3]=jf}e=a.viewport;g=e.x|0;h=e.y|0;k="width"in e?e.width|0:C.framebufferWidth-g;n="height"in e?e.height|0:C.framebufferHeight-h;q=C.viewportWidth;C.viewportWidth=k;x=C.viewportHeight;C.viewportHeight=
n;D.viewport(g,h,k,n);Bd[0]=g;Bd[1]=h;Bd[2]=k;Bd[3]=n;D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);la.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;D.disable(2929);la.depth_enable=!1;z=a.viewport;B=z.x|0;H=z.y|0;J="width"in z?z.width|0:C.framebufferWidth-B;L="height"in z?z.height|0:C.framebufferHeight-H;D.scissor(B,H,J,L);we[0]=B;we[1]=H;we[2]=J;we[3]=L;D.enable(3089);la.scissor_enable=!0;D.disable(2960);la.stencil_enable=!1;if(M=la.profile)N=
performance.now(),A.count++;D.useProgram(r.program);I=Qc.angle_instanced_arrays;ha.setVAO(null);K=O.call(this,C,a,0);T=!1;P=null;U=0;W=!1;Y=X=0;ca=1;fa=0;ua=5126;sa=oa=na=qa=0;u(K)?(T=!0,P=V.createStream(34962,K),ua=P.dtype):(P=V.getBuffer(K))?ua=P.dtype:"constant"in K?(ca=2,"number"===typeof K.constant?(na=K.constant,oa=sa=qa=0):(na=0<K.constant.length?K.constant[0]:0,oa=1<K.constant.length?K.constant[1]:0,sa=2<K.constant.length?K.constant[2]:0,qa=3<K.constant.length?K.constant[3]:0)):(P=u(K.buffer)?
V.createStream(34962,K.buffer):V.getBuffer(K.buffer),ua="type"in K?Zd[K.type]:P.dtype,W=!!K.normalized,Y=K.size|0,X=K.offset|0,fa=K.stride|0,U=K.divisor|0);ra=cc.location;xa=yc[ra];if(1===ca){xa.buffer||D.enableVertexAttribArray(ra);Na=Y||1;if(xa.type!==ua||xa.size!==Na||xa.buffer!==P||xa.normalized!==W||xa.offset!==X||xa.stride!==fa)D.bindBuffer(34962,P.buffer),D.vertexAttribPointer(ra,Na,ua,W,fa,X),xa.type=ua,xa.size=Na,xa.buffer=P,xa.normalized=W,xa.offset=X,xa.stride=fa;xa.divisor!==U&&(I.vertexAttribDivisorANGLE(ra,
U),xa.divisor=U)}else if(xa.buffer&&(D.disableVertexAttribArray(ra),xa.buffer=null),xa.x!==na||xa.y!==oa||xa.z!==sa||xa.w!==qa)D.vertexAttrib4f(ra,na,oa,sa,qa),xa.x=na,xa.y=oa,xa.z=sa,xa.w=qa;La=f.call(this,C,a,0);vb=!1;Wa=null;Aa=0;jb=!1;Sa=gb=0;Hb=1;cb=0;fc=5126;Sb=Zb=ec=Rb=0;u(La)?(vb=!0,Wa=V.createStream(34962,La),fc=Wa.dtype):(Wa=V.getBuffer(La))?fc=Wa.dtype:"constant"in La?(Hb=2,"number"===typeof La.constant?(ec=La.constant,Zb=Sb=Rb=0):(ec=0<La.constant.length?La.constant[0]:0,Zb=1<La.constant.length?
La.constant[1]:0,Sb=2<La.constant.length?La.constant[2]:0,Rb=3<La.constant.length?La.constant[3]:0)):(Wa=u(La.buffer)?V.createStream(34962,La.buffer):V.getBuffer(La.buffer),fc="type"in La?Zd[La.type]:Wa.dtype,jb=!!La.normalized,Sa=La.size|0,gb=La.offset|0,cb=La.stride|0,Aa=La.divisor|0);Ib=kc.location;Tb=yc[Ib];if(1===Hb){Tb.buffer||D.enableVertexAttribArray(Ib);Ma=Sa||1;if(Tb.type!==fc||Tb.size!==Ma||Tb.buffer!==Wa||Tb.normalized!==jb||Tb.offset!==gb||Tb.stride!==cb)D.bindBuffer(34962,Wa.buffer),
D.vertexAttribPointer(Ib,Ma,fc,jb,cb,gb),Tb.type=fc,Tb.size=Ma,Tb.buffer=Wa,Tb.normalized=jb,Tb.offset=gb,Tb.stride=cb;Tb.divisor!==Aa&&(I.vertexAttribDivisorANGLE(Ib,Aa),Tb.divisor=Aa)}else if(Tb.buffer&&(D.disableVertexAttribArray(Ib),Tb.buffer=null),Tb.x!==ec||Tb.y!==Zb||Tb.z!==Sb||Tb.w!==Rb)D.vertexAttrib4f(Ib,ec,Zb,Sb,Rb),Tb.x=ec,Tb.y=Zb,Tb.z=Sb,Tb.w=Rb;pb=c.call(this,C,a,0);wb=!1;hb=null;Pa=0;uc=!1;ad=Jb=0;db=1;lc=0;Yc=5126;va=lb=kb=dc=0;u(pb)?(wb=!0,hb=V.createStream(34962,pb),Yc=hb.dtype):
(hb=V.getBuffer(pb))?Yc=hb.dtype:"constant"in pb?(db=2,"number"===typeof pb.constant?(kb=pb.constant,lb=va=dc=0):(kb=0<pb.constant.length?pb.constant[0]:0,lb=1<pb.constant.length?pb.constant[1]:0,va=2<pb.constant.length?pb.constant[2]:0,dc=3<pb.constant.length?pb.constant[3]:0)):(hb=u(pb.buffer)?V.createStream(34962,pb.buffer):V.getBuffer(pb.buffer),Yc="type"in pb?Zd[pb.type]:hb.dtype,uc=!!pb.normalized,ad=pb.size|0,Jb=pb.offset|0,lc=pb.stride|0,Pa=pb.divisor|0);qb=nc.location;wa=yc[qb];if(1===db){wa.buffer||
D.enableVertexAttribArray(qb);Ua=ad||1;if(wa.type!==Yc||wa.size!==Ua||wa.buffer!==hb||wa.normalized!==uc||wa.offset!==Jb||wa.stride!==lc)D.bindBuffer(34962,hb.buffer),D.vertexAttribPointer(qb,Ua,Yc,uc,lc,Jb),wa.type=Yc,wa.size=Ua,wa.buffer=hb,wa.normalized=uc,wa.offset=Jb,wa.stride=lc;wa.divisor!==Pa&&(I.vertexAttribDivisorANGLE(qb,Pa),wa.divisor=Pa)}else if(wa.buffer&&(D.disableVertexAttribArray(qb),wa.buffer=null),wa.x!==kb||wa.y!==lb||wa.z!==va||wa.w!==dc)D.vertexAttrib4f(qb,kb,lb,va,dc),wa.x=
kb,wa.y=lb,wa.z=va,wa.w=dc;bb=y.call(this,C,a,0);Ba=!1;eb=null;Ja=0;Cb=!1;Ra=Bb=0;Kc=1;Kb=0;Za=5126;Ka=Gd=ya=Ub=0;u(bb)?(Ba=!0,eb=V.createStream(34962,bb),Za=eb.dtype):(eb=V.getBuffer(bb))?Za=eb.dtype:"constant"in bb?(Kc=2,"number"===typeof bb.constant?(ya=bb.constant,Gd=Ka=Ub=0):(ya=0<bb.constant.length?bb.constant[0]:0,Gd=1<bb.constant.length?bb.constant[1]:0,Ka=2<bb.constant.length?bb.constant[2]:0,Ub=3<bb.constant.length?bb.constant[3]:0)):(eb=u(bb.buffer)?V.createStream(34962,bb.buffer):V.getBuffer(bb.buffer),
Za="type"in bb?Zd[bb.type]:eb.dtype,Cb=!!bb.normalized,Ra=bb.size|0,Bb=bb.offset|0,Kb=bb.stride|0,Ja=bb.divisor|0);Ob=ud.location;fb=yc[Ob];if(1===Kc){fb.buffer||D.enableVertexAttribArray(Ob);ib=Ra||1;if(fb.type!==Za||fb.size!==ib||fb.buffer!==eb||fb.normalized!==Cb||fb.offset!==Bb||fb.stride!==Kb)D.bindBuffer(34962,eb.buffer),D.vertexAttribPointer(Ob,ib,Za,Cb,Kb,Bb),fb.type=Za,fb.size=ib,fb.buffer=eb,fb.normalized=Cb,fb.offset=Bb,fb.stride=Kb;fb.divisor!==Ja&&(I.vertexAttribDivisorANGLE(Ob,Ja),fb.divisor=
Ja)}else if(fb.buffer&&(D.disableVertexAttribArray(Ob),fb.buffer=null),fb.x!==ya||fb.y!==Gd||fb.z!==Ka||fb.w!==Ub)D.vertexAttrib4f(Ob,ya,Gd,Ka,Ub),fb.x=ya,fb.y=Gd,fb.z=Ka,fb.w=Ub;za=b.call(this,C,a,0);gc=!1;Ea=null;rb=0;sb=!1;Ya=Xa=0;mc=1;xc=0;vc=5126;Ga=Zc=Mb=Va=0;u(za)?(gc=!0,Ea=V.createStream(34962,za),vc=Ea.dtype):(Ea=V.getBuffer(za))?vc=Ea.dtype:"constant"in za?(mc=2,"number"===typeof za.constant?(Mb=za.constant,Zc=Ga=Va=0):(Mb=0<za.constant.length?za.constant[0]:0,Zc=1<za.constant.length?za.constant[1]:
0,Ga=2<za.constant.length?za.constant[2]:0,Va=3<za.constant.length?za.constant[3]:0)):(Ea=u(za.buffer)?V.createStream(34962,za.buffer):V.getBuffer(za.buffer),vc="type"in za?Zd[za.type]:Ea.dtype,sb=!!za.normalized,Ya=za.size|0,Xa=za.offset|0,xc=za.stride|0,rb=za.divisor|0);zc=ob.location;Qa=yc[zc];if(1===mc){Qa.buffer||D.enableVertexAttribArray(zc);Ca=Ya||1;if(Qa.type!==vc||Qa.size!==Ca||Qa.buffer!==Ea||Qa.normalized!==sb||Qa.offset!==Xa||Qa.stride!==xc)D.bindBuffer(34962,Ea.buffer),D.vertexAttribPointer(zc,
Ca,vc,sb,xc,Xa),Qa.type=vc,Qa.size=Ca,Qa.buffer=Ea,Qa.normalized=sb,Qa.offset=Xa,Qa.stride=xc;Qa.divisor!==rb&&(I.vertexAttribDivisorANGLE(zc,rb),Qa.divisor=rb)}else if(Qa.buffer&&(D.disableVertexAttribArray(zc),Qa.buffer=null),Qa.x!==Mb||Qa.y!==Zc||Qa.z!==Ga||Qa.w!==Va)D.vertexAttrib4f(zc,Mb,Zc,Ga,Va),Qa.x=Mb,Qa.y=Zc,Qa.z=Ga,Qa.w=Va;mb=v.call(this,C,a,0);xb=!1;Eb=null;tb=0;wc=!1;Dd=yb=0;sc=1;Jd=0;Mc=5126;bc=Vb=cd=jd=0;u(mb)?(xb=!0,Eb=V.createStream(34962,mb),Mc=Eb.dtype):(Eb=V.getBuffer(mb))?Mc=
Eb.dtype:"constant"in mb?(sc=2,"number"===typeof mb.constant?(cd=mb.constant,Vb=bc=jd=0):(cd=0<mb.constant.length?mb.constant[0]:0,Vb=1<mb.constant.length?mb.constant[1]:0,bc=2<mb.constant.length?mb.constant[2]:0,jd=3<mb.constant.length?mb.constant[3]:0)):(Eb=u(mb.buffer)?V.createStream(34962,mb.buffer):V.getBuffer(mb.buffer),Mc="type"in mb?Zd[mb.type]:Eb.dtype,wc=!!mb.normalized,Dd=mb.size|0,yb=mb.offset|0,Jd=mb.stride|0,tb=mb.divisor|0);Pb=$a.location;Ha=yc[Pb];if(1===sc){Ha.buffer||D.enableVertexAttribArray(Pb);
Yb=Dd||1;if(Ha.type!==Mc||Ha.size!==Yb||Ha.buffer!==Eb||Ha.normalized!==wc||Ha.offset!==yb||Ha.stride!==Jd)D.bindBuffer(34962,Eb.buffer),D.vertexAttribPointer(Pb,Yb,Mc,wc,Jd,yb),Ha.type=Mc,Ha.size=Yb,Ha.buffer=Eb,Ha.normalized=wc,Ha.offset=yb,Ha.stride=Jd;Ha.divisor!==tb&&(I.vertexAttribDivisorANGLE(Pb,tb),Ha.divisor=tb)}else if(Ha.buffer&&(D.disableVertexAttribArray(Pb),Ha.buffer=null),Ha.x!==cd||Ha.y!==Vb||Ha.z!==bc||Ha.w!==jd)D.vertexAttrib4f(Pb,cd,Vb,bc,jd),Ha.x=cd,Ha.y=Vb,Ha.z=bc,Ha.w=jd;nb=
R.call(this,C,a,0);zb=!1;Nb=null;Qb=0;hc=!1;de=jc=0;Cc=1;Dc=0;Ec=5126;Oc=Sc=$c=Nc=0;u(nb)?(zb=!0,Nb=V.createStream(34962,nb),Ec=Nb.dtype):(Nb=V.getBuffer(nb))?Ec=Nb.dtype:"constant"in nb?(Cc=2,"number"===typeof nb.constant?($c=nb.constant,Sc=Oc=Nc=0):($c=0<nb.constant.length?nb.constant[0]:0,Sc=1<nb.constant.length?nb.constant[1]:0,Oc=2<nb.constant.length?nb.constant[2]:0,Nc=3<nb.constant.length?nb.constant[3]:0)):(Nb=u(nb.buffer)?V.createStream(34962,nb.buffer):V.getBuffer(nb.buffer),Ec="type"in
nb?Zd[nb.type]:Nb.dtype,hc=!!nb.normalized,de=nb.size|0,jc=nb.offset|0,Dc=nb.stride|0,Qb=nb.divisor|0);Lb=Q.location;Gb=yc[Lb];if(1===Cc){Gb.buffer||D.enableVertexAttribArray(Lb);Pc=de||4;if(Gb.type!==Ec||Gb.size!==Pc||Gb.buffer!==Nb||Gb.normalized!==hc||Gb.offset!==jc||Gb.stride!==Dc)D.bindBuffer(34962,Nb.buffer),D.vertexAttribPointer(Lb,Pc,Ec,hc,Dc,jc),Gb.type=Ec,Gb.size=Pc,Gb.buffer=Nb,Gb.normalized=hc,Gb.offset=jc,Gb.stride=Dc;Gb.divisor!==Qb&&(I.vertexAttribDivisorANGLE(Lb,Qb),Gb.divisor=Qb)}else if(Gb.buffer&&
(D.disableVertexAttribArray(Lb),Gb.buffer=null),Gb.x!==$c||Gb.y!==Sc||Gb.z!==Oc||Gb.w!==Nc)D.vertexAttrib4f(Lb,$c,Sc,Oc,Nc),Gb.x=$c,Gb.y=Sc,Gb.z=Oc,Gb.w=Nc;Hc=ea.call(this,C,a,0);Tc=!1;ic=null;Wc=0;md=!1;qd=kd=0;Xc=1;be=0;Ld=5126;Hd=Ud=xe=le=0;u(Hc)?(Tc=!0,ic=V.createStream(34962,Hc),Ld=ic.dtype):(ic=V.getBuffer(Hc))?Ld=ic.dtype:"constant"in Hc?(Xc=2,"number"===typeof Hc.constant?(xe=Hc.constant,Ud=Hd=le=0):(xe=0<Hc.constant.length?Hc.constant[0]:0,Ud=1<Hc.constant.length?Hc.constant[1]:0,Hd=2<Hc.constant.length?
Hc.constant[2]:0,le=3<Hc.constant.length?Hc.constant[3]:0)):(ic=u(Hc.buffer)?V.createStream(34962,Hc.buffer):V.getBuffer(Hc.buffer),Ld="type"in Hc?Zd[Hc.type]:ic.dtype,md=!!Hc.normalized,qd=Hc.size|0,kd=Hc.offset|0,be=Hc.stride|0,Wc=Hc.divisor|0);Ed=Wb.location;ed=yc[Ed];if(1===Xc){ed.buffer||D.enableVertexAttribArray(Ed);Fc=qd||4;if(ed.type!==Ld||ed.size!==Fc||ed.buffer!==ic||ed.normalized!==md||ed.offset!==kd||ed.stride!==be)D.bindBuffer(34962,ic.buffer),D.vertexAttribPointer(Ed,Fc,Ld,md,be,kd),
ed.type=Ld,ed.size=Fc,ed.buffer=ic,ed.normalized=md,ed.offset=kd,ed.stride=be;ed.divisor!==Wc&&(I.vertexAttribDivisorANGLE(Ed,Wc),ed.divisor=Wc)}else if(ed.buffer&&(D.disableVertexAttribArray(Ed),ed.buffer=null),ed.x!==xe||ed.y!==Ud||ed.z!==Hd||ed.w!==le)D.vertexAttrib4f(Ed,xe,Ud,Hd,le),ed.x=xe,ed.y=Ud,ed.z=Hd,ed.w=le;nd=G.call(this,C,a,0);gd=!1;bd=null;hd=0;zd=!1;te=Ad=0;ve=1;Ce=0;ge=5126;$d=pe=ce=fe=0;u(nd)?(gd=!0,bd=V.createStream(34962,nd),ge=bd.dtype):(bd=V.getBuffer(nd))?ge=bd.dtype:"constant"in
nd?(ve=2,"number"===typeof nd.constant?(ce=nd.constant,pe=$d=fe=0):(ce=0<nd.constant.length?nd.constant[0]:0,pe=1<nd.constant.length?nd.constant[1]:0,$d=2<nd.constant.length?nd.constant[2]:0,fe=3<nd.constant.length?nd.constant[3]:0)):(bd=u(nd.buffer)?V.createStream(34962,nd.buffer):V.getBuffer(nd.buffer),ge="type"in nd?Zd[nd.type]:bd.dtype,zd=!!nd.normalized,te=nd.size|0,Ad=nd.offset|0,Ce=nd.stride|0,hd=nd.divisor|0);ie=ma.location;Ac=yc[ie];if(1===ve){Ac.buffer||D.enableVertexAttribArray(ie);Vc=
te||1;if(Ac.type!==ge||Ac.size!==Vc||Ac.buffer!==bd||Ac.normalized!==zd||Ac.offset!==Ad||Ac.stride!==Ce)D.bindBuffer(34962,bd.buffer),D.vertexAttribPointer(ie,Vc,ge,zd,Ce,Ad),Ac.type=ge,Ac.size=Vc,Ac.buffer=bd,Ac.normalized=zd,Ac.offset=Ad,Ac.stride=Ce;Ac.divisor!==hd&&(I.vertexAttribDivisorANGLE(ie,hd),Ac.divisor=hd)}else if(Ac.buffer&&(D.disableVertexAttribArray(ie),Ac.buffer=null),Ac.x!==ce||Ac.y!==pe||Ac.z!==$d||Ac.w!==fe)D.vertexAttrib4f(ie,ce,pe,$d,fe),Ac.x=ce,Ac.y=pe,Ac.z=$d,Ac.w=fe;D.uniform1i(t.location,
!1);D.uniform1f($b.location,C.pixelRatio);qe=F.call(this,C,a,0);D.uniform2f(Fa.location,qe[0],qe[1]);me=a.scale;D.uniform2f(Ia.location,me[0],me[1]);Fd=a.scaleFract;D.uniform2f(S.location,Fd[0],Fd[1]);Md=a.translate;D.uniform2f(ga.location,Md[0],Md[1]);Nd=a.translateFract;D.uniform2f(ta.location,Nd[0],Nd[1]);D.uniform1f(da.location,a.opacity);D.uniform1i(Oa.location,w.bind());Od=a.elements;je=null;(je=(Ye=u(Od))?ub.createStream(Od):ub.getElements(Od))&&D.bindBuffer(34963,je.buffer.buffer);ye=a.offset;
if(oe=a.count)Oe=Da.instances,0<Oe?je?I.drawElementsInstancedANGLE(0,oe,je.type,ye<<(je.type-5121>>1),Oe):I.drawArraysInstancedANGLE(0,ye,oe,Oe):0>Oe&&(je?D.drawElements(0,oe,je.type,ye<<(je.type-5121>>1)):D.drawArrays(0,ye,oe)),la.dirty=!0,ha.setVAO(null),C.viewportWidth=q,C.viewportHeight=x,M&&(A.cpuTime+=performance.now()-N),T&&V.destroyStream(P),vb&&V.destroyStream(Wa),wb&&V.destroyStream(hb),Ba&&V.destroyStream(eb),gc&&V.destroyStream(Ea),xb&&V.destroyStream(Eb),zb&&V.destroyStream(Nb),Tc&&V.destroyStream(ic),
gd&&V.destroyStream(bd),w.unbind(),Ye&&ub.destroyStream(je)},scope:function(b,c,f){var k,l,m,p,r,v,t,w,y,E,D,O,K,J,F,M,G,P,ba,Q,aa,S,ha,Y,ia,ea,R,ja,da,ga,pa,ma,na,sa,ra,ta,xa,Ia,Fa,Na,Oa,Ab,Db,$a,yc,jb,ob,Ma,pb,wb,hb,Pa,ud,Jb,tc,db,Wb,ec,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,cc,Kb,Za,Ub,ya,nc,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,$b,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,kc,sc,od,Mc,ee,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Qc,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,Uc,Kd,qd,Xc,Bd,Ld,he,se,Ud,
Hd,Ed,ed,Fc,nd,gd,bd,hd,zd,Ad,we,ue,Ce,ge,fe,ce,pe,$d,ie,Ac,Vc,qe,me,Fd,Md,Nd,Od,je,Ve,ye,oe,Oe,Pe,Le,re,De,Ge,He,Ie,Ee,Id,Rd,Yd,ae,Je,yd,Pd,Ae,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,qf,nf,cf,gf,hf,jf,of,kf,pf,Af,Bf,Ne,Be,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,If,Jf,Kf,Lf,rf,Qf,Gf,sf,cg,Rf,Sf,pg,df,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,ef,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng;k=b.viewport;l=k.x|0;m=k.y|0;p="width"in k?k.width|
0:C.framebufferWidth-l;r="height"in k?k.height|0:C.framebufferHeight-m;v=C.viewportWidth;C.viewportWidth=p;t=C.viewportHeight;C.viewportHeight=r;w=Gd[0];Gd[0]=l;y=Gd[1];Gd[1]=m;E=Gd[2];Gd[2]=p;D=Gd[3];Gd[3]=r;O=qa[0];qa[0]=0;K=qa[1];qa[1]=0;J=qa[2];qa[2]=0;F=qa[3];qa[3]=1;M=ka.blend_enable;ka.blend_enable=!0;G=x[0];x[0]=770;P=x[1];x[1]=771;ba=x[2];x[2]=773;Q=x[3];x[3]=1;aa=ka.depth_enable;ka.depth_enable=!1;S=b.viewport;ha=S.x|0;Y=S.y|0;ia="width"in S?S.width|0:C.framebufferWidth-ha;ea="height"in
S?S.height|0:C.framebufferHeight-Y;R=de[0];de[0]=ha;ja=de[1];de[1]=Y;da=de[2];de[2]=ia;ga=de[3];de[3]=ea;pa=ka.scissor_enable;ka.scissor_enable=!0;ma=ka.stencil_enable;ka.stencil_enable=!1;if(na=la.profile)sa=performance.now(),A.count++;ra=b.elements;ta=null;ta=(xa=u(ra))?ub.createStream(ra):ub.getElements(ra);Ia=Da.elements;Da.elements=ta;Fa=b.offset;Na=Da.offset;Da.offset=Fa;Oa=b.count;Ab=Da.count;Da.count=Oa;Db=Da.primitive;Da.primitive=0;$a=T[45];T[45]=!1;yc=b.markerTexture;jb=T[48];T[48]=yc;
ob=b.opacity;Ma=T[10];T[10]=ob;pb=B.call(this,C,b,f);wb=T[46];T[46]=pb;hb=T[47];T[47]=N;Pa=C.pixelRatio;ud=T[34];T[34]=Pa;Jb=b.scale;tc=T[6];T[6]=Jb;db=b.scaleFract;Wb=T[7];T[7]=db;ec=b.translate;dc=T[8];T[8]=ec;kb=b.translateFract;lb=T[9];T[9]=kb;va=n.call(this,C,b,f);qb=!1;wa=null;Ua=0;bb=!1;eb=Ba=0;Ja=1;Cb=0;Bb=5126;Za=Kb=cc=Ra=0;u(va)?(qb=!0,wa=V.createStream(34962,va),Bb=wa.dtype):(wa=V.getBuffer(va))?Bb=wa.dtype:"constant"in va?(Ja=2,"number"===typeof va.constant?(cc=va.constant,Kb=Za=Ra=0):
(cc=0<va.constant.length?va.constant[0]:0,Kb=1<va.constant.length?va.constant[1]:0,Za=2<va.constant.length?va.constant[2]:0,Ra=3<va.constant.length?va.constant[3]:0)):(wa=u(va.buffer)?V.createStream(34962,va.buffer):V.getBuffer(va.buffer),Bb="type"in va?Zd[va.type]:wa.dtype,bb=!!va.normalized,eb=va.size|0,Ba=va.offset|0,Cb=va.stride|0,Ua=va.divisor|0);Ub=H.buffer;H.buffer=wa;ya=H.divisor;H.divisor=Ua;nc=H.normalized;H.normalized=bb;Ka=H.offset;H.offset=Ba;Ob=H.size;H.size=eb;fb=H.state;H.state=Ja;
ib=H.stride;H.stride=Cb;za=H.type;H.type=Bb;gc=H.w;H.w=Ra;Ea=H.x;H.x=cc;rb=H.y;H.y=Kb;sb=H.z;H.z=Za;Xa=ca.call(this,C,b,f);Ya=!1;mc=null;xc=0;vc=!1;Mb=Va=0;$b=1;Ga=0;zc=5126;xb=mb=Ca=Qa=0;u(Xa)?(Ya=!0,mc=V.createStream(34962,Xa),zc=mc.dtype):(mc=V.getBuffer(Xa))?zc=mc.dtype:"constant"in Xa?($b=2,"number"===typeof Xa.constant?(Ca=Xa.constant,mb=xb=Qa=0):(Ca=0<Xa.constant.length?Xa.constant[0]:0,mb=1<Xa.constant.length?Xa.constant[1]:0,xb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?
Xa.constant[3]:0)):(mc=u(Xa.buffer)?V.createStream(34962,Xa.buffer):V.getBuffer(Xa.buffer),zc="type"in Xa?Zd[Xa.type]:mc.dtype,vc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|0,Ga=Xa.stride|0,xc=Xa.divisor|0);Eb=I.buffer;I.buffer=mc;tb=I.divisor;I.divisor=xc;wc=I.normalized;I.normalized=vc;yb=I.offset;I.offset=Va;kc=I.size;I.size=Mb;sc=I.state;I.state=$b;od=I.stride;I.stride=Ga;Mc=I.type;I.type=zc;ee=I.w;I.w=Qa;cd=I.x;I.x=Ca;Vb=I.y;I.y=mb;bc=I.z;I.z=xb;Pb=Ib.call(this,C,b,f);Ha=!1;Yb=null;nb=0;zb=!1;
Qb=Nb=0;hc=1;jc=0;Qc=5126;Nc=Ec=Dc=Cc=0;u(Pb)?(Ha=!0,Yb=V.createStream(34962,Pb),Qc=Yb.dtype):(Yb=V.getBuffer(Pb))?Qc=Yb.dtype:"constant"in Pb?(hc=2,"number"===typeof Pb.constant?(Dc=Pb.constant,Ec=Nc=Cc=0):(Dc=0<Pb.constant.length?Pb.constant[0]:0,Ec=1<Pb.constant.length?Pb.constant[1]:0,Nc=2<Pb.constant.length?Pb.constant[2]:0,Cc=3<Pb.constant.length?Pb.constant[3]:0)):(Yb=u(Pb.buffer)?V.createStream(34962,Pb.buffer):V.getBuffer(Pb.buffer),Qc="type"in Pb?Zd[Pb.type]:Yb.dtype,zb=!!Pb.normalized,
Qb=Pb.size|0,Nb=Pb.offset|0,jc=Pb.stride|0,nb=Pb.divisor|0);$c=e.buffer;e.buffer=Yb;Sc=e.divisor;e.divisor=nb;Oc=e.normalized;e.normalized=zb;Lb=e.offset;e.offset=Nb;Gb=e.size;e.size=Qb;Pc=e.state;e.state=hc;Hc=e.stride;e.stride=jc;Tc=e.type;e.type=Qc;ic=e.w;e.w=Cc;Wc=e.x;e.x=Dc;Uc=e.y;e.y=Ec;Kd=e.z;e.z=Nc;qd=g.call(this,C,b,f);Xc=!1;Bd=null;Ld=0;he=!1;Ud=se=0;Hd=1;Ed=0;ed=5126;bd=gd=nd=Fc=0;u(qd)?(Xc=!0,Bd=V.createStream(34962,qd),ed=Bd.dtype):(Bd=V.getBuffer(qd))?ed=Bd.dtype:"constant"in qd?(Hd=
2,"number"===typeof qd.constant?(nd=qd.constant,gd=bd=Fc=0):(nd=0<qd.constant.length?qd.constant[0]:0,gd=1<qd.constant.length?qd.constant[1]:0,bd=2<qd.constant.length?qd.constant[2]:0,Fc=3<qd.constant.length?qd.constant[3]:0)):(Bd=u(qd.buffer)?V.createStream(34962,qd.buffer):V.getBuffer(qd.buffer),ed="type"in qd?Zd[qd.type]:Bd.dtype,he=!!qd.normalized,Ud=qd.size|0,se=qd.offset|0,Ed=qd.stride|0,Ld=qd.divisor|0);hd=d.buffer;d.buffer=Bd;zd=d.divisor;d.divisor=Ld;Ad=d.normalized;d.normalized=he;we=d.offset;
d.offset=se;ue=d.size;d.size=Ud;Ce=d.state;d.state=Hd;ge=d.stride;d.stride=Ed;fe=d.type;d.type=ed;ce=d.w;d.w=Fc;pe=d.x;d.x=nd;$d=d.y;d.y=gd;ie=d.z;d.z=bd;Ac=z.call(this,C,b,f);Vc=!1;qe=null;me=0;Fd=!1;Nd=Md=0;Od=1;je=0;Ve=5126;Pe=Oe=oe=ye=0;u(Ac)?(Vc=!0,qe=V.createStream(34962,Ac),Ve=qe.dtype):(qe=V.getBuffer(Ac))?Ve=qe.dtype:"constant"in Ac?(Od=2,"number"===typeof Ac.constant?(oe=Ac.constant,Oe=Pe=ye=0):(oe=0<Ac.constant.length?Ac.constant[0]:0,Oe=1<Ac.constant.length?Ac.constant[1]:0,Pe=2<Ac.constant.length?
Ac.constant[2]:0,ye=3<Ac.constant.length?Ac.constant[3]:0)):(qe=u(Ac.buffer)?V.createStream(34962,Ac.buffer):V.getBuffer(Ac.buffer),Ve="type"in Ac?Zd[Ac.type]:qe.dtype,Fd=!!Ac.normalized,Nd=Ac.size|0,Md=Ac.offset|0,je=Ac.stride|0,me=Ac.divisor|0);Le=U.buffer;U.buffer=qe;re=U.divisor;U.divisor=me;De=U.normalized;U.normalized=Fd;Ge=U.offset;U.offset=Md;He=U.size;U.size=Nd;Ie=U.state;U.state=Od;Ee=U.stride;U.stride=je;Id=U.type;U.type=Ve;Rd=U.w;U.w=ye;Yd=U.x;U.x=oe;ae=U.y;U.y=Oe;Je=U.z;U.z=Pe;yd=W.call(this,
C,b,f);Pd=!1;Ae=null;Ke=0;ff=!1;Qe=Xe=0;Me=1;We=0;Ue=5126;Vd=Qd=Se=Re=0;u(yd)?(Pd=!0,Ae=V.createStream(34962,yd),Ue=Ae.dtype):(Ae=V.getBuffer(yd))?Ue=Ae.dtype:"constant"in yd?(Me=2,"number"===typeof yd.constant?(Se=yd.constant,Qd=Vd=Re=0):(Se=0<yd.constant.length?yd.constant[0]:0,Qd=1<yd.constant.length?yd.constant[1]:0,Vd=2<yd.constant.length?yd.constant[2]:0,Re=3<yd.constant.length?yd.constant[3]:0)):(Ae=u(yd.buffer)?V.createStream(34962,yd.buffer):V.getBuffer(yd.buffer),Ue="type"in yd?Zd[yd.type]:
Ae.dtype,ff=!!yd.normalized,Qe=yd.size|0,Xe=yd.offset|0,We=yd.stride|0,Ke=yd.divisor|0);Te=q.buffer;q.buffer=Ae;qf=q.divisor;q.divisor=Ke;nf=q.normalized;q.normalized=ff;cf=q.offset;q.offset=Xe;gf=q.size;q.size=Qe;hf=q.state;q.state=Me;jf=q.stride;q.stride=We;of=q.type;q.type=Ue;kf=q.w;q.w=Re;pf=q.x;q.x=Se;Af=q.y;q.y=Qd;Bf=q.z;q.z=Vd;Ne=oa.call(this,C,b,f);Be=!1;lf=null;mf=0;Cf=!1;zf=Ff=0;Df=1;Ef=0;uf=5126;xf=wf=tf=vf=0;u(Ne)?(Be=!0,lf=V.createStream(34962,Ne),uf=lf.dtype):(lf=V.getBuffer(Ne))?uf=
lf.dtype:"constant"in Ne?(Df=2,"number"===typeof Ne.constant?(tf=Ne.constant,wf=xf=vf=0):(tf=0<Ne.constant.length?Ne.constant[0]:0,wf=1<Ne.constant.length?Ne.constant[1]:0,xf=2<Ne.constant.length?Ne.constant[2]:0,vf=3<Ne.constant.length?Ne.constant[3]:0)):(lf=u(Ne.buffer)?V.createStream(34962,Ne.buffer):V.getBuffer(Ne.buffer),uf="type"in Ne?Zd[Ne.type]:lf.dtype,Cf=!!Ne.normalized,zf=Ne.size|0,Ff=Ne.offset|0,Ef=Ne.stride|0,mf=Ne.divisor|0);If=L.buffer;L.buffer=lf;Jf=L.divisor;L.divisor=mf;Kf=L.normalized;
L.normalized=Cf;Lf=L.offset;L.offset=Ff;rf=L.size;L.size=zf;Qf=L.state;L.state=Df;Gf=L.stride;L.stride=Ef;sf=L.type;L.type=uf;cg=L.w;L.w=vf;Rf=L.x;L.x=tf;Sf=L.y;L.y=wf;pg=L.z;L.z=xf;df=fa.call(this,C,b,f);$e=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;Yf=Xf=Wf=Tf=0;u(df)?($e=!0,Mf=V.createStream(34962,df),Vf=Mf.dtype):(Mf=V.getBuffer(df))?Vf=Mf.dtype:"constant"in df?(gg=2,"number"===typeof df.constant?(Wf=df.constant,Xf=Yf=Tf=0):(Wf=0<df.constant.length?df.constant[0]:0,Xf=1<df.constant.length?
df.constant[1]:0,Yf=2<df.constant.length?df.constant[2]:0,Tf=3<df.constant.length?df.constant[3]:0)):(Mf=u(df.buffer)?V.createStream(34962,df.buffer):V.getBuffer(df.buffer),Vf="type"in df?Zd[df.type]:Mf.dtype,dg=!!df.normalized,fg=df.size|0,eg=df.offset|0,hg=df.stride|0,Nf=df.divisor|0);ig=a.buffer;a.buffer=Mf;qg=a.divisor;a.divisor=Nf;rg=a.normalized;a.normalized=dg;sg=a.offset;a.offset=eg;tg=a.size;a.size=fg;ug=a.state;a.state=gg;vg=a.stride;a.stride=hg;wg=a.type;a.type=Vf;xg=a.w;a.w=Tf;yg=a.x;
a.x=Wf;zg=a.y;a.y=Xf;Ag=a.z;a.z=Yf;ef=h.call(this,C,b,f);af=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;u(ef)?(af=!0,Of=V.createStream(34962,ef),Zf=Of.dtype):(Of=V.getBuffer(ef))?Zf=Of.dtype:"constant"in ef?(mg=2,"number"===typeof ef.constant?($f=ef.constant,ag=bg=Uf=0):($f=0<ef.constant.length?ef.constant[0]:0,ag=1<ef.constant.length?ef.constant[1]:0,bg=2<ef.constant.length?ef.constant[2]:0,Uf=3<ef.constant.length?ef.constant[3]:0)):(Of=u(ef.buffer)?V.createStream(34962,ef.buffer):
V.getBuffer(ef.buffer),Zf="type"in ef?Zd[ef.type]:Of.dtype,jg=!!ef.normalized,lg=ef.size|0,kg=ef.offset|0,ng=ef.stride|0,Pf=ef.divisor|0);og=X.buffer;X.buffer=Of;Bg=X.divisor;X.divisor=Pf;Cg=X.normalized;X.normalized=jg;Dg=X.offset;X.offset=kg;Eg=X.size;X.size=lg;Fg=X.state;X.state=mg;Gg=X.stride;X.stride=ng;Hg=X.type;X.type=Zf;Ig=X.w;X.w=Uf;Jg=X.x;X.x=$f;Kg=X.y;X.y=ag;Lg=X.z;X.z=bg;Mg=ua.vert;ua.vert=59;Ng=ua.frag;ua.frag=58;la.dirty=!0;c(C,b,f);C.viewportWidth=v;C.viewportHeight=t;Gd[0]=w;Gd[1]=
y;Gd[2]=E;Gd[3]=D;qa[0]=O;qa[1]=K;qa[2]=J;qa[3]=F;ka.blend_enable=M;x[0]=G;x[1]=P;x[2]=ba;x[3]=Q;ka.depth_enable=aa;de[0]=R;de[1]=ja;de[2]=da;de[3]=ga;ka.scissor_enable=pa;ka.stencil_enable=ma;na&&(A.cpuTime+=performance.now()-sa);xa&&ub.destroyStream(ta);Da.elements=Ia;Da.offset=Na;Da.count=Ab;Da.primitive=Db;T[45]=$a;T[48]=jb;T[10]=Ma;T[46]=wb;T[47]=hb;T[34]=ud;T[6]=tc;T[7]=Wb;T[8]=dc;T[9]=lb;qb&&V.destroyStream(wa);H.buffer=Ub;H.divisor=ya;H.normalized=nc;H.offset=Ka;H.size=Ob;H.state=fb;H.stride=
ib;H.type=za;H.w=gc;H.x=Ea;H.y=rb;H.z=sb;Ya&&V.destroyStream(mc);I.buffer=Eb;I.divisor=tb;I.normalized=wc;I.offset=yb;I.size=kc;I.state=sc;I.stride=od;I.type=Mc;I.w=ee;I.x=cd;I.y=Vb;I.z=bc;Ha&&V.destroyStream(Yb);e.buffer=$c;e.divisor=Sc;e.normalized=Oc;e.offset=Lb;e.size=Gb;e.state=Pc;e.stride=Hc;e.type=Tc;e.w=ic;e.x=Wc;e.y=Uc;e.z=Kd;Xc&&V.destroyStream(Bd);d.buffer=hd;d.divisor=zd;d.normalized=Ad;d.offset=we;d.size=ue;d.state=Ce;d.stride=ge;d.type=fe;d.w=ce;d.x=pe;d.y=$d;d.z=ie;Vc&&V.destroyStream(qe);
U.buffer=Le;U.divisor=re;U.normalized=De;U.offset=Ge;U.size=He;U.state=Ie;U.stride=Ee;U.type=Id;U.w=Rd;U.x=Yd;U.y=ae;U.z=Je;Pd&&V.destroyStream(Ae);q.buffer=Te;q.divisor=qf;q.normalized=nf;q.offset=cf;q.size=gf;q.state=hf;q.stride=jf;q.type=of;q.w=kf;q.x=pf;q.y=Af;q.z=Bf;Be&&V.destroyStream(lf);L.buffer=If;L.divisor=Jf;L.normalized=Kf;L.offset=Lf;L.size=rf;L.state=Qf;L.stride=Gf;L.type=sf;L.w=cg;L.x=Rf;L.y=Sf;L.z=pg;$e&&V.destroyStream(Mf);a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=
tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;af&&V.destroyStream(Of);X.buffer=og;X.divisor=Bg;X.normalized=Cg;X.offset=Dg;X.size=Eg;X.state=Fg;X.stride=Gg;X.type=Hg;X.w=Ig;X.x=Jg;X.y=Kg;X.z=Lg;ua.vert=Mg;ua.frag=Ng;la.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(k,A,r,O,f,c,y,b,v,R,ea,G,F,w,B,N,n,H,ca,I,Ib,e,g,d,z,U,W,q,oa,L,fa,a,h,X,ra,xa,jb,ec,na,Na){var Y,K,
M,P,sa,J,Wb,$a,Q,t,ma,da,Fa,Oa,$b,Ia,S,ob,ga,ta,cc,nc,kc,ud,yc,V,C,la,Da,ub,Qc,Uc,D,u,ka,ua,T,ha,qa,E,m;Y=k.attributes;K=k.buffer;M=k.context;P=k.current;sa=k.draw;J=k.elements;Wb=k.extensions;$a=k.framebuffer;Q=k.gl;t=k.isBufferArgs;ma=k.next;da=k.shader;Fa=k.uniforms;Oa=k.vao;$b=ma.blend_color;Ia=P.blend_color;S=ma.blend_equation;ob=P.blend_equation;ga=ma.blend_func;ta=P.blend_func;cc=ma.colorMask;nc=P.colorMask;kc=ma.depth_range;ud=P.depth_range;yc=ma.polygonOffset_offset;V=P.polygonOffset_offset;
C=ma.sample_coverage;la=P.sample_coverage;Da=ma.scissor_box;ub=P.scissor_box;Qc=ma.stencil_func;Uc=P.stencil_func;D=ma.stencil_opBack;u=P.stencil_opBack;ka=ma.stencil_opFront;ua=P.stencil_opFront;T=ma.viewport;ha=P.viewport;qa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};E={offset:4,stride:8};m={offset:0,stride:8};return{batch:function(b,c){var f,k,l,n,r,p,v,w,y,B,O,F,G;f=$a.next;f!==$a.cur&&(f?Q.bindFramebuffer(36160,f.framebuffer):Q.bindFramebuffer(36160,
null),$a.cur=f);if(P.dirty){var N,T,R,ea,da,ga,pa,Fa,$b,yf,bf,wd,Fe,Sd,Td,ne,Xd,rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab,Ic,Fb,pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb;N=ma.dither;N!==P.dither&&(N?Q.enable(3024):Q.disable(3024),P.dither=N);T=S[0];R=S[1];if(T!==ob[0]||R!==ob[1])Q.blendEquationSeparate(T,R),ob[0]=T,ob[1]=R;ea=ma.depth_func;ea!==P.depth_func&&(Q.depthFunc(ea),P.depth_func=ea);da=kc[0];ga=kc[1];if(da!==ud[0]||ga!==ud[1])Q.depthRange(da,ga),ud[0]=da,ud[1]=ga;pa=ma.depth_mask;pa!==P.depth_mask&&(Q.depthMask(pa),
P.depth_mask=pa);Fa=cc[0];$b=cc[1];yf=cc[2];bf=cc[3];if(Fa!==nc[0]||$b!==nc[1]||yf!==nc[2]||bf!==nc[3])Q.colorMask(Fa,$b,yf,bf),nc[0]=Fa,nc[1]=$b,nc[2]=yf,nc[3]=bf;wd=ma.cull_enable;wd!==P.cull_enable&&(wd?Q.enable(2884):Q.disable(2884),P.cull_enable=wd);Fe=ma.cull_face;Fe!==P.cull_face&&(Q.cullFace(Fe),P.cull_face=Fe);Sd=ma.frontFace;Sd!==P.frontFace&&(Q.frontFace(Sd),P.frontFace=Sd);Td=ma.lineWidth;Td!==P.lineWidth&&(Q.lineWidth(Td),P.lineWidth=Td);ne=ma.polygonOffset_enable;ne!==P.polygonOffset_enable&&
(ne?Q.enable(32823):Q.disable(32823),P.polygonOffset_enable=ne);Xd=yc[0];rd=yc[1];if(Xd!==V[0]||rd!==V[1])Q.polygonOffset(Xd,rd),V[0]=Xd,V[1]=rd;id=ma.sample_alpha;id!==P.sample_alpha&&(id?Q.enable(32926):Q.disable(32926),P.sample_alpha=id);vd=ma.sample_enable;vd!==P.sample_enable&&(vd?Q.enable(32928):Q.disable(32928),P.sample_enable=vd);pd=C[0];dd=C[1];if(pd!==la[0]||dd!==la[1])Q.sampleCoverage(pd,dd),la[0]=pd,la[1]=dd;oc=ma.stencil_mask;oc!==P.stencil_mask&&(Q.stencilMask(oc),P.stencil_mask=oc);
sd=Qc[0];fd=Qc[1];Lc=Qc[2];if(sd!==Uc[0]||fd!==Uc[1]||Lc!==Uc[2])Q.stencilFunc(sd,fd,Lc),Uc[0]=sd,Uc[1]=fd,Uc[2]=Lc;qc=ka[0];ab=ka[1];Ic=ka[2];Fb=ka[3];if(qc!==ua[0]||ab!==ua[1]||Ic!==ua[2]||Fb!==ua[3])Q.stencilOpSeparate(qc,ab,Ic,Fb),ua[0]=qc,ua[1]=ab,ua[2]=Ic,ua[3]=Fb;pc=D[0];Ta=D[1];Jc=D[2];ac=D[3];if(pc!==u[0]||Ta!==u[1]||Jc!==u[2]||ac!==u[3])Q.stencilOpSeparate(pc,Ta,Jc,ac),u[0]=pc,u[1]=Ta,u[2]=Jc,u[3]=ac;rc=ma.scissor_enable;rc!==P.scissor_enable&&(rc?Q.enable(3089):Q.disable(3089),P.scissor_enable=
rc);Cd=Da[0];xd=Da[1];Bc=Da[2];Xb=Da[3];if(Cd!==ub[0]||xd!==ub[1]||Bc!==ub[2]||Xb!==ub[3])Q.scissor(Cd,xd,Bc,Xb),ub[0]=Cd,ub[1]=xd,ub[2]=Bc,ub[3]=Xb}k=this.viewport;l=k.x|0;n=k.y|0;r="width"in k?k.width|0:M.framebufferWidth-l;p="height"in k?k.height|0:M.framebufferHeight-n;v=M.viewportWidth;M.viewportWidth=r;w=M.viewportHeight;M.viewportHeight=p;Q.viewport(l,n,r,p);ha[0]=l;ha[1]=n;ha[2]=r;ha[3]=p;Q.blendColor(0,0,0,1);Ia[0]=0;Ia[1]=0;Ia[2]=0;Ia[3]=1;Q.enable(3042);P.blend_enable=!0;Q.blendFuncSeparate(770,
771,773,1);ta[0]=770;ta[1]=771;ta[2]=773;ta[3]=1;Q.disable(2929);P.depth_enable=!1;Q.disable(2960);P.stencil_enable=!1;if(y=P.profile)B=performance.now(),A.count+=c;Q.useProgram(H.program);O=Wb.angle_instanced_arrays;var Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb;Oa.setVAO(null);m.buffer=this.sizeBuffer;Gc=!1;Rc=null;La=0;vb=!1;Aa=
Wa=0;ld=1;gb=0;Sa=5126;Rb=fc=cb=Hb=0;t(m)?(Gc=!0,Rc=K.createStream(34962,m),Sa=Rc.dtype):(Rc=K.getBuffer(m))?Sa=Rc.dtype:"constant"in m?(ld=2,"number"===typeof m.constant?(cb=m.constant,fc=Rb=Hb=0):(cb=0<m.constant.length?m.constant[0]:0,fc=1<m.constant.length?m.constant[1]:0,Rb=2<m.constant.length?m.constant[2]:0,Hb=3<m.constant.length?m.constant[3]:0)):(Rc=t(m.buffer)?K.createStream(34962,m.buffer):K.getBuffer(m.buffer),Sa="type"in m?qa[m.type]:Rc.dtype,vb=!!m.normalized,Aa=m.size|0,Wa=m.offset|
0,gb=m.stride|0,La=m.divisor|0);ke=Na.location;Zb=Y[ke];if(1===ld){Zb.buffer||Q.enableVertexAttribArray(ke);Sb=Aa||1;if(Zb.type!==Sa||Zb.size!==Sb||Zb.buffer!==Rc||Zb.normalized!==vb||Zb.offset!==Wa||Zb.stride!==gb)Q.bindBuffer(34962,Rc.buffer),Q.vertexAttribPointer(ke,Sb,Sa,vb,gb,Wa),Zb.type=Sa,Zb.size=Sb,Zb.buffer=Rc,Zb.normalized=vb,Zb.offset=Wa,Zb.stride=gb;Zb.divisor!==La&&(O.vertexAttribDivisorANGLE(ke,La),Zb.divisor=La)}else if(Zb.buffer&&(Q.disableVertexAttribArray(ke),Zb.buffer=null),Zb.x!==
cb||Zb.y!==fc||Zb.z!==Rb||Zb.w!==Hb)Q.vertexAttrib4f(ke,cb,fc,Rb,Hb),Zb.x=cb,Zb.y=fc,Zb.z=Rb,Zb.w=Hb;E.buffer=this.sizeBuffer;td=!1;Tb=null;Ma=0;pb=!1;hb=wb=0;Pa=1;uc=0;Jb=5126;Yc=lc=db=ad=0;t(E)?(td=!0,Tb=K.createStream(34962,E),Jb=Tb.dtype):(Tb=K.getBuffer(E))?Jb=Tb.dtype:"constant"in E?(Pa=2,"number"===typeof E.constant?(db=E.constant,lc=Yc=ad=0):(db=0<E.constant.length?E.constant[0]:0,lc=1<E.constant.length?E.constant[1]:0,Yc=2<E.constant.length?E.constant[2]:0,ad=3<E.constant.length?E.constant[3]:
0)):(Tb=t(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),Jb="type"in E?qa[E.type]:Tb.dtype,pb=!!E.normalized,hb=E.size|0,wb=E.offset|0,uc=E.stride|0,Ma=E.divisor|0);dc=L.location;kb=Y[dc];if(1===Pa){kb.buffer||Q.enableVertexAttribArray(dc);lb=hb||1;if(kb.type!==Jb||kb.size!==lb||kb.buffer!==Tb||kb.normalized!==pb||kb.offset!==wb||kb.stride!==uc)Q.bindBuffer(34962,Tb.buffer),Q.vertexAttribPointer(dc,lb,Jb,pb,uc,wb),kb.type=Jb,kb.size=lb,kb.buffer=Tb,kb.normalized=pb,kb.offset=wb,kb.stride=
uc;kb.divisor!==Ma&&(O.vertexAttribDivisorANGLE(dc,Ma),kb.divisor=Ma)}else if(kb.buffer&&(Q.disableVertexAttribArray(dc),kb.buffer=null),kb.x!==db||kb.y!==lc||kb.z!==Yc||kb.w!==ad)Q.vertexAttrib4f(dc,db,lc,Yc,ad),kb.x=db,kb.y=lc,kb.z=Yc,kb.w=ad;va=this.charBuffer;qb=!1;wa=null;Ua=0;bb=!1;eb=Ba=0;Ja=1;Cb=0;Bb=5126;Za=Kb=Kc=Ra=0;t(va)?(qb=!0,wa=K.createStream(34962,va),Bb=wa.dtype):(wa=K.getBuffer(va))?Bb=wa.dtype:"constant"in va?(Ja=2,"number"===typeof va.constant?(Kc=va.constant,Kb=Za=Ra=0):(Kc=0<
va.constant.length?va.constant[0]:0,Kb=1<va.constant.length?va.constant[1]:0,Za=2<va.constant.length?va.constant[2]:0,Ra=3<va.constant.length?va.constant[3]:0)):(wa=t(va.buffer)?K.createStream(34962,va.buffer):K.getBuffer(va.buffer),Bb="type"in va?qa[va.type]:wa.dtype,bb=!!va.normalized,eb=va.size|0,Ba=va.offset|0,Cb=va.stride|0,Ua=va.divisor|0);Ub=oa.location;ya=Y[Ub];if(1===Ja){ya.buffer||Q.enableVertexAttribArray(Ub);ze=eb||1;if(ya.type!==Bb||ya.size!==ze||ya.buffer!==wa||ya.normalized!==bb||ya.offset!==
Ba||ya.stride!==Cb)Q.bindBuffer(34962,wa.buffer),Q.vertexAttribPointer(Ub,ze,Bb,bb,Cb,Ba),ya.type=Bb,ya.size=ze,ya.buffer=wa,ya.normalized=bb,ya.offset=Ba,ya.stride=Cb;ya.divisor!==Ua&&(O.vertexAttribDivisorANGLE(Ub,Ua),ya.divisor=Ua)}else if(ya.buffer&&(Q.disableVertexAttribArray(Ub),ya.buffer=null),ya.x!==Kc||ya.y!==Kb||ya.z!==Za||ya.w!==Ra)Q.vertexAttrib4f(Ub,Kc,Kb,Za,Ra),ya.x=Kc,ya.y=Kb,ya.z=Za,ya.w=Ra;Ka=this.position;Ob=!1;fb=null;ib=0;za=!1;Ea=gc=0;rb=1;sb=0;Xa=5126;vc=xc=mc=Ya=0;t(Ka)?(Ob=
!0,fb=K.createStream(34962,Ka),Xa=fb.dtype):(fb=K.getBuffer(Ka))?Xa=fb.dtype:"constant"in Ka?(rb=2,"number"===typeof Ka.constant?(mc=Ka.constant,xc=vc=Ya=0):(mc=0<Ka.constant.length?Ka.constant[0]:0,xc=1<Ka.constant.length?Ka.constant[1]:0,vc=2<Ka.constant.length?Ka.constant[2]:0,Ya=3<Ka.constant.length?Ka.constant[3]:0)):(fb=t(Ka.buffer)?K.createStream(34962,Ka.buffer):K.getBuffer(Ka.buffer),Xa="type"in Ka?qa[Ka.type]:fb.dtype,za=!!Ka.normalized,Ea=Ka.size|0,gc=Ka.offset|0,sb=Ka.stride|0,ib=Ka.divisor|
0);Va=ra.location;Mb=Y[Va];if(1===rb){Mb.buffer||Q.enableVertexAttribArray(Va);Zc=Ea||2;if(Mb.type!==Xa||Mb.size!==Zc||Mb.buffer!==fb||Mb.normalized!==za||Mb.offset!==gc||Mb.stride!==sb)Q.bindBuffer(34962,fb.buffer),Q.vertexAttribPointer(Va,Zc,Xa,za,sb,gc),Mb.type=Xa,Mb.size=Zc,Mb.buffer=fb,Mb.normalized=za,Mb.offset=gc,Mb.stride=sb;Mb.divisor!==ib&&(O.vertexAttribDivisorANGLE(Va,ib),Mb.divisor=ib)}else if(Mb.buffer&&(Q.disableVertexAttribArray(Va),Mb.buffer=null),Mb.x!==mc||Mb.y!==xc||Mb.z!==vc||
Mb.w!==Ya)Q.vertexAttrib4f(Va,mc,xc,vc,Ya),Mb.x=mc,Mb.y=xc,Mb.z=vc,Mb.w=Ya;Ga=this.viewportArray;Q.uniform4f(na.location,Ga[0],Ga[1],Ga[2],Ga[3]);zc=this.scale;Q.uniform2f(jb.location,zc[0],zc[1]);Qa=this.translate;Q.uniform2f(ec.location,Qa[0],Qa[1]);(Ca=sa.elements)?Q.bindBuffer(34963,Ca.buffer.buffer):Oa.currentVAO&&(Ca=J.getElements(Oa.currentVAO.elements))&&Q.bindBuffer(34963,Ca.buffer.buffer);mb=sa.instances;for(F=0;F<c;++F){G=b[F];var xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,
Qb,hc,jc,Hf,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc,md;xb=ca.call(this,M,G,F);F&&Eb===xb||(Eb=xb,Q.uniform1f(fa.location,xb));tb=I.call(this,M,G,F);F&&wc===tb||(wc=tb,Q.uniform1f(h.location,tb));yb=G.align;F&&Dd===yb||(Dd=yb,Q.uniform1f(d.location,yb));sc=G.baseline;F&&Jd===sc||(Jd=sc,Q.uniform1f(q.location,sc));Mc=G.color;jd=Mc[0];Vb=Mc[1];Pb=Mc[2];Yb=Mc[3];F&&cd===jd&&bc===Vb&&Ha===Pb&&nb===Yb||(cd=jd,bc=Vb,Ha=Pb,nb=Yb,Q.uniform4f(a.location,jd,Vb,Pb,Yb));zb=Ib.call(this,M,G,F);Nb=zb[0];hc=zb[1];
F&&Qb===Nb&&jc===hc||(Qb=Nb,jc=hc,Q.uniform2f(W.location,Nb,hc));Hf=e.call(this,M,G,F);Cc=Hf[0];Ec=Hf[1];F&&Dc===Cc&&Nc===Ec||(Dc=Cc,Nc=Ec,Q.uniform2f(U.location,Cc,Ec));$c=G.positionOffset;Sc=$c[0];Lb=$c[1];F&&Oc===Sc&&Gb===Lb||(Oc=Sc,Gb=Lb,Q.uniform2f(xa.location,Sc,Lb));Pc=G.opacity;F&&Hc===Pc||(Hc=Pc,Q.uniform1f(X.location,Pc));(Tc=g.call(this,M,G,F))&&"framebuffer"===Tc._reglType&&(Tc=Tc.color[0]);ic=Tc._texture;Q.uniform1i(z.location,ic.bind());Wc=G.offset;if(md=G.count)0<mb?Ca?O.drawElementsInstancedANGLE(0,
md,Ca.type,Wc<<(Ca.type-5121>>1),mb):O.drawArraysInstancedANGLE(0,Wc,md,mb):0>mb&&(Ca?Q.drawElements(0,md,Ca.type,Wc<<(Ca.type-5121>>1)):Q.drawArrays(0,Wc,md)),ic.unbind()}Gc&&K.destroyStream(Rc);td&&K.destroyStream(Tb);qb&&K.destroyStream(wa);Ob&&K.destroyStream(fb);P.dirty=!0;Oa.setVAO(null);M.viewportWidth=v;M.viewportHeight=w;y&&(A.cpuTime+=performance.now()-B)},draw:function(e){var g,k,n,l,v,w,p,B,F,H,G,N,I,T,R,ea,ca,da,ga,pa,Fa,Ib,$b,be,bf,wd,Fe,Sd,Td,ne,Xd,rd,id,vd,pd,dd,oc,sd,fd,Lc,qc,ab,
Ic,Fb,pc,Ta,Jc,ac,rc,Cd,xd,Bc,Xb,Gc,Rc,La,vb,Wa,Aa,ld,gb,Sa,Hb,cb,fc,Rb,ke,Zb,Sb,td,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb;g=$a.next;g!==$a.cur&&(g?Q.bindFramebuffer(36160,g.framebuffer):Q.bindFramebuffer(36160,null),$a.cur=g);if(P.dirty){var Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,ze,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc;Ja=ma.dither;Ja!==P.dither&&(Ja?Q.enable(3024):Q.disable(3024),P.dither=Ja);Cb=S[0];Bb=S[1];if(Cb!==ob[0]||Bb!==ob[1])Q.blendEquationSeparate(Cb,
Bb),ob[0]=Cb,ob[1]=Bb;Ra=ma.depth_func;Ra!==P.depth_func&&(Q.depthFunc(Ra),P.depth_func=Ra);Kc=kc[0];Kb=kc[1];if(Kc!==ud[0]||Kb!==ud[1])Q.depthRange(Kc,Kb),ud[0]=Kc,ud[1]=Kb;Za=ma.depth_mask;Za!==P.depth_mask&&(Q.depthMask(Za),P.depth_mask=Za);Ub=cc[0];ya=cc[1];ze=cc[2];Ka=cc[3];if(Ub!==nc[0]||ya!==nc[1]||ze!==nc[2]||Ka!==nc[3])Q.colorMask(Ub,ya,ze,Ka),nc[0]=Ub,nc[1]=ya,nc[2]=ze,nc[3]=Ka;Ob=ma.cull_enable;Ob!==P.cull_enable&&(Ob?Q.enable(2884):Q.disable(2884),P.cull_enable=Ob);fb=ma.cull_face;fb!==
P.cull_face&&(Q.cullFace(fb),P.cull_face=fb);ib=ma.frontFace;ib!==P.frontFace&&(Q.frontFace(ib),P.frontFace=ib);za=ma.lineWidth;za!==P.lineWidth&&(Q.lineWidth(za),P.lineWidth=za);gc=ma.polygonOffset_enable;gc!==P.polygonOffset_enable&&(gc?Q.enable(32823):Q.disable(32823),P.polygonOffset_enable=gc);Ea=yc[0];rb=yc[1];if(Ea!==V[0]||rb!==V[1])Q.polygonOffset(Ea,rb),V[0]=Ea,V[1]=rb;sb=ma.sample_alpha;sb!==P.sample_alpha&&(sb?Q.enable(32926):Q.disable(32926),P.sample_alpha=sb);Xa=ma.sample_enable;Xa!==
P.sample_enable&&(Xa?Q.enable(32928):Q.disable(32928),P.sample_enable=Xa);Ya=C[0];mc=C[1];if(Ya!==la[0]||mc!==la[1])Q.sampleCoverage(Ya,mc),la[0]=Ya,la[1]=mc;xc=ma.stencil_mask;xc!==P.stencil_mask&&(Q.stencilMask(xc),P.stencil_mask=xc);vc=Qc[0];Va=Qc[1];Mb=Qc[2];if(vc!==Uc[0]||Va!==Uc[1]||Mb!==Uc[2])Q.stencilFunc(vc,Va,Mb),Uc[0]=vc,Uc[1]=Va,Uc[2]=Mb;Zc=ka[0];Ga=ka[1];zc=ka[2];Qa=ka[3];if(Zc!==ua[0]||Ga!==ua[1]||zc!==ua[2]||Qa!==ua[3])Q.stencilOpSeparate(Zc,Ga,zc,Qa),ua[0]=Zc,ua[1]=Ga,ua[2]=zc,ua[3]=
Qa;Ca=D[0];mb=D[1];xb=D[2];Eb=D[3];if(Ca!==u[0]||mb!==u[1]||xb!==u[2]||Eb!==u[3])Q.stencilOpSeparate(Ca,mb,xb,Eb),u[0]=Ca,u[1]=mb,u[2]=xb,u[3]=Eb;tb=ma.scissor_enable;tb!==P.scissor_enable&&(tb?Q.enable(3089):Q.disable(3089),P.scissor_enable=tb);wc=Da[0];yb=Da[1];Dd=Da[2];sc=Da[3];if(wc!==ub[0]||yb!==ub[1]||Dd!==ub[2]||sc!==ub[3])Q.scissor(wc,yb,Dd,sc),ub[0]=wc,ub[1]=yb,ub[2]=Dd,ub[3]=sc}k=this.viewport;n=k.x|0;l=k.y|0;v="width"in k?k.width|0:M.framebufferWidth-n;w="height"in k?k.height|0:M.framebufferHeight-
l;p=M.viewportWidth;M.viewportWidth=v;B=M.viewportHeight;M.viewportHeight=w;Q.viewport(n,l,v,w);ha[0]=n;ha[1]=l;ha[2]=v;ha[3]=w;Q.blendColor(0,0,0,1);Ia[0]=0;Ia[1]=0;Ia[2]=0;Ia[3]=1;Q.enable(3042);P.blend_enable=!0;Q.blendFuncSeparate(770,771,773,1);ta[0]=770;ta[1]=771;ta[2]=773;ta[3]=1;Q.disable(2929);P.depth_enable=!1;Q.disable(2960);P.stencil_enable=!1;if(F=P.profile)H=performance.now(),A.count++;Q.useProgram(r.program);G=Wb.angle_instanced_arrays;Oa.setVAO(null);m.buffer=this.sizeBuffer;N=!1;
I=null;T=0;R=!1;ca=ea=0;da=1;ga=0;pa=5126;be=$b=Ib=Fa=0;t(m)?(N=!0,I=K.createStream(34962,m),pa=I.dtype):(I=K.getBuffer(m))?pa=I.dtype:"constant"in m?(da=2,"number"===typeof m.constant?(Ib=m.constant,$b=be=Fa=0):(Ib=0<m.constant.length?m.constant[0]:0,$b=1<m.constant.length?m.constant[1]:0,be=2<m.constant.length?m.constant[2]:0,Fa=3<m.constant.length?m.constant[3]:0)):(I=t(m.buffer)?K.createStream(34962,m.buffer):K.getBuffer(m.buffer),pa="type"in m?qa[m.type]:I.dtype,R=!!m.normalized,ca=m.size|0,
ea=m.offset|0,ga=m.stride|0,T=m.divisor|0);bf=Na.location;wd=Y[bf];if(1===da){wd.buffer||Q.enableVertexAttribArray(bf);Fe=ca||1;if(wd.type!==pa||wd.size!==Fe||wd.buffer!==I||wd.normalized!==R||wd.offset!==ea||wd.stride!==ga)Q.bindBuffer(34962,I.buffer),Q.vertexAttribPointer(bf,Fe,pa,R,ga,ea),wd.type=pa,wd.size=Fe,wd.buffer=I,wd.normalized=R,wd.offset=ea,wd.stride=ga;wd.divisor!==T&&(G.vertexAttribDivisorANGLE(bf,T),wd.divisor=T)}else if(wd.buffer&&(Q.disableVertexAttribArray(bf),wd.buffer=null),wd.x!==
Ib||wd.y!==$b||wd.z!==be||wd.w!==Fa)Q.vertexAttrib4f(bf,Ib,$b,be,Fa),wd.x=Ib,wd.y=$b,wd.z=be,wd.w=Fa;E.buffer=this.sizeBuffer;Sd=!1;Td=null;ne=0;Xd=!1;id=rd=0;vd=1;pd=0;dd=5126;Lc=fd=sd=oc=0;t(E)?(Sd=!0,Td=K.createStream(34962,E),dd=Td.dtype):(Td=K.getBuffer(E))?dd=Td.dtype:"constant"in E?(vd=2,"number"===typeof E.constant?(sd=E.constant,fd=Lc=oc=0):(sd=0<E.constant.length?E.constant[0]:0,fd=1<E.constant.length?E.constant[1]:0,Lc=2<E.constant.length?E.constant[2]:0,oc=3<E.constant.length?E.constant[3]:
0)):(Td=t(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),dd="type"in E?qa[E.type]:Td.dtype,Xd=!!E.normalized,id=E.size|0,rd=E.offset|0,pd=E.stride|0,ne=E.divisor|0);qc=L.location;ab=Y[qc];if(1===vd){ab.buffer||Q.enableVertexAttribArray(qc);Ic=id||1;if(ab.type!==dd||ab.size!==Ic||ab.buffer!==Td||ab.normalized!==Xd||ab.offset!==rd||ab.stride!==pd)Q.bindBuffer(34962,Td.buffer),Q.vertexAttribPointer(qc,Ic,dd,Xd,pd,rd),ab.type=dd,ab.size=Ic,ab.buffer=Td,ab.normalized=Xd,ab.offset=rd,ab.stride=
pd;ab.divisor!==ne&&(G.vertexAttribDivisorANGLE(qc,ne),ab.divisor=ne)}else if(ab.buffer&&(Q.disableVertexAttribArray(qc),ab.buffer=null),ab.x!==sd||ab.y!==fd||ab.z!==Lc||ab.w!==oc)Q.vertexAttrib4f(qc,sd,fd,Lc,oc),ab.x=sd,ab.y=fd,ab.z=Lc,ab.w=oc;Fb=this.charBuffer;pc=!1;Ta=null;Jc=0;ac=!1;Cd=rc=0;xd=1;Bc=0;Xb=5126;vb=La=Rc=Gc=0;t(Fb)?(pc=!0,Ta=K.createStream(34962,Fb),Xb=Ta.dtype):(Ta=K.getBuffer(Fb))?Xb=Ta.dtype:"constant"in Fb?(xd=2,"number"===typeof Fb.constant?(Rc=Fb.constant,La=vb=Gc=0):(Rc=0<
Fb.constant.length?Fb.constant[0]:0,La=1<Fb.constant.length?Fb.constant[1]:0,vb=2<Fb.constant.length?Fb.constant[2]:0,Gc=3<Fb.constant.length?Fb.constant[3]:0)):(Ta=t(Fb.buffer)?K.createStream(34962,Fb.buffer):K.getBuffer(Fb.buffer),Xb="type"in Fb?qa[Fb.type]:Ta.dtype,ac=!!Fb.normalized,Cd=Fb.size|0,rc=Fb.offset|0,Bc=Fb.stride|0,Jc=Fb.divisor|0);Wa=oa.location;Aa=Y[Wa];if(1===xd){Aa.buffer||Q.enableVertexAttribArray(Wa);ld=Cd||1;if(Aa.type!==Xb||Aa.size!==ld||Aa.buffer!==Ta||Aa.normalized!==ac||Aa.offset!==
rc||Aa.stride!==Bc)Q.bindBuffer(34962,Ta.buffer),Q.vertexAttribPointer(Wa,ld,Xb,ac,Bc,rc),Aa.type=Xb,Aa.size=ld,Aa.buffer=Ta,Aa.normalized=ac,Aa.offset=rc,Aa.stride=Bc;Aa.divisor!==Jc&&(G.vertexAttribDivisorANGLE(Wa,Jc),Aa.divisor=Jc)}else if(Aa.buffer&&(Q.disableVertexAttribArray(Wa),Aa.buffer=null),Aa.x!==Rc||Aa.y!==La||Aa.z!==vb||Aa.w!==Gc)Q.vertexAttrib4f(Wa,Rc,La,vb,Gc),Aa.x=Rc,Aa.y=La,Aa.z=vb,Aa.w=Gc;gb=this.position;Sa=!1;Hb=null;cb=0;fc=!1;ke=Rb=0;Zb=1;Sb=0;td=5126;wb=pb=Ma=Tb=0;t(gb)?(Sa=
!0,Hb=K.createStream(34962,gb),td=Hb.dtype):(Hb=K.getBuffer(gb))?td=Hb.dtype:"constant"in gb?(Zb=2,"number"===typeof gb.constant?(Ma=gb.constant,pb=wb=Tb=0):(Ma=0<gb.constant.length?gb.constant[0]:0,pb=1<gb.constant.length?gb.constant[1]:0,wb=2<gb.constant.length?gb.constant[2]:0,Tb=3<gb.constant.length?gb.constant[3]:0)):(Hb=t(gb.buffer)?K.createStream(34962,gb.buffer):K.getBuffer(gb.buffer),td="type"in gb?qa[gb.type]:Hb.dtype,fc=!!gb.normalized,ke=gb.size|0,Rb=gb.offset|0,Sb=gb.stride|0,cb=gb.divisor|
0);hb=ra.location;Pa=Y[hb];if(1===Zb){Pa.buffer||Q.enableVertexAttribArray(hb);uc=ke||2;if(Pa.type!==td||Pa.size!==uc||Pa.buffer!==Hb||Pa.normalized!==fc||Pa.offset!==Rb||Pa.stride!==Sb)Q.bindBuffer(34962,Hb.buffer),Q.vertexAttribPointer(hb,uc,td,fc,Sb,Rb),Pa.type=td,Pa.size=uc,Pa.buffer=Hb,Pa.normalized=fc,Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==cb&&(G.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(Q.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==pb||Pa.z!==wb||
Pa.w!==Tb)Q.vertexAttrib4f(hb,Ma,pb,wb,Tb),Pa.x=Ma,Pa.y=pb,Pa.z=wb,Pa.w=Tb;Jb=O.call(this,M,e,0);Q.uniform1f(fa.location,Jb);ad=f.call(this,M,e,0);Q.uniform1f(h.location,ad);Q.uniform1f(d.location,e.align);Q.uniform1f(q.location,e.baseline);db=this.viewportArray;Q.uniform4f(na.location,db[0],db[1],db[2],db[3]);lc=e.color;Q.uniform4f(a.location,lc[0],lc[1],lc[2],lc[3]);Yc=c.call(this,M,e,0);Q.uniform2f(W.location,Yc[0],Yc[1]);dc=y.call(this,M,e,0);Q.uniform2f(U.location,dc[0],dc[1]);kb=this.scale;
Q.uniform2f(jb.location,kb[0],kb[1]);lb=this.translate;Q.uniform2f(ec.location,lb[0],lb[1]);va=e.positionOffset;Q.uniform2f(xa.location,va[0],va[1]);Q.uniform1f(X.location,e.opacity);(qb=b.call(this,M,e,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);wa=qb._texture;Q.uniform1i(z.location,wa.bind());(Ua=sa.elements)?Q.bindBuffer(34963,Ua.buffer.buffer):Oa.currentVAO&&(Ua=J.getElements(Oa.currentVAO.elements))&&Q.bindBuffer(34963,Ua.buffer.buffer);bb=e.offset;if(Ba=e.count)eb=sa.instances,0<eb?
Ua?G.drawElementsInstancedANGLE(0,Ba,Ua.type,bb<<(Ua.type-5121>>1),eb):G.drawArraysInstancedANGLE(0,bb,Ba,eb):0>eb&&(Ua?Q.drawElements(0,Ba,Ua.type,bb<<(Ua.type-5121>>1)):Q.drawArrays(0,bb,Ba)),P.dirty=!0,Oa.setVAO(null),M.viewportWidth=p,M.viewportHeight=B,F&&(A.cpuTime+=performance.now()-H),N&&K.destroyStream(I),Sd&&K.destroyStream(Td),pc&&K.destroyStream(Ta),Sa&&K.destroyStream(Hb),wa.unbind()},scope:function(a,b,c){var d,e,g,f,h,k,q,r,u,y,z,C,O,D,H,I,J,L,V,Q,U,S,ha,W,X,Y,ca,fa,ka,la,ua,na,oa,
ra,ta,xa,Da,Ia,Na,Oa,$a,yc,ub,Ta,jb,ob,ud,Ib,Wb,ec,Xb,cc,nc,La,vb,Wa,Aa,kc,gb,Sa,Hb,cb,fc,Rb,Qc,Zb,Sb,Uc,Tb,Ma,pb,wb,hb,Pa,uc,Jb,ad,db,lc,Yc,dc,kb,lb,va,qb,wa,Ua,bb,Ba,eb,Ja,Cb,Bb,Ra,Kc,Kb,Za,Ub,ya,be,Ka,Ob,fb,ib,za,gc,Ea,rb,sb,Xa,Ya,mc,xc,vc,Va,Mb,Zc,Ga,zc,Qa,Ca,mb,xb,Eb,tb,wc,yb,Dd,sc,Jd,Mc,jd,cd,Vb,bc,Pb,Ha,Yb,nb,zb,Nb,Qb,hc,jc,Hf,Cc,Dc,Ec,Nc,$c,Sc,Oc,Lb,Gb,Pc,Hc,Tc,ic,Wc;d=this.viewport;e=d.x|0;g=d.y|0;f="width"in d?d.width|0:M.framebufferWidth-e;h="height"in d?d.height|0:M.framebufferHeight-
g;k=M.viewportWidth;M.viewportWidth=f;q=M.viewportHeight;M.viewportHeight=h;r=T[0];T[0]=e;u=T[1];T[1]=g;y=T[2];T[2]=f;z=T[3];T[3]=h;C=$b[0];$b[0]=0;O=$b[1];$b[1]=0;D=$b[2];$b[2]=0;H=$b[3];$b[3]=1;I=ma.blend_enable;ma.blend_enable=!0;J=ga[0];ga[0]=770;L=ga[1];ga[1]=771;V=ga[2];ga[2]=773;Q=ga[3];ga[3]=1;U=ma.depth_enable;ma.depth_enable=!1;S=ma.stencil_enable;ma.stencil_enable=!1;if(ha=P.profile)W=performance.now(),A.count++;X=a.offset;Y=sa.offset;sa.offset=X;ca=a.count;fa=sa.count;sa.count=ca;ka=sa.primitive;
sa.primitive=0;la=a.align;ua=Fa[64];Fa[64]=la;na=v.call(this,M,a,c);oa=Fa[69];Fa[69]=na;ra=R.call(this,M,a,c);ta=Fa[67];Fa[67]=ra;xa=ea.call(this,M,a,c);Da=Fa[66];Fa[66]=xa;Ia=a.baseline;Na=Fa[65];Fa[65]=Ia;Oa=G.call(this,M,a,c);$a=Fa[62];Fa[62]=Oa;yc=a.color;ub=Fa[14];Fa[14]=yc;Ta=F.call(this,M,a,c);jb=Fa[63];Fa[63]=Ta;ob=a.opacity;ud=Fa[10];Fa[10]=ob;Ib=a.positionOffset;Wb=Fa[68];Fa[68]=Ib;ec=this.scale;Xb=Fa[6];Fa[6]=ec;cc=this.translate;nc=Fa[8];Fa[8]=cc;La=this.viewportArray;vb=Fa[3];Fa[3]=La;
Wa=this.charBuffer;Aa=!1;kc=null;gb=0;Sa=!1;cb=Hb=0;fc=1;Rb=0;Qc=5126;Tb=Uc=Sb=Zb=0;t(Wa)?(Aa=!0,kc=K.createStream(34962,Wa),Qc=kc.dtype):(kc=K.getBuffer(Wa))?Qc=kc.dtype:"constant"in Wa?(fc=2,"number"===typeof Wa.constant?(Sb=Wa.constant,Uc=Tb=Zb=0):(Sb=0<Wa.constant.length?Wa.constant[0]:0,Uc=1<Wa.constant.length?Wa.constant[1]:0,Tb=2<Wa.constant.length?Wa.constant[2]:0,Zb=3<Wa.constant.length?Wa.constant[3]:0)):(kc=t(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),Qc="type"in
Wa?qa[Wa.type]:kc.dtype,Sa=!!Wa.normalized,cb=Wa.size|0,Hb=Wa.offset|0,Rb=Wa.stride|0,gb=Wa.divisor|0);Ma=w.buffer;w.buffer=kc;pb=w.divisor;w.divisor=gb;wb=w.normalized;w.normalized=Sa;hb=w.offset;w.offset=Hb;Pa=w.size;w.size=cb;uc=w.state;w.state=fc;Jb=w.stride;w.stride=Rb;ad=w.type;w.type=Qc;db=w.w;w.w=Zb;lc=w.x;w.x=Sb;Yc=w.y;w.y=Uc;dc=w.z;w.z=Tb;E.buffer=this.sizeBuffer;kb=!1;lb=null;va=0;qb=!1;Ua=wa=0;bb=1;Ba=0;eb=5126;Ra=Bb=Cb=Ja=0;t(E)?(kb=!0,lb=K.createStream(34962,E),eb=lb.dtype):(lb=K.getBuffer(E))?
eb=lb.dtype:"constant"in E?(bb=2,"number"===typeof E.constant?(Cb=E.constant,Bb=Ra=Ja=0):(Cb=0<E.constant.length?E.constant[0]:0,Bb=1<E.constant.length?E.constant[1]:0,Ra=2<E.constant.length?E.constant[2]:0,Ja=3<E.constant.length?E.constant[3]:0)):(lb=t(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),eb="type"in E?qa[E.type]:lb.dtype,qb=!!E.normalized,Ua=E.size|0,wa=E.offset|0,Ba=E.stride|0,va=E.divisor|0);Kc=B.buffer;B.buffer=lb;Kb=B.divisor;B.divisor=va;Za=B.normalized;B.normalized=
qb;Ub=B.offset;B.offset=wa;ya=B.size;B.size=Ua;be=B.state;B.state=bb;Ka=B.stride;B.stride=Ba;Ob=B.type;B.type=eb;fb=B.w;B.w=Ja;ib=B.x;B.x=Cb;za=B.y;B.y=Bb;gc=B.z;B.z=Ra;Ea=this.position;rb=!1;sb=null;Xa=0;Ya=!1;xc=mc=0;vc=1;Va=0;Mb=5126;Qa=zc=Ga=Zc=0;t(Ea)?(rb=!0,sb=K.createStream(34962,Ea),Mb=sb.dtype):(sb=K.getBuffer(Ea))?Mb=sb.dtype:"constant"in Ea?(vc=2,"number"===typeof Ea.constant?(Ga=Ea.constant,zc=Qa=Zc=0):(Ga=0<Ea.constant.length?Ea.constant[0]:0,zc=1<Ea.constant.length?Ea.constant[1]:0,
Qa=2<Ea.constant.length?Ea.constant[2]:0,Zc=3<Ea.constant.length?Ea.constant[3]:0)):(sb=t(Ea.buffer)?K.createStream(34962,Ea.buffer):K.getBuffer(Ea.buffer),Mb="type"in Ea?qa[Ea.type]:sb.dtype,Ya=!!Ea.normalized,xc=Ea.size|0,mc=Ea.offset|0,Va=Ea.stride|0,Xa=Ea.divisor|0);Ca=N.buffer;N.buffer=sb;mb=N.divisor;N.divisor=Xa;xb=N.normalized;N.normalized=Ya;Eb=N.offset;N.offset=mc;tb=N.size;N.size=xc;wc=N.state;N.state=vc;yb=N.stride;N.stride=Va;Dd=N.type;N.type=Mb;sc=N.w;N.w=Zc;Jd=N.x;N.x=Ga;Mc=N.y;N.y=
zc;jd=N.z;N.z=Qa;m.buffer=this.sizeBuffer;cd=!1;Vb=null;bc=0;Pb=!1;Yb=Ha=0;nb=1;zb=0;Nb=5126;Hf=jc=hc=Qb=0;t(m)?(cd=!0,Vb=K.createStream(34962,m),Nb=Vb.dtype):(Vb=K.getBuffer(m))?Nb=Vb.dtype:"constant"in m?(nb=2,"number"===typeof m.constant?(hc=m.constant,jc=Hf=Qb=0):(hc=0<m.constant.length?m.constant[0]:0,jc=1<m.constant.length?m.constant[1]:0,Hf=2<m.constant.length?m.constant[2]:0,Qb=3<m.constant.length?m.constant[3]:0)):(Vb=t(m.buffer)?K.createStream(34962,m.buffer):K.getBuffer(m.buffer),Nb="type"in
m?qa[m.type]:Vb.dtype,Pb=!!m.normalized,Yb=m.size|0,Ha=m.offset|0,zb=m.stride|0,bc=m.divisor|0);Cc=n.buffer;n.buffer=Vb;Dc=n.divisor;n.divisor=bc;Ec=n.normalized;n.normalized=Pb;Nc=n.offset;n.offset=Ha;$c=n.size;n.size=Yb;Sc=n.state;n.state=nb;Oc=n.stride;n.stride=zb;Lb=n.type;n.type=Nb;Gb=n.w;n.w=Qb;Pc=n.x;n.x=hc;Hc=n.y;n.y=jc;Tc=n.z;n.z=Hf;ic=da.vert;da.vert=61;Wc=da.frag;da.frag=60;P.dirty=!0;b(M,a,c);M.viewportWidth=k;M.viewportHeight=q;T[0]=r;T[1]=u;T[2]=y;T[3]=z;$b[0]=C;$b[1]=O;$b[2]=D;$b[3]=
H;ma.blend_enable=I;ga[0]=J;ga[1]=L;ga[2]=V;ga[3]=Q;ma.depth_enable=U;ma.stencil_enable=S;ha&&(A.cpuTime+=performance.now()-W);sa.offset=Y;sa.count=fa;sa.primitive=ka;Fa[64]=ua;Fa[69]=oa;Fa[67]=ta;Fa[66]=Da;Fa[65]=Na;Fa[62]=$a;Fa[14]=ub;Fa[63]=jb;Fa[10]=ud;Fa[68]=Wb;Fa[6]=Xb;Fa[8]=nc;Fa[3]=vb;Aa&&K.destroyStream(kc);w.buffer=Ma;w.divisor=pb;w.normalized=wb;w.offset=hb;w.size=Pa;w.state=uc;w.stride=Jb;w.type=ad;w.w=db;w.x=lc;w.y=Yc;w.z=dc;kb&&K.destroyStream(lb);B.buffer=Kc;B.divisor=Kb;B.normalized=
Za;B.offset=Ub;B.size=ya;B.state=be;B.stride=Ka;B.type=Ob;B.w=fb;B.x=ib;B.y=za;B.z=gc;rb&&K.destroyStream(sb);N.buffer=Ca;N.divisor=mb;N.normalized=xb;N.offset=Eb;N.size=tb;N.state=wc;N.stride=yb;N.type=Dd;N.w=sc;N.x=Jd;N.y=Mc;N.z=jd;cd&&K.destroyStream(Vb);n.buffer=Cc;n.divisor=Dc;n.normalized=Ec;n.offset=Nc;n.size=$c;n.state=Sc;n.stride=Oc;n.type=Lb;n.w=Gb;n.x=Pc;n.y=Hc;n.z=Tc;da.vert=ic;da.frag=Wc;P.dirty=!0}}}}},{}],25:[function(A,R,Ib){var k=A("./sorted-object-keys");R.exports=function(A,r){for(var O=
k(r),f=0;f<O.length;++f)A[O[f]]=r[O[f]];return A}},{"./sorted-object-keys":34}],26:[function(A,R,Ib){function k(k,f,c,r,b,v){for(var A=0;A<f;++A)for(var Z=k[A],G=0;G<c;++G)for(var F=Z[G],w=0;w<r;++w)b[v++]=F[w]}function Z(r,f,c,y,b){for(var v=1,A=c+1;A<f.length;++A)v*=f[A];var R=f[c];if(4===f.length-c){var G=f[c+1],F=f[c+2];f=f[c+3];for(A=0;A<R;++A)k(r[A],G,F,f,y,b),b+=v}else for(A=0;A<R;++A)Z(r[A],f,c+1,y,b),b+=v}var r=A("./pool");R.exports={shape:function(k){for(var f=[];k.length;k=k[0])f.push(k.length);
return f},flatten:function(A,f,c,y){var b=1;if(f.length)for(var v=0;v<f.length;++v)b*=f[v];else b=0;c=y||r.allocType(c,b);switch(f.length){case 0:break;case 1:y=f[0];for(f=0;f<y;++f)c[f]=A[f];break;case 2:y=f[0];f=f[1];for(v=b=0;v<y;++v)for(var R=A[v],ea=0;ea<f;++ea)c[b++]=R[ea];break;case 3:k(A,f[0],f[1],f[2],c,0);break;default:Z(A,f,0,c,0)}return c}}},{"./pool":32}],27:[function(A,R,Ib){var k=A("./is-typed-array");R.exports=function(A){return Array.isArray(A)||k(A)}},{"./is-typed-array":30}],28:[function(A,
R,Ib){var k=A("./is-typed-array");R.exports=function(A){return!!A&&"object"===typeof A&&Array.isArray(A.shape)&&Array.isArray(A.stride)&&"number"===typeof A.offset&&A.shape.length===A.stride.length&&(Array.isArray(A.data)||k(A.data))}},{"./is-typed-array":30}],29:[function(A,R,Ib){R.exports=function(k){return!(k&k-1)&&!!k}},{}],30:[function(A,R,Ib){R.exports=function(k){return k instanceof Uint8Array||k instanceof Uint16Array||k instanceof Uint32Array||k instanceof Int8Array||k instanceof Int16Array||
k instanceof Int32Array||k instanceof Float32Array||k instanceof Float64Array||k instanceof Uint8ClampedArray}},{}],31:[function(A,R,Ib){R.exports=function(k,A){for(var r=Array(k),O=0;O<k;++O)r[O]=A(O);return r}},{}],32:[function(A,R,Ib){function k(k){var f,c;f=(65535<k)<<4;k>>>=f;c=(255<k)<<3;k>>>=c;f|=c;c=(15<k)<<2;k>>>=c;f|=c;c=(3<k)<<1;return f|c|k>>>c>>1}function Z(){function A(f){a:{for(var b=16;268435456>=b;b*=16)if(f<=b){f=b;break a}f=0}b=c[k(f)>>2];return 0<b.length?b.pop():new ArrayBuffer(f)}
function f(f){c[k(f.byteLength)>>2].push(f)}var c=r(8,function(){return[]});return{alloc:A,free:f,allocType:function(c,b){var f=null;switch(c){case 5120:f=new Int8Array(A(b),0,b);break;case 5121:f=new Uint8Array(A(b),0,b);break;case 5122:f=new Int16Array(A(2*b),0,b);break;case 5123:f=new Uint16Array(A(2*b),0,b);break;case 5124:f=new Int32Array(A(4*b),0,b);break;case 5125:f=new Uint32Array(A(4*b),0,b);break;case 5126:f=new Float32Array(A(4*b),0,b);break;default:return null}return f.length!==b?f.subarray(0,
b):f},freeType:function(c){f(c.buffer)}}}var r=A("./loop");A=Z();A.zero=Z();R.exports=A},{"./loop":31}],33:[function(A,R,Ib){R.exports={next:"function"===typeof requestAnimationFrame?function(k){return requestAnimationFrame(k)}:function(k){return setTimeout(k,16)},cancel:"function"===typeof cancelAnimationFrame?function(k){return cancelAnimationFrame(k)}:clearTimeout}},{}],34:[function(A,R,Ib){R.exports=function(k){return Object.keys(k).sort()}},{}],35:[function(A,R,Ib){var k=A("./pool"),Z=new Float32Array(1),
r=new Uint32Array(Z.buffer);R.exports=function(A){for(var f=k.allocType(5123,A.length),c=0;c<A.length;++c)if(isNaN(A[c]))f[c]=65535;else if(Infinity===A[c])f[c]=31744;else if(-Infinity===A[c])f[c]=64512;else{Z[0]=A[c];var y=r[0],b=y>>>31<<15,v=(y<<1>>>24)-127,y=y>>13&1023;f[c]=-24>v?b:-14>v?b+(y+1024>>-14-v):15<v?b+31744:b+(v+15<<10)+y}return f}},{"./pool":32}],36:[function(A,R,Ib){var k=A("./sorted-object-keys");R.exports=function(A){return k(A).map(function(k){return A[k]})}},{"./sorted-object-keys":34}],
37:[function(A,R,Ib){function k(f,b,k){function r(){var b=window.innerWidth,c=window.innerHeight;f!==document.body&&(c=A.getBoundingClientRect(),b=c.right-c.left,c=c.bottom-c.top);A.width=k*b;A.height=k*c}var A=document.createElement("canvas");c(A.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});f.appendChild(A);f===document.body&&(A.style.position="absolute",c(f.style,{margin:0,padding:0}));var G;f!==document.body&&"function"===typeof ResizeObserver?(G=new ResizeObserver(function(){setTimeout(r)}),
G.observe(f)):window.addEventListener("resize",r,!1);r();return{canvas:A,onDestroy:function(){G?G.disconnect():window.removeEventListener("resize",r);f.removeChild(A)}}}function Z(c,b){function f(k){try{return c.getContext(k,b)}catch(r){return null}}return f("webgl")||f("experimental-webgl")||f("webgl-experimental")}function r(c){if("string"===typeof c)return c.split();f(Array.isArray(c),"invalid extension array");return c}function O(c){return"string"===typeof c?(f("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(c)):c}var f=A("./util/check"),c=A("./util/extend");R.exports=function(c){var b=c||{},v,A,R,G;c={};var F=[],w=[],B="undefined"===typeof window?1:window.devicePixelRatio,N=!1,n=function(b){b&&f.raise(b)},H=function(){};"string"===typeof b?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),v=document.querySelector(b),f(v,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&
"function"===typeof b.getBoundingClientRect?v=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(G=b,R=G.canvas):(f.constructor(b),"gl"in b?G=b.gl:"canvas"in b?R=O(b.canvas):"container"in b&&(A=O(b.container)),"attributes"in b&&(c=b.attributes,f.type(c,"object","invalid context attributes")),"extensions"in b&&(F=r(b.extensions)),"optionalExtensions"in b&&(w=r(b.optionalExtensions)),"onDone"in b&&(f.type(b.onDone,"function","invalid or missing onDone callback"),n=b.onDone),"profile"in
b&&(N=!!b.profile),"pixelRatio"in b&&(B=+b.pixelRatio,f(0<B,"invalid pixel ratio"))):f.raise("invalid arguments to regl");v&&("canvas"===v.nodeName.toLowerCase()?R=v:A=v);if(!G){if(!R){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");v=k(A||document.body,n,B);if(!v)return null;R=v.canvas;H=v.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);G=Z(R,c)}return G?{gl:G,canvas:R,container:A,extensions:F,optionalExtensions:w,pixelRatio:B,
profile:N,onDone:n,onDestroy:H}:(H(),n("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(A,R,Ib){function k(b,c){for(var d=0;d<b.length;++d)if(b[d]===c)return d;return-1}var Z=A("./lib/util/check"),r=A("./lib/util/extend"),O=A("./lib/dynamic"),f=A("./lib/util/raf"),c=A("./lib/util/clock"),y=A("./lib/strings"),b=A("./lib/webgl"),v=A("./lib/extension"),pa=A("./lib/limits"),ea=A("./lib/buffer"),G=A("./lib/elements"),
F=A("./lib/texture"),w=A("./lib/renderbuffer"),B=A("./lib/framebuffer"),N=A("./lib/attribute"),n=A("./lib/shader"),H=A("./lib/read"),ca=A("./lib/core"),I=A("./lib/stats"),be=A("./lib/timer");R.exports=function(e){function g(){if(0===ob.length)K&&K.update(),nc=null;else{nc=f.next(g);a();for(var b=ob.length-1;0<=b;--b){var c=ob[b];c&&c(J,null,0)}ra.flush();K&&K.update()}}function d(){!nc&&0<ob.length&&(nc=f.next(g))}function z(){nc&&(f.cancel(g),nc=null)}function A(a){a.preventDefault();jb=!0;z();ga.forEach(function(a){a()})}
function R(a){ra.getError();jb=!1;Ib.restore();ma.restore();$a.restore();da.restore();Fa.restore();Oa.restore();t.restore();K&&K.restore();$b.procs.refresh();d();ta.forEach(function(a){a()})}function q(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(O.isDynamic(f))e[b]=O.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(O.isDynamic(f[g])){e[b]=O.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;t.length<a;)t.push(null);
return t}Z(!!a,"invalid args to regl({...})");Z.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=r({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");
b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=$b.compile(a,f,e,d,g),k=h.draw,n=h.batch,q=h.scope,t=[];return r(function(a,b){var d;jb&&Z.raise("context lost");if("function"===typeof a)return q.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)q.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)q.call(this,a[d],b,d);else return q.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return n.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return n.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function oa(a,b){var c=0;$b.procs.poll();var d=b.color;d&&(ra.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ra.clearDepth(+b.depth),c|=256);"stencil"in b&&(ra.clearStencil(b.stencil|0),c|=1024);Z(!!c,"called regl.clear with no buffer specified");ra.clear(c)}function L(a){Z.type(a,"function","regl.frame() callback must be a function");
ob.push(a);d();return{cancel:function(){function b(){var a=k(ob,b);ob[a]=ob[ob.length-1];--ob.length;0>=ob.length&&z()}var c=k(ob,a);Z(0<=c,"cannot cancel a frame twice");ob[c]=b}}}function fa(){var a=Ia.viewport,b=Ia.scissor_box;a[0]=a[1]=b[0]=b[1]=0;J.viewportWidth=J.framebufferWidth=J.drawingBufferWidth=a[2]=b[2]=ra.drawingBufferWidth;J.viewportHeight=J.framebufferHeight=J.drawingBufferHeight=a[3]=b[3]=ra.drawingBufferHeight}function a(){J.tick+=1;J.time=X();fa();$b.procs.poll()}function h(){da.refresh();
fa();$b.procs.refresh();K&&K.update()}function X(){return(c()-M)/1E3}console.log("REGL args are:",e);e=b(e);if(!e)return null;var ra=e.gl,xa=ra.getContextAttributes(),jb=ra.isContextLost(),Ib=v(ra,e);if(!Ib)return null;var na=y(),Na=I(),Y=Ib.extensions,K=be(ra,Y),M=c(),P=ra.drawingBufferWidth,sa=ra.drawingBufferHeight,J={tick:0,time:0,viewportWidth:P,viewportHeight:sa,framebufferWidth:P,framebufferHeight:sa,drawingBufferWidth:P,drawingBufferHeight:sa,pixelRatio:e.pixelRatio},P={elements:null,primitive:4,
count:-1,offset:0,instances:-1},Wb=pa(ra,Y),$a=ea(ra,Na,e,function(a){return t.destroyBuffer(a)}),Q=G(ra,Y,$a,Na),t=N(ra,Y,Wb,Na,$a,Q,P),ma=n(ra,na,Na,e),da=F(ra,Y,Wb,function(){$b.procs.poll()},J,Na,e),Fa=w(ra,Y,Wb,Na,e),Oa=B(ra,Y,Wb,da,Fa,Na),$b=ca(ra,na,Y,Wb,$a,Q,da,Oa,{},t,ma,P,J,K,e),na=H(ra,Oa,$b.procs.poll,J,xa,Y,Wb),Ia=$b.next,S=ra.canvas,ob=[],ga=[],ta=[],cc=[e.onDestroy],nc=null;S&&(S.addEventListener("webglcontextlost",A,!1),S.addEventListener("webglcontextrestored",R,!1));var kc=Oa.setFBO=
q({framebuffer:O.define.call(null,1,"framebuffer")});h();xa=r(q,{clear:function(a){Z("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)kc(r({framebuffer:a.framebuffer.faces[b]},a),oa);else kc(a,oa);else oa(null,a)},prop:O.define.bind(null,1),context:O.define.bind(null,2),"this":O.define.bind(null,3),draw:q({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return Q.create(a,
!1)},texture:da.create2D,cube:da.createCube,renderbuffer:Fa.create,framebuffer:Oa.create,framebufferCube:Oa.createCube,vao:t.createVAO,attributes:xa,frame:L,on:function(a,b){Z.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return L(b);case "lost":c=ga;break;case "restore":c=ta;break;case "destroy":c=cc;break;default:Z.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=
c[c.length-1];c.pop();break}}}},limits:Wb,hasExtension:function(a){return 0<=Wb.extensions.indexOf(a.toLowerCase())},read:na,destroy:function(){ob.length=0;z();S&&(S.removeEventListener("webglcontextlost",A),S.removeEventListener("webglcontextrestored",R));ma.clear();Oa.clear();Fa.clear();t.clear();da.clear();Q.clear();$a.clear();K&&K.clear();cc.forEach(function(a){a()})},_gl:ra,_refresh:h,poll:function(){a();K&&K.update()},now:X,stats:Na});e.onDone(null,xa);return xa}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

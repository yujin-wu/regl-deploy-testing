(function(){function A(C,Vb,d){function V(f,c){if(!Vb[f]){if(!C[f]){var y="function"==typeof require&&require;if(!c&&y)return y(f,!0);if(q)return q(f,!0);y=Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y;}y=Vb[f]={exports:{}};C[f][0].call(y.exports,function(b){return V(C[f][1][b]||b)},y,y.exports,A,C,Vb,d)}return Vb[f].exports}for(var q="function"==typeof require&&require,z=0;z<d.length;z++)V(d[z]);return V}return A})()({1:[function(A,C,Vb){var d=A("../regl")(),V=d({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform vec2 screenShape;\n  uniform float time;\n\n  varying vec2 uv;\n\n  vec4 background () {\n    vec2 pos = 0.5 - gl_FragCoord.xy / screenShape;\n    float r = length(pos);\n    float theta = atan(pos.y, pos.x);\n    return vec4(\n      cos(pos.x * time) + sin(pos.y * pos.x * time),\n      cos(100.0 * r * cos(0.3 * time) + theta),\n      sin(time / r + pos.x * cos(10.0 * time + 3.0)),\n      1);\n  }\n\n  void main () {\n    vec4 color = texture2D(texture, uv);\n    float chromakey = step(0.15 + max(color.r, color.b), color.g);\n    gl_FragColor = mix(color, background(), chromakey);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = vec2(1.0 - position.x, position.y);\n    gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n  }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:d.prop("video"),screenShape:function(d){return[d.viewportWidth,d.viewportHeight]},time:d.context("time")},count:3});A("resl")({manifest:{video:{type:"video",src:"assets/doggie-chromakey.ogv",stream:!0}},onDone:function(q){var z=q.video;z.autoplay=
!1;z.loop=!0;z.preload="auto";z.autoload=!0;z.load();var f=document.createElement("button");f.style="position:absolute;left:50%;top:50%";f.innerText="start";document.body.appendChild(f);f.addEventListener("click",function(){z.play();var c=d.texture(z);d.frame(function(){V({video:c.subimage(z)})});f.parentNode.removeChild(f)})}})},{"../regl":39,resl:38}],2:[function(A,C,Vb){function d(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=
this.stride=this.offset=0}var V=A("./util/sorted-object-keys"),q=A("./util/check"),z=A("./util/values"),f=A("./constants/dtypes.json"),c=A("./util/is-typed-array"),y=A("./util/is-ndarray"),b=A("./constants/primitives.json"),t="attributes elements offset count primitive instances".split(" ");C.exports=function(ga,za,H,J,u,B,M){function r(b){if(b!==R.currentVAO){var c=za.oes_vertex_array_object;b?c.bindVertexArrayOES(b.vao):c.bindVertexArrayOES(null);R.currentVAO=b}}function I(b){if(b!==R.currentVAO){if(b)b.bindAttrs();
else{for(var c=za.angle_instanced_arrays,f=0;f<h.length;++f){var g=h[f];g.buffer?(ga.enableVertexAttribArray(f),g.buffer.bind(),ga.vertexAttribPointer(f,g.size,g.type,g.normalized,g.stride,g.offfset),c&&g.divisor&&c.vertexAttribDivisorANGLE(f,g.divisor)):(ga.disableVertexAttribArray(f),ga.vertexAttrib4f(f,g.x,g.y,g.z,g.w))}M.elements?ga.bindBuffer(34963,M.elements.buffer.buffer):ga.bindBuffer(34963,null)}R.currentVAO=b}}function oa(){z(n).forEach(function(b){b.destroy()})}function F(){this.id=++g;
this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=za.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;n[this.id]=this;this.buffers=[]}function Ca(){za.oes_vertex_array_object&&z(n).forEach(function(b){b.refresh()})}var k=H.maxAttributes,h=Array(k);for(H=0;H<k;++H)h[H]=new d;var g=0,n={},R={Record:d,scope:{},state:h,currentVAO:null,targetVAO:null,restore:za.oes_vertex_array_object?Ca:function(){},createVAO:function(g){function m(g){var ca;
if(Array.isArray(g))ca=g,h.elements&&h.ownsElements&&h.elements.destroy(),h.elements=null,h.ownsElements=!1,h.offset=0,h.count=0,h.instances=-1,h.primitive=4;else{q("object"===typeof g,"invalid arguments for create vao");q("attributes"in g,"must specify attributes for vao");if(g.elements){var a=g.elements;h.ownsElements?("function"===typeof a&&"elements"===a._reglType?h.elements.destroy():h.elements(a),h.ownsElements=!1):B.getElements(g.elements)?(h.elements=g.elements,h.ownsElements=!1):(h.elements=
B.create(g.elements),h.ownsElements=!0)}else h.elements=null,h.ownsElements=!1;ca=g.attributes;h.offset=0;h.count=-1;h.instances=-1;h.primitive=4;h.elements&&(h.count=h.elements._elements.vertCount,h.primitive=h.elements._elements.primType);"offset"in g&&(h.offset=g.offset|0);"count"in g&&(h.count=g.count|0);"instances"in g&&(h.instances=g.instances|0);"primitive"in g&&(q(g.primitive in b,"bad primitive type: "+g.primitive),h.primitive=b[g.primitive]);q.optional(function(){for(var a=V(g),b=0;b<a.length;++b)q(0<=
t.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+t)});q(Array.isArray(ca),"attributes must be an array")}q(ca.length<k,"too many attributes");q(0<ca.length,"must specify at least one attribute");var a={},e=h.attributes;e.length=ca.length;for(var X=0;X<ca.length;++X){var n=ca[X],r=e[X]=new d,R=n.data||n;if(Array.isArray(R)||c(R)||y(R)){var F;h.buffers[X]&&(F=h.buffers[X],c(R)&&F._buffer.byteLength>=R.byteLength?F.subdata(R):(F.destroy(),h.buffers[X]=null));h.buffers[X]||(F=h.buffers[X]=
u.create(n,34962,!1,!0));r.buffer=u.getBuffer(F);r.size=r.buffer.dimension|0;r.normalized=!1;r.type=r.buffer.dtype;r.offset=0;r.stride=0;r.divisor=0;r.state=1;a[X]=1}else u.getBuffer(n)?(r.buffer=u.getBuffer(n),r.size=r.buffer.dimension|0,r.normalized=!1,r.type=r.buffer.dtype,r.offset=0,r.stride=0,r.divisor=0,r.state=1):u.getBuffer(n.buffer)?(r.buffer=u.getBuffer(n.buffer),r.size=(+n.size||r.buffer.dimension)|0,r.normalized=!!n.normalized||!1,"type"in n?(q.parameter(n.type,f,"invalid buffer type"),
r.type=f[n.type]):r.type=r.buffer.dtype,r.offset=(n.offset||0)|0,r.stride=(n.stride||0)|0,r.divisor=(n.divisor||0)|0,r.state=1,q(1<=r.size&&4>=r.size,"size must be between 1 and 4"),q(0<=r.offset,"invalid offset"),q(0<=r.stride&&255>=r.stride,"stride must be between 0 and 255"),q(0<=r.divisor,"divisor must be positive"),q(!r.divisor||!!za.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in n?(q(0<X,"first attribute must not be a constant"),r.x=+n.x||0,r.y=+n.y||
0,r.z=+n.z||0,r.w=+n.w||0,r.state=2):q(!1,"invalid attribute spec for location "+X)}for(F=0;F<h.buffers.length;++F)!a[F]&&h.buffers[F]&&(h.buffers[F].destroy(),h.buffers[F]=null);h.refresh();return m}var h=new F;J.vaoCount+=1;m.destroy=function(){for(var b=0;b<h.buffers.length;++b)h.buffers[b]&&h.buffers[b].destroy();h.buffers.length=0;h.ownsElements&&(h.elements.destroy(),h.elements=null,h.ownsElements=!1);h.destroy()};m._vao=h;m._reglType="vao";return m(g)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var c=0;c<h.length;++c){var g=h[c];g.buffer===b&&(ga.disableVertexAttribArray(c),g.buffer=null)}},setVAO:za.oes_vertex_array_object?r:I,clear:za.oes_vertex_array_object?oa:function(){}};F.prototype.bindAttrs=function(){for(var b=za.angle_instanced_arrays,c=this.attributes,g=0;g<c.length;++g){var f=c[g];f.buffer?(ga.enableVertexAttribArray(g),ga.bindBuffer(34962,f.buffer.buffer),ga.vertexAttribPointer(g,f.size,f.type,f.normalized,f.stride,
f.offset),b&&f.divisor&&b.vertexAttribDivisorANGLE(g,f.divisor)):(ga.disableVertexAttribArray(g),ga.vertexAttrib4f(g,f.x,f.y,f.z,f.w))}for(b=c.length;b<k;++b)ga.disableVertexAttribArray(b);(b=B.getElements(this.elements))?ga.bindBuffer(34963,b.buffer.buffer):ga.bindBuffer(34963,null)};F.prototype.refresh=function(){var b=za.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),R.currentVAO=null,b.bindVertexArrayOES(null))};F.prototype.destroy=function(){if(this.vao){var b=za.oes_vertex_array_object;
this===R.currentVAO&&(R.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);n[this.id]&&(delete n[this.id],--J.vaoCount)};return R}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(A,C,Vb){function d(b){return H[Object.prototype.toString.call(b)]|
0}function V(b,c){for(var f=0;f<c.length;++f)b[f]=c[f]}function q(b,c,f,d,y,t,k){for(var h=0,g=0;g<f;++g)for(var n=0;n<d;++n)b[h++]=c[y*g+t*n+k]}var z=A("./util/sorted-object-keys"),f=A("./util/check"),c=A("./util/is-typed-array"),y=A("./util/is-ndarray"),b=A("./util/values"),t=A("./util/pool");Vb=A("./util/flatten");var ga=Vb.flatten,za=Vb.shape,H=A("./constants/arraytypes.json"),J=A("./constants/dtypes.json"),u=A("./constants/usage.json"),B=[];B[5120]=1;B[5122]=2;B[5124]=4;B[5121]=1;B[5123]=2;B[5125]=
4;B[5126]=4;C.exports=function(H,r,I,oa){function F(b){this.id=g++;this.buffer=H.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;I.profile&&(this.stats={size:0})}function Ca(b,c,f){b.byteLength=c.byteLength;H.bufferData(b.type,c,f)}function k(b,g,h,k,n,a){b.usage=h;if(Array.isArray(g)){if(b.dtype=k||5126,0<g.length)if(Array.isArray(g[0])){n=za(g);for(var e=k=1;e<n.length;++e)k*=n[e];b.dimension=k;g=ga(g,n,b.dtype);Ca(b,g,h);a?
b.persistentData=g:t.freeType(g)}else"number"===typeof g[0]?(b.dimension=n,n=t.allocType(b.dtype,g.length),V(n,g),Ca(b,n,h),a?b.persistentData=n:t.freeType(n)):c(g[0])?(b.dimension=g[0].length,b.dtype=k||d(g[0])||5126,g=ga(g,[g.length,g[0].length],b.dtype),Ca(b,g,h),a?b.persistentData=g:t.freeType(g)):f.raise("invalid buffer data")}else if(c(g))b.dtype=k||d(g),b.dimension=n,Ca(b,g,h),a&&(b.persistentData=new Uint8Array(new Uint8Array(g.buffer)));else if(y(g)){n=g.shape;var X=g.stride,e=g.offset,r=
0,u=0,R=0,F=0;1===n.length?(r=n[0],u=1,R=X[0],F=0):2===n.length?(r=n[0],u=n[1],R=X[0],F=X[1]):f.raise("invalid shape");b.dtype=k||d(g.data)||5126;b.dimension=u;n=t.allocType(b.dtype,r*u);q(n,g.data,r,u,R,F,e);Ca(b,n,h);a?b.persistentData=n:t.freeType(n)}else g instanceof ArrayBuffer?(b.dtype=5121,b.dimension=n,Ca(b,g,h),a&&(b.persistentData=new Uint8Array(new Uint8Array(g)))):f.raise("invalid buffer data")}function h(b){r.bufferCount--;oa(b);var c=b.buffer;f(c,"buffer must not be deleted already");
H.deleteBuffer(c);b.buffer=null;delete n[b.id]}var g=0,n={};F.prototype.bind=function(){H.bindBuffer(this.type,this.buffer)};F.prototype.destroy=function(){h(this)};var R=[];I.profile&&(r.getTotalBufferSize=function(){var b=0;z(n).forEach(function(c){b+=n[c].stats.size});return b});return{create:function(b,g,R,L){function z(b){var a=35044,g=null,h=0,m=0,n=1;Array.isArray(b)||c(b)||y(b)||b instanceof ArrayBuffer?g=b:"number"===typeof b?h=b|0:b&&(f.type(b,"object","buffer arguments must be an object, a number or an array"),
"data"in b&&(f(null===g||Array.isArray(g)||c(g)||y(g),"invalid data for buffer"),g=b.data),"usage"in b&&(f.parameter(b.usage,u,"invalid buffer usage"),a=u[b.usage]),"type"in b&&(f.parameter(b.type,J,"invalid buffer type"),m=J[b.type]),"dimension"in b&&(f.type(b.dimension,"number","invalid dimension"),n=b.dimension|0),"length"in b&&(f.nni(h,"buffer length must be a nonnegative integer"),h=b.length|0));e.bind();g?k(e,g,a,m,n,L):(h&&H.bufferData(e.type,h,a),e.dtype=m||5121,e.usage=a,e.dimension=n,e.byteLength=
h);I.profile&&(e.stats.size=e.byteLength*B[e.dtype]);return z}function a(b,a){f(a+b.byteLength<=e.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+a+" to a buffer of size "+e.byteLength);H.bufferSubData(e.type,a,b)}r.bufferCount++;var e=new F(g);n[e.id]=e;R||z(b);z._reglType="buffer";z._buffer=e;z.subdata=function(b,g){var h=(g||0)|0,m;e.bind();if(c(b)||b instanceof ArrayBuffer)a(b,h);else if(Array.isArray(b)){if(0<b.length)if("number"===
typeof b[0]){var k=t.allocType(e.dtype,b.length);V(k,b);a(k,h);t.freeType(k)}else Array.isArray(b[0])||c(b[0])?(m=za(b),k=ga(b,m,e.dtype),a(k,h),t.freeType(k)):f.raise("invalid buffer data")}else if(y(b)){m=b.shape;var n=b.stride,r=k=0,u=0,R=0;1===m.length?(k=m[0],r=1,u=n[0],R=0):2===m.length?(k=m[0],r=m[1],u=n[0],R=n[1]):f.raise("invalid shape");m=Array.isArray(b.data)?e.dtype:d(b.data);m=t.allocType(m,k*r);q(m,b.data,k,r,u,R,b.offset);a(m,h);t.freeType(m)}else f.raise("invalid data for buffer subdata");
return z};I.profile&&(z.stats=e.stats);z.destroy=function(){h(e)};return z},createStream:function(b,g){var c=R.pop();c||(c=new F(b));c.bind();k(c,g,35040,0,1,!1);return c},destroyStream:function(b){R.push(b)},clear:function(){b(n).forEach(h);R.forEach(h)},getBuffer:function(b){return b&&b._buffer instanceof F?b._buffer:null},restore:function(){b(n).forEach(function(b){b.buffer=H.createBuffer();H.bindBuffer(b.type,b.buffer);H.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:k}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(A,C,Vb){C.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(A,C,Vb){C.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(A,C,Vb){C.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(A,C,Vb){C.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(A,C,Vb){function d(b){return Array.isArray(b)||H(b)||J(b)}function V(b){return b.sort(function(b,
g){return"viewport"===b?-1:"viewport"===g?1:b<g?-1:1})}function q(b,g,c,f){this.thisDep=b;this.contextDep=g;this.propDep=c;this.append=f}function z(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function f(b){return new q(!1,!1,!1,b)}function c(b,g){var c=b.type;if(0===c)return c=b.data.length,new q(!0,1<=c,2<=c,g);if(4===c)return c=b.data,new q(c.thisDep,c.contextDep,c.propDep,g);if(5===c)return new q(!1,!1,!1,g);if(6===c){for(var f=c=!1,h=!1,a=0;a<b.data.length;++a){var e=b.data[a];1===e.type?
h=!0:2===e.type?f=!0:3===e.type?c=!0:0===e.type?(c=!0,e=e.data,1<=e&&(f=!0),2<=e&&(h=!0)):4===e.type&&(c=c||e.data.thisDep,f=f||e.data.contextDep,h=h||e.data.propDep)}return new q(c,f,h,g)}return new q(3===c,2===c,1===c,g)}var y=A("./util/sorted-object-keys"),b=A("./util/check"),t=A("./util/extend"),ga=A("./util/codegen"),za=A("./util/loop"),H=A("./util/is-typed-array"),J=A("./util/is-ndarray"),u=A("./util/is-array-like"),B=A("./dynamic"),M=A("./constants/primitives.json"),r=A("./constants/dtypes.json"),
I=["x","y","z","w"],oa="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),F={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ca="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
k={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},h={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},g={frag:35632,vert:35633},n={cw:2304,ccw:2305},R=new q(!1,!1,!1,function(){});C.exports=function(H,m,J,L,da,a,e,X,pa,fd,Fb,ac,ra,Na,Y){function K(b){return b.replace(".","_")}function N(b,p,a){var c=K(b);
aa.push(b);v[c]=E[c]=!!a;T[c]=p}function S(b,p,a){var c=K(b);aa.push(b);Array.isArray(a)?(E[c]=a.slice(),v[c]=a.slice()):E[c]=v[c]=a;wa[c]=p}function na(){var a=ga(),p=a.link,c=a.global;a.id=mc++;a.batchId="0";var g=p(ka),f=a.shared={props:"a0"};y(ka).forEach(function(b){f[b]=c.def(g,".",b)});b.optional(function(){a.CHECK=p(b);a.commandStr=b.guessCommand();a.command=p(a.commandStr);a.assert=function(b,a,c){b("if(!(",a,"))",this.CHECK,".commandRaise(",p(c),",",this.command,");")};l.invalidBlendCombinations=
Ca});var T=a.next={},h=a.current={};y(wa).forEach(function(b){Array.isArray(E[b])&&(T[b]=c.def(f.next,".",b),h[b]=c.def(f.current,".",b))});var e=a.constants={};y(l).forEach(function(b){e[b]=c.def(JSON.stringify(l[b]))});a.invoke=function(b,c){switch(c.type){case 0:var g=["this",f.context,f.props,a.batchId];return b.def(p(c.data),".call(",g.slice(0,Math.max(c.data.length+1,4)),")");case 1:return b.def(f.props,c.data);case 2:return b.def(f.context,c.data);case 3:return b.def("this",c.data);case 4:return c.data.append(a,
b),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(p){return a.invoke(b,p)})}};a.attribCache={};var xd={};a.scopeAttrib=function(b){b=m.id(b);if(b in xd)return xd[b];var a=fd.scope[b];a||(a=fd.scope[b]=new ha);return xd[b]=p(a)};return a}function O(b){var p=b["static"];b=b.dynamic;var a;if("profile"in p){var g=!!p.profile;a=f(function(b,p){return g});a.enable=g}else if("profile"in b){var l=b.profile;a=c(l,function(b,p){return b.invoke(p,l)})}return a}function A(a,p){var g=
a["static"],l=a.dynamic;if("framebuffer"in g){var T=g.framebuffer;return T?(T=X.getFramebuffer(T),b.command(T,"invalid framebuffer object"),f(function(b,p){var a=b.link(T),c=b.shared;p.set(c.framebuffer,".next",a);c=c.context;p.set(c,".framebufferWidth",a+".width");p.set(c,".framebufferHeight",a+".height");return a})):f(function(b,p){var a=b.shared;p.set(a.framebuffer,".next","null");a=a.context;p.set(a,".framebufferWidth",a+".drawingBufferWidth");p.set(a,".framebufferHeight",a+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var h=l.framebuffer;return c(h,function(a,p){var c=a.invoke(p,h),g=a.shared,l=g.framebuffer,U=p.def(l,".getFramebuffer(",c,")");b.optional(function(){a.assert(p,"!"+c+"||"+U,"invalid framebuffer object")});p.set(l,".next",U);g=g.context;p.set(g,".framebufferWidth",U+"?"+U+".width:"+g+".drawingBufferWidth");p.set(g,".framebufferHeight",U+"?"+U+".height:"+g+".drawingBufferHeight");return U})}return null}function $a(a,p,g){function l(a){if(a in f){var U=f[a];b.commandType(U,
"object","invalid "+a,g.commandStr);var h=!0,e=U.x|0,k=U.y|0,m,n;"width"in U?(m=U.width|0,b.command(0<=m,"invalid "+a,g.commandStr)):h=!1;"height"in U?(n=U.height|0,b.command(0<=n,"invalid "+a,g.commandStr)):h=!1;return new q(!h&&p&&p.thisDep,!h&&p&&p.contextDep,!h&&p&&p.propDep,function(b,a){var p=b.shared.context,c=m;"width"in U||(c=a.def(p,".","framebufferWidth","-",e));var g=n;"height"in U||(g=a.def(p,".","framebufferHeight","-",k));return[e,k,c,g]})}if(a in T){var v=T[a],h=c(v,function(p,c){var g=
p.invoke(c,v);b.optional(function(){p.assert(c,g+"&&typeof "+g+'==="object"',"invalid "+a)});var l=p.shared.context,U=c.def(g,".x|0"),f=c.def(g,".y|0"),h=c.def('"width" in ',g,"?",g,".width|0:","(",l,".","framebufferWidth","-",U,")"),T=c.def('"height" in ',g,"?",g,".height|0:","(",l,".","framebufferHeight","-",f,")");b.optional(function(){p.assert(c,h+">=0&&"+T+">=0","invalid "+a)});return[U,f,h,T]});p&&(h.thisDep=h.thisDep||p.thisDep,h.contextDep=h.contextDep||p.contextDep,h.propDep=h.propDep||p.propDep);
return h}return p?new q(p.thisDep,p.contextDep,p.propDep,function(b,a){var p=b.shared.context;return[0,0,a.def(p,".","framebufferWidth"),a.def(p,".","framebufferHeight")]}):null}var f=a["static"],T=a.dynamic;if(a=l("viewport")){var h=a;a=new q(a.thisDep,a.contextDep,a.propDep,function(b,a){var p=h.append(b,a),c=b.shared.context;a.set(c,".viewportWidth",p[2]);a.set(c,".viewportHeight",p[3]);return p})}return{viewport:a,scissor_box:l("scissor.box")}}function P(a,p){var c=a["static"];if("string"===typeof c.frag&&
"string"===typeof c.vert){if(0<y(p.dynamic).length)return null;var c=p["static"],g=y(c);if(0<g.length&&"number"===typeof c[g[0]]){for(var l=[],f=0;f<g.length;++f)b("number"===typeof c[g[f]],"must specify all vertex attribute locations when using vaos"),l.push([c[g[f]]|0,g[f]]);return l}}return null}function w(a,p,l){function h(a){if(a in T){var p=m.id(T[a]);b.optional(function(){Fb.shader(g[a],p,b.guessCommand())});var l=f(function(){return p});l.id=p;return l}if(a in e){var U=e[a];return c(U,function(p,
c){var l=p.invoke(c,U),f=c.def(p.shared.strings,".id(",l,")");b.optional(function(){c(p.shared.shader,".shader(",g[a],",",f,",",p.command,");")});return f})}return null}var T=a["static"],e=a.dynamic,k=h("frag"),n=h("vert"),xd=null;z(k)&&z(n)?(xd=Fb.program(n.id,k.id,null,l),a=f(function(b,a){return b.link(xd)})):a=new q(k&&k.thisDep||n&&n.thisDep,k&&k.contextDep||n&&n.contextDep,k&&k.propDep||n&&n.propDep,function(a,p){var c=a.shared.shader,g;g=k?k.append(a,p):p.def(c,".","frag");var l;l=n?n.append(a,
p):p.def(c,".","vert");var f=c+".program("+l+","+g;b.optional(function(){f+=","+a.command});return p.def(f+")")});return{frag:k,vert:n,progVar:a,program:xd}}function ia(g,p){function l(a,g){if(a in h){var U=h[a]|0;g?e.offset=U:e.instances=U;b.command(!g||0<=U,"invalid "+a,p.commandStr);return f(function(b,a){g&&(b.OFFSET=U);return U})}if(a in T){var Gc=T[a];return c(Gc,function(p,c){var l=p.invoke(c,Gc);g&&(p.OFFSET=l,b.optional(function(){p.assert(c,l+">=0","invalid "+a)}));return l})}if(g){if(xd)return f(function(b,
a){return b.OFFSET=0});if(k)return new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(k)return new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var h=g["static"],T=g.dynamic,e={},k=!1,m=function(){if("vao"in h){var b=h.vao;null!==b&&null===fd.getVAO(b)&&(b=fd.createVAO(b));k=!0;e.vao=b;return f(function(a){var p=
fd.getVAO(b);return p?a.link(p):"null"})}if("vao"in T){k=!0;var a=T.vao;return c(a,function(b,p){var c=b.invoke(p,a);return p.def(b.shared.vao+".getVAO("+c+")")})}return null}(),xd=!1,n=function(){if("elements"in h){var g=h.elements;e.elements=g;if(d(g)){var l=e.elements=a.create(g,!0),g=a.getElements(l);xd=!0}else g&&(g=a.getElements(g),xd=!0,b.command(g,"invalid elements",p.commandStr));l=f(function(b,a){if(g){var p=b.link(g);return b.ELEMENTS=p}return b.ELEMENTS=null});l.value=g;return l}if("elements"in
T){xd=!0;var U=T.elements;return c(U,function(a,p){var c=a.shared,g=c.isBufferArgs,c=c.elements,l=a.invoke(p,U),f=p.def("null"),g=p.def(g,"(",l,")"),h=a.cond(g).then(f,"=",c,".createStream(",l,");")["else"](f,"=",c,".getElements(",l,");");b.optional(function(){a.assert(h["else"],"!"+l+"||"+f,"invalid elements")});p.entry(h);p.exit(a.cond(g).then(c,".destroyStream(",f,");"));return a.ELEMENTS=f})}return k?new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+
b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),Gc=l("offset",!0),v=function(){if("primitive"in h){var a=h.primitive;e.primitive=a;b.commandParameter(a,M,"invalid primitve",p.commandStr);return f(function(b,p){return M[a]})}if("primitive"in T){var g=T.primitive;return c(g,function(a,p){var c=a.constants.primTypes,l=a.invoke(p,g);b.optional(function(){a.assert(p,l+" in "+c,"invalid primitive, must be one of "+y(M))});return p.def(c,"[",l,"]")})}return xd?z(n)?
n.value?f(function(b,a){return a.def(b.ELEMENTS,".primType")}):f(function(){return 4}):new q(n.thisDep,n.contextDep,n.propDep,function(b,a){var p=b.ELEMENTS;return a.def(p,"?",p,".primType:",4)}):k?new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),w=function(){if("count"in h){var a=h.count|0;e.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",p.commandStr);return f(function(){return a})}if("count"in
T){var g=T.count;return c(g,function(a,p){var c=a.invoke(p,g);b.optional(function(){a.assert(p,"typeof "+c+'==="number"&&'+c+">=0&&"+c+"===("+c+"|0)","invalid vertex count")});return c})}if(xd){if(z(n)){if(n)return Gc?new q(Gc.thisDep,Gc.contextDep,Gc.propDep,function(a,p){var c=p.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(p,c+">=0","invalid vertex offset/element buffer too small")});return c}):f(function(b,a){return a.def(b.ELEMENTS,".vertCount")});var l=f(function(){return-1});
b.optional(function(){l.MISSING=!0});return l}var U=new q(n.thisDep||Gc.thisDep,n.contextDep||Gc.contextDep,n.propDep||Gc.propDep,function(b,a){var p=b.ELEMENTS;return b.OFFSET?a.def(p,"?",p,".vertCount-",b.OFFSET,":-1"):a.def(p,"?",p,".vertCount:-1")});b.optional(function(){U.DYNAMIC=!0});return U}return k?new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),ka=l("instances",!1);return{elements:n,primitive:v,
count:w,instances:ka,offset:Gc,vao:m,vaoActive:k,elementsActive:xd,"static":e}}function ba(a,p){var g=a["static"],l=a.dynamic,T={};aa.forEach(function(a){function U(b,p){if(a in g){var h=b(g[a]);T[e]=f(function(){return h})}else if(a in l){var k=l[a];T[e]=c(k,function(b,a){return p(b,a,b.invoke(a,k))})}}var e=K(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return U(function(c){b.commandType(c,
"boolean",a,p.commandStr);return c},function(p,c,g){b.optional(function(){p.assert(c,"typeof "+g+'==="boolean"',"invalid flag "+a,p.commandStr)});return g});case "depth.func":return U(function(c){b.commandParameter(c,k,"invalid "+a,p.commandStr);return k[c]},function(p,c,g){var l=p.constants.compareFuncs;b.optional(function(){p.assert(c,g+" in "+l,"invalid "+a+", must be one of "+y(k))});return c.def(l,"[",g,"]")});case "depth.range":return U(function(a){b.command(u(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",p.commandStr);return a},function(a,p,c){b.optional(function(){a.assert(p,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var g=p.def("+",c,"[0]"),l=p.def("+",c,"[1]");return[g,l]});case "blend.func":return U(function(a){b.commandType(a,"object","blend.func",p.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,g="srcAlpha"in a?a.srcAlpha:
a.src,l="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(c,F,e+".srcRGB",p.commandStr);b.commandParameter(g,F,e+".srcAlpha",p.commandStr);b.commandParameter(l,F,e+".dstRGB",p.commandStr);b.commandParameter(a,F,e+".dstAlpha",p.commandStr);b.command(-1===Ca.indexOf(c+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+l+")",p.commandStr);return[F[c],F[l],F[g],F[a]]},function(p,c,g){function l(f,h){var T=c.def('"',f,h,'" in ',g,"?",g,".",f,h,":",g,".",
f);b.optional(function(){p.assert(c,T+" in "+U,"invalid "+a+"."+f+h+", must be one of "+y(F))});return T}var U=p.constants.blendFuncs;b.optional(function(){p.assert(c,g+"&&typeof "+g+'==="object"',"invalid blend func, must be an object")});var f=l("src","RGB"),h=l("dst","RGB");b.optional(function(){p.assert(c,p.constants.invalidBlendCombinations+".indexOf("+f+'+", "+'+h+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var T=c.def(U,"[",f,"]"),e=c.def(U,"[",l("src","Alpha"),"]"),
k=c.def(U,"[",h,"]"),m=c.def(U,"[",l("dst","Alpha"),"]");return[T,k,e,m]});case "blend.equation":return U(function(c){if("string"===typeof c)return b.commandParameter(c,sa,"invalid "+a,p.commandStr),[sa[c],sa[c]];if("object"===typeof c)return b.commandParameter(c.rgb,sa,a+".rgb",p.commandStr),b.commandParameter(c.alpha,sa,a+".alpha",p.commandStr),[sa[c.rgb],sa[c.alpha]];b.commandRaise("invalid blend.equation",p.commandStr)},function(p,c,g){var l=p.constants.blendEquations,U=c.def(),f=c.def(),h=p.cond("typeof ",
g,'==="string"');b.optional(function(){function b(a,c,g){p.assert(a,g+" in "+l,"invalid "+c+", must be one of "+y(sa))}b(h.then,a,g);p.assert(h["else"],g+"&&typeof "+g+'==="object"',"invalid "+a);b(h["else"],a+".rgb",g+".rgb");b(h["else"],a+".alpha",g+".alpha")});h.then(U,"=",f,"=",l,"[",g,"];");h["else"](U,"=",l,"[",g,".rgb];",f,"=",l,"[",g,".alpha];");c(h);return[U,f]});case "blend.color":return U(function(a){b.command(u(a)&&4===a.length,"blend.color must be a 4d array",p.commandStr);return za(4,
function(b){return+a[b]})},function(a,p,c){b.optional(function(){a.assert(p,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return za(4,function(a){return p.def("+",c,"[",a,"]")})});case "stencil.mask":return U(function(a){b.commandType(a,"number",e,p.commandStr);return a|0},function(a,p,c){b.optional(function(){a.assert(p,"typeof "+c+'==="number"',"invalid stencil.mask")});return p.def(c,"|0")});case "stencil.func":return U(function(c){b.commandType(c,"object",
e,p.commandStr);var g=c.cmp||"keep",l=c.ref||0;c="mask"in c?c.mask:-1;b.commandParameter(g,k,a+".cmp",p.commandStr);b.commandType(l,"number",a+".ref",p.commandStr);b.commandType(c,"number",a+".mask",p.commandStr);return[k[g],l,c]},function(a,p,c){var g=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(p,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(c+"&&typeof ",c,'==="object"');b('!("cmp" in ',c,")||(",c,".cmp in ",g,")")});var l=p.def('"cmp" in ',c,"?",g,"[",
c,".cmp]",":",7680),U=p.def(c,".ref|0"),f=p.def('"mask" in ',c,"?",c,".mask|0:-1");return[l,U,f]});case "stencil.opFront":case "stencil.opBack":return U(function(c){b.commandType(c,"object",e,p.commandStr);var g=c.fail||"keep",l=c.zfail||"keep";c=c.zpass||"keep";b.commandParameter(g,h,a+".fail",p.commandStr);b.commandParameter(l,h,a+".zfail",p.commandStr);b.commandParameter(c,h,a+".zpass",p.commandStr);return["stencil.opBack"===a?1029:1028,h[g],h[l],h[c]]},function(p,c,g){function l(f){b.optional(function(){p.assert(c,
'!("'+f+'" in '+g+")||("+g+"."+f+" in "+U+")","invalid "+a+"."+f+", must be one of "+y(h))});return c.def('"',f,'" in ',g,"?",U,"[",g,".",f,"]:",7680)}var U=p.constants.stencilOps;b.optional(function(){p.assert(c,g+"&&typeof "+g+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return U(function(a){b.commandType(a,"object",e,p.commandStr);var c=a.factor|0;a=a.units|0;b.commandType(c,"number",e+".factor",p.commandStr);
b.commandType(a,"number",e+".units",p.commandStr);return[c,a]},function(c,p,g){b.optional(function(){c.assert(p,g+"&&typeof "+g+'==="object"',"invalid "+a)});var l=p.def(g,".factor|0"),U=p.def(g,".units|0");return[l,U]});case "cull.face":return U(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);b.command(!!c,e,p.commandStr);return c},function(a,c,p){b.optional(function(){a.assert(c,p+'==="front"||'+p+'==="back"',"invalid cull.face")});return c.def(p,'==="front"?',1028,":",1029)});case "lineWidth":return U(function(a){b.command("number"===
typeof a&&a>=L.lineWidthDims[0]&&a<=L.lineWidthDims[1],"invalid line width, must be a positive number between "+L.lineWidthDims[0]+" and "+L.lineWidthDims[1],p.commandStr);return a},function(a,c,p){b.optional(function(){a.assert(c,"typeof "+p+'==="number"&&'+p+">="+L.lineWidthDims[0]+"&&"+p+"<="+L.lineWidthDims[1],"invalid line width")});return p});case "frontFace":return U(function(a){b.commandParameter(a,n,e,p.commandStr);return n[a]},function(a,p,c){b.optional(function(){a.assert(p,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return p.def(c+'==="cw"?2304:2305')});case "colorMask":return U(function(a){b.command(u(a)&&4===a.length,"color.mask must be length 4 array",p.commandStr);return a.map(function(a){return!!a})},function(a,c,p){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+p+")&&"+p+".length===4","invalid color.mask")});return za(4,function(a){return"!!"+p+"["+a+"]"})});case "sample.coverage":return U(function(a){b.command("object"===typeof a&&a,
e,p.commandStr);var c="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",p.commandStr);return[c,a]},function(a,c,p){b.optional(function(){a.assert(c,p+"&&typeof "+p+'==="object"',"invalid sample.coverage")});var g=c.def('"value" in ',p,"?+",p,".value:1"),l=c.def("!!",p,".invert");return[g,l]})}});return T}function Fa(a,p){var g=a["static"],l=a.dynamic,h={};y(g).forEach(function(a){var c=g[a],l;if("number"===typeof c||
"boolean"===typeof c)l=f(function(){return c});else if("function"===typeof c){var U=c._reglType;"texture2d"===U||"textureCube"===U?l=f(function(a){return a.link(c)}):"framebuffer"===U||"framebufferCube"===U?(b.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',p.commandStr),l=f(function(a){return a.link(c.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',p.commandStr)}else u(c)?l=f(function(p){return p.global.def("[",za(c.length,function(g){b.command("number"===
typeof c[g]||"boolean"===typeof c[g],"invalid uniform "+a,p.commandStr);return c[g]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',p.commandStr);l.value=c;h[a]=l});y(l).forEach(function(a){var b=l[a];h[a]=c(b,function(a,c){return a.invoke(c,b)})});return h}function Oa(a,p){var g=a["static"],l=a.dynamic,h={};y(g).forEach(function(a){var c=g[a],l=m.id(a),U=new ha;if(d(c))U.state=1,U.buffer=da.getBuffer(da.create(c,34962,!1,!0)),U.type=0;else{var T=da.getBuffer(c);if(T)U.state=
1,U.buffer=T,U.type=0;else if(b.command("object"===typeof c&&c,"invalid data for attribute "+a,p.commandStr),"constant"in c){var e=c.constant;U.buffer="null";U.state=2;"number"===typeof e?U.x=e:(b.command(u(e)&&0<e.length&&4>=e.length,"invalid constant for attribute "+a,p.commandStr),I.forEach(function(a,b){b<e.length&&(U[a]=e[b])}))}else{T=d(c.buffer)?da.getBuffer(da.create(c.buffer,34962,!1,!0)):da.getBuffer(c.buffer);b.command(!!T,'missing buffer for attribute "'+a+'"',p.commandStr);var k=c.offset|
0;b.command(0<=k,'invalid offset for attribute "'+a+'"',p.commandStr);var n=c.stride|0;b.command(0<=n&&256>n,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',p.commandStr);var v=c.size|0;b.command(!("size"in c)||0<v&&4>=v,'invalid size for attribute "'+a+'", must be 1,2,3,4',p.commandStr);var w=!!c.normalized,ka=0;"type"in c&&(b.commandParameter(c.type,r,"invalid type for attribute "+a,p.commandStr),ka=r[c.type]);var x=c.divisor|0;b.optional(function(){"divisor"in c&&(b.command(0===
x||Q,'cannot specify divisor for attribute "'+a+'", instancing not supported',p.commandStr),b.command(0<=x,'invalid divisor for attribute "'+a+'"',p.commandStr));var g=p.commandStr,l="buffer offset divisor normalized type size stride".split(" ");y(c).forEach(function(c){b.command(0<=l.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+l+")",g)})});U.buffer=T;U.state=1;U.size=v;U.normalized=w;U.type=ka||T.dtype;U.offset=k;U.stride=n;U.divisor=x}}h[a]=f(function(a,
b){var c=a.attribCache;if(l in c)return c[l];var p={isStream:!1};y(U).forEach(function(a){p[a]=U[a]});U.buffer&&(p.buffer=a.link(U.buffer),p.type=p.type||p.buffer+".dtype");return c[l]=p})});y(l).forEach(function(a){var p=l[a];h[a]=c(p,function(c,g){function l(a){g(k[a],"=",U,".",a,"|0;")}var U=c.invoke(g,p),f=c.shared,h=c.constants,T=f.isBufferArgs,e=f.buffer;b.optional(function(){c.assert(g,U+"&&(typeof "+U+'==="object"||typeof '+U+'==="function")&&('+T+"("+U+")||"+e+".getBuffer("+U+")||"+e+".getBuffer("+
U+".buffer)||"+T+"("+U+'.buffer)||("constant" in '+U+"&&(typeof "+U+'.constant==="number"||'+f.isArrayLike+"("+U+".constant))))",'invalid dynamic attribute "'+a+'"')});var k={isStream:g.def(!1)},m=new ha;m.state=1;y(m).forEach(function(a){k[a]=g.def(""+m[a])});var n=k.buffer,v=k.type;g("if(",T,"(",U,")){",k.isStream,"=true;",n,"=",e,".createStream(",34962,",",U,");",v,"=",n,".dtype;","}else{",n,"=",e,".getBuffer(",U,");","if(",n,"){",v,"=",n,".dtype;",'}else if("constant" in ',U,"){",k.state,"=",
2,";","if(typeof "+U+'.constant === "number"){',k[I[0]],"=",U,".constant;",I.slice(1).map(function(a){return k[a]}).join("="),"=0;","}else{",I.map(function(a,b){return k[a]+"="+U+".constant.length>"+b+"?"+U+".constant["+b+"]:0;"}).join(""),"}}else{","if(",T,"(",U,".buffer)){",n,"=",e,".createStream(",34962,",",U,".buffer);","}else{",n,"=",e,".getBuffer(",U,".buffer);","}",v,'="type" in ',U,"?",h.glTypes,"[",U,".type]:",n,".dtype;",k.normalized,"=!!",U,".normalized;");l("size");l("offset");l("stride");
l("divisor");g("}}");g.exit("if(",k.isStream,"){",e,".destroyStream(",n,");","}");return k})});return h}function dc(a){var b=a["static"],g=a.dynamic,l={};y(b).forEach(function(a){var c=b[a];l[a]=f(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});y(g).forEach(function(a){var b=g[a];l[a]=c(b,function(a,c){return a.invoke(c,b)})});return l}function Ia(a,c,g,l,f){function h(a){var b=n[a];b&&(ka[a]=b)}var T=a["static"],e=a.dynamic;b.optional(function(){function a(p){y(p).forEach(function(a){b.command(0<=
c.indexOf(a),'unknown parameter "'+a+'"',f.commandStr)})}var c="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(aa);a(T);a(e)});var k=P(a,c),m=A(a,f),n=$a(a,m,f),v=ia(a,f),ka=ba(a,f),x=w(a,f,k);h("viewport");h(K("scissor.box"));var d=0<y(ka).length,m={framebuffer:m,draw:v,shader:x,state:ka,dirty:d,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=O(a,f);m.uniforms=Fa(g,f);m.drawVAO=m.scopeVAO=v.vao;if(!m.drawVAO&&x.program&&!k&&J.angle_instanced_arrays&&
v["static"].elements){var r=!0;a=x.program.attributes.map(function(a){a=c["static"][a];r=r&&!!a;return a});if(r&&0<a.length){var X=fd.getVAO(fd.createVAO({attributes:a,elements:v["static"].elements}));m.drawVAO=new q(null,null,null,function(a,b){return a.link(X)});m.useVAO=!0}}k?m.useVAO=!0:m.attributes=Oa(c,f);m.context=dc(l,f);return m}function W(a,b,c){var g=a.shared.context,l=a.scope();y(c).forEach(function(f){b.save(g,"."+f);var h=c[f].append(a,b);Array.isArray(h)?l(g,".",f,"=[",h.join(),"];"):
l(g,".",f,"=",h,";")});b(l)}function gb(a,b,c,g){var l=a.shared,f=l.gl,h=l.framebuffer,T;fa&&(T=b.def(l.extensions,".webgl_draw_buffers"));var e=a.constants,l=e.drawBuffer,e=e.backBuffer;a=c?c.append(a,b):b.def(h,".next");g||b("if(",a,"!==",h,".cur){");b("if(",a,"){",f,".bindFramebuffer(",36160,",",a,".framebuffer);");fa&&b(T,".drawBuffersWEBGL(",l,"[",a,".colorAttachments.length]);");b("}else{",f,".bindFramebuffer(",36160,",null);");fa&&b(T,".drawBuffersWEBGL(",e,");");b("}",h,".cur=",a,";");g||
b("}")}function ea(a,b,c){var g=a.shared,l=g.gl,f=a.current,h=a.next,e=g.current,k=g.next,m=a.cond(e,".dirty");aa.forEach(function(b){b=K(b);if(!(b in c.state)){var p,g;if(b in h){p=h[b];g=f[b];var n=za(E[b].length,function(a){return m.def(p,"[",a,"]")});m(a.cond(n.map(function(a,b){return a+"!=="+g+"["+b+"]"}).join("||")).then(l,".",wa[b],"(",n,");",n.map(function(a,b){return g+"["+b+"]="+a}).join(";"),";"))}else p=m.def(k,".",b),n=a.cond(p,"!==",e,".",b),m(n),b in T?n(a.cond(p).then(l,".enable(",
T[b],");")["else"](l,".disable(",T[b],");"),e,".",b,"=",p,";"):n(l,".",wa[b],"(",p,");",e,".",b,"=",p,";")}});0===y(c.state).length&&m(e,".dirty=false;");b(m)}function ta(a,b,c,g){var l=a.shared,f=a.current,h=l.current,e=l.gl;V(y(c)).forEach(function(l){var k=c[l];if(!g||g(k)){var m=k.append(a,b);if(T[l]){var n=T[l];z(k)?m?b(e,".enable(",n,");"):b(e,".disable(",n,");"):b(a.cond(m).then(e,".enable(",n,");")["else"](e,".disable(",n,");"));b(h,".",l,"=",m,";")}else if(u(m)){var v=f[l];b(e,".",wa[l],
"(",m,");",m.map(function(a,b){return v+"["+b+"]="+a}).join(";"),";")}else b(e,".",wa[l],"(",m,");",h,".",l,"=",m,";")}})}function ic(a,b){Q&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function pc(a,b,c,g,l){function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function h(a){w=b.def();a(w,"=",f(),";");"string"===typeof l?a(m,".count+=",l,";"):a(m,".count++;");Na&&(g?(ka=b.def(),a(ka,"=",v,".getNumPendingQueries();")):a(v,".beginQuery(",m,");"))}
function T(a){a(m,".cpuTime+=",f(),"-",w,";");Na&&(g?a(v,".pushScopeStats(",ka,",",v,".getNumPendingQueries(),",m,");"):a(v,".endQuery();"))}function e(a){var c=b.def(n,".profile");b(n,".profile=",a,";");b.exit(n,".profile=",c,";")}var k=a.shared,m=a.stats,n=k.current,v=k.timer;c=c.profile;var w,ka;if(c){if(z(c)){c.enable?(h(b),T(b.exit),e("true")):e("false");return}c=c.append(a,b);e(c)}else c=b.def(n,".profile");k=a.block();h(k);b("if(",c,"){",k,"}");a=a.block();T(a);b.exit("if(",c,"){",a,"}")}function sc(a,
c,g,l,f){function h(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function T(b,g,l){function f(){c("if(!",n,".buffer){",k,".enableVertexAttribArray(",m,");}");var b=l.type,h;h=l.size?c.def(l.size,"||",g):g;c("if(",n,".type!==",b,"||",n,".size!==",h,"||",ka.map(function(a){return n+"."+a+"!=="+l[a]}).join("||"),"){",k,".bindBuffer(",34962,",",v,".buffer);",k,".vertexAttribPointer(",[m,h,b,
l.normalized,l.stride,l.offset],");",n,".type=",b,";",n,".size=",h,";",ka.map(function(a){return n+"."+a+"="+l[a]+";"}).join(""),"}");Q&&(b=l.divisor,c("if(",n,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,b],");",n,".divisor=",b,";}"))}function h(){c("if(",n,".buffer){",k,".disableVertexAttribArray(",m,");",n,".buffer=null;","}if(",I.map(function(a,b){return n+"."+a+"!=="+w[b]}).join("||"),"){",k,".vertexAttrib4f(",m,",",w,");",I.map(function(a,b){return n+"."+a+"="+w[b]+";"}).join(""),
"}")}var k=e.gl,m=c.def(b,".location"),n=c.def(e.attributes,"[",m,"]");b=l.state;var v=l.buffer,w=[l.x,l.y,l.z,l.w],ka=["buffer","normalized","offset","stride"];1===b?f():2===b?h():(c("if(",b,"===",1,"){"),f(),c("}else{"),h(),c("}"))}var e=a.shared;l.forEach(function(l){var e=l.name,k=g.attributes[e],m;if(k){if(!f(k))return;m=k.append(a,c)}else{if(!f(R))return;var n=a.scopeAttrib(e);b.optional(function(){a.assert(c,n+".state","missing attribute "+e)});m={};y(new ha).forEach(function(a){m[a]=c.def(n,
".",a)})}T(a.link(l),h(l.info.type),m)})}function wd(a,c,g,l,f,h){for(var T=a.shared,e=T.gl,k,n=0;n<l.length;++n){var v=l[n],w=v.name,ka=v.info.type,x=g.uniforms[w],v=a.link(v)+".location",d;if(x){if(!f(x))continue;if(z(x)){var r=x.value;b.command(null!==r&&"undefined"!==typeof r,'missing uniform "'+w+'"',a.commandStr);if(35678===ka||35680===ka)b.command("function"===typeof r&&(35678===ka&&("texture2d"===r._reglType||"framebuffer"===r._reglType)||35680===ka&&("textureCube"===r._reglType||"framebufferCube"===
r._reglType)),"invalid texture for uniform "+w,a.commandStr),x=a.link(r._texture||r.color[0]._texture),c(e,".uniform1i(",v,",",x+".bind());"),c.exit(x,".unbind();");else if(35674===ka||35675===ka||35676===ka){b.optional(function(){b.command(u(r),"invalid matrix for uniform "+w,a.commandStr);b.command(35674===ka&&4===r.length||35675===ka&&9===r.length||35676===ka&&16===r.length,"invalid length for matrix uniform "+w,a.commandStr)});var x=a.global.def("new Float32Array(["+Array.prototype.slice.call(r)+
"])"),y=2;35675===ka?y=3:35676===ka&&(y=4);c(e,".uniformMatrix",y,"fv(",v,",false,",x,");")}else{switch(ka){case 5126:b.commandType(r,"number","uniform "+w,a.commandStr);k="1f";break;case 35664:b.command(u(r)&&2===r.length,"uniform "+w,a.commandStr);k="2f";break;case 35665:b.command(u(r)&&3===r.length,"uniform "+w,a.commandStr);k="3f";break;case 35666:b.command(u(r)&&4===r.length,"uniform "+w,a.commandStr);k="4f";break;case 35670:b.commandType(r,"boolean","uniform "+w,a.commandStr);k="1i";break;case 5124:b.commandType(r,
"number","uniform "+w,a.commandStr);k="1i";break;case 35671:b.command(u(r)&&2===r.length,"uniform "+w,a.commandStr);k="2i";break;case 35667:b.command(u(r)&&2===r.length,"uniform "+w,a.commandStr);k="2i";break;case 35672:b.command(u(r)&&3===r.length,"uniform "+w,a.commandStr);k="3i";break;case 35668:b.command(u(r)&&3===r.length,"uniform "+w,a.commandStr);k="3i";break;case 35673:b.command(u(r)&&4===r.length,"uniform "+w,a.commandStr);k="4i";break;case 35669:b.command(u(r)&&4===r.length,"uniform "+w,
a.commandStr),k="4i"}c(e,".uniform",k,"(",v,",",u(r)?Array.prototype.slice.call(r):r,");")}continue}else d=x.append(a,c)}else{if(!f(R))continue;d=c.def(T.uniforms,"[",m.id(w),"]")}35678===ka?(b(!Array.isArray(d),"must specify a scalar prop for textures"),c("if(",d,"&&",d,'._reglType==="framebuffer"){',d,"=",d,".color[0];","}")):35680===ka&&(b(!Array.isArray(d),"must specify a scalar prop for cube maps"),c("if(",d,"&&",d,'._reglType==="framebufferCube"){',d,"=",d,".color[0];","}"));b.optional(function(){function g(b,
l){a.assert(c,b,'bad data or missing for uniform "'+w+'".  '+l)}function l(a){b(!Array.isArray(d),"must not specify an array type for uniform");g("typeof "+d+'==="'+a+'"',"invalid type, expected "+a)}function f(c,l){Array.isArray(d)?b(d.length===c,"must have length "+c):g(T.isArrayLike+"("+d+")&&"+d+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function h(c){b(!Array.isArray(d),"must not specify a value type");g("typeof "+d+'==="function"&&'+d+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(ka){case 5124:l("number");break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;case 35669:f(4,"number");break;case 5126:l("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:l("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,"number");break;case 35676:f(16,
"number");break;case 35678:h(3553);break;case 35680:h(34067)}});x=1;switch(ka){case 35678:case 35680:x=c.def(d,"._texture");c(e,".uniform1i(",v,",",x,".bind());");c.exit(x,".unbind();");continue;case 5124:case 35670:k="1i";break;case 35667:case 35671:k="2i";x=2;break;case 35668:case 35672:k="3i";x=3;break;case 35669:case 35673:k="4i";x=4;break;case 5126:k="1f";break;case 35664:k="2f";x=2;break;case 35665:k="3f";x=3;break;case 35666:k="4f";x=4;break;case 35674:k="Matrix2fv";break;case 35675:k="Matrix3fv";
break;case 35676:k="Matrix4fv"}if("M"===k.charAt(0)){c(e,".uniform",k,"(",v,",");var v=Math.pow(ka-35674+2,2),X=a.global.def("new Float32Array(",v,")");Array.isArray(d)?c("false,(",za(v,function(a){return X+"["+a+"]="+d[a]}),",",X,")"):c("false,(Array.isArray(",d,")||",d," instanceof Float32Array)?",d,":(",za(v,function(a){return X+"["+a+"]="+d+"["+a+"]"}),",",X,")");c(");")}else{if(1<x){for(var y=[],wa=[],G=0;G<x;++G)Array.isArray(d)?wa.push(d[G]):wa.push(c.def(d+"["+G+"]")),h&&y.push(c.def());h&&
c("if(!",a.batchId,"||",y.map(function(a,b){return a+"!=="+wa[b]}).join("||"),"){",y.map(function(a,b){return a+"="+wa[b]+";"}).join(""));c(e,".uniform",k,"(",v,",",wa.join(","),");")}else b(!Array.isArray(d),"uniform value must not be an array"),h&&(x=c.def(),c("if(!",a.batchId,"||",x,"!==",d,"){",x,"=",d,";")),c(e,".uniform",k,"(",v,",",d,");");h&&c("}")}}}function yc(a,c,g,l){function f(b){var h=n[b];return h?h.contextDep&&l.contextDynamic||h.propDep?h.append(a,g):h.append(a,c):c.def(m,".",b)}
function h(){function a(){g(x,".drawElementsInstancedANGLE(",[w,d,y,ka+"<<(("+y+"-5121)>>1)",r],");")}function b(){g(x,".drawArraysInstancedANGLE(",[w,ka,d,r],");")}v&&"null"!==v?X?a():(g("if(",v,"){"),a(),g("}else{"),b(),g("}")):b()}function T(){function a(){g(k+".drawElements("+[w,d,y,ka+"<<(("+y+"-5121)>>1)"]+");")}function b(){g(k+".drawArrays("+[w,ka,d]+");")}v&&"null"!==v?X?a():(g("if(",v,"){"),a(),g("}else{"),b(),g("}")):b()}var e=a.shared,k=e.gl,m=e.draw,n=l.draw,v=function(){var b=n.elements,
f=c;if(b){if(b.contextDep&&l.contextDynamic||b.propDep)f=g;b=b.append(a,f);n.elementsActive&&f("if("+b+")"+k+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=f.def(),f(b,"=",m,".","elements",";","if(",b,"){",k,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",e.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+e.vao,".currentVAO.elements);",ma?"":"if("+b+")"+k+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),w=f("primitive"),ka=f("offset"),d=function(){var f=n.count,h,
e=c;if(f){if(f.contextDep&&l.contextDynamic||f.propDep)e=g;h=f.append(a,e);b.optional(function(){f.MISSING&&a.assert(c,"false","missing vertex count");f.DYNAMIC&&a.assert(e,h+">=0","missing vertex count")})}else h=e.def(m,".","count"),b.optional(function(){a.assert(e,h+">=0","missing vertex count")});return h}();if("number"===typeof d){if(0===d)return}else g("if(",d,"){"),g.exit("}");var r,x;Q&&(r=f("instances"),x=a.instancing);var y=v+".type",X=n.elements&&z(n.elements)&&!n.vaoActive;Q&&("number"!==
typeof r||0<=r)?"string"===typeof r?(g("if(",r,">0){"),h(),g("}else if(",r,"<0){"),T(),g("}")):h():T()}function Z(a,c,g,l,f){var h=na();f=h.proc("body",f);b.optional(function(){h.commandStr=c.commandStr;h.command=h.link(c.commandStr)});Q&&(h.instancing=f.def(h.shared.extensions,".angle_instanced_arrays"));a(h,f,g,l);return h.compile().body}function G(a,b,c,g){ic(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,
".setVAO(null);"),sc(a,b,c,g.attributes,function(){return!0}));wd(a,b,c,g.uniforms,function(){return!0},!1);yc(a,b,b,c)}function ja(a,b){var c=a.proc("draw",1);ic(a,c);W(a,c,b.context);gb(a,c,b.framebuffer);ea(a,c,b);ta(a,c,b.state);pc(a,c,b,!1,!0);var g=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",g,".program);");if(b.shader.program)G(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var l=a.global.def("{}"),f=c.def(g,".id"),h=c.def(l,"[",f,"]");c(a.cond(h).then(h,".call(this,a0);")["else"](h,
"=",l,"[",f,"]=",a.link(function(c){return Z(G,a,b,c,1)}),"(",g,");",h,".call(this,a0);"))}0<y(b.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Da(a,b,c,g){function l(){return!0}a.batchId="a1";ic(a,b);sc(a,b,c,g.attributes,l);wd(a,b,c,g.uniforms,l,!1);yc(a,b,b,c)}function sb(a,b,c,g){function l(a){return a.contextDep&&h||a.propDep}function f(a){return!l(a)}ic(a,b);var h=c.contextDep,e=b.def(),T=b.def();a.shared.props=T;a.batchId=e;var k=a.scope(),
m=a.scope();b(k.entry,"for(",e,"=0;",e,"<","a1",";++",e,"){",T,"=","a0","[",e,"];",m,"}",k.exit);c.needsContext&&W(a,m,c.context);c.needsFramebuffer&&gb(a,m,c.framebuffer);ta(a,m,c.state,l);c.profile&&l(c.profile)&&pc(a,m,c,!1,!0);g?(c.useVAO?c.drawVAO?l(c.drawVAO)?m(a.shared.vao,".setVAO(",c.drawVAO.append(a,m),");"):k(a.shared.vao,".setVAO(",c.drawVAO.append(a,k),");"):k(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(k(a.shared.vao,".setVAO(null);"),sc(a,k,c,g.attributes,f),sc(a,m,c,g.attributes,
l)),wd(a,k,c,g.uniforms,f,!1),wd(a,m,c,g.uniforms,l,!0),yc(a,k,m,c)):(b=a.global.def("{}"),g=c.shader.progVar.append(a,m),T=m.def(g,".id"),k=m.def(b,"[",T,"]"),m(a.shared.gl,".useProgram(",g,".program);","if(!",k,"){",k,"=",b,"[",T,"]=",a.link(function(b){return Z(Da,a,c,b,2)}),"(",g,");}",k,".call(this,a0[",e,"],",e,");"))}function Sc(a,b){function c(a){return a.contextDep&&l||a.propDep}var g=a.proc("batch",2);a.batchId="0";ic(a,g);var l=!1,f=!0;y(b.context).forEach(function(a){l=l||b.context[a].propDep});
l||(W(a,g,b.context),f=!1);var h=b.framebuffer,e=!1;h?(h.propDep?l=e=!0:h.contextDep&&l&&(e=!0),e||gb(a,g,h)):gb(a,g,null);b.state.viewport&&b.state.viewport.propDep&&(l=!0);ea(a,g,b);ta(a,g,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||pc(a,g,b,!1,"a1");b.contextDep=l;b.needsContext=f;b.needsFramebuffer=e;f=b.shader.progVar;if(f.contextDep&&l||f.propDep)sb(a,g,b,null);else if(f=f.append(a,g),g(a.shared.gl,".useProgram(",f,".program);"),b.shader.program)sb(a,g,b,b.shader.program);else{g(a.shared.vao,
".setVAO(null);");var h=a.global.def("{}"),e=g.def(f,".id"),T=g.def(h,"[",e,"]");g(a.cond(T).then(T,".call(this,a0,a1);")["else"](T,"=",h,"[",e,"]=",a.link(function(c){return Z(sb,a,b,c,2)}),"(",f,");",T,".call(this,a0,a1);"))}0<y(b.state).length&&g(a.shared.current,".dirty=true;");a.shared.vao&&g(a.shared.vao,".setVAO(null);")}function Yc(a,b){function c(f){var h=b.shader[f];h&&g.set(l.shader,"."+f,h.append(a,g))}var g=a.proc("scope",3);a.batchId="a2";var l=a.shared,f=l.current;W(a,g,b.context);
b.framebuffer&&b.framebuffer.append(a,g);V(y(b.state)).forEach(function(c){var f=b.state[c].append(a,g);u(f)?f.forEach(function(b,l){g.set(a.next[c],"["+l+"]",b)}):g.set(l.next,"."+c,f)});pc(a,g,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var f=b.draw[c];f&&g.set(l.draw,"."+c,""+f.append(a,g))});y(b.uniforms).forEach(function(c){var f=b.uniforms[c].append(a,g);Array.isArray(f)&&(f="["+f.join()+"]");g.set(l.uniforms,"["+m.id(c)+"]",f)});y(b.attributes).forEach(function(c){var l=
b.attributes[c].append(a,g),f=a.scopeAttrib(c);y(new ha).forEach(function(a){g.set(f,"."+a,l[a])})});b.scopeVAO&&g.set(l.vao,".targetVAO",b.scopeVAO.append(a,g));c("vert");c("frag");0<y(b.state).length&&(g(f,".dirty=true;"),g.exit(f,".dirty=true;"));g("a1(",a.shared.context,",a0,",a.batchId,");")}function D(a){if("object"===typeof a&&!u(a)){for(var b=y(a),c=0;c<b.length;++c)if(B.isDynamic(a[b[c]]))return!0;return!1}}function x(a,b,g){function l(a,b){e.forEach(function(c){var g=f[c];B.isDynamic(g)&&
(g=a.invoke(b,g),b(n,".",c,"=",g,";"))})}var f=b["static"][g];if(f&&D(f)){var h=a.global,e=y(f),T=!1,k=!1,m=!1,n=a.global.def("{}");e.forEach(function(b){var g=f[b];if(B.isDynamic(g))"function"===typeof g&&(g=f[b]=B.unbox(g)),b=c(g,null),T=T||b.thisDep,m=m||b.propDep,k=k||b.contextDep;else{h(n,".",b,"=");switch(typeof g){case "number":h(g);break;case "string":h('"',g,'"');break;case "object":Array.isArray(g)&&h("[",g.join(),"]");break;default:h(a.link(g))}h(";")}});b.dynamic[g]=new B.DynamicVariable(4,
{thisDep:T,contextDep:k,propDep:m,ref:n,append:l});delete b["static"][g]}}var ha=fd.Record,sa={add:32774,subtract:32778,"reverse subtract":32779};J.ext_blend_minmax&&(sa.min=32775,sa.max=32776);var Q=J.angle_instanced_arrays,fa=J.webgl_draw_buffers,ma=J.oes_vertex_array_object,E={dirty:!0,profile:Y.profile},v={},aa=[],T={},wa={};N("dither",3024);N("blend.enable",3042);S("blend.color","blendColor",[0,0,0,0]);S("blend.equation","blendEquationSeparate",[32774,32774]);S("blend.func","blendFuncSeparate",
[1,0,1,0]);N("depth.enable",2929,!0);S("depth.func","depthFunc",513);S("depth.range","depthRange",[0,1]);S("depth.mask","depthMask",!0);S("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);S("cull.face","cullFace",1029);S("frontFace","frontFace",2305);S("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);S("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);S("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);S("stencil.mask",
"stencilMask",-1);S("stencil.func","stencilFunc",[519,0,-1]);S("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);S("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);S("scissor.box","scissor",[0,0,H.drawingBufferWidth,H.drawingBufferHeight]);S("viewport","viewport",[0,0,H.drawingBufferWidth,H.drawingBufferHeight]);var ka={gl:H,context:ra,strings:m,next:v,current:E,draw:ac,elements:a,buffer:da,shader:Fb,attributes:fd.state,vao:fd,uniforms:pa,framebuffer:X,
extensions:J,timer:Na,isBufferArgs:d},l={primTypes:M,compareFuncs:k,blendFuncs:F,blendEquations:sa,stencilOps:h,glTypes:r,orientationType:n};b.optional(function(){ka.isArrayLike=u});fa&&(l.backBuffer=[1029],l.drawBuffer=za(L.maxDrawbuffers,function(a){return 0===a?[0]:za(a,function(a){return 36064+a})}));var mc=0;return{next:v,current:E,procs:function(){var a=na(),b=a.proc("poll"),c=a.proc("refresh"),g=a.block();b(g);c(g);var l=a.shared,f=l.gl,h=l.next,e=l.current;g(e,".dirty=false;");gb(a,b);gb(a,
c,null,!0);var k;Q&&(k=a.link(Q));J.oes_vertex_array_object&&c(a.link(J.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<L.maxAttributes;++m){var n=c.def(l.attributes,"[",m,"]"),v=a.cond(n,".buffer");v.then(f,".enableVertexAttribArray(",m,");",f,".bindBuffer(",34962,",",n,".buffer.buffer);",f,".vertexAttribPointer(",m,",",n,".size,",n,".type,",n,".normalized,",n,".stride,",n,".offset);")["else"](f,".disableVertexAttribArray(",m,");",f,".vertexAttrib4f(",m,",",n,".x,",n,".y,",n,
".z,",n,".w);",n,".buffer=null;");c(v);Q&&c(k,".vertexAttribDivisorANGLE(",m,",",n,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");y(T).forEach(function(l){var k=T[l],m=g.def(h,".",l),n=a.block();n("if(",m,"){",f,".enable(",k,")}else{",f,".disable(",k,")}",e,".",l,"=",m,";");c(n);b("if(",m,"!==",e,".",l,"){",n,"}")});y(wa).forEach(function(l){var T=wa[l],k=E[l],m,n,v=a.block();v(f,".",T,"(");u(k)?(T=k.length,m=a.global.def(h,".",l),n=a.global.def(e,
".",l),v(za(T,function(a){return m+"["+a+"]"}),");",za(T,function(a){return n+"["+a+"]="+m+"["+a+"];"}).join("")),b("if(",za(T,function(a){return m+"["+a+"]!=="+n+"["+a+"]"}).join("||"),"){",v,"}")):(m=g.def(h,".",l),n=g.def(e,".",l),v(m,");",e,".",l,"=",m,";"),b("if(",m,"!==",n,"){",v,"}"));c(v)});return a.compile()}(),compile:function(a,b,c,g,l){var f=na();f.stats=f.link(l);y(b["static"]).forEach(function(a){x(f,b,a)});oa.forEach(function(b){x(f,a,b)});var h=Ia(a,b,c,g,f);ja(f,h);Yc(f,h);Sc(f,h);
return t(f.compile(),{destroy:function(){h.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(A,C,Vb){function d(f,b){this.id=c++;this.type=f;this.data=b}function V(c){if(0===c.length)return[];var b=c.charAt(0),f=c.charAt(c.length-1);if(1<c.length&&b===
f&&('"'===b||"'"===b))return['"'+c.substr(1,c.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c))return V(c.substr(0,b.index)).concat(V(b[1])).concat(V(c.substr(b.index+b[0].length)));b=c.split(".");if(1===b.length)return['"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];c=[];for(f=0;f<b.length;++f)c=c.concat(V(b[f]));return c}function q(c){return"["+V(c).join("][")+"]"}function z(c,b){if("function"===typeof c)return new d(0,c);if("number"===
typeof c||"boolean"===typeof c)return new d(5,c);if(Array.isArray(c))return new d(6,c.map(function(c,f){return z(c,b+"["+f+"]")}));if(c instanceof d)return c;f(!1,"invalid option type in uniform "+b)}var f=A("./util/check"),c=0;C.exports={DynamicVariable:d,define:function(c,b){return new d(c,q(b+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof d},unbox:z,accessor:q}},{"./util/check":21}],10:[function(A,C,Vb){var d=A("./util/check"),V=A("./util/is-typed-array"),q=
A("./util/is-ndarray"),z=A("./util/values"),f=A("./constants/primitives.json"),c=A("./constants/usage.json");C.exports=function(y,b,t,ga){function za(b){this.id=B++;u[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function H(c,f,r,u,k,h,g){c.buffer.bind();var n;f?((n=g)||V(f)&&(!q(f)||V(f.data))||(n=b.oes_element_index_uint?5125:5123),t._initBuffer(c.buffer,f,r,n,3)):(y.bufferData(34963,h,r),c.buffer.dtype=n||5121,c.buffer.usage=r,c.buffer.dimension=3,c.buffer.byteLength=h);
n=g;if(!g){switch(c.buffer.dtype){case 5121:case 5120:n=5121;break;case 5123:case 5122:n=5123;break;case 5125:case 5124:n=5125;break;default:d.raise("unsupported type for element array")}c.buffer.dtype=n}c.type=n;d(5125!==n||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=k;0>f&&(f=c.buffer.byteLength,5123===n?f>>=1:5125===n&&(f>>=2));c.vertCount=f;f=u;0>u&&(f=4,u=c.buffer.dimension,1===u&&(f=0),2===u&&(f=1),3===u&&(f=4));c.primType=f}function J(b){ga.elementsCount--;
d(null!==b.buffer,"must not double destroy elements");delete u[b.id];b.buffer.destroy();b.buffer=null}var u={},B=0,M={uint8:5121,uint16:5123};b.oes_element_index_uint&&(M.uint32=5125);za.prototype.bind=function(){this.buffer.bind()};var r=[];return{create:function(b,r){function u(b){if(b)if("number"===typeof b)y(b),k.primType=4,k.vertCount=b|0,k.type=5121;else{var g=null,n=35044,r=-1,t=-1,m=0,z=0;if(Array.isArray(b)||V(b)||q(b))g=b;else if(d.type(b,"object","invalid arguments for elements"),"data"in
b&&(g=b.data,d(Array.isArray(g)||V(g)||q(g),"invalid data for element buffer")),"usage"in b&&(d.parameter(b.usage,c,"invalid element buffer usage"),n=c[b.usage]),"primitive"in b&&(d.parameter(b.primitive,f,"invalid element buffer primitive"),r=f[b.primitive]),"count"in b&&(d("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),t=b.count|0),"type"in b&&(d.parameter(b.type,M,"invalid buffer type"),z=M[b.type]),"length"in b)m=b.length|0;else if(m=t,5123===z||5122===z)m*=2;else if(5125===
z||5124===z)m*=4;H(k,g,n,r,t,m,z)}else y(),k.primType=4,k.vertCount=0,k.type=5121;return u}var y=t.create(null,34963,!0),k=new za(y._buffer);ga.elementsCount++;u(b);u._reglType="elements";u._elements=k;u.subdata=function(b,c){y.subdata(b,c);return u};u.destroy=function(){J(k)};return u},createStream:function(b){var c=r.pop();c||(c=new za(t.create(null,34963,!0,!1)._buffer));H(c,b,35040,-1,-1,0,0);return c},destroyStream:function(b){r.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof
za?b._elements:null},clear:function(){z(u).forEach(J)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(A,C,Vb){var d=A("./util/sorted-object-keys"),V=A("./util/check");C.exports=function(q,z){function f(b){V.type(b,"string","extension name must be string");b=b.toLowerCase();var f;try{f=c[b]=q.getExtension(b)}catch(d){}return!!f}for(var c={},y=0;y<z.extensions.length;++y){var b=z.extensions[y];
if(!f(b))return z.onDestroy(),z.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}z.optionalExtensions.forEach(f);return{extensions:c,restore:function(){d(c).forEach(function(b){if(c[b]&&!f(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(A,C,Vb){var d=A("./util/check"),V=A("./util/values"),q=A("./util/extend"),z=[6407,6408],f=[];f[6408]=4;f[6407]=
3;var c=[];c[5121]=1;c[5126]=4;c[36193]=2;var y=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};C.exports=function(t,ga,za,H,J,u){function B(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var g=a=0;b?(a=b.width,g=b.height):c&&(a=c.width,g=c.height);this.width=a;this.height=g}function M(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}
function r(a,b,c){if(a){if(a.texture){a=a.texture._texture;var g=Math.max(1,a.height);d(Math.max(1,a.width)===b&&g===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,d(a.width===b&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function I(a,b){b&&(b.texture?t.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):t.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function oa(a){var b=3553,
c=null,g=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(b=a.target|0));d.type(f,"function","invalid attachment data");a=f._reglType;"texture2d"===a?(c=f,d(3553===b)):"textureCube"===a?(c=f,d(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(g=f,b=36161):d.raise("invalid regl object for attachment");return new B(b,c,g)}function F(a,b,c,g,f){if(c)return a=H.create2D({width:a,height:b,format:g,type:f}),a._texture.refCount=0,new B(3553,a,null);a=J.create({width:a,height:b,format:g});
a._renderbuffer.refCount=0;return new B(36161,null,a)}function Ca(a){return a&&(a.texture||a.renderbuffer)}function k(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function h(){this.id=a++;e[this.id]=this;this.framebuffer=t.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function g(a){a.colorAttachments.forEach(M);M(a.depthAttachment);M(a.stencilAttachment);
M(a.depthStencilAttachment)}function n(a){var b=a.framebuffer;d(b,"must not double destroy framebuffer");t.deleteFramebuffer(b);a.framebuffer=null;u.framebufferCount--;delete e[a.id]}function R(a){var c;t.bindFramebuffer(36160,a.framebuffer);var g=a.colorAttachments;for(c=0;c<g.length;++c)I(36064+c,g[c]);for(c=g.length;c<za.maxColorAttachments;++c)t.framebufferTexture2D(36160,36064+c,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0);t.framebufferTexture2D(36160,36096,3553,null,0);t.framebufferTexture2D(36160,
36128,3553,null,0);I(36096,a.depthAttachment);I(36128,a.stencilAttachment);I(33306,a.depthStencilAttachment);a=t.checkFramebufferStatus(36160);t.isContextLost()||36053===a||d.raise("framebuffer configuration not supported, status = "+b[a]);t.bindFramebuffer(36160,m.next?m.next.framebuffer:null);m.cur=m.next;t.getError()}function ca(a,b){function e(a,b){var h;d(m.next!==t,"can not update framebuffer which is currently in use");var k=0,n=0,u=!0,H=!0;h=null;var q=!0,B="rgba",J="uint8",X=1,V=null,w=null,
M=null,ca=!1;if("number"===typeof a)k=a|0,n=b|0||k;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(n=a.shape,d(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),k=n[0],n=n[1]):("radius"in a&&(k=n=a.radius),"width"in a&&(k=a.width),"height"in a&&(n=a.height));if("color"in a||"colors"in a)h=a.color||a.colors,Array.isArray(h)&&d(1===h.length||ga.webgl_draw_buffers,"multiple render targets not supported");if(!h){"colorCount"in a&&(X=a.colorCount|0,d(0<X,"invalid color buffer count"));
"colorTexture"in a&&(q=!!a.colorTexture,B="rgba4");if("colorType"in a){J=a.colorType;if(q)d(ga.oes_texture_float||!("float"===J||"float32"===J),"you must enable OES_texture_float in order to use floating point framebuffer objects"),d(ga.oes_texture_half_float||!("half float"===J||"float16"===J),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===J||"float16"===J)d(ga.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
B="rgba16f";else if("float"===J||"float32"===J)d(ga.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),B="rgba32f";d.oneOf(J,da,"invalid color type")}"colorFormat"in a&&(B=a.colorFormat,0<=la.indexOf(B)?q=!0:0<=L.indexOf(B)?q=!1:d.optional(function(){if(q)d.oneOf(a.colorFormat,la,"invalid color format for texture");else d.oneOf(a.colorFormat,L,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in
a)ca=!(!a.depthTexture&&!a.depthStencilTexture),d(!ca||ga.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?u=a.depth:(V=a.depth,H=!1));"stencil"in a&&("boolean"===typeof a.stencil?H=a.stencil:(w=a.stencil,u=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?u=H=a.depthStencil:(M=a.depthStencil,H=u=!1))}else k=n=1;var I=null,pa=null,A=null,Ia=null;if(Array.isArray(h))I=h.map(oa);else if(h)I=[oa(h)];else for(I=Array(X),h=0;h<X;++h)I[h]=
F(k,n,q,B,J);d(ga.webgl_draw_buffers||1>=I.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");d(I.length<=za.maxColorAttachments,"too many color attachments, not supported");k=k||I[0].width;n=n||I[0].height;V?pa=oa(V):u&&!H&&(pa=F(k,n,ca,"depth","uint32"));w?A=oa(w):H&&!u&&(A=F(k,n,!1,"stencil","uint8"));M?Ia=oa(M):!V&&!w&&H&&u&&(Ia=F(k,n,ca,"depth stencil","depth stencil"));d(1>=!!V+!!w+!!M,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
u=null;for(h=0;h<I.length;++h)r(I[h],k,n),d(!I[h]||I[h].texture&&0<=z.indexOf(I[h].texture._texture.format)||I[h].renderbuffer&&0<=y.indexOf(I[h].renderbuffer._renderbuffer.format),"framebuffer color attachment "+h+" is invalid"),I[h]&&I[h].texture&&(H=f[I[h].texture._texture.format]*c[I[h].texture._texture.type],null===u?u=H:d(u===H,"all color attachments much have the same number of bits per pixel."));r(pa,k,n);d(!pa||pa.texture&&6402===pa.texture._texture.format||pa.renderbuffer&&33189===pa.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");r(A,k,n);d(!A||A.renderbuffer&&36168===A.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");r(Ia,k,n);d(!Ia||Ia.texture&&34041===Ia.texture._texture.format||Ia.renderbuffer&&34041===Ia.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");g(t);t.width=k;t.height=n;t.colorAttachments=I;t.depthAttachment=pa;t.stencilAttachment=A;t.depthStencilAttachment=Ia;e.color=I.map(Ca);
e.depth=Ca(pa);e.stencil=Ca(A);e.depthStencil=Ca(Ia);e.width=t.width;e.height=t.height;R(t);return e}var t=new h;u.framebufferCount++;e(a,b);return q(e,{resize:function(a,b){d(m.next!==t,"can not resize a framebuffer which is currently in use");var c=Math.max(a|0,1),g=Math.max(b|0||c,1);if(c===t.width&&g===t.height)return e;for(var f=t.colorAttachments,h=0;h<f.length;++h)k(f[h],c,g);k(t.depthAttachment,c,g);k(t.stencilAttachment,c,g);k(t.depthStencilAttachment,c,g);t.width=e.width=c;t.height=e.height=
g;R(t);return e},_reglType:"framebuffer",_framebuffer:t,destroy:function(){n(t);g(t)},use:function(a){m.setFBO({framebuffer:e},a)}})}var m={cur:null,next:null,dirty:!1,setFBO:null},la=["rgba"],L=["rgba4","rgb565","rgb5 a1"];ga.ext_srgb&&L.push("srgba");ga.ext_color_buffer_half_float&&L.push("rgba16f","rgb16f");ga.webgl_color_buffer_float&&L.push("rgba32f");var da=["uint8"];ga.oes_texture_half_float&&da.push("half float","float16");ga.oes_texture_float&&da.push("float","float32");var a=0,e={};return q(m,
{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof h)?a:null},create:ca,createCube:function(a){function b(a){var g;d(0>c.indexOf(m.next),"can not update framebuffer which is currently in use");var f={color:null},h=0,e=null;g="rgba";var k="uint8",n=1;if("number"===typeof a)h=a|0;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(h=a.shape,d(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),d(h[0]===
h[1],"cube framebuffer must be square"),h=h[0]):("radius"in a&&(h=a.radius|0),"width"in a?(h=a.width|0,"height"in a&&d(a.height===h,"must be square")):"height"in a&&(h=a.height|0));if("color"in a||"colors"in a)e=a.color||a.colors,Array.isArray(e)&&d(1===e.length||ga.webgl_draw_buffers,"multiple render targets not supported");e||("colorCount"in a&&(n=a.colorCount|0,d(0<n,"invalid color buffer count")),"colorType"in a&&(d.oneOf(a.colorType,da,"invalid color type"),k=a.colorType),"colorFormat"in a&&
(g=a.colorFormat,d.oneOf(a.colorFormat,la,"invalid color format for texture")));"depth"in a&&(f.depth=a.depth);"stencil"in a&&(f.stencil=a.stencil);"depthStencil"in a&&(f.depthStencil=a.depthStencil)}else h=1;if(e)if(Array.isArray(e))for(a=[],g=0;g<e.length;++g)a[g]=e[g];else a=[e];else for(a=Array(n),e={radius:h,format:g,type:k},g=0;g<n;++g)a[g]=H.createCube(e);f.color=Array(a.length);for(g=0;g<a.length;++g)n=a[g],d("function"===typeof n&&"textureCube"===n._reglType,"invalid cube map"),h=h||n.width,
d(n.width===h&&n.height===h,"invalid cube map shape"),f.color[g]={target:34069,data:a[g]};for(g=0;6>g;++g){for(n=0;n<a.length;++n)f.color[n].target=34069+g;0<g&&(f.depth=c[0].depth,f.stencil=c[0].stencil,f.depthStencil=c[0].depthStencil);if(c[g])c[g](f);else c[g]=ca(f)}return q(b,{width:h,height:h,color:a})}var c=Array(6);b(a);return q(b,{faces:c,resize:function(a){var g=a|0;d(0<g&&g<=za.maxCubeMapSize,"invalid radius for cube fbo");if(g===b.width)return b;var f=b.color;for(a=0;a<f.length;++a)f[a].resize(g);
for(a=0;6>a;++a)c[a].resize(g);b.width=b.height=g;return b},_reglType:"framebufferCube",destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){V(e).forEach(n)},restore:function(){m.cur=null;m.next=null;m.dirty=!0;V(e).forEach(function(a){a.framebuffer=t.createFramebuffer();R(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(A,C,Vb){var d=A("./util/sorted-object-keys"),V=A("./util/pool");C.exports=function(q,z){var f=1;z.ext_texture_filter_anisotropic&&
(f=q.getParameter(34047));var c=1,y=1;z.webgl_draw_buffers&&(c=q.getParameter(34852),y=q.getParameter(36063));var b=!!z.oes_texture_float;if(b){b=q.createTexture();q.bindTexture(3553,b);q.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var t=q.createFramebuffer();q.bindFramebuffer(36160,t);q.framebufferTexture2D(36160,36064,3553,b,0);q.bindTexture(3553,null);if(36053!==q.checkFramebufferStatus(36160))b=!1;else{q.viewport(0,0,1,1);q.clearColor(1,0,0,1);q.clear(16384);var ga=V.allocType(5126,4);q.readPixels(0,
0,1,1,6408,5126,ga);q.getError()?b=!1:(q.deleteFramebuffer(t),q.deleteTexture(b),b=1===ga[0]);V.freeType(ga)}}ga=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ga=q.createTexture(),t=V.allocType(5121,36),q.activeTexture(33984),q.bindTexture(34067,ga),q.texImage2D(34069,0,6408,3,3,0,6408,5121,t),V.freeType(t),q.bindTexture(34067,null),q.deleteTexture(ga),ga=!q.getError());return{colorBits:[q.getParameter(3410),
q.getParameter(3411),q.getParameter(3412),q.getParameter(3413)],depthBits:q.getParameter(3414),stencilBits:q.getParameter(3415),subpixelBits:q.getParameter(3408),extensions:d(z).filter(function(b){return!!z[b]}),maxAnisotropic:f,maxDrawbuffers:c,maxColorAttachments:y,pointSizeDims:q.getParameter(33901),lineWidthDims:q.getParameter(33902),maxViewportDims:q.getParameter(3386),maxCombinedTextureUnits:q.getParameter(35661),maxCubeMapSize:q.getParameter(34076),maxRenderbufferSize:q.getParameter(34024),
maxTextureUnits:q.getParameter(34930),maxTextureSize:q.getParameter(3379),maxAttributes:q.getParameter(34921),maxVertexUniforms:q.getParameter(36347),maxVertexTextureUnits:q.getParameter(35660),maxVaryingVectors:q.getParameter(36348),maxFragmentUniforms:q.getParameter(36349),glsl:q.getParameter(35724),renderer:q.getParameter(7937),vendor:q.getParameter(7936),version:q.getParameter(7938),readFloat:b,npotTextureCube:ga}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(A,C,Vb){var d=
A("./util/check"),V=A("./util/is-typed-array");C.exports=function(q,z,f,c,y,b,t){function ga(H){var J;null===z.next?(d(y.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),J=5121):(d(null!==z.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),J=z.next.colorAttachments[0].texture._texture.type,d.optional(function(){b.oes_texture_float?(d(5121===J||5126===J,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),
5126===J&&d(t.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):d(5121===J,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var u=0,B=0,M=c.framebufferWidth,r=c.framebufferHeight,I=null;V(H)?I=H:H&&(d.type(H,"object","invalid arguments to regl.read()"),u=H.x|0,B=H.y|0,d(0<=u&&u<c.framebufferWidth,"invalid x offset for regl.read"),d(0<=B&&B<c.framebufferHeight,"invalid y offset for regl.read"),
M=(H.width||c.framebufferWidth-u)|0,r=(H.height||c.framebufferHeight-B)|0,I=H.data||null);I&&(5121===J?d(I instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===J&&d(I instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));d(0<M&&M+u<=c.framebufferWidth,"invalid width for read pixels");d(0<r&&r+B<=c.framebufferHeight,"invalid height for read pixels");f();H=M*r*4;I||(5121===J?I=new Uint8Array(H):
5126===J&&(I=I||new Float32Array(H)));d.isTypedArray(I,"data buffer for regl.read() must be a typedarray");d(I.byteLength>=H,"data buffer for regl.read() too small");q.pixelStorei(3333,4);q.readPixels(u,B,M,r,6408,J,I);return I}function za(b){var c;z.setFBO({framebuffer:b.framebuffer},function(){c=ga(b)});return c}return function(b){return b&&"framebuffer"in b?za(b):ga(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(A,C,Vb){var d=A("./util/sorted-object-keys"),V=A("./util/check"),
q=A("./util/values"),z=[];z[32854]=2;z[32855]=2;z[36194]=2;z[33189]=2;z[36168]=1;z[34041]=4;z[35907]=4;z[34836]=16;z[34842]=8;z[34843]=6;C.exports=function(f,c,y,b,t){function ga(b){this.id=u++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;t.profile&&(this.stats={size:0})}function za(c){var r=c.renderbuffer;V(r,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(r);c.renderbuffer=null;c.refCount=0;delete B[c.id];b.renderbufferCount--}
var H={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(H.srgba=35907);c.ext_color_buffer_half_float&&(H.rgba16f=34842,H.rgb16f=34843);c.webgl_color_buffer_float&&(H.rgba32f=34836);var J=[];d(H).forEach(function(b){J[H[b]]=b});var u=0,B={};ga.prototype.decRef=function(){0>=--this.refCount&&za(this)};t.profile&&(b.getTotalRenderbufferSize=function(){var b=0;d(B).forEach(function(c){b+=B[c].stats.size});return b});return{create:function(c,r){function d(b,
c){var k=0,h=0,g=32854;"object"===typeof b&&b?("shape"in b?(h=b.shape,V(Array.isArray(h)&&2<=h.length,"invalid renderbuffer shape"),k=h[0]|0,h=h[1]|0):("radius"in b&&(k=h=b.radius|0),"width"in b&&(k=b.width|0),"height"in b&&(h=b.height|0)),"format"in b&&(V.parameter(b.format,H,"invalid renderbuffer format"),g=H[b.format])):"number"===typeof b?(k=b|0,h="number"===typeof c?c|0:k):b?V.raise("invalid arguments to renderbuffer constructor"):k=h=1;V(0<k&&0<h&&k<=y.maxRenderbufferSize&&h<=y.maxRenderbufferSize,
"invalid renderbuffer size");if(k!==u.width||h!==u.height||g!==u.format)return d.width=u.width=k,d.height=u.height=h,u.format=g,f.bindRenderbuffer(36161,u.renderbuffer),f.renderbufferStorage(36161,g,k,h),V(0===f.getError(),"invalid render buffer format"),t.profile&&(u.stats.size=z[u.format]*u.width*u.height),d.format=J[u.format],d}var u=new ga(f.createRenderbuffer());B[u.id]=u;b.renderbufferCount++;d(c,r);d.resize=function(b,c){var k=b|0,h=c|0||k;if(k===u.width&&h===u.height)return d;V(0<k&&0<h&&
k<=y.maxRenderbufferSize&&h<=y.maxRenderbufferSize,"invalid renderbuffer size");d.width=u.width=k;d.height=u.height=h;f.bindRenderbuffer(36161,u.renderbuffer);f.renderbufferStorage(36161,u.format,k,h);V(0===f.getError(),"invalid render buffer format");t.profile&&(u.stats.size=z[u.format]*u.width*u.height);return d};d._reglType="renderbuffer";d._renderbuffer=u;t.profile&&(d.stats=u.stats);d.destroy=function(){u.decRef()};return d},clear:function(){q(B).forEach(za)},restore:function(){q(B).forEach(function(b){b.renderbuffer=
f.createRenderbuffer();f.bindRenderbuffer(36161,b.renderbuffer);f.renderbufferStorage(36161,b.format,b.width,b.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(A,C,Vb){var d=A("./util/sorted-object-keys"),V=A("./util/check"),q=A("./util/extend"),z=A("./util/values");C.exports=function(f,c,y,b){function t(b,c,f,k){this.name=b;this.id=c;this.location=f;this.info=k}function ga(b,c){for(var f=0;f<b.length;++f)if(b[f].id===
c.id){b[f].location=c.location;return}b.push(c)}function za(b,d,r){var k=35632===b?u:B,h=k[d];if(!h){var g=c.str(d),h=f.createShader(b);f.shaderSource(h,g);f.compileShader(h);V.shaderError(f,h,g,b,r);k[d]=h}return h}function H(c,f){this.id=I++;this.fragId=c;this.vertId=f;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function J(d,r,u){var k;k=za(35632,d.fragId);var h=za(35633,d.vertId),g=d.program=f.createProgram();
f.attachShader(g,k);f.attachShader(g,h);if(u)for(k=0;k<u.length;++k)h=u[k],f.bindAttribLocation(g,h[0],h[1]);f.linkProgram(g);V.linkError(f,g,c.str(d.fragId),c.str(d.vertId),r);u=f.getProgramParameter(g,35718);b.profile&&(d.stats.uniformsCount=u);h=d.uniforms;for(k=0;k<u;++k)if(r=f.getActiveUniform(g,k))if(1<r.size)for(var n=0;n<r.size;++n){var y=r.name.replace("[0]","["+n+"]");ga(h,new t(y,c.id(y),f.getUniformLocation(g,y),r))}else ga(h,new t(r.name,c.id(r.name),f.getUniformLocation(g,r.name),r));
u=f.getProgramParameter(g,35721);b.profile&&(d.stats.attributesCount=u);d=d.attributes;for(k=0;k<u;++k)(r=f.getActiveAttrib(g,k))&&ga(d,new t(r.name,c.id(r.name),f.getAttribLocation(g,r.name),r))}var u={},B={},M={},r=[],I=0;b.profile&&(y.getMaxUniformsCount=function(){var b=0;r.forEach(function(c){c.stats.uniformsCount>b&&(b=c.stats.uniformsCount)});return b},y.getMaxAttributesCount=function(){var b=0;r.forEach(function(c){c.stats.attributesCount>b&&(b=c.stats.attributesCount)});return b});return{clear:function(){var b=
f.deleteShader.bind(f);z(u).forEach(b);u={};z(B).forEach(b);B={};r.forEach(function(b){f.deleteProgram(b.program)});r.length=0;M={};y.shaderCount=0},program:function(b,c,t,k){V.command(0<=b,"missing vertex shader",t);V.command(0<=c,"missing fragment shader",t);var h=M[c];h||(h=M[c]={});var g=h[b];if(g&&(g.refCount++,!k))return g;var n=new H(c,b);y.shaderCount++;J(n,t,k);g||(h[b]=n);r.push(n);return q(n,{destroy:function(){n.refCount--;if(0>=n.refCount){f.deleteProgram(n.program);var b=r.indexOf(n);
r.splice(b,1);y.shaderCount--}0>=h[n.vertId].refCount&&(f.deleteShader(B[n.vertId]),delete B[n.vertId],delete M[n.fragId][n.vertId]);d(M[n.fragId]).length||(f.deleteShader(u[n.fragId]),delete u[n.fragId],delete M[n.fragId])}})},restore:function(){u={};B={};for(var b=0;b<r.length;++b)J(r[b],null,r[b].attributes.map(function(b){return[b.location,b.name]}))},shader:za,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(A,C,Vb){C.exports=
function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(A,C,Vb){C.exports=function(){var d={"":0},V=[""];return{id:function(q){var z=d[q];if(z)return z;z=d[q]=V.length;V.push(q);return z},str:function(d){return V[d]}}}},{}],19:[function(A,C,Vb){function d(a){return"[object "+a+"]"}function V(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function q(a){return Array.isArray(a)&&
0!==a.length&&M(a[0])?!0:!1}function z(a){return Object.prototype.toString.call(a)}function f(a){if(!a)return!1;var b=z(a);return 0<=la.indexOf(b)?!0:V(a)||q(a)||J(a)}function c(a,b){36193===a.type?(a.data=B(b),u.freeType(b)):a.data=b}function y(a,b,c,g,f,h){a="undefined"!==typeof da[a]?da[a]:k[a]*L[b];h&&(a*=6);if(f){for(g=0;1<=c;)g+=a*c*c,c/=2;return g}return a*c*g}var b=A("./util/sorted-object-keys"),t=A("./util/check"),ga=A("./util/extend"),za=A("./util/values"),H=A("./util/is-typed-array"),J=
A("./util/is-ndarray"),u=A("./util/pool"),B=A("./util/to-half-float"),M=A("./util/is-array-like"),r=A("./util/flatten"),I=A("./util/is-pow2");Vb=A("./constants/arraytypes.json");var oa=A("./constants/arraytypes.json"),F=[9984,9986,9985,9987],Ca=[0,6409,6410,6407,6408],k={};k[6409]=k[6406]=k[6402]=1;k[34041]=k[6410]=2;k[6407]=k[35904]=3;k[6408]=k[35906]=4;var h=d("HTMLCanvasElement"),g=d("OffscreenCanvas"),n=d("CanvasRenderingContext2D"),R=d("ImageBitmap"),ca=d("HTMLImageElement"),m=d("HTMLVideoElement"),
la=b(Vb).concat([h,g,n,R,ca,m]),L=[];L[5121]=1;L[5126]=4;L[36193]=2;L[5123]=2;L[5125]=4;var da=[];da[32854]=2;da[32855]=2;da[36194]=2;da[34041]=4;da[33776]=.5;da[33777]=.5;da[33778]=1;da[33779]=1;da[35986]=.5;da[35987]=1;da[34798]=1;da[35840]=.5;da[35841]=.25;da[35842]=.5;da[35843]=.25;da[36196]=.5;C.exports=function(a,e,d,L,da,la,A){function ra(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=
this.height=this.width=0}function Na(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Y(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(t.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(t.type(b.flipY,
"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(t.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(t.parameter(b.colorSpace,yc,"invalid colorSpace"),a.colorSpace=yc[b.colorSpace]);if("type"in b){var c=b.type;t(e.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");t(e.oes_texture_half_float||!("half float"===c||"float16"===c),
"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");t(e.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");t.parameter(c,Z,"invalid texture type");a.type=Z[c]}var g=a.width,f=a.height,h=a.channels,c=!1;"shape"in b?(t(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),g=b.shape[0],f=b.shape[1],3===b.shape.length&&(h=b.shape[2],
t(0<h&&4>=h,"invalid number of channels"),c=!0),t(0<=g&&g<=d.maxTextureSize,"invalid width"),t(0<=f&&f<=d.maxTextureSize,"invalid height")):("radius"in b&&(g=f=b.radius,t(0<=g&&g<=d.maxTextureSize,"invalid radius")),"width"in b&&(g=b.width,t(0<=g&&g<=d.maxTextureSize,"invalid width")),"height"in b&&(f=b.height,t(0<=f&&f<=d.maxTextureSize,"invalid height")),"channels"in b&&(h=b.channels,t(0<h&&4>=h,"invalid number of channels"),c=!0));a.width=g|0;a.height=f|0;a.channels=h|0;g=!1;"format"in b&&(g=b.format,
t(e.webgl_depth_texture||!("depth"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),t.parameter(g,G,"invalid texture format"),f=a.internalformat=G[g],a.format=sa[f],g in Z&&!("type"in b)&&(a.type=Z[g]),g in ja&&(a.compressed=!0),g=!0);!c&&g?a.channels=k[a.format]:c&&!g?a.channels!==Ca[a.format]&&(a.format=a.internalformat=Ca[a.channels]):g&&c&&t(a.channels===k[a.format],"number of channels inconsistent with specified format")}}
function K(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function N(){ra.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function S(a,b){var e=null;f(b)?e=b:b&&(t.type(b,"object","invalid pixel data type"),Y(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),f(b.data)&&(e=b.data));t(!a.compressed||e instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(b.copy){t(!e,"can not specify copy and data field for the same texture");var l=da.viewportWidth,k=da.viewportHeight;a.width=a.width||l-a.xOffset;a.height=a.height||k-a.yOffset;a.needsCopy=!0;t(0<=a.xOffset&&a.xOffset<l&&0<=a.yOffset&&a.yOffset<k&&0<a.width&&a.width<=l&&0<a.height&&a.height<=k,"copy texture read out of bounds")}else if(!e)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(H(e))a.channels=a.channels||4,a.data=e,"type"in b||5121!==a.type||(a.type=oa[Object.prototype.toString.call(e)]|
0);else if(V(e)){a.channels=a.channels||4;l=e;k=l.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:k=u.allocType(a.type,k);k.set(l);a.data=k;break;case 36193:a.data=B(l);break;default:t.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(J(e)){l=e.data;Array.isArray(l)||5121!==a.type||(a.type=oa[Object.prototype.toString.call(l)]|0);var k=e.shape,v=e.stride,p,w,x,G;3===k.length?(x=k[2],G=v[2]):(t(2===k.length,"invalid ndarray pixel data, must be 2 or 3D"),
G=x=1);p=k[0];w=k[1];k=v[0];v=v[1];a.alignment=1;a.width=p;a.height=w;a.channels=x;a.format=a.internalformat=Ca[x];a.needsFree=!0;p=G;e=e.offset;x=a.width;G=a.height;w=a.channels;for(var y=u.allocType(36193===a.type?5126:a.type,x*G*w),E=0,aa=0;aa<G;++aa)for(var D=0;D<x;++D)for(var L=0;L<w;++L)y[E++]=l[k*D+v*aa+p*L+e];c(a,y)}else if(z(e)===h||z(e)===g||z(e)===n)z(e)===h||z(e)===g?a.element=e:a.element=e.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(z(e)===R)a.element=
e,a.width=e.width,a.height=e.height,a.channels=4;else if(z(e)===ca)a.element=e,a.width=e.naturalWidth,a.height=e.naturalHeight,a.channels=4;else if(z(e)===m)a.element=e,a.width=e.videoWidth,a.height=e.videoHeight,a.channels=4;else if(q(e)){l=a.width||e[0].length;k=a.height||e.length;v=a.channels;v=M(e[0][0])?v||e[0][0].length:v||1;p=r.shape(e);x=1;for(G=0;G<p.length;++G)x*=p[G];x=u.allocType(36193===a.type?5126:a.type,x);r.flatten(e,p,"",x);c(a,x);a.alignment=1;a.width=l;a.height=k;a.channels=v;a.format=
a.internalformat=Ca[v];a.needsFree=!0}5126===a.type?t(0<=d.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&t(0<=d.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function na(b,c,g,f,h){var e=b.element,p=b.data,k=b.internalformat,n=b.format,m=b.type,d=b.width,v=b.height;K(b);e?a.texSubImage2D(c,h,g,f,n,m,e):b.compressed?a.compressedTexSubImage2D(c,h,g,f,k,d,v,p):b.needsCopy?(L(),a.copyTexSubImage2D(c,h,
g,f,b.xOffset,b.yOffset,d,v)):a.texSubImage2D(c,h,g,f,d,v,n,m,p)}function O(){return Q.pop()||new N}function Wb(a){a.needsFree&&u.freeType(a.data);N.call(a);Q.push(a)}function $a(){ra.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function P(a,b,c){var g=a.images[0]=O();a.mipmask=1;g.width=a.width=b;g.height=a.height=c;g.channels=a.channels=4}function w(a,b){var c=null;if(f(b))c=a.images[0]=O(),Na(c,a),S(c,b),a.mipmask=1;else if(Y(a,b),Array.isArray(b.mipmap))for(var g=
b.mipmap,h=0;h<g.length;++h)c=a.images[h]=O(),Na(c,a),c.width>>=h,c.height>>=h,S(c,g[h]),a.mipmask|=1<<h;else c=a.images[0]=O(),Na(c,a),S(c,b),a.mipmask=1;Na(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||t(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ia(b,c){for(var g=b.images,f=0;f<g.length&&g[f];++f){var h=g[f],e=
c,k=f,n=h.element,m=h.data,d=h.internalformat,v=h.format,r=h.type,w=h.width,x=h.height;K(h);n?a.texImage2D(e,k,v,v,r,n):h.compressed?a.compressedTexImage2D(e,k,d,w,x,0,m):h.needsCopy?(L(),a.copyTexImage2D(e,k,v,h.xOffset,h.yOffset,w,x,0)):a.texImage2D(e,k,v,w,x,0,v,r,m||null)}}function ba(){var a=fa.pop()||new $a;ra.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Fa(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&Wb(b[c]),b[c]=null;fa.push(a)}function Oa(){this.magFilter=
this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function C(a,b){if("min"in b){var c=b.min;t.parameter(c,wd);a.minFilter=wd[c];0<=F.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(c=b.mag,t.parameter(c,sc),a.magFilter=sc[c]);var c=a.wrapS,g=a.wrapT;if("wrap"in b){var f=b.wrap;"string"===typeof f?(t.parameter(f,pc),c=g=pc[f]):Array.isArray(f)&&(t.parameter(f[0],pc),t.parameter(f[1],pc),c=pc[f[0]],g=pc[f[1]])}else"wrapS"in
b&&(c=b.wrapS,t.parameter(c,pc),c=pc[c]),"wrapT"in b&&(g=b.wrapT,t.parameter(g,pc),g=pc[g]);a.wrapS=c;a.wrapT=g;"anisotropic"in b&&(c=b.anisotropic,t("number"===typeof c&&1<=c&&c<=d.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":t.parameter(b.mipmap,ic,"invalid mipmap hint");a.mipmapHint=ic[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":t(Array.isArray(b.mipmap),
"invalid mipmap type");a.genMipmaps=!1;c=!0;break;default:t.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ia(b,c){a.texParameteri(c,10241,b.minFilter);a.texParameteri(c,10240,b.magFilter);a.texParameteri(c,10242,b.wrapS);a.texParameteri(c,10243,b.wrapT);e.ext_texture_filter_anisotropic&&a.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(c))}function W(b){ra.call(this);this.mipmask=0;this.internalformat=6408;this.id=ma++;this.refCount=
1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Oa;A.profile&&(this.stats={size:0})}function gb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ea(){var b=aa[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function ta(b){var c=b.texture;t(c,"must not double destroy texture");var g=b.unit,f=b.target;0<=g&&(a.activeTexture(33984+g),a.bindTexture(f,null),aa[g]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=
null;b.refCount=0;delete E[b.id];la.textureCount--}var ic={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,clamp:33071,mirror:33648},sc={nearest:9728,linear:9729},wd=ga({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},sc),yc={none:0,browser:37444},Z={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},G={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,
rgb565:36194},ja={};e.ext_srgb&&(G.srgb=35904,G.srgba=35906);e.oes_texture_float&&(Z.float32=Z["float"]=5126);e.oes_texture_half_float&&(Z.float16=Z["half float"]=36193);e.webgl_depth_texture&&(ga(G,{depth:6402,"depth stencil":34041}),ga(Z,{uint16:5123,uint32:5125,"depth stencil":34042}));e.webgl_compressed_texture_s3tc&&ga(ja,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});e.webgl_compressed_texture_atc&&ga(ja,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});e.webgl_compressed_texture_pvrtc&&ga(ja,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});e.webgl_compressed_texture_etc1&&(ja["rgb etc1"]=36196);var Da=Array.prototype.slice.call(a.getParameter(34467));b(ja).forEach(function(a){var b=ja[a];0<=Da.indexOf(b)&&(G[a]=b)});var sb=b(G);d.textureFormats=sb;var Sc=[];b(G).forEach(function(a){Sc[G[a]]=a});var Yc=[];b(Z).forEach(function(a){Yc[Z[a]]=a});var D=[];b(sc).forEach(function(a){D[sc[a]]=
a});var x=[];b(wd).forEach(function(a){x[wd[a]]=a});var ha=[];b(pc).forEach(function(a){ha[pc[a]]=a});var sa=sb.reduce(function(a,b){var c=G[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||e.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),Q=[],fa=[],ma=0,E={},v=d.maxTextureUnits,aa=Array(v).map(function(){return null});ga(W.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<v;++c){var g=aa[c];
if(g){if(0<g.bindCount)continue;g.unit=-1}aa[c]=this;b=c;break}b>=v&&t.raise("insufficient number of texture units");A.profile&&la.maxTextureUnits<b+1&&(la.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ta(this)}});A.profile&&(la.getTotalTextureSize=function(){var a=0;b(E).forEach(function(b){a+=E[b].stats.size});return a});return{create2D:function(b,c){function g(a,
b){var c=f.texInfo;Oa.call(c);var h=ba();"number"===typeof a?"number"===typeof b?P(h,a|0,b|0):P(h,a|0,a|0):a?(t.type(a,"object","invalid arguments to regl.texture"),C(c,a),w(h,a)):P(h,1,1);c.genMipmaps&&(h.mipmask=(h.width<<1)-1);f.mipmask=h.mipmask;Na(f,h);t.texture2D(c,h,d);f.internalformat=h.internalformat;g.width=h.width;g.height=h.height;gb(f);ia(h,3553);Ia(c,3553);ea();Fa(h);A.profile&&(f.stats.size=y(f.internalformat,f.type,h.width,h.height,c.genMipmaps,!1));g.format=Sc[f.internalformat];g.type=
Yc[f.type];g.mag=D[c.magFilter];g.min=x[c.minFilter];g.wrapS=ha[c.wrapS];g.wrapT=ha[c.wrapT];return g}var f=new W(3553);E[f.id]=f;la.textureCount++;g(b,c);g.subimage=function(a,b,c,h){t(!!a,"must specify image data");b|=0;c|=0;h|=0;var e=O();Na(e,f);e.width=0;e.height=0;S(e,a);e.width=e.width||(f.width>>h)-b;e.height=e.height||(f.height>>h)-c;t(f.type===e.type&&f.format===e.format&&f.internalformat===e.internalformat,"incompatible format for texture.subimage");t(0<=b&&0<=c&&b+e.width<=f.width&&c+
e.height<=f.height,"texture.subimage write out of bounds");t(f.mipmask&1<<h,"missing mipmap data");t(e.data||e.element||e.needsCopy,"missing image data");gb(f);na(e,3553,b,c,h);ea();Wb(e);return g};g.resize=function(b,c){var h=b|0,e=c|0||h;if(h===f.width&&e===f.height)return g;g.width=f.width=h;g.height=f.height=e;gb(f);for(var k=0;f.mipmask>>k;++k){var n=h>>k,m=e>>k;if(!n||!m)break;a.texImage2D(3553,k,f.format,n,m,0,f.format,f.type,null)}ea();A.profile&&(f.stats.size=y(f.internalformat,f.type,h,
e,!1,!1));return g};g._reglType="texture2d";g._texture=f;A.profile&&(g.stats=f.stats);g.destroy=function(){f.decRef()};return g},createCube:function(b,c,g,f,h,e){function k(a,b,c,g,f,h){var e,l=n.texInfo;Oa.call(l);for(e=0;6>e;++e)m[e]=ba();if("number"!==typeof a&&a)if("object"===typeof a)if(b)w(m[0],a),w(m[1],b),w(m[2],c),w(m[3],g),w(m[4],f),w(m[5],h);else if(C(l,a),Y(n,a),"faces"in a)for(a=a.faces,t(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),e=0;6>e;++e)t("object"===typeof a[e]&&
!!a[e],"invalid input for cube map face"),Na(m[e],n),w(m[e],a[e]);else for(e=0;6>e;++e)w(m[e],a);else t.raise("invalid arguments to cube map");else for(a=a|0||1,e=0;6>e;++e)P(m[e],a,a);Na(n,m[0]);t.optional(function(){d.npotTextureCube||t(I(n.width)&&I(n.height),"your browser does not support non power or two texture dimensions")});n.mipmask=l.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;t.textureCube(n,l,m,d);n.internalformat=m[0].internalformat;k.width=m[0].width;k.height=m[0].height;gb(n);for(e=0;6>
e;++e)ia(m[e],34069+e);Ia(l,34067);ea();A.profile&&(n.stats.size=y(n.internalformat,n.type,k.width,k.height,l.genMipmaps,!0));k.format=Sc[n.internalformat];k.type=Yc[n.type];k.mag=D[l.magFilter];k.min=x[l.minFilter];k.wrapS=ha[l.wrapS];k.wrapT=ha[l.wrapT];for(e=0;6>e;++e)Fa(m[e]);return k}var n=new W(34067);E[n.id]=n;la.cubeCount++;var m=Array(6);k(b,c,g,f,h,e);k.subimage=function(a,b,c,g,f){t(!!b,"must specify image data");t("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;g|=0;f|=
0;var h=O();Na(h,n);h.width=0;h.height=0;S(h,b);h.width=h.width||(n.width>>f)-c;h.height=h.height||(n.height>>f)-g;t(n.type===h.type&&n.format===h.format&&n.internalformat===h.internalformat,"incompatible format for texture.subimage");t(0<=c&&0<=g&&c+h.width<=n.width&&g+h.height<=n.height,"texture.subimage write out of bounds");t(n.mipmask&1<<f,"missing mipmap data");t(h.data||h.element||h.needsCopy,"missing image data");gb(n);na(h,34069+a,c,g,f);ea();Wb(h);return k};k.resize=function(b){b|=0;if(b!==
n.width){k.width=n.width=b;k.height=n.height=b;gb(n);for(var c=0;6>c;++c)for(var g=0;n.mipmask>>g;++g)a.texImage2D(34069+c,g,n.format,b>>g,b>>g,0,n.format,n.type,null);ea();A.profile&&(n.stats.size=y(n.internalformat,n.type,k.width,k.height,!1,!0));return k}};k._reglType="textureCube";k._texture=n;A.profile&&(k.stats=n.stats);k.destroy=function(){n.decRef()};return k},clear:function(){for(var b=0;b<v;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),aa[b]=null;za(E).forEach(ta);la.cubeCount=0;
la.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<v;++b){var c=aa[b];c&&(c.bindCount=0,c.unit=-1,aa[b]=null)}za(E).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var g=0;6>g;++g)a.texImage2D(34069+g,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,
null);Ia(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<v;++b){var c=aa[b];c&&(c.bindCount=0,c.unit=-1,aa[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(A,
C,Vb){C.exports=function(d,V){function q(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function z(c,f,d){var u=y.pop()||new q;u.startQueryIndex=c;u.endQueryIndex=f;u.sum=0;u.stats=d;b.push(u)}if(!V.ext_disjoint_timer_query)return null;var f=[],c=[],y=[],b=[],t=[],ga=[];return{beginQuery:function(b){var d=f.pop()||V.ext_disjoint_timer_query.createQueryEXT();V.ext_disjoint_timer_query.beginQueryEXT(35007,d);c.push(d);z(c.length-1,c.length,b)},endQuery:function(){V.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:z,update:function(){var d,q;d=c.length;if(0!==d){ga.length=Math.max(ga.length,d+1);t.length=Math.max(t.length,d+1);t[0]=0;var z=ga[0]=0;for(q=d=0;q<c.length;++q){var u=c[q];V.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(z+=V.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),f.push(u)):c[d++]=u;t[q+1]=z;ga[q+1]=d}c.length=d;for(q=d=0;q<b.length;++q){var z=b[q],B=z.startQueryIndex,u=z.endQueryIndex;z.sum+=t[u]-t[B];B=ga[B];u=ga[u];u===B?(z.stats.gpuTime+=z.sum/1E6,y.push(z)):
(z.startQueryIndex=B,z.endQueryIndex=u,b[d++]=z)}b.length=d}},getNumPendingQueries:function(){return c.length},clear:function(){f.push.apply(f,c);for(var b=0;b<f.length;b++)V.ext_disjoint_timer_query.deleteQueryEXT(f[b]);c.length=0;f.length=0},restore:function(){c.length=0;f.length=0}}}},{}],21:[function(A,C,Vb){function d(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function V(b){b=Error("(regl) "+b);console.error(b);throw b;}function q(b,c){b||V(c)}function z(b){return b?": "+b:""}function f(b,
c){switch(c){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function c(b,c,f){0>c.indexOf(b)&&V("invalid value"+z(f)+". must be one of: "+c)}function y(b,c){for(b+="";b.length<c;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};
this.hasErrors=!1}function t(b,c){this.number=b;this.line=c;this.errors=[]}function ga(b,c,f){this.file=b;this.line=c;this.message=f}function za(){var b=Error(),b=(b.stack||b).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return c?c[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function H(){var b=Error(),b=(b.stack||b).toString(),c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return c?c[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function J(c,
f){var h=c.split("\n"),k=1,m=0,r={unknown:new b,0:new b};r.unknown.name=r[0].name=f||za();r.unknown.lines.push(new t(0,""));for(var u=0;u<h.length;++u){var y=h[u],a=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(y);if(a)switch(a[1]){case "line":if(a=/(\d+)(\s+\d+)?/.exec(a[2]))k=a[1]|0,a[2]&&(m=a[2]|0,m in r||(r[m]=new b));break;case "define":if(a=/SHADER_NAME(_B64)?\s+(.*)$/.exec(a[2]))r[m].name=a[1]?d(a[2]):a[2]}r[m].lines.push(new t(k++,y))}F(r).forEach(function(a){var b=r[a];b.lines.forEach(function(a){b.index[a.number]=
a})});return r}function u(b){var c=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);g?c.push(new ga(g[1]|0,g[2]|0,g[3].trim())):0<b.length&&c.push(new ga("unknown",0,b))}});return c}function B(b,c){c.forEach(function(c){var f=b[c.file];if(f){var h=f.index[c.line];if(h){h.errors.push(c);f.hasErrors=!0;return}}b.unknown.hasErrors=!0;b.unknown.lines[0].errors.push(c)})}function M(b){b._commandRef=za()}function r(b,c){var f=H();V(b+" in command "+(c||
za())+("unknown"===f?"":" called from "+f))}function I(b,c,h,k){f(b,c)||r("invalid parameter type"+z(h)+". expected "+c+", got "+typeof b,k||za())}function oa(b,c){return 32820===b||32819===b||33635===b?2:34042===b?4:h[b]*c}var F=A("./sorted-object-keys"),Ca=A("./is-typed-array");A=A("./extend");var k="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),h={};h[5120]=h[5121]=1;h[5122]=h[5123]=h[36193]=h[33635]=h[32819]=h[32820]=2;h[5124]=h[5125]=h[5126]=
h[34042]=4;C.exports=A(q,{optional:function(b){b()},raise:V,commandRaise:r,command:function(b,c,f){b||r(c,f||za())},parameter:function(b,c,f){b in c||V("unknown parameter ("+b+")"+z(f)+". possible values: "+F(c).join())},commandParameter:function(b,c,f,h){b in c||r("unknown parameter ("+b+")"+z(f)+". possible values: "+F(c).join(),h||za())},constructor:function(b){F(b).forEach(function(b){0>k.indexOf(b)&&V('invalid regl constructor argument "'+b+'". must be one of '+k)})},type:function(b,c,h){f(b,
c)||V("invalid parameter type"+z(h)+". expected "+c+", got "+typeof b)},commandType:I,isTypedArray:function(b,c){Ca(b)||V("invalid parameter type"+z(c)+". must be a typed array")},nni:function(b,c){0<=b&&(b|0)===b||V("invalid parameter type, ("+b+")"+z(c)+". must be a nonnegative integer")},oneOf:c,shaderError:function(b,c,f,h,k){if(!b.getShaderParameter(c,b.COMPILE_STATUS)){c=b.getShaderInfoLog(c);b=h===b.FRAGMENT_SHADER?"fragment":"vertex";I(f,"string",b+" shader source must be a string",k);var d=
J(f,k);f=u(c);B(d,f);F(d).forEach(function(b){function c(a,b){g.push(a);f.push(b||"")}var a=d[b];if(a.hasErrors){var g=[""],f=[""];c("file number "+b+": "+a.name+"\n","color:red;text-decoration:underline;font-weight:bold");a.lines.forEach(function(a){if(0<a.errors.length){c(y(a.number,4)+"|  ","background-color:yellow; font-weight:bold");c(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var b=0;a.errors.forEach(function(g){g=g.message;var f=/^\s*'(.*)'\s*:\s*(.*)$/.exec(g);if(f){var h=
f[1];g=f[2];switch(h){case "assign":h="="}b=Math.max(a.line.indexOf(h,b),0)}else b=0;c(y("| ",6));c(y("^^^",b+3)+"\n","font-weight:bold");c(y("| ",6));c(g+"\n","font-weight:bold")});c(y("| ",6)+"\n")}else c(y(a.number,4)+"|  "),c(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(g.join("")):(f[0]=g.join("%c"),console.log.apply(console,f))}});q.raise("Error compiling "+b+" shader, "+d[0].name)}},linkError:function(b,c,f,h,k){b.getProgramParameter(c,b.LINK_STATUS)||
(b=b.getProgramInfoLog(c),f=J(f,k),h='Error linking program with vertex shader, "'+J(h,k)[0].name+'", and fragment shader "'+f[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(h+"\n"+b),q.raise(h))},callSite:H,saveCommandRef:M,saveDrawInfo:function(b,c,f,h){function k(b){return b?h.id(b):0}function d(b,a){F(a).forEach(function(a){b[h.id(a)]=!0})}M(b);b._fragId=k(b["static"].frag);b._vertId=k(b["static"].vert);
var r=b._uniformSet={};d(r,c["static"]);d(r,c.dynamic);c=b._attributeSet={};d(c,f["static"]);d(c,f.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,f,h){b.texture?c(b.texture._texture.internalformat,f,"unsupported texture format for attachment"):c(b.renderbuffer._renderbuffer.format,h,"unsupported renderbuffer format for attachment")},guessCommand:za,texture2D:function(b,c,f){var h=c.width,k=c.height,d=
c.channels;q(0<h&&h<=f.maxTextureSize&&0<k&&k<=f.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||q(!(h&h-1)&&!!h&&!(k&k-1)&&!!k,"incompatible wrap mode for texture, both width and height must be power of 2");1===c.mipmask?1!==h&&1!==k&&q(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(q(!(h&h-1)&&!!h&&!(k&k-1)&&!!k,"texture must be a square power of 2 to support mipmapping"),q(c.mipmask===(h<<1)-1,"missing or incomplete mipmap data"));
5126===c.type&&(0>f.extensions.indexOf("oes_texture_float_linear")&&q(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),q(!b.genMipmaps,"mipmap generation not supported with float textures"));var r=c.images;for(f=0;16>f;++f)if(r[f]){var u=h>>f,a=k>>f;q(c.mipmask&1<<f,"missing mipmap data");var e=r[f];q(e.width===u&&e.height===a,"invalid shape for mip images");q(e.format===c.format&&e.internalformat===c.internalformat&&e.type===c.type,"incompatible type for mip image");
!e.compressed&&e.data&&(u=Math.ceil(oa(e.type,d)*u/e.unpackAlignment)*e.unpackAlignment,q(e.data.byteLength===u*a,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||q(0===(c.mipmask&1<<f),"extra mipmap data");c.compressed&&q(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,c,f,h){var k=b.width,d=b.height,r=b.channels;q(0<k&&k<=h.maxTextureSize&&0<d&&d<=h.maxTextureSize,"invalid texture shape");q(k===d,"cube map must be square");
q(33071===c.wrapS&&33071===c.wrapT,"wrap mode not supported by cube map");for(h=0;h<f.length;++h){var u=f[h];q(u.width===k&&u.height===d,"inconsistent cube map face shape");c.genMipmaps&&(q(!u.compressed,"can not generate mipmap for compressed textures"),q(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var a=u.images,e=0;16>e;++e){var t=a[e];if(t){var y=k>>e,z=d>>e;q(u.mipmask&1<<e,"missing mipmap data");q(t.width===y&&t.height===z,"invalid shape for mip images");q(t.format===
b.format&&t.internalformat===b.internalformat&&t.type===b.type,"incompatible type for mip image");t.compressed||t.data&&q(t.data.byteLength===y*z*Math.max(oa(t.type,r),t.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(A,C,Vb){C.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(A,C,Vb){function d(d){return Array.prototype.slice.call(d)}
var V=A("./extend"),q=A("./compiled-fns");C.exports=function(){function z(){var b=[],c=[];return V(function(){b.push.apply(b,d(arguments))},{def:function(){var f="v"+y;y++;c.push(f);0<arguments.length&&(b.push(f,"="),b.push.apply(b,d(arguments)),b.push(";"));return f},toString:function(){return d([0<c.length?"var "+c.join(",")+";":"",d(b).join("")]).join("")}})}function f(){function b(d,u){f(d,u,"=",c.def(d,u),";")}var c=z(),f=z(),t=c.toString,u=f.toString;return V(function(){c.apply(c,d(arguments))},
{def:c.def,entry:c,exit:f,save:b,set:function(f,d,r){b(f,d);c(f,d,"=",r,";")},toString:function(){return t()+u()}})}var c=0,y=0,b={},t={};return{global:z(),link:function(f){var d="$"+c,t=!1;"object"===typeof f&&f.name&&(d=f.name.replace(/ /g,"_"),t=!0);if(d in b)return d;b[d]=f;t||c++;return d},block:z,proc:function(b,c){function y(){var b="a"+z.length;z.push(b);return b}var z=[];c=c||0;for(var u=0;u<c;++u)y();var u=f(),q=u.toString;return t[b]=V(u,{arg:y,toString:function(){return d(["function(",
z.join(),"){",q(),"}"]).join("")}})},scope:f,cond:function(){var b=d(arguments).join(""),c=f(),t=f(),y=c.toString,u=t.toString;return V(c,{then:function(){c.apply(c,d(arguments));return this},"else":function(){t.apply(t,d(arguments));return this},toString:function(){var c=u();c&&(c="else{"+c+"}");return d(["if(",b,"){",y(),"}",c]).join("")}})},compile:function(){var c=[],f=[];Object.keys(b).sort(function(b,c){var f="$"===b.charAt(0),d="$"===c.charAt(0);return f||d?f&&d?+b.slice(1)<+c.slice(1)?-1:
1:f&&!d?-1:1:b.localeCompare(c)}).forEach(function(d){var t=b[d];c.push(d);f.push(t)});for(var d=0,t=c.length-1;-1<t;t--)if("$"===c[t].charAt(0)){d=t;break}d=c.slice(d).join();t=q[d];if(!t)throw Error("missing precompiled function with key: "+d);return t.apply(null,f)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(A,C,Vb){C.exports={$0:function(d){var V,q,z,f,c,y,b,t,ga,za,H,J,u,B,M,r,I,A,F,Ca,k,h,g,n,R,ca,m,la,L,da;V=d.attributes;q=d.current;z=d.framebuffer;f=d.gl;c=d.next;y=d.vao;b=c.blend_color;
t=q.blend_color;ga=c.blend_equation;za=q.blend_equation;H=c.blend_func;J=q.blend_func;u=c.colorMask;B=q.colorMask;M=c.depth_range;r=q.depth_range;I=c.polygonOffset_offset;A=q.polygonOffset_offset;F=c.sample_coverage;Ca=q.sample_coverage;k=c.scissor_box;h=q.scissor_box;g=c.stencil_func;n=q.stencil_func;R=c.stencil_opBack;ca=q.stencil_opBack;m=c.stencil_opFront;la=q.stencil_opFront;L=c.viewport;da=q.viewport;return{poll:function(){var a,e,d,y,V,Fb,C,ra,Na,Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa;q.dirty=!1;
e=c.blend_enable;d=c.cull_enable;y=c.depth_enable;V=c.dither;Fb=c.polygonOffset_enable;C=c.sample_alpha;ra=c.sample_enable;Na=c.scissor_enable;Y=c.stencil_enable;K=c.cull_face;N=q.cull_face;S=c.depth_func;na=q.depth_func;O=c.depth_mask;Wb=q.depth_mask;$a=c.frontFace;P=q.frontFace;w=c.lineWidth;ia=q.lineWidth;ba=c.stencil_mask;Fa=q.stencil_mask;a=z.next;a!==z.cur&&(a?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null),z.cur=a);e!==q.blend_enable&&(e?f.enable(3042):f.disable(3042),
q.blend_enable=e);d!==q.cull_enable&&(d?f.enable(2884):f.disable(2884),q.cull_enable=d);y!==q.depth_enable&&(y?f.enable(2929):f.disable(2929),q.depth_enable=y);V!==q.dither&&(V?f.enable(3024):f.disable(3024),q.dither=V);Fb!==q.polygonOffset_enable&&(Fb?f.enable(32823):f.disable(32823),q.polygonOffset_enable=Fb);C!==q.sample_alpha&&(C?f.enable(32926):f.disable(32926),q.sample_alpha=C);ra!==q.sample_enable&&(ra?f.enable(32928):f.disable(32928),q.sample_enable=ra);Na!==q.scissor_enable&&(Na?f.enable(3089):
f.disable(3089),q.scissor_enable=Na);Y!==q.stencil_enable&&(Y?f.enable(2960):f.disable(2960),q.stencil_enable=Y);if(b[0]!==t[0]||b[1]!==t[1]||b[2]!==t[2]||b[3]!==t[3])f.blendColor(b[0],b[1],b[2],b[3]),t[0]=b[0],t[1]=b[1],t[2]=b[2],t[3]=b[3];if(ga[0]!==za[0]||ga[1]!==za[1])f.blendEquationSeparate(ga[0],ga[1]),za[0]=ga[0],za[1]=ga[1];if(H[0]!==J[0]||H[1]!==J[1]||H[2]!==J[2]||H[3]!==J[3])f.blendFuncSeparate(H[0],H[1],H[2],H[3]),J[0]=H[0],J[1]=H[1],J[2]=H[2],J[3]=H[3];if(u[0]!==B[0]||u[1]!==B[1]||u[2]!==
B[2]||u[3]!==B[3])f.colorMask(u[0],u[1],u[2],u[3]),B[0]=u[0],B[1]=u[1],B[2]=u[2],B[3]=u[3];K!==N&&(f.cullFace(K),q.cull_face=K);S!==na&&(f.depthFunc(S),q.depth_func=S);O!==Wb&&(f.depthMask(O),q.depth_mask=O);if(M[0]!==r[0]||M[1]!==r[1])f.depthRange(M[0],M[1]),r[0]=M[0],r[1]=M[1];$a!==P&&(f.frontFace($a),q.frontFace=$a);w!==ia&&(f.lineWidth(w),q.lineWidth=w);if(I[0]!==A[0]||I[1]!==A[1])f.polygonOffset(I[0],I[1]),A[0]=I[0],A[1]=I[1];if(F[0]!==Ca[0]||F[1]!==Ca[1])f.sampleCoverage(F[0],F[1]),Ca[0]=F[0],
Ca[1]=F[1];if(k[0]!==h[0]||k[1]!==h[1]||k[2]!==h[2]||k[3]!==h[3])f.scissor(k[0],k[1],k[2],k[3]),h[0]=k[0],h[1]=k[1],h[2]=k[2],h[3]=k[3];if(g[0]!==n[0]||g[1]!==n[1]||g[2]!==n[2])f.stencilFunc(g[0],g[1],g[2]),n[0]=g[0],n[1]=g[1],n[2]=g[2];ba!==Fa&&(f.stencilMask(ba),q.stencil_mask=ba);if(R[0]!==ca[0]||R[1]!==ca[1]||R[2]!==ca[2]||R[3]!==ca[3])f.stencilOpSeparate(R[0],R[1],R[2],R[3]),ca[0]=R[0],ca[1]=R[1],ca[2]=R[2],ca[3]=R[3];if(m[0]!==la[0]||m[1]!==la[1]||m[2]!==la[2]||m[3]!==la[3])f.stencilOpSeparate(m[0],
m[1],m[2],m[3]),la[0]=m[0],la[1]=m[1],la[2]=m[2],la[3]=m[3];if(L[0]!==da[0]||L[1]!==da[1]||L[2]!==da[2]||L[3]!==da[3])f.viewport(L[0],L[1],L[2],L[3]),da[0]=L[0],da[1]=L[1],da[2]=L[2],da[3]=L[3]},refresh:function(){var a,e,d,pa,fd,C,ac,ra,Na,Y,K,N,S,na,O,Wb;q.dirty=!1;e=c.blend_enable;d=c.cull_enable;pa=c.depth_enable;fd=c.dither;C=c.polygonOffset_enable;ac=c.sample_alpha;ra=c.sample_enable;Na=c.scissor_enable;Y=c.stencil_enable;K=c.cull_face;N=c.depth_func;S=c.depth_mask;na=c.frontFace;O=c.lineWidth;
Wb=c.stencil_mask;(a=z.next)?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);z.cur=a;a=V[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=V[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),
f.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=V[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=V[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,
a.w),a.buffer=null);a=V[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=V[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=V[6];a.buffer?
(f.enableVertexAttribArray(6),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=V[7];a.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=V[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,
a.buffer.buffer),f.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=V[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=V[10];a.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=V[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=V[12];a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,
a.stride,a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=V[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=V[14];a.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),
f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=V[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);y.currentVAO=null;y.setVAO(y.targetVAO);e?f.enable(3042):f.disable(3042);q.blend_enable=e;d?f.enable(2884):f.disable(2884);q.cull_enable=d;pa?f.enable(2929):f.disable(2929);q.depth_enable=pa;fd?f.enable(3024):
f.disable(3024);q.dither=fd;C?f.enable(32823):f.disable(32823);q.polygonOffset_enable=C;ac?f.enable(32926):f.disable(32926);q.sample_alpha=ac;ra?f.enable(32928):f.disable(32928);q.sample_enable=ra;Na?f.enable(3089):f.disable(3089);q.scissor_enable=Na;Y?f.enable(2960):f.disable(2960);q.stencil_enable=Y;f.blendColor(b[0],b[1],b[2],b[3]);t[0]=b[0];t[1]=b[1];t[2]=b[2];t[3]=b[3];f.blendEquationSeparate(ga[0],ga[1]);za[0]=ga[0];za[1]=ga[1];f.blendFuncSeparate(H[0],H[1],H[2],H[3]);J[0]=H[0];J[1]=H[1];J[2]=
H[2];J[3]=H[3];f.colorMask(u[0],u[1],u[2],u[3]);B[0]=u[0];B[1]=u[1];B[2]=u[2];B[3]=u[3];f.cullFace(K);q.cull_face=K;f.depthFunc(N);q.depth_func=N;f.depthMask(S);q.depth_mask=S;f.depthRange(M[0],M[1]);r[0]=M[0];r[1]=M[1];f.frontFace(na);q.frontFace=na;f.lineWidth(O);q.lineWidth=O;f.polygonOffset(I[0],I[1]);A[0]=I[0];A[1]=I[1];f.sampleCoverage(F[0],F[1]);Ca[0]=F[0];Ca[1]=F[1];f.scissor(k[0],k[1],k[2],k[3]);h[0]=k[0];h[1]=k[1];h[2]=k[2];h[3]=k[3];f.stencilFunc(g[0],g[1],g[2]);n[0]=g[0];n[1]=g[1];n[2]=
g[2];f.stencilMask(Wb);q.stencil_mask=Wb;f.stencilOpSeparate(R[0],R[1],R[2],R[3]);ca[0]=R[0];ca[1]=R[1];ca[2]=R[2];ca[3]=R[3];f.stencilOpSeparate(m[0],m[1],m[2],m[3]);la[0]=m[0];la[1]=m[1];la[2]=m[2];la[3]=m[3];f.viewport(L[0],L[1],L[2],L[3]);da[0]=L[0];da[1]=L[1];da[2]=L[2];da[3]=L[3]}}},$3:function(d,V,q,z){var f,c,y,b,t,ga,za,H,J,u,B,M,r,I,A,F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,fd,C;f=d.context;c=d.current;y=d.framebuffer;b=d.gl;t=d.next;ga=d.shader;za=d.vao;H=t.blend_color;J=c.blend_color;u=t.blend_equation;
B=c.blend_equation;M=t.blend_func;r=c.blend_func;I=t.colorMask;A=c.colorMask;F=t.depth_range;Ca=c.depth_range;k=t.polygonOffset_offset;h=c.polygonOffset_offset;g=t.sample_coverage;n=c.sample_coverage;R=t.scissor_box;ca=c.scissor_box;m=t.stencil_func;la=c.stencil_func;L=t.stencil_opBack;da=c.stencil_opBack;a=t.stencil_opFront;e=c.stencil_opFront;X=t.viewport;pa=c.viewport;fd={};C={};return{batch:function(f,d){var q,Y,K,N,S;q=y.next;q!==y.cur&&(q?b.bindFramebuffer(36160,q.framebuffer):b.bindFramebuffer(36160,
null),y.cur=q);if(c.dirty){q=t.dither;q!==c.dither&&(q?b.enable(3024):b.disable(3024),c.dither=q);q=t.blend_enable;q!==c.blend_enable&&(q?b.enable(3042):b.disable(3042),c.blend_enable=q);q=H[0];K=H[1];N=H[2];S=H[3];if(q!==J[0]||K!==J[1]||N!==J[2]||S!==J[3])b.blendColor(q,K,N,S),J[0]=q,J[1]=K,J[2]=N,J[3]=S;q=u[0];K=u[1];if(q!==B[0]||K!==B[1])b.blendEquationSeparate(q,K),B[0]=q,B[1]=K;q=M[0];K=M[1];N=M[2];S=M[3];if(q!==r[0]||K!==r[1]||N!==r[2]||S!==r[3])b.blendFuncSeparate(q,K,N,S),r[0]=q,r[1]=K,r[2]=
N,r[3]=S;q=t.depth_enable;q!==c.depth_enable&&(q?b.enable(2929):b.disable(2929),c.depth_enable=q);q=t.depth_func;q!==c.depth_func&&(b.depthFunc(q),c.depth_func=q);q=F[0];K=F[1];if(q!==Ca[0]||K!==Ca[1])b.depthRange(q,K),Ca[0]=q,Ca[1]=K;q=t.depth_mask;q!==c.depth_mask&&(b.depthMask(q),c.depth_mask=q);q=I[0];K=I[1];N=I[2];S=I[3];if(q!==A[0]||K!==A[1]||N!==A[2]||S!==A[3])b.colorMask(q,K,N,S),A[0]=q,A[1]=K,A[2]=N,A[3]=S;q=t.cull_enable;q!==c.cull_enable&&(q?b.enable(2884):b.disable(2884),c.cull_enable=
q);q=t.cull_face;q!==c.cull_face&&(b.cullFace(q),c.cull_face=q);q=t.frontFace;q!==c.frontFace&&(b.frontFace(q),c.frontFace=q);q=t.lineWidth;q!==c.lineWidth&&(b.lineWidth(q),c.lineWidth=q);q=t.polygonOffset_enable;q!==c.polygonOffset_enable&&(q?b.enable(32823):b.disable(32823),c.polygonOffset_enable=q);q=k[0];K=k[1];if(q!==h[0]||K!==h[1])b.polygonOffset(q,K),h[0]=q,h[1]=K;q=t.sample_alpha;q!==c.sample_alpha&&(q?b.enable(32926):b.disable(32926),c.sample_alpha=q);q=t.sample_enable;q!==c.sample_enable&&
(q?b.enable(32928):b.disable(32928),c.sample_enable=q);q=g[0];K=g[1];if(q!==n[0]||K!==n[1])b.sampleCoverage(q,K),n[0]=q,n[1]=K;q=t.stencil_enable;q!==c.stencil_enable&&(q?b.enable(2960):b.disable(2960),c.stencil_enable=q);q=t.stencil_mask;q!==c.stencil_mask&&(b.stencilMask(q),c.stencil_mask=q);q=m[0];K=m[1];N=m[2];if(q!==la[0]||K!==la[1]||N!==la[2])b.stencilFunc(q,K,N),la[0]=q,la[1]=K,la[2]=N;q=a[0];K=a[1];N=a[2];S=a[3];if(q!==e[0]||K!==e[1]||N!==e[2]||S!==e[3])b.stencilOpSeparate(q,K,N,S),e[0]=q,
e[1]=K,e[2]=N,e[3]=S;q=L[0];K=L[1];N=L[2];S=L[3];if(q!==da[0]||K!==da[1]||N!==da[2]||S!==da[3])b.stencilOpSeparate(q,K,N,S),da[0]=q,da[1]=K,da[2]=N,da[3]=S;q=t.scissor_enable;q!==c.scissor_enable&&(q?b.enable(3089):b.disable(3089),c.scissor_enable=q);q=R[0];K=R[1];N=R[2];S=R[3];if(q!==ca[0]||K!==ca[1]||N!==ca[2]||S!==ca[3])b.scissor(q,K,N,S),ca[0]=q,ca[1]=K,ca[2]=N,ca[3]=S;q=X[0];K=X[1];N=X[2];S=X[3];if(q!==pa[0]||K!==pa[1]||N!==pa[2]||S!==pa[3])b.viewport(q,K,N,S),pa[0]=q,pa[1]=K,pa[2]=N,pa[3]=S;
c.dirty=!1}if(q=c.profile)Y=performance.now(),V.count+=d;K=ga.program(ga.vert,ga.frag);b.useProgram(K.program);za.setVAO(null);N=K.id;(S=C[N])||(S=C[N]=z(K));S.call(this,f,d);za.setVAO(null);q&&(V.cpuTime+=performance.now()-Y)},draw:function(f){var d,z,Y,K,N;d=y.next;d!==y.cur&&(d?b.bindFramebuffer(36160,d.framebuffer):b.bindFramebuffer(36160,null),y.cur=d);if(c.dirty){d=t.dither;d!==c.dither&&(d?b.enable(3024):b.disable(3024),c.dither=d);d=t.blend_enable;d!==c.blend_enable&&(d?b.enable(3042):b.disable(3042),
c.blend_enable=d);d=H[0];Y=H[1];K=H[2];N=H[3];if(d!==J[0]||Y!==J[1]||K!==J[2]||N!==J[3])b.blendColor(d,Y,K,N),J[0]=d,J[1]=Y,J[2]=K,J[3]=N;d=u[0];Y=u[1];if(d!==B[0]||Y!==B[1])b.blendEquationSeparate(d,Y),B[0]=d,B[1]=Y;d=M[0];Y=M[1];K=M[2];N=M[3];if(d!==r[0]||Y!==r[1]||K!==r[2]||N!==r[3])b.blendFuncSeparate(d,Y,K,N),r[0]=d,r[1]=Y,r[2]=K,r[3]=N;d=t.depth_enable;d!==c.depth_enable&&(d?b.enable(2929):b.disable(2929),c.depth_enable=d);d=t.depth_func;d!==c.depth_func&&(b.depthFunc(d),c.depth_func=d);d=F[0];
Y=F[1];if(d!==Ca[0]||Y!==Ca[1])b.depthRange(d,Y),Ca[0]=d,Ca[1]=Y;d=t.depth_mask;d!==c.depth_mask&&(b.depthMask(d),c.depth_mask=d);d=I[0];Y=I[1];K=I[2];N=I[3];if(d!==A[0]||Y!==A[1]||K!==A[2]||N!==A[3])b.colorMask(d,Y,K,N),A[0]=d,A[1]=Y,A[2]=K,A[3]=N;d=t.cull_enable;d!==c.cull_enable&&(d?b.enable(2884):b.disable(2884),c.cull_enable=d);d=t.cull_face;d!==c.cull_face&&(b.cullFace(d),c.cull_face=d);d=t.frontFace;d!==c.frontFace&&(b.frontFace(d),c.frontFace=d);d=t.lineWidth;d!==c.lineWidth&&(b.lineWidth(d),
c.lineWidth=d);d=t.polygonOffset_enable;d!==c.polygonOffset_enable&&(d?b.enable(32823):b.disable(32823),c.polygonOffset_enable=d);d=k[0];Y=k[1];if(d!==h[0]||Y!==h[1])b.polygonOffset(d,Y),h[0]=d,h[1]=Y;d=t.sample_alpha;d!==c.sample_alpha&&(d?b.enable(32926):b.disable(32926),c.sample_alpha=d);d=t.sample_enable;d!==c.sample_enable&&(d?b.enable(32928):b.disable(32928),c.sample_enable=d);d=g[0];Y=g[1];if(d!==n[0]||Y!==n[1])b.sampleCoverage(d,Y),n[0]=d,n[1]=Y;d=t.stencil_enable;d!==c.stencil_enable&&(d?
b.enable(2960):b.disable(2960),c.stencil_enable=d);d=t.stencil_mask;d!==c.stencil_mask&&(b.stencilMask(d),c.stencil_mask=d);d=m[0];Y=m[1];K=m[2];if(d!==la[0]||Y!==la[1]||K!==la[2])b.stencilFunc(d,Y,K),la[0]=d,la[1]=Y,la[2]=K;d=a[0];Y=a[1];K=a[2];N=a[3];if(d!==e[0]||Y!==e[1]||K!==e[2]||N!==e[3])b.stencilOpSeparate(d,Y,K,N),e[0]=d,e[1]=Y,e[2]=K,e[3]=N;d=L[0];Y=L[1];K=L[2];N=L[3];if(d!==da[0]||Y!==da[1]||K!==da[2]||N!==da[3])b.stencilOpSeparate(d,Y,K,N),da[0]=d,da[1]=Y,da[2]=K,da[3]=N;d=t.scissor_enable;
d!==c.scissor_enable&&(d?b.enable(3089):b.disable(3089),c.scissor_enable=d);d=R[0];Y=R[1];K=R[2];N=R[3];if(d!==ca[0]||Y!==ca[1]||K!==ca[2]||N!==ca[3])b.scissor(d,Y,K,N),ca[0]=d,ca[1]=Y,ca[2]=K,ca[3]=N;d=X[0];Y=X[1];K=X[2];N=X[3];if(d!==pa[0]||Y!==pa[1]||K!==pa[2]||N!==pa[3])b.viewport(d,Y,K,N),pa[0]=d,pa[1]=Y,pa[2]=K,pa[3]=N;c.dirty=!1}if(d=c.profile)z=performance.now(),V.count++;Y=ga.program(ga.vert,ga.frag);b.useProgram(Y.program);za.setVAO(null);K=Y.id;(N=fd[K])||(N=fd[K]=q(Y));N.call(this,f);
za.setVAO(null);d&&(V.cpuTime+=performance.now()-z)},scope:function(a,b,g){var h,e;if(h=c.profile)e=performance.now(),V.count++;b(f,a,g);h&&(V.cpuTime+=performance.now()-e)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(d,V,q,z,f,c,y,b,t,A,za,H,J,u,B,
M,r,I,oa,F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,C,Fb,ac,ra,Na,Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta,ic,pc,sc,wd,yc,Z,G,ja,Da,sb,Sc,Yc,D,x,ha,sa,Q,fa,ma){var E,v,aa,T,wa,ka,l,mc,U,p,Hb,yb,Re,je,re,$d,xd,Ae,Gc,de,se,Od,Qd,Xd,ee,Ze,mf,cf,zd,Be,Rd,Sd,ke,Se,rd,md,Cd,qd,dd,Bc,sd,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob;E=d.attributes;v=d.context;aa=d.current;T=d.draw;wa=d.elements;ka=d.framebuffer;l=d.gl;mc=d.next;U=d.shader;p=d.uniforms;Hb=d.vao;yb=
mc.blend_color;Re=aa.blend_color;je=mc.blend_equation;re=aa.blend_equation;$d=mc.blend_func;xd=aa.blend_func;Ae=mc.colorMask;Gc=aa.colorMask;de=mc.depth_range;se=aa.depth_range;Od=mc.polygonOffset_offset;Qd=aa.polygonOffset_offset;Xd=mc.sample_coverage;ee=aa.sample_coverage;Ze=mc.scissor_box;mf=aa.scissor_box;cf=mc.stencil_func;zd=aa.stencil_func;Be=mc.stencil_opBack;Rd=aa.stencil_opBack;Sd=mc.stencil_opFront;ke=aa.stencil_opFront;Se=mc.viewport;rd=aa.viewport;md={};Cd={};qd=new Float32Array(16);
dd=new Float32Array(16);Bc=new Float32Array(16);sd=new Float32Array(16);gd=new Float32Array(16);Nc=new Float32Array(16);tc=new Float32Array(16);ab=new Float32Array(16);Cc=new Float32Array(16);Db=new Float32Array(16);rc=new Float32Array(16);Ta=new Float32Array(16);kc=new Float32Array(16);bc=new Float32Array(16);ad=new Float32Array(16);Dd=new Float32Array(16);nd=new Float32Array(16);Dc=new Float32Array(16);Xb=new Float32Array(16);Jc=new Float32Array(16);Gb=new Float32Array(16);La=new Float32Array(16);
tb=new Float32Array(16);Wa=new Float32Array(16);ua=new Float32Array(16);td=new Float32Array(16);Ab=new Float32Array(16);Sa=new Float32Array(16);Tb=new Float32Array(16);cb=new Float32Array(16);lc=new Float32Array(16);Ob=new Float32Array(16);return{batch:function(a,g){var h,e,k,d;h=ka.next;h!==ka.cur&&(h?l.bindFramebuffer(36160,h.framebuffer):l.bindFramebuffer(36160,null),ka.cur=h);if(aa.dirty){var p,m,n,q,U,L,V,R,F,ca,X,ab,da,qa,Ta,va,la,Ca,Aa,yb,Ja,Db,bc,Ra,Nc;p=Ae[0];m=Ae[1];n=Ae[2];q=Ae[3];if(p!==
Gc[0]||m!==Gc[1]||n!==Gc[2]||q!==Gc[3])l.colorMask(p,m,n,q),Gc[0]=p,Gc[1]=m,Gc[2]=n,Gc[3]=q;U=mc.frontFace;U!==aa.frontFace&&(l.frontFace(U),aa.frontFace=U);L=mc.polygonOffset_enable;L!==aa.polygonOffset_enable&&(L?l.enable(32823):l.disable(32823),aa.polygonOffset_enable=L);V=Od[0];R=Od[1];if(V!==Qd[0]||R!==Qd[1])l.polygonOffset(V,R),Qd[0]=V,Qd[1]=R;F=mc.sample_alpha;F!==aa.sample_alpha&&(F?l.enable(32926):l.disable(32926),aa.sample_alpha=F);ca=mc.sample_enable;ca!==aa.sample_enable&&(ca?l.enable(32928):
l.disable(32928),aa.sample_enable=ca);X=Xd[0];ab=Xd[1];if(X!==ee[0]||ab!==ee[1])l.sampleCoverage(X,ab),ee[0]=X,ee[1]=ab;da=mc.stencil_enable;da!==aa.stencil_enable&&(da?l.enable(2960):l.disable(2960),aa.stencil_enable=da);qa=mc.stencil_mask;qa!==aa.stencil_mask&&(l.stencilMask(qa),aa.stencil_mask=qa);Ta=cf[0];va=cf[1];la=cf[2];if(Ta!==zd[0]||va!==zd[1]||la!==zd[2])l.stencilFunc(Ta,va,la),zd[0]=Ta,zd[1]=va,zd[2]=la;Ca=Sd[0];Aa=Sd[1];yb=Sd[2];Ja=Sd[3];if(Ca!==ke[0]||Aa!==ke[1]||yb!==ke[2]||Ja!==ke[3])l.stencilOpSeparate(Ca,
Aa,yb,Ja),ke[0]=Ca,ke[1]=Aa,ke[2]=yb,ke[3]=Ja;Db=Be[0];bc=Be[1];Ra=Be[2];Nc=Be[3];if(Db!==Rd[0]||bc!==Rd[1]||Ra!==Rd[2]||Nc!==Rd[3])l.stencilOpSeparate(Db,bc,Ra,Nc),Rd[0]=Db,Rd[1]=bc,Rd[2]=Ra,Rd[3]=Nc}l.blendColor(0,0,0,0);Re[0]=0;Re[1]=0;Re[2]=0;Re[3]=0;l.disable(3042);aa.blend_enable=!1;l.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;l.blendFuncSeparate(770,771,1,1);xd[0]=770;xd[1]=771;xd[2]=1;xd[3]=1;l.enable(2884);aa.cull_enable=!0;l.cullFace(1029);aa.cull_face=1029;l.enable(2929);
aa.depth_enable=!0;l.depthFunc(513);aa.depth_func=513;l.depthMask(!0);aa.depth_mask=!0;l.depthRange(0,1);se[0]=0;se[1]=1;l.disable(3024);aa.dither=!1;l.lineWidth(2);aa.lineWidth=2;l.enable(3089);aa.scissor_enable=!0;e=aa.profile;aa.profile=!1;l.useProgram(ac.program);var gd,Za,C,xa,pa,Ka,tc,fb,ib,ya,Ze,Ea,pb,qb,Xa,Ya,Bc,kc,Cc,Va,ad,dd,Ga,rc,Qa,Ba,lb,vb,Cb,rb,qd,wb,sd;Hb.setVAO(null);gd=ic.location;Za=E[gd];Za.buffer||l.enableVertexAttribArray(gd);if(Za.type!==z.dtype||4!==Za.size||Za.buffer!==z||
!1!==Za.normalized||0!==Za.offset||0!==Za.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(gd,4,z.dtype,!1,0,0),Za.type=z.dtype,Za.size=4,Za.buffer=z,Za.normalized=!1,Za.offset=0,Za.stride=0;C=pc.location;xa=E[C];xa.buffer||l.enableVertexAttribArray(C);if(xa.type!==f.dtype||4!==xa.size||xa.buffer!==f||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)l.bindBuffer(34962,f.buffer),l.vertexAttribPointer(C,4,f.dtype,!1,0,0),xa.type=f.dtype,xa.size=4,xa.buffer=f,xa.normalized=!1,xa.offset=0,xa.stride=
0;pa=sc.location;Ka=E[pa];Ka.buffer||l.enableVertexAttribArray(pa);if(Ka.type!==c.dtype||4!==Ka.size||Ka.buffer!==c||!1!==Ka.normalized||0!==Ka.offset||0!==Ka.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(pa,4,c.dtype,!1,0,0),Ka.type=c.dtype,Ka.size=4,Ka.buffer=c,Ka.normalized=!1,Ka.offset=0,Ka.stride=0;tc=wd.location;fb=E[tc];fb.buffer||l.enableVertexAttribArray(tc);if(fb.type!==y.dtype||4!==fb.size||fb.buffer!==y||!1!==fb.normalized||0!==fb.offset||0!==fb.stride)l.bindBuffer(34962,y.buffer),
l.vertexAttribPointer(tc,4,y.dtype,!1,0,0),fb.type=y.dtype,fb.size=4,fb.buffer=y,fb.normalized=!1,fb.offset=0,fb.stride=0;ib=yc.location;ya=E[ib];ya.buffer||l.enableVertexAttribArray(ib);if(ya.type!==b.dtype||4!==ya.size||ya.buffer!==b||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(ib,4,b.dtype,!1,0,0),ya.type=b.dtype,ya.size=4,ya.buffer=b,ya.normalized=!1,ya.offset=0,ya.stride=0;Ze=Z.location;Ea=E[Ze];Ea.buffer||l.enableVertexAttribArray(Ze);
if(Ea.type!==t.dtype||4!==Ea.size||Ea.buffer!==t||!1!==Ea.normalized||0!==Ea.offset||0!==Ea.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(Ze,4,t.dtype,!1,0,0),Ea.type=t.dtype,Ea.size=4,Ea.buffer=t,Ea.normalized=!1,Ea.offset=0,Ea.stride=0;pb=G.location;qb=E[pb];qb.buffer||l.enableVertexAttribArray(pb);if(qb.type!==A.dtype||4!==qb.size||qb.buffer!==A||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(pb,4,A.dtype,!1,0,0),qb.type=A.dtype,
qb.size=4,qb.buffer=A,qb.normalized=!1,qb.offset=0,qb.stride=0;Xa=ja.location;Ya=E[Xa];Ya.buffer||l.enableVertexAttribArray(Xa);if(Ya.type!==za.dtype||4!==Ya.size||Ya.buffer!==za||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)l.bindBuffer(34962,za.buffer),l.vertexAttribPointer(Xa,4,za.dtype,!1,0,0),Ya.type=za.dtype,Ya.size=4,Ya.buffer=za,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Bc=Da.location;kc=E[Bc];kc.buffer||l.enableVertexAttribArray(Bc);if(kc.type!==H.dtype||4!==kc.size||kc.buffer!==H||!1!==
kc.normalized||0!==kc.offset||0!==kc.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(Bc,4,H.dtype,!1,0,0),kc.type=H.dtype,kc.size=4,kc.buffer=H,kc.normalized=!1,kc.offset=0,kc.stride=0;Cc=sb.location;Va=E[Cc];Va.buffer||l.enableVertexAttribArray(Cc);if(Va.type!==J.dtype||4!==Va.size||Va.buffer!==J||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)l.bindBuffer(34962,J.buffer),l.vertexAttribPointer(Cc,4,J.dtype,!1,0,0),Va.type=J.dtype,Va.size=4,Va.buffer=J,Va.normalized=!1,Va.offset=0,Va.stride=
0;ad=Sc.location;dd=E[ad];dd.buffer||l.enableVertexAttribArray(ad);if(dd.type!==u.dtype||4!==dd.size||dd.buffer!==u||!1!==dd.normalized||0!==dd.offset||0!==dd.stride)l.bindBuffer(34962,u.buffer),l.vertexAttribPointer(ad,4,u.dtype,!1,0,0),dd.type=u.dtype,dd.size=4,dd.buffer=u,dd.normalized=!1,dd.offset=0,dd.stride=0;Ga=Yc.location;rc=E[Ga];rc.buffer||l.enableVertexAttribArray(Ga);if(rc.type!==B.dtype||4!==rc.size||rc.buffer!==B||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)l.bindBuffer(34962,B.buffer),
l.vertexAttribPointer(Ga,4,B.dtype,!1,0,0),rc.type=B.dtype,rc.size=4,rc.buffer=B,rc.normalized=!1,rc.offset=0,rc.stride=0;Qa=D.location;Ba=E[Qa];Ba.buffer||l.enableVertexAttribArray(Qa);if(Ba.type!==M.dtype||4!==Ba.size||Ba.buffer!==M||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)l.bindBuffer(34962,M.buffer),l.vertexAttribPointer(Qa,4,M.dtype,!1,0,0),Ba.type=M.dtype,Ba.size=4,Ba.buffer=M,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;lb=x.location;vb=E[lb];vb.buffer||l.enableVertexAttribArray(lb);if(vb.type!==
r.dtype||4!==vb.size||vb.buffer!==r||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(lb,4,r.dtype,!1,0,0),vb.type=r.dtype,vb.size=4,vb.buffer=r,vb.normalized=!1,vb.offset=0,vb.stride=0;Cb=ha.location;rb=E[Cb];rb.buffer||l.enableVertexAttribArray(Cb);if(rb.type!==I.dtype||4!==rb.size||rb.buffer!==I||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(Cb,4,I.dtype,!1,0,0),rb.type=I.dtype,rb.size=4,rb.buffer=
I,rb.normalized=!1,rb.offset=0,rb.stride=0;qd=Na.location;wb=E[qd];wb.buffer||l.enableVertexAttribArray(qd);if(wb.type!==oa.dtype||4!==wb.size||wb.buffer!==oa||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)l.bindBuffer(34962,oa.buffer),l.vertexAttribPointer(qd,4,oa.dtype,!1,0,0),wb.type=oa.dtype,wb.size=4,wb.buffer=oa,wb.normalized=!1,wb.offset=0,wb.stride=0;l.uniform1i(sa.location,ra.bind());(sd=T.elements)?l.bindBuffer(34963,sd.buffer.buffer):Hb.currentVAO&&(sd=wa.getElements(Hb.currentVAO.elements))&&
l.bindBuffer(34963,sd.buffer.buffer);for(k=0;k<g;++k){d=a[k];var $d,de,Se,Dd,je,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,Fb,Vd,$e,Xe,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,fd,me,te,ce,be,ae,ue,Yd;md.height=d.viewportHeight;md.width=d.viewportWidth;md.x=d.viewportX;md.y=d.viewportY;$d=md.x|0;de=md.y|0;Se="width"in md?md.width|0:v.framebufferWidth-$d;Dd="height"in md?md.height|0:v.framebufferHeight-de;je=v.viewportWidth;v.viewportWidth=Se;Ub=v.viewportHeight;
v.viewportHeight=Dd;l.viewport($d,de,Se,Dd);rd[0]=$d;rd[1]=de;rd[2]=Se;rd[3]=Dd;Cd.height=d.scissorHeight;Cd.width=d.scissorWidth;Cd.x=d.scissorX;Cd.y=d.scissorY;cc=Cd.x|0;Mb=Cd.y|0;Ha="width"in Cd?Cd.width|0:v.framebufferWidth-cc;Zb="height"in Cd?Cd.height|0:v.framebufferHeight-Mb;l.scissor(cc,Mb,Ha,Zb);mf[0]=cc;mf[1]=Mb;mf[2]=Ha;mf[3]=Zb;mb=d.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(nd[0]=mb[0],nd[1]=mb[1],nd[2]=mb[2],nd[3]=mb[3],nd[4]=mb[4],nd[5]=
mb[5],nd[6]=mb[6],nd[7]=mb[7],nd[8]=mb[8],nd[9]=mb[9],nd[10]=mb[10],nd[11]=mb[11],nd[12]=mb[12],nd[13]=mb[13],nd[14]=mb[14],nd[15]=mb[15],nd));xb=d.dim1A;l.uniformMatrix4fv(O.location,!1,Array.isArray(xb)||xb instanceof Float32Array?xb:(Dc[0]=xb[0],Dc[1]=xb[1],Dc[2]=xb[2],Dc[3]=xb[3],Dc[4]=xb[4],Dc[5]=xb[5],Dc[6]=xb[6],Dc[7]=xb[7],Dc[8]=xb[8],Dc[9]=xb[9],Dc[10]=xb[10],Dc[11]=xb[11],Dc[12]=xb[12],Dc[13]=xb[13],Dc[14]=xb[14],Dc[15]=xb[15],Dc));Kb=d.dim0B;l.uniformMatrix4fv(N.location,!1,Array.isArray(Kb)||
Kb instanceof Float32Array?Kb:(Xb[0]=Kb[0],Xb[1]=Kb[1],Xb[2]=Kb[2],Xb[3]=Kb[3],Xb[4]=Kb[4],Xb[5]=Kb[5],Xb[6]=Kb[6],Xb[7]=Kb[7],Xb[8]=Kb[8],Xb[9]=Kb[9],Xb[10]=Kb[10],Xb[11]=Kb[11],Xb[12]=Kb[12],Xb[13]=Kb[13],Xb[14]=Kb[14],Xb[15]=Kb[15],Xb));Nb=d.dim1B;l.uniformMatrix4fv(Wb.location,!1,Array.isArray(Nb)||Nb instanceof Float32Array?Nb:(Jc[0]=Nb[0],Jc[1]=Nb[1],Jc[2]=Nb[2],Jc[3]=Nb[3],Jc[4]=Nb[4],Jc[5]=Nb[5],Jc[6]=Nb[6],Jc[7]=Nb[7],Jc[8]=Nb[8],Jc[9]=Nb[9],Jc[10]=Nb[10],Jc[11]=Nb[11],Jc[12]=Nb[12],Jc[13]=
Nb[13],Jc[14]=Nb[14],Jc[15]=Nb[15],Jc));gc=d.dim0C;l.uniformMatrix4fv(S.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Gb[0]=gc[0],Gb[1]=gc[1],Gb[2]=gc[2],Gb[3]=gc[3],Gb[4]=gc[4],Gb[5]=gc[5],Gb[6]=gc[6],Gb[7]=gc[7],Gb[8]=gc[8],Gb[9]=gc[9],Gb[10]=gc[10],Gb[11]=gc[11],Gb[12]=gc[12],Gb[13]=gc[13],Gb[14]=gc[14],Gb[15]=gc[15],Gb));jc=d.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(La[0]=jc[0],La[1]=jc[1],La[2]=jc[2],La[3]=jc[3],La[4]=jc[4],La[5]=
jc[5],La[6]=jc[6],La[7]=jc[7],La[8]=jc[8],La[9]=jc[9],La[10]=jc[10],La[11]=jc[11],La[12]=jc[12],La[13]=jc[13],La[14]=jc[14],La[15]=jc[15],La));Uc=d.dim0D;l.uniformMatrix4fv(na.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(tb[0]=Uc[0],tb[1]=Uc[1],tb[2]=Uc[2],tb[3]=Uc[3],tb[4]=Uc[4],tb[5]=Uc[5],tb[6]=Uc[6],tb[7]=Uc[7],tb[8]=Uc[8],tb[9]=Uc[9],tb[10]=Uc[10],tb[11]=Uc[11],tb[12]=Uc[12],tb[13]=Uc[13],tb[14]=Uc[14],tb[15]=Uc[15],tb));Ec=d.dim1D;l.uniformMatrix4fv(P.location,!1,Array.isArray(Ec)||
Ec instanceof Float32Array?Ec:(Wa[0]=Ec[0],Wa[1]=Ec[1],Wa[2]=Ec[2],Wa[3]=Ec[3],Wa[4]=Ec[4],Wa[5]=Ec[5],Wa[6]=Ec[6],Wa[7]=Ec[7],Wa[8]=Ec[8],Wa[9]=Ec[9],Wa[10]=Ec[10],Wa[11]=Ec[11],Wa[12]=Ec[12],Wa[13]=Ec[13],Wa[14]=Ec[14],Wa[15]=Ec[15],Wa));Fc=d.loA;l.uniformMatrix4fv(dc.location,!1,Array.isArray(Fc)||Fc instanceof Float32Array?Fc:(ua[0]=Fc[0],ua[1]=Fc[1],ua[2]=Fc[2],ua[3]=Fc[3],ua[4]=Fc[4],ua[5]=Fc[5],ua[6]=Fc[6],ua[7]=Fc[7],ua[8]=Fc[8],ua[9]=Fc[9],ua[10]=Fc[10],ua[11]=Fc[11],ua[12]=Fc[12],ua[13]=
Fc[13],ua[14]=Fc[14],ua[15]=Fc[15],ua));Hc=d.hiA;l.uniformMatrix4fv(ia.location,!1,Array.isArray(Hc)||Hc instanceof Float32Array?Hc:(td[0]=Hc[0],td[1]=Hc[1],td[2]=Hc[2],td[3]=Hc[3],td[4]=Hc[4],td[5]=Hc[5],td[6]=Hc[6],td[7]=Hc[7],td[8]=Hc[8],td[9]=Hc[9],td[10]=Hc[10],td[11]=Hc[11],td[12]=Hc[12],td[13]=Hc[13],td[14]=Hc[14],td[15]=Hc[15],td));Pc=d.loB;l.uniformMatrix4fv(Ia.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(Ab[0]=Pc[0],Ab[1]=Pc[1],Ab[2]=Pc[2],Ab[3]=Pc[3],Ab[4]=Pc[4],Ab[5]=
Pc[5],Ab[6]=Pc[6],Ab[7]=Pc[7],Ab[8]=Pc[8],Ab[9]=Pc[9],Ab[10]=Pc[10],Ab[11]=Pc[11],Ab[12]=Pc[12],Ab[13]=Pc[13],Ab[14]=Pc[14],Ab[15]=Pc[15],Ab));cd=d.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(Sa[0]=cd[0],Sa[1]=cd[1],Sa[2]=cd[2],Sa[3]=cd[3],Sa[4]=cd[4],Sa[5]=cd[5],Sa[6]=cd[6],Sa[7]=cd[7],Sa[8]=cd[8],Sa[9]=cd[9],Sa[10]=cd[10],Sa[11]=cd[11],Sa[12]=cd[12],Sa[13]=cd[13],Sa[14]=cd[14],Sa[15]=cd[15],Sa));Vc=d.loC;l.uniformMatrix4fv(W.location,!1,Array.isArray(Vc)||
Vc instanceof Float32Array?Vc:(Tb[0]=Vc[0],Tb[1]=Vc[1],Tb[2]=Vc[2],Tb[3]=Vc[3],Tb[4]=Vc[4],Tb[5]=Vc[5],Tb[6]=Vc[6],Tb[7]=Vc[7],Tb[8]=Vc[8],Tb[9]=Vc[9],Tb[10]=Vc[10],Tb[11]=Vc[11],Tb[12]=Vc[12],Tb[13]=Vc[13],Tb[14]=Vc[14],Tb[15]=Vc[15],Tb));Qc=d.hiC;l.uniformMatrix4fv(Fa.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:(cb[0]=Qc[0],cb[1]=Qc[1],cb[2]=Qc[2],cb[3]=Qc[3],cb[4]=Qc[4],cb[5]=Qc[5],cb[6]=Qc[6],cb[7]=Qc[7],cb[8]=Qc[8],cb[9]=Qc[9],cb[10]=Qc[10],cb[11]=Qc[11],cb[12]=Qc[12],cb[13]=
Qc[13],cb[14]=Qc[14],cb[15]=Qc[15],cb));Jb=d.loD;l.uniformMatrix4fv(gb.location,!1,Array.isArray(Jb)||Jb instanceof Float32Array?Jb:(lc[0]=Jb[0],lc[1]=Jb[1],lc[2]=Jb[2],lc[3]=Jb[3],lc[4]=Jb[4],lc[5]=Jb[5],lc[6]=Jb[6],lc[7]=Jb[7],lc[8]=Jb[8],lc[9]=Jb[9],lc[10]=Jb[10],lc[11]=Jb[11],lc[12]=Jb[12],lc[13]=Jb[13],lc[14]=Jb[14],lc[15]=Jb[15],lc));Eb=d.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(Eb)||Eb instanceof Float32Array?Eb:(Ob[0]=Eb[0],Ob[1]=Eb[1],Ob[2]=Eb[2],Ob[3]=Eb[3],Ob[4]=Eb[4],Ob[5]=
Eb[5],Ob[6]=Eb[6],Ob[7]=Eb[7],Ob[8]=Eb[8],Ob[9]=Eb[9],Ob[10]=Eb[10],Ob[11]=Eb[11],Ob[12]=Eb[12],Ob[13]=Eb[13],Ob[14]=Eb[14],Ob[15]=Eb[15],Ob));Rc=d.resolution;Lc=Rc[0];hc=Rc[1];k&&Wc===Lc&&Zc===hc||(Wc=Lc,Zc=hc,l.uniform2f(Q.location,Lc,hc));jd=d.viewBoxPos;vd=jd[0];$c=jd[1];k&&oe===vd&&Fb===$c||(oe=vd,Fb=$c,l.uniform2f(fa.location,vd,$c));Vd=d.viewBoxSize;$e=Vd[0];le=Vd[1];k&&Xe===$e&&Gd===le||(Xe=$e,Gd=le,l.uniform2f(ma.location,$e,le));Ed=d.maskHeight;k&&ed===Ed||(ed=Ed,l.uniform1f(ea.location,
Ed));Ic=d.drwLayer;k&&pd===Ic||(pd=Ic,l.uniform1f(w.location,Ic));kd=d.contextColor;bd=kd[0];Bd=kd[1];fd=kd[2];te=kd[3];k&&ld===bd&&yd===Bd&&me===fd&&ce===te||(ld=bd,yd=Bd,me=fd,ce=te,l.uniform4f(Y.location,bd,Bd,fd,te));(be=d.maskTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);ae=be._texture;l.uniform1i(ta.location,ae.bind());ue=d.offset;if(Yd=d.count)sd?l.drawElements(1,Yd,sd.type,ue<<(sd.type-5121>>1)):l.drawArrays(1,ue,Yd),v.viewportWidth=je,v.viewportHeight=Ub,ae.unbind()}ra.unbind();
aa.dirty=!0;Hb.setVAO(null);aa.profile=e},draw:function(a){var g,h,e,d,k,p;g=ka.next;g!==ka.cur&&(g?l.bindFramebuffer(36160,g.framebuffer):l.bindFramebuffer(36160,null),ka.cur=g);if(aa.dirty){g=Ae[0];p=Ae[1];h=Ae[2];e=Ae[3];if(g!==Gc[0]||p!==Gc[1]||h!==Gc[2]||e!==Gc[3])l.colorMask(g,p,h,e),Gc[0]=g,Gc[1]=p,Gc[2]=h,Gc[3]=e;g=mc.frontFace;g!==aa.frontFace&&(l.frontFace(g),aa.frontFace=g);g=mc.polygonOffset_enable;g!==aa.polygonOffset_enable&&(g?l.enable(32823):l.disable(32823),aa.polygonOffset_enable=
g);g=Od[0];p=Od[1];if(g!==Qd[0]||p!==Qd[1])l.polygonOffset(g,p),Qd[0]=g,Qd[1]=p;g=mc.sample_alpha;g!==aa.sample_alpha&&(g?l.enable(32926):l.disable(32926),aa.sample_alpha=g);g=mc.sample_enable;g!==aa.sample_enable&&(g?l.enable(32928):l.disable(32928),aa.sample_enable=g);g=Xd[0];p=Xd[1];if(g!==ee[0]||p!==ee[1])l.sampleCoverage(g,p),ee[0]=g,ee[1]=p;g=mc.stencil_enable;g!==aa.stencil_enable&&(g?l.enable(2960):l.disable(2960),aa.stencil_enable=g);g=mc.stencil_mask;g!==aa.stencil_mask&&(l.stencilMask(g),
aa.stencil_mask=g);g=cf[0];p=cf[1];h=cf[2];if(g!==zd[0]||p!==zd[1]||h!==zd[2])l.stencilFunc(g,p,h),zd[0]=g,zd[1]=p,zd[2]=h;g=Sd[0];p=Sd[1];h=Sd[2];e=Sd[3];if(g!==ke[0]||p!==ke[1]||h!==ke[2]||e!==ke[3])l.stencilOpSeparate(g,p,h,e),ke[0]=g,ke[1]=p,ke[2]=h,ke[3]=e;g=Be[0];p=Be[1];h=Be[2];e=Be[3];if(g!==Rd[0]||p!==Rd[1]||h!==Rd[2]||e!==Rd[3])l.stencilOpSeparate(g,p,h,e),Rd[0]=g,Rd[1]=p,Rd[2]=h,Rd[3]=e}md.height=a.viewportHeight;md.width=a.viewportWidth;md.x=a.viewportX;md.y=a.viewportY;h=md.x|0;e=md.y|
0;d="width"in md?md.width|0:v.framebufferWidth-h;k="height"in md?md.height|0:v.framebufferHeight-e;g=v.viewportWidth;v.viewportWidth=d;p=v.viewportHeight;v.viewportHeight=k;l.viewport(h,e,d,k);rd[0]=h;rd[1]=e;rd[2]=d;rd[3]=k;l.blendColor(0,0,0,0);Re[0]=0;Re[1]=0;Re[2]=0;Re[3]=0;l.disable(3042);aa.blend_enable=!1;l.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;l.blendFuncSeparate(770,771,1,1);xd[0]=770;xd[1]=771;xd[2]=1;xd[3]=1;l.enable(2884);aa.cull_enable=!0;l.cullFace(1029);aa.cull_face=
1029;l.enable(2929);aa.depth_enable=!0;l.depthFunc(513);aa.depth_func=513;l.depthMask(!0);aa.depth_mask=!0;l.depthRange(0,1);se[0]=0;se[1]=1;l.disable(3024);aa.dither=!1;l.lineWidth(2);aa.lineWidth=2;Cd.height=a.scissorHeight;Cd.width=a.scissorWidth;Cd.x=a.scissorX;Cd.y=a.scissorY;h=Cd.x|0;e=Cd.y|0;d="width"in Cd?Cd.width|0:v.framebufferWidth-h;k="height"in Cd?Cd.height|0:v.framebufferHeight-e;l.scissor(h,e,d,k);mf[0]=h;mf[1]=e;mf[2]=d;mf[3]=k;l.enable(3089);aa.scissor_enable=!0;h=aa.profile;aa.profile=
!1;l.useProgram(q.program);Hb.setVAO(null);e=ic.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==z.dtype||4!==d.size||d.buffer!==z||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(e,4,z.dtype,!1,0,0),d.type=z.dtype,d.size=4,d.buffer=z,d.normalized=!1,d.offset=0,d.stride=0;e=pc.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==f.dtype||4!==d.size||d.buffer!==f||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,
f.buffer),l.vertexAttribPointer(e,4,f.dtype,!1,0,0),d.type=f.dtype,d.size=4,d.buffer=f,d.normalized=!1,d.offset=0,d.stride=0;e=sc.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==c.dtype||4!==d.size||d.buffer!==c||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(e,4,c.dtype,!1,0,0),d.type=c.dtype,d.size=4,d.buffer=c,d.normalized=!1,d.offset=0,d.stride=0;e=wd.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==y.dtype||
4!==d.size||d.buffer!==y||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(e,4,y.dtype,!1,0,0),d.type=y.dtype,d.size=4,d.buffer=y,d.normalized=!1,d.offset=0,d.stride=0;e=yc.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==b.dtype||4!==d.size||d.buffer!==b||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(e,4,b.dtype,!1,0,0),d.type=b.dtype,d.size=4,d.buffer=b,d.normalized=!1,d.offset=0,
d.stride=0;e=Z.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==t.dtype||4!==d.size||d.buffer!==t||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(e,4,t.dtype,!1,0,0),d.type=t.dtype,d.size=4,d.buffer=t,d.normalized=!1,d.offset=0,d.stride=0;e=G.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==A.dtype||4!==d.size||d.buffer!==A||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(e,
4,A.dtype,!1,0,0),d.type=A.dtype,d.size=4,d.buffer=A,d.normalized=!1,d.offset=0,d.stride=0;e=ja.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==za.dtype||4!==d.size||d.buffer!==za||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,za.buffer),l.vertexAttribPointer(e,4,za.dtype,!1,0,0),d.type=za.dtype,d.size=4,d.buffer=za,d.normalized=!1,d.offset=0,d.stride=0;e=Da.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==H.dtype||4!==d.size||d.buffer!==H||
!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(e,4,H.dtype,!1,0,0),d.type=H.dtype,d.size=4,d.buffer=H,d.normalized=!1,d.offset=0,d.stride=0;e=sb.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==J.dtype||4!==d.size||d.buffer!==J||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,J.buffer),l.vertexAttribPointer(e,4,J.dtype,!1,0,0),d.type=J.dtype,d.size=4,d.buffer=J,d.normalized=!1,d.offset=0,d.stride=0;e=Sc.location;
d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==u.dtype||4!==d.size||d.buffer!==u||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,u.buffer),l.vertexAttribPointer(e,4,u.dtype,!1,0,0),d.type=u.dtype,d.size=4,d.buffer=u,d.normalized=!1,d.offset=0,d.stride=0;e=Yc.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==B.dtype||4!==d.size||d.buffer!==B||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(e,4,B.dtype,!1,
0,0),d.type=B.dtype,d.size=4,d.buffer=B,d.normalized=!1,d.offset=0,d.stride=0;e=D.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==M.dtype||4!==d.size||d.buffer!==M||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,M.buffer),l.vertexAttribPointer(e,4,M.dtype,!1,0,0),d.type=M.dtype,d.size=4,d.buffer=M,d.normalized=!1,d.offset=0,d.stride=0;e=x.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==r.dtype||4!==d.size||d.buffer!==r||!1!==d.normalized||0!==
d.offset||0!==d.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(e,4,r.dtype,!1,0,0),d.type=r.dtype,d.size=4,d.buffer=r,d.normalized=!1,d.offset=0,d.stride=0;e=ha.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);if(d.type!==I.dtype||4!==d.size||d.buffer!==I||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(e,4,I.dtype,!1,0,0),d.type=I.dtype,d.size=4,d.buffer=I,d.normalized=!1,d.offset=0,d.stride=0;e=Na.location;d=E[e];d.buffer||l.enableVertexAttribArray(e);
if(d.type!==oa.dtype||4!==d.size||d.buffer!==oa||!1!==d.normalized||0!==d.offset||0!==d.stride)l.bindBuffer(34962,oa.buffer),l.vertexAttribPointer(e,4,oa.dtype,!1,0,0),d.type=oa.dtype,d.size=4,d.buffer=oa,d.normalized=!1,d.offset=0,d.stride=0;e=a.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(qd[0]=e[0],qd[1]=e[1],qd[2]=e[2],qd[3]=e[3],qd[4]=e[4],qd[5]=e[5],qd[6]=e[6],qd[7]=e[7],qd[8]=e[8],qd[9]=e[9],qd[10]=e[10],qd[11]=e[11],qd[12]=e[12],qd[13]=e[13],qd[14]=
e[14],qd[15]=e[15],qd));e=a.dim1A;l.uniformMatrix4fv(O.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(dd[0]=e[0],dd[1]=e[1],dd[2]=e[2],dd[3]=e[3],dd[4]=e[4],dd[5]=e[5],dd[6]=e[6],dd[7]=e[7],dd[8]=e[8],dd[9]=e[9],dd[10]=e[10],dd[11]=e[11],dd[12]=e[12],dd[13]=e[13],dd[14]=e[14],dd[15]=e[15],dd));e=a.dim0B;l.uniformMatrix4fv(N.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Bc[0]=e[0],Bc[1]=e[1],Bc[2]=e[2],Bc[3]=e[3],Bc[4]=e[4],Bc[5]=e[5],Bc[6]=e[6],Bc[7]=e[7],Bc[8]=e[8],Bc[9]=
e[9],Bc[10]=e[10],Bc[11]=e[11],Bc[12]=e[12],Bc[13]=e[13],Bc[14]=e[14],Bc[15]=e[15],Bc));e=a.dim1B;l.uniformMatrix4fv(Wb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(sd[0]=e[0],sd[1]=e[1],sd[2]=e[2],sd[3]=e[3],sd[4]=e[4],sd[5]=e[5],sd[6]=e[6],sd[7]=e[7],sd[8]=e[8],sd[9]=e[9],sd[10]=e[10],sd[11]=e[11],sd[12]=e[12],sd[13]=e[13],sd[14]=e[14],sd[15]=e[15],sd));e=a.dim0C;l.uniformMatrix4fv(S.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(gd[0]=e[0],gd[1]=e[1],gd[2]=e[2],gd[3]=
e[3],gd[4]=e[4],gd[5]=e[5],gd[6]=e[6],gd[7]=e[7],gd[8]=e[8],gd[9]=e[9],gd[10]=e[10],gd[11]=e[11],gd[12]=e[12],gd[13]=e[13],gd[14]=e[14],gd[15]=e[15],gd));e=a.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Nc[0]=e[0],Nc[1]=e[1],Nc[2]=e[2],Nc[3]=e[3],Nc[4]=e[4],Nc[5]=e[5],Nc[6]=e[6],Nc[7]=e[7],Nc[8]=e[8],Nc[9]=e[9],Nc[10]=e[10],Nc[11]=e[11],Nc[12]=e[12],Nc[13]=e[13],Nc[14]=e[14],Nc[15]=e[15],Nc));e=a.dim0D;l.uniformMatrix4fv(na.location,!1,Array.isArray(e)||e instanceof
Float32Array?e:(tc[0]=e[0],tc[1]=e[1],tc[2]=e[2],tc[3]=e[3],tc[4]=e[4],tc[5]=e[5],tc[6]=e[6],tc[7]=e[7],tc[8]=e[8],tc[9]=e[9],tc[10]=e[10],tc[11]=e[11],tc[12]=e[12],tc[13]=e[13],tc[14]=e[14],tc[15]=e[15],tc));e=a.dim1D;l.uniformMatrix4fv(P.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ab[0]=e[0],ab[1]=e[1],ab[2]=e[2],ab[3]=e[3],ab[4]=e[4],ab[5]=e[5],ab[6]=e[6],ab[7]=e[7],ab[8]=e[8],ab[9]=e[9],ab[10]=e[10],ab[11]=e[11],ab[12]=e[12],ab[13]=e[13],ab[14]=e[14],ab[15]=e[15],ab));e=a.loA;l.uniformMatrix4fv(dc.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(Cc[0]=e[0],Cc[1]=e[1],Cc[2]=e[2],Cc[3]=e[3],Cc[4]=e[4],Cc[5]=e[5],Cc[6]=e[6],Cc[7]=e[7],Cc[8]=e[8],Cc[9]=e[9],Cc[10]=e[10],Cc[11]=e[11],Cc[12]=e[12],Cc[13]=e[13],Cc[14]=e[14],Cc[15]=e[15],Cc));e=a.hiA;l.uniformMatrix4fv(ia.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Db[0]=e[0],Db[1]=e[1],Db[2]=e[2],Db[3]=e[3],Db[4]=e[4],Db[5]=e[5],Db[6]=e[6],Db[7]=e[7],Db[8]=e[8],Db[9]=e[9],Db[10]=e[10],Db[11]=e[11],Db[12]=e[12],Db[13]=e[13],Db[14]=
e[14],Db[15]=e[15],Db));e=a.loB;l.uniformMatrix4fv(Ia.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(rc[0]=e[0],rc[1]=e[1],rc[2]=e[2],rc[3]=e[3],rc[4]=e[4],rc[5]=e[5],rc[6]=e[6],rc[7]=e[7],rc[8]=e[8],rc[9]=e[9],rc[10]=e[10],rc[11]=e[11],rc[12]=e[12],rc[13]=e[13],rc[14]=e[14],rc[15]=e[15],rc));e=a.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ta[0]=e[0],Ta[1]=e[1],Ta[2]=e[2],Ta[3]=e[3],Ta[4]=e[4],Ta[5]=e[5],Ta[6]=e[6],Ta[7]=e[7],Ta[8]=e[8],Ta[9]=e[9],
Ta[10]=e[10],Ta[11]=e[11],Ta[12]=e[12],Ta[13]=e[13],Ta[14]=e[14],Ta[15]=e[15],Ta));e=a.loC;l.uniformMatrix4fv(W.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(kc[0]=e[0],kc[1]=e[1],kc[2]=e[2],kc[3]=e[3],kc[4]=e[4],kc[5]=e[5],kc[6]=e[6],kc[7]=e[7],kc[8]=e[8],kc[9]=e[9],kc[10]=e[10],kc[11]=e[11],kc[12]=e[12],kc[13]=e[13],kc[14]=e[14],kc[15]=e[15],kc));e=a.hiC;l.uniformMatrix4fv(Fa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(bc[0]=e[0],bc[1]=e[1],bc[2]=e[2],bc[3]=e[3],bc[4]=
e[4],bc[5]=e[5],bc[6]=e[6],bc[7]=e[7],bc[8]=e[8],bc[9]=e[9],bc[10]=e[10],bc[11]=e[11],bc[12]=e[12],bc[13]=e[13],bc[14]=e[14],bc[15]=e[15],bc));e=a.loD;l.uniformMatrix4fv(gb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ad[0]=e[0],ad[1]=e[1],ad[2]=e[2],ad[3]=e[3],ad[4]=e[4],ad[5]=e[5],ad[6]=e[6],ad[7]=e[7],ad[8]=e[8],ad[9]=e[9],ad[10]=e[10],ad[11]=e[11],ad[12]=e[12],ad[13]=e[13],ad[14]=e[14],ad[15]=e[15],ad));e=a.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(e)||e instanceof Float32Array?
e:(Dd[0]=e[0],Dd[1]=e[1],Dd[2]=e[2],Dd[3]=e[3],Dd[4]=e[4],Dd[5]=e[5],Dd[6]=e[6],Dd[7]=e[7],Dd[8]=e[8],Dd[9]=e[9],Dd[10]=e[10],Dd[11]=e[11],Dd[12]=e[12],Dd[13]=e[13],Dd[14]=e[14],Dd[15]=e[15],Dd));e=a.resolution;l.uniform2f(Q.location,e[0],e[1]);e=a.viewBoxPos;l.uniform2f(fa.location,e[0],e[1]);e=a.viewBoxSize;l.uniform2f(ma.location,e[0],e[1]);l.uniform1f(ea.location,a.maskHeight);l.uniform1f(w.location,a.drwLayer);e=a.contextColor;l.uniform4f(Y.location,e[0],e[1],e[2],e[3]);(e=a.maskTexture)&&"framebuffer"===
e._reglType&&(e=e.color[0]);e=e._texture;l.uniform1i(ta.location,e.bind());l.uniform1i(sa.location,F.bind());(d=T.elements)?l.bindBuffer(34963,d.buffer.buffer):Hb.currentVAO&&(d=wa.getElements(Hb.currentVAO.elements))&&l.bindBuffer(34963,d.buffer.buffer);k=a.offset;if(a=a.count)d?l.drawElements(1,a,d.type,k<<(d.type-5121>>1)):l.drawArrays(1,k,a),aa.dirty=!0,Hb.setVAO(null),v.viewportWidth=g,v.viewportHeight=p,aa.profile=h,e.unbind(),F.unbind()},scope:function(d,l,q){var w,x,G,E,D,Z,V,N,K,O,S,F,P,
W,Q,fa,ja,ka,Y,ha,ba,wa,ea,ia,sa,ua,pc,ab,ma,Ta,Da,xa,La,ee,Db,Hb,Wa,ya,Sd,Ea,bc,Jc,Nc,na,gd,Xb,kc,Sa,tb,tc,Ga,Gb,Qa,Ba,wd,ta,dd,Ab,cb,ra,Bc,rc,zd,Gc,Rd,Cc,Dc,ad,Tb,Ha,sb,mb,xb,rd,sd,ke,Sc,Ob,qd,yc,td,lc,Fa,nd,Re,Jb,Eb,re,xd,Od,mf,Be,Dd,ic,cf,$a,Na,sc,Xd,Ae,Oa,gb,Qd,se,Ic,Wb,Ia,Yc,ld,dc,yd,ac,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Vb,ve,ne,Ke,Le,He,qe,ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf,rf,of,sf,Bf,Cf,Je,xe,pf,qf,Df,Gf,Af,Ef,Ff,
wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,pg,ef,af,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,ff,bf,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;md.height=d.viewportHeight;md.width=d.viewportWidth;md.x=d.viewportX;md.y=d.viewportY;w=md.x|0;x=md.y|0;G="width"in md?md.width|0:v.framebufferWidth-w;E="height"in md?md.height|0:v.framebufferHeight-
x;D=v.viewportWidth;v.viewportWidth=G;Z=v.viewportHeight;v.viewportHeight=E;V=Se[0];Se[0]=w;N=Se[1];Se[1]=x;K=Se[2];Se[2]=G;O=Se[3];Se[3]=E;S=yb[0];yb[0]=0;F=yb[1];yb[1]=0;P=yb[2];yb[2]=0;W=yb[3];yb[3]=0;Q=mc.blend_enable;mc.blend_enable=!1;fa=je[0];je[0]=32774;ja=je[1];je[1]=32774;ka=$d[0];$d[0]=770;Y=$d[1];$d[1]=771;ha=$d[2];$d[2]=1;ba=$d[3];$d[3]=1;wa=mc.cull_enable;mc.cull_enable=!0;ea=mc.cull_face;mc.cull_face=1029;ia=mc.depth_enable;mc.depth_enable=!0;sa=mc.depth_func;mc.depth_func=513;ua=mc.depth_mask;
mc.depth_mask=!0;pc=de[0];de[0]=0;ab=de[1];de[1]=1;ma=mc.dither;mc.dither=!1;Ta=mc.lineWidth;mc.lineWidth=2;Cd.height=d.scissorHeight;Cd.width=d.scissorWidth;Cd.x=d.scissorX;Cd.y=d.scissorY;Da=Cd.x|0;xa=Cd.y|0;La="width"in Cd?Cd.width|0:v.framebufferWidth-Da;ee="height"in Cd?Cd.height|0:v.framebufferHeight-xa;Db=Ze[0];Ze[0]=Da;Hb=Ze[1];Ze[1]=xa;Wa=Ze[2];Ze[2]=La;ya=Ze[3];Ze[3]=ee;Sd=mc.scissor_enable;mc.scissor_enable=!0;Ea=aa.profile;aa.profile=!1;bc=d.offset;Jc=T.offset;T.offset=bc;Nc=d.count;na=
T.count;T.count=Nc;gd=T.primitive;T.primitive=1;Xb=d.contextColor;kc=p[24];p[24]=Xb;Sa=d.dim0A;tb=p[3];p[3]=Sa;tc=d.dim0B;Ga=p[5];p[5]=tc;Gb=d.dim0C;Qa=p[7];p[7]=Gb;Ba=d.dim0D;wd=p[9];p[9]=Ba;ta=d.dim1A;dd=p[4];p[4]=ta;Ab=d.dim1B;cb=p[6];p[6]=Ab;ra=d.dim1C;Bc=p[8];p[8]=ra;rc=d.dim1D;zd=p[10];p[10]=rc;Gc=d.drwLayer;Rd=p[23];p[23]=Gc;Cc=d.hiA;Dc=p[12];p[12]=Cc;ad=d.hiB;Tb=p[14];p[14]=ad;Ha=d.hiC;sb=p[16];p[16]=Ha;mb=d.hiD;xb=p[18];p[18]=mb;rd=d.loA;sd=p[11];p[11]=rd;ke=d.loB;Sc=p[13];p[13]=ke;Ob=d.loC;
qd=p[15];p[15]=Ob;yc=d.loD;td=p[17];p[17]=yc;lc=d.maskHeight;Fa=p[22];p[22]=lc;nd=d.maskTexture;Re=p[25];p[25]=nd;Jb=p[26];p[26]=Ca;Eb=d.resolution;re=p[19];p[19]=Eb;xd=d.viewBoxPos;Od=p[20];p[20]=xd;mf=d.viewBoxSize;Be=p[21];p[21]=mf;Dd=k.buffer;k.buffer=oa;ic=k.divisor;k.divisor=0;cf=k.normalized;k.normalized=!1;$a=k.offset;k.offset=0;Na=k.size;k.size=0;sc=k.state;k.state=1;Xd=k.stride;k.stride=0;Ae=k.type;k.type=oa.dtype;Oa=k.w;k.w=0;gb=k.x;k.x=0;Qd=k.y;k.y=0;se=k.z;k.z=0;Ic=h.buffer;h.buffer=
z;Wb=h.divisor;h.divisor=0;Ia=h.normalized;h.normalized=!1;Yc=h.offset;h.offset=0;ld=h.size;h.size=0;dc=h.state;h.state=1;yd=h.stride;h.stride=0;ac=h.type;h.type=z.dtype;me=h.w;h.w=0;te=h.x;h.x=0;ce=h.y;h.y=0;be=h.z;h.z=0;ae=g.buffer;g.buffer=f;ue=g.divisor;g.divisor=0;Yd=g.normalized;g.normalized=!1;ge=g.offset;g.offset=0;Ac=g.size;g.size=0;Xc=g.state;g.state=1;pe=g.stride;g.stride=0;ie=g.type;g.type=f.dtype;Fd=g.w;g.w=0;Id=g.x;g.x=0;Kd=g.y;g.y=0;Ld=g.z;g.z=0;he=n.buffer;n.buffer=c;Vb=n.divisor;
n.divisor=0;ve=n.normalized;n.normalized=!1;ne=n.offset;n.offset=0;Ke=n.size;n.size=0;Le=n.state;n.state=1;He=n.stride;n.stride=0;qe=n.type;n.type=c.dtype;ye=n.w;n.w=0;Ce=n.x;n.x=0;De=n.y;n.y=0;Ee=n.z;n.z=0;ze=R.buffer;R.buffer=y;Hd=R.divisor;R.divisor=0;Pd=R.normalized;R.normalized=!1;Wd=R.offset;R.offset=0;Zd=R.size;R.size=0;Fe=R.state;R.state=1;Ad=R.stride;R.stride=0;Md=R.type;R.type=y.dtype;we=R.w;R.w=0;Ge=R.x;R.x=0;gf=R.y;R.y=0;We=R.z;R.z=0;Me=ca.buffer;ca.buffer=b;Ie=ca.divisor;ca.divisor=0;
Ue=ca.normalized;ca.normalized=!1;Qe=ca.offset;ca.offset=0;Ne=ca.size;ca.size=0;Oe=ca.state;ca.state=1;Nd=ca.stride;ca.stride=0;Ud=ca.type;ca.type=b.dtype;Pe=ca.w;ca.w=0;hf=ca.x;ca.x=0;nf=ca.y;ca.y=0;df=ca.z;ca.z=0;jf=m.buffer;m.buffer=t;kf=m.divisor;m.divisor=0;lf=m.normalized;m.normalized=!1;rf=m.offset;m.offset=0;of=m.size;m.size=0;sf=m.state;m.state=1;Bf=m.stride;m.stride=0;Cf=m.type;m.type=t.dtype;Je=m.w;m.w=0;xe=m.x;m.x=0;pf=m.y;m.y=0;qf=m.z;m.z=0;Df=la.buffer;la.buffer=A;Gf=la.divisor;la.divisor=
0;Af=la.normalized;la.normalized=!1;Ef=la.offset;la.offset=0;Ff=la.size;la.size=0;wf=la.state;la.state=1;xf=la.stride;la.stride=0;vf=la.type;la.type=A.dtype;yf=la.w;la.w=0;zf=la.x;la.x=0;If=la.y;la.y=0;Jf=la.z;la.z=0;Kf=L.buffer;L.buffer=za;Lf=L.divisor;L.divisor=0;tf=L.normalized;L.normalized=!1;Qf=L.offset;L.offset=0;Hf=L.size;L.size=0;uf=L.state;L.state=1;cg=L.stride;L.stride=0;Rf=L.type;L.type=za.dtype;Sf=L.w;L.w=0;pg=L.x;L.x=0;ef=L.y;L.y=0;af=L.z;L.z=0;Mf=da.buffer;da.buffer=H;Nf=da.divisor;
da.divisor=0;dg=da.normalized;da.normalized=!1;eg=da.offset;da.offset=0;fg=da.size;da.size=0;gg=da.state;da.state=1;hg=da.stride;da.stride=0;Vf=da.type;da.type=H.dtype;Tf=da.w;da.w=0;Wf=da.x;da.x=0;Xf=da.y;da.y=0;Yf=da.z;da.z=0;ig=a.buffer;a.buffer=J;qg=a.divisor;a.divisor=0;rg=a.normalized;a.normalized=!1;sg=a.offset;a.offset=0;tg=a.size;a.size=0;ug=a.state;a.state=1;vg=a.stride;a.stride=0;wg=a.type;a.type=J.dtype;xg=a.w;a.w=0;yg=a.x;a.x=0;zg=a.y;a.y=0;Ag=a.z;a.z=0;ff=e.buffer;e.buffer=u;bf=e.divisor;
e.divisor=0;Of=e.normalized;e.normalized=!1;Pf=e.offset;e.offset=0;jg=e.size;e.size=0;kg=e.state;e.state=1;lg=e.stride;e.stride=0;mg=e.type;e.type=u.dtype;ng=e.w;e.w=0;Zf=e.x;e.x=0;Uf=e.y;e.y=0;$f=e.z;e.z=0;ag=X.buffer;X.buffer=B;bg=X.divisor;X.divisor=0;og=X.normalized;X.normalized=!1;Bg=X.offset;X.offset=0;Cg=X.size;X.size=0;Dg=X.state;X.state=1;Eg=X.stride;X.stride=0;Fg=X.type;X.type=B.dtype;Gg=X.w;X.w=0;Hg=X.x;X.x=0;Ig=X.y;X.y=0;Jg=X.z;X.z=0;Kg=pa.buffer;pa.buffer=M;Lg=pa.divisor;pa.divisor=0;
Mg=pa.normalized;pa.normalized=!1;Ng=pa.offset;pa.offset=0;Og=pa.size;pa.size=0;Qg=pa.state;pa.state=1;Rg=pa.stride;pa.stride=0;Sg=pa.type;pa.type=M.dtype;Tg=pa.w;pa.w=0;Ug=pa.x;pa.x=0;Vg=pa.y;pa.y=0;Wg=pa.z;pa.z=0;Xg=C.buffer;C.buffer=r;Yg=C.divisor;C.divisor=0;Zg=C.normalized;C.normalized=!1;$g=C.offset;C.offset=0;ah=C.size;C.size=0;bh=C.state;C.state=1;ch=C.stride;C.stride=0;dh=C.type;C.type=r.dtype;eh=C.w;C.w=0;fh=C.x;C.x=0;gh=C.y;C.y=0;hh=C.z;C.z=0;ih=Fb.buffer;Fb.buffer=I;jh=Fb.divisor;Fb.divisor=
0;kh=Fb.normalized;Fb.normalized=!1;lh=Fb.offset;Fb.offset=0;mh=Fb.size;Fb.size=0;nh=Fb.state;Fb.state=1;oh=Fb.stride;Fb.stride=0;ph=Fb.type;Fb.type=I.dtype;qh=Fb.w;Fb.w=0;rh=Fb.x;Fb.x=0;sh=Fb.y;Fb.y=0;th=Fb.z;Fb.z=0;uh=U.vert;U.vert=2;vh=U.frag;U.frag=1;aa.dirty=!0;l(v,d,q);v.viewportWidth=D;v.viewportHeight=Z;Se[0]=V;Se[1]=N;Se[2]=K;Se[3]=O;yb[0]=S;yb[1]=F;yb[2]=P;yb[3]=W;mc.blend_enable=Q;je[0]=fa;je[1]=ja;$d[0]=ka;$d[1]=Y;$d[2]=ha;$d[3]=ba;mc.cull_enable=wa;mc.cull_face=ea;mc.depth_enable=ia;
mc.depth_func=sa;mc.depth_mask=ua;de[0]=pc;de[1]=ab;mc.dither=ma;mc.lineWidth=Ta;Ze[0]=Db;Ze[1]=Hb;Ze[2]=Wa;Ze[3]=ya;mc.scissor_enable=Sd;aa.profile=Ea;T.offset=Jc;T.count=na;T.primitive=gd;p[24]=kc;p[3]=tb;p[5]=Ga;p[7]=Qa;p[9]=wd;p[4]=dd;p[6]=cb;p[8]=Bc;p[10]=zd;p[23]=Rd;p[12]=Dc;p[14]=Tb;p[16]=sb;p[18]=xb;p[11]=sd;p[13]=Sc;p[15]=qd;p[17]=td;p[22]=Fa;p[25]=Re;p[26]=Jb;p[19]=re;p[20]=Od;p[21]=Be;k.buffer=Dd;k.divisor=ic;k.normalized=cf;k.offset=$a;k.size=Na;k.state=sc;k.stride=Xd;k.type=Ae;k.w=Oa;
k.x=gb;k.y=Qd;k.z=se;h.buffer=Ic;h.divisor=Wb;h.normalized=Ia;h.offset=Yc;h.size=ld;h.state=dc;h.stride=yd;h.type=ac;h.w=me;h.x=te;h.y=ce;h.z=be;g.buffer=ae;g.divisor=ue;g.normalized=Yd;g.offset=ge;g.size=Ac;g.state=Xc;g.stride=pe;g.type=ie;g.w=Fd;g.x=Id;g.y=Kd;g.z=Ld;n.buffer=he;n.divisor=Vb;n.normalized=ve;n.offset=ne;n.size=Ke;n.state=Le;n.stride=He;n.type=qe;n.w=ye;n.x=Ce;n.y=De;n.z=Ee;R.buffer=ze;R.divisor=Hd;R.normalized=Pd;R.offset=Wd;R.size=Zd;R.state=Fe;R.stride=Ad;R.type=Md;R.w=we;R.x=Ge;
R.y=gf;R.z=We;ca.buffer=Me;ca.divisor=Ie;ca.normalized=Ue;ca.offset=Qe;ca.size=Ne;ca.state=Oe;ca.stride=Nd;ca.type=Ud;ca.w=Pe;ca.x=hf;ca.y=nf;ca.z=df;m.buffer=jf;m.divisor=kf;m.normalized=lf;m.offset=rf;m.size=of;m.state=sf;m.stride=Bf;m.type=Cf;m.w=Je;m.x=xe;m.y=pf;m.z=qf;la.buffer=Df;la.divisor=Gf;la.normalized=Af;la.offset=Ef;la.size=Ff;la.state=wf;la.stride=xf;la.type=vf;la.w=yf;la.x=zf;la.y=If;la.z=Jf;L.buffer=Kf;L.divisor=Lf;L.normalized=tf;L.offset=Qf;L.size=Hf;L.state=uf;L.stride=cg;L.type=
Rf;L.w=Sf;L.x=pg;L.y=ef;L.z=af;da.buffer=Mf;da.divisor=Nf;da.normalized=dg;da.offset=eg;da.size=fg;da.state=gg;da.stride=hg;da.type=Vf;da.w=Tf;da.x=Wf;da.y=Xf;da.z=Yf;a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;e.buffer=ff;e.divisor=bf;e.normalized=Of;e.offset=Pf;e.size=jg;e.state=kg;e.stride=lg;e.type=mg;e.w=ng;e.x=Zf;e.y=Uf;e.z=$f;X.buffer=ag;X.divisor=bg;X.normalized=og;X.offset=Bg;X.size=Cg;X.state=Dg;X.stride=Eg;
X.type=Fg;X.w=Gg;X.x=Hg;X.y=Ig;X.z=Jg;pa.buffer=Kg;pa.divisor=Lg;pa.normalized=Mg;pa.offset=Ng;pa.size=Og;pa.state=Qg;pa.stride=Rg;pa.type=Sg;pa.w=Tg;pa.x=Ug;pa.y=Vg;pa.z=Wg;C.buffer=Xg;C.divisor=Yg;C.normalized=Zg;C.offset=$g;C.size=ah;C.state=bh;C.stride=ch;C.type=dh;C.w=eh;C.x=fh;C.y=gh;C.z=hh;Fb.buffer=ih;Fb.divisor=jh;Fb.normalized=kh;Fb.offset=lh;Fb.size=mh;Fb.state=nh;Fb.stride=oh;Fb.type=ph;Fb.w=qh;Fb.x=rh;Fb.y=sh;Fb.z=th;U.vert=uh;U.frag=vh;aa.dirty=!0}}},$1:function(d,V){var q,z,f,c,y,b,
t,A,za,H,J,u,B,M,r,I,C,F,Ca,k,h,g,n,R,ca,m,la,L,da,a;q=d.attributes;z=d.current;f=d.framebuffer;c=d.gl;y=d.next;b=d.vao;t=y.blend_color;A=z.blend_color;za=y.blend_equation;H=z.blend_equation;J=y.blend_func;u=z.blend_func;B=y.colorMask;M=z.colorMask;r=y.depth_range;I=z.depth_range;C=y.polygonOffset_offset;F=z.polygonOffset_offset;Ca=y.sample_coverage;k=z.sample_coverage;h=y.scissor_box;g=z.scissor_box;n=y.stencil_func;R=z.stencil_func;ca=y.stencil_opBack;m=z.stencil_opBack;la=y.stencil_opFront;L=z.stencil_opFront;
da=y.viewport;a=z.viewport;return{poll:function(){var b,d,q,V,Fb,ac,ra,Na,Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa;z.dirty=!1;d=y.blend_enable;q=y.cull_enable;V=y.depth_enable;Fb=y.dither;ac=y.polygonOffset_enable;ra=y.sample_alpha;Na=y.sample_enable;Y=y.scissor_enable;K=y.stencil_enable;N=y.cull_face;S=z.cull_face;na=y.depth_func;O=z.depth_func;Wb=y.depth_mask;$a=z.depth_mask;P=y.frontFace;w=z.frontFace;ia=y.lineWidth;ba=z.lineWidth;Fa=y.stencil_mask;Oa=z.stencil_mask;b=f.next;b!==f.cur&&(b?c.bindFramebuffer(36160,
b.framebuffer):c.bindFramebuffer(36160,null),f.cur=b);d!==z.blend_enable&&(d?c.enable(3042):c.disable(3042),z.blend_enable=d);q!==z.cull_enable&&(q?c.enable(2884):c.disable(2884),z.cull_enable=q);V!==z.depth_enable&&(V?c.enable(2929):c.disable(2929),z.depth_enable=V);Fb!==z.dither&&(Fb?c.enable(3024):c.disable(3024),z.dither=Fb);ac!==z.polygonOffset_enable&&(ac?c.enable(32823):c.disable(32823),z.polygonOffset_enable=ac);ra!==z.sample_alpha&&(ra?c.enable(32926):c.disable(32926),z.sample_alpha=ra);
Na!==z.sample_enable&&(Na?c.enable(32928):c.disable(32928),z.sample_enable=Na);Y!==z.scissor_enable&&(Y?c.enable(3089):c.disable(3089),z.scissor_enable=Y);K!==z.stencil_enable&&(K?c.enable(2960):c.disable(2960),z.stencil_enable=K);if(t[0]!==A[0]||t[1]!==A[1]||t[2]!==A[2]||t[3]!==A[3])c.blendColor(t[0],t[1],t[2],t[3]),A[0]=t[0],A[1]=t[1],A[2]=t[2],A[3]=t[3];if(za[0]!==H[0]||za[1]!==H[1])c.blendEquationSeparate(za[0],za[1]),H[0]=za[0],H[1]=za[1];if(J[0]!==u[0]||J[1]!==u[1]||J[2]!==u[2]||J[3]!==u[3])c.blendFuncSeparate(J[0],
J[1],J[2],J[3]),u[0]=J[0],u[1]=J[1],u[2]=J[2],u[3]=J[3];if(B[0]!==M[0]||B[1]!==M[1]||B[2]!==M[2]||B[3]!==M[3])c.colorMask(B[0],B[1],B[2],B[3]),M[0]=B[0],M[1]=B[1],M[2]=B[2],M[3]=B[3];N!==S&&(c.cullFace(N),z.cull_face=N);na!==O&&(c.depthFunc(na),z.depth_func=na);Wb!==$a&&(c.depthMask(Wb),z.depth_mask=Wb);if(r[0]!==I[0]||r[1]!==I[1])c.depthRange(r[0],r[1]),I[0]=r[0],I[1]=r[1];P!==w&&(c.frontFace(P),z.frontFace=P);ia!==ba&&(c.lineWidth(ia),z.lineWidth=ia);if(C[0]!==F[0]||C[1]!==F[1])c.polygonOffset(C[0],
C[1]),F[0]=C[0],F[1]=C[1];if(Ca[0]!==k[0]||Ca[1]!==k[1])c.sampleCoverage(Ca[0],Ca[1]),k[0]=Ca[0],k[1]=Ca[1];if(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3])c.scissor(h[0],h[1],h[2],h[3]),g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3];if(n[0]!==R[0]||n[1]!==R[1]||n[2]!==R[2])c.stencilFunc(n[0],n[1],n[2]),R[0]=n[0],R[1]=n[1],R[2]=n[2];Fa!==Oa&&(c.stencilMask(Fa),z.stencil_mask=Fa);if(ca[0]!==m[0]||ca[1]!==m[1]||ca[2]!==m[2]||ca[3]!==m[3])c.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]),m[0]=ca[0],m[1]=ca[1],
m[2]=ca[2],m[3]=ca[3];if(la[0]!==L[0]||la[1]!==L[1]||la[2]!==L[2]||la[3]!==L[3])c.stencilOpSeparate(la[0],la[1],la[2],la[3]),L[0]=la[0],L[1]=la[1],L[2]=la[2],L[3]=la[3];if(da[0]!==a[0]||da[1]!==a[1]||da[2]!==a[2]||da[3]!==a[3])c.viewport(da[0],da[1],da[2],da[3]),a[0]=da[0],a[1]=da[1],a[2]=da[2],a[3]=da[3]},refresh:function(){var e,d,pa,fd,Fb,ac,ra,Na,Y,K,N,S,na,O,Wb,$a;z.dirty=!1;d=y.blend_enable;pa=y.cull_enable;fd=y.depth_enable;Fb=y.dither;ac=y.polygonOffset_enable;ra=y.sample_alpha;Na=y.sample_enable;
Y=y.scissor_enable;K=y.stencil_enable;N=y.cull_face;S=y.depth_func;na=y.depth_mask;O=y.frontFace;Wb=y.lineWidth;$a=y.stencil_mask;(e=f.next)?c.bindFramebuffer(36160,e.framebuffer):c.bindFramebuffer(36160,null);f.cur=e;e=q[0];e.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(0,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(0,e.divisor);e=q[1];e.buffer?
(c.enableVertexAttribArray(1),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(1,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(1,e.divisor);e=q[2];e.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(2,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(2),c.vertexAttrib4f(2,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(2,
e.divisor);e=q[3];e.buffer?(c.enableVertexAttribArray(3),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(3,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(3,e.divisor);e=q[4];e.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(4,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,e.x,e.y,e.z,
e.w),e.buffer=null);V.vertexAttribDivisorANGLE(4,e.divisor);e=q[5];e.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(5,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(5,e.divisor);e=q[6];e.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(6,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(6),
c.vertexAttrib4f(6,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(6,e.divisor);e=q[7];e.buffer?(c.enableVertexAttribArray(7),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(7,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(7,e.divisor);e=q[8];e.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(8,e.size,e.type,e.normalized,e.stride,
e.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(8,e.divisor);e=q[9];e.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(9,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(9,e.divisor);e=q[10];e.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(10,
e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(10,e.divisor);e=q[11];e.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(11,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(11),c.vertexAttrib4f(11,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(11,e.divisor);e=q[12];e.buffer?(c.enableVertexAttribArray(12),
c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(12,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(12,e.divisor);e=q[13];e.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(13,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(13,
e.divisor);e=q[14];e.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(14,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,e.x,e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(14,e.divisor);e=q[15];e.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(15,e.size,e.type,e.normalized,e.stride,e.offset)):(c.disableVertexAttribArray(15),c.vertexAttrib4f(15,e.x,
e.y,e.z,e.w),e.buffer=null);V.vertexAttribDivisorANGLE(15,e.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);d?c.enable(3042):c.disable(3042);z.blend_enable=d;pa?c.enable(2884):c.disable(2884);z.cull_enable=pa;fd?c.enable(2929):c.disable(2929);z.depth_enable=fd;Fb?c.enable(3024):c.disable(3024);z.dither=Fb;ac?c.enable(32823):c.disable(32823);z.polygonOffset_enable=ac;ra?c.enable(32926):c.disable(32926);z.sample_alpha=ra;Na?c.enable(32928):c.disable(32928);z.sample_enable=Na;Y?c.enable(3089):c.disable(3089);
z.scissor_enable=Y;K?c.enable(2960):c.disable(2960);z.stencil_enable=K;c.blendColor(t[0],t[1],t[2],t[3]);A[0]=t[0];A[1]=t[1];A[2]=t[2];A[3]=t[3];c.blendEquationSeparate(za[0],za[1]);H[0]=za[0];H[1]=za[1];c.blendFuncSeparate(J[0],J[1],J[2],J[3]);u[0]=J[0];u[1]=J[1];u[2]=J[2];u[3]=J[3];c.colorMask(B[0],B[1],B[2],B[3]);M[0]=B[0];M[1]=B[1];M[2]=B[2];M[3]=B[3];c.cullFace(N);z.cull_face=N;c.depthFunc(S);z.depth_func=S;c.depthMask(na);z.depth_mask=na;c.depthRange(r[0],r[1]);I[0]=r[0];I[1]=r[1];c.frontFace(O);
z.frontFace=O;c.lineWidth(Wb);z.lineWidth=Wb;c.polygonOffset(C[0],C[1]);F[0]=C[0];F[1]=C[1];c.sampleCoverage(Ca[0],Ca[1]);k[0]=Ca[0];k[1]=Ca[1];c.scissor(h[0],h[1],h[2],h[3]);g[0]=h[0];g[1]=h[1];g[2]=h[2];g[3]=h[3];c.stencilFunc(n[0],n[1],n[2]);R[0]=n[0];R[1]=n[1];R[2]=n[2];c.stencilMask($a);z.stencil_mask=$a;c.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]);m[0]=ca[0];m[1]=ca[1];m[2]=ca[2];m[3]=ca[3];c.stencilOpSeparate(la[0],la[1],la[2],la[3]);L[0]=la[0];L[1]=la[1];L[2]=la[2];L[3]=la[3];c.viewport(da[0],
da[1],da[2],da[3]);a[0]=da[0];a[1]=da[1];a[2]=da[2];a[3]=da[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(d,V,q,z,f,c,y,b,t,A,za,H,J,u,B,M,r,I,C,F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,fd,Fb,ac,ra,Na,Y,K,N,S,na,O,Wb,$a){var P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta,ic,pc,sc,wd,yc,Z,G,ja,Da,sb,Sc,Yc,D,x,ha,sa,Q,fa,ma,E,v,aa,T,wa,ka,l,mc,U,p,Hb,yb;P=d.attributes;w=d.buffer;ia=d.context;ba=d.current;
Fa=d.draw;Oa=d.elements;dc=d.extensions;Ia=d.framebuffer;W=d.gl;gb=d.isBufferArgs;ea=d.next;ta=d.shader;ic=d.uniforms;pc=d.vao;sc=ea.blend_color;wd=ba.blend_color;yc=ea.blend_equation;Z=ba.blend_equation;G=ea.blend_func;ja=ba.blend_func;Da=ea.colorMask;sb=ba.colorMask;Sc=ea.depth_range;Yc=ba.depth_range;D=ea.polygonOffset_offset;x=ba.polygonOffset_offset;ha=ea.sample_coverage;sa=ba.sample_coverage;Q=ea.scissor_box;fa=ba.scissor_box;ma=ea.stencil_func;E=ba.stencil_func;v=ea.stencil_opBack;aa=ba.stencil_opBack;
T=ea.stencil_opFront;wa=ba.stencil_opFront;ka=ea.viewport;l=ba.viewport;mc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};U={};U.buffer=q;U.divisor=1;p={};p.buffer=z;p.divisor=1;Hb={};Hb.buffer=f;Hb.divisor=1;yb={};yb.buffer=c;yb.divisor=1;return{batch:function(b,c){var d,g,f,h,k,n;d=Ia.next;d!==Ia.cur&&(d?W.bindFramebuffer(36160,d.framebuffer):W.bindFramebuffer(36160,null),Ia.cur=d);if(ba.dirty){var q,r,t,G,y,z,B,I,R,A,F,M,Q,ka,ca,C,za,Ca,ga,ta,sd,
gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,yc;q=ea.dither;q!==ba.dither&&(q?W.enable(3024):W.disable(3024),ba.dither=q);r=ea.depth_func;r!==ba.depth_func&&(W.depthFunc(r),ba.depth_func=r);t=Sc[0];G=Sc[1];if(t!==Yc[0]||G!==Yc[1])W.depthRange(t,G),Yc[0]=t,Yc[1]=G;y=ea.depth_mask;y!==ba.depth_mask&&(W.depthMask(y),ba.depth_mask=y);z=Da[0];B=Da[1];I=Da[2];R=Da[3];if(z!==sb[0]||B!==sb[1]||I!==sb[2]||R!==sb[3])W.colorMask(z,B,I,R),sb[0]=z,sb[1]=B,sb[2]=I,sb[3]=R;A=ea.cull_enable;A!==ba.cull_enable&&(A?W.enable(2884):
W.disable(2884),ba.cull_enable=A);F=ea.cull_face;F!==ba.cull_face&&(W.cullFace(F),ba.cull_face=F);M=ea.frontFace;M!==ba.frontFace&&(W.frontFace(M),ba.frontFace=M);Q=ea.lineWidth;Q!==ba.lineWidth&&(W.lineWidth(Q),ba.lineWidth=Q);ka=ea.polygonOffset_enable;ka!==ba.polygonOffset_enable&&(ka?W.enable(32823):W.disable(32823),ba.polygonOffset_enable=ka);ca=D[0];C=D[1];if(ca!==x[0]||C!==x[1])W.polygonOffset(ca,C),x[0]=ca,x[1]=C;za=ea.sample_alpha;za!==ba.sample_alpha&&(za?W.enable(32926):W.disable(32926),
ba.sample_alpha=za);Ca=ea.sample_enable;Ca!==ba.sample_enable&&(Ca?W.enable(32928):W.disable(32928),ba.sample_enable=Ca);ga=ha[0];ta=ha[1];if(ga!==sa[0]||ta!==sa[1])W.sampleCoverage(ga,ta),sa[0]=ga,sa[1]=ta;sd=ea.stencil_enable;sd!==ba.stencil_enable&&(sd?W.enable(2960):W.disable(2960),ba.stencil_enable=sd);gd=ea.stencil_mask;gd!==ba.stencil_mask&&(W.stencilMask(gd),ba.stencil_mask=gd);Nc=ma[0];tc=ma[1];ab=ma[2];if(Nc!==E[0]||tc!==E[1]||ab!==E[2])W.stencilFunc(Nc,tc,ab),E[0]=Nc,E[1]=tc,E[2]=ab;Cc=
T[0];Db=T[1];rc=T[2];Ta=T[3];if(Cc!==wa[0]||Db!==wa[1]||rc!==wa[2]||Ta!==wa[3])W.stencilOpSeparate(Cc,Db,rc,Ta),wa[0]=Cc,wa[1]=Db,wa[2]=rc,wa[3]=Ta;kc=v[0];bc=v[1];ad=v[2];yc=v[3];if(kc!==aa[0]||bc!==aa[1]||ad!==aa[2]||yc!==aa[3])W.stencilOpSeparate(kc,bc,ad,yc),aa[0]=kc,aa[1]=bc,aa[2]=ad,aa[3]=yc}W.blendColor(0,0,0,0);wd[0]=0;wd[1]=0;wd[2]=0;wd[3]=0;W.enable(3042);ba.blend_enable=!0;W.blendEquationSeparate(32774,32774);Z[0]=32774;Z[1]=32774;W.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;
ja[2]=773;ja[3]=1;W.disable(2929);ba.depth_enable=!1;W.enable(3089);ba.scissor_enable=!0;if(g=ba.profile)f=performance.now(),V.count+=c;W.useProgram(m.program);h=dc.angle_instanced_arrays;var nd,Dc,Xb,Jc,Gb,La,tb,Wa;pc.setVAO(null);nd=Fb.location;Dc=P[nd];Dc.buffer||W.enableVertexAttribArray(nd);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==H||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)W.bindBuffer(34962,H.buffer),W.vertexAttribPointer(nd,2,5126,!1,24,0),Dc.type=5126,Dc.size=2,Dc.buffer=H,Dc.normalized=
!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(h.vertexAttribDivisorANGLE(nd,0),Dc.divisor=0);Xb=ra.location;Jc=P[Xb];Jc.buffer||W.enableVertexAttribArray(Xb);if(5126!==Jc.type||2!==Jc.size||Jc.buffer!==J||!1!==Jc.normalized||8!==Jc.offset||24!==Jc.stride)W.bindBuffer(34962,J.buffer),W.vertexAttribPointer(Xb,2,5126,!1,24,8),Jc.type=5126,Jc.size=2,Jc.buffer=J,Jc.normalized=!1,Jc.offset=8,Jc.stride=24;0!==Jc.divisor&&(h.vertexAttribDivisorANGLE(Xb,0),Jc.divisor=0);Gb=X.location;La=P[Gb];La.buffer||W.enableVertexAttribArray(Gb);
if(5126!==La.type||2!==La.size||La.buffer!==u||!1!==La.normalized||16!==La.offset||24!==La.stride)W.bindBuffer(34962,u.buffer),W.vertexAttribPointer(Gb,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=u,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(h.vertexAttribDivisorANGLE(Gb,0),La.divisor=0);(tb=Fa.elements)?W.bindBuffer(34963,tb.buffer.buffer):pc.currentVAO&&(tb=Oa.getElements(pc.currentVAO.elements))&&W.bindBuffer(34963,tb.buffer.buffer);Wa=Fa.offset;for(k=0;k<c;++k){n=b[k];var ua,
td,Ab,Sa,Tb,cb,lc,Ob,ic,$b,Pb,sc,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,oa,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,Pg,Vd,$e,Xe,le,Gd,Ed,ed,Ic;ua=n.viewport;td=ua.x|0;Ab=ua.y|0;Sa="width"in ua?ua.width|0:ia.framebufferWidth-td;Tb="height"in ua?ua.height|0:ia.framebufferHeight-Ab;cb=ia.viewportWidth;
ia.viewportWidth=Sa;lc=ia.viewportHeight;ia.viewportHeight=Tb;W.viewport(td,Ab,Sa,Tb);l[0]=td;l[1]=Ab;l[2]=Sa;l[3]=Tb;Ob=n.viewport;ic=Ob.x|0;$b=Ob.y|0;Pb="width"in Ob?Ob.width|0:ia.framebufferWidth-ic;sc="height"in Ob?Ob.height|0:ia.framebufferHeight-$b;W.scissor(ic,$b,Pb,sc);fa[0]=ic;fa[1]=$b;fa[2]=Pb;fa[3]=sc;Qb=la.call(this,ia,n,k);Hb.offset=Qb;Ma=!1;nb=null;ub=0;hb=!1;qc=Pa=0;Rb=1;od=0;db=5126;jb=ec=Kc=nc=0;gb(Hb)?(Ma=!0,nb=w.createStream(34962,Hb),db=nb.dtype):(nb=w.getBuffer(Hb))?db=nb.dtype:
"constant"in Hb?(Rb=2,"number"===typeof Hb.constant?(Kc=Hb.constant,ec=jb=nc=0):(Kc=0<Hb.constant.length?Hb.constant[0]:0,ec=1<Hb.constant.length?Hb.constant[1]:0,jb=2<Hb.constant.length?Hb.constant[2]:0,nc=3<Hb.constant.length?Hb.constant[3]:0)):(nb=gb(Hb.buffer)?w.createStream(34962,Hb.buffer):w.getBuffer(Hb.buffer),db="type"in Hb?mc[Hb.type]:nb.dtype,hb=!!Hb.normalized,qc=Hb.size|0,Pa=Hb.offset|0,od=Hb.stride|0,ub=Hb.divisor|0);kb=K.location;qa=P[kb];if(1===Rb){qa.buffer||W.enableVertexAttribArray(kb);
ob=qc||2;if(qa.type!==db||qa.size!==ob||qa.buffer!==nb||qa.normalized!==hb||qa.offset!==Pa||qa.stride!==od)W.bindBuffer(34962,nb.buffer),W.vertexAttribPointer(kb,ob,db,hb,od,Pa),qa.type=db,qa.size=ob,qa.buffer=nb,qa.normalized=hb,qa.offset=Pa,qa.stride=od;qa.divisor!==ub&&(h.vertexAttribDivisorANGLE(kb,ub),qa.divisor=ub)}else if(qa.buffer&&(W.disableVertexAttribArray(kb),qa.buffer=null),qa.x!==Kc||qa.y!==ec||qa.z!==jb||qa.w!==nc)W.vertexAttrib4f(kb,Kc,ec,jb,nc),qa.x=Kc,qa.y=ec,qa.z=jb,qa.w=nc;va=
L.call(this,ia,n,k);yb.offset=va;Ua=!1;bb=null;Aa=0;eb=!1;Bb=Ja=0;zb=1;Ra=0;Mc=5126;xa=Sb=Za=Ib=0;gb(yb)?(Ua=!0,bb=w.createStream(34962,yb),Mc=bb.dtype):(bb=w.getBuffer(yb))?Mc=bb.dtype:"constant"in yb?(zb=2,"number"===typeof yb.constant?(Za=yb.constant,Sb=xa=Ib=0):(Za=0<yb.constant.length?yb.constant[0]:0,Sb=1<yb.constant.length?yb.constant[1]:0,xa=2<yb.constant.length?yb.constant[2]:0,Ib=3<yb.constant.length?yb.constant[3]:0)):(bb=gb(yb.buffer)?w.createStream(34962,yb.buffer):w.getBuffer(yb.buffer),
Mc="type"in yb?mc[yb.type]:bb.dtype,eb=!!yb.normalized,Bb=yb.size|0,Ja=yb.offset|0,Ra=yb.stride|0,Aa=yb.divisor|0);oa=N.location;Ka=P[oa];if(1===zb){Ka.buffer||W.enableVertexAttribArray(oa);Lb=Bb||2;if(Ka.type!==Mc||Ka.size!==Lb||Ka.buffer!==bb||Ka.normalized!==eb||Ka.offset!==Ja||Ka.stride!==Ra)W.bindBuffer(34962,bb.buffer),W.vertexAttribPointer(oa,Lb,Mc,eb,Ra,Ja),Ka.type=Mc,Ka.size=Lb,Ka.buffer=bb,Ka.normalized=eb,Ka.offset=Ja,Ka.stride=Ra;Ka.divisor!==Aa&&(h.vertexAttribDivisorANGLE(oa,Aa),Ka.divisor=
Aa)}else if(Ka.buffer&&(W.disableVertexAttribArray(oa),Ka.buffer=null),Ka.x!==Za||Ka.y!==Sb||Ka.z!==xa||Ka.w!==Ib)W.vertexAttrib4f(oa,Za,Sb,xa,Ib),Ka.x=Za,Ka.y=Sb,Ka.z=xa,Ka.w=Ib;fb=da.call(this,ia,n,k);p.offset=fb;ib=!1;ya=null;fc=0;Ea=!1;qb=pb=0;Xa=1;Ya=0;oc=5126;Yb=Va=vc=xc=0;gb(p)?(ib=!0,ya=w.createStream(34962,p),oc=ya.dtype):(ya=w.getBuffer(p))?oc=ya.dtype:"constant"in p?(Xa=2,"number"===typeof p.constant?(vc=p.constant,Va=Yb=xc=0):(vc=0<p.constant.length?p.constant[0]:0,Va=1<p.constant.length?
p.constant[1]:0,Yb=2<p.constant.length?p.constant[2]:0,xc=3<p.constant.length?p.constant[3]:0)):(ya=gb(p.buffer)?w.createStream(34962,p.buffer):w.getBuffer(p.buffer),oc="type"in p?mc[p.type]:ya.dtype,Ea=!!p.normalized,qb=p.size|0,pb=p.offset|0,Ya=p.stride|0,fc=p.divisor|0);Tc=ac.location;Ga=P[Tc];if(1===Xa){Ga.buffer||W.enableVertexAttribArray(Tc);zc=qb||4;if(Ga.type!==oc||Ga.size!==zc||Ga.buffer!==ya||Ga.normalized!==Ea||Ga.offset!==pb||Ga.stride!==Ya)W.bindBuffer(34962,ya.buffer),W.vertexAttribPointer(Tc,
zc,oc,Ea,Ya,pb),Ga.type=oc,Ga.size=zc,Ga.buffer=ya,Ga.normalized=Ea,Ga.offset=pb,Ga.stride=Ya;Ga.divisor!==fc&&(h.vertexAttribDivisorANGLE(Tc,fc),Ga.divisor=fc)}else if(Ga.buffer&&(W.disableVertexAttribArray(Tc),Ga.buffer=null),Ga.x!==vc||Ga.y!==Va||Ga.z!==Yb||Ga.w!==xc)W.vertexAttrib4f(Tc,vc,Va,Yb,xc),Ga.x=vc,Ga.y=Va,Ga.z=Yb,Ga.w=xc;Qa=a.call(this,ia,n,k);U.offset=Qa;Ba=!1;lb=null;vb=0;Cb=!1;wc=rb=0;wb=1;Jd=0;uc=5126;ud=id=Oc=Td=0;gb(U)?(Ba=!0,lb=w.createStream(34962,U),uc=lb.dtype):(lb=w.getBuffer(U))?
uc=lb.dtype:"constant"in U?(wb=2,"number"===typeof U.constant?(Oc=U.constant,id=ud=Td=0):(Oc=0<U.constant.length?U.constant[0]:0,id=1<U.constant.length?U.constant[1]:0,ud=2<U.constant.length?U.constant[2]:0,Td=3<U.constant.length?U.constant[3]:0)):(lb=gb(U.buffer)?w.createStream(34962,U.buffer):w.getBuffer(U.buffer),uc="type"in U?mc[U.type]:lb.dtype,Cb=!!U.normalized,wc=U.size|0,rb=U.offset|0,Jd=U.stride|0,vb=U.divisor|0);Ub=fd.location;cc=P[Ub];if(1===wb){cc.buffer||W.enableVertexAttribArray(Ub);
Mb=wc||4;if(cc.type!==uc||cc.size!==Mb||cc.buffer!==lb||cc.normalized!==Cb||cc.offset!==rb||cc.stride!==Jd)W.bindBuffer(34962,lb.buffer),W.vertexAttribPointer(Ub,Mb,uc,Cb,Jd,rb),cc.type=uc,cc.size=Mb,cc.buffer=lb,cc.normalized=Cb,cc.offset=rb,cc.stride=Jd;cc.divisor!==vb&&(h.vertexAttribDivisorANGLE(Ub,vb),cc.divisor=vb)}else if(cc.buffer&&(W.disableVertexAttribArray(Ub),cc.buffer=null),cc.x!==Oc||cc.y!==id||cc.z!==ud||cc.w!==Td)W.vertexAttrib4f(Ub,Oc,id,ud,Td),cc.x=Oc,cc.y=id,cc.z=ud,cc.w=Td;Ha=
e.call(this,ia,n,k);Zb=Ha[0];xb=Ha[1];Nb=Ha[2];jc=Ha[3];k&&mb===Zb&&Kb===xb&&gc===Nb&&Uc===jc||(mb=Zb,Kb=xb,gc=Nb,Uc=jc,W.uniform4f($a.location,Zb,xb,Nb,jc));Ec=n.lineWidth;k&&Fc===Ec||(Fc=Ec,W.uniform1f(Na.location,Ec));Hc=n.capSize;k&&Pc===Hc||(Pc=Hc,W.uniform1f(pa.location,Hc));cd=n.scale;Vc=cd[0];Jb=cd[1];k&&Qc===Vc&&Eb===Jb||(Qc=Vc,Eb=Jb,W.uniform2f(S.location,Vc,Jb));Rc=n.scaleFract;Lc=Rc[0];hc=Rc[1];k&&Wc===Lc&&Zc===hc||(Wc=Lc,Zc=hc,W.uniform2f(na.location,Lc,hc));jd=n.translate;vd=jd[0];$c=
jd[1];k&&oe===vd&&Pg===$c||(oe=vd,Pg=$c,W.uniform2f(O.location,vd,$c));Vd=n.translateFract;$e=Vd[0];le=Vd[1];k&&Xe===$e&&Gd===le||(Xe=$e,Gd=le,W.uniform2f(Wb.location,$e,le));Ed=n.opacity;k&&ed===Ed||(ed=Ed,W.uniform1f(Y.location,Ed));Ic=n.count;0<Ic?tb?h.drawElementsInstancedANGLE(4,36,tb.type,Wa<<(tb.type-5121>>1),Ic):h.drawArraysInstancedANGLE(4,Wa,36,Ic):0>Ic&&(tb?W.drawElements(4,36,tb.type,Wa<<(tb.type-5121>>1)):W.drawArrays(4,Wa,36));ia.viewportWidth=cb;ia.viewportHeight=lc;Ma&&w.destroyStream(nb);
Ua&&w.destroyStream(bb);ib&&w.destroyStream(ya);Ba&&w.destroyStream(lb)}ba.dirty=!0;pc.setVAO(null);g&&(V.cpuTime+=performance.now()-f)},draw:function(a){var c,e,d,g,f,h,k,m,n,q,r,G,z,L,I,R,F,M,Q,ka,ca,C,da,Ca,la,ta,Bc,yc,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,ic,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,sc,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,oa,Ka,Lb,fb,ib,ya,fc;c=Ia.next;c!==Ia.cur&&(c?W.bindFramebuffer(36160,c.framebuffer):W.bindFramebuffer(36160,
null),Ia.cur=c);if(ba.dirty){var Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb;Ea=ea.dither;Ea!==ba.dither&&(Ea?W.enable(3024):W.disable(3024),ba.dither=Ea);pb=ea.depth_func;pb!==ba.depth_func&&(W.depthFunc(pb),ba.depth_func=pb);qb=Sc[0];Xa=Sc[1];if(qb!==Yc[0]||Xa!==Yc[1])W.depthRange(qb,Xa),Yc[0]=qb,Yc[1]=Xa;Ya=ea.depth_mask;Ya!==ba.depth_mask&&(W.depthMask(Ya),ba.depth_mask=Ya);oc=Da[0];xc=Da[1];vc=Da[2];Va=Da[3];if(oc!==sb[0]||xc!==sb[1]||vc!==
sb[2]||Va!==sb[3])W.colorMask(oc,xc,vc,Va),sb[0]=oc,sb[1]=xc,sb[2]=vc,sb[3]=Va;Yb=ea.cull_enable;Yb!==ba.cull_enable&&(Yb?W.enable(2884):W.disable(2884),ba.cull_enable=Yb);Tc=ea.cull_face;Tc!==ba.cull_face&&(W.cullFace(Tc),ba.cull_face=Tc);Ga=ea.frontFace;Ga!==ba.frontFace&&(W.frontFace(Ga),ba.frontFace=Ga);zc=ea.lineWidth;zc!==ba.lineWidth&&(W.lineWidth(zc),ba.lineWidth=zc);Qa=ea.polygonOffset_enable;Qa!==ba.polygonOffset_enable&&(Qa?W.enable(32823):W.disable(32823),ba.polygonOffset_enable=Qa);Ba=
D[0];lb=D[1];if(Ba!==x[0]||lb!==x[1])W.polygonOffset(Ba,lb),x[0]=Ba,x[1]=lb;vb=ea.sample_alpha;vb!==ba.sample_alpha&&(vb?W.enable(32926):W.disable(32926),ba.sample_alpha=vb);Cb=ea.sample_enable;Cb!==ba.sample_enable&&(Cb?W.enable(32928):W.disable(32928),ba.sample_enable=Cb);rb=ha[0];wc=ha[1];if(rb!==sa[0]||wc!==sa[1])W.sampleCoverage(rb,wc),sa[0]=rb,sa[1]=wc;wb=ea.stencil_enable;wb!==ba.stencil_enable&&(wb?W.enable(2960):W.disable(2960),ba.stencil_enable=wb);Jd=ea.stencil_mask;Jd!==ba.stencil_mask&&
(W.stencilMask(Jd),ba.stencil_mask=Jd);uc=ma[0];Td=ma[1];Oc=ma[2];if(uc!==E[0]||Td!==E[1]||Oc!==E[2])W.stencilFunc(uc,Td,Oc),E[0]=uc,E[1]=Td,E[2]=Oc;id=T[0];ud=T[1];Ub=T[2];cc=T[3];if(id!==wa[0]||ud!==wa[1]||Ub!==wa[2]||cc!==wa[3])W.stencilOpSeparate(id,ud,Ub,cc),wa[0]=id,wa[1]=ud,wa[2]=Ub,wa[3]=cc;Mb=v[0];Ha=v[1];Zb=v[2];mb=v[3];if(Mb!==aa[0]||Ha!==aa[1]||Zb!==aa[2]||mb!==aa[3])W.stencilOpSeparate(Mb,Ha,Zb,mb),aa[0]=Mb,aa[1]=Ha,aa[2]=Zb,aa[3]=mb}e=a.viewport;d=e.x|0;g=e.y|0;f="width"in e?e.width|
0:ia.framebufferWidth-d;h="height"in e?e.height|0:ia.framebufferHeight-g;k=ia.viewportWidth;ia.viewportWidth=f;m=ia.viewportHeight;ia.viewportHeight=h;W.viewport(d,g,f,h);l[0]=d;l[1]=g;l[2]=f;l[3]=h;W.blendColor(0,0,0,0);wd[0]=0;wd[1]=0;wd[2]=0;wd[3]=0;W.enable(3042);ba.blend_enable=!0;W.blendEquationSeparate(32774,32774);Z[0]=32774;Z[1]=32774;W.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;W.disable(2929);ba.depth_enable=!1;n=a.viewport;q=n.x|0;r=n.y|0;G="width"in n?n.width|
0:ia.framebufferWidth-q;z="height"in n?n.height|0:ia.framebufferHeight-r;W.scissor(q,r,G,z);fa[0]=q;fa[1]=r;fa[2]=G;fa[3]=z;W.enable(3089);ba.scissor_enable=!0;if(L=ba.profile)I=performance.now(),V.count++;W.useProgram(y.program);R=dc.angle_instanced_arrays;pc.setVAO(null);F=b.call(this,ia,a,0);Hb.offset=F;M=!1;Q=null;ka=0;ca=!1;da=C=0;Ca=1;la=0;ta=5126;Nc=gd=yc=Bc=0;gb(Hb)?(M=!0,Q=w.createStream(34962,Hb),ta=Q.dtype):(Q=w.getBuffer(Hb))?ta=Q.dtype:"constant"in Hb?(Ca=2,"number"===typeof Hb.constant?
(yc=Hb.constant,gd=Nc=Bc=0):(yc=0<Hb.constant.length?Hb.constant[0]:0,gd=1<Hb.constant.length?Hb.constant[1]:0,Nc=2<Hb.constant.length?Hb.constant[2]:0,Bc=3<Hb.constant.length?Hb.constant[3]:0)):(Q=gb(Hb.buffer)?w.createStream(34962,Hb.buffer):w.getBuffer(Hb.buffer),ta="type"in Hb?mc[Hb.type]:Q.dtype,ca=!!Hb.normalized,da=Hb.size|0,C=Hb.offset|0,la=Hb.stride|0,ka=Hb.divisor|0);tc=K.location;ab=P[tc];if(1===Ca){ab.buffer||W.enableVertexAttribArray(tc);Cc=da||2;if(ab.type!==ta||ab.size!==Cc||ab.buffer!==
Q||ab.normalized!==ca||ab.offset!==C||ab.stride!==la)W.bindBuffer(34962,Q.buffer),W.vertexAttribPointer(tc,Cc,ta,ca,la,C),ab.type=ta,ab.size=Cc,ab.buffer=Q,ab.normalized=ca,ab.offset=C,ab.stride=la;ab.divisor!==ka&&(R.vertexAttribDivisorANGLE(tc,ka),ab.divisor=ka)}else if(ab.buffer&&(W.disableVertexAttribArray(tc),ab.buffer=null),ab.x!==yc||ab.y!==gd||ab.z!==Nc||ab.w!==Bc)W.vertexAttrib4f(tc,yc,gd,Nc,Bc),ab.x=yc,ab.y=gd,ab.z=Nc,ab.w=Bc;Db=t.call(this,ia,a,0);yb.offset=Db;rc=!1;Ta=null;kc=0;bc=!1;
ic=ad=0;nd=1;Dc=0;Xb=5126;tb=La=Gb=Jc=0;gb(yb)?(rc=!0,Ta=w.createStream(34962,yb),Xb=Ta.dtype):(Ta=w.getBuffer(yb))?Xb=Ta.dtype:"constant"in yb?(nd=2,"number"===typeof yb.constant?(Gb=yb.constant,La=tb=Jc=0):(Gb=0<yb.constant.length?yb.constant[0]:0,La=1<yb.constant.length?yb.constant[1]:0,tb=2<yb.constant.length?yb.constant[2]:0,Jc=3<yb.constant.length?yb.constant[3]:0)):(Ta=gb(yb.buffer)?w.createStream(34962,yb.buffer):w.getBuffer(yb.buffer),Xb="type"in yb?mc[yb.type]:Ta.dtype,bc=!!yb.normalized,
ic=yb.size|0,ad=yb.offset|0,Dc=yb.stride|0,kc=yb.divisor|0);Wa=N.location;ua=P[Wa];if(1===nd){ua.buffer||W.enableVertexAttribArray(Wa);td=ic||2;if(ua.type!==Xb||ua.size!==td||ua.buffer!==Ta||ua.normalized!==bc||ua.offset!==ad||ua.stride!==Dc)W.bindBuffer(34962,Ta.buffer),W.vertexAttribPointer(Wa,td,Xb,bc,Dc,ad),ua.type=Xb,ua.size=td,ua.buffer=Ta,ua.normalized=bc,ua.offset=ad,ua.stride=Dc;ua.divisor!==kc&&(R.vertexAttribDivisorANGLE(Wa,kc),ua.divisor=kc)}else if(ua.buffer&&(W.disableVertexAttribArray(Wa),
ua.buffer=null),ua.x!==Gb||ua.y!==La||ua.z!==tb||ua.w!==Jc)W.vertexAttrib4f(Wa,Gb,La,tb,Jc),ua.x=Gb,ua.y=La,ua.z=tb,ua.w=Jc;Ab=A.call(this,ia,a,0);p.offset=Ab;Sa=!1;Tb=null;cb=0;lc=!1;sc=Ob=0;$b=1;Pb=0;hd=5126;ub=nb=Ma=Qb=0;gb(p)?(Sa=!0,Tb=w.createStream(34962,p),hd=Tb.dtype):(Tb=w.getBuffer(p))?hd=Tb.dtype:"constant"in p?($b=2,"number"===typeof p.constant?(Ma=p.constant,nb=ub=Qb=0):(Ma=0<p.constant.length?p.constant[0]:0,nb=1<p.constant.length?p.constant[1]:0,ub=2<p.constant.length?p.constant[2]:
0,Qb=3<p.constant.length?p.constant[3]:0)):(Tb=gb(p.buffer)?w.createStream(34962,p.buffer):w.getBuffer(p.buffer),hd="type"in p?mc[p.type]:Tb.dtype,lc=!!p.normalized,sc=p.size|0,Ob=p.offset|0,Pb=p.stride|0,cb=p.divisor|0);hb=ac.location;Pa=P[hb];if(1===$b){Pa.buffer||W.enableVertexAttribArray(hb);qc=sc||4;if(Pa.type!==hd||Pa.size!==qc||Pa.buffer!==Tb||Pa.normalized!==lc||Pa.offset!==Ob||Pa.stride!==Pb)W.bindBuffer(34962,Tb.buffer),W.vertexAttribPointer(hb,qc,hd,lc,Pb,Ob),Pa.type=hd,Pa.size=qc,Pa.buffer=
Tb,Pa.normalized=lc,Pa.offset=Ob,Pa.stride=Pb;Pa.divisor!==cb&&(R.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(W.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==nb||Pa.z!==ub||Pa.w!==Qb)W.vertexAttrib4f(hb,Ma,nb,ub,Qb),Pa.x=Ma,Pa.y=nb,Pa.z=ub,Pa.w=Qb;Rb=za.call(this,ia,a,0);U.offset=Rb;od=!1;db=null;nc=0;Kc=!1;jb=ec=0;kb=1;qa=0;ob=5126;Aa=bb=Ua=va=0;gb(U)?(od=!0,db=w.createStream(34962,U),ob=db.dtype):(db=w.getBuffer(U))?ob=db.dtype:"constant"in U?(kb=2,"number"===
typeof U.constant?(Ua=U.constant,bb=Aa=va=0):(Ua=0<U.constant.length?U.constant[0]:0,bb=1<U.constant.length?U.constant[1]:0,Aa=2<U.constant.length?U.constant[2]:0,va=3<U.constant.length?U.constant[3]:0)):(db=gb(U.buffer)?w.createStream(34962,U.buffer):w.getBuffer(U.buffer),ob="type"in U?mc[U.type]:db.dtype,Kc=!!U.normalized,jb=U.size|0,ec=U.offset|0,qa=U.stride|0,nc=U.divisor|0);eb=fd.location;Ja=P[eb];if(1===kb){Ja.buffer||W.enableVertexAttribArray(eb);Bb=jb||4;if(Ja.type!==ob||Ja.size!==Bb||Ja.buffer!==
db||Ja.normalized!==Kc||Ja.offset!==ec||Ja.stride!==qa)W.bindBuffer(34962,db.buffer),W.vertexAttribPointer(eb,Bb,ob,Kc,qa,ec),Ja.type=ob,Ja.size=Bb,Ja.buffer=db,Ja.normalized=Kc,Ja.offset=ec,Ja.stride=qa;Ja.divisor!==nc&&(R.vertexAttribDivisorANGLE(eb,nc),Ja.divisor=nc)}else if(Ja.buffer&&(W.disableVertexAttribArray(eb),Ja.buffer=null),Ja.x!==Ua||Ja.y!==bb||Ja.z!==Aa||Ja.w!==va)W.vertexAttrib4f(eb,Ua,bb,Aa,va),Ja.x=Ua,Ja.y=bb,Ja.z=Aa,Ja.w=va;zb=Fb.location;Ra=P[zb];Ra.buffer||W.enableVertexAttribArray(zb);
if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==H||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)W.bindBuffer(34962,H.buffer),W.vertexAttribPointer(zb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=H,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(R.vertexAttribDivisorANGLE(zb,0),Ra.divisor=0);Mc=ra.location;Ib=P[Mc];Ib.buffer||W.enableVertexAttribArray(Mc);if(5126!==Ib.type||2!==Ib.size||Ib.buffer!==J||!1!==Ib.normalized||8!==Ib.offset||24!==Ib.stride)W.bindBuffer(34962,J.buffer),W.vertexAttribPointer(Mc,
2,5126,!1,24,8),Ib.type=5126,Ib.size=2,Ib.buffer=J,Ib.normalized=!1,Ib.offset=8,Ib.stride=24;0!==Ib.divisor&&(R.vertexAttribDivisorANGLE(Mc,0),Ib.divisor=0);Za=X.location;Sb=P[Za];Sb.buffer||W.enableVertexAttribArray(Za);if(5126!==Sb.type||2!==Sb.size||Sb.buffer!==u||!1!==Sb.normalized||16!==Sb.offset||24!==Sb.stride)W.bindBuffer(34962,u.buffer),W.vertexAttribPointer(Za,2,5126,!1,24,16),Sb.type=5126,Sb.size=2,Sb.buffer=u,Sb.normalized=!1,Sb.offset=16,Sb.stride=24;0!==Sb.divisor&&(R.vertexAttribDivisorANGLE(Za,
0),Sb.divisor=0);xa=B.call(this,ia,a,0);W.uniform4f($a.location,xa[0],xa[1],xa[2],xa[3]);W.uniform1f(Na.location,a.lineWidth);W.uniform1f(pa.location,a.capSize);oa=a.scale;W.uniform2f(S.location,oa[0],oa[1]);Ka=a.scaleFract;W.uniform2f(na.location,Ka[0],Ka[1]);Lb=a.translate;W.uniform2f(O.location,Lb[0],Lb[1]);fb=a.translateFract;W.uniform2f(Wb.location,fb[0],fb[1]);W.uniform1f(Y.location,a.opacity);(ib=Fa.elements)?W.bindBuffer(34963,ib.buffer.buffer):pc.currentVAO&&(ib=Oa.getElements(pc.currentVAO.elements))&&
W.bindBuffer(34963,ib.buffer.buffer);ya=Fa.offset;fc=a.count;0<fc?ib?R.drawElementsInstancedANGLE(4,36,ib.type,ya<<(ib.type-5121>>1),fc):R.drawArraysInstancedANGLE(4,ya,36,fc):0>fc&&(ib?W.drawElements(4,36,ib.type,ya<<(ib.type-5121>>1)):W.drawArrays(4,ya,36));ba.dirty=!0;pc.setVAO(null);ia.viewportWidth=k;ia.viewportHeight=m;L&&(V.cpuTime+=performance.now()-I);M&&w.destroyStream(Q);rc&&w.destroyStream(Ta);Sa&&w.destroyStream(Tb);od&&w.destroyStream(db)},scope:function(a,b,c){var e,d,f,l,m,v,q,x,t,
y,z,E,D,aa,L,Z,B,N,T,K,O,A,S,P,W,fa,ja,Y,ha,X,za,wa,sa,pc,da,ma,la,Da,ga,na,Xb,Jc,Gb,La,tb,Wa,ua,wd,Ab,Sa,ra,cb,pa,sb,Sc,$b,Pb,$a,Qb,Ma,nb,ub,hb,Pa,Na,Rb,Oa,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Wb,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Ia,uc,Yc,Oc,id,Fb,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,dc,Vd,ac,fd,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Vb,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,
Id,Kd,Ld,he,Ye,ve,ne,Ke,Le,He,qe,ye,Ce,De,Ee,ze,Hd;e=a.viewport;d=e.x|0;f=e.y|0;l="width"in e?e.width|0:ia.framebufferWidth-d;m="height"in e?e.height|0:ia.framebufferHeight-f;v=ia.viewportWidth;ia.viewportWidth=l;q=ia.viewportHeight;ia.viewportHeight=m;x=ka[0];ka[0]=d;t=ka[1];ka[1]=f;y=ka[2];ka[2]=l;z=ka[3];ka[3]=m;E=sc[0];sc[0]=0;D=sc[1];sc[1]=0;aa=sc[2];sc[2]=0;L=sc[3];sc[3]=0;Z=ea.blend_enable;ea.blend_enable=!0;B=yc[0];yc[0]=32774;N=yc[1];yc[1]=32774;T=G[0];G[0]=770;K=G[1];G[1]=771;O=G[2];G[2]=
773;A=G[3];G[3]=1;S=ea.depth_enable;ea.depth_enable=!1;P=a.viewport;W=P.x|0;fa=P.y|0;ja="width"in P?P.width|0:ia.framebufferWidth-W;Y="height"in P?P.height|0:ia.framebufferHeight-fa;ha=Q[0];Q[0]=W;X=Q[1];Q[1]=fa;za=Q[2];Q[2]=ja;wa=Q[3];Q[3]=Y;sa=ea.scissor_enable;ea.scissor_enable=!0;if(pc=ba.profile)da=performance.now(),V.count++;ma=Fa.count;Fa.count=36;la=a.count;Da=Fa.instances;Fa.instances=la;ga=Fa.primitive;Fa.primitive=4;na=a.capSize;Xb=ic[5];ic[5]=na;Jc=a.lineWidth;Gb=ic[4];ic[4]=Jc;La=a.opacity;
tb=ic[10];ic[10]=La;Wa=a.range;ua=ic[18];ic[18]=Wa;wd=a.scale;Ab=ic[6];ic[6]=wd;Sa=a.scaleFract;ra=ic[7];ic[7]=Sa;cb=a.translate;pa=ic[8];ic[8]=cb;sb=a.translateFract;Sc=ic[9];ic[9]=sb;$b=M.call(this,ia,a,c);Pb=ic[3];ic[3]=$b;$a=r.buffer;r.buffer=u;Qb=r.divisor;r.divisor=0;Ma=r.normalized;r.normalized=!1;nb=r.offset;r.offset=16;ub=r.size;r.size=0;hb=r.state;r.state=1;Pa=r.stride;r.stride=24;Na=r.type;r.type=5126;Rb=r.w;r.w=0;Oa=r.x;r.x=0;db=r.y;r.y=0;nc=r.z;r.z=0;Kc=I.call(this,ia,a,c);U.offset=Kc;
ec=!1;jb=null;kb=0;qa=!1;va=ob=0;Ua=1;bb=0;Aa=5126;zb=Bb=Ja=eb=0;gb(U)?(ec=!0,jb=w.createStream(34962,U),Aa=jb.dtype):(jb=w.getBuffer(U))?Aa=jb.dtype:"constant"in U?(Ua=2,"number"===typeof U.constant?(Ja=U.constant,Bb=zb=eb=0):(Ja=0<U.constant.length?U.constant[0]:0,Bb=1<U.constant.length?U.constant[1]:0,zb=2<U.constant.length?U.constant[2]:0,eb=3<U.constant.length?U.constant[3]:0)):(jb=gb(U.buffer)?w.createStream(34962,U.buffer):w.getBuffer(U.buffer),Aa="type"in U?mc[U.type]:jb.dtype,qa=!!U.normalized,
va=U.size|0,ob=U.offset|0,bb=U.stride|0,kb=U.divisor|0);Ra=C.buffer;C.buffer=jb;Mc=C.divisor;C.divisor=kb;Ib=C.normalized;C.normalized=qa;Za=C.offset;C.offset=ob;Sb=C.size;C.size=va;xa=C.state;C.state=Ua;Wb=C.stride;C.stride=bb;Ka=C.type;C.type=Aa;Lb=C.w;C.w=eb;fb=C.x;C.x=Ja;ib=C.y;C.y=Bb;ya=C.z;C.z=zb;fc=F.buffer;F.buffer=H;Ea=F.divisor;F.divisor=0;pb=F.normalized;F.normalized=!1;qb=F.offset;F.offset=0;Xa=F.size;F.size=0;Ya=F.state;F.state=1;oc=F.stride;F.stride=24;xc=F.type;F.type=5126;vc=F.w;F.w=
0;Va=F.x;F.x=0;Yb=F.y;F.y=0;Tc=F.z;F.z=0;Ga=Ca.call(this,ia,a,c);p.offset=Ga;zc=!1;Qa=null;Ba=0;lb=!1;Cb=vb=0;rb=1;wc=0;wb=5126;Oc=Yc=uc=Ia=0;gb(p)?(zc=!0,Qa=w.createStream(34962,p),wb=Qa.dtype):(Qa=w.getBuffer(p))?wb=Qa.dtype:"constant"in p?(rb=2,"number"===typeof p.constant?(uc=p.constant,Yc=Oc=Ia=0):(uc=0<p.constant.length?p.constant[0]:0,Yc=1<p.constant.length?p.constant[1]:0,Oc=2<p.constant.length?p.constant[2]:0,Ia=3<p.constant.length?p.constant[3]:0)):(Qa=gb(p.buffer)?w.createStream(34962,
p.buffer):w.getBuffer(p.buffer),wb="type"in p?mc[p.type]:Qa.dtype,lb=!!p.normalized,Cb=p.size|0,vb=p.offset|0,wc=p.stride|0,Ba=p.divisor|0);id=k.buffer;k.buffer=Qa;Fb=k.divisor;k.divisor=Ba;Ub=k.normalized;k.normalized=lb;cc=k.offset;k.offset=vb;Mb=k.size;k.size=Cb;Ha=k.state;k.state=rb;Zb=k.stride;k.stride=wc;mb=k.type;k.type=wb;xb=k.w;k.w=Ia;Kb=k.x;k.x=uc;Nb=k.y;k.y=Yc;gc=k.z;k.z=Oc;jc=h.buffer;h.buffer=J;Uc=h.divisor;h.divisor=0;Ec=h.normalized;h.normalized=!1;Fc=h.offset;h.offset=8;Hc=h.size;
h.size=0;Pc=h.state;h.state=1;cd=h.stride;h.stride=24;Vc=h.type;h.type=5126;Qc=h.w;h.w=0;Jb=h.x;h.x=0;Eb=h.y;h.y=0;Rc=h.z;h.z=0;Lc=g.call(this,ia,a,c);Hb.offset=Lc;Wc=!1;hc=null;Zc=0;jd=!1;oe=vd=0;$c=1;dc=0;Vd=5126;Gd=le=fd=ac=0;gb(Hb)?(Wc=!0,hc=w.createStream(34962,Hb),Vd=hc.dtype):(hc=w.getBuffer(Hb))?Vd=hc.dtype:"constant"in Hb?($c=2,"number"===typeof Hb.constant?(fd=Hb.constant,le=Gd=ac=0):(fd=0<Hb.constant.length?Hb.constant[0]:0,le=1<Hb.constant.length?Hb.constant[1]:0,Gd=2<Hb.constant.length?
Hb.constant[2]:0,ac=3<Hb.constant.length?Hb.constant[3]:0)):(hc=gb(Hb.buffer)?w.createStream(34962,Hb.buffer):w.getBuffer(Hb.buffer),Vd="type"in Hb?mc[Hb.type]:hc.dtype,jd=!!Hb.normalized,oe=Hb.size|0,vd=Hb.offset|0,dc=Hb.stride|0,Zc=Hb.divisor|0);Ed=n.buffer;n.buffer=hc;ed=n.divisor;n.divisor=Zc;Ic=n.normalized;n.normalized=jd;pd=n.offset;n.offset=vd;kd=n.size;n.size=oe;bd=n.state;n.state=$c;ld=n.stride;n.stride=dc;Bd=n.type;n.type=Vd;yd=n.w;n.w=ac;Vb=n.x;n.x=fd;me=n.y;n.y=le;te=n.z;n.z=Gd;ce=R.call(this,
ia,a,c);yb.offset=ce;be=!1;ae=null;ue=0;Yd=!1;Ac=ge=0;Xc=1;pe=0;ie=5126;Ld=Kd=Id=Fd=0;gb(yb)?(be=!0,ae=w.createStream(34962,yb),ie=ae.dtype):(ae=w.getBuffer(yb))?ie=ae.dtype:"constant"in yb?(Xc=2,"number"===typeof yb.constant?(Id=yb.constant,Kd=Ld=Fd=0):(Id=0<yb.constant.length?yb.constant[0]:0,Kd=1<yb.constant.length?yb.constant[1]:0,Ld=2<yb.constant.length?yb.constant[2]:0,Fd=3<yb.constant.length?yb.constant[3]:0)):(ae=gb(yb.buffer)?w.createStream(34962,yb.buffer):w.getBuffer(yb.buffer),ie="type"in
yb?mc[yb.type]:ae.dtype,Yd=!!yb.normalized,Ac=yb.size|0,ge=yb.offset|0,pe=yb.stride|0,ue=yb.divisor|0);he=ca.buffer;ca.buffer=ae;Ye=ca.divisor;ca.divisor=ue;ve=ca.normalized;ca.normalized=Yd;ne=ca.offset;ca.offset=ge;Ke=ca.size;ca.size=Ac;Le=ca.state;ca.state=Xc;He=ca.stride;ca.stride=pe;qe=ca.type;ca.type=ie;ye=ca.w;ca.w=Fd;Ce=ca.x;ca.x=Id;De=ca.y;ca.y=Kd;Ee=ca.z;ca.z=Ld;ze=ta.vert;ta.vert=2;Hd=ta.frag;ta.frag=1;ba.dirty=!0;b(ia,a,c);ia.viewportWidth=v;ia.viewportHeight=q;ka[0]=x;ka[1]=t;ka[2]=y;
ka[3]=z;sc[0]=E;sc[1]=D;sc[2]=aa;sc[3]=L;ea.blend_enable=Z;yc[0]=B;yc[1]=N;G[0]=T;G[1]=K;G[2]=O;G[3]=A;ea.depth_enable=S;Q[0]=ha;Q[1]=X;Q[2]=za;Q[3]=wa;ea.scissor_enable=sa;pc&&(V.cpuTime+=performance.now()-da);Fa.count=ma;Fa.instances=Da;Fa.primitive=ga;ic[5]=Xb;ic[4]=Gb;ic[10]=tb;ic[18]=ua;ic[6]=Ab;ic[7]=ra;ic[8]=pa;ic[9]=Sc;ic[3]=Pb;r.buffer=$a;r.divisor=Qb;r.normalized=Ma;r.offset=nb;r.size=ub;r.state=hb;r.stride=Pa;r.type=Na;r.w=Rb;r.x=Oa;r.y=db;r.z=nc;ec&&w.destroyStream(jb);C.buffer=Ra;C.divisor=
Mc;C.normalized=Ib;C.offset=Za;C.size=Sb;C.state=xa;C.stride=Wb;C.type=Ka;C.w=Lb;C.x=fb;C.y=ib;C.z=ya;F.buffer=fc;F.divisor=Ea;F.normalized=pb;F.offset=qb;F.size=Xa;F.state=Ya;F.stride=oc;F.type=xc;F.w=vc;F.x=Va;F.y=Yb;F.z=Tc;zc&&w.destroyStream(Qa);k.buffer=id;k.divisor=Fb;k.normalized=Ub;k.offset=cc;k.size=Mb;k.state=Ha;k.stride=Zb;k.type=mb;k.w=xb;k.x=Kb;k.y=Nb;k.z=gc;h.buffer=jc;h.divisor=Uc;h.normalized=Ec;h.offset=Fc;h.size=Hc;h.state=Pc;h.stride=cd;h.type=Vc;h.w=Qc;h.x=Jb;h.y=Eb;h.z=Rc;Wc&&
w.destroyStream(hc);n.buffer=Ed;n.divisor=ed;n.normalized=Ic;n.offset=pd;n.size=kd;n.state=bd;n.stride=ld;n.type=Bd;n.w=yd;n.x=Vb;n.y=me;n.z=te;be&&w.destroyStream(ae);ca.buffer=he;ca.divisor=Ye;ca.normalized=ve;ca.offset=ne;ca.size=Ke;ca.state=Le;ca.stride=He;ca.type=qe;ca.w=ye;ca.x=Ce;ca.y=De;ca.z=Ee;ta.vert=ze;ta.frag=Hd;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(d,
V,q,z,f,c,y,b,t,A,C,H,J,u,B,M,r,I,oa,F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,fd,Fb){var ac,ra,Na,Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta,ic,pc,sc,wd,yc,Z,G,ja,Da,sb,Sc,Yc,D,x,ha,sa,Q,fa,ma,E,v;ac=d.attributes;ra=d.buffer;Na=d.context;Y=d.current;K=d.draw;N=d.elements;S=d.extensions;na=d.framebuffer;O=d.gl;Wb=d.isBufferArgs;$a=d.next;P=d.shader;w=d.uniforms;ia=d.vao;ba=$a.blend_color;Fa=Y.blend_color;Oa=$a.blend_equation;dc=Y.blend_equation;Ia=$a.blend_func;W=Y.blend_func;gb=$a.colorMask;
ea=Y.colorMask;ta=$a.depth_range;ic=Y.depth_range;pc=$a.polygonOffset_offset;sc=Y.polygonOffset_offset;wd=$a.sample_coverage;yc=Y.sample_coverage;Z=$a.scissor_box;G=Y.scissor_box;ja=$a.stencil_func;Da=Y.stencil_func;sb=$a.stencil_opBack;Sc=Y.stencil_opBack;Yc=$a.stencil_opFront;D=Y.stencil_opFront;x=$a.viewport;ha=Y.viewport;sa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Q={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};ma={divisor:1,
offset:16,stride:8};E={divisor:1,offset:16,stride:8};v={divisor:1,offset:0,stride:4};return{batch:function(b,d){var q,r,l,w,x,p;q=na.next;q!==na.cur&&(q?O.bindFramebuffer(36160,q.framebuffer):O.bindFramebuffer(36160,null),na.cur=q);if(Y.dirty){var u,t,y,z,Z,B,H,C,J,A,M,P,ba,za,ga,Ze,Oa,cf,zd,Be,Rd,Sd,ke,Se,rd,md,Cd,qd,dd,Bc,sd,gd;u=$a.dither;u!==Y.dither&&(u?O.enable(3024):O.disable(3024),Y.dither=u);t=$a.depth_func;t!==Y.depth_func&&(O.depthFunc(t),Y.depth_func=t);y=ta[0];z=ta[1];if(y!==ic[0]||z!==
ic[1])O.depthRange(y,z),ic[0]=y,ic[1]=z;Z=$a.depth_mask;Z!==Y.depth_mask&&(O.depthMask(Z),Y.depth_mask=Z);B=gb[0];H=gb[1];C=gb[2];J=gb[3];if(B!==ea[0]||H!==ea[1]||C!==ea[2]||J!==ea[3])O.colorMask(B,H,C,J),ea[0]=B,ea[1]=H,ea[2]=C,ea[3]=J;A=$a.cull_enable;A!==Y.cull_enable&&(A?O.enable(2884):O.disable(2884),Y.cull_enable=A);M=$a.cull_face;M!==Y.cull_face&&(O.cullFace(M),Y.cull_face=M);P=$a.frontFace;P!==Y.frontFace&&(O.frontFace(P),Y.frontFace=P);ba=$a.lineWidth;ba!==Y.lineWidth&&(O.lineWidth(ba),Y.lineWidth=
ba);za=$a.polygonOffset_enable;za!==Y.polygonOffset_enable&&(za?O.enable(32823):O.disable(32823),Y.polygonOffset_enable=za);ga=pc[0];Ze=pc[1];if(ga!==sc[0]||Ze!==sc[1])O.polygonOffset(ga,Ze),sc[0]=ga,sc[1]=Ze;Oa=$a.sample_alpha;Oa!==Y.sample_alpha&&(Oa?O.enable(32926):O.disable(32926),Y.sample_alpha=Oa);cf=$a.sample_enable;cf!==Y.sample_enable&&(cf?O.enable(32928):O.disable(32928),Y.sample_enable=cf);zd=wd[0];Be=wd[1];if(zd!==yc[0]||Be!==yc[1])O.sampleCoverage(zd,Be),yc[0]=zd,yc[1]=Be;Rd=$a.stencil_mask;
Rd!==Y.stencil_mask&&(O.stencilMask(Rd),Y.stencil_mask=Rd);Sd=ja[0];ke=ja[1];Se=ja[2];if(Sd!==Da[0]||ke!==Da[1]||Se!==Da[2])O.stencilFunc(Sd,ke,Se),Da[0]=Sd,Da[1]=ke,Da[2]=Se;rd=Yc[0];md=Yc[1];Cd=Yc[2];qd=Yc[3];if(rd!==D[0]||md!==D[1]||Cd!==D[2]||qd!==D[3])O.stencilOpSeparate(rd,md,Cd,qd),D[0]=rd,D[1]=md,D[2]=Cd,D[3]=qd;dd=sb[0];Bc=sb[1];sd=sb[2];gd=sb[3];if(dd!==Sc[0]||Bc!==Sc[1]||sd!==Sc[2]||gd!==Sc[3])O.stencilOpSeparate(dd,Bc,sd,gd),Sc[0]=dd,Sc[1]=Bc,Sc[2]=sd,Sc[3]=gd}O.blendColor(0,0,0,0);Fa[0]=
0;Fa[1]=0;Fa[2]=0;Fa[3]=0;O.enable(3042);Y.blend_enable=!0;O.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;O.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;O.enable(3089);Y.scissor_enable=!0;O.disable(2960);Y.stencil_enable=!1;if(r=Y.profile)l=performance.now(),V.count+=d;O.useProgram(I.program);w=S.angle_instanced_arrays;var Nc,tc,ab,Cc,Db;ia.setVAO(null);Nc=la.location;tc=ac[Nc];tc.buffer||O.enableVertexAttribArray(Nc);if(5126!==tc.type||1!==tc.size||tc.buffer!==
f||!1!==tc.normalized||0!==tc.offset||8!==tc.stride)O.bindBuffer(34962,f.buffer),O.vertexAttribPointer(Nc,1,5126,!1,8,0),tc.type=5126,tc.size=1,tc.buffer=f,tc.normalized=!1,tc.offset=0,tc.stride=8;0!==tc.divisor&&(w.vertexAttribDivisorANGLE(Nc,0),tc.divisor=0);ab=L.location;Cc=ac[ab];Cc.buffer||O.enableVertexAttribArray(ab);if(5126!==Cc.type||1!==Cc.size||Cc.buffer!==c||!1!==Cc.normalized||4!==Cc.offset||8!==Cc.stride)O.bindBuffer(34962,c.buffer),O.vertexAttribPointer(ab,1,5126,!1,8,4),Cc.type=5126,
Cc.size=1,Cc.buffer=c,Cc.normalized=!1,Cc.offset=4,Cc.stride=8;0!==Cc.divisor&&(w.vertexAttribDivisorANGLE(ab,0),Cc.divisor=0);(Db=K.elements)?O.bindBuffer(34963,Db.buffer.buffer):ia.currentVAO&&(Db=N.getElements(ia.currentVAO.elements))&&O.bindBuffer(34963,Db.buffer.buffer);for(x=0;x<d;++x){p=b[x];var rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,Ia,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Ve,Ka,Lb,fb,ib,ya,fc,Ea,pb,
qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,Vb,Vd,$e,Xe,le,Gd,Ed,ed,Ic,pd,kd,bd;rc=p.viewport;Ta=rc.x|0;kc=rc.y|0;bc="width"in rc?rc.width|0:Na.framebufferWidth-Ta;ad="height"in rc?rc.height|0:Na.framebufferHeight-kc;Dd=Na.viewportWidth;Na.viewportWidth=bc;nd=Na.viewportHeight;Na.viewportHeight=ad;O.viewport(Ta,kc,bc,ad);ha[0]=Ta;ha[1]=kc;ha[2]=bc;ha[3]=ad;(Dc=oa.call(this,Na,p,
x))?O.enable(2929):O.disable(2929);Y.depth_enable=Dc;Xb=p.viewport;Jc=Xb.x|0;Gb=Xb.y|0;La="width"in Xb?Xb.width|0:Na.framebufferWidth-Jc;tb="height"in Xb?Xb.height|0:Na.framebufferHeight-Gb;O.scissor(Jc,Gb,La,tb);G[0]=Jc;G[1]=Gb;G[2]=La;G[3]=tb;Q.buffer=p.positionBuffer;Wa=!1;ua=null;td=0;Ab=!1;Tb=Sa=0;cb=1;lc=0;Ob=5126;hd=Pb=$b=Ia=0;Wb(Q)?(Wa=!0,ua=ra.createStream(34962,Q),Ob=ua.dtype):(ua=ra.getBuffer(Q))?Ob=ua.dtype:"constant"in Q?(cb=2,"number"===typeof Q.constant?($b=Q.constant,Pb=hd=Ia=0):($b=
0<Q.constant.length?Q.constant[0]:0,Pb=1<Q.constant.length?Q.constant[1]:0,hd=2<Q.constant.length?Q.constant[2]:0,Ia=3<Q.constant.length?Q.constant[3]:0)):(ua=Wb(Q.buffer)?ra.createStream(34962,Q.buffer):ra.getBuffer(Q.buffer),Ob="type"in Q?sa[Q.type]:ua.dtype,Ab=!!Q.normalized,Tb=Q.size|0,Sa=Q.offset|0,lc=Q.stride|0,td=Q.divisor|0);Qb=Ca.location;Ma=ac[Qb];if(1===cb){Ma.buffer||O.enableVertexAttribArray(Qb);nb=Tb||2;if(Ma.type!==Ob||Ma.size!==nb||Ma.buffer!==ua||Ma.normalized!==Ab||Ma.offset!==Sa||
Ma.stride!==lc)O.bindBuffer(34962,ua.buffer),O.vertexAttribPointer(Qb,nb,Ob,Ab,lc,Sa),Ma.type=Ob,Ma.size=nb,Ma.buffer=ua,Ma.normalized=Ab,Ma.offset=Sa,Ma.stride=lc;Ma.divisor!==td&&(w.vertexAttribDivisorANGLE(Qb,td),Ma.divisor=td)}else if(Ma.buffer&&(O.disableVertexAttribArray(Qb),Ma.buffer=null),Ma.x!==$b||Ma.y!==Pb||Ma.z!==hd||Ma.w!==Ia)O.vertexAttrib4f(Qb,$b,Pb,hd,Ia),Ma.x=$b,Ma.y=Pb,Ma.z=hd,Ma.w=Ia;ma.buffer=p.positionBuffer;ub=!1;hb=null;Pa=0;qc=!1;od=Rb=0;db=1;nc=0;Kc=5126;qa=kb=jb=ec=0;Wb(ma)?
(ub=!0,hb=ra.createStream(34962,ma),Kc=hb.dtype):(hb=ra.getBuffer(ma))?Kc=hb.dtype:"constant"in ma?(db=2,"number"===typeof ma.constant?(jb=ma.constant,kb=qa=ec=0):(jb=0<ma.constant.length?ma.constant[0]:0,kb=1<ma.constant.length?ma.constant[1]:0,qa=2<ma.constant.length?ma.constant[2]:0,ec=3<ma.constant.length?ma.constant[3]:0)):(hb=Wb(ma.buffer)?ra.createStream(34962,ma.buffer):ra.getBuffer(ma.buffer),Kc="type"in ma?sa[ma.type]:hb.dtype,qc=!!ma.normalized,od=ma.size|0,Rb=ma.offset|0,nc=ma.stride|
0,Pa=ma.divisor|0);ob=h.location;va=ac[ob];if(1===db){va.buffer||O.enableVertexAttribArray(ob);Ua=od||2;if(va.type!==Kc||va.size!==Ua||va.buffer!==hb||va.normalized!==qc||va.offset!==Rb||va.stride!==nc)O.bindBuffer(34962,hb.buffer),O.vertexAttribPointer(ob,Ua,Kc,qc,nc,Rb),va.type=Kc,va.size=Ua,va.buffer=hb,va.normalized=qc,va.offset=Rb,va.stride=nc;va.divisor!==Pa&&(w.vertexAttribDivisorANGLE(ob,Pa),va.divisor=Pa)}else if(va.buffer&&(O.disableVertexAttribArray(ob),va.buffer=null),va.x!==jb||va.y!==
kb||va.z!==qa||va.w!==ec)O.vertexAttrib4f(ob,jb,kb,qa,ec),va.x=jb,va.y=kb,va.z=qa,va.w=ec;fa.buffer=p.positionFractBuffer;bb=!1;Aa=null;eb=0;Ja=!1;zb=Bb=0;Ra=1;Mc=0;Ib=5126;Ve=xa=Sb=Za=0;Wb(fa)?(bb=!0,Aa=ra.createStream(34962,fa),Ib=Aa.dtype):(Aa=ra.getBuffer(fa))?Ib=Aa.dtype:"constant"in fa?(Ra=2,"number"===typeof fa.constant?(Sb=fa.constant,xa=Ve=Za=0):(Sb=0<fa.constant.length?fa.constant[0]:0,xa=1<fa.constant.length?fa.constant[1]:0,Ve=2<fa.constant.length?fa.constant[2]:0,Za=3<fa.constant.length?
fa.constant[3]:0)):(Aa=Wb(fa.buffer)?ra.createStream(34962,fa.buffer):ra.getBuffer(fa.buffer),Ib="type"in fa?sa[fa.type]:Aa.dtype,Ja=!!fa.normalized,zb=fa.size|0,Bb=fa.offset|0,Mc=fa.stride|0,eb=fa.divisor|0);Ka=k.location;Lb=ac[Ka];if(1===Ra){Lb.buffer||O.enableVertexAttribArray(Ka);fb=zb||2;if(Lb.type!==Ib||Lb.size!==fb||Lb.buffer!==Aa||Lb.normalized!==Ja||Lb.offset!==Bb||Lb.stride!==Mc)O.bindBuffer(34962,Aa.buffer),O.vertexAttribPointer(Ka,fb,Ib,Ja,Mc,Bb),Lb.type=Ib,Lb.size=fb,Lb.buffer=Aa,Lb.normalized=
Ja,Lb.offset=Bb,Lb.stride=Mc;Lb.divisor!==eb&&(w.vertexAttribDivisorANGLE(Ka,eb),Lb.divisor=eb)}else if(Lb.buffer&&(O.disableVertexAttribArray(Ka),Lb.buffer=null),Lb.x!==Sb||Lb.y!==xa||Lb.z!==Ve||Lb.w!==Za)O.vertexAttrib4f(Ka,Sb,xa,Ve,Za),Lb.x=Sb,Lb.y=xa,Lb.z=Ve,Lb.w=Za;E.buffer=p.positionFractBuffer;ib=!1;ya=null;fc=0;Ea=!1;qb=pb=0;Xa=1;Ya=0;oc=5126;Yb=Va=vc=xc=0;Wb(E)?(ib=!0,ya=ra.createStream(34962,E),oc=ya.dtype):(ya=ra.getBuffer(E))?oc=ya.dtype:"constant"in E?(Xa=2,"number"===typeof E.constant?
(vc=E.constant,Va=Yb=xc=0):(vc=0<E.constant.length?E.constant[0]:0,Va=1<E.constant.length?E.constant[1]:0,Yb=2<E.constant.length?E.constant[2]:0,xc=3<E.constant.length?E.constant[3]:0)):(ya=Wb(E.buffer)?ra.createStream(34962,E.buffer):ra.getBuffer(E.buffer),oc="type"in E?sa[E.type]:ya.dtype,Ea=!!E.normalized,qb=E.size|0,pb=E.offset|0,Ya=E.stride|0,fc=E.divisor|0);Tc=g.location;Ga=ac[Tc];if(1===Xa){Ga.buffer||O.enableVertexAttribArray(Tc);zc=qb||2;if(Ga.type!==oc||Ga.size!==zc||Ga.buffer!==ya||Ga.normalized!==
Ea||Ga.offset!==pb||Ga.stride!==Ya)O.bindBuffer(34962,ya.buffer),O.vertexAttribPointer(Tc,zc,oc,Ea,Ya,pb),Ga.type=oc,Ga.size=zc,Ga.buffer=ya,Ga.normalized=Ea,Ga.offset=pb,Ga.stride=Ya;Ga.divisor!==fc&&(w.vertexAttribDivisorANGLE(Tc,fc),Ga.divisor=fc)}else if(Ga.buffer&&(O.disableVertexAttribArray(Tc),Ga.buffer=null),Ga.x!==vc||Ga.y!==Va||Ga.z!==Yb||Ga.w!==xc)O.vertexAttrib4f(Tc,vc,Va,Yb,xc),Ga.x=vc,Ga.y=Va,Ga.z=Yb,Ga.w=xc;v.buffer=p.colorBuffer;Qa=!1;Ba=null;lb=0;vb=!1;rb=Cb=0;wc=1;wb=0;Jd=5126;id=
Oc=Td=uc=0;Wb(v)?(Qa=!0,Ba=ra.createStream(34962,v),Jd=Ba.dtype):(Ba=ra.getBuffer(v))?Jd=Ba.dtype:"constant"in v?(wc=2,"number"===typeof v.constant?(Td=v.constant,Oc=id=uc=0):(Td=0<v.constant.length?v.constant[0]:0,Oc=1<v.constant.length?v.constant[1]:0,id=2<v.constant.length?v.constant[2]:0,uc=3<v.constant.length?v.constant[3]:0)):(Ba=Wb(v.buffer)?ra.createStream(34962,v.buffer):ra.getBuffer(v.buffer),Jd="type"in v?sa[v.type]:Ba.dtype,vb=!!v.normalized,rb=v.size|0,Cb=v.offset|0,wb=v.stride|0,lb=
v.divisor|0);ud=n.location;Ub=ac[ud];if(1===wc){Ub.buffer||O.enableVertexAttribArray(ud);cc=rb||4;if(Ub.type!==Jd||Ub.size!==cc||Ub.buffer!==Ba||Ub.normalized!==vb||Ub.offset!==Cb||Ub.stride!==wb)O.bindBuffer(34962,Ba.buffer),O.vertexAttribPointer(ud,cc,Jd,vb,wb,Cb),Ub.type=Jd,Ub.size=cc,Ub.buffer=Ba,Ub.normalized=vb,Ub.offset=Cb,Ub.stride=wb;Ub.divisor!==lb&&(w.vertexAttribDivisorANGLE(ud,lb),Ub.divisor=lb)}else if(Ub.buffer&&(O.disableVertexAttribArray(ud),Ub.buffer=null),Ub.x!==Td||Ub.y!==Oc||
Ub.z!==id||Ub.w!==uc)O.vertexAttrib4f(ud,Td,Oc,id,uc),Ub.x=Td,Ub.y=Oc,Ub.z=id,Ub.w=uc;Mb=p.scale;Ha=Mb[0];mb=Mb[1];x&&Zb===Ha&&xb===mb||(Zb=Ha,xb=mb,O.uniform2f(a.location,Ha,mb));Kb=p.scaleFract;Nb=Kb[0];jc=Kb[1];x&&gc===Nb&&Uc===jc||(gc=Nb,Uc=jc,O.uniform2f(e.location,Nb,jc));Ec=p.translate;Fc=Ec[0];Pc=Ec[1];x&&Hc===Fc&&cd===Pc||(Hc=Fc,cd=Pc,O.uniform2f(pa.location,Fc,Pc));Vc=p.translateFract;Qc=Vc[0];Eb=Vc[1];x&&Jb===Qc&&Rc===Eb||(Jb=Qc,Rc=Eb,O.uniform2f(fd.location,Qc,Eb));Lc=p.thickness;x&&Wc===
Lc||(Wc=Lc,O.uniform1f(X.location,Lc));hc=p.depth;x&&Zc===hc||(Zc=hc,O.uniform1f(m.location,hc));jd=F.call(this,Na,p,x);vd=jd[0];$c=jd[1];Vd=jd[2];Xe=jd[3];x&&oe===vd&&Vb===$c&&$e===Vd&&le===Xe||(oe=vd,Vb=$c,$e=Vd,le=Xe,O.uniform4f(Fb.location,vd,$c,Vd,Xe));Gd=p.dashLength;x&&Ed===Gd||(Ed=Gd,O.uniform1f(R.location,Gd));ed=p.opacity;x&&Ic===ed||(Ic=ed,O.uniform1f(da.location,ed));(pd=p.dashTexture)&&"framebuffer"===pd._reglType&&(pd=pd.color[0]);kd=pd._texture;O.uniform1i(ca.location,kd.bind());bd=
p.count;0<bd?Db?w.drawElementsInstancedANGLE(5,4,Db.type,0<<(Db.type-5121>>1),bd):w.drawArraysInstancedANGLE(5,0,4,bd):0>bd&&(Db?O.drawElements(5,4,Db.type,0<<(Db.type-5121>>1)):O.drawArrays(5,0,4));Na.viewportWidth=Dd;Na.viewportHeight=nd;Wa&&ra.destroyStream(ua);ub&&ra.destroyStream(hb);bb&&ra.destroyStream(Aa);ib&&ra.destroyStream(ya);Qa&&ra.destroyStream(Ba);kd.unbind()}Y.dirty=!0;ia.setVAO(null);r&&(V.cpuTime+=performance.now()-l)},draw:function(b){var d,r,x,l,w,u,p,t,Z,B,H,I,C,J,A,M,P,F,ba,
za,ga,ee,Ze,Oa,Ia,zd,Be,Rd,Sd,ke,oa,rd,md,Cd,qd,dd,Bc,sd,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Ve,Ka,Lb,fb,ib,ya,fc,Ea,pb;d=na.next;d!==na.cur&&(d?O.bindFramebuffer(36160,d.framebuffer):O.bindFramebuffer(36160,null),na.cur=d);if(Y.dirty){var qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb;qb=$a.dither;
qb!==Y.dither&&(qb?O.enable(3024):O.disable(3024),Y.dither=qb);Xa=$a.depth_func;Xa!==Y.depth_func&&(O.depthFunc(Xa),Y.depth_func=Xa);Ya=ta[0];oc=ta[1];if(Ya!==ic[0]||oc!==ic[1])O.depthRange(Ya,oc),ic[0]=Ya,ic[1]=oc;xc=$a.depth_mask;xc!==Y.depth_mask&&(O.depthMask(xc),Y.depth_mask=xc);vc=gb[0];Va=gb[1];Yb=gb[2];Tc=gb[3];if(vc!==ea[0]||Va!==ea[1]||Yb!==ea[2]||Tc!==ea[3])O.colorMask(vc,Va,Yb,Tc),ea[0]=vc,ea[1]=Va,ea[2]=Yb,ea[3]=Tc;Ga=$a.cull_enable;Ga!==Y.cull_enable&&(Ga?O.enable(2884):O.disable(2884),
Y.cull_enable=Ga);zc=$a.cull_face;zc!==Y.cull_face&&(O.cullFace(zc),Y.cull_face=zc);Qa=$a.frontFace;Qa!==Y.frontFace&&(O.frontFace(Qa),Y.frontFace=Qa);Ba=$a.lineWidth;Ba!==Y.lineWidth&&(O.lineWidth(Ba),Y.lineWidth=Ba);lb=$a.polygonOffset_enable;lb!==Y.polygonOffset_enable&&(lb?O.enable(32823):O.disable(32823),Y.polygonOffset_enable=lb);vb=pc[0];Cb=pc[1];if(vb!==sc[0]||Cb!==sc[1])O.polygonOffset(vb,Cb),sc[0]=vb,sc[1]=Cb;rb=$a.sample_alpha;rb!==Y.sample_alpha&&(rb?O.enable(32926):O.disable(32926),Y.sample_alpha=
rb);wc=$a.sample_enable;wc!==Y.sample_enable&&(wc?O.enable(32928):O.disable(32928),Y.sample_enable=wc);wb=wd[0];Jd=wd[1];if(wb!==yc[0]||Jd!==yc[1])O.sampleCoverage(wb,Jd),yc[0]=wb,yc[1]=Jd;uc=$a.stencil_mask;uc!==Y.stencil_mask&&(O.stencilMask(uc),Y.stencil_mask=uc);Td=ja[0];Oc=ja[1];id=ja[2];if(Td!==Da[0]||Oc!==Da[1]||id!==Da[2])O.stencilFunc(Td,Oc,id),Da[0]=Td,Da[1]=Oc,Da[2]=id;ud=Yc[0];Ub=Yc[1];cc=Yc[2];Mb=Yc[3];if(ud!==D[0]||Ub!==D[1]||cc!==D[2]||Mb!==D[3])O.stencilOpSeparate(ud,Ub,cc,Mb),D[0]=
ud,D[1]=Ub,D[2]=cc,D[3]=Mb;Ha=sb[0];Zb=sb[1];mb=sb[2];xb=sb[3];if(Ha!==Sc[0]||Zb!==Sc[1]||mb!==Sc[2]||xb!==Sc[3])O.stencilOpSeparate(Ha,Zb,mb,xb),Sc[0]=Ha,Sc[1]=Zb,Sc[2]=mb,Sc[3]=xb}r=b.viewport;x=r.x|0;l=r.y|0;w="width"in r?r.width|0:Na.framebufferWidth-x;u="height"in r?r.height|0:Na.framebufferHeight-l;p=Na.viewportWidth;Na.viewportWidth=w;t=Na.viewportHeight;Na.viewportHeight=u;O.viewport(x,l,w,u);ha[0]=x;ha[1]=l;ha[2]=w;ha[3]=u;O.blendColor(0,0,0,0);Fa[0]=0;Fa[1]=0;Fa[2]=0;Fa[3]=0;O.enable(3042);
Y.blend_enable=!0;O.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;O.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;(Z=q.call(this,Na,b,0))?O.enable(2929):O.disable(2929);Y.depth_enable=Z;B=b.viewport;H=B.x|0;I=B.y|0;C="width"in B?B.width|0:Na.framebufferWidth-H;J="height"in B?B.height|0:Na.framebufferHeight-I;O.scissor(H,I,C,J);G[0]=H;G[1]=I;G[2]=C;G[3]=J;O.enable(3089);Y.scissor_enable=!0;O.disable(2960);Y.stencil_enable=!1;if(A=Y.profile)M=performance.now(),V.count++;
O.useProgram(z.program);P=S.angle_instanced_arrays;ia.setVAO(null);Q.buffer=b.positionBuffer;F=!1;ba=null;za=0;ga=!1;Ze=ee=0;Oa=1;Ia=0;zd=5126;ke=Sd=Rd=Be=0;Wb(Q)?(F=!0,ba=ra.createStream(34962,Q),zd=ba.dtype):(ba=ra.getBuffer(Q))?zd=ba.dtype:"constant"in Q?(Oa=2,"number"===typeof Q.constant?(Rd=Q.constant,Sd=ke=Be=0):(Rd=0<Q.constant.length?Q.constant[0]:0,Sd=1<Q.constant.length?Q.constant[1]:0,ke=2<Q.constant.length?Q.constant[2]:0,Be=3<Q.constant.length?Q.constant[3]:0)):(ba=Wb(Q.buffer)?ra.createStream(34962,
Q.buffer):ra.getBuffer(Q.buffer),zd="type"in Q?sa[Q.type]:ba.dtype,ga=!!Q.normalized,Ze=Q.size|0,ee=Q.offset|0,Ia=Q.stride|0,za=Q.divisor|0);oa=Ca.location;rd=ac[oa];if(1===Oa){rd.buffer||O.enableVertexAttribArray(oa);md=Ze||2;if(rd.type!==zd||rd.size!==md||rd.buffer!==ba||rd.normalized!==ga||rd.offset!==ee||rd.stride!==Ia)O.bindBuffer(34962,ba.buffer),O.vertexAttribPointer(oa,md,zd,ga,Ia,ee),rd.type=zd,rd.size=md,rd.buffer=ba,rd.normalized=ga,rd.offset=ee,rd.stride=Ia;rd.divisor!==za&&(P.vertexAttribDivisorANGLE(oa,
za),rd.divisor=za)}else if(rd.buffer&&(O.disableVertexAttribArray(oa),rd.buffer=null),rd.x!==Rd||rd.y!==Sd||rd.z!==ke||rd.w!==Be)O.vertexAttrib4f(oa,Rd,Sd,ke,Be),rd.x=Rd,rd.y=Sd,rd.z=ke,rd.w=Be;ma.buffer=b.positionBuffer;Cd=!1;qd=null;dd=0;Bc=!1;gd=sd=0;Nc=1;tc=0;ab=5126;Ta=rc=Db=Cc=0;Wb(ma)?(Cd=!0,qd=ra.createStream(34962,ma),ab=qd.dtype):(qd=ra.getBuffer(ma))?ab=qd.dtype:"constant"in ma?(Nc=2,"number"===typeof ma.constant?(Db=ma.constant,rc=Ta=Cc=0):(Db=0<ma.constant.length?ma.constant[0]:0,rc=
1<ma.constant.length?ma.constant[1]:0,Ta=2<ma.constant.length?ma.constant[2]:0,Cc=3<ma.constant.length?ma.constant[3]:0)):(qd=Wb(ma.buffer)?ra.createStream(34962,ma.buffer):ra.getBuffer(ma.buffer),ab="type"in ma?sa[ma.type]:qd.dtype,Bc=!!ma.normalized,gd=ma.size|0,sd=ma.offset|0,tc=ma.stride|0,dd=ma.divisor|0);kc=h.location;bc=ac[kc];if(1===Nc){bc.buffer||O.enableVertexAttribArray(kc);ad=gd||2;if(bc.type!==ab||bc.size!==ad||bc.buffer!==qd||bc.normalized!==Bc||bc.offset!==sd||bc.stride!==tc)O.bindBuffer(34962,
qd.buffer),O.vertexAttribPointer(kc,ad,ab,Bc,tc,sd),bc.type=ab,bc.size=ad,bc.buffer=qd,bc.normalized=Bc,bc.offset=sd,bc.stride=tc;bc.divisor!==dd&&(P.vertexAttribDivisorANGLE(kc,dd),bc.divisor=dd)}else if(bc.buffer&&(O.disableVertexAttribArray(kc),bc.buffer=null),bc.x!==Db||bc.y!==rc||bc.z!==Ta||bc.w!==Cc)O.vertexAttrib4f(kc,Db,rc,Ta,Cc),bc.x=Db,bc.y=rc,bc.z=Ta,bc.w=Cc;fa.buffer=b.positionFractBuffer;Dd=!1;nd=null;Dc=0;Xb=!1;Gb=Jc=0;La=1;tb=0;Wa=5126;Sa=Ab=td=ua=0;Wb(fa)?(Dd=!0,nd=ra.createStream(34962,
fa),Wa=nd.dtype):(nd=ra.getBuffer(fa))?Wa=nd.dtype:"constant"in fa?(La=2,"number"===typeof fa.constant?(td=fa.constant,Ab=Sa=ua=0):(td=0<fa.constant.length?fa.constant[0]:0,Ab=1<fa.constant.length?fa.constant[1]:0,Sa=2<fa.constant.length?fa.constant[2]:0,ua=3<fa.constant.length?fa.constant[3]:0)):(nd=Wb(fa.buffer)?ra.createStream(34962,fa.buffer):ra.getBuffer(fa.buffer),Wa="type"in fa?sa[fa.type]:nd.dtype,Xb=!!fa.normalized,Gb=fa.size|0,Jc=fa.offset|0,tb=fa.stride|0,Dc=fa.divisor|0);Tb=k.location;
cb=ac[Tb];if(1===La){cb.buffer||O.enableVertexAttribArray(Tb);lc=Gb||2;if(cb.type!==Wa||cb.size!==lc||cb.buffer!==nd||cb.normalized!==Xb||cb.offset!==Jc||cb.stride!==tb)O.bindBuffer(34962,nd.buffer),O.vertexAttribPointer(Tb,lc,Wa,Xb,tb,Jc),cb.type=Wa,cb.size=lc,cb.buffer=nd,cb.normalized=Xb,cb.offset=Jc,cb.stride=tb;cb.divisor!==Dc&&(P.vertexAttribDivisorANGLE(Tb,Dc),cb.divisor=Dc)}else if(cb.buffer&&(O.disableVertexAttribArray(Tb),cb.buffer=null),cb.x!==td||cb.y!==Ab||cb.z!==Sa||cb.w!==ua)O.vertexAttrib4f(Tb,
td,Ab,Sa,ua),cb.x=td,cb.y=Ab,cb.z=Sa,cb.w=ua;E.buffer=b.positionFractBuffer;Ob=!1;fe=null;$b=0;Pb=!1;Qb=hd=0;Ma=1;nb=0;ub=5126;Rb=qc=Pa=hb=0;Wb(E)?(Ob=!0,fe=ra.createStream(34962,E),ub=fe.dtype):(fe=ra.getBuffer(E))?ub=fe.dtype:"constant"in E?(Ma=2,"number"===typeof E.constant?(Pa=E.constant,qc=Rb=hb=0):(Pa=0<E.constant.length?E.constant[0]:0,qc=1<E.constant.length?E.constant[1]:0,Rb=2<E.constant.length?E.constant[2]:0,hb=3<E.constant.length?E.constant[3]:0)):(fe=Wb(E.buffer)?ra.createStream(34962,
E.buffer):ra.getBuffer(E.buffer),ub="type"in E?sa[E.type]:fe.dtype,Pb=!!E.normalized,Qb=E.size|0,hd=E.offset|0,nb=E.stride|0,$b=E.divisor|0);od=g.location;db=ac[od];if(1===Ma){db.buffer||O.enableVertexAttribArray(od);nc=Qb||2;if(db.type!==ub||db.size!==nc||db.buffer!==fe||db.normalized!==Pb||db.offset!==hd||db.stride!==nb)O.bindBuffer(34962,fe.buffer),O.vertexAttribPointer(od,nc,ub,Pb,nb,hd),db.type=ub,db.size=nc,db.buffer=fe,db.normalized=Pb,db.offset=hd,db.stride=nb;db.divisor!==$b&&(P.vertexAttribDivisorANGLE(od,
$b),db.divisor=$b)}else if(db.buffer&&(O.disableVertexAttribArray(od),db.buffer=null),db.x!==Pa||db.y!==qc||db.z!==Rb||db.w!==hb)O.vertexAttrib4f(od,Pa,qc,Rb,hb),db.x=Pa,db.y=qc,db.z=Rb,db.w=hb;v.buffer=b.colorBuffer;Kc=!1;ec=null;jb=0;kb=!1;ob=qa=0;va=1;Ua=0;bb=5126;Bb=Ja=eb=Aa=0;Wb(v)?(Kc=!0,ec=ra.createStream(34962,v),bb=ec.dtype):(ec=ra.getBuffer(v))?bb=ec.dtype:"constant"in v?(va=2,"number"===typeof v.constant?(eb=v.constant,Ja=Bb=Aa=0):(eb=0<v.constant.length?v.constant[0]:0,Ja=1<v.constant.length?
v.constant[1]:0,Bb=2<v.constant.length?v.constant[2]:0,Aa=3<v.constant.length?v.constant[3]:0)):(ec=Wb(v.buffer)?ra.createStream(34962,v.buffer):ra.getBuffer(v.buffer),bb="type"in v?sa[v.type]:ec.dtype,kb=!!v.normalized,ob=v.size|0,qa=v.offset|0,Ua=v.stride|0,jb=v.divisor|0);zb=n.location;Ra=ac[zb];if(1===va){Ra.buffer||O.enableVertexAttribArray(zb);Mc=ob||4;if(Ra.type!==bb||Ra.size!==Mc||Ra.buffer!==ec||Ra.normalized!==kb||Ra.offset!==qa||Ra.stride!==Ua)O.bindBuffer(34962,ec.buffer),O.vertexAttribPointer(zb,
Mc,bb,kb,Ua,qa),Ra.type=bb,Ra.size=Mc,Ra.buffer=ec,Ra.normalized=kb,Ra.offset=qa,Ra.stride=Ua;Ra.divisor!==jb&&(P.vertexAttribDivisorANGLE(zb,jb),Ra.divisor=jb)}else if(Ra.buffer&&(O.disableVertexAttribArray(zb),Ra.buffer=null),Ra.x!==eb||Ra.y!==Ja||Ra.z!==Bb||Ra.w!==Aa)O.vertexAttrib4f(zb,eb,Ja,Bb,Aa),Ra.x=eb,Ra.y=Ja,Ra.z=Bb,Ra.w=Aa;Ib=la.location;Za=ac[Ib];Za.buffer||O.enableVertexAttribArray(Ib);if(5126!==Za.type||1!==Za.size||Za.buffer!==f||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)O.bindBuffer(34962,
f.buffer),O.vertexAttribPointer(Ib,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=f,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(P.vertexAttribDivisorANGLE(Ib,0),Za.divisor=0);Sb=L.location;xa=ac[Sb];xa.buffer||O.enableVertexAttribArray(Sb);if(5126!==xa.type||1!==xa.size||xa.buffer!==c||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)O.bindBuffer(34962,c.buffer),O.vertexAttribPointer(Sb,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=c,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&
(P.vertexAttribDivisorANGLE(Sb,0),xa.divisor=0);Ve=b.scale;O.uniform2f(a.location,Ve[0],Ve[1]);Ka=b.scaleFract;O.uniform2f(e.location,Ka[0],Ka[1]);Lb=b.translate;O.uniform2f(pa.location,Lb[0],Lb[1]);fb=b.translateFract;O.uniform2f(fd.location,fb[0],fb[1]);O.uniform1f(X.location,b.thickness);O.uniform1f(m.location,b.depth);ib=y.call(this,Na,b,0);O.uniform4f(Fb.location,ib[0],ib[1],ib[2],ib[3]);O.uniform1f(R.location,b.dashLength);O.uniform1f(da.location,b.opacity);(ya=b.dashTexture)&&"framebuffer"===
ya._reglType&&(ya=ya.color[0]);fc=ya._texture;O.uniform1i(ca.location,fc.bind());(Ea=K.elements)?O.bindBuffer(34963,Ea.buffer.buffer):ia.currentVAO&&(Ea=N.getElements(ia.currentVAO.elements))&&O.bindBuffer(34963,Ea.buffer.buffer);pb=b.count;0<pb?Ea?P.drawElementsInstancedANGLE(5,4,Ea.type,0<<(Ea.type-5121>>1),pb):P.drawArraysInstancedANGLE(5,0,4,pb):0>pb&&(Ea?O.drawElements(5,4,Ea.type,0<<(Ea.type-5121>>1)):O.drawArrays(5,0,4));Y.dirty=!0;ia.setVAO(null);Na.viewportWidth=p;Na.viewportHeight=t;A&&
(V.cpuTime+=performance.now()-M);F&&ra.destroyStream(ba);Cd&&ra.destroyStream(qd);Dd&&ra.destroyStream(nd);Ob&&ra.destroyStream(fe);Kc&&ra.destroyStream(ec);fc.unbind()},scope:function(a,e,d){var g,h,k,m,p,n,q,G,y,z,D,L,N,I,R,O,F,S,W,ca,ja,ha,X,ea,ia,pc,da,la,Ca,Da,ta,na,wd,pa,yc,sb,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,Sc,ic,Fa,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,sc,$b,Pb,oa,Qb,Ma,nb,ub,hb,Pa,qc,Rb,gb,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Yc,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,
Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Fb,uc,dc,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,ac,Vd,fd,Vb,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Te,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Ye,ve,ne,Ke,Le,He,qe,ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,Me,Ie;g=a.viewport;h=g.x|0;k=g.y|0;m="width"in g?g.width|0:Na.framebufferWidth-h;p="height"in g?g.height|0:Na.framebufferHeight-k;n=Na.viewportWidth;Na.viewportWidth=m;q=Na.viewportHeight;
Na.viewportHeight=p;G=x[0];x[0]=h;y=x[1];x[1]=k;z=x[2];x[2]=m;D=x[3];x[3]=p;L=ba[0];ba[0]=0;N=ba[1];ba[1]=0;I=ba[2];ba[2]=0;R=ba[3];ba[3]=0;O=$a.blend_enable;$a.blend_enable=!0;F=Oa[0];Oa[0]=32774;S=Oa[1];Oa[1]=32774;W=Ia[0];Ia[0]=770;ca=Ia[1];Ia[1]=771;ja=Ia[2];Ia[2]=773;ha=Ia[3];Ia[3]=1;X=b.call(this,Na,a,d);ea=$a.depth_enable;$a.depth_enable=X;ia=a.viewport;pc=ia.x|0;da=ia.y|0;la="width"in ia?ia.width|0:Na.framebufferWidth-pc;Ca="height"in ia?ia.height|0:Na.framebufferHeight-da;Da=Z[0];Z[0]=pc;
ta=Z[1];Z[1]=da;na=Z[2];Z[2]=la;wd=Z[3];Z[3]=Ca;pa=$a.scissor_enable;$a.scissor_enable=!0;yc=$a.stencil_enable;$a.stencil_enable=!1;if(sb=Y.profile)gd=performance.now(),V.count++;Nc=K.offset;K.offset=0;tc=K.count;K.count=4;ab=a.count;Cc=K.instances;K.instances=ab;Db=K.primitive;K.primitive=5;rc=a.dashLength;Ta=w[23];w[23]=rc;kc=a.dashTexture;bc=w[24];w[24]=kc;Sc=a.depth;ic=w[22];w[22]=Sc;Fa=a.id;Dc=w[31];w[31]=Fa;Xb=a.miterLimit;Jc=w[32];w[32]=Xb;Gb=t.call(this,Na,a,d);La=w[33];w[33]=Gb;tb=a.opacity;
Wa=w[10];w[10]=tb;ua=Na.pixelRatio;td=w[34];w[34]=ua;Ab=a.scale;Sa=w[6];w[6]=Ab;Tb=a.scaleFract;cb=w[7];w[7]=Tb;lc=a.thickness;Ob=w[21];w[21]=lc;sc=a.translate;$b=w[8];w[8]=sc;Pb=a.translateFract;oa=w[9];w[9]=Pb;Qb=A.call(this,Na,a,d);Ma=w[3];w[3]=Qb;Q.buffer=a.positionBuffer;nb=!1;ub=null;hb=0;Pa=!1;Rb=qc=0;gb=1;db=0;nc=5126;kb=jb=ec=Kc=0;Wb(Q)?(nb=!0,ub=ra.createStream(34962,Q),nc=ub.dtype):(ub=ra.getBuffer(Q))?nc=ub.dtype:"constant"in Q?(gb=2,"number"===typeof Q.constant?(ec=Q.constant,jb=kb=Kc=
0):(ec=0<Q.constant.length?Q.constant[0]:0,jb=1<Q.constant.length?Q.constant[1]:0,kb=2<Q.constant.length?Q.constant[2]:0,Kc=3<Q.constant.length?Q.constant[3]:0)):(ub=Wb(Q.buffer)?ra.createStream(34962,Q.buffer):ra.getBuffer(Q.buffer),nc="type"in Q?sa[Q.type]:ub.dtype,Pa=!!Q.normalized,Rb=Q.size|0,qc=Q.offset|0,db=Q.stride|0,hb=Q.divisor|0);qa=C.buffer;C.buffer=ub;ob=C.divisor;C.divisor=hb;va=C.normalized;C.normalized=Pa;Ua=C.offset;C.offset=qc;bb=C.size;C.size=Rb;Aa=C.state;C.state=gb;eb=C.stride;
C.stride=db;Ja=C.type;C.type=nc;Bb=C.w;C.w=Kc;zb=C.x;C.x=ec;Ra=C.y;C.y=jb;Mc=C.z;C.z=kb;fa.buffer=a.positionFractBuffer;Ib=!1;Za=null;Sb=0;xa=!1;Ka=Yc=0;Lb=1;fb=0;ib=5126;pb=Ea=fc=ya=0;Wb(fa)?(Ib=!0,Za=ra.createStream(34962,fa),ib=Za.dtype):(Za=ra.getBuffer(fa))?ib=Za.dtype:"constant"in fa?(Lb=2,"number"===typeof fa.constant?(fc=fa.constant,Ea=pb=ya=0):(fc=0<fa.constant.length?fa.constant[0]:0,Ea=1<fa.constant.length?fa.constant[1]:0,pb=2<fa.constant.length?fa.constant[2]:0,ya=3<fa.constant.length?
fa.constant[3]:0)):(Za=Wb(fa.buffer)?ra.createStream(34962,fa.buffer):ra.getBuffer(fa.buffer),ib="type"in fa?sa[fa.type]:Za.dtype,xa=!!fa.normalized,Ka=fa.size|0,Yc=fa.offset|0,fb=fa.stride|0,Sb=fa.divisor|0);qb=H.buffer;H.buffer=Za;Xa=H.divisor;H.divisor=Sb;Ya=H.normalized;H.normalized=xa;oc=H.offset;H.offset=Yc;xc=H.size;H.size=Ka;vc=H.state;H.state=Lb;Va=H.stride;H.stride=fb;Yb=H.type;H.type=ib;Tc=H.w;H.w=ya;Ga=H.x;H.x=fc;zc=H.y;H.y=Ea;Qa=H.z;H.z=pb;ma.buffer=a.positionBuffer;Ba=!1;lb=null;vb=
0;Cb=!1;wc=rb=0;wb=1;Fb=0;uc=5126;ud=id=Oc=dc=0;Wb(ma)?(Ba=!0,lb=ra.createStream(34962,ma),uc=lb.dtype):(lb=ra.getBuffer(ma))?uc=lb.dtype:"constant"in ma?(wb=2,"number"===typeof ma.constant?(Oc=ma.constant,id=ud=dc=0):(Oc=0<ma.constant.length?ma.constant[0]:0,id=1<ma.constant.length?ma.constant[1]:0,ud=2<ma.constant.length?ma.constant[2]:0,dc=3<ma.constant.length?ma.constant[3]:0)):(lb=Wb(ma.buffer)?ra.createStream(34962,ma.buffer):ra.getBuffer(ma.buffer),uc="type"in ma?sa[ma.type]:lb.dtype,Cb=!!ma.normalized,
wc=ma.size|0,rb=ma.offset|0,Fb=ma.stride|0,vb=ma.divisor|0);Ub=J.buffer;J.buffer=lb;cc=J.divisor;J.divisor=vb;Mb=J.normalized;J.normalized=Cb;Ha=J.offset;J.offset=rb;Zb=J.size;J.size=wc;mb=J.state;J.state=wb;xb=J.stride;J.stride=Fb;Kb=J.type;J.type=uc;Nb=J.w;J.w=dc;gc=J.x;J.x=Oc;jc=J.y;J.y=id;Uc=J.z;J.z=ud;E.buffer=a.positionFractBuffer;Ec=!1;Fc=null;Hc=0;Pc=!1;Vc=cd=0;Qc=1;Jb=0;Eb=5126;hc=Wc=Lc=Rc=0;Wb(E)?(Ec=!0,Fc=ra.createStream(34962,E),Eb=Fc.dtype):(Fc=ra.getBuffer(E))?Eb=Fc.dtype:"constant"in
E?(Qc=2,"number"===typeof E.constant?(Lc=E.constant,Wc=hc=Rc=0):(Lc=0<E.constant.length?E.constant[0]:0,Wc=1<E.constant.length?E.constant[1]:0,hc=2<E.constant.length?E.constant[2]:0,Rc=3<E.constant.length?E.constant[3]:0)):(Fc=Wb(E.buffer)?ra.createStream(34962,E.buffer):ra.getBuffer(E.buffer),Eb="type"in E?sa[E.type]:Fc.dtype,Pc=!!E.normalized,Vc=E.size|0,cd=E.offset|0,Jb=E.stride|0,Hc=E.divisor|0);Zc=u.buffer;u.buffer=Fc;jd=u.divisor;u.divisor=Hc;vd=u.normalized;u.normalized=Pc;oe=u.offset;u.offset=
cd;$c=u.size;u.size=Vc;ac=u.state;u.state=Qc;Vd=u.stride;u.stride=Jb;fd=u.type;u.type=Eb;Vb=u.w;u.w=Rc;le=u.x;u.x=Lc;Gd=u.y;u.y=Wc;Ed=u.z;u.z=hc;v.buffer=a.colorBuffer;ed=!1;Ic=null;pd=0;kd=!1;ld=bd=0;Bd=1;yd=0;Te=5126;be=ce=te=me=0;Wb(v)?(ed=!0,Ic=ra.createStream(34962,v),Te=Ic.dtype):(Ic=ra.getBuffer(v))?Te=Ic.dtype:"constant"in v?(Bd=2,"number"===typeof v.constant?(te=v.constant,ce=be=me=0):(te=0<v.constant.length?v.constant[0]:0,ce=1<v.constant.length?v.constant[1]:0,be=2<v.constant.length?v.constant[2]:
0,me=3<v.constant.length?v.constant[3]:0)):(Ic=Wb(v.buffer)?ra.createStream(34962,v.buffer):ra.getBuffer(v.buffer),Te="type"in v?sa[v.type]:Ic.dtype,kd=!!v.normalized,ld=v.size|0,bd=v.offset|0,yd=v.stride|0,pd=v.divisor|0);ae=B.buffer;B.buffer=Ic;ue=B.divisor;B.divisor=pd;Yd=B.normalized;B.normalized=kd;ge=B.offset;B.offset=bd;Ac=B.size;B.size=ld;Xc=B.state;B.state=Bd;pe=B.stride;B.stride=yd;ie=B.type;B.type=Te;Fd=B.w;B.w=me;Id=B.x;B.x=te;Kd=B.y;B.y=ce;Ld=B.z;B.z=be;he=M.buffer;M.buffer=f;Ye=M.divisor;
M.divisor=0;ve=M.normalized;M.normalized=!1;ne=M.offset;M.offset=0;Ke=M.size;M.size=0;Le=M.state;M.state=1;He=M.stride;M.stride=8;qe=M.type;M.type=5126;ye=M.w;M.w=0;Ce=M.x;M.x=0;De=M.y;M.y=0;Ee=M.z;M.z=0;ze=r.buffer;r.buffer=c;Hd=r.divisor;r.divisor=0;Pd=r.normalized;r.normalized=!1;Wd=r.offset;r.offset=4;Zd=r.size;r.size=0;Fe=r.state;r.state=1;Ad=r.stride;r.stride=8;Md=r.type;r.type=5126;we=r.w;r.w=0;Ge=r.x;r.x=0;gf=r.y;r.y=0;We=r.z;r.z=0;Me=P.vert;P.vert=20;Ie=P.frag;P.frag=19;Y.dirty=!0;e(Na,a,
d);Na.viewportWidth=n;Na.viewportHeight=q;x[0]=G;x[1]=y;x[2]=z;x[3]=D;ba[0]=L;ba[1]=N;ba[2]=I;ba[3]=R;$a.blend_enable=O;Oa[0]=F;Oa[1]=S;Ia[0]=W;Ia[1]=ca;Ia[2]=ja;Ia[3]=ha;$a.depth_enable=ea;Z[0]=Da;Z[1]=ta;Z[2]=na;Z[3]=wd;$a.scissor_enable=pa;$a.stencil_enable=yc;sb&&(V.cpuTime+=performance.now()-gd);K.offset=Nc;K.count=tc;K.instances=Cc;K.primitive=Db;w[23]=Ta;w[24]=bc;w[22]=ic;w[31]=Dc;w[32]=Jc;w[33]=La;w[10]=Wa;w[34]=td;w[6]=Sa;w[7]=cb;w[21]=Ob;w[8]=$b;w[9]=oa;w[3]=Ma;nb&&ra.destroyStream(ub);
C.buffer=qa;C.divisor=ob;C.normalized=va;C.offset=Ua;C.size=bb;C.state=Aa;C.stride=eb;C.type=Ja;C.w=Bb;C.x=zb;C.y=Ra;C.z=Mc;Ib&&ra.destroyStream(Za);H.buffer=qb;H.divisor=Xa;H.normalized=Ya;H.offset=oc;H.size=xc;H.state=vc;H.stride=Va;H.type=Yb;H.w=Tc;H.x=Ga;H.y=zc;H.z=Qa;Ba&&ra.destroyStream(lb);J.buffer=Ub;J.divisor=cc;J.normalized=Mb;J.offset=Ha;J.size=Zb;J.state=mb;J.stride=xb;J.type=Kb;J.w=Nb;J.x=gc;J.y=jc;J.z=Uc;Ec&&ra.destroyStream(Fc);u.buffer=Zc;u.divisor=jd;u.normalized=vd;u.offset=oe;u.size=
$c;u.state=ac;u.stride=Vd;u.type=fd;u.w=Vb;u.x=le;u.y=Gd;u.z=Ed;ed&&ra.destroyStream(Ic);B.buffer=ae;B.divisor=ue;B.normalized=Yd;B.offset=ge;B.size=Ac;B.state=Xc;B.stride=pe;B.type=ie;B.w=Fd;B.x=Id;B.y=Kd;B.z=Ld;M.buffer=he;M.divisor=Ye;M.normalized=ve;M.offset=ne;M.size=Ke;M.state=Le;M.stride=He;M.type=qe;M.w=ye;M.x=Ce;M.y=De;M.z=Ee;r.buffer=ze;r.divisor=Hd;r.normalized=Pd;r.offset=Wd;r.size=Zd;r.state=Fe;r.stride=Ad;r.type=Md;r.w=we;r.x=Ge;r.y=gf;r.z=We;P.vert=Me;P.frag=Ie;Y.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(d,
V,q,z,f,c,y,b,t,C,A,H,J,u,B,M,r,I,oa,F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,fd,Fb,ac,ra,Na,Y){var K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta,ic,pc,sc,wd,yc,Z,G,ja,Da,sb,Sc,Yc,D,x,ha,sa,Q,fa,ma,E,v,aa,T,wa,ka,l;K=d.attributes;N=d.buffer;S=d.context;na=d.current;O=d.draw;Wb=d.elements;$a=d.extensions;P=d.framebuffer;w=d.gl;ia=d.isBufferArgs;ba=d.next;Fa=d.shader;Oa=d.uniforms;dc=d.vao;Ia=ba.blend_color;W=na.blend_color;gb=ba.blend_equation;ea=na.blend_equation;ta=ba.blend_func;ic=na.blend_func;
pc=ba.colorMask;sc=na.colorMask;wd=ba.depth_range;yc=na.depth_range;Z=ba.polygonOffset_offset;G=na.polygonOffset_offset;ja=ba.sample_coverage;Da=na.sample_coverage;sb=ba.scissor_box;Sc=na.scissor_box;Yc=ba.stencil_func;D=na.stencil_func;x=ba.stencil_opBack;ha=na.stencil_opBack;sa=ba.stencil_opFront;Q=na.stencil_opFront;fa=ba.viewport;ma=na.viewport;E={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};v={divisor:1,offset:0,stride:4};aa={divisor:1,offset:8,
stride:8};T={divisor:1,offset:4,stride:4};wa={divisor:1,offset:16,stride:8};ka={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(b,d){var p,q,r,u,t,y;p=P.next;p!==P.cur&&(p?w.bindFramebuffer(36160,p.framebuffer):w.bindFramebuffer(36160,null),P.cur=p);if(na.dirty){var z,B,I,H,C,J,A,M,fa,za,ga,ta,sb,Fa,Oa,Rd,Sd,oa,Ia,rd,md,gb,qd,dd,Bc,sd,gd,Nc,tc,ab;z=ba.dither;z!==na.dither&&(z?w.enable(3024):w.disable(3024),na.dither=z);B=ba.depth_func;B!==na.depth_func&&(w.depthFunc(B),
na.depth_func=B);I=wd[0];H=wd[1];if(I!==yc[0]||H!==yc[1])w.depthRange(I,H),yc[0]=I,yc[1]=H;C=ba.depth_mask;C!==na.depth_mask&&(w.depthMask(C),na.depth_mask=C);J=pc[0];A=pc[1];M=pc[2];fa=pc[3];if(J!==sc[0]||A!==sc[1]||M!==sc[2]||fa!==sc[3])w.colorMask(J,A,M,fa),sc[0]=J,sc[1]=A,sc[2]=M,sc[3]=fa;za=ba.frontFace;za!==na.frontFace&&(w.frontFace(za),na.frontFace=za);ga=ba.lineWidth;ga!==na.lineWidth&&(w.lineWidth(ga),na.lineWidth=ga);ta=ba.polygonOffset_enable;ta!==na.polygonOffset_enable&&(ta?w.enable(32823):
w.disable(32823),na.polygonOffset_enable=ta);sb=Z[0];Fa=Z[1];if(sb!==G[0]||Fa!==G[1])w.polygonOffset(sb,Fa),G[0]=sb,G[1]=Fa;Oa=ba.sample_alpha;Oa!==na.sample_alpha&&(Oa?w.enable(32926):w.disable(32926),na.sample_alpha=Oa);Rd=ba.sample_enable;Rd!==na.sample_enable&&(Rd?w.enable(32928):w.disable(32928),na.sample_enable=Rd);Sd=ja[0];oa=ja[1];if(Sd!==Da[0]||oa!==Da[1])w.sampleCoverage(Sd,oa),Da[0]=Sd,Da[1]=oa;Ia=ba.stencil_mask;Ia!==na.stencil_mask&&(w.stencilMask(Ia),na.stencil_mask=Ia);rd=Yc[0];md=
Yc[1];gb=Yc[2];if(rd!==D[0]||md!==D[1]||gb!==D[2])w.stencilFunc(rd,md,gb),D[0]=rd,D[1]=md,D[2]=gb;qd=sa[0];dd=sa[1];Bc=sa[2];sd=sa[3];if(qd!==Q[0]||dd!==Q[1]||Bc!==Q[2]||sd!==Q[3])w.stencilOpSeparate(qd,dd,Bc,sd),Q[0]=qd,Q[1]=dd,Q[2]=Bc,Q[3]=sd;gd=x[0];Nc=x[1];tc=x[2];ab=x[3];if(gd!==ha[0]||Nc!==ha[1]||tc!==ha[2]||ab!==ha[3])w.stencilOpSeparate(gd,Nc,tc,ab),ha[0]=gd,ha[1]=Nc,ha[2]=tc,ha[3]=ab}w.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;w.enable(3042);na.blend_enable=!0;w.blendEquationSeparate(32774,
32774);ea[0]=32774;ea[1]=32774;w.blendFuncSeparate(770,771,773,1);ic[0]=770;ic[1]=771;ic[2]=773;ic[3]=1;w.enable(2884);na.cull_enable=!0;w.cullFace(1029);na.cull_face=1029;w.enable(3089);na.scissor_enable=!0;w.disable(2960);na.stencil_enable=!1;if(q=na.profile)r=performance.now(),V.count+=d;w.useProgram(F.program);u=$a.angle_instanced_arrays;var Cc,Db,rc,Ta,kc;dc.setVAO(null);Cc=da.location;Db=K[Cc];Db.buffer||w.enableVertexAttribArray(Cc);if(5126!==Db.type||1!==Db.size||Db.buffer!==f||!1!==Db.normalized||
0!==Db.offset||8!==Db.stride)w.bindBuffer(34962,f.buffer),w.vertexAttribPointer(Cc,1,5126,!1,8,0),Db.type=5126,Db.size=1,Db.buffer=f,Db.normalized=!1,Db.offset=0,Db.stride=8;0!==Db.divisor&&(u.vertexAttribDivisorANGLE(Cc,0),Db.divisor=0);rc=a.location;Ta=K[rc];Ta.buffer||w.enableVertexAttribArray(rc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==c||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)w.bindBuffer(34962,c.buffer),w.vertexAttribPointer(rc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=c,
Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(u.vertexAttribDivisorANGLE(rc,0),Ta.divisor=0);(kc=O.elements)?w.bindBuffer(34963,kc.buffer.buffer):dc.currentVAO&&(kc=Wb.getElements(dc.currentVAO.elements))&&w.bindBuffer(34963,kc.buffer.buffer);for(t=0;t<d;++t){y=b[t];var bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Ve,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,
zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,Vb,Vd,$e,Xe,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Te,me,te,ce,be,ae,ue,Yd,ge,Ac;bc=y.viewport;ad=bc.x|0;Dd=bc.y|0;nd="width"in bc?bc.width|0:S.framebufferWidth-ad;Dc="height"in bc?bc.height|0:S.framebufferHeight-Dd;Xb=S.viewportWidth;S.viewportWidth=nd;Jc=S.viewportHeight;S.viewportHeight=Dc;w.viewport(ad,Dd,nd,Dc);ma[0]=ad;ma[1]=Dd;ma[2]=nd;ma[3]=Dc;(Gb=Ca.call(this,S,
y,t))?w.enable(2929):w.disable(2929);na.depth_enable=Gb;La=y.viewport;tb=La.x|0;Wa=La.y|0;ua="width"in La?La.width|0:S.framebufferWidth-tb;td="height"in La?La.height|0:S.framebufferHeight-Wa;w.scissor(tb,Wa,ua,td);Sc[0]=tb;Sc[1]=Wa;Sc[2]=ua;Sc[3]=td;aa.buffer=y.positionBuffer;Ab=!1;Sa=null;Tb=0;cb=!1;Ob=lc=0;fe=1;$b=0;Pb=5126;nb=Ma=Qb=hd=0;ia(aa)?(Ab=!0,Sa=N.createStream(34962,aa),Pb=Sa.dtype):(Sa=N.getBuffer(aa))?Pb=Sa.dtype:"constant"in aa?(fe=2,"number"===typeof aa.constant?(Qb=aa.constant,Ma=
nb=hd=0):(Qb=0<aa.constant.length?aa.constant[0]:0,Ma=1<aa.constant.length?aa.constant[1]:0,nb=2<aa.constant.length?aa.constant[2]:0,hd=3<aa.constant.length?aa.constant[3]:0)):(Sa=ia(aa.buffer)?N.createStream(34962,aa.buffer):N.getBuffer(aa.buffer),Pb="type"in aa?E[aa.type]:Sa.dtype,cb=!!aa.normalized,Ob=aa.size|0,lc=aa.offset|0,$b=aa.stride|0,Tb=aa.divisor|0);ub=n.location;hb=K[ub];if(1===fe){hb.buffer||w.enableVertexAttribArray(ub);Pa=Ob||2;if(hb.type!==Pb||hb.size!==Pa||hb.buffer!==Sa||hb.normalized!==
cb||hb.offset!==lc||hb.stride!==$b)w.bindBuffer(34962,Sa.buffer),w.vertexAttribPointer(ub,Pa,Pb,cb,$b,lc),hb.type=Pb,hb.size=Pa,hb.buffer=Sa,hb.normalized=cb,hb.offset=lc,hb.stride=$b;hb.divisor!==Tb&&(u.vertexAttribDivisorANGLE(ub,Tb),hb.divisor=Tb)}else if(hb.buffer&&(w.disableVertexAttribArray(ub),hb.buffer=null),hb.x!==Qb||hb.y!==Ma||hb.z!==nb||hb.w!==hd)w.vertexAttrib4f(ub,Qb,Ma,nb,hd),hb.x=Qb,hb.y=Ma,hb.z=nb,hb.w=hd;wa.buffer=y.positionBuffer;qc=!1;Rb=null;od=0;db=!1;Kc=nc=0;ec=1;jb=0;kb=5126;
Ua=va=ob=qa=0;ia(wa)?(qc=!0,Rb=N.createStream(34962,wa),kb=Rb.dtype):(Rb=N.getBuffer(wa))?kb=Rb.dtype:"constant"in wa?(ec=2,"number"===typeof wa.constant?(ob=wa.constant,va=Ua=qa=0):(ob=0<wa.constant.length?wa.constant[0]:0,va=1<wa.constant.length?wa.constant[1]:0,Ua=2<wa.constant.length?wa.constant[2]:0,qa=3<wa.constant.length?wa.constant[3]:0)):(Rb=ia(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),kb="type"in wa?E[wa.type]:Rb.dtype,db=!!wa.normalized,Kc=wa.size|0,nc=wa.offset|
0,jb=wa.stride|0,od=wa.divisor|0);bb=ca.location;Aa=K[bb];if(1===ec){Aa.buffer||w.enableVertexAttribArray(bb);eb=Kc||2;if(Aa.type!==kb||Aa.size!==eb||Aa.buffer!==Rb||Aa.normalized!==db||Aa.offset!==nc||Aa.stride!==jb)w.bindBuffer(34962,Rb.buffer),w.vertexAttribPointer(bb,eb,kb,db,jb,nc),Aa.type=kb,Aa.size=eb,Aa.buffer=Rb,Aa.normalized=db,Aa.offset=nc,Aa.stride=jb;Aa.divisor!==od&&(u.vertexAttribDivisorANGLE(bb,od),Aa.divisor=od)}else if(Aa.buffer&&(w.disableVertexAttribArray(bb),Aa.buffer=null),Aa.x!==
ob||Aa.y!==va||Aa.z!==Ua||Aa.w!==qa)w.vertexAttrib4f(bb,ob,va,Ua,qa),Aa.x=ob,Aa.y=va,Aa.z=Ua,Aa.w=qa;ka.buffer=y.positionBuffer;Ja=!1;Bb=null;zb=0;Ra=!1;Ib=Mc=0;Za=1;Sb=0;xa=5126;fb=Lb=Ka=Ve=0;ia(ka)?(Ja=!0,Bb=N.createStream(34962,ka),xa=Bb.dtype):(Bb=N.getBuffer(ka))?xa=Bb.dtype:"constant"in ka?(Za=2,"number"===typeof ka.constant?(Ka=ka.constant,Lb=fb=Ve=0):(Ka=0<ka.constant.length?ka.constant[0]:0,Lb=1<ka.constant.length?ka.constant[1]:0,fb=2<ka.constant.length?ka.constant[2]:0,Ve=3<ka.constant.length?
ka.constant[3]:0)):(Bb=ia(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),xa="type"in ka?E[ka.type]:Bb.dtype,Ra=!!ka.normalized,Ib=ka.size|0,Mc=ka.offset|0,Sb=ka.stride|0,zb=ka.divisor|0);ib=pa.location;ya=K[ib];if(1===Za){ya.buffer||w.enableVertexAttribArray(ib);fc=Ib||2;if(ya.type!==xa||ya.size!==fc||ya.buffer!==Bb||ya.normalized!==Ra||ya.offset!==Mc||ya.stride!==Sb)w.bindBuffer(34962,Bb.buffer),w.vertexAttribPointer(ib,fc,xa,Ra,Sb,Mc),ya.type=xa,ya.size=fc,ya.buffer=Bb,ya.normalized=
Ra,ya.offset=Mc,ya.stride=Sb;ya.divisor!==zb&&(u.vertexAttribDivisorANGLE(ib,zb),ya.divisor=zb)}else if(ya.buffer&&(w.disableVertexAttribArray(ib),ya.buffer=null),ya.x!==Ka||ya.y!==Lb||ya.z!==fb||ya.w!==Ve)w.vertexAttrib4f(ib,Ka,Lb,fb,Ve),ya.x=Ka,ya.y=Lb,ya.z=fb,ya.w=Ve;l.buffer=y.positionBuffer;Ea=!1;pb=null;qb=0;Xa=!1;oc=Ya=0;xc=1;vc=0;Va=5126;zc=Ga=Tc=Yb=0;ia(l)?(Ea=!0,pb=N.createStream(34962,l),Va=pb.dtype):(pb=N.getBuffer(l))?Va=pb.dtype:"constant"in l?(xc=2,"number"===typeof l.constant?(Tc=
l.constant,Ga=zc=Yb=0):(Tc=0<l.constant.length?l.constant[0]:0,Ga=1<l.constant.length?l.constant[1]:0,zc=2<l.constant.length?l.constant[2]:0,Yb=3<l.constant.length?l.constant[3]:0)):(pb=ia(l.buffer)?N.createStream(34962,l.buffer):N.getBuffer(l.buffer),Va="type"in l?E[l.type]:pb.dtype,Xa=!!l.normalized,oc=l.size|0,Ya=l.offset|0,vc=l.stride|0,qb=l.divisor|0);Qa=Fb.location;Ba=K[Qa];if(1===xc){Ba.buffer||w.enableVertexAttribArray(Qa);lb=oc||2;if(Ba.type!==Va||Ba.size!==lb||Ba.buffer!==pb||Ba.normalized!==
Xa||Ba.offset!==Ya||Ba.stride!==vc)w.bindBuffer(34962,pb.buffer),w.vertexAttribPointer(Qa,lb,Va,Xa,vc,Ya),Ba.type=Va,Ba.size=lb,Ba.buffer=pb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=vc;Ba.divisor!==qb&&(u.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(w.disableVertexAttribArray(Qa),Ba.buffer=null),Ba.x!==Tc||Ba.y!==Ga||Ba.z!==zc||Ba.w!==Yb)w.vertexAttrib4f(Qa,Tc,Ga,zc,Yb),Ba.x=Tc,Ba.y=Ga,Ba.z=zc,Ba.w=Yb;v.buffer=y.colorBuffer;vb=!1;Cb=null;rb=0;wc=!1;Jd=wb=0;uc=1;Td=0;Oc=5126;cc=
Ub=ud=id=0;ia(v)?(vb=!0,Cb=N.createStream(34962,v),Oc=Cb.dtype):(Cb=N.getBuffer(v))?Oc=Cb.dtype:"constant"in v?(uc=2,"number"===typeof v.constant?(ud=v.constant,Ub=cc=id=0):(ud=0<v.constant.length?v.constant[0]:0,Ub=1<v.constant.length?v.constant[1]:0,cc=2<v.constant.length?v.constant[2]:0,id=3<v.constant.length?v.constant[3]:0)):(Cb=ia(v.buffer)?N.createStream(34962,v.buffer):N.getBuffer(v.buffer),Oc="type"in v?E[v.type]:Cb.dtype,wc=!!v.normalized,Jd=v.size|0,wb=v.offset|0,Td=v.stride|0,rb=v.divisor|
0);Mb=g.location;Ha=K[Mb];if(1===uc){Ha.buffer||w.enableVertexAttribArray(Mb);Zb=Jd||4;if(Ha.type!==Oc||Ha.size!==Zb||Ha.buffer!==Cb||Ha.normalized!==wc||Ha.offset!==wb||Ha.stride!==Td)w.bindBuffer(34962,Cb.buffer),w.vertexAttribPointer(Mb,Zb,Oc,wc,Td,wb),Ha.type=Oc,Ha.size=Zb,Ha.buffer=Cb,Ha.normalized=wc,Ha.offset=wb,Ha.stride=Td;Ha.divisor!==rb&&(u.vertexAttribDivisorANGLE(Mb,rb),Ha.divisor=rb)}else if(Ha.buffer&&(w.disableVertexAttribArray(Mb),Ha.buffer=null),Ha.x!==ud||Ha.y!==Ub||Ha.z!==cc||
Ha.w!==id)w.vertexAttrib4f(Mb,ud,Ub,cc,id),Ha.x=ud,Ha.y=Ub,Ha.z=cc,Ha.w=id;T.buffer=y.colorBuffer;mb=!1;xb=null;Kb=0;Nb=!1;jc=gc=0;Uc=1;Ec=0;Fc=5126;Vc=cd=Pc=Hc=0;ia(T)?(mb=!0,xb=N.createStream(34962,T),Fc=xb.dtype):(xb=N.getBuffer(T))?Fc=xb.dtype:"constant"in T?(Uc=2,"number"===typeof T.constant?(Pc=T.constant,cd=Vc=Hc=0):(Pc=0<T.constant.length?T.constant[0]:0,cd=1<T.constant.length?T.constant[1]:0,Vc=2<T.constant.length?T.constant[2]:0,Hc=3<T.constant.length?T.constant[3]:0)):(xb=ia(T.buffer)?
N.createStream(34962,T.buffer):N.getBuffer(T.buffer),Fc="type"in T?E[T.type]:xb.dtype,Nb=!!T.normalized,jc=T.size|0,gc=T.offset|0,Ec=T.stride|0,Kb=T.divisor|0);Qc=R.location;Jb=K[Qc];if(1===Uc){Jb.buffer||w.enableVertexAttribArray(Qc);Eb=jc||4;if(Jb.type!==Fc||Jb.size!==Eb||Jb.buffer!==xb||Jb.normalized!==Nb||Jb.offset!==gc||Jb.stride!==Ec)w.bindBuffer(34962,xb.buffer),w.vertexAttribPointer(Qc,Eb,Fc,Nb,Ec,gc),Jb.type=Fc,Jb.size=Eb,Jb.buffer=xb,Jb.normalized=Nb,Jb.offset=gc,Jb.stride=Ec;Jb.divisor!==
Kb&&(u.vertexAttribDivisorANGLE(Qc,Kb),Jb.divisor=Kb)}else if(Jb.buffer&&(w.disableVertexAttribArray(Qc),Jb.buffer=null),Jb.x!==Pc||Jb.y!==cd||Jb.z!==Vc||Jb.w!==Hc)w.vertexAttrib4f(Qc,Pc,cd,Vc,Hc),Jb.x=Pc,Jb.y=cd,Jb.z=Vc,Jb.w=Hc;Rc=y.scale;Lc=Rc[0];hc=Rc[1];t&&Wc===Lc&&Zc===hc||(Wc=Lc,Zc=hc,w.uniform2f(ac.location,Lc,hc));jd=y.translate;vd=jd[0];$c=jd[1];t&&oe===vd&&Vb===$c||(oe=vd,Vb=$c,w.uniform2f(Na.location,vd,$c));Vd=y.thickness;t&&$e===Vd||($e=Vd,w.uniform1f(ra.location,Vd));Xe=y.depth;t&&le===
Xe||(le=Xe,w.uniform1f(L.location,Xe));Gd=k.call(this,S,y,t);Ed=Gd[0];Ic=Gd[1];kd=Gd[2];ld=Gd[3];t&&ed===Ed&&pd===Ic&&bd===kd&&Bd===ld||(ed=Ed,pd=Ic,bd=kd,Bd=ld,w.uniform4f(Y.location,Ed,Ic,kd,ld));yd=y.miterLimit;t&&Te===yd||(Te=yd,w.uniform1f(e.location,yd));me=h.call(this,S,y,t);t&&te===me||(te=me,w.uniform1f(X.location,me));ce=y.dashLength;t&&be===ce||(be=ce,w.uniform1f(m.location,ce));ae=y.opacity;t&&ue===ae||(ue=ae,w.uniform1f(fd.location,ae));(Yd=y.dashTexture)&&"framebuffer"===Yd._reglType&&
(Yd=Yd.color[0]);ge=Yd._texture;w.uniform1i(la.location,ge.bind());Ac=y.count;0<Ac?kc?u.drawElementsInstancedANGLE(5,4,kc.type,0<<(kc.type-5121>>1),Ac):u.drawArraysInstancedANGLE(5,0,4,Ac):0>Ac&&(kc?w.drawElements(5,4,kc.type,0<<(kc.type-5121>>1)):w.drawArrays(5,0,4));S.viewportWidth=Xb;S.viewportHeight=Jc;Ab&&N.destroyStream(Sa);qc&&N.destroyStream(Rb);Ja&&N.destroyStream(Bb);Ea&&N.destroyStream(pb);vb&&N.destroyStream(Cb);mb&&N.destroyStream(xb);ge.unbind()}na.dirty=!0;dc.setVAO(null);q&&(V.cpuTime+=
performance.now()-r)},draw:function(d){var h,k,r,u,t,B,I,H,C,J,A,M,F,fa,Ca,za,ga,ta,sb,Fa,Oa,oa,Rd,Sd,Ia,gb,rd,md,Cd,qd,dd,Bc,sd,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Ve,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd;h=P.next;h!==P.cur&&(h?w.bindFramebuffer(36160,h.framebuffer):w.bindFramebuffer(36160,null),P.cur=
h);if(na.dirty){var uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc;uc=ba.dither;uc!==na.dither&&(uc?w.enable(3024):w.disable(3024),na.dither=uc);Td=ba.depth_func;Td!==na.depth_func&&(w.depthFunc(Td),na.depth_func=Td);Oc=wd[0];id=wd[1];if(Oc!==yc[0]||id!==yc[1])w.depthRange(Oc,id),yc[0]=Oc,yc[1]=id;ud=ba.depth_mask;ud!==na.depth_mask&&(w.depthMask(ud),na.depth_mask=ud);Ub=pc[0];cc=pc[1];Mb=pc[2];Ha=pc[3];if(Ub!==sc[0]||cc!==sc[1]||Mb!==sc[2]||Ha!==sc[3])w.colorMask(Ub,
cc,Mb,Ha),sc[0]=Ub,sc[1]=cc,sc[2]=Mb,sc[3]=Ha;Zb=ba.frontFace;Zb!==na.frontFace&&(w.frontFace(Zb),na.frontFace=Zb);mb=ba.lineWidth;mb!==na.lineWidth&&(w.lineWidth(mb),na.lineWidth=mb);xb=ba.polygonOffset_enable;xb!==na.polygonOffset_enable&&(xb?w.enable(32823):w.disable(32823),na.polygonOffset_enable=xb);Kb=Z[0];Nb=Z[1];if(Kb!==G[0]||Nb!==G[1])w.polygonOffset(Kb,Nb),G[0]=Kb,G[1]=Nb;gc=ba.sample_alpha;gc!==na.sample_alpha&&(gc?w.enable(32926):w.disable(32926),na.sample_alpha=gc);jc=ba.sample_enable;
jc!==na.sample_enable&&(jc?w.enable(32928):w.disable(32928),na.sample_enable=jc);Uc=ja[0];Ec=ja[1];if(Uc!==Da[0]||Ec!==Da[1])w.sampleCoverage(Uc,Ec),Da[0]=Uc,Da[1]=Ec;Fc=ba.stencil_mask;Fc!==na.stencil_mask&&(w.stencilMask(Fc),na.stencil_mask=Fc);Hc=Yc[0];Pc=Yc[1];cd=Yc[2];if(Hc!==D[0]||Pc!==D[1]||cd!==D[2])w.stencilFunc(Hc,Pc,cd),D[0]=Hc,D[1]=Pc,D[2]=cd;Vc=sa[0];Qc=sa[1];Jb=sa[2];Eb=sa[3];if(Vc!==Q[0]||Qc!==Q[1]||Jb!==Q[2]||Eb!==Q[3])w.stencilOpSeparate(Vc,Qc,Jb,Eb),Q[0]=Vc,Q[1]=Qc,Q[2]=Jb,Q[3]=
Eb;Rc=x[0];Lc=x[1];Wc=x[2];hc=x[3];if(Rc!==ha[0]||Lc!==ha[1]||Wc!==ha[2]||hc!==ha[3])w.stencilOpSeparate(Rc,Lc,Wc,hc),ha[0]=Rc,ha[1]=Lc,ha[2]=Wc,ha[3]=hc}k=d.viewport;r=k.x|0;u=k.y|0;t="width"in k?k.width|0:S.framebufferWidth-r;B="height"in k?k.height|0:S.framebufferHeight-u;I=S.viewportWidth;S.viewportWidth=t;H=S.viewportHeight;S.viewportHeight=B;w.viewport(r,u,t,B);ma[0]=r;ma[1]=u;ma[2]=t;ma[3]=B;w.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;w.enable(3042);na.blend_enable=!0;w.blendEquationSeparate(32774,
32774);ea[0]=32774;ea[1]=32774;w.blendFuncSeparate(770,771,773,1);ic[0]=770;ic[1]=771;ic[2]=773;ic[3]=1;w.enable(2884);na.cull_enable=!0;w.cullFace(1029);na.cull_face=1029;(C=q.call(this,S,d,0))?w.enable(2929):w.disable(2929);na.depth_enable=C;J=d.viewport;A=J.x|0;M=J.y|0;F="width"in J?J.width|0:S.framebufferWidth-A;fa="height"in J?J.height|0:S.framebufferHeight-M;w.scissor(A,M,F,fa);Sc[0]=A;Sc[1]=M;Sc[2]=F;Sc[3]=fa;w.enable(3089);na.scissor_enable=!0;w.disable(2960);na.stencil_enable=!1;if(Ca=na.profile)za=
performance.now(),V.count++;w.useProgram(z.program);ga=$a.angle_instanced_arrays;dc.setVAO(null);aa.buffer=d.positionBuffer;ta=!1;sb=null;Fa=0;Oa=!1;Rd=oa=0;Sd=1;Ia=0;gb=5126;qd=Cd=md=rd=0;ia(aa)?(ta=!0,sb=N.createStream(34962,aa),gb=sb.dtype):(sb=N.getBuffer(aa))?gb=sb.dtype:"constant"in aa?(Sd=2,"number"===typeof aa.constant?(md=aa.constant,Cd=qd=rd=0):(md=0<aa.constant.length?aa.constant[0]:0,Cd=1<aa.constant.length?aa.constant[1]:0,qd=2<aa.constant.length?aa.constant[2]:0,rd=3<aa.constant.length?
aa.constant[3]:0)):(sb=ia(aa.buffer)?N.createStream(34962,aa.buffer):N.getBuffer(aa.buffer),gb="type"in aa?E[aa.type]:sb.dtype,Oa=!!aa.normalized,Rd=aa.size|0,oa=aa.offset|0,Ia=aa.stride|0,Fa=aa.divisor|0);dd=n.location;Bc=K[dd];if(1===Sd){Bc.buffer||w.enableVertexAttribArray(dd);sd=Rd||2;if(Bc.type!==gb||Bc.size!==sd||Bc.buffer!==sb||Bc.normalized!==Oa||Bc.offset!==oa||Bc.stride!==Ia)w.bindBuffer(34962,sb.buffer),w.vertexAttribPointer(dd,sd,gb,Oa,Ia,oa),Bc.type=gb,Bc.size=sd,Bc.buffer=sb,Bc.normalized=
Oa,Bc.offset=oa,Bc.stride=Ia;Bc.divisor!==Fa&&(ga.vertexAttribDivisorANGLE(dd,Fa),Bc.divisor=Fa)}else if(Bc.buffer&&(w.disableVertexAttribArray(dd),Bc.buffer=null),Bc.x!==md||Bc.y!==Cd||Bc.z!==qd||Bc.w!==rd)w.vertexAttrib4f(dd,md,Cd,qd,rd),Bc.x=md,Bc.y=Cd,Bc.z=qd,Bc.w=rd;wa.buffer=d.positionBuffer;gd=!1;Nc=null;tc=0;ab=!1;Db=Cc=0;rc=1;Ta=0;kc=5126;nd=Dd=ad=bc=0;ia(wa)?(gd=!0,Nc=N.createStream(34962,wa),kc=Nc.dtype):(Nc=N.getBuffer(wa))?kc=Nc.dtype:"constant"in wa?(rc=2,"number"===typeof wa.constant?
(ad=wa.constant,Dd=nd=bc=0):(ad=0<wa.constant.length?wa.constant[0]:0,Dd=1<wa.constant.length?wa.constant[1]:0,nd=2<wa.constant.length?wa.constant[2]:0,bc=3<wa.constant.length?wa.constant[3]:0)):(Nc=ia(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),kc="type"in wa?E[wa.type]:Nc.dtype,ab=!!wa.normalized,Db=wa.size|0,Cc=wa.offset|0,Ta=wa.stride|0,tc=wa.divisor|0);Dc=ca.location;Xb=K[Dc];if(1===rc){Xb.buffer||w.enableVertexAttribArray(Dc);Jc=Db||2;if(Xb.type!==kc||Xb.size!==Jc||Xb.buffer!==
Nc||Xb.normalized!==ab||Xb.offset!==Cc||Xb.stride!==Ta)w.bindBuffer(34962,Nc.buffer),w.vertexAttribPointer(Dc,Jc,kc,ab,Ta,Cc),Xb.type=kc,Xb.size=Jc,Xb.buffer=Nc,Xb.normalized=ab,Xb.offset=Cc,Xb.stride=Ta;Xb.divisor!==tc&&(ga.vertexAttribDivisorANGLE(Dc,tc),Xb.divisor=tc)}else if(Xb.buffer&&(w.disableVertexAttribArray(Dc),Xb.buffer=null),Xb.x!==ad||Xb.y!==Dd||Xb.z!==nd||Xb.w!==bc)w.vertexAttrib4f(Dc,ad,Dd,nd,bc),Xb.x=ad,Xb.y=Dd,Xb.z=nd,Xb.w=bc;ka.buffer=d.positionBuffer;Gb=!1;La=null;tb=0;Wa=!1;td=
ua=0;Ab=1;Sa=0;Tb=5126;fe=Ob=lc=cb=0;ia(ka)?(Gb=!0,La=N.createStream(34962,ka),Tb=La.dtype):(La=N.getBuffer(ka))?Tb=La.dtype:"constant"in ka?(Ab=2,"number"===typeof ka.constant?(lc=ka.constant,Ob=fe=cb=0):(lc=0<ka.constant.length?ka.constant[0]:0,Ob=1<ka.constant.length?ka.constant[1]:0,fe=2<ka.constant.length?ka.constant[2]:0,cb=3<ka.constant.length?ka.constant[3]:0)):(La=ia(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),Tb="type"in ka?E[ka.type]:La.dtype,Wa=!!ka.normalized,td=
ka.size|0,ua=ka.offset|0,Sa=ka.stride|0,tb=ka.divisor|0);$b=pa.location;Pb=K[$b];if(1===Ab){Pb.buffer||w.enableVertexAttribArray($b);hd=td||2;if(Pb.type!==Tb||Pb.size!==hd||Pb.buffer!==La||Pb.normalized!==Wa||Pb.offset!==ua||Pb.stride!==Sa)w.bindBuffer(34962,La.buffer),w.vertexAttribPointer($b,hd,Tb,Wa,Sa,ua),Pb.type=Tb,Pb.size=hd,Pb.buffer=La,Pb.normalized=Wa,Pb.offset=ua,Pb.stride=Sa;Pb.divisor!==tb&&(ga.vertexAttribDivisorANGLE($b,tb),Pb.divisor=tb)}else if(Pb.buffer&&(w.disableVertexAttribArray($b),
Pb.buffer=null),Pb.x!==lc||Pb.y!==Ob||Pb.z!==fe||Pb.w!==cb)w.vertexAttrib4f($b,lc,Ob,fe,cb),Pb.x=lc,Pb.y=Ob,Pb.z=fe,Pb.w=cb;l.buffer=d.positionBuffer;Qb=!1;Ma=null;nb=0;ub=!1;Pa=hb=0;qc=1;Rb=0;od=5126;ec=Kc=nc=db=0;ia(l)?(Qb=!0,Ma=N.createStream(34962,l),od=Ma.dtype):(Ma=N.getBuffer(l))?od=Ma.dtype:"constant"in l?(qc=2,"number"===typeof l.constant?(nc=l.constant,Kc=ec=db=0):(nc=0<l.constant.length?l.constant[0]:0,Kc=1<l.constant.length?l.constant[1]:0,ec=2<l.constant.length?l.constant[2]:0,db=3<l.constant.length?
l.constant[3]:0)):(Ma=ia(l.buffer)?N.createStream(34962,l.buffer):N.getBuffer(l.buffer),od="type"in l?E[l.type]:Ma.dtype,ub=!!l.normalized,Pa=l.size|0,hb=l.offset|0,Rb=l.stride|0,nb=l.divisor|0);jb=Fb.location;kb=K[jb];if(1===qc){kb.buffer||w.enableVertexAttribArray(jb);qa=Pa||2;if(kb.type!==od||kb.size!==qa||kb.buffer!==Ma||kb.normalized!==ub||kb.offset!==hb||kb.stride!==Rb)w.bindBuffer(34962,Ma.buffer),w.vertexAttribPointer(jb,qa,od,ub,Rb,hb),kb.type=od,kb.size=qa,kb.buffer=Ma,kb.normalized=ub,
kb.offset=hb,kb.stride=Rb;kb.divisor!==nb&&(ga.vertexAttribDivisorANGLE(jb,nb),kb.divisor=nb)}else if(kb.buffer&&(w.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==nc||kb.y!==Kc||kb.z!==ec||kb.w!==db)w.vertexAttrib4f(jb,nc,Kc,ec,db),kb.x=nc,kb.y=Kc,kb.z=ec,kb.w=db;v.buffer=d.colorBuffer;ob=!1;va=null;Ua=0;bb=!1;eb=Aa=0;Ja=1;Bb=0;zb=5126;Za=Ib=Mc=Ra=0;ia(v)?(ob=!0,va=N.createStream(34962,v),zb=va.dtype):(va=N.getBuffer(v))?zb=va.dtype:"constant"in v?(Ja=2,"number"===typeof v.constant?(Mc=v.constant,
Ib=Za=Ra=0):(Mc=0<v.constant.length?v.constant[0]:0,Ib=1<v.constant.length?v.constant[1]:0,Za=2<v.constant.length?v.constant[2]:0,Ra=3<v.constant.length?v.constant[3]:0)):(va=ia(v.buffer)?N.createStream(34962,v.buffer):N.getBuffer(v.buffer),zb="type"in v?E[v.type]:va.dtype,bb=!!v.normalized,eb=v.size|0,Aa=v.offset|0,Bb=v.stride|0,Ua=v.divisor|0);Sb=g.location;xa=K[Sb];if(1===Ja){xa.buffer||w.enableVertexAttribArray(Sb);Ve=eb||4;if(xa.type!==zb||xa.size!==Ve||xa.buffer!==va||xa.normalized!==bb||xa.offset!==
Aa||xa.stride!==Bb)w.bindBuffer(34962,va.buffer),w.vertexAttribPointer(Sb,Ve,zb,bb,Bb,Aa),xa.type=zb,xa.size=Ve,xa.buffer=va,xa.normalized=bb,xa.offset=Aa,xa.stride=Bb;xa.divisor!==Ua&&(ga.vertexAttribDivisorANGLE(Sb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(w.disableVertexAttribArray(Sb),xa.buffer=null),xa.x!==Mc||xa.y!==Ib||xa.z!==Za||xa.w!==Ra)w.vertexAttrib4f(Sb,Mc,Ib,Za,Ra),xa.x=Mc,xa.y=Ib,xa.z=Za,xa.w=Ra;T.buffer=d.colorBuffer;Ka=!1;Lb=null;fb=0;ib=!1;fc=ya=0;Ea=1;pb=0;qb=5126;xc=oc=Ya=Xa=0;ia(T)?
(Ka=!0,Lb=N.createStream(34962,T),qb=Lb.dtype):(Lb=N.getBuffer(T))?qb=Lb.dtype:"constant"in T?(Ea=2,"number"===typeof T.constant?(Ya=T.constant,oc=xc=Xa=0):(Ya=0<T.constant.length?T.constant[0]:0,oc=1<T.constant.length?T.constant[1]:0,xc=2<T.constant.length?T.constant[2]:0,Xa=3<T.constant.length?T.constant[3]:0)):(Lb=ia(T.buffer)?N.createStream(34962,T.buffer):N.getBuffer(T.buffer),qb="type"in T?E[T.type]:Lb.dtype,ib=!!T.normalized,fc=T.size|0,ya=T.offset|0,pb=T.stride|0,fb=T.divisor|0);vc=R.location;
Va=K[vc];if(1===Ea){Va.buffer||w.enableVertexAttribArray(vc);Yb=fc||4;if(Va.type!==qb||Va.size!==Yb||Va.buffer!==Lb||Va.normalized!==ib||Va.offset!==ya||Va.stride!==pb)w.bindBuffer(34962,Lb.buffer),w.vertexAttribPointer(vc,Yb,qb,ib,pb,ya),Va.type=qb,Va.size=Yb,Va.buffer=Lb,Va.normalized=ib,Va.offset=ya,Va.stride=pb;Va.divisor!==fb&&(ga.vertexAttribDivisorANGLE(vc,fb),Va.divisor=fb)}else if(Va.buffer&&(w.disableVertexAttribArray(vc),Va.buffer=null),Va.x!==Ya||Va.y!==oc||Va.z!==xc||Va.w!==Xa)w.vertexAttrib4f(vc,
Ya,oc,xc,Xa),Va.x=Ya,Va.y=oc,Va.z=xc,Va.w=Xa;Tc=da.location;Ga=K[Tc];Ga.buffer||w.enableVertexAttribArray(Tc);if(5126!==Ga.type||1!==Ga.size||Ga.buffer!==f||!1!==Ga.normalized||0!==Ga.offset||8!==Ga.stride)w.bindBuffer(34962,f.buffer),w.vertexAttribPointer(Tc,1,5126,!1,8,0),Ga.type=5126,Ga.size=1,Ga.buffer=f,Ga.normalized=!1,Ga.offset=0,Ga.stride=8;0!==Ga.divisor&&(ga.vertexAttribDivisorANGLE(Tc,0),Ga.divisor=0);zc=a.location;Qa=K[zc];Qa.buffer||w.enableVertexAttribArray(zc);if(5126!==Qa.type||1!==
Qa.size||Qa.buffer!==c||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)w.bindBuffer(34962,c.buffer),w.vertexAttribPointer(zc,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=c,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(ga.vertexAttribDivisorANGLE(zc,0),Qa.divisor=0);Ba=d.scale;w.uniform2f(ac.location,Ba[0],Ba[1]);lb=d.translate;w.uniform2f(Na.location,lb[0],lb[1]);w.uniform1f(ra.location,d.thickness);w.uniform1f(L.location,d.depth);vb=y.call(this,S,d,0);w.uniform4f(Y.location,vb[0],
vb[1],vb[2],vb[3]);w.uniform1f(e.location,d.miterLimit);Cb=b.call(this,S,d,0);w.uniform1f(X.location,Cb);w.uniform1f(m.location,d.dashLength);w.uniform1f(fd.location,d.opacity);(rb=d.dashTexture)&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);wc=rb._texture;w.uniform1i(la.location,wc.bind());(wb=O.elements)?w.bindBuffer(34963,wb.buffer.buffer):dc.currentVAO&&(wb=Wb.getElements(dc.currentVAO.elements))&&w.bindBuffer(34963,wb.buffer.buffer);Jd=d.count;0<Jd?wb?ga.drawElementsInstancedANGLE(5,4,wb.type,
0<<(wb.type-5121>>1),Jd):ga.drawArraysInstancedANGLE(5,0,4,Jd):0>Jd&&(wb?w.drawElements(5,4,wb.type,0<<(wb.type-5121>>1)):w.drawArrays(5,0,4));na.dirty=!0;dc.setVAO(null);S.viewportWidth=I;S.viewportHeight=H;Ca&&(V.cpuTime+=performance.now()-za);ta&&N.destroyStream(sb);gd&&N.destroyStream(Nc);Gb&&N.destroyStream(La);Qb&&N.destroyStream(Ma);ob&&N.destroyStream(va);Ka&&N.destroyStream(Lb);wc.unbind()},scope:function(a,b,e){var d,g,h,k,m,n,q,x,w,y,G,z,D,Z,L,R,K,P,F,Q,W,ca,ja,Y,ha,X,ea,sa,pc,da,Ca,la,
ma,Da,ab,wd,Db,pa,Ta,kc,bc,ra,yc,Sc,Dc,Xb,Jc,Gb,La,tb,Wa,ua,ic,Ab,Sa,Tb,cb,sc,Ob,$a,$b,Pb,Na,Qb,Ma,nb,ub,hb,Pa,qc,Rb,Yc,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Wb,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Fb,uc,dc,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,ac,Vd,fd,Vb,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Te,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Ye,ve,ne,Ke,Le,He,qe,ye,
Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf,rf,of,sf,Bf,Cf,Je,xe,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;d=a.viewport;g=d.x|0;h=d.y|0;k="width"in d?d.width|0:S.framebufferWidth-g;m="height"in d?d.height|0:S.framebufferHeight-h;n=S.viewportWidth;S.viewportWidth=k;q=S.viewportHeight;S.viewportHeight=m;x=fa[0];fa[0]=g;w=fa[1];fa[1]=h;y=fa[2];fa[2]=k;G=fa[3];fa[3]=m;z=Ia[0];Ia[0]=0;D=Ia[1];Ia[1]=0;Z=Ia[2];Ia[2]=0;L=Ia[3];Ia[3]=0;R=ba.blend_enable;ba.blend_enable=
!0;K=gb[0];gb[0]=32774;P=gb[1];gb[1]=32774;F=ta[0];ta[0]=770;Q=ta[1];ta[1]=771;W=ta[2];ta[2]=773;ca=ta[3];ta[3]=1;ja=ba.cull_enable;ba.cull_enable=!0;Y=ba.cull_face;ba.cull_face=1029;ha=t.call(this,S,a,e);X=ba.depth_enable;ba.depth_enable=ha;ea=a.viewport;sa=ea.x|0;pc=ea.y|0;da="width"in ea?ea.width|0:S.framebufferWidth-sa;Ca="height"in ea?ea.height|0:S.framebufferHeight-pc;la=sb[0];sb[0]=sa;ma=sb[1];sb[1]=pc;Da=sb[2];sb[2]=da;ab=sb[3];sb[3]=Ca;wd=ba.scissor_enable;ba.scissor_enable=!0;Db=ba.stencil_enable;
ba.stencil_enable=!1;if(pa=na.profile)Ta=performance.now(),V.count++;kc=O.offset;O.offset=0;bc=O.count;O.count=4;ra=a.count;yc=O.instances;O.instances=ra;Sc=O.primitive;O.primitive=5;Dc=a.dashLength;Xb=Oa[23];Oa[23]=Dc;Jc=a.dashTexture;Gb=Oa[24];Oa[24]=Jc;La=a.depth;tb=Oa[22];Oa[22]=La;Wa=a.id;ua=Oa[31];Oa[31]=Wa;ic=a.miterLimit;Ab=Oa[32];Oa[32]=ic;Sa=C.call(this,S,a,e);Tb=Oa[33];Oa[33]=Sa;cb=a.opacity;sc=Oa[10];Oa[10]=cb;Ob=S.pixelRatio;$a=Oa[34];Oa[34]=Ob;$b=a.scale;Pb=Oa[6];Oa[6]=$b;Na=a.scaleFract;
Qb=Oa[7];Oa[7]=Na;Ma=a.thickness;nb=Oa[21];Oa[21]=Ma;ub=a.translate;hb=Oa[8];Oa[8]=ub;Pa=a.translateFract;qc=Oa[9];Oa[9]=Pa;Rb=A.call(this,S,a,e);Yc=Oa[3];Oa[3]=Rb;v.buffer=a.colorBuffer;db=!1;nc=null;Kc=0;ec=!1;kb=jb=0;qa=1;ob=0;va=5126;eb=Aa=bb=Ua=0;ia(v)?(db=!0,nc=N.createStream(34962,v),va=nc.dtype):(nc=N.getBuffer(v))?va=nc.dtype:"constant"in v?(qa=2,"number"===typeof v.constant?(bb=v.constant,Aa=eb=Ua=0):(bb=0<v.constant.length?v.constant[0]:0,Aa=1<v.constant.length?v.constant[1]:0,eb=2<v.constant.length?
v.constant[2]:0,Ua=3<v.constant.length?v.constant[3]:0)):(nc=ia(v.buffer)?N.createStream(34962,v.buffer):N.getBuffer(v.buffer),va="type"in v?E[v.type]:nc.dtype,ec=!!v.normalized,kb=v.size|0,jb=v.offset|0,ob=v.stride|0,Kc=v.divisor|0);Ja=H.buffer;H.buffer=nc;Bb=H.divisor;H.divisor=Kc;zb=H.normalized;H.normalized=ec;Ra=H.offset;H.offset=jb;Mc=H.size;H.size=kb;Ib=H.state;H.state=qa;Za=H.stride;H.stride=ob;Sb=H.type;H.type=va;xa=H.w;H.w=Ua;Wb=H.x;H.x=bb;Ka=H.y;H.y=Aa;Lb=H.z;H.z=eb;aa.buffer=a.positionBuffer;
fb=!1;ib=null;ya=0;fc=!1;pb=Ea=0;qb=1;Xa=0;Ya=5126;Va=vc=xc=oc=0;ia(aa)?(fb=!0,ib=N.createStream(34962,aa),Ya=ib.dtype):(ib=N.getBuffer(aa))?Ya=ib.dtype:"constant"in aa?(qb=2,"number"===typeof aa.constant?(xc=aa.constant,vc=Va=oc=0):(xc=0<aa.constant.length?aa.constant[0]:0,vc=1<aa.constant.length?aa.constant[1]:0,Va=2<aa.constant.length?aa.constant[2]:0,oc=3<aa.constant.length?aa.constant[3]:0)):(ib=ia(aa.buffer)?N.createStream(34962,aa.buffer):N.getBuffer(aa.buffer),Ya="type"in aa?E[aa.type]:ib.dtype,
fc=!!aa.normalized,pb=aa.size|0,Ea=aa.offset|0,Xa=aa.stride|0,ya=aa.divisor|0);Yb=J.buffer;J.buffer=ib;Tc=J.divisor;J.divisor=ya;Ga=J.normalized;J.normalized=fc;zc=J.offset;J.offset=Ea;Qa=J.size;J.size=pb;Ba=J.state;J.state=qb;lb=J.stride;J.stride=Xa;vb=J.type;J.type=Ya;Cb=J.w;J.w=oc;rb=J.x;J.x=xc;wc=J.y;J.y=vc;wb=J.z;J.z=Va;T.buffer=a.colorBuffer;Fb=!1;uc=null;dc=0;Oc=!1;ud=id=0;Ub=1;cc=0;Mb=5126;xb=mb=Zb=Ha=0;ia(T)?(Fb=!0,uc=N.createStream(34962,T),Mb=uc.dtype):(uc=N.getBuffer(T))?Mb=uc.dtype:"constant"in
T?(Ub=2,"number"===typeof T.constant?(Zb=T.constant,mb=xb=Ha=0):(Zb=0<T.constant.length?T.constant[0]:0,mb=1<T.constant.length?T.constant[1]:0,xb=2<T.constant.length?T.constant[2]:0,Ha=3<T.constant.length?T.constant[3]:0)):(uc=ia(T.buffer)?N.createStream(34962,T.buffer):N.getBuffer(T.buffer),Mb="type"in T?E[T.type]:uc.dtype,Oc=!!T.normalized,ud=T.size|0,id=T.offset|0,cc=T.stride|0,dc=T.divisor|0);Kb=u.buffer;u.buffer=uc;Nb=u.divisor;u.divisor=dc;gc=u.normalized;u.normalized=Oc;jc=u.offset;u.offset=
id;Uc=u.size;u.size=ud;Ec=u.state;u.state=Ub;Fc=u.stride;u.stride=cc;Hc=u.type;u.type=Mb;Pc=u.w;u.w=Ha;cd=u.x;u.x=Zb;Vc=u.y;u.y=mb;Qc=u.z;u.z=xb;wa.buffer=a.positionBuffer;Jb=!1;Eb=null;Rc=0;Lc=!1;hc=Wc=0;Zc=1;jd=0;vd=5126;Vd=ac=$c=oe=0;ia(wa)?(Jb=!0,Eb=N.createStream(34962,wa),vd=Eb.dtype):(Eb=N.getBuffer(wa))?vd=Eb.dtype:"constant"in wa?(Zc=2,"number"===typeof wa.constant?($c=wa.constant,ac=Vd=oe=0):($c=0<wa.constant.length?wa.constant[0]:0,ac=1<wa.constant.length?wa.constant[1]:0,Vd=2<wa.constant.length?
wa.constant[2]:0,oe=3<wa.constant.length?wa.constant[3]:0)):(Eb=ia(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),vd="type"in wa?E[wa.type]:Eb.dtype,Lc=!!wa.normalized,hc=wa.size|0,Wc=wa.offset|0,jd=wa.stride|0,Rc=wa.divisor|0);fd=B.buffer;B.buffer=Eb;Vb=B.divisor;B.divisor=Rc;le=B.normalized;B.normalized=Lc;Gd=B.offset;B.offset=Wc;Ed=B.size;B.size=hc;ed=B.state;B.state=Zc;Ic=B.stride;B.stride=jd;pd=B.type;B.type=vd;kd=B.w;B.w=oe;bd=B.x;B.x=$c;ld=B.y;B.y=ac;Bd=B.z;B.z=Vd;yd=M.buffer;
M.buffer=f;Te=M.divisor;M.divisor=0;me=M.normalized;M.normalized=!1;te=M.offset;M.offset=0;ce=M.size;M.size=0;be=M.state;M.state=1;ae=M.stride;M.stride=8;ue=M.type;M.type=5126;Yd=M.w;M.w=0;ge=M.x;M.x=0;Ac=M.y;M.y=0;Xc=M.z;M.z=0;pe=r.buffer;r.buffer=c;ie=r.divisor;r.divisor=0;Fd=r.normalized;r.normalized=!1;Id=r.offset;r.offset=4;Kd=r.size;r.size=0;Ld=r.state;r.state=1;he=r.stride;r.stride=8;Ye=r.type;r.type=5126;ve=r.w;r.w=0;ne=r.x;r.x=0;Ke=r.y;r.y=0;Le=r.z;r.z=0;ka.buffer=a.positionBuffer;He=!1;
qe=null;ye=0;Ce=!1;Ee=De=0;ze=1;Hd=0;Pd=5126;Ad=Fe=Zd=Wd=0;ia(ka)?(He=!0,qe=N.createStream(34962,ka),Pd=qe.dtype):(qe=N.getBuffer(ka))?Pd=qe.dtype:"constant"in ka?(ze=2,"number"===typeof ka.constant?(Zd=ka.constant,Fe=Ad=Wd=0):(Zd=0<ka.constant.length?ka.constant[0]:0,Fe=1<ka.constant.length?ka.constant[1]:0,Ad=2<ka.constant.length?ka.constant[2]:0,Wd=3<ka.constant.length?ka.constant[3]:0)):(qe=ia(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),Pd="type"in ka?E[ka.type]:qe.dtype,
Ce=!!ka.normalized,Ee=ka.size|0,De=ka.offset|0,Hd=ka.stride|0,ye=ka.divisor|0);Md=I.buffer;I.buffer=qe;we=I.divisor;I.divisor=ye;Ge=I.normalized;I.normalized=Ce;gf=I.offset;I.offset=De;We=I.size;I.size=Ee;Me=I.state;I.state=ze;Ie=I.stride;I.stride=Hd;Ue=I.type;I.type=Pd;Qe=I.w;I.w=Wd;Ne=I.x;I.x=Zd;Oe=I.y;I.y=Fe;Nd=I.z;I.z=Ad;l.buffer=a.positionBuffer;Ud=!1;Pe=null;hf=0;nf=!1;jf=df=0;kf=1;lf=0;rf=5126;Cf=Bf=sf=of=0;ia(l)?(Ud=!0,Pe=N.createStream(34962,l),rf=Pe.dtype):(Pe=N.getBuffer(l))?rf=Pe.dtype:
"constant"in l?(kf=2,"number"===typeof l.constant?(sf=l.constant,Bf=Cf=of=0):(sf=0<l.constant.length?l.constant[0]:0,Bf=1<l.constant.length?l.constant[1]:0,Cf=2<l.constant.length?l.constant[2]:0,of=3<l.constant.length?l.constant[3]:0)):(Pe=ia(l.buffer)?N.createStream(34962,l.buffer):N.getBuffer(l.buffer),rf="type"in l?E[l.type]:Pe.dtype,nf=!!l.normalized,jf=l.size|0,df=l.offset|0,lf=l.stride|0,hf=l.divisor|0);Je=oa.buffer;oa.buffer=Pe;xe=oa.divisor;oa.divisor=hf;pf=oa.normalized;oa.normalized=nf;
qf=oa.offset;oa.offset=df;Df=oa.size;oa.size=jf;Gf=oa.state;oa.state=kf;Af=oa.stride;oa.stride=lf;Ef=oa.type;oa.type=rf;Ff=oa.w;oa.w=of;wf=oa.x;oa.x=sf;xf=oa.y;oa.y=Bf;vf=oa.z;oa.z=Cf;yf=Fa.vert;Fa.vert=36;zf=Fa.frag;Fa.frag=35;na.dirty=!0;b(S,a,e);S.viewportWidth=n;S.viewportHeight=q;fa[0]=x;fa[1]=w;fa[2]=y;fa[3]=G;Ia[0]=z;Ia[1]=D;Ia[2]=Z;Ia[3]=L;ba.blend_enable=R;gb[0]=K;gb[1]=P;ta[0]=F;ta[1]=Q;ta[2]=W;ta[3]=ca;ba.cull_enable=ja;ba.cull_face=Y;ba.depth_enable=X;sb[0]=la;sb[1]=ma;sb[2]=Da;sb[3]=
ab;ba.scissor_enable=wd;ba.stencil_enable=Db;pa&&(V.cpuTime+=performance.now()-Ta);O.offset=kc;O.count=bc;O.instances=yc;O.primitive=Sc;Oa[23]=Xb;Oa[24]=Gb;Oa[22]=tb;Oa[31]=ua;Oa[32]=Ab;Oa[33]=Tb;Oa[10]=sc;Oa[34]=$a;Oa[6]=Pb;Oa[7]=Qb;Oa[21]=nb;Oa[8]=hb;Oa[9]=qc;Oa[3]=Yc;db&&N.destroyStream(nc);H.buffer=Ja;H.divisor=Bb;H.normalized=zb;H.offset=Ra;H.size=Mc;H.state=Ib;H.stride=Za;H.type=Sb;H.w=xa;H.x=Wb;H.y=Ka;H.z=Lb;fb&&N.destroyStream(ib);J.buffer=Yb;J.divisor=Tc;J.normalized=Ga;J.offset=zc;J.size=
Qa;J.state=Ba;J.stride=lb;J.type=vb;J.w=Cb;J.x=rb;J.y=wc;J.z=wb;Fb&&N.destroyStream(uc);u.buffer=Kb;u.divisor=Nb;u.normalized=gc;u.offset=jc;u.size=Uc;u.state=Ec;u.stride=Fc;u.type=Hc;u.w=Pc;u.x=cd;u.y=Vc;u.z=Qc;Jb&&N.destroyStream(Eb);B.buffer=fd;B.divisor=Vb;B.normalized=le;B.offset=Gd;B.size=Ed;B.state=ed;B.stride=Ic;B.type=pd;B.w=kd;B.x=bd;B.y=ld;B.z=Bd;M.buffer=yd;M.divisor=Te;M.normalized=me;M.offset=te;M.size=ce;M.state=be;M.stride=ae;M.type=ue;M.w=Yd;M.x=ge;M.y=Ac;M.z=Xc;r.buffer=pe;r.divisor=
ie;r.normalized=Fd;r.offset=Id;r.size=Kd;r.state=Ld;r.stride=he;r.type=Ye;r.w=ve;r.x=ne;r.y=Ke;r.z=Le;He&&N.destroyStream(qe);I.buffer=Md;I.divisor=we;I.normalized=Ge;I.offset=gf;I.size=We;I.state=Me;I.stride=Ie;I.type=Ue;I.w=Qe;I.x=Ne;I.y=Oe;I.z=Nd;Ud&&N.destroyStream(Pe);oa.buffer=Je;oa.divisor=xe;oa.normalized=pf;oa.offset=qf;oa.size=Df;oa.state=Gf;oa.stride=Af;oa.type=Ef;oa.w=Ff;oa.x=wf;oa.y=xf;oa.z=vf;Fa.vert=yf;Fa.frag=zf;na.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(d,
V,q,z,f,c,y,b,t,C,A,H,J,u,B,M,r,I,oa){var F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,fd,Fb,ac,ra,Na,Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta;F=d.attributes;Ca=d.buffer;k=d.context;h=d.current;g=d.draw;n=d.elements;R=d.extensions;ca=d.framebuffer;m=d.gl;la=d.isBufferArgs;L=d.next;da=d.shader;a=d.uniforms;e=d.vao;X=L.blend_color;pa=h.blend_color;fd=L.blend_equation;Fb=h.blend_equation;ac=L.blend_func;ra=h.blend_func;Na=L.colorMask;Y=h.colorMask;K=L.depth_range;N=h.depth_range;S=L.polygonOffset_offset;
na=h.polygonOffset_offset;O=L.sample_coverage;Wb=h.sample_coverage;$a=L.scissor_box;P=h.scissor_box;w=L.stencil_func;ia=h.stencil_func;ba=L.stencil_opBack;Fa=h.stencil_opBack;Oa=L.stencil_opFront;dc=h.stencil_opFront;Ia=L.viewport;W=h.viewport;gb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ea={offset:8,stride:8};ta={offset:8,stride:8};return{batch:function(a,b){var c,d,f,q,y,z;c=ca.next;c!==ca.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,
null),ca.cur=c);if(h.dirty){var X,da,Sc,Ia,D,x,ha,sa,Q,fa,ma,E,v,aa,T,wa,ka,l,mc,U,p,Hb,yb,$a,ac,fd,$d,xd,Vb,Gc,de,se;X=L.dither;X!==h.dither&&(X?m.enable(3024):m.disable(3024),h.dither=X);da=L.depth_func;da!==h.depth_func&&(m.depthFunc(da),h.depth_func=da);Sc=K[0];Ia=K[1];if(Sc!==N[0]||Ia!==N[1])m.depthRange(Sc,Ia),N[0]=Sc,N[1]=Ia;D=L.depth_mask;D!==h.depth_mask&&(m.depthMask(D),h.depth_mask=D);x=Na[0];ha=Na[1];sa=Na[2];Q=Na[3];if(x!==Y[0]||ha!==Y[1]||sa!==Y[2]||Q!==Y[3])m.colorMask(x,ha,sa,Q),Y[0]=
x,Y[1]=ha,Y[2]=sa,Y[3]=Q;fa=L.cull_enable;fa!==h.cull_enable&&(fa?m.enable(2884):m.disable(2884),h.cull_enable=fa);ma=L.cull_face;ma!==h.cull_face&&(m.cullFace(ma),h.cull_face=ma);E=L.frontFace;E!==h.frontFace&&(m.frontFace(E),h.frontFace=E);v=L.lineWidth;v!==h.lineWidth&&(m.lineWidth(v),h.lineWidth=v);aa=L.polygonOffset_enable;aa!==h.polygonOffset_enable&&(aa?m.enable(32823):m.disable(32823),h.polygonOffset_enable=aa);T=S[0];wa=S[1];if(T!==na[0]||wa!==na[1])m.polygonOffset(T,wa),na[0]=T,na[1]=wa;
ka=L.sample_alpha;ka!==h.sample_alpha&&(ka?m.enable(32926):m.disable(32926),h.sample_alpha=ka);l=L.sample_enable;l!==h.sample_enable&&(l?m.enable(32928):m.disable(32928),h.sample_enable=l);mc=O[0];U=O[1];if(mc!==Wb[0]||U!==Wb[1])m.sampleCoverage(mc,U),Wb[0]=mc,Wb[1]=U;p=L.stencil_mask;p!==h.stencil_mask&&(m.stencilMask(p),h.stencil_mask=p);Hb=w[0];yb=w[1];$a=w[2];if(Hb!==ia[0]||yb!==ia[1]||$a!==ia[2])m.stencilFunc(Hb,yb,$a),ia[0]=Hb,ia[1]=yb,ia[2]=$a;ac=Oa[0];fd=Oa[1];$d=Oa[2];xd=Oa[3];if(ac!==dc[0]||
fd!==dc[1]||$d!==dc[2]||xd!==dc[3])m.stencilOpSeparate(ac,fd,$d,xd),dc[0]=ac,dc[1]=fd,dc[2]=$d,dc[3]=xd;Vb=ba[0];Gc=ba[1];de=ba[2];se=ba[3];if(Vb!==Fa[0]||Gc!==Fa[1]||de!==Fa[2]||se!==Fa[3])m.stencilOpSeparate(Vb,Gc,de,se),Fa[0]=Vb,Fa[1]=Gc,Fa[2]=de,Fa[3]=se}m.blendColor(0,0,0,0);pa[0]=0;pa[1]=0;pa[2]=0;pa[3]=0;m.enable(3042);h.blend_enable=!0;m.blendEquationSeparate(32774,32774);Fb[0]=32774;Fb[1]=32774;m.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;m.disable(2929);h.depth_enable=
!1;m.enable(3089);h.scissor_enable=!0;m.disable(2960);h.stencil_enable=!1;if(d=h.profile)f=performance.now(),V.count+=b;m.useProgram(t.program);q=R.angle_instanced_arrays;var Od;e.setVAO(null);Od=g.instances;for(y=0;y<b;++y){z=a[y];var Qd,Xd,ee,Ze,mf,cf,zd,Be,Rd,Sd,ke,Se,rd,md,Cd,qd,dd,Bc,sd,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb;Qd=z.viewport;Xd=Qd.x|
0;ee=Qd.y|0;Ze="width"in Qd?Qd.width|0:k.framebufferWidth-Xd;mf="height"in Qd?Qd.height|0:k.framebufferHeight-ee;cf=k.viewportWidth;k.viewportWidth=Ze;zd=k.viewportHeight;k.viewportHeight=mf;m.viewport(Xd,ee,Ze,mf);W[0]=Xd;W[1]=ee;W[2]=Ze;W[3]=mf;Be=z.viewport;Rd=Be.x|0;Sd=Be.y|0;ke="width"in Be?Be.width|0:k.framebufferWidth-Rd;Se="height"in Be?Be.height|0:k.framebufferHeight-Sd;m.scissor(Rd,Sd,ke,Se);P[0]=Rd;P[1]=Sd;P[2]=ke;P[3]=Se;ea.buffer=z.positionBuffer;rd=!1;md=null;Cd=0;qd=!1;Bc=dd=0;sd=1;
gd=0;Nc=5126;Db=Cc=ab=tc=0;la(ea)?(rd=!0,md=Ca.createStream(34962,ea),Nc=md.dtype):(md=Ca.getBuffer(ea))?Nc=md.dtype:"constant"in ea?(sd=2,"number"===typeof ea.constant?(ab=ea.constant,Cc=Db=tc=0):(ab=0<ea.constant.length?ea.constant[0]:0,Cc=1<ea.constant.length?ea.constant[1]:0,Db=2<ea.constant.length?ea.constant[2]:0,tc=3<ea.constant.length?ea.constant[3]:0)):(md=la(ea.buffer)?Ca.createStream(34962,ea.buffer):Ca.getBuffer(ea.buffer),Nc="type"in ea?gb[ea.type]:md.dtype,qd=!!ea.normalized,Bc=ea.size|
0,dd=ea.offset|0,gd=ea.stride|0,Cd=ea.divisor|0);rc=u.location;Ta=F[rc];if(1===sd){Ta.buffer||m.enableVertexAttribArray(rc);kc=Bc||2;if(Ta.type!==Nc||Ta.size!==kc||Ta.buffer!==md||Ta.normalized!==qd||Ta.offset!==dd||Ta.stride!==gd)m.bindBuffer(34962,md.buffer),m.vertexAttribPointer(rc,kc,Nc,qd,gd,dd),Ta.type=Nc,Ta.size=kc,Ta.buffer=md,Ta.normalized=qd,Ta.offset=dd,Ta.stride=gd;Ta.divisor!==Cd&&(q.vertexAttribDivisorANGLE(rc,Cd),Ta.divisor=Cd)}else if(Ta.buffer&&(m.disableVertexAttribArray(rc),Ta.buffer=
null),Ta.x!==ab||Ta.y!==Cc||Ta.z!==Db||Ta.w!==tc)m.vertexAttrib4f(rc,ab,Cc,Db,tc),Ta.x=ab,Ta.y=Cc,Ta.z=Db,Ta.w=tc;ta.buffer=z.positionFractBuffer;bc=!1;ad=null;Dd=0;nd=!1;Xb=Dc=0;Jc=1;Gb=0;La=5126;td=ua=Wa=tb=0;la(ta)?(bc=!0,ad=Ca.createStream(34962,ta),La=ad.dtype):(ad=Ca.getBuffer(ta))?La=ad.dtype:"constant"in ta?(Jc=2,"number"===typeof ta.constant?(Wa=ta.constant,ua=td=tb=0):(Wa=0<ta.constant.length?ta.constant[0]:0,ua=1<ta.constant.length?ta.constant[1]:0,td=2<ta.constant.length?ta.constant[2]:
0,tb=3<ta.constant.length?ta.constant[3]:0)):(ad=la(ta.buffer)?Ca.createStream(34962,ta.buffer):Ca.getBuffer(ta.buffer),La="type"in ta?gb[ta.type]:ad.dtype,nd=!!ta.normalized,Xb=ta.size|0,Dc=ta.offset|0,Gb=ta.stride|0,Dd=ta.divisor|0);Ab=B.location;Sa=F[Ab];if(1===Jc){Sa.buffer||m.enableVertexAttribArray(Ab);Tb=Xb||2;if(Sa.type!==La||Sa.size!==Tb||Sa.buffer!==ad||Sa.normalized!==nd||Sa.offset!==Dc||Sa.stride!==Gb)m.bindBuffer(34962,ad.buffer),m.vertexAttribPointer(Ab,Tb,La,nd,Gb,Dc),Sa.type=La,Sa.size=
Tb,Sa.buffer=ad,Sa.normalized=nd,Sa.offset=Dc,Sa.stride=Gb;Sa.divisor!==Dd&&(q.vertexAttribDivisorANGLE(Ab,Dd),Sa.divisor=Dd)}else if(Sa.buffer&&(m.disableVertexAttribArray(Ab),Sa.buffer=null),Sa.x!==Wa||Sa.y!==ua||Sa.z!==td||Sa.w!==tb)m.vertexAttrib4f(Ab,Wa,ua,td,tb),Sa.x=Wa,Sa.y=ua,Sa.z=td,Sa.w=tb;cb=z.fill;lc=cb[0];fe=cb[1];Pb=cb[2];Qb=cb[3];y&&Ob===lc&&$b===fe&&hd===Pb&&Ma===Qb||(Ob=lc,$b=fe,hd=Pb,Ma=Qb,m.uniform4f(A.location,lc,fe,Pb,Qb));nb=z.scale;ub=nb[0];Pa=nb[1];y&&hb===ub&&qc===Pa||(hb=
ub,qc=Pa,m.uniform2f(M.location,ub,Pa));Rb=z.scaleFract;od=Rb[0];nc=Rb[1];y&&db===od&&Kc===nc||(db=od,Kc=nc,m.uniform2f(r.location,od,nc));ec=z.translate;jb=ec[0];qa=ec[1];y&&kb===jb&&ob===qa||(kb=jb,ob=qa,m.uniform2f(I.location,jb,qa));va=z.translateFract;Ua=va[0];Aa=va[1];y&&bb===Ua&&eb===Aa||(bb=Ua,eb=Aa,m.uniform2f(oa.location,Ua,Aa));Ja=z.id;y&&Bb===Ja||(Bb=Ja,m.uniform1f(H.location,Ja));zb=z.opacity;y&&Ra===zb||(Ra=zb,m.uniform1f(J.location,zb));Mc=C.call(this,k,z,y);Ib=null;(Ib=(Za=la(Mc))?
n.createStream(Mc):n.getElements(Mc))&&m.bindBuffer(34963,Ib.buffer.buffer);if(Sb=Ib?Ib.vertCount:-1)0<Od?Ib?q.drawElementsInstancedANGLE(4,Sb,Ib.type,0<<(Ib.type-5121>>1),Od):q.drawArraysInstancedANGLE(4,0,Sb,Od):0>Od&&(Ib?m.drawElements(4,Sb,Ib.type,0<<(Ib.type-5121>>1)):m.drawArrays(4,0,Sb)),k.viewportWidth=cf,k.viewportHeight=zd,rd&&Ca.destroyStream(md),bc&&Ca.destroyStream(ad),Za&&n.destroyStream(Ib)}h.dirty=!0;e.setVAO(null);d&&(V.cpuTime+=performance.now()-f)},draw:function(a){var b,c,d,f,
t,y,C,X,da,ga,Ia,D,x,ha,sa,Q,fa,ma,E,v,aa,T;b=ca.next;b!==ca.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),ca.cur=b);if(h.dirty){b=L.dither;b!==h.dither&&(b?m.enable(3024):m.disable(3024),h.dither=b);b=L.depth_func;b!==h.depth_func&&(m.depthFunc(b),h.depth_func=b);b=K[0];y=K[1];if(b!==N[0]||y!==N[1])m.depthRange(b,y),N[0]=b,N[1]=y;b=L.depth_mask;b!==h.depth_mask&&(m.depthMask(b),h.depth_mask=b);b=Na[0];y=Na[1];c=Na[2];d=Na[3];if(b!==Y[0]||y!==Y[1]||c!==Y[2]||d!==Y[3])m.colorMask(b,
y,c,d),Y[0]=b,Y[1]=y,Y[2]=c,Y[3]=d;b=L.cull_enable;b!==h.cull_enable&&(b?m.enable(2884):m.disable(2884),h.cull_enable=b);b=L.cull_face;b!==h.cull_face&&(m.cullFace(b),h.cull_face=b);b=L.frontFace;b!==h.frontFace&&(m.frontFace(b),h.frontFace=b);b=L.lineWidth;b!==h.lineWidth&&(m.lineWidth(b),h.lineWidth=b);b=L.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?m.enable(32823):m.disable(32823),h.polygonOffset_enable=b);b=S[0];y=S[1];if(b!==na[0]||y!==na[1])m.polygonOffset(b,y),na[0]=b,na[1]=y;b=L.sample_alpha;
b!==h.sample_alpha&&(b?m.enable(32926):m.disable(32926),h.sample_alpha=b);b=L.sample_enable;b!==h.sample_enable&&(b?m.enable(32928):m.disable(32928),h.sample_enable=b);b=O[0];y=O[1];if(b!==Wb[0]||y!==Wb[1])m.sampleCoverage(b,y),Wb[0]=b,Wb[1]=y;b=L.stencil_mask;b!==h.stencil_mask&&(m.stencilMask(b),h.stencil_mask=b);b=w[0];y=w[1];c=w[2];if(b!==ia[0]||y!==ia[1]||c!==ia[2])m.stencilFunc(b,y,c),ia[0]=b,ia[1]=y,ia[2]=c;b=Oa[0];y=Oa[1];c=Oa[2];d=Oa[3];if(b!==dc[0]||y!==dc[1]||c!==dc[2]||d!==dc[3])m.stencilOpSeparate(b,
y,c,d),dc[0]=b,dc[1]=y,dc[2]=c,dc[3]=d;b=ba[0];y=ba[1];c=ba[2];d=ba[3];if(b!==Fa[0]||y!==Fa[1]||c!==Fa[2]||d!==Fa[3])m.stencilOpSeparate(b,y,c,d),Fa[0]=b,Fa[1]=y,Fa[2]=c,Fa[3]=d}b=a.viewport;c=b.x|0;d=b.y|0;f="width"in b?b.width|0:k.framebufferWidth-c;t="height"in b?b.height|0:k.framebufferHeight-d;b=k.viewportWidth;k.viewportWidth=f;y=k.viewportHeight;k.viewportHeight=t;m.viewport(c,d,f,t);W[0]=c;W[1]=d;W[2]=f;W[3]=t;m.blendColor(0,0,0,0);pa[0]=0;pa[1]=0;pa[2]=0;pa[3]=0;m.enable(3042);h.blend_enable=
!0;m.blendEquationSeparate(32774,32774);Fb[0]=32774;Fb[1]=32774;m.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;m.disable(2929);h.depth_enable=!1;t=a.viewport;c=t.x|0;d=t.y|0;f="width"in t?t.width|0:k.framebufferWidth-c;t="height"in t?t.height|0:k.framebufferHeight-d;m.scissor(c,d,f,t);P[0]=c;P[1]=d;P[2]=f;P[3]=t;m.enable(3089);h.scissor_enable=!0;m.disable(2960);h.stencil_enable=!1;if(c=h.profile)C=performance.now(),V.count++;m.useProgram(q.program);d=R.angle_instanced_arrays;
e.setVAO(null);ea.buffer=a.positionBuffer;f=!1;X=0;da=!1;Ia=ga=0;D=1;x=0;ha=5126;ma=fa=Q=sa=0;la(ea)?(f=!0,t=Ca.createStream(34962,ea),ha=t.dtype):(t=Ca.getBuffer(ea))?ha=t.dtype:"constant"in ea?(D=2,"number"===typeof ea.constant?(Q=ea.constant,fa=ma=sa=0):(Q=0<ea.constant.length?ea.constant[0]:0,fa=1<ea.constant.length?ea.constant[1]:0,ma=2<ea.constant.length?ea.constant[2]:0,sa=3<ea.constant.length?ea.constant[3]:0)):(t=la(ea.buffer)?Ca.createStream(34962,ea.buffer):Ca.getBuffer(ea.buffer),ha="type"in
ea?gb[ea.type]:t.dtype,da=!!ea.normalized,Ia=ea.size|0,ga=ea.offset|0,x=ea.stride|0,X=ea.divisor|0);E=u.location;v=F[E];if(1===D){v.buffer||m.enableVertexAttribArray(E);Ia=Ia||2;if(v.type!==ha||v.size!==Ia||v.buffer!==t||v.normalized!==da||v.offset!==ga||v.stride!==x)m.bindBuffer(34962,t.buffer),m.vertexAttribPointer(E,Ia,ha,da,x,ga),v.type=ha,v.size=Ia,v.buffer=t,v.normalized=da,v.offset=ga,v.stride=x;v.divisor!==X&&(d.vertexAttribDivisorANGLE(E,X),v.divisor=X)}else if(v.buffer&&(m.disableVertexAttribArray(E),
v.buffer=null),v.x!==Q||v.y!==fa||v.z!==ma||v.w!==sa)m.vertexAttrib4f(E,Q,fa,ma,sa),v.x=Q,v.y=fa,v.z=ma,v.w=sa;ta.buffer=a.positionFractBuffer;X=!1;ga=0;x=!1;sa=ha=0;Q=1;E=0;v=5126;T=aa=ma=fa=0;la(ta)?(X=!0,da=Ca.createStream(34962,ta),v=da.dtype):(da=Ca.getBuffer(ta))?v=da.dtype:"constant"in ta?(Q=2,"number"===typeof ta.constant?(ma=ta.constant,aa=T=fa=0):(ma=0<ta.constant.length?ta.constant[0]:0,aa=1<ta.constant.length?ta.constant[1]:0,T=2<ta.constant.length?ta.constant[2]:0,fa=3<ta.constant.length?
ta.constant[3]:0)):(da=la(ta.buffer)?Ca.createStream(34962,ta.buffer):Ca.getBuffer(ta.buffer),v="type"in ta?gb[ta.type]:da.dtype,x=!!ta.normalized,sa=ta.size|0,ha=ta.offset|0,E=ta.stride|0,ga=ta.divisor|0);Ia=B.location;D=F[Ia];if(1===Q){D.buffer||m.enableVertexAttribArray(Ia);sa=sa||2;if(D.type!==v||D.size!==sa||D.buffer!==da||D.normalized!==x||D.offset!==ha||D.stride!==E)m.bindBuffer(34962,da.buffer),m.vertexAttribPointer(Ia,sa,v,x,E,ha),D.type=v,D.size=sa,D.buffer=da,D.normalized=x,D.offset=ha,
D.stride=E;D.divisor!==ga&&(d.vertexAttribDivisorANGLE(Ia,ga),D.divisor=ga)}else if(D.buffer&&(m.disableVertexAttribArray(Ia),D.buffer=null),D.x!==ma||D.y!==aa||D.z!==T||D.w!==fa)m.vertexAttrib4f(Ia,ma,aa,T,fa),D.x=ma,D.y=aa,D.z=T,D.w=fa;ga=a.fill;m.uniform4f(A.location,ga[0],ga[1],ga[2],ga[3]);ga=a.scale;m.uniform2f(M.location,ga[0],ga[1]);ga=a.scaleFract;m.uniform2f(r.location,ga[0],ga[1]);ga=a.translate;m.uniform2f(I.location,ga[0],ga[1]);ga=a.translateFract;m.uniform2f(oa.location,ga[0],ga[1]);
m.uniform1f(H.location,a.id);m.uniform1f(J.location,a.opacity);ga=z.call(this,k,a,0);(ga=(a=la(ga))?n.createStream(ga):n.getElements(ga))&&m.bindBuffer(34963,ga.buffer.buffer);if(x=ga?ga.vertCount:-1)ha=g.instances,0<ha?ga?d.drawElementsInstancedANGLE(4,x,ga.type,0<<(ga.type-5121>>1),ha):d.drawArraysInstancedANGLE(4,0,x,ha):0>ha&&(ga?m.drawElements(4,x,ga.type,0<<(ga.type-5121>>1)):m.drawArrays(4,0,x)),h.dirty=!0,e.setVAO(null),k.viewportWidth=b,k.viewportHeight=y,c&&(V.cpuTime+=performance.now()-
C),f&&Ca.destroyStream(t),X&&Ca.destroyStream(da),a&&n.destroyStream(ga)},scope:function(e,d,m){var q,r,t,w,u,z,B,N,I,D,x,H,C,J,A,R,E,v,aa,K,P,M,l,O,U,p,F,W,S,ca,ga,Y,ba,ia,za,na,pa,ra,Fa,Oa,oa,Na,Wb,Fb,zd,dc,Rd,Sd,ke,Vb,rd,md,Cd,qd,dd,Bc,sd,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb;q=e.viewport;r=q.x|0;t=q.y|0;w="width"in q?q.width|0:k.framebufferWidth-r;u="height"in q?
q.height|0:k.framebufferHeight-t;z=k.viewportWidth;k.viewportWidth=w;B=k.viewportHeight;k.viewportHeight=u;N=Ia[0];Ia[0]=r;I=Ia[1];Ia[1]=t;D=Ia[2];Ia[2]=w;x=Ia[3];Ia[3]=u;H=X[0];X[0]=0;C=X[1];X[1]=0;J=X[2];X[2]=0;A=X[3];X[3]=0;R=L.blend_enable;L.blend_enable=!0;E=fd[0];fd[0]=32774;v=fd[1];fd[1]=32774;aa=ac[0];ac[0]=770;K=ac[1];ac[1]=771;P=ac[2];ac[2]=773;M=ac[3];ac[3]=1;l=L.depth_enable;L.depth_enable=!1;O=e.viewport;U=O.x|0;p=O.y|0;F="width"in O?O.width|0:k.framebufferWidth-U;W="height"in O?O.height|
0:k.framebufferHeight-p;S=$a[0];$a[0]=U;ca=$a[1];$a[1]=p;ga=$a[2];$a[2]=F;Y=$a[3];$a[3]=W;ba=L.scissor_enable;L.scissor_enable=!0;ia=L.stencil_enable;L.stencil_enable=!1;if(za=h.profile)na=performance.now(),V.count++;pa=f.call(this,k,e,m);ra=null;ra=(Fa=la(pa))?n.createStream(pa):n.getElements(pa);Oa=g.elements;g.elements=ra;oa=g.offset;g.offset=0;Na=ra?ra.vertCount:-1;Wb=g.count;g.count=Na;Fb=g.primitive;g.primitive=4;zd=e.fill;dc=a[14];a[14]=zd;Rd=e.id;Sd=a[31];a[31]=Rd;ke=e.opacity;Vb=a[10];a[10]=
ke;rd=k.pixelRatio;md=a[34];a[34]=rd;Cd=e.scale;qd=a[6];a[6]=Cd;dd=e.scaleFract;Bc=a[7];a[7]=dd;sd=e.translate;gd=a[8];a[8]=sd;Nc=e.translateFract;tc=a[9];a[9]=Nc;ab=c.call(this,k,e,m);Cc=a[3];a[3]=ab;ea.buffer=e.positionBuffer;Db=!1;rc=null;Ta=0;kc=!1;ad=bc=0;Dd=1;nd=0;Dc=5126;La=Gb=Jc=Xb=0;la(ea)?(Db=!0,rc=Ca.createStream(34962,ea),Dc=rc.dtype):(rc=Ca.getBuffer(ea))?Dc=rc.dtype:"constant"in ea?(Dd=2,"number"===typeof ea.constant?(Jc=ea.constant,Gb=La=Xb=0):(Jc=0<ea.constant.length?ea.constant[0]:
0,Gb=1<ea.constant.length?ea.constant[1]:0,La=2<ea.constant.length?ea.constant[2]:0,Xb=3<ea.constant.length?ea.constant[3]:0)):(rc=la(ea.buffer)?Ca.createStream(34962,ea.buffer):Ca.getBuffer(ea.buffer),Dc="type"in ea?gb[ea.type]:rc.dtype,kc=!!ea.normalized,ad=ea.size|0,bc=ea.offset|0,nd=ea.stride|0,Ta=ea.divisor|0);tb=y.buffer;y.buffer=rc;Wa=y.divisor;y.divisor=Ta;ua=y.normalized;y.normalized=kc;td=y.offset;y.offset=bc;Ab=y.size;y.size=ad;Sa=y.state;y.state=Dd;Tb=y.stride;y.stride=nd;cb=y.type;y.type=
Dc;lc=y.w;y.w=Xb;Ob=y.x;y.x=Jc;fe=y.y;y.y=Gb;$b=y.z;y.z=La;ta.buffer=e.positionFractBuffer;Pb=!1;hd=null;Qb=0;Ma=!1;ub=nb=0;hb=1;Pa=0;qc=5126;nc=db=od=Rb=0;la(ta)?(Pb=!0,hd=Ca.createStream(34962,ta),qc=hd.dtype):(hd=Ca.getBuffer(ta))?qc=hd.dtype:"constant"in ta?(hb=2,"number"===typeof ta.constant?(od=ta.constant,db=nc=Rb=0):(od=0<ta.constant.length?ta.constant[0]:0,db=1<ta.constant.length?ta.constant[1]:0,nc=2<ta.constant.length?ta.constant[2]:0,Rb=3<ta.constant.length?ta.constant[3]:0)):(hd=la(ta.buffer)?
Ca.createStream(34962,ta.buffer):Ca.getBuffer(ta.buffer),qc="type"in ta?gb[ta.type]:hd.dtype,Ma=!!ta.normalized,ub=ta.size|0,nb=ta.offset|0,Pa=ta.stride|0,Qb=ta.divisor|0);Kc=b.buffer;b.buffer=hd;ec=b.divisor;b.divisor=Qb;jb=b.normalized;b.normalized=Ma;kb=b.offset;b.offset=nb;qa=b.size;b.size=ub;ob=b.state;b.state=hb;va=b.stride;b.stride=Pa;Ua=b.type;b.type=qc;bb=b.w;b.w=Rb;Aa=b.x;b.x=od;eb=b.y;b.y=db;Ja=b.z;b.z=nc;Bb=da.vert;da.vert=42;zb=da.frag;da.frag=41;h.dirty=!0;d(k,e,m);k.viewportWidth=z;
k.viewportHeight=B;Ia[0]=N;Ia[1]=I;Ia[2]=D;Ia[3]=x;X[0]=H;X[1]=C;X[2]=J;X[3]=A;L.blend_enable=R;fd[0]=E;fd[1]=v;ac[0]=aa;ac[1]=K;ac[2]=P;ac[3]=M;L.depth_enable=l;$a[0]=S;$a[1]=ca;$a[2]=ga;$a[3]=Y;L.scissor_enable=ba;L.stencil_enable=ia;za&&(V.cpuTime+=performance.now()-na);Fa&&n.destroyStream(ra);g.elements=Oa;g.offset=oa;g.count=Wb;g.primitive=Fb;a[14]=dc;a[31]=Sd;a[10]=Vb;a[34]=md;a[6]=qd;a[7]=Bc;a[8]=gd;a[9]=tc;a[3]=Cc;Db&&Ca.destroyStream(rc);y.buffer=tb;y.divisor=Wa;y.normalized=ua;y.offset=
td;y.size=Ab;y.state=Sa;y.stride=Tb;y.type=cb;y.w=lc;y.x=Ob;y.y=fe;y.z=$b;Pb&&Ca.destroyStream(hd);b.buffer=Kc;b.divisor=ec;b.normalized=jb;b.offset=kb;b.size=qa;b.state=ob;b.stride=va;b.type=Ua;b.w=bb;b.x=Aa;b.y=eb;b.z=Ja;da.vert=Bb;da.frag=zb;h.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,V,q,z,f,c,y,b,t,C,A,H,J,u,B,M,r,I,oa,F,Ca,k,
h,g,n,R,ca,m,la,L,da,a,e,X,pa,Vb,Fb,ac,ra,Na,Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta,ic,pc,sc,wd,yc){var Z,G,ja,Da,sb,Sc,Yc,D,x,ha,sa,Q,fa,ma,E,v,aa,T,wa,ka,l,mc,U,p,Hb,yb,Re,je,re,$d,xd,Ae,Gc,de,se,Od,Qd,Xd,ee;Z=d.attributes;G=d.buffer;ja=d.context;Da=d.current;sb=d.draw;Sc=d.elements;Yc=d.extensions;D=d.framebuffer;x=d.gl;ha=d.isBufferArgs;sa=d.next;Q=d.shader;fa=d.uniforms;ma=d.vao;E=sa.blend_color;v=Da.blend_color;aa=sa.blend_equation;T=Da.blend_equation;wa=sa.blend_func;ka=Da.blend_func;
l=sa.colorMask;mc=Da.colorMask;U=sa.depth_range;p=Da.depth_range;Hb=sa.polygonOffset_offset;yb=Da.polygonOffset_offset;Re=sa.sample_coverage;je=Da.sample_coverage;re=sa.scissor_box;$d=Da.scissor_box;xd=sa.stencil_func;Ae=Da.stencil_func;Gc=sa.stencil_opBack;de=Da.stencil_opBack;se=sa.stencil_opFront;Od=Da.stencil_opFront;Qd=sa.viewport;Xd=Da.viewport;ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,e,d,g,f,h;c=D.next;
c!==D.cur&&(c?x.bindFramebuffer(36160,c.framebuffer):x.bindFramebuffer(36160,null),D.cur=c);if(Da.dirty){var k,m,n,q,r,t,u,y,z,E,B,L,I,C,H,A,J,R,M,F,Q,ca,fa,ga,X,da,Ca,la,ua,za,wa,Sa,oa,cb;k=sa.dither;k!==Da.dither&&(k?x.enable(3024):x.disable(3024),Da.dither=k);m=aa[0];n=aa[1];if(m!==T[0]||n!==T[1])x.blendEquationSeparate(m,n),T[0]=m,T[1]=n;q=sa.depth_func;q!==Da.depth_func&&(x.depthFunc(q),Da.depth_func=q);r=U[0];t=U[1];if(r!==p[0]||t!==p[1])x.depthRange(r,t),p[0]=r,p[1]=t;u=sa.depth_mask;u!==Da.depth_mask&&
(x.depthMask(u),Da.depth_mask=u);y=l[0];z=l[1];E=l[2];B=l[3];if(y!==mc[0]||z!==mc[1]||E!==mc[2]||B!==mc[3])x.colorMask(y,z,E,B),mc[0]=y,mc[1]=z,mc[2]=E,mc[3]=B;L=sa.cull_enable;L!==Da.cull_enable&&(L?x.enable(2884):x.disable(2884),Da.cull_enable=L);I=sa.cull_face;I!==Da.cull_face&&(x.cullFace(I),Da.cull_face=I);C=sa.frontFace;C!==Da.frontFace&&(x.frontFace(C),Da.frontFace=C);H=sa.lineWidth;H!==Da.lineWidth&&(x.lineWidth(H),Da.lineWidth=H);A=sa.polygonOffset_enable;A!==Da.polygonOffset_enable&&(A?
x.enable(32823):x.disable(32823),Da.polygonOffset_enable=A);J=Hb[0];R=Hb[1];if(J!==yb[0]||R!==yb[1])x.polygonOffset(J,R),yb[0]=J,yb[1]=R;M=sa.sample_alpha;M!==Da.sample_alpha&&(M?x.enable(32926):x.disable(32926),Da.sample_alpha=M);F=sa.sample_enable;F!==Da.sample_enable&&(F?x.enable(32928):x.disable(32928),Da.sample_enable=F);Q=Re[0];ca=Re[1];if(Q!==je[0]||ca!==je[1])x.sampleCoverage(Q,ca),je[0]=Q,je[1]=ca;fa=sa.stencil_mask;fa!==Da.stencil_mask&&(x.stencilMask(fa),Da.stencil_mask=fa);ga=xd[0];X=
xd[1];da=xd[2];if(ga!==Ae[0]||X!==Ae[1]||da!==Ae[2])x.stencilFunc(ga,X,da),Ae[0]=ga,Ae[1]=X,Ae[2]=da;Ca=se[0];la=se[1];ua=se[2];za=se[3];if(Ca!==Od[0]||la!==Od[1]||ua!==Od[2]||za!==Od[3])x.stencilOpSeparate(Ca,la,ua,za),Od[0]=Ca,Od[1]=la,Od[2]=ua,Od[3]=za;wa=Gc[0];Sa=Gc[1];oa=Gc[2];cb=Gc[3];if(wa!==de[0]||Sa!==de[1]||oa!==de[2]||cb!==de[3])x.stencilOpSeparate(wa,Sa,oa,cb),de[0]=wa,de[1]=Sa,de[2]=oa,de[3]=cb}x.blendColor(0,0,0,1);v[0]=0;v[1]=0;v[2]=0;v[3]=1;x.enable(3042);Da.blend_enable=!0;x.blendFuncSeparate(770,
771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;x.disable(2929);Da.depth_enable=!1;x.enable(3089);Da.scissor_enable=!0;x.disable(2960);Da.stencil_enable=!1;if(e=Da.profile)d=performance.now(),V.count+=b;x.useProgram(pa.program);g=Yc.angle_instanced_arrays;var lc;ma.setVAO(null);x.uniform1i(w.location,!1);x.uniform1i(dc.location,na.bind());lc=sb.instances;for(f=0;f<b;++f){h=a[f];var Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Ve,Ka,Lb,
fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,Qd,Vd,$e,re,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Te,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Ye,ve,ne,Ke,Le,He,qe,ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf,rf,of,sf,Bf,Cf,Je,xe,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf;Ob=h.viewport;fe=
Ob.x|0;$b=Ob.y|0;Pb="width"in Ob?Ob.width|0:ja.framebufferWidth-fe;hd="height"in Ob?Ob.height|0:ja.framebufferHeight-$b;Qb=ja.viewportWidth;ja.viewportWidth=Pb;Ma=ja.viewportHeight;ja.viewportHeight=hd;x.viewport(fe,$b,Pb,hd);Xd[0]=fe;Xd[1]=$b;Xd[2]=Pb;Xd[3]=hd;nb=h.viewport;ub=nb.x|0;hb=nb.y|0;Pa="width"in nb?nb.width|0:ja.framebufferWidth-ub;qc="height"in nb?nb.height|0:ja.framebufferHeight-hb;x.scissor(ub,hb,Pa,qc);$d[0]=ub;$d[1]=hb;$d[2]=Pa;$d[3]=qc;Rb=Vb.call(this,ja,h,f);od=!1;db=null;nc=0;
Kc=!1;jb=ec=0;kb=1;qa=0;ob=5126;Aa=bb=Ua=va=0;ha(Rb)?(od=!0,db=G.createStream(34962,Rb),ob=db.dtype):(db=G.getBuffer(Rb))?ob=db.dtype:"constant"in Rb?(kb=2,"number"===typeof Rb.constant?(Ua=Rb.constant,bb=Aa=va=0):(Ua=0<Rb.constant.length?Rb.constant[0]:0,bb=1<Rb.constant.length?Rb.constant[1]:0,Aa=2<Rb.constant.length?Rb.constant[2]:0,va=3<Rb.constant.length?Rb.constant[3]:0)):(db=ha(Rb.buffer)?G.createStream(34962,Rb.buffer):G.getBuffer(Rb.buffer),ob="type"in Rb?ee[Rb.type]:db.dtype,Kc=!!Rb.normalized,
jb=Rb.size|0,ec=Rb.offset|0,qa=Rb.stride|0,nc=Rb.divisor|0);eb=pc.location;Ja=Z[eb];if(1===kb){Ja.buffer||x.enableVertexAttribArray(eb);Bb=jb||1;if(Ja.type!==ob||Ja.size!==Bb||Ja.buffer!==db||Ja.normalized!==Kc||Ja.offset!==ec||Ja.stride!==qa)x.bindBuffer(34962,db.buffer),x.vertexAttribPointer(eb,Bb,ob,Kc,qa,ec),Ja.type=ob,Ja.size=Bb,Ja.buffer=db,Ja.normalized=Kc,Ja.offset=ec,Ja.stride=qa;Ja.divisor!==nc&&(g.vertexAttribDivisorANGLE(eb,nc),Ja.divisor=nc)}else if(Ja.buffer&&(x.disableVertexAttribArray(eb),
Ja.buffer=null),Ja.x!==Ua||Ja.y!==bb||Ja.z!==Aa||Ja.w!==va)x.vertexAttrib4f(eb,Ua,bb,Aa,va),Ja.x=Ua,Ja.y=bb,Ja.z=Aa,Ja.w=va;zb=Fb.call(this,ja,h,f);Ra=!1;Mc=null;Ib=0;Za=!1;xa=Sb=0;Ve=1;Ka=0;Lb=5126;fc=ya=ib=fb=0;ha(zb)?(Ra=!0,Mc=G.createStream(34962,zb),Lb=Mc.dtype):(Mc=G.getBuffer(zb))?Lb=Mc.dtype:"constant"in zb?(Ve=2,"number"===typeof zb.constant?(ib=zb.constant,ya=fc=fb=0):(ib=0<zb.constant.length?zb.constant[0]:0,ya=1<zb.constant.length?zb.constant[1]:0,fc=2<zb.constant.length?zb.constant[2]:
0,fb=3<zb.constant.length?zb.constant[3]:0)):(Mc=ha(zb.buffer)?G.createStream(34962,zb.buffer):G.getBuffer(zb.buffer),Lb="type"in zb?ee[zb.type]:Mc.dtype,Za=!!zb.normalized,xa=zb.size|0,Sb=zb.offset|0,Ka=zb.stride|0,Ib=zb.divisor|0);Ea=wd.location;pb=Z[Ea];if(1===Ve){pb.buffer||x.enableVertexAttribArray(Ea);qb=xa||1;if(pb.type!==Lb||pb.size!==qb||pb.buffer!==Mc||pb.normalized!==Za||pb.offset!==Sb||pb.stride!==Ka)x.bindBuffer(34962,Mc.buffer),x.vertexAttribPointer(Ea,qb,Lb,Za,Ka,Sb),pb.type=Lb,pb.size=
qb,pb.buffer=Mc,pb.normalized=Za,pb.offset=Sb,pb.stride=Ka;pb.divisor!==Ib&&(g.vertexAttribDivisorANGLE(Ea,Ib),pb.divisor=Ib)}else if(pb.buffer&&(x.disableVertexAttribArray(Ea),pb.buffer=null),pb.x!==ib||pb.y!==ya||pb.z!==fc||pb.w!==fb)x.vertexAttrib4f(Ea,ib,ya,fc,fb),pb.x=ib,pb.y=ya,pb.z=fc,pb.w=fb;Xa=ac.call(this,ja,h,f);Ya=!1;oc=null;xc=0;vc=!1;Yb=Va=0;Tc=1;Ga=0;zc=5126;vb=lb=Ba=Qa=0;ha(Xa)?(Ya=!0,oc=G.createStream(34962,Xa),zc=oc.dtype):(oc=G.getBuffer(Xa))?zc=oc.dtype:"constant"in Xa?(Tc=2,"number"===
typeof Xa.constant?(Ba=Xa.constant,lb=vb=Qa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?Xa.constant[1]:0,vb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(oc=ha(Xa.buffer)?G.createStream(34962,Xa.buffer):G.getBuffer(Xa.buffer),zc="type"in Xa?ee[Xa.type]:oc.dtype,vc=!!Xa.normalized,Yb=Xa.size|0,Va=Xa.offset|0,Ga=Xa.stride|0,xc=Xa.divisor|0);Cb=sc.location;rb=Z[Cb];if(1===Tc){rb.buffer||x.enableVertexAttribArray(Cb);wc=Yb||1;if(rb.type!==zc||
rb.size!==wc||rb.buffer!==oc||rb.normalized!==vc||rb.offset!==Va||rb.stride!==Ga)x.bindBuffer(34962,oc.buffer),x.vertexAttribPointer(Cb,wc,zc,vc,Ga,Va),rb.type=zc,rb.size=wc,rb.buffer=oc,rb.normalized=vc,rb.offset=Va,rb.stride=Ga;rb.divisor!==xc&&(g.vertexAttribDivisorANGLE(Cb,xc),rb.divisor=xc)}else if(rb.buffer&&(x.disableVertexAttribArray(Cb),rb.buffer=null),rb.x!==Ba||rb.y!==lb||rb.z!==vb||rb.w!==Qa)x.vertexAttrib4f(Cb,Ba,lb,vb,Qa),rb.x=Ba,rb.y=lb,rb.z=vb,rb.w=Qa;wb=ra.call(this,ja,h,f);Jd=!1;
uc=null;Td=0;Oc=!1;ud=id=0;Ub=1;cc=0;Mb=5126;xb=mb=Zb=Ha=0;ha(wb)?(Jd=!0,uc=G.createStream(34962,wb),Mb=uc.dtype):(uc=G.getBuffer(wb))?Mb=uc.dtype:"constant"in wb?(Ub=2,"number"===typeof wb.constant?(Zb=wb.constant,mb=xb=Ha=0):(Zb=0<wb.constant.length?wb.constant[0]:0,mb=1<wb.constant.length?wb.constant[1]:0,xb=2<wb.constant.length?wb.constant[2]:0,Ha=3<wb.constant.length?wb.constant[3]:0)):(uc=ha(wb.buffer)?G.createStream(34962,wb.buffer):G.getBuffer(wb.buffer),Mb="type"in wb?ee[wb.type]:uc.dtype,
Oc=!!wb.normalized,ud=wb.size|0,id=wb.offset|0,cc=wb.stride|0,Td=wb.divisor|0);Kb=yc.location;Nb=Z[Kb];if(1===Ub){Nb.buffer||x.enableVertexAttribArray(Kb);gc=ud||1;if(Nb.type!==Mb||Nb.size!==gc||Nb.buffer!==uc||Nb.normalized!==Oc||Nb.offset!==id||Nb.stride!==cc)x.bindBuffer(34962,uc.buffer),x.vertexAttribPointer(Kb,gc,Mb,Oc,cc,id),Nb.type=Mb,Nb.size=gc,Nb.buffer=uc,Nb.normalized=Oc,Nb.offset=id,Nb.stride=cc;Nb.divisor!==Td&&(g.vertexAttribDivisorANGLE(Kb,Td),Nb.divisor=Td)}else if(Nb.buffer&&(x.disableVertexAttribArray(Kb),
Nb.buffer=null),Nb.x!==Zb||Nb.y!==mb||Nb.z!==xb||Nb.w!==Ha)x.vertexAttrib4f(Kb,Zb,mb,xb,Ha),Nb.x=Zb,Nb.y=mb,Nb.z=xb,Nb.w=Ha;jc=Na.call(this,ja,h,f);Uc=!1;Ec=null;Fc=0;Hc=!1;cd=Pc=0;Vc=1;Qc=0;Jb=5126;Wc=Lc=Rc=Eb=0;ha(jc)?(Uc=!0,Ec=G.createStream(34962,jc),Jb=Ec.dtype):(Ec=G.getBuffer(jc))?Jb=Ec.dtype:"constant"in jc?(Vc=2,"number"===typeof jc.constant?(Rc=jc.constant,Lc=Wc=Eb=0):(Rc=0<jc.constant.length?jc.constant[0]:0,Lc=1<jc.constant.length?jc.constant[1]:0,Wc=2<jc.constant.length?jc.constant[2]:
0,Eb=3<jc.constant.length?jc.constant[3]:0)):(Ec=ha(jc.buffer)?G.createStream(34962,jc.buffer):G.getBuffer(jc.buffer),Jb="type"in jc?ee[jc.type]:Ec.dtype,Hc=!!jc.normalized,cd=jc.size|0,Pc=jc.offset|0,Qc=jc.stride|0,Fc=jc.divisor|0);hc=ea.location;Zc=Z[hc];if(1===Vc){Zc.buffer||x.enableVertexAttribArray(hc);jd=cd||1;if(Zc.type!==Jb||Zc.size!==jd||Zc.buffer!==Ec||Zc.normalized!==Hc||Zc.offset!==Pc||Zc.stride!==Qc)x.bindBuffer(34962,Ec.buffer),x.vertexAttribPointer(hc,jd,Jb,Hc,Qc,Pc),Zc.type=Jb,Zc.size=
jd,Zc.buffer=Ec,Zc.normalized=Hc,Zc.offset=Pc,Zc.stride=Qc;Zc.divisor!==Fc&&(g.vertexAttribDivisorANGLE(hc,Fc),Zc.divisor=Fc)}else if(Zc.buffer&&(x.disableVertexAttribArray(hc),Zc.buffer=null),Zc.x!==Rc||Zc.y!==Lc||Zc.z!==Wc||Zc.w!==Eb)x.vertexAttrib4f(hc,Rc,Lc,Wc,Eb),Zc.x=Rc,Zc.y=Lc,Zc.z=Wc,Zc.w=Eb;vd=Y.call(this,ja,h,f);oe=!1;$c=null;Qd=0;Vd=!1;re=$e=0;le=1;Gd=0;Ed=5126;kd=pd=Ic=ed=0;ha(vd)?(oe=!0,$c=G.createStream(34962,vd),Ed=$c.dtype):($c=G.getBuffer(vd))?Ed=$c.dtype:"constant"in vd?(le=2,"number"===
typeof vd.constant?(Ic=vd.constant,pd=kd=ed=0):(Ic=0<vd.constant.length?vd.constant[0]:0,pd=1<vd.constant.length?vd.constant[1]:0,kd=2<vd.constant.length?vd.constant[2]:0,ed=3<vd.constant.length?vd.constant[3]:0)):($c=ha(vd.buffer)?G.createStream(34962,vd.buffer):G.getBuffer(vd.buffer),Ed="type"in vd?ee[vd.type]:$c.dtype,Vd=!!vd.normalized,re=vd.size|0,$e=vd.offset|0,Gd=vd.stride|0,Qd=vd.divisor|0);bd=$a.location;ld=Z[bd];if(1===le){ld.buffer||x.enableVertexAttribArray(bd);Bd=re||1;if(ld.type!==Ed||
ld.size!==Bd||ld.buffer!==$c||ld.normalized!==Vd||ld.offset!==$e||ld.stride!==Gd)x.bindBuffer(34962,$c.buffer),x.vertexAttribPointer(bd,Bd,Ed,Vd,Gd,$e),ld.type=Ed,ld.size=Bd,ld.buffer=$c,ld.normalized=Vd,ld.offset=$e,ld.stride=Gd;ld.divisor!==Qd&&(g.vertexAttribDivisorANGLE(bd,Qd),ld.divisor=Qd)}else if(ld.buffer&&(x.disableVertexAttribArray(bd),ld.buffer=null),ld.x!==Ic||ld.y!==pd||ld.z!==kd||ld.w!==ed)x.vertexAttrib4f(bd,Ic,pd,kd,ed),ld.x=Ic,ld.y=pd,ld.z=kd,ld.w=ed;yd=K.call(this,ja,h,f);Te=!1;
me=null;te=0;ce=!1;ae=be=0;ue=1;Yd=0;ge=5126;ie=pe=Xc=Ac=0;ha(yd)?(Te=!0,me=G.createStream(34962,yd),ge=me.dtype):(me=G.getBuffer(yd))?ge=me.dtype:"constant"in yd?(ue=2,"number"===typeof yd.constant?(Xc=yd.constant,pe=ie=Ac=0):(Xc=0<yd.constant.length?yd.constant[0]:0,pe=1<yd.constant.length?yd.constant[1]:0,ie=2<yd.constant.length?yd.constant[2]:0,Ac=3<yd.constant.length?yd.constant[3]:0)):(me=ha(yd.buffer)?G.createStream(34962,yd.buffer):G.getBuffer(yd.buffer),ge="type"in yd?ee[yd.type]:me.dtype,
ce=!!yd.normalized,ae=yd.size|0,be=yd.offset|0,Yd=yd.stride|0,te=yd.divisor|0);Fd=P.location;Id=Z[Fd];if(1===ue){Id.buffer||x.enableVertexAttribArray(Fd);Kd=ae||4;if(Id.type!==ge||Id.size!==Kd||Id.buffer!==me||Id.normalized!==ce||Id.offset!==be||Id.stride!==Yd)x.bindBuffer(34962,me.buffer),x.vertexAttribPointer(Fd,Kd,ge,ce,Yd,be),Id.type=ge,Id.size=Kd,Id.buffer=me,Id.normalized=ce,Id.offset=be,Id.stride=Yd;Id.divisor!==te&&(g.vertexAttribDivisorANGLE(Fd,te),Id.divisor=te)}else if(Id.buffer&&(x.disableVertexAttribArray(Fd),
Id.buffer=null),Id.x!==Xc||Id.y!==pe||Id.z!==ie||Id.w!==Ac)x.vertexAttrib4f(Fd,Xc,pe,ie,Ac),Id.x=Xc,Id.y=pe,Id.z=ie,Id.w=Ac;Ld=N.call(this,ja,h,f);he=!1;Ye=null;ve=0;ne=!1;Le=Ke=0;He=1;qe=0;ye=5126;ze=Ee=De=Ce=0;ha(Ld)?(he=!0,Ye=G.createStream(34962,Ld),ye=Ye.dtype):(Ye=G.getBuffer(Ld))?ye=Ye.dtype:"constant"in Ld?(He=2,"number"===typeof Ld.constant?(De=Ld.constant,Ee=ze=Ce=0):(De=0<Ld.constant.length?Ld.constant[0]:0,Ee=1<Ld.constant.length?Ld.constant[1]:0,ze=2<Ld.constant.length?Ld.constant[2]:
0,Ce=3<Ld.constant.length?Ld.constant[3]:0)):(Ye=ha(Ld.buffer)?G.createStream(34962,Ld.buffer):G.getBuffer(Ld.buffer),ye="type"in Ld?ee[Ld.type]:Ye.dtype,ne=!!Ld.normalized,Le=Ld.size|0,Ke=Ld.offset|0,qe=Ld.stride|0,ve=Ld.divisor|0);Hd=Wb.location;Pd=Z[Hd];if(1===He){Pd.buffer||x.enableVertexAttribArray(Hd);Wd=Le||4;if(Pd.type!==ye||Pd.size!==Wd||Pd.buffer!==Ye||Pd.normalized!==ne||Pd.offset!==Ke||Pd.stride!==qe)x.bindBuffer(34962,Ye.buffer),x.vertexAttribPointer(Hd,Wd,ye,ne,qe,Ke),Pd.type=ye,Pd.size=
Wd,Pd.buffer=Ye,Pd.normalized=ne,Pd.offset=Ke,Pd.stride=qe;Pd.divisor!==ve&&(g.vertexAttribDivisorANGLE(Hd,ve),Pd.divisor=ve)}else if(Pd.buffer&&(x.disableVertexAttribArray(Hd),Pd.buffer=null),Pd.x!==De||Pd.y!==Ee||Pd.z!==ze||Pd.w!==Ce)x.vertexAttrib4f(Hd,De,Ee,ze,Ce),Pd.x=De,Pd.y=Ee,Pd.z=ze,Pd.w=Ce;Zd=S.call(this,ja,h,f);Fe=!1;Ad=null;Md=0;we=!1;gf=Ge=0;We=1;Me=0;Ie=5126;Oe=Ne=Qe=Ue=0;ha(Zd)?(Fe=!0,Ad=G.createStream(34962,Zd),Ie=Ad.dtype):(Ad=G.getBuffer(Zd))?Ie=Ad.dtype:"constant"in Zd?(We=2,"number"===
typeof Zd.constant?(Qe=Zd.constant,Ne=Oe=Ue=0):(Qe=0<Zd.constant.length?Zd.constant[0]:0,Ne=1<Zd.constant.length?Zd.constant[1]:0,Oe=2<Zd.constant.length?Zd.constant[2]:0,Ue=3<Zd.constant.length?Zd.constant[3]:0)):(Ad=ha(Zd.buffer)?G.createStream(34962,Zd.buffer):G.getBuffer(Zd.buffer),Ie="type"in Zd?ee[Zd.type]:Ad.dtype,we=!!Zd.normalized,gf=Zd.size|0,Ge=Zd.offset|0,Me=Zd.stride|0,Md=Zd.divisor|0);Nd=ia.location;Ud=Z[Nd];if(1===We){Ud.buffer||x.enableVertexAttribArray(Nd);Pe=gf||1;if(Ud.type!==Ie||
Ud.size!==Pe||Ud.buffer!==Ad||Ud.normalized!==we||Ud.offset!==Ge||Ud.stride!==Me)x.bindBuffer(34962,Ad.buffer),x.vertexAttribPointer(Nd,Pe,Ie,we,Me,Ge),Ud.type=Ie,Ud.size=Pe,Ud.buffer=Ad,Ud.normalized=we,Ud.offset=Ge,Ud.stride=Me;Ud.divisor!==Md&&(g.vertexAttribDivisorANGLE(Nd,Md),Ud.divisor=Md)}else if(Ud.buffer&&(x.disableVertexAttribArray(Nd),Ud.buffer=null),Ud.x!==Qe||Ud.y!==Ne||Ud.z!==Oe||Ud.w!==Ue)x.vertexAttrib4f(Nd,Qe,Ne,Oe,Ue),Ud.x=Qe,Ud.y=Ne,Ud.z=Oe,Ud.w=Ue;hf=ja.pixelRatio;f&&nf===hf||
(nf=hf,x.uniform1f(Ia.location,hf));df=h.scale;jf=df[0];lf=df[1];f&&kf===jf&&rf===lf||(kf=jf,rf=lf,x.uniform2f(W.location,jf,lf));of=h.scaleFract;sf=of[0];Cf=of[1];f&&Bf===sf&&Je===Cf||(Bf=sf,Je=Cf,x.uniform2f(gb.location,sf,Cf));xe=h.translate;pf=xe[0];Df=xe[1];f&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,x.uniform2f(ta.location,pf,Df));Af=h.translateFract;Ef=Af[0];wf=Af[1];f&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,x.uniform2f(ic.location,Ef,wf));vf=O.call(this,ja,h,f);yf=vf[0];If=vf[1];f&&zf===yf&&Jf===If||(zf=yf,
Jf=If,x.uniform2f(Oa.location,yf,If));Kf=h.opacity;f&&Lf===Kf||(Lf=Kf,x.uniform1f(Fa.location,Kf));(tf=h.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Qf=tf._texture;x.uniform1i(ba.location,Qf.bind());Hf=h.elements;uf=null;(uf=(cg=ha(Hf))?Sc.createStream(Hf):Sc.getElements(Hf))&&x.bindBuffer(34963,uf.buffer.buffer);Rf=h.offset;if(Sf=h.count)0<lc?uf?g.drawElementsInstancedANGLE(0,Sf,uf.type,Rf<<(uf.type-5121>>1),lc):g.drawArraysInstancedANGLE(0,Rf,Sf,lc):0>lc&&(uf?x.drawElements(0,
Sf,uf.type,Rf<<(uf.type-5121>>1)):x.drawArrays(0,Rf,Sf)),ja.viewportWidth=Qb,ja.viewportHeight=Ma,od&&G.destroyStream(db),Ra&&G.destroyStream(Mc),Ya&&G.destroyStream(oc),Jd&&G.destroyStream(uc),Uc&&G.destroyStream(Ec),oe&&G.destroyStream($c),Te&&G.destroyStream(me),he&&G.destroyStream(Ye),Fe&&G.destroyStream(Ad),Qf.unbind(),cg&&Sc.destroyStream(uf)}na.unbind();Da.dirty=!0;ma.setVAO(null);e&&(V.cpuTime+=performance.now()-d)},draw:function(a){var e,d,g,h,k,m,n,r,E,B,L,I,N,R,M,O,K,F,Q,ca,S,fa,X,Y,da,
Ca,la,wa,na,ra,pa,Gb,La,tb,Wa,ua,oa,Ab,Sa,Tb,cb,Na,Ob,Fb,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,ac,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Vb,uc,fd,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,Qd,Vd,re,Xe,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Te,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Ye,ve,ne,Ke,Le,He,qe;e=D.next;e!==D.cur&&(e?x.bindFramebuffer(36160,
e.framebuffer):x.bindFramebuffer(36160,null),D.cur=e);if(Da.dirty){var ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf,rf,of,sf;ye=sa.dither;ye!==Da.dither&&(ye?x.enable(3024):x.disable(3024),Da.dither=ye);Ce=aa[0];De=aa[1];if(Ce!==T[0]||De!==T[1])x.blendEquationSeparate(Ce,De),T[0]=Ce,T[1]=De;Ee=sa.depth_func;Ee!==Da.depth_func&&(x.depthFunc(Ee),Da.depth_func=Ee);ze=U[0];Hd=U[1];if(ze!==p[0]||Hd!==p[1])x.depthRange(ze,Hd),p[0]=ze,p[1]=Hd;Pd=sa.depth_mask;
Pd!==Da.depth_mask&&(x.depthMask(Pd),Da.depth_mask=Pd);Wd=l[0];Zd=l[1];Fe=l[2];Ad=l[3];if(Wd!==mc[0]||Zd!==mc[1]||Fe!==mc[2]||Ad!==mc[3])x.colorMask(Wd,Zd,Fe,Ad),mc[0]=Wd,mc[1]=Zd,mc[2]=Fe,mc[3]=Ad;Md=sa.cull_enable;Md!==Da.cull_enable&&(Md?x.enable(2884):x.disable(2884),Da.cull_enable=Md);we=sa.cull_face;we!==Da.cull_face&&(x.cullFace(we),Da.cull_face=we);Ge=sa.frontFace;Ge!==Da.frontFace&&(x.frontFace(Ge),Da.frontFace=Ge);gf=sa.lineWidth;gf!==Da.lineWidth&&(x.lineWidth(gf),Da.lineWidth=gf);We=sa.polygonOffset_enable;
We!==Da.polygonOffset_enable&&(We?x.enable(32823):x.disable(32823),Da.polygonOffset_enable=We);Me=Hb[0];Ie=Hb[1];if(Me!==yb[0]||Ie!==yb[1])x.polygonOffset(Me,Ie),yb[0]=Me,yb[1]=Ie;Ue=sa.sample_alpha;Ue!==Da.sample_alpha&&(Ue?x.enable(32926):x.disable(32926),Da.sample_alpha=Ue);Qe=sa.sample_enable;Qe!==Da.sample_enable&&(Qe?x.enable(32928):x.disable(32928),Da.sample_enable=Qe);Ne=Re[0];Oe=Re[1];if(Ne!==je[0]||Oe!==je[1])x.sampleCoverage(Ne,Oe),je[0]=Ne,je[1]=Oe;Nd=sa.stencil_mask;Nd!==Da.stencil_mask&&
(x.stencilMask(Nd),Da.stencil_mask=Nd);Ud=xd[0];Pe=xd[1];hf=xd[2];if(Ud!==Ae[0]||Pe!==Ae[1]||hf!==Ae[2])x.stencilFunc(Ud,Pe,hf),Ae[0]=Ud,Ae[1]=Pe,Ae[2]=hf;nf=se[0];df=se[1];jf=se[2];kf=se[3];if(nf!==Od[0]||df!==Od[1]||jf!==Od[2]||kf!==Od[3])x.stencilOpSeparate(nf,df,jf,kf),Od[0]=nf,Od[1]=df,Od[2]=jf,Od[3]=kf;lf=Gc[0];rf=Gc[1];of=Gc[2];sf=Gc[3];if(lf!==de[0]||rf!==de[1]||of!==de[2]||sf!==de[3])x.stencilOpSeparate(lf,rf,of,sf),de[0]=lf,de[1]=rf,de[2]=of,de[3]=sf}d=a.viewport;g=d.x|0;h=d.y|0;k="width"in
d?d.width|0:ja.framebufferWidth-g;m="height"in d?d.height|0:ja.framebufferHeight-h;n=ja.viewportWidth;ja.viewportWidth=k;r=ja.viewportHeight;ja.viewportHeight=m;x.viewport(g,h,k,m);Xd[0]=g;Xd[1]=h;Xd[2]=k;Xd[3]=m;x.blendColor(0,0,0,1);v[0]=0;v[1]=0;v[2]=0;v[3]=1;x.enable(3042);Da.blend_enable=!0;x.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;x.disable(2929);Da.depth_enable=!1;E=a.viewport;B=E.x|0;L=E.y|0;I="width"in E?E.width|0:ja.framebufferWidth-B;N="height"in E?E.height|
0:ja.framebufferHeight-L;x.scissor(B,L,I,N);$d[0]=B;$d[1]=L;$d[2]=I;$d[3]=N;x.enable(3089);Da.scissor_enable=!0;x.disable(2960);Da.stencil_enable=!1;if(R=Da.profile)M=performance.now(),V.count++;x.useProgram(q.program);O=Yc.angle_instanced_arrays;ma.setVAO(null);K=z.call(this,ja,a,0);F=!1;Q=null;ca=0;S=!1;X=fa=0;Y=1;da=0;Ca=5126;ra=na=wa=la=0;ha(K)?(F=!0,Q=G.createStream(34962,K),Ca=Q.dtype):(Q=G.getBuffer(K))?Ca=Q.dtype:"constant"in K?(Y=2,"number"===typeof K.constant?(wa=K.constant,na=ra=la=0):
(wa=0<K.constant.length?K.constant[0]:0,na=1<K.constant.length?K.constant[1]:0,ra=2<K.constant.length?K.constant[2]:0,la=3<K.constant.length?K.constant[3]:0)):(Q=ha(K.buffer)?G.createStream(34962,K.buffer):G.getBuffer(K.buffer),Ca="type"in K?ee[K.type]:Q.dtype,S=!!K.normalized,X=K.size|0,fa=K.offset|0,da=K.stride|0,ca=K.divisor|0);pa=pc.location;Gb=Z[pa];if(1===Y){Gb.buffer||x.enableVertexAttribArray(pa);La=X||1;if(Gb.type!==Ca||Gb.size!==La||Gb.buffer!==Q||Gb.normalized!==S||Gb.offset!==fa||Gb.stride!==
da)x.bindBuffer(34962,Q.buffer),x.vertexAttribPointer(pa,La,Ca,S,da,fa),Gb.type=Ca,Gb.size=La,Gb.buffer=Q,Gb.normalized=S,Gb.offset=fa,Gb.stride=da;Gb.divisor!==ca&&(O.vertexAttribDivisorANGLE(pa,ca),Gb.divisor=ca)}else if(Gb.buffer&&(x.disableVertexAttribArray(pa),Gb.buffer=null),Gb.x!==wa||Gb.y!==na||Gb.z!==ra||Gb.w!==la)x.vertexAttrib4f(pa,wa,na,ra,la),Gb.x=wa,Gb.y=na,Gb.z=ra,Gb.w=la;tb=f.call(this,ja,a,0);Wa=!1;ua=null;oa=0;Ab=!1;Tb=Sa=0;cb=1;Na=0;Ob=5126;hd=Pb=$b=Fb=0;ha(tb)?(Wa=!0,ua=G.createStream(34962,
tb),Ob=ua.dtype):(ua=G.getBuffer(tb))?Ob=ua.dtype:"constant"in tb?(cb=2,"number"===typeof tb.constant?($b=tb.constant,Pb=hd=Fb=0):($b=0<tb.constant.length?tb.constant[0]:0,Pb=1<tb.constant.length?tb.constant[1]:0,hd=2<tb.constant.length?tb.constant[2]:0,Fb=3<tb.constant.length?tb.constant[3]:0)):(ua=ha(tb.buffer)?G.createStream(34962,tb.buffer):G.getBuffer(tb.buffer),Ob="type"in tb?ee[tb.type]:ua.dtype,Ab=!!tb.normalized,Tb=tb.size|0,Sa=tb.offset|0,Na=tb.stride|0,oa=tb.divisor|0);Qb=wd.location;Ma=
Z[Qb];if(1===cb){Ma.buffer||x.enableVertexAttribArray(Qb);nb=Tb||1;if(Ma.type!==Ob||Ma.size!==nb||Ma.buffer!==ua||Ma.normalized!==Ab||Ma.offset!==Sa||Ma.stride!==Na)x.bindBuffer(34962,ua.buffer),x.vertexAttribPointer(Qb,nb,Ob,Ab,Na,Sa),Ma.type=Ob,Ma.size=nb,Ma.buffer=ua,Ma.normalized=Ab,Ma.offset=Sa,Ma.stride=Na;Ma.divisor!==oa&&(O.vertexAttribDivisorANGLE(Qb,oa),Ma.divisor=oa)}else if(Ma.buffer&&(x.disableVertexAttribArray(Qb),Ma.buffer=null),Ma.x!==$b||Ma.y!==Pb||Ma.z!==hd||Ma.w!==Fb)x.vertexAttrib4f(Qb,
$b,Pb,hd,Fb),Ma.x=$b,Ma.y=Pb,Ma.z=hd,Ma.w=Fb;ub=c.call(this,ja,a,0);hb=!1;Pa=null;qc=0;Rb=!1;db=od=0;nc=1;Kc=0;ec=5126;ob=qa=kb=jb=0;ha(ub)?(hb=!0,Pa=G.createStream(34962,ub),ec=Pa.dtype):(Pa=G.getBuffer(ub))?ec=Pa.dtype:"constant"in ub?(nc=2,"number"===typeof ub.constant?(kb=ub.constant,qa=ob=jb=0):(kb=0<ub.constant.length?ub.constant[0]:0,qa=1<ub.constant.length?ub.constant[1]:0,ob=2<ub.constant.length?ub.constant[2]:0,jb=3<ub.constant.length?ub.constant[3]:0)):(Pa=ha(ub.buffer)?G.createStream(34962,
ub.buffer):G.getBuffer(ub.buffer),ec="type"in ub?ee[ub.type]:Pa.dtype,Rb=!!ub.normalized,db=ub.size|0,od=ub.offset|0,Kc=ub.stride|0,qc=ub.divisor|0);va=sc.location;Ua=Z[va];if(1===nc){Ua.buffer||x.enableVertexAttribArray(va);bb=db||1;if(Ua.type!==ec||Ua.size!==bb||Ua.buffer!==Pa||Ua.normalized!==Rb||Ua.offset!==od||Ua.stride!==Kc)x.bindBuffer(34962,Pa.buffer),x.vertexAttribPointer(va,bb,ec,Rb,Kc,od),Ua.type=ec,Ua.size=bb,Ua.buffer=Pa,Ua.normalized=Rb,Ua.offset=od,Ua.stride=Kc;Ua.divisor!==qc&&(O.vertexAttribDivisorANGLE(va,
qc),Ua.divisor=qc)}else if(Ua.buffer&&(x.disableVertexAttribArray(va),Ua.buffer=null),Ua.x!==kb||Ua.y!==qa||Ua.z!==ob||Ua.w!==jb)x.vertexAttrib4f(va,kb,qa,ob,jb),Ua.x=kb,Ua.y=qa,Ua.z=ob,Ua.w=jb;Aa=y.call(this,ja,a,0);eb=!1;Ja=null;Bb=0;zb=!1;Mc=Ra=0;Ib=1;Za=0;Sb=5126;Lb=Ka=ac=xa=0;ha(Aa)?(eb=!0,Ja=G.createStream(34962,Aa),Sb=Ja.dtype):(Ja=G.getBuffer(Aa))?Sb=Ja.dtype:"constant"in Aa?(Ib=2,"number"===typeof Aa.constant?(ac=Aa.constant,Ka=Lb=xa=0):(ac=0<Aa.constant.length?Aa.constant[0]:0,Ka=1<Aa.constant.length?
Aa.constant[1]:0,Lb=2<Aa.constant.length?Aa.constant[2]:0,xa=3<Aa.constant.length?Aa.constant[3]:0)):(Ja=ha(Aa.buffer)?G.createStream(34962,Aa.buffer):G.getBuffer(Aa.buffer),Sb="type"in Aa?ee[Aa.type]:Ja.dtype,zb=!!Aa.normalized,Mc=Aa.size|0,Ra=Aa.offset|0,Za=Aa.stride|0,Bb=Aa.divisor|0);fb=yc.location;ib=Z[fb];if(1===Ib){ib.buffer||x.enableVertexAttribArray(fb);ya=Mc||1;if(ib.type!==Sb||ib.size!==ya||ib.buffer!==Ja||ib.normalized!==zb||ib.offset!==Ra||ib.stride!==Za)x.bindBuffer(34962,Ja.buffer),
x.vertexAttribPointer(fb,ya,Sb,zb,Za,Ra),ib.type=Sb,ib.size=ya,ib.buffer=Ja,ib.normalized=zb,ib.offset=Ra,ib.stride=Za;ib.divisor!==Bb&&(O.vertexAttribDivisorANGLE(fb,Bb),ib.divisor=Bb)}else if(ib.buffer&&(x.disableVertexAttribArray(fb),ib.buffer=null),ib.x!==ac||ib.y!==Ka||ib.z!==Lb||ib.w!==xa)x.vertexAttrib4f(fb,ac,Ka,Lb,xa),ib.x=ac,ib.y=Ka,ib.z=Lb,ib.w=xa;fc=b.call(this,ja,a,0);Ea=!1;pb=null;qb=0;Xa=!1;oc=Ya=0;xc=1;vc=0;Va=5126;zc=Ga=Tc=Yb=0;ha(fc)?(Ea=!0,pb=G.createStream(34962,fc),Va=pb.dtype):
(pb=G.getBuffer(fc))?Va=pb.dtype:"constant"in fc?(xc=2,"number"===typeof fc.constant?(Tc=fc.constant,Ga=zc=Yb=0):(Tc=0<fc.constant.length?fc.constant[0]:0,Ga=1<fc.constant.length?fc.constant[1]:0,zc=2<fc.constant.length?fc.constant[2]:0,Yb=3<fc.constant.length?fc.constant[3]:0)):(pb=ha(fc.buffer)?G.createStream(34962,fc.buffer):G.getBuffer(fc.buffer),Va="type"in fc?ee[fc.type]:pb.dtype,Xa=!!fc.normalized,oc=fc.size|0,Ya=fc.offset|0,vc=fc.stride|0,qb=fc.divisor|0);Qa=ea.location;Ba=Z[Qa];if(1===xc){Ba.buffer||
x.enableVertexAttribArray(Qa);lb=oc||1;if(Ba.type!==Va||Ba.size!==lb||Ba.buffer!==pb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==vc)x.bindBuffer(34962,pb.buffer),x.vertexAttribPointer(Qa,lb,Va,Xa,vc,Ya),Ba.type=Va,Ba.size=lb,Ba.buffer=pb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=vc;Ba.divisor!==qb&&(O.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(x.disableVertexAttribArray(Qa),Ba.buffer=null),Ba.x!==Tc||Ba.y!==Ga||Ba.z!==zc||Ba.w!==Yb)x.vertexAttrib4f(Qa,Tc,Ga,zc,Yb),Ba.x=
Tc,Ba.y=Ga,Ba.z=zc,Ba.w=Yb;vb=t.call(this,ja,a,0);Cb=!1;rb=null;wc=0;wb=!1;uc=Vb=0;fd=1;Oc=0;id=5126;Mb=cc=Ub=ud=0;ha(vb)?(Cb=!0,rb=G.createStream(34962,vb),id=rb.dtype):(rb=G.getBuffer(vb))?id=rb.dtype:"constant"in vb?(fd=2,"number"===typeof vb.constant?(Ub=vb.constant,cc=Mb=ud=0):(Ub=0<vb.constant.length?vb.constant[0]:0,cc=1<vb.constant.length?vb.constant[1]:0,Mb=2<vb.constant.length?vb.constant[2]:0,ud=3<vb.constant.length?vb.constant[3]:0)):(rb=ha(vb.buffer)?G.createStream(34962,vb.buffer):G.getBuffer(vb.buffer),
id="type"in vb?ee[vb.type]:rb.dtype,wb=!!vb.normalized,uc=vb.size|0,Vb=vb.offset|0,Oc=vb.stride|0,wc=vb.divisor|0);Ha=$a.location;Zb=Z[Ha];if(1===fd){Zb.buffer||x.enableVertexAttribArray(Ha);mb=uc||1;if(Zb.type!==id||Zb.size!==mb||Zb.buffer!==rb||Zb.normalized!==wb||Zb.offset!==Vb||Zb.stride!==Oc)x.bindBuffer(34962,rb.buffer),x.vertexAttribPointer(Ha,mb,id,wb,Oc,Vb),Zb.type=id,Zb.size=mb,Zb.buffer=rb,Zb.normalized=wb,Zb.offset=Vb,Zb.stride=Oc;Zb.divisor!==wc&&(O.vertexAttribDivisorANGLE(Ha,wc),Zb.divisor=
wc)}else if(Zb.buffer&&(x.disableVertexAttribArray(Ha),Zb.buffer=null),Zb.x!==Ub||Zb.y!==cc||Zb.z!==Mb||Zb.w!==ud)x.vertexAttrib4f(Ha,Ub,cc,Mb,ud),Zb.x=Ub,Zb.y=cc,Zb.z=Mb,Zb.w=ud;xb=C.call(this,ja,a,0);Kb=!1;Nb=null;gc=0;jc=!1;Ec=Uc=0;Fc=1;Hc=0;Pc=5126;Jb=Qc=Vc=cd=0;ha(xb)?(Kb=!0,Nb=G.createStream(34962,xb),Pc=Nb.dtype):(Nb=G.getBuffer(xb))?Pc=Nb.dtype:"constant"in xb?(Fc=2,"number"===typeof xb.constant?(Vc=xb.constant,Qc=Jb=cd=0):(Vc=0<xb.constant.length?xb.constant[0]:0,Qc=1<xb.constant.length?
xb.constant[1]:0,Jb=2<xb.constant.length?xb.constant[2]:0,cd=3<xb.constant.length?xb.constant[3]:0)):(Nb=ha(xb.buffer)?G.createStream(34962,xb.buffer):G.getBuffer(xb.buffer),Pc="type"in xb?ee[xb.type]:Nb.dtype,jc=!!xb.normalized,Ec=xb.size|0,Uc=xb.offset|0,Hc=xb.stride|0,gc=xb.divisor|0);Eb=P.location;Rc=Z[Eb];if(1===Fc){Rc.buffer||x.enableVertexAttribArray(Eb);Lc=Ec||4;if(Rc.type!==Pc||Rc.size!==Lc||Rc.buffer!==Nb||Rc.normalized!==jc||Rc.offset!==Uc||Rc.stride!==Hc)x.bindBuffer(34962,Nb.buffer),
x.vertexAttribPointer(Eb,Lc,Pc,jc,Hc,Uc),Rc.type=Pc,Rc.size=Lc,Rc.buffer=Nb,Rc.normalized=jc,Rc.offset=Uc,Rc.stride=Hc;Rc.divisor!==gc&&(O.vertexAttribDivisorANGLE(Eb,gc),Rc.divisor=gc)}else if(Rc.buffer&&(x.disableVertexAttribArray(Eb),Rc.buffer=null),Rc.x!==Vc||Rc.y!==Qc||Rc.z!==Jb||Rc.w!==cd)x.vertexAttrib4f(Eb,Vc,Qc,Jb,cd),Rc.x=Vc,Rc.y=Qc,Rc.z=Jb,Rc.w=cd;Wc=A.call(this,ja,a,0);hc=!1;Zc=null;jd=0;vd=!1;$c=oe=0;Qd=1;Vd=0;re=5126;Ed=Gd=le=Xe=0;ha(Wc)?(hc=!0,Zc=G.createStream(34962,Wc),re=Zc.dtype):
(Zc=G.getBuffer(Wc))?re=Zc.dtype:"constant"in Wc?(Qd=2,"number"===typeof Wc.constant?(le=Wc.constant,Gd=Ed=Xe=0):(le=0<Wc.constant.length?Wc.constant[0]:0,Gd=1<Wc.constant.length?Wc.constant[1]:0,Ed=2<Wc.constant.length?Wc.constant[2]:0,Xe=3<Wc.constant.length?Wc.constant[3]:0)):(Zc=ha(Wc.buffer)?G.createStream(34962,Wc.buffer):G.getBuffer(Wc.buffer),re="type"in Wc?ee[Wc.type]:Zc.dtype,vd=!!Wc.normalized,$c=Wc.size|0,oe=Wc.offset|0,Vd=Wc.stride|0,jd=Wc.divisor|0);ed=Wb.location;Ic=Z[ed];if(1===Qd){Ic.buffer||
x.enableVertexAttribArray(ed);pd=$c||4;if(Ic.type!==re||Ic.size!==pd||Ic.buffer!==Zc||Ic.normalized!==vd||Ic.offset!==oe||Ic.stride!==Vd)x.bindBuffer(34962,Zc.buffer),x.vertexAttribPointer(ed,pd,re,vd,Vd,oe),Ic.type=re,Ic.size=pd,Ic.buffer=Zc,Ic.normalized=vd,Ic.offset=oe,Ic.stride=Vd;Ic.divisor!==jd&&(O.vertexAttribDivisorANGLE(ed,jd),Ic.divisor=jd)}else if(Ic.buffer&&(x.disableVertexAttribArray(ed),Ic.buffer=null),Ic.x!==le||Ic.y!==Gd||Ic.z!==Ed||Ic.w!==Xe)x.vertexAttrib4f(ed,le,Gd,Ed,Xe),Ic.x=
le,Ic.y=Gd,Ic.z=Ed,Ic.w=Xe;kd=H.call(this,ja,a,0);bd=!1;ld=null;Bd=0;yd=!1;me=Te=0;te=1;ce=0;be=5126;ge=Yd=ue=ae=0;ha(kd)?(bd=!0,ld=G.createStream(34962,kd),be=ld.dtype):(ld=G.getBuffer(kd))?be=ld.dtype:"constant"in kd?(te=2,"number"===typeof kd.constant?(ue=kd.constant,Yd=ge=ae=0):(ue=0<kd.constant.length?kd.constant[0]:0,Yd=1<kd.constant.length?kd.constant[1]:0,ge=2<kd.constant.length?kd.constant[2]:0,ae=3<kd.constant.length?kd.constant[3]:0)):(ld=ha(kd.buffer)?G.createStream(34962,kd.buffer):G.getBuffer(kd.buffer),
be="type"in kd?ee[kd.type]:ld.dtype,yd=!!kd.normalized,me=kd.size|0,Te=kd.offset|0,ce=kd.stride|0,Bd=kd.divisor|0);Ac=ia.location;Xc=Z[Ac];if(1===te){Xc.buffer||x.enableVertexAttribArray(Ac);pe=me||1;if(Xc.type!==be||Xc.size!==pe||Xc.buffer!==ld||Xc.normalized!==yd||Xc.offset!==Te||Xc.stride!==ce)x.bindBuffer(34962,ld.buffer),x.vertexAttribPointer(Ac,pe,be,yd,ce,Te),Xc.type=be,Xc.size=pe,Xc.buffer=ld,Xc.normalized=yd,Xc.offset=Te,Xc.stride=ce;Xc.divisor!==Bd&&(O.vertexAttribDivisorANGLE(Ac,Bd),Xc.divisor=
Bd)}else if(Xc.buffer&&(x.disableVertexAttribArray(Ac),Xc.buffer=null),Xc.x!==ue||Xc.y!==Yd||Xc.z!==ge||Xc.w!==ae)x.vertexAttrib4f(Ac,ue,Yd,ge,ae),Xc.x=ue,Xc.y=Yd,Xc.z=ge,Xc.w=ae;x.uniform1i(w.location,!1);x.uniform1f(Ia.location,ja.pixelRatio);ie=a.scale;x.uniform2f(W.location,ie[0],ie[1]);Fd=a.scaleFract;x.uniform2f(gb.location,Fd[0],Fd[1]);Id=a.translate;x.uniform2f(ta.location,Id[0],Id[1]);Kd=a.translateFract;x.uniform2f(ic.location,Kd[0],Kd[1]);Ld=J.call(this,ja,a,0);x.uniform2f(Oa.location,
Ld[0],Ld[1]);x.uniform1f(Fa.location,a.opacity);x.uniform1i(dc.location,u.bind());(he=a.markerTexture)&&"framebuffer"===he._reglType&&(he=he.color[0]);Ye=he._texture;x.uniform1i(ba.location,Ye.bind());ve=a.elements;ne=null;(ne=(Ke=ha(ve))?Sc.createStream(ve):Sc.getElements(ve))&&x.bindBuffer(34963,ne.buffer.buffer);Le=a.offset;if(He=a.count)qe=sb.instances,0<qe?ne?O.drawElementsInstancedANGLE(0,He,ne.type,Le<<(ne.type-5121>>1),qe):O.drawArraysInstancedANGLE(0,Le,He,qe):0>qe&&(ne?x.drawElements(0,
He,ne.type,Le<<(ne.type-5121>>1)):x.drawArrays(0,Le,He)),Da.dirty=!0,ma.setVAO(null),ja.viewportWidth=n,ja.viewportHeight=r,R&&(V.cpuTime+=performance.now()-M),F&&G.destroyStream(Q),Wa&&G.destroyStream(ua),hb&&G.destroyStream(Pa),eb&&G.destroyStream(Ja),Ea&&G.destroyStream(pb),Cb&&G.destroyStream(rb),Kb&&G.destroyStream(Nb),hc&&G.destroyStream(Zc),bd&&G.destroyStream(ld),u.unbind(),Ye.unbind(),Ke&&Sc.destroyStream(ne)},scope:function(b,c,d){var f,l,p,q,v,t,w,u,x,y,z,D,K,N,C,H,O,A,J,U,Z,aa,P,T,S,W,
ga,Y,ba,ka,ea,ia,za,ua,ma,na,ta,ra,pa,Ia,Fa,Oa,yb,Na,$a,yc,Ma,nb,ub,hb,Pa,Hb,gb,mc,db,wd,Fb,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Wb,Ib,Za,Sb,xa,ic,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,ac,uc,pc,Oc,dc,sc,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,Vb,Gc,$c,Yc,xd,fd,$d,Xd,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Od,de,se,ce,be,ae,Ae,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,je,ve,ne,Ke,Le,He,qe,ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,
Re,We,Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf,rf,of,sf,Bf,Cf,Je,xe,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,pg,ef,af,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,ff,bf,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;f=b.viewport;l=f.x|0;p=f.y|0;q="width"in f?f.width|0:ja.framebufferWidth-l;v="height"in f?f.height|0:ja.framebufferHeight-p;t=ja.viewportWidth;ja.viewportWidth=q;w=ja.viewportHeight;ja.viewportHeight=
v;u=Qd[0];Qd[0]=l;x=Qd[1];Qd[1]=p;y=Qd[2];Qd[2]=q;z=Qd[3];Qd[3]=v;D=E[0];E[0]=0;K=E[1];E[1]=0;N=E[2];E[2]=0;C=E[3];E[3]=1;H=sa.blend_enable;sa.blend_enable=!0;O=wa[0];wa[0]=770;A=wa[1];wa[1]=771;J=wa[2];wa[2]=773;U=wa[3];wa[3]=1;Z=sa.depth_enable;sa.depth_enable=!1;aa=b.viewport;P=aa.x|0;T=aa.y|0;S="width"in aa?aa.width|0:ja.framebufferWidth-P;W="height"in aa?aa.height|0:ja.framebufferHeight-T;ga=re[0];re[0]=P;Y=re[1];re[1]=T;ba=re[2];re[2]=S;ka=re[3];re[3]=W;ea=sa.scissor_enable;sa.scissor_enable=
!0;ia=sa.stencil_enable;sa.stencil_enable=!1;if(za=Da.profile)ua=performance.now(),V.count++;ma=b.elements;na=null;na=(ta=ha(ma))?Sc.createStream(ma):Sc.getElements(ma);ra=sb.elements;sb.elements=na;pa=b.offset;Ia=sb.offset;sb.offset=pa;Fa=b.count;Oa=sb.count;sb.count=Fa;yb=sb.primitive;sb.primitive=0;Na=fa[45];fa[45]=!1;$a=b.markerTexture;yc=fa[48];fa[48]=$a;Ma=b.opacity;nb=fa[10];fa[10]=Ma;ub=B.call(this,ja,b,d);hb=fa[46];fa[46]=ub;Pa=fa[47];fa[47]=M;Hb=ja.pixelRatio;gb=fa[34];fa[34]=Hb;mc=b.scale;
db=fa[6];fa[6]=mc;wd=b.scaleFract;Fb=fa[7];fa[7]=wd;ec=b.translate;jb=fa[8];fa[8]=ec;kb=b.translateFract;qa=fa[9];fa[9]=kb;ob=r.call(this,ja,b,d);va=!1;Ua=null;bb=0;Aa=!1;Ja=eb=0;Bb=1;zb=0;Ra=5126;Sb=Za=Ib=Wb=0;ha(ob)?(va=!0,Ua=G.createStream(34962,ob),Ra=Ua.dtype):(Ua=G.getBuffer(ob))?Ra=Ua.dtype:"constant"in ob?(Bb=2,"number"===typeof ob.constant?(Ib=ob.constant,Za=Sb=Wb=0):(Ib=0<ob.constant.length?ob.constant[0]:0,Za=1<ob.constant.length?ob.constant[1]:0,Sb=2<ob.constant.length?ob.constant[2]:
0,Wb=3<ob.constant.length?ob.constant[3]:0)):(Ua=ha(ob.buffer)?G.createStream(34962,ob.buffer):G.getBuffer(ob.buffer),Ra="type"in ob?ee[ob.type]:Ua.dtype,Aa=!!ob.normalized,Ja=ob.size|0,eb=ob.offset|0,zb=ob.stride|0,bb=ob.divisor|0);xa=I.buffer;I.buffer=Ua;ic=I.divisor;I.divisor=bb;Ka=I.normalized;I.normalized=Aa;Lb=I.offset;I.offset=eb;fb=I.size;I.size=Ja;ib=I.state;I.state=Bb;ya=I.stride;I.stride=zb;fc=I.type;I.type=Ra;Ea=I.w;I.w=Wb;pb=I.x;I.x=Ib;qb=I.y;I.y=Za;Xa=I.z;I.z=Sb;Ya=oa.call(this,ja,b,
d);oc=!1;xc=null;vc=0;Va=!1;Tc=Yb=0;Ga=1;zc=0;Qa=5126;Cb=vb=lb=Ba=0;ha(Ya)?(oc=!0,xc=G.createStream(34962,Ya),Qa=xc.dtype):(xc=G.getBuffer(Ya))?Qa=xc.dtype:"constant"in Ya?(Ga=2,"number"===typeof Ya.constant?(lb=Ya.constant,vb=Cb=Ba=0):(lb=0<Ya.constant.length?Ya.constant[0]:0,vb=1<Ya.constant.length?Ya.constant[1]:0,Cb=2<Ya.constant.length?Ya.constant[2]:0,Ba=3<Ya.constant.length?Ya.constant[3]:0)):(xc=ha(Ya.buffer)?G.createStream(34962,Ya.buffer):G.getBuffer(Ya.buffer),Qa="type"in Ya?ee[Ya.type]:
xc.dtype,Va=!!Ya.normalized,Tc=Ya.size|0,Yb=Ya.offset|0,zc=Ya.stride|0,vc=Ya.divisor|0);rb=F.buffer;F.buffer=xc;wc=F.divisor;F.divisor=vc;wb=F.normalized;F.normalized=Va;ac=F.offset;F.offset=Yb;uc=F.size;F.size=Tc;pc=F.state;F.state=Ga;Oc=F.stride;F.stride=zc;dc=F.type;F.type=Qa;sc=F.w;F.w=Ba;Ub=F.x;F.x=lb;cc=F.y;F.y=vb;Mb=F.z;F.z=Cb;Ha=Ca.call(this,ja,b,d);Zb=!1;mb=null;xb=0;Kb=!1;gc=Nb=0;jc=1;Uc=0;Ec=5126;cd=Pc=Hc=Fc=0;ha(Ha)?(Zb=!0,mb=G.createStream(34962,Ha),Ec=mb.dtype):(mb=G.getBuffer(Ha))?
Ec=mb.dtype:"constant"in Ha?(jc=2,"number"===typeof Ha.constant?(Hc=Ha.constant,Pc=cd=Fc=0):(Hc=0<Ha.constant.length?Ha.constant[0]:0,Pc=1<Ha.constant.length?Ha.constant[1]:0,cd=2<Ha.constant.length?Ha.constant[2]:0,Fc=3<Ha.constant.length?Ha.constant[3]:0)):(mb=ha(Ha.buffer)?G.createStream(34962,Ha.buffer):G.getBuffer(Ha.buffer),Ec="type"in Ha?ee[Ha.type]:mb.dtype,Kb=!!Ha.normalized,gc=Ha.size|0,Nb=Ha.offset|0,Uc=Ha.stride|0,xb=Ha.divisor|0);Vc=k.buffer;k.buffer=mb;Qc=k.divisor;k.divisor=xb;Jb=k.normalized;
k.normalized=Kb;Eb=k.offset;k.offset=Nb;Rc=k.size;k.size=gc;Lc=k.state;k.state=jc;Wc=k.stride;k.stride=Uc;hc=k.type;k.type=Ec;Zc=k.w;k.w=Fc;jd=k.x;k.x=Hc;Vb=k.y;k.y=Pc;Gc=k.z;k.z=cd;$c=h.call(this,ja,b,d);Yc=!1;xd=null;fd=0;$d=!1;Gd=Xd=0;Ed=1;ed=0;Ic=5126;ld=bd=kd=pd=0;ha($c)?(Yc=!0,xd=G.createStream(34962,$c),Ic=xd.dtype):(xd=G.getBuffer($c))?Ic=xd.dtype:"constant"in $c?(Ed=2,"number"===typeof $c.constant?(kd=$c.constant,bd=ld=pd=0):(kd=0<$c.constant.length?$c.constant[0]:0,bd=1<$c.constant.length?
$c.constant[1]:0,ld=2<$c.constant.length?$c.constant[2]:0,pd=3<$c.constant.length?$c.constant[3]:0)):(xd=ha($c.buffer)?G.createStream(34962,$c.buffer):G.getBuffer($c.buffer),Ic="type"in $c?ee[$c.type]:xd.dtype,$d=!!$c.normalized,Gd=$c.size|0,Xd=$c.offset|0,ed=$c.stride|0,fd=$c.divisor|0);Bd=g.buffer;g.buffer=xd;yd=g.divisor;g.divisor=fd;Od=g.normalized;g.normalized=$d;de=g.offset;g.offset=Xd;se=g.size;g.size=Gd;ce=g.state;g.state=Ed;be=g.stride;g.stride=ed;ae=g.type;g.type=Ic;Ae=g.w;g.w=pd;Yd=g.x;
g.x=kd;ge=g.y;g.y=bd;Ac=g.z;g.z=ld;Xc=n.call(this,ja,b,d);pe=!1;ie=null;Fd=0;Id=!1;Ld=Kd=0;he=1;je=0;ve=5126;He=Le=Ke=ne=0;ha(Xc)?(pe=!0,ie=G.createStream(34962,Xc),ve=ie.dtype):(ie=G.getBuffer(Xc))?ve=ie.dtype:"constant"in Xc?(he=2,"number"===typeof Xc.constant?(Ke=Xc.constant,Le=He=ne=0):(Ke=0<Xc.constant.length?Xc.constant[0]:0,Le=1<Xc.constant.length?Xc.constant[1]:0,He=2<Xc.constant.length?Xc.constant[2]:0,ne=3<Xc.constant.length?Xc.constant[3]:0)):(ie=ha(Xc.buffer)?G.createStream(34962,Xc.buffer):
G.getBuffer(Xc.buffer),ve="type"in Xc?ee[Xc.type]:ie.dtype,Id=!!Xc.normalized,Ld=Xc.size|0,Kd=Xc.offset|0,je=Xc.stride|0,Fd=Xc.divisor|0);qe=R.buffer;R.buffer=ie;ye=R.divisor;R.divisor=Fd;Ce=R.normalized;R.normalized=Id;De=R.offset;R.offset=Kd;Ee=R.size;R.size=Ld;ze=R.state;R.state=he;Hd=R.stride;R.stride=je;Pd=R.type;R.type=ve;Wd=R.w;R.w=ne;Zd=R.x;R.x=Ke;Fe=R.y;R.y=Le;Ad=R.z;R.z=He;Md=ca.call(this,ja,b,d);we=!1;Ge=null;Re=0;We=!1;Ie=Me=0;Ue=1;Qe=0;Ne=5126;Pe=Ud=Nd=Oe=0;ha(Md)?(we=!0,Ge=G.createStream(34962,
Md),Ne=Ge.dtype):(Ge=G.getBuffer(Md))?Ne=Ge.dtype:"constant"in Md?(Ue=2,"number"===typeof Md.constant?(Nd=Md.constant,Ud=Pe=Oe=0):(Nd=0<Md.constant.length?Md.constant[0]:0,Ud=1<Md.constant.length?Md.constant[1]:0,Pe=2<Md.constant.length?Md.constant[2]:0,Oe=3<Md.constant.length?Md.constant[3]:0)):(Ge=ha(Md.buffer)?G.createStream(34962,Md.buffer):G.getBuffer(Md.buffer),Ne="type"in Md?ee[Md.type]:Ge.dtype,We=!!Md.normalized,Ie=Md.size|0,Me=Md.offset|0,Qe=Md.stride|0,Re=Md.divisor|0);hf=m.buffer;m.buffer=
Ge;nf=m.divisor;m.divisor=Re;df=m.normalized;m.normalized=We;jf=m.offset;m.offset=Me;kf=m.size;m.size=Ie;lf=m.state;m.state=Ue;rf=m.stride;m.stride=Qe;of=m.type;m.type=Ne;sf=m.w;m.w=Oe;Bf=m.x;m.x=Nd;Cf=m.y;m.y=Ud;Je=m.z;m.z=Pe;xe=la.call(this,ja,b,d);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;ha(xe)?(pf=!0,qf=G.createStream(34962,xe),xf=qf.dtype):(qf=G.getBuffer(xe))?xf=qf.dtype:"constant"in xe?(Ff=2,"number"===typeof xe.constant?(yf=xe.constant,zf=If=vf=0):(yf=0<xe.constant.length?
xe.constant[0]:0,zf=1<xe.constant.length?xe.constant[1]:0,If=2<xe.constant.length?xe.constant[2]:0,vf=3<xe.constant.length?xe.constant[3]:0)):(qf=ha(xe.buffer)?G.createStream(34962,xe.buffer):G.getBuffer(xe.buffer),xf="type"in xe?ee[xe.type]:qf.dtype,Gf=!!xe.normalized,Ef=xe.size|0,Af=xe.offset|0,wf=xe.stride|0,Df=xe.divisor|0);Jf=L.buffer;L.buffer=qf;Kf=L.divisor;L.divisor=Df;Lf=L.normalized;L.normalized=Gf;tf=L.offset;L.offset=Af;Qf=L.size;L.size=Ef;Hf=L.state;L.state=Ff;uf=L.stride;L.stride=wf;
cg=L.type;L.type=xf;Rf=L.w;L.w=vf;Sf=L.x;L.x=yf;pg=L.y;L.y=zf;ef=L.z;L.z=If;af=da.call(this,ja,b,d);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ha(af)?(Mf=!0,Nf=G.createStream(34962,af),Tf=Nf.dtype):(Nf=G.getBuffer(af))?Tf=Nf.dtype:"constant"in af?(hg=2,"number"===typeof af.constant?(Xf=af.constant,Yf=ig=Wf=0):(Xf=0<af.constant.length?af.constant[0]:0,Yf=1<af.constant.length?af.constant[1]:0,ig=2<af.constant.length?af.constant[2]:0,Wf=3<af.constant.length?af.constant[3]:0)):(Nf=
ha(af.buffer)?G.createStream(34962,af.buffer):G.getBuffer(af.buffer),Tf="type"in af?ee[af.type]:Nf.dtype,eg=!!af.normalized,gg=af.size|0,fg=af.offset|0,Vf=af.stride|0,dg=af.divisor|0);qg=a.buffer;a.buffer=Nf;rg=a.divisor;a.divisor=dg;sg=a.normalized;a.normalized=eg;tg=a.offset;a.offset=fg;ug=a.size;a.size=gg;vg=a.state;a.state=hg;wg=a.stride;a.stride=Vf;xg=a.type;a.type=Tf;yg=a.w;a.w=Wf;zg=a.x;a.x=Xf;Ag=a.y;a.y=Yf;ff=a.z;a.z=ig;bf=e.call(this,ja,b,d);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=
5126;og=bg=ag=$f=0;ha(bf)?(Of=!0,Pf=G.createStream(34962,bf),Uf=Pf.dtype):(Pf=G.getBuffer(bf))?Uf=Pf.dtype:"constant"in bf?(ng=2,"number"===typeof bf.constant?(ag=bf.constant,bg=og=$f=0):(ag=0<bf.constant.length?bf.constant[0]:0,bg=1<bf.constant.length?bf.constant[1]:0,og=2<bf.constant.length?bf.constant[2]:0,$f=3<bf.constant.length?bf.constant[3]:0)):(Pf=ha(bf.buffer)?G.createStream(34962,bf.buffer):G.getBuffer(bf.buffer),Uf="type"in bf?ee[bf.type]:Pf.dtype,kg=!!bf.normalized,mg=bf.size|0,lg=bf.offset|
0,Zf=bf.stride|0,jg=bf.divisor|0);Bg=X.buffer;X.buffer=Pf;Cg=X.divisor;X.divisor=jg;Dg=X.normalized;X.normalized=kg;Eg=X.offset;X.offset=lg;Fg=X.size;X.size=mg;Gg=X.state;X.state=ng;Hg=X.stride;X.stride=Zf;Ig=X.type;X.type=Uf;Jg=X.w;X.w=$f;Kg=X.x;X.x=ag;Lg=X.y;X.y=bg;Mg=X.z;X.z=og;Ng=Q.vert;Q.vert=44;Og=Q.frag;Q.frag=43;Da.dirty=!0;c(ja,b,d);ja.viewportWidth=t;ja.viewportHeight=w;Qd[0]=u;Qd[1]=x;Qd[2]=y;Qd[3]=z;E[0]=D;E[1]=K;E[2]=N;E[3]=C;sa.blend_enable=H;wa[0]=O;wa[1]=A;wa[2]=J;wa[3]=U;sa.depth_enable=
Z;re[0]=ga;re[1]=Y;re[2]=ba;re[3]=ka;sa.scissor_enable=ea;sa.stencil_enable=ia;za&&(V.cpuTime+=performance.now()-ua);ta&&Sc.destroyStream(na);sb.elements=ra;sb.offset=Ia;sb.count=Oa;sb.primitive=yb;fa[45]=Na;fa[48]=yc;fa[10]=nb;fa[46]=hb;fa[47]=Pa;fa[34]=gb;fa[6]=db;fa[7]=Fb;fa[8]=jb;fa[9]=qa;va&&G.destroyStream(Ua);I.buffer=xa;I.divisor=ic;I.normalized=Ka;I.offset=Lb;I.size=fb;I.state=ib;I.stride=ya;I.type=fc;I.w=Ea;I.x=pb;I.y=qb;I.z=Xa;oc&&G.destroyStream(xc);F.buffer=rb;F.divisor=wc;F.normalized=
wb;F.offset=ac;F.size=uc;F.state=pc;F.stride=Oc;F.type=dc;F.w=sc;F.x=Ub;F.y=cc;F.z=Mb;Zb&&G.destroyStream(mb);k.buffer=Vc;k.divisor=Qc;k.normalized=Jb;k.offset=Eb;k.size=Rc;k.state=Lc;k.stride=Wc;k.type=hc;k.w=Zc;k.x=jd;k.y=Vb;k.z=Gc;Yc&&G.destroyStream(xd);g.buffer=Bd;g.divisor=yd;g.normalized=Od;g.offset=de;g.size=se;g.state=ce;g.stride=be;g.type=ae;g.w=Ae;g.x=Yd;g.y=ge;g.z=Ac;pe&&G.destroyStream(ie);R.buffer=qe;R.divisor=ye;R.normalized=Ce;R.offset=De;R.size=Ee;R.state=ze;R.stride=Hd;R.type=Pd;
R.w=Wd;R.x=Zd;R.y=Fe;R.z=Ad;we&&G.destroyStream(Ge);m.buffer=hf;m.divisor=nf;m.normalized=df;m.offset=jf;m.size=kf;m.state=lf;m.stride=rf;m.type=of;m.w=sf;m.x=Bf;m.y=Cf;m.z=Je;pf&&G.destroyStream(qf);L.buffer=Jf;L.divisor=Kf;L.normalized=Lf;L.offset=tf;L.size=Qf;L.state=Hf;L.stride=uf;L.type=cg;L.w=Rf;L.x=Sf;L.y=pg;L.z=ef;Mf&&G.destroyStream(Nf);a.buffer=qg;a.divisor=rg;a.normalized=sg;a.offset=tg;a.size=ug;a.state=vg;a.stride=wg;a.type=xg;a.w=yg;a.x=zg;a.y=Ag;a.z=ff;Of&&G.destroyStream(Pf);X.buffer=
Bg;X.divisor=Cg;X.normalized=Dg;X.offset=Eg;X.size=Fg;X.state=Gg;X.stride=Hg;X.type=Ig;X.w=Jg;X.x=Kg;X.y=Lg;X.z=Mg;Q.vert=Ng;Q.frag=Og;Da.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,V,q,z,f,c,y,b,t,C,A,H,J,u,B,M,r,I,oa,F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,Vb,Fb,ac,ra,Na,Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta,ic,pc,sc,wd){var yc,Z,G,ja,
Da,sb,Sc,Yc,D,x,ha,sa,Q,fa,ma,E,v,aa,T,wa,ka,l,mc,U,p,Hb,yb,Re,je,re,$d,xd,Ae,Gc,de,se,Od,Qd,Xd;yc=d.attributes;Z=d.buffer;G=d.context;ja=d.current;Da=d.draw;sb=d.elements;Sc=d.extensions;Yc=d.framebuffer;D=d.gl;x=d.isBufferArgs;ha=d.next;sa=d.shader;Q=d.uniforms;fa=d.vao;ma=ha.blend_color;E=ja.blend_color;v=ha.blend_equation;aa=ja.blend_equation;T=ha.blend_func;wa=ja.blend_func;ka=ha.colorMask;l=ja.colorMask;mc=ha.depth_range;U=ja.depth_range;p=ha.polygonOffset_offset;Hb=ja.polygonOffset_offset;
yb=ha.sample_coverage;Re=ja.sample_coverage;je=ha.scissor_box;re=ja.scissor_box;$d=ha.stencil_func;xd=ja.stencil_func;Ae=ha.stencil_opBack;Gc=ja.stencil_opBack;de=ha.stencil_opFront;se=ja.stencil_opFront;Od=ha.viewport;Qd=ja.viewport;Xd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,e,d,f,g,h;c=Yc.next;c!==Yc.cur&&(c?D.bindFramebuffer(36160,c.framebuffer):D.bindFramebuffer(36160,null),Yc.cur=c);if(ja.dirty){var k,m,n,
q,r,t,u,y,z,B,L,I,C,H,A,J,R,M,F,T,Q,ca,X,ga,da,Ca,la,sa,ma,za,oa,Ab,Sa,Tb;k=ha.dither;k!==ja.dither&&(k?D.enable(3024):D.disable(3024),ja.dither=k);m=v[0];n=v[1];if(m!==aa[0]||n!==aa[1])D.blendEquationSeparate(m,n),aa[0]=m,aa[1]=n;q=ha.depth_func;q!==ja.depth_func&&(D.depthFunc(q),ja.depth_func=q);r=mc[0];t=mc[1];if(r!==U[0]||t!==U[1])D.depthRange(r,t),U[0]=r,U[1]=t;u=ha.depth_mask;u!==ja.depth_mask&&(D.depthMask(u),ja.depth_mask=u);y=ka[0];z=ka[1];B=ka[2];L=ka[3];if(y!==l[0]||z!==l[1]||B!==l[2]||
L!==l[3])D.colorMask(y,z,B,L),l[0]=y,l[1]=z,l[2]=B,l[3]=L;I=ha.cull_enable;I!==ja.cull_enable&&(I?D.enable(2884):D.disable(2884),ja.cull_enable=I);C=ha.cull_face;C!==ja.cull_face&&(D.cullFace(C),ja.cull_face=C);H=ha.frontFace;H!==ja.frontFace&&(D.frontFace(H),ja.frontFace=H);A=ha.lineWidth;A!==ja.lineWidth&&(D.lineWidth(A),ja.lineWidth=A);J=ha.polygonOffset_enable;J!==ja.polygonOffset_enable&&(J?D.enable(32823):D.disable(32823),ja.polygonOffset_enable=J);R=p[0];M=p[1];if(R!==Hb[0]||M!==Hb[1])D.polygonOffset(R,
M),Hb[0]=R,Hb[1]=M;F=ha.sample_alpha;F!==ja.sample_alpha&&(F?D.enable(32926):D.disable(32926),ja.sample_alpha=F);T=ha.sample_enable;T!==ja.sample_enable&&(T?D.enable(32928):D.disable(32928),ja.sample_enable=T);Q=yb[0];ca=yb[1];if(Q!==Re[0]||ca!==Re[1])D.sampleCoverage(Q,ca),Re[0]=Q,Re[1]=ca;X=ha.stencil_mask;X!==ja.stencil_mask&&(D.stencilMask(X),ja.stencil_mask=X);ga=$d[0];da=$d[1];Ca=$d[2];if(ga!==xd[0]||da!==xd[1]||Ca!==xd[2])D.stencilFunc(ga,da,Ca),xd[0]=ga,xd[1]=da,xd[2]=Ca;la=de[0];sa=de[1];
ma=de[2];za=de[3];if(la!==se[0]||sa!==se[1]||ma!==se[2]||za!==se[3])D.stencilOpSeparate(la,sa,ma,za),se[0]=la,se[1]=sa,se[2]=ma,se[3]=za;oa=Ae[0];Ab=Ae[1];Sa=Ae[2];Tb=Ae[3];if(oa!==Gc[0]||Ab!==Gc[1]||Sa!==Gc[2]||Tb!==Gc[3])D.stencilOpSeparate(oa,Ab,Sa,Tb),Gc[0]=oa,Gc[1]=Ab,Gc[2]=Sa,Gc[3]=Tb}D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);ja.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;D.disable(2929);ja.depth_enable=!1;D.enable(3089);ja.scissor_enable=
!0;D.disable(2960);ja.stencil_enable=!1;if(e=ja.profile)d=performance.now(),V.count+=b;D.useProgram(pa.program);f=Sc.angle_instanced_arrays;var cb;fa.setVAO(null);D.uniform1i(w.location,!1);D.uniform1i(Oa.location,na.bind());cb=Da.instances;for(g=0;g<b;++g){h=a[g];var lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Od,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,
Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,je,Vd,$e,Xe,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Te,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Ye,ve,ne,Ke,Le,He,qe,ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf,rf,of,sf,Bf,Cf,Je,xe,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf;lc=h.viewport;Ob=lc.x|0;fe=lc.y|0;$b="width"in lc?lc.width|0:G.framebufferWidth-Ob;Pb="height"in lc?lc.height|0:G.framebufferHeight-fe;hd=
G.viewportWidth;G.viewportWidth=$b;Qb=G.viewportHeight;G.viewportHeight=Pb;D.viewport(Ob,fe,$b,Pb);Qd[0]=Ob;Qd[1]=fe;Qd[2]=$b;Qd[3]=Pb;Ma=h.viewport;nb=Ma.x|0;ub=Ma.y|0;hb="width"in Ma?Ma.width|0:G.framebufferWidth-nb;Pa="height"in Ma?Ma.height|0:G.framebufferHeight-ub;D.scissor(nb,ub,hb,Pa);re[0]=nb;re[1]=ub;re[2]=hb;re[3]=Pa;qc=Vb.call(this,G,h,g);Rb=!1;od=null;db=0;nc=!1;ec=Kc=0;jb=1;kb=0;qa=5126;bb=Ua=va=ob=0;x(qc)?(Rb=!0,od=Z.createStream(34962,qc),qa=od.dtype):(od=Z.getBuffer(qc))?qa=od.dtype:
"constant"in qc?(jb=2,"number"===typeof qc.constant?(va=qc.constant,Ua=bb=ob=0):(va=0<qc.constant.length?qc.constant[0]:0,Ua=1<qc.constant.length?qc.constant[1]:0,bb=2<qc.constant.length?qc.constant[2]:0,ob=3<qc.constant.length?qc.constant[3]:0)):(od=x(qc.buffer)?Z.createStream(34962,qc.buffer):Z.getBuffer(qc.buffer),qa="type"in qc?Xd[qc.type]:od.dtype,nc=!!qc.normalized,ec=qc.size|0,Kc=qc.offset|0,kb=qc.stride|0,db=qc.divisor|0);Aa=ic.location;eb=yc[Aa];if(1===jb){eb.buffer||D.enableVertexAttribArray(Aa);
Ja=ec||1;if(eb.type!==qa||eb.size!==Ja||eb.buffer!==od||eb.normalized!==nc||eb.offset!==Kc||eb.stride!==kb)D.bindBuffer(34962,od.buffer),D.vertexAttribPointer(Aa,Ja,qa,nc,kb,Kc),eb.type=qa,eb.size=Ja,eb.buffer=od,eb.normalized=nc,eb.offset=Kc,eb.stride=kb;eb.divisor!==db&&(f.vertexAttribDivisorANGLE(Aa,db),eb.divisor=db)}else if(eb.buffer&&(D.disableVertexAttribArray(Aa),eb.buffer=null),eb.x!==va||eb.y!==Ua||eb.z!==bb||eb.w!==ob)D.vertexAttrib4f(Aa,va,Ua,bb,ob),eb.x=va,eb.y=Ua,eb.z=bb,eb.w=ob;Bb=
Fb.call(this,G,h,g);zb=!1;Ra=null;Mc=0;Ib=!1;Sb=Za=0;xa=1;Od=0;Ka=5126;ya=ib=fb=Lb=0;x(Bb)?(zb=!0,Ra=Z.createStream(34962,Bb),Ka=Ra.dtype):(Ra=Z.getBuffer(Bb))?Ka=Ra.dtype:"constant"in Bb?(xa=2,"number"===typeof Bb.constant?(fb=Bb.constant,ib=ya=Lb=0):(fb=0<Bb.constant.length?Bb.constant[0]:0,ib=1<Bb.constant.length?Bb.constant[1]:0,ya=2<Bb.constant.length?Bb.constant[2]:0,Lb=3<Bb.constant.length?Bb.constant[3]:0)):(Ra=x(Bb.buffer)?Z.createStream(34962,Bb.buffer):Z.getBuffer(Bb.buffer),Ka="type"in
Bb?Xd[Bb.type]:Ra.dtype,Ib=!!Bb.normalized,Sb=Bb.size|0,Za=Bb.offset|0,Od=Bb.stride|0,Mc=Bb.divisor|0);fc=sc.location;Ea=yc[fc];if(1===xa){Ea.buffer||D.enableVertexAttribArray(fc);pb=Sb||1;if(Ea.type!==Ka||Ea.size!==pb||Ea.buffer!==Ra||Ea.normalized!==Ib||Ea.offset!==Za||Ea.stride!==Od)D.bindBuffer(34962,Ra.buffer),D.vertexAttribPointer(fc,pb,Ka,Ib,Od,Za),Ea.type=Ka,Ea.size=pb,Ea.buffer=Ra,Ea.normalized=Ib,Ea.offset=Za,Ea.stride=Od;Ea.divisor!==Mc&&(f.vertexAttribDivisorANGLE(fc,Mc),Ea.divisor=Mc)}else if(Ea.buffer&&
(D.disableVertexAttribArray(fc),Ea.buffer=null),Ea.x!==fb||Ea.y!==ib||Ea.z!==ya||Ea.w!==Lb)D.vertexAttrib4f(fc,fb,ib,ya,Lb),Ea.x=fb,Ea.y=ib,Ea.z=ya,Ea.w=Lb;qb=ac.call(this,G,h,g);Xa=!1;Ya=null;oc=0;xc=!1;Va=vc=0;Yb=1;Tc=0;Ga=5126;lb=Ba=Qa=zc=0;x(qb)?(Xa=!0,Ya=Z.createStream(34962,qb),Ga=Ya.dtype):(Ya=Z.getBuffer(qb))?Ga=Ya.dtype:"constant"in qb?(Yb=2,"number"===typeof qb.constant?(Qa=qb.constant,Ba=lb=zc=0):(Qa=0<qb.constant.length?qb.constant[0]:0,Ba=1<qb.constant.length?qb.constant[1]:0,lb=2<qb.constant.length?
qb.constant[2]:0,zc=3<qb.constant.length?qb.constant[3]:0)):(Ya=x(qb.buffer)?Z.createStream(34962,qb.buffer):Z.getBuffer(qb.buffer),Ga="type"in qb?Xd[qb.type]:Ya.dtype,xc=!!qb.normalized,Va=qb.size|0,vc=qb.offset|0,Tc=qb.stride|0,oc=qb.divisor|0);vb=pc.location;Cb=yc[vb];if(1===Yb){Cb.buffer||D.enableVertexAttribArray(vb);rb=Va||1;if(Cb.type!==Ga||Cb.size!==rb||Cb.buffer!==Ya||Cb.normalized!==xc||Cb.offset!==vc||Cb.stride!==Tc)D.bindBuffer(34962,Ya.buffer),D.vertexAttribPointer(vb,rb,Ga,xc,Tc,vc),
Cb.type=Ga,Cb.size=rb,Cb.buffer=Ya,Cb.normalized=xc,Cb.offset=vc,Cb.stride=Tc;Cb.divisor!==oc&&(f.vertexAttribDivisorANGLE(vb,oc),Cb.divisor=oc)}else if(Cb.buffer&&(D.disableVertexAttribArray(vb),Cb.buffer=null),Cb.x!==Qa||Cb.y!==Ba||Cb.z!==lb||Cb.w!==zc)D.vertexAttrib4f(vb,Qa,Ba,lb,zc),Cb.x=Qa,Cb.y=Ba,Cb.z=lb,Cb.w=zc;wc=ra.call(this,G,h,g);wb=!1;Jd=null;uc=0;Td=!1;id=Oc=0;ud=1;Ub=0;cc=5126;mb=Zb=Ha=Mb=0;x(wc)?(wb=!0,Jd=Z.createStream(34962,wc),cc=Jd.dtype):(Jd=Z.getBuffer(wc))?cc=Jd.dtype:"constant"in
wc?(ud=2,"number"===typeof wc.constant?(Ha=wc.constant,Zb=mb=Mb=0):(Ha=0<wc.constant.length?wc.constant[0]:0,Zb=1<wc.constant.length?wc.constant[1]:0,mb=2<wc.constant.length?wc.constant[2]:0,Mb=3<wc.constant.length?wc.constant[3]:0)):(Jd=x(wc.buffer)?Z.createStream(34962,wc.buffer):Z.getBuffer(wc.buffer),cc="type"in wc?Xd[wc.type]:Jd.dtype,Td=!!wc.normalized,id=wc.size|0,Oc=wc.offset|0,Ub=wc.stride|0,uc=wc.divisor|0);xb=wd.location;Kb=yc[xb];if(1===ud){Kb.buffer||D.enableVertexAttribArray(xb);Nb=
id||1;if(Kb.type!==cc||Kb.size!==Nb||Kb.buffer!==Jd||Kb.normalized!==Td||Kb.offset!==Oc||Kb.stride!==Ub)D.bindBuffer(34962,Jd.buffer),D.vertexAttribPointer(xb,Nb,cc,Td,Ub,Oc),Kb.type=cc,Kb.size=Nb,Kb.buffer=Jd,Kb.normalized=Td,Kb.offset=Oc,Kb.stride=Ub;Kb.divisor!==uc&&(f.vertexAttribDivisorANGLE(xb,uc),Kb.divisor=uc)}else if(Kb.buffer&&(D.disableVertexAttribArray(xb),Kb.buffer=null),Kb.x!==Ha||Kb.y!==Zb||Kb.z!==mb||Kb.w!==Mb)D.vertexAttrib4f(xb,Ha,Zb,mb,Mb),Kb.x=Ha,Kb.y=Zb,Kb.z=mb,Kb.w=Mb;gc=Na.call(this,
G,h,g);jc=!1;Uc=null;Ec=0;Fc=!1;Pc=Hc=0;cd=1;Vc=0;Qc=5126;Lc=Rc=Eb=Jb=0;x(gc)?(jc=!0,Uc=Z.createStream(34962,gc),Qc=Uc.dtype):(Uc=Z.getBuffer(gc))?Qc=Uc.dtype:"constant"in gc?(cd=2,"number"===typeof gc.constant?(Eb=gc.constant,Rc=Lc=Jb=0):(Eb=0<gc.constant.length?gc.constant[0]:0,Rc=1<gc.constant.length?gc.constant[1]:0,Lc=2<gc.constant.length?gc.constant[2]:0,Jb=3<gc.constant.length?gc.constant[3]:0)):(Uc=x(gc.buffer)?Z.createStream(34962,gc.buffer):Z.getBuffer(gc.buffer),Qc="type"in gc?Xd[gc.type]:
Uc.dtype,Fc=!!gc.normalized,Pc=gc.size|0,Hc=gc.offset|0,Vc=gc.stride|0,Ec=gc.divisor|0);Wc=gb.location;hc=yc[Wc];if(1===cd){hc.buffer||D.enableVertexAttribArray(Wc);Zc=Pc||1;if(hc.type!==Qc||hc.size!==Zc||hc.buffer!==Uc||hc.normalized!==Fc||hc.offset!==Hc||hc.stride!==Vc)D.bindBuffer(34962,Uc.buffer),D.vertexAttribPointer(Wc,Zc,Qc,Fc,Vc,Hc),hc.type=Qc,hc.size=Zc,hc.buffer=Uc,hc.normalized=Fc,hc.offset=Hc,hc.stride=Vc;hc.divisor!==Ec&&(f.vertexAttribDivisorANGLE(Wc,Ec),hc.divisor=Ec)}else if(hc.buffer&&
(D.disableVertexAttribArray(Wc),hc.buffer=null),hc.x!==Eb||hc.y!==Rc||hc.z!==Lc||hc.w!==Jb)D.vertexAttrib4f(Wc,Eb,Rc,Lc,Jb),hc.x=Eb,hc.y=Rc,hc.z=Lc,hc.w=Jb;jd=Y.call(this,G,h,g);vd=!1;oe=null;$c=0;je=!1;$e=Vd=0;Xe=1;le=0;Gd=5126;pd=Ic=ed=Ed=0;x(jd)?(vd=!0,oe=Z.createStream(34962,jd),Gd=oe.dtype):(oe=Z.getBuffer(jd))?Gd=oe.dtype:"constant"in jd?(Xe=2,"number"===typeof jd.constant?(ed=jd.constant,Ic=pd=Ed=0):(ed=0<jd.constant.length?jd.constant[0]:0,Ic=1<jd.constant.length?jd.constant[1]:0,pd=2<jd.constant.length?
jd.constant[2]:0,Ed=3<jd.constant.length?jd.constant[3]:0)):(oe=x(jd.buffer)?Z.createStream(34962,jd.buffer):Z.getBuffer(jd.buffer),Gd="type"in jd?Xd[jd.type]:oe.dtype,je=!!jd.normalized,$e=jd.size|0,Vd=jd.offset|0,le=jd.stride|0,$c=jd.divisor|0);kd=$a.location;bd=yc[kd];if(1===Xe){bd.buffer||D.enableVertexAttribArray(kd);ld=$e||1;if(bd.type!==Gd||bd.size!==ld||bd.buffer!==oe||bd.normalized!==je||bd.offset!==Vd||bd.stride!==le)D.bindBuffer(34962,oe.buffer),D.vertexAttribPointer(kd,ld,Gd,je,le,Vd),
bd.type=Gd,bd.size=ld,bd.buffer=oe,bd.normalized=je,bd.offset=Vd,bd.stride=le;bd.divisor!==$c&&(f.vertexAttribDivisorANGLE(kd,$c),bd.divisor=$c)}else if(bd.buffer&&(D.disableVertexAttribArray(kd),bd.buffer=null),bd.x!==ed||bd.y!==Ic||bd.z!==pd||bd.w!==Ed)D.vertexAttrib4f(kd,ed,Ic,pd,Ed),bd.x=ed,bd.y=Ic,bd.z=pd,bd.w=Ed;Bd=K.call(this,G,h,g);yd=!1;Te=null;me=0;te=!1;be=ce=0;ae=1;ue=0;Yd=5126;pe=Xc=Ac=ge=0;x(Bd)?(yd=!0,Te=Z.createStream(34962,Bd),Yd=Te.dtype):(Te=Z.getBuffer(Bd))?Yd=Te.dtype:"constant"in
Bd?(ae=2,"number"===typeof Bd.constant?(Ac=Bd.constant,Xc=pe=ge=0):(Ac=0<Bd.constant.length?Bd.constant[0]:0,Xc=1<Bd.constant.length?Bd.constant[1]:0,pe=2<Bd.constant.length?Bd.constant[2]:0,ge=3<Bd.constant.length?Bd.constant[3]:0)):(Te=x(Bd.buffer)?Z.createStream(34962,Bd.buffer):Z.getBuffer(Bd.buffer),Yd="type"in Bd?Xd[Bd.type]:Te.dtype,te=!!Bd.normalized,be=Bd.size|0,ce=Bd.offset|0,ue=Bd.stride|0,me=Bd.divisor|0);ie=P.location;Fd=yc[ie];if(1===ae){Fd.buffer||D.enableVertexAttribArray(ie);Id=be||
4;if(Fd.type!==Yd||Fd.size!==Id||Fd.buffer!==Te||Fd.normalized!==te||Fd.offset!==ce||Fd.stride!==ue)D.bindBuffer(34962,Te.buffer),D.vertexAttribPointer(ie,Id,Yd,te,ue,ce),Fd.type=Yd,Fd.size=Id,Fd.buffer=Te,Fd.normalized=te,Fd.offset=ce,Fd.stride=ue;Fd.divisor!==me&&(f.vertexAttribDivisorANGLE(ie,me),Fd.divisor=me)}else if(Fd.buffer&&(D.disableVertexAttribArray(ie),Fd.buffer=null),Fd.x!==Ac||Fd.y!==Xc||Fd.z!==pe||Fd.w!==ge)D.vertexAttrib4f(ie,Ac,Xc,pe,ge),Fd.x=Ac,Fd.y=Xc,Fd.z=pe,Fd.w=ge;Kd=N.call(this,
G,h,g);Ld=!1;he=null;Ye=0;ve=!1;Ke=ne=0;Le=1;He=0;qe=5126;Ee=De=Ce=ye=0;x(Kd)?(Ld=!0,he=Z.createStream(34962,Kd),qe=he.dtype):(he=Z.getBuffer(Kd))?qe=he.dtype:"constant"in Kd?(Le=2,"number"===typeof Kd.constant?(Ce=Kd.constant,De=Ee=ye=0):(Ce=0<Kd.constant.length?Kd.constant[0]:0,De=1<Kd.constant.length?Kd.constant[1]:0,Ee=2<Kd.constant.length?Kd.constant[2]:0,ye=3<Kd.constant.length?Kd.constant[3]:0)):(he=x(Kd.buffer)?Z.createStream(34962,Kd.buffer):Z.getBuffer(Kd.buffer),qe="type"in Kd?Xd[Kd.type]:
he.dtype,ve=!!Kd.normalized,Ke=Kd.size|0,ne=Kd.offset|0,He=Kd.stride|0,Ye=Kd.divisor|0);ze=Wb.location;Hd=yc[ze];if(1===Le){Hd.buffer||D.enableVertexAttribArray(ze);Pd=Ke||4;if(Hd.type!==qe||Hd.size!==Pd||Hd.buffer!==he||Hd.normalized!==ve||Hd.offset!==ne||Hd.stride!==He)D.bindBuffer(34962,he.buffer),D.vertexAttribPointer(ze,Pd,qe,ve,He,ne),Hd.type=qe,Hd.size=Pd,Hd.buffer=he,Hd.normalized=ve,Hd.offset=ne,Hd.stride=He;Hd.divisor!==Ye&&(f.vertexAttribDivisorANGLE(ze,Ye),Hd.divisor=Ye)}else if(Hd.buffer&&
(D.disableVertexAttribArray(ze),Hd.buffer=null),Hd.x!==Ce||Hd.y!==De||Hd.z!==Ee||Hd.w!==ye)D.vertexAttrib4f(ze,Ce,De,Ee,ye),Hd.x=Ce,Hd.y=De,Hd.z=Ee,Hd.w=ye;Wd=S.call(this,G,h,g);Zd=!1;Fe=null;Ad=0;Md=!1;Ge=we=0;gf=1;We=0;Me=5126;Ne=Qe=Ue=Ie=0;x(Wd)?(Zd=!0,Fe=Z.createStream(34962,Wd),Me=Fe.dtype):(Fe=Z.getBuffer(Wd))?Me=Fe.dtype:"constant"in Wd?(gf=2,"number"===typeof Wd.constant?(Ue=Wd.constant,Qe=Ne=Ie=0):(Ue=0<Wd.constant.length?Wd.constant[0]:0,Qe=1<Wd.constant.length?Wd.constant[1]:0,Ne=2<Wd.constant.length?
Wd.constant[2]:0,Ie=3<Wd.constant.length?Wd.constant[3]:0)):(Fe=x(Wd.buffer)?Z.createStream(34962,Wd.buffer):Z.getBuffer(Wd.buffer),Me="type"in Wd?Xd[Wd.type]:Fe.dtype,Md=!!Wd.normalized,Ge=Wd.size|0,we=Wd.offset|0,We=Wd.stride|0,Ad=Wd.divisor|0);Oe=ia.location;Nd=yc[Oe];if(1===gf){Nd.buffer||D.enableVertexAttribArray(Oe);Ud=Ge||1;if(Nd.type!==Me||Nd.size!==Ud||Nd.buffer!==Fe||Nd.normalized!==Md||Nd.offset!==we||Nd.stride!==We)D.bindBuffer(34962,Fe.buffer),D.vertexAttribPointer(Oe,Ud,Me,Md,We,we),
Nd.type=Me,Nd.size=Ud,Nd.buffer=Fe,Nd.normalized=Md,Nd.offset=we,Nd.stride=We;Nd.divisor!==Ad&&(f.vertexAttribDivisorANGLE(Oe,Ad),Nd.divisor=Ad)}else if(Nd.buffer&&(D.disableVertexAttribArray(Oe),Nd.buffer=null),Nd.x!==Ue||Nd.y!==Qe||Nd.z!==Ne||Nd.w!==Ie)D.vertexAttrib4f(Oe,Ue,Qe,Ne,Ie),Nd.x=Ue,Nd.y=Qe,Nd.z=Ne,Nd.w=Ie;Pe=G.pixelRatio;g&&hf===Pe||(hf=Pe,D.uniform1f(dc.location,Pe));nf=O.call(this,G,h,g);df=nf[0];kf=nf[1];g&&jf===df&&lf===kf||(jf=df,lf=kf,D.uniform2f(Fa.location,df,kf));rf=h.scale;
of=rf[0];Bf=rf[1];g&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,D.uniform2f(Ia.location,of,Bf));Je=h.scaleFract;xe=Je[0];qf=Je[1];g&&pf===xe&&Df===qf||(pf=xe,Df=qf,D.uniform2f(W.location,xe,qf));Gf=h.translate;Af=Gf[0];Ff=Gf[1];g&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,D.uniform2f(ea.location,Af,Ff));xf=h.translateFract;vf=xf[0];zf=xf[1];g&&yf===vf&&If===zf||(yf=vf,If=zf,D.uniform2f(ta.location,vf,zf));Jf=h.opacity;g&&Kf===Jf||(Kf=Jf,D.uniform1f(ba.location,Jf));Lf=h.elements;tf=null;(tf=(Qf=x(Lf))?sb.createStream(Lf):
sb.getElements(Lf))&&D.bindBuffer(34963,tf.buffer.buffer);Hf=h.offset;if(uf=h.count)0<cb?tf?f.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),cb):f.drawArraysInstancedANGLE(0,Hf,uf,cb):0>cb&&(tf?D.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):D.drawArrays(0,Hf,uf)),G.viewportWidth=hd,G.viewportHeight=Qb,Rb&&Z.destroyStream(od),zb&&Z.destroyStream(Ra),Xa&&Z.destroyStream(Ya),wb&&Z.destroyStream(Jd),jc&&Z.destroyStream(Uc),vd&&Z.destroyStream(oe),yd&&Z.destroyStream(Te),Ld&&Z.destroyStream(he),
Zd&&Z.destroyStream(Fe),Qf&&sb.destroyStream(tf)}na.unbind();ja.dirty=!0;fa.setVAO(null);e&&(V.cpuTime+=performance.now()-d)},draw:function(a){var e,d,g,h,k,m,n,r,B,L,K,I,N,O,R,M,F,T,Q,ca,S,X,Y,da,Ca,la,sa,ma,na,ra,pa,oa,Na,La,tb,Wa,ua,Fb,Ab,Sa,Tb,cb,lc,Ob,ac,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,Vb,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,fd,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Od,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,
Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd,vd,oe,$c,je,Vd,$e,Xe,le,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Te,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Ye,ve,ne,Ke;e=Yc.next;e!==Yc.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),Yc.cur=e);if(ja.dirty){var Le,He,qe,ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf;Le=ha.dither;Le!==ja.dither&&(Le?D.enable(3024):D.disable(3024),ja.dither=Le);He=v[0];qe=v[1];if(He!==aa[0]||qe!==aa[1])D.blendEquationSeparate(He,
qe),aa[0]=He,aa[1]=qe;ye=ha.depth_func;ye!==ja.depth_func&&(D.depthFunc(ye),ja.depth_func=ye);Ce=mc[0];De=mc[1];if(Ce!==U[0]||De!==U[1])D.depthRange(Ce,De),U[0]=Ce,U[1]=De;Ee=ha.depth_mask;Ee!==ja.depth_mask&&(D.depthMask(Ee),ja.depth_mask=Ee);ze=ka[0];Hd=ka[1];Pd=ka[2];Wd=ka[3];if(ze!==l[0]||Hd!==l[1]||Pd!==l[2]||Wd!==l[3])D.colorMask(ze,Hd,Pd,Wd),l[0]=ze,l[1]=Hd,l[2]=Pd,l[3]=Wd;Zd=ha.cull_enable;Zd!==ja.cull_enable&&(Zd?D.enable(2884):D.disable(2884),ja.cull_enable=Zd);Fe=ha.cull_face;Fe!==ja.cull_face&&
(D.cullFace(Fe),ja.cull_face=Fe);Ad=ha.frontFace;Ad!==ja.frontFace&&(D.frontFace(Ad),ja.frontFace=Ad);Md=ha.lineWidth;Md!==ja.lineWidth&&(D.lineWidth(Md),ja.lineWidth=Md);we=ha.polygonOffset_enable;we!==ja.polygonOffset_enable&&(we?D.enable(32823):D.disable(32823),ja.polygonOffset_enable=we);Ge=p[0];gf=p[1];if(Ge!==Hb[0]||gf!==Hb[1])D.polygonOffset(Ge,gf),Hb[0]=Ge,Hb[1]=gf;We=ha.sample_alpha;We!==ja.sample_alpha&&(We?D.enable(32926):D.disable(32926),ja.sample_alpha=We);Me=ha.sample_enable;Me!==ja.sample_enable&&
(Me?D.enable(32928):D.disable(32928),ja.sample_enable=Me);Ie=yb[0];Ue=yb[1];if(Ie!==Re[0]||Ue!==Re[1])D.sampleCoverage(Ie,Ue),Re[0]=Ie,Re[1]=Ue;Qe=ha.stencil_mask;Qe!==ja.stencil_mask&&(D.stencilMask(Qe),ja.stencil_mask=Qe);Ne=$d[0];Oe=$d[1];Nd=$d[2];if(Ne!==xd[0]||Oe!==xd[1]||Nd!==xd[2])D.stencilFunc(Ne,Oe,Nd),xd[0]=Ne,xd[1]=Oe,xd[2]=Nd;Ud=de[0];Pe=de[1];hf=de[2];nf=de[3];if(Ud!==se[0]||Pe!==se[1]||hf!==se[2]||nf!==se[3])D.stencilOpSeparate(Ud,Pe,hf,nf),se[0]=Ud,se[1]=Pe,se[2]=hf,se[3]=nf;df=Ae[0];
jf=Ae[1];kf=Ae[2];lf=Ae[3];if(df!==Gc[0]||jf!==Gc[1]||kf!==Gc[2]||lf!==Gc[3])D.stencilOpSeparate(df,jf,kf,lf),Gc[0]=df,Gc[1]=jf,Gc[2]=kf,Gc[3]=lf}d=a.viewport;g=d.x|0;h=d.y|0;k="width"in d?d.width|0:G.framebufferWidth-g;m="height"in d?d.height|0:G.framebufferHeight-h;n=G.viewportWidth;G.viewportWidth=k;r=G.viewportHeight;G.viewportHeight=m;D.viewport(g,h,k,m);Qd[0]=g;Qd[1]=h;Qd[2]=k;Qd[3]=m;D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);ja.blend_enable=!0;D.blendFuncSeparate(770,
771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;D.disable(2929);ja.depth_enable=!1;B=a.viewport;L=B.x|0;K=B.y|0;I="width"in B?B.width|0:G.framebufferWidth-L;N="height"in B?B.height|0:G.framebufferHeight-K;D.scissor(L,K,I,N);re[0]=L;re[1]=K;re[2]=I;re[3]=N;D.enable(3089);ja.scissor_enable=!0;D.disable(2960);ja.stencil_enable=!1;if(O=ja.profile)R=performance.now(),V.count++;D.useProgram(q.program);M=Sc.angle_instanced_arrays;fa.setVAO(null);F=z.call(this,G,a,0);T=!1;Q=null;ca=0;S=!1;Y=X=0;da=1;Ca=
0;la=5126;ra=na=ma=sa=0;x(F)?(T=!0,Q=Z.createStream(34962,F),la=Q.dtype):(Q=Z.getBuffer(F))?la=Q.dtype:"constant"in F?(da=2,"number"===typeof F.constant?(ma=F.constant,na=ra=sa=0):(ma=0<F.constant.length?F.constant[0]:0,na=1<F.constant.length?F.constant[1]:0,ra=2<F.constant.length?F.constant[2]:0,sa=3<F.constant.length?F.constant[3]:0)):(Q=x(F.buffer)?Z.createStream(34962,F.buffer):Z.getBuffer(F.buffer),la="type"in F?Xd[F.type]:Q.dtype,S=!!F.normalized,Y=F.size|0,X=F.offset|0,Ca=F.stride|0,ca=F.divisor|
0);pa=ic.location;oa=yc[pa];if(1===da){oa.buffer||D.enableVertexAttribArray(pa);Na=Y||1;if(oa.type!==la||oa.size!==Na||oa.buffer!==Q||oa.normalized!==S||oa.offset!==X||oa.stride!==Ca)D.bindBuffer(34962,Q.buffer),D.vertexAttribPointer(pa,Na,la,S,Ca,X),oa.type=la,oa.size=Na,oa.buffer=Q,oa.normalized=S,oa.offset=X,oa.stride=Ca;oa.divisor!==ca&&(M.vertexAttribDivisorANGLE(pa,ca),oa.divisor=ca)}else if(oa.buffer&&(D.disableVertexAttribArray(pa),oa.buffer=null),oa.x!==ma||oa.y!==na||oa.z!==ra||oa.w!==sa)D.vertexAttrib4f(pa,
ma,na,ra,sa),oa.x=ma,oa.y=na,oa.z=ra,oa.w=sa;La=f.call(this,G,a,0);tb=!1;Wa=null;ua=0;Fb=!1;Sa=Ab=0;Tb=1;cb=0;lc=5126;Pb=$b=ac=Ob=0;x(La)?(tb=!0,Wa=Z.createStream(34962,La),lc=Wa.dtype):(Wa=Z.getBuffer(La))?lc=Wa.dtype:"constant"in La?(Tb=2,"number"===typeof La.constant?(ac=La.constant,$b=Pb=Ob=0):(ac=0<La.constant.length?La.constant[0]:0,$b=1<La.constant.length?La.constant[1]:0,Pb=2<La.constant.length?La.constant[2]:0,Ob=3<La.constant.length?La.constant[3]:0)):(Wa=x(La.buffer)?Z.createStream(34962,
La.buffer):Z.getBuffer(La.buffer),lc="type"in La?Xd[La.type]:Wa.dtype,Fb=!!La.normalized,Sa=La.size|0,Ab=La.offset|0,cb=La.stride|0,ua=La.divisor|0);hd=sc.location;Qb=yc[hd];if(1===Tb){Qb.buffer||D.enableVertexAttribArray(hd);Ma=Sa||1;if(Qb.type!==lc||Qb.size!==Ma||Qb.buffer!==Wa||Qb.normalized!==Fb||Qb.offset!==Ab||Qb.stride!==cb)D.bindBuffer(34962,Wa.buffer),D.vertexAttribPointer(hd,Ma,lc,Fb,cb,Ab),Qb.type=lc,Qb.size=Ma,Qb.buffer=Wa,Qb.normalized=Fb,Qb.offset=Ab,Qb.stride=cb;Qb.divisor!==ua&&(M.vertexAttribDivisorANGLE(hd,
ua),Qb.divisor=ua)}else if(Qb.buffer&&(D.disableVertexAttribArray(hd),Qb.buffer=null),Qb.x!==ac||Qb.y!==$b||Qb.z!==Pb||Qb.w!==Ob)D.vertexAttrib4f(hd,ac,$b,Pb,Ob),Qb.x=ac,Qb.y=$b,Qb.z=Pb,Qb.w=Ob;nb=c.call(this,G,a,0);ub=!1;hb=null;Pa=0;qc=!1;Vb=Rb=0;db=1;nc=0;Kc=5126;qa=kb=jb=ec=0;x(nb)?(ub=!0,hb=Z.createStream(34962,nb),Kc=hb.dtype):(hb=Z.getBuffer(nb))?Kc=hb.dtype:"constant"in nb?(db=2,"number"===typeof nb.constant?(jb=nb.constant,kb=qa=ec=0):(jb=0<nb.constant.length?nb.constant[0]:0,kb=1<nb.constant.length?
nb.constant[1]:0,qa=2<nb.constant.length?nb.constant[2]:0,ec=3<nb.constant.length?nb.constant[3]:0)):(hb=x(nb.buffer)?Z.createStream(34962,nb.buffer):Z.getBuffer(nb.buffer),Kc="type"in nb?Xd[nb.type]:hb.dtype,qc=!!nb.normalized,Vb=nb.size|0,Rb=nb.offset|0,nc=nb.stride|0,Pa=nb.divisor|0);ob=pc.location;va=yc[ob];if(1===db){va.buffer||D.enableVertexAttribArray(ob);Ua=Vb||1;if(va.type!==Kc||va.size!==Ua||va.buffer!==hb||va.normalized!==qc||va.offset!==Rb||va.stride!==nc)D.bindBuffer(34962,hb.buffer),
D.vertexAttribPointer(ob,Ua,Kc,qc,nc,Rb),va.type=Kc,va.size=Ua,va.buffer=hb,va.normalized=qc,va.offset=Rb,va.stride=nc;va.divisor!==Pa&&(M.vertexAttribDivisorANGLE(ob,Pa),va.divisor=Pa)}else if(va.buffer&&(D.disableVertexAttribArray(ob),va.buffer=null),va.x!==jb||va.y!==kb||va.z!==qa||va.w!==ec)D.vertexAttrib4f(ob,jb,kb,qa,ec),va.x=jb,va.y=kb,va.z=qa,va.w=ec;bb=y.call(this,G,a,0);Aa=!1;eb=null;Ja=0;Bb=!1;Ra=zb=0;Mc=1;Ib=0;Za=5126;Ka=fd=xa=Sb=0;x(bb)?(Aa=!0,eb=Z.createStream(34962,bb),Za=eb.dtype):
(eb=Z.getBuffer(bb))?Za=eb.dtype:"constant"in bb?(Mc=2,"number"===typeof bb.constant?(xa=bb.constant,fd=Ka=Sb=0):(xa=0<bb.constant.length?bb.constant[0]:0,fd=1<bb.constant.length?bb.constant[1]:0,Ka=2<bb.constant.length?bb.constant[2]:0,Sb=3<bb.constant.length?bb.constant[3]:0)):(eb=x(bb.buffer)?Z.createStream(34962,bb.buffer):Z.getBuffer(bb.buffer),Za="type"in bb?Xd[bb.type]:eb.dtype,Bb=!!bb.normalized,Ra=bb.size|0,zb=bb.offset|0,Ib=bb.stride|0,Ja=bb.divisor|0);Lb=wd.location;fb=yc[Lb];if(1===Mc){fb.buffer||
D.enableVertexAttribArray(Lb);ib=Ra||1;if(fb.type!==Za||fb.size!==ib||fb.buffer!==eb||fb.normalized!==Bb||fb.offset!==zb||fb.stride!==Ib)D.bindBuffer(34962,eb.buffer),D.vertexAttribPointer(Lb,ib,Za,Bb,Ib,zb),fb.type=Za,fb.size=ib,fb.buffer=eb,fb.normalized=Bb,fb.offset=zb,fb.stride=Ib;fb.divisor!==Ja&&(M.vertexAttribDivisorANGLE(Lb,Ja),fb.divisor=Ja)}else if(fb.buffer&&(D.disableVertexAttribArray(Lb),fb.buffer=null),fb.x!==xa||fb.y!==fd||fb.z!==Ka||fb.w!==Sb)D.vertexAttrib4f(Lb,xa,fd,Ka,Sb),fb.x=
xa,fb.y=fd,fb.z=Ka,fb.w=Sb;ya=b.call(this,G,a,0);fc=!1;Ea=null;pb=0;qb=!1;Ya=Xa=0;oc=1;xc=0;vc=5126;Ga=Tc=Yb=Va=0;x(ya)?(fc=!0,Ea=Z.createStream(34962,ya),vc=Ea.dtype):(Ea=Z.getBuffer(ya))?vc=Ea.dtype:"constant"in ya?(oc=2,"number"===typeof ya.constant?(Yb=ya.constant,Tc=Ga=Va=0):(Yb=0<ya.constant.length?ya.constant[0]:0,Tc=1<ya.constant.length?ya.constant[1]:0,Ga=2<ya.constant.length?ya.constant[2]:0,Va=3<ya.constant.length?ya.constant[3]:0)):(Ea=x(ya.buffer)?Z.createStream(34962,ya.buffer):Z.getBuffer(ya.buffer),
vc="type"in ya?Xd[ya.type]:Ea.dtype,qb=!!ya.normalized,Ya=ya.size|0,Xa=ya.offset|0,xc=ya.stride|0,pb=ya.divisor|0);zc=gb.location;Qa=yc[zc];if(1===oc){Qa.buffer||D.enableVertexAttribArray(zc);Ba=Ya||1;if(Qa.type!==vc||Qa.size!==Ba||Qa.buffer!==Ea||Qa.normalized!==qb||Qa.offset!==Xa||Qa.stride!==xc)D.bindBuffer(34962,Ea.buffer),D.vertexAttribPointer(zc,Ba,vc,qb,xc,Xa),Qa.type=vc,Qa.size=Ba,Qa.buffer=Ea,Qa.normalized=qb,Qa.offset=Xa,Qa.stride=xc;Qa.divisor!==pb&&(M.vertexAttribDivisorANGLE(zc,pb),Qa.divisor=
pb)}else if(Qa.buffer&&(D.disableVertexAttribArray(zc),Qa.buffer=null),Qa.x!==Yb||Qa.y!==Tc||Qa.z!==Ga||Qa.w!==Va)D.vertexAttrib4f(zc,Yb,Tc,Ga,Va),Qa.x=Yb,Qa.y=Tc,Qa.z=Ga,Qa.w=Va;lb=t.call(this,G,a,0);vb=!1;Cb=null;rb=0;wc=!1;Od=wb=0;uc=1;Td=0;Oc=5126;cc=Ub=ud=id=0;x(lb)?(vb=!0,Cb=Z.createStream(34962,lb),Oc=Cb.dtype):(Cb=Z.getBuffer(lb))?Oc=Cb.dtype:"constant"in lb?(uc=2,"number"===typeof lb.constant?(ud=lb.constant,Ub=cc=id=0):(ud=0<lb.constant.length?lb.constant[0]:0,Ub=1<lb.constant.length?lb.constant[1]:
0,cc=2<lb.constant.length?lb.constant[2]:0,id=3<lb.constant.length?lb.constant[3]:0)):(Cb=x(lb.buffer)?Z.createStream(34962,lb.buffer):Z.getBuffer(lb.buffer),Oc="type"in lb?Xd[lb.type]:Cb.dtype,wc=!!lb.normalized,Od=lb.size|0,wb=lb.offset|0,Td=lb.stride|0,rb=lb.divisor|0);Mb=$a.location;Ha=yc[Mb];if(1===uc){Ha.buffer||D.enableVertexAttribArray(Mb);Zb=Od||1;if(Ha.type!==Oc||Ha.size!==Zb||Ha.buffer!==Cb||Ha.normalized!==wc||Ha.offset!==wb||Ha.stride!==Td)D.bindBuffer(34962,Cb.buffer),D.vertexAttribPointer(Mb,
Zb,Oc,wc,Td,wb),Ha.type=Oc,Ha.size=Zb,Ha.buffer=Cb,Ha.normalized=wc,Ha.offset=wb,Ha.stride=Td;Ha.divisor!==rb&&(M.vertexAttribDivisorANGLE(Mb,rb),Ha.divisor=rb)}else if(Ha.buffer&&(D.disableVertexAttribArray(Mb),Ha.buffer=null),Ha.x!==ud||Ha.y!==Ub||Ha.z!==cc||Ha.w!==id)D.vertexAttrib4f(Mb,ud,Ub,cc,id),Ha.x=ud,Ha.y=Ub,Ha.z=cc,Ha.w=id;mb=C.call(this,G,a,0);xb=!1;Kb=null;Nb=0;gc=!1;Uc=jc=0;Ec=1;Fc=0;Hc=5126;Qc=Vc=cd=Pc=0;x(mb)?(xb=!0,Kb=Z.createStream(34962,mb),Hc=Kb.dtype):(Kb=Z.getBuffer(mb))?Hc=
Kb.dtype:"constant"in mb?(Ec=2,"number"===typeof mb.constant?(cd=mb.constant,Vc=Qc=Pc=0):(cd=0<mb.constant.length?mb.constant[0]:0,Vc=1<mb.constant.length?mb.constant[1]:0,Qc=2<mb.constant.length?mb.constant[2]:0,Pc=3<mb.constant.length?mb.constant[3]:0)):(Kb=x(mb.buffer)?Z.createStream(34962,mb.buffer):Z.getBuffer(mb.buffer),Hc="type"in mb?Xd[mb.type]:Kb.dtype,gc=!!mb.normalized,Uc=mb.size|0,jc=mb.offset|0,Fc=mb.stride|0,Nb=mb.divisor|0);Jb=P.location;Eb=yc[Jb];if(1===Ec){Eb.buffer||D.enableVertexAttribArray(Jb);
Rc=Uc||4;if(Eb.type!==Hc||Eb.size!==Rc||Eb.buffer!==Kb||Eb.normalized!==gc||Eb.offset!==jc||Eb.stride!==Fc)D.bindBuffer(34962,Kb.buffer),D.vertexAttribPointer(Jb,Rc,Hc,gc,Fc,jc),Eb.type=Hc,Eb.size=Rc,Eb.buffer=Kb,Eb.normalized=gc,Eb.offset=jc,Eb.stride=Fc;Eb.divisor!==Nb&&(M.vertexAttribDivisorANGLE(Jb,Nb),Eb.divisor=Nb)}else if(Eb.buffer&&(D.disableVertexAttribArray(Jb),Eb.buffer=null),Eb.x!==cd||Eb.y!==Vc||Eb.z!==Qc||Eb.w!==Pc)D.vertexAttrib4f(Jb,cd,Vc,Qc,Pc),Eb.x=cd,Eb.y=Vc,Eb.z=Qc,Eb.w=Pc;Lc=
A.call(this,G,a,0);Wc=!1;hc=null;Zc=0;jd=!1;oe=vd=0;$c=1;je=0;Vd=5126;Gd=le=Xe=$e=0;x(Lc)?(Wc=!0,hc=Z.createStream(34962,Lc),Vd=hc.dtype):(hc=Z.getBuffer(Lc))?Vd=hc.dtype:"constant"in Lc?($c=2,"number"===typeof Lc.constant?(Xe=Lc.constant,le=Gd=$e=0):(Xe=0<Lc.constant.length?Lc.constant[0]:0,le=1<Lc.constant.length?Lc.constant[1]:0,Gd=2<Lc.constant.length?Lc.constant[2]:0,$e=3<Lc.constant.length?Lc.constant[3]:0)):(hc=x(Lc.buffer)?Z.createStream(34962,Lc.buffer):Z.getBuffer(Lc.buffer),Vd="type"in
Lc?Xd[Lc.type]:hc.dtype,jd=!!Lc.normalized,oe=Lc.size|0,vd=Lc.offset|0,je=Lc.stride|0,Zc=Lc.divisor|0);Ed=Wb.location;ed=yc[Ed];if(1===$c){ed.buffer||D.enableVertexAttribArray(Ed);Ic=oe||4;if(ed.type!==Vd||ed.size!==Ic||ed.buffer!==hc||ed.normalized!==jd||ed.offset!==vd||ed.stride!==je)D.bindBuffer(34962,hc.buffer),D.vertexAttribPointer(Ed,Ic,Vd,jd,je,vd),ed.type=Vd,ed.size=Ic,ed.buffer=hc,ed.normalized=jd,ed.offset=vd,ed.stride=je;ed.divisor!==Zc&&(M.vertexAttribDivisorANGLE(Ed,Zc),ed.divisor=Zc)}else if(ed.buffer&&
(D.disableVertexAttribArray(Ed),ed.buffer=null),ed.x!==Xe||ed.y!==le||ed.z!==Gd||ed.w!==$e)D.vertexAttrib4f(Ed,Xe,le,Gd,$e),ed.x=Xe,ed.y=le,ed.z=Gd,ed.w=$e;pd=H.call(this,G,a,0);kd=!1;bd=null;ld=0;Bd=!1;Te=yd=0;me=1;te=0;ce=5126;Yd=ue=ae=be=0;x(pd)?(kd=!0,bd=Z.createStream(34962,pd),ce=bd.dtype):(bd=Z.getBuffer(pd))?ce=bd.dtype:"constant"in pd?(me=2,"number"===typeof pd.constant?(ae=pd.constant,ue=Yd=be=0):(ae=0<pd.constant.length?pd.constant[0]:0,ue=1<pd.constant.length?pd.constant[1]:0,Yd=2<pd.constant.length?
pd.constant[2]:0,be=3<pd.constant.length?pd.constant[3]:0)):(bd=x(pd.buffer)?Z.createStream(34962,pd.buffer):Z.getBuffer(pd.buffer),ce="type"in pd?Xd[pd.type]:bd.dtype,Bd=!!pd.normalized,Te=pd.size|0,yd=pd.offset|0,te=pd.stride|0,ld=pd.divisor|0);ge=ia.location;Ac=yc[ge];if(1===me){Ac.buffer||D.enableVertexAttribArray(ge);Xc=Te||1;if(Ac.type!==ce||Ac.size!==Xc||Ac.buffer!==bd||Ac.normalized!==Bd||Ac.offset!==yd||Ac.stride!==te)D.bindBuffer(34962,bd.buffer),D.vertexAttribPointer(ge,Xc,ce,Bd,te,yd),
Ac.type=ce,Ac.size=Xc,Ac.buffer=bd,Ac.normalized=Bd,Ac.offset=yd,Ac.stride=te;Ac.divisor!==ld&&(M.vertexAttribDivisorANGLE(ge,ld),Ac.divisor=ld)}else if(Ac.buffer&&(D.disableVertexAttribArray(ge),Ac.buffer=null),Ac.x!==ae||Ac.y!==ue||Ac.z!==Yd||Ac.w!==be)D.vertexAttrib4f(ge,ae,ue,Yd,be),Ac.x=ae,Ac.y=ue,Ac.z=Yd,Ac.w=be;D.uniform1i(w.location,!1);D.uniform1f(dc.location,G.pixelRatio);pe=J.call(this,G,a,0);D.uniform2f(Fa.location,pe[0],pe[1]);ie=a.scale;D.uniform2f(Ia.location,ie[0],ie[1]);Fd=a.scaleFract;
D.uniform2f(W.location,Fd[0],Fd[1]);Id=a.translate;D.uniform2f(ea.location,Id[0],Id[1]);Kd=a.translateFract;D.uniform2f(ta.location,Kd[0],Kd[1]);D.uniform1f(ba.location,a.opacity);D.uniform1i(Oa.location,u.bind());Ld=a.elements;he=null;(he=(Ye=x(Ld))?sb.createStream(Ld):sb.getElements(Ld))&&D.bindBuffer(34963,he.buffer.buffer);ve=a.offset;if(ne=a.count)Ke=Da.instances,0<Ke?he?M.drawElementsInstancedANGLE(0,ne,he.type,ve<<(he.type-5121>>1),Ke):M.drawArraysInstancedANGLE(0,ve,ne,Ke):0>Ke&&(he?D.drawElements(0,
ne,he.type,ve<<(he.type-5121>>1)):D.drawArrays(0,ve,ne)),ja.dirty=!0,fa.setVAO(null),G.viewportWidth=n,G.viewportHeight=r,O&&(V.cpuTime+=performance.now()-R),T&&Z.destroyStream(Q),tb&&Z.destroyStream(Wa),ub&&Z.destroyStream(hb),Aa&&Z.destroyStream(eb),fc&&Z.destroyStream(Ea),vb&&Z.destroyStream(Cb),xb&&Z.destroyStream(Kb),Wc&&Z.destroyStream(hc),kd&&Z.destroyStream(bd),u.unbind(),Ye&&sb.destroyStream(he)},scope:function(b,c,d){var f,l,p,q,v,t,u,y,w,z,E,D,K,C,N,H,A,J,O,aa,U,P,S,W,fa,ga,Y,ba,ka,ea,
ia,wa,za,na,ua,pa,ra,ta,Ia,Fa,Na,Oa,yb,$a,yc,Hb,gb,Ma,nb,ub,hb,Pa,mc,Rb,Fb,db,wd,Wb,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,ac,Ib,Za,Sb,xa,ic,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,pc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,dc,uc,Vb,Oc,sc,xd,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,Sc,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,fd,Yc,Gc,$c,$d,Qd,de,re,se,Gd,Ed,ed,Ic,pd,kd,bd,ld,Bd,yd,Ae,me,te,ce,be,ae,ue,Yd,ge,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,he,Re,ve,ne,Ke,Le,He,qe,ye,Ce,De,Ee,ze,Hd,Pd,Wd,Zd,Fe,Ad,Md,we,Ge,gf,We,
Me,Ie,Ue,Qe,Ne,Oe,Nd,Ud,Pe,hf,nf,df,jf,kf,lf,rf,of,sf,Bf,Cf,Je,xe,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,pg,ef,af,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,ff,bf,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng;f=b.viewport;l=f.x|0;p=f.y|0;q="width"in f?f.width|0:G.framebufferWidth-l;v="height"in f?f.height|0:G.framebufferHeight-p;t=G.viewportWidth;G.viewportWidth=q;u=G.viewportHeight;G.viewportHeight=v;y=Od[0];
Od[0]=l;w=Od[1];Od[1]=p;z=Od[2];Od[2]=q;E=Od[3];Od[3]=v;D=ma[0];ma[0]=0;K=ma[1];ma[1]=0;C=ma[2];ma[2]=0;N=ma[3];ma[3]=1;H=ha.blend_enable;ha.blend_enable=!0;A=T[0];T[0]=770;J=T[1];T[1]=771;O=T[2];T[2]=773;aa=T[3];T[3]=1;U=ha.depth_enable;ha.depth_enable=!1;P=b.viewport;S=P.x|0;W=P.y|0;fa="width"in P?P.width|0:G.framebufferWidth-S;ga="height"in P?P.height|0:G.framebufferHeight-W;Y=je[0];je[0]=S;ba=je[1];je[1]=W;ka=je[2];je[2]=fa;ea=je[3];je[3]=ga;ia=ha.scissor_enable;ha.scissor_enable=!0;wa=ha.stencil_enable;
ha.stencil_enable=!1;if(za=ja.profile)na=performance.now(),V.count++;ua=b.elements;pa=null;pa=(ra=x(ua))?sb.createStream(ua):sb.getElements(ua);ta=Da.elements;Da.elements=pa;Ia=b.offset;Fa=Da.offset;Da.offset=Ia;Na=b.count;Oa=Da.count;Da.count=Na;yb=Da.primitive;Da.primitive=0;$a=Q[45];Q[45]=!1;yc=b.markerTexture;Hb=Q[48];Q[48]=yc;gb=b.opacity;Ma=Q[10];Q[10]=gb;nb=B.call(this,G,b,d);ub=Q[46];Q[46]=nb;hb=Q[47];Q[47]=M;Pa=G.pixelRatio;mc=Q[34];Q[34]=Pa;Rb=b.scale;Fb=Q[6];Q[6]=Rb;db=b.scaleFract;wd=
Q[7];Q[7]=db;Wb=b.translate;ec=Q[8];Q[8]=Wb;jb=b.translateFract;kb=Q[9];Q[9]=jb;qa=r.call(this,G,b,d);ob=!1;va=null;Ua=0;bb=!1;eb=Aa=0;Ja=1;Bb=0;zb=5126;Za=Ib=ac=Ra=0;x(qa)?(ob=!0,va=Z.createStream(34962,qa),zb=va.dtype):(va=Z.getBuffer(qa))?zb=va.dtype:"constant"in qa?(Ja=2,"number"===typeof qa.constant?(ac=qa.constant,Ib=Za=Ra=0):(ac=0<qa.constant.length?qa.constant[0]:0,Ib=1<qa.constant.length?qa.constant[1]:0,Za=2<qa.constant.length?qa.constant[2]:0,Ra=3<qa.constant.length?qa.constant[3]:0)):
(va=x(qa.buffer)?Z.createStream(34962,qa.buffer):Z.getBuffer(qa.buffer),zb="type"in qa?Xd[qa.type]:va.dtype,bb=!!qa.normalized,eb=qa.size|0,Aa=qa.offset|0,Bb=qa.stride|0,Ua=qa.divisor|0);Sb=I.buffer;I.buffer=va;xa=I.divisor;I.divisor=Ua;ic=I.normalized;I.normalized=bb;Ka=I.offset;I.offset=Aa;Lb=I.size;I.size=eb;fb=I.state;I.state=Ja;ib=I.stride;I.stride=Bb;ya=I.type;I.type=zb;fc=I.w;I.w=Ra;Ea=I.x;I.x=ac;pb=I.y;I.y=Ib;qb=I.z;I.z=Za;Xa=oa.call(this,G,b,d);Ya=!1;oc=null;xc=0;vc=!1;Yb=Va=0;pc=1;Ga=0;
zc=5126;vb=lb=Ba=Qa=0;x(Xa)?(Ya=!0,oc=Z.createStream(34962,Xa),zc=oc.dtype):(oc=Z.getBuffer(Xa))?zc=oc.dtype:"constant"in Xa?(pc=2,"number"===typeof Xa.constant?(Ba=Xa.constant,lb=vb=Qa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?Xa.constant[1]:0,vb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(oc=x(Xa.buffer)?Z.createStream(34962,Xa.buffer):Z.getBuffer(Xa.buffer),zc="type"in Xa?Xd[Xa.type]:oc.dtype,vc=!!Xa.normalized,Yb=Xa.size|0,Va=Xa.offset|
0,Ga=Xa.stride|0,xc=Xa.divisor|0);Cb=F.buffer;F.buffer=oc;rb=F.divisor;F.divisor=xc;wc=F.normalized;F.normalized=vc;wb=F.offset;F.offset=Va;dc=F.size;F.size=Yb;uc=F.state;F.state=pc;Vb=F.stride;F.stride=Ga;Oc=F.type;F.type=zc;sc=F.w;F.w=Qa;xd=F.x;F.x=Ba;Ub=F.y;F.y=lb;cc=F.z;F.z=vb;Mb=Ca.call(this,G,b,d);Ha=!1;Zb=null;mb=0;xb=!1;Nb=Kb=0;gc=1;jc=0;Uc=5126;Pc=Hc=Fc=Ec=0;x(Mb)?(Ha=!0,Zb=Z.createStream(34962,Mb),Uc=Zb.dtype):(Zb=Z.getBuffer(Mb))?Uc=Zb.dtype:"constant"in Mb?(gc=2,"number"===typeof Mb.constant?
(Fc=Mb.constant,Hc=Pc=Ec=0):(Fc=0<Mb.constant.length?Mb.constant[0]:0,Hc=1<Mb.constant.length?Mb.constant[1]:0,Pc=2<Mb.constant.length?Mb.constant[2]:0,Ec=3<Mb.constant.length?Mb.constant[3]:0)):(Zb=x(Mb.buffer)?Z.createStream(34962,Mb.buffer):Z.getBuffer(Mb.buffer),Uc="type"in Mb?Xd[Mb.type]:Zb.dtype,xb=!!Mb.normalized,Nb=Mb.size|0,Kb=Mb.offset|0,jc=Mb.stride|0,mb=Mb.divisor|0);Sc=k.buffer;k.buffer=Zb;Vc=k.divisor;k.divisor=mb;Qc=k.normalized;k.normalized=xb;Jb=k.offset;k.offset=Kb;Eb=k.size;k.size=
Nb;Rc=k.state;k.state=gc;Lc=k.stride;k.stride=jc;Wc=k.type;k.type=Uc;hc=k.w;k.w=Ec;Zc=k.x;k.x=Fc;fd=k.y;k.y=Hc;Yc=k.z;k.z=Pc;Gc=h.call(this,G,b,d);$c=!1;$d=null;Qd=0;de=!1;se=re=0;Gd=1;Ed=0;ed=5126;bd=kd=pd=Ic=0;x(Gc)?($c=!0,$d=Z.createStream(34962,Gc),ed=$d.dtype):($d=Z.getBuffer(Gc))?ed=$d.dtype:"constant"in Gc?(Gd=2,"number"===typeof Gc.constant?(pd=Gc.constant,kd=bd=Ic=0):(pd=0<Gc.constant.length?Gc.constant[0]:0,kd=1<Gc.constant.length?Gc.constant[1]:0,bd=2<Gc.constant.length?Gc.constant[2]:
0,Ic=3<Gc.constant.length?Gc.constant[3]:0)):($d=x(Gc.buffer)?Z.createStream(34962,Gc.buffer):Z.getBuffer(Gc.buffer),ed="type"in Gc?Xd[Gc.type]:$d.dtype,de=!!Gc.normalized,se=Gc.size|0,re=Gc.offset|0,Ed=Gc.stride|0,Qd=Gc.divisor|0);ld=g.buffer;g.buffer=$d;Bd=g.divisor;g.divisor=Qd;yd=g.normalized;g.normalized=de;Ae=g.offset;g.offset=re;me=g.size;g.size=se;te=g.state;g.state=Gd;ce=g.stride;g.stride=Ed;be=g.type;g.type=ed;ae=g.w;g.w=Ic;ue=g.x;g.x=pd;Yd=g.y;g.y=kd;ge=g.z;g.z=bd;Ac=n.call(this,G,b,d);
Xc=!1;pe=null;ie=0;Fd=!1;Kd=Id=0;Ld=1;he=0;Re=5126;Le=Ke=ne=ve=0;x(Ac)?(Xc=!0,pe=Z.createStream(34962,Ac),Re=pe.dtype):(pe=Z.getBuffer(Ac))?Re=pe.dtype:"constant"in Ac?(Ld=2,"number"===typeof Ac.constant?(ne=Ac.constant,Ke=Le=ve=0):(ne=0<Ac.constant.length?Ac.constant[0]:0,Ke=1<Ac.constant.length?Ac.constant[1]:0,Le=2<Ac.constant.length?Ac.constant[2]:0,ve=3<Ac.constant.length?Ac.constant[3]:0)):(pe=x(Ac.buffer)?Z.createStream(34962,Ac.buffer):Z.getBuffer(Ac.buffer),Re="type"in Ac?Xd[Ac.type]:pe.dtype,
Fd=!!Ac.normalized,Kd=Ac.size|0,Id=Ac.offset|0,he=Ac.stride|0,ie=Ac.divisor|0);He=R.buffer;R.buffer=pe;qe=R.divisor;R.divisor=ie;ye=R.normalized;R.normalized=Fd;Ce=R.offset;R.offset=Id;De=R.size;R.size=Kd;Ee=R.state;R.state=Ld;ze=R.stride;R.stride=he;Hd=R.type;R.type=Re;Pd=R.w;R.w=ve;Wd=R.x;R.x=ne;Zd=R.y;R.y=Ke;Fe=R.z;R.z=Le;Ad=ca.call(this,G,b,d);Md=!1;we=null;Ge=0;gf=!1;Me=We=0;Ie=1;Ue=0;Qe=5126;Ud=Nd=Oe=Ne=0;x(Ad)?(Md=!0,we=Z.createStream(34962,Ad),Qe=we.dtype):(we=Z.getBuffer(Ad))?Qe=we.dtype:
"constant"in Ad?(Ie=2,"number"===typeof Ad.constant?(Oe=Ad.constant,Nd=Ud=Ne=0):(Oe=0<Ad.constant.length?Ad.constant[0]:0,Nd=1<Ad.constant.length?Ad.constant[1]:0,Ud=2<Ad.constant.length?Ad.constant[2]:0,Ne=3<Ad.constant.length?Ad.constant[3]:0)):(we=x(Ad.buffer)?Z.createStream(34962,Ad.buffer):Z.getBuffer(Ad.buffer),Qe="type"in Ad?Xd[Ad.type]:we.dtype,gf=!!Ad.normalized,Me=Ad.size|0,We=Ad.offset|0,Ue=Ad.stride|0,Ge=Ad.divisor|0);Pe=m.buffer;m.buffer=we;hf=m.divisor;m.divisor=Ge;nf=m.normalized;m.normalized=
gf;df=m.offset;m.offset=We;jf=m.size;m.size=Me;kf=m.state;m.state=Ie;lf=m.stride;m.stride=Ue;rf=m.type;m.type=Qe;of=m.w;m.w=Ne;sf=m.x;m.x=Oe;Bf=m.y;m.y=Nd;Cf=m.z;m.z=Ud;Je=la.call(this,G,b,d);xe=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;x(Je)?(xe=!0,pf=Z.createStream(34962,Je),wf=pf.dtype):(pf=Z.getBuffer(Je))?wf=pf.dtype:"constant"in Je?(Ef=2,"number"===typeof Je.constant?(vf=Je.constant,yf=zf=xf=0):(vf=0<Je.constant.length?Je.constant[0]:0,yf=1<Je.constant.length?Je.constant[1]:
0,zf=2<Je.constant.length?Je.constant[2]:0,xf=3<Je.constant.length?Je.constant[3]:0)):(pf=x(Je.buffer)?Z.createStream(34962,Je.buffer):Z.getBuffer(Je.buffer),wf="type"in Je?Xd[Je.type]:pf.dtype,Df=!!Je.normalized,Af=Je.size|0,Gf=Je.offset|0,Ff=Je.stride|0,qf=Je.divisor|0);If=L.buffer;L.buffer=pf;Jf=L.divisor;L.divisor=qf;Kf=L.normalized;L.normalized=Df;Lf=L.offset;L.offset=Gf;tf=L.size;L.size=Af;Qf=L.state;L.state=Ef;Hf=L.stride;L.stride=Ff;uf=L.type;L.type=wf;cg=L.w;L.w=xf;Rf=L.x;L.x=vf;Sf=L.y;L.y=
yf;pg=L.z;L.z=zf;ef=da.call(this,G,b,d);af=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;Yf=Xf=Wf=Tf=0;x(ef)?(af=!0,Mf=Z.createStream(34962,ef),Vf=Mf.dtype):(Mf=Z.getBuffer(ef))?Vf=Mf.dtype:"constant"in ef?(gg=2,"number"===typeof ef.constant?(Wf=ef.constant,Xf=Yf=Tf=0):(Wf=0<ef.constant.length?ef.constant[0]:0,Xf=1<ef.constant.length?ef.constant[1]:0,Yf=2<ef.constant.length?ef.constant[2]:0,Tf=3<ef.constant.length?ef.constant[3]:0)):(Mf=x(ef.buffer)?Z.createStream(34962,ef.buffer):Z.getBuffer(ef.buffer),
Vf="type"in ef?Xd[ef.type]:Mf.dtype,dg=!!ef.normalized,fg=ef.size|0,eg=ef.offset|0,hg=ef.stride|0,Nf=ef.divisor|0);ig=a.buffer;a.buffer=Mf;qg=a.divisor;a.divisor=Nf;rg=a.normalized;a.normalized=dg;sg=a.offset;a.offset=eg;tg=a.size;a.size=fg;ug=a.state;a.state=gg;vg=a.stride;a.stride=hg;wg=a.type;a.type=Vf;xg=a.w;a.w=Tf;yg=a.x;a.x=Wf;zg=a.y;a.y=Xf;Ag=a.z;a.z=Yf;ff=e.call(this,G,b,d);bf=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;x(ff)?(bf=!0,Of=Z.createStream(34962,ff),Zf=Of.dtype):
(Of=Z.getBuffer(ff))?Zf=Of.dtype:"constant"in ff?(mg=2,"number"===typeof ff.constant?($f=ff.constant,ag=bg=Uf=0):($f=0<ff.constant.length?ff.constant[0]:0,ag=1<ff.constant.length?ff.constant[1]:0,bg=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Of=x(ff.buffer)?Z.createStream(34962,ff.buffer):Z.getBuffer(ff.buffer),Zf="type"in ff?Xd[ff.type]:Of.dtype,jg=!!ff.normalized,lg=ff.size|0,kg=ff.offset|0,ng=ff.stride|0,Pf=ff.divisor|0);og=X.buffer;X.buffer=Of;Bg=X.divisor;
X.divisor=Pf;Cg=X.normalized;X.normalized=jg;Dg=X.offset;X.offset=kg;Eg=X.size;X.size=lg;Fg=X.state;X.state=mg;Gg=X.stride;X.stride=ng;Hg=X.type;X.type=Zf;Ig=X.w;X.w=Uf;Jg=X.x;X.x=$f;Kg=X.y;X.y=ag;Lg=X.z;X.z=bg;Mg=sa.vert;sa.vert=59;Ng=sa.frag;sa.frag=58;ja.dirty=!0;c(G,b,d);G.viewportWidth=t;G.viewportHeight=u;Od[0]=y;Od[1]=w;Od[2]=z;Od[3]=E;ma[0]=D;ma[1]=K;ma[2]=C;ma[3]=N;ha.blend_enable=H;T[0]=A;T[1]=J;T[2]=O;T[3]=aa;ha.depth_enable=U;je[0]=Y;je[1]=ba;je[2]=ka;je[3]=ea;ha.scissor_enable=ia;ha.stencil_enable=
wa;za&&(V.cpuTime+=performance.now()-na);ra&&sb.destroyStream(pa);Da.elements=ta;Da.offset=Fa;Da.count=Oa;Da.primitive=yb;Q[45]=$a;Q[48]=Hb;Q[10]=Ma;Q[46]=ub;Q[47]=hb;Q[34]=mc;Q[6]=Fb;Q[7]=wd;Q[8]=ec;Q[9]=kb;ob&&Z.destroyStream(va);I.buffer=Sb;I.divisor=xa;I.normalized=ic;I.offset=Ka;I.size=Lb;I.state=fb;I.stride=ib;I.type=ya;I.w=fc;I.x=Ea;I.y=pb;I.z=qb;Ya&&Z.destroyStream(oc);F.buffer=Cb;F.divisor=rb;F.normalized=wc;F.offset=wb;F.size=dc;F.state=uc;F.stride=Vb;F.type=Oc;F.w=sc;F.x=xd;F.y=Ub;F.z=
cc;Ha&&Z.destroyStream(Zb);k.buffer=Sc;k.divisor=Vc;k.normalized=Qc;k.offset=Jb;k.size=Eb;k.state=Rc;k.stride=Lc;k.type=Wc;k.w=hc;k.x=Zc;k.y=fd;k.z=Yc;$c&&Z.destroyStream($d);g.buffer=ld;g.divisor=Bd;g.normalized=yd;g.offset=Ae;g.size=me;g.state=te;g.stride=ce;g.type=be;g.w=ae;g.x=ue;g.y=Yd;g.z=ge;Xc&&Z.destroyStream(pe);R.buffer=He;R.divisor=qe;R.normalized=ye;R.offset=Ce;R.size=De;R.state=Ee;R.stride=ze;R.type=Hd;R.w=Pd;R.x=Wd;R.y=Zd;R.z=Fe;Md&&Z.destroyStream(we);m.buffer=Pe;m.divisor=hf;m.normalized=
nf;m.offset=df;m.size=jf;m.state=kf;m.stride=lf;m.type=rf;m.w=of;m.x=sf;m.y=Bf;m.z=Cf;xe&&Z.destroyStream(pf);L.buffer=If;L.divisor=Jf;L.normalized=Kf;L.offset=Lf;L.size=tf;L.state=Qf;L.stride=Hf;L.type=uf;L.w=cg;L.x=Rf;L.y=Sf;L.z=pg;af&&Z.destroyStream(Mf);a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;bf&&Z.destroyStream(Of);X.buffer=og;X.divisor=Bg;X.normalized=Cg;X.offset=Dg;X.size=Eg;X.state=Fg;X.stride=Gg;X.type=Hg;
X.w=Ig;X.x=Jg;X.y=Kg;X.z=Lg;sa.vert=Mg;sa.frag=Ng;ja.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(d,C,q,z,f,c,y,b,t,A,za,H,J,u,B,M,r,I,oa,F,Ca,k,h,g,n,R,ca,m,la,L,da,a,e,X,pa,Vb,Fb,ac,ra,Na){var Y,K,N,S,na,O,Wb,$a,P,w,ia,ba,Fa,Oa,dc,Ia,W,gb,ea,ta,ic,pc,sc,wd,yc,Z,G,ja,Da,sb,Sc,Yc,D,x,ha,sa,Q,fa,ma,E,v;Y=d.attributes;K=d.buffer;N=d.context;S=d.current;na=d.draw;O=d.elements;Wb=d.extensions;
$a=d.framebuffer;P=d.gl;w=d.isBufferArgs;ia=d.next;ba=d.shader;Fa=d.uniforms;Oa=d.vao;dc=ia.blend_color;Ia=S.blend_color;W=ia.blend_equation;gb=S.blend_equation;ea=ia.blend_func;ta=S.blend_func;ic=ia.colorMask;pc=S.colorMask;sc=ia.depth_range;wd=S.depth_range;yc=ia.polygonOffset_offset;Z=S.polygonOffset_offset;G=ia.sample_coverage;ja=S.sample_coverage;Da=ia.scissor_box;sb=S.scissor_box;Sc=ia.stencil_func;Yc=S.stencil_func;D=ia.stencil_opBack;x=S.stencil_opBack;ha=ia.stencil_opFront;sa=S.stencil_opFront;
Q=ia.viewport;fa=S.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};E={offset:4,stride:8};v={offset:0,stride:8};return{batch:function(b,c){var d,f,l,q,r,p,t,u,y,z,B,A,H;d=$a.next;d!==$a.cur&&(d?P.bindFramebuffer(36160,d.framebuffer):P.bindFramebuffer(36160,null),$a.cur=d);if(S.dirty){var J,M,Q,ga,ba,ea,za,Fa,dc,mf,cf,zd,Be,Rd,Sd,ke,Se,rd,md,Cd,qd,dd,Bc,sd,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb;J=ia.dither;J!==S.dither&&(J?P.enable(3024):
P.disable(3024),S.dither=J);M=W[0];Q=W[1];if(M!==gb[0]||Q!==gb[1])P.blendEquationSeparate(M,Q),gb[0]=M,gb[1]=Q;ga=ia.depth_func;ga!==S.depth_func&&(P.depthFunc(ga),S.depth_func=ga);ba=sc[0];ea=sc[1];if(ba!==wd[0]||ea!==wd[1])P.depthRange(ba,ea),wd[0]=ba,wd[1]=ea;za=ia.depth_mask;za!==S.depth_mask&&(P.depthMask(za),S.depth_mask=za);Fa=ic[0];dc=ic[1];mf=ic[2];cf=ic[3];if(Fa!==pc[0]||dc!==pc[1]||mf!==pc[2]||cf!==pc[3])P.colorMask(Fa,dc,mf,cf),pc[0]=Fa,pc[1]=dc,pc[2]=mf,pc[3]=cf;zd=ia.cull_enable;zd!==
S.cull_enable&&(zd?P.enable(2884):P.disable(2884),S.cull_enable=zd);Be=ia.cull_face;Be!==S.cull_face&&(P.cullFace(Be),S.cull_face=Be);Rd=ia.frontFace;Rd!==S.frontFace&&(P.frontFace(Rd),S.frontFace=Rd);Sd=ia.lineWidth;Sd!==S.lineWidth&&(P.lineWidth(Sd),S.lineWidth=Sd);ke=ia.polygonOffset_enable;ke!==S.polygonOffset_enable&&(ke?P.enable(32823):P.disable(32823),S.polygonOffset_enable=ke);Se=yc[0];rd=yc[1];if(Se!==Z[0]||rd!==Z[1])P.polygonOffset(Se,rd),Z[0]=Se,Z[1]=rd;md=ia.sample_alpha;md!==S.sample_alpha&&
(md?P.enable(32926):P.disable(32926),S.sample_alpha=md);Cd=ia.sample_enable;Cd!==S.sample_enable&&(Cd?P.enable(32928):P.disable(32928),S.sample_enable=Cd);qd=G[0];dd=G[1];if(qd!==ja[0]||dd!==ja[1])P.sampleCoverage(qd,dd),ja[0]=qd,ja[1]=dd;Bc=ia.stencil_mask;Bc!==S.stencil_mask&&(P.stencilMask(Bc),S.stencil_mask=Bc);sd=Sc[0];gd=Sc[1];Nc=Sc[2];if(sd!==Yc[0]||gd!==Yc[1]||Nc!==Yc[2])P.stencilFunc(sd,gd,Nc),Yc[0]=sd,Yc[1]=gd,Yc[2]=Nc;tc=ha[0];ab=ha[1];Cc=ha[2];Db=ha[3];if(tc!==sa[0]||ab!==sa[1]||Cc!==
sa[2]||Db!==sa[3])P.stencilOpSeparate(tc,ab,Cc,Db),sa[0]=tc,sa[1]=ab,sa[2]=Cc,sa[3]=Db;rc=D[0];Ta=D[1];kc=D[2];bc=D[3];if(rc!==x[0]||Ta!==x[1]||kc!==x[2]||bc!==x[3])P.stencilOpSeparate(rc,Ta,kc,bc),x[0]=rc,x[1]=Ta,x[2]=kc,x[3]=bc;ad=ia.scissor_enable;ad!==S.scissor_enable&&(ad?P.enable(3089):P.disable(3089),S.scissor_enable=ad);Dd=Da[0];nd=Da[1];Dc=Da[2];Xb=Da[3];if(Dd!==sb[0]||nd!==sb[1]||Dc!==sb[2]||Xb!==sb[3])P.scissor(Dd,nd,Dc,Xb),sb[0]=Dd,sb[1]=nd,sb[2]=Dc,sb[3]=Xb}f=this.viewport;l=f.x|0;q=
f.y|0;r="width"in f?f.width|0:N.framebufferWidth-l;p="height"in f?f.height|0:N.framebufferHeight-q;t=N.viewportWidth;N.viewportWidth=r;u=N.viewportHeight;N.viewportHeight=p;P.viewport(l,q,r,p);fa[0]=l;fa[1]=q;fa[2]=r;fa[3]=p;P.blendColor(0,0,0,1);Ia[0]=0;Ia[1]=0;Ia[2]=0;Ia[3]=1;P.enable(3042);S.blend_enable=!0;P.blendFuncSeparate(770,771,773,1);ta[0]=770;ta[1]=771;ta[2]=773;ta[3]=1;P.disable(2929);S.depth_enable=!1;P.disable(2960);S.stencil_enable=!1;if(y=S.profile)z=performance.now(),C.count+=c;
P.useProgram(I.program);B=Wb.angle_instanced_arrays;var Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Ve,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb;Oa.setVAO(null);v.buffer=this.sizeBuffer;Jc=!1;Gb=null;La=0;tb=!1;ua=Wa=0;td=1;Ab=0;Sa=5126;Ob=lc=cb=Tb=0;w(v)?(Jc=!0,Gb=K.createStream(34962,v),Sa=Gb.dtype):(Gb=K.getBuffer(v))?Sa=Gb.dtype:"constant"in v?(td=2,"number"===typeof v.constant?
(cb=v.constant,lc=Ob=Tb=0):(cb=0<v.constant.length?v.constant[0]:0,lc=1<v.constant.length?v.constant[1]:0,Ob=2<v.constant.length?v.constant[2]:0,Tb=3<v.constant.length?v.constant[3]:0)):(Gb=w(v.buffer)?K.createStream(34962,v.buffer):K.getBuffer(v.buffer),Sa="type"in v?ma[v.type]:Gb.dtype,tb=!!v.normalized,ua=v.size|0,Wa=v.offset|0,Ab=v.stride|0,La=v.divisor|0);fe=Na.location;$b=Y[fe];if(1===td){$b.buffer||P.enableVertexAttribArray(fe);Pb=ua||1;if($b.type!==Sa||$b.size!==Pb||$b.buffer!==Gb||$b.normalized!==
tb||$b.offset!==Wa||$b.stride!==Ab)P.bindBuffer(34962,Gb.buffer),P.vertexAttribPointer(fe,Pb,Sa,tb,Ab,Wa),$b.type=Sa,$b.size=Pb,$b.buffer=Gb,$b.normalized=tb,$b.offset=Wa,$b.stride=Ab;$b.divisor!==La&&(B.vertexAttribDivisorANGLE(fe,La),$b.divisor=La)}else if($b.buffer&&(P.disableVertexAttribArray(fe),$b.buffer=null),$b.x!==cb||$b.y!==lc||$b.z!==Ob||$b.w!==Tb)P.vertexAttrib4f(fe,cb,lc,Ob,Tb),$b.x=cb,$b.y=lc,$b.z=Ob,$b.w=Tb;E.buffer=this.sizeBuffer;hd=!1;Qb=null;Ma=0;nb=!1;hb=ub=0;Pa=1;qc=0;Rb=5126;
Kc=nc=db=od=0;w(E)?(hd=!0,Qb=K.createStream(34962,E),Rb=Qb.dtype):(Qb=K.getBuffer(E))?Rb=Qb.dtype:"constant"in E?(Pa=2,"number"===typeof E.constant?(db=E.constant,nc=Kc=od=0):(db=0<E.constant.length?E.constant[0]:0,nc=1<E.constant.length?E.constant[1]:0,Kc=2<E.constant.length?E.constant[2]:0,od=3<E.constant.length?E.constant[3]:0)):(Qb=w(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),Rb="type"in E?ma[E.type]:Qb.dtype,nb=!!E.normalized,hb=E.size|0,ub=E.offset|0,qc=E.stride|0,Ma=E.divisor|
0);ec=L.location;jb=Y[ec];if(1===Pa){jb.buffer||P.enableVertexAttribArray(ec);kb=hb||1;if(jb.type!==Rb||jb.size!==kb||jb.buffer!==Qb||jb.normalized!==nb||jb.offset!==ub||jb.stride!==qc)P.bindBuffer(34962,Qb.buffer),P.vertexAttribPointer(ec,kb,Rb,nb,qc,ub),jb.type=Rb,jb.size=kb,jb.buffer=Qb,jb.normalized=nb,jb.offset=ub,jb.stride=qc;jb.divisor!==Ma&&(B.vertexAttribDivisorANGLE(ec,Ma),jb.divisor=Ma)}else if(jb.buffer&&(P.disableVertexAttribArray(ec),jb.buffer=null),jb.x!==db||jb.y!==nc||jb.z!==Kc||
jb.w!==od)P.vertexAttrib4f(ec,db,nc,Kc,od),jb.x=db,jb.y=nc,jb.z=Kc,jb.w=od;qa=this.charBuffer;ob=!1;va=null;Ua=0;bb=!1;eb=Aa=0;Ja=1;Bb=0;zb=5126;Za=Ib=Mc=Ra=0;w(qa)?(ob=!0,va=K.createStream(34962,qa),zb=va.dtype):(va=K.getBuffer(qa))?zb=va.dtype:"constant"in qa?(Ja=2,"number"===typeof qa.constant?(Mc=qa.constant,Ib=Za=Ra=0):(Mc=0<qa.constant.length?qa.constant[0]:0,Ib=1<qa.constant.length?qa.constant[1]:0,Za=2<qa.constant.length?qa.constant[2]:0,Ra=3<qa.constant.length?qa.constant[3]:0)):(va=w(qa.buffer)?
K.createStream(34962,qa.buffer):K.getBuffer(qa.buffer),zb="type"in qa?ma[qa.type]:va.dtype,bb=!!qa.normalized,eb=qa.size|0,Aa=qa.offset|0,Bb=qa.stride|0,Ua=qa.divisor|0);Sb=la.location;xa=Y[Sb];if(1===Ja){xa.buffer||P.enableVertexAttribArray(Sb);Ve=eb||1;if(xa.type!==zb||xa.size!==Ve||xa.buffer!==va||xa.normalized!==bb||xa.offset!==Aa||xa.stride!==Bb)P.bindBuffer(34962,va.buffer),P.vertexAttribPointer(Sb,Ve,zb,bb,Bb,Aa),xa.type=zb,xa.size=Ve,xa.buffer=va,xa.normalized=bb,xa.offset=Aa,xa.stride=Bb;
xa.divisor!==Ua&&(B.vertexAttribDivisorANGLE(Sb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(P.disableVertexAttribArray(Sb),xa.buffer=null),xa.x!==Mc||xa.y!==Ib||xa.z!==Za||xa.w!==Ra)P.vertexAttrib4f(Sb,Mc,Ib,Za,Ra),xa.x=Mc,xa.y=Ib,xa.z=Za,xa.w=Ra;Ka=this.position;Lb=!1;fb=null;ib=0;ya=!1;Ea=fc=0;pb=1;qb=0;Xa=5126;vc=xc=oc=Ya=0;w(Ka)?(Lb=!0,fb=K.createStream(34962,Ka),Xa=fb.dtype):(fb=K.getBuffer(Ka))?Xa=fb.dtype:"constant"in Ka?(pb=2,"number"===typeof Ka.constant?(oc=Ka.constant,xc=vc=Ya=0):(oc=0<Ka.constant.length?
Ka.constant[0]:0,xc=1<Ka.constant.length?Ka.constant[1]:0,vc=2<Ka.constant.length?Ka.constant[2]:0,Ya=3<Ka.constant.length?Ka.constant[3]:0)):(fb=w(Ka.buffer)?K.createStream(34962,Ka.buffer):K.getBuffer(Ka.buffer),Xa="type"in Ka?ma[Ka.type]:fb.dtype,ya=!!Ka.normalized,Ea=Ka.size|0,fc=Ka.offset|0,qb=Ka.stride|0,ib=Ka.divisor|0);Va=pa.location;Yb=Y[Va];if(1===pb){Yb.buffer||P.enableVertexAttribArray(Va);Tc=Ea||2;if(Yb.type!==Xa||Yb.size!==Tc||Yb.buffer!==fb||Yb.normalized!==ya||Yb.offset!==fc||Yb.stride!==
qb)P.bindBuffer(34962,fb.buffer),P.vertexAttribPointer(Va,Tc,Xa,ya,qb,fc),Yb.type=Xa,Yb.size=Tc,Yb.buffer=fb,Yb.normalized=ya,Yb.offset=fc,Yb.stride=qb;Yb.divisor!==ib&&(B.vertexAttribDivisorANGLE(Va,ib),Yb.divisor=ib)}else if(Yb.buffer&&(P.disableVertexAttribArray(Va),Yb.buffer=null),Yb.x!==oc||Yb.y!==xc||Yb.z!==vc||Yb.w!==Ya)P.vertexAttrib4f(Va,oc,xc,vc,Ya),Yb.x=oc,Yb.y=xc,Yb.z=vc,Yb.w=Ya;Ga=this.viewportArray;P.uniform4f(ra.location,Ga[0],Ga[1],Ga[2],Ga[3]);zc=this.scale;P.uniform2f(Fb.location,
zc[0],zc[1]);Qa=this.translate;P.uniform2f(ac.location,Qa[0],Qa[1]);(Ba=na.elements)?P.bindBuffer(34963,Ba.buffer.buffer):Oa.currentVAO&&(Ba=O.getElements(Oa.currentVAO.elements))&&P.bindBuffer(34963,Ba.buffer.buffer);lb=na.instances;for(A=0;A<c;++A){H=b[A];var vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc,jd;vb=oa.call(this,N,H,A);A&&Cb===vb||(Cb=vb,P.uniform1f(da.location,vb));rb=F.call(this,N,H,A);A&&wc===rb||(wc=rb,P.uniform1f(e.location,
rb));wb=H.align;A&&Jd===wb||(Jd=wb,P.uniform1f(g.location,wb));uc=H.baseline;A&&Td===uc||(Td=uc,P.uniform1f(m.location,uc));Oc=H.color;id=Oc[0];Ub=Oc[1];Mb=Oc[2];Zb=Oc[3];A&&ud===id&&cc===Ub&&Ha===Mb&&mb===Zb||(ud=id,cc=Ub,Ha=Mb,mb=Zb,P.uniform4f(a.location,id,Ub,Mb,Zb));xb=Ca.call(this,N,H,A);Kb=xb[0];gc=xb[1];A&&Nb===Kb&&jc===gc||(Nb=Kb,jc=gc,P.uniform2f(ca.location,Kb,gc));Uc=k.call(this,N,H,A);Ec=Uc[0];Hc=Uc[1];A&&Fc===Ec&&Pc===Hc||(Fc=Ec,Pc=Hc,P.uniform2f(R.location,Ec,Hc));cd=H.positionOffset;
Vc=cd[0];Jb=cd[1];A&&Qc===Vc&&Eb===Jb||(Qc=Vc,Eb=Jb,P.uniform2f(Vb.location,Vc,Jb));Rc=H.opacity;A&&Lc===Rc||(Lc=Rc,P.uniform1f(X.location,Rc));(Wc=h.call(this,N,H,A))&&"framebuffer"===Wc._reglType&&(Wc=Wc.color[0]);hc=Wc._texture;P.uniform1i(n.location,hc.bind());Zc=H.offset;if(jd=H.count)0<lb?Ba?B.drawElementsInstancedANGLE(0,jd,Ba.type,Zc<<(Ba.type-5121>>1),lb):B.drawArraysInstancedANGLE(0,Zc,jd,lb):0>lb&&(Ba?P.drawElements(0,jd,Ba.type,Zc<<(Ba.type-5121>>1)):P.drawArrays(0,Zc,jd)),hc.unbind()}Jc&&
K.destroyStream(Gb);hd&&K.destroyStream(Qb);ob&&K.destroyStream(va);Lb&&K.destroyStream(fb);S.dirty=!0;Oa.setVAO(null);N.viewportWidth=t;N.viewportHeight=u;y&&(C.cpuTime+=performance.now()-z)},draw:function(d){var h,k,r,l,t,u,p,B,A,H,F,I,J,M,Q,ga,ba,ea,Ca,za,oa,Fa,dc,mf,cf,zd,Be,Rd,Sd,ke,Se,rd,md,Cd,qd,dd,Bc,sd,gd,Nc,tc,ab,Cc,Db,rc,Ta,kc,bc,ad,Dd,nd,Dc,Xb,Jc,Gb,La,tb,Wa,ua,td,Ab,Sa,Tb,cb,lc,Ob,fe,$b,Pb,hd,Qb,Ma,nb,ub,hb,Pa,qc,Rb,od,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb;h=$a.next;h!==$a.cur&&(h?P.bindFramebuffer(36160,
h.framebuffer):P.bindFramebuffer(36160,null),$a.cur=h);if(S.dirty){var Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,Ve,Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc;Ja=ia.dither;Ja!==S.dither&&(Ja?P.enable(3024):P.disable(3024),S.dither=Ja);Bb=W[0];zb=W[1];if(Bb!==gb[0]||zb!==gb[1])P.blendEquationSeparate(Bb,zb),gb[0]=Bb,gb[1]=zb;Ra=ia.depth_func;Ra!==S.depth_func&&(P.depthFunc(Ra),S.depth_func=Ra);Mc=sc[0];Ib=sc[1];if(Mc!==wd[0]||Ib!==wd[1])P.depthRange(Mc,Ib),wd[0]=Mc,wd[1]=
Ib;Za=ia.depth_mask;Za!==S.depth_mask&&(P.depthMask(Za),S.depth_mask=Za);Sb=ic[0];xa=ic[1];Ve=ic[2];Ka=ic[3];if(Sb!==pc[0]||xa!==pc[1]||Ve!==pc[2]||Ka!==pc[3])P.colorMask(Sb,xa,Ve,Ka),pc[0]=Sb,pc[1]=xa,pc[2]=Ve,pc[3]=Ka;Lb=ia.cull_enable;Lb!==S.cull_enable&&(Lb?P.enable(2884):P.disable(2884),S.cull_enable=Lb);fb=ia.cull_face;fb!==S.cull_face&&(P.cullFace(fb),S.cull_face=fb);ib=ia.frontFace;ib!==S.frontFace&&(P.frontFace(ib),S.frontFace=ib);ya=ia.lineWidth;ya!==S.lineWidth&&(P.lineWidth(ya),S.lineWidth=
ya);fc=ia.polygonOffset_enable;fc!==S.polygonOffset_enable&&(fc?P.enable(32823):P.disable(32823),S.polygonOffset_enable=fc);Ea=yc[0];pb=yc[1];if(Ea!==Z[0]||pb!==Z[1])P.polygonOffset(Ea,pb),Z[0]=Ea,Z[1]=pb;qb=ia.sample_alpha;qb!==S.sample_alpha&&(qb?P.enable(32926):P.disable(32926),S.sample_alpha=qb);Xa=ia.sample_enable;Xa!==S.sample_enable&&(Xa?P.enable(32928):P.disable(32928),S.sample_enable=Xa);Ya=G[0];oc=G[1];if(Ya!==ja[0]||oc!==ja[1])P.sampleCoverage(Ya,oc),ja[0]=Ya,ja[1]=oc;xc=ia.stencil_mask;
xc!==S.stencil_mask&&(P.stencilMask(xc),S.stencil_mask=xc);vc=Sc[0];Va=Sc[1];Yb=Sc[2];if(vc!==Yc[0]||Va!==Yc[1]||Yb!==Yc[2])P.stencilFunc(vc,Va,Yb),Yc[0]=vc,Yc[1]=Va,Yc[2]=Yb;Tc=ha[0];Ga=ha[1];zc=ha[2];Qa=ha[3];if(Tc!==sa[0]||Ga!==sa[1]||zc!==sa[2]||Qa!==sa[3])P.stencilOpSeparate(Tc,Ga,zc,Qa),sa[0]=Tc,sa[1]=Ga,sa[2]=zc,sa[3]=Qa;Ba=D[0];lb=D[1];vb=D[2];Cb=D[3];if(Ba!==x[0]||lb!==x[1]||vb!==x[2]||Cb!==x[3])P.stencilOpSeparate(Ba,lb,vb,Cb),x[0]=Ba,x[1]=lb,x[2]=vb,x[3]=Cb;rb=ia.scissor_enable;rb!==S.scissor_enable&&
(rb?P.enable(3089):P.disable(3089),S.scissor_enable=rb);wc=Da[0];wb=Da[1];Jd=Da[2];uc=Da[3];if(wc!==sb[0]||wb!==sb[1]||Jd!==sb[2]||uc!==sb[3])P.scissor(wc,wb,Jd,uc),sb[0]=wc,sb[1]=wb,sb[2]=Jd,sb[3]=uc}k=this.viewport;r=k.x|0;l=k.y|0;t="width"in k?k.width|0:N.framebufferWidth-r;u="height"in k?k.height|0:N.framebufferHeight-l;p=N.viewportWidth;N.viewportWidth=t;B=N.viewportHeight;N.viewportHeight=u;P.viewport(r,l,t,u);fa[0]=r;fa[1]=l;fa[2]=t;fa[3]=u;P.blendColor(0,0,0,1);Ia[0]=0;Ia[1]=0;Ia[2]=0;Ia[3]=
1;P.enable(3042);S.blend_enable=!0;P.blendFuncSeparate(770,771,773,1);ta[0]=770;ta[1]=771;ta[2]=773;ta[3]=1;P.disable(2929);S.depth_enable=!1;P.disable(2960);S.stencil_enable=!1;if(A=S.profile)H=performance.now(),C.count++;P.useProgram(q.program);F=Wb.angle_instanced_arrays;Oa.setVAO(null);v.buffer=this.sizeBuffer;I=!1;J=null;M=0;Q=!1;ba=ga=0;ea=1;Ca=0;za=5126;mf=dc=Fa=oa=0;w(v)?(I=!0,J=K.createStream(34962,v),za=J.dtype):(J=K.getBuffer(v))?za=J.dtype:"constant"in v?(ea=2,"number"===typeof v.constant?
(Fa=v.constant,dc=mf=oa=0):(Fa=0<v.constant.length?v.constant[0]:0,dc=1<v.constant.length?v.constant[1]:0,mf=2<v.constant.length?v.constant[2]:0,oa=3<v.constant.length?v.constant[3]:0)):(J=w(v.buffer)?K.createStream(34962,v.buffer):K.getBuffer(v.buffer),za="type"in v?ma[v.type]:J.dtype,Q=!!v.normalized,ba=v.size|0,ga=v.offset|0,Ca=v.stride|0,M=v.divisor|0);cf=Na.location;zd=Y[cf];if(1===ea){zd.buffer||P.enableVertexAttribArray(cf);Be=ba||1;if(zd.type!==za||zd.size!==Be||zd.buffer!==J||zd.normalized!==
Q||zd.offset!==ga||zd.stride!==Ca)P.bindBuffer(34962,J.buffer),P.vertexAttribPointer(cf,Be,za,Q,Ca,ga),zd.type=za,zd.size=Be,zd.buffer=J,zd.normalized=Q,zd.offset=ga,zd.stride=Ca;zd.divisor!==M&&(F.vertexAttribDivisorANGLE(cf,M),zd.divisor=M)}else if(zd.buffer&&(P.disableVertexAttribArray(cf),zd.buffer=null),zd.x!==Fa||zd.y!==dc||zd.z!==mf||zd.w!==oa)P.vertexAttrib4f(cf,Fa,dc,mf,oa),zd.x=Fa,zd.y=dc,zd.z=mf,zd.w=oa;E.buffer=this.sizeBuffer;Rd=!1;Sd=null;ke=0;Se=!1;md=rd=0;Cd=1;qd=0;dd=5126;Nc=gd=sd=
Bc=0;w(E)?(Rd=!0,Sd=K.createStream(34962,E),dd=Sd.dtype):(Sd=K.getBuffer(E))?dd=Sd.dtype:"constant"in E?(Cd=2,"number"===typeof E.constant?(sd=E.constant,gd=Nc=Bc=0):(sd=0<E.constant.length?E.constant[0]:0,gd=1<E.constant.length?E.constant[1]:0,Nc=2<E.constant.length?E.constant[2]:0,Bc=3<E.constant.length?E.constant[3]:0)):(Sd=w(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),dd="type"in E?ma[E.type]:Sd.dtype,Se=!!E.normalized,md=E.size|0,rd=E.offset|0,qd=E.stride|0,ke=E.divisor|0);
tc=L.location;ab=Y[tc];if(1===Cd){ab.buffer||P.enableVertexAttribArray(tc);Cc=md||1;if(ab.type!==dd||ab.size!==Cc||ab.buffer!==Sd||ab.normalized!==Se||ab.offset!==rd||ab.stride!==qd)P.bindBuffer(34962,Sd.buffer),P.vertexAttribPointer(tc,Cc,dd,Se,qd,rd),ab.type=dd,ab.size=Cc,ab.buffer=Sd,ab.normalized=Se,ab.offset=rd,ab.stride=qd;ab.divisor!==ke&&(F.vertexAttribDivisorANGLE(tc,ke),ab.divisor=ke)}else if(ab.buffer&&(P.disableVertexAttribArray(tc),ab.buffer=null),ab.x!==sd||ab.y!==gd||ab.z!==Nc||ab.w!==
Bc)P.vertexAttrib4f(tc,sd,gd,Nc,Bc),ab.x=sd,ab.y=gd,ab.z=Nc,ab.w=Bc;Db=this.charBuffer;rc=!1;Ta=null;kc=0;bc=!1;Dd=ad=0;nd=1;Dc=0;Xb=5126;tb=La=Gb=Jc=0;w(Db)?(rc=!0,Ta=K.createStream(34962,Db),Xb=Ta.dtype):(Ta=K.getBuffer(Db))?Xb=Ta.dtype:"constant"in Db?(nd=2,"number"===typeof Db.constant?(Gb=Db.constant,La=tb=Jc=0):(Gb=0<Db.constant.length?Db.constant[0]:0,La=1<Db.constant.length?Db.constant[1]:0,tb=2<Db.constant.length?Db.constant[2]:0,Jc=3<Db.constant.length?Db.constant[3]:0)):(Ta=w(Db.buffer)?
K.createStream(34962,Db.buffer):K.getBuffer(Db.buffer),Xb="type"in Db?ma[Db.type]:Ta.dtype,bc=!!Db.normalized,Dd=Db.size|0,ad=Db.offset|0,Dc=Db.stride|0,kc=Db.divisor|0);Wa=la.location;ua=Y[Wa];if(1===nd){ua.buffer||P.enableVertexAttribArray(Wa);td=Dd||1;if(ua.type!==Xb||ua.size!==td||ua.buffer!==Ta||ua.normalized!==bc||ua.offset!==ad||ua.stride!==Dc)P.bindBuffer(34962,Ta.buffer),P.vertexAttribPointer(Wa,td,Xb,bc,Dc,ad),ua.type=Xb,ua.size=td,ua.buffer=Ta,ua.normalized=bc,ua.offset=ad,ua.stride=Dc;
ua.divisor!==kc&&(F.vertexAttribDivisorANGLE(Wa,kc),ua.divisor=kc)}else if(ua.buffer&&(P.disableVertexAttribArray(Wa),ua.buffer=null),ua.x!==Gb||ua.y!==La||ua.z!==tb||ua.w!==Jc)P.vertexAttrib4f(Wa,Gb,La,tb,Jc),ua.x=Gb,ua.y=La,ua.z=tb,ua.w=Jc;Ab=this.position;Sa=!1;Tb=null;cb=0;lc=!1;fe=Ob=0;$b=1;Pb=0;hd=5126;ub=nb=Ma=Qb=0;w(Ab)?(Sa=!0,Tb=K.createStream(34962,Ab),hd=Tb.dtype):(Tb=K.getBuffer(Ab))?hd=Tb.dtype:"constant"in Ab?($b=2,"number"===typeof Ab.constant?(Ma=Ab.constant,nb=ub=Qb=0):(Ma=0<Ab.constant.length?
Ab.constant[0]:0,nb=1<Ab.constant.length?Ab.constant[1]:0,ub=2<Ab.constant.length?Ab.constant[2]:0,Qb=3<Ab.constant.length?Ab.constant[3]:0)):(Tb=w(Ab.buffer)?K.createStream(34962,Ab.buffer):K.getBuffer(Ab.buffer),hd="type"in Ab?ma[Ab.type]:Tb.dtype,lc=!!Ab.normalized,fe=Ab.size|0,Ob=Ab.offset|0,Pb=Ab.stride|0,cb=Ab.divisor|0);hb=pa.location;Pa=Y[hb];if(1===$b){Pa.buffer||P.enableVertexAttribArray(hb);qc=fe||2;if(Pa.type!==hd||Pa.size!==qc||Pa.buffer!==Tb||Pa.normalized!==lc||Pa.offset!==Ob||Pa.stride!==
Pb)P.bindBuffer(34962,Tb.buffer),P.vertexAttribPointer(hb,qc,hd,lc,Pb,Ob),Pa.type=hd,Pa.size=qc,Pa.buffer=Tb,Pa.normalized=lc,Pa.offset=Ob,Pa.stride=Pb;Pa.divisor!==cb&&(F.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(P.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==nb||Pa.z!==ub||Pa.w!==Qb)P.vertexAttrib4f(hb,Ma,nb,ub,Qb),Pa.x=Ma,Pa.y=nb,Pa.z=ub,Pa.w=Qb;Rb=z.call(this,N,d,0);P.uniform1f(da.location,Rb);od=f.call(this,N,d,0);P.uniform1f(e.location,od);P.uniform1f(g.location,
d.align);P.uniform1f(m.location,d.baseline);db=this.viewportArray;P.uniform4f(ra.location,db[0],db[1],db[2],db[3]);nc=d.color;P.uniform4f(a.location,nc[0],nc[1],nc[2],nc[3]);Kc=c.call(this,N,d,0);P.uniform2f(ca.location,Kc[0],Kc[1]);ec=y.call(this,N,d,0);P.uniform2f(R.location,ec[0],ec[1]);jb=this.scale;P.uniform2f(Fb.location,jb[0],jb[1]);kb=this.translate;P.uniform2f(ac.location,kb[0],kb[1]);qa=d.positionOffset;P.uniform2f(Vb.location,qa[0],qa[1]);P.uniform1f(X.location,d.opacity);(ob=b.call(this,
N,d,0))&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);va=ob._texture;P.uniform1i(n.location,va.bind());(Ua=na.elements)?P.bindBuffer(34963,Ua.buffer.buffer):Oa.currentVAO&&(Ua=O.getElements(Oa.currentVAO.elements))&&P.bindBuffer(34963,Ua.buffer.buffer);bb=d.offset;if(Aa=d.count)eb=na.instances,0<eb?Ua?F.drawElementsInstancedANGLE(0,Aa,Ua.type,bb<<(Ua.type-5121>>1),eb):F.drawArraysInstancedANGLE(0,bb,Aa,eb):0>eb&&(Ua?P.drawElements(0,Aa,Ua.type,bb<<(Ua.type-5121>>1)):P.drawArrays(0,bb,Aa)),S.dirty=
!0,Oa.setVAO(null),N.viewportWidth=p,N.viewportHeight=B,A&&(C.cpuTime+=performance.now()-H),I&&K.destroyStream(J),Rd&&K.destroyStream(Sd),rc&&K.destroyStream(Ta),Sa&&K.destroyStream(Tb),va.unbind()},scope:function(a,b,c){var e,d,f,g,h,k,m,n,q,y,x,z,D,G,L,F,I,O,R,P,Z,ca,X,W,fa,Y,da,Ca,ha,la,ja,sa,oa,pa,ra,ta,Da,Ia,Na,Oa,$a,yc,gb,Ta,sb,Fb,wd,Wb,ac,ic,Xb,pc,Gb,La,tb,Wa,ua,Vb,Ab,Sa,Tb,cb,lc,Ob,sc,$b,Pb,Sc,Qb,Ma,nb,ub,hb,Pa,qc,Rb,Yc,db,nc,Kc,ec,jb,kb,qa,ob,va,Ua,bb,Aa,eb,Ja,Bb,zb,Ra,Mc,Ib,Za,Sb,xa,fd,
Ka,Lb,fb,ib,ya,fc,Ea,pb,qb,Xa,Ya,oc,xc,vc,Va,Yb,Tc,Ga,zc,Qa,Ba,lb,vb,Cb,rb,wc,wb,Jd,uc,Td,Oc,id,ud,Ub,cc,Mb,Ha,Zb,mb,xb,Kb,Nb,gc,jc,Uc,Ec,Fc,Hc,Pc,cd,Vc,Qc,Jb,Eb,Rc,Lc,Wc,hc,Zc;e=this.viewport;d=e.x|0;f=e.y|0;g="width"in e?e.width|0:N.framebufferWidth-d;h="height"in e?e.height|0:N.framebufferHeight-f;k=N.viewportWidth;N.viewportWidth=g;m=N.viewportHeight;N.viewportHeight=h;n=Q[0];Q[0]=d;q=Q[1];Q[1]=f;y=Q[2];Q[2]=g;x=Q[3];Q[3]=h;z=dc[0];dc[0]=0;D=dc[1];dc[1]=0;G=dc[2];dc[2]=0;L=dc[3];dc[3]=1;F=ia.blend_enable;
ia.blend_enable=!0;I=ea[0];ea[0]=770;O=ea[1];ea[1]=771;R=ea[2];ea[2]=773;P=ea[3];ea[3]=1;Z=ia.depth_enable;ia.depth_enable=!1;ca=ia.stencil_enable;ia.stencil_enable=!1;if(X=S.profile)W=performance.now(),C.count++;fa=a.offset;Y=na.offset;na.offset=fa;da=a.count;Ca=na.count;na.count=da;ha=na.primitive;na.primitive=0;la=a.align;ja=Fa[64];Fa[64]=la;sa=t.call(this,N,a,c);oa=Fa[69];Fa[69]=sa;pa=A.call(this,N,a,c);ra=Fa[67];Fa[67]=pa;ta=za.call(this,N,a,c);Da=Fa[66];Fa[66]=ta;Ia=a.baseline;Na=Fa[65];Fa[65]=
Ia;Oa=H.call(this,N,a,c);$a=Fa[62];Fa[62]=Oa;yc=a.color;gb=Fa[14];Fa[14]=yc;Ta=J.call(this,N,a,c);sb=Fa[63];Fa[63]=Ta;Fb=a.opacity;wd=Fa[10];Fa[10]=Fb;Wb=a.positionOffset;ac=Fa[68];Fa[68]=Wb;ic=this.scale;Xb=Fa[6];Fa[6]=ic;pc=this.translate;Gb=Fa[8];Fa[8]=pc;La=this.viewportArray;tb=Fa[3];Fa[3]=La;Wa=this.charBuffer;ua=!1;Vb=null;Ab=0;Sa=!1;cb=Tb=0;lc=1;Ob=0;sc=5126;Qb=Sc=Pb=$b=0;w(Wa)?(ua=!0,Vb=K.createStream(34962,Wa),sc=Vb.dtype):(Vb=K.getBuffer(Wa))?sc=Vb.dtype:"constant"in Wa?(lc=2,"number"===
typeof Wa.constant?(Pb=Wa.constant,Sc=Qb=$b=0):(Pb=0<Wa.constant.length?Wa.constant[0]:0,Sc=1<Wa.constant.length?Wa.constant[1]:0,Qb=2<Wa.constant.length?Wa.constant[2]:0,$b=3<Wa.constant.length?Wa.constant[3]:0)):(Vb=w(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),sc="type"in Wa?ma[Wa.type]:Vb.dtype,Sa=!!Wa.normalized,cb=Wa.size|0,Tb=Wa.offset|0,Ob=Wa.stride|0,Ab=Wa.divisor|0);Ma=u.buffer;u.buffer=Vb;nb=u.divisor;u.divisor=Ab;ub=u.normalized;u.normalized=Sa;hb=u.offset;u.offset=
Tb;Pa=u.size;u.size=cb;qc=u.state;u.state=lc;Rb=u.stride;u.stride=Ob;Yc=u.type;u.type=sc;db=u.w;u.w=$b;nc=u.x;u.x=Pb;Kc=u.y;u.y=Sc;ec=u.z;u.z=Qb;E.buffer=this.sizeBuffer;jb=!1;kb=null;qa=0;ob=!1;Ua=va=0;bb=1;Aa=0;eb=5126;Ra=zb=Bb=Ja=0;w(E)?(jb=!0,kb=K.createStream(34962,E),eb=kb.dtype):(kb=K.getBuffer(E))?eb=kb.dtype:"constant"in E?(bb=2,"number"===typeof E.constant?(Bb=E.constant,zb=Ra=Ja=0):(Bb=0<E.constant.length?E.constant[0]:0,zb=1<E.constant.length?E.constant[1]:0,Ra=2<E.constant.length?E.constant[2]:
0,Ja=3<E.constant.length?E.constant[3]:0)):(kb=w(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),eb="type"in E?ma[E.type]:kb.dtype,ob=!!E.normalized,Ua=E.size|0,va=E.offset|0,Aa=E.stride|0,qa=E.divisor|0);Mc=B.buffer;B.buffer=kb;Ib=B.divisor;B.divisor=qa;Za=B.normalized;B.normalized=ob;Sb=B.offset;B.offset=va;xa=B.size;B.size=Ua;fd=B.state;B.state=bb;Ka=B.stride;B.stride=Aa;Lb=B.type;B.type=eb;fb=B.w;B.w=Ja;ib=B.x;B.x=Bb;ya=B.y;B.y=zb;fc=B.z;B.z=Ra;Ea=this.position;pb=!1;qb=null;Xa=
0;Ya=!1;xc=oc=0;vc=1;Va=0;Yb=5126;Qa=zc=Ga=Tc=0;w(Ea)?(pb=!0,qb=K.createStream(34962,Ea),Yb=qb.dtype):(qb=K.getBuffer(Ea))?Yb=qb.dtype:"constant"in Ea?(vc=2,"number"===typeof Ea.constant?(Ga=Ea.constant,zc=Qa=Tc=0):(Ga=0<Ea.constant.length?Ea.constant[0]:0,zc=1<Ea.constant.length?Ea.constant[1]:0,Qa=2<Ea.constant.length?Ea.constant[2]:0,Tc=3<Ea.constant.length?Ea.constant[3]:0)):(qb=w(Ea.buffer)?K.createStream(34962,Ea.buffer):K.getBuffer(Ea.buffer),Yb="type"in Ea?ma[Ea.type]:qb.dtype,Ya=!!Ea.normalized,
xc=Ea.size|0,oc=Ea.offset|0,Va=Ea.stride|0,Xa=Ea.divisor|0);Ba=M.buffer;M.buffer=qb;lb=M.divisor;M.divisor=Xa;vb=M.normalized;M.normalized=Ya;Cb=M.offset;M.offset=oc;rb=M.size;M.size=xc;wc=M.state;M.state=vc;wb=M.stride;M.stride=Va;Jd=M.type;M.type=Yb;uc=M.w;M.w=Tc;Td=M.x;M.x=Ga;Oc=M.y;M.y=zc;id=M.z;M.z=Qa;v.buffer=this.sizeBuffer;ud=!1;Ub=null;cc=0;Mb=!1;Zb=Ha=0;mb=1;xb=0;Kb=5126;Uc=jc=gc=Nb=0;w(v)?(ud=!0,Ub=K.createStream(34962,v),Kb=Ub.dtype):(Ub=K.getBuffer(v))?Kb=Ub.dtype:"constant"in v?(mb=
2,"number"===typeof v.constant?(gc=v.constant,jc=Uc=Nb=0):(gc=0<v.constant.length?v.constant[0]:0,jc=1<v.constant.length?v.constant[1]:0,Uc=2<v.constant.length?v.constant[2]:0,Nb=3<v.constant.length?v.constant[3]:0)):(Ub=w(v.buffer)?K.createStream(34962,v.buffer):K.getBuffer(v.buffer),Kb="type"in v?ma[v.type]:Ub.dtype,Mb=!!v.normalized,Zb=v.size|0,Ha=v.offset|0,xb=v.stride|0,cc=v.divisor|0);Ec=r.buffer;r.buffer=Ub;Fc=r.divisor;r.divisor=cc;Hc=r.normalized;r.normalized=Mb;Pc=r.offset;r.offset=Ha;cd=
r.size;r.size=Zb;Vc=r.state;r.state=mb;Qc=r.stride;r.stride=xb;Jb=r.type;r.type=Kb;Eb=r.w;r.w=Nb;Rc=r.x;r.x=gc;Lc=r.y;r.y=jc;Wc=r.z;r.z=Uc;hc=ba.vert;ba.vert=61;Zc=ba.frag;ba.frag=60;S.dirty=!0;b(N,a,c);N.viewportWidth=k;N.viewportHeight=m;Q[0]=n;Q[1]=q;Q[2]=y;Q[3]=x;dc[0]=z;dc[1]=D;dc[2]=G;dc[3]=L;ia.blend_enable=F;ea[0]=I;ea[1]=O;ea[2]=R;ea[3]=P;ia.depth_enable=Z;ia.stencil_enable=ca;X&&(C.cpuTime+=performance.now()-W);na.offset=Y;na.count=Ca;na.primitive=ha;Fa[64]=ja;Fa[69]=oa;Fa[67]=ra;Fa[66]=
Da;Fa[65]=Na;Fa[62]=$a;Fa[14]=gb;Fa[63]=sb;Fa[10]=wd;Fa[68]=ac;Fa[6]=Xb;Fa[8]=Gb;Fa[3]=tb;ua&&K.destroyStream(Vb);u.buffer=Ma;u.divisor=nb;u.normalized=ub;u.offset=hb;u.size=Pa;u.state=qc;u.stride=Rb;u.type=Yc;u.w=db;u.x=nc;u.y=Kc;u.z=ec;jb&&K.destroyStream(kb);B.buffer=Mc;B.divisor=Ib;B.normalized=Za;B.offset=Sb;B.size=xa;B.state=fd;B.stride=Ka;B.type=Lb;B.w=fb;B.x=ib;B.y=ya;B.z=fc;pb&&K.destroyStream(qb);M.buffer=Ba;M.divisor=lb;M.normalized=vb;M.offset=Cb;M.size=rb;M.state=wc;M.stride=wb;M.type=
Jd;M.w=uc;M.x=Td;M.y=Oc;M.z=id;ud&&K.destroyStream(Ub);r.buffer=Ec;r.divisor=Fc;r.normalized=Hc;r.offset=Pc;r.size=cd;r.state=Vc;r.stride=Qc;r.type=Jb;r.w=Eb;r.x=Rc;r.y=Lc;r.z=Wc;ba.vert=hc;ba.frag=Zc;S.dirty=!0}}}}},{}],25:[function(A,C,Vb){var d=A("./sorted-object-keys");C.exports=function(A,q){for(var z=d(q),f=0;f<z.length;++f)A[z[f]]=q[z[f]];return A}},{"./sorted-object-keys":34}],26:[function(A,C,Vb){function d(d,f,c,q,b,t){for(var A=0;A<f;++A)for(var C=d[A],H=0;H<c;++H)for(var J=C[H],u=0;u<
q;++u)b[t++]=J[u]}function V(q,f,c,y,b){for(var t=1,A=c+1;A<f.length;++A)t*=f[A];var C=f[c];if(4===f.length-c){var H=f[c+1],J=f[c+2];f=f[c+3];for(A=0;A<C;++A)d(q[A],H,J,f,y,b),b+=t}else for(A=0;A<C;++A)V(q[A],f,c+1,y,b),b+=t}var q=A("./pool");C.exports={shape:function(d){for(var f=[];d.length;d=d[0])f.push(d.length);return f},flatten:function(z,f,c,y){var b=1;if(f.length)for(var t=0;t<f.length;++t)b*=f[t];else b=0;c=y||q.allocType(c,b);switch(f.length){case 0:break;case 1:y=f[0];for(f=0;f<y;++f)c[f]=
z[f];break;case 2:y=f[0];f=f[1];for(t=b=0;t<y;++t)for(var A=z[t],C=0;C<f;++C)c[b++]=A[C];break;case 3:d(z,f[0],f[1],f[2],c,0);break;default:V(z,f,0,c,0)}return c}}},{"./pool":32}],27:[function(A,C,Vb){var d=A("./is-typed-array");C.exports=function(A){return Array.isArray(A)||d(A)}},{"./is-typed-array":30}],28:[function(A,C,Vb){var d=A("./is-typed-array");C.exports=function(A){return!!A&&"object"===typeof A&&Array.isArray(A.shape)&&Array.isArray(A.stride)&&"number"===typeof A.offset&&A.shape.length===
A.stride.length&&(Array.isArray(A.data)||d(A.data))}},{"./is-typed-array":30}],29:[function(A,C,Vb){C.exports=function(d){return!(d&d-1)&&!!d}},{}],30:[function(A,C,Vb){C.exports=function(d){return d instanceof Uint8Array||d instanceof Uint16Array||d instanceof Uint32Array||d instanceof Int8Array||d instanceof Int16Array||d instanceof Int32Array||d instanceof Float32Array||d instanceof Float64Array||d instanceof Uint8ClampedArray}},{}],31:[function(A,C,Vb){C.exports=function(d,A){for(var q=Array(d),
z=0;z<d;++z)q[z]=A(z);return q}},{}],32:[function(A,C,Vb){function d(d){var f,c;f=(65535<d)<<4;d>>>=f;c=(255<d)<<3;d>>>=c;f|=c;c=(15<d)<<2;d>>>=c;f|=c;c=(3<d)<<1;return f|c|d>>>c>>1}function V(){function z(f){a:{for(var b=16;268435456>=b;b*=16)if(f<=b){f=b;break a}f=0}b=c[d(f)>>2];return 0<b.length?b.pop():new ArrayBuffer(f)}function f(f){c[d(f.byteLength)>>2].push(f)}var c=q(8,function(){return[]});return{alloc:z,free:f,allocType:function(c,b){var d=null;switch(c){case 5120:d=new Int8Array(z(b),
0,b);break;case 5121:d=new Uint8Array(z(b),0,b);break;case 5122:d=new Int16Array(z(2*b),0,b);break;case 5123:d=new Uint16Array(z(2*b),0,b);break;case 5124:d=new Int32Array(z(4*b),0,b);break;case 5125:d=new Uint32Array(z(4*b),0,b);break;case 5126:d=new Float32Array(z(4*b),0,b);break;default:return null}return d.length!==b?d.subarray(0,b):d},freeType:function(c){f(c.buffer)}}}var q=A("./loop");A=V();A.zero=V();C.exports=A},{"./loop":31}],33:[function(A,C,Vb){C.exports={next:"function"===typeof requestAnimationFrame?
function(d){return requestAnimationFrame(d)}:function(d){return setTimeout(d,16)},cancel:"function"===typeof cancelAnimationFrame?function(d){return cancelAnimationFrame(d)}:clearTimeout}},{}],34:[function(A,C,Vb){C.exports=function(d){return Object.keys(d).sort()}},{}],35:[function(A,C,Vb){var d=A("./pool"),V=new Float32Array(1),q=new Uint32Array(V.buffer);C.exports=function(z){for(var f=d.allocType(5123,z.length),c=0;c<z.length;++c)if(isNaN(z[c]))f[c]=65535;else if(Infinity===z[c])f[c]=31744;else if(-Infinity===
z[c])f[c]=64512;else{V[0]=z[c];var y=q[0],b=y>>>31<<15,t=(y<<1>>>24)-127,y=y>>13&1023;f[c]=-24>t?b:-14>t?b+(y+1024>>-14-t):15<t?b+31744:b+(t+15<<10)+y}return f}},{"./pool":32}],36:[function(A,C,Vb){var d=A("./sorted-object-keys");C.exports=function(A){return d(A).map(function(d){return A[d]})}},{"./sorted-object-keys":34}],37:[function(A,C,Vb){function d(d,b,f){function q(){var b=window.innerWidth,c=window.innerHeight;d!==document.body&&(c=z.getBoundingClientRect(),b=c.right-c.left,c=c.bottom-c.top);
z.width=f*b;z.height=f*c}var z=document.createElement("canvas");c(z.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});d.appendChild(z);d===document.body&&(z.style.position="absolute",c(d.style,{margin:0,padding:0}));var A;d!==document.body&&"function"===typeof ResizeObserver?(A=new ResizeObserver(function(){setTimeout(q)}),A.observe(d)):window.addEventListener("resize",q,!1);q();return{canvas:z,onDestroy:function(){A?A.disconnect():window.removeEventListener("resize",q);
d.removeChild(z)}}}function V(c,b){function d(f){try{return c.getContext(f,b)}catch(q){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function q(c){if("string"===typeof c)return c.split();f(Array.isArray(c),"invalid extension array");return c}function z(c){return"string"===typeof c?(f("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(c)):c}var f=A("./util/check"),c=A("./util/extend");C.exports=function(c){var b=c||{},t,A,C,H;c={};
var J=[],u=[],B="undefined"===typeof window?1:window.devicePixelRatio,M=!1,r=function(b){b&&f.raise(b)},I=function(){};"string"===typeof b?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),t=document.querySelector(b),f(t,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?t=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(H=
b,C=H.canvas):(f.constructor(b),"gl"in b?H=b.gl:"canvas"in b?C=z(b.canvas):"container"in b&&(A=z(b.container)),"attributes"in b&&(c=b.attributes,f.type(c,"object","invalid context attributes")),"extensions"in b&&(J=q(b.extensions)),"optionalExtensions"in b&&(u=q(b.optionalExtensions)),"onDone"in b&&(f.type(b.onDone,"function","invalid or missing onDone callback"),r=b.onDone),"profile"in b&&(M=!!b.profile),"pixelRatio"in b&&(B=+b.pixelRatio,f(0<B,"invalid pixel ratio"))):f.raise("invalid arguments to regl");
t&&("canvas"===t.nodeName.toLowerCase()?C=t:A=t);if(!H){if(!C){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");t=d(A||document.body,r,B);if(!t)return null;C=t.canvas;I=t.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);H=V(C,c)}return H?{gl:H,canvas:C,container:A,extensions:J,optionalExtensions:u,pixelRatio:B,profile:M,onDone:r,onDestroy:I}:(I(),r("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(A,C,Vb){function d(c){throw Error("resl: "+c);}function V(c,b,f){Object.keys(c).forEach(function(c){0>b.indexOf(c)&&d('invalid parameter "'+c+'" in '+f)})}function q(c,b){this.state=0;this.ready=!1;this.progress=0;this.name=c;this.cancel=b}var z=["manifest","onDone","onProgress","onError"],f=["type","src","stream","credentials","parser"],c=["onData","onDone"];C.exports=function(y){function b(b,c){if(b in y){var f=y[b];"function"!==typeof f&&
d('invalid callback "'+b+'"');return f}return null}function t(b){function c(){if(!(2>t.readyState||1===y.state||-1===y.state)){if(200!==t.status)return C('error loading resource "'+b.name+'"');if(2<t.readyState&&0===y.state){var f;f="binary"===b.type?t.response:t.responseText;if(u.data)try{m=u.data(f)}catch(g){return C(g)}else m=f}if(3<t.readyState&&0===y.state){if(u.done)try{m=u.done()}catch(g){return C(g)}y.state=1}r[d]=m;y.progress=.75*y.progress+.25;y.ready=b.stream&&!!m||1===y.state;H()}}var d=
b.name,f=b.stream,n="binary"===b.type,u=b.parser,t=new XMLHttpRequest,m=null,y=new q(d,function(){1!==y.state&&-1!==y.state&&(t.onreadystatechange=null,t.abort(),y.state=-1)});t.onreadystatechange=f?c:function(){4===t.readyState&&c()};n&&(t.responseType="arraybuffer");b.credentials&&(t.withCredentials=!0);t.open("GET",b.src,!0);t.send();return y}function A(b,c){function d(){if(0===z.state)if(y.data)try{B=y.data(c)}catch(a){return C(a)}else B=c}function f(a){d();r[m]=B;z.progress=a.lengthComputable?
Math.max(z.progress,a.loaded/a.total):.75*z.progress+.25;H(m)}function n(){d();if(0===z.state){if(y.done)try{B=y.done()}catch(a){return C(a)}z.state=1}z.progress=1;z.ready=!0;r[m]=B;u();H("finish "+m)}function t(){C('error loading asset "'+m+'"')}function u(){b.stream&&c.removeEventListener("progress",f);"image"===b.type?c.addEventListener("load",n):c.addEventListener("canplay",n);c.removeEventListener("error",t)}var m=b.name,y=b.parser,z=new q(m,function(){1!==z.state&&-1!==z.state&&(z.state=-1,
u(),c.src="")}),B=c;b.stream&&c.addEventListener("progress",f);if("image"===b.type)c.addEventListener("load",n);else{var a=!1,e=!1;c.addEventListener("loadedmetadata",function(){e=!0;a&&n()});c.addEventListener("canplay",function(){a=!0;e&&n()})}c.addEventListener("error",t);c.crossOrigin=b.credentials?"use-credentials":"anonymous";c.src=b.src;return z}function C(b){-1!==I&&1!==I&&(I=-1,F.forEach(function(b){b.cancel()}),M?"string"===typeof b?M(Error("resl: "+b)):M(b):console.error("resl error:",
b))}function H(b){if(-1!==I&&1!==I){var c=0,d=0;F.forEach(function(b){b.ready&&(d+=1);c+=b.progress});d===F.length?(I=1,u(r)):B&&B(c/F.length,b)}}"object"===typeof y&&y||d("invalid or missing configuration");V(y,z,"config");var J=y.manifest;"object"===typeof J&&J||d("missing manifest");var u=b("onDone");u||d("missing onDone() callback");var B=b("onProgress"),M=b("onError"),r={},I=0,oa={text:t,binary:function(b){return t(b)},image:function(b){return A(b,document.createElement("img"))},video:function(b){return A(b,
document.createElement("video"))},audio:function(b){return A(b,document.createElement("audio"))}},F=Object.keys(J).map(function(b){function k(b,c){if(b in h.parser){var f=h.parser[b];"function"!==typeof f&&d("invalid parser callback "+b+' for asset "'+b+'"');return f}return c}var h=J[b];"string"===typeof h?h={src:h}:"object"===typeof h&&h||d('invalid asset definition "'+b+'"');V(h,f,'asset "'+b+'"');var g={};"parser"in h&&("function"===typeof h.parser?g={data:h.parser}:"object"===typeof h.parser&&
h.parser?(V(g,c,'parser for asset "'+b+'"'),"onData"in g||d('missing onData callback for parser in asset "'+b+'"'),g={data:k("onData"),done:k("onDone")}):d('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,f,g){c in h&&(g=h[c]);0>f.indexOf(g)&&d("invalid "+c+' "'+g+'" for asset "'+b+'", possible values: '+f);return g}("type",Object.keys(oa),"text"),stream:!!h.stream,credentials:!!h.credentials,src:function(c,f,g){c in h?g=h[c]:f&&d("missing "+c+' for asset "'+b+'"');"string"!==typeof g&&
d("invalid "+c+' for asset "'+b+'", must be a string');return g}("src",!0,""),parser:g}}).map(function(b){return oa[b.type](b)});0===F.length&&setTimeout(function(){H("done")},1)}},{}],39:[function(A,C,Vb){function d(b,c){for(var d=0;d<b.length;++d)if(b[d]===c)return d;return-1}var V=A("./lib/util/check"),q=A("./lib/util/extend"),z=A("./lib/dynamic"),f=A("./lib/util/raf"),c=A("./lib/util/clock"),y=A("./lib/strings"),b=A("./lib/webgl"),t=A("./lib/extension"),ga=A("./lib/limits"),za=A("./lib/buffer"),
H=A("./lib/elements"),J=A("./lib/texture"),u=A("./lib/renderbuffer"),B=A("./lib/framebuffer"),M=A("./lib/attribute"),r=A("./lib/shader"),I=A("./lib/read"),oa=A("./lib/core"),F=A("./lib/stats"),Ca=A("./lib/timer");C.exports=function(k){function h(){if(0===gb.length)K&&K.update(),pc=null;else{pc=f.next(h);a();for(var b=gb.length-1;0<=b;--b){var c=gb[b];c&&c(O,null,0)}pa.flush();K&&K.update()}}function g(){!pc&&0<gb.length&&(pc=f.next(h))}function n(){pc&&(f.cancel(h),pc=null)}function A(a){a.preventDefault();
Fb=!0;n();ea.forEach(function(a){a()})}function C(a){pa.getError();Fb=!1;ac.restore();ia.restore();$a.restore();ba.restore();Fa.restore();Oa.restore();w.restore();K&&K.restore();dc.procs.refresh();g();ta.forEach(function(a){a()})}function m(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(z.isDynamic(f))e[b]=z.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(z.isDynamic(f[g])){e[b]=z.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<
a;)r.push(null);return r}V(!!a,"invalid args to regl({...})");V.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=q({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=dc.compile(a,f,e,d,g),k=h.draw,m=h.batch,n=h.scope,r=[];return q(function(a,b){var d;Fb&&V.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);
else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function la(a,b){var c=0;dc.procs.poll();var d=b.color;d&&(pa.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(pa.clearDepth(+b.depth),c|=256);"stencil"in b&&(pa.clearStencil(b.stencil|0),c|=1024);V(!!c,"called regl.clear with no buffer specified");pa.clear(c)}function L(a){V.type(a,
"function","regl.frame() callback must be a function");gb.push(a);g();return{cancel:function(){function b(){var a=d(gb,b);gb[a]=gb[gb.length-1];--gb.length;0>=gb.length&&n()}var c=d(gb,a);V(0<=c,"cannot cancel a frame twice");gb[c]=b}}}function da(){var a=Ia.viewport,b=Ia.scissor_box;a[0]=a[1]=b[0]=b[1]=0;O.viewportWidth=O.framebufferWidth=O.drawingBufferWidth=a[2]=b[2]=pa.drawingBufferWidth;O.viewportHeight=O.framebufferHeight=O.drawingBufferHeight=a[3]=b[3]=pa.drawingBufferHeight}function a(){O.tick+=
1;O.time=X();da();dc.procs.poll()}function e(){ba.refresh();da();dc.procs.refresh();K&&K.update()}function X(){return(c()-N)/1E3}console.log("REGL args are:",k);k=b(k);console.log("REGL configs are:",k);if(!k)return null;var pa=k.gl,Vb=pa.getContextAttributes(),Fb=pa.isContextLost(),ac=t(pa,k);if(!ac)return null;var ra=y(),Na=F(),Y=ac.extensions,K=Ca(pa,Y),N=c(),S=pa.drawingBufferWidth,na=pa.drawingBufferHeight,O={tick:0,time:0,viewportWidth:S,viewportHeight:na,framebufferWidth:S,framebufferHeight:na,
drawingBufferWidth:S,drawingBufferHeight:na,pixelRatio:k.pixelRatio},S={elements:null,primitive:4,count:-1,offset:0,instances:-1},Wb=ga(pa,Y),$a=za(pa,Na,k,function(a){return w.destroyBuffer(a)}),P=H(pa,Y,$a,Na),w=M(pa,Y,Wb,Na,$a,P,S),ia=r(pa,ra,Na,k),ba=J(pa,Y,Wb,function(){dc.procs.poll()},O,Na,k),Fa=u(pa,Y,Wb,Na,k),Oa=B(pa,Y,Wb,ba,Fa,Na),dc=oa(pa,ra,Y,Wb,$a,P,ba,Oa,{},w,ia,S,O,K,k),ra=I(pa,Oa,dc.procs.poll,O,Vb,Y,Wb),Ia=dc.next,W=pa.canvas,gb=[],ea=[],ta=[],ic=[k.onDestroy],pc=null;W&&(W.addEventListener("webglcontextlost",
A,!1),W.addEventListener("webglcontextrestored",C,!1));var sc=Oa.setFBO=m({framebuffer:z.define.call(null,1,"framebuffer")});e();Vb=q(m,{clear:function(a){V("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)sc(q({framebuffer:a.framebuffer.faces[b]},a),la);else sc(a,la);else la(null,a)},prop:z.define.bind(null,1),context:z.define.bind(null,2),"this":z.define.bind(null,3),draw:m({}),buffer:function(a){return $a.create(a,
34962,!1,!1)},elements:function(a){return P.create(a,!1)},texture:ba.create2D,cube:ba.createCube,renderbuffer:Fa.create,framebuffer:Oa.create,framebufferCube:Oa.createCube,vao:w.createVAO,attributes:Vb,frame:L,on:function(a,b){V.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return L(b);case "lost":c=ea;break;case "restore":c=ta;break;case "destroy":c=ic;break;default:V.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Wb,hasExtension:function(a){return 0<=Wb.extensions.indexOf(a.toLowerCase())},read:ra,destroy:function(){gb.length=0;n();W&&(W.removeEventListener("webglcontextlost",A),W.removeEventListener("webglcontextrestored",C));ia.clear();Oa.clear();Fa.clear();w.clear();ba.clear();P.clear();$a.clear();K&&K.clear();ic.forEach(function(a){a()})},_gl:pa,_refresh:e,poll:function(){a();K&&K.update()},now:X,stats:Na});k.onDone(null,Vb);return Vb}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

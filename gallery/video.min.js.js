(function(){function W(ia,fb,d){function ba(g,k){if(!fb[g]){if(!ia[g]){var q="function"==typeof require&&require;if(!k&&q)return q(g,!0);if(H)return H(g,!0);q=Error("Cannot find module '"+g+"'");throw q.code="MODULE_NOT_FOUND",q;}q=fb[g]={exports:{}};ia[g][0].call(q.exports,function(f){return ba(ia[g][1][f]||f)},q,q.exports,W,ia,fb,d)}return fb[g].exports}for(var H="function"==typeof require&&require,J=0;J<d.length;J++)ba(d[J]);return ba}return W})()({1:[function(W,ia,fb){var d=W("../regl")(),ba=
d({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform vec2 screenShape;\n  uniform float time;\n\n  varying vec2 uv;\n\n  vec4 background () {\n    vec2 pos = 0.5 - gl_FragCoord.xy / screenShape;\n    float r = length(pos);\n    float theta = atan(pos.y, pos.x);\n    return vec4(\n      cos(pos.x * time) + sin(pos.y * pos.x * time),\n      cos(100.0 * r * cos(0.3 * time) + theta),\n      sin(time / r + pos.x * cos(10.0 * time + 3.0)),\n      1);\n  }\n\n  void main () {\n    vec4 color = texture2D(texture, uv);\n    float chromakey = step(0.15 + max(color.r, color.b), color.g);\n    gl_FragColor = mix(color, background(), chromakey);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = vec2(1.0 - position.x, position.y);\n    gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n  }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:d.prop("video"),screenShape:function(d){return[d.viewportWidth,d.viewportHeight]},time:d.context("time")},count:3});W("resl")({manifest:{video:{type:"video",src:"assets/doggie-chromakey.ogv",stream:!0}},onDone:function(H){var J=H.video;J.autoplay=
!1;J.loop=!0;J.preload="auto";J.autoload=!0;J.load();var g=document.createElement("button");g.style="position:absolute;left:50%;top:50%";g.innerText="start";document.body.appendChild(g);g.addEventListener("click",function(){J.play();var k=d.texture(J);d.frame(function(){ba({video:k.subimage(J)})});g.parentNode.removeChild(g)})}})},{"../regl":39,resl:38}],2:[function(W,ia,fb){function d(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=
this.stride=this.offset=0}var ba=W("./util/sorted-object-keys"),H=W("./util/check"),J=W("./util/values"),g=W("./constants/dtypes.json"),k=W("./util/is-typed-array"),q=W("./util/is-ndarray"),f=W("./constants/primitives.json"),B="attributes elements offset count primitive instances".split(" ");ia.exports=function(D,G,T,x,t,l,ca){function u(h){if(h!==Z.currentVAO){var w=G.oes_vertex_array_object;h?w.bindVertexArrayOES(h.vao):w.bindVertexArrayOES(null);Z.currentVAO=h}}function N(h){if(h!==Z.currentVAO){if(h)h.bindAttrs();
else{for(var w=G.angle_instanced_arrays,c=0;c<b.length;++c){var f=b[c];f.buffer?(D.enableVertexAttribArray(c),f.buffer.bind(),D.vertexAttribPointer(c,f.size,f.type,f.normalized,f.stride,f.offfset),w&&f.divisor&&w.vertexAttribDivisorANGLE(c,f.divisor)):(D.disableVertexAttribArray(c),D.vertexAttrib4f(c,f.x,f.y,f.z,f.w))}ca.elements?D.bindBuffer(34963,ca.elements.buffer.buffer):D.bindBuffer(34963,null)}Z.currentVAO=h}}function y(){J(r).forEach(function(h){h.destroy()})}function P(){this.id=++S;this.attributes=
[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var h=G.oes_vertex_array_object;this.vao=h?h.createVertexArrayOES():null;r[this.id]=this;this.buffers=[]}function ga(){G.oes_vertex_array_object&&J(r).forEach(function(h){h.refresh()})}var c=T.maxAttributes,b=Array(c);for(T=0;T<c;++T)b[T]=new d;var S=0,r={},Z={Record:d,scope:{},state:b,currentVAO:null,targetVAO:null,restore:G.oes_vertex_array_object?ga:function(){},createVAO:function(h){function w(h){var r;
if(Array.isArray(h))r=h,b.elements&&b.ownsElements&&b.elements.destroy(),b.elements=null,b.ownsElements=!1,b.offset=0,b.count=0,b.instances=-1,b.primitive=4;else{H("object"===typeof h,"invalid arguments for create vao");H("attributes"in h,"must specify attributes for vao");if(h.elements){var e=h.elements;b.ownsElements?("function"===typeof e&&"elements"===e._reglType?b.elements.destroy():b.elements(e),b.ownsElements=!1):l.getElements(h.elements)?(b.elements=h.elements,b.ownsElements=!1):(b.elements=
l.create(h.elements),b.ownsElements=!0)}else b.elements=null,b.ownsElements=!1;r=h.attributes;b.offset=0;b.count=-1;b.instances=-1;b.primitive=4;b.elements&&(b.count=b.elements._elements.vertCount,b.primitive=b.elements._elements.primType);"offset"in h&&(b.offset=h.offset|0);"count"in h&&(b.count=h.count|0);"instances"in h&&(b.instances=h.instances|0);"primitive"in h&&(H(h.primitive in f,"bad primitive type: "+h.primitive),b.primitive=f[h.primitive]);H.optional(function(){for(var a=ba(h),e=0;e<a.length;++e)H(0<=
B.indexOf(a[e]),'invalid option for vao: "'+a[e]+'" valid options are '+B)});H(Array.isArray(r),"attributes must be an array")}H(r.length<c,"too many attributes");H(0<r.length,"must specify at least one attribute");var e={},R=b.attributes;R.length=r.length;for(var a=0;a<r.length;++a){var S=r[a],A=R[a]=new d,y=S.data||S;if(Array.isArray(y)||k(y)||q(y)){var u;b.buffers[a]&&(u=b.buffers[a],k(y)&&u._buffer.byteLength>=y.byteLength?u.subdata(y):(u.destroy(),b.buffers[a]=null));b.buffers[a]||(u=b.buffers[a]=
t.create(S,34962,!1,!0));A.buffer=t.getBuffer(u);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;e[a]=1}else t.getBuffer(S)?(A.buffer=t.getBuffer(S),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=0,A.stride=0,A.divisor=0,A.state=1):t.getBuffer(S.buffer)?(A.buffer=t.getBuffer(S.buffer),A.size=(+S.size||A.buffer.dimension)|0,A.normalized=!!S.normalized||!1,"type"in S?(H.parameter(S.type,g,"invalid buffer type"),
A.type=g[S.type]):A.type=A.buffer.dtype,A.offset=(S.offset||0)|0,A.stride=(S.stride||0)|0,A.divisor=(S.divisor||0)|0,A.state=1,H(1<=A.size&&4>=A.size,"size must be between 1 and 4"),H(0<=A.offset,"invalid offset"),H(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),H(0<=A.divisor,"divisor must be positive"),H(!A.divisor||!!G.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in S?(H(0<a,"first attribute must not be a constant"),A.x=+S.x||0,A.y=+S.y||0,
A.z=+S.z||0,A.w=+S.w||0,A.state=2):H(!1,"invalid attribute spec for location "+a)}for(u=0;u<b.buffers.length;++u)!e[u]&&b.buffers[u]&&(b.buffers[u].destroy(),b.buffers[u]=null);b.refresh();return w}var b=new P;x.vaoCount+=1;w.destroy=function(){for(var h=0;h<b.buffers.length;++h)b.buffers[h]&&b.buffers[h].destroy();b.buffers.length=0;b.ownsElements&&(b.elements.destroy(),b.elements=null,b.ownsElements=!1);b.destroy()};w._vao=b;w._reglType="vao";return w(h)},getVAO:function(h){return"function"===typeof h&&
h._vao?h._vao:null},destroyBuffer:function(h){for(var c=0;c<b.length;++c){var f=b[c];f.buffer===h&&(D.disableVertexAttribArray(c),f.buffer=null)}},setVAO:G.oes_vertex_array_object?u:N,clear:G.oes_vertex_array_object?y:function(){}};P.prototype.bindAttrs=function(){for(var h=G.angle_instanced_arrays,w=this.attributes,f=0;f<w.length;++f){var b=w[f];b.buffer?(D.enableVertexAttribArray(f),D.bindBuffer(34962,b.buffer.buffer),D.vertexAttribPointer(f,b.size,b.type,b.normalized,b.stride,b.offset),h&&b.divisor&&
h.vertexAttribDivisorANGLE(f,b.divisor)):(D.disableVertexAttribArray(f),D.vertexAttrib4f(f,b.x,b.y,b.z,b.w))}for(h=w.length;h<c;++h)D.disableVertexAttribArray(h);(h=l.getElements(this.elements))?D.bindBuffer(34963,h.buffer.buffer):D.bindBuffer(34963,null)};P.prototype.refresh=function(){var h=G.oes_vertex_array_object;h&&(h.bindVertexArrayOES(this.vao),this.bindAttrs(),Z.currentVAO=null,h.bindVertexArrayOES(null))};P.prototype.destroy=function(){if(this.vao){var h=G.oes_vertex_array_object;this===
Z.currentVAO&&(Z.currentVAO=null,h.bindVertexArrayOES(null));h.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);r[this.id]&&(delete r[this.id],--x.vaoCount)};return Z}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(W,ia,fb){function d(f){return T[Object.prototype.toString.call(f)]|
0}function ba(f,k){for(var q=0;q<k.length;++q)f[q]=k[q]}function H(f,k,q,g,d,t,c){for(var b=0,S=0;S<q;++S)for(var r=0;r<g;++r)f[b++]=k[d*S+t*r+c]}var J=W("./util/sorted-object-keys"),g=W("./util/check"),k=W("./util/is-typed-array"),q=W("./util/is-ndarray"),f=W("./util/values"),B=W("./util/pool");fb=W("./util/flatten");var D=fb.flatten,G=fb.shape,T=W("./constants/arraytypes.json"),x=W("./constants/dtypes.json"),t=W("./constants/usage.json"),l=[];l[5120]=1;l[5122]=2;l[5124]=4;l[5121]=1;l[5123]=2;l[5125]=
4;l[5126]=4;ia.exports=function(T,u,N,y){function P(h){this.id=S++;this.buffer=T.createBuffer();this.type=h;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;N.profile&&(this.stats={size:0})}function ga(h,c,f){h.byteLength=c.byteLength;T.bufferData(h.type,c,f)}function c(h,c,f,b,r,e){h.usage=f;if(Array.isArray(c)){if(h.dtype=b||5126,0<c.length)if(Array.isArray(c[0])){r=G(c);for(var R=b=1;R<r.length;++R)b*=r[R];h.dimension=b;c=D(c,r,h.dtype);ga(h,c,f);e?h.persistentData=
c:B.freeType(c)}else"number"===typeof c[0]?(h.dimension=r,r=B.allocType(h.dtype,c.length),ba(r,c),ga(h,r,f),e?h.persistentData=r:B.freeType(r)):k(c[0])?(h.dimension=c[0].length,h.dtype=b||d(c[0])||5126,c=D(c,[c.length,c[0].length],h.dtype),ga(h,c,f),e?h.persistentData=c:B.freeType(c)):g.raise("invalid buffer data")}else if(k(c))h.dtype=b||d(c),h.dimension=r,ga(h,c,f),e&&(h.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(q(c)){r=c.shape;var a=c.stride,R=c.offset,S=0,A=0,y=0,u=0;1===
r.length?(S=r[0],A=1,y=a[0],u=0):2===r.length?(S=r[0],A=r[1],y=a[0],u=a[1]):g.raise("invalid shape");h.dtype=b||d(c.data)||5126;h.dimension=A;r=B.allocType(h.dtype,S*A);H(r,c.data,S,A,y,u,R);ga(h,r,f);e?h.persistentData=r:B.freeType(r)}else c instanceof ArrayBuffer?(h.dtype=5121,h.dimension=r,ga(h,c,f),e&&(h.persistentData=new Uint8Array(new Uint8Array(c)))):g.raise("invalid buffer data")}function b(c){u.bufferCount--;y(c);var f=c.buffer;g(f,"buffer must not be deleted already");T.deleteBuffer(f);
c.buffer=null;delete r[c.id]}var S=0,r={};P.prototype.bind=function(){T.bindBuffer(this.type,this.buffer)};P.prototype.destroy=function(){b(this)};var Z=[];N.profile&&(u.getTotalBufferSize=function(){var c=0;J(r).forEach(function(f){c+=r[f].stats.size});return c});return{create:function(h,f,S,y){function C(a){var e=35044,h=null,f=0,b=0,w=1;Array.isArray(a)||k(a)||q(a)||a instanceof ArrayBuffer?h=a:"number"===typeof a?f=a|0:a&&(g.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(g(null===h||Array.isArray(h)||k(h)||q(h),"invalid data for buffer"),h=a.data),"usage"in a&&(g.parameter(a.usage,t,"invalid buffer usage"),e=t[a.usage]),"type"in a&&(g.parameter(a.type,x,"invalid buffer type"),b=x[a.type]),"dimension"in a&&(g.type(a.dimension,"number","invalid dimension"),w=a.dimension|0),"length"in a&&(g.nni(f,"buffer length must be a nonnegative integer"),f=a.length|0));R.bind();h?c(R,h,e,b,w,y):(f&&T.bufferData(R.type,f,e),R.dtype=b||5121,R.usage=e,R.dimension=w,R.byteLength=
f);N.profile&&(R.stats.size=R.byteLength*l[R.dtype]);return C}function e(a,e){g(e+a.byteLength<=R.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+e+" to a buffer of size "+R.byteLength);T.bufferSubData(R.type,e,a)}u.bufferCount++;var R=new P(f);r[R.id]=R;S||C(h);C._reglType="buffer";C._buffer=R;C.subdata=function(a,c){var h=(c||0)|0,f;R.bind();if(k(a)||a instanceof ArrayBuffer)e(a,h);else if(Array.isArray(a)){if(0<a.length)if("number"===
typeof a[0]){var b=B.allocType(R.dtype,a.length);ba(b,a);e(b,h);B.freeType(b)}else Array.isArray(a[0])||k(a[0])?(f=G(a),b=D(a,f,R.dtype),e(b,h),B.freeType(b)):g.raise("invalid buffer data")}else if(q(a)){f=a.shape;var w=a.stride,r=b=0,S=0,O=0;1===f.length?(b=f[0],r=1,S=w[0],O=0):2===f.length?(b=f[0],r=f[1],S=w[0],O=w[1]):g.raise("invalid shape");f=Array.isArray(a.data)?R.dtype:d(a.data);f=B.allocType(f,b*r);H(f,a.data,b,r,S,O,a.offset);e(f,h);B.freeType(f)}else g.raise("invalid data for buffer subdata");
return C};N.profile&&(C.stats=R.stats);C.destroy=function(){b(R)};return C},createStream:function(h,f){var b=Z.pop();b||(b=new P(h));b.bind();c(b,f,35040,0,1,!1);return b},destroyStream:function(c){Z.push(c)},clear:function(){f(r).forEach(b);Z.forEach(b)},getBuffer:function(c){return c&&c._buffer instanceof P?c._buffer:null},restore:function(){f(r).forEach(function(c){c.buffer=T.createBuffer();T.bindBuffer(c.type,c.buffer);T.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:c}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(W,ia,fb){ia.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(W,ia,fb){ia.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(W,ia,fb){ia.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(W,ia,fb){ia.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(W,ia,fb){function d(c){return Array.isArray(c)||T(c)||
x(c)}function ba(c){return c.sort(function(c,f){return"viewport"===c?-1:"viewport"===f?1:c<f?-1:1})}function H(c,f,b,k){this.thisDep=c;this.contextDep=f;this.propDep=b;this.append=k}function J(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function g(c){return new H(!1,!1,!1,c)}function k(c,f){var b=c.type;if(0===b)return b=c.data.length,new H(!0,1<=b,2<=b,f);if(4===b)return b=c.data,new H(b.thisDep,b.contextDep,b.propDep,f);if(5===b)return new H(!1,!1,!1,f);if(6===b){for(var k=b=!1,r=!1,e=0;e<
c.data.length;++e){var q=c.data[e];1===q.type?r=!0:2===q.type?k=!0:3===q.type?b=!0:0===q.type?(b=!0,q=q.data,1<=q&&(k=!0),2<=q&&(r=!0)):4===q.type&&(b=b||q.data.thisDep,k=k||q.data.contextDep,r=r||q.data.propDep)}return new H(b,k,r,f)}return new H(3===b,2===b,1===b,f)}var q=W("./util/sorted-object-keys"),f=W("./util/check"),B=W("./util/extend"),D=W("./util/codegen"),G=W("./util/loop"),T=W("./util/is-typed-array"),x=W("./util/is-ndarray"),t=W("./util/is-array-like"),l=W("./dynamic"),ca=W("./constants/primitives.json"),
u=W("./constants/dtypes.json"),N=["x","y","z","w"],y="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),P={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
ga="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),c={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,
always:519},b={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},S={frag:35632,vert:35633},r={cw:2304,ccw:2305},Z=new H(!1,!1,!1,function(){});ia.exports=function(h,w,x,E,C,e,R,a,T,A,ta,db,X,ea,Q){function O(a){return a.replace(".","_")}function z(a,e,c){var f=O(a);ua.push(a);Y[f]=la[f]=!!c;Ja[f]=e}function p(a,e,c){var f=O(a);ua.push(a);Array.isArray(c)?(la[f]=c.slice(),Y[f]=c.slice()):la[f]=Y[f]=c;Da[f]=e}function L(){var a=
D(),e=a.link,c=a.global;a.id=xd++;a.batchId="0";var b=e(mb),p=a.shared={props:"a0"};q(mb).forEach(function(a){p[a]=c.def(b,".",a)});f.optional(function(){a.CHECK=e(f);a.commandStr=f.guessCommand();a.command=e(a.commandStr);a.assert=function(a,c,f){a("if(!(",c,"))",this.CHECK,".commandRaise(",e(f),",",this.command,");")};da.invalidBlendCombinations=ga});var n=a.next={},v=a.current={};q(Da).forEach(function(a){Array.isArray(la[a])&&(n[a]=c.def(p.next,".",a),v[a]=c.def(p.current,".",a))});var m=a.constants=
{};q(da).forEach(function(a){m[a]=c.def(JSON.stringify(da[a]))});a.invoke=function(c,f){switch(f.type){case 0:var b=["this",p.context,p.props,a.batchId];return c.def(e(f.data),".call(",b.slice(0,Math.max(f.data.length+1,4)),")");case 1:return c.def(p.props,f.data);case 2:return c.def(p.context,f.data);case 3:return c.def("this",f.data);case 4:return f.data.append(a,c),f.data.ref;case 5:return f.data.toString();case 6:return f.data.map(function(e){return a.invoke(c,e)})}};a.attribCache={};var h={};
a.scopeAttrib=function(a){a=w.id(a);if(a in h)return h[a];var c=A.scope[a];c||(c=A.scope[a]=new ra);return h[a]=e(c)};return a}function K(a){var e=a["static"];a=a.dynamic;var c;if("profile"in e){var f=!!e.profile;c=g(function(a,e){return f});c.enable=f}else if("profile"in a){var b=a.profile;c=k(b,function(a,e){return a.invoke(e,b)})}return c}function za(e,c){var b=e["static"],p=e.dynamic;if("framebuffer"in b){var n=b.framebuffer;return n?(n=a.getFramebuffer(n),f.command(n,"invalid framebuffer object"),
g(function(a,e){var c=a.link(n),f=a.shared;e.set(f.framebuffer,".next",c);f=f.context;e.set(f,".framebufferWidth",c+".width");e.set(f,".framebufferHeight",c+".height");return c})):g(function(a,e){var c=a.shared;e.set(c.framebuffer,".next","null");c=c.context;e.set(c,".framebufferWidth",c+".drawingBufferWidth");e.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in p){var v=p.framebuffer;return k(v,function(a,e){var c=a.invoke(e,v),b=a.shared,p=b.framebuffer,n=e.def(p,
".getFramebuffer(",c,")");f.optional(function(){a.assert(e,"!"+c+"||"+n,"invalid framebuffer object")});e.set(p,".next",n);b=b.context;e.set(b,".framebufferWidth",n+"?"+n+".width:"+b+".drawingBufferWidth");e.set(b,".framebufferHeight",n+"?"+n+".height:"+b+".drawingBufferHeight");return n})}return null}function na(a,e,c){function b(a){if(a in p){var v=p[a];f.commandType(v,"object","invalid "+a,c.commandStr);var m=!0,h=v.x|0,I=v.y|0,q,r;"width"in v?(q=v.width|0,f.command(0<=q,"invalid "+a,c.commandStr)):
m=!1;"height"in v?(r=v.height|0,f.command(0<=r,"invalid "+a,c.commandStr)):m=!1;return new H(!m&&e&&e.thisDep,!m&&e&&e.contextDep,!m&&e&&e.propDep,function(a,e){var c=a.shared.context,f=q;"width"in v||(f=e.def(c,".","framebufferWidth","-",h));var b=r;"height"in v||(b=e.def(c,".","framebufferHeight","-",I));return[h,I,f,b]})}if(a in n){var w=n[a],m=k(w,function(e,c){var b=e.invoke(c,w);f.optional(function(){e.assert(c,b+"&&typeof "+b+'==="object"',"invalid "+a)});var p=e.shared.context,n=c.def(b,".x|0"),
v=c.def(b,".y|0"),m=c.def('"width" in ',b,"?",b,".width|0:","(",p,".","framebufferWidth","-",n,")"),h=c.def('"height" in ',b,"?",b,".height|0:","(",p,".","framebufferHeight","-",v,")");f.optional(function(){e.assert(c,m+">=0&&"+h+">=0","invalid "+a)});return[n,v,m,h]});e&&(m.thisDep=m.thisDep||e.thisDep,m.contextDep=m.contextDep||e.contextDep,m.propDep=m.propDep||e.propDep);return m}return e?new H(e.thisDep,e.contextDep,e.propDep,function(a,e){var c=a.shared.context;return[0,0,e.def(c,".","framebufferWidth"),
e.def(c,".","framebufferHeight")]}):null}var p=a["static"],n=a.dynamic;if(a=b("viewport")){var v=a;a=new H(a.thisDep,a.contextDep,a.propDep,function(a,e){var c=v.append(a,e),f=a.shared.context;e.set(f,".viewportWidth",c[2]);e.set(f,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:b("scissor.box")}}function n(a,e){var c=a["static"];if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<q(e.dynamic).length)return null;var c=e["static"],b=q(c);if(0<b.length&&"number"===typeof c[b[0]]){for(var p=
[],n=0;n<b.length;++n)f("number"===typeof c[b[n]],"must specify all vertex attribute locations when using vaos"),p.push([c[b[n]]|0,b[n]]);return p}}return null}function F(a,e,c){function b(a){if(a in n){var e=w.id(n[a]);f.optional(function(){ta.shader(S[a],e,f.guessCommand())});var c=g(function(){return e});c.id=e;return c}if(a in p){var v=p[a];return k(v,function(e,c){var b=e.invoke(c,v),n=c.def(e.shared.strings,".id(",b,")");f.optional(function(){c(e.shared.shader,".shader(",S[a],",",n,",",e.command,
");")});return n})}return null}var n=a["static"],p=a.dynamic,v=b("frag"),m=b("vert"),h=null;J(v)&&J(m)?(h=ta.program(m.id,v.id,null,c),a=g(function(a,e){return a.link(h)})):a=new H(v&&v.thisDep||m&&m.thisDep,v&&v.contextDep||m&&m.contextDep,v&&v.propDep||m&&m.propDep,function(a,e){var c=a.shared.shader,b;b=v?v.append(a,e):e.def(c,".","frag");var n;n=m?m.append(a,e):e.def(c,".","vert");var p=c+".program("+n+","+b;f.optional(function(){p+=","+a.command});return e.def(p+")")});return{frag:v,vert:m,progVar:a,
program:h}}function aa(a,c){function b(a,e){if(a in n){var r=n[a]|0;e?v.offset=r:v.instances=r;f.command(!e||0<=r,"invalid "+a,c.commandStr);return g(function(a,c){e&&(a.OFFSET=r);return r})}if(a in p){var w=p[a];return k(w,function(c,b){var n=c.invoke(b,w);e&&(c.OFFSET=n,f.optional(function(){c.assert(b,n+">=0","invalid "+a)}));return n})}if(e){if(I)return g(function(a,e){return a.OFFSET=0});if(m)return new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+
a.shared.vao+".currentVAO.offset:0")})}else if(m)return new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var n=a["static"],p=a.dynamic,v={},m=!1,h=function(){if("vao"in n){var a=n.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));m=!0;v.vao=a;return g(function(e){var c=A.getVAO(a);return c?e.link(c):"null"})}if("vao"in p){m=!0;var e=p.vao;return k(e,function(a,c){var b=a.invoke(c,e);return c.def(a.shared.vao+
".getVAO("+b+")")})}return null}(),I=!1,r=function(){if("elements"in n){var a=n.elements;v.elements=a;if(d(a)){var b=v.elements=e.create(a,!0),a=e.getElements(b);I=!0}else a&&(a=e.getElements(a),I=!0,f.command(a,"invalid elements",c.commandStr));b=g(function(e,c){if(a){var b=e.link(a);return e.ELEMENTS=b}return e.ELEMENTS=null});b.value=a;return b}if("elements"in p){I=!0;var r=p.elements;return k(r,function(a,e){var c=a.shared,b=c.isBufferArgs,c=c.elements,n=a.invoke(e,r),p=e.def("null"),b=e.def(b,
"(",n,")"),v=a.cond(b).then(p,"=",c,".createStream(",n,");")["else"](p,"=",c,".getElements(",n,");");f.optional(function(){a.assert(v["else"],"!"+n+"||"+p,"invalid elements")});e.entry(v);e.exit(a.cond(b).then(c,".destroyStream(",p,");"));return a.ELEMENTS=p})}return m?new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),w=b("offset",!0),U=function(){if("primitive"in n){var a=
n.primitive;v.primitive=a;f.commandParameter(a,ca,"invalid primitve",c.commandStr);return g(function(e,c){return ca[a]})}if("primitive"in p){var e=p.primitive;return k(e,function(a,c){var b=a.constants.primTypes,n=a.invoke(c,e);f.optional(function(){a.assert(c,n+" in "+b,"invalid primitive, must be one of "+q(ca))});return c.def(b,"[",n,"]")})}return I?J(r)?r.value?g(function(a,e){return e.def(a.ELEMENTS,".primType")}):g(function(){return 4}):new H(r.thisDep,r.contextDep,r.propDep,function(a,e){var c=
a.ELEMENTS;return e.def(c,"?",c,".primType:",4)}):m?new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),ja=function(){if("count"in n){var a=n.count|0;v.count=a;f.command("number"===typeof a&&0<=a,"invalid vertex count",c.commandStr);return g(function(){return a})}if("count"in p){var e=p.count;return k(e,function(a,c){var b=a.invoke(c,e);f.optional(function(){a.assert(c,"typeof "+b+'==="number"&&'+b+">=0&&"+
b+"===("+b+"|0)","invalid vertex count")});return b})}if(I){if(J(r)){if(r)return w?new H(w.thisDep,w.contextDep,w.propDep,function(a,e){var c=e.def(a.ELEMENTS,".vertCount-",a.OFFSET);f.optional(function(){a.assert(e,c+">=0","invalid vertex offset/element buffer too small")});return c}):g(function(a,e){return e.def(a.ELEMENTS,".vertCount")});var b=g(function(){return-1});f.optional(function(){b.MISSING=!0});return b}var q=new H(r.thisDep||w.thisDep,r.contextDep||w.contextDep,r.propDep||w.propDep,function(a,
e){var c=a.ELEMENTS;return a.OFFSET?e.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):e.def(c,"?",c,".vertCount:-1")});f.optional(function(){q.DYNAMIC=!0});return q}return m?new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),R=b("instances",!1);return{elements:r,primitive:U,count:ja,instances:R,offset:w,vao:h,vaoActive:m,elementsActive:I,"static":v}}function M(a,e){var n=a["static"],p=a.dynamic,v={};ua.forEach(function(a){function m(e,
c){if(a in n){var b=e(n[a]);v[h]=g(function(){return b})}else if(a in p){var f=p[a];v[h]=k(f,function(a,e){return c(a,e,a.invoke(e,f))})}}var h=O(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return m(function(c){f.commandType(c,"boolean",a,e.commandStr);return c},function(e,c,b){f.optional(function(){e.assert(c,"typeof "+b+'==="boolean"',
"invalid flag "+a,e.commandStr)});return b});case "depth.func":return m(function(b){f.commandParameter(b,c,"invalid "+a,e.commandStr);return c[b]},function(e,b,n){var p=e.constants.compareFuncs;f.optional(function(){e.assert(b,n+" in "+p,"invalid "+a+", must be one of "+q(c))});return b.def(p,"[",n,"]")});case "depth.range":return m(function(a){f.command(t(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",e.commandStr);return a},function(a,e,c){f.optional(function(){a.assert(e,
a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var b=e.def("+",c,"[0]"),n=e.def("+",c,"[1]");return[b,n]});case "blend.func":return m(function(a){f.commandType(a,"object","blend.func",e.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,b="srcAlpha"in a?a.srcAlpha:a.src,n="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;f.commandParameter(c,P,h+".srcRGB",e.commandStr);f.commandParameter(b,
P,h+".srcAlpha",e.commandStr);f.commandParameter(n,P,h+".dstRGB",e.commandStr);f.commandParameter(a,P,h+".dstAlpha",e.commandStr);f.command(-1===ga.indexOf(c+", "+n),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+n+")",e.commandStr);return[P[c],P[n],P[b],P[a]]},function(e,c,b){function n(v,m){var h=c.def('"',v,m,'" in ',b,"?",b,".",v,m,":",b,".",v);f.optional(function(){e.assert(c,h+" in "+p,"invalid "+a+"."+v+m+", must be one of "+q(P))});return h}var p=e.constants.blendFuncs;f.optional(function(){e.assert(c,
b+"&&typeof "+b+'==="object"',"invalid blend func, must be an object")});var v=n("src","RGB"),m=n("dst","RGB");f.optional(function(){e.assert(c,e.constants.invalidBlendCombinations+".indexOf("+v+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var h=c.def(p,"[",v,"]"),I=c.def(p,"[",n("src","Alpha"),"]"),r=c.def(p,"[",m,"]"),k=c.def(p,"[",n("dst","Alpha"),"]");return[h,r,I,k]});case "blend.equation":return m(function(c){if("string"===typeof c)return f.commandParameter(c,
Fa,"invalid "+a,e.commandStr),[Fa[c],Fa[c]];if("object"===typeof c)return f.commandParameter(c.rgb,Fa,a+".rgb",e.commandStr),f.commandParameter(c.alpha,Fa,a+".alpha",e.commandStr),[Fa[c.rgb],Fa[c.alpha]];f.commandRaise("invalid blend.equation",e.commandStr)},function(e,c,b){var n=e.constants.blendEquations,p=c.def(),v=c.def(),m=e.cond("typeof ",b,'==="string"');f.optional(function(){function c(a,b,f){e.assert(a,f+" in "+n,"invalid "+b+", must be one of "+q(Fa))}c(m.then,a,b);e.assert(m["else"],b+
"&&typeof "+b+'==="object"',"invalid "+a);c(m["else"],a+".rgb",b+".rgb");c(m["else"],a+".alpha",b+".alpha")});m.then(p,"=",v,"=",n,"[",b,"];");m["else"](p,"=",n,"[",b,".rgb];",v,"=",n,"[",b,".alpha];");c(m);return[p,v]});case "blend.color":return m(function(a){f.command(t(a)&&4===a.length,"blend.color must be a 4d array",e.commandStr);return G(4,function(e){return+a[e]})},function(a,e,c){f.optional(function(){a.assert(e,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});
return G(4,function(a){return e.def("+",c,"[",a,"]")})});case "stencil.mask":return m(function(a){f.commandType(a,"number",h,e.commandStr);return a|0},function(a,e,c){f.optional(function(){a.assert(e,"typeof "+c+'==="number"',"invalid stencil.mask")});return e.def(c,"|0")});case "stencil.func":return m(function(b){f.commandType(b,"object",h,e.commandStr);var n=b.cmp||"keep",p=b.ref||0;b="mask"in b?b.mask:-1;f.commandParameter(n,c,a+".cmp",e.commandStr);f.commandType(p,"number",a+".ref",e.commandStr);
f.commandType(b,"number",a+".mask",e.commandStr);return[c[n],p,b]},function(a,e,c){var b=a.constants.compareFuncs;f.optional(function(){function n(){a.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}n(c+"&&typeof ",c,'==="object"');n('!("cmp" in ',c,")||(",c,".cmp in ",b,")")});var n=e.def('"cmp" in ',c,"?",b,"[",c,".cmp]",":",7680),p=e.def(c,".ref|0"),m=e.def('"mask" in ',c,"?",c,".mask|0:-1");return[n,p,m]});case "stencil.opFront":case "stencil.opBack":return m(function(c){f.commandType(c,
"object",h,e.commandStr);var n=c.fail||"keep",p=c.zfail||"keep";c=c.zpass||"keep";f.commandParameter(n,b,a+".fail",e.commandStr);f.commandParameter(p,b,a+".zfail",e.commandStr);f.commandParameter(c,b,a+".zpass",e.commandStr);return["stencil.opBack"===a?1029:1028,b[n],b[p],b[c]]},function(e,c,n){function p(v){f.optional(function(){e.assert(c,'!("'+v+'" in '+n+")||("+n+"."+v+" in "+m+")","invalid "+a+"."+v+", must be one of "+q(b))});return c.def('"',v,'" in ',n,"?",m,"[",n,".",v,"]:",7680)}var m=e.constants.stencilOps;
f.optional(function(){e.assert(c,n+"&&typeof "+n+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,p("fail"),p("zfail"),p("zpass")]});case "polygonOffset.offset":return m(function(a){f.commandType(a,"object",h,e.commandStr);var c=a.factor|0;a=a.units|0;f.commandType(c,"number",h+".factor",e.commandStr);f.commandType(a,"number",h+".units",e.commandStr);return[c,a]},function(e,c,b){f.optional(function(){e.assert(c,b+"&&typeof "+b+'==="object"',"invalid "+a)});var n=c.def(b,".factor|0"),
p=c.def(b,".units|0");return[n,p]});case "cull.face":return m(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);f.command(!!c,h,e.commandStr);return c},function(a,e,c){f.optional(function(){a.assert(e,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return e.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return m(function(a){f.command("number"===typeof a&&a>=E.lineWidthDims[0]&&a<=E.lineWidthDims[1],"invalid line width, must be a positive number between "+E.lineWidthDims[0]+
" and "+E.lineWidthDims[1],e.commandStr);return a},function(a,e,c){f.optional(function(){a.assert(e,"typeof "+c+'==="number"&&'+c+">="+E.lineWidthDims[0]+"&&"+c+"<="+E.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return m(function(a){f.commandParameter(a,r,h,e.commandStr);return r[a]},function(a,e,c){f.optional(function(){a.assert(e,c+'==="cw"||'+c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(c+'==="cw"?2304:2305')});case "colorMask":return m(function(a){f.command(t(a)&&
4===a.length,"color.mask must be length 4 array",e.commandStr);return a.map(function(a){return!!a})},function(a,e,c){f.optional(function(){a.assert(e,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return G(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return m(function(a){f.command("object"===typeof a&&a,h,e.commandStr);var c="value"in a?a.value:1;a=!!a.invert;f.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",
e.commandStr);return[c,a]},function(a,e,c){f.optional(function(){a.assert(e,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var b=e.def('"value" in ',c,"?+",c,".value:1"),n=e.def("!!",c,".invert");return[b,n]})}});return v}function ma(a,e){var c=a["static"],b=a.dynamic,n={};q(c).forEach(function(a){var b=c[a],p;if("number"===typeof b||"boolean"===typeof b)p=g(function(){return b});else if("function"===typeof b){var m=b._reglType;"texture2d"===m||"textureCube"===m?p=g(function(a){return a.link(b)}):
"framebuffer"===m||"framebufferCube"===m?(f.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',e.commandStr),p=g(function(a){return a.link(b.color[0])})):f.commandRaise('invalid data for uniform "'+a+'"',e.commandStr)}else t(b)?p=g(function(e){return e.global.def("[",G(b.length,function(c){f.command("number"===typeof b[c]||"boolean"===typeof b[c],"invalid uniform "+a,e.commandStr);return b[c]}),"]")}):f.commandRaise('invalid or missing data for uniform "'+
a+'"',e.commandStr);p.value=b;n[a]=p});q(b).forEach(function(a){var e=b[a];n[a]=k(e,function(a,c){return a.invoke(c,e)})});return n}function oa(a,e){var c=a["static"],b=a.dynamic,n={};q(c).forEach(function(a){var b=c[a],p=w.id(a),m=new ra;if(d(b))m.state=1,m.buffer=C.getBuffer(C.create(b,34962,!1,!0)),m.type=0;else{var v=C.getBuffer(b);if(v)m.state=1,m.buffer=v,m.type=0;else if(f.command("object"===typeof b&&b,"invalid data for attribute "+a,e.commandStr),"constant"in b){var h=b.constant;m.buffer=
"null";m.state=2;"number"===typeof h?m.x=h:(f.command(t(h)&&0<h.length&&4>=h.length,"invalid constant for attribute "+a,e.commandStr),N.forEach(function(a,e){e<h.length&&(m[a]=h[e])}))}else{v=d(b.buffer)?C.getBuffer(C.create(b.buffer,34962,!1,!0)):C.getBuffer(b.buffer);f.command(!!v,'missing buffer for attribute "'+a+'"',e.commandStr);var I=b.offset|0;f.command(0<=I,'invalid offset for attribute "'+a+'"',e.commandStr);var r=b.stride|0;f.command(0<=r&&256>r,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',
e.commandStr);var k=b.size|0;f.command(!("size"in b)||0<k&&4>=k,'invalid size for attribute "'+a+'", must be 1,2,3,4',e.commandStr);var U=!!b.normalized,ja=0;"type"in b&&(f.commandParameter(b.type,u,"invalid type for attribute "+a,e.commandStr),ja=u[b.type]);var R=b.divisor|0;f.optional(function(){"divisor"in b&&(f.command(0===R||qa,'cannot specify divisor for attribute "'+a+'", instancing not supported',e.commandStr),f.command(0<=R,'invalid divisor for attribute "'+a+'"',e.commandStr));var c=e.commandStr,
n="buffer offset divisor normalized type size stride".split(" ");q(b).forEach(function(e){f.command(0<=n.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+a+'" (valid parameters are '+n+")",c)})});m.buffer=v;m.state=1;m.size=k;m.normalized=U;m.type=ja||v.dtype;m.offset=I;m.stride=r;m.divisor=R}}n[a]=g(function(a,e){var c=a.attribCache;if(p in c)return c[p];var b={isStream:!1};q(m).forEach(function(a){b[a]=m[a]});m.buffer&&(b.buffer=a.link(m.buffer),b.type=b.type||b.buffer+".dtype");return c[p]=
b})});q(b).forEach(function(a){var e=b[a];n[a]=k(e,function(c,b){function n(a){b(r[a],"=",m,".",a,"|0;")}var m=c.invoke(b,e),p=c.shared,v=c.constants,h=p.isBufferArgs,I=p.buffer;f.optional(function(){c.assert(b,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+h+"("+m+")||"+I+".getBuffer("+m+")||"+I+".getBuffer("+m+".buffer)||"+h+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+p.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+a+'"')});var r=
{isStream:b.def(!1)},k=new ra;k.state=1;q(k).forEach(function(a){r[a]=b.def(""+k[a])});var w=r.buffer,U=r.type;b("if(",h,"(",m,")){",r.isStream,"=true;",w,"=",I,".createStream(",34962,",",m,");",U,"=",w,".dtype;","}else{",w,"=",I,".getBuffer(",m,");","if(",w,"){",U,"=",w,".dtype;",'}else if("constant" in ',m,"){",r.state,"=",2,";","if(typeof "+m+'.constant === "number"){',r[N[0]],"=",m,".constant;",N.slice(1).map(function(a){return r[a]}).join("="),"=0;","}else{",N.map(function(a,e){return r[a]+"="+
m+".constant.length>"+e+"?"+m+".constant["+e+"]:0;"}).join(""),"}}else{","if(",h,"(",m,".buffer)){",w,"=",I,".createStream(",34962,",",m,".buffer);","}else{",w,"=",I,".getBuffer(",m,".buffer);","}",U,'="type" in ',m,"?",v.glTypes,"[",m,".type]:",w,".dtype;",r.normalized,"=!!",m,".normalized;");n("size");n("offset");n("stride");n("divisor");b("}}");b.exit("if(",r.isStream,"){",I,".destroyStream(",w,");","}");return r})});return n}function Ca(a){var e=a["static"],c=a.dynamic,b={};q(e).forEach(function(a){var c=
e[a];b[a]=g(function(a,e){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});q(c).forEach(function(a){var e=c[a];b[a]=k(e,function(a,c){return a.invoke(c,e)})});return b}function xa(a,e,c,b,m){function p(a){var e=k[a];e&&(U[a]=e)}var v=a["static"],h=a.dynamic;f.optional(function(){function a(c){q(c).forEach(function(a){f.command(0<=e.indexOf(a),'unknown parameter "'+a+'"',m.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);
a(v);a(h)});var r=n(a,e),I=za(a,m),k=na(a,I,m),w=aa(a,m),U=M(a,m),ja=F(a,m,r);p("viewport");p(O("scissor.box"));var R=0<q(U).length,I={framebuffer:I,draw:w,shader:ja,state:U,dirty:R,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};I.profile=K(a,m);I.uniforms=ma(c,m);I.drawVAO=I.scopeVAO=w.vao;if(!I.drawVAO&&ja.program&&!r&&x.angle_instanced_arrays&&w["static"].elements){var ra=!0;a=ja.program.attributes.map(function(a){a=e["static"][a];ra=ra&&!!a;return a});if(ra&&0<a.length){var Ba=A.getVAO(A.createVAO({attributes:a,
elements:w["static"].elements}));I.drawVAO=new H(null,null,null,function(a,e){return a.link(Ba)});I.useVAO=!0}}r?I.useVAO=!0:I.attributes=oa(e,m);I.context=Ca(b,m);return I}function fa(a,e,c){var b=a.shared.context,m=a.scope();q(c).forEach(function(n){e.save(b,"."+n);var p=c[n].append(a,e);Array.isArray(p)?m(b,".",n,"=[",p.join(),"];"):m(b,".",n,"=",p,";")});e(m)}function Ea(a,e,c,b){var m=a.shared,n=m.gl,p=m.framebuffer,v;ya&&(v=e.def(m.extensions,".webgl_draw_buffers"));var f=a.constants,m=f.drawBuffer,
f=f.backBuffer;a=c?c.append(a,e):e.def(p,".next");b||e("if(",a,"!==",p,".cur){");e("if(",a,"){",n,".bindFramebuffer(",36160,",",a,".framebuffer);");ya&&e(v,".drawBuffersWEBGL(",m,"[",a,".colorAttachments.length]);");e("}else{",n,".bindFramebuffer(",36160,",null);");ya&&e(v,".drawBuffersWEBGL(",f,");");e("}",p,".cur=",a,";");b||e("}")}function ka(a,e,c){var b=a.shared,m=b.gl,n=a.current,p=a.next,v=b.current,f=b.next,h=a.cond(v,".dirty");ua.forEach(function(e){e=O(e);if(!(e in c.state)){var b,I;if(e in
p){b=p[e];I=n[e];var r=G(la[e].length,function(a){return h.def(b,"[",a,"]")});h(a.cond(r.map(function(a,e){return a+"!=="+I+"["+e+"]"}).join("||")).then(m,".",Da[e],"(",r,");",r.map(function(a,e){return I+"["+e+"]="+a}).join(";"),";"))}else b=h.def(f,".",e),r=a.cond(b,"!==",v,".",e),h(r),e in Ja?r(a.cond(b).then(m,".enable(",Ja[e],");")["else"](m,".disable(",Ja[e],");"),v,".",e,"=",b,";"):r(m,".",Da[e],"(",b,");",v,".",e,"=",b,";")}});0===q(c.state).length&&h(v,".dirty=false;");e(h)}function pa(a,
e,c,b){var m=a.shared,n=a.current,p=m.current,v=m.gl;ba(q(c)).forEach(function(m){var f=c[m];if(!b||b(f)){var h=f.append(a,e);if(Ja[m]){var I=Ja[m];J(f)?h?e(v,".enable(",I,");"):e(v,".disable(",I,");"):e(a.cond(h).then(v,".enable(",I,");")["else"](v,".disable(",I,");"));e(p,".",m,"=",h,";")}else if(t(h)){var r=n[m];e(v,".",Da[m],"(",h,");",h.map(function(a,e){return r+"["+e+"]="+a}).join(";"),";")}else e(v,".",Da[m],"(",h,");",p,".",m,"=",h,";")}})}function Aa(a,e){qa&&(a.instancing=e.def(a.shared.extensions,
".angle_instanced_arrays"))}function Ba(a,e,c,b,m){function n(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function p(a){w=e.def();a(w,"=",n(),";");"string"===typeof m?a(I,".count+=",m,";"):a(I,".count++;");ea&&(b?(q=e.def(),a(q,"=",k,".getNumPendingQueries();")):a(k,".beginQuery(",I,");"))}function v(a){a(I,".cpuTime+=",n(),"-",w,";");ea&&(b?a(k,".pushScopeStats(",q,",",k,".getNumPendingQueries(),",I,");"):a(k,".endQuery();"))}function f(a){var c=e.def(r,".profile");
e(r,".profile=",a,";");e.exit(r,".profile=",c,";")}var h=a.shared,I=a.stats,r=h.current,k=h.timer;c=c.profile;var w,q;if(c){if(J(c)){c.enable?(p(e),v(e.exit),f("true")):f("false");return}c=c.append(a,e);f(c)}else c=e.def(r,".profile");h=a.block();p(h);e("if(",c,"){",h,"}");a=a.block();v(a);e.exit("if(",c,"){",a,"}")}function ja(a,e,c,b,m){function n(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function p(c,b,m){function n(){e("if(!",r,".buffer){",h,".enableVertexAttribArray(",I,");}");var c=m.type,p;p=m.size?e.def(m.size,"||",b):b;e("if(",r,".type!==",c,"||",r,".size!==",p,"||",q.map(function(a){return r+"."+a+"!=="+m[a]}).join("||"),"){",h,".bindBuffer(",34962,",",k,".buffer);",h,".vertexAttribPointer(",[I,p,c,m.normalized,m.stride,m.offset],");",r,".type=",c,";",r,".size=",p,";",q.map(function(a){return r+"."+a+"="+m[a]+";"}).join(""),"}");qa&&(c=m.divisor,e("if(",r,".divisor!==",c,"){",
a.instancing,".vertexAttribDivisorANGLE(",[I,c],");",r,".divisor=",c,";}"))}function f(){e("if(",r,".buffer){",h,".disableVertexAttribArray(",I,");",r,".buffer=null;","}if(",N.map(function(a,e){return r+"."+a+"!=="+w[e]}).join("||"),"){",h,".vertexAttrib4f(",I,",",w,");",N.map(function(a,e){return r+"."+a+"="+w[e]+";"}).join(""),"}")}var h=v.gl,I=e.def(c,".location"),r=e.def(v.attributes,"[",I,"]");c=m.state;var k=m.buffer,w=[m.x,m.y,m.z,m.w],q=["buffer","normalized","offset","stride"];1===c?n():
2===c?f():(e("if(",c,"===",1,"){"),n(),e("}else{"),f(),e("}"))}var v=a.shared;b.forEach(function(b){var v=b.name,h=c.attributes[v],I;if(h){if(!m(h))return;I=h.append(a,e)}else{if(!m(Z))return;var r=a.scopeAttrib(v);f.optional(function(){a.assert(e,r+".state","missing attribute "+v)});I={};q(new ra).forEach(function(a){I[a]=e.def(r,".",a)})}p(a.link(b),n(b.info.type),I)})}function Yb(a,e,c,b,m,n){for(var p=a.shared,v=p.gl,h,I=0;I<b.length;++I){var r=b[I],k=r.name,q=r.info.type,U=c.uniforms[k],r=a.link(r)+
".location",ja;if(U){if(!m(U))continue;if(J(U)){var R=U.value;f.command(null!==R&&"undefined"!==typeof R,'missing uniform "'+k+'"',a.commandStr);if(35678===q||35680===q)f.command("function"===typeof R&&(35678===q&&("texture2d"===R._reglType||"framebuffer"===R._reglType)||35680===q&&("textureCube"===R._reglType||"framebufferCube"===R._reglType)),"invalid texture for uniform "+k,a.commandStr),U=a.link(R._texture||R.color[0]._texture),e(v,".uniform1i(",r,",",U+".bind());"),e.exit(U,".unbind();");else if(35674===
q||35675===q||35676===q){f.optional(function(){f.command(t(R),"invalid matrix for uniform "+k,a.commandStr);f.command(35674===q&&4===R.length||35675===q&&9===R.length||35676===q&&16===R.length,"invalid length for matrix uniform "+k,a.commandStr)});var U=a.global.def("new Float32Array(["+Array.prototype.slice.call(R)+"])"),O=2;35675===q?O=3:35676===q&&(O=4);e(v,".uniformMatrix",O,"fv(",r,",false,",U,");")}else{switch(q){case 5126:f.commandType(R,"number","uniform "+k,a.commandStr);h="1f";break;case 35664:f.command(t(R)&&
2===R.length,"uniform "+k,a.commandStr);h="2f";break;case 35665:f.command(t(R)&&3===R.length,"uniform "+k,a.commandStr);h="3f";break;case 35666:f.command(t(R)&&4===R.length,"uniform "+k,a.commandStr);h="4f";break;case 35670:f.commandType(R,"boolean","uniform "+k,a.commandStr);h="1i";break;case 5124:f.commandType(R,"number","uniform "+k,a.commandStr);h="1i";break;case 35671:f.command(t(R)&&2===R.length,"uniform "+k,a.commandStr);h="2i";break;case 35667:f.command(t(R)&&2===R.length,"uniform "+k,a.commandStr);
h="2i";break;case 35672:f.command(t(R)&&3===R.length,"uniform "+k,a.commandStr);h="3i";break;case 35668:f.command(t(R)&&3===R.length,"uniform "+k,a.commandStr);h="3i";break;case 35673:f.command(t(R)&&4===R.length,"uniform "+k,a.commandStr);h="4i";break;case 35669:f.command(t(R)&&4===R.length,"uniform "+k,a.commandStr),h="4i"}e(v,".uniform",h,"(",r,",",t(R)?Array.prototype.slice.call(R):R,");")}continue}else ja=U.append(a,e)}else{if(!m(Z))continue;ja=e.def(p.uniforms,"[",w.id(k),"]")}35678===q?(f(!Array.isArray(ja),
"must specify a scalar prop for textures"),e("if(",ja,"&&",ja,'._reglType==="framebuffer"){',ja,"=",ja,".color[0];","}")):35680===q&&(f(!Array.isArray(ja),"must specify a scalar prop for cube maps"),e("if(",ja,"&&",ja,'._reglType==="framebufferCube"){',ja,"=",ja,".color[0];","}"));f.optional(function(){function c(b,m){a.assert(e,b,'bad data or missing for uniform "'+k+'".  '+m)}function b(a){f(!Array.isArray(ja),"must not specify an array type for uniform");c("typeof "+ja+'==="'+a+'"',"invalid type, expected "+
a)}function m(e,b){Array.isArray(ja)?f(ja.length===e,"must have length "+e):c(p.isArrayLike+"("+ja+")&&"+ja+".length==="+e,"invalid vector, should have length "+e,a.commandStr)}function n(e){f(!Array.isArray(ja),"must not specify a value type");c("typeof "+ja+'==="function"&&'+ja+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(q){case 5124:b("number");break;case 35667:m(2,"number");break;case 35668:m(3,"number");break;case 35669:m(4,"number");break;case 5126:b("number");
break;case 35664:m(2,"number");break;case 35665:m(3,"number");break;case 35666:m(4,"number");break;case 35670:b("boolean");break;case 35671:m(2,"boolean");break;case 35672:m(3,"boolean");break;case 35673:m(4,"boolean");break;case 35674:m(4,"number");break;case 35675:m(9,"number");break;case 35676:m(16,"number");break;case 35678:n(3553);break;case 35680:n(34067)}});U=1;switch(q){case 35678:case 35680:U=e.def(ja,"._texture");e(v,".uniform1i(",r,",",U,".bind());");e.exit(U,".unbind();");continue;case 5124:case 35670:h=
"1i";break;case 35667:case 35671:h="2i";U=2;break;case 35668:case 35672:h="3i";U=3;break;case 35669:case 35673:h="4i";U=4;break;case 5126:h="1f";break;case 35664:h="2f";U=2;break;case 35665:h="3f";U=3;break;case 35666:h="4f";U=4;break;case 35674:h="Matrix2fv";break;case 35675:h="Matrix3fv";break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){e(v,".uniform",h,"(",r,",");var r=Math.pow(q-35674+2,2),ra=a.global.def("new Float32Array(",r,")");Array.isArray(ja)?e("false,(",G(r,function(a){return ra+"["+
a+"]="+ja[a]}),",",ra,")"):e("false,(Array.isArray(",ja,")||",ja," instanceof Float32Array)?",ja,":(",G(r,function(a){return ra+"["+a+"]="+ja+"["+a+"]"}),",",ra,")");e(");")}else{if(1<U){for(var O=[],Ba=[],Fa=0;Fa<U;++Fa)Array.isArray(ja)?Ba.push(ja[Fa]):Ba.push(e.def(ja+"["+Fa+"]")),n&&O.push(e.def());n&&e("if(!",a.batchId,"||",O.map(function(a,e){return a+"!=="+Ba[e]}).join("||"),"){",O.map(function(a,e){return a+"="+Ba[e]+";"}).join(""));e(v,".uniform",h,"(",r,",",Ba.join(","),");")}else f(!Array.isArray(ja),
"uniform value must not be an array"),n&&(U=e.def(),e("if(!",a.batchId,"||",U,"!==",ja,"){",U,"=",ja,";")),e(v,".uniform",h,"(",r,",",ja,");");n&&e("}")}}}function Ta(a,e,c,b){function m(n){var p=I[n];return p?p.contextDep&&b.contextDynamic||p.propDep?p.append(a,c):p.append(a,e):e.def(r,".",n)}function n(){function a(){c(R,".drawElementsInstancedANGLE(",[q,ja,O,w+"<<(("+O+"-5121)>>1)",U],");")}function e(){c(R,".drawArraysInstancedANGLE(",[q,w,ja,U],");")}k&&"null"!==k?ra?a():(c("if(",k,"){"),a(),
c("}else{"),e(),c("}")):e()}function p(){function a(){c(v+".drawElements("+[q,ja,O,w+"<<(("+O+"-5121)>>1)"]+");")}function e(){c(v+".drawArrays("+[q,w,ja]+");")}k&&"null"!==k?ra?a():(c("if(",k,"){"),a(),c("}else{"),e(),c("}")):e()}var h=a.shared,v=h.gl,r=h.draw,I=b.draw,k=function(){var m=I.elements,n=e;if(m){if(m.contextDep&&b.contextDynamic||m.propDep)n=c;m=m.append(a,n);I.elementsActive&&n("if("+m+")"+v+".bindBuffer(34963,"+m+".buffer.buffer);")}else m=n.def(),n(m,"=",r,".","elements",";","if(",
m,"){",v,".bindBuffer(",34963,",",m,".buffer.buffer);}","else if(",h.vao,".currentVAO){",m,"=",a.shared.elements+".getElements("+h.vao,".currentVAO.elements);",Ga?"":"if("+m+")"+v+".bindBuffer(34963,"+m+".buffer.buffer);","}");return m}(),q=m("primitive"),w=m("offset"),ja=function(){var m=I.count,n,p=e;if(m){if(m.contextDep&&b.contextDynamic||m.propDep)p=c;n=m.append(a,p);f.optional(function(){m.MISSING&&a.assert(e,"false","missing vertex count");m.DYNAMIC&&a.assert(p,n+">=0","missing vertex count")})}else n=
p.def(r,".","count"),f.optional(function(){a.assert(p,n+">=0","missing vertex count")});return n}();if("number"===typeof ja){if(0===ja)return}else c("if(",ja,"){"),c.exit("}");var U,R;qa&&(U=m("instances"),R=a.instancing);var O=k+".type",ra=I.elements&&J(I.elements)&&!I.vaoActive;qa&&("number"!==typeof U||0<=U)?"string"===typeof U?(c("if(",U,">0){"),n(),c("}else if(",U,"<0){"),p(),c("}")):n():p()}function v(a,e,c,b,m){var n=L();m=n.proc("body",m);f.optional(function(){n.commandStr=e.commandStr;n.command=
n.link(e.commandStr)});qa&&(n.instancing=m.def(n.shared.extensions,".angle_instanced_arrays"));a(n,m,c,b);return n.compile().body}function m(a,e,c,b){Aa(a,e);c.useVAO?c.drawVAO?e(a.shared.vao,".setVAO(",c.drawVAO.append(a,e),");"):e(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(e(a.shared.vao,".setVAO(null);"),ja(a,e,c,b.attributes,function(){return!0}));Yb(a,e,c,b.uniforms,function(){return!0},!1);Ta(a,e,e,c)}function U(a,e){var c=a.proc("draw",1);Aa(a,c);fa(a,c,e.context);Ea(a,c,e.framebuffer);
ka(a,c,e);pa(a,c,e.state);Ba(a,c,e,!1,!0);var b=e.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",b,".program);");if(e.shader.program)m(a,c,e,e.shader.program);else{c(a.shared.vao,".setVAO(null);");var n=a.global.def("{}"),p=c.def(b,".id"),h=c.def(n,"[",p,"]");c(a.cond(h).then(h,".call(this,a0);")["else"](h,"=",n,"[",p,"]=",a.link(function(c){return v(m,a,e,c,1)}),"(",b,");",h,".call(this,a0);"))}0<q(e.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}
function va(a,e,c,b){function m(){return!0}a.batchId="a1";Aa(a,e);ja(a,e,c,b.attributes,m);Yb(a,e,c,b.uniforms,m,!1);Ta(a,e,e,c)}function wa(a,e,c,b){function m(a){return a.contextDep&&p||a.propDep}function n(a){return!m(a)}Aa(a,e);var p=c.contextDep,h=e.def(),f=e.def();a.shared.props=f;a.batchId=h;var r=a.scope(),I=a.scope();e(r.entry,"for(",h,"=0;",h,"<","a1",";++",h,"){",f,"=","a0","[",h,"];",I,"}",r.exit);c.needsContext&&fa(a,I,c.context);c.needsFramebuffer&&Ea(a,I,c.framebuffer);pa(a,I,c.state,
m);c.profile&&m(c.profile)&&Ba(a,I,c,!1,!0);b?(c.useVAO?c.drawVAO?m(c.drawVAO)?I(a.shared.vao,".setVAO(",c.drawVAO.append(a,I),");"):r(a.shared.vao,".setVAO(",c.drawVAO.append(a,r),");"):r(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(r(a.shared.vao,".setVAO(null);"),ja(a,r,c,b.attributes,n),ja(a,I,c,b.attributes,m)),Yb(a,r,c,b.uniforms,n,!1),Yb(a,I,c,b.uniforms,m,!0),Ta(a,r,I,c)):(e=a.global.def("{}"),b=c.shader.progVar.append(a,I),f=I.def(b,".id"),r=I.def(e,"[",f,"]"),I(a.shared.gl,".useProgram(",
b,".program);","if(!",r,"){",r,"=",e,"[",f,"]=",a.link(function(e){return v(va,a,c,e,2)}),"(",b,");}",r,".call(this,a0[",h,"],",h,");"))}function Bd(a,e){function c(a){return a.contextDep&&m||a.propDep}var b=a.proc("batch",2);a.batchId="0";Aa(a,b);var m=!1,n=!0;q(e.context).forEach(function(a){m=m||e.context[a].propDep});m||(fa(a,b,e.context),n=!1);var p=e.framebuffer,h=!1;p?(p.propDep?m=h=!0:p.contextDep&&m&&(h=!0),h||Ea(a,b,p)):Ea(a,b,null);e.state.viewport&&e.state.viewport.propDep&&(m=!0);ka(a,
b,e);pa(a,b,e.state,function(a){return!c(a)});e.profile&&c(e.profile)||Ba(a,b,e,!1,"a1");e.contextDep=m;e.needsContext=n;e.needsFramebuffer=h;n=e.shader.progVar;if(n.contextDep&&m||n.propDep)wa(a,b,e,null);else if(n=n.append(a,b),b(a.shared.gl,".useProgram(",n,".program);"),e.shader.program)wa(a,b,e,e.shader.program);else{b(a.shared.vao,".setVAO(null);");var p=a.global.def("{}"),h=b.def(n,".id"),f=b.def(p,"[",h,"]");b(a.cond(f).then(f,".call(this,a0,a1);")["else"](f,"=",p,"[",h,"]=",a.link(function(c){return v(wa,
a,e,c,2)}),"(",n,");",f,".call(this,a0,a1);"))}0<q(e.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function Hb(a,e){function c(n){var p=e.shader[n];p&&b.set(m.shader,"."+n,p.append(a,b))}var b=a.proc("scope",3);a.batchId="a2";var m=a.shared,n=m.current;fa(a,b,e.context);e.framebuffer&&e.framebuffer.append(a,b);ba(q(e.state)).forEach(function(c){var n=e.state[c].append(a,b);t(n)?n.forEach(function(e,m){b.set(a.next[c],"["+m+"]",e)}):b.set(m.next,"."+
c,n)});Ba(a,b,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var n=e.draw[c];n&&b.set(m.draw,"."+c,""+n.append(a,b))});q(e.uniforms).forEach(function(c){var n=e.uniforms[c].append(a,b);Array.isArray(n)&&(n="["+n.join()+"]");b.set(m.uniforms,"["+w.id(c)+"]",n)});q(e.attributes).forEach(function(c){var m=e.attributes[c].append(a,b),n=a.scopeAttrib(c);q(new ra).forEach(function(a){b.set(n,"."+a,m[a])})});e.scopeVAO&&b.set(m.vao,".targetVAO",e.scopeVAO.append(a,b));
c("vert");c("frag");0<q(e.state).length&&(b(n,".dirty=true;"),b.exit(n,".dirty=true;"));b("a1(",a.shared.context,",a0,",a.batchId,");")}function ha(a){if("object"===typeof a&&!t(a)){for(var e=q(a),c=0;c<e.length;++c)if(l.isDynamic(a[e[c]]))return!0;return!1}}function I(a,e,c){function b(a,e){p.forEach(function(c){var b=m[c];l.isDynamic(b)&&(b=a.invoke(e,b),e(r,".",c,"=",b,";"))})}var m=e["static"][c];if(m&&ha(m)){var n=a.global,p=q(m),h=!1,v=!1,f=!1,r=a.global.def("{}");p.forEach(function(e){var c=
m[e];if(l.isDynamic(c))"function"===typeof c&&(c=m[e]=l.unbox(c)),e=k(c,null),h=h||e.thisDep,f=f||e.propDep,v=v||e.contextDep;else{n(r,".",e,"=");switch(typeof c){case "number":n(c);break;case "string":n('"',c,'"');break;case "object":Array.isArray(c)&&n("[",c.join(),"]");break;default:n(a.link(c))}n(";")}});e.dynamic[c]=new l.DynamicVariable(4,{thisDep:h,contextDep:v,propDep:f,ref:r,append:b});delete e["static"][c]}}var ra=A.Record,Fa={add:32774,subtract:32778,"reverse subtract":32779};x.ext_blend_minmax&&
(Fa.min=32775,Fa.max=32776);var qa=x.angle_instanced_arrays,ya=x.webgl_draw_buffers,Ga=x.oes_vertex_array_object,la={dirty:!0,profile:Q.profile},Y={},ua=[],Ja={},Da={};z("dither",3024);z("blend.enable",3042);p("blend.color","blendColor",[0,0,0,0]);p("blend.equation","blendEquationSeparate",[32774,32774]);p("blend.func","blendFuncSeparate",[1,0,1,0]);z("depth.enable",2929,!0);p("depth.func","depthFunc",513);p("depth.range","depthRange",[0,1]);p("depth.mask","depthMask",!0);p("colorMask","colorMask",
[!0,!0,!0,!0]);z("cull.enable",2884);p("cull.face","cullFace",1029);p("frontFace","frontFace",2305);p("lineWidth","lineWidth",1);z("polygonOffset.enable",32823);p("polygonOffset.offset","polygonOffset",[0,0]);z("sample.alpha",32926);z("sample.enable",32928);p("sample.coverage","sampleCoverage",[1,!1]);z("stencil.enable",2960);p("stencil.mask","stencilMask",-1);p("stencil.func","stencilFunc",[519,0,-1]);p("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);p("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);z("scissor.enable",3089);p("scissor.box","scissor",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);p("viewport","viewport",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);var mb={gl:h,context:X,strings:w,next:Y,current:la,draw:db,elements:e,buffer:C,shader:ta,attributes:A.state,vao:A,uniforms:T,framebuffer:a,extensions:x,timer:ea,isBufferArgs:d},da={primTypes:ca,compareFuncs:c,blendFuncs:P,blendEquations:Fa,stencilOps:b,glTypes:u,orientationType:r};f.optional(function(){mb.isArrayLike=
t});ya&&(da.backBuffer=[1029],da.drawBuffer=G(E.maxDrawbuffers,function(a){return 0===a?[0]:G(a,function(a){return 36064+a})}));var xd=0;return{next:Y,current:la,procs:function(){var a=L(),e=a.proc("poll"),c=a.proc("refresh"),b=a.block();e(b);c(b);var m=a.shared,n=m.gl,p=m.next,h=m.current;b(h,".dirty=false;");Ea(a,e);Ea(a,c,null,!0);var v;qa&&(v=a.link(qa));x.oes_vertex_array_object&&c(a.link(x.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<E.maxAttributes;++f){var r=c.def(m.attributes,
"[",f,"]"),I=a.cond(r,".buffer");I.then(n,".enableVertexAttribArray(",f,");",n,".bindBuffer(",34962,",",r,".buffer.buffer);",n,".vertexAttribPointer(",f,",",r,".size,",r,".type,",r,".normalized,",r,".stride,",r,".offset);")["else"](n,".disableVertexAttribArray(",f,");",n,".vertexAttrib4f(",f,",",r,".x,",r,".y,",r,".z,",r,".w);",r,".buffer=null;");c(I);qa&&c(v,".vertexAttribDivisorANGLE(",f,",",r,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");
q(Ja).forEach(function(m){var v=Ja[m],f=b.def(p,".",m),r=a.block();r("if(",f,"){",n,".enable(",v,")}else{",n,".disable(",v,")}",h,".",m,"=",f,";");c(r);e("if(",f,"!==",h,".",m,"){",r,"}")});q(Da).forEach(function(m){var v=Da[m],f=la[m],r,I,k=a.block();k(n,".",v,"(");t(f)?(v=f.length,r=a.global.def(p,".",m),I=a.global.def(h,".",m),k(G(v,function(a){return r+"["+a+"]"}),");",G(v,function(a){return I+"["+a+"]="+r+"["+a+"];"}).join("")),e("if(",G(v,function(a){return r+"["+a+"]!=="+I+"["+a+"]"}).join("||"),
"){",k,"}")):(r=b.def(p,".",m),I=b.def(h,".",m),k(r,");",h,".",m,"=",r,";"),e("if(",r,"!==",I,"){",k,"}"));c(k)});return a.compile()}(),compile:function(a,e,c,b,m){var n=L();n.stats=n.link(m);q(e["static"]).forEach(function(a){I(n,e,a)});y.forEach(function(e){I(n,a,e)});var p=xa(a,e,c,b,n);U(n,p);Hb(n,p);Bd(n,p);return B(n.compile(),{destroy:function(){p.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,
"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(W,ia,fb){function d(q,f){this.id=k++;this.type=q;this.data=f}function ba(k){if(0===k.length)return[];var f=k.charAt(0),g=k.charAt(k.length-1);if(1<k.length&&f===g&&('"'===f||"'"===f))return['"'+k.substr(1,k.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(k))return ba(k.substr(0,f.index)).concat(ba(f[1])).concat(ba(k.substr(f.index+
f[0].length)));f=k.split(".");if(1===f.length)return['"'+k.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];k=[];for(g=0;g<f.length;++g)k=k.concat(ba(f[g]));return k}function H(k){return"["+ba(k).join("][")+"]"}function J(k,f){if("function"===typeof k)return new d(0,k);if("number"===typeof k||"boolean"===typeof k)return new d(5,k);if(Array.isArray(k))return new d(6,k.map(function(k,q){return J(k,f+"["+q+"]")}));if(k instanceof d)return k;g(!1,"invalid option type in uniform "+f)}var g=W("./util/check"),
k=0;ia.exports={DynamicVariable:d,define:function(k,f){return new d(k,H(f+""))},isDynamic:function(k){return"function"===typeof k&&!k._reglType||k instanceof d},unbox:J,accessor:H}},{"./util/check":21}],10:[function(W,ia,fb){var d=W("./util/check"),ba=W("./util/is-typed-array"),H=W("./util/is-ndarray"),J=W("./util/values"),g=W("./constants/primitives.json"),k=W("./constants/usage.json");ia.exports=function(q,f,B,D){function G(f){this.id=l++;t[this.id]=this;this.buffer=f;this.primType=4;this.type=
this.vertCount=0}function T(k,g,u,t,c,b,S){k.buffer.bind();var r;g?((r=S)||ba(g)&&(!H(g)||ba(g.data))||(r=f.oes_element_index_uint?5125:5123),B._initBuffer(k.buffer,g,u,r,3)):(q.bufferData(34963,b,u),k.buffer.dtype=r||5121,k.buffer.usage=u,k.buffer.dimension=3,k.buffer.byteLength=b);r=S;if(!S){switch(k.buffer.dtype){case 5121:case 5120:r=5121;break;case 5123:case 5122:r=5123;break;case 5125:case 5124:r=5125;break;default:d.raise("unsupported type for element array")}k.buffer.dtype=r}k.type=r;d(5125!==
r||!!f.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=c;0>g&&(g=k.buffer.byteLength,5123===r?g>>=1:5125===r&&(g>>=2));k.vertCount=g;g=t;0>t&&(g=4,t=k.buffer.dimension,1===t&&(g=0),2===t&&(g=1),3===t&&(g=4));k.primType=g}function x(f){D.elementsCount--;d(null!==f.buffer,"must not double destroy elements");delete t[f.id];f.buffer.destroy();f.buffer=null}var t={},l=0,ca={uint8:5121,uint16:5123};f.oes_element_index_uint&&(ca.uint32=5125);G.prototype.bind=
function(){this.buffer.bind()};var u=[];return{create:function(f,q){function u(b){if(b)if("number"===typeof b)t(b),c.primType=4,c.vertCount=b|0,c.type=5121;else{var f=null,r=35044,q=-1,h=-1,w=0,y=0;if(Array.isArray(b)||ba(b)||H(b))f=b;else if(d.type(b,"object","invalid arguments for elements"),"data"in b&&(f=b.data,d(Array.isArray(f)||ba(f)||H(f),"invalid data for element buffer")),"usage"in b&&(d.parameter(b.usage,k,"invalid element buffer usage"),r=k[b.usage]),"primitive"in b&&(d.parameter(b.primitive,
g,"invalid element buffer primitive"),q=g[b.primitive]),"count"in b&&(d("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),h=b.count|0),"type"in b&&(d.parameter(b.type,ca,"invalid buffer type"),y=ca[b.type]),"length"in b)w=b.length|0;else if(w=h,5123===y||5122===y)w*=2;else if(5125===y||5124===y)w*=4;T(c,f,r,q,h,w,y)}else t(),c.primType=4,c.vertCount=0,c.type=5121;return u}var t=B.create(null,34963,!0),c=new G(t._buffer);D.elementsCount++;u(f);u._reglType="elements";u._elements=
c;u.subdata=function(c,f){t.subdata(c,f);return u};u.destroy=function(){x(c)};return u},createStream:function(f){var k=u.pop();k||(k=new G(B.create(null,34963,!0,!1)._buffer));T(k,f,35040,-1,-1,0,0);return k},destroyStream:function(f){u.push(f)},getElements:function(f){return"function"===typeof f&&f._elements instanceof G?f._elements:null},clear:function(){J(t).forEach(x)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,
"./util/values":36}],11:[function(W,ia,fb){var d=W("./util/sorted-object-keys"),ba=W("./util/check");ia.exports=function(H,J){function g(f){ba.type(f,"string","extension name must be string");f=f.toLowerCase();var q;try{q=k[f]=H.getExtension(f)}catch(g){}return!!q}for(var k={},q=0;q<J.extensions.length;++q){var f=J.extensions[q];if(!g(f))return J.onDestroy(),J.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}J.optionalExtensions.forEach(g);
return{extensions:k,restore:function(){d(k).forEach(function(f){if(k[f]&&!g(f))throw Error("(regl): error restoring extension "+f);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(W,ia,fb){var d=W("./util/check"),ba=W("./util/values"),H=W("./util/extend"),J=[6407,6408],g=[];g[6408]=4;g[6407]=3;var k=[];k[5121]=1;k[5126]=4;k[36193]=2;var q=[32854,32855,36194,35907,34842,34843,34836],f={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};ia.exports=function(B,D,G,T,x,t){function l(a,e,c){this.target=a;this.texture=e;this.renderbuffer=c;var b=a=0;e?(a=e.width,b=e.height):c&&(a=c.width,b=c.height);this.width=a;this.height=b}function ca(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function u(a,e,c){if(a){if(a.texture){a=a.texture._texture;var b=Math.max(1,a.height);d(Math.max(1,a.width)===e&&b===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,
d(a.width===e&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function N(a,e){e&&(e.texture?B.framebufferTexture2D(36160,a,e.target,e.texture._texture.texture,0):B.framebufferRenderbuffer(36160,a,36161,e.renderbuffer._renderbuffer.renderbuffer))}function y(a){var e=3553,c=null,b=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(e=a.target|0));d.type(f,"function","invalid attachment data");a=f._reglType;"texture2d"===a?(c=f,d(3553===e)):"textureCube"===a?(c=f,d(34069<=
e&&34075>e,"invalid cube map target")):"renderbuffer"===a?(b=f,e=36161):d.raise("invalid regl object for attachment");return new l(e,c,b)}function P(a,e,c,b,f){if(c)return a=T.create2D({width:a,height:e,format:b,type:f}),a._texture.refCount=0,new l(3553,a,null);a=x.create({width:a,height:e,format:b});a._renderbuffer.refCount=0;return new l(36161,null,a)}function ga(a){return a&&(a.texture||a.renderbuffer)}function c(a,e,c){a&&(a.texture?a.texture.resize(e,c):a.renderbuffer&&a.renderbuffer.resize(e,
c),a.width=e,a.height=c)}function b(){this.id=e++;R[this.id]=this;this.framebuffer=B.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function S(a){a.colorAttachments.forEach(ca);ca(a.depthAttachment);ca(a.stencilAttachment);ca(a.depthStencilAttachment)}function r(a){var e=a.framebuffer;d(e,"must not double destroy framebuffer");B.deleteFramebuffer(e);a.framebuffer=null;t.framebufferCount--;delete R[a.id]}
function Z(a){var e;B.bindFramebuffer(36160,a.framebuffer);var c=a.colorAttachments;for(e=0;e<c.length;++e)N(36064+e,c[e]);for(e=c.length;e<G.maxColorAttachments;++e)B.framebufferTexture2D(36160,36064+e,3553,null,0);B.framebufferTexture2D(36160,33306,3553,null,0);B.framebufferTexture2D(36160,36096,3553,null,0);B.framebufferTexture2D(36160,36128,3553,null,0);N(36096,a.depthAttachment);N(36128,a.stencilAttachment);N(33306,a.depthStencilAttachment);a=B.checkFramebufferStatus(36160);B.isContextLost()||
36053===a||d.raise("framebuffer configuration not supported, status = "+f[a]);B.bindFramebuffer(36160,w.next?w.next.framebuffer:null);w.cur=w.next;B.getError()}function h(a,e){function f(a,e){var c;d(w.next!==h,"can not update framebuffer which is currently in use");var b=0,r=0,R=!0,p=!0;c=null;var t=!0,K="rgba",x="uint8",T=1,n=null,F=null,aa=null,M=!1;if("number"===typeof a)b=a|0,r=e|0||b;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(r=a.shape,d(Array.isArray(r)&&
2<=r.length,"invalid shape for framebuffer"),b=r[0],r=r[1]):("radius"in a&&(b=r=a.radius),"width"in a&&(b=a.width),"height"in a&&(r=a.height));if("color"in a||"colors"in a)c=a.color||a.colors,Array.isArray(c)&&d(1===c.length||D.webgl_draw_buffers,"multiple render targets not supported");if(!c){"colorCount"in a&&(T=a.colorCount|0,d(0<T,"invalid color buffer count"));"colorTexture"in a&&(t=!!a.colorTexture,K="rgba4");if("colorType"in a){x=a.colorType;if(t)d(D.oes_texture_float||!("float"===x||"float32"===
x),"you must enable OES_texture_float in order to use floating point framebuffer objects"),d(D.oes_texture_half_float||!("half float"===x||"float16"===x),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===x||"float16"===x)d(D.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),K="rgba16f";else if("float"===x||"float32"===x)d(D.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
K="rgba32f";d.oneOf(x,C,"invalid color type")}"colorFormat"in a&&(K=a.colorFormat,0<=V.indexOf(K)?t=!0:0<=E.indexOf(K)?t=!1:d.optional(function(){if(t)d.oneOf(a.colorFormat,V,"invalid color format for texture");else d.oneOf(a.colorFormat,E,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)M=!(!a.depthTexture&&!a.depthStencilTexture),d(!M||D.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?R=a.depth:
(n=a.depth,p=!1));"stencil"in a&&("boolean"===typeof a.stencil?p=a.stencil:(F=a.stencil,R=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?R=p=a.depthStencil:(aa=a.depthStencil,p=R=!1))}else b=r=1;var l=null,oa=null,N=null,xa=null;if(Array.isArray(c))l=c.map(y);else if(c)l=[y(c)];else for(l=Array(T),c=0;c<T;++c)l[c]=P(b,r,t,K,x);d(D.webgl_draw_buffers||1>=l.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");d(l.length<=G.maxColorAttachments,
"too many color attachments, not supported");b=b||l[0].width;r=r||l[0].height;n?oa=y(n):R&&!p&&(oa=P(b,r,M,"depth","uint32"));F?N=y(F):p&&!R&&(N=P(b,r,!1,"stencil","uint8"));aa?xa=y(aa):!n&&!F&&p&&R&&(xa=P(b,r,M,"depth stencil","depth stencil"));d(1>=!!n+!!F+!!aa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");R=null;for(c=0;c<l.length;++c)u(l[c],b,r),d(!l[c]||l[c].texture&&0<=J.indexOf(l[c].texture._texture.format)||l[c].renderbuffer&&0<=q.indexOf(l[c].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+c+" is invalid"),l[c]&&l[c].texture&&(p=g[l[c].texture._texture.format]*k[l[c].texture._texture.type],null===R?R=p:d(R===p,"all color attachments much have the same number of bits per pixel."));u(oa,b,r);d(!oa||oa.texture&&6402===oa.texture._texture.format||oa.renderbuffer&&33189===oa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");u(N,b,r);d(!N||N.renderbuffer&&36168===N.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
u(xa,b,r);d(!xa||xa.texture&&34041===xa.texture._texture.format||xa.renderbuffer&&34041===xa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");S(h);h.width=b;h.height=r;h.colorAttachments=l;h.depthAttachment=oa;h.stencilAttachment=N;h.depthStencilAttachment=xa;f.color=l.map(ga);f.depth=ga(oa);f.stencil=ga(N);f.depthStencil=ga(xa);f.width=h.width;f.height=h.height;Z(h);return f}var h=new b;t.framebufferCount++;f(a,e);return H(f,{resize:function(a,e){d(w.next!==
h,"can not resize a framebuffer which is currently in use");var b=Math.max(a|0,1),r=Math.max(e|0||b,1);if(b===h.width&&r===h.height)return f;for(var k=h.colorAttachments,R=0;R<k.length;++R)c(k[R],b,r);c(h.depthAttachment,b,r);c(h.stencilAttachment,b,r);c(h.depthStencilAttachment,b,r);h.width=f.width=b;h.height=f.height=r;Z(h);return f},_reglType:"framebuffer",_framebuffer:h,destroy:function(){r(h);S(h)},use:function(a){w.setFBO({framebuffer:f},a)}})}var w={cur:null,next:null,dirty:!1,setFBO:null},
V=["rgba"],E=["rgba4","rgb565","rgb5 a1"];D.ext_srgb&&E.push("srgba");D.ext_color_buffer_half_float&&E.push("rgba16f","rgb16f");D.webgl_color_buffer_float&&E.push("rgba32f");var C=["uint8"];D.oes_texture_half_float&&C.push("half float","float16");D.oes_texture_float&&C.push("float","float32");var e=0,R={};return H(w,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof b)?a:null},create:h,createCube:function(a){function e(a){var b;d(0>
c.indexOf(w.next),"can not update framebuffer which is currently in use");var f={color:null},r=0,k=null;b="rgba";var R="uint8",q=1;if("number"===typeof a)r=a|0;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(r=a.shape,d(Array.isArray(r)&&2<=r.length,"invalid shape for framebuffer"),d(r[0]===r[1],"cube framebuffer must be square"),r=r[0]):("radius"in a&&(r=a.radius|0),"width"in a?(r=a.width|0,"height"in a&&d(a.height===r,"must be square")):"height"in a&&(r=a.height|0));
if("color"in a||"colors"in a)k=a.color||a.colors,Array.isArray(k)&&d(1===k.length||D.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in a&&(q=a.colorCount|0,d(0<q,"invalid color buffer count")),"colorType"in a&&(d.oneOf(a.colorType,C,"invalid color type"),R=a.colorType),"colorFormat"in a&&(b=a.colorFormat,d.oneOf(a.colorFormat,V,"invalid color format for texture")));"depth"in a&&(f.depth=a.depth);"stencil"in a&&(f.stencil=a.stencil);"depthStencil"in a&&(f.depthStencil=
a.depthStencil)}else r=1;if(k)if(Array.isArray(k))for(a=[],b=0;b<k.length;++b)a[b]=k[b];else a=[k];else for(a=Array(q),k={radius:r,format:b,type:R},b=0;b<q;++b)a[b]=T.createCube(k);f.color=Array(a.length);for(b=0;b<a.length;++b)q=a[b],d("function"===typeof q&&"textureCube"===q._reglType,"invalid cube map"),r=r||q.width,d(q.width===r&&q.height===r,"invalid cube map shape"),f.color[b]={target:34069,data:a[b]};for(b=0;6>b;++b){for(q=0;q<a.length;++q)f.color[q].target=34069+b;0<b&&(f.depth=c[0].depth,
f.stencil=c[0].stencil,f.depthStencil=c[0].depthStencil);if(c[b])c[b](f);else c[b]=h(f)}return H(e,{width:r,height:r,color:a})}var c=Array(6);e(a);return H(e,{faces:c,resize:function(a){var b=a|0;d(0<b&&b<=G.maxCubeMapSize,"invalid radius for cube fbo");if(b===e.width)return e;var f=e.color;for(a=0;a<f.length;++a)f[a].resize(b);for(a=0;6>a;++a)c[a].resize(b);e.width=e.height=b;return e},_reglType:"framebufferCube",destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){ba(R).forEach(r)},
restore:function(){w.cur=null;w.next=null;w.dirty=!0;ba(R).forEach(function(a){a.framebuffer=B.createFramebuffer();Z(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(W,ia,fb){var d=W("./util/sorted-object-keys"),ba=W("./util/pool");ia.exports=function(H,J){var g=1;J.ext_texture_filter_anisotropic&&(g=H.getParameter(34047));var k=1,q=1;J.webgl_draw_buffers&&(k=H.getParameter(34852),q=H.getParameter(36063));var f=!!J.oes_texture_float;if(f){f=H.createTexture();H.bindTexture(3553,
f);H.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var B=H.createFramebuffer();H.bindFramebuffer(36160,B);H.framebufferTexture2D(36160,36064,3553,f,0);H.bindTexture(3553,null);if(36053!==H.checkFramebufferStatus(36160))f=!1;else{H.viewport(0,0,1,1);H.clearColor(1,0,0,1);H.clear(16384);var D=ba.allocType(5126,4);H.readPixels(0,0,1,1,6408,5126,D);H.getError()?f=!1:(H.deleteFramebuffer(B),H.deleteTexture(f),f=1===D[0]);ba.freeType(D)}}D=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(D=H.createTexture(),B=ba.allocType(5121,36),H.activeTexture(33984),H.bindTexture(34067,D),H.texImage2D(34069,0,6408,3,3,0,6408,5121,B),ba.freeType(B),H.bindTexture(34067,null),H.deleteTexture(D),D=!H.getError());return{colorBits:[H.getParameter(3410),H.getParameter(3411),H.getParameter(3412),H.getParameter(3413)],depthBits:H.getParameter(3414),stencilBits:H.getParameter(3415),subpixelBits:H.getParameter(3408),extensions:d(J).filter(function(f){return!!J[f]}),
maxAnisotropic:g,maxDrawbuffers:k,maxColorAttachments:q,pointSizeDims:H.getParameter(33901),lineWidthDims:H.getParameter(33902),maxViewportDims:H.getParameter(3386),maxCombinedTextureUnits:H.getParameter(35661),maxCubeMapSize:H.getParameter(34076),maxRenderbufferSize:H.getParameter(34024),maxTextureUnits:H.getParameter(34930),maxTextureSize:H.getParameter(3379),maxAttributes:H.getParameter(34921),maxVertexUniforms:H.getParameter(36347),maxVertexTextureUnits:H.getParameter(35660),maxVaryingVectors:H.getParameter(36348),
maxFragmentUniforms:H.getParameter(36349),glsl:H.getParameter(35724),renderer:H.getParameter(7937),vendor:H.getParameter(7936),version:H.getParameter(7938),readFloat:f,npotTextureCube:D}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(W,ia,fb){var d=W("./util/check"),ba=W("./util/is-typed-array");ia.exports=function(H,J,g,k,q,f,B){function D(T){var x;null===J.next?(d(q.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
x=5121):(d(null!==J.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),x=J.next.colorAttachments[0].texture._texture.type,d.optional(function(){f.oes_texture_float?(d(5121===x||5126===x,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===x&&d(B.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):d(5121===x,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var t=0,l=0,D=k.framebufferWidth,u=k.framebufferHeight,N=null;ba(T)?N=T:T&&(d.type(T,"object","invalid arguments to regl.read()"),t=T.x|0,l=T.y|0,d(0<=t&&t<k.framebufferWidth,"invalid x offset for regl.read"),d(0<=l&&l<k.framebufferHeight,"invalid y offset for regl.read"),D=(T.width||k.framebufferWidth-t)|0,u=(T.height||k.framebufferHeight-l)|0,N=T.data||null);N&&(5121===x?d(N instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===x&&d(N instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));d(0<D&&D+t<=k.framebufferWidth,"invalid width for read pixels");d(0<u&&u+l<=k.framebufferHeight,"invalid height for read pixels");g();T=D*u*4;N||(5121===x?N=new Uint8Array(T):5126===x&&(N=N||new Float32Array(T)));d.isTypedArray(N,"data buffer for regl.read() must be a typedarray");d(N.byteLength>=T,"data buffer for regl.read() too small");H.pixelStorei(3333,4);H.readPixels(t,l,D,u,6408,x,N);return N}function G(f){var k;
J.setFBO({framebuffer:f.framebuffer},function(){k=D(f)});return k}return function(f){return f&&"framebuffer"in f?G(f):D(f)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(W,ia,fb){var d=W("./util/sorted-object-keys"),ba=W("./util/check"),H=W("./util/values"),J=[];J[32854]=2;J[32855]=2;J[36194]=2;J[33189]=2;J[36168]=1;J[34041]=4;J[35907]=4;J[34836]=16;J[34842]=8;J[34843]=6;ia.exports=function(g,k,q,f,B){function D(f){this.id=t++;this.refCount=1;this.renderbuffer=f;this.format=32854;
this.height=this.width=0;B.profile&&(this.stats={size:0})}function G(k){var q=k.renderbuffer;ba(q,"must not double destroy renderbuffer");g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(q);k.renderbuffer=null;k.refCount=0;delete l[k.id];f.renderbufferCount--}var T={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};k.ext_srgb&&(T.srgba=35907);k.ext_color_buffer_half_float&&(T.rgba16f=34842,T.rgb16f=34843);k.webgl_color_buffer_float&&(T.rgba32f=34836);var x=
[];d(T).forEach(function(f){x[T[f]]=f});var t=0,l={};D.prototype.decRef=function(){0>=--this.refCount&&G(this)};B.profile&&(f.getTotalRenderbufferSize=function(){var f=0;d(l).forEach(function(k){f+=l[k].stats.size});return f});return{create:function(k,u){function d(f,k){var c=0,b=0,S=32854;"object"===typeof f&&f?("shape"in f?(b=f.shape,ba(Array.isArray(b)&&2<=b.length,"invalid renderbuffer shape"),c=b[0]|0,b=b[1]|0):("radius"in f&&(c=b=f.radius|0),"width"in f&&(c=f.width|0),"height"in f&&(b=f.height|
0)),"format"in f&&(ba.parameter(f.format,T,"invalid renderbuffer format"),S=T[f.format])):"number"===typeof f?(c=f|0,b="number"===typeof k?k|0:c):f?ba.raise("invalid arguments to renderbuffer constructor"):c=b=1;ba(0<c&&0<b&&c<=q.maxRenderbufferSize&&b<=q.maxRenderbufferSize,"invalid renderbuffer size");if(c!==y.width||b!==y.height||S!==y.format)return d.width=y.width=c,d.height=y.height=b,y.format=S,g.bindRenderbuffer(36161,y.renderbuffer),g.renderbufferStorage(36161,S,c,b),ba(0===g.getError(),"invalid render buffer format"),
B.profile&&(y.stats.size=J[y.format]*y.width*y.height),d.format=x[y.format],d}var y=new D(g.createRenderbuffer());l[y.id]=y;f.renderbufferCount++;d(k,u);d.resize=function(f,k){var c=f|0,b=k|0||c;if(c===y.width&&b===y.height)return d;ba(0<c&&0<b&&c<=q.maxRenderbufferSize&&b<=q.maxRenderbufferSize,"invalid renderbuffer size");d.width=y.width=c;d.height=y.height=b;g.bindRenderbuffer(36161,y.renderbuffer);g.renderbufferStorage(36161,y.format,c,b);ba(0===g.getError(),"invalid render buffer format");B.profile&&
(y.stats.size=J[y.format]*y.width*y.height);return d};d._reglType="renderbuffer";d._renderbuffer=y;B.profile&&(d.stats=y.stats);d.destroy=function(){y.decRef()};return d},clear:function(){H(l).forEach(G)},restore:function(){H(l).forEach(function(f){f.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,f.renderbuffer);g.renderbufferStorage(36161,f.format,f.width,f.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(W,
ia,fb){var d=W("./util/sorted-object-keys"),ba=W("./util/check"),H=W("./util/extend"),J=W("./util/values");ia.exports=function(g,k,q,f){function B(f,k,q,c){this.name=f;this.id=k;this.location=q;this.info=c}function D(f,k){for(var q=0;q<f.length;++q)if(f[q].id===k.id){f[q].location=k.location;return}f.push(k)}function G(f,q,d){var c=35632===f?t:l,b=c[q];if(!b){var S=k.str(q),b=g.createShader(f);g.shaderSource(b,S);g.compileShader(b);ba.shaderError(g,b,S,f,d);c[q]=b}return b}function T(k,q){this.id=
N++;this.fragId=k;this.vertId=q;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;f.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function x(q,d,u){var c;c=G(35632,q.fragId);var b=G(35633,q.vertId),S=q.program=g.createProgram();g.attachShader(S,c);g.attachShader(S,b);if(u)for(c=0;c<u.length;++c)b=u[c],g.bindAttribLocation(S,b[0],b[1]);g.linkProgram(S);ba.linkError(g,S,k.str(q.fragId),k.str(q.vertId),d);u=g.getProgramParameter(S,35718);f.profile&&(q.stats.uniformsCount=
u);b=q.uniforms;for(c=0;c<u;++c)if(d=g.getActiveUniform(S,c))if(1<d.size)for(var r=0;r<d.size;++r){var t=d.name.replace("[0]","["+r+"]");D(b,new B(t,k.id(t),g.getUniformLocation(S,t),d))}else D(b,new B(d.name,k.id(d.name),g.getUniformLocation(S,d.name),d));u=g.getProgramParameter(S,35721);f.profile&&(q.stats.attributesCount=u);q=q.attributes;for(c=0;c<u;++c)(d=g.getActiveAttrib(S,c))&&D(q,new B(d.name,k.id(d.name),g.getAttribLocation(S,d.name),d))}var t={},l={},ca={},u=[],N=0;f.profile&&(q.getMaxUniformsCount=
function(){var f=0;u.forEach(function(k){k.stats.uniformsCount>f&&(f=k.stats.uniformsCount)});return f},q.getMaxAttributesCount=function(){var f=0;u.forEach(function(k){k.stats.attributesCount>f&&(f=k.stats.attributesCount)});return f});return{clear:function(){var f=g.deleteShader.bind(g);J(t).forEach(f);t={};J(l).forEach(f);l={};u.forEach(function(f){g.deleteProgram(f.program)});u.length=0;ca={};q.shaderCount=0},program:function(f,k,J,c){ba.command(0<=f,"missing vertex shader",J);ba.command(0<=k,
"missing fragment shader",J);var b=ca[k];b||(b=ca[k]={});var S=b[f];if(S&&(S.refCount++,!c))return S;var r=new T(k,f);q.shaderCount++;x(r,J,c);S||(b[f]=r);u.push(r);return H(r,{destroy:function(){r.refCount--;if(0>=r.refCount){g.deleteProgram(r.program);var c=u.indexOf(r);u.splice(c,1);q.shaderCount--}0>=b[r.vertId].refCount&&(g.deleteShader(l[r.vertId]),delete l[r.vertId],delete ca[r.fragId][r.vertId]);d(ca[r.fragId]).length||(g.deleteShader(t[r.fragId]),delete t[r.fragId],delete ca[r.fragId])}})},
restore:function(){t={};l={};for(var f=0;f<u.length;++f)x(u[f],null,u[f].attributes.map(function(f){return[f.location,f.name]}))},shader:G,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(W,ia,fb){ia.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(W,ia,fb){ia.exports=function(){var d={"":0},
ba=[""];return{id:function(H){var J=d[H];if(J)return J;J=d[H]=ba.length;ba.push(H);return J},str:function(d){return ba[d]}}}},{}],19:[function(W,ia,fb){function d(e){return"[object "+e+"]"}function ba(e){return Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}function H(e){return Array.isArray(e)&&0!==e.length&&ca(e[0])?!0:!1}function J(e){return Object.prototype.toString.call(e)}function g(e){if(!e)return!1;var c=J(e);return 0<=V.indexOf(c)?!0:ba(e)||H(e)||x(e)}function k(e,c){36193===e.type?
(e.data=l(c),t.freeType(c)):e.data=c}function q(e,b,a,f,h,r){e="undefined"!==typeof C[e]?C[e]:c[e]*E[b];r&&(e*=6);if(h){for(f=0;1<=a;)f+=e*a*a,a/=2;return f}return e*a*f}var f=W("./util/sorted-object-keys"),B=W("./util/check"),D=W("./util/extend"),G=W("./util/values"),T=W("./util/is-typed-array"),x=W("./util/is-ndarray"),t=W("./util/pool"),l=W("./util/to-half-float"),ca=W("./util/is-array-like"),u=W("./util/flatten"),N=W("./util/is-pow2");fb=W("./constants/arraytypes.json");var y=W("./constants/arraytypes.json"),
P=[9984,9986,9985,9987],ga=[0,6409,6410,6407,6408],c={};c[6409]=c[6406]=c[6402]=1;c[34041]=c[6410]=2;c[6407]=c[35904]=3;c[6408]=c[35906]=4;var b=d("HTMLCanvasElement"),S=d("OffscreenCanvas"),r=d("CanvasRenderingContext2D"),Z=d("ImageBitmap"),h=d("HTMLImageElement"),w=d("HTMLVideoElement"),V=f(fb).concat([b,S,r,Z,h,w]),E=[];E[5121]=1;E[5126]=4;E[36193]=2;E[5123]=2;E[5125]=4;var C=[];C[32854]=2;C[32855]=2;C[36194]=2;C[34041]=4;C[33776]=.5;C[33777]=.5;C[33778]=1;C[33779]=1;C[35986]=.5;C[35987]=1;C[34798]=
1;C[35840]=.5;C[35841]=.25;C[35842]=.5;C[35843]=.25;C[36196]=.5;ia.exports=function(e,R,a,d,C,E,V){function X(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(a,e){a.internalformat=e.internalformat;a.format=e.format;a.type=e.type;a.compressed=e.compressed;a.premultiplyAlpha=e.premultiplyAlpha;a.flipY=e.flipY;a.unpackAlignment=e.unpackAlignment;a.colorSpace=
e.colorSpace;a.width=e.width;a.height=e.height;a.channels=e.channels}function Q(e,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(B.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(B.type(b.flipY,"boolean","invalid texture flip"),e.flipY=b.flipY);"alignment"in b&&(B.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=b.alignment);"colorSpace"in b&&(B.parameter(b.colorSpace,Ta,"invalid colorSpace"),
e.colorSpace=Ta[b.colorSpace]);if("type"in b){var f=b.type;B(R.oes_texture_float||!("float"===f||"float32"===f),"you must enable the OES_texture_float extension in order to use floating point textures.");B(R.oes_texture_half_float||!("half float"===f||"float16"===f),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");B(R.webgl_depth_texture||!("uint16"===f||"uint32"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
B.parameter(f,v,"invalid texture type");e.type=v[f]}var n=e.width,h=e.height,p=e.channels,f=!1;"shape"in b?(B(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),n=b.shape[0],h=b.shape[1],3===b.shape.length&&(p=b.shape[2],B(0<p&&4>=p,"invalid number of channels"),f=!0),B(0<=n&&n<=a.maxTextureSize,"invalid width"),B(0<=h&&h<=a.maxTextureSize,"invalid height")):("radius"in b&&(n=h=b.radius,B(0<=n&&n<=a.maxTextureSize,"invalid radius")),"width"in b&&(n=b.width,B(0<=n&&n<=a.maxTextureSize,
"invalid width")),"height"in b&&(h=b.height,B(0<=h&&h<=a.maxTextureSize,"invalid height")),"channels"in b&&(p=b.channels,B(0<p&&4>=p,"invalid number of channels"),f=!0));e.width=n|0;e.height=h|0;e.channels=p|0;n=!1;"format"in b&&(n=b.format,B(R.webgl_depth_texture||!("depth"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),B.parameter(n,m,"invalid texture format"),h=e.internalformat=m[n],e.format=Fa[h],n in v&&!("type"in b)&&(e.type=
v[n]),n in U&&(e.compressed=!0),n=!0);!f&&n?e.channels=c[e.format]:f&&!n?e.channels!==ga[e.format]&&(e.format=e.internalformat=ga[e.channels]):n&&f&&B(e.channels===c[e.format],"number of channels inconsistent with specified format")}}function O(a){e.pixelStorei(37440,a.flipY);e.pixelStorei(37441,a.premultiplyAlpha);e.pixelStorei(37443,a.colorSpace);e.pixelStorei(3317,a.unpackAlignment)}function z(){X.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function p(e,c){var f=null;g(c)?f=c:c&&(B.type(c,"object","invalid pixel data type"),Q(e,c),"x"in c&&(e.xOffset=c.x|0),"y"in c&&(e.yOffset=c.y|0),g(c.data)&&(f=c.data));B(!e.compressed||f instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){B(!f,"can not specify copy and data field for the same texture");var m=C.viewportWidth,n=C.viewportHeight;e.width=e.width||m-e.xOffset;e.height=e.height||n-e.yOffset;e.needsCopy=!0;B(0<=e.xOffset&&e.xOffset<m&&0<=e.yOffset&&
e.yOffset<n&&0<e.width&&e.width<=m&&0<e.height&&e.height<=n,"copy texture read out of bounds")}else if(!f)e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;else if(T(f))e.channels=e.channels||4,e.data=f,"type"in c||5121!==e.type||(e.type=y[Object.prototype.toString.call(f)]|0);else if(ba(f)){e.channels=e.channels||4;m=f;n=m.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:n=t.allocType(e.type,n);n.set(m);e.data=n;break;case 36193:e.data=l(m);break;default:B.raise("unsupported texture type, must specify a typed array")}e.alignment=
1;e.needsFree=!0}else if(x(f)){m=f.data;Array.isArray(m)||5121!==e.type||(e.type=y[Object.prototype.toString.call(m)]|0);var n=f.shape,p=f.stride,v,I,q,ja;3===n.length?(q=n[2],ja=p[2]):(B(2===n.length,"invalid ndarray pixel data, must be 2 or 3D"),ja=q=1);v=n[0];I=n[1];n=p[0];p=p[1];e.alignment=1;e.width=v;e.height=I;e.channels=q;e.format=e.internalformat=ga[q];e.needsFree=!0;v=ja;f=f.offset;q=e.width;ja=e.height;I=e.channels;for(var U=t.allocType(36193===e.type?5126:e.type,q*ja*I),R=0,ra=0;ra<ja;++ra)for(var Ba=
0;Ba<q;++Ba)for(var Fa=0;Fa<I;++Fa)U[R++]=m[n*Ba+p*ra+v*Fa+f];k(e,U)}else if(J(f)===b||J(f)===S||J(f)===r)J(f)===b||J(f)===S?e.element=f:e.element=f.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(J(f)===Z)e.element=f,e.width=f.width,e.height=f.height,e.channels=4;else if(J(f)===h)e.element=f,e.width=f.naturalWidth,e.height=f.naturalHeight,e.channels=4;else if(J(f)===w)e.element=f,e.width=f.videoWidth,e.height=f.videoHeight,e.channels=4;else if(H(f)){m=e.width||f[0].length;
n=e.height||f.length;p=e.channels;p=ca(f[0][0])?p||f[0][0].length:p||1;v=u.shape(f);q=1;for(ja=0;ja<v.length;++ja)q*=v[ja];q=t.allocType(36193===e.type?5126:e.type,q);u.flatten(f,v,"",q);k(e,q);e.alignment=1;e.width=m;e.height=n;e.channels=p;e.format=e.internalformat=ga[p];e.needsFree=!0}5126===e.type?B(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===e.type&&B(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function L(a,c,b,f,m){var n=a.element,h=a.data,p=a.internalformat,v=a.format,r=a.type,k=a.width,I=a.height;O(a);n?e.texSubImage2D(c,m,b,f,v,r,n):a.compressed?e.compressedTexSubImage2D(c,m,b,f,p,k,I,h):a.needsCopy?(d(),e.copyTexSubImage2D(c,m,b,f,a.xOffset,a.yOffset,k,I)):e.texSubImage2D(c,m,b,f,k,I,v,r,h)}function K(){return qa.pop()||new z}function za(a){a.needsFree&&t.freeType(a.data);z.call(a);qa.push(a)}function na(){X.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function n(a,e,c){var b=a.images[0]=K();a.mipmask=1;b.width=a.width=e;b.height=a.height=c;b.channels=a.channels=4}function F(a,e){var c=null;if(g(e))c=a.images[0]=K(),ea(c,a),p(c,e),a.mipmask=1;else if(Q(a,e),Array.isArray(e.mipmap))for(var b=e.mipmap,f=0;f<b.length;++f)c=a.images[f]=K(),ea(c,a),c.width>>=f,c.height>>=f,p(c,b[f]),a.mipmask|=1<<f;else c=a.images[0]=K(),ea(c,a),p(c,e),a.mipmask=1;ea(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||B(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function aa(a,c){for(var b=a.images,f=0;f<b.length&&b[f];++f){var m=b[f],n=c,h=f,p=m.element,v=m.data,r=m.internalformat,k=m.format,I=m.type,q=m.width,ja=m.height;O(m);p?e.texImage2D(n,h,k,k,I,p):m.compressed?e.compressedTexImage2D(n,h,r,q,ja,0,v):m.needsCopy?(d(),e.copyTexImage2D(n,h,k,m.xOffset,m.yOffset,q,ja,0)):e.texImage2D(n,
h,k,q,ja,0,k,I,v||null)}}function M(){var a=ya.pop()||new na;X.call(a);for(var e=a.mipmask=0;16>e;++e)a.images[e]=null;return a}function ma(a){for(var e=a.images,c=0;c<e.length;++c)e[c]&&za(e[c]),e[c]=null;ya.push(a)}function oa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ca(e,c){if("min"in c){var b=c.min;B.parameter(b,Yb);e.minFilter=Yb[b];0<=P.indexOf(e.minFilter)&&!("faces"in c)&&(e.genMipmaps=!0)}"mag"in c&&
(b=c.mag,B.parameter(b,ja),e.magFilter=ja[b]);var b=e.wrapS,f=e.wrapT;if("wrap"in c){var m=c.wrap;"string"===typeof m?(B.parameter(m,Ba),b=f=Ba[m]):Array.isArray(m)&&(B.parameter(m[0],Ba),B.parameter(m[1],Ba),b=Ba[m[0]],f=Ba[m[1]])}else"wrapS"in c&&(b=c.wrapS,B.parameter(b,Ba),b=Ba[b]),"wrapT"in c&&(f=c.wrapT,B.parameter(f,Ba),f=Ba[f]);e.wrapS=b;e.wrapT=f;"anisotropic"in c&&(b=c.anisotropic,B("number"===typeof b&&1<=b&&b<=a.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=c.anisotropic);
if("mipmap"in c){b=!1;switch(typeof c.mipmap){case "string":B.parameter(c.mipmap,Aa,"invalid mipmap hint");e.mipmapHint=Aa[c.mipmap];b=e.genMipmaps=!0;break;case "boolean":b=e.genMipmaps=c.mipmap;break;case "object":B(Array.isArray(c.mipmap),"invalid mipmap type");e.genMipmaps=!1;b=!0;break;default:B.raise("invalid mipmap type")}!b||"min"in c||(e.minFilter=9984)}}function xa(a,c){e.texParameteri(c,10241,a.minFilter);e.texParameteri(c,10240,a.magFilter);e.texParameteri(c,10242,a.wrapS);e.texParameteri(c,
10243,a.wrapT);R.ext_texture_filter_anisotropic&&e.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(e.hint(33170,a.mipmapHint),e.generateMipmap(c))}function fa(a){X.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ga++;this.refCount=1;this.target=a;this.texture=e.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new oa;V.profile&&(this.stats={size:0})}function Ea(a){e.activeTexture(33984);e.bindTexture(a.target,a.texture)}function ka(){var a=ua[0];a?e.bindTexture(a.target,a.texture):
e.bindTexture(3553,null)}function pa(a){var c=a.texture;B(c,"must not double destroy texture");var b=a.unit,f=a.target;0<=b&&(e.activeTexture(33984+b),e.bindTexture(f,null),ua[b]=null);e.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete la[a.id];E.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ba={repeat:10497,clamp:33071,mirror:33648},ja={nearest:9728,linear:9729},Yb=D({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},ja),Ta={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},U={};R.ext_srgb&&(m.srgb=35904,m.srgba=35906);R.oes_texture_float&&(v.float32=v["float"]=5126);R.oes_texture_half_float&&(v.float16=v["half float"]=36193);R.webgl_depth_texture&&(D(m,{depth:6402,"depth stencil":34041}),D(v,{uint16:5123,uint32:5125,
"depth stencil":34042}));R.webgl_compressed_texture_s3tc&&D(U,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});R.webgl_compressed_texture_atc&&D(U,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});R.webgl_compressed_texture_pvrtc&&D(U,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});R.webgl_compressed_texture_etc1&&(U["rgb etc1"]=36196);var va=Array.prototype.slice.call(e.getParameter(34467));
f(U).forEach(function(a){var e=U[a];0<=va.indexOf(e)&&(m[a]=e)});var wa=f(m);a.textureFormats=wa;var Bd=[];f(m).forEach(function(a){Bd[m[a]]=a});var Hb=[];f(v).forEach(function(a){Hb[v[a]]=a});var ha=[];f(ja).forEach(function(a){ha[ja[a]]=a});var I=[];f(Yb).forEach(function(a){I[Yb[a]]=a});var ra=[];f(Ba).forEach(function(a){ra[Ba[a]]=a});var Fa=wa.reduce(function(a,e){var c=m[e];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||R.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=e.indexOf("rgba")?
a[c]=6408:a[c]=6407;return a},{}),qa=[],ya=[],Ga=0,la={},Y=a.maxTextureUnits,ua=Array(Y).map(function(){return null});D(fa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<Y;++c){var b=ua[c];if(b){if(0<b.bindCount)continue;b.unit=-1}ua[c]=this;a=c;break}a>=Y&&B.raise("insufficient number of texture units");V.profile&&E.maxTextureUnits<a+1&&(E.maxTextureUnits=a+1);this.unit=a;e.activeTexture(33984+a);e.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});V.profile&&(E.getTotalTextureSize=function(){var a=0;f(la).forEach(function(e){a+=la[e].stats.size});return a});return{create2D:function(c,b){function f(e,c){var b=m.texInfo;oa.call(b);var h=M();"number"===typeof e?"number"===typeof c?n(h,e|0,c|0):n(h,e|0,e|0):e?(B.type(e,"object","invalid arguments to regl.texture"),Ca(b,e),F(h,e)):n(h,1,1);b.genMipmaps&&(h.mipmask=(h.width<<1)-1);m.mipmask=h.mipmask;ea(m,h);B.texture2D(b,h,a);m.internalformat=h.internalformat;
f.width=h.width;f.height=h.height;Ea(m);aa(h,3553);xa(b,3553);ka();ma(h);V.profile&&(m.stats.size=q(m.internalformat,m.type,h.width,h.height,b.genMipmaps,!1));f.format=Bd[m.internalformat];f.type=Hb[m.type];f.mag=ha[b.magFilter];f.min=I[b.minFilter];f.wrapS=ra[b.wrapS];f.wrapT=ra[b.wrapT];return f}var m=new fa(3553);la[m.id]=m;E.textureCount++;f(c,b);f.subimage=function(a,e,c,b){B(!!a,"must specify image data");e|=0;c|=0;b|=0;var n=K();ea(n,m);n.width=0;n.height=0;p(n,a);n.width=n.width||(m.width>>
b)-e;n.height=n.height||(m.height>>b)-c;B(m.type===n.type&&m.format===n.format&&m.internalformat===n.internalformat,"incompatible format for texture.subimage");B(0<=e&&0<=c&&e+n.width<=m.width&&c+n.height<=m.height,"texture.subimage write out of bounds");B(m.mipmask&1<<b,"missing mipmap data");B(n.data||n.element||n.needsCopy,"missing image data");Ea(m);L(n,3553,e,c,b);ka();za(n);return f};f.resize=function(a,c){var b=a|0,n=c|0||b;if(b===m.width&&n===m.height)return f;f.width=m.width=b;f.height=m.height=
n;Ea(m);for(var h=0;m.mipmask>>h;++h){var p=b>>h,v=n>>h;if(!p||!v)break;e.texImage2D(3553,h,m.format,p,v,0,m.format,m.type,null)}ka();V.profile&&(m.stats.size=q(m.internalformat,m.type,b,n,!1,!1));return f};f._reglType="texture2d";f._texture=m;V.profile&&(f.stats=m.stats);f.destroy=function(){m.decRef()};return f},createCube:function(c,b,f,m,h,v){function r(e,c,b,f,m,h){var p,v=k.texInfo;oa.call(v);for(p=0;6>p;++p)ja[p]=M();if("number"!==typeof e&&e)if("object"===typeof e)if(c)F(ja[0],e),F(ja[1],
c),F(ja[2],b),F(ja[3],f),F(ja[4],m),F(ja[5],h);else if(Ca(v,e),Q(k,e),"faces"in e)for(e=e.faces,B(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),p=0;6>p;++p)B("object"===typeof e[p]&&!!e[p],"invalid input for cube map face"),ea(ja[p],k),F(ja[p],e[p]);else for(p=0;6>p;++p)F(ja[p],e);else B.raise("invalid arguments to cube map");else for(e=e|0||1,p=0;6>p;++p)n(ja[p],e,e);ea(k,ja[0]);B.optional(function(){a.npotTextureCube||B(N(k.width)&&N(k.height),"your browser does not support non power or two texture dimensions")});
k.mipmask=v.genMipmaps?(ja[0].width<<1)-1:ja[0].mipmask;B.textureCube(k,v,ja,a);k.internalformat=ja[0].internalformat;r.width=ja[0].width;r.height=ja[0].height;Ea(k);for(p=0;6>p;++p)aa(ja[p],34069+p);xa(v,34067);ka();V.profile&&(k.stats.size=q(k.internalformat,k.type,r.width,r.height,v.genMipmaps,!0));r.format=Bd[k.internalformat];r.type=Hb[k.type];r.mag=ha[v.magFilter];r.min=I[v.minFilter];r.wrapS=ra[v.wrapS];r.wrapT=ra[v.wrapT];for(p=0;6>p;++p)ma(ja[p]);return r}var k=new fa(34067);la[k.id]=k;E.cubeCount++;
var ja=Array(6);r(c,b,f,m,h,v);r.subimage=function(a,e,c,b,f){B(!!e,"must specify image data");B("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;b|=0;f|=0;var m=K();ea(m,k);m.width=0;m.height=0;p(m,e);m.width=m.width||(k.width>>f)-c;m.height=m.height||(k.height>>f)-b;B(k.type===m.type&&k.format===m.format&&k.internalformat===m.internalformat,"incompatible format for texture.subimage");B(0<=c&&0<=b&&c+m.width<=k.width&&b+m.height<=k.height,"texture.subimage write out of bounds");B(k.mipmask&
1<<f,"missing mipmap data");B(m.data||m.element||m.needsCopy,"missing image data");Ea(k);L(m,34069+a,c,b,f);ka();za(m);return r};r.resize=function(a){a|=0;if(a!==k.width){r.width=k.width=a;r.height=k.height=a;Ea(k);for(var c=0;6>c;++c)for(var b=0;k.mipmask>>b;++b)e.texImage2D(34069+c,b,k.format,a>>b,a>>b,0,k.format,k.type,null);ka();V.profile&&(k.stats.size=q(k.internalformat,k.type,r.width,r.height,!1,!0));return r}};r._reglType="textureCube";r._texture=k;V.profile&&(r.stats=k.stats);r.destroy=function(){k.decRef()};
return r},clear:function(){for(var a=0;a<Y;++a)e.activeTexture(33984+a),e.bindTexture(3553,null),ua[a]=null;G(la).forEach(pa);E.cubeCount=0;E.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<Y;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null)}G(la).forEach(function(a){a.texture=e.createTexture();e.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)e.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,
a.type,null);else for(var b=0;6>b;++b)e.texImage2D(34069+b,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);xa(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<Y;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null);e.activeTexture(33984+a);e.bindTexture(3553,null);e.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(W,ia,fb){ia.exports=function(d,ba){function H(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function J(k,g,d){var t=q.pop()||new H;t.startQueryIndex=k;t.endQueryIndex=g;t.sum=0;t.stats=d;f.push(t)}if(!ba.ext_disjoint_timer_query)return null;var g=[],k=[],q=[],f=[],B=[],D=[];return{beginQuery:function(f){var q=g.pop()||ba.ext_disjoint_timer_query.createQueryEXT();ba.ext_disjoint_timer_query.beginQueryEXT(35007,
q);k.push(q);J(k.length-1,k.length,f)},endQuery:function(){ba.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:J,update:function(){var d,J;d=k.length;if(0!==d){D.length=Math.max(D.length,d+1);B.length=Math.max(B.length,d+1);B[0]=0;var x=D[0]=0;for(J=d=0;J<k.length;++J){var t=k[J];ba.ext_disjoint_timer_query.getQueryObjectEXT(t,34919)?(x+=ba.ext_disjoint_timer_query.getQueryObjectEXT(t,34918),g.push(t)):k[d++]=t;B[J+1]=x;D[J+1]=d}k.length=d;for(J=d=0;J<f.length;++J){var x=f[J],l=x.startQueryIndex,
t=x.endQueryIndex;x.sum+=B[t]-B[l];l=D[l];t=D[t];t===l?(x.stats.gpuTime+=x.sum/1E6,q.push(x)):(x.startQueryIndex=l,x.endQueryIndex=t,f[d++]=x)}f.length=d}},getNumPendingQueries:function(){return k.length},clear:function(){g.push.apply(g,k);for(var f=0;f<g.length;f++)ba.ext_disjoint_timer_query.deleteQueryEXT(g[f]);k.length=0;g.length=0},restore:function(){k.length=0;g.length=0}}}},{}],21:[function(W,ia,fb){function d(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function ba(c){c=Error("(regl) "+
c);console.error(c);throw c;}function H(c,b){c||ba(b)}function J(c){return c?": "+c:""}function g(c,b){switch(b){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function k(c,b,f){0>b.indexOf(c)&&ba("invalid value"+J(f)+". must be one of: "+b)}function q(c,
b){for(c+="";c.length<b;)c=" "+c;return c}function f(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function B(c,b){this.number=c;this.line=b;this.errors=[]}function D(c,b,f){this.file=c;this.line=b;this.message=f}function G(){var c=Error(),c=(c.stack||c).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return b?b[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function T(){var c=Error(),c=(c.stack||c).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return b?b[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function x(c,b){var k=c.split("\n"),h=1,q=0,g={unknown:new f,0:new f};g.unknown.name=g[0].name=b||G();g.unknown.lines.push(new B(0,""));for(var u=0;u<k.length;++u){var C=k[u],e=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(C);if(e)switch(e[1]){case "line":if(e=/(\d+)(\s+\d+)?/.exec(e[2]))h=e[1]|0,e[2]&&(q=e[2]|0,q in g||(g[q]=new f));break;case "define":if(e=/SHADER_NAME(_B64)?\s+(.*)$/.exec(e[2]))g[q].name=e[1]?d(e[2]):e[2]}g[q].lines.push(new B(h++,
C))}P(g).forEach(function(e){var a=g[e];a.lines.forEach(function(e){a.index[e.number]=e})});return g}function t(c){var b=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var f=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);f?b.push(new D(f[1]|0,f[2]|0,f[3].trim())):0<c.length&&b.push(new D("unknown",0,c))}});return b}function l(c,b){b.forEach(function(b){var f=c[b.file];if(f){var k=f.index[b.line];if(k){k.errors.push(b);f.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(b)})}
function ca(c){c._commandRef=G()}function u(c,b){var f=T();ba(c+" in command "+(b||G())+("unknown"===f?"":" called from "+f))}function N(c,b,f,h){g(c,b)||u("invalid parameter type"+J(f)+". expected "+b+", got "+typeof c,h||G())}function y(c,f){return 32820===c||32819===c||33635===c?2:34042===c?4:b[c]*f}var P=W("./sorted-object-keys"),ga=W("./is-typed-array");W=W("./extend");var c="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),b={};b[5120]=b[5121]=
1;b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2;b[5124]=b[5125]=b[5126]=b[34042]=4;ia.exports=W(H,{optional:function(c){c()},raise:ba,commandRaise:u,command:function(c,b,f){c||u(b,f||G())},parameter:function(c,b,f){c in b||ba("unknown parameter ("+c+")"+J(f)+". possible values: "+P(b).join())},commandParameter:function(c,b,f,h){c in b||u("unknown parameter ("+c+")"+J(f)+". possible values: "+P(b).join(),h||G())},constructor:function(b){P(b).forEach(function(b){0>c.indexOf(b)&&ba('invalid regl constructor argument "'+
b+'". must be one of '+c)})},type:function(c,b,f){g(c,b)||ba("invalid parameter type"+J(f)+". expected "+b+", got "+typeof c)},commandType:N,isTypedArray:function(c,b){ga(c)||ba("invalid parameter type"+J(b)+". must be a typed array")},nni:function(c,b){0<=c&&(c|0)===c||ba("invalid parameter type, ("+c+")"+J(b)+". must be a nonnegative integer")},oneOf:k,shaderError:function(c,b,f,h,k){if(!c.getShaderParameter(b,c.COMPILE_STATUS)){b=c.getShaderInfoLog(b);c=h===c.FRAGMENT_SHADER?"fragment":"vertex";
N(f,"string",c+" shader source must be a string",k);var g=x(f,k);f=t(b);l(g,f);P(g).forEach(function(c){function b(e,c){f.push(e);a.push(c||"")}var e=g[c];if(e.hasErrors){var f=[""],a=[""];b("file number "+c+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold");e.lines.forEach(function(a){if(0<a.errors.length){b(q(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var e=0;a.errors.forEach(function(c){c=
c.message;var f=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(f){var h=f[1];c=f[2];switch(h){case "assign":h="="}e=Math.max(a.line.indexOf(h,e),0)}else e=0;b(q("| ",6));b(q("^^^",e+3)+"\n","font-weight:bold");b(q("| ",6));b(c+"\n","font-weight:bold")});b(q("| ",6)+"\n")}else b(q(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(f.join("")):(a[0]=f.join("%c"),console.log.apply(console,a))}});H.raise("Error compiling "+c+" shader, "+g[0].name)}},linkError:function(c,
b,f,h,k){c.getProgramParameter(b,c.LINK_STATUS)||(c=c.getProgramInfoLog(b),f=x(f,k),h='Error linking program with vertex shader, "'+x(h,k)[0].name+'", and fragment shader "'+f[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(h+"\n"+c),H.raise(h))},callSite:T,saveCommandRef:ca,saveDrawInfo:function(c,b,f,h){function k(c){return c?h.id(c):0}function q(c,e){P(e).forEach(function(e){c[h.id(e)]=!0})}ca(c);
c._fragId=k(c["static"].frag);c._vertId=k(c["static"].vert);var g=c._uniformSet={};q(g,b["static"]);q(g,b.dynamic);b=c._attributeSet={};q(b,f["static"]);q(b,f.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,b,f){c.texture?k(c.texture._texture.internalformat,b,"unsupported texture format for attachment"):k(c.renderbuffer._renderbuffer.format,f,"unsupported renderbuffer format for attachment")},guessCommand:G,
texture2D:function(c,b,f){var h=b.width,k=b.height,q=b.channels;H(0<h&&h<=f.maxTextureSize&&0<k&&k<=f.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||H(!(h&h-1)&&!!h&&!(k&k-1)&&!!k,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==h&&1!==k&&H(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(H(!(h&h-1)&&!!h&&!(k&k-1)&&!!k,"texture must be a square power of 2 to support mipmapping"),
H(b.mipmask===(h<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>f.extensions.indexOf("oes_texture_float_linear")&&H(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),H(!c.genMipmaps,"mipmap generation not supported with float textures"));var g=b.images;for(f=0;16>f;++f)if(g[f]){var d=h>>f,e=k>>f;H(b.mipmask&1<<f,"missing mipmap data");var R=g[f];H(R.width===d&&R.height===e,"invalid shape for mip images");H(R.format===b.format&&R.internalformat===
b.internalformat&&R.type===b.type,"incompatible type for mip image");!R.compressed&&R.data&&(d=Math.ceil(y(R.type,q)*d/R.unpackAlignment)*R.unpackAlignment,H(R.data.byteLength===d*e,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||H(0===(b.mipmask&1<<f),"extra mipmap data");b.compressed&&H(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,b,f,h){var k=c.width,q=c.height,g=c.channels;H(0<k&&k<=h.maxTextureSize&&
0<q&&q<=h.maxTextureSize,"invalid texture shape");H(k===q,"cube map must be square");H(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(h=0;h<f.length;++h){var d=f[h];H(d.width===k&&d.height===q,"inconsistent cube map face shape");b.genMipmaps&&(H(!d.compressed,"can not generate mipmap for compressed textures"),H(1===d.mipmask,"can not specify mipmaps and generate mipmaps"));for(var e=d.images,R=0;16>R;++R){var a=e[R];if(a){var u=k>>R,t=q>>R;H(d.mipmask&1<<R,"missing mipmap data");
H(a.width===u&&a.height===t,"invalid shape for mip images");H(a.format===c.format&&a.internalformat===c.internalformat&&a.type===c.type,"incompatible type for mip image");a.compressed||a.data&&H(a.data.byteLength===u*t*Math.max(y(a.type,g),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(W,ia,fb){ia.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(W,ia,fb){function d(g){return Array.prototype.slice.call(g)}function ba(g){return d(g).join("")}var H=W("./extend"),J=W("./compiled-fns");ia.exports=function(){function g(){var k=[],q=[];return H(function(){k.push.apply(k,d(arguments))},{def:function(){var g="v"+f;f++;q.push(g);0<arguments.length&&(k.push(g,"="),k.push.apply(k,d(arguments)),k.push(";"));return g},toString:function(){return ba([0<q.length?"var "+q.join(",")+";":"",ba(k)])}})}function k(){function f(g,
d){q(g,d,"=",k.def(g,d),";")}var k=g(),q=g(),J=k.toString,D=q.toString;return H(function(){k.apply(k,d(arguments))},{def:k.def,entry:k,exit:q,save:f,set:function(q,g,d){f(q,g);k(q,g,"=",d,";")},toString:function(){return J()+D()}})}var q=0,f=0,B={},D=g(),G={};return{global:D,link:function(f){var k="$"+q,g=!1;"object"===typeof f&&f.name&&(k=f.name.replace(/ /g,"_"),g=!0);if(k in B)return k;B[k]=f;g||q++;return k},block:g,proc:function(f,q){function g(){var f="a"+d.length;d.push(f);return f}var d=[];
q=q||0;for(var J=0;J<q;++J)g();var J=k(),u=J.toString;return G[f]=H(J,{arg:g,toString:function(){return ba(["function(",d.join(),"){",u(),"}"])}})},scope:k,cond:function(){var f=ba(arguments),q=k(),g=k(),J=q.toString,D=g.toString;return H(q,{then:function(){q.apply(q,d(arguments));return this},"else":function(){g.apply(g,d(arguments));return this},toString:function(){var k=D();k&&(k="else{"+k+"}");return ba(["if(",f,"){",J(),"}",k])}})},compile:function(){var f=[],k=[];Object.keys(B).sort(function(f,
k){var q="$"===f.charAt(0),g="$"===k.charAt(0);return q||g?q&&g?+f.slice(1)<+k.slice(1)?-1:1:q&&!g?-1:1:f.localeCompare(k)}).forEach(function(q){var g=B[q];f.push(q);k.push(g)});for(var q=0,g=f.length-1;-1<g;g--)if("$"===f[g].charAt(0)){q=g;break}var d=['"use strict";',D,"return {"];Object.keys(G).forEach(function(f){d.push('"',f,'":',G[f].toString(),",")});d.push("}");var g=ba(d).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),q=f.slice(q).join(),u=J[q];if(!u)throw console.log("src code is:"),
console.log(g),console.log("compiled values:",k),console.log("linked names:",f),console.log("Keys available:",Object.keys(J)),console.log("Key:",q),console.log('"'+q+'": function('+f.join(", ")+") \n{\n"+g+"\n},"),Error("missing precompiled function with key: "+q);return u.apply(null,k)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(W,ia,fb){ia.exports={$0:function(d){var ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C;ba=d.attributes;H=d.current;J=d.framebuffer;g=d.gl;k=d.next;
q=d.vao;f=k.blend_color;B=H.blend_color;D=k.blend_equation;G=H.blend_equation;T=k.blend_func;x=H.blend_func;t=k.colorMask;l=H.colorMask;ca=k.depth_range;u=H.depth_range;N=k.polygonOffset_offset;y=H.polygonOffset_offset;P=k.sample_coverage;ga=H.sample_coverage;c=k.scissor_box;b=H.scissor_box;S=k.stencil_func;r=H.stencil_func;Z=k.stencil_opBack;h=H.stencil_opBack;w=k.stencil_opFront;V=H.stencil_opFront;E=k.viewport;C=H.viewport;return{poll:function(){var e,q,a,d,A,ba,db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,
M,ma;H.dirty=!1;q=k.blend_enable;a=k.cull_enable;d=k.depth_enable;A=k.dither;ba=k.polygonOffset_enable;db=k.sample_alpha;X=k.sample_enable;ea=k.scissor_enable;Q=k.stencil_enable;O=k.cull_face;z=H.cull_face;p=k.depth_func;L=H.depth_func;K=k.depth_mask;za=H.depth_mask;na=k.frontFace;n=H.frontFace;F=k.lineWidth;aa=H.lineWidth;M=k.stencil_mask;ma=H.stencil_mask;e=J.next;e!==J.cur&&(e?g.bindFramebuffer(36160,e.framebuffer):g.bindFramebuffer(36160,null),J.cur=e);q!==H.blend_enable&&(q?g.enable(3042):g.disable(3042),
H.blend_enable=q);a!==H.cull_enable&&(a?g.enable(2884):g.disable(2884),H.cull_enable=a);d!==H.depth_enable&&(d?g.enable(2929):g.disable(2929),H.depth_enable=d);A!==H.dither&&(A?g.enable(3024):g.disable(3024),H.dither=A);ba!==H.polygonOffset_enable&&(ba?g.enable(32823):g.disable(32823),H.polygonOffset_enable=ba);db!==H.sample_alpha&&(db?g.enable(32926):g.disable(32926),H.sample_alpha=db);X!==H.sample_enable&&(X?g.enable(32928):g.disable(32928),H.sample_enable=X);ea!==H.scissor_enable&&(ea?g.enable(3089):
g.disable(3089),H.scissor_enable=ea);Q!==H.stencil_enable&&(Q?g.enable(2960):g.disable(2960),H.stencil_enable=Q);if(f[0]!==B[0]||f[1]!==B[1]||f[2]!==B[2]||f[3]!==B[3])g.blendColor(f[0],f[1],f[2],f[3]),B[0]=f[0],B[1]=f[1],B[2]=f[2],B[3]=f[3];if(D[0]!==G[0]||D[1]!==G[1])g.blendEquationSeparate(D[0],D[1]),G[0]=D[0],G[1]=D[1];if(T[0]!==x[0]||T[1]!==x[1]||T[2]!==x[2]||T[3]!==x[3])g.blendFuncSeparate(T[0],T[1],T[2],T[3]),x[0]=T[0],x[1]=T[1],x[2]=T[2],x[3]=T[3];if(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||
t[3]!==l[3])g.colorMask(t[0],t[1],t[2],t[3]),l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3];O!==z&&(g.cullFace(O),H.cull_face=O);p!==L&&(g.depthFunc(p),H.depth_func=p);K!==za&&(g.depthMask(K),H.depth_mask=K);if(ca[0]!==u[0]||ca[1]!==u[1])g.depthRange(ca[0],ca[1]),u[0]=ca[0],u[1]=ca[1];na!==n&&(g.frontFace(na),H.frontFace=na);F!==aa&&(g.lineWidth(F),H.lineWidth=F);if(N[0]!==y[0]||N[1]!==y[1])g.polygonOffset(N[0],N[1]),y[0]=N[0],y[1]=N[1];if(P[0]!==ga[0]||P[1]!==ga[1])g.sampleCoverage(P[0],P[1]),ga[0]=P[0],
ga[1]=P[1];if(c[0]!==b[0]||c[1]!==b[1]||c[2]!==b[2]||c[3]!==b[3])g.scissor(c[0],c[1],c[2],c[3]),b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3];if(S[0]!==r[0]||S[1]!==r[1]||S[2]!==r[2])g.stencilFunc(S[0],S[1],S[2]),r[0]=S[0],r[1]=S[1],r[2]=S[2];M!==ma&&(g.stencilMask(M),H.stencil_mask=M);if(Z[0]!==h[0]||Z[1]!==h[1]||Z[2]!==h[2]||Z[3]!==h[3])g.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]),h[0]=Z[0],h[1]=Z[1],h[2]=Z[2],h[3]=Z[3];if(w[0]!==V[0]||w[1]!==V[1]||w[2]!==V[2]||w[3]!==V[3])g.stencilOpSeparate(w[0],w[1],w[2],
w[3]),V[0]=w[0],V[1]=w[1],V[2]=w[2],V[3]=w[3];if(E[0]!==C[0]||E[1]!==C[1]||E[2]!==C[2]||E[3]!==C[3])g.viewport(E[0],E[1],E[2],E[3]),C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3]},refresh:function(){var e,R,a,d,A,ta,db,X,ea,Q,O,z,p,L,K,za;H.dirty=!1;R=k.blend_enable;a=k.cull_enable;d=k.depth_enable;A=k.dither;ta=k.polygonOffset_enable;db=k.sample_alpha;X=k.sample_enable;ea=k.scissor_enable;Q=k.stencil_enable;O=k.cull_face;z=k.depth_func;p=k.depth_mask;L=k.frontFace;K=k.lineWidth;za=k.stencil_mask;(e=J.next)?
g.bindFramebuffer(36160,e.framebuffer):g.bindFramebuffer(36160,null);J.cur=e;e=ba[0];e.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(0,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[1];e.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(1,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,
e.x,e.y,e.z,e.w),e.buffer=null);e=ba[2];e.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(2,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[3];e.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(3,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,e.x,e.y,e.z,e.w),e.buffer=null);
e=ba[4];e.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(4,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[5];e.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(5,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[6];e.buffer?(g.enableVertexAttribArray(6),
g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(6,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[7];e.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(7,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[8];e.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,e.buffer.buffer),
g.vertexAttribPointer(8,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[9];e.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(9,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[10];e.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(10,e.size,
e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[11];e.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(11,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[12];e.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(12,e.size,e.type,e.normalized,
e.stride,e.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[13];e.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(13,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[14];e.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(14,e.size,e.type,e.normalized,e.stride,e.offset)):
(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[15];e.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(15,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,e.x,e.y,e.z,e.w),e.buffer=null);q.currentVAO=null;q.setVAO(q.targetVAO);R?g.enable(3042):g.disable(3042);H.blend_enable=R;a?g.enable(2884):g.disable(2884);H.cull_enable=a;d?g.enable(2929):g.disable(2929);H.depth_enable=
d;A?g.enable(3024):g.disable(3024);H.dither=A;ta?g.enable(32823):g.disable(32823);H.polygonOffset_enable=ta;db?g.enable(32926):g.disable(32926);H.sample_alpha=db;X?g.enable(32928):g.disable(32928);H.sample_enable=X;ea?g.enable(3089):g.disable(3089);H.scissor_enable=ea;Q?g.enable(2960):g.disable(2960);H.stencil_enable=Q;g.blendColor(f[0],f[1],f[2],f[3]);B[0]=f[0];B[1]=f[1];B[2]=f[2];B[3]=f[3];g.blendEquationSeparate(D[0],D[1]);G[0]=D[0];G[1]=D[1];g.blendFuncSeparate(T[0],T[1],T[2],T[3]);x[0]=T[0];
x[1]=T[1];x[2]=T[2];x[3]=T[3];g.colorMask(t[0],t[1],t[2],t[3]);l[0]=t[0];l[1]=t[1];l[2]=t[2];l[3]=t[3];g.cullFace(O);H.cull_face=O;g.depthFunc(z);H.depth_func=z;g.depthMask(p);H.depth_mask=p;g.depthRange(ca[0],ca[1]);u[0]=ca[0];u[1]=ca[1];g.frontFace(L);H.frontFace=L;g.lineWidth(K);H.lineWidth=K;g.polygonOffset(N[0],N[1]);y[0]=N[0];y[1]=N[1];g.sampleCoverage(P[0],P[1]);ga[0]=P[0];ga[1]=P[1];g.scissor(c[0],c[1],c[2],c[3]);b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];g.stencilFunc(S[0],S[1],S[2]);r[0]=S[0];
r[1]=S[1];r[2]=S[2];g.stencilMask(za);H.stencil_mask=za;g.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]);h[0]=Z[0];h[1]=Z[1];h[2]=Z[2];h[3]=Z[3];g.stencilOpSeparate(w[0],w[1],w[2],w[3]);V[0]=w[0];V[1]=w[1];V[2]=w[2];V[3]=w[3];g.viewport(E[0],E[1],E[2],E[3]);C[0]=E[0];C[1]=E[1];C[2]=E[2];C[3]=E[3]}}},$3:function(d,ba,H,J){var g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta;g=d.context;k=d.current;q=d.framebuffer;f=d.gl;B=d.next;D=d.shader;G=d.vao;T=B.blend_color;x=k.blend_color;t=B.blend_equation;
l=k.blend_equation;ca=B.blend_func;u=k.blend_func;N=B.colorMask;y=k.colorMask;P=B.depth_range;ga=k.depth_range;c=B.polygonOffset_offset;b=k.polygonOffset_offset;S=B.sample_coverage;r=k.sample_coverage;Z=B.scissor_box;h=k.scissor_box;w=B.stencil_func;V=k.stencil_func;E=B.stencil_opBack;C=k.stencil_opBack;e=B.stencil_opFront;R=k.stencil_opFront;a=B.viewport;sa=k.viewport;A={};ta={};return{batch:function(g,d){var A,Q,O,z,p;A=q.next;A!==q.cur&&(A?f.bindFramebuffer(36160,A.framebuffer):f.bindFramebuffer(36160,
null),q.cur=A);if(k.dirty){A=B.dither;A!==k.dither&&(A?f.enable(3024):f.disable(3024),k.dither=A);A=B.blend_enable;A!==k.blend_enable&&(A?f.enable(3042):f.disable(3042),k.blend_enable=A);A=T[0];O=T[1];z=T[2];p=T[3];if(A!==x[0]||O!==x[1]||z!==x[2]||p!==x[3])f.blendColor(A,O,z,p),x[0]=A,x[1]=O,x[2]=z,x[3]=p;A=t[0];O=t[1];if(A!==l[0]||O!==l[1])f.blendEquationSeparate(A,O),l[0]=A,l[1]=O;A=ca[0];O=ca[1];z=ca[2];p=ca[3];if(A!==u[0]||O!==u[1]||z!==u[2]||p!==u[3])f.blendFuncSeparate(A,O,z,p),u[0]=A,u[1]=
O,u[2]=z,u[3]=p;A=B.depth_enable;A!==k.depth_enable&&(A?f.enable(2929):f.disable(2929),k.depth_enable=A);A=B.depth_func;A!==k.depth_func&&(f.depthFunc(A),k.depth_func=A);A=P[0];O=P[1];if(A!==ga[0]||O!==ga[1])f.depthRange(A,O),ga[0]=A,ga[1]=O;A=B.depth_mask;A!==k.depth_mask&&(f.depthMask(A),k.depth_mask=A);A=N[0];O=N[1];z=N[2];p=N[3];if(A!==y[0]||O!==y[1]||z!==y[2]||p!==y[3])f.colorMask(A,O,z,p),y[0]=A,y[1]=O,y[2]=z,y[3]=p;A=B.cull_enable;A!==k.cull_enable&&(A?f.enable(2884):f.disable(2884),k.cull_enable=
A);A=B.cull_face;A!==k.cull_face&&(f.cullFace(A),k.cull_face=A);A=B.frontFace;A!==k.frontFace&&(f.frontFace(A),k.frontFace=A);A=B.lineWidth;A!==k.lineWidth&&(f.lineWidth(A),k.lineWidth=A);A=B.polygonOffset_enable;A!==k.polygonOffset_enable&&(A?f.enable(32823):f.disable(32823),k.polygonOffset_enable=A);A=c[0];O=c[1];if(A!==b[0]||O!==b[1])f.polygonOffset(A,O),b[0]=A,b[1]=O;A=B.sample_alpha;A!==k.sample_alpha&&(A?f.enable(32926):f.disable(32926),k.sample_alpha=A);A=B.sample_enable;A!==k.sample_enable&&
(A?f.enable(32928):f.disable(32928),k.sample_enable=A);A=S[0];O=S[1];if(A!==r[0]||O!==r[1])f.sampleCoverage(A,O),r[0]=A,r[1]=O;A=B.stencil_enable;A!==k.stencil_enable&&(A?f.enable(2960):f.disable(2960),k.stencil_enable=A);A=B.stencil_mask;A!==k.stencil_mask&&(f.stencilMask(A),k.stencil_mask=A);A=w[0];O=w[1];z=w[2];if(A!==V[0]||O!==V[1]||z!==V[2])f.stencilFunc(A,O,z),V[0]=A,V[1]=O,V[2]=z;A=e[0];O=e[1];z=e[2];p=e[3];if(A!==R[0]||O!==R[1]||z!==R[2]||p!==R[3])f.stencilOpSeparate(A,O,z,p),R[0]=A,R[1]=
O,R[2]=z,R[3]=p;A=E[0];O=E[1];z=E[2];p=E[3];if(A!==C[0]||O!==C[1]||z!==C[2]||p!==C[3])f.stencilOpSeparate(A,O,z,p),C[0]=A,C[1]=O,C[2]=z,C[3]=p;A=B.scissor_enable;A!==k.scissor_enable&&(A?f.enable(3089):f.disable(3089),k.scissor_enable=A);A=Z[0];O=Z[1];z=Z[2];p=Z[3];if(A!==h[0]||O!==h[1]||z!==h[2]||p!==h[3])f.scissor(A,O,z,p),h[0]=A,h[1]=O,h[2]=z,h[3]=p;A=a[0];O=a[1];z=a[2];p=a[3];if(A!==sa[0]||O!==sa[1]||z!==sa[2]||p!==sa[3])f.viewport(A,O,z,p),sa[0]=A,sa[1]=O,sa[2]=z,sa[3]=p;k.dirty=!1}if(A=k.profile)Q=
performance.now(),ba.count+=d;O=D.program(D.vert,D.frag);f.useProgram(O.program);G.setVAO(null);z=O.id;(p=ta[z])||(p=ta[z]=J(O));p.call(this,g,d);G.setVAO(null);A&&(ba.cpuTime+=performance.now()-Q)},draw:function(g){var d,J,Q,O,z;d=q.next;d!==q.cur&&(d?f.bindFramebuffer(36160,d.framebuffer):f.bindFramebuffer(36160,null),q.cur=d);if(k.dirty){d=B.dither;d!==k.dither&&(d?f.enable(3024):f.disable(3024),k.dither=d);d=B.blend_enable;d!==k.blend_enable&&(d?f.enable(3042):f.disable(3042),k.blend_enable=d);
d=T[0];Q=T[1];O=T[2];z=T[3];if(d!==x[0]||Q!==x[1]||O!==x[2]||z!==x[3])f.blendColor(d,Q,O,z),x[0]=d,x[1]=Q,x[2]=O,x[3]=z;d=t[0];Q=t[1];if(d!==l[0]||Q!==l[1])f.blendEquationSeparate(d,Q),l[0]=d,l[1]=Q;d=ca[0];Q=ca[1];O=ca[2];z=ca[3];if(d!==u[0]||Q!==u[1]||O!==u[2]||z!==u[3])f.blendFuncSeparate(d,Q,O,z),u[0]=d,u[1]=Q,u[2]=O,u[3]=z;d=B.depth_enable;d!==k.depth_enable&&(d?f.enable(2929):f.disable(2929),k.depth_enable=d);d=B.depth_func;d!==k.depth_func&&(f.depthFunc(d),k.depth_func=d);d=P[0];Q=P[1];if(d!==
ga[0]||Q!==ga[1])f.depthRange(d,Q),ga[0]=d,ga[1]=Q;d=B.depth_mask;d!==k.depth_mask&&(f.depthMask(d),k.depth_mask=d);d=N[0];Q=N[1];O=N[2];z=N[3];if(d!==y[0]||Q!==y[1]||O!==y[2]||z!==y[3])f.colorMask(d,Q,O,z),y[0]=d,y[1]=Q,y[2]=O,y[3]=z;d=B.cull_enable;d!==k.cull_enable&&(d?f.enable(2884):f.disable(2884),k.cull_enable=d);d=B.cull_face;d!==k.cull_face&&(f.cullFace(d),k.cull_face=d);d=B.frontFace;d!==k.frontFace&&(f.frontFace(d),k.frontFace=d);d=B.lineWidth;d!==k.lineWidth&&(f.lineWidth(d),k.lineWidth=
d);d=B.polygonOffset_enable;d!==k.polygonOffset_enable&&(d?f.enable(32823):f.disable(32823),k.polygonOffset_enable=d);d=c[0];Q=c[1];if(d!==b[0]||Q!==b[1])f.polygonOffset(d,Q),b[0]=d,b[1]=Q;d=B.sample_alpha;d!==k.sample_alpha&&(d?f.enable(32926):f.disable(32926),k.sample_alpha=d);d=B.sample_enable;d!==k.sample_enable&&(d?f.enable(32928):f.disable(32928),k.sample_enable=d);d=S[0];Q=S[1];if(d!==r[0]||Q!==r[1])f.sampleCoverage(d,Q),r[0]=d,r[1]=Q;d=B.stencil_enable;d!==k.stencil_enable&&(d?f.enable(2960):
f.disable(2960),k.stencil_enable=d);d=B.stencil_mask;d!==k.stencil_mask&&(f.stencilMask(d),k.stencil_mask=d);d=w[0];Q=w[1];O=w[2];if(d!==V[0]||Q!==V[1]||O!==V[2])f.stencilFunc(d,Q,O),V[0]=d,V[1]=Q,V[2]=O;d=e[0];Q=e[1];O=e[2];z=e[3];if(d!==R[0]||Q!==R[1]||O!==R[2]||z!==R[3])f.stencilOpSeparate(d,Q,O,z),R[0]=d,R[1]=Q,R[2]=O,R[3]=z;d=E[0];Q=E[1];O=E[2];z=E[3];if(d!==C[0]||Q!==C[1]||O!==C[2]||z!==C[3])f.stencilOpSeparate(d,Q,O,z),C[0]=d,C[1]=Q,C[2]=O,C[3]=z;d=B.scissor_enable;d!==k.scissor_enable&&(d?
f.enable(3089):f.disable(3089),k.scissor_enable=d);d=Z[0];Q=Z[1];O=Z[2];z=Z[3];if(d!==h[0]||Q!==h[1]||O!==h[2]||z!==h[3])f.scissor(d,Q,O,z),h[0]=d,h[1]=Q,h[2]=O,h[3]=z;d=a[0];Q=a[1];O=a[2];z=a[3];if(d!==sa[0]||Q!==sa[1]||O!==sa[2]||z!==sa[3])f.viewport(d,Q,O,z),sa[0]=d,sa[1]=Q,sa[2]=O,sa[3]=z;k.dirty=!1}if(d=k.profile)J=performance.now(),ba.count++;Q=D.program(D.vert,D.frag);f.useProgram(Q.program);G.setVAO(null);O=Q.id;(z=A[O])||(z=A[O]=H(Q));z.call(this,g);G.setVAO(null);d&&(ba.cpuTime+=performance.now()-
J)},scope:function(a,e,c){var b,f;if(b=k.profile)f=performance.now(),ba.count++;e(g,a,c);b&&(ba.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,
db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,Bd,Hb,ha,I,ra,Fa,qa,ya,Ga){var la,Y,ua,Ja,Da,mb,da,xd,ac,Ha,bc,Sb,W,Gd,me,Wd,ze,zd,Vd,pe,fe,Dd,qd,ge,ae,Ce,Ye,Ze,Hd,Ae,se,Yd,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua;la=d.attributes;Y=d.context;ua=d.current;Ja=d.draw;Da=d.elements;mb=d.framebuffer;da=d.gl;xd=d.next;ac=d.shader;Ha=d.uniforms;bc=d.vao;Sb=xd.blend_color;W=ua.blend_color;Gd=xd.blend_equation;
me=ua.blend_equation;Wd=xd.blend_func;ze=ua.blend_func;zd=xd.colorMask;Vd=ua.colorMask;pe=xd.depth_range;fe=ua.depth_range;Dd=xd.polygonOffset_offset;qd=ua.polygonOffset_offset;ge=xd.sample_coverage;ae=ua.sample_coverage;Ce=xd.scissor_box;Ye=ua.scissor_box;Ze=xd.stencil_func;Hd=ua.stencil_func;Ae=xd.stencil_opBack;se=ua.stencil_opBack;Yd=xd.stencil_opFront;Ad=ua.stencil_opFront;Zd=xd.viewport;md=ua.viewport;bd={};rd={};Lc=new Float32Array(16);od=new Float32Array(16);Gc=new Float32Array(16);fd=new Float32Array(16);
Pc=new Float32Array(16);Wc=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);Dc=new Float32Array(16);xb=new Float32Array(16);xc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);nc=new Float32Array(16);Hc=new Float32Array(16);Xc=new Float32Array(16);Vc=new Float32Array(16);Ec=new Float32Array(16);gc=new Float32Array(16);Ic=new Float32Array(16);qc=new Float32Array(16);rc=new Float32Array(16);oc=new Float32Array(16);hc=new Float32Array(16);Za=new Float32Array(16);
cc=new Float32Array(16);yb=new Float32Array(16);bb=new Float32Array(16);Nb=new Float32Array(16);$a=new Float32Array(16);ob=new Float32Array(16);Ua=new Float32Array(16);return{batch:function(a,e){var c,b,h,r;c=mb.next;c!==mb.cur&&(c?da.bindFramebuffer(36160,c.framebuffer):da.bindFramebuffer(36160,null),mb.cur=c);if(ua.dirty){var d,R,w,A,E,C,S,P,H,ba,Z,ga,V,Ha,sa,ta,Sb,ac,La,Fb,Pc,Bb,Cb,Oa,Ce;d=zd[0];R=zd[1];w=zd[2];A=zd[3];if(d!==Vd[0]||R!==Vd[1]||w!==Vd[2]||A!==Vd[3])da.colorMask(d,R,w,A),Vd[0]=d,
Vd[1]=R,Vd[2]=w,Vd[3]=A;E=xd.frontFace;E!==ua.frontFace&&(da.frontFace(E),ua.frontFace=E);C=xd.polygonOffset_enable;C!==ua.polygonOffset_enable&&(C?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=C);S=Dd[0];P=Dd[1];if(S!==qd[0]||P!==qd[1])da.polygonOffset(S,P),qd[0]=S,qd[1]=P;H=xd.sample_alpha;H!==ua.sample_alpha&&(H?da.enable(32926):da.disable(32926),ua.sample_alpha=H);ba=xd.sample_enable;ba!==ua.sample_enable&&(ba?da.enable(32928):da.disable(32928),ua.sample_enable=ba);Z=ge[0];ga=ge[1];
if(Z!==ae[0]||ga!==ae[1])da.sampleCoverage(Z,ga),ae[0]=Z,ae[1]=ga;V=xd.stencil_enable;V!==ua.stencil_enable&&(V?da.enable(2960):da.disable(2960),ua.stencil_enable=V);Ha=xd.stencil_mask;Ha!==ua.stencil_mask&&(da.stencilMask(Ha),ua.stencil_mask=Ha);sa=Ze[0];ta=Ze[1];Sb=Ze[2];if(sa!==Hd[0]||ta!==Hd[1]||Sb!==Hd[2])da.stencilFunc(sa,ta,Sb),Hd[0]=sa,Hd[1]=ta,Hd[2]=Sb;ac=Yd[0];La=Yd[1];Fb=Yd[2];Pc=Yd[3];if(ac!==Ad[0]||La!==Ad[1]||Fb!==Ad[2]||Pc!==Ad[3])da.stencilOpSeparate(ac,La,Fb,Pc),Ad[0]=ac,Ad[1]=La,
Ad[2]=Fb,Ad[3]=Pc;Bb=Ae[0];Cb=Ae[1];Oa=Ae[2];Ce=Ae[3];if(Bb!==se[0]||Cb!==se[1]||Oa!==se[2]||Ce!==se[3])da.stencilOpSeparate(Bb,Cb,Oa,Ce),se[0]=Bb,se[1]=Cb,se[2]=Oa,se[3]=Ce}da.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);me[0]=32774;me[1]=32774;da.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;da.depthFunc(513);
ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);fe[0]=0;fe[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;da.enable(3089);ua.scissor_enable=!0;b=ua.profile;ua.profile=!1;da.useProgram(db.program);var Qa,xb,Wc,Ma,nc,Xa,Gc,Wd,lb,Na,Dc,Pa,ub,vb,Sa,nb,od,Gd,Hc,ab,Jc,fd,Wa,Lc,Ab,Ya,pe,xc,Wb,Qb,Zd,Rb,Xc;bc.setVAO(null);Qa=Aa.location;xb=la[Qa];xb.buffer||da.enableVertexAttribArray(Qa);if(xb.type!==J.dtype||4!==xb.size||xb.buffer!==J||!1!==xb.normalized||0!==xb.offset||
0!==xb.stride)da.bindBuffer(34962,J.buffer),da.vertexAttribPointer(Qa,4,J.dtype,!1,0,0),xb.type=J.dtype,xb.size=4,xb.buffer=J,xb.normalized=!1,xb.offset=0,xb.stride=0;Wc=Ba.location;Ma=la[Wc];Ma.buffer||da.enableVertexAttribArray(Wc);if(Ma.type!==g.dtype||4!==Ma.size||Ma.buffer!==g||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)da.bindBuffer(34962,g.buffer),da.vertexAttribPointer(Wc,4,g.dtype,!1,0,0),Ma.type=g.dtype,Ma.size=4,Ma.buffer=g,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;nc=ja.location;
Xa=la[nc];Xa.buffer||da.enableVertexAttribArray(nc);if(Xa.type!==k.dtype||4!==Xa.size||Xa.buffer!==k||!1!==Xa.normalized||0!==Xa.offset||0!==Xa.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(nc,4,k.dtype,!1,0,0),Xa.type=k.dtype,Xa.size=4,Xa.buffer=k,Xa.normalized=!1,Xa.offset=0,Xa.stride=0;Gc=Yb.location;Wd=la[Gc];Wd.buffer||da.enableVertexAttribArray(Gc);if(Wd.type!==q.dtype||4!==Wd.size||Wd.buffer!==q||!1!==Wd.normalized||0!==Wd.offset||0!==Wd.stride)da.bindBuffer(34962,q.buffer),da.vertexAttribPointer(Gc,
4,q.dtype,!1,0,0),Wd.type=q.dtype,Wd.size=4,Wd.buffer=q,Wd.normalized=!1,Wd.offset=0,Wd.stride=0;lb=Ta.location;Na=la[lb];Na.buffer||da.enableVertexAttribArray(lb);if(Na.type!==f.dtype||4!==Na.size||Na.buffer!==f||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)da.bindBuffer(34962,f.buffer),da.vertexAttribPointer(lb,4,f.dtype,!1,0,0),Na.type=f.dtype,Na.size=4,Na.buffer=f,Na.normalized=!1,Na.offset=0,Na.stride=0;Dc=v.location;Pa=la[Dc];Pa.buffer||da.enableVertexAttribArray(Dc);if(Pa.type!==B.dtype||
4!==Pa.size||Pa.buffer!==B||!1!==Pa.normalized||0!==Pa.offset||0!==Pa.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(Dc,4,B.dtype,!1,0,0),Pa.type=B.dtype,Pa.size=4,Pa.buffer=B,Pa.normalized=!1,Pa.offset=0,Pa.stride=0;ub=m.location;vb=la[ub];vb.buffer||da.enableVertexAttribArray(ub);if(vb.type!==D.dtype||4!==vb.size||vb.buffer!==D||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)da.bindBuffer(34962,D.buffer),da.vertexAttribPointer(ub,4,D.dtype,!1,0,0),vb.type=D.dtype,vb.size=4,vb.buffer=
D,vb.normalized=!1,vb.offset=0,vb.stride=0;Sa=U.location;nb=la[Sa];nb.buffer||da.enableVertexAttribArray(Sa);if(nb.type!==G.dtype||4!==nb.size||nb.buffer!==G||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)da.bindBuffer(34962,G.buffer),da.vertexAttribPointer(Sa,4,G.dtype,!1,0,0),nb.type=G.dtype,nb.size=4,nb.buffer=G,nb.normalized=!1,nb.offset=0,nb.stride=0;od=va.location;Gd=la[od];Gd.buffer||da.enableVertexAttribArray(od);if(Gd.type!==T.dtype||4!==Gd.size||Gd.buffer!==T||!1!==Gd.normalized||0!==
Gd.offset||0!==Gd.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(od,4,T.dtype,!1,0,0),Gd.type=T.dtype,Gd.size=4,Gd.buffer=T,Gd.normalized=!1,Gd.offset=0,Gd.stride=0;Hc=wa.location;ab=la[Hc];ab.buffer||da.enableVertexAttribArray(Hc);if(ab.type!==x.dtype||4!==ab.size||ab.buffer!==x||!1!==ab.normalized||0!==ab.offset||0!==ab.stride)da.bindBuffer(34962,x.buffer),da.vertexAttribPointer(Hc,4,x.dtype,!1,0,0),ab.type=x.dtype,ab.size=4,ab.buffer=x,ab.normalized=!1,ab.offset=0,ab.stride=0;Jc=Bd.location;
fd=la[Jc];fd.buffer||da.enableVertexAttribArray(Jc);if(fd.type!==t.dtype||4!==fd.size||fd.buffer!==t||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)da.bindBuffer(34962,t.buffer),da.vertexAttribPointer(Jc,4,t.dtype,!1,0,0),fd.type=t.dtype,fd.size=4,fd.buffer=t,fd.normalized=!1,fd.offset=0,fd.stride=0;Wa=Hb.location;Lc=la[Wa];Lc.buffer||da.enableVertexAttribArray(Wa);if(Lc.type!==l.dtype||4!==Lc.size||Lc.buffer!==l||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)da.bindBuffer(34962,l.buffer),da.vertexAttribPointer(Wa,
4,l.dtype,!1,0,0),Lc.type=l.dtype,Lc.size=4,Lc.buffer=l,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=ha.location;Ya=la[Ab];Ya.buffer||da.enableVertexAttribArray(Ab);if(Ya.type!==ca.dtype||4!==Ya.size||Ya.buffer!==ca||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)da.bindBuffer(34962,ca.buffer),da.vertexAttribPointer(Ab,4,ca.dtype,!1,0,0),Ya.type=ca.dtype,Ya.size=4,Ya.buffer=ca,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;pe=I.location;xc=la[pe];xc.buffer||da.enableVertexAttribArray(pe);if(xc.type!==
u.dtype||4!==xc.size||xc.buffer!==u||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(pe,4,u.dtype,!1,0,0),xc.type=u.dtype,xc.size=4,xc.buffer=u,xc.normalized=!1,xc.offset=0,xc.stride=0;Wb=ra.location;Qb=la[Wb];Qb.buffer||da.enableVertexAttribArray(Wb);if(Qb.type!==N.dtype||4!==Qb.size||Qb.buffer!==N||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)da.bindBuffer(34962,N.buffer),da.vertexAttribPointer(Wb,4,N.dtype,!1,0,0),Qb.type=N.dtype,Qb.size=
4,Qb.buffer=N,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Zd=ea.location;Rb=la[Zd];Rb.buffer||da.enableVertexAttribArray(Zd);if(Rb.type!==y.dtype||4!==Rb.size||Rb.buffer!==y||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)da.bindBuffer(34962,y.buffer),da.vertexAttribPointer(Zd,4,y.dtype,!1,0,0),Rb.type=y.dtype,Rb.size=4,Rb.buffer=y,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;da.uniform1i(Fa.location,X.bind());(Xc=Ja.elements)?da.bindBuffer(34963,Xc.buffer.buffer):bc.currentVAO&&(Xc=Da.getElements(bc.currentVAO.elements))&&
da.bindBuffer(34963,Xc.buffer.buffer);for(h=0;h<e;++h){r=a[h];var Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ia,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de;bd.height=r.viewportHeight;bd.width=r.viewportWidth;bd.x=r.viewportX;bd.y=r.viewportY;Fc=bd.x|0;Ed=bd.y|0;Nc="width"in bd?bd.width|0:Y.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:Y.framebufferHeight-Ed;td=Y.viewportWidth;Y.viewportWidth=Nc;pc=Y.viewportHeight;
Y.viewportHeight=Yc;da.viewport(Fc,Ed,Nc,Yc);md[0]=Fc;md[1]=Ed;md[2]=Nc;md[3]=Yc;rd.height=r.scissorHeight;rd.width=r.scissorWidth;rd.x=r.scissorX;rd.y=r.scissorY;wc=rd.x|0;jc=rd.y|0;cb="width"in rd?rd.width|0:Y.framebufferWidth-wc;tc="height"in rd?rd.height|0:Y.framebufferHeight-jc;da.scissor(wc,jc,cb,tc);Ye[0]=wc;Ye[1]=jc;Ye[2]=cb;Ye[3]=tc;Tb=r.dim0A;da.uniformMatrix4fv(O.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(Vc[0]=Tb[0],Vc[1]=Tb[1],Vc[2]=Tb[2],Vc[3]=Tb[3],Vc[4]=Tb[4],Vc[5]=
Tb[5],Vc[6]=Tb[6],Vc[7]=Tb[7],Vc[8]=Tb[8],Vc[9]=Tb[9],Vc[10]=Tb[10],Vc[11]=Tb[11],Vc[12]=Tb[12],Vc[13]=Tb[13],Vc[14]=Tb[14],Vc[15]=Tb[15],Vc));Xb=r.dim1A;da.uniformMatrix4fv(K.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Ec[0]=Xb[0],Ec[1]=Xb[1],Ec[2]=Xb[2],Ec[3]=Xb[3],Ec[4]=Xb[4],Ec[5]=Xb[5],Ec[6]=Xb[6],Ec[7]=Xb[7],Ec[8]=Xb[8],Ec[9]=Xb[9],Ec[10]=Xb[10],Ec[11]=Xb[11],Ec[12]=Xb[12],Ec[13]=Xb[13],Ec[14]=Xb[14],Ec[15]=Xb[15],Ec));fc=r.dim0B;da.uniformMatrix4fv(z.location,!1,Array.isArray(fc)||
fc instanceof Float32Array?fc:(gc[0]=fc[0],gc[1]=fc[1],gc[2]=fc[2],gc[3]=fc[3],gc[4]=fc[4],gc[5]=fc[5],gc[6]=fc[6],gc[7]=fc[7],gc[8]=fc[8],gc[9]=fc[9],gc[10]=fc[10],gc[11]=fc[11],gc[12]=fc[12],gc[13]=fc[13],gc[14]=fc[14],gc[15]=fc[15],gc));kc=r.dim1B;da.uniformMatrix4fv(za.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(Ic[0]=kc[0],Ic[1]=kc[1],Ic[2]=kc[2],Ic[3]=kc[3],Ic[4]=kc[4],Ic[5]=kc[5],Ic[6]=kc[6],Ic[7]=kc[7],Ic[8]=kc[8],Ic[9]=kc[9],Ic[10]=kc[10],Ic[11]=kc[11],Ic[12]=kc[12],Ic[13]=
kc[13],Ic[14]=kc[14],Ic[15]=kc[15],Ic));yc=r.dim0C;da.uniformMatrix4fv(p.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(qc[0]=yc[0],qc[1]=yc[1],qc[2]=yc[2],qc[3]=yc[3],qc[4]=yc[4],qc[5]=yc[5],qc[6]=yc[6],qc[7]=yc[7],qc[8]=yc[8],qc[9]=yc[9],qc[10]=yc[10],qc[11]=yc[11],qc[12]=yc[12],qc[13]=yc[13],qc[14]=yc[14],qc[15]=yc[15],qc));Bc=r.dim1C;da.uniformMatrix4fv(na.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(rc[0]=Bc[0],rc[1]=Bc[1],rc[2]=Bc[2],rc[3]=Bc[3],rc[4]=Bc[4],rc[5]=
Bc[5],rc[6]=Bc[6],rc[7]=Bc[7],rc[8]=Bc[8],rc[9]=Bc[9],rc[10]=Bc[10],rc[11]=Bc[11],rc[12]=Bc[12],rc[13]=Bc[13],rc[14]=Bc[14],rc[15]=Bc[15],rc));cd=r.dim0D;da.uniformMatrix4fv(L.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(oc[0]=cd[0],oc[1]=cd[1],oc[2]=cd[2],oc[3]=cd[3],oc[4]=cd[4],oc[5]=cd[5],oc[6]=cd[6],oc[7]=cd[7],oc[8]=cd[8],oc[9]=cd[9],oc[10]=cd[10],oc[11]=cd[11],oc[12]=cd[12],oc[13]=cd[13],oc[14]=cd[14],oc[15]=cd[15],oc));Qc=r.dim1D;da.uniformMatrix4fv(n.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(hc[0]=Qc[0],hc[1]=Qc[1],hc[2]=Qc[2],hc[3]=Qc[3],hc[4]=Qc[4],hc[5]=Qc[5],hc[6]=Qc[6],hc[7]=Qc[7],hc[8]=Qc[8],hc[9]=Qc[9],hc[10]=Qc[10],hc[11]=Qc[11],hc[12]=Qc[12],hc[13]=Qc[13],hc[14]=Qc[14],hc[15]=Qc[15],hc));Rc=r.loA;da.uniformMatrix4fv(Ca.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(Za[0]=Rc[0],Za[1]=Rc[1],Za[2]=Rc[2],Za[3]=Rc[3],Za[4]=Rc[4],Za[5]=Rc[5],Za[6]=Rc[6],Za[7]=Rc[7],Za[8]=Rc[8],Za[9]=Rc[9],Za[10]=Rc[10],Za[11]=Rc[11],Za[12]=Rc[12],Za[13]=
Rc[13],Za[14]=Rc[14],Za[15]=Rc[15],Za));Sc=r.hiA;da.uniformMatrix4fv(aa.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(cc[0]=Sc[0],cc[1]=Sc[1],cc[2]=Sc[2],cc[3]=Sc[3],cc[4]=Sc[4],cc[5]=Sc[5],cc[6]=Sc[6],cc[7]=Sc[7],cc[8]=Sc[8],cc[9]=Sc[9],cc[10]=Sc[10],cc[11]=Sc[11],cc[12]=Sc[12],cc[13]=Sc[13],cc[14]=Sc[14],cc[15]=Sc[15],cc));Zc=r.loB;da.uniformMatrix4fv(xa.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(yb[0]=Zc[0],yb[1]=Zc[1],yb[2]=Zc[2],yb[3]=Zc[3],yb[4]=Zc[4],yb[5]=
Zc[5],yb[6]=Zc[6],yb[7]=Zc[7],yb[8]=Zc[8],yb[9]=Zc[9],yb[10]=Zc[10],yb[11]=Zc[11],yb[12]=Zc[12],yb[13]=Zc[13],yb[14]=Zc[14],yb[15]=Zc[15],yb));ld=r.hiB;da.uniformMatrix4fv(M.location,!1,Array.isArray(ld)||ld instanceof Float32Array?ld:(bb[0]=ld[0],bb[1]=ld[1],bb[2]=ld[2],bb[3]=ld[3],bb[4]=ld[4],bb[5]=ld[5],bb[6]=ld[6],bb[7]=ld[7],bb[8]=ld[8],bb[9]=ld[9],bb[10]=ld[10],bb[11]=ld[11],bb[12]=ld[12],bb[13]=ld[13],bb[14]=ld[14],bb[15]=ld[15],bb));dd=r.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(dd)||
dd instanceof Float32Array?dd:(Nb[0]=dd[0],Nb[1]=dd[1],Nb[2]=dd[2],Nb[3]=dd[3],Nb[4]=dd[4],Nb[5]=dd[5],Nb[6]=dd[6],Nb[7]=dd[7],Nb[8]=dd[8],Nb[9]=dd[9],Nb[10]=dd[10],Nb[11]=dd[11],Nb[12]=dd[12],Nb[13]=dd[13],Nb[14]=dd[14],Nb[15]=dd[15],Nb));$c=r.hiC;da.uniformMatrix4fv(ma.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:($a[0]=$c[0],$a[1]=$c[1],$a[2]=$c[2],$a[3]=$c[3],$a[4]=$c[4],$a[5]=$c[5],$a[6]=$c[6],$a[7]=$c[7],$a[8]=$c[8],$a[9]=$c[9],$a[10]=$c[10],$a[11]=$c[11],$a[12]=$c[12],$a[13]=
$c[13],$a[14]=$c[14],$a[15]=$c[15],$a));mc=r.loD;da.uniformMatrix4fv(Ea.location,!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(ob[0]=mc[0],ob[1]=mc[1],ob[2]=mc[2],ob[3]=mc[3],ob[4]=mc[4],ob[5]=mc[5],ob[6]=mc[6],ob[7]=mc[7],ob[8]=mc[8],ob[9]=mc[9],ob[10]=mc[10],ob[11]=mc[11],ob[12]=mc[12],ob[13]=mc[13],ob[14]=mc[14],ob[15]=mc[15],ob));ec=r.hiD;da.uniformMatrix4fv(oa.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(Ua[0]=ec[0],Ua[1]=ec[1],Ua[2]=ec[2],Ua[3]=ec[3],Ua[4]=ec[4],Ua[5]=
ec[5],Ua[6]=ec[6],Ua[7]=ec[7],Ua[8]=ec[8],Ua[9]=ec[9],Ua[10]=ec[10],Ua[11]=ec[11],Ua[12]=ec[12],Ua[13]=ec[13],Ua[14]=ec[14],Ua[15]=ec[15],Ua));ad=r.resolution;Uc=ad[0];zc=ad[1];h&&ed===Uc&&id===zc||(ed=Uc,id=zc,da.uniform2f(qa.location,Uc,zc));pd=r.viewBoxPos;we=pd[0];jd=pd[1];h&&ia===we&&$e===jd||(ia=we,$e=jd,da.uniform2f(ya.location,we,jd));Nd=r.viewBoxSize;he=Nd[0];Od=Nd[1];h&&ce===he&&Kd===Od||(ce=he,Kd=Od,da.uniform2f(Ga.location,he,Od));Id=r.maskHeight;h&&nd===Id||(nd=Id,da.uniform1f(ka.location,
Id));Tc=r.drwLayer;h&&ud===Tc||(ud=Tc,da.uniform1f(F.location,Tc));sd=r.contextColor;kd=sd[0];Cd=sd[1];xe=sd[2];Fe=sd[3];h&&vd===kd&&Fd===Cd&&ke===xe&&le===Fe||(vd=kd,Fd=Cd,ke=xe,le=Fe,da.uniform4f(Q.location,kd,Cd,xe,Fe));(je=r.maskTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);ie=je._texture;da.uniform1i(pa.location,ie.bind());te=r.offset;if(de=r.count)Xc?da.drawElements(1,de,Xc.type,te<<(Xc.type-5121>>1)):da.drawArrays(1,te,de),Y.viewportWidth=td,Y.viewportHeight=pc,ie.unbind()}X.unbind();
ua.dirty=!0;bc.setVAO(null);ua.profile=b},draw:function(a){var e,c,b,h,r,d;e=mb.next;e!==mb.cur&&(e?da.bindFramebuffer(36160,e.framebuffer):da.bindFramebuffer(36160,null),mb.cur=e);if(ua.dirty){e=zd[0];d=zd[1];c=zd[2];b=zd[3];if(e!==Vd[0]||d!==Vd[1]||c!==Vd[2]||b!==Vd[3])da.colorMask(e,d,c,b),Vd[0]=e,Vd[1]=d,Vd[2]=c,Vd[3]=b;e=xd.frontFace;e!==ua.frontFace&&(da.frontFace(e),ua.frontFace=e);e=xd.polygonOffset_enable;e!==ua.polygonOffset_enable&&(e?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=
e);e=Dd[0];d=Dd[1];if(e!==qd[0]||d!==qd[1])da.polygonOffset(e,d),qd[0]=e,qd[1]=d;e=xd.sample_alpha;e!==ua.sample_alpha&&(e?da.enable(32926):da.disable(32926),ua.sample_alpha=e);e=xd.sample_enable;e!==ua.sample_enable&&(e?da.enable(32928):da.disable(32928),ua.sample_enable=e);e=ge[0];d=ge[1];if(e!==ae[0]||d!==ae[1])da.sampleCoverage(e,d),ae[0]=e,ae[1]=d;e=xd.stencil_enable;e!==ua.stencil_enable&&(e?da.enable(2960):da.disable(2960),ua.stencil_enable=e);e=xd.stencil_mask;e!==ua.stencil_mask&&(da.stencilMask(e),
ua.stencil_mask=e);e=Ze[0];d=Ze[1];c=Ze[2];if(e!==Hd[0]||d!==Hd[1]||c!==Hd[2])da.stencilFunc(e,d,c),Hd[0]=e,Hd[1]=d,Hd[2]=c;e=Yd[0];d=Yd[1];c=Yd[2];b=Yd[3];if(e!==Ad[0]||d!==Ad[1]||c!==Ad[2]||b!==Ad[3])da.stencilOpSeparate(e,d,c,b),Ad[0]=e,Ad[1]=d,Ad[2]=c,Ad[3]=b;e=Ae[0];d=Ae[1];c=Ae[2];b=Ae[3];if(e!==se[0]||d!==se[1]||c!==se[2]||b!==se[3])da.stencilOpSeparate(e,d,c,b),se[0]=e,se[1]=d,se[2]=c,se[3]=b}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;c=bd.x|0;b=
bd.y|0;h="width"in bd?bd.width|0:Y.framebufferWidth-c;r="height"in bd?bd.height|0:Y.framebufferHeight-b;e=Y.viewportWidth;Y.viewportWidth=h;d=Y.viewportHeight;Y.viewportHeight=r;da.viewport(c,b,h,r);md[0]=c;md[1]=b;md[2]=h;md[3]=r;da.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);me[0]=32774;me[1]=32774;da.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);
ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;da.depthFunc(513);ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);fe[0]=0;fe[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;c=rd.x|0;b=rd.y|0;h="width"in rd?rd.width|0:Y.framebufferWidth-c;r="height"in rd?rd.height|0:Y.framebufferHeight-b;da.scissor(c,b,h,r);Ye[0]=c;Ye[1]=b;Ye[2]=h;Ye[3]=r;da.enable(3089);ua.scissor_enable=
!0;c=ua.profile;ua.profile=!1;da.useProgram(H.program);bc.setVAO(null);b=Aa.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==J.dtype||4!==h.size||h.buffer!==J||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,J.buffer),da.vertexAttribPointer(b,4,J.dtype,!1,0,0),h.type=J.dtype,h.size=4,h.buffer=J,h.normalized=!1,h.offset=0,h.stride=0;b=Ba.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==
h.offset||0!==h.stride)da.bindBuffer(34962,g.buffer),da.vertexAttribPointer(b,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;b=ja.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(b,4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,h.normalized=!1,h.offset=0,h.stride=0;b=Yb.location;h=la[b];h.buffer||
da.enableVertexAttribArray(b);if(h.type!==q.dtype||4!==h.size||h.buffer!==q||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,q.buffer),da.vertexAttribPointer(b,4,q.dtype,!1,0,0),h.type=q.dtype,h.size=4,h.buffer=q,h.normalized=!1,h.offset=0,h.stride=0;b=Ta.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==f.dtype||4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,f.buffer),da.vertexAttribPointer(b,4,f.dtype,!1,0,0),h.type=
f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;b=v.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==B.dtype||4!==h.size||h.buffer!==B||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(b,4,B.dtype,!1,0,0),h.type=B.dtype,h.size=4,h.buffer=B,h.normalized=!1,h.offset=0,h.stride=0;b=m.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==D.dtype||4!==h.size||h.buffer!==D||!1!==h.normalized||0!==h.offset||
0!==h.stride)da.bindBuffer(34962,D.buffer),da.vertexAttribPointer(b,4,D.dtype,!1,0,0),h.type=D.dtype,h.size=4,h.buffer=D,h.normalized=!1,h.offset=0,h.stride=0;b=U.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==G.dtype||4!==h.size||h.buffer!==G||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,G.buffer),da.vertexAttribPointer(b,4,G.dtype,!1,0,0),h.type=G.dtype,h.size=4,h.buffer=G,h.normalized=!1,h.offset=0,h.stride=0;b=va.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);
if(h.type!==T.dtype||4!==h.size||h.buffer!==T||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(b,4,T.dtype,!1,0,0),h.type=T.dtype,h.size=4,h.buffer=T,h.normalized=!1,h.offset=0,h.stride=0;b=wa.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==x.dtype||4!==h.size||h.buffer!==x||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,x.buffer),da.vertexAttribPointer(b,4,x.dtype,!1,0,0),h.type=x.dtype,h.size=4,h.buffer=x,
h.normalized=!1,h.offset=0,h.stride=0;b=Bd.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==t.dtype||4!==h.size||h.buffer!==t||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,t.buffer),da.vertexAttribPointer(b,4,t.dtype,!1,0,0),h.type=t.dtype,h.size=4,h.buffer=t,h.normalized=!1,h.offset=0,h.stride=0;b=Hb.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==l.dtype||4!==h.size||h.buffer!==l||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,
l.buffer),da.vertexAttribPointer(b,4,l.dtype,!1,0,0),h.type=l.dtype,h.size=4,h.buffer=l,h.normalized=!1,h.offset=0,h.stride=0;b=ha.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==ca.dtype||4!==h.size||h.buffer!==ca||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,ca.buffer),da.vertexAttribPointer(b,4,ca.dtype,!1,0,0),h.type=ca.dtype,h.size=4,h.buffer=ca,h.normalized=!1,h.offset=0,h.stride=0;b=I.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==
u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(b,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;b=ra.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==N.dtype||4!==h.size||h.buffer!==N||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,N.buffer),da.vertexAttribPointer(b,4,N.dtype,!1,0,0),h.type=N.dtype,h.size=4,h.buffer=N,h.normalized=
!1,h.offset=0,h.stride=0;b=ea.location;h=la[b];h.buffer||da.enableVertexAttribArray(b);if(h.type!==y.dtype||4!==h.size||h.buffer!==y||!1!==h.normalized||0!==h.offset||0!==h.stride)da.bindBuffer(34962,y.buffer),da.vertexAttribPointer(b,4,y.dtype,!1,0,0),h.type=y.dtype,h.size=4,h.buffer=y,h.normalized=!1,h.offset=0,h.stride=0;b=a.dim0A;da.uniformMatrix4fv(O.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Lc[0]=b[0],Lc[1]=b[1],Lc[2]=b[2],Lc[3]=b[3],Lc[4]=b[4],Lc[5]=b[5],Lc[6]=b[6],Lc[7]=b[7],
Lc[8]=b[8],Lc[9]=b[9],Lc[10]=b[10],Lc[11]=b[11],Lc[12]=b[12],Lc[13]=b[13],Lc[14]=b[14],Lc[15]=b[15],Lc));b=a.dim1A;da.uniformMatrix4fv(K.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(od[0]=b[0],od[1]=b[1],od[2]=b[2],od[3]=b[3],od[4]=b[4],od[5]=b[5],od[6]=b[6],od[7]=b[7],od[8]=b[8],od[9]=b[9],od[10]=b[10],od[11]=b[11],od[12]=b[12],od[13]=b[13],od[14]=b[14],od[15]=b[15],od));b=a.dim0B;da.uniformMatrix4fv(z.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Gc[0]=b[0],Gc[1]=b[1],
Gc[2]=b[2],Gc[3]=b[3],Gc[4]=b[4],Gc[5]=b[5],Gc[6]=b[6],Gc[7]=b[7],Gc[8]=b[8],Gc[9]=b[9],Gc[10]=b[10],Gc[11]=b[11],Gc[12]=b[12],Gc[13]=b[13],Gc[14]=b[14],Gc[15]=b[15],Gc));b=a.dim1B;da.uniformMatrix4fv(za.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(fd[0]=b[0],fd[1]=b[1],fd[2]=b[2],fd[3]=b[3],fd[4]=b[4],fd[5]=b[5],fd[6]=b[6],fd[7]=b[7],fd[8]=b[8],fd[9]=b[9],fd[10]=b[10],fd[11]=b[11],fd[12]=b[12],fd[13]=b[13],fd[14]=b[14],fd[15]=b[15],fd));b=a.dim0C;da.uniformMatrix4fv(p.location,!1,Array.isArray(b)||
b instanceof Float32Array?b:(Pc[0]=b[0],Pc[1]=b[1],Pc[2]=b[2],Pc[3]=b[3],Pc[4]=b[4],Pc[5]=b[5],Pc[6]=b[6],Pc[7]=b[7],Pc[8]=b[8],Pc[9]=b[9],Pc[10]=b[10],Pc[11]=b[11],Pc[12]=b[12],Pc[13]=b[13],Pc[14]=b[14],Pc[15]=b[15],Pc));b=a.dim1C;da.uniformMatrix4fv(na.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Wc[0]=b[0],Wc[1]=b[1],Wc[2]=b[2],Wc[3]=b[3],Wc[4]=b[4],Wc[5]=b[5],Wc[6]=b[6],Wc[7]=b[7],Wc[8]=b[8],Wc[9]=b[9],Wc[10]=b[10],Wc[11]=b[11],Wc[12]=b[12],Wc[13]=b[13],Wc[14]=b[14],Wc[15]=b[15],
Wc));b=a.dim0D;da.uniformMatrix4fv(L.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Bb[0]=b[0],Bb[1]=b[1],Bb[2]=b[2],Bb[3]=b[3],Bb[4]=b[4],Bb[5]=b[5],Bb[6]=b[6],Bb[7]=b[7],Bb[8]=b[8],Bb[9]=b[9],Bb[10]=b[10],Bb[11]=b[11],Bb[12]=b[12],Bb[13]=b[13],Bb[14]=b[14],Bb[15]=b[15],Bb));b=a.dim1D;da.uniformMatrix4fv(n.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Fb[0]=b[0],Fb[1]=b[1],Fb[2]=b[2],Fb[3]=b[3],Fb[4]=b[4],Fb[5]=b[5],Fb[6]=b[6],Fb[7]=b[7],Fb[8]=b[8],Fb[9]=b[9],Fb[10]=b[10],
Fb[11]=b[11],Fb[12]=b[12],Fb[13]=b[13],Fb[14]=b[14],Fb[15]=b[15],Fb));b=a.loA;da.uniformMatrix4fv(Ca.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Dc[0]=b[0],Dc[1]=b[1],Dc[2]=b[2],Dc[3]=b[3],Dc[4]=b[4],Dc[5]=b[5],Dc[6]=b[6],Dc[7]=b[7],Dc[8]=b[8],Dc[9]=b[9],Dc[10]=b[10],Dc[11]=b[11],Dc[12]=b[12],Dc[13]=b[13],Dc[14]=b[14],Dc[15]=b[15],Dc));b=a.hiA;da.uniformMatrix4fv(aa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(xb[0]=b[0],xb[1]=b[1],xb[2]=b[2],xb[3]=b[3],xb[4]=b[4],xb[5]=
b[5],xb[6]=b[6],xb[7]=b[7],xb[8]=b[8],xb[9]=b[9],xb[10]=b[10],xb[11]=b[11],xb[12]=b[12],xb[13]=b[13],xb[14]=b[14],xb[15]=b[15],xb));b=a.loB;da.uniformMatrix4fv(xa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(xc[0]=b[0],xc[1]=b[1],xc[2]=b[2],xc[3]=b[3],xc[4]=b[4],xc[5]=b[5],xc[6]=b[6],xc[7]=b[7],xc[8]=b[8],xc[9]=b[9],xc[10]=b[10],xc[11]=b[11],xc[12]=b[12],xc[13]=b[13],xc[14]=b[14],xc[15]=b[15],xc));b=a.hiB;da.uniformMatrix4fv(M.location,!1,Array.isArray(b)||b instanceof Float32Array?
b:(Cb[0]=b[0],Cb[1]=b[1],Cb[2]=b[2],Cb[3]=b[3],Cb[4]=b[4],Cb[5]=b[5],Cb[6]=b[6],Cb[7]=b[7],Cb[8]=b[8],Cb[9]=b[9],Cb[10]=b[10],Cb[11]=b[11],Cb[12]=b[12],Cb[13]=b[13],Cb[14]=b[14],Cb[15]=b[15],Cb));b=a.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Jc[0]=b[0],Jc[1]=b[1],Jc[2]=b[2],Jc[3]=b[3],Jc[4]=b[4],Jc[5]=b[5],Jc[6]=b[6],Jc[7]=b[7],Jc[8]=b[8],Jc[9]=b[9],Jc[10]=b[10],Jc[11]=b[11],Jc[12]=b[12],Jc[13]=b[13],Jc[14]=b[14],Jc[15]=b[15],Jc));b=a.hiC;da.uniformMatrix4fv(ma.location,
!1,Array.isArray(b)||b instanceof Float32Array?b:(nc[0]=b[0],nc[1]=b[1],nc[2]=b[2],nc[3]=b[3],nc[4]=b[4],nc[5]=b[5],nc[6]=b[6],nc[7]=b[7],nc[8]=b[8],nc[9]=b[9],nc[10]=b[10],nc[11]=b[11],nc[12]=b[12],nc[13]=b[13],nc[14]=b[14],nc[15]=b[15],nc));b=a.loD;da.uniformMatrix4fv(Ea.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Hc[0]=b[0],Hc[1]=b[1],Hc[2]=b[2],Hc[3]=b[3],Hc[4]=b[4],Hc[5]=b[5],Hc[6]=b[6],Hc[7]=b[7],Hc[8]=b[8],Hc[9]=b[9],Hc[10]=b[10],Hc[11]=b[11],Hc[12]=b[12],Hc[13]=b[13],Hc[14]=
b[14],Hc[15]=b[15],Hc));b=a.hiD;da.uniformMatrix4fv(oa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Xc[0]=b[0],Xc[1]=b[1],Xc[2]=b[2],Xc[3]=b[3],Xc[4]=b[4],Xc[5]=b[5],Xc[6]=b[6],Xc[7]=b[7],Xc[8]=b[8],Xc[9]=b[9],Xc[10]=b[10],Xc[11]=b[11],Xc[12]=b[12],Xc[13]=b[13],Xc[14]=b[14],Xc[15]=b[15],Xc));b=a.resolution;da.uniform2f(qa.location,b[0],b[1]);b=a.viewBoxPos;da.uniform2f(ya.location,b[0],b[1]);b=a.viewBoxSize;da.uniform2f(Ga.location,b[0],b[1]);da.uniform1f(ka.location,a.maskHeight);da.uniform1f(F.location,
a.drwLayer);b=a.contextColor;da.uniform4f(Q.location,b[0],b[1],b[2],b[3]);(b=a.maskTexture)&&"framebuffer"===b._reglType&&(b=b.color[0]);b=b._texture;da.uniform1i(pa.location,b.bind());da.uniform1i(Fa.location,P.bind());(h=Ja.elements)?da.bindBuffer(34963,h.buffer.buffer):bc.currentVAO&&(h=Da.getElements(bc.currentVAO.elements))&&da.bindBuffer(34963,h.buffer.buffer);r=a.offset;if(a=a.count)h?da.drawElements(1,a,h.type,r<<(h.type-5121>>1)):da.drawArrays(1,r,a),ua.dirty=!0,bc.setVAO(null),Y.viewportWidth=
e,Y.viewportHeight=d,ua.profile=c,b.unbind(),P.unbind()},scope:function(m,n,p){var v,I,d,ja,U,ra,Ba,Fa,O,F,M,Yb,z,fa,qa,ha,Q,la,K,va,L,aa,ya,Ga,da,za,oa,xa,P,H,ka,ba,X,Ta,ea,Aa,wa,pa,Ea,na,ma,Hb,Ca,Bd,Da,mb,db,Za,gc,Fb,Pc,Bb,hc,qc,xb,Cb,ae,Ae,oc,bc,Yd,rc,bb,$a,Ua,Ic,Ze,Wc,nc,W,ob,Gc,se,fd,Hd,Lc,Dc,yb,xc,me,od,Hc,Ec,Jc,Vd,md,Ad,Nb,Dd,cc,Ye,Vc,pg,Xc,ge,zd,ze,qd,fe,ia,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,fb,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,
Me,Jd,Td,De,Ne,hf,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=m.viewportHeight;bd.width=m.viewportWidth;bd.x=m.viewportX;bd.y=m.viewportY;
v=bd.x|0;I=bd.y|0;d="width"in bd?bd.width|0:Y.framebufferWidth-v;ja="height"in bd?bd.height|0:Y.framebufferHeight-I;U=Y.viewportWidth;Y.viewportWidth=d;ra=Y.viewportHeight;Y.viewportHeight=ja;Ba=Zd[0];Zd[0]=v;Fa=Zd[1];Zd[1]=I;O=Zd[2];Zd[2]=d;F=Zd[3];Zd[3]=ja;M=Sb[0];Sb[0]=0;Yb=Sb[1];Sb[1]=0;z=Sb[2];Sb[2]=0;fa=Sb[3];Sb[3]=0;qa=xd.blend_enable;xd.blend_enable=!1;ha=Gd[0];Gd[0]=32774;Q=Gd[1];Gd[1]=32774;la=Wd[0];Wd[0]=770;K=Wd[1];Wd[1]=771;va=Wd[2];Wd[2]=1;L=Wd[3];Wd[3]=1;aa=xd.cull_enable;xd.cull_enable=
!0;ya=xd.cull_face;xd.cull_face=1029;Ga=xd.depth_enable;xd.depth_enable=!0;da=xd.depth_func;xd.depth_func=513;za=xd.depth_mask;xd.depth_mask=!0;oa=pe[0];pe[0]=0;xa=pe[1];pe[1]=1;P=xd.dither;xd.dither=!1;H=xd.lineWidth;xd.lineWidth=2;rd.height=m.scissorHeight;rd.width=m.scissorWidth;rd.x=m.scissorX;rd.y=m.scissorY;ka=rd.x|0;ba=rd.y|0;X="width"in rd?rd.width|0:Y.framebufferWidth-ka;Ta="height"in rd?rd.height|0:Y.framebufferHeight-ba;ea=Ce[0];Ce[0]=ka;Aa=Ce[1];Ce[1]=ba;wa=Ce[2];Ce[2]=X;pa=Ce[3];Ce[3]=
Ta;Ea=xd.scissor_enable;xd.scissor_enable=!0;na=ua.profile;ua.profile=!1;ma=m.offset;Hb=Ja.offset;Ja.offset=ma;Ca=m.count;Bd=Ja.count;Ja.count=Ca;Da=Ja.primitive;Ja.primitive=1;mb=m.contextColor;db=Ha[24];Ha[24]=mb;Za=m.dim0A;gc=Ha[3];Ha[3]=Za;Fb=m.dim0B;Pc=Ha[5];Ha[5]=Fb;Bb=m.dim0C;hc=Ha[7];Ha[7]=Bb;qc=m.dim0D;xb=Ha[9];Ha[9]=qc;Cb=m.dim1A;ae=Ha[4];Ha[4]=Cb;Ae=m.dim1B;oc=Ha[6];Ha[6]=Ae;bc=m.dim1C;Yd=Ha[8];Ha[8]=bc;rc=m.dim1D;bb=Ha[10];Ha[10]=rc;$a=m.drwLayer;Ua=Ha[23];Ha[23]=$a;Ic=m.hiA;Ze=Ha[12];
Ha[12]=Ic;Wc=m.hiB;nc=Ha[14];Ha[14]=Wc;W=m.hiC;ob=Ha[16];Ha[16]=W;Gc=m.hiD;se=Ha[18];Ha[18]=Gc;fd=m.loA;Hd=Ha[11];Ha[11]=fd;Lc=m.loB;Dc=Ha[13];Ha[13]=Lc;yb=m.loC;xc=Ha[15];Ha[15]=yb;me=m.loD;od=Ha[17];Ha[17]=me;Hc=m.maskHeight;Ec=Ha[22];Ha[22]=Hc;Jc=m.maskTexture;Vd=Ha[25];Ha[25]=Jc;md=Ha[26];Ha[26]=ga;Ad=m.resolution;Nb=Ha[19];Ha[19]=Ad;Dd=m.viewBoxPos;cc=Ha[20];Ha[20]=Dd;Ye=m.viewBoxSize;Vc=Ha[21];Ha[21]=Ye;pg=c.buffer;c.buffer=y;Xc=c.divisor;c.divisor=0;ge=c.normalized;c.normalized=!1;zd=c.offset;
c.offset=0;ze=c.size;c.size=0;qd=c.state;c.state=1;fe=c.stride;c.stride=0;ia=c.type;c.type=y.dtype;Od=c.w;c.w=0;Kd=c.x;c.x=0;Id=c.y;c.y=0;nd=c.z;c.z=0;Tc=b.buffer;b.buffer=J;ud=b.divisor;b.divisor=0;sd=b.normalized;b.normalized=!1;kd=b.offset;b.offset=0;vd=b.size;b.size=0;Cd=b.state;b.state=1;Fd=b.stride;b.stride=0;xe=b.type;b.type=J.dtype;ke=b.w;b.w=0;Fe=b.x;b.x=0;le=b.y;b.y=0;je=b.z;b.z=0;ie=S.buffer;S.buffer=g;te=S.divisor;S.divisor=0;de=S.normalized;S.normalized=!1;ne=S.offset;S.offset=0;Oc=S.size;
S.size=0;gd=S.state;S.state=1;ue=S.stride;S.stride=0;qe=S.type;S.type=g.dtype;Ld=S.w;S.w=0;Pd=S.x;S.x=0;Rd=S.y;S.y=0;Sd=S.z;S.z=0;oe=r.buffer;r.buffer=k;fb=r.divisor;r.divisor=0;Be=r.normalized;r.normalized=!1;re=r.offset;r.offset=0;Re=r.size;r.size=0;Se=r.state;r.state=1;Oe=r.stride;r.stride=0;ve=r.type;r.type=k.dtype;He=r.w;r.w=0;Je=r.x;r.x=0;Ke=r.y;r.y=0;Le=r.z;r.z=0;Ie=Z.buffer;Z.buffer=q;Md=Z.divisor;Z.divisor=0;Xd=Z.normalized;Z.normalized=!1;be=Z.offset;Z.offset=0;ee=Z.size;Z.size=0;Me=Z.state;
Z.state=1;Jd=Z.stride;Z.stride=0;Td=Z.type;Z.type=q.dtype;De=Z.w;Z.w=0;Ne=Z.x;Z.x=0;hf=Z.y;Z.y=0;bf=Z.z;Z.z=0;Te=h.buffer;h.buffer=f;Pe=h.divisor;h.divisor=0;af=h.normalized;h.normalized=!1;Xe=h.offset;h.offset=0;Ue=h.size;h.size=0;Ve=h.state;h.state=1;Ud=h.stride;h.stride=0;$d=h.type;h.type=f.dtype;We=h.w;h.w=0;jf=h.x;h.x=0;nf=h.y;h.y=0;ef=h.z;h.z=0;kf=w.buffer;w.buffer=B;lf=w.divisor;w.divisor=0;mf=w.normalized;w.normalized=!1;rf=w.offset;w.offset=0;of=w.size;w.size=0;sf=w.state;w.state=1;Bf=w.stride;
w.stride=0;Cf=w.type;w.type=B.dtype;Qe=w.w;w.w=0;Ee=w.x;w.x=0;pf=w.y;w.y=0;qf=w.z;w.z=0;Df=V.buffer;V.buffer=D;Gf=V.divisor;V.divisor=0;Af=V.normalized;V.normalized=!1;Ef=V.offset;V.offset=0;Ff=V.size;V.size=0;wf=V.state;V.state=1;xf=V.stride;V.stride=0;vf=V.type;V.type=D.dtype;yf=V.w;V.w=0;zf=V.x;V.x=0;If=V.y;V.y=0;Jf=V.z;V.z=0;Kf=E.buffer;E.buffer=G;Lf=E.divisor;E.divisor=0;tf=E.normalized;E.normalized=!1;Qf=E.offset;E.offset=0;Hf=E.size;E.size=0;uf=E.state;E.state=1;cg=E.stride;E.stride=0;Rf=E.type;
E.type=G.dtype;Sf=E.w;E.w=0;qg=E.x;E.x=0;ff=E.y;E.y=0;cf=E.z;E.z=0;Mf=C.buffer;C.buffer=T;Nf=C.divisor;C.divisor=0;dg=C.normalized;C.normalized=!1;eg=C.offset;C.offset=0;fg=C.size;C.size=0;gg=C.state;C.state=1;hg=C.stride;C.stride=0;Vf=C.type;C.type=T.dtype;Tf=C.w;C.w=0;Wf=C.x;C.x=0;Xf=C.y;C.y=0;Yf=C.z;C.z=0;ig=e.buffer;e.buffer=x;rg=e.divisor;e.divisor=0;sg=e.normalized;e.normalized=!1;tg=e.offset;e.offset=0;ug=e.size;e.size=0;vg=e.state;e.state=1;wg=e.stride;e.stride=0;xg=e.type;e.type=x.dtype;
yg=e.w;e.w=0;zg=e.x;e.x=0;Ag=e.y;e.y=0;Bg=e.z;e.z=0;gf=R.buffer;R.buffer=t;df=R.divisor;R.divisor=0;Of=R.normalized;R.normalized=!1;Pf=R.offset;R.offset=0;jg=R.size;R.size=0;kg=R.state;R.state=1;lg=R.stride;R.stride=0;mg=R.type;R.type=t.dtype;ng=R.w;R.w=0;Zf=R.x;R.x=0;Uf=R.y;R.y=0;$f=R.z;R.z=0;ag=a.buffer;a.buffer=l;bg=a.divisor;a.divisor=0;og=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=l.dtype;Hg=a.w;a.w=0;Ig=
a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=sa.buffer;sa.buffer=ca;Mg=sa.divisor;sa.divisor=0;Ng=sa.normalized;sa.normalized=!1;Og=sa.offset;sa.offset=0;Pg=sa.size;sa.size=0;Qg=sa.state;sa.state=1;Rg=sa.stride;sa.stride=0;Sg=sa.type;sa.type=ca.dtype;Tg=sa.w;sa.w=0;Ug=sa.x;sa.x=0;Vg=sa.y;sa.y=0;Wg=sa.z;sa.z=0;Xg=A.buffer;A.buffer=u;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=u.dtype;eh=A.w;
A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ta.buffer;ta.buffer=N;jh=ta.divisor;ta.divisor=0;kh=ta.normalized;ta.normalized=!1;lh=ta.offset;ta.offset=0;mh=ta.size;ta.size=0;nh=ta.state;ta.state=1;oh=ta.stride;ta.stride=0;ph=ta.type;ta.type=N.dtype;qh=ta.w;ta.w=0;rh=ta.x;ta.x=0;sh=ta.y;ta.y=0;th=ta.z;ta.z=0;uh=ac.vert;ac.vert=2;vh=ac.frag;ac.frag=1;ua.dirty=!0;n(Y,m,p);Y.viewportWidth=U;Y.viewportHeight=ra;Zd[0]=Ba;Zd[1]=Fa;Zd[2]=O;Zd[3]=F;Sb[0]=M;Sb[1]=Yb;Sb[2]=z;Sb[3]=fa;xd.blend_enable=qa;Gd[0]=
ha;Gd[1]=Q;Wd[0]=la;Wd[1]=K;Wd[2]=va;Wd[3]=L;xd.cull_enable=aa;xd.cull_face=ya;xd.depth_enable=Ga;xd.depth_func=da;xd.depth_mask=za;pe[0]=oa;pe[1]=xa;xd.dither=P;xd.lineWidth=H;Ce[0]=ea;Ce[1]=Aa;Ce[2]=wa;Ce[3]=pa;xd.scissor_enable=Ea;ua.profile=na;Ja.offset=Hb;Ja.count=Bd;Ja.primitive=Da;Ha[24]=db;Ha[3]=gc;Ha[5]=Pc;Ha[7]=hc;Ha[9]=xb;Ha[4]=ae;Ha[6]=oc;Ha[8]=Yd;Ha[10]=bb;Ha[23]=Ua;Ha[12]=Ze;Ha[14]=nc;Ha[16]=ob;Ha[18]=se;Ha[11]=Hd;Ha[13]=Dc;Ha[15]=xc;Ha[17]=od;Ha[22]=Ec;Ha[25]=Vd;Ha[26]=md;Ha[19]=Nb;
Ha[20]=cc;Ha[21]=Vc;c.buffer=pg;c.divisor=Xc;c.normalized=ge;c.offset=zd;c.size=ze;c.state=qd;c.stride=fe;c.type=ia;c.w=Od;c.x=Kd;c.y=Id;c.z=nd;b.buffer=Tc;b.divisor=ud;b.normalized=sd;b.offset=kd;b.size=vd;b.state=Cd;b.stride=Fd;b.type=xe;b.w=ke;b.x=Fe;b.y=le;b.z=je;S.buffer=ie;S.divisor=te;S.normalized=de;S.offset=ne;S.size=Oc;S.state=gd;S.stride=ue;S.type=qe;S.w=Ld;S.x=Pd;S.y=Rd;S.z=Sd;r.buffer=oe;r.divisor=fb;r.normalized=Be;r.offset=re;r.size=Re;r.state=Se;r.stride=Oe;r.type=ve;r.w=He;r.x=Je;
r.y=Ke;r.z=Le;Z.buffer=Ie;Z.divisor=Md;Z.normalized=Xd;Z.offset=be;Z.size=ee;Z.state=Me;Z.stride=Jd;Z.type=Td;Z.w=De;Z.x=Ne;Z.y=hf;Z.z=bf;h.buffer=Te;h.divisor=Pe;h.normalized=af;h.offset=Xe;h.size=Ue;h.state=Ve;h.stride=Ud;h.type=$d;h.w=We;h.x=jf;h.y=nf;h.z=ef;w.buffer=kf;w.divisor=lf;w.normalized=mf;w.offset=rf;w.size=of;w.state=sf;w.stride=Bf;w.type=Cf;w.w=Qe;w.x=Ee;w.y=pf;w.z=qf;V.buffer=Df;V.divisor=Gf;V.normalized=Af;V.offset=Ef;V.size=Ff;V.state=wf;V.stride=xf;V.type=vf;V.w=yf;V.x=zf;V.y=If;
V.z=Jf;E.buffer=Kf;E.divisor=Lf;E.normalized=tf;E.offset=Qf;E.size=Hf;E.state=uf;E.stride=cg;E.type=Rf;E.w=Sf;E.x=qg;E.y=ff;E.z=cf;C.buffer=Mf;C.divisor=Nf;C.normalized=dg;C.offset=eg;C.size=fg;C.state=gg;C.stride=hg;C.type=Vf;C.w=Tf;C.x=Wf;C.y=Xf;C.z=Yf;e.buffer=ig;e.divisor=rg;e.normalized=sg;e.offset=tg;e.size=ug;e.state=vg;e.stride=wg;e.type=xg;e.w=yg;e.x=zg;e.y=Ag;e.z=Bg;R.buffer=gf;R.divisor=df;R.normalized=Of;R.offset=Pf;R.size=jg;R.state=kg;R.stride=lg;R.type=mg;R.w=ng;R.x=Zf;R.y=Uf;R.z=$f;
a.buffer=ag;a.divisor=bg;a.normalized=og;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;sa.buffer=Lg;sa.divisor=Mg;sa.normalized=Ng;sa.offset=Og;sa.size=Pg;sa.state=Qg;sa.stride=Rg;sa.type=Sg;sa.w=Tg;sa.x=Ug;sa.y=Vg;sa.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ta.buffer=ih;ta.divisor=jh;ta.normalized=kh;ta.offset=lh;ta.size=mh;ta.state=nh;ta.stride=oh;ta.type=ph;ta.w=qh;ta.x=
rh;ta.y=sh;ta.z=th;ac.vert=uh;ac.frag=vh;ua.dirty=!0}}},$1:function(d,ba){var H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e;H=d.attributes;J=d.current;g=d.framebuffer;k=d.gl;q=d.next;f=d.vao;B=q.blend_color;D=J.blend_color;G=q.blend_equation;T=J.blend_equation;x=q.blend_func;t=J.blend_func;l=q.colorMask;ca=J.colorMask;u=q.depth_range;N=J.depth_range;y=q.polygonOffset_offset;P=J.polygonOffset_offset;ga=q.sample_coverage;c=J.sample_coverage;b=q.scissor_box;S=J.scissor_box;r=q.stencil_func;
Z=J.stencil_func;h=q.stencil_opBack;w=J.stencil_opBack;V=q.stencil_opFront;E=J.stencil_opFront;C=q.viewport;e=J.viewport;return{poll:function(){var f,a,d,A,H,ba,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa;J.dirty=!1;a=q.blend_enable;d=q.cull_enable;A=q.depth_enable;H=q.dither;ba=q.polygonOffset_enable;X=q.sample_alpha;ea=q.sample_enable;Q=q.scissor_enable;O=q.stencil_enable;z=q.cull_face;p=J.cull_face;L=q.depth_func;K=J.depth_func;za=q.depth_mask;na=J.depth_mask;n=q.frontFace;F=J.frontFace;aa=q.lineWidth;
M=J.lineWidth;ma=q.stencil_mask;oa=J.stencil_mask;f=g.next;f!==g.cur&&(f?k.bindFramebuffer(36160,f.framebuffer):k.bindFramebuffer(36160,null),g.cur=f);a!==J.blend_enable&&(a?k.enable(3042):k.disable(3042),J.blend_enable=a);d!==J.cull_enable&&(d?k.enable(2884):k.disable(2884),J.cull_enable=d);A!==J.depth_enable&&(A?k.enable(2929):k.disable(2929),J.depth_enable=A);H!==J.dither&&(H?k.enable(3024):k.disable(3024),J.dither=H);ba!==J.polygonOffset_enable&&(ba?k.enable(32823):k.disable(32823),J.polygonOffset_enable=
ba);X!==J.sample_alpha&&(X?k.enable(32926):k.disable(32926),J.sample_alpha=X);ea!==J.sample_enable&&(ea?k.enable(32928):k.disable(32928),J.sample_enable=ea);Q!==J.scissor_enable&&(Q?k.enable(3089):k.disable(3089),J.scissor_enable=Q);O!==J.stencil_enable&&(O?k.enable(2960):k.disable(2960),J.stencil_enable=O);if(B[0]!==D[0]||B[1]!==D[1]||B[2]!==D[2]||B[3]!==D[3])k.blendColor(B[0],B[1],B[2],B[3]),D[0]=B[0],D[1]=B[1],D[2]=B[2],D[3]=B[3];if(G[0]!==T[0]||G[1]!==T[1])k.blendEquationSeparate(G[0],G[1]),T[0]=
G[0],T[1]=G[1];if(x[0]!==t[0]||x[1]!==t[1]||x[2]!==t[2]||x[3]!==t[3])k.blendFuncSeparate(x[0],x[1],x[2],x[3]),t[0]=x[0],t[1]=x[1],t[2]=x[2],t[3]=x[3];if(l[0]!==ca[0]||l[1]!==ca[1]||l[2]!==ca[2]||l[3]!==ca[3])k.colorMask(l[0],l[1],l[2],l[3]),ca[0]=l[0],ca[1]=l[1],ca[2]=l[2],ca[3]=l[3];z!==p&&(k.cullFace(z),J.cull_face=z);L!==K&&(k.depthFunc(L),J.depth_func=L);za!==na&&(k.depthMask(za),J.depth_mask=za);if(u[0]!==N[0]||u[1]!==N[1])k.depthRange(u[0],u[1]),N[0]=u[0],N[1]=u[1];n!==F&&(k.frontFace(n),J.frontFace=
n);aa!==M&&(k.lineWidth(aa),J.lineWidth=aa);if(y[0]!==P[0]||y[1]!==P[1])k.polygonOffset(y[0],y[1]),P[0]=y[0],P[1]=y[1];if(ga[0]!==c[0]||ga[1]!==c[1])k.sampleCoverage(ga[0],ga[1]),c[0]=ga[0],c[1]=ga[1];if(b[0]!==S[0]||b[1]!==S[1]||b[2]!==S[2]||b[3]!==S[3])k.scissor(b[0],b[1],b[2],b[3]),S[0]=b[0],S[1]=b[1],S[2]=b[2],S[3]=b[3];if(r[0]!==Z[0]||r[1]!==Z[1]||r[2]!==Z[2])k.stencilFunc(r[0],r[1],r[2]),Z[0]=r[0],Z[1]=r[1],Z[2]=r[2];ma!==oa&&(k.stencilMask(ma),J.stencil_mask=ma);if(h[0]!==w[0]||h[1]!==w[1]||
h[2]!==w[2]||h[3]!==w[3])k.stencilOpSeparate(h[0],h[1],h[2],h[3]),w[0]=h[0],w[1]=h[1],w[2]=h[2],w[3]=h[3];if(V[0]!==E[0]||V[1]!==E[1]||V[2]!==E[2]||V[3]!==E[3])k.stencilOpSeparate(V[0],V[1],V[2],V[3]),E[0]=V[0],E[1]=V[1],E[2]=V[2],E[3]=V[3];if(C[0]!==e[0]||C[1]!==e[1]||C[2]!==e[2]||C[3]!==e[3])k.viewport(C[0],C[1],C[2],C[3]),e[0]=C[0],e[1]=C[1],e[2]=C[2],e[3]=C[3]},refresh:function(){var d,a,sa,A,ta,db,X,ea,Q,O,z,p,L,K,za,na;J.dirty=!1;a=q.blend_enable;sa=q.cull_enable;A=q.depth_enable;ta=q.dither;
db=q.polygonOffset_enable;X=q.sample_alpha;ea=q.sample_enable;Q=q.scissor_enable;O=q.stencil_enable;z=q.cull_face;p=q.depth_func;L=q.depth_mask;K=q.frontFace;za=q.lineWidth;na=q.stencil_mask;(d=g.next)?k.bindFramebuffer(36160,d.framebuffer):k.bindFramebuffer(36160,null);g.cur=d;d=H[0];d.buffer?(k.enableVertexAttribArray(0),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(0),k.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=
null);ba.vertexAttribDivisorANGLE(0,d.divisor);d=H[1];d.buffer?(k.enableVertexAttribArray(1),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(1),k.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(1,d.divisor);d=H[2];d.buffer?(k.enableVertexAttribArray(2),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(2),
k.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(2,d.divisor);d=H[3];d.buffer?(k.enableVertexAttribArray(3),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(3),k.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(3,d.divisor);d=H[4];d.buffer?(k.enableVertexAttribArray(4),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(4,d.size,d.type,d.normalized,
d.stride,d.offset)):(k.disableVertexAttribArray(4),k.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(4,d.divisor);d=H[5];d.buffer?(k.enableVertexAttribArray(5),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(5),k.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(5,d.divisor);d=H[6];d.buffer?(k.enableVertexAttribArray(6),k.bindBuffer(34962,d.buffer.buffer),
k.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(6),k.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(6,d.divisor);d=H[7];d.buffer?(k.enableVertexAttribArray(7),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(7),k.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(7,d.divisor);d=H[8];d.buffer?(k.enableVertexAttribArray(8),
k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(8),k.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(8,d.divisor);d=H[9];d.buffer?(k.enableVertexAttribArray(9),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(9),k.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(9,d.divisor);
d=H[10];d.buffer?(k.enableVertexAttribArray(10),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(10,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(10),k.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(10,d.divisor);d=H[11];d.buffer?(k.enableVertexAttribArray(11),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(11),k.vertexAttrib4f(11,d.x,d.y,d.z,
d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(11,d.divisor);d=H[12];d.buffer?(k.enableVertexAttribArray(12),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(12,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(12),k.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(12,d.divisor);d=H[13];d.buffer?(k.enableVertexAttribArray(13),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(13),
k.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(13,d.divisor);d=H[14];d.buffer?(k.enableVertexAttribArray(14),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):(k.disableVertexAttribArray(14),k.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(14,d.divisor);d=H[15];d.buffer?(k.enableVertexAttribArray(15),k.bindBuffer(34962,d.buffer.buffer),k.vertexAttribPointer(15,d.size,d.type,d.normalized,
d.stride,d.offset)):(k.disableVertexAttribArray(15),k.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);ba.vertexAttribDivisorANGLE(15,d.divisor);f.currentVAO=null;f.setVAO(f.targetVAO);a?k.enable(3042):k.disable(3042);J.blend_enable=a;sa?k.enable(2884):k.disable(2884);J.cull_enable=sa;A?k.enable(2929):k.disable(2929);J.depth_enable=A;ta?k.enable(3024):k.disable(3024);J.dither=ta;db?k.enable(32823):k.disable(32823);J.polygonOffset_enable=db;X?k.enable(32926):k.disable(32926);J.sample_alpha=X;ea?k.enable(32928):
k.disable(32928);J.sample_enable=ea;Q?k.enable(3089):k.disable(3089);J.scissor_enable=Q;O?k.enable(2960):k.disable(2960);J.stencil_enable=O;k.blendColor(B[0],B[1],B[2],B[3]);D[0]=B[0];D[1]=B[1];D[2]=B[2];D[3]=B[3];k.blendEquationSeparate(G[0],G[1]);T[0]=G[0];T[1]=G[1];k.blendFuncSeparate(x[0],x[1],x[2],x[3]);t[0]=x[0];t[1]=x[1];t[2]=x[2];t[3]=x[3];k.colorMask(l[0],l[1],l[2],l[3]);ca[0]=l[0];ca[1]=l[1];ca[2]=l[2];ca[3]=l[3];k.cullFace(z);J.cull_face=z;k.depthFunc(p);J.depth_func=p;k.depthMask(L);J.depth_mask=
L;k.depthRange(u[0],u[1]);N[0]=u[0];N[1]=u[1];k.frontFace(K);J.frontFace=K;k.lineWidth(za);J.lineWidth=za;k.polygonOffset(y[0],y[1]);P[0]=y[0];P[1]=y[1];k.sampleCoverage(ga[0],ga[1]);c[0]=ga[0];c[1]=ga[1];k.scissor(b[0],b[1],b[2],b[3]);S[0]=b[0];S[1]=b[1];S[2]=b[2];S[3]=b[3];k.stencilFunc(r[0],r[1],r[2]);Z[0]=r[0];Z[1]=r[1];Z[2]=r[2];k.stencilMask(na);J.stencil_mask=na;k.stencilOpSeparate(h[0],h[1],h[2],h[3]);w[0]=h[0];w[1]=h[1];w[2]=h[2];w[3]=h[3];k.stencilOpSeparate(V[0],V[1],V[2],V[3]);E[0]=V[0];
E[1]=V[1];E[2]=V[2];E[3]=V[3];k.viewport(C[0],C[1],C[2],C[3]);e[0]=C[0];e[1]=C[1];e[2]=C[2];e[3]=C[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,db,X,ea,Q,O,z,p,L,K,za,na){var n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,Bd,Hb,ha,I,ra,Fa,qa,ya,Ga,la,Y,ua,Ja,Da,mb,da,xd,ac,Ha,bc,Sb;n=d.attributes;
F=d.buffer;aa=d.context;M=d.current;ma=d.draw;oa=d.elements;Ca=d.extensions;xa=d.framebuffer;fa=d.gl;Ea=d.isBufferArgs;ka=d.next;pa=d.shader;Aa=d.uniforms;Ba=d.vao;ja=ka.blend_color;Yb=M.blend_color;Ta=ka.blend_equation;v=M.blend_equation;m=ka.blend_func;U=M.blend_func;va=ka.colorMask;wa=M.colorMask;Bd=ka.depth_range;Hb=M.depth_range;ha=ka.polygonOffset_offset;I=M.polygonOffset_offset;ra=ka.sample_coverage;Fa=M.sample_coverage;qa=ka.scissor_box;ya=M.scissor_box;Ga=ka.stencil_func;la=M.stencil_func;
Y=ka.stencil_opBack;ua=M.stencil_opBack;Ja=ka.stencil_opFront;Da=M.stencil_opFront;mb=ka.viewport;da=M.viewport;xd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ac={};ac.buffer=H;ac.divisor=1;Ha={};Ha.buffer=J;Ha.divisor=1;bc={};bc.buffer=g;bc.divisor=1;Sb={};Sb.buffer=k;Sb.divisor=1;return{batch:function(b,c){var f,h,m,d,k,r;f=xa.next;f!==xa.cur&&(f?fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),xa.cur=f);if(M.dirty){var q,
ja,g,u,qa,J,y,D,l,S,H,P,B,G,N,Ta,Z,ga,Aa,pa,ca,mb,Wc,Bb,Fb,W,xb,xc,Cb,Jc,nc,Hc,Xc;q=ka.dither;q!==M.dither&&(q?fa.enable(3024):fa.disable(3024),M.dither=q);ja=ka.depth_func;ja!==M.depth_func&&(fa.depthFunc(ja),M.depth_func=ja);g=Bd[0];u=Bd[1];if(g!==Hb[0]||u!==Hb[1])fa.depthRange(g,u),Hb[0]=g,Hb[1]=u;qa=ka.depth_mask;qa!==M.depth_mask&&(fa.depthMask(qa),M.depth_mask=qa);J=va[0];y=va[1];D=va[2];l=va[3];if(J!==wa[0]||y!==wa[1]||D!==wa[2]||l!==wa[3])fa.colorMask(J,y,D,l),wa[0]=J,wa[1]=y,wa[2]=D,wa[3]=
l;S=ka.cull_enable;S!==M.cull_enable&&(S?fa.enable(2884):fa.disable(2884),M.cull_enable=S);H=ka.cull_face;H!==M.cull_face&&(fa.cullFace(H),M.cull_face=H);P=ka.frontFace;P!==M.frontFace&&(fa.frontFace(P),M.frontFace=P);B=ka.lineWidth;B!==M.lineWidth&&(fa.lineWidth(B),M.lineWidth=B);G=ka.polygonOffset_enable;G!==M.polygonOffset_enable&&(G?fa.enable(32823):fa.disable(32823),M.polygonOffset_enable=G);N=ha[0];Ta=ha[1];if(N!==I[0]||Ta!==I[1])fa.polygonOffset(N,Ta),I[0]=N,I[1]=Ta;Z=ka.sample_alpha;Z!==M.sample_alpha&&
(Z?fa.enable(32926):fa.disable(32926),M.sample_alpha=Z);ga=ka.sample_enable;ga!==M.sample_enable&&(ga?fa.enable(32928):fa.disable(32928),M.sample_enable=ga);Aa=ra[0];pa=ra[1];if(Aa!==Fa[0]||pa!==Fa[1])fa.sampleCoverage(Aa,pa),Fa[0]=Aa,Fa[1]=pa;ca=ka.stencil_enable;ca!==M.stencil_enable&&(ca?fa.enable(2960):fa.disable(2960),M.stencil_enable=ca);mb=ka.stencil_mask;mb!==M.stencil_mask&&(fa.stencilMask(mb),M.stencil_mask=mb);Wc=Ga[0];Bb=Ga[1];Fb=Ga[2];if(Wc!==la[0]||Bb!==la[1]||Fb!==la[2])fa.stencilFunc(Wc,
Bb,Fb),la[0]=Wc,la[1]=Bb,la[2]=Fb;W=Ja[0];xb=Ja[1];xc=Ja[2];Cb=Ja[3];if(W!==Da[0]||xb!==Da[1]||xc!==Da[2]||Cb!==Da[3])fa.stencilOpSeparate(W,xb,xc,Cb),Da[0]=W,Da[1]=xb,Da[2]=xc,Da[3]=Cb;Jc=Y[0];nc=Y[1];Hc=Y[2];Xc=Y[3];if(Jc!==ua[0]||nc!==ua[1]||Hc!==ua[2]||Xc!==ua[3])fa.stencilOpSeparate(Jc,nc,Hc,Xc),ua[0]=Jc,ua[1]=nc,ua[2]=Hc,ua[3]=Xc}fa.blendColor(0,0,0,0);Yb[0]=0;Yb[1]=0;Yb[2]=0;Yb[3]=0;fa.enable(3042);M.blend_enable=!0;fa.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;fa.blendFuncSeparate(770,
771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;fa.disable(2929);M.depth_enable=!1;fa.enable(3089);M.scissor_enable=!0;if(h=M.profile)m=performance.now(),ba.count+=c;fa.useProgram(w.program);d=Ca.angle_instanced_arrays;var Vc,Ec,gc,Ic,qc,rc,oc,hc;Ba.setVAO(null);Vc=ta.location;Ec=n[Vc];Ec.buffer||fa.enableVertexAttribArray(Vc);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==T||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)fa.bindBuffer(34962,T.buffer),fa.vertexAttribPointer(Vc,2,5126,!1,24,0),Ec.type=
5126,Ec.size=2,Ec.buffer=T,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(d.vertexAttribDivisorANGLE(Vc,0),Ec.divisor=0);gc=X.location;Ic=n[gc];Ic.buffer||fa.enableVertexAttribArray(gc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==x||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)fa.bindBuffer(34962,x.buffer),fa.vertexAttribPointer(gc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=x,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(d.vertexAttribDivisorANGLE(gc,0),Ic.divisor=
0);qc=a.location;rc=n[qc];rc.buffer||fa.enableVertexAttribArray(qc);if(5126!==rc.type||2!==rc.size||rc.buffer!==t||!1!==rc.normalized||16!==rc.offset||24!==rc.stride)fa.bindBuffer(34962,t.buffer),fa.vertexAttribPointer(qc,2,5126,!1,24,16),rc.type=5126,rc.size=2,rc.buffer=t,rc.normalized=!1,rc.offset=16,rc.stride=24;0!==rc.divisor&&(d.vertexAttribDivisorANGLE(qc,0),rc.divisor=0);(oc=ma.elements)?fa.bindBuffer(34963,oc.buffer.buffer):Ba.currentVAO&&(oc=oa.getElements(Ba.currentVAO.elements))&&fa.bindBuffer(34963,
oc.buffer.buffer);hc=ma.offset;for(k=0;k<c;++k){r=b[k];var Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,ia,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc;Za=r.viewport;cc=Za.x|0;yb=Za.y|0;bb="width"in Za?Za.width|0:aa.framebufferWidth-cc;Nb="height"in
Za?Za.height|0:aa.framebufferHeight-yb;$a=aa.viewportWidth;aa.viewportWidth=bb;ob=aa.viewportHeight;aa.viewportHeight=Nb;fa.viewport(cc,yb,bb,Nb);da[0]=cc;da[1]=yb;da[2]=bb;da[3]=Nb;Ua=r.viewport;yd=Ua.x|0;Ib=Ua.y|0;Jb="width"in Ua?Ua.width|0:aa.framebufferWidth-yd;sc="height"in Ua?Ua.height|0:aa.framebufferHeight-Ib;fa.scissor(yd,Ib,Jb,sc);ya[0]=yd;ya[1]=Ib;ya[2]=Jb;ya[3]=sc;Ob=V.call(this,aa,r,k);bc.offset=Ob;jb=!1;Gb=null;Db=0;wb=!1;Zb=hb=0;Pb=1;qb=0;Ra=5126;ib=dc=zb=Ub=0;Ea(bc)?(jb=!0,Gb=F.createStream(34962,
bc),Ra=Gb.dtype):(Gb=F.getBuffer(bc))?Ra=Gb.dtype:"constant"in bc?(Pb=2,"number"===typeof bc.constant?(zb=bc.constant,dc=ib=Ub=0):(zb=0<bc.constant.length?bc.constant[0]:0,dc=1<bc.constant.length?bc.constant[1]:0,ib=2<bc.constant.length?bc.constant[2]:0,Ub=3<bc.constant.length?bc.constant[3]:0)):(Gb=Ea(bc.buffer)?F.createStream(34962,bc.buffer):F.getBuffer(bc.buffer),Ra="type"in bc?xd[bc.type]:Gb.dtype,wb=!!bc.normalized,Zb=bc.size|0,hb=bc.offset|0,qb=bc.stride|0,Db=bc.divisor|0);pb=O.location;Ia=
n[pb];if(1===Pb){Ia.buffer||fa.enableVertexAttribArray(pb);rb=Zb||2;if(Ia.type!==Ra||Ia.size!==rb||Ia.buffer!==Gb||Ia.normalized!==wb||Ia.offset!==hb||Ia.stride!==qb)fa.bindBuffer(34962,Gb.buffer),fa.vertexAttribPointer(pb,rb,Ra,wb,qb,hb),Ia.type=Ra,Ia.size=rb,Ia.buffer=Gb,Ia.normalized=wb,Ia.offset=hb,Ia.stride=qb;Ia.divisor!==Db&&(d.vertexAttribDivisorANGLE(pb,Db),Ia.divisor=Db)}else if(Ia.buffer&&(fa.disableVertexAttribArray(pb),Ia.buffer=null),Ia.x!==zb||Ia.y!==dc||Ia.z!==ib||Ia.w!==Ub)fa.vertexAttrib4f(pb,
zb,dc,ib,Ub),Ia.x=zb,Ia.y=dc,Ia.z=ib,Ia.w=Ub;Ka=E.call(this,aa,r,k);Sb.offset=Ka;eb=!1;gb=null;La=0;kb=!1;tb=Va=0;sb=1;Oa=0;Cc=5126;Ma=Eb=Kb=Qa=0;Ea(Sb)?(eb=!0,gb=F.createStream(34962,Sb),Cc=gb.dtype):(gb=F.getBuffer(Sb))?Cc=gb.dtype:"constant"in Sb?(sb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Ma=Qa=0):(Kb=0<Sb.constant.length?Sb.constant[0]:0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?Sb.constant[2]:0,Qa=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Ea(Sb.buffer)?F.createStream(34962,
Sb.buffer):F.getBuffer(Sb.buffer),Cc="type"in Sb?xd[Sb.type]:gb.dtype,kb=!!Sb.normalized,tb=Sb.size|0,Va=Sb.offset|0,Oa=Sb.stride|0,La=Sb.divisor|0);wd=z.location;Xa=n[wd];if(1===sb){Xa.buffer||fa.enableVertexAttribArray(wd);Lb=tb||2;if(Xa.type!==Cc||Xa.size!==Lb||Xa.buffer!==gb||Xa.normalized!==kb||Xa.offset!==Va||Xa.stride!==Oa)fa.bindBuffer(34962,gb.buffer),fa.vertexAttribPointer(wd,Lb,Cc,kb,Oa,Va),Xa.type=Cc,Xa.size=Lb,Xa.buffer=gb,Xa.normalized=kb,Xa.offset=Va,Xa.stride=Oa;Xa.divisor!==La&&(d.vertexAttribDivisorANGLE(wd,
La),Xa.divisor=La)}else if(Xa.buffer&&(fa.disableVertexAttribArray(wd),Xa.buffer=null),Xa.x!==Kb||Xa.y!==Eb||Xa.z!==Ma||Xa.w!==Qa)fa.vertexAttrib4f(wd,Kb,Eb,Ma,Qa),Xa.x=Kb,Xa.y=Eb,Xa.z=Ma,Xa.w=Qa;Mb=C.call(this,aa,r,k);Ha.offset=Mb;lb=!1;Na=null;$b=0;Pa=!1;vb=ub=0;Sa=1;nb=0;ic=5126;lc=ab=vc=Ac=0;Ea(Ha)?(lb=!0,Na=F.createStream(34962,Ha),ic=Na.dtype):(Na=F.getBuffer(Ha))?ic=Na.dtype:"constant"in Ha?(Sa=2,"number"===typeof Ha.constant?(vc=Ha.constant,ab=lc=Ac=0):(vc=0<Ha.constant.length?Ha.constant[0]:
0,ab=1<Ha.constant.length?Ha.constant[1]:0,lc=2<Ha.constant.length?Ha.constant[2]:0,Ac=3<Ha.constant.length?Ha.constant[3]:0)):(Na=Ea(Ha.buffer)?F.createStream(34962,Ha.buffer):F.getBuffer(Ha.buffer),ic="type"in Ha?xd[Ha.type]:Na.dtype,Pa=!!Ha.normalized,vb=Ha.size|0,ub=Ha.offset|0,nb=Ha.stride|0,$b=Ha.divisor|0);hd=db.location;Wa=n[hd];if(1===Sa){Wa.buffer||fa.enableVertexAttribArray(hd);Mc=vb||4;if(Wa.type!==ic||Wa.size!==Mc||Wa.buffer!==Na||Wa.normalized!==Pa||Wa.offset!==ub||Wa.stride!==nb)fa.bindBuffer(34962,
Na.buffer),fa.vertexAttribPointer(hd,Mc,ic,Pa,nb,ub),Wa.type=ic,Wa.size=Mc,Wa.buffer=Na,Wa.normalized=Pa,Wa.offset=ub,Wa.stride=nb;Wa.divisor!==$b&&(d.vertexAttribDivisorANGLE(hd,$b),Wa.divisor=$b)}else if(Wa.buffer&&(fa.disableVertexAttribArray(hd),Wa.buffer=null),Wa.x!==vc||Wa.y!==ab||Wa.z!==lc||Wa.w!==Ac)fa.vertexAttrib4f(hd,vc,ab,lc,Ac),Wa.x=vc,Wa.y=ab,Wa.z=lc,Wa.w=Ac;Ab=e.call(this,aa,r,k);ac.offset=Ab;Ya=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;Qd=0;Fc=5126;td=Yc=Nc=ia=0;Ea(ac)?(Ya=!0,Vb=F.createStream(34962,
ac),Fc=Vb.dtype):(Vb=F.getBuffer(ac))?Fc=Vb.dtype:"constant"in ac?(Rb=2,"number"===typeof ac.constant?(Nc=ac.constant,Yc=td=ia=0):(Nc=0<ac.constant.length?ac.constant[0]:0,Yc=1<ac.constant.length?ac.constant[1]:0,td=2<ac.constant.length?ac.constant[2]:0,ia=3<ac.constant.length?ac.constant[3]:0)):(Vb=Ea(ac.buffer)?F.createStream(34962,ac.buffer):F.getBuffer(ac.buffer),Fc="type"in ac?xd[ac.type]:Vb.dtype,Wb=!!ac.normalized,Kc=ac.size|0,Qb=ac.offset|0,Qd=ac.stride|0,uc=ac.divisor|0);pc=A.location;wc=
n[pc];if(1===Rb){wc.buffer||fa.enableVertexAttribArray(pc);jc=Kc||4;if(wc.type!==Fc||wc.size!==jc||wc.buffer!==Vb||wc.normalized!==Wb||wc.offset!==Qb||wc.stride!==Qd)fa.bindBuffer(34962,Vb.buffer),fa.vertexAttribPointer(pc,jc,Fc,Wb,Qd,Qb),wc.type=Fc,wc.size=jc,wc.buffer=Vb,wc.normalized=Wb,wc.offset=Qb,wc.stride=Qd;wc.divisor!==uc&&(d.vertexAttribDivisorANGLE(pc,uc),wc.divisor=uc)}else if(wc.buffer&&(fa.disableVertexAttribArray(pc),wc.buffer=null),wc.x!==Nc||wc.y!==Yc||wc.z!==td||wc.w!==ia)fa.vertexAttrib4f(pc,
Nc,Yc,td,ia),wc.x=Nc,wc.y=Yc,wc.z=td,wc.w=ia;cb=R.call(this,aa,r,k);tc=cb[0];Xb=cb[1];kc=cb[2];Bc=cb[3];k&&Tb===tc&&fc===Xb&&yc===kc&&cd===Bc||(Tb=tc,fc=Xb,yc=kc,cd=Bc,fa.uniform4f(na.location,tc,Xb,kc,Bc));Qc=r.lineWidth;k&&Rc===Qc||(Rc=Qc,fa.uniform1f(ea.location,Qc));Sc=r.capSize;k&&Zc===Sc||(Zc=Sc,fa.uniform1f(sa.location,Sc));ld=r.scale;dd=ld[0];mc=ld[1];k&&$c===dd&&ec===mc||($c=dd,ec=mc,fa.uniform2f(p.location,dd,mc));ad=r.scaleFract;Uc=ad[0];zc=ad[1];k&&ed===Uc&&id===zc||(ed=Uc,id=zc,fa.uniform2f(L.location,
Uc,zc));pd=r.translate;we=pd[0];jd=pd[1];k&&ye===we&&$e===jd||(ye=we,$e=jd,fa.uniform2f(K.location,we,jd));Nd=r.translateFract;he=Nd[0];Od=Nd[1];k&&ce===he&&Kd===Od||(ce=he,Kd=Od,fa.uniform2f(za.location,he,Od));Id=r.opacity;k&&nd===Id||(nd=Id,fa.uniform1f(Q.location,Id));Tc=r.count;0<Tc?oc?d.drawElementsInstancedANGLE(4,36,oc.type,hc<<(oc.type-5121>>1),Tc):d.drawArraysInstancedANGLE(4,hc,36,Tc):0>Tc&&(oc?fa.drawElements(4,36,oc.type,hc<<(oc.type-5121>>1)):fa.drawArrays(4,hc,36));aa.viewportWidth=
$a;aa.viewportHeight=ob;jb&&F.destroyStream(Gb);eb&&F.destroyStream(gb);lb&&F.destroyStream(Na);Ya&&F.destroyStream(Vb)}M.dirty=!0;Ba.setVAO(null);h&&(ba.cpuTime+=performance.now()-m)},draw:function(b){var e,c,h,m,d,k,r,ja,w,g,u,qa,E,C,J,y,S,R,H,P,N,Ta,Z,ga,Aa,pa,ca,V,mb,W,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b;e=xa.next;e!==xa.cur&&(e?
fa.bindFramebuffer(36160,e.framebuffer):fa.bindFramebuffer(36160,null),xa.cur=e);if(M.dirty){var Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,ia,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb;Pa=ka.dither;Pa!==M.dither&&(Pa?fa.enable(3024):fa.disable(3024),M.dither=Pa);ub=ka.depth_func;ub!==M.depth_func&&(fa.depthFunc(ub),M.depth_func=ub);vb=Bd[0];Sa=Bd[1];if(vb!==Hb[0]||Sa!==Hb[1])fa.depthRange(vb,Sa),Hb[0]=vb,Hb[1]=Sa;nb=ka.depth_mask;nb!==M.depth_mask&&(fa.depthMask(nb),M.depth_mask=nb);ic=
va[0];Ac=va[1];vc=va[2];ab=va[3];if(ic!==wa[0]||Ac!==wa[1]||vc!==wa[2]||ab!==wa[3])fa.colorMask(ic,Ac,vc,ab),wa[0]=ic,wa[1]=Ac,wa[2]=vc,wa[3]=ab;lc=ka.cull_enable;lc!==M.cull_enable&&(lc?fa.enable(2884):fa.disable(2884),M.cull_enable=lc);hd=ka.cull_face;hd!==M.cull_face&&(fa.cullFace(hd),M.cull_face=hd);Wa=ka.frontFace;Wa!==M.frontFace&&(fa.frontFace(Wa),M.frontFace=Wa);Mc=ka.lineWidth;Mc!==M.lineWidth&&(fa.lineWidth(Mc),M.lineWidth=Mc);Ab=ka.polygonOffset_enable;Ab!==M.polygonOffset_enable&&(Ab?
fa.enable(32823):fa.disable(32823),M.polygonOffset_enable=Ab);Ya=ha[0];Vb=ha[1];if(Ya!==I[0]||Vb!==I[1])fa.polygonOffset(Ya,Vb),I[0]=Ya,I[1]=Vb;uc=ka.sample_alpha;uc!==M.sample_alpha&&(uc?fa.enable(32926):fa.disable(32926),M.sample_alpha=uc);Wb=ka.sample_enable;Wb!==M.sample_enable&&(Wb?fa.enable(32928):fa.disable(32928),M.sample_enable=Wb);Qb=ra[0];Kc=ra[1];if(Qb!==Fa[0]||Kc!==Fa[1])fa.sampleCoverage(Qb,Kc),Fa[0]=Qb,Fa[1]=Kc;Rb=ka.stencil_enable;Rb!==M.stencil_enable&&(Rb?fa.enable(2960):fa.disable(2960),
M.stencil_enable=Rb);ia=ka.stencil_mask;ia!==M.stencil_mask&&(fa.stencilMask(ia),M.stencil_mask=ia);Fc=Ga[0];Ed=Ga[1];Nc=Ga[2];if(Fc!==la[0]||Ed!==la[1]||Nc!==la[2])fa.stencilFunc(Fc,Ed,Nc),la[0]=Fc,la[1]=Ed,la[2]=Nc;Yc=Ja[0];td=Ja[1];pc=Ja[2];wc=Ja[3];if(Yc!==Da[0]||td!==Da[1]||pc!==Da[2]||wc!==Da[3])fa.stencilOpSeparate(Yc,td,pc,wc),Da[0]=Yc,Da[1]=td,Da[2]=pc,Da[3]=wc;jc=Y[0];cb=Y[1];tc=Y[2];Tb=Y[3];if(jc!==ua[0]||cb!==ua[1]||tc!==ua[2]||Tb!==ua[3])fa.stencilOpSeparate(jc,cb,tc,Tb),ua[0]=jc,ua[1]=
cb,ua[2]=tc,ua[3]=Tb}c=b.viewport;h=c.x|0;m=c.y|0;d="width"in c?c.width|0:aa.framebufferWidth-h;k="height"in c?c.height|0:aa.framebufferHeight-m;r=aa.viewportWidth;aa.viewportWidth=d;ja=aa.viewportHeight;aa.viewportHeight=k;fa.viewport(h,m,d,k);da[0]=h;da[1]=m;da[2]=d;da[3]=k;fa.blendColor(0,0,0,0);Yb[0]=0;Yb[1]=0;Yb[2]=0;Yb[3]=0;fa.enable(3042);M.blend_enable=!0;fa.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;fa.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;fa.disable(2929);
M.depth_enable=!1;w=b.viewport;g=w.x|0;u=w.y|0;qa="width"in w?w.width|0:aa.framebufferWidth-g;E="height"in w?w.height|0:aa.framebufferHeight-u;fa.scissor(g,u,qa,E);ya[0]=g;ya[1]=u;ya[2]=qa;ya[3]=E;fa.enable(3089);M.scissor_enable=!0;if(C=M.profile)J=performance.now(),ba.count++;fa.useProgram(q.program);y=Ca.angle_instanced_arrays;Ba.setVAO(null);S=f.call(this,aa,b,0);bc.offset=S;R=!1;H=null;P=0;N=!1;Z=Ta=0;ga=1;Aa=0;pa=5126;W=mb=V=ca=0;Ea(bc)?(R=!0,H=F.createStream(34962,bc),pa=H.dtype):(H=F.getBuffer(bc))?
pa=H.dtype:"constant"in bc?(ga=2,"number"===typeof bc.constant?(V=bc.constant,mb=W=ca=0):(V=0<bc.constant.length?bc.constant[0]:0,mb=1<bc.constant.length?bc.constant[1]:0,W=2<bc.constant.length?bc.constant[2]:0,ca=3<bc.constant.length?bc.constant[3]:0)):(H=Ea(bc.buffer)?F.createStream(34962,bc.buffer):F.getBuffer(bc.buffer),pa="type"in bc?xd[bc.type]:H.dtype,N=!!bc.normalized,Z=bc.size|0,Ta=bc.offset|0,Aa=bc.stride|0,P=bc.divisor|0);Bb=O.location;Fb=n[Bb];if(1===ga){Fb.buffer||fa.enableVertexAttribArray(Bb);
Dc=Z||2;if(Fb.type!==pa||Fb.size!==Dc||Fb.buffer!==H||Fb.normalized!==N||Fb.offset!==Ta||Fb.stride!==Aa)fa.bindBuffer(34962,H.buffer),fa.vertexAttribPointer(Bb,Dc,pa,N,Aa,Ta),Fb.type=pa,Fb.size=Dc,Fb.buffer=H,Fb.normalized=N,Fb.offset=Ta,Fb.stride=Aa;Fb.divisor!==P&&(y.vertexAttribDivisorANGLE(Bb,P),Fb.divisor=P)}else if(Fb.buffer&&(fa.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==V||Fb.y!==mb||Fb.z!==W||Fb.w!==ca)fa.vertexAttrib4f(Bb,V,mb,W,ca),Fb.x=V,Fb.y=mb,Fb.z=W,Fb.w=ca;xb=B.call(this,
aa,b,0);Sb.offset=xb;xc=!1;Cb=null;Jc=0;nc=!1;Xc=Hc=0;Vc=1;Ec=0;gc=5126;oc=rc=qc=Ic=0;Ea(Sb)?(xc=!0,Cb=F.createStream(34962,Sb),gc=Cb.dtype):(Cb=F.getBuffer(Sb))?gc=Cb.dtype:"constant"in Sb?(Vc=2,"number"===typeof Sb.constant?(qc=Sb.constant,rc=oc=Ic=0):(qc=0<Sb.constant.length?Sb.constant[0]:0,rc=1<Sb.constant.length?Sb.constant[1]:0,oc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Ea(Sb.buffer)?F.createStream(34962,Sb.buffer):F.getBuffer(Sb.buffer),gc="type"in
Sb?xd[Sb.type]:Cb.dtype,nc=!!Sb.normalized,Xc=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Jc=Sb.divisor|0);hc=z.location;Za=n[hc];if(1===Vc){Za.buffer||fa.enableVertexAttribArray(hc);cc=Xc||2;if(Za.type!==gc||Za.size!==cc||Za.buffer!==Cb||Za.normalized!==nc||Za.offset!==Hc||Za.stride!==Ec)fa.bindBuffer(34962,Cb.buffer),fa.vertexAttribPointer(hc,cc,gc,nc,Ec,Hc),Za.type=gc,Za.size=cc,Za.buffer=Cb,Za.normalized=nc,Za.offset=Hc,Za.stride=Ec;Za.divisor!==Jc&&(y.vertexAttribDivisorANGLE(hc,Jc),Za.divisor=Jc)}else if(Za.buffer&&
(fa.disableVertexAttribArray(hc),Za.buffer=null),Za.x!==qc||Za.y!==rc||Za.z!==oc||Za.w!==Ic)fa.vertexAttrib4f(hc,qc,rc,oc,Ic),Za.x=qc,Za.y=rc,Za.z=oc,Za.w=Ic;yb=D.call(this,aa,b,0);Ha.offset=yb;bb=!1;Nb=null;$a=0;ob=!1;yd=Ua=0;Ib=1;Jb=0;sc=5126;Db=Gb=jb=Ob=0;Ea(Ha)?(bb=!0,Nb=F.createStream(34962,Ha),sc=Nb.dtype):(Nb=F.getBuffer(Ha))?sc=Nb.dtype:"constant"in Ha?(Ib=2,"number"===typeof Ha.constant?(jb=Ha.constant,Gb=Db=Ob=0):(jb=0<Ha.constant.length?Ha.constant[0]:0,Gb=1<Ha.constant.length?Ha.constant[1]:
0,Db=2<Ha.constant.length?Ha.constant[2]:0,Ob=3<Ha.constant.length?Ha.constant[3]:0)):(Nb=Ea(Ha.buffer)?F.createStream(34962,Ha.buffer):F.getBuffer(Ha.buffer),sc="type"in Ha?xd[Ha.type]:Nb.dtype,ob=!!Ha.normalized,yd=Ha.size|0,Ua=Ha.offset|0,Jb=Ha.stride|0,$a=Ha.divisor|0);wb=db.location;hb=n[wb];if(1===Ib){hb.buffer||fa.enableVertexAttribArray(wb);Zb=yd||4;if(hb.type!==sc||hb.size!==Zb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Ua||hb.stride!==Jb)fa.bindBuffer(34962,Nb.buffer),fa.vertexAttribPointer(wb,
Zb,sc,ob,Jb,Ua),hb.type=sc,hb.size=Zb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Ua,hb.stride=Jb;hb.divisor!==$a&&(y.vertexAttribDivisorANGLE(wb,$a),hb.divisor=$a)}else if(hb.buffer&&(fa.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)fa.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=G.call(this,aa,b,0);ac.offset=Pb;qb=!1;Ra=null;Ub=0;zb=!1;ib=dc=0;pb=1;Ia=0;rb=5126;La=gb=eb=Ka=0;Ea(ac)?(qb=!0,Ra=F.createStream(34962,ac),rb=Ra.dtype):(Ra=F.getBuffer(ac))?
rb=Ra.dtype:"constant"in ac?(pb=2,"number"===typeof ac.constant?(eb=ac.constant,gb=La=Ka=0):(eb=0<ac.constant.length?ac.constant[0]:0,gb=1<ac.constant.length?ac.constant[1]:0,La=2<ac.constant.length?ac.constant[2]:0,Ka=3<ac.constant.length?ac.constant[3]:0)):(Ra=Ea(ac.buffer)?F.createStream(34962,ac.buffer):F.getBuffer(ac.buffer),rb="type"in ac?xd[ac.type]:Ra.dtype,zb=!!ac.normalized,ib=ac.size|0,dc=ac.offset|0,Ia=ac.stride|0,Ub=ac.divisor|0);kb=A.location;Va=n[kb];if(1===pb){Va.buffer||fa.enableVertexAttribArray(kb);
tb=ib||4;if(Va.type!==rb||Va.size!==tb||Va.buffer!==Ra||Va.normalized!==zb||Va.offset!==dc||Va.stride!==Ia)fa.bindBuffer(34962,Ra.buffer),fa.vertexAttribPointer(kb,tb,rb,zb,Ia,dc),Va.type=rb,Va.size=tb,Va.buffer=Ra,Va.normalized=zb,Va.offset=dc,Va.stride=Ia;Va.divisor!==Ub&&(y.vertexAttribDivisorANGLE(kb,Ub),Va.divisor=Ub)}else if(Va.buffer&&(fa.disableVertexAttribArray(kb),Va.buffer=null),Va.x!==eb||Va.y!==gb||Va.z!==La||Va.w!==Ka)fa.vertexAttrib4f(kb,eb,gb,La,Ka),Va.x=eb,Va.y=gb,Va.z=La,Va.w=Ka;
sb=ta.location;Oa=n[sb];Oa.buffer||fa.enableVertexAttribArray(sb);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==T||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)fa.bindBuffer(34962,T.buffer),fa.vertexAttribPointer(sb,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=T,Oa.normalized=!1,Oa.offset=0,Oa.stride=24;0!==Oa.divisor&&(y.vertexAttribDivisorANGLE(sb,0),Oa.divisor=0);Cc=X.location;Qa=n[Cc];Qa.buffer||fa.enableVertexAttribArray(Cc);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==x||!1!==Qa.normalized||
8!==Qa.offset||24!==Qa.stride)fa.bindBuffer(34962,x.buffer),fa.vertexAttribPointer(Cc,2,5126,!1,24,8),Qa.type=5126,Qa.size=2,Qa.buffer=x,Qa.normalized=!1,Qa.offset=8,Qa.stride=24;0!==Qa.divisor&&(y.vertexAttribDivisorANGLE(Cc,0),Qa.divisor=0);Kb=a.location;Eb=n[Kb];Eb.buffer||fa.enableVertexAttribArray(Kb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==t||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)fa.bindBuffer(34962,t.buffer),fa.vertexAttribPointer(Kb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,
Eb.buffer=t,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(y.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Ma=l.call(this,aa,b,0);fa.uniform4f(na.location,Ma[0],Ma[1],Ma[2],Ma[3]);fa.uniform1f(ea.location,b.lineWidth);fa.uniform1f(sa.location,b.capSize);wd=b.scale;fa.uniform2f(p.location,wd[0],wd[1]);Xa=b.scaleFract;fa.uniform2f(L.location,Xa[0],Xa[1]);Lb=b.translate;fa.uniform2f(K.location,Lb[0],Lb[1]);Mb=b.translateFract;fa.uniform2f(za.location,Mb[0],Mb[1]);fa.uniform1f(Q.location,
b.opacity);(lb=ma.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ba.currentVAO&&(lb=oa.getElements(Ba.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Na=ma.offset;$b=b.count;0<$b?lb?y.drawElementsInstancedANGLE(4,36,lb.type,Na<<(lb.type-5121>>1),$b):y.drawArraysInstancedANGLE(4,Na,36,$b):0>$b&&(lb?fa.drawElements(4,36,lb.type,Na<<(lb.type-5121>>1)):fa.drawArrays(4,Na,36));M.dirty=!0;Ba.setVAO(null);aa.viewportWidth=r;aa.viewportHeight=ja;C&&(ba.cpuTime+=performance.now()-J);R&&F.destroyStream(H);
xc&&F.destroyStream(Cb);bb&&F.destroyStream(Nb);qb&&F.destroyStream(Ra)},scope:function(a,e,f){var n,d,k,p,v,q,I,U,w,g,A,ra,Ba,Fa,O,Yb,z,fa,ha,Q,E,la,K,C,J,Y,va,L,ya,D,l,Ga,da,H,za,R,oa,xa,B,G,X,ua,ea,wa,V,na,Hb,sa,ta,Ca,Bd,Da,Ja,db,W,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,ia,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,
ad,Uc,ed,zc,id,pd,we,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,fb,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md;n=a.viewport;d=n.x|0;k=n.y|0;p="width"in n?n.width|0:aa.framebufferWidth-d;v="height"in n?n.height|0:aa.framebufferHeight-k;q=aa.viewportWidth;aa.viewportWidth=p;I=aa.viewportHeight;aa.viewportHeight=v;U=mb[0];mb[0]=d;w=mb[1];mb[1]=k;g=mb[2];mb[2]=p;A=mb[3];mb[3]=v;ra=ja[0];ja[0]=0;Ba=ja[1];ja[1]=0;Fa=ja[2];ja[2]=0;O=ja[3];ja[3]=0;Yb=
ka.blend_enable;ka.blend_enable=!0;z=Ta[0];Ta[0]=32774;fa=Ta[1];Ta[1]=32774;ha=m[0];m[0]=770;Q=m[1];m[1]=771;E=m[2];m[2]=773;la=m[3];m[3]=1;K=ka.depth_enable;ka.depth_enable=!1;C=a.viewport;J=C.x|0;Y=C.y|0;va="width"in C?C.width|0:aa.framebufferWidth-J;L="height"in C?C.height|0:aa.framebufferHeight-Y;ya=qa[0];qa[0]=J;D=qa[1];qa[1]=Y;l=qa[2];qa[2]=va;Ga=qa[3];qa[3]=L;da=ka.scissor_enable;ka.scissor_enable=!0;if(H=M.profile)za=performance.now(),ba.count++;R=ma.count;ma.count=36;oa=a.count;xa=ma.instances;
ma.instances=oa;B=ma.primitive;ma.primitive=4;G=a.capSize;X=Aa[5];Aa[5]=G;ua=a.lineWidth;ea=Aa[4];Aa[4]=ua;wa=a.opacity;V=Aa[10];Aa[10]=wa;na=a.range;Hb=Aa[18];Aa[18]=na;sa=a.scale;ta=Aa[6];Aa[6]=sa;Ca=a.scaleFract;Bd=Aa[7];Aa[7]=Ca;Da=a.translate;Ja=Aa[8];Aa[8]=Da;db=a.translateFract;W=Aa[9];Aa[9]=db;Ib=ca.call(this,aa,a,f);Jb=Aa[3];Aa[3]=Ib;sc=u.buffer;u.buffer=t;Ob=u.divisor;u.divisor=0;jb=u.normalized;u.normalized=!1;Gb=u.offset;u.offset=16;Db=u.size;u.size=0;wb=u.state;u.state=1;hb=u.stride;
u.stride=24;Zb=u.type;u.type=5126;Pb=u.w;u.w=0;qb=u.x;u.x=0;Ra=u.y;u.y=0;Ub=u.z;u.z=0;zb=N.call(this,aa,a,f);ac.offset=zb;dc=!1;ib=null;pb=0;Ia=!1;Ka=rb=0;eb=1;gb=0;La=5126;sb=tb=Va=kb=0;Ea(ac)?(dc=!0,ib=F.createStream(34962,ac),La=ib.dtype):(ib=F.getBuffer(ac))?La=ib.dtype:"constant"in ac?(eb=2,"number"===typeof ac.constant?(Va=ac.constant,tb=sb=kb=0):(Va=0<ac.constant.length?ac.constant[0]:0,tb=1<ac.constant.length?ac.constant[1]:0,sb=2<ac.constant.length?ac.constant[2]:0,kb=3<ac.constant.length?
ac.constant[3]:0)):(ib=Ea(ac.buffer)?F.createStream(34962,ac.buffer):F.getBuffer(ac.buffer),La="type"in ac?xd[ac.type]:ib.dtype,Ia=!!ac.normalized,Ka=ac.size|0,rb=ac.offset|0,gb=ac.stride|0,pb=ac.divisor|0);Oa=y.buffer;y.buffer=ib;Cc=y.divisor;y.divisor=pb;Qa=y.normalized;y.normalized=Ia;Kb=y.offset;y.offset=rb;Eb=y.size;y.size=Ka;Ma=y.state;y.state=eb;wd=y.stride;y.stride=gb;Xa=y.type;y.type=La;Lb=y.w;y.w=kb;Mb=y.x;y.x=Va;lb=y.y;y.y=tb;Na=y.z;y.z=sb;$b=P.buffer;P.buffer=T;Pa=P.divisor;P.divisor=
0;ub=P.normalized;P.normalized=!1;vb=P.offset;P.offset=0;Sa=P.size;P.size=0;nb=P.state;P.state=1;ic=P.stride;P.stride=24;Ac=P.type;P.type=5126;vc=P.w;P.w=0;ab=P.x;P.x=0;lc=P.y;P.y=0;ia=P.z;P.z=0;Wa=ga.call(this,aa,a,f);Ha.offset=Wa;Mc=!1;Ab=null;Ya=0;Vb=!1;Wb=uc=0;Qb=1;Kc=0;Rb=5126;Nc=Ed=Fc=Qd=0;Ea(Ha)?(Mc=!0,Ab=F.createStream(34962,Ha),Rb=Ab.dtype):(Ab=F.getBuffer(Ha))?Rb=Ab.dtype:"constant"in Ha?(Qb=2,"number"===typeof Ha.constant?(Fc=Ha.constant,Ed=Nc=Qd=0):(Fc=0<Ha.constant.length?Ha.constant[0]:
0,Ed=1<Ha.constant.length?Ha.constant[1]:0,Nc=2<Ha.constant.length?Ha.constant[2]:0,Qd=3<Ha.constant.length?Ha.constant[3]:0)):(Ab=Ea(Ha.buffer)?F.createStream(34962,Ha.buffer):F.getBuffer(Ha.buffer),Rb="type"in Ha?xd[Ha.type]:Ab.dtype,Vb=!!Ha.normalized,Wb=Ha.size|0,uc=Ha.offset|0,Kc=Ha.stride|0,Ya=Ha.divisor|0);Yc=c.buffer;c.buffer=Ab;td=c.divisor;c.divisor=Ya;pc=c.normalized;c.normalized=Vb;wc=c.offset;c.offset=uc;jc=c.size;c.size=Wb;cb=c.state;c.state=Qb;tc=c.stride;c.stride=Kc;Tb=c.type;c.type=
Rb;Xb=c.w;c.w=Qd;fc=c.x;c.x=Fc;kc=c.y;c.y=Ed;yc=c.z;c.z=Nc;Bc=b.buffer;b.buffer=x;cd=b.divisor;b.divisor=0;Qc=b.normalized;b.normalized=!1;Rc=b.offset;b.offset=8;Sc=b.size;b.size=0;Zc=b.state;b.state=1;ld=b.stride;b.stride=24;dd=b.type;b.type=5126;$c=b.w;b.w=0;mc=b.x;b.x=0;ec=b.y;b.y=0;ad=b.z;b.z=0;Uc=S.call(this,aa,a,f);bc.offset=Uc;ed=!1;zc=null;id=0;pd=!1;ye=we=0;jd=1;$e=0;Nd=5126;Kd=Od=ce=he=0;Ea(bc)?(ed=!0,zc=F.createStream(34962,bc),Nd=zc.dtype):(zc=F.getBuffer(bc))?Nd=zc.dtype:"constant"in
bc?(jd=2,"number"===typeof bc.constant?(ce=bc.constant,Od=Kd=he=0):(ce=0<bc.constant.length?bc.constant[0]:0,Od=1<bc.constant.length?bc.constant[1]:0,Kd=2<bc.constant.length?bc.constant[2]:0,he=3<bc.constant.length?bc.constant[3]:0)):(zc=Ea(bc.buffer)?F.createStream(34962,bc.buffer):F.getBuffer(bc.buffer),Nd="type"in bc?xd[bc.type]:zc.dtype,pd=!!bc.normalized,ye=bc.size|0,we=bc.offset|0,$e=bc.stride|0,id=bc.divisor|0);Id=r.buffer;r.buffer=zc;nd=r.divisor;r.divisor=id;Tc=r.normalized;r.normalized=
pd;ud=r.offset;r.offset=we;sd=r.size;r.size=ye;kd=r.state;r.state=jd;vd=r.stride;r.stride=$e;Cd=r.type;r.type=Nd;Fd=r.w;r.w=he;xe=r.x;r.x=ce;ke=r.y;r.y=Od;fb=r.z;r.z=Kd;le=Z.call(this,aa,a,f);Sb.offset=le;je=!1;ie=null;te=0;de=!1;Oc=ne=0;gd=1;ue=0;qe=5126;Sd=Rd=Pd=Ld=0;Ea(Sb)?(je=!0,ie=F.createStream(34962,Sb),qe=ie.dtype):(ie=F.getBuffer(Sb))?qe=ie.dtype:"constant"in Sb?(gd=2,"number"===typeof Sb.constant?(Pd=Sb.constant,Rd=Sd=Ld=0):(Pd=0<Sb.constant.length?Sb.constant[0]:0,Rd=1<Sb.constant.length?
Sb.constant[1]:0,Sd=2<Sb.constant.length?Sb.constant[2]:0,Ld=3<Sb.constant.length?Sb.constant[3]:0)):(ie=Ea(Sb.buffer)?F.createStream(34962,Sb.buffer):F.getBuffer(Sb.buffer),qe="type"in Sb?xd[Sb.type]:ie.dtype,de=!!Sb.normalized,Oc=Sb.size|0,ne=Sb.offset|0,ue=Sb.stride|0,te=Sb.divisor|0);oe=h.buffer;h.buffer=ie;Ge=h.divisor;h.divisor=te;Be=h.normalized;h.normalized=de;re=h.offset;h.offset=ne;Re=h.size;h.size=Oc;Se=h.state;h.state=gd;Oe=h.stride;h.stride=ue;ve=h.type;h.type=qe;He=h.w;h.w=Ld;Je=h.x;
h.x=Pd;Ke=h.y;h.y=Rd;Le=h.z;h.z=Sd;Ie=pa.vert;pa.vert=2;Md=pa.frag;pa.frag=1;M.dirty=!0;e(aa,a,f);aa.viewportWidth=q;aa.viewportHeight=I;mb[0]=U;mb[1]=w;mb[2]=g;mb[3]=A;ja[0]=ra;ja[1]=Ba;ja[2]=Fa;ja[3]=O;ka.blend_enable=Yb;Ta[0]=z;Ta[1]=fa;m[0]=ha;m[1]=Q;m[2]=E;m[3]=la;ka.depth_enable=K;qa[0]=ya;qa[1]=D;qa[2]=l;qa[3]=Ga;ka.scissor_enable=da;H&&(ba.cpuTime+=performance.now()-za);ma.count=R;ma.instances=xa;ma.primitive=B;Aa[5]=X;Aa[4]=ea;Aa[10]=V;Aa[18]=Hb;Aa[6]=ta;Aa[7]=Bd;Aa[8]=Ja;Aa[9]=W;Aa[3]=Jb;
u.buffer=sc;u.divisor=Ob;u.normalized=jb;u.offset=Gb;u.size=Db;u.state=wb;u.stride=hb;u.type=Zb;u.w=Pb;u.x=qb;u.y=Ra;u.z=Ub;dc&&F.destroyStream(ib);y.buffer=Oa;y.divisor=Cc;y.normalized=Qa;y.offset=Kb;y.size=Eb;y.state=Ma;y.stride=wd;y.type=Xa;y.w=Lb;y.x=Mb;y.y=lb;y.z=Na;P.buffer=$b;P.divisor=Pa;P.normalized=ub;P.offset=vb;P.size=Sa;P.state=nb;P.stride=ic;P.type=Ac;P.w=vc;P.x=ab;P.y=lc;P.z=ia;Mc&&F.destroyStream(Ab);c.buffer=Yc;c.divisor=td;c.normalized=pc;c.offset=wc;c.size=jc;c.state=cb;c.stride=
tc;c.type=Tb;c.w=Xb;c.x=fc;c.y=kc;c.z=yc;b.buffer=Bc;b.divisor=cd;b.normalized=Qc;b.offset=Rc;b.size=Sc;b.state=Zc;b.stride=ld;b.type=dd;b.w=$c;b.x=mc;b.y=ec;b.z=ad;ed&&F.destroyStream(zc);r.buffer=Id;r.divisor=nd;r.normalized=Tc;r.offset=ud;r.size=sd;r.state=kd;r.stride=vd;r.type=Cd;r.w=Fd;r.x=xe;r.y=ke;r.z=fb;je&&F.destroyStream(ie);h.buffer=oe;h.divisor=Ge;h.normalized=Be;h.offset=re;h.size=Re;h.state=Se;h.stride=Oe;h.type=ve;h.w=He;h.x=Je;h.y=Ke;h.z=Le;pa.vert=Ie;pa.frag=Md;M.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(d,
ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta){var db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,Bd,Hb,ha,I,ra,Fa,qa,ya,Ga,la,Y;db=d.attributes;X=d.buffer;ea=d.context;Q=d.current;O=d.draw;z=d.elements;p=d.extensions;L=d.framebuffer;K=d.gl;za=d.isBufferArgs;na=d.next;n=d.shader;F=d.uniforms;aa=d.vao;M=na.blend_color;ma=Q.blend_color;oa=na.blend_equation;Ca=Q.blend_equation;xa=na.blend_func;fa=Q.blend_func;Ea=na.colorMask;ka=Q.colorMask;
pa=na.depth_range;Aa=Q.depth_range;Ba=na.polygonOffset_offset;ja=Q.polygonOffset_offset;Yb=na.sample_coverage;Ta=Q.sample_coverage;v=na.scissor_box;m=Q.scissor_box;U=na.stencil_func;va=Q.stencil_func;wa=na.stencil_opBack;Bd=Q.stencil_opBack;Hb=na.stencil_opFront;ha=Q.stencil_opFront;I=na.viewport;ra=Q.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};qa={divisor:1,offset:8,stride:8};ya={divisor:1,offset:8,stride:8};Ga={divisor:1,offset:16,stride:8};
la={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(f,n){var d,v,q,I,F,M;d=L.next;d!==L.cur&&(d?K.bindFramebuffer(36160,d.framebuffer):K.bindFramebuffer(36160,null),L.cur=d);if(Q.dirty){var u,J,t,x,D,l,H,oa,xa,B,G,T,ca,W,ae,Ce,Ye,Ze,Hd,Ae,se,Yd,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc;u=na.dither;u!==Q.dither&&(u?K.enable(3024):K.disable(3024),Q.dither=u);J=na.depth_func;J!==Q.depth_func&&(K.depthFunc(J),Q.depth_func=J);t=pa[0];x=pa[1];if(t!==Aa[0]||x!==Aa[1])K.depthRange(t,
x),Aa[0]=t,Aa[1]=x;D=na.depth_mask;D!==Q.depth_mask&&(K.depthMask(D),Q.depth_mask=D);l=Ea[0];H=Ea[1];oa=Ea[2];xa=Ea[3];if(l!==ka[0]||H!==ka[1]||oa!==ka[2]||xa!==ka[3])K.colorMask(l,H,oa,xa),ka[0]=l,ka[1]=H,ka[2]=oa,ka[3]=xa;B=na.cull_enable;B!==Q.cull_enable&&(B?K.enable(2884):K.disable(2884),Q.cull_enable=B);G=na.cull_face;G!==Q.cull_face&&(K.cullFace(G),Q.cull_face=G);T=na.frontFace;T!==Q.frontFace&&(K.frontFace(T),Q.frontFace=T);ca=na.lineWidth;ca!==Q.lineWidth&&(K.lineWidth(ca),Q.lineWidth=ca);
W=na.polygonOffset_enable;W!==Q.polygonOffset_enable&&(W?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=W);ae=Ba[0];Ce=Ba[1];if(ae!==ja[0]||Ce!==ja[1])K.polygonOffset(ae,Ce),ja[0]=ae,ja[1]=Ce;Ye=na.sample_alpha;Ye!==Q.sample_alpha&&(Ye?K.enable(32926):K.disable(32926),Q.sample_alpha=Ye);Ze=na.sample_enable;Ze!==Q.sample_enable&&(Ze?K.enable(32928):K.disable(32928),Q.sample_enable=Ze);Hd=Yb[0];Ae=Yb[1];if(Hd!==Ta[0]||Ae!==Ta[1])K.sampleCoverage(Hd,Ae),Ta[0]=Hd,Ta[1]=Ae;se=na.stencil_mask;
se!==Q.stencil_mask&&(K.stencilMask(se),Q.stencil_mask=se);Yd=U[0];Ad=U[1];Zd=U[2];if(Yd!==va[0]||Ad!==va[1]||Zd!==va[2])K.stencilFunc(Yd,Ad,Zd),va[0]=Yd,va[1]=Ad,va[2]=Zd;md=Hb[0];bd=Hb[1];rd=Hb[2];Lc=Hb[3];if(md!==ha[0]||bd!==ha[1]||rd!==ha[2]||Lc!==ha[3])K.stencilOpSeparate(md,bd,rd,Lc),ha[0]=md,ha[1]=bd,ha[2]=rd,ha[3]=Lc;od=wa[0];Gc=wa[1];fd=wa[2];Pc=wa[3];if(od!==Bd[0]||Gc!==Bd[1]||fd!==Bd[2]||Pc!==Bd[3])K.stencilOpSeparate(od,Gc,fd,Pc),Bd[0]=od,Bd[1]=Gc,Bd[2]=fd,Bd[3]=Pc}K.blendColor(0,0,0,
0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;K.enable(3042);Q.blend_enable=!0;K.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;K.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;K.enable(3089);Q.scissor_enable=!0;K.disable(2960);Q.stencil_enable=!1;if(v=Q.profile)q=performance.now(),ba.count+=n;K.useProgram(N.program);I=p.angle_instanced_arrays;var Wc,Bb,Fb,Dc,xb;aa.setVAO(null);Wc=V.location;Bb=db[Wc];Bb.buffer||K.enableVertexAttribArray(Wc);if(5126!==Bb.type||1!==Bb.size||
Bb.buffer!==g||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)K.bindBuffer(34962,g.buffer),K.vertexAttribPointer(Wc,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=g,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(I.vertexAttribDivisorANGLE(Wc,0),Bb.divisor=0);Fb=E.location;Dc=db[Fb];Dc.buffer||K.enableVertexAttribArray(Fb);if(5126!==Dc.type||1!==Dc.size||Dc.buffer!==k||!1!==Dc.normalized||4!==Dc.offset||8!==Dc.stride)K.bindBuffer(34962,k.buffer),K.vertexAttribPointer(Fb,1,5126,!1,8,4),
Dc.type=5126,Dc.size=1,Dc.buffer=k,Dc.normalized=!1,Dc.offset=4,Dc.stride=8;0!==Dc.divisor&&(I.vertexAttribDivisorANGLE(Fb,0),Dc.divisor=0);(xb=O.elements)?K.bindBuffer(34963,xb.buffer.buffer):aa.currentVAO&&(xb=z.getElements(aa.currentVAO.elements))&&K.bindBuffer(34963,xb.buffer.buffer);for(F=0;F<n;++F){M=f[F];var xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,ia,Xa,Lb,Mb,lb,
Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd;xc=M.viewport;Cb=xc.x|0;Jc=xc.y|0;nc="width"in xc?xc.width|0:ea.framebufferWidth-Cb;Hc="height"in xc?xc.height|0:ea.framebufferHeight-Jc;Xc=ea.viewportWidth;ea.viewportWidth=nc;Vc=ea.viewportHeight;ea.viewportHeight=Hc;K.viewport(Cb,Jc,nc,Hc);ra[0]=Cb;ra[1]=Jc;ra[2]=nc;ra[3]=Hc;(Ec=y.call(this,
ea,M,F))?K.enable(2929):K.disable(2929);Q.depth_enable=Ec;gc=M.viewport;Ic=gc.x|0;qc=gc.y|0;rc="width"in gc?gc.width|0:ea.framebufferWidth-Ic;oc="height"in gc?gc.height|0:ea.framebufferHeight-qc;K.scissor(Ic,qc,rc,oc);m[0]=Ic;m[1]=qc;m[2]=rc;m[3]=oc;qa.buffer=M.positionBuffer;hc=!1;Za=null;cc=0;yb=!1;Nb=bb=0;$a=1;ob=0;Ua=5126;sc=Jb=Ib=yd=0;za(qa)?(hc=!0,Za=X.createStream(34962,qa),Ua=Za.dtype):(Za=X.getBuffer(qa))?Ua=Za.dtype:"constant"in qa?($a=2,"number"===typeof qa.constant?(Ib=qa.constant,Jb=
sc=yd=0):(Ib=0<qa.constant.length?qa.constant[0]:0,Jb=1<qa.constant.length?qa.constant[1]:0,sc=2<qa.constant.length?qa.constant[2]:0,yd=3<qa.constant.length?qa.constant[3]:0)):(Za=za(qa.buffer)?X.createStream(34962,qa.buffer):X.getBuffer(qa.buffer),Ua="type"in qa?Fa[qa.type]:Za.dtype,yb=!!qa.normalized,Nb=qa.size|0,bb=qa.offset|0,ob=qa.stride|0,cc=qa.divisor|0);Ob=ga.location;jb=db[Ob];if(1===$a){jb.buffer||K.enableVertexAttribArray(Ob);Gb=Nb||2;if(jb.type!==Ua||jb.size!==Gb||jb.buffer!==Za||jb.normalized!==
yb||jb.offset!==bb||jb.stride!==ob)K.bindBuffer(34962,Za.buffer),K.vertexAttribPointer(Ob,Gb,Ua,yb,ob,bb),jb.type=Ua,jb.size=Gb,jb.buffer=Za,jb.normalized=yb,jb.offset=bb,jb.stride=ob;jb.divisor!==cc&&(I.vertexAttribDivisorANGLE(Ob,cc),jb.divisor=cc)}else if(jb.buffer&&(K.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==sc||jb.w!==yd)K.vertexAttrib4f(Ob,Ib,Jb,sc,yd),jb.x=Ib,jb.y=Jb,jb.z=sc,jb.w=yd;Ga.buffer=M.positionBuffer;Db=!1;wb=null;hb=0;Zb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;
Ia=pb=ib=dc=0;za(Ga)?(Db=!0,wb=X.createStream(34962,Ga),zb=wb.dtype):(wb=X.getBuffer(Ga))?zb=wb.dtype:"constant"in Ga?(Ra=2,"number"===typeof Ga.constant?(ib=Ga.constant,pb=Ia=dc=0):(ib=0<Ga.constant.length?Ga.constant[0]:0,pb=1<Ga.constant.length?Ga.constant[1]:0,Ia=2<Ga.constant.length?Ga.constant[2]:0,dc=3<Ga.constant.length?Ga.constant[3]:0)):(wb=za(Ga.buffer)?X.createStream(34962,Ga.buffer):X.getBuffer(Ga.buffer),zb="type"in Ga?Fa[Ga.type]:wb.dtype,Zb=!!Ga.normalized,qb=Ga.size|0,Pb=Ga.offset|
0,Ub=Ga.stride|0,hb=Ga.divisor|0);rb=b.location;Ka=db[rb];if(1===Ra){Ka.buffer||K.enableVertexAttribArray(rb);eb=qb||2;if(Ka.type!==zb||Ka.size!==eb||Ka.buffer!==wb||Ka.normalized!==Zb||Ka.offset!==Pb||Ka.stride!==Ub)K.bindBuffer(34962,wb.buffer),K.vertexAttribPointer(rb,eb,zb,Zb,Ub,Pb),Ka.type=zb,Ka.size=eb,Ka.buffer=wb,Ka.normalized=Zb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(I.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(K.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==
ib||Ka.y!==pb||Ka.z!==Ia||Ka.w!==dc)K.vertexAttrib4f(rb,ib,pb,Ia,dc),Ka.x=ib,Ka.y=pb,Ka.z=Ia,Ka.w=dc;ya.buffer=M.positionFractBuffer;gb=!1;La=null;kb=0;Va=!1;sb=tb=0;Oa=1;Cc=0;Qa=5126;ia=Ma=Eb=Kb=0;za(ya)?(gb=!0,La=X.createStream(34962,ya),Qa=La.dtype):(La=X.getBuffer(ya))?Qa=La.dtype:"constant"in ya?(Oa=2,"number"===typeof ya.constant?(Eb=ya.constant,Ma=ia=Kb=0):(Eb=0<ya.constant.length?ya.constant[0]:0,Ma=1<ya.constant.length?ya.constant[1]:0,ia=2<ya.constant.length?ya.constant[2]:0,Kb=3<ya.constant.length?
ya.constant[3]:0)):(La=za(ya.buffer)?X.createStream(34962,ya.buffer):X.getBuffer(ya.buffer),Qa="type"in ya?Fa[ya.type]:La.dtype,Va=!!ya.normalized,sb=ya.size|0,tb=ya.offset|0,Cc=ya.stride|0,kb=ya.divisor|0);Xa=c.location;Lb=db[Xa];if(1===Oa){Lb.buffer||K.enableVertexAttribArray(Xa);Mb=sb||2;if(Lb.type!==Qa||Lb.size!==Mb||Lb.buffer!==La||Lb.normalized!==Va||Lb.offset!==tb||Lb.stride!==Cc)K.bindBuffer(34962,La.buffer),K.vertexAttribPointer(Xa,Mb,Qa,Va,Cc,tb),Lb.type=Qa,Lb.size=Mb,Lb.buffer=La,Lb.normalized=
Va,Lb.offset=tb,Lb.stride=Cc;Lb.divisor!==kb&&(I.vertexAttribDivisorANGLE(Xa,kb),Lb.divisor=kb)}else if(Lb.buffer&&(K.disableVertexAttribArray(Xa),Lb.buffer=null),Lb.x!==Eb||Lb.y!==Ma||Lb.z!==ia||Lb.w!==Kb)K.vertexAttrib4f(Xa,Eb,Ma,ia,Kb),Lb.x=Eb,Lb.y=Ma,Lb.z=ia,Lb.w=Kb;la.buffer=M.positionFractBuffer;lb=!1;Na=null;$b=0;Pa=!1;vb=ub=0;Sa=1;nb=0;ic=5126;lc=ab=vc=Ac=0;za(la)?(lb=!0,Na=X.createStream(34962,la),ic=Na.dtype):(Na=X.getBuffer(la))?ic=Na.dtype:"constant"in la?(Sa=2,"number"===typeof la.constant?
(vc=la.constant,ab=lc=Ac=0):(vc=0<la.constant.length?la.constant[0]:0,ab=1<la.constant.length?la.constant[1]:0,lc=2<la.constant.length?la.constant[2]:0,Ac=3<la.constant.length?la.constant[3]:0)):(Na=za(la.buffer)?X.createStream(34962,la.buffer):X.getBuffer(la.buffer),ic="type"in la?Fa[la.type]:Na.dtype,Pa=!!la.normalized,vb=la.size|0,ub=la.offset|0,nb=la.stride|0,$b=la.divisor|0);hd=S.location;Wa=db[hd];if(1===Sa){Wa.buffer||K.enableVertexAttribArray(hd);Mc=vb||2;if(Wa.type!==ic||Wa.size!==Mc||Wa.buffer!==
Na||Wa.normalized!==Pa||Wa.offset!==ub||Wa.stride!==nb)K.bindBuffer(34962,Na.buffer),K.vertexAttribPointer(hd,Mc,ic,Pa,nb,ub),Wa.type=ic,Wa.size=Mc,Wa.buffer=Na,Wa.normalized=Pa,Wa.offset=ub,Wa.stride=nb;Wa.divisor!==$b&&(I.vertexAttribDivisorANGLE(hd,$b),Wa.divisor=$b)}else if(Wa.buffer&&(K.disableVertexAttribArray(hd),Wa.buffer=null),Wa.x!==vc||Wa.y!==ab||Wa.z!==lc||Wa.w!==Ac)K.vertexAttrib4f(hd,vc,ab,lc,Ac),Wa.x=vc,Wa.y=ab,Wa.z=lc,Wa.w=Ac;Y.buffer=M.colorBuffer;Ab=!1;Ya=null;Vb=0;uc=!1;Qb=Wb=0;
Kc=1;Rb=0;Qd=5126;Yc=Nc=Ed=Fc=0;za(Y)?(Ab=!0,Ya=X.createStream(34962,Y),Qd=Ya.dtype):(Ya=X.getBuffer(Y))?Qd=Ya.dtype:"constant"in Y?(Kc=2,"number"===typeof Y.constant?(Ed=Y.constant,Nc=Yc=Fc=0):(Ed=0<Y.constant.length?Y.constant[0]:0,Nc=1<Y.constant.length?Y.constant[1]:0,Yc=2<Y.constant.length?Y.constant[2]:0,Fc=3<Y.constant.length?Y.constant[3]:0)):(Ya=za(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),Qd="type"in Y?Fa[Y.type]:Ya.dtype,uc=!!Y.normalized,Qb=Y.size|0,Wb=Y.offset|0,
Rb=Y.stride|0,Vb=Y.divisor|0);td=r.location;pc=db[td];if(1===Kc){pc.buffer||K.enableVertexAttribArray(td);wc=Qb||4;if(pc.type!==Qd||pc.size!==wc||pc.buffer!==Ya||pc.normalized!==uc||pc.offset!==Wb||pc.stride!==Rb)K.bindBuffer(34962,Ya.buffer),K.vertexAttribPointer(td,wc,Qd,uc,Rb,Wb),pc.type=Qd,pc.size=wc,pc.buffer=Ya,pc.normalized=uc,pc.offset=Wb,pc.stride=Rb;pc.divisor!==Vb&&(I.vertexAttribDivisorANGLE(td,Vb),pc.divisor=Vb)}else if(pc.buffer&&(K.disableVertexAttribArray(td),pc.buffer=null),pc.x!==
Ed||pc.y!==Nc||pc.z!==Yc||pc.w!==Fc)K.vertexAttrib4f(td,Ed,Nc,Yc,Fc),pc.x=Ed,pc.y=Nc,pc.z=Yc,pc.w=Fc;jc=M.scale;cb=jc[0];Tb=jc[1];F&&tc===cb&&Xb===Tb||(tc=cb,Xb=Tb,K.uniform2f(e.location,cb,Tb));fc=M.scaleFract;kc=fc[0];Bc=fc[1];F&&yc===kc&&cd===Bc||(yc=kc,cd=Bc,K.uniform2f(R.location,kc,Bc));Qc=M.translate;Rc=Qc[0];Zc=Qc[1];F&&Sc===Rc&&ld===Zc||(Sc=Rc,ld=Zc,K.uniform2f(sa.location,Rc,Zc));dd=M.translateFract;$c=dd[0];ec=dd[1];F&&mc===$c&&ad===ec||(mc=$c,ad=ec,K.uniform2f(A.location,$c,ec));Uc=M.thickness;
F&&ed===Uc||(ed=Uc,K.uniform1f(a.location,Uc));zc=M.depth;F&&id===zc||(id=zc,K.uniform1f(w.location,zc));pd=P.call(this,ea,M,F);we=pd[0];jd=pd[1];Nd=pd[2];ce=pd[3];F&&ye===we&&$e===jd&&he===Nd&&Od===ce||(ye=we,$e=jd,he=Nd,Od=ce,K.uniform4f(ta.location,we,jd,Nd,ce));Kd=M.dashLength;F&&Id===Kd||(Id=Kd,K.uniform1f(Z.location,Kd));nd=M.opacity;F&&Tc===nd||(Tc=nd,K.uniform1f(C.location,nd));(ud=M.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);sd=ud._texture;K.uniform1i(h.location,sd.bind());
kd=M.count;0<kd?xb?I.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),kd):I.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(xb?K.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):K.drawArrays(5,0,4));ea.viewportWidth=Xc;ea.viewportHeight=Vc;hc&&X.destroyStream(Za);Db&&X.destroyStream(wb);gb&&X.destroyStream(La);lb&&X.destroyStream(Na);Ab&&X.destroyStream(Ya);sd.unbind()}Q.dirty=!0;aa.setVAO(null);v&&(ba.cpuTime+=performance.now()-q)},draw:function(f){var n,d,v,I,F,M,u,t,y,x,D,l,oa,xa,P,B,G,N,T,
ca,W,ae,Ce,Ye,Ze,Hd,Ae,se,Yd,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,ia,Xa,Lb,Mb,lb,Na,$b,Pa,ub;n=L.next;n!==L.cur&&(n?K.bindFramebuffer(36160,n.framebuffer):K.bindFramebuffer(36160,null),L.cur=n);if(Q.dirty){var vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb;vb=na.dither;vb!==
Q.dither&&(vb?K.enable(3024):K.disable(3024),Q.dither=vb);Sa=na.depth_func;Sa!==Q.depth_func&&(K.depthFunc(Sa),Q.depth_func=Sa);nb=pa[0];ic=pa[1];if(nb!==Aa[0]||ic!==Aa[1])K.depthRange(nb,ic),Aa[0]=nb,Aa[1]=ic;Ac=na.depth_mask;Ac!==Q.depth_mask&&(K.depthMask(Ac),Q.depth_mask=Ac);vc=Ea[0];ab=Ea[1];lc=Ea[2];hd=Ea[3];if(vc!==ka[0]||ab!==ka[1]||lc!==ka[2]||hd!==ka[3])K.colorMask(vc,ab,lc,hd),ka[0]=vc,ka[1]=ab,ka[2]=lc,ka[3]=hd;Wa=na.cull_enable;Wa!==Q.cull_enable&&(Wa?K.enable(2884):K.disable(2884),Q.cull_enable=
Wa);Mc=na.cull_face;Mc!==Q.cull_face&&(K.cullFace(Mc),Q.cull_face=Mc);Ab=na.frontFace;Ab!==Q.frontFace&&(K.frontFace(Ab),Q.frontFace=Ab);Ya=na.lineWidth;Ya!==Q.lineWidth&&(K.lineWidth(Ya),Q.lineWidth=Ya);Vb=na.polygonOffset_enable;Vb!==Q.polygonOffset_enable&&(Vb?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=Vb);uc=Ba[0];Wb=Ba[1];if(uc!==ja[0]||Wb!==ja[1])K.polygonOffset(uc,Wb),ja[0]=uc,ja[1]=Wb;Qb=na.sample_alpha;Qb!==Q.sample_alpha&&(Qb?K.enable(32926):K.disable(32926),Q.sample_alpha=
Qb);Kc=na.sample_enable;Kc!==Q.sample_enable&&(Kc?K.enable(32928):K.disable(32928),Q.sample_enable=Kc);Rb=Yb[0];Qd=Yb[1];if(Rb!==Ta[0]||Qd!==Ta[1])K.sampleCoverage(Rb,Qd),Ta[0]=Rb,Ta[1]=Qd;Fc=na.stencil_mask;Fc!==Q.stencil_mask&&(K.stencilMask(Fc),Q.stencil_mask=Fc);Ed=U[0];Nc=U[1];Yc=U[2];if(Ed!==va[0]||Nc!==va[1]||Yc!==va[2])K.stencilFunc(Ed,Nc,Yc),va[0]=Ed,va[1]=Nc,va[2]=Yc;td=Hb[0];pc=Hb[1];wc=Hb[2];jc=Hb[3];if(td!==ha[0]||pc!==ha[1]||wc!==ha[2]||jc!==ha[3])K.stencilOpSeparate(td,pc,wc,jc),ha[0]=
td,ha[1]=pc,ha[2]=wc,ha[3]=jc;cb=wa[0];tc=wa[1];Tb=wa[2];Xb=wa[3];if(cb!==Bd[0]||tc!==Bd[1]||Tb!==Bd[2]||Xb!==Bd[3])K.stencilOpSeparate(cb,tc,Tb,Xb),Bd[0]=cb,Bd[1]=tc,Bd[2]=Tb,Bd[3]=Xb}d=f.viewport;v=d.x|0;I=d.y|0;F="width"in d?d.width|0:ea.framebufferWidth-v;M="height"in d?d.height|0:ea.framebufferHeight-I;u=ea.viewportWidth;ea.viewportWidth=F;t=ea.viewportHeight;ea.viewportHeight=M;K.viewport(v,I,F,M);ra[0]=v;ra[1]=I;ra[2]=F;ra[3]=M;K.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;K.enable(3042);
Q.blend_enable=!0;K.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;K.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(y=H.call(this,ea,f,0))?K.enable(2929):K.disable(2929);Q.depth_enable=y;x=f.viewport;D=x.x|0;l=x.y|0;oa="width"in x?x.width|0:ea.framebufferWidth-D;xa="height"in x?x.height|0:ea.framebufferHeight-l;K.scissor(D,l,oa,xa);m[0]=D;m[1]=l;m[2]=oa;m[3]=xa;K.enable(3089);Q.scissor_enable=!0;K.disable(2960);Q.stencil_enable=!1;if(P=Q.profile)B=performance.now(),
ba.count++;K.useProgram(J.program);G=p.angle_instanced_arrays;aa.setVAO(null);qa.buffer=f.positionBuffer;N=!1;T=null;ca=0;W=!1;Ce=ae=0;Ye=1;Ze=0;Hd=5126;Ad=Yd=se=Ae=0;za(qa)?(N=!0,T=X.createStream(34962,qa),Hd=T.dtype):(T=X.getBuffer(qa))?Hd=T.dtype:"constant"in qa?(Ye=2,"number"===typeof qa.constant?(se=qa.constant,Yd=Ad=Ae=0):(se=0<qa.constant.length?qa.constant[0]:0,Yd=1<qa.constant.length?qa.constant[1]:0,Ad=2<qa.constant.length?qa.constant[2]:0,Ae=3<qa.constant.length?qa.constant[3]:0)):(T=za(qa.buffer)?
X.createStream(34962,qa.buffer):X.getBuffer(qa.buffer),Hd="type"in qa?Fa[qa.type]:T.dtype,W=!!qa.normalized,Ce=qa.size|0,ae=qa.offset|0,Ze=qa.stride|0,ca=qa.divisor|0);Zd=ga.location;md=db[Zd];if(1===Ye){md.buffer||K.enableVertexAttribArray(Zd);bd=Ce||2;if(md.type!==Hd||md.size!==bd||md.buffer!==T||md.normalized!==W||md.offset!==ae||md.stride!==Ze)K.bindBuffer(34962,T.buffer),K.vertexAttribPointer(Zd,bd,Hd,W,Ze,ae),md.type=Hd,md.size=bd,md.buffer=T,md.normalized=W,md.offset=ae,md.stride=Ze;md.divisor!==
ca&&(G.vertexAttribDivisorANGLE(Zd,ca),md.divisor=ca)}else if(md.buffer&&(K.disableVertexAttribArray(Zd),md.buffer=null),md.x!==se||md.y!==Yd||md.z!==Ad||md.w!==Ae)K.vertexAttrib4f(Zd,se,Yd,Ad,Ae),md.x=se,md.y=Yd,md.z=Ad,md.w=Ae;Ga.buffer=f.positionBuffer;rd=!1;Lc=null;od=0;Gc=!1;Pc=fd=0;Wc=1;Bb=0;Fb=5126;Cb=xc=xb=Dc=0;za(Ga)?(rd=!0,Lc=X.createStream(34962,Ga),Fb=Lc.dtype):(Lc=X.getBuffer(Ga))?Fb=Lc.dtype:"constant"in Ga?(Wc=2,"number"===typeof Ga.constant?(xb=Ga.constant,xc=Cb=Dc=0):(xb=0<Ga.constant.length?
Ga.constant[0]:0,xc=1<Ga.constant.length?Ga.constant[1]:0,Cb=2<Ga.constant.length?Ga.constant[2]:0,Dc=3<Ga.constant.length?Ga.constant[3]:0)):(Lc=za(Ga.buffer)?X.createStream(34962,Ga.buffer):X.getBuffer(Ga.buffer),Fb="type"in Ga?Fa[Ga.type]:Lc.dtype,Gc=!!Ga.normalized,Pc=Ga.size|0,fd=Ga.offset|0,Bb=Ga.stride|0,od=Ga.divisor|0);Jc=b.location;nc=db[Jc];if(1===Wc){nc.buffer||K.enableVertexAttribArray(Jc);Hc=Pc||2;if(nc.type!==Fb||nc.size!==Hc||nc.buffer!==Lc||nc.normalized!==Gc||nc.offset!==fd||nc.stride!==
Bb)K.bindBuffer(34962,Lc.buffer),K.vertexAttribPointer(Jc,Hc,Fb,Gc,Bb,fd),nc.type=Fb,nc.size=Hc,nc.buffer=Lc,nc.normalized=Gc,nc.offset=fd,nc.stride=Bb;nc.divisor!==od&&(G.vertexAttribDivisorANGLE(Jc,od),nc.divisor=od)}else if(nc.buffer&&(K.disableVertexAttribArray(Jc),nc.buffer=null),nc.x!==xb||nc.y!==xc||nc.z!==Cb||nc.w!==Dc)K.vertexAttrib4f(Jc,xb,xc,Cb,Dc),nc.x=xb,nc.y=xc,nc.z=Cb,nc.w=Dc;ya.buffer=f.positionFractBuffer;Xc=!1;Vc=null;Ec=0;gc=!1;qc=Ic=0;rc=1;oc=0;hc=5126;bb=yb=cc=Za=0;za(ya)?(Xc=
!0,Vc=X.createStream(34962,ya),hc=Vc.dtype):(Vc=X.getBuffer(ya))?hc=Vc.dtype:"constant"in ya?(rc=2,"number"===typeof ya.constant?(cc=ya.constant,yb=bb=Za=0):(cc=0<ya.constant.length?ya.constant[0]:0,yb=1<ya.constant.length?ya.constant[1]:0,bb=2<ya.constant.length?ya.constant[2]:0,Za=3<ya.constant.length?ya.constant[3]:0)):(Vc=za(ya.buffer)?X.createStream(34962,ya.buffer):X.getBuffer(ya.buffer),hc="type"in ya?Fa[ya.type]:Vc.dtype,gc=!!ya.normalized,qc=ya.size|0,Ic=ya.offset|0,oc=ya.stride|0,Ec=ya.divisor|
0);Nb=c.location;$a=db[Nb];if(1===rc){$a.buffer||K.enableVertexAttribArray(Nb);ob=qc||2;if($a.type!==hc||$a.size!==ob||$a.buffer!==Vc||$a.normalized!==gc||$a.offset!==Ic||$a.stride!==oc)K.bindBuffer(34962,Vc.buffer),K.vertexAttribPointer(Nb,ob,hc,gc,oc,Ic),$a.type=hc,$a.size=ob,$a.buffer=Vc,$a.normalized=gc,$a.offset=Ic,$a.stride=oc;$a.divisor!==Ec&&(G.vertexAttribDivisorANGLE(Nb,Ec),$a.divisor=Ec)}else if($a.buffer&&(K.disableVertexAttribArray(Nb),$a.buffer=null),$a.x!==cc||$a.y!==yb||$a.z!==bb||
$a.w!==Za)K.vertexAttrib4f(Nb,cc,yb,bb,Za),$a.x=cc,$a.y=yb,$a.z=bb,$a.w=Za;la.buffer=f.positionFractBuffer;Ua=!1;yd=null;Ib=0;Jb=!1;Ob=sc=0;jb=1;Gb=0;Db=5126;Pb=Zb=hb=wb=0;za(la)?(Ua=!0,yd=X.createStream(34962,la),Db=yd.dtype):(yd=X.getBuffer(la))?Db=yd.dtype:"constant"in la?(jb=2,"number"===typeof la.constant?(hb=la.constant,Zb=Pb=wb=0):(hb=0<la.constant.length?la.constant[0]:0,Zb=1<la.constant.length?la.constant[1]:0,Pb=2<la.constant.length?la.constant[2]:0,wb=3<la.constant.length?la.constant[3]:
0)):(yd=za(la.buffer)?X.createStream(34962,la.buffer):X.getBuffer(la.buffer),Db="type"in la?Fa[la.type]:yd.dtype,Jb=!!la.normalized,Ob=la.size|0,sc=la.offset|0,Gb=la.stride|0,Ib=la.divisor|0);qb=S.location;Ra=db[qb];if(1===jb){Ra.buffer||K.enableVertexAttribArray(qb);Ub=Ob||2;if(Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==yd||Ra.normalized!==Jb||Ra.offset!==sc||Ra.stride!==Gb)K.bindBuffer(34962,yd.buffer),K.vertexAttribPointer(qb,Ub,Db,Jb,Gb,sc),Ra.type=Db,Ra.size=Ub,Ra.buffer=yd,Ra.normalized=Jb,Ra.offset=
sc,Ra.stride=Gb;Ra.divisor!==Ib&&(G.vertexAttribDivisorANGLE(qb,Ib),Ra.divisor=Ib)}else if(Ra.buffer&&(K.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Zb||Ra.z!==Pb||Ra.w!==wb)K.vertexAttrib4f(qb,hb,Zb,Pb,wb),Ra.x=hb,Ra.y=Zb,Ra.z=Pb,Ra.w=wb;Y.buffer=f.colorBuffer;zb=!1;dc=null;ib=0;pb=!1;rb=Ia=0;Ka=1;eb=0;gb=5126;tb=Va=kb=La=0;za(Y)?(zb=!0,dc=X.createStream(34962,Y),gb=dc.dtype):(dc=X.getBuffer(Y))?gb=dc.dtype:"constant"in Y?(Ka=2,"number"===typeof Y.constant?(kb=Y.constant,Va=tb=
La=0):(kb=0<Y.constant.length?Y.constant[0]:0,Va=1<Y.constant.length?Y.constant[1]:0,tb=2<Y.constant.length?Y.constant[2]:0,La=3<Y.constant.length?Y.constant[3]:0)):(dc=za(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),gb="type"in Y?Fa[Y.type]:dc.dtype,pb=!!Y.normalized,rb=Y.size|0,Ia=Y.offset|0,eb=Y.stride|0,ib=Y.divisor|0);sb=r.location;Oa=db[sb];if(1===Ka){Oa.buffer||K.enableVertexAttribArray(sb);Cc=rb||4;if(Oa.type!==gb||Oa.size!==Cc||Oa.buffer!==dc||Oa.normalized!==pb||Oa.offset!==
Ia||Oa.stride!==eb)K.bindBuffer(34962,dc.buffer),K.vertexAttribPointer(sb,Cc,gb,pb,eb,Ia),Oa.type=gb,Oa.size=Cc,Oa.buffer=dc,Oa.normalized=pb,Oa.offset=Ia,Oa.stride=eb;Oa.divisor!==ib&&(G.vertexAttribDivisorANGLE(sb,ib),Oa.divisor=ib)}else if(Oa.buffer&&(K.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Va||Oa.z!==tb||Oa.w!==La)K.vertexAttrib4f(sb,kb,Va,tb,La),Oa.x=kb,Oa.y=Va,Oa.z=tb,Oa.w=La;Qa=V.location;Kb=db[Qa];Kb.buffer||K.enableVertexAttribArray(Qa);if(5126!==Kb.type||1!==Kb.size||
Kb.buffer!==g||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)K.bindBuffer(34962,g.buffer),K.vertexAttribPointer(Qa,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=g,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(G.vertexAttribDivisorANGLE(Qa,0),Kb.divisor=0);Eb=E.location;Ma=db[Eb];Ma.buffer||K.enableVertexAttribArray(Eb);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==k||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)K.bindBuffer(34962,k.buffer),K.vertexAttribPointer(Eb,1,5126,!1,8,4),
Ma.type=5126,Ma.size=1,Ma.buffer=k,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(G.vertexAttribDivisorANGLE(Eb,0),Ma.divisor=0);ia=f.scale;K.uniform2f(e.location,ia[0],ia[1]);Xa=f.scaleFract;K.uniform2f(R.location,Xa[0],Xa[1]);Lb=f.translate;K.uniform2f(sa.location,Lb[0],Lb[1]);Mb=f.translateFract;K.uniform2f(A.location,Mb[0],Mb[1]);K.uniform1f(a.location,f.thickness);K.uniform1f(w.location,f.depth);lb=q.call(this,ea,f,0);K.uniform4f(ta.location,lb[0],lb[1],lb[2],lb[3]);K.uniform1f(Z.location,
f.dashLength);K.uniform1f(C.location,f.opacity);(Na=f.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);$b=Na._texture;K.uniform1i(h.location,$b.bind());(Pa=O.elements)?K.bindBuffer(34963,Pa.buffer.buffer):aa.currentVAO&&(Pa=z.getElements(aa.currentVAO.elements))&&K.bindBuffer(34963,Pa.buffer.buffer);ub=f.count;0<ub?Pa?G.drawElementsInstancedANGLE(5,4,Pa.type,0<<(Pa.type-5121>>1),ub):G.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Pa?K.drawElements(5,4,Pa.type,0<<(Pa.type-5121>>1)):K.drawArrays(5,
0,4));Q.dirty=!0;aa.setVAO(null);ea.viewportWidth=u;ea.viewportHeight=t;P&&(ba.cpuTime+=performance.now()-B);N&&X.destroyStream(T);rd&&X.destroyStream(Lc);Xc&&X.destroyStream(Vc);Ua&&X.destroyStream(yd);zb&&X.destroyStream(dc);$b.unbind()},scope:function(a,b,e){var c,h,m,d,p,r,q,ja,U,w,A,ra,Ba,Yb,z,fa,ha,E,C,K,J,y,va,L,aa,H,S,R,P,N,ka,Ta,Z,ga,Aa,pa,wa,Ea,V,Hb,ma,sa,ta,Ca,Bd,db,W,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,ia,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,
gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,fb,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,hf,bf,Te,Pe;c=a.viewport;h=c.x|0;m=c.y|0;d="width"in c?c.width|0:ea.framebufferWidth-h;p="height"in c?c.height|
0:ea.framebufferHeight-m;r=ea.viewportWidth;ea.viewportWidth=d;q=ea.viewportHeight;ea.viewportHeight=p;ja=I[0];I[0]=h;U=I[1];I[1]=m;w=I[2];I[2]=d;A=I[3];I[3]=p;ra=M[0];M[0]=0;Ba=M[1];M[1]=0;Yb=M[2];M[2]=0;z=M[3];M[3]=0;fa=na.blend_enable;na.blend_enable=!0;ha=oa[0];oa[0]=32774;E=oa[1];oa[1]=32774;C=xa[0];xa[0]=770;K=xa[1];xa[1]=771;J=xa[2];xa[2]=773;y=xa[3];xa[3]=1;va=f.call(this,ea,a,e);L=na.depth_enable;na.depth_enable=va;aa=a.viewport;H=aa.x|0;S=aa.y|0;R="width"in aa?aa.width|0:ea.framebufferWidth-
H;P="height"in aa?aa.height|0:ea.framebufferHeight-S;N=v[0];v[0]=H;ka=v[1];v[1]=S;Ta=v[2];v[2]=R;Z=v[3];v[3]=P;ga=na.scissor_enable;na.scissor_enable=!0;Aa=na.stencil_enable;na.stencil_enable=!1;if(pa=Q.profile)wa=performance.now(),ba.count++;Ea=O.offset;O.offset=0;V=O.count;O.count=4;Hb=a.count;ma=O.instances;O.instances=Hb;sa=O.primitive;O.primitive=5;ta=a.dashLength;Ca=F[23];F[23]=ta;Bd=a.dashTexture;db=F[24];F[24]=Bd;W=a.depth;Xc=F[22];F[22]=W;Vc=a.id;Ec=F[31];F[31]=Vc;gc=a.miterLimit;Ic=F[32];
F[32]=gc;qc=B.call(this,ea,a,e);rc=F[33];F[33]=qc;oc=a.opacity;hc=F[10];F[10]=oc;Za=ea.pixelRatio;cc=F[34];F[34]=Za;yb=a.scale;bb=F[6];F[6]=yb;Nb=a.scaleFract;$a=F[7];F[7]=Nb;ob=a.thickness;Ua=F[21];F[21]=ob;ia=a.translate;Ib=F[8];F[8]=ia;Jb=a.translateFract;sc=F[9];F[9]=Jb;Ob=D.call(this,ea,a,e);jb=F[3];F[3]=Ob;qa.buffer=a.positionBuffer;Gb=!1;Db=null;wb=0;hb=!1;Pb=Zb=0;qb=1;Ra=0;Ub=5126;pb=ib=dc=zb=0;za(qa)?(Gb=!0,Db=X.createStream(34962,qa),Ub=Db.dtype):(Db=X.getBuffer(qa))?Ub=Db.dtype:"constant"in
qa?(qb=2,"number"===typeof qa.constant?(dc=qa.constant,ib=pb=zb=0):(dc=0<qa.constant.length?qa.constant[0]:0,ib=1<qa.constant.length?qa.constant[1]:0,pb=2<qa.constant.length?qa.constant[2]:0,zb=3<qa.constant.length?qa.constant[3]:0)):(Db=za(qa.buffer)?X.createStream(34962,qa.buffer):X.getBuffer(qa.buffer),Ub="type"in qa?Fa[qa.type]:Db.dtype,hb=!!qa.normalized,Pb=qa.size|0,Zb=qa.offset|0,Ra=qa.stride|0,wb=qa.divisor|0);Ia=G.buffer;G.buffer=Db;rb=G.divisor;G.divisor=wb;Ka=G.normalized;G.normalized=
hb;eb=G.offset;G.offset=Zb;gb=G.size;G.size=Pb;La=G.state;G.state=qb;kb=G.stride;G.stride=Ra;Va=G.type;G.type=Ub;tb=G.w;G.w=zb;sb=G.x;G.x=dc;Oa=G.y;G.y=ib;Cc=G.z;G.z=pb;ya.buffer=a.positionFractBuffer;Qa=!1;Kb=null;Eb=0;Ma=!1;Xa=wd=0;Lb=1;Mb=0;lb=5126;ub=Pa=$b=Na=0;za(ya)?(Qa=!0,Kb=X.createStream(34962,ya),lb=Kb.dtype):(Kb=X.getBuffer(ya))?lb=Kb.dtype:"constant"in ya?(Lb=2,"number"===typeof ya.constant?($b=ya.constant,Pa=ub=Na=0):($b=0<ya.constant.length?ya.constant[0]:0,Pa=1<ya.constant.length?ya.constant[1]:
0,ub=2<ya.constant.length?ya.constant[2]:0,Na=3<ya.constant.length?ya.constant[3]:0)):(Kb=za(ya.buffer)?X.createStream(34962,ya.buffer):X.getBuffer(ya.buffer),lb="type"in ya?Fa[ya.type]:Kb.dtype,Ma=!!ya.normalized,Xa=ya.size|0,wd=ya.offset|0,Mb=ya.stride|0,Eb=ya.divisor|0);vb=T.buffer;T.buffer=Kb;Sa=T.divisor;T.divisor=Eb;nb=T.normalized;T.normalized=Ma;ic=T.offset;T.offset=wd;Ac=T.size;T.size=Xa;vc=T.state;T.state=Lb;ab=T.stride;T.stride=Mb;lc=T.type;T.type=lb;hd=T.w;T.w=Na;Wa=T.x;T.x=$b;Mc=T.y;
T.y=Pa;Ab=T.z;T.z=ub;Ga.buffer=a.positionBuffer;Ya=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;Qd=0;Fc=5126;td=Yc=Nc=Ed=0;za(Ga)?(Ya=!0,Vb=X.createStream(34962,Ga),Fc=Vb.dtype):(Vb=X.getBuffer(Ga))?Fc=Vb.dtype:"constant"in Ga?(Rb=2,"number"===typeof Ga.constant?(Nc=Ga.constant,Yc=td=Ed=0):(Nc=0<Ga.constant.length?Ga.constant[0]:0,Yc=1<Ga.constant.length?Ga.constant[1]:0,td=2<Ga.constant.length?Ga.constant[2]:0,Ed=3<Ga.constant.length?Ga.constant[3]:0)):(Vb=za(Ga.buffer)?X.createStream(34962,Ga.buffer):X.getBuffer(Ga.buffer),
Fc="type"in Ga?Fa[Ga.type]:Vb.dtype,Wb=!!Ga.normalized,Kc=Ga.size|0,Qb=Ga.offset|0,Qd=Ga.stride|0,uc=Ga.divisor|0);pc=x.buffer;x.buffer=Vb;wc=x.divisor;x.divisor=uc;jc=x.normalized;x.normalized=Wb;cb=x.offset;x.offset=Qb;tc=x.size;x.size=Kc;Tb=x.state;x.state=Rb;Xb=x.stride;x.stride=Qd;fc=x.type;x.type=Fc;kc=x.w;x.w=Ed;yc=x.x;x.x=Nc;Bc=x.y;x.y=Yc;cd=x.z;x.z=td;la.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Sc=0;Zc=!1;dd=ld=0;$c=1;mc=0;ec=5126;zc=ed=Uc=ad=0;za(la)?(Qc=!0,Rc=X.createStream(34962,la),
ec=Rc.dtype):(Rc=X.getBuffer(la))?ec=Rc.dtype:"constant"in la?($c=2,"number"===typeof la.constant?(Uc=la.constant,ed=zc=ad=0):(Uc=0<la.constant.length?la.constant[0]:0,ed=1<la.constant.length?la.constant[1]:0,zc=2<la.constant.length?la.constant[2]:0,ad=3<la.constant.length?la.constant[3]:0)):(Rc=za(la.buffer)?X.createStream(34962,la.buffer):X.getBuffer(la.buffer),ec="type"in la?Fa[la.type]:Rc.dtype,Zc=!!la.normalized,dd=la.size|0,ld=la.offset|0,mc=la.stride|0,Sc=la.divisor|0);id=t.buffer;t.buffer=
Rc;pd=t.divisor;t.divisor=Sc;we=t.normalized;t.normalized=Zc;ye=t.offset;t.offset=ld;jd=t.size;t.size=dd;$e=t.state;t.state=$c;Nd=t.stride;t.stride=mc;he=t.type;t.type=ec;ce=t.w;t.w=ad;Od=t.x;t.x=Uc;Kd=t.y;t.y=ed;Id=t.z;t.z=zc;Y.buffer=a.colorBuffer;nd=!1;Tc=null;ud=0;sd=!1;vd=kd=0;Cd=1;Fd=0;fb=5126;je=le=Fe=ke=0;za(Y)?(nd=!0,Tc=X.createStream(34962,Y),fb=Tc.dtype):(Tc=X.getBuffer(Y))?fb=Tc.dtype:"constant"in Y?(Cd=2,"number"===typeof Y.constant?(Fe=Y.constant,le=je=ke=0):(Fe=0<Y.constant.length?
Y.constant[0]:0,le=1<Y.constant.length?Y.constant[1]:0,je=2<Y.constant.length?Y.constant[2]:0,ke=3<Y.constant.length?Y.constant[3]:0)):(Tc=za(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),fb="type"in Y?Fa[Y.type]:Tc.dtype,sd=!!Y.normalized,vd=Y.size|0,kd=Y.offset|0,Fd=Y.stride|0,ud=Y.divisor|0);ie=l.buffer;l.buffer=Tc;te=l.divisor;l.divisor=ud;de=l.normalized;l.normalized=sd;ne=l.offset;l.offset=kd;Oc=l.size;l.size=vd;gd=l.state;l.state=Cd;ue=l.stride;l.stride=Fd;qe=l.type;l.type=
fb;Ld=l.w;l.w=ke;Pd=l.x;l.x=Fe;Rd=l.y;l.y=le;Sd=l.z;l.z=je;oe=ca.buffer;ca.buffer=g;Ge=ca.divisor;ca.divisor=0;Be=ca.normalized;ca.normalized=!1;re=ca.offset;ca.offset=0;Re=ca.size;ca.size=0;Se=ca.state;ca.state=1;Oe=ca.stride;ca.stride=8;ve=ca.type;ca.type=5126;He=ca.w;ca.w=0;Je=ca.x;ca.x=0;Ke=ca.y;ca.y=0;Le=ca.z;ca.z=0;Ie=u.buffer;u.buffer=k;Md=u.divisor;u.divisor=0;Xd=u.normalized;u.normalized=!1;be=u.offset;u.offset=4;ee=u.size;u.size=0;Me=u.state;u.state=1;Jd=u.stride;u.stride=8;Td=u.type;u.type=
5126;De=u.w;u.w=0;Ne=u.x;u.x=0;hf=u.y;u.y=0;bf=u.z;u.z=0;Te=n.vert;n.vert=20;Pe=n.frag;n.frag=19;Q.dirty=!0;b(ea,a,e);ea.viewportWidth=r;ea.viewportHeight=q;I[0]=ja;I[1]=U;I[2]=w;I[3]=A;M[0]=ra;M[1]=Ba;M[2]=Yb;M[3]=z;na.blend_enable=fa;oa[0]=ha;oa[1]=E;xa[0]=C;xa[1]=K;xa[2]=J;xa[3]=y;na.depth_enable=L;v[0]=N;v[1]=ka;v[2]=Ta;v[3]=Z;na.scissor_enable=ga;na.stencil_enable=Aa;pa&&(ba.cpuTime+=performance.now()-wa);O.offset=Ea;O.count=V;O.instances=ma;O.primitive=sa;F[23]=Ca;F[24]=db;F[22]=Xc;F[31]=Ec;
F[32]=Ic;F[33]=rc;F[10]=hc;F[34]=cc;F[6]=bb;F[7]=$a;F[21]=Ua;F[8]=Ib;F[9]=sc;F[3]=jb;Gb&&X.destroyStream(Db);G.buffer=Ia;G.divisor=rb;G.normalized=Ka;G.offset=eb;G.size=gb;G.state=La;G.stride=kb;G.type=Va;G.w=tb;G.x=sb;G.y=Oa;G.z=Cc;Qa&&X.destroyStream(Kb);T.buffer=vb;T.divisor=Sa;T.normalized=nb;T.offset=ic;T.size=Ac;T.state=vc;T.stride=ab;T.type=lc;T.w=hd;T.x=Wa;T.y=Mc;T.z=Ab;Ya&&X.destroyStream(Vb);x.buffer=pc;x.divisor=wc;x.normalized=jc;x.offset=cb;x.size=tc;x.state=Tb;x.stride=Xb;x.type=fc;
x.w=kc;x.x=yc;x.y=Bc;x.z=cd;Qc&&X.destroyStream(Rc);t.buffer=id;t.divisor=pd;t.normalized=we;t.offset=ye;t.size=jd;t.state=$e;t.stride=Nd;t.type=he;t.w=ce;t.x=Od;t.y=Kd;t.z=Id;nd&&X.destroyStream(Tc);l.buffer=ie;l.divisor=te;l.normalized=de;l.offset=ne;l.size=Oc;l.state=gd;l.stride=ue;l.type=qe;l.w=Ld;l.x=Pd;l.y=Rd;l.z=Sd;ca.buffer=oe;ca.divisor=Ge;ca.normalized=Be;ca.offset=re;ca.size=Re;ca.state=Se;ca.stride=Oe;ca.type=ve;ca.w=He;ca.x=Je;ca.y=Ke;ca.z=Le;u.buffer=Ie;u.divisor=Md;u.normalized=Xd;
u.offset=be;u.size=ee;u.state=Me;u.stride=Jd;u.type=Td;u.w=De;u.x=Ne;u.y=hf;u.z=bf;n.vert=Te;n.frag=Pe;Q.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,db,X,ea,Q){var O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,Bd,Hb,ha,I,ra,Fa,qa,ya,Ga,la,Y,ua,Ja,Da,mb,
da;O=d.attributes;z=d.buffer;p=d.context;L=d.current;K=d.draw;za=d.elements;na=d.extensions;n=d.framebuffer;F=d.gl;aa=d.isBufferArgs;M=d.next;ma=d.shader;oa=d.uniforms;Ca=d.vao;xa=M.blend_color;fa=L.blend_color;Ea=M.blend_equation;ka=L.blend_equation;pa=M.blend_func;Aa=L.blend_func;Ba=M.colorMask;ja=L.colorMask;Yb=M.depth_range;Ta=L.depth_range;v=M.polygonOffset_offset;m=L.polygonOffset_offset;U=M.sample_coverage;va=L.sample_coverage;wa=M.scissor_box;Bd=L.scissor_box;Hb=M.stencil_func;ha=L.stencil_func;
I=M.stencil_opBack;ra=L.stencil_opBack;Fa=M.stencil_opFront;qa=L.stencil_opFront;ya=M.viewport;Ga=L.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ja={divisor:1,offset:4,stride:4};Da={divisor:1,offset:16,stride:8};mb={divisor:1,offset:24,stride:8};da={divisor:1,offset:0,stride:8};return{batch:function(f,d){var q,u,J,t,y,x;q=n.next;q!==n.cur&&(q?F.bindFramebuffer(36160,q.framebuffer):
F.bindFramebuffer(36160,null),n.cur=q);if(L.dirty){var ya,D,l,H,oa,xa,B,G,N,T,pa,wa,ca,Ea,ma,W,Yd,Ad,ia,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb;ya=M.dither;ya!==L.dither&&(ya?F.enable(3024):F.disable(3024),L.dither=ya);D=M.depth_func;D!==L.depth_func&&(F.depthFunc(D),L.depth_func=D);l=Yb[0];H=Yb[1];if(l!==Ta[0]||H!==Ta[1])F.depthRange(l,H),Ta[0]=l,Ta[1]=H;oa=M.depth_mask;oa!==L.depth_mask&&(F.depthMask(oa),L.depth_mask=oa);xa=Ba[0];B=Ba[1];G=Ba[2];N=Ba[3];if(xa!==ja[0]||B!==ja[1]||G!==ja[2]||N!==ja[3])F.colorMask(xa,
B,G,N),ja[0]=xa,ja[1]=B,ja[2]=G,ja[3]=N;T=M.frontFace;T!==L.frontFace&&(F.frontFace(T),L.frontFace=T);pa=M.lineWidth;pa!==L.lineWidth&&(F.lineWidth(pa),L.lineWidth=pa);wa=M.polygonOffset_enable;wa!==L.polygonOffset_enable&&(wa?F.enable(32823):F.disable(32823),L.polygonOffset_enable=wa);ca=v[0];Ea=v[1];if(ca!==m[0]||Ea!==m[1])F.polygonOffset(ca,Ea),m[0]=ca,m[1]=Ea;ma=M.sample_alpha;ma!==L.sample_alpha&&(ma?F.enable(32926):F.disable(32926),L.sample_alpha=ma);W=M.sample_enable;W!==L.sample_enable&&(W?
F.enable(32928):F.disable(32928),L.sample_enable=W);Yd=U[0];Ad=U[1];if(Yd!==va[0]||Ad!==va[1])F.sampleCoverage(Yd,Ad),va[0]=Yd,va[1]=Ad;ia=M.stencil_mask;ia!==L.stencil_mask&&(F.stencilMask(ia),L.stencil_mask=ia);md=Hb[0];bd=Hb[1];rd=Hb[2];if(md!==ha[0]||bd!==ha[1]||rd!==ha[2])F.stencilFunc(md,bd,rd),ha[0]=md,ha[1]=bd,ha[2]=rd;Lc=Fa[0];od=Fa[1];Gc=Fa[2];fd=Fa[3];if(Lc!==qa[0]||od!==qa[1]||Gc!==qa[2]||fd!==qa[3])F.stencilOpSeparate(Lc,od,Gc,fd),qa[0]=Lc,qa[1]=od,qa[2]=Gc,qa[3]=fd;Pc=I[0];Wc=I[1];Bb=
I[2];Fb=I[3];if(Pc!==ra[0]||Wc!==ra[1]||Bb!==ra[2]||Fb!==ra[3])F.stencilOpSeparate(Pc,Wc,Bb,Fb),ra[0]=Pc,ra[1]=Wc,ra[2]=Bb,ra[3]=Fb}F.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;F.enable(3042);L.blend_enable=!0;F.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;F.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;F.enable(2884);L.cull_enable=!0;F.cullFace(1029);L.cull_face=1029;F.enable(3089);L.scissor_enable=!0;F.disable(2960);L.stencil_enable=!1;if(u=L.profile)J=
performance.now(),ba.count+=d;F.useProgram(P.program);t=na.angle_instanced_arrays;var Dc,xb,xc,Cb,Jc;Ca.setVAO(null);Dc=C.location;xb=O[Dc];xb.buffer||F.enableVertexAttribArray(Dc);if(5126!==xb.type||1!==xb.size||xb.buffer!==g||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)F.bindBuffer(34962,g.buffer),F.vertexAttribPointer(Dc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=g,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(t.vertexAttribDivisorANGLE(Dc,0),xb.divisor=0);xc=e.location;Cb=
O[xc];Cb.buffer||F.enableVertexAttribArray(xc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==k||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)F.bindBuffer(34962,k.buffer),F.vertexAttribPointer(xc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=k,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(t.vertexAttribDivisorANGLE(xc,0),Cb.divisor=0);(Jc=K.elements)?F.bindBuffer(34963,Jc.buffer.buffer):Ca.currentVAO&&(Jc=za.getElements(Ca.currentVAO.elements))&&F.bindBuffer(34963,Jc.buffer.buffer);
for(y=0;y<d;++y){x=f[y];var nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,fb,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc;nc=x.viewport;Hc=nc.x|0;Xc=nc.y|0;Vc="width"in
nc?nc.width|0:p.framebufferWidth-Hc;Ec="height"in nc?nc.height|0:p.framebufferHeight-Xc;gc=p.viewportWidth;p.viewportWidth=Vc;Ic=p.viewportHeight;p.viewportHeight=Ec;F.viewport(Hc,Xc,Vc,Ec);Ga[0]=Hc;Ga[1]=Xc;Ga[2]=Vc;Ga[3]=Ec;(qc=ga.call(this,p,x,y))?F.enable(2929):F.disable(2929);L.depth_enable=qc;rc=x.viewport;oc=rc.x|0;hc=rc.y|0;Za="width"in rc?rc.width|0:p.framebufferWidth-oc;cc="height"in rc?rc.height|0:p.framebufferHeight-hc;F.scissor(oc,hc,Za,cc);Bd[0]=oc;Bd[1]=hc;Bd[2]=Za;Bd[3]=cc;ua.buffer=
x.positionBuffer;yb=!1;bb=null;Nb=0;$a=!1;Ua=ob=0;yd=1;Ib=0;Jb=5126;Gb=jb=Ob=sc=0;aa(ua)?(yb=!0,bb=z.createStream(34962,ua),Jb=bb.dtype):(bb=z.getBuffer(ua))?Jb=bb.dtype:"constant"in ua?(yd=2,"number"===typeof ua.constant?(Ob=ua.constant,jb=Gb=sc=0):(Ob=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,sc=3<ua.constant.length?ua.constant[3]:0)):(bb=aa(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),Jb="type"in
ua?la[ua.type]:bb.dtype,$a=!!ua.normalized,Ua=ua.size|0,ob=ua.offset|0,Ib=ua.stride|0,Nb=ua.divisor|0);Db=r.location;wb=O[Db];if(1===yd){wb.buffer||F.enableVertexAttribArray(Db);hb=Ua||2;if(wb.type!==Jb||wb.size!==hb||wb.buffer!==bb||wb.normalized!==$a||wb.offset!==ob||wb.stride!==Ib)F.bindBuffer(34962,bb.buffer),F.vertexAttribPointer(Db,hb,Jb,$a,Ib,ob),wb.type=Jb,wb.size=hb,wb.buffer=bb,wb.normalized=$a,wb.offset=ob,wb.stride=Ib;wb.divisor!==Nb&&(t.vertexAttribDivisorANGLE(Db,Nb),wb.divisor=Nb)}else if(wb.buffer&&
(F.disableVertexAttribArray(Db),wb.buffer=null),wb.x!==Ob||wb.y!==jb||wb.z!==Gb||wb.w!==sc)F.vertexAttrib4f(Db,Ob,jb,Gb,sc),wb.x=Ob,wb.y=jb,wb.z=Gb,wb.w=sc;Da.buffer=x.positionBuffer;Zb=!1;Pb=null;qb=0;Ra=!1;zb=Ub=0;dc=1;ib=0;pb=5126;eb=Ka=rb=Ia=0;aa(Da)?(Zb=!0,Pb=z.createStream(34962,Da),pb=Pb.dtype):(Pb=z.getBuffer(Da))?pb=Pb.dtype:"constant"in Da?(dc=2,"number"===typeof Da.constant?(rb=Da.constant,Ka=eb=Ia=0):(rb=0<Da.constant.length?Da.constant[0]:0,Ka=1<Da.constant.length?Da.constant[1]:0,eb=
2<Da.constant.length?Da.constant[2]:0,Ia=3<Da.constant.length?Da.constant[3]:0)):(Pb=aa(Da.buffer)?z.createStream(34962,Da.buffer):z.getBuffer(Da.buffer),pb="type"in Da?la[Da.type]:Pb.dtype,Ra=!!Da.normalized,zb=Da.size|0,Ub=Da.offset|0,ib=Da.stride|0,qb=Da.divisor|0);gb=h.location;La=O[gb];if(1===dc){La.buffer||F.enableVertexAttribArray(gb);kb=zb||2;if(La.type!==pb||La.size!==kb||La.buffer!==Pb||La.normalized!==Ra||La.offset!==Ub||La.stride!==ib)F.bindBuffer(34962,Pb.buffer),F.vertexAttribPointer(gb,
kb,pb,Ra,ib,Ub),La.type=pb,La.size=kb,La.buffer=Pb,La.normalized=Ra,La.offset=Ub,La.stride=ib;La.divisor!==qb&&(t.vertexAttribDivisorANGLE(gb,qb),La.divisor=qb)}else if(La.buffer&&(F.disableVertexAttribArray(gb),La.buffer=null),La.x!==rb||La.y!==Ka||La.z!==eb||La.w!==Ia)F.vertexAttrib4f(gb,rb,Ka,eb,Ia),La.x=rb,La.y=Ka,La.z=eb,La.w=Ia;mb.buffer=x.positionBuffer;Va=!1;tb=null;sb=0;Oa=!1;Qa=Cc=0;Kb=1;Eb=0;Ma=5126;Mb=Lb=Xa=wd=0;aa(mb)?(Va=!0,tb=z.createStream(34962,mb),Ma=tb.dtype):(tb=z.getBuffer(mb))?
Ma=tb.dtype:"constant"in mb?(Kb=2,"number"===typeof mb.constant?(Xa=mb.constant,Lb=Mb=wd=0):(Xa=0<mb.constant.length?mb.constant[0]:0,Lb=1<mb.constant.length?mb.constant[1]:0,Mb=2<mb.constant.length?mb.constant[2]:0,wd=3<mb.constant.length?mb.constant[3]:0)):(tb=aa(mb.buffer)?z.createStream(34962,mb.buffer):z.getBuffer(mb.buffer),Ma="type"in mb?la[mb.type]:tb.dtype,Oa=!!mb.normalized,Qa=mb.size|0,Cc=mb.offset|0,Eb=mb.stride|0,sb=mb.divisor|0);lb=sa.location;Na=O[lb];if(1===Kb){Na.buffer||F.enableVertexAttribArray(lb);
$b=Qa||2;if(Na.type!==Ma||Na.size!==$b||Na.buffer!==tb||Na.normalized!==Oa||Na.offset!==Cc||Na.stride!==Eb)F.bindBuffer(34962,tb.buffer),F.vertexAttribPointer(lb,$b,Ma,Oa,Eb,Cc),Na.type=Ma,Na.size=$b,Na.buffer=tb,Na.normalized=Oa,Na.offset=Cc,Na.stride=Eb;Na.divisor!==sb&&(t.vertexAttribDivisorANGLE(lb,sb),Na.divisor=sb)}else if(Na.buffer&&(F.disableVertexAttribArray(lb),Na.buffer=null),Na.x!==Xa||Na.y!==Lb||Na.z!==Mb||Na.w!==wd)F.vertexAttrib4f(lb,Xa,Lb,Mb,wd),Na.x=Xa,Na.y=Lb,Na.z=Mb,Na.w=wd;da.buffer=
x.positionBuffer;Pa=!1;ub=null;vb=0;Sa=!1;ic=nb=0;Ac=1;vc=0;ab=5126;Mc=Wa=hd=lc=0;aa(da)?(Pa=!0,ub=z.createStream(34962,da),ab=ub.dtype):(ub=z.getBuffer(da))?ab=ub.dtype:"constant"in da?(Ac=2,"number"===typeof da.constant?(hd=da.constant,Wa=Mc=lc=0):(hd=0<da.constant.length?da.constant[0]:0,Wa=1<da.constant.length?da.constant[1]:0,Mc=2<da.constant.length?da.constant[2]:0,lc=3<da.constant.length?da.constant[3]:0)):(ub=aa(da.buffer)?z.createStream(34962,da.buffer):z.getBuffer(da.buffer),ab="type"in
da?la[da.type]:ub.dtype,Sa=!!da.normalized,ic=da.size|0,nb=da.offset|0,vc=da.stride|0,vb=da.divisor|0);Ab=ta.location;Ya=O[Ab];if(1===Ac){Ya.buffer||F.enableVertexAttribArray(Ab);Vb=ic||2;if(Ya.type!==ab||Ya.size!==Vb||Ya.buffer!==ub||Ya.normalized!==Sa||Ya.offset!==nb||Ya.stride!==vc)F.bindBuffer(34962,ub.buffer),F.vertexAttribPointer(Ab,Vb,ab,Sa,vc,nb),Ya.type=ab,Ya.size=Vb,Ya.buffer=ub,Ya.normalized=Sa,Ya.offset=nb,Ya.stride=vc;Ya.divisor!==vb&&(t.vertexAttribDivisorANGLE(Ab,vb),Ya.divisor=vb)}else if(Ya.buffer&&
(F.disableVertexAttribArray(Ab),Ya.buffer=null),Ya.x!==hd||Ya.y!==Wa||Ya.z!==Mc||Ya.w!==lc)F.vertexAttrib4f(Ab,hd,Wa,Mc,lc),Ya.x=hd,Ya.y=Wa,Ya.z=Mc,Ya.w=lc;Y.buffer=x.colorBuffer;uc=!1;Wb=null;Qb=0;Kc=!1;Qd=Rb=0;Fc=1;Ed=0;Nc=5126;wc=pc=td=Yc=0;aa(Y)?(uc=!0,Wb=z.createStream(34962,Y),Nc=Wb.dtype):(Wb=z.getBuffer(Y))?Nc=Wb.dtype:"constant"in Y?(Fc=2,"number"===typeof Y.constant?(td=Y.constant,pc=wc=Yc=0):(td=0<Y.constant.length?Y.constant[0]:0,pc=1<Y.constant.length?Y.constant[1]:0,wc=2<Y.constant.length?
Y.constant[2]:0,Yc=3<Y.constant.length?Y.constant[3]:0)):(Wb=aa(Y.buffer)?z.createStream(34962,Y.buffer):z.getBuffer(Y.buffer),Nc="type"in Y?la[Y.type]:Wb.dtype,Kc=!!Y.normalized,Qd=Y.size|0,Rb=Y.offset|0,Ed=Y.stride|0,Qb=Y.divisor|0);jc=S.location;cb=O[jc];if(1===Fc){cb.buffer||F.enableVertexAttribArray(jc);tc=Qd||4;if(cb.type!==Nc||cb.size!==tc||cb.buffer!==Wb||cb.normalized!==Kc||cb.offset!==Rb||cb.stride!==Ed)F.bindBuffer(34962,Wb.buffer),F.vertexAttribPointer(jc,tc,Nc,Kc,Ed,Rb),cb.type=Nc,cb.size=
tc,cb.buffer=Wb,cb.normalized=Kc,cb.offset=Rb,cb.stride=Ed;cb.divisor!==Qb&&(t.vertexAttribDivisorANGLE(jc,Qb),cb.divisor=Qb)}else if(cb.buffer&&(F.disableVertexAttribArray(jc),cb.buffer=null),cb.x!==td||cb.y!==pc||cb.z!==wc||cb.w!==Yc)F.vertexAttrib4f(jc,td,pc,wc,Yc),cb.x=td,cb.y=pc,cb.z=wc,cb.w=Yc;Ja.buffer=x.colorBuffer;Tb=!1;Xb=null;fc=0;kc=!1;Bc=yc=0;cd=1;Qc=0;Rc=5126;dd=ld=Zc=Sc=0;aa(Ja)?(Tb=!0,Xb=z.createStream(34962,Ja),Rc=Xb.dtype):(Xb=z.getBuffer(Ja))?Rc=Xb.dtype:"constant"in Ja?(cd=2,"number"===
typeof Ja.constant?(Zc=Ja.constant,ld=dd=Sc=0):(Zc=0<Ja.constant.length?Ja.constant[0]:0,ld=1<Ja.constant.length?Ja.constant[1]:0,dd=2<Ja.constant.length?Ja.constant[2]:0,Sc=3<Ja.constant.length?Ja.constant[3]:0)):(Xb=aa(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),Rc="type"in Ja?la[Ja.type]:Xb.dtype,kc=!!Ja.normalized,Bc=Ja.size|0,yc=Ja.offset|0,Qc=Ja.stride|0,fc=Ja.divisor|0);$c=Z.location;mc=O[$c];if(1===cd){mc.buffer||F.enableVertexAttribArray($c);ec=Bc||4;if(mc.type!==Rc||
mc.size!==ec||mc.buffer!==Xb||mc.normalized!==kc||mc.offset!==yc||mc.stride!==Qc)F.bindBuffer(34962,Xb.buffer),F.vertexAttribPointer($c,ec,Rc,kc,Qc,yc),mc.type=Rc,mc.size=ec,mc.buffer=Xb,mc.normalized=kc,mc.offset=yc,mc.stride=Qc;mc.divisor!==fc&&(t.vertexAttribDivisorANGLE($c,fc),mc.divisor=fc)}else if(mc.buffer&&(F.disableVertexAttribArray($c),mc.buffer=null),mc.x!==Zc||mc.y!==ld||mc.z!==dd||mc.w!==Sc)F.vertexAttrib4f($c,Zc,ld,dd,Sc),mc.x=Zc,mc.y=ld,mc.z=dd,mc.w=Sc;ad=x.scale;Uc=ad[0];zc=ad[1];
y&&ed===Uc&&id===zc||(ed=Uc,id=zc,F.uniform2f(db.location,Uc,zc));pd=x.translate;we=pd[0];jd=pd[1];y&&ye===we&&fb===jd||(ye=we,fb=jd,F.uniform2f(ea.location,we,jd));Nd=x.thickness;y&&he===Nd||(he=Nd,F.uniform1f(X.location,Nd));ce=x.depth;y&&Od===ce||(Od=ce,F.uniform1f(E.location,ce));Kd=c.call(this,p,x,y);Id=Kd[0];Tc=Kd[1];sd=Kd[2];vd=Kd[3];y&&nd===Id&&ud===Tc&&kd===sd&&Cd===vd||(nd=Id,ud=Tc,kd=sd,Cd=vd,F.uniform4f(Q.location,Id,Tc,sd,vd));Fd=x.miterLimit;y&&xe===Fd||(xe=Fd,F.uniform1f(R.location,
Fd));ke=b.call(this,p,x,y);y&&Fe===ke||(Fe=ke,F.uniform1f(a.location,ke));le=x.dashLength;y&&je===le||(je=le,F.uniform1f(w.location,le));ie=x.opacity;y&&te===ie||(te=ie,F.uniform1f(A.location,ie));(de=x.dashTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);ne=de._texture;F.uniform1i(V.location,ne.bind());Oc=x.count;0<Oc?Jc?t.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):t.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?F.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):F.drawArrays(5,
0,4));p.viewportWidth=gc;p.viewportHeight=Ic;yb&&z.destroyStream(bb);Zb&&z.destroyStream(Pb);Va&&z.destroyStream(tb);Pa&&z.destroyStream(ub);uc&&z.destroyStream(Wb);Tb&&z.destroyStream(Xb);ne.unbind()}L.dirty=!0;Ca.setVAO(null);u&&(ba.cpuTime+=performance.now()-J)},draw:function(b){var c,d,u,t,y,x,ya,D,l,oa,xa,P,B,G,N,T,ga,pa,wa,ca,Ea,ma,W,Yd,Ad,ia,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,
zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd;c=n.next;c!==n.cur&&(c?F.bindFramebuffer(36160,c.framebuffer):F.bindFramebuffer(36160,null),n.cur=c);if(L.dirty){var Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc;Fc=M.dither;Fc!==L.dither&&(Fc?F.enable(3024):F.disable(3024),L.dither=Fc);Ed=M.depth_func;Ed!==L.depth_func&&(F.depthFunc(Ed),L.depth_func=Ed);Nc=
Yb[0];Yc=Yb[1];if(Nc!==Ta[0]||Yc!==Ta[1])F.depthRange(Nc,Yc),Ta[0]=Nc,Ta[1]=Yc;td=M.depth_mask;td!==L.depth_mask&&(F.depthMask(td),L.depth_mask=td);pc=Ba[0];wc=Ba[1];jc=Ba[2];cb=Ba[3];if(pc!==ja[0]||wc!==ja[1]||jc!==ja[2]||cb!==ja[3])F.colorMask(pc,wc,jc,cb),ja[0]=pc,ja[1]=wc,ja[2]=jc,ja[3]=cb;tc=M.frontFace;tc!==L.frontFace&&(F.frontFace(tc),L.frontFace=tc);Tb=M.lineWidth;Tb!==L.lineWidth&&(F.lineWidth(Tb),L.lineWidth=Tb);Xb=M.polygonOffset_enable;Xb!==L.polygonOffset_enable&&(Xb?F.enable(32823):
F.disable(32823),L.polygonOffset_enable=Xb);fc=v[0];kc=v[1];if(fc!==m[0]||kc!==m[1])F.polygonOffset(fc,kc),m[0]=fc,m[1]=kc;yc=M.sample_alpha;yc!==L.sample_alpha&&(yc?F.enable(32926):F.disable(32926),L.sample_alpha=yc);Bc=M.sample_enable;Bc!==L.sample_enable&&(Bc?F.enable(32928):F.disable(32928),L.sample_enable=Bc);cd=U[0];Qc=U[1];if(cd!==va[0]||Qc!==va[1])F.sampleCoverage(cd,Qc),va[0]=cd,va[1]=Qc;Rc=M.stencil_mask;Rc!==L.stencil_mask&&(F.stencilMask(Rc),L.stencil_mask=Rc);Sc=Hb[0];Zc=Hb[1];ld=Hb[2];
if(Sc!==ha[0]||Zc!==ha[1]||ld!==ha[2])F.stencilFunc(Sc,Zc,ld),ha[0]=Sc,ha[1]=Zc,ha[2]=ld;dd=Fa[0];$c=Fa[1];mc=Fa[2];ec=Fa[3];if(dd!==qa[0]||$c!==qa[1]||mc!==qa[2]||ec!==qa[3])F.stencilOpSeparate(dd,$c,mc,ec),qa[0]=dd,qa[1]=$c,qa[2]=mc,qa[3]=ec;ad=I[0];Uc=I[1];ed=I[2];zc=I[3];if(ad!==ra[0]||Uc!==ra[1]||ed!==ra[2]||zc!==ra[3])F.stencilOpSeparate(ad,Uc,ed,zc),ra[0]=ad,ra[1]=Uc,ra[2]=ed,ra[3]=zc}d=b.viewport;u=d.x|0;t=d.y|0;y="width"in d?d.width|0:p.framebufferWidth-u;x="height"in d?d.height|0:p.framebufferHeight-
t;ya=p.viewportWidth;p.viewportWidth=y;D=p.viewportHeight;p.viewportHeight=x;F.viewport(u,t,y,x);Ga[0]=u;Ga[1]=t;Ga[2]=y;Ga[3]=x;F.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;F.enable(3042);L.blend_enable=!0;F.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;F.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;F.enable(2884);L.cull_enable=!0;F.cullFace(1029);L.cull_face=1029;(l=H.call(this,p,b,0))?F.enable(2929):F.disable(2929);L.depth_enable=l;oa=b.viewport;
xa=oa.x|0;P=oa.y|0;B="width"in oa?oa.width|0:p.framebufferWidth-xa;G="height"in oa?oa.height|0:p.framebufferHeight-P;F.scissor(xa,P,B,G);Bd[0]=xa;Bd[1]=P;Bd[2]=B;Bd[3]=G;F.enable(3089);L.scissor_enable=!0;F.disable(2960);L.stencil_enable=!1;if(N=L.profile)T=performance.now(),ba.count++;F.useProgram(J.program);ga=na.angle_instanced_arrays;Ca.setVAO(null);ua.buffer=b.positionBuffer;pa=!1;wa=null;ca=0;Ea=!1;W=ma=0;Yd=1;Ad=0;ia=5126;Lc=rd=bd=md=0;aa(ua)?(pa=!0,wa=z.createStream(34962,ua),ia=wa.dtype):
(wa=z.getBuffer(ua))?ia=wa.dtype:"constant"in ua?(Yd=2,"number"===typeof ua.constant?(bd=ua.constant,rd=Lc=md=0):(bd=0<ua.constant.length?ua.constant[0]:0,rd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,md=3<ua.constant.length?ua.constant[3]:0)):(wa=aa(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),ia="type"in ua?la[ua.type]:wa.dtype,Ea=!!ua.normalized,W=ua.size|0,ma=ua.offset|0,Ad=ua.stride|0,ca=ua.divisor|0);od=r.location;Gc=O[od];if(1===Yd){Gc.buffer||
F.enableVertexAttribArray(od);fd=W||2;if(Gc.type!==ia||Gc.size!==fd||Gc.buffer!==wa||Gc.normalized!==Ea||Gc.offset!==ma||Gc.stride!==Ad)F.bindBuffer(34962,wa.buffer),F.vertexAttribPointer(od,fd,ia,Ea,Ad,ma),Gc.type=ia,Gc.size=fd,Gc.buffer=wa,Gc.normalized=Ea,Gc.offset=ma,Gc.stride=Ad;Gc.divisor!==ca&&(ga.vertexAttribDivisorANGLE(od,ca),Gc.divisor=ca)}else if(Gc.buffer&&(F.disableVertexAttribArray(od),Gc.buffer=null),Gc.x!==bd||Gc.y!==rd||Gc.z!==Lc||Gc.w!==md)F.vertexAttrib4f(od,bd,rd,Lc,md),Gc.x=
bd,Gc.y=rd,Gc.z=Lc,Gc.w=md;Da.buffer=b.positionBuffer;Pc=!1;Wc=null;Bb=0;Fb=!1;xb=Dc=0;xc=1;Cb=0;Jc=5126;Vc=Xc=Hc=nc=0;aa(Da)?(Pc=!0,Wc=z.createStream(34962,Da),Jc=Wc.dtype):(Wc=z.getBuffer(Da))?Jc=Wc.dtype:"constant"in Da?(xc=2,"number"===typeof Da.constant?(Hc=Da.constant,Xc=Vc=nc=0):(Hc=0<Da.constant.length?Da.constant[0]:0,Xc=1<Da.constant.length?Da.constant[1]:0,Vc=2<Da.constant.length?Da.constant[2]:0,nc=3<Da.constant.length?Da.constant[3]:0)):(Wc=aa(Da.buffer)?z.createStream(34962,Da.buffer):
z.getBuffer(Da.buffer),Jc="type"in Da?la[Da.type]:Wc.dtype,Fb=!!Da.normalized,xb=Da.size|0,Dc=Da.offset|0,Cb=Da.stride|0,Bb=Da.divisor|0);Ec=h.location;gc=O[Ec];if(1===xc){gc.buffer||F.enableVertexAttribArray(Ec);Ic=xb||2;if(gc.type!==Jc||gc.size!==Ic||gc.buffer!==Wc||gc.normalized!==Fb||gc.offset!==Dc||gc.stride!==Cb)F.bindBuffer(34962,Wc.buffer),F.vertexAttribPointer(Ec,Ic,Jc,Fb,Cb,Dc),gc.type=Jc,gc.size=Ic,gc.buffer=Wc,gc.normalized=Fb,gc.offset=Dc,gc.stride=Cb;gc.divisor!==Bb&&(ga.vertexAttribDivisorANGLE(Ec,
Bb),gc.divisor=Bb)}else if(gc.buffer&&(F.disableVertexAttribArray(Ec),gc.buffer=null),gc.x!==Hc||gc.y!==Xc||gc.z!==Vc||gc.w!==nc)F.vertexAttrib4f(Ec,Hc,Xc,Vc,nc),gc.x=Hc,gc.y=Xc,gc.z=Vc,gc.w=nc;mb.buffer=b.positionBuffer;qc=!1;rc=null;oc=0;hc=!1;cc=Za=0;yb=1;bb=0;Nb=5126;yd=Ua=ob=$a=0;aa(mb)?(qc=!0,rc=z.createStream(34962,mb),Nb=rc.dtype):(rc=z.getBuffer(mb))?Nb=rc.dtype:"constant"in mb?(yb=2,"number"===typeof mb.constant?(ob=mb.constant,Ua=yd=$a=0):(ob=0<mb.constant.length?mb.constant[0]:0,Ua=1<
mb.constant.length?mb.constant[1]:0,yd=2<mb.constant.length?mb.constant[2]:0,$a=3<mb.constant.length?mb.constant[3]:0)):(rc=aa(mb.buffer)?z.createStream(34962,mb.buffer):z.getBuffer(mb.buffer),Nb="type"in mb?la[mb.type]:rc.dtype,hc=!!mb.normalized,cc=mb.size|0,Za=mb.offset|0,bb=mb.stride|0,oc=mb.divisor|0);Ib=sa.location;Jb=O[Ib];if(1===yb){Jb.buffer||F.enableVertexAttribArray(Ib);sc=cc||2;if(Jb.type!==Nb||Jb.size!==sc||Jb.buffer!==rc||Jb.normalized!==hc||Jb.offset!==Za||Jb.stride!==bb)F.bindBuffer(34962,
rc.buffer),F.vertexAttribPointer(Ib,sc,Nb,hc,bb,Za),Jb.type=Nb,Jb.size=sc,Jb.buffer=rc,Jb.normalized=hc,Jb.offset=Za,Jb.stride=bb;Jb.divisor!==oc&&(ga.vertexAttribDivisorANGLE(Ib,oc),Jb.divisor=oc)}else if(Jb.buffer&&(F.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==ob||Jb.y!==Ua||Jb.z!==yd||Jb.w!==$a)F.vertexAttrib4f(Ib,ob,Ua,yd,$a),Jb.x=ob,Jb.y=Ua,Jb.z=yd,Jb.w=$a;da.buffer=b.positionBuffer;Ob=!1;jb=null;Gb=0;Db=!1;hb=wb=0;Zb=1;Pb=0;qb=5126;dc=zb=Ub=Ra=0;aa(da)?(Ob=!0,jb=z.createStream(34962,
da),qb=jb.dtype):(jb=z.getBuffer(da))?qb=jb.dtype:"constant"in da?(Zb=2,"number"===typeof da.constant?(Ub=da.constant,zb=dc=Ra=0):(Ub=0<da.constant.length?da.constant[0]:0,zb=1<da.constant.length?da.constant[1]:0,dc=2<da.constant.length?da.constant[2]:0,Ra=3<da.constant.length?da.constant[3]:0)):(jb=aa(da.buffer)?z.createStream(34962,da.buffer):z.getBuffer(da.buffer),qb="type"in da?la[da.type]:jb.dtype,Db=!!da.normalized,hb=da.size|0,wb=da.offset|0,Pb=da.stride|0,Gb=da.divisor|0);ib=ta.location;pb=
O[ib];if(1===Zb){pb.buffer||F.enableVertexAttribArray(ib);Ia=hb||2;if(pb.type!==qb||pb.size!==Ia||pb.buffer!==jb||pb.normalized!==Db||pb.offset!==wb||pb.stride!==Pb)F.bindBuffer(34962,jb.buffer),F.vertexAttribPointer(ib,Ia,qb,Db,Pb,wb),pb.type=qb,pb.size=Ia,pb.buffer=jb,pb.normalized=Db,pb.offset=wb,pb.stride=Pb;pb.divisor!==Gb&&(ga.vertexAttribDivisorANGLE(ib,Gb),pb.divisor=Gb)}else if(pb.buffer&&(F.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==dc||pb.w!==Ra)F.vertexAttrib4f(ib,
Ub,zb,dc,Ra),pb.x=Ub,pb.y=zb,pb.z=dc,pb.w=Ra;Y.buffer=b.colorBuffer;rb=!1;Ka=null;eb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=Cc=Oa=0;aa(Y)?(rb=!0,Ka=z.createStream(34962,Y),sb=Ka.dtype):(Ka=z.getBuffer(Y))?sb=Ka.dtype:"constant"in Y?(Va=2,"number"===typeof Y.constant?(Cc=Y.constant,Qa=Kb=Oa=0):(Cc=0<Y.constant.length?Y.constant[0]:0,Qa=1<Y.constant.length?Y.constant[1]:0,Kb=2<Y.constant.length?Y.constant[2]:0,Oa=3<Y.constant.length?Y.constant[3]:0)):(Ka=aa(Y.buffer)?z.createStream(34962,Y.buffer):
z.getBuffer(Y.buffer),sb="type"in Y?la[Y.type]:Ka.dtype,gb=!!Y.normalized,kb=Y.size|0,La=Y.offset|0,tb=Y.stride|0,eb=Y.divisor|0);Eb=S.location;Ma=O[Eb];if(1===Va){Ma.buffer||F.enableVertexAttribArray(Eb);wd=kb||4;if(Ma.type!==sb||Ma.size!==wd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)F.bindBuffer(34962,Ka.buffer),F.vertexAttribPointer(Eb,wd,sb,gb,tb,La),Ma.type=sb,Ma.size=wd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==eb&&(ga.vertexAttribDivisorANGLE(Eb,
eb),Ma.divisor=eb)}else if(Ma.buffer&&(F.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)F.vertexAttrib4f(Eb,Cc,Qa,Kb,Oa),Ma.x=Cc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Ja.buffer=b.colorBuffer;Xa=!1;Lb=null;Mb=0;lb=!1;$b=Na=0;Pa=1;ub=0;vb=5126;Ac=ic=nb=Sa=0;aa(Ja)?(Xa=!0,Lb=z.createStream(34962,Ja),vb=Lb.dtype):(Lb=z.getBuffer(Ja))?vb=Lb.dtype:"constant"in Ja?(Pa=2,"number"===typeof Ja.constant?(nb=Ja.constant,ic=Ac=Sa=0):(nb=0<Ja.constant.length?Ja.constant[0]:0,ic=1<Ja.constant.length?
Ja.constant[1]:0,Ac=2<Ja.constant.length?Ja.constant[2]:0,Sa=3<Ja.constant.length?Ja.constant[3]:0)):(Lb=aa(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),vb="type"in Ja?la[Ja.type]:Lb.dtype,lb=!!Ja.normalized,$b=Ja.size|0,Na=Ja.offset|0,ub=Ja.stride|0,Mb=Ja.divisor|0);vc=Z.location;ab=O[vc];if(1===Pa){ab.buffer||F.enableVertexAttribArray(vc);lc=$b||4;if(ab.type!==vb||ab.size!==lc||ab.buffer!==Lb||ab.normalized!==lb||ab.offset!==Na||ab.stride!==ub)F.bindBuffer(34962,Lb.buffer),
F.vertexAttribPointer(vc,lc,vb,lb,ub,Na),ab.type=vb,ab.size=lc,ab.buffer=Lb,ab.normalized=lb,ab.offset=Na,ab.stride=ub;ab.divisor!==Mb&&(ga.vertexAttribDivisorANGLE(vc,Mb),ab.divisor=Mb)}else if(ab.buffer&&(F.disableVertexAttribArray(vc),ab.buffer=null),ab.x!==nb||ab.y!==ic||ab.z!==Ac||ab.w!==Sa)F.vertexAttrib4f(vc,nb,ic,Ac,Sa),ab.x=nb,ab.y=ic,ab.z=Ac,ab.w=Sa;hd=C.location;Wa=O[hd];Wa.buffer||F.enableVertexAttribArray(hd);if(5126!==Wa.type||1!==Wa.size||Wa.buffer!==g||!1!==Wa.normalized||0!==Wa.offset||
8!==Wa.stride)F.bindBuffer(34962,g.buffer),F.vertexAttribPointer(hd,1,5126,!1,8,0),Wa.type=5126,Wa.size=1,Wa.buffer=g,Wa.normalized=!1,Wa.offset=0,Wa.stride=8;0!==Wa.divisor&&(ga.vertexAttribDivisorANGLE(hd,0),Wa.divisor=0);Mc=e.location;Ab=O[Mc];Ab.buffer||F.enableVertexAttribArray(Mc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==k||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)F.bindBuffer(34962,k.buffer),F.vertexAttribPointer(Mc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=k,Ab.normalized=
!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ga.vertexAttribDivisorANGLE(Mc,0),Ab.divisor=0);Ya=b.scale;F.uniform2f(db.location,Ya[0],Ya[1]);Vb=b.translate;F.uniform2f(ea.location,Vb[0],Vb[1]);F.uniform1f(X.location,b.thickness);F.uniform1f(E.location,b.depth);uc=q.call(this,p,b,0);F.uniform4f(Q.location,uc[0],uc[1],uc[2],uc[3]);F.uniform1f(R.location,b.miterLimit);Wb=f.call(this,p,b,0);F.uniform1f(a.location,Wb);F.uniform1f(w.location,b.dashLength);F.uniform1f(A.location,b.opacity);(Qb=b.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;F.uniform1i(V.location,Kc.bind());(Rb=K.elements)?F.bindBuffer(34963,Rb.buffer.buffer):Ca.currentVAO&&(Rb=za.getElements(Ca.currentVAO.elements))&&F.bindBuffer(34963,Rb.buffer.buffer);Qd=b.count;0<Qd?Rb?ga.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),Qd):ga.drawArraysInstancedANGLE(5,0,4,Qd):0>Qd&&(Rb?F.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):F.drawArrays(5,0,4));L.dirty=!0;Ca.setVAO(null);p.viewportWidth=ya;p.viewportHeight=
D;N&&(ba.cpuTime+=performance.now()-T);pa&&z.destroyStream(wa);Pc&&z.destroyStream(Wc);qc&&z.destroyStream(rc);Ob&&z.destroyStream(jb);rb&&z.destroyStream(Ka);Xa&&z.destroyStream(Lb);Kc.unbind()},scope:function(a,b,e){var c,f,h,m,d,n,v,r,I,q,ja,U,w,A,ra,Ba,F,Fa,O,Yb,qa,fa,ha,Q,E,C,J,va,H,Ga,S,P,za,R,ka,Ta,X,ga,Z,Aa,ea,V,Hb,na,sa,ta,Ca,Bd,db,W,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,ia,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,
ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,fb,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,hf,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;c=a.viewport;f=c.x|0;h=c.y|0;m="width"in c?c.width|0:p.framebufferWidth-
f;d="height"in c?c.height|0:p.framebufferHeight-h;n=p.viewportWidth;p.viewportWidth=m;v=p.viewportHeight;p.viewportHeight=d;r=ya[0];ya[0]=f;I=ya[1];ya[1]=h;q=ya[2];ya[2]=m;ja=ya[3];ya[3]=d;U=xa[0];xa[0]=0;w=xa[1];xa[1]=0;A=xa[2];xa[2]=0;ra=xa[3];xa[3]=0;Ba=M.blend_enable;M.blend_enable=!0;F=Ea[0];Ea[0]=32774;Fa=Ea[1];Ea[1]=32774;O=pa[0];pa[0]=770;Yb=pa[1];pa[1]=771;qa=pa[2];pa[2]=773;fa=pa[3];pa[3]=1;ha=M.cull_enable;M.cull_enable=!0;Q=M.cull_face;M.cull_face=1029;E=B.call(this,p,a,e);C=M.depth_enable;
M.depth_enable=E;J=a.viewport;va=J.x|0;H=J.y|0;Ga="width"in J?J.width|0:p.framebufferWidth-va;S="height"in J?J.height|0:p.framebufferHeight-H;P=wa[0];wa[0]=va;za=wa[1];wa[1]=H;R=wa[2];wa[2]=Ga;ka=wa[3];wa[3]=S;Ta=M.scissor_enable;M.scissor_enable=!0;X=M.stencil_enable;M.stencil_enable=!1;if(ga=L.profile)Z=performance.now(),ba.count++;Aa=K.offset;K.offset=0;ea=K.count;K.count=4;V=a.count;Hb=K.instances;K.instances=V;na=K.primitive;K.primitive=5;sa=a.dashLength;ta=oa[23];oa[23]=sa;Ca=a.dashTexture;
Bd=oa[24];oa[24]=Ca;db=a.depth;W=oa[22];oa[22]=db;hc=a.id;Za=oa[31];oa[31]=hc;cc=a.miterLimit;yb=oa[32];oa[32]=cc;bb=D.call(this,p,a,e);Nb=oa[33];oa[33]=bb;$a=a.opacity;ob=oa[10];oa[10]=$a;Ua=p.pixelRatio;ia=oa[34];oa[34]=Ua;Ib=a.scale;Jb=oa[6];oa[6]=Ib;sc=a.scaleFract;Ob=oa[7];oa[7]=sc;jb=a.thickness;Gb=oa[21];oa[21]=jb;Db=a.translate;wb=oa[8];oa[8]=Db;hb=a.translateFract;Zb=oa[9];oa[9]=hb;Pb=G.call(this,p,a,e);qb=oa[3];oa[3]=Pb;Y.buffer=a.colorBuffer;Ra=!1;Ub=null;zb=0;dc=!1;pb=ib=0;Ia=1;rb=0;Ka=
5126;kb=La=gb=eb=0;aa(Y)?(Ra=!0,Ub=z.createStream(34962,Y),Ka=Ub.dtype):(Ub=z.getBuffer(Y))?Ka=Ub.dtype:"constant"in Y?(Ia=2,"number"===typeof Y.constant?(gb=Y.constant,La=kb=eb=0):(gb=0<Y.constant.length?Y.constant[0]:0,La=1<Y.constant.length?Y.constant[1]:0,kb=2<Y.constant.length?Y.constant[2]:0,eb=3<Y.constant.length?Y.constant[3]:0)):(Ub=aa(Y.buffer)?z.createStream(34962,Y.buffer):z.getBuffer(Y.buffer),Ka="type"in Y?la[Y.type]:Ub.dtype,dc=!!Y.normalized,pb=Y.size|0,ib=Y.offset|0,rb=Y.stride|0,
zb=Y.divisor|0);Va=T.buffer;T.buffer=Ub;tb=T.divisor;T.divisor=zb;sb=T.normalized;T.normalized=dc;Oa=T.offset;T.offset=ib;Cc=T.size;T.size=pb;Qa=T.state;T.state=Ia;Kb=T.stride;T.stride=rb;Eb=T.type;T.type=Ka;Ma=T.w;T.w=eb;wd=T.x;T.x=gb;Xa=T.y;T.y=La;Lb=T.z;T.z=kb;ua.buffer=a.positionBuffer;Mb=!1;lb=null;Na=0;$b=!1;ub=Pa=0;vb=1;Sa=0;nb=5126;ab=vc=Ac=ic=0;aa(ua)?(Mb=!0,lb=z.createStream(34962,ua),nb=lb.dtype):(lb=z.getBuffer(ua))?nb=lb.dtype:"constant"in ua?(vb=2,"number"===typeof ua.constant?(Ac=ua.constant,
vc=ab=ic=0):(Ac=0<ua.constant.length?ua.constant[0]:0,vc=1<ua.constant.length?ua.constant[1]:0,ab=2<ua.constant.length?ua.constant[2]:0,ic=3<ua.constant.length?ua.constant[3]:0)):(lb=aa(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),nb="type"in ua?la[ua.type]:lb.dtype,$b=!!ua.normalized,ub=ua.size|0,Pa=ua.offset|0,Sa=ua.stride|0,Na=ua.divisor|0);lc=x.buffer;x.buffer=lb;hd=x.divisor;x.divisor=Na;Wa=x.normalized;x.normalized=$b;Mc=x.offset;x.offset=Pa;Ab=x.size;x.size=ub;Ya=x.state;
x.state=vb;Vb=x.stride;x.stride=Sa;uc=x.type;x.type=nb;Wb=x.w;x.w=ic;Qb=x.x;x.x=Ac;Kc=x.y;x.y=vc;Rb=x.z;x.z=ab;Ja.buffer=a.colorBuffer;Qd=!1;Fc=null;Ed=0;Nc=!1;td=Yc=0;pc=1;wc=0;jc=5126;Xb=Tb=tc=cb=0;aa(Ja)?(Qd=!0,Fc=z.createStream(34962,Ja),jc=Fc.dtype):(Fc=z.getBuffer(Ja))?jc=Fc.dtype:"constant"in Ja?(pc=2,"number"===typeof Ja.constant?(tc=Ja.constant,Tb=Xb=cb=0):(tc=0<Ja.constant.length?Ja.constant[0]:0,Tb=1<Ja.constant.length?Ja.constant[1]:0,Xb=2<Ja.constant.length?Ja.constant[2]:0,cb=3<Ja.constant.length?
Ja.constant[3]:0)):(Fc=aa(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),jc="type"in Ja?la[Ja.type]:Fc.dtype,Nc=!!Ja.normalized,td=Ja.size|0,Yc=Ja.offset|0,wc=Ja.stride|0,Ed=Ja.divisor|0);fc=t.buffer;t.buffer=Fc;kc=t.divisor;t.divisor=Ed;yc=t.normalized;t.normalized=Nc;Bc=t.offset;t.offset=Yc;cd=t.size;t.size=td;Qc=t.state;t.state=pc;Rc=t.stride;t.stride=wc;Sc=t.type;t.type=jc;Zc=t.w;t.w=cb;ld=t.x;t.x=tc;dd=t.y;t.y=Tb;$c=t.z;t.z=Xb;Da.buffer=a.positionBuffer;mc=!1;ec=null;ad=0;
Uc=!1;zc=ed=0;id=1;pd=0;we=5126;Nd=fb=jd=ye=0;aa(Da)?(mc=!0,ec=z.createStream(34962,Da),we=ec.dtype):(ec=z.getBuffer(Da))?we=ec.dtype:"constant"in Da?(id=2,"number"===typeof Da.constant?(jd=Da.constant,fb=Nd=ye=0):(jd=0<Da.constant.length?Da.constant[0]:0,fb=1<Da.constant.length?Da.constant[1]:0,Nd=2<Da.constant.length?Da.constant[2]:0,ye=3<Da.constant.length?Da.constant[3]:0)):(ec=aa(Da.buffer)?z.createStream(34962,Da.buffer):z.getBuffer(Da.buffer),we="type"in Da?la[Da.type]:ec.dtype,Uc=!!Da.normalized,
zc=Da.size|0,ed=Da.offset|0,pd=Da.stride|0,ad=Da.divisor|0);he=l.buffer;l.buffer=ec;ce=l.divisor;l.divisor=ad;Od=l.normalized;l.normalized=Uc;Kd=l.offset;l.offset=ed;Id=l.size;l.size=zc;nd=l.state;l.state=id;Tc=l.stride;l.stride=pd;ud=l.type;l.type=we;sd=l.w;l.w=ye;kd=l.x;l.x=jd;vd=l.y;l.y=fb;Cd=l.z;l.z=Nd;Fd=ca.buffer;ca.buffer=g;xe=ca.divisor;ca.divisor=0;ke=ca.normalized;ca.normalized=!1;Fe=ca.offset;ca.offset=0;le=ca.size;ca.size=0;je=ca.state;ca.state=1;ie=ca.stride;ca.stride=8;te=ca.type;ca.type=
5126;de=ca.w;ca.w=0;ne=ca.x;ca.x=0;Oc=ca.y;ca.y=0;gd=ca.z;ca.z=0;ue=u.buffer;u.buffer=k;qe=u.divisor;u.divisor=0;Ld=u.normalized;u.normalized=!1;Pd=u.offset;u.offset=4;Rd=u.size;u.size=0;Sd=u.state;u.state=1;oe=u.stride;u.stride=8;Ge=u.type;u.type=5126;Be=u.w;u.w=0;re=u.x;u.x=0;Re=u.y;u.y=0;Se=u.z;u.z=0;mb.buffer=a.positionBuffer;Oe=!1;ve=null;He=0;Je=!1;Le=Ke=0;Ie=1;Md=0;Xd=5126;Jd=Me=ee=be=0;aa(mb)?(Oe=!0,ve=z.createStream(34962,mb),Xd=ve.dtype):(ve=z.getBuffer(mb))?Xd=ve.dtype:"constant"in mb?
(Ie=2,"number"===typeof mb.constant?(ee=mb.constant,Me=Jd=be=0):(ee=0<mb.constant.length?mb.constant[0]:0,Me=1<mb.constant.length?mb.constant[1]:0,Jd=2<mb.constant.length?mb.constant[2]:0,be=3<mb.constant.length?mb.constant[3]:0)):(ve=aa(mb.buffer)?z.createStream(34962,mb.buffer):z.getBuffer(mb.buffer),Xd="type"in mb?la[mb.type]:ve.dtype,Je=!!mb.normalized,Le=mb.size|0,Ke=mb.offset|0,Md=mb.stride|0,He=mb.divisor|0);Td=N.buffer;N.buffer=ve;De=N.divisor;N.divisor=He;Ne=N.normalized;N.normalized=Je;
hf=N.offset;N.offset=Ke;bf=N.size;N.size=Le;Te=N.state;N.state=Ie;Pe=N.stride;N.stride=Md;af=N.type;N.type=Xd;Xe=N.w;N.w=be;Ue=N.x;N.x=ee;Ve=N.y;N.y=Me;Ud=N.z;N.z=Jd;da.buffer=a.positionBuffer;$d=!1;We=null;jf=0;nf=!1;kf=ef=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;aa(da)?($d=!0,We=z.createStream(34962,da),rf=We.dtype):(We=z.getBuffer(da))?rf=We.dtype:"constant"in da?(lf=2,"number"===typeof da.constant?(sf=da.constant,Bf=Cf=of=0):(sf=0<da.constant.length?da.constant[0]:0,Bf=1<da.constant.length?da.constant[1]:
0,Cf=2<da.constant.length?da.constant[2]:0,of=3<da.constant.length?da.constant[3]:0)):(We=aa(da.buffer)?z.createStream(34962,da.buffer):z.getBuffer(da.buffer),rf="type"in da?la[da.type]:We.dtype,nf=!!da.normalized,kf=da.size|0,ef=da.offset|0,mf=da.stride|0,jf=da.divisor|0);Qe=y.buffer;y.buffer=We;Ee=y.divisor;y.divisor=jf;pf=y.normalized;y.normalized=nf;qf=y.offset;y.offset=ef;Df=y.size;y.size=kf;Gf=y.state;y.state=lf;Af=y.stride;y.stride=mf;Ef=y.type;y.type=rf;Ff=y.w;y.w=of;wf=y.x;y.x=sf;xf=y.y;
y.y=Bf;vf=y.z;y.z=Cf;yf=ma.vert;ma.vert=36;zf=ma.frag;ma.frag=35;L.dirty=!0;b(p,a,e);p.viewportWidth=n;p.viewportHeight=v;ya[0]=r;ya[1]=I;ya[2]=q;ya[3]=ja;xa[0]=U;xa[1]=w;xa[2]=A;xa[3]=ra;M.blend_enable=Ba;Ea[0]=F;Ea[1]=Fa;pa[0]=O;pa[1]=Yb;pa[2]=qa;pa[3]=fa;M.cull_enable=ha;M.cull_face=Q;M.depth_enable=C;wa[0]=P;wa[1]=za;wa[2]=R;wa[3]=ka;M.scissor_enable=Ta;M.stencil_enable=X;ga&&(ba.cpuTime+=performance.now()-Z);K.offset=Aa;K.count=ea;K.instances=Hb;K.primitive=na;oa[23]=ta;oa[24]=Bd;oa[22]=W;oa[31]=
Za;oa[32]=yb;oa[33]=Nb;oa[10]=ob;oa[34]=ia;oa[6]=Jb;oa[7]=Ob;oa[21]=Gb;oa[8]=wb;oa[9]=Zb;oa[3]=qb;Ra&&z.destroyStream(Ub);T.buffer=Va;T.divisor=tb;T.normalized=sb;T.offset=Oa;T.size=Cc;T.state=Qa;T.stride=Kb;T.type=Eb;T.w=Ma;T.x=wd;T.y=Xa;T.z=Lb;Mb&&z.destroyStream(lb);x.buffer=lc;x.divisor=hd;x.normalized=Wa;x.offset=Mc;x.size=Ab;x.state=Ya;x.stride=Vb;x.type=uc;x.w=Wb;x.x=Qb;x.y=Kc;x.z=Rb;Qd&&z.destroyStream(Fc);t.buffer=fc;t.divisor=kc;t.normalized=yc;t.offset=Bc;t.size=cd;t.state=Qc;t.stride=
Rc;t.type=Sc;t.w=Zc;t.x=ld;t.y=dd;t.z=$c;mc&&z.destroyStream(ec);l.buffer=he;l.divisor=ce;l.normalized=Od;l.offset=Kd;l.size=Id;l.state=nd;l.stride=Tc;l.type=ud;l.w=sd;l.x=kd;l.y=vd;l.z=Cd;ca.buffer=Fd;ca.divisor=xe;ca.normalized=ke;ca.offset=Fe;ca.size=le;ca.state=je;ca.stride=ie;ca.type=te;ca.w=de;ca.x=ne;ca.y=Oc;ca.z=gd;u.buffer=ue;u.divisor=qe;u.normalized=Ld;u.offset=Pd;u.size=Rd;u.state=Sd;u.stride=oe;u.type=Ge;u.w=Be;u.x=re;u.y=Re;u.z=Se;Oe&&z.destroyStream(ve);N.buffer=Td;N.divisor=De;N.normalized=
Ne;N.offset=hf;N.size=bf;N.state=Te;N.stride=Pe;N.type=af;N.w=Xe;N.x=Ue;N.y=Ve;N.z=Ud;$d&&z.destroyStream(We);y.buffer=Qe;y.divisor=Ee;y.normalized=pf;y.offset=qf;y.size=Df;y.state=Gf;y.stride=Af;y.type=Ef;y.w=Ff;y.x=wf;y.y=xf;y.z=vf;ma.vert=yf;ma.frag=zf;L.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y){var P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,
ka,pa;P=d.attributes;ga=d.buffer;c=d.context;b=d.current;S=d.draw;r=d.elements;Z=d.extensions;h=d.framebuffer;w=d.gl;V=d.isBufferArgs;E=d.next;C=d.shader;e=d.uniforms;R=d.vao;a=E.blend_color;sa=b.blend_color;A=E.blend_equation;ta=b.blend_equation;db=E.blend_func;X=b.blend_func;ea=E.colorMask;Q=b.colorMask;O=E.depth_range;z=b.depth_range;p=E.polygonOffset_offset;L=b.polygonOffset_offset;K=E.sample_coverage;za=b.sample_coverage;na=E.scissor_box;n=b.scissor_box;F=E.stencil_func;aa=b.stencil_func;M=E.stencil_opBack;
ma=b.stencil_opBack;oa=E.stencil_opFront;Ca=b.stencil_opFront;xa=E.viewport;fa=b.viewport;Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,e){var f,d,k,v,m,q;f=h.next;f!==h.cur&&(f?w.bindFramebuffer(36160,f.framebuffer):w.bindFramebuffer(36160,null),h.cur=f);if(b.dirty){var g,A,J,C,ha,I,ra,Fa,qa,ya,H,la,Y,xa,na,Da,db,da,W,ac,Ha,bc,Sb,ia,Gd,me,Wd,ze,zd,Vd,pe,fe;g=E.dither;g!==b.dither&&
(g?w.enable(3024):w.disable(3024),b.dither=g);A=E.depth_func;A!==b.depth_func&&(w.depthFunc(A),b.depth_func=A);J=O[0];C=O[1];if(J!==z[0]||C!==z[1])w.depthRange(J,C),z[0]=J,z[1]=C;ha=E.depth_mask;ha!==b.depth_mask&&(w.depthMask(ha),b.depth_mask=ha);I=ea[0];ra=ea[1];Fa=ea[2];qa=ea[3];if(I!==Q[0]||ra!==Q[1]||Fa!==Q[2]||qa!==Q[3])w.colorMask(I,ra,Fa,qa),Q[0]=I,Q[1]=ra,Q[2]=Fa,Q[3]=qa;ya=E.cull_enable;ya!==b.cull_enable&&(ya?w.enable(2884):w.disable(2884),b.cull_enable=ya);H=E.cull_face;H!==b.cull_face&&
(w.cullFace(H),b.cull_face=H);la=E.frontFace;la!==b.frontFace&&(w.frontFace(la),b.frontFace=la);Y=E.lineWidth;Y!==b.lineWidth&&(w.lineWidth(Y),b.lineWidth=Y);xa=E.polygonOffset_enable;xa!==b.polygonOffset_enable&&(xa?w.enable(32823):w.disable(32823),b.polygonOffset_enable=xa);na=p[0];Da=p[1];if(na!==L[0]||Da!==L[1])w.polygonOffset(na,Da),L[0]=na,L[1]=Da;db=E.sample_alpha;db!==b.sample_alpha&&(db?w.enable(32926):w.disable(32926),b.sample_alpha=db);da=E.sample_enable;da!==b.sample_enable&&(da?w.enable(32928):
w.disable(32928),b.sample_enable=da);W=K[0];ac=K[1];if(W!==za[0]||ac!==za[1])w.sampleCoverage(W,ac),za[0]=W,za[1]=ac;Ha=E.stencil_mask;Ha!==b.stencil_mask&&(w.stencilMask(Ha),b.stencil_mask=Ha);bc=F[0];Sb=F[1];ia=F[2];if(bc!==aa[0]||Sb!==aa[1]||ia!==aa[2])w.stencilFunc(bc,Sb,ia),aa[0]=bc,aa[1]=Sb,aa[2]=ia;Gd=oa[0];me=oa[1];Wd=oa[2];ze=oa[3];if(Gd!==Ca[0]||me!==Ca[1]||Wd!==Ca[2]||ze!==Ca[3])w.stencilOpSeparate(Gd,me,Wd,ze),Ca[0]=Gd,Ca[1]=me,Ca[2]=Wd,Ca[3]=ze;zd=M[0];Vd=M[1];pe=M[2];fe=M[3];if(zd!==
ma[0]||Vd!==ma[1]||pe!==ma[2]||fe!==ma[3])w.stencilOpSeparate(zd,Vd,pe,fe),ma[0]=zd,ma[1]=Vd,ma[2]=pe,ma[3]=fe}w.blendColor(0,0,0,0);sa[0]=0;sa[1]=0;sa[2]=0;sa[3]=0;w.enable(3042);b.blend_enable=!0;w.blendEquationSeparate(32774,32774);ta[0]=32774;ta[1]=32774;w.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;w.disable(2929);b.depth_enable=!1;w.enable(3089);b.scissor_enable=!0;w.disable(2960);b.stencil_enable=!1;if(d=b.profile)k=performance.now(),ba.count+=e;w.useProgram(B.program);
v=Z.angle_instanced_arrays;var Dd;R.setVAO(null);Dd=S.instances;for(m=0;m<e;++m){q=a[m];var qd,ge,ae,Ce,Ye,Ze,Hd,Ae,se,Yd,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb;qd=q.viewport;ge=qd.x|0;ae=qd.y|0;Ce="width"in qd?qd.width|0:c.framebufferWidth-ge;Ye="height"in qd?qd.height|0:c.framebufferHeight-ae;Ze=c.viewportWidth;c.viewportWidth=
Ce;Hd=c.viewportHeight;c.viewportHeight=Ye;w.viewport(ge,ae,Ce,Ye);fa[0]=ge;fa[1]=ae;fa[2]=Ce;fa[3]=Ye;Ae=q.viewport;se=Ae.x|0;Yd=Ae.y|0;Ad="width"in Ae?Ae.width|0:c.framebufferWidth-se;Zd="height"in Ae?Ae.height|0:c.framebufferHeight-Yd;w.scissor(se,Yd,Ad,Zd);n[0]=se;n[1]=Yd;n[2]=Ad;n[3]=Zd;ka.buffer=q.positionBuffer;md=!1;bd=null;rd=0;Lc=!1;Gc=od=0;fd=1;Pc=0;Wc=5126;xb=Dc=Fb=Bb=0;V(ka)?(md=!0,bd=ga.createStream(34962,ka),Wc=bd.dtype):(bd=ga.getBuffer(ka))?Wc=bd.dtype:"constant"in ka?(fd=2,"number"===
typeof ka.constant?(Fb=ka.constant,Dc=xb=Bb=0):(Fb=0<ka.constant.length?ka.constant[0]:0,Dc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Bb=3<ka.constant.length?ka.constant[3]:0)):(bd=V(ka.buffer)?ga.createStream(34962,ka.buffer):ga.getBuffer(ka.buffer),Wc="type"in ka?Ea[ka.type]:bd.dtype,Lc=!!ka.normalized,Gc=ka.size|0,od=ka.offset|0,Pc=ka.stride|0,rd=ka.divisor|0);xc=t.location;Cb=P[xc];if(1===fd){Cb.buffer||w.enableVertexAttribArray(xc);Jc=Gc||2;if(Cb.type!==Wc||
Cb.size!==Jc||Cb.buffer!==bd||Cb.normalized!==Lc||Cb.offset!==od||Cb.stride!==Pc)w.bindBuffer(34962,bd.buffer),w.vertexAttribPointer(xc,Jc,Wc,Lc,Pc,od),Cb.type=Wc,Cb.size=Jc,Cb.buffer=bd,Cb.normalized=Lc,Cb.offset=od,Cb.stride=Pc;Cb.divisor!==rd&&(v.vertexAttribDivisorANGLE(xc,rd),Cb.divisor=rd)}else if(Cb.buffer&&(w.disableVertexAttribArray(xc),Cb.buffer=null),Cb.x!==Fb||Cb.y!==Dc||Cb.z!==xb||Cb.w!==Bb)w.vertexAttrib4f(xc,Fb,Dc,xb,Bb),Cb.x=Fb,Cb.y=Dc,Cb.z=xb,Cb.w=Bb;pa.buffer=q.positionFractBuffer;
nc=!1;Hc=null;Xc=0;Vc=!1;gc=Ec=0;Ic=1;qc=0;rc=5126;cc=Za=hc=oc=0;V(pa)?(nc=!0,Hc=ga.createStream(34962,pa),rc=Hc.dtype):(Hc=ga.getBuffer(pa))?rc=Hc.dtype:"constant"in pa?(Ic=2,"number"===typeof pa.constant?(hc=pa.constant,Za=cc=oc=0):(hc=0<pa.constant.length?pa.constant[0]:0,Za=1<pa.constant.length?pa.constant[1]:0,cc=2<pa.constant.length?pa.constant[2]:0,oc=3<pa.constant.length?pa.constant[3]:0)):(Hc=V(pa.buffer)?ga.createStream(34962,pa.buffer):ga.getBuffer(pa.buffer),rc="type"in pa?Ea[pa.type]:
Hc.dtype,Vc=!!pa.normalized,gc=pa.size|0,Ec=pa.offset|0,qc=pa.stride|0,Xc=pa.divisor|0);yb=l.location;bb=P[yb];if(1===Ic){bb.buffer||w.enableVertexAttribArray(yb);Nb=gc||2;if(bb.type!==rc||bb.size!==Nb||bb.buffer!==Hc||bb.normalized!==Vc||bb.offset!==Ec||bb.stride!==qc)w.bindBuffer(34962,Hc.buffer),w.vertexAttribPointer(yb,Nb,rc,Vc,qc,Ec),bb.type=rc,bb.size=Nb,bb.buffer=Hc,bb.normalized=Vc,bb.offset=Ec,bb.stride=qc;bb.divisor!==Xc&&(v.vertexAttribDivisorANGLE(yb,Xc),bb.divisor=Xc)}else if(bb.buffer&&
(w.disableVertexAttribArray(yb),bb.buffer=null),bb.x!==hc||bb.y!==Za||bb.z!==cc||bb.w!==oc)w.vertexAttrib4f(yb,hc,Za,cc,oc),bb.x=hc,bb.y=Za,bb.z=cc,bb.w=oc;$a=q.fill;ob=$a[0];yd=$a[1];Jb=$a[2];Ob=$a[3];m&&Ua===ob&&Ib===yd&&sc===Jb&&jb===Ob||(Ua=ob,Ib=yd,sc=Jb,jb=Ob,w.uniform4f(G.location,ob,yd,Jb,Ob));Gb=q.scale;Db=Gb[0];hb=Gb[1];m&&wb===Db&&Zb===hb||(wb=Db,Zb=hb,w.uniform2f(ca.location,Db,hb));Pb=q.scaleFract;qb=Pb[0];Ub=Pb[1];m&&Ra===qb&&zb===Ub||(Ra=qb,zb=Ub,w.uniform2f(u.location,qb,Ub));dc=q.translate;
ib=dc[0];Ia=dc[1];m&&pb===ib&&rb===Ia||(pb=ib,rb=Ia,w.uniform2f(N.location,ib,Ia));Ka=q.translateFract;eb=Ka[0];La=Ka[1];m&&gb===eb&&kb===La||(gb=eb,kb=La,w.uniform2f(y.location,eb,La));Va=q.id;m&&tb===Va||(tb=Va,w.uniform1f(T.location,Va));sb=q.opacity;m&&Oa===sb||(Oa=sb,w.uniform1f(x.location,sb));Cc=D.call(this,c,q,m);Qa=null;(Qa=(Kb=V(Cc))?r.createStream(Cc):r.getElements(Cc))&&w.bindBuffer(34963,Qa.buffer.buffer);if(Eb=Qa?Qa.vertCount:-1)0<Dd?Qa?v.drawElementsInstancedANGLE(4,Eb,Qa.type,0<<(Qa.type-
5121>>1),Dd):v.drawArraysInstancedANGLE(4,0,Eb,Dd):0>Dd&&(Qa?w.drawElements(4,Eb,Qa.type,0<<(Qa.type-5121>>1)):w.drawArrays(4,0,Eb)),c.viewportWidth=Ze,c.viewportHeight=Hd,md&&ga.destroyStream(bd),nc&&ga.destroyStream(Hc),Kb&&r.destroyStream(Qa)}b.dirty=!0;R.setVAO(null);d&&(ba.cpuTime+=performance.now()-k)},draw:function(a){var e,f,d,k,v,m,q,g,A,C,D,ha,I,ra,Fa,qa,ya,xa,la,Y,B,na;e=h.next;e!==h.cur&&(e?w.bindFramebuffer(36160,e.framebuffer):w.bindFramebuffer(36160,null),h.cur=e);if(b.dirty){e=E.dither;
e!==b.dither&&(e?w.enable(3024):w.disable(3024),b.dither=e);e=E.depth_func;e!==b.depth_func&&(w.depthFunc(e),b.depth_func=e);e=O[0];m=O[1];if(e!==z[0]||m!==z[1])w.depthRange(e,m),z[0]=e,z[1]=m;e=E.depth_mask;e!==b.depth_mask&&(w.depthMask(e),b.depth_mask=e);e=ea[0];m=ea[1];f=ea[2];d=ea[3];if(e!==Q[0]||m!==Q[1]||f!==Q[2]||d!==Q[3])w.colorMask(e,m,f,d),Q[0]=e,Q[1]=m,Q[2]=f,Q[3]=d;e=E.cull_enable;e!==b.cull_enable&&(e?w.enable(2884):w.disable(2884),b.cull_enable=e);e=E.cull_face;e!==b.cull_face&&(w.cullFace(e),
b.cull_face=e);e=E.frontFace;e!==b.frontFace&&(w.frontFace(e),b.frontFace=e);e=E.lineWidth;e!==b.lineWidth&&(w.lineWidth(e),b.lineWidth=e);e=E.polygonOffset_enable;e!==b.polygonOffset_enable&&(e?w.enable(32823):w.disable(32823),b.polygonOffset_enable=e);e=p[0];m=p[1];if(e!==L[0]||m!==L[1])w.polygonOffset(e,m),L[0]=e,L[1]=m;e=E.sample_alpha;e!==b.sample_alpha&&(e?w.enable(32926):w.disable(32926),b.sample_alpha=e);e=E.sample_enable;e!==b.sample_enable&&(e?w.enable(32928):w.disable(32928),b.sample_enable=
e);e=K[0];m=K[1];if(e!==za[0]||m!==za[1])w.sampleCoverage(e,m),za[0]=e,za[1]=m;e=E.stencil_mask;e!==b.stencil_mask&&(w.stencilMask(e),b.stencil_mask=e);e=F[0];m=F[1];f=F[2];if(e!==aa[0]||m!==aa[1]||f!==aa[2])w.stencilFunc(e,m,f),aa[0]=e,aa[1]=m,aa[2]=f;e=oa[0];m=oa[1];f=oa[2];d=oa[3];if(e!==Ca[0]||m!==Ca[1]||f!==Ca[2]||d!==Ca[3])w.stencilOpSeparate(e,m,f,d),Ca[0]=e,Ca[1]=m,Ca[2]=f,Ca[3]=d;e=M[0];m=M[1];f=M[2];d=M[3];if(e!==ma[0]||m!==ma[1]||f!==ma[2]||d!==ma[3])w.stencilOpSeparate(e,m,f,d),ma[0]=
e,ma[1]=m,ma[2]=f,ma[3]=d}e=a.viewport;f=e.x|0;d=e.y|0;k="width"in e?e.width|0:c.framebufferWidth-f;v="height"in e?e.height|0:c.framebufferHeight-d;e=c.viewportWidth;c.viewportWidth=k;m=c.viewportHeight;c.viewportHeight=v;w.viewport(f,d,k,v);fa[0]=f;fa[1]=d;fa[2]=k;fa[3]=v;w.blendColor(0,0,0,0);sa[0]=0;sa[1]=0;sa[2]=0;sa[3]=0;w.enable(3042);b.blend_enable=!0;w.blendEquationSeparate(32774,32774);ta[0]=32774;ta[1]=32774;w.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;w.disable(2929);
b.depth_enable=!1;v=a.viewport;f=v.x|0;d=v.y|0;k="width"in v?v.width|0:c.framebufferWidth-f;v="height"in v?v.height|0:c.framebufferHeight-d;w.scissor(f,d,k,v);n[0]=f;n[1]=d;n[2]=k;n[3]=v;w.enable(3089);b.scissor_enable=!0;w.disable(2960);b.stencil_enable=!1;if(f=b.profile)q=performance.now(),ba.count++;w.useProgram(H.program);d=Z.angle_instanced_arrays;R.setVAO(null);ka.buffer=a.positionBuffer;k=!1;g=0;A=!1;D=C=0;ha=1;I=0;ra=5126;xa=ya=qa=Fa=0;V(ka)?(k=!0,v=ga.createStream(34962,ka),ra=v.dtype):(v=
ga.getBuffer(ka))?ra=v.dtype:"constant"in ka?(ha=2,"number"===typeof ka.constant?(qa=ka.constant,ya=xa=Fa=0):(qa=0<ka.constant.length?ka.constant[0]:0,ya=1<ka.constant.length?ka.constant[1]:0,xa=2<ka.constant.length?ka.constant[2]:0,Fa=3<ka.constant.length?ka.constant[3]:0)):(v=V(ka.buffer)?ga.createStream(34962,ka.buffer):ga.getBuffer(ka.buffer),ra="type"in ka?Ea[ka.type]:v.dtype,A=!!ka.normalized,D=ka.size|0,C=ka.offset|0,I=ka.stride|0,g=ka.divisor|0);la=t.location;Y=P[la];if(1===ha){Y.buffer||
w.enableVertexAttribArray(la);D=D||2;if(Y.type!==ra||Y.size!==D||Y.buffer!==v||Y.normalized!==A||Y.offset!==C||Y.stride!==I)w.bindBuffer(34962,v.buffer),w.vertexAttribPointer(la,D,ra,A,I,C),Y.type=ra,Y.size=D,Y.buffer=v,Y.normalized=A,Y.offset=C,Y.stride=I;Y.divisor!==g&&(d.vertexAttribDivisorANGLE(la,g),Y.divisor=g)}else if(Y.buffer&&(w.disableVertexAttribArray(la),Y.buffer=null),Y.x!==qa||Y.y!==ya||Y.z!==xa||Y.w!==Fa)w.vertexAttrib4f(la,qa,ya,xa,Fa),Y.x=qa,Y.y=ya,Y.z=xa,Y.w=Fa;pa.buffer=a.positionFractBuffer;
g=!1;C=0;I=!1;Fa=ra=0;qa=1;la=0;Y=5126;na=B=xa=ya=0;V(pa)?(g=!0,A=ga.createStream(34962,pa),Y=A.dtype):(A=ga.getBuffer(pa))?Y=A.dtype:"constant"in pa?(qa=2,"number"===typeof pa.constant?(xa=pa.constant,B=na=ya=0):(xa=0<pa.constant.length?pa.constant[0]:0,B=1<pa.constant.length?pa.constant[1]:0,na=2<pa.constant.length?pa.constant[2]:0,ya=3<pa.constant.length?pa.constant[3]:0)):(A=V(pa.buffer)?ga.createStream(34962,pa.buffer):ga.getBuffer(pa.buffer),Y="type"in pa?Ea[pa.type]:A.dtype,I=!!pa.normalized,
Fa=pa.size|0,ra=pa.offset|0,la=pa.stride|0,C=pa.divisor|0);D=l.location;ha=P[D];if(1===qa){ha.buffer||w.enableVertexAttribArray(D);Fa=Fa||2;if(ha.type!==Y||ha.size!==Fa||ha.buffer!==A||ha.normalized!==I||ha.offset!==ra||ha.stride!==la)w.bindBuffer(34962,A.buffer),w.vertexAttribPointer(D,Fa,Y,I,la,ra),ha.type=Y,ha.size=Fa,ha.buffer=A,ha.normalized=I,ha.offset=ra,ha.stride=la;ha.divisor!==C&&(d.vertexAttribDivisorANGLE(D,C),ha.divisor=C)}else if(ha.buffer&&(w.disableVertexAttribArray(D),ha.buffer=null),
ha.x!==xa||ha.y!==B||ha.z!==na||ha.w!==ya)w.vertexAttrib4f(D,xa,B,na,ya),ha.x=xa,ha.y=B,ha.z=na,ha.w=ya;C=a.fill;w.uniform4f(G.location,C[0],C[1],C[2],C[3]);C=a.scale;w.uniform2f(ca.location,C[0],C[1]);C=a.scaleFract;w.uniform2f(u.location,C[0],C[1]);C=a.translate;w.uniform2f(N.location,C[0],C[1]);C=a.translateFract;w.uniform2f(y.location,C[0],C[1]);w.uniform1f(T.location,a.id);w.uniform1f(x.location,a.opacity);C=J.call(this,c,a,0);(C=(a=V(C))?r.createStream(C):r.getElements(C))&&w.bindBuffer(34963,
C.buffer.buffer);if(I=C?C.vertCount:-1)ra=S.instances,0<ra?C?d.drawElementsInstancedANGLE(4,I,C.type,0<<(C.type-5121>>1),ra):d.drawArraysInstancedANGLE(4,0,I,ra):0>ra&&(C?w.drawElements(4,I,C.type,0<<(C.type-5121>>1)):w.drawArrays(4,0,I)),b.dirty=!0,R.setVAO(null),c.viewportWidth=e,c.viewportHeight=m,f&&(ba.cpuTime+=performance.now()-q),k&&ga.destroyStream(v),g&&ga.destroyStream(A),a&&r.destroyStream(C)},scope:function(h,d,n){var p,w,v,m,U,F,O,M,u,z,I,ra,Fa,qa,fa,Q,J,t,y,K,x,aa,D,L,l,H,oa,P,B,za,
R,G,N,T,X,Z,ea,ca,ma,sa,ta,Ca,W,ia,Hd,Ae,se,Yd,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb;p=h.viewport;w=p.x|0;v=p.y|0;m="width"in p?p.width|0:c.framebufferWidth-w;U="height"in p?p.height|0:c.framebufferHeight-v;F=c.viewportWidth;c.viewportWidth=m;O=c.viewportHeight;c.viewportHeight=U;M=xa[0];xa[0]=w;u=xa[1];xa[1]=v;z=xa[2];xa[2]=m;I=xa[3];xa[3]=
U;ra=a[0];a[0]=0;Fa=a[1];a[1]=0;qa=a[2];a[2]=0;fa=a[3];a[3]=0;Q=E.blend_enable;E.blend_enable=!0;J=A[0];A[0]=32774;t=A[1];A[1]=32774;y=db[0];db[0]=770;K=db[1];db[1]=771;x=db[2];db[2]=773;aa=db[3];db[3]=1;D=E.depth_enable;E.depth_enable=!1;L=h.viewport;l=L.x|0;H=L.y|0;oa="width"in L?L.width|0:c.framebufferWidth-l;P="height"in L?L.height|0:c.framebufferHeight-H;B=na[0];na[0]=l;za=na[1];na[1]=H;R=na[2];na[2]=oa;G=na[3];na[3]=P;N=E.scissor_enable;E.scissor_enable=!0;T=E.stencil_enable;E.stencil_enable=
!1;if(X=b.profile)Z=performance.now(),ba.count++;ea=g.call(this,c,h,n);ca=null;ca=(ma=V(ea))?r.createStream(ea):r.getElements(ea);sa=S.elements;S.elements=ca;ta=S.offset;S.offset=0;Ca=ca?ca.vertCount:-1;W=S.count;S.count=Ca;ia=S.primitive;S.primitive=4;Hd=h.fill;Ae=e[14];e[14]=Hd;se=h.id;Yd=e[31];e[31]=se;Ad=h.opacity;Zd=e[10];e[10]=Ad;md=c.pixelRatio;bd=e[34];e[34]=md;rd=h.scale;Lc=e[6];e[6]=rd;od=h.scaleFract;Gc=e[7];e[7]=od;fd=h.translate;Pc=e[8];e[8]=fd;Wc=h.translateFract;Bb=e[9];e[9]=Wc;Fb=
k.call(this,c,h,n);Dc=e[3];e[3]=Fb;ka.buffer=h.positionBuffer;xb=!1;xc=null;Cb=0;Jc=!1;Hc=nc=0;Xc=1;Vc=0;Ec=5126;rc=qc=Ic=gc=0;V(ka)?(xb=!0,xc=ga.createStream(34962,ka),Ec=xc.dtype):(xc=ga.getBuffer(ka))?Ec=xc.dtype:"constant"in ka?(Xc=2,"number"===typeof ka.constant?(Ic=ka.constant,qc=rc=gc=0):(Ic=0<ka.constant.length?ka.constant[0]:0,qc=1<ka.constant.length?ka.constant[1]:0,rc=2<ka.constant.length?ka.constant[2]:0,gc=3<ka.constant.length?ka.constant[3]:0)):(xc=V(ka.buffer)?ga.createStream(34962,
ka.buffer):ga.getBuffer(ka.buffer),Ec="type"in ka?Ea[ka.type]:xc.dtype,Jc=!!ka.normalized,Hc=ka.size|0,nc=ka.offset|0,Vc=ka.stride|0,Cb=ka.divisor|0);oc=q.buffer;q.buffer=xc;hc=q.divisor;q.divisor=Cb;Za=q.normalized;q.normalized=Jc;cc=q.offset;q.offset=nc;yb=q.size;q.size=Hc;bb=q.state;q.state=Xc;Nb=q.stride;q.stride=Vc;$a=q.type;q.type=Ec;ob=q.w;q.w=gc;Ua=q.x;q.x=Ic;yd=q.y;q.y=qc;Ib=q.z;q.z=rc;pa.buffer=h.positionFractBuffer;Jb=!1;sc=null;Ob=0;jb=!1;Db=Gb=0;wb=1;hb=0;Zb=5126;Ub=Ra=qb=Pb=0;V(pa)?
(Jb=!0,sc=ga.createStream(34962,pa),Zb=sc.dtype):(sc=ga.getBuffer(pa))?Zb=sc.dtype:"constant"in pa?(wb=2,"number"===typeof pa.constant?(qb=pa.constant,Ra=Ub=Pb=0):(qb=0<pa.constant.length?pa.constant[0]:0,Ra=1<pa.constant.length?pa.constant[1]:0,Ub=2<pa.constant.length?pa.constant[2]:0,Pb=3<pa.constant.length?pa.constant[3]:0)):(sc=V(pa.buffer)?ga.createStream(34962,pa.buffer):ga.getBuffer(pa.buffer),Zb="type"in pa?Ea[pa.type]:sc.dtype,jb=!!pa.normalized,Db=pa.size|0,Gb=pa.offset|0,hb=pa.stride|0,
Ob=pa.divisor|0);zb=f.buffer;f.buffer=sc;dc=f.divisor;f.divisor=Ob;ib=f.normalized;f.normalized=jb;pb=f.offset;f.offset=Gb;Ia=f.size;f.size=Db;rb=f.state;f.state=wb;Ka=f.stride;f.stride=hb;eb=f.type;f.type=Zb;gb=f.w;f.w=Pb;La=f.x;f.x=qb;kb=f.y;f.y=Ra;Va=f.z;f.z=Ub;tb=C.vert;C.vert=42;sb=C.frag;C.frag=41;b.dirty=!0;d(c,h,n);c.viewportWidth=F;c.viewportHeight=O;xa[0]=M;xa[1]=u;xa[2]=z;xa[3]=I;a[0]=ra;a[1]=Fa;a[2]=qa;a[3]=fa;E.blend_enable=Q;A[0]=J;A[1]=t;db[0]=y;db[1]=K;db[2]=x;db[3]=aa;E.depth_enable=
D;na[0]=B;na[1]=za;na[2]=R;na[3]=G;E.scissor_enable=N;E.stencil_enable=T;X&&(ba.cpuTime+=performance.now()-Z);ma&&r.destroyStream(ca);S.elements=sa;S.offset=ta;S.count=W;S.primitive=ia;e[14]=Ae;e[31]=Yd;e[10]=Zd;e[34]=bd;e[6]=Lc;e[7]=Gc;e[8]=Pc;e[9]=Bb;e[3]=Dc;xb&&ga.destroyStream(xc);q.buffer=oc;q.divisor=hc;q.normalized=Za;q.offset=cc;q.size=yb;q.state=bb;q.stride=Nb;q.type=$a;q.w=ob;q.x=Ua;q.y=yd;q.z=Ib;Jb&&ga.destroyStream(sc);f.buffer=zb;f.divisor=dc;f.normalized=ib;f.offset=pb;f.size=Ia;f.state=
rb;f.stride=Ka;f.type=eb;f.w=gb;f.x=La;f.y=kb;f.z=Va;C.vert=tb;C.frag=sb;b.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta){var v,m,U,va,wa,W,Hb,ha,I,ra,Fa,qa,ya,Ga,la,Y,ua,Ja,Da,mb,da,ia,
ac,Ha,bc,Sb,fb,Gd,me,Wd,ze,zd,Vd,pe,fe,Dd,qd,ge,ae;v=d.attributes;m=d.buffer;U=d.context;va=d.current;wa=d.draw;W=d.elements;Hb=d.extensions;ha=d.framebuffer;I=d.gl;ra=d.isBufferArgs;Fa=d.next;qa=d.shader;ya=d.uniforms;Ga=d.vao;la=Fa.blend_color;Y=va.blend_color;ua=Fa.blend_equation;Ja=va.blend_equation;Da=Fa.blend_func;mb=va.blend_func;da=Fa.colorMask;ia=va.colorMask;ac=Fa.depth_range;Ha=va.depth_range;bc=Fa.polygonOffset_offset;Sb=va.polygonOffset_offset;fb=Fa.sample_coverage;Gd=va.sample_coverage;
me=Fa.scissor_box;Wd=va.scissor_box;ze=Fa.stencil_func;zd=va.stencil_func;Vd=Fa.stencil_opBack;pe=va.stencil_opBack;fe=Fa.stencil_opFront;Dd=va.stencil_opFront;qd=Fa.viewport;ge=va.viewport;ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var e,c,f,h,d,k;e=ha.next;e!==ha.cur&&(e?I.bindFramebuffer(36160,e.framebuffer):I.bindFramebuffer(36160,null),ha.cur=e);if(va.dirty){var r,q,w,g,u,C,qa,E,J,t,y,la,x,D,l,ya,H,S,P,B,R,G,N,
T,Z,ga,ca,V,Da,cc,yb,bb,Nb,$a;r=Fa.dither;r!==va.dither&&(r?I.enable(3024):I.disable(3024),va.dither=r);q=ua[0];w=ua[1];if(q!==Ja[0]||w!==Ja[1])I.blendEquationSeparate(q,w),Ja[0]=q,Ja[1]=w;g=Fa.depth_func;g!==va.depth_func&&(I.depthFunc(g),va.depth_func=g);u=ac[0];C=ac[1];if(u!==Ha[0]||C!==Ha[1])I.depthRange(u,C),Ha[0]=u,Ha[1]=C;qa=Fa.depth_mask;qa!==va.depth_mask&&(I.depthMask(qa),va.depth_mask=qa);E=da[0];J=da[1];t=da[2];y=da[3];if(E!==ia[0]||J!==ia[1]||t!==ia[2]||y!==ia[3])I.colorMask(E,J,t,y),
ia[0]=E,ia[1]=J,ia[2]=t,ia[3]=y;la=Fa.cull_enable;la!==va.cull_enable&&(la?I.enable(2884):I.disable(2884),va.cull_enable=la);x=Fa.cull_face;x!==va.cull_face&&(I.cullFace(x),va.cull_face=x);D=Fa.frontFace;D!==va.frontFace&&(I.frontFace(D),va.frontFace=D);l=Fa.lineWidth;l!==va.lineWidth&&(I.lineWidth(l),va.lineWidth=l);ya=Fa.polygonOffset_enable;ya!==va.polygonOffset_enable&&(ya?I.enable(32823):I.disable(32823),va.polygonOffset_enable=ya);H=bc[0];S=bc[1];if(H!==Sb[0]||S!==Sb[1])I.polygonOffset(H,S),
Sb[0]=H,Sb[1]=S;P=Fa.sample_alpha;P!==va.sample_alpha&&(P?I.enable(32926):I.disable(32926),va.sample_alpha=P);B=Fa.sample_enable;B!==va.sample_enable&&(B?I.enable(32928):I.disable(32928),va.sample_enable=B);R=fb[0];G=fb[1];if(R!==Gd[0]||G!==Gd[1])I.sampleCoverage(R,G),Gd[0]=R,Gd[1]=G;N=Fa.stencil_mask;N!==va.stencil_mask&&(I.stencilMask(N),va.stencil_mask=N);T=ze[0];Z=ze[1];ga=ze[2];if(T!==zd[0]||Z!==zd[1]||ga!==zd[2])I.stencilFunc(T,Z,ga),zd[0]=T,zd[1]=Z,zd[2]=ga;ca=fe[0];V=fe[1];Da=fe[2];cc=fe[3];
if(ca!==Dd[0]||V!==Dd[1]||Da!==Dd[2]||cc!==Dd[3])I.stencilOpSeparate(ca,V,Da,cc),Dd[0]=ca,Dd[1]=V,Dd[2]=Da,Dd[3]=cc;yb=Vd[0];bb=Vd[1];Nb=Vd[2];$a=Vd[3];if(yb!==pe[0]||bb!==pe[1]||Nb!==pe[2]||$a!==pe[3])I.stencilOpSeparate(yb,bb,Nb,$a),pe[0]=yb,pe[1]=bb,pe[2]=Nb,pe[3]=$a}I.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;I.enable(3089);va.scissor_enable=!0;I.disable(2960);
va.stencil_enable=!1;if(c=va.profile)f=performance.now(),ba.count+=b;I.useProgram(sa.program);h=Hb.angle_instanced_arrays;var ob;Ga.setVAO(null);I.uniform1i(F.location,!1);I.uniform1i(Ca.location,L.bind());ob=wa.instances;for(d=0;d<b;++d){k=a[d];var Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,me,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,
Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,qd,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,hf,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf;Ua=k.viewport;yd=Ua.x|0;Ib=Ua.y|0;Jb="width"in Ua?Ua.width|0:U.framebufferWidth-yd;sc="height"in Ua?Ua.height|0:U.framebufferHeight-Ib;Ob=U.viewportWidth;
U.viewportWidth=Jb;jb=U.viewportHeight;U.viewportHeight=sc;I.viewport(yd,Ib,Jb,sc);ge[0]=yd;ge[1]=Ib;ge[2]=Jb;ge[3]=sc;Gb=k.viewport;Db=Gb.x|0;wb=Gb.y|0;hb="width"in Gb?Gb.width|0:U.framebufferWidth-Db;Zb="height"in Gb?Gb.height|0:U.framebufferHeight-wb;I.scissor(Db,wb,hb,Zb);Wd[0]=Db;Wd[1]=wb;Wd[2]=hb;Wd[3]=Zb;Pb=A.call(this,U,k,d);qb=!1;Ra=null;Ub=0;zb=!1;ib=dc=0;pb=1;Ia=0;rb=5126;La=gb=eb=Ka=0;ra(Pb)?(qb=!0,Ra=m.createStream(34962,Pb),rb=Ra.dtype):(Ra=m.getBuffer(Pb))?rb=Ra.dtype:"constant"in Pb?
(pb=2,"number"===typeof Pb.constant?(eb=Pb.constant,gb=La=Ka=0):(eb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,La=2<Pb.constant.length?Pb.constant[2]:0,Ka=3<Pb.constant.length?Pb.constant[3]:0)):(Ra=ra(Pb.buffer)?m.createStream(34962,Pb.buffer):m.getBuffer(Pb.buffer),rb="type"in Pb?ae[Pb.type]:Ra.dtype,zb=!!Pb.normalized,ib=Pb.size|0,dc=Pb.offset|0,Ia=Pb.stride|0,Ub=Pb.divisor|0);kb=Ba.location;Va=v[kb];if(1===pb){Va.buffer||I.enableVertexAttribArray(kb);tb=ib||
1;if(Va.type!==rb||Va.size!==tb||Va.buffer!==Ra||Va.normalized!==zb||Va.offset!==dc||Va.stride!==Ia)I.bindBuffer(34962,Ra.buffer),I.vertexAttribPointer(kb,tb,rb,zb,Ia,dc),Va.type=rb,Va.size=tb,Va.buffer=Ra,Va.normalized=zb,Va.offset=dc,Va.stride=Ia;Va.divisor!==Ub&&(h.vertexAttribDivisorANGLE(kb,Ub),Va.divisor=Ub)}else if(Va.buffer&&(I.disableVertexAttribArray(kb),Va.buffer=null),Va.x!==eb||Va.y!==gb||Va.z!==La||Va.w!==Ka)I.vertexAttrib4f(kb,eb,gb,La,Ka),Va.x=eb,Va.y=gb,Va.z=La,Va.w=Ka;sb=ta.call(this,
U,k,d);Oa=!1;Cc=null;Qa=0;Kb=!1;Ma=Eb=0;wd=1;Xa=0;Lb=5126;$b=Na=lb=Mb=0;ra(sb)?(Oa=!0,Cc=m.createStream(34962,sb),Lb=Cc.dtype):(Cc=m.getBuffer(sb))?Lb=Cc.dtype:"constant"in sb?(wd=2,"number"===typeof sb.constant?(lb=sb.constant,Na=$b=Mb=0):(lb=0<sb.constant.length?sb.constant[0]:0,Na=1<sb.constant.length?sb.constant[1]:0,$b=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?sb.constant[3]:0)):(Cc=ra(sb.buffer)?m.createStream(34962,sb.buffer):m.getBuffer(sb.buffer),Lb="type"in sb?ae[sb.type]:
Cc.dtype,Kb=!!sb.normalized,Ma=sb.size|0,Eb=sb.offset|0,Xa=sb.stride|0,Qa=sb.divisor|0);Pa=Yb.location;ub=v[Pa];if(1===wd){ub.buffer||I.enableVertexAttribArray(Pa);vb=Ma||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==Cc||ub.normalized!==Kb||ub.offset!==Eb||ub.stride!==Xa)I.bindBuffer(34962,Cc.buffer),I.vertexAttribPointer(Pa,vb,Lb,Kb,Xa,Eb),ub.type=Lb,ub.size=vb,ub.buffer=Cc,ub.normalized=Kb,ub.offset=Eb,ub.stride=Xa;ub.divisor!==Qa&&(h.vertexAttribDivisorANGLE(Pa,Qa),ub.divisor=Qa)}else if(ub.buffer&&
(I.disableVertexAttribArray(Pa),ub.buffer=null),ub.x!==lb||ub.y!==Na||ub.z!==$b||ub.w!==Mb)I.vertexAttrib4f(Pa,lb,Na,$b,Mb),ub.x=lb,ub.y=Na,ub.z=$b,ub.w=Mb;Sa=db.call(this,U,k,d);nb=!1;ic=null;Ac=0;vc=!1;lc=ab=0;hd=1;Wa=0;Mc=5126;uc=Vb=Ya=Ab=0;ra(Sa)?(nb=!0,ic=m.createStream(34962,Sa),Mc=ic.dtype):(ic=m.getBuffer(Sa))?Mc=ic.dtype:"constant"in Sa?(hd=2,"number"===typeof Sa.constant?(Ya=Sa.constant,Vb=uc=Ab=0):(Ya=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?
Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(ic=ra(Sa.buffer)?m.createStream(34962,Sa.buffer):m.getBuffer(Sa.buffer),Mc="type"in Sa?ae[Sa.type]:ic.dtype,vc=!!Sa.normalized,lc=Sa.size|0,ab=Sa.offset|0,Wa=Sa.stride|0,Ac=Sa.divisor|0);Wb=ja.location;Qb=v[Wb];if(1===hd){Qb.buffer||I.enableVertexAttribArray(Wb);Kc=lc||1;if(Qb.type!==Mc||Qb.size!==Kc||Qb.buffer!==ic||Qb.normalized!==vc||Qb.offset!==ab||Qb.stride!==Wa)I.bindBuffer(34962,ic.buffer),I.vertexAttribPointer(Wb,Kc,Mc,vc,Wa,ab),
Qb.type=Mc,Qb.size=Kc,Qb.buffer=ic,Qb.normalized=vc,Qb.offset=ab,Qb.stride=Wa;Qb.divisor!==Ac&&(h.vertexAttribDivisorANGLE(Wb,Ac),Qb.divisor=Ac)}else if(Qb.buffer&&(I.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==Ya||Qb.y!==Vb||Qb.z!==uc||Qb.w!==Ab)I.vertexAttrib4f(Wb,Ya,Vb,uc,Ab),Qb.x=Ya,Qb.y=Vb,Qb.z=uc,Qb.w=Ab;Rb=X.call(this,U,k,d);Qd=!1;Fc=null;me=0;Nc=!1;td=Yc=0;pc=1;wc=0;jc=5126;Xb=Tb=tc=cb=0;ra(Rb)?(Qd=!0,Fc=m.createStream(34962,Rb),jc=Fc.dtype):(Fc=m.getBuffer(Rb))?jc=Fc.dtype:"constant"in
Rb?(pc=2,"number"===typeof Rb.constant?(tc=Rb.constant,Tb=Xb=cb=0):(tc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Xb=2<Rb.constant.length?Rb.constant[2]:0,cb=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=ra(Rb.buffer)?m.createStream(34962,Rb.buffer):m.getBuffer(Rb.buffer),jc="type"in Rb?ae[Rb.type]:Fc.dtype,Nc=!!Rb.normalized,td=Rb.size|0,Yc=Rb.offset|0,wc=Rb.stride|0,me=Rb.divisor|0);fc=Ta.location;kc=v[fc];if(1===pc){kc.buffer||I.enableVertexAttribArray(fc);yc=
td||1;if(kc.type!==jc||kc.size!==yc||kc.buffer!==Fc||kc.normalized!==Nc||kc.offset!==Yc||kc.stride!==wc)I.bindBuffer(34962,Fc.buffer),I.vertexAttribPointer(fc,yc,jc,Nc,wc,Yc),kc.type=jc,kc.size=yc,kc.buffer=Fc,kc.normalized=Nc,kc.offset=Yc,kc.stride=wc;kc.divisor!==me&&(h.vertexAttribDivisorANGLE(fc,me),kc.divisor=me)}else if(kc.buffer&&(I.disableVertexAttribArray(fc),kc.buffer=null),kc.x!==tc||kc.y!==Tb||kc.z!==Xb||kc.w!==cb)I.vertexAttrib4f(fc,tc,Tb,Xb,cb),kc.x=tc,kc.y=Tb,kc.z=Xb,kc.w=cb;Bc=ea.call(this,
U,k,d);cd=!1;Qc=null;Rc=0;Sc=!1;ld=Zc=0;dd=1;$c=0;mc=5126;ed=Uc=ad=ec=0;ra(Bc)?(cd=!0,Qc=m.createStream(34962,Bc),mc=Qc.dtype):(Qc=m.getBuffer(Bc))?mc=Qc.dtype:"constant"in Bc?(dd=2,"number"===typeof Bc.constant?(ad=Bc.constant,Uc=ed=ec=0):(ad=0<Bc.constant.length?Bc.constant[0]:0,Uc=1<Bc.constant.length?Bc.constant[1]:0,ed=2<Bc.constant.length?Bc.constant[2]:0,ec=3<Bc.constant.length?Bc.constant[3]:0)):(Qc=ra(Bc.buffer)?m.createStream(34962,Bc.buffer):m.getBuffer(Bc.buffer),mc="type"in Bc?ae[Bc.type]:
Qc.dtype,Sc=!!Bc.normalized,ld=Bc.size|0,Zc=Bc.offset|0,$c=Bc.stride|0,Rc=Bc.divisor|0);zc=ka.location;id=v[zc];if(1===dd){id.buffer||I.enableVertexAttribArray(zc);pd=ld||1;if(id.type!==mc||id.size!==pd||id.buffer!==Qc||id.normalized!==Sc||id.offset!==Zc||id.stride!==$c)I.bindBuffer(34962,Qc.buffer),I.vertexAttribPointer(zc,pd,mc,Sc,$c,Zc),id.type=mc,id.size=pd,id.buffer=Qc,id.normalized=Sc,id.offset=Zc,id.stride=$c;id.divisor!==Rc&&(h.vertexAttribDivisorANGLE(zc,Rc),id.divisor=Rc)}else if(id.buffer&&
(I.disableVertexAttribArray(zc),id.buffer=null),id.x!==ad||id.y!==Uc||id.z!==ed||id.w!==ec)I.vertexAttrib4f(zc,ad,Uc,ed,ec),id.x=ad,id.y=Uc,id.z=ed,id.w=ec;qd=Q.call(this,U,k,d);ye=!1;jd=null;$e=0;Nd=!1;ce=he=0;Od=1;Kd=0;Id=5126;sd=ud=Tc=nd=0;ra(qd)?(ye=!0,jd=m.createStream(34962,qd),Id=jd.dtype):(jd=m.getBuffer(qd))?Id=jd.dtype:"constant"in qd?(Od=2,"number"===typeof qd.constant?(Tc=qd.constant,ud=sd=nd=0):(Tc=0<qd.constant.length?qd.constant[0]:0,ud=1<qd.constant.length?qd.constant[1]:0,sd=2<qd.constant.length?
qd.constant[2]:0,nd=3<qd.constant.length?qd.constant[3]:0)):(jd=ra(qd.buffer)?m.createStream(34962,qd.buffer):m.getBuffer(qd.buffer),Id="type"in qd?ae[qd.type]:jd.dtype,Nd=!!qd.normalized,ce=qd.size|0,he=qd.offset|0,Kd=qd.stride|0,$e=qd.divisor|0);kd=na.location;vd=v[kd];if(1===Od){vd.buffer||I.enableVertexAttribArray(kd);Cd=ce||1;if(vd.type!==Id||vd.size!==Cd||vd.buffer!==jd||vd.normalized!==Nd||vd.offset!==he||vd.stride!==Kd)I.bindBuffer(34962,jd.buffer),I.vertexAttribPointer(kd,Cd,Id,Nd,Kd,he),
vd.type=Id,vd.size=Cd,vd.buffer=jd,vd.normalized=Nd,vd.offset=he,vd.stride=Kd;vd.divisor!==$e&&(h.vertexAttribDivisorANGLE(kd,$e),vd.divisor=$e)}else if(vd.buffer&&(I.disableVertexAttribArray(kd),vd.buffer=null),vd.x!==Tc||vd.y!==ud||vd.z!==sd||vd.w!==nd)I.vertexAttrib4f(kd,Tc,ud,sd,nd),vd.x=Tc,vd.y=ud,vd.z=sd,vd.w=nd;Fd=O.call(this,U,k,d);xe=!1;ke=null;Fe=0;le=!1;ie=je=0;te=1;de=0;ne=5126;qe=ue=gd=Oc=0;ra(Fd)?(xe=!0,ke=m.createStream(34962,Fd),ne=ke.dtype):(ke=m.getBuffer(Fd))?ne=ke.dtype:"constant"in
Fd?(te=2,"number"===typeof Fd.constant?(gd=Fd.constant,ue=qe=Oc=0):(gd=0<Fd.constant.length?Fd.constant[0]:0,ue=1<Fd.constant.length?Fd.constant[1]:0,qe=2<Fd.constant.length?Fd.constant[2]:0,Oc=3<Fd.constant.length?Fd.constant[3]:0)):(ke=ra(Fd.buffer)?m.createStream(34962,Fd.buffer):m.getBuffer(Fd.buffer),ne="type"in Fd?ae[Fd.type]:ke.dtype,le=!!Fd.normalized,ie=Fd.size|0,je=Fd.offset|0,de=Fd.stride|0,Fe=Fd.divisor|0);Ld=n.location;Pd=v[Ld];if(1===te){Pd.buffer||I.enableVertexAttribArray(Ld);Rd=ie||
4;if(Pd.type!==ne||Pd.size!==Rd||Pd.buffer!==ke||Pd.normalized!==le||Pd.offset!==je||Pd.stride!==de)I.bindBuffer(34962,ke.buffer),I.vertexAttribPointer(Ld,Rd,ne,le,de,je),Pd.type=ne,Pd.size=Rd,Pd.buffer=ke,Pd.normalized=le,Pd.offset=je,Pd.stride=de;Pd.divisor!==Fe&&(h.vertexAttribDivisorANGLE(Ld,Fe),Pd.divisor=Fe)}else if(Pd.buffer&&(I.disableVertexAttribArray(Ld),Pd.buffer=null),Pd.x!==gd||Pd.y!==ue||Pd.z!==qe||Pd.w!==Oc)I.vertexAttrib4f(Ld,gd,ue,qe,Oc),Pd.x=gd,Pd.y=ue,Pd.z=qe,Pd.w=Oc;Sd=z.call(this,
U,k,d);oe=!1;Ge=null;Be=0;re=!1;Se=Re=0;Oe=1;ve=0;He=5126;Ie=Le=Ke=Je=0;ra(Sd)?(oe=!0,Ge=m.createStream(34962,Sd),He=Ge.dtype):(Ge=m.getBuffer(Sd))?He=Ge.dtype:"constant"in Sd?(Oe=2,"number"===typeof Sd.constant?(Ke=Sd.constant,Le=Ie=Je=0):(Ke=0<Sd.constant.length?Sd.constant[0]:0,Le=1<Sd.constant.length?Sd.constant[1]:0,Ie=2<Sd.constant.length?Sd.constant[2]:0,Je=3<Sd.constant.length?Sd.constant[3]:0)):(Ge=ra(Sd.buffer)?m.createStream(34962,Sd.buffer):m.getBuffer(Sd.buffer),He="type"in Sd?ae[Sd.type]:
Ge.dtype,re=!!Sd.normalized,Se=Sd.size|0,Re=Sd.offset|0,ve=Sd.stride|0,Be=Sd.divisor|0);Md=za.location;Xd=v[Md];if(1===Oe){Xd.buffer||I.enableVertexAttribArray(Md);be=Se||4;if(Xd.type!==He||Xd.size!==be||Xd.buffer!==Ge||Xd.normalized!==re||Xd.offset!==Re||Xd.stride!==ve)I.bindBuffer(34962,Ge.buffer),I.vertexAttribPointer(Md,be,He,re,ve,Re),Xd.type=He,Xd.size=be,Xd.buffer=Ge,Xd.normalized=re,Xd.offset=Re,Xd.stride=ve;Xd.divisor!==Be&&(h.vertexAttribDivisorANGLE(Md,Be),Xd.divisor=Be)}else if(Xd.buffer&&
(I.disableVertexAttribArray(Md),Xd.buffer=null),Xd.x!==Ke||Xd.y!==Le||Xd.z!==Ie||Xd.w!==Je)I.vertexAttrib4f(Md,Ke,Le,Ie,Je),Xd.x=Ke,Xd.y=Le,Xd.z=Ie,Xd.w=Je;ee=p.call(this,U,k,d);Me=!1;Jd=null;Td=0;De=!1;hf=Ne=0;bf=1;Te=0;Pe=5126;Ve=Ue=Xe=af=0;ra(ee)?(Me=!0,Jd=m.createStream(34962,ee),Pe=Jd.dtype):(Jd=m.getBuffer(ee))?Pe=Jd.dtype:"constant"in ee?(bf=2,"number"===typeof ee.constant?(Xe=ee.constant,Ue=Ve=af=0):(Xe=0<ee.constant.length?ee.constant[0]:0,Ue=1<ee.constant.length?ee.constant[1]:0,Ve=2<ee.constant.length?
ee.constant[2]:0,af=3<ee.constant.length?ee.constant[3]:0)):(Jd=ra(ee.buffer)?m.createStream(34962,ee.buffer):m.getBuffer(ee.buffer),Pe="type"in ee?ae[ee.type]:Jd.dtype,De=!!ee.normalized,hf=ee.size|0,Ne=ee.offset|0,Te=ee.stride|0,Td=ee.divisor|0);Ud=aa.location;$d=v[Ud];if(1===bf){$d.buffer||I.enableVertexAttribArray(Ud);We=hf||1;if($d.type!==Pe||$d.size!==We||$d.buffer!==Jd||$d.normalized!==De||$d.offset!==Ne||$d.stride!==Te)I.bindBuffer(34962,Jd.buffer),I.vertexAttribPointer(Ud,We,Pe,De,Te,Ne),
$d.type=Pe,$d.size=We,$d.buffer=Jd,$d.normalized=De,$d.offset=Ne,$d.stride=Te;$d.divisor!==Td&&(h.vertexAttribDivisorANGLE(Ud,Td),$d.divisor=Td)}else if($d.buffer&&(I.disableVertexAttribArray(Ud),$d.buffer=null),$d.x!==Xe||$d.y!==Ue||$d.z!==Ve||$d.w!==af)I.vertexAttrib4f(Ud,Xe,Ue,Ve,af),$d.x=Xe,$d.y=Ue,$d.z=Ve,$d.w=af;jf=U.pixelRatio;d&&nf===jf||(nf=jf,I.uniform1f(xa.location,jf));ef=k.scale;kf=ef[0];mf=ef[1];d&&lf===kf&&rf===mf||(lf=kf,rf=mf,I.uniform2f(fa.location,kf,mf));of=k.scaleFract;sf=of[0];
Cf=of[1];d&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,I.uniform2f(Ea.location,sf,Cf));Ee=k.translate;pf=Ee[0];Df=Ee[1];d&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,I.uniform2f(pa.location,pf,Df));Af=k.translateFract;Ef=Af[0];wf=Af[1];d&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,I.uniform2f(Aa.location,Ef,wf));vf=K.call(this,U,k,d);yf=vf[0];If=vf[1];d&&zf===yf&&Jf===If||(zf=yf,Jf=If,I.uniform2f(oa.location,yf,If));Kf=k.opacity;d&&Lf===Kf||(Lf=Kf,I.uniform1f(ma.location,Kf));(tf=k.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Qf=tf._texture;I.uniform1i(M.location,Qf.bind());Hf=k.elements;uf=null;(uf=(cg=ra(Hf))?W.createStream(Hf):W.getElements(Hf))&&I.bindBuffer(34963,uf.buffer.buffer);Rf=k.offset;if(Sf=k.count)0<ob?uf?h.drawElementsInstancedANGLE(0,Sf,uf.type,Rf<<(uf.type-5121>>1),ob):h.drawArraysInstancedANGLE(0,Rf,Sf,ob):0>ob&&(uf?I.drawElements(0,Sf,uf.type,Rf<<(uf.type-5121>>1)):I.drawArrays(0,Rf,Sf)),U.viewportWidth=Ob,U.viewportHeight=jb,qb&&m.destroyStream(Ra),Oa&&m.destroyStream(Cc),nb&&m.destroyStream(ic),
Qd&&m.destroyStream(Fc),cd&&m.destroyStream(Qc),ye&&m.destroyStream(jd),xe&&m.destroyStream(ke),oe&&m.destroyStream(Ge),Me&&m.destroyStream(Jd),Qf.unbind(),cg&&W.destroyStream(uf)}L.unbind();va.dirty=!0;Ga.setVAO(null);c&&(ba.cpuTime+=performance.now()-f)},draw:function(a){var b,e,c,h,d,p,r,w,A,O,u,C,z,qa,Q,E,y,la,K,L,l,ya,S,P,R,N,Z,ga,X,ea,ca,V,sa,ta,db,Da,cc,yb,bb,Nb,$a,ob,Ua,qd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,
Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,me,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve;b=ha.next;b!==ha.cur&&(b?I.bindFramebuffer(36160,b.framebuffer):I.bindFramebuffer(36160,null),ha.cur=b);if(va.dirty){var He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,hf,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,
kf,lf,mf,rf,of,sf;He=Fa.dither;He!==va.dither&&(He?I.enable(3024):I.disable(3024),va.dither=He);Je=ua[0];Ke=ua[1];if(Je!==Ja[0]||Ke!==Ja[1])I.blendEquationSeparate(Je,Ke),Ja[0]=Je,Ja[1]=Ke;Le=Fa.depth_func;Le!==va.depth_func&&(I.depthFunc(Le),va.depth_func=Le);Ie=ac[0];Md=ac[1];if(Ie!==Ha[0]||Md!==Ha[1])I.depthRange(Ie,Md),Ha[0]=Ie,Ha[1]=Md;Xd=Fa.depth_mask;Xd!==va.depth_mask&&(I.depthMask(Xd),va.depth_mask=Xd);be=da[0];ee=da[1];Me=da[2];Jd=da[3];if(be!==ia[0]||ee!==ia[1]||Me!==ia[2]||Jd!==ia[3])I.colorMask(be,
ee,Me,Jd),ia[0]=be,ia[1]=ee,ia[2]=Me,ia[3]=Jd;Td=Fa.cull_enable;Td!==va.cull_enable&&(Td?I.enable(2884):I.disable(2884),va.cull_enable=Td);De=Fa.cull_face;De!==va.cull_face&&(I.cullFace(De),va.cull_face=De);Ne=Fa.frontFace;Ne!==va.frontFace&&(I.frontFace(Ne),va.frontFace=Ne);hf=Fa.lineWidth;hf!==va.lineWidth&&(I.lineWidth(hf),va.lineWidth=hf);bf=Fa.polygonOffset_enable;bf!==va.polygonOffset_enable&&(bf?I.enable(32823):I.disable(32823),va.polygonOffset_enable=bf);Te=bc[0];Pe=bc[1];if(Te!==Sb[0]||Pe!==
Sb[1])I.polygonOffset(Te,Pe),Sb[0]=Te,Sb[1]=Pe;af=Fa.sample_alpha;af!==va.sample_alpha&&(af?I.enable(32926):I.disable(32926),va.sample_alpha=af);Xe=Fa.sample_enable;Xe!==va.sample_enable&&(Xe?I.enable(32928):I.disable(32928),va.sample_enable=Xe);Ue=fb[0];Ve=fb[1];if(Ue!==Gd[0]||Ve!==Gd[1])I.sampleCoverage(Ue,Ve),Gd[0]=Ue,Gd[1]=Ve;Ud=Fa.stencil_mask;Ud!==va.stencil_mask&&(I.stencilMask(Ud),va.stencil_mask=Ud);$d=ze[0];We=ze[1];jf=ze[2];if($d!==zd[0]||We!==zd[1]||jf!==zd[2])I.stencilFunc($d,We,jf),
zd[0]=$d,zd[1]=We,zd[2]=jf;nf=fe[0];ef=fe[1];kf=fe[2];lf=fe[3];if(nf!==Dd[0]||ef!==Dd[1]||kf!==Dd[2]||lf!==Dd[3])I.stencilOpSeparate(nf,ef,kf,lf),Dd[0]=nf,Dd[1]=ef,Dd[2]=kf,Dd[3]=lf;mf=Vd[0];rf=Vd[1];of=Vd[2];sf=Vd[3];if(mf!==pe[0]||rf!==pe[1]||of!==pe[2]||sf!==pe[3])I.stencilOpSeparate(mf,rf,of,sf),pe[0]=mf,pe[1]=rf,pe[2]=of,pe[3]=sf}e=a.viewport;c=e.x|0;h=e.y|0;d="width"in e?e.width|0:U.framebufferWidth-c;p="height"in e?e.height|0:U.framebufferHeight-h;r=U.viewportWidth;U.viewportWidth=d;w=U.viewportHeight;
U.viewportHeight=p;I.viewport(c,h,d,p);ge[0]=c;ge[1]=h;ge[2]=d;ge[3]=p;I.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;A=a.viewport;O=A.x|0;u=A.y|0;C="width"in A?A.width|0:U.framebufferWidth-O;z="height"in A?A.height|0:U.framebufferHeight-u;I.scissor(O,u,C,z);Wd[0]=O;Wd[1]=u;Wd[2]=C;Wd[3]=z;I.enable(3089);va.scissor_enable=!0;I.disable(2960);va.stencil_enable=
!1;if(qa=va.profile)Q=performance.now(),ba.count++;I.useProgram(H.program);E=Hb.angle_instanced_arrays;Ga.setVAO(null);y=J.call(this,U,a,0);la=!1;K=null;L=0;l=!1;S=ya=0;P=1;R=0;N=5126;ea=X=ga=Z=0;ra(y)?(la=!0,K=m.createStream(34962,y),N=K.dtype):(K=m.getBuffer(y))?N=K.dtype:"constant"in y?(P=2,"number"===typeof y.constant?(ga=y.constant,X=ea=Z=0):(ga=0<y.constant.length?y.constant[0]:0,X=1<y.constant.length?y.constant[1]:0,ea=2<y.constant.length?y.constant[2]:0,Z=3<y.constant.length?y.constant[3]:
0)):(K=ra(y.buffer)?m.createStream(34962,y.buffer):m.getBuffer(y.buffer),N="type"in y?ae[y.type]:K.dtype,l=!!y.normalized,S=y.size|0,ya=y.offset|0,R=y.stride|0,L=y.divisor|0);ca=Ba.location;V=v[ca];if(1===P){V.buffer||I.enableVertexAttribArray(ca);sa=S||1;if(V.type!==N||V.size!==sa||V.buffer!==K||V.normalized!==l||V.offset!==ya||V.stride!==R)I.bindBuffer(34962,K.buffer),I.vertexAttribPointer(ca,sa,N,l,R,ya),V.type=N,V.size=sa,V.buffer=K,V.normalized=l,V.offset=ya,V.stride=R;V.divisor!==L&&(E.vertexAttribDivisorANGLE(ca,
L),V.divisor=L)}else if(V.buffer&&(I.disableVertexAttribArray(ca),V.buffer=null),V.x!==ga||V.y!==X||V.z!==ea||V.w!==Z)I.vertexAttrib4f(ca,ga,X,ea,Z),V.x=ga,V.y=X,V.z=ea,V.w=Z;ta=g.call(this,U,a,0);db=!1;Da=null;cc=0;yb=!1;Nb=bb=0;$a=1;ob=0;Ua=5126;sc=Jb=Ib=qd=0;ra(ta)?(db=!0,Da=m.createStream(34962,ta),Ua=Da.dtype):(Da=m.getBuffer(ta))?Ua=Da.dtype:"constant"in ta?($a=2,"number"===typeof ta.constant?(Ib=ta.constant,Jb=sc=qd=0):(Ib=0<ta.constant.length?ta.constant[0]:0,Jb=1<ta.constant.length?ta.constant[1]:
0,sc=2<ta.constant.length?ta.constant[2]:0,qd=3<ta.constant.length?ta.constant[3]:0)):(Da=ra(ta.buffer)?m.createStream(34962,ta.buffer):m.getBuffer(ta.buffer),Ua="type"in ta?ae[ta.type]:Da.dtype,yb=!!ta.normalized,Nb=ta.size|0,bb=ta.offset|0,ob=ta.stride|0,cc=ta.divisor|0);Ob=Yb.location;jb=v[Ob];if(1===$a){jb.buffer||I.enableVertexAttribArray(Ob);Gb=Nb||1;if(jb.type!==Ua||jb.size!==Gb||jb.buffer!==Da||jb.normalized!==yb||jb.offset!==bb||jb.stride!==ob)I.bindBuffer(34962,Da.buffer),I.vertexAttribPointer(Ob,
Gb,Ua,yb,ob,bb),jb.type=Ua,jb.size=Gb,jb.buffer=Da,jb.normalized=yb,jb.offset=bb,jb.stride=ob;jb.divisor!==cc&&(E.vertexAttribDivisorANGLE(Ob,cc),jb.divisor=cc)}else if(jb.buffer&&(I.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==sc||jb.w!==qd)I.vertexAttrib4f(Ob,Ib,Jb,sc,qd),jb.x=Ib,jb.y=Jb,jb.z=sc,jb.w=qd;Db=k.call(this,U,a,0);wb=!1;hb=null;Zb=0;Pb=!1;Ra=qb=0;Ub=1;zb=0;dc=5126;rb=Ia=pb=ib=0;ra(Db)?(wb=!0,hb=m.createStream(34962,Db),dc=hb.dtype):(hb=m.getBuffer(Db))?dc=
hb.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(pb=Db.constant,Ia=rb=ib=0):(pb=0<Db.constant.length?Db.constant[0]:0,Ia=1<Db.constant.length?Db.constant[1]:0,rb=2<Db.constant.length?Db.constant[2]:0,ib=3<Db.constant.length?Db.constant[3]:0)):(hb=ra(Db.buffer)?m.createStream(34962,Db.buffer):m.getBuffer(Db.buffer),dc="type"in Db?ae[Db.type]:hb.dtype,Pb=!!Db.normalized,Ra=Db.size|0,qb=Db.offset|0,zb=Db.stride|0,Zb=Db.divisor|0);Ka=ja.location;eb=v[Ka];if(1===Ub){eb.buffer||I.enableVertexAttribArray(Ka);
gb=Ra||1;if(eb.type!==dc||eb.size!==gb||eb.buffer!==hb||eb.normalized!==Pb||eb.offset!==qb||eb.stride!==zb)I.bindBuffer(34962,hb.buffer),I.vertexAttribPointer(Ka,gb,dc,Pb,zb,qb),eb.type=dc,eb.size=gb,eb.buffer=hb,eb.normalized=Pb,eb.offset=qb,eb.stride=zb;eb.divisor!==Zb&&(E.vertexAttribDivisorANGLE(Ka,Zb),eb.divisor=Zb)}else if(eb.buffer&&(I.disableVertexAttribArray(Ka),eb.buffer=null),eb.x!==pb||eb.y!==Ia||eb.z!==rb||eb.w!==ib)I.vertexAttrib4f(Ka,pb,Ia,rb,ib),eb.x=pb,eb.y=Ia,eb.z=rb,eb.w=ib;La=
q.call(this,U,a,0);kb=!1;Va=null;tb=0;sb=!1;Cc=Oa=0;Qa=1;Kb=0;Eb=5126;Lb=Xa=wd=Ma=0;ra(La)?(kb=!0,Va=m.createStream(34962,La),Eb=Va.dtype):(Va=m.getBuffer(La))?Eb=Va.dtype:"constant"in La?(Qa=2,"number"===typeof La.constant?(wd=La.constant,Xa=Lb=Ma=0):(wd=0<La.constant.length?La.constant[0]:0,Xa=1<La.constant.length?La.constant[1]:0,Lb=2<La.constant.length?La.constant[2]:0,Ma=3<La.constant.length?La.constant[3]:0)):(Va=ra(La.buffer)?m.createStream(34962,La.buffer):m.getBuffer(La.buffer),Eb="type"in
La?ae[La.type]:Va.dtype,sb=!!La.normalized,Cc=La.size|0,Oa=La.offset|0,Kb=La.stride|0,tb=La.divisor|0);Mb=Ta.location;lb=v[Mb];if(1===Qa){lb.buffer||I.enableVertexAttribArray(Mb);Na=Cc||1;if(lb.type!==Eb||lb.size!==Na||lb.buffer!==Va||lb.normalized!==sb||lb.offset!==Oa||lb.stride!==Kb)I.bindBuffer(34962,Va.buffer),I.vertexAttribPointer(Mb,Na,Eb,sb,Kb,Oa),lb.type=Eb,lb.size=Na,lb.buffer=Va,lb.normalized=sb,lb.offset=Oa,lb.stride=Kb;lb.divisor!==tb&&(E.vertexAttribDivisorANGLE(Mb,tb),lb.divisor=tb)}else if(lb.buffer&&
(I.disableVertexAttribArray(Mb),lb.buffer=null),lb.x!==wd||lb.y!==Xa||lb.z!==Lb||lb.w!==Ma)I.vertexAttrib4f(Mb,wd,Xa,Lb,Ma),lb.x=wd,lb.y=Xa,lb.z=Lb,lb.w=Ma;$b=f.call(this,U,a,0);Pa=!1;ub=null;vb=0;Sa=!1;ic=nb=0;Ac=1;vc=0;ab=5126;Mc=Wa=hd=lc=0;ra($b)?(Pa=!0,ub=m.createStream(34962,$b),ab=ub.dtype):(ub=m.getBuffer($b))?ab=ub.dtype:"constant"in $b?(Ac=2,"number"===typeof $b.constant?(hd=$b.constant,Wa=Mc=lc=0):(hd=0<$b.constant.length?$b.constant[0]:0,Wa=1<$b.constant.length?$b.constant[1]:0,Mc=2<$b.constant.length?
$b.constant[2]:0,lc=3<$b.constant.length?$b.constant[3]:0)):(ub=ra($b.buffer)?m.createStream(34962,$b.buffer):m.getBuffer($b.buffer),ab="type"in $b?ae[$b.type]:ub.dtype,Sa=!!$b.normalized,ic=$b.size|0,nb=$b.offset|0,vc=$b.stride|0,vb=$b.divisor|0);Ab=ka.location;Ya=v[Ab];if(1===Ac){Ya.buffer||I.enableVertexAttribArray(Ab);Vb=ic||1;if(Ya.type!==ab||Ya.size!==Vb||Ya.buffer!==ub||Ya.normalized!==Sa||Ya.offset!==nb||Ya.stride!==vc)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(Ab,Vb,ab,Sa,vc,nb),
Ya.type=ab,Ya.size=Vb,Ya.buffer=ub,Ya.normalized=Sa,Ya.offset=nb,Ya.stride=vc;Ya.divisor!==vb&&(E.vertexAttribDivisorANGLE(Ab,vb),Ya.divisor=vb)}else if(Ya.buffer&&(I.disableVertexAttribArray(Ab),Ya.buffer=null),Ya.x!==hd||Ya.y!==Wa||Ya.z!==Mc||Ya.w!==lc)I.vertexAttrib4f(Ab,hd,Wa,Mc,lc),Ya.x=hd,Ya.y=Wa,Ya.z=Mc,Ya.w=lc;uc=B.call(this,U,a,0);Wb=!1;Qb=null;Kc=0;Rb=!1;Fc=me=0;Ed=1;Nc=0;Yc=5126;jc=wc=pc=td=0;ra(uc)?(Wb=!0,Qb=m.createStream(34962,uc),Yc=Qb.dtype):(Qb=m.getBuffer(uc))?Yc=Qb.dtype:"constant"in
uc?(Ed=2,"number"===typeof uc.constant?(pc=uc.constant,wc=jc=td=0):(pc=0<uc.constant.length?uc.constant[0]:0,wc=1<uc.constant.length?uc.constant[1]:0,jc=2<uc.constant.length?uc.constant[2]:0,td=3<uc.constant.length?uc.constant[3]:0)):(Qb=ra(uc.buffer)?m.createStream(34962,uc.buffer):m.getBuffer(uc.buffer),Yc="type"in uc?ae[uc.type]:Qb.dtype,Rb=!!uc.normalized,Fc=uc.size|0,me=uc.offset|0,Nc=uc.stride|0,Kc=uc.divisor|0);cb=na.location;tc=v[cb];if(1===Ed){tc.buffer||I.enableVertexAttribArray(cb);Tb=
Fc||1;if(tc.type!==Yc||tc.size!==Tb||tc.buffer!==Qb||tc.normalized!==Rb||tc.offset!==me||tc.stride!==Nc)I.bindBuffer(34962,Qb.buffer),I.vertexAttribPointer(cb,Tb,Yc,Rb,Nc,me),tc.type=Yc,tc.size=Tb,tc.buffer=Qb,tc.normalized=Rb,tc.offset=me,tc.stride=Nc;tc.divisor!==Kc&&(E.vertexAttribDivisorANGLE(cb,Kc),tc.divisor=Kc)}else if(tc.buffer&&(I.disableVertexAttribArray(cb),tc.buffer=null),tc.x!==pc||tc.y!==wc||tc.z!==jc||tc.w!==td)I.vertexAttrib4f(cb,pc,wc,jc,td),tc.x=pc,tc.y=wc,tc.z=jc,tc.w=td;Xb=D.call(this,
U,a,0);fc=!1;kc=null;yc=0;Bc=!1;Qc=cd=0;Rc=1;Sc=0;Zc=5126;mc=$c=dd=ld=0;ra(Xb)?(fc=!0,kc=m.createStream(34962,Xb),Zc=kc.dtype):(kc=m.getBuffer(Xb))?Zc=kc.dtype:"constant"in Xb?(Rc=2,"number"===typeof Xb.constant?(dd=Xb.constant,$c=mc=ld=0):(dd=0<Xb.constant.length?Xb.constant[0]:0,$c=1<Xb.constant.length?Xb.constant[1]:0,mc=2<Xb.constant.length?Xb.constant[2]:0,ld=3<Xb.constant.length?Xb.constant[3]:0)):(kc=ra(Xb.buffer)?m.createStream(34962,Xb.buffer):m.getBuffer(Xb.buffer),Zc="type"in Xb?ae[Xb.type]:
kc.dtype,Bc=!!Xb.normalized,Qc=Xb.size|0,cd=Xb.offset|0,Sc=Xb.stride|0,yc=Xb.divisor|0);ec=n.location;ad=v[ec];if(1===Rc){ad.buffer||I.enableVertexAttribArray(ec);Uc=Qc||4;if(ad.type!==Zc||ad.size!==Uc||ad.buffer!==kc||ad.normalized!==Bc||ad.offset!==cd||ad.stride!==Sc)I.bindBuffer(34962,kc.buffer),I.vertexAttribPointer(ec,Uc,Zc,Bc,Sc,cd),ad.type=Zc,ad.size=Uc,ad.buffer=kc,ad.normalized=Bc,ad.offset=cd,ad.stride=Sc;ad.divisor!==yc&&(E.vertexAttribDivisorANGLE(ec,yc),ad.divisor=yc)}else if(ad.buffer&&
(I.disableVertexAttribArray(ec),ad.buffer=null),ad.x!==dd||ad.y!==$c||ad.z!==mc||ad.w!==ld)I.vertexAttrib4f(ec,dd,$c,mc,ld),ad.x=dd,ad.y=$c,ad.z=mc,ad.w=ld;ed=G.call(this,U,a,0);zc=!1;id=null;pd=0;we=!1;jd=ye=0;$e=1;Nd=0;he=5126;Id=Kd=Od=ce=0;ra(ed)?(zc=!0,id=m.createStream(34962,ed),he=id.dtype):(id=m.getBuffer(ed))?he=id.dtype:"constant"in ed?($e=2,"number"===typeof ed.constant?(Od=ed.constant,Kd=Id=ce=0):(Od=0<ed.constant.length?ed.constant[0]:0,Kd=1<ed.constant.length?ed.constant[1]:0,Id=2<ed.constant.length?
ed.constant[2]:0,ce=3<ed.constant.length?ed.constant[3]:0)):(id=ra(ed.buffer)?m.createStream(34962,ed.buffer):m.getBuffer(ed.buffer),he="type"in ed?ae[ed.type]:id.dtype,we=!!ed.normalized,jd=ed.size|0,ye=ed.offset|0,Nd=ed.stride|0,pd=ed.divisor|0);nd=za.location;Tc=v[nd];if(1===$e){Tc.buffer||I.enableVertexAttribArray(nd);ud=jd||4;if(Tc.type!==he||Tc.size!==ud||Tc.buffer!==id||Tc.normalized!==we||Tc.offset!==ye||Tc.stride!==Nd)I.bindBuffer(34962,id.buffer),I.vertexAttribPointer(nd,ud,he,we,Nd,ye),
Tc.type=he,Tc.size=ud,Tc.buffer=id,Tc.normalized=we,Tc.offset=ye,Tc.stride=Nd;Tc.divisor!==pd&&(E.vertexAttribDivisorANGLE(nd,pd),Tc.divisor=pd)}else if(Tc.buffer&&(I.disableVertexAttribArray(nd),Tc.buffer=null),Tc.x!==Od||Tc.y!==Kd||Tc.z!==Id||Tc.w!==ce)I.vertexAttrib4f(nd,Od,Kd,Id,ce),Tc.x=Od,Tc.y=Kd,Tc.z=Id,Tc.w=ce;sd=T.call(this,U,a,0);kd=!1;vd=null;Cd=0;Fd=!1;ke=xe=0;Fe=1;le=0;je=5126;ne=de=te=ie=0;ra(sd)?(kd=!0,vd=m.createStream(34962,sd),je=vd.dtype):(vd=m.getBuffer(sd))?je=vd.dtype:"constant"in
sd?(Fe=2,"number"===typeof sd.constant?(te=sd.constant,de=ne=ie=0):(te=0<sd.constant.length?sd.constant[0]:0,de=1<sd.constant.length?sd.constant[1]:0,ne=2<sd.constant.length?sd.constant[2]:0,ie=3<sd.constant.length?sd.constant[3]:0)):(vd=ra(sd.buffer)?m.createStream(34962,sd.buffer):m.getBuffer(sd.buffer),je="type"in sd?ae[sd.type]:vd.dtype,Fd=!!sd.normalized,ke=sd.size|0,xe=sd.offset|0,le=sd.stride|0,Cd=sd.divisor|0);Oc=aa.location;gd=v[Oc];if(1===Fe){gd.buffer||I.enableVertexAttribArray(Oc);ue=
ke||1;if(gd.type!==je||gd.size!==ue||gd.buffer!==vd||gd.normalized!==Fd||gd.offset!==xe||gd.stride!==le)I.bindBuffer(34962,vd.buffer),I.vertexAttribPointer(Oc,ue,je,Fd,le,xe),gd.type=je,gd.size=ue,gd.buffer=vd,gd.normalized=Fd,gd.offset=xe,gd.stride=le;gd.divisor!==Cd&&(E.vertexAttribDivisorANGLE(Oc,Cd),gd.divisor=Cd)}else if(gd.buffer&&(I.disableVertexAttribArray(Oc),gd.buffer=null),gd.x!==te||gd.y!==de||gd.z!==ne||gd.w!==ie)I.vertexAttrib4f(Oc,te,de,ne,ie),gd.x=te,gd.y=de,gd.z=ne,gd.w=ie;I.uniform1i(F.location,
!1);I.uniform1f(xa.location,U.pixelRatio);qe=a.scale;I.uniform2f(fa.location,qe[0],qe[1]);Ld=a.scaleFract;I.uniform2f(Ea.location,Ld[0],Ld[1]);Pd=a.translate;I.uniform2f(pa.location,Pd[0],Pd[1]);Rd=a.translateFract;I.uniform2f(Aa.location,Rd[0],Rd[1]);Sd=x.call(this,U,a,0);I.uniform2f(oa.location,Sd[0],Sd[1]);I.uniform1f(ma.location,a.opacity);I.uniform1i(Ca.location,t.bind());(oe=a.markerTexture)&&"framebuffer"===oe._reglType&&(oe=oe.color[0]);Ge=oe._texture;I.uniform1i(M.location,Ge.bind());Be=
a.elements;re=null;(re=(Re=ra(Be))?W.createStream(Be):W.getElements(Be))&&I.bindBuffer(34963,re.buffer.buffer);Se=a.offset;if(Oe=a.count)ve=wa.instances,0<ve?re?E.drawElementsInstancedANGLE(0,Oe,re.type,Se<<(re.type-5121>>1),ve):E.drawArraysInstancedANGLE(0,Se,Oe,ve):0>ve&&(re?I.drawElements(0,Oe,re.type,Se<<(re.type-5121>>1)):I.drawArrays(0,Se,Oe)),va.dirty=!0,Ga.setVAO(null),U.viewportWidth=r,U.viewportHeight=w,qa&&(ba.cpuTime+=performance.now()-Q),la&&m.destroyStream(K),db&&m.destroyStream(Da),
wb&&m.destroyStream(hb),kb&&m.destroyStream(Va),Pa&&m.destroyStream(ub),Wb&&m.destroyStream(Qb),fc&&m.destroyStream(kc),zc&&m.destroyStream(id),kd&&m.destroyStream(vd),t.unbind(),Ge.unbind(),Re&&W.destroyStream(re)},scope:function(f,d,n){var k,p,v,q,I,ja,g,A,F,O,M,z,fa,Q,ha,J,Yb,K,t,Ba,x,L,Y,D,aa,H,xa,oa,B,za,G,Ga,T,da,ka,X,ea,Ta,pa,Ea,Aa,na,ma,ta,sa,ua,Ca,Hb,Ha,db,mb,Ja,Sb,ia,Ra,ac,bc,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Wd,Qa,Kb,Eb,Ma,xd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,Gd,Wa,
Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Vd,Fc,ge,Nc,Yc,ze,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,Dd,pe,jd,zd,fb,fe,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,pg,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,hf,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;k=f.viewport;p=k.x|0;v=k.y|0;q="width"in k?k.width|0:U.framebufferWidth-p;I="height"in k?k.height|0:U.framebufferHeight-v;ja=U.viewportWidth;U.viewportWidth=q;g=U.viewportHeight;U.viewportHeight=I;A=qd[0];qd[0]=p;F=qd[1];qd[1]=v;O=qd[2];qd[2]=q;M=qd[3];qd[3]=I;z=la[0];la[0]=0;fa=la[1];la[1]=0;Q=la[2];la[2]=0;ha=la[3];la[3]=1;J=Fa.blend_enable;Fa.blend_enable=!0;Yb=Da[0];Da[0]=770;K=Da[1];Da[1]=
771;t=Da[2];Da[2]=773;Ba=Da[3];Da[3]=1;x=Fa.depth_enable;Fa.depth_enable=!1;L=f.viewport;Y=L.x|0;D=L.y|0;aa="width"in L?L.width|0:U.framebufferWidth-Y;H="height"in L?L.height|0:U.framebufferHeight-D;xa=me[0];me[0]=Y;oa=me[1];me[1]=D;B=me[2];me[2]=aa;za=me[3];me[3]=H;G=Fa.scissor_enable;Fa.scissor_enable=!0;Ga=Fa.stencil_enable;Fa.stencil_enable=!1;if(T=va.profile)da=performance.now(),ba.count++;ka=f.elements;X=null;X=(ea=ra(ka))?W.createStream(ka):W.getElements(ka);Ta=wa.elements;wa.elements=X;pa=
f.offset;Ea=wa.offset;wa.offset=pa;Aa=f.count;na=wa.count;wa.count=Aa;ma=wa.primitive;wa.primitive=0;ta=ya[45];ya[45]=!1;sa=f.markerTexture;ua=ya[48];ya[48]=sa;Ca=f.opacity;Hb=ya[10];ya[10]=Ca;Ha=l.call(this,U,f,n);db=ya[46];ya[46]=Ha;mb=ya[47];ya[47]=ca;Ja=U.pixelRatio;Sb=ya[34];ya[34]=Ja;ia=f.scale;Ra=ya[6];ya[6]=ia;ac=f.scaleFract;bc=ya[7];ya[7]=ac;dc=f.translate;ib=ya[8];ya[8]=dc;pb=f.translateFract;Ia=ya[9];ya[9]=pb;rb=u.call(this,U,f,n);Ka=!1;eb=null;gb=0;La=!1;Va=kb=0;tb=1;sb=0;Oa=5126;Eb=
Kb=Qa=Wd=0;ra(rb)?(Ka=!0,eb=m.createStream(34962,rb),Oa=eb.dtype):(eb=m.getBuffer(rb))?Oa=eb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Qa=rb.constant,Kb=Eb=Wd=0):(Qa=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Eb=2<rb.constant.length?rb.constant[2]:0,Wd=3<rb.constant.length?rb.constant[3]:0)):(eb=ra(rb.buffer)?m.createStream(34962,rb.buffer):m.getBuffer(rb.buffer),Oa="type"in rb?ae[rb.type]:eb.dtype,La=!!rb.normalized,Va=rb.size|0,kb=rb.offset|0,
sb=rb.stride|0,gb=rb.divisor|0);Ma=N.buffer;N.buffer=eb;xd=N.divisor;N.divisor=gb;Xa=N.normalized;N.normalized=La;Lb=N.offset;N.offset=kb;Mb=N.size;N.size=Va;lb=N.state;N.state=tb;Na=N.stride;N.stride=sb;$b=N.type;N.type=Oa;Pa=N.w;N.w=Wd;ub=N.x;N.x=Qa;vb=N.y;N.y=Kb;Sa=N.z;N.z=Eb;nb=y.call(this,U,f,n);ic=!1;Ac=null;vc=0;ab=!1;Gd=lc=0;Wa=1;Mc=0;Ab=5126;Wb=uc=Vb=Ya=0;ra(nb)?(ic=!0,Ac=m.createStream(34962,nb),Ab=Ac.dtype):(Ac=m.getBuffer(nb))?Ab=Ac.dtype:"constant"in nb?(Wa=2,"number"===typeof nb.constant?
(Vb=nb.constant,uc=Wb=Ya=0):(Vb=0<nb.constant.length?nb.constant[0]:0,uc=1<nb.constant.length?nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,Ya=3<nb.constant.length?nb.constant[3]:0)):(Ac=ra(nb.buffer)?m.createStream(34962,nb.buffer):m.getBuffer(nb.buffer),Ab="type"in nb?ae[nb.type]:Ac.dtype,ab=!!nb.normalized,Gd=nb.size|0,lc=nb.offset|0,Mc=nb.stride|0,vc=nb.divisor|0);Qb=P.buffer;P.buffer=Ac;Kc=P.divisor;P.divisor=vc;Rb=P.normalized;P.normalized=ab;Vd=P.offset;P.offset=lc;Fc=P.size;P.size=
Gd;ge=P.state;P.state=Wa;Nc=P.stride;P.stride=Mc;Yc=P.type;P.type=Ab;ze=P.w;P.w=Ya;pc=P.x;P.x=Vb;wc=P.y;P.y=uc;jc=P.z;P.z=Wb;cb=ga.call(this,U,f,n);tc=!1;Tb=null;Xb=0;fc=!1;yc=kc=0;Bc=1;cd=0;Qc=5126;ld=Zc=Sc=Rc=0;ra(cb)?(tc=!0,Tb=m.createStream(34962,cb),Qc=Tb.dtype):(Tb=m.getBuffer(cb))?Qc=Tb.dtype:"constant"in cb?(Bc=2,"number"===typeof cb.constant?(Sc=cb.constant,Zc=ld=Rc=0):(Sc=0<cb.constant.length?cb.constant[0]:0,Zc=1<cb.constant.length?cb.constant[1]:0,ld=2<cb.constant.length?cb.constant[2]:
0,Rc=3<cb.constant.length?cb.constant[3]:0)):(Tb=ra(cb.buffer)?m.createStream(34962,cb.buffer):m.getBuffer(cb.buffer),Qc="type"in cb?ae[cb.type]:Tb.dtype,fc=!!cb.normalized,yc=cb.size|0,kc=cb.offset|0,cd=cb.stride|0,Xb=cb.divisor|0);dd=c.buffer;c.buffer=Tb;$c=c.divisor;c.divisor=Xb;mc=c.normalized;c.normalized=fc;ec=c.offset;c.offset=kc;ad=c.size;c.size=yc;Uc=c.state;c.state=Bc;ed=c.stride;c.stride=cd;zc=c.type;c.type=Qc;id=c.w;c.w=Rc;pd=c.x;c.x=Sc;Dd=c.y;c.y=Zc;pe=c.z;c.z=ld;jd=b.call(this,U,f,n);
zd=!1;fb=null;fe=0;ce=!1;Kd=Od=0;Id=1;nd=0;Tc=5126;vd=kd=sd=ud=0;ra(jd)?(zd=!0,fb=m.createStream(34962,jd),Tc=fb.dtype):(fb=m.getBuffer(jd))?Tc=fb.dtype:"constant"in jd?(Id=2,"number"===typeof jd.constant?(sd=jd.constant,kd=vd=ud=0):(sd=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,vd=2<jd.constant.length?jd.constant[2]:0,ud=3<jd.constant.length?jd.constant[3]:0)):(fb=ra(jd.buffer)?m.createStream(34962,jd.buffer):m.getBuffer(jd.buffer),Tc="type"in jd?ae[jd.type]:fb.dtype,
ce=!!jd.normalized,Kd=jd.size|0,Od=jd.offset|0,nd=jd.stride|0,fe=jd.divisor|0);Cd=S.buffer;S.buffer=fb;Fd=S.divisor;S.divisor=fe;xe=S.normalized;S.normalized=ce;ke=S.offset;S.offset=Od;pg=S.size;S.size=Kd;le=S.state;S.state=Id;je=S.stride;S.stride=nd;ie=S.type;S.type=Tc;te=S.w;S.w=ud;de=S.x;S.x=sd;ne=S.y;S.y=kd;Oc=S.z;S.z=vd;gd=r.call(this,U,f,n);ue=!1;qe=null;Ld=0;Pd=!1;Sd=Rd=0;oe=1;Ge=0;Be=5126;Oe=Se=Re=re=0;ra(gd)?(ue=!0,qe=m.createStream(34962,gd),Be=qe.dtype):(qe=m.getBuffer(gd))?Be=qe.dtype:
"constant"in gd?(oe=2,"number"===typeof gd.constant?(Re=gd.constant,Se=Oe=re=0):(Re=0<gd.constant.length?gd.constant[0]:0,Se=1<gd.constant.length?gd.constant[1]:0,Oe=2<gd.constant.length?gd.constant[2]:0,re=3<gd.constant.length?gd.constant[3]:0)):(qe=ra(gd.buffer)?m.createStream(34962,gd.buffer):m.getBuffer(gd.buffer),Be="type"in gd?ae[gd.type]:qe.dtype,Pd=!!gd.normalized,Sd=gd.size|0,Rd=gd.offset|0,Ge=gd.stride|0,Ld=gd.divisor|0);ve=Z.buffer;Z.buffer=qe;He=Z.divisor;Z.divisor=Ld;Je=Z.normalized;
Z.normalized=Pd;Ke=Z.offset;Z.offset=Rd;Le=Z.size;Z.size=Sd;Ie=Z.state;Z.state=oe;Md=Z.stride;Z.stride=Ge;Xd=Z.type;Z.type=Be;be=Z.w;Z.w=re;ee=Z.x;Z.x=Re;Me=Z.y;Z.y=Se;Jd=Z.z;Z.z=Oe;Td=h.call(this,U,f,n);De=!1;Ne=null;hf=0;bf=!1;Pe=Te=0;af=1;Xe=0;Ue=5126;We=$d=Ud=Ve=0;ra(Td)?(De=!0,Ne=m.createStream(34962,Td),Ue=Ne.dtype):(Ne=m.getBuffer(Td))?Ue=Ne.dtype:"constant"in Td?(af=2,"number"===typeof Td.constant?(Ud=Td.constant,$d=We=Ve=0):(Ud=0<Td.constant.length?Td.constant[0]:0,$d=1<Td.constant.length?
Td.constant[1]:0,We=2<Td.constant.length?Td.constant[2]:0,Ve=3<Td.constant.length?Td.constant[3]:0)):(Ne=ra(Td.buffer)?m.createStream(34962,Td.buffer):m.getBuffer(Td.buffer),Ue="type"in Td?ae[Td.type]:Ne.dtype,bf=!!Td.normalized,Pe=Td.size|0,Te=Td.offset|0,Xe=Td.stride|0,hf=Td.divisor|0);jf=w.buffer;w.buffer=Ne;nf=w.divisor;w.divisor=hf;ef=w.normalized;w.normalized=bf;kf=w.offset;w.offset=Te;lf=w.size;w.size=Pe;mf=w.state;w.state=af;rf=w.stride;w.stride=Xe;of=w.type;w.type=Ue;sf=w.w;w.w=Ve;Bf=w.x;
w.x=Ud;Cf=w.y;w.y=$d;Qe=w.z;w.z=We;Ee=V.call(this,U,f,n);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;ra(Ee)?(pf=!0,qf=m.createStream(34962,Ee),xf=qf.dtype):(qf=m.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=ra(Ee.buffer)?m.createStream(34962,Ee.buffer):
m.getBuffer(Ee.buffer),xf="type"in Ee?ae[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Jf=E.buffer;E.buffer=qf;Kf=E.divisor;E.divisor=Df;Lf=E.normalized;E.normalized=Gf;tf=E.offset;E.offset=Af;Qf=E.size;E.size=Ef;Hf=E.state;E.state=Ff;uf=E.stride;E.stride=wf;cg=E.type;E.type=xf;Rf=E.w;E.w=vf;Sf=E.x;E.x=yf;qg=E.y;E.y=zf;ff=E.z;E.z=If;cf=C.call(this,U,f,n);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ra(cf)?(Mf=!0,Nf=m.createStream(34962,
cf),Tf=Nf.dtype):(Nf=m.getBuffer(cf))?Tf=Nf.dtype:"constant"in cf?(hg=2,"number"===typeof cf.constant?(Xf=cf.constant,Yf=ig=Wf=0):(Xf=0<cf.constant.length?cf.constant[0]:0,Yf=1<cf.constant.length?cf.constant[1]:0,ig=2<cf.constant.length?cf.constant[2]:0,Wf=3<cf.constant.length?cf.constant[3]:0)):(Nf=ra(cf.buffer)?m.createStream(34962,cf.buffer):m.getBuffer(cf.buffer),Tf="type"in cf?ae[cf.type]:Nf.dtype,eg=!!cf.normalized,gg=cf.size|0,fg=cf.offset|0,Vf=cf.stride|0,dg=cf.divisor|0);rg=e.buffer;e.buffer=
Nf;sg=e.divisor;e.divisor=dg;tg=e.normalized;e.normalized=eg;ug=e.offset;e.offset=fg;vg=e.size;e.size=gg;wg=e.state;e.state=hg;xg=e.stride;e.stride=Vf;yg=e.type;e.type=Tf;zg=e.w;e.w=Wf;Ag=e.x;e.x=Xf;Bg=e.y;e.y=Yf;gf=e.z;e.z=ig;df=R.call(this,U,f,n);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;ra(df)?(Of=!0,Pf=m.createStream(34962,df),Uf=Pf.dtype):(Pf=m.getBuffer(df))?Uf=Pf.dtype:"constant"in df?(ng=2,"number"===typeof df.constant?(ag=df.constant,bg=og=$f=0):(ag=0<df.constant.length?
df.constant[0]:0,bg=1<df.constant.length?df.constant[1]:0,og=2<df.constant.length?df.constant[2]:0,$f=3<df.constant.length?df.constant[3]:0)):(Pf=ra(df.buffer)?m.createStream(34962,df.buffer):m.getBuffer(df.buffer),Uf="type"in df?ae[df.type]:Pf.dtype,kg=!!df.normalized,mg=df.size|0,lg=df.offset|0,Zf=df.stride|0,jg=df.divisor|0);Cg=a.buffer;a.buffer=Pf;Dg=a.divisor;a.divisor=jg;Eg=a.normalized;a.normalized=kg;Fg=a.offset;a.offset=lg;Gg=a.size;a.size=mg;Hg=a.state;a.state=ng;Ig=a.stride;a.stride=Zf;
Jg=a.type;a.type=Uf;Kg=a.w;a.w=$f;Lg=a.x;a.x=ag;Mg=a.y;a.y=bg;Ng=a.z;a.z=og;Og=qa.vert;qa.vert=44;Pg=qa.frag;qa.frag=43;va.dirty=!0;d(U,f,n);U.viewportWidth=ja;U.viewportHeight=g;qd[0]=A;qd[1]=F;qd[2]=O;qd[3]=M;la[0]=z;la[1]=fa;la[2]=Q;la[3]=ha;Fa.blend_enable=J;Da[0]=Yb;Da[1]=K;Da[2]=t;Da[3]=Ba;Fa.depth_enable=x;me[0]=xa;me[1]=oa;me[2]=B;me[3]=za;Fa.scissor_enable=G;Fa.stencil_enable=Ga;T&&(ba.cpuTime+=performance.now()-da);ea&&W.destroyStream(X);wa.elements=Ta;wa.offset=Ea;wa.count=na;wa.primitive=
ma;ya[45]=ta;ya[48]=ua;ya[10]=Hb;ya[46]=db;ya[47]=mb;ya[34]=Sb;ya[6]=Ra;ya[7]=bc;ya[8]=ib;ya[9]=Ia;Ka&&m.destroyStream(eb);N.buffer=Ma;N.divisor=xd;N.normalized=Xa;N.offset=Lb;N.size=Mb;N.state=lb;N.stride=Na;N.type=$b;N.w=Pa;N.x=ub;N.y=vb;N.z=Sa;ic&&m.destroyStream(Ac);P.buffer=Qb;P.divisor=Kc;P.normalized=Rb;P.offset=Vd;P.size=Fc;P.state=ge;P.stride=Nc;P.type=Yc;P.w=ze;P.x=pc;P.y=wc;P.z=jc;tc&&m.destroyStream(Tb);c.buffer=dd;c.divisor=$c;c.normalized=mc;c.offset=ec;c.size=ad;c.state=Uc;c.stride=
ed;c.type=zc;c.w=id;c.x=pd;c.y=Dd;c.z=pe;zd&&m.destroyStream(fb);S.buffer=Cd;S.divisor=Fd;S.normalized=xe;S.offset=ke;S.size=pg;S.state=le;S.stride=je;S.type=ie;S.w=te;S.x=de;S.y=ne;S.z=Oc;ue&&m.destroyStream(qe);Z.buffer=ve;Z.divisor=He;Z.normalized=Je;Z.offset=Ke;Z.size=Le;Z.state=Ie;Z.stride=Md;Z.type=Xd;Z.w=be;Z.x=ee;Z.y=Me;Z.z=Jd;De&&m.destroyStream(Ne);w.buffer=jf;w.divisor=nf;w.normalized=ef;w.offset=kf;w.size=lf;w.state=mf;w.stride=rf;w.type=of;w.w=sf;w.x=Bf;w.y=Cf;w.z=Qe;pf&&m.destroyStream(qf);
E.buffer=Jf;E.divisor=Kf;E.normalized=Lf;E.offset=tf;E.size=Qf;E.state=Hf;E.stride=uf;E.type=cg;E.w=Rf;E.x=Sf;E.y=qg;E.z=ff;Mf&&m.destroyStream(Nf);e.buffer=rg;e.divisor=sg;e.normalized=tg;e.offset=ug;e.size=vg;e.state=wg;e.stride=xg;e.type=yg;e.w=zg;e.x=Ag;e.y=Bg;e.z=gf;Of&&m.destroyStream(Pf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;qa.vert=Og;qa.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,
ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,W,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb){var Ta,v,m,U,va,wa,Bd,Hb,ha,I,ra,Fa,qa,ya,Ga,la,Y,ua,Ja,Da,mb,da,ia,ac,Ha,bc,Sb,fb,Gd,me,Wd,ze,zd,Vd,pe,fe,Dd,qd,ge;Ta=d.attributes;v=d.buffer;m=d.context;U=d.current;va=d.draw;wa=d.elements;Bd=d.extensions;Hb=d.framebuffer;ha=d.gl;I=d.isBufferArgs;ra=d.next;Fa=d.shader;qa=d.uniforms;ya=d.vao;Ga=ra.blend_color;la=U.blend_color;Y=ra.blend_equation;ua=U.blend_equation;
Ja=ra.blend_func;Da=U.blend_func;mb=ra.colorMask;da=U.colorMask;ia=ra.depth_range;ac=U.depth_range;Ha=ra.polygonOffset_offset;bc=U.polygonOffset_offset;Sb=ra.sample_coverage;fb=U.sample_coverage;Gd=ra.scissor_box;me=U.scissor_box;Wd=ra.stencil_func;ze=U.stencil_func;zd=ra.stencil_opBack;Vd=U.stencil_opBack;pe=ra.stencil_opFront;fe=U.stencil_opFront;Dd=ra.viewport;qd=U.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
b){var e,c,f,h,d,k;e=Hb.next;e!==Hb.cur&&(e?ha.bindFramebuffer(36160,e.framebuffer):ha.bindFramebuffer(36160,null),Hb.cur=e);if(U.dirty){var r,q,w,g,Fa,u,C,qa,E,y,J,t,x,D,l,H,S,P,B,R,G,N,Ga,T,Z,ga,ca,V,Ja,Za,cc,yb,bb,Nb;r=ra.dither;r!==U.dither&&(r?ha.enable(3024):ha.disable(3024),U.dither=r);q=Y[0];w=Y[1];if(q!==ua[0]||w!==ua[1])ha.blendEquationSeparate(q,w),ua[0]=q,ua[1]=w;g=ra.depth_func;g!==U.depth_func&&(ha.depthFunc(g),U.depth_func=g);Fa=ia[0];u=ia[1];if(Fa!==ac[0]||u!==ac[1])ha.depthRange(Fa,
u),ac[0]=Fa,ac[1]=u;C=ra.depth_mask;C!==U.depth_mask&&(ha.depthMask(C),U.depth_mask=C);qa=mb[0];E=mb[1];y=mb[2];J=mb[3];if(qa!==da[0]||E!==da[1]||y!==da[2]||J!==da[3])ha.colorMask(qa,E,y,J),da[0]=qa,da[1]=E,da[2]=y,da[3]=J;t=ra.cull_enable;t!==U.cull_enable&&(t?ha.enable(2884):ha.disable(2884),U.cull_enable=t);x=ra.cull_face;x!==U.cull_face&&(ha.cullFace(x),U.cull_face=x);D=ra.frontFace;D!==U.frontFace&&(ha.frontFace(D),U.frontFace=D);l=ra.lineWidth;l!==U.lineWidth&&(ha.lineWidth(l),U.lineWidth=l);
H=ra.polygonOffset_enable;H!==U.polygonOffset_enable&&(H?ha.enable(32823):ha.disable(32823),U.polygonOffset_enable=H);S=Ha[0];P=Ha[1];if(S!==bc[0]||P!==bc[1])ha.polygonOffset(S,P),bc[0]=S,bc[1]=P;B=ra.sample_alpha;B!==U.sample_alpha&&(B?ha.enable(32926):ha.disable(32926),U.sample_alpha=B);R=ra.sample_enable;R!==U.sample_enable&&(R?ha.enable(32928):ha.disable(32928),U.sample_enable=R);G=Sb[0];N=Sb[1];if(G!==fb[0]||N!==fb[1])ha.sampleCoverage(G,N),fb[0]=G,fb[1]=N;Ga=ra.stencil_mask;Ga!==U.stencil_mask&&
(ha.stencilMask(Ga),U.stencil_mask=Ga);T=Wd[0];Z=Wd[1];ga=Wd[2];if(T!==ze[0]||Z!==ze[1]||ga!==ze[2])ha.stencilFunc(T,Z,ga),ze[0]=T,ze[1]=Z,ze[2]=ga;ca=pe[0];V=pe[1];Ja=pe[2];Za=pe[3];if(ca!==fe[0]||V!==fe[1]||Ja!==fe[2]||Za!==fe[3])ha.stencilOpSeparate(ca,V,Ja,Za),fe[0]=ca,fe[1]=V,fe[2]=Ja,fe[3]=Za;cc=zd[0];yb=zd[1];bb=zd[2];Nb=zd[3];if(cc!==Vd[0]||yb!==Vd[1]||bb!==Vd[2]||Nb!==Vd[3])ha.stencilOpSeparate(cc,yb,bb,Nb),Vd[0]=cc,Vd[1]=yb,Vd[2]=bb,Vd[3]=Nb}ha.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=
0;la[3]=1;ha.enable(3042);U.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Da[0]=770;Da[1]=771;Da[2]=773;Da[3]=1;ha.disable(2929);U.depth_enable=!1;ha.enable(3089);U.scissor_enable=!0;ha.disable(2960);U.stencil_enable=!1;if(c=U.profile)f=performance.now(),ba.count+=b;ha.useProgram(sa.program);h=Bd.angle_instanced_arrays;var $a;ya.setVAO(null);ha.uniform1i(F.location,!1);ha.uniform1i(oa.location,L.bind());$a=va.instances;for(d=0;d<b;++d){k=a[d];var ob,Ua,Gd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,
Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Dd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,hf,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,
Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf;ob=k.viewport;Ua=ob.x|0;Gd=ob.y|0;Ib="width"in ob?ob.width|0:m.framebufferWidth-Ua;Jb="height"in ob?ob.height|0:m.framebufferHeight-Gd;sc=m.viewportWidth;m.viewportWidth=Ib;Ob=m.viewportHeight;m.viewportHeight=Jb;ha.viewport(Ua,Gd,Ib,Jb);qd[0]=Ua;qd[1]=Gd;qd[2]=Ib;qd[3]=Jb;jb=k.viewport;Gb=jb.x|0;Db=jb.y|0;wb="width"in jb?jb.width|0:m.framebufferWidth-Gb;hb="height"in jb?jb.height|0:m.framebufferHeight-Db;ha.scissor(Gb,Db,wb,hb);me[0]=Gb;me[1]=Db;
me[2]=wb;me[3]=hb;Zb=A.call(this,m,k,d);Pb=!1;qb=null;Ra=0;Ub=!1;dc=zb=0;ib=1;pb=0;Ia=5126;gb=eb=Ka=rb=0;I(Zb)?(Pb=!0,qb=v.createStream(34962,Zb),Ia=qb.dtype):(qb=v.getBuffer(Zb))?Ia=qb.dtype:"constant"in Zb?(ib=2,"number"===typeof Zb.constant?(Ka=Zb.constant,eb=gb=rb=0):(Ka=0<Zb.constant.length?Zb.constant[0]:0,eb=1<Zb.constant.length?Zb.constant[1]:0,gb=2<Zb.constant.length?Zb.constant[2]:0,rb=3<Zb.constant.length?Zb.constant[3]:0)):(qb=I(Zb.buffer)?v.createStream(34962,Zb.buffer):v.getBuffer(Zb.buffer),
Ia="type"in Zb?ge[Zb.type]:qb.dtype,Ub=!!Zb.normalized,dc=Zb.size|0,zb=Zb.offset|0,pb=Zb.stride|0,Ra=Zb.divisor|0);La=Aa.location;kb=Ta[La];if(1===ib){kb.buffer||ha.enableVertexAttribArray(La);Va=dc||1;if(kb.type!==Ia||kb.size!==Va||kb.buffer!==qb||kb.normalized!==Ub||kb.offset!==zb||kb.stride!==pb)ha.bindBuffer(34962,qb.buffer),ha.vertexAttribPointer(La,Va,Ia,Ub,pb,zb),kb.type=Ia,kb.size=Va,kb.buffer=qb,kb.normalized=Ub,kb.offset=zb,kb.stride=pb;kb.divisor!==Ra&&(h.vertexAttribDivisorANGLE(La,Ra),
kb.divisor=Ra)}else if(kb.buffer&&(ha.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==eb||kb.z!==gb||kb.w!==rb)ha.vertexAttrib4f(La,Ka,eb,gb,rb),kb.x=Ka,kb.y=eb,kb.z=gb,kb.w=rb;tb=ta.call(this,m,k,d);sb=!1;Oa=null;Cc=0;Qa=!1;Eb=Kb=0;Ma=1;wd=0;Xa=5126;Na=lb=Mb=Lb=0;I(tb)?(sb=!0,Oa=v.createStream(34962,tb),Xa=Oa.dtype):(Oa=v.getBuffer(tb))?Xa=Oa.dtype:"constant"in tb?(Ma=2,"number"===typeof tb.constant?(Mb=tb.constant,lb=Na=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,lb=1<tb.constant.length?
tb.constant[1]:0,Na=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Oa=I(tb.buffer)?v.createStream(34962,tb.buffer):v.getBuffer(tb.buffer),Xa="type"in tb?ge[tb.type]:Oa.dtype,Qa=!!tb.normalized,Eb=tb.size|0,Kb=tb.offset|0,wd=tb.stride|0,Cc=tb.divisor|0);$b=ja.location;Pa=Ta[$b];if(1===Ma){Pa.buffer||ha.enableVertexAttribArray($b);ub=Eb||1;if(Pa.type!==Xa||Pa.size!==ub||Pa.buffer!==Oa||Pa.normalized!==Qa||Pa.offset!==Kb||Pa.stride!==wd)ha.bindBuffer(34962,Oa.buffer),
ha.vertexAttribPointer($b,ub,Xa,Qa,wd,Kb),Pa.type=Xa,Pa.size=ub,Pa.buffer=Oa,Pa.normalized=Qa,Pa.offset=Kb,Pa.stride=wd;Pa.divisor!==Cc&&(h.vertexAttribDivisorANGLE($b,Cc),Pa.divisor=Cc)}else if(Pa.buffer&&(ha.disableVertexAttribArray($b),Pa.buffer=null),Pa.x!==Mb||Pa.y!==lb||Pa.z!==Na||Pa.w!==Lb)ha.vertexAttrib4f($b,Mb,lb,Na,Lb),Pa.x=Mb,Pa.y=lb,Pa.z=Na,Pa.w=Lb;vb=W.call(this,m,k,d);Sa=!1;nb=null;ic=0;Ac=!1;ab=vc=0;lc=1;hd=0;Wa=5126;Vb=Ya=Ab=Mc=0;I(vb)?(Sa=!0,nb=v.createStream(34962,vb),Wa=nb.dtype):
(nb=v.getBuffer(vb))?Wa=nb.dtype:"constant"in vb?(lc=2,"number"===typeof vb.constant?(Ab=vb.constant,Ya=Vb=Mc=0):(Ab=0<vb.constant.length?vb.constant[0]:0,Ya=1<vb.constant.length?vb.constant[1]:0,Vb=2<vb.constant.length?vb.constant[2]:0,Mc=3<vb.constant.length?vb.constant[3]:0)):(nb=I(vb.buffer)?v.createStream(34962,vb.buffer):v.getBuffer(vb.buffer),Wa="type"in vb?ge[vb.type]:nb.dtype,Ac=!!vb.normalized,ab=vb.size|0,vc=vb.offset|0,hd=vb.stride|0,ic=vb.divisor|0);uc=Ba.location;Wb=Ta[uc];if(1===lc){Wb.buffer||
ha.enableVertexAttribArray(uc);Qb=ab||1;if(Wb.type!==Wa||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==Ac||Wb.offset!==vc||Wb.stride!==hd)ha.bindBuffer(34962,nb.buffer),ha.vertexAttribPointer(uc,Qb,Wa,Ac,hd,vc),Wb.type=Wa,Wb.size=Qb,Wb.buffer=nb,Wb.normalized=Ac,Wb.offset=vc,Wb.stride=hd;Wb.divisor!==ic&&(h.vertexAttribDivisorANGLE(uc,ic),Wb.divisor=ic)}else if(Wb.buffer&&(ha.disableVertexAttribArray(uc),Wb.buffer=null),Wb.x!==Ab||Wb.y!==Ya||Wb.z!==Vb||Wb.w!==Mc)ha.vertexAttrib4f(uc,Ab,Ya,Vb,Mc),
Wb.x=Ab,Wb.y=Ya,Wb.z=Vb,Wb.w=Mc;Kc=X.call(this,m,k,d);Rb=!1;Dd=null;Fc=0;Ed=!1;Yc=Nc=0;td=1;pc=0;wc=5126;Tb=tc=cb=jc=0;I(Kc)?(Rb=!0,Dd=v.createStream(34962,Kc),wc=Dd.dtype):(Dd=v.getBuffer(Kc))?wc=Dd.dtype:"constant"in Kc?(td=2,"number"===typeof Kc.constant?(cb=Kc.constant,tc=Tb=jc=0):(cb=0<Kc.constant.length?Kc.constant[0]:0,tc=1<Kc.constant.length?Kc.constant[1]:0,Tb=2<Kc.constant.length?Kc.constant[2]:0,jc=3<Kc.constant.length?Kc.constant[3]:0)):(Dd=I(Kc.buffer)?v.createStream(34962,Kc.buffer):
v.getBuffer(Kc.buffer),wc="type"in Kc?ge[Kc.type]:Dd.dtype,Ed=!!Kc.normalized,Yc=Kc.size|0,Nc=Kc.offset|0,pc=Kc.stride|0,Fc=Kc.divisor|0);Xb=Yb.location;fc=Ta[Xb];if(1===td){fc.buffer||ha.enableVertexAttribArray(Xb);kc=Yc||1;if(fc.type!==wc||fc.size!==kc||fc.buffer!==Dd||fc.normalized!==Ed||fc.offset!==Nc||fc.stride!==pc)ha.bindBuffer(34962,Dd.buffer),ha.vertexAttribPointer(Xb,kc,wc,Ed,pc,Nc),fc.type=wc,fc.size=kc,fc.buffer=Dd,fc.normalized=Ed,fc.offset=Nc,fc.stride=pc;fc.divisor!==Fc&&(h.vertexAttribDivisorANGLE(Xb,
Fc),fc.divisor=Fc)}else if(fc.buffer&&(ha.disableVertexAttribArray(Xb),fc.buffer=null),fc.x!==cb||fc.y!==tc||fc.z!==Tb||fc.w!==jc)ha.vertexAttrib4f(Xb,cb,tc,Tb,jc),fc.x=cb,fc.y=tc,fc.z=Tb,fc.w=jc;yc=ea.call(this,m,k,d);Bc=!1;cd=null;Qc=0;Rc=!1;Zc=Sc=0;ld=1;dd=0;$c=5126;Uc=ad=ec=mc=0;I(yc)?(Bc=!0,cd=v.createStream(34962,yc),$c=cd.dtype):(cd=v.getBuffer(yc))?$c=cd.dtype:"constant"in yc?(ld=2,"number"===typeof yc.constant?(ec=yc.constant,ad=Uc=mc=0):(ec=0<yc.constant.length?yc.constant[0]:0,ad=1<yc.constant.length?
yc.constant[1]:0,Uc=2<yc.constant.length?yc.constant[2]:0,mc=3<yc.constant.length?yc.constant[3]:0)):(cd=I(yc.buffer)?v.createStream(34962,yc.buffer):v.getBuffer(yc.buffer),$c="type"in yc?ge[yc.type]:cd.dtype,Rc=!!yc.normalized,Zc=yc.size|0,Sc=yc.offset|0,dd=yc.stride|0,Qc=yc.divisor|0);ed=Ea.location;zc=Ta[ed];if(1===ld){zc.buffer||ha.enableVertexAttribArray(ed);id=Zc||1;if(zc.type!==$c||zc.size!==id||zc.buffer!==cd||zc.normalized!==Rc||zc.offset!==Sc||zc.stride!==dd)ha.bindBuffer(34962,cd.buffer),
ha.vertexAttribPointer(ed,id,$c,Rc,dd,Sc),zc.type=$c,zc.size=id,zc.buffer=cd,zc.normalized=Rc,zc.offset=Sc,zc.stride=dd;zc.divisor!==Qc&&(h.vertexAttribDivisorANGLE(ed,Qc),zc.divisor=Qc)}else if(zc.buffer&&(ha.disableVertexAttribArray(ed),zc.buffer=null),zc.x!==ec||zc.y!==ad||zc.z!==Uc||zc.w!==mc)ha.vertexAttrib4f(ed,ec,ad,Uc,mc),zc.x=ec,zc.y=ad,zc.z=Uc,zc.w=mc;pd=Q.call(this,m,k,d);we=!1;ye=null;jd=0;$e=!1;he=Nd=0;ce=1;Od=0;Kd=5126;ud=Tc=nd=Id=0;I(pd)?(we=!0,ye=v.createStream(34962,pd),Kd=ye.dtype):
(ye=v.getBuffer(pd))?Kd=ye.dtype:"constant"in pd?(ce=2,"number"===typeof pd.constant?(nd=pd.constant,Tc=ud=Id=0):(nd=0<pd.constant.length?pd.constant[0]:0,Tc=1<pd.constant.length?pd.constant[1]:0,ud=2<pd.constant.length?pd.constant[2]:0,Id=3<pd.constant.length?pd.constant[3]:0)):(ye=I(pd.buffer)?v.createStream(34962,pd.buffer):v.getBuffer(pd.buffer),Kd="type"in pd?ge[pd.type]:ye.dtype,$e=!!pd.normalized,he=pd.size|0,Nd=pd.offset|0,Od=pd.stride|0,jd=pd.divisor|0);sd=na.location;kd=Ta[sd];if(1===ce){kd.buffer||
ha.enableVertexAttribArray(sd);vd=he||1;if(kd.type!==Kd||kd.size!==vd||kd.buffer!==ye||kd.normalized!==$e||kd.offset!==Nd||kd.stride!==Od)ha.bindBuffer(34962,ye.buffer),ha.vertexAttribPointer(sd,vd,Kd,$e,Od,Nd),kd.type=Kd,kd.size=vd,kd.buffer=ye,kd.normalized=$e,kd.offset=Nd,kd.stride=Od;kd.divisor!==jd&&(h.vertexAttribDivisorANGLE(sd,jd),kd.divisor=jd)}else if(kd.buffer&&(ha.disableVertexAttribArray(sd),kd.buffer=null),kd.x!==nd||kd.y!==Tc||kd.z!==ud||kd.w!==Id)ha.vertexAttrib4f(sd,nd,Tc,ud,Id),
kd.x=nd,kd.y=Tc,kd.z=ud,kd.w=Id;Cd=O.call(this,m,k,d);Fd=!1;xe=null;ke=0;Fe=!1;je=le=0;ie=1;te=0;de=5126;ue=gd=Oc=ne=0;I(Cd)?(Fd=!0,xe=v.createStream(34962,Cd),de=xe.dtype):(xe=v.getBuffer(Cd))?de=xe.dtype:"constant"in Cd?(ie=2,"number"===typeof Cd.constant?(Oc=Cd.constant,gd=ue=ne=0):(Oc=0<Cd.constant.length?Cd.constant[0]:0,gd=1<Cd.constant.length?Cd.constant[1]:0,ue=2<Cd.constant.length?Cd.constant[2]:0,ne=3<Cd.constant.length?Cd.constant[3]:0)):(xe=I(Cd.buffer)?v.createStream(34962,Cd.buffer):
v.getBuffer(Cd.buffer),de="type"in Cd?ge[Cd.type]:xe.dtype,Fe=!!Cd.normalized,je=Cd.size|0,le=Cd.offset|0,te=Cd.stride|0,ke=Cd.divisor|0);qe=n.location;Ld=Ta[qe];if(1===ie){Ld.buffer||ha.enableVertexAttribArray(qe);Pd=je||4;if(Ld.type!==de||Ld.size!==Pd||Ld.buffer!==xe||Ld.normalized!==Fe||Ld.offset!==le||Ld.stride!==te)ha.bindBuffer(34962,xe.buffer),ha.vertexAttribPointer(qe,Pd,de,Fe,te,le),Ld.type=de,Ld.size=Pd,Ld.buffer=xe,Ld.normalized=Fe,Ld.offset=le,Ld.stride=te;Ld.divisor!==ke&&(h.vertexAttribDivisorANGLE(qe,
ke),Ld.divisor=ke)}else if(Ld.buffer&&(ha.disableVertexAttribArray(qe),Ld.buffer=null),Ld.x!==Oc||Ld.y!==gd||Ld.z!==ue||Ld.w!==ne)ha.vertexAttrib4f(qe,Oc,gd,ue,ne),Ld.x=Oc,Ld.y=gd,Ld.z=ue,Ld.w=ne;Rd=z.call(this,m,k,d);Sd=!1;oe=null;Ge=0;Be=!1;Re=re=0;Se=1;Oe=0;ve=5126;Le=Ke=Je=He=0;I(Rd)?(Sd=!0,oe=v.createStream(34962,Rd),ve=oe.dtype):(oe=v.getBuffer(Rd))?ve=oe.dtype:"constant"in Rd?(Se=2,"number"===typeof Rd.constant?(Je=Rd.constant,Ke=Le=He=0):(Je=0<Rd.constant.length?Rd.constant[0]:0,Ke=1<Rd.constant.length?
Rd.constant[1]:0,Le=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(oe=I(Rd.buffer)?v.createStream(34962,Rd.buffer):v.getBuffer(Rd.buffer),ve="type"in Rd?ge[Rd.type]:oe.dtype,Be=!!Rd.normalized,Re=Rd.size|0,re=Rd.offset|0,Oe=Rd.stride|0,Ge=Rd.divisor|0);Ie=za.location;Md=Ta[Ie];if(1===Se){Md.buffer||ha.enableVertexAttribArray(Ie);Xd=Re||4;if(Md.type!==ve||Md.size!==Xd||Md.buffer!==oe||Md.normalized!==Be||Md.offset!==re||Md.stride!==Oe)ha.bindBuffer(34962,oe.buffer),
ha.vertexAttribPointer(Ie,Xd,ve,Be,Oe,re),Md.type=ve,Md.size=Xd,Md.buffer=oe,Md.normalized=Be,Md.offset=re,Md.stride=Oe;Md.divisor!==Ge&&(h.vertexAttribDivisorANGLE(Ie,Ge),Md.divisor=Ge)}else if(Md.buffer&&(ha.disableVertexAttribArray(Ie),Md.buffer=null),Md.x!==Je||Md.y!==Ke||Md.z!==Le||Md.w!==He)ha.vertexAttrib4f(Ie,Je,Ke,Le,He),Md.x=Je,Md.y=Ke,Md.z=Le,Md.w=He;be=p.call(this,m,k,d);ee=!1;Me=null;Jd=0;Td=!1;Ne=De=0;hf=1;bf=0;Te=5126;Ue=Xe=af=Pe=0;I(be)?(ee=!0,Me=v.createStream(34962,be),Te=Me.dtype):
(Me=v.getBuffer(be))?Te=Me.dtype:"constant"in be?(hf=2,"number"===typeof be.constant?(af=be.constant,Xe=Ue=Pe=0):(af=0<be.constant.length?be.constant[0]:0,Xe=1<be.constant.length?be.constant[1]:0,Ue=2<be.constant.length?be.constant[2]:0,Pe=3<be.constant.length?be.constant[3]:0)):(Me=I(be.buffer)?v.createStream(34962,be.buffer):v.getBuffer(be.buffer),Te="type"in be?ge[be.type]:Me.dtype,Td=!!be.normalized,Ne=be.size|0,De=be.offset|0,bf=be.stride|0,Jd=be.divisor|0);Ve=aa.location;Ud=Ta[Ve];if(1===hf){Ud.buffer||
ha.enableVertexAttribArray(Ve);$d=Ne||1;if(Ud.type!==Te||Ud.size!==$d||Ud.buffer!==Me||Ud.normalized!==Td||Ud.offset!==De||Ud.stride!==bf)ha.bindBuffer(34962,Me.buffer),ha.vertexAttribPointer(Ve,$d,Te,Td,bf,De),Ud.type=Te,Ud.size=$d,Ud.buffer=Me,Ud.normalized=Td,Ud.offset=De,Ud.stride=bf;Ud.divisor!==Jd&&(h.vertexAttribDivisorANGLE(Ve,Jd),Ud.divisor=Jd)}else if(Ud.buffer&&(ha.disableVertexAttribArray(Ve),Ud.buffer=null),Ud.x!==af||Ud.y!==Xe||Ud.z!==Ue||Ud.w!==Pe)ha.vertexAttrib4f(Ve,af,Xe,Ue,Pe),
Ud.x=af,Ud.y=Xe,Ud.z=Ue,Ud.w=Pe;We=m.pixelRatio;d&&jf===We||(jf=We,ha.uniform1f(Ca.location,We));nf=K.call(this,m,k,d);ef=nf[0];lf=nf[1];d&&kf===ef&&mf===lf||(kf=ef,mf=lf,ha.uniform2f(ma.location,ef,lf));rf=k.scale;of=rf[0];Bf=rf[1];d&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ha.uniform2f(xa.location,of,Bf));Qe=k.scaleFract;Ee=Qe[0];qf=Qe[1];d&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ha.uniform2f(fa.location,Ee,qf));Gf=k.translate;Af=Gf[0];Ff=Gf[1];d&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ha.uniform2f(ka.location,Af,Ff));
xf=k.translateFract;vf=xf[0];zf=xf[1];d&&yf===vf&&If===zf||(yf=vf,If=zf,ha.uniform2f(pa.location,vf,zf));Jf=k.opacity;d&&Kf===Jf||(Kf=Jf,ha.uniform1f(M.location,Jf));Lf=k.elements;tf=null;(tf=(Qf=I(Lf))?wa.createStream(Lf):wa.getElements(Lf))&&ha.bindBuffer(34963,tf.buffer.buffer);Hf=k.offset;if(uf=k.count)0<$a?tf?h.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),$a):h.drawArraysInstancedANGLE(0,Hf,uf,$a):0>$a&&(tf?ha.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ha.drawArrays(0,
Hf,uf)),m.viewportWidth=sc,m.viewportHeight=Ob,Pb&&v.destroyStream(qb),sb&&v.destroyStream(Oa),Sa&&v.destroyStream(nb),Rb&&v.destroyStream(Dd),Bc&&v.destroyStream(cd),we&&v.destroyStream(ye),Fd&&v.destroyStream(xe),Sd&&v.destroyStream(oe),ee&&v.destroyStream(Me),Qf&&wa.destroyStream(tf)}L.unbind();U.dirty=!0;ya.setVAO(null);c&&(ba.cpuTime+=performance.now()-f)},draw:function(a){var b,e,c,h,d,p,r,w,A,Fa,O,u,C,z,qa,E,y,Q,K,L,l,S,P,R,N,Ga,Z,ga,X,ea,ca,V,ta,sa,W,db,Ja,cc,yb,bb,Nb,$a,ob,Ua,Gd,Ib,Jb,sc,
Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,Dd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,we,ye,jd,$e,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re;b=Hb.next;b!==Hb.cur&&(b?ha.bindFramebuffer(36160,b.framebuffer):ha.bindFramebuffer(36160,null),Hb.cur=b);
if(U.dirty){var Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,hf,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,kf,lf,mf;Se=ra.dither;Se!==U.dither&&(Se?ha.enable(3024):ha.disable(3024),U.dither=Se);Oe=Y[0];ve=Y[1];if(Oe!==ua[0]||ve!==ua[1])ha.blendEquationSeparate(Oe,ve),ua[0]=Oe,ua[1]=ve;He=ra.depth_func;He!==U.depth_func&&(ha.depthFunc(He),U.depth_func=He);Je=ia[0];Ke=ia[1];if(Je!==ac[0]||Ke!==ac[1])ha.depthRange(Je,Ke),ac[0]=Je,ac[1]=Ke;Le=ra.depth_mask;Le!==U.depth_mask&&(ha.depthMask(Le),U.depth_mask=
Le);Ie=mb[0];Md=mb[1];Xd=mb[2];be=mb[3];if(Ie!==da[0]||Md!==da[1]||Xd!==da[2]||be!==da[3])ha.colorMask(Ie,Md,Xd,be),da[0]=Ie,da[1]=Md,da[2]=Xd,da[3]=be;ee=ra.cull_enable;ee!==U.cull_enable&&(ee?ha.enable(2884):ha.disable(2884),U.cull_enable=ee);Me=ra.cull_face;Me!==U.cull_face&&(ha.cullFace(Me),U.cull_face=Me);Jd=ra.frontFace;Jd!==U.frontFace&&(ha.frontFace(Jd),U.frontFace=Jd);Td=ra.lineWidth;Td!==U.lineWidth&&(ha.lineWidth(Td),U.lineWidth=Td);De=ra.polygonOffset_enable;De!==U.polygonOffset_enable&&
(De?ha.enable(32823):ha.disable(32823),U.polygonOffset_enable=De);Ne=Ha[0];hf=Ha[1];if(Ne!==bc[0]||hf!==bc[1])ha.polygonOffset(Ne,hf),bc[0]=Ne,bc[1]=hf;bf=ra.sample_alpha;bf!==U.sample_alpha&&(bf?ha.enable(32926):ha.disable(32926),U.sample_alpha=bf);Te=ra.sample_enable;Te!==U.sample_enable&&(Te?ha.enable(32928):ha.disable(32928),U.sample_enable=Te);Pe=Sb[0];af=Sb[1];if(Pe!==fb[0]||af!==fb[1])ha.sampleCoverage(Pe,af),fb[0]=Pe,fb[1]=af;Xe=ra.stencil_mask;Xe!==U.stencil_mask&&(ha.stencilMask(Xe),U.stencil_mask=
Xe);Ue=Wd[0];Ve=Wd[1];Ud=Wd[2];if(Ue!==ze[0]||Ve!==ze[1]||Ud!==ze[2])ha.stencilFunc(Ue,Ve,Ud),ze[0]=Ue,ze[1]=Ve,ze[2]=Ud;$d=pe[0];We=pe[1];jf=pe[2];nf=pe[3];if($d!==fe[0]||We!==fe[1]||jf!==fe[2]||nf!==fe[3])ha.stencilOpSeparate($d,We,jf,nf),fe[0]=$d,fe[1]=We,fe[2]=jf,fe[3]=nf;ef=zd[0];kf=zd[1];lf=zd[2];mf=zd[3];if(ef!==Vd[0]||kf!==Vd[1]||lf!==Vd[2]||mf!==Vd[3])ha.stencilOpSeparate(ef,kf,lf,mf),Vd[0]=ef,Vd[1]=kf,Vd[2]=lf,Vd[3]=mf}e=a.viewport;c=e.x|0;h=e.y|0;d="width"in e?e.width|0:m.framebufferWidth-
c;p="height"in e?e.height|0:m.framebufferHeight-h;r=m.viewportWidth;m.viewportWidth=d;w=m.viewportHeight;m.viewportHeight=p;ha.viewport(c,h,d,p);qd[0]=c;qd[1]=h;qd[2]=d;qd[3]=p;ha.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ha.enable(3042);U.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Da[0]=770;Da[1]=771;Da[2]=773;Da[3]=1;ha.disable(2929);U.depth_enable=!1;A=a.viewport;Fa=A.x|0;O=A.y|0;u="width"in A?A.width|0:m.framebufferWidth-Fa;C="height"in A?A.height|0:m.framebufferHeight-O;ha.scissor(Fa,
O,u,C);me[0]=Fa;me[1]=O;me[2]=u;me[3]=C;ha.enable(3089);U.scissor_enable=!0;ha.disable(2960);U.stencil_enable=!1;if(z=U.profile)qa=performance.now(),ba.count++;ha.useProgram(H.program);E=Bd.angle_instanced_arrays;ya.setVAO(null);y=J.call(this,m,a,0);Q=!1;K=null;L=0;l=!1;P=S=0;R=1;N=0;Ga=5126;ea=X=ga=Z=0;I(y)?(Q=!0,K=v.createStream(34962,y),Ga=K.dtype):(K=v.getBuffer(y))?Ga=K.dtype:"constant"in y?(R=2,"number"===typeof y.constant?(ga=y.constant,X=ea=Z=0):(ga=0<y.constant.length?y.constant[0]:0,X=1<
y.constant.length?y.constant[1]:0,ea=2<y.constant.length?y.constant[2]:0,Z=3<y.constant.length?y.constant[3]:0)):(K=I(y.buffer)?v.createStream(34962,y.buffer):v.getBuffer(y.buffer),Ga="type"in y?ge[y.type]:K.dtype,l=!!y.normalized,P=y.size|0,S=y.offset|0,N=y.stride|0,L=y.divisor|0);ca=Aa.location;V=Ta[ca];if(1===R){V.buffer||ha.enableVertexAttribArray(ca);ta=P||1;if(V.type!==Ga||V.size!==ta||V.buffer!==K||V.normalized!==l||V.offset!==S||V.stride!==N)ha.bindBuffer(34962,K.buffer),ha.vertexAttribPointer(ca,
ta,Ga,l,N,S),V.type=Ga,V.size=ta,V.buffer=K,V.normalized=l,V.offset=S,V.stride=N;V.divisor!==L&&(E.vertexAttribDivisorANGLE(ca,L),V.divisor=L)}else if(V.buffer&&(ha.disableVertexAttribArray(ca),V.buffer=null),V.x!==ga||V.y!==X||V.z!==ea||V.w!==Z)ha.vertexAttrib4f(ca,ga,X,ea,Z),V.x=ga,V.y=X,V.z=ea,V.w=Z;sa=g.call(this,m,a,0);W=!1;db=null;Ja=0;cc=!1;bb=yb=0;Nb=1;$a=0;ob=5126;Jb=Ib=Gd=Ua=0;I(sa)?(W=!0,db=v.createStream(34962,sa),ob=db.dtype):(db=v.getBuffer(sa))?ob=db.dtype:"constant"in sa?(Nb=2,"number"===
typeof sa.constant?(Gd=sa.constant,Ib=Jb=Ua=0):(Gd=0<sa.constant.length?sa.constant[0]:0,Ib=1<sa.constant.length?sa.constant[1]:0,Jb=2<sa.constant.length?sa.constant[2]:0,Ua=3<sa.constant.length?sa.constant[3]:0)):(db=I(sa.buffer)?v.createStream(34962,sa.buffer):v.getBuffer(sa.buffer),ob="type"in sa?ge[sa.type]:db.dtype,cc=!!sa.normalized,bb=sa.size|0,yb=sa.offset|0,$a=sa.stride|0,Ja=sa.divisor|0);sc=ja.location;Ob=Ta[sc];if(1===Nb){Ob.buffer||ha.enableVertexAttribArray(sc);jb=bb||1;if(Ob.type!==
ob||Ob.size!==jb||Ob.buffer!==db||Ob.normalized!==cc||Ob.offset!==yb||Ob.stride!==$a)ha.bindBuffer(34962,db.buffer),ha.vertexAttribPointer(sc,jb,ob,cc,$a,yb),Ob.type=ob,Ob.size=jb,Ob.buffer=db,Ob.normalized=cc,Ob.offset=yb,Ob.stride=$a;Ob.divisor!==Ja&&(E.vertexAttribDivisorANGLE(sc,Ja),Ob.divisor=Ja)}else if(Ob.buffer&&(ha.disableVertexAttribArray(sc),Ob.buffer=null),Ob.x!==Gd||Ob.y!==Ib||Ob.z!==Jb||Ob.w!==Ua)ha.vertexAttrib4f(sc,Gd,Ib,Jb,Ua),Ob.x=Gd,Ob.y=Ib,Ob.z=Jb,Ob.w=Ua;Gb=k.call(this,m,a,0);
Db=!1;wb=null;hb=0;Zb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;Ia=pb=ib=dc=0;I(Gb)?(Db=!0,wb=v.createStream(34962,Gb),zb=wb.dtype):(wb=v.getBuffer(Gb))?zb=wb.dtype:"constant"in Gb?(Ra=2,"number"===typeof Gb.constant?(ib=Gb.constant,pb=Ia=dc=0):(ib=0<Gb.constant.length?Gb.constant[0]:0,pb=1<Gb.constant.length?Gb.constant[1]:0,Ia=2<Gb.constant.length?Gb.constant[2]:0,dc=3<Gb.constant.length?Gb.constant[3]:0)):(wb=I(Gb.buffer)?v.createStream(34962,Gb.buffer):v.getBuffer(Gb.buffer),zb="type"in Gb?ge[Gb.type]:wb.dtype,
Zb=!!Gb.normalized,qb=Gb.size|0,Pb=Gb.offset|0,Ub=Gb.stride|0,hb=Gb.divisor|0);rb=Ba.location;Ka=Ta[rb];if(1===Ra){Ka.buffer||ha.enableVertexAttribArray(rb);eb=qb||1;if(Ka.type!==zb||Ka.size!==eb||Ka.buffer!==wb||Ka.normalized!==Zb||Ka.offset!==Pb||Ka.stride!==Ub)ha.bindBuffer(34962,wb.buffer),ha.vertexAttribPointer(rb,eb,zb,Zb,Ub,Pb),Ka.type=zb,Ka.size=eb,Ka.buffer=wb,Ka.normalized=Zb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(E.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&
(ha.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==ib||Ka.y!==pb||Ka.z!==Ia||Ka.w!==dc)ha.vertexAttrib4f(rb,ib,pb,Ia,dc),Ka.x=ib,Ka.y=pb,Ka.z=Ia,Ka.w=dc;gb=q.call(this,m,a,0);La=!1;kb=null;Va=0;tb=!1;Oa=sb=0;Cc=1;Qa=0;Kb=5126;Xa=Dd=Ma=Eb=0;I(gb)?(La=!0,kb=v.createStream(34962,gb),Kb=kb.dtype):(kb=v.getBuffer(gb))?Kb=kb.dtype:"constant"in gb?(Cc=2,"number"===typeof gb.constant?(Ma=gb.constant,Dd=Xa=Eb=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Dd=1<gb.constant.length?gb.constant[1]:0,Xa=2<gb.constant.length?
gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(kb=I(gb.buffer)?v.createStream(34962,gb.buffer):v.getBuffer(gb.buffer),Kb="type"in gb?ge[gb.type]:kb.dtype,tb=!!gb.normalized,Oa=gb.size|0,sb=gb.offset|0,Qa=gb.stride|0,Va=gb.divisor|0);Lb=Yb.location;Mb=Ta[Lb];if(1===Cc){Mb.buffer||ha.enableVertexAttribArray(Lb);lb=Oa||1;if(Mb.type!==Kb||Mb.size!==lb||Mb.buffer!==kb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Qa)ha.bindBuffer(34962,kb.buffer),ha.vertexAttribPointer(Lb,lb,Kb,tb,Qa,
sb),Mb.type=Kb,Mb.size=lb,Mb.buffer=kb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Qa;Mb.divisor!==Va&&(E.vertexAttribDivisorANGLE(Lb,Va),Mb.divisor=Va)}else if(Mb.buffer&&(ha.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Ma||Mb.y!==Dd||Mb.z!==Xa||Mb.w!==Eb)ha.vertexAttrib4f(Lb,Ma,Dd,Xa,Eb),Mb.x=Ma,Mb.y=Dd,Mb.z=Xa,Mb.w=Eb;Na=f.call(this,m,a,0);$b=!1;Pa=null;ub=0;vb=!1;nb=Sa=0;ic=1;Ac=0;vc=5126;Wa=hd=lc=ab=0;I(Na)?($b=!0,Pa=v.createStream(34962,Na),vc=Pa.dtype):(Pa=v.getBuffer(Na))?vc=Pa.dtype:"constant"in
Na?(ic=2,"number"===typeof Na.constant?(lc=Na.constant,hd=Wa=ab=0):(lc=0<Na.constant.length?Na.constant[0]:0,hd=1<Na.constant.length?Na.constant[1]:0,Wa=2<Na.constant.length?Na.constant[2]:0,ab=3<Na.constant.length?Na.constant[3]:0)):(Pa=I(Na.buffer)?v.createStream(34962,Na.buffer):v.getBuffer(Na.buffer),vc="type"in Na?ge[Na.type]:Pa.dtype,vb=!!Na.normalized,nb=Na.size|0,Sa=Na.offset|0,Ac=Na.stride|0,ub=Na.divisor|0);Mc=Ea.location;Ab=Ta[Mc];if(1===ic){Ab.buffer||ha.enableVertexAttribArray(Mc);Ya=
nb||1;if(Ab.type!==vc||Ab.size!==Ya||Ab.buffer!==Pa||Ab.normalized!==vb||Ab.offset!==Sa||Ab.stride!==Ac)ha.bindBuffer(34962,Pa.buffer),ha.vertexAttribPointer(Mc,Ya,vc,vb,Ac,Sa),Ab.type=vc,Ab.size=Ya,Ab.buffer=Pa,Ab.normalized=vb,Ab.offset=Sa,Ab.stride=Ac;Ab.divisor!==ub&&(E.vertexAttribDivisorANGLE(Mc,ub),Ab.divisor=ub)}else if(Ab.buffer&&(ha.disableVertexAttribArray(Mc),Ab.buffer=null),Ab.x!==lc||Ab.y!==hd||Ab.z!==Wa||Ab.w!==ab)ha.vertexAttrib4f(Mc,lc,hd,Wa,ab),Ab.x=lc,Ab.y=hd,Ab.z=Wa,Ab.w=ab;Vb=
B.call(this,m,a,0);uc=!1;Wb=null;Qb=0;Kc=!1;Qd=Rb=0;Fc=1;Ed=0;Nc=5126;wc=pc=td=Yc=0;I(Vb)?(uc=!0,Wb=v.createStream(34962,Vb),Nc=Wb.dtype):(Wb=v.getBuffer(Vb))?Nc=Wb.dtype:"constant"in Vb?(Fc=2,"number"===typeof Vb.constant?(td=Vb.constant,pc=wc=Yc=0):(td=0<Vb.constant.length?Vb.constant[0]:0,pc=1<Vb.constant.length?Vb.constant[1]:0,wc=2<Vb.constant.length?Vb.constant[2]:0,Yc=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=I(Vb.buffer)?v.createStream(34962,Vb.buffer):v.getBuffer(Vb.buffer),Nc="type"in
Vb?ge[Vb.type]:Wb.dtype,Kc=!!Vb.normalized,Qd=Vb.size|0,Rb=Vb.offset|0,Ed=Vb.stride|0,Qb=Vb.divisor|0);jc=na.location;cb=Ta[jc];if(1===Fc){cb.buffer||ha.enableVertexAttribArray(jc);tc=Qd||1;if(cb.type!==Nc||cb.size!==tc||cb.buffer!==Wb||cb.normalized!==Kc||cb.offset!==Rb||cb.stride!==Ed)ha.bindBuffer(34962,Wb.buffer),ha.vertexAttribPointer(jc,tc,Nc,Kc,Ed,Rb),cb.type=Nc,cb.size=tc,cb.buffer=Wb,cb.normalized=Kc,cb.offset=Rb,cb.stride=Ed;cb.divisor!==Qb&&(E.vertexAttribDivisorANGLE(jc,Qb),cb.divisor=
Qb)}else if(cb.buffer&&(ha.disableVertexAttribArray(jc),cb.buffer=null),cb.x!==td||cb.y!==pc||cb.z!==wc||cb.w!==Yc)ha.vertexAttrib4f(jc,td,pc,wc,Yc),cb.x=td,cb.y=pc,cb.z=wc,cb.w=Yc;Tb=D.call(this,m,a,0);Xb=!1;fc=null;kc=0;yc=!1;cd=Bc=0;Qc=1;Rc=0;Sc=5126;$c=dd=ld=Zc=0;I(Tb)?(Xb=!0,fc=v.createStream(34962,Tb),Sc=fc.dtype):(fc=v.getBuffer(Tb))?Sc=fc.dtype:"constant"in Tb?(Qc=2,"number"===typeof Tb.constant?(ld=Tb.constant,dd=$c=Zc=0):(ld=0<Tb.constant.length?Tb.constant[0]:0,dd=1<Tb.constant.length?
Tb.constant[1]:0,$c=2<Tb.constant.length?Tb.constant[2]:0,Zc=3<Tb.constant.length?Tb.constant[3]:0)):(fc=I(Tb.buffer)?v.createStream(34962,Tb.buffer):v.getBuffer(Tb.buffer),Sc="type"in Tb?ge[Tb.type]:fc.dtype,yc=!!Tb.normalized,cd=Tb.size|0,Bc=Tb.offset|0,Rc=Tb.stride|0,kc=Tb.divisor|0);mc=n.location;ec=Ta[mc];if(1===Qc){ec.buffer||ha.enableVertexAttribArray(mc);ad=cd||4;if(ec.type!==Sc||ec.size!==ad||ec.buffer!==fc||ec.normalized!==yc||ec.offset!==Bc||ec.stride!==Rc)ha.bindBuffer(34962,fc.buffer),
ha.vertexAttribPointer(mc,ad,Sc,yc,Rc,Bc),ec.type=Sc,ec.size=ad,ec.buffer=fc,ec.normalized=yc,ec.offset=Bc,ec.stride=Rc;ec.divisor!==kc&&(E.vertexAttribDivisorANGLE(mc,kc),ec.divisor=kc)}else if(ec.buffer&&(ha.disableVertexAttribArray(mc),ec.buffer=null),ec.x!==ld||ec.y!==dd||ec.z!==$c||ec.w!==Zc)ha.vertexAttrib4f(mc,ld,dd,$c,Zc),ec.x=ld,ec.y=dd,ec.z=$c,ec.w=Zc;Uc=G.call(this,m,a,0);ed=!1;zc=null;id=0;pd=!1;ye=we=0;jd=1;$e=0;Nd=5126;Kd=Od=ce=he=0;I(Uc)?(ed=!0,zc=v.createStream(34962,Uc),Nd=zc.dtype):
(zc=v.getBuffer(Uc))?Nd=zc.dtype:"constant"in Uc?(jd=2,"number"===typeof Uc.constant?(ce=Uc.constant,Od=Kd=he=0):(ce=0<Uc.constant.length?Uc.constant[0]:0,Od=1<Uc.constant.length?Uc.constant[1]:0,Kd=2<Uc.constant.length?Uc.constant[2]:0,he=3<Uc.constant.length?Uc.constant[3]:0)):(zc=I(Uc.buffer)?v.createStream(34962,Uc.buffer):v.getBuffer(Uc.buffer),Nd="type"in Uc?ge[Uc.type]:zc.dtype,pd=!!Uc.normalized,ye=Uc.size|0,we=Uc.offset|0,$e=Uc.stride|0,id=Uc.divisor|0);Id=za.location;nd=Ta[Id];if(1===jd){nd.buffer||
ha.enableVertexAttribArray(Id);Tc=ye||4;if(nd.type!==Nd||nd.size!==Tc||nd.buffer!==zc||nd.normalized!==pd||nd.offset!==we||nd.stride!==$e)ha.bindBuffer(34962,zc.buffer),ha.vertexAttribPointer(Id,Tc,Nd,pd,$e,we),nd.type=Nd,nd.size=Tc,nd.buffer=zc,nd.normalized=pd,nd.offset=we,nd.stride=$e;nd.divisor!==id&&(E.vertexAttribDivisorANGLE(Id,id),nd.divisor=id)}else if(nd.buffer&&(ha.disableVertexAttribArray(Id),nd.buffer=null),nd.x!==ce||nd.y!==Od||nd.z!==Kd||nd.w!==he)ha.vertexAttrib4f(Id,ce,Od,Kd,he),
nd.x=ce,nd.y=Od,nd.z=Kd,nd.w=he;ud=T.call(this,m,a,0);sd=!1;kd=null;vd=0;Cd=!1;xe=Fd=0;ke=1;Fe=0;le=5126;de=te=ie=je=0;I(ud)?(sd=!0,kd=v.createStream(34962,ud),le=kd.dtype):(kd=v.getBuffer(ud))?le=kd.dtype:"constant"in ud?(ke=2,"number"===typeof ud.constant?(ie=ud.constant,te=de=je=0):(ie=0<ud.constant.length?ud.constant[0]:0,te=1<ud.constant.length?ud.constant[1]:0,de=2<ud.constant.length?ud.constant[2]:0,je=3<ud.constant.length?ud.constant[3]:0)):(kd=I(ud.buffer)?v.createStream(34962,ud.buffer):
v.getBuffer(ud.buffer),le="type"in ud?ge[ud.type]:kd.dtype,Cd=!!ud.normalized,xe=ud.size|0,Fd=ud.offset|0,Fe=ud.stride|0,vd=ud.divisor|0);ne=aa.location;Oc=Ta[ne];if(1===ke){Oc.buffer||ha.enableVertexAttribArray(ne);gd=xe||1;if(Oc.type!==le||Oc.size!==gd||Oc.buffer!==kd||Oc.normalized!==Cd||Oc.offset!==Fd||Oc.stride!==Fe)ha.bindBuffer(34962,kd.buffer),ha.vertexAttribPointer(ne,gd,le,Cd,Fe,Fd),Oc.type=le,Oc.size=gd,Oc.buffer=kd,Oc.normalized=Cd,Oc.offset=Fd,Oc.stride=Fe;Oc.divisor!==vd&&(E.vertexAttribDivisorANGLE(ne,
vd),Oc.divisor=vd)}else if(Oc.buffer&&(ha.disableVertexAttribArray(ne),Oc.buffer=null),Oc.x!==ie||Oc.y!==te||Oc.z!==de||Oc.w!==je)ha.vertexAttrib4f(ne,ie,te,de,je),Oc.x=ie,Oc.y=te,Oc.z=de,Oc.w=je;ha.uniform1i(F.location,!1);ha.uniform1f(Ca.location,m.pixelRatio);ue=x.call(this,m,a,0);ha.uniform2f(ma.location,ue[0],ue[1]);qe=a.scale;ha.uniform2f(xa.location,qe[0],qe[1]);Ld=a.scaleFract;ha.uniform2f(fa.location,Ld[0],Ld[1]);Pd=a.translate;ha.uniform2f(ka.location,Pd[0],Pd[1]);Rd=a.translateFract;ha.uniform2f(pa.location,
Rd[0],Rd[1]);ha.uniform1f(M.location,a.opacity);ha.uniform1i(oa.location,t.bind());Sd=a.elements;oe=null;(oe=(Ge=I(Sd))?wa.createStream(Sd):wa.getElements(Sd))&&ha.bindBuffer(34963,oe.buffer.buffer);Be=a.offset;if(re=a.count)Re=va.instances,0<Re?oe?E.drawElementsInstancedANGLE(0,re,oe.type,Be<<(oe.type-5121>>1),Re):E.drawArraysInstancedANGLE(0,Be,re,Re):0>Re&&(oe?ha.drawElements(0,re,oe.type,Be<<(oe.type-5121>>1)):ha.drawArrays(0,Be,re)),U.dirty=!0,ya.setVAO(null),m.viewportWidth=r,m.viewportHeight=
w,z&&(ba.cpuTime+=performance.now()-qa),Q&&v.destroyStream(K),W&&v.destroyStream(db),Db&&v.destroyStream(wb),La&&v.destroyStream(kb),$b&&v.destroyStream(Pa),uc&&v.destroyStream(Wb),Xb&&v.destroyStream(fc),ed&&v.destroyStream(zc),sd&&v.destroyStream(kd),t.unbind(),Ge&&wa.destroyStream(oe)},scope:function(f,d,n){var k,p,q,ja,g,A,F,O,M,z,Q,fa,K,ha,J,Yb,t,Ba,la,x,L,D,Y,aa,ya,H,xa,B,oa,za,G,T,da,ka,X,ea,Ta,pa,sa,Ea,Aa,na,ta,ma,ua,Ca,Hb,db,W,Da,Ha,mb,Bd,Sb,ia,Ra,ac,bc,Wd,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,
sb,Oa,qd,Qa,Kb,Eb,Ma,xd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,fb,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Vd,Fc,me,Nc,Yc,ze,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd,pe,zd,jd,fe,Nd,he,ce,Od,Kd,Id,nd,Tc,ud,sd,kd,vd,Cd,Fd,xe,ke,Fe,le,je,ie,te,de,ne,Oc,gd,ue,qe,Ld,Pd,Rd,Sd,oe,Ge,Be,re,Re,Se,Oe,ve,He,Je,Ke,Le,Ie,Md,Xd,be,ee,Me,Jd,Td,De,Ne,pg,bf,Te,Pe,af,Xe,Ue,Ve,Ud,$d,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,
Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;k=f.viewport;p=k.x|0;q=k.y|0;ja="width"in k?k.width|0:m.framebufferWidth-p;g="height"in k?k.height|0:m.framebufferHeight-q;A=m.viewportWidth;m.viewportWidth=ja;F=m.viewportHeight;m.viewportHeight=g;O=Dd[0];Dd[0]=p;M=Dd[1];Dd[1]=q;z=Dd[2];Dd[2]=ja;Q=Dd[3];Dd[3]=g;fa=Ga[0];Ga[0]=0;K=Ga[1];Ga[1]=0;ha=Ga[2];Ga[2]=0;J=Ga[3];
Ga[3]=1;Yb=ra.blend_enable;ra.blend_enable=!0;t=Ja[0];Ja[0]=770;Ba=Ja[1];Ja[1]=771;la=Ja[2];Ja[2]=773;x=Ja[3];Ja[3]=1;L=ra.depth_enable;ra.depth_enable=!1;D=f.viewport;Y=D.x|0;aa=D.y|0;ya="width"in D?D.width|0:m.framebufferWidth-Y;H="height"in D?D.height|0:m.framebufferHeight-aa;xa=Gd[0];Gd[0]=Y;B=Gd[1];Gd[1]=aa;oa=Gd[2];Gd[2]=ya;za=Gd[3];Gd[3]=H;G=ra.scissor_enable;ra.scissor_enable=!0;T=ra.stencil_enable;ra.stencil_enable=!1;if(da=U.profile)ka=performance.now(),ba.count++;X=f.elements;ea=null;ea=
(Ta=I(X))?wa.createStream(X):wa.getElements(X);pa=va.elements;va.elements=ea;sa=f.offset;Ea=va.offset;va.offset=sa;Aa=f.count;na=va.count;va.count=Aa;ta=va.primitive;va.primitive=0;ma=qa[45];qa[45]=!1;ua=f.markerTexture;Ca=qa[48];qa[48]=ua;Hb=f.opacity;db=qa[10];qa[10]=Hb;W=l.call(this,m,f,n);Da=qa[46];qa[46]=W;Ha=qa[47];qa[47]=ca;mb=m.pixelRatio;Bd=qa[34];qa[34]=mb;Sb=f.scale;ia=qa[6];qa[6]=Sb;Ra=f.scaleFract;ac=qa[7];qa[7]=Ra;bc=f.translate;Wd=qa[8];qa[8]=bc;ib=f.translateFract;pb=qa[9];qa[9]=ib;
Ia=u.call(this,m,f,n);rb=!1;Ka=null;eb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=qd=Oa=0;I(Ia)?(rb=!0,Ka=v.createStream(34962,Ia),sb=Ka.dtype):(Ka=v.getBuffer(Ia))?sb=Ka.dtype:"constant"in Ia?(Va=2,"number"===typeof Ia.constant?(qd=Ia.constant,Qa=Kb=Oa=0):(qd=0<Ia.constant.length?Ia.constant[0]:0,Qa=1<Ia.constant.length?Ia.constant[1]:0,Kb=2<Ia.constant.length?Ia.constant[2]:0,Oa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=I(Ia.buffer)?v.createStream(34962,Ia.buffer):v.getBuffer(Ia.buffer),sb="type"in
Ia?ge[Ia.type]:Ka.dtype,gb=!!Ia.normalized,kb=Ia.size|0,La=Ia.offset|0,tb=Ia.stride|0,eb=Ia.divisor|0);Eb=N.buffer;N.buffer=Ka;Ma=N.divisor;N.divisor=eb;xd=N.normalized;N.normalized=gb;Xa=N.offset;N.offset=La;Lb=N.size;N.size=kb;Mb=N.state;N.state=Va;lb=N.stride;N.stride=tb;Na=N.type;N.type=sb;$b=N.w;N.w=Oa;Pa=N.x;N.x=qd;ub=N.y;N.y=Qa;vb=N.z;N.z=Kb;Sa=y.call(this,m,f,n);nb=!1;ic=null;Ac=0;vc=!1;lc=ab=0;fb=1;Wa=0;Mc=5126;uc=Vb=Ya=Ab=0;I(Sa)?(nb=!0,ic=v.createStream(34962,Sa),Mc=ic.dtype):(ic=v.getBuffer(Sa))?
Mc=ic.dtype:"constant"in Sa?(fb=2,"number"===typeof Sa.constant?(Ya=Sa.constant,Vb=uc=Ab=0):(Ya=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(ic=I(Sa.buffer)?v.createStream(34962,Sa.buffer):v.getBuffer(Sa.buffer),Mc="type"in Sa?ge[Sa.type]:ic.dtype,vc=!!Sa.normalized,lc=Sa.size|0,ab=Sa.offset|0,Wa=Sa.stride|0,Ac=Sa.divisor|0);Wb=P.buffer;P.buffer=ic;Qb=P.divisor;P.divisor=Ac;Kc=P.normalized;
P.normalized=vc;Rb=P.offset;P.offset=ab;Vd=P.size;P.size=lc;Fc=P.state;P.state=fb;me=P.stride;P.stride=Wa;Nc=P.type;P.type=Mc;Yc=P.w;P.w=Ab;ze=P.x;P.x=Ya;pc=P.y;P.y=Vb;wc=P.z;P.z=uc;jc=ga.call(this,m,f,n);cb=!1;tc=null;Tb=0;Xb=!1;kc=fc=0;yc=1;Bc=0;cd=5126;Zc=Sc=Rc=Qc=0;I(jc)?(cb=!0,tc=v.createStream(34962,jc),cd=tc.dtype):(tc=v.getBuffer(jc))?cd=tc.dtype:"constant"in jc?(yc=2,"number"===typeof jc.constant?(Rc=jc.constant,Sc=Zc=Qc=0):(Rc=0<jc.constant.length?jc.constant[0]:0,Sc=1<jc.constant.length?
jc.constant[1]:0,Zc=2<jc.constant.length?jc.constant[2]:0,Qc=3<jc.constant.length?jc.constant[3]:0)):(tc=I(jc.buffer)?v.createStream(34962,jc.buffer):v.getBuffer(jc.buffer),cd="type"in jc?ge[jc.type]:tc.dtype,Xb=!!jc.normalized,kc=jc.size|0,fc=jc.offset|0,Bc=jc.stride|0,Tb=jc.divisor|0);ld=c.buffer;c.buffer=tc;dd=c.divisor;c.divisor=Tb;$c=c.normalized;c.normalized=Xb;mc=c.offset;c.offset=fc;ec=c.size;c.size=kc;ad=c.state;c.state=yc;Uc=c.stride;c.stride=Bc;ed=c.type;c.type=cd;zc=c.w;c.w=Qc;id=c.x;
c.x=Rc;pd=c.y;c.y=Sc;pe=c.z;c.z=Zc;zd=b.call(this,m,f,n);jd=!1;fe=null;Nd=0;he=!1;Od=ce=0;Kd=1;Id=0;nd=5126;kd=sd=ud=Tc=0;I(zd)?(jd=!0,fe=v.createStream(34962,zd),nd=fe.dtype):(fe=v.getBuffer(zd))?nd=fe.dtype:"constant"in zd?(Kd=2,"number"===typeof zd.constant?(ud=zd.constant,sd=kd=Tc=0):(ud=0<zd.constant.length?zd.constant[0]:0,sd=1<zd.constant.length?zd.constant[1]:0,kd=2<zd.constant.length?zd.constant[2]:0,Tc=3<zd.constant.length?zd.constant[3]:0)):(fe=I(zd.buffer)?v.createStream(34962,zd.buffer):
v.getBuffer(zd.buffer),nd="type"in zd?ge[zd.type]:fe.dtype,he=!!zd.normalized,Od=zd.size|0,ce=zd.offset|0,Id=zd.stride|0,Nd=zd.divisor|0);vd=S.buffer;S.buffer=fe;Cd=S.divisor;S.divisor=Nd;Fd=S.normalized;S.normalized=he;xe=S.offset;S.offset=ce;ke=S.size;S.size=Od;Fe=S.state;S.state=Kd;le=S.stride;S.stride=Id;je=S.type;S.type=nd;ie=S.w;S.w=Tc;te=S.x;S.x=ud;de=S.y;S.y=sd;ne=S.z;S.z=kd;Oc=r.call(this,m,f,n);gd=!1;ue=null;qe=0;Ld=!1;Rd=Pd=0;Sd=1;oe=0;Ge=5126;Se=Re=re=Be=0;I(Oc)?(gd=!0,ue=v.createStream(34962,
Oc),Ge=ue.dtype):(ue=v.getBuffer(Oc))?Ge=ue.dtype:"constant"in Oc?(Sd=2,"number"===typeof Oc.constant?(re=Oc.constant,Re=Se=Be=0):(re=0<Oc.constant.length?Oc.constant[0]:0,Re=1<Oc.constant.length?Oc.constant[1]:0,Se=2<Oc.constant.length?Oc.constant[2]:0,Be=3<Oc.constant.length?Oc.constant[3]:0)):(ue=I(Oc.buffer)?v.createStream(34962,Oc.buffer):v.getBuffer(Oc.buffer),Ge="type"in Oc?ge[Oc.type]:ue.dtype,Ld=!!Oc.normalized,Rd=Oc.size|0,Pd=Oc.offset|0,oe=Oc.stride|0,qe=Oc.divisor|0);Oe=Z.buffer;Z.buffer=
ue;ve=Z.divisor;Z.divisor=qe;He=Z.normalized;Z.normalized=Ld;Je=Z.offset;Z.offset=Pd;Ke=Z.size;Z.size=Rd;Le=Z.state;Z.state=Sd;Ie=Z.stride;Z.stride=oe;Md=Z.type;Z.type=Ge;Xd=Z.w;Z.w=Be;be=Z.x;Z.x=re;ee=Z.y;Z.y=Re;Me=Z.z;Z.z=Se;Jd=h.call(this,m,f,n);Td=!1;De=null;Ne=0;pg=!1;Te=bf=0;Pe=1;af=0;Xe=5126;$d=Ud=Ve=Ue=0;I(Jd)?(Td=!0,De=v.createStream(34962,Jd),Xe=De.dtype):(De=v.getBuffer(Jd))?Xe=De.dtype:"constant"in Jd?(Pe=2,"number"===typeof Jd.constant?(Ve=Jd.constant,Ud=$d=Ue=0):(Ve=0<Jd.constant.length?
Jd.constant[0]:0,Ud=1<Jd.constant.length?Jd.constant[1]:0,$d=2<Jd.constant.length?Jd.constant[2]:0,Ue=3<Jd.constant.length?Jd.constant[3]:0)):(De=I(Jd.buffer)?v.createStream(34962,Jd.buffer):v.getBuffer(Jd.buffer),Xe="type"in Jd?ge[Jd.type]:De.dtype,pg=!!Jd.normalized,Te=Jd.size|0,bf=Jd.offset|0,af=Jd.stride|0,Ne=Jd.divisor|0);We=w.buffer;w.buffer=De;jf=w.divisor;w.divisor=Ne;nf=w.normalized;w.normalized=pg;ef=w.offset;w.offset=bf;kf=w.size;w.size=Te;lf=w.state;w.state=Pe;mf=w.stride;w.stride=af;
rf=w.type;w.type=Xe;of=w.w;w.w=Ue;sf=w.x;w.x=Ve;Bf=w.y;w.y=Ud;Cf=w.z;w.z=$d;Qe=V.call(this,m,f,n);Ee=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;I(Qe)?(Ee=!0,pf=v.createStream(34962,Qe),wf=pf.dtype):(pf=v.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(pf=
I(Qe.buffer)?v.createStream(34962,Qe.buffer):v.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:pf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=E.buffer;E.buffer=pf;Jf=E.divisor;E.divisor=qf;Kf=E.normalized;E.normalized=Df;Lf=E.offset;E.offset=Gf;tf=E.size;E.size=Af;Qf=E.state;E.state=Ef;Hf=E.stride;E.stride=Ff;uf=E.type;E.type=wf;cg=E.w;E.w=xf;Rf=E.x;E.x=vf;Sf=E.y;E.y=yf;qg=E.z;E.z=zf;ff=C.call(this,m,f,n);cf=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;
Yf=Xf=Wf=Tf=0;I(ff)?(cf=!0,Mf=v.createStream(34962,ff),Vf=Mf.dtype):(Mf=v.getBuffer(ff))?Vf=Mf.dtype:"constant"in ff?(gg=2,"number"===typeof ff.constant?(Wf=ff.constant,Xf=Yf=Tf=0):(Wf=0<ff.constant.length?ff.constant[0]:0,Xf=1<ff.constant.length?ff.constant[1]:0,Yf=2<ff.constant.length?ff.constant[2]:0,Tf=3<ff.constant.length?ff.constant[3]:0)):(Mf=I(ff.buffer)?v.createStream(34962,ff.buffer):v.getBuffer(ff.buffer),Vf="type"in ff?ge[ff.type]:Mf.dtype,dg=!!ff.normalized,fg=ff.size|0,eg=ff.offset|
0,hg=ff.stride|0,Nf=ff.divisor|0);ig=e.buffer;e.buffer=Mf;rg=e.divisor;e.divisor=Nf;sg=e.normalized;e.normalized=dg;tg=e.offset;e.offset=eg;ug=e.size;e.size=fg;vg=e.state;e.state=gg;wg=e.stride;e.stride=hg;xg=e.type;e.type=Vf;yg=e.w;e.w=Tf;zg=e.x;e.x=Wf;Ag=e.y;e.y=Xf;Bg=e.z;e.z=Yf;gf=R.call(this,m,f,n);df=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;I(gf)?(df=!0,Of=v.createStream(34962,gf),Zf=Of.dtype):(Of=v.getBuffer(gf))?Zf=Of.dtype:"constant"in gf?(mg=2,"number"===typeof gf.constant?
($f=gf.constant,ag=bg=Uf=0):($f=0<gf.constant.length?gf.constant[0]:0,ag=1<gf.constant.length?gf.constant[1]:0,bg=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Of=I(gf.buffer)?v.createStream(34962,gf.buffer):v.getBuffer(gf.buffer),Zf="type"in gf?ge[gf.type]:Of.dtype,jg=!!gf.normalized,lg=gf.size|0,kg=gf.offset|0,ng=gf.stride|0,Pf=gf.divisor|0);og=a.buffer;a.buffer=Of;Cg=a.divisor;a.divisor=Pf;Dg=a.normalized;a.normalized=jg;Eg=a.offset;a.offset=kg;Fg=a.size;a.size=
lg;Gg=a.state;a.state=mg;Hg=a.stride;a.stride=ng;Ig=a.type;a.type=Zf;Jg=a.w;a.w=Uf;Kg=a.x;a.x=$f;Lg=a.y;a.y=ag;Mg=a.z;a.z=bg;Ng=Fa.vert;Fa.vert=59;Og=Fa.frag;Fa.frag=58;U.dirty=!0;d(m,f,n);m.viewportWidth=A;m.viewportHeight=F;Dd[0]=O;Dd[1]=M;Dd[2]=z;Dd[3]=Q;Ga[0]=fa;Ga[1]=K;Ga[2]=ha;Ga[3]=J;ra.blend_enable=Yb;Ja[0]=t;Ja[1]=Ba;Ja[2]=la;Ja[3]=x;ra.depth_enable=L;Gd[0]=xa;Gd[1]=B;Gd[2]=oa;Gd[3]=za;ra.scissor_enable=G;ra.stencil_enable=T;da&&(ba.cpuTime+=performance.now()-ka);Ta&&wa.destroyStream(ea);
va.elements=pa;va.offset=Ea;va.count=na;va.primitive=ta;qa[45]=ma;qa[48]=Ca;qa[10]=db;qa[46]=Da;qa[47]=Ha;qa[34]=Bd;qa[6]=ia;qa[7]=ac;qa[8]=Wd;qa[9]=pb;rb&&v.destroyStream(Ka);N.buffer=Eb;N.divisor=Ma;N.normalized=xd;N.offset=Xa;N.size=Lb;N.state=Mb;N.stride=lb;N.type=Na;N.w=$b;N.x=Pa;N.y=ub;N.z=vb;nb&&v.destroyStream(ic);P.buffer=Wb;P.divisor=Qb;P.normalized=Kc;P.offset=Rb;P.size=Vd;P.state=Fc;P.stride=me;P.type=Nc;P.w=Yc;P.x=ze;P.y=pc;P.z=wc;cb&&v.destroyStream(tc);c.buffer=ld;c.divisor=dd;c.normalized=
$c;c.offset=mc;c.size=ec;c.state=ad;c.stride=Uc;c.type=ed;c.w=zc;c.x=id;c.y=pd;c.z=pe;jd&&v.destroyStream(fe);S.buffer=vd;S.divisor=Cd;S.normalized=Fd;S.offset=xe;S.size=ke;S.state=Fe;S.stride=le;S.type=je;S.w=ie;S.x=te;S.y=de;S.z=ne;gd&&v.destroyStream(ue);Z.buffer=Oe;Z.divisor=ve;Z.normalized=He;Z.offset=Je;Z.size=Ke;Z.state=Le;Z.stride=Ie;Z.type=Md;Z.w=Xd;Z.x=be;Z.y=ee;Z.z=Me;Td&&v.destroyStream(De);w.buffer=We;w.divisor=jf;w.normalized=nf;w.offset=ef;w.size=kf;w.state=lf;w.stride=mf;w.type=rf;
w.w=of;w.x=sf;w.y=Bf;w.z=Cf;Ee&&v.destroyStream(pf);E.buffer=If;E.divisor=Jf;E.normalized=Kf;E.offset=Lf;E.size=tf;E.state=Qf;E.stride=Hf;E.type=uf;E.w=cg;E.x=Rf;E.y=Sf;E.z=qg;cf&&v.destroyStream(Mf);e.buffer=ig;e.divisor=rg;e.normalized=sg;e.offset=tg;e.size=ug;e.state=vg;e.stride=wg;e.type=xg;e.w=yg;e.x=zg;e.y=Ag;e.z=Bg;df&&v.destroyStream(Of);a.buffer=og;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Fa.vert=Ng;Fa.frag=Og;U.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,db,X,ea){var Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,W,Hb,ha,I,ra,Fa,qa,ya,Ga,la,Y;Q=d.attributes;O=d.buffer;z=d.context;p=d.current;L=d.draw;K=d.elements;za=d.extensions;na=d.framebuffer;n=d.gl;F=d.isBufferArgs;aa=d.next;M=d.shader;
ma=d.uniforms;oa=d.vao;Ca=aa.blend_color;xa=p.blend_color;fa=aa.blend_equation;Ea=p.blend_equation;ka=aa.blend_func;pa=p.blend_func;Aa=aa.colorMask;Ba=p.colorMask;ja=aa.depth_range;Yb=p.depth_range;Ta=aa.polygonOffset_offset;v=p.polygonOffset_offset;m=aa.sample_coverage;U=p.sample_coverage;va=aa.scissor_box;wa=p.scissor_box;W=aa.stencil_func;Hb=p.stencil_func;ha=aa.stencil_opBack;I=p.stencil_opBack;ra=aa.stencil_opFront;Fa=p.stencil_opFront;qa=aa.viewport;ya=p.viewport;Ga={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(f,d){var k,q,g,u,M,qa,J,t,x,D,l,H,B;k=na.next;k!==na.cur&&(k?n.bindFramebuffer(36160,k.framebuffer):n.bindFramebuffer(36160,null),na.cur=k);if(p.dirty){var G,T,ka,ca,ma,Ca,ia,fb,Ce,Ye,Ze,Hd,Ae,se,Yd,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc;G=aa.dither;G!==p.dither&&(G?n.enable(3024):n.disable(3024),p.dither=G);T=fa[0];ka=fa[1];if(T!==Ea[0]||
ka!==Ea[1])n.blendEquationSeparate(T,ka),Ea[0]=T,Ea[1]=ka;ca=aa.depth_func;ca!==p.depth_func&&(n.depthFunc(ca),p.depth_func=ca);ma=ja[0];Ca=ja[1];if(ma!==Yb[0]||Ca!==Yb[1])n.depthRange(ma,Ca),Yb[0]=ma,Yb[1]=Ca;ia=aa.depth_mask;ia!==p.depth_mask&&(n.depthMask(ia),p.depth_mask=ia);fb=Aa[0];Ce=Aa[1];Ye=Aa[2];Ze=Aa[3];if(fb!==Ba[0]||Ce!==Ba[1]||Ye!==Ba[2]||Ze!==Ba[3])n.colorMask(fb,Ce,Ye,Ze),Ba[0]=fb,Ba[1]=Ce,Ba[2]=Ye,Ba[3]=Ze;Hd=aa.cull_enable;Hd!==p.cull_enable&&(Hd?n.enable(2884):n.disable(2884),p.cull_enable=
Hd);Ae=aa.cull_face;Ae!==p.cull_face&&(n.cullFace(Ae),p.cull_face=Ae);se=aa.frontFace;se!==p.frontFace&&(n.frontFace(se),p.frontFace=se);Yd=aa.lineWidth;Yd!==p.lineWidth&&(n.lineWidth(Yd),p.lineWidth=Yd);Ad=aa.polygonOffset_enable;Ad!==p.polygonOffset_enable&&(Ad?n.enable(32823):n.disable(32823),p.polygonOffset_enable=Ad);Zd=Ta[0];md=Ta[1];if(Zd!==v[0]||md!==v[1])n.polygonOffset(Zd,md),v[0]=Zd,v[1]=md;bd=aa.sample_alpha;bd!==p.sample_alpha&&(bd?n.enable(32926):n.disable(32926),p.sample_alpha=bd);
rd=aa.sample_enable;rd!==p.sample_enable&&(rd?n.enable(32928):n.disable(32928),p.sample_enable=rd);Lc=m[0];od=m[1];if(Lc!==U[0]||od!==U[1])n.sampleCoverage(Lc,od),U[0]=Lc,U[1]=od;Gc=aa.stencil_mask;Gc!==p.stencil_mask&&(n.stencilMask(Gc),p.stencil_mask=Gc);fd=W[0];Pc=W[1];Wc=W[2];if(fd!==Hb[0]||Pc!==Hb[1]||Wc!==Hb[2])n.stencilFunc(fd,Pc,Wc),Hb[0]=fd,Hb[1]=Pc,Hb[2]=Wc;Bb=ra[0];Fb=ra[1];Dc=ra[2];xb=ra[3];if(Bb!==Fa[0]||Fb!==Fa[1]||Dc!==Fa[2]||xb!==Fa[3])n.stencilOpSeparate(Bb,Fb,Dc,xb),Fa[0]=Bb,Fa[1]=
Fb,Fa[2]=Dc,Fa[3]=xb;xc=ha[0];Cb=ha[1];Jc=ha[2];nc=ha[3];if(xc!==I[0]||Cb!==I[1]||Jc!==I[2]||nc!==I[3])n.stencilOpSeparate(xc,Cb,Jc,nc),I[0]=xc,I[1]=Cb,I[2]=Jc,I[3]=nc;Hc=aa.scissor_enable;Hc!==p.scissor_enable&&(Hc?n.enable(3089):n.disable(3089),p.scissor_enable=Hc);Xc=va[0];Vc=va[1];Ec=va[2];gc=va[3];if(Xc!==wa[0]||Vc!==wa[1]||Ec!==wa[2]||gc!==wa[3])n.scissor(Xc,Vc,Ec,gc),wa[0]=Xc,wa[1]=Vc,wa[2]=Ec,wa[3]=gc}q=this.viewport;g=q.x|0;u=q.y|0;M="width"in q?q.width|0:z.framebufferWidth-g;qa="height"in
q?q.height|0:z.framebufferHeight-u;J=z.viewportWidth;z.viewportWidth=M;t=z.viewportHeight;z.viewportHeight=qa;n.viewport(g,u,M,qa);ya[0]=g;ya[1]=u;ya[2]=M;ya[3]=qa;n.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;n.enable(3042);p.blend_enable=!0;n.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;n.disable(2929);p.depth_enable=!1;n.disable(2960);p.stencil_enable=!1;if(x=p.profile)D=performance.now(),ba.count+=d;n.useProgram(N.program);l=za.angle_instanced_arrays;var Ic,qc,
rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb;oa.setVAO(null);Y.buffer=this.sizeBuffer;Ic=!1;qc=null;rc=0;oc=!1;Za=hc=0;cc=1;yb=0;bb=5126;Ua=ob=$a=Nb=0;F(Y)?(Ic=!0,qc=O.createStream(34962,Y),bb=qc.dtype):(qc=O.getBuffer(Y))?bb=qc.dtype:"constant"in Y?(cc=2,"number"===typeof Y.constant?($a=Y.constant,ob=Ua=Nb=0):($a=0<Y.constant.length?Y.constant[0]:
0,ob=1<Y.constant.length?Y.constant[1]:0,Ua=2<Y.constant.length?Y.constant[2]:0,Nb=3<Y.constant.length?Y.constant[3]:0)):(qc=F(Y.buffer)?O.createStream(34962,Y.buffer):O.getBuffer(Y.buffer),bb="type"in Y?Ga[Y.type]:qc.dtype,oc=!!Y.normalized,Za=Y.size|0,hc=Y.offset|0,yb=Y.stride|0,rc=Y.divisor|0);yd=ea.location;Ib=Q[yd];if(1===cc){Ib.buffer||n.enableVertexAttribArray(yd);Jb=Za||1;if(Ib.type!==bb||Ib.size!==Jb||Ib.buffer!==qc||Ib.normalized!==oc||Ib.offset!==hc||Ib.stride!==yb)n.bindBuffer(34962,qc.buffer),
n.vertexAttribPointer(yd,Jb,bb,oc,yb,hc),Ib.type=bb,Ib.size=Jb,Ib.buffer=qc,Ib.normalized=oc,Ib.offset=hc,Ib.stride=yb;Ib.divisor!==rc&&(l.vertexAttribDivisorANGLE(yd,rc),Ib.divisor=rc)}else if(Ib.buffer&&(n.disableVertexAttribArray(yd),Ib.buffer=null),Ib.x!==$a||Ib.y!==ob||Ib.z!==Ua||Ib.w!==Nb)n.vertexAttrib4f(yd,$a,ob,Ua,Nb),Ib.x=$a,Ib.y=ob,Ib.z=Ua,Ib.w=Nb;la.buffer=this.sizeBuffer;sc=!1;Ob=null;jb=0;Gb=!1;wb=Db=0;hb=1;Zb=0;Pb=5126;zb=Ub=Ra=qb=0;F(la)?(sc=!0,Ob=O.createStream(34962,la),Pb=Ob.dtype):
(Ob=O.getBuffer(la))?Pb=Ob.dtype:"constant"in la?(hb=2,"number"===typeof la.constant?(Ra=la.constant,Ub=zb=qb=0):(Ra=0<la.constant.length?la.constant[0]:0,Ub=1<la.constant.length?la.constant[1]:0,zb=2<la.constant.length?la.constant[2]:0,qb=3<la.constant.length?la.constant[3]:0)):(Ob=F(la.buffer)?O.createStream(34962,la.buffer):O.getBuffer(la.buffer),Pb="type"in la?Ga[la.type]:Ob.dtype,Gb=!!la.normalized,wb=la.size|0,Db=la.offset|0,Zb=la.stride|0,jb=la.divisor|0);dc=E.location;ib=Q[dc];if(1===hb){ib.buffer||
n.enableVertexAttribArray(dc);pb=wb||1;if(ib.type!==Pb||ib.size!==pb||ib.buffer!==Ob||ib.normalized!==Gb||ib.offset!==Db||ib.stride!==Zb)n.bindBuffer(34962,Ob.buffer),n.vertexAttribPointer(dc,pb,Pb,Gb,Zb,Db),ib.type=Pb,ib.size=pb,ib.buffer=Ob,ib.normalized=Gb,ib.offset=Db,ib.stride=Zb;ib.divisor!==jb&&(l.vertexAttribDivisorANGLE(dc,jb),ib.divisor=jb)}else if(ib.buffer&&(n.disableVertexAttribArray(dc),ib.buffer=null),ib.x!==Ra||ib.y!==Ub||ib.z!==zb||ib.w!==qb)n.vertexAttrib4f(dc,Ra,Ub,zb,qb),ib.x=
Ra,ib.y=Ub,ib.z=zb,ib.w=qb;Ia=this.charBuffer;rb=!1;Ka=null;eb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=Cc=Oa=0;F(Ia)?(rb=!0,Ka=O.createStream(34962,Ia),sb=Ka.dtype):(Ka=O.getBuffer(Ia))?sb=Ka.dtype:"constant"in Ia?(Va=2,"number"===typeof Ia.constant?(Cc=Ia.constant,Qa=Kb=Oa=0):(Cc=0<Ia.constant.length?Ia.constant[0]:0,Qa=1<Ia.constant.length?Ia.constant[1]:0,Kb=2<Ia.constant.length?Ia.constant[2]:0,Oa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=F(Ia.buffer)?O.createStream(34962,Ia.buffer):O.getBuffer(Ia.buffer),
sb="type"in Ia?Ga[Ia.type]:Ka.dtype,gb=!!Ia.normalized,kb=Ia.size|0,La=Ia.offset|0,tb=Ia.stride|0,eb=Ia.divisor|0);Eb=V.location;Ma=Q[Eb];if(1===Va){Ma.buffer||n.enableVertexAttribArray(Eb);wd=kb||1;if(Ma.type!==sb||Ma.size!==wd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)n.bindBuffer(34962,Ka.buffer),n.vertexAttribPointer(Eb,wd,sb,gb,tb,La),Ma.type=sb,Ma.size=wd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==eb&&(l.vertexAttribDivisorANGLE(Eb,eb),Ma.divisor=
eb)}else if(Ma.buffer&&(n.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)n.vertexAttrib4f(Eb,Cc,Qa,Kb,Oa),Ma.x=Cc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Xa=this.position;Lb=!1;Mb=null;lb=0;Na=!1;Pa=$b=0;ub=1;vb=0;Sa=5126;vc=Ac=ic=nb=0;F(Xa)?(Lb=!0,Mb=O.createStream(34962,Xa),Sa=Mb.dtype):(Mb=O.getBuffer(Xa))?Sa=Mb.dtype:"constant"in Xa?(ub=2,"number"===typeof Xa.constant?(ic=Xa.constant,Ac=vc=nb=0):(ic=0<Xa.constant.length?Xa.constant[0]:0,Ac=1<Xa.constant.length?Xa.constant[1]:
0,vc=2<Xa.constant.length?Xa.constant[2]:0,nb=3<Xa.constant.length?Xa.constant[3]:0)):(Mb=F(Xa.buffer)?O.createStream(34962,Xa.buffer):O.getBuffer(Xa.buffer),Sa="type"in Xa?Ga[Xa.type]:Mb.dtype,Na=!!Xa.normalized,Pa=Xa.size|0,$b=Xa.offset|0,vb=Xa.stride|0,lb=Xa.divisor|0);ab=sa.location;lc=Q[ab];if(1===ub){lc.buffer||n.enableVertexAttribArray(ab);hd=Pa||2;if(lc.type!==Sa||lc.size!==hd||lc.buffer!==Mb||lc.normalized!==Na||lc.offset!==$b||lc.stride!==vb)n.bindBuffer(34962,Mb.buffer),n.vertexAttribPointer(ab,
hd,Sa,Na,vb,$b),lc.type=Sa,lc.size=hd,lc.buffer=Mb,lc.normalized=Na,lc.offset=$b,lc.stride=vb;lc.divisor!==lb&&(l.vertexAttribDivisorANGLE(ab,lb),lc.divisor=lb)}else if(lc.buffer&&(n.disableVertexAttribArray(ab),lc.buffer=null),lc.x!==ic||lc.y!==Ac||lc.z!==vc||lc.w!==nb)n.vertexAttrib4f(ab,ic,Ac,vc,nb),lc.x=ic,lc.y=Ac,lc.z=vc,lc.w=nb;Wa=this.viewportArray;n.uniform4f(X.location,Wa[0],Wa[1],Wa[2],Wa[3]);Mc=this.scale;n.uniform2f(ta.location,Mc[0],Mc[1]);Ab=this.translate;n.uniform2f(db.location,Ab[0],
Ab[1]);(Ya=L.elements)?n.bindBuffer(34963,Ya.buffer.buffer):oa.currentVAO&&(Ya=K.getElements(oa.currentVAO.elements))&&n.bindBuffer(34963,Ya.buffer.buffer);Vb=L.instances;for(H=0;H<d;++H){B=f[H];var uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id,pd;uc=y.call(this,z,B,H);H&&Wb===uc||(Wb=uc,n.uniform1f(C.location,uc));Qb=P.call(this,z,B,H);H&&Kc===Qb||(Kc=Qb,n.uniform1f(R.location,Qb));Rb=B.align;H&&Qd===Rb||(Qd=Rb,n.uniform1f(S.location,
Rb));Fc=B.baseline;H&&Ed===Fc||(Ed=Fc,n.uniform1f(w.location,Fc));Nc=B.color;Yc=Nc[0];pc=Nc[1];jc=Nc[2];tc=Nc[3];H&&td===Yc&&wc===pc&&cb===jc&&Tb===tc||(td=Yc,wc=pc,cb=jc,Tb=tc,n.uniform4f(e.location,Yc,pc,jc,tc));Xb=ga.call(this,z,B,H);fc=Xb[0];yc=Xb[1];H&&kc===fc&&Bc===yc||(kc=fc,Bc=yc,n.uniform2f(h.location,fc,yc));cd=c.call(this,z,B,H);Qc=cd[0];Sc=cd[1];H&&Rc===Qc&&Zc===Sc||(Rc=Qc,Zc=Sc,n.uniform2f(Z.location,Qc,Sc));ld=B.positionOffset;dd=ld[0];mc=ld[1];H&&$c===dd&&ec===mc||($c=dd,ec=mc,n.uniform2f(A.location,
dd,mc));ad=B.opacity;H&&Uc===ad||(Uc=ad,n.uniform1f(a.location,ad));(ed=b.call(this,z,B,H))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);zc=ed._texture;n.uniform1i(r.location,zc.bind());id=B.offset;if(pd=B.count)0<Vb?Ya?l.drawElementsInstancedANGLE(0,pd,Ya.type,id<<(Ya.type-5121>>1),Vb):l.drawArraysInstancedANGLE(0,id,pd,Vb):0>Vb&&(Ya?n.drawElements(0,pd,Ya.type,id<<(Ya.type-5121>>1)):n.drawArrays(0,id,pd)),zc.unbind()}Ic&&O.destroyStream(qc);sc&&O.destroyStream(Ob);rb&&O.destroyStream(Ka);Lb&&
O.destroyStream(Mb);p.dirty=!0;oa.setVAO(null);z.viewportWidth=J;z.viewportHeight=t;x&&(ba.cpuTime+=performance.now()-D)},draw:function(b){var c,d,u,M,y,qa,t,x,D,l,B,P,G,N,T,ka,ga,ca,ma,Ca,ia,fb,Ce,Ye,Ze,Hd,Ae,se,Yd,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob,Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb;c=na.next;c!==na.cur&&(c?n.bindFramebuffer(36160,c.framebuffer):n.bindFramebuffer(36160,null),na.cur=
c);if(p.dirty){var Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc;Va=aa.dither;Va!==p.dither&&(Va?n.enable(3024):n.disable(3024),p.dither=Va);tb=fa[0];sb=fa[1];if(tb!==Ea[0]||sb!==Ea[1])n.blendEquationSeparate(tb,sb),Ea[0]=tb,Ea[1]=sb;Oa=aa.depth_func;Oa!==p.depth_func&&(n.depthFunc(Oa),p.depth_func=Oa);Cc=ja[0];Qa=ja[1];if(Cc!==Yb[0]||Qa!==Yb[1])n.depthRange(Cc,Qa),Yb[0]=Cc,Yb[1]=Qa;Kb=aa.depth_mask;Kb!==p.depth_mask&&(n.depthMask(Kb),
p.depth_mask=Kb);Eb=Aa[0];Ma=Aa[1];wd=Aa[2];Xa=Aa[3];if(Eb!==Ba[0]||Ma!==Ba[1]||wd!==Ba[2]||Xa!==Ba[3])n.colorMask(Eb,Ma,wd,Xa),Ba[0]=Eb,Ba[1]=Ma,Ba[2]=wd,Ba[3]=Xa;Lb=aa.cull_enable;Lb!==p.cull_enable&&(Lb?n.enable(2884):n.disable(2884),p.cull_enable=Lb);Mb=aa.cull_face;Mb!==p.cull_face&&(n.cullFace(Mb),p.cull_face=Mb);lb=aa.frontFace;lb!==p.frontFace&&(n.frontFace(lb),p.frontFace=lb);Na=aa.lineWidth;Na!==p.lineWidth&&(n.lineWidth(Na),p.lineWidth=Na);$b=aa.polygonOffset_enable;$b!==p.polygonOffset_enable&&
($b?n.enable(32823):n.disable(32823),p.polygonOffset_enable=$b);Pa=Ta[0];ub=Ta[1];if(Pa!==v[0]||ub!==v[1])n.polygonOffset(Pa,ub),v[0]=Pa,v[1]=ub;vb=aa.sample_alpha;vb!==p.sample_alpha&&(vb?n.enable(32926):n.disable(32926),p.sample_alpha=vb);Sa=aa.sample_enable;Sa!==p.sample_enable&&(Sa?n.enable(32928):n.disable(32928),p.sample_enable=Sa);nb=m[0];ic=m[1];if(nb!==U[0]||ic!==U[1])n.sampleCoverage(nb,ic),U[0]=nb,U[1]=ic;Ac=aa.stencil_mask;Ac!==p.stencil_mask&&(n.stencilMask(Ac),p.stencil_mask=Ac);vc=
W[0];ab=W[1];lc=W[2];if(vc!==Hb[0]||ab!==Hb[1]||lc!==Hb[2])n.stencilFunc(vc,ab,lc),Hb[0]=vc,Hb[1]=ab,Hb[2]=lc;hd=ra[0];Wa=ra[1];Mc=ra[2];Ab=ra[3];if(hd!==Fa[0]||Wa!==Fa[1]||Mc!==Fa[2]||Ab!==Fa[3])n.stencilOpSeparate(hd,Wa,Mc,Ab),Fa[0]=hd,Fa[1]=Wa,Fa[2]=Mc,Fa[3]=Ab;Ya=ha[0];Vb=ha[1];uc=ha[2];Wb=ha[3];if(Ya!==I[0]||Vb!==I[1]||uc!==I[2]||Wb!==I[3])n.stencilOpSeparate(Ya,Vb,uc,Wb),I[0]=Ya,I[1]=Vb,I[2]=uc,I[3]=Wb;Qb=aa.scissor_enable;Qb!==p.scissor_enable&&(Qb?n.enable(3089):n.disable(3089),p.scissor_enable=
Qb);Kc=va[0];Rb=va[1];Qd=va[2];Fc=va[3];if(Kc!==wa[0]||Rb!==wa[1]||Qd!==wa[2]||Fc!==wa[3])n.scissor(Kc,Rb,Qd,Fc),wa[0]=Kc,wa[1]=Rb,wa[2]=Qd,wa[3]=Fc}d=this.viewport;u=d.x|0;M=d.y|0;y="width"in d?d.width|0:z.framebufferWidth-u;qa="height"in d?d.height|0:z.framebufferHeight-M;t=z.viewportWidth;z.viewportWidth=y;x=z.viewportHeight;z.viewportHeight=qa;n.viewport(u,M,y,qa);ya[0]=u;ya[1]=M;ya[2]=y;ya[3]=qa;n.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;n.enable(3042);p.blend_enable=!0;n.blendFuncSeparate(770,
771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;n.disable(2929);p.depth_enable=!1;n.disable(2960);p.stencil_enable=!1;if(D=p.profile)l=performance.now(),ba.count++;n.useProgram(H.program);B=za.angle_instanced_arrays;oa.setVAO(null);Y.buffer=this.sizeBuffer;P=!1;G=null;N=0;T=!1;ga=ka=0;ca=1;ma=0;Ca=5126;Ye=Ce=fb=ia=0;F(Y)?(P=!0,G=O.createStream(34962,Y),Ca=G.dtype):(G=O.getBuffer(Y))?Ca=G.dtype:"constant"in Y?(ca=2,"number"===typeof Y.constant?(fb=Y.constant,Ce=Ye=ia=0):(fb=0<Y.constant.length?Y.constant[0]:
0,Ce=1<Y.constant.length?Y.constant[1]:0,Ye=2<Y.constant.length?Y.constant[2]:0,ia=3<Y.constant.length?Y.constant[3]:0)):(G=F(Y.buffer)?O.createStream(34962,Y.buffer):O.getBuffer(Y.buffer),Ca="type"in Y?Ga[Y.type]:G.dtype,T=!!Y.normalized,ga=Y.size|0,ka=Y.offset|0,ma=Y.stride|0,N=Y.divisor|0);Ze=ea.location;Hd=Q[Ze];if(1===ca){Hd.buffer||n.enableVertexAttribArray(Ze);Ae=ga||1;if(Hd.type!==Ca||Hd.size!==Ae||Hd.buffer!==G||Hd.normalized!==T||Hd.offset!==ka||Hd.stride!==ma)n.bindBuffer(34962,G.buffer),
n.vertexAttribPointer(Ze,Ae,Ca,T,ma,ka),Hd.type=Ca,Hd.size=Ae,Hd.buffer=G,Hd.normalized=T,Hd.offset=ka,Hd.stride=ma;Hd.divisor!==N&&(B.vertexAttribDivisorANGLE(Ze,N),Hd.divisor=N)}else if(Hd.buffer&&(n.disableVertexAttribArray(Ze),Hd.buffer=null),Hd.x!==fb||Hd.y!==Ce||Hd.z!==Ye||Hd.w!==ia)n.vertexAttrib4f(Ze,fb,Ce,Ye,ia),Hd.x=fb,Hd.y=Ce,Hd.z=Ye,Hd.w=ia;la.buffer=this.sizeBuffer;se=!1;Yd=null;Ad=0;Zd=!1;bd=md=0;rd=1;Lc=0;od=5126;Wc=Pc=fd=Gc=0;F(la)?(se=!0,Yd=O.createStream(34962,la),od=Yd.dtype):(Yd=
O.getBuffer(la))?od=Yd.dtype:"constant"in la?(rd=2,"number"===typeof la.constant?(fd=la.constant,Pc=Wc=Gc=0):(fd=0<la.constant.length?la.constant[0]:0,Pc=1<la.constant.length?la.constant[1]:0,Wc=2<la.constant.length?la.constant[2]:0,Gc=3<la.constant.length?la.constant[3]:0)):(Yd=F(la.buffer)?O.createStream(34962,la.buffer):O.getBuffer(la.buffer),od="type"in la?Ga[la.type]:Yd.dtype,Zd=!!la.normalized,bd=la.size|0,md=la.offset|0,Lc=la.stride|0,Ad=la.divisor|0);Bb=E.location;Fb=Q[Bb];if(1===rd){Fb.buffer||
n.enableVertexAttribArray(Bb);Dc=bd||1;if(Fb.type!==od||Fb.size!==Dc||Fb.buffer!==Yd||Fb.normalized!==Zd||Fb.offset!==md||Fb.stride!==Lc)n.bindBuffer(34962,Yd.buffer),n.vertexAttribPointer(Bb,Dc,od,Zd,Lc,md),Fb.type=od,Fb.size=Dc,Fb.buffer=Yd,Fb.normalized=Zd,Fb.offset=md,Fb.stride=Lc;Fb.divisor!==Ad&&(B.vertexAttribDivisorANGLE(Bb,Ad),Fb.divisor=Ad)}else if(Fb.buffer&&(n.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==fd||Fb.y!==Pc||Fb.z!==Wc||Fb.w!==Gc)n.vertexAttrib4f(Bb,fd,Pc,Wc,Gc),Fb.x=
fd,Fb.y=Pc,Fb.z=Wc,Fb.w=Gc;xb=this.charBuffer;xc=!1;Cb=null;Jc=0;nc=!1;Xc=Hc=0;Vc=1;Ec=0;gc=5126;oc=rc=qc=Ic=0;F(xb)?(xc=!0,Cb=O.createStream(34962,xb),gc=Cb.dtype):(Cb=O.getBuffer(xb))?gc=Cb.dtype:"constant"in xb?(Vc=2,"number"===typeof xb.constant?(qc=xb.constant,rc=oc=Ic=0):(qc=0<xb.constant.length?xb.constant[0]:0,rc=1<xb.constant.length?xb.constant[1]:0,oc=2<xb.constant.length?xb.constant[2]:0,Ic=3<xb.constant.length?xb.constant[3]:0)):(Cb=F(xb.buffer)?O.createStream(34962,xb.buffer):O.getBuffer(xb.buffer),
gc="type"in xb?Ga[xb.type]:Cb.dtype,nc=!!xb.normalized,Xc=xb.size|0,Hc=xb.offset|0,Ec=xb.stride|0,Jc=xb.divisor|0);hc=V.location;Za=Q[hc];if(1===Vc){Za.buffer||n.enableVertexAttribArray(hc);cc=Xc||1;if(Za.type!==gc||Za.size!==cc||Za.buffer!==Cb||Za.normalized!==nc||Za.offset!==Hc||Za.stride!==Ec)n.bindBuffer(34962,Cb.buffer),n.vertexAttribPointer(hc,cc,gc,nc,Ec,Hc),Za.type=gc,Za.size=cc,Za.buffer=Cb,Za.normalized=nc,Za.offset=Hc,Za.stride=Ec;Za.divisor!==Jc&&(B.vertexAttribDivisorANGLE(hc,Jc),Za.divisor=
Jc)}else if(Za.buffer&&(n.disableVertexAttribArray(hc),Za.buffer=null),Za.x!==qc||Za.y!==rc||Za.z!==oc||Za.w!==Ic)n.vertexAttrib4f(hc,qc,rc,oc,Ic),Za.x=qc,Za.y=rc,Za.z=oc,Za.w=Ic;yb=this.position;bb=!1;Nb=null;$a=0;ob=!1;yd=Ua=0;Ib=1;Jb=0;sc=5126;Db=Gb=jb=Ob=0;F(yb)?(bb=!0,Nb=O.createStream(34962,yb),sc=Nb.dtype):(Nb=O.getBuffer(yb))?sc=Nb.dtype:"constant"in yb?(Ib=2,"number"===typeof yb.constant?(jb=yb.constant,Gb=Db=Ob=0):(jb=0<yb.constant.length?yb.constant[0]:0,Gb=1<yb.constant.length?yb.constant[1]:
0,Db=2<yb.constant.length?yb.constant[2]:0,Ob=3<yb.constant.length?yb.constant[3]:0)):(Nb=F(yb.buffer)?O.createStream(34962,yb.buffer):O.getBuffer(yb.buffer),sc="type"in yb?Ga[yb.type]:Nb.dtype,ob=!!yb.normalized,yd=yb.size|0,Ua=yb.offset|0,Jb=yb.stride|0,$a=yb.divisor|0);wb=sa.location;hb=Q[wb];if(1===Ib){hb.buffer||n.enableVertexAttribArray(wb);Zb=yd||2;if(hb.type!==sc||hb.size!==Zb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Ua||hb.stride!==Jb)n.bindBuffer(34962,Nb.buffer),n.vertexAttribPointer(wb,
Zb,sc,ob,Jb,Ua),hb.type=sc,hb.size=Zb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Ua,hb.stride=Jb;hb.divisor!==$a&&(B.vertexAttribDivisorANGLE(wb,$a),hb.divisor=$a)}else if(hb.buffer&&(n.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)n.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=J.call(this,z,b,0);n.uniform1f(C.location,Pb);qb=g.call(this,z,b,0);n.uniform1f(R.location,qb);n.uniform1f(S.location,b.align);n.uniform1f(w.location,b.baseline);
Ra=this.viewportArray;n.uniform4f(X.location,Ra[0],Ra[1],Ra[2],Ra[3]);Ub=b.color;n.uniform4f(e.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=k.call(this,z,b,0);n.uniform2f(h.location,zb[0],zb[1]);dc=q.call(this,z,b,0);n.uniform2f(Z.location,dc[0],dc[1]);ib=this.scale;n.uniform2f(ta.location,ib[0],ib[1]);pb=this.translate;n.uniform2f(db.location,pb[0],pb[1]);Ia=b.positionOffset;n.uniform2f(A.location,Ia[0],Ia[1]);n.uniform1f(a.location,b.opacity);(rb=f.call(this,z,b,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);
Ka=rb._texture;n.uniform1i(r.location,Ka.bind());(eb=L.elements)?n.bindBuffer(34963,eb.buffer.buffer):oa.currentVAO&&(eb=K.getElements(oa.currentVAO.elements))&&n.bindBuffer(34963,eb.buffer.buffer);gb=b.offset;if(La=b.count)kb=L.instances,0<kb?eb?B.drawElementsInstancedANGLE(0,La,eb.type,gb<<(eb.type-5121>>1),kb):B.drawArraysInstancedANGLE(0,gb,La,kb):0>kb&&(eb?n.drawElements(0,La,eb.type,gb<<(eb.type-5121>>1)):n.drawArrays(0,gb,La)),p.dirty=!0,oa.setVAO(null),z.viewportWidth=t,z.viewportHeight=x,
D&&(ba.cpuTime+=performance.now()-l),P&&O.destroyStream(G),se&&O.destroyStream(Yd),xc&&O.destroyStream(Cb),bb&&O.destroyStream(Nb),Ka.unbind()},scope:function(a,b,e){var c,f,h,d,m,n,k,v,r,q,I,ja,g,w,U,A,ra,Fa,y,C,E,Q,fa,K,ha,J,Yb,Ba,H,ya,va,S,P,xa,R,oa,N,za,ga,X,Z,V,ea,Ta,pa,sa,Ea,Aa,na,ta,wa,Hb,W,db,Bd,ia,Za,cc,yb,bb,Nb,$a,ob,Ua,fb,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa,Mc,Ab,Ya,
Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,Ed,Nc,Yc,td,pc,wc,jc,cb,tc,Tb,Xb,fc,kc,yc,Bc,cd,Qc,Rc,Sc,Zc,ld,dd,$c,mc,ec,ad,Uc,ed,zc,id;c=this.viewport;f=c.x|0;h=c.y|0;d="width"in c?c.width|0:z.framebufferWidth-f;m="height"in c?c.height|0:z.framebufferHeight-h;n=z.viewportWidth;z.viewportWidth=d;k=z.viewportHeight;z.viewportHeight=m;v=qa[0];qa[0]=f;r=qa[1];qa[1]=h;q=qa[2];qa[2]=d;I=qa[3];qa[3]=m;ja=Ca[0];Ca[0]=0;g=Ca[1];Ca[1]=0;w=Ca[2];Ca[2]=0;U=Ca[3];Ca[3]=1;A=aa.blend_enable;aa.blend_enable=!0;ra=ka[0];ka[0]=770;Fa=
ka[1];ka[1]=771;y=ka[2];ka[2]=773;C=ka[3];ka[3]=1;E=aa.depth_enable;aa.depth_enable=!1;Q=aa.stencil_enable;aa.stencil_enable=!1;if(fa=p.profile)K=performance.now(),ba.count++;ha=a.offset;J=L.offset;L.offset=ha;Yb=a.count;Ba=L.count;L.count=Yb;H=L.primitive;L.primitive=0;ya=a.align;va=ma[64];ma[64]=ya;S=B.call(this,z,a,e);P=ma[69];ma[69]=S;xa=D.call(this,z,a,e);R=ma[67];ma[67]=xa;oa=G.call(this,z,a,e);N=ma[66];ma[66]=oa;za=a.baseline;ga=ma[65];ma[65]=za;X=T.call(this,z,a,e);Z=ma[62];ma[62]=X;V=a.color;
ea=ma[14];ma[14]=V;Ta=x.call(this,z,a,e);pa=ma[63];ma[63]=Ta;sa=a.opacity;Ea=ma[10];ma[10]=sa;Aa=a.positionOffset;na=ma[68];ma[68]=Aa;ta=this.scale;wa=ma[6];ma[6]=ta;Hb=this.translate;W=ma[8];ma[8]=Hb;db=this.viewportArray;Bd=ma[3];ma[3]=db;ia=this.charBuffer;Za=!1;cc=null;yb=0;bb=!1;$a=Nb=0;ob=1;Ua=0;fb=5126;Ob=sc=Jb=Ib=0;F(ia)?(Za=!0,cc=O.createStream(34962,ia),fb=cc.dtype):(cc=O.getBuffer(ia))?fb=cc.dtype:"constant"in ia?(ob=2,"number"===typeof ia.constant?(Jb=ia.constant,sc=Ob=Ib=0):(Jb=0<ia.constant.length?
ia.constant[0]:0,sc=1<ia.constant.length?ia.constant[1]:0,Ob=2<ia.constant.length?ia.constant[2]:0,Ib=3<ia.constant.length?ia.constant[3]:0)):(cc=F(ia.buffer)?O.createStream(34962,ia.buffer):O.getBuffer(ia.buffer),fb="type"in ia?Ga[ia.type]:cc.dtype,bb=!!ia.normalized,$a=ia.size|0,Nb=ia.offset|0,Ua=ia.stride|0,yb=ia.divisor|0);jb=t.buffer;t.buffer=cc;Gb=t.divisor;t.divisor=yb;Db=t.normalized;t.normalized=bb;wb=t.offset;t.offset=Nb;hb=t.size;t.size=$a;Zb=t.state;t.state=ob;Pb=t.stride;t.stride=Ua;
qb=t.type;t.type=fb;Ra=t.w;t.w=Ib;Ub=t.x;t.x=Jb;zb=t.y;t.y=sc;dc=t.z;t.z=Ob;la.buffer=this.sizeBuffer;ib=!1;pb=null;Ia=0;rb=!1;eb=Ka=0;gb=1;La=0;kb=5126;Oa=sb=tb=Va=0;F(la)?(ib=!0,pb=O.createStream(34962,la),kb=pb.dtype):(pb=O.getBuffer(la))?kb=pb.dtype:"constant"in la?(gb=2,"number"===typeof la.constant?(tb=la.constant,sb=Oa=Va=0):(tb=0<la.constant.length?la.constant[0]:0,sb=1<la.constant.length?la.constant[1]:0,Oa=2<la.constant.length?la.constant[2]:0,Va=3<la.constant.length?la.constant[3]:0)):
(pb=F(la.buffer)?O.createStream(34962,la.buffer):O.getBuffer(la.buffer),kb="type"in la?Ga[la.type]:pb.dtype,rb=!!la.normalized,eb=la.size|0,Ka=la.offset|0,La=la.stride|0,Ia=la.divisor|0);Cc=l.buffer;l.buffer=pb;Qa=l.divisor;l.divisor=Ia;Kb=l.normalized;l.normalized=rb;Eb=l.offset;l.offset=Ka;Ma=l.size;l.size=eb;wd=l.state;l.state=gb;Xa=l.stride;l.stride=La;Lb=l.type;l.type=kb;Mb=l.w;l.w=Va;lb=l.x;l.x=tb;Na=l.y;l.y=sb;$b=l.z;l.z=Oa;Pa=this.position;ub=!1;vb=null;Sa=0;nb=!1;Ac=ic=0;vc=1;ab=0;lc=5126;
Ab=Mc=Wa=hd=0;F(Pa)?(ub=!0,vb=O.createStream(34962,Pa),lc=vb.dtype):(vb=O.getBuffer(Pa))?lc=vb.dtype:"constant"in Pa?(vc=2,"number"===typeof Pa.constant?(Wa=Pa.constant,Mc=Ab=hd=0):(Wa=0<Pa.constant.length?Pa.constant[0]:0,Mc=1<Pa.constant.length?Pa.constant[1]:0,Ab=2<Pa.constant.length?Pa.constant[2]:0,hd=3<Pa.constant.length?Pa.constant[3]:0)):(vb=F(Pa.buffer)?O.createStream(34962,Pa.buffer):O.getBuffer(Pa.buffer),lc="type"in Pa?Ga[Pa.type]:vb.dtype,nb=!!Pa.normalized,Ac=Pa.size|0,ic=Pa.offset|
0,ab=Pa.stride|0,Sa=Pa.divisor|0);Ya=ca.buffer;ca.buffer=vb;Vb=ca.divisor;ca.divisor=Sa;uc=ca.normalized;ca.normalized=nb;Wb=ca.offset;ca.offset=ic;Qb=ca.size;ca.size=Ac;Kc=ca.state;ca.state=vc;Rb=ca.stride;ca.stride=ab;Qd=ca.type;ca.type=lc;Fc=ca.w;ca.w=hd;Ed=ca.x;ca.x=Wa;Nc=ca.y;ca.y=Mc;Yc=ca.z;ca.z=Ab;Y.buffer=this.sizeBuffer;td=!1;pc=null;wc=0;jc=!1;tc=cb=0;Tb=1;Xb=0;fc=5126;cd=Bc=yc=kc=0;F(Y)?(td=!0,pc=O.createStream(34962,Y),fc=pc.dtype):(pc=O.getBuffer(Y))?fc=pc.dtype:"constant"in Y?(Tb=2,
"number"===typeof Y.constant?(yc=Y.constant,Bc=cd=kc=0):(yc=0<Y.constant.length?Y.constant[0]:0,Bc=1<Y.constant.length?Y.constant[1]:0,cd=2<Y.constant.length?Y.constant[2]:0,kc=3<Y.constant.length?Y.constant[3]:0)):(pc=F(Y.buffer)?O.createStream(34962,Y.buffer):O.getBuffer(Y.buffer),fc="type"in Y?Ga[Y.type]:pc.dtype,jc=!!Y.normalized,tc=Y.size|0,cb=Y.offset|0,Xb=Y.stride|0,wc=Y.divisor|0);Qc=u.buffer;u.buffer=pc;Rc=u.divisor;u.divisor=wc;Sc=u.normalized;u.normalized=jc;Zc=u.offset;u.offset=cb;ld=
u.size;u.size=tc;dd=u.state;u.state=Tb;$c=u.stride;u.stride=Xb;mc=u.type;u.type=fc;ec=u.w;u.w=kc;ad=u.x;u.x=yc;Uc=u.y;u.y=Bc;ed=u.z;u.z=cd;zc=M.vert;M.vert=61;id=M.frag;M.frag=60;p.dirty=!0;b(z,a,e);z.viewportWidth=n;z.viewportHeight=k;qa[0]=v;qa[1]=r;qa[2]=q;qa[3]=I;Ca[0]=ja;Ca[1]=g;Ca[2]=w;Ca[3]=U;aa.blend_enable=A;ka[0]=ra;ka[1]=Fa;ka[2]=y;ka[3]=C;aa.depth_enable=E;aa.stencil_enable=Q;fa&&(ba.cpuTime+=performance.now()-K);L.offset=J;L.count=Ba;L.primitive=H;ma[64]=va;ma[69]=P;ma[67]=R;ma[66]=N;
ma[65]=ga;ma[62]=Z;ma[14]=ea;ma[63]=pa;ma[10]=Ea;ma[68]=na;ma[6]=wa;ma[8]=W;ma[3]=Bd;Za&&O.destroyStream(cc);t.buffer=jb;t.divisor=Gb;t.normalized=Db;t.offset=wb;t.size=hb;t.state=Zb;t.stride=Pb;t.type=qb;t.w=Ra;t.x=Ub;t.y=zb;t.z=dc;ib&&O.destroyStream(pb);l.buffer=Cc;l.divisor=Qa;l.normalized=Kb;l.offset=Eb;l.size=Ma;l.state=wd;l.stride=Xa;l.type=Lb;l.w=Mb;l.x=lb;l.y=Na;l.z=$b;ub&&O.destroyStream(vb);ca.buffer=Ya;ca.divisor=Vb;ca.normalized=uc;ca.offset=Wb;ca.size=Qb;ca.state=Kc;ca.stride=Rb;ca.type=
Qd;ca.w=Fc;ca.x=Ed;ca.y=Nc;ca.z=Yc;td&&O.destroyStream(pc);u.buffer=Qc;u.divisor=Rc;u.normalized=Sc;u.offset=Zc;u.size=ld;u.state=dd;u.stride=$c;u.type=mc;u.w=ec;u.x=ad;u.y=Uc;u.z=ed;M.vert=zc;M.frag=id;p.dirty=!0}}},$2:function(d,ba,H){var J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R;J=d.attributes;g=d.current;k=d.framebuffer;q=d.gl;f=d.next;B=d.vao;D=f.blend_color;G=g.blend_color;T=f.blend_equation;x=g.blend_equation;t=f.blend_func;l=g.blend_func;ca=f.colorMask;u=g.colorMask;N=
f.depth_range;y=g.depth_range;P=f.polygonOffset_offset;ga=g.polygonOffset_offset;c=f.sample_coverage;b=g.sample_coverage;S=f.scissor_box;r=g.scissor_box;Z=f.stencil_func;h=g.stencil_func;w=f.stencil_opBack;V=g.stencil_opBack;E=f.stencil_opFront;C=g.stencil_opFront;e=f.viewport;R=g.viewport;return{poll:function(){var a,d,A,J,H,B,ea,Q,O,z,p,L,K,za,ba,n,F,aa,M,ma,oa,Ca;g.dirty=!1;d=f.blend_enable;A=f.cull_enable;J=f.depth_enable;H=f.dither;B=f.polygonOffset_enable;ea=f.sample_alpha;Q=f.sample_enable;
O=f.scissor_enable;z=f.stencil_enable;p=f.cull_face;L=g.cull_face;K=f.depth_func;za=g.depth_func;ba=f.depth_mask;n=g.depth_mask;F=f.frontFace;aa=g.frontFace;M=f.lineWidth;ma=g.lineWidth;oa=f.stencil_mask;Ca=g.stencil_mask;a=k.next;a!==k.cur&&(a?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null),k.cur=a);d!==g.blend_enable&&(d?q.enable(3042):q.disable(3042),g.blend_enable=d);A!==g.cull_enable&&(A?q.enable(2884):q.disable(2884),g.cull_enable=A);J!==g.depth_enable&&(J?q.enable(2929):
q.disable(2929),g.depth_enable=J);H!==g.dither&&(H?q.enable(3024):q.disable(3024),g.dither=H);B!==g.polygonOffset_enable&&(B?q.enable(32823):q.disable(32823),g.polygonOffset_enable=B);ea!==g.sample_alpha&&(ea?q.enable(32926):q.disable(32926),g.sample_alpha=ea);Q!==g.sample_enable&&(Q?q.enable(32928):q.disable(32928),g.sample_enable=Q);O!==g.scissor_enable&&(O?q.enable(3089):q.disable(3089),g.scissor_enable=O);z!==g.stencil_enable&&(z?q.enable(2960):q.disable(2960),g.stencil_enable=z);if(D[0]!==G[0]||
D[1]!==G[1]||D[2]!==G[2]||D[3]!==G[3])q.blendColor(D[0],D[1],D[2],D[3]),G[0]=D[0],G[1]=D[1],G[2]=D[2],G[3]=D[3];if(T[0]!==x[0]||T[1]!==x[1])q.blendEquationSeparate(T[0],T[1]),x[0]=T[0],x[1]=T[1];if(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||t[3]!==l[3])q.blendFuncSeparate(t[0],t[1],t[2],t[3]),l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3];if(ca[0]!==u[0]||ca[1]!==u[1]||ca[2]!==u[2]||ca[3]!==u[3])q.colorMask(ca[0],ca[1],ca[2],ca[3]),u[0]=ca[0],u[1]=ca[1],u[2]=ca[2],u[3]=ca[3];p!==L&&(q.cullFace(p),g.cull_face=
p);K!==za&&(q.depthFunc(K),g.depth_func=K);ba!==n&&(q.depthMask(ba),g.depth_mask=ba);if(N[0]!==y[0]||N[1]!==y[1])q.depthRange(N[0],N[1]),y[0]=N[0],y[1]=N[1];F!==aa&&(q.frontFace(F),g.frontFace=F);M!==ma&&(q.lineWidth(M),g.lineWidth=M);if(P[0]!==ga[0]||P[1]!==ga[1])q.polygonOffset(P[0],P[1]),ga[0]=P[0],ga[1]=P[1];if(c[0]!==b[0]||c[1]!==b[1])q.sampleCoverage(c[0],c[1]),b[0]=c[0],b[1]=c[1];if(S[0]!==r[0]||S[1]!==r[1]||S[2]!==r[2]||S[3]!==r[3])q.scissor(S[0],S[1],S[2],S[3]),r[0]=S[0],r[1]=S[1],r[2]=S[2],
r[3]=S[3];if(Z[0]!==h[0]||Z[1]!==h[1]||Z[2]!==h[2])q.stencilFunc(Z[0],Z[1],Z[2]),h[0]=Z[0],h[1]=Z[1],h[2]=Z[2];oa!==Ca&&(q.stencilMask(oa),g.stencil_mask=oa);if(w[0]!==V[0]||w[1]!==V[1]||w[2]!==V[2]||w[3]!==V[3])q.stencilOpSeparate(w[0],w[1],w[2],w[3]),V[0]=w[0],V[1]=w[1],V[2]=w[2],V[3]=w[3];if(E[0]!==C[0]||E[1]!==C[1]||E[2]!==C[2]||E[3]!==C[3])q.stencilOpSeparate(E[0],E[1],E[2],E[3]),C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3];if(e[0]!==R[0]||e[1]!==R[1]||e[2]!==R[2]||e[3]!==R[3])q.viewport(e[0],e[1],
e[2],e[3]),R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3]},refresh:function(){var a,d,A,H,ba,X,ea,Q,O,z,p,L,K,za,na,n;g.dirty=!1;d=f.blend_enable;A=f.cull_enable;H=f.depth_enable;ba=f.dither;X=f.polygonOffset_enable;ea=f.sample_alpha;Q=f.sample_enable;O=f.scissor_enable;z=f.stencil_enable;p=f.cull_face;L=f.depth_func;K=f.depth_mask;za=f.frontFace;na=f.lineWidth;n=f.stencil_mask;(a=k.next)?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null);k.cur=a;a=J[0];a.buffer?(q.enableVertexAttribArray(0),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=J[1];a.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=J[2];a.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,a.buffer.buffer),
q.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=J[3];a.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=J[4];a.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(4,a.size,
a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=J[5];a.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=J[6];a.buffer?(q.enableVertexAttribArray(6),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):
(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=J[7];a.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=J[8];a.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(8),
q.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=J[9];a.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=J[10];a.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,a.x,a.y,
a.z,a.w),a.buffer=null);a=J[11];a.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=J[12];a.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);
a=J[13];a.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=J[14];a.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(14),q.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=J[15];a.buffer?(q.enableVertexAttribArray(15),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);B.currentVAO=null;B.setVAO(B.targetVAO);d?q.enable(3042):q.disable(3042);g.blend_enable=d;A?q.enable(2884):q.disable(2884);g.cull_enable=A;H?q.enable(2929):q.disable(2929);g.depth_enable=H;ba?q.enable(3024):q.disable(3024);g.dither=ba;X?q.enable(32823):q.disable(32823);g.polygonOffset_enable=X;ea?q.enable(32926):
q.disable(32926);g.sample_alpha=ea;Q?q.enable(32928):q.disable(32928);g.sample_enable=Q;O?q.enable(3089):q.disable(3089);g.scissor_enable=O;z?q.enable(2960):q.disable(2960);g.stencil_enable=z;q.blendColor(D[0],D[1],D[2],D[3]);G[0]=D[0];G[1]=D[1];G[2]=D[2];G[3]=D[3];q.blendEquationSeparate(T[0],T[1]);x[0]=T[0];x[1]=T[1];q.blendFuncSeparate(t[0],t[1],t[2],t[3]);l[0]=t[0];l[1]=t[1];l[2]=t[2];l[3]=t[3];q.colorMask(ca[0],ca[1],ca[2],ca[3]);u[0]=ca[0];u[1]=ca[1];u[2]=ca[2];u[3]=ca[3];q.cullFace(p);g.cull_face=
p;q.depthFunc(L);g.depth_func=L;q.depthMask(K);g.depth_mask=K;q.depthRange(N[0],N[1]);y[0]=N[0];y[1]=N[1];q.frontFace(za);g.frontFace=za;q.lineWidth(na);g.lineWidth=na;q.polygonOffset(P[0],P[1]);ga[0]=P[0];ga[1]=P[1];q.sampleCoverage(c[0],c[1]);b[0]=c[0];b[1]=c[1];q.scissor(S[0],S[1],S[2],S[3]);r[0]=S[0];r[1]=S[1];r[2]=S[2];r[3]=S[3];q.stencilFunc(Z[0],Z[1],Z[2]);h[0]=Z[0];h[1]=Z[1];h[2]=Z[2];q.stencilMask(n);g.stencil_mask=n;q.stencilOpSeparate(w[0],w[1],w[2],w[3]);V[0]=w[0];V[1]=w[1];V[2]=w[2];
V[3]=w[3];q.stencilOpSeparate(E[0],E[1],E[2],E[3]);C[0]=E[0];C[1]=E[1];C[2]=E[2];C[3]=E[3];q.viewport(e[0],e[1],e[2],e[3]);R[0]=e[0];R[1]=e[1];R[2]=e[2];R[3]=e[3]}}},$7:function(d,ba,H,J,g,k,q,f){var B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,W,X,ea,Q;B=d.context;D=d.current;G=d.framebuffer;T=d.gl;x=d.next;t=d.shader;l=d.vao;ca=x.blend_color;u=D.blend_color;N=x.blend_equation;y=D.blend_equation;P=x.blend_func;ga=D.blend_func;c=x.colorMask;b=D.colorMask;S=x.depth_range;r=D.depth_range;
Z=x.polygonOffset_offset;h=D.polygonOffset_offset;w=x.sample_coverage;V=D.sample_coverage;E=x.scissor_box;C=D.scissor_box;e=x.stencil_func;R=D.stencil_func;a=x.stencil_opBack;sa=D.stencil_opBack;A=x.stencil_opFront;ta=D.stencil_opFront;W=x.viewport;X=D.viewport;ea={};Q={};return{draw:function(f){var d,p,q,E,Q,na,n,F,aa,M;d=f.framebuffer;p=G.getFramebuffer(d);d&&!p&&ba.commandRaise(g,H);d=G.next;G.next=p;q=B.framebufferWidth;B.framebufferWidth=p?p.width:B.drawingBufferWidth;E=B.framebufferHeight;B.framebufferHeight=
p?p.height:B.drawingBufferHeight;p!==G.cur&&(p?T.bindFramebuffer(36160,p.framebuffer):T.bindFramebuffer(36160,null),G.cur=p);if(D.dirty){p=x.dither;p!==D.dither&&(p?T.enable(3024):T.disable(3024),D.dither=p);p=x.blend_enable;p!==D.blend_enable&&(p?T.enable(3042):T.disable(3042),D.blend_enable=p);p=ca[0];n=ca[1];Q=ca[2];na=ca[3];if(p!==u[0]||n!==u[1]||Q!==u[2]||na!==u[3])T.blendColor(p,n,Q,na),u[0]=p,u[1]=n,u[2]=Q,u[3]=na;p=N[0];n=N[1];if(p!==y[0]||n!==y[1])T.blendEquationSeparate(p,n),y[0]=p,y[1]=
n;p=P[0];n=P[1];Q=P[2];na=P[3];if(p!==ga[0]||n!==ga[1]||Q!==ga[2]||na!==ga[3])T.blendFuncSeparate(p,n,Q,na),ga[0]=p,ga[1]=n,ga[2]=Q,ga[3]=na;p=x.depth_enable;p!==D.depth_enable&&(p?T.enable(2929):T.disable(2929),D.depth_enable=p);p=x.depth_func;p!==D.depth_func&&(T.depthFunc(p),D.depth_func=p);p=S[0];n=S[1];if(p!==r[0]||n!==r[1])T.depthRange(p,n),r[0]=p,r[1]=n;p=x.depth_mask;p!==D.depth_mask&&(T.depthMask(p),D.depth_mask=p);p=c[0];n=c[1];Q=c[2];na=c[3];if(p!==b[0]||n!==b[1]||Q!==b[2]||na!==b[3])T.colorMask(p,
n,Q,na),b[0]=p,b[1]=n,b[2]=Q,b[3]=na;p=x.cull_enable;p!==D.cull_enable&&(p?T.enable(2884):T.disable(2884),D.cull_enable=p);p=x.cull_face;p!==D.cull_face&&(T.cullFace(p),D.cull_face=p);p=x.frontFace;p!==D.frontFace&&(T.frontFace(p),D.frontFace=p);p=x.lineWidth;p!==D.lineWidth&&(T.lineWidth(p),D.lineWidth=p);p=x.polygonOffset_enable;p!==D.polygonOffset_enable&&(p?T.enable(32823):T.disable(32823),D.polygonOffset_enable=p);p=Z[0];n=Z[1];if(p!==h[0]||n!==h[1])T.polygonOffset(p,n),h[0]=p,h[1]=n;p=x.sample_alpha;
p!==D.sample_alpha&&(p?T.enable(32926):T.disable(32926),D.sample_alpha=p);p=x.sample_enable;p!==D.sample_enable&&(p?T.enable(32928):T.disable(32928),D.sample_enable=p);p=w[0];n=w[1];if(p!==V[0]||n!==V[1])T.sampleCoverage(p,n),V[0]=p,V[1]=n;p=x.stencil_enable;p!==D.stencil_enable&&(p?T.enable(2960):T.disable(2960),D.stencil_enable=p);p=x.stencil_mask;p!==D.stencil_mask&&(T.stencilMask(p),D.stencil_mask=p);p=e[0];n=e[1];Q=e[2];if(p!==R[0]||n!==R[1]||Q!==R[2])T.stencilFunc(p,n,Q),R[0]=p,R[1]=n,R[2]=
Q;p=A[0];n=A[1];Q=A[2];na=A[3];if(p!==ta[0]||n!==ta[1]||Q!==ta[2]||na!==ta[3])T.stencilOpSeparate(p,n,Q,na),ta[0]=p,ta[1]=n,ta[2]=Q,ta[3]=na;p=a[0];n=a[1];Q=a[2];na=a[3];if(p!==sa[0]||n!==sa[1]||Q!==sa[2]||na!==sa[3])T.stencilOpSeparate(p,n,Q,na),sa[0]=p,sa[1]=n,sa[2]=Q,sa[3]=na;p=x.scissor_enable;p!==D.scissor_enable&&(p?T.enable(3089):T.disable(3089),D.scissor_enable=p)}Q=B.framebufferWidth;na=B.framebufferHeight;p=B.viewportWidth;B.viewportWidth=Q;n=B.viewportHeight;B.viewportHeight=na;T.viewport(0,
0,Q,na);X[0]=0;X[1]=0;X[2]=Q;X[3]=na;Q=B.framebufferWidth;na=B.framebufferHeight;T.scissor(0,0,Q,na);C[0]=0;C[1]=0;C[2]=Q;C[3]=na;if(Q=D.profile)F=performance.now(),J.count++;na=t.program(t.vert,t.frag,H);T.useProgram(na.program);l.setVAO(null);aa=na.id;(M=ea[aa])||(M=ea[aa]=k(na));M.call(this,f);D.dirty=!0;l.setVAO(null);G.next=d;B.framebufferWidth=q;B.framebufferHeight=E;B.viewportWidth=p;B.viewportHeight=n;Q&&(J.cpuTime+=performance.now()-F)},scope:function(a,b,e){var c,f,h,d,n,k,r,g,w,A,u,Q,y,
C,t;c=a.framebuffer;f=G.getFramebuffer(c);c&&!f&&ba.commandRaise(q,H);c=G.next;G.next=f;h=B.framebufferWidth;B.framebufferWidth=f?f.width:B.drawingBufferWidth;d=B.framebufferHeight;B.framebufferHeight=f?f.height:B.drawingBufferHeight;n=B.framebufferWidth;k=B.framebufferHeight;f=B.viewportWidth;B.viewportWidth=n;r=B.viewportHeight;B.viewportHeight=k;g=W[0];W[0]=0;w=W[1];W[1]=0;A=W[2];W[2]=n;n=W[3];W[3]=k;u=B.framebufferWidth;Q=B.framebufferHeight;k=E[0];E[0]=0;y=E[1];E[1]=0;C=E[2];E[2]=u;u=E[3];E[3]=
Q;if(Q=D.profile)t=performance.now(),J.count++;D.dirty=!0;b(B,a,e);G.next=c;B.framebufferWidth=h;B.framebufferHeight=d;B.viewportWidth=f;B.viewportHeight=r;W[0]=g;W[1]=w;W[2]=A;W[3]=n;E[0]=k;E[1]=y;E[2]=C;E[3]=u;Q&&(J.cpuTime+=performance.now()-t);D.dirty=!0},batch:function(d,k){var p,q,g,C,E;if(D.dirty){p=x.dither;p!==D.dither&&(p?T.enable(3024):T.disable(3024),D.dither=p);p=x.blend_enable;p!==D.blend_enable&&(p?T.enable(3042):T.disable(3042),D.blend_enable=p);p=ca[0];g=ca[1];C=ca[2];E=ca[3];if(p!==
u[0]||g!==u[1]||C!==u[2]||E!==u[3])T.blendColor(p,g,C,E),u[0]=p,u[1]=g,u[2]=C,u[3]=E;p=N[0];g=N[1];if(p!==y[0]||g!==y[1])T.blendEquationSeparate(p,g),y[0]=p,y[1]=g;p=P[0];g=P[1];C=P[2];E=P[3];if(p!==ga[0]||g!==ga[1]||C!==ga[2]||E!==ga[3])T.blendFuncSeparate(p,g,C,E),ga[0]=p,ga[1]=g,ga[2]=C,ga[3]=E;p=x.depth_enable;p!==D.depth_enable&&(p?T.enable(2929):T.disable(2929),D.depth_enable=p);p=x.depth_func;p!==D.depth_func&&(T.depthFunc(p),D.depth_func=p);p=S[0];g=S[1];if(p!==r[0]||g!==r[1])T.depthRange(p,
g),r[0]=p,r[1]=g;p=x.depth_mask;p!==D.depth_mask&&(T.depthMask(p),D.depth_mask=p);p=c[0];g=c[1];C=c[2];E=c[3];if(p!==b[0]||g!==b[1]||C!==b[2]||E!==b[3])T.colorMask(p,g,C,E),b[0]=p,b[1]=g,b[2]=C,b[3]=E;p=x.cull_enable;p!==D.cull_enable&&(p?T.enable(2884):T.disable(2884),D.cull_enable=p);p=x.cull_face;p!==D.cull_face&&(T.cullFace(p),D.cull_face=p);p=x.frontFace;p!==D.frontFace&&(T.frontFace(p),D.frontFace=p);p=x.lineWidth;p!==D.lineWidth&&(T.lineWidth(p),D.lineWidth=p);p=x.polygonOffset_enable;p!==
D.polygonOffset_enable&&(p?T.enable(32823):T.disable(32823),D.polygonOffset_enable=p);p=Z[0];g=Z[1];if(p!==h[0]||g!==h[1])T.polygonOffset(p,g),h[0]=p,h[1]=g;p=x.sample_alpha;p!==D.sample_alpha&&(p?T.enable(32926):T.disable(32926),D.sample_alpha=p);p=x.sample_enable;p!==D.sample_enable&&(p?T.enable(32928):T.disable(32928),D.sample_enable=p);p=w[0];g=w[1];if(p!==V[0]||g!==V[1])T.sampleCoverage(p,g),V[0]=p,V[1]=g;p=x.stencil_enable;p!==D.stencil_enable&&(p?T.enable(2960):T.disable(2960),D.stencil_enable=
p);p=x.stencil_mask;p!==D.stencil_mask&&(T.stencilMask(p),D.stencil_mask=p);p=e[0];g=e[1];C=e[2];if(p!==R[0]||g!==R[1]||C!==R[2])T.stencilFunc(p,g,C),R[0]=p,R[1]=g,R[2]=C;p=A[0];g=A[1];C=A[2];E=A[3];if(p!==ta[0]||g!==ta[1]||C!==ta[2]||E!==ta[3])T.stencilOpSeparate(p,g,C,E),ta[0]=p,ta[1]=g,ta[2]=C,ta[3]=E;p=a[0];g=a[1];C=a[2];E=a[3];if(p!==sa[0]||g!==sa[1]||C!==sa[2]||E!==sa[3])T.stencilOpSeparate(p,g,C,E),sa[0]=p,sa[1]=g,sa[2]=C,sa[3]=E;p=x.scissor_enable;p!==D.scissor_enable&&(p?T.enable(3089):T.disable(3089),
D.scissor_enable=p)}if(p=D.profile)q=performance.now(),J.count+=k;g=t.program(t.vert,t.frag,H);T.useProgram(g.program);l.setVAO(null);C=g.id;(E=Q[C])||(E=Q[C]=f(g));E.call(this,d,k);D.dirty=!0;l.setVAO(null);p&&(J.cpuTime+=performance.now()-q)}}},$5:function(d,ba,H,J,g,k){var q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,W,X;q=d.context;f=d.current;B=d.framebuffer;D=d.gl;G=d.next;T=d.shader;x=d.vao;t=G.blend_color;l=f.blend_color;ca=G.blend_equation;u=f.blend_equation;N=G.blend_func;
y=f.blend_func;P=G.colorMask;ga=f.colorMask;c=G.depth_range;b=f.depth_range;S=G.polygonOffset_offset;r=f.polygonOffset_offset;Z=G.sample_coverage;h=f.sample_coverage;w=G.scissor_box;V=f.scissor_box;E=G.stencil_func;C=f.stencil_func;e=G.stencil_opBack;R=f.stencil_opBack;a=G.stencil_opFront;sa=f.stencil_opFront;A=G.viewport;ta=f.viewport;W={};X={};return{draw:function(d){var k,q,z,p,L;k=B.next;k!==B.cur&&(k?D.bindFramebuffer(36160,k.framebuffer):D.bindFramebuffer(36160,null),B.cur=k);if(f.dirty){k=
G.dither;k!==f.dither&&(k?D.enable(3024):D.disable(3024),f.dither=k);k=G.blend_enable;k!==f.blend_enable&&(k?D.enable(3042):D.disable(3042),f.blend_enable=k);k=t[0];z=t[1];p=t[2];L=t[3];if(k!==l[0]||z!==l[1]||p!==l[2]||L!==l[3])D.blendColor(k,z,p,L),l[0]=k,l[1]=z,l[2]=p,l[3]=L;k=ca[0];z=ca[1];if(k!==u[0]||z!==u[1])D.blendEquationSeparate(k,z),u[0]=k,u[1]=z;k=N[0];z=N[1];p=N[2];L=N[3];if(k!==y[0]||z!==y[1]||p!==y[2]||L!==y[3])D.blendFuncSeparate(k,z,p,L),y[0]=k,y[1]=z,y[2]=p,y[3]=L;k=G.depth_enable;
k!==f.depth_enable&&(k?D.enable(2929):D.disable(2929),f.depth_enable=k);k=G.depth_func;k!==f.depth_func&&(D.depthFunc(k),f.depth_func=k);k=c[0];z=c[1];if(k!==b[0]||z!==b[1])D.depthRange(k,z),b[0]=k,b[1]=z;k=G.depth_mask;k!==f.depth_mask&&(D.depthMask(k),f.depth_mask=k);k=P[0];z=P[1];p=P[2];L=P[3];if(k!==ga[0]||z!==ga[1]||p!==ga[2]||L!==ga[3])D.colorMask(k,z,p,L),ga[0]=k,ga[1]=z,ga[2]=p,ga[3]=L;k=G.cull_enable;k!==f.cull_enable&&(k?D.enable(2884):D.disable(2884),f.cull_enable=k);k=G.cull_face;k!==
f.cull_face&&(D.cullFace(k),f.cull_face=k);k=G.frontFace;k!==f.frontFace&&(D.frontFace(k),f.frontFace=k);k=G.lineWidth;k!==f.lineWidth&&(D.lineWidth(k),f.lineWidth=k);k=G.polygonOffset_enable;k!==f.polygonOffset_enable&&(k?D.enable(32823):D.disable(32823),f.polygonOffset_enable=k);k=S[0];z=S[1];if(k!==r[0]||z!==r[1])D.polygonOffset(k,z),r[0]=k,r[1]=z;k=G.sample_alpha;k!==f.sample_alpha&&(k?D.enable(32926):D.disable(32926),f.sample_alpha=k);k=G.sample_enable;k!==f.sample_enable&&(k?D.enable(32928):
D.disable(32928),f.sample_enable=k);k=Z[0];z=Z[1];if(k!==h[0]||z!==h[1])D.sampleCoverage(k,z),h[0]=k,h[1]=z;k=G.stencil_enable;k!==f.stencil_enable&&(k?D.enable(2960):D.disable(2960),f.stencil_enable=k);k=G.stencil_mask;k!==f.stencil_mask&&(D.stencilMask(k),f.stencil_mask=k);k=E[0];z=E[1];p=E[2];if(k!==C[0]||z!==C[1]||p!==C[2])D.stencilFunc(k,z,p),C[0]=k,C[1]=z,C[2]=p;k=a[0];z=a[1];p=a[2];L=a[3];if(k!==sa[0]||z!==sa[1]||p!==sa[2]||L!==sa[3])D.stencilOpSeparate(k,z,p,L),sa[0]=k,sa[1]=z,sa[2]=p,sa[3]=
L;k=e[0];z=e[1];p=e[2];L=e[3];if(k!==R[0]||z!==R[1]||p!==R[2]||L!==R[3])D.stencilOpSeparate(k,z,p,L),R[0]=k,R[1]=z,R[2]=p,R[3]=L;k=G.scissor_enable;k!==f.scissor_enable&&(k?D.enable(3089):D.disable(3089),f.scissor_enable=k);k=w[0];z=w[1];p=w[2];L=w[3];if(k!==V[0]||z!==V[1]||p!==V[2]||L!==V[3])D.scissor(k,z,p,L),V[0]=k,V[1]=z,V[2]=p,V[3]=L;k=A[0];z=A[1];p=A[2];L=A[3];if(k!==ta[0]||z!==ta[1]||p!==ta[2]||L!==ta[3])D.viewport(k,z,p,L),ta[0]=k,ta[1]=z,ta[2]=p,ta[3]=L;f.dirty=!1}if(k=f.profile)q=performance.now(),
J.count++;z=T.program(T.vert,T.frag,H);D.useProgram(z.program);x.setVAO(null);p=z.id;(L=W[p])||(L=W[p]=g(z));L.call(this,d);x.setVAO(null);k&&(J.cpuTime+=performance.now()-q)},scope:function(a,b,e){var c,h;if(c=f.profile)h=performance.now(),J.count++;b(q,a,e);c&&(J.cpuTime+=performance.now()-h)},batch:function(d,q){var g,z,p,L,K;g=B.next;g!==B.cur&&(g?D.bindFramebuffer(36160,g.framebuffer):D.bindFramebuffer(36160,null),B.cur=g);if(f.dirty){g=G.dither;g!==f.dither&&(g?D.enable(3024):D.disable(3024),
f.dither=g);g=G.blend_enable;g!==f.blend_enable&&(g?D.enable(3042):D.disable(3042),f.blend_enable=g);g=t[0];p=t[1];L=t[2];K=t[3];if(g!==l[0]||p!==l[1]||L!==l[2]||K!==l[3])D.blendColor(g,p,L,K),l[0]=g,l[1]=p,l[2]=L,l[3]=K;g=ca[0];p=ca[1];if(g!==u[0]||p!==u[1])D.blendEquationSeparate(g,p),u[0]=g,u[1]=p;g=N[0];p=N[1];L=N[2];K=N[3];if(g!==y[0]||p!==y[1]||L!==y[2]||K!==y[3])D.blendFuncSeparate(g,p,L,K),y[0]=g,y[1]=p,y[2]=L,y[3]=K;g=G.depth_enable;g!==f.depth_enable&&(g?D.enable(2929):D.disable(2929),f.depth_enable=
g);g=G.depth_func;g!==f.depth_func&&(D.depthFunc(g),f.depth_func=g);g=c[0];p=c[1];if(g!==b[0]||p!==b[1])D.depthRange(g,p),b[0]=g,b[1]=p;g=G.depth_mask;g!==f.depth_mask&&(D.depthMask(g),f.depth_mask=g);g=P[0];p=P[1];L=P[2];K=P[3];if(g!==ga[0]||p!==ga[1]||L!==ga[2]||K!==ga[3])D.colorMask(g,p,L,K),ga[0]=g,ga[1]=p,ga[2]=L,ga[3]=K;g=G.cull_enable;g!==f.cull_enable&&(g?D.enable(2884):D.disable(2884),f.cull_enable=g);g=G.cull_face;g!==f.cull_face&&(D.cullFace(g),f.cull_face=g);g=G.frontFace;g!==f.frontFace&&
(D.frontFace(g),f.frontFace=g);g=G.lineWidth;g!==f.lineWidth&&(D.lineWidth(g),f.lineWidth=g);g=G.polygonOffset_enable;g!==f.polygonOffset_enable&&(g?D.enable(32823):D.disable(32823),f.polygonOffset_enable=g);g=S[0];p=S[1];if(g!==r[0]||p!==r[1])D.polygonOffset(g,p),r[0]=g,r[1]=p;g=G.sample_alpha;g!==f.sample_alpha&&(g?D.enable(32926):D.disable(32926),f.sample_alpha=g);g=G.sample_enable;g!==f.sample_enable&&(g?D.enable(32928):D.disable(32928),f.sample_enable=g);g=Z[0];p=Z[1];if(g!==h[0]||p!==h[1])D.sampleCoverage(g,
p),h[0]=g,h[1]=p;g=G.stencil_enable;g!==f.stencil_enable&&(g?D.enable(2960):D.disable(2960),f.stencil_enable=g);g=G.stencil_mask;g!==f.stencil_mask&&(D.stencilMask(g),f.stencil_mask=g);g=E[0];p=E[1];L=E[2];if(g!==C[0]||p!==C[1]||L!==C[2])D.stencilFunc(g,p,L),C[0]=g,C[1]=p,C[2]=L;g=a[0];p=a[1];L=a[2];K=a[3];if(g!==sa[0]||p!==sa[1]||L!==sa[2]||K!==sa[3])D.stencilOpSeparate(g,p,L,K),sa[0]=g,sa[1]=p,sa[2]=L,sa[3]=K;g=e[0];p=e[1];L=e[2];K=e[3];if(g!==R[0]||p!==R[1]||L!==R[2]||K!==R[3])D.stencilOpSeparate(g,
p,L,K),R[0]=g,R[1]=p,R[2]=L,R[3]=K;g=G.scissor_enable;g!==f.scissor_enable&&(g?D.enable(3089):D.disable(3089),f.scissor_enable=g);g=w[0];p=w[1];L=w[2];K=w[3];if(g!==V[0]||p!==V[1]||L!==V[2]||K!==V[3])D.scissor(g,p,L,K),V[0]=g,V[1]=p,V[2]=L,V[3]=K;g=A[0];p=A[1];L=A[2];K=A[3];if(g!==ta[0]||p!==ta[1]||L!==ta[2]||K!==ta[3])D.viewport(g,p,L,K),ta[0]=g,ta[1]=p,ta[2]=L,ta[3]=K;f.dirty=!1}if(g=f.profile)z=performance.now(),J.count+=q;p=T.program(T.vert,T.frag,H);D.useProgram(p.program);x.setVAO(null);L=p.id;
(K=X[L])||(K=X[L]=k(p));K.call(this,d,q);x.setVAO(null);g&&(J.cpuTime+=performance.now()-z)}}},"$26,color,freq,phase,projection,time,view":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R){var a,sa,A,ta,W,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,ia,Hb,ha;a=d.attributes;sa=d.context;A=d.current;ta=d.draw;W=d.elements;X=d.framebuffer;ea=d.gl;Q=d.isArrayLike;O=d.next;z=d.shader;p=d.uniforms;L=d.vao;K=O.blend_color;za=A.blend_color;
na=O.blend_equation;n=A.blend_equation;F=O.blend_func;aa=A.blend_func;M=O.colorMask;ma=A.colorMask;oa=O.depth_range;Ca=A.depth_range;xa=O.polygonOffset_offset;fa=A.polygonOffset_offset;Ea=O.sample_coverage;ka=A.sample_coverage;pa=O.scissor_box;Aa=A.scissor_box;Ba=O.stencil_func;ja=A.stencil_func;Yb=O.stencil_opBack;Ta=A.stencil_opBack;v=O.stencil_opFront;m=A.stencil_opFront;U=O.viewport;va=A.viewport;wa=new Float32Array(16);ia=new Float32Array(16);Hb=new Float32Array(16);ha=new Float32Array(16);return{draw:function(b){var c,
h,d,p;c=X.next;c!==X.cur&&(c?ea.bindFramebuffer(36160,c.framebuffer):ea.bindFramebuffer(36160,null),X.cur=c);if(A.dirty){var r;c=O.dither;c!==A.dither&&(c?ea.enable(3024):ea.disable(3024),A.dither=c);c=O.blend_enable;c!==A.blend_enable&&(c?ea.enable(3042):ea.disable(3042),A.blend_enable=c);c=K[0];d=K[1];p=K[2];r=K[3];if(c!==za[0]||d!==za[1]||p!==za[2]||r!==za[3])ea.blendColor(c,d,p,r),za[0]=c,za[1]=d,za[2]=p,za[3]=r;c=na[0];d=na[1];if(c!==n[0]||d!==n[1])ea.blendEquationSeparate(c,d),n[0]=c,n[1]=d;
c=F[0];d=F[1];p=F[2];r=F[3];if(c!==aa[0]||d!==aa[1]||p!==aa[2]||r!==aa[3])ea.blendFuncSeparate(c,d,p,r),aa[0]=c,aa[1]=d,aa[2]=p,aa[3]=r;c=O.depth_enable;c!==A.depth_enable&&(c?ea.enable(2929):ea.disable(2929),A.depth_enable=c);c=O.depth_func;c!==A.depth_func&&(ea.depthFunc(c),A.depth_func=c);c=oa[0];d=oa[1];if(c!==Ca[0]||d!==Ca[1])ea.depthRange(c,d),Ca[0]=c,Ca[1]=d;c=O.depth_mask;c!==A.depth_mask&&(ea.depthMask(c),A.depth_mask=c);c=M[0];d=M[1];p=M[2];r=M[3];if(c!==ma[0]||d!==ma[1]||p!==ma[2]||r!==
ma[3])ea.colorMask(c,d,p,r),ma[0]=c,ma[1]=d,ma[2]=p,ma[3]=r;c=O.cull_enable;c!==A.cull_enable&&(c?ea.enable(2884):ea.disable(2884),A.cull_enable=c);c=O.cull_face;c!==A.cull_face&&(ea.cullFace(c),A.cull_face=c);c=O.frontFace;c!==A.frontFace&&(ea.frontFace(c),A.frontFace=c);c=O.lineWidth;c!==A.lineWidth&&(ea.lineWidth(c),A.lineWidth=c);c=O.polygonOffset_enable;c!==A.polygonOffset_enable&&(c?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=c);c=xa[0];d=xa[1];if(c!==fa[0]||d!==fa[1])ea.polygonOffset(c,
d),fa[0]=c,fa[1]=d;c=O.sample_alpha;c!==A.sample_alpha&&(c?ea.enable(32926):ea.disable(32926),A.sample_alpha=c);c=O.sample_enable;c!==A.sample_enable&&(c?ea.enable(32928):ea.disable(32928),A.sample_enable=c);c=Ea[0];d=Ea[1];if(c!==ka[0]||d!==ka[1])ea.sampleCoverage(c,d),ka[0]=c,ka[1]=d;c=O.stencil_enable;c!==A.stencil_enable&&(c?ea.enable(2960):ea.disable(2960),A.stencil_enable=c);c=O.stencil_mask;c!==A.stencil_mask&&(ea.stencilMask(c),A.stencil_mask=c);c=Ba[0];d=Ba[1];p=Ba[2];if(c!==ja[0]||d!==ja[1]||
p!==ja[2])ea.stencilFunc(c,d,p),ja[0]=c,ja[1]=d,ja[2]=p;c=v[0];d=v[1];p=v[2];r=v[3];if(c!==m[0]||d!==m[1]||p!==m[2]||r!==m[3])ea.stencilOpSeparate(c,d,p,r),m[0]=c,m[1]=d,m[2]=p,m[3]=r;c=Yb[0];d=Yb[1];p=Yb[2];r=Yb[3];if(c!==Ta[0]||d!==Ta[1]||p!==Ta[2]||r!==Ta[3])ea.stencilOpSeparate(c,d,p,r),Ta[0]=c,Ta[1]=d,Ta[2]=p,Ta[3]=r;c=O.scissor_enable;c!==A.scissor_enable&&(c?ea.enable(3089):ea.disable(3089),A.scissor_enable=c);c=pa[0];d=pa[1];p=pa[2];r=pa[3];if(c!==Aa[0]||d!==Aa[1]||p!==Aa[2]||r!==Aa[3])ea.scissor(c,
d,p,r),Aa[0]=c,Aa[1]=d,Aa[2]=p,Aa[3]=r;c=U[0];d=U[1];p=U[2];r=U[3];if(c!==va[0]||d!==va[1]||p!==va[2]||r!==va[3])ea.viewport(c,d,p,r),va[0]=c,va[1]=d,va[2]=p,va[3]=r;A.dirty=!1}if(c=A.profile)h=performance.now(),J.count++;ea.useProgram(g.program);L.setVAO(null);d=V.location;p=a[d];p.buffer||ea.enableVertexAttribArray(d);if(5126!==p.type||4!==p.size||p.buffer!==k||!1!==p.normalized||0!==p.offset||44!==p.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(d,4,5126,!1,44,0),p.type=5126,p.size=
4,p.buffer=k,p.normalized=!1,p.offset=0,p.stride=44;d=E.location;p=a[d];p.buffer||ea.enableVertexAttribArray(d);if(5126!==p.type||4!==p.size||p.buffer!==q||!1!==p.normalized||16!==p.offset||44!==p.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(d,4,5126,!1,44,16),p.type=5126,p.size=4,p.buffer=q,p.normalized=!1,p.offset=16,p.stride=44;d=w.location;p=a[d];p.buffer||ea.enableVertexAttribArray(d);if(5126!==p.type||3!==p.size||p.buffer!==f||!1!==p.normalized||32!==p.offset||44!==p.stride)ea.bindBuffer(34962,
f.buffer),ea.vertexAttribPointer(d,3,5126,!1,44,32),p.type=5126,p.size=3,p.buffer=f,p.normalized=!1,p.offset=32,p.stride=44;d=B.call(this,sa,b,0);"number"!==typeof d&&ba.commandRaise(D,H);ea.uniform1f(e.location,d);d=G.call(this,sa,b,0);Q(d)&&16===d.length||ba.commandRaise(T,H);ea.uniformMatrix4fv(R.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(wa[0]=d[0],wa[1]=d[1],wa[2]=d[2],wa[3]=d[3],wa[4]=d[4],wa[5]=d[5],wa[6]=d[6],wa[7]=d[7],wa[8]=d[8],wa[9]=d[9],wa[10]=d[10],wa[11]=d[11],wa[12]=
d[12],wa[13]=d[13],wa[14]=d[14],wa[15]=d[15],wa));b=x.call(this,sa,b,0);Q(b)&&16===b.length||ba.commandRaise(t,H);ea.uniformMatrix4fv(C.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(ia[0]=b[0],ia[1]=b[1],ia[2]=b[2],ia[3]=b[3],ia[4]=b[4],ia[5]=b[5],ia[6]=b[6],ia[7]=b[7],ia[8]=b[8],ia[9]=b[9],ia[10]=b[10],ia[11]=b[11],ia[12]=b[12],ia[13]=b[13],ia[14]=b[14],ia[15]=b[15],ia));(b=ta.elements)?ea.bindBuffer(34963,b.buffer.buffer):L.currentVAO&&(b=W.getElements(L.currentVAO.elements))&&ea.bindBuffer(34963,
b.buffer.buffer);d=ta.offset;b?ea.drawElements(0,1E4,b.type,d<<(b.type-5121>>1)):ea.drawArrays(0,d,1E4);L.setVAO(null);c&&(J.cpuTime+=performance.now()-h)},scope:function(a,b,c){var e,d,h,m,n,r,v,g,ja,w,U,C,F,M,E,fa,ha,t,Yb,Ba,x,D,H,L,aa,K,B,O,va,Q,S,xa,R,G,oa,T,ka,ga,Z,X,ba,V,ea,za,Ta;if(e=A.profile)d=performance.now(),J.count++;h=ta.count;ta.count=1E4;m=ta.primitive;ta.primitive=0;n=l.call(this,sa,a,c);r=p[5];p[5]=n;v=ca.call(this,sa,a,c);n=p[3];p[3]=v;g=u.call(this,sa,a,c);v=p[4];p[4]=g;g=N.buffer;
N.buffer=f;ja=N.divisor;N.divisor=0;w=N.normalized;N.normalized=!1;U=N.offset;N.offset=32;C=N.size;N.size=0;F=N.state;N.state=1;M=N.stride;N.stride=44;E=N.type;N.type=5126;fa=N.w;N.w=0;ha=N.x;N.x=0;t=N.y;N.y=0;Yb=N.z;N.z=0;Ba=y.buffer;y.buffer=k;x=y.divisor;y.divisor=0;D=y.normalized;y.normalized=!1;H=y.offset;y.offset=0;L=y.size;y.size=0;aa=y.state;y.state=1;K=y.stride;y.stride=44;B=y.type;y.type=5126;O=y.w;y.w=0;va=y.x;y.x=0;Q=y.y;y.y=0;S=y.z;y.z=0;xa=P.buffer;P.buffer=q;R=P.divisor;P.divisor=0;
G=P.normalized;P.normalized=!1;oa=P.offset;P.offset=16;T=P.size;P.size=0;ka=P.state;P.state=1;ga=P.stride;P.stride=44;Z=P.type;P.type=5126;X=P.w;P.w=0;ba=P.x;P.x=0;V=P.y;P.y=0;ea=P.z;P.z=0;za=z.vert;z.vert=2;Ta=z.frag;z.frag=1;b(sa,a,c);e&&(J.cpuTime+=performance.now()-d);ta.count=h;ta.primitive=m;p[5]=r;p[3]=n;p[4]=v;N.buffer=g;N.divisor=ja;N.normalized=w;N.offset=U;N.size=C;N.state=F;N.stride=M;N.type=E;N.w=fa;N.x=ha;N.y=t;N.z=Yb;y.buffer=Ba;y.divisor=x;y.normalized=D;y.offset=H;y.size=L;y.state=
aa;y.stride=K;y.type=B;y.w=O;y.x=va;y.y=Q;y.z=S;P.buffer=xa;P.divisor=R;P.normalized=G;P.offset=oa;P.size=T;P.state=ka;P.stride=ga;P.type=Z;P.w=X;P.x=ba;P.y=V;P.z=ea;z.vert=za;z.frag=Ta},batch:function(d,p){var g,u,y;g=X.next;g!==X.cur&&(g?ea.bindFramebuffer(36160,g.framebuffer):ea.bindFramebuffer(36160,null),X.cur=g);if(A.dirty){var z,t,x;g=O.dither;g!==A.dither&&(g?ea.enable(3024):ea.disable(3024),A.dither=g);g=O.blend_enable;g!==A.blend_enable&&(g?ea.enable(3042):ea.disable(3042),A.blend_enable=
g);g=K[0];z=K[1];t=K[2];x=K[3];if(g!==za[0]||z!==za[1]||t!==za[2]||x!==za[3])ea.blendColor(g,z,t,x),za[0]=g,za[1]=z,za[2]=t,za[3]=x;g=na[0];z=na[1];if(g!==n[0]||z!==n[1])ea.blendEquationSeparate(g,z),n[0]=g,n[1]=z;g=F[0];z=F[1];t=F[2];x=F[3];if(g!==aa[0]||z!==aa[1]||t!==aa[2]||x!==aa[3])ea.blendFuncSeparate(g,z,t,x),aa[0]=g,aa[1]=z,aa[2]=t,aa[3]=x;g=O.depth_enable;g!==A.depth_enable&&(g?ea.enable(2929):ea.disable(2929),A.depth_enable=g);g=O.depth_func;g!==A.depth_func&&(ea.depthFunc(g),A.depth_func=
g);g=oa[0];z=oa[1];if(g!==Ca[0]||z!==Ca[1])ea.depthRange(g,z),Ca[0]=g,Ca[1]=z;g=O.depth_mask;g!==A.depth_mask&&(ea.depthMask(g),A.depth_mask=g);g=M[0];z=M[1];t=M[2];x=M[3];if(g!==ma[0]||z!==ma[1]||t!==ma[2]||x!==ma[3])ea.colorMask(g,z,t,x),ma[0]=g,ma[1]=z,ma[2]=t,ma[3]=x;g=O.cull_enable;g!==A.cull_enable&&(g?ea.enable(2884):ea.disable(2884),A.cull_enable=g);g=O.cull_face;g!==A.cull_face&&(ea.cullFace(g),A.cull_face=g);g=O.frontFace;g!==A.frontFace&&(ea.frontFace(g),A.frontFace=g);g=O.lineWidth;g!==
A.lineWidth&&(ea.lineWidth(g),A.lineWidth=g);g=O.polygonOffset_enable;g!==A.polygonOffset_enable&&(g?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=g);g=xa[0];z=xa[1];if(g!==fa[0]||z!==fa[1])ea.polygonOffset(g,z),fa[0]=g,fa[1]=z;g=O.sample_alpha;g!==A.sample_alpha&&(g?ea.enable(32926):ea.disable(32926),A.sample_alpha=g);g=O.sample_enable;g!==A.sample_enable&&(g?ea.enable(32928):ea.disable(32928),A.sample_enable=g);g=Ea[0];z=Ea[1];if(g!==ka[0]||z!==ka[1])ea.sampleCoverage(g,z),ka[0]=g,ka[1]=
z;g=O.stencil_enable;g!==A.stencil_enable&&(g?ea.enable(2960):ea.disable(2960),A.stencil_enable=g);g=O.stencil_mask;g!==A.stencil_mask&&(ea.stencilMask(g),A.stencil_mask=g);g=Ba[0];z=Ba[1];t=Ba[2];if(g!==ja[0]||z!==ja[1]||t!==ja[2])ea.stencilFunc(g,z,t),ja[0]=g,ja[1]=z,ja[2]=t;g=v[0];z=v[1];t=v[2];x=v[3];if(g!==m[0]||z!==m[1]||t!==m[2]||x!==m[3])ea.stencilOpSeparate(g,z,t,x),m[0]=g,m[1]=z,m[2]=t,m[3]=x;g=Yb[0];z=Yb[1];t=Yb[2];x=Yb[3];if(g!==Ta[0]||z!==Ta[1]||t!==Ta[2]||x!==Ta[3])ea.stencilOpSeparate(g,
z,t,x),Ta[0]=g,Ta[1]=z,Ta[2]=t,Ta[3]=x;g=O.scissor_enable;g!==A.scissor_enable&&(g?ea.enable(3089):ea.disable(3089),A.scissor_enable=g);g=pa[0];z=pa[1];t=pa[2];x=pa[3];if(g!==Aa[0]||z!==Aa[1]||t!==Aa[2]||x!==Aa[3])ea.scissor(g,z,t,x),Aa[0]=g,Aa[1]=z,Aa[2]=t,Aa[3]=x;g=U[0];z=U[1];t=U[2];x=U[3];if(g!==va[0]||z!==va[1]||t!==va[2]||x!==va[3])ea.viewport(g,z,t,x),va[0]=g,va[1]=z,va[2]=t,va[3]=x;A.dirty=!1}if(g=A.profile)u=performance.now(),J.count+=p;ea.useProgram(ga.program);L.setVAO(null);z=V.location;
t=a[z];t.buffer||ea.enableVertexAttribArray(z);if(5126!==t.type||4!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||44!==t.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(z,4,5126,!1,44,0),t.type=5126,t.size=4,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=44;z=E.location;t=a[z];t.buffer||ea.enableVertexAttribArray(z);if(5126!==t.type||4!==t.size||t.buffer!==q||!1!==t.normalized||16!==t.offset||44!==t.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(z,4,5126,!1,44,16),
t.type=5126,t.size=4,t.buffer=q,t.normalized=!1,t.offset=16,t.stride=44;z=w.location;t=a[z];t.buffer||ea.enableVertexAttribArray(z);if(5126!==t.type||3!==t.size||t.buffer!==f||!1!==t.normalized||32!==t.offset||44!==t.stride)ea.bindBuffer(34962,f.buffer),ea.vertexAttribPointer(z,3,5126,!1,44,32),t.type=5126,t.size=3,t.buffer=f,t.normalized=!1,t.offset=32,t.stride=44;z=c.call(this,sa,void 0,y);"number"!==typeof z&&ba.commandRaise(b,H);ea.uniform1f(e.location,z);z=S.call(this,sa,void 0,y);Q(z)&&16===
z.length||ba.commandRaise(r,H);ea.uniformMatrix4fv(R.location,!1,Array.isArray(z)||z instanceof Float32Array?z:(Hb[0]=z[0],Hb[1]=z[1],Hb[2]=z[2],Hb[3]=z[3],Hb[4]=z[4],Hb[5]=z[5],Hb[6]=z[6],Hb[7]=z[7],Hb[8]=z[8],Hb[9]=z[9],Hb[10]=z[10],Hb[11]=z[11],Hb[12]=z[12],Hb[13]=z[13],Hb[14]=z[14],Hb[15]=z[15],Hb));y=Z.call(this,sa,void 0,y);Q(y)&&16===y.length||ba.commandRaise(h,H);ea.uniformMatrix4fv(C.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(ha[0]=y[0],ha[1]=y[1],ha[2]=y[2],ha[3]=y[3],ha[4]=
y[4],ha[5]=y[5],ha[6]=y[6],ha[7]=y[7],ha[8]=y[8],ha[9]=y[9],ha[10]=y[10],ha[11]=y[11],ha[12]=y[12],ha[13]=y[13],ha[14]=y[14],ha[15]=y[15],ha));(z=ta.elements)?ea.bindBuffer(34963,z.buffer.buffer):L.currentVAO&&(z=W.getElements(L.currentVAO.elements))&&ea.bindBuffer(34963,z.buffer.buffer);t=ta.offset;for(y=0;y<p;++y)z?ea.drawElements(0,1E4,z.type,t<<(z.type-5121>>1)):ea.drawArrays(0,t,1E4);L.setVAO(null);g&&(J.cpuTime+=performance.now()-u)}}},"$34,atlas,normal,position,projection,uv,view":function(d,
ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,W,X,ea,Q){var O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,ia,Hb,ha,I,ra,Fa,qa,ya,Ga,la,Y,ua,Ja,Da;O=d.attributes;z=d.buffer;p=d.context;L=d.current;K=d.draw;za=d.elements;na=d.framebuffer;n=d.gl;F=d.isArrayLike;aa=d.isBufferArgs;M=d.next;ma=d.shader;oa=d.uniforms;Ca=d.vao;xa=M.blend_color;fa=L.blend_color;Ea=M.blend_equation;ka=L.blend_equation;pa=M.blend_func;Aa=L.blend_func;Ba=M.colorMask;
ja=L.colorMask;Yb=M.depth_range;Ta=L.depth_range;v=M.polygonOffset_offset;m=L.polygonOffset_offset;U=M.sample_coverage;va=L.sample_coverage;wa=M.scissor_box;ia=L.scissor_box;Hb=M.stencil_func;ha=L.stencil_func;I=M.stencil_opBack;ra=L.stencil_opBack;Fa=M.stencil_opFront;qa=L.stencil_opFront;ya=M.viewport;Ga=L.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);ua=new Float32Array(16);Ja=new Float32Array(16);Da=new Float32Array(16);
return{draw:function(a){var b,c,e,d,h,r,w,C,y,u,E,K,S,P,R,oa,N,ga,Z,V,ca,ma,sa,Da,Ja,fb,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb,$a,ob;b=p.view;c=g.call(this,p,a,0);p.view=c;e=na.next;e!==na.cur&&(e?n.bindFramebuffer(36160,e.framebuffer):n.bindFramebuffer(36160,null),na.cur=e);if(L.dirty){var Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,
Ac,vc,ab;Ua=M.dither;Ua!==L.dither&&(Ua?n.enable(3024):n.disable(3024),L.dither=Ua);yd=M.blend_enable;yd!==L.blend_enable&&(yd?n.enable(3042):n.disable(3042),L.blend_enable=yd);Ib=xa[0];Jb=xa[1];sc=xa[2];Ob=xa[3];if(Ib!==fa[0]||Jb!==fa[1]||sc!==fa[2]||Ob!==fa[3])n.blendColor(Ib,Jb,sc,Ob),fa[0]=Ib,fa[1]=Jb,fa[2]=sc,fa[3]=Ob;jb=Ea[0];Gb=Ea[1];if(jb!==ka[0]||Gb!==ka[1])n.blendEquationSeparate(jb,Gb),ka[0]=jb,ka[1]=Gb;Db=pa[0];wb=pa[1];hb=pa[2];Zb=pa[3];if(Db!==Aa[0]||wb!==Aa[1]||hb!==Aa[2]||Zb!==Aa[3])n.blendFuncSeparate(Db,
wb,hb,Zb),Aa[0]=Db,Aa[1]=wb,Aa[2]=hb,Aa[3]=Zb;Pb=M.depth_enable;Pb!==L.depth_enable&&(Pb?n.enable(2929):n.disable(2929),L.depth_enable=Pb);qb=M.depth_func;qb!==L.depth_func&&(n.depthFunc(qb),L.depth_func=qb);Ra=Yb[0];Ub=Yb[1];if(Ra!==Ta[0]||Ub!==Ta[1])n.depthRange(Ra,Ub),Ta[0]=Ra,Ta[1]=Ub;zb=M.depth_mask;zb!==L.depth_mask&&(n.depthMask(zb),L.depth_mask=zb);dc=Ba[0];ib=Ba[1];pb=Ba[2];Ia=Ba[3];if(dc!==ja[0]||ib!==ja[1]||pb!==ja[2]||Ia!==ja[3])n.colorMask(dc,ib,pb,Ia),ja[0]=dc,ja[1]=ib,ja[2]=pb,ja[3]=
Ia;rb=M.frontFace;rb!==L.frontFace&&(n.frontFace(rb),L.frontFace=rb);Ka=M.lineWidth;Ka!==L.lineWidth&&(n.lineWidth(Ka),L.lineWidth=Ka);eb=M.polygonOffset_enable;eb!==L.polygonOffset_enable&&(eb?n.enable(32823):n.disable(32823),L.polygonOffset_enable=eb);gb=v[0];La=v[1];if(gb!==m[0]||La!==m[1])n.polygonOffset(gb,La),m[0]=gb,m[1]=La;kb=M.sample_alpha;kb!==L.sample_alpha&&(kb?n.enable(32926):n.disable(32926),L.sample_alpha=kb);Va=M.sample_enable;Va!==L.sample_enable&&(Va?n.enable(32928):n.disable(32928),
L.sample_enable=Va);tb=U[0];sb=U[1];if(tb!==va[0]||sb!==va[1])n.sampleCoverage(tb,sb),va[0]=tb,va[1]=sb;Oa=M.stencil_enable;Oa!==L.stencil_enable&&(Oa?n.enable(2960):n.disable(2960),L.stencil_enable=Oa);Cc=M.stencil_mask;Cc!==L.stencil_mask&&(n.stencilMask(Cc),L.stencil_mask=Cc);Qa=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Qa!==ha[0]||Kb!==ha[1]||Eb!==ha[2])n.stencilFunc(Qa,Kb,Eb),ha[0]=Qa,ha[1]=Kb,ha[2]=Eb;Ma=Fa[0];wd=Fa[1];Xa=Fa[2];Lb=Fa[3];if(Ma!==qa[0]||wd!==qa[1]||Xa!==qa[2]||Lb!==qa[3])n.stencilOpSeparate(Ma,
wd,Xa,Lb),qa[0]=Ma,qa[1]=wd,qa[2]=Xa,qa[3]=Lb;Mb=I[0];lb=I[1];Na=I[2];$b=I[3];if(Mb!==ra[0]||lb!==ra[1]||Na!==ra[2]||$b!==ra[3])n.stencilOpSeparate(Mb,lb,Na,$b),ra[0]=Mb,ra[1]=lb,ra[2]=Na,ra[3]=$b;Pa=M.scissor_enable;Pa!==L.scissor_enable&&(Pa?n.enable(3089):n.disable(3089),L.scissor_enable=Pa);ub=wa[0];vb=wa[1];Sa=wa[2];nb=wa[3];if(ub!==ia[0]||vb!==ia[1]||Sa!==ia[2]||nb!==ia[3])n.scissor(ub,vb,Sa,nb),ia[0]=ub,ia[1]=vb,ia[2]=Sa,ia[3]=nb;ic=ya[0];Ac=ya[1];vc=ya[2];ab=ya[3];if(ic!==Ga[0]||Ac!==Ga[1]||
vc!==Ga[2]||ab!==Ga[3])n.viewport(ic,Ac,vc,ab),Ga[0]=ic,Ga[1]=Ac,Ga[2]=vc,Ga[3]=ab}n.enable(2884);L.cull_enable=!0;n.cullFace(1029);L.cull_face=1029;if(d=L.profile)h=performance.now(),J.count++;n.useProgram(k.program);Ca.setVAO(null);(r=a.position)&&("object"===typeof r||"function"===typeof r)&&(aa(r)||z.getBuffer(r)||z.getBuffer(r.buffer)||aa(r.buffer)||"constant"in r&&("number"===typeof r.constant||F(r.constant)))||ba.commandRaise(q,H);w=!1;C=null;y=!1;E=u=0;K=1;S=0;P=5126;ga=N=oa=R=0;aa(r)?(w=
!0,C=z.createStream(34962,r),P=C.dtype):(C=z.getBuffer(r))?P=C.dtype:"constant"in r?(K=2,"number"===typeof r.constant?(oa=r.constant,N=ga=R=0):(oa=0<r.constant.length?r.constant[0]:0,N=1<r.constant.length?r.constant[1]:0,ga=2<r.constant.length?r.constant[2]:0,R=3<r.constant.length?r.constant[3]:0)):(C=aa(r.buffer)?z.createStream(34962,r.buffer):z.getBuffer(r.buffer),P="type"in r?la[r.type]:C.dtype,y=!!r.normalized,E=r.size|0,u=r.offset|0,S=r.stride|0);Z=W.location;V=O[Z];if(1===K){if(V.buffer||n.enableVertexAttribArray(Z),
ca=E||3,V.type!==P||V.size!==ca||V.buffer!==C||V.normalized!==y||V.offset!==u||V.stride!==S)n.bindBuffer(34962,C.buffer),n.vertexAttribPointer(Z,ca,P,y,S,u),V.type=P,V.size=ca,V.buffer=C,V.normalized=y,V.offset=u,V.stride=S}else if(V.buffer&&(n.disableVertexAttribArray(Z),V.buffer=null),V.x!==oa||V.y!==N||V.z!==ga||V.w!==R)n.vertexAttrib4f(Z,oa,N,ga,R),V.x=oa,V.y=N,V.z=ga,V.w=R;(ma=a.normal)&&("object"===typeof ma||"function"===typeof ma)&&(aa(ma)||z.getBuffer(ma)||z.getBuffer(ma.buffer)||aa(ma.buffer)||
"constant"in ma&&("number"===typeof ma.constant||F(ma.constant)))||ba.commandRaise(f,H);sa=!1;Da=null;Ja=!1;Ad=fb=0;Zd=1;md=0;bd=5126;Gc=od=Lc=rd=0;aa(ma)?(sa=!0,Da=z.createStream(34962,ma),bd=Da.dtype):(Da=z.getBuffer(ma))?bd=Da.dtype:"constant"in ma?(Zd=2,"number"===typeof ma.constant?(Lc=ma.constant,od=Gc=rd=0):(Lc=0<ma.constant.length?ma.constant[0]:0,od=1<ma.constant.length?ma.constant[1]:0,Gc=2<ma.constant.length?ma.constant[2]:0,rd=3<ma.constant.length?ma.constant[3]:0)):(Da=aa(ma.buffer)?
z.createStream(34962,ma.buffer):z.getBuffer(ma.buffer),bd="type"in ma?la[ma.type]:Da.dtype,Ja=!!ma.normalized,Ad=ma.size|0,fb=ma.offset|0,md=ma.stride|0);fd=ta.location;Pc=O[fd];if(1===Zd){if(Pc.buffer||n.enableVertexAttribArray(fd),Wc=Ad||3,Pc.type!==bd||Pc.size!==Wc||Pc.buffer!==Da||Pc.normalized!==Ja||Pc.offset!==fb||Pc.stride!==md)n.bindBuffer(34962,Da.buffer),n.vertexAttribPointer(fd,Wc,bd,Ja,md,fb),Pc.type=bd,Pc.size=Wc,Pc.buffer=Da,Pc.normalized=Ja,Pc.offset=fb,Pc.stride=md}else if(Pc.buffer&&
(n.disableVertexAttribArray(fd),Pc.buffer=null),Pc.x!==Lc||Pc.y!==od||Pc.z!==Gc||Pc.w!==rd)n.vertexAttrib4f(fd,Lc,od,Gc,rd),Pc.x=Lc,Pc.y=od,Pc.z=Gc,Pc.w=rd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(aa(Bb)||z.getBuffer(Bb)||z.getBuffer(Bb.buffer)||aa(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||F(Bb.constant)))||ba.commandRaise(B,H);Fb=!1;Dc=null;xb=!1;Cb=xc=0;Jc=1;nc=0;Hc=5126;gc=Ec=Vc=Xc=0;aa(Bb)?(Fb=!0,Dc=z.createStream(34962,Bb),Hc=Dc.dtype):(Dc=z.getBuffer(Bb))?
Hc=Dc.dtype:"constant"in Bb?(Jc=2,"number"===typeof Bb.constant?(Vc=Bb.constant,Ec=gc=Xc=0):(Vc=0<Bb.constant.length?Bb.constant[0]:0,Ec=1<Bb.constant.length?Bb.constant[1]:0,gc=2<Bb.constant.length?Bb.constant[2]:0,Xc=3<Bb.constant.length?Bb.constant[3]:0)):(Dc=aa(Bb.buffer)?z.createStream(34962,Bb.buffer):z.getBuffer(Bb.buffer),Hc="type"in Bb?la[Bb.type]:Dc.dtype,xb=!!Bb.normalized,Cb=Bb.size|0,xc=Bb.offset|0,nc=Bb.stride|0);Ic=ea.location;qc=O[Ic];if(1===Jc){if(qc.buffer||n.enableVertexAttribArray(Ic),
rc=Cb||2,qc.type!==Hc||qc.size!==rc||qc.buffer!==Dc||qc.normalized!==xb||qc.offset!==xc||qc.stride!==nc)n.bindBuffer(34962,Dc.buffer),n.vertexAttribPointer(Ic,rc,Hc,xb,nc,xc),qc.type=Hc,qc.size=rc,qc.buffer=Dc,qc.normalized=xb,qc.offset=xc,qc.stride=nc}else if(qc.buffer&&(n.disableVertexAttribArray(Ic),qc.buffer=null),qc.x!==Vc||qc.y!==Ec||qc.z!==gc||qc.w!==Xc)n.vertexAttrib4f(Ic,Vc,Ec,gc,Xc),qc.x=Vc,qc.y=Ec,qc.z=gc,qc.w=Xc;oc=D.call(this,p,a,0);F(oc)&&16===oc.length||ba.commandRaise(G,H);n.uniformMatrix4fv(X.location,
!1,Array.isArray(oc)||oc instanceof Float32Array?oc:(Y[0]=oc[0],Y[1]=oc[1],Y[2]=oc[2],Y[3]=oc[3],Y[4]=oc[4],Y[5]=oc[5],Y[6]=oc[6],Y[7]=oc[7],Y[8]=oc[8],Y[9]=oc[9],Y[10]=oc[10],Y[11]=oc[11],Y[12]=oc[12],Y[13]=oc[13],Y[14]=oc[14],Y[15]=oc[15],Y));hc=p.view;F(hc)&&16===hc.length||ba.commandRaise(T,H);n.uniformMatrix4fv(Q.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(ua[0]=hc[0],ua[1]=hc[1],ua[2]=hc[2],ua[3]=hc[3],ua[4]=hc[4],ua[5]=hc[5],ua[6]=hc[6],ua[7]=hc[7],ua[8]=hc[8],ua[9]=hc[9],
ua[10]=hc[10],ua[11]=hc[11],ua[12]=hc[12],ua[13]=hc[13],ua[14]=hc[14],ua[15]=hc[15],ua));(Za=a.atlas)&&"framebuffer"===Za._reglType&&(Za=Za.color[0]);"function"===typeof Za&&"texture2d"===Za._reglType||ba.commandRaise(x,H);cc=Za._texture;n.uniform1i(A.location,cc.bind());yb=a.elements;bb=null;(Nb=aa(yb))?bb=za.createStream(yb):(bb=za.getElements(yb),yb&&!bb&&ba.commandRaise(t,H));bb&&n.bindBuffer(34963,bb.buffer.buffer);$a=bb?bb.primType:4;ob=bb?bb.vertCount:-1;0<=ob||ba.commandRaise(l,H);ob&&(bb?
n.drawElements($a,ob,bb.type,0<<(bb.type-5121>>1)):n.drawArrays($a,0,ob),L.dirty=!0,Ca.setVAO(null),p.view=b,d&&(J.cpuTime+=performance.now()-h),w&&z.destroyStream(C),sa&&z.destroyStream(Da),Fb&&z.destroyStream(Dc),cc.unbind(),Nb&&za.destroyStream(bb))},scope:function(a,e,f){var d,h,k,m,n,g,r,v,q,I,ja,w,U,A,C,t,E,x,fa,ha,Yb,Ba,D,ra,l,Fa,B,O,va,Q,qa,R,xa,G,Y,T,V,Z,ka,X,ea,Ta,ya,pa,Aa,Ea,sa,wa,ta,Ga,Ca,na,Hb,W,ua,ia,Da,db,Ja,Bd,Ua,fb,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,
gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb;d=p.view;h=ca.call(this,p,a,f);p.view=h;k=M.cull_enable;M.cull_enable=!0;m=M.cull_face;M.cull_face=1029;if(n=L.profile)g=performance.now(),J.count++;r=a.elements;v=null;(q=aa(r))?v=za.createStream(r):(v=za.getElements(r),r&&!v&&ba.commandRaise(u,H));I=K.elements;K.elements=v;ja=K.offset;K.offset=0;w=v?v.vertCount:-1;U=K.count;K.count=w;A=v?v.primType:4;C=K.primitive;K.primitive=A;t=a.atlas;E=oa[5];oa[5]=t;x=N.call(this,p,a,f);fa=oa[3];oa[3]=x;ha=
p.view;Yb=oa[4];oa[4]=ha;(Ba=a.normal)&&("object"===typeof Ba||"function"===typeof Ba)&&(aa(Ba)||z.getBuffer(Ba)||z.getBuffer(Ba.buffer)||aa(Ba.buffer)||"constant"in Ba&&("number"===typeof Ba.constant||F(Ba.constant)))||ba.commandRaise(y,H);D=!1;ra=null;l=0;Fa=!1;O=B=0;va=1;Q=0;qa=5126;Y=G=xa=R=0;aa(Ba)?(D=!0,ra=z.createStream(34962,Ba),qa=ra.dtype):(ra=z.getBuffer(Ba))?qa=ra.dtype:"constant"in Ba?(va=2,"number"===typeof Ba.constant?(xa=Ba.constant,G=Y=R=0):(xa=0<Ba.constant.length?Ba.constant[0]:
0,G=1<Ba.constant.length?Ba.constant[1]:0,Y=2<Ba.constant.length?Ba.constant[2]:0,R=3<Ba.constant.length?Ba.constant[3]:0)):(ra=aa(Ba.buffer)?z.createStream(34962,Ba.buffer):z.getBuffer(Ba.buffer),qa="type"in Ba?la[Ba.type]:ra.dtype,Fa=!!Ba.normalized,O=Ba.size|0,B=Ba.offset|0,Q=Ba.stride|0,l=Ba.divisor|0);T=P.buffer;P.buffer=ra;V=P.divisor;P.divisor=l;Z=P.normalized;P.normalized=Fa;ka=P.offset;P.offset=B;X=P.size;P.size=O;ea=P.state;P.state=va;Ta=P.stride;P.stride=Q;ya=P.type;P.type=qa;pa=P.w;P.w=
R;Aa=P.x;P.x=xa;Ea=P.y;P.y=G;sa=P.z;P.z=Y;(wa=a.position)&&("object"===typeof wa||"function"===typeof wa)&&(aa(wa)||z.getBuffer(wa)||z.getBuffer(wa.buffer)||aa(wa.buffer)||"constant"in wa&&("number"===typeof wa.constant||F(wa.constant)))||ba.commandRaise(ga,H);ta=!1;Ga=null;Ca=0;na=!1;W=Hb=0;ua=1;ia=0;Da=5126;Ua=Bd=Ja=db=0;aa(wa)?(ta=!0,Ga=z.createStream(34962,wa),Da=Ga.dtype):(Ga=z.getBuffer(wa))?Da=Ga.dtype:"constant"in wa?(ua=2,"number"===typeof wa.constant?(Ja=wa.constant,Bd=Ua=db=0):(Ja=0<wa.constant.length?
wa.constant[0]:0,Bd=1<wa.constant.length?wa.constant[1]:0,Ua=2<wa.constant.length?wa.constant[2]:0,db=3<wa.constant.length?wa.constant[3]:0)):(Ga=aa(wa.buffer)?z.createStream(34962,wa.buffer):z.getBuffer(wa.buffer),Da="type"in wa?la[wa.type]:Ga.dtype,na=!!wa.normalized,W=wa.size|0,Hb=wa.offset|0,ia=wa.stride|0,Ca=wa.divisor|0);fb=c.buffer;c.buffer=Ga;Ib=c.divisor;c.divisor=Ca;Jb=c.normalized;c.normalized=na;sc=c.offset;c.offset=Hb;Ob=c.size;c.size=W;jb=c.state;c.state=ua;Gb=c.stride;c.stride=ia;Db=
c.type;c.type=Da;wb=c.w;c.w=db;hb=c.x;c.x=Ja;Zb=c.y;c.y=Bd;Pb=c.z;c.z=Ua;(qb=a.uv)&&("object"===typeof qb||"function"===typeof qb)&&(aa(qb)||z.getBuffer(qb)||z.getBuffer(qb.buffer)||aa(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||F(qb.constant)))||ba.commandRaise(b,H);Ra=!1;Ub=null;zb=0;dc=!1;pb=ib=0;Ia=1;rb=0;Ka=5126;kb=La=gb=eb=0;aa(qb)?(Ra=!0,Ub=z.createStream(34962,qb),Ka=Ub.dtype):(Ub=z.getBuffer(qb))?Ka=Ub.dtype:"constant"in qb?(Ia=2,"number"===typeof qb.constant?(gb=qb.constant,
La=kb=eb=0):(gb=0<qb.constant.length?qb.constant[0]:0,La=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,eb=3<qb.constant.length?qb.constant[3]:0)):(Ub=aa(qb.buffer)?z.createStream(34962,qb.buffer):z.getBuffer(qb.buffer),Ka="type"in qb?la[qb.type]:Ub.dtype,dc=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|0);Va=S.buffer;S.buffer=Ub;tb=S.divisor;S.divisor=zb;sb=S.normalized;S.normalized=dc;Oa=S.offset;S.offset=ib;Cc=S.size;S.size=pb;Qa=S.state;
S.state=Ia;Kb=S.stride;S.stride=rb;Eb=S.type;S.type=Ka;Ma=S.w;S.w=eb;wd=S.x;S.x=gb;Xa=S.y;S.y=La;Lb=S.z;S.z=kb;Mb=ma.vert;ma.vert=2;lb=ma.frag;ma.frag=1;L.dirty=!0;e(p,a,f);p.view=d;M.cull_enable=k;M.cull_face=m;n&&(J.cpuTime+=performance.now()-g);q&&za.destroyStream(v);K.elements=I;K.offset=ja;K.count=U;K.primitive=C;oa[5]=E;oa[3]=fa;oa[4]=Yb;D&&z.destroyStream(ra);P.buffer=T;P.divisor=V;P.normalized=Z;P.offset=ka;P.size=X;P.state=ea;P.stride=Ta;P.type=ya;P.w=pa;P.x=Aa;P.y=Ea;P.z=sa;ta&&z.destroyStream(Ga);
c.buffer=fb;c.divisor=Ib;c.normalized=Jb;c.offset=sc;c.size=Ob;c.state=jb;c.stride=Gb;c.type=Db;c.w=wb;c.x=hb;c.y=Zb;c.z=Pb;Ra&&z.destroyStream(Ub);S.buffer=Va;S.divisor=tb;S.normalized=sb;S.offset=Oa;S.size=Cc;S.state=Qa;S.stride=Kb;S.type=Eb;S.w=Ma;S.x=wd;S.y=Xa;S.z=Lb;ma.vert=Mb;ma.frag=lb;L.dirty=!0},batch:function(b,c){var f,d,k,g,q,t,y;f=p.view;d=r.call(this,p,b,0);p.view=d;k=na.next;k!==na.cur&&(k?n.bindFramebuffer(36160,k.framebuffer):n.bindFramebuffer(36160,null),na.cur=k);if(L.dirty){var u,
x,D,l,K,B,S,P,G,Y,oa,N,T,ga,ca,ma,ua,fb,Ad,Zd,md,bd,rd,Lc,od,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,nc,Hc,Xc,Vc,Ec,gc,Ic,qc,rc,oc,hc,Za,cc,yb,bb,Nb;u=M.dither;u!==L.dither&&(u?n.enable(3024):n.disable(3024),L.dither=u);x=M.blend_enable;x!==L.blend_enable&&(x?n.enable(3042):n.disable(3042),L.blend_enable=x);D=xa[0];l=xa[1];K=xa[2];B=xa[3];if(D!==fa[0]||l!==fa[1]||K!==fa[2]||B!==fa[3])n.blendColor(D,l,K,B),fa[0]=D,fa[1]=l,fa[2]=K,fa[3]=B;S=Ea[0];P=Ea[1];if(S!==ka[0]||P!==ka[1])n.blendEquationSeparate(S,P),
ka[0]=S,ka[1]=P;G=pa[0];Y=pa[1];oa=pa[2];N=pa[3];if(G!==Aa[0]||Y!==Aa[1]||oa!==Aa[2]||N!==Aa[3])n.blendFuncSeparate(G,Y,oa,N),Aa[0]=G,Aa[1]=Y,Aa[2]=oa,Aa[3]=N;T=M.depth_enable;T!==L.depth_enable&&(T?n.enable(2929):n.disable(2929),L.depth_enable=T);ga=M.depth_func;ga!==L.depth_func&&(n.depthFunc(ga),L.depth_func=ga);ca=Yb[0];ma=Yb[1];if(ca!==Ta[0]||ma!==Ta[1])n.depthRange(ca,ma),Ta[0]=ca,Ta[1]=ma;ua=M.depth_mask;ua!==L.depth_mask&&(n.depthMask(ua),L.depth_mask=ua);fb=Ba[0];Ad=Ba[1];Zd=Ba[2];md=Ba[3];
if(fb!==ja[0]||Ad!==ja[1]||Zd!==ja[2]||md!==ja[3])n.colorMask(fb,Ad,Zd,md),ja[0]=fb,ja[1]=Ad,ja[2]=Zd,ja[3]=md;bd=M.frontFace;bd!==L.frontFace&&(n.frontFace(bd),L.frontFace=bd);rd=M.lineWidth;rd!==L.lineWidth&&(n.lineWidth(rd),L.lineWidth=rd);Lc=M.polygonOffset_enable;Lc!==L.polygonOffset_enable&&(Lc?n.enable(32823):n.disable(32823),L.polygonOffset_enable=Lc);od=v[0];Gc=v[1];if(od!==m[0]||Gc!==m[1])n.polygonOffset(od,Gc),m[0]=od,m[1]=Gc;fd=M.sample_alpha;fd!==L.sample_alpha&&(fd?n.enable(32926):n.disable(32926),
L.sample_alpha=fd);Pc=M.sample_enable;Pc!==L.sample_enable&&(Pc?n.enable(32928):n.disable(32928),L.sample_enable=Pc);Wc=U[0];Bb=U[1];if(Wc!==va[0]||Bb!==va[1])n.sampleCoverage(Wc,Bb),va[0]=Wc,va[1]=Bb;Fb=M.stencil_enable;Fb!==L.stencil_enable&&(Fb?n.enable(2960):n.disable(2960),L.stencil_enable=Fb);Dc=M.stencil_mask;Dc!==L.stencil_mask&&(n.stencilMask(Dc),L.stencil_mask=Dc);xb=Hb[0];xc=Hb[1];Cb=Hb[2];if(xb!==ha[0]||xc!==ha[1]||Cb!==ha[2])n.stencilFunc(xb,xc,Cb),ha[0]=xb,ha[1]=xc,ha[2]=Cb;Jc=Fa[0];
nc=Fa[1];Hc=Fa[2];Xc=Fa[3];if(Jc!==qa[0]||nc!==qa[1]||Hc!==qa[2]||Xc!==qa[3])n.stencilOpSeparate(Jc,nc,Hc,Xc),qa[0]=Jc,qa[1]=nc,qa[2]=Hc,qa[3]=Xc;Vc=I[0];Ec=I[1];gc=I[2];Ic=I[3];if(Vc!==ra[0]||Ec!==ra[1]||gc!==ra[2]||Ic!==ra[3])n.stencilOpSeparate(Vc,Ec,gc,Ic),ra[0]=Vc,ra[1]=Ec,ra[2]=gc,ra[3]=Ic;qc=M.scissor_enable;qc!==L.scissor_enable&&(qc?n.enable(3089):n.disable(3089),L.scissor_enable=qc);rc=wa[0];oc=wa[1];hc=wa[2];Za=wa[3];if(rc!==ia[0]||oc!==ia[1]||hc!==ia[2]||Za!==ia[3])n.scissor(rc,oc,hc,
Za),ia[0]=rc,ia[1]=oc,ia[2]=hc,ia[3]=Za;cc=ya[0];yb=ya[1];bb=ya[2];Nb=ya[3];if(cc!==Ga[0]||yb!==Ga[1]||bb!==Ga[2]||Nb!==Ga[3])n.viewport(cc,yb,bb,Nb),Ga[0]=cc,Ga[1]=yb,Ga[2]=bb,Ga[3]=Nb}n.enable(2884);L.cull_enable=!0;n.cullFace(1029);L.cull_face=1029;if(g=L.profile)q=performance.now(),J.count+=c;n.useProgram(Z.program);var $a,ob;Ca.setVAO(null);$a=E.call(this,p,y,t);F($a)&&16===$a.length||ba.commandRaise(C,H);n.uniformMatrix4fv(X.location,!1,Array.isArray($a)||$a instanceof Float32Array?$a:(Ja[0]=
$a[0],Ja[1]=$a[1],Ja[2]=$a[2],Ja[3]=$a[3],Ja[4]=$a[4],Ja[5]=$a[5],Ja[6]=$a[6],Ja[7]=$a[7],Ja[8]=$a[8],Ja[9]=$a[9],Ja[10]=$a[10],Ja[11]=$a[11],Ja[12]=$a[12],Ja[13]=$a[13],Ja[14]=$a[14],Ja[15]=$a[15],Ja));ob=p.view;F(ob)&&16===ob.length||ba.commandRaise(e,H);n.uniformMatrix4fv(Q.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Da[0]=ob[0],Da[1]=ob[1],Da[2]=ob[2],Da[3]=ob[3],Da[4]=ob[4],Da[5]=ob[5],Da[6]=ob[6],Da[7]=ob[7],Da[8]=ob[8],Da[9]=ob[9],Da[10]=ob[10],Da[11]=ob[11],Da[12]=ob[12],
Da[13]=ob[13],Da[14]=ob[14],Da[15]=ob[15],Da));for(t=0;t<c;++t){y=b[t];var Ua,yd,Ib,Jb,sc,Ob,jb,Gb,Db,wb,hb,Zb,Pb,qb,Ra,Ub,zb,dc,ib,pb,Ia,rb,Ka,eb,gb,La,kb,Va,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,wd,Xa,Lb,Mb,lb,Na,$b,Pa,ub,vb,Sa,nb,ic,Ac,vc,ab,lc,hd,Wa;(Ua=y.position)&&("object"===typeof Ua||"function"===typeof Ua)&&(aa(Ua)||z.getBuffer(Ua)||z.getBuffer(Ua.buffer)||aa(Ua.buffer)||"constant"in Ua&&("number"===typeof Ua.constant||F(Ua.constant)))||ba.commandRaise(h,H);yd=!1;Ib=null;Jb=!1;Ob=sc=0;jb=1;Gb=0;Db=5126;
Pb=Zb=hb=wb=0;aa(Ua)?(yd=!0,Ib=z.createStream(34962,Ua),Db=Ib.dtype):(Ib=z.getBuffer(Ua))?Db=Ib.dtype:"constant"in Ua?(jb=2,"number"===typeof Ua.constant?(hb=Ua.constant,Zb=Pb=wb=0):(hb=0<Ua.constant.length?Ua.constant[0]:0,Zb=1<Ua.constant.length?Ua.constant[1]:0,Pb=2<Ua.constant.length?Ua.constant[2]:0,wb=3<Ua.constant.length?Ua.constant[3]:0)):(Ib=aa(Ua.buffer)?z.createStream(34962,Ua.buffer):z.getBuffer(Ua.buffer),Db="type"in Ua?la[Ua.type]:Ib.dtype,Jb=!!Ua.normalized,Ob=Ua.size|0,sc=Ua.offset|
0,Gb=Ua.stride|0);qb=W.location;Ra=O[qb];if(1===jb){if(Ra.buffer||n.enableVertexAttribArray(qb),Ub=Ob||3,Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==Ib||Ra.normalized!==Jb||Ra.offset!==sc||Ra.stride!==Gb)n.bindBuffer(34962,Ib.buffer),n.vertexAttribPointer(qb,Ub,Db,Jb,Gb,sc),Ra.type=Db,Ra.size=Ub,Ra.buffer=Ib,Ra.normalized=Jb,Ra.offset=sc,Ra.stride=Gb}else if(Ra.buffer&&(n.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Zb||Ra.z!==Pb||Ra.w!==wb)n.vertexAttrib4f(qb,hb,Zb,Pb,wb),Ra.x=hb,Ra.y=
Zb,Ra.z=Pb,Ra.w=wb;(zb=y.normal)&&("object"===typeof zb||"function"===typeof zb)&&(aa(zb)||z.getBuffer(zb)||z.getBuffer(zb.buffer)||aa(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||F(zb.constant)))||ba.commandRaise(w,H);dc=!1;ib=null;pb=!1;rb=Ia=0;Ka=1;eb=0;gb=5126;tb=Va=kb=La=0;aa(zb)?(dc=!0,ib=z.createStream(34962,zb),gb=ib.dtype):(ib=z.getBuffer(zb))?gb=ib.dtype:"constant"in zb?(Ka=2,"number"===typeof zb.constant?(kb=zb.constant,Va=tb=La=0):(kb=0<zb.constant.length?zb.constant[0]:
0,Va=1<zb.constant.length?zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,La=3<zb.constant.length?zb.constant[3]:0)):(ib=aa(zb.buffer)?z.createStream(34962,zb.buffer):z.getBuffer(zb.buffer),gb="type"in zb?la[zb.type]:ib.dtype,pb=!!zb.normalized,rb=zb.size|0,Ia=zb.offset|0,eb=zb.stride|0);sb=ta.location;Oa=O[sb];if(1===Ka){if(Oa.buffer||n.enableVertexAttribArray(sb),Cc=rb||3,Oa.type!==gb||Oa.size!==Cc||Oa.buffer!==ib||Oa.normalized!==pb||Oa.offset!==Ia||Oa.stride!==eb)n.bindBuffer(34962,
ib.buffer),n.vertexAttribPointer(sb,Cc,gb,pb,eb,Ia),Oa.type=gb,Oa.size=Cc,Oa.buffer=ib,Oa.normalized=pb,Oa.offset=Ia,Oa.stride=eb}else if(Oa.buffer&&(n.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Va||Oa.z!==tb||Oa.w!==La)n.vertexAttrib4f(sb,kb,Va,tb,La),Oa.x=kb,Oa.y=Va,Oa.z=tb,Oa.w=La;(Qa=y.uv)&&("object"===typeof Qa||"function"===typeof Qa)&&(aa(Qa)||z.getBuffer(Qa)||z.getBuffer(Qa.buffer)||aa(Qa.buffer)||"constant"in Qa&&("number"===typeof Qa.constant||F(Qa.constant)))||ba.commandRaise(V,
H);Kb=!1;Eb=null;Ma=!1;Xa=wd=0;Lb=1;Mb=0;lb=5126;ub=Pa=$b=Na=0;aa(Qa)?(Kb=!0,Eb=z.createStream(34962,Qa),lb=Eb.dtype):(Eb=z.getBuffer(Qa))?lb=Eb.dtype:"constant"in Qa?(Lb=2,"number"===typeof Qa.constant?($b=Qa.constant,Pa=ub=Na=0):($b=0<Qa.constant.length?Qa.constant[0]:0,Pa=1<Qa.constant.length?Qa.constant[1]:0,ub=2<Qa.constant.length?Qa.constant[2]:0,Na=3<Qa.constant.length?Qa.constant[3]:0)):(Eb=aa(Qa.buffer)?z.createStream(34962,Qa.buffer):z.getBuffer(Qa.buffer),lb="type"in Qa?la[Qa.type]:Eb.dtype,
Ma=!!Qa.normalized,Xa=Qa.size|0,wd=Qa.offset|0,Mb=Qa.stride|0);vb=ea.location;Sa=O[vb];if(1===Lb){if(Sa.buffer||n.enableVertexAttribArray(vb),nb=Xa||2,Sa.type!==lb||Sa.size!==nb||Sa.buffer!==Eb||Sa.normalized!==Ma||Sa.offset!==wd||Sa.stride!==Mb)n.bindBuffer(34962,Eb.buffer),n.vertexAttribPointer(vb,nb,lb,Ma,Mb,wd),Sa.type=lb,Sa.size=nb,Sa.buffer=Eb,Sa.normalized=Ma,Sa.offset=wd,Sa.stride=Mb}else if(Sa.buffer&&(n.disableVertexAttribArray(vb),Sa.buffer=null),Sa.x!==$b||Sa.y!==Pa||Sa.z!==ub||Sa.w!==
Na)n.vertexAttrib4f(vb,$b,Pa,ub,Na),Sa.x=$b,Sa.y=Pa,Sa.z=ub,Sa.w=Na;(ic=y.atlas)&&"framebuffer"===ic._reglType&&(ic=ic.color[0]);"function"===typeof ic&&"texture2d"===ic._reglType||ba.commandRaise(R,H);Ac=ic._texture;n.uniform1i(A.location,Ac.bind());vc=y.elements;ab=null;(lc=aa(vc))?ab=za.createStream(vc):(ab=za.getElements(vc),vc&&!ab&&ba.commandRaise(a,H));ab&&n.bindBuffer(34963,ab.buffer.buffer);hd=ab?ab.primType:4;Wa=ab?ab.vertCount:-1;0<=Wa||ba.commandRaise(sa,H);Wa&&(ab?n.drawElements(hd,Wa,
ab.type,0<<(ab.type-5121>>1)):n.drawArrays(hd,0,Wa),yd&&z.destroyStream(Ib),dc&&z.destroyStream(ib),Kb&&z.destroyStream(Eb),Ac.unbind(),lc&&za.destroyStream(ab))}L.dirty=!0;Ca.setVAO(null);p.view=f;g&&(J.cpuTime+=performance.now()-q)}}},"$7,color,position":function(d,ba,H,J,g,k,q,f,B,D){var G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,ta,W,X,ea,Q,O,z,p,L,K;G=d.attributes;T=d.context;x=d.current;t=d.draw;l=d.elements;ca=d.framebuffer;u=d.gl;N=d.next;y=d.shader;P=d.uniforms;ga=d.vao;c=N.blend_color;
b=x.blend_color;S=N.blend_equation;r=x.blend_equation;Z=N.blend_func;h=x.blend_func;w=N.colorMask;V=x.colorMask;E=N.depth_range;C=x.depth_range;e=N.polygonOffset_offset;R=x.polygonOffset_offset;a=N.sample_coverage;sa=x.sample_coverage;A=N.scissor_box;ta=x.scissor_box;W=N.stencil_func;X=x.stencil_func;ea=N.stencil_opBack;Q=x.stencil_opBack;O=N.stencil_opFront;z=x.stencil_opFront;p=N.viewport;L=x.viewport;K=[1,0,0,1];return{draw:function(f){var d,n,q,y;f=ca.next;f!==ca.cur&&(f?u.bindFramebuffer(36160,
f.framebuffer):u.bindFramebuffer(36160,null),ca.cur=f);if(x.dirty){f=N.dither;f!==x.dither&&(f?u.enable(3024):u.disable(3024),x.dither=f);f=N.blend_enable;f!==x.blend_enable&&(f?u.enable(3042):u.disable(3042),x.blend_enable=f);f=c[0];n=c[1];q=c[2];y=c[3];if(f!==b[0]||n!==b[1]||q!==b[2]||y!==b[3])u.blendColor(f,n,q,y),b[0]=f,b[1]=n,b[2]=q,b[3]=y;f=S[0];n=S[1];if(f!==r[0]||n!==r[1])u.blendEquationSeparate(f,n),r[0]=f,r[1]=n;f=Z[0];n=Z[1];q=Z[2];y=Z[3];if(f!==h[0]||n!==h[1]||q!==h[2]||y!==h[3])u.blendFuncSeparate(f,
n,q,y),h[0]=f,h[1]=n,h[2]=q,h[3]=y;f=N.depth_enable;f!==x.depth_enable&&(f?u.enable(2929):u.disable(2929),x.depth_enable=f);f=N.depth_func;f!==x.depth_func&&(u.depthFunc(f),x.depth_func=f);f=E[0];n=E[1];if(f!==C[0]||n!==C[1])u.depthRange(f,n),C[0]=f,C[1]=n;f=N.depth_mask;f!==x.depth_mask&&(u.depthMask(f),x.depth_mask=f);f=w[0];n=w[1];q=w[2];y=w[3];if(f!==V[0]||n!==V[1]||q!==V[2]||y!==V[3])u.colorMask(f,n,q,y),V[0]=f,V[1]=n,V[2]=q,V[3]=y;f=N.cull_enable;f!==x.cull_enable&&(f?u.enable(2884):u.disable(2884),
x.cull_enable=f);f=N.cull_face;f!==x.cull_face&&(u.cullFace(f),x.cull_face=f);f=N.frontFace;f!==x.frontFace&&(u.frontFace(f),x.frontFace=f);f=N.lineWidth;f!==x.lineWidth&&(u.lineWidth(f),x.lineWidth=f);f=N.polygonOffset_enable;f!==x.polygonOffset_enable&&(f?u.enable(32823):u.disable(32823),x.polygonOffset_enable=f);f=e[0];n=e[1];if(f!==R[0]||n!==R[1])u.polygonOffset(f,n),R[0]=f,R[1]=n;f=N.sample_alpha;f!==x.sample_alpha&&(f?u.enable(32926):u.disable(32926),x.sample_alpha=f);f=N.sample_enable;f!==
x.sample_enable&&(f?u.enable(32928):u.disable(32928),x.sample_enable=f);f=a[0];n=a[1];if(f!==sa[0]||n!==sa[1])u.sampleCoverage(f,n),sa[0]=f,sa[1]=n;f=N.stencil_enable;f!==x.stencil_enable&&(f?u.enable(2960):u.disable(2960),x.stencil_enable=f);f=N.stencil_mask;f!==x.stencil_mask&&(u.stencilMask(f),x.stencil_mask=f);f=W[0];n=W[1];q=W[2];if(f!==X[0]||n!==X[1]||q!==X[2])u.stencilFunc(f,n,q),X[0]=f,X[1]=n,X[2]=q;f=O[0];n=O[1];q=O[2];y=O[3];if(f!==z[0]||n!==z[1]||q!==z[2]||y!==z[3])u.stencilOpSeparate(f,
n,q,y),z[0]=f,z[1]=n,z[2]=q,z[3]=y;f=ea[0];n=ea[1];q=ea[2];y=ea[3];if(f!==Q[0]||n!==Q[1]||q!==Q[2]||y!==Q[3])u.stencilOpSeparate(f,n,q,y),Q[0]=f,Q[1]=n,Q[2]=q,Q[3]=y;f=N.scissor_enable;f!==x.scissor_enable&&(f?u.enable(3089):u.disable(3089),x.scissor_enable=f);f=A[0];n=A[1];q=A[2];y=A[3];if(f!==ta[0]||n!==ta[1]||q!==ta[2]||y!==ta[3])u.scissor(f,n,q,y),ta[0]=f,ta[1]=n,ta[2]=q,ta[3]=y;f=p[0];n=p[1];q=p[2];y=p[3];if(f!==L[0]||n!==L[1]||q!==L[2]||y!==L[3])u.viewport(f,n,q,y),L[0]=f,L[1]=n,L[2]=q,L[3]=
y;x.dirty=!1}if(f=x.profile)d=performance.now(),J.count++;u.useProgram(g.program);ga.setVAO(null);n=D.location;q=G[n];q.buffer||u.enableVertexAttribArray(n);if(q.type!==k.dtype||2!==q.size||q.buffer!==k||!1!==q.normalized||0!==q.offset||0!==q.stride)u.bindBuffer(34962,k.buffer),u.vertexAttribPointer(n,2,k.dtype,!1,0,0),q.type=k.dtype,q.size=2,q.buffer=k,q.normalized=!1,q.offset=0,q.stride=0;u.uniform4f(B.location,1,0,0,1);(n=t.elements)?u.bindBuffer(34963,n.buffer.buffer):ga.currentVAO&&(n=l.getElements(ga.currentVAO.elements))&&
u.bindBuffer(34963,n.buffer.buffer);q=t.primitive;y=t.offset;n?u.drawElements(q,3,n.type,y<<(n.type-5121>>1)):u.drawArrays(q,y,3);ga.setVAO(null);f&&(J.cpuTime+=performance.now()-d)},scope:function(a,b,c){var e,f,d,h,p,g,r,w,A,z,C,u,E,ja,Yb,D,v,m;if(e=x.profile)f=performance.now(),J.count++;d=t.count;t.count=3;h=P[3];P[3]=K;p=q.buffer;q.buffer=k;g=q.divisor;q.divisor=0;r=q.normalized;q.normalized=!1;w=q.offset;q.offset=0;A=q.size;q.size=0;z=q.state;q.state=1;C=q.stride;q.stride=0;u=q.type;q.type=
k.dtype;E=q.w;q.w=0;ja=q.x;q.x=0;Yb=q.y;q.y=0;D=q.z;q.z=0;v=y.vert;y.vert=2;m=y.frag;y.frag=1;b(T,a,c);e&&(J.cpuTime+=performance.now()-f);t.count=d;P[3]=h;q.buffer=p;q.divisor=g;q.normalized=r;q.offset=w;q.size=A;q.state=z;q.stride=C;q.type=u;q.w=E;q.x=ja;q.y=Yb;q.z=D;y.vert=v;y.frag=m},batch:function(d,g){var n,q,y;n=ca.next;n!==ca.cur&&(n?u.bindFramebuffer(36160,n.framebuffer):u.bindFramebuffer(36160,null),ca.cur=n);if(x.dirty){var M,H;n=N.dither;n!==x.dither&&(n?u.enable(3024):u.disable(3024),
x.dither=n);n=N.blend_enable;n!==x.blend_enable&&(n?u.enable(3042):u.disable(3042),x.blend_enable=n);n=c[0];y=c[1];M=c[2];H=c[3];if(n!==b[0]||y!==b[1]||M!==b[2]||H!==b[3])u.blendColor(n,y,M,H),b[0]=n,b[1]=y,b[2]=M,b[3]=H;n=S[0];y=S[1];if(n!==r[0]||y!==r[1])u.blendEquationSeparate(n,y),r[0]=n,r[1]=y;n=Z[0];y=Z[1];M=Z[2];H=Z[3];if(n!==h[0]||y!==h[1]||M!==h[2]||H!==h[3])u.blendFuncSeparate(n,y,M,H),h[0]=n,h[1]=y,h[2]=M,h[3]=H;n=N.depth_enable;n!==x.depth_enable&&(n?u.enable(2929):u.disable(2929),x.depth_enable=
n);n=N.depth_func;n!==x.depth_func&&(u.depthFunc(n),x.depth_func=n);n=E[0];y=E[1];if(n!==C[0]||y!==C[1])u.depthRange(n,y),C[0]=n,C[1]=y;n=N.depth_mask;n!==x.depth_mask&&(u.depthMask(n),x.depth_mask=n);n=w[0];y=w[1];M=w[2];H=w[3];if(n!==V[0]||y!==V[1]||M!==V[2]||H!==V[3])u.colorMask(n,y,M,H),V[0]=n,V[1]=y,V[2]=M,V[3]=H;n=N.cull_enable;n!==x.cull_enable&&(n?u.enable(2884):u.disable(2884),x.cull_enable=n);n=N.cull_face;n!==x.cull_face&&(u.cullFace(n),x.cull_face=n);n=N.frontFace;n!==x.frontFace&&(u.frontFace(n),
x.frontFace=n);n=N.lineWidth;n!==x.lineWidth&&(u.lineWidth(n),x.lineWidth=n);n=N.polygonOffset_enable;n!==x.polygonOffset_enable&&(n?u.enable(32823):u.disable(32823),x.polygonOffset_enable=n);n=e[0];y=e[1];if(n!==R[0]||y!==R[1])u.polygonOffset(n,y),R[0]=n,R[1]=y;n=N.sample_alpha;n!==x.sample_alpha&&(n?u.enable(32926):u.disable(32926),x.sample_alpha=n);n=N.sample_enable;n!==x.sample_enable&&(n?u.enable(32928):u.disable(32928),x.sample_enable=n);n=a[0];y=a[1];if(n!==sa[0]||y!==sa[1])u.sampleCoverage(n,
y),sa[0]=n,sa[1]=y;n=N.stencil_enable;n!==x.stencil_enable&&(n?u.enable(2960):u.disable(2960),x.stencil_enable=n);n=N.stencil_mask;n!==x.stencil_mask&&(u.stencilMask(n),x.stencil_mask=n);n=W[0];y=W[1];M=W[2];if(n!==X[0]||y!==X[1]||M!==X[2])u.stencilFunc(n,y,M),X[0]=n,X[1]=y,X[2]=M;n=O[0];y=O[1];M=O[2];H=O[3];if(n!==z[0]||y!==z[1]||M!==z[2]||H!==z[3])u.stencilOpSeparate(n,y,M,H),z[0]=n,z[1]=y,z[2]=M,z[3]=H;n=ea[0];y=ea[1];M=ea[2];H=ea[3];if(n!==Q[0]||y!==Q[1]||M!==Q[2]||H!==Q[3])u.stencilOpSeparate(n,
y,M,H),Q[0]=n,Q[1]=y,Q[2]=M,Q[3]=H;n=N.scissor_enable;n!==x.scissor_enable&&(n?u.enable(3089):u.disable(3089),x.scissor_enable=n);n=A[0];y=A[1];M=A[2];H=A[3];if(n!==ta[0]||y!==ta[1]||M!==ta[2]||H!==ta[3])u.scissor(n,y,M,H),ta[0]=n,ta[1]=y,ta[2]=M,ta[3]=H;n=p[0];y=p[1];M=p[2];H=p[3];if(n!==L[0]||y!==L[1]||M!==L[2]||H!==L[3])u.viewport(n,y,M,H),L[0]=n,L[1]=y,L[2]=M,L[3]=H;x.dirty=!1}if(n=x.profile)q=performance.now(),J.count+=g;u.useProgram(f.program);var K;ga.setVAO(null);y=D.location;M=G[y];M.buffer||
u.enableVertexAttribArray(y);if(M.type!==k.dtype||2!==M.size||M.buffer!==k||!1!==M.normalized||0!==M.offset||0!==M.stride)u.bindBuffer(34962,k.buffer),u.vertexAttribPointer(y,2,k.dtype,!1,0,0),M.type=k.dtype,M.size=2,M.buffer=k,M.normalized=!1,M.offset=0,M.stride=0;u.uniform4f(B.location,1,0,0,1);(M=t.elements)?u.bindBuffer(34963,M.buffer.buffer):ga.currentVAO&&(M=l.getElements(ga.currentVAO.elements))&&u.bindBuffer(34963,M.buffer.buffer);H=t.primitive;K=t.offset;for(y=0;y<g;++y)M?u.drawElements(H,
3,M.type,K<<(M.type-5121>>1)):u.drawArrays(H,K,3);ga.setVAO(null);n&&(J.cpuTime+=performance.now()-q)}}},"$19,angle,color,offset,position":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S){var r,Z,h,w,V,E,C,e,R,a,sa,A,ta,W,X,ea,Q,O,z,p,L,K,ia,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa;r=d.attributes;Z=d.context;h=d.current;w=d.draw;V=d.elements;E=d.framebuffer;C=d.gl;e=d.isArrayLike;R=d.next;a=d.shader;sa=d.uniforms;A=d.vao;ta=R.blend_color;W=h.blend_color;X=R.blend_equation;ea=h.blend_equation;
Q=R.blend_func;O=h.blend_func;z=R.colorMask;p=h.colorMask;L=R.depth_range;K=h.depth_range;ia=R.polygonOffset_offset;na=h.polygonOffset_offset;n=R.sample_coverage;F=h.sample_coverage;aa=R.scissor_box;M=h.scissor_box;ma=R.stencil_func;oa=h.stencil_func;Ca=R.stencil_opBack;xa=h.stencil_opBack;fa=R.stencil_opFront;Ea=h.stencil_opFront;ka=R.viewport;pa=h.viewport;return{draw:function(a){var d,y,t,u;d=E.next;d!==E.cur&&(d?C.bindFramebuffer(36160,d.framebuffer):C.bindFramebuffer(36160,null),E.cur=d);if(h.dirty){var v;
d=R.dither;d!==h.dither&&(d?C.enable(3024):C.disable(3024),h.dither=d);d=R.blend_enable;d!==h.blend_enable&&(d?C.enable(3042):C.disable(3042),h.blend_enable=d);d=ta[0];t=ta[1];u=ta[2];v=ta[3];if(d!==W[0]||t!==W[1]||u!==W[2]||v!==W[3])C.blendColor(d,t,u,v),W[0]=d,W[1]=t,W[2]=u,W[3]=v;d=X[0];t=X[1];if(d!==ea[0]||t!==ea[1])C.blendEquationSeparate(d,t),ea[0]=d,ea[1]=t;d=Q[0];t=Q[1];u=Q[2];v=Q[3];if(d!==O[0]||t!==O[1]||u!==O[2]||v!==O[3])C.blendFuncSeparate(d,t,u,v),O[0]=d,O[1]=t,O[2]=u,O[3]=v;d=R.depth_func;
d!==h.depth_func&&(C.depthFunc(d),h.depth_func=d);d=L[0];t=L[1];if(d!==K[0]||t!==K[1])C.depthRange(d,t),K[0]=d,K[1]=t;d=R.depth_mask;d!==h.depth_mask&&(C.depthMask(d),h.depth_mask=d);d=z[0];t=z[1];u=z[2];v=z[3];if(d!==p[0]||t!==p[1]||u!==p[2]||v!==p[3])C.colorMask(d,t,u,v),p[0]=d,p[1]=t,p[2]=u,p[3]=v;d=R.cull_enable;d!==h.cull_enable&&(d?C.enable(2884):C.disable(2884),h.cull_enable=d);d=R.cull_face;d!==h.cull_face&&(C.cullFace(d),h.cull_face=d);d=R.frontFace;d!==h.frontFace&&(C.frontFace(d),h.frontFace=
d);d=R.lineWidth;d!==h.lineWidth&&(C.lineWidth(d),h.lineWidth=d);d=R.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?C.enable(32823):C.disable(32823),h.polygonOffset_enable=d);d=ia[0];t=ia[1];if(d!==na[0]||t!==na[1])C.polygonOffset(d,t),na[0]=d,na[1]=t;d=R.sample_alpha;d!==h.sample_alpha&&(d?C.enable(32926):C.disable(32926),h.sample_alpha=d);d=R.sample_enable;d!==h.sample_enable&&(d?C.enable(32928):C.disable(32928),h.sample_enable=d);d=n[0];t=n[1];if(d!==F[0]||t!==F[1])C.sampleCoverage(d,t),F[0]=
d,F[1]=t;d=R.stencil_enable;d!==h.stencil_enable&&(d?C.enable(2960):C.disable(2960),h.stencil_enable=d);d=R.stencil_mask;d!==h.stencil_mask&&(C.stencilMask(d),h.stencil_mask=d);d=ma[0];t=ma[1];u=ma[2];if(d!==oa[0]||t!==oa[1]||u!==oa[2])C.stencilFunc(d,t,u),oa[0]=d,oa[1]=t,oa[2]=u;d=fa[0];t=fa[1];u=fa[2];v=fa[3];if(d!==Ea[0]||t!==Ea[1]||u!==Ea[2]||v!==Ea[3])C.stencilOpSeparate(d,t,u,v),Ea[0]=d,Ea[1]=t,Ea[2]=u,Ea[3]=v;d=Ca[0];t=Ca[1];u=Ca[2];v=Ca[3];if(d!==xa[0]||t!==xa[1]||u!==xa[2]||v!==xa[3])C.stencilOpSeparate(d,
t,u,v),xa[0]=d,xa[1]=t,xa[2]=u,xa[3]=v;d=R.scissor_enable;d!==h.scissor_enable&&(d?C.enable(3089):C.disable(3089),h.scissor_enable=d);d=aa[0];t=aa[1];u=aa[2];v=aa[3];if(d!==M[0]||t!==M[1]||u!==M[2]||v!==M[3])C.scissor(d,t,u,v),M[0]=d,M[1]=t,M[2]=u,M[3]=v;d=ka[0];t=ka[1];u=ka[2];v=ka[3];if(d!==pa[0]||t!==pa[1]||u!==pa[2]||v!==pa[3])C.viewport(d,t,u,v),pa[0]=d,pa[1]=t,pa[2]=u,pa[3]=v}C.disable(2929);h.depth_enable=!1;if(d=h.profile)y=performance.now(),J.count++;C.useProgram(g.program);A.setVAO(null);
t=S.location;u=r[t];u.buffer||C.enableVertexAttribArray(t);if(u.type!==k.dtype||2!==u.size||u.buffer!==k||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,k.buffer),C.vertexAttribPointer(t,2,k.dtype,!1,0,0),u.type=k.dtype,u.size=2,u.buffer=k,u.normalized=!1,u.offset=0,u.stride=0;t=q.call(this,Z,a,0);"number"!==typeof t&&ba.commandRaise(f,H);C.uniform1f(ga.location,t);t=a.offset;e(t)&&2===t.length||ba.commandRaise(B,H);C.uniform2f(b.location,t[0],t[1]);a=D.call(this,Z,a,0);e(a)&&4===
a.length||ba.commandRaise(G,H);C.uniform4f(c.location,a[0],a[1],a[2],a[3]);(a=w.elements)?C.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=V.getElements(A.currentVAO.elements))&&C.bindBuffer(34963,a.buffer.buffer);t=w.primitive;u=w.offset;a?C.drawElements(t,3,a.type,u<<(a.type-5121>>1)):C.drawArrays(t,u,3);h.dirty=!0;A.setVAO(null);d&&(J.cpuTime+=performance.now()-y)},scope:function(b,c,e){var f,d,n,m,p,g,r,q,y,A,I,u,z,C,E,M,F,fa,H,D,l;f=R.depth_enable;R.depth_enable=!1;if(d=h.profile)n=performance.now(),
J.count++;m=w.count;w.count=3;p=T.call(this,Z,b,e);g=sa[3];sa[3]=p;r=x.call(this,Z,b,e);p=sa[5];sa[5]=r;q=b.offset;r=sa[4];sa[4]=q;q=t.buffer;t.buffer=k;y=t.divisor;t.divisor=0;A=t.normalized;t.normalized=!1;I=t.offset;t.offset=0;u=t.size;t.size=0;z=t.state;t.state=1;C=t.stride;t.stride=0;E=t.type;t.type=k.dtype;M=t.w;t.w=0;F=t.x;t.x=0;fa=t.y;t.y=0;H=t.z;t.z=0;D=a.vert;a.vert=2;l=a.frag;a.frag=1;h.dirty=!0;c(Z,b,e);R.depth_enable=f;d&&(J.cpuTime+=performance.now()-n);w.count=m;sa[3]=g;sa[5]=p;sa[4]=
r;t.buffer=q;t.divisor=y;t.normalized=A;t.offset=I;t.size=u;t.state=z;t.stride=C;t.type=E;t.w=M;t.x=F;t.y=fa;t.z=H;a.vert=D;a.frag=l;h.dirty=!0},batch:function(a,f){var d,g,q,v;d=E.next;d!==E.cur&&(d?C.bindFramebuffer(36160,d.framebuffer):C.bindFramebuffer(36160,null),E.cur=d);if(h.dirty){var m,t,x;d=R.dither;d!==h.dither&&(d?C.enable(3024):C.disable(3024),h.dither=d);d=R.blend_enable;d!==h.blend_enable&&(d?C.enable(3042):C.disable(3042),h.blend_enable=d);d=ta[0];m=ta[1];t=ta[2];x=ta[3];if(d!==W[0]||
m!==W[1]||t!==W[2]||x!==W[3])C.blendColor(d,m,t,x),W[0]=d,W[1]=m,W[2]=t,W[3]=x;d=X[0];m=X[1];if(d!==ea[0]||m!==ea[1])C.blendEquationSeparate(d,m),ea[0]=d,ea[1]=m;d=Q[0];m=Q[1];t=Q[2];x=Q[3];if(d!==O[0]||m!==O[1]||t!==O[2]||x!==O[3])C.blendFuncSeparate(d,m,t,x),O[0]=d,O[1]=m,O[2]=t,O[3]=x;d=R.depth_func;d!==h.depth_func&&(C.depthFunc(d),h.depth_func=d);d=L[0];m=L[1];if(d!==K[0]||m!==K[1])C.depthRange(d,m),K[0]=d,K[1]=m;d=R.depth_mask;d!==h.depth_mask&&(C.depthMask(d),h.depth_mask=d);d=z[0];m=z[1];
t=z[2];x=z[3];if(d!==p[0]||m!==p[1]||t!==p[2]||x!==p[3])C.colorMask(d,m,t,x),p[0]=d,p[1]=m,p[2]=t,p[3]=x;d=R.cull_enable;d!==h.cull_enable&&(d?C.enable(2884):C.disable(2884),h.cull_enable=d);d=R.cull_face;d!==h.cull_face&&(C.cullFace(d),h.cull_face=d);d=R.frontFace;d!==h.frontFace&&(C.frontFace(d),h.frontFace=d);d=R.lineWidth;d!==h.lineWidth&&(C.lineWidth(d),h.lineWidth=d);d=R.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?C.enable(32823):C.disable(32823),h.polygonOffset_enable=d);d=ia[0];m=
ia[1];if(d!==na[0]||m!==na[1])C.polygonOffset(d,m),na[0]=d,na[1]=m;d=R.sample_alpha;d!==h.sample_alpha&&(d?C.enable(32926):C.disable(32926),h.sample_alpha=d);d=R.sample_enable;d!==h.sample_enable&&(d?C.enable(32928):C.disable(32928),h.sample_enable=d);d=n[0];m=n[1];if(d!==F[0]||m!==F[1])C.sampleCoverage(d,m),F[0]=d,F[1]=m;d=R.stencil_enable;d!==h.stencil_enable&&(d?C.enable(2960):C.disable(2960),h.stencil_enable=d);d=R.stencil_mask;d!==h.stencil_mask&&(C.stencilMask(d),h.stencil_mask=d);d=ma[0];m=
ma[1];t=ma[2];if(d!==oa[0]||m!==oa[1]||t!==oa[2])C.stencilFunc(d,m,t),oa[0]=d,oa[1]=m,oa[2]=t;d=fa[0];m=fa[1];t=fa[2];x=fa[3];if(d!==Ea[0]||m!==Ea[1]||t!==Ea[2]||x!==Ea[3])C.stencilOpSeparate(d,m,t,x),Ea[0]=d,Ea[1]=m,Ea[2]=t,Ea[3]=x;d=Ca[0];m=Ca[1];t=Ca[2];x=Ca[3];if(d!==xa[0]||m!==xa[1]||t!==xa[2]||x!==xa[3])C.stencilOpSeparate(d,m,t,x),xa[0]=d,xa[1]=m,xa[2]=t,xa[3]=x;d=R.scissor_enable;d!==h.scissor_enable&&(d?C.enable(3089):C.disable(3089),h.scissor_enable=d);d=aa[0];m=aa[1];t=aa[2];x=aa[3];if(d!==
M[0]||m!==M[1]||t!==M[2]||x!==M[3])C.scissor(d,m,t,x),M[0]=d,M[1]=m,M[2]=t,M[3]=x;d=ka[0];m=ka[1];t=ka[2];x=ka[3];if(d!==pa[0]||m!==pa[1]||t!==pa[2]||x!==pa[3])C.viewport(d,m,t,x),pa[0]=d,pa[1]=m,pa[2]=t,pa[3]=x}C.disable(2929);h.depth_enable=!1;if(d=h.profile)g=performance.now(),J.count+=f;C.useProgram(l.program);A.setVAO(null);m=S.location;t=r[m];t.buffer||C.enableVertexAttribArray(m);if(t.type!==k.dtype||2!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||0!==t.stride)C.bindBuffer(34962,
k.buffer),C.vertexAttribPointer(m,2,k.dtype,!1,0,0),t.type=k.dtype,t.size=2,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=0;q=ca.call(this,Z,v,q);"number"!==typeof q&&ba.commandRaise(u,H);C.uniform1f(ga.location,q);(m=w.elements)?C.bindBuffer(34963,m.buffer.buffer):A.currentVAO&&(m=V.getElements(A.currentVAO.elements))&&C.bindBuffer(34963,m.buffer.buffer);t=w.primitive;x=w.offset;for(q=0;q<f;++q){v=a[q];var D,B,G,ha,I,ra,Fa,qa,T;D=v.offset;e(D)&&2===D.length||ba.commandRaise(N,H);B=D[0];D=D[1];q&&
G===B&&ha===D||(G=B,ha=D,C.uniform2f(b.location,B,D));I=y.call(this,Z,v,q);e(I)&&4===I.length||ba.commandRaise(P,H);v=I[0];B=I[1];D=I[2];I=I[3];q&&ra===v&&Fa===B&&qa===D&&T===I||(ra=v,Fa=B,qa=D,T=I,C.uniform4f(c.location,v,B,D,I));m?C.drawElements(t,3,m.type,x<<(m.type-5121>>1)):C.drawArrays(t,x,3)}h.dirty=!0;A.setVAO(null);d&&(J.cpuTime+=performance.now()-g)}}},"$23,model,position,projection,view":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w){var V,E,C,e,R,a,sa,A,ta,W,X,ea,
Q,O,z,p,L,K,ia,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa;V=d.attributes;E=d.context;C=d.current;e=d.draw;R=d.framebuffer;a=d.gl;sa=d.isArrayLike;A=d.next;ta=d.shader;W=d.uniforms;X=d.vao;ea=A.blend_color;Q=C.blend_color;O=A.blend_equation;z=C.blend_equation;p=A.blend_func;L=C.blend_func;K=A.colorMask;ia=C.colorMask;na=A.depth_range;n=C.depth_range;F=A.polygonOffset_offset;aa=C.polygonOffset_offset;M=A.sample_coverage;ma=C.sample_coverage;oa=A.scissor_box;Ca=C.scissor_box;xa=A.stencil_func;
fa=C.stencil_func;Ea=A.stencil_opBack;ka=C.stencil_opBack;pa=A.stencil_opFront;Aa=C.stencil_opFront;Ba=A.viewport;ja=C.viewport;Yb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);v=new Float32Array(16);m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];U=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);wa=new Float32Array(16);return{draw:function(b){var c,e,d,m;c=R.next;c!==R.cur&&(c?a.bindFramebuffer(36160,c.framebuffer):a.bindFramebuffer(36160,null),R.cur=
c);if(C.dirty){var t;c=A.dither;c!==C.dither&&(c?a.enable(3024):a.disable(3024),C.dither=c);c=A.blend_enable;c!==C.blend_enable&&(c?a.enable(3042):a.disable(3042),C.blend_enable=c);c=ea[0];d=ea[1];m=ea[2];t=ea[3];if(c!==Q[0]||d!==Q[1]||m!==Q[2]||t!==Q[3])a.blendColor(c,d,m,t),Q[0]=c,Q[1]=d,Q[2]=m,Q[3]=t;c=O[0];d=O[1];if(c!==z[0]||d!==z[1])a.blendEquationSeparate(c,d),z[0]=c,z[1]=d;c=p[0];d=p[1];m=p[2];t=p[3];if(c!==L[0]||d!==L[1]||m!==L[2]||t!==L[3])a.blendFuncSeparate(c,d,m,t),L[0]=c,L[1]=d,L[2]=
m,L[3]=t;c=A.depth_enable;c!==C.depth_enable&&(c?a.enable(2929):a.disable(2929),C.depth_enable=c);c=A.depth_func;c!==C.depth_func&&(a.depthFunc(c),C.depth_func=c);c=na[0];d=na[1];if(c!==n[0]||d!==n[1])a.depthRange(c,d),n[0]=c,n[1]=d;c=A.depth_mask;c!==C.depth_mask&&(a.depthMask(c),C.depth_mask=c);c=K[0];d=K[1];m=K[2];t=K[3];if(c!==ia[0]||d!==ia[1]||m!==ia[2]||t!==ia[3])a.colorMask(c,d,m,t),ia[0]=c,ia[1]=d,ia[2]=m,ia[3]=t;c=A.cull_enable;c!==C.cull_enable&&(c?a.enable(2884):a.disable(2884),C.cull_enable=
c);c=A.cull_face;c!==C.cull_face&&(a.cullFace(c),C.cull_face=c);c=A.frontFace;c!==C.frontFace&&(a.frontFace(c),C.frontFace=c);c=A.lineWidth;c!==C.lineWidth&&(a.lineWidth(c),C.lineWidth=c);c=A.polygonOffset_enable;c!==C.polygonOffset_enable&&(c?a.enable(32823):a.disable(32823),C.polygonOffset_enable=c);c=F[0];d=F[1];if(c!==aa[0]||d!==aa[1])a.polygonOffset(c,d),aa[0]=c,aa[1]=d;c=A.sample_alpha;c!==C.sample_alpha&&(c?a.enable(32926):a.disable(32926),C.sample_alpha=c);c=A.sample_enable;c!==C.sample_enable&&
(c?a.enable(32928):a.disable(32928),C.sample_enable=c);c=M[0];d=M[1];if(c!==ma[0]||d!==ma[1])a.sampleCoverage(c,d),ma[0]=c,ma[1]=d;c=A.stencil_enable;c!==C.stencil_enable&&(c?a.enable(2960):a.disable(2960),C.stencil_enable=c);c=A.stencil_mask;c!==C.stencil_mask&&(a.stencilMask(c),C.stencil_mask=c);c=xa[0];d=xa[1];m=xa[2];if(c!==fa[0]||d!==fa[1]||m!==fa[2])a.stencilFunc(c,d,m),fa[0]=c,fa[1]=d,fa[2]=m;c=pa[0];d=pa[1];m=pa[2];t=pa[3];if(c!==Aa[0]||d!==Aa[1]||m!==Aa[2]||t!==Aa[3])a.stencilOpSeparate(c,
d,m,t),Aa[0]=c,Aa[1]=d,Aa[2]=m,Aa[3]=t;c=Ea[0];d=Ea[1];m=Ea[2];t=Ea[3];if(c!==ka[0]||d!==ka[1]||m!==ka[2]||t!==ka[3])a.stencilOpSeparate(c,d,m,t),ka[0]=c,ka[1]=d,ka[2]=m,ka[3]=t;c=A.scissor_enable;c!==C.scissor_enable&&(c?a.enable(3089):a.disable(3089),C.scissor_enable=c);c=oa[0];d=oa[1];m=oa[2];t=oa[3];if(c!==Ca[0]||d!==Ca[1]||m!==Ca[2]||t!==Ca[3])a.scissor(c,d,m,t),Ca[0]=c,Ca[1]=d,Ca[2]=m,Ca[3]=t;c=Ba[0];d=Ba[1];m=Ba[2];t=Ba[3];if(c!==ja[0]||d!==ja[1]||m!==ja[2]||t!==ja[3])a.viewport(c,d,m,t),ja[0]=
c,ja[1]=d,ja[2]=m,ja[3]=t;C.dirty=!1}if(c=C.profile)e=performance.now(),J.count++;a.useProgram(g.program);X.setVAO(null);d=Z.location;m=V[d];m.buffer||a.enableVertexAttribArray(d);if(m.type!==k.dtype||3!==m.size||m.buffer!==k||!1!==m.normalized||0!==m.offset||0!==m.stride)a.bindBuffer(34962,k.buffer),a.vertexAttribPointer(d,3,k.dtype,!1,0,0),m.type=k.dtype,m.size=3,m.buffer=k,m.normalized=!1,m.offset=0,m.stride=0;a.uniformMatrix4fv(r.location,!1,Yb);d=q.call(this,E,b,0);sa(d)&&16===d.length||ba.commandRaise(f,
H);a.uniformMatrix4fv(w.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Ta[0]=d[0],Ta[1]=d[1],Ta[2]=d[2],Ta[3]=d[3],Ta[4]=d[4],Ta[5]=d[5],Ta[6]=d[6],Ta[7]=d[7],Ta[8]=d[8],Ta[9]=d[9],Ta[10]=d[10],Ta[11]=d[11],Ta[12]=d[12],Ta[13]=d[13],Ta[14]=d[14],Ta[15]=d[15],Ta));b=B.call(this,E,b,0);sa(b)&&16===b.length||ba.commandRaise(D,H);a.uniformMatrix4fv(h.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(v[0]=b[0],v[1]=b[1],v[2]=b[2],v[3]=b[3],v[4]=b[4],v[5]=b[5],v[6]=b[6],v[7]=b[7],v[8]=
b[8],v[9]=b[9],v[10]=b[10],v[11]=b[11],v[12]=b[12],v[13]=b[13],v[14]=b[14],v[15]=b[15],v));G&&a.bindBuffer(34963,G.buffer.buffer);b=G.primType;d=G.vertCount-0;0<=d||ba.commandRaise(T,H);d&&(a.drawElements(b,d,G.type,0<<(G.type-5121>>1)),X.setVAO(null),c&&(J.cpuTime+=performance.now()-e))},scope:function(a,c,b){var d,f,h,n,p,g,r,q,v,y,w,A,z,U,M,ja,F,fa,D,B,K,L,O;if(d=C.profile)f=performance.now(),J.count++;h=e.elements;e.elements=x;n=e.offset;e.offset=0;p=x.vertCount-0;0<=p||ba.commandRaise(t,H);g=
e.count;e.count=p;r=x.primType;p=e.primitive;e.primitive=r;r=W[3];W[3]=m;q=l.call(this,E,a,b);v=W[5];W[5]=q;y=ca.call(this,E,a,b);q=W[4];W[4]=y;y=u.buffer;u.buffer=k;w=u.divisor;u.divisor=0;A=u.normalized;u.normalized=!1;z=u.offset;u.offset=0;U=u.size;u.size=0;M=u.state;u.state=1;ja=u.stride;u.stride=0;F=u.type;u.type=k.dtype;fa=u.w;u.w=0;D=u.x;u.x=0;B=u.y;u.y=0;K=u.z;u.z=0;L=ta.vert;ta.vert=2;O=ta.frag;ta.frag=1;c(E,a,b);d&&(J.cpuTime+=performance.now()-f);e.elements=h;e.offset=n;e.count=g;e.primitive=
p;W[3]=r;W[5]=v;W[4]=q;u.buffer=y;u.divisor=w;u.normalized=A;u.offset=z;u.size=U;u.state=M;u.stride=ja;u.type=F;u.w=fa;u.x=D;u.y=B;u.z=K;ta.vert=L;ta.frag=O},batch:function(e,d){var f,m,g;f=R.next;f!==R.cur&&(f?a.bindFramebuffer(36160,f.framebuffer):a.bindFramebuffer(36160,null),R.cur=f);if(C.dirty){var q,v,t;f=A.dither;f!==C.dither&&(f?a.enable(3024):a.disable(3024),C.dither=f);f=A.blend_enable;f!==C.blend_enable&&(f?a.enable(3042):a.disable(3042),C.blend_enable=f);f=ea[0];q=ea[1];v=ea[2];t=ea[3];
if(f!==Q[0]||q!==Q[1]||v!==Q[2]||t!==Q[3])a.blendColor(f,q,v,t),Q[0]=f,Q[1]=q,Q[2]=v,Q[3]=t;f=O[0];q=O[1];if(f!==z[0]||q!==z[1])a.blendEquationSeparate(f,q),z[0]=f,z[1]=q;f=p[0];q=p[1];v=p[2];t=p[3];if(f!==L[0]||q!==L[1]||v!==L[2]||t!==L[3])a.blendFuncSeparate(f,q,v,t),L[0]=f,L[1]=q,L[2]=v,L[3]=t;f=A.depth_enable;f!==C.depth_enable&&(f?a.enable(2929):a.disable(2929),C.depth_enable=f);f=A.depth_func;f!==C.depth_func&&(a.depthFunc(f),C.depth_func=f);f=na[0];q=na[1];if(f!==n[0]||q!==n[1])a.depthRange(f,
q),n[0]=f,n[1]=q;f=A.depth_mask;f!==C.depth_mask&&(a.depthMask(f),C.depth_mask=f);f=K[0];q=K[1];v=K[2];t=K[3];if(f!==ia[0]||q!==ia[1]||v!==ia[2]||t!==ia[3])a.colorMask(f,q,v,t),ia[0]=f,ia[1]=q,ia[2]=v,ia[3]=t;f=A.cull_enable;f!==C.cull_enable&&(f?a.enable(2884):a.disable(2884),C.cull_enable=f);f=A.cull_face;f!==C.cull_face&&(a.cullFace(f),C.cull_face=f);f=A.frontFace;f!==C.frontFace&&(a.frontFace(f),C.frontFace=f);f=A.lineWidth;f!==C.lineWidth&&(a.lineWidth(f),C.lineWidth=f);f=A.polygonOffset_enable;
f!==C.polygonOffset_enable&&(f?a.enable(32823):a.disable(32823),C.polygonOffset_enable=f);f=F[0];q=F[1];if(f!==aa[0]||q!==aa[1])a.polygonOffset(f,q),aa[0]=f,aa[1]=q;f=A.sample_alpha;f!==C.sample_alpha&&(f?a.enable(32926):a.disable(32926),C.sample_alpha=f);f=A.sample_enable;f!==C.sample_enable&&(f?a.enable(32928):a.disable(32928),C.sample_enable=f);f=M[0];q=M[1];if(f!==ma[0]||q!==ma[1])a.sampleCoverage(f,q),ma[0]=f,ma[1]=q;f=A.stencil_enable;f!==C.stencil_enable&&(f?a.enable(2960):a.disable(2960),
C.stencil_enable=f);f=A.stencil_mask;f!==C.stencil_mask&&(a.stencilMask(f),C.stencil_mask=f);f=xa[0];q=xa[1];v=xa[2];if(f!==fa[0]||q!==fa[1]||v!==fa[2])a.stencilFunc(f,q,v),fa[0]=f,fa[1]=q,fa[2]=v;f=pa[0];q=pa[1];v=pa[2];t=pa[3];if(f!==Aa[0]||q!==Aa[1]||v!==Aa[2]||t!==Aa[3])a.stencilOpSeparate(f,q,v,t),Aa[0]=f,Aa[1]=q,Aa[2]=v,Aa[3]=t;f=Ea[0];q=Ea[1];v=Ea[2];t=Ea[3];if(f!==ka[0]||q!==ka[1]||v!==ka[2]||t!==ka[3])a.stencilOpSeparate(f,q,v,t),ka[0]=f,ka[1]=q,ka[2]=v,ka[3]=t;f=A.scissor_enable;f!==C.scissor_enable&&
(f?a.enable(3089):a.disable(3089),C.scissor_enable=f);f=oa[0];q=oa[1];v=oa[2];t=oa[3];if(f!==Ca[0]||q!==Ca[1]||v!==Ca[2]||t!==Ca[3])a.scissor(f,q,v,t),Ca[0]=f,Ca[1]=q,Ca[2]=v,Ca[3]=t;f=Ba[0];q=Ba[1];v=Ba[2];t=Ba[3];if(f!==ja[0]||q!==ja[1]||v!==ja[2]||t!==ja[3])a.viewport(f,q,v,t),ja[0]=f,ja[1]=q,ja[2]=v,ja[3]=t;C.dirty=!1}if(f=C.profile)m=performance.now(),J.count+=d;a.useProgram(N.program);X.setVAO(null);q=Z.location;v=V[q];v.buffer||a.enableVertexAttribArray(q);if(v.type!==k.dtype||3!==v.size||
v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)a.bindBuffer(34962,k.buffer),a.vertexAttribPointer(q,3,k.dtype,!1,0,0),v.type=k.dtype,v.size=3,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;a.uniformMatrix4fv(r.location,!1,U);q=y.call(this,E,void 0,g);sa(q)&&16===q.length||ba.commandRaise(P,H);a.uniformMatrix4fv(w.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(va[0]=q[0],va[1]=q[1],va[2]=q[2],va[3]=q[3],va[4]=q[4],va[5]=q[5],va[6]=q[6],va[7]=q[7],va[8]=q[8],va[9]=q[9],va[10]=
q[10],va[11]=q[11],va[12]=q[12],va[13]=q[13],va[14]=q[14],va[15]=q[15],va));g=ga.call(this,E,void 0,g);sa(g)&&16===g.length||ba.commandRaise(c,H);a.uniformMatrix4fv(h.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(wa[0]=g[0],wa[1]=g[1],wa[2]=g[2],wa[3]=g[3],wa[4]=g[4],wa[5]=g[5],wa[6]=g[6],wa[7]=g[7],wa[8]=g[8],wa[9]=g[9],wa[10]=g[10],wa[11]=g[11],wa[12]=g[12],wa[13]=g[13],wa[14]=g[14],wa[15]=g[15],wa));b&&a.bindBuffer(34963,b.buffer.buffer);q=b.primType;v=b.vertCount-0;0<=v||ba.commandRaise(S,
H);for(g=0;g<d;++g)v&&a.drawElements(q,v,b.type,0<<(b.type-5121>>1));X.setVAO(null);f&&(J.cpuTime+=performance.now()-m)}}},$20:function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga){var c,b,S,r,Z,h,w,V,E,C,e,R,a,sa,A,W,ia,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca;c=d.context;b=d.current;S=d.framebuffer;r=d.gl;Z=d.next;h=d.shader;w=d.uniforms;V=d.vao;E=Z.blend_color;C=b.blend_color;e=Z.blend_equation;R=b.blend_equation;a=Z.blend_func;sa=b.blend_func;A=Z.colorMask;W=b.colorMask;ia=Z.depth_range;X=b.depth_range;
ea=Z.polygonOffset_offset;Q=b.polygonOffset_offset;O=Z.sample_coverage;z=b.sample_coverage;p=Z.scissor_box;L=b.scissor_box;K=Z.stencil_func;za=b.stencil_func;na=Z.stencil_opBack;n=b.stencil_opBack;F=Z.stencil_opFront;aa=b.stencil_opFront;M=Z.viewport;ma=b.viewport;oa={};Ca={};return{draw:function(d){var t,y,w,u,x,l,ja,P,G,v,m,U,N;t=c.center;y=c.distance;w=c.eye;u=c.phi;x=c.projection;l=q.call(this,c,d,0);ja=c.theta;P=c.up;G=c.view;c.center=g;c.distance=2.302585092994046;c.eye=k;c.phi=0;c.projection=
l;c.theta=0;c.up=f;c.view=B;l=S.next;l!==S.cur&&(l?r.bindFramebuffer(36160,l.framebuffer):r.bindFramebuffer(36160,null),S.cur=l);if(b.dirty){l=Z.dither;l!==b.dither&&(l?r.enable(3024):r.disable(3024),b.dither=l);l=Z.blend_enable;l!==b.blend_enable&&(l?r.enable(3042):r.disable(3042),b.blend_enable=l);l=E[0];m=E[1];U=E[2];N=E[3];if(l!==C[0]||m!==C[1]||U!==C[2]||N!==C[3])r.blendColor(l,m,U,N),C[0]=l,C[1]=m,C[2]=U,C[3]=N;l=e[0];m=e[1];if(l!==R[0]||m!==R[1])r.blendEquationSeparate(l,m),R[0]=l,R[1]=m;l=
a[0];m=a[1];U=a[2];N=a[3];if(l!==sa[0]||m!==sa[1]||U!==sa[2]||N!==sa[3])r.blendFuncSeparate(l,m,U,N),sa[0]=l,sa[1]=m,sa[2]=U,sa[3]=N;l=Z.depth_enable;l!==b.depth_enable&&(l?r.enable(2929):r.disable(2929),b.depth_enable=l);l=Z.depth_func;l!==b.depth_func&&(r.depthFunc(l),b.depth_func=l);l=ia[0];m=ia[1];if(l!==X[0]||m!==X[1])r.depthRange(l,m),X[0]=l,X[1]=m;l=Z.depth_mask;l!==b.depth_mask&&(r.depthMask(l),b.depth_mask=l);l=A[0];m=A[1];U=A[2];N=A[3];if(l!==W[0]||m!==W[1]||U!==W[2]||N!==W[3])r.colorMask(l,
m,U,N),W[0]=l,W[1]=m,W[2]=U,W[3]=N;l=Z.cull_enable;l!==b.cull_enable&&(l?r.enable(2884):r.disable(2884),b.cull_enable=l);l=Z.cull_face;l!==b.cull_face&&(r.cullFace(l),b.cull_face=l);l=Z.frontFace;l!==b.frontFace&&(r.frontFace(l),b.frontFace=l);l=Z.lineWidth;l!==b.lineWidth&&(r.lineWidth(l),b.lineWidth=l);l=Z.polygonOffset_enable;l!==b.polygonOffset_enable&&(l?r.enable(32823):r.disable(32823),b.polygonOffset_enable=l);l=ea[0];m=ea[1];if(l!==Q[0]||m!==Q[1])r.polygonOffset(l,m),Q[0]=l,Q[1]=m;l=Z.sample_alpha;
l!==b.sample_alpha&&(l?r.enable(32926):r.disable(32926),b.sample_alpha=l);l=Z.sample_enable;l!==b.sample_enable&&(l?r.enable(32928):r.disable(32928),b.sample_enable=l);l=O[0];m=O[1];if(l!==z[0]||m!==z[1])r.sampleCoverage(l,m),z[0]=l,z[1]=m;l=Z.stencil_enable;l!==b.stencil_enable&&(l?r.enable(2960):r.disable(2960),b.stencil_enable=l);l=Z.stencil_mask;l!==b.stencil_mask&&(r.stencilMask(l),b.stencil_mask=l);l=K[0];m=K[1];U=K[2];if(l!==za[0]||m!==za[1]||U!==za[2])r.stencilFunc(l,m,U),za[0]=l,za[1]=m,
za[2]=U;l=F[0];m=F[1];U=F[2];N=F[3];if(l!==aa[0]||m!==aa[1]||U!==aa[2]||N!==aa[3])r.stencilOpSeparate(l,m,U,N),aa[0]=l,aa[1]=m,aa[2]=U,aa[3]=N;l=na[0];m=na[1];U=na[2];N=na[3];if(l!==n[0]||m!==n[1]||U!==n[2]||N!==n[3])r.stencilOpSeparate(l,m,U,N),n[0]=l,n[1]=m,n[2]=U,n[3]=N;l=Z.scissor_enable;l!==b.scissor_enable&&(l?r.enable(3089):r.disable(3089),b.scissor_enable=l);l=p[0];m=p[1];U=p[2];N=p[3];if(l!==L[0]||m!==L[1]||U!==L[2]||N!==L[3])r.scissor(l,m,U,N),L[0]=l,L[1]=m,L[2]=U,L[3]=N;l=M[0];m=M[1];U=
M[2];N=M[3];if(l!==ma[0]||m!==ma[1]||U!==ma[2]||N!==ma[3])r.viewport(l,m,U,N),ma[0]=l,ma[1]=m,ma[2]=U,ma[3]=N;b.dirty=!1}if(l=b.profile)v=performance.now(),J.count++;m=h.program(h.vert,h.frag,H);r.useProgram(m.program);V.setVAO(null);U=m.id;(N=oa[U])||(N=oa[U]=D(m));N.call(this,d);V.setVAO(null);c.center=t;c.distance=y;c.eye=w;c.phi=u;c.projection=x;c.theta=ja;c.up=P;c.view=G;l&&(J.cpuTime+=performance.now()-v)},scope:function(a,e,f){var d,h,k,n,p,g,q,v,m,r,y,A,u,z,C,I,E,M,F;d=c.center;h=c.distance;
k=c.eye;n=c.phi;p=c.projection;g=x.call(this,c,a,f);q=c.theta;v=c.up;m=c.view;c.center=G;c.distance=2.302585092994046;c.eye=T;c.phi=0;c.projection=g;c.theta=0;c.up=t;c.view=l;if(g=b.profile)r=performance.now(),J.count++;y=c.center;A=w[1];w[1]=y;u=c.distance;y=w[2];w[2]=u;z=c.eye;u=w[3];w[3]=z;C=c.phi;z=w[4];w[4]=C;I=c.projection;C=w[5];w[5]=I;E=c.theta;I=w[6];w[6]=E;M=c.up;E=w[7];w[7]=M;M=c.view;F=w[8];w[8]=M;e(c,a,f);c.center=d;c.distance=h;c.eye=k;c.phi=n;c.projection=p;c.theta=q;c.up=v;c.view=
m;g&&(J.cpuTime+=performance.now()-r);w[1]=A;w[2]=y;w[3]=u;w[4]=z;w[5]=C;w[6]=I;w[7]=E;w[8]=F},batch:function(f,d){var k,g,q,t,w,l,x,D,v,m,U,B,G;k=c.center;g=c.distance;q=c.eye;t=c.phi;w=c.projection;l=N.call(this,c,f,0);x=c.theta;D=c.up;v=c.view;c.center=ca;c.distance=2.302585092994046;c.eye=u;c.phi=0;c.projection=l;c.theta=0;c.up=y;c.view=P;l=S.next;l!==S.cur&&(l?r.bindFramebuffer(36160,l.framebuffer):r.bindFramebuffer(36160,null),S.cur=l);if(b.dirty){l=Z.dither;l!==b.dither&&(l?r.enable(3024):
r.disable(3024),b.dither=l);l=Z.blend_enable;l!==b.blend_enable&&(l?r.enable(3042):r.disable(3042),b.blend_enable=l);l=E[0];U=E[1];B=E[2];G=E[3];if(l!==C[0]||U!==C[1]||B!==C[2]||G!==C[3])r.blendColor(l,U,B,G),C[0]=l,C[1]=U,C[2]=B,C[3]=G;l=e[0];U=e[1];if(l!==R[0]||U!==R[1])r.blendEquationSeparate(l,U),R[0]=l,R[1]=U;l=a[0];U=a[1];B=a[2];G=a[3];if(l!==sa[0]||U!==sa[1]||B!==sa[2]||G!==sa[3])r.blendFuncSeparate(l,U,B,G),sa[0]=l,sa[1]=U,sa[2]=B,sa[3]=G;l=Z.depth_enable;l!==b.depth_enable&&(l?r.enable(2929):
r.disable(2929),b.depth_enable=l);l=Z.depth_func;l!==b.depth_func&&(r.depthFunc(l),b.depth_func=l);l=ia[0];U=ia[1];if(l!==X[0]||U!==X[1])r.depthRange(l,U),X[0]=l,X[1]=U;l=Z.depth_mask;l!==b.depth_mask&&(r.depthMask(l),b.depth_mask=l);l=A[0];U=A[1];B=A[2];G=A[3];if(l!==W[0]||U!==W[1]||B!==W[2]||G!==W[3])r.colorMask(l,U,B,G),W[0]=l,W[1]=U,W[2]=B,W[3]=G;l=Z.cull_enable;l!==b.cull_enable&&(l?r.enable(2884):r.disable(2884),b.cull_enable=l);l=Z.cull_face;l!==b.cull_face&&(r.cullFace(l),b.cull_face=l);l=
Z.frontFace;l!==b.frontFace&&(r.frontFace(l),b.frontFace=l);l=Z.lineWidth;l!==b.lineWidth&&(r.lineWidth(l),b.lineWidth=l);l=Z.polygonOffset_enable;l!==b.polygonOffset_enable&&(l?r.enable(32823):r.disable(32823),b.polygonOffset_enable=l);l=ea[0];U=ea[1];if(l!==Q[0]||U!==Q[1])r.polygonOffset(l,U),Q[0]=l,Q[1]=U;l=Z.sample_alpha;l!==b.sample_alpha&&(l?r.enable(32926):r.disable(32926),b.sample_alpha=l);l=Z.sample_enable;l!==b.sample_enable&&(l?r.enable(32928):r.disable(32928),b.sample_enable=l);l=O[0];
U=O[1];if(l!==z[0]||U!==z[1])r.sampleCoverage(l,U),z[0]=l,z[1]=U;l=Z.stencil_enable;l!==b.stencil_enable&&(l?r.enable(2960):r.disable(2960),b.stencil_enable=l);l=Z.stencil_mask;l!==b.stencil_mask&&(r.stencilMask(l),b.stencil_mask=l);l=K[0];U=K[1];B=K[2];if(l!==za[0]||U!==za[1]||B!==za[2])r.stencilFunc(l,U,B),za[0]=l,za[1]=U,za[2]=B;l=F[0];U=F[1];B=F[2];G=F[3];if(l!==aa[0]||U!==aa[1]||B!==aa[2]||G!==aa[3])r.stencilOpSeparate(l,U,B,G),aa[0]=l,aa[1]=U,aa[2]=B,aa[3]=G;l=na[0];U=na[1];B=na[2];G=na[3];
if(l!==n[0]||U!==n[1]||B!==n[2]||G!==n[3])r.stencilOpSeparate(l,U,B,G),n[0]=l,n[1]=U,n[2]=B,n[3]=G;l=Z.scissor_enable;l!==b.scissor_enable&&(l?r.enable(3089):r.disable(3089),b.scissor_enable=l);l=p[0];U=p[1];B=p[2];G=p[3];if(l!==L[0]||U!==L[1]||B!==L[2]||G!==L[3])r.scissor(l,U,B,G),L[0]=l,L[1]=U,L[2]=B,L[3]=G;l=M[0];U=M[1];B=M[2];G=M[3];if(l!==ma[0]||U!==ma[1]||B!==ma[2]||G!==ma[3])r.viewport(l,U,B,G),ma[0]=l,ma[1]=U,ma[2]=B,ma[3]=G;b.dirty=!1}if(l=b.profile)m=performance.now(),J.count+=d;U=h.program(h.vert,
h.frag,H);r.useProgram(U.program);V.setVAO(null);B=U.id;(G=Ca[B])||(G=Ca[B]=ga(U));G.call(this,f,d);V.setVAO(null);c.center=k;c.distance=g;c.eye=q;c.phi=t;c.projection=w;c.theta=x;c.up=D;c.view=v;l&&(J.cpuTime+=performance.now()-m)}}},"$27,position,projection,tex,uv,view":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R){var a,W,A,ta,ia,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja,Yb,Ta,v,m,U,va,wa,fb,Hb;a=d.attributes;W=d.context;A=d.current;ta=d.draw;
ia=d.framebuffer;X=d.gl;ea=d.isArrayLike;Q=d.next;O=d.shader;z=d.uniforms;p=d.vao;L=Q.blend_color;K=A.blend_color;za=Q.blend_equation;na=A.blend_equation;n=Q.blend_func;F=A.blend_func;aa=Q.colorMask;M=A.colorMask;ma=Q.depth_range;oa=A.depth_range;Ca=Q.polygonOffset_offset;xa=A.polygonOffset_offset;fa=Q.sample_coverage;Ea=A.sample_coverage;ka=Q.scissor_box;pa=A.scissor_box;Aa=Q.stencil_func;Ba=A.stencil_func;ja=Q.stencil_opBack;Yb=A.stencil_opBack;Ta=Q.stencil_opFront;v=A.stencil_opFront;m=Q.viewport;
U=A.viewport;va=new Float32Array(16);wa=new Float32Array(16);fb=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(c){var b,d,h,r;b=ia.next;b!==ia.cur&&(b?X.bindFramebuffer(36160,b.framebuffer):X.bindFramebuffer(36160,null),ia.cur=b);if(A.dirty){var l;b=Q.dither;b!==A.dither&&(b?X.enable(3024):X.disable(3024),A.dither=b);b=Q.blend_enable;b!==A.blend_enable&&(b?X.enable(3042):X.disable(3042),A.blend_enable=b);b=L[0];h=L[1];r=L[2];l=L[3];if(b!==K[0]||h!==K[1]||r!==K[2]||l!==K[3])X.blendColor(b,
h,r,l),K[0]=b,K[1]=h,K[2]=r,K[3]=l;b=za[0];h=za[1];if(b!==na[0]||h!==na[1])X.blendEquationSeparate(b,h),na[0]=b,na[1]=h;b=n[0];h=n[1];r=n[2];l=n[3];if(b!==F[0]||h!==F[1]||r!==F[2]||l!==F[3])X.blendFuncSeparate(b,h,r,l),F[0]=b,F[1]=h,F[2]=r,F[3]=l;b=Q.depth_enable;b!==A.depth_enable&&(b?X.enable(2929):X.disable(2929),A.depth_enable=b);b=Q.depth_func;b!==A.depth_func&&(X.depthFunc(b),A.depth_func=b);b=ma[0];h=ma[1];if(b!==oa[0]||h!==oa[1])X.depthRange(b,h),oa[0]=b,oa[1]=h;b=Q.depth_mask;b!==A.depth_mask&&
(X.depthMask(b),A.depth_mask=b);b=aa[0];h=aa[1];r=aa[2];l=aa[3];if(b!==M[0]||h!==M[1]||r!==M[2]||l!==M[3])X.colorMask(b,h,r,l),M[0]=b,M[1]=h,M[2]=r,M[3]=l;b=Q.cull_enable;b!==A.cull_enable&&(b?X.enable(2884):X.disable(2884),A.cull_enable=b);b=Q.cull_face;b!==A.cull_face&&(X.cullFace(b),A.cull_face=b);b=Q.frontFace;b!==A.frontFace&&(X.frontFace(b),A.frontFace=b);b=Q.lineWidth;b!==A.lineWidth&&(X.lineWidth(b),A.lineWidth=b);b=Q.polygonOffset_enable;b!==A.polygonOffset_enable&&(b?X.enable(32823):X.disable(32823),
A.polygonOffset_enable=b);b=Ca[0];h=Ca[1];if(b!==xa[0]||h!==xa[1])X.polygonOffset(b,h),xa[0]=b,xa[1]=h;b=Q.sample_alpha;b!==A.sample_alpha&&(b?X.enable(32926):X.disable(32926),A.sample_alpha=b);b=Q.sample_enable;b!==A.sample_enable&&(b?X.enable(32928):X.disable(32928),A.sample_enable=b);b=fa[0];h=fa[1];if(b!==Ea[0]||h!==Ea[1])X.sampleCoverage(b,h),Ea[0]=b,Ea[1]=h;b=Q.stencil_enable;b!==A.stencil_enable&&(b?X.enable(2960):X.disable(2960),A.stencil_enable=b);b=Q.stencil_mask;b!==A.stencil_mask&&(X.stencilMask(b),
A.stencil_mask=b);b=Aa[0];h=Aa[1];r=Aa[2];if(b!==Ba[0]||h!==Ba[1]||r!==Ba[2])X.stencilFunc(b,h,r),Ba[0]=b,Ba[1]=h,Ba[2]=r;b=Ta[0];h=Ta[1];r=Ta[2];l=Ta[3];if(b!==v[0]||h!==v[1]||r!==v[2]||l!==v[3])X.stencilOpSeparate(b,h,r,l),v[0]=b,v[1]=h,v[2]=r,v[3]=l;b=ja[0];h=ja[1];r=ja[2];l=ja[3];if(b!==Yb[0]||h!==Yb[1]||r!==Yb[2]||l!==Yb[3])X.stencilOpSeparate(b,h,r,l),Yb[0]=b,Yb[1]=h,Yb[2]=r,Yb[3]=l;b=Q.scissor_enable;b!==A.scissor_enable&&(b?X.enable(3089):X.disable(3089),A.scissor_enable=b);b=ka[0];h=ka[1];
r=ka[2];l=ka[3];if(b!==pa[0]||h!==pa[1]||r!==pa[2]||l!==pa[3])X.scissor(b,h,r,l),pa[0]=b,pa[1]=h,pa[2]=r,pa[3]=l;b=m[0];h=m[1];r=m[2];l=m[3];if(b!==U[0]||h!==U[1]||r!==U[2]||l!==U[3])X.viewport(b,h,r,l),U[0]=b,U[1]=h,U[2]=r,U[3]=l;A.dirty=!1}if(b=A.profile)d=performance.now(),J.count++;X.useProgram(g.program);p.setVAO(null);h=V.location;r=a[h];r.buffer||X.enableVertexAttribArray(h);if(r.type!==k.dtype||3!==r.size||r.buffer!==k||!1!==r.normalized||0!==r.offset||0!==r.stride)X.bindBuffer(34962,k.buffer),
X.vertexAttribPointer(h,3,k.dtype,!1,0,0),r.type=k.dtype,r.size=3,r.buffer=k,r.normalized=!1,r.offset=0,r.stride=0;h=e.location;r=a[h];r.buffer||X.enableVertexAttribArray(h);if(r.type!==q.dtype||2!==r.size||r.buffer!==q||!1!==r.normalized||0!==r.offset||0!==r.stride)X.bindBuffer(34962,q.buffer),X.vertexAttribPointer(h,2,q.dtype,!1,0,0),r.type=q.dtype,r.size=2,r.buffer=q,r.normalized=!1,r.offset=0,r.stride=0;h=f.call(this,W,c,0);ea(h)&&16===h.length||ba.commandRaise(B,H);X.uniformMatrix4fv(E.location,
!1,Array.isArray(h)||h instanceof Float32Array?h:(va[0]=h[0],va[1]=h[1],va[2]=h[2],va[3]=h[3],va[4]=h[4],va[5]=h[5],va[6]=h[6],va[7]=h[7],va[8]=h[8],va[9]=h[9],va[10]=h[10],va[11]=h[11],va[12]=h[12],va[13]=h[13],va[14]=h[14],va[15]=h[15],va));h=D.call(this,W,c,0);ea(h)&&16===h.length||ba.commandRaise(G,H);X.uniformMatrix4fv(R.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(wa[0]=h[0],wa[1]=h[1],wa[2]=h[2],wa[3]=h[3],wa[4]=h[4],wa[5]=h[5],wa[6]=h[6],wa[7]=h[7],wa[8]=h[8],wa[9]=h[9],wa[10]=
h[10],wa[11]=h[11],wa[12]=h[12],wa[13]=h[13],wa[14]=h[14],wa[15]=h[15],wa));(c=c.texture)&&"framebuffer"===c._reglType&&(c=c.color[0]);"function"===typeof c&&"texture2d"===c._reglType||ba.commandRaise(T,H);c=c._texture;X.uniform1i(C.location,c.bind());x&&X.bindBuffer(34963,x.buffer.buffer);h=x.primType;r=x.vertCount-0;0<=r||ba.commandRaise(t,H);r&&(X.drawElements(h,r,x.type,0<<(x.type-5121>>1)),p.setVAO(null),b&&(J.cpuTime+=performance.now()-d),c.unbind())},scope:function(a,b,c){var e,f,d,h,m,n,p,
g,r,v,t,w,C,U,E,M,x,F,fa,D,B,G,K,L,S,Q,R,ja,oa,Yb,xa,T,ga,V,Z;if(e=A.profile)f=performance.now(),J.count++;d=ta.elements;ta.elements=l;h=ta.offset;ta.offset=0;m=l.vertCount-0;0<=m||ba.commandRaise(ca,H);n=ta.count;ta.count=m;p=l.primType;m=ta.primitive;ta.primitive=p;g=u.call(this,W,a,c);p=z[3];z[3]=g;r=a.texture;g=z[5];z[5]=r;v=N.call(this,W,a,c);r=z[4];z[4]=v;v=y.buffer;y.buffer=k;t=y.divisor;y.divisor=0;w=y.normalized;y.normalized=!1;C=y.offset;y.offset=0;U=y.size;y.size=0;E=y.state;y.state=1;
M=y.stride;y.stride=0;x=y.type;y.type=k.dtype;F=y.w;y.w=0;fa=y.x;y.x=0;D=y.y;y.y=0;B=y.z;y.z=0;G=P.buffer;P.buffer=q;K=P.divisor;P.divisor=0;L=P.normalized;P.normalized=!1;S=P.offset;P.offset=0;Q=P.size;P.size=0;R=P.state;P.state=1;ja=P.stride;P.stride=0;oa=P.type;P.type=q.dtype;Yb=P.w;P.w=0;xa=P.x;P.x=0;T=P.y;P.y=0;ga=P.z;P.z=0;V=O.vert;O.vert=2;Z=O.frag;O.frag=1;b(W,a,c);e&&(J.cpuTime+=performance.now()-f);ta.elements=d;ta.offset=h;ta.count=n;ta.primitive=m;z[3]=p;z[5]=g;z[4]=r;y.buffer=v;y.divisor=
t;y.normalized=w;y.offset=C;y.size=U;y.state=E;y.stride=M;y.type=x;y.w=F;y.x=fa;y.y=D;y.z=B;P.buffer=G;P.divisor=K;P.normalized=L;P.offset=S;P.size=Q;P.state=R;P.stride=ja;P.type=oa;P.w=Yb;P.x=xa;P.y=T;P.z=ga;O.vert=V;O.frag=Z},batch:function(f,d){var g,t,l,y;g=ia.next;g!==ia.cur&&(g?X.bindFramebuffer(36160,g.framebuffer):X.bindFramebuffer(36160,null),ia.cur=g);if(A.dirty){var u,z,x;g=Q.dither;g!==A.dither&&(g?X.enable(3024):X.disable(3024),A.dither=g);g=Q.blend_enable;g!==A.blend_enable&&(g?X.enable(3042):
X.disable(3042),A.blend_enable=g);g=L[0];u=L[1];z=L[2];x=L[3];if(g!==K[0]||u!==K[1]||z!==K[2]||x!==K[3])X.blendColor(g,u,z,x),K[0]=g,K[1]=u,K[2]=z,K[3]=x;g=za[0];u=za[1];if(g!==na[0]||u!==na[1])X.blendEquationSeparate(g,u),na[0]=g,na[1]=u;g=n[0];u=n[1];z=n[2];x=n[3];if(g!==F[0]||u!==F[1]||z!==F[2]||x!==F[3])X.blendFuncSeparate(g,u,z,x),F[0]=g,F[1]=u,F[2]=z,F[3]=x;g=Q.depth_enable;g!==A.depth_enable&&(g?X.enable(2929):X.disable(2929),A.depth_enable=g);g=Q.depth_func;g!==A.depth_func&&(X.depthFunc(g),
A.depth_func=g);g=ma[0];u=ma[1];if(g!==oa[0]||u!==oa[1])X.depthRange(g,u),oa[0]=g,oa[1]=u;g=Q.depth_mask;g!==A.depth_mask&&(X.depthMask(g),A.depth_mask=g);g=aa[0];u=aa[1];z=aa[2];x=aa[3];if(g!==M[0]||u!==M[1]||z!==M[2]||x!==M[3])X.colorMask(g,u,z,x),M[0]=g,M[1]=u,M[2]=z,M[3]=x;g=Q.cull_enable;g!==A.cull_enable&&(g?X.enable(2884):X.disable(2884),A.cull_enable=g);g=Q.cull_face;g!==A.cull_face&&(X.cullFace(g),A.cull_face=g);g=Q.frontFace;g!==A.frontFace&&(X.frontFace(g),A.frontFace=g);g=Q.lineWidth;
g!==A.lineWidth&&(X.lineWidth(g),A.lineWidth=g);g=Q.polygonOffset_enable;g!==A.polygonOffset_enable&&(g?X.enable(32823):X.disable(32823),A.polygonOffset_enable=g);g=Ca[0];u=Ca[1];if(g!==xa[0]||u!==xa[1])X.polygonOffset(g,u),xa[0]=g,xa[1]=u;g=Q.sample_alpha;g!==A.sample_alpha&&(g?X.enable(32926):X.disable(32926),A.sample_alpha=g);g=Q.sample_enable;g!==A.sample_enable&&(g?X.enable(32928):X.disable(32928),A.sample_enable=g);g=fa[0];u=fa[1];if(g!==Ea[0]||u!==Ea[1])X.sampleCoverage(g,u),Ea[0]=g,Ea[1]=
u;g=Q.stencil_enable;g!==A.stencil_enable&&(g?X.enable(2960):X.disable(2960),A.stencil_enable=g);g=Q.stencil_mask;g!==A.stencil_mask&&(X.stencilMask(g),A.stencil_mask=g);g=Aa[0];u=Aa[1];z=Aa[2];if(g!==Ba[0]||u!==Ba[1]||z!==Ba[2])X.stencilFunc(g,u,z),Ba[0]=g,Ba[1]=u,Ba[2]=z;g=Ta[0];u=Ta[1];z=Ta[2];x=Ta[3];if(g!==v[0]||u!==v[1]||z!==v[2]||x!==v[3])X.stencilOpSeparate(g,u,z,x),v[0]=g,v[1]=u,v[2]=z,v[3]=x;g=ja[0];u=ja[1];z=ja[2];x=ja[3];if(g!==Yb[0]||u!==Yb[1]||z!==Yb[2]||x!==Yb[3])X.stencilOpSeparate(g,
u,z,x),Yb[0]=g,Yb[1]=u,Yb[2]=z,Yb[3]=x;g=Q.scissor_enable;g!==A.scissor_enable&&(g?X.enable(3089):X.disable(3089),A.scissor_enable=g);g=ka[0];u=ka[1];z=ka[2];x=ka[3];if(g!==pa[0]||u!==pa[1]||z!==pa[2]||x!==pa[3])X.scissor(g,u,z,x),pa[0]=g,pa[1]=u,pa[2]=z,pa[3]=x;g=m[0];u=m[1];z=m[2];x=m[3];if(g!==U[0]||u!==U[1]||z!==U[2]||x!==U[3])X.viewport(g,u,z,x),U[0]=g,U[1]=u,U[2]=z,U[3]=x;A.dirty=!1}if(g=A.profile)t=performance.now(),J.count+=d;X.useProgram(ga.program);p.setVAO(null);u=V.location;z=a[u];z.buffer||
X.enableVertexAttribArray(u);if(z.type!==k.dtype||3!==z.size||z.buffer!==k||!1!==z.normalized||0!==z.offset||0!==z.stride)X.bindBuffer(34962,k.buffer),X.vertexAttribPointer(u,3,k.dtype,!1,0,0),z.type=k.dtype,z.size=3,z.buffer=k,z.normalized=!1,z.offset=0,z.stride=0;u=e.location;z=a[u];z.buffer||X.enableVertexAttribArray(u);if(z.type!==q.dtype||2!==z.size||z.buffer!==q||!1!==z.normalized||0!==z.offset||0!==z.stride)X.bindBuffer(34962,q.buffer),X.vertexAttribPointer(u,2,q.dtype,!1,0,0),z.type=q.dtype,
z.size=2,z.buffer=q,z.normalized=!1,z.offset=0,z.stride=0;u=c.call(this,W,y,l);ea(u)&&16===u.length||ba.commandRaise(b,H);X.uniformMatrix4fv(E.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(fb[0]=u[0],fb[1]=u[1],fb[2]=u[2],fb[3]=u[3],fb[4]=u[4],fb[5]=u[5],fb[6]=u[6],fb[7]=u[7],fb[8]=u[8],fb[9]=u[9],fb[10]=u[10],fb[11]=u[11],fb[12]=u[12],fb[13]=u[13],fb[14]=u[14],fb[15]=u[15],fb));l=S.call(this,W,y,l);ea(l)&&16===l.length||ba.commandRaise(r,H);X.uniformMatrix4fv(R.location,!1,Array.isArray(l)||
l instanceof Float32Array?l:(Hb[0]=l[0],Hb[1]=l[1],Hb[2]=l[2],Hb[3]=l[3],Hb[4]=l[4],Hb[5]=l[5],Hb[6]=l[6],Hb[7]=l[7],Hb[8]=l[8],Hb[9]=l[9],Hb[10]=l[10],Hb[11]=l[11],Hb[12]=l[12],Hb[13]=l[13],Hb[14]=l[14],Hb[15]=l[15],Hb));h&&X.bindBuffer(34963,h.buffer.buffer);u=h.primType;z=h.vertCount-0;0<=z||ba.commandRaise(w,H);for(l=0;l<d;++l)y=f[l],(y=y.texture)&&"framebuffer"===y._reglType&&(y=y.color[0]),"function"===typeof y&&"texture2d"===y._reglType||ba.commandRaise(Z,H),y=y._texture,X.uniform1i(C.location,
y.bind()),z&&(X.drawElements(u,z,h.type,0<<(h.type-5121>>1)),y.unbind());p.setVAO(null);g&&(J.cpuTime+=performance.now()-t)}}},"$19,normal,position,projection,view":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S){var r,Z,h,w,V,E,C,e,R,a,W,A,ia,db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa,Ba,ja;r=d.attributes;Z=d.context;h=d.current;w=d.draw;V=d.framebuffer;E=d.gl;C=d.isArrayLike;e=d.next;R=d.shader;a=d.uniforms;W=d.vao;A=e.blend_color;ia=h.blend_color;db=e.blend_equation;
X=h.blend_equation;ea=e.blend_func;Q=h.blend_func;O=e.colorMask;z=h.colorMask;p=e.depth_range;L=h.depth_range;K=e.polygonOffset_offset;za=h.polygonOffset_offset;na=e.sample_coverage;n=h.sample_coverage;F=e.scissor_box;aa=h.scissor_box;M=e.stencil_func;ma=h.stencil_func;oa=e.stencil_opBack;Ca=h.stencil_opBack;xa=e.stencil_opFront;fa=h.stencil_opFront;Ea=e.viewport;ka=h.viewport;pa=new Float32Array(16);Aa=new Float32Array(16);Ba=new Float32Array(16);ja=new Float32Array(16);return{draw:function(d){var t,
v,m;d=V.next;d!==V.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),V.cur=d);if(h.dirty){var l;d=e.dither;d!==h.dither&&(d?E.enable(3024):E.disable(3024),h.dither=d);d=e.blend_enable;d!==h.blend_enable&&(d?E.enable(3042):E.disable(3042),h.blend_enable=d);d=A[0];v=A[1];m=A[2];l=A[3];if(d!==ia[0]||v!==ia[1]||m!==ia[2]||l!==ia[3])E.blendColor(d,v,m,l),ia[0]=d,ia[1]=v,ia[2]=m,ia[3]=l;d=db[0];v=db[1];if(d!==X[0]||v!==X[1])E.blendEquationSeparate(d,v),X[0]=d,X[1]=v;d=ea[0];v=
ea[1];m=ea[2];l=ea[3];if(d!==Q[0]||v!==Q[1]||m!==Q[2]||l!==Q[3])E.blendFuncSeparate(d,v,m,l),Q[0]=d,Q[1]=v,Q[2]=m,Q[3]=l;d=e.depth_enable;d!==h.depth_enable&&(d?E.enable(2929):E.disable(2929),h.depth_enable=d);d=e.depth_func;d!==h.depth_func&&(E.depthFunc(d),h.depth_func=d);d=p[0];v=p[1];if(d!==L[0]||v!==L[1])E.depthRange(d,v),L[0]=d,L[1]=v;d=e.depth_mask;d!==h.depth_mask&&(E.depthMask(d),h.depth_mask=d);d=O[0];v=O[1];m=O[2];l=O[3];if(d!==z[0]||v!==z[1]||m!==z[2]||l!==z[3])E.colorMask(d,v,m,l),z[0]=
d,z[1]=v,z[2]=m,z[3]=l;d=e.cull_enable;d!==h.cull_enable&&(d?E.enable(2884):E.disable(2884),h.cull_enable=d);d=e.cull_face;d!==h.cull_face&&(E.cullFace(d),h.cull_face=d);d=e.frontFace;d!==h.frontFace&&(E.frontFace(d),h.frontFace=d);d=e.lineWidth;d!==h.lineWidth&&(E.lineWidth(d),h.lineWidth=d);d=e.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?E.enable(32823):E.disable(32823),h.polygonOffset_enable=d);d=K[0];v=K[1];if(d!==za[0]||v!==za[1])E.polygonOffset(d,v),za[0]=d,za[1]=v;d=e.sample_alpha;
d!==h.sample_alpha&&(d?E.enable(32926):E.disable(32926),h.sample_alpha=d);d=e.sample_enable;d!==h.sample_enable&&(d?E.enable(32928):E.disable(32928),h.sample_enable=d);d=na[0];v=na[1];if(d!==n[0]||v!==n[1])E.sampleCoverage(d,v),n[0]=d,n[1]=v;d=e.stencil_enable;d!==h.stencil_enable&&(d?E.enable(2960):E.disable(2960),h.stencil_enable=d);d=e.stencil_mask;d!==h.stencil_mask&&(E.stencilMask(d),h.stencil_mask=d);d=M[0];v=M[1];m=M[2];if(d!==ma[0]||v!==ma[1]||m!==ma[2])E.stencilFunc(d,v,m),ma[0]=d,ma[1]=
v,ma[2]=m;d=xa[0];v=xa[1];m=xa[2];l=xa[3];if(d!==fa[0]||v!==fa[1]||m!==fa[2]||l!==fa[3])E.stencilOpSeparate(d,v,m,l),fa[0]=d,fa[1]=v,fa[2]=m,fa[3]=l;d=oa[0];v=oa[1];m=oa[2];l=oa[3];if(d!==Ca[0]||v!==Ca[1]||m!==Ca[2]||l!==Ca[3])E.stencilOpSeparate(d,v,m,l),Ca[0]=d,Ca[1]=v,Ca[2]=m,Ca[3]=l;d=e.scissor_enable;d!==h.scissor_enable&&(d?E.enable(3089):E.disable(3089),h.scissor_enable=d);d=F[0];v=F[1];m=F[2];l=F[3];if(d!==aa[0]||v!==aa[1]||m!==aa[2]||l!==aa[3])E.scissor(d,v,m,l),aa[0]=d,aa[1]=v,aa[2]=m,aa[3]=
l;d=Ea[0];v=Ea[1];m=Ea[2];l=Ea[3];if(d!==ka[0]||v!==ka[1]||m!==ka[2]||l!==ka[3])E.viewport(d,v,m,l),ka[0]=d,ka[1]=v,ka[2]=m,ka[3]=l;h.dirty=!1}if(d=h.profile)t=performance.now(),J.count++;E.useProgram(g.program);W.setVAO(null);v=c.location;m=r[v];m.buffer||E.enableVertexAttribArray(v);if(m.type!==k.dtype||3!==m.size||m.buffer!==k||!1!==m.normalized||0!==m.offset||0!==m.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(v,3,k.dtype,!1,0,0),m.type=k.dtype,m.size=3,m.buffer=k,m.normalized=!1,
m.offset=0,m.stride=0;v=ga.location;m=r[v];m.buffer||E.enableVertexAttribArray(v);if(m.type!==q.dtype||3!==m.size||m.buffer!==q||!1!==m.normalized||0!==m.offset||0!==m.stride)E.bindBuffer(34962,q.buffer),E.vertexAttribPointer(v,3,q.dtype,!1,0,0),m.type=q.dtype,m.size=3,m.buffer=q,m.normalized=!1,m.offset=0,m.stride=0;v=a[5];C(v)&&16===v.length||ba.commandRaise(f,H);E.uniformMatrix4fv(b.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(pa[0]=v[0],pa[1]=v[1],pa[2]=v[2],pa[3]=v[3],pa[4]=v[4],
pa[5]=v[5],pa[6]=v[6],pa[7]=v[7],pa[8]=v[8],pa[9]=v[9],pa[10]=v[10],pa[11]=v[11],pa[12]=v[12],pa[13]=v[13],pa[14]=v[14],pa[15]=v[15],pa));v=a[8];C(v)&&16===v.length||ba.commandRaise(B,H);E.uniformMatrix4fv(S.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Aa[0]=v[0],Aa[1]=v[1],Aa[2]=v[2],Aa[3]=v[3],Aa[4]=v[4],Aa[5]=v[5],Aa[6]=v[6],Aa[7]=v[7],Aa[8]=v[8],Aa[9]=v[9],Aa[10]=v[10],Aa[11]=v[11],Aa[12]=v[12],Aa[13]=v[13],Aa[14]=v[14],Aa[15]=v[15],Aa));D&&E.bindBuffer(34963,D.buffer.buffer);v=
D.primType;m=D.vertCount-0;0<=m||ba.commandRaise(G,H);m&&(E.drawElements(v,m,D.type,0<<(D.type-5121>>1)),W.setVAO(null),d&&(J.cpuTime+=performance.now()-t))},scope:function(a,b,c){var e,d,f,g,n,p,r,u,y,z,A,C,E,M,F,fa,D,B,G,K,L,N,O,S,P,Q,ja,oa,xa,ga,V,X;if(e=h.profile)d=performance.now(),J.count++;f=w.elements;w.elements=T;g=w.offset;w.offset=0;n=T.vertCount-0;0<=n||ba.commandRaise(x,H);p=w.count;w.count=n;r=T.primType;n=w.primitive;w.primitive=r;r=t.buffer;t.buffer=q;u=t.divisor;t.divisor=0;y=t.normalized;
t.normalized=!1;z=t.offset;t.offset=0;A=t.size;t.size=0;C=t.state;t.state=1;E=t.stride;t.stride=0;M=t.type;t.type=q.dtype;F=t.w;t.w=0;fa=t.x;t.x=0;D=t.y;t.y=0;B=t.z;t.z=0;G=l.buffer;l.buffer=k;K=l.divisor;l.divisor=0;L=l.normalized;l.normalized=!1;N=l.offset;l.offset=0;O=l.size;l.size=0;S=l.state;l.state=1;P=l.stride;l.stride=0;Q=l.type;l.type=k.dtype;ja=l.w;l.w=0;oa=l.x;l.x=0;xa=l.y;l.y=0;ga=l.z;l.z=0;V=R.vert;R.vert=10;X=R.frag;R.frag=9;b(Z,a,c);e&&(J.cpuTime+=performance.now()-d);w.elements=f;
w.offset=g;w.count=p;w.primitive=n;t.buffer=r;t.divisor=u;t.normalized=y;t.offset=z;t.size=A;t.state=C;t.stride=E;t.type=M;t.w=F;t.x=fa;t.y=D;t.z=B;l.buffer=G;l.divisor=K;l.normalized=L;l.offset=N;l.size=O;l.state=S;l.stride=P;l.type=Q;l.w=ja;l.x=oa;l.y=xa;l.z=ga;R.vert=V;R.frag=X},batch:function(d,f){var g,m,l;g=V.next;g!==V.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),V.cur=g);if(h.dirty){var t,w;g=e.dither;g!==h.dither&&(g?E.enable(3024):E.disable(3024),h.dither=
g);g=e.blend_enable;g!==h.blend_enable&&(g?E.enable(3042):E.disable(3042),h.blend_enable=g);g=A[0];l=A[1];t=A[2];w=A[3];if(g!==ia[0]||l!==ia[1]||t!==ia[2]||w!==ia[3])E.blendColor(g,l,t,w),ia[0]=g,ia[1]=l,ia[2]=t,ia[3]=w;g=db[0];l=db[1];if(g!==X[0]||l!==X[1])E.blendEquationSeparate(g,l),X[0]=g,X[1]=l;g=ea[0];l=ea[1];t=ea[2];w=ea[3];if(g!==Q[0]||l!==Q[1]||t!==Q[2]||w!==Q[3])E.blendFuncSeparate(g,l,t,w),Q[0]=g,Q[1]=l,Q[2]=t,Q[3]=w;g=e.depth_enable;g!==h.depth_enable&&(g?E.enable(2929):E.disable(2929),
h.depth_enable=g);g=e.depth_func;g!==h.depth_func&&(E.depthFunc(g),h.depth_func=g);g=p[0];l=p[1];if(g!==L[0]||l!==L[1])E.depthRange(g,l),L[0]=g,L[1]=l;g=e.depth_mask;g!==h.depth_mask&&(E.depthMask(g),h.depth_mask=g);g=O[0];l=O[1];t=O[2];w=O[3];if(g!==z[0]||l!==z[1]||t!==z[2]||w!==z[3])E.colorMask(g,l,t,w),z[0]=g,z[1]=l,z[2]=t,z[3]=w;g=e.cull_enable;g!==h.cull_enable&&(g?E.enable(2884):E.disable(2884),h.cull_enable=g);g=e.cull_face;g!==h.cull_face&&(E.cullFace(g),h.cull_face=g);g=e.frontFace;g!==h.frontFace&&
(E.frontFace(g),h.frontFace=g);g=e.lineWidth;g!==h.lineWidth&&(E.lineWidth(g),h.lineWidth=g);g=e.polygonOffset_enable;g!==h.polygonOffset_enable&&(g?E.enable(32823):E.disable(32823),h.polygonOffset_enable=g);g=K[0];l=K[1];if(g!==za[0]||l!==za[1])E.polygonOffset(g,l),za[0]=g,za[1]=l;g=e.sample_alpha;g!==h.sample_alpha&&(g?E.enable(32926):E.disable(32926),h.sample_alpha=g);g=e.sample_enable;g!==h.sample_enable&&(g?E.enable(32928):E.disable(32928),h.sample_enable=g);g=na[0];l=na[1];if(g!==n[0]||l!==
n[1])E.sampleCoverage(g,l),n[0]=g,n[1]=l;g=e.stencil_enable;g!==h.stencil_enable&&(g?E.enable(2960):E.disable(2960),h.stencil_enable=g);g=e.stencil_mask;g!==h.stencil_mask&&(E.stencilMask(g),h.stencil_mask=g);g=M[0];l=M[1];t=M[2];if(g!==ma[0]||l!==ma[1]||t!==ma[2])E.stencilFunc(g,l,t),ma[0]=g,ma[1]=l,ma[2]=t;g=xa[0];l=xa[1];t=xa[2];w=xa[3];if(g!==fa[0]||l!==fa[1]||t!==fa[2]||w!==fa[3])E.stencilOpSeparate(g,l,t,w),fa[0]=g,fa[1]=l,fa[2]=t,fa[3]=w;g=oa[0];l=oa[1];t=oa[2];w=oa[3];if(g!==Ca[0]||l!==Ca[1]||
t!==Ca[2]||w!==Ca[3])E.stencilOpSeparate(g,l,t,w),Ca[0]=g,Ca[1]=l,Ca[2]=t,Ca[3]=w;g=e.scissor_enable;g!==h.scissor_enable&&(g?E.enable(3089):E.disable(3089),h.scissor_enable=g);g=F[0];l=F[1];t=F[2];w=F[3];if(g!==aa[0]||l!==aa[1]||t!==aa[2]||w!==aa[3])E.scissor(g,l,t,w),aa[0]=g,aa[1]=l,aa[2]=t,aa[3]=w;g=Ea[0];l=Ea[1];t=Ea[2];w=Ea[3];if(g!==ka[0]||l!==ka[1]||t!==ka[2]||w!==ka[3])E.viewport(g,l,t,w),ka[0]=g,ka[1]=l,ka[2]=t,ka[3]=w;h.dirty=!1}if(g=h.profile)m=performance.now(),J.count+=f;E.useProgram(ca.program);
W.setVAO(null);l=c.location;t=r[l];t.buffer||E.enableVertexAttribArray(l);if(t.type!==k.dtype||3!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||0!==t.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(l,3,k.dtype,!1,0,0),t.type=k.dtype,t.size=3,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=0;l=ga.location;t=r[l];t.buffer||E.enableVertexAttribArray(l);if(t.type!==q.dtype||3!==t.size||t.buffer!==q||!1!==t.normalized||0!==t.offset||0!==t.stride)E.bindBuffer(34962,q.buffer),E.vertexAttribPointer(l,
3,q.dtype,!1,0,0),t.type=q.dtype,t.size=3,t.buffer=q,t.normalized=!1,t.offset=0,t.stride=0;l=a[5];C(l)&&16===l.length||ba.commandRaise(u,H);E.uniformMatrix4fv(b.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ba[0]=l[0],Ba[1]=l[1],Ba[2]=l[2],Ba[3]=l[3],Ba[4]=l[4],Ba[5]=l[5],Ba[6]=l[6],Ba[7]=l[7],Ba[8]=l[8],Ba[9]=l[9],Ba[10]=l[10],Ba[11]=l[11],Ba[12]=l[12],Ba[13]=l[13],Ba[14]=l[14],Ba[15]=l[15],Ba));l=a[8];C(l)&&16===l.length||ba.commandRaise(N,H);E.uniformMatrix4fv(S.location,!1,Array.isArray(l)||
l instanceof Float32Array?l:(ja[0]=l[0],ja[1]=l[1],ja[2]=l[2],ja[3]=l[3],ja[4]=l[4],ja[5]=l[5],ja[6]=l[6],ja[7]=l[7],ja[8]=l[8],ja[9]=l[9],ja[10]=l[10],ja[11]=l[11],ja[12]=l[12],ja[13]=l[13],ja[14]=l[14],ja[15]=l[15],ja));y&&E.bindBuffer(34963,y.buffer.buffer);t=y.primType;w=y.vertCount-0;0<=w||ba.commandRaise(P,H);for(l=0;l<f;++l)w&&E.drawElements(t,w,y.type,0<<(y.type-5121>>1));W.setVAO(null);g&&(J.cpuTime+=performance.now()-m)}}},"$14,angle,color,position":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,
l,ca,u,N){var y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,W,A,ia,db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa,M,ma,oa;y=d.attributes;P=d.context;ga=d.current;c=d.draw;b=d.elements;S=d.framebuffer;r=d.gl;Z=d.isArrayLike;h=d.next;w=d.shader;V=d.uniforms;E=d.vao;C=h.blend_color;e=ga.blend_color;R=h.blend_equation;a=ga.blend_equation;W=h.blend_func;A=ga.blend_func;ia=h.colorMask;db=ga.colorMask;X=h.depth_range;ea=ga.depth_range;Q=h.polygonOffset_offset;O=ga.polygonOffset_offset;z=h.sample_coverage;p=ga.sample_coverage;L=h.scissor_box;
K=ga.scissor_box;za=h.stencil_func;na=ga.stencil_func;n=h.stencil_opBack;F=ga.stencil_opBack;aa=h.stencil_opFront;M=ga.stencil_opFront;ma=h.viewport;oa=ga.viewport;return{draw:function(d){var l,t,w,x;l=S.next;l!==S.cur&&(l?r.bindFramebuffer(36160,l.framebuffer):r.bindFramebuffer(36160,null),S.cur=l);if(ga.dirty){var D;l=h.dither;l!==ga.dither&&(l?r.enable(3024):r.disable(3024),ga.dither=l);l=h.blend_enable;l!==ga.blend_enable&&(l?r.enable(3042):r.disable(3042),ga.blend_enable=l);l=C[0];w=C[1];x=C[2];
D=C[3];if(l!==e[0]||w!==e[1]||x!==e[2]||D!==e[3])r.blendColor(l,w,x,D),e[0]=l,e[1]=w,e[2]=x,e[3]=D;l=R[0];w=R[1];if(l!==a[0]||w!==a[1])r.blendEquationSeparate(l,w),a[0]=l,a[1]=w;l=W[0];w=W[1];x=W[2];D=W[3];if(l!==A[0]||w!==A[1]||x!==A[2]||D!==A[3])r.blendFuncSeparate(l,w,x,D),A[0]=l,A[1]=w,A[2]=x,A[3]=D;l=h.depth_func;l!==ga.depth_func&&(r.depthFunc(l),ga.depth_func=l);l=X[0];w=X[1];if(l!==ea[0]||w!==ea[1])r.depthRange(l,w),ea[0]=l,ea[1]=w;l=h.depth_mask;l!==ga.depth_mask&&(r.depthMask(l),ga.depth_mask=
l);l=ia[0];w=ia[1];x=ia[2];D=ia[3];if(l!==db[0]||w!==db[1]||x!==db[2]||D!==db[3])r.colorMask(l,w,x,D),db[0]=l,db[1]=w,db[2]=x,db[3]=D;l=h.cull_enable;l!==ga.cull_enable&&(l?r.enable(2884):r.disable(2884),ga.cull_enable=l);l=h.cull_face;l!==ga.cull_face&&(r.cullFace(l),ga.cull_face=l);l=h.frontFace;l!==ga.frontFace&&(r.frontFace(l),ga.frontFace=l);l=h.lineWidth;l!==ga.lineWidth&&(r.lineWidth(l),ga.lineWidth=l);l=h.polygonOffset_enable;l!==ga.polygonOffset_enable&&(l?r.enable(32823):r.disable(32823),
ga.polygonOffset_enable=l);l=Q[0];w=Q[1];if(l!==O[0]||w!==O[1])r.polygonOffset(l,w),O[0]=l,O[1]=w;l=h.sample_alpha;l!==ga.sample_alpha&&(l?r.enable(32926):r.disable(32926),ga.sample_alpha=l);l=h.sample_enable;l!==ga.sample_enable&&(l?r.enable(32928):r.disable(32928),ga.sample_enable=l);l=z[0];w=z[1];if(l!==p[0]||w!==p[1])r.sampleCoverage(l,w),p[0]=l,p[1]=w;l=h.stencil_enable;l!==ga.stencil_enable&&(l?r.enable(2960):r.disable(2960),ga.stencil_enable=l);l=h.stencil_mask;l!==ga.stencil_mask&&(r.stencilMask(l),
ga.stencil_mask=l);l=za[0];w=za[1];x=za[2];if(l!==na[0]||w!==na[1]||x!==na[2])r.stencilFunc(l,w,x),na[0]=l,na[1]=w,na[2]=x;l=aa[0];w=aa[1];x=aa[2];D=aa[3];if(l!==M[0]||w!==M[1]||x!==M[2]||D!==M[3])r.stencilOpSeparate(l,w,x,D),M[0]=l,M[1]=w,M[2]=x,M[3]=D;l=n[0];w=n[1];x=n[2];D=n[3];if(l!==F[0]||w!==F[1]||x!==F[2]||D!==F[3])r.stencilOpSeparate(l,w,x,D),F[0]=l,F[1]=w,F[2]=x,F[3]=D;l=h.scissor_enable;l!==ga.scissor_enable&&(l?r.enable(3089):r.disable(3089),ga.scissor_enable=l);l=L[0];w=L[1];x=L[2];D=
L[3];if(l!==K[0]||w!==K[1]||x!==K[2]||D!==K[3])r.scissor(l,w,x,D),K[0]=l,K[1]=w,K[2]=x,K[3]=D;l=ma[0];w=ma[1];x=ma[2];D=ma[3];if(l!==oa[0]||w!==oa[1]||x!==oa[2]||D!==oa[3])r.viewport(l,w,x,D),oa[0]=l,oa[1]=w,oa[2]=x,oa[3]=D}r.disable(2929);ga.depth_enable=!1;if(l=ga.profile)t=performance.now(),J.count++;r.useProgram(g.program);E.setVAO(null);w=N.location;x=y[w];x.buffer||r.enableVertexAttribArray(w);if(x.type!==k.dtype||2!==x.size||x.buffer!==k||!1!==x.normalized||0!==x.offset||0!==x.stride)r.bindBuffer(34962,
k.buffer),r.vertexAttribPointer(w,2,k.dtype,!1,0,0),x.type=k.dtype,x.size=2,x.buffer=k,x.normalized=!1,x.offset=0,x.stride=0;w=q.call(this,P,d,0);"number"!==typeof w&&ba.commandRaise(f,H);r.uniform1f(ca.location,w);d=d.color;Z(d)&&4===d.length||ba.commandRaise(B,H);r.uniform4f(u.location,d[0],d[1],d[2],d[3]);(d=c.elements)?r.bindBuffer(34963,d.buffer.buffer):E.currentVAO&&(d=b.getElements(E.currentVAO.elements))&&r.bindBuffer(34963,d.buffer.buffer);w=c.primitive;x=c.offset;d?r.drawElements(w,3,d.type,
x<<(d.type-5121>>1)):r.drawArrays(w,x,3);ga.dirty=!0;E.setVAO(null);l&&(J.cpuTime+=performance.now()-t)},scope:function(a,b,e){var d,f,g,n,p,l,r,q,t,m,u,y,z,A,x,C,E,M,F,B;d=h.depth_enable;h.depth_enable=!1;if(f=ga.profile)g=performance.now(),J.count++;n=c.count;c.count=3;p=D.call(this,P,a,e);l=V[3];V[3]=p;r=a.color;p=V[4];V[4]=r;r=G.buffer;G.buffer=k;q=G.divisor;G.divisor=0;t=G.normalized;G.normalized=!1;m=G.offset;G.offset=0;u=G.size;G.size=0;y=G.state;G.state=1;z=G.stride;G.stride=0;A=G.type;G.type=
k.dtype;x=G.w;G.w=0;C=G.x;G.x=0;E=G.y;G.y=0;M=G.z;G.z=0;F=w.vert;w.vert=2;B=w.frag;w.frag=1;ga.dirty=!0;b(P,a,e);h.depth_enable=d;f&&(J.cpuTime+=performance.now()-g);c.count=n;V[3]=l;V[4]=p;G.buffer=r;G.divisor=q;G.normalized=t;G.offset=m;G.size=u;G.state=y;G.stride=z;G.type=A;G.w=x;G.x=C;G.y=E;G.z=M;w.vert=F;w.frag=B;ga.dirty=!0},batch:function(d,f){var g,q,w,D;g=S.next;g!==S.cur&&(g?r.bindFramebuffer(36160,g.framebuffer):r.bindFramebuffer(36160,null),S.cur=g);if(ga.dirty){var B,G,ja;g=h.dither;
g!==ga.dither&&(g?r.enable(3024):r.disable(3024),ga.dither=g);g=h.blend_enable;g!==ga.blend_enable&&(g?r.enable(3042):r.disable(3042),ga.blend_enable=g);g=C[0];B=C[1];G=C[2];ja=C[3];if(g!==e[0]||B!==e[1]||G!==e[2]||ja!==e[3])r.blendColor(g,B,G,ja),e[0]=g,e[1]=B,e[2]=G,e[3]=ja;g=R[0];B=R[1];if(g!==a[0]||B!==a[1])r.blendEquationSeparate(g,B),a[0]=g,a[1]=B;g=W[0];B=W[1];G=W[2];ja=W[3];if(g!==A[0]||B!==A[1]||G!==A[2]||ja!==A[3])r.blendFuncSeparate(g,B,G,ja),A[0]=g,A[1]=B,A[2]=G,A[3]=ja;g=h.depth_func;
g!==ga.depth_func&&(r.depthFunc(g),ga.depth_func=g);g=X[0];B=X[1];if(g!==ea[0]||B!==ea[1])r.depthRange(g,B),ea[0]=g,ea[1]=B;g=h.depth_mask;g!==ga.depth_mask&&(r.depthMask(g),ga.depth_mask=g);g=ia[0];B=ia[1];G=ia[2];ja=ia[3];if(g!==db[0]||B!==db[1]||G!==db[2]||ja!==db[3])r.colorMask(g,B,G,ja),db[0]=g,db[1]=B,db[2]=G,db[3]=ja;g=h.cull_enable;g!==ga.cull_enable&&(g?r.enable(2884):r.disable(2884),ga.cull_enable=g);g=h.cull_face;g!==ga.cull_face&&(r.cullFace(g),ga.cull_face=g);g=h.frontFace;g!==ga.frontFace&&
(r.frontFace(g),ga.frontFace=g);g=h.lineWidth;g!==ga.lineWidth&&(r.lineWidth(g),ga.lineWidth=g);g=h.polygonOffset_enable;g!==ga.polygonOffset_enable&&(g?r.enable(32823):r.disable(32823),ga.polygonOffset_enable=g);g=Q[0];B=Q[1];if(g!==O[0]||B!==O[1])r.polygonOffset(g,B),O[0]=g,O[1]=B;g=h.sample_alpha;g!==ga.sample_alpha&&(g?r.enable(32926):r.disable(32926),ga.sample_alpha=g);g=h.sample_enable;g!==ga.sample_enable&&(g?r.enable(32928):r.disable(32928),ga.sample_enable=g);g=z[0];B=z[1];if(g!==p[0]||B!==
p[1])r.sampleCoverage(g,B),p[0]=g,p[1]=B;g=h.stencil_enable;g!==ga.stencil_enable&&(g?r.enable(2960):r.disable(2960),ga.stencil_enable=g);g=h.stencil_mask;g!==ga.stencil_mask&&(r.stencilMask(g),ga.stencil_mask=g);g=za[0];B=za[1];G=za[2];if(g!==na[0]||B!==na[1]||G!==na[2])r.stencilFunc(g,B,G),na[0]=g,na[1]=B,na[2]=G;g=aa[0];B=aa[1];G=aa[2];ja=aa[3];if(g!==M[0]||B!==M[1]||G!==M[2]||ja!==M[3])r.stencilOpSeparate(g,B,G,ja),M[0]=g,M[1]=B,M[2]=G,M[3]=ja;g=n[0];B=n[1];G=n[2];ja=n[3];if(g!==F[0]||B!==F[1]||
G!==F[2]||ja!==F[3])r.stencilOpSeparate(g,B,G,ja),F[0]=g,F[1]=B,F[2]=G,F[3]=ja;g=h.scissor_enable;g!==ga.scissor_enable&&(g?r.enable(3089):r.disable(3089),ga.scissor_enable=g);g=L[0];B=L[1];G=L[2];ja=L[3];if(g!==K[0]||B!==K[1]||G!==K[2]||ja!==K[3])r.scissor(g,B,G,ja),K[0]=g,K[1]=B,K[2]=G,K[3]=ja;g=ma[0];B=ma[1];G=ma[2];ja=ma[3];if(g!==oa[0]||B!==oa[1]||G!==oa[2]||ja!==oa[3])r.viewport(g,B,G,ja),oa[0]=g,oa[1]=B,oa[2]=G,oa[3]=ja}r.disable(2929);ga.depth_enable=!1;if(g=ga.profile)q=performance.now(),
J.count+=f;r.useProgram(T.program);E.setVAO(null);B=N.location;G=y[B];G.buffer||r.enableVertexAttribArray(B);if(G.type!==k.dtype||2!==G.size||G.buffer!==k||!1!==G.normalized||0!==G.offset||0!==G.stride)r.bindBuffer(34962,k.buffer),r.vertexAttribPointer(B,2,k.dtype,!1,0,0),G.type=k.dtype,G.size=2,G.buffer=k,G.normalized=!1,G.offset=0,G.stride=0;w=x.call(this,P,D,w);"number"!==typeof w&&ba.commandRaise(t,H);r.uniform1f(ca.location,w);(B=c.elements)?r.bindBuffer(34963,B.buffer.buffer):E.currentVAO&&
(B=b.getElements(E.currentVAO.elements))&&r.bindBuffer(34963,B.buffer.buffer);G=c.primitive;ja=c.offset;for(w=0;w<f;++w){D=d[w];var V,Ta,v,m,U,va,wa;V=D.color;Z(V)&&4===V.length||ba.commandRaise(l,H);D=V[0];v=V[1];U=V[2];V=V[3];w&&Ta===D&&m===v&&va===U&&wa===V||(Ta=D,m=v,va=U,wa=V,r.uniform4f(u.location,D,v,U,V));B?r.drawElements(G,3,B.type,ja<<(B.type-5121>>1)):r.drawArrays(G,ja,3)}ga.dirty=!0;E.setVAO(null);g&&(J.cpuTime+=performance.now()-q)}}},"$13,color,position":function(d,ba,H,J,g,k,q,f,B,
D,G,T,x,t,l,ca){var u,N,y,P,ga,c,b,S,r,Z,h,w,V,E,C,e,R,a,W,A,ia,db,X,ea,Q,O,z,p,L,K,za,na,n,F,aa;u=d.attributes;N=d.context;y=d.current;P=d.draw;ga=d.framebuffer;c=d.gl;b=d.next;S=d.shader;r=d.uniforms;Z=d.vao;h=b.blend_color;w=y.blend_color;V=b.blend_equation;E=y.blend_equation;C=b.blend_func;e=y.blend_func;R=b.colorMask;a=y.colorMask;W=b.depth_range;A=y.depth_range;ia=b.polygonOffset_offset;db=y.polygonOffset_offset;X=b.sample_coverage;ea=y.sample_coverage;Q=b.scissor_box;O=y.scissor_box;z=b.stencil_func;
p=y.stencil_func;L=b.stencil_opBack;K=y.stencil_opBack;za=b.stencil_opFront;na=y.stencil_opFront;n=b.viewport;F=y.viewport;aa=[1,0,0,1];return{draw:function(d){var r,t,x;d=ga.next;d!==ga.cur&&(d?c.bindFramebuffer(36160,d.framebuffer):c.bindFramebuffer(36160,null),ga.cur=d);if(y.dirty){var B;d=b.dither;d!==y.dither&&(d?c.enable(3024):c.disable(3024),y.dither=d);d=b.blend_enable;d!==y.blend_enable&&(d?c.enable(3042):c.disable(3042),y.blend_enable=d);d=h[0];t=h[1];x=h[2];B=h[3];if(d!==w[0]||t!==w[1]||
x!==w[2]||B!==w[3])c.blendColor(d,t,x,B),w[0]=d,w[1]=t,w[2]=x,w[3]=B;d=V[0];t=V[1];if(d!==E[0]||t!==E[1])c.blendEquationSeparate(d,t),E[0]=d,E[1]=t;d=C[0];t=C[1];x=C[2];B=C[3];if(d!==e[0]||t!==e[1]||x!==e[2]||B!==e[3])c.blendFuncSeparate(d,t,x,B),e[0]=d,e[1]=t,e[2]=x,e[3]=B;d=b.depth_enable;d!==y.depth_enable&&(d?c.enable(2929):c.disable(2929),y.depth_enable=d);d=b.depth_func;d!==y.depth_func&&(c.depthFunc(d),y.depth_func=d);d=W[0];t=W[1];if(d!==A[0]||t!==A[1])c.depthRange(d,t),A[0]=d,A[1]=t;d=b.depth_mask;
d!==y.depth_mask&&(c.depthMask(d),y.depth_mask=d);d=R[0];t=R[1];x=R[2];B=R[3];if(d!==a[0]||t!==a[1]||x!==a[2]||B!==a[3])c.colorMask(d,t,x,B),a[0]=d,a[1]=t,a[2]=x,a[3]=B;d=b.cull_enable;d!==y.cull_enable&&(d?c.enable(2884):c.disable(2884),y.cull_enable=d);d=b.cull_face;d!==y.cull_face&&(c.cullFace(d),y.cull_face=d);d=b.frontFace;d!==y.frontFace&&(c.frontFace(d),y.frontFace=d);d=b.polygonOffset_enable;d!==y.polygonOffset_enable&&(d?c.enable(32823):c.disable(32823),y.polygonOffset_enable=d);d=ia[0];
t=ia[1];if(d!==db[0]||t!==db[1])c.polygonOffset(d,t),db[0]=d,db[1]=t;d=b.sample_alpha;d!==y.sample_alpha&&(d?c.enable(32926):c.disable(32926),y.sample_alpha=d);d=b.sample_enable;d!==y.sample_enable&&(d?c.enable(32928):c.disable(32928),y.sample_enable=d);d=X[0];t=X[1];if(d!==ea[0]||t!==ea[1])c.sampleCoverage(d,t),ea[0]=d,ea[1]=t;d=b.stencil_enable;d!==y.stencil_enable&&(d?c.enable(2960):c.disable(2960),y.stencil_enable=d);d=b.stencil_mask;d!==y.stencil_mask&&(c.stencilMask(d),y.stencil_mask=d);d=z[0];
t=z[1];x=z[2];if(d!==p[0]||t!==p[1]||x!==p[2])c.stencilFunc(d,t,x),p[0]=d,p[1]=t,p[2]=x;d=za[0];t=za[1];x=za[2];B=za[3];if(d!==na[0]||t!==na[1]||x!==na[2]||B!==na[3])c.stencilOpSeparate(d,t,x,B),na[0]=d,na[1]=t,na[2]=x,na[3]=B;d=L[0];t=L[1];x=L[2];B=L[3];if(d!==K[0]||t!==K[1]||x!==K[2]||B!==K[3])c.stencilOpSeparate(d,t,x,B),K[0]=d,K[1]=t,K[2]=x,K[3]=B;d=b.scissor_enable;d!==y.scissor_enable&&(d?c.enable(3089):c.disable(3089),y.scissor_enable=d);d=Q[0];t=Q[1];x=Q[2];B=Q[3];if(d!==O[0]||t!==O[1]||x!==
O[2]||B!==O[3])c.scissor(d,t,x,B),O[0]=d,O[1]=t,O[2]=x,O[3]=B;d=n[0];t=n[1];x=n[2];B=n[3];if(d!==F[0]||t!==F[1]||x!==F[2]||B!==F[3])c.viewport(d,t,x,B),F[0]=d,F[1]=t,F[2]=x,F[3]=B}c.lineWidth(1);y.lineWidth=1;if(d=y.profile)r=performance.now(),J.count++;c.useProgram(g.program);Z.setVAO(null);t=ca.location;x=u[t];x.buffer||c.enableVertexAttribArray(t);if(x.type!==k.dtype||2!==x.size||x.buffer!==k||!1!==x.normalized||0!==x.offset||0!==x.stride)c.bindBuffer(34962,k.buffer),c.vertexAttribPointer(t,2,
k.dtype,!1,0,0),x.type=k.dtype,x.size=2,x.buffer=k,x.normalized=!1,x.offset=0,x.stride=0;c.uniform4f(l.location,1,0,0,1);q&&c.bindBuffer(34963,q.buffer.buffer);t=q.primType;x=q.vertCount-0;0<=x||ba.commandRaise(f,H);x&&(c.drawElements(t,x,q.type,0<<(q.type-5121>>1)),y.dirty=!0,Z.setVAO(null),d&&(J.cpuTime+=performance.now()-r))},scope:function(a,c,d){var e,f,g,h,n,p,l,q,t,w,u,v,m,z,x,A,C,E,F,I,K,L;e=b.lineWidth;b.lineWidth=1;if(f=y.profile)g=performance.now(),J.count++;h=P.elements;P.elements=B;n=
P.offset;P.offset=0;p=B.vertCount-0;0<=p||ba.commandRaise(D,H);l=P.count;P.count=p;q=B.primType;p=P.primitive;P.primitive=q;q=r[3];r[3]=aa;t=G.buffer;G.buffer=k;w=G.divisor;G.divisor=0;u=G.normalized;G.normalized=!1;v=G.offset;G.offset=0;m=G.size;G.size=0;z=G.state;G.state=1;x=G.stride;G.stride=0;A=G.type;G.type=k.dtype;C=G.w;G.w=0;E=G.x;G.x=0;F=G.y;G.y=0;I=G.z;G.z=0;K=S.vert;S.vert=2;L=S.frag;S.frag=1;y.dirty=!0;c(N,a,d);b.lineWidth=e;f&&(J.cpuTime+=performance.now()-g);P.elements=h;P.offset=n;P.count=
l;P.primitive=p;r[3]=q;G.buffer=t;G.divisor=w;G.normalized=u;G.offset=v;G.size=m;G.state=z;G.stride=x;G.type=A;G.w=C;G.x=E;G.y=F;G.z=I;S.vert=K;S.frag=L;y.dirty=!0},batch:function(d,f){var g,r,q;g=ga.next;g!==ga.cur&&(g?c.bindFramebuffer(36160,g.framebuffer):c.bindFramebuffer(36160,null),ga.cur=g);if(y.dirty){var B,D;g=b.dither;g!==y.dither&&(g?c.enable(3024):c.disable(3024),y.dither=g);g=b.blend_enable;g!==y.blend_enable&&(g?c.enable(3042):c.disable(3042),y.blend_enable=g);g=h[0];q=h[1];B=h[2];D=
h[3];if(g!==w[0]||q!==w[1]||B!==w[2]||D!==w[3])c.blendColor(g,q,B,D),w[0]=g,w[1]=q,w[2]=B,w[3]=D;g=V[0];q=V[1];if(g!==E[0]||q!==E[1])c.blendEquationSeparate(g,q),E[0]=g,E[1]=q;g=C[0];q=C[1];B=C[2];D=C[3];if(g!==e[0]||q!==e[1]||B!==e[2]||D!==e[3])c.blendFuncSeparate(g,q,B,D),e[0]=g,e[1]=q,e[2]=B,e[3]=D;g=b.depth_enable;g!==y.depth_enable&&(g?c.enable(2929):c.disable(2929),y.depth_enable=g);g=b.depth_func;g!==y.depth_func&&(c.depthFunc(g),y.depth_func=g);g=W[0];q=W[1];if(g!==A[0]||q!==A[1])c.depthRange(g,
q),A[0]=g,A[1]=q;g=b.depth_mask;g!==y.depth_mask&&(c.depthMask(g),y.depth_mask=g);g=R[0];q=R[1];B=R[2];D=R[3];if(g!==a[0]||q!==a[1]||B!==a[2]||D!==a[3])c.colorMask(g,q,B,D),a[0]=g,a[1]=q,a[2]=B,a[3]=D;g=b.cull_enable;g!==y.cull_enable&&(g?c.enable(2884):c.disable(2884),y.cull_enable=g);g=b.cull_face;g!==y.cull_face&&(c.cullFace(g),y.cull_face=g);g=b.frontFace;g!==y.frontFace&&(c.frontFace(g),y.frontFace=g);g=b.polygonOffset_enable;g!==y.polygonOffset_enable&&(g?c.enable(32823):c.disable(32823),y.polygonOffset_enable=
g);g=ia[0];q=ia[1];if(g!==db[0]||q!==db[1])c.polygonOffset(g,q),db[0]=g,db[1]=q;g=b.sample_alpha;g!==y.sample_alpha&&(g?c.enable(32926):c.disable(32926),y.sample_alpha=g);g=b.sample_enable;g!==y.sample_enable&&(g?c.enable(32928):c.disable(32928),y.sample_enable=g);g=X[0];q=X[1];if(g!==ea[0]||q!==ea[1])c.sampleCoverage(g,q),ea[0]=g,ea[1]=q;g=b.stencil_enable;g!==y.stencil_enable&&(g?c.enable(2960):c.disable(2960),y.stencil_enable=g);g=b.stencil_mask;g!==y.stencil_mask&&(c.stencilMask(g),y.stencil_mask=
g);g=z[0];q=z[1];B=z[2];if(g!==p[0]||q!==p[1]||B!==p[2])c.stencilFunc(g,q,B),p[0]=g,p[1]=q,p[2]=B;g=za[0];q=za[1];B=za[2];D=za[3];if(g!==na[0]||q!==na[1]||B!==na[2]||D!==na[3])c.stencilOpSeparate(g,q,B,D),na[0]=g,na[1]=q,na[2]=B,na[3]=D;g=L[0];q=L[1];B=L[2];D=L[3];if(g!==K[0]||q!==K[1]||B!==K[2]||D!==K[3])c.stencilOpSeparate(g,q,B,D),K[0]=g,K[1]=q,K[2]=B,K[3]=D;g=b.scissor_enable;g!==y.scissor_enable&&(g?c.enable(3089):c.disable(3089),y.scissor_enable=g);g=Q[0];q=Q[1];B=Q[2];D=Q[3];if(g!==O[0]||q!==
O[1]||B!==O[2]||D!==O[3])c.scissor(g,q,B,D),O[0]=g,O[1]=q,O[2]=B,O[3]=D;g=n[0];q=n[1];B=n[2];D=n[3];if(g!==F[0]||q!==F[1]||B!==F[2]||D!==F[3])c.viewport(g,q,B,D),F[0]=g,F[1]=q,F[2]=B,F[3]=D}c.lineWidth(1);y.lineWidth=1;if(g=y.profile)r=performance.now(),J.count+=f;c.useProgram(T.program);Z.setVAO(null);q=ca.location;B=u[q];B.buffer||c.enableVertexAttribArray(q);if(B.type!==k.dtype||2!==B.size||B.buffer!==k||!1!==B.normalized||0!==B.offset||0!==B.stride)c.bindBuffer(34962,k.buffer),c.vertexAttribPointer(q,
2,k.dtype,!1,0,0),B.type=k.dtype,B.size=2,B.buffer=k,B.normalized=!1,B.offset=0,B.stride=0;c.uniform4f(l.location,1,0,0,1);x&&c.bindBuffer(34963,x.buffer.buffer);B=x.primType;D=x.vertCount-0;0<=D||ba.commandRaise(t,H);for(q=0;q<f;++q)D&&c.drawElements(B,D,x.type,0<<(x.type-5121>>1));y.dirty=!0;Z.setVAO(null);g&&(J.cpuTime+=performance.now()-r)}}},"$20,mouse,position,t,texture":function(d,ba,H,J,g,k,q,f,B,D,G,T,x,t,l,ca,u,N,y,P,ga,c,b,S,r){var Z,h,w,V,E,C,e,R,a,W,A,ia,db,X,ea,Q,O,z,p,L,K,za,na,n,F,
aa,M,ma,oa,Ca,xa,fa,Ea,ka,pa,Aa;Z=d.attributes;h=d.context;w=d.current;V=d.draw;E=d.elements;C=d.framebuffer;e=d.gl;R=d.isArrayLike;a=d.next;W=d.shader;A=d.uniforms;ia=d.vao;db=a.blend_color;X=w.blend_color;ea=a.blend_equation;Q=w.blend_equation;O=a.blend_func;z=w.blend_func;p=a.colorMask;L=w.colorMask;K=a.depth_range;za=w.depth_range;na=a.polygonOffset_offset;n=w.polygonOffset_offset;F=a.sample_coverage;aa=w.sample_coverage;M=a.scissor_box;ma=w.scissor_box;oa=a.stencil_func;Ca=w.stencil_func;xa=
a.stencil_opBack;fa=w.stencil_opBack;Ea=a.stencil_opFront;ka=w.stencil_opFront;pa=a.viewport;Aa=w.viewport;return{draw:function(d){var l,t,u,v;l=C.next;l!==C.cur&&(l?e.bindFramebuffer(36160,l.framebuffer):e.bindFramebuffer(36160,null),C.cur=l);if(w.dirty){var m;l=a.dither;l!==w.dither&&(l?e.enable(3024):e.disable(3024),w.dither=l);l=a.blend_enable;l!==w.blend_enable&&(l?e.enable(3042):e.disable(3042),w.blend_enable=l);l=db[0];u=db[1];v=db[2];m=db[3];if(l!==X[0]||u!==X[1]||v!==X[2]||m!==X[3])e.blendColor(l,
u,v,m),X[0]=l,X[1]=u,X[2]=v,X[3]=m;l=ea[0];u=ea[1];if(l!==Q[0]||u!==Q[1])e.blendEquationSeparate(l,u),Q[0]=l,Q[1]=u;l=O[0];u=O[1];v=O[2];m=O[3];if(l!==z[0]||u!==z[1]||v!==z[2]||m!==z[3])e.blendFuncSeparate(l,u,v,m),z[0]=l,z[1]=u,z[2]=v,z[3]=m;l=a.depth_enable;l!==w.depth_enable&&(l?e.enable(2929):e.disable(2929),w.depth_enable=l);l=a.depth_func;l!==w.depth_func&&(e.depthFunc(l),w.depth_func=l);l=K[0];u=K[1];if(l!==za[0]||u!==za[1])e.depthRange(l,u),za[0]=l,za[1]=u;l=a.depth_mask;l!==w.depth_mask&&
(e.depthMask(l),w.depth_mask=l);l=p[0];u=p[1];v=p[2];m=p[3];if(l!==L[0]||u!==L[1]||v!==L[2]||m!==L[3])e.colorMask(l,u,v,m),L[0]=l,L[1]=u,L[2]=v,L[3]=m;l=a.cull_enable;l!==w.cull_enable&&(l?e.enable(2884):e.disable(2884),w.cull_enable=l);l=a.cull_face;l!==w.cull_face&&(e.cullFace(l),w.cull_face=l);l=a.frontFace;l!==w.frontFace&&(e.frontFace(l),w.frontFace=l);l=a.lineWidth;l!==w.lineWidth&&(e.lineWidth(l),w.lineWidth=l);l=a.polygonOffset_enable;l!==w.polygonOffset_enable&&(l?e.enable(32823):e.disable(32823),
w.polygonOffset_enable=l);l=na[0];u=na[1];if(l!==n[0]||u!==n[1])e.polygonOffset(l,u),n[0]=l,n[1]=u;l=a.sample_alpha;l!==w.sample_alpha&&(l?e.enable(32926):e.disable(32926),w.sample_alpha=l);l=a.sample_enable;l!==w.sample_enable&&(l?e.enable(32928):e.disable(32928),w.sample_enable=l);l=F[0];u=F[1];if(l!==aa[0]||u!==aa[1])e.sampleCoverage(l,u),aa[0]=l,aa[1]=u;l=a.stencil_enable;l!==w.stencil_enable&&(l?e.enable(2960):e.disable(2960),w.stencil_enable=l);l=a.stencil_mask;l!==w.stencil_mask&&(e.stencilMask(l),
w.stencil_mask=l);l=oa[0];u=oa[1];v=oa[2];if(l!==Ca[0]||u!==Ca[1]||v!==Ca[2])e.stencilFunc(l,u,v),Ca[0]=l,Ca[1]=u,Ca[2]=v;l=Ea[0];u=Ea[1];v=Ea[2];m=Ea[3];if(l!==ka[0]||u!==ka[1]||v!==ka[2]||m!==ka[3])e.stencilOpSeparate(l,u,v,m),ka[0]=l,ka[1]=u,ka[2]=v,ka[3]=m;l=xa[0];u=xa[1];v=xa[2];m=xa[3];if(l!==fa[0]||u!==fa[1]||v!==fa[2]||m!==fa[3])e.stencilOpSeparate(l,u,v,m),fa[0]=l,fa[1]=u,fa[2]=v,fa[3]=m;l=a.scissor_enable;l!==w.scissor_enable&&(l?e.enable(3089):e.disable(3089),w.scissor_enable=l);l=M[0];
u=M[1];v=M[2];m=M[3];if(l!==ma[0]||u!==ma[1]||v!==ma[2]||m!==ma[3])e.scissor(l,u,v,m),ma[0]=l,ma[1]=u,ma[2]=v,ma[3]=m;l=pa[0];u=pa[1];v=pa[2];m=pa[3];if(l!==Aa[0]||u!==Aa[1]||v!==Aa[2]||m!==Aa[3])e.viewport(l,u,v,m),Aa[0]=l,Aa[1]=u,Aa[2]=v,Aa[3]=m;w.dirty=!1}if(l=w.profile)t=performance.now(),J.count++;e.useProgram(g.program);ia.setVAO(null);u=b.location;v=Z[u];v.buffer||e.enableVertexAttribArray(u);if(v.type!==k.dtype||2!==v.size||v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)e.bindBuffer(34962,
k.buffer),e.vertexAttribPointer(u,2,k.dtype,!1,0,0),v.type=k.dtype,v.size=2,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;u=q.call(this,h,d,0);R(u)&&2===u.length||ba.commandRaise(f,H);e.uniform2f(c.location,u[0],u[1]);d=B.call(this,h,d,0);"number"!==typeof d&&ba.commandRaise(D,H);e.uniform1f(S.location,d);e.uniform1i(r.location,G.bind());(d=V.elements)?e.bindBuffer(34963,d.buffer.buffer):ia.currentVAO&&(d=E.getElements(ia.currentVAO.elements))&&e.bindBuffer(34963,d.buffer.buffer);u=V.primitive;
v=V.offset;d?e.drawElements(u,3,d.type,v<<(d.type-5121>>1)):e.drawArrays(u,v,3);ia.setVAO(null);l&&(J.cpuTime+=performance.now()-t);G.unbind()},scope:function(a,b,c){var d,e,f,g,n,q,p,r,u,y,z,B,C,E,D,F,G,H,K,L;if(d=w.profile)e=performance.now(),J.count++;f=V.count;V.count=3;g=T.call(this,h,a,c);n=A[3];A[3]=g;q=x.call(this,h,a,c);g=A[4];A[4]=q;q=A[5];A[5]=t;p=l.buffer;l.buffer=k;r=l.divisor;l.divisor=0;u=l.normalized;l.normalized=!1;y=l.offset;l.offset=0;z=l.size;l.size=0;B=l.state;l.state=1;C=l.stride;
l.stride=0;E=l.type;l.type=k.dtype;D=l.w;l.w=0;F=l.x;l.x=0;G=l.y;l.y=0;H=l.z;l.z=0;K=W.vert;W.vert=2;L=W.frag;W.frag=1;b(h,a,c);d&&(J.cpuTime+=performance.now()-e);V.count=f;A[3]=n;A[4]=g;A[5]=q;l.buffer=p;l.divisor=r;l.normalized=u;l.offset=y;l.size=z;l.state=B;l.stride=C;l.type=E;l.w=D;l.x=F;l.y=G;l.z=H;W.vert=K;W.frag=L},batch:function(d,f){var g,l,q;g=C.next;g!==C.cur&&(g?e.bindFramebuffer(36160,g.framebuffer):e.bindFramebuffer(36160,null),C.cur=g);if(w.dirty){var m,t,x;g=a.dither;g!==w.dither&&
(g?e.enable(3024):e.disable(3024),w.dither=g);g=a.blend_enable;g!==w.blend_enable&&(g?e.enable(3042):e.disable(3042),w.blend_enable=g);g=db[0];m=db[1];t=db[2];x=db[3];if(g!==X[0]||m!==X[1]||t!==X[2]||x!==X[3])e.blendColor(g,m,t,x),X[0]=g,X[1]=m,X[2]=t,X[3]=x;g=ea[0];m=ea[1];if(g!==Q[0]||m!==Q[1])e.blendEquationSeparate(g,m),Q[0]=g,Q[1]=m;g=O[0];m=O[1];t=O[2];x=O[3];if(g!==z[0]||m!==z[1]||t!==z[2]||x!==z[3])e.blendFuncSeparate(g,m,t,x),z[0]=g,z[1]=m,z[2]=t,z[3]=x;g=a.depth_enable;g!==w.depth_enable&&
(g?e.enable(2929):e.disable(2929),w.depth_enable=g);g=a.depth_func;g!==w.depth_func&&(e.depthFunc(g),w.depth_func=g);g=K[0];m=K[1];if(g!==za[0]||m!==za[1])e.depthRange(g,m),za[0]=g,za[1]=m;g=a.depth_mask;g!==w.depth_mask&&(e.depthMask(g),w.depth_mask=g);g=p[0];m=p[1];t=p[2];x=p[3];if(g!==L[0]||m!==L[1]||t!==L[2]||x!==L[3])e.colorMask(g,m,t,x),L[0]=g,L[1]=m,L[2]=t,L[3]=x;g=a.cull_enable;g!==w.cull_enable&&(g?e.enable(2884):e.disable(2884),w.cull_enable=g);g=a.cull_face;g!==w.cull_face&&(e.cullFace(g),
w.cull_face=g);g=a.frontFace;g!==w.frontFace&&(e.frontFace(g),w.frontFace=g);g=a.lineWidth;g!==w.lineWidth&&(e.lineWidth(g),w.lineWidth=g);g=a.polygonOffset_enable;g!==w.polygonOffset_enable&&(g?e.enable(32823):e.disable(32823),w.polygonOffset_enable=g);g=na[0];m=na[1];if(g!==n[0]||m!==n[1])e.polygonOffset(g,m),n[0]=g,n[1]=m;g=a.sample_alpha;g!==w.sample_alpha&&(g?e.enable(32926):e.disable(32926),w.sample_alpha=g);g=a.sample_enable;g!==w.sample_enable&&(g?e.enable(32928):e.disable(32928),w.sample_enable=
g);g=F[0];m=F[1];if(g!==aa[0]||m!==aa[1])e.sampleCoverage(g,m),aa[0]=g,aa[1]=m;g=a.stencil_enable;g!==w.stencil_enable&&(g?e.enable(2960):e.disable(2960),w.stencil_enable=g);g=a.stencil_mask;g!==w.stencil_mask&&(e.stencilMask(g),w.stencil_mask=g);g=oa[0];m=oa[1];t=oa[2];if(g!==Ca[0]||m!==Ca[1]||t!==Ca[2])e.stencilFunc(g,m,t),Ca[0]=g,Ca[1]=m,Ca[2]=t;g=Ea[0];m=Ea[1];t=Ea[2];x=Ea[3];if(g!==ka[0]||m!==ka[1]||t!==ka[2]||x!==ka[3])e.stencilOpSeparate(g,m,t,x),ka[0]=g,ka[1]=m,ka[2]=t,ka[3]=x;g=xa[0];m=xa[1];
t=xa[2];x=xa[3];if(g!==fa[0]||m!==fa[1]||t!==fa[2]||x!==fa[3])e.stencilOpSeparate(g,m,t,x),fa[0]=g,fa[1]=m,fa[2]=t,fa[3]=x;g=a.scissor_enable;g!==w.scissor_enable&&(g?e.enable(3089):e.disable(3089),w.scissor_enable=g);g=M[0];m=M[1];t=M[2];x=M[3];if(g!==ma[0]||m!==ma[1]||t!==ma[2]||x!==ma[3])e.scissor(g,m,t,x),ma[0]=g,ma[1]=m,ma[2]=t,ma[3]=x;g=pa[0];m=pa[1];t=pa[2];x=pa[3];if(g!==Aa[0]||m!==Aa[1]||t!==Aa[2]||x!==Aa[3])e.viewport(g,m,t,x),Aa[0]=g,Aa[1]=m,Aa[2]=t,Aa[3]=x;w.dirty=!1}if(g=w.profile)l=
performance.now(),J.count+=f;e.useProgram(ca.program);ia.setVAO(null);m=b.location;t=Z[m];t.buffer||e.enableVertexAttribArray(m);if(t.type!==k.dtype||2!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||0!==t.stride)e.bindBuffer(34962,k.buffer),e.vertexAttribPointer(m,2,k.dtype,!1,0,0),t.type=k.dtype,t.size=2,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=0;m=u.call(this,h,void 0,q);R(m)&&2===m.length||ba.commandRaise(N,H);e.uniform2f(c.location,m[0],m[1]);q=y.call(this,h,void 0,q);"number"!==
typeof q&&ba.commandRaise(P,H);e.uniform1f(S.location,q);e.uniform1i(r.location,ga.bind());(m=V.elements)?e.bindBuffer(34963,m.buffer.buffer):ia.currentVAO&&(m=E.getElements(ia.currentVAO.elements))&&e.bindBuffer(34963,m.buffer.buffer);t=V.primitive;x=V.offset;for(q=0;q<f;++q)m?e.drawElements(t,3,m.type,x<<(m.type-5121>>1)):e.drawArrays(t,x,3);ga.unbind();ia.setVAO(null);g&&(J.cpuTime+=performance.now()-l)}}}}},{}],25:[function(W,ia,fb){var d=W("./sorted-object-keys");ia.exports=function(ba,H){for(var J=
d(H),g=0;g<J.length;++g)ba[J[g]]=H[J[g]];return ba}},{"./sorted-object-keys":34}],26:[function(W,ia,fb){function d(d,g,k,q,f,B){for(var D=0;D<g;++D)for(var G=d[D],H=0;H<k;++H)for(var x=G[H],t=0;t<q;++t)f[B++]=x[t]}function ba(H,g,k,q,f){for(var B=1,D=k+1;D<g.length;++D)B*=g[D];var G=g[k];if(4===g.length-k){var T=g[k+1],x=g[k+2];g=g[k+3];for(D=0;D<G;++D)d(H[D],T,x,g,q,f),f+=B}else for(D=0;D<G;++D)ba(H[D],g,k+1,q,f),f+=B}var H=W("./pool");ia.exports={shape:function(d){for(var g=[];d.length;d=d[0])g.push(d.length);
return g},flatten:function(J,g,k,q){var f=1;if(g.length)for(var B=0;B<g.length;++B)f*=g[B];else f=0;k=q||H.allocType(k,f);switch(g.length){case 0:break;case 1:q=g[0];for(g=0;g<q;++g)k[g]=J[g];break;case 2:q=g[0];g=g[1];for(B=f=0;B<q;++B)for(var D=J[B],G=0;G<g;++G)k[f++]=D[G];break;case 3:d(J,g[0],g[1],g[2],k,0);break;default:ba(J,g,0,k,0)}return k}}},{"./pool":32}],27:[function(W,ia,fb){var d=W("./is-typed-array");ia.exports=function(ba){return Array.isArray(ba)||d(ba)}},{"./is-typed-array":30}],
28:[function(W,ia,fb){var d=W("./is-typed-array");ia.exports=function(ba){return!!ba&&"object"===typeof ba&&Array.isArray(ba.shape)&&Array.isArray(ba.stride)&&"number"===typeof ba.offset&&ba.shape.length===ba.stride.length&&(Array.isArray(ba.data)||d(ba.data))}},{"./is-typed-array":30}],29:[function(W,ia,fb){ia.exports=function(d){return!(d&d-1)&&!!d}},{}],30:[function(W,ia,fb){ia.exports=function(d){return d instanceof Uint8Array||d instanceof Uint16Array||d instanceof Uint32Array||d instanceof Int8Array||
d instanceof Int16Array||d instanceof Int32Array||d instanceof Float32Array||d instanceof Float64Array||d instanceof Uint8ClampedArray}},{}],31:[function(W,ia,fb){ia.exports=function(d,ba){for(var H=Array(d),J=0;J<d;++J)H[J]=ba(J);return H}},{}],32:[function(W,ia,fb){function d(d){var g,k;g=(65535<d)<<4;d>>>=g;k=(255<d)<<3;d>>>=k;g|=k;k=(15<d)<<2;d>>>=k;g|=k;k=(3<d)<<1;return g|k|d>>>k>>1}function ba(){function J(g){a:{for(var f=16;268435456>=f;f*=16)if(g<=f){g=f;break a}g=0}f=k[d(g)>>2];return 0<
f.length?f.pop():new ArrayBuffer(g)}function g(g){k[d(g.byteLength)>>2].push(g)}var k=H(8,function(){return[]});return{alloc:J,free:g,allocType:function(d,f){var g=null;switch(d){case 5120:g=new Int8Array(J(f),0,f);break;case 5121:g=new Uint8Array(J(f),0,f);break;case 5122:g=new Int16Array(J(2*f),0,f);break;case 5123:g=new Uint16Array(J(2*f),0,f);break;case 5124:g=new Int32Array(J(4*f),0,f);break;case 5125:g=new Uint32Array(J(4*f),0,f);break;case 5126:g=new Float32Array(J(4*f),0,f);break;default:return null}return g.length!==
f?g.subarray(0,f):g},freeType:function(d){g(d.buffer)}}}var H=W("./loop");W=ba();W.zero=ba();ia.exports=W},{"./loop":31}],33:[function(W,ia,fb){ia.exports={next:"function"===typeof requestAnimationFrame?function(d){return requestAnimationFrame(d)}:function(d){return setTimeout(d,16)},cancel:"function"===typeof cancelAnimationFrame?function(d){return cancelAnimationFrame(d)}:clearTimeout}},{}],34:[function(W,ia,fb){ia.exports=function(d){return Object.keys(d).sort()}},{}],35:[function(W,ia,fb){var d=
W("./pool"),ba=new Float32Array(1),H=new Uint32Array(ba.buffer);ia.exports=function(J){for(var g=d.allocType(5123,J.length),k=0;k<J.length;++k)if(isNaN(J[k]))g[k]=65535;else if(Infinity===J[k])g[k]=31744;else if(-Infinity===J[k])g[k]=64512;else{ba[0]=J[k];var q=H[0],f=q>>>31<<15,B=(q<<1>>>24)-127,q=q>>13&1023;g[k]=-24>B?f:-14>B?f+(q+1024>>-14-B):15<B?f+31744:f+(B+15<<10)+q}return g}},{"./pool":32}],36:[function(W,ia,fb){var d=W("./sorted-object-keys");ia.exports=function(ba){return d(ba).map(function(d){return ba[d]})}},
{"./sorted-object-keys":34}],37:[function(W,ia,fb){function d(d,f,g){function D(){var f=window.innerWidth,k=window.innerHeight;d!==document.body&&(k=G.getBoundingClientRect(),f=k.right-k.left,k=k.bottom-k.top);G.width=g*f;G.height=g*k}var G=document.createElement("canvas");k(G.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});d.appendChild(G);d===document.body&&(G.style.position="absolute",k(d.style,{margin:0,padding:0}));var H;d!==document.body&&"function"===typeof ResizeObserver?
(H=new ResizeObserver(function(){setTimeout(D)}),H.observe(d)):window.addEventListener("resize",D,!1);D();return{canvas:G,onDestroy:function(){H?H.disconnect():window.removeEventListener("resize",D);d.removeChild(G)}}}function ba(d,f){function g(k){try{return d.getContext(k,f)}catch(B){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}function H(d){if("string"===typeof d)return d.split();g(Array.isArray(d),"invalid extension array");return d}function J(d){return"string"===
typeof d?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(d)):d}var g=W("./util/check"),k=W("./util/extend");ia.exports=function(k){var f=k||{},B,D,G,T;k={};var x=[],t=[],l="undefined"===typeof window?1:window.devicePixelRatio,ca=!1,u=function(d){d&&g.raise(d)},N=function(){};"string"===typeof f?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),B=document.querySelector(f),g(B,"invalid query string for element")):"object"===
typeof f?"string"===typeof f.nodeName&&"function"===typeof f.appendChild&&"function"===typeof f.getBoundingClientRect?B=f:"function"===typeof f.drawArrays||"function"===typeof f.drawElements?(T=f,G=T.canvas):(g.constructor(f),"gl"in f?T=f.gl:"canvas"in f?G=J(f.canvas):"container"in f&&(D=J(f.container)),"attributes"in f&&(k=f.attributes,g.type(k,"object","invalid context attributes")),"extensions"in f&&(x=H(f.extensions)),"optionalExtensions"in f&&(t=H(f.optionalExtensions)),"onDone"in f&&(g.type(f.onDone,
"function","invalid or missing onDone callback"),u=f.onDone),"profile"in f&&(ca=!!f.profile),"pixelRatio"in f&&(l=+f.pixelRatio,g(0<l,"invalid pixel ratio"))):g.raise("invalid arguments to regl");B&&("canvas"===B.nodeName.toLowerCase()?G=B:D=B);if(!T){if(!G){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");B=d(D||document.body,u,l);if(!B)return null;G=B.canvas;N=B.onDestroy}void 0===k.premultipliedAlpha&&(k.premultipliedAlpha=!0);T=ba(G,k)}return T?
{gl:T,canvas:G,container:D,extensions:x,optionalExtensions:t,pixelRatio:l,profile:ca,onDone:u,onDestroy:N}:(N(),u("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(W,ia,fb){function d(d){throw Error("resl: "+d);}function ba(g,f,k){Object.keys(g).forEach(function(g){0>f.indexOf(g)&&d('invalid parameter "'+g+'" in '+k)})}function H(d,f){this.state=0;this.ready=!1;this.progress=0;this.name=d;this.cancel=
f}var J=["manifest","onDone","onProgress","onError"],g=["type","src","stream","credentials","parser"],k=["onData","onDone"];ia.exports=function(q){function f(f,c){if(f in q){var b=q[f];"function"!==typeof b&&d('invalid callback "'+f+'"');return b}return null}function B(d){function c(){if(!(2>h.readyState||1===q.state||-1===q.state)){if(200!==h.status)return G('error loading resource "'+d.name+'"');if(2<h.readyState&&0===q.state){var c;c="binary"===d.type?h.response:h.responseText;if(k.data)try{l=
k.data(c)}catch(f){return G(f)}else l=c}if(3<h.readyState&&0===q.state){if(k.done)try{l=k.done()}catch(f){return G(f)}q.state=1}u[b]=l;q.progress=.75*q.progress+.25;q.ready=d.stream&&!!l||1===q.state;T()}}var b=d.name,f=d.stream,g="binary"===d.type,k=d.parser,h=new XMLHttpRequest,l=null,q=new H(b,function(){1!==q.state&&-1!==q.state&&(h.onreadystatechange=null,h.abort(),q.state=-1)});h.onreadystatechange=f?c:function(){4===h.readyState&&c()};g&&(h.responseType="arraybuffer");d.credentials&&(h.withCredentials=
!0);h.open("GET",d.src,!0);h.send();return q}function D(d,c){function b(){if(0===t.state)if(q.data)try{x=q.data(c)}catch(a){return G(a)}else x=c}function f(a){b();u[l]=x;t.progress=a.lengthComputable?Math.max(t.progress,a.loaded/a.total):.75*t.progress+.25;T(l)}function g(){b();if(0===t.state){if(q.done)try{x=q.done()}catch(a){return G(a)}t.state=1}t.progress=1;t.ready=!0;u[l]=x;h();T("finish "+l)}function k(){G('error loading asset "'+l+'"')}function h(){d.stream&&c.removeEventListener("progress",
f);"image"===d.type?c.addEventListener("load",g):c.addEventListener("canplay",g);c.removeEventListener("error",k)}var l=d.name,q=d.parser,t=new H(l,function(){1!==t.state&&-1!==t.state&&(t.state=-1,h(),c.src="")}),x=c;d.stream&&c.addEventListener("progress",f);if("image"===d.type)c.addEventListener("load",g);else{var e=!1,y=!1;c.addEventListener("loadedmetadata",function(){y=!0;e&&g()});c.addEventListener("canplay",function(){e=!0;y&&g()})}c.addEventListener("error",k);c.crossOrigin=d.credentials?
"use-credentials":"anonymous";c.src=d.src;return t}function G(d){-1!==N&&1!==N&&(N=-1,P.forEach(function(c){c.cancel()}),ca?"string"===typeof d?ca(Error("resl: "+d)):ca(d):console.error("resl error:",d))}function T(d){if(-1!==N&&1!==N){var c=0,b=0;P.forEach(function(d){d.ready&&(b+=1);c+=d.progress});b===P.length?(N=1,t(u)):l&&l(c/P.length,d)}}"object"===typeof q&&q||d("invalid or missing configuration");ba(q,J,"config");var x=q.manifest;"object"===typeof x&&x||d("missing manifest");var t=f("onDone");
t||d("missing onDone() callback");var l=f("onProgress"),ca=f("onError"),u={},N=0,y={text:B,binary:function(d){return B(d)},image:function(d){return D(d,document.createElement("img"))},video:function(d){return D(d,document.createElement("video"))},audio:function(d){return D(d,document.createElement("audio"))}},P=Object.keys(x).map(function(f){function c(c,f){if(c in b.parser){var g=b.parser[c];"function"!==typeof g&&d("invalid parser callback "+c+' for asset "'+c+'"');return g}return f}var b=x[f];
"string"===typeof b?b={src:b}:"object"===typeof b&&b||d('invalid asset definition "'+f+'"');ba(b,g,'asset "'+f+'"');var l={};"parser"in b&&("function"===typeof b.parser?l={data:b.parser}:"object"===typeof b.parser&&b.parser?(ba(l,k,'parser for asset "'+f+'"'),"onData"in l||d('missing onData callback for parser in asset "'+f+'"'),l={data:c("onData"),done:c("onDone")}):d('invalid parser for asset "'+f+'"'));return{name:f,type:function(c,g,h){c in b&&(h=b[c]);0>g.indexOf(h)&&d("invalid "+c+' "'+h+'" for asset "'+
f+'", possible values: '+g);return h}("type",Object.keys(y),"text"),stream:!!b.stream,credentials:!!b.credentials,src:function(c,g,h){c in b?h=b[c]:g&&d("missing "+c+' for asset "'+f+'"');"string"!==typeof h&&d("invalid "+c+' for asset "'+f+'", must be a string');return h}("src",!0,""),parser:l}}).map(function(d){return y[d.type](d)});0===P.length&&setTimeout(function(){T("done")},1)}},{}],39:[function(W,ia,fb){function d(c,b){for(var d=0;d<c.length;++d)if(c[d]===b)return d;return-1}var ba=W("./lib/util/check"),
H=W("./lib/util/extend"),J=W("./lib/dynamic"),g=W("./lib/util/raf"),k=W("./lib/util/clock"),q=W("./lib/strings"),f=W("./lib/webgl"),B=W("./lib/extension"),D=W("./lib/limits"),G=W("./lib/buffer"),T=W("./lib/elements"),x=W("./lib/texture"),t=W("./lib/renderbuffer"),l=W("./lib/framebuffer"),ca=W("./lib/attribute"),u=W("./lib/shader"),N=W("./lib/read"),y=W("./lib/core"),P=W("./lib/stats"),ga=W("./lib/timer");ia.exports=function(c){function b(){if(0===Ea.length)O&&O.update(),Ba=null;else{Ba=g.next(b);
e();for(var a=Ea.length-1;0<=a;--a){var c=Ea[a];c&&c(K,null,0)}W.flush();O&&O.update()}}function S(){!Ba&&0<Ea.length&&(Ba=g.next(b))}function r(){Ba&&(g.cancel(b),Ba=null)}function Z(a){a.preventDefault();ia=!0;r();ka.forEach(function(a){a()})}function h(a){W.getError();ia=!1;db.restore();aa.restore();na.restore();M.restore();ma.restore();oa.restore();F.restore();O&&O.restore();Ca.procs.refresh();S();pa.forEach(function(a){a()})}function w(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=
a[b];if(J.isDynamic(f))e[b]=J.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(J.isDynamic(f[g])){e[b]=J.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}ba(!!a,"invalid args to regl({...})");ba.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+
b]=d[b]})}}var c=H({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Ca.compile(a,f,e,d,g),k=h.draw,l=h.batch,n=h.scope,p=[];return H(function(a,b){var d;ia&&ba.raise("context lost");if("function"===typeof a)return n.call(this,
null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function V(a,b){var c=0;Ca.procs.poll();var d=b.color;d&&(W.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,
+d[3]||0),c|=16384);"depth"in b&&(W.clearDepth(+b.depth),c|=256);"stencil"in b&&(W.clearStencil(b.stencil|0),c|=1024);ba(!!c,"called regl.clear with no buffer specified");W.clear(c)}function E(a){ba.type(a,"function","regl.frame() callback must be a function");Ea.push(a);S();return{cancel:function(){function b(){var a=d(Ea,b);Ea[a]=Ea[Ea.length-1];--Ea.length;0>=Ea.length&&r()}var c=d(Ea,a);ba(0<=c,"cannot cancel a frame twice");Ea[c]=b}}}function C(){var a=xa.viewport,b=xa.scissor_box;a[0]=a[1]=
b[0]=b[1]=0;K.viewportWidth=K.framebufferWidth=K.drawingBufferWidth=a[2]=b[2]=W.drawingBufferWidth;K.viewportHeight=K.framebufferHeight=K.drawingBufferHeight=a[3]=b[3]=W.drawingBufferHeight}function e(){K.tick+=1;K.time=a();C();Ca.procs.poll()}function R(){M.refresh();C();Ca.procs.refresh();O&&O.update()}function a(){return(k()-z)/1E3}console.log("REGL args are:",c);c=f(c);console.log("REGL configs are:",c);if(!c)return null;var W=c.gl,A=W.getContextAttributes(),ia=W.isContextLost(),db=B(W,c);if(!db)return null;
var X=q(),ea=P(),Q=db.extensions,O=ga(W,Q),z=k(),p=W.drawingBufferWidth,L=W.drawingBufferHeight,K={tick:0,time:0,viewportWidth:p,viewportHeight:L,framebufferWidth:p,framebufferHeight:L,drawingBufferWidth:p,drawingBufferHeight:L,pixelRatio:c.pixelRatio},p={elements:null,primitive:4,count:-1,offset:0,instances:-1},za=D(W,Q),na=G(W,ea,c,function(a){return F.destroyBuffer(a)}),n=T(W,Q,na,ea),F=ca(W,Q,za,ea,na,n,p),aa=u(W,X,ea,c),M=x(W,Q,za,function(){Ca.procs.poll()},K,ea,c),ma=t(W,Q,za,ea,c),oa=l(W,
Q,za,M,ma,ea),Ca=y(W,X,Q,za,na,n,M,oa,{},F,aa,p,K,O,c),X=N(W,oa,Ca.procs.poll,K,A,Q,za),xa=Ca.next,fa=W.canvas,Ea=[],ka=[],pa=[],Aa=[c.onDestroy],Ba=null;fa&&(fa.addEventListener("webglcontextlost",Z,!1),fa.addEventListener("webglcontextrestored",h,!1));var ja=oa.setFBO=w({framebuffer:J.define.call(null,1,"framebuffer")});R();A=H(w,{clear:function(a){ba("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=
0;6>b;++b)ja(H({framebuffer:a.framebuffer.faces[b]},a),V);else ja(a,V);else V(null,a)},prop:J.define.bind(null,1),context:J.define.bind(null,2),"this":J.define.bind(null,3),draw:w({}),buffer:function(a){return na.create(a,34962,!1,!1)},elements:function(a){return n.create(a,!1)},texture:M.create2D,cube:M.createCube,renderbuffer:ma.create,framebuffer:oa.create,framebufferCube:oa.createCube,vao:F.createVAO,attributes:A,frame:E,on:function(a,b){ba.type(b,"function","listener callback must be a function");
var c;switch(a){case "frame":return E(b);case "lost":c=ka;break;case "restore":c=pa;break;case "destroy":c=Aa;break;default:ba.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:za,hasExtension:function(a){return 0<=za.extensions.indexOf(a.toLowerCase())},read:X,destroy:function(){Ea.length=0;r();fa&&(fa.removeEventListener("webglcontextlost",Z),fa.removeEventListener("webglcontextrestored",
h));aa.clear();oa.clear();ma.clear();F.clear();M.clear();n.clear();na.clear();O&&O.clear();Aa.forEach(function(a){a()})},_gl:W,_refresh:R,poll:function(){e();O&&O.update()},now:a,stats:ea});c.onDone(null,A);return A}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,
"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

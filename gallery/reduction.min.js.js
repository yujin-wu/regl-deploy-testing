(function(){function I(ia,Pa,a){function ma(m,e){if(!Pa[m]){if(!ia[m]){var d="function"==typeof require&&require;if(!e&&d)return d(m,!0);if(D)return D(m,!0);d=Error("Cannot find module '"+m+"'");throw d.code="MODULE_NOT_FOUND",d;}d=Pa[m]={exports:{}};ia[m][0].call(d.exports,function(b){return ma(ia[m][1][b]||b)},d,d.exports,I,ia,Pa,a)}return Pa[m].exports}for(var D="function"==typeof require&&require,K=0;K<a.length;K++)ma(a[K]);return ma}return I})()({1:[function(I,ia,Pa){function a(d,b){for(var e=
b(d[0],d[1]),m=2;m<d.length;m++)e=b(e,d[m]);return e}function ma(d,b){var e=m({frag:"\n    precision mediump float;\n    uniform sampler2D tex;\n    varying vec2 uv;\n    uniform float rcpDim;\n\n    float op(float a, float b) {\n      return "+b+";\n    }\n\n    void main () {\n      float a = texture2D(tex, uv - vec2(0.0, 0.0) * rcpDim).x;\n      float b = texture2D(tex, uv - vec2(1.0, 0.0) * rcpDim).x;\n      float c = texture2D(tex, uv - vec2(0.0, 1.0) * rcpDim).x;\n      float d = texture2D(tex, uv - vec2(1.0, 1.0) * rcpDim).x;\n\n      float result = op(op(a, b), op(c, d));\n      gl_FragColor = vec4(result);\n    }",
vert:"\n    precision mediump float;\n    attribute vec2 position;\n    varying vec2 uv;\n    void main () {\n      uv = position;\n      gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n    }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{tex:m.prop("inTex"),rcpDim:m.prop("rcpDim")},framebuffer:m.prop("outFbo"),count:3}),y=[],p;for(p=0;p<d.length;p++){var h=d[p];y.push(h,h,h,h)}var h=Math.sqrt(d.length),a=m.texture({width:h,height:h,data:y,format:"rgba",type:"uint8",mag:"nearest",min:"nearest"}),
w=[];do h>>=1,w.push(m.framebuffer({colorFormat:"rgba",colorType:"uint8",width:h,height:h}));while(1<h);return function(){e({inTex:a,outFbo:w[0],rcpDim:1/(2*w[0].width)});for(p=0;p<w.length-1;p++){var b=w[p+1];e({inTex:w[p+0].color[0],outFbo:b,rcpDim:1/(2*b.width)})}var d;m({framebuffer:w[w.length-1]})(function(){d=m.read()[0]});return d}}function D(d,b){var e=document.createElement(d);e.innerHTML=b;var m=document.createElement("div");m.style.cssText="margin: 0 auto; max-width: 760px;";m.style.fontSize=
"30px";m.style.fontFamily="verdana";m.style.color="#444444";m.appendChild(e);document.body.appendChild(m);return e}function K(d){function b(){0===y%50&&("....."===m.innerHTML.slice(-5)?m.innerHTML=m.innerHTML.substring(0,m.innerHTML.length-5):m.innerHTML+=".");var N=d?function(){return h()}:function(){return a(e,function(b,d){return Math.max(b,d)})},w=performance.now();N();N=performance.now();p+=N-w;y++;1E3>y?setTimeout(b,0):(m.innerHTML="Average time of reduction on the "+(d?"GPU":"CPU")+": "+Math.round(p/
1E3*100)/100+"ms",d&&K(!1))}var m=D("p","Running reduction on "+(d?"GPU":"CPU")),y=0,p=0,h=ma(e,"max(a,b)");setTimeout(b,0)}ia=document.body.appendChild(document.createElement("canvas"));ia.width=1;ia.height=1;var m=I("../regl")(ia);I=I("seedrandom")("seed");var e=[];for(ia=0;1048576>ia;ia++)e.push(Math.floor(255*I()));D("h3","Doing reduction on 1,000,000 items:");K(!0)},{"../regl":47,seedrandom:39}],2:[function(I,ia,Pa){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=
0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var ma=I("./util/sorted-object-keys"),D=I("./util/check"),K=I("./util/values"),m=I("./constants/dtypes.json"),e=I("./util/is-typed-array"),d=I("./util/is-ndarray"),b=I("./constants/primitives.json"),t="attributes elements offset count primitive instances".split(" ");ia.exports=function(y,p,h,N,w,J,aa){function x(b){if(b!==V.currentVAO){var d=p.oes_vertex_array_object;b?d.bindVertexArrayOES(b.vao):d.bindVertexArrayOES(null);
V.currentVAO=b}}function S(b){if(b!==V.currentVAO){if(b)b.bindAttrs();else{for(var d=p.angle_instanced_arrays,e=0;e<f.length;++e){var k=f[e];k.buffer?(y.enableVertexAttribArray(e),k.buffer.bind(),y.vertexAttribPointer(e,k.size,k.type,k.normalized,k.stride,k.offfset),d&&k.divisor&&d.vertexAttribDivisorANGLE(e,k.divisor)):(y.disableVertexAttribArray(e),y.vertexAttrib4f(e,k.x,k.y,k.z,k.w))}aa.elements?y.bindBuffer(34963,aa.elements.buffer.buffer):y.bindBuffer(34963,null)}V.currentVAO=b}}function r(){K(z).forEach(function(b){b.destroy()})}
function L(){this.id=++U;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=p.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;z[this.id]=this;this.buffers=[]}function ha(){p.oes_vertex_array_object&&K(z).forEach(function(b){b.refresh()})}var k=h.maxAttributes,f=Array(k);for(h=0;h<k;++h)f[h]=new a;var U=0,z={},V={Record:a,scope:{},state:f,currentVAO:null,targetVAO:null,restore:p.oes_vertex_array_object?ha:function(){},
createVAO:function(B){function l(B){var z;if(Array.isArray(B))z=B,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{D("object"===typeof B,"invalid arguments for create vao");D("attributes"in B,"must specify attributes for vao");if(B.elements){var c=B.elements;f.ownsElements?("function"===typeof c&&"elements"===c._reglType?f.elements.destroy():f.elements(c),f.ownsElements=!1):J.getElements(B.elements)?(f.elements=
B.elements,f.ownsElements=!1):(f.elements=J.create(B.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;z=B.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in B&&(f.offset=B.offset|0);"count"in B&&(f.count=B.count|0);"instances"in B&&(f.instances=B.instances|0);"primitive"in B&&(D(B.primitive in b,"bad primitive type: "+B.primitive),f.primitive=b[B.primitive]);D.optional(function(){for(var g=
ma(B),b=0;b<g.length;++b)D(0<=t.indexOf(g[b]),'invalid option for vao: "'+g[b]+'" valid options are '+t)});D(Array.isArray(z),"attributes must be an array")}D(z.length<k,"too many attributes");D(0<z.length,"must specify at least one attribute");var c={},M=f.attributes;M.length=z.length;for(var g=0;g<z.length;++g){var r=z[g],A=M[g]=new a,U=r.data||r;if(Array.isArray(U)||e(U)||d(U)){var h;f.buffers[g]&&(h=f.buffers[g],e(U)&&h._buffer.byteLength>=U.byteLength?h.subdata(U):(h.destroy(),f.buffers[g]=null));
f.buffers[g]||(h=f.buffers[g]=w.create(r,34962,!1,!0));A.buffer=w.getBuffer(h);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;c[g]=1}else w.getBuffer(r)?(A.buffer=w.getBuffer(r),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=0,A.stride=0,A.divisor=0,A.state=1):w.getBuffer(r.buffer)?(A.buffer=w.getBuffer(r.buffer),A.size=(+r.size||A.buffer.dimension)|0,A.normalized=!!r.normalized||!1,"type"in r?(D.parameter(r.type,
m,"invalid buffer type"),A.type=m[r.type]):A.type=A.buffer.dtype,A.offset=(r.offset||0)|0,A.stride=(r.stride||0)|0,A.divisor=(r.divisor||0)|0,A.state=1,D(1<=A.size&&4>=A.size,"size must be between 1 and 4"),D(0<=A.offset,"invalid offset"),D(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),D(0<=A.divisor,"divisor must be positive"),D(!A.divisor||!!p.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in r?(D(0<g,"first attribute must not be a constant"),
A.x=+r.x||0,A.y=+r.y||0,A.z=+r.z||0,A.w=+r.w||0,A.state=2):D(!1,"invalid attribute spec for location "+g)}for(h=0;h<f.buffers.length;++h)!c[h]&&f.buffers[h]&&(f.buffers[h].destroy(),f.buffers[h]=null);f.refresh();return l}var f=new L;N.vaoCount+=1;l.destroy=function(){for(var b=0;b<f.buffers.length;++b)f.buffers[b]&&f.buffers[b].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};l._vao=f;l._reglType="vao";return l(B)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var d=0;d<f.length;++d){var e=f[d];e.buffer===b&&(y.disableVertexAttribArray(d),e.buffer=null)}},setVAO:p.oes_vertex_array_object?x:S,clear:p.oes_vertex_array_object?r:function(){}};L.prototype.bindAttrs=function(){for(var b=p.angle_instanced_arrays,d=this.attributes,e=0;e<d.length;++e){var f=d[e];f.buffer?(y.enableVertexAttribArray(e),y.bindBuffer(34962,f.buffer.buffer),y.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offset),
b&&f.divisor&&b.vertexAttribDivisorANGLE(e,f.divisor)):(y.disableVertexAttribArray(e),y.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}for(b=d.length;b<k;++b)y.disableVertexAttribArray(b);(b=J.getElements(this.elements))?y.bindBuffer(34963,b.buffer.buffer):y.bindBuffer(34963,null)};L.prototype.refresh=function(){var b=p.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),V.currentVAO=null,b.bindVertexArrayOES(null))};L.prototype.destroy=function(){if(this.vao){var b=p.oes_vertex_array_object;
this===V.currentVAO&&(V.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);z[this.id]&&(delete z[this.id],--N.vaoCount)};return V}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(I,ia,Pa){function a(b){return h[Object.prototype.toString.call(b)]|
0}function ma(b,d){for(var e=0;e<d.length;++e)b[e]=d[e]}function D(b,d,e,m,h,t,k){for(var f=0,U=0;U<e;++U)for(var z=0;z<m;++z)b[f++]=d[h*U+t*z+k]}var K=I("./util/sorted-object-keys"),m=I("./util/check"),e=I("./util/is-typed-array"),d=I("./util/is-ndarray"),b=I("./util/values"),t=I("./util/pool");Pa=I("./util/flatten");var y=Pa.flatten,p=Pa.shape,h=I("./constants/arraytypes.json"),N=I("./constants/dtypes.json"),w=I("./constants/usage.json"),J=[];J[5120]=1;J[5122]=2;J[5124]=4;J[5121]=1;J[5123]=2;J[5125]=
4;J[5126]=4;ia.exports=function(h,x,S,r){function L(b){this.id=U++;this.buffer=h.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;S.profile&&(this.stats={size:0})}function ha(b,d,e){b.byteLength=d.byteLength;h.bufferData(b.type,d,e)}function k(b,k,f,z,r,c){b.usage=f;if(Array.isArray(k)){if(b.dtype=z||5126,0<k.length)if(Array.isArray(k[0])){r=p(k);for(var M=z=1;M<r.length;++M)z*=r[M];b.dimension=z;k=y(k,r,b.dtype);ha(b,k,f);c?b.persistentData=
k:t.freeType(k)}else"number"===typeof k[0]?(b.dimension=r,r=t.allocType(b.dtype,k.length),ma(r,k),ha(b,r,f),c?b.persistentData=r:t.freeType(r)):e(k[0])?(b.dimension=k[0].length,b.dtype=z||a(k[0])||5126,k=y(k,[k.length,k[0].length],b.dtype),ha(b,k,f),c?b.persistentData=k:t.freeType(k)):m.raise("invalid buffer data")}else if(e(k))b.dtype=z||a(k),b.dimension=r,ha(b,k,f),c&&(b.persistentData=new Uint8Array(new Uint8Array(k.buffer)));else if(d(k)){r=k.shape;var g=k.stride,M=k.offset,h=0,A=0,U=0,x=0;1===
r.length?(h=r[0],A=1,U=g[0],x=0):2===r.length?(h=r[0],A=r[1],U=g[0],x=g[1]):m.raise("invalid shape");b.dtype=z||a(k.data)||5126;b.dimension=A;r=t.allocType(b.dtype,h*A);D(r,k.data,h,A,U,x,M);ha(b,r,f);c?b.persistentData=r:t.freeType(r)}else k instanceof ArrayBuffer?(b.dtype=5121,b.dimension=r,ha(b,k,f),c&&(b.persistentData=new Uint8Array(new Uint8Array(k)))):m.raise("invalid buffer data")}function f(b){x.bufferCount--;r(b);var d=b.buffer;m(d,"buffer must not be deleted already");h.deleteBuffer(d);
b.buffer=null;delete z[b.id]}var U=0,z={};L.prototype.bind=function(){h.bindBuffer(this.type,this.buffer)};L.prototype.destroy=function(){f(this)};var V=[];S.profile&&(x.getTotalBufferSize=function(){var b=0;K(z).forEach(function(d){b+=z[d].stats.size});return b});return{create:function(b,l,r,U){function C(b){var c=35044,f=null,l=0,B=0,r=1;Array.isArray(b)||e(b)||d(b)||b instanceof ArrayBuffer?f=b:"number"===typeof b?l=b|0:b&&(m.type(b,"object","buffer arguments must be an object, a number or an array"),
"data"in b&&(m(null===f||Array.isArray(f)||e(f)||d(f),"invalid data for buffer"),f=b.data),"usage"in b&&(m.parameter(b.usage,w,"invalid buffer usage"),c=w[b.usage]),"type"in b&&(m.parameter(b.type,N,"invalid buffer type"),B=N[b.type]),"dimension"in b&&(m.type(b.dimension,"number","invalid dimension"),r=b.dimension|0),"length"in b&&(m.nni(l,"buffer length must be a nonnegative integer"),l=b.length|0));M.bind();f?k(M,f,c,B,r,U):(l&&h.bufferData(M.type,l,c),M.dtype=B||5121,M.usage=c,M.dimension=r,M.byteLength=
l);S.profile&&(M.stats.size=M.byteLength*J[M.dtype]);return C}function c(b,c){m(c+b.byteLength<=M.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+c+" to a buffer of size "+M.byteLength);h.bufferSubData(M.type,c,b)}x.bufferCount++;var M=new L(l);z[M.id]=M;r||C(b);C._reglType="buffer";C._buffer=M;C.subdata=function(b,k){var f=(k||0)|0,l;M.bind();if(e(b)||b instanceof ArrayBuffer)c(b,f);else if(Array.isArray(b)){if(0<b.length)if("number"===
typeof b[0]){var B=t.allocType(M.dtype,b.length);ma(B,b);c(B,f);t.freeType(B)}else Array.isArray(b[0])||e(b[0])?(l=p(b),B=y(b,l,M.dtype),c(B,f),t.freeType(B)):m.raise("invalid buffer data")}else if(d(b)){l=b.shape;var r=b.stride,z=B=0,T=0,Q=0;1===l.length?(B=l[0],z=1,T=r[0],Q=0):2===l.length?(B=l[0],z=l[1],T=r[0],Q=r[1]):m.raise("invalid shape");l=Array.isArray(b.data)?M.dtype:a(b.data);l=t.allocType(l,B*z);D(l,b.data,B,z,T,Q,b.offset);c(l,f);t.freeType(l)}else m.raise("invalid data for buffer subdata");
return C};S.profile&&(C.stats=M.stats);C.destroy=function(){f(M)};return C},createStream:function(b,d){var e=V.pop();e||(e=new L(b));e.bind();k(e,d,35040,0,1,!1);return e},destroyStream:function(b){V.push(b)},clear:function(){b(z).forEach(f);V.forEach(f)},getBuffer:function(b){return b&&b._buffer instanceof L?b._buffer:null},restore:function(){b(z).forEach(function(b){b.buffer=h.createBuffer();h.bindBuffer(b.type,b.buffer);h.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:k}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(I,ia,Pa){ia.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(I,ia,Pa){ia.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(I,ia,Pa){ia.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(I,ia,Pa){ia.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(I,ia,Pa){function a(b){return Array.isArray(b)||h(b)||
N(b)}function ma(b){return b.sort(function(b,d){return"viewport"===b?-1:"viewport"===d?1:b<d?-1:1})}function D(b,d,e,k){this.thisDep=b;this.contextDep=d;this.propDep=e;this.append=k}function K(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function m(b){return new D(!1,!1,!1,b)}function e(b,d){var e=b.type;if(0===e)return e=b.data.length,new D(!0,1<=e,2<=e,d);if(4===e)return e=b.data,new D(e.thisDep,e.contextDep,e.propDep,d);if(5===e)return new D(!1,!1,!1,d);if(6===e){for(var k=e=!1,f=!1,c=0;c<
b.data.length;++c){var M=b.data[c];1===M.type?f=!0:2===M.type?k=!0:3===M.type?e=!0:0===M.type?(e=!0,M=M.data,1<=M&&(k=!0),2<=M&&(f=!0)):4===M.type&&(e=e||M.data.thisDep,k=k||M.data.contextDep,f=f||M.data.propDep)}return new D(e,k,f,d)}return new D(3===e,2===e,1===e,d)}var d=I("./util/sorted-object-keys"),b=I("./util/check"),t=I("./util/extend"),y=I("./util/codegen"),p=I("./util/loop"),h=I("./util/is-typed-array"),N=I("./util/is-ndarray"),w=I("./util/is-array-like"),J=I("./dynamic"),aa=I("./constants/primitives.json"),
x=I("./constants/dtypes.json"),S=["x","y","z","w"],r="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),L={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
ha="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),k={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,
always:519},f={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},U={frag:35632,vert:35633},z={cw:2304,ccw:2305},V=new D(!1,!1,!1,function(){});ia.exports=function(B,l,h,N,C,c,M,g,ka,A,na,za,X,da,T){function Q(b){return b.replace(".","_")}function F(b,c,g){var d=Q(b);va.push(b);Y[d]=ga[d]=!!g;Ya[d]=c}function q(b,c,g){var d=Q(b);va.push(b);Array.isArray(g)?(ga[d]=g.slice(),Y[d]=g.slice()):ga[d]=Y[d]=g;Ga[d]=c}function O(){var c=
y(),g=c.link,e=c.global;c.id=wd++;c.batchId="0";var k=g(ob),q=c.shared={props:"a0"};d(ob).forEach(function(b){q[b]=e.def(k,".",b)});b.optional(function(){c.CHECK=g(b);c.commandStr=b.guessCommand();c.command=g(c.commandStr);c.assert=function(b,c,d){b("if(!(",c,"))",this.CHECK,".commandRaise(",g(d),",",this.command,");")};ba.invalidBlendCombinations=ha});var v=c.next={},u=c.current={};d(Ga).forEach(function(b){Array.isArray(ga[b])&&(v[b]=e.def(q.next,".",b),u[b]=e.def(q.current,".",b))});var n=c.constants=
{};d(ba).forEach(function(b){n[b]=e.def(JSON.stringify(ba[b]))});c.invoke=function(b,d){switch(d.type){case 0:var e=["this",q.context,q.props,c.batchId];return b.def(g(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(q.props,d.data);case 2:return b.def(q.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(c,b),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(g){return c.invoke(b,g)})}};c.attribCache={};var f={};
c.scopeAttrib=function(b){b=l.id(b);if(b in f)return f[b];var c=A.scope[b];c||(c=A.scope[b]=new ta);return f[b]=g(c)};return c}function P(b){var c=b["static"];b=b.dynamic;var g;if("profile"in c){var d=!!c.profile;g=m(function(b,c){return d});g.enable=d}else if("profile"in b){var k=b.profile;g=e(k,function(b,c){return b.invoke(c,k)})}return g}function qa(c,d){var k=c["static"],q=c.dynamic;if("framebuffer"in k){var v=k.framebuffer;return v?(v=g.getFramebuffer(v),b.command(v,"invalid framebuffer object"),
m(function(b,c){var g=b.link(v),d=b.shared;c.set(d.framebuffer,".next",g);d=d.context;c.set(d,".framebufferWidth",g+".width");c.set(d,".framebufferHeight",g+".height");return g})):m(function(b,c){var g=b.shared;c.set(g.framebuffer,".next","null");g=g.context;c.set(g,".framebufferWidth",g+".drawingBufferWidth");c.set(g,".framebufferHeight",g+".drawingBufferHeight");return"null"})}if("framebuffer"in q){var u=q.framebuffer;return e(u,function(c,g){var d=c.invoke(g,u),e=c.shared,k=e.framebuffer,q=g.def(k,
".getFramebuffer(",d,")");b.optional(function(){c.assert(g,"!"+d+"||"+q,"invalid framebuffer object")});g.set(k,".next",q);e=e.context;g.set(e,".framebufferWidth",q+"?"+q+".width:"+e+".drawingBufferWidth");g.set(e,".framebufferHeight",q+"?"+q+".height:"+e+".drawingBufferHeight");return q})}return null}function oa(c,g,d){function k(c){if(c in q){var u=q[c];b.commandType(u,"object","invalid "+c,d.commandStr);var n=!0,f=u.x|0,E=u.y|0,R,l;"width"in u?(R=u.width|0,b.command(0<=R,"invalid "+c,d.commandStr)):
n=!1;"height"in u?(l=u.height|0,b.command(0<=l,"invalid "+c,d.commandStr)):n=!1;return new D(!n&&g&&g.thisDep,!n&&g&&g.contextDep,!n&&g&&g.propDep,function(b,c){var g=b.shared.context,d=R;"width"in u||(d=c.def(g,".","framebufferWidth","-",f));var e=l;"height"in u||(e=c.def(g,".","framebufferHeight","-",E));return[f,E,d,e]})}if(c in v){var Z=v[c],n=e(Z,function(g,d){var e=g.invoke(d,Z);b.optional(function(){g.assert(d,e+"&&typeof "+e+'==="object"',"invalid "+c)});var k=g.shared.context,q=d.def(e,".x|0"),
u=d.def(e,".y|0"),v=d.def('"width" in ',e,"?",e,".width|0:","(",k,".","framebufferWidth","-",q,")"),n=d.def('"height" in ',e,"?",e,".height|0:","(",k,".","framebufferHeight","-",u,")");b.optional(function(){g.assert(d,v+">=0&&"+n+">=0","invalid "+c)});return[q,u,v,n]});g&&(n.thisDep=n.thisDep||g.thisDep,n.contextDep=n.contextDep||g.contextDep,n.propDep=n.propDep||g.propDep);return n}return g?new D(g.thisDep,g.contextDep,g.propDep,function(b,c){var g=b.shared.context;return[0,0,c.def(g,".","framebufferWidth"),
c.def(g,".","framebufferHeight")]}):null}var q=c["static"],v=c.dynamic;if(c=k("viewport")){var u=c;c=new D(c.thisDep,c.contextDep,c.propDep,function(b,c){var g=u.append(b,c),d=b.shared.context;c.set(d,".viewportWidth",g[2]);c.set(d,".viewportHeight",g[3]);return g})}return{viewport:c,scissor_box:k("scissor.box")}}function v(c,g){var e=c["static"];if("string"===typeof e.frag&&"string"===typeof e.vert){if(0<d(g.dynamic).length)return null;var e=g["static"],k=d(e);if(0<k.length&&"number"===typeof e[k[0]]){for(var q=
[],u=0;u<k.length;++u)b("number"===typeof e[k[u]],"must specify all vertex attribute locations when using vaos"),q.push([e[k[u]]|0,k[u]]);return q}}return null}function G(c,g,d){function k(c){if(c in q){var g=l.id(q[c]);b.optional(function(){na.shader(U[c],g,b.guessCommand())});var d=m(function(){return g});d.id=g;return d}if(c in u){var v=u[c];return e(v,function(g,d){var e=g.invoke(d,v),k=d.def(g.shared.strings,".id(",e,")");b.optional(function(){d(g.shared.shader,".shader(",U[c],",",k,",",g.command,
");")});return k})}return null}var q=c["static"],u=c.dynamic,v=k("frag"),n=k("vert"),f=null;K(v)&&K(n)?(f=na.program(n.id,v.id,null,d),c=m(function(b,c){return b.link(f)})):c=new D(v&&v.thisDep||n&&n.thisDep,v&&v.contextDep||n&&n.contextDep,v&&v.propDep||n&&n.propDep,function(c,g){var d=c.shared.shader,e;e=v?v.append(c,g):g.def(d,".","frag");var k;k=n?n.append(c,g):g.def(d,".","vert");var q=d+".program("+k+","+e;b.optional(function(){q+=","+c.command});return g.def(q+")")});return{frag:v,vert:n,progVar:c,
program:f}}function ca(g,k){function q(c,g){if(c in v){var d=v[c]|0;g?n.offset=d:n.instances=d;b.command(!g||0<=d,"invalid "+c,k.commandStr);return m(function(b,c){g&&(b.OFFSET=d);return d})}if(c in u){var l=u[c];return e(l,function(d,e){var k=d.invoke(e,l);g&&(d.OFFSET=k,b.optional(function(){d.assert(e,k+">=0","invalid "+c)}));return k})}if(g){if(R)return m(function(b,c){return b.OFFSET=0});if(f)return new D(E.thisDep,E.contextDep,E.propDep,function(b,c){return c.def(b.shared.vao+".currentVAO?"+
b.shared.vao+".currentVAO.offset:0")})}else if(f)return new D(E.thisDep,E.contextDep,E.propDep,function(b,c){return c.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var v=g["static"],u=g.dynamic,n={},f=!1,E=function(){if("vao"in v){var b=v.vao;null!==b&&null===A.getVAO(b)&&(b=A.createVAO(b));f=!0;n.vao=b;return m(function(c){var g=A.getVAO(b);return g?c.link(g):"null"})}if("vao"in u){f=!0;var c=u.vao;return e(c,function(b,g){var d=b.invoke(g,c);return g.def(b.shared.vao+
".getVAO("+d+")")})}return null}(),R=!1,l=function(){if("elements"in v){var g=v.elements;n.elements=g;if(a(g)){var d=n.elements=c.create(g,!0),g=c.getElements(d);R=!0}else g&&(g=c.getElements(g),R=!0,b.command(g,"invalid elements",k.commandStr));d=m(function(b,c){if(g){var d=b.link(g);return b.ELEMENTS=d}return b.ELEMENTS=null});d.value=g;return d}if("elements"in u){R=!0;var q=u.elements;return e(q,function(c,g){var d=c.shared,e=d.isBufferArgs,d=d.elements,k=c.invoke(g,q),v=g.def("null"),e=g.def(e,
"(",k,")"),u=c.cond(e).then(v,"=",d,".createStream(",k,");")["else"](v,"=",d,".getElements(",k,");");b.optional(function(){c.assert(u["else"],"!"+k+"||"+v,"invalid elements")});g.entry(u);g.exit(c.cond(e).then(d,".destroyStream(",v,");"));return c.ELEMENTS=v})}return f?new D(E.thisDep,E.contextDep,E.propDep,function(b,c){return c.def(b.shared.vao+".currentVAO?"+b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),Z=q("offset",!0),M=function(){if("primitive"in v){var c=
v.primitive;n.primitive=c;b.commandParameter(c,aa,"invalid primitve",k.commandStr);return m(function(b,g){return aa[c]})}if("primitive"in u){var g=u.primitive;return e(g,function(c,e){var k=c.constants.primTypes,v=c.invoke(e,g);b.optional(function(){c.assert(e,v+" in "+k,"invalid primitive, must be one of "+d(aa))});return e.def(k,"[",v,"]")})}return R?K(l)?l.value?m(function(b,c){return c.def(b.ELEMENTS,".primType")}):m(function(){return 4}):new D(l.thisDep,l.contextDep,l.propDep,function(b,c){var g=
b.ELEMENTS;return c.def(g,"?",g,".primType:",4)}):f?new D(E.thisDep,E.contextDep,E.propDep,function(b,c){return c.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),r=function(){if("count"in v){var c=v.count|0;n.count=c;b.command("number"===typeof c&&0<=c,"invalid vertex count",k.commandStr);return m(function(){return c})}if("count"in u){var g=u.count;return e(g,function(c,d){var e=c.invoke(d,g);b.optional(function(){c.assert(d,"typeof "+e+'==="number"&&'+e+">=0&&"+
e+"===("+e+"|0)","invalid vertex count")});return e})}if(R){if(K(l)){if(l)return Z?new D(Z.thisDep,Z.contextDep,Z.propDep,function(c,g){var d=g.def(c.ELEMENTS,".vertCount-",c.OFFSET);b.optional(function(){c.assert(g,d+">=0","invalid vertex offset/element buffer too small")});return d}):m(function(b,c){return c.def(b.ELEMENTS,".vertCount")});var d=m(function(){return-1});b.optional(function(){d.MISSING=!0});return d}var q=new D(l.thisDep||Z.thisDep,l.contextDep||Z.contextDep,l.propDep||Z.propDep,function(b,
c){var g=b.ELEMENTS;return b.OFFSET?c.def(g,"?",g,".vertCount-",b.OFFSET,":-1"):c.def(g,"?",g,".vertCount:-1")});b.optional(function(){q.DYNAMIC=!0});return q}return f?new D(E.thisDep,E.contextDep,E.propDep,function(b,c){return c.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),z=q("instances",!1);return{elements:l,primitive:M,count:r,instances:z,offset:Z,vao:E,vaoActive:f,elementsActive:R,"static":n}}function W(c,g){var v=c["static"],q=c.dynamic,u={};va.forEach(function(c){function n(b,
g){if(c in v){var d=b(v[c]);u[E]=m(function(){return d})}else if(c in q){var k=q[c];u[E]=e(k,function(b,c){return g(b,c,b.invoke(c,k))})}}var E=Q(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return n(function(d){b.commandType(d,"boolean",c,g.commandStr);return d},function(g,d,e){b.optional(function(){g.assert(d,"typeof "+e+'==="boolean"',
"invalid flag "+c,g.commandStr)});return e});case "depth.func":return n(function(d){b.commandParameter(d,k,"invalid "+c,g.commandStr);return k[d]},function(g,e,v){var q=g.constants.compareFuncs;b.optional(function(){g.assert(e,v+" in "+q,"invalid "+c+", must be one of "+d(k))});return e.def(q,"[",v,"]")});case "depth.range":return n(function(c){b.command(w(c)&&2===c.length&&"number"===typeof c[0]&&"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",g.commandStr);return c},function(c,g,d){b.optional(function(){c.assert(g,
c.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var e=g.def("+",d,"[0]"),k=g.def("+",d,"[1]");return[e,k]});case "blend.func":return n(function(c){b.commandType(c,"object","blend.func",g.commandStr);var d="srcRGB"in c?c.srcRGB:c.src,e="srcAlpha"in c?c.srcAlpha:c.src,k="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;b.commandParameter(d,L,E+".srcRGB",g.commandStr);b.commandParameter(e,
L,E+".srcAlpha",g.commandStr);b.commandParameter(k,L,E+".dstRGB",g.commandStr);b.commandParameter(c,L,E+".dstAlpha",g.commandStr);b.command(-1===ha.indexOf(d+", "+k),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+k+")",g.commandStr);return[L[d],L[k],L[e],L[c]]},function(g,e,k){function v(n,u){var f=e.def('"',n,u,'" in ',k,"?",k,".",n,u,":",k,".",n);b.optional(function(){g.assert(e,f+" in "+q,"invalid "+c+"."+n+u+", must be one of "+d(L))});return f}var q=g.constants.blendFuncs;b.optional(function(){g.assert(e,
k+"&&typeof "+k+'==="object"',"invalid blend func, must be an object")});var n=v("src","RGB"),u=v("dst","RGB");b.optional(function(){g.assert(e,g.constants.invalidBlendCombinations+".indexOf("+n+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=e.def(q,"[",n,"]"),E=e.def(q,"[",v("src","Alpha"),"]"),l=e.def(q,"[",u,"]"),R=e.def(q,"[",v("dst","Alpha"),"]");return[f,l,E,R]});case "blend.equation":return n(function(d){if("string"===typeof d)return b.commandParameter(d,
Fa,"invalid "+c,g.commandStr),[Fa[d],Fa[d]];if("object"===typeof d)return b.commandParameter(d.rgb,Fa,c+".rgb",g.commandStr),b.commandParameter(d.alpha,Fa,c+".alpha",g.commandStr),[Fa[d.rgb],Fa[d.alpha]];b.commandRaise("invalid blend.equation",g.commandStr)},function(g,e,k){var q=g.constants.blendEquations,v=e.def(),n=e.def(),u=g.cond("typeof ",k,'==="string"');b.optional(function(){function b(c,e,k){g.assert(c,k+" in "+q,"invalid "+e+", must be one of "+d(Fa))}b(u.then,c,k);g.assert(u["else"],k+
"&&typeof "+k+'==="object"',"invalid "+c);b(u["else"],c+".rgb",k+".rgb");b(u["else"],c+".alpha",k+".alpha")});u.then(v,"=",n,"=",q,"[",k,"];");u["else"](v,"=",q,"[",k,".rgb];",n,"=",q,"[",k,".alpha];");e(u);return[v,n]});case "blend.color":return n(function(c){b.command(w(c)&&4===c.length,"blend.color must be a 4d array",g.commandStr);return p(4,function(b){return+c[b]})},function(c,g,d){b.optional(function(){c.assert(g,c.shared.isArrayLike+"("+d+")&&"+d+".length===4","blend.color must be a 4d array")});
return p(4,function(b){return g.def("+",d,"[",b,"]")})});case "stencil.mask":return n(function(c){b.commandType(c,"number",E,g.commandStr);return c|0},function(c,g,d){b.optional(function(){c.assert(g,"typeof "+d+'==="number"',"invalid stencil.mask")});return g.def(d,"|0")});case "stencil.func":return n(function(d){b.commandType(d,"object",E,g.commandStr);var e=d.cmp||"keep",q=d.ref||0;d="mask"in d?d.mask:-1;b.commandParameter(e,k,c+".cmp",g.commandStr);b.commandType(q,"number",c+".ref",g.commandStr);
b.commandType(d,"number",c+".mask",g.commandStr);return[k[e],q,d]},function(c,g,d){var e=c.constants.compareFuncs;b.optional(function(){function b(){c.assert(g,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(d+"&&typeof ",d,'==="object"');b('!("cmp" in ',d,")||(",d,".cmp in ",e,")")});var k=g.def('"cmp" in ',d,"?",e,"[",d,".cmp]",":",7680),q=g.def(d,".ref|0"),v=g.def('"mask" in ',d,"?",d,".mask|0:-1");return[k,q,v]});case "stencil.opFront":case "stencil.opBack":return n(function(d){b.commandType(d,
"object",E,g.commandStr);var e=d.fail||"keep",k=d.zfail||"keep";d=d.zpass||"keep";b.commandParameter(e,f,c+".fail",g.commandStr);b.commandParameter(k,f,c+".zfail",g.commandStr);b.commandParameter(d,f,c+".zpass",g.commandStr);return["stencil.opBack"===c?1029:1028,f[e],f[k],f[d]]},function(g,e,k){function q(u){b.optional(function(){g.assert(e,'!("'+u+'" in '+k+")||("+k+"."+u+" in "+v+")","invalid "+c+"."+u+", must be one of "+d(f))});return e.def('"',u,'" in ',k,"?",v,"[",k,".",u,"]:",7680)}var v=g.constants.stencilOps;
b.optional(function(){g.assert(e,k+"&&typeof "+k+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,q("fail"),q("zfail"),q("zpass")]});case "polygonOffset.offset":return n(function(c){b.commandType(c,"object",E,g.commandStr);var d=c.factor|0;c=c.units|0;b.commandType(d,"number",E+".factor",g.commandStr);b.commandType(c,"number",E+".units",g.commandStr);return[d,c]},function(g,d,e){b.optional(function(){g.assert(d,e+"&&typeof "+e+'==="object"',"invalid "+c)});var k=d.def(e,".factor|0"),
q=d.def(e,".units|0");return[k,q]});case "cull.face":return n(function(c){var d=0;"front"===c?d=1028:"back"===c&&(d=1029);b.command(!!d,E,g.commandStr);return d},function(c,g,d){b.optional(function(){c.assert(g,d+'==="front"||'+d+'==="back"',"invalid cull.face")});return g.def(d,'==="front"?',1028,":",1029)});case "lineWidth":return n(function(c){b.command("number"===typeof c&&c>=N.lineWidthDims[0]&&c<=N.lineWidthDims[1],"invalid line width, must be a positive number between "+N.lineWidthDims[0]+
" and "+N.lineWidthDims[1],g.commandStr);return c},function(c,g,d){b.optional(function(){c.assert(g,"typeof "+d+'==="number"&&'+d+">="+N.lineWidthDims[0]+"&&"+d+"<="+N.lineWidthDims[1],"invalid line width")});return d});case "frontFace":return n(function(c){b.commandParameter(c,z,E,g.commandStr);return z[c]},function(c,g,d){b.optional(function(){c.assert(g,d+'==="cw"||'+d+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return g.def(d+'==="cw"?2304:2305')});case "colorMask":return n(function(c){b.command(w(c)&&
4===c.length,"color.mask must be length 4 array",g.commandStr);return c.map(function(b){return!!b})},function(c,g,d){b.optional(function(){c.assert(g,c.shared.isArrayLike+"("+d+")&&"+d+".length===4","invalid color.mask")});return p(4,function(b){return"!!"+d+"["+b+"]"})});case "sample.coverage":return n(function(c){b.command("object"===typeof c&&c,E,g.commandStr);var d="value"in c?c.value:1;c=!!c.invert;b.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",
g.commandStr);return[d,c]},function(c,g,d){b.optional(function(){c.assert(g,d+"&&typeof "+d+'==="object"',"invalid sample.coverage")});var e=g.def('"value" in ',d,"?+",d,".value:1"),k=g.def("!!",d,".invert");return[e,k]})}});return u}function la(c,g){var k=c["static"],q=c.dynamic,v={};d(k).forEach(function(c){var d=k[c],e;if("number"===typeof d||"boolean"===typeof d)e=m(function(){return d});else if("function"===typeof d){var q=d._reglType;"texture2d"===q||"textureCube"===q?e=m(function(b){return b.link(d)}):
"framebuffer"===q||"framebufferCube"===q?(b.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',g.commandStr),e=m(function(b){return b.link(d.color[0])})):b.commandRaise('invalid data for uniform "'+c+'"',g.commandStr)}else w(d)?e=m(function(g){return g.global.def("[",p(d.length,function(e){b.command("number"===typeof d[e]||"boolean"===typeof d[e],"invalid uniform "+c,g.commandStr);return d[e]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+
c+'"',g.commandStr);e.value=d;v[c]=e});d(q).forEach(function(b){var c=q[b];v[b]=e(c,function(b,g){return b.invoke(g,c)})});return v}function ra(c,g){var k=c["static"],q=c.dynamic,v={};d(k).forEach(function(c){var e=k[c],q=l.id(c),u=new ta;if(a(e))u.state=1,u.buffer=C.getBuffer(C.create(e,34962,!1,!0)),u.type=0;else{var n=C.getBuffer(e);if(n)u.state=1,u.buffer=n,u.type=0;else if(b.command("object"===typeof e&&e,"invalid data for attribute "+c,g.commandStr),"constant"in e){var f=e.constant;u.buffer=
"null";u.state=2;"number"===typeof f?u.x=f:(b.command(w(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+c,g.commandStr),S.forEach(function(c,b){b<f.length&&(u[c]=f[b])}))}else{n=a(e.buffer)?C.getBuffer(C.create(e.buffer,34962,!1,!0)):C.getBuffer(e.buffer);b.command(!!n,'missing buffer for attribute "'+c+'"',g.commandStr);var E=e.offset|0;b.command(0<=E,'invalid offset for attribute "'+c+'"',g.commandStr);var R=e.stride|0;b.command(0<=R&&256>R,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',
g.commandStr);var Z=e.size|0;b.command(!("size"in e)||0<Z&&4>=Z,'invalid size for attribute "'+c+'", must be 1,2,3,4',g.commandStr);var M=!!e.normalized,r=0;"type"in e&&(b.commandParameter(e.type,x,"invalid type for attribute "+c,g.commandStr),r=x[e.type]);var z=e.divisor|0;b.optional(function(){"divisor"in e&&(b.command(0===z||sa,'cannot specify divisor for attribute "'+c+'", instancing not supported',g.commandStr),b.command(0<=z,'invalid divisor for attribute "'+c+'"',g.commandStr));var k=g.commandStr,
q="buffer offset divisor normalized type size stride".split(" ");d(e).forEach(function(g){b.command(0<=q.indexOf(g),'unknown parameter "'+g+'" for attribute pointer "'+c+'" (valid parameters are '+q+")",k)})});u.buffer=n;u.state=1;u.size=Z;u.normalized=M;u.type=r||n.dtype;u.offset=E;u.stride=R;u.divisor=z}}v[c]=m(function(c,b){var g=c.attribCache;if(q in g)return g[q];var e={isStream:!1};d(u).forEach(function(c){e[c]=u[c]});u.buffer&&(e.buffer=c.link(u.buffer),e.type=e.type||e.buffer+".dtype");return g[q]=
e})});d(q).forEach(function(c){var g=q[c];v[c]=e(g,function(e,k){function q(c){k(l[c],"=",u,".",c,"|0;")}var u=e.invoke(k,g),v=e.shared,n=e.constants,f=v.isBufferArgs,E=v.buffer;b.optional(function(){e.assert(k,u+"&&(typeof "+u+'==="object"||typeof '+u+'==="function")&&('+f+"("+u+")||"+E+".getBuffer("+u+")||"+E+".getBuffer("+u+".buffer)||"+f+"("+u+'.buffer)||("constant" in '+u+"&&(typeof "+u+'.constant==="number"||'+v.isArrayLike+"("+u+".constant))))",'invalid dynamic attribute "'+c+'"')});var l=
{isStream:k.def(!1)},R=new ta;R.state=1;d(R).forEach(function(c){l[c]=k.def(""+R[c])});var Z=l.buffer,M=l.type;k("if(",f,"(",u,")){",l.isStream,"=true;",Z,"=",E,".createStream(",34962,",",u,");",M,"=",Z,".dtype;","}else{",Z,"=",E,".getBuffer(",u,");","if(",Z,"){",M,"=",Z,".dtype;",'}else if("constant" in ',u,"){",l.state,"=",2,";","if(typeof "+u+'.constant === "number"){',l[S[0]],"=",u,".constant;",S.slice(1).map(function(c){return l[c]}).join("="),"=0;","}else{",S.map(function(c,b){return l[c]+"="+
u+".constant.length>"+b+"?"+u+".constant["+b+"]:0;"}).join(""),"}}else{","if(",f,"(",u,".buffer)){",Z,"=",E,".createStream(",34962,",",u,".buffer);","}else{",Z,"=",E,".getBuffer(",u,".buffer);","}",M,'="type" in ',u,"?",n.glTypes,"[",u,".type]:",Z,".dtype;",l.normalized,"=!!",u,".normalized;");q("size");q("offset");q("stride");q("divisor");k("}}");k.exit("if(",l.isStream,"){",E,".destroyStream(",Z,");","}");return l})});return v}function Ca(c){var b=c["static"],g=c.dynamic,k={};d(b).forEach(function(c){var g=
b[c];k[c]=m(function(c,b){return"number"===typeof g||"boolean"===typeof g?""+g:c.link(g)})});d(g).forEach(function(c){var b=g[c];k[c]=e(b,function(c,g){return c.invoke(g,b)})});return k}function xa(c,g,e,k,u){function q(c){var b=R[c];b&&(M[c]=b)}var n=c["static"],f=c.dynamic;b.optional(function(){function c(e){d(e).forEach(function(c){b.command(0<=g.indexOf(c),'unknown parameter "'+c+'"',u.commandStr)})}var g="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(va);
c(n);c(f)});var E=v(c,g),l=qa(c,u),R=oa(c,l,u),Z=ca(c,u),M=W(c,u),r=G(c,u,E);q("viewport");q(Q("scissor.box"));var z=0<d(M).length,l={framebuffer:l,draw:Z,shader:r,state:M,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};l.profile=P(c,u);l.uniforms=la(e,u);l.drawVAO=l.scopeVAO=Z.vao;if(!l.drawVAO&&r.program&&!E&&h.angle_instanced_arrays&&Z["static"].elements){var ta=!0;c=r.program.attributes.map(function(c){c=g["static"][c];ta=ta&&!!c;return c});if(ta&&0<c.length){var B=A.getVAO(A.createVAO({attributes:c,
elements:Z["static"].elements}));l.drawVAO=new D(null,null,null,function(c,b){return c.link(B)});l.useVAO=!0}}E?l.useVAO=!0:l.attributes=ra(g,u);l.context=Ca(k,u);return l}function ea(c,b,g){var e=c.shared.context,k=c.scope();d(g).forEach(function(d){b.save(e,"."+d);var u=g[d].append(c,b);Array.isArray(u)?k(e,".",d,"=[",u.join(),"];"):k(e,".",d,"=",u,";")});b(k)}function Da(c,b,g,d){var e=c.shared,k=e.gl,u=e.framebuffer,q;Aa&&(q=b.def(e.extensions,".webgl_draw_buffers"));var v=c.constants,e=v.drawBuffer,
v=v.backBuffer;c=g?g.append(c,b):b.def(u,".next");d||b("if(",c,"!==",u,".cur){");b("if(",c,"){",k,".bindFramebuffer(",36160,",",c,".framebuffer);");Aa&&b(q,".drawBuffersWEBGL(",e,"[",c,".colorAttachments.length]);");b("}else{",k,".bindFramebuffer(",36160,",null);");Aa&&b(q,".drawBuffersWEBGL(",v,");");b("}",u,".cur=",c,";");d||b("}")}function ja(c,b,g){var e=c.shared,k=e.gl,u=c.current,q=c.next,v=e.current,n=e.next,f=c.cond(v,".dirty");va.forEach(function(b){b=Q(b);if(!(b in g.state)){var d,e;if(b in
q){d=q[b];e=u[b];var E=p(ga[b].length,function(c){return f.def(d,"[",c,"]")});f(c.cond(E.map(function(c,b){return c+"!=="+e+"["+b+"]"}).join("||")).then(k,".",Ga[b],"(",E,");",E.map(function(c,b){return e+"["+b+"]="+c}).join(";"),";"))}else d=f.def(n,".",b),E=c.cond(d,"!==",v,".",b),f(E),b in Ya?E(c.cond(d).then(k,".enable(",Ya[b],");")["else"](k,".disable(",Ya[b],");"),v,".",b,"=",d,";"):E(k,".",Ga[b],"(",d,");",v,".",b,"=",d,";")}});0===d(g.state).length&&f(v,".dirty=false;");b(f)}function pa(c,
b,g,e){var k=c.shared,u=c.current,q=k.current,v=k.gl;ma(d(g)).forEach(function(d){var k=g[d];if(!e||e(k)){var n=k.append(c,b);if(Ya[d]){var f=Ya[d];K(k)?n?b(v,".enable(",f,");"):b(v,".disable(",f,");"):b(c.cond(n).then(v,".enable(",f,");")["else"](v,".disable(",f,");"));b(q,".",d,"=",n,";")}else if(w(n)){var E=u[d];b(v,".",Ga[d],"(",n,");",n.map(function(c,b){return E+"["+b+"]="+c}).join(";"),";")}else b(v,".",Ga[d],"(",n,");",q,".",d,"=",n,";")}})}function Ba(c,b){sa&&(c.instancing=b.def(c.shared.extensions,
".angle_instanced_arrays"))}function Ma(c,b,g,d,e){function k(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function u(c){Z=b.def();c(Z,"=",k(),";");"string"===typeof e?c(f,".count+=",e,";"):c(f,".count++;");da&&(d?(R=b.def(),c(R,"=",l,".getNumPendingQueries();")):c(l,".beginQuery(",f,");"))}function q(c){c(f,".cpuTime+=",k(),"-",Z,";");da&&(d?c(l,".pushScopeStats(",R,",",l,".getNumPendingQueries(),",f,");"):c(l,".endQuery();"))}function v(c){var g=b.def(E,".profile");
b(E,".profile=",c,";");b.exit(E,".profile=",g,";")}var n=c.shared,f=c.stats,E=n.current,l=n.timer;g=g.profile;var Z,R;if(g){if(K(g)){g.enable?(u(b),q(b.exit),v("true")):v("false");return}g=g.append(c,b);v(g)}else g=b.def(E,".profile");n=c.block();u(n);b("if(",g,"){",n,"}");c=c.block();q(c);b.exit("if(",g,"){",c,"}")}function Z(c,g,e,k,u){function q(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function v(b,d,e){function k(){g("if(!",E,".buffer){",q,".enableVertexAttribArray(",f,");}");var b=e.type,u;u=e.size?g.def(e.size,"||",d):d;g("if(",E,".type!==",b,"||",E,".size!==",u,"||",R.map(function(c){return E+"."+c+"!=="+e[c]}).join("||"),"){",q,".bindBuffer(",34962,",",l,".buffer);",q,".vertexAttribPointer(",[f,u,b,e.normalized,e.stride,e.offset],");",E,".type=",b,";",E,".size=",u,";",R.map(function(c){return E+"."+c+"="+e[c]+";"}).join(""),"}");sa&&(b=e.divisor,g("if(",E,".divisor!==",b,"){",
c.instancing,".vertexAttribDivisorANGLE(",[f,b],");",E,".divisor=",b,";}"))}function u(){g("if(",E,".buffer){",q,".disableVertexAttribArray(",f,");",E,".buffer=null;","}if(",S.map(function(c,b){return E+"."+c+"!=="+Z[b]}).join("||"),"){",q,".vertexAttrib4f(",f,",",Z,");",S.map(function(c,b){return E+"."+c+"="+Z[b]+";"}).join(""),"}")}var q=n.gl,f=g.def(b,".location"),E=g.def(n.attributes,"[",f,"]");b=e.state;var l=e.buffer,Z=[e.x,e.y,e.z,e.w],R=["buffer","normalized","offset","stride"];1===b?k():
2===b?u():(g("if(",b,"===",1,"){"),k(),g("}else{"),u(),g("}"))}var n=c.shared;k.forEach(function(k){var n=k.name,f=e.attributes[n],E;if(f){if(!u(f))return;E=f.append(c,g)}else{if(!u(V))return;var l=c.scopeAttrib(n);b.optional(function(){c.assert(g,l+".state","missing attribute "+n)});E={};d(new ta).forEach(function(c){E[c]=g.def(l,".",c)})}v(c.link(k),q(k.info.type),E)})}function zb(c,g,d,e,k,u){for(var q=c.shared,v=q.gl,n,E=0;E<e.length;++E){var f=e[E],Z=f.name,R=f.info.type,M=d.uniforms[Z],f=c.link(f)+
".location",r;if(M){if(!k(M))continue;if(K(M)){var z=M.value;b.command(null!==z&&"undefined"!==typeof z,'missing uniform "'+Z+'"',c.commandStr);if(35678===R||35680===R)b.command("function"===typeof z&&(35678===R&&("texture2d"===z._reglType||"framebuffer"===z._reglType)||35680===R&&("textureCube"===z._reglType||"framebufferCube"===z._reglType)),"invalid texture for uniform "+Z,c.commandStr),M=c.link(z._texture||z.color[0]._texture),g(v,".uniform1i(",f,",",M+".bind());"),g.exit(M,".unbind();");else if(35674===
R||35675===R||35676===R){b.optional(function(){b.command(w(z),"invalid matrix for uniform "+Z,c.commandStr);b.command(35674===R&&4===z.length||35675===R&&9===z.length||35676===R&&16===z.length,"invalid length for matrix uniform "+Z,c.commandStr)});var M=c.global.def("new Float32Array(["+Array.prototype.slice.call(z)+"])"),Q=2;35675===R?Q=3:35676===R&&(Q=4);g(v,".uniformMatrix",Q,"fv(",f,",false,",M,");")}else{switch(R){case 5126:b.commandType(z,"number","uniform "+Z,c.commandStr);n="1f";break;case 35664:b.command(w(z)&&
2===z.length,"uniform "+Z,c.commandStr);n="2f";break;case 35665:b.command(w(z)&&3===z.length,"uniform "+Z,c.commandStr);n="3f";break;case 35666:b.command(w(z)&&4===z.length,"uniform "+Z,c.commandStr);n="4f";break;case 35670:b.commandType(z,"boolean","uniform "+Z,c.commandStr);n="1i";break;case 5124:b.commandType(z,"number","uniform "+Z,c.commandStr);n="1i";break;case 35671:b.command(w(z)&&2===z.length,"uniform "+Z,c.commandStr);n="2i";break;case 35667:b.command(w(z)&&2===z.length,"uniform "+Z,c.commandStr);
n="2i";break;case 35672:b.command(w(z)&&3===z.length,"uniform "+Z,c.commandStr);n="3i";break;case 35668:b.command(w(z)&&3===z.length,"uniform "+Z,c.commandStr);n="3i";break;case 35673:b.command(w(z)&&4===z.length,"uniform "+Z,c.commandStr);n="4i";break;case 35669:b.command(w(z)&&4===z.length,"uniform "+Z,c.commandStr),n="4i"}g(v,".uniform",n,"(",f,",",w(z)?Array.prototype.slice.call(z):z,");")}continue}else r=M.append(c,g)}else{if(!k(V))continue;r=g.def(q.uniforms,"[",l.id(Z),"]")}35678===R?(b(!Array.isArray(r),
"must specify a scalar prop for textures"),g("if(",r,"&&",r,'._reglType==="framebuffer"){',r,"=",r,".color[0];","}")):35680===R&&(b(!Array.isArray(r),"must specify a scalar prop for cube maps"),g("if(",r,"&&",r,'._reglType==="framebufferCube"){',r,"=",r,".color[0];","}"));b.optional(function(){function d(b,e){c.assert(g,b,'bad data or missing for uniform "'+Z+'".  '+e)}function e(c){b(!Array.isArray(r),"must not specify an array type for uniform");d("typeof "+r+'==="'+c+'"',"invalid type, expected "+
c)}function k(g,e){Array.isArray(r)?b(r.length===g,"must have length "+g):d(q.isArrayLike+"("+r+")&&"+r+".length==="+g,"invalid vector, should have length "+g,c.commandStr)}function u(g){b(!Array.isArray(r),"must not specify a value type");d("typeof "+r+'==="function"&&'+r+'._reglType==="texture'+(3553===g?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(R){case 5124:e("number");break;case 35667:k(2,"number");break;case 35668:k(3,"number");break;case 35669:k(4,"number");break;case 5126:e("number");
break;case 35664:k(2,"number");break;case 35665:k(3,"number");break;case 35666:k(4,"number");break;case 35670:e("boolean");break;case 35671:k(2,"boolean");break;case 35672:k(3,"boolean");break;case 35673:k(4,"boolean");break;case 35674:k(4,"number");break;case 35675:k(9,"number");break;case 35676:k(16,"number");break;case 35678:u(3553);break;case 35680:u(34067)}});M=1;switch(R){case 35678:case 35680:M=g.def(r,"._texture");g(v,".uniform1i(",f,",",M,".bind());");g.exit(M,".unbind();");continue;case 5124:case 35670:n=
"1i";break;case 35667:case 35671:n="2i";M=2;break;case 35668:case 35672:n="3i";M=3;break;case 35669:case 35673:n="4i";M=4;break;case 5126:n="1f";break;case 35664:n="2f";M=2;break;case 35665:n="3f";M=3;break;case 35666:n="4f";M=4;break;case 35674:n="Matrix2fv";break;case 35675:n="Matrix3fv";break;case 35676:n="Matrix4fv"}if("M"===n.charAt(0)){g(v,".uniform",n,"(",f,",");var f=Math.pow(R-35674+2,2),ta=c.global.def("new Float32Array(",f,")");Array.isArray(r)?g("false,(",p(f,function(c){return ta+"["+
c+"]="+r[c]}),",",ta,")"):g("false,(Array.isArray(",r,")||",r," instanceof Float32Array)?",r,":(",p(f,function(c){return ta+"["+c+"]="+r+"["+c+"]"}),",",ta,")");g(");")}else{if(1<M){for(var Q=[],B=[],m=0;m<M;++m)Array.isArray(r)?B.push(r[m]):B.push(g.def(r+"["+m+"]")),u&&Q.push(g.def());u&&g("if(!",c.batchId,"||",Q.map(function(c,b){return c+"!=="+B[b]}).join("||"),"){",Q.map(function(c,b){return c+"="+B[b]+";"}).join(""));g(v,".uniform",n,"(",f,",",B.join(","),");")}else b(!Array.isArray(r),"uniform value must not be an array"),
u&&(M=g.def(),g("if(!",c.batchId,"||",M,"!==",r,"){",M,"=",r,";")),g(v,".uniform",n,"(",f,",",r,");");u&&g("}")}}}function Za(c,g,d,e){function k(b){var u=E[b];return u?u.contextDep&&e.contextDynamic||u.propDep?u.append(c,d):u.append(c,g):g.def(f,".",b)}function u(){function c(){d(z,".drawElementsInstancedANGLE(",[Z,M,Q,R+"<<(("+Q+"-5121)>>1)",r],");")}function b(){d(z,".drawArraysInstancedANGLE(",[Z,R,M,r],");")}l&&"null"!==l?ta?c():(d("if(",l,"){"),c(),d("}else{"),b(),d("}")):b()}function q(){function c(){d(v+
".drawElements("+[Z,M,Q,R+"<<(("+Q+"-5121)>>1)"]+");")}function b(){d(v+".drawArrays("+[Z,R,M]+");")}l&&"null"!==l?ta?c():(d("if(",l,"){"),c(),d("}else{"),b(),d("}")):b()}var n=c.shared,v=n.gl,f=n.draw,E=e.draw,l=function(){var b=E.elements,k=g;if(b){if(b.contextDep&&e.contextDynamic||b.propDep)k=d;b=b.append(c,k);E.elementsActive&&k("if("+b+")"+v+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=k.def(),k(b,"=",f,".","elements",";","if(",b,"){",v,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",
n.vao,".currentVAO){",b,"=",c.shared.elements+".getElements("+n.vao,".currentVAO.elements);",Ea?"":"if("+b+")"+v+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),Z=k("primitive"),R=k("offset"),M=function(){var k=E.count,u,q=g;if(k){if(k.contextDep&&e.contextDynamic||k.propDep)q=d;u=k.append(c,q);b.optional(function(){k.MISSING&&c.assert(g,"false","missing vertex count");k.DYNAMIC&&c.assert(q,u+">=0","missing vertex count")})}else u=q.def(f,".","count"),b.optional(function(){c.assert(q,u+
">=0","missing vertex count")});return u}();if("number"===typeof M){if(0===M)return}else d("if(",M,"){"),d.exit("}");var r,z;sa&&(r=k("instances"),z=c.instancing);var Q=l+".type",ta=E.elements&&K(E.elements)&&!E.vaoActive;sa&&("number"!==typeof r||0<=r)?"string"===typeof r?(d("if(",r,">0){"),u(),d("}else if(",r,"<0){"),q(),d("}")):u():q()}function u(c,g,d,e,k){var u=O();k=u.proc("body",k);b.optional(function(){u.commandStr=g.commandStr;u.command=u.link(g.commandStr)});sa&&(u.instancing=k.def(u.shared.extensions,
".angle_instanced_arrays"));c(u,k,d,e);return u.compile().body}function n(c,b,g,d){Ba(c,b);g.useVAO?g.drawVAO?b(c.shared.vao,".setVAO(",g.drawVAO.append(c,b),");"):b(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(b(c.shared.vao,".setVAO(null);"),Z(c,b,g,d.attributes,function(){return!0}));zb(c,b,g,d.uniforms,function(){return!0},!1);Za(c,b,b,g)}function R(c,b){var g=c.proc("draw",1);Ba(c,g);ea(c,g,b.context);Da(c,g,b.framebuffer);ja(c,g,b);pa(c,g,b.state);Ma(c,g,b,!1,!0);var e=b.shader.progVar.append(c,
g);g(c.shared.gl,".useProgram(",e,".program);");if(b.shader.program)n(c,g,b,b.shader.program);else{g(c.shared.vao,".setVAO(null);");var k=c.global.def("{}"),q=g.def(e,".id"),v=g.def(k,"[",q,"]");g(c.cond(v).then(v,".call(this,a0);")["else"](v,"=",k,"[",q,"]=",c.link(function(g){return u(n,c,b,g,1)}),"(",e,");",v,".call(this,a0);"))}0<d(b.state).length&&g(c.shared.current,".dirty=true;");c.shared.vao&&g(c.shared.vao,".setVAO(null);")}function ua(c,b,g,d){function e(){return!0}c.batchId="a1";Ba(c,b);
Z(c,b,g,d.attributes,e);zb(c,b,g,d.uniforms,e,!1);Za(c,b,b,g)}function wa(c,b,g,d){function e(c){return c.contextDep&&q||c.propDep}function k(c){return!e(c)}Ba(c,b);var q=g.contextDep,n=b.def(),v=b.def();c.shared.props=v;c.batchId=n;var f=c.scope(),E=c.scope();b(f.entry,"for(",n,"=0;",n,"<","a1",";++",n,"){",v,"=","a0","[",n,"];",E,"}",f.exit);g.needsContext&&ea(c,E,g.context);g.needsFramebuffer&&Da(c,E,g.framebuffer);pa(c,E,g.state,e);g.profile&&e(g.profile)&&Ma(c,E,g,!1,!0);d?(g.useVAO?g.drawVAO?
e(g.drawVAO)?E(c.shared.vao,".setVAO(",g.drawVAO.append(c,E),");"):f(c.shared.vao,".setVAO(",g.drawVAO.append(c,f),");"):f(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(f(c.shared.vao,".setVAO(null);"),Z(c,f,g,d.attributes,k),Z(c,E,g,d.attributes,e)),zb(c,f,g,d.uniforms,k,!1),zb(c,E,g,d.uniforms,e,!0),Za(c,f,E,g)):(b=c.global.def("{}"),d=g.shader.progVar.append(c,E),v=E.def(d,".id"),f=E.def(b,"[",v,"]"),E(c.shared.gl,".useProgram(",d,".program);","if(!",f,"){",f,"=",b,"[",v,"]=",c.link(function(b){return u(ua,
c,g,b,2)}),"(",d,");}",f,".call(this,a0[",n,"],",n,");"))}function Qa(c,b){function g(c){return c.contextDep&&k||c.propDep}var e=c.proc("batch",2);c.batchId="0";Ba(c,e);var k=!1,q=!0;d(b.context).forEach(function(c){k=k||b.context[c].propDep});k||(ea(c,e,b.context),q=!1);var n=b.framebuffer,v=!1;n?(n.propDep?k=v=!0:n.contextDep&&k&&(v=!0),v||Da(c,e,n)):Da(c,e,null);b.state.viewport&&b.state.viewport.propDep&&(k=!0);ja(c,e,b);pa(c,e,b.state,function(c){return!g(c)});b.profile&&g(b.profile)||Ma(c,e,
b,!1,"a1");b.contextDep=k;b.needsContext=q;b.needsFramebuffer=v;q=b.shader.progVar;if(q.contextDep&&k||q.propDep)wa(c,e,b,null);else if(q=q.append(c,e),e(c.shared.gl,".useProgram(",q,".program);"),b.shader.program)wa(c,e,b,b.shader.program);else{e(c.shared.vao,".setVAO(null);");var n=c.global.def("{}"),v=e.def(q,".id"),f=e.def(n,"[",v,"]");e(c.cond(f).then(f,".call(this,a0,a1);")["else"](f,"=",n,"[",v,"]=",c.link(function(g){return u(wa,c,b,g,2)}),"(",q,");",f,".call(this,a0,a1);"))}0<d(b.state).length&&
e(c.shared.current,".dirty=true;");c.shared.vao&&e(c.shared.vao,".setVAO(null);")}function lc(c,b){function g(d){var u=b.shader[d];u&&e.set(k.shader,"."+d,u.append(c,e))}var e=c.proc("scope",3);c.batchId="a2";var k=c.shared,u=k.current;ea(c,e,b.context);b.framebuffer&&b.framebuffer.append(c,e);ma(d(b.state)).forEach(function(g){var d=b.state[g].append(c,e);w(d)?d.forEach(function(b,d){e.set(c.next[g],"["+d+"]",b)}):e.set(k.next,"."+g,d)});Ma(c,e,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(g){var d=
b.draw[g];d&&e.set(k.draw,"."+g,""+d.append(c,e))});d(b.uniforms).forEach(function(g){var d=b.uniforms[g].append(c,e);Array.isArray(d)&&(d="["+d.join()+"]");e.set(k.uniforms,"["+l.id(g)+"]",d)});d(b.attributes).forEach(function(g){var k=b.attributes[g].append(c,e),u=c.scopeAttrib(g);d(new ta).forEach(function(c){e.set(u,"."+c,k[c])})});b.scopeVAO&&e.set(k.vao,".targetVAO",b.scopeVAO.append(c,e));g("vert");g("frag");0<d(b.state).length&&(e(u,".dirty=true;"),e.exit(u,".dirty=true;"));e("a1(",c.shared.context,
",a0,",c.batchId,");")}function fa(c){if("object"===typeof c&&!w(c)){for(var b=d(c),g=0;g<b.length;++g)if(J.isDynamic(c[b[g]]))return!0;return!1}}function E(c,b,g){function k(c,b){n.forEach(function(g){var d=u[g];J.isDynamic(d)&&(d=c.invoke(b,d),b(l,".",g,"=",d,";"))})}var u=b["static"][g];if(u&&fa(u)){var q=c.global,n=d(u),v=!1,f=!1,E=!1,l=c.global.def("{}");n.forEach(function(b){var g=u[b];if(J.isDynamic(g))"function"===typeof g&&(g=u[b]=J.unbox(g)),b=e(g,null),v=v||b.thisDep,E=E||b.propDep,f=f||
b.contextDep;else{q(l,".",b,"=");switch(typeof g){case "number":q(g);break;case "string":q('"',g,'"');break;case "object":Array.isArray(g)&&q("[",g.join(),"]");break;default:q(c.link(g))}q(";")}});b.dynamic[g]=new J.DynamicVariable(4,{thisDep:v,contextDep:f,propDep:E,ref:l,append:k});delete b["static"][g]}}var ta=A.Record,Fa={add:32774,subtract:32778,"reverse subtract":32779};h.ext_blend_minmax&&(Fa.min=32775,Fa.max=32776);var sa=h.angle_instanced_arrays,Aa=h.webgl_draw_buffers,Ea=h.oes_vertex_array_object,
ga={dirty:!0,profile:T.profile},Y={},va=[],Ya={},Ga={};F("dither",3024);F("blend.enable",3042);q("blend.color","blendColor",[0,0,0,0]);q("blend.equation","blendEquationSeparate",[32774,32774]);q("blend.func","blendFuncSeparate",[1,0,1,0]);F("depth.enable",2929,!0);q("depth.func","depthFunc",513);q("depth.range","depthRange",[0,1]);q("depth.mask","depthMask",!0);q("colorMask","colorMask",[!0,!0,!0,!0]);F("cull.enable",2884);q("cull.face","cullFace",1029);q("frontFace","frontFace",2305);q("lineWidth",
"lineWidth",1);F("polygonOffset.enable",32823);q("polygonOffset.offset","polygonOffset",[0,0]);F("sample.alpha",32926);F("sample.enable",32928);q("sample.coverage","sampleCoverage",[1,!1]);F("stencil.enable",2960);q("stencil.mask","stencilMask",-1);q("stencil.func","stencilFunc",[519,0,-1]);q("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);q("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);F("scissor.enable",3089);q("scissor.box","scissor",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);
q("viewport","viewport",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);var ob={gl:B,context:X,strings:l,next:Y,current:ga,draw:za,elements:c,buffer:C,shader:na,attributes:A.state,vao:A,uniforms:ka,framebuffer:g,extensions:h,timer:da,isBufferArgs:a},ba={primTypes:aa,compareFuncs:k,blendFuncs:L,blendEquations:Fa,stencilOps:f,glTypes:x,orientationType:z};b.optional(function(){ob.isArrayLike=w});Aa&&(ba.backBuffer=[1029],ba.drawBuffer=p(N.maxDrawbuffers,function(c){return 0===c?[0]:p(c,function(c){return 36064+
c})}));var wd=0;return{next:Y,current:ga,procs:function(){var c=O(),b=c.proc("poll"),g=c.proc("refresh"),e=c.block();b(e);g(e);var k=c.shared,u=k.gl,q=k.next,n=k.current;e(n,".dirty=false;");Da(c,b);Da(c,g,null,!0);var v;sa&&(v=c.link(sa));h.oes_vertex_array_object&&g(c.link(h.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<N.maxAttributes;++f){var E=g.def(k.attributes,"[",f,"]"),l=c.cond(E,".buffer");l.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",34962,",",E,".buffer.buffer);",
u,".vertexAttribPointer(",f,",",E,".size,",E,".type,",E,".normalized,",E,".stride,",E,".offset);")["else"](u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",E,".x,",E,".y,",E,".z,",E,".w);",E,".buffer=null;");g(l);sa&&g(v,".vertexAttribDivisorANGLE(",f,",",E,".divisor);")}g(c.shared.vao,".currentVAO=null;",c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);");d(Ya).forEach(function(d){var k=Ya[d],v=e.def(q,".",d),f=c.block();f("if(",v,"){",u,".enable(",k,")}else{",u,".disable(",k,")}",
n,".",d,"=",v,";");g(f);b("if(",v,"!==",n,".",d,"){",f,"}")});d(Ga).forEach(function(d){var k=Ga[d],v=ga[d],f,E,l=c.block();l(u,".",k,"(");w(v)?(k=v.length,f=c.global.def(q,".",d),E=c.global.def(n,".",d),l(p(k,function(c){return f+"["+c+"]"}),");",p(k,function(c){return E+"["+c+"]="+f+"["+c+"];"}).join("")),b("if(",p(k,function(c){return f+"["+c+"]!=="+E+"["+c+"]"}).join("||"),"){",l,"}")):(f=e.def(q,".",d),E=e.def(n,".",d),l(f,");",n,".",d,"=",f,";"),b("if(",f,"!==",E,"){",l,"}"));g(l)});return c.compile()}(),
compile:function(c,b,g,e,k){var u=O();u.stats=u.link(k);d(b["static"]).forEach(function(c){E(u,b,c)});r.forEach(function(b){E(u,c,b)});var q=xa(c,b,g,e,u);R(u,q);lc(u,q);Qa(u,q);return t(u.compile(),{destroy:function(){q.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],
9:[function(I,ia,Pa){function a(d,b){this.id=e++;this.type=d;this.data=b}function ma(d){if(0===d.length)return[];var b=d.charAt(0),e=d.charAt(d.length-1);if(1<d.length&&b===e&&('"'===b||"'"===b))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return ma(d.substr(0,b.index)).concat(ma(b[1])).concat(ma(d.substr(b.index+b[0].length)));b=d.split(".");if(1===b.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,
'\\"')+'"'];d=[];for(e=0;e<b.length;++e)d=d.concat(ma(b[e]));return d}function D(d){return"["+ma(d).join("][")+"]"}function K(d,b){if("function"===typeof d)return new a(0,d);if("number"===typeof d||"boolean"===typeof d)return new a(5,d);if(Array.isArray(d))return new a(6,d.map(function(d,e){return K(d,b+"["+e+"]")}));if(d instanceof a)return d;m(!1,"invalid option type in uniform "+b)}var m=I("./util/check"),e=0;ia.exports={DynamicVariable:a,define:function(d,b){return new a(d,D(b+""))},isDynamic:function(d){return"function"===
typeof d&&!d._reglType||d instanceof a},unbox:K,accessor:D}},{"./util/check":21}],10:[function(I,ia,Pa){var a=I("./util/check"),ma=I("./util/is-typed-array"),D=I("./util/is-ndarray"),K=I("./util/values"),m=I("./constants/primitives.json"),e=I("./constants/usage.json");ia.exports=function(d,b,t,y){function p(b){this.id=J++;w[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function h(e,r,m,h,k,f,U){e.buffer.bind();var z;r?((z=U)||ma(r)&&(!D(r)||ma(r.data))||(z=b.oes_element_index_uint?
5125:5123),t._initBuffer(e.buffer,r,m,z,3)):(d.bufferData(34963,f,m),e.buffer.dtype=z||5121,e.buffer.usage=m,e.buffer.dimension=3,e.buffer.byteLength=f);z=U;if(!U){switch(e.buffer.dtype){case 5121:case 5120:z=5121;break;case 5123:case 5122:z=5123;break;case 5125:case 5124:z=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=z}e.type=z;a(5125!==z||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");r=k;0>r&&(r=e.buffer.byteLength,
5123===z?r>>=1:5125===z&&(r>>=2));e.vertCount=r;r=h;0>h&&(r=4,h=e.buffer.dimension,1===h&&(r=0),2===h&&(r=1),3===h&&(r=4));e.primType=r}function N(b){y.elementsCount--;a(null!==b.buffer,"must not double destroy elements");delete w[b.id];b.buffer.destroy();b.buffer=null}var w={},J=0,aa={uint8:5121,uint16:5123};b.oes_element_index_uint&&(aa.uint32=5125);p.prototype.bind=function(){this.buffer.bind()};var x=[];return{create:function(b,d){function x(b){if(b)if("number"===typeof b)w(b),k.primType=4,k.vertCount=
b|0,k.type=5121;else{var d=null,r=35044,p=-1,B=-1,l=0,t=0;if(Array.isArray(b)||ma(b)||D(b))d=b;else if(a.type(b,"object","invalid arguments for elements"),"data"in b&&(d=b.data,a(Array.isArray(d)||ma(d)||D(d),"invalid data for element buffer")),"usage"in b&&(a.parameter(b.usage,e,"invalid element buffer usage"),r=e[b.usage]),"primitive"in b&&(a.parameter(b.primitive,m,"invalid element buffer primitive"),p=m[b.primitive]),"count"in b&&(a("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),
B=b.count|0),"type"in b&&(a.parameter(b.type,aa,"invalid buffer type"),t=aa[b.type]),"length"in b)l=b.length|0;else if(l=B,5123===t||5122===t)l*=2;else if(5125===t||5124===t)l*=4;h(k,d,r,p,B,l,t)}else w(),k.primType=4,k.vertCount=0,k.type=5121;return x}var w=t.create(null,34963,!0),k=new p(w._buffer);y.elementsCount++;x(b);x._reglType="elements";x._elements=k;x.subdata=function(b,d){w.subdata(b,d);return x};x.destroy=function(){N(k)};return x},createStream:function(b){var d=x.pop();d||(d=new p(t.create(null,
34963,!0,!1)._buffer));h(d,b,35040,-1,-1,0,0);return d},destroyStream:function(b){x.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof p?b._elements:null},clear:function(){K(w).forEach(N)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(I,ia,Pa){var a=I("./util/sorted-object-keys"),ma=I("./util/check");ia.exports=function(D,K){function m(b){ma.type(b,
"string","extension name must be string");b=b.toLowerCase();var d;try{d=e[b]=D.getExtension(b)}catch(m){}return!!d}for(var e={},d=0;d<K.extensions.length;++d){var b=K.extensions[d];if(!m(b))return K.onDestroy(),K.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}K.optionalExtensions.forEach(m);return{extensions:e,restore:function(){a(e).forEach(function(b){if(e[b]&&!m(b))throw Error("(regl): error restoring extension "+
b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(I,ia,Pa){var a=I("./util/check"),ma=I("./util/values"),D=I("./util/extend"),K=[6407,6408],m=[];m[6408]=4;m[6407]=3;var e=[];e[5121]=1;e[5126]=4;e[36193]=2;var d=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ia.exports=function(t,y,p,h,N,w){function J(c,b,d){this.target=c;this.texture=b;this.renderbuffer=
d;var e=c=0;b?(c=b.width,e=b.height):d&&(c=d.width,e=d.height);this.width=c;this.height=e}function aa(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function x(c,b,d){if(c){if(c.texture){c=c.texture._texture;var e=Math.max(1,c.height);a(Math.max(1,c.width)===b&&e===d,"inconsistent width/height for supplied texture")}else c=c.renderbuffer._renderbuffer,a(c.width===b&&c.height===d,"inconsistent width/height for renderbuffer");c.refCount+=1}}function S(c,
b){b&&(b.texture?t.framebufferTexture2D(36160,c,b.target,b.texture._texture.texture,0):t.framebufferRenderbuffer(36160,c,36161,b.renderbuffer._renderbuffer.renderbuffer))}function r(c){var b=3553,d=null,e=null,k=c;"object"===typeof c&&(k=c.data,"target"in c&&(b=c.target|0));a.type(k,"function","invalid attachment data");c=k._reglType;"texture2d"===c?(d=k,a(3553===b)):"textureCube"===c?(d=k,a(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===c?(e=k,b=36161):a.raise("invalid regl object for attachment");
return new J(b,d,e)}function L(c,b,d,e,k){if(d)return c=h.create2D({width:c,height:b,format:e,type:k}),c._texture.refCount=0,new J(3553,c,null);c=N.create({width:c,height:b,format:e});c._renderbuffer.refCount=0;return new J(36161,null,c)}function ha(c){return c&&(c.texture||c.renderbuffer)}function k(c,b,d){c&&(c.texture?c.texture.resize(b,d):c.renderbuffer&&c.renderbuffer.resize(b,d),c.width=b,c.height=d)}function f(){this.id=c++;M[this.id]=this;this.framebuffer=t.createFramebuffer();this.height=
this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function U(c){c.colorAttachments.forEach(aa);aa(c.depthAttachment);aa(c.stencilAttachment);aa(c.depthStencilAttachment)}function z(c){var b=c.framebuffer;a(b,"must not double destroy framebuffer");t.deleteFramebuffer(b);c.framebuffer=null;w.framebufferCount--;delete M[c.id]}function V(c){var d;t.bindFramebuffer(36160,c.framebuffer);var e=c.colorAttachments;for(d=0;d<e.length;++d)S(36064+
d,e[d]);for(d=e.length;d<p.maxColorAttachments;++d)t.framebufferTexture2D(36160,36064+d,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0);t.framebufferTexture2D(36160,36096,3553,null,0);t.framebufferTexture2D(36160,36128,3553,null,0);S(36096,c.depthAttachment);S(36128,c.stencilAttachment);S(33306,c.depthStencilAttachment);c=t.checkFramebufferStatus(36160);t.isContextLost()||36053===c||a.raise("framebuffer configuration not supported, status = "+b[c]);t.bindFramebuffer(36160,l.next?l.next.framebuffer:
null);l.cur=l.next;t.getError()}function B(c,b){function M(c,b){var g;a(l.next!==B,"can not update framebuffer which is currently in use");var k=0,f=0,z=!0,q=!0;g=null;var h=!0,t="rgba",N="uint8",w=1,v=null,G=null,J=null,W=!1;if("number"===typeof c)k=c|0,f=b|0||k;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(f=c.shape,a(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),k=f[0],f=f[1]):("radius"in c&&(k=f=c.radius),"width"in c&&(k=c.width),"height"in c&&
(f=c.height));if("color"in c||"colors"in c)g=c.color||c.colors,Array.isArray(g)&&a(1===g.length||y.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in c&&(w=c.colorCount|0,a(0<w,"invalid color buffer count"));"colorTexture"in c&&(h=!!c.colorTexture,t="rgba4");if("colorType"in c){N=c.colorType;if(h)a(y.oes_texture_float||!("float"===N||"float32"===N),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(y.oes_texture_half_float||!("half float"===
N||"float16"===N),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===N||"float16"===N)a(y.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),t="rgba16f";else if("float"===N||"float32"===N)a(y.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),t="rgba32f";a.oneOf(N,C,"invalid color type")}"colorFormat"in c&&
(t=c.colorFormat,0<=ya.indexOf(t)?h=!0:0<=H.indexOf(t)?h=!1:a.optional(function(){if(h)a.oneOf(c.colorFormat,ya,"invalid color format for texture");else a.oneOf(c.colorFormat,H,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)W=!(!c.depthTexture&&!c.depthStencilTexture),a(!W||y.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?z=c.depth:(v=c.depth,q=!1));"stencil"in c&&("boolean"===typeof c.stencil?
q=c.stencil:(G=c.stencil,z=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?z=q=c.depthStencil:(J=c.depthStencil,q=z=!1))}else k=f=1;var S=null,D=null,ma=null,xa=null;if(Array.isArray(g))S=g.map(r);else if(g)S=[r(g)];else for(S=Array(w),g=0;g<w;++g)S[g]=L(k,f,h,t,N);a(y.webgl_draw_buffers||1>=S.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(S.length<=p.maxColorAttachments,"too many color attachments, not supported");k=k||S[0].width;
f=f||S[0].height;v?D=r(v):z&&!q&&(D=L(k,f,W,"depth","uint32"));G?ma=r(G):q&&!z&&(ma=L(k,f,!1,"stencil","uint8"));J?xa=r(J):!v&&!G&&q&&z&&(xa=L(k,f,W,"depth stencil","depth stencil"));a(1>=!!v+!!G+!!J,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");z=null;for(g=0;g<S.length;++g)x(S[g],k,f),a(!S[g]||S[g].texture&&0<=K.indexOf(S[g].texture._texture.format)||S[g].renderbuffer&&0<=d.indexOf(S[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+g+
" is invalid"),S[g]&&S[g].texture&&(q=m[S[g].texture._texture.format]*e[S[g].texture._texture.type],null===z?z=q:a(z===q,"all color attachments much have the same number of bits per pixel."));x(D,k,f);a(!D||D.texture&&6402===D.texture._texture.format||D.renderbuffer&&33189===D.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");x(ma,k,f);a(!ma||ma.renderbuffer&&36168===ma.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");x(xa,k,
f);a(!xa||xa.texture&&34041===xa.texture._texture.format||xa.renderbuffer&&34041===xa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");U(B);B.width=k;B.height=f;B.colorAttachments=S;B.depthAttachment=D;B.stencilAttachment=ma;B.depthStencilAttachment=xa;M.color=S.map(ha);M.depth=ha(D);M.stencil=ha(ma);M.depthStencil=ha(xa);M.width=B.width;M.height=B.height;V(B);return M}var B=new f;w.framebufferCount++;M(c,b);return D(M,{resize:function(c,b){a(l.next!==B,
"can not resize a framebuffer which is currently in use");var g=Math.max(c|0,1),d=Math.max(b|0||g,1);if(g===B.width&&d===B.height)return M;for(var e=B.colorAttachments,f=0;f<e.length;++f)k(e[f],g,d);k(B.depthAttachment,g,d);k(B.stencilAttachment,g,d);k(B.depthStencilAttachment,g,d);B.width=M.width=g;B.height=M.height=d;V(B);return M},_reglType:"framebuffer",_framebuffer:B,destroy:function(){z(B);U(B)},use:function(c){l.setFBO({framebuffer:M},c)}})}var l={cur:null,next:null,dirty:!1,setFBO:null},ya=
["rgba"],H=["rgba4","rgb565","rgb5 a1"];y.ext_srgb&&H.push("srgba");y.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");y.webgl_color_buffer_float&&H.push("rgba32f");var C=["uint8"];y.oes_texture_half_float&&C.push("half float","float16");y.oes_texture_float&&C.push("float","float32");var c=0,M={};return D(l,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof f)?c:null},create:B,createCube:function(c){function b(c){var g;a(0>d.indexOf(l.next),
"can not update framebuffer which is currently in use");var e={color:null},k=0,f=null;g="rgba";var M="uint8",z=1;if("number"===typeof c)k=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(k=c.shape,a(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),a(k[0]===k[1],"cube framebuffer must be square"),k=k[0]):("radius"in c&&(k=c.radius|0),"width"in c?(k=c.width|0,"height"in c&&a(c.height===k,"must be square")):"height"in c&&(k=c.height|0));if("color"in c||
"colors"in c)f=c.color||c.colors,Array.isArray(f)&&a(1===f.length||y.webgl_draw_buffers,"multiple render targets not supported");f||("colorCount"in c&&(z=c.colorCount|0,a(0<z,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,C,"invalid color type"),M=c.colorType),"colorFormat"in c&&(g=c.colorFormat,a.oneOf(c.colorFormat,ya,"invalid color format for texture")));"depth"in c&&(e.depth=c.depth);"stencil"in c&&(e.stencil=c.stencil);"depthStencil"in c&&(e.depthStencil=c.depthStencil)}else k=
1;if(f)if(Array.isArray(f))for(c=[],g=0;g<f.length;++g)c[g]=f[g];else c=[f];else for(c=Array(z),f={radius:k,format:g,type:M},g=0;g<z;++g)c[g]=h.createCube(f);e.color=Array(c.length);for(g=0;g<c.length;++g)z=c[g],a("function"===typeof z&&"textureCube"===z._reglType,"invalid cube map"),k=k||z.width,a(z.width===k&&z.height===k,"invalid cube map shape"),e.color[g]={target:34069,data:c[g]};for(g=0;6>g;++g){for(z=0;z<c.length;++z)e.color[z].target=34069+g;0<g&&(e.depth=d[0].depth,e.stencil=d[0].stencil,
e.depthStencil=d[0].depthStencil);if(d[g])d[g](e);else d[g]=B(e)}return D(b,{width:k,height:k,color:c})}var d=Array(6);b(c);return D(b,{faces:d,resize:function(c){var g=c|0;a(0<g&&g<=p.maxCubeMapSize,"invalid radius for cube fbo");if(g===b.width)return b;var e=b.color;for(c=0;c<e.length;++c)e[c].resize(g);for(c=0;6>c;++c)d[c].resize(g);b.width=b.height=g;return b},_reglType:"framebufferCube",destroy:function(){d.forEach(function(c){c.destroy()})}})},clear:function(){ma(M).forEach(z)},restore:function(){l.cur=
null;l.next=null;l.dirty=!0;ma(M).forEach(function(c){c.framebuffer=t.createFramebuffer();V(c)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(I,ia,Pa){var a=I("./util/sorted-object-keys"),ma=I("./util/pool");ia.exports=function(D,K){var m=1;K.ext_texture_filter_anisotropic&&(m=D.getParameter(34047));var e=1,d=1;K.webgl_draw_buffers&&(e=D.getParameter(34852),d=D.getParameter(36063));var b=!!K.oes_texture_float;if(b){b=D.createTexture();D.bindTexture(3553,b);D.texImage2D(3553,
0,6408,1,1,0,6408,5126,null);var t=D.createFramebuffer();D.bindFramebuffer(36160,t);D.framebufferTexture2D(36160,36064,3553,b,0);D.bindTexture(3553,null);if(36053!==D.checkFramebufferStatus(36160))b=!1;else{D.viewport(0,0,1,1);D.clearColor(1,0,0,1);D.clear(16384);var y=ma.allocType(5126,4);D.readPixels(0,0,1,1,6408,5126,y);D.getError()?b=!1:(D.deleteFramebuffer(t),D.deleteTexture(b),b=1===y[0]);ma.freeType(y)}}y=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||
/Edge/.test(navigator.userAgent))||(y=D.createTexture(),t=ma.allocType(5121,36),D.activeTexture(33984),D.bindTexture(34067,y),D.texImage2D(34069,0,6408,3,3,0,6408,5121,t),ma.freeType(t),D.bindTexture(34067,null),D.deleteTexture(y),y=!D.getError());return{colorBits:[D.getParameter(3410),D.getParameter(3411),D.getParameter(3412),D.getParameter(3413)],depthBits:D.getParameter(3414),stencilBits:D.getParameter(3415),subpixelBits:D.getParameter(3408),extensions:a(K).filter(function(b){return!!K[b]}),maxAnisotropic:m,
maxDrawbuffers:e,maxColorAttachments:d,pointSizeDims:D.getParameter(33901),lineWidthDims:D.getParameter(33902),maxViewportDims:D.getParameter(3386),maxCombinedTextureUnits:D.getParameter(35661),maxCubeMapSize:D.getParameter(34076),maxRenderbufferSize:D.getParameter(34024),maxTextureUnits:D.getParameter(34930),maxTextureSize:D.getParameter(3379),maxAttributes:D.getParameter(34921),maxVertexUniforms:D.getParameter(36347),maxVertexTextureUnits:D.getParameter(35660),maxVaryingVectors:D.getParameter(36348),
maxFragmentUniforms:D.getParameter(36349),glsl:D.getParameter(35724),renderer:D.getParameter(7937),vendor:D.getParameter(7936),version:D.getParameter(7938),readFloat:b,npotTextureCube:y}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(I,ia,Pa){var a=I("./util/check"),ma=I("./util/is-typed-array");ia.exports=function(D,K,m,e,d,b,t){function y(h){var p;null===K.next?(a(d.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
p=5121):(a(null!==K.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),p=K.next.colorAttachments[0].texture._texture.type,a.optional(function(){b.oes_texture_float?(a(5121===p||5126===p,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===p&&a(t.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===p,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var y=0,J=0,aa=e.framebufferWidth,x=e.framebufferHeight,S=null;ma(h)?S=h:h&&(a.type(h,"object","invalid arguments to regl.read()"),y=h.x|0,J=h.y|0,a(0<=y&&y<e.framebufferWidth,"invalid x offset for regl.read"),a(0<=J&&J<e.framebufferHeight,"invalid y offset for regl.read"),aa=(h.width||e.framebufferWidth-y)|0,x=(h.height||e.framebufferHeight-J)|0,S=h.data||null);S&&(5121===p?a(S instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===p&&a(S instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<aa&&aa+y<=e.framebufferWidth,"invalid width for read pixels");a(0<x&&x+J<=e.framebufferHeight,"invalid height for read pixels");m();h=aa*x*4;S||(5121===p?S=new Uint8Array(h):5126===p&&(S=S||new Float32Array(h)));a.isTypedArray(S,"data buffer for regl.read() must be a typedarray");a(S.byteLength>=h,"data buffer for regl.read() too small");D.pixelStorei(3333,4);D.readPixels(y,J,aa,x,6408,p,S);return S}
function p(b){var d;K.setFBO({framebuffer:b.framebuffer},function(){d=y(b)});return d}return function(b){return b&&"framebuffer"in b?p(b):y(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(I,ia,Pa){var a=I("./util/sorted-object-keys"),ma=I("./util/check"),D=I("./util/values"),K=[];K[32854]=2;K[32855]=2;K[36194]=2;K[33189]=2;K[36168]=1;K[34041]=4;K[35907]=4;K[34836]=16;K[34842]=8;K[34843]=6;ia.exports=function(m,e,d,b,t){function y(b){this.id=w++;this.refCount=1;this.renderbuffer=
b;this.format=32854;this.height=this.width=0;t.profile&&(this.stats={size:0})}function p(d){var e=d.renderbuffer;ma(e,"must not double destroy renderbuffer");m.bindRenderbuffer(36161,null);m.deleteRenderbuffer(e);d.renderbuffer=null;d.refCount=0;delete J[d.id];b.renderbufferCount--}var h={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(h.srgba=35907);e.ext_color_buffer_half_float&&(h.rgba16f=34842,h.rgb16f=34843);e.webgl_color_buffer_float&&(h.rgba32f=
34836);var N=[];a(h).forEach(function(b){N[h[b]]=b});var w=0,J={};y.prototype.decRef=function(){0>=--this.refCount&&p(this)};t.profile&&(b.getTotalRenderbufferSize=function(){var b=0;a(J).forEach(function(d){b+=J[d].stats.size});return b});return{create:function(e,p){function a(b,e){var k=0,f=0,p=32854;"object"===typeof b&&b?("shape"in b?(f=b.shape,ma(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),k=f[0]|0,f=f[1]|0):("radius"in b&&(k=f=b.radius|0),"width"in b&&(k=b.width|0),"height"in
b&&(f=b.height|0)),"format"in b&&(ma.parameter(b.format,h,"invalid renderbuffer format"),p=h[b.format])):"number"===typeof b?(k=b|0,f="number"===typeof e?e|0:k):b?ma.raise("invalid arguments to renderbuffer constructor"):k=f=1;ma(0<k&&0<f&&k<=d.maxRenderbufferSize&&f<=d.maxRenderbufferSize,"invalid renderbuffer size");if(k!==r.width||f!==r.height||p!==r.format)return a.width=r.width=k,a.height=r.height=f,r.format=p,m.bindRenderbuffer(36161,r.renderbuffer),m.renderbufferStorage(36161,p,k,f),ma(0===
m.getError(),"invalid render buffer format"),t.profile&&(r.stats.size=K[r.format]*r.width*r.height),a.format=N[r.format],a}var r=new y(m.createRenderbuffer());J[r.id]=r;b.renderbufferCount++;a(e,p);a.resize=function(b,e){var k=b|0,f=e|0||k;if(k===r.width&&f===r.height)return a;ma(0<k&&0<f&&k<=d.maxRenderbufferSize&&f<=d.maxRenderbufferSize,"invalid renderbuffer size");a.width=r.width=k;a.height=r.height=f;m.bindRenderbuffer(36161,r.renderbuffer);m.renderbufferStorage(36161,r.format,k,f);ma(0===m.getError(),
"invalid render buffer format");t.profile&&(r.stats.size=K[r.format]*r.width*r.height);return a};a._reglType="renderbuffer";a._renderbuffer=r;t.profile&&(a.stats=r.stats);a.destroy=function(){r.decRef()};return a},clear:function(){D(J).forEach(p)},restore:function(){D(J).forEach(function(b){b.renderbuffer=m.createRenderbuffer();m.bindRenderbuffer(36161,b.renderbuffer);m.renderbufferStorage(36161,b.format,b.width,b.height)});m.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,
"./util/values":36}],16:[function(I,ia,Pa){var a=I("./util/sorted-object-keys"),ma=I("./util/check"),D=I("./util/extend"),K=I("./util/values");ia.exports=function(m,e,d,b){function t(b,d,e,k){this.name=b;this.id=d;this.location=e;this.info=k}function y(b,d){for(var e=0;e<b.length;++e)if(b[e].id===d.id){b[e].location=d.location;return}b.push(d)}function p(b,d,h){var k=35632===b?w:J,f=k[d];if(!f){var p=e.str(d),f=m.createShader(b);m.shaderSource(f,p);m.compileShader(f);ma.shaderError(m,f,p,b,h);k[d]=
f}return f}function h(d,e){this.id=S++;this.fragId=d;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function N(d,h,a){var k;k=p(35632,d.fragId);var f=p(35633,d.vertId),x=d.program=m.createProgram();m.attachShader(x,k);m.attachShader(x,f);if(a)for(k=0;k<a.length;++k)f=a[k],m.bindAttribLocation(x,f[0],f[1]);m.linkProgram(x);ma.linkError(m,x,e.str(d.fragId),e.str(d.vertId),h);a=m.getProgramParameter(x,35718);
b.profile&&(d.stats.uniformsCount=a);f=d.uniforms;for(k=0;k<a;++k)if(h=m.getActiveUniform(x,k))if(1<h.size)for(var z=0;z<h.size;++z){var N=h.name.replace("[0]","["+z+"]");y(f,new t(N,e.id(N),m.getUniformLocation(x,N),h))}else y(f,new t(h.name,e.id(h.name),m.getUniformLocation(x,h.name),h));a=m.getProgramParameter(x,35721);b.profile&&(d.stats.attributesCount=a);d=d.attributes;for(k=0;k<a;++k)(h=m.getActiveAttrib(x,k))&&y(d,new t(h.name,e.id(h.name),m.getAttribLocation(x,h.name),h))}var w={},J={},aa=
{},x=[],S=0;b.profile&&(d.getMaxUniformsCount=function(){var b=0;x.forEach(function(d){d.stats.uniformsCount>b&&(b=d.stats.uniformsCount)});return b},d.getMaxAttributesCount=function(){var b=0;x.forEach(function(d){d.stats.attributesCount>b&&(b=d.stats.attributesCount)});return b});return{clear:function(){var b=m.deleteShader.bind(m);K(w).forEach(b);w={};K(J).forEach(b);J={};x.forEach(function(b){m.deleteProgram(b.program)});x.length=0;aa={};d.shaderCount=0},program:function(b,e,p,k){ma.command(0<=
b,"missing vertex shader",p);ma.command(0<=e,"missing fragment shader",p);var f=aa[e];f||(f=aa[e]={});var t=f[b];if(t&&(t.refCount++,!k))return t;var z=new h(e,b);d.shaderCount++;N(z,p,k);t||(f[b]=z);x.push(z);return D(z,{destroy:function(){z.refCount--;if(0>=z.refCount){m.deleteProgram(z.program);var b=x.indexOf(z);x.splice(b,1);d.shaderCount--}0>=f[z.vertId].refCount&&(m.deleteShader(J[z.vertId]),delete J[z.vertId],delete aa[z.fragId][z.vertId]);a(aa[z.fragId]).length||(m.deleteShader(w[z.fragId]),
delete w[z.fragId],delete aa[z.fragId])}})},restore:function(){w={};J={};for(var b=0;b<x.length;++b)N(x[b],null,x[b].attributes.map(function(b){return[b.location,b.name]}))},shader:p,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(I,ia,Pa){ia.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(I,
ia,Pa){ia.exports=function(){var a={"":0},ma=[""];return{id:function(D){var K=a[D];if(K)return K;K=a[D]=ma.length;ma.push(D);return K},str:function(a){return ma[a]}}}},{}],19:[function(I,ia,Pa){function a(c){return"[object "+c+"]"}function ma(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function D(c){return Array.isArray(c)&&0!==c.length&&aa(c[0])?!0:!1}function K(c){return Object.prototype.toString.call(c)}function m(c){if(!c)return!1;var b=K(c);return 0<=ya.indexOf(b)?!0:ma(c)||
D(c)||N(c)}function e(c,b){36193===c.type?(c.data=J(b),w.freeType(b)):c.data=b}function d(c,b,g,d,e,f){c="undefined"!==typeof C[c]?C[c]:k[c]*H[b];f&&(c*=6);if(e){for(d=0;1<=g;)d+=c*g*g,g/=2;return d}return c*g*d}var b=I("./util/sorted-object-keys"),t=I("./util/check"),y=I("./util/extend"),p=I("./util/values"),h=I("./util/is-typed-array"),N=I("./util/is-ndarray"),w=I("./util/pool"),J=I("./util/to-half-float"),aa=I("./util/is-array-like"),x=I("./util/flatten"),S=I("./util/is-pow2");Pa=I("./constants/arraytypes.json");
var r=I("./constants/arraytypes.json"),L=[9984,9986,9985,9987],ha=[0,6409,6410,6407,6408],k={};k[6409]=k[6406]=k[6402]=1;k[34041]=k[6410]=2;k[6407]=k[35904]=3;k[6408]=k[35906]=4;var f=a("HTMLCanvasElement"),U=a("OffscreenCanvas"),z=a("CanvasRenderingContext2D"),V=a("ImageBitmap"),B=a("HTMLImageElement"),l=a("HTMLVideoElement"),ya=b(Pa).concat([f,U,z,V,B,l]),H=[];H[5121]=1;H[5126]=4;H[36193]=2;H[5123]=2;H[5125]=4;var C=[];C[32854]=2;C[32855]=2;C[36194]=2;C[34041]=4;C[33776]=.5;C[33777]=.5;C[33778]=
1;C[33779]=1;C[35986]=.5;C[35987]=1;C[34798]=1;C[35840]=.5;C[35841]=.25;C[35842]=.5;C[35843]=.25;C[36196]=.5;ia.exports=function(c,M,g,a,A,C,H){function X(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function da(c,b){c.internalformat=b.internalformat;c.format=b.format;c.type=b.type;c.compressed=b.compressed;c.premultiplyAlpha=b.premultiplyAlpha;c.flipY=b.flipY;
c.unpackAlignment=b.unpackAlignment;c.colorSpace=b.colorSpace;c.width=b.width;c.height=b.height;c.channels=b.channels}function T(c,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(t.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),c.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(t.type(b.flipY,"boolean","invalid texture flip"),c.flipY=b.flipY);"alignment"in b&&(t.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),c.unpackAlignment=b.alignment);"colorSpace"in b&&
(t.parameter(b.colorSpace,Za,"invalid colorSpace"),c.colorSpace=Za[b.colorSpace]);if("type"in b){var d=b.type;t(M.oes_texture_float||!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");t(M.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");t(M.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
t.parameter(d,u,"invalid texture type");c.type=u[d]}var e=c.width,q=c.height,v=c.channels,d=!1;"shape"in b?(t(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),e=b.shape[0],q=b.shape[1],3===b.shape.length&&(v=b.shape[2],t(0<v&&4>=v,"invalid number of channels"),d=!0),t(0<=e&&e<=g.maxTextureSize,"invalid width"),t(0<=q&&q<=g.maxTextureSize,"invalid height")):("radius"in b&&(e=q=b.radius,t(0<=e&&e<=g.maxTextureSize,"invalid radius")),"width"in b&&(e=b.width,t(0<=e&&e<=g.maxTextureSize,
"invalid width")),"height"in b&&(q=b.height,t(0<=q&&q<=g.maxTextureSize,"invalid height")),"channels"in b&&(v=b.channels,t(0<v&&4>=v,"invalid number of channels"),d=!0));c.width=e|0;c.height=q|0;c.channels=v|0;e=!1;"format"in b&&(e=b.format,t(M.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),t.parameter(e,n,"invalid texture format"),q=c.internalformat=n[e],c.format=Fa[q],e in u&&!("type"in b)&&(c.type=
u[e]),e in R&&(c.compressed=!0),e=!0);!d&&e?c.channels=k[c.format]:d&&!e?c.channels!==ha[c.format]&&(c.format=c.internalformat=ha[c.channels]):e&&d&&t(c.channels===k[c.format],"number of channels inconsistent with specified format")}}function Q(b){c.pixelStorei(37440,b.flipY);c.pixelStorei(37441,b.premultiplyAlpha);c.pixelStorei(37443,b.colorSpace);c.pixelStorei(3317,b.unpackAlignment)}function F(){X.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function q(c,b){var d=null;m(b)?d=b:b&&(t.type(b,"object","invalid pixel data type"),T(c,b),"x"in b&&(c.xOffset=b.x|0),"y"in b&&(c.yOffset=b.y|0),m(b.data)&&(d=b.data));t(!c.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){t(!d,"can not specify copy and data field for the same texture");var k=A.viewportWidth,u=A.viewportHeight;c.width=c.width||k-c.xOffset;c.height=c.height||u-c.yOffset;c.needsCopy=!0;t(0<=c.xOffset&&c.xOffset<k&&0<=c.yOffset&&
c.yOffset<u&&0<c.width&&c.width<=k&&0<c.height&&c.height<=u,"copy texture read out of bounds")}else if(!d)c.width=c.width||1,c.height=c.height||1,c.channels=c.channels||4;else if(h(d))c.channels=c.channels||4,c.data=d,"type"in b||5121!==c.type||(c.type=r[Object.prototype.toString.call(d)]|0);else if(ma(d)){c.channels=c.channels||4;k=d;u=k.length;switch(c.type){case 5121:case 5123:case 5125:case 5126:u=w.allocType(c.type,u);u.set(k);c.data=u;break;case 36193:c.data=J(k);break;default:t.raise("unsupported texture type, must specify a typed array")}c.alignment=
1;c.needsFree=!0}else if(N(d)){k=d.data;Array.isArray(k)||5121!==c.type||(c.type=r[Object.prototype.toString.call(k)]|0);var u=d.shape,q=d.stride,v,n,E,Z;3===u.length?(E=u[2],Z=q[2]):(t(2===u.length,"invalid ndarray pixel data, must be 2 or 3D"),Z=E=1);v=u[0];n=u[1];u=q[0];q=q[1];c.alignment=1;c.width=v;c.height=n;c.channels=E;c.format=c.internalformat=ha[E];c.needsFree=!0;v=Z;d=d.offset;E=c.width;Z=c.height;n=c.channels;for(var R=w.allocType(36193===c.type?5126:c.type,E*Z*n),M=0,ta=0;ta<Z;++ta)for(var Ma=
0;Ma<E;++Ma)for(var Fa=0;Fa<n;++Fa)R[M++]=k[u*Ma+q*ta+v*Fa+d];e(c,R)}else if(K(d)===f||K(d)===U||K(d)===z)K(d)===f||K(d)===U?c.element=d:c.element=d.canvas,c.width=c.element.width,c.height=c.element.height,c.channels=4;else if(K(d)===V)c.element=d,c.width=d.width,c.height=d.height,c.channels=4;else if(K(d)===B)c.element=d,c.width=d.naturalWidth,c.height=d.naturalHeight,c.channels=4;else if(K(d)===l)c.element=d,c.width=d.videoWidth,c.height=d.videoHeight,c.channels=4;else if(D(d)){k=c.width||d[0].length;
u=c.height||d.length;q=c.channels;q=aa(d[0][0])?q||d[0][0].length:q||1;v=x.shape(d);E=1;for(Z=0;Z<v.length;++Z)E*=v[Z];E=w.allocType(36193===c.type?5126:c.type,E);x.flatten(d,v,"",E);e(c,E);c.alignment=1;c.width=k;c.height=u;c.channels=q;c.format=c.internalformat=ha[q];c.needsFree=!0}5126===c.type?t(0<=g.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===c.type&&t(0<=g.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function O(b,d,g,e,k){var u=b.element,q=b.data,v=b.internalformat,n=b.format,f=b.type,E=b.width,l=b.height;Q(b);u?c.texSubImage2D(d,k,g,e,n,f,u):b.compressed?c.compressedTexSubImage2D(d,k,g,e,v,E,l,q):b.needsCopy?(a(),c.copyTexSubImage2D(d,k,g,e,b.xOffset,b.yOffset,E,l)):c.texSubImage2D(d,k,g,e,E,l,n,f,q)}function P(){return sa.pop()||new F}function qa(c){c.needsFree&&w.freeType(c.data);F.call(c);sa.push(c)}function oa(){X.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function v(c,b,d){var g=c.images[0]=P();c.mipmask=1;g.width=c.width=b;g.height=c.height=d;g.channels=c.channels=4}function G(c,b){var d=null;if(m(b))d=c.images[0]=P(),da(d,c),q(d,b),c.mipmask=1;else if(T(c,b),Array.isArray(b.mipmap))for(var g=b.mipmap,e=0;e<g.length;++e)d=c.images[e]=P(),da(d,c),d.width>>=e,d.height>>=e,q(d,g[e]),c.mipmask|=1<<e;else d=c.images[0]=P(),da(d,c),q(d,b),c.mipmask=1;da(c,c.images[0]);!c.compressed||33776!==c.internalformat&&33777!==c.internalformat&&33778!==
c.internalformat&&33779!==c.internalformat||t(0===c.width%4&&0===c.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ca(b,d){for(var g=b.images,e=0;e<g.length&&g[e];++e){var k=g[e],u=d,q=e,v=k.element,n=k.data,f=k.internalformat,E=k.format,l=k.type,Z=k.width,R=k.height;Q(k);v?c.texImage2D(u,q,E,E,l,v):k.compressed?c.compressedTexImage2D(u,q,f,Z,R,0,n):k.needsCopy?(a(),c.copyTexImage2D(u,q,E,k.xOffset,k.yOffset,Z,R,0)):c.texImage2D(u,
q,E,Z,R,0,E,l,n||null)}}function W(){var c=Aa.pop()||new oa;X.call(c);for(var b=c.mipmask=0;16>b;++b)c.images[b]=null;return c}function la(c){for(var b=c.images,d=0;d<b.length;++d)b[d]&&qa(b[d]),b[d]=null;Aa.push(c)}function ra(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ya(c,b){if("min"in b){var d=b.min;t.parameter(d,zb);c.minFilter=zb[d];0<=L.indexOf(c.minFilter)&&!("faces"in b)&&(c.genMipmaps=!0)}"mag"in b&&
(d=b.mag,t.parameter(d,Z),c.magFilter=Z[d]);var d=c.wrapS,e=c.wrapT;if("wrap"in b){var k=b.wrap;"string"===typeof k?(t.parameter(k,Ma),d=e=Ma[k]):Array.isArray(k)&&(t.parameter(k[0],Ma),t.parameter(k[1],Ma),d=Ma[k[0]],e=Ma[k[1]])}else"wrapS"in b&&(d=b.wrapS,t.parameter(d,Ma),d=Ma[d]),"wrapT"in b&&(e=b.wrapT,t.parameter(e,Ma),e=Ma[e]);c.wrapS=d;c.wrapT=e;"anisotropic"in b&&(d=b.anisotropic,t("number"===typeof d&&1<=d&&d<=g.maxAnisotropic,"aniso samples must be between 1 and "),c.anisotropic=b.anisotropic);
if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":t.parameter(b.mipmap,Ba,"invalid mipmap hint");c.mipmapHint=Ba[b.mipmap];d=c.genMipmaps=!0;break;case "boolean":d=c.genMipmaps=b.mipmap;break;case "object":t(Array.isArray(b.mipmap),"invalid mipmap type");c.genMipmaps=!1;d=!0;break;default:t.raise("invalid mipmap type")}!d||"min"in b||(c.minFilter=9984)}}function xa(b,d){c.texParameteri(d,10241,b.minFilter);c.texParameteri(d,10240,b.magFilter);c.texParameteri(d,10242,b.wrapS);c.texParameteri(d,
10243,b.wrapT);M.ext_texture_filter_anisotropic&&c.texParameteri(d,34046,b.anisotropic);b.genMipmaps&&(c.hint(33170,b.mipmapHint),c.generateMipmap(d))}function ea(b){X.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ea++;this.refCount=1;this.target=b;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ra;H.profile&&(this.stats={size:0})}function Da(b){c.activeTexture(33984);c.bindTexture(b.target,b.texture)}function ja(){var b=va[0];b?c.bindTexture(b.target,b.texture):
c.bindTexture(3553,null)}function pa(b){var d=b.texture;t(d,"must not double destroy texture");var g=b.unit,e=b.target;0<=g&&(c.activeTexture(33984+g),c.bindTexture(e,null),va[g]=null);c.deleteTexture(d);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ga[b.id];C.textureCount--}var Ba={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ma={repeat:10497,clamp:33071,mirror:33648},Z={nearest:9728,linear:9729},zb=y({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},Z),Za={none:0,browser:37444},u={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},n={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},R={};M.ext_srgb&&(n.srgb=35904,n.srgba=35906);M.oes_texture_float&&(u.float32=u["float"]=5126);M.oes_texture_half_float&&(u.float16=u["half float"]=36193);M.webgl_depth_texture&&(y(n,{depth:6402,"depth stencil":34041}),y(u,{uint16:5123,uint32:5125,
"depth stencil":34042}));M.webgl_compressed_texture_s3tc&&y(R,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});M.webgl_compressed_texture_atc&&y(R,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});M.webgl_compressed_texture_pvrtc&&y(R,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});M.webgl_compressed_texture_etc1&&(R["rgb etc1"]=36196);var ua=Array.prototype.slice.call(c.getParameter(34467));
b(R).forEach(function(c){var b=R[c];0<=ua.indexOf(b)&&(n[c]=b)});var wa=b(n);g.textureFormats=wa;var Qa=[];b(n).forEach(function(c){Qa[n[c]]=c});var lc=[];b(u).forEach(function(c){lc[u[c]]=c});var fa=[];b(Z).forEach(function(c){fa[Z[c]]=c});var E=[];b(zb).forEach(function(c){E[zb[c]]=c});var ta=[];b(Ma).forEach(function(c){ta[Ma[c]]=c});var Fa=wa.reduce(function(c,b){var d=n[b];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||M.ext_srgb&&(35904===d||35906===d)?c[d]=d:32855===d||0<=b.indexOf("rgba")?
c[d]=6408:c[d]=6407;return c},{}),sa=[],Aa=[],Ea=0,ga={},Y=g.maxTextureUnits,va=Array(Y).map(function(){return null});y(ea.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var d=0;d<Y;++d){var g=va[d];if(g){if(0<g.bindCount)continue;g.unit=-1}va[d]=this;b=d;break}b>=Y&&t.raise("insufficient number of texture units");H.profile&&C.maxTextureUnits<b+1&&(C.maxTextureUnits=b+1);this.unit=b;c.activeTexture(33984+b);c.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});H.profile&&(C.getTotalTextureSize=function(){var c=0;b(ga).forEach(function(b){c+=ga[b].stats.size});return c});return{create2D:function(b,e){function k(c,b){var e=u.texInfo;ra.call(e);var q=W();"number"===typeof c?"number"===typeof b?v(q,c|0,b|0):v(q,c|0,c|0):c?(t.type(c,"object","invalid arguments to regl.texture"),ya(e,c),G(q,c)):v(q,1,1);e.genMipmaps&&(q.mipmask=(q.width<<1)-1);u.mipmask=q.mipmask;da(u,q);t.texture2D(e,q,g);u.internalformat=q.internalformat;
k.width=q.width;k.height=q.height;Da(u);ca(q,3553);xa(e,3553);ja();la(q);H.profile&&(u.stats.size=d(u.internalformat,u.type,q.width,q.height,e.genMipmaps,!1));k.format=Qa[u.internalformat];k.type=lc[u.type];k.mag=fa[e.magFilter];k.min=E[e.minFilter];k.wrapS=ta[e.wrapS];k.wrapT=ta[e.wrapT];return k}var u=new ea(3553);ga[u.id]=u;C.textureCount++;k(b,e);k.subimage=function(c,b,d,g){t(!!c,"must specify image data");b|=0;d|=0;g|=0;var e=P();da(e,u);e.width=0;e.height=0;q(e,c);e.width=e.width||(u.width>>
g)-b;e.height=e.height||(u.height>>g)-d;t(u.type===e.type&&u.format===e.format&&u.internalformat===e.internalformat,"incompatible format for texture.subimage");t(0<=b&&0<=d&&b+e.width<=u.width&&d+e.height<=u.height,"texture.subimage write out of bounds");t(u.mipmask&1<<g,"missing mipmap data");t(e.data||e.element||e.needsCopy,"missing image data");Da(u);O(e,3553,b,d,g);ja();qa(e);return k};k.resize=function(b,g){var e=b|0,q=g|0||e;if(e===u.width&&q===u.height)return k;k.width=u.width=e;k.height=u.height=
q;Da(u);for(var v=0;u.mipmask>>v;++v){var n=e>>v,f=q>>v;if(!n||!f)break;c.texImage2D(3553,v,u.format,n,f,0,u.format,u.type,null)}ja();H.profile&&(u.stats.size=d(u.internalformat,u.type,e,q,!1,!1));return k};k._reglType="texture2d";k._texture=u;H.profile&&(k.stats=u.stats);k.destroy=function(){u.decRef()};return k},createCube:function(b,e,k,u,n,f){function l(c,b,e,k,u,q){var n,f=Z.texInfo;ra.call(f);for(n=0;6>n;++n)R[n]=W();if("number"!==typeof c&&c)if("object"===typeof c)if(b)G(R[0],c),G(R[1],b),
G(R[2],e),G(R[3],k),G(R[4],u),G(R[5],q);else if(ya(f,c),T(Z,c),"faces"in c)for(c=c.faces,t(Array.isArray(c)&&6===c.length,"cube faces must be a length 6 array"),n=0;6>n;++n)t("object"===typeof c[n]&&!!c[n],"invalid input for cube map face"),da(R[n],Z),G(R[n],c[n]);else for(n=0;6>n;++n)G(R[n],c);else t.raise("invalid arguments to cube map");else for(c=c|0||1,n=0;6>n;++n)v(R[n],c,c);da(Z,R[0]);t.optional(function(){g.npotTextureCube||t(S(Z.width)&&S(Z.height),"your browser does not support non power or two texture dimensions")});
Z.mipmask=f.genMipmaps?(R[0].width<<1)-1:R[0].mipmask;t.textureCube(Z,f,R,g);Z.internalformat=R[0].internalformat;l.width=R[0].width;l.height=R[0].height;Da(Z);for(n=0;6>n;++n)ca(R[n],34069+n);xa(f,34067);ja();H.profile&&(Z.stats.size=d(Z.internalformat,Z.type,l.width,l.height,f.genMipmaps,!0));l.format=Qa[Z.internalformat];l.type=lc[Z.type];l.mag=fa[f.magFilter];l.min=E[f.minFilter];l.wrapS=ta[f.wrapS];l.wrapT=ta[f.wrapT];for(n=0;6>n;++n)la(R[n]);return l}var Z=new ea(34067);ga[Z.id]=Z;C.cubeCount++;
var R=Array(6);l(b,e,k,u,n,f);l.subimage=function(c,b,d,g,e){t(!!b,"must specify image data");t("number"===typeof c&&c===(c|0)&&0<=c&&6>c,"invalid face");d|=0;g|=0;e|=0;var k=P();da(k,Z);k.width=0;k.height=0;q(k,b);k.width=k.width||(Z.width>>e)-d;k.height=k.height||(Z.height>>e)-g;t(Z.type===k.type&&Z.format===k.format&&Z.internalformat===k.internalformat,"incompatible format for texture.subimage");t(0<=d&&0<=g&&d+k.width<=Z.width&&g+k.height<=Z.height,"texture.subimage write out of bounds");t(Z.mipmask&
1<<e,"missing mipmap data");t(k.data||k.element||k.needsCopy,"missing image data");Da(Z);O(k,34069+c,d,g,e);ja();qa(k);return l};l.resize=function(b){b|=0;if(b!==Z.width){l.width=Z.width=b;l.height=Z.height=b;Da(Z);for(var g=0;6>g;++g)for(var e=0;Z.mipmask>>e;++e)c.texImage2D(34069+g,e,Z.format,b>>e,b>>e,0,Z.format,Z.type,null);ja();H.profile&&(Z.stats.size=d(Z.internalformat,Z.type,l.width,l.height,!1,!0));return l}};l._reglType="textureCube";l._texture=Z;H.profile&&(l.stats=Z.stats);l.destroy=function(){Z.decRef()};
return l},clear:function(){for(var b=0;b<Y;++b)c.activeTexture(33984+b),c.bindTexture(3553,null),va[b]=null;p(ga).forEach(pa);C.cubeCount=0;C.textureCount=0},getTexture:function(c){return null},restore:function(){for(var b=0;b<Y;++b){var d=va[b];d&&(d.bindCount=0,d.unit=-1,va[b]=null)}p(ga).forEach(function(b){b.texture=c.createTexture();c.bindTexture(b.target,b.texture);for(var d=0;32>d;++d)if(0!==(b.mipmask&1<<d))if(3553===b.target)c.texImage2D(3553,d,b.internalformat,b.width>>d,b.height>>d,0,b.internalformat,
b.type,null);else for(var g=0;6>g;++g)c.texImage2D(34069+g,d,b.internalformat,b.width>>d,b.height>>d,0,b.internalformat,b.type,null);xa(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<Y;++b){var d=va[b];d&&(d.bindCount=0,d.unit=-1,va[b]=null);c.activeTexture(33984+b);c.bindTexture(3553,null);c.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(I,ia,Pa){ia.exports=function(a,ma){function D(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function K(e,m,a){var t=d.pop()||new D;t.startQueryIndex=e;t.endQueryIndex=m;t.sum=0;t.stats=a;b.push(t)}if(!ma.ext_disjoint_timer_query)return null;var m=[],e=[],d=[],b=[],t=[],y=[];return{beginQuery:function(b){var d=m.pop()||ma.ext_disjoint_timer_query.createQueryEXT();ma.ext_disjoint_timer_query.beginQueryEXT(35007,
d);e.push(d);K(e.length-1,e.length,b)},endQuery:function(){ma.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:K,update:function(){var p,h;p=e.length;if(0!==p){y.length=Math.max(y.length,p+1);t.length=Math.max(t.length,p+1);t[0]=0;var a=y[0]=0;for(h=p=0;h<e.length;++h){var w=e[h];ma.ext_disjoint_timer_query.getQueryObjectEXT(w,34919)?(a+=ma.ext_disjoint_timer_query.getQueryObjectEXT(w,34918),m.push(w)):e[p++]=w;t[h+1]=a;y[h+1]=p}e.length=p;for(h=p=0;h<b.length;++h){var a=b[h],J=a.startQueryIndex,
w=a.endQueryIndex;a.sum+=t[w]-t[J];J=y[J];w=y[w];w===J?(a.stats.gpuTime+=a.sum/1E6,d.push(a)):(a.startQueryIndex=J,a.endQueryIndex=w,b[p++]=a)}b.length=p}},getNumPendingQueries:function(){return e.length},clear:function(){m.push.apply(m,e);for(var b=0;b<m.length;b++)ma.ext_disjoint_timer_query.deleteQueryEXT(m[b]);e.length=0;m.length=0},restore:function(){e.length=0;m.length=0}}}},{}],21:[function(I,ia,Pa){function a(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function ma(b){b=Error("(regl) "+
b);console.error(b);throw b;}function D(b,d){b||ma(d)}function K(b){return b?": "+b:""}function m(b,d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function e(b,d,e){0>d.indexOf(b)&&ma("invalid value"+K(e)+". must be one of: "+d)}function d(b,
d){for(b+="";b.length<d;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function t(b,d){this.number=b;this.line=d;this.errors=[]}function y(b,d,e){this.file=b;this.line=d;this.message=e}function p(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function h(){var b=Error(),b=(b.stack||b).toString(),d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);
return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function N(d,e){var k=d.split("\n"),f=1,l=0,r={unknown:new b,0:new b};r.unknown.name=r[0].name=e||p();r.unknown.lines.push(new t(0,""));for(var m=0;m<k.length;++m){var h=k[m],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(h);if(c)switch(c[1]){case "line":if(c=/(\d+)(\s+\d+)?/.exec(c[2]))f=c[1]|0,c[2]&&(l=c[2]|0,l in r||(r[l]=new b));break;case "define":if(c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]))r[l].name=c[1]?a(c[2]):c[2]}r[l].lines.push(new t(f++,
h))}L(r).forEach(function(c){var b=r[c];b.lines.forEach(function(c){b.index[c.number]=c})});return r}function w(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);e?d.push(new y(e[1]|0,e[2]|0,e[3].trim())):0<b.length&&d.push(new y("unknown",0,b))}});return d}function J(b,d){d.forEach(function(d){var e=b[d.file];if(e){var k=e.index[d.line];if(k){k.errors.push(d);e.hasErrors=!0;return}}b.unknown.hasErrors=!0;b.unknown.lines[0].errors.push(d)})}
function aa(b){b._commandRef=p()}function x(b,d){var e=h();ma(b+" in command "+(d||p())+("unknown"===e?"":" called from "+e))}function S(b,d,e,k){m(b,d)||x("invalid parameter type"+K(e)+". expected "+d+", got "+typeof b,k||p())}function r(b,d){return 32820===b||32819===b||33635===b?2:34042===b?4:f[b]*d}var L=I("./sorted-object-keys"),ha=I("./is-typed-array");I=I("./extend");var k="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),f={};f[5120]=f[5121]=
1;f[5122]=f[5123]=f[36193]=f[33635]=f[32819]=f[32820]=2;f[5124]=f[5125]=f[5126]=f[34042]=4;ia.exports=I(D,{optional:function(b){b()},raise:ma,commandRaise:x,command:function(b,d,e){b||x(d,e||p())},parameter:function(b,d,e){b in d||ma("unknown parameter ("+b+")"+K(e)+". possible values: "+L(d).join())},commandParameter:function(b,d,e,k){b in d||x("unknown parameter ("+b+")"+K(e)+". possible values: "+L(d).join(),k||p())},constructor:function(b){L(b).forEach(function(b){0>k.indexOf(b)&&ma('invalid regl constructor argument "'+
b+'". must be one of '+k)})},type:function(b,d,e){m(b,d)||ma("invalid parameter type"+K(e)+". expected "+d+", got "+typeof b)},commandType:S,isTypedArray:function(b,d){ha(b)||ma("invalid parameter type"+K(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||ma("invalid parameter type, ("+b+")"+K(d)+". must be a nonnegative integer")},oneOf:e,shaderError:function(b,e,k,f,l){if(!b.getShaderParameter(e,b.COMPILE_STATUS)){e=b.getShaderInfoLog(e);b=f===b.FRAGMENT_SHADER?"fragment":"vertex";
S(k,"string",b+" shader source must be a string",l);var r=N(k,l);k=w(e);J(r,k);L(r).forEach(function(b){function e(c,b){k.push(c);g.push(b||"")}var c=r[b];if(c.hasErrors){var k=[""],g=[""];e("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(c){if(0<c.errors.length){e(d(c.number,4)+"|  ","background-color:yellow; font-weight:bold");e(c.line+"\n","color:red; background-color:yellow; font-weight:bold");var b=0;c.errors.forEach(function(g){g=
g.message;var k=/^\s*'(.*)'\s*:\s*(.*)$/.exec(g);if(k){var f=k[1];g=k[2];switch(f){case "assign":f="="}b=Math.max(c.line.indexOf(f,b),0)}else b=0;e(d("| ",6));e(d("^^^",b+3)+"\n","font-weight:bold");e(d("| ",6));e(g+"\n","font-weight:bold")});e(d("| ",6)+"\n")}else e(d(c.number,4)+"|  "),e(c.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(k.join("")):(g[0]=k.join("%c"),console.log.apply(console,g))}});D.raise("Error compiling "+b+" shader, "+r[0].name)}},linkError:function(b,
d,e,k,f){b.getProgramParameter(d,b.LINK_STATUS)||(b=b.getProgramInfoLog(d),e=N(e,f),k='Error linking program with vertex shader, "'+N(k,f)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+k+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(k+"\n"+b),D.raise(k))},callSite:h,saveCommandRef:aa,saveDrawInfo:function(b,d,e,k){function f(b){return b?k.id(b):0}function r(b,c){L(c).forEach(function(c){b[k.id(c)]=!0})}aa(b);
b._fragId=f(b["static"].frag);b._vertId=f(b["static"].vert);var m=b._uniformSet={};r(m,d["static"]);r(m,d.dynamic);d=b._attributeSet={};r(d,e["static"]);r(d,e.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,d,k){b.texture?e(b.texture._texture.internalformat,d,"unsupported texture format for attachment"):e(b.renderbuffer._renderbuffer.format,k,"unsupported renderbuffer format for attachment")},guessCommand:p,
texture2D:function(b,d,e){var k=d.width,f=d.height,m=d.channels;D(0<k&&k<=e.maxTextureSize&&0<f&&f<=e.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||D(!(k&k-1)&&!!k&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==k&&1!==f&&D(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(D(!(k&k-1)&&!!k&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),
D(d.mipmask===(k<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&D(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),D(!b.genMipmaps,"mipmap generation not supported with float textures"));var h=d.images;for(e=0;16>e;++e)if(h[e]){var a=k>>e,c=f>>e;D(d.mipmask&1<<e,"missing mipmap data");var M=h[e];D(M.width===a&&M.height===c,"invalid shape for mip images");D(M.format===d.format&&M.internalformat===
d.internalformat&&M.type===d.type,"incompatible type for mip image");!M.compressed&&M.data&&(a=Math.ceil(r(M.type,m)*a/M.unpackAlignment)*M.unpackAlignment,D(M.data.byteLength===a*c,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||D(0===(d.mipmask&1<<e),"extra mipmap data");d.compressed&&D(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,d,e,k){var f=b.width,m=b.height,h=b.channels;D(0<f&&f<=k.maxTextureSize&&
0<m&&m<=k.maxTextureSize,"invalid texture shape");D(f===m,"cube map must be square");D(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(k=0;k<e.length;++k){var a=e[k];D(a.width===f&&a.height===m,"inconsistent cube map face shape");d.genMipmaps&&(D(!a.compressed,"can not generate mipmap for compressed textures"),D(1===a.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=a.images,M=0;16>M;++M){var g=c[M];if(g){var p=f>>M,t=m>>M;D(a.mipmask&1<<M,"missing mipmap data");
D(g.width===p&&g.height===t,"invalid shape for mip images");D(g.format===b.format&&g.internalformat===b.internalformat&&g.type===b.type,"incompatible type for mip image");g.compressed||g.data&&D(g.data.byteLength===p*t*Math.max(r(g.type,h),g.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(I,ia,Pa){ia.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(I,ia,Pa){function a(m){return Array.prototype.slice.call(m)}function ma(m){return a(m).join("")}var D=I("./extend"),K=I("./compiled-fns");ia.exports=function(){function m(){var d=[],e=[];return D(function(){d.push.apply(d,a(arguments))},{def:function(){var m="v"+b;b++;e.push(m);0<arguments.length&&(d.push(m,"="),d.push.apply(d,a(arguments)),d.push(";"));return m},toString:function(){return ma([0<e.length?"var "+e.join(",")+";":"",ma(d)])}})}function e(){function b(m,
h){e(m,h,"=",d.def(m,h),";")}var d=m(),e=m(),p=d.toString,t=e.toString;return D(function(){d.apply(d,a(arguments))},{def:d.def,entry:d,exit:e,save:b,set:function(e,m,r){b(e,m);d(e,m,"=",r,";")},toString:function(){return p()+t()}})}var d=0,b=0,t={},y=m(),p={};return{global:y,link:function(b){var e="$"+d,m=!1;"object"===typeof b&&b.name&&(e=b.name.replace(/ /g,"_"),m=!0);if(e in t)return e;t[e]=b;m||d++;return e},block:m,proc:function(b,d){function m(){var b="a"+a.length;a.push(b);return b}var a=[];
d=d||0;for(var t=0;t<d;++t)m();var t=e(),x=t.toString;return p[b]=D(t,{arg:m,toString:function(){return ma(["function(",a.join(),"){",x(),"}"])}})},scope:e,cond:function(){var b=ma(arguments),d=e(),m=e(),t=d.toString,p=m.toString;return D(d,{then:function(){d.apply(d,a(arguments));return this},"else":function(){m.apply(m,a(arguments));return this},toString:function(){var d=p();d&&(d="else{"+d+"}");return ma(["if(",b,"){",t(),"}",d])}})},compile:function(){var b=[],d=[];Object.keys(t).sort(function(b,
d){var e="$"===b.charAt(0),m="$"===d.charAt(0);return e||m?e&&m?+b.slice(1)<+d.slice(1)?-1:1:e&&!m?-1:1:b.localeCompare(d)}).forEach(function(e){var m=t[e];b.push(e);d.push(m)});for(var e=0,m=b.length-1;-1<m;m--)if("$"===b[m].charAt(0)){e=m;break}var a=['"use strict";',y,"return {"];Object.keys(p).forEach(function(b){a.push('"',b,'":',p[b].toString(),",")});a.push("}");var m=ma(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),e=b.slice(e).join(),x=K[e];if(!x)throw console.log("src code is:"),
console.log(m),console.log("compiled values:",d),console.log("linked names:",b),console.log("Keys available:",Object.keys(K)),console.log("Key:",e),console.log('"'+e+'": function('+b.join(", ")+") \n{\n"+m+"\n},"),Error("missing precompiled function with key: "+e);return x.apply(null,d)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(I,ia,Pa){ia.exports={$0:function(a){var ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,ya,H,C;ma=a.attributes;D=a.current;K=a.framebuffer;m=a.gl;e=a.next;
d=a.vao;b=e.blend_color;t=D.blend_color;y=e.blend_equation;p=D.blend_equation;h=e.blend_func;N=D.blend_func;w=e.colorMask;J=D.colorMask;aa=e.depth_range;x=D.depth_range;S=e.polygonOffset_offset;r=D.polygonOffset_offset;L=e.sample_coverage;ha=D.sample_coverage;k=e.scissor_box;f=D.scissor_box;U=e.stencil_func;z=D.stencil_func;V=e.stencil_opBack;B=D.stencil_opBack;l=e.stencil_opFront;ya=D.stencil_opFront;H=e.viewport;C=D.viewport;return{poll:function(){var c,d,g,a,A,ma,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,
ca,W,la;D.dirty=!1;d=e.blend_enable;g=e.cull_enable;a=e.depth_enable;A=e.dither;ma=e.polygonOffset_enable;za=e.sample_alpha;X=e.sample_enable;da=e.scissor_enable;T=e.stencil_enable;Q=e.cull_face;F=D.cull_face;q=e.depth_func;O=D.depth_func;P=e.depth_mask;qa=D.depth_mask;oa=e.frontFace;v=D.frontFace;G=e.lineWidth;ca=D.lineWidth;W=e.stencil_mask;la=D.stencil_mask;c=K.next;c!==K.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null),K.cur=c);d!==D.blend_enable&&(d?m.enable(3042):
m.disable(3042),D.blend_enable=d);g!==D.cull_enable&&(g?m.enable(2884):m.disable(2884),D.cull_enable=g);a!==D.depth_enable&&(a?m.enable(2929):m.disable(2929),D.depth_enable=a);A!==D.dither&&(A?m.enable(3024):m.disable(3024),D.dither=A);ma!==D.polygonOffset_enable&&(ma?m.enable(32823):m.disable(32823),D.polygonOffset_enable=ma);za!==D.sample_alpha&&(za?m.enable(32926):m.disable(32926),D.sample_alpha=za);X!==D.sample_enable&&(X?m.enable(32928):m.disable(32928),D.sample_enable=X);da!==D.scissor_enable&&
(da?m.enable(3089):m.disable(3089),D.scissor_enable=da);T!==D.stencil_enable&&(T?m.enable(2960):m.disable(2960),D.stencil_enable=T);if(b[0]!==t[0]||b[1]!==t[1]||b[2]!==t[2]||b[3]!==t[3])m.blendColor(b[0],b[1],b[2],b[3]),t[0]=b[0],t[1]=b[1],t[2]=b[2],t[3]=b[3];if(y[0]!==p[0]||y[1]!==p[1])m.blendEquationSeparate(y[0],y[1]),p[0]=y[0],p[1]=y[1];if(h[0]!==N[0]||h[1]!==N[1]||h[2]!==N[2]||h[3]!==N[3])m.blendFuncSeparate(h[0],h[1],h[2],h[3]),N[0]=h[0],N[1]=h[1],N[2]=h[2],N[3]=h[3];if(w[0]!==J[0]||w[1]!==
J[1]||w[2]!==J[2]||w[3]!==J[3])m.colorMask(w[0],w[1],w[2],w[3]),J[0]=w[0],J[1]=w[1],J[2]=w[2],J[3]=w[3];Q!==F&&(m.cullFace(Q),D.cull_face=Q);q!==O&&(m.depthFunc(q),D.depth_func=q);P!==qa&&(m.depthMask(P),D.depth_mask=P);if(aa[0]!==x[0]||aa[1]!==x[1])m.depthRange(aa[0],aa[1]),x[0]=aa[0],x[1]=aa[1];oa!==v&&(m.frontFace(oa),D.frontFace=oa);G!==ca&&(m.lineWidth(G),D.lineWidth=G);if(S[0]!==r[0]||S[1]!==r[1])m.polygonOffset(S[0],S[1]),r[0]=S[0],r[1]=S[1];if(L[0]!==ha[0]||L[1]!==ha[1])m.sampleCoverage(L[0],
L[1]),ha[0]=L[0],ha[1]=L[1];if(k[0]!==f[0]||k[1]!==f[1]||k[2]!==f[2]||k[3]!==f[3])m.scissor(k[0],k[1],k[2],k[3]),f[0]=k[0],f[1]=k[1],f[2]=k[2],f[3]=k[3];if(U[0]!==z[0]||U[1]!==z[1]||U[2]!==z[2])m.stencilFunc(U[0],U[1],U[2]),z[0]=U[0],z[1]=U[1],z[2]=U[2];W!==la&&(m.stencilMask(W),D.stencil_mask=W);if(V[0]!==B[0]||V[1]!==B[1]||V[2]!==B[2]||V[3]!==B[3])m.stencilOpSeparate(V[0],V[1],V[2],V[3]),B[0]=V[0],B[1]=V[1],B[2]=V[2],B[3]=V[3];if(l[0]!==ya[0]||l[1]!==ya[1]||l[2]!==ya[2]||l[3]!==ya[3])m.stencilOpSeparate(l[0],
l[1],l[2],l[3]),ya[0]=l[0],ya[1]=l[1],ya[2]=l[2],ya[3]=l[3];if(H[0]!==C[0]||H[1]!==C[1]||H[2]!==C[2]||H[3]!==C[3])m.viewport(H[0],H[1],H[2],H[3]),C[0]=H[0],C[1]=H[1],C[2]=H[2],C[3]=H[3]},refresh:function(){var c,M,g,a,A,na,za,X,da,T,Q,F,q,O,P,qa;D.dirty=!1;M=e.blend_enable;g=e.cull_enable;a=e.depth_enable;A=e.dither;na=e.polygonOffset_enable;za=e.sample_alpha;X=e.sample_enable;da=e.scissor_enable;T=e.stencil_enable;Q=e.cull_face;F=e.depth_func;q=e.depth_mask;O=e.frontFace;P=e.lineWidth;qa=e.stencil_mask;
(c=K.next)?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null);K.cur=c;c=ma[0];c.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[1];c.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(1),
m.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[2];c.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[3];c.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,c.x,c.y,c.z,
c.w),c.buffer=null);c=ma[4];c.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[5];c.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[6];c.buffer?
(m.enableVertexAttribArray(6),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[7];c.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[8];c.buffer?(m.enableVertexAttribArray(8),
m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[9];c.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[10];c.buffer?(m.enableVertexAttribArray(10),m.bindBuffer(34962,c.buffer.buffer),
m.vertexAttribPointer(10,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[11];c.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[12];c.buffer?(m.enableVertexAttribArray(12),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(12,
c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[13];c.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[14];c.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(14,c.size,c.type,c.normalized,
c.stride,c.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);c=ma[15];c.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);d.currentVAO=null;d.setVAO(d.targetVAO);M?m.enable(3042):m.disable(3042);D.blend_enable=M;g?m.enable(2884):m.disable(2884);D.cull_enable=g;a?m.enable(2929):
m.disable(2929);D.depth_enable=a;A?m.enable(3024):m.disable(3024);D.dither=A;na?m.enable(32823):m.disable(32823);D.polygonOffset_enable=na;za?m.enable(32926):m.disable(32926);D.sample_alpha=za;X?m.enable(32928):m.disable(32928);D.sample_enable=X;da?m.enable(3089):m.disable(3089);D.scissor_enable=da;T?m.enable(2960):m.disable(2960);D.stencil_enable=T;m.blendColor(b[0],b[1],b[2],b[3]);t[0]=b[0];t[1]=b[1];t[2]=b[2];t[3]=b[3];m.blendEquationSeparate(y[0],y[1]);p[0]=y[0];p[1]=y[1];m.blendFuncSeparate(h[0],
h[1],h[2],h[3]);N[0]=h[0];N[1]=h[1];N[2]=h[2];N[3]=h[3];m.colorMask(w[0],w[1],w[2],w[3]);J[0]=w[0];J[1]=w[1];J[2]=w[2];J[3]=w[3];m.cullFace(Q);D.cull_face=Q;m.depthFunc(F);D.depth_func=F;m.depthMask(q);D.depth_mask=q;m.depthRange(aa[0],aa[1]);x[0]=aa[0];x[1]=aa[1];m.frontFace(O);D.frontFace=O;m.lineWidth(P);D.lineWidth=P;m.polygonOffset(S[0],S[1]);r[0]=S[0];r[1]=S[1];m.sampleCoverage(L[0],L[1]);ha[0]=L[0];ha[1]=L[1];m.scissor(k[0],k[1],k[2],k[3]);f[0]=k[0];f[1]=k[1];f[2]=k[2];f[3]=k[3];m.stencilFunc(U[0],
U[1],U[2]);z[0]=U[0];z[1]=U[1];z[2]=U[2];m.stencilMask(qa);D.stencil_mask=qa;m.stencilOpSeparate(V[0],V[1],V[2],V[3]);B[0]=V[0];B[1]=V[1];B[2]=V[2];B[3]=V[3];m.stencilOpSeparate(l[0],l[1],l[2],l[3]);ya[0]=l[0];ya[1]=l[1];ya[2]=l[2];ya[3]=l[3];m.viewport(H[0],H[1],H[2],H[3]);C[0]=H[0];C[1]=H[1];C[2]=H[2];C[3]=H[3]}}},$3:function(a,ma,D,K){var m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na;m=a.context;e=a.current;d=a.framebuffer;b=a.gl;t=a.next;y=a.shader;p=a.vao;h=t.blend_color;
N=e.blend_color;w=t.blend_equation;J=e.blend_equation;aa=t.blend_func;x=e.blend_func;S=t.colorMask;r=e.colorMask;L=t.depth_range;ha=e.depth_range;k=t.polygonOffset_offset;f=e.polygonOffset_offset;U=t.sample_coverage;z=e.sample_coverage;V=t.scissor_box;B=e.scissor_box;l=t.stencil_func;ya=e.stencil_func;H=t.stencil_opBack;C=e.stencil_opBack;c=t.stencil_opFront;M=e.stencil_opFront;g=t.viewport;ka=e.viewport;A={};na={};return{batch:function(m,a){var A,T,Q,F,q;A=d.next;A!==d.cur&&(A?b.bindFramebuffer(36160,
A.framebuffer):b.bindFramebuffer(36160,null),d.cur=A);if(e.dirty){A=t.dither;A!==e.dither&&(A?b.enable(3024):b.disable(3024),e.dither=A);A=t.blend_enable;A!==e.blend_enable&&(A?b.enable(3042):b.disable(3042),e.blend_enable=A);A=h[0];Q=h[1];F=h[2];q=h[3];if(A!==N[0]||Q!==N[1]||F!==N[2]||q!==N[3])b.blendColor(A,Q,F,q),N[0]=A,N[1]=Q,N[2]=F,N[3]=q;A=w[0];Q=w[1];if(A!==J[0]||Q!==J[1])b.blendEquationSeparate(A,Q),J[0]=A,J[1]=Q;A=aa[0];Q=aa[1];F=aa[2];q=aa[3];if(A!==x[0]||Q!==x[1]||F!==x[2]||q!==x[3])b.blendFuncSeparate(A,
Q,F,q),x[0]=A,x[1]=Q,x[2]=F,x[3]=q;A=t.depth_enable;A!==e.depth_enable&&(A?b.enable(2929):b.disable(2929),e.depth_enable=A);A=t.depth_func;A!==e.depth_func&&(b.depthFunc(A),e.depth_func=A);A=L[0];Q=L[1];if(A!==ha[0]||Q!==ha[1])b.depthRange(A,Q),ha[0]=A,ha[1]=Q;A=t.depth_mask;A!==e.depth_mask&&(b.depthMask(A),e.depth_mask=A);A=S[0];Q=S[1];F=S[2];q=S[3];if(A!==r[0]||Q!==r[1]||F!==r[2]||q!==r[3])b.colorMask(A,Q,F,q),r[0]=A,r[1]=Q,r[2]=F,r[3]=q;A=t.cull_enable;A!==e.cull_enable&&(A?b.enable(2884):b.disable(2884),
e.cull_enable=A);A=t.cull_face;A!==e.cull_face&&(b.cullFace(A),e.cull_face=A);A=t.frontFace;A!==e.frontFace&&(b.frontFace(A),e.frontFace=A);A=t.lineWidth;A!==e.lineWidth&&(b.lineWidth(A),e.lineWidth=A);A=t.polygonOffset_enable;A!==e.polygonOffset_enable&&(A?b.enable(32823):b.disable(32823),e.polygonOffset_enable=A);A=k[0];Q=k[1];if(A!==f[0]||Q!==f[1])b.polygonOffset(A,Q),f[0]=A,f[1]=Q;A=t.sample_alpha;A!==e.sample_alpha&&(A?b.enable(32926):b.disable(32926),e.sample_alpha=A);A=t.sample_enable;A!==
e.sample_enable&&(A?b.enable(32928):b.disable(32928),e.sample_enable=A);A=U[0];Q=U[1];if(A!==z[0]||Q!==z[1])b.sampleCoverage(A,Q),z[0]=A,z[1]=Q;A=t.stencil_enable;A!==e.stencil_enable&&(A?b.enable(2960):b.disable(2960),e.stencil_enable=A);A=t.stencil_mask;A!==e.stencil_mask&&(b.stencilMask(A),e.stencil_mask=A);A=l[0];Q=l[1];F=l[2];if(A!==ya[0]||Q!==ya[1]||F!==ya[2])b.stencilFunc(A,Q,F),ya[0]=A,ya[1]=Q,ya[2]=F;A=c[0];Q=c[1];F=c[2];q=c[3];if(A!==M[0]||Q!==M[1]||F!==M[2]||q!==M[3])b.stencilOpSeparate(A,
Q,F,q),M[0]=A,M[1]=Q,M[2]=F,M[3]=q;A=H[0];Q=H[1];F=H[2];q=H[3];if(A!==C[0]||Q!==C[1]||F!==C[2]||q!==C[3])b.stencilOpSeparate(A,Q,F,q),C[0]=A,C[1]=Q,C[2]=F,C[3]=q;A=t.scissor_enable;A!==e.scissor_enable&&(A?b.enable(3089):b.disable(3089),e.scissor_enable=A);A=V[0];Q=V[1];F=V[2];q=V[3];if(A!==B[0]||Q!==B[1]||F!==B[2]||q!==B[3])b.scissor(A,Q,F,q),B[0]=A,B[1]=Q,B[2]=F,B[3]=q;A=g[0];Q=g[1];F=g[2];q=g[3];if(A!==ka[0]||Q!==ka[1]||F!==ka[2]||q!==ka[3])b.viewport(A,Q,F,q),ka[0]=A,ka[1]=Q,ka[2]=F,ka[3]=q;e.dirty=
!1}if(A=e.profile)T=performance.now(),ma.count+=a;Q=y.program(y.vert,y.frag);b.useProgram(Q.program);p.setVAO(null);F=Q.id;(q=na[F])||(q=na[F]=K(Q));q.call(this,m,a);p.setVAO(null);A&&(ma.cpuTime+=performance.now()-T)},draw:function(m){var a,K,T,Q,F;a=d.next;a!==d.cur&&(a?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null),d.cur=a);if(e.dirty){a=t.dither;a!==e.dither&&(a?b.enable(3024):b.disable(3024),e.dither=a);a=t.blend_enable;a!==e.blend_enable&&(a?b.enable(3042):b.disable(3042),
e.blend_enable=a);a=h[0];T=h[1];Q=h[2];F=h[3];if(a!==N[0]||T!==N[1]||Q!==N[2]||F!==N[3])b.blendColor(a,T,Q,F),N[0]=a,N[1]=T,N[2]=Q,N[3]=F;a=w[0];T=w[1];if(a!==J[0]||T!==J[1])b.blendEquationSeparate(a,T),J[0]=a,J[1]=T;a=aa[0];T=aa[1];Q=aa[2];F=aa[3];if(a!==x[0]||T!==x[1]||Q!==x[2]||F!==x[3])b.blendFuncSeparate(a,T,Q,F),x[0]=a,x[1]=T,x[2]=Q,x[3]=F;a=t.depth_enable;a!==e.depth_enable&&(a?b.enable(2929):b.disable(2929),e.depth_enable=a);a=t.depth_func;a!==e.depth_func&&(b.depthFunc(a),e.depth_func=a);
a=L[0];T=L[1];if(a!==ha[0]||T!==ha[1])b.depthRange(a,T),ha[0]=a,ha[1]=T;a=t.depth_mask;a!==e.depth_mask&&(b.depthMask(a),e.depth_mask=a);a=S[0];T=S[1];Q=S[2];F=S[3];if(a!==r[0]||T!==r[1]||Q!==r[2]||F!==r[3])b.colorMask(a,T,Q,F),r[0]=a,r[1]=T,r[2]=Q,r[3]=F;a=t.cull_enable;a!==e.cull_enable&&(a?b.enable(2884):b.disable(2884),e.cull_enable=a);a=t.cull_face;a!==e.cull_face&&(b.cullFace(a),e.cull_face=a);a=t.frontFace;a!==e.frontFace&&(b.frontFace(a),e.frontFace=a);a=t.lineWidth;a!==e.lineWidth&&(b.lineWidth(a),
e.lineWidth=a);a=t.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?b.enable(32823):b.disable(32823),e.polygonOffset_enable=a);a=k[0];T=k[1];if(a!==f[0]||T!==f[1])b.polygonOffset(a,T),f[0]=a,f[1]=T;a=t.sample_alpha;a!==e.sample_alpha&&(a?b.enable(32926):b.disable(32926),e.sample_alpha=a);a=t.sample_enable;a!==e.sample_enable&&(a?b.enable(32928):b.disable(32928),e.sample_enable=a);a=U[0];T=U[1];if(a!==z[0]||T!==z[1])b.sampleCoverage(a,T),z[0]=a,z[1]=T;a=t.stencil_enable;a!==e.stencil_enable&&(a?
b.enable(2960):b.disable(2960),e.stencil_enable=a);a=t.stencil_mask;a!==e.stencil_mask&&(b.stencilMask(a),e.stencil_mask=a);a=l[0];T=l[1];Q=l[2];if(a!==ya[0]||T!==ya[1]||Q!==ya[2])b.stencilFunc(a,T,Q),ya[0]=a,ya[1]=T,ya[2]=Q;a=c[0];T=c[1];Q=c[2];F=c[3];if(a!==M[0]||T!==M[1]||Q!==M[2]||F!==M[3])b.stencilOpSeparate(a,T,Q,F),M[0]=a,M[1]=T,M[2]=Q,M[3]=F;a=H[0];T=H[1];Q=H[2];F=H[3];if(a!==C[0]||T!==C[1]||Q!==C[2]||F!==C[3])b.stencilOpSeparate(a,T,Q,F),C[0]=a,C[1]=T,C[2]=Q,C[3]=F;a=t.scissor_enable;a!==
e.scissor_enable&&(a?b.enable(3089):b.disable(3089),e.scissor_enable=a);a=V[0];T=V[1];Q=V[2];F=V[3];if(a!==B[0]||T!==B[1]||Q!==B[2]||F!==B[3])b.scissor(a,T,Q,F),B[0]=a,B[1]=T,B[2]=Q,B[3]=F;a=g[0];T=g[1];Q=g[2];F=g[3];if(a!==ka[0]||T!==ka[1]||Q!==ka[2]||F!==ka[3])b.viewport(a,T,Q,F),ka[0]=a,ka[1]=T,ka[2]=Q,ka[3]=F;e.dirty=!1}if(a=e.profile)K=performance.now(),ma.count++;T=y.program(y.vert,y.frag);b.useProgram(T.program);p.setVAO(null);Q=T.id;(F=A[Q])||(F=A[Q]=D(T));F.call(this,m);p.setVAO(null);a&&
(ma.cpuTime+=performance.now()-K)},scope:function(b,c,d){var g,k;if(g=e.profile)k=performance.now(),ma.count++;c(m,b,d);g&&(ma.cpuTime+=performance.now()-k)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,
f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,Qa,lc,fa,E,ta,Fa,sa,Aa,Ea){var ga,Y,va,Ya,Ga,ob,ba,wd,ac,Ha,I,Ub,we,Ed,xd,Ud,ze,xe,Nd,ne,ia,Vd,ae,fe,$d,Ce,Oe,Se,Fd,Ae,qe,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va;ga=a.attributes;Y=a.context;va=a.current;Ya=a.draw;Ga=a.elements;ob=a.framebuffer;ba=a.gl;wd=a.next;ac=a.shader;Ha=a.uniforms;I=a.vao;Ub=wd.blend_color;
we=va.blend_color;Ed=wd.blend_equation;xd=va.blend_equation;Ud=wd.blend_func;ze=va.blend_func;xe=wd.colorMask;Nd=va.colorMask;ne=wd.depth_range;ia=va.depth_range;Vd=wd.polygonOffset_offset;ae=va.polygonOffset_offset;fe=wd.sample_coverage;$d=va.sample_coverage;Ce=wd.scissor_box;Oe=va.scissor_box;Se=wd.stencil_func;Fd=va.stencil_func;Ae=wd.stencil_opBack;qe=va.stencil_opBack;Xd=wd.stencil_opFront;Od=va.stencil_opFront;Gd=wd.viewport;nd=va.viewport;bd={};rd={};Lc=new Float32Array(16);pd=new Float32Array(16);
Fc=new Float32Array(16);fd=new Float32Array(16);Oc=new Float32Array(16);Ic=new Float32Array(16);Db=new Float32Array(16);Hb=new Float32Array(16);uc=new Float32Array(16);Ab=new Float32Array(16);xc=new Float32Array(16);Eb=new Float32Array(16);Jc=new Float32Array(16);mc=new Float32Array(16);Gc=new Float32Array(16);gd=new Float32Array(16);Xc=new Float32Array(16);Cc=new Float32Array(16);ec=new Float32Array(16);Hc=new Float32Array(16);pc=new Float32Array(16);qc=new Float32Array(16);nc=new Float32Array(16);
fc=new Float32Array(16);gb=new Float32Array(16);Sc=new Float32Array(16);Bb=new Float32Array(16);db=new Float32Array(16);Ob=new Float32Array(16);bb=new Float32Array(16);kb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(c,g){var k,f,l,a;k=ob.next;k!==ob.cur&&(k?ba.bindFramebuffer(36160,k.framebuffer):ba.bindFramebuffer(36160,null),ob.cur=k);if(va.dirty){var M,A,z,B,H,C,D,L,ma,U,V,ha,ka,Ha,na,ya,Ub,ac,Ka,Hb,Oc,Db,Eb,Oa,Ce;M=xe[0];A=xe[1];z=xe[2];B=xe[3];if(M!==Nd[0]||A!==Nd[1]||z!==
Nd[2]||B!==Nd[3])ba.colorMask(M,A,z,B),Nd[0]=M,Nd[1]=A,Nd[2]=z,Nd[3]=B;H=wd.frontFace;H!==va.frontFace&&(ba.frontFace(H),va.frontFace=H);C=wd.polygonOffset_enable;C!==va.polygonOffset_enable&&(C?ba.enable(32823):ba.disable(32823),va.polygonOffset_enable=C);D=Vd[0];L=Vd[1];if(D!==ae[0]||L!==ae[1])ba.polygonOffset(D,L),ae[0]=D,ae[1]=L;ma=wd.sample_alpha;ma!==va.sample_alpha&&(ma?ba.enable(32926):ba.disable(32926),va.sample_alpha=ma);U=wd.sample_enable;U!==va.sample_enable&&(U?ba.enable(32928):ba.disable(32928),
va.sample_enable=U);V=fe[0];ha=fe[1];if(V!==$d[0]||ha!==$d[1])ba.sampleCoverage(V,ha),$d[0]=V,$d[1]=ha;ka=wd.stencil_enable;ka!==va.stencil_enable&&(ka?ba.enable(2960):ba.disable(2960),va.stencil_enable=ka);Ha=wd.stencil_mask;Ha!==va.stencil_mask&&(ba.stencilMask(Ha),va.stencil_mask=Ha);na=Se[0];ya=Se[1];Ub=Se[2];if(na!==Fd[0]||ya!==Fd[1]||Ub!==Fd[2])ba.stencilFunc(na,ya,Ub),Fd[0]=na,Fd[1]=ya,Fd[2]=Ub;ac=Xd[0];Ka=Xd[1];Hb=Xd[2];Oc=Xd[3];if(ac!==Od[0]||Ka!==Od[1]||Hb!==Od[2]||Oc!==Od[3])ba.stencilOpSeparate(ac,
Ka,Hb,Oc),Od[0]=ac,Od[1]=Ka,Od[2]=Hb,Od[3]=Oc;Db=Ae[0];Eb=Ae[1];Oa=Ae[2];Ce=Ae[3];if(Db!==qe[0]||Eb!==qe[1]||Oa!==qe[2]||Ce!==qe[3])ba.stencilOpSeparate(Db,Eb,Oa,Ce),qe[0]=Db,qe[1]=Eb,qe[2]=Oa,qe[3]=Ce}ba.blendColor(0,0,0,0);we[0]=0;we[1]=0;we[2]=0;we[3]=0;ba.disable(3042);va.blend_enable=!1;ba.blendEquationSeparate(32774,32774);xd[0]=32774;xd[1]=32774;ba.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ba.enable(2884);va.cull_enable=!0;ba.cullFace(1029);va.cull_face=1029;ba.enable(2929);
va.depth_enable=!0;ba.depthFunc(513);va.depth_func=513;ba.depthMask(!0);va.depth_mask=!0;ba.depthRange(0,1);ia[0]=0;ia[1]=1;ba.disable(3024);va.dither=!1;ba.lineWidth(2);va.lineWidth=2;ba.enable(3089);va.scissor_enable=!0;f=va.profile;va.profile=!1;ba.useProgram(za.program);var Sa,Ab,Ic,La,mc,$a,Fc,Ud,nb,Na,uc,Ra,wb,xb,Ua,pb,pd,Ed,Gc,cb,Jc,fd,Xa,Lc,Cb,ab,ne,xc,Xb,Sb,Gd,Tb,gd;I.setVAO(null);Sa=Ba.location;Ab=ga[Sa];Ab.buffer||ba.enableVertexAttribArray(Sa);if(Ab.type!==K.dtype||4!==Ab.size||Ab.buffer!==
K||!1!==Ab.normalized||0!==Ab.offset||0!==Ab.stride)ba.bindBuffer(34962,K.buffer),ba.vertexAttribPointer(Sa,4,K.dtype,!1,0,0),Ab.type=K.dtype,Ab.size=4,Ab.buffer=K,Ab.normalized=!1,Ab.offset=0,Ab.stride=0;Ic=Ma.location;La=ga[Ic];La.buffer||ba.enableVertexAttribArray(Ic);if(La.type!==m.dtype||4!==La.size||La.buffer!==m||!1!==La.normalized||0!==La.offset||0!==La.stride)ba.bindBuffer(34962,m.buffer),ba.vertexAttribPointer(Ic,4,m.dtype,!1,0,0),La.type=m.dtype,La.size=4,La.buffer=m,La.normalized=!1,La.offset=
0,La.stride=0;mc=Z.location;$a=ga[mc];$a.buffer||ba.enableVertexAttribArray(mc);if($a.type!==e.dtype||4!==$a.size||$a.buffer!==e||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)ba.bindBuffer(34962,e.buffer),ba.vertexAttribPointer(mc,4,e.dtype,!1,0,0),$a.type=e.dtype,$a.size=4,$a.buffer=e,$a.normalized=!1,$a.offset=0,$a.stride=0;Fc=zb.location;Ud=ga[Fc];Ud.buffer||ba.enableVertexAttribArray(Fc);if(Ud.type!==d.dtype||4!==Ud.size||Ud.buffer!==d||!1!==Ud.normalized||0!==Ud.offset||0!==Ud.stride)ba.bindBuffer(34962,
d.buffer),ba.vertexAttribPointer(Fc,4,d.dtype,!1,0,0),Ud.type=d.dtype,Ud.size=4,Ud.buffer=d,Ud.normalized=!1,Ud.offset=0,Ud.stride=0;nb=Za.location;Na=ga[nb];Na.buffer||ba.enableVertexAttribArray(nb);if(Na.type!==b.dtype||4!==Na.size||Na.buffer!==b||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ba.bindBuffer(34962,b.buffer),ba.vertexAttribPointer(nb,4,b.dtype,!1,0,0),Na.type=b.dtype,Na.size=4,Na.buffer=b,Na.normalized=!1,Na.offset=0,Na.stride=0;uc=u.location;Ra=ga[uc];Ra.buffer||ba.enableVertexAttribArray(uc);
if(Ra.type!==t.dtype||4!==Ra.size||Ra.buffer!==t||!1!==Ra.normalized||0!==Ra.offset||0!==Ra.stride)ba.bindBuffer(34962,t.buffer),ba.vertexAttribPointer(uc,4,t.dtype,!1,0,0),Ra.type=t.dtype,Ra.size=4,Ra.buffer=t,Ra.normalized=!1,Ra.offset=0,Ra.stride=0;wb=n.location;xb=ga[wb];xb.buffer||ba.enableVertexAttribArray(wb);if(xb.type!==y.dtype||4!==xb.size||xb.buffer!==y||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)ba.bindBuffer(34962,y.buffer),ba.vertexAttribPointer(wb,4,y.dtype,!1,0,0),xb.type=y.dtype,
xb.size=4,xb.buffer=y,xb.normalized=!1,xb.offset=0,xb.stride=0;Ua=R.location;pb=ga[Ua];pb.buffer||ba.enableVertexAttribArray(Ua);if(pb.type!==p.dtype||4!==pb.size||pb.buffer!==p||!1!==pb.normalized||0!==pb.offset||0!==pb.stride)ba.bindBuffer(34962,p.buffer),ba.vertexAttribPointer(Ua,4,p.dtype,!1,0,0),pb.type=p.dtype,pb.size=4,pb.buffer=p,pb.normalized=!1,pb.offset=0,pb.stride=0;pd=ua.location;Ed=ga[pd];Ed.buffer||ba.enableVertexAttribArray(pd);if(Ed.type!==h.dtype||4!==Ed.size||Ed.buffer!==h||!1!==
Ed.normalized||0!==Ed.offset||0!==Ed.stride)ba.bindBuffer(34962,h.buffer),ba.vertexAttribPointer(pd,4,h.dtype,!1,0,0),Ed.type=h.dtype,Ed.size=4,Ed.buffer=h,Ed.normalized=!1,Ed.offset=0,Ed.stride=0;Gc=wa.location;cb=ga[Gc];cb.buffer||ba.enableVertexAttribArray(Gc);if(cb.type!==N.dtype||4!==cb.size||cb.buffer!==N||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)ba.bindBuffer(34962,N.buffer),ba.vertexAttribPointer(Gc,4,N.dtype,!1,0,0),cb.type=N.dtype,cb.size=4,cb.buffer=N,cb.normalized=!1,cb.offset=
0,cb.stride=0;Jc=Qa.location;fd=ga[Jc];fd.buffer||ba.enableVertexAttribArray(Jc);if(fd.type!==w.dtype||4!==fd.size||fd.buffer!==w||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)ba.bindBuffer(34962,w.buffer),ba.vertexAttribPointer(Jc,4,w.dtype,!1,0,0),fd.type=w.dtype,fd.size=4,fd.buffer=w,fd.normalized=!1,fd.offset=0,fd.stride=0;Xa=lc.location;Lc=ga[Xa];Lc.buffer||ba.enableVertexAttribArray(Xa);if(Lc.type!==J.dtype||4!==Lc.size||Lc.buffer!==J||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ba.bindBuffer(34962,
J.buffer),ba.vertexAttribPointer(Xa,4,J.dtype,!1,0,0),Lc.type=J.dtype,Lc.size=4,Lc.buffer=J,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Cb=fa.location;ab=ga[Cb];ab.buffer||ba.enableVertexAttribArray(Cb);if(ab.type!==aa.dtype||4!==ab.size||ab.buffer!==aa||!1!==ab.normalized||0!==ab.offset||0!==ab.stride)ba.bindBuffer(34962,aa.buffer),ba.vertexAttribPointer(Cb,4,aa.dtype,!1,0,0),ab.type=aa.dtype,ab.size=4,ab.buffer=aa,ab.normalized=!1,ab.offset=0,ab.stride=0;ne=E.location;xc=ga[ne];xc.buffer||ba.enableVertexAttribArray(ne);
if(xc.type!==x.dtype||4!==xc.size||xc.buffer!==x||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)ba.bindBuffer(34962,x.buffer),ba.vertexAttribPointer(ne,4,x.dtype,!1,0,0),xc.type=x.dtype,xc.size=4,xc.buffer=x,xc.normalized=!1,xc.offset=0,xc.stride=0;Xb=ta.location;Sb=ga[Xb];Sb.buffer||ba.enableVertexAttribArray(Xb);if(Sb.type!==S.dtype||4!==Sb.size||Sb.buffer!==S||!1!==Sb.normalized||0!==Sb.offset||0!==Sb.stride)ba.bindBuffer(34962,S.buffer),ba.vertexAttribPointer(Xb,4,S.dtype,!1,0,0),Sb.type=S.dtype,
Sb.size=4,Sb.buffer=S,Sb.normalized=!1,Sb.offset=0,Sb.stride=0;Gd=da.location;Tb=ga[Gd];Tb.buffer||ba.enableVertexAttribArray(Gd);if(Tb.type!==r.dtype||4!==Tb.size||Tb.buffer!==r||!1!==Tb.normalized||0!==Tb.offset||0!==Tb.stride)ba.bindBuffer(34962,r.buffer),ba.vertexAttribPointer(Gd,4,r.dtype,!1,0,0),Tb.type=r.dtype,Tb.size=4,Tb.buffer=r,Tb.normalized=!1,Tb.offset=0,Tb.stride=0;ba.uniform1i(Fa.location,X.bind());(gd=Ya.elements)?ba.bindBuffer(34963,gd.buffer.buffer):I.currentVAO&&(gd=Ga.getElements(I.currentVAO.elements))&&
ba.bindBuffer(34963,gd.buffer.buffer);for(l=0;l<g;++l){a=c[l];var Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,He,Ie,jd,bf,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,Pa,je,se,ke,ie,he,te,de;bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;Dc=bd.x|0;zd=bd.y|0;Mc="width"in bd?bd.width|0:Y.framebufferWidth-Dc;Yc="height"in bd?bd.height|0:Y.framebufferHeight-zd;qd=Y.viewportWidth;Y.viewportWidth=Mc;oc=Y.viewportHeight;
Y.viewportHeight=Yc;ba.viewport(Dc,zd,Mc,Yc);nd[0]=Dc;nd[1]=zd;nd[2]=Mc;nd[3]=Yc;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;wc=rd.x|0;hc=rd.y|0;eb="width"in rd?rd.width|0:Y.framebufferWidth-wc;sc="height"in rd?rd.height|0:Y.framebufferHeight-hc;ba.scissor(wc,hc,eb,sc);Oe[0]=wc;Oe[1]=hc;Oe[2]=eb;Oe[3]=sc;Vb=a.dim0A;ba.uniformMatrix4fv(Q.location,!1,Array.isArray(Vb)||Vb instanceof Float32Array?Vb:(Xc[0]=Vb[0],Xc[1]=Vb[1],Xc[2]=Vb[2],Xc[3]=Vb[3],Xc[4]=Vb[4],Xc[5]=
Vb[5],Xc[6]=Vb[6],Xc[7]=Vb[7],Xc[8]=Vb[8],Xc[9]=Vb[9],Xc[10]=Vb[10],Xc[11]=Vb[11],Xc[12]=Vb[12],Xc[13]=Vb[13],Xc[14]=Vb[14],Xc[15]=Vb[15],Xc));Yb=a.dim1A;ba.uniformMatrix4fv(P.location,!1,Array.isArray(Yb)||Yb instanceof Float32Array?Yb:(Cc[0]=Yb[0],Cc[1]=Yb[1],Cc[2]=Yb[2],Cc[3]=Yb[3],Cc[4]=Yb[4],Cc[5]=Yb[5],Cc[6]=Yb[6],Cc[7]=Yb[7],Cc[8]=Yb[8],Cc[9]=Yb[9],Cc[10]=Yb[10],Cc[11]=Yb[11],Cc[12]=Yb[12],Cc[13]=Yb[13],Cc[14]=Yb[14],Cc[15]=Yb[15],Cc));dc=a.dim0B;ba.uniformMatrix4fv(F.location,!1,Array.isArray(dc)||
dc instanceof Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));ic=a.dim1B;ba.uniformMatrix4fv(qa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Hc[0]=ic[0],Hc[1]=ic[1],Hc[2]=ic[2],Hc[3]=ic[3],Hc[4]=ic[4],Hc[5]=ic[5],Hc[6]=ic[6],Hc[7]=ic[7],Hc[8]=ic[8],Hc[9]=ic[9],Hc[10]=ic[10],Hc[11]=ic[11],Hc[12]=ic[12],Hc[13]=
ic[13],Hc[14]=ic[14],Hc[15]=ic[15],Hc));yc=a.dim0C;ba.uniformMatrix4fv(q.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(pc[0]=yc[0],pc[1]=yc[1],pc[2]=yc[2],pc[3]=yc[3],pc[4]=yc[4],pc[5]=yc[5],pc[6]=yc[6],pc[7]=yc[7],pc[8]=yc[8],pc[9]=yc[9],pc[10]=yc[10],pc[11]=yc[11],pc[12]=yc[12],pc[13]=yc[13],pc[14]=yc[14],pc[15]=yc[15],pc));Ac=a.dim1C;ba.uniformMatrix4fv(oa.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(qc[0]=Ac[0],qc[1]=Ac[1],qc[2]=Ac[2],qc[3]=Ac[3],qc[4]=Ac[4],qc[5]=
Ac[5],qc[6]=Ac[6],qc[7]=Ac[7],qc[8]=Ac[8],qc[9]=Ac[9],qc[10]=Ac[10],qc[11]=Ac[11],qc[12]=Ac[12],qc[13]=Ac[13],qc[14]=Ac[14],qc[15]=Ac[15],qc));cd=a.dim0D;ba.uniformMatrix4fv(O.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(nc[0]=cd[0],nc[1]=cd[1],nc[2]=cd[2],nc[3]=cd[3],nc[4]=cd[4],nc[5]=cd[5],nc[6]=cd[6],nc[7]=cd[7],nc[8]=cd[8],nc[9]=cd[9],nc[10]=cd[10],nc[11]=cd[11],nc[12]=cd[12],nc[13]=cd[13],nc[14]=cd[14],nc[15]=cd[15],nc));Qc=a.dim1D;ba.uniformMatrix4fv(v.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(fc[0]=Qc[0],fc[1]=Qc[1],fc[2]=Qc[2],fc[3]=Qc[3],fc[4]=Qc[4],fc[5]=Qc[5],fc[6]=Qc[6],fc[7]=Qc[7],fc[8]=Qc[8],fc[9]=Qc[9],fc[10]=Qc[10],fc[11]=Qc[11],fc[12]=Qc[12],fc[13]=Qc[13],fc[14]=Qc[14],fc[15]=Qc[15],fc));Rc=a.loA;ba.uniformMatrix4fv(Ca.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(gb[0]=Rc[0],gb[1]=Rc[1],gb[2]=Rc[2],gb[3]=Rc[3],gb[4]=Rc[4],gb[5]=Rc[5],gb[6]=Rc[6],gb[7]=Rc[7],gb[8]=Rc[8],gb[9]=Rc[9],gb[10]=Rc[10],gb[11]=Rc[11],gb[12]=Rc[12],gb[13]=
Rc[13],gb[14]=Rc[14],gb[15]=Rc[15],gb));Uc=a.hiA;ba.uniformMatrix4fv(ca.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(Sc[0]=Uc[0],Sc[1]=Uc[1],Sc[2]=Uc[2],Sc[3]=Uc[3],Sc[4]=Uc[4],Sc[5]=Uc[5],Sc[6]=Uc[6],Sc[7]=Uc[7],Sc[8]=Uc[8],Sc[9]=Uc[9],Sc[10]=Uc[10],Sc[11]=Uc[11],Sc[12]=Uc[12],Sc[13]=Uc[13],Sc[14]=Uc[14],Sc[15]=Uc[15],Sc));Zc=a.loB;ba.uniformMatrix4fv(xa.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Bb[0]=Zc[0],Bb[1]=Zc[1],Bb[2]=Zc[2],Bb[3]=Zc[3],Bb[4]=Zc[4],Bb[5]=
Zc[5],Bb[6]=Zc[6],Bb[7]=Zc[7],Bb[8]=Zc[8],Bb[9]=Zc[9],Bb[10]=Zc[10],Bb[11]=Zc[11],Bb[12]=Zc[12],Bb[13]=Zc[13],Bb[14]=Zc[14],Bb[15]=Zc[15],Bb));md=a.hiB;ba.uniformMatrix4fv(W.location,!1,Array.isArray(md)||md instanceof Float32Array?md:(db[0]=md[0],db[1]=md[1],db[2]=md[2],db[3]=md[3],db[4]=md[4],db[5]=md[5],db[6]=md[6],db[7]=md[7],db[8]=md[8],db[9]=md[9],db[10]=md[10],db[11]=md[11],db[12]=md[12],db[13]=md[13],db[14]=md[14],db[15]=md[15],db));dd=a.loC;ba.uniformMatrix4fv(ea.location,!1,Array.isArray(dd)||
dd instanceof Float32Array?dd:(Ob[0]=dd[0],Ob[1]=dd[1],Ob[2]=dd[2],Ob[3]=dd[3],Ob[4]=dd[4],Ob[5]=dd[5],Ob[6]=dd[6],Ob[7]=dd[7],Ob[8]=dd[8],Ob[9]=dd[9],Ob[10]=dd[10],Ob[11]=dd[11],Ob[12]=dd[12],Ob[13]=dd[13],Ob[14]=dd[14],Ob[15]=dd[15],Ob));$c=a.hiC;ba.uniformMatrix4fv(la.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(bb[0]=$c[0],bb[1]=$c[1],bb[2]=$c[2],bb[3]=$c[3],bb[4]=$c[4],bb[5]=$c[5],bb[6]=$c[6],bb[7]=$c[7],bb[8]=$c[8],bb[9]=$c[9],bb[10]=$c[10],bb[11]=$c[11],bb[12]=$c[12],bb[13]=
$c[13],bb[14]=$c[14],bb[15]=$c[15],bb));kc=a.loD;ba.uniformMatrix4fv(Da.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(kb[0]=kc[0],kb[1]=kc[1],kb[2]=kc[2],kb[3]=kc[3],kb[4]=kc[4],kb[5]=kc[5],kb[6]=kc[6],kb[7]=kc[7],kb[8]=kc[8],kb[9]=kc[9],kb[10]=kc[10],kb[11]=kc[11],kb[12]=kc[12],kb[13]=kc[13],kb[14]=kc[14],kb[15]=kc[15],kb));cc=a.hiD;ba.uniformMatrix4fv(ra.location,!1,Array.isArray(cc)||cc instanceof Float32Array?cc:(Va[0]=cc[0],Va[1]=cc[1],Va[2]=cc[2],Va[3]=cc[3],Va[4]=cc[4],Va[5]=
cc[5],Va[6]=cc[6],Va[7]=cc[7],Va[8]=cc[8],Va[9]=cc[9],Va[10]=cc[10],Va[11]=cc[11],Va[12]=cc[12],Va[13]=cc[13],Va[14]=cc[14],Va[15]=cc[15],Va));ad=a.resolution;Wc=ad[0];zc=ad[1];l&&ed===Wc&&id===zc||(ed=Wc,id=zc,ba.uniform2f(sa.location,Wc,zc));Ad=a.viewBoxPos;He=Ad[0];jd=Ad[1];l&&Ie===He&&bf===jd||(Ie=He,bf=jd,ba.uniform2f(Aa.location,He,jd));Bd=a.viewBoxSize;ge=Bd[0];Yd=Bd[1];l&&ce===ge&&Jd===Yd||(ce=ge,Jd=Yd,ba.uniform2f(Ea.location,ge,Yd));Hd=a.maskHeight;l&&od===Hd||(od=Hd,ba.uniform1f(ja.location,
Hd));Vc=a.drwLayer;l&&ud===Vc||(ud=Vc,ba.uniform1f(G.location,Vc));sd=a.contextColor;kd=sd[0];Cd=sd[1];Pa=sd[2];se=sd[3];l&&vd===kd&&Dd===Cd&&je===Pa&&ke===se||(vd=kd,Dd=Cd,je=Pa,ke=se,ba.uniform4f(T.location,kd,Cd,Pa,se));(ie=a.maskTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);he=ie._texture;ba.uniform1i(pa.location,he.bind());te=a.offset;if(de=a.count)gd?ba.drawElements(1,de,gd.type,te<<(gd.type-5121>>1)):ba.drawArrays(1,te,de),Y.viewportWidth=qd,Y.viewportHeight=oc,he.unbind()}X.unbind();
va.dirty=!0;I.setVAO(null);va.profile=f},draw:function(c){var g,k,f,a,l,M;g=ob.next;g!==ob.cur&&(g?ba.bindFramebuffer(36160,g.framebuffer):ba.bindFramebuffer(36160,null),ob.cur=g);if(va.dirty){g=xe[0];M=xe[1];k=xe[2];f=xe[3];if(g!==Nd[0]||M!==Nd[1]||k!==Nd[2]||f!==Nd[3])ba.colorMask(g,M,k,f),Nd[0]=g,Nd[1]=M,Nd[2]=k,Nd[3]=f;g=wd.frontFace;g!==va.frontFace&&(ba.frontFace(g),va.frontFace=g);g=wd.polygonOffset_enable;g!==va.polygonOffset_enable&&(g?ba.enable(32823):ba.disable(32823),va.polygonOffset_enable=
g);g=Vd[0];M=Vd[1];if(g!==ae[0]||M!==ae[1])ba.polygonOffset(g,M),ae[0]=g,ae[1]=M;g=wd.sample_alpha;g!==va.sample_alpha&&(g?ba.enable(32926):ba.disable(32926),va.sample_alpha=g);g=wd.sample_enable;g!==va.sample_enable&&(g?ba.enable(32928):ba.disable(32928),va.sample_enable=g);g=fe[0];M=fe[1];if(g!==$d[0]||M!==$d[1])ba.sampleCoverage(g,M),$d[0]=g,$d[1]=M;g=wd.stencil_enable;g!==va.stencil_enable&&(g?ba.enable(2960):ba.disable(2960),va.stencil_enable=g);g=wd.stencil_mask;g!==va.stencil_mask&&(ba.stencilMask(g),
va.stencil_mask=g);g=Se[0];M=Se[1];k=Se[2];if(g!==Fd[0]||M!==Fd[1]||k!==Fd[2])ba.stencilFunc(g,M,k),Fd[0]=g,Fd[1]=M,Fd[2]=k;g=Xd[0];M=Xd[1];k=Xd[2];f=Xd[3];if(g!==Od[0]||M!==Od[1]||k!==Od[2]||f!==Od[3])ba.stencilOpSeparate(g,M,k,f),Od[0]=g,Od[1]=M,Od[2]=k,Od[3]=f;g=Ae[0];M=Ae[1];k=Ae[2];f=Ae[3];if(g!==qe[0]||M!==qe[1]||k!==qe[2]||f!==qe[3])ba.stencilOpSeparate(g,M,k,f),qe[0]=g,qe[1]=M,qe[2]=k,qe[3]=f}bd.height=c.viewportHeight;bd.width=c.viewportWidth;bd.x=c.viewportX;bd.y=c.viewportY;k=bd.x|0;f=
bd.y|0;a="width"in bd?bd.width|0:Y.framebufferWidth-k;l="height"in bd?bd.height|0:Y.framebufferHeight-f;g=Y.viewportWidth;Y.viewportWidth=a;M=Y.viewportHeight;Y.viewportHeight=l;ba.viewport(k,f,a,l);nd[0]=k;nd[1]=f;nd[2]=a;nd[3]=l;ba.blendColor(0,0,0,0);we[0]=0;we[1]=0;we[2]=0;we[3]=0;ba.disable(3042);va.blend_enable=!1;ba.blendEquationSeparate(32774,32774);xd[0]=32774;xd[1]=32774;ba.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ba.enable(2884);va.cull_enable=!0;ba.cullFace(1029);
va.cull_face=1029;ba.enable(2929);va.depth_enable=!0;ba.depthFunc(513);va.depth_func=513;ba.depthMask(!0);va.depth_mask=!0;ba.depthRange(0,1);ia[0]=0;ia[1]=1;ba.disable(3024);va.dither=!1;ba.lineWidth(2);va.lineWidth=2;rd.height=c.scissorHeight;rd.width=c.scissorWidth;rd.x=c.scissorX;rd.y=c.scissorY;k=rd.x|0;f=rd.y|0;a="width"in rd?rd.width|0:Y.framebufferWidth-k;l="height"in rd?rd.height|0:Y.framebufferHeight-f;ba.scissor(k,f,a,l);Oe[0]=k;Oe[1]=f;Oe[2]=a;Oe[3]=l;ba.enable(3089);va.scissor_enable=
!0;k=va.profile;va.profile=!1;ba.useProgram(D.program);I.setVAO(null);f=Ba.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==K.dtype||4!==a.size||a.buffer!==K||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,K.buffer),ba.vertexAttribPointer(f,4,K.dtype,!1,0,0),a.type=K.dtype,a.size=4,a.buffer=K,a.normalized=!1,a.offset=0,a.stride=0;f=Ma.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==m.dtype||4!==a.size||a.buffer!==m||!1!==a.normalized||0!==
a.offset||0!==a.stride)ba.bindBuffer(34962,m.buffer),ba.vertexAttribPointer(f,4,m.dtype,!1,0,0),a.type=m.dtype,a.size=4,a.buffer=m,a.normalized=!1,a.offset=0,a.stride=0;f=Z.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==e.dtype||4!==a.size||a.buffer!==e||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,e.buffer),ba.vertexAttribPointer(f,4,e.dtype,!1,0,0),a.type=e.dtype,a.size=4,a.buffer=e,a.normalized=!1,a.offset=0,a.stride=0;f=zb.location;a=ga[f];a.buffer||
ba.enableVertexAttribArray(f);if(a.type!==d.dtype||4!==a.size||a.buffer!==d||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,d.buffer),ba.vertexAttribPointer(f,4,d.dtype,!1,0,0),a.type=d.dtype,a.size=4,a.buffer=d,a.normalized=!1,a.offset=0,a.stride=0;f=Za.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==b.dtype||4!==a.size||a.buffer!==b||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,b.buffer),ba.vertexAttribPointer(f,4,b.dtype,!1,0,0),a.type=
b.dtype,a.size=4,a.buffer=b,a.normalized=!1,a.offset=0,a.stride=0;f=u.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==t.dtype||4!==a.size||a.buffer!==t||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,t.buffer),ba.vertexAttribPointer(f,4,t.dtype,!1,0,0),a.type=t.dtype,a.size=4,a.buffer=t,a.normalized=!1,a.offset=0,a.stride=0;f=n.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==y.dtype||4!==a.size||a.buffer!==y||!1!==a.normalized||0!==a.offset||
0!==a.stride)ba.bindBuffer(34962,y.buffer),ba.vertexAttribPointer(f,4,y.dtype,!1,0,0),a.type=y.dtype,a.size=4,a.buffer=y,a.normalized=!1,a.offset=0,a.stride=0;f=R.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==p.dtype||4!==a.size||a.buffer!==p||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,p.buffer),ba.vertexAttribPointer(f,4,p.dtype,!1,0,0),a.type=p.dtype,a.size=4,a.buffer=p,a.normalized=!1,a.offset=0,a.stride=0;f=ua.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);
if(a.type!==h.dtype||4!==a.size||a.buffer!==h||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,h.buffer),ba.vertexAttribPointer(f,4,h.dtype,!1,0,0),a.type=h.dtype,a.size=4,a.buffer=h,a.normalized=!1,a.offset=0,a.stride=0;f=wa.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==N.dtype||4!==a.size||a.buffer!==N||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,N.buffer),ba.vertexAttribPointer(f,4,N.dtype,!1,0,0),a.type=N.dtype,a.size=4,a.buffer=N,
a.normalized=!1,a.offset=0,a.stride=0;f=Qa.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==w.dtype||4!==a.size||a.buffer!==w||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,w.buffer),ba.vertexAttribPointer(f,4,w.dtype,!1,0,0),a.type=w.dtype,a.size=4,a.buffer=w,a.normalized=!1,a.offset=0,a.stride=0;f=lc.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==J.dtype||4!==a.size||a.buffer!==J||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,
J.buffer),ba.vertexAttribPointer(f,4,J.dtype,!1,0,0),a.type=J.dtype,a.size=4,a.buffer=J,a.normalized=!1,a.offset=0,a.stride=0;f=fa.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==aa.dtype||4!==a.size||a.buffer!==aa||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,aa.buffer),ba.vertexAttribPointer(f,4,aa.dtype,!1,0,0),a.type=aa.dtype,a.size=4,a.buffer=aa,a.normalized=!1,a.offset=0,a.stride=0;f=E.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==
x.dtype||4!==a.size||a.buffer!==x||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,x.buffer),ba.vertexAttribPointer(f,4,x.dtype,!1,0,0),a.type=x.dtype,a.size=4,a.buffer=x,a.normalized=!1,a.offset=0,a.stride=0;f=ta.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==S.dtype||4!==a.size||a.buffer!==S||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,S.buffer),ba.vertexAttribPointer(f,4,S.dtype,!1,0,0),a.type=S.dtype,a.size=4,a.buffer=S,a.normalized=
!1,a.offset=0,a.stride=0;f=da.location;a=ga[f];a.buffer||ba.enableVertexAttribArray(f);if(a.type!==r.dtype||4!==a.size||a.buffer!==r||!1!==a.normalized||0!==a.offset||0!==a.stride)ba.bindBuffer(34962,r.buffer),ba.vertexAttribPointer(f,4,r.dtype,!1,0,0),a.type=r.dtype,a.size=4,a.buffer=r,a.normalized=!1,a.offset=0,a.stride=0;f=c.dim0A;ba.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],
Lc[8]=f[8],Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=c.dim1A;ba.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(pd[0]=f[0],pd[1]=f[1],pd[2]=f[2],pd[3]=f[3],pd[4]=f[4],pd[5]=f[5],pd[6]=f[6],pd[7]=f[7],pd[8]=f[8],pd[9]=f[9],pd[10]=f[10],pd[11]=f[11],pd[12]=f[12],pd[13]=f[13],pd[14]=f[14],pd[15]=f[15],pd));f=c.dim0B;ba.uniformMatrix4fv(F.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fc[0]=f[0],Fc[1]=f[1],
Fc[2]=f[2],Fc[3]=f[3],Fc[4]=f[4],Fc[5]=f[5],Fc[6]=f[6],Fc[7]=f[7],Fc[8]=f[8],Fc[9]=f[9],Fc[10]=f[10],Fc[11]=f[11],Fc[12]=f[12],Fc[13]=f[13],Fc[14]=f[14],Fc[15]=f[15],Fc));f=c.dim1B;ba.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(fd[0]=f[0],fd[1]=f[1],fd[2]=f[2],fd[3]=f[3],fd[4]=f[4],fd[5]=f[5],fd[6]=f[6],fd[7]=f[7],fd[8]=f[8],fd[9]=f[9],fd[10]=f[10],fd[11]=f[11],fd[12]=f[12],fd[13]=f[13],fd[14]=f[14],fd[15]=f[15],fd));f=c.dim0C;ba.uniformMatrix4fv(q.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Oc[0]=f[0],Oc[1]=f[1],Oc[2]=f[2],Oc[3]=f[3],Oc[4]=f[4],Oc[5]=f[5],Oc[6]=f[6],Oc[7]=f[7],Oc[8]=f[8],Oc[9]=f[9],Oc[10]=f[10],Oc[11]=f[11],Oc[12]=f[12],Oc[13]=f[13],Oc[14]=f[14],Oc[15]=f[15],Oc));f=c.dim1C;ba.uniformMatrix4fv(oa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ic[0]=f[0],Ic[1]=f[1],Ic[2]=f[2],Ic[3]=f[3],Ic[4]=f[4],Ic[5]=f[5],Ic[6]=f[6],Ic[7]=f[7],Ic[8]=f[8],Ic[9]=f[9],Ic[10]=f[10],Ic[11]=f[11],Ic[12]=f[12],Ic[13]=f[13],Ic[14]=f[14],Ic[15]=f[15],
Ic));f=c.dim0D;ba.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Db[0]=f[0],Db[1]=f[1],Db[2]=f[2],Db[3]=f[3],Db[4]=f[4],Db[5]=f[5],Db[6]=f[6],Db[7]=f[7],Db[8]=f[8],Db[9]=f[9],Db[10]=f[10],Db[11]=f[11],Db[12]=f[12],Db[13]=f[13],Db[14]=f[14],Db[15]=f[15],Db));f=c.dim1D;ba.uniformMatrix4fv(v.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hb[0]=f[0],Hb[1]=f[1],Hb[2]=f[2],Hb[3]=f[3],Hb[4]=f[4],Hb[5]=f[5],Hb[6]=f[6],Hb[7]=f[7],Hb[8]=f[8],Hb[9]=f[9],Hb[10]=f[10],
Hb[11]=f[11],Hb[12]=f[12],Hb[13]=f[13],Hb[14]=f[14],Hb[15]=f[15],Hb));f=c.loA;ba.uniformMatrix4fv(Ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(uc[0]=f[0],uc[1]=f[1],uc[2]=f[2],uc[3]=f[3],uc[4]=f[4],uc[5]=f[5],uc[6]=f[6],uc[7]=f[7],uc[8]=f[8],uc[9]=f[9],uc[10]=f[10],uc[11]=f[11],uc[12]=f[12],uc[13]=f[13],uc[14]=f[14],uc[15]=f[15],uc));f=c.hiA;ba.uniformMatrix4fv(ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ab[0]=f[0],Ab[1]=f[1],Ab[2]=f[2],Ab[3]=f[3],Ab[4]=f[4],Ab[5]=
f[5],Ab[6]=f[6],Ab[7]=f[7],Ab[8]=f[8],Ab[9]=f[9],Ab[10]=f[10],Ab[11]=f[11],Ab[12]=f[12],Ab[13]=f[13],Ab[14]=f[14],Ab[15]=f[15],Ab));f=c.loB;ba.uniformMatrix4fv(xa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xc[0]=f[0],xc[1]=f[1],xc[2]=f[2],xc[3]=f[3],xc[4]=f[4],xc[5]=f[5],xc[6]=f[6],xc[7]=f[7],xc[8]=f[8],xc[9]=f[9],xc[10]=f[10],xc[11]=f[11],xc[12]=f[12],xc[13]=f[13],xc[14]=f[14],xc[15]=f[15],xc));f=c.hiB;ba.uniformMatrix4fv(W.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Eb[0]=f[0],Eb[1]=f[1],Eb[2]=f[2],Eb[3]=f[3],Eb[4]=f[4],Eb[5]=f[5],Eb[6]=f[6],Eb[7]=f[7],Eb[8]=f[8],Eb[9]=f[9],Eb[10]=f[10],Eb[11]=f[11],Eb[12]=f[12],Eb[13]=f[13],Eb[14]=f[14],Eb[15]=f[15],Eb));f=c.loC;ba.uniformMatrix4fv(ea.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=c.hiC;ba.uniformMatrix4fv(la.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(mc[0]=f[0],mc[1]=f[1],mc[2]=f[2],mc[3]=f[3],mc[4]=f[4],mc[5]=f[5],mc[6]=f[6],mc[7]=f[7],mc[8]=f[8],mc[9]=f[9],mc[10]=f[10],mc[11]=f[11],mc[12]=f[12],mc[13]=f[13],mc[14]=f[14],mc[15]=f[15],mc));f=c.loD;ba.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],Gc[2]=f[2],Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=
f[14],Gc[15]=f[15],Gc));f=c.hiD;ba.uniformMatrix4fv(ra.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(gd[0]=f[0],gd[1]=f[1],gd[2]=f[2],gd[3]=f[3],gd[4]=f[4],gd[5]=f[5],gd[6]=f[6],gd[7]=f[7],gd[8]=f[8],gd[9]=f[9],gd[10]=f[10],gd[11]=f[11],gd[12]=f[12],gd[13]=f[13],gd[14]=f[14],gd[15]=f[15],gd));f=c.resolution;ba.uniform2f(sa.location,f[0],f[1]);f=c.viewBoxPos;ba.uniform2f(Aa.location,f[0],f[1]);f=c.viewBoxSize;ba.uniform2f(Ea.location,f[0],f[1]);ba.uniform1f(ja.location,c.maskHeight);ba.uniform1f(G.location,
c.drwLayer);f=c.contextColor;ba.uniform4f(T.location,f[0],f[1],f[2],f[3]);(f=c.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;ba.uniform1i(pa.location,f.bind());ba.uniform1i(Fa.location,L.bind());(a=Ya.elements)?ba.bindBuffer(34963,a.buffer.buffer):I.currentVAO&&(a=Ga.getElements(I.currentVAO.elements))&&ba.bindBuffer(34963,a.buffer.buffer);l=c.offset;if(c=c.count)a?ba.drawElements(1,c,a.type,l<<(a.type-5121>>1)):ba.drawArrays(1,l,c),va.dirty=!0,I.setVAO(null),Y.viewportWidth=
g,Y.viewportHeight=M,va.profile=k,f.unbind(),L.unbind()},scope:function(u,a,q){var n,v,E,Z,R,ta,Ma,Fa,Q,G,W,zb,F,T,ea,sa,fa,ga,P,ua,O,ca,Aa,D,Ea,ba,qa,L,ma,xa,ra,ja,X,Za,da,Ba,wa,pa,Da,oa,la,lc,Ca,Qa,Ga,ob,za,gb,ec,I,Hb,Oc,Db,fc,pc,Ab,Eb,$d,Ae,nc,Xd,qc,db,bb,Va,Hc,Vf,Se,Ic,mc,kb,Fc,qe,fd,Fd,Lc,uc,Bb,xc,xd,pd,Gc,Cc,Jc,Nd,nd,we,Od,Ob,Vd,Sc,Oe,Xc,gd,fe,xe,ze,ae,ia,Kd,Pa,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,
Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Re,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,dg,Rf,Sf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Tf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Uf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=u.viewportHeight;bd.width=u.viewportWidth;bd.x=u.viewportX;bd.y=u.viewportY;
n=bd.x|0;v=bd.y|0;E="width"in bd?bd.width|0:Y.framebufferWidth-n;Z="height"in bd?bd.height|0:Y.framebufferHeight-v;R=Y.viewportWidth;Y.viewportWidth=E;ta=Y.viewportHeight;Y.viewportHeight=Z;Ma=Gd[0];Gd[0]=n;Fa=Gd[1];Gd[1]=v;Q=Gd[2];Gd[2]=E;G=Gd[3];Gd[3]=Z;W=Ub[0];Ub[0]=0;zb=Ub[1];Ub[1]=0;F=Ub[2];Ub[2]=0;T=Ub[3];Ub[3]=0;ea=wd.blend_enable;wd.blend_enable=!1;sa=Ed[0];Ed[0]=32774;fa=Ed[1];Ed[1]=32774;ga=Ud[0];Ud[0]=770;P=Ud[1];Ud[1]=771;ua=Ud[2];Ud[2]=1;O=Ud[3];Ud[3]=1;ca=wd.cull_enable;wd.cull_enable=
!0;Aa=wd.cull_face;wd.cull_face=1029;D=wd.depth_enable;wd.depth_enable=!0;Ea=wd.depth_func;wd.depth_func=513;ba=wd.depth_mask;wd.depth_mask=!0;qa=ne[0];ne[0]=0;L=ne[1];ne[1]=1;ma=wd.dither;wd.dither=!1;xa=wd.lineWidth;wd.lineWidth=2;rd.height=u.scissorHeight;rd.width=u.scissorWidth;rd.x=u.scissorX;rd.y=u.scissorY;ra=rd.x|0;ja=rd.y|0;X="width"in rd?rd.width|0:Y.framebufferWidth-ra;Za="height"in rd?rd.height|0:Y.framebufferHeight-ja;da=Ce[0];Ce[0]=ra;Ba=Ce[1];Ce[1]=ja;wa=Ce[2];Ce[2]=X;pa=Ce[3];Ce[3]=
Za;Da=wd.scissor_enable;wd.scissor_enable=!0;oa=va.profile;va.profile=!1;la=u.offset;lc=Ya.offset;Ya.offset=la;Ca=u.count;Qa=Ya.count;Ya.count=Ca;Ga=Ya.primitive;Ya.primitive=1;ob=u.contextColor;za=Ha[24];Ha[24]=ob;gb=u.dim0A;ec=Ha[3];Ha[3]=gb;I=u.dim0B;Hb=Ha[5];Ha[5]=I;Oc=u.dim0C;Db=Ha[7];Ha[7]=Oc;fc=u.dim0D;pc=Ha[9];Ha[9]=fc;Ab=u.dim1A;Eb=Ha[4];Ha[4]=Ab;$d=u.dim1B;Ae=Ha[6];Ha[6]=$d;nc=u.dim1C;Xd=Ha[8];Ha[8]=nc;qc=u.dim1D;db=Ha[10];Ha[10]=qc;bb=u.drwLayer;Va=Ha[23];Ha[23]=bb;Hc=u.hiA;Vf=Ha[12];Ha[12]=
Hc;Se=u.hiB;Ic=Ha[14];Ha[14]=Se;mc=u.hiC;kb=Ha[16];Ha[16]=mc;Fc=u.hiD;qe=Ha[18];Ha[18]=Fc;fd=u.loA;Fd=Ha[11];Ha[11]=fd;Lc=u.loB;uc=Ha[13];Ha[13]=Lc;Bb=u.loC;xc=Ha[15];Ha[15]=Bb;xd=u.loD;pd=Ha[17];Ha[17]=xd;Gc=u.maskHeight;Cc=Ha[22];Ha[22]=Gc;Jc=u.maskTexture;Nd=Ha[25];Ha[25]=Jc;nd=Ha[26];Ha[26]=ha;we=u.resolution;Od=Ha[19];Ha[19]=we;Ob=u.viewBoxPos;Vd=Ha[20];Ha[20]=Ob;Sc=u.viewBoxSize;Oe=Ha[21];Ha[21]=Sc;Xc=k.buffer;k.buffer=r;gd=k.divisor;k.divisor=0;fe=k.normalized;k.normalized=!1;xe=k.offset;k.offset=
0;ze=k.size;k.size=0;ae=k.state;k.state=1;ia=k.stride;k.stride=0;Kd=k.type;k.type=r.dtype;Pa=k.w;k.w=0;Jd=k.x;k.x=0;Hd=k.y;k.y=0;od=k.z;k.z=0;Vc=f.buffer;f.buffer=K;ud=f.divisor;f.divisor=0;sd=f.normalized;f.normalized=!1;kd=f.offset;f.offset=0;vd=f.size;f.size=0;Cd=f.state;f.state=1;Dd=f.stride;f.stride=0;re=f.type;f.type=K.dtype;je=f.w;f.w=0;se=f.x;f.x=0;ke=f.y;f.y=0;ie=f.z;f.z=0;he=U.buffer;U.buffer=m;te=U.divisor;U.divisor=0;de=U.normalized;U.normalized=!1;le=U.offset;U.offset=0;Nc=U.size;U.size=
0;hd=U.state;U.state=1;ue=U.stride;U.stride=0;oe=U.type;U.type=m.dtype;Ld=U.w;U.w=0;Pd=U.x;U.x=0;Qd=U.y;U.y=0;Rd=U.z;U.z=0;me=z.buffer;z.buffer=e;ye=z.divisor;z.divisor=0;Be=z.normalized;z.normalized=!1;pe=z.offset;z.offset=0;hf=z.size;z.size=0;Te=z.state;z.state=1;Pe=z.stride;z.stride=0;ve=z.type;z.type=e.dtype;Fe=z.w;z.w=0;Je=z.x;z.x=0;Ke=z.y;z.y=0;Le=z.z;z.z=0;Ge=V.buffer;V.buffer=d;Md=V.divisor;V.divisor=0;Wd=V.normalized;V.normalized=!1;be=V.offset;V.offset=0;ee=V.size;V.size=0;Me=V.state;V.state=
1;Id=V.stride;V.stride=0;Sd=V.type;V.type=d.dtype;De=V.w;V.w=0;Ne=V.x;V.x=0;af=V.y;V.y=0;$e=V.z;V.z=0;Ue=B.buffer;B.buffer=b;Qe=B.divisor;B.divisor=0;Ze=B.normalized;B.normalized=!1;Ye=B.offset;B.offset=0;Ve=B.size;B.size=0;We=B.state;B.state=1;Td=B.stride;B.stride=0;Zd=B.type;B.type=b.dtype;Xe=B.w;B.w=0;jf=B.x;B.x=0;nf=B.y;B.y=0;ef=B.z;B.z=0;kf=l.buffer;l.buffer=t;lf=l.divisor;l.divisor=0;mf=l.normalized;l.normalized=!1;rf=l.offset;l.offset=0;of=l.size;l.size=0;sf=l.state;l.state=1;Bf=l.stride;l.stride=
0;Cf=l.type;l.type=t.dtype;Re=l.w;l.w=0;Ee=l.x;l.x=0;pf=l.y;l.y=0;qf=l.z;l.z=0;Df=ya.buffer;ya.buffer=y;Gf=ya.divisor;ya.divisor=0;Af=ya.normalized;ya.normalized=!1;Ef=ya.offset;ya.offset=0;Ff=ya.size;ya.size=0;wf=ya.state;ya.state=1;xf=ya.stride;ya.stride=0;vf=ya.type;ya.type=y.dtype;yf=ya.w;ya.w=0;zf=ya.x;ya.x=0;If=ya.y;ya.y=0;Jf=ya.z;ya.z=0;Kf=H.buffer;H.buffer=p;Lf=H.divisor;H.divisor=0;tf=H.normalized;H.normalized=!1;Qf=H.offset;H.offset=0;Hf=H.size;H.size=0;uf=H.state;H.state=1;dg=H.stride;
H.stride=0;Rf=H.type;H.type=p.dtype;Sf=H.w;H.w=0;qg=H.x;H.x=0;ff=H.y;H.y=0;cf=H.z;H.z=0;Mf=C.buffer;C.buffer=h;Nf=C.divisor;C.divisor=0;eg=C.normalized;C.normalized=!1;fg=C.offset;C.offset=0;gg=C.size;C.size=0;hg=C.state;C.state=1;ig=C.stride;C.stride=0;Wf=C.type;C.type=h.dtype;Tf=C.w;C.w=0;Xf=C.x;C.x=0;Yf=C.y;C.y=0;Zf=C.z;C.z=0;jg=c.buffer;c.buffer=N;rg=c.divisor;c.divisor=0;sg=c.normalized;c.normalized=!1;tg=c.offset;c.offset=0;ug=c.size;c.size=0;vg=c.state;c.state=1;wg=c.stride;c.stride=0;xg=c.type;
c.type=N.dtype;yg=c.w;c.w=0;zg=c.x;c.x=0;Ag=c.y;c.y=0;Bg=c.z;c.z=0;gf=M.buffer;M.buffer=w;df=M.divisor;M.divisor=0;Of=M.normalized;M.normalized=!1;Pf=M.offset;M.offset=0;kg=M.size;M.size=0;lg=M.state;M.state=1;mg=M.stride;M.stride=0;ng=M.type;M.type=w.dtype;og=M.w;M.w=0;$f=M.x;M.x=0;Uf=M.y;M.y=0;ag=M.z;M.z=0;bg=g.buffer;g.buffer=J;cg=g.divisor;g.divisor=0;pg=g.normalized;g.normalized=!1;Cg=g.offset;g.offset=0;Dg=g.size;g.size=0;Eg=g.state;g.state=1;Fg=g.stride;g.stride=0;Gg=g.type;g.type=J.dtype;
Hg=g.w;g.w=0;Ig=g.x;g.x=0;Jg=g.y;g.y=0;Kg=g.z;g.z=0;Lg=ka.buffer;ka.buffer=aa;Mg=ka.divisor;ka.divisor=0;Ng=ka.normalized;ka.normalized=!1;Og=ka.offset;ka.offset=0;Pg=ka.size;ka.size=0;Qg=ka.state;ka.state=1;Rg=ka.stride;ka.stride=0;Sg=ka.type;ka.type=aa.dtype;Tg=ka.w;ka.w=0;Ug=ka.x;ka.x=0;Vg=ka.y;ka.y=0;Wg=ka.z;ka.z=0;Xg=A.buffer;A.buffer=x;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=
x.dtype;eh=A.w;A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=na.buffer;na.buffer=S;jh=na.divisor;na.divisor=0;kh=na.normalized;na.normalized=!1;lh=na.offset;na.offset=0;mh=na.size;na.size=0;nh=na.state;na.state=1;oh=na.stride;na.stride=0;ph=na.type;na.type=S.dtype;qh=na.w;na.w=0;rh=na.x;na.x=0;sh=na.y;na.y=0;th=na.z;na.z=0;uh=ac.vert;ac.vert=2;vh=ac.frag;ac.frag=1;va.dirty=!0;a(Y,u,q);Y.viewportWidth=R;Y.viewportHeight=ta;Gd[0]=Ma;Gd[1]=Fa;Gd[2]=Q;Gd[3]=G;Ub[0]=W;Ub[1]=zb;Ub[2]=F;Ub[3]=T;wd.blend_enable=
ea;Ed[0]=sa;Ed[1]=fa;Ud[0]=ga;Ud[1]=P;Ud[2]=ua;Ud[3]=O;wd.cull_enable=ca;wd.cull_face=Aa;wd.depth_enable=D;wd.depth_func=Ea;wd.depth_mask=ba;ne[0]=qa;ne[1]=L;wd.dither=ma;wd.lineWidth=xa;Ce[0]=da;Ce[1]=Ba;Ce[2]=wa;Ce[3]=pa;wd.scissor_enable=Da;va.profile=oa;Ya.offset=lc;Ya.count=Qa;Ya.primitive=Ga;Ha[24]=za;Ha[3]=ec;Ha[5]=Hb;Ha[7]=Db;Ha[9]=pc;Ha[4]=Eb;Ha[6]=Ae;Ha[8]=Xd;Ha[10]=db;Ha[23]=Va;Ha[12]=Vf;Ha[14]=Ic;Ha[16]=kb;Ha[18]=qe;Ha[11]=Fd;Ha[13]=uc;Ha[15]=xc;Ha[17]=pd;Ha[22]=Cc;Ha[25]=Nd;Ha[26]=nd;
Ha[19]=Od;Ha[20]=Vd;Ha[21]=Oe;k.buffer=Xc;k.divisor=gd;k.normalized=fe;k.offset=xe;k.size=ze;k.state=ae;k.stride=ia;k.type=Kd;k.w=Pa;k.x=Jd;k.y=Hd;k.z=od;f.buffer=Vc;f.divisor=ud;f.normalized=sd;f.offset=kd;f.size=vd;f.state=Cd;f.stride=Dd;f.type=re;f.w=je;f.x=se;f.y=ke;f.z=ie;U.buffer=he;U.divisor=te;U.normalized=de;U.offset=le;U.size=Nc;U.state=hd;U.stride=ue;U.type=oe;U.w=Ld;U.x=Pd;U.y=Qd;U.z=Rd;z.buffer=me;z.divisor=ye;z.normalized=Be;z.offset=pe;z.size=hf;z.state=Te;z.stride=Pe;z.type=ve;z.w=
Fe;z.x=Je;z.y=Ke;z.z=Le;V.buffer=Ge;V.divisor=Md;V.normalized=Wd;V.offset=be;V.size=ee;V.state=Me;V.stride=Id;V.type=Sd;V.w=De;V.x=Ne;V.y=af;V.z=$e;B.buffer=Ue;B.divisor=Qe;B.normalized=Ze;B.offset=Ye;B.size=Ve;B.state=We;B.stride=Td;B.type=Zd;B.w=Xe;B.x=jf;B.y=nf;B.z=ef;l.buffer=kf;l.divisor=lf;l.normalized=mf;l.offset=rf;l.size=of;l.state=sf;l.stride=Bf;l.type=Cf;l.w=Re;l.x=Ee;l.y=pf;l.z=qf;ya.buffer=Df;ya.divisor=Gf;ya.normalized=Af;ya.offset=Ef;ya.size=Ff;ya.state=wf;ya.stride=xf;ya.type=vf;ya.w=
yf;ya.x=zf;ya.y=If;ya.z=Jf;H.buffer=Kf;H.divisor=Lf;H.normalized=tf;H.offset=Qf;H.size=Hf;H.state=uf;H.stride=dg;H.type=Rf;H.w=Sf;H.x=qg;H.y=ff;H.z=cf;C.buffer=Mf;C.divisor=Nf;C.normalized=eg;C.offset=fg;C.size=gg;C.state=hg;C.stride=ig;C.type=Wf;C.w=Tf;C.x=Xf;C.y=Yf;C.z=Zf;c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;M.buffer=gf;M.divisor=df;M.normalized=Of;M.offset=Pf;M.size=kg;M.state=lg;M.stride=mg;M.type=ng;M.w=og;
M.x=$f;M.y=Uf;M.z=ag;g.buffer=bg;g.divisor=cg;g.normalized=pg;g.offset=Cg;g.size=Dg;g.state=Eg;g.stride=Fg;g.type=Gg;g.w=Hg;g.x=Ig;g.y=Jg;g.z=Kg;ka.buffer=Lg;ka.divisor=Mg;ka.normalized=Ng;ka.offset=Og;ka.size=Pg;ka.state=Qg;ka.stride=Rg;ka.type=Sg;ka.w=Tg;ka.x=Ug;ka.y=Vg;ka.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;na.buffer=ih;na.divisor=jh;na.normalized=kh;na.offset=lh;na.size=mh;na.state=nh;na.stride=oh;na.type=
ph;na.w=qh;na.x=rh;na.y=sh;na.z=th;ac.vert=uh;ac.frag=vh;va.dirty=!0}}},$1:function(a,ma){var D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,ya,H,C,c;D=a.attributes;K=a.current;m=a.framebuffer;e=a.gl;d=a.next;b=a.vao;t=d.blend_color;y=K.blend_color;p=d.blend_equation;h=K.blend_equation;N=d.blend_func;w=K.blend_func;J=d.colorMask;aa=K.colorMask;x=d.depth_range;S=K.depth_range;r=d.polygonOffset_offset;L=K.polygonOffset_offset;ha=d.sample_coverage;k=K.sample_coverage;f=d.scissor_box;U=K.scissor_box;
z=d.stencil_func;V=K.stencil_func;B=d.stencil_opBack;l=K.stencil_opBack;ya=d.stencil_opFront;H=K.stencil_opFront;C=d.viewport;c=K.viewport;return{poll:function(){var b,g,a,A,D,ma,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra;K.dirty=!1;g=d.blend_enable;a=d.cull_enable;A=d.depth_enable;D=d.dither;ma=d.polygonOffset_enable;X=d.sample_alpha;da=d.sample_enable;T=d.scissor_enable;Q=d.stencil_enable;F=d.cull_face;q=K.cull_face;O=d.depth_func;P=K.depth_func;qa=d.depth_mask;oa=K.depth_mask;v=d.frontFace;G=K.frontFace;
ca=d.lineWidth;W=K.lineWidth;la=d.stencil_mask;ra=K.stencil_mask;b=m.next;b!==m.cur&&(b?e.bindFramebuffer(36160,b.framebuffer):e.bindFramebuffer(36160,null),m.cur=b);g!==K.blend_enable&&(g?e.enable(3042):e.disable(3042),K.blend_enable=g);a!==K.cull_enable&&(a?e.enable(2884):e.disable(2884),K.cull_enable=a);A!==K.depth_enable&&(A?e.enable(2929):e.disable(2929),K.depth_enable=A);D!==K.dither&&(D?e.enable(3024):e.disable(3024),K.dither=D);ma!==K.polygonOffset_enable&&(ma?e.enable(32823):e.disable(32823),
K.polygonOffset_enable=ma);X!==K.sample_alpha&&(X?e.enable(32926):e.disable(32926),K.sample_alpha=X);da!==K.sample_enable&&(da?e.enable(32928):e.disable(32928),K.sample_enable=da);T!==K.scissor_enable&&(T?e.enable(3089):e.disable(3089),K.scissor_enable=T);Q!==K.stencil_enable&&(Q?e.enable(2960):e.disable(2960),K.stencil_enable=Q);if(t[0]!==y[0]||t[1]!==y[1]||t[2]!==y[2]||t[3]!==y[3])e.blendColor(t[0],t[1],t[2],t[3]),y[0]=t[0],y[1]=t[1],y[2]=t[2],y[3]=t[3];if(p[0]!==h[0]||p[1]!==h[1])e.blendEquationSeparate(p[0],
p[1]),h[0]=p[0],h[1]=p[1];if(N[0]!==w[0]||N[1]!==w[1]||N[2]!==w[2]||N[3]!==w[3])e.blendFuncSeparate(N[0],N[1],N[2],N[3]),w[0]=N[0],w[1]=N[1],w[2]=N[2],w[3]=N[3];if(J[0]!==aa[0]||J[1]!==aa[1]||J[2]!==aa[2]||J[3]!==aa[3])e.colorMask(J[0],J[1],J[2],J[3]),aa[0]=J[0],aa[1]=J[1],aa[2]=J[2],aa[3]=J[3];F!==q&&(e.cullFace(F),K.cull_face=F);O!==P&&(e.depthFunc(O),K.depth_func=O);qa!==oa&&(e.depthMask(qa),K.depth_mask=qa);if(x[0]!==S[0]||x[1]!==S[1])e.depthRange(x[0],x[1]),S[0]=x[0],S[1]=x[1];v!==G&&(e.frontFace(v),
K.frontFace=v);ca!==W&&(e.lineWidth(ca),K.lineWidth=ca);if(r[0]!==L[0]||r[1]!==L[1])e.polygonOffset(r[0],r[1]),L[0]=r[0],L[1]=r[1];if(ha[0]!==k[0]||ha[1]!==k[1])e.sampleCoverage(ha[0],ha[1]),k[0]=ha[0],k[1]=ha[1];if(f[0]!==U[0]||f[1]!==U[1]||f[2]!==U[2]||f[3]!==U[3])e.scissor(f[0],f[1],f[2],f[3]),U[0]=f[0],U[1]=f[1],U[2]=f[2],U[3]=f[3];if(z[0]!==V[0]||z[1]!==V[1]||z[2]!==V[2])e.stencilFunc(z[0],z[1],z[2]),V[0]=z[0],V[1]=z[1],V[2]=z[2];la!==ra&&(e.stencilMask(la),K.stencil_mask=la);if(B[0]!==l[0]||
B[1]!==l[1]||B[2]!==l[2]||B[3]!==l[3])e.stencilOpSeparate(B[0],B[1],B[2],B[3]),l[0]=B[0],l[1]=B[1],l[2]=B[2],l[3]=B[3];if(ya[0]!==H[0]||ya[1]!==H[1]||ya[2]!==H[2]||ya[3]!==H[3])e.stencilOpSeparate(ya[0],ya[1],ya[2],ya[3]),H[0]=ya[0],H[1]=ya[1],H[2]=ya[2],H[3]=ya[3];if(C[0]!==c[0]||C[1]!==c[1]||C[2]!==c[2]||C[3]!==c[3])e.viewport(C[0],C[1],C[2],C[3]),c[0]=C[0],c[1]=C[1],c[2]=C[2],c[3]=C[3]},refresh:function(){var a,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa;K.dirty=!1;g=d.blend_enable;ka=d.cull_enable;A=
d.depth_enable;na=d.dither;za=d.polygonOffset_enable;X=d.sample_alpha;da=d.sample_enable;T=d.scissor_enable;Q=d.stencil_enable;F=d.cull_face;q=d.depth_func;O=d.depth_mask;P=d.frontFace;qa=d.lineWidth;oa=d.stencil_mask;(a=m.next)?e.bindFramebuffer(36160,a.framebuffer):e.bindFramebuffer(36160,null);m.cur=a;a=D[0];a.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,
a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(0,a.divisor);a=D[1];a.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(1,a.divisor);a=D[2];a.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):
(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(2,a.divisor);a=D[3];a.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(3,a.divisor);a=D[4];a.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(4,
a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(4,a.divisor);a=D[5];a.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(5,a.divisor);a=D[6];a.buffer?(e.enableVertexAttribArray(6),e.bindBuffer(34962,
a.buffer.buffer),e.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(6,a.divisor);a=D[7];a.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(7,a.divisor);a=D[8];a.buffer?
(e.enableVertexAttribArray(8),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(8,a.divisor);a=D[9];a.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(9,
a.divisor);a=D[10];a.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(10,a.divisor);a=D[11];a.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,
a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(11,a.divisor);a=D[12];a.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(12,a.divisor);a=D[13];a.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,
a.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(13,a.divisor);a=D[14];a.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(14,a.divisor);a=D[15];a.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,a.buffer.buffer),
e.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);ma.vertexAttribDivisorANGLE(15,a.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);g?e.enable(3042):e.disable(3042);K.blend_enable=g;ka?e.enable(2884):e.disable(2884);K.cull_enable=ka;A?e.enable(2929):e.disable(2929);K.depth_enable=A;na?e.enable(3024):e.disable(3024);K.dither=na;za?e.enable(32823):e.disable(32823);K.polygonOffset_enable=za;X?e.enable(32926):
e.disable(32926);K.sample_alpha=X;da?e.enable(32928):e.disable(32928);K.sample_enable=da;T?e.enable(3089):e.disable(3089);K.scissor_enable=T;Q?e.enable(2960):e.disable(2960);K.stencil_enable=Q;e.blendColor(t[0],t[1],t[2],t[3]);y[0]=t[0];y[1]=t[1];y[2]=t[2];y[3]=t[3];e.blendEquationSeparate(p[0],p[1]);h[0]=p[0];h[1]=p[1];e.blendFuncSeparate(N[0],N[1],N[2],N[3]);w[0]=N[0];w[1]=N[1];w[2]=N[2];w[3]=N[3];e.colorMask(J[0],J[1],J[2],J[3]);aa[0]=J[0];aa[1]=J[1];aa[2]=J[2];aa[3]=J[3];e.cullFace(F);K.cull_face=
F;e.depthFunc(q);K.depth_func=q;e.depthMask(O);K.depth_mask=O;e.depthRange(x[0],x[1]);S[0]=x[0];S[1]=x[1];e.frontFace(P);K.frontFace=P;e.lineWidth(qa);K.lineWidth=qa;e.polygonOffset(r[0],r[1]);L[0]=r[0];L[1]=r[1];e.sampleCoverage(ha[0],ha[1]);k[0]=ha[0];k[1]=ha[1];e.scissor(f[0],f[1],f[2],f[3]);U[0]=f[0];U[1]=f[1];U[2]=f[2];U[3]=f[3];e.stencilFunc(z[0],z[1],z[2]);V[0]=z[0];V[1]=z[1];V[2]=z[2];e.stencilMask(oa);K.stencil_mask=oa;e.stencilOpSeparate(B[0],B[1],B[2],B[3]);l[0]=B[0];l[1]=B[1];l[2]=B[2];
l[3]=B[3];e.stencilOpSeparate(ya[0],ya[1],ya[2],ya[3]);H[0]=ya[0];H[1]=ya[1];H[2]=ya[2];H[3]=ya[3];e.viewport(C[0],C[1],C[2],C[3]);c[0]=C[0];c[1]=C[1];c[2]=C[2];c[3]=C[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa){var v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,
Qa,lc,fa,E,ta,Fa,sa,Aa,Ea,ga,Y,va,Ya,Ga,ob,ba,wd,ac,Ha,I,Ub;v=a.attributes;G=a.buffer;ca=a.context;W=a.current;la=a.draw;ra=a.elements;Ca=a.extensions;xa=a.framebuffer;ea=a.gl;Da=a.isBufferArgs;ja=a.next;pa=a.shader;Ba=a.uniforms;Ma=a.vao;Z=ja.blend_color;zb=W.blend_color;Za=ja.blend_equation;u=W.blend_equation;n=ja.blend_func;R=W.blend_func;ua=ja.colorMask;wa=W.colorMask;Qa=ja.depth_range;lc=W.depth_range;fa=ja.polygonOffset_offset;E=W.polygonOffset_offset;ta=ja.sample_coverage;Fa=W.sample_coverage;
sa=ja.scissor_box;Aa=W.scissor_box;Ea=ja.stencil_func;ga=W.stencil_func;Y=ja.stencil_opBack;va=W.stencil_opBack;Ya=ja.stencil_opFront;Ga=W.stencil_opFront;ob=ja.viewport;ba=W.viewport;wd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ac={};ac.buffer=D;ac.divisor=1;Ha={};Ha.buffer=K;Ha.divisor=1;I={};I.buffer=m;I.divisor=1;Ub={};Ub.buffer=e;Ub.divisor=1;return{batch:function(b,d){var e,f,a,k,n,Z;e=xa.next;e!==xa.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):
ea.bindFramebuffer(36160,null),xa.cur=e);if(W.dirty){var m,r,z,B,t,p,x,sa,y,K,J,D,L,S,U,Za,V,Ba,aa,pa,ha,ob,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd;m=ja.dither;m!==W.dither&&(m?ea.enable(3024):ea.disable(3024),W.dither=m);r=ja.depth_func;r!==W.depth_func&&(ea.depthFunc(r),W.depth_func=r);z=Qa[0];B=Qa[1];if(z!==lc[0]||B!==lc[1])ea.depthRange(z,B),lc[0]=z,lc[1]=B;t=ja.depth_mask;t!==W.depth_mask&&(ea.depthMask(t),W.depth_mask=t);p=ua[0];x=ua[1];sa=ua[2];y=ua[3];if(p!==wa[0]||x!==wa[1]||sa!==wa[2]||y!==wa[3])ea.colorMask(p,
x,sa,y),wa[0]=p,wa[1]=x,wa[2]=sa,wa[3]=y;K=ja.cull_enable;K!==W.cull_enable&&(K?ea.enable(2884):ea.disable(2884),W.cull_enable=K);J=ja.cull_face;J!==W.cull_face&&(ea.cullFace(J),W.cull_face=J);D=ja.frontFace;D!==W.frontFace&&(ea.frontFace(D),W.frontFace=D);L=ja.lineWidth;L!==W.lineWidth&&(ea.lineWidth(L),W.lineWidth=L);S=ja.polygonOffset_enable;S!==W.polygonOffset_enable&&(S?ea.enable(32823):ea.disable(32823),W.polygonOffset_enable=S);U=fa[0];Za=fa[1];if(U!==E[0]||Za!==E[1])ea.polygonOffset(U,Za),
E[0]=U,E[1]=Za;V=ja.sample_alpha;V!==W.sample_alpha&&(V?ea.enable(32926):ea.disable(32926),W.sample_alpha=V);Ba=ja.sample_enable;Ba!==W.sample_enable&&(Ba?ea.enable(32928):ea.disable(32928),W.sample_enable=Ba);aa=ta[0];pa=ta[1];if(aa!==Fa[0]||pa!==Fa[1])ea.sampleCoverage(aa,pa),Fa[0]=aa,Fa[1]=pa;ha=ja.stencil_enable;ha!==W.stencil_enable&&(ha?ea.enable(2960):ea.disable(2960),W.stencil_enable=ha);ob=ja.stencil_mask;ob!==W.stencil_mask&&(ea.stencilMask(ob),W.stencil_mask=ob);Ic=Ea[0];Db=Ea[1];Hb=Ea[2];
if(Ic!==ga[0]||Db!==ga[1]||Hb!==ga[2])ea.stencilFunc(Ic,Db,Hb),ga[0]=Ic,ga[1]=Db,ga[2]=Hb;uc=Ya[0];Ab=Ya[1];xc=Ya[2];Eb=Ya[3];if(uc!==Ga[0]||Ab!==Ga[1]||xc!==Ga[2]||Eb!==Ga[3])ea.stencilOpSeparate(uc,Ab,xc,Eb),Ga[0]=uc,Ga[1]=Ab,Ga[2]=xc,Ga[3]=Eb;Jc=Y[0];mc=Y[1];Gc=Y[2];gd=Y[3];if(Jc!==va[0]||mc!==va[1]||Gc!==va[2]||gd!==va[3])ea.stencilOpSeparate(Jc,mc,Gc,gd),va[0]=Jc,va[1]=mc,va[2]=Gc,va[3]=gd}ea.blendColor(0,0,0,0);zb[0]=0;zb[1]=0;zb[2]=0;zb[3]=0;ea.enable(3042);W.blend_enable=!0;ea.blendEquationSeparate(32774,
32774);u[0]=32774;u[1]=32774;ea.blendFuncSeparate(770,771,773,1);R[0]=770;R[1]=771;R[2]=773;R[3]=1;ea.disable(2929);W.depth_enable=!1;ea.enable(3089);W.scissor_enable=!0;if(f=W.profile)a=performance.now(),ma.count+=d;ea.useProgram(l.program);k=Ca.angle_instanced_arrays;var Xc,Cc,ec,Hc,pc,qc,nc,fc;Ma.setVAO(null);Xc=na.location;Cc=v[Xc];Cc.buffer||ea.enableVertexAttribArray(Xc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==h||!1!==Cc.normalized||0!==Cc.offset||24!==Cc.stride)ea.bindBuffer(34962,h.buffer),
ea.vertexAttribPointer(Xc,2,5126,!1,24,0),Cc.type=5126,Cc.size=2,Cc.buffer=h,Cc.normalized=!1,Cc.offset=0,Cc.stride=24;0!==Cc.divisor&&(k.vertexAttribDivisorANGLE(Xc,0),Cc.divisor=0);ec=X.location;Hc=v[ec];Hc.buffer||ea.enableVertexAttribArray(ec);if(5126!==Hc.type||2!==Hc.size||Hc.buffer!==N||!1!==Hc.normalized||8!==Hc.offset||24!==Hc.stride)ea.bindBuffer(34962,N.buffer),ea.vertexAttribPointer(ec,2,5126,!1,24,8),Hc.type=5126,Hc.size=2,Hc.buffer=N,Hc.normalized=!1,Hc.offset=8,Hc.stride=24;0!==Hc.divisor&&
(k.vertexAttribDivisorANGLE(ec,0),Hc.divisor=0);pc=g.location;qc=v[pc];qc.buffer||ea.enableVertexAttribArray(pc);if(5126!==qc.type||2!==qc.size||qc.buffer!==w||!1!==qc.normalized||16!==qc.offset||24!==qc.stride)ea.bindBuffer(34962,w.buffer),ea.vertexAttribPointer(pc,2,5126,!1,24,16),qc.type=5126,qc.size=2,qc.buffer=w,qc.normalized=!1,qc.offset=16,qc.stride=24;0!==qc.divisor&&(k.vertexAttribDivisorANGLE(pc,0),qc.divisor=0);(nc=la.elements)?ea.bindBuffer(34963,nc.buffer.buffer):Ma.currentVAO&&(nc=ra.getElements(Ma.currentVAO.elements))&&
ea.bindBuffer(34963,nc.buffer.buffer);fc=la.offset;for(n=0;n<d;++n){Z=b[n];var gb,Sc,Bb,db,Ob,bb,kb,Va,ia,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,He,Ie,jd,Pa,Bd,ge,ce,Yd,Jd,Hd,od,Vc;gb=Z.viewport;Sc=gb.x|0;Bb=gb.y|0;db="width"in gb?gb.width|0:ca.framebufferWidth-
Sc;Ob="height"in gb?gb.height|0:ca.framebufferHeight-Bb;bb=ca.viewportWidth;ca.viewportWidth=db;kb=ca.viewportHeight;ca.viewportHeight=Ob;ea.viewport(Sc,Bb,db,Ob);ba[0]=Sc;ba[1]=Bb;ba[2]=db;ba[3]=Ob;Va=Z.viewport;ia=Va.x|0;Jb=Va.y|0;Kb="width"in Va?Va.width|0:ca.framebufferWidth-ia;rc="height"in Va?Va.height|0:ca.framebufferHeight-Jb;ea.scissor(ia,Jb,Kb,rc);Aa[0]=ia;Aa[1]=Jb;Aa[2]=Kb;Aa[3]=rc;Pb=ya.call(this,ca,Z,n);I.offset=Pb;lb=!1;Ib=null;Fb=0;yb=!1;Zb=ib=0;Qb=1;sb=0;Ta=5126;jb=bc=qb=Rb=0;Da(I)?
(lb=!0,Ib=G.createStream(34962,I),Ta=Ib.dtype):(Ib=G.getBuffer(I))?Ta=Ib.dtype:"constant"in I?(Qb=2,"number"===typeof I.constant?(qb=I.constant,bc=jb=Rb=0):(qb=0<I.constant.length?I.constant[0]:0,bc=1<I.constant.length?I.constant[1]:0,jb=2<I.constant.length?I.constant[2]:0,Rb=3<I.constant.length?I.constant[3]:0)):(Ib=Da(I.buffer)?G.createStream(34962,I.buffer):G.getBuffer(I.buffer),Ta="type"in I?wd[I.type]:Ib.dtype,yb=!!I.normalized,Zb=I.size|0,ib=I.offset|0,sb=I.stride|0,Fb=I.divisor|0);rb=Q.location;
Ia=v[rb];if(1===Qb){Ia.buffer||ea.enableVertexAttribArray(rb);tb=Zb||2;if(Ia.type!==Ta||Ia.size!==tb||Ia.buffer!==Ib||Ia.normalized!==yb||Ia.offset!==ib||Ia.stride!==sb)ea.bindBuffer(34962,Ib.buffer),ea.vertexAttribPointer(rb,tb,Ta,yb,sb,ib),Ia.type=Ta,Ia.size=tb,Ia.buffer=Ib,Ia.normalized=yb,Ia.offset=ib,Ia.stride=sb;Ia.divisor!==Fb&&(k.vertexAttribDivisorANGLE(rb,Fb),Ia.divisor=Fb)}else if(Ia.buffer&&(ea.disableVertexAttribArray(rb),Ia.buffer=null),Ia.x!==qb||Ia.y!==bc||Ia.z!==jb||Ia.w!==Rb)ea.vertexAttrib4f(rb,
qb,bc,jb,Rb),Ia.x=qb,Ia.y=bc,Ia.z=jb,Ia.w=Rb;Ja=H.call(this,ca,Z,n);Ub.offset=Ja;fb=!1;hb=null;Ka=0;mb=!1;vb=Wa=0;ub=1;Oa=0;Bc=5126;La=Gb=Lb=Sa=0;Da(Ub)?(fb=!0,hb=G.createStream(34962,Ub),Bc=hb.dtype):(hb=G.getBuffer(Ub))?Bc=hb.dtype:"constant"in Ub?(ub=2,"number"===typeof Ub.constant?(Lb=Ub.constant,Gb=La=Sa=0):(Lb=0<Ub.constant.length?Ub.constant[0]:0,Gb=1<Ub.constant.length?Ub.constant[1]:0,La=2<Ub.constant.length?Ub.constant[2]:0,Sa=3<Ub.constant.length?Ub.constant[3]:0)):(hb=Da(Ub.buffer)?G.createStream(34962,
Ub.buffer):G.getBuffer(Ub.buffer),Bc="type"in Ub?wd[Ub.type]:hb.dtype,mb=!!Ub.normalized,vb=Ub.size|0,Wa=Ub.offset|0,Oa=Ub.stride|0,Ka=Ub.divisor|0);Pc=F.location;$a=v[Pc];if(1===ub){$a.buffer||ea.enableVertexAttribArray(Pc);Mb=vb||2;if($a.type!==Bc||$a.size!==Mb||$a.buffer!==hb||$a.normalized!==mb||$a.offset!==Wa||$a.stride!==Oa)ea.bindBuffer(34962,hb.buffer),ea.vertexAttribPointer(Pc,Mb,Bc,mb,Oa,Wa),$a.type=Bc,$a.size=Mb,$a.buffer=hb,$a.normalized=mb,$a.offset=Wa,$a.stride=Oa;$a.divisor!==Ka&&(k.vertexAttribDivisorANGLE(Pc,
Ka),$a.divisor=Ka)}else if($a.buffer&&(ea.disableVertexAttribArray(Pc),$a.buffer=null),$a.x!==Lb||$a.y!==Gb||$a.z!==La||$a.w!==Sa)ea.vertexAttrib4f(Pc,Lb,Gb,La,Sa),$a.x=Lb,$a.y=Gb,$a.z=La,$a.w=Sa;Nb=C.call(this,ca,Z,n);Ha.offset=Nb;nb=!1;Na=null;$b=0;Ra=!1;xb=wb=0;Ua=1;pb=0;gc=5126;jc=cb=vc=Ec=0;Da(Ha)?(nb=!0,Na=G.createStream(34962,Ha),gc=Na.dtype):(Na=G.getBuffer(Ha))?gc=Na.dtype:"constant"in Ha?(Ua=2,"number"===typeof Ha.constant?(vc=Ha.constant,cb=jc=Ec=0):(vc=0<Ha.constant.length?Ha.constant[0]:
0,cb=1<Ha.constant.length?Ha.constant[1]:0,jc=2<Ha.constant.length?Ha.constant[2]:0,Ec=3<Ha.constant.length?Ha.constant[3]:0)):(Na=Da(Ha.buffer)?G.createStream(34962,Ha.buffer):G.getBuffer(Ha.buffer),gc="type"in Ha?wd[Ha.type]:Na.dtype,Ra=!!Ha.normalized,xb=Ha.size|0,wb=Ha.offset|0,pb=Ha.stride|0,$b=Ha.divisor|0);Tc=za.location;Xa=v[Tc];if(1===Ua){Xa.buffer||ea.enableVertexAttribArray(Tc);ld=xb||4;if(Xa.type!==gc||Xa.size!==ld||Xa.buffer!==Na||Xa.normalized!==Ra||Xa.offset!==wb||Xa.stride!==pb)ea.bindBuffer(34962,
Na.buffer),ea.vertexAttribPointer(Tc,ld,gc,Ra,pb,wb),Xa.type=gc,Xa.size=ld,Xa.buffer=Na,Xa.normalized=Ra,Xa.offset=wb,Xa.stride=pb;Xa.divisor!==$b&&(k.vertexAttribDivisorANGLE(Tc,$b),Xa.divisor=$b)}else if(Xa.buffer&&(ea.disableVertexAttribArray(Tc),Xa.buffer=null),Xa.x!==vc||Xa.y!==cb||Xa.z!==jc||Xa.w!==Ec)ea.vertexAttrib4f(Tc,vc,cb,jc,Ec),Xa.x=vc,Xa.y=cb,Xa.z=jc,Xa.w=Ec;Cb=c.call(this,ca,Z,n);ac.offset=Cb;ab=!1;Wb=null;tc=0;Xb=!1;Kc=Sb=0;Tb=1;td=0;Dc=5126;qd=Yc=Mc=zd=0;Da(ac)?(ab=!0,Wb=G.createStream(34962,
ac),Dc=Wb.dtype):(Wb=G.getBuffer(ac))?Dc=Wb.dtype:"constant"in ac?(Tb=2,"number"===typeof ac.constant?(Mc=ac.constant,Yc=qd=zd=0):(Mc=0<ac.constant.length?ac.constant[0]:0,Yc=1<ac.constant.length?ac.constant[1]:0,qd=2<ac.constant.length?ac.constant[2]:0,zd=3<ac.constant.length?ac.constant[3]:0)):(Wb=Da(ac.buffer)?G.createStream(34962,ac.buffer):G.getBuffer(ac.buffer),Dc="type"in ac?wd[ac.type]:Wb.dtype,Xb=!!ac.normalized,Kc=ac.size|0,Sb=ac.offset|0,td=ac.stride|0,tc=ac.divisor|0);oc=A.location;wc=
v[oc];if(1===Tb){wc.buffer||ea.enableVertexAttribArray(oc);hc=Kc||4;if(wc.type!==Dc||wc.size!==hc||wc.buffer!==Wb||wc.normalized!==Xb||wc.offset!==Sb||wc.stride!==td)ea.bindBuffer(34962,Wb.buffer),ea.vertexAttribPointer(oc,hc,Dc,Xb,td,Sb),wc.type=Dc,wc.size=hc,wc.buffer=Wb,wc.normalized=Xb,wc.offset=Sb,wc.stride=td;wc.divisor!==tc&&(k.vertexAttribDivisorANGLE(oc,tc),wc.divisor=tc)}else if(wc.buffer&&(ea.disableVertexAttribArray(oc),wc.buffer=null),wc.x!==Mc||wc.y!==Yc||wc.z!==qd||wc.w!==zd)ea.vertexAttrib4f(oc,
Mc,Yc,qd,zd),wc.x=Mc,wc.y=Yc,wc.z=qd,wc.w=zd;eb=M.call(this,ca,Z,n);sc=eb[0];Yb=eb[1];ic=eb[2];Ac=eb[3];n&&Vb===sc&&dc===Yb&&yc===ic&&cd===Ac||(Vb=sc,dc=Yb,yc=ic,cd=Ac,ea.uniform4f(oa.location,sc,Yb,ic,Ac));Qc=Z.lineWidth;n&&Rc===Qc||(Rc=Qc,ea.uniform1f(da.location,Qc));Uc=Z.capSize;n&&Zc===Uc||(Zc=Uc,ea.uniform1f(ka.location,Uc));md=Z.scale;dd=md[0];kc=md[1];n&&$c===dd&&cc===kc||($c=dd,cc=kc,ea.uniform2f(q.location,dd,kc));ad=Z.scaleFract;Wc=ad[0];zc=ad[1];n&&ed===Wc&&id===zc||(ed=Wc,id=zc,ea.uniform2f(O.location,
Wc,zc));Ad=Z.translate;He=Ad[0];jd=Ad[1];n&&Ie===He&&Pa===jd||(Ie=He,Pa=jd,ea.uniform2f(P.location,He,jd));Bd=Z.translateFract;ge=Bd[0];Yd=Bd[1];n&&ce===ge&&Jd===Yd||(ce=ge,Jd=Yd,ea.uniform2f(qa.location,ge,Yd));Hd=Z.opacity;n&&od===Hd||(od=Hd,ea.uniform1f(T.location,Hd));Vc=Z.count;0<Vc?nc?k.drawElementsInstancedANGLE(4,36,nc.type,fc<<(nc.type-5121>>1),Vc):k.drawArraysInstancedANGLE(4,fc,36,Vc):0>Vc&&(nc?ea.drawElements(4,36,nc.type,fc<<(nc.type-5121>>1)):ea.drawArrays(4,fc,36));ca.viewportWidth=
bb;ca.viewportHeight=kb;lb&&G.destroyStream(Ib);fb&&G.destroyStream(hb);nb&&G.destroyStream(Na);ab&&G.destroyStream(Wb)}W.dirty=!0;Ma.setVAO(null);f&&(ma.cpuTime+=performance.now()-a)},draw:function(c){var e,f,a,k,n,Z,l,m,r,z,B,x,sa,H,C,K,D,M,L,S,U,Za,V,Ba,aa,pa,ha,ya,ob,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,ia,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b;e=xa.next;e!==xa.cur&&
(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),xa.cur=e);if(W.dirty){var Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb;Ra=ja.dither;Ra!==W.dither&&(Ra?ea.enable(3024):ea.disable(3024),W.dither=Ra);wb=ja.depth_func;wb!==W.depth_func&&(ea.depthFunc(wb),W.depth_func=wb);xb=Qa[0];Ua=Qa[1];if(xb!==lc[0]||Ua!==lc[1])ea.depthRange(xb,Ua),lc[0]=xb,lc[1]=Ua;pb=ja.depth_mask;pb!==W.depth_mask&&(ea.depthMask(pb),W.depth_mask=pb);
gc=ua[0];Ec=ua[1];vc=ua[2];cb=ua[3];if(gc!==wa[0]||Ec!==wa[1]||vc!==wa[2]||cb!==wa[3])ea.colorMask(gc,Ec,vc,cb),wa[0]=gc,wa[1]=Ec,wa[2]=vc,wa[3]=cb;jc=ja.cull_enable;jc!==W.cull_enable&&(jc?ea.enable(2884):ea.disable(2884),W.cull_enable=jc);Tc=ja.cull_face;Tc!==W.cull_face&&(ea.cullFace(Tc),W.cull_face=Tc);Xa=ja.frontFace;Xa!==W.frontFace&&(ea.frontFace(Xa),W.frontFace=Xa);ld=ja.lineWidth;ld!==W.lineWidth&&(ea.lineWidth(ld),W.lineWidth=ld);Cb=ja.polygonOffset_enable;Cb!==W.polygonOffset_enable&&(Cb?
ea.enable(32823):ea.disable(32823),W.polygonOffset_enable=Cb);ab=fa[0];Wb=fa[1];if(ab!==E[0]||Wb!==E[1])ea.polygonOffset(ab,Wb),E[0]=ab,E[1]=Wb;tc=ja.sample_alpha;tc!==W.sample_alpha&&(tc?ea.enable(32926):ea.disable(32926),W.sample_alpha=tc);Xb=ja.sample_enable;Xb!==W.sample_enable&&(Xb?ea.enable(32928):ea.disable(32928),W.sample_enable=Xb);Sb=ta[0];Kc=ta[1];if(Sb!==Fa[0]||Kc!==Fa[1])ea.sampleCoverage(Sb,Kc),Fa[0]=Sb,Fa[1]=Kc;Tb=ja.stencil_enable;Tb!==W.stencil_enable&&(Tb?ea.enable(2960):ea.disable(2960),
W.stencil_enable=Tb);td=ja.stencil_mask;td!==W.stencil_mask&&(ea.stencilMask(td),W.stencil_mask=td);Dc=Ea[0];zd=Ea[1];Mc=Ea[2];if(Dc!==ga[0]||zd!==ga[1]||Mc!==ga[2])ea.stencilFunc(Dc,zd,Mc),ga[0]=Dc,ga[1]=zd,ga[2]=Mc;Yc=Ya[0];qd=Ya[1];oc=Ya[2];wc=Ya[3];if(Yc!==Ga[0]||qd!==Ga[1]||oc!==Ga[2]||wc!==Ga[3])ea.stencilOpSeparate(Yc,qd,oc,wc),Ga[0]=Yc,Ga[1]=qd,Ga[2]=oc,Ga[3]=wc;hc=Y[0];eb=Y[1];sc=Y[2];Vb=Y[3];if(hc!==va[0]||eb!==va[1]||sc!==va[2]||Vb!==va[3])ea.stencilOpSeparate(hc,eb,sc,Vb),va[0]=hc,va[1]=
eb,va[2]=sc,va[3]=Vb}f=c.viewport;a=f.x|0;k=f.y|0;n="width"in f?f.width|0:ca.framebufferWidth-a;Z="height"in f?f.height|0:ca.framebufferHeight-k;l=ca.viewportWidth;ca.viewportWidth=n;m=ca.viewportHeight;ca.viewportHeight=Z;ea.viewport(a,k,n,Z);ba[0]=a;ba[1]=k;ba[2]=n;ba[3]=Z;ea.blendColor(0,0,0,0);zb[0]=0;zb[1]=0;zb[2]=0;zb[3]=0;ea.enable(3042);W.blend_enable=!0;ea.blendEquationSeparate(32774,32774);u[0]=32774;u[1]=32774;ea.blendFuncSeparate(770,771,773,1);R[0]=770;R[1]=771;R[2]=773;R[3]=1;ea.disable(2929);
W.depth_enable=!1;r=c.viewport;z=r.x|0;B=r.y|0;x="width"in r?r.width|0:ca.framebufferWidth-z;sa="height"in r?r.height|0:ca.framebufferHeight-B;ea.scissor(z,B,x,sa);Aa[0]=z;Aa[1]=B;Aa[2]=x;Aa[3]=sa;ea.enable(3089);W.scissor_enable=!0;if(H=W.profile)C=performance.now(),ma.count++;ea.useProgram(d.program);K=Ca.angle_instanced_arrays;Ma.setVAO(null);D=b.call(this,ca,c,0);I.offset=D;M=!1;L=null;S=0;U=!1;V=Za=0;Ba=1;aa=0;pa=5126;Ic=ob=ya=ha=0;Da(I)?(M=!0,L=G.createStream(34962,I),pa=L.dtype):(L=G.getBuffer(I))?
pa=L.dtype:"constant"in I?(Ba=2,"number"===typeof I.constant?(ya=I.constant,ob=Ic=ha=0):(ya=0<I.constant.length?I.constant[0]:0,ob=1<I.constant.length?I.constant[1]:0,Ic=2<I.constant.length?I.constant[2]:0,ha=3<I.constant.length?I.constant[3]:0)):(L=Da(I.buffer)?G.createStream(34962,I.buffer):G.getBuffer(I.buffer),pa="type"in I?wd[I.type]:L.dtype,U=!!I.normalized,V=I.size|0,Za=I.offset|0,aa=I.stride|0,S=I.divisor|0);Db=Q.location;Hb=v[Db];if(1===Ba){Hb.buffer||ea.enableVertexAttribArray(Db);uc=V||
2;if(Hb.type!==pa||Hb.size!==uc||Hb.buffer!==L||Hb.normalized!==U||Hb.offset!==Za||Hb.stride!==aa)ea.bindBuffer(34962,L.buffer),ea.vertexAttribPointer(Db,uc,pa,U,aa,Za),Hb.type=pa,Hb.size=uc,Hb.buffer=L,Hb.normalized=U,Hb.offset=Za,Hb.stride=aa;Hb.divisor!==S&&(K.vertexAttribDivisorANGLE(Db,S),Hb.divisor=S)}else if(Hb.buffer&&(ea.disableVertexAttribArray(Db),Hb.buffer=null),Hb.x!==ya||Hb.y!==ob||Hb.z!==Ic||Hb.w!==ha)ea.vertexAttrib4f(Db,ya,ob,Ic,ha),Hb.x=ya,Hb.y=ob,Hb.z=Ic,Hb.w=ha;Ab=t.call(this,
ca,c,0);Ub.offset=Ab;xc=!1;Eb=null;Jc=0;mc=!1;gd=Gc=0;Xc=1;Cc=0;ec=5126;nc=qc=pc=Hc=0;Da(Ub)?(xc=!0,Eb=G.createStream(34962,Ub),ec=Eb.dtype):(Eb=G.getBuffer(Ub))?ec=Eb.dtype:"constant"in Ub?(Xc=2,"number"===typeof Ub.constant?(pc=Ub.constant,qc=nc=Hc=0):(pc=0<Ub.constant.length?Ub.constant[0]:0,qc=1<Ub.constant.length?Ub.constant[1]:0,nc=2<Ub.constant.length?Ub.constant[2]:0,Hc=3<Ub.constant.length?Ub.constant[3]:0)):(Eb=Da(Ub.buffer)?G.createStream(34962,Ub.buffer):G.getBuffer(Ub.buffer),ec="type"in
Ub?wd[Ub.type]:Eb.dtype,mc=!!Ub.normalized,gd=Ub.size|0,Gc=Ub.offset|0,Cc=Ub.stride|0,Jc=Ub.divisor|0);fc=F.location;gb=v[fc];if(1===Xc){gb.buffer||ea.enableVertexAttribArray(fc);Sc=gd||2;if(gb.type!==ec||gb.size!==Sc||gb.buffer!==Eb||gb.normalized!==mc||gb.offset!==Gc||gb.stride!==Cc)ea.bindBuffer(34962,Eb.buffer),ea.vertexAttribPointer(fc,Sc,ec,mc,Cc,Gc),gb.type=ec,gb.size=Sc,gb.buffer=Eb,gb.normalized=mc,gb.offset=Gc,gb.stride=Cc;gb.divisor!==Jc&&(K.vertexAttribDivisorANGLE(fc,Jc),gb.divisor=Jc)}else if(gb.buffer&&
(ea.disableVertexAttribArray(fc),gb.buffer=null),gb.x!==pc||gb.y!==qc||gb.z!==nc||gb.w!==Hc)ea.vertexAttrib4f(fc,pc,qc,nc,Hc),gb.x=pc,gb.y=qc,gb.z=nc,gb.w=Hc;Bb=y.call(this,ca,c,0);Ha.offset=Bb;db=!1;Ob=null;bb=0;kb=!1;ia=Va=0;Jb=1;Kb=0;rc=5126;Fb=Ib=lb=Pb=0;Da(Ha)?(db=!0,Ob=G.createStream(34962,Ha),rc=Ob.dtype):(Ob=G.getBuffer(Ha))?rc=Ob.dtype:"constant"in Ha?(Jb=2,"number"===typeof Ha.constant?(lb=Ha.constant,Ib=Fb=Pb=0):(lb=0<Ha.constant.length?Ha.constant[0]:0,Ib=1<Ha.constant.length?Ha.constant[1]:
0,Fb=2<Ha.constant.length?Ha.constant[2]:0,Pb=3<Ha.constant.length?Ha.constant[3]:0)):(Ob=Da(Ha.buffer)?G.createStream(34962,Ha.buffer):G.getBuffer(Ha.buffer),rc="type"in Ha?wd[Ha.type]:Ob.dtype,kb=!!Ha.normalized,ia=Ha.size|0,Va=Ha.offset|0,Kb=Ha.stride|0,bb=Ha.divisor|0);yb=za.location;ib=v[yb];if(1===Jb){ib.buffer||ea.enableVertexAttribArray(yb);Zb=ia||4;if(ib.type!==rc||ib.size!==Zb||ib.buffer!==Ob||ib.normalized!==kb||ib.offset!==Va||ib.stride!==Kb)ea.bindBuffer(34962,Ob.buffer),ea.vertexAttribPointer(yb,
Zb,rc,kb,Kb,Va),ib.type=rc,ib.size=Zb,ib.buffer=Ob,ib.normalized=kb,ib.offset=Va,ib.stride=Kb;ib.divisor!==bb&&(K.vertexAttribDivisorANGLE(yb,bb),ib.divisor=bb)}else if(ib.buffer&&(ea.disableVertexAttribArray(yb),ib.buffer=null),ib.x!==lb||ib.y!==Ib||ib.z!==Fb||ib.w!==Pb)ea.vertexAttrib4f(yb,lb,Ib,Fb,Pb),ib.x=lb,ib.y=Ib,ib.z=Fb,ib.w=Pb;Qb=p.call(this,ca,c,0);ac.offset=Qb;sb=!1;Ta=null;Rb=0;qb=!1;jb=bc=0;rb=1;Ia=0;tb=5126;Ka=hb=fb=Ja=0;Da(ac)?(sb=!0,Ta=G.createStream(34962,ac),tb=Ta.dtype):(Ta=G.getBuffer(ac))?
tb=Ta.dtype:"constant"in ac?(rb=2,"number"===typeof ac.constant?(fb=ac.constant,hb=Ka=Ja=0):(fb=0<ac.constant.length?ac.constant[0]:0,hb=1<ac.constant.length?ac.constant[1]:0,Ka=2<ac.constant.length?ac.constant[2]:0,Ja=3<ac.constant.length?ac.constant[3]:0)):(Ta=Da(ac.buffer)?G.createStream(34962,ac.buffer):G.getBuffer(ac.buffer),tb="type"in ac?wd[ac.type]:Ta.dtype,qb=!!ac.normalized,jb=ac.size|0,bc=ac.offset|0,Ia=ac.stride|0,Rb=ac.divisor|0);mb=A.location;Wa=v[mb];if(1===rb){Wa.buffer||ea.enableVertexAttribArray(mb);
vb=jb||4;if(Wa.type!==tb||Wa.size!==vb||Wa.buffer!==Ta||Wa.normalized!==qb||Wa.offset!==bc||Wa.stride!==Ia)ea.bindBuffer(34962,Ta.buffer),ea.vertexAttribPointer(mb,vb,tb,qb,Ia,bc),Wa.type=tb,Wa.size=vb,Wa.buffer=Ta,Wa.normalized=qb,Wa.offset=bc,Wa.stride=Ia;Wa.divisor!==Rb&&(K.vertexAttribDivisorANGLE(mb,Rb),Wa.divisor=Rb)}else if(Wa.buffer&&(ea.disableVertexAttribArray(mb),Wa.buffer=null),Wa.x!==fb||Wa.y!==hb||Wa.z!==Ka||Wa.w!==Ja)ea.vertexAttrib4f(mb,fb,hb,Ka,Ja),Wa.x=fb,Wa.y=hb,Wa.z=Ka,Wa.w=Ja;
ub=na.location;Oa=v[ub];Oa.buffer||ea.enableVertexAttribArray(ub);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==h||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)ea.bindBuffer(34962,h.buffer),ea.vertexAttribPointer(ub,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=h,Oa.normalized=!1,Oa.offset=0,Oa.stride=24;0!==Oa.divisor&&(K.vertexAttribDivisorANGLE(ub,0),Oa.divisor=0);Bc=X.location;Sa=v[Bc];Sa.buffer||ea.enableVertexAttribArray(Bc);if(5126!==Sa.type||2!==Sa.size||Sa.buffer!==N||!1!==Sa.normalized||
8!==Sa.offset||24!==Sa.stride)ea.bindBuffer(34962,N.buffer),ea.vertexAttribPointer(Bc,2,5126,!1,24,8),Sa.type=5126,Sa.size=2,Sa.buffer=N,Sa.normalized=!1,Sa.offset=8,Sa.stride=24;0!==Sa.divisor&&(K.vertexAttribDivisorANGLE(Bc,0),Sa.divisor=0);Lb=g.location;Gb=v[Lb];Gb.buffer||ea.enableVertexAttribArray(Lb);if(5126!==Gb.type||2!==Gb.size||Gb.buffer!==w||!1!==Gb.normalized||16!==Gb.offset||24!==Gb.stride)ea.bindBuffer(34962,w.buffer),ea.vertexAttribPointer(Lb,2,5126,!1,24,16),Gb.type=5126,Gb.size=2,
Gb.buffer=w,Gb.normalized=!1,Gb.offset=16,Gb.stride=24;0!==Gb.divisor&&(K.vertexAttribDivisorANGLE(Lb,0),Gb.divisor=0);La=J.call(this,ca,c,0);ea.uniform4f(oa.location,La[0],La[1],La[2],La[3]);ea.uniform1f(da.location,c.lineWidth);ea.uniform1f(ka.location,c.capSize);Pc=c.scale;ea.uniform2f(q.location,Pc[0],Pc[1]);$a=c.scaleFract;ea.uniform2f(O.location,$a[0],$a[1]);Mb=c.translate;ea.uniform2f(P.location,Mb[0],Mb[1]);Nb=c.translateFract;ea.uniform2f(qa.location,Nb[0],Nb[1]);ea.uniform1f(T.location,
c.opacity);(nb=la.elements)?ea.bindBuffer(34963,nb.buffer.buffer):Ma.currentVAO&&(nb=ra.getElements(Ma.currentVAO.elements))&&ea.bindBuffer(34963,nb.buffer.buffer);Na=la.offset;$b=c.count;0<$b?nb?K.drawElementsInstancedANGLE(4,36,nb.type,Na<<(nb.type-5121>>1),$b):K.drawArraysInstancedANGLE(4,Na,36,$b):0>$b&&(nb?ea.drawElements(4,36,nb.type,Na<<(nb.type-5121>>1)):ea.drawArrays(4,Na,36));W.dirty=!0;Ma.setVAO(null);ca.viewportWidth=l;ca.viewportHeight=m;H&&(ma.cpuTime+=performance.now()-C);M&&G.destroyStream(L);
xc&&G.destroyStream(Eb);db&&G.destroyStream(Ob);sb&&G.destroyStream(Ta)},scope:function(c,b,d){var g,e,a,u,q,v,E,l,R,m,A,ta,Ma,Fa,Q,t,p,zb,F,T,y,ea,fa,ga,P,H,C,Y,K,ua,O,J,D,M,Aa,Ea,ba,qa,xa,ra,X,va,da,wa,oa,lc,ka,ya,na,Ca,Qa,Ga,Ya,za,ia,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,
cc,ad,Wc,ed,zc,id,Ad,He,Ie,jd,Pa,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md;g=c.viewport;e=g.x|0;a=g.y|0;u="width"in g?g.width|0:ca.framebufferWidth-e;q="height"in g?g.height|0:ca.framebufferHeight-a;v=ca.viewportWidth;ca.viewportWidth=u;E=ca.viewportHeight;ca.viewportHeight=q;l=ob[0];ob[0]=e;R=ob[1];ob[1]=a;m=ob[2];ob[2]=u;A=ob[3];ob[3]=q;ta=Z[0];Z[0]=0;Ma=Z[1];Z[1]=0;Fa=Z[2];Z[2]=0;Q=Z[3];Z[3]=0;t=ja.blend_enable;
ja.blend_enable=!0;p=Za[0];Za[0]=32774;zb=Za[1];Za[1]=32774;F=n[0];n[0]=770;T=n[1];n[1]=771;y=n[2];n[2]=773;ea=n[3];n[3]=1;fa=ja.depth_enable;ja.depth_enable=!1;ga=c.viewport;P=ga.x|0;H=ga.y|0;C="width"in ga?ga.width|0:ca.framebufferWidth-P;Y="height"in ga?ga.height|0:ca.framebufferHeight-H;K=sa[0];sa[0]=P;ua=sa[1];sa[1]=H;O=sa[2];sa[2]=C;J=sa[3];sa[3]=Y;D=ja.scissor_enable;ja.scissor_enable=!0;if(M=W.profile)Aa=performance.now(),ma.count++;Ea=la.count;la.count=36;ba=c.count;qa=la.instances;la.instances=
ba;xa=la.primitive;la.primitive=4;ra=c.capSize;X=Ba[5];Ba[5]=ra;va=c.lineWidth;da=Ba[4];Ba[4]=va;wa=c.opacity;oa=Ba[10];Ba[10]=wa;lc=c.range;ka=Ba[18];Ba[18]=lc;ya=c.scale;na=Ba[6];Ba[6]=ya;Ca=c.scaleFract;Qa=Ba[7];Ba[7]=Ca;Ga=c.translate;Ya=Ba[8];Ba[8]=Ga;za=c.translateFract;ia=Ba[9];Ba[9]=za;Jb=aa.call(this,ca,c,d);Kb=Ba[3];Ba[3]=Jb;rc=x.buffer;x.buffer=w;Pb=x.divisor;x.divisor=0;lb=x.normalized;x.normalized=!1;Ib=x.offset;x.offset=16;Fb=x.size;x.size=0;yb=x.state;x.state=1;ib=x.stride;x.stride=
24;Zb=x.type;x.type=5126;Qb=x.w;x.w=0;sb=x.x;x.x=0;Ta=x.y;x.y=0;Rb=x.z;x.z=0;qb=S.call(this,ca,c,d);ac.offset=qb;bc=!1;jb=null;rb=0;Ia=!1;Ja=tb=0;fb=1;hb=0;Ka=5126;ub=vb=Wa=mb=0;Da(ac)?(bc=!0,jb=G.createStream(34962,ac),Ka=jb.dtype):(jb=G.getBuffer(ac))?Ka=jb.dtype:"constant"in ac?(fb=2,"number"===typeof ac.constant?(Wa=ac.constant,vb=ub=mb=0):(Wa=0<ac.constant.length?ac.constant[0]:0,vb=1<ac.constant.length?ac.constant[1]:0,ub=2<ac.constant.length?ac.constant[2]:0,mb=3<ac.constant.length?ac.constant[3]:
0)):(jb=Da(ac.buffer)?G.createStream(34962,ac.buffer):G.getBuffer(ac.buffer),Ka="type"in ac?wd[ac.type]:jb.dtype,Ia=!!ac.normalized,Ja=ac.size|0,tb=ac.offset|0,hb=ac.stride|0,rb=ac.divisor|0);Oa=r.buffer;r.buffer=jb;Bc=r.divisor;r.divisor=rb;Sa=r.normalized;r.normalized=Ia;Lb=r.offset;r.offset=tb;Gb=r.size;r.size=Ja;La=r.state;r.state=fb;Pc=r.stride;r.stride=hb;$a=r.type;r.type=Ka;Mb=r.w;r.w=mb;Nb=r.x;r.x=Wa;nb=r.y;r.y=vb;Na=r.z;r.z=ub;$b=L.buffer;L.buffer=h;Ra=L.divisor;L.divisor=0;wb=L.normalized;
L.normalized=!1;xb=L.offset;L.offset=0;Ua=L.size;L.size=0;pb=L.state;L.state=1;gc=L.stride;L.stride=24;Ec=L.type;L.type=5126;vc=L.w;L.w=0;cb=L.x;L.x=0;jc=L.y;L.y=0;Tc=L.z;L.z=0;Xa=ha.call(this,ca,c,d);Ha.offset=Xa;ld=!1;Cb=null;ab=0;Wb=!1;Xb=tc=0;Sb=1;Kc=0;Tb=5126;Mc=zd=Dc=td=0;Da(Ha)?(ld=!0,Cb=G.createStream(34962,Ha),Tb=Cb.dtype):(Cb=G.getBuffer(Ha))?Tb=Cb.dtype:"constant"in Ha?(Sb=2,"number"===typeof Ha.constant?(Dc=Ha.constant,zd=Mc=td=0):(Dc=0<Ha.constant.length?Ha.constant[0]:0,zd=1<Ha.constant.length?
Ha.constant[1]:0,Mc=2<Ha.constant.length?Ha.constant[2]:0,td=3<Ha.constant.length?Ha.constant[3]:0)):(Cb=Da(Ha.buffer)?G.createStream(34962,Ha.buffer):G.getBuffer(Ha.buffer),Tb="type"in Ha?wd[Ha.type]:Cb.dtype,Wb=!!Ha.normalized,Xb=Ha.size|0,tc=Ha.offset|0,Kc=Ha.stride|0,ab=Ha.divisor|0);Yc=k.buffer;k.buffer=Cb;qd=k.divisor;k.divisor=ab;oc=k.normalized;k.normalized=Wb;wc=k.offset;k.offset=tc;hc=k.size;k.size=Xb;eb=k.state;k.state=Sb;sc=k.stride;k.stride=Kc;Vb=k.type;k.type=Tb;Yb=k.w;k.w=td;dc=k.x;
k.x=Dc;ic=k.y;k.y=zd;yc=k.z;k.z=Mc;Ac=f.buffer;f.buffer=N;cd=f.divisor;f.divisor=0;Qc=f.normalized;f.normalized=!1;Rc=f.offset;f.offset=8;Uc=f.size;f.size=0;Zc=f.state;f.state=1;md=f.stride;f.stride=24;dd=f.type;f.type=5126;$c=f.w;f.w=0;kc=f.x;f.x=0;cc=f.y;f.y=0;ad=f.z;f.z=0;Wc=U.call(this,ca,c,d);I.offset=Wc;ed=!1;zc=null;id=0;Ad=!1;Ie=He=0;jd=1;Pa=0;Bd=5126;Jd=Yd=ce=ge=0;Da(I)?(ed=!0,zc=G.createStream(34962,I),Bd=zc.dtype):(zc=G.getBuffer(I))?Bd=zc.dtype:"constant"in I?(jd=2,"number"===typeof I.constant?
(ce=I.constant,Yd=Jd=ge=0):(ce=0<I.constant.length?I.constant[0]:0,Yd=1<I.constant.length?I.constant[1]:0,Jd=2<I.constant.length?I.constant[2]:0,ge=3<I.constant.length?I.constant[3]:0)):(zc=Da(I.buffer)?G.createStream(34962,I.buffer):G.getBuffer(I.buffer),Bd="type"in I?wd[I.type]:zc.dtype,Ad=!!I.normalized,Ie=I.size|0,He=I.offset|0,Pa=I.stride|0,id=I.divisor|0);Hd=z.buffer;z.buffer=zc;od=z.divisor;z.divisor=id;Vc=z.normalized;z.normalized=Ad;ud=z.offset;z.offset=He;sd=z.size;z.size=Ie;kd=z.state;
z.state=jd;vd=z.stride;z.stride=Pa;Cd=z.type;z.type=Bd;Dd=z.w;z.w=ge;re=z.x;z.x=ce;je=z.y;z.y=Yd;se=z.z;z.z=Jd;ke=V.call(this,ca,c,d);Ub.offset=ke;ie=!1;he=null;te=0;de=!1;Nc=le=0;hd=1;ue=0;oe=5126;Rd=Qd=Pd=Ld=0;Da(Ub)?(ie=!0,he=G.createStream(34962,Ub),oe=he.dtype):(he=G.getBuffer(Ub))?oe=he.dtype:"constant"in Ub?(hd=2,"number"===typeof Ub.constant?(Pd=Ub.constant,Qd=Rd=Ld=0):(Pd=0<Ub.constant.length?Ub.constant[0]:0,Qd=1<Ub.constant.length?Ub.constant[1]:0,Rd=2<Ub.constant.length?Ub.constant[2]:
0,Ld=3<Ub.constant.length?Ub.constant[3]:0)):(he=Da(Ub.buffer)?G.createStream(34962,Ub.buffer):G.getBuffer(Ub.buffer),oe="type"in Ub?wd[Ub.type]:he.dtype,de=!!Ub.normalized,Nc=Ub.size|0,le=Ub.offset|0,ue=Ub.stride|0,te=Ub.divisor|0);me=B.buffer;B.buffer=he;ye=B.divisor;B.divisor=te;Be=B.normalized;B.normalized=de;pe=B.offset;B.offset=le;hf=B.size;B.size=Nc;Te=B.state;B.state=hd;Pe=B.stride;B.stride=ue;ve=B.type;B.type=oe;Fe=B.w;B.w=Ld;Je=B.x;B.x=Pd;Ke=B.y;B.y=Qd;Le=B.z;B.z=Rd;Ge=pa.vert;pa.vert=2;
Md=pa.frag;pa.frag=1;W.dirty=!0;b(ca,c,d);ca.viewportWidth=v;ca.viewportHeight=E;ob[0]=l;ob[1]=R;ob[2]=m;ob[3]=A;Z[0]=ta;Z[1]=Ma;Z[2]=Fa;Z[3]=Q;ja.blend_enable=t;Za[0]=p;Za[1]=zb;n[0]=F;n[1]=T;n[2]=y;n[3]=ea;ja.depth_enable=fa;sa[0]=K;sa[1]=ua;sa[2]=O;sa[3]=J;ja.scissor_enable=D;M&&(ma.cpuTime+=performance.now()-Aa);la.count=Ea;la.instances=qa;la.primitive=xa;Ba[5]=X;Ba[4]=da;Ba[10]=oa;Ba[18]=ka;Ba[6]=na;Ba[7]=Qa;Ba[8]=Ya;Ba[9]=ia;Ba[3]=Kb;x.buffer=rc;x.divisor=Pb;x.normalized=lb;x.offset=Ib;x.size=
Fb;x.state=yb;x.stride=ib;x.type=Zb;x.w=Qb;x.x=sb;x.y=Ta;x.z=Rb;bc&&G.destroyStream(jb);r.buffer=Oa;r.divisor=Bc;r.normalized=Sa;r.offset=Lb;r.size=Gb;r.state=La;r.stride=Pc;r.type=$a;r.w=Mb;r.x=Nb;r.y=nb;r.z=Na;L.buffer=$b;L.divisor=Ra;L.normalized=wb;L.offset=xb;L.size=Ua;L.state=pb;L.stride=gc;L.type=Ec;L.w=vc;L.x=cb;L.y=jc;L.z=Tc;ld&&G.destroyStream(Cb);k.buffer=Yc;k.divisor=qd;k.normalized=oc;k.offset=wc;k.size=hc;k.state=eb;k.stride=sc;k.type=Vb;k.w=Yb;k.x=dc;k.y=ic;k.z=yc;f.buffer=Ac;f.divisor=
cd;f.normalized=Qc;f.offset=Rc;f.size=Uc;f.state=Zc;f.stride=md;f.type=dd;f.w=$c;f.x=kc;f.y=cc;f.z=ad;ed&&G.destroyStream(zc);z.buffer=Hd;z.divisor=od;z.normalized=Vc;z.offset=ud;z.size=sd;z.state=kd;z.stride=vd;z.type=Cd;z.w=Dd;z.x=re;z.y=je;z.z=se;ie&&G.destroyStream(he);B.buffer=me;B.divisor=ye;B.normalized=Be;B.offset=pe;B.size=hf;B.state=Te;B.stride=Pe;B.type=ve;B.w=Fe;B.x=Je;B.y=Ke;B.z=Le;pa.vert=Ge;pa.frag=Md;W.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,I,H,C,c,M,g,ka,A,na){var za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,Qa,lc,fa,E,ta,Fa,sa,Aa,Ea,ga,Y;za=a.attributes;X=a.buffer;da=a.context;T=a.current;Q=a.draw;F=a.elements;q=a.extensions;O=a.framebuffer;P=a.gl;qa=a.isBufferArgs;oa=a.next;v=a.shader;G=a.uniforms;ca=a.vao;W=oa.blend_color;la=T.blend_color;ra=oa.blend_equation;Ca=T.blend_equation;xa=oa.blend_func;ea=T.blend_func;Da=oa.colorMask;ja=T.colorMask;
pa=oa.depth_range;Ba=T.depth_range;Ma=oa.polygonOffset_offset;Z=T.polygonOffset_offset;zb=oa.sample_coverage;Za=T.sample_coverage;u=oa.scissor_box;n=T.scissor_box;R=oa.stencil_func;ua=T.stencil_func;wa=oa.stencil_opBack;Qa=T.stencil_opBack;lc=oa.stencil_opFront;fa=T.stencil_opFront;E=oa.viewport;ta=T.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};sa={divisor:1,offset:8,stride:8};Aa={divisor:1,offset:8,stride:8};Ea={divisor:1,offset:16,stride:8};
ga={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(b,d){var a,u,v,E,G,h;a=O.next;a!==O.cur&&(a?P.bindFramebuffer(36160,a.framebuffer):P.bindFramebuffer(36160,null),O.cur=a);if(T.dirty){var t,p,W,x,y,K,w,N,J,D,xa,ra,aa,ia,$d,Ce,Oe,Se,Fd,Ae,qe,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc;t=oa.dither;t!==T.dither&&(t?P.enable(3024):P.disable(3024),T.dither=t);p=oa.depth_func;p!==T.depth_func&&(P.depthFunc(p),T.depth_func=p);W=pa[0];x=pa[1];if(W!==Ba[0]||x!==Ba[1])P.depthRange(W,
x),Ba[0]=W,Ba[1]=x;y=oa.depth_mask;y!==T.depth_mask&&(P.depthMask(y),T.depth_mask=y);K=Da[0];w=Da[1];N=Da[2];J=Da[3];if(K!==ja[0]||w!==ja[1]||N!==ja[2]||J!==ja[3])P.colorMask(K,w,N,J),ja[0]=K,ja[1]=w,ja[2]=N,ja[3]=J;D=oa.cull_enable;D!==T.cull_enable&&(D?P.enable(2884):P.disable(2884),T.cull_enable=D);xa=oa.cull_face;xa!==T.cull_face&&(P.cullFace(xa),T.cull_face=xa);ra=oa.frontFace;ra!==T.frontFace&&(P.frontFace(ra),T.frontFace=ra);aa=oa.lineWidth;aa!==T.lineWidth&&(P.lineWidth(aa),T.lineWidth=aa);
ia=oa.polygonOffset_enable;ia!==T.polygonOffset_enable&&(ia?P.enable(32823):P.disable(32823),T.polygonOffset_enable=ia);$d=Ma[0];Ce=Ma[1];if($d!==Z[0]||Ce!==Z[1])P.polygonOffset($d,Ce),Z[0]=$d,Z[1]=Ce;Oe=oa.sample_alpha;Oe!==T.sample_alpha&&(Oe?P.enable(32926):P.disable(32926),T.sample_alpha=Oe);Se=oa.sample_enable;Se!==T.sample_enable&&(Se?P.enable(32928):P.disable(32928),T.sample_enable=Se);Fd=zb[0];Ae=zb[1];if(Fd!==Za[0]||Ae!==Za[1])P.sampleCoverage(Fd,Ae),Za[0]=Fd,Za[1]=Ae;qe=oa.stencil_mask;
qe!==T.stencil_mask&&(P.stencilMask(qe),T.stencil_mask=qe);Xd=R[0];Od=R[1];Gd=R[2];if(Xd!==ua[0]||Od!==ua[1]||Gd!==ua[2])P.stencilFunc(Xd,Od,Gd),ua[0]=Xd,ua[1]=Od,ua[2]=Gd;nd=lc[0];bd=lc[1];rd=lc[2];Lc=lc[3];if(nd!==fa[0]||bd!==fa[1]||rd!==fa[2]||Lc!==fa[3])P.stencilOpSeparate(nd,bd,rd,Lc),fa[0]=nd,fa[1]=bd,fa[2]=rd,fa[3]=Lc;pd=wa[0];Fc=wa[1];fd=wa[2];Oc=wa[3];if(pd!==Qa[0]||Fc!==Qa[1]||fd!==Qa[2]||Oc!==Qa[3])P.stencilOpSeparate(pd,Fc,fd,Oc),Qa[0]=pd,Qa[1]=Fc,Qa[2]=fd,Qa[3]=Oc}P.blendColor(0,0,0,
0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;P.enable(3042);T.blend_enable=!0;P.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;P.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;P.enable(3089);T.scissor_enable=!0;P.disable(2960);T.stencil_enable=!1;if(u=T.profile)v=performance.now(),ma.count+=d;P.useProgram(S.program);E=q.angle_instanced_arrays;var Ic,Db,Hb,uc,Ab;ca.setVAO(null);Ic=I.location;Db=za[Ic];Db.buffer||P.enableVertexAttribArray(Ic);if(5126!==Db.type||1!==Db.size||
Db.buffer!==m||!1!==Db.normalized||0!==Db.offset||8!==Db.stride)P.bindBuffer(34962,m.buffer),P.vertexAttribPointer(Ic,1,5126,!1,8,0),Db.type=5126,Db.size=1,Db.buffer=m,Db.normalized=!1,Db.offset=0,Db.stride=8;0!==Db.divisor&&(E.vertexAttribDivisorANGLE(Ic,0),Db.divisor=0);Hb=H.location;uc=za[Hb];uc.buffer||P.enableVertexAttribArray(Hb);if(5126!==uc.type||1!==uc.size||uc.buffer!==e||!1!==uc.normalized||4!==uc.offset||8!==uc.stride)P.bindBuffer(34962,e.buffer),P.vertexAttribPointer(Hb,1,5126,!1,8,4),
uc.type=5126,uc.size=1,uc.buffer=e,uc.normalized=!1,uc.offset=4,uc.stride=8;0!==uc.divisor&&(E.vertexAttribDivisorANGLE(Hb,0),uc.divisor=0);(Ab=Q.elements)?P.bindBuffer(34963,Ab.buffer.buffer):ca.currentVAO&&(Ab=F.getElements(ca.currentVAO.elements))&&P.bindBuffer(34963,Ab.buffer.buffer);for(G=0;G<d;++G){h=b[G];var xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,
Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,He,Ie,jd,Pa,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd;xc=h.viewport;Eb=xc.x|0;Jc=xc.y|0;mc="width"in xc?xc.width|0:da.framebufferWidth-Eb;Gc="height"in xc?xc.height|0:da.framebufferHeight-Jc;gd=da.viewportWidth;da.viewportWidth=mc;Xc=da.viewportHeight;da.viewportHeight=Gc;P.viewport(Eb,Jc,mc,Gc);ta[0]=Eb;ta[1]=Jc;ta[2]=mc;ta[3]=Gc;(Cc=r.call(this,
da,h,G))?P.enable(2929):P.disable(2929);T.depth_enable=Cc;ec=h.viewport;Hc=ec.x|0;pc=ec.y|0;qc="width"in ec?ec.width|0:da.framebufferWidth-Hc;nc="height"in ec?ec.height|0:da.framebufferHeight-pc;P.scissor(Hc,pc,qc,nc);n[0]=Hc;n[1]=pc;n[2]=qc;n[3]=nc;sa.buffer=h.positionBuffer;fc=!1;gb=null;Sc=0;Bb=!1;Ob=db=0;bb=1;kb=0;Va=5126;rc=Kb=Jb=yd=0;qa(sa)?(fc=!0,gb=X.createStream(34962,sa),Va=gb.dtype):(gb=X.getBuffer(sa))?Va=gb.dtype:"constant"in sa?(bb=2,"number"===typeof sa.constant?(Jb=sa.constant,Kb=
rc=yd=0):(Jb=0<sa.constant.length?sa.constant[0]:0,Kb=1<sa.constant.length?sa.constant[1]:0,rc=2<sa.constant.length?sa.constant[2]:0,yd=3<sa.constant.length?sa.constant[3]:0)):(gb=qa(sa.buffer)?X.createStream(34962,sa.buffer):X.getBuffer(sa.buffer),Va="type"in sa?Fa[sa.type]:gb.dtype,Bb=!!sa.normalized,Ob=sa.size|0,db=sa.offset|0,kb=sa.stride|0,Sc=sa.divisor|0);Pb=ha.location;lb=za[Pb];if(1===bb){lb.buffer||P.enableVertexAttribArray(Pb);Ib=Ob||2;if(lb.type!==Va||lb.size!==Ib||lb.buffer!==gb||lb.normalized!==
Bb||lb.offset!==db||lb.stride!==kb)P.bindBuffer(34962,gb.buffer),P.vertexAttribPointer(Pb,Ib,Va,Bb,kb,db),lb.type=Va,lb.size=Ib,lb.buffer=gb,lb.normalized=Bb,lb.offset=db,lb.stride=kb;lb.divisor!==Sc&&(E.vertexAttribDivisorANGLE(Pb,Sc),lb.divisor=Sc)}else if(lb.buffer&&(P.disableVertexAttribArray(Pb),lb.buffer=null),lb.x!==Jb||lb.y!==Kb||lb.z!==rc||lb.w!==yd)P.vertexAttrib4f(Pb,Jb,Kb,rc,yd),lb.x=Jb,lb.y=Kb,lb.z=rc,lb.w=yd;Ea.buffer=h.positionBuffer;Fb=!1;yb=null;ib=0;Zb=!1;sb=Qb=0;Ta=1;Rb=0;qb=5126;
Ia=rb=jb=bc=0;qa(Ea)?(Fb=!0,yb=X.createStream(34962,Ea),qb=yb.dtype):(yb=X.getBuffer(Ea))?qb=yb.dtype:"constant"in Ea?(Ta=2,"number"===typeof Ea.constant?(jb=Ea.constant,rb=Ia=bc=0):(jb=0<Ea.constant.length?Ea.constant[0]:0,rb=1<Ea.constant.length?Ea.constant[1]:0,Ia=2<Ea.constant.length?Ea.constant[2]:0,bc=3<Ea.constant.length?Ea.constant[3]:0)):(yb=qa(Ea.buffer)?X.createStream(34962,Ea.buffer):X.getBuffer(Ea.buffer),qb="type"in Ea?Fa[Ea.type]:yb.dtype,Zb=!!Ea.normalized,sb=Ea.size|0,Qb=Ea.offset|
0,Rb=Ea.stride|0,ib=Ea.divisor|0);tb=f.location;Ja=za[tb];if(1===Ta){Ja.buffer||P.enableVertexAttribArray(tb);fb=sb||2;if(Ja.type!==qb||Ja.size!==fb||Ja.buffer!==yb||Ja.normalized!==Zb||Ja.offset!==Qb||Ja.stride!==Rb)P.bindBuffer(34962,yb.buffer),P.vertexAttribPointer(tb,fb,qb,Zb,Rb,Qb),Ja.type=qb,Ja.size=fb,Ja.buffer=yb,Ja.normalized=Zb,Ja.offset=Qb,Ja.stride=Rb;Ja.divisor!==ib&&(E.vertexAttribDivisorANGLE(tb,ib),Ja.divisor=ib)}else if(Ja.buffer&&(P.disableVertexAttribArray(tb),Ja.buffer=null),Ja.x!==
jb||Ja.y!==rb||Ja.z!==Ia||Ja.w!==bc)P.vertexAttrib4f(tb,jb,rb,Ia,bc),Ja.x=jb,Ja.y=rb,Ja.z=Ia,Ja.w=bc;Aa.buffer=h.positionFractBuffer;hb=!1;Ka=null;mb=0;Wa=!1;ub=vb=0;Oa=1;Bc=0;Sa=5126;Pc=La=Gb=Lb=0;qa(Aa)?(hb=!0,Ka=X.createStream(34962,Aa),Sa=Ka.dtype):(Ka=X.getBuffer(Aa))?Sa=Ka.dtype:"constant"in Aa?(Oa=2,"number"===typeof Aa.constant?(Gb=Aa.constant,La=Pc=Lb=0):(Gb=0<Aa.constant.length?Aa.constant[0]:0,La=1<Aa.constant.length?Aa.constant[1]:0,Pc=2<Aa.constant.length?Aa.constant[2]:0,Lb=3<Aa.constant.length?
Aa.constant[3]:0)):(Ka=qa(Aa.buffer)?X.createStream(34962,Aa.buffer):X.getBuffer(Aa.buffer),Sa="type"in Aa?Fa[Aa.type]:Ka.dtype,Wa=!!Aa.normalized,ub=Aa.size|0,vb=Aa.offset|0,Bc=Aa.stride|0,mb=Aa.divisor|0);$a=k.location;Mb=za[$a];if(1===Oa){Mb.buffer||P.enableVertexAttribArray($a);Nb=ub||2;if(Mb.type!==Sa||Mb.size!==Nb||Mb.buffer!==Ka||Mb.normalized!==Wa||Mb.offset!==vb||Mb.stride!==Bc)P.bindBuffer(34962,Ka.buffer),P.vertexAttribPointer($a,Nb,Sa,Wa,Bc,vb),Mb.type=Sa,Mb.size=Nb,Mb.buffer=Ka,Mb.normalized=
Wa,Mb.offset=vb,Mb.stride=Bc;Mb.divisor!==mb&&(E.vertexAttribDivisorANGLE($a,mb),Mb.divisor=mb)}else if(Mb.buffer&&(P.disableVertexAttribArray($a),Mb.buffer=null),Mb.x!==Gb||Mb.y!==La||Mb.z!==Pc||Mb.w!==Lb)P.vertexAttrib4f($a,Gb,La,Pc,Lb),Mb.x=Gb,Mb.y=La,Mb.z=Pc,Mb.w=Lb;ga.buffer=h.positionFractBuffer;nb=!1;Na=null;$b=0;Ra=!1;xb=wb=0;Ua=1;pb=0;gc=5126;jc=cb=vc=Ec=0;qa(ga)?(nb=!0,Na=X.createStream(34962,ga),gc=Na.dtype):(Na=X.getBuffer(ga))?gc=Na.dtype:"constant"in ga?(Ua=2,"number"===typeof ga.constant?
(vc=ga.constant,cb=jc=Ec=0):(vc=0<ga.constant.length?ga.constant[0]:0,cb=1<ga.constant.length?ga.constant[1]:0,jc=2<ga.constant.length?ga.constant[2]:0,Ec=3<ga.constant.length?ga.constant[3]:0)):(Na=qa(ga.buffer)?X.createStream(34962,ga.buffer):X.getBuffer(ga.buffer),gc="type"in ga?Fa[ga.type]:Na.dtype,Ra=!!ga.normalized,xb=ga.size|0,wb=ga.offset|0,pb=ga.stride|0,$b=ga.divisor|0);Tc=U.location;Xa=za[Tc];if(1===Ua){Xa.buffer||P.enableVertexAttribArray(Tc);ld=xb||2;if(Xa.type!==gc||Xa.size!==ld||Xa.buffer!==
Na||Xa.normalized!==Ra||Xa.offset!==wb||Xa.stride!==pb)P.bindBuffer(34962,Na.buffer),P.vertexAttribPointer(Tc,ld,gc,Ra,pb,wb),Xa.type=gc,Xa.size=ld,Xa.buffer=Na,Xa.normalized=Ra,Xa.offset=wb,Xa.stride=pb;Xa.divisor!==$b&&(E.vertexAttribDivisorANGLE(Tc,$b),Xa.divisor=$b)}else if(Xa.buffer&&(P.disableVertexAttribArray(Tc),Xa.buffer=null),Xa.x!==vc||Xa.y!==cb||Xa.z!==jc||Xa.w!==Ec)P.vertexAttrib4f(Tc,vc,cb,jc,Ec),Xa.x=vc,Xa.y=cb,Xa.z=jc,Xa.w=Ec;Y.buffer=h.colorBuffer;Cb=!1;ab=null;Wb=0;tc=!1;Sb=Xb=0;
Kc=1;Tb=0;td=5126;Yc=Mc=zd=Dc=0;qa(Y)?(Cb=!0,ab=X.createStream(34962,Y),td=ab.dtype):(ab=X.getBuffer(Y))?td=ab.dtype:"constant"in Y?(Kc=2,"number"===typeof Y.constant?(zd=Y.constant,Mc=Yc=Dc=0):(zd=0<Y.constant.length?Y.constant[0]:0,Mc=1<Y.constant.length?Y.constant[1]:0,Yc=2<Y.constant.length?Y.constant[2]:0,Dc=3<Y.constant.length?Y.constant[3]:0)):(ab=qa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),td="type"in Y?Fa[Y.type]:ab.dtype,tc=!!Y.normalized,Sb=Y.size|0,Xb=Y.offset|0,
Tb=Y.stride|0,Wb=Y.divisor|0);qd=z.location;oc=za[qd];if(1===Kc){oc.buffer||P.enableVertexAttribArray(qd);wc=Sb||4;if(oc.type!==td||oc.size!==wc||oc.buffer!==ab||oc.normalized!==tc||oc.offset!==Xb||oc.stride!==Tb)P.bindBuffer(34962,ab.buffer),P.vertexAttribPointer(qd,wc,td,tc,Tb,Xb),oc.type=td,oc.size=wc,oc.buffer=ab,oc.normalized=tc,oc.offset=Xb,oc.stride=Tb;oc.divisor!==Wb&&(E.vertexAttribDivisorANGLE(qd,Wb),oc.divisor=Wb)}else if(oc.buffer&&(P.disableVertexAttribArray(qd),oc.buffer=null),oc.x!==
zd||oc.y!==Mc||oc.z!==Yc||oc.w!==Dc)P.vertexAttrib4f(qd,zd,Mc,Yc,Dc),oc.x=zd,oc.y=Mc,oc.z=Yc,oc.w=Dc;hc=h.scale;eb=hc[0];Vb=hc[1];G&&sc===eb&&Yb===Vb||(sc=eb,Yb=Vb,P.uniform2f(c.location,eb,Vb));dc=h.scaleFract;ic=dc[0];Ac=dc[1];G&&yc===ic&&cd===Ac||(yc=ic,cd=Ac,P.uniform2f(M.location,ic,Ac));Qc=h.translate;Rc=Qc[0];Zc=Qc[1];G&&Uc===Rc&&md===Zc||(Uc=Rc,md=Zc,P.uniform2f(ka.location,Rc,Zc));dd=h.translateFract;$c=dd[0];cc=dd[1];G&&kc===$c&&ad===cc||(kc=$c,ad=cc,P.uniform2f(A.location,$c,cc));Wc=h.thickness;
G&&ed===Wc||(ed=Wc,P.uniform1f(g.location,Wc));zc=h.depth;G&&id===zc||(id=zc,P.uniform1f(l.location,zc));Ad=L.call(this,da,h,G);He=Ad[0];jd=Ad[1];Bd=Ad[2];ce=Ad[3];G&&Ie===He&&Pa===jd&&ge===Bd&&Yd===ce||(Ie=He,Pa=jd,ge=Bd,Yd=ce,P.uniform4f(na.location,He,jd,Bd,ce));Jd=h.dashLength;G&&Hd===Jd||(Hd=Jd,P.uniform1f(V.location,Jd));od=h.opacity;G&&Vc===od||(Vc=od,P.uniform1f(C.location,od));(ud=h.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);sd=ud._texture;P.uniform1i(B.location,sd.bind());
kd=h.count;0<kd?Ab?E.drawElementsInstancedANGLE(5,4,Ab.type,0<<(Ab.type-5121>>1),kd):E.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(Ab?P.drawElements(5,4,Ab.type,0<<(Ab.type-5121>>1)):P.drawArrays(5,0,4));da.viewportWidth=gd;da.viewportHeight=Xc;fc&&X.destroyStream(gb);Fb&&X.destroyStream(yb);hb&&X.destroyStream(Ka);nb&&X.destroyStream(Na);Cb&&X.destroyStream(ab);sd.unbind()}T.dirty=!0;ca.setVAO(null);u&&(ma.cpuTime+=performance.now()-v)},draw:function(b){var a,u,v,E,r,h,G,t,p,W,x,y,w,N,J,L,S,xa,ra,
aa,ia,$d,Ce,Oe,Se,Fd,Ae,qe,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb;a=O.next;a!==O.cur&&(a?P.bindFramebuffer(36160,a.framebuffer):P.bindFramebuffer(36160,null),O.cur=a);if(T.dirty){var xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb;xb=oa.dither;xb!==
T.dither&&(xb?P.enable(3024):P.disable(3024),T.dither=xb);Ua=oa.depth_func;Ua!==T.depth_func&&(P.depthFunc(Ua),T.depth_func=Ua);pb=pa[0];gc=pa[1];if(pb!==Ba[0]||gc!==Ba[1])P.depthRange(pb,gc),Ba[0]=pb,Ba[1]=gc;Ec=oa.depth_mask;Ec!==T.depth_mask&&(P.depthMask(Ec),T.depth_mask=Ec);vc=Da[0];cb=Da[1];jc=Da[2];Tc=Da[3];if(vc!==ja[0]||cb!==ja[1]||jc!==ja[2]||Tc!==ja[3])P.colorMask(vc,cb,jc,Tc),ja[0]=vc,ja[1]=cb,ja[2]=jc,ja[3]=Tc;Xa=oa.cull_enable;Xa!==T.cull_enable&&(Xa?P.enable(2884):P.disable(2884),T.cull_enable=
Xa);ld=oa.cull_face;ld!==T.cull_face&&(P.cullFace(ld),T.cull_face=ld);Cb=oa.frontFace;Cb!==T.frontFace&&(P.frontFace(Cb),T.frontFace=Cb);ab=oa.lineWidth;ab!==T.lineWidth&&(P.lineWidth(ab),T.lineWidth=ab);Wb=oa.polygonOffset_enable;Wb!==T.polygonOffset_enable&&(Wb?P.enable(32823):P.disable(32823),T.polygonOffset_enable=Wb);tc=Ma[0];Xb=Ma[1];if(tc!==Z[0]||Xb!==Z[1])P.polygonOffset(tc,Xb),Z[0]=tc,Z[1]=Xb;Sb=oa.sample_alpha;Sb!==T.sample_alpha&&(Sb?P.enable(32926):P.disable(32926),T.sample_alpha=Sb);
Kc=oa.sample_enable;Kc!==T.sample_enable&&(Kc?P.enable(32928):P.disable(32928),T.sample_enable=Kc);Tb=zb[0];td=zb[1];if(Tb!==Za[0]||td!==Za[1])P.sampleCoverage(Tb,td),Za[0]=Tb,Za[1]=td;Dc=oa.stencil_mask;Dc!==T.stencil_mask&&(P.stencilMask(Dc),T.stencil_mask=Dc);zd=R[0];Mc=R[1];Yc=R[2];if(zd!==ua[0]||Mc!==ua[1]||Yc!==ua[2])P.stencilFunc(zd,Mc,Yc),ua[0]=zd,ua[1]=Mc,ua[2]=Yc;qd=lc[0];oc=lc[1];wc=lc[2];hc=lc[3];if(qd!==fa[0]||oc!==fa[1]||wc!==fa[2]||hc!==fa[3])P.stencilOpSeparate(qd,oc,wc,hc),fa[0]=
qd,fa[1]=oc,fa[2]=wc,fa[3]=hc;eb=wa[0];sc=wa[1];Vb=wa[2];Yb=wa[3];if(eb!==Qa[0]||sc!==Qa[1]||Vb!==Qa[2]||Yb!==Qa[3])P.stencilOpSeparate(eb,sc,Vb,Yb),Qa[0]=eb,Qa[1]=sc,Qa[2]=Vb,Qa[3]=Yb}u=b.viewport;v=u.x|0;E=u.y|0;r="width"in u?u.width|0:da.framebufferWidth-v;h="height"in u?u.height|0:da.framebufferHeight-E;G=da.viewportWidth;da.viewportWidth=r;t=da.viewportHeight;da.viewportHeight=h;P.viewport(v,E,r,h);ta[0]=v;ta[1]=E;ta[2]=r;ta[3]=h;P.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;P.enable(3042);
T.blend_enable=!0;P.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;P.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;(p=D.call(this,da,b,0))?P.enable(2929):P.disable(2929);T.depth_enable=p;W=b.viewport;x=W.x|0;y=W.y|0;w="width"in W?W.width|0:da.framebufferWidth-x;N="height"in W?W.height|0:da.framebufferHeight-y;P.scissor(x,y,w,N);n[0]=x;n[1]=y;n[2]=w;n[3]=N;P.enable(3089);T.scissor_enable=!0;P.disable(2960);T.stencil_enable=!1;if(J=T.profile)L=performance.now(),
ma.count++;P.useProgram(K.program);S=q.angle_instanced_arrays;ca.setVAO(null);sa.buffer=b.positionBuffer;xa=!1;ra=null;aa=0;ia=!1;Ce=$d=0;Oe=1;Se=0;Fd=5126;Od=Xd=qe=Ae=0;qa(sa)?(xa=!0,ra=X.createStream(34962,sa),Fd=ra.dtype):(ra=X.getBuffer(sa))?Fd=ra.dtype:"constant"in sa?(Oe=2,"number"===typeof sa.constant?(qe=sa.constant,Xd=Od=Ae=0):(qe=0<sa.constant.length?sa.constant[0]:0,Xd=1<sa.constant.length?sa.constant[1]:0,Od=2<sa.constant.length?sa.constant[2]:0,Ae=3<sa.constant.length?sa.constant[3]:
0)):(ra=qa(sa.buffer)?X.createStream(34962,sa.buffer):X.getBuffer(sa.buffer),Fd="type"in sa?Fa[sa.type]:ra.dtype,ia=!!sa.normalized,Ce=sa.size|0,$d=sa.offset|0,Se=sa.stride|0,aa=sa.divisor|0);Gd=ha.location;nd=za[Gd];if(1===Oe){nd.buffer||P.enableVertexAttribArray(Gd);bd=Ce||2;if(nd.type!==Fd||nd.size!==bd||nd.buffer!==ra||nd.normalized!==ia||nd.offset!==$d||nd.stride!==Se)P.bindBuffer(34962,ra.buffer),P.vertexAttribPointer(Gd,bd,Fd,ia,Se,$d),nd.type=Fd,nd.size=bd,nd.buffer=ra,nd.normalized=ia,nd.offset=
$d,nd.stride=Se;nd.divisor!==aa&&(S.vertexAttribDivisorANGLE(Gd,aa),nd.divisor=aa)}else if(nd.buffer&&(P.disableVertexAttribArray(Gd),nd.buffer=null),nd.x!==qe||nd.y!==Xd||nd.z!==Od||nd.w!==Ae)P.vertexAttrib4f(Gd,qe,Xd,Od,Ae),nd.x=qe,nd.y=Xd,nd.z=Od,nd.w=Ae;Ea.buffer=b.positionBuffer;rd=!1;Lc=null;pd=0;Fc=!1;Oc=fd=0;Ic=1;Db=0;Hb=5126;Eb=xc=Ab=uc=0;qa(Ea)?(rd=!0,Lc=X.createStream(34962,Ea),Hb=Lc.dtype):(Lc=X.getBuffer(Ea))?Hb=Lc.dtype:"constant"in Ea?(Ic=2,"number"===typeof Ea.constant?(Ab=Ea.constant,
xc=Eb=uc=0):(Ab=0<Ea.constant.length?Ea.constant[0]:0,xc=1<Ea.constant.length?Ea.constant[1]:0,Eb=2<Ea.constant.length?Ea.constant[2]:0,uc=3<Ea.constant.length?Ea.constant[3]:0)):(Lc=qa(Ea.buffer)?X.createStream(34962,Ea.buffer):X.getBuffer(Ea.buffer),Hb="type"in Ea?Fa[Ea.type]:Lc.dtype,Fc=!!Ea.normalized,Oc=Ea.size|0,fd=Ea.offset|0,Db=Ea.stride|0,pd=Ea.divisor|0);Jc=f.location;mc=za[Jc];if(1===Ic){mc.buffer||P.enableVertexAttribArray(Jc);Gc=Oc||2;if(mc.type!==Hb||mc.size!==Gc||mc.buffer!==Lc||mc.normalized!==
Fc||mc.offset!==fd||mc.stride!==Db)P.bindBuffer(34962,Lc.buffer),P.vertexAttribPointer(Jc,Gc,Hb,Fc,Db,fd),mc.type=Hb,mc.size=Gc,mc.buffer=Lc,mc.normalized=Fc,mc.offset=fd,mc.stride=Db;mc.divisor!==pd&&(S.vertexAttribDivisorANGLE(Jc,pd),mc.divisor=pd)}else if(mc.buffer&&(P.disableVertexAttribArray(Jc),mc.buffer=null),mc.x!==Ab||mc.y!==xc||mc.z!==Eb||mc.w!==uc)P.vertexAttrib4f(Jc,Ab,xc,Eb,uc),mc.x=Ab,mc.y=xc,mc.z=Eb,mc.w=uc;Aa.buffer=b.positionFractBuffer;gd=!1;Xc=null;Cc=0;ec=!1;pc=Hc=0;qc=1;nc=0;
fc=5126;db=Bb=Sc=gb=0;qa(Aa)?(gd=!0,Xc=X.createStream(34962,Aa),fc=Xc.dtype):(Xc=X.getBuffer(Aa))?fc=Xc.dtype:"constant"in Aa?(qc=2,"number"===typeof Aa.constant?(Sc=Aa.constant,Bb=db=gb=0):(Sc=0<Aa.constant.length?Aa.constant[0]:0,Bb=1<Aa.constant.length?Aa.constant[1]:0,db=2<Aa.constant.length?Aa.constant[2]:0,gb=3<Aa.constant.length?Aa.constant[3]:0)):(Xc=qa(Aa.buffer)?X.createStream(34962,Aa.buffer):X.getBuffer(Aa.buffer),fc="type"in Aa?Fa[Aa.type]:Xc.dtype,ec=!!Aa.normalized,pc=Aa.size|0,Hc=
Aa.offset|0,nc=Aa.stride|0,Cc=Aa.divisor|0);Ob=k.location;bb=za[Ob];if(1===qc){bb.buffer||P.enableVertexAttribArray(Ob);kb=pc||2;if(bb.type!==fc||bb.size!==kb||bb.buffer!==Xc||bb.normalized!==ec||bb.offset!==Hc||bb.stride!==nc)P.bindBuffer(34962,Xc.buffer),P.vertexAttribPointer(Ob,kb,fc,ec,nc,Hc),bb.type=fc,bb.size=kb,bb.buffer=Xc,bb.normalized=ec,bb.offset=Hc,bb.stride=nc;bb.divisor!==Cc&&(S.vertexAttribDivisorANGLE(Ob,Cc),bb.divisor=Cc)}else if(bb.buffer&&(P.disableVertexAttribArray(Ob),bb.buffer=
null),bb.x!==Sc||bb.y!==Bb||bb.z!==db||bb.w!==gb)P.vertexAttrib4f(Ob,Sc,Bb,db,gb),bb.x=Sc,bb.y=Bb,bb.z=db,bb.w=gb;ga.buffer=b.positionFractBuffer;Va=!1;yd=null;Jb=0;Kb=!1;Pb=rc=0;lb=1;Ib=0;Fb=5126;Qb=Zb=ib=yb=0;qa(ga)?(Va=!0,yd=X.createStream(34962,ga),Fb=yd.dtype):(yd=X.getBuffer(ga))?Fb=yd.dtype:"constant"in ga?(lb=2,"number"===typeof ga.constant?(ib=ga.constant,Zb=Qb=yb=0):(ib=0<ga.constant.length?ga.constant[0]:0,Zb=1<ga.constant.length?ga.constant[1]:0,Qb=2<ga.constant.length?ga.constant[2]:
0,yb=3<ga.constant.length?ga.constant[3]:0)):(yd=qa(ga.buffer)?X.createStream(34962,ga.buffer):X.getBuffer(ga.buffer),Fb="type"in ga?Fa[ga.type]:yd.dtype,Kb=!!ga.normalized,Pb=ga.size|0,rc=ga.offset|0,Ib=ga.stride|0,Jb=ga.divisor|0);sb=U.location;Ta=za[sb];if(1===lb){Ta.buffer||P.enableVertexAttribArray(sb);Rb=Pb||2;if(Ta.type!==Fb||Ta.size!==Rb||Ta.buffer!==yd||Ta.normalized!==Kb||Ta.offset!==rc||Ta.stride!==Ib)P.bindBuffer(34962,yd.buffer),P.vertexAttribPointer(sb,Rb,Fb,Kb,Ib,rc),Ta.type=Fb,Ta.size=
Rb,Ta.buffer=yd,Ta.normalized=Kb,Ta.offset=rc,Ta.stride=Ib;Ta.divisor!==Jb&&(S.vertexAttribDivisorANGLE(sb,Jb),Ta.divisor=Jb)}else if(Ta.buffer&&(P.disableVertexAttribArray(sb),Ta.buffer=null),Ta.x!==ib||Ta.y!==Zb||Ta.z!==Qb||Ta.w!==yb)P.vertexAttrib4f(sb,ib,Zb,Qb,yb),Ta.x=ib,Ta.y=Zb,Ta.z=Qb,Ta.w=yb;Y.buffer=b.colorBuffer;qb=!1;bc=null;jb=0;rb=!1;tb=Ia=0;Ja=1;fb=0;hb=5126;vb=Wa=mb=Ka=0;qa(Y)?(qb=!0,bc=X.createStream(34962,Y),hb=bc.dtype):(bc=X.getBuffer(Y))?hb=bc.dtype:"constant"in Y?(Ja=2,"number"===
typeof Y.constant?(mb=Y.constant,Wa=vb=Ka=0):(mb=0<Y.constant.length?Y.constant[0]:0,Wa=1<Y.constant.length?Y.constant[1]:0,vb=2<Y.constant.length?Y.constant[2]:0,Ka=3<Y.constant.length?Y.constant[3]:0)):(bc=qa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),hb="type"in Y?Fa[Y.type]:bc.dtype,rb=!!Y.normalized,tb=Y.size|0,Ia=Y.offset|0,fb=Y.stride|0,jb=Y.divisor|0);ub=z.location;Oa=za[ub];if(1===Ja){Oa.buffer||P.enableVertexAttribArray(ub);Bc=tb||4;if(Oa.type!==hb||Oa.size!==Bc||Oa.buffer!==
bc||Oa.normalized!==rb||Oa.offset!==Ia||Oa.stride!==fb)P.bindBuffer(34962,bc.buffer),P.vertexAttribPointer(ub,Bc,hb,rb,fb,Ia),Oa.type=hb,Oa.size=Bc,Oa.buffer=bc,Oa.normalized=rb,Oa.offset=Ia,Oa.stride=fb;Oa.divisor!==jb&&(S.vertexAttribDivisorANGLE(ub,jb),Oa.divisor=jb)}else if(Oa.buffer&&(P.disableVertexAttribArray(ub),Oa.buffer=null),Oa.x!==mb||Oa.y!==Wa||Oa.z!==vb||Oa.w!==Ka)P.vertexAttrib4f(ub,mb,Wa,vb,Ka),Oa.x=mb,Oa.y=Wa,Oa.z=vb,Oa.w=Ka;Sa=I.location;Lb=za[Sa];Lb.buffer||P.enableVertexAttribArray(Sa);
if(5126!==Lb.type||1!==Lb.size||Lb.buffer!==m||!1!==Lb.normalized||0!==Lb.offset||8!==Lb.stride)P.bindBuffer(34962,m.buffer),P.vertexAttribPointer(Sa,1,5126,!1,8,0),Lb.type=5126,Lb.size=1,Lb.buffer=m,Lb.normalized=!1,Lb.offset=0,Lb.stride=8;0!==Lb.divisor&&(S.vertexAttribDivisorANGLE(Sa,0),Lb.divisor=0);Gb=H.location;La=za[Gb];La.buffer||P.enableVertexAttribArray(Gb);if(5126!==La.type||1!==La.size||La.buffer!==e||!1!==La.normalized||4!==La.offset||8!==La.stride)P.bindBuffer(34962,e.buffer),P.vertexAttribPointer(Gb,
1,5126,!1,8,4),La.type=5126,La.size=1,La.buffer=e,La.normalized=!1,La.offset=4,La.stride=8;0!==La.divisor&&(S.vertexAttribDivisorANGLE(Gb,0),La.divisor=0);Pc=b.scale;P.uniform2f(c.location,Pc[0],Pc[1]);$a=b.scaleFract;P.uniform2f(M.location,$a[0],$a[1]);Mb=b.translate;P.uniform2f(ka.location,Mb[0],Mb[1]);Nb=b.translateFract;P.uniform2f(A.location,Nb[0],Nb[1]);P.uniform1f(g.location,b.thickness);P.uniform1f(l.location,b.depth);nb=d.call(this,da,b,0);P.uniform4f(na.location,nb[0],nb[1],nb[2],nb[3]);
P.uniform1f(V.location,b.dashLength);P.uniform1f(C.location,b.opacity);(Na=b.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);$b=Na._texture;P.uniform1i(B.location,$b.bind());(Ra=Q.elements)?P.bindBuffer(34963,Ra.buffer.buffer):ca.currentVAO&&(Ra=F.getElements(ca.currentVAO.elements))&&P.bindBuffer(34963,Ra.buffer.buffer);wb=b.count;0<wb?Ra?S.drawElementsInstancedANGLE(5,4,Ra.type,0<<(Ra.type-5121>>1),wb):S.drawArraysInstancedANGLE(5,0,4,wb):0>wb&&(Ra?P.drawElements(5,4,Ra.type,0<<(Ra.type-
5121>>1)):P.drawArrays(5,0,4));T.dirty=!0;ca.setVAO(null);da.viewportWidth=G;da.viewportHeight=t;J&&(ma.cpuTime+=performance.now()-L);xa&&X.destroyStream(ra);rd&&X.destroyStream(Lc);gd&&X.destroyStream(Xc);Va&&X.destroyStream(yd);qb&&X.destroyStream(bc);$b.unbind()},scope:function(c,d,g){var f,a,k,n,q,Z,l,R,r,A,ta,z,Ma,B,zb,F,ea,fa,P,H,C,K,ua,O,D,ca,M,L,S,ja,U,Za,V,Ba,pa,wa,ha,Da,lc,la,I,ka,ya,na,Ca,Qa,za,ia,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,
Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,He,Ie,jd,Pa,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe;f=c.viewport;a=f.x|0;k=f.y|0;n="width"in f?f.width|0:da.framebufferWidth-
a;q="height"in f?f.height|0:da.framebufferHeight-k;Z=da.viewportWidth;da.viewportWidth=n;l=da.viewportHeight;da.viewportHeight=q;R=E[0];E[0]=a;r=E[1];E[1]=k;A=E[2];E[2]=n;ta=E[3];E[3]=q;z=W[0];W[0]=0;Ma=W[1];W[1]=0;B=W[2];W[2]=0;zb=W[3];W[3]=0;F=oa.blend_enable;oa.blend_enable=!0;ea=ra[0];ra[0]=32774;fa=ra[1];ra[1]=32774;P=xa[0];xa[0]=770;H=xa[1];xa[1]=771;C=xa[2];xa[2]=773;K=xa[3];xa[3]=1;ua=b.call(this,da,c,g);O=oa.depth_enable;oa.depth_enable=ua;D=c.viewport;ca=D.x|0;M=D.y|0;L="width"in D?D.width|
0:da.framebufferWidth-ca;S="height"in D?D.height|0:da.framebufferHeight-M;ja=u[0];u[0]=ca;U=u[1];u[1]=M;Za=u[2];u[2]=L;V=u[3];u[3]=S;Ba=oa.scissor_enable;oa.scissor_enable=!0;pa=oa.stencil_enable;oa.stencil_enable=!1;if(wa=T.profile)ha=performance.now(),ma.count++;Da=Q.offset;Q.offset=0;lc=Q.count;Q.count=4;la=c.count;I=Q.instances;Q.instances=la;ka=Q.primitive;Q.primitive=5;ya=c.dashLength;na=G[23];G[23]=ya;Ca=c.dashTexture;Qa=G[24];G[24]=Ca;za=c.depth;ia=G[22];G[22]=za;Xc=c.id;Cc=G[31];G[31]=Xc;
ec=c.miterLimit;Hc=G[32];G[32]=ec;pc=t.call(this,da,c,g);qc=G[33];G[33]=pc;nc=c.opacity;fc=G[10];G[10]=nc;gb=da.pixelRatio;Sc=G[34];G[34]=gb;Bb=c.scale;db=G[6];G[6]=Bb;Ob=c.scaleFract;bb=G[7];G[7]=Ob;kb=c.thickness;Va=G[21];G[21]=kb;yd=c.translate;Jb=G[8];G[8]=yd;Kb=c.translateFract;rc=G[9];G[9]=Kb;Pb=y.call(this,da,c,g);lb=G[3];G[3]=Pb;sa.buffer=c.positionBuffer;Ib=!1;Fb=null;yb=0;ib=!1;Qb=Zb=0;sb=1;Ta=0;Rb=5126;rb=jb=bc=qb=0;qa(sa)?(Ib=!0,Fb=X.createStream(34962,sa),Rb=Fb.dtype):(Fb=X.getBuffer(sa))?
Rb=Fb.dtype:"constant"in sa?(sb=2,"number"===typeof sa.constant?(bc=sa.constant,jb=rb=qb=0):(bc=0<sa.constant.length?sa.constant[0]:0,jb=1<sa.constant.length?sa.constant[1]:0,rb=2<sa.constant.length?sa.constant[2]:0,qb=3<sa.constant.length?sa.constant[3]:0)):(Fb=qa(sa.buffer)?X.createStream(34962,sa.buffer):X.getBuffer(sa.buffer),Rb="type"in sa?Fa[sa.type]:Fb.dtype,ib=!!sa.normalized,Qb=sa.size|0,Zb=sa.offset|0,Ta=sa.stride|0,yb=sa.divisor|0);Ia=p.buffer;p.buffer=Fb;tb=p.divisor;p.divisor=yb;Ja=p.normalized;
p.normalized=ib;fb=p.offset;p.offset=Zb;hb=p.size;p.size=Qb;Ka=p.state;p.state=sb;mb=p.stride;p.stride=Ta;Wa=p.type;p.type=Rb;vb=p.w;p.w=qb;ub=p.x;p.x=bc;Oa=p.y;p.y=jb;Bc=p.z;p.z=rb;Aa.buffer=c.positionFractBuffer;Sa=!1;Lb=null;Gb=0;La=!1;$a=Pc=0;Mb=1;Nb=0;nb=5126;wb=Ra=$b=Na=0;qa(Aa)?(Sa=!0,Lb=X.createStream(34962,Aa),nb=Lb.dtype):(Lb=X.getBuffer(Aa))?nb=Lb.dtype:"constant"in Aa?(Mb=2,"number"===typeof Aa.constant?($b=Aa.constant,Ra=wb=Na=0):($b=0<Aa.constant.length?Aa.constant[0]:0,Ra=1<Aa.constant.length?
Aa.constant[1]:0,wb=2<Aa.constant.length?Aa.constant[2]:0,Na=3<Aa.constant.length?Aa.constant[3]:0)):(Lb=qa(Aa.buffer)?X.createStream(34962,Aa.buffer):X.getBuffer(Aa.buffer),nb="type"in Aa?Fa[Aa.type]:Lb.dtype,La=!!Aa.normalized,$a=Aa.size|0,Pc=Aa.offset|0,Nb=Aa.stride|0,Gb=Aa.divisor|0);xb=h.buffer;h.buffer=Lb;Ua=h.divisor;h.divisor=Gb;pb=h.normalized;h.normalized=La;gc=h.offset;h.offset=Pc;Ec=h.size;h.size=$a;vc=h.state;h.state=Mb;cb=h.stride;h.stride=Nb;jc=h.type;h.type=nb;Tc=h.w;h.w=Na;Xa=h.x;
h.x=$b;ld=h.y;h.y=Ra;Cb=h.z;h.z=wb;Ea.buffer=c.positionBuffer;ab=!1;Wb=null;tc=0;Xb=!1;Kc=Sb=0;Tb=1;td=0;Dc=5126;qd=Yc=Mc=zd=0;qa(Ea)?(ab=!0,Wb=X.createStream(34962,Ea),Dc=Wb.dtype):(Wb=X.getBuffer(Ea))?Dc=Wb.dtype:"constant"in Ea?(Tb=2,"number"===typeof Ea.constant?(Mc=Ea.constant,Yc=qd=zd=0):(Mc=0<Ea.constant.length?Ea.constant[0]:0,Yc=1<Ea.constant.length?Ea.constant[1]:0,qd=2<Ea.constant.length?Ea.constant[2]:0,zd=3<Ea.constant.length?Ea.constant[3]:0)):(Wb=qa(Ea.buffer)?X.createStream(34962,
Ea.buffer):X.getBuffer(Ea.buffer),Dc="type"in Ea?Fa[Ea.type]:Wb.dtype,Xb=!!Ea.normalized,Kc=Ea.size|0,Sb=Ea.offset|0,td=Ea.stride|0,tc=Ea.divisor|0);oc=N.buffer;N.buffer=Wb;wc=N.divisor;N.divisor=tc;hc=N.normalized;N.normalized=Xb;eb=N.offset;N.offset=Sb;sc=N.size;N.size=Kc;Vb=N.state;N.state=Tb;Yb=N.stride;N.stride=td;dc=N.type;N.type=Dc;ic=N.w;N.w=zd;yc=N.x;N.x=Mc;Ac=N.y;N.y=Yc;cd=N.z;N.z=qd;ga.buffer=c.positionFractBuffer;Qc=!1;Rc=null;Uc=0;Zc=!1;dd=md=0;$c=1;kc=0;cc=5126;zc=ed=Wc=ad=0;qa(ga)?
(Qc=!0,Rc=X.createStream(34962,ga),cc=Rc.dtype):(Rc=X.getBuffer(ga))?cc=Rc.dtype:"constant"in ga?($c=2,"number"===typeof ga.constant?(Wc=ga.constant,ed=zc=ad=0):(Wc=0<ga.constant.length?ga.constant[0]:0,ed=1<ga.constant.length?ga.constant[1]:0,zc=2<ga.constant.length?ga.constant[2]:0,ad=3<ga.constant.length?ga.constant[3]:0)):(Rc=qa(ga.buffer)?X.createStream(34962,ga.buffer):X.getBuffer(ga.buffer),cc="type"in ga?Fa[ga.type]:Rc.dtype,Zc=!!ga.normalized,dd=ga.size|0,md=ga.offset|0,kc=ga.stride|0,Uc=
ga.divisor|0);id=w.buffer;w.buffer=Rc;Ad=w.divisor;w.divisor=Uc;He=w.normalized;w.normalized=Zc;Ie=w.offset;w.offset=md;jd=w.size;w.size=dd;Pa=w.state;w.state=$c;Bd=w.stride;w.stride=kc;ge=w.type;w.type=cc;ce=w.w;w.w=ad;Yd=w.x;w.x=Wc;Jd=w.y;w.y=ed;Hd=w.z;w.z=zc;Y.buffer=c.colorBuffer;od=!1;Vc=null;ud=0;sd=!1;vd=kd=0;Cd=1;Dd=0;re=5126;ie=ke=se=je=0;qa(Y)?(od=!0,Vc=X.createStream(34962,Y),re=Vc.dtype):(Vc=X.getBuffer(Y))?re=Vc.dtype:"constant"in Y?(Cd=2,"number"===typeof Y.constant?(se=Y.constant,ke=
ie=je=0):(se=0<Y.constant.length?Y.constant[0]:0,ke=1<Y.constant.length?Y.constant[1]:0,ie=2<Y.constant.length?Y.constant[2]:0,je=3<Y.constant.length?Y.constant[3]:0)):(Vc=qa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),re="type"in Y?Fa[Y.type]:Vc.dtype,sd=!!Y.normalized,vd=Y.size|0,kd=Y.offset|0,Dd=Y.stride|0,ud=Y.divisor|0);he=J.buffer;J.buffer=Vc;te=J.divisor;J.divisor=ud;de=J.normalized;J.normalized=sd;le=J.offset;J.offset=kd;Nc=J.size;J.size=vd;hd=J.state;J.state=Cd;ue=J.stride;
J.stride=Dd;oe=J.type;J.type=re;Ld=J.w;J.w=je;Pd=J.x;J.x=se;Qd=J.y;J.y=ke;Rd=J.z;J.z=ie;me=aa.buffer;aa.buffer=m;ye=aa.divisor;aa.divisor=0;Be=aa.normalized;aa.normalized=!1;pe=aa.offset;aa.offset=0;hf=aa.size;aa.size=0;Te=aa.state;aa.state=1;Pe=aa.stride;aa.stride=8;ve=aa.type;aa.type=5126;Fe=aa.w;aa.w=0;Je=aa.x;aa.x=0;Ke=aa.y;aa.y=0;Le=aa.z;aa.z=0;Ge=x.buffer;x.buffer=e;Md=x.divisor;x.divisor=0;Wd=x.normalized;x.normalized=!1;be=x.offset;x.offset=4;ee=x.size;x.size=0;Me=x.state;x.state=1;Id=x.stride;
x.stride=8;Sd=x.type;x.type=5126;De=x.w;x.w=0;Ne=x.x;x.x=0;af=x.y;x.y=0;$e=x.z;x.z=0;Ue=v.vert;v.vert=20;Qe=v.frag;v.frag=19;T.dirty=!0;d(da,c,g);da.viewportWidth=Z;da.viewportHeight=l;E[0]=R;E[1]=r;E[2]=A;E[3]=ta;W[0]=z;W[1]=Ma;W[2]=B;W[3]=zb;oa.blend_enable=F;ra[0]=ea;ra[1]=fa;xa[0]=P;xa[1]=H;xa[2]=C;xa[3]=K;oa.depth_enable=O;u[0]=ja;u[1]=U;u[2]=Za;u[3]=V;oa.scissor_enable=Ba;oa.stencil_enable=pa;wa&&(ma.cpuTime+=performance.now()-ha);Q.offset=Da;Q.count=lc;Q.instances=I;Q.primitive=ka;G[23]=na;
G[24]=Qa;G[22]=ia;G[31]=Cc;G[32]=Hc;G[33]=qc;G[10]=fc;G[34]=Sc;G[6]=db;G[7]=bb;G[21]=Va;G[8]=Jb;G[9]=rc;G[3]=lb;Ib&&X.destroyStream(Fb);p.buffer=Ia;p.divisor=tb;p.normalized=Ja;p.offset=fb;p.size=hb;p.state=Ka;p.stride=mb;p.type=Wa;p.w=vb;p.x=ub;p.y=Oa;p.z=Bc;Sa&&X.destroyStream(Lb);h.buffer=xb;h.divisor=Ua;h.normalized=pb;h.offset=gc;h.size=Ec;h.state=vc;h.stride=cb;h.type=jc;h.w=Tc;h.x=Xa;h.y=ld;h.z=Cb;ab&&X.destroyStream(Wb);N.buffer=oc;N.divisor=wc;N.normalized=hc;N.offset=eb;N.size=sc;N.state=
Vb;N.stride=Yb;N.type=dc;N.w=ic;N.x=yc;N.y=Ac;N.z=cd;Qc&&X.destroyStream(Rc);w.buffer=id;w.divisor=Ad;w.normalized=He;w.offset=Ie;w.size=jd;w.state=Pa;w.stride=Bd;w.type=ge;w.w=ce;w.x=Yd;w.y=Jd;w.z=Hd;od&&X.destroyStream(Vc);J.buffer=he;J.divisor=te;J.normalized=de;J.offset=le;J.size=Nc;J.state=hd;J.stride=ue;J.type=oe;J.w=Ld;J.x=Pd;J.y=Qd;J.z=Rd;aa.buffer=me;aa.divisor=ye;aa.normalized=Be;aa.offset=pe;aa.size=hf;aa.state=Te;aa.stride=Pe;aa.type=ve;aa.w=Fe;aa.x=Je;aa.y=Ke;aa.z=Le;x.buffer=Ge;x.divisor=
Md;x.normalized=Wd;x.offset=be;x.size=ee;x.state=Me;x.stride=Id;x.type=Sd;x.w=De;x.x=Ne;x.y=af;x.z=$e;v.vert=Ue;v.frag=Qe;T.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,I,H,C,c,M,g,ka,A,na,za,X,da,T){var Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,Qa,lc,fa,E,ta,Fa,sa,Aa,Ea,
ga,Y,va,Ya,Ga,ob,ba;Q=a.attributes;F=a.buffer;q=a.context;O=a.current;P=a.draw;qa=a.elements;oa=a.extensions;v=a.framebuffer;G=a.gl;ca=a.isBufferArgs;W=a.next;la=a.shader;ra=a.uniforms;Ca=a.vao;xa=W.blend_color;ea=O.blend_color;Da=W.blend_equation;ja=O.blend_equation;pa=W.blend_func;Ba=O.blend_func;Ma=W.colorMask;Z=O.colorMask;zb=W.depth_range;Za=O.depth_range;u=W.polygonOffset_offset;n=O.polygonOffset_offset;R=W.sample_coverage;ua=O.sample_coverage;wa=W.scissor_box;Qa=O.scissor_box;lc=W.stencil_func;
fa=O.stencil_func;E=W.stencil_opBack;ta=O.stencil_opBack;Fa=W.stencil_opFront;sa=O.stencil_opFront;Aa=W.viewport;Ea=O.viewport;ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};va={divisor:1,offset:8,stride:8};Ya={divisor:1,offset:4,stride:4};Ga={divisor:1,offset:16,stride:8};ob={divisor:1,offset:24,stride:8};ba={divisor:1,offset:0,stride:8};return{batch:function(b,d){var a,r,h,t,p,x;a=v.next;a!==v.cur&&(a?G.bindFramebuffer(36160,
a.framebuffer):G.bindFramebuffer(36160,null),v.cur=a);if(O.dirty){var y,K,w,N,D,J,Aa,S,ra,xa,aa,pa,wa,Da,la,ia,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb;y=W.dither;y!==O.dither&&(y?G.enable(3024):G.disable(3024),O.dither=y);K=W.depth_func;K!==O.depth_func&&(G.depthFunc(K),O.depth_func=K);w=zb[0];N=zb[1];if(w!==Za[0]||N!==Za[1])G.depthRange(w,N),Za[0]=w,Za[1]=N;D=W.depth_mask;D!==O.depth_mask&&(G.depthMask(D),O.depth_mask=D);J=Ma[0];Aa=Ma[1];S=Ma[2];ra=Ma[3];if(J!==Z[0]||Aa!==Z[1]||S!==Z[2]||ra!==
Z[3])G.colorMask(J,Aa,S,ra),Z[0]=J,Z[1]=Aa,Z[2]=S,Z[3]=ra;xa=W.frontFace;xa!==O.frontFace&&(G.frontFace(xa),O.frontFace=xa);aa=W.lineWidth;aa!==O.lineWidth&&(G.lineWidth(aa),O.lineWidth=aa);pa=W.polygonOffset_enable;pa!==O.polygonOffset_enable&&(pa?G.enable(32823):G.disable(32823),O.polygonOffset_enable=pa);wa=u[0];Da=u[1];if(wa!==n[0]||Da!==n[1])G.polygonOffset(wa,Da),n[0]=wa,n[1]=Da;la=W.sample_alpha;la!==O.sample_alpha&&(la?G.enable(32926):G.disable(32926),O.sample_alpha=la);ia=W.sample_enable;
ia!==O.sample_enable&&(ia?G.enable(32928):G.disable(32928),O.sample_enable=ia);Xd=R[0];Od=R[1];if(Xd!==ua[0]||Od!==ua[1])G.sampleCoverage(Xd,Od),ua[0]=Xd,ua[1]=Od;Gd=W.stencil_mask;Gd!==O.stencil_mask&&(G.stencilMask(Gd),O.stencil_mask=Gd);nd=lc[0];bd=lc[1];rd=lc[2];if(nd!==fa[0]||bd!==fa[1]||rd!==fa[2])G.stencilFunc(nd,bd,rd),fa[0]=nd,fa[1]=bd,fa[2]=rd;Lc=Fa[0];pd=Fa[1];Fc=Fa[2];fd=Fa[3];if(Lc!==sa[0]||pd!==sa[1]||Fc!==sa[2]||fd!==sa[3])G.stencilOpSeparate(Lc,pd,Fc,fd),sa[0]=Lc,sa[1]=pd,sa[2]=Fc,
sa[3]=fd;Oc=E[0];Ic=E[1];Db=E[2];Hb=E[3];if(Oc!==ta[0]||Ic!==ta[1]||Db!==ta[2]||Hb!==ta[3])G.stencilOpSeparate(Oc,Ic,Db,Hb),ta[0]=Oc,ta[1]=Ic,ta[2]=Db,ta[3]=Hb}G.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;G.enable(3042);O.blend_enable=!0;G.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;G.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;G.enable(2884);O.cull_enable=!0;G.cullFace(1029);O.cull_face=1029;G.enable(3089);O.scissor_enable=!0;G.disable(2960);O.stencil_enable=
!1;if(r=O.profile)h=performance.now(),ma.count+=d;G.useProgram(L.program);t=oa.angle_instanced_arrays;var uc,Ab,xc,Eb,Jc;Ca.setVAO(null);uc=C.location;Ab=Q[uc];Ab.buffer||G.enableVertexAttribArray(uc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==m||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)G.bindBuffer(34962,m.buffer),G.vertexAttribPointer(uc,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=m,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(t.vertexAttribDivisorANGLE(uc,0),Ab.divisor=
0);xc=c.location;Eb=Q[xc];Eb.buffer||G.enableVertexAttribArray(xc);if(5126!==Eb.type||1!==Eb.size||Eb.buffer!==e||!1!==Eb.normalized||4!==Eb.offset||8!==Eb.stride)G.bindBuffer(34962,e.buffer),G.vertexAttribPointer(xc,1,5126,!1,8,4),Eb.type=5126,Eb.size=1,Eb.buffer=e,Eb.normalized=!1,Eb.offset=4,Eb.stride=8;0!==Eb.divisor&&(t.vertexAttribDivisorANGLE(xc,0),Eb.divisor=0);(Jc=P.elements)?G.bindBuffer(34963,Jc.buffer.buffer):Ca.currentVAO&&(Jc=qa.getElements(Ca.currentVAO.elements))&&G.bindBuffer(34963,
Jc.buffer.buffer);for(p=0;p<d;++p){x=b[p];var mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,He,Pa,jd,bf,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc;mc=x.viewport;Gc=mc.x|0;gd=
mc.y|0;Xc="width"in mc?mc.width|0:q.framebufferWidth-Gc;Cc="height"in mc?mc.height|0:q.framebufferHeight-gd;ec=q.viewportWidth;q.viewportWidth=Xc;Hc=q.viewportHeight;q.viewportHeight=Cc;G.viewport(Gc,gd,Xc,Cc);Ea[0]=Gc;Ea[1]=gd;Ea[2]=Xc;Ea[3]=Cc;(pc=ha.call(this,q,x,p))?G.enable(2929):G.disable(2929);O.depth_enable=pc;qc=x.viewport;nc=qc.x|0;fc=qc.y|0;gb="width"in qc?qc.width|0:q.framebufferWidth-nc;Sc="height"in qc?qc.height|0:q.framebufferHeight-fc;G.scissor(nc,fc,gb,Sc);Qa[0]=nc;Qa[1]=fc;Qa[2]=
gb;Qa[3]=Sc;va.buffer=x.positionBuffer;Bb=!1;db=null;Ob=0;bb=!1;Va=kb=0;yd=1;Jb=0;Kb=5126;Ib=lb=Pb=rc=0;ca(va)?(Bb=!0,db=F.createStream(34962,va),Kb=db.dtype):(db=F.getBuffer(va))?Kb=db.dtype:"constant"in va?(yd=2,"number"===typeof va.constant?(Pb=va.constant,lb=Ib=rc=0):(Pb=0<va.constant.length?va.constant[0]:0,lb=1<va.constant.length?va.constant[1]:0,Ib=2<va.constant.length?va.constant[2]:0,rc=3<va.constant.length?va.constant[3]:0)):(db=ca(va.buffer)?F.createStream(34962,va.buffer):F.getBuffer(va.buffer),
Kb="type"in va?ga[va.type]:db.dtype,bb=!!va.normalized,Va=va.size|0,kb=va.offset|0,Jb=va.stride|0,Ob=va.divisor|0);Fb=z.location;yb=Q[Fb];if(1===yd){yb.buffer||G.enableVertexAttribArray(Fb);ib=Va||2;if(yb.type!==Kb||yb.size!==ib||yb.buffer!==db||yb.normalized!==bb||yb.offset!==kb||yb.stride!==Jb)G.bindBuffer(34962,db.buffer),G.vertexAttribPointer(Fb,ib,Kb,bb,Jb,kb),yb.type=Kb,yb.size=ib,yb.buffer=db,yb.normalized=bb,yb.offset=kb,yb.stride=Jb;yb.divisor!==Ob&&(t.vertexAttribDivisorANGLE(Fb,Ob),yb.divisor=
Ob)}else if(yb.buffer&&(G.disableVertexAttribArray(Fb),yb.buffer=null),yb.x!==Pb||yb.y!==lb||yb.z!==Ib||yb.w!==rc)G.vertexAttrib4f(Fb,Pb,lb,Ib,rc),yb.x=Pb,yb.y=lb,yb.z=Ib,yb.w=rc;Ga.buffer=x.positionBuffer;Zb=!1;Qb=null;sb=0;Ta=!1;qb=Rb=0;bc=1;jb=0;rb=5126;fb=Ja=tb=Ia=0;ca(Ga)?(Zb=!0,Qb=F.createStream(34962,Ga),rb=Qb.dtype):(Qb=F.getBuffer(Ga))?rb=Qb.dtype:"constant"in Ga?(bc=2,"number"===typeof Ga.constant?(tb=Ga.constant,Ja=fb=Ia=0):(tb=0<Ga.constant.length?Ga.constant[0]:0,Ja=1<Ga.constant.length?
Ga.constant[1]:0,fb=2<Ga.constant.length?Ga.constant[2]:0,Ia=3<Ga.constant.length?Ga.constant[3]:0)):(Qb=ca(Ga.buffer)?F.createStream(34962,Ga.buffer):F.getBuffer(Ga.buffer),rb="type"in Ga?ga[Ga.type]:Qb.dtype,Ta=!!Ga.normalized,qb=Ga.size|0,Rb=Ga.offset|0,jb=Ga.stride|0,sb=Ga.divisor|0);hb=B.location;Ka=Q[hb];if(1===bc){Ka.buffer||G.enableVertexAttribArray(hb);mb=qb||2;if(Ka.type!==rb||Ka.size!==mb||Ka.buffer!==Qb||Ka.normalized!==Ta||Ka.offset!==Rb||Ka.stride!==jb)G.bindBuffer(34962,Qb.buffer),
G.vertexAttribPointer(hb,mb,rb,Ta,jb,Rb),Ka.type=rb,Ka.size=mb,Ka.buffer=Qb,Ka.normalized=Ta,Ka.offset=Rb,Ka.stride=jb;Ka.divisor!==sb&&(t.vertexAttribDivisorANGLE(hb,sb),Ka.divisor=sb)}else if(Ka.buffer&&(G.disableVertexAttribArray(hb),Ka.buffer=null),Ka.x!==tb||Ka.y!==Ja||Ka.z!==fb||Ka.w!==Ia)G.vertexAttrib4f(hb,tb,Ja,fb,Ia),Ka.x=tb,Ka.y=Ja,Ka.z=fb,Ka.w=Ia;ob.buffer=x.positionBuffer;Wa=!1;vb=null;ub=0;Oa=!1;Sa=Bc=0;Lb=1;Gb=0;La=5126;Nb=Mb=$a=Pc=0;ca(ob)?(Wa=!0,vb=F.createStream(34962,ob),La=vb.dtype):
(vb=F.getBuffer(ob))?La=vb.dtype:"constant"in ob?(Lb=2,"number"===typeof ob.constant?($a=ob.constant,Mb=Nb=Pc=0):($a=0<ob.constant.length?ob.constant[0]:0,Mb=1<ob.constant.length?ob.constant[1]:0,Nb=2<ob.constant.length?ob.constant[2]:0,Pc=3<ob.constant.length?ob.constant[3]:0)):(vb=ca(ob.buffer)?F.createStream(34962,ob.buffer):F.getBuffer(ob.buffer),La="type"in ob?ga[ob.type]:vb.dtype,Oa=!!ob.normalized,Sa=ob.size|0,Bc=ob.offset|0,Gb=ob.stride|0,ub=ob.divisor|0);nb=ka.location;Na=Q[nb];if(1===Lb){Na.buffer||
G.enableVertexAttribArray(nb);$b=Sa||2;if(Na.type!==La||Na.size!==$b||Na.buffer!==vb||Na.normalized!==Oa||Na.offset!==Bc||Na.stride!==Gb)G.bindBuffer(34962,vb.buffer),G.vertexAttribPointer(nb,$b,La,Oa,Gb,Bc),Na.type=La,Na.size=$b,Na.buffer=vb,Na.normalized=Oa,Na.offset=Bc,Na.stride=Gb;Na.divisor!==ub&&(t.vertexAttribDivisorANGLE(nb,ub),Na.divisor=ub)}else if(Na.buffer&&(G.disableVertexAttribArray(nb),Na.buffer=null),Na.x!==$a||Na.y!==Mb||Na.z!==Nb||Na.w!==Pc)G.vertexAttrib4f(nb,$a,Mb,Nb,Pc),Na.x=
$a,Na.y=Mb,Na.z=Nb,Na.w=Pc;ba.buffer=x.positionBuffer;Ra=!1;wb=null;xb=0;Ua=!1;gc=pb=0;Ec=1;vc=0;cb=5126;ld=Xa=Tc=jc=0;ca(ba)?(Ra=!0,wb=F.createStream(34962,ba),cb=wb.dtype):(wb=F.getBuffer(ba))?cb=wb.dtype:"constant"in ba?(Ec=2,"number"===typeof ba.constant?(Tc=ba.constant,Xa=ld=jc=0):(Tc=0<ba.constant.length?ba.constant[0]:0,Xa=1<ba.constant.length?ba.constant[1]:0,ld=2<ba.constant.length?ba.constant[2]:0,jc=3<ba.constant.length?ba.constant[3]:0)):(wb=ca(ba.buffer)?F.createStream(34962,ba.buffer):
F.getBuffer(ba.buffer),cb="type"in ba?ga[ba.type]:wb.dtype,Ua=!!ba.normalized,gc=ba.size|0,pb=ba.offset|0,vc=ba.stride|0,xb=ba.divisor|0);Cb=na.location;ab=Q[Cb];if(1===Ec){ab.buffer||G.enableVertexAttribArray(Cb);Wb=gc||2;if(ab.type!==cb||ab.size!==Wb||ab.buffer!==wb||ab.normalized!==Ua||ab.offset!==pb||ab.stride!==vc)G.bindBuffer(34962,wb.buffer),G.vertexAttribPointer(Cb,Wb,cb,Ua,vc,pb),ab.type=cb,ab.size=Wb,ab.buffer=wb,ab.normalized=Ua,ab.offset=pb,ab.stride=vc;ab.divisor!==xb&&(t.vertexAttribDivisorANGLE(Cb,
xb),ab.divisor=xb)}else if(ab.buffer&&(G.disableVertexAttribArray(Cb),ab.buffer=null),ab.x!==Tc||ab.y!==Xa||ab.z!==ld||ab.w!==jc)G.vertexAttrib4f(Cb,Tc,Xa,ld,jc),ab.x=Tc,ab.y=Xa,ab.z=ld,ab.w=jc;Y.buffer=x.colorBuffer;tc=!1;Xb=null;Sb=0;Kc=!1;td=Tb=0;Dc=1;zd=0;Mc=5126;wc=oc=qd=Yc=0;ca(Y)?(tc=!0,Xb=F.createStream(34962,Y),Mc=Xb.dtype):(Xb=F.getBuffer(Y))?Mc=Xb.dtype:"constant"in Y?(Dc=2,"number"===typeof Y.constant?(qd=Y.constant,oc=wc=Yc=0):(qd=0<Y.constant.length?Y.constant[0]:0,oc=1<Y.constant.length?
Y.constant[1]:0,wc=2<Y.constant.length?Y.constant[2]:0,Yc=3<Y.constant.length?Y.constant[3]:0)):(Xb=ca(Y.buffer)?F.createStream(34962,Y.buffer):F.getBuffer(Y.buffer),Mc="type"in Y?ga[Y.type]:Xb.dtype,Kc=!!Y.normalized,td=Y.size|0,Tb=Y.offset|0,zd=Y.stride|0,Sb=Y.divisor|0);hc=U.location;eb=Q[hc];if(1===Dc){eb.buffer||G.enableVertexAttribArray(hc);sc=td||4;if(eb.type!==Mc||eb.size!==sc||eb.buffer!==Xb||eb.normalized!==Kc||eb.offset!==Tb||eb.stride!==zd)G.bindBuffer(34962,Xb.buffer),G.vertexAttribPointer(hc,
sc,Mc,Kc,zd,Tb),eb.type=Mc,eb.size=sc,eb.buffer=Xb,eb.normalized=Kc,eb.offset=Tb,eb.stride=zd;eb.divisor!==Sb&&(t.vertexAttribDivisorANGLE(hc,Sb),eb.divisor=Sb)}else if(eb.buffer&&(G.disableVertexAttribArray(hc),eb.buffer=null),eb.x!==qd||eb.y!==oc||eb.z!==wc||eb.w!==Yc)G.vertexAttrib4f(hc,qd,oc,wc,Yc),eb.x=qd,eb.y=oc,eb.z=wc,eb.w=Yc;Ya.buffer=x.colorBuffer;Vb=!1;Yb=null;dc=0;ic=!1;Ac=yc=0;cd=1;Qc=0;Rc=5126;dd=md=Zc=Uc=0;ca(Ya)?(Vb=!0,Yb=F.createStream(34962,Ya),Rc=Yb.dtype):(Yb=F.getBuffer(Ya))?
Rc=Yb.dtype:"constant"in Ya?(cd=2,"number"===typeof Ya.constant?(Zc=Ya.constant,md=dd=Uc=0):(Zc=0<Ya.constant.length?Ya.constant[0]:0,md=1<Ya.constant.length?Ya.constant[1]:0,dd=2<Ya.constant.length?Ya.constant[2]:0,Uc=3<Ya.constant.length?Ya.constant[3]:0)):(Yb=ca(Ya.buffer)?F.createStream(34962,Ya.buffer):F.getBuffer(Ya.buffer),Rc="type"in Ya?ga[Ya.type]:Yb.dtype,ic=!!Ya.normalized,Ac=Ya.size|0,yc=Ya.offset|0,Qc=Ya.stride|0,dc=Ya.divisor|0);$c=V.location;kc=Q[$c];if(1===cd){kc.buffer||G.enableVertexAttribArray($c);
cc=Ac||4;if(kc.type!==Rc||kc.size!==cc||kc.buffer!==Yb||kc.normalized!==ic||kc.offset!==yc||kc.stride!==Qc)G.bindBuffer(34962,Yb.buffer),G.vertexAttribPointer($c,cc,Rc,ic,Qc,yc),kc.type=Rc,kc.size=cc,kc.buffer=Yb,kc.normalized=ic,kc.offset=yc,kc.stride=Qc;kc.divisor!==dc&&(t.vertexAttribDivisorANGLE($c,dc),kc.divisor=dc)}else if(kc.buffer&&(G.disableVertexAttribArray($c),kc.buffer=null),kc.x!==Zc||kc.y!==md||kc.z!==dd||kc.w!==Uc)G.vertexAttrib4f($c,Zc,md,dd,Uc),kc.x=Zc,kc.y=md,kc.z=dd,kc.w=Uc;ad=
x.scale;Wc=ad[0];zc=ad[1];p&&ed===Wc&&id===zc||(ed=Wc,id=zc,G.uniform2f(za.location,Wc,zc));Ad=x.translate;He=Ad[0];jd=Ad[1];p&&Pa===He&&bf===jd||(Pa=He,bf=jd,G.uniform2f(da.location,He,jd));Bd=x.thickness;p&&ge===Bd||(ge=Bd,G.uniform1f(X.location,Bd));ce=x.depth;p&&Yd===ce||(Yd=ce,G.uniform1f(H.location,ce));Jd=k.call(this,q,x,p);Hd=Jd[0];Vc=Jd[1];sd=Jd[2];vd=Jd[3];p&&od===Hd&&ud===Vc&&kd===sd&&Cd===vd||(od=Hd,ud=Vc,kd=sd,Cd=vd,G.uniform4f(T.location,Hd,Vc,sd,vd));Dd=x.miterLimit;p&&re===Dd||(re=
Dd,G.uniform1f(M.location,Dd));je=f.call(this,q,x,p);p&&se===je||(se=je,G.uniform1f(g.location,je));ke=x.dashLength;p&&ie===ke||(ie=ke,G.uniform1f(l.location,ke));he=x.opacity;p&&te===he||(te=he,G.uniform1f(A.location,he));(de=x.dashTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);le=de._texture;G.uniform1i(I.location,le.bind());Nc=x.count;0<Nc?Jc?t.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Nc):t.drawArraysInstancedANGLE(5,0,4,Nc):0>Nc&&(Jc?G.drawElements(5,4,Jc.type,0<<
(Jc.type-5121>>1)):G.drawArrays(5,0,4));q.viewportWidth=ec;q.viewportHeight=Hc;Bb&&F.destroyStream(db);Zb&&F.destroyStream(Qb);Wa&&F.destroyStream(vb);Ra&&F.destroyStream(wb);tc&&F.destroyStream(Xb);Vb&&F.destroyStream(Yb);le.unbind()}O.dirty=!0;Ca.setVAO(null);r&&(ma.cpuTime+=performance.now()-h)},draw:function(f){var a,k,r,h,p,t,x,y,w,N,J,Aa,S,L,ra,xa,aa,pa,wa,ha,Da,la,ia,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,
Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td;a=v.next;a!==v.cur&&(a?G.bindFramebuffer(36160,a.framebuffer):G.bindFramebuffer(36160,null),v.cur=a);if(O.dirty){var Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc;Dc=W.dither;Dc!==O.dither&&(Dc?G.enable(3024):G.disable(3024),O.dither=Dc);zd=W.depth_func;zd!==O.depth_func&&(G.depthFunc(zd),
O.depth_func=zd);Mc=zb[0];Yc=zb[1];if(Mc!==Za[0]||Yc!==Za[1])G.depthRange(Mc,Yc),Za[0]=Mc,Za[1]=Yc;qd=W.depth_mask;qd!==O.depth_mask&&(G.depthMask(qd),O.depth_mask=qd);oc=Ma[0];wc=Ma[1];hc=Ma[2];eb=Ma[3];if(oc!==Z[0]||wc!==Z[1]||hc!==Z[2]||eb!==Z[3])G.colorMask(oc,wc,hc,eb),Z[0]=oc,Z[1]=wc,Z[2]=hc,Z[3]=eb;sc=W.frontFace;sc!==O.frontFace&&(G.frontFace(sc),O.frontFace=sc);Vb=W.lineWidth;Vb!==O.lineWidth&&(G.lineWidth(Vb),O.lineWidth=Vb);Yb=W.polygonOffset_enable;Yb!==O.polygonOffset_enable&&(Yb?G.enable(32823):
G.disable(32823),O.polygonOffset_enable=Yb);dc=u[0];ic=u[1];if(dc!==n[0]||ic!==n[1])G.polygonOffset(dc,ic),n[0]=dc,n[1]=ic;yc=W.sample_alpha;yc!==O.sample_alpha&&(yc?G.enable(32926):G.disable(32926),O.sample_alpha=yc);Ac=W.sample_enable;Ac!==O.sample_enable&&(Ac?G.enable(32928):G.disable(32928),O.sample_enable=Ac);cd=R[0];Qc=R[1];if(cd!==ua[0]||Qc!==ua[1])G.sampleCoverage(cd,Qc),ua[0]=cd,ua[1]=Qc;Rc=W.stencil_mask;Rc!==O.stencil_mask&&(G.stencilMask(Rc),O.stencil_mask=Rc);Uc=lc[0];Zc=lc[1];md=lc[2];
if(Uc!==fa[0]||Zc!==fa[1]||md!==fa[2])G.stencilFunc(Uc,Zc,md),fa[0]=Uc,fa[1]=Zc,fa[2]=md;dd=Fa[0];$c=Fa[1];kc=Fa[2];cc=Fa[3];if(dd!==sa[0]||$c!==sa[1]||kc!==sa[2]||cc!==sa[3])G.stencilOpSeparate(dd,$c,kc,cc),sa[0]=dd,sa[1]=$c,sa[2]=kc,sa[3]=cc;ad=E[0];Wc=E[1];ed=E[2];zc=E[3];if(ad!==ta[0]||Wc!==ta[1]||ed!==ta[2]||zc!==ta[3])G.stencilOpSeparate(ad,Wc,ed,zc),ta[0]=ad,ta[1]=Wc,ta[2]=ed,ta[3]=zc}k=f.viewport;r=k.x|0;h=k.y|0;p="width"in k?k.width|0:q.framebufferWidth-r;t="height"in k?k.height|0:q.framebufferHeight-
h;x=q.viewportWidth;q.viewportWidth=p;y=q.viewportHeight;q.viewportHeight=t;G.viewport(r,h,p,t);Ea[0]=r;Ea[1]=h;Ea[2]=p;Ea[3]=t;G.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;G.enable(3042);O.blend_enable=!0;G.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;G.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;G.enable(2884);O.cull_enable=!0;G.cullFace(1029);O.cull_face=1029;(w=D.call(this,q,f,0))?G.enable(2929):G.disable(2929);O.depth_enable=w;N=f.viewport;J=
N.x|0;Aa=N.y|0;S="width"in N?N.width|0:q.framebufferWidth-J;L="height"in N?N.height|0:q.framebufferHeight-Aa;G.scissor(J,Aa,S,L);Qa[0]=J;Qa[1]=Aa;Qa[2]=S;Qa[3]=L;G.enable(3089);O.scissor_enable=!0;G.disable(2960);O.stencil_enable=!1;if(ra=O.profile)xa=performance.now(),ma.count++;G.useProgram(K.program);aa=oa.angle_instanced_arrays;Ca.setVAO(null);va.buffer=f.positionBuffer;pa=!1;wa=null;ha=0;Da=!1;ia=la=0;Xd=1;Od=0;Gd=5126;Lc=rd=bd=nd=0;ca(va)?(pa=!0,wa=F.createStream(34962,va),Gd=wa.dtype):(wa=
F.getBuffer(va))?Gd=wa.dtype:"constant"in va?(Xd=2,"number"===typeof va.constant?(bd=va.constant,rd=Lc=nd=0):(bd=0<va.constant.length?va.constant[0]:0,rd=1<va.constant.length?va.constant[1]:0,Lc=2<va.constant.length?va.constant[2]:0,nd=3<va.constant.length?va.constant[3]:0)):(wa=ca(va.buffer)?F.createStream(34962,va.buffer):F.getBuffer(va.buffer),Gd="type"in va?ga[va.type]:wa.dtype,Da=!!va.normalized,ia=va.size|0,la=va.offset|0,Od=va.stride|0,ha=va.divisor|0);pd=z.location;Fc=Q[pd];if(1===Xd){Fc.buffer||
G.enableVertexAttribArray(pd);fd=ia||2;if(Fc.type!==Gd||Fc.size!==fd||Fc.buffer!==wa||Fc.normalized!==Da||Fc.offset!==la||Fc.stride!==Od)G.bindBuffer(34962,wa.buffer),G.vertexAttribPointer(pd,fd,Gd,Da,Od,la),Fc.type=Gd,Fc.size=fd,Fc.buffer=wa,Fc.normalized=Da,Fc.offset=la,Fc.stride=Od;Fc.divisor!==ha&&(aa.vertexAttribDivisorANGLE(pd,ha),Fc.divisor=ha)}else if(Fc.buffer&&(G.disableVertexAttribArray(pd),Fc.buffer=null),Fc.x!==bd||Fc.y!==rd||Fc.z!==Lc||Fc.w!==nd)G.vertexAttrib4f(pd,bd,rd,Lc,nd),Fc.x=
bd,Fc.y=rd,Fc.z=Lc,Fc.w=nd;Ga.buffer=f.positionBuffer;Oc=!1;Ic=null;Db=0;Hb=!1;Ab=uc=0;xc=1;Eb=0;Jc=5126;Xc=gd=Gc=mc=0;ca(Ga)?(Oc=!0,Ic=F.createStream(34962,Ga),Jc=Ic.dtype):(Ic=F.getBuffer(Ga))?Jc=Ic.dtype:"constant"in Ga?(xc=2,"number"===typeof Ga.constant?(Gc=Ga.constant,gd=Xc=mc=0):(Gc=0<Ga.constant.length?Ga.constant[0]:0,gd=1<Ga.constant.length?Ga.constant[1]:0,Xc=2<Ga.constant.length?Ga.constant[2]:0,mc=3<Ga.constant.length?Ga.constant[3]:0)):(Ic=ca(Ga.buffer)?F.createStream(34962,Ga.buffer):
F.getBuffer(Ga.buffer),Jc="type"in Ga?ga[Ga.type]:Ic.dtype,Hb=!!Ga.normalized,Ab=Ga.size|0,uc=Ga.offset|0,Eb=Ga.stride|0,Db=Ga.divisor|0);Cc=B.location;ec=Q[Cc];if(1===xc){ec.buffer||G.enableVertexAttribArray(Cc);Hc=Ab||2;if(ec.type!==Jc||ec.size!==Hc||ec.buffer!==Ic||ec.normalized!==Hb||ec.offset!==uc||ec.stride!==Eb)G.bindBuffer(34962,Ic.buffer),G.vertexAttribPointer(Cc,Hc,Jc,Hb,Eb,uc),ec.type=Jc,ec.size=Hc,ec.buffer=Ic,ec.normalized=Hb,ec.offset=uc,ec.stride=Eb;ec.divisor!==Db&&(aa.vertexAttribDivisorANGLE(Cc,
Db),ec.divisor=Db)}else if(ec.buffer&&(G.disableVertexAttribArray(Cc),ec.buffer=null),ec.x!==Gc||ec.y!==gd||ec.z!==Xc||ec.w!==mc)G.vertexAttrib4f(Cc,Gc,gd,Xc,mc),ec.x=Gc,ec.y=gd,ec.z=Xc,ec.w=mc;ob.buffer=f.positionBuffer;pc=!1;qc=null;nc=0;fc=!1;Sc=gb=0;Bb=1;db=0;Ob=5126;yd=Va=kb=bb=0;ca(ob)?(pc=!0,qc=F.createStream(34962,ob),Ob=qc.dtype):(qc=F.getBuffer(ob))?Ob=qc.dtype:"constant"in ob?(Bb=2,"number"===typeof ob.constant?(kb=ob.constant,Va=yd=bb=0):(kb=0<ob.constant.length?ob.constant[0]:0,Va=1<
ob.constant.length?ob.constant[1]:0,yd=2<ob.constant.length?ob.constant[2]:0,bb=3<ob.constant.length?ob.constant[3]:0)):(qc=ca(ob.buffer)?F.createStream(34962,ob.buffer):F.getBuffer(ob.buffer),Ob="type"in ob?ga[ob.type]:qc.dtype,fc=!!ob.normalized,Sc=ob.size|0,gb=ob.offset|0,db=ob.stride|0,nc=ob.divisor|0);Jb=ka.location;Kb=Q[Jb];if(1===Bb){Kb.buffer||G.enableVertexAttribArray(Jb);rc=Sc||2;if(Kb.type!==Ob||Kb.size!==rc||Kb.buffer!==qc||Kb.normalized!==fc||Kb.offset!==gb||Kb.stride!==db)G.bindBuffer(34962,
qc.buffer),G.vertexAttribPointer(Jb,rc,Ob,fc,db,gb),Kb.type=Ob,Kb.size=rc,Kb.buffer=qc,Kb.normalized=fc,Kb.offset=gb,Kb.stride=db;Kb.divisor!==nc&&(aa.vertexAttribDivisorANGLE(Jb,nc),Kb.divisor=nc)}else if(Kb.buffer&&(G.disableVertexAttribArray(Jb),Kb.buffer=null),Kb.x!==kb||Kb.y!==Va||Kb.z!==yd||Kb.w!==bb)G.vertexAttrib4f(Jb,kb,Va,yd,bb),Kb.x=kb,Kb.y=Va,Kb.z=yd,Kb.w=bb;ba.buffer=f.positionBuffer;Pb=!1;lb=null;Ib=0;Fb=!1;ib=yb=0;Zb=1;Qb=0;sb=5126;bc=qb=Rb=Ta=0;ca(ba)?(Pb=!0,lb=F.createStream(34962,
ba),sb=lb.dtype):(lb=F.getBuffer(ba))?sb=lb.dtype:"constant"in ba?(Zb=2,"number"===typeof ba.constant?(Rb=ba.constant,qb=bc=Ta=0):(Rb=0<ba.constant.length?ba.constant[0]:0,qb=1<ba.constant.length?ba.constant[1]:0,bc=2<ba.constant.length?ba.constant[2]:0,Ta=3<ba.constant.length?ba.constant[3]:0)):(lb=ca(ba.buffer)?F.createStream(34962,ba.buffer):F.getBuffer(ba.buffer),sb="type"in ba?ga[ba.type]:lb.dtype,Fb=!!ba.normalized,ib=ba.size|0,yb=ba.offset|0,Qb=ba.stride|0,Ib=ba.divisor|0);jb=na.location;rb=
Q[jb];if(1===Zb){rb.buffer||G.enableVertexAttribArray(jb);Ia=ib||2;if(rb.type!==sb||rb.size!==Ia||rb.buffer!==lb||rb.normalized!==Fb||rb.offset!==yb||rb.stride!==Qb)G.bindBuffer(34962,lb.buffer),G.vertexAttribPointer(jb,Ia,sb,Fb,Qb,yb),rb.type=sb,rb.size=Ia,rb.buffer=lb,rb.normalized=Fb,rb.offset=yb,rb.stride=Qb;rb.divisor!==Ib&&(aa.vertexAttribDivisorANGLE(jb,Ib),rb.divisor=Ib)}else if(rb.buffer&&(G.disableVertexAttribArray(jb),rb.buffer=null),rb.x!==Rb||rb.y!==qb||rb.z!==bc||rb.w!==Ta)G.vertexAttrib4f(jb,
Rb,qb,bc,Ta),rb.x=Rb,rb.y=qb,rb.z=bc,rb.w=Ta;Y.buffer=f.colorBuffer;tb=!1;Ja=null;fb=0;hb=!1;mb=Ka=0;Wa=1;vb=0;ub=5126;Lb=Sa=Bc=Oa=0;ca(Y)?(tb=!0,Ja=F.createStream(34962,Y),ub=Ja.dtype):(Ja=F.getBuffer(Y))?ub=Ja.dtype:"constant"in Y?(Wa=2,"number"===typeof Y.constant?(Bc=Y.constant,Sa=Lb=Oa=0):(Bc=0<Y.constant.length?Y.constant[0]:0,Sa=1<Y.constant.length?Y.constant[1]:0,Lb=2<Y.constant.length?Y.constant[2]:0,Oa=3<Y.constant.length?Y.constant[3]:0)):(Ja=ca(Y.buffer)?F.createStream(34962,Y.buffer):
F.getBuffer(Y.buffer),ub="type"in Y?ga[Y.type]:Ja.dtype,hb=!!Y.normalized,mb=Y.size|0,Ka=Y.offset|0,vb=Y.stride|0,fb=Y.divisor|0);Gb=U.location;La=Q[Gb];if(1===Wa){La.buffer||G.enableVertexAttribArray(Gb);Pc=mb||4;if(La.type!==ub||La.size!==Pc||La.buffer!==Ja||La.normalized!==hb||La.offset!==Ka||La.stride!==vb)G.bindBuffer(34962,Ja.buffer),G.vertexAttribPointer(Gb,Pc,ub,hb,vb,Ka),La.type=ub,La.size=Pc,La.buffer=Ja,La.normalized=hb,La.offset=Ka,La.stride=vb;La.divisor!==fb&&(aa.vertexAttribDivisorANGLE(Gb,
fb),La.divisor=fb)}else if(La.buffer&&(G.disableVertexAttribArray(Gb),La.buffer=null),La.x!==Bc||La.y!==Sa||La.z!==Lb||La.w!==Oa)G.vertexAttrib4f(Gb,Bc,Sa,Lb,Oa),La.x=Bc,La.y=Sa,La.z=Lb,La.w=Oa;Ya.buffer=f.colorBuffer;$a=!1;Mb=null;Nb=0;nb=!1;$b=Na=0;Ra=1;wb=0;xb=5126;Ec=gc=pb=Ua=0;ca(Ya)?($a=!0,Mb=F.createStream(34962,Ya),xb=Mb.dtype):(Mb=F.getBuffer(Ya))?xb=Mb.dtype:"constant"in Ya?(Ra=2,"number"===typeof Ya.constant?(pb=Ya.constant,gc=Ec=Ua=0):(pb=0<Ya.constant.length?Ya.constant[0]:0,gc=1<Ya.constant.length?
Ya.constant[1]:0,Ec=2<Ya.constant.length?Ya.constant[2]:0,Ua=3<Ya.constant.length?Ya.constant[3]:0)):(Mb=ca(Ya.buffer)?F.createStream(34962,Ya.buffer):F.getBuffer(Ya.buffer),xb="type"in Ya?ga[Ya.type]:Mb.dtype,nb=!!Ya.normalized,$b=Ya.size|0,Na=Ya.offset|0,wb=Ya.stride|0,Nb=Ya.divisor|0);vc=V.location;cb=Q[vc];if(1===Ra){cb.buffer||G.enableVertexAttribArray(vc);jc=$b||4;if(cb.type!==xb||cb.size!==jc||cb.buffer!==Mb||cb.normalized!==nb||cb.offset!==Na||cb.stride!==wb)G.bindBuffer(34962,Mb.buffer),
G.vertexAttribPointer(vc,jc,xb,nb,wb,Na),cb.type=xb,cb.size=jc,cb.buffer=Mb,cb.normalized=nb,cb.offset=Na,cb.stride=wb;cb.divisor!==Nb&&(aa.vertexAttribDivisorANGLE(vc,Nb),cb.divisor=Nb)}else if(cb.buffer&&(G.disableVertexAttribArray(vc),cb.buffer=null),cb.x!==pb||cb.y!==gc||cb.z!==Ec||cb.w!==Ua)G.vertexAttrib4f(vc,pb,gc,Ec,Ua),cb.x=pb,cb.y=gc,cb.z=Ec,cb.w=Ua;Tc=C.location;Xa=Q[Tc];Xa.buffer||G.enableVertexAttribArray(Tc);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==m||!1!==Xa.normalized||0!==Xa.offset||
8!==Xa.stride)G.bindBuffer(34962,m.buffer),G.vertexAttribPointer(Tc,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=m,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(aa.vertexAttribDivisorANGLE(Tc,0),Xa.divisor=0);ld=c.location;Cb=Q[ld];Cb.buffer||G.enableVertexAttribArray(ld);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==e||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)G.bindBuffer(34962,e.buffer),G.vertexAttribPointer(ld,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=e,Cb.normalized=
!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(aa.vertexAttribDivisorANGLE(ld,0),Cb.divisor=0);ab=f.scale;G.uniform2f(za.location,ab[0],ab[1]);Wb=f.translate;G.uniform2f(da.location,Wb[0],Wb[1]);G.uniform1f(X.location,f.thickness);G.uniform1f(H.location,f.depth);tc=d.call(this,q,f,0);G.uniform4f(T.location,tc[0],tc[1],tc[2],tc[3]);G.uniform1f(M.location,f.miterLimit);Xb=b.call(this,q,f,0);G.uniform1f(g.location,Xb);G.uniform1f(l.location,f.dashLength);G.uniform1f(A.location,f.opacity);(Sb=f.dashTexture)&&
"framebuffer"===Sb._reglType&&(Sb=Sb.color[0]);Kc=Sb._texture;G.uniform1i(I.location,Kc.bind());(Tb=P.elements)?G.bindBuffer(34963,Tb.buffer.buffer):Ca.currentVAO&&(Tb=qa.getElements(Ca.currentVAO.elements))&&G.bindBuffer(34963,Tb.buffer.buffer);td=f.count;0<td?Tb?aa.drawElementsInstancedANGLE(5,4,Tb.type,0<<(Tb.type-5121>>1),td):aa.drawArraysInstancedANGLE(5,0,4,td):0>td&&(Tb?G.drawElements(5,4,Tb.type,0<<(Tb.type-5121>>1)):G.drawArrays(5,0,4));O.dirty=!0;Ca.setVAO(null);q.viewportWidth=x;q.viewportHeight=
y;ra&&(ma.cpuTime+=performance.now()-xa);pa&&F.destroyStream(wa);Oc&&F.destroyStream(Ic);pc&&F.destroyStream(qc);Pb&&F.destroyStream(lb);tb&&F.destroyStream(Ja);$a&&F.destroyStream(Mb);Kc.unbind()},scope:function(c,b,d){var g,f,a,k,u,n,v,E,Z,l,R,A,ta,z,G,Ma,B,Fa,Q,zb,sa,ea,T,fa,H,K,C,ua,D,M,L,Ea,qa,ja,U,Za,X,V,Ba,da,ha,lc,oa,I,ka,na,ya,Ca,Qa,za,fc,gb,ia,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,
wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,Pa,Ie,jd,bf,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Re,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;g=c.viewport;f=g.x|0;a=g.y|0;k="width"in g?g.width|0:q.framebufferWidth-
f;u="height"in g?g.height|0:q.framebufferHeight-a;n=q.viewportWidth;q.viewportWidth=k;v=q.viewportHeight;q.viewportHeight=u;E=Aa[0];Aa[0]=f;Z=Aa[1];Aa[1]=a;l=Aa[2];Aa[2]=k;R=Aa[3];Aa[3]=u;A=xa[0];xa[0]=0;ta=xa[1];xa[1]=0;z=xa[2];xa[2]=0;G=xa[3];xa[3]=0;Ma=W.blend_enable;W.blend_enable=!0;B=Da[0];Da[0]=32774;Fa=Da[1];Da[1]=32774;Q=pa[0];pa[0]=770;zb=pa[1];pa[1]=771;sa=pa[2];pa[2]=773;ea=pa[3];pa[3]=1;T=W.cull_enable;W.cull_enable=!0;fa=W.cull_face;W.cull_face=1029;H=t.call(this,q,c,d);K=W.depth_enable;
W.depth_enable=H;C=c.viewport;ua=C.x|0;D=C.y|0;M="width"in C?C.width|0:q.framebufferWidth-ua;L="height"in C?C.height|0:q.framebufferHeight-D;Ea=wa[0];wa[0]=ua;qa=wa[1];wa[1]=D;ja=wa[2];wa[2]=M;U=wa[3];wa[3]=L;Za=W.scissor_enable;W.scissor_enable=!0;X=W.stencil_enable;W.stencil_enable=!1;if(V=O.profile)Ba=performance.now(),ma.count++;da=P.offset;P.offset=0;ha=P.count;P.count=4;lc=c.count;oa=P.instances;P.instances=lc;I=P.primitive;P.primitive=5;ka=c.dashLength;na=ra[23];ra[23]=ka;ya=c.dashTexture;
Ca=ra[24];ra[24]=ya;Qa=c.depth;za=ra[22];ra[22]=Qa;fc=c.id;gb=ra[31];ra[31]=fc;ia=c.miterLimit;Bb=ra[32];ra[32]=ia;db=y.call(this,q,c,d);Ob=ra[33];ra[33]=db;bb=c.opacity;kb=ra[10];ra[10]=bb;Va=q.pixelRatio;yd=ra[34];ra[34]=Va;Jb=c.scale;Kb=ra[6];ra[6]=Jb;rc=c.scaleFract;Pb=ra[7];ra[7]=rc;lb=c.thickness;Ib=ra[21];ra[21]=lb;Fb=c.translate;yb=ra[8];ra[8]=Fb;ib=c.translateFract;Zb=ra[9];ra[9]=ib;Qb=p.call(this,q,c,d);sb=ra[3];ra[3]=Qb;Y.buffer=c.colorBuffer;Ta=!1;Rb=null;qb=0;bc=!1;rb=jb=0;Ia=1;tb=0;
Ja=5126;mb=Ka=hb=fb=0;ca(Y)?(Ta=!0,Rb=F.createStream(34962,Y),Ja=Rb.dtype):(Rb=F.getBuffer(Y))?Ja=Rb.dtype:"constant"in Y?(Ia=2,"number"===typeof Y.constant?(hb=Y.constant,Ka=mb=fb=0):(hb=0<Y.constant.length?Y.constant[0]:0,Ka=1<Y.constant.length?Y.constant[1]:0,mb=2<Y.constant.length?Y.constant[2]:0,fb=3<Y.constant.length?Y.constant[3]:0)):(Rb=ca(Y.buffer)?F.createStream(34962,Y.buffer):F.getBuffer(Y.buffer),Ja="type"in Y?ga[Y.type]:Rb.dtype,bc=!!Y.normalized,rb=Y.size|0,jb=Y.offset|0,tb=Y.stride|
0,qb=Y.divisor|0);Wa=h.buffer;h.buffer=Rb;vb=h.divisor;h.divisor=qb;ub=h.normalized;h.normalized=bc;Oa=h.offset;h.offset=jb;Bc=h.size;h.size=rb;Sa=h.state;h.state=Ia;Lb=h.stride;h.stride=tb;Gb=h.type;h.type=Ja;La=h.w;h.w=fb;Pc=h.x;h.x=hb;$a=h.y;h.y=Ka;Mb=h.z;h.z=mb;va.buffer=c.positionBuffer;Nb=!1;nb=null;Na=0;$b=!1;wb=Ra=0;xb=1;Ua=0;pb=5126;cb=vc=Ec=gc=0;ca(va)?(Nb=!0,nb=F.createStream(34962,va),pb=nb.dtype):(nb=F.getBuffer(va))?pb=nb.dtype:"constant"in va?(xb=2,"number"===typeof va.constant?(Ec=
va.constant,vc=cb=gc=0):(Ec=0<va.constant.length?va.constant[0]:0,vc=1<va.constant.length?va.constant[1]:0,cb=2<va.constant.length?va.constant[2]:0,gc=3<va.constant.length?va.constant[3]:0)):(nb=ca(va.buffer)?F.createStream(34962,va.buffer):F.getBuffer(va.buffer),pb="type"in va?ga[va.type]:nb.dtype,$b=!!va.normalized,wb=va.size|0,Ra=va.offset|0,Ua=va.stride|0,Na=va.divisor|0);jc=N.buffer;N.buffer=nb;Tc=N.divisor;N.divisor=Na;Xa=N.normalized;N.normalized=$b;ld=N.offset;N.offset=Ra;Cb=N.size;N.size=
wb;ab=N.state;N.state=xb;Wb=N.stride;N.stride=Ua;tc=N.type;N.type=pb;Xb=N.w;N.w=gc;Sb=N.x;N.x=Ec;Kc=N.y;N.y=vc;Tb=N.z;N.z=cb;Ya.buffer=c.colorBuffer;td=!1;Dc=null;zd=0;Mc=!1;qd=Yc=0;oc=1;wc=0;hc=5126;Yb=Vb=sc=eb=0;ca(Ya)?(td=!0,Dc=F.createStream(34962,Ya),hc=Dc.dtype):(Dc=F.getBuffer(Ya))?hc=Dc.dtype:"constant"in Ya?(oc=2,"number"===typeof Ya.constant?(sc=Ya.constant,Vb=Yb=eb=0):(sc=0<Ya.constant.length?Ya.constant[0]:0,Vb=1<Ya.constant.length?Ya.constant[1]:0,Yb=2<Ya.constant.length?Ya.constant[2]:
0,eb=3<Ya.constant.length?Ya.constant[3]:0)):(Dc=ca(Ya.buffer)?F.createStream(34962,Ya.buffer):F.getBuffer(Ya.buffer),hc="type"in Ya?ga[Ya.type]:Dc.dtype,Mc=!!Ya.normalized,qd=Ya.size|0,Yc=Ya.offset|0,wc=Ya.stride|0,zd=Ya.divisor|0);dc=w.buffer;w.buffer=Dc;ic=w.divisor;w.divisor=zd;yc=w.normalized;w.normalized=Mc;Ac=w.offset;w.offset=Yc;cd=w.size;w.size=qd;Qc=w.state;w.state=oc;Rc=w.stride;w.stride=wc;Uc=w.type;w.type=hc;Zc=w.w;w.w=eb;md=w.x;w.x=sc;dd=w.y;w.y=Vb;$c=w.z;w.z=Yb;Ga.buffer=c.positionBuffer;
kc=!1;cc=null;ad=0;Wc=!1;zc=ed=0;id=1;Ad=0;Pa=5126;Bd=bf=jd=Ie=0;ca(Ga)?(kc=!0,cc=F.createStream(34962,Ga),Pa=cc.dtype):(cc=F.getBuffer(Ga))?Pa=cc.dtype:"constant"in Ga?(id=2,"number"===typeof Ga.constant?(jd=Ga.constant,bf=Bd=Ie=0):(jd=0<Ga.constant.length?Ga.constant[0]:0,bf=1<Ga.constant.length?Ga.constant[1]:0,Bd=2<Ga.constant.length?Ga.constant[2]:0,Ie=3<Ga.constant.length?Ga.constant[3]:0)):(cc=ca(Ga.buffer)?F.createStream(34962,Ga.buffer):F.getBuffer(Ga.buffer),Pa="type"in Ga?ga[Ga.type]:cc.dtype,
Wc=!!Ga.normalized,zc=Ga.size|0,ed=Ga.offset|0,Ad=Ga.stride|0,ad=Ga.divisor|0);ge=J.buffer;J.buffer=cc;ce=J.divisor;J.divisor=ad;Yd=J.normalized;J.normalized=Wc;Jd=J.offset;J.offset=ed;Hd=J.size;J.size=zc;od=J.state;J.state=id;Vc=J.stride;J.stride=Ad;ud=J.type;J.type=Pa;sd=J.w;J.w=Ie;kd=J.x;J.x=jd;vd=J.y;J.y=bf;Cd=J.z;J.z=Bd;Dd=aa.buffer;aa.buffer=m;re=aa.divisor;aa.divisor=0;je=aa.normalized;aa.normalized=!1;se=aa.offset;aa.offset=0;ke=aa.size;aa.size=0;ie=aa.state;aa.state=1;he=aa.stride;aa.stride=
8;te=aa.type;aa.type=5126;de=aa.w;aa.w=0;le=aa.x;aa.x=0;Nc=aa.y;aa.y=0;hd=aa.z;aa.z=0;ue=x.buffer;x.buffer=e;oe=x.divisor;x.divisor=0;Ld=x.normalized;x.normalized=!1;Pd=x.offset;x.offset=4;Qd=x.size;x.size=0;Rd=x.state;x.state=1;me=x.stride;x.stride=8;ye=x.type;x.type=5126;Be=x.w;x.w=0;pe=x.x;x.x=0;hf=x.y;x.y=0;Te=x.z;x.z=0;ob.buffer=c.positionBuffer;Pe=!1;ve=null;Fe=0;Je=!1;Le=Ke=0;Ge=1;Md=0;Wd=5126;Id=Me=ee=be=0;ca(ob)?(Pe=!0,ve=F.createStream(34962,ob),Wd=ve.dtype):(ve=F.getBuffer(ob))?Wd=ve.dtype:
"constant"in ob?(Ge=2,"number"===typeof ob.constant?(ee=ob.constant,Me=Id=be=0):(ee=0<ob.constant.length?ob.constant[0]:0,Me=1<ob.constant.length?ob.constant[1]:0,Id=2<ob.constant.length?ob.constant[2]:0,be=3<ob.constant.length?ob.constant[3]:0)):(ve=ca(ob.buffer)?F.createStream(34962,ob.buffer):F.getBuffer(ob.buffer),Wd="type"in ob?ga[ob.type]:ve.dtype,Je=!!ob.normalized,Le=ob.size|0,Ke=ob.offset|0,Md=ob.stride|0,Fe=ob.divisor|0);Sd=S.buffer;S.buffer=ve;De=S.divisor;S.divisor=Fe;Ne=S.normalized;
S.normalized=Je;af=S.offset;S.offset=Ke;$e=S.size;S.size=Le;Ue=S.state;S.state=Ge;Qe=S.stride;S.stride=Md;Ze=S.type;S.type=Wd;Ye=S.w;S.w=be;Ve=S.x;S.x=ee;We=S.y;S.y=Me;Td=S.z;S.z=Id;ba.buffer=c.positionBuffer;Zd=!1;Xe=null;jf=0;nf=!1;kf=ef=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;ca(ba)?(Zd=!0,Xe=F.createStream(34962,ba),rf=Xe.dtype):(Xe=F.getBuffer(ba))?rf=Xe.dtype:"constant"in ba?(lf=2,"number"===typeof ba.constant?(sf=ba.constant,Bf=Cf=of=0):(sf=0<ba.constant.length?ba.constant[0]:0,Bf=1<ba.constant.length?
ba.constant[1]:0,Cf=2<ba.constant.length?ba.constant[2]:0,of=3<ba.constant.length?ba.constant[3]:0)):(Xe=ca(ba.buffer)?F.createStream(34962,ba.buffer):F.getBuffer(ba.buffer),rf="type"in ba?ga[ba.type]:Xe.dtype,nf=!!ba.normalized,kf=ba.size|0,ef=ba.offset|0,mf=ba.stride|0,jf=ba.divisor|0);Re=r.buffer;r.buffer=Xe;Ee=r.divisor;r.divisor=jf;pf=r.normalized;r.normalized=nf;qf=r.offset;r.offset=ef;Df=r.size;r.size=kf;Gf=r.state;r.state=lf;Af=r.stride;r.stride=mf;Ef=r.type;r.type=rf;Ff=r.w;r.w=of;wf=r.x;
r.x=sf;xf=r.y;r.y=Bf;vf=r.z;r.z=Cf;yf=la.vert;la.vert=36;zf=la.frag;la.frag=35;O.dirty=!0;b(q,c,d);q.viewportWidth=n;q.viewportHeight=v;Aa[0]=E;Aa[1]=Z;Aa[2]=l;Aa[3]=R;xa[0]=A;xa[1]=ta;xa[2]=z;xa[3]=G;W.blend_enable=Ma;Da[0]=B;Da[1]=Fa;pa[0]=Q;pa[1]=zb;pa[2]=sa;pa[3]=ea;W.cull_enable=T;W.cull_face=fa;W.depth_enable=K;wa[0]=Ea;wa[1]=qa;wa[2]=ja;wa[3]=U;W.scissor_enable=Za;W.stencil_enable=X;V&&(ma.cpuTime+=performance.now()-Ba);P.offset=da;P.count=ha;P.instances=oa;P.primitive=I;ra[23]=na;ra[24]=Ca;
ra[22]=za;ra[31]=gb;ra[32]=Bb;ra[33]=Ob;ra[10]=kb;ra[34]=yd;ra[6]=Kb;ra[7]=Pb;ra[21]=Ib;ra[8]=yb;ra[9]=Zb;ra[3]=sb;Ta&&F.destroyStream(Rb);h.buffer=Wa;h.divisor=vb;h.normalized=ub;h.offset=Oa;h.size=Bc;h.state=Sa;h.stride=Lb;h.type=Gb;h.w=La;h.x=Pc;h.y=$a;h.z=Mb;Nb&&F.destroyStream(nb);N.buffer=jc;N.divisor=Tc;N.normalized=Xa;N.offset=ld;N.size=Cb;N.state=ab;N.stride=Wb;N.type=tc;N.w=Xb;N.x=Sb;N.y=Kc;N.z=Tb;td&&F.destroyStream(Dc);w.buffer=dc;w.divisor=ic;w.normalized=yc;w.offset=Ac;w.size=cd;w.state=
Qc;w.stride=Rc;w.type=Uc;w.w=Zc;w.x=md;w.y=dd;w.z=$c;kc&&F.destroyStream(cc);J.buffer=ge;J.divisor=ce;J.normalized=Yd;J.offset=Jd;J.size=Hd;J.state=od;J.stride=Vc;J.type=ud;J.w=sd;J.x=kd;J.y=vd;J.z=Cd;aa.buffer=Dd;aa.divisor=re;aa.normalized=je;aa.offset=se;aa.size=ke;aa.state=ie;aa.stride=he;aa.type=te;aa.w=de;aa.x=le;aa.y=Nc;aa.z=hd;x.buffer=ue;x.divisor=oe;x.normalized=Ld;x.offset=Pd;x.size=Qd;x.state=Rd;x.stride=me;x.type=ye;x.w=Be;x.x=pe;x.y=hf;x.z=Te;Pe&&F.destroyStream(ve);S.buffer=Sd;S.divisor=
De;S.normalized=Ne;S.offset=af;S.size=$e;S.state=Ue;S.stride=Qe;S.type=Ze;S.w=Ye;S.x=Ve;S.y=We;S.z=Td;Zd&&F.destroyStream(Xe);r.buffer=Re;r.divisor=Ee;r.normalized=pf;r.offset=qf;r.size=Df;r.state=Gf;r.stride=Af;r.type=Ef;r.w=Ff;r.x=wf;r.y=xf;r.z=vf;la.vert=yf;la.frag=zf;O.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r){var L,ha,k,f,U,z,V,B,l,I,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,
la,ra,Ca,xa,ea,Da,ja,pa;L=a.attributes;ha=a.buffer;k=a.context;f=a.current;U=a.draw;z=a.elements;V=a.extensions;B=a.framebuffer;l=a.gl;I=a.isBufferArgs;H=a.next;C=a.shader;c=a.uniforms;M=a.vao;g=H.blend_color;ka=f.blend_color;A=H.blend_equation;na=f.blend_equation;za=H.blend_func;X=f.blend_func;da=H.colorMask;T=f.colorMask;Q=H.depth_range;F=f.depth_range;q=H.polygonOffset_offset;O=f.polygonOffset_offset;P=H.sample_coverage;qa=f.sample_coverage;oa=H.scissor_box;v=f.scissor_box;G=H.stencil_func;ca=
f.stencil_func;W=H.stencil_opBack;la=f.stencil_opBack;ra=H.stencil_opFront;Ca=f.stencil_opFront;xa=H.viewport;ea=f.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(c,b){var d,g,e,a,n,R;d=B.next;d!==B.cur&&(d?l.bindFramebuffer(36160,d.framebuffer):l.bindFramebuffer(36160,null),B.cur=d);if(f.dirty){var m,A,C,K,fa,E,ta,Fa,sa,D,Ea,ga,Y,xa,oa,Ga,za,ba,ia,ac,Ha,Pa,Ub,we,Ed,xd,Ud,
ze,xe,Nd,ne,Kd;m=H.dither;m!==f.dither&&(m?l.enable(3024):l.disable(3024),f.dither=m);A=H.depth_func;A!==f.depth_func&&(l.depthFunc(A),f.depth_func=A);C=Q[0];K=Q[1];if(C!==F[0]||K!==F[1])l.depthRange(C,K),F[0]=C,F[1]=K;fa=H.depth_mask;fa!==f.depth_mask&&(l.depthMask(fa),f.depth_mask=fa);E=da[0];ta=da[1];Fa=da[2];sa=da[3];if(E!==T[0]||ta!==T[1]||Fa!==T[2]||sa!==T[3])l.colorMask(E,ta,Fa,sa),T[0]=E,T[1]=ta,T[2]=Fa,T[3]=sa;D=H.cull_enable;D!==f.cull_enable&&(D?l.enable(2884):l.disable(2884),f.cull_enable=
D);Ea=H.cull_face;Ea!==f.cull_face&&(l.cullFace(Ea),f.cull_face=Ea);ga=H.frontFace;ga!==f.frontFace&&(l.frontFace(ga),f.frontFace=ga);Y=H.lineWidth;Y!==f.lineWidth&&(l.lineWidth(Y),f.lineWidth=Y);xa=H.polygonOffset_enable;xa!==f.polygonOffset_enable&&(xa?l.enable(32823):l.disable(32823),f.polygonOffset_enable=xa);oa=q[0];Ga=q[1];if(oa!==O[0]||Ga!==O[1])l.polygonOffset(oa,Ga),O[0]=oa,O[1]=Ga;za=H.sample_alpha;za!==f.sample_alpha&&(za?l.enable(32926):l.disable(32926),f.sample_alpha=za);ba=H.sample_enable;
ba!==f.sample_enable&&(ba?l.enable(32928):l.disable(32928),f.sample_enable=ba);ia=P[0];ac=P[1];if(ia!==qa[0]||ac!==qa[1])l.sampleCoverage(ia,ac),qa[0]=ia,qa[1]=ac;Ha=H.stencil_mask;Ha!==f.stencil_mask&&(l.stencilMask(Ha),f.stencil_mask=Ha);Pa=G[0];Ub=G[1];we=G[2];if(Pa!==ca[0]||Ub!==ca[1]||we!==ca[2])l.stencilFunc(Pa,Ub,we),ca[0]=Pa,ca[1]=Ub,ca[2]=we;Ed=ra[0];xd=ra[1];Ud=ra[2];ze=ra[3];if(Ed!==Ca[0]||xd!==Ca[1]||Ud!==Ca[2]||ze!==Ca[3])l.stencilOpSeparate(Ed,xd,Ud,ze),Ca[0]=Ed,Ca[1]=xd,Ca[2]=Ud,Ca[3]=
ze;xe=W[0];Nd=W[1];ne=W[2];Kd=W[3];if(xe!==la[0]||Nd!==la[1]||ne!==la[2]||Kd!==la[3])l.stencilOpSeparate(xe,Nd,ne,Kd),la[0]=xe,la[1]=Nd,la[2]=ne,la[3]=Kd}l.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;l.enable(3042);f.blend_enable=!0;l.blendEquationSeparate(32774,32774);na[0]=32774;na[1]=32774;l.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;l.disable(2929);f.depth_enable=!1;l.enable(3089);f.scissor_enable=!0;l.disable(2960);f.stencil_enable=!1;if(g=f.profile)e=performance.now(),
ma.count+=b;l.useProgram(t.program);a=V.angle_instanced_arrays;var Vd;M.setVAO(null);Vd=U.instances;for(n=0;n<b;++n){R=c[n];var ae,fe,$d,Ce,Oe,Se,Fd,Ae,qe,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb;ae=R.viewport;fe=ae.x|0;$d=ae.y|0;Ce="width"in ae?ae.width|0:k.framebufferWidth-fe;Oe="height"in ae?ae.height|0:k.framebufferHeight-
$d;Se=k.viewportWidth;k.viewportWidth=Ce;Fd=k.viewportHeight;k.viewportHeight=Oe;l.viewport(fe,$d,Ce,Oe);ea[0]=fe;ea[1]=$d;ea[2]=Ce;ea[3]=Oe;Ae=R.viewport;qe=Ae.x|0;Xd=Ae.y|0;Od="width"in Ae?Ae.width|0:k.framebufferWidth-qe;Gd="height"in Ae?Ae.height|0:k.framebufferHeight-Xd;l.scissor(qe,Xd,Od,Gd);v[0]=qe;v[1]=Xd;v[2]=Od;v[3]=Gd;ja.buffer=R.positionBuffer;nd=!1;bd=null;rd=0;Lc=!1;Fc=pd=0;fd=1;Oc=0;Ic=5126;Ab=uc=Hb=Db=0;I(ja)?(nd=!0,bd=ha.createStream(34962,ja),Ic=bd.dtype):(bd=ha.getBuffer(ja))?Ic=
bd.dtype:"constant"in ja?(fd=2,"number"===typeof ja.constant?(Hb=ja.constant,uc=Ab=Db=0):(Hb=0<ja.constant.length?ja.constant[0]:0,uc=1<ja.constant.length?ja.constant[1]:0,Ab=2<ja.constant.length?ja.constant[2]:0,Db=3<ja.constant.length?ja.constant[3]:0)):(bd=I(ja.buffer)?ha.createStream(34962,ja.buffer):ha.getBuffer(ja.buffer),Ic="type"in ja?Da[ja.type]:bd.dtype,Lc=!!ja.normalized,Fc=ja.size|0,pd=ja.offset|0,Oc=ja.stride|0,rd=ja.divisor|0);xc=w.location;Eb=L[xc];if(1===fd){Eb.buffer||l.enableVertexAttribArray(xc);
Jc=Fc||2;if(Eb.type!==Ic||Eb.size!==Jc||Eb.buffer!==bd||Eb.normalized!==Lc||Eb.offset!==pd||Eb.stride!==Oc)l.bindBuffer(34962,bd.buffer),l.vertexAttribPointer(xc,Jc,Ic,Lc,Oc,pd),Eb.type=Ic,Eb.size=Jc,Eb.buffer=bd,Eb.normalized=Lc,Eb.offset=pd,Eb.stride=Oc;Eb.divisor!==rd&&(a.vertexAttribDivisorANGLE(xc,rd),Eb.divisor=rd)}else if(Eb.buffer&&(l.disableVertexAttribArray(xc),Eb.buffer=null),Eb.x!==Hb||Eb.y!==uc||Eb.z!==Ab||Eb.w!==Db)l.vertexAttrib4f(xc,Hb,uc,Ab,Db),Eb.x=Hb,Eb.y=uc,Eb.z=Ab,Eb.w=Db;pa.buffer=
R.positionFractBuffer;mc=!1;Gc=null;gd=0;Xc=!1;ec=Cc=0;Hc=1;pc=0;qc=5126;Sc=gb=fc=nc=0;I(pa)?(mc=!0,Gc=ha.createStream(34962,pa),qc=Gc.dtype):(Gc=ha.getBuffer(pa))?qc=Gc.dtype:"constant"in pa?(Hc=2,"number"===typeof pa.constant?(fc=pa.constant,gb=Sc=nc=0):(fc=0<pa.constant.length?pa.constant[0]:0,gb=1<pa.constant.length?pa.constant[1]:0,Sc=2<pa.constant.length?pa.constant[2]:0,nc=3<pa.constant.length?pa.constant[3]:0)):(Gc=I(pa.buffer)?ha.createStream(34962,pa.buffer):ha.getBuffer(pa.buffer),qc="type"in
pa?Da[pa.type]:Gc.dtype,Xc=!!pa.normalized,ec=pa.size|0,Cc=pa.offset|0,pc=pa.stride|0,gd=pa.divisor|0);Bb=J.location;db=L[Bb];if(1===Hc){db.buffer||l.enableVertexAttribArray(Bb);Ob=ec||2;if(db.type!==qc||db.size!==Ob||db.buffer!==Gc||db.normalized!==Xc||db.offset!==Cc||db.stride!==pc)l.bindBuffer(34962,Gc.buffer),l.vertexAttribPointer(Bb,Ob,qc,Xc,pc,Cc),db.type=qc,db.size=Ob,db.buffer=Gc,db.normalized=Xc,db.offset=Cc,db.stride=pc;db.divisor!==gd&&(a.vertexAttribDivisorANGLE(Bb,gd),db.divisor=gd)}else if(db.buffer&&
(l.disableVertexAttribArray(Bb),db.buffer=null),db.x!==fc||db.y!==gb||db.z!==Sc||db.w!==nc)l.vertexAttrib4f(Bb,fc,gb,Sc,nc),db.x=fc,db.y=gb,db.z=Sc,db.w=nc;bb=R.fill;kb=bb[0];yd=bb[1];Kb=bb[2];Pb=bb[3];n&&Va===kb&&Jb===yd&&rc===Kb&&lb===Pb||(Va=kb,Jb=yd,rc=Kb,lb=Pb,l.uniform4f(p.location,kb,yd,Kb,Pb));Ib=R.scale;Fb=Ib[0];ib=Ib[1];n&&yb===Fb&&Zb===ib||(yb=Fb,Zb=ib,l.uniform2f(aa.location,Fb,ib));Qb=R.scaleFract;sb=Qb[0];Rb=Qb[1];n&&Ta===sb&&qb===Rb||(Ta=sb,qb=Rb,l.uniform2f(x.location,sb,Rb));bc=R.translate;
jb=bc[0];Ia=bc[1];n&&rb===jb&&tb===Ia||(rb=jb,tb=Ia,l.uniform2f(S.location,jb,Ia));Ja=R.translateFract;fb=Ja[0];Ka=Ja[1];n&&hb===fb&&mb===Ka||(hb=fb,mb=Ka,l.uniform2f(r.location,fb,Ka));Wa=R.id;n&&vb===Wa||(vb=Wa,l.uniform1f(h.location,Wa));ub=R.opacity;n&&Oa===ub||(Oa=ub,l.uniform1f(N.location,ub));Bc=y.call(this,k,R,n);Sa=null;(Sa=(Lb=I(Bc))?z.createStream(Bc):z.getElements(Bc))&&l.bindBuffer(34963,Sa.buffer.buffer);if(Gb=Sa?Sa.vertCount:-1)0<Vd?Sa?a.drawElementsInstancedANGLE(4,Gb,Sa.type,0<<(Sa.type-
5121>>1),Vd):a.drawArraysInstancedANGLE(4,0,Gb,Vd):0>Vd&&(Sa?l.drawElements(4,Gb,Sa.type,0<<(Sa.type-5121>>1)):l.drawArrays(4,0,Gb)),k.viewportWidth=Se,k.viewportHeight=Fd,nd&&ha.destroyStream(bd),mc&&ha.destroyStream(Gc),Lb&&z.destroyStream(Sa)}f.dirty=!0;M.setVAO(null);g&&(ma.cpuTime+=performance.now()-e)},draw:function(c){var b,d,g,e,a,n,R,m,A,t,y,fa,E,ta,Fa,sa,C,Ea,ga,Y,xa,oa;b=B.next;b!==B.cur&&(b?l.bindFramebuffer(36160,b.framebuffer):l.bindFramebuffer(36160,null),B.cur=b);if(f.dirty){b=H.dither;
b!==f.dither&&(b?l.enable(3024):l.disable(3024),f.dither=b);b=H.depth_func;b!==f.depth_func&&(l.depthFunc(b),f.depth_func=b);b=Q[0];n=Q[1];if(b!==F[0]||n!==F[1])l.depthRange(b,n),F[0]=b,F[1]=n;b=H.depth_mask;b!==f.depth_mask&&(l.depthMask(b),f.depth_mask=b);b=da[0];n=da[1];d=da[2];g=da[3];if(b!==T[0]||n!==T[1]||d!==T[2]||g!==T[3])l.colorMask(b,n,d,g),T[0]=b,T[1]=n,T[2]=d,T[3]=g;b=H.cull_enable;b!==f.cull_enable&&(b?l.enable(2884):l.disable(2884),f.cull_enable=b);b=H.cull_face;b!==f.cull_face&&(l.cullFace(b),
f.cull_face=b);b=H.frontFace;b!==f.frontFace&&(l.frontFace(b),f.frontFace=b);b=H.lineWidth;b!==f.lineWidth&&(l.lineWidth(b),f.lineWidth=b);b=H.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?l.enable(32823):l.disable(32823),f.polygonOffset_enable=b);b=q[0];n=q[1];if(b!==O[0]||n!==O[1])l.polygonOffset(b,n),O[0]=b,O[1]=n;b=H.sample_alpha;b!==f.sample_alpha&&(b?l.enable(32926):l.disable(32926),f.sample_alpha=b);b=H.sample_enable;b!==f.sample_enable&&(b?l.enable(32928):l.disable(32928),f.sample_enable=
b);b=P[0];n=P[1];if(b!==qa[0]||n!==qa[1])l.sampleCoverage(b,n),qa[0]=b,qa[1]=n;b=H.stencil_mask;b!==f.stencil_mask&&(l.stencilMask(b),f.stencil_mask=b);b=G[0];n=G[1];d=G[2];if(b!==ca[0]||n!==ca[1]||d!==ca[2])l.stencilFunc(b,n,d),ca[0]=b,ca[1]=n,ca[2]=d;b=ra[0];n=ra[1];d=ra[2];g=ra[3];if(b!==Ca[0]||n!==Ca[1]||d!==Ca[2]||g!==Ca[3])l.stencilOpSeparate(b,n,d,g),Ca[0]=b,Ca[1]=n,Ca[2]=d,Ca[3]=g;b=W[0];n=W[1];d=W[2];g=W[3];if(b!==la[0]||n!==la[1]||d!==la[2]||g!==la[3])l.stencilOpSeparate(b,n,d,g),la[0]=
b,la[1]=n,la[2]=d,la[3]=g}b=c.viewport;d=b.x|0;g=b.y|0;e="width"in b?b.width|0:k.framebufferWidth-d;a="height"in b?b.height|0:k.framebufferHeight-g;b=k.viewportWidth;k.viewportWidth=e;n=k.viewportHeight;k.viewportHeight=a;l.viewport(d,g,e,a);ea[0]=d;ea[1]=g;ea[2]=e;ea[3]=a;l.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;l.enable(3042);f.blend_enable=!0;l.blendEquationSeparate(32774,32774);na[0]=32774;na[1]=32774;l.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;l.disable(2929);
f.depth_enable=!1;a=c.viewport;d=a.x|0;g=a.y|0;e="width"in a?a.width|0:k.framebufferWidth-d;a="height"in a?a.height|0:k.framebufferHeight-g;l.scissor(d,g,e,a);v[0]=d;v[1]=g;v[2]=e;v[3]=a;l.enable(3089);f.scissor_enable=!0;l.disable(2960);f.stencil_enable=!1;if(d=f.profile)R=performance.now(),ma.count++;l.useProgram(D.program);g=V.angle_instanced_arrays;M.setVAO(null);ja.buffer=c.positionBuffer;e=!1;m=0;A=!1;y=t=0;fa=1;E=0;ta=5126;Ea=C=sa=Fa=0;I(ja)?(e=!0,a=ha.createStream(34962,ja),ta=a.dtype):(a=
ha.getBuffer(ja))?ta=a.dtype:"constant"in ja?(fa=2,"number"===typeof ja.constant?(sa=ja.constant,C=Ea=Fa=0):(sa=0<ja.constant.length?ja.constant[0]:0,C=1<ja.constant.length?ja.constant[1]:0,Ea=2<ja.constant.length?ja.constant[2]:0,Fa=3<ja.constant.length?ja.constant[3]:0)):(a=I(ja.buffer)?ha.createStream(34962,ja.buffer):ha.getBuffer(ja.buffer),ta="type"in ja?Da[ja.type]:a.dtype,A=!!ja.normalized,y=ja.size|0,t=ja.offset|0,E=ja.stride|0,m=ja.divisor|0);ga=w.location;Y=L[ga];if(1===fa){Y.buffer||l.enableVertexAttribArray(ga);
y=y||2;if(Y.type!==ta||Y.size!==y||Y.buffer!==a||Y.normalized!==A||Y.offset!==t||Y.stride!==E)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(ga,y,ta,A,E,t),Y.type=ta,Y.size=y,Y.buffer=a,Y.normalized=A,Y.offset=t,Y.stride=E;Y.divisor!==m&&(g.vertexAttribDivisorANGLE(ga,m),Y.divisor=m)}else if(Y.buffer&&(l.disableVertexAttribArray(ga),Y.buffer=null),Y.x!==sa||Y.y!==C||Y.z!==Ea||Y.w!==Fa)l.vertexAttrib4f(ga,sa,C,Ea,Fa),Y.x=sa,Y.y=C,Y.z=Ea,Y.w=Fa;pa.buffer=c.positionFractBuffer;m=!1;t=0;E=!1;Fa=ta=
0;sa=1;ga=0;Y=5126;oa=xa=Ea=C=0;I(pa)?(m=!0,A=ha.createStream(34962,pa),Y=A.dtype):(A=ha.getBuffer(pa))?Y=A.dtype:"constant"in pa?(sa=2,"number"===typeof pa.constant?(Ea=pa.constant,xa=oa=C=0):(Ea=0<pa.constant.length?pa.constant[0]:0,xa=1<pa.constant.length?pa.constant[1]:0,oa=2<pa.constant.length?pa.constant[2]:0,C=3<pa.constant.length?pa.constant[3]:0)):(A=I(pa.buffer)?ha.createStream(34962,pa.buffer):ha.getBuffer(pa.buffer),Y="type"in pa?Da[pa.type]:A.dtype,E=!!pa.normalized,Fa=pa.size|0,ta=pa.offset|
0,ga=pa.stride|0,t=pa.divisor|0);y=J.location;fa=L[y];if(1===sa){fa.buffer||l.enableVertexAttribArray(y);Fa=Fa||2;if(fa.type!==Y||fa.size!==Fa||fa.buffer!==A||fa.normalized!==E||fa.offset!==ta||fa.stride!==ga)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(y,Fa,Y,E,ga,ta),fa.type=Y,fa.size=Fa,fa.buffer=A,fa.normalized=E,fa.offset=ta,fa.stride=ga;fa.divisor!==t&&(g.vertexAttribDivisorANGLE(y,t),fa.divisor=t)}else if(fa.buffer&&(l.disableVertexAttribArray(y),fa.buffer=null),fa.x!==Ea||fa.y!==xa||
fa.z!==oa||fa.w!==C)l.vertexAttrib4f(y,Ea,xa,oa,C),fa.x=Ea,fa.y=xa,fa.z=oa,fa.w=C;t=c.fill;l.uniform4f(p.location,t[0],t[1],t[2],t[3]);t=c.scale;l.uniform2f(aa.location,t[0],t[1]);t=c.scaleFract;l.uniform2f(x.location,t[0],t[1]);t=c.translate;l.uniform2f(S.location,t[0],t[1]);t=c.translateFract;l.uniform2f(r.location,t[0],t[1]);l.uniform1f(h.location,c.id);l.uniform1f(N.location,c.opacity);t=K.call(this,k,c,0);(t=(c=I(t))?z.createStream(t):z.getElements(t))&&l.bindBuffer(34963,t.buffer.buffer);if(E=
t?t.vertCount:-1)ta=U.instances,0<ta?t?g.drawElementsInstancedANGLE(4,E,t.type,0<<(t.type-5121>>1),ta):g.drawArraysInstancedANGLE(4,0,E,ta):0>ta&&(t?l.drawElements(4,E,t.type,0<<(t.type-5121>>1)):l.drawArrays(4,0,E)),f.dirty=!0,M.setVAO(null),k.viewportWidth=b,k.viewportHeight=n,d&&(ma.cpuTime+=performance.now()-R),e&&ha.destroyStream(a),m&&ha.destroyStream(A),c&&z.destroyStream(t)},scope:function(a,q,v){var l,r,u,n,R,t,h,G,p,B,E,ta,Fa,Q,x,W,y,F,ea,T,K,P,w,D,N,J,O,ca,M,L,S,ra,qa,aa,X,V,da,la,ka,na,
Ca,ia,Oe,Se,Fd,Ae,qe,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub;l=a.viewport;r=l.x|0;u=l.y|0;n="width"in l?l.width|0:k.framebufferWidth-r;R="height"in l?l.height|0:k.framebufferHeight-u;t=k.viewportWidth;k.viewportWidth=n;h=k.viewportHeight;k.viewportHeight=R;G=xa[0];xa[0]=r;p=xa[1];xa[1]=u;B=xa[2];xa[2]=n;E=xa[3];xa[3]=R;ta=g[0];g[0]=0;Fa=g[1];
g[1]=0;Q=g[2];g[2]=0;x=g[3];g[3]=0;W=H.blend_enable;H.blend_enable=!0;y=A[0];A[0]=32774;F=A[1];A[1]=32774;ea=za[0];za[0]=770;T=za[1];za[1]=771;K=za[2];za[2]=773;P=za[3];za[3]=1;w=H.depth_enable;H.depth_enable=!1;D=a.viewport;N=D.x|0;J=D.y|0;O="width"in D?D.width|0:k.framebufferWidth-N;ca="height"in D?D.height|0:k.framebufferHeight-J;M=oa[0];oa[0]=N;L=oa[1];oa[1]=J;S=oa[2];oa[2]=O;ra=oa[3];oa[3]=ca;qa=H.scissor_enable;H.scissor_enable=!0;aa=H.stencil_enable;H.stencil_enable=!1;if(X=f.profile)V=performance.now(),
ma.count++;da=m.call(this,k,a,v);la=null;la=(ka=I(da))?z.createStream(da):z.getElements(da);na=U.elements;U.elements=la;Ca=U.offset;U.offset=0;ia=la?la.vertCount:-1;Oe=U.count;U.count=ia;Se=U.primitive;U.primitive=4;Fd=a.fill;Ae=c[14];c[14]=Fd;qe=a.id;Xd=c[31];c[31]=qe;Od=a.opacity;Gd=c[10];c[10]=Od;nd=k.pixelRatio;bd=c[34];c[34]=nd;rd=a.scale;Lc=c[6];c[6]=rd;pd=a.scaleFract;Fc=c[7];c[7]=pd;fd=a.translate;Oc=c[8];c[8]=fd;Ic=a.translateFract;Db=c[9];c[9]=Ic;Hb=e.call(this,k,a,v);uc=c[3];c[3]=Hb;ja.buffer=
a.positionBuffer;Ab=!1;xc=null;Eb=0;Jc=!1;Gc=mc=0;gd=1;Xc=0;Cc=5126;qc=pc=Hc=ec=0;I(ja)?(Ab=!0,xc=ha.createStream(34962,ja),Cc=xc.dtype):(xc=ha.getBuffer(ja))?Cc=xc.dtype:"constant"in ja?(gd=2,"number"===typeof ja.constant?(Hc=ja.constant,pc=qc=ec=0):(Hc=0<ja.constant.length?ja.constant[0]:0,pc=1<ja.constant.length?ja.constant[1]:0,qc=2<ja.constant.length?ja.constant[2]:0,ec=3<ja.constant.length?ja.constant[3]:0)):(xc=I(ja.buffer)?ha.createStream(34962,ja.buffer):ha.getBuffer(ja.buffer),Cc="type"in
ja?Da[ja.type]:xc.dtype,Jc=!!ja.normalized,Gc=ja.size|0,mc=ja.offset|0,Xc=ja.stride|0,Eb=ja.divisor|0);nc=d.buffer;d.buffer=xc;fc=d.divisor;d.divisor=Eb;gb=d.normalized;d.normalized=Jc;Sc=d.offset;d.offset=mc;Bb=d.size;d.size=Gc;db=d.state;d.state=gd;Ob=d.stride;d.stride=Xc;bb=d.type;d.type=Cc;kb=d.w;d.w=ec;Va=d.x;d.x=Hc;yd=d.y;d.y=pc;Jb=d.z;d.z=qc;pa.buffer=a.positionFractBuffer;Kb=!1;rc=null;Pb=0;lb=!1;Fb=Ib=0;yb=1;ib=0;Zb=5126;Rb=Ta=sb=Qb=0;I(pa)?(Kb=!0,rc=ha.createStream(34962,pa),Zb=rc.dtype):
(rc=ha.getBuffer(pa))?Zb=rc.dtype:"constant"in pa?(yb=2,"number"===typeof pa.constant?(sb=pa.constant,Ta=Rb=Qb=0):(sb=0<pa.constant.length?pa.constant[0]:0,Ta=1<pa.constant.length?pa.constant[1]:0,Rb=2<pa.constant.length?pa.constant[2]:0,Qb=3<pa.constant.length?pa.constant[3]:0)):(rc=I(pa.buffer)?ha.createStream(34962,pa.buffer):ha.getBuffer(pa.buffer),Zb="type"in pa?Da[pa.type]:rc.dtype,lb=!!pa.normalized,Fb=pa.size|0,Ib=pa.offset|0,ib=pa.stride|0,Pb=pa.divisor|0);qb=b.buffer;b.buffer=rc;bc=b.divisor;
b.divisor=Pb;jb=b.normalized;b.normalized=lb;rb=b.offset;b.offset=Ib;Ia=b.size;b.size=Fb;tb=b.state;b.state=yb;Ja=b.stride;b.stride=ib;fb=b.type;b.type=Zb;hb=b.w;b.w=Qb;Ka=b.x;b.x=sb;mb=b.y;b.y=Ta;Wa=b.z;b.z=Rb;vb=C.vert;C.vert=42;ub=C.frag;C.frag=41;f.dirty=!0;q(k,a,v);k.viewportWidth=t;k.viewportHeight=h;xa[0]=G;xa[1]=p;xa[2]=B;xa[3]=E;g[0]=ta;g[1]=Fa;g[2]=Q;g[3]=x;H.blend_enable=W;A[0]=y;A[1]=F;za[0]=ea;za[1]=T;za[2]=K;za[3]=P;H.depth_enable=w;oa[0]=M;oa[1]=L;oa[2]=S;oa[3]=ra;H.scissor_enable=
qa;H.stencil_enable=aa;X&&(ma.cpuTime+=performance.now()-V);ka&&z.destroyStream(la);U.elements=na;U.offset=Ca;U.count=Oe;U.primitive=Se;c[14]=Ae;c[31]=Xd;c[10]=Gd;c[34]=bd;c[6]=Lc;c[7]=Fc;c[8]=Oc;c[9]=Db;c[3]=uc;Ab&&ha.destroyStream(xc);d.buffer=nc;d.divisor=fc;d.normalized=gb;d.offset=Sc;d.size=Bb;d.state=db;d.stride=Ob;d.type=bb;d.w=kb;d.x=Va;d.y=yd;d.z=Jb;Kb&&ha.destroyStream(rc);b.buffer=qb;b.divisor=bc;b.normalized=jb;b.offset=rb;b.size=Ia;b.state=tb;b.stride=Ja;b.type=fb;b.w=hb;b.x=Ka;b.y=mb;
b.z=Wa;C.vert=vb;C.frag=ub;f.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,I,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za){var u,n,R,ua,wa,Qa,lc,fa,E,ta,Fa,sa,Aa,Ea,ga,Y,va,Ya,Ga,ob,ba,ia,ac,Ha,Pa,Ub,we,Ed,xd,Ud,ze,xe,Nd,ne,Kd,Vd,ae,
fe,$d;u=a.attributes;n=a.buffer;R=a.context;ua=a.current;wa=a.draw;Qa=a.elements;lc=a.extensions;fa=a.framebuffer;E=a.gl;ta=a.isBufferArgs;Fa=a.next;sa=a.shader;Aa=a.uniforms;Ea=a.vao;ga=Fa.blend_color;Y=ua.blend_color;va=Fa.blend_equation;Ya=ua.blend_equation;Ga=Fa.blend_func;ob=ua.blend_func;ba=Fa.colorMask;ia=ua.colorMask;ac=Fa.depth_range;Ha=ua.depth_range;Pa=Fa.polygonOffset_offset;Ub=ua.polygonOffset_offset;we=Fa.sample_coverage;Ed=ua.sample_coverage;xd=Fa.scissor_box;Ud=ua.scissor_box;ze=Fa.stencil_func;
xe=ua.stencil_func;Nd=Fa.stencil_opBack;ne=ua.stencil_opBack;Kd=Fa.stencil_opFront;Vd=ua.stencil_opFront;ae=Fa.viewport;fe=ua.viewport;$d={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,c){var d,g,f,e,a,k;d=fa.next;d!==fa.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),fa.cur=d);if(ua.dirty){var l,m,r,t,h,z,p,B,x,y,sa,C,ga,K,H,D,w,N,J,M,L,S,Aa,U,aa,V,ha,I,ya,Ga,Bb,db,Ob,bb;l=Fa.dither;l!==ua.dither&&
(l?E.enable(3024):E.disable(3024),ua.dither=l);m=va[0];r=va[1];if(m!==Ya[0]||r!==Ya[1])E.blendEquationSeparate(m,r),Ya[0]=m,Ya[1]=r;t=Fa.depth_func;t!==ua.depth_func&&(E.depthFunc(t),ua.depth_func=t);h=ac[0];z=ac[1];if(h!==Ha[0]||z!==Ha[1])E.depthRange(h,z),Ha[0]=h,Ha[1]=z;p=Fa.depth_mask;p!==ua.depth_mask&&(E.depthMask(p),ua.depth_mask=p);B=ba[0];x=ba[1];y=ba[2];sa=ba[3];if(B!==ia[0]||x!==ia[1]||y!==ia[2]||sa!==ia[3])E.colorMask(B,x,y,sa),ia[0]=B,ia[1]=x,ia[2]=y,ia[3]=sa;C=Fa.cull_enable;C!==ua.cull_enable&&
(C?E.enable(2884):E.disable(2884),ua.cull_enable=C);ga=Fa.cull_face;ga!==ua.cull_face&&(E.cullFace(ga),ua.cull_face=ga);K=Fa.frontFace;K!==ua.frontFace&&(E.frontFace(K),ua.frontFace=K);H=Fa.lineWidth;H!==ua.lineWidth&&(E.lineWidth(H),ua.lineWidth=H);D=Fa.polygonOffset_enable;D!==ua.polygonOffset_enable&&(D?E.enable(32823):E.disable(32823),ua.polygonOffset_enable=D);w=Pa[0];N=Pa[1];if(w!==Ub[0]||N!==Ub[1])E.polygonOffset(w,N),Ub[0]=w,Ub[1]=N;J=Fa.sample_alpha;J!==ua.sample_alpha&&(J?E.enable(32926):
E.disable(32926),ua.sample_alpha=J);M=Fa.sample_enable;M!==ua.sample_enable&&(M?E.enable(32928):E.disable(32928),ua.sample_enable=M);L=we[0];S=we[1];if(L!==Ed[0]||S!==Ed[1])E.sampleCoverage(L,S),Ed[0]=L,Ed[1]=S;Aa=Fa.stencil_mask;Aa!==ua.stencil_mask&&(E.stencilMask(Aa),ua.stencil_mask=Aa);U=ze[0];aa=ze[1];V=ze[2];if(U!==xe[0]||aa!==xe[1]||V!==xe[2])E.stencilFunc(U,aa,V),xe[0]=U,xe[1]=aa,xe[2]=V;ha=Kd[0];I=Kd[1];ya=Kd[2];Ga=Kd[3];if(ha!==Vd[0]||I!==Vd[1]||ya!==Vd[2]||Ga!==Vd[3])E.stencilOpSeparate(ha,
I,ya,Ga),Vd[0]=ha,Vd[1]=I,Vd[2]=ya,Vd[3]=Ga;Bb=Nd[0];db=Nd[1];Ob=Nd[2];bb=Nd[3];if(Bb!==ne[0]||db!==ne[1]||Ob!==ne[2]||bb!==ne[3])E.stencilOpSeparate(Bb,db,Ob,bb),ne[0]=Bb,ne[1]=db,ne[2]=Ob,ne[3]=bb}E.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;E.enable(3042);ua.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);ob[0]=770;ob[1]=771;ob[2]=773;ob[3]=1;E.disable(2929);ua.depth_enable=!1;E.enable(3089);ua.scissor_enable=!0;E.disable(2960);ua.stencil_enable=!1;if(g=ua.profile)f=performance.now(),ma.count+=
c;E.useProgram(ka.program);e=lc.angle_instanced_arrays;var kb;Ea.setVAO(null);E.uniform1i(G.location,!1);E.uniform1i(Ca.location,O.bind());kb=wa.instances;for(a=0;a<c;++a){k=b[a];var Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,xd,ae,jd,bf,Bd,ge,ce,Yd,Jd,
Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Re,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,dg,Rf,Sf;Va=k.viewport;yd=Va.x|0;Jb=Va.y|0;Kb="width"in Va?Va.width|0:R.framebufferWidth-yd;rc="height"in Va?Va.height|0:R.framebufferHeight-Jb;Pb=R.viewportWidth;R.viewportWidth=Kb;lb=R.viewportHeight;R.viewportHeight=rc;E.viewport(yd,
Jb,Kb,rc);fe[0]=yd;fe[1]=Jb;fe[2]=Kb;fe[3]=rc;Ib=k.viewport;Fb=Ib.x|0;yb=Ib.y|0;ib="width"in Ib?Ib.width|0:R.framebufferWidth-Fb;Zb="height"in Ib?Ib.height|0:R.framebufferHeight-yb;E.scissor(Fb,yb,ib,Zb);Ud[0]=Fb;Ud[1]=yb;Ud[2]=ib;Ud[3]=Zb;Qb=A.call(this,R,k,a);sb=!1;Ta=null;Rb=0;qb=!1;jb=bc=0;rb=1;Ia=0;tb=5126;Ka=hb=fb=Ja=0;ta(Qb)?(sb=!0,Ta=n.createStream(34962,Qb),tb=Ta.dtype):(Ta=n.getBuffer(Qb))?tb=Ta.dtype:"constant"in Qb?(rb=2,"number"===typeof Qb.constant?(fb=Qb.constant,hb=Ka=Ja=0):(fb=0<
Qb.constant.length?Qb.constant[0]:0,hb=1<Qb.constant.length?Qb.constant[1]:0,Ka=2<Qb.constant.length?Qb.constant[2]:0,Ja=3<Qb.constant.length?Qb.constant[3]:0)):(Ta=ta(Qb.buffer)?n.createStream(34962,Qb.buffer):n.getBuffer(Qb.buffer),tb="type"in Qb?$d[Qb.type]:Ta.dtype,qb=!!Qb.normalized,jb=Qb.size|0,bc=Qb.offset|0,Ia=Qb.stride|0,Rb=Qb.divisor|0);mb=Ma.location;Wa=u[mb];if(1===rb){Wa.buffer||E.enableVertexAttribArray(mb);vb=jb||1;if(Wa.type!==tb||Wa.size!==vb||Wa.buffer!==Ta||Wa.normalized!==qb||
Wa.offset!==bc||Wa.stride!==Ia)E.bindBuffer(34962,Ta.buffer),E.vertexAttribPointer(mb,vb,tb,qb,Ia,bc),Wa.type=tb,Wa.size=vb,Wa.buffer=Ta,Wa.normalized=qb,Wa.offset=bc,Wa.stride=Ia;Wa.divisor!==Rb&&(e.vertexAttribDivisorANGLE(mb,Rb),Wa.divisor=Rb)}else if(Wa.buffer&&(E.disableVertexAttribArray(mb),Wa.buffer=null),Wa.x!==fb||Wa.y!==hb||Wa.z!==Ka||Wa.w!==Ja)E.vertexAttrib4f(mb,fb,hb,Ka,Ja),Wa.x=fb,Wa.y=hb,Wa.z=Ka,Wa.w=Ja;ub=na.call(this,R,k,a);Oa=!1;Bc=null;Sa=0;Lb=!1;La=Gb=0;Pc=1;$a=0;Mb=5126;$b=Na=
nb=Nb=0;ta(ub)?(Oa=!0,Bc=n.createStream(34962,ub),Mb=Bc.dtype):(Bc=n.getBuffer(ub))?Mb=Bc.dtype:"constant"in ub?(Pc=2,"number"===typeof ub.constant?(nb=ub.constant,Na=$b=Nb=0):(nb=0<ub.constant.length?ub.constant[0]:0,Na=1<ub.constant.length?ub.constant[1]:0,$b=2<ub.constant.length?ub.constant[2]:0,Nb=3<ub.constant.length?ub.constant[3]:0)):(Bc=ta(ub.buffer)?n.createStream(34962,ub.buffer):n.getBuffer(ub.buffer),Mb="type"in ub?$d[ub.type]:Bc.dtype,Lb=!!ub.normalized,La=ub.size|0,Gb=ub.offset|0,$a=
ub.stride|0,Sa=ub.divisor|0);Ra=zb.location;wb=u[Ra];if(1===Pc){wb.buffer||E.enableVertexAttribArray(Ra);xb=La||1;if(wb.type!==Mb||wb.size!==xb||wb.buffer!==Bc||wb.normalized!==Lb||wb.offset!==Gb||wb.stride!==$a)E.bindBuffer(34962,Bc.buffer),E.vertexAttribPointer(Ra,xb,Mb,Lb,$a,Gb),wb.type=Mb,wb.size=xb,wb.buffer=Bc,wb.normalized=Lb,wb.offset=Gb,wb.stride=$a;wb.divisor!==Sa&&(e.vertexAttribDivisorANGLE(Ra,Sa),wb.divisor=Sa)}else if(wb.buffer&&(E.disableVertexAttribArray(Ra),wb.buffer=null),wb.x!==
nb||wb.y!==Na||wb.z!==$b||wb.w!==Nb)E.vertexAttrib4f(Ra,nb,Na,$b,Nb),wb.x=nb,wb.y=Na,wb.z=$b,wb.w=Nb;Ua=za.call(this,R,k,a);pb=!1;gc=null;Ec=0;vc=!1;jc=cb=0;Tc=1;Xa=0;ld=5126;tc=Wb=ab=Cb=0;ta(Ua)?(pb=!0,gc=n.createStream(34962,Ua),ld=gc.dtype):(gc=n.getBuffer(Ua))?ld=gc.dtype:"constant"in Ua?(Tc=2,"number"===typeof Ua.constant?(ab=Ua.constant,Wb=tc=Cb=0):(ab=0<Ua.constant.length?Ua.constant[0]:0,Wb=1<Ua.constant.length?Ua.constant[1]:0,tc=2<Ua.constant.length?Ua.constant[2]:0,Cb=3<Ua.constant.length?
Ua.constant[3]:0)):(gc=ta(Ua.buffer)?n.createStream(34962,Ua.buffer):n.getBuffer(Ua.buffer),ld="type"in Ua?$d[Ua.type]:gc.dtype,vc=!!Ua.normalized,jc=Ua.size|0,cb=Ua.offset|0,Xa=Ua.stride|0,Ec=Ua.divisor|0);Xb=Z.location;Sb=u[Xb];if(1===Tc){Sb.buffer||E.enableVertexAttribArray(Xb);Kc=jc||1;if(Sb.type!==ld||Sb.size!==Kc||Sb.buffer!==gc||Sb.normalized!==vc||Sb.offset!==cb||Sb.stride!==Xa)E.bindBuffer(34962,gc.buffer),E.vertexAttribPointer(Xb,Kc,ld,vc,Xa,cb),Sb.type=ld,Sb.size=Kc,Sb.buffer=gc,Sb.normalized=
vc,Sb.offset=cb,Sb.stride=Xa;Sb.divisor!==Ec&&(e.vertexAttribDivisorANGLE(Xb,Ec),Sb.divisor=Ec)}else if(Sb.buffer&&(E.disableVertexAttribArray(Xb),Sb.buffer=null),Sb.x!==ab||Sb.y!==Wb||Sb.z!==tc||Sb.w!==Cb)E.vertexAttrib4f(Xb,ab,Wb,tc,Cb),Sb.x=ab,Sb.y=Wb,Sb.z=tc,Sb.w=Cb;Tb=X.call(this,R,k,a);td=!1;Dc=null;zd=0;Mc=!1;qd=Yc=0;oc=1;wc=0;hc=5126;Yb=Vb=sc=eb=0;ta(Tb)?(td=!0,Dc=n.createStream(34962,Tb),hc=Dc.dtype):(Dc=n.getBuffer(Tb))?hc=Dc.dtype:"constant"in Tb?(oc=2,"number"===typeof Tb.constant?(sc=
Tb.constant,Vb=Yb=eb=0):(sc=0<Tb.constant.length?Tb.constant[0]:0,Vb=1<Tb.constant.length?Tb.constant[1]:0,Yb=2<Tb.constant.length?Tb.constant[2]:0,eb=3<Tb.constant.length?Tb.constant[3]:0)):(Dc=ta(Tb.buffer)?n.createStream(34962,Tb.buffer):n.getBuffer(Tb.buffer),hc="type"in Tb?$d[Tb.type]:Dc.dtype,Mc=!!Tb.normalized,qd=Tb.size|0,Yc=Tb.offset|0,wc=Tb.stride|0,zd=Tb.divisor|0);dc=Za.location;ic=u[dc];if(1===oc){ic.buffer||E.enableVertexAttribArray(dc);yc=qd||1;if(ic.type!==hc||ic.size!==yc||ic.buffer!==
Dc||ic.normalized!==Mc||ic.offset!==Yc||ic.stride!==wc)E.bindBuffer(34962,Dc.buffer),E.vertexAttribPointer(dc,yc,hc,Mc,wc,Yc),ic.type=hc,ic.size=yc,ic.buffer=Dc,ic.normalized=Mc,ic.offset=Yc,ic.stride=wc;ic.divisor!==zd&&(e.vertexAttribDivisorANGLE(dc,zd),ic.divisor=zd)}else if(ic.buffer&&(E.disableVertexAttribArray(dc),ic.buffer=null),ic.x!==sc||ic.y!==Vb||ic.z!==Yb||ic.w!==eb)E.vertexAttrib4f(dc,sc,Vb,Yb,eb),ic.x=sc,ic.y=Vb,ic.z=Yb,ic.w=eb;Ac=da.call(this,R,k,a);cd=!1;Qc=null;Rc=0;Uc=!1;md=Zc=0;
dd=1;$c=0;kc=5126;ed=Wc=ad=cc=0;ta(Ac)?(cd=!0,Qc=n.createStream(34962,Ac),kc=Qc.dtype):(Qc=n.getBuffer(Ac))?kc=Qc.dtype:"constant"in Ac?(dd=2,"number"===typeof Ac.constant?(ad=Ac.constant,Wc=ed=cc=0):(ad=0<Ac.constant.length?Ac.constant[0]:0,Wc=1<Ac.constant.length?Ac.constant[1]:0,ed=2<Ac.constant.length?Ac.constant[2]:0,cc=3<Ac.constant.length?Ac.constant[3]:0)):(Qc=ta(Ac.buffer)?n.createStream(34962,Ac.buffer):n.getBuffer(Ac.buffer),kc="type"in Ac?$d[Ac.type]:Qc.dtype,Uc=!!Ac.normalized,md=Ac.size|
0,Zc=Ac.offset|0,$c=Ac.stride|0,Rc=Ac.divisor|0);zc=ja.location;id=u[zc];if(1===dd){id.buffer||E.enableVertexAttribArray(zc);Ad=md||1;if(id.type!==kc||id.size!==Ad||id.buffer!==Qc||id.normalized!==Uc||id.offset!==Zc||id.stride!==$c)E.bindBuffer(34962,Qc.buffer),E.vertexAttribPointer(zc,Ad,kc,Uc,$c,Zc),id.type=kc,id.size=Ad,id.buffer=Qc,id.normalized=Uc,id.offset=Zc,id.stride=$c;id.divisor!==Rc&&(e.vertexAttribDivisorANGLE(zc,Rc),id.divisor=Rc)}else if(id.buffer&&(E.disableVertexAttribArray(zc),id.buffer=
null),id.x!==ad||id.y!==Wc||id.z!==ed||id.w!==cc)E.vertexAttrib4f(zc,ad,Wc,ed,cc),id.x=ad,id.y=Wc,id.z=ed,id.w=cc;xd=T.call(this,R,k,a);ae=!1;jd=null;bf=0;Bd=!1;ce=ge=0;Yd=1;Jd=0;Hd=5126;sd=ud=Vc=od=0;ta(xd)?(ae=!0,jd=n.createStream(34962,xd),Hd=jd.dtype):(jd=n.getBuffer(xd))?Hd=jd.dtype:"constant"in xd?(Yd=2,"number"===typeof xd.constant?(Vc=xd.constant,ud=sd=od=0):(Vc=0<xd.constant.length?xd.constant[0]:0,ud=1<xd.constant.length?xd.constant[1]:0,sd=2<xd.constant.length?xd.constant[2]:0,od=3<xd.constant.length?
xd.constant[3]:0)):(jd=ta(xd.buffer)?n.createStream(34962,xd.buffer):n.getBuffer(xd.buffer),Hd="type"in xd?$d[xd.type]:jd.dtype,Bd=!!xd.normalized,ce=xd.size|0,ge=xd.offset|0,Jd=xd.stride|0,bf=xd.divisor|0);kd=oa.location;vd=u[kd];if(1===Yd){vd.buffer||E.enableVertexAttribArray(kd);Cd=ce||1;if(vd.type!==Hd||vd.size!==Cd||vd.buffer!==jd||vd.normalized!==Bd||vd.offset!==ge||vd.stride!==Jd)E.bindBuffer(34962,jd.buffer),E.vertexAttribPointer(kd,Cd,Hd,Bd,Jd,ge),vd.type=Hd,vd.size=Cd,vd.buffer=jd,vd.normalized=
Bd,vd.offset=ge,vd.stride=Jd;vd.divisor!==bf&&(e.vertexAttribDivisorANGLE(kd,bf),vd.divisor=bf)}else if(vd.buffer&&(E.disableVertexAttribArray(kd),vd.buffer=null),vd.x!==Vc||vd.y!==ud||vd.z!==sd||vd.w!==od)E.vertexAttrib4f(kd,Vc,ud,sd,od),vd.x=Vc,vd.y=ud,vd.z=sd,vd.w=od;Dd=Q.call(this,R,k,a);re=!1;je=null;se=0;ke=!1;he=ie=0;te=1;de=0;le=5126;oe=ue=hd=Nc=0;ta(Dd)?(re=!0,je=n.createStream(34962,Dd),le=je.dtype):(je=n.getBuffer(Dd))?le=je.dtype:"constant"in Dd?(te=2,"number"===typeof Dd.constant?(hd=
Dd.constant,ue=oe=Nc=0):(hd=0<Dd.constant.length?Dd.constant[0]:0,ue=1<Dd.constant.length?Dd.constant[1]:0,oe=2<Dd.constant.length?Dd.constant[2]:0,Nc=3<Dd.constant.length?Dd.constant[3]:0)):(je=ta(Dd.buffer)?n.createStream(34962,Dd.buffer):n.getBuffer(Dd.buffer),le="type"in Dd?$d[Dd.type]:je.dtype,ke=!!Dd.normalized,he=Dd.size|0,ie=Dd.offset|0,de=Dd.stride|0,se=Dd.divisor|0);Ld=v.location;Pd=u[Ld];if(1===te){Pd.buffer||E.enableVertexAttribArray(Ld);Qd=he||4;if(Pd.type!==le||Pd.size!==Qd||Pd.buffer!==
je||Pd.normalized!==ke||Pd.offset!==ie||Pd.stride!==de)E.bindBuffer(34962,je.buffer),E.vertexAttribPointer(Ld,Qd,le,ke,de,ie),Pd.type=le,Pd.size=Qd,Pd.buffer=je,Pd.normalized=ke,Pd.offset=ie,Pd.stride=de;Pd.divisor!==se&&(e.vertexAttribDivisorANGLE(Ld,se),Pd.divisor=se)}else if(Pd.buffer&&(E.disableVertexAttribArray(Ld),Pd.buffer=null),Pd.x!==hd||Pd.y!==ue||Pd.z!==oe||Pd.w!==Nc)E.vertexAttrib4f(Ld,hd,ue,oe,Nc),Pd.x=hd,Pd.y=ue,Pd.z=oe,Pd.w=Nc;Rd=F.call(this,R,k,a);me=!1;ye=null;Be=0;pe=!1;Te=hf=0;
Pe=1;ve=0;Fe=5126;Ge=Le=Ke=Je=0;ta(Rd)?(me=!0,ye=n.createStream(34962,Rd),Fe=ye.dtype):(ye=n.getBuffer(Rd))?Fe=ye.dtype:"constant"in Rd?(Pe=2,"number"===typeof Rd.constant?(Ke=Rd.constant,Le=Ge=Je=0):(Ke=0<Rd.constant.length?Rd.constant[0]:0,Le=1<Rd.constant.length?Rd.constant[1]:0,Ge=2<Rd.constant.length?Rd.constant[2]:0,Je=3<Rd.constant.length?Rd.constant[3]:0)):(ye=ta(Rd.buffer)?n.createStream(34962,Rd.buffer):n.getBuffer(Rd.buffer),Fe="type"in Rd?$d[Rd.type]:ye.dtype,pe=!!Rd.normalized,Te=Rd.size|
0,hf=Rd.offset|0,ve=Rd.stride|0,Be=Rd.divisor|0);Md=qa.location;Wd=u[Md];if(1===Pe){Wd.buffer||E.enableVertexAttribArray(Md);be=Te||4;if(Wd.type!==Fe||Wd.size!==be||Wd.buffer!==ye||Wd.normalized!==pe||Wd.offset!==hf||Wd.stride!==ve)E.bindBuffer(34962,ye.buffer),E.vertexAttribPointer(Md,be,Fe,pe,ve,hf),Wd.type=Fe,Wd.size=be,Wd.buffer=ye,Wd.normalized=pe,Wd.offset=hf,Wd.stride=ve;Wd.divisor!==Be&&(e.vertexAttribDivisorANGLE(Md,Be),Wd.divisor=Be)}else if(Wd.buffer&&(E.disableVertexAttribArray(Md),Wd.buffer=
null),Wd.x!==Ke||Wd.y!==Le||Wd.z!==Ge||Wd.w!==Je)E.vertexAttrib4f(Md,Ke,Le,Ge,Je),Wd.x=Ke,Wd.y=Le,Wd.z=Ge,Wd.w=Je;ee=q.call(this,R,k,a);Me=!1;Id=null;Sd=0;De=!1;af=Ne=0;$e=1;Ue=0;Qe=5126;We=Ve=Ye=Ze=0;ta(ee)?(Me=!0,Id=n.createStream(34962,ee),Qe=Id.dtype):(Id=n.getBuffer(ee))?Qe=Id.dtype:"constant"in ee?($e=2,"number"===typeof ee.constant?(Ye=ee.constant,Ve=We=Ze=0):(Ye=0<ee.constant.length?ee.constant[0]:0,Ve=1<ee.constant.length?ee.constant[1]:0,We=2<ee.constant.length?ee.constant[2]:0,Ze=3<ee.constant.length?
ee.constant[3]:0)):(Id=ta(ee.buffer)?n.createStream(34962,ee.buffer):n.getBuffer(ee.buffer),Qe="type"in ee?$d[ee.type]:Id.dtype,De=!!ee.normalized,af=ee.size|0,Ne=ee.offset|0,Ue=ee.stride|0,Sd=ee.divisor|0);Td=ca.location;Zd=u[Td];if(1===$e){Zd.buffer||E.enableVertexAttribArray(Td);Xe=af||1;if(Zd.type!==Qe||Zd.size!==Xe||Zd.buffer!==Id||Zd.normalized!==De||Zd.offset!==Ne||Zd.stride!==Ue)E.bindBuffer(34962,Id.buffer),E.vertexAttribPointer(Td,Xe,Qe,De,Ue,Ne),Zd.type=Qe,Zd.size=Xe,Zd.buffer=Id,Zd.normalized=
De,Zd.offset=Ne,Zd.stride=Ue;Zd.divisor!==Sd&&(e.vertexAttribDivisorANGLE(Td,Sd),Zd.divisor=Sd)}else if(Zd.buffer&&(E.disableVertexAttribArray(Td),Zd.buffer=null),Zd.x!==Ye||Zd.y!==Ve||Zd.z!==We||Zd.w!==Ze)E.vertexAttrib4f(Td,Ye,Ve,We,Ze),Zd.x=Ye,Zd.y=Ve,Zd.z=We,Zd.w=Ze;jf=R.pixelRatio;a&&nf===jf||(nf=jf,E.uniform1f(xa.location,jf));ef=k.scale;kf=ef[0];mf=ef[1];a&&lf===kf&&rf===mf||(lf=kf,rf=mf,E.uniform2f(ea.location,kf,mf));of=k.scaleFract;sf=of[0];Cf=of[1];a&&Bf===sf&&Re===Cf||(Bf=sf,Re=Cf,E.uniform2f(Da.location,
sf,Cf));Ee=k.translate;pf=Ee[0];Df=Ee[1];a&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,E.uniform2f(pa.location,pf,Df));Af=k.translateFract;Ef=Af[0];wf=Af[1];a&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,E.uniform2f(Ba.location,Ef,wf));vf=P.call(this,R,k,a);yf=vf[0];If=vf[1];a&&zf===yf&&Jf===If||(zf=yf,Jf=If,E.uniform2f(ra.location,yf,If));Kf=k.opacity;a&&Lf===Kf||(Lf=Kf,E.uniform1f(la.location,Kf));(tf=k.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Qf=tf._texture;E.uniform1i(W.location,Qf.bind());Hf=k.elements;
uf=null;(uf=(dg=ta(Hf))?Qa.createStream(Hf):Qa.getElements(Hf))&&E.bindBuffer(34963,uf.buffer.buffer);Rf=k.offset;if(Sf=k.count)0<kb?uf?e.drawElementsInstancedANGLE(0,Sf,uf.type,Rf<<(uf.type-5121>>1),kb):e.drawArraysInstancedANGLE(0,Rf,Sf,kb):0>kb&&(uf?E.drawElements(0,Sf,uf.type,Rf<<(uf.type-5121>>1)):E.drawArrays(0,Rf,Sf)),R.viewportWidth=Pb,R.viewportHeight=lb,sb&&n.destroyStream(Ta),Oa&&n.destroyStream(Bc),pb&&n.destroyStream(gc),td&&n.destroyStream(Dc),cd&&n.destroyStream(Qc),ae&&n.destroyStream(jd),
re&&n.destroyStream(je),me&&n.destroyStream(ye),Me&&n.destroyStream(Id),Qf.unbind(),dg&&Qa.destroyStream(uf)}O.unbind();ua.dirty=!0;Ea.setVAO(null);g&&(ma.cpuTime+=performance.now()-f)},draw:function(c){var g,f,a,k,q,l,r,A,z,B,Q,x,F,sa,T,C,ga,H,P,J,O,M,L,S,Aa,U,aa,X,V,da,ha,I,ka,na,ya,za,Ga,Bb,db,Ob,bb,kb,Va,xd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,
Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,ae,He,Ie,jd,bf,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf,Te,Pe,ve;g=fa.next;g!==fa.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),fa.cur=g);if(ua.dirty){var Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf;Fe=Fa.dither;Fe!==ua.dither&&(Fe?E.enable(3024):E.disable(3024),
ua.dither=Fe);Je=va[0];Ke=va[1];if(Je!==Ya[0]||Ke!==Ya[1])E.blendEquationSeparate(Je,Ke),Ya[0]=Je,Ya[1]=Ke;Le=Fa.depth_func;Le!==ua.depth_func&&(E.depthFunc(Le),ua.depth_func=Le);Ge=ac[0];Md=ac[1];if(Ge!==Ha[0]||Md!==Ha[1])E.depthRange(Ge,Md),Ha[0]=Ge,Ha[1]=Md;Wd=Fa.depth_mask;Wd!==ua.depth_mask&&(E.depthMask(Wd),ua.depth_mask=Wd);be=ba[0];ee=ba[1];Me=ba[2];Id=ba[3];if(be!==ia[0]||ee!==ia[1]||Me!==ia[2]||Id!==ia[3])E.colorMask(be,ee,Me,Id),ia[0]=be,ia[1]=ee,ia[2]=Me,ia[3]=Id;Sd=Fa.cull_enable;Sd!==
ua.cull_enable&&(Sd?E.enable(2884):E.disable(2884),ua.cull_enable=Sd);De=Fa.cull_face;De!==ua.cull_face&&(E.cullFace(De),ua.cull_face=De);Ne=Fa.frontFace;Ne!==ua.frontFace&&(E.frontFace(Ne),ua.frontFace=Ne);af=Fa.lineWidth;af!==ua.lineWidth&&(E.lineWidth(af),ua.lineWidth=af);$e=Fa.polygonOffset_enable;$e!==ua.polygonOffset_enable&&($e?E.enable(32823):E.disable(32823),ua.polygonOffset_enable=$e);Ue=Pa[0];Qe=Pa[1];if(Ue!==Ub[0]||Qe!==Ub[1])E.polygonOffset(Ue,Qe),Ub[0]=Ue,Ub[1]=Qe;Ze=Fa.sample_alpha;
Ze!==ua.sample_alpha&&(Ze?E.enable(32926):E.disable(32926),ua.sample_alpha=Ze);Ye=Fa.sample_enable;Ye!==ua.sample_enable&&(Ye?E.enable(32928):E.disable(32928),ua.sample_enable=Ye);Ve=we[0];We=we[1];if(Ve!==Ed[0]||We!==Ed[1])E.sampleCoverage(Ve,We),Ed[0]=Ve,Ed[1]=We;Td=Fa.stencil_mask;Td!==ua.stencil_mask&&(E.stencilMask(Td),ua.stencil_mask=Td);Zd=ze[0];Xe=ze[1];jf=ze[2];if(Zd!==xe[0]||Xe!==xe[1]||jf!==xe[2])E.stencilFunc(Zd,Xe,jf),xe[0]=Zd,xe[1]=Xe,xe[2]=jf;nf=Kd[0];ef=Kd[1];kf=Kd[2];lf=Kd[3];if(nf!==
Vd[0]||ef!==Vd[1]||kf!==Vd[2]||lf!==Vd[3])E.stencilOpSeparate(nf,ef,kf,lf),Vd[0]=nf,Vd[1]=ef,Vd[2]=kf,Vd[3]=lf;mf=Nd[0];rf=Nd[1];of=Nd[2];sf=Nd[3];if(mf!==ne[0]||rf!==ne[1]||of!==ne[2]||sf!==ne[3])E.stencilOpSeparate(mf,rf,of,sf),ne[0]=mf,ne[1]=rf,ne[2]=of,ne[3]=sf}f=c.viewport;a=f.x|0;k=f.y|0;q="width"in f?f.width|0:R.framebufferWidth-a;l="height"in f?f.height|0:R.framebufferHeight-k;r=R.viewportWidth;R.viewportWidth=q;A=R.viewportHeight;R.viewportHeight=l;E.viewport(a,k,q,l);fe[0]=a;fe[1]=k;fe[2]=
q;fe[3]=l;E.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;E.enable(3042);ua.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);ob[0]=770;ob[1]=771;ob[2]=773;ob[3]=1;E.disable(2929);ua.depth_enable=!1;z=c.viewport;B=z.x|0;Q=z.y|0;x="width"in z?z.width|0:R.framebufferWidth-B;F="height"in z?z.height|0:R.framebufferHeight-Q;E.scissor(B,Q,x,F);Ud[0]=B;Ud[1]=Q;Ud[2]=x;Ud[3]=F;E.enable(3089);ua.scissor_enable=!0;E.disable(2960);ua.stencil_enable=!1;if(sa=ua.profile)T=performance.now(),ma.count++;E.useProgram(D.program);
C=lc.angle_instanced_arrays;Ea.setVAO(null);ga=K.call(this,R,c,0);H=!1;P=null;J=0;O=!1;L=M=0;S=1;Aa=0;U=5126;da=V=X=aa=0;ta(ga)?(H=!0,P=n.createStream(34962,ga),U=P.dtype):(P=n.getBuffer(ga))?U=P.dtype:"constant"in ga?(S=2,"number"===typeof ga.constant?(X=ga.constant,V=da=aa=0):(X=0<ga.constant.length?ga.constant[0]:0,V=1<ga.constant.length?ga.constant[1]:0,da=2<ga.constant.length?ga.constant[2]:0,aa=3<ga.constant.length?ga.constant[3]:0)):(P=ta(ga.buffer)?n.createStream(34962,ga.buffer):n.getBuffer(ga.buffer),
U="type"in ga?$d[ga.type]:P.dtype,O=!!ga.normalized,L=ga.size|0,M=ga.offset|0,Aa=ga.stride|0,J=ga.divisor|0);ha=Ma.location;I=u[ha];if(1===S){I.buffer||E.enableVertexAttribArray(ha);ka=L||1;if(I.type!==U||I.size!==ka||I.buffer!==P||I.normalized!==O||I.offset!==M||I.stride!==Aa)E.bindBuffer(34962,P.buffer),E.vertexAttribPointer(ha,ka,U,O,Aa,M),I.type=U,I.size=ka,I.buffer=P,I.normalized=O,I.offset=M,I.stride=Aa;I.divisor!==J&&(C.vertexAttribDivisorANGLE(ha,J),I.divisor=J)}else if(I.buffer&&(E.disableVertexAttribArray(ha),
I.buffer=null),I.x!==X||I.y!==V||I.z!==da||I.w!==aa)E.vertexAttrib4f(ha,X,V,da,aa),I.x=X,I.y=V,I.z=da,I.w=aa;na=m.call(this,R,c,0);ya=!1;za=null;Ga=0;Bb=!1;Ob=db=0;bb=1;kb=0;Va=5126;rc=Kb=Jb=xd=0;ta(na)?(ya=!0,za=n.createStream(34962,na),Va=za.dtype):(za=n.getBuffer(na))?Va=za.dtype:"constant"in na?(bb=2,"number"===typeof na.constant?(Jb=na.constant,Kb=rc=xd=0):(Jb=0<na.constant.length?na.constant[0]:0,Kb=1<na.constant.length?na.constant[1]:0,rc=2<na.constant.length?na.constant[2]:0,xd=3<na.constant.length?
na.constant[3]:0)):(za=ta(na.buffer)?n.createStream(34962,na.buffer):n.getBuffer(na.buffer),Va="type"in na?$d[na.type]:za.dtype,Bb=!!na.normalized,Ob=na.size|0,db=na.offset|0,kb=na.stride|0,Ga=na.divisor|0);Pb=zb.location;lb=u[Pb];if(1===bb){lb.buffer||E.enableVertexAttribArray(Pb);Ib=Ob||1;if(lb.type!==Va||lb.size!==Ib||lb.buffer!==za||lb.normalized!==Bb||lb.offset!==db||lb.stride!==kb)E.bindBuffer(34962,za.buffer),E.vertexAttribPointer(Pb,Ib,Va,Bb,kb,db),lb.type=Va,lb.size=Ib,lb.buffer=za,lb.normalized=
Bb,lb.offset=db,lb.stride=kb;lb.divisor!==Ga&&(C.vertexAttribDivisorANGLE(Pb,Ga),lb.divisor=Ga)}else if(lb.buffer&&(E.disableVertexAttribArray(Pb),lb.buffer=null),lb.x!==Jb||lb.y!==Kb||lb.z!==rc||lb.w!==xd)E.vertexAttrib4f(Pb,Jb,Kb,rc,xd),lb.x=Jb,lb.y=Kb,lb.z=rc,lb.w=xd;Fb=e.call(this,R,c,0);yb=!1;ib=null;Zb=0;Qb=!1;Ta=sb=0;Rb=1;qb=0;bc=5126;tb=Ia=rb=jb=0;ta(Fb)?(yb=!0,ib=n.createStream(34962,Fb),bc=ib.dtype):(ib=n.getBuffer(Fb))?bc=ib.dtype:"constant"in Fb?(Rb=2,"number"===typeof Fb.constant?(rb=
Fb.constant,Ia=tb=jb=0):(rb=0<Fb.constant.length?Fb.constant[0]:0,Ia=1<Fb.constant.length?Fb.constant[1]:0,tb=2<Fb.constant.length?Fb.constant[2]:0,jb=3<Fb.constant.length?Fb.constant[3]:0)):(ib=ta(Fb.buffer)?n.createStream(34962,Fb.buffer):n.getBuffer(Fb.buffer),bc="type"in Fb?$d[Fb.type]:ib.dtype,Qb=!!Fb.normalized,Ta=Fb.size|0,sb=Fb.offset|0,qb=Fb.stride|0,Zb=Fb.divisor|0);Ja=Z.location;fb=u[Ja];if(1===Rb){fb.buffer||E.enableVertexAttribArray(Ja);hb=Ta||1;if(fb.type!==bc||fb.size!==hb||fb.buffer!==
ib||fb.normalized!==Qb||fb.offset!==sb||fb.stride!==qb)E.bindBuffer(34962,ib.buffer),E.vertexAttribPointer(Ja,hb,bc,Qb,qb,sb),fb.type=bc,fb.size=hb,fb.buffer=ib,fb.normalized=Qb,fb.offset=sb,fb.stride=qb;fb.divisor!==Zb&&(C.vertexAttribDivisorANGLE(Ja,Zb),fb.divisor=Zb)}else if(fb.buffer&&(E.disableVertexAttribArray(Ja),fb.buffer=null),fb.x!==rb||fb.y!==Ia||fb.z!==tb||fb.w!==jb)E.vertexAttrib4f(Ja,rb,Ia,tb,jb),fb.x=rb,fb.y=Ia,fb.z=tb,fb.w=jb;Ka=d.call(this,R,c,0);mb=!1;Wa=null;vb=0;ub=!1;Bc=Oa=0;
Sa=1;Lb=0;Gb=5126;Mb=$a=Pc=La=0;ta(Ka)?(mb=!0,Wa=n.createStream(34962,Ka),Gb=Wa.dtype):(Wa=n.getBuffer(Ka))?Gb=Wa.dtype:"constant"in Ka?(Sa=2,"number"===typeof Ka.constant?(Pc=Ka.constant,$a=Mb=La=0):(Pc=0<Ka.constant.length?Ka.constant[0]:0,$a=1<Ka.constant.length?Ka.constant[1]:0,Mb=2<Ka.constant.length?Ka.constant[2]:0,La=3<Ka.constant.length?Ka.constant[3]:0)):(Wa=ta(Ka.buffer)?n.createStream(34962,Ka.buffer):n.getBuffer(Ka.buffer),Gb="type"in Ka?$d[Ka.type]:Wa.dtype,ub=!!Ka.normalized,Bc=Ka.size|
0,Oa=Ka.offset|0,Lb=Ka.stride|0,vb=Ka.divisor|0);Nb=Za.location;nb=u[Nb];if(1===Sa){nb.buffer||E.enableVertexAttribArray(Nb);Na=Bc||1;if(nb.type!==Gb||nb.size!==Na||nb.buffer!==Wa||nb.normalized!==ub||nb.offset!==Oa||nb.stride!==Lb)E.bindBuffer(34962,Wa.buffer),E.vertexAttribPointer(Nb,Na,Gb,ub,Lb,Oa),nb.type=Gb,nb.size=Na,nb.buffer=Wa,nb.normalized=ub,nb.offset=Oa,nb.stride=Lb;nb.divisor!==vb&&(C.vertexAttribDivisorANGLE(Nb,vb),nb.divisor=vb)}else if(nb.buffer&&(E.disableVertexAttribArray(Nb),nb.buffer=
null),nb.x!==Pc||nb.y!==$a||nb.z!==Mb||nb.w!==La)E.vertexAttrib4f(Nb,Pc,$a,Mb,La),nb.x=Pc,nb.y=$a,nb.z=Mb,nb.w=La;$b=b.call(this,R,c,0);Ra=!1;wb=null;xb=0;Ua=!1;gc=pb=0;Ec=1;vc=0;cb=5126;ld=Xa=Tc=jc=0;ta($b)?(Ra=!0,wb=n.createStream(34962,$b),cb=wb.dtype):(wb=n.getBuffer($b))?cb=wb.dtype:"constant"in $b?(Ec=2,"number"===typeof $b.constant?(Tc=$b.constant,Xa=ld=jc=0):(Tc=0<$b.constant.length?$b.constant[0]:0,Xa=1<$b.constant.length?$b.constant[1]:0,ld=2<$b.constant.length?$b.constant[2]:0,jc=3<$b.constant.length?
$b.constant[3]:0)):(wb=ta($b.buffer)?n.createStream(34962,$b.buffer):n.getBuffer($b.buffer),cb="type"in $b?$d[$b.type]:wb.dtype,Ua=!!$b.normalized,gc=$b.size|0,pb=$b.offset|0,vc=$b.stride|0,xb=$b.divisor|0);Cb=ja.location;ab=u[Cb];if(1===Ec){ab.buffer||E.enableVertexAttribArray(Cb);Wb=gc||1;if(ab.type!==cb||ab.size!==Wb||ab.buffer!==wb||ab.normalized!==Ua||ab.offset!==pb||ab.stride!==vc)E.bindBuffer(34962,wb.buffer),E.vertexAttribPointer(Cb,Wb,cb,Ua,vc,pb),ab.type=cb,ab.size=Wb,ab.buffer=wb,ab.normalized=
Ua,ab.offset=pb,ab.stride=vc;ab.divisor!==xb&&(C.vertexAttribDivisorANGLE(Cb,xb),ab.divisor=xb)}else if(ab.buffer&&(E.disableVertexAttribArray(Cb),ab.buffer=null),ab.x!==Tc||ab.y!==Xa||ab.z!==ld||ab.w!==jc)E.vertexAttrib4f(Cb,Tc,Xa,ld,jc),ab.x=Tc,ab.y=Xa,ab.z=ld,ab.w=jc;tc=t.call(this,R,c,0);Xb=!1;Sb=null;Kc=0;Tb=!1;Dc=td=0;zd=1;Mc=0;Yc=5126;hc=wc=oc=qd=0;ta(tc)?(Xb=!0,Sb=n.createStream(34962,tc),Yc=Sb.dtype):(Sb=n.getBuffer(tc))?Yc=Sb.dtype:"constant"in tc?(zd=2,"number"===typeof tc.constant?(oc=
tc.constant,wc=hc=qd=0):(oc=0<tc.constant.length?tc.constant[0]:0,wc=1<tc.constant.length?tc.constant[1]:0,hc=2<tc.constant.length?tc.constant[2]:0,qd=3<tc.constant.length?tc.constant[3]:0)):(Sb=ta(tc.buffer)?n.createStream(34962,tc.buffer):n.getBuffer(tc.buffer),Yc="type"in tc?$d[tc.type]:Sb.dtype,Tb=!!tc.normalized,Dc=tc.size|0,td=tc.offset|0,Mc=tc.stride|0,Kc=tc.divisor|0);eb=oa.location;sc=u[eb];if(1===zd){sc.buffer||E.enableVertexAttribArray(eb);Vb=Dc||1;if(sc.type!==Yc||sc.size!==Vb||sc.buffer!==
Sb||sc.normalized!==Tb||sc.offset!==td||sc.stride!==Mc)E.bindBuffer(34962,Sb.buffer),E.vertexAttribPointer(eb,Vb,Yc,Tb,Mc,td),sc.type=Yc,sc.size=Vb,sc.buffer=Sb,sc.normalized=Tb,sc.offset=td,sc.stride=Mc;sc.divisor!==Kc&&(C.vertexAttribDivisorANGLE(eb,Kc),sc.divisor=Kc)}else if(sc.buffer&&(E.disableVertexAttribArray(eb),sc.buffer=null),sc.x!==oc||sc.y!==wc||sc.z!==hc||sc.w!==qd)E.vertexAttrib4f(eb,oc,wc,hc,qd),sc.x=oc,sc.y=wc,sc.z=hc,sc.w=qd;Yb=y.call(this,R,c,0);dc=!1;ic=null;yc=0;Ac=!1;Qc=cd=0;
Rc=1;Uc=0;Zc=5126;kc=$c=dd=md=0;ta(Yb)?(dc=!0,ic=n.createStream(34962,Yb),Zc=ic.dtype):(ic=n.getBuffer(Yb))?Zc=ic.dtype:"constant"in Yb?(Rc=2,"number"===typeof Yb.constant?(dd=Yb.constant,$c=kc=md=0):(dd=0<Yb.constant.length?Yb.constant[0]:0,$c=1<Yb.constant.length?Yb.constant[1]:0,kc=2<Yb.constant.length?Yb.constant[2]:0,md=3<Yb.constant.length?Yb.constant[3]:0)):(ic=ta(Yb.buffer)?n.createStream(34962,Yb.buffer):n.getBuffer(Yb.buffer),Zc="type"in Yb?$d[Yb.type]:ic.dtype,Ac=!!Yb.normalized,Qc=Yb.size|
0,cd=Yb.offset|0,Uc=Yb.stride|0,yc=Yb.divisor|0);cc=v.location;ad=u[cc];if(1===Rc){ad.buffer||E.enableVertexAttribArray(cc);Wc=Qc||4;if(ad.type!==Zc||ad.size!==Wc||ad.buffer!==ic||ad.normalized!==Ac||ad.offset!==cd||ad.stride!==Uc)E.bindBuffer(34962,ic.buffer),E.vertexAttribPointer(cc,Wc,Zc,Ac,Uc,cd),ad.type=Zc,ad.size=Wc,ad.buffer=ic,ad.normalized=Ac,ad.offset=cd,ad.stride=Uc;ad.divisor!==yc&&(C.vertexAttribDivisorANGLE(cc,yc),ad.divisor=yc)}else if(ad.buffer&&(E.disableVertexAttribArray(cc),ad.buffer=
null),ad.x!==dd||ad.y!==$c||ad.z!==kc||ad.w!==md)E.vertexAttrib4f(cc,dd,$c,kc,md),ad.x=dd,ad.y=$c,ad.z=kc,ad.w=md;ed=p.call(this,R,c,0);zc=!1;id=null;ae=0;He=!1;jd=Ie=0;bf=1;Bd=0;ge=5126;Hd=Jd=Yd=ce=0;ta(ed)?(zc=!0,id=n.createStream(34962,ed),ge=id.dtype):(id=n.getBuffer(ed))?ge=id.dtype:"constant"in ed?(bf=2,"number"===typeof ed.constant?(Yd=ed.constant,Jd=Hd=ce=0):(Yd=0<ed.constant.length?ed.constant[0]:0,Jd=1<ed.constant.length?ed.constant[1]:0,Hd=2<ed.constant.length?ed.constant[2]:0,ce=3<ed.constant.length?
ed.constant[3]:0)):(id=ta(ed.buffer)?n.createStream(34962,ed.buffer):n.getBuffer(ed.buffer),ge="type"in ed?$d[ed.type]:id.dtype,He=!!ed.normalized,jd=ed.size|0,Ie=ed.offset|0,Bd=ed.stride|0,ae=ed.divisor|0);od=qa.location;Vc=u[od];if(1===bf){Vc.buffer||E.enableVertexAttribArray(od);ud=jd||4;if(Vc.type!==ge||Vc.size!==ud||Vc.buffer!==id||Vc.normalized!==He||Vc.offset!==Ie||Vc.stride!==Bd)E.bindBuffer(34962,id.buffer),E.vertexAttribPointer(od,ud,ge,He,Bd,Ie),Vc.type=ge,Vc.size=ud,Vc.buffer=id,Vc.normalized=
He,Vc.offset=Ie,Vc.stride=Bd;Vc.divisor!==ae&&(C.vertexAttribDivisorANGLE(od,ae),Vc.divisor=ae)}else if(Vc.buffer&&(E.disableVertexAttribArray(od),Vc.buffer=null),Vc.x!==Yd||Vc.y!==Jd||Vc.z!==Hd||Vc.w!==ce)E.vertexAttrib4f(od,Yd,Jd,Hd,ce),Vc.x=Yd,Vc.y=Jd,Vc.z=Hd,Vc.w=ce;sd=h.call(this,R,c,0);kd=!1;vd=null;Cd=0;Dd=!1;je=re=0;se=1;ke=0;ie=5126;le=de=te=he=0;ta(sd)?(kd=!0,vd=n.createStream(34962,sd),ie=vd.dtype):(vd=n.getBuffer(sd))?ie=vd.dtype:"constant"in sd?(se=2,"number"===typeof sd.constant?(te=
sd.constant,de=le=he=0):(te=0<sd.constant.length?sd.constant[0]:0,de=1<sd.constant.length?sd.constant[1]:0,le=2<sd.constant.length?sd.constant[2]:0,he=3<sd.constant.length?sd.constant[3]:0)):(vd=ta(sd.buffer)?n.createStream(34962,sd.buffer):n.getBuffer(sd.buffer),ie="type"in sd?$d[sd.type]:vd.dtype,Dd=!!sd.normalized,je=sd.size|0,re=sd.offset|0,ke=sd.stride|0,Cd=sd.divisor|0);Nc=ca.location;hd=u[Nc];if(1===se){hd.buffer||E.enableVertexAttribArray(Nc);ue=je||1;if(hd.type!==ie||hd.size!==ue||hd.buffer!==
vd||hd.normalized!==Dd||hd.offset!==re||hd.stride!==ke)E.bindBuffer(34962,vd.buffer),E.vertexAttribPointer(Nc,ue,ie,Dd,ke,re),hd.type=ie,hd.size=ue,hd.buffer=vd,hd.normalized=Dd,hd.offset=re,hd.stride=ke;hd.divisor!==Cd&&(C.vertexAttribDivisorANGLE(Nc,Cd),hd.divisor=Cd)}else if(hd.buffer&&(E.disableVertexAttribArray(Nc),hd.buffer=null),hd.x!==te||hd.y!==de||hd.z!==le||hd.w!==he)E.vertexAttrib4f(Nc,te,de,le,he),hd.x=te,hd.y=de,hd.z=le,hd.w=he;E.uniform1i(G.location,!1);E.uniform1f(xa.location,R.pixelRatio);
oe=c.scale;E.uniform2f(ea.location,oe[0],oe[1]);Ld=c.scaleFract;E.uniform2f(Da.location,Ld[0],Ld[1]);Pd=c.translate;E.uniform2f(pa.location,Pd[0],Pd[1]);Qd=c.translateFract;E.uniform2f(Ba.location,Qd[0],Qd[1]);Rd=N.call(this,R,c,0);E.uniform2f(ra.location,Rd[0],Rd[1]);E.uniform1f(la.location,c.opacity);E.uniform1i(Ca.location,w.bind());(me=c.markerTexture)&&"framebuffer"===me._reglType&&(me=me.color[0]);ye=me._texture;E.uniform1i(W.location,ye.bind());Be=c.elements;pe=null;(pe=(hf=ta(Be))?Qa.createStream(Be):
Qa.getElements(Be))&&E.bindBuffer(34963,pe.buffer.buffer);Te=c.offset;if(Pe=c.count)ve=wa.instances,0<ve?pe?C.drawElementsInstancedANGLE(0,Pe,pe.type,Te<<(pe.type-5121>>1),ve):C.drawArraysInstancedANGLE(0,Te,Pe,ve):0>ve&&(pe?E.drawElements(0,Pe,pe.type,Te<<(pe.type-5121>>1)):E.drawArrays(0,Te,Pe)),ua.dirty=!0,Ea.setVAO(null),R.viewportWidth=r,R.viewportHeight=A,sa&&(ma.cpuTime+=performance.now()-T),H&&n.destroyStream(P),ya&&n.destroyStream(za),yb&&n.destroyStream(ib),mb&&n.destroyStream(Wa),Ra&&n.destroyStream(wb),
Xb&&n.destroyStream(Sb),dc&&n.destroyStream(ic),zc&&n.destroyStream(id),kd&&n.destroyStream(vd),w.unbind(),ye.unbind(),hf&&Qa.destroyStream(pe)},scope:function(b,d,e){var a,u,q,v,E,Z,m,A,t,h,p,G,Q,y,W,F,T,ea,fa,zb,P,K,Ma,D,w,N,Y,O,ca,xa,ra,Ea,qa,ba,ja,X,da,Za,pa,Da,la,oa,Ba,na,ka,va,lc,Ca,za,Ha,ob,Ya,ia,Ub,Ta,ac,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Ud,Sa,Lb,Gb,La,wd,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Ed,Xa,Pa,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,Nd,Dc,fe,Mc,Yc,ze,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,
yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Vd,ne,xe,jd,Kd,Bd,we,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,Vf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Re,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,dg,Rf,Sf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Tf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Uf,ag,bg,cg,pg,Cg,Dg,Eg,
Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=b.viewport;u=a.x|0;q=a.y|0;v="width"in a?a.width|0:R.framebufferWidth-u;E="height"in a?a.height|0:R.framebufferHeight-q;Z=R.viewportWidth;R.viewportWidth=v;m=R.viewportHeight;R.viewportHeight=E;A=ae[0];ae[0]=u;t=ae[1];ae[1]=q;h=ae[2];ae[2]=v;p=ae[3];ae[3]=E;G=ga[0];ga[0]=0;Q=ga[1];ga[1]=0;y=ga[2];ga[2]=0;W=ga[3];ga[3]=1;F=Fa.blend_enable;Fa.blend_enable=!0;T=Ga[0];Ga[0]=770;ea=Ga[1];Ga[1]=771;fa=Ga[2];Ga[2]=773;zb=Ga[3];Ga[3]=1;P=Fa.depth_enable;Fa.depth_enable=
!1;K=b.viewport;Ma=K.x|0;D=K.y|0;w="width"in K?K.width|0:R.framebufferWidth-Ma;N="height"in K?K.height|0:R.framebufferHeight-D;Y=xd[0];xd[0]=Ma;O=xd[1];xd[1]=D;ca=xd[2];xd[2]=w;xa=xd[3];xd[3]=N;ra=Fa.scissor_enable;Fa.scissor_enable=!0;Ea=Fa.stencil_enable;Fa.stencil_enable=!1;if(qa=ua.profile)ba=performance.now(),ma.count++;ja=b.elements;X=null;X=(da=ta(ja))?Qa.createStream(ja):Qa.getElements(ja);Za=wa.elements;wa.elements=X;pa=b.offset;Da=wa.offset;wa.offset=pa;la=b.count;oa=wa.count;wa.count=la;
Ba=wa.primitive;wa.primitive=0;na=Aa[45];Aa[45]=!1;ka=b.markerTexture;va=Aa[48];Aa[48]=ka;lc=b.opacity;Ca=Aa[10];Aa[10]=lc;za=J.call(this,R,b,e);Ha=Aa[46];Aa[46]=za;ob=Aa[47];Aa[47]=aa;Ya=R.pixelRatio;ia=Aa[34];Aa[34]=Ya;Ub=b.scale;Ta=Aa[6];Aa[6]=Ub;ac=b.scaleFract;qb=Aa[7];Aa[7]=ac;bc=b.translate;jb=Aa[8];Aa[8]=bc;rb=b.translateFract;Ia=Aa[9];Aa[9]=rb;tb=x.call(this,R,b,e);Ja=!1;fb=null;hb=0;Ka=!1;Wa=mb=0;vb=1;ub=0;Oa=5126;Gb=Lb=Sa=Ud=0;ta(tb)?(Ja=!0,fb=n.createStream(34962,tb),Oa=fb.dtype):(fb=
n.getBuffer(tb))?Oa=fb.dtype:"constant"in tb?(vb=2,"number"===typeof tb.constant?(Sa=tb.constant,Lb=Gb=Ud=0):(Sa=0<tb.constant.length?tb.constant[0]:0,Lb=1<tb.constant.length?tb.constant[1]:0,Gb=2<tb.constant.length?tb.constant[2]:0,Ud=3<tb.constant.length?tb.constant[3]:0)):(fb=ta(tb.buffer)?n.createStream(34962,tb.buffer):n.getBuffer(tb.buffer),Oa="type"in tb?$d[tb.type]:fb.dtype,Ka=!!tb.normalized,Wa=tb.size|0,mb=tb.offset|0,ub=tb.stride|0,hb=tb.divisor|0);La=S.buffer;S.buffer=fb;wd=S.divisor;
S.divisor=hb;$a=S.normalized;S.normalized=Ka;Mb=S.offset;S.offset=mb;Nb=S.size;S.size=Wa;nb=S.state;S.state=vb;Na=S.stride;S.stride=ub;$b=S.type;S.type=Oa;Ra=S.w;S.w=Ud;wb=S.x;S.x=Sa;xb=S.y;S.y=Lb;Ua=S.z;S.z=Gb;pb=r.call(this,R,b,e);gc=!1;Ec=null;vc=0;cb=!1;Ed=jc=0;Xa=1;Pa=0;Cb=5126;Xb=tc=Wb=ab=0;ta(pb)?(gc=!0,Ec=n.createStream(34962,pb),Cb=Ec.dtype):(Ec=n.getBuffer(pb))?Cb=Ec.dtype:"constant"in pb?(Xa=2,"number"===typeof pb.constant?(Wb=pb.constant,tc=Xb=ab=0):(Wb=0<pb.constant.length?pb.constant[0]:
0,tc=1<pb.constant.length?pb.constant[1]:0,Xb=2<pb.constant.length?pb.constant[2]:0,ab=3<pb.constant.length?pb.constant[3]:0)):(Ec=ta(pb.buffer)?n.createStream(34962,pb.buffer):n.getBuffer(pb.buffer),Cb="type"in pb?$d[pb.type]:Ec.dtype,cb=!!pb.normalized,Ed=pb.size|0,jc=pb.offset|0,Pa=pb.stride|0,vc=pb.divisor|0);Sb=L.buffer;L.buffer=Ec;Kc=L.divisor;L.divisor=vc;Tb=L.normalized;L.normalized=cb;Nd=L.offset;L.offset=jc;Dc=L.size;L.size=Ed;fe=L.state;L.state=Xa;Mc=L.stride;L.stride=Pa;Yc=L.type;L.type=
Cb;ze=L.w;L.w=ab;oc=L.x;L.x=Wb;wc=L.y;L.y=tc;hc=L.z;L.z=Xb;eb=ha.call(this,R,b,e);sc=!1;Vb=null;Yb=0;dc=!1;yc=ic=0;Ac=1;cd=0;Qc=5126;md=Zc=Uc=Rc=0;ta(eb)?(sc=!0,Vb=n.createStream(34962,eb),Qc=Vb.dtype):(Vb=n.getBuffer(eb))?Qc=Vb.dtype:"constant"in eb?(Ac=2,"number"===typeof eb.constant?(Uc=eb.constant,Zc=md=Rc=0):(Uc=0<eb.constant.length?eb.constant[0]:0,Zc=1<eb.constant.length?eb.constant[1]:0,md=2<eb.constant.length?eb.constant[2]:0,Rc=3<eb.constant.length?eb.constant[3]:0)):(Vb=ta(eb.buffer)?n.createStream(34962,
eb.buffer):n.getBuffer(eb.buffer),Qc="type"in eb?$d[eb.type]:Vb.dtype,dc=!!eb.normalized,yc=eb.size|0,ic=eb.offset|0,cd=eb.stride|0,Yb=eb.divisor|0);dd=k.buffer;k.buffer=Vb;$c=k.divisor;k.divisor=Yb;kc=k.normalized;k.normalized=dc;cc=k.offset;k.offset=ic;ad=k.size;k.size=yc;Wc=k.state;k.state=Ac;ed=k.stride;k.stride=cd;zc=k.type;k.type=Qc;id=k.w;k.w=Rc;Vd=k.x;k.x=Uc;ne=k.y;k.y=Zc;xe=k.z;k.z=md;jd=f.call(this,R,b,e);Kd=!1;Bd=null;we=0;ce=!1;Jd=Yd=0;Hd=1;od=0;Vc=5126;vd=kd=sd=ud=0;ta(jd)?(Kd=!0,Bd=
n.createStream(34962,jd),Vc=Bd.dtype):(Bd=n.getBuffer(jd))?Vc=Bd.dtype:"constant"in jd?(Hd=2,"number"===typeof jd.constant?(sd=jd.constant,kd=vd=ud=0):(sd=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,vd=2<jd.constant.length?jd.constant[2]:0,ud=3<jd.constant.length?jd.constant[3]:0)):(Bd=ta(jd.buffer)?n.createStream(34962,jd.buffer):n.getBuffer(jd.buffer),Vc="type"in jd?$d[jd.type]:Bd.dtype,ce=!!jd.normalized,Jd=jd.size|0,Yd=jd.offset|0,od=jd.stride|0,we=jd.divisor|
0);Cd=U.buffer;U.buffer=Bd;Dd=U.divisor;U.divisor=we;re=U.normalized;U.normalized=ce;je=U.offset;U.offset=Yd;se=U.size;U.size=Jd;ke=U.state;U.state=Hd;ie=U.stride;U.stride=od;he=U.type;U.type=Vc;te=U.w;U.w=ud;de=U.x;U.x=sd;le=U.y;U.y=kd;Nc=U.z;U.z=vd;hd=z.call(this,R,b,e);ue=!1;oe=null;Ld=0;Pd=!1;Rd=Qd=0;me=1;ye=0;Be=5126;Pe=Te=Vf=pe=0;ta(hd)?(ue=!0,oe=n.createStream(34962,hd),Be=oe.dtype):(oe=n.getBuffer(hd))?Be=oe.dtype:"constant"in hd?(me=2,"number"===typeof hd.constant?(Vf=hd.constant,Te=Pe=pe=
0):(Vf=0<hd.constant.length?hd.constant[0]:0,Te=1<hd.constant.length?hd.constant[1]:0,Pe=2<hd.constant.length?hd.constant[2]:0,pe=3<hd.constant.length?hd.constant[3]:0)):(oe=ta(hd.buffer)?n.createStream(34962,hd.buffer):n.getBuffer(hd.buffer),Be="type"in hd?$d[hd.type]:oe.dtype,Pd=!!hd.normalized,Rd=hd.size|0,Qd=hd.offset|0,ye=hd.stride|0,Ld=hd.divisor|0);ve=V.buffer;V.buffer=oe;Fe=V.divisor;V.divisor=Ld;Je=V.normalized;V.normalized=Pd;Ke=V.offset;V.offset=Qd;Le=V.size;V.size=Rd;Ge=V.state;V.state=
me;Md=V.stride;V.stride=ye;Wd=V.type;V.type=Be;be=V.w;V.w=pe;ee=V.x;V.x=Vf;Me=V.y;V.y=Te;Id=V.z;V.z=Pe;Sd=B.call(this,R,b,e);De=!1;Ne=null;af=0;$e=!1;Qe=Ue=0;Ze=1;Ye=0;Ve=5126;Xe=Zd=Td=We=0;ta(Sd)?(De=!0,Ne=n.createStream(34962,Sd),Ve=Ne.dtype):(Ne=n.getBuffer(Sd))?Ve=Ne.dtype:"constant"in Sd?(Ze=2,"number"===typeof Sd.constant?(Td=Sd.constant,Zd=Xe=We=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,Zd=1<Sd.constant.length?Sd.constant[1]:0,Xe=2<Sd.constant.length?Sd.constant[2]:0,We=3<Sd.constant.length?
Sd.constant[3]:0)):(Ne=ta(Sd.buffer)?n.createStream(34962,Sd.buffer):n.getBuffer(Sd.buffer),Ve="type"in Sd?$d[Sd.type]:Ne.dtype,$e=!!Sd.normalized,Qe=Sd.size|0,Ue=Sd.offset|0,Ye=Sd.stride|0,af=Sd.divisor|0);jf=l.buffer;l.buffer=Ne;nf=l.divisor;l.divisor=af;ef=l.normalized;l.normalized=$e;kf=l.offset;l.offset=Ue;lf=l.size;l.size=Qe;mf=l.state;l.state=Ze;rf=l.stride;l.stride=Ye;of=l.type;l.type=Ve;sf=l.w;l.w=We;Bf=l.x;l.x=Td;Cf=l.y;l.y=Zd;Re=l.z;l.z=Xe;Ee=I.call(this,R,b,e);pf=!1;qf=null;Df=0;Gf=!1;
Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;ta(Ee)?(pf=!0,qf=n.createStream(34962,Ee),xf=qf.dtype):(qf=n.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=ta(Ee.buffer)?n.createStream(34962,Ee.buffer):n.getBuffer(Ee.buffer),xf="type"in Ee?$d[Ee.type]:qf.dtype,Gf=!!Ee.normalized,
Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Jf=H.buffer;H.buffer=qf;Kf=H.divisor;H.divisor=Df;Lf=H.normalized;H.normalized=Gf;tf=H.offset;H.offset=Af;Qf=H.size;H.size=Ef;Hf=H.state;H.state=Ff;uf=H.stride;H.stride=wf;dg=H.type;H.type=xf;Rf=H.w;H.w=vf;Sf=H.x;H.x=yf;qg=H.y;H.y=zf;ff=H.z;H.z=If;cf=C.call(this,R,b,e);Mf=!1;Nf=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Tf=5126;jg=Zf=Yf=Xf=0;ta(cf)?(Mf=!0,Nf=n.createStream(34962,cf),Tf=Nf.dtype):(Nf=n.getBuffer(cf))?Tf=Nf.dtype:"constant"in cf?(ig=
2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Nf=ta(cf.buffer)?n.createStream(34962,cf.buffer):n.getBuffer(cf.buffer),Tf="type"in cf?$d[cf.type]:Nf.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=c.buffer;c.buffer=Nf;sg=c.divisor;c.divisor=eg;tg=c.normalized;c.normalized=fg;ug=c.offset;
c.offset=gg;vg=c.size;c.size=hg;wg=c.state;c.state=ig;xg=c.stride;c.stride=Wf;yg=c.type;c.type=Tf;zg=c.w;c.w=Xf;Ag=c.x;c.x=Yf;Bg=c.y;c.y=Zf;gf=c.z;c.z=jg;df=M.call(this,R,b,e);Of=!1;Pf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Uf=5126;pg=cg=bg=ag=0;ta(df)?(Of=!0,Pf=n.createStream(34962,df),Uf=Pf.dtype):(Pf=n.getBuffer(df))?Uf=Pf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?
df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Pf=ta(df.buffer)?n.createStream(34962,df.buffer):n.getBuffer(df.buffer),Uf="type"in df?$d[df.type]:Pf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=g.buffer;g.buffer=Pf;Dg=g.divisor;g.divisor=kg;Eg=g.normalized;g.normalized=lg;Fg=g.offset;g.offset=mg;Gg=g.size;g.size=ng;Hg=g.state;g.state=og;Ig=g.stride;g.stride=$f;Jg=g.type;g.type=Uf;Kg=g.w;g.w=ag;Lg=g.x;g.x=bg;Mg=g.y;g.y=cg;Ng=g.z;g.z=pg;Og=sa.vert;
sa.vert=44;Pg=sa.frag;sa.frag=43;ua.dirty=!0;d(R,b,e);R.viewportWidth=Z;R.viewportHeight=m;ae[0]=A;ae[1]=t;ae[2]=h;ae[3]=p;ga[0]=G;ga[1]=Q;ga[2]=y;ga[3]=W;Fa.blend_enable=F;Ga[0]=T;Ga[1]=ea;Ga[2]=fa;Ga[3]=zb;Fa.depth_enable=P;xd[0]=Y;xd[1]=O;xd[2]=ca;xd[3]=xa;Fa.scissor_enable=ra;Fa.stencil_enable=Ea;qa&&(ma.cpuTime+=performance.now()-ba);da&&Qa.destroyStream(X);wa.elements=Za;wa.offset=Da;wa.count=oa;wa.primitive=Ba;Aa[45]=na;Aa[48]=va;Aa[10]=Ca;Aa[46]=Ha;Aa[47]=ob;Aa[34]=ia;Aa[6]=Ta;Aa[7]=qb;Aa[8]=
jb;Aa[9]=Ia;Ja&&n.destroyStream(fb);S.buffer=La;S.divisor=wd;S.normalized=$a;S.offset=Mb;S.size=Nb;S.state=nb;S.stride=Na;S.type=$b;S.w=Ra;S.x=wb;S.y=xb;S.z=Ua;gc&&n.destroyStream(Ec);L.buffer=Sb;L.divisor=Kc;L.normalized=Tb;L.offset=Nd;L.size=Dc;L.state=fe;L.stride=Mc;L.type=Yc;L.w=ze;L.x=oc;L.y=wc;L.z=hc;sc&&n.destroyStream(Vb);k.buffer=dd;k.divisor=$c;k.normalized=kc;k.offset=cc;k.size=ad;k.state=Wc;k.stride=ed;k.type=zc;k.w=id;k.x=Vd;k.y=ne;k.z=xe;Kd&&n.destroyStream(Bd);U.buffer=Cd;U.divisor=
Dd;U.normalized=re;U.offset=je;U.size=se;U.state=ke;U.stride=ie;U.type=he;U.w=te;U.x=de;U.y=le;U.z=Nc;ue&&n.destroyStream(oe);V.buffer=ve;V.divisor=Fe;V.normalized=Je;V.offset=Ke;V.size=Le;V.state=Ge;V.stride=Md;V.type=Wd;V.w=be;V.x=ee;V.y=Me;V.z=Id;De&&n.destroyStream(Ne);l.buffer=jf;l.divisor=nf;l.normalized=ef;l.offset=kf;l.size=lf;l.state=mf;l.stride=rf;l.type=of;l.w=sf;l.x=Bf;l.y=Cf;l.z=Re;pf&&n.destroyStream(qf);H.buffer=Jf;H.divisor=Kf;H.normalized=Lf;H.offset=tf;H.size=Qf;H.state=Hf;H.stride=
uf;H.type=dg;H.w=Rf;H.x=Sf;H.y=qg;H.z=ff;Mf&&n.destroyStream(Nf);c.buffer=rg;c.divisor=sg;c.normalized=tg;c.offset=ug;c.size=vg;c.state=wg;c.stride=xg;c.type=yg;c.w=zg;c.x=Ag;c.y=Bg;c.z=gf;Of&&n.destroyStream(Pf);g.buffer=Cg;g.divisor=Dg;g.normalized=Eg;g.offset=Fg;g.size=Gg;g.state=Hg;g.stride=Ig;g.type=Jg;g.w=Kg;g.x=Lg;g.y=Mg;g.z=Ng;sa.vert=Og;sa.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,I,k,f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb){var Za,u,n,R,ua,wa,Qa,lc,fa,E,ta,Fa,sa,Aa,Ea,ga,Y,va,Ya,Ga,ob,ba,ia,ac,Ha,Pa,Ub,we,Ed,xd,Ud,ze,xe,Nd,ne,Kd,Vd,ae,fe;Za=a.attributes;u=a.buffer;n=a.context;R=a.current;ua=a.draw;wa=a.elements;Qa=a.extensions;lc=a.framebuffer;fa=a.gl;E=a.isBufferArgs;ta=a.next;Fa=a.shader;sa=a.uniforms;Aa=a.vao;Ea=ta.blend_color;ga=R.blend_color;Y=ta.blend_equation;va=R.blend_equation;
Ya=ta.blend_func;Ga=R.blend_func;ob=ta.colorMask;ba=R.colorMask;ia=ta.depth_range;ac=R.depth_range;Ha=ta.polygonOffset_offset;Pa=R.polygonOffset_offset;Ub=ta.sample_coverage;we=R.sample_coverage;Ed=ta.scissor_box;xd=R.scissor_box;Ud=ta.stencil_func;ze=R.stencil_func;xe=ta.stencil_opBack;Nd=R.stencil_opBack;ne=ta.stencil_opFront;Kd=R.stencil_opFront;Vd=ta.viewport;ae=R.viewport;fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,
c){var d,g,e,f,a,k;d=lc.next;d!==lc.cur&&(d?fa.bindFramebuffer(36160,d.framebuffer):fa.bindFramebuffer(36160,null),lc.cur=d);if(R.dirty){var l,m,r,t,z,h,p,B,Fa,x,y,sa,C,K,H,D,w,N,J,M,L,S,Ea,U,aa,V,I,ha,ya,Ya,Sc,Bb,db,Ob;l=ta.dither;l!==R.dither&&(l?fa.enable(3024):fa.disable(3024),R.dither=l);m=Y[0];r=Y[1];if(m!==va[0]||r!==va[1])fa.blendEquationSeparate(m,r),va[0]=m,va[1]=r;t=ta.depth_func;t!==R.depth_func&&(fa.depthFunc(t),R.depth_func=t);z=ia[0];h=ia[1];if(z!==ac[0]||h!==ac[1])fa.depthRange(z,
h),ac[0]=z,ac[1]=h;p=ta.depth_mask;p!==R.depth_mask&&(fa.depthMask(p),R.depth_mask=p);B=ob[0];Fa=ob[1];x=ob[2];y=ob[3];if(B!==ba[0]||Fa!==ba[1]||x!==ba[2]||y!==ba[3])fa.colorMask(B,Fa,x,y),ba[0]=B,ba[1]=Fa,ba[2]=x,ba[3]=y;sa=ta.cull_enable;sa!==R.cull_enable&&(sa?fa.enable(2884):fa.disable(2884),R.cull_enable=sa);C=ta.cull_face;C!==R.cull_face&&(fa.cullFace(C),R.cull_face=C);K=ta.frontFace;K!==R.frontFace&&(fa.frontFace(K),R.frontFace=K);H=ta.lineWidth;H!==R.lineWidth&&(fa.lineWidth(H),R.lineWidth=
H);D=ta.polygonOffset_enable;D!==R.polygonOffset_enable&&(D?fa.enable(32823):fa.disable(32823),R.polygonOffset_enable=D);w=Ha[0];N=Ha[1];if(w!==Pa[0]||N!==Pa[1])fa.polygonOffset(w,N),Pa[0]=w,Pa[1]=N;J=ta.sample_alpha;J!==R.sample_alpha&&(J?fa.enable(32926):fa.disable(32926),R.sample_alpha=J);M=ta.sample_enable;M!==R.sample_enable&&(M?fa.enable(32928):fa.disable(32928),R.sample_enable=M);L=Ub[0];S=Ub[1];if(L!==we[0]||S!==we[1])fa.sampleCoverage(L,S),we[0]=L,we[1]=S;Ea=ta.stencil_mask;Ea!==R.stencil_mask&&
(fa.stencilMask(Ea),R.stencil_mask=Ea);U=Ud[0];aa=Ud[1];V=Ud[2];if(U!==ze[0]||aa!==ze[1]||V!==ze[2])fa.stencilFunc(U,aa,V),ze[0]=U,ze[1]=aa,ze[2]=V;I=ne[0];ha=ne[1];ya=ne[2];Ya=ne[3];if(I!==Kd[0]||ha!==Kd[1]||ya!==Kd[2]||Ya!==Kd[3])fa.stencilOpSeparate(I,ha,ya,Ya),Kd[0]=I,Kd[1]=ha,Kd[2]=ya,Kd[3]=Ya;Sc=xe[0];Bb=xe[1];db=xe[2];Ob=xe[3];if(Sc!==Nd[0]||Bb!==Nd[1]||db!==Nd[2]||Ob!==Nd[3])fa.stencilOpSeparate(Sc,Bb,db,Ob),Nd[0]=Sc,Nd[1]=Bb,Nd[2]=db,Nd[3]=Ob}fa.blendColor(0,0,0,1);ga[0]=0;ga[1]=0;ga[2]=
0;ga[3]=1;fa.enable(3042);R.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;fa.disable(2929);R.depth_enable=!1;fa.enable(3089);R.scissor_enable=!0;fa.disable(2960);R.stencil_enable=!1;if(g=R.profile)e=performance.now(),ma.count+=c;fa.useProgram(ka.program);f=Qa.angle_instanced_arrays;var bb;Aa.setVAO(null);fa.uniform1i(G.location,!1);fa.uniform1i(ra.location,O.bind());bb=ua.instances;for(a=0;a<c;++a){k=b[a];var kb,Va,Ed,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,
Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,Vd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,He,Ie,jd,bf,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Re,Ee,pf,qf,Df,
Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf;kb=k.viewport;Va=kb.x|0;Ed=kb.y|0;Jb="width"in kb?kb.width|0:n.framebufferWidth-Va;Kb="height"in kb?kb.height|0:n.framebufferHeight-Ed;rc=n.viewportWidth;n.viewportWidth=Jb;Pb=n.viewportHeight;n.viewportHeight=Kb;fa.viewport(Va,Ed,Jb,Kb);ae[0]=Va;ae[1]=Ed;ae[2]=Jb;ae[3]=Kb;lb=k.viewport;Ib=lb.x|0;Fb=lb.y|0;yb="width"in lb?lb.width|0:n.framebufferWidth-Ib;ib="height"in lb?lb.height|0:n.framebufferHeight-Fb;fa.scissor(Ib,Fb,yb,ib);xd[0]=Ib;xd[1]=Fb;
xd[2]=yb;xd[3]=ib;Zb=A.call(this,n,k,a);Qb=!1;sb=null;Ta=0;Rb=!1;bc=qb=0;jb=1;rb=0;Ia=5126;hb=fb=Ja=tb=0;E(Zb)?(Qb=!0,sb=u.createStream(34962,Zb),Ia=sb.dtype):(sb=u.getBuffer(Zb))?Ia=sb.dtype:"constant"in Zb?(jb=2,"number"===typeof Zb.constant?(Ja=Zb.constant,fb=hb=tb=0):(Ja=0<Zb.constant.length?Zb.constant[0]:0,fb=1<Zb.constant.length?Zb.constant[1]:0,hb=2<Zb.constant.length?Zb.constant[2]:0,tb=3<Zb.constant.length?Zb.constant[3]:0)):(sb=E(Zb.buffer)?u.createStream(34962,Zb.buffer):u.getBuffer(Zb.buffer),
Ia="type"in Zb?fe[Zb.type]:sb.dtype,Rb=!!Zb.normalized,bc=Zb.size|0,qb=Zb.offset|0,rb=Zb.stride|0,Ta=Zb.divisor|0);Ka=Ba.location;mb=Za[Ka];if(1===jb){mb.buffer||fa.enableVertexAttribArray(Ka);Wa=bc||1;if(mb.type!==Ia||mb.size!==Wa||mb.buffer!==sb||mb.normalized!==Rb||mb.offset!==qb||mb.stride!==rb)fa.bindBuffer(34962,sb.buffer),fa.vertexAttribPointer(Ka,Wa,Ia,Rb,rb,qb),mb.type=Ia,mb.size=Wa,mb.buffer=sb,mb.normalized=Rb,mb.offset=qb,mb.stride=rb;mb.divisor!==Ta&&(f.vertexAttribDivisorANGLE(Ka,Ta),
mb.divisor=Ta)}else if(mb.buffer&&(fa.disableVertexAttribArray(Ka),mb.buffer=null),mb.x!==Ja||mb.y!==fb||mb.z!==hb||mb.w!==tb)fa.vertexAttrib4f(Ka,Ja,fb,hb,tb),mb.x=Ja,mb.y=fb,mb.z=hb,mb.w=tb;vb=na.call(this,n,k,a);ub=!1;Oa=null;Bc=0;Sa=!1;Gb=Lb=0;La=1;Pc=0;$a=5126;Na=nb=Nb=Mb=0;E(vb)?(ub=!0,Oa=u.createStream(34962,vb),$a=Oa.dtype):(Oa=u.getBuffer(vb))?$a=Oa.dtype:"constant"in vb?(La=2,"number"===typeof vb.constant?(Nb=vb.constant,nb=Na=Mb=0):(Nb=0<vb.constant.length?vb.constant[0]:0,nb=1<vb.constant.length?
vb.constant[1]:0,Na=2<vb.constant.length?vb.constant[2]:0,Mb=3<vb.constant.length?vb.constant[3]:0)):(Oa=E(vb.buffer)?u.createStream(34962,vb.buffer):u.getBuffer(vb.buffer),$a="type"in vb?fe[vb.type]:Oa.dtype,Sa=!!vb.normalized,Gb=vb.size|0,Lb=vb.offset|0,Pc=vb.stride|0,Bc=vb.divisor|0);$b=Z.location;Ra=Za[$b];if(1===La){Ra.buffer||fa.enableVertexAttribArray($b);wb=Gb||1;if(Ra.type!==$a||Ra.size!==wb||Ra.buffer!==Oa||Ra.normalized!==Sa||Ra.offset!==Lb||Ra.stride!==Pc)fa.bindBuffer(34962,Oa.buffer),
fa.vertexAttribPointer($b,wb,$a,Sa,Pc,Lb),Ra.type=$a,Ra.size=wb,Ra.buffer=Oa,Ra.normalized=Sa,Ra.offset=Lb,Ra.stride=Pc;Ra.divisor!==Bc&&(f.vertexAttribDivisorANGLE($b,Bc),Ra.divisor=Bc)}else if(Ra.buffer&&(fa.disableVertexAttribArray($b),Ra.buffer=null),Ra.x!==Nb||Ra.y!==nb||Ra.z!==Na||Ra.w!==Mb)fa.vertexAttrib4f($b,Nb,nb,Na,Mb),Ra.x=Nb,Ra.y=nb,Ra.z=Na,Ra.w=Mb;xb=za.call(this,n,k,a);Ua=!1;pb=null;gc=0;Ec=!1;cb=vc=0;jc=1;Tc=0;Xa=5126;Wb=ab=Cb=ld=0;E(xb)?(Ua=!0,pb=u.createStream(34962,xb),Xa=pb.dtype):
(pb=u.getBuffer(xb))?Xa=pb.dtype:"constant"in xb?(jc=2,"number"===typeof xb.constant?(Cb=xb.constant,ab=Wb=ld=0):(Cb=0<xb.constant.length?xb.constant[0]:0,ab=1<xb.constant.length?xb.constant[1]:0,Wb=2<xb.constant.length?xb.constant[2]:0,ld=3<xb.constant.length?xb.constant[3]:0)):(pb=E(xb.buffer)?u.createStream(34962,xb.buffer):u.getBuffer(xb.buffer),Xa="type"in xb?fe[xb.type]:pb.dtype,Ec=!!xb.normalized,cb=xb.size|0,vc=xb.offset|0,Tc=xb.stride|0,gc=xb.divisor|0);tc=Ma.location;Xb=Za[tc];if(1===jc){Xb.buffer||
fa.enableVertexAttribArray(tc);Sb=cb||1;if(Xb.type!==Xa||Xb.size!==Sb||Xb.buffer!==pb||Xb.normalized!==Ec||Xb.offset!==vc||Xb.stride!==Tc)fa.bindBuffer(34962,pb.buffer),fa.vertexAttribPointer(tc,Sb,Xa,Ec,Tc,vc),Xb.type=Xa,Xb.size=Sb,Xb.buffer=pb,Xb.normalized=Ec,Xb.offset=vc,Xb.stride=Tc;Xb.divisor!==gc&&(f.vertexAttribDivisorANGLE(tc,gc),Xb.divisor=gc)}else if(Xb.buffer&&(fa.disableVertexAttribArray(tc),Xb.buffer=null),Xb.x!==Cb||Xb.y!==ab||Xb.z!==Wb||Xb.w!==ld)fa.vertexAttrib4f(tc,Cb,ab,Wb,ld),
Xb.x=Cb,Xb.y=ab,Xb.z=Wb,Xb.w=ld;Kc=X.call(this,n,k,a);Tb=!1;td=null;Dc=0;Vd=!1;Yc=Mc=0;qd=1;oc=0;wc=5126;Vb=sc=eb=hc=0;E(Kc)?(Tb=!0,td=u.createStream(34962,Kc),wc=td.dtype):(td=u.getBuffer(Kc))?wc=td.dtype:"constant"in Kc?(qd=2,"number"===typeof Kc.constant?(eb=Kc.constant,sc=Vb=hc=0):(eb=0<Kc.constant.length?Kc.constant[0]:0,sc=1<Kc.constant.length?Kc.constant[1]:0,Vb=2<Kc.constant.length?Kc.constant[2]:0,hc=3<Kc.constant.length?Kc.constant[3]:0)):(td=E(Kc.buffer)?u.createStream(34962,Kc.buffer):
u.getBuffer(Kc.buffer),wc="type"in Kc?fe[Kc.type]:td.dtype,Vd=!!Kc.normalized,Yc=Kc.size|0,Mc=Kc.offset|0,oc=Kc.stride|0,Dc=Kc.divisor|0);Yb=zb.location;dc=Za[Yb];if(1===qd){dc.buffer||fa.enableVertexAttribArray(Yb);ic=Yc||1;if(dc.type!==wc||dc.size!==ic||dc.buffer!==td||dc.normalized!==Vd||dc.offset!==Mc||dc.stride!==oc)fa.bindBuffer(34962,td.buffer),fa.vertexAttribPointer(Yb,ic,wc,Vd,oc,Mc),dc.type=wc,dc.size=ic,dc.buffer=td,dc.normalized=Vd,dc.offset=Mc,dc.stride=oc;dc.divisor!==Dc&&(f.vertexAttribDivisorANGLE(Yb,
Dc),dc.divisor=Dc)}else if(dc.buffer&&(fa.disableVertexAttribArray(Yb),dc.buffer=null),dc.x!==eb||dc.y!==sc||dc.z!==Vb||dc.w!==hc)fa.vertexAttrib4f(Yb,eb,sc,Vb,hc),dc.x=eb,dc.y=sc,dc.z=Vb,dc.w=hc;yc=da.call(this,n,k,a);Ac=!1;cd=null;Qc=0;Rc=!1;Zc=Uc=0;md=1;dd=0;$c=5126;Wc=ad=cc=kc=0;E(yc)?(Ac=!0,cd=u.createStream(34962,yc),$c=cd.dtype):(cd=u.getBuffer(yc))?$c=cd.dtype:"constant"in yc?(md=2,"number"===typeof yc.constant?(cc=yc.constant,ad=Wc=kc=0):(cc=0<yc.constant.length?yc.constant[0]:0,ad=1<yc.constant.length?
yc.constant[1]:0,Wc=2<yc.constant.length?yc.constant[2]:0,kc=3<yc.constant.length?yc.constant[3]:0)):(cd=E(yc.buffer)?u.createStream(34962,yc.buffer):u.getBuffer(yc.buffer),$c="type"in yc?fe[yc.type]:cd.dtype,Rc=!!yc.normalized,Zc=yc.size|0,Uc=yc.offset|0,dd=yc.stride|0,Qc=yc.divisor|0);ed=Da.location;zc=Za[ed];if(1===md){zc.buffer||fa.enableVertexAttribArray(ed);id=Zc||1;if(zc.type!==$c||zc.size!==id||zc.buffer!==cd||zc.normalized!==Rc||zc.offset!==Uc||zc.stride!==dd)fa.bindBuffer(34962,cd.buffer),
fa.vertexAttribPointer(ed,id,$c,Rc,dd,Uc),zc.type=$c,zc.size=id,zc.buffer=cd,zc.normalized=Rc,zc.offset=Uc,zc.stride=dd;zc.divisor!==Qc&&(f.vertexAttribDivisorANGLE(ed,Qc),zc.divisor=Qc)}else if(zc.buffer&&(fa.disableVertexAttribArray(ed),zc.buffer=null),zc.x!==cc||zc.y!==ad||zc.z!==Wc||zc.w!==kc)fa.vertexAttrib4f(ed,cc,ad,Wc,kc),zc.x=cc,zc.y=ad,zc.z=Wc,zc.w=kc;Ad=T.call(this,n,k,a);He=!1;Ie=null;jd=0;bf=!1;ge=Bd=0;ce=1;Yd=0;Jd=5126;ud=Vc=od=Hd=0;E(Ad)?(He=!0,Ie=u.createStream(34962,Ad),Jd=Ie.dtype):
(Ie=u.getBuffer(Ad))?Jd=Ie.dtype:"constant"in Ad?(ce=2,"number"===typeof Ad.constant?(od=Ad.constant,Vc=ud=Hd=0):(od=0<Ad.constant.length?Ad.constant[0]:0,Vc=1<Ad.constant.length?Ad.constant[1]:0,ud=2<Ad.constant.length?Ad.constant[2]:0,Hd=3<Ad.constant.length?Ad.constant[3]:0)):(Ie=E(Ad.buffer)?u.createStream(34962,Ad.buffer):u.getBuffer(Ad.buffer),Jd="type"in Ad?fe[Ad.type]:Ie.dtype,bf=!!Ad.normalized,ge=Ad.size|0,Bd=Ad.offset|0,Yd=Ad.stride|0,jd=Ad.divisor|0);sd=oa.location;kd=Za[sd];if(1===ce){kd.buffer||
fa.enableVertexAttribArray(sd);vd=ge||1;if(kd.type!==Jd||kd.size!==vd||kd.buffer!==Ie||kd.normalized!==bf||kd.offset!==Bd||kd.stride!==Yd)fa.bindBuffer(34962,Ie.buffer),fa.vertexAttribPointer(sd,vd,Jd,bf,Yd,Bd),kd.type=Jd,kd.size=vd,kd.buffer=Ie,kd.normalized=bf,kd.offset=Bd,kd.stride=Yd;kd.divisor!==jd&&(f.vertexAttribDivisorANGLE(sd,jd),kd.divisor=jd)}else if(kd.buffer&&(fa.disableVertexAttribArray(sd),kd.buffer=null),kd.x!==od||kd.y!==Vc||kd.z!==ud||kd.w!==Hd)fa.vertexAttrib4f(sd,od,Vc,ud,Hd),
kd.x=od,kd.y=Vc,kd.z=ud,kd.w=Hd;Cd=Q.call(this,n,k,a);Dd=!1;re=null;je=0;se=!1;ie=ke=0;he=1;te=0;de=5126;ue=hd=Nc=le=0;E(Cd)?(Dd=!0,re=u.createStream(34962,Cd),de=re.dtype):(re=u.getBuffer(Cd))?de=re.dtype:"constant"in Cd?(he=2,"number"===typeof Cd.constant?(Nc=Cd.constant,hd=ue=le=0):(Nc=0<Cd.constant.length?Cd.constant[0]:0,hd=1<Cd.constant.length?Cd.constant[1]:0,ue=2<Cd.constant.length?Cd.constant[2]:0,le=3<Cd.constant.length?Cd.constant[3]:0)):(re=E(Cd.buffer)?u.createStream(34962,Cd.buffer):
u.getBuffer(Cd.buffer),de="type"in Cd?fe[Cd.type]:re.dtype,se=!!Cd.normalized,ie=Cd.size|0,ke=Cd.offset|0,te=Cd.stride|0,je=Cd.divisor|0);oe=v.location;Ld=Za[oe];if(1===he){Ld.buffer||fa.enableVertexAttribArray(oe);Pd=ie||4;if(Ld.type!==de||Ld.size!==Pd||Ld.buffer!==re||Ld.normalized!==se||Ld.offset!==ke||Ld.stride!==te)fa.bindBuffer(34962,re.buffer),fa.vertexAttribPointer(oe,Pd,de,se,te,ke),Ld.type=de,Ld.size=Pd,Ld.buffer=re,Ld.normalized=se,Ld.offset=ke,Ld.stride=te;Ld.divisor!==je&&(f.vertexAttribDivisorANGLE(oe,
je),Ld.divisor=je)}else if(Ld.buffer&&(fa.disableVertexAttribArray(oe),Ld.buffer=null),Ld.x!==Nc||Ld.y!==hd||Ld.z!==ue||Ld.w!==le)fa.vertexAttrib4f(oe,Nc,hd,ue,le),Ld.x=Nc,Ld.y=hd,Ld.z=ue,Ld.w=le;Qd=F.call(this,n,k,a);Rd=!1;me=null;ye=0;Be=!1;hf=pe=0;Te=1;Pe=0;ve=5126;Le=Ke=Je=Fe=0;E(Qd)?(Rd=!0,me=u.createStream(34962,Qd),ve=me.dtype):(me=u.getBuffer(Qd))?ve=me.dtype:"constant"in Qd?(Te=2,"number"===typeof Qd.constant?(Je=Qd.constant,Ke=Le=Fe=0):(Je=0<Qd.constant.length?Qd.constant[0]:0,Ke=1<Qd.constant.length?
Qd.constant[1]:0,Le=2<Qd.constant.length?Qd.constant[2]:0,Fe=3<Qd.constant.length?Qd.constant[3]:0)):(me=E(Qd.buffer)?u.createStream(34962,Qd.buffer):u.getBuffer(Qd.buffer),ve="type"in Qd?fe[Qd.type]:me.dtype,Be=!!Qd.normalized,hf=Qd.size|0,pe=Qd.offset|0,Pe=Qd.stride|0,ye=Qd.divisor|0);Ge=qa.location;Md=Za[Ge];if(1===Te){Md.buffer||fa.enableVertexAttribArray(Ge);Wd=hf||4;if(Md.type!==ve||Md.size!==Wd||Md.buffer!==me||Md.normalized!==Be||Md.offset!==pe||Md.stride!==Pe)fa.bindBuffer(34962,me.buffer),
fa.vertexAttribPointer(Ge,Wd,ve,Be,Pe,pe),Md.type=ve,Md.size=Wd,Md.buffer=me,Md.normalized=Be,Md.offset=pe,Md.stride=Pe;Md.divisor!==ye&&(f.vertexAttribDivisorANGLE(Ge,ye),Md.divisor=ye)}else if(Md.buffer&&(fa.disableVertexAttribArray(Ge),Md.buffer=null),Md.x!==Je||Md.y!==Ke||Md.z!==Le||Md.w!==Fe)fa.vertexAttrib4f(Ge,Je,Ke,Le,Fe),Md.x=Je,Md.y=Ke,Md.z=Le,Md.w=Fe;be=q.call(this,n,k,a);ee=!1;Me=null;Id=0;Sd=!1;Ne=De=0;af=1;$e=0;Ue=5126;Ve=Ye=Ze=Qe=0;E(be)?(ee=!0,Me=u.createStream(34962,be),Ue=Me.dtype):
(Me=u.getBuffer(be))?Ue=Me.dtype:"constant"in be?(af=2,"number"===typeof be.constant?(Ze=be.constant,Ye=Ve=Qe=0):(Ze=0<be.constant.length?be.constant[0]:0,Ye=1<be.constant.length?be.constant[1]:0,Ve=2<be.constant.length?be.constant[2]:0,Qe=3<be.constant.length?be.constant[3]:0)):(Me=E(be.buffer)?u.createStream(34962,be.buffer):u.getBuffer(be.buffer),Ue="type"in be?fe[be.type]:Me.dtype,Sd=!!be.normalized,Ne=be.size|0,De=be.offset|0,$e=be.stride|0,Id=be.divisor|0);We=ca.location;Td=Za[We];if(1===af){Td.buffer||
fa.enableVertexAttribArray(We);Zd=Ne||1;if(Td.type!==Ue||Td.size!==Zd||Td.buffer!==Me||Td.normalized!==Sd||Td.offset!==De||Td.stride!==$e)fa.bindBuffer(34962,Me.buffer),fa.vertexAttribPointer(We,Zd,Ue,Sd,$e,De),Td.type=Ue,Td.size=Zd,Td.buffer=Me,Td.normalized=Sd,Td.offset=De,Td.stride=$e;Td.divisor!==Id&&(f.vertexAttribDivisorANGLE(We,Id),Td.divisor=Id)}else if(Td.buffer&&(fa.disableVertexAttribArray(We),Td.buffer=null),Td.x!==Ze||Td.y!==Ye||Td.z!==Ve||Td.w!==Qe)fa.vertexAttrib4f(We,Ze,Ye,Ve,Qe),
Td.x=Ze,Td.y=Ye,Td.z=Ve,Td.w=Qe;Xe=n.pixelRatio;a&&jf===Xe||(jf=Xe,fa.uniform1f(Ca.location,Xe));nf=P.call(this,n,k,a);ef=nf[0];lf=nf[1];a&&kf===ef&&mf===lf||(kf=ef,mf=lf,fa.uniform2f(la.location,ef,lf));rf=k.scale;of=rf[0];Bf=rf[1];a&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,fa.uniform2f(xa.location,of,Bf));Re=k.scaleFract;Ee=Re[0];qf=Re[1];a&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,fa.uniform2f(ea.location,Ee,qf));Gf=k.translate;Af=Gf[0];Ff=Gf[1];a&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,fa.uniform2f(ja.location,Af,Ff));
xf=k.translateFract;vf=xf[0];zf=xf[1];a&&yf===vf&&If===zf||(yf=vf,If=zf,fa.uniform2f(pa.location,vf,zf));Jf=k.opacity;a&&Kf===Jf||(Kf=Jf,fa.uniform1f(W.location,Jf));Lf=k.elements;tf=null;(tf=(Qf=E(Lf))?wa.createStream(Lf):wa.getElements(Lf))&&fa.bindBuffer(34963,tf.buffer.buffer);Hf=k.offset;if(uf=k.count)0<bb?tf?f.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),bb):f.drawArraysInstancedANGLE(0,Hf,uf,bb):0>bb&&(tf?fa.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):fa.drawArrays(0,
Hf,uf)),n.viewportWidth=rc,n.viewportHeight=Pb,Qb&&u.destroyStream(sb),ub&&u.destroyStream(Oa),Ua&&u.destroyStream(pb),Tb&&u.destroyStream(td),Ac&&u.destroyStream(cd),He&&u.destroyStream(Ie),Dd&&u.destroyStream(re),Rd&&u.destroyStream(me),ee&&u.destroyStream(Me),Qf&&wa.destroyStream(tf)}O.unbind();R.dirty=!0;Aa.setVAO(null);g&&(ma.cpuTime+=performance.now()-e)},draw:function(c){var g,a,f,k,q,l,r,A,z,B,Fa,Q,x,F,sa,T,C,P,H,J,O,M,L,S,Ea,U,aa,X,V,da,I,ha,na,ka,ya,za,Ya,Sc,Bb,db,Ob,bb,kb,Va,Ed,Jb,Kb,rc,
Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,Vd,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad,He,Ie,jd,bf,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,hf;g=lc.next;g!==lc.cur&&(g?fa.bindFramebuffer(36160,g.framebuffer):fa.bindFramebuffer(36160,null),lc.cur=g);
if(R.dirty){var Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf;Te=ta.dither;Te!==R.dither&&(Te?fa.enable(3024):fa.disable(3024),R.dither=Te);Pe=Y[0];ve=Y[1];if(Pe!==va[0]||ve!==va[1])fa.blendEquationSeparate(Pe,ve),va[0]=Pe,va[1]=ve;Fe=ta.depth_func;Fe!==R.depth_func&&(fa.depthFunc(Fe),R.depth_func=Fe);Je=ia[0];Ke=ia[1];if(Je!==ac[0]||Ke!==ac[1])fa.depthRange(Je,Ke),ac[0]=Je,ac[1]=Ke;Le=ta.depth_mask;Le!==R.depth_mask&&(fa.depthMask(Le),R.depth_mask=
Le);Ge=ob[0];Md=ob[1];Wd=ob[2];be=ob[3];if(Ge!==ba[0]||Md!==ba[1]||Wd!==ba[2]||be!==ba[3])fa.colorMask(Ge,Md,Wd,be),ba[0]=Ge,ba[1]=Md,ba[2]=Wd,ba[3]=be;ee=ta.cull_enable;ee!==R.cull_enable&&(ee?fa.enable(2884):fa.disable(2884),R.cull_enable=ee);Me=ta.cull_face;Me!==R.cull_face&&(fa.cullFace(Me),R.cull_face=Me);Id=ta.frontFace;Id!==R.frontFace&&(fa.frontFace(Id),R.frontFace=Id);Sd=ta.lineWidth;Sd!==R.lineWidth&&(fa.lineWidth(Sd),R.lineWidth=Sd);De=ta.polygonOffset_enable;De!==R.polygonOffset_enable&&
(De?fa.enable(32823):fa.disable(32823),R.polygonOffset_enable=De);Ne=Ha[0];af=Ha[1];if(Ne!==Pa[0]||af!==Pa[1])fa.polygonOffset(Ne,af),Pa[0]=Ne,Pa[1]=af;$e=ta.sample_alpha;$e!==R.sample_alpha&&($e?fa.enable(32926):fa.disable(32926),R.sample_alpha=$e);Ue=ta.sample_enable;Ue!==R.sample_enable&&(Ue?fa.enable(32928):fa.disable(32928),R.sample_enable=Ue);Qe=Ub[0];Ze=Ub[1];if(Qe!==we[0]||Ze!==we[1])fa.sampleCoverage(Qe,Ze),we[0]=Qe,we[1]=Ze;Ye=ta.stencil_mask;Ye!==R.stencil_mask&&(fa.stencilMask(Ye),R.stencil_mask=
Ye);Ve=Ud[0];We=Ud[1];Td=Ud[2];if(Ve!==ze[0]||We!==ze[1]||Td!==ze[2])fa.stencilFunc(Ve,We,Td),ze[0]=Ve,ze[1]=We,ze[2]=Td;Zd=ne[0];Xe=ne[1];jf=ne[2];nf=ne[3];if(Zd!==Kd[0]||Xe!==Kd[1]||jf!==Kd[2]||nf!==Kd[3])fa.stencilOpSeparate(Zd,Xe,jf,nf),Kd[0]=Zd,Kd[1]=Xe,Kd[2]=jf,Kd[3]=nf;ef=xe[0];kf=xe[1];lf=xe[2];mf=xe[3];if(ef!==Nd[0]||kf!==Nd[1]||lf!==Nd[2]||mf!==Nd[3])fa.stencilOpSeparate(ef,kf,lf,mf),Nd[0]=ef,Nd[1]=kf,Nd[2]=lf,Nd[3]=mf}a=c.viewport;f=a.x|0;k=a.y|0;q="width"in a?a.width|0:n.framebufferWidth-
f;l="height"in a?a.height|0:n.framebufferHeight-k;r=n.viewportWidth;n.viewportWidth=q;A=n.viewportHeight;n.viewportHeight=l;fa.viewport(f,k,q,l);ae[0]=f;ae[1]=k;ae[2]=q;ae[3]=l;fa.blendColor(0,0,0,1);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=1;fa.enable(3042);R.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;fa.disable(2929);R.depth_enable=!1;z=c.viewport;B=z.x|0;Fa=z.y|0;Q="width"in z?z.width|0:n.framebufferWidth-B;x="height"in z?z.height|0:n.framebufferHeight-Fa;fa.scissor(B,
Fa,Q,x);xd[0]=B;xd[1]=Fa;xd[2]=Q;xd[3]=x;fa.enable(3089);R.scissor_enable=!0;fa.disable(2960);R.stencil_enable=!1;if(F=R.profile)sa=performance.now(),ma.count++;fa.useProgram(D.program);T=Qa.angle_instanced_arrays;Aa.setVAO(null);C=K.call(this,n,c,0);P=!1;H=null;J=0;O=!1;L=M=0;S=1;Ea=0;U=5126;da=V=X=aa=0;E(C)?(P=!0,H=u.createStream(34962,C),U=H.dtype):(H=u.getBuffer(C))?U=H.dtype:"constant"in C?(S=2,"number"===typeof C.constant?(X=C.constant,V=da=aa=0):(X=0<C.constant.length?C.constant[0]:0,V=1<C.constant.length?
C.constant[1]:0,da=2<C.constant.length?C.constant[2]:0,aa=3<C.constant.length?C.constant[3]:0)):(H=E(C.buffer)?u.createStream(34962,C.buffer):u.getBuffer(C.buffer),U="type"in C?fe[C.type]:H.dtype,O=!!C.normalized,L=C.size|0,M=C.offset|0,Ea=C.stride|0,J=C.divisor|0);I=Ba.location;ha=Za[I];if(1===S){ha.buffer||fa.enableVertexAttribArray(I);na=L||1;if(ha.type!==U||ha.size!==na||ha.buffer!==H||ha.normalized!==O||ha.offset!==M||ha.stride!==Ea)fa.bindBuffer(34962,H.buffer),fa.vertexAttribPointer(I,na,U,
O,Ea,M),ha.type=U,ha.size=na,ha.buffer=H,ha.normalized=O,ha.offset=M,ha.stride=Ea;ha.divisor!==J&&(T.vertexAttribDivisorANGLE(I,J),ha.divisor=J)}else if(ha.buffer&&(fa.disableVertexAttribArray(I),ha.buffer=null),ha.x!==X||ha.y!==V||ha.z!==da||ha.w!==aa)fa.vertexAttrib4f(I,X,V,da,aa),ha.x=X,ha.y=V,ha.z=da,ha.w=aa;ka=m.call(this,n,c,0);ya=!1;za=null;Ya=0;Sc=!1;db=Bb=0;Ob=1;bb=0;kb=5126;Kb=Jb=Ed=Va=0;E(ka)?(ya=!0,za=u.createStream(34962,ka),kb=za.dtype):(za=u.getBuffer(ka))?kb=za.dtype:"constant"in ka?
(Ob=2,"number"===typeof ka.constant?(Ed=ka.constant,Jb=Kb=Va=0):(Ed=0<ka.constant.length?ka.constant[0]:0,Jb=1<ka.constant.length?ka.constant[1]:0,Kb=2<ka.constant.length?ka.constant[2]:0,Va=3<ka.constant.length?ka.constant[3]:0)):(za=E(ka.buffer)?u.createStream(34962,ka.buffer):u.getBuffer(ka.buffer),kb="type"in ka?fe[ka.type]:za.dtype,Sc=!!ka.normalized,db=ka.size|0,Bb=ka.offset|0,bb=ka.stride|0,Ya=ka.divisor|0);rc=Z.location;Pb=Za[rc];if(1===Ob){Pb.buffer||fa.enableVertexAttribArray(rc);lb=db||
1;if(Pb.type!==kb||Pb.size!==lb||Pb.buffer!==za||Pb.normalized!==Sc||Pb.offset!==Bb||Pb.stride!==bb)fa.bindBuffer(34962,za.buffer),fa.vertexAttribPointer(rc,lb,kb,Sc,bb,Bb),Pb.type=kb,Pb.size=lb,Pb.buffer=za,Pb.normalized=Sc,Pb.offset=Bb,Pb.stride=bb;Pb.divisor!==Ya&&(T.vertexAttribDivisorANGLE(rc,Ya),Pb.divisor=Ya)}else if(Pb.buffer&&(fa.disableVertexAttribArray(rc),Pb.buffer=null),Pb.x!==Ed||Pb.y!==Jb||Pb.z!==Kb||Pb.w!==Va)fa.vertexAttrib4f(rc,Ed,Jb,Kb,Va),Pb.x=Ed,Pb.y=Jb,Pb.z=Kb,Pb.w=Va;Ib=e.call(this,
n,c,0);Fb=!1;yb=null;ib=0;Zb=!1;sb=Qb=0;Ta=1;Rb=0;qb=5126;Ia=rb=jb=bc=0;E(Ib)?(Fb=!0,yb=u.createStream(34962,Ib),qb=yb.dtype):(yb=u.getBuffer(Ib))?qb=yb.dtype:"constant"in Ib?(Ta=2,"number"===typeof Ib.constant?(jb=Ib.constant,rb=Ia=bc=0):(jb=0<Ib.constant.length?Ib.constant[0]:0,rb=1<Ib.constant.length?Ib.constant[1]:0,Ia=2<Ib.constant.length?Ib.constant[2]:0,bc=3<Ib.constant.length?Ib.constant[3]:0)):(yb=E(Ib.buffer)?u.createStream(34962,Ib.buffer):u.getBuffer(Ib.buffer),qb="type"in Ib?fe[Ib.type]:
yb.dtype,Zb=!!Ib.normalized,sb=Ib.size|0,Qb=Ib.offset|0,Rb=Ib.stride|0,ib=Ib.divisor|0);tb=Ma.location;Ja=Za[tb];if(1===Ta){Ja.buffer||fa.enableVertexAttribArray(tb);fb=sb||1;if(Ja.type!==qb||Ja.size!==fb||Ja.buffer!==yb||Ja.normalized!==Zb||Ja.offset!==Qb||Ja.stride!==Rb)fa.bindBuffer(34962,yb.buffer),fa.vertexAttribPointer(tb,fb,qb,Zb,Rb,Qb),Ja.type=qb,Ja.size=fb,Ja.buffer=yb,Ja.normalized=Zb,Ja.offset=Qb,Ja.stride=Rb;Ja.divisor!==ib&&(T.vertexAttribDivisorANGLE(tb,ib),Ja.divisor=ib)}else if(Ja.buffer&&
(fa.disableVertexAttribArray(tb),Ja.buffer=null),Ja.x!==jb||Ja.y!==rb||Ja.z!==Ia||Ja.w!==bc)fa.vertexAttrib4f(tb,jb,rb,Ia,bc),Ja.x=jb,Ja.y=rb,Ja.z=Ia,Ja.w=bc;hb=d.call(this,n,c,0);Ka=!1;mb=null;Wa=0;vb=!1;Oa=ub=0;Bc=1;Sa=0;Lb=5126;$a=Pc=La=Gb=0;E(hb)?(Ka=!0,mb=u.createStream(34962,hb),Lb=mb.dtype):(mb=u.getBuffer(hb))?Lb=mb.dtype:"constant"in hb?(Bc=2,"number"===typeof hb.constant?(La=hb.constant,Pc=$a=Gb=0):(La=0<hb.constant.length?hb.constant[0]:0,Pc=1<hb.constant.length?hb.constant[1]:0,$a=2<hb.constant.length?
hb.constant[2]:0,Gb=3<hb.constant.length?hb.constant[3]:0)):(mb=E(hb.buffer)?u.createStream(34962,hb.buffer):u.getBuffer(hb.buffer),Lb="type"in hb?fe[hb.type]:mb.dtype,vb=!!hb.normalized,Oa=hb.size|0,ub=hb.offset|0,Sa=hb.stride|0,Wa=hb.divisor|0);Mb=zb.location;Nb=Za[Mb];if(1===Bc){Nb.buffer||fa.enableVertexAttribArray(Mb);nb=Oa||1;if(Nb.type!==Lb||Nb.size!==nb||Nb.buffer!==mb||Nb.normalized!==vb||Nb.offset!==ub||Nb.stride!==Sa)fa.bindBuffer(34962,mb.buffer),fa.vertexAttribPointer(Mb,nb,Lb,vb,Sa,
ub),Nb.type=Lb,Nb.size=nb,Nb.buffer=mb,Nb.normalized=vb,Nb.offset=ub,Nb.stride=Sa;Nb.divisor!==Wa&&(T.vertexAttribDivisorANGLE(Mb,Wa),Nb.divisor=Wa)}else if(Nb.buffer&&(fa.disableVertexAttribArray(Mb),Nb.buffer=null),Nb.x!==La||Nb.y!==Pc||Nb.z!==$a||Nb.w!==Gb)fa.vertexAttrib4f(Mb,La,Pc,$a,Gb),Nb.x=La,Nb.y=Pc,Nb.z=$a,Nb.w=Gb;Na=b.call(this,n,c,0);$b=!1;Ra=null;wb=0;xb=!1;pb=Ua=0;gc=1;Ec=0;vc=5126;Xa=Tc=jc=cb=0;E(Na)?($b=!0,Ra=u.createStream(34962,Na),vc=Ra.dtype):(Ra=u.getBuffer(Na))?vc=Ra.dtype:"constant"in
Na?(gc=2,"number"===typeof Na.constant?(jc=Na.constant,Tc=Xa=cb=0):(jc=0<Na.constant.length?Na.constant[0]:0,Tc=1<Na.constant.length?Na.constant[1]:0,Xa=2<Na.constant.length?Na.constant[2]:0,cb=3<Na.constant.length?Na.constant[3]:0)):(Ra=E(Na.buffer)?u.createStream(34962,Na.buffer):u.getBuffer(Na.buffer),vc="type"in Na?fe[Na.type]:Ra.dtype,xb=!!Na.normalized,pb=Na.size|0,Ua=Na.offset|0,Ec=Na.stride|0,wb=Na.divisor|0);ld=Da.location;Cb=Za[ld];if(1===gc){Cb.buffer||fa.enableVertexAttribArray(ld);ab=
pb||1;if(Cb.type!==vc||Cb.size!==ab||Cb.buffer!==Ra||Cb.normalized!==xb||Cb.offset!==Ua||Cb.stride!==Ec)fa.bindBuffer(34962,Ra.buffer),fa.vertexAttribPointer(ld,ab,vc,xb,Ec,Ua),Cb.type=vc,Cb.size=ab,Cb.buffer=Ra,Cb.normalized=xb,Cb.offset=Ua,Cb.stride=Ec;Cb.divisor!==wb&&(T.vertexAttribDivisorANGLE(ld,wb),Cb.divisor=wb)}else if(Cb.buffer&&(fa.disableVertexAttribArray(ld),Cb.buffer=null),Cb.x!==jc||Cb.y!==Tc||Cb.z!==Xa||Cb.w!==cb)fa.vertexAttrib4f(ld,jc,Tc,Xa,cb),Cb.x=jc,Cb.y=Tc,Cb.z=Xa,Cb.w=cb;Wb=
t.call(this,n,c,0);tc=!1;Xb=null;Sb=0;Kc=!1;Vd=Tb=0;Dc=1;zd=0;Mc=5126;wc=oc=qd=Yc=0;E(Wb)?(tc=!0,Xb=u.createStream(34962,Wb),Mc=Xb.dtype):(Xb=u.getBuffer(Wb))?Mc=Xb.dtype:"constant"in Wb?(Dc=2,"number"===typeof Wb.constant?(qd=Wb.constant,oc=wc=Yc=0):(qd=0<Wb.constant.length?Wb.constant[0]:0,oc=1<Wb.constant.length?Wb.constant[1]:0,wc=2<Wb.constant.length?Wb.constant[2]:0,Yc=3<Wb.constant.length?Wb.constant[3]:0)):(Xb=E(Wb.buffer)?u.createStream(34962,Wb.buffer):u.getBuffer(Wb.buffer),Mc="type"in
Wb?fe[Wb.type]:Xb.dtype,Kc=!!Wb.normalized,Vd=Wb.size|0,Tb=Wb.offset|0,zd=Wb.stride|0,Sb=Wb.divisor|0);hc=oa.location;eb=Za[hc];if(1===Dc){eb.buffer||fa.enableVertexAttribArray(hc);sc=Vd||1;if(eb.type!==Mc||eb.size!==sc||eb.buffer!==Xb||eb.normalized!==Kc||eb.offset!==Tb||eb.stride!==zd)fa.bindBuffer(34962,Xb.buffer),fa.vertexAttribPointer(hc,sc,Mc,Kc,zd,Tb),eb.type=Mc,eb.size=sc,eb.buffer=Xb,eb.normalized=Kc,eb.offset=Tb,eb.stride=zd;eb.divisor!==Sb&&(T.vertexAttribDivisorANGLE(hc,Sb),eb.divisor=
Sb)}else if(eb.buffer&&(fa.disableVertexAttribArray(hc),eb.buffer=null),eb.x!==qd||eb.y!==oc||eb.z!==wc||eb.w!==Yc)fa.vertexAttrib4f(hc,qd,oc,wc,Yc),eb.x=qd,eb.y=oc,eb.z=wc,eb.w=Yc;Vb=y.call(this,n,c,0);Yb=!1;dc=null;ic=0;yc=!1;cd=Ac=0;Qc=1;Rc=0;Uc=5126;$c=dd=md=Zc=0;E(Vb)?(Yb=!0,dc=u.createStream(34962,Vb),Uc=dc.dtype):(dc=u.getBuffer(Vb))?Uc=dc.dtype:"constant"in Vb?(Qc=2,"number"===typeof Vb.constant?(md=Vb.constant,dd=$c=Zc=0):(md=0<Vb.constant.length?Vb.constant[0]:0,dd=1<Vb.constant.length?
Vb.constant[1]:0,$c=2<Vb.constant.length?Vb.constant[2]:0,Zc=3<Vb.constant.length?Vb.constant[3]:0)):(dc=E(Vb.buffer)?u.createStream(34962,Vb.buffer):u.getBuffer(Vb.buffer),Uc="type"in Vb?fe[Vb.type]:dc.dtype,yc=!!Vb.normalized,cd=Vb.size|0,Ac=Vb.offset|0,Rc=Vb.stride|0,ic=Vb.divisor|0);kc=v.location;cc=Za[kc];if(1===Qc){cc.buffer||fa.enableVertexAttribArray(kc);ad=cd||4;if(cc.type!==Uc||cc.size!==ad||cc.buffer!==dc||cc.normalized!==yc||cc.offset!==Ac||cc.stride!==Rc)fa.bindBuffer(34962,dc.buffer),
fa.vertexAttribPointer(kc,ad,Uc,yc,Rc,Ac),cc.type=Uc,cc.size=ad,cc.buffer=dc,cc.normalized=yc,cc.offset=Ac,cc.stride=Rc;cc.divisor!==ic&&(T.vertexAttribDivisorANGLE(kc,ic),cc.divisor=ic)}else if(cc.buffer&&(fa.disableVertexAttribArray(kc),cc.buffer=null),cc.x!==md||cc.y!==dd||cc.z!==$c||cc.w!==Zc)fa.vertexAttrib4f(kc,md,dd,$c,Zc),cc.x=md,cc.y=dd,cc.z=$c,cc.w=Zc;Wc=p.call(this,n,c,0);ed=!1;zc=null;id=0;Ad=!1;Ie=He=0;jd=1;bf=0;Bd=5126;Jd=Yd=ce=ge=0;E(Wc)?(ed=!0,zc=u.createStream(34962,Wc),Bd=zc.dtype):
(zc=u.getBuffer(Wc))?Bd=zc.dtype:"constant"in Wc?(jd=2,"number"===typeof Wc.constant?(ce=Wc.constant,Yd=Jd=ge=0):(ce=0<Wc.constant.length?Wc.constant[0]:0,Yd=1<Wc.constant.length?Wc.constant[1]:0,Jd=2<Wc.constant.length?Wc.constant[2]:0,ge=3<Wc.constant.length?Wc.constant[3]:0)):(zc=E(Wc.buffer)?u.createStream(34962,Wc.buffer):u.getBuffer(Wc.buffer),Bd="type"in Wc?fe[Wc.type]:zc.dtype,Ad=!!Wc.normalized,Ie=Wc.size|0,He=Wc.offset|0,bf=Wc.stride|0,id=Wc.divisor|0);Hd=qa.location;od=Za[Hd];if(1===jd){od.buffer||
fa.enableVertexAttribArray(Hd);Vc=Ie||4;if(od.type!==Bd||od.size!==Vc||od.buffer!==zc||od.normalized!==Ad||od.offset!==He||od.stride!==bf)fa.bindBuffer(34962,zc.buffer),fa.vertexAttribPointer(Hd,Vc,Bd,Ad,bf,He),od.type=Bd,od.size=Vc,od.buffer=zc,od.normalized=Ad,od.offset=He,od.stride=bf;od.divisor!==id&&(T.vertexAttribDivisorANGLE(Hd,id),od.divisor=id)}else if(od.buffer&&(fa.disableVertexAttribArray(Hd),od.buffer=null),od.x!==ce||od.y!==Yd||od.z!==Jd||od.w!==ge)fa.vertexAttrib4f(Hd,ce,Yd,Jd,ge),
od.x=ce,od.y=Yd,od.z=Jd,od.w=ge;ud=h.call(this,n,c,0);sd=!1;kd=null;vd=0;Cd=!1;re=Dd=0;je=1;se=0;ke=5126;de=te=he=ie=0;E(ud)?(sd=!0,kd=u.createStream(34962,ud),ke=kd.dtype):(kd=u.getBuffer(ud))?ke=kd.dtype:"constant"in ud?(je=2,"number"===typeof ud.constant?(he=ud.constant,te=de=ie=0):(he=0<ud.constant.length?ud.constant[0]:0,te=1<ud.constant.length?ud.constant[1]:0,de=2<ud.constant.length?ud.constant[2]:0,ie=3<ud.constant.length?ud.constant[3]:0)):(kd=E(ud.buffer)?u.createStream(34962,ud.buffer):
u.getBuffer(ud.buffer),ke="type"in ud?fe[ud.type]:kd.dtype,Cd=!!ud.normalized,re=ud.size|0,Dd=ud.offset|0,se=ud.stride|0,vd=ud.divisor|0);le=ca.location;Nc=Za[le];if(1===je){Nc.buffer||fa.enableVertexAttribArray(le);hd=re||1;if(Nc.type!==ke||Nc.size!==hd||Nc.buffer!==kd||Nc.normalized!==Cd||Nc.offset!==Dd||Nc.stride!==se)fa.bindBuffer(34962,kd.buffer),fa.vertexAttribPointer(le,hd,ke,Cd,se,Dd),Nc.type=ke,Nc.size=hd,Nc.buffer=kd,Nc.normalized=Cd,Nc.offset=Dd,Nc.stride=se;Nc.divisor!==vd&&(T.vertexAttribDivisorANGLE(le,
vd),Nc.divisor=vd)}else if(Nc.buffer&&(fa.disableVertexAttribArray(le),Nc.buffer=null),Nc.x!==he||Nc.y!==te||Nc.z!==de||Nc.w!==ie)fa.vertexAttrib4f(le,he,te,de,ie),Nc.x=he,Nc.y=te,Nc.z=de,Nc.w=ie;fa.uniform1i(G.location,!1);fa.uniform1f(Ca.location,n.pixelRatio);ue=N.call(this,n,c,0);fa.uniform2f(la.location,ue[0],ue[1]);oe=c.scale;fa.uniform2f(xa.location,oe[0],oe[1]);Ld=c.scaleFract;fa.uniform2f(ea.location,Ld[0],Ld[1]);Pd=c.translate;fa.uniform2f(ja.location,Pd[0],Pd[1]);Qd=c.translateFract;fa.uniform2f(pa.location,
Qd[0],Qd[1]);fa.uniform1f(W.location,c.opacity);fa.uniform1i(ra.location,w.bind());Rd=c.elements;me=null;(me=(ye=E(Rd))?wa.createStream(Rd):wa.getElements(Rd))&&fa.bindBuffer(34963,me.buffer.buffer);Be=c.offset;if(pe=c.count)hf=ua.instances,0<hf?me?T.drawElementsInstancedANGLE(0,pe,me.type,Be<<(me.type-5121>>1),hf):T.drawArraysInstancedANGLE(0,Be,pe,hf):0>hf&&(me?fa.drawElements(0,pe,me.type,Be<<(me.type-5121>>1)):fa.drawArrays(0,Be,pe)),R.dirty=!0,Aa.setVAO(null),n.viewportWidth=r,n.viewportHeight=
A,F&&(ma.cpuTime+=performance.now()-sa),P&&u.destroyStream(H),ya&&u.destroyStream(za),Fb&&u.destroyStream(yb),Ka&&u.destroyStream(mb),$b&&u.destroyStream(Ra),tc&&u.destroyStream(Xb),Yb&&u.destroyStream(dc),ed&&u.destroyStream(zc),sd&&u.destroyStream(kd),w.unbind(),ye&&wa.destroyStream(me)},scope:function(b,d,a){var e,q,v,Z,m,A,t,h,p,G,Q,y,W,F,T,ea,ga,fa,zb,K,P,D,Ma,w,N,O,Y,ca,Aa,xa,ra,qa,ba,ja,X,da,Za,pa,ka,Da,la,oa,Ba,na,va,lc,Ca,za,Ha,Ga,Qa,ob,ia,Ub,ac,Ta,Rb,qb,Ud,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,
vb,ub,Oa,xd,Sa,Lb,Gb,La,Pa,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,wd,vc,cb,jc,Tc,Xa,Nd,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,ae,Dc,ze,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,ne,xe,Kd,jd,we,Bd,ge,ce,Yd,Jd,Hd,od,Vc,ud,sd,kd,vd,Cd,Dd,re,je,se,ke,ie,he,te,de,le,Nc,hd,ue,oe,Ld,Pd,Qd,Rd,me,ye,Be,pe,Vf,Te,Pe,ve,Fe,Je,Ke,Le,Ge,Md,Wd,be,ee,Me,Id,Sd,De,Ne,af,$e,Ue,Qe,Ze,Ye,Ve,We,Td,Zd,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Re,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,
Qf,Hf,uf,dg,Rf,Sf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Tf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Uf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;e=b.viewport;q=e.x|0;v=e.y|0;Z="width"in e?e.width|0:n.framebufferWidth-q;m="height"in e?e.height|0:n.framebufferHeight-v;A=n.viewportWidth;n.viewportWidth=Z;t=n.viewportHeight;n.viewportHeight=m;h=Vd[0];Vd[0]=q;p=Vd[1];Vd[1]=v;G=Vd[2];Vd[2]=Z;Q=Vd[3];Vd[3]=m;y=Ea[0];Ea[0]=0;W=Ea[1];Ea[1]=0;F=Ea[2];Ea[2]=0;T=Ea[3];Ea[3]=
1;ea=ta.blend_enable;ta.blend_enable=!0;ga=Ya[0];Ya[0]=770;fa=Ya[1];Ya[1]=771;zb=Ya[2];Ya[2]=773;K=Ya[3];Ya[3]=1;P=ta.depth_enable;ta.depth_enable=!1;D=b.viewport;Ma=D.x|0;w=D.y|0;N="width"in D?D.width|0:n.framebufferWidth-Ma;O="height"in D?D.height|0:n.framebufferHeight-w;Y=Ed[0];Ed[0]=Ma;ca=Ed[1];Ed[1]=w;Aa=Ed[2];Ed[2]=N;xa=Ed[3];Ed[3]=O;ra=ta.scissor_enable;ta.scissor_enable=!0;qa=ta.stencil_enable;ta.stencil_enable=!1;if(ba=R.profile)ja=performance.now(),ma.count++;X=b.elements;da=null;da=(Za=
E(X))?wa.createStream(X):wa.getElements(X);pa=ua.elements;ua.elements=da;ka=b.offset;Da=ua.offset;ua.offset=ka;la=b.count;oa=ua.count;ua.count=la;Ba=ua.primitive;ua.primitive=0;na=sa[45];sa[45]=!1;va=b.markerTexture;lc=sa[48];sa[48]=va;Ca=b.opacity;za=sa[10];sa[10]=Ca;Ha=J.call(this,n,b,a);Ga=sa[46];sa[46]=Ha;Qa=sa[47];sa[47]=aa;ob=n.pixelRatio;ia=sa[34];sa[34]=ob;Ub=b.scale;ac=sa[6];sa[6]=Ub;Ta=b.scaleFract;Rb=sa[7];sa[7]=Ta;qb=b.translate;Ud=sa[8];sa[8]=qb;jb=b.translateFract;rb=sa[9];sa[9]=jb;
Ia=x.call(this,n,b,a);tb=!1;Ja=null;fb=0;hb=!1;mb=Ka=0;Wa=1;vb=0;ub=5126;Lb=Sa=xd=Oa=0;E(Ia)?(tb=!0,Ja=u.createStream(34962,Ia),ub=Ja.dtype):(Ja=u.getBuffer(Ia))?ub=Ja.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(xd=Ia.constant,Sa=Lb=Oa=0):(xd=0<Ia.constant.length?Ia.constant[0]:0,Sa=1<Ia.constant.length?Ia.constant[1]:0,Lb=2<Ia.constant.length?Ia.constant[2]:0,Oa=3<Ia.constant.length?Ia.constant[3]:0)):(Ja=E(Ia.buffer)?u.createStream(34962,Ia.buffer):u.getBuffer(Ia.buffer),ub="type"in
Ia?fe[Ia.type]:Ja.dtype,hb=!!Ia.normalized,mb=Ia.size|0,Ka=Ia.offset|0,vb=Ia.stride|0,fb=Ia.divisor|0);Gb=S.buffer;S.buffer=Ja;La=S.divisor;S.divisor=fb;Pa=S.normalized;S.normalized=hb;$a=S.offset;S.offset=Ka;Mb=S.size;S.size=mb;Nb=S.state;S.state=Wa;nb=S.stride;S.stride=vb;Na=S.type;S.type=ub;$b=S.w;S.w=Oa;Ra=S.x;S.x=xd;wb=S.y;S.y=Sa;xb=S.z;S.z=Lb;Ua=r.call(this,n,b,a);pb=!1;gc=null;wd=0;vc=!1;jc=cb=0;Tc=1;Xa=0;Nd=5126;tc=Wb=ab=Cb=0;E(Ua)?(pb=!0,gc=u.createStream(34962,Ua),Nd=gc.dtype):(gc=u.getBuffer(Ua))?
Nd=gc.dtype:"constant"in Ua?(Tc=2,"number"===typeof Ua.constant?(ab=Ua.constant,Wb=tc=Cb=0):(ab=0<Ua.constant.length?Ua.constant[0]:0,Wb=1<Ua.constant.length?Ua.constant[1]:0,tc=2<Ua.constant.length?Ua.constant[2]:0,Cb=3<Ua.constant.length?Ua.constant[3]:0)):(gc=E(Ua.buffer)?u.createStream(34962,Ua.buffer):u.getBuffer(Ua.buffer),Nd="type"in Ua?fe[Ua.type]:gc.dtype,vc=!!Ua.normalized,jc=Ua.size|0,cb=Ua.offset|0,Xa=Ua.stride|0,wd=Ua.divisor|0);Xb=L.buffer;L.buffer=gc;Sb=L.divisor;L.divisor=wd;Kc=L.normalized;
L.normalized=vc;Tb=L.offset;L.offset=cb;ae=L.size;L.size=jc;Dc=L.state;L.state=Tc;ze=L.stride;L.stride=Xa;Mc=L.type;L.type=Nd;Yc=L.w;L.w=Cb;qd=L.x;L.x=ab;oc=L.y;L.y=Wb;wc=L.z;L.z=tc;hc=I.call(this,n,b,a);eb=!1;sc=null;Vb=0;Yb=!1;ic=dc=0;yc=1;Ac=0;cd=5126;Zc=Uc=Rc=Qc=0;E(hc)?(eb=!0,sc=u.createStream(34962,hc),cd=sc.dtype):(sc=u.getBuffer(hc))?cd=sc.dtype:"constant"in hc?(yc=2,"number"===typeof hc.constant?(Rc=hc.constant,Uc=Zc=Qc=0):(Rc=0<hc.constant.length?hc.constant[0]:0,Uc=1<hc.constant.length?
hc.constant[1]:0,Zc=2<hc.constant.length?hc.constant[2]:0,Qc=3<hc.constant.length?hc.constant[3]:0)):(sc=E(hc.buffer)?u.createStream(34962,hc.buffer):u.getBuffer(hc.buffer),cd="type"in hc?fe[hc.type]:sc.dtype,Yb=!!hc.normalized,ic=hc.size|0,dc=hc.offset|0,Ac=hc.stride|0,Vb=hc.divisor|0);md=k.buffer;k.buffer=sc;dd=k.divisor;k.divisor=Vb;$c=k.normalized;k.normalized=Yb;kc=k.offset;k.offset=dc;cc=k.size;k.size=ic;ad=k.state;k.state=yc;Wc=k.stride;k.stride=Ac;ed=k.type;k.type=cd;zc=k.w;k.w=Qc;id=k.x;
k.x=Rc;ne=k.y;k.y=Uc;xe=k.z;k.z=Zc;Kd=f.call(this,n,b,a);jd=!1;we=null;Bd=0;ge=!1;Yd=ce=0;Jd=1;Hd=0;od=5126;kd=sd=ud=Vc=0;E(Kd)?(jd=!0,we=u.createStream(34962,Kd),od=we.dtype):(we=u.getBuffer(Kd))?od=we.dtype:"constant"in Kd?(Jd=2,"number"===typeof Kd.constant?(ud=Kd.constant,sd=kd=Vc=0):(ud=0<Kd.constant.length?Kd.constant[0]:0,sd=1<Kd.constant.length?Kd.constant[1]:0,kd=2<Kd.constant.length?Kd.constant[2]:0,Vc=3<Kd.constant.length?Kd.constant[3]:0)):(we=E(Kd.buffer)?u.createStream(34962,Kd.buffer):
u.getBuffer(Kd.buffer),od="type"in Kd?fe[Kd.type]:we.dtype,ge=!!Kd.normalized,Yd=Kd.size|0,ce=Kd.offset|0,Hd=Kd.stride|0,Bd=Kd.divisor|0);vd=U.buffer;U.buffer=we;Cd=U.divisor;U.divisor=Bd;Dd=U.normalized;U.normalized=ge;re=U.offset;U.offset=ce;je=U.size;U.size=Yd;se=U.state;U.state=Jd;ke=U.stride;U.stride=Hd;ie=U.type;U.type=od;he=U.w;U.w=Vc;te=U.x;U.x=ud;de=U.y;U.y=sd;le=U.z;U.z=kd;Nc=z.call(this,n,b,a);hd=!1;ue=null;oe=0;Ld=!1;Qd=Pd=0;Rd=1;me=0;ye=5126;Te=Vf=pe=Be=0;E(Nc)?(hd=!0,ue=u.createStream(34962,
Nc),ye=ue.dtype):(ue=u.getBuffer(Nc))?ye=ue.dtype:"constant"in Nc?(Rd=2,"number"===typeof Nc.constant?(pe=Nc.constant,Vf=Te=Be=0):(pe=0<Nc.constant.length?Nc.constant[0]:0,Vf=1<Nc.constant.length?Nc.constant[1]:0,Te=2<Nc.constant.length?Nc.constant[2]:0,Be=3<Nc.constant.length?Nc.constant[3]:0)):(ue=E(Nc.buffer)?u.createStream(34962,Nc.buffer):u.getBuffer(Nc.buffer),ye="type"in Nc?fe[Nc.type]:ue.dtype,Ld=!!Nc.normalized,Qd=Nc.size|0,Pd=Nc.offset|0,me=Nc.stride|0,oe=Nc.divisor|0);Pe=V.buffer;V.buffer=
ue;ve=V.divisor;V.divisor=oe;Fe=V.normalized;V.normalized=Ld;Je=V.offset;V.offset=Pd;Ke=V.size;V.size=Qd;Le=V.state;V.state=Rd;Ge=V.stride;V.stride=me;Md=V.type;V.type=ye;Wd=V.w;V.w=Be;be=V.x;V.x=pe;ee=V.y;V.y=Vf;Me=V.z;V.z=Te;Id=B.call(this,n,b,a);Sd=!1;De=null;Ne=0;af=!1;Ue=$e=0;Qe=1;Ze=0;Ye=5126;Zd=Td=We=Ve=0;E(Id)?(Sd=!0,De=u.createStream(34962,Id),Ye=De.dtype):(De=u.getBuffer(Id))?Ye=De.dtype:"constant"in Id?(Qe=2,"number"===typeof Id.constant?(We=Id.constant,Td=Zd=Ve=0):(We=0<Id.constant.length?
Id.constant[0]:0,Td=1<Id.constant.length?Id.constant[1]:0,Zd=2<Id.constant.length?Id.constant[2]:0,Ve=3<Id.constant.length?Id.constant[3]:0)):(De=E(Id.buffer)?u.createStream(34962,Id.buffer):u.getBuffer(Id.buffer),Ye="type"in Id?fe[Id.type]:De.dtype,af=!!Id.normalized,Ue=Id.size|0,$e=Id.offset|0,Ze=Id.stride|0,Ne=Id.divisor|0);Xe=l.buffer;l.buffer=De;jf=l.divisor;l.divisor=Ne;nf=l.normalized;l.normalized=af;ef=l.offset;l.offset=$e;kf=l.size;l.size=Ue;lf=l.state;l.state=Qe;mf=l.stride;l.stride=Ze;
rf=l.type;l.type=Ye;of=l.w;l.w=Ve;sf=l.x;l.x=We;Bf=l.y;l.y=Td;Cf=l.z;l.z=Zd;Re=ya.call(this,n,b,a);Ee=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;E(Re)?(Ee=!0,pf=u.createStream(34962,Re),wf=pf.dtype):(pf=u.getBuffer(Re))?wf=pf.dtype:"constant"in Re?(Ef=2,"number"===typeof Re.constant?(vf=Re.constant,yf=zf=xf=0):(vf=0<Re.constant.length?Re.constant[0]:0,yf=1<Re.constant.length?Re.constant[1]:0,zf=2<Re.constant.length?Re.constant[2]:0,xf=3<Re.constant.length?Re.constant[3]:0)):(pf=
E(Re.buffer)?u.createStream(34962,Re.buffer):u.getBuffer(Re.buffer),wf="type"in Re?fe[Re.type]:pf.dtype,Df=!!Re.normalized,Af=Re.size|0,Gf=Re.offset|0,Ff=Re.stride|0,qf=Re.divisor|0);If=H.buffer;H.buffer=pf;Jf=H.divisor;H.divisor=qf;Kf=H.normalized;H.normalized=Df;Lf=H.offset;H.offset=Gf;tf=H.size;H.size=Af;Qf=H.state;H.state=Ef;Hf=H.stride;H.stride=Ff;uf=H.type;H.type=wf;dg=H.w;H.w=xf;Rf=H.x;H.x=vf;Sf=H.y;H.y=yf;qg=H.z;H.z=zf;ff=C.call(this,n,b,a);cf=!1;Mf=null;Nf=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;
Zf=Yf=Xf=Tf=0;E(ff)?(cf=!0,Mf=u.createStream(34962,ff),Wf=Mf.dtype):(Mf=u.getBuffer(ff))?Wf=Mf.dtype:"constant"in ff?(hg=2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Tf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Tf=3<ff.constant.length?ff.constant[3]:0)):(Mf=E(ff.buffer)?u.createStream(34962,ff.buffer):u.getBuffer(ff.buffer),Wf="type"in ff?fe[ff.type]:Mf.dtype,eg=!!ff.normalized,gg=ff.size|0,fg=ff.offset|
0,ig=ff.stride|0,Nf=ff.divisor|0);jg=c.buffer;c.buffer=Mf;rg=c.divisor;c.divisor=Nf;sg=c.normalized;c.normalized=eg;tg=c.offset;c.offset=fg;ug=c.size;c.size=gg;vg=c.state;c.state=hg;wg=c.stride;c.stride=ig;xg=c.type;c.type=Wf;yg=c.w;c.w=Tf;zg=c.x;c.x=Xf;Ag=c.y;c.y=Yf;Bg=c.z;c.z=Zf;gf=M.call(this,n,b,a);df=!1;Of=null;Pf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Uf=0;E(gf)?(df=!0,Of=u.createStream(34962,gf),$f=Of.dtype):(Of=u.getBuffer(gf))?$f=Of.dtype:"constant"in gf?(ng=2,"number"===typeof gf.constant?
(ag=gf.constant,bg=cg=Uf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Of=E(gf.buffer)?u.createStream(34962,gf.buffer):u.getBuffer(gf.buffer),$f="type"in gf?fe[gf.type]:Of.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Pf=gf.divisor|0);pg=g.buffer;g.buffer=Of;Cg=g.divisor;g.divisor=Pf;Dg=g.normalized;g.normalized=kg;Eg=g.offset;g.offset=lg;Fg=g.size;g.size=
mg;Gg=g.state;g.state=ng;Hg=g.stride;g.stride=og;Ig=g.type;g.type=$f;Jg=g.w;g.w=Uf;Kg=g.x;g.x=ag;Lg=g.y;g.y=bg;Mg=g.z;g.z=cg;Ng=Fa.vert;Fa.vert=59;Og=Fa.frag;Fa.frag=58;R.dirty=!0;d(n,b,a);n.viewportWidth=A;n.viewportHeight=t;Vd[0]=h;Vd[1]=p;Vd[2]=G;Vd[3]=Q;Ea[0]=y;Ea[1]=W;Ea[2]=F;Ea[3]=T;ta.blend_enable=ea;Ya[0]=ga;Ya[1]=fa;Ya[2]=zb;Ya[3]=K;ta.depth_enable=P;Ed[0]=Y;Ed[1]=ca;Ed[2]=Aa;Ed[3]=xa;ta.scissor_enable=ra;ta.stencil_enable=qa;ba&&(ma.cpuTime+=performance.now()-ja);Za&&wa.destroyStream(da);
ua.elements=pa;ua.offset=Da;ua.count=oa;ua.primitive=Ba;sa[45]=na;sa[48]=lc;sa[10]=za;sa[46]=Ga;sa[47]=Qa;sa[34]=ia;sa[6]=ac;sa[7]=Rb;sa[8]=Ud;sa[9]=rb;tb&&u.destroyStream(Ja);S.buffer=Gb;S.divisor=La;S.normalized=Pa;S.offset=$a;S.size=Mb;S.state=Nb;S.stride=nb;S.type=Na;S.w=$b;S.x=Ra;S.y=wb;S.z=xb;pb&&u.destroyStream(gc);L.buffer=Xb;L.divisor=Sb;L.normalized=Kc;L.offset=Tb;L.size=ae;L.state=Dc;L.stride=ze;L.type=Mc;L.w=Yc;L.x=qd;L.y=oc;L.z=wc;eb&&u.destroyStream(sc);k.buffer=md;k.divisor=dd;k.normalized=
$c;k.offset=kc;k.size=cc;k.state=ad;k.stride=Wc;k.type=ed;k.w=zc;k.x=id;k.y=ne;k.z=xe;jd&&u.destroyStream(we);U.buffer=vd;U.divisor=Cd;U.normalized=Dd;U.offset=re;U.size=je;U.state=se;U.stride=ke;U.type=ie;U.w=he;U.x=te;U.y=de;U.z=le;hd&&u.destroyStream(ue);V.buffer=Pe;V.divisor=ve;V.normalized=Fe;V.offset=Je;V.size=Ke;V.state=Le;V.stride=Ge;V.type=Md;V.w=Wd;V.x=be;V.y=ee;V.z=Me;Sd&&u.destroyStream(De);l.buffer=Xe;l.divisor=jf;l.normalized=nf;l.offset=ef;l.size=kf;l.state=lf;l.stride=mf;l.type=rf;
l.w=of;l.x=sf;l.y=Bf;l.z=Cf;Ee&&u.destroyStream(pf);H.buffer=If;H.divisor=Jf;H.normalized=Kf;H.offset=Lf;H.size=tf;H.state=Qf;H.stride=Hf;H.type=uf;H.w=dg;H.x=Rf;H.y=Sf;H.z=qg;cf&&u.destroyStream(Mf);c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;df&&u.destroyStream(Of);g.buffer=pg;g.divisor=Cg;g.normalized=Dg;g.offset=Eg;g.size=Fg;g.state=Gg;g.stride=Hg;g.type=Ig;g.w=Jg;g.x=Kg;g.y=Lg;g.z=Mg;Fa.vert=Ng;Fa.frag=Og;R.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,ma,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,I,H,C,c,M,g,ka,A,na,za,X,da){var T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,Qa,lc,fa,E,ta,Fa,sa,Aa,Ea,ga,Y;T=a.attributes;Q=a.buffer;F=a.context;q=a.current;O=a.draw;P=a.elements;qa=a.extensions;oa=a.framebuffer;v=a.gl;G=a.isBufferArgs;ca=a.next;W=a.shader;
la=a.uniforms;ra=a.vao;Ca=ca.blend_color;xa=q.blend_color;ea=ca.blend_equation;Da=q.blend_equation;ja=ca.blend_func;pa=q.blend_func;Ba=ca.colorMask;Ma=q.colorMask;Z=ca.depth_range;zb=q.depth_range;Za=ca.polygonOffset_offset;u=q.polygonOffset_offset;n=ca.sample_coverage;R=q.sample_coverage;ua=ca.scissor_box;wa=q.scissor_box;Qa=ca.stencil_func;lc=q.stencil_func;fa=ca.stencil_opBack;E=q.stencil_opBack;ta=ca.stencil_opFront;Fa=q.stencil_opFront;sa=ca.viewport;Aa=q.viewport;Ea={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(b,d){var a,e,m,t,h,p,x,y,W,sa,K,D,w;a=oa.next;a!==oa.cur&&(a?v.bindFramebuffer(36160,a.framebuffer):v.bindFramebuffer(36160,null),oa.cur=a);if(q.dirty){var N,J,aa,ja,la,Ca,ia,Pa,Ce,Oe,Se,Fd,Ae,qe,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec;N=ca.dither;N!==q.dither&&(N?v.enable(3024):v.disable(3024),q.dither=N);J=ea[0];aa=ea[1];if(J!==Da[0]||
aa!==Da[1])v.blendEquationSeparate(J,aa),Da[0]=J,Da[1]=aa;ja=ca.depth_func;ja!==q.depth_func&&(v.depthFunc(ja),q.depth_func=ja);la=Z[0];Ca=Z[1];if(la!==zb[0]||Ca!==zb[1])v.depthRange(la,Ca),zb[0]=la,zb[1]=Ca;ia=ca.depth_mask;ia!==q.depth_mask&&(v.depthMask(ia),q.depth_mask=ia);Pa=Ba[0];Ce=Ba[1];Oe=Ba[2];Se=Ba[3];if(Pa!==Ma[0]||Ce!==Ma[1]||Oe!==Ma[2]||Se!==Ma[3])v.colorMask(Pa,Ce,Oe,Se),Ma[0]=Pa,Ma[1]=Ce,Ma[2]=Oe,Ma[3]=Se;Fd=ca.cull_enable;Fd!==q.cull_enable&&(Fd?v.enable(2884):v.disable(2884),q.cull_enable=
Fd);Ae=ca.cull_face;Ae!==q.cull_face&&(v.cullFace(Ae),q.cull_face=Ae);qe=ca.frontFace;qe!==q.frontFace&&(v.frontFace(qe),q.frontFace=qe);Xd=ca.lineWidth;Xd!==q.lineWidth&&(v.lineWidth(Xd),q.lineWidth=Xd);Od=ca.polygonOffset_enable;Od!==q.polygonOffset_enable&&(Od?v.enable(32823):v.disable(32823),q.polygonOffset_enable=Od);Gd=Za[0];nd=Za[1];if(Gd!==u[0]||nd!==u[1])v.polygonOffset(Gd,nd),u[0]=Gd,u[1]=nd;bd=ca.sample_alpha;bd!==q.sample_alpha&&(bd?v.enable(32926):v.disable(32926),q.sample_alpha=bd);
rd=ca.sample_enable;rd!==q.sample_enable&&(rd?v.enable(32928):v.disable(32928),q.sample_enable=rd);Lc=n[0];pd=n[1];if(Lc!==R[0]||pd!==R[1])v.sampleCoverage(Lc,pd),R[0]=Lc,R[1]=pd;Fc=ca.stencil_mask;Fc!==q.stencil_mask&&(v.stencilMask(Fc),q.stencil_mask=Fc);fd=Qa[0];Oc=Qa[1];Ic=Qa[2];if(fd!==lc[0]||Oc!==lc[1]||Ic!==lc[2])v.stencilFunc(fd,Oc,Ic),lc[0]=fd,lc[1]=Oc,lc[2]=Ic;Db=ta[0];Hb=ta[1];uc=ta[2];Ab=ta[3];if(Db!==Fa[0]||Hb!==Fa[1]||uc!==Fa[2]||Ab!==Fa[3])v.stencilOpSeparate(Db,Hb,uc,Ab),Fa[0]=Db,
Fa[1]=Hb,Fa[2]=uc,Fa[3]=Ab;xc=fa[0];Eb=fa[1];Jc=fa[2];mc=fa[3];if(xc!==E[0]||Eb!==E[1]||Jc!==E[2]||mc!==E[3])v.stencilOpSeparate(xc,Eb,Jc,mc),E[0]=xc,E[1]=Eb,E[2]=Jc,E[3]=mc;Gc=ca.scissor_enable;Gc!==q.scissor_enable&&(Gc?v.enable(3089):v.disable(3089),q.scissor_enable=Gc);gd=ua[0];Xc=ua[1];Cc=ua[2];ec=ua[3];if(gd!==wa[0]||Xc!==wa[1]||Cc!==wa[2]||ec!==wa[3])v.scissor(gd,Xc,Cc,ec),wa[0]=gd,wa[1]=Xc,wa[2]=Cc,wa[3]=ec}e=this.viewport;m=e.x|0;t=e.y|0;h="width"in e?e.width|0:F.framebufferWidth-m;p="height"in
e?e.height|0:F.framebufferHeight-t;x=F.viewportWidth;F.viewportWidth=h;y=F.viewportHeight;F.viewportHeight=p;v.viewport(m,t,h,p);Aa[0]=m;Aa[1]=t;Aa[2]=h;Aa[3]=p;v.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;v.enable(3042);q.blend_enable=!0;v.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;v.disable(2929);q.depth_enable=!1;v.disable(2960);q.stencil_enable=!1;if(W=q.profile)sa=performance.now(),ma.count+=d;v.useProgram(S.program);K=qa.angle_instanced_arrays;var Hc,pc,
qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb;ra.setVAO(null);Y.buffer=this.sizeBuffer;Hc=!1;pc=null;qc=0;nc=!1;gb=fc=0;Sc=1;Bb=0;db=5126;Va=kb=bb=Ob=0;G(Y)?(Hc=!0,pc=Q.createStream(34962,Y),db=pc.dtype):(pc=Q.getBuffer(Y))?db=pc.dtype:"constant"in Y?(Sc=2,"number"===typeof Y.constant?(bb=Y.constant,kb=Va=Ob=0):(bb=0<Y.constant.length?Y.constant[0]:
0,kb=1<Y.constant.length?Y.constant[1]:0,Va=2<Y.constant.length?Y.constant[2]:0,Ob=3<Y.constant.length?Y.constant[3]:0)):(pc=G(Y.buffer)?Q.createStream(34962,Y.buffer):Q.getBuffer(Y.buffer),db="type"in Y?Ea[Y.type]:pc.dtype,nc=!!Y.normalized,gb=Y.size|0,fc=Y.offset|0,Bb=Y.stride|0,qc=Y.divisor|0);yd=da.location;Jb=T[yd];if(1===Sc){Jb.buffer||v.enableVertexAttribArray(yd);Kb=gb||1;if(Jb.type!==db||Jb.size!==Kb||Jb.buffer!==pc||Jb.normalized!==nc||Jb.offset!==fc||Jb.stride!==Bb)v.bindBuffer(34962,pc.buffer),
v.vertexAttribPointer(yd,Kb,db,nc,Bb,fc),Jb.type=db,Jb.size=Kb,Jb.buffer=pc,Jb.normalized=nc,Jb.offset=fc,Jb.stride=Bb;Jb.divisor!==qc&&(K.vertexAttribDivisorANGLE(yd,qc),Jb.divisor=qc)}else if(Jb.buffer&&(v.disableVertexAttribArray(yd),Jb.buffer=null),Jb.x!==bb||Jb.y!==kb||Jb.z!==Va||Jb.w!==Ob)v.vertexAttrib4f(yd,bb,kb,Va,Ob),Jb.x=bb,Jb.y=kb,Jb.z=Va,Jb.w=Ob;ga.buffer=this.sizeBuffer;rc=!1;Pb=null;lb=0;Ib=!1;yb=Fb=0;ib=1;Zb=0;Qb=5126;qb=Rb=Ta=sb=0;G(ga)?(rc=!0,Pb=Q.createStream(34962,ga),Qb=Pb.dtype):
(Pb=Q.getBuffer(ga))?Qb=Pb.dtype:"constant"in ga?(ib=2,"number"===typeof ga.constant?(Ta=ga.constant,Rb=qb=sb=0):(Ta=0<ga.constant.length?ga.constant[0]:0,Rb=1<ga.constant.length?ga.constant[1]:0,qb=2<ga.constant.length?ga.constant[2]:0,sb=3<ga.constant.length?ga.constant[3]:0)):(Pb=G(ga.buffer)?Q.createStream(34962,ga.buffer):Q.getBuffer(ga.buffer),Qb="type"in ga?Ea[ga.type]:Pb.dtype,Ib=!!ga.normalized,yb=ga.size|0,Fb=ga.offset|0,Zb=ga.stride|0,lb=ga.divisor|0);bc=H.location;jb=T[bc];if(1===ib){jb.buffer||
v.enableVertexAttribArray(bc);rb=yb||1;if(jb.type!==Qb||jb.size!==rb||jb.buffer!==Pb||jb.normalized!==Ib||jb.offset!==Fb||jb.stride!==Zb)v.bindBuffer(34962,Pb.buffer),v.vertexAttribPointer(bc,rb,Qb,Ib,Zb,Fb),jb.type=Qb,jb.size=rb,jb.buffer=Pb,jb.normalized=Ib,jb.offset=Fb,jb.stride=Zb;jb.divisor!==lb&&(K.vertexAttribDivisorANGLE(bc,lb),jb.divisor=lb)}else if(jb.buffer&&(v.disableVertexAttribArray(bc),jb.buffer=null),jb.x!==Ta||jb.y!==Rb||jb.z!==qb||jb.w!==sb)v.vertexAttrib4f(bc,Ta,Rb,qb,sb),jb.x=
Ta,jb.y=Rb,jb.z=qb,jb.w=sb;Ia=this.charBuffer;tb=!1;Ja=null;fb=0;hb=!1;mb=Ka=0;Wa=1;vb=0;ub=5126;Lb=Sa=Bc=Oa=0;G(Ia)?(tb=!0,Ja=Q.createStream(34962,Ia),ub=Ja.dtype):(Ja=Q.getBuffer(Ia))?ub=Ja.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(Bc=Ia.constant,Sa=Lb=Oa=0):(Bc=0<Ia.constant.length?Ia.constant[0]:0,Sa=1<Ia.constant.length?Ia.constant[1]:0,Lb=2<Ia.constant.length?Ia.constant[2]:0,Oa=3<Ia.constant.length?Ia.constant[3]:0)):(Ja=G(Ia.buffer)?Q.createStream(34962,Ia.buffer):Q.getBuffer(Ia.buffer),
ub="type"in Ia?Ea[Ia.type]:Ja.dtype,hb=!!Ia.normalized,mb=Ia.size|0,Ka=Ia.offset|0,vb=Ia.stride|0,fb=Ia.divisor|0);Gb=I.location;La=T[Gb];if(1===Wa){La.buffer||v.enableVertexAttribArray(Gb);Pc=mb||1;if(La.type!==ub||La.size!==Pc||La.buffer!==Ja||La.normalized!==hb||La.offset!==Ka||La.stride!==vb)v.bindBuffer(34962,Ja.buffer),v.vertexAttribPointer(Gb,Pc,ub,hb,vb,Ka),La.type=ub,La.size=Pc,La.buffer=Ja,La.normalized=hb,La.offset=Ka,La.stride=vb;La.divisor!==fb&&(K.vertexAttribDivisorANGLE(Gb,fb),La.divisor=
fb)}else if(La.buffer&&(v.disableVertexAttribArray(Gb),La.buffer=null),La.x!==Bc||La.y!==Sa||La.z!==Lb||La.w!==Oa)v.vertexAttrib4f(Gb,Bc,Sa,Lb,Oa),La.x=Bc,La.y=Sa,La.z=Lb,La.w=Oa;$a=this.position;Mb=!1;Nb=null;nb=0;Na=!1;Ra=$b=0;wb=1;xb=0;Ua=5126;vc=Ec=gc=pb=0;G($a)?(Mb=!0,Nb=Q.createStream(34962,$a),Ua=Nb.dtype):(Nb=Q.getBuffer($a))?Ua=Nb.dtype:"constant"in $a?(wb=2,"number"===typeof $a.constant?(gc=$a.constant,Ec=vc=pb=0):(gc=0<$a.constant.length?$a.constant[0]:0,Ec=1<$a.constant.length?$a.constant[1]:
0,vc=2<$a.constant.length?$a.constant[2]:0,pb=3<$a.constant.length?$a.constant[3]:0)):(Nb=G($a.buffer)?Q.createStream(34962,$a.buffer):Q.getBuffer($a.buffer),Ua="type"in $a?Ea[$a.type]:Nb.dtype,Na=!!$a.normalized,Ra=$a.size|0,$b=$a.offset|0,xb=$a.stride|0,nb=$a.divisor|0);cb=ka.location;jc=T[cb];if(1===wb){jc.buffer||v.enableVertexAttribArray(cb);Tc=Ra||2;if(jc.type!==Ua||jc.size!==Tc||jc.buffer!==Nb||jc.normalized!==Na||jc.offset!==$b||jc.stride!==xb)v.bindBuffer(34962,Nb.buffer),v.vertexAttribPointer(cb,
Tc,Ua,Na,xb,$b),jc.type=Ua,jc.size=Tc,jc.buffer=Nb,jc.normalized=Na,jc.offset=$b,jc.stride=xb;jc.divisor!==nb&&(K.vertexAttribDivisorANGLE(cb,nb),jc.divisor=nb)}else if(jc.buffer&&(v.disableVertexAttribArray(cb),jc.buffer=null),jc.x!==gc||jc.y!==Ec||jc.z!==vc||jc.w!==pb)v.vertexAttrib4f(cb,gc,Ec,vc,pb),jc.x=gc,jc.y=Ec,jc.z=vc,jc.w=pb;Xa=this.viewportArray;v.uniform4f(X.location,Xa[0],Xa[1],Xa[2],Xa[3]);ld=this.scale;v.uniform2f(na.location,ld[0],ld[1]);Cb=this.translate;v.uniform2f(za.location,Cb[0],
Cb[1]);(ab=O.elements)?v.bindBuffer(34963,ab.buffer.buffer):ra.currentVAO&&(ab=P.getElements(ra.currentVAO.elements))&&v.bindBuffer(34963,ab.buffer.buffer);Wb=O.instances;for(D=0;D<d;++D){w=b[D];var tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id,Ad;tc=r.call(this,F,w,D);D&&Xb===tc||(Xb=tc,v.uniform1f(C.location,tc));Sb=L.call(this,F,w,D);D&&Kc===Sb||(Kc=Sb,v.uniform1f(M.location,Sb));Tb=w.align;D&&td===Tb||(td=Tb,v.uniform1f(U.location,
Tb));Dc=w.baseline;D&&zd===Dc||(zd=Dc,v.uniform1f(l.location,Dc));Mc=w.color;Yc=Mc[0];oc=Mc[1];hc=Mc[2];sc=Mc[3];D&&qd===Yc&&wc===oc&&eb===hc&&Vb===sc||(qd=Yc,wc=oc,eb=hc,Vb=sc,v.uniform4f(c.location,Yc,oc,hc,sc));Yb=ha.call(this,F,w,D);dc=Yb[0];yc=Yb[1];D&&ic===dc&&Ac===yc||(ic=dc,Ac=yc,v.uniform2f(B.location,dc,yc));cd=k.call(this,F,w,D);Qc=cd[0];Uc=cd[1];D&&Rc===Qc&&Zc===Uc||(Rc=Qc,Zc=Uc,v.uniform2f(V.location,Qc,Uc));md=w.positionOffset;dd=md[0];kc=md[1];D&&$c===dd&&cc===kc||($c=dd,cc=kc,v.uniform2f(A.location,
dd,kc));ad=w.opacity;D&&Wc===ad||(Wc=ad,v.uniform1f(g.location,ad));(ed=f.call(this,F,w,D))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);zc=ed._texture;v.uniform1i(z.location,zc.bind());id=w.offset;if(Ad=w.count)0<Wb?ab?K.drawElementsInstancedANGLE(0,Ad,ab.type,id<<(ab.type-5121>>1),Wb):K.drawArraysInstancedANGLE(0,id,Ad,Wb):0>Wb&&(ab?v.drawElements(0,Ad,ab.type,id<<(ab.type-5121>>1)):v.drawArrays(0,id,Ad)),zc.unbind()}Hc&&Q.destroyStream(pc);rc&&Q.destroyStream(Pb);tb&&Q.destroyStream(Ja);Mb&&
Q.destroyStream(Nb);q.dirty=!0;ra.setVAO(null);F.viewportWidth=x;F.viewportHeight=y;W&&(ma.cpuTime+=performance.now()-sa)},draw:function(a){var f,k,r,t,h,p,x,y,W,sa,w,N,J,L,S,aa,ja,ha,la,Ca,ia,Pa,Ce,Oe,Se,Fd,Ae,qe,Xd,Od,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb;f=oa.next;f!==oa.cur&&(f?v.bindFramebuffer(36160,f.framebuffer):v.bindFramebuffer(36160,null),oa.cur=
f);if(q.dirty){var Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc;Wa=ca.dither;Wa!==q.dither&&(Wa?v.enable(3024):v.disable(3024),q.dither=Wa);vb=ea[0];ub=ea[1];if(vb!==Da[0]||ub!==Da[1])v.blendEquationSeparate(vb,ub),Da[0]=vb,Da[1]=ub;Oa=ca.depth_func;Oa!==q.depth_func&&(v.depthFunc(Oa),q.depth_func=Oa);Bc=Z[0];Sa=Z[1];if(Bc!==zb[0]||Sa!==zb[1])v.depthRange(Bc,Sa),zb[0]=Bc,zb[1]=Sa;Lb=ca.depth_mask;Lb!==q.depth_mask&&(v.depthMask(Lb),
q.depth_mask=Lb);Gb=Ba[0];La=Ba[1];Pc=Ba[2];$a=Ba[3];if(Gb!==Ma[0]||La!==Ma[1]||Pc!==Ma[2]||$a!==Ma[3])v.colorMask(Gb,La,Pc,$a),Ma[0]=Gb,Ma[1]=La,Ma[2]=Pc,Ma[3]=$a;Mb=ca.cull_enable;Mb!==q.cull_enable&&(Mb?v.enable(2884):v.disable(2884),q.cull_enable=Mb);Nb=ca.cull_face;Nb!==q.cull_face&&(v.cullFace(Nb),q.cull_face=Nb);nb=ca.frontFace;nb!==q.frontFace&&(v.frontFace(nb),q.frontFace=nb);Na=ca.lineWidth;Na!==q.lineWidth&&(v.lineWidth(Na),q.lineWidth=Na);$b=ca.polygonOffset_enable;$b!==q.polygonOffset_enable&&
($b?v.enable(32823):v.disable(32823),q.polygonOffset_enable=$b);Ra=Za[0];wb=Za[1];if(Ra!==u[0]||wb!==u[1])v.polygonOffset(Ra,wb),u[0]=Ra,u[1]=wb;xb=ca.sample_alpha;xb!==q.sample_alpha&&(xb?v.enable(32926):v.disable(32926),q.sample_alpha=xb);Ua=ca.sample_enable;Ua!==q.sample_enable&&(Ua?v.enable(32928):v.disable(32928),q.sample_enable=Ua);pb=n[0];gc=n[1];if(pb!==R[0]||gc!==R[1])v.sampleCoverage(pb,gc),R[0]=pb,R[1]=gc;Ec=ca.stencil_mask;Ec!==q.stencil_mask&&(v.stencilMask(Ec),q.stencil_mask=Ec);vc=
Qa[0];cb=Qa[1];jc=Qa[2];if(vc!==lc[0]||cb!==lc[1]||jc!==lc[2])v.stencilFunc(vc,cb,jc),lc[0]=vc,lc[1]=cb,lc[2]=jc;Tc=ta[0];Xa=ta[1];ld=ta[2];Cb=ta[3];if(Tc!==Fa[0]||Xa!==Fa[1]||ld!==Fa[2]||Cb!==Fa[3])v.stencilOpSeparate(Tc,Xa,ld,Cb),Fa[0]=Tc,Fa[1]=Xa,Fa[2]=ld,Fa[3]=Cb;ab=fa[0];Wb=fa[1];tc=fa[2];Xb=fa[3];if(ab!==E[0]||Wb!==E[1]||tc!==E[2]||Xb!==E[3])v.stencilOpSeparate(ab,Wb,tc,Xb),E[0]=ab,E[1]=Wb,E[2]=tc,E[3]=Xb;Sb=ca.scissor_enable;Sb!==q.scissor_enable&&(Sb?v.enable(3089):v.disable(3089),q.scissor_enable=
Sb);Kc=ua[0];Tb=ua[1];td=ua[2];Dc=ua[3];if(Kc!==wa[0]||Tb!==wa[1]||td!==wa[2]||Dc!==wa[3])v.scissor(Kc,Tb,td,Dc),wa[0]=Kc,wa[1]=Tb,wa[2]=td,wa[3]=Dc}k=this.viewport;r=k.x|0;t=k.y|0;h="width"in k?k.width|0:F.framebufferWidth-r;p="height"in k?k.height|0:F.framebufferHeight-t;x=F.viewportWidth;F.viewportWidth=h;y=F.viewportHeight;F.viewportHeight=p;v.viewport(r,t,h,p);Aa[0]=r;Aa[1]=t;Aa[2]=h;Aa[3]=p;v.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;v.enable(3042);q.blend_enable=!0;v.blendFuncSeparate(770,
771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;v.disable(2929);q.depth_enable=!1;v.disable(2960);q.stencil_enable=!1;if(W=q.profile)sa=performance.now(),ma.count++;v.useProgram(D.program);w=qa.angle_instanced_arrays;ra.setVAO(null);Y.buffer=this.sizeBuffer;N=!1;J=null;L=0;S=!1;ja=aa=0;ha=1;la=0;Ca=5126;Oe=Ce=Pa=ia=0;G(Y)?(N=!0,J=Q.createStream(34962,Y),Ca=J.dtype):(J=Q.getBuffer(Y))?Ca=J.dtype:"constant"in Y?(ha=2,"number"===typeof Y.constant?(Pa=Y.constant,Ce=Oe=ia=0):(Pa=0<Y.constant.length?Y.constant[0]:
0,Ce=1<Y.constant.length?Y.constant[1]:0,Oe=2<Y.constant.length?Y.constant[2]:0,ia=3<Y.constant.length?Y.constant[3]:0)):(J=G(Y.buffer)?Q.createStream(34962,Y.buffer):Q.getBuffer(Y.buffer),Ca="type"in Y?Ea[Y.type]:J.dtype,S=!!Y.normalized,ja=Y.size|0,aa=Y.offset|0,la=Y.stride|0,L=Y.divisor|0);Se=da.location;Fd=T[Se];if(1===ha){Fd.buffer||v.enableVertexAttribArray(Se);Ae=ja||1;if(Fd.type!==Ca||Fd.size!==Ae||Fd.buffer!==J||Fd.normalized!==S||Fd.offset!==aa||Fd.stride!==la)v.bindBuffer(34962,J.buffer),
v.vertexAttribPointer(Se,Ae,Ca,S,la,aa),Fd.type=Ca,Fd.size=Ae,Fd.buffer=J,Fd.normalized=S,Fd.offset=aa,Fd.stride=la;Fd.divisor!==L&&(w.vertexAttribDivisorANGLE(Se,L),Fd.divisor=L)}else if(Fd.buffer&&(v.disableVertexAttribArray(Se),Fd.buffer=null),Fd.x!==Pa||Fd.y!==Ce||Fd.z!==Oe||Fd.w!==ia)v.vertexAttrib4f(Se,Pa,Ce,Oe,ia),Fd.x=Pa,Fd.y=Ce,Fd.z=Oe,Fd.w=ia;ga.buffer=this.sizeBuffer;qe=!1;Xd=null;Od=0;Gd=!1;bd=nd=0;rd=1;Lc=0;pd=5126;Ic=Oc=fd=Fc=0;G(ga)?(qe=!0,Xd=Q.createStream(34962,ga),pd=Xd.dtype):(Xd=
Q.getBuffer(ga))?pd=Xd.dtype:"constant"in ga?(rd=2,"number"===typeof ga.constant?(fd=ga.constant,Oc=Ic=Fc=0):(fd=0<ga.constant.length?ga.constant[0]:0,Oc=1<ga.constant.length?ga.constant[1]:0,Ic=2<ga.constant.length?ga.constant[2]:0,Fc=3<ga.constant.length?ga.constant[3]:0)):(Xd=G(ga.buffer)?Q.createStream(34962,ga.buffer):Q.getBuffer(ga.buffer),pd="type"in ga?Ea[ga.type]:Xd.dtype,Gd=!!ga.normalized,bd=ga.size|0,nd=ga.offset|0,Lc=ga.stride|0,Od=ga.divisor|0);Db=H.location;Hb=T[Db];if(1===rd){Hb.buffer||
v.enableVertexAttribArray(Db);uc=bd||1;if(Hb.type!==pd||Hb.size!==uc||Hb.buffer!==Xd||Hb.normalized!==Gd||Hb.offset!==nd||Hb.stride!==Lc)v.bindBuffer(34962,Xd.buffer),v.vertexAttribPointer(Db,uc,pd,Gd,Lc,nd),Hb.type=pd,Hb.size=uc,Hb.buffer=Xd,Hb.normalized=Gd,Hb.offset=nd,Hb.stride=Lc;Hb.divisor!==Od&&(w.vertexAttribDivisorANGLE(Db,Od),Hb.divisor=Od)}else if(Hb.buffer&&(v.disableVertexAttribArray(Db),Hb.buffer=null),Hb.x!==fd||Hb.y!==Oc||Hb.z!==Ic||Hb.w!==Fc)v.vertexAttrib4f(Db,fd,Oc,Ic,Fc),Hb.x=
fd,Hb.y=Oc,Hb.z=Ic,Hb.w=Fc;Ab=this.charBuffer;xc=!1;Eb=null;Jc=0;mc=!1;gd=Gc=0;Xc=1;Cc=0;ec=5126;nc=qc=pc=Hc=0;G(Ab)?(xc=!0,Eb=Q.createStream(34962,Ab),ec=Eb.dtype):(Eb=Q.getBuffer(Ab))?ec=Eb.dtype:"constant"in Ab?(Xc=2,"number"===typeof Ab.constant?(pc=Ab.constant,qc=nc=Hc=0):(pc=0<Ab.constant.length?Ab.constant[0]:0,qc=1<Ab.constant.length?Ab.constant[1]:0,nc=2<Ab.constant.length?Ab.constant[2]:0,Hc=3<Ab.constant.length?Ab.constant[3]:0)):(Eb=G(Ab.buffer)?Q.createStream(34962,Ab.buffer):Q.getBuffer(Ab.buffer),
ec="type"in Ab?Ea[Ab.type]:Eb.dtype,mc=!!Ab.normalized,gd=Ab.size|0,Gc=Ab.offset|0,Cc=Ab.stride|0,Jc=Ab.divisor|0);fc=I.location;gb=T[fc];if(1===Xc){gb.buffer||v.enableVertexAttribArray(fc);Sc=gd||1;if(gb.type!==ec||gb.size!==Sc||gb.buffer!==Eb||gb.normalized!==mc||gb.offset!==Gc||gb.stride!==Cc)v.bindBuffer(34962,Eb.buffer),v.vertexAttribPointer(fc,Sc,ec,mc,Cc,Gc),gb.type=ec,gb.size=Sc,gb.buffer=Eb,gb.normalized=mc,gb.offset=Gc,gb.stride=Cc;gb.divisor!==Jc&&(w.vertexAttribDivisorANGLE(fc,Jc),gb.divisor=
Jc)}else if(gb.buffer&&(v.disableVertexAttribArray(fc),gb.buffer=null),gb.x!==pc||gb.y!==qc||gb.z!==nc||gb.w!==Hc)v.vertexAttrib4f(fc,pc,qc,nc,Hc),gb.x=pc,gb.y=qc,gb.z=nc,gb.w=Hc;Bb=this.position;db=!1;Ob=null;bb=0;kb=!1;yd=Va=0;Jb=1;Kb=0;rc=5126;Fb=Ib=lb=Pb=0;G(Bb)?(db=!0,Ob=Q.createStream(34962,Bb),rc=Ob.dtype):(Ob=Q.getBuffer(Bb))?rc=Ob.dtype:"constant"in Bb?(Jb=2,"number"===typeof Bb.constant?(lb=Bb.constant,Ib=Fb=Pb=0):(lb=0<Bb.constant.length?Bb.constant[0]:0,Ib=1<Bb.constant.length?Bb.constant[1]:
0,Fb=2<Bb.constant.length?Bb.constant[2]:0,Pb=3<Bb.constant.length?Bb.constant[3]:0)):(Ob=G(Bb.buffer)?Q.createStream(34962,Bb.buffer):Q.getBuffer(Bb.buffer),rc="type"in Bb?Ea[Bb.type]:Ob.dtype,kb=!!Bb.normalized,yd=Bb.size|0,Va=Bb.offset|0,Kb=Bb.stride|0,bb=Bb.divisor|0);yb=ka.location;ib=T[yb];if(1===Jb){ib.buffer||v.enableVertexAttribArray(yb);Zb=yd||2;if(ib.type!==rc||ib.size!==Zb||ib.buffer!==Ob||ib.normalized!==kb||ib.offset!==Va||ib.stride!==Kb)v.bindBuffer(34962,Ob.buffer),v.vertexAttribPointer(yb,
Zb,rc,kb,Kb,Va),ib.type=rc,ib.size=Zb,ib.buffer=Ob,ib.normalized=kb,ib.offset=Va,ib.stride=Kb;ib.divisor!==bb&&(w.vertexAttribDivisorANGLE(yb,bb),ib.divisor=bb)}else if(ib.buffer&&(v.disableVertexAttribArray(yb),ib.buffer=null),ib.x!==lb||ib.y!==Ib||ib.z!==Fb||ib.w!==Pb)v.vertexAttrib4f(yb,lb,Ib,Fb,Pb),ib.x=lb,ib.y=Ib,ib.z=Fb,ib.w=Pb;Qb=K.call(this,F,a,0);v.uniform1f(C.location,Qb);sb=m.call(this,F,a,0);v.uniform1f(M.location,sb);v.uniform1f(U.location,a.align);v.uniform1f(l.location,a.baseline);
Ta=this.viewportArray;v.uniform4f(X.location,Ta[0],Ta[1],Ta[2],Ta[3]);Rb=a.color;v.uniform4f(c.location,Rb[0],Rb[1],Rb[2],Rb[3]);qb=e.call(this,F,a,0);v.uniform2f(B.location,qb[0],qb[1]);bc=d.call(this,F,a,0);v.uniform2f(V.location,bc[0],bc[1]);jb=this.scale;v.uniform2f(na.location,jb[0],jb[1]);rb=this.translate;v.uniform2f(za.location,rb[0],rb[1]);Ia=a.positionOffset;v.uniform2f(A.location,Ia[0],Ia[1]);v.uniform1f(g.location,a.opacity);(tb=b.call(this,F,a,0))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);
Ja=tb._texture;v.uniform1i(z.location,Ja.bind());(fb=O.elements)?v.bindBuffer(34963,fb.buffer.buffer):ra.currentVAO&&(fb=P.getElements(ra.currentVAO.elements))&&v.bindBuffer(34963,fb.buffer.buffer);hb=a.offset;if(Ka=a.count)mb=O.instances,0<mb?fb?w.drawElementsInstancedANGLE(0,Ka,fb.type,hb<<(fb.type-5121>>1),mb):w.drawArraysInstancedANGLE(0,hb,Ka,mb):0>mb&&(fb?v.drawElements(0,Ka,fb.type,hb<<(fb.type-5121>>1)):v.drawArrays(0,hb,Ka)),q.dirty=!0,ra.setVAO(null),F.viewportWidth=x,F.viewportHeight=y,
W&&(ma.cpuTime+=performance.now()-sa),N&&Q.destroyStream(J),qe&&Q.destroyStream(Xd),xc&&Q.destroyStream(Eb),db&&Q.destroyStream(Ob),Ja.unbind()},scope:function(b,c,d){var g,a,f,e,k,u,n,v,E,l,Z,R,m,r,A,z,B,ta,Fa,C,T,ea,fa,D,K,zb,H,P,Ma,M,L,S,ua,Aa,xa,ra,qa,U,X,V,da,ha,I,Za,pa,ka,Da,oa,Ba,na,wa,lc,ya,za,ia,Qa,gb,Pa,Bb,db,Ob,bb,kb,Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa,ld,Cb,
ab,Wb,tc,Xb,Sb,Kc,Tb,td,Dc,zd,Mc,Yc,qd,oc,wc,hc,eb,sc,Vb,Yb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,cc,ad,Wc,ed,zc,id;g=this.viewport;a=g.x|0;f=g.y|0;e="width"in g?g.width|0:F.framebufferWidth-a;k="height"in g?g.height|0:F.framebufferHeight-f;u=F.viewportWidth;F.viewportWidth=e;n=F.viewportHeight;F.viewportHeight=k;v=sa[0];sa[0]=a;E=sa[1];sa[1]=f;l=sa[2];sa[2]=e;Z=sa[3];sa[3]=k;R=Ca[0];Ca[0]=0;m=Ca[1];Ca[1]=0;r=Ca[2];Ca[2]=0;A=Ca[3];Ca[3]=1;z=ca.blend_enable;ca.blend_enable=!0;B=ja[0];ja[0]=770;ta=
ja[1];ja[1]=771;Fa=ja[2];ja[2]=773;C=ja[3];ja[3]=1;T=ca.depth_enable;ca.depth_enable=!1;ea=ca.stencil_enable;ca.stencil_enable=!1;if(fa=q.profile)D=performance.now(),ma.count++;K=b.offset;zb=O.offset;O.offset=K;H=b.count;P=O.count;O.count=H;Ma=O.primitive;O.primitive=0;M=b.align;L=la[64];la[64]=M;S=t.call(this,F,b,d);ua=la[69];la[69]=S;Aa=y.call(this,F,b,d);xa=la[67];la[67]=Aa;ra=p.call(this,F,b,d);qa=la[66];la[66]=ra;U=b.baseline;X=la[65];la[65]=U;V=h.call(this,F,b,d);da=la[62];la[62]=V;ha=b.color;
I=la[14];la[14]=ha;Za=N.call(this,F,b,d);pa=la[63];la[63]=Za;ka=b.opacity;Da=la[10];la[10]=ka;oa=b.positionOffset;Ba=la[68];la[68]=oa;na=this.scale;wa=la[6];la[6]=na;lc=this.translate;ya=la[8];la[8]=lc;za=this.viewportArray;ia=la[3];la[3]=za;Qa=this.charBuffer;gb=!1;Pa=null;Bb=0;db=!1;bb=Ob=0;kb=1;Va=0;yd=5126;Pb=rc=Kb=Jb=0;G(Qa)?(gb=!0,Pa=Q.createStream(34962,Qa),yd=Pa.dtype):(Pa=Q.getBuffer(Qa))?yd=Pa.dtype:"constant"in Qa?(kb=2,"number"===typeof Qa.constant?(Kb=Qa.constant,rc=Pb=Jb=0):(Kb=0<Qa.constant.length?
Qa.constant[0]:0,rc=1<Qa.constant.length?Qa.constant[1]:0,Pb=2<Qa.constant.length?Qa.constant[2]:0,Jb=3<Qa.constant.length?Qa.constant[3]:0)):(Pa=G(Qa.buffer)?Q.createStream(34962,Qa.buffer):Q.getBuffer(Qa.buffer),yd="type"in Qa?Ea[Qa.type]:Pa.dtype,db=!!Qa.normalized,bb=Qa.size|0,Ob=Qa.offset|0,Va=Qa.stride|0,Bb=Qa.divisor|0);lb=w.buffer;w.buffer=Pa;Ib=w.divisor;w.divisor=Bb;Fb=w.normalized;w.normalized=db;yb=w.offset;w.offset=Ob;ib=w.size;w.size=bb;Zb=w.state;w.state=kb;Qb=w.stride;w.stride=Va;
sb=w.type;w.type=yd;Ta=w.w;w.w=Jb;Rb=w.x;w.x=Kb;qb=w.y;w.y=rc;bc=w.z;w.z=Pb;ga.buffer=this.sizeBuffer;jb=!1;rb=null;Ia=0;tb=!1;fb=Ja=0;hb=1;Ka=0;mb=5126;Oa=ub=vb=Wa=0;G(ga)?(jb=!0,rb=Q.createStream(34962,ga),mb=rb.dtype):(rb=Q.getBuffer(ga))?mb=rb.dtype:"constant"in ga?(hb=2,"number"===typeof ga.constant?(vb=ga.constant,ub=Oa=Wa=0):(vb=0<ga.constant.length?ga.constant[0]:0,ub=1<ga.constant.length?ga.constant[1]:0,Oa=2<ga.constant.length?ga.constant[2]:0,Wa=3<ga.constant.length?ga.constant[3]:0)):
(rb=G(ga.buffer)?Q.createStream(34962,ga.buffer):Q.getBuffer(ga.buffer),mb="type"in ga?Ea[ga.type]:rb.dtype,tb=!!ga.normalized,fb=ga.size|0,Ja=ga.offset|0,Ka=ga.stride|0,Ia=ga.divisor|0);Bc=J.buffer;J.buffer=rb;Sa=J.divisor;J.divisor=Ia;Lb=J.normalized;J.normalized=tb;Gb=J.offset;J.offset=Ja;La=J.size;J.size=fb;Pc=J.state;J.state=hb;$a=J.stride;J.stride=Ka;Mb=J.type;J.type=mb;Nb=J.w;J.w=Wa;nb=J.x;J.x=vb;Na=J.y;J.y=ub;$b=J.z;J.z=Oa;Ra=this.position;wb=!1;xb=null;Ua=0;pb=!1;Ec=gc=0;vc=1;cb=0;jc=5126;
Cb=ld=Xa=Tc=0;G(Ra)?(wb=!0,xb=Q.createStream(34962,Ra),jc=xb.dtype):(xb=Q.getBuffer(Ra))?jc=xb.dtype:"constant"in Ra?(vc=2,"number"===typeof Ra.constant?(Xa=Ra.constant,ld=Cb=Tc=0):(Xa=0<Ra.constant.length?Ra.constant[0]:0,ld=1<Ra.constant.length?Ra.constant[1]:0,Cb=2<Ra.constant.length?Ra.constant[2]:0,Tc=3<Ra.constant.length?Ra.constant[3]:0)):(xb=G(Ra.buffer)?Q.createStream(34962,Ra.buffer):Q.getBuffer(Ra.buffer),jc="type"in Ra?Ea[Ra.type]:xb.dtype,pb=!!Ra.normalized,Ec=Ra.size|0,gc=Ra.offset|
0,cb=Ra.stride|0,Ua=Ra.divisor|0);ab=aa.buffer;aa.buffer=xb;Wb=aa.divisor;aa.divisor=Ua;tc=aa.normalized;aa.normalized=pb;Xb=aa.offset;aa.offset=gc;Sb=aa.size;aa.size=Ec;Kc=aa.state;aa.state=vc;Tb=aa.stride;aa.stride=cb;td=aa.type;aa.type=jc;Dc=aa.w;aa.w=Tc;zd=aa.x;aa.x=Xa;Mc=aa.y;aa.y=ld;Yc=aa.z;aa.z=Cb;Y.buffer=this.sizeBuffer;qd=!1;oc=null;wc=0;hc=!1;sc=eb=0;Vb=1;Yb=0;dc=5126;cd=Ac=yc=ic=0;G(Y)?(qd=!0,oc=Q.createStream(34962,Y),dc=oc.dtype):(oc=Q.getBuffer(Y))?dc=oc.dtype:"constant"in Y?(Vb=2,
"number"===typeof Y.constant?(yc=Y.constant,Ac=cd=ic=0):(yc=0<Y.constant.length?Y.constant[0]:0,Ac=1<Y.constant.length?Y.constant[1]:0,cd=2<Y.constant.length?Y.constant[2]:0,ic=3<Y.constant.length?Y.constant[3]:0)):(oc=G(Y.buffer)?Q.createStream(34962,Y.buffer):Q.getBuffer(Y.buffer),dc="type"in Y?Ea[Y.type]:oc.dtype,hc=!!Y.normalized,sc=Y.size|0,eb=Y.offset|0,Yb=Y.stride|0,wc=Y.divisor|0);Qc=x.buffer;x.buffer=oc;Rc=x.divisor;x.divisor=wc;Uc=x.normalized;x.normalized=hc;Zc=x.offset;x.offset=eb;md=
x.size;x.size=sc;dd=x.state;x.state=Vb;$c=x.stride;x.stride=Yb;kc=x.type;x.type=dc;cc=x.w;x.w=ic;ad=x.x;x.x=yc;Wc=x.y;x.y=Ac;ed=x.z;x.z=cd;zc=W.vert;W.vert=61;id=W.frag;W.frag=60;q.dirty=!0;c(F,b,d);F.viewportWidth=u;F.viewportHeight=n;sa[0]=v;sa[1]=E;sa[2]=l;sa[3]=Z;Ca[0]=R;Ca[1]=m;Ca[2]=r;Ca[3]=A;ca.blend_enable=z;ja[0]=B;ja[1]=ta;ja[2]=Fa;ja[3]=C;ca.depth_enable=T;ca.stencil_enable=ea;fa&&(ma.cpuTime+=performance.now()-D);O.offset=zb;O.count=P;O.primitive=Ma;la[64]=L;la[69]=ua;la[67]=xa;la[66]=
qa;la[65]=X;la[62]=da;la[14]=I;la[63]=pa;la[10]=Da;la[68]=Ba;la[6]=wa;la[8]=ya;la[3]=ia;gb&&Q.destroyStream(Pa);w.buffer=lb;w.divisor=Ib;w.normalized=Fb;w.offset=yb;w.size=ib;w.state=Zb;w.stride=Qb;w.type=sb;w.w=Ta;w.x=Rb;w.y=qb;w.z=bc;jb&&Q.destroyStream(rb);J.buffer=Bc;J.divisor=Sa;J.normalized=Lb;J.offset=Gb;J.size=La;J.state=Pc;J.stride=$a;J.type=Mb;J.w=Nb;J.x=nb;J.y=Na;J.z=$b;wb&&Q.destroyStream(xb);aa.buffer=ab;aa.divisor=Wb;aa.normalized=tc;aa.offset=Xb;aa.size=Sb;aa.state=Kc;aa.stride=Tb;
aa.type=td;aa.w=Dc;aa.x=zd;aa.y=Mc;aa.z=Yc;qd&&Q.destroyStream(oc);x.buffer=Qc;x.divisor=Rc;x.normalized=Uc;x.offset=Zc;x.size=md;x.state=dd;x.stride=$c;x.type=kc;x.w=cc;x.x=ad;x.y=Wc;x.z=ed;W.vert=zc;W.frag=id;q.dirty=!0}}},$2:function(a,ma,D){var K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,I,H,C,c,M;K=a.attributes;m=a.current;e=a.framebuffer;d=a.gl;b=a.next;t=a.vao;y=b.blend_color;p=m.blend_color;h=b.blend_equation;N=m.blend_equation;w=b.blend_func;J=m.blend_func;aa=b.colorMask;x=m.colorMask;
S=b.depth_range;r=m.depth_range;L=b.polygonOffset_offset;ha=m.polygonOffset_offset;k=b.sample_coverage;f=m.sample_coverage;U=b.scissor_box;z=m.scissor_box;V=b.stencil_func;B=m.stencil_func;l=b.stencil_opBack;I=m.stencil_opBack;H=b.stencil_opFront;C=m.stencil_opFront;c=b.viewport;M=m.viewport;return{poll:function(){var g,a,A,t,D,K,ma,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca;m.dirty=!1;a=b.blend_enable;A=b.cull_enable;t=b.depth_enable;D=b.dither;K=b.polygonOffset_enable;ma=b.sample_alpha;T=b.sample_enable;
Q=b.scissor_enable;F=b.stencil_enable;q=b.cull_face;O=m.cull_face;P=b.depth_func;qa=m.depth_func;oa=b.depth_mask;v=m.depth_mask;G=b.frontFace;ca=m.frontFace;W=b.lineWidth;la=m.lineWidth;ra=b.stencil_mask;Ca=m.stencil_mask;g=e.next;g!==e.cur&&(g?d.bindFramebuffer(36160,g.framebuffer):d.bindFramebuffer(36160,null),e.cur=g);a!==m.blend_enable&&(a?d.enable(3042):d.disable(3042),m.blend_enable=a);A!==m.cull_enable&&(A?d.enable(2884):d.disable(2884),m.cull_enable=A);t!==m.depth_enable&&(t?d.enable(2929):
d.disable(2929),m.depth_enable=t);D!==m.dither&&(D?d.enable(3024):d.disable(3024),m.dither=D);K!==m.polygonOffset_enable&&(K?d.enable(32823):d.disable(32823),m.polygonOffset_enable=K);ma!==m.sample_alpha&&(ma?d.enable(32926):d.disable(32926),m.sample_alpha=ma);T!==m.sample_enable&&(T?d.enable(32928):d.disable(32928),m.sample_enable=T);Q!==m.scissor_enable&&(Q?d.enable(3089):d.disable(3089),m.scissor_enable=Q);F!==m.stencil_enable&&(F?d.enable(2960):d.disable(2960),m.stencil_enable=F);if(y[0]!==p[0]||
y[1]!==p[1]||y[2]!==p[2]||y[3]!==p[3])d.blendColor(y[0],y[1],y[2],y[3]),p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[3];if(h[0]!==N[0]||h[1]!==N[1])d.blendEquationSeparate(h[0],h[1]),N[0]=h[0],N[1]=h[1];if(w[0]!==J[0]||w[1]!==J[1]||w[2]!==J[2]||w[3]!==J[3])d.blendFuncSeparate(w[0],w[1],w[2],w[3]),J[0]=w[0],J[1]=w[1],J[2]=w[2],J[3]=w[3];if(aa[0]!==x[0]||aa[1]!==x[1]||aa[2]!==x[2]||aa[3]!==x[3])d.colorMask(aa[0],aa[1],aa[2],aa[3]),x[0]=aa[0],x[1]=aa[1],x[2]=aa[2],x[3]=aa[3];q!==O&&(d.cullFace(q),m.cull_face=
q);P!==qa&&(d.depthFunc(P),m.depth_func=P);oa!==v&&(d.depthMask(oa),m.depth_mask=oa);if(S[0]!==r[0]||S[1]!==r[1])d.depthRange(S[0],S[1]),r[0]=S[0],r[1]=S[1];G!==ca&&(d.frontFace(G),m.frontFace=G);W!==la&&(d.lineWidth(W),m.lineWidth=W);if(L[0]!==ha[0]||L[1]!==ha[1])d.polygonOffset(L[0],L[1]),ha[0]=L[0],ha[1]=L[1];if(k[0]!==f[0]||k[1]!==f[1])d.sampleCoverage(k[0],k[1]),f[0]=k[0],f[1]=k[1];if(U[0]!==z[0]||U[1]!==z[1]||U[2]!==z[2]||U[3]!==z[3])d.scissor(U[0],U[1],U[2],U[3]),z[0]=U[0],z[1]=U[1],z[2]=U[2],
z[3]=U[3];if(V[0]!==B[0]||V[1]!==B[1]||V[2]!==B[2])d.stencilFunc(V[0],V[1],V[2]),B[0]=V[0],B[1]=V[1],B[2]=V[2];ra!==Ca&&(d.stencilMask(ra),m.stencil_mask=ra);if(l[0]!==I[0]||l[1]!==I[1]||l[2]!==I[2]||l[3]!==I[3])d.stencilOpSeparate(l[0],l[1],l[2],l[3]),I[0]=l[0],I[1]=l[1],I[2]=l[2],I[3]=l[3];if(H[0]!==C[0]||H[1]!==C[1]||H[2]!==C[2]||H[3]!==C[3])d.stencilOpSeparate(H[0],H[1],H[2],H[3]),C[0]=H[0],C[1]=H[1],C[2]=H[2],C[3]=H[3];if(c[0]!==M[0]||c[1]!==M[1]||c[2]!==M[2]||c[3]!==M[3])d.viewport(c[0],c[1],
c[2],c[3]),M[0]=c[0],M[1]=c[1],M[2]=c[2],M[3]=c[3]},refresh:function(){var g,a,A,D,ma,X,da,T,Q,F,q,O,P,qa,oa,v;m.dirty=!1;a=b.blend_enable;A=b.cull_enable;D=b.depth_enable;ma=b.dither;X=b.polygonOffset_enable;da=b.sample_alpha;T=b.sample_enable;Q=b.scissor_enable;F=b.stencil_enable;q=b.cull_face;O=b.depth_func;P=b.depth_mask;qa=b.frontFace;oa=b.lineWidth;v=b.stencil_mask;(g=e.next)?d.bindFramebuffer(36160,g.framebuffer):d.bindFramebuffer(36160,null);e.cur=g;g=K[0];g.buffer?(d.enableVertexAttribArray(0),
d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(0,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,g.x,g.y,g.z,g.w),g.buffer=null);g=K[1];g.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(1,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,g.x,g.y,g.z,g.w),g.buffer=null);g=K[2];g.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,g.buffer.buffer),
d.vertexAttribPointer(2,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,g.x,g.y,g.z,g.w),g.buffer=null);g=K[3];g.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(3,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,g.x,g.y,g.z,g.w),g.buffer=null);g=K[4];g.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(4,g.size,
g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,g.x,g.y,g.z,g.w),g.buffer=null);g=K[5];g.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(5,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,g.x,g.y,g.z,g.w),g.buffer=null);g=K[6];g.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(6,g.size,g.type,g.normalized,g.stride,g.offset)):
(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,g.x,g.y,g.z,g.w),g.buffer=null);g=K[7];g.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(7,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,g.x,g.y,g.z,g.w),g.buffer=null);g=K[8];g.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(8,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(8),
d.vertexAttrib4f(8,g.x,g.y,g.z,g.w),g.buffer=null);g=K[9];g.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(9,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,g.x,g.y,g.z,g.w),g.buffer=null);g=K[10];g.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(10,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,g.x,g.y,
g.z,g.w),g.buffer=null);g=K[11];g.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(11,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,g.x,g.y,g.z,g.w),g.buffer=null);g=K[12];g.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(12,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,g.x,g.y,g.z,g.w),g.buffer=null);
g=K[13];g.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(13,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,g.x,g.y,g.z,g.w),g.buffer=null);g=K[14];g.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(14,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,g.x,g.y,g.z,g.w),g.buffer=null);g=K[15];g.buffer?(d.enableVertexAttribArray(15),
d.bindBuffer(34962,g.buffer.buffer),d.vertexAttribPointer(15,g.size,g.type,g.normalized,g.stride,g.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,g.x,g.y,g.z,g.w),g.buffer=null);t.currentVAO=null;t.setVAO(t.targetVAO);a?d.enable(3042):d.disable(3042);m.blend_enable=a;A?d.enable(2884):d.disable(2884);m.cull_enable=A;D?d.enable(2929):d.disable(2929);m.depth_enable=D;ma?d.enable(3024):d.disable(3024);m.dither=ma;X?d.enable(32823):d.disable(32823);m.polygonOffset_enable=X;da?d.enable(32926):
d.disable(32926);m.sample_alpha=da;T?d.enable(32928):d.disable(32928);m.sample_enable=T;Q?d.enable(3089):d.disable(3089);m.scissor_enable=Q;F?d.enable(2960):d.disable(2960);m.stencil_enable=F;d.blendColor(y[0],y[1],y[2],y[3]);p[0]=y[0];p[1]=y[1];p[2]=y[2];p[3]=y[3];d.blendEquationSeparate(h[0],h[1]);N[0]=h[0];N[1]=h[1];d.blendFuncSeparate(w[0],w[1],w[2],w[3]);J[0]=w[0];J[1]=w[1];J[2]=w[2];J[3]=w[3];d.colorMask(aa[0],aa[1],aa[2],aa[3]);x[0]=aa[0];x[1]=aa[1];x[2]=aa[2];x[3]=aa[3];d.cullFace(q);m.cull_face=
q;d.depthFunc(O);m.depth_func=O;d.depthMask(P);m.depth_mask=P;d.depthRange(S[0],S[1]);r[0]=S[0];r[1]=S[1];d.frontFace(qa);m.frontFace=qa;d.lineWidth(oa);m.lineWidth=oa;d.polygonOffset(L[0],L[1]);ha[0]=L[0];ha[1]=L[1];d.sampleCoverage(k[0],k[1]);f[0]=k[0];f[1]=k[1];d.scissor(U[0],U[1],U[2],U[3]);z[0]=U[0];z[1]=U[1];z[2]=U[2];z[3]=U[3];d.stencilFunc(V[0],V[1],V[2]);B[0]=V[0];B[1]=V[1];B[2]=V[2];d.stencilMask(v);m.stencil_mask=v;d.stencilOpSeparate(l[0],l[1],l[2],l[3]);I[0]=l[0];I[1]=l[1];I[2]=l[2];
I[3]=l[3];d.stencilOpSeparate(H[0],H[1],H[2],H[3]);C[0]=H[0];C[1]=H[1];C[2]=H[2];C[3]=H[3];d.viewport(c[0],c[1],c[2],c[3]);M[0]=c[0];M[1]=c[1];M[2]=c[2];M[3]=c[3]}}},$7:function(a,ma,D,K,m,e,d,b){var t,y,p,h,N,w,J,aa,x,S,r,L,I,k,f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na,za,X,da,T;t=a.context;y=a.current;p=a.framebuffer;h=a.gl;N=a.next;w=a.shader;J=a.vao;aa=N.blend_color;x=y.blend_color;S=N.blend_equation;r=y.blend_equation;L=N.blend_func;I=y.blend_func;k=N.colorMask;f=y.colorMask;U=N.depth_range;z=y.depth_range;
V=N.polygonOffset_offset;B=y.polygonOffset_offset;l=N.sample_coverage;ya=y.sample_coverage;H=N.scissor_box;C=y.scissor_box;c=N.stencil_func;M=y.stencil_func;g=N.stencil_opBack;ka=y.stencil_opBack;A=N.stencil_opFront;na=y.stencil_opFront;za=N.viewport;X=y.viewport;da={};T={};return{draw:function(b){var d,a,T,H,qa,oa,v,G,ca,W;d=b.framebuffer;a=p.getFramebuffer(d);d&&!a&&ma.commandRaise(m,D);d=p.next;p.next=a;T=t.framebufferWidth;t.framebufferWidth=a?a.width:t.drawingBufferWidth;H=t.framebufferHeight;
t.framebufferHeight=a?a.height:t.drawingBufferHeight;a!==p.cur&&(a?h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null),p.cur=a);if(y.dirty){a=N.dither;a!==y.dither&&(a?h.enable(3024):h.disable(3024),y.dither=a);a=N.blend_enable;a!==y.blend_enable&&(a?h.enable(3042):h.disable(3042),y.blend_enable=a);a=aa[0];v=aa[1];qa=aa[2];oa=aa[3];if(a!==x[0]||v!==x[1]||qa!==x[2]||oa!==x[3])h.blendColor(a,v,qa,oa),x[0]=a,x[1]=v,x[2]=qa,x[3]=oa;a=S[0];v=S[1];if(a!==r[0]||v!==r[1])h.blendEquationSeparate(a,
v),r[0]=a,r[1]=v;a=L[0];v=L[1];qa=L[2];oa=L[3];if(a!==I[0]||v!==I[1]||qa!==I[2]||oa!==I[3])h.blendFuncSeparate(a,v,qa,oa),I[0]=a,I[1]=v,I[2]=qa,I[3]=oa;a=N.depth_enable;a!==y.depth_enable&&(a?h.enable(2929):h.disable(2929),y.depth_enable=a);a=N.depth_func;a!==y.depth_func&&(h.depthFunc(a),y.depth_func=a);a=U[0];v=U[1];if(a!==z[0]||v!==z[1])h.depthRange(a,v),z[0]=a,z[1]=v;a=N.depth_mask;a!==y.depth_mask&&(h.depthMask(a),y.depth_mask=a);a=k[0];v=k[1];qa=k[2];oa=k[3];if(a!==f[0]||v!==f[1]||qa!==f[2]||
oa!==f[3])h.colorMask(a,v,qa,oa),f[0]=a,f[1]=v,f[2]=qa,f[3]=oa;a=N.cull_enable;a!==y.cull_enable&&(a?h.enable(2884):h.disable(2884),y.cull_enable=a);a=N.cull_face;a!==y.cull_face&&(h.cullFace(a),y.cull_face=a);a=N.frontFace;a!==y.frontFace&&(h.frontFace(a),y.frontFace=a);a=N.lineWidth;a!==y.lineWidth&&(h.lineWidth(a),y.lineWidth=a);a=N.polygonOffset_enable;a!==y.polygonOffset_enable&&(a?h.enable(32823):h.disable(32823),y.polygonOffset_enable=a);a=V[0];v=V[1];if(a!==B[0]||v!==B[1])h.polygonOffset(a,
v),B[0]=a,B[1]=v;a=N.sample_alpha;a!==y.sample_alpha&&(a?h.enable(32926):h.disable(32926),y.sample_alpha=a);a=N.sample_enable;a!==y.sample_enable&&(a?h.enable(32928):h.disable(32928),y.sample_enable=a);a=l[0];v=l[1];if(a!==ya[0]||v!==ya[1])h.sampleCoverage(a,v),ya[0]=a,ya[1]=v;a=N.stencil_enable;a!==y.stencil_enable&&(a?h.enable(2960):h.disable(2960),y.stencil_enable=a);a=N.stencil_mask;a!==y.stencil_mask&&(h.stencilMask(a),y.stencil_mask=a);a=c[0];v=c[1];qa=c[2];if(a!==M[0]||v!==M[1]||qa!==M[2])h.stencilFunc(a,
v,qa),M[0]=a,M[1]=v,M[2]=qa;a=A[0];v=A[1];qa=A[2];oa=A[3];if(a!==na[0]||v!==na[1]||qa!==na[2]||oa!==na[3])h.stencilOpSeparate(a,v,qa,oa),na[0]=a,na[1]=v,na[2]=qa,na[3]=oa;a=g[0];v=g[1];qa=g[2];oa=g[3];if(a!==ka[0]||v!==ka[1]||qa!==ka[2]||oa!==ka[3])h.stencilOpSeparate(a,v,qa,oa),ka[0]=a,ka[1]=v,ka[2]=qa,ka[3]=oa;a=N.scissor_enable;a!==y.scissor_enable&&(a?h.enable(3089):h.disable(3089),y.scissor_enable=a)}qa=t.framebufferWidth;oa=t.framebufferHeight;a=t.viewportWidth;t.viewportWidth=qa;v=t.viewportHeight;
t.viewportHeight=oa;h.viewport(0,0,qa,oa);X[0]=0;X[1]=0;X[2]=qa;X[3]=oa;qa=t.framebufferWidth;oa=t.framebufferHeight;h.scissor(0,0,qa,oa);C[0]=0;C[1]=0;C[2]=qa;C[3]=oa;if(qa=y.profile)G=performance.now(),K.count++;oa=w.program(w.vert,w.frag,D);h.useProgram(oa.program);J.setVAO(null);ca=oa.id;(W=da[ca])||(W=da[ca]=e(oa));W.call(this,b);y.dirty=!0;J.setVAO(null);p.next=d;t.framebufferWidth=T;t.framebufferHeight=H;t.viewportWidth=a;t.viewportHeight=v;qa&&(K.cpuTime+=performance.now()-G)},scope:function(b,
c,a){var g,f,e,k,v,l,m,r,A,h,z,B,x,C,T;g=b.framebuffer;f=p.getFramebuffer(g);g&&!f&&ma.commandRaise(d,D);g=p.next;p.next=f;e=t.framebufferWidth;t.framebufferWidth=f?f.width:t.drawingBufferWidth;k=t.framebufferHeight;t.framebufferHeight=f?f.height:t.drawingBufferHeight;v=t.framebufferWidth;l=t.framebufferHeight;f=t.viewportWidth;t.viewportWidth=v;m=t.viewportHeight;t.viewportHeight=l;r=za[0];za[0]=0;A=za[1];za[1]=0;h=za[2];za[2]=v;v=za[3];za[3]=l;z=t.framebufferWidth;B=t.framebufferHeight;l=H[0];H[0]=
0;x=H[1];H[1]=0;C=H[2];H[2]=z;z=H[3];H[3]=B;if(B=y.profile)T=performance.now(),K.count++;y.dirty=!0;c(t,b,a);p.next=g;t.framebufferWidth=e;t.framebufferHeight=k;t.viewportWidth=f;t.viewportHeight=m;za[0]=r;za[1]=A;za[2]=h;za[3]=v;H[0]=l;H[1]=x;H[2]=C;H[3]=z;B&&(K.cpuTime+=performance.now()-T);y.dirty=!0},batch:function(d,a){var e,m,t,p,C;if(y.dirty){e=N.dither;e!==y.dither&&(e?h.enable(3024):h.disable(3024),y.dither=e);e=N.blend_enable;e!==y.blend_enable&&(e?h.enable(3042):h.disable(3042),y.blend_enable=
e);e=aa[0];t=aa[1];p=aa[2];C=aa[3];if(e!==x[0]||t!==x[1]||p!==x[2]||C!==x[3])h.blendColor(e,t,p,C),x[0]=e,x[1]=t,x[2]=p,x[3]=C;e=S[0];t=S[1];if(e!==r[0]||t!==r[1])h.blendEquationSeparate(e,t),r[0]=e,r[1]=t;e=L[0];t=L[1];p=L[2];C=L[3];if(e!==I[0]||t!==I[1]||p!==I[2]||C!==I[3])h.blendFuncSeparate(e,t,p,C),I[0]=e,I[1]=t,I[2]=p,I[3]=C;e=N.depth_enable;e!==y.depth_enable&&(e?h.enable(2929):h.disable(2929),y.depth_enable=e);e=N.depth_func;e!==y.depth_func&&(h.depthFunc(e),y.depth_func=e);e=U[0];t=U[1];
if(e!==z[0]||t!==z[1])h.depthRange(e,t),z[0]=e,z[1]=t;e=N.depth_mask;e!==y.depth_mask&&(h.depthMask(e),y.depth_mask=e);e=k[0];t=k[1];p=k[2];C=k[3];if(e!==f[0]||t!==f[1]||p!==f[2]||C!==f[3])h.colorMask(e,t,p,C),f[0]=e,f[1]=t,f[2]=p,f[3]=C;e=N.cull_enable;e!==y.cull_enable&&(e?h.enable(2884):h.disable(2884),y.cull_enable=e);e=N.cull_face;e!==y.cull_face&&(h.cullFace(e),y.cull_face=e);e=N.frontFace;e!==y.frontFace&&(h.frontFace(e),y.frontFace=e);e=N.lineWidth;e!==y.lineWidth&&(h.lineWidth(e),y.lineWidth=
e);e=N.polygonOffset_enable;e!==y.polygonOffset_enable&&(e?h.enable(32823):h.disable(32823),y.polygonOffset_enable=e);e=V[0];t=V[1];if(e!==B[0]||t!==B[1])h.polygonOffset(e,t),B[0]=e,B[1]=t;e=N.sample_alpha;e!==y.sample_alpha&&(e?h.enable(32926):h.disable(32926),y.sample_alpha=e);e=N.sample_enable;e!==y.sample_enable&&(e?h.enable(32928):h.disable(32928),y.sample_enable=e);e=l[0];t=l[1];if(e!==ya[0]||t!==ya[1])h.sampleCoverage(e,t),ya[0]=e,ya[1]=t;e=N.stencil_enable;e!==y.stencil_enable&&(e?h.enable(2960):
h.disable(2960),y.stencil_enable=e);e=N.stencil_mask;e!==y.stencil_mask&&(h.stencilMask(e),y.stencil_mask=e);e=c[0];t=c[1];p=c[2];if(e!==M[0]||t!==M[1]||p!==M[2])h.stencilFunc(e,t,p),M[0]=e,M[1]=t,M[2]=p;e=A[0];t=A[1];p=A[2];C=A[3];if(e!==na[0]||t!==na[1]||p!==na[2]||C!==na[3])h.stencilOpSeparate(e,t,p,C),na[0]=e,na[1]=t,na[2]=p,na[3]=C;e=g[0];t=g[1];p=g[2];C=g[3];if(e!==ka[0]||t!==ka[1]||p!==ka[2]||C!==ka[3])h.stencilOpSeparate(e,t,p,C),ka[0]=e,ka[1]=t,ka[2]=p,ka[3]=C;e=N.scissor_enable;e!==y.scissor_enable&&
(e?h.enable(3089):h.disable(3089),y.scissor_enable=e)}if(e=y.profile)m=performance.now(),K.count+=a;t=w.program(w.vert,w.frag,D);h.useProgram(t.program);J.setVAO(null);p=t.id;(C=T[p])||(C=T[p]=b(t));C.call(this,d,a);y.dirty=!0;J.setVAO(null);e&&(K.cpuTime+=performance.now()-m)}}},$5:function(a,ma,D,K,m,e){var d,b,t,y,p,h,N,w,J,aa,x,S,r,L,I,k,f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na,za,X;d=a.context;b=a.current;t=a.framebuffer;y=a.gl;p=a.next;h=a.shader;N=a.vao;w=p.blend_color;J=b.blend_color;aa=p.blend_equation;
x=b.blend_equation;S=p.blend_func;r=b.blend_func;L=p.colorMask;I=b.colorMask;k=p.depth_range;f=b.depth_range;U=p.polygonOffset_offset;z=b.polygonOffset_offset;V=p.sample_coverage;B=b.sample_coverage;l=p.scissor_box;ya=b.scissor_box;H=p.stencil_func;C=b.stencil_func;c=p.stencil_opBack;M=b.stencil_opBack;g=p.stencil_opFront;ka=b.stencil_opFront;A=p.viewport;na=b.viewport;za={};X={};return{draw:function(d){var a,e,F,q,O;a=t.next;a!==t.cur&&(a?y.bindFramebuffer(36160,a.framebuffer):y.bindFramebuffer(36160,
null),t.cur=a);if(b.dirty){a=p.dither;a!==b.dither&&(a?y.enable(3024):y.disable(3024),b.dither=a);a=p.blend_enable;a!==b.blend_enable&&(a?y.enable(3042):y.disable(3042),b.blend_enable=a);a=w[0];F=w[1];q=w[2];O=w[3];if(a!==J[0]||F!==J[1]||q!==J[2]||O!==J[3])y.blendColor(a,F,q,O),J[0]=a,J[1]=F,J[2]=q,J[3]=O;a=aa[0];F=aa[1];if(a!==x[0]||F!==x[1])y.blendEquationSeparate(a,F),x[0]=a,x[1]=F;a=S[0];F=S[1];q=S[2];O=S[3];if(a!==r[0]||F!==r[1]||q!==r[2]||O!==r[3])y.blendFuncSeparate(a,F,q,O),r[0]=a,r[1]=F,
r[2]=q,r[3]=O;a=p.depth_enable;a!==b.depth_enable&&(a?y.enable(2929):y.disable(2929),b.depth_enable=a);a=p.depth_func;a!==b.depth_func&&(y.depthFunc(a),b.depth_func=a);a=k[0];F=k[1];if(a!==f[0]||F!==f[1])y.depthRange(a,F),f[0]=a,f[1]=F;a=p.depth_mask;a!==b.depth_mask&&(y.depthMask(a),b.depth_mask=a);a=L[0];F=L[1];q=L[2];O=L[3];if(a!==I[0]||F!==I[1]||q!==I[2]||O!==I[3])y.colorMask(a,F,q,O),I[0]=a,I[1]=F,I[2]=q,I[3]=O;a=p.cull_enable;a!==b.cull_enable&&(a?y.enable(2884):y.disable(2884),b.cull_enable=
a);a=p.cull_face;a!==b.cull_face&&(y.cullFace(a),b.cull_face=a);a=p.frontFace;a!==b.frontFace&&(y.frontFace(a),b.frontFace=a);a=p.lineWidth;a!==b.lineWidth&&(y.lineWidth(a),b.lineWidth=a);a=p.polygonOffset_enable;a!==b.polygonOffset_enable&&(a?y.enable(32823):y.disable(32823),b.polygonOffset_enable=a);a=U[0];F=U[1];if(a!==z[0]||F!==z[1])y.polygonOffset(a,F),z[0]=a,z[1]=F;a=p.sample_alpha;a!==b.sample_alpha&&(a?y.enable(32926):y.disable(32926),b.sample_alpha=a);a=p.sample_enable;a!==b.sample_enable&&
(a?y.enable(32928):y.disable(32928),b.sample_enable=a);a=V[0];F=V[1];if(a!==B[0]||F!==B[1])y.sampleCoverage(a,F),B[0]=a,B[1]=F;a=p.stencil_enable;a!==b.stencil_enable&&(a?y.enable(2960):y.disable(2960),b.stencil_enable=a);a=p.stencil_mask;a!==b.stencil_mask&&(y.stencilMask(a),b.stencil_mask=a);a=H[0];F=H[1];q=H[2];if(a!==C[0]||F!==C[1]||q!==C[2])y.stencilFunc(a,F,q),C[0]=a,C[1]=F,C[2]=q;a=g[0];F=g[1];q=g[2];O=g[3];if(a!==ka[0]||F!==ka[1]||q!==ka[2]||O!==ka[3])y.stencilOpSeparate(a,F,q,O),ka[0]=a,
ka[1]=F,ka[2]=q,ka[3]=O;a=c[0];F=c[1];q=c[2];O=c[3];if(a!==M[0]||F!==M[1]||q!==M[2]||O!==M[3])y.stencilOpSeparate(a,F,q,O),M[0]=a,M[1]=F,M[2]=q,M[3]=O;a=p.scissor_enable;a!==b.scissor_enable&&(a?y.enable(3089):y.disable(3089),b.scissor_enable=a);a=l[0];F=l[1];q=l[2];O=l[3];if(a!==ya[0]||F!==ya[1]||q!==ya[2]||O!==ya[3])y.scissor(a,F,q,O),ya[0]=a,ya[1]=F,ya[2]=q,ya[3]=O;a=A[0];F=A[1];q=A[2];O=A[3];if(a!==na[0]||F!==na[1]||q!==na[2]||O!==na[3])y.viewport(a,F,q,O),na[0]=a,na[1]=F,na[2]=q,na[3]=O;b.dirty=
!1}if(a=b.profile)e=performance.now(),K.count++;F=h.program(h.vert,h.frag,D);y.useProgram(F.program);N.setVAO(null);q=F.id;(O=za[q])||(O=za[q]=m(F));O.call(this,d);N.setVAO(null);a&&(K.cpuTime+=performance.now()-e)},scope:function(c,a,e){var g,f;if(g=b.profile)f=performance.now(),K.count++;a(d,c,e);g&&(K.cpuTime+=performance.now()-f)},batch:function(a,d){var m,F,q,O,P;m=t.next;m!==t.cur&&(m?y.bindFramebuffer(36160,m.framebuffer):y.bindFramebuffer(36160,null),t.cur=m);if(b.dirty){m=p.dither;m!==b.dither&&
(m?y.enable(3024):y.disable(3024),b.dither=m);m=p.blend_enable;m!==b.blend_enable&&(m?y.enable(3042):y.disable(3042),b.blend_enable=m);m=w[0];q=w[1];O=w[2];P=w[3];if(m!==J[0]||q!==J[1]||O!==J[2]||P!==J[3])y.blendColor(m,q,O,P),J[0]=m,J[1]=q,J[2]=O,J[3]=P;m=aa[0];q=aa[1];if(m!==x[0]||q!==x[1])y.blendEquationSeparate(m,q),x[0]=m,x[1]=q;m=S[0];q=S[1];O=S[2];P=S[3];if(m!==r[0]||q!==r[1]||O!==r[2]||P!==r[3])y.blendFuncSeparate(m,q,O,P),r[0]=m,r[1]=q,r[2]=O,r[3]=P;m=p.depth_enable;m!==b.depth_enable&&(m?
y.enable(2929):y.disable(2929),b.depth_enable=m);m=p.depth_func;m!==b.depth_func&&(y.depthFunc(m),b.depth_func=m);m=k[0];q=k[1];if(m!==f[0]||q!==f[1])y.depthRange(m,q),f[0]=m,f[1]=q;m=p.depth_mask;m!==b.depth_mask&&(y.depthMask(m),b.depth_mask=m);m=L[0];q=L[1];O=L[2];P=L[3];if(m!==I[0]||q!==I[1]||O!==I[2]||P!==I[3])y.colorMask(m,q,O,P),I[0]=m,I[1]=q,I[2]=O,I[3]=P;m=p.cull_enable;m!==b.cull_enable&&(m?y.enable(2884):y.disable(2884),b.cull_enable=m);m=p.cull_face;m!==b.cull_face&&(y.cullFace(m),b.cull_face=
m);m=p.frontFace;m!==b.frontFace&&(y.frontFace(m),b.frontFace=m);m=p.lineWidth;m!==b.lineWidth&&(y.lineWidth(m),b.lineWidth=m);m=p.polygonOffset_enable;m!==b.polygonOffset_enable&&(m?y.enable(32823):y.disable(32823),b.polygonOffset_enable=m);m=U[0];q=U[1];if(m!==z[0]||q!==z[1])y.polygonOffset(m,q),z[0]=m,z[1]=q;m=p.sample_alpha;m!==b.sample_alpha&&(m?y.enable(32926):y.disable(32926),b.sample_alpha=m);m=p.sample_enable;m!==b.sample_enable&&(m?y.enable(32928):y.disable(32928),b.sample_enable=m);m=V[0];
q=V[1];if(m!==B[0]||q!==B[1])y.sampleCoverage(m,q),B[0]=m,B[1]=q;m=p.stencil_enable;m!==b.stencil_enable&&(m?y.enable(2960):y.disable(2960),b.stencil_enable=m);m=p.stencil_mask;m!==b.stencil_mask&&(y.stencilMask(m),b.stencil_mask=m);m=H[0];q=H[1];O=H[2];if(m!==C[0]||q!==C[1]||O!==C[2])y.stencilFunc(m,q,O),C[0]=m,C[1]=q,C[2]=O;m=g[0];q=g[1];O=g[2];P=g[3];if(m!==ka[0]||q!==ka[1]||O!==ka[2]||P!==ka[3])y.stencilOpSeparate(m,q,O,P),ka[0]=m,ka[1]=q,ka[2]=O,ka[3]=P;m=c[0];q=c[1];O=c[2];P=c[3];if(m!==M[0]||
q!==M[1]||O!==M[2]||P!==M[3])y.stencilOpSeparate(m,q,O,P),M[0]=m,M[1]=q,M[2]=O,M[3]=P;m=p.scissor_enable;m!==b.scissor_enable&&(m?y.enable(3089):y.disable(3089),b.scissor_enable=m);m=l[0];q=l[1];O=l[2];P=l[3];if(m!==ya[0]||q!==ya[1]||O!==ya[2]||P!==ya[3])y.scissor(m,q,O,P),ya[0]=m,ya[1]=q,ya[2]=O,ya[3]=P;m=A[0];q=A[1];O=A[2];P=A[3];if(m!==na[0]||q!==na[1]||O!==na[2]||P!==na[3])y.viewport(m,q,O,P),na[0]=m,na[1]=q,na[2]=O,na[3]=P;b.dirty=!1}if(m=b.profile)F=performance.now(),K.count+=d;q=h.program(h.vert,
h.frag,D);y.useProgram(q.program);N.setVAO(null);O=q.id;(P=X[O])||(P=X[O]=e(q));P.call(this,a,d);N.setVAO(null);m&&(K.cpuTime+=performance.now()-F)}}},"$26,color,freq,phase,projection,time,view":function(a,ma,D,K,m,e,d,b,t,y,p,h,N,w,J,I,x,S,r,L,ha,k,f,U,z,V,B,l,ya,H,C,c,M){var g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,Qa,lc,fa;g=a.attributes;ka=a.context;A=a.current;na=a.draw;za=a.elements;X=a.framebuffer;da=a.gl;T=a.isArrayLike;Q=a.next;F=a.shader;
q=a.uniforms;O=a.vao;P=Q.blend_color;qa=A.blend_color;oa=Q.blend_equation;v=A.blend_equation;G=Q.blend_func;ca=A.blend_func;W=Q.colorMask;la=A.colorMask;ra=Q.depth_range;Ca=A.depth_range;xa=Q.polygonOffset_offset;ea=A.polygonOffset_offset;Da=Q.sample_coverage;ja=A.sample_coverage;pa=Q.scissor_box;Ba=A.scissor_box;Ma=Q.stencil_func;Z=A.stencil_func;zb=Q.stencil_opBack;Za=A.stencil_opBack;u=Q.stencil_opFront;n=A.stencil_opFront;R=Q.viewport;ua=A.viewport;wa=new Float32Array(16);Qa=new Float32Array(16);
lc=new Float32Array(16);fa=new Float32Array(16);return{draw:function(a){var f,k,q,r;f=X.next;f!==X.cur&&(f?da.bindFramebuffer(36160,f.framebuffer):da.bindFramebuffer(36160,null),X.cur=f);if(A.dirty){var z;f=Q.dither;f!==A.dither&&(f?da.enable(3024):da.disable(3024),A.dither=f);f=Q.blend_enable;f!==A.blend_enable&&(f?da.enable(3042):da.disable(3042),A.blend_enable=f);f=P[0];q=P[1];r=P[2];z=P[3];if(f!==qa[0]||q!==qa[1]||r!==qa[2]||z!==qa[3])da.blendColor(f,q,r,z),qa[0]=f,qa[1]=q,qa[2]=r,qa[3]=z;f=oa[0];
q=oa[1];if(f!==v[0]||q!==v[1])da.blendEquationSeparate(f,q),v[0]=f,v[1]=q;f=G[0];q=G[1];r=G[2];z=G[3];if(f!==ca[0]||q!==ca[1]||r!==ca[2]||z!==ca[3])da.blendFuncSeparate(f,q,r,z),ca[0]=f,ca[1]=q,ca[2]=r,ca[3]=z;f=Q.depth_enable;f!==A.depth_enable&&(f?da.enable(2929):da.disable(2929),A.depth_enable=f);f=Q.depth_func;f!==A.depth_func&&(da.depthFunc(f),A.depth_func=f);f=ra[0];q=ra[1];if(f!==Ca[0]||q!==Ca[1])da.depthRange(f,q),Ca[0]=f,Ca[1]=q;f=Q.depth_mask;f!==A.depth_mask&&(da.depthMask(f),A.depth_mask=
f);f=W[0];q=W[1];r=W[2];z=W[3];if(f!==la[0]||q!==la[1]||r!==la[2]||z!==la[3])da.colorMask(f,q,r,z),la[0]=f,la[1]=q,la[2]=r,la[3]=z;f=Q.cull_enable;f!==A.cull_enable&&(f?da.enable(2884):da.disable(2884),A.cull_enable=f);f=Q.cull_face;f!==A.cull_face&&(da.cullFace(f),A.cull_face=f);f=Q.frontFace;f!==A.frontFace&&(da.frontFace(f),A.frontFace=f);f=Q.lineWidth;f!==A.lineWidth&&(da.lineWidth(f),A.lineWidth=f);f=Q.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?da.enable(32823):da.disable(32823),A.polygonOffset_enable=
f);f=xa[0];q=xa[1];if(f!==ea[0]||q!==ea[1])da.polygonOffset(f,q),ea[0]=f,ea[1]=q;f=Q.sample_alpha;f!==A.sample_alpha&&(f?da.enable(32926):da.disable(32926),A.sample_alpha=f);f=Q.sample_enable;f!==A.sample_enable&&(f?da.enable(32928):da.disable(32928),A.sample_enable=f);f=Da[0];q=Da[1];if(f!==ja[0]||q!==ja[1])da.sampleCoverage(f,q),ja[0]=f,ja[1]=q;f=Q.stencil_enable;f!==A.stencil_enable&&(f?da.enable(2960):da.disable(2960),A.stencil_enable=f);f=Q.stencil_mask;f!==A.stencil_mask&&(da.stencilMask(f),
A.stencil_mask=f);f=Ma[0];q=Ma[1];r=Ma[2];if(f!==Z[0]||q!==Z[1]||r!==Z[2])da.stencilFunc(f,q,r),Z[0]=f,Z[1]=q,Z[2]=r;f=u[0];q=u[1];r=u[2];z=u[3];if(f!==n[0]||q!==n[1]||r!==n[2]||z!==n[3])da.stencilOpSeparate(f,q,r,z),n[0]=f,n[1]=q,n[2]=r,n[3]=z;f=zb[0];q=zb[1];r=zb[2];z=zb[3];if(f!==Za[0]||q!==Za[1]||r!==Za[2]||z!==Za[3])da.stencilOpSeparate(f,q,r,z),Za[0]=f,Za[1]=q,Za[2]=r,Za[3]=z;f=Q.scissor_enable;f!==A.scissor_enable&&(f?da.enable(3089):da.disable(3089),A.scissor_enable=f);f=pa[0];q=pa[1];r=pa[2];
z=pa[3];if(f!==Ba[0]||q!==Ba[1]||r!==Ba[2]||z!==Ba[3])da.scissor(f,q,r,z),Ba[0]=f,Ba[1]=q,Ba[2]=r,Ba[3]=z;f=R[0];q=R[1];r=R[2];z=R[3];if(f!==ua[0]||q!==ua[1]||r!==ua[2]||z!==ua[3])da.viewport(f,q,r,z),ua[0]=f,ua[1]=q,ua[2]=r,ua[3]=z;A.dirty=!1}if(f=A.profile)k=performance.now(),K.count++;da.useProgram(m.program);O.setVAO(null);q=ya.location;r=g[q];r.buffer||da.enableVertexAttribArray(q);if(5126!==r.type||4!==r.size||r.buffer!==e||!1!==r.normalized||0!==r.offset||44!==r.stride)da.bindBuffer(34962,
e.buffer),da.vertexAttribPointer(q,4,5126,!1,44,0),r.type=5126,r.size=4,r.buffer=e,r.normalized=!1,r.offset=0,r.stride=44;q=H.location;r=g[q];r.buffer||da.enableVertexAttribArray(q);if(5126!==r.type||4!==r.size||r.buffer!==d||!1!==r.normalized||16!==r.offset||44!==r.stride)da.bindBuffer(34962,d.buffer),da.vertexAttribPointer(q,4,5126,!1,44,16),r.type=5126,r.size=4,r.buffer=d,r.normalized=!1,r.offset=16,r.stride=44;q=l.location;r=g[q];r.buffer||da.enableVertexAttribArray(q);if(5126!==r.type||3!==r.size||
r.buffer!==b||!1!==r.normalized||32!==r.offset||44!==r.stride)da.bindBuffer(34962,b.buffer),da.vertexAttribPointer(q,3,5126,!1,44,32),r.type=5126,r.size=3,r.buffer=b,r.normalized=!1,r.offset=32,r.stride=44;q=t.call(this,ka,a,0);"number"!==typeof q&&ma.commandRaise(y,D);da.uniform1f(c.location,q);q=p.call(this,ka,a,0);T(q)&&16===q.length||ma.commandRaise(h,D);da.uniformMatrix4fv(M.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(wa[0]=q[0],wa[1]=q[1],wa[2]=q[2],wa[3]=q[3],wa[4]=q[4],wa[5]=
q[5],wa[6]=q[6],wa[7]=q[7],wa[8]=q[8],wa[9]=q[9],wa[10]=q[10],wa[11]=q[11],wa[12]=q[12],wa[13]=q[13],wa[14]=q[14],wa[15]=q[15],wa));a=N.call(this,ka,a,0);T(a)&&16===a.length||ma.commandRaise(w,D);da.uniformMatrix4fv(C.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Qa[0]=a[0],Qa[1]=a[1],Qa[2]=a[2],Qa[3]=a[3],Qa[4]=a[4],Qa[5]=a[5],Qa[6]=a[6],Qa[7]=a[7],Qa[8]=a[8],Qa[9]=a[9],Qa[10]=a[10],Qa[11]=a[11],Qa[12]=a[12],Qa[13]=a[13],Qa[14]=a[14],Qa[15]=a[15],Qa));(a=na.elements)?da.bindBuffer(34963,
a.buffer.buffer):O.currentVAO&&(a=za.getElements(O.currentVAO.elements))&&da.bindBuffer(34963,a.buffer.buffer);q=na.offset;a?da.drawElements(0,1E4,a.type,q<<(a.type-5121>>1)):da.drawArrays(0,q,1E4);O.setVAO(null);f&&(K.cpuTime+=performance.now()-k)},scope:function(c,a,f){var g,k,u,n,v,m,l,Z,R,t,z,p,h,B,G,C,y,W,D,ea,fa,w,zb,H,N,Ma,M,O,ca,ua,Q,P,xa,T,ra,ma,U,qa,ja,X,V,Za,da,pa,ha;if(g=A.profile)k=performance.now(),K.count++;u=na.count;na.count=1E4;n=na.primitive;na.primitive=0;v=J.call(this,ka,c,f);
m=q[5];q[5]=v;l=I.call(this,ka,c,f);v=q[3];q[3]=l;Z=x.call(this,ka,c,f);l=q[4];q[4]=Z;Z=S.buffer;S.buffer=b;R=S.divisor;S.divisor=0;t=S.normalized;S.normalized=!1;z=S.offset;S.offset=32;p=S.size;S.size=0;h=S.state;S.state=1;B=S.stride;S.stride=44;G=S.type;S.type=5126;C=S.w;S.w=0;y=S.x;S.x=0;W=S.y;S.y=0;D=S.z;S.z=0;ea=r.buffer;r.buffer=e;fa=r.divisor;r.divisor=0;w=r.normalized;r.normalized=!1;zb=r.offset;r.offset=0;H=r.size;r.size=0;N=r.state;r.state=1;Ma=r.stride;r.stride=44;M=r.type;r.type=5126;
O=r.w;r.w=0;ca=r.x;r.x=0;ua=r.y;r.y=0;Q=r.z;r.z=0;P=L.buffer;L.buffer=d;xa=L.divisor;L.divisor=0;T=L.normalized;L.normalized=!1;ra=L.offset;L.offset=16;ma=L.size;L.size=0;U=L.state;L.state=1;qa=L.stride;L.stride=44;ja=L.type;L.type=5126;X=L.w;L.w=0;V=L.x;L.x=0;Za=L.y;L.y=0;da=L.z;L.z=0;pa=F.vert;F.vert=2;ha=F.frag;F.frag=1;a(ka,c,f);g&&(K.cpuTime+=performance.now()-k);na.count=u;na.primitive=n;q[5]=m;q[3]=v;q[4]=l;S.buffer=Z;S.divisor=R;S.normalized=t;S.offset=z;S.size=p;S.state=h;S.stride=B;S.type=
G;S.w=C;S.x=y;S.y=W;S.z=D;r.buffer=ea;r.divisor=fa;r.normalized=w;r.offset=zb;r.size=H;r.state=N;r.stride=Ma;r.type=M;r.w=O;r.x=ca;r.y=ua;r.z=Q;L.buffer=P;L.divisor=xa;L.normalized=T;L.offset=ra;L.size=ma;L.state=U;L.stride=qa;L.type=ja;L.w=X;L.x=V;L.y=Za;L.z=da;F.vert=pa;F.frag=ha},batch:function(a,m){var q,r,t;q=X.next;q!==X.cur&&(q?da.bindFramebuffer(36160,q.framebuffer):da.bindFramebuffer(36160,null),X.cur=q);if(A.dirty){var p,h,x;q=Q.dither;q!==A.dither&&(q?da.enable(3024):da.disable(3024),A.dither=
q);q=Q.blend_enable;q!==A.blend_enable&&(q?da.enable(3042):da.disable(3042),A.blend_enable=q);q=P[0];p=P[1];h=P[2];x=P[3];if(q!==qa[0]||p!==qa[1]||h!==qa[2]||x!==qa[3])da.blendColor(q,p,h,x),qa[0]=q,qa[1]=p,qa[2]=h,qa[3]=x;q=oa[0];p=oa[1];if(q!==v[0]||p!==v[1])da.blendEquationSeparate(q,p),v[0]=q,v[1]=p;q=G[0];p=G[1];h=G[2];x=G[3];if(q!==ca[0]||p!==ca[1]||h!==ca[2]||x!==ca[3])da.blendFuncSeparate(q,p,h,x),ca[0]=q,ca[1]=p,ca[2]=h,ca[3]=x;q=Q.depth_enable;q!==A.depth_enable&&(q?da.enable(2929):da.disable(2929),
A.depth_enable=q);q=Q.depth_func;q!==A.depth_func&&(da.depthFunc(q),A.depth_func=q);q=ra[0];p=ra[1];if(q!==Ca[0]||p!==Ca[1])da.depthRange(q,p),Ca[0]=q,Ca[1]=p;q=Q.depth_mask;q!==A.depth_mask&&(da.depthMask(q),A.depth_mask=q);q=W[0];p=W[1];h=W[2];x=W[3];if(q!==la[0]||p!==la[1]||h!==la[2]||x!==la[3])da.colorMask(q,p,h,x),la[0]=q,la[1]=p,la[2]=h,la[3]=x;q=Q.cull_enable;q!==A.cull_enable&&(q?da.enable(2884):da.disable(2884),A.cull_enable=q);q=Q.cull_face;q!==A.cull_face&&(da.cullFace(q),A.cull_face=q);
q=Q.frontFace;q!==A.frontFace&&(da.frontFace(q),A.frontFace=q);q=Q.lineWidth;q!==A.lineWidth&&(da.lineWidth(q),A.lineWidth=q);q=Q.polygonOffset_enable;q!==A.polygonOffset_enable&&(q?da.enable(32823):da.disable(32823),A.polygonOffset_enable=q);q=xa[0];p=xa[1];if(q!==ea[0]||p!==ea[1])da.polygonOffset(q,p),ea[0]=q,ea[1]=p;q=Q.sample_alpha;q!==A.sample_alpha&&(q?da.enable(32926):da.disable(32926),A.sample_alpha=q);q=Q.sample_enable;q!==A.sample_enable&&(q?da.enable(32928):da.disable(32928),A.sample_enable=
q);q=Da[0];p=Da[1];if(q!==ja[0]||p!==ja[1])da.sampleCoverage(q,p),ja[0]=q,ja[1]=p;q=Q.stencil_enable;q!==A.stencil_enable&&(q?da.enable(2960):da.disable(2960),A.stencil_enable=q);q=Q.stencil_mask;q!==A.stencil_mask&&(da.stencilMask(q),A.stencil_mask=q);q=Ma[0];p=Ma[1];h=Ma[2];if(q!==Z[0]||p!==Z[1]||h!==Z[2])da.stencilFunc(q,p,h),Z[0]=q,Z[1]=p,Z[2]=h;q=u[0];p=u[1];h=u[2];x=u[3];if(q!==n[0]||p!==n[1]||h!==n[2]||x!==n[3])da.stencilOpSeparate(q,p,h,x),n[0]=q,n[1]=p,n[2]=h,n[3]=x;q=zb[0];p=zb[1];h=zb[2];
x=zb[3];if(q!==Za[0]||p!==Za[1]||h!==Za[2]||x!==Za[3])da.stencilOpSeparate(q,p,h,x),Za[0]=q,Za[1]=p,Za[2]=h,Za[3]=x;q=Q.scissor_enable;q!==A.scissor_enable&&(q?da.enable(3089):da.disable(3089),A.scissor_enable=q);q=pa[0];p=pa[1];h=pa[2];x=pa[3];if(q!==Ba[0]||p!==Ba[1]||h!==Ba[2]||x!==Ba[3])da.scissor(q,p,h,x),Ba[0]=q,Ba[1]=p,Ba[2]=h,Ba[3]=x;q=R[0];p=R[1];h=R[2];x=R[3];if(q!==ua[0]||p!==ua[1]||h!==ua[2]||x!==ua[3])da.viewport(q,p,h,x),ua[0]=q,ua[1]=p,ua[2]=h,ua[3]=x;A.dirty=!1}if(q=A.profile)r=performance.now(),
K.count+=m;da.useProgram(ha.program);O.setVAO(null);p=ya.location;h=g[p];h.buffer||da.enableVertexAttribArray(p);if(5126!==h.type||4!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||44!==h.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(p,4,5126,!1,44,0),h.type=5126,h.size=4,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=44;p=H.location;h=g[p];h.buffer||da.enableVertexAttribArray(p);if(5126!==h.type||4!==h.size||h.buffer!==d||!1!==h.normalized||16!==h.offset||44!==h.stride)da.bindBuffer(34962,
d.buffer),da.vertexAttribPointer(p,4,5126,!1,44,16),h.type=5126,h.size=4,h.buffer=d,h.normalized=!1,h.offset=16,h.stride=44;p=l.location;h=g[p];h.buffer||da.enableVertexAttribArray(p);if(5126!==h.type||3!==h.size||h.buffer!==b||!1!==h.normalized||32!==h.offset||44!==h.stride)da.bindBuffer(34962,b.buffer),da.vertexAttribPointer(p,3,5126,!1,44,32),h.type=5126,h.size=3,h.buffer=b,h.normalized=!1,h.offset=32,h.stride=44;p=k.call(this,ka,void 0,t);"number"!==typeof p&&ma.commandRaise(f,D);da.uniform1f(c.location,
p);p=U.call(this,ka,void 0,t);T(p)&&16===p.length||ma.commandRaise(z,D);da.uniformMatrix4fv(M.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(lc[0]=p[0],lc[1]=p[1],lc[2]=p[2],lc[3]=p[3],lc[4]=p[4],lc[5]=p[5],lc[6]=p[6],lc[7]=p[7],lc[8]=p[8],lc[9]=p[9],lc[10]=p[10],lc[11]=p[11],lc[12]=p[12],lc[13]=p[13],lc[14]=p[14],lc[15]=p[15],lc));t=V.call(this,ka,void 0,t);T(t)&&16===t.length||ma.commandRaise(B,D);da.uniformMatrix4fv(C.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(fa[0]=
t[0],fa[1]=t[1],fa[2]=t[2],fa[3]=t[3],fa[4]=t[4],fa[5]=t[5],fa[6]=t[6],fa[7]=t[7],fa[8]=t[8],fa[9]=t[9],fa[10]=t[10],fa[11]=t[11],fa[12]=t[12],fa[13]=t[13],fa[14]=t[14],fa[15]=t[15],fa));(p=na.elements)?da.bindBuffer(34963,p.buffer.buffer):O.currentVAO&&(p=za.getElements(O.currentVAO.elements))&&da.bindBuffer(34963,p.buffer.buffer);h=na.offset;for(t=0;t<m;++t)p?da.drawElements(0,1E4,p.type,h<<(p.type-5121>>1)):da.drawArrays(0,h,1E4);O.setVAO(null);q&&(K.cpuTime+=performance.now()-r)}}},"$34,atlas,normal,position,projection,uv,view":function(a,
ma,D,K,m,e,d,b,t,y,p,h,N,w,J,I,x,S,r,L,ha,k,f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na,za,X,da,T){var Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,Qa,lc,fa,E,ta,Fa,sa,Aa,Ea,ga,Y,va,ia,Ga;Q=a.attributes;F=a.buffer;q=a.context;O=a.current;P=a.draw;qa=a.elements;oa=a.framebuffer;v=a.gl;G=a.isArrayLike;ca=a.isBufferArgs;W=a.next;la=a.shader;ra=a.uniforms;Ca=a.vao;xa=W.blend_color;ea=O.blend_color;Da=W.blend_equation;ja=O.blend_equation;pa=W.blend_func;Ba=O.blend_func;Ma=W.colorMask;
Z=O.colorMask;zb=W.depth_range;Za=O.depth_range;u=W.polygonOffset_offset;n=O.polygonOffset_offset;R=W.sample_coverage;ua=O.sample_coverage;wa=W.scissor_box;Qa=O.scissor_box;lc=W.stencil_func;fa=O.stencil_func;E=W.stencil_opBack;ta=O.stencil_opBack;Fa=W.stencil_opFront;sa=O.stencil_opFront;Aa=W.viewport;Ea=O.viewport;ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);va=new Float32Array(16);ia=new Float32Array(16);Ga=new Float32Array(16);
return{draw:function(c){var a,f,g,k,l,r,z,x,B,C,H,M,L,S,P,ra,I,U,aa,V,ha,la,ka,ya,ia,Ga,Ya,Pa,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob,bb,kb;a=q.view;f=m.call(this,q,c,0);q.view=f;g=oa.next;g!==oa.cur&&(g?v.bindFramebuffer(36160,g.framebuffer):v.bindFramebuffer(36160,null),oa.cur=g);if(O.dirty){var Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,
Ec,vc,cb;Va=W.dither;Va!==O.dither&&(Va?v.enable(3024):v.disable(3024),O.dither=Va);yd=W.blend_enable;yd!==O.blend_enable&&(yd?v.enable(3042):v.disable(3042),O.blend_enable=yd);Jb=xa[0];Kb=xa[1];rc=xa[2];Pb=xa[3];if(Jb!==ea[0]||Kb!==ea[1]||rc!==ea[2]||Pb!==ea[3])v.blendColor(Jb,Kb,rc,Pb),ea[0]=Jb,ea[1]=Kb,ea[2]=rc,ea[3]=Pb;lb=Da[0];Ib=Da[1];if(lb!==ja[0]||Ib!==ja[1])v.blendEquationSeparate(lb,Ib),ja[0]=lb,ja[1]=Ib;Fb=pa[0];yb=pa[1];ib=pa[2];Zb=pa[3];if(Fb!==Ba[0]||yb!==Ba[1]||ib!==Ba[2]||Zb!==Ba[3])v.blendFuncSeparate(Fb,
yb,ib,Zb),Ba[0]=Fb,Ba[1]=yb,Ba[2]=ib,Ba[3]=Zb;Qb=W.depth_enable;Qb!==O.depth_enable&&(Qb?v.enable(2929):v.disable(2929),O.depth_enable=Qb);sb=W.depth_func;sb!==O.depth_func&&(v.depthFunc(sb),O.depth_func=sb);Ta=zb[0];Rb=zb[1];if(Ta!==Za[0]||Rb!==Za[1])v.depthRange(Ta,Rb),Za[0]=Ta,Za[1]=Rb;qb=W.depth_mask;qb!==O.depth_mask&&(v.depthMask(qb),O.depth_mask=qb);bc=Ma[0];jb=Ma[1];rb=Ma[2];Ia=Ma[3];if(bc!==Z[0]||jb!==Z[1]||rb!==Z[2]||Ia!==Z[3])v.colorMask(bc,jb,rb,Ia),Z[0]=bc,Z[1]=jb,Z[2]=rb,Z[3]=Ia;tb=
W.frontFace;tb!==O.frontFace&&(v.frontFace(tb),O.frontFace=tb);Ja=W.lineWidth;Ja!==O.lineWidth&&(v.lineWidth(Ja),O.lineWidth=Ja);fb=W.polygonOffset_enable;fb!==O.polygonOffset_enable&&(fb?v.enable(32823):v.disable(32823),O.polygonOffset_enable=fb);hb=u[0];Ka=u[1];if(hb!==n[0]||Ka!==n[1])v.polygonOffset(hb,Ka),n[0]=hb,n[1]=Ka;mb=W.sample_alpha;mb!==O.sample_alpha&&(mb?v.enable(32926):v.disable(32926),O.sample_alpha=mb);Wa=W.sample_enable;Wa!==O.sample_enable&&(Wa?v.enable(32928):v.disable(32928),O.sample_enable=
Wa);vb=R[0];ub=R[1];if(vb!==ua[0]||ub!==ua[1])v.sampleCoverage(vb,ub),ua[0]=vb,ua[1]=ub;Oa=W.stencil_enable;Oa!==O.stencil_enable&&(Oa?v.enable(2960):v.disable(2960),O.stencil_enable=Oa);Bc=W.stencil_mask;Bc!==O.stencil_mask&&(v.stencilMask(Bc),O.stencil_mask=Bc);Sa=lc[0];Lb=lc[1];Gb=lc[2];if(Sa!==fa[0]||Lb!==fa[1]||Gb!==fa[2])v.stencilFunc(Sa,Lb,Gb),fa[0]=Sa,fa[1]=Lb,fa[2]=Gb;La=Fa[0];Pc=Fa[1];$a=Fa[2];Mb=Fa[3];if(La!==sa[0]||Pc!==sa[1]||$a!==sa[2]||Mb!==sa[3])v.stencilOpSeparate(La,Pc,$a,Mb),sa[0]=
La,sa[1]=Pc,sa[2]=$a,sa[3]=Mb;Nb=E[0];nb=E[1];Na=E[2];$b=E[3];if(Nb!==ta[0]||nb!==ta[1]||Na!==ta[2]||$b!==ta[3])v.stencilOpSeparate(Nb,nb,Na,$b),ta[0]=Nb,ta[1]=nb,ta[2]=Na,ta[3]=$b;Ra=W.scissor_enable;Ra!==O.scissor_enable&&(Ra?v.enable(3089):v.disable(3089),O.scissor_enable=Ra);wb=wa[0];xb=wa[1];Ua=wa[2];pb=wa[3];if(wb!==Qa[0]||xb!==Qa[1]||Ua!==Qa[2]||pb!==Qa[3])v.scissor(wb,xb,Ua,pb),Qa[0]=wb,Qa[1]=xb,Qa[2]=Ua,Qa[3]=pb;gc=Aa[0];Ec=Aa[1];vc=Aa[2];cb=Aa[3];if(gc!==Ea[0]||Ec!==Ea[1]||vc!==Ea[2]||cb!==
Ea[3])v.viewport(gc,Ec,vc,cb),Ea[0]=gc,Ea[1]=Ec,Ea[2]=vc,Ea[3]=cb}v.enable(2884);O.cull_enable=!0;v.cullFace(1029);O.cull_face=1029;if(k=O.profile)l=performance.now(),K.count++;v.useProgram(e.program);Ca.setVAO(null);(r=c.position)&&("object"===typeof r||"function"===typeof r)&&(ca(r)||F.getBuffer(r)||F.getBuffer(r.buffer)||ca(r.buffer)||"constant"in r&&("number"===typeof r.constant||G(r.constant)))||ma.commandRaise(d,D);z=!1;x=null;B=!1;H=C=0;M=1;L=0;S=5126;U=I=ra=P=0;ca(r)?(z=!0,x=F.createStream(34962,
r),S=x.dtype):(x=F.getBuffer(r))?S=x.dtype:"constant"in r?(M=2,"number"===typeof r.constant?(ra=r.constant,I=U=P=0):(ra=0<r.constant.length?r.constant[0]:0,I=1<r.constant.length?r.constant[1]:0,U=2<r.constant.length?r.constant[2]:0,P=3<r.constant.length?r.constant[3]:0)):(x=ca(r.buffer)?F.createStream(34962,r.buffer):F.getBuffer(r.buffer),S="type"in r?ga[r.type]:x.dtype,B=!!r.normalized,H=r.size|0,C=r.offset|0,L=r.stride|0);aa=za.location;V=Q[aa];if(1===M){if(V.buffer||v.enableVertexAttribArray(aa),
ha=H||3,V.type!==S||V.size!==ha||V.buffer!==x||V.normalized!==B||V.offset!==C||V.stride!==L)v.bindBuffer(34962,x.buffer),v.vertexAttribPointer(aa,ha,S,B,L,C),V.type=S,V.size=ha,V.buffer=x,V.normalized=B,V.offset=C,V.stride=L}else if(V.buffer&&(v.disableVertexAttribArray(aa),V.buffer=null),V.x!==ra||V.y!==I||V.z!==U||V.w!==P)v.vertexAttrib4f(aa,ra,I,U,P),V.x=ra,V.y=I,V.z=U,V.w=P;(la=c.normal)&&("object"===typeof la||"function"===typeof la)&&(ca(la)||F.getBuffer(la)||F.getBuffer(la.buffer)||ca(la.buffer)||
"constant"in la&&("number"===typeof la.constant||G(la.constant)))||ma.commandRaise(b,D);ka=!1;ya=null;ia=!1;Ya=Ga=0;Pa=1;nd=0;bd=5126;Fc=pd=Lc=rd=0;ca(la)?(ka=!0,ya=F.createStream(34962,la),bd=ya.dtype):(ya=F.getBuffer(la))?bd=ya.dtype:"constant"in la?(Pa=2,"number"===typeof la.constant?(Lc=la.constant,pd=Fc=rd=0):(Lc=0<la.constant.length?la.constant[0]:0,pd=1<la.constant.length?la.constant[1]:0,Fc=2<la.constant.length?la.constant[2]:0,rd=3<la.constant.length?la.constant[3]:0)):(ya=ca(la.buffer)?
F.createStream(34962,la.buffer):F.getBuffer(la.buffer),bd="type"in la?ga[la.type]:ya.dtype,ia=!!la.normalized,Ya=la.size|0,Ga=la.offset|0,nd=la.stride|0);fd=na.location;Oc=Q[fd];if(1===Pa){if(Oc.buffer||v.enableVertexAttribArray(fd),Ic=Ya||3,Oc.type!==bd||Oc.size!==Ic||Oc.buffer!==ya||Oc.normalized!==ia||Oc.offset!==Ga||Oc.stride!==nd)v.bindBuffer(34962,ya.buffer),v.vertexAttribPointer(fd,Ic,bd,ia,nd,Ga),Oc.type=bd,Oc.size=Ic,Oc.buffer=ya,Oc.normalized=ia,Oc.offset=Ga,Oc.stride=nd}else if(Oc.buffer&&
(v.disableVertexAttribArray(fd),Oc.buffer=null),Oc.x!==Lc||Oc.y!==pd||Oc.z!==Fc||Oc.w!==rd)v.vertexAttrib4f(fd,Lc,pd,Fc,rd),Oc.x=Lc,Oc.y=pd,Oc.z=Fc,Oc.w=rd;(Db=c.uv)&&("object"===typeof Db||"function"===typeof Db)&&(ca(Db)||F.getBuffer(Db)||F.getBuffer(Db.buffer)||ca(Db.buffer)||"constant"in Db&&("number"===typeof Db.constant||G(Db.constant)))||ma.commandRaise(t,D);Hb=!1;uc=null;Ab=!1;Eb=xc=0;Jc=1;mc=0;Gc=5126;ec=Cc=Xc=gd=0;ca(Db)?(Hb=!0,uc=F.createStream(34962,Db),Gc=uc.dtype):(uc=F.getBuffer(Db))?
Gc=uc.dtype:"constant"in Db?(Jc=2,"number"===typeof Db.constant?(Xc=Db.constant,Cc=ec=gd=0):(Xc=0<Db.constant.length?Db.constant[0]:0,Cc=1<Db.constant.length?Db.constant[1]:0,ec=2<Db.constant.length?Db.constant[2]:0,gd=3<Db.constant.length?Db.constant[3]:0)):(uc=ca(Db.buffer)?F.createStream(34962,Db.buffer):F.getBuffer(Db.buffer),Gc="type"in Db?ga[Db.type]:uc.dtype,Ab=!!Db.normalized,Eb=Db.size|0,xc=Db.offset|0,mc=Db.stride|0);Hc=da.location;pc=Q[Hc];if(1===Jc){if(pc.buffer||v.enableVertexAttribArray(Hc),
qc=Eb||2,pc.type!==Gc||pc.size!==qc||pc.buffer!==uc||pc.normalized!==Ab||pc.offset!==xc||pc.stride!==mc)v.bindBuffer(34962,uc.buffer),v.vertexAttribPointer(Hc,qc,Gc,Ab,mc,xc),pc.type=Gc,pc.size=qc,pc.buffer=uc,pc.normalized=Ab,pc.offset=xc,pc.stride=mc}else if(pc.buffer&&(v.disableVertexAttribArray(Hc),pc.buffer=null),pc.x!==Xc||pc.y!==Cc||pc.z!==ec||pc.w!==gd)v.vertexAttrib4f(Hc,Xc,Cc,ec,gd),pc.x=Xc,pc.y=Cc,pc.z=ec,pc.w=gd;nc=y.call(this,q,c,0);G(nc)&&16===nc.length||ma.commandRaise(p,D);v.uniformMatrix4fv(X.location,
!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(Y[0]=nc[0],Y[1]=nc[1],Y[2]=nc[2],Y[3]=nc[3],Y[4]=nc[4],Y[5]=nc[5],Y[6]=nc[6],Y[7]=nc[7],Y[8]=nc[8],Y[9]=nc[9],Y[10]=nc[10],Y[11]=nc[11],Y[12]=nc[12],Y[13]=nc[13],Y[14]=nc[14],Y[15]=nc[15],Y));fc=q.view;G(fc)&&16===fc.length||ma.commandRaise(h,D);v.uniformMatrix4fv(T.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(va[0]=fc[0],va[1]=fc[1],va[2]=fc[2],va[3]=fc[3],va[4]=fc[4],va[5]=fc[5],va[6]=fc[6],va[7]=fc[7],va[8]=fc[8],va[9]=fc[9],
va[10]=fc[10],va[11]=fc[11],va[12]=fc[12],va[13]=fc[13],va[14]=fc[14],va[15]=fc[15],va));(gb=c.atlas)&&"framebuffer"===gb._reglType&&(gb=gb.color[0]);"function"===typeof gb&&"texture2d"===gb._reglType||ma.commandRaise(N,D);Sc=gb._texture;v.uniform1i(A.location,Sc.bind());Bb=c.elements;db=null;(Ob=ca(Bb))?db=qa.createStream(Bb):(db=qa.getElements(Bb),Bb&&!db&&ma.commandRaise(w,D));db&&v.bindBuffer(34963,db.buffer.buffer);bb=db?db.primType:4;kb=db?db.vertCount:-1;0<=kb||ma.commandRaise(J,D);kb&&(db?
v.drawElements(bb,kb,db.type,0<<(db.type-5121>>1)):v.drawArrays(bb,0,kb),O.dirty=!0,Ca.setVAO(null),q.view=a,k&&(K.cpuTime+=performance.now()-l),z&&F.destroyStream(x),ka&&F.destroyStream(ya),Hb&&F.destroyStream(uc),Sc.unbind(),Ob&&qa.destroyStream(db))},scope:function(b,c,a){var d,e,g,u,n,v,m,E,l,Z,p,t,R,h,z,A,B,C,y,ea,fa,w,H,zb,J,N,Ma,M,ta,Fa,ua,Q,sa,Y,xa,T,V,ja,X,Za,da,Aa,pa,ka,Da,Ba,Ea,wa,na,oa,Ca,lc,ya,va,ia,za,Qa,Ga,Ya,kb,Va,Pa,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,
hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb;d=q.view;e=I.call(this,q,b,a);q.view=e;g=W.cull_enable;W.cull_enable=!0;u=W.cull_face;W.cull_face=1029;if(n=O.profile)v=performance.now(),K.count++;m=b.elements;E=null;(l=ca(m))?E=qa.createStream(m):(E=qa.getElements(m),m&&!E&&ma.commandRaise(x,D));Z=P.elements;P.elements=E;p=P.offset;P.offset=0;t=E?E.vertCount:-1;R=P.count;P.count=t;h=E?E.primType:4;z=P.primitive;P.primitive=h;A=b.atlas;B=ra[5];ra[5]=A;C=S.call(this,q,b,a);y=ra[3];ra[3]=C;ea=q.view;
fa=ra[4];ra[4]=ea;(w=b.normal)&&("object"===typeof w||"function"===typeof w)&&(ca(w)||F.getBuffer(w)||F.getBuffer(w.buffer)||ca(w.buffer)||"constant"in w&&("number"===typeof w.constant||G(w.constant)))||ma.commandRaise(r,D);H=!1;zb=null;J=0;N=!1;M=Ma=0;ta=1;Fa=0;ua=5126;xa=Y=sa=Q=0;ca(w)?(H=!0,zb=F.createStream(34962,w),ua=zb.dtype):(zb=F.getBuffer(w))?ua=zb.dtype:"constant"in w?(ta=2,"number"===typeof w.constant?(sa=w.constant,Y=xa=Q=0):(sa=0<w.constant.length?w.constant[0]:0,Y=1<w.constant.length?
w.constant[1]:0,xa=2<w.constant.length?w.constant[2]:0,Q=3<w.constant.length?w.constant[3]:0)):(zb=ca(w.buffer)?F.createStream(34962,w.buffer):F.getBuffer(w.buffer),ua="type"in w?ga[w.type]:zb.dtype,N=!!w.normalized,M=w.size|0,Ma=w.offset|0,Fa=w.stride|0,J=w.divisor|0);T=L.buffer;L.buffer=zb;V=L.divisor;L.divisor=J;ja=L.normalized;L.normalized=N;X=L.offset;L.offset=Ma;Za=L.size;L.size=M;da=L.state;L.state=ta;Aa=L.stride;L.stride=Fa;pa=L.type;L.type=ua;ka=L.w;L.w=Q;Da=L.x;L.x=sa;Ba=L.y;L.y=Y;Ea=L.z;
L.z=xa;(wa=b.position)&&("object"===typeof wa||"function"===typeof wa)&&(ca(wa)||F.getBuffer(wa)||F.getBuffer(wa.buffer)||ca(wa.buffer)||"constant"in wa&&("number"===typeof wa.constant||G(wa.constant)))||ma.commandRaise(ha,D);na=!1;oa=null;Ca=0;lc=!1;va=ya=0;ia=1;za=0;Qa=5126;Va=kb=Ya=Ga=0;ca(wa)?(na=!0,oa=F.createStream(34962,wa),Qa=oa.dtype):(oa=F.getBuffer(wa))?Qa=oa.dtype:"constant"in wa?(ia=2,"number"===typeof wa.constant?(Ya=wa.constant,kb=Va=Ga=0):(Ya=0<wa.constant.length?wa.constant[0]:0,
kb=1<wa.constant.length?wa.constant[1]:0,Va=2<wa.constant.length?wa.constant[2]:0,Ga=3<wa.constant.length?wa.constant[3]:0)):(oa=ca(wa.buffer)?F.createStream(34962,wa.buffer):F.getBuffer(wa.buffer),Qa="type"in wa?ga[wa.type]:oa.dtype,lc=!!wa.normalized,va=wa.size|0,ya=wa.offset|0,za=wa.stride|0,Ca=wa.divisor|0);Pa=k.buffer;k.buffer=oa;Jb=k.divisor;k.divisor=Ca;Kb=k.normalized;k.normalized=lc;rc=k.offset;k.offset=ya;Pb=k.size;k.size=va;lb=k.state;k.state=ia;Ib=k.stride;k.stride=za;Fb=k.type;k.type=
Qa;yb=k.w;k.w=Ga;ib=k.x;k.x=Ya;Zb=k.y;k.y=kb;Qb=k.z;k.z=Va;(sb=b.uv)&&("object"===typeof sb||"function"===typeof sb)&&(ca(sb)||F.getBuffer(sb)||F.getBuffer(sb.buffer)||ca(sb.buffer)||"constant"in sb&&("number"===typeof sb.constant||G(sb.constant)))||ma.commandRaise(f,D);Ta=!1;Rb=null;qb=0;bc=!1;rb=jb=0;Ia=1;tb=0;Ja=5126;mb=Ka=hb=fb=0;ca(sb)?(Ta=!0,Rb=F.createStream(34962,sb),Ja=Rb.dtype):(Rb=F.getBuffer(sb))?Ja=Rb.dtype:"constant"in sb?(Ia=2,"number"===typeof sb.constant?(hb=sb.constant,Ka=mb=fb=
0):(hb=0<sb.constant.length?sb.constant[0]:0,Ka=1<sb.constant.length?sb.constant[1]:0,mb=2<sb.constant.length?sb.constant[2]:0,fb=3<sb.constant.length?sb.constant[3]:0)):(Rb=ca(sb.buffer)?F.createStream(34962,sb.buffer):F.getBuffer(sb.buffer),Ja="type"in sb?ga[sb.type]:Rb.dtype,bc=!!sb.normalized,rb=sb.size|0,jb=sb.offset|0,tb=sb.stride|0,qb=sb.divisor|0);Wa=U.buffer;U.buffer=Rb;vb=U.divisor;U.divisor=qb;ub=U.normalized;U.normalized=bc;Oa=U.offset;U.offset=jb;Bc=U.size;U.size=rb;Sa=U.state;U.state=
Ia;Lb=U.stride;U.stride=tb;Gb=U.type;U.type=Ja;La=U.w;U.w=fb;Pc=U.x;U.x=hb;$a=U.y;U.y=Ka;Mb=U.z;U.z=mb;Nb=la.vert;la.vert=2;nb=la.frag;la.frag=1;O.dirty=!0;c(q,b,a);q.view=d;W.cull_enable=g;W.cull_face=u;n&&(K.cpuTime+=performance.now()-v);l&&qa.destroyStream(E);P.elements=Z;P.offset=p;P.count=R;P.primitive=z;ra[5]=B;ra[3]=y;ra[4]=fa;H&&F.destroyStream(zb);L.buffer=T;L.divisor=V;L.normalized=ja;L.offset=X;L.size=Za;L.state=da;L.stride=Aa;L.type=pa;L.w=ka;L.x=Da;L.y=Ba;L.z=Ea;na&&F.destroyStream(oa);
k.buffer=Pa;k.divisor=Jb;k.normalized=Kb;k.offset=rc;k.size=Pb;k.state=lb;k.stride=Ib;k.type=Fb;k.w=yb;k.x=ib;k.y=Zb;k.z=Qb;Ta&&F.destroyStream(Rb);U.buffer=Wa;U.divisor=vb;U.normalized=ub;U.offset=Oa;U.size=Bc;U.state=Sa;U.stride=Lb;U.type=Gb;U.w=La;U.x=Pc;U.y=$a;U.z=Mb;la.vert=Nb;la.frag=nb;O.dirty=!0},batch:function(b,a){var d,f,e,k,m,r,p;d=q.view;f=z.call(this,q,b,0);q.view=f;e=oa.next;e!==oa.cur&&(e?v.bindFramebuffer(36160,e.framebuffer):v.bindFramebuffer(36160,null),oa.cur=e);if(O.dirty){var t,
h,x,y,w,J,N,S,L,P,Y,ra,I,U,aa,la,ha,va,Pa,Gd,nd,bd,rd,Lc,pd,Fc,fd,Oc,Ic,Db,Hb,uc,Ab,xc,Eb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,gb,Sc,Bb,db,Ob;t=W.dither;t!==O.dither&&(t?v.enable(3024):v.disable(3024),O.dither=t);h=W.blend_enable;h!==O.blend_enable&&(h?v.enable(3042):v.disable(3042),O.blend_enable=h);x=xa[0];y=xa[1];w=xa[2];J=xa[3];if(x!==ea[0]||y!==ea[1]||w!==ea[2]||J!==ea[3])v.blendColor(x,y,w,J),ea[0]=x,ea[1]=y,ea[2]=w,ea[3]=J;N=Da[0];S=Da[1];if(N!==ja[0]||S!==ja[1])v.blendEquationSeparate(N,S),
ja[0]=N,ja[1]=S;L=pa[0];P=pa[1];Y=pa[2];ra=pa[3];if(L!==Ba[0]||P!==Ba[1]||Y!==Ba[2]||ra!==Ba[3])v.blendFuncSeparate(L,P,Y,ra),Ba[0]=L,Ba[1]=P,Ba[2]=Y,Ba[3]=ra;I=W.depth_enable;I!==O.depth_enable&&(I?v.enable(2929):v.disable(2929),O.depth_enable=I);U=W.depth_func;U!==O.depth_func&&(v.depthFunc(U),O.depth_func=U);aa=zb[0];la=zb[1];if(aa!==Za[0]||la!==Za[1])v.depthRange(aa,la),Za[0]=aa,Za[1]=la;ha=W.depth_mask;ha!==O.depth_mask&&(v.depthMask(ha),O.depth_mask=ha);va=Ma[0];Pa=Ma[1];Gd=Ma[2];nd=Ma[3];if(va!==
Z[0]||Pa!==Z[1]||Gd!==Z[2]||nd!==Z[3])v.colorMask(va,Pa,Gd,nd),Z[0]=va,Z[1]=Pa,Z[2]=Gd,Z[3]=nd;bd=W.frontFace;bd!==O.frontFace&&(v.frontFace(bd),O.frontFace=bd);rd=W.lineWidth;rd!==O.lineWidth&&(v.lineWidth(rd),O.lineWidth=rd);Lc=W.polygonOffset_enable;Lc!==O.polygonOffset_enable&&(Lc?v.enable(32823):v.disable(32823),O.polygonOffset_enable=Lc);pd=u[0];Fc=u[1];if(pd!==n[0]||Fc!==n[1])v.polygonOffset(pd,Fc),n[0]=pd,n[1]=Fc;fd=W.sample_alpha;fd!==O.sample_alpha&&(fd?v.enable(32926):v.disable(32926),
O.sample_alpha=fd);Oc=W.sample_enable;Oc!==O.sample_enable&&(Oc?v.enable(32928):v.disable(32928),O.sample_enable=Oc);Ic=R[0];Db=R[1];if(Ic!==ua[0]||Db!==ua[1])v.sampleCoverage(Ic,Db),ua[0]=Ic,ua[1]=Db;Hb=W.stencil_enable;Hb!==O.stencil_enable&&(Hb?v.enable(2960):v.disable(2960),O.stencil_enable=Hb);uc=W.stencil_mask;uc!==O.stencil_mask&&(v.stencilMask(uc),O.stencil_mask=uc);Ab=lc[0];xc=lc[1];Eb=lc[2];if(Ab!==fa[0]||xc!==fa[1]||Eb!==fa[2])v.stencilFunc(Ab,xc,Eb),fa[0]=Ab,fa[1]=xc,fa[2]=Eb;Jc=Fa[0];
mc=Fa[1];Gc=Fa[2];gd=Fa[3];if(Jc!==sa[0]||mc!==sa[1]||Gc!==sa[2]||gd!==sa[3])v.stencilOpSeparate(Jc,mc,Gc,gd),sa[0]=Jc,sa[1]=mc,sa[2]=Gc,sa[3]=gd;Xc=E[0];Cc=E[1];ec=E[2];Hc=E[3];if(Xc!==ta[0]||Cc!==ta[1]||ec!==ta[2]||Hc!==ta[3])v.stencilOpSeparate(Xc,Cc,ec,Hc),ta[0]=Xc,ta[1]=Cc,ta[2]=ec,ta[3]=Hc;pc=W.scissor_enable;pc!==O.scissor_enable&&(pc?v.enable(3089):v.disable(3089),O.scissor_enable=pc);qc=wa[0];nc=wa[1];fc=wa[2];gb=wa[3];if(qc!==Qa[0]||nc!==Qa[1]||fc!==Qa[2]||gb!==Qa[3])v.scissor(qc,nc,fc,
gb),Qa[0]=qc,Qa[1]=nc,Qa[2]=fc,Qa[3]=gb;Sc=Aa[0];Bb=Aa[1];db=Aa[2];Ob=Aa[3];if(Sc!==Ea[0]||Bb!==Ea[1]||db!==Ea[2]||Ob!==Ea[3])v.viewport(Sc,Bb,db,Ob),Ea[0]=Sc,Ea[1]=Bb,Ea[2]=db,Ea[3]=Ob}v.enable(2884);O.cull_enable=!0;v.cullFace(1029);O.cull_face=1029;if(k=O.profile)m=performance.now(),K.count+=a;v.useProgram(V.program);var bb,kb;Ca.setVAO(null);bb=H.call(this,q,p,r);G(bb)&&16===bb.length||ma.commandRaise(C,D);v.uniformMatrix4fv(X.location,!1,Array.isArray(bb)||bb instanceof Float32Array?bb:(ia[0]=
bb[0],ia[1]=bb[1],ia[2]=bb[2],ia[3]=bb[3],ia[4]=bb[4],ia[5]=bb[5],ia[6]=bb[6],ia[7]=bb[7],ia[8]=bb[8],ia[9]=bb[9],ia[10]=bb[10],ia[11]=bb[11],ia[12]=bb[12],ia[13]=bb[13],ia[14]=bb[14],ia[15]=bb[15],ia));kb=q.view;G(kb)&&16===kb.length||ma.commandRaise(c,D);v.uniformMatrix4fv(T.location,!1,Array.isArray(kb)||kb instanceof Float32Array?kb:(Ga[0]=kb[0],Ga[1]=kb[1],Ga[2]=kb[2],Ga[3]=kb[3],Ga[4]=kb[4],Ga[5]=kb[5],Ga[6]=kb[6],Ga[7]=kb[7],Ga[8]=kb[8],Ga[9]=kb[9],Ga[10]=kb[10],Ga[11]=kb[11],Ga[12]=kb[12],
Ga[13]=kb[13],Ga[14]=kb[14],Ga[15]=kb[15],Ga));for(r=0;r<a;++r){p=b[r];var Va,yd,Jb,Kb,rc,Pb,lb,Ib,Fb,yb,ib,Zb,Qb,sb,Ta,Rb,qb,bc,jb,rb,Ia,tb,Ja,fb,hb,Ka,mb,Wa,vb,ub,Oa,Bc,Sa,Lb,Gb,La,Pc,$a,Mb,Nb,nb,Na,$b,Ra,wb,xb,Ua,pb,gc,Ec,vc,cb,jc,Tc,Xa;(Va=p.position)&&("object"===typeof Va||"function"===typeof Va)&&(ca(Va)||F.getBuffer(Va)||F.getBuffer(Va.buffer)||ca(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||G(Va.constant)))||ma.commandRaise(B,D);yd=!1;Jb=null;Kb=!1;Pb=rc=0;lb=1;Ib=0;Fb=5126;
Qb=Zb=ib=yb=0;ca(Va)?(yd=!0,Jb=F.createStream(34962,Va),Fb=Jb.dtype):(Jb=F.getBuffer(Va))?Fb=Jb.dtype:"constant"in Va?(lb=2,"number"===typeof Va.constant?(ib=Va.constant,Zb=Qb=yb=0):(ib=0<Va.constant.length?Va.constant[0]:0,Zb=1<Va.constant.length?Va.constant[1]:0,Qb=2<Va.constant.length?Va.constant[2]:0,yb=3<Va.constant.length?Va.constant[3]:0)):(Jb=ca(Va.buffer)?F.createStream(34962,Va.buffer):F.getBuffer(Va.buffer),Fb="type"in Va?ga[Va.type]:Jb.dtype,Kb=!!Va.normalized,Pb=Va.size|0,rc=Va.offset|
0,Ib=Va.stride|0);sb=za.location;Ta=Q[sb];if(1===lb){if(Ta.buffer||v.enableVertexAttribArray(sb),Rb=Pb||3,Ta.type!==Fb||Ta.size!==Rb||Ta.buffer!==Jb||Ta.normalized!==Kb||Ta.offset!==rc||Ta.stride!==Ib)v.bindBuffer(34962,Jb.buffer),v.vertexAttribPointer(sb,Rb,Fb,Kb,Ib,rc),Ta.type=Fb,Ta.size=Rb,Ta.buffer=Jb,Ta.normalized=Kb,Ta.offset=rc,Ta.stride=Ib}else if(Ta.buffer&&(v.disableVertexAttribArray(sb),Ta.buffer=null),Ta.x!==ib||Ta.y!==Zb||Ta.z!==Qb||Ta.w!==yb)v.vertexAttrib4f(sb,ib,Zb,Qb,yb),Ta.x=ib,
Ta.y=Zb,Ta.z=Qb,Ta.w=yb;(qb=p.normal)&&("object"===typeof qb||"function"===typeof qb)&&(ca(qb)||F.getBuffer(qb)||F.getBuffer(qb.buffer)||ca(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||G(qb.constant)))||ma.commandRaise(l,D);bc=!1;jb=null;rb=!1;tb=Ia=0;Ja=1;fb=0;hb=5126;vb=Wa=mb=Ka=0;ca(qb)?(bc=!0,jb=F.createStream(34962,qb),hb=jb.dtype):(jb=F.getBuffer(qb))?hb=jb.dtype:"constant"in qb?(Ja=2,"number"===typeof qb.constant?(mb=qb.constant,Wa=vb=Ka=0):(mb=0<qb.constant.length?qb.constant[0]:
0,Wa=1<qb.constant.length?qb.constant[1]:0,vb=2<qb.constant.length?qb.constant[2]:0,Ka=3<qb.constant.length?qb.constant[3]:0)):(jb=ca(qb.buffer)?F.createStream(34962,qb.buffer):F.getBuffer(qb.buffer),hb="type"in qb?ga[qb.type]:jb.dtype,rb=!!qb.normalized,tb=qb.size|0,Ia=qb.offset|0,fb=qb.stride|0);ub=na.location;Oa=Q[ub];if(1===Ja){if(Oa.buffer||v.enableVertexAttribArray(ub),Bc=tb||3,Oa.type!==hb||Oa.size!==Bc||Oa.buffer!==jb||Oa.normalized!==rb||Oa.offset!==Ia||Oa.stride!==fb)v.bindBuffer(34962,
jb.buffer),v.vertexAttribPointer(ub,Bc,hb,rb,fb,Ia),Oa.type=hb,Oa.size=Bc,Oa.buffer=jb,Oa.normalized=rb,Oa.offset=Ia,Oa.stride=fb}else if(Oa.buffer&&(v.disableVertexAttribArray(ub),Oa.buffer=null),Oa.x!==mb||Oa.y!==Wa||Oa.z!==vb||Oa.w!==Ka)v.vertexAttrib4f(ub,mb,Wa,vb,Ka),Oa.x=mb,Oa.y=Wa,Oa.z=vb,Oa.w=Ka;(Sa=p.uv)&&("object"===typeof Sa||"function"===typeof Sa)&&(ca(Sa)||F.getBuffer(Sa)||F.getBuffer(Sa.buffer)||ca(Sa.buffer)||"constant"in Sa&&("number"===typeof Sa.constant||G(Sa.constant)))||ma.commandRaise(ya,
D);Lb=!1;Gb=null;La=!1;$a=Pc=0;Mb=1;Nb=0;nb=5126;wb=Ra=$b=Na=0;ca(Sa)?(Lb=!0,Gb=F.createStream(34962,Sa),nb=Gb.dtype):(Gb=F.getBuffer(Sa))?nb=Gb.dtype:"constant"in Sa?(Mb=2,"number"===typeof Sa.constant?($b=Sa.constant,Ra=wb=Na=0):($b=0<Sa.constant.length?Sa.constant[0]:0,Ra=1<Sa.constant.length?Sa.constant[1]:0,wb=2<Sa.constant.length?Sa.constant[2]:0,Na=3<Sa.constant.length?Sa.constant[3]:0)):(Gb=ca(Sa.buffer)?F.createStream(34962,Sa.buffer):F.getBuffer(Sa.buffer),nb="type"in Sa?ga[Sa.type]:Gb.dtype,
La=!!Sa.normalized,$a=Sa.size|0,Pc=Sa.offset|0,Nb=Sa.stride|0);xb=da.location;Ua=Q[xb];if(1===Mb){if(Ua.buffer||v.enableVertexAttribArray(xb),pb=$a||2,Ua.type!==nb||Ua.size!==pb||Ua.buffer!==Gb||Ua.normalized!==La||Ua.offset!==Pc||Ua.stride!==Nb)v.bindBuffer(34962,Gb.buffer),v.vertexAttribPointer(xb,pb,nb,La,Nb,Pc),Ua.type=nb,Ua.size=pb,Ua.buffer=Gb,Ua.normalized=La,Ua.offset=Pc,Ua.stride=Nb}else if(Ua.buffer&&(v.disableVertexAttribArray(xb),Ua.buffer=null),Ua.x!==$b||Ua.y!==Ra||Ua.z!==wb||Ua.w!==
Na)v.vertexAttrib4f(xb,$b,Ra,wb,Na),Ua.x=$b,Ua.y=Ra,Ua.z=wb,Ua.w=Na;(gc=p.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||ma.commandRaise(M,D);Ec=gc._texture;v.uniform1i(A.location,Ec.bind());vc=p.elements;cb=null;(jc=ca(vc))?cb=qa.createStream(vc):(cb=qa.getElements(vc),vc&&!cb&&ma.commandRaise(g,D));cb&&v.bindBuffer(34963,cb.buffer.buffer);Tc=cb?cb.primType:4;Xa=cb?cb.vertCount:-1;0<=Xa||ma.commandRaise(ka,D);Xa&&(cb?v.drawElements(Tc,Xa,
cb.type,0<<(cb.type-5121>>1)):v.drawArrays(Tc,0,Xa),yd&&F.destroyStream(Jb),bc&&F.destroyStream(jb),Lb&&F.destroyStream(Gb),Ec.unbind(),jc&&qa.destroyStream(cb))}O.dirty=!0;Ca.setVAO(null);q.view=d;k&&(K.cpuTime+=performance.now()-m)}}},"$7,color,position":function(a,I,D,K,m,e,d,b,t,y){var p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,ya,H,C,c,M,g,ka,A,na,ia,X,da,T,Q,F,q,O,P;p=a.attributes;h=a.context;N=a.current;w=a.draw;J=a.elements;aa=a.framebuffer;x=a.gl;S=a.next;r=a.shader;L=a.uniforms;ha=a.vao;k=S.blend_color;
f=N.blend_color;U=S.blend_equation;z=N.blend_equation;V=S.blend_func;B=N.blend_func;l=S.colorMask;ya=N.colorMask;H=S.depth_range;C=N.depth_range;c=S.polygonOffset_offset;M=N.polygonOffset_offset;g=S.sample_coverage;ka=N.sample_coverage;A=S.scissor_box;na=N.scissor_box;ia=S.stencil_func;X=N.stencil_func;da=S.stencil_opBack;T=N.stencil_opBack;Q=S.stencil_opFront;F=N.stencil_opFront;q=S.viewport;O=N.viewport;P=[1,0,0,1];return{draw:function(b){var a,d,r,h;b=aa.next;b!==aa.cur&&(b?x.bindFramebuffer(36160,
b.framebuffer):x.bindFramebuffer(36160,null),aa.cur=b);if(N.dirty){b=S.dither;b!==N.dither&&(b?x.enable(3024):x.disable(3024),N.dither=b);b=S.blend_enable;b!==N.blend_enable&&(b?x.enable(3042):x.disable(3042),N.blend_enable=b);b=k[0];d=k[1];r=k[2];h=k[3];if(b!==f[0]||d!==f[1]||r!==f[2]||h!==f[3])x.blendColor(b,d,r,h),f[0]=b,f[1]=d,f[2]=r,f[3]=h;b=U[0];d=U[1];if(b!==z[0]||d!==z[1])x.blendEquationSeparate(b,d),z[0]=b,z[1]=d;b=V[0];d=V[1];r=V[2];h=V[3];if(b!==B[0]||d!==B[1]||r!==B[2]||h!==B[3])x.blendFuncSeparate(b,
d,r,h),B[0]=b,B[1]=d,B[2]=r,B[3]=h;b=S.depth_enable;b!==N.depth_enable&&(b?x.enable(2929):x.disable(2929),N.depth_enable=b);b=S.depth_func;b!==N.depth_func&&(x.depthFunc(b),N.depth_func=b);b=H[0];d=H[1];if(b!==C[0]||d!==C[1])x.depthRange(b,d),C[0]=b,C[1]=d;b=S.depth_mask;b!==N.depth_mask&&(x.depthMask(b),N.depth_mask=b);b=l[0];d=l[1];r=l[2];h=l[3];if(b!==ya[0]||d!==ya[1]||r!==ya[2]||h!==ya[3])x.colorMask(b,d,r,h),ya[0]=b,ya[1]=d,ya[2]=r,ya[3]=h;b=S.cull_enable;b!==N.cull_enable&&(b?x.enable(2884):
x.disable(2884),N.cull_enable=b);b=S.cull_face;b!==N.cull_face&&(x.cullFace(b),N.cull_face=b);b=S.frontFace;b!==N.frontFace&&(x.frontFace(b),N.frontFace=b);b=S.lineWidth;b!==N.lineWidth&&(x.lineWidth(b),N.lineWidth=b);b=S.polygonOffset_enable;b!==N.polygonOffset_enable&&(b?x.enable(32823):x.disable(32823),N.polygonOffset_enable=b);b=c[0];d=c[1];if(b!==M[0]||d!==M[1])x.polygonOffset(b,d),M[0]=b,M[1]=d;b=S.sample_alpha;b!==N.sample_alpha&&(b?x.enable(32926):x.disable(32926),N.sample_alpha=b);b=S.sample_enable;
b!==N.sample_enable&&(b?x.enable(32928):x.disable(32928),N.sample_enable=b);b=g[0];d=g[1];if(b!==ka[0]||d!==ka[1])x.sampleCoverage(b,d),ka[0]=b,ka[1]=d;b=S.stencil_enable;b!==N.stencil_enable&&(b?x.enable(2960):x.disable(2960),N.stencil_enable=b);b=S.stencil_mask;b!==N.stencil_mask&&(x.stencilMask(b),N.stencil_mask=b);b=ia[0];d=ia[1];r=ia[2];if(b!==X[0]||d!==X[1]||r!==X[2])x.stencilFunc(b,d,r),X[0]=b,X[1]=d,X[2]=r;b=Q[0];d=Q[1];r=Q[2];h=Q[3];if(b!==F[0]||d!==F[1]||r!==F[2]||h!==F[3])x.stencilOpSeparate(b,
d,r,h),F[0]=b,F[1]=d,F[2]=r,F[3]=h;b=da[0];d=da[1];r=da[2];h=da[3];if(b!==T[0]||d!==T[1]||r!==T[2]||h!==T[3])x.stencilOpSeparate(b,d,r,h),T[0]=b,T[1]=d,T[2]=r,T[3]=h;b=S.scissor_enable;b!==N.scissor_enable&&(b?x.enable(3089):x.disable(3089),N.scissor_enable=b);b=A[0];d=A[1];r=A[2];h=A[3];if(b!==na[0]||d!==na[1]||r!==na[2]||h!==na[3])x.scissor(b,d,r,h),na[0]=b,na[1]=d,na[2]=r,na[3]=h;b=q[0];d=q[1];r=q[2];h=q[3];if(b!==O[0]||d!==O[1]||r!==O[2]||h!==O[3])x.viewport(b,d,r,h),O[0]=b,O[1]=d,O[2]=r,O[3]=
h;N.dirty=!1}if(b=N.profile)a=performance.now(),K.count++;x.useProgram(m.program);ha.setVAO(null);d=y.location;r=p[d];r.buffer||x.enableVertexAttribArray(d);if(r.type!==e.dtype||2!==r.size||r.buffer!==e||!1!==r.normalized||0!==r.offset||0!==r.stride)x.bindBuffer(34962,e.buffer),x.vertexAttribPointer(d,2,e.dtype,!1,0,0),r.type=e.dtype,r.size=2,r.buffer=e,r.normalized=!1,r.offset=0,r.stride=0;x.uniform4f(t.location,1,0,0,1);(d=w.elements)?x.bindBuffer(34963,d.buffer.buffer):ha.currentVAO&&(d=J.getElements(ha.currentVAO.elements))&&
x.bindBuffer(34963,d.buffer.buffer);r=w.primitive;h=w.offset;d?x.drawElements(r,3,d.type,h<<(d.type-5121>>1)):x.drawArrays(r,h,3);ha.setVAO(null);b&&(K.cpuTime+=performance.now()-a)},scope:function(b,c,a){var f,g,k,q,m,l,p,t,z,A,x,B,C,Z,y,F,u,n;if(f=N.profile)g=performance.now(),K.count++;k=w.count;w.count=3;q=L[3];L[3]=P;m=d.buffer;d.buffer=e;l=d.divisor;d.divisor=0;p=d.normalized;d.normalized=!1;t=d.offset;d.offset=0;z=d.size;d.size=0;A=d.state;d.state=1;x=d.stride;d.stride=0;B=d.type;d.type=e.dtype;
C=d.w;d.w=0;Z=d.x;d.x=0;y=d.y;d.y=0;F=d.z;d.z=0;u=r.vert;r.vert=2;n=r.frag;r.frag=1;c(h,b,a);f&&(K.cpuTime+=performance.now()-g);w.count=k;L[3]=q;d.buffer=m;d.divisor=l;d.normalized=p;d.offset=t;d.size=z;d.state=A;d.stride=x;d.type=B;d.w=C;d.x=Z;d.y=y;d.z=F;r.vert=u;r.frag=n},batch:function(a,d){var v,r,m;v=aa.next;v!==aa.cur&&(v?x.bindFramebuffer(36160,v.framebuffer):x.bindFramebuffer(36160,null),aa.cur=v);if(N.dirty){var h,D;v=S.dither;v!==N.dither&&(v?x.enable(3024):x.disable(3024),N.dither=v);
v=S.blend_enable;v!==N.blend_enable&&(v?x.enable(3042):x.disable(3042),N.blend_enable=v);v=k[0];m=k[1];h=k[2];D=k[3];if(v!==f[0]||m!==f[1]||h!==f[2]||D!==f[3])x.blendColor(v,m,h,D),f[0]=v,f[1]=m,f[2]=h,f[3]=D;v=U[0];m=U[1];if(v!==z[0]||m!==z[1])x.blendEquationSeparate(v,m),z[0]=v,z[1]=m;v=V[0];m=V[1];h=V[2];D=V[3];if(v!==B[0]||m!==B[1]||h!==B[2]||D!==B[3])x.blendFuncSeparate(v,m,h,D),B[0]=v,B[1]=m,B[2]=h,B[3]=D;v=S.depth_enable;v!==N.depth_enable&&(v?x.enable(2929):x.disable(2929),N.depth_enable=
v);v=S.depth_func;v!==N.depth_func&&(x.depthFunc(v),N.depth_func=v);v=H[0];m=H[1];if(v!==C[0]||m!==C[1])x.depthRange(v,m),C[0]=v,C[1]=m;v=S.depth_mask;v!==N.depth_mask&&(x.depthMask(v),N.depth_mask=v);v=l[0];m=l[1];h=l[2];D=l[3];if(v!==ya[0]||m!==ya[1]||h!==ya[2]||D!==ya[3])x.colorMask(v,m,h,D),ya[0]=v,ya[1]=m,ya[2]=h,ya[3]=D;v=S.cull_enable;v!==N.cull_enable&&(v?x.enable(2884):x.disable(2884),N.cull_enable=v);v=S.cull_face;v!==N.cull_face&&(x.cullFace(v),N.cull_face=v);v=S.frontFace;v!==N.frontFace&&
(x.frontFace(v),N.frontFace=v);v=S.lineWidth;v!==N.lineWidth&&(x.lineWidth(v),N.lineWidth=v);v=S.polygonOffset_enable;v!==N.polygonOffset_enable&&(v?x.enable(32823):x.disable(32823),N.polygonOffset_enable=v);v=c[0];m=c[1];if(v!==M[0]||m!==M[1])x.polygonOffset(v,m),M[0]=v,M[1]=m;v=S.sample_alpha;v!==N.sample_alpha&&(v?x.enable(32926):x.disable(32926),N.sample_alpha=v);v=S.sample_enable;v!==N.sample_enable&&(v?x.enable(32928):x.disable(32928),N.sample_enable=v);v=g[0];m=g[1];if(v!==ka[0]||m!==ka[1])x.sampleCoverage(v,
m),ka[0]=v,ka[1]=m;v=S.stencil_enable;v!==N.stencil_enable&&(v?x.enable(2960):x.disable(2960),N.stencil_enable=v);v=S.stencil_mask;v!==N.stencil_mask&&(x.stencilMask(v),N.stencil_mask=v);v=ia[0];m=ia[1];h=ia[2];if(v!==X[0]||m!==X[1]||h!==X[2])x.stencilFunc(v,m,h),X[0]=v,X[1]=m,X[2]=h;v=Q[0];m=Q[1];h=Q[2];D=Q[3];if(v!==F[0]||m!==F[1]||h!==F[2]||D!==F[3])x.stencilOpSeparate(v,m,h,D),F[0]=v,F[1]=m,F[2]=h,F[3]=D;v=da[0];m=da[1];h=da[2];D=da[3];if(v!==T[0]||m!==T[1]||h!==T[2]||D!==T[3])x.stencilOpSeparate(v,
m,h,D),T[0]=v,T[1]=m,T[2]=h,T[3]=D;v=S.scissor_enable;v!==N.scissor_enable&&(v?x.enable(3089):x.disable(3089),N.scissor_enable=v);v=A[0];m=A[1];h=A[2];D=A[3];if(v!==na[0]||m!==na[1]||h!==na[2]||D!==na[3])x.scissor(v,m,h,D),na[0]=v,na[1]=m,na[2]=h,na[3]=D;v=q[0];m=q[1];h=q[2];D=q[3];if(v!==O[0]||m!==O[1]||h!==O[2]||D!==O[3])x.viewport(v,m,h,D),O[0]=v,O[1]=m,O[2]=h,O[3]=D;N.dirty=!1}if(v=N.profile)r=performance.now(),K.count+=d;x.useProgram(b.program);var L;ha.setVAO(null);m=y.location;h=p[m];h.buffer||
x.enableVertexAttribArray(m);if(h.type!==e.dtype||2!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)x.bindBuffer(34962,e.buffer),x.vertexAttribPointer(m,2,e.dtype,!1,0,0),h.type=e.dtype,h.size=2,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;x.uniform4f(t.location,1,0,0,1);(h=w.elements)?x.bindBuffer(34963,h.buffer.buffer):ha.currentVAO&&(h=J.getElements(ha.currentVAO.elements))&&x.bindBuffer(34963,h.buffer.buffer);D=w.primitive;L=w.offset;for(m=0;m<d;++m)h?x.drawElements(D,
3,h.type,L<<(h.type-5121>>1)):x.drawArrays(D,L,3);ha.setVAO(null);v&&(K.cpuTime+=performance.now()-r)}}},"$19,angle,color,offset,position":function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U){var z,V,B,l,ya,H,C,c,M,g,ka,A,na,ia,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa;z=a.attributes;V=a.context;B=a.current;l=a.draw;ya=a.elements;H=a.framebuffer;C=a.gl;c=a.isArrayLike;M=a.next;g=a.shader;ka=a.uniforms;A=a.vao;na=M.blend_color;ia=B.blend_color;X=M.blend_equation;da=B.blend_equation;
T=M.blend_func;Q=B.blend_func;F=M.colorMask;q=B.colorMask;O=M.depth_range;P=B.depth_range;qa=M.polygonOffset_offset;oa=B.polygonOffset_offset;v=M.sample_coverage;G=B.sample_coverage;ca=M.scissor_box;W=B.scissor_box;la=M.stencil_func;ra=B.stencil_func;Ca=M.stencil_opBack;xa=B.stencil_opBack;ea=M.stencil_opFront;Da=B.stencil_opFront;ja=M.viewport;pa=B.viewport;return{draw:function(a){var g,r,h,x;g=H.next;g!==H.cur&&(g?C.bindFramebuffer(36160,g.framebuffer):C.bindFramebuffer(36160,null),H.cur=g);if(B.dirty){var u;
g=M.dither;g!==B.dither&&(g?C.enable(3024):C.disable(3024),B.dither=g);g=M.blend_enable;g!==B.blend_enable&&(g?C.enable(3042):C.disable(3042),B.blend_enable=g);g=na[0];h=na[1];x=na[2];u=na[3];if(g!==ia[0]||h!==ia[1]||x!==ia[2]||u!==ia[3])C.blendColor(g,h,x,u),ia[0]=g,ia[1]=h,ia[2]=x,ia[3]=u;g=X[0];h=X[1];if(g!==da[0]||h!==da[1])C.blendEquationSeparate(g,h),da[0]=g,da[1]=h;g=T[0];h=T[1];x=T[2];u=T[3];if(g!==Q[0]||h!==Q[1]||x!==Q[2]||u!==Q[3])C.blendFuncSeparate(g,h,x,u),Q[0]=g,Q[1]=h,Q[2]=x,Q[3]=u;
g=M.depth_func;g!==B.depth_func&&(C.depthFunc(g),B.depth_func=g);g=O[0];h=O[1];if(g!==P[0]||h!==P[1])C.depthRange(g,h),P[0]=g,P[1]=h;g=M.depth_mask;g!==B.depth_mask&&(C.depthMask(g),B.depth_mask=g);g=F[0];h=F[1];x=F[2];u=F[3];if(g!==q[0]||h!==q[1]||x!==q[2]||u!==q[3])C.colorMask(g,h,x,u),q[0]=g,q[1]=h,q[2]=x,q[3]=u;g=M.cull_enable;g!==B.cull_enable&&(g?C.enable(2884):C.disable(2884),B.cull_enable=g);g=M.cull_face;g!==B.cull_face&&(C.cullFace(g),B.cull_face=g);g=M.frontFace;g!==B.frontFace&&(C.frontFace(g),
B.frontFace=g);g=M.lineWidth;g!==B.lineWidth&&(C.lineWidth(g),B.lineWidth=g);g=M.polygonOffset_enable;g!==B.polygonOffset_enable&&(g?C.enable(32823):C.disable(32823),B.polygonOffset_enable=g);g=qa[0];h=qa[1];if(g!==oa[0]||h!==oa[1])C.polygonOffset(g,h),oa[0]=g,oa[1]=h;g=M.sample_alpha;g!==B.sample_alpha&&(g?C.enable(32926):C.disable(32926),B.sample_alpha=g);g=M.sample_enable;g!==B.sample_enable&&(g?C.enable(32928):C.disable(32928),B.sample_enable=g);g=v[0];h=v[1];if(g!==G[0]||h!==G[1])C.sampleCoverage(g,
h),G[0]=g,G[1]=h;g=M.stencil_enable;g!==B.stencil_enable&&(g?C.enable(2960):C.disable(2960),B.stencil_enable=g);g=M.stencil_mask;g!==B.stencil_mask&&(C.stencilMask(g),B.stencil_mask=g);g=la[0];h=la[1];x=la[2];if(g!==ra[0]||h!==ra[1]||x!==ra[2])C.stencilFunc(g,h,x),ra[0]=g,ra[1]=h,ra[2]=x;g=ea[0];h=ea[1];x=ea[2];u=ea[3];if(g!==Da[0]||h!==Da[1]||x!==Da[2]||u!==Da[3])C.stencilOpSeparate(g,h,x,u),Da[0]=g,Da[1]=h,Da[2]=x,Da[3]=u;g=Ca[0];h=Ca[1];x=Ca[2];u=Ca[3];if(g!==xa[0]||h!==xa[1]||x!==xa[2]||u!==xa[3])C.stencilOpSeparate(g,
h,x,u),xa[0]=g,xa[1]=h,xa[2]=x,xa[3]=u;g=M.scissor_enable;g!==B.scissor_enable&&(g?C.enable(3089):C.disable(3089),B.scissor_enable=g);g=ca[0];h=ca[1];x=ca[2];u=ca[3];if(g!==W[0]||h!==W[1]||x!==W[2]||u!==W[3])C.scissor(g,h,x,u),W[0]=g,W[1]=h,W[2]=x,W[3]=u;g=ja[0];h=ja[1];x=ja[2];u=ja[3];if(g!==pa[0]||h!==pa[1]||x!==pa[2]||u!==pa[3])C.viewport(g,h,x,u),pa[0]=g,pa[1]=h,pa[2]=x,pa[3]=u}C.disable(2929);B.depth_enable=!1;if(g=B.profile)r=performance.now(),K.count++;C.useProgram(m.program);A.setVAO(null);
h=U.location;x=z[h];x.buffer||C.enableVertexAttribArray(h);if(x.type!==e.dtype||2!==x.size||x.buffer!==e||!1!==x.normalized||0!==x.offset||0!==x.stride)C.bindBuffer(34962,e.buffer),C.vertexAttribPointer(h,2,e.dtype,!1,0,0),x.type=e.dtype,x.size=2,x.buffer=e,x.normalized=!1,x.offset=0,x.stride=0;h=d.call(this,V,a,0);"number"!==typeof h&&I.commandRaise(b,D);C.uniform1f(ha.location,h);h=a.offset;c(h)&&2===h.length||I.commandRaise(t,D);C.uniform2f(f.location,h[0],h[1]);a=y.call(this,V,a,0);c(a)&&4===
a.length||I.commandRaise(p,D);C.uniform4f(k.location,a[0],a[1],a[2],a[3]);(a=l.elements)?C.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=ya.getElements(A.currentVAO.elements))&&C.bindBuffer(34963,a.buffer.buffer);h=l.primitive;x=l.offset;a?C.drawElements(h,3,a.type,x<<(a.type-5121>>1)):C.drawArrays(h,x,3);B.dirty=!0;A.setVAO(null);g&&(K.cpuTime+=performance.now()-r)},scope:function(b,c,a){var d,f,k,n,q,m,v,r,p,t,E,x,z,A,C,y,D,F,G,ea,H;d=M.depth_enable;M.depth_enable=!1;if(f=B.profile)k=performance.now(),
K.count++;n=l.count;l.count=3;q=h.call(this,V,b,a);m=ka[3];ka[3]=q;v=N.call(this,V,b,a);q=ka[5];ka[5]=v;r=b.offset;v=ka[4];ka[4]=r;r=w.buffer;w.buffer=e;p=w.divisor;w.divisor=0;t=w.normalized;w.normalized=!1;E=w.offset;w.offset=0;x=w.size;w.size=0;z=w.state;w.state=1;A=w.stride;w.stride=0;C=w.type;w.type=e.dtype;y=w.w;w.w=0;D=w.x;w.x=0;F=w.y;w.y=0;G=w.z;w.z=0;ea=g.vert;g.vert=2;H=g.frag;g.frag=1;B.dirty=!0;c(V,b,a);M.depth_enable=d;f&&(K.cpuTime+=performance.now()-k);l.count=n;ka[3]=m;ka[5]=q;ka[4]=
v;w.buffer=r;w.divisor=p;w.normalized=t;w.offset=E;w.size=x;w.state=z;w.stride=A;w.type=C;w.w=y;w.x=D;w.y=F;w.z=G;g.vert=ea;g.frag=H;B.dirty=!0},batch:function(b,a){var d,g,m,u;d=H.next;d!==H.cur&&(d?C.bindFramebuffer(36160,d.framebuffer):C.bindFramebuffer(36160,null),H.cur=d);if(B.dirty){var n,h,p;d=M.dither;d!==B.dither&&(d?C.enable(3024):C.disable(3024),B.dither=d);d=M.blend_enable;d!==B.blend_enable&&(d?C.enable(3042):C.disable(3042),B.blend_enable=d);d=na[0];n=na[1];h=na[2];p=na[3];if(d!==ia[0]||
n!==ia[1]||h!==ia[2]||p!==ia[3])C.blendColor(d,n,h,p),ia[0]=d,ia[1]=n,ia[2]=h,ia[3]=p;d=X[0];n=X[1];if(d!==da[0]||n!==da[1])C.blendEquationSeparate(d,n),da[0]=d,da[1]=n;d=T[0];n=T[1];h=T[2];p=T[3];if(d!==Q[0]||n!==Q[1]||h!==Q[2]||p!==Q[3])C.blendFuncSeparate(d,n,h,p),Q[0]=d,Q[1]=n,Q[2]=h,Q[3]=p;d=M.depth_func;d!==B.depth_func&&(C.depthFunc(d),B.depth_func=d);d=O[0];n=O[1];if(d!==P[0]||n!==P[1])C.depthRange(d,n),P[0]=d,P[1]=n;d=M.depth_mask;d!==B.depth_mask&&(C.depthMask(d),B.depth_mask=d);d=F[0];
n=F[1];h=F[2];p=F[3];if(d!==q[0]||n!==q[1]||h!==q[2]||p!==q[3])C.colorMask(d,n,h,p),q[0]=d,q[1]=n,q[2]=h,q[3]=p;d=M.cull_enable;d!==B.cull_enable&&(d?C.enable(2884):C.disable(2884),B.cull_enable=d);d=M.cull_face;d!==B.cull_face&&(C.cullFace(d),B.cull_face=d);d=M.frontFace;d!==B.frontFace&&(C.frontFace(d),B.frontFace=d);d=M.lineWidth;d!==B.lineWidth&&(C.lineWidth(d),B.lineWidth=d);d=M.polygonOffset_enable;d!==B.polygonOffset_enable&&(d?C.enable(32823):C.disable(32823),B.polygonOffset_enable=d);d=qa[0];
n=qa[1];if(d!==oa[0]||n!==oa[1])C.polygonOffset(d,n),oa[0]=d,oa[1]=n;d=M.sample_alpha;d!==B.sample_alpha&&(d?C.enable(32926):C.disable(32926),B.sample_alpha=d);d=M.sample_enable;d!==B.sample_enable&&(d?C.enable(32928):C.disable(32928),B.sample_enable=d);d=v[0];n=v[1];if(d!==G[0]||n!==G[1])C.sampleCoverage(d,n),G[0]=d,G[1]=n;d=M.stencil_enable;d!==B.stencil_enable&&(d?C.enable(2960):C.disable(2960),B.stencil_enable=d);d=M.stencil_mask;d!==B.stencil_mask&&(C.stencilMask(d),B.stencil_mask=d);d=la[0];
n=la[1];h=la[2];if(d!==ra[0]||n!==ra[1]||h!==ra[2])C.stencilFunc(d,n,h),ra[0]=d,ra[1]=n,ra[2]=h;d=ea[0];n=ea[1];h=ea[2];p=ea[3];if(d!==Da[0]||n!==Da[1]||h!==Da[2]||p!==Da[3])C.stencilOpSeparate(d,n,h,p),Da[0]=d,Da[1]=n,Da[2]=h,Da[3]=p;d=Ca[0];n=Ca[1];h=Ca[2];p=Ca[3];if(d!==xa[0]||n!==xa[1]||h!==xa[2]||p!==xa[3])C.stencilOpSeparate(d,n,h,p),xa[0]=d,xa[1]=n,xa[2]=h,xa[3]=p;d=M.scissor_enable;d!==B.scissor_enable&&(d?C.enable(3089):C.disable(3089),B.scissor_enable=d);d=ca[0];n=ca[1];h=ca[2];p=ca[3];
if(d!==W[0]||n!==W[1]||h!==W[2]||p!==W[3])C.scissor(d,n,h,p),W[0]=d,W[1]=n,W[2]=h,W[3]=p;d=ja[0];n=ja[1];h=ja[2];p=ja[3];if(d!==pa[0]||n!==pa[1]||h!==pa[2]||p!==pa[3])C.viewport(d,n,h,p),pa[0]=d,pa[1]=n,pa[2]=h,pa[3]=p}C.disable(2929);B.depth_enable=!1;if(d=B.profile)g=performance.now(),K.count+=a;C.useProgram(J.program);A.setVAO(null);n=U.location;h=z[n];h.buffer||C.enableVertexAttribArray(n);if(h.type!==e.dtype||2!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)C.bindBuffer(34962,
e.buffer),C.vertexAttribPointer(n,2,e.dtype,!1,0,0),h.type=e.dtype,h.size=2,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;m=aa.call(this,V,u,m);"number"!==typeof m&&I.commandRaise(x,D);C.uniform1f(ha.location,m);(n=l.elements)?C.bindBuffer(34963,n.buffer.buffer):A.currentVAO&&(n=ya.getElements(A.currentVAO.elements))&&C.bindBuffer(34963,n.buffer.buffer);h=l.primitive;p=l.offset;for(m=0;m<a;++m){u=b[m];var t,y,w,fa,E,N,Fa,sa,Aa;t=u.offset;c(t)&&2===t.length||I.commandRaise(S,D);y=t[0];t=t[1];m&&
w===y&&fa===t||(w=y,fa=t,C.uniform2f(f.location,y,t));E=r.call(this,V,u,m);c(E)&&4===E.length||I.commandRaise(L,D);u=E[0];y=E[1];t=E[2];E=E[3];m&&N===u&&Fa===y&&sa===t&&Aa===E||(N=u,Fa=y,sa=t,Aa=E,C.uniform4f(k.location,u,y,t,E));n?C.drawElements(h,3,n.type,p<<(n.type-5121>>1)):C.drawArrays(h,p,3)}B.dirty=!0;A.setVAO(null);d&&(K.cpuTime+=performance.now()-g)}}},"$23,model,position,projection,view":function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l){var ia,H,C,c,M,g,ka,A,na,za,X,da,
T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa;ia=a.attributes;H=a.context;C=a.current;c=a.draw;M=a.framebuffer;g=a.gl;ka=a.isArrayLike;A=a.next;na=a.shader;za=a.uniforms;X=a.vao;da=A.blend_color;T=C.blend_color;Q=A.blend_equation;F=C.blend_equation;q=A.blend_func;O=C.blend_func;P=A.colorMask;qa=C.colorMask;oa=A.depth_range;v=C.depth_range;G=A.polygonOffset_offset;ca=C.polygonOffset_offset;W=A.sample_coverage;la=C.sample_coverage;ra=A.scissor_box;Ca=C.scissor_box;xa=
A.stencil_func;ea=C.stencil_func;Da=A.stencil_opBack;ja=C.stencil_opBack;pa=A.stencil_opFront;Ba=C.stencil_opFront;Ma=A.viewport;Z=C.viewport;zb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Za=new Float32Array(16);u=new Float32Array(16);n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];R=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);wa=new Float32Array(16);return{draw:function(c){var a,f,k,n;a=M.next;a!==M.cur&&(a?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,
null),M.cur=a);if(C.dirty){var r;a=A.dither;a!==C.dither&&(a?g.enable(3024):g.disable(3024),C.dither=a);a=A.blend_enable;a!==C.blend_enable&&(a?g.enable(3042):g.disable(3042),C.blend_enable=a);a=da[0];k=da[1];n=da[2];r=da[3];if(a!==T[0]||k!==T[1]||n!==T[2]||r!==T[3])g.blendColor(a,k,n,r),T[0]=a,T[1]=k,T[2]=n,T[3]=r;a=Q[0];k=Q[1];if(a!==F[0]||k!==F[1])g.blendEquationSeparate(a,k),F[0]=a,F[1]=k;a=q[0];k=q[1];n=q[2];r=q[3];if(a!==O[0]||k!==O[1]||n!==O[2]||r!==O[3])g.blendFuncSeparate(a,k,n,r),O[0]=a,
O[1]=k,O[2]=n,O[3]=r;a=A.depth_enable;a!==C.depth_enable&&(a?g.enable(2929):g.disable(2929),C.depth_enable=a);a=A.depth_func;a!==C.depth_func&&(g.depthFunc(a),C.depth_func=a);a=oa[0];k=oa[1];if(a!==v[0]||k!==v[1])g.depthRange(a,k),v[0]=a,v[1]=k;a=A.depth_mask;a!==C.depth_mask&&(g.depthMask(a),C.depth_mask=a);a=P[0];k=P[1];n=P[2];r=P[3];if(a!==qa[0]||k!==qa[1]||n!==qa[2]||r!==qa[3])g.colorMask(a,k,n,r),qa[0]=a,qa[1]=k,qa[2]=n,qa[3]=r;a=A.cull_enable;a!==C.cull_enable&&(a?g.enable(2884):g.disable(2884),
C.cull_enable=a);a=A.cull_face;a!==C.cull_face&&(g.cullFace(a),C.cull_face=a);a=A.frontFace;a!==C.frontFace&&(g.frontFace(a),C.frontFace=a);a=A.lineWidth;a!==C.lineWidth&&(g.lineWidth(a),C.lineWidth=a);a=A.polygonOffset_enable;a!==C.polygonOffset_enable&&(a?g.enable(32823):g.disable(32823),C.polygonOffset_enable=a);a=G[0];k=G[1];if(a!==ca[0]||k!==ca[1])g.polygonOffset(a,k),ca[0]=a,ca[1]=k;a=A.sample_alpha;a!==C.sample_alpha&&(a?g.enable(32926):g.disable(32926),C.sample_alpha=a);a=A.sample_enable;
a!==C.sample_enable&&(a?g.enable(32928):g.disable(32928),C.sample_enable=a);a=W[0];k=W[1];if(a!==la[0]||k!==la[1])g.sampleCoverage(a,k),la[0]=a,la[1]=k;a=A.stencil_enable;a!==C.stencil_enable&&(a?g.enable(2960):g.disable(2960),C.stencil_enable=a);a=A.stencil_mask;a!==C.stencil_mask&&(g.stencilMask(a),C.stencil_mask=a);a=xa[0];k=xa[1];n=xa[2];if(a!==ea[0]||k!==ea[1]||n!==ea[2])g.stencilFunc(a,k,n),ea[0]=a,ea[1]=k,ea[2]=n;a=pa[0];k=pa[1];n=pa[2];r=pa[3];if(a!==Ba[0]||k!==Ba[1]||n!==Ba[2]||r!==Ba[3])g.stencilOpSeparate(a,
k,n,r),Ba[0]=a,Ba[1]=k,Ba[2]=n,Ba[3]=r;a=Da[0];k=Da[1];n=Da[2];r=Da[3];if(a!==ja[0]||k!==ja[1]||n!==ja[2]||r!==ja[3])g.stencilOpSeparate(a,k,n,r),ja[0]=a,ja[1]=k,ja[2]=n,ja[3]=r;a=A.scissor_enable;a!==C.scissor_enable&&(a?g.enable(3089):g.disable(3089),C.scissor_enable=a);a=ra[0];k=ra[1];n=ra[2];r=ra[3];if(a!==Ca[0]||k!==Ca[1]||n!==Ca[2]||r!==Ca[3])g.scissor(a,k,n,r),Ca[0]=a,Ca[1]=k,Ca[2]=n,Ca[3]=r;a=Ma[0];k=Ma[1];n=Ma[2];r=Ma[3];if(a!==Z[0]||k!==Z[1]||n!==Z[2]||r!==Z[3])g.viewport(a,k,n,r),Z[0]=
a,Z[1]=k,Z[2]=n,Z[3]=r;C.dirty=!1}if(a=C.profile)f=performance.now(),K.count++;g.useProgram(m.program);X.setVAO(null);k=V.location;n=ia[k];n.buffer||g.enableVertexAttribArray(k);if(n.type!==e.dtype||3!==n.size||n.buffer!==e||!1!==n.normalized||0!==n.offset||0!==n.stride)g.bindBuffer(34962,e.buffer),g.vertexAttribPointer(k,3,e.dtype,!1,0,0),n.type=e.dtype,n.size=3,n.buffer=e,n.normalized=!1,n.offset=0,n.stride=0;g.uniformMatrix4fv(z.location,!1,zb);k=d.call(this,H,c,0);ka(k)&&16===k.length||I.commandRaise(b,
D);g.uniformMatrix4fv(l.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Za[0]=k[0],Za[1]=k[1],Za[2]=k[2],Za[3]=k[3],Za[4]=k[4],Za[5]=k[5],Za[6]=k[6],Za[7]=k[7],Za[8]=k[8],Za[9]=k[9],Za[10]=k[10],Za[11]=k[11],Za[12]=k[12],Za[13]=k[13],Za[14]=k[14],Za[15]=k[15],Za));c=t.call(this,H,c,0);ka(c)&&16===c.length||I.commandRaise(y,D);g.uniformMatrix4fv(B.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=
c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u));p&&g.bindBuffer(34963,p.buffer.buffer);c=p.primType;k=p.vertCount-0;0<=k||I.commandRaise(h,D);k&&(g.drawElements(c,k,p.type,0<<(p.type-5121>>1)),X.setVAO(null),a&&(K.cpuTime+=performance.now()-f))},scope:function(b,a,d){var g,f,k,u,q,h,m,r,v,p,l,t,z,A,R,B,Z,y,F,G,ea,W,M;if(g=C.profile)f=performance.now(),K.count++;k=c.elements;c.elements=N;u=c.offset;c.offset=0;q=N.vertCount-0;0<=q||I.commandRaise(w,D);h=c.count;
c.count=q;m=N.primType;q=c.primitive;c.primitive=m;m=za[3];za[3]=n;r=J.call(this,H,b,d);v=za[5];za[5]=r;p=aa.call(this,H,b,d);r=za[4];za[4]=p;p=x.buffer;x.buffer=e;l=x.divisor;x.divisor=0;t=x.normalized;x.normalized=!1;z=x.offset;x.offset=0;A=x.size;x.size=0;R=x.state;x.state=1;B=x.stride;x.stride=0;Z=x.type;x.type=e.dtype;y=x.w;x.w=0;F=x.x;x.x=0;G=x.y;x.y=0;ea=x.z;x.z=0;W=na.vert;na.vert=2;M=na.frag;na.frag=1;a(H,b,d);g&&(K.cpuTime+=performance.now()-f);c.elements=k;c.offset=u;c.count=h;c.primitive=
q;za[3]=m;za[5]=v;za[4]=r;x.buffer=p;x.divisor=l;x.normalized=t;x.offset=z;x.size=A;x.state=R;x.stride=B;x.type=Z;x.w=y;x.x=F;x.y=G;x.z=ea;na.vert=W;na.frag=M},batch:function(b,c){var a,d,u;a=M.next;a!==M.cur&&(a?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null),M.cur=a);if(C.dirty){var n,h,m;a=A.dither;a!==C.dither&&(a?g.enable(3024):g.disable(3024),C.dither=a);a=A.blend_enable;a!==C.blend_enable&&(a?g.enable(3042):g.disable(3042),C.blend_enable=a);a=da[0];n=da[1];h=da[2];m=da[3];
if(a!==T[0]||n!==T[1]||h!==T[2]||m!==T[3])g.blendColor(a,n,h,m),T[0]=a,T[1]=n,T[2]=h,T[3]=m;a=Q[0];n=Q[1];if(a!==F[0]||n!==F[1])g.blendEquationSeparate(a,n),F[0]=a,F[1]=n;a=q[0];n=q[1];h=q[2];m=q[3];if(a!==O[0]||n!==O[1]||h!==O[2]||m!==O[3])g.blendFuncSeparate(a,n,h,m),O[0]=a,O[1]=n,O[2]=h,O[3]=m;a=A.depth_enable;a!==C.depth_enable&&(a?g.enable(2929):g.disable(2929),C.depth_enable=a);a=A.depth_func;a!==C.depth_func&&(g.depthFunc(a),C.depth_func=a);a=oa[0];n=oa[1];if(a!==v[0]||n!==v[1])g.depthRange(a,
n),v[0]=a,v[1]=n;a=A.depth_mask;a!==C.depth_mask&&(g.depthMask(a),C.depth_mask=a);a=P[0];n=P[1];h=P[2];m=P[3];if(a!==qa[0]||n!==qa[1]||h!==qa[2]||m!==qa[3])g.colorMask(a,n,h,m),qa[0]=a,qa[1]=n,qa[2]=h,qa[3]=m;a=A.cull_enable;a!==C.cull_enable&&(a?g.enable(2884):g.disable(2884),C.cull_enable=a);a=A.cull_face;a!==C.cull_face&&(g.cullFace(a),C.cull_face=a);a=A.frontFace;a!==C.frontFace&&(g.frontFace(a),C.frontFace=a);a=A.lineWidth;a!==C.lineWidth&&(g.lineWidth(a),C.lineWidth=a);a=A.polygonOffset_enable;
a!==C.polygonOffset_enable&&(a?g.enable(32823):g.disable(32823),C.polygonOffset_enable=a);a=G[0];n=G[1];if(a!==ca[0]||n!==ca[1])g.polygonOffset(a,n),ca[0]=a,ca[1]=n;a=A.sample_alpha;a!==C.sample_alpha&&(a?g.enable(32926):g.disable(32926),C.sample_alpha=a);a=A.sample_enable;a!==C.sample_enable&&(a?g.enable(32928):g.disable(32928),C.sample_enable=a);a=W[0];n=W[1];if(a!==la[0]||n!==la[1])g.sampleCoverage(a,n),la[0]=a,la[1]=n;a=A.stencil_enable;a!==C.stencil_enable&&(a?g.enable(2960):g.disable(2960),
C.stencil_enable=a);a=A.stencil_mask;a!==C.stencil_mask&&(g.stencilMask(a),C.stencil_mask=a);a=xa[0];n=xa[1];h=xa[2];if(a!==ea[0]||n!==ea[1]||h!==ea[2])g.stencilFunc(a,n,h),ea[0]=a,ea[1]=n,ea[2]=h;a=pa[0];n=pa[1];h=pa[2];m=pa[3];if(a!==Ba[0]||n!==Ba[1]||h!==Ba[2]||m!==Ba[3])g.stencilOpSeparate(a,n,h,m),Ba[0]=a,Ba[1]=n,Ba[2]=h,Ba[3]=m;a=Da[0];n=Da[1];h=Da[2];m=Da[3];if(a!==ja[0]||n!==ja[1]||h!==ja[2]||m!==ja[3])g.stencilOpSeparate(a,n,h,m),ja[0]=a,ja[1]=n,ja[2]=h,ja[3]=m;a=A.scissor_enable;a!==C.scissor_enable&&
(a?g.enable(3089):g.disable(3089),C.scissor_enable=a);a=ra[0];n=ra[1];h=ra[2];m=ra[3];if(a!==Ca[0]||n!==Ca[1]||h!==Ca[2]||m!==Ca[3])g.scissor(a,n,h,m),Ca[0]=a,Ca[1]=n,Ca[2]=h,Ca[3]=m;a=Ma[0];n=Ma[1];h=Ma[2];m=Ma[3];if(a!==Z[0]||n!==Z[1]||h!==Z[2]||m!==Z[3])g.viewport(a,n,h,m),Z[0]=a,Z[1]=n,Z[2]=h,Z[3]=m;C.dirty=!1}if(a=C.profile)d=performance.now(),K.count+=c;g.useProgram(S.program);X.setVAO(null);n=V.location;h=ia[n];h.buffer||g.enableVertexAttribArray(n);if(h.type!==e.dtype||3!==h.size||h.buffer!==
e||!1!==h.normalized||0!==h.offset||0!==h.stride)g.bindBuffer(34962,e.buffer),g.vertexAttribPointer(n,3,e.dtype,!1,0,0),h.type=e.dtype,h.size=3,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;g.uniformMatrix4fv(z.location,!1,R);n=r.call(this,H,void 0,u);ka(n)&&16===n.length||I.commandRaise(L,D);g.uniformMatrix4fv(l.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(ua[0]=n[0],ua[1]=n[1],ua[2]=n[2],ua[3]=n[3],ua[4]=n[4],ua[5]=n[5],ua[6]=n[6],ua[7]=n[7],ua[8]=n[8],ua[9]=n[9],ua[10]=n[10],ua[11]=
n[11],ua[12]=n[12],ua[13]=n[13],ua[14]=n[14],ua[15]=n[15],ua));u=ha.call(this,H,void 0,u);ka(u)&&16===u.length||I.commandRaise(k,D);g.uniformMatrix4fv(B.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(wa[0]=u[0],wa[1]=u[1],wa[2]=u[2],wa[3]=u[3],wa[4]=u[4],wa[5]=u[5],wa[6]=u[6],wa[7]=u[7],wa[8]=u[8],wa[9]=u[9],wa[10]=u[10],wa[11]=u[11],wa[12]=u[12],wa[13]=u[13],wa[14]=u[14],wa[15]=u[15],wa));f&&g.bindBuffer(34963,f.buffer.buffer);n=f.primType;h=f.vertCount-0;0<=h||I.commandRaise(U,D);for(u=
0;u<c;++u)h&&g.drawElements(n,h,f.type,0<<(f.type-5121>>1));X.setVAO(null);a&&(K.cpuTime+=performance.now()-d)}}},$20:function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha){var k,f,U,z,V,B,l,ia,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca;k=a.context;f=a.current;U=a.framebuffer;z=a.gl;V=a.next;B=a.shader;l=a.uniforms;ia=a.vao;H=V.blend_color;C=f.blend_color;c=V.blend_equation;M=f.blend_equation;g=V.blend_func;ka=f.blend_func;A=V.colorMask;na=f.colorMask;za=V.depth_range;X=f.depth_range;
da=V.polygonOffset_offset;T=f.polygonOffset_offset;Q=V.sample_coverage;F=f.sample_coverage;q=V.scissor_box;O=f.scissor_box;P=V.stencil_func;qa=f.stencil_func;oa=V.stencil_opBack;v=f.stencil_opBack;G=V.stencil_opFront;ca=f.stencil_opFront;W=V.viewport;la=f.viewport;ra={};Ca={};return{draw:function(a){var h,r,p,l,x,w,Z,J,N,u,n,R,L;h=k.center;r=k.distance;p=k.eye;l=k.phi;x=k.projection;w=d.call(this,k,a,0);Z=k.theta;J=k.up;N=k.view;k.center=m;k.distance=2.302585092994046;k.eye=e;k.phi=0;k.projection=
w;k.theta=0;k.up=b;k.view=t;w=U.next;w!==U.cur&&(w?z.bindFramebuffer(36160,w.framebuffer):z.bindFramebuffer(36160,null),U.cur=w);if(f.dirty){w=V.dither;w!==f.dither&&(w?z.enable(3024):z.disable(3024),f.dither=w);w=V.blend_enable;w!==f.blend_enable&&(w?z.enable(3042):z.disable(3042),f.blend_enable=w);w=H[0];n=H[1];R=H[2];L=H[3];if(w!==C[0]||n!==C[1]||R!==C[2]||L!==C[3])z.blendColor(w,n,R,L),C[0]=w,C[1]=n,C[2]=R,C[3]=L;w=c[0];n=c[1];if(w!==M[0]||n!==M[1])z.blendEquationSeparate(w,n),M[0]=w,M[1]=n;w=
g[0];n=g[1];R=g[2];L=g[3];if(w!==ka[0]||n!==ka[1]||R!==ka[2]||L!==ka[3])z.blendFuncSeparate(w,n,R,L),ka[0]=w,ka[1]=n,ka[2]=R,ka[3]=L;w=V.depth_enable;w!==f.depth_enable&&(w?z.enable(2929):z.disable(2929),f.depth_enable=w);w=V.depth_func;w!==f.depth_func&&(z.depthFunc(w),f.depth_func=w);w=za[0];n=za[1];if(w!==X[0]||n!==X[1])z.depthRange(w,n),X[0]=w,X[1]=n;w=V.depth_mask;w!==f.depth_mask&&(z.depthMask(w),f.depth_mask=w);w=A[0];n=A[1];R=A[2];L=A[3];if(w!==na[0]||n!==na[1]||R!==na[2]||L!==na[3])z.colorMask(w,
n,R,L),na[0]=w,na[1]=n,na[2]=R,na[3]=L;w=V.cull_enable;w!==f.cull_enable&&(w?z.enable(2884):z.disable(2884),f.cull_enable=w);w=V.cull_face;w!==f.cull_face&&(z.cullFace(w),f.cull_face=w);w=V.frontFace;w!==f.frontFace&&(z.frontFace(w),f.frontFace=w);w=V.lineWidth;w!==f.lineWidth&&(z.lineWidth(w),f.lineWidth=w);w=V.polygonOffset_enable;w!==f.polygonOffset_enable&&(w?z.enable(32823):z.disable(32823),f.polygonOffset_enable=w);w=da[0];n=da[1];if(w!==T[0]||n!==T[1])z.polygonOffset(w,n),T[0]=w,T[1]=n;w=V.sample_alpha;
w!==f.sample_alpha&&(w?z.enable(32926):z.disable(32926),f.sample_alpha=w);w=V.sample_enable;w!==f.sample_enable&&(w?z.enable(32928):z.disable(32928),f.sample_enable=w);w=Q[0];n=Q[1];if(w!==F[0]||n!==F[1])z.sampleCoverage(w,n),F[0]=w,F[1]=n;w=V.stencil_enable;w!==f.stencil_enable&&(w?z.enable(2960):z.disable(2960),f.stencil_enable=w);w=V.stencil_mask;w!==f.stencil_mask&&(z.stencilMask(w),f.stencil_mask=w);w=P[0];n=P[1];R=P[2];if(w!==qa[0]||n!==qa[1]||R!==qa[2])z.stencilFunc(w,n,R),qa[0]=w,qa[1]=n,
qa[2]=R;w=G[0];n=G[1];R=G[2];L=G[3];if(w!==ca[0]||n!==ca[1]||R!==ca[2]||L!==ca[3])z.stencilOpSeparate(w,n,R,L),ca[0]=w,ca[1]=n,ca[2]=R,ca[3]=L;w=oa[0];n=oa[1];R=oa[2];L=oa[3];if(w!==v[0]||n!==v[1]||R!==v[2]||L!==v[3])z.stencilOpSeparate(w,n,R,L),v[0]=w,v[1]=n,v[2]=R,v[3]=L;w=V.scissor_enable;w!==f.scissor_enable&&(w?z.enable(3089):z.disable(3089),f.scissor_enable=w);w=q[0];n=q[1];R=q[2];L=q[3];if(w!==O[0]||n!==O[1]||R!==O[2]||L!==O[3])z.scissor(w,n,R,L),O[0]=w,O[1]=n,O[2]=R,O[3]=L;w=W[0];n=W[1];R=
W[2];L=W[3];if(w!==la[0]||n!==la[1]||R!==la[2]||L!==la[3])z.viewport(w,n,R,L),la[0]=w,la[1]=n,la[2]=R,la[3]=L;f.dirty=!1}if(w=f.profile)u=performance.now(),K.count++;n=B.program(B.vert,B.frag,D);z.useProgram(n.program);ia.setVAO(null);R=n.id;(L=ra[R])||(L=ra[R]=y(n));L.call(this,a);ia.setVAO(null);k.center=h;k.distance=r;k.eye=p;k.phi=l;k.projection=x;k.theta=Z;k.up=J;k.view=N;w&&(K.cpuTime+=performance.now()-u)},scope:function(b,c,a){var d,g,e,q,m,r,v,u,n,t,x,z,A,B,y,E,C,D,F;d=k.center;g=k.distance;
e=k.eye;q=k.phi;m=k.projection;r=N.call(this,k,b,a);v=k.theta;u=k.up;n=k.view;k.center=p;k.distance=2.302585092994046;k.eye=h;k.phi=0;k.projection=r;k.theta=0;k.up=w;k.view=J;if(r=f.profile)t=performance.now(),K.count++;x=k.center;z=l[1];l[1]=x;A=k.distance;x=l[2];l[2]=A;B=k.eye;A=l[3];l[3]=B;y=k.phi;B=l[4];l[4]=y;E=k.projection;y=l[5];l[5]=E;C=k.theta;E=l[6];l[6]=C;D=k.up;C=l[7];l[7]=D;D=k.view;F=l[8];l[8]=D;c(k,b,a);k.center=d;k.distance=g;k.eye=e;k.phi=q;k.projection=m;k.theta=v;k.up=u;k.view=
n;r&&(K.cpuTime+=performance.now()-t);l[1]=z;l[2]=x;l[3]=A;l[4]=B;l[5]=y;l[6]=E;l[7]=C;l[8]=F},batch:function(b,a){var d,e,h,m,p,l,t,w,u,n,R,y,J;d=k.center;e=k.distance;h=k.eye;m=k.phi;p=k.projection;l=S.call(this,k,b,0);t=k.theta;w=k.up;u=k.view;k.center=aa;k.distance=2.302585092994046;k.eye=x;k.phi=0;k.projection=l;k.theta=0;k.up=r;k.view=L;l=U.next;l!==U.cur&&(l?z.bindFramebuffer(36160,l.framebuffer):z.bindFramebuffer(36160,null),U.cur=l);if(f.dirty){l=V.dither;l!==f.dither&&(l?z.enable(3024):
z.disable(3024),f.dither=l);l=V.blend_enable;l!==f.blend_enable&&(l?z.enable(3042):z.disable(3042),f.blend_enable=l);l=H[0];R=H[1];y=H[2];J=H[3];if(l!==C[0]||R!==C[1]||y!==C[2]||J!==C[3])z.blendColor(l,R,y,J),C[0]=l,C[1]=R,C[2]=y,C[3]=J;l=c[0];R=c[1];if(l!==M[0]||R!==M[1])z.blendEquationSeparate(l,R),M[0]=l,M[1]=R;l=g[0];R=g[1];y=g[2];J=g[3];if(l!==ka[0]||R!==ka[1]||y!==ka[2]||J!==ka[3])z.blendFuncSeparate(l,R,y,J),ka[0]=l,ka[1]=R,ka[2]=y,ka[3]=J;l=V.depth_enable;l!==f.depth_enable&&(l?z.enable(2929):
z.disable(2929),f.depth_enable=l);l=V.depth_func;l!==f.depth_func&&(z.depthFunc(l),f.depth_func=l);l=za[0];R=za[1];if(l!==X[0]||R!==X[1])z.depthRange(l,R),X[0]=l,X[1]=R;l=V.depth_mask;l!==f.depth_mask&&(z.depthMask(l),f.depth_mask=l);l=A[0];R=A[1];y=A[2];J=A[3];if(l!==na[0]||R!==na[1]||y!==na[2]||J!==na[3])z.colorMask(l,R,y,J),na[0]=l,na[1]=R,na[2]=y,na[3]=J;l=V.cull_enable;l!==f.cull_enable&&(l?z.enable(2884):z.disable(2884),f.cull_enable=l);l=V.cull_face;l!==f.cull_face&&(z.cullFace(l),f.cull_face=
l);l=V.frontFace;l!==f.frontFace&&(z.frontFace(l),f.frontFace=l);l=V.lineWidth;l!==f.lineWidth&&(z.lineWidth(l),f.lineWidth=l);l=V.polygonOffset_enable;l!==f.polygonOffset_enable&&(l?z.enable(32823):z.disable(32823),f.polygonOffset_enable=l);l=da[0];R=da[1];if(l!==T[0]||R!==T[1])z.polygonOffset(l,R),T[0]=l,T[1]=R;l=V.sample_alpha;l!==f.sample_alpha&&(l?z.enable(32926):z.disable(32926),f.sample_alpha=l);l=V.sample_enable;l!==f.sample_enable&&(l?z.enable(32928):z.disable(32928),f.sample_enable=l);l=
Q[0];R=Q[1];if(l!==F[0]||R!==F[1])z.sampleCoverage(l,R),F[0]=l,F[1]=R;l=V.stencil_enable;l!==f.stencil_enable&&(l?z.enable(2960):z.disable(2960),f.stencil_enable=l);l=V.stencil_mask;l!==f.stencil_mask&&(z.stencilMask(l),f.stencil_mask=l);l=P[0];R=P[1];y=P[2];if(l!==qa[0]||R!==qa[1]||y!==qa[2])z.stencilFunc(l,R,y),qa[0]=l,qa[1]=R,qa[2]=y;l=G[0];R=G[1];y=G[2];J=G[3];if(l!==ca[0]||R!==ca[1]||y!==ca[2]||J!==ca[3])z.stencilOpSeparate(l,R,y,J),ca[0]=l,ca[1]=R,ca[2]=y,ca[3]=J;l=oa[0];R=oa[1];y=oa[2];J=oa[3];
if(l!==v[0]||R!==v[1]||y!==v[2]||J!==v[3])z.stencilOpSeparate(l,R,y,J),v[0]=l,v[1]=R,v[2]=y,v[3]=J;l=V.scissor_enable;l!==f.scissor_enable&&(l?z.enable(3089):z.disable(3089),f.scissor_enable=l);l=q[0];R=q[1];y=q[2];J=q[3];if(l!==O[0]||R!==O[1]||y!==O[2]||J!==O[3])z.scissor(l,R,y,J),O[0]=l,O[1]=R,O[2]=y,O[3]=J;l=W[0];R=W[1];y=W[2];J=W[3];if(l!==la[0]||R!==la[1]||y!==la[2]||J!==la[3])z.viewport(l,R,y,J),la[0]=l,la[1]=R,la[2]=y,la[3]=J;f.dirty=!1}if(l=f.profile)n=performance.now(),K.count+=a;R=B.program(B.vert,
B.frag,D);z.useProgram(R.program);ia.setVAO(null);y=R.id;(J=Ca[y])||(J=Ca[y]=ha(R));J.call(this,b,a);ia.setVAO(null);k.center=d;k.distance=e;k.eye=h;k.phi=m;k.projection=p;k.theta=t;k.up=w;k.view=u;l&&(K.cpuTime+=performance.now()-n)}}},"$27,position,projection,tex,uv,view":function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z,V,B,l,ia,H,C,c,M){var g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z,zb,Za,u,n,R,ua,wa,Qa,Pa;g=a.attributes;ka=a.context;A=a.current;na=
a.draw;za=a.framebuffer;X=a.gl;da=a.isArrayLike;T=a.next;Q=a.shader;F=a.uniforms;q=a.vao;O=T.blend_color;P=A.blend_color;qa=T.blend_equation;oa=A.blend_equation;v=T.blend_func;G=A.blend_func;ca=T.colorMask;W=A.colorMask;la=T.depth_range;ra=A.depth_range;Ca=T.polygonOffset_offset;xa=A.polygonOffset_offset;ea=T.sample_coverage;Da=A.sample_coverage;ja=T.scissor_box;pa=A.scissor_box;Ba=T.stencil_func;Ma=A.stencil_func;Z=T.stencil_opBack;zb=A.stencil_opBack;Za=T.stencil_opFront;u=A.stencil_opFront;n=T.viewport;
R=A.viewport;ua=new Float32Array(16);wa=new Float32Array(16);Qa=new Float32Array(16);Pa=new Float32Array(16);return{draw:function(a){var f,k,l,r;f=za.next;f!==za.cur&&(f?X.bindFramebuffer(36160,f.framebuffer):X.bindFramebuffer(36160,null),za.cur=f);if(A.dirty){var x;f=T.dither;f!==A.dither&&(f?X.enable(3024):X.disable(3024),A.dither=f);f=T.blend_enable;f!==A.blend_enable&&(f?X.enable(3042):X.disable(3042),A.blend_enable=f);f=O[0];l=O[1];r=O[2];x=O[3];if(f!==P[0]||l!==P[1]||r!==P[2]||x!==P[3])X.blendColor(f,
l,r,x),P[0]=f,P[1]=l,P[2]=r,P[3]=x;f=qa[0];l=qa[1];if(f!==oa[0]||l!==oa[1])X.blendEquationSeparate(f,l),oa[0]=f,oa[1]=l;f=v[0];l=v[1];r=v[2];x=v[3];if(f!==G[0]||l!==G[1]||r!==G[2]||x!==G[3])X.blendFuncSeparate(f,l,r,x),G[0]=f,G[1]=l,G[2]=r,G[3]=x;f=T.depth_enable;f!==A.depth_enable&&(f?X.enable(2929):X.disable(2929),A.depth_enable=f);f=T.depth_func;f!==A.depth_func&&(X.depthFunc(f),A.depth_func=f);f=la[0];l=la[1];if(f!==ra[0]||l!==ra[1])X.depthRange(f,l),ra[0]=f,ra[1]=l;f=T.depth_mask;f!==A.depth_mask&&
(X.depthMask(f),A.depth_mask=f);f=ca[0];l=ca[1];r=ca[2];x=ca[3];if(f!==W[0]||l!==W[1]||r!==W[2]||x!==W[3])X.colorMask(f,l,r,x),W[0]=f,W[1]=l,W[2]=r,W[3]=x;f=T.cull_enable;f!==A.cull_enable&&(f?X.enable(2884):X.disable(2884),A.cull_enable=f);f=T.cull_face;f!==A.cull_face&&(X.cullFace(f),A.cull_face=f);f=T.frontFace;f!==A.frontFace&&(X.frontFace(f),A.frontFace=f);f=T.lineWidth;f!==A.lineWidth&&(X.lineWidth(f),A.lineWidth=f);f=T.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?X.enable(32823):X.disable(32823),
A.polygonOffset_enable=f);f=Ca[0];l=Ca[1];if(f!==xa[0]||l!==xa[1])X.polygonOffset(f,l),xa[0]=f,xa[1]=l;f=T.sample_alpha;f!==A.sample_alpha&&(f?X.enable(32926):X.disable(32926),A.sample_alpha=f);f=T.sample_enable;f!==A.sample_enable&&(f?X.enable(32928):X.disable(32928),A.sample_enable=f);f=ea[0];l=ea[1];if(f!==Da[0]||l!==Da[1])X.sampleCoverage(f,l),Da[0]=f,Da[1]=l;f=T.stencil_enable;f!==A.stencil_enable&&(f?X.enable(2960):X.disable(2960),A.stencil_enable=f);f=T.stencil_mask;f!==A.stencil_mask&&(X.stencilMask(f),
A.stencil_mask=f);f=Ba[0];l=Ba[1];r=Ba[2];if(f!==Ma[0]||l!==Ma[1]||r!==Ma[2])X.stencilFunc(f,l,r),Ma[0]=f,Ma[1]=l,Ma[2]=r;f=Za[0];l=Za[1];r=Za[2];x=Za[3];if(f!==u[0]||l!==u[1]||r!==u[2]||x!==u[3])X.stencilOpSeparate(f,l,r,x),u[0]=f,u[1]=l,u[2]=r,u[3]=x;f=Z[0];l=Z[1];r=Z[2];x=Z[3];if(f!==zb[0]||l!==zb[1]||r!==zb[2]||x!==zb[3])X.stencilOpSeparate(f,l,r,x),zb[0]=f,zb[1]=l,zb[2]=r,zb[3]=x;f=T.scissor_enable;f!==A.scissor_enable&&(f?X.enable(3089):X.disable(3089),A.scissor_enable=f);f=ja[0];l=ja[1];r=
ja[2];x=ja[3];if(f!==pa[0]||l!==pa[1]||r!==pa[2]||x!==pa[3])X.scissor(f,l,r,x),pa[0]=f,pa[1]=l,pa[2]=r,pa[3]=x;f=n[0];l=n[1];r=n[2];x=n[3];if(f!==R[0]||l!==R[1]||r!==R[2]||x!==R[3])X.viewport(f,l,r,x),R[0]=f,R[1]=l,R[2]=r,R[3]=x;A.dirty=!1}if(f=A.profile)k=performance.now(),K.count++;X.useProgram(m.program);q.setVAO(null);l=ia.location;r=g[l];r.buffer||X.enableVertexAttribArray(l);if(r.type!==e.dtype||3!==r.size||r.buffer!==e||!1!==r.normalized||0!==r.offset||0!==r.stride)X.bindBuffer(34962,e.buffer),
X.vertexAttribPointer(l,3,e.dtype,!1,0,0),r.type=e.dtype,r.size=3,r.buffer=e,r.normalized=!1,r.offset=0,r.stride=0;l=c.location;r=g[l];r.buffer||X.enableVertexAttribArray(l);if(r.type!==d.dtype||2!==r.size||r.buffer!==d||!1!==r.normalized||0!==r.offset||0!==r.stride)X.bindBuffer(34962,d.buffer),X.vertexAttribPointer(l,2,d.dtype,!1,0,0),r.type=d.dtype,r.size=2,r.buffer=d,r.normalized=!1,r.offset=0,r.stride=0;l=b.call(this,ka,a,0);da(l)&&16===l.length||I.commandRaise(t,D);X.uniformMatrix4fv(H.location,
!1,Array.isArray(l)||l instanceof Float32Array?l:(ua[0]=l[0],ua[1]=l[1],ua[2]=l[2],ua[3]=l[3],ua[4]=l[4],ua[5]=l[5],ua[6]=l[6],ua[7]=l[7],ua[8]=l[8],ua[9]=l[9],ua[10]=l[10],ua[11]=l[11],ua[12]=l[12],ua[13]=l[13],ua[14]=l[14],ua[15]=l[15],ua));l=y.call(this,ka,a,0);da(l)&&16===l.length||I.commandRaise(p,D);X.uniformMatrix4fv(M.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(wa[0]=l[0],wa[1]=l[1],wa[2]=l[2],wa[3]=l[3],wa[4]=l[4],wa[5]=l[5],wa[6]=l[6],wa[7]=l[7],wa[8]=l[8],wa[9]=l[9],wa[10]=
l[10],wa[11]=l[11],wa[12]=l[12],wa[13]=l[13],wa[14]=l[14],wa[15]=l[15],wa));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||I.commandRaise(h,D);a=a._texture;X.uniform1i(C.location,a.bind());N&&X.bindBuffer(34963,N.buffer.buffer);l=N.primType;r=N.vertCount-0;0<=r||I.commandRaise(w,D);r&&(X.drawElements(l,r,N.type,0<<(N.type-5121>>1)),q.setVAO(null),f&&(K.cpuTime+=performance.now()-k),a.unbind())},scope:function(b,c,a){var f,g,k,n,u,l,h,q,
m,v,p,t,w,z,R,y,B,C,G,ea,H,N,W,Z,M,O,P,zb,ra,T,xa,U,V,X,ja;if(f=A.profile)g=performance.now(),K.count++;k=na.elements;na.elements=J;n=na.offset;na.offset=0;u=J.vertCount-0;0<=u||I.commandRaise(aa,D);l=na.count;na.count=u;h=J.primType;u=na.primitive;na.primitive=h;q=x.call(this,ka,b,a);h=F[3];F[3]=q;m=b.texture;q=F[5];F[5]=m;v=S.call(this,ka,b,a);m=F[4];F[4]=v;v=r.buffer;r.buffer=e;p=r.divisor;r.divisor=0;t=r.normalized;r.normalized=!1;w=r.offset;r.offset=0;z=r.size;r.size=0;R=r.state;r.state=1;y=
r.stride;r.stride=0;B=r.type;r.type=e.dtype;C=r.w;r.w=0;G=r.x;r.x=0;ea=r.y;r.y=0;H=r.z;r.z=0;N=L.buffer;L.buffer=d;W=L.divisor;L.divisor=0;Z=L.normalized;L.normalized=!1;M=L.offset;L.offset=0;O=L.size;L.size=0;P=L.state;L.state=1;zb=L.stride;L.stride=0;ra=L.type;L.type=d.dtype;T=L.w;L.w=0;xa=L.x;L.x=0;U=L.y;L.y=0;V=L.z;L.z=0;X=Q.vert;Q.vert=2;ja=Q.frag;Q.frag=1;c(ka,b,a);f&&(K.cpuTime+=performance.now()-g);na.elements=k;na.offset=n;na.count=l;na.primitive=u;F[3]=h;F[5]=q;F[4]=m;r.buffer=v;r.divisor=
p;r.normalized=t;r.offset=w;r.size=z;r.state=R;r.stride=y;r.type=B;r.w=C;r.x=G;r.y=ea;r.z=H;L.buffer=N;L.divisor=W;L.normalized=Z;L.offset=M;L.size=O;L.state=P;L.stride=zb;L.type=ra;L.w=T;L.x=xa;L.y=U;L.z=V;Q.vert=X;Q.frag=ja},batch:function(b,a){var h,r,m,p;h=za.next;h!==za.cur&&(h?X.bindFramebuffer(36160,h.framebuffer):X.bindFramebuffer(36160,null),za.cur=h);if(A.dirty){var t,x,w;h=T.dither;h!==A.dither&&(h?X.enable(3024):X.disable(3024),A.dither=h);h=T.blend_enable;h!==A.blend_enable&&(h?X.enable(3042):
X.disable(3042),A.blend_enable=h);h=O[0];t=O[1];x=O[2];w=O[3];if(h!==P[0]||t!==P[1]||x!==P[2]||w!==P[3])X.blendColor(h,t,x,w),P[0]=h,P[1]=t,P[2]=x,P[3]=w;h=qa[0];t=qa[1];if(h!==oa[0]||t!==oa[1])X.blendEquationSeparate(h,t),oa[0]=h,oa[1]=t;h=v[0];t=v[1];x=v[2];w=v[3];if(h!==G[0]||t!==G[1]||x!==G[2]||w!==G[3])X.blendFuncSeparate(h,t,x,w),G[0]=h,G[1]=t,G[2]=x,G[3]=w;h=T.depth_enable;h!==A.depth_enable&&(h?X.enable(2929):X.disable(2929),A.depth_enable=h);h=T.depth_func;h!==A.depth_func&&(X.depthFunc(h),
A.depth_func=h);h=la[0];t=la[1];if(h!==ra[0]||t!==ra[1])X.depthRange(h,t),ra[0]=h,ra[1]=t;h=T.depth_mask;h!==A.depth_mask&&(X.depthMask(h),A.depth_mask=h);h=ca[0];t=ca[1];x=ca[2];w=ca[3];if(h!==W[0]||t!==W[1]||x!==W[2]||w!==W[3])X.colorMask(h,t,x,w),W[0]=h,W[1]=t,W[2]=x,W[3]=w;h=T.cull_enable;h!==A.cull_enable&&(h?X.enable(2884):X.disable(2884),A.cull_enable=h);h=T.cull_face;h!==A.cull_face&&(X.cullFace(h),A.cull_face=h);h=T.frontFace;h!==A.frontFace&&(X.frontFace(h),A.frontFace=h);h=T.lineWidth;
h!==A.lineWidth&&(X.lineWidth(h),A.lineWidth=h);h=T.polygonOffset_enable;h!==A.polygonOffset_enable&&(h?X.enable(32823):X.disable(32823),A.polygonOffset_enable=h);h=Ca[0];t=Ca[1];if(h!==xa[0]||t!==xa[1])X.polygonOffset(h,t),xa[0]=h,xa[1]=t;h=T.sample_alpha;h!==A.sample_alpha&&(h?X.enable(32926):X.disable(32926),A.sample_alpha=h);h=T.sample_enable;h!==A.sample_enable&&(h?X.enable(32928):X.disable(32928),A.sample_enable=h);h=ea[0];t=ea[1];if(h!==Da[0]||t!==Da[1])X.sampleCoverage(h,t),Da[0]=h,Da[1]=
t;h=T.stencil_enable;h!==A.stencil_enable&&(h?X.enable(2960):X.disable(2960),A.stencil_enable=h);h=T.stencil_mask;h!==A.stencil_mask&&(X.stencilMask(h),A.stencil_mask=h);h=Ba[0];t=Ba[1];x=Ba[2];if(h!==Ma[0]||t!==Ma[1]||x!==Ma[2])X.stencilFunc(h,t,x),Ma[0]=h,Ma[1]=t,Ma[2]=x;h=Za[0];t=Za[1];x=Za[2];w=Za[3];if(h!==u[0]||t!==u[1]||x!==u[2]||w!==u[3])X.stencilOpSeparate(h,t,x,w),u[0]=h,u[1]=t,u[2]=x,u[3]=w;h=Z[0];t=Z[1];x=Z[2];w=Z[3];if(h!==zb[0]||t!==zb[1]||x!==zb[2]||w!==zb[3])X.stencilOpSeparate(h,
t,x,w),zb[0]=h,zb[1]=t,zb[2]=x,zb[3]=w;h=T.scissor_enable;h!==A.scissor_enable&&(h?X.enable(3089):X.disable(3089),A.scissor_enable=h);h=ja[0];t=ja[1];x=ja[2];w=ja[3];if(h!==pa[0]||t!==pa[1]||x!==pa[2]||w!==pa[3])X.scissor(h,t,x,w),pa[0]=h,pa[1]=t,pa[2]=x,pa[3]=w;h=n[0];t=n[1];x=n[2];w=n[3];if(h!==R[0]||t!==R[1]||x!==R[2]||w!==R[3])X.viewport(h,t,x,w),R[0]=h,R[1]=t,R[2]=x,R[3]=w;A.dirty=!1}if(h=A.profile)r=performance.now(),K.count+=a;X.useProgram(ha.program);q.setVAO(null);t=ia.location;x=g[t];x.buffer||
X.enableVertexAttribArray(t);if(x.type!==e.dtype||3!==x.size||x.buffer!==e||!1!==x.normalized||0!==x.offset||0!==x.stride)X.bindBuffer(34962,e.buffer),X.vertexAttribPointer(t,3,e.dtype,!1,0,0),x.type=e.dtype,x.size=3,x.buffer=e,x.normalized=!1,x.offset=0,x.stride=0;t=c.location;x=g[t];x.buffer||X.enableVertexAttribArray(t);if(x.type!==d.dtype||2!==x.size||x.buffer!==d||!1!==x.normalized||0!==x.offset||0!==x.stride)X.bindBuffer(34962,d.buffer),X.vertexAttribPointer(t,2,d.dtype,!1,0,0),x.type=d.dtype,
x.size=2,x.buffer=d,x.normalized=!1,x.offset=0,x.stride=0;t=k.call(this,ka,p,m);da(t)&&16===t.length||I.commandRaise(f,D);X.uniformMatrix4fv(H.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Qa[0]=t[0],Qa[1]=t[1],Qa[2]=t[2],Qa[3]=t[3],Qa[4]=t[4],Qa[5]=t[5],Qa[6]=t[6],Qa[7]=t[7],Qa[8]=t[8],Qa[9]=t[9],Qa[10]=t[10],Qa[11]=t[11],Qa[12]=t[12],Qa[13]=t[13],Qa[14]=t[14],Qa[15]=t[15],Qa));m=U.call(this,ka,p,m);da(m)&&16===m.length||I.commandRaise(z,D);X.uniformMatrix4fv(M.location,!1,Array.isArray(m)||
m instanceof Float32Array?m:(Pa[0]=m[0],Pa[1]=m[1],Pa[2]=m[2],Pa[3]=m[3],Pa[4]=m[4],Pa[5]=m[5],Pa[6]=m[6],Pa[7]=m[7],Pa[8]=m[8],Pa[9]=m[9],Pa[10]=m[10],Pa[11]=m[11],Pa[12]=m[12],Pa[13]=m[13],Pa[14]=m[14],Pa[15]=m[15],Pa));B&&X.bindBuffer(34963,B.buffer.buffer);t=B.primType;x=B.vertCount-0;0<=x||I.commandRaise(l,D);for(m=0;m<a;++m)p=b[m],(p=p.texture)&&"framebuffer"===p._reglType&&(p=p.color[0]),"function"===typeof p&&"texture2d"===p._reglType||I.commandRaise(V,D),p=p._texture,X.uniform1i(C.location,
p.bind()),x&&(X.drawElements(t,x,B.type,0<<(B.type-5121>>1)),p.unbind());q.setVAO(null);h&&(K.cpuTime+=performance.now()-r)}}},"$19,normal,position,projection,view":function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U){var z,V,B,l,ia,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba,Ma,Z;z=a.attributes;V=a.context;B=a.current;l=a.draw;ia=a.framebuffer;H=a.gl;C=a.isArrayLike;c=a.next;M=a.shader;g=a.uniforms;ka=a.vao;A=c.blend_color;na=B.blend_color;za=c.blend_equation;
X=B.blend_equation;da=c.blend_func;T=B.blend_func;Q=c.colorMask;F=B.colorMask;q=c.depth_range;O=B.depth_range;P=c.polygonOffset_offset;qa=B.polygonOffset_offset;oa=c.sample_coverage;v=B.sample_coverage;G=c.scissor_box;ca=B.scissor_box;W=c.stencil_func;la=B.stencil_func;ra=c.stencil_opBack;Ca=B.stencil_opBack;xa=c.stencil_opFront;ea=B.stencil_opFront;Da=c.viewport;ja=B.viewport;pa=new Float32Array(16);Ba=new Float32Array(16);Ma=new Float32Array(16);Z=new Float32Array(16);return{draw:function(a){var h,
u,n;a=ia.next;a!==ia.cur&&(a?H.bindFramebuffer(36160,a.framebuffer):H.bindFramebuffer(36160,null),ia.cur=a);if(B.dirty){var l;a=c.dither;a!==B.dither&&(a?H.enable(3024):H.disable(3024),B.dither=a);a=c.blend_enable;a!==B.blend_enable&&(a?H.enable(3042):H.disable(3042),B.blend_enable=a);a=A[0];u=A[1];n=A[2];l=A[3];if(a!==na[0]||u!==na[1]||n!==na[2]||l!==na[3])H.blendColor(a,u,n,l),na[0]=a,na[1]=u,na[2]=n,na[3]=l;a=za[0];u=za[1];if(a!==X[0]||u!==X[1])H.blendEquationSeparate(a,u),X[0]=a,X[1]=u;a=da[0];
u=da[1];n=da[2];l=da[3];if(a!==T[0]||u!==T[1]||n!==T[2]||l!==T[3])H.blendFuncSeparate(a,u,n,l),T[0]=a,T[1]=u,T[2]=n,T[3]=l;a=c.depth_enable;a!==B.depth_enable&&(a?H.enable(2929):H.disable(2929),B.depth_enable=a);a=c.depth_func;a!==B.depth_func&&(H.depthFunc(a),B.depth_func=a);a=q[0];u=q[1];if(a!==O[0]||u!==O[1])H.depthRange(a,u),O[0]=a,O[1]=u;a=c.depth_mask;a!==B.depth_mask&&(H.depthMask(a),B.depth_mask=a);a=Q[0];u=Q[1];n=Q[2];l=Q[3];if(a!==F[0]||u!==F[1]||n!==F[2]||l!==F[3])H.colorMask(a,u,n,l),
F[0]=a,F[1]=u,F[2]=n,F[3]=l;a=c.cull_enable;a!==B.cull_enable&&(a?H.enable(2884):H.disable(2884),B.cull_enable=a);a=c.cull_face;a!==B.cull_face&&(H.cullFace(a),B.cull_face=a);a=c.frontFace;a!==B.frontFace&&(H.frontFace(a),B.frontFace=a);a=c.lineWidth;a!==B.lineWidth&&(H.lineWidth(a),B.lineWidth=a);a=c.polygonOffset_enable;a!==B.polygonOffset_enable&&(a?H.enable(32823):H.disable(32823),B.polygonOffset_enable=a);a=P[0];u=P[1];if(a!==qa[0]||u!==qa[1])H.polygonOffset(a,u),qa[0]=a,qa[1]=u;a=c.sample_alpha;
a!==B.sample_alpha&&(a?H.enable(32926):H.disable(32926),B.sample_alpha=a);a=c.sample_enable;a!==B.sample_enable&&(a?H.enable(32928):H.disable(32928),B.sample_enable=a);a=oa[0];u=oa[1];if(a!==v[0]||u!==v[1])H.sampleCoverage(a,u),v[0]=a,v[1]=u;a=c.stencil_enable;a!==B.stencil_enable&&(a?H.enable(2960):H.disable(2960),B.stencil_enable=a);a=c.stencil_mask;a!==B.stencil_mask&&(H.stencilMask(a),B.stencil_mask=a);a=W[0];u=W[1];n=W[2];if(a!==la[0]||u!==la[1]||n!==la[2])H.stencilFunc(a,u,n),la[0]=a,la[1]=
u,la[2]=n;a=xa[0];u=xa[1];n=xa[2];l=xa[3];if(a!==ea[0]||u!==ea[1]||n!==ea[2]||l!==ea[3])H.stencilOpSeparate(a,u,n,l),ea[0]=a,ea[1]=u,ea[2]=n,ea[3]=l;a=ra[0];u=ra[1];n=ra[2];l=ra[3];if(a!==Ca[0]||u!==Ca[1]||n!==Ca[2]||l!==Ca[3])H.stencilOpSeparate(a,u,n,l),Ca[0]=a,Ca[1]=u,Ca[2]=n,Ca[3]=l;a=c.scissor_enable;a!==B.scissor_enable&&(a?H.enable(3089):H.disable(3089),B.scissor_enable=a);a=G[0];u=G[1];n=G[2];l=G[3];if(a!==ca[0]||u!==ca[1]||n!==ca[2]||l!==ca[3])H.scissor(a,u,n,l),ca[0]=a,ca[1]=u,ca[2]=n,ca[3]=
l;a=Da[0];u=Da[1];n=Da[2];l=Da[3];if(a!==ja[0]||u!==ja[1]||n!==ja[2]||l!==ja[3])H.viewport(a,u,n,l),ja[0]=a,ja[1]=u,ja[2]=n,ja[3]=l;B.dirty=!1}if(a=B.profile)h=performance.now(),K.count++;H.useProgram(m.program);ka.setVAO(null);u=k.location;n=z[u];n.buffer||H.enableVertexAttribArray(u);if(n.type!==e.dtype||3!==n.size||n.buffer!==e||!1!==n.normalized||0!==n.offset||0!==n.stride)H.bindBuffer(34962,e.buffer),H.vertexAttribPointer(u,3,e.dtype,!1,0,0),n.type=e.dtype,n.size=3,n.buffer=e,n.normalized=!1,
n.offset=0,n.stride=0;u=ha.location;n=z[u];n.buffer||H.enableVertexAttribArray(u);if(n.type!==d.dtype||3!==n.size||n.buffer!==d||!1!==n.normalized||0!==n.offset||0!==n.stride)H.bindBuffer(34962,d.buffer),H.vertexAttribPointer(u,3,d.dtype,!1,0,0),n.type=d.dtype,n.size=3,n.buffer=d,n.normalized=!1,n.offset=0,n.stride=0;u=g[5];C(u)&&16===u.length||I.commandRaise(b,D);H.uniformMatrix4fv(f.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(pa[0]=u[0],pa[1]=u[1],pa[2]=u[2],pa[3]=u[3],pa[4]=u[4],
pa[5]=u[5],pa[6]=u[6],pa[7]=u[7],pa[8]=u[8],pa[9]=u[9],pa[10]=u[10],pa[11]=u[11],pa[12]=u[12],pa[13]=u[13],pa[14]=u[14],pa[15]=u[15],pa));u=g[8];C(u)&&16===u.length||I.commandRaise(t,D);H.uniformMatrix4fv(U.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(Ba[0]=u[0],Ba[1]=u[1],Ba[2]=u[2],Ba[3]=u[3],Ba[4]=u[4],Ba[5]=u[5],Ba[6]=u[6],Ba[7]=u[7],Ba[8]=u[8],Ba[9]=u[9],Ba[10]=u[10],Ba[11]=u[11],Ba[12]=u[12],Ba[13]=u[13],Ba[14]=u[14],Ba[15]=u[15],Ba));y&&H.bindBuffer(34963,y.buffer.buffer);u=y.primType;
n=y.vertCount-0;0<=n||I.commandRaise(p,D);n&&(H.drawElements(u,n,y.type,0<<(y.type-5121>>1)),ka.setVAO(null),a&&(K.cpuTime+=performance.now()-h))},scope:function(b,c,a){var f,g,k,m,r,q,v,t,p,x,z,A,y,C,F,G,ea,H,W,L,Z,S,O,P,Q,ra,T,xa,U,aa,X,ja;if(f=B.profile)g=performance.now(),K.count++;k=l.elements;l.elements=h;m=l.offset;l.offset=0;r=h.vertCount-0;0<=r||I.commandRaise(N,D);q=l.count;l.count=r;v=h.primType;r=l.primitive;l.primitive=v;v=w.buffer;w.buffer=d;t=w.divisor;w.divisor=0;p=w.normalized;w.normalized=
!1;x=w.offset;w.offset=0;z=w.size;w.size=0;A=w.state;w.state=1;y=w.stride;w.stride=0;C=w.type;w.type=d.dtype;F=w.w;w.w=0;G=w.x;w.x=0;ea=w.y;w.y=0;H=w.z;w.z=0;W=J.buffer;J.buffer=e;L=J.divisor;J.divisor=0;Z=J.normalized;J.normalized=!1;S=J.offset;J.offset=0;O=J.size;J.size=0;P=J.state;J.state=1;Q=J.stride;J.stride=0;ra=J.type;J.type=e.dtype;T=J.w;J.w=0;xa=J.x;J.x=0;U=J.y;J.y=0;aa=J.z;J.z=0;X=M.vert;M.vert=10;ja=M.frag;M.frag=9;c(V,b,a);f&&(K.cpuTime+=performance.now()-g);l.elements=k;l.offset=m;l.count=
q;l.primitive=r;w.buffer=v;w.divisor=t;w.normalized=p;w.offset=x;w.size=z;w.state=A;w.stride=y;w.type=C;w.w=F;w.x=G;w.y=ea;w.z=H;J.buffer=W;J.divisor=L;J.normalized=Z;J.offset=S;J.size=O;J.state=P;J.stride=Q;J.type=ra;J.w=T;J.x=xa;J.y=U;J.z=aa;M.vert=X;M.frag=ja},batch:function(b,a){var h,n,l;h=ia.next;h!==ia.cur&&(h?H.bindFramebuffer(36160,h.framebuffer):H.bindFramebuffer(36160,null),ia.cur=h);if(B.dirty){var m,t;h=c.dither;h!==B.dither&&(h?H.enable(3024):H.disable(3024),B.dither=h);h=c.blend_enable;
h!==B.blend_enable&&(h?H.enable(3042):H.disable(3042),B.blend_enable=h);h=A[0];l=A[1];m=A[2];t=A[3];if(h!==na[0]||l!==na[1]||m!==na[2]||t!==na[3])H.blendColor(h,l,m,t),na[0]=h,na[1]=l,na[2]=m,na[3]=t;h=za[0];l=za[1];if(h!==X[0]||l!==X[1])H.blendEquationSeparate(h,l),X[0]=h,X[1]=l;h=da[0];l=da[1];m=da[2];t=da[3];if(h!==T[0]||l!==T[1]||m!==T[2]||t!==T[3])H.blendFuncSeparate(h,l,m,t),T[0]=h,T[1]=l,T[2]=m,T[3]=t;h=c.depth_enable;h!==B.depth_enable&&(h?H.enable(2929):H.disable(2929),B.depth_enable=h);
h=c.depth_func;h!==B.depth_func&&(H.depthFunc(h),B.depth_func=h);h=q[0];l=q[1];if(h!==O[0]||l!==O[1])H.depthRange(h,l),O[0]=h,O[1]=l;h=c.depth_mask;h!==B.depth_mask&&(H.depthMask(h),B.depth_mask=h);h=Q[0];l=Q[1];m=Q[2];t=Q[3];if(h!==F[0]||l!==F[1]||m!==F[2]||t!==F[3])H.colorMask(h,l,m,t),F[0]=h,F[1]=l,F[2]=m,F[3]=t;h=c.cull_enable;h!==B.cull_enable&&(h?H.enable(2884):H.disable(2884),B.cull_enable=h);h=c.cull_face;h!==B.cull_face&&(H.cullFace(h),B.cull_face=h);h=c.frontFace;h!==B.frontFace&&(H.frontFace(h),
B.frontFace=h);h=c.lineWidth;h!==B.lineWidth&&(H.lineWidth(h),B.lineWidth=h);h=c.polygonOffset_enable;h!==B.polygonOffset_enable&&(h?H.enable(32823):H.disable(32823),B.polygonOffset_enable=h);h=P[0];l=P[1];if(h!==qa[0]||l!==qa[1])H.polygonOffset(h,l),qa[0]=h,qa[1]=l;h=c.sample_alpha;h!==B.sample_alpha&&(h?H.enable(32926):H.disable(32926),B.sample_alpha=h);h=c.sample_enable;h!==B.sample_enable&&(h?H.enable(32928):H.disable(32928),B.sample_enable=h);h=oa[0];l=oa[1];if(h!==v[0]||l!==v[1])H.sampleCoverage(h,
l),v[0]=h,v[1]=l;h=c.stencil_enable;h!==B.stencil_enable&&(h?H.enable(2960):H.disable(2960),B.stencil_enable=h);h=c.stencil_mask;h!==B.stencil_mask&&(H.stencilMask(h),B.stencil_mask=h);h=W[0];l=W[1];m=W[2];if(h!==la[0]||l!==la[1]||m!==la[2])H.stencilFunc(h,l,m),la[0]=h,la[1]=l,la[2]=m;h=xa[0];l=xa[1];m=xa[2];t=xa[3];if(h!==ea[0]||l!==ea[1]||m!==ea[2]||t!==ea[3])H.stencilOpSeparate(h,l,m,t),ea[0]=h,ea[1]=l,ea[2]=m,ea[3]=t;h=ra[0];l=ra[1];m=ra[2];t=ra[3];if(h!==Ca[0]||l!==Ca[1]||m!==Ca[2]||t!==Ca[3])H.stencilOpSeparate(h,
l,m,t),Ca[0]=h,Ca[1]=l,Ca[2]=m,Ca[3]=t;h=c.scissor_enable;h!==B.scissor_enable&&(h?H.enable(3089):H.disable(3089),B.scissor_enable=h);h=G[0];l=G[1];m=G[2];t=G[3];if(h!==ca[0]||l!==ca[1]||m!==ca[2]||t!==ca[3])H.scissor(h,l,m,t),ca[0]=h,ca[1]=l,ca[2]=m,ca[3]=t;h=Da[0];l=Da[1];m=Da[2];t=Da[3];if(h!==ja[0]||l!==ja[1]||m!==ja[2]||t!==ja[3])H.viewport(h,l,m,t),ja[0]=h,ja[1]=l,ja[2]=m,ja[3]=t;B.dirty=!1}if(h=B.profile)n=performance.now(),K.count+=a;H.useProgram(aa.program);ka.setVAO(null);l=k.location;m=
z[l];m.buffer||H.enableVertexAttribArray(l);if(m.type!==e.dtype||3!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||0!==m.stride)H.bindBuffer(34962,e.buffer),H.vertexAttribPointer(l,3,e.dtype,!1,0,0),m.type=e.dtype,m.size=3,m.buffer=e,m.normalized=!1,m.offset=0,m.stride=0;l=ha.location;m=z[l];m.buffer||H.enableVertexAttribArray(l);if(m.type!==d.dtype||3!==m.size||m.buffer!==d||!1!==m.normalized||0!==m.offset||0!==m.stride)H.bindBuffer(34962,d.buffer),H.vertexAttribPointer(l,3,d.dtype,!1,0,
0),m.type=d.dtype,m.size=3,m.buffer=d,m.normalized=!1,m.offset=0,m.stride=0;l=g[5];C(l)&&16===l.length||I.commandRaise(x,D);H.uniformMatrix4fv(f.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ma[0]=l[0],Ma[1]=l[1],Ma[2]=l[2],Ma[3]=l[3],Ma[4]=l[4],Ma[5]=l[5],Ma[6]=l[6],Ma[7]=l[7],Ma[8]=l[8],Ma[9]=l[9],Ma[10]=l[10],Ma[11]=l[11],Ma[12]=l[12],Ma[13]=l[13],Ma[14]=l[14],Ma[15]=l[15],Ma));l=g[8];C(l)&&16===l.length||I.commandRaise(S,D);H.uniformMatrix4fv(U.location,!1,Array.isArray(l)||l instanceof
Float32Array?l:(Z[0]=l[0],Z[1]=l[1],Z[2]=l[2],Z[3]=l[3],Z[4]=l[4],Z[5]=l[5],Z[6]=l[6],Z[7]=l[7],Z[8]=l[8],Z[9]=l[9],Z[10]=l[10],Z[11]=l[11],Z[12]=l[12],Z[13]=l[13],Z[14]=l[14],Z[15]=l[15],Z));r&&H.bindBuffer(34963,r.buffer.buffer);m=r.primType;t=r.vertCount-0;0<=t||I.commandRaise(L,D);for(l=0;l<a;++l)t&&H.drawElements(m,t,r.type,0<<(r.type-5121>>1));ka.setVAO(null);h&&(K.cpuTime+=performance.now()-n)}}},"$14,angle,color,position":function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S){var r,L,ha,k,f,U,z,V,
B,l,ia,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra;r=a.attributes;L=a.context;ha=a.current;k=a.draw;f=a.elements;U=a.framebuffer;z=a.gl;V=a.isArrayLike;B=a.next;l=a.shader;ia=a.uniforms;H=a.vao;C=B.blend_color;c=ha.blend_color;M=B.blend_equation;g=ha.blend_equation;ka=B.blend_func;A=ha.blend_func;na=B.colorMask;za=ha.colorMask;X=B.depth_range;da=ha.depth_range;T=B.polygonOffset_offset;Q=ha.polygonOffset_offset;F=B.sample_coverage;q=ha.sample_coverage;O=B.scissor_box;P=ha.scissor_box;
qa=B.stencil_func;oa=ha.stencil_func;v=B.stencil_opBack;G=ha.stencil_opBack;ca=B.stencil_opFront;W=ha.stencil_opFront;la=B.viewport;ra=ha.viewport;return{draw:function(a){var h,l,p,w;h=U.next;h!==U.cur&&(h?z.bindFramebuffer(36160,h.framebuffer):z.bindFramebuffer(36160,null),U.cur=h);if(ha.dirty){var y;h=B.dither;h!==ha.dither&&(h?z.enable(3024):z.disable(3024),ha.dither=h);h=B.blend_enable;h!==ha.blend_enable&&(h?z.enable(3042):z.disable(3042),ha.blend_enable=h);h=C[0];p=C[1];w=C[2];y=C[3];if(h!==
c[0]||p!==c[1]||w!==c[2]||y!==c[3])z.blendColor(h,p,w,y),c[0]=h,c[1]=p,c[2]=w,c[3]=y;h=M[0];p=M[1];if(h!==g[0]||p!==g[1])z.blendEquationSeparate(h,p),g[0]=h,g[1]=p;h=ka[0];p=ka[1];w=ka[2];y=ka[3];if(h!==A[0]||p!==A[1]||w!==A[2]||y!==A[3])z.blendFuncSeparate(h,p,w,y),A[0]=h,A[1]=p,A[2]=w,A[3]=y;h=B.depth_func;h!==ha.depth_func&&(z.depthFunc(h),ha.depth_func=h);h=X[0];p=X[1];if(h!==da[0]||p!==da[1])z.depthRange(h,p),da[0]=h,da[1]=p;h=B.depth_mask;h!==ha.depth_mask&&(z.depthMask(h),ha.depth_mask=h);
h=na[0];p=na[1];w=na[2];y=na[3];if(h!==za[0]||p!==za[1]||w!==za[2]||y!==za[3])z.colorMask(h,p,w,y),za[0]=h,za[1]=p,za[2]=w,za[3]=y;h=B.cull_enable;h!==ha.cull_enable&&(h?z.enable(2884):z.disable(2884),ha.cull_enable=h);h=B.cull_face;h!==ha.cull_face&&(z.cullFace(h),ha.cull_face=h);h=B.frontFace;h!==ha.frontFace&&(z.frontFace(h),ha.frontFace=h);h=B.lineWidth;h!==ha.lineWidth&&(z.lineWidth(h),ha.lineWidth=h);h=B.polygonOffset_enable;h!==ha.polygonOffset_enable&&(h?z.enable(32823):z.disable(32823),ha.polygonOffset_enable=
h);h=T[0];p=T[1];if(h!==Q[0]||p!==Q[1])z.polygonOffset(h,p),Q[0]=h,Q[1]=p;h=B.sample_alpha;h!==ha.sample_alpha&&(h?z.enable(32926):z.disable(32926),ha.sample_alpha=h);h=B.sample_enable;h!==ha.sample_enable&&(h?z.enable(32928):z.disable(32928),ha.sample_enable=h);h=F[0];p=F[1];if(h!==q[0]||p!==q[1])z.sampleCoverage(h,p),q[0]=h,q[1]=p;h=B.stencil_enable;h!==ha.stencil_enable&&(h?z.enable(2960):z.disable(2960),ha.stencil_enable=h);h=B.stencil_mask;h!==ha.stencil_mask&&(z.stencilMask(h),ha.stencil_mask=
h);h=qa[0];p=qa[1];w=qa[2];if(h!==oa[0]||p!==oa[1]||w!==oa[2])z.stencilFunc(h,p,w),oa[0]=h,oa[1]=p,oa[2]=w;h=ca[0];p=ca[1];w=ca[2];y=ca[3];if(h!==W[0]||p!==W[1]||w!==W[2]||y!==W[3])z.stencilOpSeparate(h,p,w,y),W[0]=h,W[1]=p,W[2]=w,W[3]=y;h=v[0];p=v[1];w=v[2];y=v[3];if(h!==G[0]||p!==G[1]||w!==G[2]||y!==G[3])z.stencilOpSeparate(h,p,w,y),G[0]=h,G[1]=p,G[2]=w,G[3]=y;h=B.scissor_enable;h!==ha.scissor_enable&&(h?z.enable(3089):z.disable(3089),ha.scissor_enable=h);h=O[0];p=O[1];w=O[2];y=O[3];if(h!==P[0]||
p!==P[1]||w!==P[2]||y!==P[3])z.scissor(h,p,w,y),P[0]=h,P[1]=p,P[2]=w,P[3]=y;h=la[0];p=la[1];w=la[2];y=la[3];if(h!==ra[0]||p!==ra[1]||w!==ra[2]||y!==ra[3])z.viewport(h,p,w,y),ra[0]=h,ra[1]=p,ra[2]=w,ra[3]=y}z.disable(2929);ha.depth_enable=!1;if(h=ha.profile)l=performance.now(),K.count++;z.useProgram(m.program);H.setVAO(null);p=S.location;w=r[p];w.buffer||z.enableVertexAttribArray(p);if(w.type!==e.dtype||2!==w.size||w.buffer!==e||!1!==w.normalized||0!==w.offset||0!==w.stride)z.bindBuffer(34962,e.buffer),
z.vertexAttribPointer(p,2,e.dtype,!1,0,0),w.type=e.dtype,w.size=2,w.buffer=e,w.normalized=!1,w.offset=0,w.stride=0;p=d.call(this,L,a,0);"number"!==typeof p&&I.commandRaise(b,D);z.uniform1f(aa.location,p);a=a.color;V(a)&&4===a.length||I.commandRaise(t,D);z.uniform4f(x.location,a[0],a[1],a[2],a[3]);(a=k.elements)?z.bindBuffer(34963,a.buffer.buffer):H.currentVAO&&(a=f.getElements(H.currentVAO.elements))&&z.bindBuffer(34963,a.buffer.buffer);p=k.primitive;w=k.offset;a?z.drawElements(p,3,a.type,w<<(a.type-
5121>>1)):z.drawArrays(p,w,3);ha.dirty=!0;H.setVAO(null);h&&(K.cpuTime+=performance.now()-l)},scope:function(b,c,a){var d,f,g,h,m,r,q,t,u,n,v,x,w,z,A,C,E,D,F,J;d=B.depth_enable;B.depth_enable=!1;if(f=ha.profile)g=performance.now(),K.count++;h=k.count;k.count=3;m=y.call(this,L,b,a);r=ia[3];ia[3]=m;q=b.color;m=ia[4];ia[4]=q;q=p.buffer;p.buffer=e;t=p.divisor;p.divisor=0;u=p.normalized;p.normalized=!1;n=p.offset;p.offset=0;v=p.size;p.size=0;x=p.state;p.state=1;w=p.stride;p.stride=0;z=p.type;p.type=e.dtype;
A=p.w;p.w=0;C=p.x;p.x=0;E=p.y;p.y=0;D=p.z;p.z=0;F=l.vert;l.vert=2;J=l.frag;l.frag=1;ha.dirty=!0;c(L,b,a);B.depth_enable=d;f&&(K.cpuTime+=performance.now()-g);k.count=h;ia[3]=r;ia[4]=m;p.buffer=q;p.divisor=t;p.normalized=u;p.offset=n;p.size=v;p.state=x;p.stride=w;p.type=z;p.w=A;p.x=C;p.y=E;p.z=D;l.vert=F;l.frag=J;ha.dirty=!0},batch:function(b,a){var d,l,m,t;d=U.next;d!==U.cur&&(d?z.bindFramebuffer(36160,d.framebuffer):z.bindFramebuffer(36160,null),U.cur=d);if(ha.dirty){var p,y,Z;d=B.dither;d!==ha.dither&&
(d?z.enable(3024):z.disable(3024),ha.dither=d);d=B.blend_enable;d!==ha.blend_enable&&(d?z.enable(3042):z.disable(3042),ha.blend_enable=d);d=C[0];p=C[1];y=C[2];Z=C[3];if(d!==c[0]||p!==c[1]||y!==c[2]||Z!==c[3])z.blendColor(d,p,y,Z),c[0]=d,c[1]=p,c[2]=y,c[3]=Z;d=M[0];p=M[1];if(d!==g[0]||p!==g[1])z.blendEquationSeparate(d,p),g[0]=d,g[1]=p;d=ka[0];p=ka[1];y=ka[2];Z=ka[3];if(d!==A[0]||p!==A[1]||y!==A[2]||Z!==A[3])z.blendFuncSeparate(d,p,y,Z),A[0]=d,A[1]=p,A[2]=y,A[3]=Z;d=B.depth_func;d!==ha.depth_func&&
(z.depthFunc(d),ha.depth_func=d);d=X[0];p=X[1];if(d!==da[0]||p!==da[1])z.depthRange(d,p),da[0]=d,da[1]=p;d=B.depth_mask;d!==ha.depth_mask&&(z.depthMask(d),ha.depth_mask=d);d=na[0];p=na[1];y=na[2];Z=na[3];if(d!==za[0]||p!==za[1]||y!==za[2]||Z!==za[3])z.colorMask(d,p,y,Z),za[0]=d,za[1]=p,za[2]=y,za[3]=Z;d=B.cull_enable;d!==ha.cull_enable&&(d?z.enable(2884):z.disable(2884),ha.cull_enable=d);d=B.cull_face;d!==ha.cull_face&&(z.cullFace(d),ha.cull_face=d);d=B.frontFace;d!==ha.frontFace&&(z.frontFace(d),
ha.frontFace=d);d=B.lineWidth;d!==ha.lineWidth&&(z.lineWidth(d),ha.lineWidth=d);d=B.polygonOffset_enable;d!==ha.polygonOffset_enable&&(d?z.enable(32823):z.disable(32823),ha.polygonOffset_enable=d);d=T[0];p=T[1];if(d!==Q[0]||p!==Q[1])z.polygonOffset(d,p),Q[0]=d,Q[1]=p;d=B.sample_alpha;d!==ha.sample_alpha&&(d?z.enable(32926):z.disable(32926),ha.sample_alpha=d);d=B.sample_enable;d!==ha.sample_enable&&(d?z.enable(32928):z.disable(32928),ha.sample_enable=d);d=F[0];p=F[1];if(d!==q[0]||p!==q[1])z.sampleCoverage(d,
p),q[0]=d,q[1]=p;d=B.stencil_enable;d!==ha.stencil_enable&&(d?z.enable(2960):z.disable(2960),ha.stencil_enable=d);d=B.stencil_mask;d!==ha.stencil_mask&&(z.stencilMask(d),ha.stencil_mask=d);d=qa[0];p=qa[1];y=qa[2];if(d!==oa[0]||p!==oa[1]||y!==oa[2])z.stencilFunc(d,p,y),oa[0]=d,oa[1]=p,oa[2]=y;d=ca[0];p=ca[1];y=ca[2];Z=ca[3];if(d!==W[0]||p!==W[1]||y!==W[2]||Z!==W[3])z.stencilOpSeparate(d,p,y,Z),W[0]=d,W[1]=p,W[2]=y,W[3]=Z;d=v[0];p=v[1];y=v[2];Z=v[3];if(d!==G[0]||p!==G[1]||y!==G[2]||Z!==G[3])z.stencilOpSeparate(d,
p,y,Z),G[0]=d,G[1]=p,G[2]=y,G[3]=Z;d=B.scissor_enable;d!==ha.scissor_enable&&(d?z.enable(3089):z.disable(3089),ha.scissor_enable=d);d=O[0];p=O[1];y=O[2];Z=O[3];if(d!==P[0]||p!==P[1]||y!==P[2]||Z!==P[3])z.scissor(d,p,y,Z),P[0]=d,P[1]=p,P[2]=y,P[3]=Z;d=la[0];p=la[1];y=la[2];Z=la[3];if(d!==ra[0]||p!==ra[1]||y!==ra[2]||Z!==ra[3])z.viewport(d,p,y,Z),ra[0]=d,ra[1]=p,ra[2]=y,ra[3]=Z}z.disable(2929);ha.depth_enable=!1;if(d=ha.profile)l=performance.now(),K.count+=a;z.useProgram(h.program);H.setVAO(null);p=
S.location;y=r[p];y.buffer||z.enableVertexAttribArray(p);if(y.type!==e.dtype||2!==y.size||y.buffer!==e||!1!==y.normalized||0!==y.offset||0!==y.stride)z.bindBuffer(34962,e.buffer),z.vertexAttribPointer(p,2,e.dtype,!1,0,0),y.type=e.dtype,y.size=2,y.buffer=e,y.normalized=!1,y.offset=0,y.stride=0;m=N.call(this,L,t,m);"number"!==typeof m&&I.commandRaise(w,D);z.uniform1f(aa.location,m);(p=k.elements)?z.bindBuffer(34963,p.buffer.buffer):H.currentVAO&&(p=f.getElements(H.currentVAO.elements))&&z.bindBuffer(34963,
p.buffer.buffer);y=k.primitive;Z=k.offset;for(m=0;m<a;++m){t=b[m];var zb,ia,u,n,R,ua,wa;zb=t.color;V(zb)&&4===zb.length||I.commandRaise(J,D);t=zb[0];u=zb[1];R=zb[2];zb=zb[3];m&&ia===t&&n===u&&ua===R&&wa===zb||(ia=t,n=u,ua=R,wa=zb,z.uniform4f(x.location,t,u,R,zb));p?z.drawElements(y,3,p.type,Z<<(p.type-5121>>1)):z.drawArrays(y,Z,3)}ha.dirty=!0;H.setVAO(null);d&&(K.cpuTime+=performance.now()-l)}}},"$13,color,position":function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa){var x,S,r,L,ha,k,f,U,z,V,B,l,ia,H,C,c,
M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca;x=a.attributes;S=a.context;r=a.current;L=a.draw;ha=a.framebuffer;k=a.gl;f=a.next;U=a.shader;z=a.uniforms;V=a.vao;B=f.blend_color;l=r.blend_color;ia=f.blend_equation;H=r.blend_equation;C=f.blend_func;c=r.blend_func;M=f.colorMask;g=r.colorMask;ka=f.depth_range;A=r.depth_range;na=f.polygonOffset_offset;za=r.polygonOffset_offset;X=f.sample_coverage;da=r.sample_coverage;T=f.scissor_box;Q=r.scissor_box;F=f.stencil_func;q=r.stencil_func;O=f.stencil_opBack;P=r.stencil_opBack;
qa=f.stencil_opFront;oa=r.stencil_opFront;v=f.viewport;G=r.viewport;ca=[1,0,0,1];return{draw:function(a){var h,p,t;a=ha.next;a!==ha.cur&&(a?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null),ha.cur=a);if(r.dirty){var w;a=f.dither;a!==r.dither&&(a?k.enable(3024):k.disable(3024),r.dither=a);a=f.blend_enable;a!==r.blend_enable&&(a?k.enable(3042):k.disable(3042),r.blend_enable=a);a=B[0];p=B[1];t=B[2];w=B[3];if(a!==l[0]||p!==l[1]||t!==l[2]||w!==l[3])k.blendColor(a,p,t,w),l[0]=a,l[1]=
p,l[2]=t,l[3]=w;a=ia[0];p=ia[1];if(a!==H[0]||p!==H[1])k.blendEquationSeparate(a,p),H[0]=a,H[1]=p;a=C[0];p=C[1];t=C[2];w=C[3];if(a!==c[0]||p!==c[1]||t!==c[2]||w!==c[3])k.blendFuncSeparate(a,p,t,w),c[0]=a,c[1]=p,c[2]=t,c[3]=w;a=f.depth_enable;a!==r.depth_enable&&(a?k.enable(2929):k.disable(2929),r.depth_enable=a);a=f.depth_func;a!==r.depth_func&&(k.depthFunc(a),r.depth_func=a);a=ka[0];p=ka[1];if(a!==A[0]||p!==A[1])k.depthRange(a,p),A[0]=a,A[1]=p;a=f.depth_mask;a!==r.depth_mask&&(k.depthMask(a),r.depth_mask=
a);a=M[0];p=M[1];t=M[2];w=M[3];if(a!==g[0]||p!==g[1]||t!==g[2]||w!==g[3])k.colorMask(a,p,t,w),g[0]=a,g[1]=p,g[2]=t,g[3]=w;a=f.cull_enable;a!==r.cull_enable&&(a?k.enable(2884):k.disable(2884),r.cull_enable=a);a=f.cull_face;a!==r.cull_face&&(k.cullFace(a),r.cull_face=a);a=f.frontFace;a!==r.frontFace&&(k.frontFace(a),r.frontFace=a);a=f.polygonOffset_enable;a!==r.polygonOffset_enable&&(a?k.enable(32823):k.disable(32823),r.polygonOffset_enable=a);a=na[0];p=na[1];if(a!==za[0]||p!==za[1])k.polygonOffset(a,
p),za[0]=a,za[1]=p;a=f.sample_alpha;a!==r.sample_alpha&&(a?k.enable(32926):k.disable(32926),r.sample_alpha=a);a=f.sample_enable;a!==r.sample_enable&&(a?k.enable(32928):k.disable(32928),r.sample_enable=a);a=X[0];p=X[1];if(a!==da[0]||p!==da[1])k.sampleCoverage(a,p),da[0]=a,da[1]=p;a=f.stencil_enable;a!==r.stencil_enable&&(a?k.enable(2960):k.disable(2960),r.stencil_enable=a);a=f.stencil_mask;a!==r.stencil_mask&&(k.stencilMask(a),r.stencil_mask=a);a=F[0];p=F[1];t=F[2];if(a!==q[0]||p!==q[1]||t!==q[2])k.stencilFunc(a,
p,t),q[0]=a,q[1]=p,q[2]=t;a=qa[0];p=qa[1];t=qa[2];w=qa[3];if(a!==oa[0]||p!==oa[1]||t!==oa[2]||w!==oa[3])k.stencilOpSeparate(a,p,t,w),oa[0]=a,oa[1]=p,oa[2]=t,oa[3]=w;a=O[0];p=O[1];t=O[2];w=O[3];if(a!==P[0]||p!==P[1]||t!==P[2]||w!==P[3])k.stencilOpSeparate(a,p,t,w),P[0]=a,P[1]=p,P[2]=t,P[3]=w;a=f.scissor_enable;a!==r.scissor_enable&&(a?k.enable(3089):k.disable(3089),r.scissor_enable=a);a=T[0];p=T[1];t=T[2];w=T[3];if(a!==Q[0]||p!==Q[1]||t!==Q[2]||w!==Q[3])k.scissor(a,p,t,w),Q[0]=a,Q[1]=p,Q[2]=t,Q[3]=
w;a=v[0];p=v[1];t=v[2];w=v[3];if(a!==G[0]||p!==G[1]||t!==G[2]||w!==G[3])k.viewport(a,p,t,w),G[0]=a,G[1]=p,G[2]=t,G[3]=w}k.lineWidth(1);r.lineWidth=1;if(a=r.profile)h=performance.now(),K.count++;k.useProgram(m.program);V.setVAO(null);p=aa.location;t=x[p];t.buffer||k.enableVertexAttribArray(p);if(t.type!==e.dtype||2!==t.size||t.buffer!==e||!1!==t.normalized||0!==t.offset||0!==t.stride)k.bindBuffer(34962,e.buffer),k.vertexAttribPointer(p,2,e.dtype,!1,0,0),t.type=e.dtype,t.size=2,t.buffer=e,t.normalized=
!1,t.offset=0,t.stride=0;k.uniform4f(J.location,1,0,0,1);d&&k.bindBuffer(34963,d.buffer.buffer);p=d.primType;t=d.vertCount-0;0<=t||I.commandRaise(b,D);t&&(k.drawElements(p,t,d.type,0<<(d.type-5121>>1)),r.dirty=!0,V.setVAO(null),a&&(K.cpuTime+=performance.now()-h))},scope:function(b,a,c){var d,g,k,h,l,m,q,v,w,x,A,u,n,B,C,F,J,G,H,E,N,M;d=f.lineWidth;f.lineWidth=1;if(g=r.profile)k=performance.now(),K.count++;h=L.elements;L.elements=t;l=L.offset;L.offset=0;m=t.vertCount-0;0<=m||I.commandRaise(y,D);q=
L.count;L.count=m;v=t.primType;m=L.primitive;L.primitive=v;v=z[3];z[3]=ca;w=p.buffer;p.buffer=e;x=p.divisor;p.divisor=0;A=p.normalized;p.normalized=!1;u=p.offset;p.offset=0;n=p.size;p.size=0;B=p.state;p.state=1;C=p.stride;p.stride=0;F=p.type;p.type=e.dtype;J=p.w;p.w=0;G=p.x;p.x=0;H=p.y;p.y=0;E=p.z;p.z=0;N=U.vert;U.vert=2;M=U.frag;U.frag=1;r.dirty=!0;a(S,b,c);f.lineWidth=d;g&&(K.cpuTime+=performance.now()-k);L.elements=h;L.offset=l;L.count=q;L.primitive=m;z[3]=v;p.buffer=w;p.divisor=x;p.normalized=
A;p.offset=u;p.size=n;p.state=B;p.stride=C;p.type=F;p.w=J;p.x=G;p.y=H;p.z=E;U.vert=N;U.frag=M;r.dirty=!0},batch:function(b,a){var d,m,p;d=ha.next;d!==ha.cur&&(d?k.bindFramebuffer(36160,d.framebuffer):k.bindFramebuffer(36160,null),ha.cur=d);if(r.dirty){var t,y;d=f.dither;d!==r.dither&&(d?k.enable(3024):k.disable(3024),r.dither=d);d=f.blend_enable;d!==r.blend_enable&&(d?k.enable(3042):k.disable(3042),r.blend_enable=d);d=B[0];p=B[1];t=B[2];y=B[3];if(d!==l[0]||p!==l[1]||t!==l[2]||y!==l[3])k.blendColor(d,
p,t,y),l[0]=d,l[1]=p,l[2]=t,l[3]=y;d=ia[0];p=ia[1];if(d!==H[0]||p!==H[1])k.blendEquationSeparate(d,p),H[0]=d,H[1]=p;d=C[0];p=C[1];t=C[2];y=C[3];if(d!==c[0]||p!==c[1]||t!==c[2]||y!==c[3])k.blendFuncSeparate(d,p,t,y),c[0]=d,c[1]=p,c[2]=t,c[3]=y;d=f.depth_enable;d!==r.depth_enable&&(d?k.enable(2929):k.disable(2929),r.depth_enable=d);d=f.depth_func;d!==r.depth_func&&(k.depthFunc(d),r.depth_func=d);d=ka[0];p=ka[1];if(d!==A[0]||p!==A[1])k.depthRange(d,p),A[0]=d,A[1]=p;d=f.depth_mask;d!==r.depth_mask&&(k.depthMask(d),
r.depth_mask=d);d=M[0];p=M[1];t=M[2];y=M[3];if(d!==g[0]||p!==g[1]||t!==g[2]||y!==g[3])k.colorMask(d,p,t,y),g[0]=d,g[1]=p,g[2]=t,g[3]=y;d=f.cull_enable;d!==r.cull_enable&&(d?k.enable(2884):k.disable(2884),r.cull_enable=d);d=f.cull_face;d!==r.cull_face&&(k.cullFace(d),r.cull_face=d);d=f.frontFace;d!==r.frontFace&&(k.frontFace(d),r.frontFace=d);d=f.polygonOffset_enable;d!==r.polygonOffset_enable&&(d?k.enable(32823):k.disable(32823),r.polygonOffset_enable=d);d=na[0];p=na[1];if(d!==za[0]||p!==za[1])k.polygonOffset(d,
p),za[0]=d,za[1]=p;d=f.sample_alpha;d!==r.sample_alpha&&(d?k.enable(32926):k.disable(32926),r.sample_alpha=d);d=f.sample_enable;d!==r.sample_enable&&(d?k.enable(32928):k.disable(32928),r.sample_enable=d);d=X[0];p=X[1];if(d!==da[0]||p!==da[1])k.sampleCoverage(d,p),da[0]=d,da[1]=p;d=f.stencil_enable;d!==r.stencil_enable&&(d?k.enable(2960):k.disable(2960),r.stencil_enable=d);d=f.stencil_mask;d!==r.stencil_mask&&(k.stencilMask(d),r.stencil_mask=d);d=F[0];p=F[1];t=F[2];if(d!==q[0]||p!==q[1]||t!==q[2])k.stencilFunc(d,
p,t),q[0]=d,q[1]=p,q[2]=t;d=qa[0];p=qa[1];t=qa[2];y=qa[3];if(d!==oa[0]||p!==oa[1]||t!==oa[2]||y!==oa[3])k.stencilOpSeparate(d,p,t,y),oa[0]=d,oa[1]=p,oa[2]=t,oa[3]=y;d=O[0];p=O[1];t=O[2];y=O[3];if(d!==P[0]||p!==P[1]||t!==P[2]||y!==P[3])k.stencilOpSeparate(d,p,t,y),P[0]=d,P[1]=p,P[2]=t,P[3]=y;d=f.scissor_enable;d!==r.scissor_enable&&(d?k.enable(3089):k.disable(3089),r.scissor_enable=d);d=T[0];p=T[1];t=T[2];y=T[3];if(d!==Q[0]||p!==Q[1]||t!==Q[2]||y!==Q[3])k.scissor(d,p,t,y),Q[0]=d,Q[1]=p,Q[2]=t,Q[3]=
y;d=v[0];p=v[1];t=v[2];y=v[3];if(d!==G[0]||p!==G[1]||t!==G[2]||y!==G[3])k.viewport(d,p,t,y),G[0]=d,G[1]=p,G[2]=t,G[3]=y}k.lineWidth(1);r.lineWidth=1;if(d=r.profile)m=performance.now(),K.count+=a;k.useProgram(h.program);V.setVAO(null);p=aa.location;t=x[p];t.buffer||k.enableVertexAttribArray(p);if(t.type!==e.dtype||2!==t.size||t.buffer!==e||!1!==t.normalized||0!==t.offset||0!==t.stride)k.bindBuffer(34962,e.buffer),k.vertexAttribPointer(p,2,e.dtype,!1,0,0),t.type=e.dtype,t.size=2,t.buffer=e,t.normalized=
!1,t.offset=0,t.stride=0;k.uniform4f(J.location,1,0,0,1);N&&k.bindBuffer(34963,N.buffer.buffer);t=N.primType;y=N.vertCount-0;0<=y||I.commandRaise(w,D);for(p=0;p<a;++p)y&&k.drawElements(t,y,N.type,0<<(N.type-5121>>1));r.dirty=!0;V.setVAO(null);d&&(K.cpuTime+=performance.now()-m)}}},"$20,mouse,position,t,texture":function(a,I,D,K,m,e,d,b,t,y,p,h,N,w,J,aa,x,S,r,L,ha,k,f,U,z){var V,B,l,ia,H,C,c,M,g,ka,A,na,za,X,da,T,Q,F,q,O,P,qa,oa,v,G,ca,W,la,ra,Ca,xa,ea,Da,ja,pa,Ba;V=a.attributes;B=a.context;l=a.current;
ia=a.draw;H=a.elements;C=a.framebuffer;c=a.gl;M=a.isArrayLike;g=a.next;ka=a.shader;A=a.uniforms;na=a.vao;za=g.blend_color;X=l.blend_color;da=g.blend_equation;T=l.blend_equation;Q=g.blend_func;F=l.blend_func;q=g.colorMask;O=l.colorMask;P=g.depth_range;qa=l.depth_range;oa=g.polygonOffset_offset;v=l.polygonOffset_offset;G=g.sample_coverage;ca=l.sample_coverage;W=g.scissor_box;la=l.scissor_box;ra=g.stencil_func;Ca=l.stencil_func;xa=g.stencil_opBack;ea=l.stencil_opBack;Da=g.stencil_opFront;ja=l.stencil_opFront;
pa=g.viewport;Ba=l.viewport;return{draw:function(a){var h,r,w,u;h=C.next;h!==C.cur&&(h?c.bindFramebuffer(36160,h.framebuffer):c.bindFramebuffer(36160,null),C.cur=h);if(l.dirty){var n;h=g.dither;h!==l.dither&&(h?c.enable(3024):c.disable(3024),l.dither=h);h=g.blend_enable;h!==l.blend_enable&&(h?c.enable(3042):c.disable(3042),l.blend_enable=h);h=za[0];w=za[1];u=za[2];n=za[3];if(h!==X[0]||w!==X[1]||u!==X[2]||n!==X[3])c.blendColor(h,w,u,n),X[0]=h,X[1]=w,X[2]=u,X[3]=n;h=da[0];w=da[1];if(h!==T[0]||w!==T[1])c.blendEquationSeparate(h,
w),T[0]=h,T[1]=w;h=Q[0];w=Q[1];u=Q[2];n=Q[3];if(h!==F[0]||w!==F[1]||u!==F[2]||n!==F[3])c.blendFuncSeparate(h,w,u,n),F[0]=h,F[1]=w,F[2]=u,F[3]=n;h=g.depth_enable;h!==l.depth_enable&&(h?c.enable(2929):c.disable(2929),l.depth_enable=h);h=g.depth_func;h!==l.depth_func&&(c.depthFunc(h),l.depth_func=h);h=P[0];w=P[1];if(h!==qa[0]||w!==qa[1])c.depthRange(h,w),qa[0]=h,qa[1]=w;h=g.depth_mask;h!==l.depth_mask&&(c.depthMask(h),l.depth_mask=h);h=q[0];w=q[1];u=q[2];n=q[3];if(h!==O[0]||w!==O[1]||u!==O[2]||n!==O[3])c.colorMask(h,
w,u,n),O[0]=h,O[1]=w,O[2]=u,O[3]=n;h=g.cull_enable;h!==l.cull_enable&&(h?c.enable(2884):c.disable(2884),l.cull_enable=h);h=g.cull_face;h!==l.cull_face&&(c.cullFace(h),l.cull_face=h);h=g.frontFace;h!==l.frontFace&&(c.frontFace(h),l.frontFace=h);h=g.lineWidth;h!==l.lineWidth&&(c.lineWidth(h),l.lineWidth=h);h=g.polygonOffset_enable;h!==l.polygonOffset_enable&&(h?c.enable(32823):c.disable(32823),l.polygonOffset_enable=h);h=oa[0];w=oa[1];if(h!==v[0]||w!==v[1])c.polygonOffset(h,w),v[0]=h,v[1]=w;h=g.sample_alpha;
h!==l.sample_alpha&&(h?c.enable(32926):c.disable(32926),l.sample_alpha=h);h=g.sample_enable;h!==l.sample_enable&&(h?c.enable(32928):c.disable(32928),l.sample_enable=h);h=G[0];w=G[1];if(h!==ca[0]||w!==ca[1])c.sampleCoverage(h,w),ca[0]=h,ca[1]=w;h=g.stencil_enable;h!==l.stencil_enable&&(h?c.enable(2960):c.disable(2960),l.stencil_enable=h);h=g.stencil_mask;h!==l.stencil_mask&&(c.stencilMask(h),l.stencil_mask=h);h=ra[0];w=ra[1];u=ra[2];if(h!==Ca[0]||w!==Ca[1]||u!==Ca[2])c.stencilFunc(h,w,u),Ca[0]=h,Ca[1]=
w,Ca[2]=u;h=Da[0];w=Da[1];u=Da[2];n=Da[3];if(h!==ja[0]||w!==ja[1]||u!==ja[2]||n!==ja[3])c.stencilOpSeparate(h,w,u,n),ja[0]=h,ja[1]=w,ja[2]=u,ja[3]=n;h=xa[0];w=xa[1];u=xa[2];n=xa[3];if(h!==ea[0]||w!==ea[1]||u!==ea[2]||n!==ea[3])c.stencilOpSeparate(h,w,u,n),ea[0]=h,ea[1]=w,ea[2]=u,ea[3]=n;h=g.scissor_enable;h!==l.scissor_enable&&(h?c.enable(3089):c.disable(3089),l.scissor_enable=h);h=W[0];w=W[1];u=W[2];n=W[3];if(h!==la[0]||w!==la[1]||u!==la[2]||n!==la[3])c.scissor(h,w,u,n),la[0]=h,la[1]=w,la[2]=u,la[3]=
n;h=pa[0];w=pa[1];u=pa[2];n=pa[3];if(h!==Ba[0]||w!==Ba[1]||u!==Ba[2]||n!==Ba[3])c.viewport(h,w,u,n),Ba[0]=h,Ba[1]=w,Ba[2]=u,Ba[3]=n;l.dirty=!1}if(h=l.profile)r=performance.now(),K.count++;c.useProgram(m.program);na.setVAO(null);w=f.location;u=V[w];u.buffer||c.enableVertexAttribArray(w);if(u.type!==e.dtype||2!==u.size||u.buffer!==e||!1!==u.normalized||0!==u.offset||0!==u.stride)c.bindBuffer(34962,e.buffer),c.vertexAttribPointer(w,2,e.dtype,!1,0,0),u.type=e.dtype,u.size=2,u.buffer=e,u.normalized=!1,
u.offset=0,u.stride=0;w=d.call(this,B,a,0);M(w)&&2===w.length||I.commandRaise(b,D);c.uniform2f(k.location,w[0],w[1]);a=t.call(this,B,a,0);"number"!==typeof a&&I.commandRaise(y,D);c.uniform1f(U.location,a);c.uniform1i(z.location,p.bind());(a=ia.elements)?c.bindBuffer(34963,a.buffer.buffer):na.currentVAO&&(a=H.getElements(na.currentVAO.elements))&&c.bindBuffer(34963,a.buffer.buffer);w=ia.primitive;u=ia.offset;a?c.drawElements(w,3,a.type,u<<(a.type-5121>>1)):c.drawArrays(w,u,3);na.setVAO(null);h&&(K.cpuTime+=
performance.now()-r);p.unbind()},scope:function(b,a,c){var d,f,g,k,m,p,t,r,q,v,x,y,z,C,D,F,G,H,L,M;if(d=l.profile)f=performance.now(),K.count++;g=ia.count;ia.count=3;k=h.call(this,B,b,c);m=A[3];A[3]=k;p=N.call(this,B,b,c);k=A[4];A[4]=p;p=A[5];A[5]=w;t=J.buffer;J.buffer=e;r=J.divisor;J.divisor=0;q=J.normalized;J.normalized=!1;v=J.offset;J.offset=0;x=J.size;J.size=0;y=J.state;J.state=1;z=J.stride;J.stride=0;C=J.type;J.type=e.dtype;D=J.w;J.w=0;F=J.x;J.x=0;G=J.y;J.y=0;H=J.z;J.z=0;L=ka.vert;ka.vert=2;
M=ka.frag;ka.frag=1;a(B,b,c);d&&(K.cpuTime+=performance.now()-f);ia.count=g;A[3]=m;A[4]=k;A[5]=p;J.buffer=t;J.divisor=r;J.normalized=q;J.offset=v;J.size=x;J.state=y;J.stride=z;J.type=C;J.w=D;J.x=F;J.y=G;J.z=H;ka.vert=L;ka.frag=M},batch:function(b,a){var d,h,m;d=C.next;d!==C.cur&&(d?c.bindFramebuffer(36160,d.framebuffer):c.bindFramebuffer(36160,null),C.cur=d);if(l.dirty){var n,p,t;d=g.dither;d!==l.dither&&(d?c.enable(3024):c.disable(3024),l.dither=d);d=g.blend_enable;d!==l.blend_enable&&(d?c.enable(3042):
c.disable(3042),l.blend_enable=d);d=za[0];n=za[1];p=za[2];t=za[3];if(d!==X[0]||n!==X[1]||p!==X[2]||t!==X[3])c.blendColor(d,n,p,t),X[0]=d,X[1]=n,X[2]=p,X[3]=t;d=da[0];n=da[1];if(d!==T[0]||n!==T[1])c.blendEquationSeparate(d,n),T[0]=d,T[1]=n;d=Q[0];n=Q[1];p=Q[2];t=Q[3];if(d!==F[0]||n!==F[1]||p!==F[2]||t!==F[3])c.blendFuncSeparate(d,n,p,t),F[0]=d,F[1]=n,F[2]=p,F[3]=t;d=g.depth_enable;d!==l.depth_enable&&(d?c.enable(2929):c.disable(2929),l.depth_enable=d);d=g.depth_func;d!==l.depth_func&&(c.depthFunc(d),
l.depth_func=d);d=P[0];n=P[1];if(d!==qa[0]||n!==qa[1])c.depthRange(d,n),qa[0]=d,qa[1]=n;d=g.depth_mask;d!==l.depth_mask&&(c.depthMask(d),l.depth_mask=d);d=q[0];n=q[1];p=q[2];t=q[3];if(d!==O[0]||n!==O[1]||p!==O[2]||t!==O[3])c.colorMask(d,n,p,t),O[0]=d,O[1]=n,O[2]=p,O[3]=t;d=g.cull_enable;d!==l.cull_enable&&(d?c.enable(2884):c.disable(2884),l.cull_enable=d);d=g.cull_face;d!==l.cull_face&&(c.cullFace(d),l.cull_face=d);d=g.frontFace;d!==l.frontFace&&(c.frontFace(d),l.frontFace=d);d=g.lineWidth;d!==l.lineWidth&&
(c.lineWidth(d),l.lineWidth=d);d=g.polygonOffset_enable;d!==l.polygonOffset_enable&&(d?c.enable(32823):c.disable(32823),l.polygonOffset_enable=d);d=oa[0];n=oa[1];if(d!==v[0]||n!==v[1])c.polygonOffset(d,n),v[0]=d,v[1]=n;d=g.sample_alpha;d!==l.sample_alpha&&(d?c.enable(32926):c.disable(32926),l.sample_alpha=d);d=g.sample_enable;d!==l.sample_enable&&(d?c.enable(32928):c.disable(32928),l.sample_enable=d);d=G[0];n=G[1];if(d!==ca[0]||n!==ca[1])c.sampleCoverage(d,n),ca[0]=d,ca[1]=n;d=g.stencil_enable;d!==
l.stencil_enable&&(d?c.enable(2960):c.disable(2960),l.stencil_enable=d);d=g.stencil_mask;d!==l.stencil_mask&&(c.stencilMask(d),l.stencil_mask=d);d=ra[0];n=ra[1];p=ra[2];if(d!==Ca[0]||n!==Ca[1]||p!==Ca[2])c.stencilFunc(d,n,p),Ca[0]=d,Ca[1]=n,Ca[2]=p;d=Da[0];n=Da[1];p=Da[2];t=Da[3];if(d!==ja[0]||n!==ja[1]||p!==ja[2]||t!==ja[3])c.stencilOpSeparate(d,n,p,t),ja[0]=d,ja[1]=n,ja[2]=p,ja[3]=t;d=xa[0];n=xa[1];p=xa[2];t=xa[3];if(d!==ea[0]||n!==ea[1]||p!==ea[2]||t!==ea[3])c.stencilOpSeparate(d,n,p,t),ea[0]=
d,ea[1]=n,ea[2]=p,ea[3]=t;d=g.scissor_enable;d!==l.scissor_enable&&(d?c.enable(3089):c.disable(3089),l.scissor_enable=d);d=W[0];n=W[1];p=W[2];t=W[3];if(d!==la[0]||n!==la[1]||p!==la[2]||t!==la[3])c.scissor(d,n,p,t),la[0]=d,la[1]=n,la[2]=p,la[3]=t;d=pa[0];n=pa[1];p=pa[2];t=pa[3];if(d!==Ba[0]||n!==Ba[1]||p!==Ba[2]||t!==Ba[3])c.viewport(d,n,p,t),Ba[0]=d,Ba[1]=n,Ba[2]=p,Ba[3]=t;l.dirty=!1}if(d=l.profile)h=performance.now(),K.count+=a;c.useProgram(aa.program);na.setVAO(null);n=f.location;p=V[n];p.buffer||
c.enableVertexAttribArray(n);if(p.type!==e.dtype||2!==p.size||p.buffer!==e||!1!==p.normalized||0!==p.offset||0!==p.stride)c.bindBuffer(34962,e.buffer),c.vertexAttribPointer(n,2,e.dtype,!1,0,0),p.type=e.dtype,p.size=2,p.buffer=e,p.normalized=!1,p.offset=0,p.stride=0;n=x.call(this,B,void 0,m);M(n)&&2===n.length||I.commandRaise(S,D);c.uniform2f(k.location,n[0],n[1]);m=r.call(this,B,void 0,m);"number"!==typeof m&&I.commandRaise(L,D);c.uniform1f(U.location,m);c.uniform1i(z.location,ha.bind());(n=ia.elements)?
c.bindBuffer(34963,n.buffer.buffer):na.currentVAO&&(n=H.getElements(na.currentVAO.elements))&&c.bindBuffer(34963,n.buffer.buffer);p=ia.primitive;t=ia.offset;for(m=0;m<a;++m)n?c.drawElements(p,3,n.type,t<<(n.type-5121>>1)):c.drawArrays(p,t,3);ha.unbind();na.setVAO(null);d&&(K.cpuTime+=performance.now()-h)}}}}},{}],25:[function(I,ia,Pa){var a=I("./sorted-object-keys");ia.exports=function(I,D){for(var K=a(D),m=0;m<K.length;++m)I[K[m]]=D[K[m]];return I}},{"./sorted-object-keys":34}],26:[function(I,ia,
Pa){function a(a,m,e,d,b,t){for(var y=0;y<m;++y)for(var p=a[y],h=0;h<e;++h)for(var D=p[h],w=0;w<d;++w)b[t++]=D[w]}function ma(D,m,e,d,b){for(var t=1,y=e+1;y<m.length;++y)t*=m[y];var p=m[e];if(4===m.length-e){var h=m[e+1],N=m[e+2];m=m[e+3];for(y=0;y<p;++y)a(D[y],h,N,m,d,b),b+=t}else for(y=0;y<p;++y)ma(D[y],m,e+1,d,b),b+=t}var D=I("./pool");ia.exports={shape:function(a){for(var m=[];a.length;a=a[0])m.push(a.length);return m},flatten:function(K,m,e,d){var b=1;if(m.length)for(var t=0;t<m.length;++t)b*=
m[t];else b=0;e=d||D.allocType(e,b);switch(m.length){case 0:break;case 1:d=m[0];for(m=0;m<d;++m)e[m]=K[m];break;case 2:d=m[0];m=m[1];for(t=b=0;t<d;++t)for(var y=K[t],p=0;p<m;++p)e[b++]=y[p];break;case 3:a(K,m[0],m[1],m[2],e,0);break;default:ma(K,m,0,e,0)}return e}}},{"./pool":32}],27:[function(I,ia,Pa){var a=I("./is-typed-array");ia.exports=function(I){return Array.isArray(I)||a(I)}},{"./is-typed-array":30}],28:[function(I,ia,Pa){var a=I("./is-typed-array");ia.exports=function(I){return!!I&&"object"===
typeof I&&Array.isArray(I.shape)&&Array.isArray(I.stride)&&"number"===typeof I.offset&&I.shape.length===I.stride.length&&(Array.isArray(I.data)||a(I.data))}},{"./is-typed-array":30}],29:[function(I,ia,Pa){ia.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(I,ia,Pa){ia.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||
a instanceof Uint8ClampedArray}},{}],31:[function(I,ia,Pa){ia.exports=function(a,I){for(var D=Array(a),K=0;K<a;++K)D[K]=I(K);return D}},{}],32:[function(I,ia,Pa){function a(a){var m,e;m=(65535<a)<<4;a>>>=m;e=(255<a)<<3;a>>>=e;m|=e;e=(15<a)<<2;a>>>=e;m|=e;e=(3<a)<<1;return m|e|a>>>e>>1}function ma(){function K(d){a:{for(var b=16;268435456>=b;b*=16)if(d<=b){d=b;break a}d=0}b=e[a(d)>>2];return 0<b.length?b.pop():new ArrayBuffer(d)}function m(d){e[a(d.byteLength)>>2].push(d)}var e=D(8,function(){return[]});
return{alloc:K,free:m,allocType:function(a,b){var e=null;switch(a){case 5120:e=new Int8Array(K(b),0,b);break;case 5121:e=new Uint8Array(K(b),0,b);break;case 5122:e=new Int16Array(K(2*b),0,b);break;case 5123:e=new Uint16Array(K(2*b),0,b);break;case 5124:e=new Int32Array(K(4*b),0,b);break;case 5125:e=new Uint32Array(K(4*b),0,b);break;case 5126:e=new Float32Array(K(4*b),0,b);break;default:return null}return e.length!==b?e.subarray(0,b):e},freeType:function(a){m(a.buffer)}}}var D=I("./loop");I=ma();I.zero=
ma();ia.exports=I},{"./loop":31}],33:[function(I,ia,Pa){ia.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(I,ia,Pa){ia.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(I,ia,Pa){var a=I("./pool"),ma=new Float32Array(1),D=new Uint32Array(ma.buffer);ia.exports=function(K){for(var m=
a.allocType(5123,K.length),e=0;e<K.length;++e)if(isNaN(K[e]))m[e]=65535;else if(Infinity===K[e])m[e]=31744;else if(-Infinity===K[e])m[e]=64512;else{ma[0]=K[e];var d=D[0],b=d>>>31<<15,t=(d<<1>>>24)-127,d=d>>13&1023;m[e]=-24>t?b:-14>t?b+(d+1024>>-14-t):15<t?b+31744:b+(t+15<<10)+d}return m}},{"./pool":32}],36:[function(I,ia,Pa){var a=I("./sorted-object-keys");ia.exports=function(I){return a(I).map(function(a){return I[a]})}},{"./sorted-object-keys":34}],37:[function(I,ia,Pa){function a(a,b,m){function y(){var b=
window.innerWidth,e=window.innerHeight;a!==document.body&&(e=p.getBoundingClientRect(),b=e.right-e.left,e=e.bottom-e.top);p.width=m*b;p.height=m*e}var p=document.createElement("canvas");e(p.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(p);a===document.body&&(p.style.position="absolute",e(a.style,{margin:0,padding:0}));var h;a!==document.body&&"function"===typeof ResizeObserver?(h=new ResizeObserver(function(){setTimeout(y)}),h.observe(a)):window.addEventListener("resize",
y,!1);y();return{canvas:p,onDestroy:function(){h?h.disconnect():window.removeEventListener("resize",y);a.removeChild(p)}}}function ma(a,b){function e(m){try{return a.getContext(m,b)}catch(p){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function D(a){if("string"===typeof a)return a.split();m(Array.isArray(a),"invalid extension array");return a}function K(a){return"string"===typeof a?(m("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):
a}var m=I("./util/check"),e=I("./util/extend");ia.exports=function(d){var b=d||{},e,y,p,h;d={};var N=[],w=[],J="undefined"===typeof window?1:window.devicePixelRatio,I=!1,x=function(b){b&&m.raise(b)},S=function(){};"string"===typeof b?(m("undefined"!==typeof document,"selector queries only supported in DOM environments"),e=document.querySelector(b),m(e,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?
e=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(h=b,p=h.canvas):(m.constructor(b),"gl"in b?h=b.gl:"canvas"in b?p=K(b.canvas):"container"in b&&(y=K(b.container)),"attributes"in b&&(d=b.attributes,m.type(d,"object","invalid context attributes")),"extensions"in b&&(N=D(b.extensions)),"optionalExtensions"in b&&(w=D(b.optionalExtensions)),"onDone"in b&&(m.type(b.onDone,"function","invalid or missing onDone callback"),x=b.onDone),"profile"in b&&(I=!!b.profile),"pixelRatio"in b&&
(J=+b.pixelRatio,m(0<J,"invalid pixel ratio"))):m.raise("invalid arguments to regl");e&&("canvas"===e.nodeName.toLowerCase()?p=e:y=e);if(!h){if(!p){m("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");e=a(y||document.body,x,J);if(!e)return null;p=e.canvas;S=e.onDestroy}void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!0);h=ma(p,d)}return h?{gl:h,canvas:p,container:y,extensions:N,optionalExtensions:w,pixelRatio:J,profile:I,onDone:x,onDestroy:S}:(S(),
x("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(I,ia,Pa){},{}],39:[function(I,ia,Pa){Pa=I("./lib/alea");var a=I("./lib/xor128"),ma=I("./lib/xorwow"),D=I("./lib/xorshift7"),K=I("./lib/xor4096"),m=I("./lib/tychei");I=I("./seedrandom");I.alea=Pa;I.xor128=a;I.xorwow=ma;I.xorshift7=D;I.xor4096=K;I.tychei=m;ia.exports=I},{"./lib/alea":40,"./lib/tychei":41,"./lib/xor128":42,"./lib/xor4096":43,"./lib/xorshift7":44,
"./lib/xorwow":45,"./seedrandom":46}],40:[function(I,ia,Pa){(function(a,I,D){function K(b){var a=this,e=d();a.next=function(){var b=2091639*a.s0+2.3283064365386963E-10*a.c;a.s0=a.s1;a.s1=a.s2;return a.s2=b-(a.c=b|0)};a.c=1;a.s0=e(" ");a.s1=e(" ");a.s2=e(" ");a.s0-=e(b);0>a.s0&&(a.s0+=1);a.s1-=e(b);0>a.s1&&(a.s1+=1);a.s2-=e(b);0>a.s2&&(a.s2+=1);e=null}function m(b,a){a.c=b.c;a.s0=b.s0;a.s1=b.s1;a.s2=b.s2;return a}function e(b,a){var d=new K(b),e=a&&a.state,h=d.next;h.int32=function(){return 4294967296*
d.next()|0};h["double"]=function(){return h()+1.1102230246251565E-16*(2097152*h()|0)};h.quick=h;e&&("object"==typeof e&&m(e,d),h.state=function(){return m(d,{})});return h}function d(){var b=4022871197;return function(a){a=a.toString();for(var d=0;d<a.length;d++){b+=a.charCodeAt(d);var e=.02519603282416938*b;b=e>>>0;e-=b;e*=b;b=e>>>0;e-=b;b+=4294967296*e}return 2.3283064365386963E-10*(b>>>0)}}I&&I.exports?I.exports=e:D&&D.amd?D(function(){return e}):this.alea=e})(this,"object"==typeof ia&&ia,"function"==
typeof define&&define)},{}],41:[function(I,ia,Pa){(function(a,I,D){function K(a){var b=this,e="";b.next=function(){var a=b.b,d=b.c,e=b.d,m=b.a,a=a<<25^a>>>7^d,d=d-e|0,e=e<<24^e>>>8^m,m=m-a|0;b.b=a=a<<20^a>>>12^d;b.c=d=d-e|0;b.d=e<<16^d>>>16^m;return b.a=m-a|0};b.a=0;b.b=0;b.c=-1640531527;b.d=1367130551;a===Math.floor(a)?(b.a=a/4294967296|0,b.b=a|0):e+=a;for(a=0;a<e.length+20;a++)b.b^=e.charCodeAt(a)|0,b.next()}function m(a,b){b.a=a.a;b.b=a.b;b.c=a.c;b.d=a.d;return b}function e(a,b){var e=new K(a),
y=b&&b.state,p=function(){return(e.next()>>>0)/4294967296};p["double"]=function(){do var a=e.next()>>>11,b=(e.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=e.next;p.quick=p;y&&("object"==typeof y&&m(y,e),p.state=function(){return m(e,{})});return p}I&&I.exports?I.exports=e:D&&D.amd?D(function(){return e}):this.tychei=e})(this,"object"==typeof ia&&ia,"function"==typeof define&&define)},{}],42:[function(I,ia,Pa){(function(a,I,D){function K(a){var b=this,e="";b.x=0;b.y=0;b.z=
0;b.w=0;b.next=function(){var a=b.x^b.x<<11;b.x=b.y;b.y=b.z;b.z=b.w;return b.w=b.w^b.w>>>19^a^a>>>8};a===(a|0)?b.x=a:e+=a;for(a=0;a<e.length+64;a++)b.x^=e.charCodeAt(a)|0,b.next()}function m(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.w=a.w;return b}function e(a,b){var e=new K(a),y=b&&b.state,p=function(){return(e.next()>>>0)/4294967296};p["double"]=function(){do var a=e.next()>>>11,b=(e.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=e.next;p.quick=p;y&&("object"==typeof y&&m(y,e),p.state=
function(){return m(e,{})});return p}I&&I.exports?I.exports=e:D&&D.amd?D(function(){return e}):this.xor128=e})(this,"object"==typeof ia&&ia,"function"==typeof define&&define)},{}],43:[function(I,ia,Pa){(function(a,I,D){function K(a){var b=this;b.next=function(){var a=b.w,d=b.X,e=b.i,h,m;b.w=a=a+1640531527|0;m=d[e+34&127];h=d[e=e+1&127];m^=m<<13;h^=h<<17;m=d[e]=m^m>>>15^h^h>>>12;b.i=e;return m+(a^a>>>16)|0};(function(a,b){var d,e,m,w,D,I=[],x=128;b===(b|0)?(e=b,b=null):(b+="\x00",e=0,x=Math.max(x,
b.length));m=0;for(w=-32;w<x;++w)b&&(e^=b.charCodeAt((w+32)%b.length)),0===w&&(D=e),e^=e<<10,e^=e>>>15,e^=e<<4,e^=e>>>13,0<=w&&(D=D+1640531527|0,d=I[w&127]^=e+D,m=0==d?m+1:0);128<=m&&(I[(b&&b.length||0)&127]=-1);m=127;for(w=512;0<w;--w)e=I[m+34&127],d=I[m=m+1&127],e^=e<<13,d^=d<<17,e^=e>>>15,d^=d>>>12,I[m]=e^d;a.w=D;a.X=I;a.i=m})(b,a)}function m(a,b){b.i=a.i;b.w=a.w;b.X=a.X.slice();return b}function e(a,b){null==a&&(a=+new Date);var e=new K(a),y=b&&b.state,p=function(){return(e.next()>>>0)/4294967296};
p["double"]=function(){do var a=e.next()>>>11,b=(e.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=e.next;p.quick=p;y&&(y.X&&m(y,e),p.state=function(){return m(e,{})});return p}I&&I.exports?I.exports=e:D&&D.amd?D(function(){return e}):this.xor4096=e})(this,"object"==typeof ia&&ia,"function"==typeof define&&define)},{}],44:[function(I,ia,Pa){(function(a,I,D){function K(a){var b=this;b.next=function(){var a=b.x,d=b.i,e,h;e=a[d];e^=e>>>7;h=e^e<<24;e=a[d+1&7];h=h^e^e>>>10;e=a[d+
3&7];h=h^e^e>>>3;e=a[d+4&7];h=h^e^e<<7;e=a[d+7&7];e^=e<<13;h=h^e^e<<9;a[d]=h;b.i=d+1&7;return h};(function(a,b){var d,e=[];if(b===(b|0))e[0]=b;else for(b=""+b,d=0;d<b.length;++d)e[d&7]=e[d&7]<<15^b.charCodeAt(d)+e[d+1&7]<<13;for(;8>e.length;)e.push(0);for(d=0;8>d&&0===e[d];++d);8==d&&(e[7]=-1);a.x=e;a.i=0;for(d=256;0<d;--d)a.next()})(b,a)}function m(a,b){b.x=a.x.slice();b.i=a.i;return b}function e(a,b){null==a&&(a=+new Date);var e=new K(a),y=b&&b.state,p=function(){return(e.next()>>>0)/4294967296};
p["double"]=function(){do var a=e.next()>>>11,b=(e.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=e.next;p.quick=p;y&&(y.x&&m(y,e),p.state=function(){return m(e,{})});return p}I&&I.exports?I.exports=e:D&&D.amd?D(function(){return e}):this.xorshift7=e})(this,"object"==typeof ia&&ia,"function"==typeof define&&define)},{}],45:[function(I,ia,Pa){(function(a,I,D){function K(a){var b=this,e="";b.next=function(){var a=b.x^b.x>>>2;b.x=b.y;b.y=b.z;b.z=b.w;b.w=b.v;return(b.d=b.d+362437|
0)+(b.v=b.v^b.v<<4^a^a<<1)|0};b.x=0;b.y=0;b.z=0;b.w=0;b.v=0;a===(a|0)?b.x=a:e+=a;for(a=0;a<e.length+64;a++)b.x^=e.charCodeAt(a)|0,a==e.length&&(b.d=b.x<<10^b.x>>>4),b.next()}function m(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.w=a.w;b.v=a.v;b.d=a.d;return b}function e(a,b){var e=new K(a),y=b&&b.state,p=function(){return(e.next()>>>0)/4294967296};p["double"]=function(){do var a=e.next()>>>11,b=(e.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=e.next;p.quick=p;y&&("object"==typeof y&&m(y,
e),p.state=function(){return m(e,{})});return p}I&&I.exports?I.exports=e:D&&D.amd?D(function(){return e}):this.xorwow=e})(this,"object"==typeof ia&&ia,"function"==typeof define&&define)},{}],46:[function(I,ia,Pa){(function(a,ma){function D(w,y,x){var D=[];y=1==y?{entropy:!0}:y||{};w=d(e(y.entropy?[w,t(a)]:null==w?b():w,3),D);var r=new K(D),D=function(){for(var a=r.g(6),b=p,d=0;a<h;)a=256*(a+d),b*=256,d=r.g(1);for(;a>=N;)a/=2,b/=2,d>>>=1;return(a+d)/b};D.int32=function(){return r.g(4)|0};D.quick=function(){return r.g(4)/
4294967296};D["double"]=D;d(t(r.S),a);return(y.pass||x||function(a,b,d,e){e&&(e.S&&m(e,r),a.state=function(){return m(r,{})});return d?(ma.random=a,b):a})(D,w,"global"in y?y.global:this==ma,y.state)}function K(a){var b,d=a.length,e=this,h=0,m=e.i=e.j=0,p=e.S=[];for(d||(a=[d++]);256>h;)p[h]=h++;for(h=0;256>h;h++)p[h]=p[m=255&m+a[h%d]+(b=p[h])],p[m]=b;(e.g=function(a){for(var b,d=0,h=e.i,m=e.j,p=e.S;a--;)b=p[h=255&h+1],d=256*d+p[255&(p[h]=p[m=255&m+b])+(p[m]=b)];e.i=h;e.j=m;return d})(256)}function m(a,
b){b.i=a.i;b.j=a.j;b.S=a.S.slice();return b}function e(a,b){var d=[],h=typeof a,m;if(b&&"object"==h)for(m in a)try{d.push(e(a[m],b-1))}catch(p){}return d.length?d:"string"==h?a:a+"\x00"}function d(a,b){for(var d=a+"",e,h=0;h<d.length;)b[255&h]=255&(e^=19*b[255&h])+d.charCodeAt(h++);return t(b)}function b(){try{var b;w&&(b=w.randomBytes)?b=b(256):(b=new Uint8Array(256),(y.crypto||y.msCrypto).getRandomValues(b));return t(b)}catch(d){return b=y.navigator,[+new Date,y,b&&b.plugins,y.screen,t(a)]}}function t(a){return String.fromCharCode.apply(0,
a)}var y=(0,eval)("this"),p=ma.pow(256,6),h=ma.pow(2,52),N=2*h,w;ma.seedrandom=D;d(ma.random(),a);if("object"==typeof ia&&ia.exports){ia.exports=D;try{w=I("crypto")}catch(J){}}else"function"==typeof define&&define.amd&&define(function(){return D})})([],Math)},{crypto:38}],47:[function(I,ia,Pa){function a(a,b){for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}var ma=I("./lib/util/check"),D=I("./lib/util/extend"),K=I("./lib/dynamic"),m=I("./lib/util/raf"),e=I("./lib/util/clock"),d=I("./lib/strings"),
b=I("./lib/webgl"),t=I("./lib/extension"),y=I("./lib/limits"),p=I("./lib/buffer"),h=I("./lib/elements"),N=I("./lib/texture"),w=I("./lib/renderbuffer"),J=I("./lib/framebuffer"),aa=I("./lib/attribute"),x=I("./lib/shader"),S=I("./lib/read"),r=I("./lib/core"),L=I("./lib/stats"),ha=I("./lib/timer");ia.exports=function(k){function f(){if(0===Da.length)Q&&Q.update(),Ma=null;else{Ma=m.next(f);c();for(var a=Da.length-1;0<=a;--a){var b=Da[a];b&&b(P,null,0)}ka.flush();Q&&Q.update()}}function I(){!Ma&&0<Da.length&&
(Ma=m.next(f))}function z(){Ma&&(m.cancel(f),Ma=null)}function V(a){a.preventDefault();na=!0;z();ja.forEach(function(a){a()})}function B(a){ka.getError();na=!1;za.restore();ca.restore();oa.restore();W.restore();la.restore();ra.restore();G.restore();Q&&Q.restore();Ca.procs.refresh();I();pa.forEach(function(a){a()})}function l(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(K.isDynamic(f))e[b]=K.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(K.isDynamic(f[g])){e[b]=
K.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}ma(!!a,"invalid args to regl({...})");ma.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=D({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Ca.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,p=[];return D(function(a,b){var d;na&&ma.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function ia(a,b){var c=0;Ca.procs.poll();var d=b.color;d&&(ka.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ka.clearDepth(+b.depth),c|=256);"stencil"in b&&(ka.clearStencil(b.stencil|0),c|=1024);ma(!!c,
"called regl.clear with no buffer specified");ka.clear(c)}function H(b){ma.type(b,"function","regl.frame() callback must be a function");Da.push(b);I();return{cancel:function(){function c(){var b=a(Da,c);Da[b]=Da[Da.length-1];--Da.length;0>=Da.length&&z()}var d=a(Da,b);ma(0<=d,"cannot cancel a frame twice");Da[d]=c}}}function C(){var a=xa.viewport,b=xa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;P.viewportWidth=P.framebufferWidth=P.drawingBufferWidth=a[2]=b[2]=ka.drawingBufferWidth;P.viewportHeight=P.framebufferHeight=
P.drawingBufferHeight=a[3]=b[3]=ka.drawingBufferHeight}function c(){P.tick+=1;P.time=g();C();Ca.procs.poll()}function M(){W.refresh();C();Ca.procs.refresh();Q&&Q.update()}function g(){return(e()-F)/1E3}console.log("REGL args are:",k);k=b(k);console.log("REGL configs are:",k);if(!k)return null;var ka=k.gl,A=ka.getContextAttributes(),na=ka.isContextLost(),za=t(ka,k);if(!za)return null;var X=d(),da=L(),T=za.extensions,Q=ha(ka,T),F=e(),q=ka.drawingBufferWidth,O=ka.drawingBufferHeight,P={tick:0,time:0,
viewportWidth:q,viewportHeight:O,framebufferWidth:q,framebufferHeight:O,drawingBufferWidth:q,drawingBufferHeight:O,pixelRatio:k.pixelRatio},q={elements:null,primitive:4,count:-1,offset:0,instances:-1},qa=y(ka,T),oa=p(ka,da,k,function(a){return G.destroyBuffer(a)}),v=h(ka,T,oa,da),G=aa(ka,T,qa,da,oa,v,q),ca=x(ka,X,da,k),W=N(ka,T,qa,function(){Ca.procs.poll()},P,da,k),la=w(ka,T,qa,da,k),ra=J(ka,T,qa,W,la,da),Ca=r(ka,X,T,qa,oa,v,W,ra,{},G,ca,q,P,Q,k),X=S(ka,ra,Ca.procs.poll,P,A,T,qa),xa=Ca.next,ea=ka.canvas,
Da=[],ja=[],pa=[],Ba=[k.onDestroy],Ma=null;ea&&(ea.addEventListener("webglcontextlost",V,!1),ea.addEventListener("webglcontextrestored",B,!1));var Z=ra.setFBO=l({framebuffer:K.define.call(null,1,"framebuffer")});M();A=D(l,{clear:function(a){ma("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)Z(D({framebuffer:a.framebuffer.faces[b]},a),ia);else Z(a,ia);else ia(null,a)},prop:K.define.bind(null,
1),context:K.define.bind(null,2),"this":K.define.bind(null,3),draw:l({}),buffer:function(a){return oa.create(a,34962,!1,!1)},elements:function(a){return v.create(a,!1)},texture:W.create2D,cube:W.createCube,renderbuffer:la.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:G.createVAO,attributes:A,frame:H,on:function(a,b){ma.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return H(b);case "lost":c=ja;break;case "restore":c=pa;break;case "destroy":c=
Ba;break;default:ma.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:qa,hasExtension:function(a){return 0<=qa.extensions.indexOf(a.toLowerCase())},read:X,destroy:function(){Da.length=0;z();ea&&(ea.removeEventListener("webglcontextlost",V),ea.removeEventListener("webglcontextrestored",B));ca.clear();ra.clear();la.clear();G.clear();W.clear();v.clear();oa.clear();Q&&
Q.clear();Ba.forEach(function(a){a()})},_gl:ka,_refresh:M,poll:function(){c();Q&&Q.update()},now:g,stats:da});k.onDone(null,A);return A}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,
"./lib/webgl":37}]},{},[1]);

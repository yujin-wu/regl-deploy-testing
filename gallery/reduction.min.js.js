(function(){function u(B,Ja,c){function ga(e,b){if(!Ja[e]){if(!B[e]){var p="function"==typeof require&&require;if(!b&&p)return p(e,!0);if(n)return n(e,!0);p=Error("Cannot find module '"+e+"'");throw p.code="MODULE_NOT_FOUND",p;}p=Ja[e]={exports:{}};B[e][0].call(p.exports,function(a){return ga(B[e][1][a]||a)},p,p.exports,u,B,Ja,c)}return Ja[e].exports}for(var n="function"==typeof require&&require,I=0;I<c.length;I++)ga(c[I]);return ga}return u})()({1:[function(u,B,Ja){function c(b,a){for(var g=a(b[0],
b[1]),e=2;e<b.length;e++)g=a(g,b[e]);return g}function ga(b,a){var g=e({frag:"\n    precision mediump float;\n    uniform sampler2D tex;\n    varying vec2 uv;\n    uniform float rcpDim;\n\n    float op(float a, float b) {\n      return "+a+";\n    }\n\n    void main () {\n      float a = texture2D(tex, uv - vec2(0.0, 0.0) * rcpDim).x;\n      float b = texture2D(tex, uv - vec2(1.0, 0.0) * rcpDim).x;\n      float c = texture2D(tex, uv - vec2(0.0, 1.0) * rcpDim).x;\n      float d = texture2D(tex, uv - vec2(1.0, 1.0) * rcpDim).x;\n\n      float result = op(op(a, b), op(c, d));\n      gl_FragColor = vec4(result);\n    }",
vert:"\n    precision mediump float;\n    attribute vec2 position;\n    varying vec2 uv;\n    void main () {\n      uv = position;\n      gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n    }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{tex:e.prop("inTex"),rcpDim:e.prop("rcpDim")},framebuffer:e.prop("outFbo"),count:3}),c=[],x;for(x=0;x<b.length;x++){var f=b[x];c.push(f,f,f,f)}var f=Math.sqrt(b.length),n=e.texture({width:f,height:f,data:c,format:"rgba",type:"uint8",mag:"nearest",min:"nearest"}),
w=[];do f>>=1,w.push(e.framebuffer({colorFormat:"rgba",colorType:"uint8",width:f,height:f}));while(1<f);return function(){g({inTex:n,outFbo:w[0],rcpDim:1/(2*w[0].width)});for(x=0;x<w.length-1;x++){var a=w[x+1];g({inTex:w[x+0].color[0],outFbo:a,rcpDim:1/(2*a.width)})}var b;e({framebuffer:w[w.length-1]})(function(){b=e.read()[0]});return b}}function n(b,a){var e=document.createElement(b);e.innerHTML=a;var c=document.createElement("div");c.style.cssText="margin: 0 auto; max-width: 760px;";c.style.fontSize=
"30px";c.style.fontFamily="verdana";c.style.color="#444444";c.appendChild(e);document.body.appendChild(c);return e}function I(e){function a(){0===r%50&&("....."===g.innerHTML.slice(-5)?g.innerHTML=g.innerHTML.substring(0,g.innerHTML.length-5):g.innerHTML+=".");var n=e?function(){return f()}:function(){return c(b,function(a,b){return Math.max(a,b)})},w=performance.now();n();n=performance.now();x+=n-w;r++;1E3>r?setTimeout(a,0):(g.innerHTML="Average time of reduction on the "+(e?"GPU":"CPU")+": "+Math.round(x/
1E3*100)/100+"ms",e&&I(!1))}var g=n("p","Running reduction on "+(e?"GPU":"CPU")),r=0,x=0,f=ga(b,"max(a,b)");setTimeout(a,0)}B=document.body.appendChild(document.createElement("canvas"));B.width=1;B.height=1;var e=u("../regl")(B);u=u("seedrandom")("seed");var b=[];for(B=0;1048576>B;B++)b.push(Math.floor(255*u()));n("h3","Doing reduction on 1,000,000 items:");I(!0)},{"../regl":47,seedrandom:39}],2:[function(u,B,Ja){function c(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=
!1;this.type=5126;this.divisor=this.stride=this.offset=0}var ga=u("./util/sorted-object-keys"),n=u("./util/check"),I=u("./util/values"),e=u("./constants/dtypes.json"),b=u("./util/is-typed-array"),p=u("./util/is-ndarray"),a=u("./constants/primitives.json"),g="attributes elements offset count primitive instances".split(" ");B.exports=function(r,x,f,Z,w,D,G){function C(a){if(a!==P.currentVAO){var b=x.oes_vertex_array_object;a?b.bindVertexArrayOES(a.vao):b.bindVertexArrayOES(null);P.currentVAO=a}}function O(a){if(a!==
P.currentVAO){if(a)a.bindAttrs();else{for(var b=x.angle_instanced_arrays,e=0;e<z.length;++e){var g=z[e];g.buffer?(r.enableVertexAttribArray(e),g.buffer.bind(),r.vertexAttribPointer(e,g.size,g.type,g.normalized,g.stride,g.offfset),b&&g.divisor&&b.vertexAttribDivisorANGLE(e,g.divisor)):(r.disableVertexAttribArray(e),r.vertexAttrib4f(e,g.x,g.y,g.z,g.w))}G.elements?r.bindBuffer(34963,G.elements.buffer.buffer):r.bindBuffer(34963,null)}P.currentVAO=a}}function Mc(){I(ca).forEach(function(a){a.destroy()})}
function R(){this.id=++q;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=x.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;ca[this.id]=this;this.buffers=[]}function u(){x.oes_vertex_array_object&&I(ca).forEach(function(a){a.refresh()})}var k=f.maxAttributes,z=Array(k);for(f=0;f<k;++f)z[f]=new c;var q=0,ca={},P={Record:c,scope:{},state:z,currentVAO:null,targetVAO:null,restore:x.oes_vertex_array_object?u:function(){},
createVAO:function(q){function t(q){var z;if(Array.isArray(q))z=q,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{n("object"===typeof q,"invalid arguments for create vao");n("attributes"in q,"must specify attributes for vao");if(q.elements){var d=q.elements;f.ownsElements?("function"===typeof d&&"elements"===d._reglType?f.elements.destroy():f.elements(d),f.ownsElements=!1):D.getElements(q.elements)?(f.elements=
q.elements,f.ownsElements=!1):(f.elements=D.create(q.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;z=q.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in q&&(f.offset=q.offset|0);"count"in q&&(f.count=q.count|0);"instances"in q&&(f.instances=q.instances|0);"primitive"in q&&(n(q.primitive in a,"bad primitive type: "+q.primitive),f.primitive=a[q.primitive]);n.optional(function(){for(var a=
ga(q),d=0;d<a.length;++d)n(0<=g.indexOf(a[d]),'invalid option for vao: "'+a[d]+'" valid options are '+g)});n(Array.isArray(z),"attributes must be an array")}n(z.length<k,"too many attributes");n(0<z.length,"must specify at least one attribute");var d={},m=f.attributes;m.length=z.length;for(var Y=0;Y<z.length;++Y){var S=z[Y],r=m[Y]=new c,ca=S.data||S;if(Array.isArray(ca)||b(ca)||p(ca)){var G;f.buffers[Y]&&(G=f.buffers[Y],b(ca)&&G._buffer.byteLength>=ca.byteLength?G.subdata(ca):(G.destroy(),f.buffers[Y]=
null));f.buffers[Y]||(G=f.buffers[Y]=w.create(S,34962,!1,!0));r.buffer=w.getBuffer(G);r.size=r.buffer.dimension|0;r.normalized=!1;r.type=r.buffer.dtype;r.offset=0;r.stride=0;r.divisor=0;r.state=1;d[Y]=1}else w.getBuffer(S)?(r.buffer=w.getBuffer(S),r.size=r.buffer.dimension|0,r.normalized=!1,r.type=r.buffer.dtype,r.offset=0,r.stride=0,r.divisor=0,r.state=1):w.getBuffer(S.buffer)?(r.buffer=w.getBuffer(S.buffer),r.size=(+S.size||r.buffer.dimension)|0,r.normalized=!!S.normalized||!1,"type"in S?(n.parameter(S.type,
e,"invalid buffer type"),r.type=e[S.type]):r.type=r.buffer.dtype,r.offset=(S.offset||0)|0,r.stride=(S.stride||0)|0,r.divisor=(S.divisor||0)|0,r.state=1,n(1<=r.size&&4>=r.size,"size must be between 1 and 4"),n(0<=r.offset,"invalid offset"),n(0<=r.stride&&255>=r.stride,"stride must be between 0 and 255"),n(0<=r.divisor,"divisor must be positive"),n(!r.divisor||!!x.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in S?(n(0<Y,"first attribute must not be a constant"),
r.x=+S.x||0,r.y=+S.y||0,r.z=+S.z||0,r.w=+S.w||0,r.state=2):n(!1,"invalid attribute spec for location "+Y)}for(G=0;G<f.buffers.length;++G)!d[G]&&f.buffers[G]&&(f.buffers[G].destroy(),f.buffers[G]=null);f.refresh();return t}var f=new R;Z.vaoCount+=1;t.destroy=function(){for(var a=0;a<f.buffers.length;++a)f.buffers[a]&&f.buffers[a].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};t._vao=f;t._reglType="vao";return t(q)},getVAO:function(a){return"function"===
typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var b=0;b<z.length;++b){var e=z[b];e.buffer===a&&(r.disableVertexAttribArray(b),e.buffer=null)}},setVAO:x.oes_vertex_array_object?C:O,clear:x.oes_vertex_array_object?Mc:function(){}};R.prototype.bindAttrs=function(){for(var a=x.angle_instanced_arrays,b=this.attributes,e=0;e<b.length;++e){var g=b[e];g.buffer?(r.enableVertexAttribArray(e),r.bindBuffer(34962,g.buffer.buffer),r.vertexAttribPointer(e,g.size,g.type,g.normalized,g.stride,g.offset),
a&&g.divisor&&a.vertexAttribDivisorANGLE(e,g.divisor)):(r.disableVertexAttribArray(e),r.vertexAttrib4f(e,g.x,g.y,g.z,g.w))}for(a=b.length;a<k;++a)r.disableVertexAttribArray(a);(a=D.getElements(this.elements))?r.bindBuffer(34963,a.buffer.buffer):r.bindBuffer(34963,null)};R.prototype.refresh=function(){var a=x.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),P.currentVAO=null,a.bindVertexArrayOES(null))};R.prototype.destroy=function(){if(this.vao){var a=x.oes_vertex_array_object;
this===P.currentVAO&&(P.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);ca[this.id]&&(delete ca[this.id],--Z.vaoCount)};return P}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(u,B,Ja){function c(a){return f[Object.prototype.toString.call(a)]|
0}function ga(a,b){for(var e=0;e<b.length;++e)a[e]=b[e]}function n(a,b,e,g,f,p,x){for(var z=0,q=0;q<e;++q)for(var r=0;r<g;++r)a[z++]=b[f*q+p*r+x]}var I=u("./util/sorted-object-keys"),e=u("./util/check"),b=u("./util/is-typed-array"),p=u("./util/is-ndarray"),a=u("./util/values"),g=u("./util/pool");Ja=u("./util/flatten");var r=Ja.flatten,x=Ja.shape,f=u("./constants/arraytypes.json"),Z=u("./constants/dtypes.json"),w=u("./constants/usage.json"),D=[];D[5120]=1;D[5122]=2;D[5124]=4;D[5121]=1;D[5123]=2;D[5125]=
4;D[5126]=4;B.exports=function(f,C,O,Mc){function R(a){this.id=q++;this.buffer=f.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;O.profile&&(this.stats={size:0})}function u(a,b,e){a.byteLength=b.byteLength;f.bufferData(a.type,b,e)}function k(a,f,q,z,k,d){a.usage=q;if(Array.isArray(f)){if(a.dtype=z||5126,0<f.length)if(Array.isArray(f[0])){k=x(f);for(var m=z=1;m<k.length;++m)z*=k[m];a.dimension=z;f=r(f,k,a.dtype);u(a,f,q);d?a.persistentData=
f:g.freeType(f)}else"number"===typeof f[0]?(a.dimension=k,k=g.allocType(a.dtype,f.length),ga(k,f),u(a,k,q),d?a.persistentData=k:g.freeType(k)):b(f[0])?(a.dimension=f[0].length,a.dtype=z||c(f[0])||5126,f=r(f,[f.length,f[0].length],a.dtype),u(a,f,q),d?a.persistentData=f:g.freeType(f)):e.raise("invalid buffer data")}else if(b(f))a.dtype=z||c(f),a.dimension=k,u(a,f,q),d&&(a.persistentData=new Uint8Array(new Uint8Array(f.buffer)));else if(p(f)){k=f.shape;var Y=f.stride,m=f.offset,w=0,D=0,ca=0,G=0;1===
k.length?(w=k[0],D=1,ca=Y[0],G=0):2===k.length?(w=k[0],D=k[1],ca=Y[0],G=Y[1]):e.raise("invalid shape");a.dtype=z||c(f.data)||5126;a.dimension=D;k=g.allocType(a.dtype,w*D);n(k,f.data,w,D,ca,G,m);u(a,k,q);d?a.persistentData=k:g.freeType(k)}else f instanceof ArrayBuffer?(a.dtype=5121,a.dimension=k,u(a,f,q),d&&(a.persistentData=new Uint8Array(new Uint8Array(f)))):e.raise("invalid buffer data")}function z(a){C.bufferCount--;Mc(a);var b=a.buffer;e(b,"buffer must not be deleted already");f.deleteBuffer(b);
a.buffer=null;delete ca[a.id]}var q=0,ca={};R.prototype.bind=function(){f.bindBuffer(this.type,this.buffer)};R.prototype.destroy=function(){z(this)};var P=[];O.profile&&(C.getTotalBufferSize=function(){var a=0;I(ca).forEach(function(b){a+=ca[b].stats.size});return a});return{create:function(a,q,Mc,I){function P(a){var d=35044,g=null,q=0,t=0,x=1;Array.isArray(a)||b(a)||p(a)||a instanceof ArrayBuffer?g=a:"number"===typeof a?q=a|0:a&&(e.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(e(null===g||Array.isArray(g)||b(g)||p(g),"invalid data for buffer"),g=a.data),"usage"in a&&(e.parameter(a.usage,w,"invalid buffer usage"),d=w[a.usage]),"type"in a&&(e.parameter(a.type,Z,"invalid buffer type"),t=Z[a.type]),"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),x=a.dimension|0),"length"in a&&(e.nni(q,"buffer length must be a nonnegative integer"),q=a.length|0));m.bind();g?k(m,g,d,t,x,I):(q&&f.bufferData(m.type,q,d),m.dtype=t||5121,m.usage=d,m.dimension=x,m.byteLength=
q);O.profile&&(m.stats.size=m.byteLength*D[m.dtype]);return P}function d(a,b){e(b+a.byteLength<=m.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+b+" to a buffer of size "+m.byteLength);f.bufferSubData(m.type,b,a)}C.bufferCount++;var m=new R(q);ca[m.id]=m;Mc||P(a);P._reglType="buffer";P._buffer=m;P.subdata=function(a,f){var q=(f||0)|0,k;m.bind();if(b(a)||a instanceof ArrayBuffer)d(a,q);else if(Array.isArray(a)){if(0<a.length)if("number"===
typeof a[0]){var t=g.allocType(m.dtype,a.length);ga(t,a);d(t,q);g.freeType(t)}else Array.isArray(a[0])||b(a[0])?(k=x(a),t=r(a,k,m.dtype),d(t,q),g.freeType(t)):e.raise("invalid buffer data")}else if(p(a)){k=a.shape;var z=a.stride,w=t=0,D=0,ca=0;1===k.length?(t=k[0],w=1,D=z[0],ca=0):2===k.length?(t=k[0],w=k[1],D=z[0],ca=z[1]):e.raise("invalid shape");k=Array.isArray(a.data)?m.dtype:c(a.data);k=g.allocType(k,t*w);n(k,a.data,t,w,D,ca,a.offset);d(k,q);g.freeType(k)}else e.raise("invalid data for buffer subdata");
return P};O.profile&&(P.stats=m.stats);P.destroy=function(){z(m)};return P},createStream:function(a,b){var e=P.pop();e||(e=new R(a));e.bind();k(e,b,35040,0,1,!1);return e},destroyStream:function(a){P.push(a)},clear:function(){a(ca).forEach(z);P.forEach(z)},getBuffer:function(a){return a&&a._buffer instanceof R?a._buffer:null},restore:function(){a(ca).forEach(function(a){a.buffer=f.createBuffer();f.bindBuffer(a.type,a.buffer);f.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:k}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(u,B,Ja){B.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(u,B,Ja){B.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(u,B,Ja){B.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(u,B,Ja){B.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(u,B,Ja){function c(a){return Array.isArray(a)||f(a)||Z(a)}function ga(a){return a.sort(function(a,
b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function n(a,b,e,g){this.thisDep=a;this.contextDep=b;this.propDep=e;this.append=g}function I(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function e(a){return new n(!1,!1,!1,a)}function b(a,b){var e=a.type;if(0===e)return e=a.data.length,new n(!0,1<=e,2<=e,b);if(4===e)return e=a.data,new n(e.thisDep,e.contextDep,e.propDep,b);if(5===e)return new n(!1,!1,!1,b);if(6===e){for(var g=e=!1,f=!1,d=0;d<a.data.length;++d){var q=a.data[d];1===q.type?
f=!0:2===q.type?g=!0:3===q.type?e=!0:0===q.type?(e=!0,q=q.data,1<=q&&(g=!0),2<=q&&(f=!0)):4===q.type&&(e=e||q.data.thisDep,g=g||q.data.contextDep,f=f||q.data.propDep)}return new n(e,g,f,b)}return new n(3===e,2===e,1===e,b)}var p=u("./util/sorted-object-keys"),a=u("./util/check"),g=u("./util/extend"),r=u("./util/codegen"),x=u("./util/loop"),f=u("./util/is-typed-array"),Z=u("./util/is-ndarray"),w=u("./util/is-array-like"),D=u("./dynamic"),G=u("./constants/primitives.json"),C=u("./constants/dtypes.json"),
O=["x","y","z","w"],Mc="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),R={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},mc="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
k={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},q={frag:35632,vert:35633},ca={cw:2304,ccw:2305},P=new n(!1,!1,!1,function(){});B.exports=function(f,t,Z,N,u,d,m,Y,sa,Ka,vb,Zb,ua,Oa,X){function K(a){return a.replace(".","_")}function M(a,h,b){var d=K(a);
aa.push(a);y[d]=F[d]=!!b;E[d]=h}function Q(a,h,b){var d=K(a);aa.push(a);Array.isArray(b)?(F[d]=b.slice(),y[d]=b.slice()):F[d]=y[d]=b;wa[d]=h}function oa(){var b=r(),h=b.link,d=b.global;b.id=rc++;b.batchId="0";var e=h(ka),f=b.shared={props:"a0"};p(ka).forEach(function(a){f[a]=d.def(e,".",a)});a.optional(function(){b.CHECK=h(a);b.commandStr=a.guessCommand();b.command=h(b.commandStr);b.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",h(d),",",this.command,");")};l.invalidBlendCombinations=
mc});var g=b.next={},E=b.current={};p(wa).forEach(function(a){Array.isArray(F[a])&&(g[a]=d.def(f.next,".",a),E[a]=d.def(f.current,".",a))});var q=b.constants={};p(l).forEach(function(a){q[a]=d.def(JSON.stringify(l[a]))});b.invoke=function(a,d){switch(d.type){case 0:var e=["this",f.context,f.props,b.batchId];return a.def(h(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return a.def(f.props,d.data);case 2:return a.def(f.context,d.data);case 3:return a.def("this",d.data);case 4:return d.data.append(b,
a),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(h){return b.invoke(a,h)})}};b.attribCache={};var Id={};b.scopeAttrib=function(a){a=t.id(a);if(a in Id)return Id[a];var b=Ka.scope[a];b||(b=Ka.scope[a]=new ha);return Id[a]=h(b)};return b}function L(a){var h=a["static"];a=a.dynamic;var d;if("profile"in h){var f=!!h.profile;d=e(function(a,b){return f});d.enable=f}else if("profile"in a){var l=a.profile;d=b(l,function(a,b){return a.invoke(b,l)})}return d}function B(d,h){var f=
d["static"],l=d.dynamic;if("framebuffer"in f){var g=f.framebuffer;return g?(g=Y.getFramebuffer(g),a.command(g,"invalid framebuffer object"),e(function(a,b){var h=a.link(g),d=a.shared;b.set(d.framebuffer,".next",h);d=d.context;b.set(d,".framebufferWidth",h+".width");b.set(d,".framebufferHeight",h+".height");return h})):e(function(a,b){var h=a.shared;b.set(h.framebuffer,".next","null");h=h.context;b.set(h,".framebufferWidth",h+".drawingBufferWidth");b.set(h,".framebufferHeight",h+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var E=l.framebuffer;return b(E,function(b,h){var d=b.invoke(h,E),e=b.shared,f=e.framebuffer,l=h.def(f,".getFramebuffer(",d,")");a.optional(function(){b.assert(h,"!"+d+"||"+l,"invalid framebuffer object")});h.set(f,".next",l);e=e.context;h.set(e,".framebufferWidth",l+"?"+l+".width:"+e+".drawingBufferWidth");h.set(e,".framebufferHeight",l+"?"+l+".height:"+e+".drawingBufferHeight");return l})}return null}function $a(d,h,e){function f(d){if(d in l){var ma=l[d];a.commandType(ma,
"object","invalid "+d,e.commandStr);var E=!0,q=ma.x|0,m=ma.y|0,p,k;"width"in ma?(p=ma.width|0,a.command(0<=p,"invalid "+d,e.commandStr)):E=!1;"height"in ma?(k=ma.height|0,a.command(0<=k,"invalid "+d,e.commandStr)):E=!1;return new n(!E&&h&&h.thisDep,!E&&h&&h.contextDep,!E&&h&&h.propDep,function(a,b){var h=a.shared.context,d=p;"width"in ma||(d=b.def(h,".","framebufferWidth","-",q));var e=k;"height"in ma||(e=b.def(h,".","framebufferHeight","-",m));return[q,m,d,e]})}if(d in g){var t=g[d],E=b(t,function(b,
h){var e=b.invoke(h,t);a.optional(function(){b.assert(h,e+"&&typeof "+e+'==="object"',"invalid "+d)});var f=b.shared.context,l=h.def(e,".x|0"),g=h.def(e,".y|0"),E=h.def('"width" in ',e,"?",e,".width|0:","(",f,".","framebufferWidth","-",l,")"),ma=h.def('"height" in ',e,"?",e,".height|0:","(",f,".","framebufferHeight","-",g,")");a.optional(function(){b.assert(h,E+">=0&&"+ma+">=0","invalid "+d)});return[l,g,E,ma]});h&&(E.thisDep=E.thisDep||h.thisDep,E.contextDep=E.contextDep||h.contextDep,E.propDep=
E.propDep||h.propDep);return E}return h?new n(h.thisDep,h.contextDep,h.propDep,function(a,h){var b=a.shared.context;return[0,0,h.def(b,".","framebufferWidth"),h.def(b,".","framebufferHeight")]}):null}var l=d["static"],g=d.dynamic;if(d=f("viewport")){var E=d;d=new n(d.thisDep,d.contextDep,d.propDep,function(a,h){var b=E.append(a,h),d=a.shared.context;h.set(d,".viewportWidth",b[2]);h.set(d,".viewportHeight",b[3]);return b})}return{viewport:d,scissor_box:f("scissor.box")}}function T(b,h){var d=b["static"];
if("string"===typeof d.frag&&"string"===typeof d.vert){if(0<p(h.dynamic).length)return null;var d=h["static"],e=p(d);if(0<e.length&&"number"===typeof d[e[0]]){for(var f=[],l=0;l<e.length;++l)a("number"===typeof d[e[l]],"must specify all vertex attribute locations when using vaos"),f.push([d[e[l]]|0,e[l]]);return f}}return null}function v(d,h,l){function f(d){if(d in g){var h=t.id(g[d]);a.optional(function(){vb.shader(q[d],h,a.guessCommand())});var l=e(function(){return h});l.id=h;return l}if(d in
E){var ma=E[d];return b(ma,function(h,b){var e=h.invoke(b,ma),l=b.def(h.shared.strings,".id(",e,")");a.optional(function(){b(h.shared.shader,".shader(",q[d],",",l,",",h.command,");")});return l})}return null}var g=d["static"],E=d.dynamic,m=f("frag"),p=f("vert"),Id=null;I(m)&&I(p)?(Id=vb.program(p.id,m.id,null,l),d=e(function(a,h){return a.link(Id)})):d=new n(m&&m.thisDep||p&&p.thisDep,m&&m.contextDep||p&&p.contextDep,m&&m.propDep||p&&p.propDep,function(h,d){var b=h.shared.shader,e;e=m?m.append(h,
d):d.def(b,".","frag");var l;l=p?p.append(h,d):d.def(b,".","vert");var f=b+".program("+l+","+e;a.optional(function(){f+=","+h.command});return d.def(f+")")});return{frag:m,vert:p,progVar:d,program:Id}}function ja(l,h){function f(d,l){if(d in g){var ma=g[d]|0;l?q.offset=ma:q.instances=ma;a.command(!l||0<=ma,"invalid "+d,h.commandStr);return e(function(a,d){l&&(a.OFFSET=ma);return ma})}if(d in E){var p=E[d];return b(p,function(h,b){var e=h.invoke(b,p);l&&(h.OFFSET=e,a.optional(function(){h.assert(b,
e+">=0","invalid "+d)}));return e})}if(l){if(Id)return e(function(a,d){return a.OFFSET=0});if(m)return new n(k.thisDep,k.contextDep,k.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(m)return new n(k.thisDep,k.contextDep,k.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var g=l["static"],E=l.dynamic,q={},m=!1,k=function(){if("vao"in g){var a=g.vao;null!==a&&null===Ka.getVAO(a)&&
(a=Ka.createVAO(a));m=!0;q.vao=a;return e(function(d){var h=Ka.getVAO(a);return h?d.link(h):"null"})}if("vao"in E){m=!0;var d=E.vao;return b(d,function(a,h){var b=a.invoke(h,d);return h.def(a.shared.vao+".getVAO("+b+")")})}return null}(),Id=!1,t=function(){if("elements"in g){var l=g.elements;q.elements=l;if(c(l)){var f=q.elements=d.create(l,!0),l=d.getElements(f);Id=!0}else l&&(l=d.getElements(l),Id=!0,a.command(l,"invalid elements",h.commandStr));f=e(function(a,d){if(l){var h=a.link(l);return a.ELEMENTS=
h}return a.ELEMENTS=null});f.value=l;return f}if("elements"in E){Id=!0;var ma=E.elements;return b(ma,function(d,h){var b=d.shared,e=b.isBufferArgs,b=b.elements,l=d.invoke(h,ma),f=h.def("null"),e=h.def(e,"(",l,")"),g=d.cond(e).then(f,"=",b,".createStream(",l,");")["else"](f,"=",b,".getElements(",l,");");a.optional(function(){d.assert(g["else"],"!"+l+"||"+f,"invalid elements")});h.entry(g);h.exit(d.cond(e).then(b,".destroyStream(",f,");"));return d.ELEMENTS=f})}return m?new n(k.thisDep,k.contextDep,
k.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),yd=f("offset",!0),x=function(){if("primitive"in g){var d=g.primitive;q.primitive=d;a.commandParameter(d,G,"invalid primitve",h.commandStr);return e(function(a,h){return G[d]})}if("primitive"in E){var l=E.primitive;return b(l,function(d,h){var b=d.constants.primTypes,e=d.invoke(h,l);a.optional(function(){d.assert(h,e+" in "+b,"invalid primitive, must be one of "+
p(G))});return h.def(b,"[",e,"]")})}return Id?I(t)?t.value?e(function(a,d){return d.def(a.ELEMENTS,".primType")}):e(function(){return 4}):new n(t.thisDep,t.contextDep,t.propDep,function(a,d){var h=a.ELEMENTS;return d.def(h,"?",h,".primType:",4)}):m?new n(k.thisDep,k.contextDep,k.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),z=function(){if("count"in g){var d=g.count|0;q.count=d;a.command("number"===typeof d&&0<=d,"invalid vertex count",
h.commandStr);return e(function(){return d})}if("count"in E){var l=E.count;return b(l,function(d,h){var b=d.invoke(h,l);a.optional(function(){d.assert(h,"typeof "+b+'==="number"&&'+b+">=0&&"+b+"===("+b+"|0)","invalid vertex count")});return b})}if(Id){if(I(t)){if(t)return yd?new n(yd.thisDep,yd.contextDep,yd.propDep,function(d,h){var b=h.def(d.ELEMENTS,".vertCount-",d.OFFSET);a.optional(function(){d.assert(h,b+">=0","invalid vertex offset/element buffer too small")});return b}):e(function(a,d){return d.def(a.ELEMENTS,
".vertCount")});var f=e(function(){return-1});a.optional(function(){f.MISSING=!0});return f}var ma=new n(t.thisDep||yd.thisDep,t.contextDep||yd.contextDep,t.propDep||yd.propDep,function(a,d){var h=a.ELEMENTS;return a.OFFSET?d.def(h,"?",h,".vertCount-",a.OFFSET,":-1"):d.def(h,"?",h,".vertCount:-1")});a.optional(function(){ma.DYNAMIC=!0});return ma}return m?new n(k.thisDep,k.contextDep,k.propDep,function(a,d){return d.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),y=
f("instances",!1);return{elements:t,primitive:x,count:z,instances:y,offset:yd,vao:k,vaoActive:m,elementsActive:Id,"static":q}}function ba(d,h){var l=d["static"],f=d.dynamic,g={};aa.forEach(function(d){function E(a,h){if(d in l){var q=a(l[d]);g[ma]=e(function(){return q})}else if(d in f){var m=f[d];g[ma]=b(m,function(a,d){return h(a,d,a.invoke(d,m))})}}var ma=K(d);switch(d){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return E(function(b){a.commandType(b,
"boolean",d,h.commandStr);return b},function(h,b,e){a.optional(function(){h.assert(b,"typeof "+e+'==="boolean"',"invalid flag "+d,h.commandStr)});return e});case "depth.func":return E(function(b){a.commandParameter(b,k,"invalid "+d,h.commandStr);return k[b]},function(h,b,e){var l=h.constants.compareFuncs;a.optional(function(){h.assert(b,e+" in "+l,"invalid "+d+", must be one of "+p(k))});return b.def(l,"[",e,"]")});case "depth.range":return E(function(d){a.command(w(d)&&2===d.length&&"number"===typeof d[0]&&
"number"===typeof d[1]&&d[0]<=d[1],"depth range is 2d array",h.commandStr);return d},function(d,h,b){a.optional(function(){d.assert(h,d.shared.isArrayLike+"("+b+")&&"+b+".length===2&&typeof "+b+'[0]==="number"&&typeof '+b+'[1]==="number"&&'+b+"[0]<="+b+"[1]","depth range must be a 2d array")});var e=h.def("+",b,"[0]"),l=h.def("+",b,"[1]");return[e,l]});case "blend.func":return E(function(d){a.commandType(d,"object","blend.func",h.commandStr);var b="srcRGB"in d?d.srcRGB:d.src,e="srcAlpha"in d?d.srcAlpha:
d.src,l="dstRGB"in d?d.dstRGB:d.dst;d="dstAlpha"in d?d.dstAlpha:d.dst;a.commandParameter(b,R,ma+".srcRGB",h.commandStr);a.commandParameter(e,R,ma+".srcAlpha",h.commandStr);a.commandParameter(l,R,ma+".dstRGB",h.commandStr);a.commandParameter(d,R,ma+".dstAlpha",h.commandStr);a.command(-1===mc.indexOf(b+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+l+")",h.commandStr);return[R[b],R[l],R[e],R[d]]},function(h,b,e){function l(g,E){var ma=b.def('"',g,E,'" in ',e,"?",e,".",g,E,":",
e,".",g);a.optional(function(){h.assert(b,ma+" in "+f,"invalid "+d+"."+g+E+", must be one of "+p(R))});return ma}var f=h.constants.blendFuncs;a.optional(function(){h.assert(b,e+"&&typeof "+e+'==="object"',"invalid blend func, must be an object")});var g=l("src","RGB"),E=l("dst","RGB");a.optional(function(){h.assert(b,h.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+E+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ma=b.def(f,"[",g,"]"),q=b.def(f,"[",l("src","Alpha"),
"]"),m=b.def(f,"[",E,"]"),k=b.def(f,"[",l("dst","Alpha"),"]");return[ma,m,q,k]});case "blend.equation":return E(function(b){if("string"===typeof b)return a.commandParameter(b,ta,"invalid "+d,h.commandStr),[ta[b],ta[b]];if("object"===typeof b)return a.commandParameter(b.rgb,ta,d+".rgb",h.commandStr),a.commandParameter(b.alpha,ta,d+".alpha",h.commandStr),[ta[b.rgb],ta[b.alpha]];a.commandRaise("invalid blend.equation",h.commandStr)},function(b,h,e){var l=b.constants.blendEquations,f=h.def(),g=h.def(),
E=b.cond("typeof ",e,'==="string"');a.optional(function(){function a(d,h,e){b.assert(d,e+" in "+l,"invalid "+h+", must be one of "+p(ta))}a(E.then,d,e);b.assert(E["else"],e+"&&typeof "+e+'==="object"',"invalid "+d);a(E["else"],d+".rgb",e+".rgb");a(E["else"],d+".alpha",e+".alpha")});E.then(f,"=",g,"=",l,"[",e,"];");E["else"](f,"=",l,"[",e,".rgb];",g,"=",l,"[",e,".alpha];");h(E);return[f,g]});case "blend.color":return E(function(d){a.command(w(d)&&4===d.length,"blend.color must be a 4d array",h.commandStr);
return x(4,function(a){return+d[a]})},function(d,b,h){a.optional(function(){d.assert(b,d.shared.isArrayLike+"("+h+")&&"+h+".length===4","blend.color must be a 4d array")});return x(4,function(a){return b.def("+",h,"[",a,"]")})});case "stencil.mask":return E(function(d){a.commandType(d,"number",ma,h.commandStr);return d|0},function(d,b,h){a.optional(function(){d.assert(b,"typeof "+h+'==="number"',"invalid stencil.mask")});return b.def(h,"|0")});case "stencil.func":return E(function(b){a.commandType(b,
"object",ma,h.commandStr);var e=b.cmp||"keep",l=b.ref||0;b="mask"in b?b.mask:-1;a.commandParameter(e,k,d+".cmp",h.commandStr);a.commandType(l,"number",d+".ref",h.commandStr);a.commandType(b,"number",d+".mask",h.commandStr);return[k[e],l,b]},function(d,b,h){var e=d.constants.compareFuncs;a.optional(function(){function a(){d.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(h+"&&typeof ",h,'==="object"');a('!("cmp" in ',h,")||(",h,".cmp in ",e,")")});var l=b.def('"cmp" in ',
h,"?",e,"[",h,".cmp]",":",7680),f=b.def(h,".ref|0"),g=b.def('"mask" in ',h,"?",h,".mask|0:-1");return[l,f,g]});case "stencil.opFront":case "stencil.opBack":return E(function(b){a.commandType(b,"object",ma,h.commandStr);var e=b.fail||"keep",l=b.zfail||"keep";b=b.zpass||"keep";a.commandParameter(e,z,d+".fail",h.commandStr);a.commandParameter(l,z,d+".zfail",h.commandStr);a.commandParameter(b,z,d+".zpass",h.commandStr);return["stencil.opBack"===d?1029:1028,z[e],z[l],z[b]]},function(b,h,e){function l(g){a.optional(function(){b.assert(h,
'!("'+g+'" in '+e+")||("+e+"."+g+" in "+f+")","invalid "+d+"."+g+", must be one of "+p(z))});return h.def('"',g,'" in ',e,"?",f,"[",e,".",g,"]:",7680)}var f=b.constants.stencilOps;a.optional(function(){b.assert(h,e+"&&typeof "+e+'==="object"',"invalid "+d)});return["stencil.opBack"===d?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return E(function(d){a.commandType(d,"object",ma,h.commandStr);var b=d.factor|0;d=d.units|0;a.commandType(b,"number",ma+".factor",h.commandStr);
a.commandType(d,"number",ma+".units",h.commandStr);return[b,d]},function(b,h,e){a.optional(function(){b.assert(h,e+"&&typeof "+e+'==="object"',"invalid "+d)});var l=h.def(e,".factor|0"),f=h.def(e,".units|0");return[l,f]});case "cull.face":return E(function(d){var b=0;"front"===d?b=1028:"back"===d&&(b=1029);a.command(!!b,ma,h.commandStr);return b},function(d,b,h){a.optional(function(){d.assert(b,h+'==="front"||'+h+'==="back"',"invalid cull.face")});return b.def(h,'==="front"?',1028,":",1029)});case "lineWidth":return E(function(d){a.command("number"===
typeof d&&d>=N.lineWidthDims[0]&&d<=N.lineWidthDims[1],"invalid line width, must be a positive number between "+N.lineWidthDims[0]+" and "+N.lineWidthDims[1],h.commandStr);return d},function(d,b,h){a.optional(function(){d.assert(b,"typeof "+h+'==="number"&&'+h+">="+N.lineWidthDims[0]+"&&"+h+"<="+N.lineWidthDims[1],"invalid line width")});return h});case "frontFace":return E(function(d){a.commandParameter(d,ca,ma,h.commandStr);return ca[d]},function(d,b,h){a.optional(function(){d.assert(b,h+'==="cw"||'+
h+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(h+'==="cw"?2304:2305')});case "colorMask":return E(function(d){a.command(w(d)&&4===d.length,"color.mask must be length 4 array",h.commandStr);return d.map(function(a){return!!a})},function(d,b,h){a.optional(function(){d.assert(b,d.shared.isArrayLike+"("+h+")&&"+h+".length===4","invalid color.mask")});return x(4,function(a){return"!!"+h+"["+a+"]"})});case "sample.coverage":return E(function(d){a.command("object"===typeof d&&d,
ma,h.commandStr);var b="value"in d?d.value:1;d=!!d.invert;a.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",h.commandStr);return[b,d]},function(d,b,h){a.optional(function(){d.assert(b,h+"&&typeof "+h+'==="object"',"invalid sample.coverage")});var e=b.def('"value" in ',h,"?+",h,".value:1"),l=b.def("!!",h,".invert");return[e,l]})}});return g}function Ba(d,h){var l=d["static"],f=d.dynamic,g={};p(l).forEach(function(d){var b=l[d],f;if("number"===typeof b||
"boolean"===typeof b)f=e(function(){return b});else if("function"===typeof b){var E=b._reglType;"texture2d"===E||"textureCube"===E?f=e(function(a){return a.link(b)}):"framebuffer"===E||"framebufferCube"===E?(a.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+d+'"',h.commandStr),f=e(function(a){return a.link(b.color[0])})):a.commandRaise('invalid data for uniform "'+d+'"',h.commandStr)}else w(b)?f=e(function(h){return h.global.def("[",x(b.length,function(e){a.command("number"===
typeof b[e]||"boolean"===typeof b[e],"invalid uniform "+d,h.commandStr);return b[e]}),"]")}):a.commandRaise('invalid or missing data for uniform "'+d+'"',h.commandStr);f.value=b;g[d]=f});p(f).forEach(function(a){var d=f[a];g[a]=b(d,function(a,b){return a.invoke(b,d)})});return g}function Ha(d,h){var l=d["static"],f=d.dynamic,g={};p(l).forEach(function(d){var b=l[d],f=t.id(d),E=new ha;if(c(b))E.state=1,E.buffer=u.getBuffer(u.create(b,34962,!1,!0)),E.type=0;else{var ma=u.getBuffer(b);if(ma)E.state=
1,E.buffer=ma,E.type=0;else if(a.command("object"===typeof b&&b,"invalid data for attribute "+d,h.commandStr),"constant"in b){var q=b.constant;E.buffer="null";E.state=2;"number"===typeof q?E.x=q:(a.command(w(q)&&0<q.length&&4>=q.length,"invalid constant for attribute "+d,h.commandStr),O.forEach(function(a,d){d<q.length&&(E[a]=q[d])}))}else{ma=c(b.buffer)?u.getBuffer(u.create(b.buffer,34962,!1,!0)):u.getBuffer(b.buffer);a.command(!!ma,'missing buffer for attribute "'+d+'"',h.commandStr);var m=b.offset|
0;a.command(0<=m,'invalid offset for attribute "'+d+'"',h.commandStr);var k=b.stride|0;a.command(0<=k&&256>k,'invalid stride for attribute "'+d+'", must be integer betweeen [0, 255]',h.commandStr);var x=b.size|0;a.command(!("size"in b)||0<x&&4>=x,'invalid size for attribute "'+d+'", must be 1,2,3,4',h.commandStr);var z=!!b.normalized,y=0;"type"in b&&(a.commandParameter(b.type,C,"invalid type for attribute "+d,h.commandStr),y=C[b.type]);var v=b.divisor|0;a.optional(function(){"divisor"in b&&(a.command(0===
v||V,'cannot specify divisor for attribute "'+d+'", instancing not supported',h.commandStr),a.command(0<=v,'invalid divisor for attribute "'+d+'"',h.commandStr));var e=h.commandStr,l="buffer offset divisor normalized type size stride".split(" ");p(b).forEach(function(b){a.command(0<=l.indexOf(b),'unknown parameter "'+b+'" for attribute pointer "'+d+'" (valid parameters are '+l+")",e)})});E.buffer=ma;E.state=1;E.size=x;E.normalized=z;E.type=y||ma.dtype;E.offset=m;E.stride=k;E.divisor=v}}g[d]=e(function(a,
d){var b=a.attribCache;if(f in b)return b[f];var h={isStream:!1};p(E).forEach(function(a){h[a]=E[a]});E.buffer&&(h.buffer=a.link(E.buffer),h.type=h.type||h.buffer+".dtype");return b[f]=h})});p(f).forEach(function(d){var h=f[d];g[d]=b(h,function(b,e){function l(a){e(m[a],"=",f,".",a,"|0;")}var f=b.invoke(e,h),g=b.shared,E=b.constants,ma=g.isBufferArgs,q=g.buffer;a.optional(function(){b.assert(e,f+"&&(typeof "+f+'==="object"||typeof '+f+'==="function")&&('+ma+"("+f+")||"+q+".getBuffer("+f+")||"+q+".getBuffer("+
f+".buffer)||"+ma+"("+f+'.buffer)||("constant" in '+f+"&&(typeof "+f+'.constant==="number"||'+g.isArrayLike+"("+f+".constant))))",'invalid dynamic attribute "'+d+'"')});var m={isStream:e.def(!1)},k=new ha;k.state=1;p(k).forEach(function(a){m[a]=e.def(""+k[a])});var t=m.buffer,x=m.type;e("if(",ma,"(",f,")){",m.isStream,"=true;",t,"=",q,".createStream(",34962,",",f,");",x,"=",t,".dtype;","}else{",t,"=",q,".getBuffer(",f,");","if(",t,"){",x,"=",t,".dtype;",'}else if("constant" in ',f,"){",m.state,"=",
2,";","if(typeof "+f+'.constant === "number"){',m[O[0]],"=",f,".constant;",O.slice(1).map(function(a){return m[a]}).join("="),"=0;","}else{",O.map(function(a,d){return m[a]+"="+f+".constant.length>"+d+"?"+f+".constant["+d+"]:0;"}).join(""),"}}else{","if(",ma,"(",f,".buffer)){",t,"=",q,".createStream(",34962,",",f,".buffer);","}else{",t,"=",q,".getBuffer(",f,".buffer);","}",x,'="type" in ',f,"?",E.glTypes,"[",f,".type]:",t,".dtype;",m.normalized,"=!!",f,".normalized;");l("size");l("offset");l("stride");
l("divisor");e("}}");e.exit("if(",m.isStream,"){",q,".destroyStream(",t,");","}");return m})});return g}function cc(a){var d=a["static"],l=a.dynamic,f={};p(d).forEach(function(a){var b=d[a];f[a]=e(function(a,d){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});p(l).forEach(function(a){var d=l[a];f[a]=b(d,function(a,b){return a.invoke(b,d)})});return f}function Ga(d,b,e,l,f){function g(a){var d=t[a];d&&(z[a]=d)}var E=d["static"],q=d.dynamic;a.optional(function(){function d(h){p(h).forEach(function(d){a.command(0<=
b.indexOf(d),'unknown parameter "'+d+'"',f.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(aa);d(E);d(q)});var m=T(d,b),k=B(d,f),t=$a(d,k,f),x=ja(d,f),z=ba(d,f),y=v(d,f,m);g("viewport");g(K("scissor.box"));var ka=0<p(z).length,k={framebuffer:k,draw:x,shader:y,state:z,dirty:ka,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};k.profile=L(d,f);k.uniforms=Ba(e,f);k.drawVAO=k.scopeVAO=x.vao;if(!k.drawVAO&&y.program&&!m&&Z.angle_instanced_arrays&&
x["static"].elements){var r=!0;d=y.program.attributes.map(function(a){a=b["static"][a];r=r&&!!a;return a});if(r&&0<d.length){var c=Ka.getVAO(Ka.createVAO({attributes:d,elements:x["static"].elements}));k.drawVAO=new n(null,null,null,function(a,d){return a.link(c)});k.useVAO=!0}}m?k.useVAO=!0:k.attributes=Ha(b,f);k.context=cc(l,f);return k}function U(a,d,b){var e=a.shared.context,f=a.scope();p(b).forEach(function(l){d.save(e,"."+l);var g=b[l].append(a,d);Array.isArray(g)?f(e,".",l,"=[",g.join(),"];"):
f(e,".",l,"=",g,";")});d(f)}function pb(a,d,b,e){var l=a.shared,f=l.gl,g=l.framebuffer,E;fa&&(E=d.def(l.extensions,".webgl_draw_buffers"));var q=a.constants,l=q.drawBuffer,q=q.backBuffer;a=b?b.append(a,d):d.def(g,".next");e||d("if(",a,"!==",g,".cur){");d("if(",a,"){",f,".bindFramebuffer(",36160,",",a,".framebuffer);");fa&&d(E,".drawBuffersWEBGL(",l,"[",a,".colorAttachments.length]);");d("}else{",f,".bindFramebuffer(",36160,",null);");fa&&d(E,".drawBuffersWEBGL(",q,");");d("}",g,".cur=",a,";");e||
d("}")}function da(a,d,b){var e=a.shared,l=e.gl,f=a.current,g=a.next,q=e.current,m=e.next,k=a.cond(q,".dirty");aa.forEach(function(d){d=K(d);if(!(d in b.state)){var h,e;if(d in g){h=g[d];e=f[d];var p=x(F[d].length,function(a){return k.def(h,"[",a,"]")});k(a.cond(p.map(function(a,d){return a+"!=="+e+"["+d+"]"}).join("||")).then(l,".",wa[d],"(",p,");",p.map(function(a,d){return e+"["+d+"]="+a}).join(";"),";"))}else h=k.def(m,".",d),p=a.cond(h,"!==",q,".",d),k(p),d in E?p(a.cond(h).then(l,".enable(",
E[d],");")["else"](l,".disable(",E[d],");"),q,".",d,"=",h,";"):p(l,".",wa[d],"(",h,");",q,".",d,"=",h,";")}});0===p(b.state).length&&k(q,".dirty=false;");d(k)}function ra(a,d,b,e){var l=a.shared,f=a.current,g=l.current,q=l.gl;ga(p(b)).forEach(function(l){var m=b[l];if(!e||e(m)){var k=m.append(a,d);if(E[l]){var p=E[l];I(m)?k?d(q,".enable(",p,");"):d(q,".disable(",p,");"):d(a.cond(k).then(q,".enable(",p,");")["else"](q,".disable(",p,");"));d(g,".",l,"=",k,";")}else if(w(k)){var t=f[l];d(q,".",wa[l],
"(",k,");",k.map(function(a,d){return t+"["+d+"]="+a}).join(";"),";")}else d(q,".",wa[l],"(",k,");",g,".",l,"=",k,";")}})}function Ib(a,d){V&&(a.instancing=d.def(a.shared.extensions,".angle_instanced_arrays"))}function pc(a,d,b,e,l){function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(a){x=d.def();a(x,"=",f(),";");"string"===typeof l?a(k,".count+=",l,";"):a(k,".count++;");Oa&&(e?(z=d.def(),a(z,"=",t,".getNumPendingQueries();")):a(t,".beginQuery(",k,");"))}
function E(a){a(k,".cpuTime+=",f(),"-",x,";");Oa&&(e?a(t,".pushScopeStats(",z,",",t,".getNumPendingQueries(),",k,");"):a(t,".endQuery();"))}function q(a){var b=d.def(p,".profile");d(p,".profile=",a,";");d.exit(p,".profile=",b,";")}var m=a.shared,k=a.stats,p=m.current,t=m.timer;b=b.profile;var x,z;if(b){if(I(b)){b.enable?(g(d),E(d.exit),q("true")):q("false");return}b=b.append(a,d);q(b)}else b=d.def(p,".profile");m=a.block();g(m);d("if(",b,"){",m,"}");a=a.block();E(a);d.exit("if(",b,"){",a,"}")}function yc(d,
b,e,l,f){function g(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function E(a,e,l){function f(){b("if(!",p,".buffer){",m,".enableVertexAttribArray(",k,");}");var a=l.type,g;g=l.size?b.def(l.size,"||",e):e;b("if(",p,".type!==",a,"||",p,".size!==",g,"||",z.map(function(a){return p+"."+a+"!=="+l[a]}).join("||"),"){",m,".bindBuffer(",34962,",",t,".buffer);",m,".vertexAttribPointer(",[k,g,a,
l.normalized,l.stride,l.offset],");",p,".type=",a,";",p,".size=",g,";",z.map(function(a){return p+"."+a+"="+l[a]+";"}).join(""),"}");V&&(a=l.divisor,b("if(",p,".divisor!==",a,"){",d.instancing,".vertexAttribDivisorANGLE(",[k,a],");",p,".divisor=",a,";}"))}function g(){b("if(",p,".buffer){",m,".disableVertexAttribArray(",k,");",p,".buffer=null;","}if(",O.map(function(a,d){return p+"."+a+"!=="+x[d]}).join("||"),"){",m,".vertexAttrib4f(",k,",",x,");",O.map(function(a,d){return p+"."+a+"="+x[d]+";"}).join(""),
"}")}var m=q.gl,k=b.def(a,".location"),p=b.def(q.attributes,"[",k,"]");a=l.state;var t=l.buffer,x=[l.x,l.y,l.z,l.w],z=["buffer","normalized","offset","stride"];1===a?f():2===a?g():(b("if(",a,"===",1,"){"),f(),b("}else{"),g(),b("}"))}var q=d.shared;l.forEach(function(l){var q=l.name,m=e.attributes[q],k;if(m){if(!f(m))return;k=m.append(d,b)}else{if(!f(P))return;var t=d.scopeAttrib(q);a.optional(function(){d.assert(b,t+".state","missing attribute "+q)});k={};p(new ha).forEach(function(a){k[a]=b.def(t,
".",a)})}E(d.link(l),g(l.info.type),k)})}function vd(d,b,l,e,f,g){for(var E=d.shared,q=E.gl,m,k=0;k<e.length;++k){var p=e[k],z=p.name,y=p.info.type,v=l.uniforms[z],p=d.link(p)+".location",r;if(v){if(!f(v))continue;if(I(v)){var ka=v.value;a.command(null!==ka&&"undefined"!==typeof ka,'missing uniform "'+z+'"',d.commandStr);if(35678===y||35680===y)a.command("function"===typeof ka&&(35678===y&&("texture2d"===ka._reglType||"framebuffer"===ka._reglType)||35680===y&&("textureCube"===ka._reglType||"framebufferCube"===
ka._reglType)),"invalid texture for uniform "+z,d.commandStr),v=d.link(ka._texture||ka.color[0]._texture),b(q,".uniform1i(",p,",",v+".bind());"),b.exit(v,".unbind();");else if(35674===y||35675===y||35676===y){a.optional(function(){a.command(w(ka),"invalid matrix for uniform "+z,d.commandStr);a.command(35674===y&&4===ka.length||35675===y&&9===ka.length||35676===y&&16===ka.length,"invalid length for matrix uniform "+z,d.commandStr)});var v=d.global.def("new Float32Array(["+Array.prototype.slice.call(ka)+
"])"),c=2;35675===y?c=3:35676===y&&(c=4);b(q,".uniformMatrix",c,"fv(",p,",false,",v,");")}else{switch(y){case 5126:a.commandType(ka,"number","uniform "+z,d.commandStr);m="1f";break;case 35664:a.command(w(ka)&&2===ka.length,"uniform "+z,d.commandStr);m="2f";break;case 35665:a.command(w(ka)&&3===ka.length,"uniform "+z,d.commandStr);m="3f";break;case 35666:a.command(w(ka)&&4===ka.length,"uniform "+z,d.commandStr);m="4f";break;case 35670:a.commandType(ka,"boolean","uniform "+z,d.commandStr);m="1i";break;
case 5124:a.commandType(ka,"number","uniform "+z,d.commandStr);m="1i";break;case 35671:a.command(w(ka)&&2===ka.length,"uniform "+z,d.commandStr);m="2i";break;case 35667:a.command(w(ka)&&2===ka.length,"uniform "+z,d.commandStr);m="2i";break;case 35672:a.command(w(ka)&&3===ka.length,"uniform "+z,d.commandStr);m="3i";break;case 35668:a.command(w(ka)&&3===ka.length,"uniform "+z,d.commandStr);m="3i";break;case 35673:a.command(w(ka)&&4===ka.length,"uniform "+z,d.commandStr);m="4i";break;case 35669:a.command(w(ka)&&
4===ka.length,"uniform "+z,d.commandStr),m="4i"}b(q,".uniform",m,"(",p,",",w(ka)?Array.prototype.slice.call(ka):ka,");")}continue}else r=v.append(d,b)}else{if(!f(P))continue;r=b.def(E.uniforms,"[",t.id(z),"]")}35678===y?(a(!Array.isArray(r),"must specify a scalar prop for textures"),b("if(",r,"&&",r,'._reglType==="framebuffer"){',r,"=",r,".color[0];","}")):35680===y&&(a(!Array.isArray(r),"must specify a scalar prop for cube maps"),b("if(",r,"&&",r,'._reglType==="framebufferCube"){',r,"=",r,".color[0];",
"}"));a.optional(function(){function l(a,e){d.assert(b,a,'bad data or missing for uniform "'+z+'".  '+e)}function e(d){a(!Array.isArray(r),"must not specify an array type for uniform");l("typeof "+r+'==="'+d+'"',"invalid type, expected "+d)}function f(b,h){Array.isArray(r)?a(r.length===b,"must have length "+b):l(E.isArrayLike+"("+r+")&&"+r+".length==="+b,"invalid vector, should have length "+b,d.commandStr)}function g(b){a(!Array.isArray(r),"must not specify a value type");l("typeof "+r+'==="function"&&'+
r+'._reglType==="texture'+(3553===b?"2d":"Cube")+'"',"invalid texture type",d.commandStr)}switch(y){case 5124:e("number");break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;case 35669:f(4,"number");break;case 5126:e("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:e("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,
"number");break;case 35676:f(16,"number");break;case 35678:g(3553);break;case 35680:g(34067)}});v=1;switch(y){case 35678:case 35680:v=b.def(r,"._texture");b(q,".uniform1i(",p,",",v,".bind());");b.exit(v,".unbind();");continue;case 5124:case 35670:m="1i";break;case 35667:case 35671:m="2i";v=2;break;case 35668:case 35672:m="3i";v=3;break;case 35669:case 35673:m="4i";v=4;break;case 5126:m="1f";break;case 35664:m="2f";v=2;break;case 35665:m="3f";v=3;break;case 35666:m="4f";v=4;break;case 35674:m="Matrix2fv";
break;case 35675:m="Matrix3fv";break;case 35676:m="Matrix4fv"}if("M"===m.charAt(0)){b(q,".uniform",m,"(",p,",");var p=Math.pow(y-35674+2,2),A=d.global.def("new Float32Array(",p,")");Array.isArray(r)?b("false,(",x(p,function(a){return A+"["+a+"]="+r[a]}),",",A,")"):b("false,(Array.isArray(",r,")||",r," instanceof Float32Array)?",r,":(",x(p,function(a){return A+"["+a+"]="+r+"["+a+"]"}),",",A,")");b(");")}else{if(1<v){for(var c=[],wa=[],J=0;J<v;++J)Array.isArray(r)?wa.push(r[J]):wa.push(b.def(r+"["+
J+"]")),g&&c.push(b.def());g&&b("if(!",d.batchId,"||",c.map(function(a,d){return a+"!=="+wa[d]}).join("||"),"){",c.map(function(a,d){return a+"="+wa[d]+";"}).join(""));b(q,".uniform",m,"(",p,",",wa.join(","),");")}else a(!Array.isArray(r),"uniform value must not be an array"),g&&(v=b.def(),b("if(!",d.batchId,"||",v,"!==",r,"){",v,"=",r,";")),b(q,".uniform",m,"(",p,",",r,");");g&&b("}")}}}function zc(d,b,l,e){function f(a){var g=p[a];return g?g.contextDep&&e.contextDynamic||g.propDep?g.append(d,l):
g.append(d,b):b.def(k,".",a)}function g(){function a(){l(y,".drawElementsInstancedANGLE(",[z,ka,v,x+"<<(("+v+"-5121)>>1)",r],");")}function d(){l(y,".drawArraysInstancedANGLE(",[z,x,ka,r],");")}t&&"null"!==t?c?a():(l("if(",t,"){"),a(),l("}else{"),d(),l("}")):d()}function E(){function a(){l(m+".drawElements("+[z,ka,v,x+"<<(("+v+"-5121)>>1)"]+");")}function d(){l(m+".drawArrays("+[z,x,ka]+");")}t&&"null"!==t?c?a():(l("if(",t,"){"),a(),l("}else{"),d(),l("}")):d()}var q=d.shared,m=q.gl,k=q.draw,p=e.draw,
t=function(){var a=p.elements,f=b;if(a){if(a.contextDep&&e.contextDynamic||a.propDep)f=l;a=a.append(d,f);p.elementsActive&&f("if("+a+")"+m+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=f.def(),f(a,"=",k,".","elements",";","if(",a,"){",m,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",q.vao,".currentVAO){",a,"=",d.shared.elements+".getElements("+q.vao,".currentVAO.elements);",na?"":"if("+a+")"+m+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),z=f("primitive"),x=f("offset"),
ka=function(){var f=p.count,g,E=b;if(f){if(f.contextDep&&e.contextDynamic||f.propDep)E=l;g=f.append(d,E);a.optional(function(){f.MISSING&&d.assert(b,"false","missing vertex count");f.DYNAMIC&&d.assert(E,g+">=0","missing vertex count")})}else g=E.def(k,".","count"),a.optional(function(){d.assert(E,g+">=0","missing vertex count")});return g}();if("number"===typeof ka){if(0===ka)return}else l("if(",ka,"){"),l.exit("}");var r,y;V&&(r=f("instances"),y=d.instancing);var v=t+".type",c=p.elements&&I(p.elements)&&
!p.vaoActive;V&&("number"!==typeof r||0<=r)?"string"===typeof r?(l("if(",r,">0){"),g(),l("}else if(",r,"<0){"),E(),l("}")):g():E()}function W(d,b,l,e,f){var g=oa();f=g.proc("body",f);a.optional(function(){g.commandStr=b.commandStr;g.command=g.link(b.commandStr)});V&&(g.instancing=f.def(g.shared.extensions,".angle_instanced_arrays"));d(g,f,l,e);return g.compile().body}function J(a,d,b,l){Ib(a,d);b.useVAO?b.drawVAO?d(a.shared.vao,".setVAO(",b.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,
".targetVAO);"):(d(a.shared.vao,".setVAO(null);"),yc(a,d,b,l.attributes,function(){return!0}));vd(a,d,b,l.uniforms,function(){return!0},!1);zc(a,d,d,b)}function ia(a,d){var b=a.proc("draw",1);Ib(a,b);U(a,b,d.context);pb(a,b,d.framebuffer);da(a,b,d);ra(a,b,d.state);pc(a,b,d,!1,!0);var l=d.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",l,".program);");if(d.shader.program)J(a,b,d,d.shader.program);else{b(a.shared.vao,".setVAO(null);");var f=a.global.def("{}"),e=b.def(l,".id"),g=b.def(f,"[",
e,"]");b(a.cond(g).then(g,".call(this,a0);")["else"](g,"=",f,"[",e,"]=",a.link(function(b){return W(J,a,d,b,1)}),"(",l,");",g,".call(this,a0);"))}0<p(d.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function Ca(a,d,b,l){function f(){return!0}a.batchId="a1";Ib(a,d);yc(a,d,b,l.attributes,f);vd(a,d,b,l.uniforms,f,!1);zc(a,d,d,b)}function wb(a,d,b,l){function f(a){return a.contextDep&&g||a.propDep}function e(a){return!f(a)}Ib(a,d);var g=b.contextDep,E=
d.def(),q=d.def();a.shared.props=q;a.batchId=E;var m=a.scope(),k=a.scope();d(m.entry,"for(",E,"=0;",E,"<","a1",";++",E,"){",q,"=","a0","[",E,"];",k,"}",m.exit);b.needsContext&&U(a,k,b.context);b.needsFramebuffer&&pb(a,k,b.framebuffer);ra(a,k,b.state,f);b.profile&&f(b.profile)&&pc(a,k,b,!1,!0);l?(b.useVAO?b.drawVAO?f(b.drawVAO)?k(a.shared.vao,".setVAO(",b.drawVAO.append(a,k),");"):m(a.shared.vao,".setVAO(",b.drawVAO.append(a,m),");"):m(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(m(a.shared.vao,
".setVAO(null);"),yc(a,m,b,l.attributes,e),yc(a,k,b,l.attributes,f)),vd(a,m,b,l.uniforms,e,!1),vd(a,k,b,l.uniforms,f,!0),zc(a,m,k,b)):(d=a.global.def("{}"),l=b.shader.progVar.append(a,k),q=k.def(l,".id"),m=k.def(d,"[",q,"]"),k(a.shared.gl,".useProgram(",l,".program);","if(!",m,"){",m,"=",d,"[",q,"]=",a.link(function(d){return W(Ca,a,b,d,2)}),"(",l,");}",m,".call(this,a0[",E,"],",E,");"))}function ab(a,d){function b(a){return a.contextDep&&f||a.propDep}var l=a.proc("batch",2);a.batchId="0";Ib(a,l);
var f=!1,e=!0;p(d.context).forEach(function(a){f=f||d.context[a].propDep});f||(U(a,l,d.context),e=!1);var g=d.framebuffer,E=!1;g?(g.propDep?f=E=!0:g.contextDep&&f&&(E=!0),E||pb(a,l,g)):pb(a,l,null);d.state.viewport&&d.state.viewport.propDep&&(f=!0);da(a,l,d);ra(a,l,d.state,function(a){return!b(a)});d.profile&&b(d.profile)||pc(a,l,d,!1,"a1");d.contextDep=f;d.needsContext=e;d.needsFramebuffer=E;e=d.shader.progVar;if(e.contextDep&&f||e.propDep)wb(a,l,d,null);else if(e=e.append(a,l),l(a.shared.gl,".useProgram(",
e,".program);"),d.shader.program)wb(a,l,d,d.shader.program);else{l(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),E=l.def(e,".id"),q=l.def(g,"[",E,"]");l(a.cond(q).then(q,".call(this,a0,a1);")["else"](q,"=",g,"[",E,"]=",a.link(function(b){return W(wb,a,d,b,2)}),"(",e,");",q,".call(this,a0,a1);"))}0<p(d.state).length&&l(a.shared.current,".dirty=true;");a.shared.vao&&l(a.shared.vao,".setVAO(null);")}function Uc(a,d){function b(e){var g=d.shader[e];g&&l.set(f.shader,"."+e,g.append(a,l))}var l=
a.proc("scope",3);a.batchId="a2";var f=a.shared,e=f.current;U(a,l,d.context);d.framebuffer&&d.framebuffer.append(a,l);ga(p(d.state)).forEach(function(b){var e=d.state[b].append(a,l);w(e)?e.forEach(function(d,f){l.set(a.next[b],"["+f+"]",d)}):l.set(f.next,"."+b,e)});pc(a,l,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var e=d.draw[b];e&&l.set(f.draw,"."+b,""+e.append(a,l))});p(d.uniforms).forEach(function(b){var e=d.uniforms[b].append(a,l);Array.isArray(e)&&(e=
"["+e.join()+"]");l.set(f.uniforms,"["+t.id(b)+"]",e)});p(d.attributes).forEach(function(b){var e=d.attributes[b].append(a,l),f=a.scopeAttrib(b);p(new ha).forEach(function(a){l.set(f,"."+a,e[a])})});d.scopeVAO&&l.set(f.vao,".targetVAO",d.scopeVAO.append(a,l));b("vert");b("frag");0<p(d.state).length&&(l(e,".dirty=true;"),l.exit(e,".dirty=true;"));l("a1(",a.shared.context,",a0,",a.batchId,");")}function H(a){if("object"===typeof a&&!w(a)){for(var d=p(a),b=0;b<d.length;++b)if(D.isDynamic(a[d[b]]))return!0;
return!1}}function A(a,d,l){function e(a,d){E.forEach(function(b){var l=f[b];D.isDynamic(l)&&(l=a.invoke(d,l),d(t,".",b,"=",l,";"))})}var f=d["static"][l];if(f&&H(f)){var g=a.global,E=p(f),q=!1,m=!1,k=!1,t=a.global.def("{}");E.forEach(function(d){var l=f[d];if(D.isDynamic(l))"function"===typeof l&&(l=f[d]=D.unbox(l)),d=b(l,null),q=q||d.thisDep,k=k||d.propDep,m=m||d.contextDep;else{g(t,".",d,"=");switch(typeof l){case "number":g(l);break;case "string":g('"',l,'"');break;case "object":Array.isArray(l)&&
g("[",l.join(),"]");break;default:g(a.link(l))}g(";")}});d.dynamic[l]=new D.DynamicVariable(4,{thisDep:q,contextDep:m,propDep:k,ref:t,append:e});delete d["static"][l]}}var ha=Ka.Record,ta={add:32774,subtract:32778,"reverse subtract":32779};Z.ext_blend_minmax&&(ta.min=32775,ta.max=32776);var V=Z.angle_instanced_arrays,fa=Z.webgl_draw_buffers,na=Z.oes_vertex_array_object,F={dirty:!0,profile:X.profile},y={},aa=[],E={},wa={};M("dither",3024);M("blend.enable",3042);Q("blend.color","blendColor",[0,0,0,
0]);Q("blend.equation","blendEquationSeparate",[32774,32774]);Q("blend.func","blendFuncSeparate",[1,0,1,0]);M("depth.enable",2929,!0);Q("depth.func","depthFunc",513);Q("depth.range","depthRange",[0,1]);Q("depth.mask","depthMask",!0);Q("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);Q("cull.face","cullFace",1029);Q("frontFace","frontFace",2305);Q("lineWidth","lineWidth",1);M("polygonOffset.enable",32823);Q("polygonOffset.offset","polygonOffset",[0,0]);M("sample.alpha",32926);M("sample.enable",
32928);Q("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",2960);Q("stencil.mask","stencilMask",-1);Q("stencil.func","stencilFunc",[519,0,-1]);Q("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);Q("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);Q("scissor.box","scissor",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);Q("viewport","viewport",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);var ka={gl:f,context:ua,strings:t,next:y,current:F,
draw:Zb,elements:d,buffer:u,shader:vb,attributes:Ka.state,vao:Ka,uniforms:sa,framebuffer:Y,extensions:Z,timer:Oa,isBufferArgs:c},l={primTypes:G,compareFuncs:k,blendFuncs:R,blendEquations:ta,stencilOps:z,glTypes:C,orientationType:ca};a.optional(function(){ka.isArrayLike=w});fa&&(l.backBuffer=[1029],l.drawBuffer=x(N.maxDrawbuffers,function(a){return 0===a?[0]:x(a,function(a){return 36064+a})}));var rc=0;return{next:y,current:F,procs:function(){var a=oa(),d=a.proc("poll"),b=a.proc("refresh"),l=a.block();
d(l);b(l);var f=a.shared,e=f.gl,g=f.next,q=f.current;l(q,".dirty=false;");pb(a,d);pb(a,b,null,!0);var m;V&&(m=a.link(V));Z.oes_vertex_array_object&&b(a.link(Z.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var k=0;k<N.maxAttributes;++k){var t=b.def(f.attributes,"[",k,"]"),z=a.cond(t,".buffer");z.then(e,".enableVertexAttribArray(",k,");",e,".bindBuffer(",34962,",",t,".buffer.buffer);",e,".vertexAttribPointer(",k,",",t,".size,",t,".type,",t,".normalized,",t,".stride,",t,".offset);")["else"](e,
".disableVertexAttribArray(",k,");",e,".vertexAttrib4f(",k,",",t,".x,",t,".y,",t,".z,",t,".w);",t,".buffer=null;");b(z);V&&b(m,".vertexAttribDivisorANGLE(",k,",",t,".divisor);")}b(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");p(E).forEach(function(f){var m=E[f],k=l.def(g,".",f),p=a.block();p("if(",k,"){",e,".enable(",m,")}else{",e,".disable(",m,")}",q,".",f,"=",k,";");b(p);d("if(",k,"!==",q,".",f,"){",p,"}")});p(wa).forEach(function(f){var E=wa[f],m=F[f],k,
p,t=a.block();t(e,".",E,"(");w(m)?(E=m.length,k=a.global.def(g,".",f),p=a.global.def(q,".",f),t(x(E,function(a){return k+"["+a+"]"}),");",x(E,function(a){return p+"["+a+"]="+k+"["+a+"];"}).join("")),d("if(",x(E,function(a){return k+"["+a+"]!=="+p+"["+a+"]"}).join("||"),"){",t,"}")):(k=l.def(g,".",f),p=l.def(q,".",f),t(k,");",q,".",f,"=",k,";"),d("if(",k,"!==",p,"){",t,"}"));b(t)});return a.compile()}(),compile:function(a,d,b,l,f){var e=oa();e.stats=e.link(f);p(d["static"]).forEach(function(a){A(e,
d,a)});Mc.forEach(function(d){A(e,a,d)});var E=Ga(a,d,b,l,e);ia(e,E);Uc(e,E);ab(e,E);return g(e.compile(),{destroy:function(){E.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(u,B,Ja){function c(e,a){this.id=b++;this.type=e;this.data=a}function ga(b){if(0===
b.length)return[];var a=b.charAt(0),e=b.charAt(b.length-1);if(1<b.length&&a===e&&('"'===a||"'"===a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return ga(b.substr(0,a.index)).concat(ga(a[1])).concat(ga(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(e=0;e<a.length;++e)b=b.concat(ga(a[e]));return b}function n(b){return"["+
ga(b).join("][")+"]"}function I(b,a){if("function"===typeof b)return new c(0,b);if("number"===typeof b||"boolean"===typeof b)return new c(5,b);if(Array.isArray(b))return new c(6,b.map(function(b,e){return I(b,a+"["+e+"]")}));if(b instanceof c)return b;e(!1,"invalid option type in uniform "+a)}var e=u("./util/check"),b=0;B.exports={DynamicVariable:c,define:function(b,a){return new c(b,n(a+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof c},unbox:I,accessor:n}},{"./util/check":21}],
10:[function(u,B,Ja){var c=u("./util/check"),ga=u("./util/is-typed-array"),n=u("./util/is-ndarray"),I=u("./util/values"),e=u("./constants/primitives.json"),b=u("./constants/usage.json");B.exports=function(p,a,g,r){function x(a){this.id=D++;w[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function f(b,e,f,x,k,z,q){b.buffer.bind();var r;e?((r=q)||ga(e)&&(!n(e)||ga(e.data))||(r=a.oes_element_index_uint?5125:5123),g._initBuffer(b.buffer,e,f,r,3)):(p.bufferData(34963,z,f),b.buffer.dtype=
r||5121,b.buffer.usage=f,b.buffer.dimension=3,b.buffer.byteLength=z);r=q;if(!q){switch(b.buffer.dtype){case 5121:case 5120:r=5121;break;case 5123:case 5122:r=5123;break;case 5125:case 5124:r=5125;break;default:c.raise("unsupported type for element array")}b.buffer.dtype=r}b.type=r;c(5125!==r||!!a.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=k;0>e&&(e=b.buffer.byteLength,5123===r?e>>=1:5125===r&&(e>>=2));b.vertCount=e;e=x;0>x&&(e=4,x=b.buffer.dimension,
1===x&&(e=0),2===x&&(e=1),3===x&&(e=4));b.primType=e}function Z(a){r.elementsCount--;c(null!==a.buffer,"must not double destroy elements");delete w[a.id];a.buffer.destroy();a.buffer=null}var w={},D=0,G={uint8:5121,uint16:5123};a.oes_element_index_uint&&(G.uint32=5125);x.prototype.bind=function(){this.buffer.bind()};var C=[];return{create:function(a,p){function w(a){if(a)if("number"===typeof a)D(a),k.primType=4,k.vertCount=a|0,k.type=5121;else{var g=null,p=35044,r=-1,x=-1,t=0,Z=0;if(Array.isArray(a)||
ga(a)||n(a))g=a;else if(c.type(a,"object","invalid arguments for elements"),"data"in a&&(g=a.data,c(Array.isArray(g)||ga(g)||n(g),"invalid data for element buffer")),"usage"in a&&(c.parameter(a.usage,b,"invalid element buffer usage"),p=b[a.usage]),"primitive"in a&&(c.parameter(a.primitive,e,"invalid element buffer primitive"),r=e[a.primitive]),"count"in a&&(c("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),x=a.count|0),"type"in a&&(c.parameter(a.type,G,"invalid buffer type"),
Z=G[a.type]),"length"in a)t=a.length|0;else if(t=x,5123===Z||5122===Z)t*=2;else if(5125===Z||5124===Z)t*=4;f(k,g,p,r,x,t,Z)}else D(),k.primType=4,k.vertCount=0,k.type=5121;return w}var D=g.create(null,34963,!0),k=new x(D._buffer);r.elementsCount++;w(a);w._reglType="elements";w._elements=k;w.subdata=function(a,b){D.subdata(a,b);return w};w.destroy=function(){Z(k)};return w},createStream:function(a){var b=C.pop();b||(b=new x(g.create(null,34963,!0,!1)._buffer));f(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){C.push(a)},
getElements:function(a){return"function"===typeof a&&a._elements instanceof x?a._elements:null},clear:function(){I(w).forEach(Z)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(u,B,Ja){var c=u("./util/sorted-object-keys"),ga=u("./util/check");B.exports=function(n,I){function e(a){ga.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=b[a]=n.getExtension(a)}catch(p){}return!!e}
for(var b={},p=0;p<I.extensions.length;++p){var a=I.extensions[p];if(!e(a))return I.onDestroy(),I.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}I.optionalExtensions.forEach(e);return{extensions:b,restore:function(){c(b).forEach(function(a){if(b[a]&&!e(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(u,B,Ja){var c=u("./util/check"),ga=u("./util/values"),
n=u("./util/extend"),I=[6407,6408],e=[];e[6408]=4;e[6407]=3;var b=[];b[5121]=1;b[5126]=4;b[36193]=2;var p=[32854,32855,36194,35907,34842,34843,34836],a={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};B.exports=function(g,r,x,f,Z,w){function D(a,d,b){this.target=a;this.texture=d;this.renderbuffer=b;var e=a=0;d?(a=d.width,e=d.height):b&&(a=b.width,e=b.height);this.width=a;this.height=e}function G(a){a&&(a.texture&&
a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function C(a,d,b){if(a){if(a.texture){a=a.texture._texture;var e=Math.max(1,a.height);c(Math.max(1,a.width)===d&&e===b,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,c(a.width===d&&a.height===b,"inconsistent width/height for renderbuffer");a.refCount+=1}}function O(a,d){d&&(d.texture?g.framebufferTexture2D(36160,a,d.target,d.texture._texture.texture,0):g.framebufferRenderbuffer(36160,
a,36161,d.renderbuffer._renderbuffer.renderbuffer))}function Mc(a){var d=3553,b=null,e=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(d=a.target|0));c.type(f,"function","invalid attachment data");a=f._reglType;"texture2d"===a?(b=f,c(3553===d)):"textureCube"===a?(b=f,c(34069<=d&&34075>d,"invalid cube map target")):"renderbuffer"===a?(e=f,d=36161):c.raise("invalid regl object for attachment");return new D(d,b,e)}function R(a,d,b,e,g){if(b)return a=f.create2D({width:a,height:d,format:e,type:g}),
a._texture.refCount=0,new D(3553,a,null);a=Z.create({width:a,height:d,format:e});a._renderbuffer.refCount=0;return new D(36161,null,a)}function u(a){return a&&(a.texture||a.renderbuffer)}function k(a,d,b){a&&(a.texture?a.texture.resize(d,b):a.renderbuffer&&a.renderbuffer.resize(d,b),a.width=d,a.height=b)}function z(){this.id=d++;m[this.id]=this;this.framebuffer=g.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function q(a){a.colorAttachments.forEach(G);G(a.depthAttachment);G(a.stencilAttachment);G(a.depthStencilAttachment)}function ca(a){var d=a.framebuffer;c(d,"must not double destroy framebuffer");g.deleteFramebuffer(d);a.framebuffer=null;w.framebufferCount--;delete m[a.id]}function P(d){var b;g.bindFramebuffer(36160,d.framebuffer);var e=d.colorAttachments;for(b=0;b<e.length;++b)O(36064+b,e[b]);for(b=e.length;b<x.maxColorAttachments;++b)g.framebufferTexture2D(36160,36064+b,3553,null,0);g.framebufferTexture2D(36160,
33306,3553,null,0);g.framebufferTexture2D(36160,36096,3553,null,0);g.framebufferTexture2D(36160,36128,3553,null,0);O(36096,d.depthAttachment);O(36128,d.stencilAttachment);O(33306,d.depthStencilAttachment);d=g.checkFramebufferStatus(36160);g.isContextLost()||36053===d||c.raise("framebuffer configuration not supported, status = "+a[d]);g.bindFramebuffer(36160,t.next?t.next.framebuffer:null);t.cur=t.next;g.getError()}function S(a,d){function f(a,d){var m;c(t.next!==g,"can not update framebuffer which is currently in use");
var k=0,z=0,w=!0,D=!0;m=null;var n=!0,Z="rgba",G="uint8",ca=1,ga=null,v=null,O=null,Y=!1;if("number"===typeof a)k=a|0,z=d|0||k;else if(a){c.type(a,"object","invalid arguments for framebuffer");"shape"in a?(z=a.shape,c(Array.isArray(z)&&2<=z.length,"invalid shape for framebuffer"),k=z[0],z=z[1]):("radius"in a&&(k=z=a.radius),"width"in a&&(k=a.width),"height"in a&&(z=a.height));if("color"in a||"colors"in a)m=a.color||a.colors,Array.isArray(m)&&c(1===m.length||r.webgl_draw_buffers,"multiple render targets not supported");
if(!m){"colorCount"in a&&(ca=a.colorCount|0,c(0<ca,"invalid color buffer count"));"colorTexture"in a&&(n=!!a.colorTexture,Z="rgba4");if("colorType"in a){G=a.colorType;if(n)c(r.oes_texture_float||!("float"===G||"float32"===G),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(r.oes_texture_half_float||!("half float"===G||"float16"===G),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===G||
"float16"===G)c(r.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Z="rgba16f";else if("float"===G||"float32"===G)c(r.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Z="rgba32f";c.oneOf(G,ea,"invalid color type")}"colorFormat"in a&&(Z=a.colorFormat,0<=la.indexOf(Z)?n=!0:0<=N.indexOf(Z)?n=!1:c.optional(function(){if(n)c.oneOf(a.colorFormat,la,"invalid color format for texture");
else c.oneOf(a.colorFormat,N,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)Y=!(!a.depthTexture&&!a.depthStencilTexture),c(!Y||r.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?w=a.depth:(ga=a.depth,D=!1));"stencil"in a&&("boolean"===typeof a.stencil?D=a.stencil:(v=a.stencil,w=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?w=D=a.depthStencil:(O=a.depthStencil,D=w=!1))}else k=z=1;
var S=null,sa=null,B=null,Ga=null;if(Array.isArray(m))S=m.map(Mc);else if(m)S=[Mc(m)];else for(S=Array(ca),m=0;m<ca;++m)S[m]=R(k,z,n,Z,G);c(r.webgl_draw_buffers||1>=S.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");c(S.length<=x.maxColorAttachments,"too many color attachments, not supported");k=k||S[0].width;z=z||S[0].height;ga?sa=Mc(ga):w&&!D&&(sa=R(k,z,Y,"depth","uint32"));v?B=Mc(v):D&&!w&&(B=R(k,z,!1,"stencil","uint8"));O?Ga=Mc(O):!ga&&!v&&D&&
w&&(Ga=R(k,z,Y,"depth stencil","depth stencil"));c(1>=!!ga+!!v+!!O,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");w=null;for(m=0;m<S.length;++m)C(S[m],k,z),c(!S[m]||S[m].texture&&0<=I.indexOf(S[m].texture._texture.format)||S[m].renderbuffer&&0<=p.indexOf(S[m].renderbuffer._renderbuffer.format),"framebuffer color attachment "+m+" is invalid"),S[m]&&S[m].texture&&(D=e[S[m].texture._texture.format]*b[S[m].texture._texture.type],null===w?w=D:c(w===D,"all color attachments much have the same number of bits per pixel."));
C(sa,k,z);c(!sa||sa.texture&&6402===sa.texture._texture.format||sa.renderbuffer&&33189===sa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");C(B,k,z);c(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");C(Ga,k,z);c(!Ga||Ga.texture&&34041===Ga.texture._texture.format||Ga.renderbuffer&&34041===Ga.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");q(g);g.width=
k;g.height=z;g.colorAttachments=S;g.depthAttachment=sa;g.stencilAttachment=B;g.depthStencilAttachment=Ga;f.color=S.map(u);f.depth=u(sa);f.stencil=u(B);f.depthStencil=u(Ga);f.width=g.width;f.height=g.height;P(g);return f}var g=new z;w.framebufferCount++;f(a,d);return n(f,{resize:function(a,d){c(t.next!==g,"can not resize a framebuffer which is currently in use");var b=Math.max(a|0,1),e=Math.max(d|0||b,1);if(b===g.width&&e===g.height)return f;for(var m=g.colorAttachments,q=0;q<m.length;++q)k(m[q],b,
e);k(g.depthAttachment,b,e);k(g.stencilAttachment,b,e);k(g.depthStencilAttachment,b,e);g.width=f.width=b;g.height=f.height=e;P(g);return f},_reglType:"framebuffer",_framebuffer:g,destroy:function(){ca(g);q(g)},use:function(a){t.setFBO({framebuffer:f},a)}})}var t={cur:null,next:null,dirty:!1,setFBO:null},la=["rgba"],N=["rgba4","rgb565","rgb5 a1"];r.ext_srgb&&N.push("srgba");r.ext_color_buffer_half_float&&N.push("rgba16f","rgb16f");r.webgl_color_buffer_float&&N.push("rgba32f");var ea=["uint8"];r.oes_texture_half_float&&
ea.push("half float","float16");r.oes_texture_float&&ea.push("float","float32");var d=0,m={};return n(t,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof z)?a:null},create:S,createCube:function(a){function d(a){var e;c(0>b.indexOf(t.next),"can not update framebuffer which is currently in use");var g={color:null},m=0,q=null;e="rgba";var k="uint8",p=1;if("number"===typeof a)m=a|0;else if(a){c.type(a,"object","invalid arguments for framebuffer");
"shape"in a?(m=a.shape,c(Array.isArray(m)&&2<=m.length,"invalid shape for framebuffer"),c(m[0]===m[1],"cube framebuffer must be square"),m=m[0]):("radius"in a&&(m=a.radius|0),"width"in a?(m=a.width|0,"height"in a&&c(a.height===m,"must be square")):"height"in a&&(m=a.height|0));if("color"in a||"colors"in a)q=a.color||a.colors,Array.isArray(q)&&c(1===q.length||r.webgl_draw_buffers,"multiple render targets not supported");q||("colorCount"in a&&(p=a.colorCount|0,c(0<p,"invalid color buffer count")),"colorType"in
a&&(c.oneOf(a.colorType,ea,"invalid color type"),k=a.colorType),"colorFormat"in a&&(e=a.colorFormat,c.oneOf(a.colorFormat,la,"invalid color format for texture")));"depth"in a&&(g.depth=a.depth);"stencil"in a&&(g.stencil=a.stencil);"depthStencil"in a&&(g.depthStencil=a.depthStencil)}else m=1;if(q)if(Array.isArray(q))for(a=[],e=0;e<q.length;++e)a[e]=q[e];else a=[q];else for(a=Array(p),q={radius:m,format:e,type:k},e=0;e<p;++e)a[e]=f.createCube(q);g.color=Array(a.length);for(e=0;e<a.length;++e)p=a[e],
c("function"===typeof p&&"textureCube"===p._reglType,"invalid cube map"),m=m||p.width,c(p.width===m&&p.height===m,"invalid cube map shape"),g.color[e]={target:34069,data:a[e]};for(e=0;6>e;++e){for(p=0;p<a.length;++p)g.color[p].target=34069+e;0<e&&(g.depth=b[0].depth,g.stencil=b[0].stencil,g.depthStencil=b[0].depthStencil);if(b[e])b[e](g);else b[e]=S(g)}return n(d,{width:m,height:m,color:a})}var b=Array(6);d(a);return n(d,{faces:b,resize:function(a){var e=a|0;c(0<e&&e<=x.maxCubeMapSize,"invalid radius for cube fbo");
if(e===d.width)return d;var f=d.color;for(a=0;a<f.length;++a)f[a].resize(e);for(a=0;6>a;++a)b[a].resize(e);d.width=d.height=e;return d},_reglType:"framebufferCube",destroy:function(){b.forEach(function(a){a.destroy()})}})},clear:function(){ga(m).forEach(ca)},restore:function(){t.cur=null;t.next=null;t.dirty=!0;ga(m).forEach(function(a){a.framebuffer=g.createFramebuffer();P(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(u,B,Ja){var c=u("./util/sorted-object-keys"),
ga=u("./util/pool");B.exports=function(n,I){var e=1;I.ext_texture_filter_anisotropic&&(e=n.getParameter(34047));var b=1,p=1;I.webgl_draw_buffers&&(b=n.getParameter(34852),p=n.getParameter(36063));var a=!!I.oes_texture_float;if(a){a=n.createTexture();n.bindTexture(3553,a);n.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var g=n.createFramebuffer();n.bindFramebuffer(36160,g);n.framebufferTexture2D(36160,36064,3553,a,0);n.bindTexture(3553,null);if(36053!==n.checkFramebufferStatus(36160))a=!1;else{n.viewport(0,
0,1,1);n.clearColor(1,0,0,1);n.clear(16384);var r=ga.allocType(5126,4);n.readPixels(0,0,1,1,6408,5126,r);n.getError()?a=!1:(n.deleteFramebuffer(g),n.deleteTexture(a),a=1===r[0]);ga.freeType(r)}}r=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(r=n.createTexture(),g=ga.allocType(5121,36),n.activeTexture(33984),n.bindTexture(34067,r),n.texImage2D(34069,0,6408,3,3,0,6408,5121,g),ga.freeType(g),n.bindTexture(34067,
null),n.deleteTexture(r),r=!n.getError());return{colorBits:[n.getParameter(3410),n.getParameter(3411),n.getParameter(3412),n.getParameter(3413)],depthBits:n.getParameter(3414),stencilBits:n.getParameter(3415),subpixelBits:n.getParameter(3408),extensions:c(I).filter(function(a){return!!I[a]}),maxAnisotropic:e,maxDrawbuffers:b,maxColorAttachments:p,pointSizeDims:n.getParameter(33901),lineWidthDims:n.getParameter(33902),maxViewportDims:n.getParameter(3386),maxCombinedTextureUnits:n.getParameter(35661),
maxCubeMapSize:n.getParameter(34076),maxRenderbufferSize:n.getParameter(34024),maxTextureUnits:n.getParameter(34930),maxTextureSize:n.getParameter(3379),maxAttributes:n.getParameter(34921),maxVertexUniforms:n.getParameter(36347),maxVertexTextureUnits:n.getParameter(35660),maxVaryingVectors:n.getParameter(36348),maxFragmentUniforms:n.getParameter(36349),glsl:n.getParameter(35724),renderer:n.getParameter(7937),vendor:n.getParameter(7936),version:n.getParameter(7938),readFloat:a,npotTextureCube:r}}},
{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(u,B,Ja){var c=u("./util/check"),ga=u("./util/is-typed-array");B.exports=function(n,I,e,b,p,a,g){function r(f){var r;null===I.next?(c(p.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),r=5121):(c(null!==I.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),r=I.next.colorAttachments[0].texture._texture.type,c.optional(function(){a.oes_texture_float?
(c(5121===r||5126===r,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===r&&c(g.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(5121===r,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var x=0,D=0,G=b.framebufferWidth,C=b.framebufferHeight,O=null;ga(f)?O=f:f&&(c.type(f,"object","invalid arguments to regl.read()"),x=f.x|0,D=f.y|0,c(0<=x&&x<b.framebufferWidth,
"invalid x offset for regl.read"),c(0<=D&&D<b.framebufferHeight,"invalid y offset for regl.read"),G=(f.width||b.framebufferWidth-x)|0,C=(f.height||b.framebufferHeight-D)|0,O=f.data||null);O&&(5121===r?c(O instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===r&&c(O instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));c(0<G&&G+x<=b.framebufferWidth,"invalid width for read pixels");c(0<C&&C+D<=
b.framebufferHeight,"invalid height for read pixels");e();f=G*C*4;O||(5121===r?O=new Uint8Array(f):5126===r&&(O=O||new Float32Array(f)));c.isTypedArray(O,"data buffer for regl.read() must be a typedarray");c(O.byteLength>=f,"data buffer for regl.read() too small");n.pixelStorei(3333,4);n.readPixels(x,D,G,C,6408,r,O);return O}function x(a){var b;I.setFBO({framebuffer:a.framebuffer},function(){b=r(a)});return b}return function(a){return a&&"framebuffer"in a?x(a):r(a)}}},{"./util/check":21,"./util/is-typed-array":30}],
15:[function(u,B,Ja){var c=u("./util/sorted-object-keys"),ga=u("./util/check"),n=u("./util/values"),I=[];I[32854]=2;I[32855]=2;I[36194]=2;I[33189]=2;I[36168]=1;I[34041]=4;I[35907]=4;I[34836]=16;I[34842]=8;I[34843]=6;B.exports=function(e,b,p,a,g){function r(a){this.id=w++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;g.profile&&(this.stats={size:0})}function x(b){var f=b.renderbuffer;ga(f,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(f);
b.renderbuffer=null;b.refCount=0;delete D[b.id];a.renderbufferCount--}var f={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(f.srgba=35907);b.ext_color_buffer_half_float&&(f.rgba16f=34842,f.rgb16f=34843);b.webgl_color_buffer_float&&(f.rgba32f=34836);var Z=[];c(f).forEach(function(a){Z[f[a]]=a});var w=0,D={};r.prototype.decRef=function(){0>=--this.refCount&&x(this)};g.profile&&(a.getTotalRenderbufferSize=function(){var a=0;c(D).forEach(function(b){a+=
D[b].stats.size});return a});return{create:function(b,x){function c(a,b){var k=0,r=0,q=32854;"object"===typeof a&&a?("shape"in a?(r=a.shape,ga(Array.isArray(r)&&2<=r.length,"invalid renderbuffer shape"),k=r[0]|0,r=r[1]|0):("radius"in a&&(k=r=a.radius|0),"width"in a&&(k=a.width|0),"height"in a&&(r=a.height|0)),"format"in a&&(ga.parameter(a.format,f,"invalid renderbuffer format"),q=f[a.format])):"number"===typeof a?(k=a|0,r="number"===typeof b?b|0:k):a?ga.raise("invalid arguments to renderbuffer constructor"):
k=r=1;ga(0<k&&0<r&&k<=p.maxRenderbufferSize&&r<=p.maxRenderbufferSize,"invalid renderbuffer size");if(k!==w.width||r!==w.height||q!==w.format)return c.width=w.width=k,c.height=w.height=r,w.format=q,e.bindRenderbuffer(36161,w.renderbuffer),e.renderbufferStorage(36161,q,k,r),ga(0===e.getError(),"invalid render buffer format"),g.profile&&(w.stats.size=I[w.format]*w.width*w.height),c.format=Z[w.format],c}var w=new r(e.createRenderbuffer());D[w.id]=w;a.renderbufferCount++;c(b,x);c.resize=function(a,b){var f=
a|0,r=b|0||f;if(f===w.width&&r===w.height)return c;ga(0<f&&0<r&&f<=p.maxRenderbufferSize&&r<=p.maxRenderbufferSize,"invalid renderbuffer size");c.width=w.width=f;c.height=w.height=r;e.bindRenderbuffer(36161,w.renderbuffer);e.renderbufferStorage(36161,w.format,f,r);ga(0===e.getError(),"invalid render buffer format");g.profile&&(w.stats.size=I[w.format]*w.width*w.height);return c};c._reglType="renderbuffer";c._renderbuffer=w;g.profile&&(c.stats=w.stats);c.destroy=function(){w.decRef()};return c},clear:function(){n(D).forEach(x)},
restore:function(){n(D).forEach(function(a){a.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,a.renderbuffer);e.renderbufferStorage(36161,a.format,a.width,a.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(u,B,Ja){var c=u("./util/sorted-object-keys"),ga=u("./util/check"),n=u("./util/extend"),I=u("./util/values");B.exports=function(e,b,p,a){function g(a,b,e,f){this.name=a;this.id=b;this.location=e;this.info=
f}function r(a,b){for(var e=0;e<a.length;++e)if(a[e].id===b.id){a[e].location=b.location;return}a.push(b)}function x(a,f,g){var k=35632===a?w:D,p=k[f];if(!p){var q=b.str(f),p=e.createShader(a);e.shaderSource(p,q);e.compileShader(p);ga.shaderError(e,p,q,a,g);k[f]=p}return p}function f(b,e){this.id=O++;this.fragId=b;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Z(f,p,w){var k;k=x(35632,f.fragId);
var c=x(35633,f.vertId),q=f.program=e.createProgram();e.attachShader(q,k);e.attachShader(q,c);if(w)for(k=0;k<w.length;++k)c=w[k],e.bindAttribLocation(q,c[0],c[1]);e.linkProgram(q);ga.linkError(e,q,b.str(f.fragId),b.str(f.vertId),p);w=e.getProgramParameter(q,35718);a.profile&&(f.stats.uniformsCount=w);c=f.uniforms;for(k=0;k<w;++k)if(p=e.getActiveUniform(q,k))if(1<p.size)for(var D=0;D<p.size;++D){var n=p.name.replace("[0]","["+D+"]");r(c,new g(n,b.id(n),e.getUniformLocation(q,n),p))}else r(c,new g(p.name,
b.id(p.name),e.getUniformLocation(q,p.name),p));w=e.getProgramParameter(q,35721);a.profile&&(f.stats.attributesCount=w);f=f.attributes;for(k=0;k<w;++k)(p=e.getActiveAttrib(q,k))&&r(f,new g(p.name,b.id(p.name),e.getAttribLocation(q,p.name),p))}var w={},D={},G={},C=[],O=0;a.profile&&(p.getMaxUniformsCount=function(){var a=0;C.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},p.getMaxAttributesCount=function(){var a=0;C.forEach(function(b){b.stats.attributesCount>a&&
(a=b.stats.attributesCount)});return a});return{clear:function(){var a=e.deleteShader.bind(e);I(w).forEach(a);w={};I(D).forEach(a);D={};C.forEach(function(a){e.deleteProgram(a.program)});C.length=0;G={};p.shaderCount=0},program:function(a,b,g,k){ga.command(0<=a,"missing vertex shader",g);ga.command(0<=b,"missing fragment shader",g);var r=G[b];r||(r=G[b]={});var q=r[a];if(q&&(q.refCount++,!k))return q;var x=new f(b,a);p.shaderCount++;Z(x,g,k);q||(r[a]=x);C.push(x);return n(x,{destroy:function(){x.refCount--;
if(0>=x.refCount){e.deleteProgram(x.program);var a=C.indexOf(x);C.splice(a,1);p.shaderCount--}0>=r[x.vertId].refCount&&(e.deleteShader(D[x.vertId]),delete D[x.vertId],delete G[x.fragId][x.vertId]);c(G[x.fragId]).length||(e.deleteShader(w[x.fragId]),delete w[x.fragId],delete G[x.fragId])}})},restore:function(){w={};D={};for(var a=0;a<C.length;++a)Z(C[a],null,C[a].attributes.map(function(a){return[a.location,a.name]}))},shader:x,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,
"./util/values":36}],17:[function(u,B,Ja){B.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(u,B,Ja){B.exports=function(){var c={"":0},ga=[""];return{id:function(n){var I=c[n];if(I)return I;I=c[n]=ga.length;ga.push(n);return I},str:function(c){return ga[c]}}}},{}],19:[function(u,B,Ja){function c(a){return"[object "+a+"]"}function ga(a){return Array.isArray(a)&&(0===
a.length||"number"===typeof a[0])}function n(a){return Array.isArray(a)&&0!==a.length&&G(a[0])?!0:!1}function I(a){return Object.prototype.toString.call(a)}function e(a){if(!a)return!1;var b=I(a);return 0<=la.indexOf(b)?!0:ga(a)||n(a)||Z(a)}function b(a,b){36193===a.type?(a.data=D(b),w.freeType(b)):a.data=b}function p(a,b,e,f,g,q){a="undefined"!==typeof ea[a]?ea[a]:k[a]*N[b];q&&(a*=6);if(g){for(f=0;1<=e;)f+=a*e*e,e/=2;return f}return a*e*f}var a=u("./util/sorted-object-keys"),g=u("./util/check"),
r=u("./util/extend"),x=u("./util/values"),f=u("./util/is-typed-array"),Z=u("./util/is-ndarray"),w=u("./util/pool"),D=u("./util/to-half-float"),G=u("./util/is-array-like"),C=u("./util/flatten"),O=u("./util/is-pow2");Ja=u("./constants/arraytypes.json");var Mc=u("./constants/arraytypes.json"),R=[9984,9986,9985,9987],mc=[0,6409,6410,6407,6408],k={};k[6409]=k[6406]=k[6402]=1;k[34041]=k[6410]=2;k[6407]=k[35904]=3;k[6408]=k[35906]=4;var z=c("HTMLCanvasElement"),q=c("OffscreenCanvas"),ca=c("CanvasRenderingContext2D"),
P=c("ImageBitmap"),S=c("HTMLImageElement"),t=c("HTMLVideoElement"),la=a(Ja).concat([z,q,ca,P,S,t]),N=[];N[5121]=1;N[5126]=4;N[36193]=2;N[5123]=2;N[5125]=4;var ea=[];ea[32854]=2;ea[32855]=2;ea[36194]=2;ea[34041]=4;ea[33776]=.5;ea[33777]=.5;ea[33778]=1;ea[33779]=1;ea[35986]=.5;ea[35987]=1;ea[34798]=1;ea[35840]=.5;ea[35841]=.25;ea[35842]=.5;ea[35843]=.25;ea[36196]=.5;B.exports=function(d,m,c,N,u,ea,la){function ua(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=
this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Oa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function X(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(g.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),
a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(g.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(g.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(g.parameter(b.colorSpace,zc,"invalid colorSpace"),a.colorSpace=zc[b.colorSpace]);if("type"in b){var d=b.type;g(m.oes_texture_float||!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");
g(m.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");g(m.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");g.parameter(d,W,"invalid texture type");a.type=W[d]}var e=a.width,f=a.height,q=a.channels,d=!1;"shape"in b?(g(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),
e=b.shape[0],f=b.shape[1],3===b.shape.length&&(q=b.shape[2],g(0<q&&4>=q,"invalid number of channels"),d=!0),g(0<=e&&e<=c.maxTextureSize,"invalid width"),g(0<=f&&f<=c.maxTextureSize,"invalid height")):("radius"in b&&(e=f=b.radius,g(0<=e&&e<=c.maxTextureSize,"invalid radius")),"width"in b&&(e=b.width,g(0<=e&&e<=c.maxTextureSize,"invalid width")),"height"in b&&(f=b.height,g(0<=f&&f<=c.maxTextureSize,"invalid height")),"channels"in b&&(q=b.channels,g(0<q&&4>=q,"invalid number of channels"),d=!0));a.width=
e|0;a.height=f|0;a.channels=q|0;e=!1;"format"in b&&(e=b.format,g(m.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),g.parameter(e,J,"invalid texture format"),f=a.internalformat=J[e],a.format=ta[f],e in W&&!("type"in b)&&(a.type=W[e]),e in ia&&(a.compressed=!0),e=!0);!d&&e?a.channels=k[a.format]:d&&!e?a.channels!==mc[a.format]&&(a.format=a.internalformat=mc[a.channels]):e&&d&&g(a.channels===k[a.format],
"number of channels inconsistent with specified format")}}function K(a){d.pixelStorei(37440,a.flipY);d.pixelStorei(37441,a.premultiplyAlpha);d.pixelStorei(37443,a.colorSpace);d.pixelStorei(3317,a.unpackAlignment)}function M(){ua.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Q(a,d){var m=null;e(d)?m=d:d&&(g.type(d,"object","invalid pixel data type"),X(a,d),"x"in d&&(a.xOffset=d.x|0),"y"in d&&(a.yOffset=d.y|0),e(d.data)&&(m=d.data));
g(!a.compressed||m instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(d.copy){g(!m,"can not specify copy and data field for the same texture");var l=u.viewportWidth,k=u.viewportHeight;a.width=a.width||l-a.xOffset;a.height=a.height||k-a.yOffset;a.needsCopy=!0;g(0<=a.xOffset&&a.xOffset<l&&0<=a.yOffset&&a.yOffset<k&&0<a.width&&a.width<=l&&0<a.height&&a.height<=k,"copy texture read out of bounds")}else if(!m)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||
4;else if(f(m))a.channels=a.channels||4,a.data=m,"type"in d||5121!==a.type||(a.type=Mc[Object.prototype.toString.call(m)]|0);else if(ga(m)){a.channels=a.channels||4;l=m;k=l.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:k=w.allocType(a.type,k);k.set(l);a.data=k;break;case 36193:a.data=D(l);break;default:g.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(Z(m)){l=m.data;Array.isArray(l)||5121!==a.type||(a.type=Mc[Object.prototype.toString.call(l)]|
0);var k=m.shape,p=m.stride,h,r,x,y;3===k.length?(x=k[2],y=p[2]):(g(2===k.length,"invalid ndarray pixel data, must be 2 or 3D"),y=x=1);h=k[0];r=k[1];k=p[0];p=p[1];a.alignment=1;a.width=h;a.height=r;a.channels=x;a.format=a.internalformat=mc[x];a.needsFree=!0;h=y;m=m.offset;x=a.width;y=a.height;r=a.channels;for(var v=w.allocType(36193===a.type?5126:a.type,x*y*r),A=0,J=0;J<y;++J)for(var F=0;F<x;++F)for(var aa=0;aa<r;++aa)v[A++]=l[k*F+p*J+h*aa+m];b(a,v)}else if(I(m)===z||I(m)===q||I(m)===ca)I(m)===z||
I(m)===q?a.element=m:a.element=m.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(I(m)===P)a.element=m,a.width=m.width,a.height=m.height,a.channels=4;else if(I(m)===S)a.element=m,a.width=m.naturalWidth,a.height=m.naturalHeight,a.channels=4;else if(I(m)===t)a.element=m,a.width=m.videoWidth,a.height=m.videoHeight,a.channels=4;else if(n(m)){l=a.width||m[0].length;k=a.height||m.length;p=a.channels;p=G(m[0][0])?p||m[0][0].length:p||1;h=C.shape(m);x=1;for(y=0;y<h.length;++y)x*=
h[y];x=w.allocType(36193===a.type?5126:a.type,x);C.flatten(m,h,"",x);b(a,x);a.alignment=1;a.width=l;a.height=k;a.channels=p;a.format=a.internalformat=mc[p];a.needsFree=!0}5126===a.type?g(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&g(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function oa(a,b,e,f,g){var m=a.element,h=a.data,q=a.internalformat,k=a.format,p=a.type,r=a.width,x=a.height;K(a);
m?d.texSubImage2D(b,g,e,f,k,p,m):a.compressed?d.compressedTexSubImage2D(b,g,e,f,q,r,x,h):a.needsCopy?(N(),d.copyTexSubImage2D(b,g,e,f,a.xOffset,a.yOffset,r,x)):d.texSubImage2D(b,g,e,f,r,x,k,p,h)}function L(){return V.pop()||new M}function B(a){a.needsFree&&w.freeType(a.data);M.call(a);V.push(a)}function $a(){ua.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function T(a,b,d){var e=a.images[0]=L();a.mipmask=1;e.width=a.width=b;e.height=a.height=d;e.channels=
a.channels=4}function v(a,b){var d=null;if(e(b))d=a.images[0]=L(),Oa(d,a),Q(d,b),a.mipmask=1;else if(X(a,b),Array.isArray(b.mipmap))for(var f=b.mipmap,m=0;m<f.length;++m)d=a.images[m]=L(),Oa(d,a),d.width>>=m,d.height>>=m,Q(d,f[m]),a.mipmask|=1<<m;else d=a.images[0]=L(),Oa(d,a),Q(d,b),a.mipmask=1;Oa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||g(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}
function ja(a,b){for(var e=a.images,f=0;f<e.length&&e[f];++f){var g=e[f],m=b,h=f,q=g.element,k=g.data,p=g.internalformat,r=g.format,x=g.type,t=g.width,y=g.height;K(g);q?d.texImage2D(m,h,r,r,x,q):g.compressed?d.compressedTexImage2D(m,h,p,t,y,0,k):g.needsCopy?(N(),d.copyTexImage2D(m,h,r,g.xOffset,g.yOffset,t,y,0)):d.texImage2D(m,h,r,t,y,0,r,x,k||null)}}function ba(){var a=fa.pop()||new $a;ua.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Ba(a){for(var b=a.images,d=0;d<b.length;++d)b[d]&&
B(b[d]),b[d]=null;fa.push(a)}function Ha(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function cc(a,b){if("min"in b){var d=b.min;g.parameter(d,vd);a.minFilter=vd[d];0<=R.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(d=b.mag,g.parameter(d,yc),a.magFilter=yc[d]);var d=a.wrapS,e=a.wrapT;if("wrap"in b){var f=b.wrap;"string"===typeof f?(g.parameter(f,pc),d=e=pc[f]):Array.isArray(f)&&(g.parameter(f[0],pc),
g.parameter(f[1],pc),d=pc[f[0]],e=pc[f[1]])}else"wrapS"in b&&(d=b.wrapS,g.parameter(d,pc),d=pc[d]),"wrapT"in b&&(e=b.wrapT,g.parameter(e,pc),e=pc[e]);a.wrapS=d;a.wrapT=e;"anisotropic"in b&&(d=b.anisotropic,g("number"===typeof d&&1<=d&&d<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":g.parameter(b.mipmap,Ib,"invalid mipmap hint");a.mipmapHint=Ib[b.mipmap];d=a.genMipmaps=!0;break;case "boolean":d=a.genMipmaps=
b.mipmap;break;case "object":g(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;d=!0;break;default:g.raise("invalid mipmap type")}!d||"min"in b||(a.minFilter=9984)}}function Ga(a,b){d.texParameteri(b,10241,a.minFilter);d.texParameteri(b,10240,a.magFilter);d.texParameteri(b,10242,a.wrapS);d.texParameteri(b,10243,a.wrapT);m.ext_texture_filter_anisotropic&&d.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(d.hint(33170,a.mipmapHint),d.generateMipmap(b))}function U(a){ua.call(this);this.mipmask=
0;this.internalformat=6408;this.id=na++;this.refCount=1;this.target=a;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ha;la.profile&&(this.stats={size:0})}function pb(a){d.activeTexture(33984);d.bindTexture(a.target,a.texture)}function da(){var a=aa[0];a?d.bindTexture(a.target,a.texture):d.bindTexture(3553,null)}function ra(a){var b=a.texture;g(b,"must not double destroy texture");var e=a.unit,f=a.target;0<=e&&(d.activeTexture(33984+e),d.bindTexture(f,null),aa[e]=null);
d.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete F[a.id];ea.textureCount--}var Ib={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,clamp:33071,mirror:33648},yc={nearest:9728,linear:9729},vd=r({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},yc),zc={none:0,browser:37444},W={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},J={alpha:6406,luminance:6409,"luminance alpha":6410,
rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ia={};m.ext_srgb&&(J.srgb=35904,J.srgba=35906);m.oes_texture_float&&(W.float32=W["float"]=5126);m.oes_texture_half_float&&(W.float16=W["half float"]=36193);m.webgl_depth_texture&&(r(J,{depth:6402,"depth stencil":34041}),r(W,{uint16:5123,uint32:5125,"depth stencil":34042}));m.webgl_compressed_texture_s3tc&&r(ia,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});m.webgl_compressed_texture_atc&&r(ia,
{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});m.webgl_compressed_texture_pvrtc&&r(ia,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});m.webgl_compressed_texture_etc1&&(ia["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(d.getParameter(34467));a(ia).forEach(function(a){var b=ia[a];0<=Ca.indexOf(b)&&(J[a]=b)});var wb=a(J);c.textureFormats=wb;var ab=[];a(J).forEach(function(a){ab[J[a]]=a});var Uc=[];
a(W).forEach(function(a){Uc[W[a]]=a});var H=[];a(yc).forEach(function(a){H[yc[a]]=a});var A=[];a(vd).forEach(function(a){A[vd[a]]=a});var ha=[];a(pc).forEach(function(a){ha[pc[a]]=a});var ta=wb.reduce(function(a,b){var d=J[b];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||m.ext_srgb&&(35904===d||35906===d)?a[d]=d:32855===d||0<=b.indexOf("rgba")?a[d]=6408:a[d]=6407;return a},{}),V=[],fa=[],na=0,F={},y=c.maxTextureUnits,aa=Array(y).map(function(){return null});r(U.prototype,{bind:function(){this.bindCount+=
1;var a=this.unit;if(0>a){for(var b=0;b<y;++b){var e=aa[b];if(e){if(0<e.bindCount)continue;e.unit=-1}aa[b]=this;a=b;break}a>=y&&g.raise("insufficient number of texture units");la.profile&&ea.maxTextureUnits<a+1&&(ea.maxTextureUnits=a+1);this.unit=a;d.activeTexture(33984+a);d.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ra(this)}});la.profile&&(ea.getTotalTextureSize=function(){var b=0;a(F).forEach(function(a){b+=F[a].stats.size});
return b});return{create2D:function(a,b){function e(a,b){var d=f.texInfo;Ha.call(d);var m=ba();"number"===typeof a?"number"===typeof b?T(m,a|0,b|0):T(m,a|0,a|0):a?(g.type(a,"object","invalid arguments to regl.texture"),cc(d,a),v(m,a)):T(m,1,1);d.genMipmaps&&(m.mipmask=(m.width<<1)-1);f.mipmask=m.mipmask;Oa(f,m);g.texture2D(d,m,c);f.internalformat=m.internalformat;e.width=m.width;e.height=m.height;pb(f);ja(m,3553);Ga(d,3553);da();Ba(m);la.profile&&(f.stats.size=p(f.internalformat,f.type,m.width,m.height,
d.genMipmaps,!1));e.format=ab[f.internalformat];e.type=Uc[f.type];e.mag=H[d.magFilter];e.min=A[d.minFilter];e.wrapS=ha[d.wrapS];e.wrapT=ha[d.wrapT];return e}var f=new U(3553);F[f.id]=f;ea.textureCount++;e(a,b);e.subimage=function(a,b,d,m){g(!!a,"must specify image data");b|=0;d|=0;m|=0;var q=L();Oa(q,f);q.width=0;q.height=0;Q(q,a);q.width=q.width||(f.width>>m)-b;q.height=q.height||(f.height>>m)-d;g(f.type===q.type&&f.format===q.format&&f.internalformat===q.internalformat,"incompatible format for texture.subimage");
g(0<=b&&0<=d&&b+q.width<=f.width&&d+q.height<=f.height,"texture.subimage write out of bounds");g(f.mipmask&1<<m,"missing mipmap data");g(q.data||q.element||q.needsCopy,"missing image data");pb(f);oa(q,3553,b,d,m);da();B(q);return e};e.resize=function(a,b){var g=a|0,m=b|0||g;if(g===f.width&&m===f.height)return e;e.width=f.width=g;e.height=f.height=m;pb(f);for(var q=0;f.mipmask>>q;++q){var k=g>>q,r=m>>q;if(!k||!r)break;d.texImage2D(3553,q,f.format,k,r,0,f.format,f.type,null)}da();la.profile&&(f.stats.size=
p(f.internalformat,f.type,g,m,!1,!1));return e};e._reglType="texture2d";e._texture=f;la.profile&&(e.stats=f.stats);e.destroy=function(){f.decRef()};return e},createCube:function(a,b,e,f,m,q){function k(a,b,d,e,f,l){var m,q=r.texInfo;Ha.call(q);for(m=0;6>m;++m)x[m]=ba();if("number"!==typeof a&&a)if("object"===typeof a)if(b)v(x[0],a),v(x[1],b),v(x[2],d),v(x[3],e),v(x[4],f),v(x[5],l);else if(cc(q,a),X(r,a),"faces"in a)for(a=a.faces,g(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),
m=0;6>m;++m)g("object"===typeof a[m]&&!!a[m],"invalid input for cube map face"),Oa(x[m],r),v(x[m],a[m]);else for(m=0;6>m;++m)v(x[m],a);else g.raise("invalid arguments to cube map");else for(a=a|0||1,m=0;6>m;++m)T(x[m],a,a);Oa(r,x[0]);g.optional(function(){c.npotTextureCube||g(O(r.width)&&O(r.height),"your browser does not support non power or two texture dimensions")});r.mipmask=q.genMipmaps?(x[0].width<<1)-1:x[0].mipmask;g.textureCube(r,q,x,c);r.internalformat=x[0].internalformat;k.width=x[0].width;
k.height=x[0].height;pb(r);for(m=0;6>m;++m)ja(x[m],34069+m);Ga(q,34067);da();la.profile&&(r.stats.size=p(r.internalformat,r.type,k.width,k.height,q.genMipmaps,!0));k.format=ab[r.internalformat];k.type=Uc[r.type];k.mag=H[q.magFilter];k.min=A[q.minFilter];k.wrapS=ha[q.wrapS];k.wrapT=ha[q.wrapT];for(m=0;6>m;++m)Ba(x[m]);return k}var r=new U(34067);F[r.id]=r;ea.cubeCount++;var x=Array(6);k(a,b,e,f,m,q);k.subimage=function(a,b,d,e,f){g(!!b,"must specify image data");g("number"===typeof a&&a===(a|0)&&0<=
a&&6>a,"invalid face");d|=0;e|=0;f|=0;var m=L();Oa(m,r);m.width=0;m.height=0;Q(m,b);m.width=m.width||(r.width>>f)-d;m.height=m.height||(r.height>>f)-e;g(r.type===m.type&&r.format===m.format&&r.internalformat===m.internalformat,"incompatible format for texture.subimage");g(0<=d&&0<=e&&d+m.width<=r.width&&e+m.height<=r.height,"texture.subimage write out of bounds");g(r.mipmask&1<<f,"missing mipmap data");g(m.data||m.element||m.needsCopy,"missing image data");pb(r);oa(m,34069+a,d,e,f);da();B(m);return k};
k.resize=function(a){a|=0;if(a!==r.width){k.width=r.width=a;k.height=r.height=a;pb(r);for(var b=0;6>b;++b)for(var e=0;r.mipmask>>e;++e)d.texImage2D(34069+b,e,r.format,a>>e,a>>e,0,r.format,r.type,null);da();la.profile&&(r.stats.size=p(r.internalformat,r.type,k.width,k.height,!1,!0));return k}};k._reglType="textureCube";k._texture=r;la.profile&&(k.stats=r.stats);k.destroy=function(){r.decRef()};return k},clear:function(){for(var a=0;a<y;++a)d.activeTexture(33984+a),d.bindTexture(3553,null),aa[a]=null;
x(F).forEach(ra);ea.cubeCount=0;ea.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<y;++a){var b=aa[a];b&&(b.bindCount=0,b.unit=-1,aa[a]=null)}x(F).forEach(function(a){a.texture=d.createTexture();d.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)d.texImage2D(3553,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);else for(var e=0;6>e;++e)d.texImage2D(34069+e,b,a.internalformat,a.width>>b,a.height>>
b,0,a.internalformat,a.type,null);Ga(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<y;++a){var b=aa[a];b&&(b.bindCount=0,b.unit=-1,aa[a]=null);d.activeTexture(33984+a);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],
20:[function(u,B,Ja){B.exports=function(c,ga){function n(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function I(b,e,g){var r=p.pop()||new n;r.startQueryIndex=b;r.endQueryIndex=e;r.sum=0;r.stats=g;a.push(r)}if(!ga.ext_disjoint_timer_query)return null;var e=[],b=[],p=[],a=[],g=[],r=[];return{beginQuery:function(a){var f=e.pop()||ga.ext_disjoint_timer_query.createQueryEXT();ga.ext_disjoint_timer_query.beginQueryEXT(35007,f);b.push(f);I(b.length-1,b.length,a)},endQuery:function(){ga.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:I,update:function(){var x,f;x=b.length;if(0!==x){r.length=Math.max(r.length,x+1);g.length=Math.max(g.length,x+1);g[0]=0;var c=r[0]=0;for(f=x=0;f<b.length;++f){var w=b[f];ga.ext_disjoint_timer_query.getQueryObjectEXT(w,34919)?(c+=ga.ext_disjoint_timer_query.getQueryObjectEXT(w,34918),e.push(w)):b[x++]=w;g[f+1]=c;r[f+1]=x}b.length=x;for(f=x=0;f<a.length;++f){var c=a[f],D=c.startQueryIndex,w=c.endQueryIndex;c.sum+=g[w]-g[D];D=r[D];w=r[w];w===D?(c.stats.gpuTime+=c.sum/1E6,p.push(c)):(c.startQueryIndex=
D,c.endQueryIndex=w,a[x++]=c)}a.length=x}},getNumPendingQueries:function(){return b.length},clear:function(){e.push.apply(e,b);for(var a=0;a<e.length;a++)ga.ext_disjoint_timer_query.deleteQueryEXT(e[a]);b.length=0;e.length=0},restore:function(){b.length=0;e.length=0}}}},{}],21:[function(u,B,Ja){function c(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function ga(a){a=Error("(regl) "+a);console.error(a);throw a;}function n(a,b){a||ga(b)}function I(a){return a?": "+a:""}function e(a,b){switch(b){case "number":return"number"===
typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function b(a,b,e){0>b.indexOf(a)&&ga("invalid value"+I(e)+". must be one of: "+b)}function p(a,b){for(a+="";a.length<b;)a=" "+a;return a}function a(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function g(a,b){this.number=
a;this.line=b;this.errors=[]}function r(a,b,e){this.file=a;this.line=b;this.message=e}function x(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function f(){var a=Error(),a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function Z(b,e){var f=b.split("\n"),k=1,r=0,p={unknown:new a,
0:new a};p.unknown.name=p[0].name=e||x();p.unknown.lines.push(new g(0,""));for(var w=0;w<f.length;++w){var z=f[w],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(z);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))k=d[1]|0,d[2]&&(r=d[2]|0,r in p||(p[r]=new a));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))p[r].name=d[1]?c(d[2]):d[2]}p[r].lines.push(new g(k++,z))}R(p).forEach(function(a){var b=p[a];b.lines.forEach(function(a){b.index[a.number]=a})});return p}function w(a){var b=
[];a.split("\n").forEach(function(a){if(!(5>a.length)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);e?b.push(new r(e[1]|0,e[2]|0,e[3].trim())):0<a.length&&b.push(new r("unknown",0,a))}});return b}function D(a,b){b.forEach(function(b){var e=a[b.file];if(e){var f=e.index[b.line];if(f){f.errors.push(b);e.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(b)})}function G(a){a._commandRef=x()}function C(a,b){var e=f();ga(a+" in command "+(b||x())+("unknown"===e?"":" called from "+
e))}function O(a,b,f,g){e(a,b)||C("invalid parameter type"+I(f)+". expected "+b+", got "+typeof a,g||x())}function Mc(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:z[a]*b}var R=u("./sorted-object-keys"),mc=u("./is-typed-array");u=u("./extend");var k="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),z={};z[5120]=z[5121]=1;z[5122]=z[5123]=z[36193]=z[33635]=z[32819]=z[32820]=2;z[5124]=z[5125]=z[5126]=z[34042]=4;B.exports=u(n,{optional:function(a){a()},
raise:ga,commandRaise:C,command:function(a,b,e){a||C(b,e||x())},parameter:function(a,b,e){a in b||ga("unknown parameter ("+a+")"+I(e)+". possible values: "+R(b).join())},commandParameter:function(a,b,e,f){a in b||C("unknown parameter ("+a+")"+I(e)+". possible values: "+R(b).join(),f||x())},constructor:function(a){R(a).forEach(function(a){0>k.indexOf(a)&&ga('invalid regl constructor argument "'+a+'". must be one of '+k)})},type:function(a,b,f){e(a,b)||ga("invalid parameter type"+I(f)+". expected "+
b+", got "+typeof a)},commandType:O,isTypedArray:function(a,b){mc(a)||ga("invalid parameter type"+I(b)+". must be a typed array")},nni:function(a,b){0<=a&&(a|0)===a||ga("invalid parameter type, ("+a+")"+I(b)+". must be a nonnegative integer")},oneOf:b,shaderError:function(a,b,e,f,g){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=f===a.FRAGMENT_SHADER?"fragment":"vertex";O(e,"string",a+" shader source must be a string",g);var k=Z(e,g);e=w(b);D(k,e);R(k).forEach(function(a){function b(a,
d){e.push(a);f.push(d||"")}var d=k[a];if(d.hasErrors){var e=[""],f=[""];b("file number "+a+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(a){if(0<a.errors.length){b(p(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var d=0;a.errors.forEach(function(e){e=e.message;var f=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);if(f){var m=f[1];e=f[2];switch(m){case "assign":m="="}d=Math.max(a.line.indexOf(m,
d),0)}else d=0;b(p("| ",6));b(p("^^^",d+3)+"\n","font-weight:bold");b(p("| ",6));b(e+"\n","font-weight:bold")});b(p("| ",6)+"\n")}else b(p(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(e.join("")):(f[0]=e.join("%c"),console.log.apply(console,f))}});n.raise("Error compiling "+a+" shader, "+k[0].name)}},linkError:function(a,b,e,f,g){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),e=Z(e,g),f='Error linking program with vertex shader, "'+
Z(f,g)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+a),n.raise(f))},callSite:f,saveCommandRef:G,saveDrawInfo:function(a,b,e,f){function g(a){return a?f.id(a):0}function k(a,b){R(b).forEach(function(b){a[f.id(b)]=!0})}G(a);a._fragId=g(a["static"].frag);a._vertId=g(a["static"].vert);var r=a._uniformSet={};k(r,b["static"]);k(r,b.dynamic);b=a._attributeSet=
{};k(b,e["static"]);k(b,e.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,e,f){a.texture?b(a.texture._texture.internalformat,e,"unsupported texture format for attachment"):b(a.renderbuffer._renderbuffer.format,f,"unsupported renderbuffer format for attachment")},guessCommand:x,texture2D:function(a,b,e){var f=b.width,g=b.height,k=b.channels;n(0<f&&f<=e.maxTextureSize&&0<g&&g<=e.maxTextureSize,"invalid texture shape");
33071===a.wrapS&&33071===a.wrapT||n(!(f&f-1)&&!!f&&!(g&g-1)&&!!g,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==f&&1!==g&&n(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(n(!(f&f-1)&&!!f&&!(g&g-1)&&!!g,"texture must be a square power of 2 to support mipmapping"),n(b.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&
n(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),n(!a.genMipmaps,"mipmap generation not supported with float textures"));var r=b.images;for(e=0;16>e;++e)if(r[e]){var p=f>>e,d=g>>e;n(b.mipmask&1<<e,"missing mipmap data");var m=r[e];n(m.width===p&&m.height===d,"invalid shape for mip images");n(m.format===b.format&&m.internalformat===b.internalformat&&m.type===b.type,"incompatible type for mip image");!m.compressed&&m.data&&(p=Math.ceil(Mc(m.type,
k)*p/m.unpackAlignment)*m.unpackAlignment,n(m.data.byteLength===p*d,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||n(0===(b.mipmask&1<<e),"extra mipmap data");b.compressed&&n(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,e,f){var g=a.width,k=a.height,r=a.channels;n(0<g&&g<=f.maxTextureSize&&0<k&&k<=f.maxTextureSize,"invalid texture shape");n(g===k,"cube map must be square");n(33071===b.wrapS&&33071===
b.wrapT,"wrap mode not supported by cube map");for(f=0;f<e.length;++f){var p=e[f];n(p.width===g&&p.height===k,"inconsistent cube map face shape");b.genMipmaps&&(n(!p.compressed,"can not generate mipmap for compressed textures"),n(1===p.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=p.images,m=0;16>m;++m){var x=d[m];if(x){var c=g>>m,w=k>>m;n(p.mipmask&1<<m,"missing mipmap data");n(x.width===c&&x.height===w,"invalid shape for mip images");n(x.format===a.format&&x.internalformat===
a.internalformat&&x.type===a.type,"incompatible type for mip image");x.compressed||x.data&&n(x.data.byteLength===c*w*Math.max(Mc(x.type,r),x.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(u,B,Ja){B.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(u,B,Ja){function c(c){return Array.prototype.slice.call(c)}
var ga=u("./extend"),n=u("./compiled-fns");B.exports=function(){function I(){var a=[],b=[];return ga(function(){a.push.apply(a,c(arguments))},{def:function(){var e="v"+p;p++;b.push(e);0<arguments.length&&(a.push(e,"="),a.push.apply(a,c(arguments)),a.push(";"));return e},toString:function(){return c([0<b.length?"var "+b.join(",")+";":"",c(a).join("")]).join("")}})}function e(){function a(g,p){e(g,p,"=",b.def(g,p),";")}var b=I(),e=I(),g=b.toString,p=e.toString;return ga(function(){b.apply(b,c(arguments))},
{def:b.def,entry:b,exit:e,save:a,set:function(e,f,g){a(e,f);b(e,f,"=",g,";")},toString:function(){return g()+p()}})}var b=0,p=0,a={},g={};return{global:I(),link:function(e){var g="$"+b,f=!1;"object"===typeof e&&e.name&&(g=e.name.replace(/ /g,"_"),f=!0);if(g in a)return g;a[g]=e;f||b++;return g},block:I,proc:function(a,b){function f(){var a="a"+p.length;p.push(a);return a}var p=[];b=b||0;for(var w=0;w<b;++w)f();var w=e(),D=w.toString;return g[a]=ga(w,{arg:f,toString:function(){return c(["function(",
p.join(),"){",D(),"}"]).join("")}})},scope:e,cond:function(){var a=c(arguments).join(""),b=e(),f=e(),g=b.toString,p=f.toString;return ga(b,{then:function(){b.apply(b,c(arguments));return this},"else":function(){f.apply(f,c(arguments));return this},toString:function(){var b=p();b&&(b="else{"+b+"}");return c(["if(",a,"){",g(),"}",b]).join("")}})},compile:function(){var b=[],e=[];Object.keys(a).sort(function(a,b){var e="$"===a.charAt(0),f="$"===b.charAt(0);return e||f?e&&f?+a.slice(1)<+b.slice(1)?-1:
1:e&&!f?-1:1:a.localeCompare(b)}).forEach(function(f){var g=a[f];b.push(f);e.push(g)});for(var f=0,g=b.length-1;-1<g;g--)if("$"===b[g].charAt(0)){f=g;break}f=b.slice(f).join();g=n[f];if(!g)throw Error("missing precompiled function with key: "+f);return g.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(u,B,Ja){B.exports={$0:function(c){var ga,n,I,e,b,p,a,g,r,x,f,Z,w,D,G,C,O,u,R,B,k,z,q,ca,P,S,t,la,N,ea;ga=c.attributes;n=c.current;I=c.framebuffer;e=c.gl;b=c.next;p=c.vao;a=b.blend_color;
g=n.blend_color;r=b.blend_equation;x=n.blend_equation;f=b.blend_func;Z=n.blend_func;w=b.colorMask;D=n.colorMask;G=b.depth_range;C=n.depth_range;O=b.polygonOffset_offset;u=n.polygonOffset_offset;R=b.sample_coverage;B=n.sample_coverage;k=b.scissor_box;z=n.scissor_box;q=b.stencil_func;ca=n.stencil_func;P=b.stencil_opBack;S=n.stencil_opBack;t=b.stencil_opFront;la=n.stencil_opFront;N=b.viewport;ea=n.viewport;return{poll:function(){var d,m,p,c,ga,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba;n.dirty=!1;m=
b.blend_enable;p=b.cull_enable;c=b.depth_enable;ga=b.dither;vb=b.polygonOffset_enable;Zb=b.sample_alpha;ua=b.sample_enable;Oa=b.scissor_enable;X=b.stencil_enable;K=b.cull_face;M=n.cull_face;Q=b.depth_func;oa=n.depth_func;L=b.depth_mask;ac=n.depth_mask;$a=b.frontFace;T=n.frontFace;v=b.lineWidth;ja=n.lineWidth;ba=b.stencil_mask;Ba=n.stencil_mask;d=I.next;d!==I.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null),I.cur=d);m!==n.blend_enable&&(m?e.enable(3042):e.disable(3042),
n.blend_enable=m);p!==n.cull_enable&&(p?e.enable(2884):e.disable(2884),n.cull_enable=p);c!==n.depth_enable&&(c?e.enable(2929):e.disable(2929),n.depth_enable=c);ga!==n.dither&&(ga?e.enable(3024):e.disable(3024),n.dither=ga);vb!==n.polygonOffset_enable&&(vb?e.enable(32823):e.disable(32823),n.polygonOffset_enable=vb);Zb!==n.sample_alpha&&(Zb?e.enable(32926):e.disable(32926),n.sample_alpha=Zb);ua!==n.sample_enable&&(ua?e.enable(32928):e.disable(32928),n.sample_enable=ua);Oa!==n.scissor_enable&&(Oa?e.enable(3089):
e.disable(3089),n.scissor_enable=Oa);X!==n.stencil_enable&&(X?e.enable(2960):e.disable(2960),n.stencil_enable=X);if(a[0]!==g[0]||a[1]!==g[1]||a[2]!==g[2]||a[3]!==g[3])e.blendColor(a[0],a[1],a[2],a[3]),g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=a[3];if(r[0]!==x[0]||r[1]!==x[1])e.blendEquationSeparate(r[0],r[1]),x[0]=r[0],x[1]=r[1];if(f[0]!==Z[0]||f[1]!==Z[1]||f[2]!==Z[2]||f[3]!==Z[3])e.blendFuncSeparate(f[0],f[1],f[2],f[3]),Z[0]=f[0],Z[1]=f[1],Z[2]=f[2],Z[3]=f[3];if(w[0]!==D[0]||w[1]!==D[1]||w[2]!==D[2]||
w[3]!==D[3])e.colorMask(w[0],w[1],w[2],w[3]),D[0]=w[0],D[1]=w[1],D[2]=w[2],D[3]=w[3];K!==M&&(e.cullFace(K),n.cull_face=K);Q!==oa&&(e.depthFunc(Q),n.depth_func=Q);L!==ac&&(e.depthMask(L),n.depth_mask=L);if(G[0]!==C[0]||G[1]!==C[1])e.depthRange(G[0],G[1]),C[0]=G[0],C[1]=G[1];$a!==T&&(e.frontFace($a),n.frontFace=$a);v!==ja&&(e.lineWidth(v),n.lineWidth=v);if(O[0]!==u[0]||O[1]!==u[1])e.polygonOffset(O[0],O[1]),u[0]=O[0],u[1]=O[1];if(R[0]!==B[0]||R[1]!==B[1])e.sampleCoverage(R[0],R[1]),B[0]=R[0],B[1]=R[1];
if(k[0]!==z[0]||k[1]!==z[1]||k[2]!==z[2]||k[3]!==z[3])e.scissor(k[0],k[1],k[2],k[3]),z[0]=k[0],z[1]=k[1],z[2]=k[2],z[3]=k[3];if(q[0]!==ca[0]||q[1]!==ca[1]||q[2]!==ca[2])e.stencilFunc(q[0],q[1],q[2]),ca[0]=q[0],ca[1]=q[1],ca[2]=q[2];ba!==Ba&&(e.stencilMask(ba),n.stencil_mask=ba);if(P[0]!==S[0]||P[1]!==S[1]||P[2]!==S[2]||P[3]!==S[3])e.stencilOpSeparate(P[0],P[1],P[2],P[3]),S[0]=P[0],S[1]=P[1],S[2]=P[2],S[3]=P[3];if(t[0]!==la[0]||t[1]!==la[1]||t[2]!==la[2]||t[3]!==la[3])e.stencilOpSeparate(t[0],t[1],
t[2],t[3]),la[0]=t[0],la[1]=t[1],la[2]=t[2],la[3]=t[3];if(N[0]!==ea[0]||N[1]!==ea[1]||N[2]!==ea[2]||N[3]!==ea[3])e.viewport(N[0],N[1],N[2],N[3]),ea[0]=N[0],ea[1]=N[1],ea[2]=N[2],ea[3]=N[3]},refresh:function(){var d,m,c,sa,Ka,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac;n.dirty=!1;m=b.blend_enable;c=b.cull_enable;sa=b.depth_enable;Ka=b.dither;vb=b.polygonOffset_enable;Zb=b.sample_alpha;ua=b.sample_enable;Oa=b.scissor_enable;X=b.stencil_enable;K=b.cull_face;M=b.depth_func;Q=b.depth_mask;oa=b.frontFace;L=b.lineWidth;
ac=b.stencil_mask;(d=I.next)?e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null);I.cur=d;d=ga[0];d.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[1];d.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(1),
e.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[2];d.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[3];d.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,d.x,d.y,d.z,
d.w),d.buffer=null);d=ga[4];d.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[5];d.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[6];d.buffer?
(e.enableVertexAttribArray(6),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[7];d.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[8];d.buffer?(e.enableVertexAttribArray(8),
e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[9];d.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[10];d.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,d.buffer.buffer),
e.vertexAttribPointer(10,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[11];d.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[12];d.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(12,
d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[13];d.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[14];d.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(14,d.size,d.type,d.normalized,
d.stride,d.offset)):(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=ga[15];d.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);p.currentVAO=null;p.setVAO(p.targetVAO);m?e.enable(3042):e.disable(3042);n.blend_enable=m;c?e.enable(2884):e.disable(2884);n.cull_enable=c;sa?e.enable(2929):
e.disable(2929);n.depth_enable=sa;Ka?e.enable(3024):e.disable(3024);n.dither=Ka;vb?e.enable(32823):e.disable(32823);n.polygonOffset_enable=vb;Zb?e.enable(32926):e.disable(32926);n.sample_alpha=Zb;ua?e.enable(32928):e.disable(32928);n.sample_enable=ua;Oa?e.enable(3089):e.disable(3089);n.scissor_enable=Oa;X?e.enable(2960):e.disable(2960);n.stencil_enable=X;e.blendColor(a[0],a[1],a[2],a[3]);g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=a[3];e.blendEquationSeparate(r[0],r[1]);x[0]=r[0];x[1]=r[1];e.blendFuncSeparate(f[0],
f[1],f[2],f[3]);Z[0]=f[0];Z[1]=f[1];Z[2]=f[2];Z[3]=f[3];e.colorMask(w[0],w[1],w[2],w[3]);D[0]=w[0];D[1]=w[1];D[2]=w[2];D[3]=w[3];e.cullFace(K);n.cull_face=K;e.depthFunc(M);n.depth_func=M;e.depthMask(Q);n.depth_mask=Q;e.depthRange(G[0],G[1]);C[0]=G[0];C[1]=G[1];e.frontFace(oa);n.frontFace=oa;e.lineWidth(L);n.lineWidth=L;e.polygonOffset(O[0],O[1]);u[0]=O[0];u[1]=O[1];e.sampleCoverage(R[0],R[1]);B[0]=R[0];B[1]=R[1];e.scissor(k[0],k[1],k[2],k[3]);z[0]=k[0];z[1]=k[1];z[2]=k[2];z[3]=k[3];e.stencilFunc(q[0],
q[1],q[2]);ca[0]=q[0];ca[1]=q[1];ca[2]=q[2];e.stencilMask(ac);n.stencil_mask=ac;e.stencilOpSeparate(P[0],P[1],P[2],P[3]);S[0]=P[0];S[1]=P[1];S[2]=P[2];S[3]=P[3];e.stencilOpSeparate(t[0],t[1],t[2],t[3]);la[0]=t[0];la[1]=t[1];la[2]=t[2];la[3]=t[3];e.viewport(N[0],N[1],N[2],N[3]);ea[0]=N[0];ea[1]=N[1];ea[2]=N[2];ea[3]=N[3]}}},$3:function(c,ga,n,I){var e,b,p,a,g,r,x,f,Z,w,D,G,C,O,u,R,B,k,z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb;e=c.context;b=c.current;p=c.framebuffer;a=c.gl;g=c.next;r=c.shader;x=c.vao;f=g.blend_color;
Z=b.blend_color;w=g.blend_equation;D=b.blend_equation;G=g.blend_func;C=b.blend_func;O=g.colorMask;u=b.colorMask;R=g.depth_range;B=b.depth_range;k=g.polygonOffset_offset;z=b.polygonOffset_offset;q=g.sample_coverage;ca=b.sample_coverage;P=g.scissor_box;S=b.scissor_box;t=g.stencil_func;la=b.stencil_func;N=g.stencil_opBack;ea=b.stencil_opBack;d=g.stencil_opFront;m=b.stencil_opFront;Y=g.viewport;sa=b.viewport;Ka={};vb={};return{batch:function(e,c){var n,X,K,M,Q;n=p.next;n!==p.cur&&(n?a.bindFramebuffer(36160,
n.framebuffer):a.bindFramebuffer(36160,null),p.cur=n);if(b.dirty){n=g.dither;n!==b.dither&&(n?a.enable(3024):a.disable(3024),b.dither=n);n=g.blend_enable;n!==b.blend_enable&&(n?a.enable(3042):a.disable(3042),b.blend_enable=n);n=f[0];K=f[1];M=f[2];Q=f[3];if(n!==Z[0]||K!==Z[1]||M!==Z[2]||Q!==Z[3])a.blendColor(n,K,M,Q),Z[0]=n,Z[1]=K,Z[2]=M,Z[3]=Q;n=w[0];K=w[1];if(n!==D[0]||K!==D[1])a.blendEquationSeparate(n,K),D[0]=n,D[1]=K;n=G[0];K=G[1];M=G[2];Q=G[3];if(n!==C[0]||K!==C[1]||M!==C[2]||Q!==C[3])a.blendFuncSeparate(n,
K,M,Q),C[0]=n,C[1]=K,C[2]=M,C[3]=Q;n=g.depth_enable;n!==b.depth_enable&&(n?a.enable(2929):a.disable(2929),b.depth_enable=n);n=g.depth_func;n!==b.depth_func&&(a.depthFunc(n),b.depth_func=n);n=R[0];K=R[1];if(n!==B[0]||K!==B[1])a.depthRange(n,K),B[0]=n,B[1]=K;n=g.depth_mask;n!==b.depth_mask&&(a.depthMask(n),b.depth_mask=n);n=O[0];K=O[1];M=O[2];Q=O[3];if(n!==u[0]||K!==u[1]||M!==u[2]||Q!==u[3])a.colorMask(n,K,M,Q),u[0]=n,u[1]=K,u[2]=M,u[3]=Q;n=g.cull_enable;n!==b.cull_enable&&(n?a.enable(2884):a.disable(2884),
b.cull_enable=n);n=g.cull_face;n!==b.cull_face&&(a.cullFace(n),b.cull_face=n);n=g.frontFace;n!==b.frontFace&&(a.frontFace(n),b.frontFace=n);n=g.lineWidth;n!==b.lineWidth&&(a.lineWidth(n),b.lineWidth=n);n=g.polygonOffset_enable;n!==b.polygonOffset_enable&&(n?a.enable(32823):a.disable(32823),b.polygonOffset_enable=n);n=k[0];K=k[1];if(n!==z[0]||K!==z[1])a.polygonOffset(n,K),z[0]=n,z[1]=K;n=g.sample_alpha;n!==b.sample_alpha&&(n?a.enable(32926):a.disable(32926),b.sample_alpha=n);n=g.sample_enable;n!==
b.sample_enable&&(n?a.enable(32928):a.disable(32928),b.sample_enable=n);n=q[0];K=q[1];if(n!==ca[0]||K!==ca[1])a.sampleCoverage(n,K),ca[0]=n,ca[1]=K;n=g.stencil_enable;n!==b.stencil_enable&&(n?a.enable(2960):a.disable(2960),b.stencil_enable=n);n=g.stencil_mask;n!==b.stencil_mask&&(a.stencilMask(n),b.stencil_mask=n);n=t[0];K=t[1];M=t[2];if(n!==la[0]||K!==la[1]||M!==la[2])a.stencilFunc(n,K,M),la[0]=n,la[1]=K,la[2]=M;n=d[0];K=d[1];M=d[2];Q=d[3];if(n!==m[0]||K!==m[1]||M!==m[2]||Q!==m[3])a.stencilOpSeparate(n,
K,M,Q),m[0]=n,m[1]=K,m[2]=M,m[3]=Q;n=N[0];K=N[1];M=N[2];Q=N[3];if(n!==ea[0]||K!==ea[1]||M!==ea[2]||Q!==ea[3])a.stencilOpSeparate(n,K,M,Q),ea[0]=n,ea[1]=K,ea[2]=M,ea[3]=Q;n=g.scissor_enable;n!==b.scissor_enable&&(n?a.enable(3089):a.disable(3089),b.scissor_enable=n);n=P[0];K=P[1];M=P[2];Q=P[3];if(n!==S[0]||K!==S[1]||M!==S[2]||Q!==S[3])a.scissor(n,K,M,Q),S[0]=n,S[1]=K,S[2]=M,S[3]=Q;n=Y[0];K=Y[1];M=Y[2];Q=Y[3];if(n!==sa[0]||K!==sa[1]||M!==sa[2]||Q!==sa[3])a.viewport(n,K,M,Q),sa[0]=n,sa[1]=K,sa[2]=M,sa[3]=
Q;b.dirty=!1}if(n=b.profile)X=performance.now(),ga.count+=c;K=r.program(r.vert,r.frag);a.useProgram(K.program);x.setVAO(null);M=K.id;(Q=vb[M])||(Q=vb[M]=I(K));Q.call(this,e,c);x.setVAO(null);n&&(ga.cpuTime+=performance.now()-X)},draw:function(e){var c,I,X,K,M;c=p.next;c!==p.cur&&(c?a.bindFramebuffer(36160,c.framebuffer):a.bindFramebuffer(36160,null),p.cur=c);if(b.dirty){c=g.dither;c!==b.dither&&(c?a.enable(3024):a.disable(3024),b.dither=c);c=g.blend_enable;c!==b.blend_enable&&(c?a.enable(3042):a.disable(3042),
b.blend_enable=c);c=f[0];X=f[1];K=f[2];M=f[3];if(c!==Z[0]||X!==Z[1]||K!==Z[2]||M!==Z[3])a.blendColor(c,X,K,M),Z[0]=c,Z[1]=X,Z[2]=K,Z[3]=M;c=w[0];X=w[1];if(c!==D[0]||X!==D[1])a.blendEquationSeparate(c,X),D[0]=c,D[1]=X;c=G[0];X=G[1];K=G[2];M=G[3];if(c!==C[0]||X!==C[1]||K!==C[2]||M!==C[3])a.blendFuncSeparate(c,X,K,M),C[0]=c,C[1]=X,C[2]=K,C[3]=M;c=g.depth_enable;c!==b.depth_enable&&(c?a.enable(2929):a.disable(2929),b.depth_enable=c);c=g.depth_func;c!==b.depth_func&&(a.depthFunc(c),b.depth_func=c);c=R[0];
X=R[1];if(c!==B[0]||X!==B[1])a.depthRange(c,X),B[0]=c,B[1]=X;c=g.depth_mask;c!==b.depth_mask&&(a.depthMask(c),b.depth_mask=c);c=O[0];X=O[1];K=O[2];M=O[3];if(c!==u[0]||X!==u[1]||K!==u[2]||M!==u[3])a.colorMask(c,X,K,M),u[0]=c,u[1]=X,u[2]=K,u[3]=M;c=g.cull_enable;c!==b.cull_enable&&(c?a.enable(2884):a.disable(2884),b.cull_enable=c);c=g.cull_face;c!==b.cull_face&&(a.cullFace(c),b.cull_face=c);c=g.frontFace;c!==b.frontFace&&(a.frontFace(c),b.frontFace=c);c=g.lineWidth;c!==b.lineWidth&&(a.lineWidth(c),
b.lineWidth=c);c=g.polygonOffset_enable;c!==b.polygonOffset_enable&&(c?a.enable(32823):a.disable(32823),b.polygonOffset_enable=c);c=k[0];X=k[1];if(c!==z[0]||X!==z[1])a.polygonOffset(c,X),z[0]=c,z[1]=X;c=g.sample_alpha;c!==b.sample_alpha&&(c?a.enable(32926):a.disable(32926),b.sample_alpha=c);c=g.sample_enable;c!==b.sample_enable&&(c?a.enable(32928):a.disable(32928),b.sample_enable=c);c=q[0];X=q[1];if(c!==ca[0]||X!==ca[1])a.sampleCoverage(c,X),ca[0]=c,ca[1]=X;c=g.stencil_enable;c!==b.stencil_enable&&
(c?a.enable(2960):a.disable(2960),b.stencil_enable=c);c=g.stencil_mask;c!==b.stencil_mask&&(a.stencilMask(c),b.stencil_mask=c);c=t[0];X=t[1];K=t[2];if(c!==la[0]||X!==la[1]||K!==la[2])a.stencilFunc(c,X,K),la[0]=c,la[1]=X,la[2]=K;c=d[0];X=d[1];K=d[2];M=d[3];if(c!==m[0]||X!==m[1]||K!==m[2]||M!==m[3])a.stencilOpSeparate(c,X,K,M),m[0]=c,m[1]=X,m[2]=K,m[3]=M;c=N[0];X=N[1];K=N[2];M=N[3];if(c!==ea[0]||X!==ea[1]||K!==ea[2]||M!==ea[3])a.stencilOpSeparate(c,X,K,M),ea[0]=c,ea[1]=X,ea[2]=K,ea[3]=M;c=g.scissor_enable;
c!==b.scissor_enable&&(c?a.enable(3089):a.disable(3089),b.scissor_enable=c);c=P[0];X=P[1];K=P[2];M=P[3];if(c!==S[0]||X!==S[1]||K!==S[2]||M!==S[3])a.scissor(c,X,K,M),S[0]=c,S[1]=X,S[2]=K,S[3]=M;c=Y[0];X=Y[1];K=Y[2];M=Y[3];if(c!==sa[0]||X!==sa[1]||K!==sa[2]||M!==sa[3])a.viewport(c,X,K,M),sa[0]=c,sa[1]=X,sa[2]=K,sa[3]=M;b.dirty=!1}if(c=b.profile)I=performance.now(),ga.count++;X=r.program(r.vert,r.frag);a.useProgram(X.program);x.setVAO(null);K=X.id;(M=Ka[K])||(M=Ka[K]=n(X));M.call(this,e);x.setVAO(null);
c&&(ga.cpuTime+=performance.now()-I)},scope:function(a,d,f){var g,m;if(g=b.profile)m=performance.now(),ga.count++;d(e,a,f);g&&(ga.cpuTime+=performance.now()-m)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(c,ga,n,I,e,b,p,a,g,r,x,f,Z,w,D,G,C,O,u,R,B,k,
z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra,Ib,pc,yc,vd,zc,W,J,ia,Ca,wb,ab,Uc,H,A,ha,ta,V,fa,na){var F,y,aa,E,wa,ka,l,rc,ma,h,Lb,Cb,Ue,ce,Xd,de,Id,qe,yd,ge,se,Fd,ed,Zd,Nd,Ke,zf,$e,id,Ae,Td,Ud,Kd,Se,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb;F=c.attributes;y=c.context;aa=c.current;E=c.draw;wa=c.elements;ka=c.framebuffer;l=c.gl;rc=c.next;ma=c.shader;h=c.uniforms;Lb=c.vao;Cb=rc.blend_color;
Ue=aa.blend_color;ce=rc.blend_equation;Xd=aa.blend_equation;de=rc.blend_func;Id=aa.blend_func;qe=rc.colorMask;yd=aa.colorMask;ge=rc.depth_range;se=aa.depth_range;Fd=rc.polygonOffset_offset;ed=aa.polygonOffset_offset;Zd=rc.sample_coverage;Nd=aa.sample_coverage;Ke=rc.scissor_box;zf=aa.scissor_box;$e=rc.stencil_func;id=aa.stencil_func;Ae=rc.stencil_opBack;Td=aa.stencil_opBack;Ud=rc.stencil_opFront;Kd=aa.stencil_opFront;Se=rc.viewport;sd=aa.viewport;kd={};xd={};qd=new Float32Array(16);cd=new Float32Array(16);
sc=new Float32Array(16);td=new Float32Array(16);fd=new Float32Array(16);Nc=new Float32Array(16);uc=new Float32Array(16);bb=new Float32Array(16);kc=new Float32Array(16);Gb=new Float32Array(16);tc=new Float32Array(16);Ua=new Float32Array(16);Kc=new Float32Array(16);dc=new Float32Array(16);Zc=new Float32Array(16);Cd=new Float32Array(16);ld=new Float32Array(16);Cc=new Float32Array(16);bc=new Float32Array(16);cb=new Float32Array(16);Jb=new Float32Array(16);Ma=new Float32Array(16);xb=new Float32Array(16);
Ra=new Float32Array(16);pa=new Float32Array(16);nd=new Float32Array(16);ib=new Float32Array(16);Ta=new Float32Array(16);Kb=new Float32Array(16);eb=new Float32Array(16);Dc=new Float32Array(16);Tb=new Float32Array(16);return{batch:function(d,m){var k,c,h,q;k=ka.next;k!==ka.cur&&(k?l.bindFramebuffer(36160,k.framebuffer):l.bindFramebuffer(36160,null),ka.cur=k);if(aa.dirty){var n,t,z,ga,N,ma,P,S,R,ca,Y,bb,Ua,qa,ea,va,Cb,Gb,za,B,Ia,dc,la,Sa,Nc;n=qe[0];t=qe[1];z=qe[2];ga=qe[3];if(n!==yd[0]||t!==yd[1]||z!==
yd[2]||ga!==yd[3])l.colorMask(n,t,z,ga),yd[0]=n,yd[1]=t,yd[2]=z,yd[3]=ga;N=rc.frontFace;N!==aa.frontFace&&(l.frontFace(N),aa.frontFace=N);ma=rc.polygonOffset_enable;ma!==aa.polygonOffset_enable&&(ma?l.enable(32823):l.disable(32823),aa.polygonOffset_enable=ma);P=Fd[0];S=Fd[1];if(P!==ed[0]||S!==ed[1])l.polygonOffset(P,S),ed[0]=P,ed[1]=S;R=rc.sample_alpha;R!==aa.sample_alpha&&(R?l.enable(32926):l.disable(32926),aa.sample_alpha=R);ca=rc.sample_enable;ca!==aa.sample_enable&&(ca?l.enable(32928):l.disable(32928),
aa.sample_enable=ca);Y=Zd[0];bb=Zd[1];if(Y!==Nd[0]||bb!==Nd[1])l.sampleCoverage(Y,bb),Nd[0]=Y,Nd[1]=bb;Ua=rc.stencil_enable;Ua!==aa.stencil_enable&&(Ua?l.enable(2960):l.disable(2960),aa.stencil_enable=Ua);qa=rc.stencil_mask;qa!==aa.stencil_mask&&(l.stencilMask(qa),aa.stencil_mask=qa);ea=$e[0];va=$e[1];Cb=$e[2];if(ea!==id[0]||va!==id[1]||Cb!==id[2])l.stencilFunc(ea,va,Cb),id[0]=ea,id[1]=va,id[2]=Cb;Gb=Ud[0];za=Ud[1];B=Ud[2];Ia=Ud[3];if(Gb!==Kd[0]||za!==Kd[1]||B!==Kd[2]||Ia!==Kd[3])l.stencilOpSeparate(Gb,
za,B,Ia),Kd[0]=Gb,Kd[1]=za,Kd[2]=B,Kd[3]=Ia;dc=Ae[0];la=Ae[1];Sa=Ae[2];Nc=Ae[3];if(dc!==Td[0]||la!==Td[1]||Sa!==Td[2]||Nc!==Td[3])l.stencilOpSeparate(dc,la,Sa,Nc),Td[0]=dc,Td[1]=la,Td[2]=Sa,Td[3]=Nc}l.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;l.disable(3042);aa.blend_enable=!1;l.blendEquationSeparate(32774,32774);Xd[0]=32774;Xd[1]=32774;l.blendFuncSeparate(770,771,1,1);Id[0]=770;Id[1]=771;Id[2]=1;Id[3]=1;l.enable(2884);aa.cull_enable=!0;l.cullFace(1029);aa.cull_face=1029;l.enable(2929);
aa.depth_enable=!0;l.depthFunc(513);aa.depth_func=513;l.depthMask(!0);aa.depth_mask=!0;l.depthRange(0,1);se[0]=0;se[1]=1;l.disable(3024);aa.dither=!1;l.lineWidth(2);aa.lineWidth=2;l.enable(3089);aa.scissor_enable=!0;c=aa.profile;aa.profile=!1;l.useProgram(Zb.program);var fd,Za,sa,xa,uc,La,Ke,hb,kb,ya,sc,Da,sb,tb,Xa,Ya,Kc,kc,Zc,Wa,Ob,cd,Ea,tc,Qa,Aa,nb,zb,Fb,ub,qd,Ab,td;Lb.setVAO(null);fd=Ib.location;Za=F[fd];Za.buffer||l.enableVertexAttribArray(fd);if(Za.type!==I.dtype||4!==Za.size||Za.buffer!==I||
!1!==Za.normalized||0!==Za.offset||0!==Za.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(fd,4,I.dtype,!1,0,0),Za.type=I.dtype,Za.size=4,Za.buffer=I,Za.normalized=!1,Za.offset=0,Za.stride=0;sa=pc.location;xa=F[sa];xa.buffer||l.enableVertexAttribArray(sa);if(xa.type!==e.dtype||4!==xa.size||xa.buffer!==e||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)l.bindBuffer(34962,e.buffer),l.vertexAttribPointer(sa,4,e.dtype,!1,0,0),xa.type=e.dtype,xa.size=4,xa.buffer=e,xa.normalized=!1,xa.offset=
0,xa.stride=0;uc=yc.location;La=F[uc];La.buffer||l.enableVertexAttribArray(uc);if(La.type!==b.dtype||4!==La.size||La.buffer!==b||!1!==La.normalized||0!==La.offset||0!==La.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(uc,4,b.dtype,!1,0,0),La.type=b.dtype,La.size=4,La.buffer=b,La.normalized=!1,La.offset=0,La.stride=0;Ke=vd.location;hb=F[Ke];hb.buffer||l.enableVertexAttribArray(Ke);if(hb.type!==p.dtype||4!==hb.size||hb.buffer!==p||!1!==hb.normalized||0!==hb.offset||0!==hb.stride)l.bindBuffer(34962,
p.buffer),l.vertexAttribPointer(Ke,4,p.dtype,!1,0,0),hb.type=p.dtype,hb.size=4,hb.buffer=p,hb.normalized=!1,hb.offset=0,hb.stride=0;kb=zc.location;ya=F[kb];ya.buffer||l.enableVertexAttribArray(kb);if(ya.type!==a.dtype||4!==ya.size||ya.buffer!==a||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(kb,4,a.dtype,!1,0,0),ya.type=a.dtype,ya.size=4,ya.buffer=a,ya.normalized=!1,ya.offset=0,ya.stride=0;sc=W.location;Da=F[sc];Da.buffer||l.enableVertexAttribArray(sc);
if(Da.type!==g.dtype||4!==Da.size||Da.buffer!==g||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)l.bindBuffer(34962,g.buffer),l.vertexAttribPointer(sc,4,g.dtype,!1,0,0),Da.type=g.dtype,Da.size=4,Da.buffer=g,Da.normalized=!1,Da.offset=0,Da.stride=0;sb=J.location;tb=F[sb];tb.buffer||l.enableVertexAttribArray(sb);if(tb.type!==r.dtype||4!==tb.size||tb.buffer!==r||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(sb,4,r.dtype,!1,0,0),tb.type=r.dtype,
tb.size=4,tb.buffer=r,tb.normalized=!1,tb.offset=0,tb.stride=0;Xa=ia.location;Ya=F[Xa];Ya.buffer||l.enableVertexAttribArray(Xa);if(Ya.type!==x.dtype||4!==Ya.size||Ya.buffer!==x||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(Xa,4,x.dtype,!1,0,0),Ya.type=x.dtype,Ya.size=4,Ya.buffer=x,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Kc=Ca.location;kc=F[Kc];kc.buffer||l.enableVertexAttribArray(Kc);if(kc.type!==f.dtype||4!==kc.size||kc.buffer!==f||!1!==kc.normalized||
0!==kc.offset||0!==kc.stride)l.bindBuffer(34962,f.buffer),l.vertexAttribPointer(Kc,4,f.dtype,!1,0,0),kc.type=f.dtype,kc.size=4,kc.buffer=f,kc.normalized=!1,kc.offset=0,kc.stride=0;Zc=wb.location;Wa=F[Zc];Wa.buffer||l.enableVertexAttribArray(Zc);if(Wa.type!==Z.dtype||4!==Wa.size||Wa.buffer!==Z||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)l.bindBuffer(34962,Z.buffer),l.vertexAttribPointer(Zc,4,Z.dtype,!1,0,0),Wa.type=Z.dtype,Wa.size=4,Wa.buffer=Z,Wa.normalized=!1,Wa.offset=0,Wa.stride=0;Ob=ab.location;
cd=F[Ob];cd.buffer||l.enableVertexAttribArray(Ob);if(cd.type!==w.dtype||4!==cd.size||cd.buffer!==w||!1!==cd.normalized||0!==cd.offset||0!==cd.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(Ob,4,w.dtype,!1,0,0),cd.type=w.dtype,cd.size=4,cd.buffer=w,cd.normalized=!1,cd.offset=0,cd.stride=0;Ea=Uc.location;tc=F[Ea];tc.buffer||l.enableVertexAttribArray(Ea);if(tc.type!==D.dtype||4!==tc.size||tc.buffer!==D||!1!==tc.normalized||0!==tc.offset||0!==tc.stride)l.bindBuffer(34962,D.buffer),l.vertexAttribPointer(Ea,
4,D.dtype,!1,0,0),tc.type=D.dtype,tc.size=4,tc.buffer=D,tc.normalized=!1,tc.offset=0,tc.stride=0;Qa=H.location;Aa=F[Qa];Aa.buffer||l.enableVertexAttribArray(Qa);if(Aa.type!==G.dtype||4!==Aa.size||Aa.buffer!==G||!1!==Aa.normalized||0!==Aa.offset||0!==Aa.stride)l.bindBuffer(34962,G.buffer),l.vertexAttribPointer(Qa,4,G.dtype,!1,0,0),Aa.type=G.dtype,Aa.size=4,Aa.buffer=G,Aa.normalized=!1,Aa.offset=0,Aa.stride=0;nb=A.location;zb=F[nb];zb.buffer||l.enableVertexAttribArray(nb);if(zb.type!==C.dtype||4!==
zb.size||zb.buffer!==C||!1!==zb.normalized||0!==zb.offset||0!==zb.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(nb,4,C.dtype,!1,0,0),zb.type=C.dtype,zb.size=4,zb.buffer=C,zb.normalized=!1,zb.offset=0,zb.stride=0;Fb=ha.location;ub=F[Fb];ub.buffer||l.enableVertexAttribArray(Fb);if(ub.type!==O.dtype||4!==ub.size||ub.buffer!==O||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)l.bindBuffer(34962,O.buffer),l.vertexAttribPointer(Fb,4,O.dtype,!1,0,0),ub.type=O.dtype,ub.size=4,ub.buffer=O,ub.normalized=
!1,ub.offset=0,ub.stride=0;qd=Oa.location;Ab=F[qd];Ab.buffer||l.enableVertexAttribArray(qd);if(Ab.type!==u.dtype||4!==Ab.size||Ab.buffer!==u||!1!==Ab.normalized||0!==Ab.offset||0!==Ab.stride)l.bindBuffer(34962,u.buffer),l.vertexAttribPointer(qd,4,u.dtype,!1,0,0),Ab.type=u.dtype,Ab.size=4,Ab.buffer=u,Ab.normalized=!1,Ab.offset=0,Ab.stride=0;l.uniform1i(ta.location,ua.bind());(td=E.elements)?l.bindBuffer(34963,td.buffer.buffer):Lb.currentVAO&&(td=wa.getElements(Lb.currentVAO.elements))&&l.bindBuffer(34963,
td.buffer.buffer);for(h=0;h<m;++h){q=d[h];var de,ge,Se,Cd,ce,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Ka,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,vb,gd,mc,Xc,rf,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Ja,ke,ue,fe,ee,be,ne,$d;kd.height=q.viewportHeight;kd.width=q.viewportWidth;kd.x=q.viewportX;kd.y=q.viewportY;de=kd.x|0;ge=kd.y|0;Se="width"in kd?kd.width|0:y.framebufferWidth-de;Cd="height"in kd?kd.height|0:y.framebufferHeight-ge;ce=y.viewportWidth;y.viewportWidth=Se;Yb=y.viewportHeight;y.viewportHeight=
Cd;l.viewport(de,ge,Se,Cd);sd[0]=de;sd[1]=ge;sd[2]=Se;sd[3]=Cd;xd.height=q.scissorHeight;xd.width=q.scissorWidth;xd.x=q.scissorX;xd.y=q.scissorY;ec=xd.x|0;Rb=xd.y|0;Fa="width"in xd?xd.width|0:y.framebufferWidth-ec;$b="height"in xd?xd.height|0:y.framebufferHeight-Rb;l.scissor(ec,Rb,Fa,$b);zf[0]=ec;zf[1]=Rb;zf[2]=Fa;zf[3]=$b;ob=q.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(ld[0]=ob[0],ld[1]=ob[1],ld[2]=ob[2],ld[3]=ob[3],ld[4]=ob[4],ld[5]=ob[5],ld[6]=ob[6],
ld[7]=ob[7],ld[8]=ob[8],ld[9]=ob[9],ld[10]=ob[10],ld[11]=ob[11],ld[12]=ob[12],ld[13]=ob[13],ld[14]=ob[14],ld[15]=ob[15],ld));Bb=q.dim1A;l.uniformMatrix4fv(L.location,!1,Array.isArray(Bb)||Bb instanceof Float32Array?Bb:(Cc[0]=Bb[0],Cc[1]=Bb[1],Cc[2]=Bb[2],Cc[3]=Bb[3],Cc[4]=Bb[4],Cc[5]=Bb[5],Cc[6]=Bb[6],Cc[7]=Bb[7],Cc[8]=Bb[8],Cc[9]=Bb[9],Cc[10]=Bb[10],Cc[11]=Bb[11],Cc[12]=Bb[12],Cc[13]=Bb[13],Cc[14]=Bb[14],Cc[15]=Bb[15],Cc));Pb=q.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(Pb)||Pb instanceof
Float32Array?Pb:(bc[0]=Pb[0],bc[1]=Pb[1],bc[2]=Pb[2],bc[3]=Pb[3],bc[4]=Pb[4],bc[5]=Pb[5],bc[6]=Pb[6],bc[7]=Pb[7],bc[8]=Pb[8],bc[9]=Pb[9],bc[10]=Pb[10],bc[11]=Pb[11],bc[12]=Pb[12],bc[13]=Pb[13],bc[14]=Pb[14],bc[15]=Pb[15],bc));Sb=q.dim1B;l.uniformMatrix4fv(ac.location,!1,Array.isArray(Sb)||Sb instanceof Float32Array?Sb:(cb[0]=Sb[0],cb[1]=Sb[1],cb[2]=Sb[2],cb[3]=Sb[3],cb[4]=Sb[4],cb[5]=Sb[5],cb[6]=Sb[6],cb[7]=Sb[7],cb[8]=Sb[8],cb[9]=Sb[9],cb[10]=Sb[10],cb[11]=Sb[11],cb[12]=Sb[12],cb[13]=Sb[13],cb[14]=
Sb[14],cb[15]=Sb[15],cb));hc=q.dim0C;l.uniformMatrix4fv(Q.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Jb[0]=hc[0],Jb[1]=hc[1],Jb[2]=hc[2],Jb[3]=hc[3],Jb[4]=hc[4],Jb[5]=hc[5],Jb[6]=hc[6],Jb[7]=hc[7],Jb[8]=hc[8],Jb[9]=hc[9],Jb[10]=hc[10],Jb[11]=hc[11],Jb[12]=hc[12],Jb[13]=hc[13],Jb[14]=hc[14],Jb[15]=hc[15],Jb));jc=q.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(Ma[0]=jc[0],Ma[1]=jc[1],Ma[2]=jc[2],Ma[3]=jc[3],Ma[4]=jc[4],Ma[5]=jc[5],Ma[6]=
jc[6],Ma[7]=jc[7],Ma[8]=jc[8],Ma[9]=jc[9],Ma[10]=jc[10],Ma[11]=jc[11],Ma[12]=jc[12],Ma[13]=jc[13],Ma[14]=jc[14],Ma[15]=jc[15],Ma));Ka=q.dim0D;l.uniformMatrix4fv(oa.location,!1,Array.isArray(Ka)||Ka instanceof Float32Array?Ka:(xb[0]=Ka[0],xb[1]=Ka[1],xb[2]=Ka[2],xb[3]=Ka[3],xb[4]=Ka[4],xb[5]=Ka[5],xb[6]=Ka[6],xb[7]=Ka[7],xb[8]=Ka[8],xb[9]=Ka[9],xb[10]=Ka[10],xb[11]=Ka[11],xb[12]=Ka[12],xb[13]=Ka[13],xb[14]=Ka[14],xb[15]=Ka[15],xb));Ec=q.dim1D;l.uniformMatrix4fv(T.location,!1,Array.isArray(Ec)||Ec instanceof
Float32Array?Ec:(Ra[0]=Ec[0],Ra[1]=Ec[1],Ra[2]=Ec[2],Ra[3]=Ec[3],Ra[4]=Ec[4],Ra[5]=Ec[5],Ra[6]=Ec[6],Ra[7]=Ec[7],Ra[8]=Ec[8],Ra[9]=Ec[9],Ra[10]=Ec[10],Ra[11]=Ec[11],Ra[12]=Ec[12],Ra[13]=Ec[13],Ra[14]=Ec[14],Ra[15]=Ec[15],Ra));Fc=q.loA;l.uniformMatrix4fv(cc.location,!1,Array.isArray(Fc)||Fc instanceof Float32Array?Fc:(pa[0]=Fc[0],pa[1]=Fc[1],pa[2]=Fc[2],pa[3]=Fc[3],pa[4]=Fc[4],pa[5]=Fc[5],pa[6]=Fc[6],pa[7]=Fc[7],pa[8]=Fc[8],pa[9]=Fc[9],pa[10]=Fc[10],pa[11]=Fc[11],pa[12]=Fc[12],pa[13]=Fc[13],pa[14]=
Fc[14],pa[15]=Fc[15],pa));Gc=q.hiA;l.uniformMatrix4fv(ja.location,!1,Array.isArray(Gc)||Gc instanceof Float32Array?Gc:(nd[0]=Gc[0],nd[1]=Gc[1],nd[2]=Gc[2],nd[3]=Gc[3],nd[4]=Gc[4],nd[5]=Gc[5],nd[6]=Gc[6],nd[7]=Gc[7],nd[8]=Gc[8],nd[9]=Gc[9],nd[10]=Gc[10],nd[11]=Gc[11],nd[12]=Gc[12],nd[13]=Gc[13],nd[14]=Gc[14],nd[15]=Gc[15],nd));Pc=q.loB;l.uniformMatrix4fv(Ga.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(ib[0]=Pc[0],ib[1]=Pc[1],ib[2]=Pc[2],ib[3]=Pc[3],ib[4]=Pc[4],ib[5]=Pc[5],ib[6]=Pc[6],
ib[7]=Pc[7],ib[8]=Pc[8],ib[9]=Pc[9],ib[10]=Pc[10],ib[11]=Pc[11],ib[12]=Pc[12],ib[13]=Pc[13],ib[14]=Pc[14],ib[15]=Pc[15],ib));$c=q.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Ta[0]=$c[0],Ta[1]=$c[1],Ta[2]=$c[2],Ta[3]=$c[3],Ta[4]=$c[4],Ta[5]=$c[5],Ta[6]=$c[6],Ta[7]=$c[7],Ta[8]=$c[8],Ta[9]=$c[9],Ta[10]=$c[10],Ta[11]=$c[11],Ta[12]=$c[12],Ta[13]=$c[13],Ta[14]=$c[14],Ta[15]=$c[15],Ta));Sc=q.loC;l.uniformMatrix4fv(U.location,!1,Array.isArray(Sc)||Sc instanceof
Float32Array?Sc:(Kb[0]=Sc[0],Kb[1]=Sc[1],Kb[2]=Sc[2],Kb[3]=Sc[3],Kb[4]=Sc[4],Kb[5]=Sc[5],Kb[6]=Sc[6],Kb[7]=Sc[7],Kb[8]=Sc[8],Kb[9]=Sc[9],Kb[10]=Sc[10],Kb[11]=Sc[11],Kb[12]=Sc[12],Kb[13]=Sc[13],Kb[14]=Sc[14],Kb[15]=Sc[15],Kb));Qc=q.hiC;l.uniformMatrix4fv(Ba.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:(eb[0]=Qc[0],eb[1]=Qc[1],eb[2]=Qc[2],eb[3]=Qc[3],eb[4]=Qc[4],eb[5]=Qc[5],eb[6]=Qc[6],eb[7]=Qc[7],eb[8]=Qc[8],eb[9]=Qc[9],eb[10]=Qc[10],eb[11]=Qc[11],eb[12]=Qc[12],eb[13]=Qc[13],eb[14]=
Qc[14],eb[15]=Qc[15],eb));Nb=q.loD;l.uniformMatrix4fv(pb.location,!1,Array.isArray(Nb)||Nb instanceof Float32Array?Nb:(Dc[0]=Nb[0],Dc[1]=Nb[1],Dc[2]=Nb[2],Dc[3]=Nb[3],Dc[4]=Nb[4],Dc[5]=Nb[5],Dc[6]=Nb[6],Dc[7]=Nb[7],Dc[8]=Nb[8],Dc[9]=Nb[9],Dc[10]=Nb[10],Dc[11]=Nb[11],Dc[12]=Nb[12],Dc[13]=Nb[13],Dc[14]=Nb[14],Dc[15]=Nb[15],Dc));Hb=q.hiD;l.uniformMatrix4fv(Ha.location,!1,Array.isArray(Hb)||Hb instanceof Float32Array?Hb:(Tb[0]=Hb[0],Tb[1]=Hb[1],Tb[2]=Hb[2],Tb[3]=Hb[3],Tb[4]=Hb[4],Tb[5]=Hb[5],Tb[6]=Hb[6],
Tb[7]=Hb[7],Tb[8]=Hb[8],Tb[9]=Hb[9],Tb[10]=Hb[10],Tb[11]=Hb[11],Tb[12]=Hb[12],Tb[13]=Hb[13],Tb[14]=Hb[14],Tb[15]=Hb[15],Tb));Rc=q.resolution;Jc=Rc[0];ic=Rc[1];h&&Tc===Jc&&Wc===ic||(Tc=Jc,Wc=ic,l.uniform2f(V.location,Jc,ic));vb=q.viewBoxPos;gd=vb[0];Xc=vb[1];h&&mc===gd&&rf===Xc||(mc=gd,rf=Xc,l.uniform2f(fa.location,gd,Xc));Ld=q.viewBoxSize;te=Ld[0];Vd=Ld[1];h&&re===te&&Gd===Vd||(re=te,Gd=Vd,l.uniform2f(na.location,te,Vd));Dd=q.maskHeight;h&&dd===Dd||(dd=Dd,l.uniform1f(da.location,Dd));Hc=q.drwLayer;
h&&pd===Hc||(pd=Hc,l.uniform1f(v.location,Hc));hd=q.contextColor;Yc=hd[0];Ad=hd[1];Ja=hd[2];ue=hd[3];h&&rd===Yc&&Bd===Ad&&ke===Ja&&fe===ue||(rd=Yc,Bd=Ad,ke=Ja,fe=ue,l.uniform4f(X.location,Yc,Ad,Ja,ue));(ee=q.maskTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);be=ee._texture;l.uniform1i(ra.location,be.bind());ne=q.offset;if($d=q.count)td?l.drawElements(1,$d,td.type,ne<<(td.type-5121>>1)):l.drawArrays(1,ne,$d),y.viewportWidth=ce,y.viewportHeight=Yb,be.unbind()}ua.unbind();aa.dirty=!0;Lb.setVAO(null);
aa.profile=c},draw:function(d){var m,k,c,h,q,t;m=ka.next;m!==ka.cur&&(m?l.bindFramebuffer(36160,m.framebuffer):l.bindFramebuffer(36160,null),ka.cur=m);if(aa.dirty){m=qe[0];t=qe[1];k=qe[2];c=qe[3];if(m!==yd[0]||t!==yd[1]||k!==yd[2]||c!==yd[3])l.colorMask(m,t,k,c),yd[0]=m,yd[1]=t,yd[2]=k,yd[3]=c;m=rc.frontFace;m!==aa.frontFace&&(l.frontFace(m),aa.frontFace=m);m=rc.polygonOffset_enable;m!==aa.polygonOffset_enable&&(m?l.enable(32823):l.disable(32823),aa.polygonOffset_enable=m);m=Fd[0];t=Fd[1];if(m!==
ed[0]||t!==ed[1])l.polygonOffset(m,t),ed[0]=m,ed[1]=t;m=rc.sample_alpha;m!==aa.sample_alpha&&(m?l.enable(32926):l.disable(32926),aa.sample_alpha=m);m=rc.sample_enable;m!==aa.sample_enable&&(m?l.enable(32928):l.disable(32928),aa.sample_enable=m);m=Zd[0];t=Zd[1];if(m!==Nd[0]||t!==Nd[1])l.sampleCoverage(m,t),Nd[0]=m,Nd[1]=t;m=rc.stencil_enable;m!==aa.stencil_enable&&(m?l.enable(2960):l.disable(2960),aa.stencil_enable=m);m=rc.stencil_mask;m!==aa.stencil_mask&&(l.stencilMask(m),aa.stencil_mask=m);m=$e[0];
t=$e[1];k=$e[2];if(m!==id[0]||t!==id[1]||k!==id[2])l.stencilFunc(m,t,k),id[0]=m,id[1]=t,id[2]=k;m=Ud[0];t=Ud[1];k=Ud[2];c=Ud[3];if(m!==Kd[0]||t!==Kd[1]||k!==Kd[2]||c!==Kd[3])l.stencilOpSeparate(m,t,k,c),Kd[0]=m,Kd[1]=t,Kd[2]=k,Kd[3]=c;m=Ae[0];t=Ae[1];k=Ae[2];c=Ae[3];if(m!==Td[0]||t!==Td[1]||k!==Td[2]||c!==Td[3])l.stencilOpSeparate(m,t,k,c),Td[0]=m,Td[1]=t,Td[2]=k,Td[3]=c}kd.height=d.viewportHeight;kd.width=d.viewportWidth;kd.x=d.viewportX;kd.y=d.viewportY;k=kd.x|0;c=kd.y|0;h="width"in kd?kd.width|
0:y.framebufferWidth-k;q="height"in kd?kd.height|0:y.framebufferHeight-c;m=y.viewportWidth;y.viewportWidth=h;t=y.viewportHeight;y.viewportHeight=q;l.viewport(k,c,h,q);sd[0]=k;sd[1]=c;sd[2]=h;sd[3]=q;l.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;l.disable(3042);aa.blend_enable=!1;l.blendEquationSeparate(32774,32774);Xd[0]=32774;Xd[1]=32774;l.blendFuncSeparate(770,771,1,1);Id[0]=770;Id[1]=771;Id[2]=1;Id[3]=1;l.enable(2884);aa.cull_enable=!0;l.cullFace(1029);aa.cull_face=1029;l.enable(2929);
aa.depth_enable=!0;l.depthFunc(513);aa.depth_func=513;l.depthMask(!0);aa.depth_mask=!0;l.depthRange(0,1);se[0]=0;se[1]=1;l.disable(3024);aa.dither=!1;l.lineWidth(2);aa.lineWidth=2;xd.height=d.scissorHeight;xd.width=d.scissorWidth;xd.x=d.scissorX;xd.y=d.scissorY;k=xd.x|0;c=xd.y|0;h="width"in xd?xd.width|0:y.framebufferWidth-k;q="height"in xd?xd.height|0:y.framebufferHeight-c;l.scissor(k,c,h,q);zf[0]=k;zf[1]=c;zf[2]=h;zf[3]=q;l.enable(3089);aa.scissor_enable=!0;k=aa.profile;aa.profile=!1;l.useProgram(n.program);
Lb.setVAO(null);c=Ib.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==I.dtype||4!==h.size||h.buffer!==I||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(c,4,I.dtype,!1,0,0),h.type=I.dtype,h.size=4,h.buffer=I,h.normalized=!1,h.offset=0,h.stride=0;c=pc.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==e.dtype||4!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,e.buffer),l.vertexAttribPointer(c,
4,e.dtype,!1,0,0),h.type=e.dtype,h.size=4,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;c=yc.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==b.dtype||4!==h.size||h.buffer!==b||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(c,4,b.dtype,!1,0,0),h.type=b.dtype,h.size=4,h.buffer=b,h.normalized=!1,h.offset=0,h.stride=0;c=vd.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==p.dtype||4!==h.size||h.buffer!==p||!1!==h.normalized||
0!==h.offset||0!==h.stride)l.bindBuffer(34962,p.buffer),l.vertexAttribPointer(c,4,p.dtype,!1,0,0),h.type=p.dtype,h.size=4,h.buffer=p,h.normalized=!1,h.offset=0,h.stride=0;c=zc.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==a.dtype||4!==h.size||h.buffer!==a||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(c,4,a.dtype,!1,0,0),h.type=a.dtype,h.size=4,h.buffer=a,h.normalized=!1,h.offset=0,h.stride=0;c=W.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);
if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,g.buffer),l.vertexAttribPointer(c,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;c=J.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==r.dtype||4!==h.size||h.buffer!==r||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(c,4,r.dtype,!1,0,0),h.type=r.dtype,h.size=4,h.buffer=r,h.normalized=
!1,h.offset=0,h.stride=0;c=ia.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==x.dtype||4!==h.size||h.buffer!==x||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(c,4,x.dtype,!1,0,0),h.type=x.dtype,h.size=4,h.buffer=x,h.normalized=!1,h.offset=0,h.stride=0;c=Ca.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==f.dtype||4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,f.buffer),
l.vertexAttribPointer(c,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;c=wb.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==Z.dtype||4!==h.size||h.buffer!==Z||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,Z.buffer),l.vertexAttribPointer(c,4,Z.dtype,!1,0,0),h.type=Z.dtype,h.size=4,h.buffer=Z,h.normalized=!1,h.offset=0,h.stride=0;c=ab.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==w.dtype||4!==h.size||
h.buffer!==w||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(c,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;c=Uc.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==D.dtype||4!==h.size||h.buffer!==D||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,D.buffer),l.vertexAttribPointer(c,4,D.dtype,!1,0,0),h.type=D.dtype,h.size=4,h.buffer=D,h.normalized=!1,h.offset=0,h.stride=0;
c=H.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==G.dtype||4!==h.size||h.buffer!==G||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,G.buffer),l.vertexAttribPointer(c,4,G.dtype,!1,0,0),h.type=G.dtype,h.size=4,h.buffer=G,h.normalized=!1,h.offset=0,h.stride=0;c=A.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==C.dtype||4!==h.size||h.buffer!==C||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(c,
4,C.dtype,!1,0,0),h.type=C.dtype,h.size=4,h.buffer=C,h.normalized=!1,h.offset=0,h.stride=0;c=ha.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==O.dtype||4!==h.size||h.buffer!==O||!1!==h.normalized||0!==h.offset||0!==h.stride)l.bindBuffer(34962,O.buffer),l.vertexAttribPointer(c,4,O.dtype,!1,0,0),h.type=O.dtype,h.size=4,h.buffer=O,h.normalized=!1,h.offset=0,h.stride=0;c=Oa.location;h=F[c];h.buffer||l.enableVertexAttribArray(c);if(h.type!==u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||
0!==h.offset||0!==h.stride)l.bindBuffer(34962,u.buffer),l.vertexAttribPointer(c,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;c=d.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(qd[0]=c[0],qd[1]=c[1],qd[2]=c[2],qd[3]=c[3],qd[4]=c[4],qd[5]=c[5],qd[6]=c[6],qd[7]=c[7],qd[8]=c[8],qd[9]=c[9],qd[10]=c[10],qd[11]=c[11],qd[12]=c[12],qd[13]=c[13],qd[14]=c[14],qd[15]=c[15],qd));c=d.dim1A;l.uniformMatrix4fv(L.location,!1,Array.isArray(c)||
c instanceof Float32Array?c:(cd[0]=c[0],cd[1]=c[1],cd[2]=c[2],cd[3]=c[3],cd[4]=c[4],cd[5]=c[5],cd[6]=c[6],cd[7]=c[7],cd[8]=c[8],cd[9]=c[9],cd[10]=c[10],cd[11]=c[11],cd[12]=c[12],cd[13]=c[13],cd[14]=c[14],cd[15]=c[15],cd));c=d.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(sc[0]=c[0],sc[1]=c[1],sc[2]=c[2],sc[3]=c[3],sc[4]=c[4],sc[5]=c[5],sc[6]=c[6],sc[7]=c[7],sc[8]=c[8],sc[9]=c[9],sc[10]=c[10],sc[11]=c[11],sc[12]=c[12],sc[13]=c[13],sc[14]=c[14],sc[15]=c[15],sc));
c=d.dim1B;l.uniformMatrix4fv(ac.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(td[0]=c[0],td[1]=c[1],td[2]=c[2],td[3]=c[3],td[4]=c[4],td[5]=c[5],td[6]=c[6],td[7]=c[7],td[8]=c[8],td[9]=c[9],td[10]=c[10],td[11]=c[11],td[12]=c[12],td[13]=c[13],td[14]=c[14],td[15]=c[15],td));c=d.dim0C;l.uniformMatrix4fv(Q.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(fd[0]=c[0],fd[1]=c[1],fd[2]=c[2],fd[3]=c[3],fd[4]=c[4],fd[5]=c[5],fd[6]=c[6],fd[7]=c[7],fd[8]=c[8],fd[9]=c[9],fd[10]=c[10],fd[11]=
c[11],fd[12]=c[12],fd[13]=c[13],fd[14]=c[14],fd[15]=c[15],fd));c=d.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Nc[0]=c[0],Nc[1]=c[1],Nc[2]=c[2],Nc[3]=c[3],Nc[4]=c[4],Nc[5]=c[5],Nc[6]=c[6],Nc[7]=c[7],Nc[8]=c[8],Nc[9]=c[9],Nc[10]=c[10],Nc[11]=c[11],Nc[12]=c[12],Nc[13]=c[13],Nc[14]=c[14],Nc[15]=c[15],Nc));c=d.dim0D;l.uniformMatrix4fv(oa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(uc[0]=c[0],uc[1]=c[1],uc[2]=c[2],uc[3]=c[3],uc[4]=c[4],uc[5]=c[5],
uc[6]=c[6],uc[7]=c[7],uc[8]=c[8],uc[9]=c[9],uc[10]=c[10],uc[11]=c[11],uc[12]=c[12],uc[13]=c[13],uc[14]=c[14],uc[15]=c[15],uc));c=d.dim1D;l.uniformMatrix4fv(T.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(bb[0]=c[0],bb[1]=c[1],bb[2]=c[2],bb[3]=c[3],bb[4]=c[4],bb[5]=c[5],bb[6]=c[6],bb[7]=c[7],bb[8]=c[8],bb[9]=c[9],bb[10]=c[10],bb[11]=c[11],bb[12]=c[12],bb[13]=c[13],bb[14]=c[14],bb[15]=c[15],bb));c=d.loA;l.uniformMatrix4fv(cc.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(kc[0]=
c[0],kc[1]=c[1],kc[2]=c[2],kc[3]=c[3],kc[4]=c[4],kc[5]=c[5],kc[6]=c[6],kc[7]=c[7],kc[8]=c[8],kc[9]=c[9],kc[10]=c[10],kc[11]=c[11],kc[12]=c[12],kc[13]=c[13],kc[14]=c[14],kc[15]=c[15],kc));c=d.hiA;l.uniformMatrix4fv(ja.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Gb[0]=c[0],Gb[1]=c[1],Gb[2]=c[2],Gb[3]=c[3],Gb[4]=c[4],Gb[5]=c[5],Gb[6]=c[6],Gb[7]=c[7],Gb[8]=c[8],Gb[9]=c[9],Gb[10]=c[10],Gb[11]=c[11],Gb[12]=c[12],Gb[13]=c[13],Gb[14]=c[14],Gb[15]=c[15],Gb));c=d.loB;l.uniformMatrix4fv(Ga.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(tc[0]=c[0],tc[1]=c[1],tc[2]=c[2],tc[3]=c[3],tc[4]=c[4],tc[5]=c[5],tc[6]=c[6],tc[7]=c[7],tc[8]=c[8],tc[9]=c[9],tc[10]=c[10],tc[11]=c[11],tc[12]=c[12],tc[13]=c[13],tc[14]=c[14],tc[15]=c[15],tc));c=d.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Ua[0]=c[0],Ua[1]=c[1],Ua[2]=c[2],Ua[3]=c[3],Ua[4]=c[4],Ua[5]=c[5],Ua[6]=c[6],Ua[7]=c[7],Ua[8]=c[8],Ua[9]=c[9],Ua[10]=c[10],Ua[11]=c[11],Ua[12]=c[12],Ua[13]=c[13],Ua[14]=
c[14],Ua[15]=c[15],Ua));c=d.loC;l.uniformMatrix4fv(U.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Kc[0]=c[0],Kc[1]=c[1],Kc[2]=c[2],Kc[3]=c[3],Kc[4]=c[4],Kc[5]=c[5],Kc[6]=c[6],Kc[7]=c[7],Kc[8]=c[8],Kc[9]=c[9],Kc[10]=c[10],Kc[11]=c[11],Kc[12]=c[12],Kc[13]=c[13],Kc[14]=c[14],Kc[15]=c[15],Kc));c=d.hiC;l.uniformMatrix4fv(Ba.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(dc[0]=c[0],dc[1]=c[1],dc[2]=c[2],dc[3]=c[3],dc[4]=c[4],dc[5]=c[5],dc[6]=c[6],dc[7]=c[7],dc[8]=c[8],dc[9]=c[9],
dc[10]=c[10],dc[11]=c[11],dc[12]=c[12],dc[13]=c[13],dc[14]=c[14],dc[15]=c[15],dc));c=d.loD;l.uniformMatrix4fv(pb.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Zc[0]=c[0],Zc[1]=c[1],Zc[2]=c[2],Zc[3]=c[3],Zc[4]=c[4],Zc[5]=c[5],Zc[6]=c[6],Zc[7]=c[7],Zc[8]=c[8],Zc[9]=c[9],Zc[10]=c[10],Zc[11]=c[11],Zc[12]=c[12],Zc[13]=c[13],Zc[14]=c[14],Zc[15]=c[15],Zc));c=d.hiD;l.uniformMatrix4fv(Ha.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Cd[0]=c[0],Cd[1]=c[1],Cd[2]=c[2],Cd[3]=c[3],Cd[4]=
c[4],Cd[5]=c[5],Cd[6]=c[6],Cd[7]=c[7],Cd[8]=c[8],Cd[9]=c[9],Cd[10]=c[10],Cd[11]=c[11],Cd[12]=c[12],Cd[13]=c[13],Cd[14]=c[14],Cd[15]=c[15],Cd));c=d.resolution;l.uniform2f(V.location,c[0],c[1]);c=d.viewBoxPos;l.uniform2f(fa.location,c[0],c[1]);c=d.viewBoxSize;l.uniform2f(na.location,c[0],c[1]);l.uniform1f(da.location,d.maskHeight);l.uniform1f(v.location,d.drwLayer);c=d.contextColor;l.uniform4f(X.location,c[0],c[1],c[2],c[3]);(c=d.maskTexture)&&"framebuffer"===c._reglType&&(c=c.color[0]);c=c._texture;
l.uniform1i(ra.location,c.bind());l.uniform1i(ta.location,R.bind());(h=E.elements)?l.bindBuffer(34963,h.buffer.buffer):Lb.currentVAO&&(h=wa.getElements(Lb.currentVAO.elements))&&l.bindBuffer(34963,h.buffer.buffer);q=d.offset;if(d=d.count)h?l.drawElements(1,d,h.type,q<<(h.type-5121>>1)):l.drawArrays(1,q,d),aa.dirty=!0,Lb.setVAO(null),y.viewportWidth=m,y.viewportHeight=t,aa.profile=k,c.unbind(),R.unbind()},scope:function(c,l,n){var v,A,J,F,ga,H,W,M,K,L,Q,T,ka,U,R,V,fa,ia,X,ha,ba,wa,da,ja,ta,pa,pc,bb,
na,Ua,Ca,xa,Ma,Nd,Gb,Lb,Ra,ya,Ud,Da,dc,cb,Nc,oa,fd,bc,kc,Ta,xb,uc,Ea,Jb,Qa,Aa,vd,ra,cd,ib,eb,ua,sc,tc,id,Td,Kc,Cc,yd,Zc,Kb,Fa,wb,ob,Bb,sd,td,Kd,ab,Tb,qd,zc,nd,Dc,Ba,ld,Ue,Nb,Hb,Xd,Id,Fd,zf,Ae,Cd,Ib,$e,$a,Oa,yc,Zd,qe,Ha,pb,ed,se,Hc,Ga,Uc,Yc,ac,cc,Zb,Ja,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe,Me,He,pe,ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf,pf,mf,qf,Bf,Cf,Je,xe,nf,of,Df,Gf,Af,Ef,Ff,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Hf,tf,dg,
Sf,Tf,qg,cf,Ye,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,df,Ze,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;kd.height=c.viewportHeight;kd.width=c.viewportWidth;kd.x=c.viewportX;kd.y=c.viewportY;v=kd.x|0;A=kd.y|0;J="width"in kd?kd.width|0:y.framebufferWidth-v;F="height"in kd?kd.height|0:y.framebufferHeight-A;ga=y.viewportWidth;y.viewportWidth=
J;H=y.viewportHeight;y.viewportHeight=F;W=Se[0];Se[0]=v;M=Se[1];Se[1]=A;K=Se[2];Se[2]=J;L=Se[3];Se[3]=F;Q=Cb[0];Cb[0]=0;T=Cb[1];Cb[1]=0;ka=Cb[2];Cb[2]=0;U=Cb[3];Cb[3]=0;R=rc.blend_enable;rc.blend_enable=!1;V=ce[0];ce[0]=32774;fa=ce[1];ce[1]=32774;ia=de[0];de[0]=770;X=de[1];de[1]=771;ha=de[2];de[2]=1;ba=de[3];de[3]=1;wa=rc.cull_enable;rc.cull_enable=!0;da=rc.cull_face;rc.cull_face=1029;ja=rc.depth_enable;rc.depth_enable=!0;ta=rc.depth_func;rc.depth_func=513;pa=rc.depth_mask;rc.depth_mask=!0;pc=ge[0];
ge[0]=0;bb=ge[1];ge[1]=1;na=rc.dither;rc.dither=!1;Ua=rc.lineWidth;rc.lineWidth=2;xd.height=c.scissorHeight;xd.width=c.scissorWidth;xd.x=c.scissorX;xd.y=c.scissorY;Ca=xd.x|0;xa=xd.y|0;Ma="width"in xd?xd.width|0:y.framebufferWidth-Ca;Nd="height"in xd?xd.height|0:y.framebufferHeight-xa;Gb=Ke[0];Ke[0]=Ca;Lb=Ke[1];Ke[1]=xa;Ra=Ke[2];Ke[2]=Ma;ya=Ke[3];Ke[3]=Nd;Ud=rc.scissor_enable;rc.scissor_enable=!0;Da=aa.profile;aa.profile=!1;dc=c.offset;cb=E.offset;E.offset=dc;Nc=c.count;oa=E.count;E.count=Nc;fd=E.primitive;
E.primitive=1;bc=c.contextColor;kc=h[24];h[24]=bc;Ta=c.dim0A;xb=h[3];h[3]=Ta;uc=c.dim0B;Ea=h[5];h[5]=uc;Jb=c.dim0C;Qa=h[7];h[7]=Jb;Aa=c.dim0D;vd=h[9];h[9]=Aa;ra=c.dim1A;cd=h[4];h[4]=ra;ib=c.dim1B;eb=h[6];h[6]=ib;ua=c.dim1C;sc=h[8];h[8]=ua;tc=c.dim1D;id=h[10];h[10]=tc;Td=c.drwLayer;Kc=h[23];h[23]=Td;Cc=c.hiA;yd=h[12];h[12]=Cc;Zc=c.hiB;Kb=h[14];h[14]=Zc;Fa=c.hiC;wb=h[16];h[16]=Fa;ob=c.hiD;Bb=h[18];h[18]=ob;sd=c.loA;td=h[11];h[11]=sd;Kd=c.loB;ab=h[13];h[13]=Kd;Tb=c.loC;qd=h[15];h[15]=Tb;zc=c.loD;nd=
h[17];h[17]=zc;Dc=c.maskHeight;Ba=h[22];h[22]=Dc;ld=c.maskTexture;Ue=h[25];h[25]=ld;Nb=h[26];h[26]=B;Hb=c.resolution;Xd=h[19];h[19]=Hb;Id=c.viewBoxPos;Fd=h[20];h[20]=Id;zf=c.viewBoxSize;Ae=h[21];h[21]=zf;Cd=k.buffer;k.buffer=u;Ib=k.divisor;k.divisor=0;$e=k.normalized;k.normalized=!1;$a=k.offset;k.offset=0;Oa=k.size;k.size=0;yc=k.state;k.state=1;Zd=k.stride;k.stride=0;qe=k.type;k.type=u.dtype;Ha=k.w;k.w=0;pb=k.x;k.x=0;ed=k.y;k.y=0;se=k.z;k.z=0;Hc=z.buffer;z.buffer=I;Ga=z.divisor;z.divisor=0;Uc=z.normalized;
z.normalized=!1;Yc=z.offset;z.offset=0;ac=z.size;z.size=0;cc=z.state;z.state=1;Zb=z.stride;z.stride=0;Ja=z.type;z.type=I.dtype;ke=z.w;z.w=0;ue=z.x;z.x=0;fe=z.y;z.y=0;ee=z.z;z.z=0;be=q.buffer;q.buffer=e;ne=q.divisor;q.divisor=0;$d=q.normalized;q.normalized=!1;he=q.offset;q.offset=0;Bc=q.size;q.size=0;Vc=q.state;q.state=1;oe=q.stride;q.stride=0;je=q.type;q.type=e.dtype;Ed=q.w;q.w=0;Md=q.x;q.x=0;Od=q.y;q.y=0;Pd=q.z;q.z=0;ie=ca.buffer;ca.buffer=b;Be=ca.divisor;ca.divisor=0;ve=ca.normalized;ca.normalized=
!1;le=ca.offset;ca.offset=0;Xe=ca.size;ca.size=0;Me=ca.state;ca.state=1;He=ca.stride;ca.stride=0;pe=ca.type;ca.type=b.dtype;ye=ca.w;ca.w=0;Ce=ca.x;ca.x=0;De=ca.y;ca.y=0;Ee=ca.z;ca.z=0;ze=P.buffer;P.buffer=p;Hd=P.divisor;P.divisor=0;Sd=P.normalized;P.normalized=!1;Yd=P.offset;P.offset=0;ae=P.size;P.size=0;Fe=P.state;P.state=1;zd=P.stride;P.stride=0;Qd=P.type;P.type=p.dtype;we=P.w;P.w=0;Ge=P.x;P.x=0;ef=P.y;P.y=0;We=P.z;P.z=0;Ne=S.buffer;S.buffer=a;Ie=S.divisor;S.divisor=0;Ve=S.normalized;S.normalized=
!1;Re=S.offset;S.offset=0;Oe=S.size;S.size=0;Pe=S.state;S.state=1;Rd=S.stride;S.stride=0;Wd=S.type;S.type=a.dtype;Qe=S.w;S.w=0;ff=S.x;S.x=0;kf=S.y;S.y=0;bf=S.z;S.z=0;gf=t.buffer;t.buffer=g;hf=t.divisor;t.divisor=0;jf=t.normalized;t.normalized=!1;pf=t.offset;t.offset=0;mf=t.size;t.size=0;qf=t.state;t.state=1;Bf=t.stride;t.stride=0;Cf=t.type;t.type=g.dtype;Je=t.w;t.w=0;xe=t.x;t.x=0;nf=t.y;t.y=0;of=t.z;t.z=0;Df=la.buffer;la.buffer=r;Gf=la.divisor;la.divisor=0;Af=la.normalized;la.normalized=!1;Ef=la.offset;
la.offset=0;Ff=la.size;la.size=0;vf=la.state;la.state=1;wf=la.stride;la.stride=0;uf=la.type;la.type=r.dtype;xf=la.w;la.w=0;yf=la.x;la.x=0;If=la.y;la.y=0;Kf=la.z;la.z=0;Lf=N.buffer;N.buffer=x;Mf=N.divisor;N.divisor=0;sf=N.normalized;N.normalized=!1;Rf=N.offset;N.offset=0;Hf=N.size;N.size=0;tf=N.state;N.state=1;dg=N.stride;N.stride=0;Sf=N.type;N.type=x.dtype;Tf=N.w;N.w=0;qg=N.x;N.x=0;cf=N.y;N.y=0;Ye=N.z;N.z=0;Nf=ea.buffer;ea.buffer=f;Of=ea.divisor;ea.divisor=0;eg=ea.normalized;ea.normalized=!1;fg=ea.offset;
ea.offset=0;gg=ea.size;ea.size=0;hg=ea.state;ea.state=1;ig=ea.stride;ea.stride=0;Wf=ea.type;ea.type=f.dtype;Uf=ea.w;ea.w=0;Xf=ea.x;ea.x=0;Yf=ea.y;ea.y=0;Zf=ea.z;ea.z=0;jg=d.buffer;d.buffer=Z;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=0;xg=d.type;d.type=Z.dtype;yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;df=m.buffer;m.buffer=w;Ze=m.divisor;m.divisor=0;Pf=m.normalized;m.normalized=!1;Qf=m.offset;
m.offset=0;kg=m.size;m.size=0;lg=m.state;m.state=1;mg=m.stride;m.stride=0;ng=m.type;m.type=w.dtype;og=m.w;m.w=0;$f=m.x;m.x=0;Vf=m.y;m.y=0;ag=m.z;m.z=0;bg=Y.buffer;Y.buffer=D;cg=Y.divisor;Y.divisor=0;pg=Y.normalized;Y.normalized=!1;Cg=Y.offset;Y.offset=0;Dg=Y.size;Y.size=0;Eg=Y.state;Y.state=1;Fg=Y.stride;Y.stride=0;Gg=Y.type;Y.type=D.dtype;Hg=Y.w;Y.w=0;Ig=Y.x;Y.x=0;Jg=Y.y;Y.y=0;Kg=Y.z;Y.z=0;Lg=sa.buffer;sa.buffer=G;Mg=sa.divisor;sa.divisor=0;Ng=sa.normalized;sa.normalized=!1;Og=sa.offset;sa.offset=
0;Pg=sa.size;sa.size=0;Qg=sa.state;sa.state=1;Rg=sa.stride;sa.stride=0;Sg=sa.type;sa.type=G.dtype;Tg=sa.w;sa.w=0;Ug=sa.x;sa.x=0;Vg=sa.y;sa.y=0;Wg=sa.z;sa.z=0;Xg=Ka.buffer;Ka.buffer=C;Yg=Ka.divisor;Ka.divisor=0;Zg=Ka.normalized;Ka.normalized=!1;$g=Ka.offset;Ka.offset=0;ah=Ka.size;Ka.size=0;bh=Ka.state;Ka.state=1;ch=Ka.stride;Ka.stride=0;dh=Ka.type;Ka.type=C.dtype;eh=Ka.w;Ka.w=0;fh=Ka.x;Ka.x=0;gh=Ka.y;Ka.y=0;hh=Ka.z;Ka.z=0;ih=vb.buffer;vb.buffer=O;jh=vb.divisor;vb.divisor=0;kh=vb.normalized;vb.normalized=
!1;lh=vb.offset;vb.offset=0;mh=vb.size;vb.size=0;nh=vb.state;vb.state=1;oh=vb.stride;vb.stride=0;ph=vb.type;vb.type=O.dtype;qh=vb.w;vb.w=0;rh=vb.x;vb.x=0;sh=vb.y;vb.y=0;th=vb.z;vb.z=0;uh=ma.vert;ma.vert=2;vh=ma.frag;ma.frag=1;aa.dirty=!0;l(y,c,n);y.viewportWidth=ga;y.viewportHeight=H;Se[0]=W;Se[1]=M;Se[2]=K;Se[3]=L;Cb[0]=Q;Cb[1]=T;Cb[2]=ka;Cb[3]=U;rc.blend_enable=R;ce[0]=V;ce[1]=fa;de[0]=ia;de[1]=X;de[2]=ha;de[3]=ba;rc.cull_enable=wa;rc.cull_face=da;rc.depth_enable=ja;rc.depth_func=ta;rc.depth_mask=
pa;ge[0]=pc;ge[1]=bb;rc.dither=na;rc.lineWidth=Ua;Ke[0]=Gb;Ke[1]=Lb;Ke[2]=Ra;Ke[3]=ya;rc.scissor_enable=Ud;aa.profile=Da;E.offset=cb;E.count=oa;E.primitive=fd;h[24]=kc;h[3]=xb;h[5]=Ea;h[7]=Qa;h[9]=vd;h[4]=cd;h[6]=eb;h[8]=sc;h[10]=id;h[23]=Kc;h[12]=yd;h[14]=Kb;h[16]=wb;h[18]=Bb;h[11]=td;h[13]=ab;h[15]=qd;h[17]=nd;h[22]=Ba;h[25]=Ue;h[26]=Nb;h[19]=Xd;h[20]=Fd;h[21]=Ae;k.buffer=Cd;k.divisor=Ib;k.normalized=$e;k.offset=$a;k.size=Oa;k.state=yc;k.stride=Zd;k.type=qe;k.w=Ha;k.x=pb;k.y=ed;k.z=se;z.buffer=
Hc;z.divisor=Ga;z.normalized=Uc;z.offset=Yc;z.size=ac;z.state=cc;z.stride=Zb;z.type=Ja;z.w=ke;z.x=ue;z.y=fe;z.z=ee;q.buffer=be;q.divisor=ne;q.normalized=$d;q.offset=he;q.size=Bc;q.state=Vc;q.stride=oe;q.type=je;q.w=Ed;q.x=Md;q.y=Od;q.z=Pd;ca.buffer=ie;ca.divisor=Be;ca.normalized=ve;ca.offset=le;ca.size=Xe;ca.state=Me;ca.stride=He;ca.type=pe;ca.w=ye;ca.x=Ce;ca.y=De;ca.z=Ee;P.buffer=ze;P.divisor=Hd;P.normalized=Sd;P.offset=Yd;P.size=ae;P.state=Fe;P.stride=zd;P.type=Qd;P.w=we;P.x=Ge;P.y=ef;P.z=We;S.buffer=
Ne;S.divisor=Ie;S.normalized=Ve;S.offset=Re;S.size=Oe;S.state=Pe;S.stride=Rd;S.type=Wd;S.w=Qe;S.x=ff;S.y=kf;S.z=bf;t.buffer=gf;t.divisor=hf;t.normalized=jf;t.offset=pf;t.size=mf;t.state=qf;t.stride=Bf;t.type=Cf;t.w=Je;t.x=xe;t.y=nf;t.z=of;la.buffer=Df;la.divisor=Gf;la.normalized=Af;la.offset=Ef;la.size=Ff;la.state=vf;la.stride=wf;la.type=uf;la.w=xf;la.x=yf;la.y=If;la.z=Kf;N.buffer=Lf;N.divisor=Mf;N.normalized=sf;N.offset=Rf;N.size=Hf;N.state=tf;N.stride=dg;N.type=Sf;N.w=Tf;N.x=qg;N.y=cf;N.z=Ye;ea.buffer=
Nf;ea.divisor=Of;ea.normalized=eg;ea.offset=fg;ea.size=gg;ea.state=hg;ea.stride=ig;ea.type=Wf;ea.w=Uf;ea.x=Xf;ea.y=Yf;ea.z=Zf;d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;m.buffer=df;m.divisor=Ze;m.normalized=Pf;m.offset=Qf;m.size=kg;m.state=lg;m.stride=mg;m.type=ng;m.w=og;m.x=$f;m.y=Vf;m.z=ag;Y.buffer=bg;Y.divisor=cg;Y.normalized=pg;Y.offset=Cg;Y.size=Dg;Y.state=Eg;Y.stride=Fg;Y.type=Gg;Y.w=Hg;Y.x=Ig;Y.y=Jg;Y.z=Kg;sa.buffer=
Lg;sa.divisor=Mg;sa.normalized=Ng;sa.offset=Og;sa.size=Pg;sa.state=Qg;sa.stride=Rg;sa.type=Sg;sa.w=Tg;sa.x=Ug;sa.y=Vg;sa.z=Wg;Ka.buffer=Xg;Ka.divisor=Yg;Ka.normalized=Zg;Ka.offset=$g;Ka.size=ah;Ka.state=bh;Ka.stride=ch;Ka.type=dh;Ka.w=eh;Ka.x=fh;Ka.y=gh;Ka.z=hh;vb.buffer=ih;vb.divisor=jh;vb.normalized=kh;vb.offset=lh;vb.size=mh;vb.state=nh;vb.stride=oh;vb.type=ph;vb.w=qh;vb.x=rh;vb.y=sh;vb.z=th;ma.vert=uh;ma.frag=vh;aa.dirty=!0}}},$1:function(c,ga){var n,I,e,b,p,a,g,r,x,f,Z,w,D,G,C,O,u,R,B,k,z,q,
ca,P,S,t,la,N,ea,d;n=c.attributes;I=c.current;e=c.framebuffer;b=c.gl;p=c.next;a=c.vao;g=p.blend_color;r=I.blend_color;x=p.blend_equation;f=I.blend_equation;Z=p.blend_func;w=I.blend_func;D=p.colorMask;G=I.colorMask;C=p.depth_range;O=I.depth_range;u=p.polygonOffset_offset;R=I.polygonOffset_offset;B=p.sample_coverage;k=I.sample_coverage;z=p.scissor_box;q=I.scissor_box;ca=p.stencil_func;P=I.stencil_func;S=p.stencil_opBack;t=I.stencil_opBack;la=p.stencil_opFront;N=I.stencil_opFront;ea=p.viewport;d=I.viewport;
return{poll:function(){var a,c,n,ga,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha;I.dirty=!1;c=p.blend_enable;n=p.cull_enable;ga=p.depth_enable;vb=p.dither;Zb=p.polygonOffset_enable;ua=p.sample_alpha;Oa=p.sample_enable;X=p.scissor_enable;K=p.stencil_enable;M=p.cull_face;Q=I.cull_face;oa=p.depth_func;L=I.depth_func;ac=p.depth_mask;$a=I.depth_mask;T=p.frontFace;v=I.frontFace;ja=p.lineWidth;ba=I.lineWidth;Ba=p.stencil_mask;Ha=I.stencil_mask;a=e.next;a!==e.cur&&(a?b.bindFramebuffer(36160,a.framebuffer):
b.bindFramebuffer(36160,null),e.cur=a);c!==I.blend_enable&&(c?b.enable(3042):b.disable(3042),I.blend_enable=c);n!==I.cull_enable&&(n?b.enable(2884):b.disable(2884),I.cull_enable=n);ga!==I.depth_enable&&(ga?b.enable(2929):b.disable(2929),I.depth_enable=ga);vb!==I.dither&&(vb?b.enable(3024):b.disable(3024),I.dither=vb);Zb!==I.polygonOffset_enable&&(Zb?b.enable(32823):b.disable(32823),I.polygonOffset_enable=Zb);ua!==I.sample_alpha&&(ua?b.enable(32926):b.disable(32926),I.sample_alpha=ua);Oa!==I.sample_enable&&
(Oa?b.enable(32928):b.disable(32928),I.sample_enable=Oa);X!==I.scissor_enable&&(X?b.enable(3089):b.disable(3089),I.scissor_enable=X);K!==I.stencil_enable&&(K?b.enable(2960):b.disable(2960),I.stencil_enable=K);if(g[0]!==r[0]||g[1]!==r[1]||g[2]!==r[2]||g[3]!==r[3])b.blendColor(g[0],g[1],g[2],g[3]),r[0]=g[0],r[1]=g[1],r[2]=g[2],r[3]=g[3];if(x[0]!==f[0]||x[1]!==f[1])b.blendEquationSeparate(x[0],x[1]),f[0]=x[0],f[1]=x[1];if(Z[0]!==w[0]||Z[1]!==w[1]||Z[2]!==w[2]||Z[3]!==w[3])b.blendFuncSeparate(Z[0],Z[1],
Z[2],Z[3]),w[0]=Z[0],w[1]=Z[1],w[2]=Z[2],w[3]=Z[3];if(D[0]!==G[0]||D[1]!==G[1]||D[2]!==G[2]||D[3]!==G[3])b.colorMask(D[0],D[1],D[2],D[3]),G[0]=D[0],G[1]=D[1],G[2]=D[2],G[3]=D[3];M!==Q&&(b.cullFace(M),I.cull_face=M);oa!==L&&(b.depthFunc(oa),I.depth_func=oa);ac!==$a&&(b.depthMask(ac),I.depth_mask=ac);if(C[0]!==O[0]||C[1]!==O[1])b.depthRange(C[0],C[1]),O[0]=C[0],O[1]=C[1];T!==v&&(b.frontFace(T),I.frontFace=T);ja!==ba&&(b.lineWidth(ja),I.lineWidth=ja);if(u[0]!==R[0]||u[1]!==R[1])b.polygonOffset(u[0],
u[1]),R[0]=u[0],R[1]=u[1];if(B[0]!==k[0]||B[1]!==k[1])b.sampleCoverage(B[0],B[1]),k[0]=B[0],k[1]=B[1];if(z[0]!==q[0]||z[1]!==q[1]||z[2]!==q[2]||z[3]!==q[3])b.scissor(z[0],z[1],z[2],z[3]),q[0]=z[0],q[1]=z[1],q[2]=z[2],q[3]=z[3];if(ca[0]!==P[0]||ca[1]!==P[1]||ca[2]!==P[2])b.stencilFunc(ca[0],ca[1],ca[2]),P[0]=ca[0],P[1]=ca[1],P[2]=ca[2];Ba!==Ha&&(b.stencilMask(Ba),I.stencil_mask=Ba);if(S[0]!==t[0]||S[1]!==t[1]||S[2]!==t[2]||S[3]!==t[3])b.stencilOpSeparate(S[0],S[1],S[2],S[3]),t[0]=S[0],t[1]=S[1],t[2]=
S[2],t[3]=S[3];if(la[0]!==N[0]||la[1]!==N[1]||la[2]!==N[2]||la[3]!==N[3])b.stencilOpSeparate(la[0],la[1],la[2],la[3]),N[0]=la[0],N[1]=la[1],N[2]=la[2],N[3]=la[3];if(ea[0]!==d[0]||ea[1]!==d[1]||ea[2]!==d[2]||ea[3]!==d[3])b.viewport(ea[0],ea[1],ea[2],ea[3]),d[0]=ea[0],d[1]=ea[1],d[2]=ea[2],d[3]=ea[3]},refresh:function(){var c,Y,sa,Ka,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a;I.dirty=!1;Y=p.blend_enable;sa=p.cull_enable;Ka=p.depth_enable;vb=p.dither;Zb=p.polygonOffset_enable;ua=p.sample_alpha;Oa=p.sample_enable;
X=p.scissor_enable;K=p.stencil_enable;M=p.cull_face;Q=p.depth_func;oa=p.depth_mask;L=p.frontFace;ac=p.lineWidth;$a=p.stencil_mask;(c=e.next)?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null);e.cur=c;c=n[0];c.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(0,c.divisor);c=n[1];
c.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(1,c.divisor);c=n[2];c.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(2),b.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);
ga.vertexAttribDivisorANGLE(2,c.divisor);c=n[3];c.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(3,c.divisor);c=n[4];c.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(4),
b.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(4,c.divisor);c=n[5];c.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(5,c.divisor);c=n[6];c.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(6,c.size,c.type,c.normalized,
c.stride,c.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(6,c.divisor);c=n[7];c.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(7,c.divisor);c=n[8];c.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,c.buffer.buffer),
b.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(8,c.divisor);c=n[9];c.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(9,c.divisor);c=n[10];c.buffer?(b.enableVertexAttribArray(10),
b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(10,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(10,c.divisor);c=n[11];c.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(11,
c.divisor);c=n[12];c.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(12,c.divisor);c=n[13];c.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,
c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(13,c.divisor);c=n[14];c.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(14,c.divisor);c=n[15];c.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,c.buffer.buffer),b.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,
c.offset)):(b.disableVertexAttribArray(15),b.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(15,c.divisor);a.currentVAO=null;a.setVAO(a.targetVAO);Y?b.enable(3042):b.disable(3042);I.blend_enable=Y;sa?b.enable(2884):b.disable(2884);I.cull_enable=sa;Ka?b.enable(2929):b.disable(2929);I.depth_enable=Ka;vb?b.enable(3024):b.disable(3024);I.dither=vb;Zb?b.enable(32823):b.disable(32823);I.polygonOffset_enable=Zb;ua?b.enable(32926):b.disable(32926);I.sample_alpha=ua;Oa?b.enable(32928):
b.disable(32928);I.sample_enable=Oa;X?b.enable(3089):b.disable(3089);I.scissor_enable=X;K?b.enable(2960):b.disable(2960);I.stencil_enable=K;b.blendColor(g[0],g[1],g[2],g[3]);r[0]=g[0];r[1]=g[1];r[2]=g[2];r[3]=g[3];b.blendEquationSeparate(x[0],x[1]);f[0]=x[0];f[1]=x[1];b.blendFuncSeparate(Z[0],Z[1],Z[2],Z[3]);w[0]=Z[0];w[1]=Z[1];w[2]=Z[2];w[3]=Z[3];b.colorMask(D[0],D[1],D[2],D[3]);G[0]=D[0];G[1]=D[1];G[2]=D[2];G[3]=D[3];b.cullFace(M);I.cull_face=M;b.depthFunc(Q);I.depth_func=Q;b.depthMask(oa);I.depth_mask=
oa;b.depthRange(C[0],C[1]);O[0]=C[0];O[1]=C[1];b.frontFace(L);I.frontFace=L;b.lineWidth(ac);I.lineWidth=ac;b.polygonOffset(u[0],u[1]);R[0]=u[0];R[1]=u[1];b.sampleCoverage(B[0],B[1]);k[0]=B[0];k[1]=B[1];b.scissor(z[0],z[1],z[2],z[3]);q[0]=z[0];q[1]=z[1];q[2]=z[2];q[3]=z[3];b.stencilFunc(ca[0],ca[1],ca[2]);P[0]=ca[0];P[1]=ca[1];P[2]=ca[2];b.stencilMask($a);I.stencil_mask=$a;b.stencilOpSeparate(S[0],S[1],S[2],S[3]);t[0]=S[0];t[1]=S[1];t[2]=S[2];t[3]=S[3];b.stencilOpSeparate(la[0],la[1],la[2],la[3]);
N[0]=la[0];N[1]=la[1];N[2]=la[2];N[3]=la[3];b.viewport(ea[0],ea[1],ea[2],ea[3]);d[0]=ea[0];d[1]=ea[1];d[2]=ea[2];d[3]=ea[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(c,ga,n,I,e,b,p,a,g,r,x,f,Z,w,D,G,C,u,B,R,mc,k,z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a){var T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra,Ib,pc,yc,vd,zc,W,J,ia,Ca,wb,ab,Uc,H,A,ha,ta,V,fa,na,F,y,aa,E,wa,ka,l,
rc,ma,h,Lb,Cb;T=c.attributes;v=c.buffer;ja=c.context;ba=c.current;Ba=c.draw;Ha=c.elements;cc=c.extensions;Ga=c.framebuffer;U=c.gl;pb=c.isBufferArgs;da=c.next;ra=c.shader;Ib=c.uniforms;pc=c.vao;yc=da.blend_color;vd=ba.blend_color;zc=da.blend_equation;W=ba.blend_equation;J=da.blend_func;ia=ba.blend_func;Ca=da.colorMask;wb=ba.colorMask;ab=da.depth_range;Uc=ba.depth_range;H=da.polygonOffset_offset;A=ba.polygonOffset_offset;ha=da.sample_coverage;ta=ba.sample_coverage;V=da.scissor_box;fa=ba.scissor_box;
na=da.stencil_func;F=ba.stencil_func;y=da.stencil_opBack;aa=ba.stencil_opBack;E=da.stencil_opFront;wa=ba.stencil_opFront;ka=da.viewport;l=ba.viewport;rc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ma={};ma.buffer=n;ma.divisor=1;h={};h.buffer=I;h.divisor=1;Lb={};Lb.buffer=e;Lb.divisor=1;Cb={};Cb.buffer=b;Cb.divisor=1;return{batch:function(a,b){var c,e,g,k,p,q;c=Ga.next;c!==Ga.cur&&(c?U.bindFramebuffer(36160,c.framebuffer):U.bindFramebuffer(36160,null),
Ga.cur=c);if(ba.dirty){var r,n,x,z,J,D,I,G,C,u,O,ka,P,R,V,S,B,ca,ra,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,zc;r=da.dither;r!==ba.dither&&(r?U.enable(3024):U.disable(3024),ba.dither=r);n=da.depth_func;n!==ba.depth_func&&(U.depthFunc(n),ba.depth_func=n);x=ab[0];z=ab[1];if(x!==Uc[0]||z!==Uc[1])U.depthRange(x,z),Uc[0]=x,Uc[1]=z;J=da.depth_mask;J!==ba.depth_mask&&(U.depthMask(J),ba.depth_mask=J);D=Ca[0];I=Ca[1];G=Ca[2];C=Ca[3];if(D!==wb[0]||I!==wb[1]||G!==wb[2]||C!==wb[3])U.colorMask(D,I,G,C),wb[0]=D,
wb[1]=I,wb[2]=G,wb[3]=C;u=da.cull_enable;u!==ba.cull_enable&&(u?U.enable(2884):U.disable(2884),ba.cull_enable=u);O=da.cull_face;O!==ba.cull_face&&(U.cullFace(O),ba.cull_face=O);ka=da.frontFace;ka!==ba.frontFace&&(U.frontFace(ka),ba.frontFace=ka);P=da.lineWidth;P!==ba.lineWidth&&(U.lineWidth(P),ba.lineWidth=P);R=da.polygonOffset_enable;R!==ba.polygonOffset_enable&&(R?U.enable(32823):U.disable(32823),ba.polygonOffset_enable=R);V=H[0];S=H[1];if(V!==A[0]||S!==A[1])U.polygonOffset(V,S),A[0]=V,A[1]=S;B=
da.sample_alpha;B!==ba.sample_alpha&&(B?U.enable(32926):U.disable(32926),ba.sample_alpha=B);ca=da.sample_enable;ca!==ba.sample_enable&&(ca?U.enable(32928):U.disable(32928),ba.sample_enable=ca);ra=ha[0];sc=ha[1];if(ra!==ta[0]||sc!==ta[1])U.sampleCoverage(ra,sc),ta[0]=ra,ta[1]=sc;td=da.stencil_enable;td!==ba.stencil_enable&&(td?U.enable(2960):U.disable(2960),ba.stencil_enable=td);fd=da.stencil_mask;fd!==ba.stencil_mask&&(U.stencilMask(fd),ba.stencil_mask=fd);Nc=na[0];uc=na[1];bb=na[2];if(Nc!==F[0]||
uc!==F[1]||bb!==F[2])U.stencilFunc(Nc,uc,bb),F[0]=Nc,F[1]=uc,F[2]=bb;kc=E[0];Gb=E[1];tc=E[2];Ua=E[3];if(kc!==wa[0]||Gb!==wa[1]||tc!==wa[2]||Ua!==wa[3])U.stencilOpSeparate(kc,Gb,tc,Ua),wa[0]=kc,wa[1]=Gb,wa[2]=tc,wa[3]=Ua;Kc=y[0];dc=y[1];Zc=y[2];zc=y[3];if(Kc!==aa[0]||dc!==aa[1]||Zc!==aa[2]||zc!==aa[3])U.stencilOpSeparate(Kc,dc,Zc,zc),aa[0]=Kc,aa[1]=dc,aa[2]=Zc,aa[3]=zc}U.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;U.enable(3042);ba.blend_enable=!0;U.blendEquationSeparate(32774,32774);W[0]=
32774;W[1]=32774;U.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;U.disable(2929);ba.depth_enable=!1;U.enable(3089);ba.scissor_enable=!0;if(e=ba.profile)g=performance.now(),ga.count+=b;U.useProgram(t.program);k=cc.angle_instanced_arrays;var ld,Cc,bc,cb,Jb,Ma,xb,Ra;pc.setVAO(null);ld=vb.location;Cc=T[ld];Cc.buffer||U.enableVertexAttribArray(ld);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==f||!1!==Cc.normalized||0!==Cc.offset||24!==Cc.stride)U.bindBuffer(34962,f.buffer),U.vertexAttribPointer(ld,
2,5126,!1,24,0),Cc.type=5126,Cc.size=2,Cc.buffer=f,Cc.normalized=!1,Cc.offset=0,Cc.stride=24;0!==Cc.divisor&&(k.vertexAttribDivisorANGLE(ld,0),Cc.divisor=0);bc=ua.location;cb=T[bc];cb.buffer||U.enableVertexAttribArray(bc);if(5126!==cb.type||2!==cb.size||cb.buffer!==Z||!1!==cb.normalized||8!==cb.offset||24!==cb.stride)U.bindBuffer(34962,Z.buffer),U.vertexAttribPointer(bc,2,5126,!1,24,8),cb.type=5126,cb.size=2,cb.buffer=Z,cb.normalized=!1,cb.offset=8,cb.stride=24;0!==cb.divisor&&(k.vertexAttribDivisorANGLE(bc,
0),cb.divisor=0);Jb=Y.location;Ma=T[Jb];Ma.buffer||U.enableVertexAttribArray(Jb);if(5126!==Ma.type||2!==Ma.size||Ma.buffer!==w||!1!==Ma.normalized||16!==Ma.offset||24!==Ma.stride)U.bindBuffer(34962,w.buffer),U.vertexAttribPointer(Jb,2,5126,!1,24,16),Ma.type=5126,Ma.size=2,Ma.buffer=w,Ma.normalized=!1,Ma.offset=16,Ma.stride=24;0!==Ma.divisor&&(k.vertexAttribDivisorANGLE(Jb,0),Ma.divisor=0);(xb=Ba.elements)?U.bindBuffer(34963,xb.buffer.buffer):pc.currentVAO&&(xb=Ha.getElements(pc.currentVAO.elements))&&
U.bindBuffer(34963,xb.buffer.buffer);Ra=Ba.offset;for(p=0;p<b;++p){q=a[p];var pa,nd,ib,Ta,Kb,eb,Dc,Tb,Ib,lc,Ub,yc,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,Mc,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,mc,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,Ja,Ld,te,re,Vd,Gd,Dd,dd,Hc;pa=q.viewport;nd=pa.x|0;ib=pa.y|0;Ta="width"in pa?pa.width|0:ja.framebufferWidth-
nd;Kb="height"in pa?pa.height|0:ja.framebufferHeight-ib;eb=ja.viewportWidth;ja.viewportWidth=Ta;Dc=ja.viewportHeight;ja.viewportHeight=Kb;U.viewport(nd,ib,Ta,Kb);l[0]=nd;l[1]=ib;l[2]=Ta;l[3]=Kb;Tb=q.viewport;Ib=Tb.x|0;lc=Tb.y|0;Ub="width"in Tb?Tb.width|0:ja.framebufferWidth-Ib;yc="height"in Tb?Tb.height|0:ja.framebufferHeight-lc;U.scissor(Ib,lc,Ub,yc);fa[0]=Ib;fa[1]=lc;fa[2]=Ub;fa[3]=yc;Vb=la.call(this,ja,q,p);Lb.offset=Vb;Na=!1;qb=null;yb=0;jb=!1;qc=Pa=0;Wb=1;wd=0;fb=5126;lb=fc=Ic=nc=0;pb(Lb)?(Na=
!0,qb=v.createStream(34962,Lb),fb=qb.dtype):(qb=v.getBuffer(Lb))?fb=qb.dtype:"constant"in Lb?(Wb=2,"number"===typeof Lb.constant?(Ic=Lb.constant,fc=lb=nc=0):(Ic=0<Lb.constant.length?Lb.constant[0]:0,fc=1<Lb.constant.length?Lb.constant[1]:0,lb=2<Lb.constant.length?Lb.constant[2]:0,nc=3<Lb.constant.length?Lb.constant[3]:0)):(qb=pb(Lb.buffer)?v.createStream(34962,Lb.buffer):v.getBuffer(Lb.buffer),fb="type"in Lb?rc[Lb.type]:qb.dtype,jb=!!Lb.normalized,qc=Lb.size|0,Pa=Lb.offset|0,wd=Lb.stride|0,yb=Lb.divisor|
0);mb=K.location;qa=T[mb];if(1===Wb){qa.buffer||U.enableVertexAttribArray(mb);rb=qc||2;if(qa.type!==fb||qa.size!==rb||qa.buffer!==qb||qa.normalized!==jb||qa.offset!==Pa||qa.stride!==wd)U.bindBuffer(34962,qb.buffer),U.vertexAttribPointer(mb,rb,fb,jb,wd,Pa),qa.type=fb,qa.size=rb,qa.buffer=qb,qa.normalized=jb,qa.offset=Pa,qa.stride=wd;qa.divisor!==yb&&(k.vertexAttribDivisorANGLE(mb,yb),qa.divisor=yb)}else if(qa.buffer&&(U.disableVertexAttribArray(mb),qa.buffer=null),qa.x!==Ic||qa.y!==fc||qa.z!==lb||
qa.w!==nc)U.vertexAttrib4f(mb,Ic,fc,lb,nc),qa.x=Ic,qa.y=fc,qa.z=lb,qa.w=nc;va=N.call(this,ja,q,p);Cb.offset=va;Va=!1;db=null;za=0;gb=!1;Eb=Ia=0;Db=1;Sa=0;Lc=5126;xa=Xb=Za=Mb=0;pb(Cb)?(Va=!0,db=v.createStream(34962,Cb),Lc=db.dtype):(db=v.getBuffer(Cb))?Lc=db.dtype:"constant"in Cb?(Db=2,"number"===typeof Cb.constant?(Za=Cb.constant,Xb=xa=Mb=0):(Za=0<Cb.constant.length?Cb.constant[0]:0,Xb=1<Cb.constant.length?Cb.constant[1]:0,xa=2<Cb.constant.length?Cb.constant[2]:0,Mb=3<Cb.constant.length?Cb.constant[3]:
0)):(db=pb(Cb.buffer)?v.createStream(34962,Cb.buffer):v.getBuffer(Cb.buffer),Lc="type"in Cb?rc[Cb.type]:db.dtype,gb=!!Cb.normalized,Eb=Cb.size|0,Ia=Cb.offset|0,Sa=Cb.stride|0,za=Cb.divisor|0);Mc=M.location;La=T[Mc];if(1===Db){La.buffer||U.enableVertexAttribArray(Mc);Qb=Eb||2;if(La.type!==Lc||La.size!==Qb||La.buffer!==db||La.normalized!==gb||La.offset!==Ia||La.stride!==Sa)U.bindBuffer(34962,db.buffer),U.vertexAttribPointer(Mc,Qb,Lc,gb,Sa,Ia),La.type=Lc,La.size=Qb,La.buffer=db,La.normalized=gb,La.offset=
Ia,La.stride=Sa;La.divisor!==za&&(k.vertexAttribDivisorANGLE(Mc,za),La.divisor=za)}else if(La.buffer&&(U.disableVertexAttribArray(Mc),La.buffer=null),La.x!==Za||La.y!==Xb||La.z!==xa||La.w!==Mb)U.vertexAttrib4f(Mc,Za,Xb,xa,Mb),La.x=Za,La.y=Xb,La.z=xa,La.w=Mb;hb=ea.call(this,ja,q,p);h.offset=hb;kb=!1;ya=null;gc=0;Da=!1;tb=sb=0;Xa=1;Ya=0;oc=5126;Ob=Wa=wc=ad=0;pb(h)?(kb=!0,ya=v.createStream(34962,h),oc=ya.dtype):(ya=v.getBuffer(h))?oc=ya.dtype:"constant"in h?(Xa=2,"number"===typeof h.constant?(wc=h.constant,
Wa=Ob=ad=0):(wc=0<h.constant.length?h.constant[0]:0,Wa=1<h.constant.length?h.constant[1]:0,Ob=2<h.constant.length?h.constant[2]:0,ad=3<h.constant.length?h.constant[3]:0)):(ya=pb(h.buffer)?v.createStream(34962,h.buffer):v.getBuffer(h.buffer),oc="type"in h?rc[h.type]:ya.dtype,Da=!!h.normalized,tb=h.size|0,sb=h.offset|0,Ya=h.stride|0,gc=h.divisor|0);ud=Zb.location;Ea=T[ud];if(1===Xa){Ea.buffer||U.enableVertexAttribArray(ud);Ac=tb||4;if(Ea.type!==oc||Ea.size!==Ac||Ea.buffer!==ya||Ea.normalized!==Da||
Ea.offset!==sb||Ea.stride!==Ya)U.bindBuffer(34962,ya.buffer),U.vertexAttribPointer(ud,Ac,oc,Da,Ya,sb),Ea.type=oc,Ea.size=Ac,Ea.buffer=ya,Ea.normalized=Da,Ea.offset=sb,Ea.stride=Ya;Ea.divisor!==gc&&(k.vertexAttribDivisorANGLE(ud,gc),Ea.divisor=gc)}else if(Ea.buffer&&(U.disableVertexAttribArray(ud),Ea.buffer=null),Ea.x!==wc||Ea.y!==Wa||Ea.z!==Ob||Ea.w!==ad)U.vertexAttrib4f(ud,wc,Wa,Ob,ad),Ea.x=wc,Ea.y=Wa,Ea.z=Ob,Ea.w=ad;Qa=d.call(this,ja,q,p);ma.offset=Qa;Aa=!1;nb=null;zb=0;Fb=!1;xc=ub=0;Ab=1;jd=0;
vc=5126;bd=md=Oc=Jd=0;pb(ma)?(Aa=!0,nb=v.createStream(34962,ma),vc=nb.dtype):(nb=v.getBuffer(ma))?vc=nb.dtype:"constant"in ma?(Ab=2,"number"===typeof ma.constant?(Oc=ma.constant,md=bd=Jd=0):(Oc=0<ma.constant.length?ma.constant[0]:0,md=1<ma.constant.length?ma.constant[1]:0,bd=2<ma.constant.length?ma.constant[2]:0,Jd=3<ma.constant.length?ma.constant[3]:0)):(nb=pb(ma.buffer)?v.createStream(34962,ma.buffer):v.getBuffer(ma.buffer),vc="type"in ma?rc[ma.type]:nb.dtype,Fb=!!ma.normalized,xc=ma.size|0,ub=
ma.offset|0,jd=ma.stride|0,zb=ma.divisor|0);Yb=Ka.location;ec=T[Yb];if(1===Ab){ec.buffer||U.enableVertexAttribArray(Yb);Rb=xc||4;if(ec.type!==vc||ec.size!==Rb||ec.buffer!==nb||ec.normalized!==Fb||ec.offset!==ub||ec.stride!==jd)U.bindBuffer(34962,nb.buffer),U.vertexAttribPointer(Yb,Rb,vc,Fb,jd,ub),ec.type=vc,ec.size=Rb,ec.buffer=nb,ec.normalized=Fb,ec.offset=ub,ec.stride=jd;ec.divisor!==zb&&(k.vertexAttribDivisorANGLE(Yb,zb),ec.divisor=zb)}else if(ec.buffer&&(U.disableVertexAttribArray(Yb),ec.buffer=
null),ec.x!==Oc||ec.y!==md||ec.z!==bd||ec.w!==Jd)U.vertexAttrib4f(Yb,Oc,md,bd,Jd),ec.x=Oc,ec.y=md,ec.z=bd,ec.w=Jd;Fa=m.call(this,ja,q,p);$b=Fa[0];Bb=Fa[1];Sb=Fa[2];jc=Fa[3];p&&ob===$b&&Pb===Bb&&hc===Sb&&mc===jc||(ob=$b,Pb=Bb,hc=Sb,mc=jc,U.uniform4f($a.location,$b,Bb,Sb,jc));Ec=q.lineWidth;p&&Fc===Ec||(Fc=Ec,U.uniform1f(Oa.location,Ec));Gc=q.capSize;p&&Pc===Gc||(Pc=Gc,U.uniform1f(sa.location,Gc));$c=q.scale;Sc=$c[0];Nb=$c[1];p&&Qc===Sc&&Hb===Nb||(Qc=Sc,Hb=Nb,U.uniform2f(Q.location,Sc,Nb));Rc=q.scaleFract;
Jc=Rc[0];ic=Rc[1];p&&Tc===Jc&&Wc===ic||(Tc=Jc,Wc=ic,U.uniform2f(oa.location,Jc,ic));od=q.translate;gd=od[0];Xc=od[1];p&&Te===gd&&Ja===Xc||(Te=gd,Ja=Xc,U.uniform2f(L.location,gd,Xc));Ld=q.translateFract;te=Ld[0];Vd=Ld[1];p&&re===te&&Gd===Vd||(re=te,Gd=Vd,U.uniform2f(ac.location,te,Vd));Dd=q.opacity;p&&dd===Dd||(dd=Dd,U.uniform1f(X.location,Dd));Hc=q.count;0<Hc?xb?k.drawElementsInstancedANGLE(4,36,xb.type,Ra<<(xb.type-5121>>1),Hc):k.drawArraysInstancedANGLE(4,Ra,36,Hc):0>Hc&&(xb?U.drawElements(4,36,
xb.type,Ra<<(xb.type-5121>>1)):U.drawArrays(4,Ra,36));ja.viewportWidth=eb;ja.viewportHeight=Dc;Na&&v.destroyStream(qb);Va&&v.destroyStream(db);kb&&v.destroyStream(ya);Aa&&v.destroyStream(nb)}ba.dirty=!0;pc.setVAO(null);e&&(ga.cpuTime+=performance.now()-g)},draw:function(b){var d,c,e,k,m,q,n,t,z,J,I,G,C,u,N,O,ka,P,R,V,S,B,ca,ea,la,ra,sc,zc,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Ib,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,yc,lc,Ub,Mc,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,
Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,lf,La,Qb,hb,kb,ya,gc;d=Ga.next;d!==Ga.cur&&(d?U.bindFramebuffer(36160,d.framebuffer):U.bindFramebuffer(36160,null),Ga.cur=d);if(ba.dirty){var Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob;Da=da.dither;Da!==ba.dither&&(Da?U.enable(3024):U.disable(3024),ba.dither=Da);sb=da.depth_func;sb!==ba.depth_func&&(U.depthFunc(sb),ba.depth_func=sb);tb=ab[0];Xa=ab[1];if(tb!==Uc[0]||Xa!==Uc[1])U.depthRange(tb,Xa),Uc[0]=tb,Uc[1]=Xa;Ya=
da.depth_mask;Ya!==ba.depth_mask&&(U.depthMask(Ya),ba.depth_mask=Ya);oc=Ca[0];ad=Ca[1];wc=Ca[2];Wa=Ca[3];if(oc!==wb[0]||ad!==wb[1]||wc!==wb[2]||Wa!==wb[3])U.colorMask(oc,ad,wc,Wa),wb[0]=oc,wb[1]=ad,wb[2]=wc,wb[3]=Wa;Ob=da.cull_enable;Ob!==ba.cull_enable&&(Ob?U.enable(2884):U.disable(2884),ba.cull_enable=Ob);ud=da.cull_face;ud!==ba.cull_face&&(U.cullFace(ud),ba.cull_face=ud);Ea=da.frontFace;Ea!==ba.frontFace&&(U.frontFace(Ea),ba.frontFace=Ea);Ac=da.lineWidth;Ac!==ba.lineWidth&&(U.lineWidth(Ac),ba.lineWidth=
Ac);Qa=da.polygonOffset_enable;Qa!==ba.polygonOffset_enable&&(Qa?U.enable(32823):U.disable(32823),ba.polygonOffset_enable=Qa);Aa=H[0];nb=H[1];if(Aa!==A[0]||nb!==A[1])U.polygonOffset(Aa,nb),A[0]=Aa,A[1]=nb;zb=da.sample_alpha;zb!==ba.sample_alpha&&(zb?U.enable(32926):U.disable(32926),ba.sample_alpha=zb);Fb=da.sample_enable;Fb!==ba.sample_enable&&(Fb?U.enable(32928):U.disable(32928),ba.sample_enable=Fb);ub=ha[0];xc=ha[1];if(ub!==ta[0]||xc!==ta[1])U.sampleCoverage(ub,xc),ta[0]=ub,ta[1]=xc;Ab=da.stencil_enable;
Ab!==ba.stencil_enable&&(Ab?U.enable(2960):U.disable(2960),ba.stencil_enable=Ab);jd=da.stencil_mask;jd!==ba.stencil_mask&&(U.stencilMask(jd),ba.stencil_mask=jd);vc=na[0];Jd=na[1];Oc=na[2];if(vc!==F[0]||Jd!==F[1]||Oc!==F[2])U.stencilFunc(vc,Jd,Oc),F[0]=vc,F[1]=Jd,F[2]=Oc;md=E[0];bd=E[1];Yb=E[2];ec=E[3];if(md!==wa[0]||bd!==wa[1]||Yb!==wa[2]||ec!==wa[3])U.stencilOpSeparate(md,bd,Yb,ec),wa[0]=md,wa[1]=bd,wa[2]=Yb,wa[3]=ec;Rb=y[0];Fa=y[1];$b=y[2];ob=y[3];if(Rb!==aa[0]||Fa!==aa[1]||$b!==aa[2]||ob!==aa[3])U.stencilOpSeparate(Rb,
Fa,$b,ob),aa[0]=Rb,aa[1]=Fa,aa[2]=$b,aa[3]=ob}c=b.viewport;e=c.x|0;k=c.y|0;m="width"in c?c.width|0:ja.framebufferWidth-e;q="height"in c?c.height|0:ja.framebufferHeight-k;n=ja.viewportWidth;ja.viewportWidth=m;t=ja.viewportHeight;ja.viewportHeight=q;U.viewport(e,k,m,q);l[0]=e;l[1]=k;l[2]=m;l[3]=q;U.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;U.enable(3042);ba.blend_enable=!0;U.blendEquationSeparate(32774,32774);W[0]=32774;W[1]=32774;U.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=
773;ia[3]=1;U.disable(2929);ba.depth_enable=!1;z=b.viewport;J=z.x|0;I=z.y|0;G="width"in z?z.width|0:ja.framebufferWidth-J;C="height"in z?z.height|0:ja.framebufferHeight-I;U.scissor(J,I,G,C);fa[0]=J;fa[1]=I;fa[2]=G;fa[3]=C;U.enable(3089);ba.scissor_enable=!0;if(u=ba.profile)N=performance.now(),ga.count++;U.useProgram(p.program);O=cc.angle_instanced_arrays;pc.setVAO(null);ka=a.call(this,ja,b,0);Lb.offset=ka;P=!1;R=null;V=0;S=!1;ca=B=0;ea=1;la=0;ra=5126;Nc=fd=zc=sc=0;pb(Lb)?(P=!0,R=v.createStream(34962,
Lb),ra=R.dtype):(R=v.getBuffer(Lb))?ra=R.dtype:"constant"in Lb?(ea=2,"number"===typeof Lb.constant?(zc=Lb.constant,fd=Nc=sc=0):(zc=0<Lb.constant.length?Lb.constant[0]:0,fd=1<Lb.constant.length?Lb.constant[1]:0,Nc=2<Lb.constant.length?Lb.constant[2]:0,sc=3<Lb.constant.length?Lb.constant[3]:0)):(R=pb(Lb.buffer)?v.createStream(34962,Lb.buffer):v.getBuffer(Lb.buffer),ra="type"in Lb?rc[Lb.type]:R.dtype,S=!!Lb.normalized,ca=Lb.size|0,B=Lb.offset|0,la=Lb.stride|0,V=Lb.divisor|0);uc=K.location;bb=T[uc];if(1===
ea){bb.buffer||U.enableVertexAttribArray(uc);kc=ca||2;if(bb.type!==ra||bb.size!==kc||bb.buffer!==R||bb.normalized!==S||bb.offset!==B||bb.stride!==la)U.bindBuffer(34962,R.buffer),U.vertexAttribPointer(uc,kc,ra,S,la,B),bb.type=ra,bb.size=kc,bb.buffer=R,bb.normalized=S,bb.offset=B,bb.stride=la;bb.divisor!==V&&(O.vertexAttribDivisorANGLE(uc,V),bb.divisor=V)}else if(bb.buffer&&(U.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==zc||bb.y!==fd||bb.z!==Nc||bb.w!==sc)U.vertexAttrib4f(uc,zc,fd,Nc,sc),bb.x=
zc,bb.y=fd,bb.z=Nc,bb.w=sc;Gb=g.call(this,ja,b,0);Cb.offset=Gb;tc=!1;Ua=null;Kc=0;dc=!1;Ib=Zc=0;ld=1;Cc=0;bc=5126;xb=Ma=Jb=cb=0;pb(Cb)?(tc=!0,Ua=v.createStream(34962,Cb),bc=Ua.dtype):(Ua=v.getBuffer(Cb))?bc=Ua.dtype:"constant"in Cb?(ld=2,"number"===typeof Cb.constant?(Jb=Cb.constant,Ma=xb=cb=0):(Jb=0<Cb.constant.length?Cb.constant[0]:0,Ma=1<Cb.constant.length?Cb.constant[1]:0,xb=2<Cb.constant.length?Cb.constant[2]:0,cb=3<Cb.constant.length?Cb.constant[3]:0)):(Ua=pb(Cb.buffer)?v.createStream(34962,
Cb.buffer):v.getBuffer(Cb.buffer),bc="type"in Cb?rc[Cb.type]:Ua.dtype,dc=!!Cb.normalized,Ib=Cb.size|0,Zc=Cb.offset|0,Cc=Cb.stride|0,Kc=Cb.divisor|0);Ra=M.location;pa=T[Ra];if(1===ld){pa.buffer||U.enableVertexAttribArray(Ra);nd=Ib||2;if(pa.type!==bc||pa.size!==nd||pa.buffer!==Ua||pa.normalized!==dc||pa.offset!==Zc||pa.stride!==Cc)U.bindBuffer(34962,Ua.buffer),U.vertexAttribPointer(Ra,nd,bc,dc,Cc,Zc),pa.type=bc,pa.size=nd,pa.buffer=Ua,pa.normalized=dc,pa.offset=Zc,pa.stride=Cc;pa.divisor!==Kc&&(O.vertexAttribDivisorANGLE(Ra,
Kc),pa.divisor=Kc)}else if(pa.buffer&&(U.disableVertexAttribArray(Ra),pa.buffer=null),pa.x!==Jb||pa.y!==Ma||pa.z!==xb||pa.w!==cb)U.vertexAttrib4f(Ra,Jb,Ma,xb,cb),pa.x=Jb,pa.y=Ma,pa.z=xb,pa.w=cb;ib=r.call(this,ja,b,0);h.offset=ib;Ta=!1;Kb=null;eb=0;Dc=!1;yc=Tb=0;lc=1;Ub=0;Mc=5126;yb=qb=Na=Vb=0;pb(h)?(Ta=!0,Kb=v.createStream(34962,h),Mc=Kb.dtype):(Kb=v.getBuffer(h))?Mc=Kb.dtype:"constant"in h?(lc=2,"number"===typeof h.constant?(Na=h.constant,qb=yb=Vb=0):(Na=0<h.constant.length?h.constant[0]:0,qb=1<
h.constant.length?h.constant[1]:0,yb=2<h.constant.length?h.constant[2]:0,Vb=3<h.constant.length?h.constant[3]:0)):(Kb=pb(h.buffer)?v.createStream(34962,h.buffer):v.getBuffer(h.buffer),Mc="type"in h?rc[h.type]:Kb.dtype,Dc=!!h.normalized,yc=h.size|0,Tb=h.offset|0,Ub=h.stride|0,eb=h.divisor|0);jb=Zb.location;Pa=T[jb];if(1===lc){Pa.buffer||U.enableVertexAttribArray(jb);qc=yc||4;if(Pa.type!==Mc||Pa.size!==qc||Pa.buffer!==Kb||Pa.normalized!==Dc||Pa.offset!==Tb||Pa.stride!==Ub)U.bindBuffer(34962,Kb.buffer),
U.vertexAttribPointer(jb,qc,Mc,Dc,Ub,Tb),Pa.type=Mc,Pa.size=qc,Pa.buffer=Kb,Pa.normalized=Dc,Pa.offset=Tb,Pa.stride=Ub;Pa.divisor!==eb&&(O.vertexAttribDivisorANGLE(jb,eb),Pa.divisor=eb)}else if(Pa.buffer&&(U.disableVertexAttribArray(jb),Pa.buffer=null),Pa.x!==Na||Pa.y!==qb||Pa.z!==yb||Pa.w!==Vb)U.vertexAttrib4f(jb,Na,qb,yb,Vb),Pa.x=Na,Pa.y=qb,Pa.z=yb,Pa.w=Vb;Wb=x.call(this,ja,b,0);ma.offset=Wb;wd=!1;fb=null;nc=0;Ic=!1;lb=fc=0;mb=1;qa=0;rb=5126;za=db=Va=va=0;pb(ma)?(wd=!0,fb=v.createStream(34962,ma),
rb=fb.dtype):(fb=v.getBuffer(ma))?rb=fb.dtype:"constant"in ma?(mb=2,"number"===typeof ma.constant?(Va=ma.constant,db=za=va=0):(Va=0<ma.constant.length?ma.constant[0]:0,db=1<ma.constant.length?ma.constant[1]:0,za=2<ma.constant.length?ma.constant[2]:0,va=3<ma.constant.length?ma.constant[3]:0)):(fb=pb(ma.buffer)?v.createStream(34962,ma.buffer):v.getBuffer(ma.buffer),rb="type"in ma?rc[ma.type]:fb.dtype,Ic=!!ma.normalized,lb=ma.size|0,fc=ma.offset|0,qa=ma.stride|0,nc=ma.divisor|0);gb=Ka.location;Ia=T[gb];
if(1===mb){Ia.buffer||U.enableVertexAttribArray(gb);Eb=lb||4;if(Ia.type!==rb||Ia.size!==Eb||Ia.buffer!==fb||Ia.normalized!==Ic||Ia.offset!==fc||Ia.stride!==qa)U.bindBuffer(34962,fb.buffer),U.vertexAttribPointer(gb,Eb,rb,Ic,qa,fc),Ia.type=rb,Ia.size=Eb,Ia.buffer=fb,Ia.normalized=Ic,Ia.offset=fc,Ia.stride=qa;Ia.divisor!==nc&&(O.vertexAttribDivisorANGLE(gb,nc),Ia.divisor=nc)}else if(Ia.buffer&&(U.disableVertexAttribArray(gb),Ia.buffer=null),Ia.x!==Va||Ia.y!==db||Ia.z!==za||Ia.w!==va)U.vertexAttrib4f(gb,
Va,db,za,va),Ia.x=Va,Ia.y=db,Ia.z=za,Ia.w=va;Db=vb.location;Sa=T[Db];Sa.buffer||U.enableVertexAttribArray(Db);if(5126!==Sa.type||2!==Sa.size||Sa.buffer!==f||!1!==Sa.normalized||0!==Sa.offset||24!==Sa.stride)U.bindBuffer(34962,f.buffer),U.vertexAttribPointer(Db,2,5126,!1,24,0),Sa.type=5126,Sa.size=2,Sa.buffer=f,Sa.normalized=!1,Sa.offset=0,Sa.stride=24;0!==Sa.divisor&&(O.vertexAttribDivisorANGLE(Db,0),Sa.divisor=0);Lc=ua.location;Mb=T[Lc];Mb.buffer||U.enableVertexAttribArray(Lc);if(5126!==Mb.type||
2!==Mb.size||Mb.buffer!==Z||!1!==Mb.normalized||8!==Mb.offset||24!==Mb.stride)U.bindBuffer(34962,Z.buffer),U.vertexAttribPointer(Lc,2,5126,!1,24,8),Mb.type=5126,Mb.size=2,Mb.buffer=Z,Mb.normalized=!1,Mb.offset=8,Mb.stride=24;0!==Mb.divisor&&(O.vertexAttribDivisorANGLE(Lc,0),Mb.divisor=0);Za=Y.location;Xb=T[Za];Xb.buffer||U.enableVertexAttribArray(Za);if(5126!==Xb.type||2!==Xb.size||Xb.buffer!==w||!1!==Xb.normalized||16!==Xb.offset||24!==Xb.stride)U.bindBuffer(34962,w.buffer),U.vertexAttribPointer(Za,
2,5126,!1,24,16),Xb.type=5126,Xb.size=2,Xb.buffer=w,Xb.normalized=!1,Xb.offset=16,Xb.stride=24;0!==Xb.divisor&&(O.vertexAttribDivisorANGLE(Za,0),Xb.divisor=0);xa=D.call(this,ja,b,0);U.uniform4f($a.location,xa[0],xa[1],xa[2],xa[3]);U.uniform1f(Oa.location,b.lineWidth);U.uniform1f(sa.location,b.capSize);lf=b.scale;U.uniform2f(Q.location,lf[0],lf[1]);La=b.scaleFract;U.uniform2f(oa.location,La[0],La[1]);Qb=b.translate;U.uniform2f(L.location,Qb[0],Qb[1]);hb=b.translateFract;U.uniform2f(ac.location,hb[0],
hb[1]);U.uniform1f(X.location,b.opacity);(kb=Ba.elements)?U.bindBuffer(34963,kb.buffer.buffer):pc.currentVAO&&(kb=Ha.getElements(pc.currentVAO.elements))&&U.bindBuffer(34963,kb.buffer.buffer);ya=Ba.offset;gc=b.count;0<gc?kb?O.drawElementsInstancedANGLE(4,36,kb.type,ya<<(kb.type-5121>>1),gc):O.drawArraysInstancedANGLE(4,ya,36,gc):0>gc&&(kb?U.drawElements(4,36,kb.type,ya<<(kb.type-5121>>1)):U.drawArrays(4,ya,36));ba.dirty=!0;pc.setVAO(null);ja.viewportWidth=n;ja.viewportHeight=t;u&&(ga.cpuTime+=performance.now()-
N);P&&v.destroyStream(R);tc&&v.destroyStream(Ua);Ta&&v.destroyStream(Kb);wd&&v.destroyStream(fb)},scope:function(a,b,d){var c,e,g,l,p,m,r,n,x,t,y,A,D,E,F,aa,H,I,W,M,N,K,L,Q,T,U,fa,ia,X,ha,wa,Y,ta,pc,na,Ca,ea,la,oa,vd,bc,cb,Jb,Ma,xb,Ra,pa,ua,ib,Ta,sa,eb,wb,ab,$a,lc,Ub,Oa,Vb,Na,qb,yb,jb,Pa,Ka,Wb,Ha,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,vb,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,Ga,vc,Uc,Oc,ac,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,cc,
Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,Zb,Ld,Ja,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe,Me,He,pe,ye,Ce,De,Ee,ze,Hd;c=a.viewport;e=c.x|0;g=c.y|0;l="width"in c?c.width|0:ja.framebufferWidth-e;p="height"in c?c.height|0:ja.framebufferHeight-g;m=ja.viewportWidth;ja.viewportWidth=l;r=ja.viewportHeight;ja.viewportHeight=p;n=ka[0];ka[0]=e;x=ka[1];ka[1]=g;t=ka[2];ka[2]=l;y=ka[3];ka[3]=p;A=yc[0];yc[0]=0;D=yc[1];yc[1]=0;E=yc[2];yc[2]=
0;F=yc[3];yc[3]=0;aa=da.blend_enable;da.blend_enable=!0;H=zc[0];zc[0]=32774;I=zc[1];zc[1]=32774;W=J[0];J[0]=770;M=J[1];J[1]=771;N=J[2];J[2]=773;K=J[3];J[3]=1;L=da.depth_enable;da.depth_enable=!1;Q=a.viewport;T=Q.x|0;U=Q.y|0;fa="width"in Q?Q.width|0:ja.framebufferWidth-T;ia="height"in Q?Q.height|0:ja.framebufferHeight-U;X=V[0];V[0]=T;ha=V[1];V[1]=U;wa=V[2];V[2]=fa;Y=V[3];V[3]=ia;ta=da.scissor_enable;da.scissor_enable=!0;if(pc=ba.profile)na=performance.now(),ga.count++;Ca=Ba.count;Ba.count=36;ea=a.count;
la=Ba.instances;Ba.instances=ea;oa=Ba.primitive;Ba.primitive=4;vd=a.capSize;bc=Ib[5];Ib[5]=vd;cb=a.lineWidth;Jb=Ib[4];Ib[4]=cb;Ma=a.opacity;xb=Ib[10];Ib[10]=Ma;Ra=a.range;pa=Ib[18];Ib[18]=Ra;ua=a.scale;ib=Ib[6];Ib[6]=ua;Ta=a.scaleFract;sa=Ib[7];Ib[7]=Ta;eb=a.translate;wb=Ib[8];Ib[8]=eb;ab=a.translateFract;$a=Ib[9];Ib[9]=ab;lc=G.call(this,ja,a,d);Ub=Ib[3];Ib[3]=lc;Oa=C.buffer;C.buffer=w;Vb=C.divisor;C.divisor=0;Na=C.normalized;C.normalized=!1;qb=C.offset;C.offset=16;yb=C.size;C.size=0;jb=C.state;C.state=
1;Pa=C.stride;C.stride=24;Ka=C.type;C.type=5126;Wb=C.w;C.w=0;Ha=C.x;C.x=0;fb=C.y;C.y=0;nc=C.z;C.z=0;Ic=u.call(this,ja,a,d);ma.offset=Ic;fc=!1;lb=null;mb=0;qa=!1;va=rb=0;Va=1;db=0;za=5126;Db=Eb=Ia=gb=0;pb(ma)?(fc=!0,lb=v.createStream(34962,ma),za=lb.dtype):(lb=v.getBuffer(ma))?za=lb.dtype:"constant"in ma?(Va=2,"number"===typeof ma.constant?(Ia=ma.constant,Eb=Db=gb=0):(Ia=0<ma.constant.length?ma.constant[0]:0,Eb=1<ma.constant.length?ma.constant[1]:0,Db=2<ma.constant.length?ma.constant[2]:0,gb=3<ma.constant.length?
ma.constant[3]:0)):(lb=pb(ma.buffer)?v.createStream(34962,ma.buffer):v.getBuffer(ma.buffer),za="type"in ma?rc[ma.type]:lb.dtype,qa=!!ma.normalized,va=ma.size|0,rb=ma.offset|0,db=ma.stride|0,mb=ma.divisor|0);Sa=B.buffer;B.buffer=lb;Lc=B.divisor;B.divisor=mb;Mb=B.normalized;B.normalized=qa;Za=B.offset;B.offset=rb;Xb=B.size;B.size=va;xa=B.state;B.state=Va;vb=B.stride;B.stride=db;La=B.type;B.type=za;Qb=B.w;B.w=gb;hb=B.x;B.x=Ia;kb=B.y;B.y=Eb;ya=B.z;B.z=Db;gc=R.buffer;R.buffer=f;Da=R.divisor;R.divisor=
0;sb=R.normalized;R.normalized=!1;tb=R.offset;R.offset=0;Xa=R.size;R.size=0;Ya=R.state;R.state=1;oc=R.stride;R.stride=24;ad=R.type;R.type=5126;wc=R.w;R.w=0;Wa=R.x;R.x=0;Ob=R.y;R.y=0;ud=R.z;R.z=0;Ea=mc.call(this,ja,a,d);h.offset=Ea;Ac=!1;Qa=null;Aa=0;nb=!1;Fb=zb=0;ub=1;xc=0;Ab=5126;Oc=Uc=vc=Ga=0;pb(h)?(Ac=!0,Qa=v.createStream(34962,h),Ab=Qa.dtype):(Qa=v.getBuffer(h))?Ab=Qa.dtype:"constant"in h?(ub=2,"number"===typeof h.constant?(vc=h.constant,Uc=Oc=Ga=0):(vc=0<h.constant.length?h.constant[0]:0,Uc=
1<h.constant.length?h.constant[1]:0,Oc=2<h.constant.length?h.constant[2]:0,Ga=3<h.constant.length?h.constant[3]:0)):(Qa=pb(h.buffer)?v.createStream(34962,h.buffer):v.getBuffer(h.buffer),Ab="type"in h?rc[h.type]:Qa.dtype,nb=!!h.normalized,Fb=h.size|0,zb=h.offset|0,xc=h.stride|0,Aa=h.divisor|0);ac=k.buffer;k.buffer=Qa;bd=k.divisor;k.divisor=Aa;Yb=k.normalized;k.normalized=nb;ec=k.offset;k.offset=zb;Rb=k.size;k.size=Fb;Fa=k.state;k.state=ub;$b=k.stride;k.stride=xc;ob=k.type;k.type=Ab;Bb=k.w;k.w=Ga;Pb=
k.x;k.x=vc;Sb=k.y;k.y=Uc;hc=k.z;k.z=Oc;jc=z.buffer;z.buffer=Z;cc=z.divisor;z.divisor=0;Ec=z.normalized;z.normalized=!1;Fc=z.offset;z.offset=8;Gc=z.size;z.size=0;Pc=z.state;z.state=1;$c=z.stride;z.stride=24;Sc=z.type;z.type=5126;Qc=z.w;z.w=0;Nb=z.x;z.x=0;Hb=z.y;z.y=0;Rc=z.z;z.z=0;Jc=q.call(this,ja,a,d);Lb.offset=Jc;Tc=!1;ic=null;Wc=0;od=!1;Te=gd=0;Xc=1;Zb=0;Ld=5126;Gd=Vd=re=Ja=0;pb(Lb)?(Tc=!0,ic=v.createStream(34962,Lb),Ld=ic.dtype):(ic=v.getBuffer(Lb))?Ld=ic.dtype:"constant"in Lb?(Xc=2,"number"===
typeof Lb.constant?(re=Lb.constant,Vd=Gd=Ja=0):(re=0<Lb.constant.length?Lb.constant[0]:0,Vd=1<Lb.constant.length?Lb.constant[1]:0,Gd=2<Lb.constant.length?Lb.constant[2]:0,Ja=3<Lb.constant.length?Lb.constant[3]:0)):(ic=pb(Lb.buffer)?v.createStream(34962,Lb.buffer):v.getBuffer(Lb.buffer),Ld="type"in Lb?rc[Lb.type]:ic.dtype,od=!!Lb.normalized,Te=Lb.size|0,gd=Lb.offset|0,Zb=Lb.stride|0,Wc=Lb.divisor|0);Dd=ca.buffer;ca.buffer=ic;dd=ca.divisor;ca.divisor=Wc;Hc=ca.normalized;ca.normalized=od;pd=ca.offset;
ca.offset=gd;hd=ca.size;ca.size=Te;Yc=ca.state;ca.state=Xc;rd=ca.stride;ca.stride=Zb;Ad=ca.type;ca.type=Ld;Bd=ca.w;ca.w=Ja;Le=ca.x;ca.x=re;ke=ca.y;ca.y=Vd;ue=ca.z;ca.z=Gd;fe=P.call(this,ja,a,d);Cb.offset=fe;ee=!1;be=null;ne=0;$d=!1;Bc=he=0;Vc=1;oe=0;je=5126;Pd=Od=Md=Ed=0;pb(Cb)?(ee=!0,be=v.createStream(34962,Cb),je=be.dtype):(be=v.getBuffer(Cb))?je=be.dtype:"constant"in Cb?(Vc=2,"number"===typeof Cb.constant?(Md=Cb.constant,Od=Pd=Ed=0):(Md=0<Cb.constant.length?Cb.constant[0]:0,Od=1<Cb.constant.length?
Cb.constant[1]:0,Pd=2<Cb.constant.length?Cb.constant[2]:0,Ed=3<Cb.constant.length?Cb.constant[3]:0)):(be=pb(Cb.buffer)?v.createStream(34962,Cb.buffer):v.getBuffer(Cb.buffer),je="type"in Cb?rc[Cb.type]:be.dtype,$d=!!Cb.normalized,Bc=Cb.size|0,he=Cb.offset|0,oe=Cb.stride|0,ne=Cb.divisor|0);ie=S.buffer;S.buffer=be;Be=S.divisor;S.divisor=ne;ve=S.normalized;S.normalized=$d;le=S.offset;S.offset=he;Xe=S.size;S.size=Bc;Me=S.state;S.state=Vc;He=S.stride;S.stride=oe;pe=S.type;S.type=je;ye=S.w;S.w=Ed;Ce=S.x;
S.x=Md;De=S.y;S.y=Od;Ee=S.z;S.z=Pd;ze=ra.vert;ra.vert=2;Hd=ra.frag;ra.frag=1;ba.dirty=!0;b(ja,a,d);ja.viewportWidth=m;ja.viewportHeight=r;ka[0]=n;ka[1]=x;ka[2]=t;ka[3]=y;yc[0]=A;yc[1]=D;yc[2]=E;yc[3]=F;da.blend_enable=aa;zc[0]=H;zc[1]=I;J[0]=W;J[1]=M;J[2]=N;J[3]=K;da.depth_enable=L;V[0]=X;V[1]=ha;V[2]=wa;V[3]=Y;da.scissor_enable=ta;pc&&(ga.cpuTime+=performance.now()-na);Ba.count=Ca;Ba.instances=la;Ba.primitive=oa;Ib[5]=bc;Ib[4]=Jb;Ib[10]=xb;Ib[18]=pa;Ib[6]=ib;Ib[7]=sa;Ib[8]=wb;Ib[9]=$a;Ib[3]=Ub;C.buffer=
Oa;C.divisor=Vb;C.normalized=Na;C.offset=qb;C.size=yb;C.state=jb;C.stride=Pa;C.type=Ka;C.w=Wb;C.x=Ha;C.y=fb;C.z=nc;fc&&v.destroyStream(lb);B.buffer=Sa;B.divisor=Lc;B.normalized=Mb;B.offset=Za;B.size=Xb;B.state=xa;B.stride=vb;B.type=La;B.w=Qb;B.x=hb;B.y=kb;B.z=ya;R.buffer=gc;R.divisor=Da;R.normalized=sb;R.offset=tb;R.size=Xa;R.state=Ya;R.stride=oc;R.type=ad;R.w=wc;R.x=Wa;R.y=Ob;R.z=ud;Ac&&v.destroyStream(Qa);k.buffer=ac;k.divisor=bd;k.normalized=Yb;k.offset=ec;k.size=Rb;k.state=Fa;k.stride=$b;k.type=
ob;k.w=Bb;k.x=Pb;k.y=Sb;k.z=hc;z.buffer=jc;z.divisor=cc;z.normalized=Ec;z.offset=Fc;z.size=Gc;z.state=Pc;z.stride=$c;z.type=Sc;z.w=Qc;z.x=Nb;z.y=Hb;z.z=Rc;Tc&&v.destroyStream(ic);ca.buffer=Dd;ca.divisor=dd;ca.normalized=Hc;ca.offset=pd;ca.size=hd;ca.state=Yc;ca.stride=rd;ca.type=Ad;ca.w=Bd;ca.x=Le;ca.y=ke;ca.z=ue;ee&&v.destroyStream(be);S.buffer=ie;S.divisor=Be;S.normalized=ve;S.offset=le;S.size=Xe;S.state=Me;S.stride=He;S.type=pe;S.w=ye;S.x=Ce;S.y=De;S.z=Ee;ra.vert=ze;ra.frag=Hd;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(c,
ga,n,I,e,b,p,a,g,r,x,f,u,w,D,G,C,O,B,R,mc,k,z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb){var Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra,Ib,pc,yc,vd,zc,W,J,ia,Ca,wb,ab,Uc,H,A,ha,ta,V,fa,na,F,y;Zb=c.attributes;ua=c.buffer;Oa=c.context;X=c.current;K=c.draw;M=c.elements;Q=c.extensions;oa=c.framebuffer;L=c.gl;ac=c.isBufferArgs;$a=c.next;T=c.shader;v=c.uniforms;ja=c.vao;ba=$a.blend_color;Ba=X.blend_color;Ha=$a.blend_equation;cc=X.blend_equation;Ga=$a.blend_func;U=X.blend_func;pb=$a.colorMask;
da=X.colorMask;ra=$a.depth_range;Ib=X.depth_range;pc=$a.polygonOffset_offset;yc=X.polygonOffset_offset;vd=$a.sample_coverage;zc=X.sample_coverage;W=$a.scissor_box;J=X.scissor_box;ia=$a.stencil_func;Ca=X.stencil_func;wb=$a.stencil_opBack;ab=X.stencil_opBack;Uc=$a.stencil_opFront;H=X.stencil_opFront;A=$a.viewport;ha=X.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};na={divisor:1,
offset:16,stride:8};F={divisor:1,offset:16,stride:8};y={divisor:1,offset:0,stride:4};return{batch:function(a,c){var f,g,l,p,r,h;f=oa.next;f!==oa.cur&&(f?L.bindFramebuffer(36160,f.framebuffer):L.bindFramebuffer(36160,null),oa.cur=f);if(X.dirty){var n,x,v,w,A,D,u,I,G,C,W,T,Z,ba,Nd,Ke,Ha,$e,id,Ae,Td,Ud,Kd,Se,sd,kd,xd,qd,cd,sc,td,fd;n=$a.dither;n!==X.dither&&(n?L.enable(3024):L.disable(3024),X.dither=n);x=$a.depth_func;x!==X.depth_func&&(L.depthFunc(x),X.depth_func=x);v=ra[0];w=ra[1];if(v!==Ib[0]||w!==
Ib[1])L.depthRange(v,w),Ib[0]=v,Ib[1]=w;A=$a.depth_mask;A!==X.depth_mask&&(L.depthMask(A),X.depth_mask=A);D=pb[0];u=pb[1];I=pb[2];G=pb[3];if(D!==da[0]||u!==da[1]||I!==da[2]||G!==da[3])L.colorMask(D,u,I,G),da[0]=D,da[1]=u,da[2]=I,da[3]=G;C=$a.cull_enable;C!==X.cull_enable&&(C?L.enable(2884):L.disable(2884),X.cull_enable=C);W=$a.cull_face;W!==X.cull_face&&(L.cullFace(W),X.cull_face=W);T=$a.frontFace;T!==X.frontFace&&(L.frontFace(T),X.frontFace=T);Z=$a.lineWidth;Z!==X.lineWidth&&(L.lineWidth(Z),X.lineWidth=
Z);ba=$a.polygonOffset_enable;ba!==X.polygonOffset_enable&&(ba?L.enable(32823):L.disable(32823),X.polygonOffset_enable=ba);Nd=pc[0];Ke=pc[1];if(Nd!==yc[0]||Ke!==yc[1])L.polygonOffset(Nd,Ke),yc[0]=Nd,yc[1]=Ke;Ha=$a.sample_alpha;Ha!==X.sample_alpha&&(Ha?L.enable(32926):L.disable(32926),X.sample_alpha=Ha);$e=$a.sample_enable;$e!==X.sample_enable&&($e?L.enable(32928):L.disable(32928),X.sample_enable=$e);id=vd[0];Ae=vd[1];if(id!==zc[0]||Ae!==zc[1])L.sampleCoverage(id,Ae),zc[0]=id,zc[1]=Ae;Td=$a.stencil_mask;
Td!==X.stencil_mask&&(L.stencilMask(Td),X.stencil_mask=Td);Ud=ia[0];Kd=ia[1];Se=ia[2];if(Ud!==Ca[0]||Kd!==Ca[1]||Se!==Ca[2])L.stencilFunc(Ud,Kd,Se),Ca[0]=Ud,Ca[1]=Kd,Ca[2]=Se;sd=Uc[0];kd=Uc[1];xd=Uc[2];qd=Uc[3];if(sd!==H[0]||kd!==H[1]||xd!==H[2]||qd!==H[3])L.stencilOpSeparate(sd,kd,xd,qd),H[0]=sd,H[1]=kd,H[2]=xd,H[3]=qd;cd=wb[0];sc=wb[1];td=wb[2];fd=wb[3];if(cd!==ab[0]||sc!==ab[1]||td!==ab[2]||fd!==ab[3])L.stencilOpSeparate(cd,sc,td,fd),ab[0]=cd,ab[1]=sc,ab[2]=td,ab[3]=fd}L.blendColor(0,0,0,0);Ba[0]=
0;Ba[1]=0;Ba[2]=0;Ba[3]=0;L.enable(3042);X.blend_enable=!0;L.blendEquationSeparate(32774,32774);cc[0]=32774;cc[1]=32774;L.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;L.enable(3089);X.scissor_enable=!0;L.disable(2960);X.stencil_enable=!1;if(g=X.profile)l=performance.now(),ga.count+=c;L.useProgram(O.program);p=Q.angle_instanced_arrays;var Nc,uc,bb,kc,Gb;ja.setVAO(null);Nc=la.location;uc=Zb[Nc];uc.buffer||L.enableVertexAttribArray(Nc);if(5126!==uc.type||1!==uc.size||uc.buffer!==
e||!1!==uc.normalized||0!==uc.offset||8!==uc.stride)L.bindBuffer(34962,e.buffer),L.vertexAttribPointer(Nc,1,5126,!1,8,0),uc.type=5126,uc.size=1,uc.buffer=e,uc.normalized=!1,uc.offset=0,uc.stride=8;0!==uc.divisor&&(p.vertexAttribDivisorANGLE(Nc,0),uc.divisor=0);bb=N.location;kc=Zb[bb];kc.buffer||L.enableVertexAttribArray(bb);if(5126!==kc.type||1!==kc.size||kc.buffer!==b||!1!==kc.normalized||4!==kc.offset||8!==kc.stride)L.bindBuffer(34962,b.buffer),L.vertexAttribPointer(bb,1,5126,!1,8,4),kc.type=5126,
kc.size=1,kc.buffer=b,kc.normalized=!1,kc.offset=4,kc.stride=8;0!==kc.divisor&&(p.vertexAttribDivisorANGLE(bb,0),kc.divisor=0);(Gb=K.elements)?L.bindBuffer(34963,Gb.buffer.buffer):ja.currentVAO&&(Gb=M.getElements(ja.currentVAO.elements))&&L.bindBuffer(34963,Gb.buffer.buffer);for(r=0;r<c;++r){h=a[r];var tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,Ga,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,lf,La,Qb,hb,kb,ya,gc,Da,sb,
tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Ja,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,rf,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc;tc=h.viewport;Ua=tc.x|0;Kc=tc.y|0;dc="width"in tc?tc.width|0:Oa.framebufferWidth-Ua;Zc="height"in tc?tc.height|0:Oa.framebufferHeight-Kc;Cd=Oa.viewportWidth;Oa.viewportWidth=dc;ld=Oa.viewportHeight;Oa.viewportHeight=Zc;L.viewport(Ua,Kc,dc,Zc);ha[0]=Ua;ha[1]=Kc;ha[2]=dc;ha[3]=Zc;(Cc=B.call(this,Oa,h,
r))?L.enable(2929):L.disable(2929);X.depth_enable=Cc;bc=h.viewport;cb=bc.x|0;Jb=bc.y|0;Ma="width"in bc?bc.width|0:Oa.framebufferWidth-cb;xb="height"in bc?bc.height|0:Oa.framebufferHeight-Jb;L.scissor(cb,Jb,Ma,xb);J[0]=cb;J[1]=Jb;J[2]=Ma;J[3]=xb;V.buffer=h.positionBuffer;Ra=!1;pa=null;nd=0;ib=!1;Kb=Ta=0;eb=1;Dc=0;Tb=5126;me=Ub=lc=Ga=0;ac(V)?(Ra=!0,pa=ua.createStream(34962,V),Tb=pa.dtype):(pa=ua.getBuffer(V))?Tb=pa.dtype:"constant"in V?(eb=2,"number"===typeof V.constant?(lc=V.constant,Ub=me=Ga=0):(lc=
0<V.constant.length?V.constant[0]:0,Ub=1<V.constant.length?V.constant[1]:0,me=2<V.constant.length?V.constant[2]:0,Ga=3<V.constant.length?V.constant[3]:0)):(pa=ac(V.buffer)?ua.createStream(34962,V.buffer):ua.getBuffer(V.buffer),Tb="type"in V?ta[V.type]:pa.dtype,ib=!!V.normalized,Kb=V.size|0,Ta=V.offset|0,Dc=V.stride|0,nd=V.divisor|0);Vb=mc.location;Na=Zb[Vb];if(1===eb){Na.buffer||L.enableVertexAttribArray(Vb);qb=Kb||2;if(Na.type!==Tb||Na.size!==qb||Na.buffer!==pa||Na.normalized!==ib||Na.offset!==Ta||
Na.stride!==Dc)L.bindBuffer(34962,pa.buffer),L.vertexAttribPointer(Vb,qb,Tb,ib,Dc,Ta),Na.type=Tb,Na.size=qb,Na.buffer=pa,Na.normalized=ib,Na.offset=Ta,Na.stride=Dc;Na.divisor!==nd&&(p.vertexAttribDivisorANGLE(Vb,nd),Na.divisor=nd)}else if(Na.buffer&&(L.disableVertexAttribArray(Vb),Na.buffer=null),Na.x!==lc||Na.y!==Ub||Na.z!==me||Na.w!==Ga)L.vertexAttrib4f(Vb,lc,Ub,me,Ga),Na.x=lc,Na.y=Ub,Na.z=me,Na.w=Ga;na.buffer=h.positionBuffer;yb=!1;jb=null;Pa=0;qc=!1;wd=Wb=0;fb=1;nc=0;Ic=5126;qa=mb=lb=fc=0;ac(na)?
(yb=!0,jb=ua.createStream(34962,na),Ic=jb.dtype):(jb=ua.getBuffer(na))?Ic=jb.dtype:"constant"in na?(fb=2,"number"===typeof na.constant?(lb=na.constant,mb=qa=fc=0):(lb=0<na.constant.length?na.constant[0]:0,mb=1<na.constant.length?na.constant[1]:0,qa=2<na.constant.length?na.constant[2]:0,fc=3<na.constant.length?na.constant[3]:0)):(jb=ac(na.buffer)?ua.createStream(34962,na.buffer):ua.getBuffer(na.buffer),Ic="type"in na?ta[na.type]:jb.dtype,qc=!!na.normalized,wd=na.size|0,Wb=na.offset|0,nc=na.stride|
0,Pa=na.divisor|0);rb=z.location;va=Zb[rb];if(1===fb){va.buffer||L.enableVertexAttribArray(rb);Va=wd||2;if(va.type!==Ic||va.size!==Va||va.buffer!==jb||va.normalized!==qc||va.offset!==Wb||va.stride!==nc)L.bindBuffer(34962,jb.buffer),L.vertexAttribPointer(rb,Va,Ic,qc,nc,Wb),va.type=Ic,va.size=Va,va.buffer=jb,va.normalized=qc,va.offset=Wb,va.stride=nc;va.divisor!==Pa&&(p.vertexAttribDivisorANGLE(rb,Pa),va.divisor=Pa)}else if(va.buffer&&(L.disableVertexAttribArray(rb),va.buffer=null),va.x!==lb||va.y!==
mb||va.z!==qa||va.w!==fc)L.vertexAttrib4f(rb,lb,mb,qa,fc),va.x=lb,va.y=mb,va.z=qa,va.w=fc;fa.buffer=h.positionFractBuffer;db=!1;za=null;gb=0;Ia=!1;Db=Eb=0;Sa=1;Lc=0;Mb=5126;lf=xa=Xb=Za=0;ac(fa)?(db=!0,za=ua.createStream(34962,fa),Mb=za.dtype):(za=ua.getBuffer(fa))?Mb=za.dtype:"constant"in fa?(Sa=2,"number"===typeof fa.constant?(Xb=fa.constant,xa=lf=Za=0):(Xb=0<fa.constant.length?fa.constant[0]:0,xa=1<fa.constant.length?fa.constant[1]:0,lf=2<fa.constant.length?fa.constant[2]:0,Za=3<fa.constant.length?
fa.constant[3]:0)):(za=ac(fa.buffer)?ua.createStream(34962,fa.buffer):ua.getBuffer(fa.buffer),Mb="type"in fa?ta[fa.type]:za.dtype,Ia=!!fa.normalized,Db=fa.size|0,Eb=fa.offset|0,Lc=fa.stride|0,gb=fa.divisor|0);La=k.location;Qb=Zb[La];if(1===Sa){Qb.buffer||L.enableVertexAttribArray(La);hb=Db||2;if(Qb.type!==Mb||Qb.size!==hb||Qb.buffer!==za||Qb.normalized!==Ia||Qb.offset!==Eb||Qb.stride!==Lc)L.bindBuffer(34962,za.buffer),L.vertexAttribPointer(La,hb,Mb,Ia,Lc,Eb),Qb.type=Mb,Qb.size=hb,Qb.buffer=za,Qb.normalized=
Ia,Qb.offset=Eb,Qb.stride=Lc;Qb.divisor!==gb&&(p.vertexAttribDivisorANGLE(La,gb),Qb.divisor=gb)}else if(Qb.buffer&&(L.disableVertexAttribArray(La),Qb.buffer=null),Qb.x!==Xb||Qb.y!==xa||Qb.z!==lf||Qb.w!==Za)L.vertexAttrib4f(La,Xb,xa,lf,Za),Qb.x=Xb,Qb.y=xa,Qb.z=lf,Qb.w=Za;F.buffer=h.positionFractBuffer;kb=!1;ya=null;gc=0;Da=!1;tb=sb=0;Xa=1;Ya=0;oc=5126;Ob=Wa=wc=ad=0;ac(F)?(kb=!0,ya=ua.createStream(34962,F),oc=ya.dtype):(ya=ua.getBuffer(F))?oc=ya.dtype:"constant"in F?(Xa=2,"number"===typeof F.constant?
(wc=F.constant,Wa=Ob=ad=0):(wc=0<F.constant.length?F.constant[0]:0,Wa=1<F.constant.length?F.constant[1]:0,Ob=2<F.constant.length?F.constant[2]:0,ad=3<F.constant.length?F.constant[3]:0)):(ya=ac(F.buffer)?ua.createStream(34962,F.buffer):ua.getBuffer(F.buffer),oc="type"in F?ta[F.type]:ya.dtype,Da=!!F.normalized,tb=F.size|0,sb=F.offset|0,Ya=F.stride|0,gc=F.divisor|0);ud=q.location;Ea=Zb[ud];if(1===Xa){Ea.buffer||L.enableVertexAttribArray(ud);Ac=tb||2;if(Ea.type!==oc||Ea.size!==Ac||Ea.buffer!==ya||Ea.normalized!==
Da||Ea.offset!==sb||Ea.stride!==Ya)L.bindBuffer(34962,ya.buffer),L.vertexAttribPointer(ud,Ac,oc,Da,Ya,sb),Ea.type=oc,Ea.size=Ac,Ea.buffer=ya,Ea.normalized=Da,Ea.offset=sb,Ea.stride=Ya;Ea.divisor!==gc&&(p.vertexAttribDivisorANGLE(ud,gc),Ea.divisor=gc)}else if(Ea.buffer&&(L.disableVertexAttribArray(ud),Ea.buffer=null),Ea.x!==wc||Ea.y!==Wa||Ea.z!==Ob||Ea.w!==ad)L.vertexAttrib4f(ud,wc,Wa,Ob,ad),Ea.x=wc,Ea.y=Wa,Ea.z=Ob,Ea.w=ad;y.buffer=h.colorBuffer;Qa=!1;Aa=null;nb=0;zb=!1;ub=Fb=0;xc=1;Ab=0;jd=5126;md=
Oc=Jd=vc=0;ac(y)?(Qa=!0,Aa=ua.createStream(34962,y),jd=Aa.dtype):(Aa=ua.getBuffer(y))?jd=Aa.dtype:"constant"in y?(xc=2,"number"===typeof y.constant?(Jd=y.constant,Oc=md=vc=0):(Jd=0<y.constant.length?y.constant[0]:0,Oc=1<y.constant.length?y.constant[1]:0,md=2<y.constant.length?y.constant[2]:0,vc=3<y.constant.length?y.constant[3]:0)):(Aa=ac(y.buffer)?ua.createStream(34962,y.buffer):ua.getBuffer(y.buffer),jd="type"in y?ta[y.type]:Aa.dtype,zb=!!y.normalized,ub=y.size|0,Fb=y.offset|0,Ab=y.stride|0,nb=
y.divisor|0);bd=ca.location;Yb=Zb[bd];if(1===xc){Yb.buffer||L.enableVertexAttribArray(bd);ec=ub||4;if(Yb.type!==jd||Yb.size!==ec||Yb.buffer!==Aa||Yb.normalized!==zb||Yb.offset!==Fb||Yb.stride!==Ab)L.bindBuffer(34962,Aa.buffer),L.vertexAttribPointer(bd,ec,jd,zb,Ab,Fb),Yb.type=jd,Yb.size=ec,Yb.buffer=Aa,Yb.normalized=zb,Yb.offset=Fb,Yb.stride=Ab;Yb.divisor!==nb&&(p.vertexAttribDivisorANGLE(bd,nb),Yb.divisor=nb)}else if(Yb.buffer&&(L.disableVertexAttribArray(bd),Yb.buffer=null),Yb.x!==Jd||Yb.y!==Oc||
Yb.z!==md||Yb.w!==vc)L.vertexAttrib4f(bd,Jd,Oc,md,vc),Yb.x=Jd,Yb.y=Oc,Yb.z=md,Yb.w=vc;Rb=h.scale;Fa=Rb[0];ob=Rb[1];r&&$b===Fa&&Bb===ob||($b=Fa,Bb=ob,L.uniform2f(d.location,Fa,ob));Pb=h.scaleFract;Sb=Pb[0];jc=Pb[1];r&&hc===Sb&&Ja===jc||(hc=Sb,Ja=jc,L.uniform2f(m.location,Sb,jc));Ec=h.translate;Fc=Ec[0];Pc=Ec[1];r&&Gc===Fc&&$c===Pc||(Gc=Fc,$c=Pc,L.uniform2f(sa.location,Fc,Pc));Sc=h.translateFract;Qc=Sc[0];Hb=Sc[1];r&&Nb===Qc&&Rc===Hb||(Nb=Qc,Rc=Hb,L.uniform2f(Ka.location,Qc,Hb));Jc=h.thickness;r&&Tc===
Jc||(Tc=Jc,L.uniform1f(Y.location,Jc));ic=h.depth;r&&Wc===ic||(Wc=ic,L.uniform1f(t.location,ic));od=R.call(this,Oa,h,r);gd=od[0];Xc=od[1];Ld=od[2];re=od[3];r&&Te===gd&&rf===Xc&&te===Ld&&Vd===re||(Te=gd,rf=Xc,te=Ld,Vd=re,L.uniform4f(vb.location,gd,Xc,Ld,re));Gd=h.dashLength;r&&Dd===Gd||(Dd=Gd,L.uniform1f(P.location,Gd));dd=h.opacity;r&&Hc===dd||(Hc=dd,L.uniform1f(ea.location,dd));(pd=h.dashTexture)&&"framebuffer"===pd._reglType&&(pd=pd.color[0]);hd=pd._texture;L.uniform1i(S.location,hd.bind());Yc=
h.count;0<Yc?Gb?p.drawElementsInstancedANGLE(5,4,Gb.type,0<<(Gb.type-5121>>1),Yc):p.drawArraysInstancedANGLE(5,0,4,Yc):0>Yc&&(Gb?L.drawElements(5,4,Gb.type,0<<(Gb.type-5121>>1)):L.drawArrays(5,0,4));Oa.viewportWidth=Cd;Oa.viewportHeight=ld;Ra&&ua.destroyStream(pa);yb&&ua.destroyStream(jb);db&&ua.destroyStream(za);kb&&ua.destroyStream(ya);Qa&&ua.destroyStream(Aa);hd.unbind()}X.dirty=!0;ja.setVAO(null);g&&(ga.cpuTime+=performance.now()-l)},draw:function(a){var c,f,g,l,r,x,h,v,w,A,D,u,G,C,W,O,R,T,Z,
B,ba,Nd,Ke,Mc,Ha,id,Ae,Td,Ud,Kd,Ga,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,af,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,Ja,La,Qb,hb,kb,ya,gc,Da,sb;c=oa.next;c!==oa.cur&&(c?L.bindFramebuffer(36160,c.framebuffer):L.bindFramebuffer(36160,null),oa.cur=c);if(X.dirty){var tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb;tb=$a.dither;
tb!==X.dither&&(tb?L.enable(3024):L.disable(3024),X.dither=tb);Xa=$a.depth_func;Xa!==X.depth_func&&(L.depthFunc(Xa),X.depth_func=Xa);Ya=ra[0];oc=ra[1];if(Ya!==Ib[0]||oc!==Ib[1])L.depthRange(Ya,oc),Ib[0]=Ya,Ib[1]=oc;ad=$a.depth_mask;ad!==X.depth_mask&&(L.depthMask(ad),X.depth_mask=ad);wc=pb[0];Wa=pb[1];Ob=pb[2];ud=pb[3];if(wc!==da[0]||Wa!==da[1]||Ob!==da[2]||ud!==da[3])L.colorMask(wc,Wa,Ob,ud),da[0]=wc,da[1]=Wa,da[2]=Ob,da[3]=ud;Ea=$a.cull_enable;Ea!==X.cull_enable&&(Ea?L.enable(2884):L.disable(2884),
X.cull_enable=Ea);Ac=$a.cull_face;Ac!==X.cull_face&&(L.cullFace(Ac),X.cull_face=Ac);Qa=$a.frontFace;Qa!==X.frontFace&&(L.frontFace(Qa),X.frontFace=Qa);Aa=$a.lineWidth;Aa!==X.lineWidth&&(L.lineWidth(Aa),X.lineWidth=Aa);nb=$a.polygonOffset_enable;nb!==X.polygonOffset_enable&&(nb?L.enable(32823):L.disable(32823),X.polygonOffset_enable=nb);zb=pc[0];Fb=pc[1];if(zb!==yc[0]||Fb!==yc[1])L.polygonOffset(zb,Fb),yc[0]=zb,yc[1]=Fb;ub=$a.sample_alpha;ub!==X.sample_alpha&&(ub?L.enable(32926):L.disable(32926),X.sample_alpha=
ub);xc=$a.sample_enable;xc!==X.sample_enable&&(xc?L.enable(32928):L.disable(32928),X.sample_enable=xc);Ab=vd[0];jd=vd[1];if(Ab!==zc[0]||jd!==zc[1])L.sampleCoverage(Ab,jd),zc[0]=Ab,zc[1]=jd;vc=$a.stencil_mask;vc!==X.stencil_mask&&(L.stencilMask(vc),X.stencil_mask=vc);Jd=ia[0];Oc=ia[1];md=ia[2];if(Jd!==Ca[0]||Oc!==Ca[1]||md!==Ca[2])L.stencilFunc(Jd,Oc,md),Ca[0]=Jd,Ca[1]=Oc,Ca[2]=md;bd=Uc[0];Yb=Uc[1];ec=Uc[2];Rb=Uc[3];if(bd!==H[0]||Yb!==H[1]||ec!==H[2]||Rb!==H[3])L.stencilOpSeparate(bd,Yb,ec,Rb),H[0]=
bd,H[1]=Yb,H[2]=ec,H[3]=Rb;Fa=wb[0];$b=wb[1];ob=wb[2];Bb=wb[3];if(Fa!==ab[0]||$b!==ab[1]||ob!==ab[2]||Bb!==ab[3])L.stencilOpSeparate(Fa,$b,ob,Bb),ab[0]=Fa,ab[1]=$b,ab[2]=ob,ab[3]=Bb}f=a.viewport;g=f.x|0;l=f.y|0;r="width"in f?f.width|0:Oa.framebufferWidth-g;x="height"in f?f.height|0:Oa.framebufferHeight-l;h=Oa.viewportWidth;Oa.viewportWidth=r;v=Oa.viewportHeight;Oa.viewportHeight=x;L.viewport(g,l,r,x);ha[0]=g;ha[1]=l;ha[2]=r;ha[3]=x;L.blendColor(0,0,0,0);Ba[0]=0;Ba[1]=0;Ba[2]=0;Ba[3]=0;L.enable(3042);
X.blend_enable=!0;L.blendEquationSeparate(32774,32774);cc[0]=32774;cc[1]=32774;L.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;(w=n.call(this,Oa,a,0))?L.enable(2929):L.disable(2929);X.depth_enable=w;A=a.viewport;D=A.x|0;u=A.y|0;G="width"in A?A.width|0:Oa.framebufferWidth-D;C="height"in A?A.height|0:Oa.framebufferHeight-u;L.scissor(D,u,G,C);J[0]=D;J[1]=u;J[2]=G;J[3]=C;L.enable(3089);X.scissor_enable=!0;L.disable(2960);X.stencil_enable=!1;if(W=X.profile)O=performance.now(),ga.count++;
L.useProgram(I.program);R=Q.angle_instanced_arrays;ja.setVAO(null);V.buffer=a.positionBuffer;T=!1;Z=null;B=0;ba=!1;Ke=Nd=0;Mc=1;Ha=0;id=5126;Kd=Ud=Td=Ae=0;ac(V)?(T=!0,Z=ua.createStream(34962,V),id=Z.dtype):(Z=ua.getBuffer(V))?id=Z.dtype:"constant"in V?(Mc=2,"number"===typeof V.constant?(Td=V.constant,Ud=Kd=Ae=0):(Td=0<V.constant.length?V.constant[0]:0,Ud=1<V.constant.length?V.constant[1]:0,Kd=2<V.constant.length?V.constant[2]:0,Ae=3<V.constant.length?V.constant[3]:0)):(Z=ac(V.buffer)?ua.createStream(34962,
V.buffer):ua.getBuffer(V.buffer),id="type"in V?ta[V.type]:Z.dtype,ba=!!V.normalized,Ke=V.size|0,Nd=V.offset|0,Ha=V.stride|0,B=V.divisor|0);Ga=mc.location;sd=Zb[Ga];if(1===Mc){sd.buffer||L.enableVertexAttribArray(Ga);kd=Ke||2;if(sd.type!==id||sd.size!==kd||sd.buffer!==Z||sd.normalized!==ba||sd.offset!==Nd||sd.stride!==Ha)L.bindBuffer(34962,Z.buffer),L.vertexAttribPointer(Ga,kd,id,ba,Ha,Nd),sd.type=id,sd.size=kd,sd.buffer=Z,sd.normalized=ba,sd.offset=Nd,sd.stride=Ha;sd.divisor!==B&&(R.vertexAttribDivisorANGLE(Ga,
B),sd.divisor=B)}else if(sd.buffer&&(L.disableVertexAttribArray(Ga),sd.buffer=null),sd.x!==Td||sd.y!==Ud||sd.z!==Kd||sd.w!==Ae)L.vertexAttrib4f(Ga,Td,Ud,Kd,Ae),sd.x=Td,sd.y=Ud,sd.z=Kd,sd.w=Ae;na.buffer=a.positionBuffer;xd=!1;qd=null;cd=0;sc=!1;fd=td=0;Nc=1;uc=0;bb=5126;Ua=tc=Gb=kc=0;ac(na)?(xd=!0,qd=ua.createStream(34962,na),bb=qd.dtype):(qd=ua.getBuffer(na))?bb=qd.dtype:"constant"in na?(Nc=2,"number"===typeof na.constant?(Gb=na.constant,tc=Ua=kc=0):(Gb=0<na.constant.length?na.constant[0]:0,tc=1<
na.constant.length?na.constant[1]:0,Ua=2<na.constant.length?na.constant[2]:0,kc=3<na.constant.length?na.constant[3]:0)):(qd=ac(na.buffer)?ua.createStream(34962,na.buffer):ua.getBuffer(na.buffer),bb="type"in na?ta[na.type]:qd.dtype,sc=!!na.normalized,fd=na.size|0,td=na.offset|0,uc=na.stride|0,cd=na.divisor|0);Kc=z.location;dc=Zb[Kc];if(1===Nc){dc.buffer||L.enableVertexAttribArray(Kc);Zc=fd||2;if(dc.type!==bb||dc.size!==Zc||dc.buffer!==qd||dc.normalized!==sc||dc.offset!==td||dc.stride!==uc)L.bindBuffer(34962,
qd.buffer),L.vertexAttribPointer(Kc,Zc,bb,sc,uc,td),dc.type=bb,dc.size=Zc,dc.buffer=qd,dc.normalized=sc,dc.offset=td,dc.stride=uc;dc.divisor!==cd&&(R.vertexAttribDivisorANGLE(Kc,cd),dc.divisor=cd)}else if(dc.buffer&&(L.disableVertexAttribArray(Kc),dc.buffer=null),dc.x!==Gb||dc.y!==tc||dc.z!==Ua||dc.w!==kc)L.vertexAttrib4f(Kc,Gb,tc,Ua,kc),dc.x=Gb,dc.y=tc,dc.z=Ua,dc.w=kc;fa.buffer=a.positionFractBuffer;Cd=!1;ld=null;Cc=0;bc=!1;Jb=cb=0;Ma=1;xb=0;Ra=5126;Ta=ib=nd=pa=0;ac(fa)?(Cd=!0,ld=ua.createStream(34962,
fa),Ra=ld.dtype):(ld=ua.getBuffer(fa))?Ra=ld.dtype:"constant"in fa?(Ma=2,"number"===typeof fa.constant?(nd=fa.constant,ib=Ta=pa=0):(nd=0<fa.constant.length?fa.constant[0]:0,ib=1<fa.constant.length?fa.constant[1]:0,Ta=2<fa.constant.length?fa.constant[2]:0,pa=3<fa.constant.length?fa.constant[3]:0)):(ld=ac(fa.buffer)?ua.createStream(34962,fa.buffer):ua.getBuffer(fa.buffer),Ra="type"in fa?ta[fa.type]:ld.dtype,bc=!!fa.normalized,Jb=fa.size|0,cb=fa.offset|0,xb=fa.stride|0,Cc=fa.divisor|0);Kb=k.location;
eb=Zb[Kb];if(1===Ma){eb.buffer||L.enableVertexAttribArray(Kb);Dc=Jb||2;if(eb.type!==Ra||eb.size!==Dc||eb.buffer!==ld||eb.normalized!==bc||eb.offset!==cb||eb.stride!==xb)L.bindBuffer(34962,ld.buffer),L.vertexAttribPointer(Kb,Dc,Ra,bc,xb,cb),eb.type=Ra,eb.size=Dc,eb.buffer=ld,eb.normalized=bc,eb.offset=cb,eb.stride=xb;eb.divisor!==Cc&&(R.vertexAttribDivisorANGLE(Kb,Cc),eb.divisor=Cc)}else if(eb.buffer&&(L.disableVertexAttribArray(Kb),eb.buffer=null),eb.x!==nd||eb.y!==ib||eb.z!==Ta||eb.w!==pa)L.vertexAttrib4f(Kb,
nd,ib,Ta,pa),eb.x=nd,eb.y=ib,eb.z=Ta,eb.w=pa;F.buffer=a.positionFractBuffer;Tb=!1;af=null;lc=0;Ub=!1;Vb=me=0;Na=1;qb=0;yb=5126;Wb=qc=Pa=jb=0;ac(F)?(Tb=!0,af=ua.createStream(34962,F),yb=af.dtype):(af=ua.getBuffer(F))?yb=af.dtype:"constant"in F?(Na=2,"number"===typeof F.constant?(Pa=F.constant,qc=Wb=jb=0):(Pa=0<F.constant.length?F.constant[0]:0,qc=1<F.constant.length?F.constant[1]:0,Wb=2<F.constant.length?F.constant[2]:0,jb=3<F.constant.length?F.constant[3]:0)):(af=ac(F.buffer)?ua.createStream(34962,
F.buffer):ua.getBuffer(F.buffer),yb="type"in F?ta[F.type]:af.dtype,Ub=!!F.normalized,Vb=F.size|0,me=F.offset|0,qb=F.stride|0,lc=F.divisor|0);wd=q.location;fb=Zb[wd];if(1===Na){fb.buffer||L.enableVertexAttribArray(wd);nc=Vb||2;if(fb.type!==yb||fb.size!==nc||fb.buffer!==af||fb.normalized!==Ub||fb.offset!==me||fb.stride!==qb)L.bindBuffer(34962,af.buffer),L.vertexAttribPointer(wd,nc,yb,Ub,qb,me),fb.type=yb,fb.size=nc,fb.buffer=af,fb.normalized=Ub,fb.offset=me,fb.stride=qb;fb.divisor!==lc&&(R.vertexAttribDivisorANGLE(wd,
lc),fb.divisor=lc)}else if(fb.buffer&&(L.disableVertexAttribArray(wd),fb.buffer=null),fb.x!==Pa||fb.y!==qc||fb.z!==Wb||fb.w!==jb)L.vertexAttrib4f(wd,Pa,qc,Wb,jb),fb.x=Pa,fb.y=qc,fb.z=Wb,fb.w=jb;y.buffer=a.colorBuffer;Ic=!1;fc=null;lb=0;mb=!1;rb=qa=0;va=1;Va=0;db=5126;Eb=Ia=gb=za=0;ac(y)?(Ic=!0,fc=ua.createStream(34962,y),db=fc.dtype):(fc=ua.getBuffer(y))?db=fc.dtype:"constant"in y?(va=2,"number"===typeof y.constant?(gb=y.constant,Ia=Eb=za=0):(gb=0<y.constant.length?y.constant[0]:0,Ia=1<y.constant.length?
y.constant[1]:0,Eb=2<y.constant.length?y.constant[2]:0,za=3<y.constant.length?y.constant[3]:0)):(fc=ac(y.buffer)?ua.createStream(34962,y.buffer):ua.getBuffer(y.buffer),db="type"in y?ta[y.type]:fc.dtype,mb=!!y.normalized,rb=y.size|0,qa=y.offset|0,Va=y.stride|0,lb=y.divisor|0);Db=ca.location;Sa=Zb[Db];if(1===va){Sa.buffer||L.enableVertexAttribArray(Db);Lc=rb||4;if(Sa.type!==db||Sa.size!==Lc||Sa.buffer!==fc||Sa.normalized!==mb||Sa.offset!==qa||Sa.stride!==Va)L.bindBuffer(34962,fc.buffer),L.vertexAttribPointer(Db,
Lc,db,mb,Va,qa),Sa.type=db,Sa.size=Lc,Sa.buffer=fc,Sa.normalized=mb,Sa.offset=qa,Sa.stride=Va;Sa.divisor!==lb&&(R.vertexAttribDivisorANGLE(Db,lb),Sa.divisor=lb)}else if(Sa.buffer&&(L.disableVertexAttribArray(Db),Sa.buffer=null),Sa.x!==gb||Sa.y!==Ia||Sa.z!==Eb||Sa.w!==za)L.vertexAttrib4f(Db,gb,Ia,Eb,za),Sa.x=gb,Sa.y=Ia,Sa.z=Eb,Sa.w=za;Mb=la.location;Za=Zb[Mb];Za.buffer||L.enableVertexAttribArray(Mb);if(5126!==Za.type||1!==Za.size||Za.buffer!==e||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)L.bindBuffer(34962,
e.buffer),L.vertexAttribPointer(Mb,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=e,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(R.vertexAttribDivisorANGLE(Mb,0),Za.divisor=0);Xb=N.location;xa=Zb[Xb];xa.buffer||L.enableVertexAttribArray(Xb);if(5126!==xa.type||1!==xa.size||xa.buffer!==b||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)L.bindBuffer(34962,b.buffer),L.vertexAttribPointer(Xb,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=b,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&
(R.vertexAttribDivisorANGLE(Xb,0),xa.divisor=0);Ja=a.scale;L.uniform2f(d.location,Ja[0],Ja[1]);La=a.scaleFract;L.uniform2f(m.location,La[0],La[1]);Qb=a.translate;L.uniform2f(sa.location,Qb[0],Qb[1]);hb=a.translateFract;L.uniform2f(Ka.location,hb[0],hb[1]);L.uniform1f(Y.location,a.thickness);L.uniform1f(t.location,a.depth);kb=p.call(this,Oa,a,0);L.uniform4f(vb.location,kb[0],kb[1],kb[2],kb[3]);L.uniform1f(P.location,a.dashLength);L.uniform1f(ea.location,a.opacity);(ya=a.dashTexture)&&"framebuffer"===
ya._reglType&&(ya=ya.color[0]);gc=ya._texture;L.uniform1i(S.location,gc.bind());(Da=K.elements)?L.bindBuffer(34963,Da.buffer.buffer):ja.currentVAO&&(Da=M.getElements(ja.currentVAO.elements))&&L.bindBuffer(34963,Da.buffer.buffer);sb=a.count;0<sb?Da?R.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),sb):R.drawArraysInstancedANGLE(5,0,4,sb):0>sb&&(Da?L.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):L.drawArrays(5,0,4));X.dirty=!0;ja.setVAO(null);Oa.viewportWidth=h;Oa.viewportHeight=v;W&&(ga.cpuTime+=
performance.now()-O);T&&ua.destroyStream(Z);xd&&ua.destroyStream(qd);Cd&&ua.destroyStream(ld);Tb&&ua.destroyStream(af);Ic&&ua.destroyStream(fc);gc.unbind()},scope:function(d,c,k){var p,l,m,q,h,n,t,z,J,H,I,M,O,N,L,R,Q,P,U,S,B,ia,ca,ha,Y,da,ja,pc,Ca,ea,la,ra,oa,vd,sa,zc,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,wb,ab,Ib,Cc,bc,cb,Jb,Ma,xb,Ra,pa,Ba,ib,Ta,Kb,eb,Dc,Tb,yc,Mc,Ub,Ka,Vb,Na,qb,yb,jb,Pa,qc,Wb,pb,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,vb,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,
Wa,Ob,Uc,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Ja,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,cc,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,mc,Xc,Zb,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe,Me,He,pe,ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,Ne,Ie;p=d.viewport;l=p.x|0;m=p.y|0;q="width"in p?p.width|0:Oa.framebufferWidth-l;h="height"in p?p.height|0:Oa.framebufferHeight-m;n=Oa.viewportWidth;Oa.viewportWidth=q;t=Oa.viewportHeight;
Oa.viewportHeight=h;z=A[0];A[0]=l;J=A[1];A[1]=m;H=A[2];A[2]=q;I=A[3];A[3]=h;M=ba[0];ba[0]=0;O=ba[1];ba[1]=0;N=ba[2];ba[2]=0;L=ba[3];ba[3]=0;R=$a.blend_enable;$a.blend_enable=!0;Q=Ha[0];Ha[0]=32774;P=Ha[1];Ha[1]=32774;U=Ga[0];Ga[0]=770;S=Ga[1];Ga[1]=771;B=Ga[2];Ga[2]=773;ia=Ga[3];Ga[3]=1;ca=a.call(this,Oa,d,k);ha=$a.depth_enable;$a.depth_enable=ca;Y=d.viewport;da=Y.x|0;ja=Y.y|0;pc="width"in Y?Y.width|0:Oa.framebufferWidth-da;Ca="height"in Y?Y.height|0:Oa.framebufferHeight-ja;ea=W[0];W[0]=da;la=W[1];
W[1]=ja;ra=W[2];W[2]=pc;oa=W[3];W[3]=Ca;vd=$a.scissor_enable;$a.scissor_enable=!0;sa=$a.stencil_enable;$a.stencil_enable=!1;if(zc=X.profile)fd=performance.now(),ga.count++;Nc=K.offset;K.offset=0;uc=K.count;K.count=4;bb=d.count;kc=K.instances;K.instances=bb;Gb=K.primitive;K.primitive=5;tc=d.dashLength;Ua=v[23];v[23]=tc;Kc=d.dashTexture;dc=v[24];v[24]=Kc;wb=d.depth;ab=v[22];v[22]=wb;Ib=d.id;Cc=v[31];v[31]=Ib;bc=d.miterLimit;cb=v[32];v[32]=bc;Jb=g.call(this,Oa,d,k);Ma=v[33];v[33]=Jb;xb=d.opacity;Ra=
v[10];v[10]=xb;pa=Oa.pixelRatio;Ba=v[34];v[34]=pa;ib=d.scale;Ta=v[6];v[6]=ib;Kb=d.scaleFract;eb=v[7];v[7]=Kb;Dc=d.thickness;Tb=v[21];v[21]=Dc;yc=d.translate;Mc=v[8];v[8]=yc;Ub=d.translateFract;Ka=v[9];v[9]=Ub;Vb=r.call(this,Oa,d,k);Na=v[3];v[3]=Vb;V.buffer=d.positionBuffer;qb=!1;yb=null;jb=0;Pa=!1;Wb=qc=0;pb=1;fb=0;nc=5126;mb=lb=fc=Ic=0;ac(V)?(qb=!0,yb=ua.createStream(34962,V),nc=yb.dtype):(yb=ua.getBuffer(V))?nc=yb.dtype:"constant"in V?(pb=2,"number"===typeof V.constant?(fc=V.constant,lb=mb=Ic=0):
(fc=0<V.constant.length?V.constant[0]:0,lb=1<V.constant.length?V.constant[1]:0,mb=2<V.constant.length?V.constant[2]:0,Ic=3<V.constant.length?V.constant[3]:0)):(yb=ac(V.buffer)?ua.createStream(34962,V.buffer):ua.getBuffer(V.buffer),nc="type"in V?ta[V.type]:yb.dtype,Pa=!!V.normalized,Wb=V.size|0,qc=V.offset|0,fb=V.stride|0,jb=V.divisor|0);qa=x.buffer;x.buffer=yb;rb=x.divisor;x.divisor=jb;va=x.normalized;x.normalized=Pa;Va=x.offset;x.offset=qc;db=x.size;x.size=Wb;za=x.state;x.state=pb;gb=x.stride;x.stride=
fb;Ia=x.type;x.type=nc;Eb=x.w;x.w=Ic;Db=x.x;x.x=fc;Sa=x.y;x.y=lb;Lc=x.z;x.z=mb;fa.buffer=d.positionFractBuffer;Mb=!1;Za=null;Xb=0;xa=!1;La=vb=0;Qb=1;hb=0;kb=5126;sb=Da=gc=ya=0;ac(fa)?(Mb=!0,Za=ua.createStream(34962,fa),kb=Za.dtype):(Za=ua.getBuffer(fa))?kb=Za.dtype:"constant"in fa?(Qb=2,"number"===typeof fa.constant?(gc=fa.constant,Da=sb=ya=0):(gc=0<fa.constant.length?fa.constant[0]:0,Da=1<fa.constant.length?fa.constant[1]:0,sb=2<fa.constant.length?fa.constant[2]:0,ya=3<fa.constant.length?fa.constant[3]:
0)):(Za=ac(fa.buffer)?ua.createStream(34962,fa.buffer):ua.getBuffer(fa.buffer),kb="type"in fa?ta[fa.type]:Za.dtype,xa=!!fa.normalized,La=fa.size|0,vb=fa.offset|0,hb=fa.stride|0,Xb=fa.divisor|0);tb=f.buffer;f.buffer=Za;Xa=f.divisor;f.divisor=Xb;Ya=f.normalized;f.normalized=xa;oc=f.offset;f.offset=vb;ad=f.size;f.size=La;wc=f.state;f.state=Qb;Wa=f.stride;f.stride=hb;Ob=f.type;f.type=kb;Uc=f.w;f.w=ya;Ea=f.x;f.x=gc;Ac=f.y;f.y=Da;Qa=f.z;f.z=sb;na.buffer=d.positionBuffer;Aa=!1;nb=null;zb=0;Fb=!1;xc=ub=0;
Ab=1;jd=0;vc=5126;bd=md=Oc=Ja=0;ac(na)?(Aa=!0,nb=ua.createStream(34962,na),vc=nb.dtype):(nb=ua.getBuffer(na))?vc=nb.dtype:"constant"in na?(Ab=2,"number"===typeof na.constant?(Oc=na.constant,md=bd=Ja=0):(Oc=0<na.constant.length?na.constant[0]:0,md=1<na.constant.length?na.constant[1]:0,bd=2<na.constant.length?na.constant[2]:0,Ja=3<na.constant.length?na.constant[3]:0)):(nb=ac(na.buffer)?ua.createStream(34962,na.buffer):ua.getBuffer(na.buffer),vc="type"in na?ta[na.type]:nb.dtype,Fb=!!na.normalized,xc=
na.size|0,ub=na.offset|0,jd=na.stride|0,zb=na.divisor|0);Yb=u.buffer;u.buffer=nb;ec=u.divisor;u.divisor=zb;Rb=u.normalized;u.normalized=Fb;Fa=u.offset;u.offset=ub;$b=u.size;u.size=xc;ob=u.state;u.state=Ab;Bb=u.stride;u.stride=jd;Pb=u.type;u.type=vc;Sb=u.w;u.w=Ja;hc=u.x;u.x=Oc;jc=u.y;u.y=md;cc=u.z;u.z=bd;F.buffer=d.positionFractBuffer;Ec=!1;Fc=null;Gc=0;Pc=!1;Sc=$c=0;Qc=1;Nb=0;Hb=5126;ic=Tc=Jc=Rc=0;ac(F)?(Ec=!0,Fc=ua.createStream(34962,F),Hb=Fc.dtype):(Fc=ua.getBuffer(F))?Hb=Fc.dtype:"constant"in F?
(Qc=2,"number"===typeof F.constant?(Jc=F.constant,Tc=ic=Rc=0):(Jc=0<F.constant.length?F.constant[0]:0,Tc=1<F.constant.length?F.constant[1]:0,ic=2<F.constant.length?F.constant[2]:0,Rc=3<F.constant.length?F.constant[3]:0)):(Fc=ac(F.buffer)?ua.createStream(34962,F.buffer):ua.getBuffer(F.buffer),Hb="type"in F?ta[F.type]:Fc.dtype,Pc=!!F.normalized,Sc=F.size|0,$c=F.offset|0,Nb=F.stride|0,Gc=F.divisor|0);Wc=w.buffer;w.buffer=Fc;od=w.divisor;w.divisor=Gc;gd=w.normalized;w.normalized=Pc;mc=w.offset;w.offset=
$c;Xc=w.size;w.size=Sc;Zb=w.state;w.state=Qc;Ld=w.stride;w.stride=Nb;te=w.type;w.type=Hb;re=w.w;w.w=Rc;Vd=w.x;w.x=Jc;Gd=w.y;w.y=Tc;Dd=w.z;w.z=ic;y.buffer=d.colorBuffer;dd=!1;Hc=null;pd=0;hd=!1;rd=Yc=0;Ad=1;Bd=0;Le=5126;ee=fe=ue=ke=0;ac(y)?(dd=!0,Hc=ua.createStream(34962,y),Le=Hc.dtype):(Hc=ua.getBuffer(y))?Le=Hc.dtype:"constant"in y?(Ad=2,"number"===typeof y.constant?(ue=y.constant,fe=ee=ke=0):(ue=0<y.constant.length?y.constant[0]:0,fe=1<y.constant.length?y.constant[1]:0,ee=2<y.constant.length?y.constant[2]:
0,ke=3<y.constant.length?y.constant[3]:0)):(Hc=ac(y.buffer)?ua.createStream(34962,y.buffer):ua.getBuffer(y.buffer),Le="type"in y?ta[y.type]:Hc.dtype,hd=!!y.normalized,rd=y.size|0,Yc=y.offset|0,Bd=y.stride|0,pd=y.divisor|0);be=D.buffer;D.buffer=Hc;ne=D.divisor;D.divisor=pd;$d=D.normalized;D.normalized=hd;he=D.offset;D.offset=Yc;Bc=D.size;D.size=rd;Vc=D.state;D.state=Ad;oe=D.stride;D.stride=Bd;je=D.type;D.type=Le;Ed=D.w;D.w=ke;Md=D.x;D.x=ue;Od=D.y;D.y=fe;Pd=D.z;D.z=ee;ie=G.buffer;G.buffer=e;Be=G.divisor;
G.divisor=0;ve=G.normalized;G.normalized=!1;le=G.offset;G.offset=0;Xe=G.size;G.size=0;Me=G.state;G.state=1;He=G.stride;G.stride=8;pe=G.type;G.type=5126;ye=G.w;G.w=0;Ce=G.x;G.x=0;De=G.y;G.y=0;Ee=G.z;G.z=0;ze=C.buffer;C.buffer=b;Hd=C.divisor;C.divisor=0;Sd=C.normalized;C.normalized=!1;Yd=C.offset;C.offset=4;ae=C.size;C.size=0;Fe=C.state;C.state=1;zd=C.stride;C.stride=8;Qd=C.type;C.type=5126;we=C.w;C.w=0;Ge=C.x;C.x=0;ef=C.y;C.y=0;We=C.z;C.z=0;Ne=T.vert;T.vert=20;Ie=T.frag;T.frag=19;X.dirty=!0;c(Oa,d,
k);Oa.viewportWidth=n;Oa.viewportHeight=t;A[0]=z;A[1]=J;A[2]=H;A[3]=I;ba[0]=M;ba[1]=O;ba[2]=N;ba[3]=L;$a.blend_enable=R;Ha[0]=Q;Ha[1]=P;Ga[0]=U;Ga[1]=S;Ga[2]=B;Ga[3]=ia;$a.depth_enable=ha;W[0]=ea;W[1]=la;W[2]=ra;W[3]=oa;$a.scissor_enable=vd;$a.stencil_enable=sa;zc&&(ga.cpuTime+=performance.now()-fd);K.offset=Nc;K.count=uc;K.instances=kc;K.primitive=Gb;v[23]=Ua;v[24]=dc;v[22]=ab;v[31]=Cc;v[32]=cb;v[33]=Ma;v[10]=Ra;v[34]=Ba;v[6]=Ta;v[7]=eb;v[21]=Tb;v[8]=Mc;v[9]=Ka;v[3]=Na;qb&&ua.destroyStream(yb);x.buffer=
qa;x.divisor=rb;x.normalized=va;x.offset=Va;x.size=db;x.state=za;x.stride=gb;x.type=Ia;x.w=Eb;x.x=Db;x.y=Sa;x.z=Lc;Mb&&ua.destroyStream(Za);f.buffer=tb;f.divisor=Xa;f.normalized=Ya;f.offset=oc;f.size=ad;f.state=wc;f.stride=Wa;f.type=Ob;f.w=Uc;f.x=Ea;f.y=Ac;f.z=Qa;Aa&&ua.destroyStream(nb);u.buffer=Yb;u.divisor=ec;u.normalized=Rb;u.offset=Fa;u.size=$b;u.state=ob;u.stride=Bb;u.type=Pb;u.w=Sb;u.x=hc;u.y=jc;u.z=cc;Ec&&ua.destroyStream(Fc);w.buffer=Wc;w.divisor=od;w.normalized=gd;w.offset=mc;w.size=Xc;
w.state=Zb;w.stride=Ld;w.type=te;w.w=re;w.x=Vd;w.y=Gd;w.z=Dd;dd&&ua.destroyStream(Hc);D.buffer=be;D.divisor=ne;D.normalized=$d;D.offset=he;D.size=Bc;D.state=Vc;D.stride=oe;D.type=je;D.w=Ed;D.x=Md;D.y=Od;D.z=Pd;G.buffer=ie;G.divisor=Be;G.normalized=ve;G.offset=le;G.size=Xe;G.state=Me;G.stride=He;G.type=pe;G.w=ye;G.x=Ce;G.y=De;G.z=Ee;C.buffer=ze;C.divisor=Hd;C.normalized=Sd;C.offset=Yd;C.size=ae;C.state=Fe;C.stride=zd;C.type=Qd;C.w=we;C.x=Ge;C.y=ef;C.z=We;T.vert=Ne;T.frag=Ie;X.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(c,
u,n,I,e,b,p,a,g,r,x,f,Z,w,D,G,C,O,B,R,Ja,k,z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb,Zb,ua,Oa,X){var K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra,Ib,pc,yc,vd,zc,W,J,ia,Ca,wb,ab,Uc,H,A,ha,ta,V,fa,na,F,y,aa,E,wa,ka,l;K=c.attributes;M=c.buffer;Q=c.context;oa=c.current;L=c.draw;ac=c.elements;$a=c.extensions;T=c.framebuffer;v=c.gl;ja=c.isBufferArgs;ba=c.next;Ba=c.shader;Ha=c.uniforms;cc=c.vao;Ga=ba.blend_color;U=oa.blend_color;pb=ba.blend_equation;da=oa.blend_equation;ra=ba.blend_func;Ib=oa.blend_func;
pc=ba.colorMask;yc=oa.colorMask;vd=ba.depth_range;zc=oa.depth_range;W=ba.polygonOffset_offset;J=oa.polygonOffset_offset;ia=ba.sample_coverage;Ca=oa.sample_coverage;wb=ba.scissor_box;ab=oa.scissor_box;Uc=ba.stencil_func;H=oa.stencil_func;A=ba.stencil_opBack;ha=oa.stencil_opBack;ta=ba.stencil_opFront;V=oa.stencil_opFront;fa=ba.viewport;na=oa.viewport;F={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};y={divisor:1,offset:0,stride:4};aa={divisor:1,offset:8,
stride:8};E={divisor:1,offset:4,stride:4};wa={divisor:1,offset:16,stride:8};ka={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(a,c){var f,g,p,r,n,x;f=T.next;f!==T.cur&&(f?v.bindFramebuffer(36160,f.framebuffer):v.bindFramebuffer(36160,null),T.cur=f);if(oa.dirty){var w,D,I,G,C,O,B,Z,fa,ra,wb,Ba,Ha,id,Ga,Td,Ud,Kd,pb,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb;w=ba.dither;w!==oa.dither&&(w?v.enable(3024):v.disable(3024),oa.dither=w);D=ba.depth_func;D!==oa.depth_func&&(v.depthFunc(D),
oa.depth_func=D);I=vd[0];G=vd[1];if(I!==zc[0]||G!==zc[1])v.depthRange(I,G),zc[0]=I,zc[1]=G;C=ba.depth_mask;C!==oa.depth_mask&&(v.depthMask(C),oa.depth_mask=C);O=pc[0];B=pc[1];Z=pc[2];fa=pc[3];if(O!==yc[0]||B!==yc[1]||Z!==yc[2]||fa!==yc[3])v.colorMask(O,B,Z,fa),yc[0]=O,yc[1]=B,yc[2]=Z,yc[3]=fa;ra=ba.frontFace;ra!==oa.frontFace&&(v.frontFace(ra),oa.frontFace=ra);wb=ba.lineWidth;wb!==oa.lineWidth&&(v.lineWidth(wb),oa.lineWidth=wb);Ba=ba.polygonOffset_enable;Ba!==oa.polygonOffset_enable&&(Ba?v.enable(32823):
v.disable(32823),oa.polygonOffset_enable=Ba);Ha=W[0];id=W[1];if(Ha!==J[0]||id!==J[1])v.polygonOffset(Ha,id),J[0]=Ha,J[1]=id;Ga=ba.sample_alpha;Ga!==oa.sample_alpha&&(Ga?v.enable(32926):v.disable(32926),oa.sample_alpha=Ga);Td=ba.sample_enable;Td!==oa.sample_enable&&(Td?v.enable(32928):v.disable(32928),oa.sample_enable=Td);Ud=ia[0];Kd=ia[1];if(Ud!==Ca[0]||Kd!==Ca[1])v.sampleCoverage(Ud,Kd),Ca[0]=Ud,Ca[1]=Kd;pb=ba.stencil_mask;pb!==oa.stencil_mask&&(v.stencilMask(pb),oa.stencil_mask=pb);sd=Uc[0];kd=
Uc[1];xd=Uc[2];if(sd!==H[0]||kd!==H[1]||xd!==H[2])v.stencilFunc(sd,kd,xd),H[0]=sd,H[1]=kd,H[2]=xd;qd=ta[0];cd=ta[1];sc=ta[2];td=ta[3];if(qd!==V[0]||cd!==V[1]||sc!==V[2]||td!==V[3])v.stencilOpSeparate(qd,cd,sc,td),V[0]=qd,V[1]=cd,V[2]=sc,V[3]=td;fd=A[0];Nc=A[1];uc=A[2];bb=A[3];if(fd!==ha[0]||Nc!==ha[1]||uc!==ha[2]||bb!==ha[3])v.stencilOpSeparate(fd,Nc,uc,bb),ha[0]=fd,ha[1]=Nc,ha[2]=uc,ha[3]=bb}v.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;v.enable(3042);oa.blend_enable=!0;v.blendEquationSeparate(32774,
32774);da[0]=32774;da[1]=32774;v.blendFuncSeparate(770,771,773,1);Ib[0]=770;Ib[1]=771;Ib[2]=773;Ib[3]=1;v.enable(2884);oa.cull_enable=!0;v.cullFace(1029);oa.cull_face=1029;v.enable(3089);oa.scissor_enable=!0;v.disable(2960);oa.stencil_enable=!1;if(g=oa.profile)p=performance.now(),u.count+=c;v.useProgram(R.program);r=$a.angle_instanced_arrays;var kc,Gb,tc,Ua,Kc;cc.setVAO(null);kc=ea.location;Gb=K[kc];Gb.buffer||v.enableVertexAttribArray(kc);if(5126!==Gb.type||1!==Gb.size||Gb.buffer!==e||!1!==Gb.normalized||
0!==Gb.offset||8!==Gb.stride)v.bindBuffer(34962,e.buffer),v.vertexAttribPointer(kc,1,5126,!1,8,0),Gb.type=5126,Gb.size=1,Gb.buffer=e,Gb.normalized=!1,Gb.offset=0,Gb.stride=8;0!==Gb.divisor&&(r.vertexAttribDivisorANGLE(kc,0),Gb.divisor=0);tc=d.location;Ua=K[tc];Ua.buffer||v.enableVertexAttribArray(tc);if(5126!==Ua.type||1!==Ua.size||Ua.buffer!==b||!1!==Ua.normalized||4!==Ua.offset||8!==Ua.stride)v.bindBuffer(34962,b.buffer),v.vertexAttribPointer(tc,1,5126,!1,8,4),Ua.type=5126,Ua.size=1,Ua.buffer=b,
Ua.normalized=!1,Ua.offset=4,Ua.stride=8;0!==Ua.divisor&&(r.vertexAttribDivisorANGLE(tc,0),Ua.divisor=0);(Kc=L.elements)?v.bindBuffer(34963,Kc.buffer.buffer):cc.currentVAO&&(Kc=ac.getElements(cc.currentVAO.elements))&&v.bindBuffer(34963,Kc.buffer.buffer);for(n=0;n<c;++n){x=a[n];var dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,Mc,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,lf,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,
Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Jf,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,rf,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc;dc=x.viewport;Zc=dc.x|0;Cd=dc.y|0;ld="width"in dc?dc.width|0:Q.framebufferWidth-Zc;Cc="height"in dc?dc.height|0:Q.framebufferHeight-Cd;bc=Q.viewportWidth;Q.viewportWidth=ld;cb=Q.viewportHeight;Q.viewportHeight=Cc;v.viewport(Zc,Cd,ld,Cc);na[0]=Zc;na[1]=Cd;na[2]=ld;na[3]=Cc;(Jb=Ja.call(this,Q,
x,n))?v.enable(2929):v.disable(2929);oa.depth_enable=Jb;Ma=x.viewport;xb=Ma.x|0;Ra=Ma.y|0;pa="width"in Ma?Ma.width|0:Q.framebufferWidth-xb;nd="height"in Ma?Ma.height|0:Q.framebufferHeight-Ra;v.scissor(xb,Ra,pa,nd);ab[0]=xb;ab[1]=Ra;ab[2]=pa;ab[3]=nd;aa.buffer=x.positionBuffer;ib=!1;Ta=null;Kb=0;eb=!1;Tb=Dc=0;Mc=1;lc=0;Ub=5126;qb=Na=Vb=me=0;ja(aa)?(ib=!0,Ta=M.createStream(34962,aa),Ub=Ta.dtype):(Ta=M.getBuffer(aa))?Ub=Ta.dtype:"constant"in aa?(Mc=2,"number"===typeof aa.constant?(Vb=aa.constant,Na=
qb=me=0):(Vb=0<aa.constant.length?aa.constant[0]:0,Na=1<aa.constant.length?aa.constant[1]:0,qb=2<aa.constant.length?aa.constant[2]:0,me=3<aa.constant.length?aa.constant[3]:0)):(Ta=ja(aa.buffer)?M.createStream(34962,aa.buffer):M.getBuffer(aa.buffer),Ub="type"in aa?F[aa.type]:Ta.dtype,eb=!!aa.normalized,Tb=aa.size|0,Dc=aa.offset|0,lc=aa.stride|0,Kb=aa.divisor|0);yb=ca.location;jb=K[yb];if(1===Mc){jb.buffer||v.enableVertexAttribArray(yb);Pa=Tb||2;if(jb.type!==Ub||jb.size!==Pa||jb.buffer!==Ta||jb.normalized!==
eb||jb.offset!==Dc||jb.stride!==lc)v.bindBuffer(34962,Ta.buffer),v.vertexAttribPointer(yb,Pa,Ub,eb,lc,Dc),jb.type=Ub,jb.size=Pa,jb.buffer=Ta,jb.normalized=eb,jb.offset=Dc,jb.stride=lc;jb.divisor!==Kb&&(r.vertexAttribDivisorANGLE(yb,Kb),jb.divisor=Kb)}else if(jb.buffer&&(v.disableVertexAttribArray(yb),jb.buffer=null),jb.x!==Vb||jb.y!==Na||jb.z!==qb||jb.w!==me)v.vertexAttrib4f(yb,Vb,Na,qb,me),jb.x=Vb,jb.y=Na,jb.z=qb,jb.w=me;wa.buffer=x.positionBuffer;qc=!1;Wb=null;wd=0;fb=!1;Ic=nc=0;fc=1;lb=0;mb=5126;
Va=va=rb=qa=0;ja(wa)?(qc=!0,Wb=M.createStream(34962,wa),mb=Wb.dtype):(Wb=M.getBuffer(wa))?mb=Wb.dtype:"constant"in wa?(fc=2,"number"===typeof wa.constant?(rb=wa.constant,va=Va=qa=0):(rb=0<wa.constant.length?wa.constant[0]:0,va=1<wa.constant.length?wa.constant[1]:0,Va=2<wa.constant.length?wa.constant[2]:0,qa=3<wa.constant.length?wa.constant[3]:0)):(Wb=ja(wa.buffer)?M.createStream(34962,wa.buffer):M.getBuffer(wa.buffer),mb="type"in wa?F[wa.type]:Wb.dtype,fb=!!wa.normalized,Ic=wa.size|0,nc=wa.offset|
0,lb=wa.stride|0,wd=wa.divisor|0);db=S.location;za=K[db];if(1===fc){za.buffer||v.enableVertexAttribArray(db);gb=Ic||2;if(za.type!==mb||za.size!==gb||za.buffer!==Wb||za.normalized!==fb||za.offset!==nc||za.stride!==lb)v.bindBuffer(34962,Wb.buffer),v.vertexAttribPointer(db,gb,mb,fb,lb,nc),za.type=mb,za.size=gb,za.buffer=Wb,za.normalized=fb,za.offset=nc,za.stride=lb;za.divisor!==wd&&(r.vertexAttribDivisorANGLE(db,wd),za.divisor=wd)}else if(za.buffer&&(v.disableVertexAttribArray(db),za.buffer=null),za.x!==
rb||za.y!==va||za.z!==Va||za.w!==qa)v.vertexAttrib4f(db,rb,va,Va,qa),za.x=rb,za.y=va,za.z=Va,za.w=qa;ka.buffer=x.positionBuffer;Ia=!1;Eb=null;Db=0;Sa=!1;Mb=Lc=0;Za=1;Xb=0;xa=5126;hb=Qb=La=lf=0;ja(ka)?(Ia=!0,Eb=M.createStream(34962,ka),xa=Eb.dtype):(Eb=M.getBuffer(ka))?xa=Eb.dtype:"constant"in ka?(Za=2,"number"===typeof ka.constant?(La=ka.constant,Qb=hb=lf=0):(La=0<ka.constant.length?ka.constant[0]:0,Qb=1<ka.constant.length?ka.constant[1]:0,hb=2<ka.constant.length?ka.constant[2]:0,lf=3<ka.constant.length?
ka.constant[3]:0)):(Eb=ja(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),xa="type"in ka?F[ka.type]:Eb.dtype,Sa=!!ka.normalized,Mb=ka.size|0,Lc=ka.offset|0,Xb=ka.stride|0,Db=ka.divisor|0);kb=sa.location;ya=K[kb];if(1===Za){ya.buffer||v.enableVertexAttribArray(kb);gc=Mb||2;if(ya.type!==xa||ya.size!==gc||ya.buffer!==Eb||ya.normalized!==Sa||ya.offset!==Lc||ya.stride!==Xb)v.bindBuffer(34962,Eb.buffer),v.vertexAttribPointer(kb,gc,xa,Sa,Xb,Lc),ya.type=xa,ya.size=gc,ya.buffer=Eb,ya.normalized=
Sa,ya.offset=Lc,ya.stride=Xb;ya.divisor!==Db&&(r.vertexAttribDivisorANGLE(kb,Db),ya.divisor=Db)}else if(ya.buffer&&(v.disableVertexAttribArray(kb),ya.buffer=null),ya.x!==La||ya.y!==Qb||ya.z!==hb||ya.w!==lf)v.vertexAttrib4f(kb,La,Qb,hb,lf),ya.x=La,ya.y=Qb,ya.z=hb,ya.w=lf;l.buffer=x.positionBuffer;Da=!1;sb=null;tb=0;Xa=!1;oc=Ya=0;ad=1;wc=0;Wa=5126;Ac=Ea=ud=Ob=0;ja(l)?(Da=!0,sb=M.createStream(34962,l),Wa=sb.dtype):(sb=M.getBuffer(l))?Wa=sb.dtype:"constant"in l?(ad=2,"number"===typeof l.constant?(ud=
l.constant,Ea=Ac=Ob=0):(ud=0<l.constant.length?l.constant[0]:0,Ea=1<l.constant.length?l.constant[1]:0,Ac=2<l.constant.length?l.constant[2]:0,Ob=3<l.constant.length?l.constant[3]:0)):(sb=ja(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),Wa="type"in l?F[l.type]:sb.dtype,Xa=!!l.normalized,oc=l.size|0,Ya=l.offset|0,wc=l.stride|0,tb=l.divisor|0);Qa=vb.location;Aa=K[Qa];if(1===ad){Aa.buffer||v.enableVertexAttribArray(Qa);nb=oc||2;if(Aa.type!==Wa||Aa.size!==nb||Aa.buffer!==sb||Aa.normalized!==
Xa||Aa.offset!==Ya||Aa.stride!==wc)v.bindBuffer(34962,sb.buffer),v.vertexAttribPointer(Qa,nb,Wa,Xa,wc,Ya),Aa.type=Wa,Aa.size=nb,Aa.buffer=sb,Aa.normalized=Xa,Aa.offset=Ya,Aa.stride=wc;Aa.divisor!==tb&&(r.vertexAttribDivisorANGLE(Qa,tb),Aa.divisor=tb)}else if(Aa.buffer&&(v.disableVertexAttribArray(Qa),Aa.buffer=null),Aa.x!==ud||Aa.y!==Ea||Aa.z!==Ac||Aa.w!==Ob)v.vertexAttrib4f(Qa,ud,Ea,Ac,Ob),Aa.x=ud,Aa.y=Ea,Aa.z=Ac,Aa.w=Ob;y.buffer=x.colorBuffer;zb=!1;Fb=null;ub=0;xc=!1;jd=Ab=0;vc=1;Jd=0;Oc=5126;ec=
Yb=bd=md=0;ja(y)?(zb=!0,Fb=M.createStream(34962,y),Oc=Fb.dtype):(Fb=M.getBuffer(y))?Oc=Fb.dtype:"constant"in y?(vc=2,"number"===typeof y.constant?(bd=y.constant,Yb=ec=md=0):(bd=0<y.constant.length?y.constant[0]:0,Yb=1<y.constant.length?y.constant[1]:0,ec=2<y.constant.length?y.constant[2]:0,md=3<y.constant.length?y.constant[3]:0)):(Fb=ja(y.buffer)?M.createStream(34962,y.buffer):M.getBuffer(y.buffer),Oc="type"in y?F[y.type]:Fb.dtype,xc=!!y.normalized,jd=y.size|0,Ab=y.offset|0,Jd=y.stride|0,ub=y.divisor|
0);Rb=q.location;Fa=K[Rb];if(1===vc){Fa.buffer||v.enableVertexAttribArray(Rb);$b=jd||4;if(Fa.type!==Oc||Fa.size!==$b||Fa.buffer!==Fb||Fa.normalized!==xc||Fa.offset!==Ab||Fa.stride!==Jd)v.bindBuffer(34962,Fb.buffer),v.vertexAttribPointer(Rb,$b,Oc,xc,Jd,Ab),Fa.type=Oc,Fa.size=$b,Fa.buffer=Fb,Fa.normalized=xc,Fa.offset=Ab,Fa.stride=Jd;Fa.divisor!==ub&&(r.vertexAttribDivisorANGLE(Rb,ub),Fa.divisor=ub)}else if(Fa.buffer&&(v.disableVertexAttribArray(Rb),Fa.buffer=null),Fa.x!==bd||Fa.y!==Yb||Fa.z!==ec||
Fa.w!==md)v.vertexAttrib4f(Rb,bd,Yb,ec,md),Fa.x=bd,Fa.y=Yb,Fa.z=ec,Fa.w=md;E.buffer=x.colorBuffer;ob=!1;Bb=null;Pb=0;Sb=!1;jc=hc=0;Jf=1;Ec=0;Fc=5126;Sc=$c=Pc=Gc=0;ja(E)?(ob=!0,Bb=M.createStream(34962,E),Fc=Bb.dtype):(Bb=M.getBuffer(E))?Fc=Bb.dtype:"constant"in E?(Jf=2,"number"===typeof E.constant?(Pc=E.constant,$c=Sc=Gc=0):(Pc=0<E.constant.length?E.constant[0]:0,$c=1<E.constant.length?E.constant[1]:0,Sc=2<E.constant.length?E.constant[2]:0,Gc=3<E.constant.length?E.constant[3]:0)):(Bb=ja(E.buffer)?
M.createStream(34962,E.buffer):M.getBuffer(E.buffer),Fc="type"in E?F[E.type]:Bb.dtype,Sb=!!E.normalized,jc=E.size|0,hc=E.offset|0,Ec=E.stride|0,Pb=E.divisor|0);Qc=P.location;Nb=K[Qc];if(1===Jf){Nb.buffer||v.enableVertexAttribArray(Qc);Hb=jc||4;if(Nb.type!==Fc||Nb.size!==Hb||Nb.buffer!==Bb||Nb.normalized!==Sb||Nb.offset!==hc||Nb.stride!==Ec)v.bindBuffer(34962,Bb.buffer),v.vertexAttribPointer(Qc,Hb,Fc,Sb,Ec,hc),Nb.type=Fc,Nb.size=Hb,Nb.buffer=Bb,Nb.normalized=Sb,Nb.offset=hc,Nb.stride=Ec;Nb.divisor!==
Pb&&(r.vertexAttribDivisorANGLE(Qc,Pb),Nb.divisor=Pb)}else if(Nb.buffer&&(v.disableVertexAttribArray(Qc),Nb.buffer=null),Nb.x!==Pc||Nb.y!==$c||Nb.z!==Sc||Nb.w!==Gc)v.vertexAttrib4f(Qc,Pc,$c,Sc,Gc),Nb.x=Pc,Nb.y=$c,Nb.z=Sc,Nb.w=Gc;Rc=x.scale;Jc=Rc[0];ic=Rc[1];n&&Tc===Jc&&Wc===ic||(Tc=Jc,Wc=ic,v.uniform2f(Zb.location,Jc,ic));od=x.translate;gd=od[0];Xc=od[1];n&&Te===gd&&rf===Xc||(Te=gd,rf=Xc,v.uniform2f(Oa.location,gd,Xc));Ld=x.thickness;n&&te===Ld||(te=Ld,v.uniform1f(ua.location,Ld));re=x.depth;n&&Vd===
re||(Vd=re,v.uniform1f(N.location,re));Gd=k.call(this,Q,x,n);Dd=Gd[0];Hc=Gd[1];hd=Gd[2];rd=Gd[3];n&&dd===Dd&&pd===Hc&&Yc===hd&&Ad===rd||(dd=Dd,pd=Hc,Yc=hd,Ad=rd,v.uniform4f(X.location,Dd,Hc,hd,rd));Bd=x.miterLimit;n&&Le===Bd||(Le=Bd,v.uniform1f(m.location,Bd));ke=z.call(this,Q,x,n);n&&ue===ke||(ue=ke,v.uniform1f(Y.location,ke));fe=x.dashLength;n&&ee===fe||(ee=fe,v.uniform1f(t.location,fe));be=x.opacity;n&&ne===be||(ne=be,v.uniform1f(Ka.location,be));($d=x.dashTexture)&&"framebuffer"===$d._reglType&&
($d=$d.color[0]);he=$d._texture;v.uniform1i(la.location,he.bind());Bc=x.count;0<Bc?Kc?r.drawElementsInstancedANGLE(5,4,Kc.type,0<<(Kc.type-5121>>1),Bc):r.drawArraysInstancedANGLE(5,0,4,Bc):0>Bc&&(Kc?v.drawElements(5,4,Kc.type,0<<(Kc.type-5121>>1)):v.drawArrays(5,0,4));Q.viewportWidth=bc;Q.viewportHeight=cb;ib&&M.destroyStream(Ta);qc&&M.destroyStream(Wb);Ia&&M.destroyStream(Eb);Da&&M.destroyStream(sb);zb&&M.destroyStream(Fb);ob&&M.destroyStream(Bb);he.unbind()}oa.dirty=!0;cc.setVAO(null);g&&(u.cpuTime+=
performance.now()-p)},draw:function(c){var f,g,k,r,x,w,z,D,G,C,O,B,Z,R,fa,ra,wb,Ba,Ha,Ga,id,pb,Td,Ud,Kd,Ja,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,Mc,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,mc,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd;f=T.next;f!==T.cur&&(f?v.bindFramebuffer(36160,f.framebuffer):v.bindFramebuffer(36160,null),T.cur=
f);if(oa.dirty){var vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Jf,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic;vc=ba.dither;vc!==oa.dither&&(vc?v.enable(3024):v.disable(3024),oa.dither=vc);Jd=ba.depth_func;Jd!==oa.depth_func&&(v.depthFunc(Jd),oa.depth_func=Jd);Oc=vd[0];md=vd[1];if(Oc!==zc[0]||md!==zc[1])v.depthRange(Oc,md),zc[0]=Oc,zc[1]=md;bd=ba.depth_mask;bd!==oa.depth_mask&&(v.depthMask(bd),oa.depth_mask=bd);Yb=pc[0];ec=pc[1];Rb=pc[2];Fa=pc[3];if(Yb!==yc[0]||ec!==yc[1]||Rb!==yc[2]||Fa!==yc[3])v.colorMask(Yb,
ec,Rb,Fa),yc[0]=Yb,yc[1]=ec,yc[2]=Rb,yc[3]=Fa;$b=ba.frontFace;$b!==oa.frontFace&&(v.frontFace($b),oa.frontFace=$b);ob=ba.lineWidth;ob!==oa.lineWidth&&(v.lineWidth(ob),oa.lineWidth=ob);Bb=ba.polygonOffset_enable;Bb!==oa.polygonOffset_enable&&(Bb?v.enable(32823):v.disable(32823),oa.polygonOffset_enable=Bb);Pb=W[0];Sb=W[1];if(Pb!==J[0]||Sb!==J[1])v.polygonOffset(Pb,Sb),J[0]=Pb,J[1]=Sb;hc=ba.sample_alpha;hc!==oa.sample_alpha&&(hc?v.enable(32926):v.disable(32926),oa.sample_alpha=hc);jc=ba.sample_enable;
jc!==oa.sample_enable&&(jc?v.enable(32928):v.disable(32928),oa.sample_enable=jc);Jf=ia[0];Ec=ia[1];if(Jf!==Ca[0]||Ec!==Ca[1])v.sampleCoverage(Jf,Ec),Ca[0]=Jf,Ca[1]=Ec;Fc=ba.stencil_mask;Fc!==oa.stencil_mask&&(v.stencilMask(Fc),oa.stencil_mask=Fc);Gc=Uc[0];Pc=Uc[1];$c=Uc[2];if(Gc!==H[0]||Pc!==H[1]||$c!==H[2])v.stencilFunc(Gc,Pc,$c),H[0]=Gc,H[1]=Pc,H[2]=$c;Sc=ta[0];Qc=ta[1];Nb=ta[2];Hb=ta[3];if(Sc!==V[0]||Qc!==V[1]||Nb!==V[2]||Hb!==V[3])v.stencilOpSeparate(Sc,Qc,Nb,Hb),V[0]=Sc,V[1]=Qc,V[2]=Nb,V[3]=
Hb;Rc=A[0];Jc=A[1];Tc=A[2];ic=A[3];if(Rc!==ha[0]||Jc!==ha[1]||Tc!==ha[2]||ic!==ha[3])v.stencilOpSeparate(Rc,Jc,Tc,ic),ha[0]=Rc,ha[1]=Jc,ha[2]=Tc,ha[3]=ic}g=c.viewport;k=g.x|0;r=g.y|0;x="width"in g?g.width|0:Q.framebufferWidth-k;w="height"in g?g.height|0:Q.framebufferHeight-r;z=Q.viewportWidth;Q.viewportWidth=x;D=Q.viewportHeight;Q.viewportHeight=w;v.viewport(k,r,x,w);na[0]=k;na[1]=r;na[2]=x;na[3]=w;v.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;v.enable(3042);oa.blend_enable=!0;v.blendEquationSeparate(32774,
32774);da[0]=32774;da[1]=32774;v.blendFuncSeparate(770,771,773,1);Ib[0]=770;Ib[1]=771;Ib[2]=773;Ib[3]=1;v.enable(2884);oa.cull_enable=!0;v.cullFace(1029);oa.cull_face=1029;(G=n.call(this,Q,c,0))?v.enable(2929):v.disable(2929);oa.depth_enable=G;C=c.viewport;O=C.x|0;B=C.y|0;Z="width"in C?C.width|0:Q.framebufferWidth-O;R="height"in C?C.height|0:Q.framebufferHeight-B;v.scissor(O,B,Z,R);ab[0]=O;ab[1]=B;ab[2]=Z;ab[3]=R;v.enable(3089);oa.scissor_enable=!0;v.disable(2960);oa.stencil_enable=!1;if(fa=oa.profile)ra=
performance.now(),u.count++;v.useProgram(I.program);wb=$a.angle_instanced_arrays;cc.setVAO(null);aa.buffer=c.positionBuffer;Ba=!1;Ha=null;Ga=0;id=!1;Td=pb=0;Ud=1;Kd=0;Ja=5126;qd=xd=kd=sd=0;ja(aa)?(Ba=!0,Ha=M.createStream(34962,aa),Ja=Ha.dtype):(Ha=M.getBuffer(aa))?Ja=Ha.dtype:"constant"in aa?(Ud=2,"number"===typeof aa.constant?(kd=aa.constant,xd=qd=sd=0):(kd=0<aa.constant.length?aa.constant[0]:0,xd=1<aa.constant.length?aa.constant[1]:0,qd=2<aa.constant.length?aa.constant[2]:0,sd=3<aa.constant.length?
aa.constant[3]:0)):(Ha=ja(aa.buffer)?M.createStream(34962,aa.buffer):M.getBuffer(aa.buffer),Ja="type"in aa?F[aa.type]:Ha.dtype,id=!!aa.normalized,Td=aa.size|0,pb=aa.offset|0,Kd=aa.stride|0,Ga=aa.divisor|0);cd=ca.location;sc=K[cd];if(1===Ud){sc.buffer||v.enableVertexAttribArray(cd);td=Td||2;if(sc.type!==Ja||sc.size!==td||sc.buffer!==Ha||sc.normalized!==id||sc.offset!==pb||sc.stride!==Kd)v.bindBuffer(34962,Ha.buffer),v.vertexAttribPointer(cd,td,Ja,id,Kd,pb),sc.type=Ja,sc.size=td,sc.buffer=Ha,sc.normalized=
id,sc.offset=pb,sc.stride=Kd;sc.divisor!==Ga&&(wb.vertexAttribDivisorANGLE(cd,Ga),sc.divisor=Ga)}else if(sc.buffer&&(v.disableVertexAttribArray(cd),sc.buffer=null),sc.x!==kd||sc.y!==xd||sc.z!==qd||sc.w!==sd)v.vertexAttrib4f(cd,kd,xd,qd,sd),sc.x=kd,sc.y=xd,sc.z=qd,sc.w=sd;wa.buffer=c.positionBuffer;fd=!1;Nc=null;uc=0;bb=!1;Gb=kc=0;tc=1;Ua=0;Kc=5126;ld=Cd=Zc=dc=0;ja(wa)?(fd=!0,Nc=M.createStream(34962,wa),Kc=Nc.dtype):(Nc=M.getBuffer(wa))?Kc=Nc.dtype:"constant"in wa?(tc=2,"number"===typeof wa.constant?
(Zc=wa.constant,Cd=ld=dc=0):(Zc=0<wa.constant.length?wa.constant[0]:0,Cd=1<wa.constant.length?wa.constant[1]:0,ld=2<wa.constant.length?wa.constant[2]:0,dc=3<wa.constant.length?wa.constant[3]:0)):(Nc=ja(wa.buffer)?M.createStream(34962,wa.buffer):M.getBuffer(wa.buffer),Kc="type"in wa?F[wa.type]:Nc.dtype,bb=!!wa.normalized,Gb=wa.size|0,kc=wa.offset|0,Ua=wa.stride|0,uc=wa.divisor|0);Cc=S.location;bc=K[Cc];if(1===tc){bc.buffer||v.enableVertexAttribArray(Cc);cb=Gb||2;if(bc.type!==Kc||bc.size!==cb||bc.buffer!==
Nc||bc.normalized!==bb||bc.offset!==kc||bc.stride!==Ua)v.bindBuffer(34962,Nc.buffer),v.vertexAttribPointer(Cc,cb,Kc,bb,Ua,kc),bc.type=Kc,bc.size=cb,bc.buffer=Nc,bc.normalized=bb,bc.offset=kc,bc.stride=Ua;bc.divisor!==uc&&(wb.vertexAttribDivisorANGLE(Cc,uc),bc.divisor=uc)}else if(bc.buffer&&(v.disableVertexAttribArray(Cc),bc.buffer=null),bc.x!==Zc||bc.y!==Cd||bc.z!==ld||bc.w!==dc)v.vertexAttrib4f(Cc,Zc,Cd,ld,dc),bc.x=Zc,bc.y=Cd,bc.z=ld,bc.w=dc;ka.buffer=c.positionBuffer;Jb=!1;Ma=null;xb=0;Ra=!1;nd=
pa=0;ib=1;Ta=0;Kb=5126;Mc=Tb=Dc=eb=0;ja(ka)?(Jb=!0,Ma=M.createStream(34962,ka),Kb=Ma.dtype):(Ma=M.getBuffer(ka))?Kb=Ma.dtype:"constant"in ka?(ib=2,"number"===typeof ka.constant?(Dc=ka.constant,Tb=Mc=eb=0):(Dc=0<ka.constant.length?ka.constant[0]:0,Tb=1<ka.constant.length?ka.constant[1]:0,Mc=2<ka.constant.length?ka.constant[2]:0,eb=3<ka.constant.length?ka.constant[3]:0)):(Ma=ja(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),Kb="type"in ka?F[ka.type]:Ma.dtype,Ra=!!ka.normalized,nd=
ka.size|0,pa=ka.offset|0,Ta=ka.stride|0,xb=ka.divisor|0);lc=sa.location;Ub=K[lc];if(1===ib){Ub.buffer||v.enableVertexAttribArray(lc);me=nd||2;if(Ub.type!==Kb||Ub.size!==me||Ub.buffer!==Ma||Ub.normalized!==Ra||Ub.offset!==pa||Ub.stride!==Ta)v.bindBuffer(34962,Ma.buffer),v.vertexAttribPointer(lc,me,Kb,Ra,Ta,pa),Ub.type=Kb,Ub.size=me,Ub.buffer=Ma,Ub.normalized=Ra,Ub.offset=pa,Ub.stride=Ta;Ub.divisor!==xb&&(wb.vertexAttribDivisorANGLE(lc,xb),Ub.divisor=xb)}else if(Ub.buffer&&(v.disableVertexAttribArray(lc),
Ub.buffer=null),Ub.x!==Dc||Ub.y!==Tb||Ub.z!==Mc||Ub.w!==eb)v.vertexAttrib4f(lc,Dc,Tb,Mc,eb),Ub.x=Dc,Ub.y=Tb,Ub.z=Mc,Ub.w=eb;l.buffer=c.positionBuffer;Vb=!1;Na=null;qb=0;yb=!1;Pa=jb=0;qc=1;Wb=0;wd=5126;fc=Ic=nc=fb=0;ja(l)?(Vb=!0,Na=M.createStream(34962,l),wd=Na.dtype):(Na=M.getBuffer(l))?wd=Na.dtype:"constant"in l?(qc=2,"number"===typeof l.constant?(nc=l.constant,Ic=fc=fb=0):(nc=0<l.constant.length?l.constant[0]:0,Ic=1<l.constant.length?l.constant[1]:0,fc=2<l.constant.length?l.constant[2]:0,fb=3<l.constant.length?
l.constant[3]:0)):(Na=ja(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),wd="type"in l?F[l.type]:Na.dtype,yb=!!l.normalized,Pa=l.size|0,jb=l.offset|0,Wb=l.stride|0,qb=l.divisor|0);lb=vb.location;mb=K[lb];if(1===qc){mb.buffer||v.enableVertexAttribArray(lb);qa=Pa||2;if(mb.type!==wd||mb.size!==qa||mb.buffer!==Na||mb.normalized!==yb||mb.offset!==jb||mb.stride!==Wb)v.bindBuffer(34962,Na.buffer),v.vertexAttribPointer(lb,qa,wd,yb,Wb,jb),mb.type=wd,mb.size=qa,mb.buffer=Na,mb.normalized=yb,
mb.offset=jb,mb.stride=Wb;mb.divisor!==qb&&(wb.vertexAttribDivisorANGLE(lb,qb),mb.divisor=qb)}else if(mb.buffer&&(v.disableVertexAttribArray(lb),mb.buffer=null),mb.x!==nc||mb.y!==Ic||mb.z!==fc||mb.w!==fb)v.vertexAttrib4f(lb,nc,Ic,fc,fb),mb.x=nc,mb.y=Ic,mb.z=fc,mb.w=fb;y.buffer=c.colorBuffer;rb=!1;va=null;Va=0;db=!1;gb=za=0;Ia=1;Eb=0;Db=5126;Za=Mb=Lc=Sa=0;ja(y)?(rb=!0,va=M.createStream(34962,y),Db=va.dtype):(va=M.getBuffer(y))?Db=va.dtype:"constant"in y?(Ia=2,"number"===typeof y.constant?(Lc=y.constant,
Mb=Za=Sa=0):(Lc=0<y.constant.length?y.constant[0]:0,Mb=1<y.constant.length?y.constant[1]:0,Za=2<y.constant.length?y.constant[2]:0,Sa=3<y.constant.length?y.constant[3]:0)):(va=ja(y.buffer)?M.createStream(34962,y.buffer):M.getBuffer(y.buffer),Db="type"in y?F[y.type]:va.dtype,db=!!y.normalized,gb=y.size|0,za=y.offset|0,Eb=y.stride|0,Va=y.divisor|0);Xb=q.location;xa=K[Xb];if(1===Ia){xa.buffer||v.enableVertexAttribArray(Xb);mc=gb||4;if(xa.type!==Db||xa.size!==mc||xa.buffer!==va||xa.normalized!==db||xa.offset!==
za||xa.stride!==Eb)v.bindBuffer(34962,va.buffer),v.vertexAttribPointer(Xb,mc,Db,db,Eb,za),xa.type=Db,xa.size=mc,xa.buffer=va,xa.normalized=db,xa.offset=za,xa.stride=Eb;xa.divisor!==Va&&(wb.vertexAttribDivisorANGLE(Xb,Va),xa.divisor=Va)}else if(xa.buffer&&(v.disableVertexAttribArray(Xb),xa.buffer=null),xa.x!==Lc||xa.y!==Mb||xa.z!==Za||xa.w!==Sa)v.vertexAttrib4f(Xb,Lc,Mb,Za,Sa),xa.x=Lc,xa.y=Mb,xa.z=Za,xa.w=Sa;E.buffer=c.colorBuffer;La=!1;Qb=null;hb=0;kb=!1;gc=ya=0;Da=1;sb=0;tb=5126;ad=oc=Ya=Xa=0;ja(E)?
(La=!0,Qb=M.createStream(34962,E),tb=Qb.dtype):(Qb=M.getBuffer(E))?tb=Qb.dtype:"constant"in E?(Da=2,"number"===typeof E.constant?(Ya=E.constant,oc=ad=Xa=0):(Ya=0<E.constant.length?E.constant[0]:0,oc=1<E.constant.length?E.constant[1]:0,ad=2<E.constant.length?E.constant[2]:0,Xa=3<E.constant.length?E.constant[3]:0)):(Qb=ja(E.buffer)?M.createStream(34962,E.buffer):M.getBuffer(E.buffer),tb="type"in E?F[E.type]:Qb.dtype,kb=!!E.normalized,gc=E.size|0,ya=E.offset|0,sb=E.stride|0,hb=E.divisor|0);wc=P.location;
Wa=K[wc];if(1===Da){Wa.buffer||v.enableVertexAttribArray(wc);Ob=gc||4;if(Wa.type!==tb||Wa.size!==Ob||Wa.buffer!==Qb||Wa.normalized!==kb||Wa.offset!==ya||Wa.stride!==sb)v.bindBuffer(34962,Qb.buffer),v.vertexAttribPointer(wc,Ob,tb,kb,sb,ya),Wa.type=tb,Wa.size=Ob,Wa.buffer=Qb,Wa.normalized=kb,Wa.offset=ya,Wa.stride=sb;Wa.divisor!==hb&&(wb.vertexAttribDivisorANGLE(wc,hb),Wa.divisor=hb)}else if(Wa.buffer&&(v.disableVertexAttribArray(wc),Wa.buffer=null),Wa.x!==Ya||Wa.y!==oc||Wa.z!==ad||Wa.w!==Xa)v.vertexAttrib4f(wc,
Ya,oc,ad,Xa),Wa.x=Ya,Wa.y=oc,Wa.z=ad,Wa.w=Xa;ud=ea.location;Ea=K[ud];Ea.buffer||v.enableVertexAttribArray(ud);if(5126!==Ea.type||1!==Ea.size||Ea.buffer!==e||!1!==Ea.normalized||0!==Ea.offset||8!==Ea.stride)v.bindBuffer(34962,e.buffer),v.vertexAttribPointer(ud,1,5126,!1,8,0),Ea.type=5126,Ea.size=1,Ea.buffer=e,Ea.normalized=!1,Ea.offset=0,Ea.stride=8;0!==Ea.divisor&&(wb.vertexAttribDivisorANGLE(ud,0),Ea.divisor=0);Ac=d.location;Qa=K[Ac];Qa.buffer||v.enableVertexAttribArray(Ac);if(5126!==Qa.type||1!==
Qa.size||Qa.buffer!==b||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)v.bindBuffer(34962,b.buffer),v.vertexAttribPointer(Ac,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=b,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(wb.vertexAttribDivisorANGLE(Ac,0),Qa.divisor=0);Aa=c.scale;v.uniform2f(Zb.location,Aa[0],Aa[1]);nb=c.translate;v.uniform2f(Oa.location,nb[0],nb[1]);v.uniform1f(ua.location,c.thickness);v.uniform1f(N.location,c.depth);zb=p.call(this,Q,c,0);v.uniform4f(X.location,zb[0],
zb[1],zb[2],zb[3]);v.uniform1f(m.location,c.miterLimit);Fb=a.call(this,Q,c,0);v.uniform1f(Y.location,Fb);v.uniform1f(t.location,c.dashLength);v.uniform1f(Ka.location,c.opacity);(ub=c.dashTexture)&&"framebuffer"===ub._reglType&&(ub=ub.color[0]);xc=ub._texture;v.uniform1i(la.location,xc.bind());(Ab=L.elements)?v.bindBuffer(34963,Ab.buffer.buffer):cc.currentVAO&&(Ab=ac.getElements(cc.currentVAO.elements))&&v.bindBuffer(34963,Ab.buffer.buffer);jd=c.count;0<jd?Ab?wb.drawElementsInstancedANGLE(5,4,Ab.type,
0<<(Ab.type-5121>>1),jd):wb.drawArraysInstancedANGLE(5,0,4,jd):0>jd&&(Ab?v.drawElements(5,4,Ab.type,0<<(Ab.type-5121>>1)):v.drawArrays(5,0,4));oa.dirty=!0;cc.setVAO(null);Q.viewportWidth=z;Q.viewportHeight=D;fa&&(u.cpuTime+=performance.now()-ra);Ba&&M.destroyStream(Ha);fd&&M.destroyStream(Nc);Jb&&M.destroyStream(Ma);Vb&&M.destroyStream(Na);rb&&M.destroyStream(va);La&&M.destroyStream(Qb);xc.unbind()},scope:function(a,d,c){var k,p,m,q,n,t,v,z,A,J,I,H,W,N,R,K,T,P,U,S,V,ia,X,ca,ha,Y,da,ta,pc,na,Ca,ea,
la,vd,bb,sa,Gb,ua,Ua,zc,dc,ab,Ib,yc,Cc,bc,cb,Jb,Ma,xb,Ra,pa,Ka,ib,Ta,Kb,eb,Dc,Tb,$a,Oa,Ub,vb,Vb,Na,qb,yb,jb,Pa,qc,Wb,Uc,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,Ja,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ac,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,cc,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,mc,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Zb,Xc,rf,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe,Me,He,pe,ye,
Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf,pf,mf,qf,Bf,Cf,Je,xe,nf,of,Df,Gf,Af,Ef,Ff,vf,wf,uf,xf,yf;k=a.viewport;p=k.x|0;m=k.y|0;q="width"in k?k.width|0:Q.framebufferWidth-p;n="height"in k?k.height|0:Q.framebufferHeight-m;t=Q.viewportWidth;Q.viewportWidth=q;v=Q.viewportHeight;Q.viewportHeight=n;z=fa[0];fa[0]=p;A=fa[1];fa[1]=m;J=fa[2];fa[2]=q;I=fa[3];fa[3]=n;H=Ga[0];Ga[0]=0;W=Ga[1];Ga[1]=0;N=Ga[2];Ga[2]=0;R=Ga[3];Ga[3]=0;K=ba.blend_enable;ba.blend_enable=
!0;T=pb[0];pb[0]=32774;P=pb[1];pb[1]=32774;U=ra[0];ra[0]=770;S=ra[1];ra[1]=771;V=ra[2];ra[2]=773;ia=ra[3];ra[3]=1;X=ba.cull_enable;ba.cull_enable=!0;ca=ba.cull_face;ba.cull_face=1029;ha=g.call(this,Q,a,c);Y=ba.depth_enable;ba.depth_enable=ha;da=a.viewport;ta=da.x|0;pc=da.y|0;na="width"in da?da.width|0:Q.framebufferWidth-ta;Ca="height"in da?da.height|0:Q.framebufferHeight-pc;ea=wb[0];wb[0]=ta;la=wb[1];wb[1]=pc;vd=wb[2];wb[2]=na;bb=wb[3];wb[3]=Ca;sa=ba.scissor_enable;ba.scissor_enable=!0;Gb=ba.stencil_enable;
ba.stencil_enable=!1;if(ua=oa.profile)Ua=performance.now(),u.count++;zc=L.offset;L.offset=0;dc=L.count;L.count=4;ab=a.count;Ib=L.instances;L.instances=ab;yc=L.primitive;L.primitive=5;Cc=a.dashLength;bc=Ha[23];Ha[23]=Cc;cb=a.dashTexture;Jb=Ha[24];Ha[24]=cb;Ma=a.depth;xb=Ha[22];Ha[22]=Ma;Ra=a.id;pa=Ha[31];Ha[31]=Ra;Ka=a.miterLimit;ib=Ha[32];Ha[32]=Ka;Ta=r.call(this,Q,a,c);Kb=Ha[33];Ha[33]=Ta;eb=a.opacity;Dc=Ha[10];Ha[10]=eb;Tb=Q.pixelRatio;$a=Ha[34];Ha[34]=Tb;Oa=a.scale;Ub=Ha[6];Ha[6]=Oa;vb=a.scaleFract;
Vb=Ha[7];Ha[7]=vb;Na=a.thickness;qb=Ha[21];Ha[21]=Na;yb=a.translate;jb=Ha[8];Ha[8]=yb;Pa=a.translateFract;qc=Ha[9];Ha[9]=Pa;Wb=x.call(this,Q,a,c);Uc=Ha[3];Ha[3]=Wb;y.buffer=a.colorBuffer;fb=!1;nc=null;Ic=0;fc=!1;mb=lb=0;qa=1;rb=0;va=5126;gb=za=db=Va=0;ja(y)?(fb=!0,nc=M.createStream(34962,y),va=nc.dtype):(nc=M.getBuffer(y))?va=nc.dtype:"constant"in y?(qa=2,"number"===typeof y.constant?(db=y.constant,za=gb=Va=0):(db=0<y.constant.length?y.constant[0]:0,za=1<y.constant.length?y.constant[1]:0,gb=2<y.constant.length?
y.constant[2]:0,Va=3<y.constant.length?y.constant[3]:0)):(nc=ja(y.buffer)?M.createStream(34962,y.buffer):M.getBuffer(y.buffer),va="type"in y?F[y.type]:nc.dtype,fc=!!y.normalized,mb=y.size|0,lb=y.offset|0,rb=y.stride|0,Ic=y.divisor|0);Ia=f.buffer;f.buffer=nc;Eb=f.divisor;f.divisor=Ic;Db=f.normalized;f.normalized=fc;Sa=f.offset;f.offset=lb;Lc=f.size;f.size=mb;Mb=f.state;f.state=qa;Za=f.stride;f.stride=rb;Xb=f.type;f.type=va;xa=f.w;f.w=Va;Ja=f.x;f.x=db;La=f.y;f.y=za;Qb=f.z;f.z=gb;aa.buffer=a.positionBuffer;
hb=!1;kb=null;ya=0;gc=!1;sb=Da=0;tb=1;Xa=0;Ya=5126;Wa=wc=ad=oc=0;ja(aa)?(hb=!0,kb=M.createStream(34962,aa),Ya=kb.dtype):(kb=M.getBuffer(aa))?Ya=kb.dtype:"constant"in aa?(tb=2,"number"===typeof aa.constant?(ad=aa.constant,wc=Wa=oc=0):(ad=0<aa.constant.length?aa.constant[0]:0,wc=1<aa.constant.length?aa.constant[1]:0,Wa=2<aa.constant.length?aa.constant[2]:0,oc=3<aa.constant.length?aa.constant[3]:0)):(kb=ja(aa.buffer)?M.createStream(34962,aa.buffer):M.getBuffer(aa.buffer),Ya="type"in aa?F[aa.type]:kb.dtype,
gc=!!aa.normalized,sb=aa.size|0,Da=aa.offset|0,Xa=aa.stride|0,ya=aa.divisor|0);Ob=Z.buffer;Z.buffer=kb;ac=Z.divisor;Z.divisor=ya;Ea=Z.normalized;Z.normalized=gc;Ac=Z.offset;Z.offset=Da;Qa=Z.size;Z.size=sb;Aa=Z.state;Z.state=tb;nb=Z.stride;Z.stride=Xa;zb=Z.type;Z.type=Ya;Fb=Z.w;Z.w=oc;ub=Z.x;Z.x=ad;xc=Z.y;Z.y=wc;Ab=Z.z;Z.z=Wa;E.buffer=a.colorBuffer;jd=!1;vc=null;cc=0;Oc=!1;bd=md=0;Yb=1;ec=0;Rb=5126;Bb=ob=$b=Fa=0;ja(E)?(jd=!0,vc=M.createStream(34962,E),Rb=vc.dtype):(vc=M.getBuffer(E))?Rb=vc.dtype:"constant"in
E?(Yb=2,"number"===typeof E.constant?($b=E.constant,ob=Bb=Fa=0):($b=0<E.constant.length?E.constant[0]:0,ob=1<E.constant.length?E.constant[1]:0,Bb=2<E.constant.length?E.constant[2]:0,Fa=3<E.constant.length?E.constant[3]:0)):(vc=ja(E.buffer)?M.createStream(34962,E.buffer):M.getBuffer(E.buffer),Rb="type"in E?F[E.type]:vc.dtype,Oc=!!E.normalized,bd=E.size|0,md=E.offset|0,ec=E.stride|0,cc=E.divisor|0);Pb=w.buffer;w.buffer=vc;Sb=w.divisor;w.divisor=cc;hc=w.normalized;w.normalized=Oc;jc=w.offset;w.offset=
md;mc=w.size;w.size=bd;Ec=w.state;w.state=Yb;Fc=w.stride;w.stride=ec;Gc=w.type;w.type=Rb;Pc=w.w;w.w=Fa;$c=w.x;w.x=$b;Sc=w.y;w.y=ob;Qc=w.z;w.z=Bb;wa.buffer=a.positionBuffer;Nb=!1;Hb=null;Rc=0;Jc=!1;ic=Tc=0;Wc=1;od=0;gd=5126;Ld=rf=Xc=Zb=0;ja(wa)?(Nb=!0,Hb=M.createStream(34962,wa),gd=Hb.dtype):(Hb=M.getBuffer(wa))?gd=Hb.dtype:"constant"in wa?(Wc=2,"number"===typeof wa.constant?(Xc=wa.constant,rf=Ld=Zb=0):(Xc=0<wa.constant.length?wa.constant[0]:0,rf=1<wa.constant.length?wa.constant[1]:0,Ld=2<wa.constant.length?
wa.constant[2]:0,Zb=3<wa.constant.length?wa.constant[3]:0)):(Hb=ja(wa.buffer)?M.createStream(34962,wa.buffer):M.getBuffer(wa.buffer),gd="type"in wa?F[wa.type]:Hb.dtype,Jc=!!wa.normalized,ic=wa.size|0,Tc=wa.offset|0,od=wa.stride|0,Rc=wa.divisor|0);te=D.buffer;D.buffer=Hb;re=D.divisor;D.divisor=Rc;Vd=D.normalized;D.normalized=Jc;Gd=D.offset;D.offset=Tc;Dd=D.size;D.size=ic;dd=D.state;D.state=Wc;Hc=D.stride;D.stride=od;pd=D.type;D.type=gd;hd=D.w;D.w=Zb;Yc=D.x;D.x=Xc;rd=D.y;D.y=rf;Ad=D.z;D.z=Ld;Bd=G.buffer;
G.buffer=e;Le=G.divisor;G.divisor=0;ke=G.normalized;G.normalized=!1;ue=G.offset;G.offset=0;fe=G.size;G.size=0;ee=G.state;G.state=1;be=G.stride;G.stride=8;ne=G.type;G.type=5126;$d=G.w;G.w=0;he=G.x;G.x=0;Bc=G.y;G.y=0;Vc=G.z;G.z=0;oe=C.buffer;C.buffer=b;je=C.divisor;C.divisor=0;Ed=C.normalized;C.normalized=!1;Md=C.offset;C.offset=4;Od=C.size;C.size=0;Pd=C.state;C.state=1;ie=C.stride;C.stride=8;Be=C.type;C.type=5126;ve=C.w;C.w=0;le=C.x;C.x=0;Xe=C.y;C.y=0;Me=C.z;C.z=0;ka.buffer=a.positionBuffer;He=!1;
pe=null;ye=0;Ce=!1;Ee=De=0;ze=1;Hd=0;Sd=5126;zd=Fe=ae=Yd=0;ja(ka)?(He=!0,pe=M.createStream(34962,ka),Sd=pe.dtype):(pe=M.getBuffer(ka))?Sd=pe.dtype:"constant"in ka?(ze=2,"number"===typeof ka.constant?(ae=ka.constant,Fe=zd=Yd=0):(ae=0<ka.constant.length?ka.constant[0]:0,Fe=1<ka.constant.length?ka.constant[1]:0,zd=2<ka.constant.length?ka.constant[2]:0,Yd=3<ka.constant.length?ka.constant[3]:0)):(pe=ja(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),Sd="type"in ka?F[ka.type]:pe.dtype,
Ce=!!ka.normalized,Ee=ka.size|0,De=ka.offset|0,Hd=ka.stride|0,ye=ka.divisor|0);Qd=O.buffer;O.buffer=pe;we=O.divisor;O.divisor=ye;Ge=O.normalized;O.normalized=Ce;ef=O.offset;O.offset=De;We=O.size;O.size=Ee;Ne=O.state;O.state=ze;Ie=O.stride;O.stride=Hd;Ve=O.type;O.type=Sd;Re=O.w;O.w=Yd;Oe=O.x;O.x=ae;Pe=O.y;O.y=Fe;Rd=O.z;O.z=zd;l.buffer=a.positionBuffer;Wd=!1;Qe=null;ff=0;kf=!1;gf=bf=0;hf=1;jf=0;pf=5126;Cf=Bf=qf=mf=0;ja(l)?(Wd=!0,Qe=M.createStream(34962,l),pf=Qe.dtype):(Qe=M.getBuffer(l))?pf=Qe.dtype:
"constant"in l?(hf=2,"number"===typeof l.constant?(qf=l.constant,Bf=Cf=mf=0):(qf=0<l.constant.length?l.constant[0]:0,Bf=1<l.constant.length?l.constant[1]:0,Cf=2<l.constant.length?l.constant[2]:0,mf=3<l.constant.length?l.constant[3]:0)):(Qe=ja(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),pf="type"in l?F[l.type]:Qe.dtype,kf=!!l.normalized,gf=l.size|0,bf=l.offset|0,jf=l.stride|0,ff=l.divisor|0);Je=B.buffer;B.buffer=Qe;xe=B.divisor;B.divisor=ff;nf=B.normalized;B.normalized=kf;of=B.offset;
B.offset=bf;Df=B.size;B.size=gf;Gf=B.state;B.state=hf;Af=B.stride;B.stride=jf;Ef=B.type;B.type=pf;Ff=B.w;B.w=mf;vf=B.x;B.x=qf;wf=B.y;B.y=Bf;uf=B.z;B.z=Cf;xf=Ba.vert;Ba.vert=36;yf=Ba.frag;Ba.frag=35;oa.dirty=!0;d(Q,a,c);Q.viewportWidth=t;Q.viewportHeight=v;fa[0]=z;fa[1]=A;fa[2]=J;fa[3]=I;Ga[0]=H;Ga[1]=W;Ga[2]=N;Ga[3]=R;ba.blend_enable=K;pb[0]=T;pb[1]=P;ra[0]=U;ra[1]=S;ra[2]=V;ra[3]=ia;ba.cull_enable=X;ba.cull_face=ca;ba.depth_enable=Y;wb[0]=ea;wb[1]=la;wb[2]=vd;wb[3]=bb;ba.scissor_enable=sa;ba.stencil_enable=
Gb;ua&&(u.cpuTime+=performance.now()-Ua);L.offset=zc;L.count=dc;L.instances=Ib;L.primitive=yc;Ha[23]=bc;Ha[24]=Jb;Ha[22]=xb;Ha[31]=pa;Ha[32]=ib;Ha[33]=Kb;Ha[10]=Dc;Ha[34]=$a;Ha[6]=Ub;Ha[7]=Vb;Ha[21]=qb;Ha[8]=jb;Ha[9]=qc;Ha[3]=Uc;fb&&M.destroyStream(nc);f.buffer=Ia;f.divisor=Eb;f.normalized=Db;f.offset=Sa;f.size=Lc;f.state=Mb;f.stride=Za;f.type=Xb;f.w=xa;f.x=Ja;f.y=La;f.z=Qb;hb&&M.destroyStream(kb);Z.buffer=Ob;Z.divisor=ac;Z.normalized=Ea;Z.offset=Ac;Z.size=Qa;Z.state=Aa;Z.stride=nb;Z.type=zb;Z.w=
Fb;Z.x=ub;Z.y=xc;Z.z=Ab;jd&&M.destroyStream(vc);w.buffer=Pb;w.divisor=Sb;w.normalized=hc;w.offset=jc;w.size=mc;w.state=Ec;w.stride=Fc;w.type=Gc;w.w=Pc;w.x=$c;w.y=Sc;w.z=Qc;Nb&&M.destroyStream(Hb);D.buffer=te;D.divisor=re;D.normalized=Vd;D.offset=Gd;D.size=Dd;D.state=dd;D.stride=Hc;D.type=pd;D.w=hd;D.x=Yc;D.y=rd;D.z=Ad;G.buffer=Bd;G.divisor=Le;G.normalized=ke;G.offset=ue;G.size=fe;G.state=ee;G.stride=be;G.type=ne;G.w=$d;G.x=he;G.y=Bc;G.z=Vc;C.buffer=oe;C.divisor=je;C.normalized=Ed;C.offset=Md;C.size=
Od;C.state=Pd;C.stride=ie;C.type=Be;C.w=ve;C.x=le;C.y=Xe;C.z=Me;He&&M.destroyStream(pe);O.buffer=Qd;O.divisor=we;O.normalized=Ge;O.offset=ef;O.size=We;O.state=Ne;O.stride=Ie;O.type=Ve;O.w=Re;O.x=Oe;O.y=Pe;O.z=Rd;Wd&&M.destroyStream(Qe);B.buffer=Je;B.divisor=xe;B.normalized=nf;B.offset=of;B.size=Df;B.state=Gf;B.stride=Af;B.type=Ef;B.w=Ff;B.x=vf;B.y=wf;B.z=uf;Ba.vert=xf;Ba.frag=yf;oa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(c,u,n,I,
e,b,p,a,g,r,x,f,B,w,D,G,C,O,Ja){var R,mc,k,z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra;R=c.attributes;mc=c.buffer;k=c.context;z=c.current;q=c.draw;ca=c.elements;P=c.extensions;S=c.framebuffer;t=c.gl;la=c.isBufferArgs;N=c.next;ea=c.shader;d=c.uniforms;m=c.vao;Y=N.blend_color;sa=z.blend_color;Ka=N.blend_equation;vb=z.blend_equation;Zb=N.blend_func;ua=z.blend_func;Oa=N.colorMask;X=z.colorMask;K=N.depth_range;M=z.depth_range;Q=N.polygonOffset_offset;
oa=z.polygonOffset_offset;L=N.sample_coverage;ac=z.sample_coverage;$a=N.scissor_box;T=z.scissor_box;v=N.stencil_func;ja=z.stencil_func;ba=N.stencil_opBack;Ba=z.stencil_opBack;Ha=N.stencil_opFront;cc=z.stencil_opFront;Ga=N.viewport;U=z.viewport;pb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};da={offset:8,stride:8};ra={offset:8,stride:8};return{batch:function(a,b){var d,c,e,p,n,I;d=S.next;d!==S.cur&&(d?t.bindFramebuffer(36160,d.framebuffer):t.bindFramebuffer(36160,
null),S.cur=d);if(z.dirty){var Y,ea,ab,Ga,H,A,ha,ta,V,fa,na,F,y,aa,E,wa,ka,l,Ka,ma,h,Lb,Cb,$a,Zb,Xd,de,Id,qe,yd,ge,se;Y=N.dither;Y!==z.dither&&(Y?t.enable(3024):t.disable(3024),z.dither=Y);ea=N.depth_func;ea!==z.depth_func&&(t.depthFunc(ea),z.depth_func=ea);ab=K[0];Ga=K[1];if(ab!==M[0]||Ga!==M[1])t.depthRange(ab,Ga),M[0]=ab,M[1]=Ga;H=N.depth_mask;H!==z.depth_mask&&(t.depthMask(H),z.depth_mask=H);A=Oa[0];ha=Oa[1];ta=Oa[2];V=Oa[3];if(A!==X[0]||ha!==X[1]||ta!==X[2]||V!==X[3])t.colorMask(A,ha,ta,V),X[0]=
A,X[1]=ha,X[2]=ta,X[3]=V;fa=N.cull_enable;fa!==z.cull_enable&&(fa?t.enable(2884):t.disable(2884),z.cull_enable=fa);na=N.cull_face;na!==z.cull_face&&(t.cullFace(na),z.cull_face=na);F=N.frontFace;F!==z.frontFace&&(t.frontFace(F),z.frontFace=F);y=N.lineWidth;y!==z.lineWidth&&(t.lineWidth(y),z.lineWidth=y);aa=N.polygonOffset_enable;aa!==z.polygonOffset_enable&&(aa?t.enable(32823):t.disable(32823),z.polygonOffset_enable=aa);E=Q[0];wa=Q[1];if(E!==oa[0]||wa!==oa[1])t.polygonOffset(E,wa),oa[0]=E,oa[1]=wa;
ka=N.sample_alpha;ka!==z.sample_alpha&&(ka?t.enable(32926):t.disable(32926),z.sample_alpha=ka);l=N.sample_enable;l!==z.sample_enable&&(l?t.enable(32928):t.disable(32928),z.sample_enable=l);Ka=L[0];ma=L[1];if(Ka!==ac[0]||ma!==ac[1])t.sampleCoverage(Ka,ma),ac[0]=Ka,ac[1]=ma;h=N.stencil_mask;h!==z.stencil_mask&&(t.stencilMask(h),z.stencil_mask=h);Lb=v[0];Cb=v[1];$a=v[2];if(Lb!==ja[0]||Cb!==ja[1]||$a!==ja[2])t.stencilFunc(Lb,Cb,$a),ja[0]=Lb,ja[1]=Cb,ja[2]=$a;Zb=Ha[0];Xd=Ha[1];de=Ha[2];Id=Ha[3];if(Zb!==
cc[0]||Xd!==cc[1]||de!==cc[2]||Id!==cc[3])t.stencilOpSeparate(Zb,Xd,de,Id),cc[0]=Zb,cc[1]=Xd,cc[2]=de,cc[3]=Id;qe=ba[0];yd=ba[1];ge=ba[2];se=ba[3];if(qe!==Ba[0]||yd!==Ba[1]||ge!==Ba[2]||se!==Ba[3])t.stencilOpSeparate(qe,yd,ge,se),Ba[0]=qe,Ba[1]=yd,Ba[2]=ge,Ba[3]=se}t.blendColor(0,0,0,0);sa[0]=0;sa[1]=0;sa[2]=0;sa[3]=0;t.enable(3042);z.blend_enable=!0;t.blendEquationSeparate(32774,32774);vb[0]=32774;vb[1]=32774;t.blendFuncSeparate(770,771,773,1);ua[0]=770;ua[1]=771;ua[2]=773;ua[3]=1;t.disable(2929);
z.depth_enable=!1;t.enable(3089);z.scissor_enable=!0;t.disable(2960);z.stencil_enable=!1;if(c=z.profile)e=performance.now(),u.count+=b;t.useProgram(g.program);p=P.angle_instanced_arrays;var Fd;m.setVAO(null);Fd=q.instances;for(n=0;n<b;++n){I=a[n];var ed,Zd,Nd,Ke,zf,$e,id,Ae,Td,Ud,Kd,Se,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,af,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb;ed=I.viewport;
Zd=ed.x|0;Nd=ed.y|0;Ke="width"in ed?ed.width|0:k.framebufferWidth-Zd;zf="height"in ed?ed.height|0:k.framebufferHeight-Nd;$e=k.viewportWidth;k.viewportWidth=Ke;id=k.viewportHeight;k.viewportHeight=zf;t.viewport(Zd,Nd,Ke,zf);U[0]=Zd;U[1]=Nd;U[2]=Ke;U[3]=zf;Ae=I.viewport;Td=Ae.x|0;Ud=Ae.y|0;Kd="width"in Ae?Ae.width|0:k.framebufferWidth-Td;Se="height"in Ae?Ae.height|0:k.framebufferHeight-Ud;t.scissor(Td,Ud,Kd,Se);T[0]=Td;T[1]=Ud;T[2]=Kd;T[3]=Se;da.buffer=I.positionBuffer;sd=!1;kd=null;xd=0;qd=!1;sc=cd=
0;td=1;fd=0;Nc=5126;Gb=kc=bb=uc=0;la(da)?(sd=!0,kd=mc.createStream(34962,da),Nc=kd.dtype):(kd=mc.getBuffer(da))?Nc=kd.dtype:"constant"in da?(td=2,"number"===typeof da.constant?(bb=da.constant,kc=Gb=uc=0):(bb=0<da.constant.length?da.constant[0]:0,kc=1<da.constant.length?da.constant[1]:0,Gb=2<da.constant.length?da.constant[2]:0,uc=3<da.constant.length?da.constant[3]:0)):(kd=la(da.buffer)?mc.createStream(34962,da.buffer):mc.getBuffer(da.buffer),Nc="type"in da?pb[da.type]:kd.dtype,qd=!!da.normalized,
sc=da.size|0,cd=da.offset|0,fd=da.stride|0,xd=da.divisor|0);tc=w.location;Ua=R[tc];if(1===td){Ua.buffer||t.enableVertexAttribArray(tc);Kc=sc||2;if(Ua.type!==Nc||Ua.size!==Kc||Ua.buffer!==kd||Ua.normalized!==qd||Ua.offset!==cd||Ua.stride!==fd)t.bindBuffer(34962,kd.buffer),t.vertexAttribPointer(tc,Kc,Nc,qd,fd,cd),Ua.type=Nc,Ua.size=Kc,Ua.buffer=kd,Ua.normalized=qd,Ua.offset=cd,Ua.stride=fd;Ua.divisor!==xd&&(p.vertexAttribDivisorANGLE(tc,xd),Ua.divisor=xd)}else if(Ua.buffer&&(t.disableVertexAttribArray(tc),
Ua.buffer=null),Ua.x!==bb||Ua.y!==kc||Ua.z!==Gb||Ua.w!==uc)t.vertexAttrib4f(tc,bb,kc,Gb,uc),Ua.x=bb,Ua.y=kc,Ua.z=Gb,Ua.w=uc;ra.buffer=I.positionFractBuffer;dc=!1;Zc=null;Cd=0;ld=!1;bc=Cc=0;cb=1;Jb=0;Ma=5126;nd=pa=Ra=xb=0;la(ra)?(dc=!0,Zc=mc.createStream(34962,ra),Ma=Zc.dtype):(Zc=mc.getBuffer(ra))?Ma=Zc.dtype:"constant"in ra?(cb=2,"number"===typeof ra.constant?(Ra=ra.constant,pa=nd=xb=0):(Ra=0<ra.constant.length?ra.constant[0]:0,pa=1<ra.constant.length?ra.constant[1]:0,nd=2<ra.constant.length?ra.constant[2]:
0,xb=3<ra.constant.length?ra.constant[3]:0)):(Zc=la(ra.buffer)?mc.createStream(34962,ra.buffer):mc.getBuffer(ra.buffer),Ma="type"in ra?pb[ra.type]:Zc.dtype,ld=!!ra.normalized,bc=ra.size|0,Cc=ra.offset|0,Jb=ra.stride|0,Cd=ra.divisor|0);ib=D.location;Ta=R[ib];if(1===cb){Ta.buffer||t.enableVertexAttribArray(ib);Kb=bc||2;if(Ta.type!==Ma||Ta.size!==Kb||Ta.buffer!==Zc||Ta.normalized!==ld||Ta.offset!==Cc||Ta.stride!==Jb)t.bindBuffer(34962,Zc.buffer),t.vertexAttribPointer(ib,Kb,Ma,ld,Jb,Cc),Ta.type=Ma,Ta.size=
Kb,Ta.buffer=Zc,Ta.normalized=ld,Ta.offset=Cc,Ta.stride=Jb;Ta.divisor!==Cd&&(p.vertexAttribDivisorANGLE(ib,Cd),Ta.divisor=Cd)}else if(Ta.buffer&&(t.disableVertexAttribArray(ib),Ta.buffer=null),Ta.x!==Ra||Ta.y!==pa||Ta.z!==nd||Ta.w!==xb)t.vertexAttrib4f(ib,Ra,pa,nd,xb),Ta.x=Ra,Ta.y=pa,Ta.z=nd,Ta.w=xb;eb=I.fill;Dc=eb[0];af=eb[1];Ub=eb[2];Vb=eb[3];n&&Tb===Dc&&lc===af&&me===Ub&&Na===Vb||(Tb=Dc,lc=af,me=Ub,Na=Vb,t.uniform4f(x.location,Dc,af,Ub,Vb));qb=I.scale;yb=qb[0];Pa=qb[1];n&&jb===yb&&qc===Pa||(jb=
yb,qc=Pa,t.uniform2f(G.location,yb,Pa));Wb=I.scaleFract;wd=Wb[0];nc=Wb[1];n&&fb===wd&&Ic===nc||(fb=wd,Ic=nc,t.uniform2f(C.location,wd,nc));fc=I.translate;lb=fc[0];qa=fc[1];n&&mb===lb&&rb===qa||(mb=lb,rb=qa,t.uniform2f(O.location,lb,qa));va=I.translateFract;Va=va[0];za=va[1];n&&db===Va&&gb===za||(db=Va,gb=za,t.uniform2f(Ja.location,Va,za));Ia=I.id;n&&Eb===Ia||(Eb=Ia,t.uniform1f(f.location,Ia));Db=I.opacity;n&&Sa===Db||(Sa=Db,t.uniform1f(B.location,Db));Lc=r.call(this,k,I,n);Mb=null;(Mb=(Za=la(Lc))?
ca.createStream(Lc):ca.getElements(Lc))&&t.bindBuffer(34963,Mb.buffer.buffer);if(Xb=Mb?Mb.vertCount:-1)0<Fd?Mb?p.drawElementsInstancedANGLE(4,Xb,Mb.type,0<<(Mb.type-5121>>1),Fd):p.drawArraysInstancedANGLE(4,0,Xb,Fd):0>Fd&&(Mb?t.drawElements(4,Xb,Mb.type,0<<(Mb.type-5121>>1)):t.drawArrays(4,0,Xb)),k.viewportWidth=$e,k.viewportHeight=id,sd&&mc.destroyStream(kd),dc&&mc.destroyStream(Zc),Za&&ca.destroyStream(Mb)}z.dirty=!0;m.setVAO(null);c&&(u.cpuTime+=performance.now()-e)},draw:function(a){var b,d,c,
e,g,p,r,Y,ea,ab,Ga,H,A,ha,ta,V,fa,na,F,y,aa,E;b=S.next;b!==S.cur&&(b?t.bindFramebuffer(36160,b.framebuffer):t.bindFramebuffer(36160,null),S.cur=b);if(z.dirty){b=N.dither;b!==z.dither&&(b?t.enable(3024):t.disable(3024),z.dither=b);b=N.depth_func;b!==z.depth_func&&(t.depthFunc(b),z.depth_func=b);b=K[0];p=K[1];if(b!==M[0]||p!==M[1])t.depthRange(b,p),M[0]=b,M[1]=p;b=N.depth_mask;b!==z.depth_mask&&(t.depthMask(b),z.depth_mask=b);b=Oa[0];p=Oa[1];d=Oa[2];c=Oa[3];if(b!==X[0]||p!==X[1]||d!==X[2]||c!==X[3])t.colorMask(b,
p,d,c),X[0]=b,X[1]=p,X[2]=d,X[3]=c;b=N.cull_enable;b!==z.cull_enable&&(b?t.enable(2884):t.disable(2884),z.cull_enable=b);b=N.cull_face;b!==z.cull_face&&(t.cullFace(b),z.cull_face=b);b=N.frontFace;b!==z.frontFace&&(t.frontFace(b),z.frontFace=b);b=N.lineWidth;b!==z.lineWidth&&(t.lineWidth(b),z.lineWidth=b);b=N.polygonOffset_enable;b!==z.polygonOffset_enable&&(b?t.enable(32823):t.disable(32823),z.polygonOffset_enable=b);b=Q[0];p=Q[1];if(b!==oa[0]||p!==oa[1])t.polygonOffset(b,p),oa[0]=b,oa[1]=p;b=N.sample_alpha;
b!==z.sample_alpha&&(b?t.enable(32926):t.disable(32926),z.sample_alpha=b);b=N.sample_enable;b!==z.sample_enable&&(b?t.enable(32928):t.disable(32928),z.sample_enable=b);b=L[0];p=L[1];if(b!==ac[0]||p!==ac[1])t.sampleCoverage(b,p),ac[0]=b,ac[1]=p;b=N.stencil_mask;b!==z.stencil_mask&&(t.stencilMask(b),z.stencil_mask=b);b=v[0];p=v[1];d=v[2];if(b!==ja[0]||p!==ja[1]||d!==ja[2])t.stencilFunc(b,p,d),ja[0]=b,ja[1]=p,ja[2]=d;b=Ha[0];p=Ha[1];d=Ha[2];c=Ha[3];if(b!==cc[0]||p!==cc[1]||d!==cc[2]||c!==cc[3])t.stencilOpSeparate(b,
p,d,c),cc[0]=b,cc[1]=p,cc[2]=d,cc[3]=c;b=ba[0];p=ba[1];d=ba[2];c=ba[3];if(b!==Ba[0]||p!==Ba[1]||d!==Ba[2]||c!==Ba[3])t.stencilOpSeparate(b,p,d,c),Ba[0]=b,Ba[1]=p,Ba[2]=d,Ba[3]=c}b=a.viewport;d=b.x|0;c=b.y|0;e="width"in b?b.width|0:k.framebufferWidth-d;g="height"in b?b.height|0:k.framebufferHeight-c;b=k.viewportWidth;k.viewportWidth=e;p=k.viewportHeight;k.viewportHeight=g;t.viewport(d,c,e,g);U[0]=d;U[1]=c;U[2]=e;U[3]=g;t.blendColor(0,0,0,0);sa[0]=0;sa[1]=0;sa[2]=0;sa[3]=0;t.enable(3042);z.blend_enable=
!0;t.blendEquationSeparate(32774,32774);vb[0]=32774;vb[1]=32774;t.blendFuncSeparate(770,771,773,1);ua[0]=770;ua[1]=771;ua[2]=773;ua[3]=1;t.disable(2929);z.depth_enable=!1;g=a.viewport;d=g.x|0;c=g.y|0;e="width"in g?g.width|0:k.framebufferWidth-d;g="height"in g?g.height|0:k.framebufferHeight-c;t.scissor(d,c,e,g);T[0]=d;T[1]=c;T[2]=e;T[3]=g;t.enable(3089);z.scissor_enable=!0;t.disable(2960);z.stencil_enable=!1;if(d=z.profile)r=performance.now(),u.count++;t.useProgram(n.program);c=P.angle_instanced_arrays;
m.setVAO(null);da.buffer=a.positionBuffer;e=!1;Y=0;ea=!1;Ga=ab=0;H=1;A=0;ha=5126;na=fa=V=ta=0;la(da)?(e=!0,g=mc.createStream(34962,da),ha=g.dtype):(g=mc.getBuffer(da))?ha=g.dtype:"constant"in da?(H=2,"number"===typeof da.constant?(V=da.constant,fa=na=ta=0):(V=0<da.constant.length?da.constant[0]:0,fa=1<da.constant.length?da.constant[1]:0,na=2<da.constant.length?da.constant[2]:0,ta=3<da.constant.length?da.constant[3]:0)):(g=la(da.buffer)?mc.createStream(34962,da.buffer):mc.getBuffer(da.buffer),ha="type"in
da?pb[da.type]:g.dtype,ea=!!da.normalized,Ga=da.size|0,ab=da.offset|0,A=da.stride|0,Y=da.divisor|0);F=w.location;y=R[F];if(1===H){y.buffer||t.enableVertexAttribArray(F);Ga=Ga||2;if(y.type!==ha||y.size!==Ga||y.buffer!==g||y.normalized!==ea||y.offset!==ab||y.stride!==A)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(F,Ga,ha,ea,A,ab),y.type=ha,y.size=Ga,y.buffer=g,y.normalized=ea,y.offset=ab,y.stride=A;y.divisor!==Y&&(c.vertexAttribDivisorANGLE(F,Y),y.divisor=Y)}else if(y.buffer&&(t.disableVertexAttribArray(F),
y.buffer=null),y.x!==V||y.y!==fa||y.z!==na||y.w!==ta)t.vertexAttrib4f(F,V,fa,na,ta),y.x=V,y.y=fa,y.z=na,y.w=ta;ra.buffer=a.positionFractBuffer;Y=!1;ab=0;A=!1;ta=ha=0;V=1;F=0;y=5126;E=aa=na=fa=0;la(ra)?(Y=!0,ea=mc.createStream(34962,ra),y=ea.dtype):(ea=mc.getBuffer(ra))?y=ea.dtype:"constant"in ra?(V=2,"number"===typeof ra.constant?(na=ra.constant,aa=E=fa=0):(na=0<ra.constant.length?ra.constant[0]:0,aa=1<ra.constant.length?ra.constant[1]:0,E=2<ra.constant.length?ra.constant[2]:0,fa=3<ra.constant.length?
ra.constant[3]:0)):(ea=la(ra.buffer)?mc.createStream(34962,ra.buffer):mc.getBuffer(ra.buffer),y="type"in ra?pb[ra.type]:ea.dtype,A=!!ra.normalized,ta=ra.size|0,ha=ra.offset|0,F=ra.stride|0,ab=ra.divisor|0);Ga=D.location;H=R[Ga];if(1===V){H.buffer||t.enableVertexAttribArray(Ga);ta=ta||2;if(H.type!==y||H.size!==ta||H.buffer!==ea||H.normalized!==A||H.offset!==ha||H.stride!==F)t.bindBuffer(34962,ea.buffer),t.vertexAttribPointer(Ga,ta,y,A,F,ha),H.type=y,H.size=ta,H.buffer=ea,H.normalized=A,H.offset=ha,
H.stride=F;H.divisor!==ab&&(c.vertexAttribDivisorANGLE(Ga,ab),H.divisor=ab)}else if(H.buffer&&(t.disableVertexAttribArray(Ga),H.buffer=null),H.x!==na||H.y!==aa||H.z!==E||H.w!==fa)t.vertexAttrib4f(Ga,na,aa,E,fa),H.x=na,H.y=aa,H.z=E,H.w=fa;ab=a.fill;t.uniform4f(x.location,ab[0],ab[1],ab[2],ab[3]);ab=a.scale;t.uniform2f(G.location,ab[0],ab[1]);ab=a.scaleFract;t.uniform2f(C.location,ab[0],ab[1]);ab=a.translate;t.uniform2f(O.location,ab[0],ab[1]);ab=a.translateFract;t.uniform2f(Ja.location,ab[0],ab[1]);
t.uniform1f(f.location,a.id);t.uniform1f(B.location,a.opacity);ab=I.call(this,k,a,0);(ab=(a=la(ab))?ca.createStream(ab):ca.getElements(ab))&&t.bindBuffer(34963,ab.buffer.buffer);if(A=ab?ab.vertCount:-1)ha=q.instances,0<ha?ab?c.drawElementsInstancedANGLE(4,A,ab.type,0<<(ab.type-5121>>1),ha):c.drawArraysInstancedANGLE(4,0,A,ha):0>ha&&(ab?t.drawElements(4,A,ab.type,0<<(ab.type-5121>>1)):t.drawArrays(4,0,A)),z.dirty=!0,m.setVAO(null),k.viewportWidth=b,k.viewportHeight=p,d&&(u.cpuTime+=performance.now()-
r),e&&mc.destroyStream(g),Y&&mc.destroyStream(ea),a&&ca.destroyStream(ab)},scope:function(c,f,g){var m,r,n,x,t,v,w,D,I,C,A,G,B,O,M,R,F,y,aa,E,K,L,l,Z,T,h,Q,P,U,S,X,ba,ja,oa,sa,ua,Ha,Ba,Oa,Ja,Nd,Ke,vb,ac,id,Mc,Td,Ud,Kd,cc,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,af,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db;m=c.viewport;r=m.x|0;n=m.y|0;x="width"in m?m.width|0:k.framebufferWidth-r;t="height"in m?
m.height|0:k.framebufferHeight-n;v=k.viewportWidth;k.viewportWidth=x;w=k.viewportHeight;k.viewportHeight=t;D=Ga[0];Ga[0]=r;I=Ga[1];Ga[1]=n;C=Ga[2];Ga[2]=x;A=Ga[3];Ga[3]=t;G=Y[0];Y[0]=0;B=Y[1];Y[1]=0;O=Y[2];Y[2]=0;M=Y[3];Y[3]=0;R=N.blend_enable;N.blend_enable=!0;F=Ka[0];Ka[0]=32774;y=Ka[1];Ka[1]=32774;aa=Zb[0];Zb[0]=770;E=Zb[1];Zb[1]=771;K=Zb[2];Zb[2]=773;L=Zb[3];Zb[3]=1;l=N.depth_enable;N.depth_enable=!1;Z=c.viewport;T=Z.x|0;h=Z.y|0;Q="width"in Z?Z.width|0:k.framebufferWidth-T;P="height"in Z?Z.height|
0:k.framebufferHeight-h;U=$a[0];$a[0]=T;S=$a[1];$a[1]=h;X=$a[2];$a[2]=Q;ba=$a[3];$a[3]=P;ja=N.scissor_enable;N.scissor_enable=!0;oa=N.stencil_enable;N.stencil_enable=!1;if(sa=z.profile)ua=performance.now(),u.count++;Ha=e.call(this,k,c,g);Ba=null;Ba=(Oa=la(Ha))?ca.createStream(Ha):ca.getElements(Ha);Ja=q.elements;q.elements=Ba;Nd=q.offset;q.offset=0;Ke=Ba?Ba.vertCount:-1;vb=q.count;q.count=Ke;ac=q.primitive;q.primitive=4;id=c.fill;Mc=d[14];d[14]=id;Td=c.id;Ud=d[31];d[31]=Td;Kd=c.opacity;cc=d[10];d[10]=
Kd;sd=k.pixelRatio;kd=d[34];d[34]=sd;xd=c.scale;qd=d[6];d[6]=xd;cd=c.scaleFract;sc=d[7];d[7]=cd;td=c.translate;fd=d[8];d[8]=td;Nc=c.translateFract;uc=d[9];d[9]=Nc;bb=b.call(this,k,c,g);kc=d[3];d[3]=bb;da.buffer=c.positionBuffer;Gb=!1;tc=null;Ua=0;Kc=!1;Zc=dc=0;Cd=1;ld=0;Cc=5126;Ma=Jb=cb=bc=0;la(da)?(Gb=!0,tc=mc.createStream(34962,da),Cc=tc.dtype):(tc=mc.getBuffer(da))?Cc=tc.dtype:"constant"in da?(Cd=2,"number"===typeof da.constant?(cb=da.constant,Jb=Ma=bc=0):(cb=0<da.constant.length?da.constant[0]:
0,Jb=1<da.constant.length?da.constant[1]:0,Ma=2<da.constant.length?da.constant[2]:0,bc=3<da.constant.length?da.constant[3]:0)):(tc=la(da.buffer)?mc.createStream(34962,da.buffer):mc.getBuffer(da.buffer),Cc="type"in da?pb[da.type]:tc.dtype,Kc=!!da.normalized,Zc=da.size|0,dc=da.offset|0,ld=da.stride|0,Ua=da.divisor|0);xb=p.buffer;p.buffer=tc;Ra=p.divisor;p.divisor=Ua;pa=p.normalized;p.normalized=Kc;nd=p.offset;p.offset=dc;ib=p.size;p.size=Zc;Ta=p.state;p.state=Cd;Kb=p.stride;p.stride=ld;eb=p.type;p.type=
Cc;Dc=p.w;p.w=bc;Tb=p.x;p.x=cb;af=p.y;p.y=Jb;lc=p.z;p.z=Ma;ra.buffer=c.positionFractBuffer;Ub=!1;me=null;Vb=0;Na=!1;yb=qb=0;jb=1;Pa=0;qc=5126;nc=fb=wd=Wb=0;la(ra)?(Ub=!0,me=mc.createStream(34962,ra),qc=me.dtype):(me=mc.getBuffer(ra))?qc=me.dtype:"constant"in ra?(jb=2,"number"===typeof ra.constant?(wd=ra.constant,fb=nc=Wb=0):(wd=0<ra.constant.length?ra.constant[0]:0,fb=1<ra.constant.length?ra.constant[1]:0,nc=2<ra.constant.length?ra.constant[2]:0,Wb=3<ra.constant.length?ra.constant[3]:0)):(me=la(ra.buffer)?
mc.createStream(34962,ra.buffer):mc.getBuffer(ra.buffer),qc="type"in ra?pb[ra.type]:me.dtype,Na=!!ra.normalized,yb=ra.size|0,qb=ra.offset|0,Pa=ra.stride|0,Vb=ra.divisor|0);Ic=a.buffer;a.buffer=me;fc=a.divisor;a.divisor=Vb;lb=a.normalized;a.normalized=Na;mb=a.offset;a.offset=qb;qa=a.size;a.size=yb;rb=a.state;a.state=jb;va=a.stride;a.stride=Pa;Va=a.type;a.type=qc;db=a.w;a.w=Wb;za=a.x;a.x=wd;gb=a.y;a.y=fb;Ia=a.z;a.z=nc;Eb=ea.vert;ea.vert=42;Db=ea.frag;ea.frag=41;z.dirty=!0;f(k,c,g);k.viewportWidth=v;
k.viewportHeight=w;Ga[0]=D;Ga[1]=I;Ga[2]=C;Ga[3]=A;Y[0]=G;Y[1]=B;Y[2]=O;Y[3]=M;N.blend_enable=R;Ka[0]=F;Ka[1]=y;Zb[0]=aa;Zb[1]=E;Zb[2]=K;Zb[3]=L;N.depth_enable=l;$a[0]=U;$a[1]=S;$a[2]=X;$a[3]=ba;N.scissor_enable=ja;N.stencil_enable=oa;sa&&(u.cpuTime+=performance.now()-ua);Oa&&ca.destroyStream(Ba);q.elements=Ja;q.offset=Nd;q.count=vb;q.primitive=ac;d[14]=Mc;d[31]=Ud;d[10]=cc;d[34]=kd;d[6]=qd;d[7]=sc;d[8]=fd;d[9]=uc;d[3]=kc;Gb&&mc.destroyStream(tc);p.buffer=xb;p.divisor=Ra;p.normalized=pa;p.offset=
nd;p.size=ib;p.state=Ta;p.stride=Kb;p.type=eb;p.w=Dc;p.x=Tb;p.y=af;p.z=lc;Ub&&mc.destroyStream(me);a.buffer=Ic;a.divisor=fc;a.normalized=lb;a.offset=mb;a.size=qa;a.state=rb;a.stride=va;a.type=Va;a.w=db;a.x=za;a.y=gb;a.z=Ia;ea.vert=Eb;ea.frag=Db;z.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,u,n,I,e,b,p,a,g,r,x,f,B,w,D,G,C,O,Ja,R,mc,k,
z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra,Ib,pc,yc,vd,zc){var W,J,ia,Ca,wb,ab,Uc,H,A,ha,ta,V,fa,na,F,y,aa,E,wa,ka,l,rc,ma,h,Lb,Cb,Ue,ce,Xd,de,Id,qe,yd,ge,se,Fd,ed,Zd,Nd;W=c.attributes;J=c.buffer;ia=c.context;Ca=c.current;wb=c.draw;ab=c.elements;Uc=c.extensions;H=c.framebuffer;A=c.gl;ha=c.isBufferArgs;ta=c.next;V=c.shader;fa=c.uniforms;na=c.vao;F=ta.blend_color;y=Ca.blend_color;aa=ta.blend_equation;E=Ca.blend_equation;wa=ta.blend_func;ka=Ca.blend_func;
l=ta.colorMask;rc=Ca.colorMask;ma=ta.depth_range;h=Ca.depth_range;Lb=ta.polygonOffset_offset;Cb=Ca.polygonOffset_offset;Ue=ta.sample_coverage;ce=Ca.sample_coverage;Xd=ta.scissor_box;de=Ca.scissor_box;Id=ta.stencil_func;qe=Ca.stencil_func;yd=ta.stencil_opBack;ge=Ca.stencil_opBack;se=ta.stencil_opFront;Fd=Ca.stencil_opFront;ed=ta.viewport;Zd=Ca.viewport;Nd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var d,c,e,f,g,k;d=H.next;
d!==H.cur&&(d?A.bindFramebuffer(36160,d.framebuffer):A.bindFramebuffer(36160,null),H.cur=d);if(Ca.dirty){var p,m,r,q,n,x,t,w,z,D,I,C,F,G,B,O,N,R,Z,P,S,V,fa,Y,ca,ea,wa,la,pa,nd,ib,Ta,Kb,eb;p=ta.dither;p!==Ca.dither&&(p?A.enable(3024):A.disable(3024),Ca.dither=p);m=aa[0];r=aa[1];if(m!==E[0]||r!==E[1])A.blendEquationSeparate(m,r),E[0]=m,E[1]=r;q=ta.depth_func;q!==Ca.depth_func&&(A.depthFunc(q),Ca.depth_func=q);n=ma[0];x=ma[1];if(n!==h[0]||x!==h[1])A.depthRange(n,x),h[0]=n,h[1]=x;t=ta.depth_mask;t!==
Ca.depth_mask&&(A.depthMask(t),Ca.depth_mask=t);w=l[0];z=l[1];D=l[2];I=l[3];if(w!==rc[0]||z!==rc[1]||D!==rc[2]||I!==rc[3])A.colorMask(w,z,D,I),rc[0]=w,rc[1]=z,rc[2]=D,rc[3]=I;C=ta.cull_enable;C!==Ca.cull_enable&&(C?A.enable(2884):A.disable(2884),Ca.cull_enable=C);F=ta.cull_face;F!==Ca.cull_face&&(A.cullFace(F),Ca.cull_face=F);G=ta.frontFace;G!==Ca.frontFace&&(A.frontFace(G),Ca.frontFace=G);B=ta.lineWidth;B!==Ca.lineWidth&&(A.lineWidth(B),Ca.lineWidth=B);O=ta.polygonOffset_enable;O!==Ca.polygonOffset_enable&&
(O?A.enable(32823):A.disable(32823),Ca.polygonOffset_enable=O);N=Lb[0];R=Lb[1];if(N!==Cb[0]||R!==Cb[1])A.polygonOffset(N,R),Cb[0]=N,Cb[1]=R;Z=ta.sample_alpha;Z!==Ca.sample_alpha&&(Z?A.enable(32926):A.disable(32926),Ca.sample_alpha=Z);P=ta.sample_enable;P!==Ca.sample_enable&&(P?A.enable(32928):A.disable(32928),Ca.sample_enable=P);S=Ue[0];V=Ue[1];if(S!==ce[0]||V!==ce[1])A.sampleCoverage(S,V),ce[0]=S,ce[1]=V;fa=ta.stencil_mask;fa!==Ca.stencil_mask&&(A.stencilMask(fa),Ca.stencil_mask=fa);Y=Id[0];ca=Id[1];
ea=Id[2];if(Y!==qe[0]||ca!==qe[1]||ea!==qe[2])A.stencilFunc(Y,ca,ea),qe[0]=Y,qe[1]=ca,qe[2]=ea;wa=se[0];la=se[1];pa=se[2];nd=se[3];if(wa!==Fd[0]||la!==Fd[1]||pa!==Fd[2]||nd!==Fd[3])A.stencilOpSeparate(wa,la,pa,nd),Fd[0]=wa,Fd[1]=la,Fd[2]=pa,Fd[3]=nd;ib=yd[0];Ta=yd[1];Kb=yd[2];eb=yd[3];if(ib!==ge[0]||Ta!==ge[1]||Kb!==ge[2]||eb!==ge[3])A.stencilOpSeparate(ib,Ta,Kb,eb),ge[0]=ib,ge[1]=Ta,ge[2]=Kb,ge[3]=eb}A.blendColor(0,0,0,1);y[0]=0;y[1]=0;y[2]=0;y[3]=1;A.enable(3042);Ca.blend_enable=!0;A.blendFuncSeparate(770,
771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;A.disable(2929);Ca.depth_enable=!1;A.enable(3089);Ca.scissor_enable=!0;A.disable(2960);Ca.stencil_enable=!1;if(c=Ca.profile)e=performance.now(),u.count+=b;A.useProgram(sa.program);f=Uc.angle_instanced_arrays;var Dc;na.setVAO(null);A.uniform1i(v.location,!1);A.uniform1i(cc.location,oa.bind());Dc=wb.instances;for(g=0;g<b;++g){k=a[g];var Tb,Ja,lc,Ub,Mc,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,mc,La,Qb,
hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,ed,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,Xd,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe,Me,He,pe,ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf,pf,mf,qf,Bf,Cf,Je,xe,nf,of,Df,Gf,Af,Ef,Ff,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Hf,tf,dg,Sf,Tf;Tb=k.viewport;Ja=
Tb.x|0;lc=Tb.y|0;Ub="width"in Tb?Tb.width|0:ia.framebufferWidth-Ja;Mc="height"in Tb?Tb.height|0:ia.framebufferHeight-lc;Vb=ia.viewportWidth;ia.viewportWidth=Ub;Na=ia.viewportHeight;ia.viewportHeight=Mc;A.viewport(Ja,lc,Ub,Mc);Zd[0]=Ja;Zd[1]=lc;Zd[2]=Ub;Zd[3]=Mc;qb=k.viewport;yb=qb.x|0;jb=qb.y|0;Pa="width"in qb?qb.width|0:ia.framebufferWidth-yb;qc="height"in qb?qb.height|0:ia.framebufferHeight-jb;A.scissor(yb,jb,Pa,qc);de[0]=yb;de[1]=jb;de[2]=Pa;de[3]=qc;Wb=Ka.call(this,ia,k,g);wd=!1;fb=null;nc=0;
Ic=!1;lb=fc=0;mb=1;qa=0;rb=5126;za=db=Va=va=0;ha(Wb)?(wd=!0,fb=J.createStream(34962,Wb),rb=fb.dtype):(fb=J.getBuffer(Wb))?rb=fb.dtype:"constant"in Wb?(mb=2,"number"===typeof Wb.constant?(Va=Wb.constant,db=za=va=0):(Va=0<Wb.constant.length?Wb.constant[0]:0,db=1<Wb.constant.length?Wb.constant[1]:0,za=2<Wb.constant.length?Wb.constant[2]:0,va=3<Wb.constant.length?Wb.constant[3]:0)):(fb=ha(Wb.buffer)?J.createStream(34962,Wb.buffer):J.getBuffer(Wb.buffer),rb="type"in Wb?Nd[Wb.type]:fb.dtype,Ic=!!Wb.normalized,
lb=Wb.size|0,fc=Wb.offset|0,qa=Wb.stride|0,nc=Wb.divisor|0);gb=pc.location;Ia=W[gb];if(1===mb){Ia.buffer||A.enableVertexAttribArray(gb);Eb=lb||1;if(Ia.type!==rb||Ia.size!==Eb||Ia.buffer!==fb||Ia.normalized!==Ic||Ia.offset!==fc||Ia.stride!==qa)A.bindBuffer(34962,fb.buffer),A.vertexAttribPointer(gb,Eb,rb,Ic,qa,fc),Ia.type=rb,Ia.size=Eb,Ia.buffer=fb,Ia.normalized=Ic,Ia.offset=fc,Ia.stride=qa;Ia.divisor!==nc&&(f.vertexAttribDivisorANGLE(gb,nc),Ia.divisor=nc)}else if(Ia.buffer&&(A.disableVertexAttribArray(gb),
Ia.buffer=null),Ia.x!==Va||Ia.y!==db||Ia.z!==za||Ia.w!==va)A.vertexAttrib4f(gb,Va,db,za,va),Ia.x=Va,Ia.y=db,Ia.z=za,Ia.w=va;Db=vb.call(this,ia,k,g);Sa=!1;Lc=null;Mb=0;Za=!1;xa=Xb=0;mc=1;La=0;Qb=5126;gc=ya=kb=hb=0;ha(Db)?(Sa=!0,Lc=J.createStream(34962,Db),Qb=Lc.dtype):(Lc=J.getBuffer(Db))?Qb=Lc.dtype:"constant"in Db?(mc=2,"number"===typeof Db.constant?(kb=Db.constant,ya=gc=hb=0):(kb=0<Db.constant.length?Db.constant[0]:0,ya=1<Db.constant.length?Db.constant[1]:0,gc=2<Db.constant.length?Db.constant[2]:
0,hb=3<Db.constant.length?Db.constant[3]:0)):(Lc=ha(Db.buffer)?J.createStream(34962,Db.buffer):J.getBuffer(Db.buffer),Qb="type"in Db?Nd[Db.type]:Lc.dtype,Za=!!Db.normalized,xa=Db.size|0,Xb=Db.offset|0,La=Db.stride|0,Mb=Db.divisor|0);Da=vd.location;sb=W[Da];if(1===mc){sb.buffer||A.enableVertexAttribArray(Da);tb=xa||1;if(sb.type!==Qb||sb.size!==tb||sb.buffer!==Lc||sb.normalized!==Za||sb.offset!==Xb||sb.stride!==La)A.bindBuffer(34962,Lc.buffer),A.vertexAttribPointer(Da,tb,Qb,Za,La,Xb),sb.type=Qb,sb.size=
tb,sb.buffer=Lc,sb.normalized=Za,sb.offset=Xb,sb.stride=La;sb.divisor!==Mb&&(f.vertexAttribDivisorANGLE(Da,Mb),sb.divisor=Mb)}else if(sb.buffer&&(A.disableVertexAttribArray(Da),sb.buffer=null),sb.x!==kb||sb.y!==ya||sb.z!==gc||sb.w!==hb)A.vertexAttrib4f(Da,kb,ya,gc,hb),sb.x=kb,sb.y=ya,sb.z=gc,sb.w=hb;Xa=Zb.call(this,ia,k,g);Ya=!1;oc=null;ad=0;wc=!1;Ob=Wa=0;ud=1;Ea=0;Ac=5126;zb=nb=Aa=Qa=0;ha(Xa)?(Ya=!0,oc=J.createStream(34962,Xa),Ac=oc.dtype):(oc=J.getBuffer(Xa))?Ac=oc.dtype:"constant"in Xa?(ud=2,"number"===
typeof Xa.constant?(Aa=Xa.constant,nb=zb=Qa=0):(Aa=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,zb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(oc=ha(Xa.buffer)?J.createStream(34962,Xa.buffer):J.getBuffer(Xa.buffer),Ac="type"in Xa?Nd[Xa.type]:oc.dtype,wc=!!Xa.normalized,Ob=Xa.size|0,Wa=Xa.offset|0,Ea=Xa.stride|0,ad=Xa.divisor|0);Fb=yc.location;ub=W[Fb];if(1===ud){ub.buffer||A.enableVertexAttribArray(Fb);xc=Ob||1;if(ub.type!==Ac||
ub.size!==xc||ub.buffer!==oc||ub.normalized!==wc||ub.offset!==Wa||ub.stride!==Ea)A.bindBuffer(34962,oc.buffer),A.vertexAttribPointer(Fb,xc,Ac,wc,Ea,Wa),ub.type=Ac,ub.size=xc,ub.buffer=oc,ub.normalized=wc,ub.offset=Wa,ub.stride=Ea;ub.divisor!==ad&&(f.vertexAttribDivisorANGLE(Fb,ad),ub.divisor=ad)}else if(ub.buffer&&(A.disableVertexAttribArray(Fb),ub.buffer=null),ub.x!==Aa||ub.y!==nb||ub.z!==zb||ub.w!==Qa)A.vertexAttrib4f(Fb,Aa,nb,zb,Qa),ub.x=Aa,ub.y=nb,ub.z=zb,ub.w=Qa;Ab=ua.call(this,ia,k,g);jd=!1;
vc=null;Jd=0;Oc=!1;bd=md=0;Yb=1;ec=0;Rb=5126;Bb=ob=$b=Fa=0;ha(Ab)?(jd=!0,vc=J.createStream(34962,Ab),Rb=vc.dtype):(vc=J.getBuffer(Ab))?Rb=vc.dtype:"constant"in Ab?(Yb=2,"number"===typeof Ab.constant?($b=Ab.constant,ob=Bb=Fa=0):($b=0<Ab.constant.length?Ab.constant[0]:0,ob=1<Ab.constant.length?Ab.constant[1]:0,Bb=2<Ab.constant.length?Ab.constant[2]:0,Fa=3<Ab.constant.length?Ab.constant[3]:0)):(vc=ha(Ab.buffer)?J.createStream(34962,Ab.buffer):J.getBuffer(Ab.buffer),Rb="type"in Ab?Nd[Ab.type]:vc.dtype,
Oc=!!Ab.normalized,bd=Ab.size|0,md=Ab.offset|0,ec=Ab.stride|0,Jd=Ab.divisor|0);Pb=zc.location;Sb=W[Pb];if(1===Yb){Sb.buffer||A.enableVertexAttribArray(Pb);hc=bd||1;if(Sb.type!==Rb||Sb.size!==hc||Sb.buffer!==vc||Sb.normalized!==Oc||Sb.offset!==md||Sb.stride!==ec)A.bindBuffer(34962,vc.buffer),A.vertexAttribPointer(Pb,hc,Rb,Oc,ec,md),Sb.type=Rb,Sb.size=hc,Sb.buffer=vc,Sb.normalized=Oc,Sb.offset=md,Sb.stride=ec;Sb.divisor!==Jd&&(f.vertexAttribDivisorANGLE(Pb,Jd),Sb.divisor=Jd)}else if(Sb.buffer&&(A.disableVertexAttribArray(Pb),
Sb.buffer=null),Sb.x!==$b||Sb.y!==ob||Sb.z!==Bb||Sb.w!==Fa)A.vertexAttrib4f(Pb,$b,ob,Bb,Fa),Sb.x=$b,Sb.y=ob,Sb.z=Bb,Sb.w=Fa;jc=Oa.call(this,ia,k,g);ed=!1;Ec=null;Fc=0;Gc=!1;$c=Pc=0;Sc=1;Qc=0;Nb=5126;Tc=Jc=Rc=Hb=0;ha(jc)?(ed=!0,Ec=J.createStream(34962,jc),Nb=Ec.dtype):(Ec=J.getBuffer(jc))?Nb=Ec.dtype:"constant"in jc?(Sc=2,"number"===typeof jc.constant?(Rc=jc.constant,Jc=Tc=Hb=0):(Rc=0<jc.constant.length?jc.constant[0]:0,Jc=1<jc.constant.length?jc.constant[1]:0,Tc=2<jc.constant.length?jc.constant[2]:
0,Hb=3<jc.constant.length?jc.constant[3]:0)):(Ec=ha(jc.buffer)?J.createStream(34962,jc.buffer):J.getBuffer(jc.buffer),Nb="type"in jc?Nd[jc.type]:Ec.dtype,Gc=!!jc.normalized,$c=jc.size|0,Pc=jc.offset|0,Qc=jc.stride|0,Fc=jc.divisor|0);ic=da.location;Wc=W[ic];if(1===Sc){Wc.buffer||A.enableVertexAttribArray(ic);od=$c||1;if(Wc.type!==Nb||Wc.size!==od||Wc.buffer!==Ec||Wc.normalized!==Gc||Wc.offset!==Pc||Wc.stride!==Qc)A.bindBuffer(34962,Ec.buffer),A.vertexAttribPointer(ic,od,Nb,Gc,Qc,Pc),Wc.type=Nb,Wc.size=
od,Wc.buffer=Ec,Wc.normalized=Gc,Wc.offset=Pc,Wc.stride=Qc;Wc.divisor!==Fc&&(f.vertexAttribDivisorANGLE(ic,Fc),Wc.divisor=Fc)}else if(Wc.buffer&&(A.disableVertexAttribArray(ic),Wc.buffer=null),Wc.x!==Rc||Wc.y!==Jc||Wc.z!==Tc||Wc.w!==Hb)A.vertexAttrib4f(ic,Rc,Jc,Tc,Hb),Wc.x=Rc,Wc.y=Jc,Wc.z=Tc,Wc.w=Hb;gd=X.call(this,ia,k,g);Te=!1;Xc=null;Xd=0;Ld=!1;re=te=0;Vd=1;Gd=0;Dd=5126;hd=pd=Hc=dd=0;ha(gd)?(Te=!0,Xc=J.createStream(34962,gd),Dd=Xc.dtype):(Xc=J.getBuffer(gd))?Dd=Xc.dtype:"constant"in gd?(Vd=2,"number"===
typeof gd.constant?(Hc=gd.constant,pd=hd=dd=0):(Hc=0<gd.constant.length?gd.constant[0]:0,pd=1<gd.constant.length?gd.constant[1]:0,hd=2<gd.constant.length?gd.constant[2]:0,dd=3<gd.constant.length?gd.constant[3]:0)):(Xc=ha(gd.buffer)?J.createStream(34962,gd.buffer):J.getBuffer(gd.buffer),Dd="type"in gd?Nd[gd.type]:Xc.dtype,Ld=!!gd.normalized,re=gd.size|0,te=gd.offset|0,Gd=gd.stride|0,Xd=gd.divisor|0);Yc=$a.location;rd=W[Yc];if(1===Vd){rd.buffer||A.enableVertexAttribArray(Yc);Ad=re||1;if(rd.type!==Dd||
rd.size!==Ad||rd.buffer!==Xc||rd.normalized!==Ld||rd.offset!==te||rd.stride!==Gd)A.bindBuffer(34962,Xc.buffer),A.vertexAttribPointer(Yc,Ad,Dd,Ld,Gd,te),rd.type=Dd,rd.size=Ad,rd.buffer=Xc,rd.normalized=Ld,rd.offset=te,rd.stride=Gd;rd.divisor!==Xd&&(f.vertexAttribDivisorANGLE(Yc,Xd),rd.divisor=Xd)}else if(rd.buffer&&(A.disableVertexAttribArray(Yc),rd.buffer=null),rd.x!==Hc||rd.y!==pd||rd.z!==hd||rd.w!==dd)A.vertexAttrib4f(Yc,Hc,pd,hd,dd),rd.x=Hc,rd.y=pd,rd.z=hd,rd.w=dd;Bd=K.call(this,ia,k,g);Le=!1;
ke=null;ue=0;fe=!1;be=ee=0;ne=1;$d=0;he=5126;je=oe=Vc=Bc=0;ha(Bd)?(Le=!0,ke=J.createStream(34962,Bd),he=ke.dtype):(ke=J.getBuffer(Bd))?he=ke.dtype:"constant"in Bd?(ne=2,"number"===typeof Bd.constant?(Vc=Bd.constant,oe=je=Bc=0):(Vc=0<Bd.constant.length?Bd.constant[0]:0,oe=1<Bd.constant.length?Bd.constant[1]:0,je=2<Bd.constant.length?Bd.constant[2]:0,Bc=3<Bd.constant.length?Bd.constant[3]:0)):(ke=ha(Bd.buffer)?J.createStream(34962,Bd.buffer):J.getBuffer(Bd.buffer),he="type"in Bd?Nd[Bd.type]:ke.dtype,
fe=!!Bd.normalized,be=Bd.size|0,ee=Bd.offset|0,$d=Bd.stride|0,ue=Bd.divisor|0);Ed=T.location;Md=W[Ed];if(1===ne){Md.buffer||A.enableVertexAttribArray(Ed);Od=be||4;if(Md.type!==he||Md.size!==Od||Md.buffer!==ke||Md.normalized!==fe||Md.offset!==ee||Md.stride!==$d)A.bindBuffer(34962,ke.buffer),A.vertexAttribPointer(Ed,Od,he,fe,$d,ee),Md.type=he,Md.size=Od,Md.buffer=ke,Md.normalized=fe,Md.offset=ee,Md.stride=$d;Md.divisor!==ue&&(f.vertexAttribDivisorANGLE(Ed,ue),Md.divisor=ue)}else if(Md.buffer&&(A.disableVertexAttribArray(Ed),
Md.buffer=null),Md.x!==Vc||Md.y!==oe||Md.z!==je||Md.w!==Bc)A.vertexAttrib4f(Ed,Vc,oe,je,Bc),Md.x=Vc,Md.y=oe,Md.z=je,Md.w=Bc;Pd=M.call(this,ia,k,g);ie=!1;Be=null;ve=0;le=!1;Me=Xe=0;He=1;pe=0;ye=5126;ze=Ee=De=Ce=0;ha(Pd)?(ie=!0,Be=J.createStream(34962,Pd),ye=Be.dtype):(Be=J.getBuffer(Pd))?ye=Be.dtype:"constant"in Pd?(He=2,"number"===typeof Pd.constant?(De=Pd.constant,Ee=ze=Ce=0):(De=0<Pd.constant.length?Pd.constant[0]:0,Ee=1<Pd.constant.length?Pd.constant[1]:0,ze=2<Pd.constant.length?Pd.constant[2]:
0,Ce=3<Pd.constant.length?Pd.constant[3]:0)):(Be=ha(Pd.buffer)?J.createStream(34962,Pd.buffer):J.getBuffer(Pd.buffer),ye="type"in Pd?Nd[Pd.type]:Be.dtype,le=!!Pd.normalized,Me=Pd.size|0,Xe=Pd.offset|0,pe=Pd.stride|0,ve=Pd.divisor|0);Hd=ac.location;Sd=W[Hd];if(1===He){Sd.buffer||A.enableVertexAttribArray(Hd);Yd=Me||4;if(Sd.type!==ye||Sd.size!==Yd||Sd.buffer!==Be||Sd.normalized!==le||Sd.offset!==Xe||Sd.stride!==pe)A.bindBuffer(34962,Be.buffer),A.vertexAttribPointer(Hd,Yd,ye,le,pe,Xe),Sd.type=ye,Sd.size=
Yd,Sd.buffer=Be,Sd.normalized=le,Sd.offset=Xe,Sd.stride=pe;Sd.divisor!==ve&&(f.vertexAttribDivisorANGLE(Hd,ve),Sd.divisor=ve)}else if(Sd.buffer&&(A.disableVertexAttribArray(Hd),Sd.buffer=null),Sd.x!==De||Sd.y!==Ee||Sd.z!==ze||Sd.w!==Ce)A.vertexAttrib4f(Hd,De,Ee,ze,Ce),Sd.x=De,Sd.y=Ee,Sd.z=ze,Sd.w=Ce;ae=Q.call(this,ia,k,g);Fe=!1;zd=null;Qd=0;we=!1;ef=Ge=0;We=1;Ne=0;Ie=5126;Pe=Oe=Re=Ve=0;ha(ae)?(Fe=!0,zd=J.createStream(34962,ae),Ie=zd.dtype):(zd=J.getBuffer(ae))?Ie=zd.dtype:"constant"in ae?(We=2,"number"===
typeof ae.constant?(Re=ae.constant,Oe=Pe=Ve=0):(Re=0<ae.constant.length?ae.constant[0]:0,Oe=1<ae.constant.length?ae.constant[1]:0,Pe=2<ae.constant.length?ae.constant[2]:0,Ve=3<ae.constant.length?ae.constant[3]:0)):(zd=ha(ae.buffer)?J.createStream(34962,ae.buffer):J.getBuffer(ae.buffer),Ie="type"in ae?Nd[ae.type]:zd.dtype,we=!!ae.normalized,ef=ae.size|0,Ge=ae.offset|0,Ne=ae.stride|0,Qd=ae.divisor|0);Rd=ja.location;Wd=W[Rd];if(1===We){Wd.buffer||A.enableVertexAttribArray(Rd);Qe=ef||1;if(Wd.type!==Ie||
Wd.size!==Qe||Wd.buffer!==zd||Wd.normalized!==we||Wd.offset!==Ge||Wd.stride!==Ne)A.bindBuffer(34962,zd.buffer),A.vertexAttribPointer(Rd,Qe,Ie,we,Ne,Ge),Wd.type=Ie,Wd.size=Qe,Wd.buffer=zd,Wd.normalized=we,Wd.offset=Ge,Wd.stride=Ne;Wd.divisor!==Qd&&(f.vertexAttribDivisorANGLE(Rd,Qd),Wd.divisor=Qd)}else if(Wd.buffer&&(A.disableVertexAttribArray(Rd),Wd.buffer=null),Wd.x!==Re||Wd.y!==Oe||Wd.z!==Pe||Wd.w!==Ve)A.vertexAttrib4f(Rd,Re,Oe,Pe,Ve),Wd.x=Re,Wd.y=Oe,Wd.z=Pe,Wd.w=Ve;ff=ia.pixelRatio;g&&kf===ff||
(kf=ff,A.uniform1f(Ga.location,ff));bf=k.scale;gf=bf[0];jf=bf[1];g&&hf===gf&&pf===jf||(hf=gf,pf=jf,A.uniform2f(U.location,gf,jf));mf=k.scaleFract;qf=mf[0];Cf=mf[1];g&&Bf===qf&&Je===Cf||(Bf=qf,Je=Cf,A.uniform2f(pb.location,qf,Cf));xe=k.translate;nf=xe[0];Df=xe[1];g&&of===nf&&Gf===Df||(of=nf,Gf=Df,A.uniform2f(ra.location,nf,Df));Af=k.translateFract;Ef=Af[0];vf=Af[1];g&&Ff===Ef&&wf===vf||(Ff=Ef,wf=vf,A.uniform2f(Ib.location,Ef,vf));uf=L.call(this,ia,k,g);xf=uf[0];If=uf[1];g&&yf===xf&&Kf===If||(yf=xf,
Kf=If,A.uniform2f(Ha.location,xf,If));Lf=k.opacity;g&&Mf===Lf||(Mf=Lf,A.uniform1f(Ba.location,Lf));(sf=k.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Rf=sf._texture;A.uniform1i(ba.location,Rf.bind());Hf=k.elements;tf=null;(tf=(dg=ha(Hf))?ab.createStream(Hf):ab.getElements(Hf))&&A.bindBuffer(34963,tf.buffer.buffer);Sf=k.offset;if(Tf=k.count)0<Dc?tf?f.drawElementsInstancedANGLE(0,Tf,tf.type,Sf<<(tf.type-5121>>1),Dc):f.drawArraysInstancedANGLE(0,Sf,Tf,Dc):0>Dc&&(tf?A.drawElements(0,
Tf,tf.type,Sf<<(tf.type-5121>>1)):A.drawArrays(0,Sf,Tf)),ia.viewportWidth=Vb,ia.viewportHeight=Na,wd&&J.destroyStream(fb),Sa&&J.destroyStream(Lc),Ya&&J.destroyStream(oc),jd&&J.destroyStream(vc),ed&&J.destroyStream(Ec),Te&&J.destroyStream(Xc),Le&&J.destroyStream(ke),ie&&J.destroyStream(Be),Fe&&J.destroyStream(zd),Rf.unbind(),dg&&ab.destroyStream(tf)}oa.unbind();Ca.dirty=!0;na.setVAO(null);c&&(u.cpuTime+=performance.now()-e)},draw:function(d){var c,k,m,q,t,z,D,C,F,G,O,M,N,R,K,L,P,S,Q,V,fa,X,Y,ca,ea,
wa,la,oa,sa,ua,cb,Jb,Ma,xb,Ra,pa,Ka,ib,Ta,Kb,eb,Oa,Tb,Ja,lc,Ub,vb,Vb,Na,qb,yb,jb,Pa,qc,Wb,Mc,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,mc,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,Zb,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,ed,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,Xd,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe,Me,He,pe;c=H.next;c!==H.cur&&(c?A.bindFramebuffer(36160,
c.framebuffer):A.bindFramebuffer(36160,null),H.cur=c);if(Ca.dirty){var ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf,pf,mf,qf;ye=ta.dither;ye!==Ca.dither&&(ye?A.enable(3024):A.disable(3024),Ca.dither=ye);Ce=aa[0];De=aa[1];if(Ce!==E[0]||De!==E[1])A.blendEquationSeparate(Ce,De),E[0]=Ce,E[1]=De;Ee=ta.depth_func;Ee!==Ca.depth_func&&(A.depthFunc(Ee),Ca.depth_func=Ee);ze=ma[0];Hd=ma[1];if(ze!==h[0]||Hd!==h[1])A.depthRange(ze,Hd),h[0]=ze,h[1]=Hd;Sd=ta.depth_mask;
Sd!==Ca.depth_mask&&(A.depthMask(Sd),Ca.depth_mask=Sd);Yd=l[0];ae=l[1];Fe=l[2];zd=l[3];if(Yd!==rc[0]||ae!==rc[1]||Fe!==rc[2]||zd!==rc[3])A.colorMask(Yd,ae,Fe,zd),rc[0]=Yd,rc[1]=ae,rc[2]=Fe,rc[3]=zd;Qd=ta.cull_enable;Qd!==Ca.cull_enable&&(Qd?A.enable(2884):A.disable(2884),Ca.cull_enable=Qd);we=ta.cull_face;we!==Ca.cull_face&&(A.cullFace(we),Ca.cull_face=we);Ge=ta.frontFace;Ge!==Ca.frontFace&&(A.frontFace(Ge),Ca.frontFace=Ge);ef=ta.lineWidth;ef!==Ca.lineWidth&&(A.lineWidth(ef),Ca.lineWidth=ef);We=ta.polygonOffset_enable;
We!==Ca.polygonOffset_enable&&(We?A.enable(32823):A.disable(32823),Ca.polygonOffset_enable=We);Ne=Lb[0];Ie=Lb[1];if(Ne!==Cb[0]||Ie!==Cb[1])A.polygonOffset(Ne,Ie),Cb[0]=Ne,Cb[1]=Ie;Ve=ta.sample_alpha;Ve!==Ca.sample_alpha&&(Ve?A.enable(32926):A.disable(32926),Ca.sample_alpha=Ve);Re=ta.sample_enable;Re!==Ca.sample_enable&&(Re?A.enable(32928):A.disable(32928),Ca.sample_enable=Re);Oe=Ue[0];Pe=Ue[1];if(Oe!==ce[0]||Pe!==ce[1])A.sampleCoverage(Oe,Pe),ce[0]=Oe,ce[1]=Pe;Rd=ta.stencil_mask;Rd!==Ca.stencil_mask&&
(A.stencilMask(Rd),Ca.stencil_mask=Rd);Wd=Id[0];Qe=Id[1];ff=Id[2];if(Wd!==qe[0]||Qe!==qe[1]||ff!==qe[2])A.stencilFunc(Wd,Qe,ff),qe[0]=Wd,qe[1]=Qe,qe[2]=ff;kf=se[0];bf=se[1];gf=se[2];hf=se[3];if(kf!==Fd[0]||bf!==Fd[1]||gf!==Fd[2]||hf!==Fd[3])A.stencilOpSeparate(kf,bf,gf,hf),Fd[0]=kf,Fd[1]=bf,Fd[2]=gf,Fd[3]=hf;jf=yd[0];pf=yd[1];mf=yd[2];qf=yd[3];if(jf!==ge[0]||pf!==ge[1]||mf!==ge[2]||qf!==ge[3])A.stencilOpSeparate(jf,pf,mf,qf),ge[0]=jf,ge[1]=pf,ge[2]=mf,ge[3]=qf}k=d.viewport;m=k.x|0;q=k.y|0;t="width"in
k?k.width|0:ia.framebufferWidth-m;z="height"in k?k.height|0:ia.framebufferHeight-q;D=ia.viewportWidth;ia.viewportWidth=t;C=ia.viewportHeight;ia.viewportHeight=z;A.viewport(m,q,t,z);Zd[0]=m;Zd[1]=q;Zd[2]=t;Zd[3]=z;A.blendColor(0,0,0,1);y[0]=0;y[1]=0;y[2]=0;y[3]=1;A.enable(3042);Ca.blend_enable=!0;A.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;A.disable(2929);Ca.depth_enable=!1;F=d.viewport;G=F.x|0;O=F.y|0;M="width"in F?F.width|0:ia.framebufferWidth-G;N="height"in F?F.height|
0:ia.framebufferHeight-O;A.scissor(G,O,M,N);de[0]=G;de[1]=O;de[2]=M;de[3]=N;A.enable(3089);Ca.scissor_enable=!0;A.disable(2960);Ca.stencil_enable=!1;if(R=Ca.profile)K=performance.now(),u.count++;A.useProgram(n.program);L=Uc.angle_instanced_arrays;na.setVAO(null);P=I.call(this,ia,d,0);S=!1;Q=null;V=0;fa=!1;Y=X=0;ca=1;ea=0;wa=5126;ua=sa=oa=la=0;ha(P)?(S=!0,Q=J.createStream(34962,P),wa=Q.dtype):(Q=J.getBuffer(P))?wa=Q.dtype:"constant"in P?(ca=2,"number"===typeof P.constant?(oa=P.constant,sa=ua=la=0):
(oa=0<P.constant.length?P.constant[0]:0,sa=1<P.constant.length?P.constant[1]:0,ua=2<P.constant.length?P.constant[2]:0,la=3<P.constant.length?P.constant[3]:0)):(Q=ha(P.buffer)?J.createStream(34962,P.buffer):J.getBuffer(P.buffer),wa="type"in P?Nd[P.type]:Q.dtype,fa=!!P.normalized,Y=P.size|0,X=P.offset|0,ea=P.stride|0,V=P.divisor|0);cb=pc.location;Jb=W[cb];if(1===ca){Jb.buffer||A.enableVertexAttribArray(cb);Ma=Y||1;if(Jb.type!==wa||Jb.size!==Ma||Jb.buffer!==Q||Jb.normalized!==fa||Jb.offset!==X||Jb.stride!==
ea)A.bindBuffer(34962,Q.buffer),A.vertexAttribPointer(cb,Ma,wa,fa,ea,X),Jb.type=wa,Jb.size=Ma,Jb.buffer=Q,Jb.normalized=fa,Jb.offset=X,Jb.stride=ea;Jb.divisor!==V&&(L.vertexAttribDivisorANGLE(cb,V),Jb.divisor=V)}else if(Jb.buffer&&(A.disableVertexAttribArray(cb),Jb.buffer=null),Jb.x!==oa||Jb.y!==sa||Jb.z!==ua||Jb.w!==la)A.vertexAttrib4f(cb,oa,sa,ua,la),Jb.x=oa,Jb.y=sa,Jb.z=ua,Jb.w=la;xb=e.call(this,ia,d,0);Ra=!1;pa=null;Ka=0;ib=!1;Kb=Ta=0;eb=1;Oa=0;Tb=5126;vb=Ub=lc=Ja=0;ha(xb)?(Ra=!0,pa=J.createStream(34962,
xb),Tb=pa.dtype):(pa=J.getBuffer(xb))?Tb=pa.dtype:"constant"in xb?(eb=2,"number"===typeof xb.constant?(lc=xb.constant,Ub=vb=Ja=0):(lc=0<xb.constant.length?xb.constant[0]:0,Ub=1<xb.constant.length?xb.constant[1]:0,vb=2<xb.constant.length?xb.constant[2]:0,Ja=3<xb.constant.length?xb.constant[3]:0)):(pa=ha(xb.buffer)?J.createStream(34962,xb.buffer):J.getBuffer(xb.buffer),Tb="type"in xb?Nd[xb.type]:pa.dtype,ib=!!xb.normalized,Kb=xb.size|0,Ta=xb.offset|0,Oa=xb.stride|0,Ka=xb.divisor|0);Vb=vd.location;Na=
W[Vb];if(1===eb){Na.buffer||A.enableVertexAttribArray(Vb);qb=Kb||1;if(Na.type!==Tb||Na.size!==qb||Na.buffer!==pa||Na.normalized!==ib||Na.offset!==Ta||Na.stride!==Oa)A.bindBuffer(34962,pa.buffer),A.vertexAttribPointer(Vb,qb,Tb,ib,Oa,Ta),Na.type=Tb,Na.size=qb,Na.buffer=pa,Na.normalized=ib,Na.offset=Ta,Na.stride=Oa;Na.divisor!==Ka&&(L.vertexAttribDivisorANGLE(Vb,Ka),Na.divisor=Ka)}else if(Na.buffer&&(A.disableVertexAttribArray(Vb),Na.buffer=null),Na.x!==lc||Na.y!==Ub||Na.z!==vb||Na.w!==Ja)A.vertexAttrib4f(Vb,
lc,Ub,vb,Ja),Na.x=lc,Na.y=Ub,Na.z=vb,Na.w=Ja;yb=b.call(this,ia,d,0);jb=!1;Pa=null;qc=0;Wb=!1;fb=Mc=0;nc=1;Ic=0;fc=5126;rb=qa=mb=lb=0;ha(yb)?(jb=!0,Pa=J.createStream(34962,yb),fc=Pa.dtype):(Pa=J.getBuffer(yb))?fc=Pa.dtype:"constant"in yb?(nc=2,"number"===typeof yb.constant?(mb=yb.constant,qa=rb=lb=0):(mb=0<yb.constant.length?yb.constant[0]:0,qa=1<yb.constant.length?yb.constant[1]:0,rb=2<yb.constant.length?yb.constant[2]:0,lb=3<yb.constant.length?yb.constant[3]:0)):(Pa=ha(yb.buffer)?J.createStream(34962,
yb.buffer):J.getBuffer(yb.buffer),fc="type"in yb?Nd[yb.type]:Pa.dtype,Wb=!!yb.normalized,fb=yb.size|0,Mc=yb.offset|0,Ic=yb.stride|0,qc=yb.divisor|0);va=yc.location;Va=W[va];if(1===nc){Va.buffer||A.enableVertexAttribArray(va);db=fb||1;if(Va.type!==fc||Va.size!==db||Va.buffer!==Pa||Va.normalized!==Wb||Va.offset!==Mc||Va.stride!==Ic)A.bindBuffer(34962,Pa.buffer),A.vertexAttribPointer(va,db,fc,Wb,Ic,Mc),Va.type=fc,Va.size=db,Va.buffer=Pa,Va.normalized=Wb,Va.offset=Mc,Va.stride=Ic;Va.divisor!==qc&&(L.vertexAttribDivisorANGLE(va,
qc),Va.divisor=qc)}else if(Va.buffer&&(A.disableVertexAttribArray(va),Va.buffer=null),Va.x!==mb||Va.y!==qa||Va.z!==rb||Va.w!==lb)A.vertexAttrib4f(va,mb,qa,rb,lb),Va.x=mb,Va.y=qa,Va.z=rb,Va.w=lb;za=p.call(this,ia,d,0);gb=!1;Ia=null;Eb=0;Db=!1;Lc=Sa=0;Mb=1;Za=0;Xb=5126;Qb=La=mc=xa=0;ha(za)?(gb=!0,Ia=J.createStream(34962,za),Xb=Ia.dtype):(Ia=J.getBuffer(za))?Xb=Ia.dtype:"constant"in za?(Mb=2,"number"===typeof za.constant?(mc=za.constant,La=Qb=xa=0):(mc=0<za.constant.length?za.constant[0]:0,La=1<za.constant.length?
za.constant[1]:0,Qb=2<za.constant.length?za.constant[2]:0,xa=3<za.constant.length?za.constant[3]:0)):(Ia=ha(za.buffer)?J.createStream(34962,za.buffer):J.getBuffer(za.buffer),Xb="type"in za?Nd[za.type]:Ia.dtype,Db=!!za.normalized,Lc=za.size|0,Sa=za.offset|0,Za=za.stride|0,Eb=za.divisor|0);hb=zc.location;kb=W[hb];if(1===Mb){kb.buffer||A.enableVertexAttribArray(hb);ya=Lc||1;if(kb.type!==Xb||kb.size!==ya||kb.buffer!==Ia||kb.normalized!==Db||kb.offset!==Sa||kb.stride!==Za)A.bindBuffer(34962,Ia.buffer),
A.vertexAttribPointer(hb,ya,Xb,Db,Za,Sa),kb.type=Xb,kb.size=ya,kb.buffer=Ia,kb.normalized=Db,kb.offset=Sa,kb.stride=Za;kb.divisor!==Eb&&(L.vertexAttribDivisorANGLE(hb,Eb),kb.divisor=Eb)}else if(kb.buffer&&(A.disableVertexAttribArray(hb),kb.buffer=null),kb.x!==mc||kb.y!==La||kb.z!==Qb||kb.w!==xa)A.vertexAttrib4f(hb,mc,La,Qb,xa),kb.x=mc,kb.y=La,kb.z=Qb,kb.w=xa;gc=a.call(this,ia,d,0);Da=!1;sb=null;tb=0;Xa=!1;oc=Ya=0;ad=1;wc=0;Wa=5126;Ac=Ea=Zb=Ob=0;ha(gc)?(Da=!0,sb=J.createStream(34962,gc),Wa=sb.dtype):
(sb=J.getBuffer(gc))?Wa=sb.dtype:"constant"in gc?(ad=2,"number"===typeof gc.constant?(Zb=gc.constant,Ea=Ac=Ob=0):(Zb=0<gc.constant.length?gc.constant[0]:0,Ea=1<gc.constant.length?gc.constant[1]:0,Ac=2<gc.constant.length?gc.constant[2]:0,Ob=3<gc.constant.length?gc.constant[3]:0)):(sb=ha(gc.buffer)?J.createStream(34962,gc.buffer):J.getBuffer(gc.buffer),Wa="type"in gc?Nd[gc.type]:sb.dtype,Xa=!!gc.normalized,oc=gc.size|0,Ya=gc.offset|0,wc=gc.stride|0,tb=gc.divisor|0);Qa=da.location;Aa=W[Qa];if(1===ad){Aa.buffer||
A.enableVertexAttribArray(Qa);nb=oc||1;if(Aa.type!==Wa||Aa.size!==nb||Aa.buffer!==sb||Aa.normalized!==Xa||Aa.offset!==Ya||Aa.stride!==wc)A.bindBuffer(34962,sb.buffer),A.vertexAttribPointer(Qa,nb,Wa,Xa,wc,Ya),Aa.type=Wa,Aa.size=nb,Aa.buffer=sb,Aa.normalized=Xa,Aa.offset=Ya,Aa.stride=wc;Aa.divisor!==tb&&(L.vertexAttribDivisorANGLE(Qa,tb),Aa.divisor=tb)}else if(Aa.buffer&&(A.disableVertexAttribArray(Qa),Aa.buffer=null),Aa.x!==Zb||Aa.y!==Ea||Aa.z!==Ac||Aa.w!==Ob)A.vertexAttrib4f(Qa,Zb,Ea,Ac,Ob),Aa.x=
Zb,Aa.y=Ea,Aa.z=Ac,Aa.w=Ob;zb=g.call(this,ia,d,0);Fb=!1;ub=null;xc=0;Ab=!1;vc=jd=0;Jd=1;Oc=0;md=5126;Rb=ec=Yb=bd=0;ha(zb)?(Fb=!0,ub=J.createStream(34962,zb),md=ub.dtype):(ub=J.getBuffer(zb))?md=ub.dtype:"constant"in zb?(Jd=2,"number"===typeof zb.constant?(Yb=zb.constant,ec=Rb=bd=0):(Yb=0<zb.constant.length?zb.constant[0]:0,ec=1<zb.constant.length?zb.constant[1]:0,Rb=2<zb.constant.length?zb.constant[2]:0,bd=3<zb.constant.length?zb.constant[3]:0)):(ub=ha(zb.buffer)?J.createStream(34962,zb.buffer):J.getBuffer(zb.buffer),
md="type"in zb?Nd[zb.type]:ub.dtype,Ab=!!zb.normalized,vc=zb.size|0,jd=zb.offset|0,Oc=zb.stride|0,xc=zb.divisor|0);Fa=$a.location;$b=W[Fa];if(1===Jd){$b.buffer||A.enableVertexAttribArray(Fa);ob=vc||1;if($b.type!==md||$b.size!==ob||$b.buffer!==ub||$b.normalized!==Ab||$b.offset!==jd||$b.stride!==Oc)A.bindBuffer(34962,ub.buffer),A.vertexAttribPointer(Fa,ob,md,Ab,Oc,jd),$b.type=md,$b.size=ob,$b.buffer=ub,$b.normalized=Ab,$b.offset=jd,$b.stride=Oc;$b.divisor!==xc&&(L.vertexAttribDivisorANGLE(Fa,xc),$b.divisor=
xc)}else if($b.buffer&&(A.disableVertexAttribArray(Fa),$b.buffer=null),$b.x!==Yb||$b.y!==ec||$b.z!==Rb||$b.w!==bd)A.vertexAttrib4f(Fa,Yb,ec,Rb,bd),$b.x=Yb,$b.y=ec,$b.z=Rb,$b.w=bd;Bb=r.call(this,ia,d,0);Pb=!1;Sb=null;hc=0;jc=!1;Ec=ed=0;Fc=1;Gc=0;Pc=5126;Nb=Qc=Sc=$c=0;ha(Bb)?(Pb=!0,Sb=J.createStream(34962,Bb),Pc=Sb.dtype):(Sb=J.getBuffer(Bb))?Pc=Sb.dtype:"constant"in Bb?(Fc=2,"number"===typeof Bb.constant?(Sc=Bb.constant,Qc=Nb=$c=0):(Sc=0<Bb.constant.length?Bb.constant[0]:0,Qc=1<Bb.constant.length?
Bb.constant[1]:0,Nb=2<Bb.constant.length?Bb.constant[2]:0,$c=3<Bb.constant.length?Bb.constant[3]:0)):(Sb=ha(Bb.buffer)?J.createStream(34962,Bb.buffer):J.getBuffer(Bb.buffer),Pc="type"in Bb?Nd[Bb.type]:Sb.dtype,jc=!!Bb.normalized,Ec=Bb.size|0,ed=Bb.offset|0,Gc=Bb.stride|0,hc=Bb.divisor|0);Hb=T.location;Rc=W[Hb];if(1===Fc){Rc.buffer||A.enableVertexAttribArray(Hb);Jc=Ec||4;if(Rc.type!==Pc||Rc.size!==Jc||Rc.buffer!==Sb||Rc.normalized!==jc||Rc.offset!==ed||Rc.stride!==Gc)A.bindBuffer(34962,Sb.buffer),
A.vertexAttribPointer(Hb,Jc,Pc,jc,Gc,ed),Rc.type=Pc,Rc.size=Jc,Rc.buffer=Sb,Rc.normalized=jc,Rc.offset=ed,Rc.stride=Gc;Rc.divisor!==hc&&(L.vertexAttribDivisorANGLE(Hb,hc),Rc.divisor=hc)}else if(Rc.buffer&&(A.disableVertexAttribArray(Hb),Rc.buffer=null),Rc.x!==Sc||Rc.y!==Qc||Rc.z!==Nb||Rc.w!==$c)A.vertexAttrib4f(Hb,Sc,Qc,Nb,$c),Rc.x=Sc,Rc.y=Qc,Rc.z=Nb,Rc.w=$c;Tc=x.call(this,ia,d,0);ic=!1;Wc=null;od=0;gd=!1;Xc=Te=0;Xd=1;Ld=0;te=5126;Dd=Gd=Vd=re=0;ha(Tc)?(ic=!0,Wc=J.createStream(34962,Tc),te=Wc.dtype):
(Wc=J.getBuffer(Tc))?te=Wc.dtype:"constant"in Tc?(Xd=2,"number"===typeof Tc.constant?(Vd=Tc.constant,Gd=Dd=re=0):(Vd=0<Tc.constant.length?Tc.constant[0]:0,Gd=1<Tc.constant.length?Tc.constant[1]:0,Dd=2<Tc.constant.length?Tc.constant[2]:0,re=3<Tc.constant.length?Tc.constant[3]:0)):(Wc=ha(Tc.buffer)?J.createStream(34962,Tc.buffer):J.getBuffer(Tc.buffer),te="type"in Tc?Nd[Tc.type]:Wc.dtype,gd=!!Tc.normalized,Xc=Tc.size|0,Te=Tc.offset|0,Ld=Tc.stride|0,od=Tc.divisor|0);dd=ac.location;Hc=W[dd];if(1===Xd){Hc.buffer||
A.enableVertexAttribArray(dd);pd=Xc||4;if(Hc.type!==te||Hc.size!==pd||Hc.buffer!==Wc||Hc.normalized!==gd||Hc.offset!==Te||Hc.stride!==Ld)A.bindBuffer(34962,Wc.buffer),A.vertexAttribPointer(dd,pd,te,gd,Ld,Te),Hc.type=te,Hc.size=pd,Hc.buffer=Wc,Hc.normalized=gd,Hc.offset=Te,Hc.stride=Ld;Hc.divisor!==od&&(L.vertexAttribDivisorANGLE(dd,od),Hc.divisor=od)}else if(Hc.buffer&&(A.disableVertexAttribArray(dd),Hc.buffer=null),Hc.x!==Vd||Hc.y!==Gd||Hc.z!==Dd||Hc.w!==re)A.vertexAttrib4f(dd,Vd,Gd,Dd,re),Hc.x=
Vd,Hc.y=Gd,Hc.z=Dd,Hc.w=re;hd=f.call(this,ia,d,0);Yc=!1;rd=null;Ad=0;Bd=!1;ke=Le=0;ue=1;fe=0;ee=5126;he=$d=ne=be=0;ha(hd)?(Yc=!0,rd=J.createStream(34962,hd),ee=rd.dtype):(rd=J.getBuffer(hd))?ee=rd.dtype:"constant"in hd?(ue=2,"number"===typeof hd.constant?(ne=hd.constant,$d=he=be=0):(ne=0<hd.constant.length?hd.constant[0]:0,$d=1<hd.constant.length?hd.constant[1]:0,he=2<hd.constant.length?hd.constant[2]:0,be=3<hd.constant.length?hd.constant[3]:0)):(rd=ha(hd.buffer)?J.createStream(34962,hd.buffer):J.getBuffer(hd.buffer),
ee="type"in hd?Nd[hd.type]:rd.dtype,Bd=!!hd.normalized,ke=hd.size|0,Le=hd.offset|0,fe=hd.stride|0,Ad=hd.divisor|0);Bc=ja.location;Vc=W[Bc];if(1===ue){Vc.buffer||A.enableVertexAttribArray(Bc);oe=ke||1;if(Vc.type!==ee||Vc.size!==oe||Vc.buffer!==rd||Vc.normalized!==Bd||Vc.offset!==Le||Vc.stride!==fe)A.bindBuffer(34962,rd.buffer),A.vertexAttribPointer(Bc,oe,ee,Bd,fe,Le),Vc.type=ee,Vc.size=oe,Vc.buffer=rd,Vc.normalized=Bd,Vc.offset=Le,Vc.stride=fe;Vc.divisor!==Ad&&(L.vertexAttribDivisorANGLE(Bc,Ad),Vc.divisor=
Ad)}else if(Vc.buffer&&(A.disableVertexAttribArray(Bc),Vc.buffer=null),Vc.x!==ne||Vc.y!==$d||Vc.z!==he||Vc.w!==be)A.vertexAttrib4f(Bc,ne,$d,he,be),Vc.x=ne,Vc.y=$d,Vc.z=he,Vc.w=be;A.uniform1i(v.location,!1);A.uniform1f(Ga.location,ia.pixelRatio);je=d.scale;A.uniform2f(U.location,je[0],je[1]);Ed=d.scaleFract;A.uniform2f(pb.location,Ed[0],Ed[1]);Md=d.translate;A.uniform2f(ra.location,Md[0],Md[1]);Od=d.translateFract;A.uniform2f(Ib.location,Od[0],Od[1]);Pd=B.call(this,ia,d,0);A.uniform2f(Ha.location,
Pd[0],Pd[1]);A.uniform1f(Ba.location,d.opacity);A.uniform1i(cc.location,w.bind());(ie=d.markerTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);Be=ie._texture;A.uniform1i(ba.location,Be.bind());ve=d.elements;le=null;(le=(Xe=ha(ve))?ab.createStream(ve):ab.getElements(ve))&&A.bindBuffer(34963,le.buffer.buffer);Me=d.offset;if(He=d.count)pe=wb.instances,0<pe?le?L.drawElementsInstancedANGLE(0,He,le.type,Me<<(le.type-5121>>1),pe):L.drawArraysInstancedANGLE(0,Me,He,pe):0>pe&&(le?A.drawElements(0,
He,le.type,Me<<(le.type-5121>>1)):A.drawArrays(0,Me,He)),Ca.dirty=!0,na.setVAO(null),ia.viewportWidth=D,ia.viewportHeight=C,R&&(u.cpuTime+=performance.now()-K),S&&J.destroyStream(Q),Ra&&J.destroyStream(pa),jb&&J.destroyStream(Pa),gb&&J.destroyStream(Ia),Da&&J.destroyStream(sb),Fb&&J.destroyStream(ub),Pb&&J.destroyStream(Sb),ic&&J.destroyStream(Wc),Yc&&J.destroyStream(rd),w.unbind(),Be.unbind(),Xe&&ab.destroyStream(le)},scope:function(a,b,c){var e,f,g,h,l,p,r,n,x,v,y,w,A,I,E,H,B,M,L,Z,K,W,aa,Q,T,U,
X,ka,ba,da,ja,ma,na,pa,oa,ra,sa,ua,Ga,Ba,Ha,Ka,Cb,Oa,$a,zc,Na,qb,yb,jb,Pa,Lb,Wb,pb,fb,vb,vd,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,rc,Mb,Za,Xb,xa,ac,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,Ib,wc,Wa,Ob,Zb,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,cc,vc,pc,Oc,yc,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Id,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Uc,Xc,yd,de,Zd,Fd,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,ge,qe,se,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,ce,ve,le,Xe,Me,He,pe,ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,
Ue,We,Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf,pf,mf,qf,Bf,Cf,Je,xe,nf,of,Df,Gf,Af,Ef,Ff,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Hf,tf,dg,Sf,Tf,qg,cf,Ye,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,df,Ze,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;e=a.viewport;f=e.x|0;g=e.y|0;h="width"in e?e.width|0:ia.framebufferWidth-f;l="height"in e?e.height|0:ia.framebufferHeight-g;p=ia.viewportWidth;ia.viewportWidth=h;r=ia.viewportHeight;ia.viewportHeight=
l;n=ed[0];ed[0]=f;x=ed[1];ed[1]=g;v=ed[2];ed[2]=h;y=ed[3];ed[3]=l;w=F[0];F[0]=0;A=F[1];F[1]=0;I=F[2];F[2]=0;E=F[3];F[3]=1;H=ta.blend_enable;ta.blend_enable=!0;B=wa[0];wa[0]=770;M=wa[1];wa[1]=771;L=wa[2];wa[2]=773;Z=wa[3];wa[3]=1;K=ta.depth_enable;ta.depth_enable=!1;W=a.viewport;aa=W.x|0;Q=W.y|0;T="width"in W?W.width|0:ia.framebufferWidth-aa;U="height"in W?W.height|0:ia.framebufferHeight-Q;X=Xd[0];Xd[0]=aa;ka=Xd[1];Xd[1]=Q;ba=Xd[2];Xd[2]=T;da=Xd[3];Xd[3]=U;ja=ta.scissor_enable;ta.scissor_enable=!0;
ma=ta.stencil_enable;ta.stencil_enable=!1;if(na=Ca.profile)pa=performance.now(),u.count++;oa=a.elements;ra=null;ra=(sa=ha(oa))?ab.createStream(oa):ab.getElements(oa);ua=wb.elements;wb.elements=ra;Ga=a.offset;Ba=wb.offset;wb.offset=Ga;Ha=a.count;Ka=wb.count;wb.count=Ha;Cb=wb.primitive;wb.primitive=0;Oa=fa[45];fa[45]=!1;$a=a.markerTexture;zc=fa[48];fa[48]=$a;Na=a.opacity;qb=fa[10];fa[10]=Na;yb=D.call(this,ia,a,c);jb=fa[46];fa[46]=yb;Pa=fa[47];fa[47]=G;Lb=ia.pixelRatio;Wb=fa[34];fa[34]=Lb;pb=a.scale;
fb=fa[6];fa[6]=pb;vb=a.scaleFract;vd=fa[7];fa[7]=vb;fc=a.translate;lb=fa[8];fa[8]=fc;mb=a.translateFract;qa=fa[9];fa[9]=mb;rb=C.call(this,ia,a,c);va=!1;Va=null;db=0;za=!1;Ia=gb=0;Eb=1;Db=0;Sa=5126;Xb=Za=Mb=rc=0;ha(rb)?(va=!0,Va=J.createStream(34962,rb),Sa=Va.dtype):(Va=J.getBuffer(rb))?Sa=Va.dtype:"constant"in rb?(Eb=2,"number"===typeof rb.constant?(Mb=rb.constant,Za=Xb=rc=0):(Mb=0<rb.constant.length?rb.constant[0]:0,Za=1<rb.constant.length?rb.constant[1]:0,Xb=2<rb.constant.length?rb.constant[2]:
0,rc=3<rb.constant.length?rb.constant[3]:0)):(Va=ha(rb.buffer)?J.createStream(34962,rb.buffer):J.getBuffer(rb.buffer),Sa="type"in rb?Nd[rb.type]:Va.dtype,za=!!rb.normalized,Ia=rb.size|0,gb=rb.offset|0,Db=rb.stride|0,db=rb.divisor|0);xa=O.buffer;O.buffer=Va;ac=O.divisor;O.divisor=db;La=O.normalized;O.normalized=za;Qb=O.offset;O.offset=gb;hb=O.size;O.size=Ia;kb=O.state;O.state=Eb;ya=O.stride;O.stride=Db;gc=O.type;O.type=Sa;Da=O.w;O.w=rc;sb=O.x;O.x=Mb;tb=O.y;O.y=Za;Xa=O.z;O.z=Xb;Ya=Ja.call(this,ia,a,
c);oc=!1;Ib=null;wc=0;Wa=!1;Zb=Ob=0;Ea=1;Ac=0;Qa=5126;Fb=zb=nb=Aa=0;ha(Ya)?(oc=!0,Ib=J.createStream(34962,Ya),Qa=Ib.dtype):(Ib=J.getBuffer(Ya))?Qa=Ib.dtype:"constant"in Ya?(Ea=2,"number"===typeof Ya.constant?(nb=Ya.constant,zb=Fb=Aa=0):(nb=0<Ya.constant.length?Ya.constant[0]:0,zb=1<Ya.constant.length?Ya.constant[1]:0,Fb=2<Ya.constant.length?Ya.constant[2]:0,Aa=3<Ya.constant.length?Ya.constant[3]:0)):(Ib=ha(Ya.buffer)?J.createStream(34962,Ya.buffer):J.getBuffer(Ya.buffer),Qa="type"in Ya?Nd[Ya.type]:
Ib.dtype,Wa=!!Ya.normalized,Zb=Ya.size|0,Ob=Ya.offset|0,Ac=Ya.stride|0,wc=Ya.divisor|0);ub=R.buffer;R.buffer=Ib;xc=R.divisor;R.divisor=wc;Ab=R.normalized;R.normalized=Wa;cc=R.offset;R.offset=Ob;vc=R.size;R.size=Zb;pc=R.state;R.state=Ea;Oc=R.stride;R.stride=Ac;yc=R.type;R.type=Qa;bd=R.w;R.w=Aa;Yb=R.x;R.x=nb;ec=R.y;R.y=zb;Rb=R.z;R.z=Fb;Fa=mc.call(this,ia,a,c);$b=!1;ob=null;Bb=0;Pb=!1;hc=Sb=0;jc=1;Id=0;Ec=5126;$c=Pc=Gc=Fc=0;ha(Fa)?($b=!0,ob=J.createStream(34962,Fa),Ec=ob.dtype):(ob=J.getBuffer(Fa))?
Ec=ob.dtype:"constant"in Fa?(jc=2,"number"===typeof Fa.constant?(Gc=Fa.constant,Pc=$c=Fc=0):(Gc=0<Fa.constant.length?Fa.constant[0]:0,Pc=1<Fa.constant.length?Fa.constant[1]:0,$c=2<Fa.constant.length?Fa.constant[2]:0,Fc=3<Fa.constant.length?Fa.constant[3]:0)):(ob=ha(Fa.buffer)?J.createStream(34962,Fa.buffer):J.getBuffer(Fa.buffer),Ec="type"in Fa?Nd[Fa.type]:ob.dtype,Pb=!!Fa.normalized,hc=Fa.size|0,Sb=Fa.offset|0,Id=Fa.stride|0,Bb=Fa.divisor|0);Sc=k.buffer;k.buffer=ob;Qc=k.divisor;k.divisor=Bb;Nb=k.normalized;
k.normalized=Pb;Hb=k.offset;k.offset=Sb;Rc=k.size;k.size=hc;Jc=k.state;k.state=jc;Tc=k.stride;k.stride=Id;ic=k.type;k.type=Ec;Wc=k.w;k.w=Fc;od=k.x;k.x=Gc;gd=k.y;k.y=Pc;Uc=k.z;k.z=$c;Xc=z.call(this,ia,a,c);yd=!1;de=null;Zd=0;Fd=!1;Gd=Vd=0;Dd=1;dd=0;Hc=5126;rd=Yc=hd=pd=0;ha(Xc)?(yd=!0,de=J.createStream(34962,Xc),Hc=de.dtype):(de=J.getBuffer(Xc))?Hc=de.dtype:"constant"in Xc?(Dd=2,"number"===typeof Xc.constant?(hd=Xc.constant,Yc=rd=pd=0):(hd=0<Xc.constant.length?Xc.constant[0]:0,Yc=1<Xc.constant.length?
Xc.constant[1]:0,rd=2<Xc.constant.length?Xc.constant[2]:0,pd=3<Xc.constant.length?Xc.constant[3]:0)):(de=ha(Xc.buffer)?J.createStream(34962,Xc.buffer):J.getBuffer(Xc.buffer),Hc="type"in Xc?Nd[Xc.type]:de.dtype,Fd=!!Xc.normalized,Gd=Xc.size|0,Vd=Xc.offset|0,dd=Xc.stride|0,Zd=Xc.divisor|0);Ad=q.buffer;q.buffer=de;Bd=q.divisor;q.divisor=Zd;ge=q.normalized;q.normalized=Fd;qe=q.offset;q.offset=Vd;se=q.size;q.size=Gd;fe=q.state;q.state=Dd;ee=q.stride;q.stride=dd;be=q.type;q.type=Hc;ne=q.w;q.w=pd;$d=q.x;
q.x=hd;he=q.y;q.y=Yc;Bc=q.z;q.z=rd;Vc=ca.call(this,ia,a,c);oe=!1;je=null;Ed=0;Md=!1;Pd=Od=0;ie=1;ce=0;ve=5126;He=Me=Xe=le=0;ha(Vc)?(oe=!0,je=J.createStream(34962,Vc),ve=je.dtype):(je=J.getBuffer(Vc))?ve=je.dtype:"constant"in Vc?(ie=2,"number"===typeof Vc.constant?(Xe=Vc.constant,Me=He=le=0):(Xe=0<Vc.constant.length?Vc.constant[0]:0,Me=1<Vc.constant.length?Vc.constant[1]:0,He=2<Vc.constant.length?Vc.constant[2]:0,le=3<Vc.constant.length?Vc.constant[3]:0)):(je=ha(Vc.buffer)?J.createStream(34962,Vc.buffer):
J.getBuffer(Vc.buffer),ve="type"in Vc?Nd[Vc.type]:je.dtype,Md=!!Vc.normalized,Pd=Vc.size|0,Od=Vc.offset|0,ce=Vc.stride|0,Ed=Vc.divisor|0);pe=P.buffer;P.buffer=je;ye=P.divisor;P.divisor=Ed;Ce=P.normalized;P.normalized=Md;De=P.offset;P.offset=Od;Ee=P.size;P.size=Pd;ze=P.state;P.state=ie;Hd=P.stride;P.stride=ce;Sd=P.type;P.type=ve;Yd=P.w;P.w=le;ae=P.x;P.x=Xe;Fe=P.y;P.y=Me;zd=P.z;P.z=He;Qd=S.call(this,ia,a,c);we=!1;Ge=null;Ue=0;We=!1;Ie=Ne=0;Ve=1;Re=0;Oe=5126;Qe=Wd=Rd=Pe=0;ha(Qd)?(we=!0,Ge=J.createStream(34962,
Qd),Oe=Ge.dtype):(Ge=J.getBuffer(Qd))?Oe=Ge.dtype:"constant"in Qd?(Ve=2,"number"===typeof Qd.constant?(Rd=Qd.constant,Wd=Qe=Pe=0):(Rd=0<Qd.constant.length?Qd.constant[0]:0,Wd=1<Qd.constant.length?Qd.constant[1]:0,Qe=2<Qd.constant.length?Qd.constant[2]:0,Pe=3<Qd.constant.length?Qd.constant[3]:0)):(Ge=ha(Qd.buffer)?J.createStream(34962,Qd.buffer):J.getBuffer(Qd.buffer),Oe="type"in Qd?Nd[Qd.type]:Ge.dtype,We=!!Qd.normalized,Ie=Qd.size|0,Ne=Qd.offset|0,Re=Qd.stride|0,Ue=Qd.divisor|0);ff=t.buffer;t.buffer=
Ge;kf=t.divisor;t.divisor=Ue;bf=t.normalized;t.normalized=We;gf=t.offset;t.offset=Ne;hf=t.size;t.size=Ie;jf=t.state;t.state=Ve;pf=t.stride;t.stride=Re;mf=t.type;t.type=Oe;qf=t.w;t.w=Pe;Bf=t.x;t.x=Rd;Cf=t.y;t.y=Wd;Je=t.z;t.z=Qe;xe=la.call(this,ia,a,c);nf=!1;of=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;vf=0;wf=5126;If=yf=xf=uf=0;ha(xe)?(nf=!0,of=J.createStream(34962,xe),wf=of.dtype):(of=J.getBuffer(xe))?wf=of.dtype:"constant"in xe?(Ff=2,"number"===typeof xe.constant?(xf=xe.constant,yf=If=uf=0):(xf=0<xe.constant.length?
xe.constant[0]:0,yf=1<xe.constant.length?xe.constant[1]:0,If=2<xe.constant.length?xe.constant[2]:0,uf=3<xe.constant.length?xe.constant[3]:0)):(of=ha(xe.buffer)?J.createStream(34962,xe.buffer):J.getBuffer(xe.buffer),wf="type"in xe?Nd[xe.type]:of.dtype,Gf=!!xe.normalized,Ef=xe.size|0,Af=xe.offset|0,vf=xe.stride|0,Df=xe.divisor|0);Kf=N.buffer;N.buffer=of;Lf=N.divisor;N.divisor=Df;Mf=N.normalized;N.normalized=Gf;sf=N.offset;N.offset=Af;Rf=N.size;N.size=Ef;Hf=N.state;N.state=Ff;tf=N.stride;N.stride=vf;
dg=N.type;N.type=wf;Sf=N.w;N.w=uf;Tf=N.x;N.x=xf;qg=N.y;N.y=yf;cf=N.z;N.z=If;Ye=ea.call(this,ia,a,c);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ha(Ye)?(Nf=!0,Of=J.createStream(34962,Ye),Uf=Of.dtype):(Of=J.getBuffer(Ye))?Uf=Of.dtype:"constant"in Ye?(ig=2,"number"===typeof Ye.constant?(Yf=Ye.constant,Zf=jg=Xf=0):(Yf=0<Ye.constant.length?Ye.constant[0]:0,Zf=1<Ye.constant.length?Ye.constant[1]:0,jg=2<Ye.constant.length?Ye.constant[2]:0,Xf=3<Ye.constant.length?Ye.constant[3]:0)):(Of=
ha(Ye.buffer)?J.createStream(34962,Ye.buffer):J.getBuffer(Ye.buffer),Uf="type"in Ye?Nd[Ye.type]:Of.dtype,fg=!!Ye.normalized,hg=Ye.size|0,gg=Ye.offset|0,Wf=Ye.stride|0,eg=Ye.divisor|0);rg=d.buffer;d.buffer=Of;sg=d.divisor;d.divisor=eg;tg=d.normalized;d.normalized=fg;ug=d.offset;d.offset=gg;vg=d.size;d.size=hg;wg=d.state;d.state=ig;xg=d.stride;d.stride=Wf;yg=d.type;d.type=Uf;zg=d.w;d.w=Xf;Ag=d.x;d.x=Yf;Bg=d.y;d.y=Zf;df=d.z;d.z=jg;Ze=m.call(this,ia,a,c);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=
5126;pg=cg=bg=ag=0;ha(Ze)?(Pf=!0,Qf=J.createStream(34962,Ze),Vf=Qf.dtype):(Qf=J.getBuffer(Ze))?Vf=Qf.dtype:"constant"in Ze?(og=2,"number"===typeof Ze.constant?(bg=Ze.constant,cg=pg=ag=0):(bg=0<Ze.constant.length?Ze.constant[0]:0,cg=1<Ze.constant.length?Ze.constant[1]:0,pg=2<Ze.constant.length?Ze.constant[2]:0,ag=3<Ze.constant.length?Ze.constant[3]:0)):(Qf=ha(Ze.buffer)?J.createStream(34962,Ze.buffer):J.getBuffer(Ze.buffer),Vf="type"in Ze?Nd[Ze.type]:Qf.dtype,lg=!!Ze.normalized,ng=Ze.size|0,mg=Ze.offset|
0,$f=Ze.stride|0,kg=Ze.divisor|0);Cg=Y.buffer;Y.buffer=Qf;Dg=Y.divisor;Y.divisor=kg;Eg=Y.normalized;Y.normalized=lg;Fg=Y.offset;Y.offset=mg;Gg=Y.size;Y.size=ng;Hg=Y.state;Y.state=og;Ig=Y.stride;Y.stride=$f;Jg=Y.type;Y.type=Vf;Kg=Y.w;Y.w=ag;Lg=Y.x;Y.x=bg;Mg=Y.y;Y.y=cg;Ng=Y.z;Y.z=pg;Og=V.vert;V.vert=44;Pg=V.frag;V.frag=43;Ca.dirty=!0;b(ia,a,c);ia.viewportWidth=p;ia.viewportHeight=r;ed[0]=n;ed[1]=x;ed[2]=v;ed[3]=y;F[0]=w;F[1]=A;F[2]=I;F[3]=E;ta.blend_enable=H;wa[0]=B;wa[1]=M;wa[2]=L;wa[3]=Z;ta.depth_enable=
K;Xd[0]=X;Xd[1]=ka;Xd[2]=ba;Xd[3]=da;ta.scissor_enable=ja;ta.stencil_enable=ma;na&&(u.cpuTime+=performance.now()-pa);sa&&ab.destroyStream(ra);wb.elements=ua;wb.offset=Ba;wb.count=Ka;wb.primitive=Cb;fa[45]=Oa;fa[48]=zc;fa[10]=qb;fa[46]=jb;fa[47]=Pa;fa[34]=Wb;fa[6]=fb;fa[7]=vd;fa[8]=lb;fa[9]=qa;va&&J.destroyStream(Va);O.buffer=xa;O.divisor=ac;O.normalized=La;O.offset=Qb;O.size=hb;O.state=kb;O.stride=ya;O.type=gc;O.w=Da;O.x=sb;O.y=tb;O.z=Xa;oc&&J.destroyStream(Ib);R.buffer=ub;R.divisor=xc;R.normalized=
Ab;R.offset=cc;R.size=vc;R.state=pc;R.stride=Oc;R.type=yc;R.w=bd;R.x=Yb;R.y=ec;R.z=Rb;$b&&J.destroyStream(ob);k.buffer=Sc;k.divisor=Qc;k.normalized=Nb;k.offset=Hb;k.size=Rc;k.state=Jc;k.stride=Tc;k.type=ic;k.w=Wc;k.x=od;k.y=gd;k.z=Uc;yd&&J.destroyStream(de);q.buffer=Ad;q.divisor=Bd;q.normalized=ge;q.offset=qe;q.size=se;q.state=fe;q.stride=ee;q.type=be;q.w=ne;q.x=$d;q.y=he;q.z=Bc;oe&&J.destroyStream(je);P.buffer=pe;P.divisor=ye;P.normalized=Ce;P.offset=De;P.size=Ee;P.state=ze;P.stride=Hd;P.type=Sd;
P.w=Yd;P.x=ae;P.y=Fe;P.z=zd;we&&J.destroyStream(Ge);t.buffer=ff;t.divisor=kf;t.normalized=bf;t.offset=gf;t.size=hf;t.state=jf;t.stride=pf;t.type=mf;t.w=qf;t.x=Bf;t.y=Cf;t.z=Je;nf&&J.destroyStream(of);N.buffer=Kf;N.divisor=Lf;N.normalized=Mf;N.offset=sf;N.size=Rf;N.state=Hf;N.stride=tf;N.type=dg;N.w=Sf;N.x=Tf;N.y=qg;N.z=cf;Nf&&J.destroyStream(Of);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;d.x=Ag;d.y=Bg;d.z=df;Pf&&J.destroyStream(Qf);Y.buffer=
Cg;Y.divisor=Dg;Y.normalized=Eg;Y.offset=Fg;Y.size=Gg;Y.state=Hg;Y.stride=Ig;Y.type=Jg;Y.w=Kg;Y.x=Lg;Y.y=Mg;Y.z=Ng;V.vert=Og;V.frag=Pg;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,u,n,I,e,b,p,a,g,r,x,f,B,w,D,G,C,O,Ja,R,mc,k,z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb,Zb,ua,Oa,X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra,Ib,pc,yc,vd){var zc,W,J,ia,
Ca,wb,ab,Uc,H,A,ha,ta,V,fa,na,F,y,aa,E,wa,ka,l,rc,ma,h,Lb,Cb,Ue,ce,Xd,de,Id,qe,yd,ge,se,Fd,ed,Zd;zc=c.attributes;W=c.buffer;J=c.context;ia=c.current;Ca=c.draw;wb=c.elements;ab=c.extensions;Uc=c.framebuffer;H=c.gl;A=c.isBufferArgs;ha=c.next;ta=c.shader;V=c.uniforms;fa=c.vao;na=ha.blend_color;F=ia.blend_color;y=ha.blend_equation;aa=ia.blend_equation;E=ha.blend_func;wa=ia.blend_func;ka=ha.colorMask;l=ia.colorMask;rc=ha.depth_range;ma=ia.depth_range;h=ha.polygonOffset_offset;Lb=ia.polygonOffset_offset;
Cb=ha.sample_coverage;Ue=ia.sample_coverage;ce=ha.scissor_box;Xd=ia.scissor_box;de=ha.stencil_func;Id=ia.stencil_func;qe=ha.stencil_opBack;yd=ia.stencil_opBack;ge=ha.stencil_opFront;se=ia.stencil_opFront;Fd=ha.viewport;ed=ia.viewport;Zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var d,c,e,f,g,k;d=Uc.next;d!==Uc.cur&&(d?H.bindFramebuffer(36160,d.framebuffer):H.bindFramebuffer(36160,null),Uc.cur=d);if(ia.dirty){var p,m,r,
q,n,x,t,w,z,D,I,E,C,G,B,O,N,P,R,Z,S,V,Y,ca,ea,ta,na,la,Ra,pa,Ja,ib,Ta,Kb;p=ha.dither;p!==ia.dither&&(p?H.enable(3024):H.disable(3024),ia.dither=p);m=y[0];r=y[1];if(m!==aa[0]||r!==aa[1])H.blendEquationSeparate(m,r),aa[0]=m,aa[1]=r;q=ha.depth_func;q!==ia.depth_func&&(H.depthFunc(q),ia.depth_func=q);n=rc[0];x=rc[1];if(n!==ma[0]||x!==ma[1])H.depthRange(n,x),ma[0]=n,ma[1]=x;t=ha.depth_mask;t!==ia.depth_mask&&(H.depthMask(t),ia.depth_mask=t);w=ka[0];z=ka[1];D=ka[2];I=ka[3];if(w!==l[0]||z!==l[1]||D!==l[2]||
I!==l[3])H.colorMask(w,z,D,I),l[0]=w,l[1]=z,l[2]=D,l[3]=I;E=ha.cull_enable;E!==ia.cull_enable&&(E?H.enable(2884):H.disable(2884),ia.cull_enable=E);C=ha.cull_face;C!==ia.cull_face&&(H.cullFace(C),ia.cull_face=C);G=ha.frontFace;G!==ia.frontFace&&(H.frontFace(G),ia.frontFace=G);B=ha.lineWidth;B!==ia.lineWidth&&(H.lineWidth(B),ia.lineWidth=B);O=ha.polygonOffset_enable;O!==ia.polygonOffset_enable&&(O?H.enable(32823):H.disable(32823),ia.polygonOffset_enable=O);N=h[0];P=h[1];if(N!==Lb[0]||P!==Lb[1])H.polygonOffset(N,
P),Lb[0]=N,Lb[1]=P;R=ha.sample_alpha;R!==ia.sample_alpha&&(R?H.enable(32926):H.disable(32926),ia.sample_alpha=R);Z=ha.sample_enable;Z!==ia.sample_enable&&(Z?H.enable(32928):H.disable(32928),ia.sample_enable=Z);S=Cb[0];V=Cb[1];if(S!==Ue[0]||V!==Ue[1])H.sampleCoverage(S,V),Ue[0]=S,Ue[1]=V;Y=ha.stencil_mask;Y!==ia.stencil_mask&&(H.stencilMask(Y),ia.stencil_mask=Y);ca=de[0];ea=de[1];ta=de[2];if(ca!==Id[0]||ea!==Id[1]||ta!==Id[2])H.stencilFunc(ca,ea,ta),Id[0]=ca,Id[1]=ea,Id[2]=ta;na=ge[0];la=ge[1];Ra=
ge[2];pa=ge[3];if(na!==se[0]||la!==se[1]||Ra!==se[2]||pa!==se[3])H.stencilOpSeparate(na,la,Ra,pa),se[0]=na,se[1]=la,se[2]=Ra,se[3]=pa;Ja=qe[0];ib=qe[1];Ta=qe[2];Kb=qe[3];if(Ja!==yd[0]||ib!==yd[1]||Ta!==yd[2]||Kb!==yd[3])H.stencilOpSeparate(Ja,ib,Ta,Kb),yd[0]=Ja,yd[1]=ib,yd[2]=Ta,yd[3]=Kb}H.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;H.enable(3042);ia.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;H.disable(2929);ia.depth_enable=!1;H.enable(3089);ia.scissor_enable=
!0;H.disable(2960);ia.stencil_enable=!1;if(c=ia.profile)e=performance.now(),u.count+=b;H.useProgram(sa.program);f=ab.angle_instanced_arrays;var eb;fa.setVAO(null);H.uniform1i(v.location,!1);H.uniform1i(Ha.location,oa.bind());eb=Ca.instances;for(g=0;g<b;++g){k=a[g];var Dc,Tb,Mc,lc,Ub,mc,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,Fd,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,
Pb,Sb,hc,jc,ce,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,rf,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe,Me,He,pe,ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf,pf,mf,qf,Bf,Cf,Je,xe,nf,of,Df,Gf,Af,Ef,Ff,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Hf,tf;Dc=k.viewport;Tb=Dc.x|0;Mc=Dc.y|0;lc="width"in Dc?Dc.width|0:J.framebufferWidth-Tb;Ub="height"in Dc?Dc.height|0:J.framebufferHeight-Mc;mc=
J.viewportWidth;J.viewportWidth=lc;Vb=J.viewportHeight;J.viewportHeight=Ub;H.viewport(Tb,Mc,lc,Ub);ed[0]=Tb;ed[1]=Mc;ed[2]=lc;ed[3]=Ub;Na=k.viewport;qb=Na.x|0;yb=Na.y|0;jb="width"in Na?Na.width|0:J.framebufferWidth-qb;Pa="height"in Na?Na.height|0:J.framebufferHeight-yb;H.scissor(qb,yb,jb,Pa);Xd[0]=qb;Xd[1]=yb;Xd[2]=jb;Xd[3]=Pa;qc=Ka.call(this,J,k,g);Wb=!1;wd=null;fb=0;nc=!1;fc=Ic=0;lb=1;mb=0;qa=5126;db=Va=va=rb=0;A(qc)?(Wb=!0,wd=W.createStream(34962,qc),qa=wd.dtype):(wd=W.getBuffer(qc))?qa=wd.dtype:
"constant"in qc?(lb=2,"number"===typeof qc.constant?(va=qc.constant,Va=db=rb=0):(va=0<qc.constant.length?qc.constant[0]:0,Va=1<qc.constant.length?qc.constant[1]:0,db=2<qc.constant.length?qc.constant[2]:0,rb=3<qc.constant.length?qc.constant[3]:0)):(wd=A(qc.buffer)?W.createStream(34962,qc.buffer):W.getBuffer(qc.buffer),qa="type"in qc?Zd[qc.type]:wd.dtype,nc=!!qc.normalized,fc=qc.size|0,Ic=qc.offset|0,mb=qc.stride|0,fb=qc.divisor|0);za=Ib.location;gb=zc[za];if(1===lb){gb.buffer||H.enableVertexAttribArray(za);
Ia=fc||1;if(gb.type!==qa||gb.size!==Ia||gb.buffer!==wd||gb.normalized!==nc||gb.offset!==Ic||gb.stride!==mb)H.bindBuffer(34962,wd.buffer),H.vertexAttribPointer(za,Ia,qa,nc,mb,Ic),gb.type=qa,gb.size=Ia,gb.buffer=wd,gb.normalized=nc,gb.offset=Ic,gb.stride=mb;gb.divisor!==fb&&(f.vertexAttribDivisorANGLE(za,fb),gb.divisor=fb)}else if(gb.buffer&&(H.disableVertexAttribArray(za),gb.buffer=null),gb.x!==va||gb.y!==Va||gb.z!==db||gb.w!==rb)H.vertexAttrib4f(za,va,Va,db,rb),gb.x=va,gb.y=Va,gb.z=db,gb.w=rb;Eb=
vb.call(this,J,k,g);Db=!1;Sa=null;Lc=0;Mb=!1;Xb=Za=0;xa=1;Fd=0;La=5126;ya=kb=hb=Qb=0;A(Eb)?(Db=!0,Sa=W.createStream(34962,Eb),La=Sa.dtype):(Sa=W.getBuffer(Eb))?La=Sa.dtype:"constant"in Eb?(xa=2,"number"===typeof Eb.constant?(hb=Eb.constant,kb=ya=Qb=0):(hb=0<Eb.constant.length?Eb.constant[0]:0,kb=1<Eb.constant.length?Eb.constant[1]:0,ya=2<Eb.constant.length?Eb.constant[2]:0,Qb=3<Eb.constant.length?Eb.constant[3]:0)):(Sa=A(Eb.buffer)?W.createStream(34962,Eb.buffer):W.getBuffer(Eb.buffer),La="type"in
Eb?Zd[Eb.type]:Sa.dtype,Mb=!!Eb.normalized,Xb=Eb.size|0,Za=Eb.offset|0,Fd=Eb.stride|0,Lc=Eb.divisor|0);gc=yc.location;Da=zc[gc];if(1===xa){Da.buffer||H.enableVertexAttribArray(gc);sb=Xb||1;if(Da.type!==La||Da.size!==sb||Da.buffer!==Sa||Da.normalized!==Mb||Da.offset!==Za||Da.stride!==Fd)H.bindBuffer(34962,Sa.buffer),H.vertexAttribPointer(gc,sb,La,Mb,Fd,Za),Da.type=La,Da.size=sb,Da.buffer=Sa,Da.normalized=Mb,Da.offset=Za,Da.stride=Fd;Da.divisor!==Lc&&(f.vertexAttribDivisorANGLE(gc,Lc),Da.divisor=Lc)}else if(Da.buffer&&
(H.disableVertexAttribArray(gc),Da.buffer=null),Da.x!==hb||Da.y!==kb||Da.z!==ya||Da.w!==Qb)H.vertexAttrib4f(gc,hb,kb,ya,Qb),Da.x=hb,Da.y=kb,Da.z=ya,Da.w=Qb;tb=Zb.call(this,J,k,g);Xa=!1;Ya=null;oc=0;ad=!1;Wa=wc=0;Ob=1;ud=0;Ea=5126;nb=Aa=Qa=Ac=0;A(tb)?(Xa=!0,Ya=W.createStream(34962,tb),Ea=Ya.dtype):(Ya=W.getBuffer(tb))?Ea=Ya.dtype:"constant"in tb?(Ob=2,"number"===typeof tb.constant?(Qa=tb.constant,Aa=nb=Ac=0):(Qa=0<tb.constant.length?tb.constant[0]:0,Aa=1<tb.constant.length?tb.constant[1]:0,nb=2<tb.constant.length?
tb.constant[2]:0,Ac=3<tb.constant.length?tb.constant[3]:0)):(Ya=A(tb.buffer)?W.createStream(34962,tb.buffer):W.getBuffer(tb.buffer),Ea="type"in tb?Zd[tb.type]:Ya.dtype,ad=!!tb.normalized,Wa=tb.size|0,wc=tb.offset|0,ud=tb.stride|0,oc=tb.divisor|0);zb=pc.location;Fb=zc[zb];if(1===Ob){Fb.buffer||H.enableVertexAttribArray(zb);ub=Wa||1;if(Fb.type!==Ea||Fb.size!==ub||Fb.buffer!==Ya||Fb.normalized!==ad||Fb.offset!==wc||Fb.stride!==ud)H.bindBuffer(34962,Ya.buffer),H.vertexAttribPointer(zb,ub,Ea,ad,ud,wc),
Fb.type=Ea,Fb.size=ub,Fb.buffer=Ya,Fb.normalized=ad,Fb.offset=wc,Fb.stride=ud;Fb.divisor!==oc&&(f.vertexAttribDivisorANGLE(zb,oc),Fb.divisor=oc)}else if(Fb.buffer&&(H.disableVertexAttribArray(zb),Fb.buffer=null),Fb.x!==Qa||Fb.y!==Aa||Fb.z!==nb||Fb.w!==Ac)H.vertexAttrib4f(zb,Qa,Aa,nb,Ac),Fb.x=Qa,Fb.y=Aa,Fb.z=nb,Fb.w=Ac;xc=ua.call(this,J,k,g);Ab=!1;jd=null;vc=0;Jd=!1;md=Oc=0;bd=1;Yb=0;ec=5126;ob=$b=Fa=Rb=0;A(xc)?(Ab=!0,jd=W.createStream(34962,xc),ec=jd.dtype):(jd=W.getBuffer(xc))?ec=jd.dtype:"constant"in
xc?(bd=2,"number"===typeof xc.constant?(Fa=xc.constant,$b=ob=Rb=0):(Fa=0<xc.constant.length?xc.constant[0]:0,$b=1<xc.constant.length?xc.constant[1]:0,ob=2<xc.constant.length?xc.constant[2]:0,Rb=3<xc.constant.length?xc.constant[3]:0)):(jd=A(xc.buffer)?W.createStream(34962,xc.buffer):W.getBuffer(xc.buffer),ec="type"in xc?Zd[xc.type]:jd.dtype,Jd=!!xc.normalized,md=xc.size|0,Oc=xc.offset|0,Yb=xc.stride|0,vc=xc.divisor|0);Bb=vd.location;Pb=zc[Bb];if(1===bd){Pb.buffer||H.enableVertexAttribArray(Bb);Sb=
md||1;if(Pb.type!==ec||Pb.size!==Sb||Pb.buffer!==jd||Pb.normalized!==Jd||Pb.offset!==Oc||Pb.stride!==Yb)H.bindBuffer(34962,jd.buffer),H.vertexAttribPointer(Bb,Sb,ec,Jd,Yb,Oc),Pb.type=ec,Pb.size=Sb,Pb.buffer=jd,Pb.normalized=Jd,Pb.offset=Oc,Pb.stride=Yb;Pb.divisor!==vc&&(f.vertexAttribDivisorANGLE(Bb,vc),Pb.divisor=vc)}else if(Pb.buffer&&(H.disableVertexAttribArray(Bb),Pb.buffer=null),Pb.x!==Fa||Pb.y!==$b||Pb.z!==ob||Pb.w!==Rb)H.vertexAttrib4f(Bb,Fa,$b,ob,Rb),Pb.x=Fa,Pb.y=$b,Pb.z=ob,Pb.w=Rb;hc=Oa.call(this,
J,k,g);jc=!1;ce=null;Ec=0;Fc=!1;Pc=Gc=0;$c=1;Sc=0;Qc=5126;Jc=Rc=Hb=Nb=0;A(hc)?(jc=!0,ce=W.createStream(34962,hc),Qc=ce.dtype):(ce=W.getBuffer(hc))?Qc=ce.dtype:"constant"in hc?($c=2,"number"===typeof hc.constant?(Hb=hc.constant,Rc=Jc=Nb=0):(Hb=0<hc.constant.length?hc.constant[0]:0,Rc=1<hc.constant.length?hc.constant[1]:0,Jc=2<hc.constant.length?hc.constant[2]:0,Nb=3<hc.constant.length?hc.constant[3]:0)):(ce=A(hc.buffer)?W.createStream(34962,hc.buffer):W.getBuffer(hc.buffer),Qc="type"in hc?Zd[hc.type]:
ce.dtype,Fc=!!hc.normalized,Pc=hc.size|0,Gc=hc.offset|0,Sc=hc.stride|0,Ec=hc.divisor|0);Tc=pb.location;ic=zc[Tc];if(1===$c){ic.buffer||H.enableVertexAttribArray(Tc);Wc=Pc||1;if(ic.type!==Qc||ic.size!==Wc||ic.buffer!==ce||ic.normalized!==Fc||ic.offset!==Gc||ic.stride!==Sc)H.bindBuffer(34962,ce.buffer),H.vertexAttribPointer(Tc,Wc,Qc,Fc,Sc,Gc),ic.type=Qc,ic.size=Wc,ic.buffer=ce,ic.normalized=Fc,ic.offset=Gc,ic.stride=Sc;ic.divisor!==Ec&&(f.vertexAttribDivisorANGLE(Tc,Ec),ic.divisor=Ec)}else if(ic.buffer&&
(H.disableVertexAttribArray(Tc),ic.buffer=null),ic.x!==Hb||ic.y!==Rc||ic.z!==Jc||ic.w!==Nb)H.vertexAttrib4f(Tc,Hb,Rc,Jc,Nb),ic.x=Hb,ic.y=Rc,ic.z=Jc,ic.w=Nb;od=X.call(this,J,k,g);gd=!1;Te=null;Xc=0;rf=!1;te=Ld=0;re=1;Vd=0;Gd=5126;pd=Hc=dd=Dd=0;A(od)?(gd=!0,Te=W.createStream(34962,od),Gd=Te.dtype):(Te=W.getBuffer(od))?Gd=Te.dtype:"constant"in od?(re=2,"number"===typeof od.constant?(dd=od.constant,Hc=pd=Dd=0):(dd=0<od.constant.length?od.constant[0]:0,Hc=1<od.constant.length?od.constant[1]:0,pd=2<od.constant.length?
od.constant[2]:0,Dd=3<od.constant.length?od.constant[3]:0)):(Te=A(od.buffer)?W.createStream(34962,od.buffer):W.getBuffer(od.buffer),Gd="type"in od?Zd[od.type]:Te.dtype,rf=!!od.normalized,te=od.size|0,Ld=od.offset|0,Vd=od.stride|0,Xc=od.divisor|0);hd=$a.location;Yc=zc[hd];if(1===re){Yc.buffer||H.enableVertexAttribArray(hd);rd=te||1;if(Yc.type!==Gd||Yc.size!==rd||Yc.buffer!==Te||Yc.normalized!==rf||Yc.offset!==Ld||Yc.stride!==Vd)H.bindBuffer(34962,Te.buffer),H.vertexAttribPointer(hd,rd,Gd,rf,Vd,Ld),
Yc.type=Gd,Yc.size=rd,Yc.buffer=Te,Yc.normalized=rf,Yc.offset=Ld,Yc.stride=Vd;Yc.divisor!==Xc&&(f.vertexAttribDivisorANGLE(hd,Xc),Yc.divisor=Xc)}else if(Yc.buffer&&(H.disableVertexAttribArray(hd),Yc.buffer=null),Yc.x!==dd||Yc.y!==Hc||Yc.z!==pd||Yc.w!==Dd)H.vertexAttrib4f(hd,dd,Hc,pd,Dd),Yc.x=dd,Yc.y=Hc,Yc.z=pd,Yc.w=Dd;Ad=K.call(this,J,k,g);Bd=!1;Le=null;ke=0;ue=!1;ee=fe=0;be=1;ne=0;$d=5126;oe=Vc=Bc=he=0;A(Ad)?(Bd=!0,Le=W.createStream(34962,Ad),$d=Le.dtype):(Le=W.getBuffer(Ad))?$d=Le.dtype:"constant"in
Ad?(be=2,"number"===typeof Ad.constant?(Bc=Ad.constant,Vc=oe=he=0):(Bc=0<Ad.constant.length?Ad.constant[0]:0,Vc=1<Ad.constant.length?Ad.constant[1]:0,oe=2<Ad.constant.length?Ad.constant[2]:0,he=3<Ad.constant.length?Ad.constant[3]:0)):(Le=A(Ad.buffer)?W.createStream(34962,Ad.buffer):W.getBuffer(Ad.buffer),$d="type"in Ad?Zd[Ad.type]:Le.dtype,ue=!!Ad.normalized,ee=Ad.size|0,fe=Ad.offset|0,ne=Ad.stride|0,ke=Ad.divisor|0);je=T.location;Ed=zc[je];if(1===be){Ed.buffer||H.enableVertexAttribArray(je);Md=ee||
4;if(Ed.type!==$d||Ed.size!==Md||Ed.buffer!==Le||Ed.normalized!==ue||Ed.offset!==fe||Ed.stride!==ne)H.bindBuffer(34962,Le.buffer),H.vertexAttribPointer(je,Md,$d,ue,ne,fe),Ed.type=$d,Ed.size=Md,Ed.buffer=Le,Ed.normalized=ue,Ed.offset=fe,Ed.stride=ne;Ed.divisor!==ke&&(f.vertexAttribDivisorANGLE(je,ke),Ed.divisor=ke)}else if(Ed.buffer&&(H.disableVertexAttribArray(je),Ed.buffer=null),Ed.x!==Bc||Ed.y!==Vc||Ed.z!==oe||Ed.w!==he)H.vertexAttrib4f(je,Bc,Vc,oe,he),Ed.x=Bc,Ed.y=Vc,Ed.z=oe,Ed.w=he;Od=M.call(this,
J,k,g);Pd=!1;ie=null;Be=0;ve=!1;Xe=le=0;Me=1;He=0;pe=5126;Ee=De=Ce=ye=0;A(Od)?(Pd=!0,ie=W.createStream(34962,Od),pe=ie.dtype):(ie=W.getBuffer(Od))?pe=ie.dtype:"constant"in Od?(Me=2,"number"===typeof Od.constant?(Ce=Od.constant,De=Ee=ye=0):(Ce=0<Od.constant.length?Od.constant[0]:0,De=1<Od.constant.length?Od.constant[1]:0,Ee=2<Od.constant.length?Od.constant[2]:0,ye=3<Od.constant.length?Od.constant[3]:0)):(ie=A(Od.buffer)?W.createStream(34962,Od.buffer):W.getBuffer(Od.buffer),pe="type"in Od?Zd[Od.type]:
ie.dtype,ve=!!Od.normalized,Xe=Od.size|0,le=Od.offset|0,He=Od.stride|0,Be=Od.divisor|0);ze=ac.location;Hd=zc[ze];if(1===Me){Hd.buffer||H.enableVertexAttribArray(ze);Sd=Xe||4;if(Hd.type!==pe||Hd.size!==Sd||Hd.buffer!==ie||Hd.normalized!==ve||Hd.offset!==le||Hd.stride!==He)H.bindBuffer(34962,ie.buffer),H.vertexAttribPointer(ze,Sd,pe,ve,He,le),Hd.type=pe,Hd.size=Sd,Hd.buffer=ie,Hd.normalized=ve,Hd.offset=le,Hd.stride=He;Hd.divisor!==Be&&(f.vertexAttribDivisorANGLE(ze,Be),Hd.divisor=Be)}else if(Hd.buffer&&
(H.disableVertexAttribArray(ze),Hd.buffer=null),Hd.x!==Ce||Hd.y!==De||Hd.z!==Ee||Hd.w!==ye)H.vertexAttrib4f(ze,Ce,De,Ee,ye),Hd.x=Ce,Hd.y=De,Hd.z=Ee,Hd.w=ye;Yd=Q.call(this,J,k,g);ae=!1;Fe=null;zd=0;Qd=!1;Ge=we=0;ef=1;We=0;Ne=5126;Oe=Re=Ve=Ie=0;A(Yd)?(ae=!0,Fe=W.createStream(34962,Yd),Ne=Fe.dtype):(Fe=W.getBuffer(Yd))?Ne=Fe.dtype:"constant"in Yd?(ef=2,"number"===typeof Yd.constant?(Ve=Yd.constant,Re=Oe=Ie=0):(Ve=0<Yd.constant.length?Yd.constant[0]:0,Re=1<Yd.constant.length?Yd.constant[1]:0,Oe=2<Yd.constant.length?
Yd.constant[2]:0,Ie=3<Yd.constant.length?Yd.constant[3]:0)):(Fe=A(Yd.buffer)?W.createStream(34962,Yd.buffer):W.getBuffer(Yd.buffer),Ne="type"in Yd?Zd[Yd.type]:Fe.dtype,Qd=!!Yd.normalized,Ge=Yd.size|0,we=Yd.offset|0,We=Yd.stride|0,zd=Yd.divisor|0);Pe=ja.location;Rd=zc[Pe];if(1===ef){Rd.buffer||H.enableVertexAttribArray(Pe);Wd=Ge||1;if(Rd.type!==Ne||Rd.size!==Wd||Rd.buffer!==Fe||Rd.normalized!==Qd||Rd.offset!==we||Rd.stride!==We)H.bindBuffer(34962,Fe.buffer),H.vertexAttribPointer(Pe,Wd,Ne,Qd,We,we),
Rd.type=Ne,Rd.size=Wd,Rd.buffer=Fe,Rd.normalized=Qd,Rd.offset=we,Rd.stride=We;Rd.divisor!==zd&&(f.vertexAttribDivisorANGLE(Pe,zd),Rd.divisor=zd)}else if(Rd.buffer&&(H.disableVertexAttribArray(Pe),Rd.buffer=null),Rd.x!==Ve||Rd.y!==Re||Rd.z!==Oe||Rd.w!==Ie)H.vertexAttrib4f(Pe,Ve,Re,Oe,Ie),Rd.x=Ve,Rd.y=Re,Rd.z=Oe,Rd.w=Ie;Qe=J.pixelRatio;g&&ff===Qe||(ff=Qe,H.uniform1f(cc.location,Qe));kf=L.call(this,J,k,g);bf=kf[0];hf=kf[1];g&&gf===bf&&jf===hf||(gf=bf,jf=hf,H.uniform2f(Ba.location,bf,hf));pf=k.scale;
mf=pf[0];Bf=pf[1];g&&qf===mf&&Cf===Bf||(qf=mf,Cf=Bf,H.uniform2f(Ga.location,mf,Bf));Je=k.scaleFract;xe=Je[0];of=Je[1];g&&nf===xe&&Df===of||(nf=xe,Df=of,H.uniform2f(U.location,xe,of));Gf=k.translate;Af=Gf[0];Ff=Gf[1];g&&Ef===Af&&vf===Ff||(Ef=Af,vf=Ff,H.uniform2f(da.location,Af,Ff));wf=k.translateFract;uf=wf[0];yf=wf[1];g&&xf===uf&&If===yf||(xf=uf,If=yf,H.uniform2f(ra.location,uf,yf));Kf=k.opacity;g&&Lf===Kf||(Lf=Kf,H.uniform1f(ba.location,Kf));Mf=k.elements;sf=null;(sf=(Rf=A(Mf))?wb.createStream(Mf):
wb.getElements(Mf))&&H.bindBuffer(34963,sf.buffer.buffer);Hf=k.offset;if(tf=k.count)0<eb?sf?f.drawElementsInstancedANGLE(0,tf,sf.type,Hf<<(sf.type-5121>>1),eb):f.drawArraysInstancedANGLE(0,Hf,tf,eb):0>eb&&(sf?H.drawElements(0,tf,sf.type,Hf<<(sf.type-5121>>1)):H.drawArrays(0,Hf,tf)),J.viewportWidth=mc,J.viewportHeight=Vb,Wb&&W.destroyStream(wd),Db&&W.destroyStream(Sa),Xa&&W.destroyStream(Ya),Ab&&W.destroyStream(jd),jc&&W.destroyStream(ce),gd&&W.destroyStream(Te),Bd&&W.destroyStream(Le),Pd&&W.destroyStream(ie),
ae&&W.destroyStream(Fe),Rf&&wb.destroyStream(sf)}oa.unbind();ia.dirty=!0;fa.setVAO(null);c&&(u.cpuTime+=performance.now()-e)},draw:function(d){var c,k,m,q,t,z,D,E,C,G,O,M,N,P,R,L,K,Q,S,V,X,Y,ca,ea,ta,na,la,oa,sa,ua,Ka,cb,Oa,Ma,xb,Ra,pa,Ja,ib,Ta,Kb,eb,vb,Tb,Mc,lc,Ub,mc,Vb,Na,qb,yb,jb,Pa,qc,Wb,Zb,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,Fd,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,ce,Ec,
Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od,gd,Te,Xc,rf,Ld,te,re,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,Le,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Xe;c=Uc.next;c!==Uc.cur&&(c?H.bindFramebuffer(36160,c.framebuffer):H.bindFramebuffer(36160,null),Uc.cur=c);if(ia.dirty){var Me,He,pe,ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf;Me=ha.dither;Me!==ia.dither&&(Me?H.enable(3024):H.disable(3024),ia.dither=Me);He=y[0];pe=y[1];if(He!==aa[0]||pe!==aa[1])H.blendEquationSeparate(He,
pe),aa[0]=He,aa[1]=pe;ye=ha.depth_func;ye!==ia.depth_func&&(H.depthFunc(ye),ia.depth_func=ye);Ce=rc[0];De=rc[1];if(Ce!==ma[0]||De!==ma[1])H.depthRange(Ce,De),ma[0]=Ce,ma[1]=De;Ee=ha.depth_mask;Ee!==ia.depth_mask&&(H.depthMask(Ee),ia.depth_mask=Ee);ze=ka[0];Hd=ka[1];Sd=ka[2];Yd=ka[3];if(ze!==l[0]||Hd!==l[1]||Sd!==l[2]||Yd!==l[3])H.colorMask(ze,Hd,Sd,Yd),l[0]=ze,l[1]=Hd,l[2]=Sd,l[3]=Yd;ae=ha.cull_enable;ae!==ia.cull_enable&&(ae?H.enable(2884):H.disable(2884),ia.cull_enable=ae);Fe=ha.cull_face;Fe!==
ia.cull_face&&(H.cullFace(Fe),ia.cull_face=Fe);zd=ha.frontFace;zd!==ia.frontFace&&(H.frontFace(zd),ia.frontFace=zd);Qd=ha.lineWidth;Qd!==ia.lineWidth&&(H.lineWidth(Qd),ia.lineWidth=Qd);we=ha.polygonOffset_enable;we!==ia.polygonOffset_enable&&(we?H.enable(32823):H.disable(32823),ia.polygonOffset_enable=we);Ge=h[0];ef=h[1];if(Ge!==Lb[0]||ef!==Lb[1])H.polygonOffset(Ge,ef),Lb[0]=Ge,Lb[1]=ef;We=ha.sample_alpha;We!==ia.sample_alpha&&(We?H.enable(32926):H.disable(32926),ia.sample_alpha=We);Ne=ha.sample_enable;
Ne!==ia.sample_enable&&(Ne?H.enable(32928):H.disable(32928),ia.sample_enable=Ne);Ie=Cb[0];Ve=Cb[1];if(Ie!==Ue[0]||Ve!==Ue[1])H.sampleCoverage(Ie,Ve),Ue[0]=Ie,Ue[1]=Ve;Re=ha.stencil_mask;Re!==ia.stencil_mask&&(H.stencilMask(Re),ia.stencil_mask=Re);Oe=de[0];Pe=de[1];Rd=de[2];if(Oe!==Id[0]||Pe!==Id[1]||Rd!==Id[2])H.stencilFunc(Oe,Pe,Rd),Id[0]=Oe,Id[1]=Pe,Id[2]=Rd;Wd=ge[0];Qe=ge[1];ff=ge[2];kf=ge[3];if(Wd!==se[0]||Qe!==se[1]||ff!==se[2]||kf!==se[3])H.stencilOpSeparate(Wd,Qe,ff,kf),se[0]=Wd,se[1]=Qe,se[2]=
ff,se[3]=kf;bf=qe[0];gf=qe[1];hf=qe[2];jf=qe[3];if(bf!==yd[0]||gf!==yd[1]||hf!==yd[2]||jf!==yd[3])H.stencilOpSeparate(bf,gf,hf,jf),yd[0]=bf,yd[1]=gf,yd[2]=hf,yd[3]=jf}k=d.viewport;m=k.x|0;q=k.y|0;t="width"in k?k.width|0:J.framebufferWidth-m;z="height"in k?k.height|0:J.framebufferHeight-q;D=J.viewportWidth;J.viewportWidth=t;E=J.viewportHeight;J.viewportHeight=z;H.viewport(m,q,t,z);ed[0]=m;ed[1]=q;ed[2]=t;ed[3]=z;H.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;H.enable(3042);ia.blend_enable=!0;H.blendFuncSeparate(770,
771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;H.disable(2929);ia.depth_enable=!1;C=d.viewport;G=C.x|0;O=C.y|0;M="width"in C?C.width|0:J.framebufferWidth-G;N="height"in C?C.height|0:J.framebufferHeight-O;H.scissor(G,O,M,N);Xd[0]=G;Xd[1]=O;Xd[2]=M;Xd[3]=N;H.enable(3089);ia.scissor_enable=!0;H.disable(2960);ia.stencil_enable=!1;if(P=ia.profile)R=performance.now(),u.count++;H.useProgram(n.program);L=ab.angle_instanced_arrays;fa.setVAO(null);K=I.call(this,J,d,0);Q=!1;S=null;V=0;X=!1;ca=Y=0;ea=1;ta=
0;na=5126;ua=sa=oa=la=0;A(K)?(Q=!0,S=W.createStream(34962,K),na=S.dtype):(S=W.getBuffer(K))?na=S.dtype:"constant"in K?(ea=2,"number"===typeof K.constant?(oa=K.constant,sa=ua=la=0):(oa=0<K.constant.length?K.constant[0]:0,sa=1<K.constant.length?K.constant[1]:0,ua=2<K.constant.length?K.constant[2]:0,la=3<K.constant.length?K.constant[3]:0)):(S=A(K.buffer)?W.createStream(34962,K.buffer):W.getBuffer(K.buffer),na="type"in K?Zd[K.type]:S.dtype,X=!!K.normalized,ca=K.size|0,Y=K.offset|0,ta=K.stride|0,V=K.divisor|
0);Ka=Ib.location;cb=zc[Ka];if(1===ea){cb.buffer||H.enableVertexAttribArray(Ka);Oa=ca||1;if(cb.type!==na||cb.size!==Oa||cb.buffer!==S||cb.normalized!==X||cb.offset!==Y||cb.stride!==ta)H.bindBuffer(34962,S.buffer),H.vertexAttribPointer(Ka,Oa,na,X,ta,Y),cb.type=na,cb.size=Oa,cb.buffer=S,cb.normalized=X,cb.offset=Y,cb.stride=ta;cb.divisor!==V&&(L.vertexAttribDivisorANGLE(Ka,V),cb.divisor=V)}else if(cb.buffer&&(H.disableVertexAttribArray(Ka),cb.buffer=null),cb.x!==oa||cb.y!==sa||cb.z!==ua||cb.w!==la)H.vertexAttrib4f(Ka,
oa,sa,ua,la),cb.x=oa,cb.y=sa,cb.z=ua,cb.w=la;Ma=e.call(this,J,d,0);xb=!1;Ra=null;pa=0;Ja=!1;Ta=ib=0;Kb=1;eb=0;vb=5126;Ub=lc=Mc=Tb=0;A(Ma)?(xb=!0,Ra=W.createStream(34962,Ma),vb=Ra.dtype):(Ra=W.getBuffer(Ma))?vb=Ra.dtype:"constant"in Ma?(Kb=2,"number"===typeof Ma.constant?(Mc=Ma.constant,lc=Ub=Tb=0):(Mc=0<Ma.constant.length?Ma.constant[0]:0,lc=1<Ma.constant.length?Ma.constant[1]:0,Ub=2<Ma.constant.length?Ma.constant[2]:0,Tb=3<Ma.constant.length?Ma.constant[3]:0)):(Ra=A(Ma.buffer)?W.createStream(34962,
Ma.buffer):W.getBuffer(Ma.buffer),vb="type"in Ma?Zd[Ma.type]:Ra.dtype,Ja=!!Ma.normalized,Ta=Ma.size|0,ib=Ma.offset|0,eb=Ma.stride|0,pa=Ma.divisor|0);mc=yc.location;Vb=zc[mc];if(1===Kb){Vb.buffer||H.enableVertexAttribArray(mc);Na=Ta||1;if(Vb.type!==vb||Vb.size!==Na||Vb.buffer!==Ra||Vb.normalized!==Ja||Vb.offset!==ib||Vb.stride!==eb)H.bindBuffer(34962,Ra.buffer),H.vertexAttribPointer(mc,Na,vb,Ja,eb,ib),Vb.type=vb,Vb.size=Na,Vb.buffer=Ra,Vb.normalized=Ja,Vb.offset=ib,Vb.stride=eb;Vb.divisor!==pa&&(L.vertexAttribDivisorANGLE(mc,
pa),Vb.divisor=pa)}else if(Vb.buffer&&(H.disableVertexAttribArray(mc),Vb.buffer=null),Vb.x!==Mc||Vb.y!==lc||Vb.z!==Ub||Vb.w!==Tb)H.vertexAttrib4f(mc,Mc,lc,Ub,Tb),Vb.x=Mc,Vb.y=lc,Vb.z=Ub,Vb.w=Tb;qb=b.call(this,J,d,0);yb=!1;jb=null;Pa=0;qc=!1;Zb=Wb=0;fb=1;nc=0;Ic=5126;qa=mb=lb=fc=0;A(qb)?(yb=!0,jb=W.createStream(34962,qb),Ic=jb.dtype):(jb=W.getBuffer(qb))?Ic=jb.dtype:"constant"in qb?(fb=2,"number"===typeof qb.constant?(lb=qb.constant,mb=qa=fc=0):(lb=0<qb.constant.length?qb.constant[0]:0,mb=1<qb.constant.length?
qb.constant[1]:0,qa=2<qb.constant.length?qb.constant[2]:0,fc=3<qb.constant.length?qb.constant[3]:0)):(jb=A(qb.buffer)?W.createStream(34962,qb.buffer):W.getBuffer(qb.buffer),Ic="type"in qb?Zd[qb.type]:jb.dtype,qc=!!qb.normalized,Zb=qb.size|0,Wb=qb.offset|0,nc=qb.stride|0,Pa=qb.divisor|0);rb=pc.location;va=zc[rb];if(1===fb){va.buffer||H.enableVertexAttribArray(rb);Va=Zb||1;if(va.type!==Ic||va.size!==Va||va.buffer!==jb||va.normalized!==qc||va.offset!==Wb||va.stride!==nc)H.bindBuffer(34962,jb.buffer),
H.vertexAttribPointer(rb,Va,Ic,qc,nc,Wb),va.type=Ic,va.size=Va,va.buffer=jb,va.normalized=qc,va.offset=Wb,va.stride=nc;va.divisor!==Pa&&(L.vertexAttribDivisorANGLE(rb,Pa),va.divisor=Pa)}else if(va.buffer&&(H.disableVertexAttribArray(rb),va.buffer=null),va.x!==lb||va.y!==mb||va.z!==qa||va.w!==fc)H.vertexAttrib4f(rb,lb,mb,qa,fc),va.x=lb,va.y=mb,va.z=qa,va.w=fc;db=p.call(this,J,d,0);za=!1;gb=null;Ia=0;Eb=!1;Sa=Db=0;Lc=1;Mb=0;Za=5126;La=Fd=xa=Xb=0;A(db)?(za=!0,gb=W.createStream(34962,db),Za=gb.dtype):
(gb=W.getBuffer(db))?Za=gb.dtype:"constant"in db?(Lc=2,"number"===typeof db.constant?(xa=db.constant,Fd=La=Xb=0):(xa=0<db.constant.length?db.constant[0]:0,Fd=1<db.constant.length?db.constant[1]:0,La=2<db.constant.length?db.constant[2]:0,Xb=3<db.constant.length?db.constant[3]:0)):(gb=A(db.buffer)?W.createStream(34962,db.buffer):W.getBuffer(db.buffer),Za="type"in db?Zd[db.type]:gb.dtype,Eb=!!db.normalized,Sa=db.size|0,Db=db.offset|0,Mb=db.stride|0,Ia=db.divisor|0);Qb=vd.location;hb=zc[Qb];if(1===Lc){hb.buffer||
H.enableVertexAttribArray(Qb);kb=Sa||1;if(hb.type!==Za||hb.size!==kb||hb.buffer!==gb||hb.normalized!==Eb||hb.offset!==Db||hb.stride!==Mb)H.bindBuffer(34962,gb.buffer),H.vertexAttribPointer(Qb,kb,Za,Eb,Mb,Db),hb.type=Za,hb.size=kb,hb.buffer=gb,hb.normalized=Eb,hb.offset=Db,hb.stride=Mb;hb.divisor!==Ia&&(L.vertexAttribDivisorANGLE(Qb,Ia),hb.divisor=Ia)}else if(hb.buffer&&(H.disableVertexAttribArray(Qb),hb.buffer=null),hb.x!==xa||hb.y!==Fd||hb.z!==La||hb.w!==Xb)H.vertexAttrib4f(Qb,xa,Fd,La,Xb),hb.x=
xa,hb.y=Fd,hb.z=La,hb.w=Xb;ya=a.call(this,J,d,0);gc=!1;Da=null;sb=0;tb=!1;Ya=Xa=0;oc=1;ad=0;wc=5126;Ea=ud=Ob=Wa=0;A(ya)?(gc=!0,Da=W.createStream(34962,ya),wc=Da.dtype):(Da=W.getBuffer(ya))?wc=Da.dtype:"constant"in ya?(oc=2,"number"===typeof ya.constant?(Ob=ya.constant,ud=Ea=Wa=0):(Ob=0<ya.constant.length?ya.constant[0]:0,ud=1<ya.constant.length?ya.constant[1]:0,Ea=2<ya.constant.length?ya.constant[2]:0,Wa=3<ya.constant.length?ya.constant[3]:0)):(Da=A(ya.buffer)?W.createStream(34962,ya.buffer):W.getBuffer(ya.buffer),
wc="type"in ya?Zd[ya.type]:Da.dtype,tb=!!ya.normalized,Ya=ya.size|0,Xa=ya.offset|0,ad=ya.stride|0,sb=ya.divisor|0);Ac=pb.location;Qa=zc[Ac];if(1===oc){Qa.buffer||H.enableVertexAttribArray(Ac);Aa=Ya||1;if(Qa.type!==wc||Qa.size!==Aa||Qa.buffer!==Da||Qa.normalized!==tb||Qa.offset!==Xa||Qa.stride!==ad)H.bindBuffer(34962,Da.buffer),H.vertexAttribPointer(Ac,Aa,wc,tb,ad,Xa),Qa.type=wc,Qa.size=Aa,Qa.buffer=Da,Qa.normalized=tb,Qa.offset=Xa,Qa.stride=ad;Qa.divisor!==sb&&(L.vertexAttribDivisorANGLE(Ac,sb),Qa.divisor=
sb)}else if(Qa.buffer&&(H.disableVertexAttribArray(Ac),Qa.buffer=null),Qa.x!==Ob||Qa.y!==ud||Qa.z!==Ea||Qa.w!==Wa)H.vertexAttrib4f(Ac,Ob,ud,Ea,Wa),Qa.x=Ob,Qa.y=ud,Qa.z=Ea,Qa.w=Wa;nb=g.call(this,J,d,0);zb=!1;Fb=null;ub=0;xc=!1;jd=Ab=0;vc=1;Jd=0;Oc=5126;ec=Yb=bd=md=0;A(nb)?(zb=!0,Fb=W.createStream(34962,nb),Oc=Fb.dtype):(Fb=W.getBuffer(nb))?Oc=Fb.dtype:"constant"in nb?(vc=2,"number"===typeof nb.constant?(bd=nb.constant,Yb=ec=md=0):(bd=0<nb.constant.length?nb.constant[0]:0,Yb=1<nb.constant.length?nb.constant[1]:
0,ec=2<nb.constant.length?nb.constant[2]:0,md=3<nb.constant.length?nb.constant[3]:0)):(Fb=A(nb.buffer)?W.createStream(34962,nb.buffer):W.getBuffer(nb.buffer),Oc="type"in nb?Zd[nb.type]:Fb.dtype,xc=!!nb.normalized,jd=nb.size|0,Ab=nb.offset|0,Jd=nb.stride|0,ub=nb.divisor|0);Rb=$a.location;Fa=zc[Rb];if(1===vc){Fa.buffer||H.enableVertexAttribArray(Rb);$b=jd||1;if(Fa.type!==Oc||Fa.size!==$b||Fa.buffer!==Fb||Fa.normalized!==xc||Fa.offset!==Ab||Fa.stride!==Jd)H.bindBuffer(34962,Fb.buffer),H.vertexAttribPointer(Rb,
$b,Oc,xc,Jd,Ab),Fa.type=Oc,Fa.size=$b,Fa.buffer=Fb,Fa.normalized=xc,Fa.offset=Ab,Fa.stride=Jd;Fa.divisor!==ub&&(L.vertexAttribDivisorANGLE(Rb,ub),Fa.divisor=ub)}else if(Fa.buffer&&(H.disableVertexAttribArray(Rb),Fa.buffer=null),Fa.x!==bd||Fa.y!==Yb||Fa.z!==ec||Fa.w!==md)H.vertexAttrib4f(Rb,bd,Yb,ec,md),Fa.x=bd,Fa.y=Yb,Fa.z=ec,Fa.w=md;ob=r.call(this,J,d,0);Bb=!1;Pb=null;Sb=0;hc=!1;ce=jc=0;Ec=1;Fc=0;Gc=5126;Qc=Sc=$c=Pc=0;A(ob)?(Bb=!0,Pb=W.createStream(34962,ob),Gc=Pb.dtype):(Pb=W.getBuffer(ob))?Gc=
Pb.dtype:"constant"in ob?(Ec=2,"number"===typeof ob.constant?($c=ob.constant,Sc=Qc=Pc=0):($c=0<ob.constant.length?ob.constant[0]:0,Sc=1<ob.constant.length?ob.constant[1]:0,Qc=2<ob.constant.length?ob.constant[2]:0,Pc=3<ob.constant.length?ob.constant[3]:0)):(Pb=A(ob.buffer)?W.createStream(34962,ob.buffer):W.getBuffer(ob.buffer),Gc="type"in ob?Zd[ob.type]:Pb.dtype,hc=!!ob.normalized,ce=ob.size|0,jc=ob.offset|0,Fc=ob.stride|0,Sb=ob.divisor|0);Nb=T.location;Hb=zc[Nb];if(1===Ec){Hb.buffer||H.enableVertexAttribArray(Nb);
Rc=ce||4;if(Hb.type!==Gc||Hb.size!==Rc||Hb.buffer!==Pb||Hb.normalized!==hc||Hb.offset!==jc||Hb.stride!==Fc)H.bindBuffer(34962,Pb.buffer),H.vertexAttribPointer(Nb,Rc,Gc,hc,Fc,jc),Hb.type=Gc,Hb.size=Rc,Hb.buffer=Pb,Hb.normalized=hc,Hb.offset=jc,Hb.stride=Fc;Hb.divisor!==Sb&&(L.vertexAttribDivisorANGLE(Nb,Sb),Hb.divisor=Sb)}else if(Hb.buffer&&(H.disableVertexAttribArray(Nb),Hb.buffer=null),Hb.x!==$c||Hb.y!==Sc||Hb.z!==Qc||Hb.w!==Pc)H.vertexAttrib4f(Nb,$c,Sc,Qc,Pc),Hb.x=$c,Hb.y=Sc,Hb.z=Qc,Hb.w=Pc;Jc=
x.call(this,J,d,0);Tc=!1;ic=null;Wc=0;od=!1;Te=gd=0;Xc=1;rf=0;Ld=5126;Gd=Vd=re=te=0;A(Jc)?(Tc=!0,ic=W.createStream(34962,Jc),Ld=ic.dtype):(ic=W.getBuffer(Jc))?Ld=ic.dtype:"constant"in Jc?(Xc=2,"number"===typeof Jc.constant?(re=Jc.constant,Vd=Gd=te=0):(re=0<Jc.constant.length?Jc.constant[0]:0,Vd=1<Jc.constant.length?Jc.constant[1]:0,Gd=2<Jc.constant.length?Jc.constant[2]:0,te=3<Jc.constant.length?Jc.constant[3]:0)):(ic=A(Jc.buffer)?W.createStream(34962,Jc.buffer):W.getBuffer(Jc.buffer),Ld="type"in
Jc?Zd[Jc.type]:ic.dtype,od=!!Jc.normalized,Te=Jc.size|0,gd=Jc.offset|0,rf=Jc.stride|0,Wc=Jc.divisor|0);Dd=ac.location;dd=zc[Dd];if(1===Xc){dd.buffer||H.enableVertexAttribArray(Dd);Hc=Te||4;if(dd.type!==Ld||dd.size!==Hc||dd.buffer!==ic||dd.normalized!==od||dd.offset!==gd||dd.stride!==rf)H.bindBuffer(34962,ic.buffer),H.vertexAttribPointer(Dd,Hc,Ld,od,rf,gd),dd.type=Ld,dd.size=Hc,dd.buffer=ic,dd.normalized=od,dd.offset=gd,dd.stride=rf;dd.divisor!==Wc&&(L.vertexAttribDivisorANGLE(Dd,Wc),dd.divisor=Wc)}else if(dd.buffer&&
(H.disableVertexAttribArray(Dd),dd.buffer=null),dd.x!==re||dd.y!==Vd||dd.z!==Gd||dd.w!==te)H.vertexAttrib4f(Dd,re,Vd,Gd,te),dd.x=re,dd.y=Vd,dd.z=Gd,dd.w=te;pd=f.call(this,J,d,0);hd=!1;Yc=null;rd=0;Ad=!1;Le=Bd=0;ke=1;ue=0;fe=5126;$d=ne=be=ee=0;A(pd)?(hd=!0,Yc=W.createStream(34962,pd),fe=Yc.dtype):(Yc=W.getBuffer(pd))?fe=Yc.dtype:"constant"in pd?(ke=2,"number"===typeof pd.constant?(be=pd.constant,ne=$d=ee=0):(be=0<pd.constant.length?pd.constant[0]:0,ne=1<pd.constant.length?pd.constant[1]:0,$d=2<pd.constant.length?
pd.constant[2]:0,ee=3<pd.constant.length?pd.constant[3]:0)):(Yc=A(pd.buffer)?W.createStream(34962,pd.buffer):W.getBuffer(pd.buffer),fe="type"in pd?Zd[pd.type]:Yc.dtype,Ad=!!pd.normalized,Le=pd.size|0,Bd=pd.offset|0,ue=pd.stride|0,rd=pd.divisor|0);he=ja.location;Bc=zc[he];if(1===ke){Bc.buffer||H.enableVertexAttribArray(he);Vc=Le||1;if(Bc.type!==fe||Bc.size!==Vc||Bc.buffer!==Yc||Bc.normalized!==Ad||Bc.offset!==Bd||Bc.stride!==ue)H.bindBuffer(34962,Yc.buffer),H.vertexAttribPointer(he,Vc,fe,Ad,ue,Bd),
Bc.type=fe,Bc.size=Vc,Bc.buffer=Yc,Bc.normalized=Ad,Bc.offset=Bd,Bc.stride=ue;Bc.divisor!==rd&&(L.vertexAttribDivisorANGLE(he,rd),Bc.divisor=rd)}else if(Bc.buffer&&(H.disableVertexAttribArray(he),Bc.buffer=null),Bc.x!==be||Bc.y!==ne||Bc.z!==$d||Bc.w!==ee)H.vertexAttrib4f(he,be,ne,$d,ee),Bc.x=be,Bc.y=ne,Bc.z=$d,Bc.w=ee;H.uniform1i(v.location,!1);H.uniform1f(cc.location,J.pixelRatio);oe=B.call(this,J,d,0);H.uniform2f(Ba.location,oe[0],oe[1]);je=d.scale;H.uniform2f(Ga.location,je[0],je[1]);Ed=d.scaleFract;
H.uniform2f(U.location,Ed[0],Ed[1]);Md=d.translate;H.uniform2f(da.location,Md[0],Md[1]);Od=d.translateFract;H.uniform2f(ra.location,Od[0],Od[1]);H.uniform1f(ba.location,d.opacity);H.uniform1i(Ha.location,w.bind());Pd=d.elements;ie=null;(ie=(Be=A(Pd))?wb.createStream(Pd):wb.getElements(Pd))&&H.bindBuffer(34963,ie.buffer.buffer);ve=d.offset;if(le=d.count)Xe=Ca.instances,0<Xe?ie?L.drawElementsInstancedANGLE(0,le,ie.type,ve<<(ie.type-5121>>1),Xe):L.drawArraysInstancedANGLE(0,ve,le,Xe):0>Xe&&(ie?H.drawElements(0,
le,ie.type,ve<<(ie.type-5121>>1)):H.drawArrays(0,ve,le)),ia.dirty=!0,fa.setVAO(null),J.viewportWidth=D,J.viewportHeight=E,P&&(u.cpuTime+=performance.now()-R),Q&&W.destroyStream(S),xb&&W.destroyStream(Ra),yb&&W.destroyStream(jb),za&&W.destroyStream(gb),gc&&W.destroyStream(Da),zb&&W.destroyStream(Fb),Bb&&W.destroyStream(Pb),Tc&&W.destroyStream(ic),hd&&W.destroyStream(Yc),w.unbind(),Be&&wb.destroyStream(ie)},scope:function(a,b,c){var e,f,g,h,l,p,r,n,x,w,v,y,I,F,H,B,K,M,L,Z,aa,Q,T,U,X,fa,ka,ba,da,ja,
ma,wa,oa,ra,pa,sa,ua,Ga,Ba,Ha,Ka,Oa,Cb,ab,$a,zc,Lb,Na,qb,yb,jb,Pa,vb,pb,vd,fb,rc,Ib,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Zb,Mb,Za,Xb,xa,ac,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,cc,wc,Wa,Ob,pc,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,yc,vc,de,Oc,Id,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Uc,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,yd,gd,ed,Xc,Xd,Ld,ge,qe,Vd,Gd,Dd,dd,Hc,pd,hd,Yc,rd,Ad,Bd,se,ke,ue,fe,ee,be,ne,$d,he,Bc,Vc,oe,je,Ed,Md,Od,Pd,ie,Be,ve,le,Ue,Me,He,pe,ye,Ce,De,Ee,ze,Hd,Sd,Yd,ae,Fe,zd,Qd,we,Ge,ef,We,
Ne,Ie,Ve,Re,Oe,Pe,Rd,Wd,Qe,ff,kf,bf,gf,hf,jf,pf,mf,qf,Bf,Cf,Je,xe,nf,of,Df,Gf,Af,Ef,Ff,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Hf,tf,dg,Sf,Tf,qg,cf,Ye,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,df,Ze,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;e=a.viewport;f=e.x|0;g=e.y|0;h="width"in e?e.width|0:J.framebufferWidth-f;l="height"in e?e.height|0:J.framebufferHeight-g;p=J.viewportWidth;J.viewportWidth=h;r=J.viewportHeight;J.viewportHeight=l;n=Fd[0];
Fd[0]=f;x=Fd[1];Fd[1]=g;w=Fd[2];Fd[2]=h;v=Fd[3];Fd[3]=l;y=na[0];na[0]=0;I=na[1];na[1]=0;F=na[2];na[2]=0;H=na[3];na[3]=1;B=ha.blend_enable;ha.blend_enable=!0;K=E[0];E[0]=770;M=E[1];E[1]=771;L=E[2];E[2]=773;Z=E[3];E[3]=1;aa=ha.depth_enable;ha.depth_enable=!1;Q=a.viewport;T=Q.x|0;U=Q.y|0;X="width"in Q?Q.width|0:J.framebufferWidth-T;fa="height"in Q?Q.height|0:J.framebufferHeight-U;ka=ce[0];ce[0]=T;ba=ce[1];ce[1]=U;da=ce[2];ce[2]=X;ja=ce[3];ce[3]=fa;ma=ha.scissor_enable;ha.scissor_enable=!0;wa=ha.stencil_enable;
ha.stencil_enable=!1;if(oa=ia.profile)ra=performance.now(),u.count++;pa=a.elements;sa=null;sa=(ua=A(pa))?wb.createStream(pa):wb.getElements(pa);Ga=Ca.elements;Ca.elements=sa;Ba=a.offset;Ha=Ca.offset;Ca.offset=Ba;Ka=a.count;Oa=Ca.count;Ca.count=Ka;Cb=Ca.primitive;Ca.primitive=0;ab=V[45];V[45]=!1;$a=a.markerTexture;zc=V[48];V[48]=$a;Lb=a.opacity;Na=V[10];V[10]=Lb;qb=D.call(this,J,a,c);yb=V[46];V[46]=qb;jb=V[47];V[47]=G;Pa=J.pixelRatio;vb=V[34];V[34]=Pa;pb=a.scale;vd=V[6];V[6]=pb;fb=a.scaleFract;rc=
V[7];V[7]=fb;Ib=a.translate;fc=V[8];V[8]=Ib;lb=a.translateFract;mb=V[9];V[9]=lb;qa=C.call(this,J,a,c);rb=!1;va=null;Va=0;db=!1;gb=za=0;Ia=1;Eb=0;Db=5126;Za=Mb=Zb=Sa=0;A(qa)?(rb=!0,va=W.createStream(34962,qa),Db=va.dtype):(va=W.getBuffer(qa))?Db=va.dtype:"constant"in qa?(Ia=2,"number"===typeof qa.constant?(Zb=qa.constant,Mb=Za=Sa=0):(Zb=0<qa.constant.length?qa.constant[0]:0,Mb=1<qa.constant.length?qa.constant[1]:0,Za=2<qa.constant.length?qa.constant[2]:0,Sa=3<qa.constant.length?qa.constant[3]:0)):
(va=A(qa.buffer)?W.createStream(34962,qa.buffer):W.getBuffer(qa.buffer),Db="type"in qa?Zd[qa.type]:va.dtype,db=!!qa.normalized,gb=qa.size|0,za=qa.offset|0,Eb=qa.stride|0,Va=qa.divisor|0);Xb=O.buffer;O.buffer=va;xa=O.divisor;O.divisor=Va;ac=O.normalized;O.normalized=db;La=O.offset;O.offset=za;Qb=O.size;O.size=gb;hb=O.state;O.state=Ia;kb=O.stride;O.stride=Eb;ya=O.type;O.type=Db;gc=O.w;O.w=Sa;Da=O.x;O.x=Zb;sb=O.y;O.y=Mb;tb=O.z;O.z=Za;Xa=Ja.call(this,J,a,c);Ya=!1;oc=null;cc=0;wc=!1;Ob=Wa=0;pc=1;Ea=0;
Ac=5126;zb=nb=Aa=Qa=0;A(Xa)?(Ya=!0,oc=W.createStream(34962,Xa),Ac=oc.dtype):(oc=W.getBuffer(Xa))?Ac=oc.dtype:"constant"in Xa?(pc=2,"number"===typeof Xa.constant?(Aa=Xa.constant,nb=zb=Qa=0):(Aa=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,zb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(oc=A(Xa.buffer)?W.createStream(34962,Xa.buffer):W.getBuffer(Xa.buffer),Ac="type"in Xa?Zd[Xa.type]:oc.dtype,wc=!!Xa.normalized,Ob=Xa.size|0,Wa=Xa.offset|
0,Ea=Xa.stride|0,cc=Xa.divisor|0);Fb=R.buffer;R.buffer=oc;ub=R.divisor;R.divisor=cc;xc=R.normalized;R.normalized=wc;Ab=R.offset;R.offset=Wa;yc=R.size;R.size=Ob;vc=R.state;R.state=pc;de=R.stride;R.stride=Ea;Oc=R.type;R.type=Ac;Id=R.w;R.w=Qa;bd=R.x;R.x=Aa;Yb=R.y;R.y=nb;ec=R.z;R.z=zb;Rb=mc.call(this,J,a,c);Fa=!1;$b=null;ob=0;Bb=!1;Sb=Pb=0;hc=1;jc=0;Uc=5126;Pc=Gc=Fc=Ec=0;A(Rb)?(Fa=!0,$b=W.createStream(34962,Rb),Uc=$b.dtype):($b=W.getBuffer(Rb))?Uc=$b.dtype:"constant"in Rb?(hc=2,"number"===typeof Rb.constant?
(Fc=Rb.constant,Gc=Pc=Ec=0):(Fc=0<Rb.constant.length?Rb.constant[0]:0,Gc=1<Rb.constant.length?Rb.constant[1]:0,Pc=2<Rb.constant.length?Rb.constant[2]:0,Ec=3<Rb.constant.length?Rb.constant[3]:0)):($b=A(Rb.buffer)?W.createStream(34962,Rb.buffer):W.getBuffer(Rb.buffer),Uc="type"in Rb?Zd[Rb.type]:$b.dtype,Bb=!!Rb.normalized,Sb=Rb.size|0,Pb=Rb.offset|0,jc=Rb.stride|0,ob=Rb.divisor|0);$c=k.buffer;k.buffer=$b;Sc=k.divisor;k.divisor=ob;Qc=k.normalized;k.normalized=Bb;Nb=k.offset;k.offset=Pb;Hb=k.size;k.size=
Sb;Rc=k.state;k.state=hc;Jc=k.stride;k.stride=jc;Tc=k.type;k.type=Uc;ic=k.w;k.w=Ec;Wc=k.x;k.x=Fc;yd=k.y;k.y=Gc;gd=k.z;k.z=Pc;ed=z.call(this,J,a,c);Xc=!1;Xd=null;Ld=0;ge=!1;Vd=qe=0;Gd=1;Dd=0;dd=5126;Yc=hd=pd=Hc=0;A(ed)?(Xc=!0,Xd=W.createStream(34962,ed),dd=Xd.dtype):(Xd=W.getBuffer(ed))?dd=Xd.dtype:"constant"in ed?(Gd=2,"number"===typeof ed.constant?(pd=ed.constant,hd=Yc=Hc=0):(pd=0<ed.constant.length?ed.constant[0]:0,hd=1<ed.constant.length?ed.constant[1]:0,Yc=2<ed.constant.length?ed.constant[2]:
0,Hc=3<ed.constant.length?ed.constant[3]:0)):(Xd=A(ed.buffer)?W.createStream(34962,ed.buffer):W.getBuffer(ed.buffer),dd="type"in ed?Zd[ed.type]:Xd.dtype,ge=!!ed.normalized,Vd=ed.size|0,qe=ed.offset|0,Dd=ed.stride|0,Ld=ed.divisor|0);rd=q.buffer;q.buffer=Xd;Ad=q.divisor;q.divisor=Ld;Bd=q.normalized;q.normalized=ge;se=q.offset;q.offset=qe;ke=q.size;q.size=Vd;ue=q.state;q.state=Gd;fe=q.stride;q.stride=Dd;ee=q.type;q.type=dd;be=q.w;q.w=Hc;ne=q.x;q.x=pd;$d=q.y;q.y=hd;he=q.z;q.z=Yc;Bc=ca.call(this,J,a,c);
Vc=!1;oe=null;je=0;Ed=!1;Od=Md=0;Pd=1;ie=0;Be=5126;Me=Ue=le=ve=0;A(Bc)?(Vc=!0,oe=W.createStream(34962,Bc),Be=oe.dtype):(oe=W.getBuffer(Bc))?Be=oe.dtype:"constant"in Bc?(Pd=2,"number"===typeof Bc.constant?(le=Bc.constant,Ue=Me=ve=0):(le=0<Bc.constant.length?Bc.constant[0]:0,Ue=1<Bc.constant.length?Bc.constant[1]:0,Me=2<Bc.constant.length?Bc.constant[2]:0,ve=3<Bc.constant.length?Bc.constant[3]:0)):(oe=A(Bc.buffer)?W.createStream(34962,Bc.buffer):W.getBuffer(Bc.buffer),Be="type"in Bc?Zd[Bc.type]:oe.dtype,
Ed=!!Bc.normalized,Od=Bc.size|0,Md=Bc.offset|0,ie=Bc.stride|0,je=Bc.divisor|0);He=P.buffer;P.buffer=oe;pe=P.divisor;P.divisor=je;ye=P.normalized;P.normalized=Ed;Ce=P.offset;P.offset=Md;De=P.size;P.size=Od;Ee=P.state;P.state=Pd;ze=P.stride;P.stride=ie;Hd=P.type;P.type=Be;Sd=P.w;P.w=ve;Yd=P.x;P.x=le;ae=P.y;P.y=Ue;Fe=P.z;P.z=Me;zd=S.call(this,J,a,c);Qd=!1;we=null;Ge=0;ef=!1;Ne=We=0;Ie=1;Ve=0;Re=5126;Wd=Rd=Pe=Oe=0;A(zd)?(Qd=!0,we=W.createStream(34962,zd),Re=we.dtype):(we=W.getBuffer(zd))?Re=we.dtype:
"constant"in zd?(Ie=2,"number"===typeof zd.constant?(Pe=zd.constant,Rd=Wd=Oe=0):(Pe=0<zd.constant.length?zd.constant[0]:0,Rd=1<zd.constant.length?zd.constant[1]:0,Wd=2<zd.constant.length?zd.constant[2]:0,Oe=3<zd.constant.length?zd.constant[3]:0)):(we=A(zd.buffer)?W.createStream(34962,zd.buffer):W.getBuffer(zd.buffer),Re="type"in zd?Zd[zd.type]:we.dtype,ef=!!zd.normalized,Ne=zd.size|0,We=zd.offset|0,Ve=zd.stride|0,Ge=zd.divisor|0);Qe=t.buffer;t.buffer=we;ff=t.divisor;t.divisor=Ge;kf=t.normalized;t.normalized=
ef;bf=t.offset;t.offset=We;gf=t.size;t.size=Ne;hf=t.state;t.state=Ie;jf=t.stride;t.stride=Ve;pf=t.type;t.type=Re;mf=t.w;t.w=Oe;qf=t.x;t.x=Pe;Bf=t.y;t.y=Rd;Cf=t.z;t.z=Wd;Je=la.call(this,J,a,c);xe=!1;nf=null;of=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;vf=5126;yf=xf=uf=wf=0;A(Je)?(xe=!0,nf=W.createStream(34962,Je),vf=nf.dtype):(nf=W.getBuffer(Je))?vf=nf.dtype:"constant"in Je?(Ef=2,"number"===typeof Je.constant?(uf=Je.constant,xf=yf=wf=0):(uf=0<Je.constant.length?Je.constant[0]:0,xf=1<Je.constant.length?Je.constant[1]:
0,yf=2<Je.constant.length?Je.constant[2]:0,wf=3<Je.constant.length?Je.constant[3]:0)):(nf=A(Je.buffer)?W.createStream(34962,Je.buffer):W.getBuffer(Je.buffer),vf="type"in Je?Zd[Je.type]:nf.dtype,Df=!!Je.normalized,Af=Je.size|0,Gf=Je.offset|0,Ff=Je.stride|0,of=Je.divisor|0);If=N.buffer;N.buffer=nf;Kf=N.divisor;N.divisor=of;Lf=N.normalized;N.normalized=Df;Mf=N.offset;N.offset=Gf;sf=N.size;N.size=Af;Rf=N.state;N.state=Ef;Hf=N.stride;N.stride=Ff;tf=N.type;N.type=vf;dg=N.w;N.w=wf;Sf=N.x;N.x=uf;Tf=N.y;N.y=
xf;qg=N.z;N.z=yf;cf=ea.call(this,J,a,c);Ye=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;A(cf)?(Ye=!0,Nf=W.createStream(34962,cf),Wf=Nf.dtype):(Nf=W.getBuffer(cf))?Wf=Nf.dtype:"constant"in cf?(hg=2,"number"===typeof cf.constant?(Xf=cf.constant,Yf=Zf=Uf=0):(Xf=0<cf.constant.length?cf.constant[0]:0,Yf=1<cf.constant.length?cf.constant[1]:0,Zf=2<cf.constant.length?cf.constant[2]:0,Uf=3<cf.constant.length?cf.constant[3]:0)):(Nf=A(cf.buffer)?W.createStream(34962,cf.buffer):W.getBuffer(cf.buffer),
Wf="type"in cf?Zd[cf.type]:Nf.dtype,eg=!!cf.normalized,gg=cf.size|0,fg=cf.offset|0,ig=cf.stride|0,Of=cf.divisor|0);jg=d.buffer;d.buffer=Nf;rg=d.divisor;d.divisor=Of;sg=d.normalized;d.normalized=eg;tg=d.offset;d.offset=fg;ug=d.size;d.size=gg;vg=d.state;d.state=hg;wg=d.stride;d.stride=ig;xg=d.type;d.type=Wf;yg=d.w;d.w=Uf;zg=d.x;d.x=Xf;Ag=d.y;d.y=Yf;Bg=d.z;d.z=Zf;df=m.call(this,J,a,c);Ze=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;A(df)?(Ze=!0,Pf=W.createStream(34962,df),$f=Pf.dtype):
(Pf=W.getBuffer(df))?$f=Pf.dtype:"constant"in df?(ng=2,"number"===typeof df.constant?(ag=df.constant,bg=cg=Vf=0):(ag=0<df.constant.length?df.constant[0]:0,bg=1<df.constant.length?df.constant[1]:0,cg=2<df.constant.length?df.constant[2]:0,Vf=3<df.constant.length?df.constant[3]:0)):(Pf=A(df.buffer)?W.createStream(34962,df.buffer):W.getBuffer(df.buffer),$f="type"in df?Zd[df.type]:Pf.dtype,kg=!!df.normalized,mg=df.size|0,lg=df.offset|0,og=df.stride|0,Qf=df.divisor|0);pg=Y.buffer;Y.buffer=Pf;Cg=Y.divisor;
Y.divisor=Qf;Dg=Y.normalized;Y.normalized=kg;Eg=Y.offset;Y.offset=lg;Fg=Y.size;Y.size=mg;Gg=Y.state;Y.state=ng;Hg=Y.stride;Y.stride=og;Ig=Y.type;Y.type=$f;Jg=Y.w;Y.w=Vf;Kg=Y.x;Y.x=ag;Lg=Y.y;Y.y=bg;Mg=Y.z;Y.z=cg;Ng=ta.vert;ta.vert=59;Og=ta.frag;ta.frag=58;ia.dirty=!0;b(J,a,c);J.viewportWidth=p;J.viewportHeight=r;Fd[0]=n;Fd[1]=x;Fd[2]=w;Fd[3]=v;na[0]=y;na[1]=I;na[2]=F;na[3]=H;ha.blend_enable=B;E[0]=K;E[1]=M;E[2]=L;E[3]=Z;ha.depth_enable=aa;ce[0]=ka;ce[1]=ba;ce[2]=da;ce[3]=ja;ha.scissor_enable=ma;ha.stencil_enable=
wa;oa&&(u.cpuTime+=performance.now()-ra);ua&&wb.destroyStream(sa);Ca.elements=Ga;Ca.offset=Ha;Ca.count=Oa;Ca.primitive=Cb;V[45]=ab;V[48]=zc;V[10]=Na;V[46]=yb;V[47]=jb;V[34]=vb;V[6]=vd;V[7]=rc;V[8]=fc;V[9]=mb;rb&&W.destroyStream(va);O.buffer=Xb;O.divisor=xa;O.normalized=ac;O.offset=La;O.size=Qb;O.state=hb;O.stride=kb;O.type=ya;O.w=gc;O.x=Da;O.y=sb;O.z=tb;Ya&&W.destroyStream(oc);R.buffer=Fb;R.divisor=ub;R.normalized=xc;R.offset=Ab;R.size=yc;R.state=vc;R.stride=de;R.type=Oc;R.w=Id;R.x=bd;R.y=Yb;R.z=
ec;Fa&&W.destroyStream($b);k.buffer=$c;k.divisor=Sc;k.normalized=Qc;k.offset=Nb;k.size=Hb;k.state=Rc;k.stride=Jc;k.type=Tc;k.w=ic;k.x=Wc;k.y=yd;k.z=gd;Xc&&W.destroyStream(Xd);q.buffer=rd;q.divisor=Ad;q.normalized=Bd;q.offset=se;q.size=ke;q.state=ue;q.stride=fe;q.type=ee;q.w=be;q.x=ne;q.y=$d;q.z=he;Vc&&W.destroyStream(oe);P.buffer=He;P.divisor=pe;P.normalized=ye;P.offset=Ce;P.size=De;P.state=Ee;P.stride=ze;P.type=Hd;P.w=Sd;P.x=Yd;P.y=ae;P.z=Fe;Qd&&W.destroyStream(we);t.buffer=Qe;t.divisor=ff;t.normalized=
kf;t.offset=bf;t.size=gf;t.state=hf;t.stride=jf;t.type=pf;t.w=mf;t.x=qf;t.y=Bf;t.z=Cf;xe&&W.destroyStream(nf);N.buffer=If;N.divisor=Kf;N.normalized=Lf;N.offset=Mf;N.size=sf;N.state=Rf;N.stride=Hf;N.type=tf;N.w=dg;N.x=Sf;N.y=Tf;N.z=qg;Ye&&W.destroyStream(Nf);d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;Ze&&W.destroyStream(Pf);Y.buffer=pg;Y.divisor=Cg;Y.normalized=Dg;Y.offset=Eg;Y.size=Fg;Y.state=Gg;Y.stride=Hg;Y.type=Ig;
Y.w=Jg;Y.x=Kg;Y.y=Lg;Y.z=Mg;ta.vert=Ng;ta.frag=Og;ia.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(c,u,n,I,e,b,p,a,g,r,x,f,B,w,D,G,C,O,Ja,R,mc,k,z,q,ca,P,S,t,la,N,ea,d,m,Y,sa,Ka,vb,Zb,ua,Oa){var X,K,M,Q,oa,L,ac,$a,T,v,ja,ba,Ba,Ha,cc,Ga,U,pb,da,ra,Ib,pc,yc,vd,zc,W,J,ia,Ca,wb,ab,Uc,H,A,ha,ta,V,fa,na,F,y;X=c.attributes;K=c.buffer;M=c.context;Q=c.current;oa=c.draw;L=c.elements;ac=c.extensions;
$a=c.framebuffer;T=c.gl;v=c.isBufferArgs;ja=c.next;ba=c.shader;Ba=c.uniforms;Ha=c.vao;cc=ja.blend_color;Ga=Q.blend_color;U=ja.blend_equation;pb=Q.blend_equation;da=ja.blend_func;ra=Q.blend_func;Ib=ja.colorMask;pc=Q.colorMask;yc=ja.depth_range;vd=Q.depth_range;zc=ja.polygonOffset_offset;W=Q.polygonOffset_offset;J=ja.sample_coverage;ia=Q.sample_coverage;Ca=ja.scissor_box;wb=Q.scissor_box;ab=ja.stencil_func;Uc=Q.stencil_func;H=ja.stencil_opBack;A=Q.stencil_opBack;ha=ja.stencil_opFront;ta=Q.stencil_opFront;
V=ja.viewport;fa=Q.viewport;na={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};F={offset:4,stride:8};y={offset:0,stride:8};return{batch:function(a,b){var c,e,f,g,p,h,r,n,x,w,D,I,C;c=$a.next;c!==$a.cur&&(c?T.bindFramebuffer(36160,c.framebuffer):T.bindFramebuffer(36160,null),$a.cur=c);if(Q.dirty){var G,B,Z,V,ba,da,Ba,cc,Ke,zf,$e,id,Ae,Td,Ud,Kd,Se,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc;G=ja.dither;G!==Q.dither&&(G?T.enable(3024):
T.disable(3024),Q.dither=G);B=U[0];Z=U[1];if(B!==pb[0]||Z!==pb[1])T.blendEquationSeparate(B,Z),pb[0]=B,pb[1]=Z;V=ja.depth_func;V!==Q.depth_func&&(T.depthFunc(V),Q.depth_func=V);ba=yc[0];da=yc[1];if(ba!==vd[0]||da!==vd[1])T.depthRange(ba,da),vd[0]=ba,vd[1]=da;Ba=ja.depth_mask;Ba!==Q.depth_mask&&(T.depthMask(Ba),Q.depth_mask=Ba);cc=Ib[0];Ke=Ib[1];zf=Ib[2];$e=Ib[3];if(cc!==pc[0]||Ke!==pc[1]||zf!==pc[2]||$e!==pc[3])T.colorMask(cc,Ke,zf,$e),pc[0]=cc,pc[1]=Ke,pc[2]=zf,pc[3]=$e;id=ja.cull_enable;id!==Q.cull_enable&&
(id?T.enable(2884):T.disable(2884),Q.cull_enable=id);Ae=ja.cull_face;Ae!==Q.cull_face&&(T.cullFace(Ae),Q.cull_face=Ae);Td=ja.frontFace;Td!==Q.frontFace&&(T.frontFace(Td),Q.frontFace=Td);Ud=ja.lineWidth;Ud!==Q.lineWidth&&(T.lineWidth(Ud),Q.lineWidth=Ud);Kd=ja.polygonOffset_enable;Kd!==Q.polygonOffset_enable&&(Kd?T.enable(32823):T.disable(32823),Q.polygonOffset_enable=Kd);Se=zc[0];sd=zc[1];if(Se!==W[0]||sd!==W[1])T.polygonOffset(Se,sd),W[0]=Se,W[1]=sd;kd=ja.sample_alpha;kd!==Q.sample_alpha&&(kd?T.enable(32926):
T.disable(32926),Q.sample_alpha=kd);xd=ja.sample_enable;xd!==Q.sample_enable&&(xd?T.enable(32928):T.disable(32928),Q.sample_enable=xd);qd=J[0];cd=J[1];if(qd!==ia[0]||cd!==ia[1])T.sampleCoverage(qd,cd),ia[0]=qd,ia[1]=cd;sc=ja.stencil_mask;sc!==Q.stencil_mask&&(T.stencilMask(sc),Q.stencil_mask=sc);td=ab[0];fd=ab[1];Nc=ab[2];if(td!==Uc[0]||fd!==Uc[1]||Nc!==Uc[2])T.stencilFunc(td,fd,Nc),Uc[0]=td,Uc[1]=fd,Uc[2]=Nc;uc=ha[0];bb=ha[1];kc=ha[2];Gb=ha[3];if(uc!==ta[0]||bb!==ta[1]||kc!==ta[2]||Gb!==ta[3])T.stencilOpSeparate(uc,
bb,kc,Gb),ta[0]=uc,ta[1]=bb,ta[2]=kc,ta[3]=Gb;tc=H[0];Ua=H[1];Kc=H[2];dc=H[3];if(tc!==A[0]||Ua!==A[1]||Kc!==A[2]||dc!==A[3])T.stencilOpSeparate(tc,Ua,Kc,dc),A[0]=tc,A[1]=Ua,A[2]=Kc,A[3]=dc;Zc=ja.scissor_enable;Zc!==Q.scissor_enable&&(Zc?T.enable(3089):T.disable(3089),Q.scissor_enable=Zc);Cd=Ca[0];ld=Ca[1];Cc=Ca[2];bc=Ca[3];if(Cd!==wb[0]||ld!==wb[1]||Cc!==wb[2]||bc!==wb[3])T.scissor(Cd,ld,Cc,bc),wb[0]=Cd,wb[1]=ld,wb[2]=Cc,wb[3]=bc}e=this.viewport;f=e.x|0;g=e.y|0;p="width"in e?e.width|0:M.framebufferWidth-
f;h="height"in e?e.height|0:M.framebufferHeight-g;r=M.viewportWidth;M.viewportWidth=p;n=M.viewportHeight;M.viewportHeight=h;T.viewport(f,g,p,h);fa[0]=f;fa[1]=g;fa[2]=p;fa[3]=h;T.blendColor(0,0,0,1);Ga[0]=0;Ga[1]=0;Ga[2]=0;Ga[3]=1;T.enable(3042);Q.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;T.disable(2929);Q.depth_enable=!1;T.disable(2960);Q.stencil_enable=!1;if(x=Q.profile)w=performance.now(),u.count+=b;T.useProgram(O.program);D=ac.angle_instanced_arrays;
var cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,af,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,lf,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb;Ha.setVAO(null);y.buffer=this.sizeBuffer;cb=!1;Jb=null;Ma=0;xb=!1;pa=Ra=0;nd=1;ib=0;Ta=5126;Tb=Dc=eb=Kb=0;v(y)?(cb=!0,Jb=K.createStream(34962,y),Ta=Jb.dtype):(Jb=K.getBuffer(y))?Ta=Jb.dtype:"constant"in y?(nd=2,"number"===typeof y.constant?(eb=y.constant,Dc=Tb=Kb=0):(eb=0<y.constant.length?
y.constant[0]:0,Dc=1<y.constant.length?y.constant[1]:0,Tb=2<y.constant.length?y.constant[2]:0,Kb=3<y.constant.length?y.constant[3]:0)):(Jb=v(y.buffer)?K.createStream(34962,y.buffer):K.getBuffer(y.buffer),Ta="type"in y?na[y.type]:Jb.dtype,xb=!!y.normalized,pa=y.size|0,Ra=y.offset|0,ib=y.stride|0,Ma=y.divisor|0);af=Oa.location;lc=X[af];if(1===nd){lc.buffer||T.enableVertexAttribArray(af);Ub=pa||1;if(lc.type!==Ta||lc.size!==Ub||lc.buffer!==Jb||lc.normalized!==xb||lc.offset!==Ra||lc.stride!==ib)T.bindBuffer(34962,
Jb.buffer),T.vertexAttribPointer(af,Ub,Ta,xb,ib,Ra),lc.type=Ta,lc.size=Ub,lc.buffer=Jb,lc.normalized=xb,lc.offset=Ra,lc.stride=ib;lc.divisor!==Ma&&(D.vertexAttribDivisorANGLE(af,Ma),lc.divisor=Ma)}else if(lc.buffer&&(T.disableVertexAttribArray(af),lc.buffer=null),lc.x!==eb||lc.y!==Dc||lc.z!==Tb||lc.w!==Kb)T.vertexAttrib4f(af,eb,Dc,Tb,Kb),lc.x=eb,lc.y=Dc,lc.z=Tb,lc.w=Kb;F.buffer=this.sizeBuffer;me=!1;Vb=null;Na=0;qb=!1;jb=yb=0;Pa=1;qc=0;Wb=5126;Ic=nc=fb=wd=0;v(F)?(me=!0,Vb=K.createStream(34962,F),
Wb=Vb.dtype):(Vb=K.getBuffer(F))?Wb=Vb.dtype:"constant"in F?(Pa=2,"number"===typeof F.constant?(fb=F.constant,nc=Ic=wd=0):(fb=0<F.constant.length?F.constant[0]:0,nc=1<F.constant.length?F.constant[1]:0,Ic=2<F.constant.length?F.constant[2]:0,wd=3<F.constant.length?F.constant[3]:0)):(Vb=v(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),Wb="type"in F?na[F.type]:Vb.dtype,qb=!!F.normalized,jb=F.size|0,yb=F.offset|0,qc=F.stride|0,Na=F.divisor|0);fc=N.location;lb=X[fc];if(1===Pa){lb.buffer||
T.enableVertexAttribArray(fc);mb=jb||1;if(lb.type!==Wb||lb.size!==mb||lb.buffer!==Vb||lb.normalized!==qb||lb.offset!==yb||lb.stride!==qc)T.bindBuffer(34962,Vb.buffer),T.vertexAttribPointer(fc,mb,Wb,qb,qc,yb),lb.type=Wb,lb.size=mb,lb.buffer=Vb,lb.normalized=qb,lb.offset=yb,lb.stride=qc;lb.divisor!==Na&&(D.vertexAttribDivisorANGLE(fc,Na),lb.divisor=Na)}else if(lb.buffer&&(T.disableVertexAttribArray(fc),lb.buffer=null),lb.x!==fb||lb.y!==nc||lb.z!==Ic||lb.w!==wd)T.vertexAttrib4f(fc,fb,nc,Ic,wd),lb.x=
fb,lb.y=nc,lb.z=Ic,lb.w=wd;qa=this.charBuffer;rb=!1;va=null;Va=0;db=!1;gb=za=0;Ia=1;Eb=0;Db=5126;Za=Mb=Lc=Sa=0;v(qa)?(rb=!0,va=K.createStream(34962,qa),Db=va.dtype):(va=K.getBuffer(qa))?Db=va.dtype:"constant"in qa?(Ia=2,"number"===typeof qa.constant?(Lc=qa.constant,Mb=Za=Sa=0):(Lc=0<qa.constant.length?qa.constant[0]:0,Mb=1<qa.constant.length?qa.constant[1]:0,Za=2<qa.constant.length?qa.constant[2]:0,Sa=3<qa.constant.length?qa.constant[3]:0)):(va=v(qa.buffer)?K.createStream(34962,qa.buffer):K.getBuffer(qa.buffer),
Db="type"in qa?na[qa.type]:va.dtype,db=!!qa.normalized,gb=qa.size|0,za=qa.offset|0,Eb=qa.stride|0,Va=qa.divisor|0);Xb=la.location;xa=X[Xb];if(1===Ia){xa.buffer||T.enableVertexAttribArray(Xb);lf=gb||1;if(xa.type!==Db||xa.size!==lf||xa.buffer!==va||xa.normalized!==db||xa.offset!==za||xa.stride!==Eb)T.bindBuffer(34962,va.buffer),T.vertexAttribPointer(Xb,lf,Db,db,Eb,za),xa.type=Db,xa.size=lf,xa.buffer=va,xa.normalized=db,xa.offset=za,xa.stride=Eb;xa.divisor!==Va&&(D.vertexAttribDivisorANGLE(Xb,Va),xa.divisor=
Va)}else if(xa.buffer&&(T.disableVertexAttribArray(Xb),xa.buffer=null),xa.x!==Lc||xa.y!==Mb||xa.z!==Za||xa.w!==Sa)T.vertexAttrib4f(Xb,Lc,Mb,Za,Sa),xa.x=Lc,xa.y=Mb,xa.z=Za,xa.w=Sa;La=this.position;Qb=!1;hb=null;kb=0;ya=!1;Da=gc=0;sb=1;tb=0;Xa=5126;wc=ad=oc=Ya=0;v(La)?(Qb=!0,hb=K.createStream(34962,La),Xa=hb.dtype):(hb=K.getBuffer(La))?Xa=hb.dtype:"constant"in La?(sb=2,"number"===typeof La.constant?(oc=La.constant,ad=wc=Ya=0):(oc=0<La.constant.length?La.constant[0]:0,ad=1<La.constant.length?La.constant[1]:
0,wc=2<La.constant.length?La.constant[2]:0,Ya=3<La.constant.length?La.constant[3]:0)):(hb=v(La.buffer)?K.createStream(34962,La.buffer):K.getBuffer(La.buffer),Xa="type"in La?na[La.type]:hb.dtype,ya=!!La.normalized,Da=La.size|0,gc=La.offset|0,tb=La.stride|0,kb=La.divisor|0);Wa=sa.location;Ob=X[Wa];if(1===sb){Ob.buffer||T.enableVertexAttribArray(Wa);ud=Da||2;if(Ob.type!==Xa||Ob.size!==ud||Ob.buffer!==hb||Ob.normalized!==ya||Ob.offset!==gc||Ob.stride!==tb)T.bindBuffer(34962,hb.buffer),T.vertexAttribPointer(Wa,
ud,Xa,ya,tb,gc),Ob.type=Xa,Ob.size=ud,Ob.buffer=hb,Ob.normalized=ya,Ob.offset=gc,Ob.stride=tb;Ob.divisor!==kb&&(D.vertexAttribDivisorANGLE(Wa,kb),Ob.divisor=kb)}else if(Ob.buffer&&(T.disableVertexAttribArray(Wa),Ob.buffer=null),Ob.x!==oc||Ob.y!==ad||Ob.z!==wc||Ob.w!==Ya)T.vertexAttrib4f(Wa,oc,ad,wc,Ya),Ob.x=oc,Ob.y=ad,Ob.z=wc,Ob.w=Ya;Ea=this.viewportArray;T.uniform4f(ua.location,Ea[0],Ea[1],Ea[2],Ea[3]);Ac=this.scale;T.uniform2f(vb.location,Ac[0],Ac[1]);Qa=this.translate;T.uniform2f(Zb.location,Qa[0],
Qa[1]);(Aa=oa.elements)?T.bindBuffer(34963,Aa.buffer.buffer):Ha.currentVAO&&(Aa=L.getElements(Ha.currentVAO.elements))&&T.bindBuffer(34963,Aa.buffer.buffer);nb=oa.instances;for(I=0;I<b;++I){C=a[I];var zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Jf,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc,od;zb=Ja.call(this,M,C,I);I&&Fb===zb||(Fb=zb,T.uniform1f(ea.location,zb));ub=R.call(this,M,C,I);I&&xc===ub||(xc=ub,T.uniform1f(m.location,ub));Ab=C.align;I&&jd===Ab||(jd=Ab,T.uniform1f(q.location,
Ab));vc=C.baseline;I&&Jd===vc||(Jd=vc,T.uniform1f(t.location,vc));Oc=C.color;md=Oc[0];Yb=Oc[1];Rb=Oc[2];$b=Oc[3];I&&bd===md&&ec===Yb&&Fa===Rb&&ob===$b||(bd=md,ec=Yb,Fa=Rb,ob=$b,T.uniform4f(d.location,md,Yb,Rb,$b));Bb=mc.call(this,M,C,I);Pb=Bb[0];hc=Bb[1];I&&Sb===Pb&&jc===hc||(Sb=Pb,jc=hc,T.uniform2f(S.location,Pb,hc));Jf=k.call(this,M,C,I);Ec=Jf[0];Gc=Jf[1];I&&Fc===Ec&&Pc===Gc||(Fc=Ec,Pc=Gc,T.uniform2f(P.location,Ec,Gc));$c=C.positionOffset;Sc=$c[0];Nb=$c[1];I&&Qc===Sc&&Hb===Nb||(Qc=Sc,Hb=Nb,T.uniform2f(Ka.location,
Sc,Nb));Rc=C.opacity;I&&Jc===Rc||(Jc=Rc,T.uniform1f(Y.location,Rc));(Tc=z.call(this,M,C,I))&&"framebuffer"===Tc._reglType&&(Tc=Tc.color[0]);ic=Tc._texture;T.uniform1i(ca.location,ic.bind());Wc=C.offset;if(od=C.count)0<nb?Aa?D.drawElementsInstancedANGLE(0,od,Aa.type,Wc<<(Aa.type-5121>>1),nb):D.drawArraysInstancedANGLE(0,Wc,od,nb):0>nb&&(Aa?T.drawElements(0,od,Aa.type,Wc<<(Aa.type-5121>>1)):T.drawArrays(0,Wc,od)),ic.unbind()}cb&&K.destroyStream(Jb);me&&K.destroyStream(Vb);rb&&K.destroyStream(va);Qb&&
K.destroyStream(hb);Q.dirty=!0;Ha.setVAO(null);M.viewportWidth=r;M.viewportHeight=n;x&&(u.cpuTime+=performance.now()-w)},draw:function(c){var f,g,k,l,r,x,h,w,z,D,C,G,B,O,R,Z,V,ba,da,Ba,Ja,Mc,mc,cc,$e,id,Ae,Td,Ud,Kd,Se,sd,kd,xd,qd,cd,sc,td,fd,Nc,uc,bb,kc,Gb,tc,Ua,Kc,dc,Zc,Cd,ld,Cc,bc,cb,Jb,Ma,xb,Ra,pa,nd,ib,Ta,Kb,eb,Dc,Tb,af,lc,Ub,me,Vb,Na,qb,yb,jb,Pa,qc,Wb,wd,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb;f=$a.next;f!==$a.cur&&(f?T.bindFramebuffer(36160,f.framebuffer):T.bindFramebuffer(36160,null),$a.cur=
f);if(Q.dirty){var Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,lf,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc;Ia=ja.dither;Ia!==Q.dither&&(Ia?T.enable(3024):T.disable(3024),Q.dither=Ia);Eb=U[0];Db=U[1];if(Eb!==pb[0]||Db!==pb[1])T.blendEquationSeparate(Eb,Db),pb[0]=Eb,pb[1]=Db;Sa=ja.depth_func;Sa!==Q.depth_func&&(T.depthFunc(Sa),Q.depth_func=Sa);Lc=yc[0];Mb=yc[1];if(Lc!==vd[0]||Mb!==vd[1])T.depthRange(Lc,Mb),vd[0]=Lc,vd[1]=Mb;Za=ja.depth_mask;Za!==Q.depth_mask&&(T.depthMask(Za),
Q.depth_mask=Za);Xb=Ib[0];xa=Ib[1];lf=Ib[2];La=Ib[3];if(Xb!==pc[0]||xa!==pc[1]||lf!==pc[2]||La!==pc[3])T.colorMask(Xb,xa,lf,La),pc[0]=Xb,pc[1]=xa,pc[2]=lf,pc[3]=La;Qb=ja.cull_enable;Qb!==Q.cull_enable&&(Qb?T.enable(2884):T.disable(2884),Q.cull_enable=Qb);hb=ja.cull_face;hb!==Q.cull_face&&(T.cullFace(hb),Q.cull_face=hb);kb=ja.frontFace;kb!==Q.frontFace&&(T.frontFace(kb),Q.frontFace=kb);ya=ja.lineWidth;ya!==Q.lineWidth&&(T.lineWidth(ya),Q.lineWidth=ya);gc=ja.polygonOffset_enable;gc!==Q.polygonOffset_enable&&
(gc?T.enable(32823):T.disable(32823),Q.polygonOffset_enable=gc);Da=zc[0];sb=zc[1];if(Da!==W[0]||sb!==W[1])T.polygonOffset(Da,sb),W[0]=Da,W[1]=sb;tb=ja.sample_alpha;tb!==Q.sample_alpha&&(tb?T.enable(32926):T.disable(32926),Q.sample_alpha=tb);Xa=ja.sample_enable;Xa!==Q.sample_enable&&(Xa?T.enable(32928):T.disable(32928),Q.sample_enable=Xa);Ya=J[0];oc=J[1];if(Ya!==ia[0]||oc!==ia[1])T.sampleCoverage(Ya,oc),ia[0]=Ya,ia[1]=oc;ad=ja.stencil_mask;ad!==Q.stencil_mask&&(T.stencilMask(ad),Q.stencil_mask=ad);
wc=ab[0];Wa=ab[1];Ob=ab[2];if(wc!==Uc[0]||Wa!==Uc[1]||Ob!==Uc[2])T.stencilFunc(wc,Wa,Ob),Uc[0]=wc,Uc[1]=Wa,Uc[2]=Ob;ud=ha[0];Ea=ha[1];Ac=ha[2];Qa=ha[3];if(ud!==ta[0]||Ea!==ta[1]||Ac!==ta[2]||Qa!==ta[3])T.stencilOpSeparate(ud,Ea,Ac,Qa),ta[0]=ud,ta[1]=Ea,ta[2]=Ac,ta[3]=Qa;Aa=H[0];nb=H[1];zb=H[2];Fb=H[3];if(Aa!==A[0]||nb!==A[1]||zb!==A[2]||Fb!==A[3])T.stencilOpSeparate(Aa,nb,zb,Fb),A[0]=Aa,A[1]=nb,A[2]=zb,A[3]=Fb;ub=ja.scissor_enable;ub!==Q.scissor_enable&&(ub?T.enable(3089):T.disable(3089),Q.scissor_enable=
ub);xc=Ca[0];Ab=Ca[1];jd=Ca[2];vc=Ca[3];if(xc!==wb[0]||Ab!==wb[1]||jd!==wb[2]||vc!==wb[3])T.scissor(xc,Ab,jd,vc),wb[0]=xc,wb[1]=Ab,wb[2]=jd,wb[3]=vc}g=this.viewport;k=g.x|0;l=g.y|0;r="width"in g?g.width|0:M.framebufferWidth-k;x="height"in g?g.height|0:M.framebufferHeight-l;h=M.viewportWidth;M.viewportWidth=r;w=M.viewportHeight;M.viewportHeight=x;T.viewport(k,l,r,x);fa[0]=k;fa[1]=l;fa[2]=r;fa[3]=x;T.blendColor(0,0,0,1);Ga[0]=0;Ga[1]=0;Ga[2]=0;Ga[3]=1;T.enable(3042);Q.blend_enable=!0;T.blendFuncSeparate(770,
771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;T.disable(2929);Q.depth_enable=!1;T.disable(2960);Q.stencil_enable=!1;if(z=Q.profile)D=performance.now(),u.count++;T.useProgram(n.program);C=ac.angle_instanced_arrays;Ha.setVAO(null);y.buffer=this.sizeBuffer;G=!1;B=null;O=0;R=!1;V=Z=0;ba=1;da=0;Ba=5126;cc=mc=Mc=Ja=0;v(y)?(G=!0,B=K.createStream(34962,y),Ba=B.dtype):(B=K.getBuffer(y))?Ba=B.dtype:"constant"in y?(ba=2,"number"===typeof y.constant?(Mc=y.constant,mc=cc=Ja=0):(Mc=0<y.constant.length?y.constant[0]:
0,mc=1<y.constant.length?y.constant[1]:0,cc=2<y.constant.length?y.constant[2]:0,Ja=3<y.constant.length?y.constant[3]:0)):(B=v(y.buffer)?K.createStream(34962,y.buffer):K.getBuffer(y.buffer),Ba="type"in y?na[y.type]:B.dtype,R=!!y.normalized,V=y.size|0,Z=y.offset|0,da=y.stride|0,O=y.divisor|0);$e=Oa.location;id=X[$e];if(1===ba){id.buffer||T.enableVertexAttribArray($e);Ae=V||1;if(id.type!==Ba||id.size!==Ae||id.buffer!==B||id.normalized!==R||id.offset!==Z||id.stride!==da)T.bindBuffer(34962,B.buffer),T.vertexAttribPointer($e,
Ae,Ba,R,da,Z),id.type=Ba,id.size=Ae,id.buffer=B,id.normalized=R,id.offset=Z,id.stride=da;id.divisor!==O&&(C.vertexAttribDivisorANGLE($e,O),id.divisor=O)}else if(id.buffer&&(T.disableVertexAttribArray($e),id.buffer=null),id.x!==Mc||id.y!==mc||id.z!==cc||id.w!==Ja)T.vertexAttrib4f($e,Mc,mc,cc,Ja),id.x=Mc,id.y=mc,id.z=cc,id.w=Ja;F.buffer=this.sizeBuffer;Td=!1;Ud=null;Kd=0;Se=!1;kd=sd=0;xd=1;qd=0;cd=5126;Nc=fd=td=sc=0;v(F)?(Td=!0,Ud=K.createStream(34962,F),cd=Ud.dtype):(Ud=K.getBuffer(F))?cd=Ud.dtype:
"constant"in F?(xd=2,"number"===typeof F.constant?(td=F.constant,fd=Nc=sc=0):(td=0<F.constant.length?F.constant[0]:0,fd=1<F.constant.length?F.constant[1]:0,Nc=2<F.constant.length?F.constant[2]:0,sc=3<F.constant.length?F.constant[3]:0)):(Ud=v(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),cd="type"in F?na[F.type]:Ud.dtype,Se=!!F.normalized,kd=F.size|0,sd=F.offset|0,qd=F.stride|0,Kd=F.divisor|0);uc=N.location;bb=X[uc];if(1===xd){bb.buffer||T.enableVertexAttribArray(uc);kc=kd||1;if(bb.type!==
cd||bb.size!==kc||bb.buffer!==Ud||bb.normalized!==Se||bb.offset!==sd||bb.stride!==qd)T.bindBuffer(34962,Ud.buffer),T.vertexAttribPointer(uc,kc,cd,Se,qd,sd),bb.type=cd,bb.size=kc,bb.buffer=Ud,bb.normalized=Se,bb.offset=sd,bb.stride=qd;bb.divisor!==Kd&&(C.vertexAttribDivisorANGLE(uc,Kd),bb.divisor=Kd)}else if(bb.buffer&&(T.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==td||bb.y!==fd||bb.z!==Nc||bb.w!==sc)T.vertexAttrib4f(uc,td,fd,Nc,sc),bb.x=td,bb.y=fd,bb.z=Nc,bb.w=sc;Gb=this.charBuffer;tc=!1;
Ua=null;Kc=0;dc=!1;Cd=Zc=0;ld=1;Cc=0;bc=5126;xb=Ma=Jb=cb=0;v(Gb)?(tc=!0,Ua=K.createStream(34962,Gb),bc=Ua.dtype):(Ua=K.getBuffer(Gb))?bc=Ua.dtype:"constant"in Gb?(ld=2,"number"===typeof Gb.constant?(Jb=Gb.constant,Ma=xb=cb=0):(Jb=0<Gb.constant.length?Gb.constant[0]:0,Ma=1<Gb.constant.length?Gb.constant[1]:0,xb=2<Gb.constant.length?Gb.constant[2]:0,cb=3<Gb.constant.length?Gb.constant[3]:0)):(Ua=v(Gb.buffer)?K.createStream(34962,Gb.buffer):K.getBuffer(Gb.buffer),bc="type"in Gb?na[Gb.type]:Ua.dtype,
dc=!!Gb.normalized,Cd=Gb.size|0,Zc=Gb.offset|0,Cc=Gb.stride|0,Kc=Gb.divisor|0);Ra=la.location;pa=X[Ra];if(1===ld){pa.buffer||T.enableVertexAttribArray(Ra);nd=Cd||1;if(pa.type!==bc||pa.size!==nd||pa.buffer!==Ua||pa.normalized!==dc||pa.offset!==Zc||pa.stride!==Cc)T.bindBuffer(34962,Ua.buffer),T.vertexAttribPointer(Ra,nd,bc,dc,Cc,Zc),pa.type=bc,pa.size=nd,pa.buffer=Ua,pa.normalized=dc,pa.offset=Zc,pa.stride=Cc;pa.divisor!==Kc&&(C.vertexAttribDivisorANGLE(Ra,Kc),pa.divisor=Kc)}else if(pa.buffer&&(T.disableVertexAttribArray(Ra),
pa.buffer=null),pa.x!==Jb||pa.y!==Ma||pa.z!==xb||pa.w!==cb)T.vertexAttrib4f(Ra,Jb,Ma,xb,cb),pa.x=Jb,pa.y=Ma,pa.z=xb,pa.w=cb;ib=this.position;Ta=!1;Kb=null;eb=0;Dc=!1;af=Tb=0;lc=1;Ub=0;me=5126;yb=qb=Na=Vb=0;v(ib)?(Ta=!0,Kb=K.createStream(34962,ib),me=Kb.dtype):(Kb=K.getBuffer(ib))?me=Kb.dtype:"constant"in ib?(lc=2,"number"===typeof ib.constant?(Na=ib.constant,qb=yb=Vb=0):(Na=0<ib.constant.length?ib.constant[0]:0,qb=1<ib.constant.length?ib.constant[1]:0,yb=2<ib.constant.length?ib.constant[2]:0,Vb=3<
ib.constant.length?ib.constant[3]:0)):(Kb=v(ib.buffer)?K.createStream(34962,ib.buffer):K.getBuffer(ib.buffer),me="type"in ib?na[ib.type]:Kb.dtype,Dc=!!ib.normalized,af=ib.size|0,Tb=ib.offset|0,Ub=ib.stride|0,eb=ib.divisor|0);jb=sa.location;Pa=X[jb];if(1===lc){Pa.buffer||T.enableVertexAttribArray(jb);qc=af||2;if(Pa.type!==me||Pa.size!==qc||Pa.buffer!==Kb||Pa.normalized!==Dc||Pa.offset!==Tb||Pa.stride!==Ub)T.bindBuffer(34962,Kb.buffer),T.vertexAttribPointer(jb,qc,me,Dc,Ub,Tb),Pa.type=me,Pa.size=qc,
Pa.buffer=Kb,Pa.normalized=Dc,Pa.offset=Tb,Pa.stride=Ub;Pa.divisor!==eb&&(C.vertexAttribDivisorANGLE(jb,eb),Pa.divisor=eb)}else if(Pa.buffer&&(T.disableVertexAttribArray(jb),Pa.buffer=null),Pa.x!==Na||Pa.y!==qb||Pa.z!==yb||Pa.w!==Vb)T.vertexAttrib4f(jb,Na,qb,yb,Vb),Pa.x=Na,Pa.y=qb,Pa.z=yb,Pa.w=Vb;Wb=I.call(this,M,c,0);T.uniform1f(ea.location,Wb);wd=e.call(this,M,c,0);T.uniform1f(m.location,wd);T.uniform1f(q.location,c.align);T.uniform1f(t.location,c.baseline);fb=this.viewportArray;T.uniform4f(ua.location,
fb[0],fb[1],fb[2],fb[3]);nc=c.color;T.uniform4f(d.location,nc[0],nc[1],nc[2],nc[3]);Ic=b.call(this,M,c,0);T.uniform2f(S.location,Ic[0],Ic[1]);fc=p.call(this,M,c,0);T.uniform2f(P.location,fc[0],fc[1]);lb=this.scale;T.uniform2f(vb.location,lb[0],lb[1]);mb=this.translate;T.uniform2f(Zb.location,mb[0],mb[1]);qa=c.positionOffset;T.uniform2f(Ka.location,qa[0],qa[1]);T.uniform1f(Y.location,c.opacity);(rb=a.call(this,M,c,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);va=rb._texture;T.uniform1i(ca.location,
va.bind());(Va=oa.elements)?T.bindBuffer(34963,Va.buffer.buffer):Ha.currentVAO&&(Va=L.getElements(Ha.currentVAO.elements))&&T.bindBuffer(34963,Va.buffer.buffer);db=c.offset;if(za=c.count)gb=oa.instances,0<gb?Va?C.drawElementsInstancedANGLE(0,za,Va.type,db<<(Va.type-5121>>1),gb):C.drawArraysInstancedANGLE(0,db,za,gb):0>gb&&(Va?T.drawElements(0,za,Va.type,db<<(Va.type-5121>>1)):T.drawArrays(0,db,za)),Q.dirty=!0,Ha.setVAO(null),M.viewportWidth=h,M.viewportHeight=w,z&&(u.cpuTime+=performance.now()-D),
G&&K.destroyStream(B),Td&&K.destroyStream(Ud),tc&&K.destroyStream(Ua),Ta&&K.destroyStream(Kb),va.unbind()},scope:function(a,b,d){var c,e,k,p,h,m,q,n,t,z,A,I,H,J,O,L,N,R,P,W,S,T,U,X,fa,Y,ca,ea,ha,ia,ta,la,ra,sa,ua,Ca,Ga,Ha,Ka,Ja,Oa,ab,$a,Ua,zc,vb,wb,pb,Mc,vd,mc,cb,Jb,Ma,xb,Ra,pa,Ib,ib,Ta,Kb,eb,Zb,Tb,ac,lc,Ub,pc,Vb,Na,qb,yb,jb,Pa,qc,Wb,yc,fb,nc,Ic,fc,lb,mb,qa,rb,va,Va,db,za,gb,Ia,Eb,Db,Sa,Lc,Mb,Za,Xb,xa,Uc,La,Qb,hb,kb,ya,gc,Da,sb,tb,Xa,Ya,oc,ad,wc,Wa,Ob,ud,Ea,Ac,Qa,Aa,nb,zb,Fb,ub,xc,Ab,jd,vc,Jd,Oc,
md,bd,Yb,ec,Rb,Fa,$b,ob,Bb,Pb,Sb,hc,jc,Jf,Ec,Fc,Gc,Pc,$c,Sc,Qc,Nb,Hb,Rc,Jc,Tc,ic,Wc;c=this.viewport;e=c.x|0;k=c.y|0;p="width"in c?c.width|0:M.framebufferWidth-e;h="height"in c?c.height|0:M.framebufferHeight-k;m=M.viewportWidth;M.viewportWidth=p;q=M.viewportHeight;M.viewportHeight=h;n=V[0];V[0]=e;t=V[1];V[1]=k;z=V[2];V[2]=p;A=V[3];V[3]=h;I=cc[0];cc[0]=0;H=cc[1];cc[1]=0;J=cc[2];cc[2]=0;O=cc[3];cc[3]=1;L=ja.blend_enable;ja.blend_enable=!0;N=da[0];da[0]=770;R=da[1];da[1]=771;P=da[2];da[2]=773;W=da[3];
da[3]=1;S=ja.depth_enable;ja.depth_enable=!1;T=ja.stencil_enable;ja.stencil_enable=!1;if(U=Q.profile)X=performance.now(),u.count++;fa=a.offset;Y=oa.offset;oa.offset=fa;ca=a.count;ea=oa.count;oa.count=ca;ha=oa.primitive;oa.primitive=0;ia=a.align;ta=Ba[64];Ba[64]=ia;la=g.call(this,M,a,d);ra=Ba[69];Ba[69]=la;sa=r.call(this,M,a,d);ua=Ba[67];Ba[67]=sa;Ca=x.call(this,M,a,d);Ga=Ba[66];Ba[66]=Ca;Ha=a.baseline;Ka=Ba[65];Ba[65]=Ha;Ja=f.call(this,M,a,d);Oa=Ba[62];Ba[62]=Ja;ab=a.color;$a=Ba[14];Ba[14]=ab;Ua=
B.call(this,M,a,d);zc=Ba[63];Ba[63]=Ua;vb=a.opacity;wb=Ba[10];Ba[10]=vb;pb=a.positionOffset;Mc=Ba[68];Ba[68]=pb;vd=this.scale;mc=Ba[6];Ba[6]=vd;cb=this.translate;Jb=Ba[8];Ba[8]=cb;Ma=this.viewportArray;xb=Ba[3];Ba[3]=Ma;Ra=this.charBuffer;pa=!1;Ib=null;ib=0;Ta=!1;eb=Kb=0;Zb=1;Tb=0;ac=5126;Vb=pc=Ub=lc=0;v(Ra)?(pa=!0,Ib=K.createStream(34962,Ra),ac=Ib.dtype):(Ib=K.getBuffer(Ra))?ac=Ib.dtype:"constant"in Ra?(Zb=2,"number"===typeof Ra.constant?(Ub=Ra.constant,pc=Vb=lc=0):(Ub=0<Ra.constant.length?Ra.constant[0]:
0,pc=1<Ra.constant.length?Ra.constant[1]:0,Vb=2<Ra.constant.length?Ra.constant[2]:0,lc=3<Ra.constant.length?Ra.constant[3]:0)):(Ib=v(Ra.buffer)?K.createStream(34962,Ra.buffer):K.getBuffer(Ra.buffer),ac="type"in Ra?na[Ra.type]:Ib.dtype,Ta=!!Ra.normalized,eb=Ra.size|0,Kb=Ra.offset|0,Tb=Ra.stride|0,ib=Ra.divisor|0);Na=w.buffer;w.buffer=Ib;qb=w.divisor;w.divisor=ib;yb=w.normalized;w.normalized=Ta;jb=w.offset;w.offset=Kb;Pa=w.size;w.size=eb;qc=w.state;w.state=Zb;Wb=w.stride;w.stride=Tb;yc=w.type;w.type=
ac;fb=w.w;w.w=lc;nc=w.x;w.x=Ub;Ic=w.y;w.y=pc;fc=w.z;w.z=Vb;F.buffer=this.sizeBuffer;lb=!1;mb=null;qa=0;rb=!1;Va=va=0;db=1;za=0;gb=5126;Sa=Db=Eb=Ia=0;v(F)?(lb=!0,mb=K.createStream(34962,F),gb=mb.dtype):(mb=K.getBuffer(F))?gb=mb.dtype:"constant"in F?(db=2,"number"===typeof F.constant?(Eb=F.constant,Db=Sa=Ia=0):(Eb=0<F.constant.length?F.constant[0]:0,Db=1<F.constant.length?F.constant[1]:0,Sa=2<F.constant.length?F.constant[2]:0,Ia=3<F.constant.length?F.constant[3]:0)):(mb=v(F.buffer)?K.createStream(34962,
F.buffer):K.getBuffer(F.buffer),gb="type"in F?na[F.type]:mb.dtype,rb=!!F.normalized,Va=F.size|0,va=F.offset|0,za=F.stride|0,qa=F.divisor|0);Lc=D.buffer;D.buffer=mb;Mb=D.divisor;D.divisor=qa;Za=D.normalized;D.normalized=rb;Xb=D.offset;D.offset=va;xa=D.size;D.size=Va;Uc=D.state;D.state=db;La=D.stride;D.stride=za;Qb=D.type;D.type=gb;hb=D.w;D.w=Ia;kb=D.x;D.x=Eb;ya=D.y;D.y=Db;gc=D.z;D.z=Sa;Da=this.position;sb=!1;tb=null;Xa=0;Ya=!1;ad=oc=0;wc=1;Wa=0;Ob=5126;Qa=Ac=Ea=ud=0;v(Da)?(sb=!0,tb=K.createStream(34962,
Da),Ob=tb.dtype):(tb=K.getBuffer(Da))?Ob=tb.dtype:"constant"in Da?(wc=2,"number"===typeof Da.constant?(Ea=Da.constant,Ac=Qa=ud=0):(Ea=0<Da.constant.length?Da.constant[0]:0,Ac=1<Da.constant.length?Da.constant[1]:0,Qa=2<Da.constant.length?Da.constant[2]:0,ud=3<Da.constant.length?Da.constant[3]:0)):(tb=v(Da.buffer)?K.createStream(34962,Da.buffer):K.getBuffer(Da.buffer),Ob="type"in Da?na[Da.type]:tb.dtype,Ya=!!Da.normalized,ad=Da.size|0,oc=Da.offset|0,Wa=Da.stride|0,Xa=Da.divisor|0);Aa=G.buffer;G.buffer=
tb;nb=G.divisor;G.divisor=Xa;zb=G.normalized;G.normalized=Ya;Fb=G.offset;G.offset=oc;ub=G.size;G.size=ad;xc=G.state;G.state=wc;Ab=G.stride;G.stride=Wa;jd=G.type;G.type=Ob;vc=G.w;G.w=ud;Jd=G.x;G.x=Ea;Oc=G.y;G.y=Ac;md=G.z;G.z=Qa;y.buffer=this.sizeBuffer;bd=!1;Yb=null;ec=0;Rb=!1;$b=Fa=0;ob=1;Bb=0;Pb=5126;Jf=jc=hc=Sb=0;v(y)?(bd=!0,Yb=K.createStream(34962,y),Pb=Yb.dtype):(Yb=K.getBuffer(y))?Pb=Yb.dtype:"constant"in y?(ob=2,"number"===typeof y.constant?(hc=y.constant,jc=Jf=Sb=0):(hc=0<y.constant.length?
y.constant[0]:0,jc=1<y.constant.length?y.constant[1]:0,Jf=2<y.constant.length?y.constant[2]:0,Sb=3<y.constant.length?y.constant[3]:0)):(Yb=v(y.buffer)?K.createStream(34962,y.buffer):K.getBuffer(y.buffer),Pb="type"in y?na[y.type]:Yb.dtype,Rb=!!y.normalized,$b=y.size|0,Fa=y.offset|0,Bb=y.stride|0,ec=y.divisor|0);Ec=C.buffer;C.buffer=Yb;Fc=C.divisor;C.divisor=ec;Gc=C.normalized;C.normalized=Rb;Pc=C.offset;C.offset=Fa;$c=C.size;C.size=$b;Sc=C.state;C.state=ob;Qc=C.stride;C.stride=Bb;Nb=C.type;C.type=
Pb;Hb=C.w;C.w=Sb;Rc=C.x;C.x=hc;Jc=C.y;C.y=jc;Tc=C.z;C.z=Jf;ic=ba.vert;ba.vert=61;Wc=ba.frag;ba.frag=60;Q.dirty=!0;b(M,a,d);M.viewportWidth=m;M.viewportHeight=q;V[0]=n;V[1]=t;V[2]=z;V[3]=A;cc[0]=I;cc[1]=H;cc[2]=J;cc[3]=O;ja.blend_enable=L;da[0]=N;da[1]=R;da[2]=P;da[3]=W;ja.depth_enable=S;ja.stencil_enable=T;U&&(u.cpuTime+=performance.now()-X);oa.offset=Y;oa.count=ea;oa.primitive=ha;Ba[64]=ta;Ba[69]=ra;Ba[67]=ua;Ba[66]=Ga;Ba[65]=Ka;Ba[62]=Oa;Ba[14]=$a;Ba[63]=zc;Ba[10]=wb;Ba[68]=Mc;Ba[6]=mc;Ba[8]=Jb;
Ba[3]=xb;pa&&K.destroyStream(Ib);w.buffer=Na;w.divisor=qb;w.normalized=yb;w.offset=jb;w.size=Pa;w.state=qc;w.stride=Wb;w.type=yc;w.w=fb;w.x=nc;w.y=Ic;w.z=fc;lb&&K.destroyStream(mb);D.buffer=Lc;D.divisor=Mb;D.normalized=Za;D.offset=Xb;D.size=xa;D.state=Uc;D.stride=La;D.type=Qb;D.w=hb;D.x=kb;D.y=ya;D.z=gc;sb&&K.destroyStream(tb);G.buffer=Aa;G.divisor=nb;G.normalized=zb;G.offset=Fb;G.size=ub;G.state=xc;G.stride=Ab;G.type=jd;G.w=vc;G.x=Jd;G.y=Oc;G.z=md;bd&&K.destroyStream(Yb);C.buffer=Ec;C.divisor=Fc;
C.normalized=Gc;C.offset=Pc;C.size=$c;C.state=Sc;C.stride=Qc;C.type=Nb;C.w=Hb;C.x=Rc;C.y=Jc;C.z=Tc;ba.vert=ic;ba.frag=Wc;Q.dirty=!0}}}}},{}],25:[function(u,B,Ja){var c=u("./sorted-object-keys");B.exports=function(u,n){for(var I=c(n),e=0;e<I.length;++e)u[I[e]]=n[I[e]];return u}},{"./sorted-object-keys":34}],26:[function(u,B,Ja){function c(c,e,b,p,a,g){for(var r=0;r<e;++r)for(var n=c[r],f=0;f<b;++f)for(var u=n[f],w=0;w<p;++w)a[g++]=u[w]}function ga(n,e,b,p,a){for(var g=1,r=b+1;r<e.length;++r)g*=e[r];
var x=e[b];if(4===e.length-b){var f=e[b+1],u=e[b+2];e=e[b+3];for(r=0;r<x;++r)c(n[r],f,u,e,p,a),a+=g}else for(r=0;r<x;++r)ga(n[r],e,b+1,p,a),a+=g}var n=u("./pool");B.exports={shape:function(c){for(var e=[];c.length;c=c[0])e.push(c.length);return e},flatten:function(u,e,b,p){var a=1;if(e.length)for(var g=0;g<e.length;++g)a*=e[g];else a=0;b=p||n.allocType(b,a);switch(e.length){case 0:break;case 1:p=e[0];for(e=0;e<p;++e)b[e]=u[e];break;case 2:p=e[0];e=e[1];for(g=a=0;g<p;++g)for(var r=u[g],x=0;x<e;++x)b[a++]=
r[x];break;case 3:c(u,e[0],e[1],e[2],b,0);break;default:ga(u,e,0,b,0)}return b}}},{"./pool":32}],27:[function(u,B,Ja){var c=u("./is-typed-array");B.exports=function(u){return Array.isArray(u)||c(u)}},{"./is-typed-array":30}],28:[function(u,B,Ja){var c=u("./is-typed-array");B.exports=function(u){return!!u&&"object"===typeof u&&Array.isArray(u.shape)&&Array.isArray(u.stride)&&"number"===typeof u.offset&&u.shape.length===u.stride.length&&(Array.isArray(u.data)||c(u.data))}},{"./is-typed-array":30}],
29:[function(u,B,Ja){B.exports=function(c){return!(c&c-1)&&!!c}},{}],30:[function(u,B,Ja){B.exports=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray}},{}],31:[function(u,B,Ja){B.exports=function(c,u){for(var n=Array(c),I=0;I<c;++I)n[I]=u(I);return n}},{}],32:[function(u,B,Ja){function c(c){var e,
b;e=(65535<c)<<4;c>>>=e;b=(255<c)<<3;c>>>=b;e|=b;b=(15<c)<<2;c>>>=b;e|=b;b=(3<c)<<1;return e|b|c>>>b>>1}function ga(){function u(e){a:{for(var a=16;268435456>=a;a*=16)if(e<=a){e=a;break a}e=0}a=b[c(e)>>2];return 0<a.length?a.pop():new ArrayBuffer(e)}function e(e){b[c(e.byteLength)>>2].push(e)}var b=n(8,function(){return[]});return{alloc:u,free:e,allocType:function(b,a){var c=null;switch(b){case 5120:c=new Int8Array(u(a),0,a);break;case 5121:c=new Uint8Array(u(a),0,a);break;case 5122:c=new Int16Array(u(2*
a),0,a);break;case 5123:c=new Uint16Array(u(2*a),0,a);break;case 5124:c=new Int32Array(u(4*a),0,a);break;case 5125:c=new Uint32Array(u(4*a),0,a);break;case 5126:c=new Float32Array(u(4*a),0,a);break;default:return null}return c.length!==a?c.subarray(0,a):c},freeType:function(b){e(b.buffer)}}}var n=u("./loop");u=ga();u.zero=ga();B.exports=u},{"./loop":31}],33:[function(u,B,Ja){B.exports={next:"function"===typeof requestAnimationFrame?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,
16)},cancel:"function"===typeof cancelAnimationFrame?function(c){return cancelAnimationFrame(c)}:clearTimeout}},{}],34:[function(u,B,Ja){B.exports=function(c){return Object.keys(c).sort()}},{}],35:[function(u,B,Ja){var c=u("./pool"),ga=new Float32Array(1),n=new Uint32Array(ga.buffer);B.exports=function(u){for(var e=c.allocType(5123,u.length),b=0;b<u.length;++b)if(isNaN(u[b]))e[b]=65535;else if(Infinity===u[b])e[b]=31744;else if(-Infinity===u[b])e[b]=64512;else{ga[0]=u[b];var p=n[0],a=p>>>31<<15,g=
(p<<1>>>24)-127,p=p>>13&1023;e[b]=-24>g?a:-14>g?a+(p+1024>>-14-g):15<g?a+31744:a+(g+15<<10)+p}return e}},{"./pool":32}],36:[function(u,B,Ja){var c=u("./sorted-object-keys");B.exports=function(u){return c(u).map(function(c){return u[c]})}},{"./sorted-object-keys":34}],37:[function(u,B,Ja){function c(c,a,e){function r(){var a=window.innerWidth,b=window.innerHeight;c!==document.body&&(b=n.getBoundingClientRect(),a=b.right-b.left,b=b.bottom-b.top);n.width=e*a;n.height=e*b}var n=document.createElement("canvas");
b(n.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});c.appendChild(n);c===document.body&&(n.style.position="absolute",b(c.style,{margin:0,padding:0}));var f;c!==document.body&&"function"===typeof ResizeObserver?(f=new ResizeObserver(function(){setTimeout(r)}),f.observe(c)):window.addEventListener("resize",r,!1);r();return{canvas:n,onDestroy:function(){f?f.disconnect():window.removeEventListener("resize",r);c.removeChild(n)}}}function ga(b,a){function c(e){try{return b.getContext(e,
a)}catch(g){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function n(b){if("string"===typeof b)return b.split();e(Array.isArray(b),"invalid extension array");return b}function I(b){return"string"===typeof b?(e("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(b)):b}var e=u("./util/check"),b=u("./util/extend");B.exports=function(b){var a=b||{},g,r,x,f;b={};var u=[],w=[],D="undefined"===typeof window?1:window.devicePixelRatio,G=!1,
C=function(a){a&&e.raise(a)},B=function(){};"string"===typeof a?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),g=document.querySelector(a),e(g,"invalid query string for element")):"object"===typeof a?"string"===typeof a.nodeName&&"function"===typeof a.appendChild&&"function"===typeof a.getBoundingClientRect?g=a:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?(f=a,x=f.canvas):(e.constructor(a),"gl"in a?f=a.gl:"canvas"in a?x=I(a.canvas):
"container"in a&&(r=I(a.container)),"attributes"in a&&(b=a.attributes,e.type(b,"object","invalid context attributes")),"extensions"in a&&(u=n(a.extensions)),"optionalExtensions"in a&&(w=n(a.optionalExtensions)),"onDone"in a&&(e.type(a.onDone,"function","invalid or missing onDone callback"),C=a.onDone),"profile"in a&&(G=!!a.profile),"pixelRatio"in a&&(D=+a.pixelRatio,e(0<D,"invalid pixel ratio"))):e.raise("invalid arguments to regl");g&&("canvas"===g.nodeName.toLowerCase()?x=g:r=g);if(!f){if(!x){e("undefined"!==
typeof document,"must manually specify webgl context outside of DOM environments");g=c(r||document.body,C,D);if(!g)return null;x=g.canvas;B=g.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);f=ga(x,b)}return f?{gl:f,canvas:x,container:r,extensions:u,optionalExtensions:w,pixelRatio:D,profile:G,onDone:C,onDestroy:B}:(B(),C("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(u,B,Ja){},
{}],39:[function(u,B,Ja){Ja=u("./lib/alea");var c=u("./lib/xor128"),ga=u("./lib/xorwow"),n=u("./lib/xorshift7"),I=u("./lib/xor4096"),e=u("./lib/tychei");u=u("./seedrandom");u.alea=Ja;u.xor128=c;u.xorwow=ga;u.xorshift7=n;u.xor4096=I;u.tychei=e;B.exports=u},{"./lib/alea":40,"./lib/tychei":41,"./lib/xor128":42,"./lib/xor4096":43,"./lib/xorshift7":44,"./lib/xorwow":45,"./seedrandom":46}],40:[function(u,B,Ja){(function(c,u,n){function B(a){var b=this,c=p();b.next=function(){var a=2091639*b.s0+2.3283064365386963E-10*
b.c;b.s0=b.s1;b.s1=b.s2;return b.s2=a-(b.c=a|0)};b.c=1;b.s0=c(" ");b.s1=c(" ");b.s2=c(" ");b.s0-=c(a);0>b.s0&&(b.s0+=1);b.s1-=c(a);0>b.s1&&(b.s1+=1);b.s2-=c(a);0>b.s2&&(b.s2+=1);c=null}function e(a,b){b.c=a.c;b.s0=a.s0;b.s1=a.s1;b.s2=a.s2;return b}function b(a,b){var c=new B(a),p=b&&b.state,f=c.next;f.int32=function(){return 4294967296*c.next()|0};f["double"]=function(){return f()+1.1102230246251565E-16*(2097152*f()|0)};f.quick=f;p&&("object"==typeof p&&e(p,c),f.state=function(){return e(c,{})});
return f}function p(){var a=4022871197;return function(b){b=b.toString();for(var c=0;c<b.length;c++){a+=b.charCodeAt(c);var e=.02519603282416938*a;a=e>>>0;e-=a;e*=a;a=e>>>0;e-=a;a+=4294967296*e}return 2.3283064365386963E-10*(a>>>0)}}u&&u.exports?u.exports=b:n&&n.amd?n(function(){return b}):this.alea=b})(this,"object"==typeof B&&B,"function"==typeof define&&define)},{}],41:[function(u,B,Ja){(function(c,u,n){function B(b){var a=this,c="";a.next=function(){var b=a.b,c=a.c,e=a.d,g=a.a,b=b<<25^b>>>7^c,
c=c-e|0,e=e<<24^e>>>8^g,g=g-b|0;a.b=b=b<<20^b>>>12^c;a.c=c=c-e|0;a.d=e<<16^c>>>16^g;return a.a=g-b|0};a.a=0;a.b=0;a.c=-1640531527;a.d=1367130551;b===Math.floor(b)?(a.a=b/4294967296|0,a.b=b|0):c+=b;for(b=0;b<c.length+20;b++)a.b^=c.charCodeAt(b)|0,a.next()}function e(b,a){a.a=b.a;a.b=b.b;a.c=b.c;a.d=b.d;return a}function b(b,a){var c=new B(b),r=a&&a.state,n=function(){return(c.next()>>>0)/4294967296};n["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===
a);return a};n.int32=c.next;n.quick=n;r&&("object"==typeof r&&e(r,c),n.state=function(){return e(c,{})});return n}u&&u.exports?u.exports=b:n&&n.amd?n(function(){return b}):this.tychei=b})(this,"object"==typeof B&&B,"function"==typeof define&&define)},{}],42:[function(u,B,Ja){(function(c,u,n){function B(b){var a=this,c="";a.x=0;a.y=0;a.z=0;a.w=0;a.next=function(){var b=a.x^a.x<<11;a.x=a.y;a.y=a.z;a.z=a.w;return a.w=a.w^a.w>>>19^b^b>>>8};b===(b|0)?a.x=b:c+=b;for(b=0;b<c.length+64;b++)a.x^=c.charCodeAt(b)|
0,a.next()}function e(b,a){a.x=b.x;a.y=b.y;a.z=b.z;a.w=b.w;return a}function b(b,a){var c=new B(b),n=a&&a.state,x=function(){return(c.next()>>>0)/4294967296};x["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};x.int32=c.next;x.quick=x;n&&("object"==typeof n&&e(n,c),x.state=function(){return e(c,{})});return x}u&&u.exports?u.exports=b:n&&n.amd?n(function(){return b}):this.xor128=b})(this,"object"==typeof B&&B,"function"==typeof define&&define)},
{}],43:[function(u,B,Ja){(function(c,u,n){function B(b){var a=this;a.next=function(){var b=a.w,c=a.X,e=a.i,f,p;a.w=b=b+1640531527|0;p=c[e+34&127];f=c[e=e+1&127];p^=p<<13;f^=f<<17;p=c[e]=p^p>>>15^f^f>>>12;a.i=e;return p+(b^b>>>16)|0};(function(a,b){var c,e,p,n,u,G=[],C=128;b===(b|0)?(e=b,b=null):(b+="\x00",e=0,C=Math.max(C,b.length));p=0;for(n=-32;n<C;++n)b&&(e^=b.charCodeAt((n+32)%b.length)),0===n&&(u=e),e^=e<<10,e^=e>>>15,e^=e<<4,e^=e>>>13,0<=n&&(u=u+1640531527|0,c=G[n&127]^=e+u,p=0==c?p+1:0);128<=
p&&(G[(b&&b.length||0)&127]=-1);p=127;for(n=512;0<n;--n)e=G[p+34&127],c=G[p=p+1&127],e^=e<<13,c^=c<<17,e^=e>>>15,c^=c>>>12,G[p]=e^c;a.w=u;a.X=G;a.i=p})(a,b)}function e(b,a){a.i=b.i;a.w=b.w;a.X=b.X.slice();return a}function b(b,a){null==b&&(b=+new Date);var c=new B(b),n=a&&a.state,x=function(){return(c.next()>>>0)/4294967296};x["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};x.int32=c.next;x.quick=x;n&&(n.X&&e(n,c),x.state=function(){return e(c,
{})});return x}u&&u.exports?u.exports=b:n&&n.amd?n(function(){return b}):this.xor4096=b})(this,"object"==typeof B&&B,"function"==typeof define&&define)},{}],44:[function(u,B,Ja){(function(c,u,n){function B(b){var a=this;a.next=function(){var b=a.x,c=a.i,e,f;e=b[c];e^=e>>>7;f=e^e<<24;e=b[c+1&7];f=f^e^e>>>10;e=b[c+3&7];f=f^e^e>>>3;e=b[c+4&7];f=f^e^e<<7;e=b[c+7&7];e^=e<<13;f=f^e^e<<9;b[c]=f;a.i=c+1&7;return f};(function(a,b){var c,e=[];if(b===(b|0))e[0]=b;else for(b=""+b,c=0;c<b.length;++c)e[c&7]=e[c&
7]<<15^b.charCodeAt(c)+e[c+1&7]<<13;for(;8>e.length;)e.push(0);for(c=0;8>c&&0===e[c];++c);8==c&&(e[7]=-1);a.x=e;a.i=0;for(c=256;0<c;--c)a.next()})(a,b)}function e(b,a){a.x=b.x.slice();a.i=b.i;return a}function b(b,a){null==b&&(b=+new Date);var c=new B(b),n=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};u["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};u.int32=c.next;u.quick=u;n&&(n.x&&e(n,c),u.state=function(){return e(c,{})});
return u}u&&u.exports?u.exports=b:n&&n.amd?n(function(){return b}):this.xorshift7=b})(this,"object"==typeof B&&B,"function"==typeof define&&define)},{}],45:[function(u,B,Ja){(function(c,u,n){function B(b){var a=this,c="";a.next=function(){var b=a.x^a.x>>>2;a.x=a.y;a.y=a.z;a.z=a.w;a.w=a.v;return(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^b^b<<1)|0};a.x=0;a.y=0;a.z=0;a.w=0;a.v=0;b===(b|0)?a.x=b:c+=b;for(b=0;b<c.length+64;b++)a.x^=c.charCodeAt(b)|0,b==c.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function e(b,a){a.x=
b.x;a.y=b.y;a.z=b.z;a.w=b.w;a.v=b.v;a.d=b.d;return a}function b(b,a){var c=new B(b),n=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};u["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};u.int32=c.next;u.quick=u;n&&("object"==typeof n&&e(n,c),u.state=function(){return e(c,{})});return u}u&&u.exports?u.exports=b:n&&n.amd?n(function(){return b}):this.xorwow=b})(this,"object"==typeof B&&B,"function"==typeof define&&define)},{}],46:[function(u,
B,Ja){(function(c,ga){function n(n,r,u){var w=[];r=1==r?{entropy:!0}:r||{};n=p(b(r.entropy?[n,g(c)]:null==n?a():n,3),w);var B=new I(w),w=function(){for(var a=B.g(6),b=x,c=0;a<f;)a=256*(a+c),b*=256,c=B.g(1);for(;a>=Z;)a/=2,b/=2,c>>>=1;return(a+c)/b};w.int32=function(){return B.g(4)|0};w.quick=function(){return B.g(4)/4294967296};w["double"]=w;p(g(B.S),c);return(r.pass||u||function(a,b,c,f){f&&(f.S&&e(f,B),a.state=function(){return e(B,{})});return c?(ga.random=a,b):a})(w,n,"global"in r?r.global:this==
ga,r.state)}function I(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,n=e.S=[];for(c||(a=[c++]);256>f;)n[f]=f++;for(f=0;256>f;f++)n[f]=n[g=255&g+a[f%c]+(b=n[f])],n[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,n=e.S;a--;)b=n[f=255&f+1],c=256*c+n[255&(n[f]=n[g=255&g+b])+(n[g]=b)];e.i=f;e.j=g;return c})(256)}function e(a,b){b.i=a.i;b.j=a.j;b.S=a.S.slice();return b}function b(a,c){var e=[],f=typeof a,g;if(c&&"object"==f)for(g in a)try{e.push(b(a[g],c-1))}catch(n){}return e.length?e:"string"==f?a:a+"\x00"}
function p(a,b){for(var c=a+"",e,f=0;f<c.length;)b[255&f]=255&(e^=19*b[255&f])+c.charCodeAt(f++);return g(b)}function a(){try{var a;w&&(a=w.randomBytes)?a=a(256):(a=new Uint8Array(256),(r.crypto||r.msCrypto).getRandomValues(a));return g(a)}catch(b){return a=r.navigator,[+new Date,r,a&&a.plugins,r.screen,g(c)]}}function g(a){return String.fromCharCode.apply(0,a)}var r=(0,eval)("this"),x=ga.pow(256,6),f=ga.pow(2,52),Z=2*f,w;ga.seedrandom=n;p(ga.random(),c);if("object"==typeof B&&B.exports){B.exports=
n;try{w=u("crypto")}catch(D){}}else"function"==typeof define&&define.amd&&define(function(){return n})})([],Math)},{crypto:38}],47:[function(u,B,Ja){function c(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var ga=u("./lib/util/check"),n=u("./lib/util/extend"),I=u("./lib/dynamic"),e=u("./lib/util/raf"),b=u("./lib/util/clock"),p=u("./lib/strings"),a=u("./lib/webgl"),g=u("./lib/extension"),r=u("./lib/limits"),x=u("./lib/buffer"),f=u("./lib/elements"),Z=u("./lib/texture"),w=u("./lib/renderbuffer"),
D=u("./lib/framebuffer"),G=u("./lib/attribute"),C=u("./lib/shader"),O=u("./lib/read"),Mc=u("./lib/core"),R=u("./lib/stats"),mc=u("./lib/timer");B.exports=function(k){function u(){if(0===pb.length)K&&K.update(),pc=null;else{pc=e.next(u);d();for(var a=pb.length-1;0<=a;--a){var b=pb[a];b&&b(L,null,0)}sa.flush();K&&K.update()}}function q(){!pc&&0<pb.length&&(pc=e.next(u))}function B(){pc&&(e.cancel(u),pc=null)}function P(a){a.preventDefault();Ja=!0;B();da.forEach(function(a){a()})}function S(a){sa.getError();
Ja=!1;Zb.restore();ja.restore();$a.restore();ba.restore();Ba.restore();Ha.restore();v.restore();K&&K.restore();cc.procs.refresh();q();ra.forEach(function(a){a()})}function t(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(I.isDynamic(f))e[b]=I.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(I.isDynamic(f[g])){e[b]=I.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}ga(!!a,"invalid args to regl({...})");
ga.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");
"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},k=cc.compile(a,f,e,d,g),m=k.draw,p=k.batch,q=k.scope,r=[];return n(function(a,b){var d;Ja&&ga.raise("context lost");if("function"===typeof a)return q.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)q.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)q.call(this,a[d],b,d);else return q.call(this,a,b,0);else if("number"===typeof a){if(0<a)return p.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return p.call(this,
a,a.length)}else return m.call(this,a)},{stats:g,destroy:function(){k.destroy()}})}function la(a,b){var c=0;cc.procs.poll();var d=b.color;d&&(sa.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(sa.clearDepth(+b.depth),c|=256);"stencil"in b&&(sa.clearStencil(b.stencil|0),c|=1024);ga(!!c,"called regl.clear with no buffer specified");sa.clear(c)}function N(a){ga.type(a,"function","regl.frame() callback must be a function");pb.push(a);q();return{cancel:function(){function b(){var a=
c(pb,b);pb[a]=pb[pb.length-1];--pb.length;0>=pb.length&&B()}var d=c(pb,a);ga(0<=d,"cannot cancel a frame twice");pb[d]=b}}}function ea(){var a=Ga.viewport,b=Ga.scissor_box;a[0]=a[1]=b[0]=b[1]=0;L.viewportWidth=L.framebufferWidth=L.drawingBufferWidth=a[2]=b[2]=sa.drawingBufferWidth;L.viewportHeight=L.framebufferHeight=L.drawingBufferHeight=a[3]=b[3]=sa.drawingBufferHeight}function d(){L.tick+=1;L.time=Y();ea();cc.procs.poll()}function m(){ba.refresh();ea();cc.procs.refresh();K&&K.update()}function Y(){return(b()-
M)/1E3}console.log("REGL args are:",k);k=a(k);console.log("REGL configs are:",k);if(!k)return null;var sa=k.gl,Ka=sa.getContextAttributes(),Ja=sa.isContextLost(),Zb=g(sa,k);if(!Zb)return null;var ua=p(),Oa=R(),X=Zb.extensions,K=mc(sa,X),M=b(),Q=sa.drawingBufferWidth,oa=sa.drawingBufferHeight,L={tick:0,time:0,viewportWidth:Q,viewportHeight:oa,framebufferWidth:Q,framebufferHeight:oa,drawingBufferWidth:Q,drawingBufferHeight:oa,pixelRatio:k.pixelRatio},Q={elements:null,primitive:4,count:-1,offset:0,instances:-1},
ac=r(sa,X),$a=x(sa,Oa,k,function(a){return v.destroyBuffer(a)}),T=f(sa,X,$a,Oa),v=G(sa,X,ac,Oa,$a,T,Q),ja=C(sa,ua,Oa,k),ba=Z(sa,X,ac,function(){cc.procs.poll()},L,Oa,k),Ba=w(sa,X,ac,Oa,k),Ha=D(sa,X,ac,ba,Ba,Oa),cc=Mc(sa,ua,X,ac,$a,T,ba,Ha,{},v,ja,Q,L,K,k),ua=O(sa,Ha,cc.procs.poll,L,Ka,X,ac),Ga=cc.next,U=sa.canvas,pb=[],da=[],ra=[],Ib=[k.onDestroy],pc=null;U&&(U.addEventListener("webglcontextlost",P,!1),U.addEventListener("webglcontextrestored",S,!1));var yc=Ha.setFBO=t({framebuffer:I.define.call(null,
1,"framebuffer")});m();Ka=n(t,{clear:function(a){ga("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)yc(n({framebuffer:a.framebuffer.faces[b]},a),la);else yc(a,la);else la(null,a)},prop:I.define.bind(null,1),context:I.define.bind(null,2),"this":I.define.bind(null,3),draw:t({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return T.create(a,!1)},texture:ba.create2D,
cube:ba.createCube,renderbuffer:Ba.create,framebuffer:Ha.create,framebufferCube:Ha.createCube,vao:v.createVAO,attributes:Ka,frame:N,on:function(a,b){ga.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return N(b);case "lost":c=da;break;case "restore":c=ra;break;case "destroy":c=Ib;break;default:ga.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();
break}}}},limits:ac,hasExtension:function(a){return 0<=ac.extensions.indexOf(a.toLowerCase())},read:ua,destroy:function(){pb.length=0;B();U&&(U.removeEventListener("webglcontextlost",P),U.removeEventListener("webglcontextrestored",S));ja.clear();Ha.clear();Ba.clear();v.clear();ba.clear();T.clear();$a.clear();K&&K.clear();Ib.forEach(function(a){a()})},_gl:sa,_refresh:m,poll:function(){d();K&&K.update()},now:Y,stats:Oa});k.onDone(null,Ka);return Ka}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,
"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

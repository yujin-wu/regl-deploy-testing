(function(){function p(u,I,a){function c(d,b){if(!I[d]){if(!u[d]){var n="function"==typeof require&&require;if(!b&&n)return n(d,!0);if(f)return f(d,!0);n=Error("Cannot find module '"+d+"'");throw n.code="MODULE_NOT_FOUND",n;}n=I[d]={exports:{}};u[d][0].call(n.exports,function(a){return c(u[d][1][a]||a)},n,n.exports,p,u,I,a)}return I[d].exports}for(var f="function"==typeof require&&require,g=0;g<a.length;g++)c(a[g]);return c}return p})()({1:[function(p,u,I){function a(a){return f({attributes:{position:a.position},
uniforms:{color:a.color,scale:a.scale,offset:a.offset,phase:a.phase,freq:a.freq},lineWidth:n,count:a.position.length,primitive:a.primitive})}function c(a){return Array(a).fill().map(function(e,b){var c=b/a*Math.PI*2;return[Math.cos(c),Math.sin(c)]})}var f=p("../regl")(),g=p("gl-mat4"),d=p("seedrandom")("my_seed"),b=f({uniforms:{tick:function(a){return a.tick},projection:function(a){return g.perspective([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)},view:g.lookAt([],[2.1,0,1.3],[0,0,0],[0,
0,1])},frag:"\n  precision mediump float;\n  uniform vec3 color;\n  void main() {\n    gl_FragColor = vec4(color, 1.0);\n  }",vert:"\n\n  precision mediump float;\n  attribute vec2 position;\n\n  uniform mat4 projection, view;\n\n  uniform float scale;\n  uniform vec2 offset;\n  uniform float tick;\n  uniform float phase;\n  uniform float freq;\n\n  void main() {\n    vec2 p  = position;\n\n    // scale\n    p *= scale;\n\n    // rotate\n    float phi = tick * freq + phase;\n    p = vec2(\n      dot(vec2(+cos(phi), -sin(phi)), p),\n      dot(vec2(+sin(phi), +cos(phi)), p)\n    );\n\n    // translate\n    p += offset;\n\n    gl_Position = projection * view * vec4(p, 0, 1);\n  }"}),
n=3;n>f.limits.lineWidthDims[1]&&(n=f.limits.lineWidthDims[1]);var e=[],h;e.push(a({color:[1,.1,.3],primitive:"line loop",scale:.25,offset:[-.7,0],phase:0,freq:.01,position:[[-1,-1],[1,-1],[1,1],[-1,1]]}));e.push(a({color:[.2,.8,.3],primitive:"line loop",scale:.25,offset:[-.7,.7],phase:.8,freq:-.014,position:c(3)}));e.push(a({color:[.7,.3,.9],primitive:"line loop",scale:.25,offset:[0,.7],phase:.6,freq:.009,position:c(6)}));var q=30;e.push(a({color:[.3,.6,.8],primitive:"line loop",scale:.25,offset:[.7,
.7],phase:.6,freq:-.011,position:Array(q).fill().map(function(a,e){var b=e/q*Math.PI*2,c=1+.15*Math.sin(70*b);return[c*Math.cos(b),c*Math.sin(b)]})}));q=70;e.push(a({color:[.7,.8,.4],primitive:"line loop",scale:.25,offset:[.7,0],phase:.6,freq:.012,position:Array(q).fill().map(function(a,e){var b=e/q*Math.PI*2,c=1+.15*d();return[c*Math.cos(b),c*Math.sin(b)]})}));q=120;e.push(a({color:[.3,.8,.76],primitive:"line strip",scale:.25,offset:[0,0],phase:.6,freq:.015,position:Array(q).fill().map(function(a,
e){var b=e/q*Math.PI*2,b=5*b;return[.03*(Math.cos(b)+b*Math.sin(b)),.03*(Math.sin(b)-b*Math.cos(b))]})}));q=300;e.push(a({color:[1,1,1],primitive:"line strip",scale:.25,offset:[.7,-.6],phase:.6,freq:-.011,position:Array(q).fill().map(function(a,e){var b=e/q*Math.PI*2,b=5*b;return[1*Math.cos(1.25*b)*Math.cos(b),1*Math.cos(1.25*b)*Math.sin(b)]})}));var q=70,B=5;e.push(a({color:[1,.7,.2],primitive:"line strip",scale:.25,offset:[0,-.6],phase:.6,freq:.015,position:Array(q).fill().map(function(a,e){return[.5*
Math.sin(-Math.PI*B+e/q*Math.PI*B*2),-.9+e/q*1.8]})}));q=20;B=5;e.push(a({color:[.9,.2,.6],primitive:"line strip",scale:.25,offset:[-.7,-.6],phase:.3,freq:-.01,position:Array(q).fill().map(function(a,e){return[e/q*.5*Math.sin(-Math.PI*B+e/q*Math.PI*B*2),-1+e/q*2]})}));f.frame(function(a){f.clear({color:[0,0,0,1],depth:1});b(function(){for(h=0;h<e.length;h++)e[h]()})})},{"../regl":77,"gl-mat4":54,seedrandom:69}],2:[function(p,u,I){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var c=p("./util/sorted-object-keys"),f=p("./util/check"),g=p("./util/values"),d=p("./constants/dtypes.json"),b=p("./util/is-typed-array"),n=p("./util/is-ndarray"),e=p("./constants/primitives.json"),h="attributes elements offset count primitive instances".split(" ");u.exports=function(q,B,l,w,P,z,oa){function C(a){if(a!==Q.currentVAO){var e=B.oes_vertex_array_object;a?e.bindVertexArrayOES(a.vao):e.bindVertexArrayOES(null);
Q.currentVAO=a}}function S(a){if(a!==Q.currentVAO){if(a)a.bindAttrs();else{for(var e=B.angle_instanced_arrays,b=0;b<x.length;++b){var c=x[b];c.buffer?(q.enableVertexAttribArray(b),c.buffer.bind(),q.vertexAttribPointer(b,c.size,c.type,c.normalized,c.stride,c.offfset),e&&c.divisor&&e.vertexAttribDivisorANGLE(b,c.divisor)):(q.disableVertexAttribArray(b),q.vertexAttrib4f(b,c.x,c.y,c.z,c.w))}oa.elements?q.bindBuffer(34963,oa.elements.buffer.buffer):q.bindBuffer(34963,null)}Q.currentVAO=a}}function Nb(){g(da).forEach(function(a){a.destroy()})}
function J(){this.id=++k;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=B.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;da[this.id]=this;this.buffers=[]}function p(){B.oes_vertex_array_object&&g(da).forEach(function(a){a.refresh()})}var v=l.maxAttributes,x=Array(v);for(l=0;l<v;++l)x[l]=new a;var k=0,da={},Q={Record:a,scope:{},state:x,currentVAO:null,targetVAO:null,restore:B.oes_vertex_array_object?p:function(){},
createVAO:function(g){function l(g){var q;if(Array.isArray(g))q=g,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{f("object"===typeof g,"invalid arguments for create vao");f("attributes"in g,"must specify attributes for vao");if(g.elements){var m=g.elements;k.ownsElements?("function"===typeof m&&"elements"===m._reglType?k.elements.destroy():k.elements(m),k.ownsElements=!1):z.getElements(g.elements)?(k.elements=
g.elements,k.ownsElements=!1):(k.elements=z.create(g.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;q=g.attributes;k.offset=0;k.count=-1;k.instances=-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in g&&(k.offset=g.offset|0);"count"in g&&(k.count=g.count|0);"instances"in g&&(k.instances=g.instances|0);"primitive"in g&&(f(g.primitive in e,"bad primitive type: "+g.primitive),k.primitive=e[g.primitive]);f.optional(function(){for(var a=
c(g),e=0;e<a.length;++e)f(0<=h.indexOf(a[e]),'invalid option for vao: "'+a[e]+'" valid options are '+h)});f(Array.isArray(q),"attributes must be an array")}f(q.length<v,"too many attributes");f(0<q.length,"must specify at least one attribute");var m={},L=k.attributes;L.length=q.length;for(var U=0;U<q.length;++U){var x=q[U],w=L[U]=new a,oa=x.data||x;if(Array.isArray(oa)||b(oa)||n(oa)){var ba;k.buffers[U]&&(ba=k.buffers[U],b(oa)&&ba._buffer.byteLength>=oa.byteLength?ba.subdata(oa):(ba.destroy(),k.buffers[U]=
null));k.buffers[U]||(ba=k.buffers[U]=P.create(x,34962,!1,!0));w.buffer=P.getBuffer(ba);w.size=w.buffer.dimension|0;w.normalized=!1;w.type=w.buffer.dtype;w.offset=0;w.stride=0;w.divisor=0;w.state=1;m[U]=1}else P.getBuffer(x)?(w.buffer=P.getBuffer(x),w.size=w.buffer.dimension|0,w.normalized=!1,w.type=w.buffer.dtype,w.offset=0,w.stride=0,w.divisor=0,w.state=1):P.getBuffer(x.buffer)?(w.buffer=P.getBuffer(x.buffer),w.size=(+x.size||w.buffer.dimension)|0,w.normalized=!!x.normalized||!1,"type"in x?(f.parameter(x.type,
d,"invalid buffer type"),w.type=d[x.type]):w.type=w.buffer.dtype,w.offset=(x.offset||0)|0,w.stride=(x.stride||0)|0,w.divisor=(x.divisor||0)|0,w.state=1,f(1<=w.size&&4>=w.size,"size must be between 1 and 4"),f(0<=w.offset,"invalid offset"),f(0<=w.stride&&255>=w.stride,"stride must be between 0 and 255"),f(0<=w.divisor,"divisor must be positive"),f(!w.divisor||!!B.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in x?(f(0<U,"first attribute must not be a constant"),
w.x=+x.x||0,w.y=+x.y||0,w.z=+x.z||0,w.w=+x.w||0,w.state=2):f(!1,"invalid attribute spec for location "+U)}for(ba=0;ba<k.buffers.length;++ba)!m[ba]&&k.buffers[ba]&&(k.buffers[ba].destroy(),k.buffers[ba]=null);k.refresh();return l}var k=new J;w.vaoCount+=1;l.destroy=function(){for(var a=0;a<k.buffers.length;++a)k.buffers[a]&&k.buffers[a].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1);k.destroy()};l._vao=k;l._reglType="vao";return l(g)},getVAO:function(a){return"function"===
typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var e=0;e<x.length;++e){var b=x[e];b.buffer===a&&(q.disableVertexAttribArray(e),b.buffer=null)}},setVAO:B.oes_vertex_array_object?C:S,clear:B.oes_vertex_array_object?Nb:function(){}};J.prototype.bindAttrs=function(){for(var a=B.angle_instanced_arrays,e=this.attributes,b=0;b<e.length;++b){var c=e[b];c.buffer?(q.enableVertexAttribArray(b),q.bindBuffer(34962,c.buffer.buffer),q.vertexAttribPointer(b,c.size,c.type,c.normalized,c.stride,c.offset),
a&&c.divisor&&a.vertexAttribDivisorANGLE(b,c.divisor)):(q.disableVertexAttribArray(b),q.vertexAttrib4f(b,c.x,c.y,c.z,c.w))}for(a=e.length;a<v;++a)q.disableVertexAttribArray(a);(a=z.getElements(this.elements))?q.bindBuffer(34963,a.buffer.buffer):q.bindBuffer(34963,null)};J.prototype.refresh=function(){var a=B.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),Q.currentVAO=null,a.bindVertexArrayOES(null))};J.prototype.destroy=function(){if(this.vao){var a=B.oes_vertex_array_object;
this===Q.currentVAO&&(Q.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);da[this.id]&&(delete da[this.id],--w.vaoCount)};return Q}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(p,u,I){function a(a){return l[Object.prototype.toString.call(a)]|
0}function c(a,e){for(var b=0;b<e.length;++b)a[b]=e[b]}function f(a,e,b,c,d,h,n){for(var f=0,g=0;g<b;++g)for(var l=0;l<c;++l)a[f++]=e[d*g+h*l+n]}var g=p("./util/sorted-object-keys"),d=p("./util/check"),b=p("./util/is-typed-array"),n=p("./util/is-ndarray"),e=p("./util/values"),h=p("./util/pool");I=p("./util/flatten");var q=I.flatten,B=I.shape,l=p("./constants/arraytypes.json"),w=p("./constants/dtypes.json"),P=p("./constants/usage.json"),z=[];z[5120]=1;z[5122]=2;z[5124]=4;z[5121]=1;z[5123]=2;z[5125]=
4;z[5126]=4;u.exports=function(l,C,S,Nb){function J(a){this.id=k++;this.buffer=l.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;S.profile&&(this.stats={size:0})}function p(a,e,b){a.byteLength=e.byteLength;l.bufferData(a.type,e,b)}function v(e,g,l,k,w,m){e.usage=l;if(Array.isArray(g)){if(e.dtype=k||5126,0<g.length)if(Array.isArray(g[0])){w=B(g);for(var L=k=1;L<w.length;++L)k*=w[L];e.dimension=k;g=q(g,w,e.dtype);p(e,g,l);m?e.persistentData=
g:h.freeType(g)}else"number"===typeof g[0]?(e.dimension=w,w=h.allocType(e.dtype,g.length),c(w,g),p(e,w,l),m?e.persistentData=w:h.freeType(w)):b(g[0])?(e.dimension=g[0].length,e.dtype=k||a(g[0])||5126,g=q(g,[g.length,g[0].length],e.dtype),p(e,g,l),m?e.persistentData=g:h.freeType(g)):d.raise("invalid buffer data")}else if(b(g))e.dtype=k||a(g),e.dimension=w,p(e,g,l),m&&(e.persistentData=new Uint8Array(new Uint8Array(g.buffer)));else if(n(g)){w=g.shape;var v=g.stride,L=g.offset,x=0,P=0,z=0,oa=0;1===w.length?
(x=w[0],P=1,z=v[0],oa=0):2===w.length?(x=w[0],P=w[1],z=v[0],oa=v[1]):d.raise("invalid shape");e.dtype=k||a(g.data)||5126;e.dimension=P;w=h.allocType(e.dtype,x*P);f(w,g.data,x,P,z,oa,L);p(e,w,l);m?e.persistentData=w:h.freeType(w)}else g instanceof ArrayBuffer?(e.dtype=5121,e.dimension=w,p(e,g,l),m&&(e.persistentData=new Uint8Array(new Uint8Array(g)))):d.raise("invalid buffer data")}function x(a){C.bufferCount--;Nb(a);var e=a.buffer;d(e,"buffer must not be deleted already");l.deleteBuffer(e);a.buffer=
null;delete da[a.id]}var k=0,da={};J.prototype.bind=function(){l.bindBuffer(this.type,this.buffer)};J.prototype.destroy=function(){x(this)};var Q=[];S.profile&&(C.getTotalBufferSize=function(){var a=0;g(da).forEach(function(e){a+=da[e].stats.size});return a});return{create:function(e,g,k,Nb){function Q(a){var e=35044,c=null,m=0,h=0,g=1;Array.isArray(a)||b(a)||n(a)||a instanceof ArrayBuffer?c=a:"number"===typeof a?m=a|0:a&&(d.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(d(null===c||Array.isArray(c)||b(c)||n(c),"invalid data for buffer"),c=a.data),"usage"in a&&(d.parameter(a.usage,P,"invalid buffer usage"),e=P[a.usage]),"type"in a&&(d.parameter(a.type,w,"invalid buffer type"),h=w[a.type]),"dimension"in a&&(d.type(a.dimension,"number","invalid dimension"),g=a.dimension|0),"length"in a&&(d.nni(m,"buffer length must be a nonnegative integer"),m=a.length|0));L.bind();c?v(L,c,e,h,g,Nb):(m&&l.bufferData(L.type,m,e),L.dtype=h||5121,L.usage=e,L.dimension=g,L.byteLength=
m);S.profile&&(L.stats.size=L.byteLength*z[L.dtype]);return Q}function m(a,e){d(e+a.byteLength<=L.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+e+" to a buffer of size "+L.byteLength);l.bufferSubData(L.type,e,a)}C.bufferCount++;var L=new J(g);da[L.id]=L;k||Q(e);Q._reglType="buffer";Q._buffer=L;Q.subdata=function(e,g){var k=(g||0)|0,l;L.bind();if(b(e)||e instanceof ArrayBuffer)m(e,k);else if(Array.isArray(e)){if(0<e.length)if("number"===
typeof e[0]){var w=h.allocType(L.dtype,e.length);c(w,e);m(w,k);h.freeType(w)}else Array.isArray(e[0])||b(e[0])?(l=B(e),w=q(e,l,L.dtype),m(w,k),h.freeType(w)):d.raise("invalid buffer data")}else if(n(e)){l=e.shape;var v=e.stride,x=w=0,P=0,E=0;1===l.length?(w=l[0],x=1,P=v[0],E=0):2===l.length?(w=l[0],x=l[1],P=v[0],E=v[1]):d.raise("invalid shape");l=Array.isArray(e.data)?L.dtype:a(e.data);l=h.allocType(l,w*x);f(l,e.data,w,x,P,E,e.offset);m(l,k);h.freeType(l)}else d.raise("invalid data for buffer subdata");
return Q};S.profile&&(Q.stats=L.stats);Q.destroy=function(){x(L)};return Q},createStream:function(a,e){var b=Q.pop();b||(b=new J(a));b.bind();v(b,e,35040,0,1,!1);return b},destroyStream:function(a){Q.push(a)},clear:function(){e(da).forEach(x);Q.forEach(x)},getBuffer:function(a){return a&&a._buffer instanceof J?a._buffer:null},restore:function(){e(da).forEach(function(a){a.buffer=l.createBuffer();l.bindBuffer(a.type,a.buffer);l.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:v}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(p,u,I){u.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(p,u,I){u.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(p,u,I){u.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(p,u,I){u.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(p,u,I){function a(a){return Array.isArray(a)||l(a)||w(a)}function c(a){return a.sort(function(a,
e){return"viewport"===a?-1:"viewport"===e?1:a<e?-1:1})}function f(a,e,b,c){this.thisDep=a;this.contextDep=e;this.propDep=b;this.append=c}function g(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function d(a){return new f(!1,!1,!1,a)}function b(a,e){var b=a.type;if(0===b)return b=a.data.length,new f(!0,1<=b,2<=b,e);if(4===b)return b=a.data,new f(b.thisDep,b.contextDep,b.propDep,e);if(5===b)return new f(!1,!1,!1,e);if(6===b){for(var c=b=!1,d=!1,m=0;m<a.data.length;++m){var h=a.data[m];1===h.type?
d=!0:2===h.type?c=!0:3===h.type?b=!0:0===h.type?(b=!0,h=h.data,1<=h&&(c=!0),2<=h&&(d=!0)):4===h.type&&(b=b||h.data.thisDep,c=c||h.data.contextDep,d=d||h.data.propDep)}return new f(b,c,d,e)}return new f(3===b,2===b,1===b,e)}var n=p("./util/sorted-object-keys"),e=p("./util/check"),h=p("./util/extend"),q=p("./util/codegen"),B=p("./util/loop"),l=p("./util/is-typed-array"),w=p("./util/is-ndarray"),P=p("./util/is-array-like"),z=p("./dynamic"),oa=p("./constants/primitives.json"),C=p("./constants/dtypes.json"),
S=["x","y","z","w"],Nb="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),J={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ka="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
v={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},x={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},k={frag:35632,vert:35633},da={cw:2304,ccw:2305},Q=new f(!1,!1,!1,function(){});u.exports=function(l,w,p,H,Z,m,L,U,la,u,ub,bc,na,Oa,Y){function K(a){return a.replace(".","_")}function N(a,e,b){var c=K(a);ea.push(a);
A[c]=G[c]=!!b;V[c]=e}function R(a,e,b){var c=K(a);ea.push(a);Array.isArray(b)?(G[c]=b.slice(),A[c]=b.slice()):G[c]=A[c]=b;Ba[c]=e}function pa(){var a=q(),b=a.link,c=a.global;a.id=lc++;a.batchId="0";var d=b(Ha),h=a.shared={props:"a0"};n(Ha).forEach(function(a){h[a]=c.def(d,".",a)});e.optional(function(){a.CHECK=b(e);a.commandStr=e.guessCommand();a.command=b(a.commandStr);a.assert=function(a,e,c){a("if(!(",e,"))",this.CHECK,".commandRaise(",b(c),",",this.command,");")};t.invalidBlendCombinations=Ka});
var m=a.next={},g=a.current={};n(Ba).forEach(function(a){Array.isArray(G[a])&&(m[a]=c.def(h.next,".",a),g[a]=c.def(h.current,".",a))});var l=a.constants={};n(t).forEach(function(a){l[a]=c.def(JSON.stringify(t[a]))});a.invoke=function(e,c){switch(c.type){case 0:var d=["this",h.context,h.props,a.batchId];return e.def(b(c.data),".call(",d.slice(0,Math.max(c.data.length+1,4)),")");case 1:return e.def(h.props,c.data);case 2:return e.def(h.context,c.data);case 3:return e.def("this",c.data);case 4:return c.data.append(a,
e),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(b){return a.invoke(e,b)})}};a.attribCache={};var f={};a.scopeAttrib=function(a){a=w.id(a);if(a in f)return f[a];var e=u.scope[a];e||(e=u.scope[a]=new ia);return f[a]=b(e)};return a}function O(a){var e=a["static"];a=a.dynamic;var c;if("profile"in e){var h=!!e.profile;c=d(function(a,e){return h});c.enable=h}else if("profile"in a){var m=a.profile;c=b(m,function(a,e){return a.invoke(e,m)})}return c}function Yb(a,c){var h=
a["static"],m=a.dynamic;if("framebuffer"in h){var g=h.framebuffer;return g?(g=U.getFramebuffer(g),e.command(g,"invalid framebuffer object"),d(function(a,e){var b=a.link(g),c=a.shared;e.set(c.framebuffer,".next",b);c=c.context;e.set(c,".framebufferWidth",b+".width");e.set(c,".framebufferHeight",b+".height");return b})):d(function(a,e){var b=a.shared;e.set(b.framebuffer,".next","null");b=b.context;e.set(b,".framebufferWidth",b+".drawingBufferWidth");e.set(b,".framebufferHeight",b+".drawingBufferHeight");
return"null"})}if("framebuffer"in m){var n=m.framebuffer;return b(n,function(a,b){var c=a.invoke(b,n),d=a.shared,ga=d.framebuffer,h=b.def(ga,".getFramebuffer(",c,")");e.optional(function(){a.assert(b,"!"+c+"||"+h,"invalid framebuffer object")});b.set(ga,".next",h);d=d.context;b.set(d,".framebufferWidth",h+"?"+h+".width:"+d+".drawingBufferWidth");b.set(d,".framebufferHeight",h+"?"+h+".height:"+d+".drawingBufferHeight");return h})}return null}function $a(a,c,d){function h(a){if(a in m){var n=m[a];e.commandType(n,
"object","invalid "+a,d.commandStr);var t=!0,l=n.x|0,k=n.y|0,db,V;"width"in n?(db=n.width|0,e.command(0<=db,"invalid "+a,d.commandStr)):t=!1;"height"in n?(V=n.height|0,e.command(0<=V,"invalid "+a,d.commandStr)):t=!1;return new f(!t&&c&&c.thisDep,!t&&c&&c.contextDep,!t&&c&&c.propDep,function(a,e){var b=a.shared.context,c=db;"width"in n||(c=e.def(b,".","framebufferWidth","-",l));var d=V;"height"in n||(d=e.def(b,".","framebufferHeight","-",k));return[l,k,c,d]})}if(a in g){var w=g[a],t=b(w,function(b,
c){var d=b.invoke(c,w);e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var h=b.shared.context,ga=c.def(d,".x|0"),m=c.def(d,".y|0"),g=c.def('"width" in ',d,"?",d,".width|0:","(",h,".","framebufferWidth","-",ga,")"),n=c.def('"height" in ',d,"?",d,".height|0:","(",h,".","framebufferHeight","-",m,")");e.optional(function(){b.assert(c,g+">=0&&"+n+">=0","invalid "+a)});return[ga,m,g,n]});c&&(t.thisDep=t.thisDep||c.thisDep,t.contextDep=t.contextDep||c.contextDep,t.propDep=
t.propDep||c.propDep);return t}return c?new f(c.thisDep,c.contextDep,c.propDep,function(a,e){var b=a.shared.context;return[0,0,e.def(b,".","framebufferWidth"),e.def(b,".","framebufferHeight")]}):null}var m=a["static"],g=a.dynamic;if(a=h("viewport")){var n=a;a=new f(a.thisDep,a.contextDep,a.propDep,function(a,e){var b=n.append(a,e),c=a.shared.context;e.set(c,".viewportWidth",b[2]);e.set(c,".viewportHeight",b[3]);return b})}return{viewport:a,scissor_box:h("scissor.box")}}function T(a,b){var c=a["static"];
if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<n(b.dynamic).length)return null;var c=b["static"],d=n(c);if(0<d.length&&"number"===typeof c[d[0]]){for(var h=[],m=0;m<d.length;++m)e("number"===typeof c[d[m]],"must specify all vertex attribute locations when using vaos"),h.push([c[d[m]]|0,d[m]]);return h}}return null}function y(a,c,h){function m(a){if(a in n){var c=w.id(n[a]);e.optional(function(){ub.shader(k[a],c,e.guessCommand())});var h=d(function(){return c});h.id=c;return h}if(a in
t){var ga=t[a];return b(ga,function(b,c){var d=b.invoke(c,ga),h=c.def(b.shared.strings,".id(",d,")");e.optional(function(){c(b.shared.shader,".shader(",k[a],",",h,",",b.command,");")});return h})}return null}var n=a["static"],t=a.dynamic,l=m("frag"),V=m("vert"),B=null;g(l)&&g(V)?(B=ub.program(V.id,l.id,null,h),a=d(function(a,e){return a.link(B)})):a=new f(l&&l.thisDep||V&&V.thisDep,l&&l.contextDep||V&&V.contextDep,l&&l.propDep||V&&V.propDep,function(a,b){var c=a.shared.shader,d;d=l?l.append(a,b):
b.def(c,".","frag");var h;h=V?V.append(a,b):b.def(c,".","vert");var m=c+".program("+h+","+d;e.optional(function(){m+=","+a.command});return b.def(m+")")});return{frag:l,vert:V,progVar:a,program:B}}function ja(c,h){function t(a,c){if(a in l){var m=l[a]|0;c?V.offset=m:V.instances=m;e.command(!c||0<=m,"invalid "+a,h.commandStr);return d(function(a,e){c&&(a.OFFSET=m);return m})}if(a in k){var n=k[a];return b(n,function(b,d){var h=b.invoke(d,n);c&&(b.OFFSET=h,e.optional(function(){b.assert(d,h+">=0","invalid "+
a)}));return h})}if(c){if(L)return d(function(a,e){return a.OFFSET=0});if(w)return new f(B.thisDep,B.contextDep,B.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(w)return new f(B.thisDep,B.contextDep,B.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var l=c["static"],k=c.dynamic,V={},w=!1,B=function(){if("vao"in l){var a=l.vao;null!==a&&null===u.getVAO(a)&&(a=u.createVAO(a));
w=!0;V.vao=a;return d(function(e){var b=u.getVAO(a);return b?e.link(b):"null"})}if("vao"in k){w=!0;var e=k.vao;return b(e,function(a,b){var c=a.invoke(b,e);return b.def(a.shared.vao+".getVAO("+c+")")})}return null}(),L=!1,q=function(){if("elements"in l){var c=l.elements;V.elements=c;if(a(c)){var n=V.elements=m.create(c,!0),c=m.getElements(n);L=!0}else c&&(c=m.getElements(c),L=!0,e.command(c,"invalid elements",h.commandStr));n=d(function(a,e){if(c){var b=a.link(c);return a.ELEMENTS=b}return a.ELEMENTS=
null});n.value=c;return n}if("elements"in k){L=!0;var g=k.elements;return b(g,function(a,c){var b=a.shared,d=b.isBufferArgs,b=b.elements,h=a.invoke(c,g),m=c.def("null"),d=c.def(d,"(",h,")"),ga=a.cond(d).then(m,"=",b,".createStream(",h,");")["else"](m,"=",b,".getElements(",h,");");e.optional(function(){a.assert(ga["else"],"!"+h+"||"+m,"invalid elements")});c.entry(ga);c.exit(a.cond(d).then(b,".destroyStream(",m,");"));return a.ELEMENTS=m})}return w?new f(B.thisDep,B.contextDep,B.propDep,function(a,
e){return e.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),rd=t("offset",!0),v=function(){if("primitive"in l){var a=l.primitive;V.primitive=a;e.commandParameter(a,oa,"invalid primitve",h.commandStr);return d(function(e,c){return oa[a]})}if("primitive"in k){var c=k.primitive;return b(c,function(a,b){var d=a.constants.primTypes,h=a.invoke(b,c);e.optional(function(){a.assert(b,h+" in "+d,"invalid primitive, must be one of "+n(oa))});
return b.def(d,"[",h,"]")})}return L?g(q)?q.value?d(function(a,e){return e.def(a.ELEMENTS,".primType")}):d(function(){return 4}):new f(q.thisDep,q.contextDep,q.propDep,function(a,e){var c=a.ELEMENTS;return e.def(c,"?",c,".primType:",4)}):w?new f(B.thisDep,B.contextDep,B.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),x=function(){if("count"in l){var a=l.count|0;V.count=a;e.command("number"===typeof a&&0<=a,"invalid vertex count",h.commandStr);
return d(function(){return a})}if("count"in k){var c=k.count;return b(c,function(a,b){var d=a.invoke(b,c);e.optional(function(){a.assert(b,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(L){if(g(q)){if(q)return rd?new f(rd.thisDep,rd.contextDep,rd.propDep,function(a,c){var b=c.def(a.ELEMENTS,".vertCount-",a.OFFSET);e.optional(function(){a.assert(c,b+">=0","invalid vertex offset/element buffer too small")});return b}):d(function(a,e){return e.def(a.ELEMENTS,
".vertCount")});var m=d(function(){return-1});e.optional(function(){m.MISSING=!0});return m}var n=new f(q.thisDep||rd.thisDep,q.contextDep||rd.contextDep,q.propDep||rd.propDep,function(a,e){var c=a.ELEMENTS;return a.OFFSET?e.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):e.def(c,"?",c,".vertCount:-1")});e.optional(function(){n.DYNAMIC=!0});return n}return w?new f(B.thisDep,B.contextDep,B.propDep,function(a,e){return e.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),P=t("instances",
!1);return{elements:q,primitive:v,count:x,instances:P,offset:rd,vao:B,vaoActive:w,elementsActive:L,"static":V}}function ca(a,c){var h=a["static"],m=a.dynamic,g={};ea.forEach(function(a){function t(e,c){if(a in h){var n=e(h[a]);g[l]=d(function(){return n})}else if(a in m){var ga=m[a];g[l]=b(ga,function(a,e){return c(a,e,a.invoke(e,ga))})}}var l=K(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return t(function(b){e.commandType(b,
"boolean",a,c.commandStr);return b},function(c,b,d){e.optional(function(){c.assert(b,"typeof "+d+'==="boolean"',"invalid flag "+a,c.commandStr)});return d});case "depth.func":return t(function(b){e.commandParameter(b,v,"invalid "+a,c.commandStr);return v[b]},function(c,b,d){var h=c.constants.compareFuncs;e.optional(function(){c.assert(b,d+" in "+h,"invalid "+a+", must be one of "+n(v))});return b.def(h,"[",d,"]")});case "depth.range":return t(function(a){e.command(P(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",c.commandStr);return a},function(a,c,b){e.optional(function(){a.assert(c,a.shared.isArrayLike+"("+b+")&&"+b+".length===2&&typeof "+b+'[0]==="number"&&typeof '+b+'[1]==="number"&&'+b+"[0]<="+b+"[1]","depth range must be a 2d array")});var d=c.def("+",b,"[0]"),h=c.def("+",b,"[1]");return[d,h]});case "blend.func":return t(function(a){e.commandType(a,"object","blend.func",c.commandStr);var b="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in a?a.srcAlpha:
a.src,h="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;e.commandParameter(b,J,l+".srcRGB",c.commandStr);e.commandParameter(d,J,l+".srcAlpha",c.commandStr);e.commandParameter(h,J,l+".dstRGB",c.commandStr);e.commandParameter(a,J,l+".dstAlpha",c.commandStr);e.command(-1===Ka.indexOf(b+", "+h),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+h+")",c.commandStr);return[J[b],J[h],J[d],J[a]]},function(c,b,d){function h(g,t){var l=b.def('"',g,t,'" in ',d,"?",d,".",g,t,":",d,".",
g);e.optional(function(){c.assert(b,l+" in "+m,"invalid "+a+"."+g+t+", must be one of "+n(J))});return l}var m=c.constants.blendFuncs;e.optional(function(){c.assert(b,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=h("src","RGB"),t=h("dst","RGB");e.optional(function(){c.assert(b,c.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+t+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var l=b.def(m,"[",g,"]"),ga=b.def(m,"[",h("src","Alpha"),"]"),
f=b.def(m,"[",t,"]"),k=b.def(m,"[",h("dst","Alpha"),"]");return[l,f,ga,k]});case "blend.equation":return t(function(b){if("string"===typeof b)return e.commandParameter(b,ua,"invalid "+a,c.commandStr),[ua[b],ua[b]];if("object"===typeof b)return e.commandParameter(b.rgb,ua,a+".rgb",c.commandStr),e.commandParameter(b.alpha,ua,a+".alpha",c.commandStr),[ua[b.rgb],ua[b.alpha]];e.commandRaise("invalid blend.equation",c.commandStr)},function(c,b,d){var h=c.constants.blendEquations,m=b.def(),g=b.def(),t=c.cond("typeof ",
d,'==="string"');e.optional(function(){function e(a,b,d){c.assert(a,d+" in "+h,"invalid "+b+", must be one of "+n(ua))}e(t.then,a,d);c.assert(t["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);e(t["else"],a+".rgb",d+".rgb");e(t["else"],a+".alpha",d+".alpha")});t.then(m,"=",g,"=",h,"[",d,"];");t["else"](m,"=",h,"[",d,".rgb];",g,"=",h,"[",d,".alpha];");b(t);return[m,g]});case "blend.color":return t(function(a){e.command(P(a)&&4===a.length,"blend.color must be a 4d array",c.commandStr);return B(4,
function(e){return+a[e]})},function(a,c,b){e.optional(function(){a.assert(c,a.shared.isArrayLike+"("+b+")&&"+b+".length===4","blend.color must be a 4d array")});return B(4,function(a){return c.def("+",b,"[",a,"]")})});case "stencil.mask":return t(function(a){e.commandType(a,"number",l,c.commandStr);return a|0},function(a,c,b){e.optional(function(){a.assert(c,"typeof "+b+'==="number"',"invalid stencil.mask")});return c.def(b,"|0")});case "stencil.func":return t(function(b){e.commandType(b,"object",
l,c.commandStr);var d=b.cmp||"keep",h=b.ref||0;b="mask"in b?b.mask:-1;e.commandParameter(d,v,a+".cmp",c.commandStr);e.commandType(h,"number",a+".ref",c.commandStr);e.commandType(b,"number",a+".mask",c.commandStr);return[v[d],h,b]},function(a,c,b){var d=a.constants.compareFuncs;e.optional(function(){function e(){a.assert(c,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(b+"&&typeof ",b,'==="object"');e('!("cmp" in ',b,")||(",b,".cmp in ",d,")")});var h=c.def('"cmp" in ',b,"?",d,"[",
b,".cmp]",":",7680),m=c.def(b,".ref|0"),t=c.def('"mask" in ',b,"?",b,".mask|0:-1");return[h,m,t]});case "stencil.opFront":case "stencil.opBack":return t(function(b){e.commandType(b,"object",l,c.commandStr);var d=b.fail||"keep",h=b.zfail||"keep";b=b.zpass||"keep";e.commandParameter(d,x,a+".fail",c.commandStr);e.commandParameter(h,x,a+".zfail",c.commandStr);e.commandParameter(b,x,a+".zpass",c.commandStr);return["stencil.opBack"===a?1029:1028,x[d],x[h],x[b]]},function(b,c,d){function h(t){e.optional(function(){b.assert(c,
'!("'+t+'" in '+d+")||("+d+"."+t+" in "+m+")","invalid "+a+"."+t+", must be one of "+n(x))});return c.def('"',t,'" in ',d,"?",m,"[",d,".",t,"]:",7680)}var m=b.constants.stencilOps;e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,h("fail"),h("zfail"),h("zpass")]});case "polygonOffset.offset":return t(function(a){e.commandType(a,"object",l,c.commandStr);var b=a.factor|0;a=a.units|0;e.commandType(b,"number",l+".factor",c.commandStr);
e.commandType(a,"number",l+".units",c.commandStr);return[b,a]},function(b,c,d){e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var h=c.def(d,".factor|0"),m=c.def(d,".units|0");return[h,m]});case "cull.face":return t(function(a){var b=0;"front"===a?b=1028:"back"===a&&(b=1029);e.command(!!b,l,c.commandStr);return b},function(a,b,c){e.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return b.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return t(function(a){e.command("number"===
typeof a&&a>=H.lineWidthDims[0]&&a<=H.lineWidthDims[1],"invalid line width, must be a positive number between "+H.lineWidthDims[0]+" and "+H.lineWidthDims[1],c.commandStr);return a},function(a,b,c){e.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+H.lineWidthDims[0]+"&&"+c+"<="+H.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return t(function(a){e.commandParameter(a,da,l,c.commandStr);return da[a]},function(a,b,c){e.optional(function(){a.assert(b,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(c+'==="cw"?2304:2305')});case "colorMask":return t(function(a){e.command(P(a)&&4===a.length,"color.mask must be length 4 array",c.commandStr);return a.map(function(a){return!!a})},function(a,b,c){e.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return B(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return t(function(a){e.command("object"===typeof a&&a,
l,c.commandStr);var b="value"in a?a.value:1;a=!!a.invert;e.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",c.commandStr);return[b,a]},function(a,b,c){e.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var d=b.def('"value" in ',c,"?+",c,".value:1"),h=b.def("!!",c,".invert");return[d,h]})}});return g}function Aa(a,c){var h=a["static"],m=a.dynamic,t={};n(h).forEach(function(a){var b=h[a],m;if("number"===typeof b||
"boolean"===typeof b)m=d(function(){return b});else if("function"===typeof b){var g=b._reglType;"texture2d"===g||"textureCube"===g?m=d(function(a){return a.link(b)}):"framebuffer"===g||"framebufferCube"===g?(e.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',c.commandStr),m=d(function(a){return a.link(b.color[0])})):e.commandRaise('invalid data for uniform "'+a+'"',c.commandStr)}else P(b)?m=d(function(c){return c.global.def("[",B(b.length,function(d){e.command("number"===
typeof b[d]||"boolean"===typeof b[d],"invalid uniform "+a,c.commandStr);return b[d]}),"]")}):e.commandRaise('invalid or missing data for uniform "'+a+'"',c.commandStr);m.value=b;t[a]=m});n(m).forEach(function(a){var e=m[a];t[a]=b(e,function(a,b){return a.invoke(b,e)})});return t}function La(c,h){var m=c["static"],t=c.dynamic,g={};n(m).forEach(function(b){var c=m[b],t=w.id(b),l=new ia;if(a(c))l.state=1,l.buffer=Z.getBuffer(Z.create(c,34962,!1,!0)),l.type=0;else{var f=Z.getBuffer(c);if(f)l.state=1,
l.buffer=f,l.type=0;else if(e.command("object"===typeof c&&c,"invalid data for attribute "+b,h.commandStr),"constant"in c){var k=c.constant;l.buffer="null";l.state=2;"number"===typeof k?l.x=k:(e.command(P(k)&&0<k.length&&4>=k.length,"invalid constant for attribute "+b,h.commandStr),S.forEach(function(a,b){b<k.length&&(l[a]=k[b])}))}else{f=a(c.buffer)?Z.getBuffer(Z.create(c.buffer,34962,!1,!0)):Z.getBuffer(c.buffer);e.command(!!f,'missing buffer for attribute "'+b+'"',h.commandStr);var V=c.offset|
0;e.command(0<=V,'invalid offset for attribute "'+b+'"',h.commandStr);var db=c.stride|0;e.command(0<=db&&256>db,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',h.commandStr);var B=c.size|0;e.command(!("size"in c)||0<B&&4>=B,'invalid size for attribute "'+b+'", must be 1,2,3,4',h.commandStr);var L=!!c.normalized,q=0;"type"in c&&(e.commandParameter(c.type,C,"invalid type for attribute "+b,h.commandStr),q=C[c.type]);var v=c.divisor|0;e.optional(function(){"divisor"in c&&(e.command(0===
v||W,'cannot specify divisor for attribute "'+b+'", instancing not supported',h.commandStr),e.command(0<=v,'invalid divisor for attribute "'+b+'"',h.commandStr));var a=h.commandStr,d="buffer offset divisor normalized type size stride".split(" ");n(c).forEach(function(c){e.command(0<=d.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+b+'" (valid parameters are '+d+")",a)})});l.buffer=f;l.state=1;l.size=B;l.normalized=L;l.type=q||f.dtype;l.offset=V;l.stride=db;l.divisor=v}}g[b]=d(function(a,
b){var c=a.attribCache;if(t in c)return c[t];var e={isStream:!1};n(l).forEach(function(a){e[a]=l[a]});l.buffer&&(e.buffer=a.link(l.buffer),e.type=e.type||e.buffer+".dtype");return c[t]=e})});n(t).forEach(function(a){var c=t[a];g[a]=b(c,function(b,d){function h(a){d(f[a],"=",m,".",a,"|0;")}var m=b.invoke(d,c),t=b.shared,l=b.constants,g=t.isBufferArgs,ga=t.buffer;e.optional(function(){b.assert(d,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+g+"("+m+")||"+ga+".getBuffer("+m+")||"+ga+
".getBuffer("+m+".buffer)||"+g+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+t.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+a+'"')});var f={isStream:d.def(!1)},k=new ia;k.state=1;n(k).forEach(function(a){f[a]=d.def(""+k[a])});var V=f.buffer,db=f.type;d("if(",g,"(",m,")){",f.isStream,"=true;",V,"=",ga,".createStream(",34962,",",m,");",db,"=",V,".dtype;","}else{",V,"=",ga,".getBuffer(",m,");","if(",V,"){",db,"=",V,".dtype;",'}else if("constant" in ',
m,"){",f.state,"=",2,";","if(typeof "+m+'.constant === "number"){',f[S[0]],"=",m,".constant;",S.slice(1).map(function(a){return f[a]}).join("="),"=0;","}else{",S.map(function(a,b){return f[a]+"="+m+".constant.length>"+b+"?"+m+".constant["+b+"]:0;"}).join(""),"}}else{","if(",g,"(",m,".buffer)){",V,"=",ga,".createStream(",34962,",",m,".buffer);","}else{",V,"=",ga,".getBuffer(",m,".buffer);","}",db,'="type" in ',m,"?",l.glTypes,"[",m,".type]:",V,".dtype;",f.normalized,"=!!",m,".normalized;");h("size");
h("offset");h("stride");h("divisor");d("}}");d.exit("if(",f.isStream,"){",ga,".destroyStream(",V,");","}");return f})});return g}function I(a){var c=a["static"],e=a.dynamic,h={};n(c).forEach(function(a){var b=c[a];h[a]=d(function(a,c){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});n(e).forEach(function(a){var c=e[a];h[a]=b(c,function(a,b){return a.invoke(b,c)})});return h}function Ga(a,b,c,d,h){function m(a){var b=V[a];b&&(B[a]=b)}var t=a["static"],g=a.dynamic;e.optional(function(){function a(c){n(c).forEach(function(a){e.command(0<=
b.indexOf(a),'unknown parameter "'+a+'"',h.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ea);a(t);a(g)});var l=T(a,b),k=Yb(a,h),V=$a(a,k,h),w=ja(a,h),B=ca(a,h),q=y(a,h,l);m("viewport");m(K("scissor.box"));var L=0<n(B).length,k={framebuffer:k,draw:w,shader:q,state:B,dirty:L,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};k.profile=O(a,h);k.uniforms=Aa(c,h);k.drawVAO=k.scopeVAO=w.vao;if(!k.drawVAO&&q.program&&!l&&p.angle_instanced_arrays&&
w["static"].elements){var v=!0;a=q.program.attributes.map(function(a){a=b["static"][a];v=v&&!!a;return a});if(v&&0<a.length){var x=u.getVAO(u.createVAO({attributes:a,elements:w["static"].elements}));k.drawVAO=new f(null,null,null,function(a,b){return a.link(x)});k.useVAO=!0}}l?k.useVAO=!0:k.attributes=La(b,h);k.context=I(d,h);return k}function X(a,b,c){var e=a.shared.context,d=a.scope();n(c).forEach(function(h){b.save(e,"."+h);var m=c[h].append(a,b);Array.isArray(m)?d(e,".",h,"=[",m.join(),"];"):
d(e,".",h,"=",m,";")});b(d)}function kb(a,b,c,e){var d=a.shared,h=d.gl,m=d.framebuffer,t;ha&&(t=b.def(d.extensions,".webgl_draw_buffers"));var l=a.constants,d=l.drawBuffer,l=l.backBuffer;a=c?c.append(a,b):b.def(m,".next");e||b("if(",a,"!==",m,".cur){");b("if(",a,"){",h,".bindFramebuffer(",36160,",",a,".framebuffer);");ha&&b(t,".drawBuffersWEBGL(",d,"[",a,".colorAttachments.length]);");b("}else{",h,".bindFramebuffer(",36160,",null);");ha&&b(t,".drawBuffersWEBGL(",l,");");b("}",m,".cur=",a,";");e||
b("}")}function fa(a,b,c){var e=a.shared,d=e.gl,h=a.current,m=a.next,t=e.current,l=e.next,g=a.cond(t,".dirty");ea.forEach(function(b){b=K(b);if(!(b in c.state)){var e,n;if(b in m){e=m[b];n=h[b];var k=B(G[b].length,function(a){return g.def(e,"[",a,"]")});g(a.cond(k.map(function(a,b){return a+"!=="+n+"["+b+"]"}).join("||")).then(d,".",Ba[b],"(",k,");",k.map(function(a,b){return n+"["+b+"]="+a}).join(";"),";"))}else e=g.def(l,".",b),k=a.cond(e,"!==",t,".",b),g(k),b in V?k(a.cond(e).then(d,".enable(",
V[b],");")["else"](d,".disable(",V[b],");"),t,".",b,"=",e,";"):k(d,".",Ba[b],"(",e,");",t,".",b,"=",e,";")}});0===n(c.state).length&&g(t,".dirty=false;");b(g)}function sa(a,b,e,d){var h=a.shared,m=a.current,t=h.current,l=h.gl;c(n(e)).forEach(function(c){var h=e[c];if(!d||d(h)){var n=h.append(a,b);if(V[c]){var k=V[c];g(h)?n?b(l,".enable(",k,");"):b(l,".disable(",k,");"):b(a.cond(n).then(l,".enable(",k,");")["else"](l,".disable(",k,");"));b(t,".",c,"=",n,";")}else if(P(n)){var f=m[c];b(l,".",Ba[c],
"(",n,");",n.map(function(a,b){return f+"["+b+"]="+a}).join(";"),";")}else b(l,".",Ba[c],"(",n,");",t,".",c,"=",n,";")}})}function Wb(a,b){W&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function oc(a,b,c,e,d){function h(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function m(a){w=b.def();a(w,"=",h(),";");"string"===typeof d?a(k,".count+=",d,";"):a(k,".count++;");Oa&&(e?(B=b.def(),a(B,"=",V,".getNumPendingQueries();")):a(V,".beginQuery(",k,");"))}
function t(a){a(k,".cpuTime+=",h(),"-",w,";");Oa&&(e?a(V,".pushScopeStats(",B,",",V,".getNumPendingQueries(),",k,");"):a(V,".endQuery();"))}function l(a){var c=b.def(f,".profile");b(f,".profile=",a,";");b.exit(f,".profile=",c,";")}var n=a.shared,k=a.stats,f=n.current,V=n.timer;c=c.profile;var w,B;if(c){if(g(c)){c.enable?(m(b),t(b.exit),l("true")):l("false");return}c=c.append(a,b);l(c)}else c=b.def(f,".profile");n=a.block();m(n);b("if(",c,"){",n,"}");a=a.block();t(a);b.exit("if(",c,"){",a,"}")}function xc(a,
b,c,d,h){function m(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function t(c,e,d){function h(){b("if(!",k,".buffer){",g,".enableVertexAttribArray(",n,");}");var c=d.type,m;m=d.size?b.def(d.size,"||",e):e;b("if(",k,".type!==",c,"||",k,".size!==",m,"||",w.map(function(a){return k+"."+a+"!=="+d[a]}).join("||"),"){",g,".bindBuffer(",34962,",",f,".buffer);",g,".vertexAttribPointer(",[n,m,c,
d.normalized,d.stride,d.offset],");",k,".type=",c,";",k,".size=",m,";",w.map(function(a){return k+"."+a+"="+d[a]+";"}).join(""),"}");W&&(c=d.divisor,b("if(",k,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[n,c],");",k,".divisor=",c,";}"))}function m(){b("if(",k,".buffer){",g,".disableVertexAttribArray(",n,");",k,".buffer=null;","}if(",S.map(function(a,b){return k+"."+a+"!=="+V[b]}).join("||"),"){",g,".vertexAttrib4f(",n,",",V,");",S.map(function(a,b){return k+"."+a+"="+V[b]+";"}).join(""),
"}")}var g=l.gl,n=b.def(c,".location"),k=b.def(l.attributes,"[",n,"]");c=d.state;var f=d.buffer,V=[d.x,d.y,d.z,d.w],w=["buffer","normalized","offset","stride"];1===c?h():2===c?m():(b("if(",c,"===",1,"){"),h(),b("}else{"),m(),b("}"))}var l=a.shared;d.forEach(function(d){var l=d.name,g=c.attributes[l],k;if(g){if(!h(g))return;k=g.append(a,b)}else{if(!h(Q))return;var f=a.scopeAttrib(l);e.optional(function(){a.assert(b,f+".state","missing attribute "+l)});k={};n(new ia).forEach(function(a){k[a]=b.def(f,
".",a)})}t(a.link(d),m(d.info.type),k)})}function sd(a,b,c,d,h,m){for(var t=a.shared,l=t.gl,n,k=0;k<d.length;++k){var f=d[k],V=f.name,q=f.info.type,L=c.uniforms[V],f=a.link(f)+".location",v;if(L){if(!h(L))continue;if(g(L)){var x=L.value;e.command(null!==x&&"undefined"!==typeof x,'missing uniform "'+V+'"',a.commandStr);if(35678===q||35680===q)e.command("function"===typeof x&&(35678===q&&("texture2d"===x._reglType||"framebuffer"===x._reglType)||35680===q&&("textureCube"===x._reglType||"framebufferCube"===
x._reglType)),"invalid texture for uniform "+V,a.commandStr),L=a.link(x._texture||x.color[0]._texture),b(l,".uniform1i(",f,",",L+".bind());"),b.exit(L,".unbind();");else if(35674===q||35675===q||35676===q){e.optional(function(){e.command(P(x),"invalid matrix for uniform "+V,a.commandStr);e.command(35674===q&&4===x.length||35675===q&&9===x.length||35676===q&&16===x.length,"invalid length for matrix uniform "+V,a.commandStr)});var L=a.global.def("new Float32Array(["+Array.prototype.slice.call(x)+"])"),
A=2;35675===q?A=3:35676===q&&(A=4);b(l,".uniformMatrix",A,"fv(",f,",false,",L,");")}else{switch(q){case 5126:e.commandType(x,"number","uniform "+V,a.commandStr);n="1f";break;case 35664:e.command(P(x)&&2===x.length,"uniform "+V,a.commandStr);n="2f";break;case 35665:e.command(P(x)&&3===x.length,"uniform "+V,a.commandStr);n="3f";break;case 35666:e.command(P(x)&&4===x.length,"uniform "+V,a.commandStr);n="4f";break;case 35670:e.commandType(x,"boolean","uniform "+V,a.commandStr);n="1i";break;case 5124:e.commandType(x,
"number","uniform "+V,a.commandStr);n="1i";break;case 35671:e.command(P(x)&&2===x.length,"uniform "+V,a.commandStr);n="2i";break;case 35667:e.command(P(x)&&2===x.length,"uniform "+V,a.commandStr);n="2i";break;case 35672:e.command(P(x)&&3===x.length,"uniform "+V,a.commandStr);n="3i";break;case 35668:e.command(P(x)&&3===x.length,"uniform "+V,a.commandStr);n="3i";break;case 35673:e.command(P(x)&&4===x.length,"uniform "+V,a.commandStr);n="4i";break;case 35669:e.command(P(x)&&4===x.length,"uniform "+V,
a.commandStr),n="4i"}b(l,".uniform",n,"(",f,",",P(x)?Array.prototype.slice.call(x):x,");")}continue}else v=L.append(a,b)}else{if(!h(Q))continue;v=b.def(t.uniforms,"[",w.id(V),"]")}35678===q?(e(!Array.isArray(v),"must specify a scalar prop for textures"),b("if(",v,"&&",v,'._reglType==="framebuffer"){',v,"=",v,".color[0];","}")):35680===q&&(e(!Array.isArray(v),"must specify a scalar prop for cube maps"),b("if(",v,"&&",v,'._reglType==="framebufferCube"){',v,"=",v,".color[0];","}"));e.optional(function(){function c(e,
d){a.assert(b,e,'bad data or missing for uniform "'+V+'".  '+d)}function d(a){e(!Array.isArray(v),"must not specify an array type for uniform");c("typeof "+v+'==="'+a+'"',"invalid type, expected "+a)}function h(b,d){Array.isArray(v)?e(v.length===b,"must have length "+b):c(t.isArrayLike+"("+v+")&&"+v+".length==="+b,"invalid vector, should have length "+b,a.commandStr)}function m(b){e(!Array.isArray(v),"must not specify a value type");c("typeof "+v+'==="function"&&'+v+'._reglType==="texture'+(3553===
b?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(q){case 5124:d("number");break;case 35667:h(2,"number");break;case 35668:h(3,"number");break;case 35669:h(4,"number");break;case 5126:d("number");break;case 35664:h(2,"number");break;case 35665:h(3,"number");break;case 35666:h(4,"number");break;case 35670:d("boolean");break;case 35671:h(2,"boolean");break;case 35672:h(3,"boolean");break;case 35673:h(4,"boolean");break;case 35674:h(4,"number");break;case 35675:h(9,"number");break;case 35676:h(16,
"number");break;case 35678:m(3553);break;case 35680:m(34067)}});L=1;switch(q){case 35678:case 35680:L=b.def(v,"._texture");b(l,".uniform1i(",f,",",L,".bind());");b.exit(L,".unbind();");continue;case 5124:case 35670:n="1i";break;case 35667:case 35671:n="2i";L=2;break;case 35668:case 35672:n="3i";L=3;break;case 35669:case 35673:n="4i";L=4;break;case 5126:n="1f";break;case 35664:n="2f";L=2;break;case 35665:n="3f";L=3;break;case 35666:n="4f";L=4;break;case 35674:n="Matrix2fv";break;case 35675:n="Matrix3fv";
break;case 35676:n="Matrix4fv"}if("M"===n.charAt(0)){b(l,".uniform",n,"(",f,",");var f=Math.pow(q-35674+2,2),y=a.global.def("new Float32Array(",f,")");Array.isArray(v)?b("false,(",B(f,function(a){return y+"["+a+"]="+v[a]}),",",y,")"):b("false,(Array.isArray(",v,")||",v," instanceof Float32Array)?",v,":(",B(f,function(a){return y+"["+a+"]="+v+"["+a+"]"}),",",y,")");b(");")}else{if(1<L){for(var A=[],z=[],Ha=0;Ha<L;++Ha)Array.isArray(v)?z.push(v[Ha]):z.push(b.def(v+"["+Ha+"]")),m&&A.push(b.def());m&&
b("if(!",a.batchId,"||",A.map(function(a,b){return a+"!=="+z[b]}).join("||"),"){",A.map(function(a,b){return a+"="+z[b]+";"}).join(""));b(l,".uniform",n,"(",f,",",z.join(","),");")}else e(!Array.isArray(v),"uniform value must not be an array"),m&&(L=b.def(),b("if(!",a.batchId,"||",L,"!==",v,"){",L,"=",v,";")),b(l,".uniform",n,"(",f,",",v,");");m&&b("}")}}}function Fc(a,b,c,d){function h(e){var m=f[e];return m?m.contextDep&&d.contextDynamic||m.propDep?m.append(a,c):m.append(a,b):b.def(k,".",e)}function m(){function a(){c(v,
".drawElementsInstancedANGLE(",[w,B,x,L+"<<(("+x+"-5121)>>1)",q],");")}function b(){c(v,".drawArraysInstancedANGLE(",[w,L,B,q],");")}V&&"null"!==V?P?a():(c("if(",V,"){"),a(),c("}else{"),b(),c("}")):b()}function n(){function a(){c(t+".drawElements("+[w,B,x,L+"<<(("+x+"-5121)>>1)"]+");")}function b(){c(t+".drawArrays("+[w,L,B]+");")}V&&"null"!==V?P?a():(c("if(",V,"){"),a(),c("}else{"),b(),c("}")):b()}var l=a.shared,t=l.gl,k=l.draw,f=d.draw,V=function(){var e=f.elements,h=b;if(e){if(e.contextDep&&d.contextDynamic||
e.propDep)h=c;e=e.append(a,h);f.elementsActive&&h("if("+e+")"+t+".bindBuffer(34963,"+e+".buffer.buffer);")}else e=h.def(),h(e,"=",k,".","elements",";","if(",e,"){",t,".bindBuffer(",34963,",",e,".buffer.buffer);}","else if(",l.vao,".currentVAO){",e,"=",a.shared.elements+".getElements("+l.vao,".currentVAO.elements);",qa?"":"if("+e+")"+t+".bindBuffer(34963,"+e+".buffer.buffer);","}");return e}(),w=h("primitive"),L=h("offset"),B=function(){var h=f.count,m,l=b;if(h){if(h.contextDep&&d.contextDynamic||
h.propDep)l=c;m=h.append(a,l);e.optional(function(){h.MISSING&&a.assert(b,"false","missing vertex count");h.DYNAMIC&&a.assert(l,m+">=0","missing vertex count")})}else m=l.def(k,".","count"),e.optional(function(){a.assert(l,m+">=0","missing vertex count")});return m}();if("number"===typeof B){if(0===B)return}else c("if(",B,"){"),c.exit("}");var q,v;W&&(q=h("instances"),v=a.instancing);var x=V+".type",P=f.elements&&g(f.elements)&&!f.vaoActive;W&&("number"!==typeof q||0<=q)?"string"===typeof q?(c("if(",
q,">0){"),m(),c("}else if(",q,"<0){"),n(),c("}")):m():n()}function aa(a,b,c,d,h){var m=pa();h=m.proc("body",h);e.optional(function(){m.commandStr=b.commandStr;m.command=m.link(b.commandStr)});W&&(m.instancing=h.def(m.shared.extensions,".angle_instanced_arrays"));a(m,h,c,d);return m.compile().body}function M(a,b,c,e){Wb(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,".setVAO(null);"),xc(a,b,c,e.attributes,
function(){return!0}));sd(a,b,c,e.uniforms,function(){return!0},!1);Fc(a,b,b,c)}function ka(a,b){var c=a.proc("draw",1);Wb(a,c);X(a,c,b.context);kb(a,c,b.framebuffer);fa(a,c,b);sa(a,c,b.state);oc(a,c,b,!1,!0);var e=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",e,".program);");if(b.shader.program)M(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var d=a.global.def("{}"),h=c.def(e,".id"),m=c.def(d,"[",h,"]");c(a.cond(m).then(m,".call(this,a0);")["else"](m,"=",d,"[",h,"]=",
a.link(function(c){return aa(M,a,b,c,1)}),"(",e,");",m,".call(this,a0);"))}0<n(b.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Da(a,b,c,e){function d(){return!0}a.batchId="a1";Wb(a,b);xc(a,b,c,e.attributes,d);sd(a,b,c,e.uniforms,d,!1);Fc(a,b,b,c)}function vb(a,b,c,e){function d(a){return a.contextDep&&m||a.propDep}function h(a){return!d(a)}Wb(a,b);var m=c.contextDep,l=b.def(),t=b.def();a.shared.props=t;a.batchId=l;var n=a.scope(),g=a.scope();
b(n.entry,"for(",l,"=0;",l,"<","a1",";++",l,"){",t,"=","a0","[",l,"];",g,"}",n.exit);c.needsContext&&X(a,g,c.context);c.needsFramebuffer&&kb(a,g,c.framebuffer);sa(a,g,c.state,d);c.profile&&d(c.profile)&&oc(a,g,c,!1,!0);e?(c.useVAO?c.drawVAO?d(c.drawVAO)?g(a.shared.vao,".setVAO(",c.drawVAO.append(a,g),");"):n(a.shared.vao,".setVAO(",c.drawVAO.append(a,n),");"):n(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(n(a.shared.vao,".setVAO(null);"),xc(a,n,c,e.attributes,h),xc(a,g,c,e.attributes,d)),
sd(a,n,c,e.uniforms,h,!1),sd(a,g,c,e.uniforms,d,!0),Fc(a,n,g,c)):(b=a.global.def("{}"),e=c.shader.progVar.append(a,g),t=g.def(e,".id"),n=g.def(b,"[",t,"]"),g(a.shared.gl,".useProgram(",e,".program);","if(!",n,"){",n,"=",b,"[",t,"]=",a.link(function(b){return aa(Da,a,c,b,2)}),"(",e,");}",n,".call(this,a0[",l,"],",l,");"))}function ab(a,b){function c(a){return a.contextDep&&d||a.propDep}var e=a.proc("batch",2);a.batchId="0";Wb(a,e);var d=!1,h=!0;n(b.context).forEach(function(a){d=d||b.context[a].propDep});
d||(X(a,e,b.context),h=!1);var m=b.framebuffer,l=!1;m?(m.propDep?d=l=!0:m.contextDep&&d&&(l=!0),l||kb(a,e,m)):kb(a,e,null);b.state.viewport&&b.state.viewport.propDep&&(d=!0);fa(a,e,b);sa(a,e,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||oc(a,e,b,!1,"a1");b.contextDep=d;b.needsContext=h;b.needsFramebuffer=l;h=b.shader.progVar;if(h.contextDep&&d||h.propDep)vb(a,e,b,null);else if(h=h.append(a,e),e(a.shared.gl,".useProgram(",h,".program);"),b.shader.program)vb(a,e,b,b.shader.program);else{e(a.shared.vao,
".setVAO(null);");var m=a.global.def("{}"),l=e.def(h,".id"),t=e.def(m,"[",l,"]");e(a.cond(t).then(t,".call(this,a0,a1);")["else"](t,"=",m,"[",l,"]=",a.link(function(c){return aa(vb,a,b,c,2)}),"(",h,");",t,".call(this,a0,a1);"))}0<n(b.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function ad(a,b){function e(c){var m=b.shader[c];m&&d.set(h.shader,"."+c,m.append(a,d))}var d=a.proc("scope",3);a.batchId="a2";var h=a.shared,m=h.current;X(a,d,b.context);
b.framebuffer&&b.framebuffer.append(a,d);c(n(b.state)).forEach(function(c){var e=b.state[c].append(a,d);P(e)?e.forEach(function(b,e){d.set(a.next[c],"["+e+"]",b)}):d.set(h.next,"."+c,e)});oc(a,d,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var e=b.draw[c];e&&d.set(h.draw,"."+c,""+e.append(a,d))});n(b.uniforms).forEach(function(c){var e=b.uniforms[c].append(a,d);Array.isArray(e)&&(e="["+e.join()+"]");d.set(h.uniforms,"["+w.id(c)+"]",e)});n(b.attributes).forEach(function(c){var e=
b.attributes[c].append(a,d),h=a.scopeAttrib(c);n(new ia).forEach(function(a){d.set(h,"."+a,e[a])})});b.scopeVAO&&d.set(h.vao,".targetVAO",b.scopeVAO.append(a,d));e("vert");e("frag");0<n(b.state).length&&(d(m,".dirty=true;"),d.exit(m,".dirty=true;"));d("a1(",a.shared.context,",a0,",a.batchId,");")}function F(a){if("object"===typeof a&&!P(a)){for(var b=n(a),c=0;c<b.length;++c)if(z.isDynamic(a[b[c]]))return!0;return!1}}function D(a,c,e){function d(a,b){l.forEach(function(c){var e=h[c];z.isDynamic(e)&&
(e=a.invoke(b,e),b(f,".",c,"=",e,";"))})}var h=c["static"][e];if(h&&F(h)){var m=a.global,l=n(h),t=!1,g=!1,k=!1,f=a.global.def("{}");l.forEach(function(c){var e=h[c];if(z.isDynamic(e))"function"===typeof e&&(e=h[c]=z.unbox(e)),c=b(e,null),t=t||c.thisDep,k=k||c.propDep,g=g||c.contextDep;else{m(f,".",c,"=");switch(typeof e){case "number":m(e);break;case "string":m('"',e,'"');break;case "object":Array.isArray(e)&&m("[",e.join(),"]");break;default:m(a.link(e))}m(";")}});c.dynamic[e]=new z.DynamicVariable(4,
{thisDep:t,contextDep:g,propDep:k,ref:f,append:d});delete c["static"][e]}}var ia=u.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};p.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var W=p.angle_instanced_arrays,ha=p.webgl_draw_buffers,qa=p.oes_vertex_array_object,G={dirty:!0,profile:Y.profile},A={},ea=[],V={},Ba={};N("dither",3024);N("blend.enable",3042);R("blend.color","blendColor",[0,0,0,0]);R("blend.equation","blendEquationSeparate",[32774,32774]);R("blend.func","blendFuncSeparate",
[1,0,1,0]);N("depth.enable",2929,!0);R("depth.func","depthFunc",513);R("depth.range","depthRange",[0,1]);R("depth.mask","depthMask",!0);R("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);R("cull.face","cullFace",1029);R("frontFace","frontFace",2305);R("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);R("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);R("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);R("stencil.mask",
"stencilMask",-1);R("stencil.func","stencilFunc",[519,0,-1]);R("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);R("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);R("scissor.box","scissor",[0,0,l.drawingBufferWidth,l.drawingBufferHeight]);R("viewport","viewport",[0,0,l.drawingBufferWidth,l.drawingBufferHeight]);var Ha={gl:l,context:na,strings:w,next:A,current:G,draw:bc,elements:m,buffer:Z,shader:ub,attributes:u.state,vao:u,uniforms:la,framebuffer:U,
extensions:p,timer:Oa,isBufferArgs:a},t={primTypes:oa,compareFuncs:v,blendFuncs:J,blendEquations:ua,stencilOps:x,glTypes:C,orientationType:da};e.optional(function(){Ha.isArrayLike=P});ha&&(t.backBuffer=[1029],t.drawBuffer=B(H.maxDrawbuffers,function(a){return 0===a?[0]:B(a,function(a){return 36064+a})}));var lc=0;return{next:A,current:G,procs:function(){var a=pa(),b=a.proc("poll"),c=a.proc("refresh"),e=a.block();b(e);c(e);var d=a.shared,h=d.gl,m=d.next,l=d.current;e(l,".dirty=false;");kb(a,b);kb(a,
c,null,!0);var t;W&&(t=a.link(W));p.oes_vertex_array_object&&c(a.link(p.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var g=0;g<H.maxAttributes;++g){var k=c.def(d.attributes,"[",g,"]"),f=a.cond(k,".buffer");f.then(h,".enableVertexAttribArray(",g,");",h,".bindBuffer(",34962,",",k,".buffer.buffer);",h,".vertexAttribPointer(",g,",",k,".size,",k,".type,",k,".normalized,",k,".stride,",k,".offset);")["else"](h,".disableVertexAttribArray(",g,");",h,".vertexAttrib4f(",g,",",k,".x,",k,".y,",k,
".z,",k,".w);",k,".buffer=null;");c(f);W&&c(t,".vertexAttribDivisorANGLE(",g,",",k,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");n(V).forEach(function(d){var t=V[d],n=e.def(m,".",d),g=a.block();g("if(",n,"){",h,".enable(",t,")}else{",h,".disable(",t,")}",l,".",d,"=",n,";");c(g);b("if(",n,"!==",l,".",d,"){",g,"}")});n(Ba).forEach(function(d){var t=Ba[d],n=G[d],g,k,f=a.block();f(h,".",t,"(");P(n)?(t=n.length,g=a.global.def(m,".",d),k=a.global.def(l,
".",d),f(B(t,function(a){return g+"["+a+"]"}),");",B(t,function(a){return k+"["+a+"]="+g+"["+a+"];"}).join("")),b("if(",B(t,function(a){return g+"["+a+"]!=="+k+"["+a+"]"}).join("||"),"){",f,"}")):(g=e.def(m,".",d),k=e.def(l,".",d),f(g,");",l,".",d,"=",g,";"),b("if(",g,"!==",k,"){",f,"}"));c(f)});return a.compile()}(),compile:function(a,b,c,e,d){var m=pa();m.stats=m.link(d);n(b["static"]).forEach(function(a){D(m,b,a)});Nb.forEach(function(b){D(m,a,b)});var l=Ga(a,b,c,e,m);ka(m,l);ad(m,l);ab(m,l);return h(m.compile(),
{destroy:function(){l.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(p,u,I){function a(a,c){this.id=b++;this.type=a;this.data=c}function c(a){if(0===a.length)return[];var b=a.charAt(0),d=a.charAt(a.length-1);if(1<a.length&&b===d&&('"'===b||"'"===
b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return c(a.substr(0,b.index)).concat(c(b[1])).concat(c(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(d=0;d<b.length;++d)a=a.concat(c(b[d]));return a}function f(a){return"["+c(a).join("][")+"]"}function g(b,c){if("function"===typeof b)return new a(0,b);if("number"===typeof b||
"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(a,b){return g(a,c+"["+b+"]")}));if(b instanceof a)return b;d(!1,"invalid option type in uniform "+c)}var d=p("./util/check"),b=0;u.exports={DynamicVariable:a,define:function(b,c){return new a(b,f(c+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:g,accessor:f}},{"./util/check":21}],10:[function(p,u,I){var a=p("./util/check"),c=p("./util/is-typed-array"),f=p("./util/is-ndarray"),
g=p("./util/values"),d=p("./constants/primitives.json"),b=p("./constants/usage.json");u.exports=function(n,e,h,q){function B(a){this.id=z++;P[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function l(b,d,l,g,w,B,k){b.buffer.bind();var q;d?((q=k)||c(d)&&(!f(d)||c(d.data))||(q=e.oes_element_index_uint?5125:5123),h._initBuffer(b.buffer,d,l,q,3)):(n.bufferData(34963,B,l),b.buffer.dtype=q||5121,b.buffer.usage=l,b.buffer.dimension=3,b.buffer.byteLength=B);q=k;if(!k){switch(b.buffer.dtype){case 5121:case 5120:q=
5121;break;case 5123:case 5122:q=5123;break;case 5125:case 5124:q=5125;break;default:a.raise("unsupported type for element array")}b.buffer.dtype=q}b.type=q;a(5125!==q||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");d=w;0>d&&(d=b.buffer.byteLength,5123===q?d>>=1:5125===q&&(d>>=2));b.vertCount=d;d=g;0>g&&(d=4,g=b.buffer.dimension,1===g&&(d=0),2===g&&(d=1),3===g&&(d=4));b.primType=d}function w(b){q.elementsCount--;a(null!==b.buffer,"must not double destroy elements");
delete P[b.id];b.buffer.destroy();b.buffer=null}var P={},z=0,oa={uint8:5121,uint16:5123};e.oes_element_index_uint&&(oa.uint32=5125);B.prototype.bind=function(){this.buffer.bind()};var C=[];return{create:function(e,g){function n(e){if(e)if("number"===typeof e)P(e),v.primType=4,v.vertCount=e|0,v.type=5121;else{var h=null,g=35044,w=-1,q=-1,B=0,z=0;if(Array.isArray(e)||c(e)||f(e))h=e;else if(a.type(e,"object","invalid arguments for elements"),"data"in e&&(h=e.data,a(Array.isArray(h)||c(h)||f(h),"invalid data for element buffer")),
"usage"in e&&(a.parameter(e.usage,b,"invalid element buffer usage"),g=b[e.usage]),"primitive"in e&&(a.parameter(e.primitive,d,"invalid element buffer primitive"),w=d[e.primitive]),"count"in e&&(a("number"===typeof e.count&&0<=e.count,"invalid vertex count for elements"),q=e.count|0),"type"in e&&(a.parameter(e.type,oa,"invalid buffer type"),z=oa[e.type]),"length"in e)B=e.length|0;else if(B=q,5123===z||5122===z)B*=2;else if(5125===z||5124===z)B*=4;l(v,h,g,w,q,B,z)}else P(),v.primType=4,v.vertCount=
0,v.type=5121;return n}var P=h.create(null,34963,!0),v=new B(P._buffer);q.elementsCount++;n(e);n._reglType="elements";n._elements=v;n.subdata=function(a,b){P.subdata(a,b);return n};n.destroy=function(){w(v)};return n},createStream:function(a){var b=C.pop();b||(b=new B(h.create(null,34963,!0,!1)._buffer));l(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){C.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof B?a._elements:null},clear:function(){g(P).forEach(w)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(p,u,I){var a=p("./util/sorted-object-keys"),c=p("./util/check");u.exports=function(f,g){function d(a){c.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=b[a]=f.getExtension(a)}catch(d){}return!!e}for(var b={},n=0;n<g.extensions.length;++n){var e=g.extensions[n];if(!d(e))return g.onDestroy(),g.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}g.optionalExtensions.forEach(d);return{extensions:b,restore:function(){a(b).forEach(function(a){if(b[a]&&!d(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(p,u,I){var a=p("./util/check"),c=p("./util/values"),f=p("./util/extend"),g=[6407,6408],d=[];d[6408]=4;d[6407]=3;var b=[];b[5121]=1;b[5126]=4;b[36193]=2;var n=[32854,32855,36194,35907,34842,34843,34836],e={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};u.exports=function(h,q,B,l,w,P){function z(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var e=a=0;b?(a=b.width,e=b.height):c&&(a=c.width,e=c.height);this.width=a;this.height=e}function oa(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function C(b,c,e){if(b){if(b.texture){b=b.texture._texture;var d=Math.max(1,b.height);a(Math.max(1,b.width)===c&&d===e,"inconsistent width/height for supplied texture")}else b=
b.renderbuffer._renderbuffer,a(b.width===c&&b.height===e,"inconsistent width/height for renderbuffer");b.refCount+=1}}function S(a,b){b&&(b.texture?h.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):h.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function Nb(b){var c=3553,e=null,d=null,h=b;"object"===typeof b&&(h=b.data,"target"in b&&(c=b.target|0));a.type(h,"function","invalid attachment data");b=h._reglType;"texture2d"===b?(e=h,a(3553===c)):
"textureCube"===b?(e=h,a(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===b?(d=h,c=36161):a.raise("invalid regl object for attachment");return new z(c,e,d)}function J(a,b,c,e,d){if(c)return a=l.create2D({width:a,height:b,format:e,type:d}),a._texture.refCount=0,new z(3553,a,null);a=w.create({width:a,height:b,format:e});a._renderbuffer.refCount=0;return new z(36161,null,a)}function p(a){return a&&(a.texture||a.renderbuffer)}function v(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&
a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function x(){this.id=m++;L[this.id]=this;this.framebuffer=h.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function k(a){a.colorAttachments.forEach(oa);oa(a.depthAttachment);oa(a.stencilAttachment);oa(a.depthStencilAttachment)}function da(b){var c=b.framebuffer;a(c,"must not double destroy framebuffer");h.deleteFramebuffer(c);b.framebuffer=null;P.framebufferCount--;
delete L[b.id]}function Q(b){var c;h.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(c=0;c<d.length;++c)S(36064+c,d[c]);for(c=d.length;c<B.maxColorAttachments;++c)h.framebufferTexture2D(36160,36064+c,3553,null,0);h.framebufferTexture2D(36160,33306,3553,null,0);h.framebufferTexture2D(36160,36096,3553,null,0);h.framebufferTexture2D(36160,36128,3553,null,0);S(36096,b.depthAttachment);S(36128,b.stencilAttachment);S(33306,b.depthStencilAttachment);b=h.checkFramebufferStatus(36160);h.isContextLost()||
36053===b||a.raise("framebuffer configuration not supported, status = "+e[b]);h.bindFramebuffer(36160,E.next?E.next.framebuffer:null);E.cur=E.next;h.getError()}function ba(c,e){function h(c,e){var l;a(E.next!==m,"can not update framebuffer which is currently in use");var f=0,w=0,L=!0,v=!0;l=null;var x=!0,P="rgba",z="uint8",oa=1,S=null,y=null,da=null,ba=!1;if("number"===typeof c)f=c|0,w=e|0||f;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(w=c.shape,a(Array.isArray(w)&&
2<=w.length,"invalid shape for framebuffer"),f=w[0],w=w[1]):("radius"in c&&(f=w=c.radius),"width"in c&&(f=c.width),"height"in c&&(w=c.height));if("color"in c||"colors"in c)l=c.color||c.colors,Array.isArray(l)&&a(1===l.length||q.webgl_draw_buffers,"multiple render targets not supported");if(!l){"colorCount"in c&&(oa=c.colorCount|0,a(0<oa,"invalid color buffer count"));"colorTexture"in c&&(x=!!c.colorTexture,P="rgba4");if("colorType"in c){z=c.colorType;if(x)a(q.oes_texture_float||!("float"===z||"float32"===
z),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(q.oes_texture_half_float||!("half float"===z||"float16"===z),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===z||"float16"===z)a(q.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),P="rgba16f";else if("float"===z||"float32"===z)a(q.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
P="rgba32f";a.oneOf(z,Z,"invalid color type")}"colorFormat"in c&&(P=c.colorFormat,0<=u.indexOf(P)?x=!0:0<=H.indexOf(P)?x=!1:a.optional(function(){if(x)a.oneOf(c.colorFormat,u,"invalid color format for texture");else a.oneOf(c.colorFormat,H,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)ba=!(!c.depthTexture&&!c.depthStencilTexture),a(!ba||q.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?L=c.depth:
(S=c.depth,v=!1));"stencil"in c&&("boolean"===typeof c.stencil?v=c.stencil:(y=c.stencil,L=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?L=v=c.depthStencil:(da=c.depthStencil,v=L=!1))}else f=w=1;var U=null,la=null,I=null,Ga=null;if(Array.isArray(l))U=l.map(Nb);else if(l)U=[Nb(l)];else for(U=Array(oa),l=0;l<oa;++l)U[l]=J(f,w,x,P,z);a(q.webgl_draw_buffers||1>=U.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(U.length<=B.maxColorAttachments,
"too many color attachments, not supported");f=f||U[0].width;w=w||U[0].height;S?la=Nb(S):L&&!v&&(la=J(f,w,ba,"depth","uint32"));y?I=Nb(y):v&&!L&&(I=J(f,w,!1,"stencil","uint8"));da?Ga=Nb(da):!S&&!y&&v&&L&&(Ga=J(f,w,ba,"depth stencil","depth stencil"));a(1>=!!S+!!y+!!da,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");L=null;for(l=0;l<U.length;++l)C(U[l],f,w),a(!U[l]||U[l].texture&&0<=g.indexOf(U[l].texture._texture.format)||U[l].renderbuffer&&0<=n.indexOf(U[l].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+l+" is invalid"),U[l]&&U[l].texture&&(v=d[U[l].texture._texture.format]*b[U[l].texture._texture.type],null===L?L=v:a(L===v,"all color attachments much have the same number of bits per pixel."));C(la,f,w);a(!la||la.texture&&6402===la.texture._texture.format||la.renderbuffer&&33189===la.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");C(I,f,w);a(!I||I.renderbuffer&&36168===I.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
C(Ga,f,w);a(!Ga||Ga.texture&&34041===Ga.texture._texture.format||Ga.renderbuffer&&34041===Ga.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");k(m);m.width=f;m.height=w;m.colorAttachments=U;m.depthAttachment=la;m.stencilAttachment=I;m.depthStencilAttachment=Ga;h.color=U.map(p);h.depth=p(la);h.stencil=p(I);h.depthStencil=p(Ga);h.width=m.width;h.height=m.height;Q(m);return h}var m=new x;P.framebufferCount++;h(c,e);return f(h,{resize:function(b,c){a(E.next!==
m,"can not resize a framebuffer which is currently in use");var e=Math.max(b|0,1),d=Math.max(c|0||e,1);if(e===m.width&&d===m.height)return h;for(var l=m.colorAttachments,g=0;g<l.length;++g)v(l[g],e,d);v(m.depthAttachment,e,d);v(m.stencilAttachment,e,d);v(m.depthStencilAttachment,e,d);m.width=h.width=e;m.height=h.height=d;Q(m);return h},_reglType:"framebuffer",_framebuffer:m,destroy:function(){da(m);k(m)},use:function(a){E.setFBO({framebuffer:h},a)}})}var E={cur:null,next:null,dirty:!1,setFBO:null},
u=["rgba"],H=["rgba4","rgb565","rgb5 a1"];q.ext_srgb&&H.push("srgba");q.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");q.webgl_color_buffer_float&&H.push("rgba32f");var Z=["uint8"];q.oes_texture_half_float&&Z.push("half float","float16");q.oes_texture_float&&Z.push("float","float32");var m=0,L={};return f(E,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof x)?a:null},create:ba,createCube:function(b){function c(b){var d;a(0>
e.indexOf(E.next),"can not update framebuffer which is currently in use");var h={color:null},m=0,g=null;d="rgba";var n="uint8",k=1;if("number"===typeof b)m=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(m=b.shape,a(Array.isArray(m)&&2<=m.length,"invalid shape for framebuffer"),a(m[0]===m[1],"cube framebuffer must be square"),m=m[0]):("radius"in b&&(m=b.radius|0),"width"in b?(m=b.width|0,"height"in b&&a(b.height===m,"must be square")):"height"in b&&(m=b.height|0));
if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||q.webgl_draw_buffers,"multiple render targets not supported");g||("colorCount"in b&&(k=b.colorCount|0,a(0<k,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,Z,"invalid color type"),n=b.colorType),"colorFormat"in b&&(d=b.colorFormat,a.oneOf(b.colorFormat,u,"invalid color format for texture")));"depth"in b&&(h.depth=b.depth);"stencil"in b&&(h.stencil=b.stencil);"depthStencil"in b&&(h.depthStencil=
b.depthStencil)}else m=1;if(g)if(Array.isArray(g))for(b=[],d=0;d<g.length;++d)b[d]=g[d];else b=[g];else for(b=Array(k),g={radius:m,format:d,type:n},d=0;d<k;++d)b[d]=l.createCube(g);h.color=Array(b.length);for(d=0;d<b.length;++d)k=b[d],a("function"===typeof k&&"textureCube"===k._reglType,"invalid cube map"),m=m||k.width,a(k.width===m&&k.height===m,"invalid cube map shape"),h.color[d]={target:34069,data:b[d]};for(d=0;6>d;++d){for(k=0;k<b.length;++k)h.color[k].target=34069+d;0<d&&(h.depth=e[0].depth,
h.stencil=e[0].stencil,h.depthStencil=e[0].depthStencil);if(e[d])e[d](h);else e[d]=ba(h)}return f(c,{width:m,height:m,color:b})}var e=Array(6);c(b);return f(c,{faces:e,resize:function(b){var d=b|0;a(0<d&&d<=B.maxCubeMapSize,"invalid radius for cube fbo");if(d===c.width)return c;var h=c.color;for(b=0;b<h.length;++b)h[b].resize(d);for(b=0;6>b;++b)e[b].resize(d);c.width=c.height=d;return c},_reglType:"framebufferCube",destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){c(L).forEach(da)},
restore:function(){E.cur=null;E.next=null;E.dirty=!0;c(L).forEach(function(a){a.framebuffer=h.createFramebuffer();Q(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(p,u,I){var a=p("./util/sorted-object-keys"),c=p("./util/pool");u.exports=function(f,g){var d=1;g.ext_texture_filter_anisotropic&&(d=f.getParameter(34047));var b=1,n=1;g.webgl_draw_buffers&&(b=f.getParameter(34852),n=f.getParameter(36063));var e=!!g.oes_texture_float;if(e){e=f.createTexture();f.bindTexture(3553,
e);f.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var h=f.createFramebuffer();f.bindFramebuffer(36160,h);f.framebufferTexture2D(36160,36064,3553,e,0);f.bindTexture(3553,null);if(36053!==f.checkFramebufferStatus(36160))e=!1;else{f.viewport(0,0,1,1);f.clearColor(1,0,0,1);f.clear(16384);var q=c.allocType(5126,4);f.readPixels(0,0,1,1,6408,5126,q);f.getError()?e=!1:(f.deleteFramebuffer(h),f.deleteTexture(e),e=1===q[0]);c.freeType(q)}}q=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(q=f.createTexture(),h=c.allocType(5121,36),f.activeTexture(33984),f.bindTexture(34067,q),f.texImage2D(34069,0,6408,3,3,0,6408,5121,h),c.freeType(h),f.bindTexture(34067,null),f.deleteTexture(q),q=!f.getError());return{colorBits:[f.getParameter(3410),f.getParameter(3411),f.getParameter(3412),f.getParameter(3413)],depthBits:f.getParameter(3414),stencilBits:f.getParameter(3415),subpixelBits:f.getParameter(3408),extensions:a(g).filter(function(a){return!!g[a]}),
maxAnisotropic:d,maxDrawbuffers:b,maxColorAttachments:n,pointSizeDims:f.getParameter(33901),lineWidthDims:f.getParameter(33902),maxViewportDims:f.getParameter(3386),maxCombinedTextureUnits:f.getParameter(35661),maxCubeMapSize:f.getParameter(34076),maxRenderbufferSize:f.getParameter(34024),maxTextureUnits:f.getParameter(34930),maxTextureSize:f.getParameter(3379),maxAttributes:f.getParameter(34921),maxVertexUniforms:f.getParameter(36347),maxVertexTextureUnits:f.getParameter(35660),maxVaryingVectors:f.getParameter(36348),
maxFragmentUniforms:f.getParameter(36349),glsl:f.getParameter(35724),renderer:f.getParameter(7937),vendor:f.getParameter(7936),version:f.getParameter(7938),readFloat:e,npotTextureCube:q}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(p,u,I){var a=p("./util/check"),c=p("./util/is-typed-array");u.exports=function(f,g,d,b,n,e,h){function q(l){var w;null===g.next?(a(n.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
w=5121):(a(null!==g.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),w=g.next.colorAttachments[0].texture._texture.type,a.optional(function(){e.oes_texture_float?(a(5121===w||5126===w,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===w&&a(h.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===w,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var q=0,B=0,oa=b.framebufferWidth,C=b.framebufferHeight,S=null;c(l)?S=l:l&&(a.type(l,"object","invalid arguments to regl.read()"),q=l.x|0,B=l.y|0,a(0<=q&&q<b.framebufferWidth,"invalid x offset for regl.read"),a(0<=B&&B<b.framebufferHeight,"invalid y offset for regl.read"),oa=(l.width||b.framebufferWidth-q)|0,C=(l.height||b.framebufferHeight-B)|0,S=l.data||null);S&&(5121===w?a(S instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===w&&a(S instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<oa&&oa+q<=b.framebufferWidth,"invalid width for read pixels");a(0<C&&C+B<=b.framebufferHeight,"invalid height for read pixels");d();l=oa*C*4;S||(5121===w?S=new Uint8Array(l):5126===w&&(S=S||new Float32Array(l)));a.isTypedArray(S,"data buffer for regl.read() must be a typedarray");a(S.byteLength>=l,"data buffer for regl.read() too small");f.pixelStorei(3333,4);f.readPixels(q,B,oa,C,6408,w,S);return S}
function B(a){var b;g.setFBO({framebuffer:a.framebuffer},function(){b=q(a)});return b}return function(a){return a&&"framebuffer"in a?B(a):q(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(p,u,I){var a=p("./util/sorted-object-keys"),c=p("./util/check"),f=p("./util/values"),g=[];g[32854]=2;g[32855]=2;g[36194]=2;g[33189]=2;g[36168]=1;g[34041]=4;g[35907]=4;g[34836]=16;g[34842]=8;g[34843]=6;u.exports=function(d,b,n,e,h){function q(a){this.id=P++;this.refCount=1;this.renderbuffer=a;this.format=
32854;this.height=this.width=0;h.profile&&(this.stats={size:0})}function B(a){var b=a.renderbuffer;c(b,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(b);a.renderbuffer=null;a.refCount=0;delete z[a.id];e.renderbufferCount--}var l={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(l.srgba=35907);b.ext_color_buffer_half_float&&(l.rgba16f=34842,l.rgb16f=34843);b.webgl_color_buffer_float&&(l.rgba32f=34836);
var w=[];a(l).forEach(function(a){w[l[a]]=a});var P=0,z={};q.prototype.decRef=function(){0>=--this.refCount&&B(this)};h.profile&&(e.getTotalRenderbufferSize=function(){var b=0;a(z).forEach(function(a){b+=z[a].stats.size});return b});return{create:function(a,b){function f(a,b){var e=0,q=0,k=32854;"object"===typeof a&&a?("shape"in a?(q=a.shape,c(Array.isArray(q)&&2<=q.length,"invalid renderbuffer shape"),e=q[0]|0,q=q[1]|0):("radius"in a&&(e=q=a.radius|0),"width"in a&&(e=a.width|0),"height"in a&&(q=
a.height|0)),"format"in a&&(c.parameter(a.format,l,"invalid renderbuffer format"),k=l[a.format])):"number"===typeof a?(e=a|0,q="number"===typeof b?b|0:e):a?c.raise("invalid arguments to renderbuffer constructor"):e=q=1;c(0<e&&0<q&&e<=n.maxRenderbufferSize&&q<=n.maxRenderbufferSize,"invalid renderbuffer size");if(e!==B.width||q!==B.height||k!==B.format)return f.width=B.width=e,f.height=B.height=q,B.format=k,d.bindRenderbuffer(36161,B.renderbuffer),d.renderbufferStorage(36161,k,e,q),c(0===d.getError(),
"invalid render buffer format"),h.profile&&(B.stats.size=g[B.format]*B.width*B.height),f.format=w[B.format],f}var B=new q(d.createRenderbuffer());z[B.id]=B;e.renderbufferCount++;f(a,b);f.resize=function(a,b){var e=a|0,l=b|0||e;if(e===B.width&&l===B.height)return f;c(0<e&&0<l&&e<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size");f.width=B.width=e;f.height=B.height=l;d.bindRenderbuffer(36161,B.renderbuffer);d.renderbufferStorage(36161,B.format,e,l);c(0===d.getError(),"invalid render buffer format");
h.profile&&(B.stats.size=g[B.format]*B.width*B.height);return f};f._reglType="renderbuffer";f._renderbuffer=B;h.profile&&(f.stats=B.stats);f.destroy=function(){B.decRef()};return f},clear:function(){f(z).forEach(B)},restore:function(){f(z).forEach(function(a){a.renderbuffer=d.createRenderbuffer();d.bindRenderbuffer(36161,a.renderbuffer);d.renderbufferStorage(36161,a.format,a.width,a.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],
16:[function(p,u,I){var a=p("./util/sorted-object-keys"),c=p("./util/check"),f=p("./util/extend"),g=p("./util/values");u.exports=function(d,b,n,e){function h(a,b,c,e){this.name=a;this.id=b;this.location=c;this.info=e}function q(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id){a[c].location=b.location;return}a.push(b)}function B(a,e,h){var l=35632===a?P:z,g=l[e];if(!g){var n=b.str(e),g=d.createShader(a);d.shaderSource(g,n);d.compileShader(g);c.shaderError(d,g,n,a,h);l[e]=g}return g}function l(a,
b){this.id=S++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;e.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function w(a,l,g){var n;n=B(35632,a.fragId);var f=B(35633,a.vertId),k=a.program=d.createProgram();d.attachShader(k,n);d.attachShader(k,f);if(g)for(n=0;n<g.length;++n)f=g[n],d.bindAttribLocation(k,f[0],f[1]);d.linkProgram(k);c.linkError(d,k,b.str(a.fragId),b.str(a.vertId),l);g=d.getProgramParameter(k,35718);e.profile&&(a.stats.uniformsCount=
g);f=a.uniforms;for(n=0;n<g;++n)if(l=d.getActiveUniform(k,n))if(1<l.size)for(var w=0;w<l.size;++w){var P=l.name.replace("[0]","["+w+"]");q(f,new h(P,b.id(P),d.getUniformLocation(k,P),l))}else q(f,new h(l.name,b.id(l.name),d.getUniformLocation(k,l.name),l));g=d.getProgramParameter(k,35721);e.profile&&(a.stats.attributesCount=g);a=a.attributes;for(n=0;n<g;++n)(l=d.getActiveAttrib(k,n))&&q(a,new h(l.name,b.id(l.name),d.getAttribLocation(k,l.name),l))}var P={},z={},oa={},C=[],S=0;e.profile&&(n.getMaxUniformsCount=
function(){var a=0;C.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},n.getMaxAttributesCount=function(){var a=0;C.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var a=d.deleteShader.bind(d);g(P).forEach(a);P={};g(z).forEach(a);z={};C.forEach(function(a){d.deleteProgram(a.program)});C.length=0;oa={};n.shaderCount=0},program:function(b,e,h,g){c.command(0<=b,"missing vertex shader",h);c.command(0<=e,"missing fragment shader",
h);var B=oa[e];B||(B=oa[e]={});var k=B[b];if(k&&(k.refCount++,!g))return k;var q=new l(e,b);n.shaderCount++;w(q,h,g);k||(B[b]=q);C.push(q);return f(q,{destroy:function(){q.refCount--;if(0>=q.refCount){d.deleteProgram(q.program);var b=C.indexOf(q);C.splice(b,1);n.shaderCount--}0>=B[q.vertId].refCount&&(d.deleteShader(z[q.vertId]),delete z[q.vertId],delete oa[q.fragId][q.vertId]);a(oa[q.fragId]).length||(d.deleteShader(P[q.fragId]),delete P[q.fragId],delete oa[q.fragId])}})},restore:function(){P={};
z={};for(var a=0;a<C.length;++a)w(C[a],null,C[a].attributes.map(function(a){return[a.location,a.name]}))},shader:B,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(p,u,I){u.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(p,u,I){u.exports=function(){var a={"":0},c=[""];return{id:function(f){var g=
a[f];if(g)return g;g=a[f]=c.length;c.push(f);return g},str:function(a){return c[a]}}}},{}],19:[function(p,u,I){function a(a){return"[object "+a+"]"}function c(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function f(a){return Array.isArray(a)&&0!==a.length&&oa(a[0])?!0:!1}function g(a){return Object.prototype.toString.call(a)}function d(a){if(!a)return!1;var b=g(a);return 0<=ma.indexOf(b)?!0:c(a)||f(a)||w(a)}function b(a,b){36193===a.type?(a.data=z(b),P.freeType(b)):a.data=b}
function n(a,b,c,e,d,h){a="undefined"!==typeof Z[a]?Z[a]:v[a]*H[b];h&&(a*=6);if(d){for(e=0;1<=c;)e+=a*c*c,c/=2;return e}return a*c*e}var e=p("./util/sorted-object-keys"),h=p("./util/check"),q=p("./util/extend"),B=p("./util/values"),l=p("./util/is-typed-array"),w=p("./util/is-ndarray"),P=p("./util/pool"),z=p("./util/to-half-float"),oa=p("./util/is-array-like"),C=p("./util/flatten"),S=p("./util/is-pow2");I=p("./constants/arraytypes.json");var Nb=p("./constants/arraytypes.json"),J=[9984,9986,9985,9987],
Ka=[0,6409,6410,6407,6408],v={};v[6409]=v[6406]=v[6402]=1;v[34041]=v[6410]=2;v[6407]=v[35904]=3;v[6408]=v[35906]=4;var x=a("HTMLCanvasElement"),k=a("OffscreenCanvas"),da=a("CanvasRenderingContext2D"),Q=a("ImageBitmap"),ba=a("HTMLImageElement"),E=a("HTMLVideoElement"),ma=e(I).concat([x,k,da,Q,ba,E]),H=[];H[5121]=1;H[5126]=4;H[36193]=2;H[5123]=2;H[5125]=4;var Z=[];Z[32854]=2;Z[32855]=2;Z[36194]=2;Z[34041]=4;Z[33776]=.5;Z[33777]=.5;Z[33778]=1;Z[33779]=1;Z[35986]=.5;Z[35987]=1;Z[34798]=1;Z[35840]=.5;
Z[35841]=.25;Z[35842]=.5;Z[35843]=.25;Z[36196]=.5;u.exports=function(a,L,H,p,Z,u,ma){function na(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Oa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;
a.width=b.width;a.height=b.height;a.channels=b.channels}function Y(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(h.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(h.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(h.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(h.parameter(b.colorSpace,Fc,"invalid colorSpace"),a.colorSpace=
Fc[b.colorSpace]);if("type"in b){var c=b.type;h(L.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");h(L.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");h(L.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
h.parameter(c,aa,"invalid texture type");a.type=aa[c]}var e=a.width,d=a.height,m=a.channels,c=!1;"shape"in b?(h(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),e=b.shape[0],d=b.shape[1],3===b.shape.length&&(m=b.shape[2],h(0<m&&4>=m,"invalid number of channels"),c=!0),h(0<=e&&e<=H.maxTextureSize,"invalid width"),h(0<=d&&d<=H.maxTextureSize,"invalid height")):("radius"in b&&(e=d=b.radius,h(0<=e&&e<=H.maxTextureSize,"invalid radius")),"width"in b&&(e=b.width,h(0<=e&&e<=H.maxTextureSize,
"invalid width")),"height"in b&&(d=b.height,h(0<=d&&d<=H.maxTextureSize,"invalid height")),"channels"in b&&(m=b.channels,h(0<m&&4>=m,"invalid number of channels"),c=!0));a.width=e|0;a.height=d|0;a.channels=m|0;e=!1;"format"in b&&(e=b.format,h(L.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),h.parameter(e,M,"invalid texture format"),d=a.internalformat=M[e],a.format=ua[d],e in aa&&!("type"in b)&&(a.type=
aa[e]),e in ka&&(a.compressed=!0),e=!0);!c&&e?a.channels=v[a.format]:c&&!e?a.channels!==Ka[a.format]&&(a.format=a.internalformat=Ka[a.channels]):e&&c&&h(a.channels===v[a.format],"number of channels inconsistent with specified format")}}function K(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function N(){na.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function R(a,e){var m=null;d(e)?m=e:e&&(h.type(e,"object","invalid pixel data type"),Y(a,e),"x"in e&&(a.xOffset=e.x|0),"y"in e&&(a.yOffset=e.y|0),d(e.data)&&(m=e.data));h(!a.compressed||m instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(e.copy){h(!m,"can not specify copy and data field for the same texture");var n=Z.viewportWidth,q=Z.viewportHeight;a.width=a.width||n-a.xOffset;a.height=a.height||q-a.yOffset;a.needsCopy=!0;h(0<=a.xOffset&&a.xOffset<n&&0<=a.yOffset&&
a.yOffset<q&&0<a.width&&a.width<=n&&0<a.height&&a.height<=q,"copy texture read out of bounds")}else if(!m)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(l(m))a.channels=a.channels||4,a.data=m,"type"in e||5121!==a.type||(a.type=Nb[Object.prototype.toString.call(m)]|0);else if(c(m)){a.channels=a.channels||4;n=m;q=n.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:q=P.allocType(a.type,q);q.set(n);a.data=q;break;case 36193:a.data=z(n);break;default:h.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(w(m)){n=m.data;Array.isArray(n)||5121!==a.type||(a.type=Nb[Object.prototype.toString.call(n)]|0);var q=m.shape,B=m.stride,L,v,A,y;3===q.length?(A=q[2],y=B[2]):(h(2===q.length,"invalid ndarray pixel data, must be 2 or 3D"),y=A=1);L=q[0];v=q[1];q=B[0];B=B[1];a.alignment=1;a.width=L;a.height=v;a.channels=A;a.format=a.internalformat=Ka[A];a.needsFree=!0;L=y;m=m.offset;A=a.width;y=a.height;v=a.channels;for(var D=P.allocType(36193===a.type?5126:a.type,A*y*v),M=0,G=0;G<y;++G)for(var ea=
0;ea<A;++ea)for(var F=0;F<v;++F)D[M++]=n[q*ea+B*G+L*F+m];b(a,D)}else if(g(m)===x||g(m)===k||g(m)===da)g(m)===x||g(m)===k?a.element=m:a.element=m.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(g(m)===Q)a.element=m,a.width=m.width,a.height=m.height,a.channels=4;else if(g(m)===ba)a.element=m,a.width=m.naturalWidth,a.height=m.naturalHeight,a.channels=4;else if(g(m)===E)a.element=m,a.width=m.videoWidth,a.height=m.videoHeight,a.channels=4;else if(f(m)){n=a.width||m[0].length;
q=a.height||m.length;B=a.channels;B=oa(m[0][0])?B||m[0][0].length:B||1;L=C.shape(m);A=1;for(y=0;y<L.length;++y)A*=L[y];A=P.allocType(36193===a.type?5126:a.type,A);C.flatten(m,L,"",A);b(a,A);a.alignment=1;a.width=n;a.height=q;a.channels=B;a.format=a.internalformat=Ka[B];a.needsFree=!0}5126===a.type?h(0<=H.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&h(0<=H.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function pa(b,c,e,d,h){var l=b.element,g=b.data,n=b.internalformat,f=b.format,k=b.type,q=b.width,B=b.height;K(b);l?a.texSubImage2D(c,h,e,d,f,k,l):b.compressed?a.compressedTexSubImage2D(c,h,e,d,n,q,B,g):b.needsCopy?(p(),a.copyTexSubImage2D(c,h,e,d,b.xOffset,b.yOffset,q,B)):a.texSubImage2D(c,h,e,d,q,B,f,k,g)}function O(){return W.pop()||new N}function I(a){a.needsFree&&P.freeType(a.data);N.call(a);W.push(a)}function $a(){na.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function T(a,b,c){var e=a.images[0]=O();a.mipmask=1;e.width=a.width=b;e.height=a.height=c;e.channels=a.channels=4}function y(a,b){var c=null;if(d(b))c=a.images[0]=O(),Oa(c,a),R(c,b),a.mipmask=1;else if(Y(a,b),Array.isArray(b.mipmap))for(var e=b.mipmap,m=0;m<e.length;++m)c=a.images[m]=O(),Oa(c,a),c.width>>=m,c.height>>=m,R(c,e[m]),a.mipmask|=1<<m;else c=a.images[0]=O(),Oa(c,a),R(c,b),a.mipmask=1;Oa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||h(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ja(b,c){for(var e=b.images,d=0;d<e.length&&e[d];++d){var h=e[d],l=c,g=d,n=h.element,f=h.data,k=h.internalformat,q=h.format,B=h.type,w=h.width,L=h.height;K(h);n?a.texImage2D(l,g,q,q,B,n):h.compressed?a.compressedTexImage2D(l,g,k,w,L,0,f):h.needsCopy?(p(),a.copyTexImage2D(l,g,q,h.xOffset,h.yOffset,w,L,0)):a.texImage2D(l,
g,q,w,L,0,q,B,f||null)}}function ca(){var a=ha.pop()||new $a;na.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Aa(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&I(b[c]),b[c]=null;ha.push(a)}function La(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function cc(a,b){if("min"in b){var c=b.min;h.parameter(c,sd);a.minFilter=sd[c];0<=J.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&
(c=b.mag,h.parameter(c,xc),a.magFilter=xc[c]);var c=a.wrapS,e=a.wrapT;if("wrap"in b){var d=b.wrap;"string"===typeof d?(h.parameter(d,oc),c=e=oc[d]):Array.isArray(d)&&(h.parameter(d[0],oc),h.parameter(d[1],oc),c=oc[d[0]],e=oc[d[1]])}else"wrapS"in b&&(c=b.wrapS,h.parameter(c,oc),c=oc[c]),"wrapT"in b&&(e=b.wrapT,h.parameter(e,oc),e=oc[e]);a.wrapS=c;a.wrapT=e;"anisotropic"in b&&(c=b.anisotropic,h("number"===typeof c&&1<=c&&c<=H.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);
if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":h.parameter(b.mipmap,Wb,"invalid mipmap hint");a.mipmapHint=Wb[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":h(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;c=!0;break;default:h.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ga(b,c){a.texParameteri(c,10241,b.minFilter);a.texParameteri(c,10240,b.magFilter);a.texParameteri(c,10242,b.wrapS);a.texParameteri(c,
10243,b.wrapT);L.ext_texture_filter_anisotropic&&a.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(c))}function X(b){na.call(this);this.mipmask=0;this.internalformat=6408;this.id=qa++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new La;ma.profile&&(this.stats={size:0})}function kb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function fa(){var b=ea[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function sa(b){var c=b.texture;h(c,"must not double destroy texture");var e=b.unit,d=b.target;0<=e&&(a.activeTexture(33984+e),a.bindTexture(d,null),ea[e]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete G[b.id];u.textureCount--}var Wb={"don't care":4352,"dont care":4352,nice:4354,fast:4353},oc={repeat:10497,clamp:33071,mirror:33648},xc={nearest:9728,linear:9729},sd=q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},xc),Fc={none:0,browser:37444},aa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},M={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ka={};L.ext_srgb&&(M.srgb=35904,M.srgba=35906);L.oes_texture_float&&(aa.float32=aa["float"]=5126);L.oes_texture_half_float&&(aa.float16=aa["half float"]=36193);L.webgl_depth_texture&&(q(M,{depth:6402,"depth stencil":34041}),q(aa,{uint16:5123,uint32:5125,
"depth stencil":34042}));L.webgl_compressed_texture_s3tc&&q(ka,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});L.webgl_compressed_texture_atc&&q(ka,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});L.webgl_compressed_texture_pvrtc&&q(ka,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});L.webgl_compressed_texture_etc1&&(ka["rgb etc1"]=36196);var Da=Array.prototype.slice.call(a.getParameter(34467));
e(ka).forEach(function(a){var b=ka[a];0<=Da.indexOf(b)&&(M[a]=b)});var vb=e(M);H.textureFormats=vb;var ab=[];e(M).forEach(function(a){ab[M[a]]=a});var ad=[];e(aa).forEach(function(a){ad[aa[a]]=a});var F=[];e(xc).forEach(function(a){F[xc[a]]=a});var D=[];e(sd).forEach(function(a){D[sd[a]]=a});var ia=[];e(oc).forEach(function(a){ia[oc[a]]=a});var ua=vb.reduce(function(a,b){var c=M[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||L.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=
b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),W=[],ha=[],qa=0,G={},A=H.maxTextureUnits,ea=Array(A).map(function(){return null});q(X.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<A;++c){var e=ea[c];if(e){if(0<e.bindCount)continue;e.unit=-1}ea[c]=this;b=c;break}b>=A&&h.raise("insufficient number of texture units");ma.profile&&u.maxTextureUnits<b+1&&(u.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&sa(this)}});ma.profile&&(u.getTotalTextureSize=function(){var a=0;e(G).forEach(function(b){a+=G[b].stats.size});return a});return{create2D:function(b,c){function e(a,b){var c=d.texInfo;La.call(c);var m=ca();"number"===typeof a?"number"===typeof b?T(m,a|0,b|0):T(m,a|0,a|0):a?(h.type(a,"object","invalid arguments to regl.texture"),cc(c,a),y(m,a)):T(m,1,1);c.genMipmaps&&(m.mipmask=(m.width<<1)-1);d.mipmask=m.mipmask;Oa(d,m);h.texture2D(c,
m,H);d.internalformat=m.internalformat;e.width=m.width;e.height=m.height;kb(d);ja(m,3553);Ga(c,3553);fa();Aa(m);ma.profile&&(d.stats.size=n(d.internalformat,d.type,m.width,m.height,c.genMipmaps,!1));e.format=ab[d.internalformat];e.type=ad[d.type];e.mag=F[c.magFilter];e.min=D[c.minFilter];e.wrapS=ia[c.wrapS];e.wrapT=ia[c.wrapT];return e}var d=new X(3553);G[d.id]=d;u.textureCount++;e(b,c);e.subimage=function(a,b,c,m){h(!!a,"must specify image data");b|=0;c|=0;m|=0;var l=O();Oa(l,d);l.width=0;l.height=
0;R(l,a);l.width=l.width||(d.width>>m)-b;l.height=l.height||(d.height>>m)-c;h(d.type===l.type&&d.format===l.format&&d.internalformat===l.internalformat,"incompatible format for texture.subimage");h(0<=b&&0<=c&&b+l.width<=d.width&&c+l.height<=d.height,"texture.subimage write out of bounds");h(d.mipmask&1<<m,"missing mipmap data");h(l.data||l.element||l.needsCopy,"missing image data");kb(d);pa(l,3553,b,c,m);fa();I(l);return e};e.resize=function(b,c){var h=b|0,l=c|0||h;if(h===d.width&&l===d.height)return e;
e.width=d.width=h;e.height=d.height=l;kb(d);for(var g=0;d.mipmask>>g;++g){var f=h>>g,k=l>>g;if(!f||!k)break;a.texImage2D(3553,g,d.format,f,k,0,d.format,d.type,null)}fa();ma.profile&&(d.stats.size=n(d.internalformat,d.type,h,l,!1,!1));return e};e._reglType="texture2d";e._texture=d;ma.profile&&(e.stats=d.stats);e.destroy=function(){d.decRef()};return e},createCube:function(b,c,e,d,l,g){function f(a,b,c,e,d,m){var l,g=k.texInfo;La.call(g);for(l=0;6>l;++l)q[l]=ca();if("number"!==typeof a&&a)if("object"===
typeof a)if(b)y(q[0],a),y(q[1],b),y(q[2],c),y(q[3],e),y(q[4],d),y(q[5],m);else if(cc(g,a),Y(k,a),"faces"in a)for(a=a.faces,h(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),l=0;6>l;++l)h("object"===typeof a[l]&&!!a[l],"invalid input for cube map face"),Oa(q[l],k),y(q[l],a[l]);else for(l=0;6>l;++l)y(q[l],a);else h.raise("invalid arguments to cube map");else for(a=a|0||1,l=0;6>l;++l)T(q[l],a,a);Oa(k,q[0]);h.optional(function(){H.npotTextureCube||h(S(k.width)&&S(k.height),"your browser does not support non power or two texture dimensions")});
k.mipmask=g.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;h.textureCube(k,g,q,H);k.internalformat=q[0].internalformat;f.width=q[0].width;f.height=q[0].height;kb(k);for(l=0;6>l;++l)ja(q[l],34069+l);Ga(g,34067);fa();ma.profile&&(k.stats.size=n(k.internalformat,k.type,f.width,f.height,g.genMipmaps,!0));f.format=ab[k.internalformat];f.type=ad[k.type];f.mag=F[g.magFilter];f.min=D[g.minFilter];f.wrapS=ia[g.wrapS];f.wrapT=ia[g.wrapT];for(l=0;6>l;++l)Aa(q[l]);return f}var k=new X(34067);G[k.id]=k;u.cubeCount++;
var q=Array(6);f(b,c,e,d,l,g);f.subimage=function(a,b,c,e,d){h(!!b,"must specify image data");h("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;e|=0;d|=0;var m=O();Oa(m,k);m.width=0;m.height=0;R(m,b);m.width=m.width||(k.width>>d)-c;m.height=m.height||(k.height>>d)-e;h(k.type===m.type&&k.format===m.format&&k.internalformat===m.internalformat,"incompatible format for texture.subimage");h(0<=c&&0<=e&&c+m.width<=k.width&&e+m.height<=k.height,"texture.subimage write out of bounds");h(k.mipmask&
1<<d,"missing mipmap data");h(m.data||m.element||m.needsCopy,"missing image data");kb(k);pa(m,34069+a,c,e,d);fa();I(m);return f};f.resize=function(b){b|=0;if(b!==k.width){f.width=k.width=b;f.height=k.height=b;kb(k);for(var c=0;6>c;++c)for(var e=0;k.mipmask>>e;++e)a.texImage2D(34069+c,e,k.format,b>>e,b>>e,0,k.format,k.type,null);fa();ma.profile&&(k.stats.size=n(k.internalformat,k.type,f.width,f.height,!1,!0));return f}};f._reglType="textureCube";f._texture=k;ma.profile&&(f.stats=k.stats);f.destroy=
function(){k.decRef()};return f},clear:function(){for(var b=0;b<A;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ea[b]=null;B(G).forEach(sa);u.cubeCount=0;u.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<A;++b){var c=ea[b];c&&(c.bindCount=0,c.unit=-1,ea[b]=null)}B(G).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>
c,b.height>>c,0,b.internalformat,b.type,null);else for(var e=0;6>e;++e)a.texImage2D(34069+e,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);Ga(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<A;++b){var c=ea[b];c&&(c.bindCount=0,c.unit=-1,ea[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(p,u,I){u.exports=function(a,c){function f(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function g(a,b,c){var d=n.pop()||new f;d.startQueryIndex=a;d.endQueryIndex=b;d.sum=0;d.stats=c;e.push(d)}if(!c.ext_disjoint_timer_query)return null;var d=[],b=[],n=[],e=[],h=[],q=[];return{beginQuery:function(a){var e=d.pop()||c.ext_disjoint_timer_query.createQueryEXT();
c.ext_disjoint_timer_query.beginQueryEXT(35007,e);b.push(e);g(b.length-1,b.length,a)},endQuery:function(){c.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:g,update:function(){var a,l;a=b.length;if(0!==a){q.length=Math.max(q.length,a+1);h.length=Math.max(h.length,a+1);h[0]=0;var g=q[0]=0;for(l=a=0;l<b.length;++l){var f=b[l];c.ext_disjoint_timer_query.getQueryObjectEXT(f,34919)?(g+=c.ext_disjoint_timer_query.getQueryObjectEXT(f,34918),d.push(f)):b[a++]=f;h[l+1]=g;q[l+1]=a}b.length=a;for(l=
a=0;l<e.length;++l){var g=e[l],z=g.startQueryIndex,f=g.endQueryIndex;g.sum+=h[f]-h[z];z=q[z];f=q[f];f===z?(g.stats.gpuTime+=g.sum/1E6,n.push(g)):(g.startQueryIndex=z,g.endQueryIndex=f,e[a++]=g)}e.length=a}},getNumPendingQueries:function(){return b.length},clear:function(){d.push.apply(d,b);for(var a=0;a<d.length;a++)c.ext_disjoint_timer_query.deleteQueryEXT(d[a]);b.length=0;d.length=0},restore:function(){b.length=0;d.length=0}}}},{}],21:[function(p,u,I){function a(a){return"undefined"!==typeof atob?
atob(a):"base64:"+a}function c(a){a=Error("(regl) "+a);console.error(a);throw a;}function f(a,b){a||c(b)}function g(a){return a?": "+a:""}function d(a,b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function b(a,b,e){0>b.indexOf(a)&&c("invalid value"+
g(e)+". must be one of: "+b)}function n(a,b){for(a+="";a.length<b;)a=" "+a;return a}function e(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function h(a,b){this.number=a;this.line=b;this.errors=[]}function q(a,b,c){this.file=a;this.line=b;this.message=c}function B(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function l(){var a=Error(),a=(a.stack||a).toString(),
b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function w(b,c){var d=b.split("\n"),l=1,g=0,f={unknown:new e,0:new e};f.unknown.name=f[0].name=c||B();f.unknown.lines.push(new h(0,""));for(var n=0;n<d.length;++n){var q=d[n],m=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(q);if(m)switch(m[1]){case "line":if(m=/(\d+)(\s+\d+)?/.exec(m[2]))l=m[1]|0,m[2]&&(g=m[2]|0,g in f||(f[g]=new e));break;case "define":if(m=/SHADER_NAME(_B64)?\s+(.*)$/.exec(m[2]))f[g].name=
m[1]?a(m[2]):m[2]}f[g].lines.push(new h(l++,q))}J(f).forEach(function(a){var b=f[a];b.lines.forEach(function(a){b.index[a.number]=a})});return f}function P(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);c?b.push(new q(c[1]|0,c[2]|0,c[3].trim())):0<a.length&&b.push(new q("unknown",0,a))}});return b}function z(a,b){b.forEach(function(b){var c=a[b.file];if(c){var e=c.index[b.line];if(e){e.errors.push(b);c.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(b)})}function oa(a){a._commandRef=B()}function C(a,b){var e=l();c(a+" in command "+(b||B())+("unknown"===e?"":" called from "+e))}function S(a,b,c,e){d(a,b)||C("invalid parameter type"+g(c)+". expected "+b+", got "+typeof a,e||B())}function Nb(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:x[a]*b}var J=p("./sorted-object-keys"),Ka=p("./is-typed-array");p=p("./extend");var v="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
x={};x[5120]=x[5121]=1;x[5122]=x[5123]=x[36193]=x[33635]=x[32819]=x[32820]=2;x[5124]=x[5125]=x[5126]=x[34042]=4;u.exports=p(f,{optional:function(a){a()},raise:c,commandRaise:C,command:function(a,b,c){a||C(b,c||B())},parameter:function(a,b,e){a in b||c("unknown parameter ("+a+")"+g(e)+". possible values: "+J(b).join())},commandParameter:function(a,b,c,e){a in b||C("unknown parameter ("+a+")"+g(c)+". possible values: "+J(b).join(),e||B())},constructor:function(a){J(a).forEach(function(a){0>v.indexOf(a)&&
c('invalid regl constructor argument "'+a+'". must be one of '+v)})},type:function(a,b,e){d(a,b)||c("invalid parameter type"+g(e)+". expected "+b+", got "+typeof a)},commandType:S,isTypedArray:function(a,b){Ka(a)||c("invalid parameter type"+g(b)+". must be a typed array")},nni:function(a,b){0<=a&&(a|0)===a||c("invalid parameter type, ("+a+")"+g(b)+". must be a nonnegative integer")},oneOf:b,shaderError:function(a,b,c,e,d){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=e===
a.FRAGMENT_SHADER?"fragment":"vertex";S(c,"string",a+" shader source must be a string",d);var h=w(c,d);c=P(b);z(h,c);J(h).forEach(function(a){function b(a,c){e.push(a);d.push(c||"")}var c=h[a];if(c.hasErrors){var e=[""],d=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(n(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(e){e=e.message;var d=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);if(d){var h=d[1];e=d[2];switch(h){case "assign":h="="}c=Math.max(a.line.indexOf(h,c),0)}else c=0;b(n("| ",6));b(n("^^^",c+3)+"\n","font-weight:bold");b(n("| ",6));b(e+"\n","font-weight:bold")});b(n("| ",6)+"\n")}else b(n(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(e.join("")):(d[0]=e.join("%c"),console.log.apply(console,d))}});f.raise("Error compiling "+
a+" shader, "+h[0].name)}},linkError:function(a,b,c,e,d){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),c=w(c,d),e='Error linking program with vertex shader, "'+w(e,d)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(e+"\n"+a),f.raise(e))},callSite:l,saveCommandRef:oa,saveDrawInfo:function(a,b,c,e){function d(a){return a?e.id(a):0}function h(a,
b){J(b).forEach(function(b){a[e.id(b)]=!0})}oa(a);a._fragId=d(a["static"].frag);a._vertId=d(a["static"].vert);var l=a._uniformSet={};h(l,b["static"]);h(l,b.dynamic);b=a._attributeSet={};h(b,c["static"]);h(b,c.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,c,e){a.texture?b(a.texture._texture.internalformat,c,"unsupported texture format for attachment"):b(a.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},
guessCommand:B,texture2D:function(a,b,c){var e=b.width,d=b.height,h=b.channels;f(0<e&&e<=c.maxTextureSize&&0<d&&d<=c.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||f(!(e&e-1)&&!!e&&!(d&d-1)&&!!d,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==e&&1!==d&&f(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(f(!(e&e-1)&&!!e&&!(d&d-1)&&!!d,"texture must be a square power of 2 to support mipmapping"),
f(b.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&f(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),f(!a.genMipmaps,"mipmap generation not supported with float textures"));var l=b.images;for(c=0;16>c;++c)if(l[c]){var g=e>>c,m=d>>c;f(b.mipmask&1<<c,"missing mipmap data");var n=l[c];f(n.width===g&&n.height===m,"invalid shape for mip images");f(n.format===b.format&&n.internalformat===
b.internalformat&&n.type===b.type,"incompatible type for mip image");!n.compressed&&n.data&&(g=Math.ceil(Nb(n.type,h)*g/n.unpackAlignment)*n.unpackAlignment,f(n.data.byteLength===g*m,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||f(0===(b.mipmask&1<<c),"extra mipmap data");b.compressed&&f(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,c,e){var d=a.width,h=a.height,l=a.channels;f(0<d&&d<=e.maxTextureSize&&
0<h&&h<=e.maxTextureSize,"invalid texture shape");f(d===h,"cube map must be square");f(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(e=0;e<c.length;++e){var g=c[e];f(g.width===d&&g.height===h,"inconsistent cube map face shape");b.genMipmaps&&(f(!g.compressed,"can not generate mipmap for compressed textures"),f(1===g.mipmask,"can not specify mipmaps and generate mipmaps"));for(var m=g.images,n=0;16>n;++n){var q=m[n];if(q){var B=d>>n,w=h>>n;f(g.mipmask&1<<n,"missing mipmap data");
f(q.width===B&&q.height===w,"invalid shape for mip images");f(q.format===a.format&&q.internalformat===a.internalformat&&q.type===a.type,"incompatible type for mip image");q.compressed||q.data&&f(q.data.byteLength===B*w*Math.max(Nb(q.type,l),q.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(p,u,I){u.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(p,u,I){function a(a){return Array.prototype.slice.call(a)}var c=p("./extend"),f=p("./compiled-fns");u.exports=function(){function g(){var b=[],e=[];return c(function(){b.push.apply(b,a(arguments))},{def:function(){var c="v"+n;n++;e.push(c);0<arguments.length&&(b.push(c,"="),b.push.apply(b,a(arguments)),b.push(";"));return c},toString:function(){return a([0<e.length?"var "+e.join(",")+";":"",a(b).join("")]).join("")}})}function d(){function b(a,c){d(a,
c,"=",e.def(a,c),";")}var e=g(),d=g(),h=e.toString,n=d.toString;return c(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:d,save:b,set:function(a,c,d){b(a,c);e(a,c,"=",d,";")},toString:function(){return h()+n()}})}var b=0,n=0,e={},h={};return{global:g(),link:function(a){var c="$"+b,d=!1;"object"===typeof a&&a.name&&(c=a.name.replace(/ /g,"_"),d=!0);if(c in e)return c;e[c]=a;d||b++;return c},block:g,proc:function(b,e){function l(){var a="a"+g.length;g.push(a);return a}var g=[];e=e||0;for(var n=
0;n<e;++n)l();var n=d(),f=n.toString;return h[b]=c(n,{arg:l,toString:function(){return a(["function(",g.join(),"){",f(),"}"]).join("")}})},scope:d,cond:function(){var b=a(arguments).join(""),e=d(),h=d(),g=e.toString,n=h.toString;return c(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){h.apply(h,a(arguments));return this},toString:function(){var c=n();c&&(c="else{"+c+"}");return a(["if(",b,"){",g(),"}",c]).join("")}})},compile:function(){var a=[],b=[];Object.keys(e).sort(function(a,
b){var c="$"===a.charAt(0),e="$"===b.charAt(0);return c||e?c&&e?+a.slice(1)<+b.slice(1)?-1:1:c&&!e?-1:1:a.localeCompare(b)}).forEach(function(c){var d=e[c];a.push(c);b.push(d)});for(var c=0,d=a.length-1;-1<d;d--)if("$"===a[d].charAt(0)){c=d;break}c=a.slice(c).join();d=f[c];if(!d)throw Error("missing precompiled function with key: "+c);return d.apply(null,b)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(p,u,I){u.exports={$0:function(a){var c,f,g,d,b,n,e,h,q,B,l,w,P,z,oa,C,S,p,J,u,v,x,k,da,
Q,ba,E,ma,H,Z;c=a.attributes;f=a.current;g=a.framebuffer;d=a.gl;b=a.next;n=a.vao;e=b.blend_color;h=f.blend_color;q=b.blend_equation;B=f.blend_equation;l=b.blend_func;w=f.blend_func;P=b.colorMask;z=f.colorMask;oa=b.depth_range;C=f.depth_range;S=b.polygonOffset_offset;p=f.polygonOffset_offset;J=b.sample_coverage;u=f.sample_coverage;v=b.scissor_box;x=f.scissor_box;k=b.stencil_func;da=f.stencil_func;Q=b.stencil_opBack;ba=f.stencil_opBack;E=b.stencil_opFront;ma=f.stencil_opFront;H=b.viewport;Z=f.viewport;
return{poll:function(){var a,c,n,la,I,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa;f.dirty=!1;c=b.blend_enable;n=b.cull_enable;la=b.depth_enable;I=b.dither;ub=b.polygonOffset_enable;bc=b.sample_alpha;na=b.sample_enable;Oa=b.scissor_enable;Y=b.stencil_enable;K=b.cull_face;N=f.cull_face;R=b.depth_func;pa=f.depth_func;O=b.depth_mask;Yb=f.depth_mask;$a=b.frontFace;T=f.frontFace;y=b.lineWidth;ja=f.lineWidth;ca=b.stencil_mask;Aa=f.stencil_mask;a=g.next;a!==g.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):
d.bindFramebuffer(36160,null),g.cur=a);c!==f.blend_enable&&(c?d.enable(3042):d.disable(3042),f.blend_enable=c);n!==f.cull_enable&&(n?d.enable(2884):d.disable(2884),f.cull_enable=n);la!==f.depth_enable&&(la?d.enable(2929):d.disable(2929),f.depth_enable=la);I!==f.dither&&(I?d.enable(3024):d.disable(3024),f.dither=I);ub!==f.polygonOffset_enable&&(ub?d.enable(32823):d.disable(32823),f.polygonOffset_enable=ub);bc!==f.sample_alpha&&(bc?d.enable(32926):d.disable(32926),f.sample_alpha=bc);na!==f.sample_enable&&
(na?d.enable(32928):d.disable(32928),f.sample_enable=na);Oa!==f.scissor_enable&&(Oa?d.enable(3089):d.disable(3089),f.scissor_enable=Oa);Y!==f.stencil_enable&&(Y?d.enable(2960):d.disable(2960),f.stencil_enable=Y);if(e[0]!==h[0]||e[1]!==h[1]||e[2]!==h[2]||e[3]!==h[3])d.blendColor(e[0],e[1],e[2],e[3]),h[0]=e[0],h[1]=e[1],h[2]=e[2],h[3]=e[3];if(q[0]!==B[0]||q[1]!==B[1])d.blendEquationSeparate(q[0],q[1]),B[0]=q[0],B[1]=q[1];if(l[0]!==w[0]||l[1]!==w[1]||l[2]!==w[2]||l[3]!==w[3])d.blendFuncSeparate(l[0],
l[1],l[2],l[3]),w[0]=l[0],w[1]=l[1],w[2]=l[2],w[3]=l[3];if(P[0]!==z[0]||P[1]!==z[1]||P[2]!==z[2]||P[3]!==z[3])d.colorMask(P[0],P[1],P[2],P[3]),z[0]=P[0],z[1]=P[1],z[2]=P[2],z[3]=P[3];K!==N&&(d.cullFace(K),f.cull_face=K);R!==pa&&(d.depthFunc(R),f.depth_func=R);O!==Yb&&(d.depthMask(O),f.depth_mask=O);if(oa[0]!==C[0]||oa[1]!==C[1])d.depthRange(oa[0],oa[1]),C[0]=oa[0],C[1]=oa[1];$a!==T&&(d.frontFace($a),f.frontFace=$a);y!==ja&&(d.lineWidth(y),f.lineWidth=y);if(S[0]!==p[0]||S[1]!==p[1])d.polygonOffset(S[0],
S[1]),p[0]=S[0],p[1]=S[1];if(J[0]!==u[0]||J[1]!==u[1])d.sampleCoverage(J[0],J[1]),u[0]=J[0],u[1]=J[1];if(v[0]!==x[0]||v[1]!==x[1]||v[2]!==x[2]||v[3]!==x[3])d.scissor(v[0],v[1],v[2],v[3]),x[0]=v[0],x[1]=v[1],x[2]=v[2],x[3]=v[3];if(k[0]!==da[0]||k[1]!==da[1]||k[2]!==da[2])d.stencilFunc(k[0],k[1],k[2]),da[0]=k[0],da[1]=k[1],da[2]=k[2];ca!==Aa&&(d.stencilMask(ca),f.stencil_mask=ca);if(Q[0]!==ba[0]||Q[1]!==ba[1]||Q[2]!==ba[2]||Q[3]!==ba[3])d.stencilOpSeparate(Q[0],Q[1],Q[2],Q[3]),ba[0]=Q[0],ba[1]=Q[1],
ba[2]=Q[2],ba[3]=Q[3];if(E[0]!==ma[0]||E[1]!==ma[1]||E[2]!==ma[2]||E[3]!==ma[3])d.stencilOpSeparate(E[0],E[1],E[2],E[3]),ma[0]=E[0],ma[1]=E[1],ma[2]=E[2],ma[3]=E[3];if(H[0]!==Z[0]||H[1]!==Z[1]||H[2]!==Z[2]||H[3]!==Z[3])d.viewport(H[0],H[1],H[2],H[3]),Z[0]=H[0],Z[1]=H[1],Z[2]=H[2],Z[3]=H[3]},refresh:function(){var a,L,U,la,I,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb;f.dirty=!1;L=b.blend_enable;U=b.cull_enable;la=b.depth_enable;I=b.dither;ub=b.polygonOffset_enable;bc=b.sample_alpha;na=b.sample_enable;Oa=b.scissor_enable;
Y=b.stencil_enable;K=b.cull_face;N=b.depth_func;R=b.depth_mask;pa=b.frontFace;O=b.lineWidth;Yb=b.stencil_mask;(a=g.next)?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null);g.cur=a;a=c[0];a.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=c[1];a.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,a.buffer.buffer),
d.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=c[2];a.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=c[3];a.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(3,a.size,
a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=c[4];a.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=c[5];a.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):
(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=c[6];a.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=c[7];a.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(7),
d.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=c[8];a.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=c[9];a.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=c[10];a.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=c[11];a.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=
c[12];a.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=c[13];a.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=c[14];a.buffer?(d.enableVertexAttribArray(14),
d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=c[15];a.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);n.currentVAO=null;n.setVAO(n.targetVAO);L?d.enable(3042):d.disable(3042);
f.blend_enable=L;U?d.enable(2884):d.disable(2884);f.cull_enable=U;la?d.enable(2929):d.disable(2929);f.depth_enable=la;I?d.enable(3024):d.disable(3024);f.dither=I;ub?d.enable(32823):d.disable(32823);f.polygonOffset_enable=ub;bc?d.enable(32926):d.disable(32926);f.sample_alpha=bc;na?d.enable(32928):d.disable(32928);f.sample_enable=na;Oa?d.enable(3089):d.disable(3089);f.scissor_enable=Oa;Y?d.enable(2960):d.disable(2960);f.stencil_enable=Y;d.blendColor(e[0],e[1],e[2],e[3]);h[0]=e[0];h[1]=e[1];h[2]=e[2];
h[3]=e[3];d.blendEquationSeparate(q[0],q[1]);B[0]=q[0];B[1]=q[1];d.blendFuncSeparate(l[0],l[1],l[2],l[3]);w[0]=l[0];w[1]=l[1];w[2]=l[2];w[3]=l[3];d.colorMask(P[0],P[1],P[2],P[3]);z[0]=P[0];z[1]=P[1];z[2]=P[2];z[3]=P[3];d.cullFace(K);f.cull_face=K;d.depthFunc(N);f.depth_func=N;d.depthMask(R);f.depth_mask=R;d.depthRange(oa[0],oa[1]);C[0]=oa[0];C[1]=oa[1];d.frontFace(pa);f.frontFace=pa;d.lineWidth(O);f.lineWidth=O;d.polygonOffset(S[0],S[1]);p[0]=S[0];p[1]=S[1];d.sampleCoverage(J[0],J[1]);u[0]=J[0];u[1]=
J[1];d.scissor(v[0],v[1],v[2],v[3]);x[0]=v[0];x[1]=v[1];x[2]=v[2];x[3]=v[3];d.stencilFunc(k[0],k[1],k[2]);da[0]=k[0];da[1]=k[1];da[2]=k[2];d.stencilMask(Yb);f.stencil_mask=Yb;d.stencilOpSeparate(Q[0],Q[1],Q[2],Q[3]);ba[0]=Q[0];ba[1]=Q[1];ba[2]=Q[2];ba[3]=Q[3];d.stencilOpSeparate(E[0],E[1],E[2],E[3]);ma[0]=E[0];ma[1]=E[1];ma[2]=E[2];ma[3]=E[3];d.viewport(H[0],H[1],H[2],H[3]);Z[0]=H[0];Z[1]=H[1];Z[2]=H[2];Z[3]=H[3]}}},$3:function(a,c,f,g){var d,b,n,e,h,q,B,l,w,P,z,oa,C,S,p,J,u,v,x,k,da,Q,ba,E,ma,H,
Z,m,L,U,la,I,ub;d=a.context;b=a.current;n=a.framebuffer;e=a.gl;h=a.next;q=a.shader;B=a.vao;l=h.blend_color;w=b.blend_color;P=h.blend_equation;z=b.blend_equation;oa=h.blend_func;C=b.blend_func;S=h.colorMask;p=b.colorMask;J=h.depth_range;u=b.depth_range;v=h.polygonOffset_offset;x=b.polygonOffset_offset;k=h.sample_coverage;da=b.sample_coverage;Q=h.scissor_box;ba=b.scissor_box;E=h.stencil_func;ma=b.stencil_func;H=h.stencil_opBack;Z=b.stencil_opBack;m=h.stencil_opFront;L=b.stencil_opFront;U=h.viewport;
la=b.viewport;I={};ub={};return{batch:function(a,d){var f,Y,K,N,R;f=n.next;f!==n.cur&&(f?e.bindFramebuffer(36160,f.framebuffer):e.bindFramebuffer(36160,null),n.cur=f);if(b.dirty){f=h.dither;f!==b.dither&&(f?e.enable(3024):e.disable(3024),b.dither=f);f=h.blend_enable;f!==b.blend_enable&&(f?e.enable(3042):e.disable(3042),b.blend_enable=f);f=l[0];K=l[1];N=l[2];R=l[3];if(f!==w[0]||K!==w[1]||N!==w[2]||R!==w[3])e.blendColor(f,K,N,R),w[0]=f,w[1]=K,w[2]=N,w[3]=R;f=P[0];K=P[1];if(f!==z[0]||K!==z[1])e.blendEquationSeparate(f,
K),z[0]=f,z[1]=K;f=oa[0];K=oa[1];N=oa[2];R=oa[3];if(f!==C[0]||K!==C[1]||N!==C[2]||R!==C[3])e.blendFuncSeparate(f,K,N,R),C[0]=f,C[1]=K,C[2]=N,C[3]=R;f=h.depth_enable;f!==b.depth_enable&&(f?e.enable(2929):e.disable(2929),b.depth_enable=f);f=h.depth_func;f!==b.depth_func&&(e.depthFunc(f),b.depth_func=f);f=J[0];K=J[1];if(f!==u[0]||K!==u[1])e.depthRange(f,K),u[0]=f,u[1]=K;f=h.depth_mask;f!==b.depth_mask&&(e.depthMask(f),b.depth_mask=f);f=S[0];K=S[1];N=S[2];R=S[3];if(f!==p[0]||K!==p[1]||N!==p[2]||R!==p[3])e.colorMask(f,
K,N,R),p[0]=f,p[1]=K,p[2]=N,p[3]=R;f=h.cull_enable;f!==b.cull_enable&&(f?e.enable(2884):e.disable(2884),b.cull_enable=f);f=h.cull_face;f!==b.cull_face&&(e.cullFace(f),b.cull_face=f);f=h.frontFace;f!==b.frontFace&&(e.frontFace(f),b.frontFace=f);f=h.lineWidth;f!==b.lineWidth&&(e.lineWidth(f),b.lineWidth=f);f=h.polygonOffset_enable;f!==b.polygonOffset_enable&&(f?e.enable(32823):e.disable(32823),b.polygonOffset_enable=f);f=v[0];K=v[1];if(f!==x[0]||K!==x[1])e.polygonOffset(f,K),x[0]=f,x[1]=K;f=h.sample_alpha;
f!==b.sample_alpha&&(f?e.enable(32926):e.disable(32926),b.sample_alpha=f);f=h.sample_enable;f!==b.sample_enable&&(f?e.enable(32928):e.disable(32928),b.sample_enable=f);f=k[0];K=k[1];if(f!==da[0]||K!==da[1])e.sampleCoverage(f,K),da[0]=f,da[1]=K;f=h.stencil_enable;f!==b.stencil_enable&&(f?e.enable(2960):e.disable(2960),b.stencil_enable=f);f=h.stencil_mask;f!==b.stencil_mask&&(e.stencilMask(f),b.stencil_mask=f);f=E[0];K=E[1];N=E[2];if(f!==ma[0]||K!==ma[1]||N!==ma[2])e.stencilFunc(f,K,N),ma[0]=f,ma[1]=
K,ma[2]=N;f=m[0];K=m[1];N=m[2];R=m[3];if(f!==L[0]||K!==L[1]||N!==L[2]||R!==L[3])e.stencilOpSeparate(f,K,N,R),L[0]=f,L[1]=K,L[2]=N,L[3]=R;f=H[0];K=H[1];N=H[2];R=H[3];if(f!==Z[0]||K!==Z[1]||N!==Z[2]||R!==Z[3])e.stencilOpSeparate(f,K,N,R),Z[0]=f,Z[1]=K,Z[2]=N,Z[3]=R;f=h.scissor_enable;f!==b.scissor_enable&&(f?e.enable(3089):e.disable(3089),b.scissor_enable=f);f=Q[0];K=Q[1];N=Q[2];R=Q[3];if(f!==ba[0]||K!==ba[1]||N!==ba[2]||R!==ba[3])e.scissor(f,K,N,R),ba[0]=f,ba[1]=K,ba[2]=N,ba[3]=R;f=U[0];K=U[1];N=U[2];
R=U[3];if(f!==la[0]||K!==la[1]||N!==la[2]||R!==la[3])e.viewport(f,K,N,R),la[0]=f,la[1]=K,la[2]=N,la[3]=R;b.dirty=!1}if(f=b.profile)Y=performance.now(),c.count+=d;K=q.program(q.vert,q.frag);e.useProgram(K.program);B.setVAO(null);N=K.id;(R=ub[N])||(R=ub[N]=g(K));R.call(this,a,d);B.setVAO(null);f&&(c.cpuTime+=performance.now()-Y)},draw:function(a){var d,g,Y,K,N;d=n.next;d!==n.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null),n.cur=d);if(b.dirty){d=h.dither;d!==b.dither&&(d?
e.enable(3024):e.disable(3024),b.dither=d);d=h.blend_enable;d!==b.blend_enable&&(d?e.enable(3042):e.disable(3042),b.blend_enable=d);d=l[0];Y=l[1];K=l[2];N=l[3];if(d!==w[0]||Y!==w[1]||K!==w[2]||N!==w[3])e.blendColor(d,Y,K,N),w[0]=d,w[1]=Y,w[2]=K,w[3]=N;d=P[0];Y=P[1];if(d!==z[0]||Y!==z[1])e.blendEquationSeparate(d,Y),z[0]=d,z[1]=Y;d=oa[0];Y=oa[1];K=oa[2];N=oa[3];if(d!==C[0]||Y!==C[1]||K!==C[2]||N!==C[3])e.blendFuncSeparate(d,Y,K,N),C[0]=d,C[1]=Y,C[2]=K,C[3]=N;d=h.depth_enable;d!==b.depth_enable&&(d?
e.enable(2929):e.disable(2929),b.depth_enable=d);d=h.depth_func;d!==b.depth_func&&(e.depthFunc(d),b.depth_func=d);d=J[0];Y=J[1];if(d!==u[0]||Y!==u[1])e.depthRange(d,Y),u[0]=d,u[1]=Y;d=h.depth_mask;d!==b.depth_mask&&(e.depthMask(d),b.depth_mask=d);d=S[0];Y=S[1];K=S[2];N=S[3];if(d!==p[0]||Y!==p[1]||K!==p[2]||N!==p[3])e.colorMask(d,Y,K,N),p[0]=d,p[1]=Y,p[2]=K,p[3]=N;d=h.cull_enable;d!==b.cull_enable&&(d?e.enable(2884):e.disable(2884),b.cull_enable=d);d=h.cull_face;d!==b.cull_face&&(e.cullFace(d),b.cull_face=
d);d=h.frontFace;d!==b.frontFace&&(e.frontFace(d),b.frontFace=d);d=h.lineWidth;d!==b.lineWidth&&(e.lineWidth(d),b.lineWidth=d);d=h.polygonOffset_enable;d!==b.polygonOffset_enable&&(d?e.enable(32823):e.disable(32823),b.polygonOffset_enable=d);d=v[0];Y=v[1];if(d!==x[0]||Y!==x[1])e.polygonOffset(d,Y),x[0]=d,x[1]=Y;d=h.sample_alpha;d!==b.sample_alpha&&(d?e.enable(32926):e.disable(32926),b.sample_alpha=d);d=h.sample_enable;d!==b.sample_enable&&(d?e.enable(32928):e.disable(32928),b.sample_enable=d);d=k[0];
Y=k[1];if(d!==da[0]||Y!==da[1])e.sampleCoverage(d,Y),da[0]=d,da[1]=Y;d=h.stencil_enable;d!==b.stencil_enable&&(d?e.enable(2960):e.disable(2960),b.stencil_enable=d);d=h.stencil_mask;d!==b.stencil_mask&&(e.stencilMask(d),b.stencil_mask=d);d=E[0];Y=E[1];K=E[2];if(d!==ma[0]||Y!==ma[1]||K!==ma[2])e.stencilFunc(d,Y,K),ma[0]=d,ma[1]=Y,ma[2]=K;d=m[0];Y=m[1];K=m[2];N=m[3];if(d!==L[0]||Y!==L[1]||K!==L[2]||N!==L[3])e.stencilOpSeparate(d,Y,K,N),L[0]=d,L[1]=Y,L[2]=K,L[3]=N;d=H[0];Y=H[1];K=H[2];N=H[3];if(d!==Z[0]||
Y!==Z[1]||K!==Z[2]||N!==Z[3])e.stencilOpSeparate(d,Y,K,N),Z[0]=d,Z[1]=Y,Z[2]=K,Z[3]=N;d=h.scissor_enable;d!==b.scissor_enable&&(d?e.enable(3089):e.disable(3089),b.scissor_enable=d);d=Q[0];Y=Q[1];K=Q[2];N=Q[3];if(d!==ba[0]||Y!==ba[1]||K!==ba[2]||N!==ba[3])e.scissor(d,Y,K,N),ba[0]=d,ba[1]=Y,ba[2]=K,ba[3]=N;d=U[0];Y=U[1];K=U[2];N=U[3];if(d!==la[0]||Y!==la[1]||K!==la[2]||N!==la[3])e.viewport(d,Y,K,N),la[0]=d,la[1]=Y,la[2]=K,la[3]=N;b.dirty=!1}if(d=b.profile)g=performance.now(),c.count++;Y=q.program(q.vert,
q.frag);e.useProgram(Y.program);B.setVAO(null);K=Y.id;(N=I[K])||(N=I[K]=f(Y));N.call(this,a);B.setVAO(null);d&&(c.cpuTime+=performance.now()-g)},scope:function(a,e,h){var f,l;if(f=b.profile)l=performance.now(),c.count++;e(d,a,h);f&&(c.cpuTime+=performance.now()-l)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
c,f,g,d,b,n,e,h,q,B,l,w,P,z,oa,C,p,u,J,I,v,x,k,da,Q,ba,E,ma,H,Z,m,L,U,la,Vb,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa,Wb,oc,xc,sd,Fc,aa,M,ka,Da,vb,ab,ad,F,D,ia,ua,W,ha,qa){var G,A,ea,V,Ba,Ha,t,lc,db,ga,Hb,Ab,We,Ad,ee,te,xe,se,rd,de,we,ud,Fd,Kd,Od,Oe,$e,Xe,xd,Ee,Vd,Wd,le,Ke,yd,kd,Cd,od,cd,Vc,vd,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb;G=a.attributes;A=a.context;ea=a.current;V=a.draw;Ba=a.elements;Ha=a.framebuffer;t=a.gl;lc=a.next;db=
a.shader;ga=a.uniforms;Hb=a.vao;Ab=lc.blend_color;We=ea.blend_color;Ad=lc.blend_equation;ee=ea.blend_equation;te=lc.blend_func;xe=ea.blend_func;se=lc.colorMask;rd=ea.colorMask;de=lc.depth_range;we=ea.depth_range;ud=lc.polygonOffset_offset;Fd=ea.polygonOffset_offset;Kd=lc.sample_coverage;Od=ea.sample_coverage;Oe=lc.scissor_box;$e=ea.scissor_box;Xe=lc.stencil_func;xd=ea.stencil_func;Ee=lc.stencil_opBack;Vd=ea.stencil_opBack;Wd=lc.stencil_opFront;le=ea.stencil_opFront;Ke=lc.viewport;yd=ea.viewport;kd=
{};Cd={};od=new Float32Array(16);cd=new Float32Array(16);Vc=new Float32Array(16);vd=new Float32Array(16);ed=new Float32Array(16);Nc=new Float32Array(16);sc=new Float32Array(16);bb=new Float32Array(16);Kc=new Float32Array(16);Eb=new Float32Array(16);rc=new Float32Array(16);Sa=new Float32Array(16);Lc=new Float32Array(16);dc=new Float32Array(16);pc=new Float32Array(16);Ld=new Float32Array(16);qd=new Float32Array(16);Ac=new Float32Array(16);Zb=new Float32Array(16);Gc=new Float32Array(16);Sc=new Float32Array(16);
Ma=new Float32Array(16);Fb=new Float32Array(16);Wa=new Float32Array(16);ra=new Float32Array(16);td=new Float32Array(16);Ib=new Float32Array(16);Ta=new Float32Array(16);qc=new Float32Array(16);eb=new Float32Array(16);uc=new Float32Array(16);Rb=new Float32Array(16);return{batch:function(a,c){var f,m,k,L;f=Ha.next;f!==Ha.cur&&(f?t.bindFramebuffer(36160,f.framebuffer):t.bindFramebuffer(36160,null),Ha.cur=f);if(ea.dirty){var v,x,E,ga,H,J,Q,U,ba,da,db,Z,bb,ta,Sa,va,Ab,Eb,ya,ma,Ia,dc,la,Ra,Nc;v=se[0];x=
se[1];E=se[2];ga=se[3];if(v!==rd[0]||x!==rd[1]||E!==rd[2]||ga!==rd[3])t.colorMask(v,x,E,ga),rd[0]=v,rd[1]=x,rd[2]=E,rd[3]=ga;H=lc.frontFace;H!==ea.frontFace&&(t.frontFace(H),ea.frontFace=H);J=lc.polygonOffset_enable;J!==ea.polygonOffset_enable&&(J?t.enable(32823):t.disable(32823),ea.polygonOffset_enable=J);Q=ud[0];U=ud[1];if(Q!==Fd[0]||U!==Fd[1])t.polygonOffset(Q,U),Fd[0]=Q,Fd[1]=U;ba=lc.sample_alpha;ba!==ea.sample_alpha&&(ba?t.enable(32926):t.disable(32926),ea.sample_alpha=ba);da=lc.sample_enable;
da!==ea.sample_enable&&(da?t.enable(32928):t.disable(32928),ea.sample_enable=da);db=Kd[0];Z=Kd[1];if(db!==Od[0]||Z!==Od[1])t.sampleCoverage(db,Z),Od[0]=db,Od[1]=Z;bb=lc.stencil_enable;bb!==ea.stencil_enable&&(bb?t.enable(2960):t.disable(2960),ea.stencil_enable=bb);ta=lc.stencil_mask;ta!==ea.stencil_mask&&(t.stencilMask(ta),ea.stencil_mask=ta);Sa=Xe[0];va=Xe[1];Ab=Xe[2];if(Sa!==xd[0]||va!==xd[1]||Ab!==xd[2])t.stencilFunc(Sa,va,Ab),xd[0]=Sa,xd[1]=va,xd[2]=Ab;Eb=Wd[0];ya=Wd[1];ma=Wd[2];Ia=Wd[3];if(Eb!==
le[0]||ya!==le[1]||ma!==le[2]||Ia!==le[3])t.stencilOpSeparate(Eb,ya,ma,Ia),le[0]=Eb,le[1]=ya,le[2]=ma,le[3]=Ia;dc=Ee[0];la=Ee[1];Ra=Ee[2];Nc=Ee[3];if(dc!==Vd[0]||la!==Vd[1]||Ra!==Vd[2]||Nc!==Vd[3])t.stencilOpSeparate(dc,la,Ra,Nc),Vd[0]=dc,Vd[1]=la,Vd[2]=Ra,Vd[3]=Nc}t.blendColor(0,0,0,0);We[0]=0;We[1]=0;We[2]=0;We[3]=0;t.disable(3042);ea.blend_enable=!1;t.blendEquationSeparate(32774,32774);ee[0]=32774;ee[1]=32774;t.blendFuncSeparate(770,771,1,1);xe[0]=770;xe[1]=771;xe[2]=1;xe[3]=1;t.enable(2884);ea.cull_enable=
!0;t.cullFace(1029);ea.cull_face=1029;t.enable(2929);ea.depth_enable=!0;t.depthFunc(513);ea.depth_func=513;t.depthMask(!0);ea.depth_mask=!0;t.depthRange(0,1);we[0]=0;we[1]=1;t.disable(3024);ea.dither=!1;t.lineWidth(2);ea.lineWidth=2;t.enable(3089);ea.scissor_enable=!0;m=ea.profile;ea.profile=!1;t.useProgram(bc.program);var ed,Za,sc,wa,Oe,Ja,Vc,hb,jb,xa,Lc,Ca,rb,sb,Xa,Ya,Kc,pc,I,Va,Lb,cd,Ea,rc,Qa,za,nb,xb,Db,tb,od,yb,vd;Hb.setVAO(null);ed=Wb.location;Za=G[ed];Za.buffer||t.enableVertexAttribArray(ed);
if(Za.type!==g.dtype||4!==Za.size||Za.buffer!==g||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(ed,4,g.dtype,!1,0,0),Za.type=g.dtype,Za.size=4,Za.buffer=g,Za.normalized=!1,Za.offset=0,Za.stride=0;sc=oc.location;wa=G[sc];wa.buffer||t.enableVertexAttribArray(sc);if(wa.type!==d.dtype||4!==wa.size||wa.buffer!==d||!1!==wa.normalized||0!==wa.offset||0!==wa.stride)t.bindBuffer(34962,d.buffer),t.vertexAttribPointer(sc,4,d.dtype,!1,0,0),wa.type=d.dtype,
wa.size=4,wa.buffer=d,wa.normalized=!1,wa.offset=0,wa.stride=0;Oe=xc.location;Ja=G[Oe];Ja.buffer||t.enableVertexAttribArray(Oe);if(Ja.type!==b.dtype||4!==Ja.size||Ja.buffer!==b||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)t.bindBuffer(34962,b.buffer),t.vertexAttribPointer(Oe,4,b.dtype,!1,0,0),Ja.type=b.dtype,Ja.size=4,Ja.buffer=b,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;Vc=sd.location;hb=G[Vc];hb.buffer||t.enableVertexAttribArray(Vc);if(hb.type!==n.dtype||4!==hb.size||hb.buffer!==n||!1!==hb.normalized||
0!==hb.offset||0!==hb.stride)t.bindBuffer(34962,n.buffer),t.vertexAttribPointer(Vc,4,n.dtype,!1,0,0),hb.type=n.dtype,hb.size=4,hb.buffer=n,hb.normalized=!1,hb.offset=0,hb.stride=0;jb=Fc.location;xa=G[jb];xa.buffer||t.enableVertexAttribArray(jb);if(xa.type!==e.dtype||4!==xa.size||xa.buffer!==e||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(jb,4,e.dtype,!1,0,0),xa.type=e.dtype,xa.size=4,xa.buffer=e,xa.normalized=!1,xa.offset=0,xa.stride=0;Lc=aa.location;
Ca=G[Lc];Ca.buffer||t.enableVertexAttribArray(Lc);if(Ca.type!==h.dtype||4!==Ca.size||Ca.buffer!==h||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(Lc,4,h.dtype,!1,0,0),Ca.type=h.dtype,Ca.size=4,Ca.buffer=h,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;rb=M.location;sb=G[rb];sb.buffer||t.enableVertexAttribArray(rb);if(sb.type!==q.dtype||4!==sb.size||sb.buffer!==q||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)t.bindBuffer(34962,q.buffer),t.vertexAttribPointer(rb,
4,q.dtype,!1,0,0),sb.type=q.dtype,sb.size=4,sb.buffer=q,sb.normalized=!1,sb.offset=0,sb.stride=0;Xa=ka.location;Ya=G[Xa];Ya.buffer||t.enableVertexAttribArray(Xa);if(Ya.type!==B.dtype||4!==Ya.size||Ya.buffer!==B||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)t.bindBuffer(34962,B.buffer),t.vertexAttribPointer(Xa,4,B.dtype,!1,0,0),Ya.type=B.dtype,Ya.size=4,Ya.buffer=B,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Kc=Da.location;pc=G[Kc];pc.buffer||t.enableVertexAttribArray(Kc);if(pc.type!==l.dtype||4!==
pc.size||pc.buffer!==l||!1!==pc.normalized||0!==pc.offset||0!==pc.stride)t.bindBuffer(34962,l.buffer),t.vertexAttribPointer(Kc,4,l.dtype,!1,0,0),pc.type=l.dtype,pc.size=4,pc.buffer=l,pc.normalized=!1,pc.offset=0,pc.stride=0;I=vb.location;Va=G[I];Va.buffer||t.enableVertexAttribArray(I);if(Va.type!==w.dtype||4!==Va.size||Va.buffer!==w||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)t.bindBuffer(34962,w.buffer),t.vertexAttribPointer(I,4,w.dtype,!1,0,0),Va.type=w.dtype,Va.size=4,Va.buffer=w,Va.normalized=
!1,Va.offset=0,Va.stride=0;Lb=ab.location;cd=G[Lb];cd.buffer||t.enableVertexAttribArray(Lb);if(cd.type!==P.dtype||4!==cd.size||cd.buffer!==P||!1!==cd.normalized||0!==cd.offset||0!==cd.stride)t.bindBuffer(34962,P.buffer),t.vertexAttribPointer(Lb,4,P.dtype,!1,0,0),cd.type=P.dtype,cd.size=4,cd.buffer=P,cd.normalized=!1,cd.offset=0,cd.stride=0;Ea=ad.location;rc=G[Ea];rc.buffer||t.enableVertexAttribArray(Ea);if(rc.type!==z.dtype||4!==rc.size||rc.buffer!==z||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)t.bindBuffer(34962,
z.buffer),t.vertexAttribPointer(Ea,4,z.dtype,!1,0,0),rc.type=z.dtype,rc.size=4,rc.buffer=z,rc.normalized=!1,rc.offset=0,rc.stride=0;Qa=F.location;za=G[Qa];za.buffer||t.enableVertexAttribArray(Qa);if(za.type!==oa.dtype||4!==za.size||za.buffer!==oa||!1!==za.normalized||0!==za.offset||0!==za.stride)t.bindBuffer(34962,oa.buffer),t.vertexAttribPointer(Qa,4,oa.dtype,!1,0,0),za.type=oa.dtype,za.size=4,za.buffer=oa,za.normalized=!1,za.offset=0,za.stride=0;nb=D.location;xb=G[nb];xb.buffer||t.enableVertexAttribArray(nb);
if(xb.type!==C.dtype||4!==xb.size||xb.buffer!==C||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)t.bindBuffer(34962,C.buffer),t.vertexAttribPointer(nb,4,C.dtype,!1,0,0),xb.type=C.dtype,xb.size=4,xb.buffer=C,xb.normalized=!1,xb.offset=0,xb.stride=0;Db=ia.location;tb=G[Db];tb.buffer||t.enableVertexAttribArray(Db);if(tb.type!==p.dtype||4!==tb.size||tb.buffer!==p||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)t.bindBuffer(34962,p.buffer),t.vertexAttribPointer(Db,4,p.dtype,!1,0,0),tb.type=p.dtype,
tb.size=4,tb.buffer=p,tb.normalized=!1,tb.offset=0,tb.stride=0;od=Oa.location;yb=G[od];yb.buffer||t.enableVertexAttribArray(od);if(yb.type!==u.dtype||4!==yb.size||yb.buffer!==u||!1!==yb.normalized||0!==yb.offset||0!==yb.stride)t.bindBuffer(34962,u.buffer),t.vertexAttribPointer(od,4,u.dtype,!1,0,0),yb.type=u.dtype,yb.size=4,yb.buffer=u,yb.normalized=!1,yb.offset=0,yb.stride=0;t.uniform1i(ua.location,na.bind());(vd=V.elements)?t.bindBuffer(34963,vd.buffer.buffer):Hb.currentVAO&&(vd=Ba.getElements(Hb.currentVAO.elements))&&
t.bindBuffer(34963,vd.buffer.buffer);for(k=0;k<c;++k){L=a[k];var Ka,te,de,Ke,Ld,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,Ad,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,ub,gd,jd,Yc,Vb,ie,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd;kd.height=L.viewportHeight;kd.width=L.viewportWidth;kd.x=L.viewportX;kd.y=L.viewportY;Ka=kd.x|0;te=kd.y|0;de="width"in kd?kd.width|0:A.framebufferWidth-Ka;Ke="height"in kd?kd.height|0:A.framebufferHeight-te;Ld=A.viewportWidth;A.viewportWidth=de;Xb=A.viewportHeight;
A.viewportHeight=Ke;t.viewport(Ka,te,de,Ke);yd[0]=Ka;yd[1]=te;yd[2]=de;yd[3]=Ke;Cd.height=L.scissorHeight;Cd.width=L.scissorWidth;Cd.x=L.scissorX;Cd.y=L.scissorY;ec=Cd.x|0;Pb=Cd.y|0;Fa="width"in Cd?Cd.width|0:A.framebufferWidth-ec;ac="height"in Cd?Cd.height|0:A.framebufferHeight-Pb;t.scissor(ec,Pb,Fa,ac);$e[0]=ec;$e[1]=Pb;$e[2]=Fa;$e[3]=ac;ob=L.dim0A;t.uniformMatrix4fv(K.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(qd[0]=ob[0],qd[1]=ob[1],qd[2]=ob[2],qd[3]=ob[3],qd[4]=ob[4],qd[5]=
ob[5],qd[6]=ob[6],qd[7]=ob[7],qd[8]=ob[8],qd[9]=ob[9],qd[10]=ob[10],qd[11]=ob[11],qd[12]=ob[12],qd[13]=ob[13],qd[14]=ob[14],qd[15]=ob[15],qd));zb=L.dim1A;t.uniformMatrix4fv(O.location,!1,Array.isArray(zb)||zb instanceof Float32Array?zb:(Ac[0]=zb[0],Ac[1]=zb[1],Ac[2]=zb[2],Ac[3]=zb[3],Ac[4]=zb[4],Ac[5]=zb[5],Ac[6]=zb[6],Ac[7]=zb[7],Ac[8]=zb[8],Ac[9]=zb[9],Ac[10]=zb[10],Ac[11]=zb[11],Ac[12]=zb[12],Ac[13]=zb[13],Ac[14]=zb[14],Ac[15]=zb[15],Ac));Mb=L.dim0B;t.uniformMatrix4fv(N.location,!1,Array.isArray(Mb)||
Mb instanceof Float32Array?Mb:(Zb[0]=Mb[0],Zb[1]=Mb[1],Zb[2]=Mb[2],Zb[3]=Mb[3],Zb[4]=Mb[4],Zb[5]=Mb[5],Zb[6]=Mb[6],Zb[7]=Mb[7],Zb[8]=Mb[8],Zb[9]=Mb[9],Zb[10]=Mb[10],Zb[11]=Mb[11],Zb[12]=Mb[12],Zb[13]=Mb[13],Zb[14]=Mb[14],Zb[15]=Mb[15],Zb));Qb=L.dim1B;t.uniformMatrix4fv(Yb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Gc[0]=Qb[0],Gc[1]=Qb[1],Gc[2]=Qb[2],Gc[3]=Qb[3],Gc[4]=Qb[4],Gc[5]=Qb[5],Gc[6]=Qb[6],Gc[7]=Qb[7],Gc[8]=Qb[8],Gc[9]=Qb[9],Gc[10]=Qb[10],Gc[11]=Qb[11],Gc[12]=Qb[12],Gc[13]=
Qb[13],Gc[14]=Qb[14],Gc[15]=Qb[15],Gc));hc=L.dim0C;t.uniformMatrix4fv(R.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Sc[0]=hc[0],Sc[1]=hc[1],Sc[2]=hc[2],Sc[3]=hc[3],Sc[4]=hc[4],Sc[5]=hc[5],Sc[6]=hc[6],Sc[7]=hc[7],Sc[8]=hc[8],Sc[9]=hc[9],Sc[10]=hc[10],Sc[11]=hc[11],Sc[12]=hc[12],Sc[13]=hc[13],Sc[14]=hc[14],Sc[15]=hc[15],Sc));jc=L.dim1C;t.uniformMatrix4fv($a.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(Ma[0]=jc[0],Ma[1]=jc[1],Ma[2]=jc[2],Ma[3]=jc[3],Ma[4]=jc[4],Ma[5]=
jc[5],Ma[6]=jc[6],Ma[7]=jc[7],Ma[8]=jc[8],Ma[9]=jc[9],Ma[10]=jc[10],Ma[11]=jc[11],Ma[12]=jc[12],Ma[13]=jc[13],Ma[14]=jc[14],Ma[15]=jc[15],Ma));Ad=L.dim0D;t.uniformMatrix4fv(pa.location,!1,Array.isArray(Ad)||Ad instanceof Float32Array?Ad:(Fb[0]=Ad[0],Fb[1]=Ad[1],Fb[2]=Ad[2],Fb[3]=Ad[3],Fb[4]=Ad[4],Fb[5]=Ad[5],Fb[6]=Ad[6],Fb[7]=Ad[7],Fb[8]=Ad[8],Fb[9]=Ad[9],Fb[10]=Ad[10],Fb[11]=Ad[11],Fb[12]=Ad[12],Fb[13]=Ad[13],Fb[14]=Ad[14],Fb[15]=Ad[15],Fb));Bc=L.dim1D;t.uniformMatrix4fv(T.location,!1,Array.isArray(Bc)||
Bc instanceof Float32Array?Bc:(Wa[0]=Bc[0],Wa[1]=Bc[1],Wa[2]=Bc[2],Wa[3]=Bc[3],Wa[4]=Bc[4],Wa[5]=Bc[5],Wa[6]=Bc[6],Wa[7]=Bc[7],Wa[8]=Bc[8],Wa[9]=Bc[9],Wa[10]=Bc[10],Wa[11]=Bc[11],Wa[12]=Bc[12],Wa[13]=Bc[13],Wa[14]=Bc[14],Wa[15]=Bc[15],Wa));Cc=L.loA;t.uniformMatrix4fv(cc.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(ra[0]=Cc[0],ra[1]=Cc[1],ra[2]=Cc[2],ra[3]=Cc[3],ra[4]=Cc[4],ra[5]=Cc[5],ra[6]=Cc[6],ra[7]=Cc[7],ra[8]=Cc[8],ra[9]=Cc[9],ra[10]=Cc[10],ra[11]=Cc[11],ra[12]=Cc[12],ra[13]=
Cc[13],ra[14]=Cc[14],ra[15]=Cc[15],ra));Dc=L.hiA;t.uniformMatrix4fv(ja.location,!1,Array.isArray(Dc)||Dc instanceof Float32Array?Dc:(td[0]=Dc[0],td[1]=Dc[1],td[2]=Dc[2],td[3]=Dc[3],td[4]=Dc[4],td[5]=Dc[5],td[6]=Dc[6],td[7]=Dc[7],td[8]=Dc[8],td[9]=Dc[9],td[10]=Dc[10],td[11]=Dc[11],td[12]=Dc[12],td[13]=Dc[13],td[14]=Dc[14],td[15]=Dc[15],td));Pc=L.loB;t.uniformMatrix4fv(Ga.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(Ib[0]=Pc[0],Ib[1]=Pc[1],Ib[2]=Pc[2],Ib[3]=Pc[3],Ib[4]=Pc[4],Ib[5]=
Pc[5],Ib[6]=Pc[6],Ib[7]=Pc[7],Ib[8]=Pc[8],Ib[9]=Pc[9],Ib[10]=Pc[10],Ib[11]=Pc[11],Ib[12]=Pc[12],Ib[13]=Pc[13],Ib[14]=Pc[14],Ib[15]=Pc[15],Ib));$c=L.hiB;t.uniformMatrix4fv(ca.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Ta[0]=$c[0],Ta[1]=$c[1],Ta[2]=$c[2],Ta[3]=$c[3],Ta[4]=$c[4],Ta[5]=$c[5],Ta[6]=$c[6],Ta[7]=$c[7],Ta[8]=$c[8],Ta[9]=$c[9],Ta[10]=$c[10],Ta[11]=$c[11],Ta[12]=$c[12],Ta[13]=$c[13],Ta[14]=$c[14],Ta[15]=$c[15],Ta));Tc=L.loC;t.uniformMatrix4fv(X.location,!1,Array.isArray(Tc)||
Tc instanceof Float32Array?Tc:(qc[0]=Tc[0],qc[1]=Tc[1],qc[2]=Tc[2],qc[3]=Tc[3],qc[4]=Tc[4],qc[5]=Tc[5],qc[6]=Tc[6],qc[7]=Tc[7],qc[8]=Tc[8],qc[9]=Tc[9],qc[10]=Tc[10],qc[11]=Tc[11],qc[12]=Tc[12],qc[13]=Tc[13],qc[14]=Tc[14],qc[15]=Tc[15],qc));Qc=L.hiC;t.uniformMatrix4fv(Aa.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:(eb[0]=Qc[0],eb[1]=Qc[1],eb[2]=Qc[2],eb[3]=Qc[3],eb[4]=Qc[4],eb[5]=Qc[5],eb[6]=Qc[6],eb[7]=Qc[7],eb[8]=Qc[8],eb[9]=Qc[9],eb[10]=Qc[10],eb[11]=Qc[11],eb[12]=Qc[12],eb[13]=
Qc[13],eb[14]=Qc[14],eb[15]=Qc[15],eb));Kb=L.loD;t.uniformMatrix4fv(kb.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(uc[0]=Kb[0],uc[1]=Kb[1],uc[2]=Kb[2],uc[3]=Kb[3],uc[4]=Kb[4],uc[5]=Kb[5],uc[6]=Kb[6],uc[7]=Kb[7],uc[8]=Kb[8],uc[9]=Kb[9],uc[10]=Kb[10],uc[11]=Kb[11],uc[12]=Kb[12],uc[13]=Kb[13],uc[14]=Kb[14],uc[15]=Kb[15],uc));Gb=L.hiD;t.uniformMatrix4fv(La.location,!1,Array.isArray(Gb)||Gb instanceof Float32Array?Gb:(Rb[0]=Gb[0],Rb[1]=Gb[1],Rb[2]=Gb[2],Rb[3]=Gb[3],Rb[4]=Gb[4],Rb[5]=
Gb[5],Rb[6]=Gb[6],Rb[7]=Gb[7],Rb[8]=Gb[8],Rb[9]=Gb[9],Rb[10]=Gb[10],Rb[11]=Gb[11],Rb[12]=Gb[12],Rb[13]=Gb[13],Rb[14]=Gb[14],Rb[15]=Gb[15],Rb));Rc=L.resolution;Jc=Rc[0];ic=Rc[1];k&&Uc===Jc&&Xc===ic||(Uc=Jc,Xc=ic,t.uniform2f(W.location,Jc,ic));ub=L.viewBoxPos;gd=ub[0];Yc=ub[1];k&&jd===gd&&Vb===Yc||(jd=gd,Vb=Yc,t.uniform2f(ha.location,gd,Yc));ie=L.viewBoxSize;je=ie[0];me=ie[1];k&&ue===je&&Id===me||(ue=je,Id=me,t.uniform2f(qa.location,je,me));Gd=L.maskHeight;k&&dd===Gd||(dd=Gd,t.uniform1f(fa.location,
Gd));Ec=L.drwLayer;k&&nd===Ec||(nd=Ec,t.uniform1f(y.location,Ec));hd=L.contextColor;bd=hd[0];Bd=hd[1];ve=hd[2];ye=hd[3];k&&pd===bd&&Ed===Bd&&ne===ve&&ce===ye||(pd=bd,Ed=Bd,ne=ve,ce=ye,t.uniform4f(Y.location,bd,Bd,ve,ye));(be=L.maskTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);ae=be._texture;t.uniform1i(sa.location,ae.bind());pe=L.offset;if(Zd=L.count)vd?t.drawElements(1,Zd,vd.type,pe<<(vd.type-5121>>1)):t.drawArrays(1,pe,Zd),A.viewportWidth=Ld,A.viewportHeight=Xb,ae.unbind()}na.unbind();
ea.dirty=!0;Hb.setVAO(null);ea.profile=m},draw:function(a){var c,m,r,k,L,v;c=Ha.next;c!==Ha.cur&&(c?t.bindFramebuffer(36160,c.framebuffer):t.bindFramebuffer(36160,null),Ha.cur=c);if(ea.dirty){c=se[0];v=se[1];m=se[2];r=se[3];if(c!==rd[0]||v!==rd[1]||m!==rd[2]||r!==rd[3])t.colorMask(c,v,m,r),rd[0]=c,rd[1]=v,rd[2]=m,rd[3]=r;c=lc.frontFace;c!==ea.frontFace&&(t.frontFace(c),ea.frontFace=c);c=lc.polygonOffset_enable;c!==ea.polygonOffset_enable&&(c?t.enable(32823):t.disable(32823),ea.polygonOffset_enable=
c);c=ud[0];v=ud[1];if(c!==Fd[0]||v!==Fd[1])t.polygonOffset(c,v),Fd[0]=c,Fd[1]=v;c=lc.sample_alpha;c!==ea.sample_alpha&&(c?t.enable(32926):t.disable(32926),ea.sample_alpha=c);c=lc.sample_enable;c!==ea.sample_enable&&(c?t.enable(32928):t.disable(32928),ea.sample_enable=c);c=Kd[0];v=Kd[1];if(c!==Od[0]||v!==Od[1])t.sampleCoverage(c,v),Od[0]=c,Od[1]=v;c=lc.stencil_enable;c!==ea.stencil_enable&&(c?t.enable(2960):t.disable(2960),ea.stencil_enable=c);c=lc.stencil_mask;c!==ea.stencil_mask&&(t.stencilMask(c),
ea.stencil_mask=c);c=Xe[0];v=Xe[1];m=Xe[2];if(c!==xd[0]||v!==xd[1]||m!==xd[2])t.stencilFunc(c,v,m),xd[0]=c,xd[1]=v,xd[2]=m;c=Wd[0];v=Wd[1];m=Wd[2];r=Wd[3];if(c!==le[0]||v!==le[1]||m!==le[2]||r!==le[3])t.stencilOpSeparate(c,v,m,r),le[0]=c,le[1]=v,le[2]=m,le[3]=r;c=Ee[0];v=Ee[1];m=Ee[2];r=Ee[3];if(c!==Vd[0]||v!==Vd[1]||m!==Vd[2]||r!==Vd[3])t.stencilOpSeparate(c,v,m,r),Vd[0]=c,Vd[1]=v,Vd[2]=m,Vd[3]=r}kd.height=a.viewportHeight;kd.width=a.viewportWidth;kd.x=a.viewportX;kd.y=a.viewportY;m=kd.x|0;r=kd.y|
0;k="width"in kd?kd.width|0:A.framebufferWidth-m;L="height"in kd?kd.height|0:A.framebufferHeight-r;c=A.viewportWidth;A.viewportWidth=k;v=A.viewportHeight;A.viewportHeight=L;t.viewport(m,r,k,L);yd[0]=m;yd[1]=r;yd[2]=k;yd[3]=L;t.blendColor(0,0,0,0);We[0]=0;We[1]=0;We[2]=0;We[3]=0;t.disable(3042);ea.blend_enable=!1;t.blendEquationSeparate(32774,32774);ee[0]=32774;ee[1]=32774;t.blendFuncSeparate(770,771,1,1);xe[0]=770;xe[1]=771;xe[2]=1;xe[3]=1;t.enable(2884);ea.cull_enable=!0;t.cullFace(1029);ea.cull_face=
1029;t.enable(2929);ea.depth_enable=!0;t.depthFunc(513);ea.depth_func=513;t.depthMask(!0);ea.depth_mask=!0;t.depthRange(0,1);we[0]=0;we[1]=1;t.disable(3024);ea.dither=!1;t.lineWidth(2);ea.lineWidth=2;Cd.height=a.scissorHeight;Cd.width=a.scissorWidth;Cd.x=a.scissorX;Cd.y=a.scissorY;m=Cd.x|0;r=Cd.y|0;k="width"in Cd?Cd.width|0:A.framebufferWidth-m;L="height"in Cd?Cd.height|0:A.framebufferHeight-r;t.scissor(m,r,k,L);$e[0]=m;$e[1]=r;$e[2]=k;$e[3]=L;t.enable(3089);ea.scissor_enable=!0;m=ea.profile;ea.profile=
!1;t.useProgram(f.program);Hb.setVAO(null);r=Wb.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==g.dtype||4!==k.size||k.buffer!==g||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(r,4,g.dtype,!1,0,0),k.type=g.dtype,k.size=4,k.buffer=g,k.normalized=!1,k.offset=0,k.stride=0;r=oc.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==d.dtype||4!==k.size||k.buffer!==d||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,
d.buffer),t.vertexAttribPointer(r,4,d.dtype,!1,0,0),k.type=d.dtype,k.size=4,k.buffer=d,k.normalized=!1,k.offset=0,k.stride=0;r=xc.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==b.dtype||4!==k.size||k.buffer!==b||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,b.buffer),t.vertexAttribPointer(r,4,b.dtype,!1,0,0),k.type=b.dtype,k.size=4,k.buffer=b,k.normalized=!1,k.offset=0,k.stride=0;r=sd.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==n.dtype||
4!==k.size||k.buffer!==n||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,n.buffer),t.vertexAttribPointer(r,4,n.dtype,!1,0,0),k.type=n.dtype,k.size=4,k.buffer=n,k.normalized=!1,k.offset=0,k.stride=0;r=Fc.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(r,4,e.dtype,!1,0,0),k.type=e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,
k.stride=0;r=aa.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==h.dtype||4!==k.size||k.buffer!==h||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(r,4,h.dtype,!1,0,0),k.type=h.dtype,k.size=4,k.buffer=h,k.normalized=!1,k.offset=0,k.stride=0;r=M.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==q.dtype||4!==k.size||k.buffer!==q||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,q.buffer),t.vertexAttribPointer(r,
4,q.dtype,!1,0,0),k.type=q.dtype,k.size=4,k.buffer=q,k.normalized=!1,k.offset=0,k.stride=0;r=ka.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==B.dtype||4!==k.size||k.buffer!==B||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,B.buffer),t.vertexAttribPointer(r,4,B.dtype,!1,0,0),k.type=B.dtype,k.size=4,k.buffer=B,k.normalized=!1,k.offset=0,k.stride=0;r=Da.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==l.dtype||4!==k.size||k.buffer!==l||!1!==k.normalized||
0!==k.offset||0!==k.stride)t.bindBuffer(34962,l.buffer),t.vertexAttribPointer(r,4,l.dtype,!1,0,0),k.type=l.dtype,k.size=4,k.buffer=l,k.normalized=!1,k.offset=0,k.stride=0;r=vb.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==w.dtype||4!==k.size||k.buffer!==w||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,w.buffer),t.vertexAttribPointer(r,4,w.dtype,!1,0,0),k.type=w.dtype,k.size=4,k.buffer=w,k.normalized=!1,k.offset=0,k.stride=0;r=ab.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);
if(k.type!==P.dtype||4!==k.size||k.buffer!==P||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,P.buffer),t.vertexAttribPointer(r,4,P.dtype,!1,0,0),k.type=P.dtype,k.size=4,k.buffer=P,k.normalized=!1,k.offset=0,k.stride=0;r=ad.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==z.dtype||4!==k.size||k.buffer!==z||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,z.buffer),t.vertexAttribPointer(r,4,z.dtype,!1,0,0),k.type=z.dtype,k.size=4,k.buffer=z,k.normalized=
!1,k.offset=0,k.stride=0;r=F.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==oa.dtype||4!==k.size||k.buffer!==oa||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,oa.buffer),t.vertexAttribPointer(r,4,oa.dtype,!1,0,0),k.type=oa.dtype,k.size=4,k.buffer=oa,k.normalized=!1,k.offset=0,k.stride=0;r=D.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==C.dtype||4!==k.size||k.buffer!==C||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,C.buffer),
t.vertexAttribPointer(r,4,C.dtype,!1,0,0),k.type=C.dtype,k.size=4,k.buffer=C,k.normalized=!1,k.offset=0,k.stride=0;r=ia.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==p.dtype||4!==k.size||k.buffer!==p||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,p.buffer),t.vertexAttribPointer(r,4,p.dtype,!1,0,0),k.type=p.dtype,k.size=4,k.buffer=p,k.normalized=!1,k.offset=0,k.stride=0;r=Oa.location;k=G[r];k.buffer||t.enableVertexAttribArray(r);if(k.type!==u.dtype||4!==k.size||
k.buffer!==u||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,u.buffer),t.vertexAttribPointer(r,4,u.dtype,!1,0,0),k.type=u.dtype,k.size=4,k.buffer=u,k.normalized=!1,k.offset=0,k.stride=0;r=a.dim0A;t.uniformMatrix4fv(K.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(od[0]=r[0],od[1]=r[1],od[2]=r[2],od[3]=r[3],od[4]=r[4],od[5]=r[5],od[6]=r[6],od[7]=r[7],od[8]=r[8],od[9]=r[9],od[10]=r[10],od[11]=r[11],od[12]=r[12],od[13]=r[13],od[14]=r[14],od[15]=r[15],od));r=a.dim1A;t.uniformMatrix4fv(O.location,
!1,Array.isArray(r)||r instanceof Float32Array?r:(cd[0]=r[0],cd[1]=r[1],cd[2]=r[2],cd[3]=r[3],cd[4]=r[4],cd[5]=r[5],cd[6]=r[6],cd[7]=r[7],cd[8]=r[8],cd[9]=r[9],cd[10]=r[10],cd[11]=r[11],cd[12]=r[12],cd[13]=r[13],cd[14]=r[14],cd[15]=r[15],cd));r=a.dim0B;t.uniformMatrix4fv(N.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Vc[0]=r[0],Vc[1]=r[1],Vc[2]=r[2],Vc[3]=r[3],Vc[4]=r[4],Vc[5]=r[5],Vc[6]=r[6],Vc[7]=r[7],Vc[8]=r[8],Vc[9]=r[9],Vc[10]=r[10],Vc[11]=r[11],Vc[12]=r[12],Vc[13]=r[13],Vc[14]=
r[14],Vc[15]=r[15],Vc));r=a.dim1B;t.uniformMatrix4fv(Yb.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(vd[0]=r[0],vd[1]=r[1],vd[2]=r[2],vd[3]=r[3],vd[4]=r[4],vd[5]=r[5],vd[6]=r[6],vd[7]=r[7],vd[8]=r[8],vd[9]=r[9],vd[10]=r[10],vd[11]=r[11],vd[12]=r[12],vd[13]=r[13],vd[14]=r[14],vd[15]=r[15],vd));r=a.dim0C;t.uniformMatrix4fv(R.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(ed[0]=r[0],ed[1]=r[1],ed[2]=r[2],ed[3]=r[3],ed[4]=r[4],ed[5]=r[5],ed[6]=r[6],ed[7]=r[7],ed[8]=r[8],ed[9]=
r[9],ed[10]=r[10],ed[11]=r[11],ed[12]=r[12],ed[13]=r[13],ed[14]=r[14],ed[15]=r[15],ed));r=a.dim1C;t.uniformMatrix4fv($a.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Nc[0]=r[0],Nc[1]=r[1],Nc[2]=r[2],Nc[3]=r[3],Nc[4]=r[4],Nc[5]=r[5],Nc[6]=r[6],Nc[7]=r[7],Nc[8]=r[8],Nc[9]=r[9],Nc[10]=r[10],Nc[11]=r[11],Nc[12]=r[12],Nc[13]=r[13],Nc[14]=r[14],Nc[15]=r[15],Nc));r=a.dim0D;t.uniformMatrix4fv(pa.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(sc[0]=r[0],sc[1]=r[1],sc[2]=r[2],sc[3]=
r[3],sc[4]=r[4],sc[5]=r[5],sc[6]=r[6],sc[7]=r[7],sc[8]=r[8],sc[9]=r[9],sc[10]=r[10],sc[11]=r[11],sc[12]=r[12],sc[13]=r[13],sc[14]=r[14],sc[15]=r[15],sc));r=a.dim1D;t.uniformMatrix4fv(T.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(bb[0]=r[0],bb[1]=r[1],bb[2]=r[2],bb[3]=r[3],bb[4]=r[4],bb[5]=r[5],bb[6]=r[6],bb[7]=r[7],bb[8]=r[8],bb[9]=r[9],bb[10]=r[10],bb[11]=r[11],bb[12]=r[12],bb[13]=r[13],bb[14]=r[14],bb[15]=r[15],bb));r=a.loA;t.uniformMatrix4fv(cc.location,!1,Array.isArray(r)||r instanceof
Float32Array?r:(Kc[0]=r[0],Kc[1]=r[1],Kc[2]=r[2],Kc[3]=r[3],Kc[4]=r[4],Kc[5]=r[5],Kc[6]=r[6],Kc[7]=r[7],Kc[8]=r[8],Kc[9]=r[9],Kc[10]=r[10],Kc[11]=r[11],Kc[12]=r[12],Kc[13]=r[13],Kc[14]=r[14],Kc[15]=r[15],Kc));r=a.hiA;t.uniformMatrix4fv(ja.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Eb[0]=r[0],Eb[1]=r[1],Eb[2]=r[2],Eb[3]=r[3],Eb[4]=r[4],Eb[5]=r[5],Eb[6]=r[6],Eb[7]=r[7],Eb[8]=r[8],Eb[9]=r[9],Eb[10]=r[10],Eb[11]=r[11],Eb[12]=r[12],Eb[13]=r[13],Eb[14]=r[14],Eb[15]=r[15],Eb));r=a.loB;t.uniformMatrix4fv(Ga.location,
!1,Array.isArray(r)||r instanceof Float32Array?r:(rc[0]=r[0],rc[1]=r[1],rc[2]=r[2],rc[3]=r[3],rc[4]=r[4],rc[5]=r[5],rc[6]=r[6],rc[7]=r[7],rc[8]=r[8],rc[9]=r[9],rc[10]=r[10],rc[11]=r[11],rc[12]=r[12],rc[13]=r[13],rc[14]=r[14],rc[15]=r[15],rc));r=a.hiB;t.uniformMatrix4fv(ca.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Sa[0]=r[0],Sa[1]=r[1],Sa[2]=r[2],Sa[3]=r[3],Sa[4]=r[4],Sa[5]=r[5],Sa[6]=r[6],Sa[7]=r[7],Sa[8]=r[8],Sa[9]=r[9],Sa[10]=r[10],Sa[11]=r[11],Sa[12]=r[12],Sa[13]=r[13],Sa[14]=
r[14],Sa[15]=r[15],Sa));r=a.loC;t.uniformMatrix4fv(X.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Lc[0]=r[0],Lc[1]=r[1],Lc[2]=r[2],Lc[3]=r[3],Lc[4]=r[4],Lc[5]=r[5],Lc[6]=r[6],Lc[7]=r[7],Lc[8]=r[8],Lc[9]=r[9],Lc[10]=r[10],Lc[11]=r[11],Lc[12]=r[12],Lc[13]=r[13],Lc[14]=r[14],Lc[15]=r[15],Lc));r=a.hiC;t.uniformMatrix4fv(Aa.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(dc[0]=r[0],dc[1]=r[1],dc[2]=r[2],dc[3]=r[3],dc[4]=r[4],dc[5]=r[5],dc[6]=r[6],dc[7]=r[7],dc[8]=r[8],dc[9]=r[9],
dc[10]=r[10],dc[11]=r[11],dc[12]=r[12],dc[13]=r[13],dc[14]=r[14],dc[15]=r[15],dc));r=a.loD;t.uniformMatrix4fv(kb.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(pc[0]=r[0],pc[1]=r[1],pc[2]=r[2],pc[3]=r[3],pc[4]=r[4],pc[5]=r[5],pc[6]=r[6],pc[7]=r[7],pc[8]=r[8],pc[9]=r[9],pc[10]=r[10],pc[11]=r[11],pc[12]=r[12],pc[13]=r[13],pc[14]=r[14],pc[15]=r[15],pc));r=a.hiD;t.uniformMatrix4fv(La.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Ld[0]=r[0],Ld[1]=r[1],Ld[2]=r[2],Ld[3]=r[3],Ld[4]=
r[4],Ld[5]=r[5],Ld[6]=r[6],Ld[7]=r[7],Ld[8]=r[8],Ld[9]=r[9],Ld[10]=r[10],Ld[11]=r[11],Ld[12]=r[12],Ld[13]=r[13],Ld[14]=r[14],Ld[15]=r[15],Ld));r=a.resolution;t.uniform2f(W.location,r[0],r[1]);r=a.viewBoxPos;t.uniform2f(ha.location,r[0],r[1]);r=a.viewBoxSize;t.uniform2f(qa.location,r[0],r[1]);t.uniform1f(fa.location,a.maskHeight);t.uniform1f(y.location,a.drwLayer);r=a.contextColor;t.uniform4f(Y.location,r[0],r[1],r[2],r[3]);(r=a.maskTexture)&&"framebuffer"===r._reglType&&(r=r.color[0]);r=r._texture;
t.uniform1i(sa.location,r.bind());t.uniform1i(ua.location,J.bind());(k=V.elements)?t.bindBuffer(34963,k.buffer.buffer):Hb.currentVAO&&(k=Ba.getElements(Hb.currentVAO.elements))&&t.bindBuffer(34963,k.buffer.buffer);L=a.offset;if(a=a.count)k?t.drawElements(1,a,k.type,L<<(k.type-5121>>1)):t.drawArrays(1,L,a),ea.dirty=!0,Hb.setVAO(null),A.viewportWidth=c,A.viewportHeight=v,ea.profile=m,r.unbind(),J.unbind()},scope:function(a,c,f){var r,t,y,D,M,G,F,aa,N,J,K,O,R,T,X,W,ha,ka,Y,ia,ca,fa,ja,Ba,ua,Ha,ra,oc,
bb,qa,Sa,wa,Da,Ma,Od,Eb,Hb,xa,Wa,Ca,Wd,dc,Gc,Nc,pa,ed,Zb,Ta,Fb,sc,Ea,pc,Qa,za,Sc,sd,sa,cd,Ib,eb,na,Vc,rc,xd,Vd,Lc,Kc,Ac,rd,Fa,qc,ob,zb,vb,yd,vd,le,ab,Rb,od,Fc,td,uc,Aa,qd,Kb,Gb,We,ee,ud,$e,Ee,Wb,Xe,Ld,$a,Oa,xc,Kd,se,La,kb,Fd,xe,Ec,we,Yb,Ga,ad,cc,bc,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,vf,ze,oe,Pe,Qe,Le,re,Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,jf,kf,lf,rf,of,sf,Cf,Df,Ne,Be,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,
Sf,Tf,qg,ff,bf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,cf,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;kd.height=a.viewportHeight;kd.width=a.viewportWidth;kd.x=a.viewportX;kd.y=a.viewportY;r=kd.x|0;t=kd.y|0;y="width"in kd?kd.width|0:A.framebufferWidth-r;D="height"in kd?kd.height|0:A.framebufferHeight-t;M=A.viewportWidth;A.viewportWidth=
y;G=A.viewportHeight;A.viewportHeight=D;F=Ke[0];Ke[0]=r;aa=Ke[1];Ke[1]=t;N=Ke[2];Ke[2]=y;J=Ke[3];Ke[3]=D;K=Ab[0];Ab[0]=0;O=Ab[1];Ab[1]=0;R=Ab[2];Ab[2]=0;T=Ab[3];Ab[3]=0;X=lc.blend_enable;lc.blend_enable=!1;W=Ad[0];Ad[0]=32774;ha=Ad[1];Ad[1]=32774;ka=te[0];te[0]=770;Y=te[1];te[1]=771;ia=te[2];te[2]=1;ca=te[3];te[3]=1;fa=lc.cull_enable;lc.cull_enable=!0;ja=lc.cull_face;lc.cull_face=1029;Ba=lc.depth_enable;lc.depth_enable=!0;ua=lc.depth_func;lc.depth_func=513;Ha=lc.depth_mask;lc.depth_mask=!0;ra=de[0];
de[0]=0;oc=de[1];de[1]=1;bb=lc.dither;lc.dither=!1;qa=lc.lineWidth;lc.lineWidth=2;Cd.height=a.scissorHeight;Cd.width=a.scissorWidth;Cd.x=a.scissorX;Cd.y=a.scissorY;Sa=Cd.x|0;wa=Cd.y|0;Da="width"in Cd?Cd.width|0:A.framebufferWidth-Sa;Ma="height"in Cd?Cd.height|0:A.framebufferHeight-wa;Od=Oe[0];Oe[0]=Sa;Eb=Oe[1];Oe[1]=wa;Hb=Oe[2];Oe[2]=Da;xa=Oe[3];Oe[3]=Ma;Wa=lc.scissor_enable;lc.scissor_enable=!0;Ca=ea.profile;ea.profile=!1;Wd=a.offset;dc=V.offset;V.offset=Wd;Gc=a.count;Nc=V.count;V.count=Gc;pa=V.primitive;
V.primitive=1;ed=a.contextColor;Zb=ga[24];ga[24]=ed;Ta=a.dim0A;Fb=ga[3];ga[3]=Ta;sc=a.dim0B;Ea=ga[5];ga[5]=sc;pc=a.dim0C;Qa=ga[7];ga[7]=pc;za=a.dim0D;Sc=ga[9];ga[9]=za;sd=a.dim1A;sa=ga[4];ga[4]=sd;cd=a.dim1B;Ib=ga[6];ga[6]=cd;eb=a.dim1C;na=ga[8];ga[8]=eb;Vc=a.dim1D;rc=ga[10];ga[10]=Vc;xd=a.drwLayer;Vd=ga[23];ga[23]=xd;Lc=a.hiA;Kc=ga[12];ga[12]=Lc;Ac=a.hiB;rd=ga[14];ga[14]=Ac;Fa=a.hiC;qc=ga[16];ga[16]=Fa;ob=a.hiD;zb=ga[18];ga[18]=ob;vb=a.loA;yd=ga[11];ga[11]=vb;vd=a.loB;le=ga[13];ga[13]=vd;ab=a.loC;
Rb=ga[15];ga[15]=ab;od=a.loD;Fc=ga[17];ga[17]=od;td=a.maskHeight;uc=ga[22];ga[22]=td;Aa=a.maskTexture;qd=ga[25];ga[25]=Aa;Kb=ga[26];ga[26]=I;Gb=a.resolution;We=ga[19];ga[19]=Gb;ee=a.viewBoxPos;ud=ga[20];ga[20]=ee;$e=a.viewBoxSize;Ee=ga[21];ga[21]=$e;Wb=v.buffer;v.buffer=u;Xe=v.divisor;v.divisor=0;Ld=v.normalized;v.normalized=!1;$a=v.offset;v.offset=0;Oa=v.size;v.size=0;xc=v.state;v.state=1;Kd=v.stride;v.stride=0;se=v.type;v.type=u.dtype;La=v.w;v.w=0;kb=v.x;v.x=0;Fd=v.y;v.y=0;xe=v.z;v.z=0;Ec=x.buffer;
x.buffer=g;we=x.divisor;x.divisor=0;Yb=x.normalized;x.normalized=!1;Ga=x.offset;x.offset=0;ad=x.size;x.size=0;cc=x.state;x.state=1;bc=x.stride;x.stride=0;ve=x.type;x.type=g.dtype;ne=x.w;x.w=0;ye=x.x;x.x=0;ce=x.y;x.y=0;be=x.z;x.z=0;ae=k.buffer;k.buffer=d;pe=k.divisor;k.divisor=0;Zd=k.normalized;k.normalized=!1;fe=k.offset;k.offset=0;zc=k.size;k.size=0;Wc=k.state;k.state=1;qe=k.stride;k.stride=0;ke=k.type;k.type=d.dtype;Hd=k.w;k.w=0;Nd=k.x;k.x=0;Pd=k.y;k.y=0;Qd=k.z;k.z=0;ge=da.buffer;da.buffer=b;vf=
da.divisor;da.divisor=0;ze=da.normalized;da.normalized=!1;oe=da.offset;da.offset=0;Pe=da.size;da.size=0;Qe=da.state;da.state=1;Le=da.stride;da.stride=0;re=da.type;da.type=b.dtype;Ce=da.w;da.w=0;Fe=da.x;da.x=0;Ge=da.y;da.y=0;He=da.z;da.z=0;De=Q.buffer;Q.buffer=n;Jd=Q.divisor;Q.divisor=0;Ud=Q.normalized;Q.normalized=!1;Yd=Q.offset;Q.offset=0;$d=Q.size;Q.size=0;Ie=Q.state;Q.state=1;zd=Q.stride;Q.stride=0;Rd=Q.type;Q.type=n.dtype;Ae=Q.w;Q.w=0;Je=Q.x;Q.x=0;af=Q.y;Q.y=0;Ze=Q.z;Q.z=0;Re=ba.buffer;ba.buffer=
e;Me=ba.divisor;ba.divisor=0;Ye=ba.normalized;ba.normalized=!1;Ve=ba.offset;ba.offset=0;Se=ba.size;ba.size=0;Te=ba.state;ba.state=1;Sd=ba.stride;ba.stride=0;Xd=ba.type;ba.type=e.dtype;Ue=ba.w;ba.w=0;hf=ba.x;ba.x=0;mf=ba.y;ba.y=0;ef=ba.z;ba.z=0;jf=E.buffer;E.buffer=h;kf=E.divisor;E.divisor=0;lf=E.normalized;E.normalized=!1;rf=E.offset;E.offset=0;of=E.size;E.size=0;sf=E.state;E.state=1;Cf=E.stride;E.stride=0;Df=E.type;E.type=h.dtype;Ne=E.w;E.w=0;Be=E.x;E.x=0;pf=E.y;E.y=0;qf=E.z;E.z=0;Ef=ma.buffer;ma.buffer=
q;Hf=ma.divisor;ma.divisor=0;Bf=ma.normalized;ma.normalized=!1;Ff=ma.offset;ma.offset=0;Gf=ma.size;ma.size=0;xf=ma.state;ma.state=1;yf=ma.stride;ma.stride=0;wf=ma.type;ma.type=q.dtype;zf=ma.w;ma.w=0;Af=ma.x;ma.x=0;Jf=ma.y;ma.y=0;Kf=ma.z;ma.z=0;Lf=H.buffer;H.buffer=B;Mf=H.divisor;H.divisor=0;tf=H.normalized;H.normalized=!1;Rf=H.offset;H.offset=0;If=H.size;H.size=0;uf=H.state;H.state=1;dg=H.stride;H.stride=0;Sf=H.type;H.type=B.dtype;Tf=H.w;H.w=0;qg=H.x;H.x=0;ff=H.y;H.y=0;bf=H.z;H.z=0;Nf=Z.buffer;Z.buffer=
l;Of=Z.divisor;Z.divisor=0;eg=Z.normalized;Z.normalized=!1;fg=Z.offset;Z.offset=0;gg=Z.size;Z.size=0;hg=Z.state;Z.state=1;ig=Z.stride;Z.stride=0;Wf=Z.type;Z.type=l.dtype;Uf=Z.w;Z.w=0;Xf=Z.x;Z.x=0;Yf=Z.y;Z.y=0;Zf=Z.z;Z.z=0;jg=m.buffer;m.buffer=w;rg=m.divisor;m.divisor=0;sg=m.normalized;m.normalized=!1;tg=m.offset;m.offset=0;ug=m.size;m.size=0;vg=m.state;m.state=1;wg=m.stride;m.stride=0;xg=m.type;m.type=w.dtype;yg=m.w;m.w=0;zg=m.x;m.x=0;Ag=m.y;m.y=0;Bg=m.z;m.z=0;gf=L.buffer;L.buffer=P;cf=L.divisor;
L.divisor=0;Pf=L.normalized;L.normalized=!1;Qf=L.offset;L.offset=0;kg=L.size;L.size=0;lg=L.state;L.state=1;mg=L.stride;L.stride=0;ng=L.type;L.type=P.dtype;og=L.w;L.w=0;$f=L.x;L.x=0;Vf=L.y;L.y=0;ag=L.z;L.z=0;bg=U.buffer;U.buffer=z;cg=U.divisor;U.divisor=0;pg=U.normalized;U.normalized=!1;Cg=U.offset;U.offset=0;Dg=U.size;U.size=0;Eg=U.state;U.state=1;Fg=U.stride;U.stride=0;Gg=U.type;U.type=z.dtype;Hg=U.w;U.w=0;Ig=U.x;U.x=0;Jg=U.y;U.y=0;Kg=U.z;U.z=0;Lg=la.buffer;la.buffer=oa;Mg=la.divisor;la.divisor=
0;Ng=la.normalized;la.normalized=!1;Og=la.offset;la.offset=0;Pg=la.size;la.size=0;Qg=la.state;la.state=1;Rg=la.stride;la.stride=0;Sg=la.type;la.type=oa.dtype;Tg=la.w;la.w=0;Ug=la.x;la.x=0;Vg=la.y;la.y=0;Wg=la.z;la.z=0;Xg=Vb.buffer;Vb.buffer=C;Yg=Vb.divisor;Vb.divisor=0;Zg=Vb.normalized;Vb.normalized=!1;$g=Vb.offset;Vb.offset=0;ah=Vb.size;Vb.size=0;bh=Vb.state;Vb.state=1;ch=Vb.stride;Vb.stride=0;dh=Vb.type;Vb.type=C.dtype;eh=Vb.w;Vb.w=0;fh=Vb.x;Vb.x=0;gh=Vb.y;Vb.y=0;hh=Vb.z;Vb.z=0;ih=ub.buffer;ub.buffer=
p;jh=ub.divisor;ub.divisor=0;kh=ub.normalized;ub.normalized=!1;lh=ub.offset;ub.offset=0;mh=ub.size;ub.size=0;nh=ub.state;ub.state=1;oh=ub.stride;ub.stride=0;ph=ub.type;ub.type=p.dtype;qh=ub.w;ub.w=0;rh=ub.x;ub.x=0;sh=ub.y;ub.y=0;th=ub.z;ub.z=0;uh=db.vert;db.vert=2;vh=db.frag;db.frag=1;ea.dirty=!0;c(A,a,f);A.viewportWidth=M;A.viewportHeight=G;Ke[0]=F;Ke[1]=aa;Ke[2]=N;Ke[3]=J;Ab[0]=K;Ab[1]=O;Ab[2]=R;Ab[3]=T;lc.blend_enable=X;Ad[0]=W;Ad[1]=ha;te[0]=ka;te[1]=Y;te[2]=ia;te[3]=ca;lc.cull_enable=fa;lc.cull_face=
ja;lc.depth_enable=Ba;lc.depth_func=ua;lc.depth_mask=Ha;de[0]=ra;de[1]=oc;lc.dither=bb;lc.lineWidth=qa;Oe[0]=Od;Oe[1]=Eb;Oe[2]=Hb;Oe[3]=xa;lc.scissor_enable=Wa;ea.profile=Ca;V.offset=dc;V.count=Nc;V.primitive=pa;ga[24]=Zb;ga[3]=Fb;ga[5]=Ea;ga[7]=Qa;ga[9]=Sc;ga[4]=sa;ga[6]=Ib;ga[8]=na;ga[10]=rc;ga[23]=Vd;ga[12]=Kc;ga[14]=rd;ga[16]=qc;ga[18]=zb;ga[11]=yd;ga[13]=le;ga[15]=Rb;ga[17]=Fc;ga[22]=uc;ga[25]=qd;ga[26]=Kb;ga[19]=We;ga[20]=ud;ga[21]=Ee;v.buffer=Wb;v.divisor=Xe;v.normalized=Ld;v.offset=$a;v.size=
Oa;v.state=xc;v.stride=Kd;v.type=se;v.w=La;v.x=kb;v.y=Fd;v.z=xe;x.buffer=Ec;x.divisor=we;x.normalized=Yb;x.offset=Ga;x.size=ad;x.state=cc;x.stride=bc;x.type=ve;x.w=ne;x.x=ye;x.y=ce;x.z=be;k.buffer=ae;k.divisor=pe;k.normalized=Zd;k.offset=fe;k.size=zc;k.state=Wc;k.stride=qe;k.type=ke;k.w=Hd;k.x=Nd;k.y=Pd;k.z=Qd;da.buffer=ge;da.divisor=vf;da.normalized=ze;da.offset=oe;da.size=Pe;da.state=Qe;da.stride=Le;da.type=re;da.w=Ce;da.x=Fe;da.y=Ge;da.z=He;Q.buffer=De;Q.divisor=Jd;Q.normalized=Ud;Q.offset=Yd;
Q.size=$d;Q.state=Ie;Q.stride=zd;Q.type=Rd;Q.w=Ae;Q.x=Je;Q.y=af;Q.z=Ze;ba.buffer=Re;ba.divisor=Me;ba.normalized=Ye;ba.offset=Ve;ba.size=Se;ba.state=Te;ba.stride=Sd;ba.type=Xd;ba.w=Ue;ba.x=hf;ba.y=mf;ba.z=ef;E.buffer=jf;E.divisor=kf;E.normalized=lf;E.offset=rf;E.size=of;E.state=sf;E.stride=Cf;E.type=Df;E.w=Ne;E.x=Be;E.y=pf;E.z=qf;ma.buffer=Ef;ma.divisor=Hf;ma.normalized=Bf;ma.offset=Ff;ma.size=Gf;ma.state=xf;ma.stride=yf;ma.type=wf;ma.w=zf;ma.x=Af;ma.y=Jf;ma.z=Kf;H.buffer=Lf;H.divisor=Mf;H.normalized=
tf;H.offset=Rf;H.size=If;H.state=uf;H.stride=dg;H.type=Sf;H.w=Tf;H.x=qg;H.y=ff;H.z=bf;Z.buffer=Nf;Z.divisor=Of;Z.normalized=eg;Z.offset=fg;Z.size=gg;Z.state=hg;Z.stride=ig;Z.type=Wf;Z.w=Uf;Z.x=Xf;Z.y=Yf;Z.z=Zf;m.buffer=jg;m.divisor=rg;m.normalized=sg;m.offset=tg;m.size=ug;m.state=vg;m.stride=wg;m.type=xg;m.w=yg;m.x=zg;m.y=Ag;m.z=Bg;L.buffer=gf;L.divisor=cf;L.normalized=Pf;L.offset=Qf;L.size=kg;L.state=lg;L.stride=mg;L.type=ng;L.w=og;L.x=$f;L.y=Vf;L.z=ag;U.buffer=bg;U.divisor=cg;U.normalized=pg;U.offset=
Cg;U.size=Dg;U.state=Eg;U.stride=Fg;U.type=Gg;U.w=Hg;U.x=Ig;U.y=Jg;U.z=Kg;la.buffer=Lg;la.divisor=Mg;la.normalized=Ng;la.offset=Og;la.size=Pg;la.state=Qg;la.stride=Rg;la.type=Sg;la.w=Tg;la.x=Ug;la.y=Vg;la.z=Wg;Vb.buffer=Xg;Vb.divisor=Yg;Vb.normalized=Zg;Vb.offset=$g;Vb.size=ah;Vb.state=bh;Vb.stride=ch;Vb.type=dh;Vb.w=eh;Vb.x=fh;Vb.y=gh;Vb.z=hh;ub.buffer=ih;ub.divisor=jh;ub.normalized=kh;ub.offset=lh;ub.size=mh;ub.state=nh;ub.stride=oh;ub.type=ph;ub.w=qh;ub.x=rh;ub.y=sh;ub.z=th;db.vert=uh;db.frag=
vh;ea.dirty=!0}}},$1:function(a,c){var f,g,d,b,n,e,h,q,B,l,w,P,z,oa,C,p,u,J,I,v,x,k,da,Q,ba,E,ma,H,Z,m;f=a.attributes;g=a.current;d=a.framebuffer;b=a.gl;n=a.next;e=a.vao;h=n.blend_color;q=g.blend_color;B=n.blend_equation;l=g.blend_equation;w=n.blend_func;P=g.blend_func;z=n.colorMask;oa=g.colorMask;C=n.depth_range;p=g.depth_range;u=n.polygonOffset_offset;J=g.polygonOffset_offset;I=n.sample_coverage;v=g.sample_coverage;x=n.scissor_box;k=g.scissor_box;da=n.stencil_func;Q=g.stencil_func;ba=n.stencil_opBack;
E=g.stencil_opBack;ma=n.stencil_opFront;H=g.stencil_opFront;Z=n.viewport;m=g.viewport;return{poll:function(){var a,c,e,f,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La;g.dirty=!1;c=n.blend_enable;e=n.cull_enable;f=n.depth_enable;ub=n.dither;bc=n.polygonOffset_enable;na=n.sample_alpha;Oa=n.sample_enable;Y=n.scissor_enable;K=n.stencil_enable;N=n.cull_face;R=g.cull_face;pa=n.depth_func;O=g.depth_func;Yb=n.depth_mask;$a=g.depth_mask;T=n.frontFace;y=g.frontFace;ja=n.lineWidth;ca=g.lineWidth;Aa=n.stencil_mask;
La=g.stencil_mask;a=d.next;a!==d.cur&&(a?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null),d.cur=a);c!==g.blend_enable&&(c?b.enable(3042):b.disable(3042),g.blend_enable=c);e!==g.cull_enable&&(e?b.enable(2884):b.disable(2884),g.cull_enable=e);f!==g.depth_enable&&(f?b.enable(2929):b.disable(2929),g.depth_enable=f);ub!==g.dither&&(ub?b.enable(3024):b.disable(3024),g.dither=ub);bc!==g.polygonOffset_enable&&(bc?b.enable(32823):b.disable(32823),g.polygonOffset_enable=bc);na!==g.sample_alpha&&
(na?b.enable(32926):b.disable(32926),g.sample_alpha=na);Oa!==g.sample_enable&&(Oa?b.enable(32928):b.disable(32928),g.sample_enable=Oa);Y!==g.scissor_enable&&(Y?b.enable(3089):b.disable(3089),g.scissor_enable=Y);K!==g.stencil_enable&&(K?b.enable(2960):b.disable(2960),g.stencil_enable=K);if(h[0]!==q[0]||h[1]!==q[1]||h[2]!==q[2]||h[3]!==q[3])b.blendColor(h[0],h[1],h[2],h[3]),q[0]=h[0],q[1]=h[1],q[2]=h[2],q[3]=h[3];if(B[0]!==l[0]||B[1]!==l[1])b.blendEquationSeparate(B[0],B[1]),l[0]=B[0],l[1]=B[1];if(w[0]!==
P[0]||w[1]!==P[1]||w[2]!==P[2]||w[3]!==P[3])b.blendFuncSeparate(w[0],w[1],w[2],w[3]),P[0]=w[0],P[1]=w[1],P[2]=w[2],P[3]=w[3];if(z[0]!==oa[0]||z[1]!==oa[1]||z[2]!==oa[2]||z[3]!==oa[3])b.colorMask(z[0],z[1],z[2],z[3]),oa[0]=z[0],oa[1]=z[1],oa[2]=z[2],oa[3]=z[3];N!==R&&(b.cullFace(N),g.cull_face=N);pa!==O&&(b.depthFunc(pa),g.depth_func=pa);Yb!==$a&&(b.depthMask(Yb),g.depth_mask=Yb);if(C[0]!==p[0]||C[1]!==p[1])b.depthRange(C[0],C[1]),p[0]=C[0],p[1]=C[1];T!==y&&(b.frontFace(T),g.frontFace=T);ja!==ca&&
(b.lineWidth(ja),g.lineWidth=ja);if(u[0]!==J[0]||u[1]!==J[1])b.polygonOffset(u[0],u[1]),J[0]=u[0],J[1]=u[1];if(I[0]!==v[0]||I[1]!==v[1])b.sampleCoverage(I[0],I[1]),v[0]=I[0],v[1]=I[1];if(x[0]!==k[0]||x[1]!==k[1]||x[2]!==k[2]||x[3]!==k[3])b.scissor(x[0],x[1],x[2],x[3]),k[0]=x[0],k[1]=x[1],k[2]=x[2],k[3]=x[3];if(da[0]!==Q[0]||da[1]!==Q[1]||da[2]!==Q[2])b.stencilFunc(da[0],da[1],da[2]),Q[0]=da[0],Q[1]=da[1],Q[2]=da[2];Aa!==La&&(b.stencilMask(Aa),g.stencil_mask=Aa);if(ba[0]!==E[0]||ba[1]!==E[1]||ba[2]!==
E[2]||ba[3]!==E[3])b.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]),E[0]=ba[0],E[1]=ba[1],E[2]=ba[2],E[3]=ba[3];if(ma[0]!==H[0]||ma[1]!==H[1]||ma[2]!==H[2]||ma[3]!==H[3])b.stencilOpSeparate(ma[0],ma[1],ma[2],ma[3]),H[0]=ma[0],H[1]=ma[1],H[2]=ma[2],H[3]=ma[3];if(Z[0]!==m[0]||Z[1]!==m[1]||Z[2]!==m[2]||Z[3]!==m[3])b.viewport(Z[0],Z[1],Z[2],Z[3]),m[0]=Z[0],m[1]=Z[1],m[2]=Z[2],m[3]=Z[3]},refresh:function(){var a,U,la,Vb,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a;g.dirty=!1;U=n.blend_enable;la=n.cull_enable;Vb=n.depth_enable;
ub=n.dither;bc=n.polygonOffset_enable;na=n.sample_alpha;Oa=n.sample_enable;Y=n.scissor_enable;K=n.stencil_enable;N=n.cull_face;R=n.depth_func;pa=n.depth_mask;O=n.frontFace;Yb=n.lineWidth;$a=n.stencil_mask;(a=d.next)?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null);d.cur=a;a=f[0];a.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,a.x,a.y,
a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(0,a.divisor);a=f[1];a.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(1,a.divisor);a=f[2];a.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(2),
b.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(2,a.divisor);a=f[3];a.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(3,a.divisor);a=f[4];a.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,
a.offset)):(b.disableVertexAttribArray(4),b.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(4,a.divisor);a=f[5];a.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(5,a.divisor);a=f[6];a.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(6,
a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(6,a.divisor);a=f[7];a.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(7,a.divisor);a=f[8];a.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,
a.buffer.buffer),b.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(8,a.divisor);a=f[9];a.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(9,a.divisor);a=f[10];a.buffer?
(b.enableVertexAttribArray(10),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(10,a.divisor);a=f[11];a.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);
c.vertexAttribDivisorANGLE(11,a.divisor);a=f[12];a.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(12,a.divisor);a=f[13];a.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(13),
b.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(13,a.divisor);a=f[14];a.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(14,a.divisor);a=f[15];a.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(15,a.size,a.type,a.normalized,
a.stride,a.offset)):(b.disableVertexAttribArray(15),b.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(15,a.divisor);e.currentVAO=null;e.setVAO(e.targetVAO);U?b.enable(3042):b.disable(3042);g.blend_enable=U;la?b.enable(2884):b.disable(2884);g.cull_enable=la;Vb?b.enable(2929):b.disable(2929);g.depth_enable=Vb;ub?b.enable(3024):b.disable(3024);g.dither=ub;bc?b.enable(32823):b.disable(32823);g.polygonOffset_enable=bc;na?b.enable(32926):b.disable(32926);g.sample_alpha=na;Oa?
b.enable(32928):b.disable(32928);g.sample_enable=Oa;Y?b.enable(3089):b.disable(3089);g.scissor_enable=Y;K?b.enable(2960):b.disable(2960);g.stencil_enable=K;b.blendColor(h[0],h[1],h[2],h[3]);q[0]=h[0];q[1]=h[1];q[2]=h[2];q[3]=h[3];b.blendEquationSeparate(B[0],B[1]);l[0]=B[0];l[1]=B[1];b.blendFuncSeparate(w[0],w[1],w[2],w[3]);P[0]=w[0];P[1]=w[1];P[2]=w[2];P[3]=w[3];b.colorMask(z[0],z[1],z[2],z[3]);oa[0]=z[0];oa[1]=z[1];oa[2]=z[2];oa[3]=z[3];b.cullFace(N);g.cull_face=N;b.depthFunc(R);g.depth_func=R;
b.depthMask(pa);g.depth_mask=pa;b.depthRange(C[0],C[1]);p[0]=C[0];p[1]=C[1];b.frontFace(O);g.frontFace=O;b.lineWidth(Yb);g.lineWidth=Yb;b.polygonOffset(u[0],u[1]);J[0]=u[0];J[1]=u[1];b.sampleCoverage(I[0],I[1]);v[0]=I[0];v[1]=I[1];b.scissor(x[0],x[1],x[2],x[3]);k[0]=x[0];k[1]=x[1];k[2]=x[2];k[3]=x[3];b.stencilFunc(da[0],da[1],da[2]);Q[0]=da[0];Q[1]=da[1];Q[2]=da[2];b.stencilMask($a);g.stencil_mask=$a;b.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]);E[0]=ba[0];E[1]=ba[1];E[2]=ba[2];E[3]=ba[3];b.stencilOpSeparate(ma[0],
ma[1],ma[2],ma[3]);H[0]=ma[0];H[1]=ma[1];H[2]=ma[2];H[3]=ma[3];b.viewport(Z[0],Z[1],Z[2],Z[3]);m[0]=Z[0];m[1]=Z[1];m[2]=Z[2];m[3]=Z[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,c,f,g,d,b,n,e,h,q,B,l,w,P,z,p,C,S,u,J,I,v,x,k,da,Q,ba,E,ma,H,Z,m,L,U,la,Vb,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a){var T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa,Wb,oc,xc,sd,Fc,aa,M,ka,Da,vb,ab,ad,F,D,ia,ua,W,ha,qa,G,A,ea,
V,Ba,Ha,t,lc,db,ga,Hb,Ab;T=a.attributes;y=a.buffer;ja=a.context;ca=a.current;Aa=a.draw;La=a.elements;cc=a.extensions;Ga=a.framebuffer;X=a.gl;kb=a.isBufferArgs;fa=a.next;sa=a.shader;Wb=a.uniforms;oc=a.vao;xc=fa.blend_color;sd=ca.blend_color;Fc=fa.blend_equation;aa=ca.blend_equation;M=fa.blend_func;ka=ca.blend_func;Da=fa.colorMask;vb=ca.colorMask;ab=fa.depth_range;ad=ca.depth_range;F=fa.polygonOffset_offset;D=ca.polygonOffset_offset;ia=fa.sample_coverage;ua=ca.sample_coverage;W=fa.scissor_box;ha=ca.scissor_box;
qa=fa.stencil_func;G=ca.stencil_func;A=fa.stencil_opBack;ea=ca.stencil_opBack;V=fa.stencil_opFront;Ba=ca.stencil_opFront;Ha=fa.viewport;t=ca.viewport;lc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};db={};db.buffer=f;db.divisor=1;ga={};ga.buffer=g;ga.divisor=1;Hb={};Hb.buffer=d;Hb.divisor=1;Ab={};Ab.buffer=b;Ab.divisor=1;return{batch:function(a,b){var e,d,h,f,k,g;e=Ga.next;e!==Ga.cur&&(e?X.bindFramebuffer(36160,e.framebuffer):X.bindFramebuffer(36160,
null),Ga.cur=e);if(ca.dirty){var n,q,B,v,x,z,M,C,p,oa,u,S,J,Q,W,ba,da,Ha,I,sa,Nb,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Fc;n=fa.dither;n!==ca.dither&&(n?X.enable(3024):X.disable(3024),ca.dither=n);q=fa.depth_func;q!==ca.depth_func&&(X.depthFunc(q),ca.depth_func=q);B=ab[0];v=ab[1];if(B!==ad[0]||v!==ad[1])X.depthRange(B,v),ad[0]=B,ad[1]=v;x=fa.depth_mask;x!==ca.depth_mask&&(X.depthMask(x),ca.depth_mask=x);z=Da[0];M=Da[1];C=Da[2];p=Da[3];if(z!==vb[0]||M!==vb[1]||C!==vb[2]||p!==vb[3])X.colorMask(z,M,C,p),vb[0]=
z,vb[1]=M,vb[2]=C,vb[3]=p;oa=fa.cull_enable;oa!==ca.cull_enable&&(oa?X.enable(2884):X.disable(2884),ca.cull_enable=oa);u=fa.cull_face;u!==ca.cull_face&&(X.cullFace(u),ca.cull_face=u);S=fa.frontFace;S!==ca.frontFace&&(X.frontFace(S),ca.frontFace=S);J=fa.lineWidth;J!==ca.lineWidth&&(X.lineWidth(J),ca.lineWidth=J);Q=fa.polygonOffset_enable;Q!==ca.polygonOffset_enable&&(Q?X.enable(32823):X.disable(32823),ca.polygonOffset_enable=Q);W=F[0];ba=F[1];if(W!==D[0]||ba!==D[1])X.polygonOffset(W,ba),D[0]=W,D[1]=
ba;da=fa.sample_alpha;da!==ca.sample_alpha&&(da?X.enable(32926):X.disable(32926),ca.sample_alpha=da);Ha=fa.sample_enable;Ha!==ca.sample_enable&&(Ha?X.enable(32928):X.disable(32928),ca.sample_enable=Ha);I=ia[0];sa=ia[1];if(I!==ua[0]||sa!==ua[1])X.sampleCoverage(I,sa),ua[0]=I,ua[1]=sa;Nb=fa.stencil_enable;Nb!==ca.stencil_enable&&(Nb?X.enable(2960):X.disable(2960),ca.stencil_enable=Nb);ed=fa.stencil_mask;ed!==ca.stencil_mask&&(X.stencilMask(ed),ca.stencil_mask=ed);Nc=qa[0];sc=qa[1];bb=qa[2];if(Nc!==
G[0]||sc!==G[1]||bb!==G[2])X.stencilFunc(Nc,sc,bb),G[0]=Nc,G[1]=sc,G[2]=bb;Kc=V[0];Eb=V[1];rc=V[2];Sa=V[3];if(Kc!==Ba[0]||Eb!==Ba[1]||rc!==Ba[2]||Sa!==Ba[3])X.stencilOpSeparate(Kc,Eb,rc,Sa),Ba[0]=Kc,Ba[1]=Eb,Ba[2]=rc,Ba[3]=Sa;Lc=A[0];dc=A[1];pc=A[2];Fc=A[3];if(Lc!==ea[0]||dc!==ea[1]||pc!==ea[2]||Fc!==ea[3])X.stencilOpSeparate(Lc,dc,pc,Fc),ea[0]=Lc,ea[1]=dc,ea[2]=pc,ea[3]=Fc}X.blendColor(0,0,0,0);sd[0]=0;sd[1]=0;sd[2]=0;sd[3]=0;X.enable(3042);ca.blend_enable=!0;X.blendEquationSeparate(32774,32774);
aa[0]=32774;aa[1]=32774;X.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;X.disable(2929);ca.depth_enable=!1;X.enable(3089);ca.scissor_enable=!0;if(d=ca.profile)h=performance.now(),c.count+=b;X.useProgram(E.program);f=cc.angle_instanced_arrays;var qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa;oc.setVAO(null);qd=ub.location;Ac=T[qd];Ac.buffer||X.enableVertexAttribArray(qd);if(5126!==Ac.type||2!==Ac.size||Ac.buffer!==l||!1!==Ac.normalized||0!==Ac.offset||24!==Ac.stride)X.bindBuffer(34962,l.buffer),
X.vertexAttribPointer(qd,2,5126,!1,24,0),Ac.type=5126,Ac.size=2,Ac.buffer=l,Ac.normalized=!1,Ac.offset=0,Ac.stride=24;0!==Ac.divisor&&(f.vertexAttribDivisorANGLE(qd,0),Ac.divisor=0);Zb=na.location;Gc=T[Zb];Gc.buffer||X.enableVertexAttribArray(Zb);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==w||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)X.bindBuffer(34962,w.buffer),X.vertexAttribPointer(Zb,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=w,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&
(f.vertexAttribDivisorANGLE(Zb,0),Gc.divisor=0);Sc=U.location;Ma=T[Sc];Ma.buffer||X.enableVertexAttribArray(Sc);if(5126!==Ma.type||2!==Ma.size||Ma.buffer!==P||!1!==Ma.normalized||16!==Ma.offset||24!==Ma.stride)X.bindBuffer(34962,P.buffer),X.vertexAttribPointer(Sc,2,5126,!1,24,16),Ma.type=5126,Ma.size=2,Ma.buffer=P,Ma.normalized=!1,Ma.offset=16,Ma.stride=24;0!==Ma.divisor&&(f.vertexAttribDivisorANGLE(Sc,0),Ma.divisor=0);(Fb=Aa.elements)?X.bindBuffer(34963,Fb.buffer.buffer):oc.currentVAO&&(Fb=La.getElements(oc.currentVAO.elements))&&
X.bindBuffer(34963,Fb.buffer.buffer);Wa=Aa.offset;for(k=0;k<b;++k){g=a[k];var ra,td,Ib,Ta,qc,eb,uc,Rb,Wb,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,xc,$b,Ka,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,nf,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,df,ie,je,ue,me,Id,Gd,dd,Ec;ra=g.viewport;td=ra.x|0;Ib=ra.y|0;Ta="width"in ra?ra.width|0:ja.framebufferWidth-
td;qc="height"in ra?ra.height|0:ja.framebufferHeight-Ib;eb=ja.viewportWidth;ja.viewportWidth=Ta;uc=ja.viewportHeight;ja.viewportHeight=qc;X.viewport(td,Ib,Ta,qc);t[0]=td;t[1]=Ib;t[2]=Ta;t[3]=qc;Rb=g.viewport;Wb=Rb.x|0;kc=Rb.y|0;Sb="width"in Rb?Rb.width|0:ja.framebufferWidth-Wb;r="height"in Rb?Rb.height|0:ja.framebufferHeight-kc;X.scissor(Wb,kc,Sb,r);ha[0]=Wb;ha[1]=kc;ha[2]=Sb;ha[3]=r;Tb=ma.call(this,ja,g,k);Hb.offset=Tb;Na=!1;pb=null;wb=0;ib=!1;xc=Pa=0;$b=1;Ka=0;fb=5126;lb=fc=Hc=mc=0;kb(Hb)?(Na=!0,
pb=y.createStream(34962,Hb),fb=pb.dtype):(pb=y.getBuffer(Hb))?fb=pb.dtype:"constant"in Hb?($b=2,"number"===typeof Hb.constant?(Hc=Hb.constant,fc=lb=mc=0):(Hc=0<Hb.constant.length?Hb.constant[0]:0,fc=1<Hb.constant.length?Hb.constant[1]:0,lb=2<Hb.constant.length?Hb.constant[2]:0,mc=3<Hb.constant.length?Hb.constant[3]:0)):(pb=kb(Hb.buffer)?y.createStream(34962,Hb.buffer):y.getBuffer(Hb.buffer),fb="type"in Hb?lc[Hb.type]:pb.dtype,ib=!!Hb.normalized,xc=Hb.size|0,Pa=Hb.offset|0,Ka=Hb.stride|0,wb=Hb.divisor|
0);mb=K.location;ta=T[mb];if(1===$b){ta.buffer||X.enableVertexAttribArray(mb);qb=xc||2;if(ta.type!==fb||ta.size!==qb||ta.buffer!==pb||ta.normalized!==ib||ta.offset!==Pa||ta.stride!==Ka)X.bindBuffer(34962,pb.buffer),X.vertexAttribPointer(mb,qb,fb,ib,Ka,Pa),ta.type=fb,ta.size=qb,ta.buffer=pb,ta.normalized=ib,ta.offset=Pa,ta.stride=Ka;ta.divisor!==wb&&(f.vertexAttribDivisorANGLE(mb,wb),ta.divisor=wb)}else if(ta.buffer&&(X.disableVertexAttribArray(mb),ta.buffer=null),ta.x!==Hc||ta.y!==fc||ta.z!==lb||
ta.w!==mc)X.vertexAttrib4f(mb,Hc,fc,lb,mc),ta.x=Hc,ta.y=fc,ta.z=lb,ta.w=mc;va=H.call(this,ja,g,k);Ab.offset=va;Ua=!1;cb=null;ya=0;gb=!1;Cb=Ia=0;Bb=1;Ra=0;Mc=5126;wa=Ub=Za=Jb=0;kb(Ab)?(Ua=!0,cb=y.createStream(34962,Ab),Mc=cb.dtype):(cb=y.getBuffer(Ab))?Mc=cb.dtype:"constant"in Ab?(Bb=2,"number"===typeof Ab.constant?(Za=Ab.constant,Ub=wa=Jb=0):(Za=0<Ab.constant.length?Ab.constant[0]:0,Ub=1<Ab.constant.length?Ab.constant[1]:0,wa=2<Ab.constant.length?Ab.constant[2]:0,Jb=3<Ab.constant.length?Ab.constant[3]:
0)):(cb=kb(Ab.buffer)?y.createStream(34962,Ab.buffer):y.getBuffer(Ab.buffer),Mc="type"in Ab?lc[Ab.type]:cb.dtype,gb=!!Ab.normalized,Cb=Ab.size|0,Ia=Ab.offset|0,Ra=Ab.stride|0,ya=Ab.divisor|0);he=N.location;Ja=T[he];if(1===Bb){Ja.buffer||X.enableVertexAttribArray(he);Ob=Cb||2;if(Ja.type!==Mc||Ja.size!==Ob||Ja.buffer!==cb||Ja.normalized!==gb||Ja.offset!==Ia||Ja.stride!==Ra)X.bindBuffer(34962,cb.buffer),X.vertexAttribPointer(he,Ob,Mc,gb,Ra,Ia),Ja.type=Mc,Ja.size=Ob,Ja.buffer=cb,Ja.normalized=gb,Ja.offset=
Ia,Ja.stride=Ra;Ja.divisor!==ya&&(f.vertexAttribDivisorANGLE(he,ya),Ja.divisor=ya)}else if(Ja.buffer&&(X.disableVertexAttribArray(he),Ja.buffer=null),Ja.x!==Za||Ja.y!==Ub||Ja.z!==wa||Ja.w!==Jb)X.vertexAttrib4f(he,Za,Ub,wa,Jb),Ja.x=Za,Ja.y=Ub,Ja.z=wa,Ja.w=Jb;hb=Z.call(this,ja,g,k);ga.offset=hb;jb=!1;xa=null;gc=0;Ca=!1;sb=rb=0;Xa=1;Ya=0;nc=5126;Lb=Va=vc=Ic=0;kb(ga)?(jb=!0,xa=y.createStream(34962,ga),nc=xa.dtype):(xa=y.getBuffer(ga))?nc=xa.dtype:"constant"in ga?(Xa=2,"number"===typeof ga.constant?(vc=
ga.constant,Va=Lb=Ic=0):(vc=0<ga.constant.length?ga.constant[0]:0,Va=1<ga.constant.length?ga.constant[1]:0,Lb=2<ga.constant.length?ga.constant[2]:0,Ic=3<ga.constant.length?ga.constant[3]:0)):(xa=kb(ga.buffer)?y.createStream(34962,ga.buffer):y.getBuffer(ga.buffer),nc="type"in ga?lc[ga.type]:xa.dtype,Ca=!!ga.normalized,sb=ga.size|0,rb=ga.offset|0,Ya=ga.stride|0,gc=ga.divisor|0);Zc=bc.location;Ea=T[Zc];if(1===Xa){Ea.buffer||X.enableVertexAttribArray(Zc);yc=sb||4;if(Ea.type!==nc||Ea.size!==yc||Ea.buffer!==
xa||Ea.normalized!==Ca||Ea.offset!==rb||Ea.stride!==Ya)X.bindBuffer(34962,xa.buffer),X.vertexAttribPointer(Zc,yc,nc,Ca,Ya,rb),Ea.type=nc,Ea.size=yc,Ea.buffer=xa,Ea.normalized=Ca,Ea.offset=rb,Ea.stride=Ya;Ea.divisor!==gc&&(f.vertexAttribDivisorANGLE(Zc,gc),Ea.divisor=gc)}else if(Ea.buffer&&(X.disableVertexAttribArray(Zc),Ea.buffer=null),Ea.x!==vc||Ea.y!==Va||Ea.z!==Lb||Ea.w!==Ic)X.vertexAttrib4f(Zc,vc,Va,Lb,Ic),Ea.x=vc,Ea.y=Va,Ea.z=Lb,Ea.w=Ic;Qa=m.call(this,ja,g,k);db.offset=Qa;za=!1;nb=null;xb=0;
Db=!1;wc=tb=0;yb=1;id=0;tc=5126;fd=ld=Oc=Md=0;kb(db)?(za=!0,nb=y.createStream(34962,db),tc=nb.dtype):(nb=y.getBuffer(db))?tc=nb.dtype:"constant"in db?(yb=2,"number"===typeof db.constant?(Oc=db.constant,ld=fd=Md=0):(Oc=0<db.constant.length?db.constant[0]:0,ld=1<db.constant.length?db.constant[1]:0,fd=2<db.constant.length?db.constant[2]:0,Md=3<db.constant.length?db.constant[3]:0)):(nb=kb(db.buffer)?y.createStream(34962,db.buffer):y.getBuffer(db.buffer),tc="type"in db?lc[db.type]:nb.dtype,Db=!!db.normalized,
wc=db.size|0,tb=db.offset|0,id=db.stride|0,xb=db.divisor|0);Xb=Vb.location;ec=T[Xb];if(1===yb){ec.buffer||X.enableVertexAttribArray(Xb);Pb=wc||4;if(ec.type!==tc||ec.size!==Pb||ec.buffer!==nb||ec.normalized!==Db||ec.offset!==tb||ec.stride!==id)X.bindBuffer(34962,nb.buffer),X.vertexAttribPointer(Xb,Pb,tc,Db,id,tb),ec.type=tc,ec.size=Pb,ec.buffer=nb,ec.normalized=Db,ec.offset=tb,ec.stride=id;ec.divisor!==xb&&(f.vertexAttribDivisorANGLE(Xb,xb),ec.divisor=xb)}else if(ec.buffer&&(X.disableVertexAttribArray(Xb),
ec.buffer=null),ec.x!==Oc||ec.y!==ld||ec.z!==fd||ec.w!==Md)X.vertexAttrib4f(Xb,Oc,ld,fd,Md),ec.x=Oc,ec.y=ld,ec.z=fd,ec.w=Md;Fa=L.call(this,ja,g,k);ac=Fa[0];zb=Fa[1];Qb=Fa[2];jc=Fa[3];k&&ob===ac&&Mb===zb&&hc===Qb&&nf===jc||(ob=ac,Mb=zb,hc=Qb,nf=jc,X.uniform4f($a.location,ac,zb,Qb,jc));Bc=g.lineWidth;k&&Cc===Bc||(Cc=Bc,X.uniform1f(Oa.location,Bc));Dc=g.capSize;k&&Pc===Dc||(Pc=Dc,X.uniform1f(la.location,Dc));$c=g.scale;Tc=$c[0];Kb=$c[1];k&&Qc===Tc&&Gb===Kb||(Qc=Tc,Gb=Kb,X.uniform2f(R.location,Tc,Kb));
Rc=g.scaleFract;Jc=Rc[0];ic=Rc[1];k&&Uc===Jc&&Xc===ic||(Uc=Jc,Xc=ic,X.uniform2f(pa.location,Jc,ic));wd=g.translate;gd=wd[0];Yc=wd[1];k&&jd===gd&&df===Yc||(jd=gd,df=Yc,X.uniform2f(O.location,gd,Yc));ie=g.translateFract;je=ie[0];me=ie[1];k&&ue===je&&Id===me||(ue=je,Id=me,X.uniform2f(Yb.location,je,me));Gd=g.opacity;k&&dd===Gd||(dd=Gd,X.uniform1f(Y.location,Gd));Ec=g.count;0<Ec?Fb?f.drawElementsInstancedANGLE(4,36,Fb.type,Wa<<(Fb.type-5121>>1),Ec):f.drawArraysInstancedANGLE(4,Wa,36,Ec):0>Ec&&(Fb?X.drawElements(4,
36,Fb.type,Wa<<(Fb.type-5121>>1)):X.drawArrays(4,Wa,36));ja.viewportWidth=eb;ja.viewportHeight=uc;Na&&y.destroyStream(pb);Ua&&y.destroyStream(cb);jb&&y.destroyStream(xa);za&&y.destroyStream(nb)}ca.dirty=!0;oc.setVAO(null);d&&(c.cpuTime+=performance.now()-h)},draw:function(a){var b,d,f,k,g,m,v,x,M,C,p,E,oa,u,H,S,J,L,Q,W,ba,da,Ha,Z,ma,I,sa,Nb,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Fc,Wb,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,xc,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,Ka,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,
gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc;b=Ga.next;b!==Ga.cur&&(b?X.bindFramebuffer(36160,b.framebuffer):X.bindFramebuffer(36160,null),Ga.cur=b);if(ca.dirty){var Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob;Ca=fa.dither;Ca!==ca.dither&&(Ca?X.enable(3024):X.disable(3024),ca.dither=Ca);rb=fa.depth_func;rb!==ca.depth_func&&(X.depthFunc(rb),ca.depth_func=rb);sb=ab[0];Xa=ab[1];if(sb!==ad[0]||Xa!==ad[1])X.depthRange(sb,Xa),ad[0]=sb,ad[1]=Xa;
Ya=fa.depth_mask;Ya!==ca.depth_mask&&(X.depthMask(Ya),ca.depth_mask=Ya);nc=Da[0];Ic=Da[1];vc=Da[2];Va=Da[3];if(nc!==vb[0]||Ic!==vb[1]||vc!==vb[2]||Va!==vb[3])X.colorMask(nc,Ic,vc,Va),vb[0]=nc,vb[1]=Ic,vb[2]=vc,vb[3]=Va;Lb=fa.cull_enable;Lb!==ca.cull_enable&&(Lb?X.enable(2884):X.disable(2884),ca.cull_enable=Lb);Zc=fa.cull_face;Zc!==ca.cull_face&&(X.cullFace(Zc),ca.cull_face=Zc);Ea=fa.frontFace;Ea!==ca.frontFace&&(X.frontFace(Ea),ca.frontFace=Ea);yc=fa.lineWidth;yc!==ca.lineWidth&&(X.lineWidth(yc),
ca.lineWidth=yc);Qa=fa.polygonOffset_enable;Qa!==ca.polygonOffset_enable&&(Qa?X.enable(32823):X.disable(32823),ca.polygonOffset_enable=Qa);za=F[0];nb=F[1];if(za!==D[0]||nb!==D[1])X.polygonOffset(za,nb),D[0]=za,D[1]=nb;xb=fa.sample_alpha;xb!==ca.sample_alpha&&(xb?X.enable(32926):X.disable(32926),ca.sample_alpha=xb);Db=fa.sample_enable;Db!==ca.sample_enable&&(Db?X.enable(32928):X.disable(32928),ca.sample_enable=Db);tb=ia[0];wc=ia[1];if(tb!==ua[0]||wc!==ua[1])X.sampleCoverage(tb,wc),ua[0]=tb,ua[1]=wc;
yb=fa.stencil_enable;yb!==ca.stencil_enable&&(yb?X.enable(2960):X.disable(2960),ca.stencil_enable=yb);id=fa.stencil_mask;id!==ca.stencil_mask&&(X.stencilMask(id),ca.stencil_mask=id);tc=qa[0];Md=qa[1];Oc=qa[2];if(tc!==G[0]||Md!==G[1]||Oc!==G[2])X.stencilFunc(tc,Md,Oc),G[0]=tc,G[1]=Md,G[2]=Oc;ld=V[0];fd=V[1];Xb=V[2];ec=V[3];if(ld!==Ba[0]||fd!==Ba[1]||Xb!==Ba[2]||ec!==Ba[3])X.stencilOpSeparate(ld,fd,Xb,ec),Ba[0]=ld,Ba[1]=fd,Ba[2]=Xb,Ba[3]=ec;Pb=A[0];Fa=A[1];ac=A[2];ob=A[3];if(Pb!==ea[0]||Fa!==ea[1]||
ac!==ea[2]||ob!==ea[3])X.stencilOpSeparate(Pb,Fa,ac,ob),ea[0]=Pb,ea[1]=Fa,ea[2]=ac,ea[3]=ob}d=a.viewport;f=d.x|0;k=d.y|0;g="width"in d?d.width|0:ja.framebufferWidth-f;m="height"in d?d.height|0:ja.framebufferHeight-k;v=ja.viewportWidth;ja.viewportWidth=g;x=ja.viewportHeight;ja.viewportHeight=m;X.viewport(f,k,g,m);t[0]=f;t[1]=k;t[2]=g;t[3]=m;X.blendColor(0,0,0,0);sd[0]=0;sd[1]=0;sd[2]=0;sd[3]=0;X.enable(3042);ca.blend_enable=!0;X.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;X.blendFuncSeparate(770,
771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;X.disable(2929);ca.depth_enable=!1;M=a.viewport;C=M.x|0;p=M.y|0;E="width"in M?M.width|0:ja.framebufferWidth-C;oa="height"in M?M.height|0:ja.framebufferHeight-p;X.scissor(C,p,E,oa);ha[0]=C;ha[1]=p;ha[2]=E;ha[3]=oa;X.enable(3089);ca.scissor_enable=!0;if(u=ca.profile)H=performance.now(),c.count++;X.useProgram(n.program);S=cc.angle_instanced_arrays;oc.setVAO(null);J=e.call(this,ja,a,0);Hb.offset=J;L=!1;Q=null;W=0;ba=!1;Ha=da=0;Z=1;ma=0;I=5126;Nc=ed=Nb=
sa=0;kb(Hb)?(L=!0,Q=y.createStream(34962,Hb),I=Q.dtype):(Q=y.getBuffer(Hb))?I=Q.dtype:"constant"in Hb?(Z=2,"number"===typeof Hb.constant?(Nb=Hb.constant,ed=Nc=sa=0):(Nb=0<Hb.constant.length?Hb.constant[0]:0,ed=1<Hb.constant.length?Hb.constant[1]:0,Nc=2<Hb.constant.length?Hb.constant[2]:0,sa=3<Hb.constant.length?Hb.constant[3]:0)):(Q=kb(Hb.buffer)?y.createStream(34962,Hb.buffer):y.getBuffer(Hb.buffer),I="type"in Hb?lc[Hb.type]:Q.dtype,ba=!!Hb.normalized,Ha=Hb.size|0,da=Hb.offset|0,ma=Hb.stride|0,W=
Hb.divisor|0);sc=K.location;bb=T[sc];if(1===Z){bb.buffer||X.enableVertexAttribArray(sc);Kc=Ha||2;if(bb.type!==I||bb.size!==Kc||bb.buffer!==Q||bb.normalized!==ba||bb.offset!==da||bb.stride!==ma)X.bindBuffer(34962,Q.buffer),X.vertexAttribPointer(sc,Kc,I,ba,ma,da),bb.type=I,bb.size=Kc,bb.buffer=Q,bb.normalized=ba,bb.offset=da,bb.stride=ma;bb.divisor!==W&&(S.vertexAttribDivisorANGLE(sc,W),bb.divisor=W)}else if(bb.buffer&&(X.disableVertexAttribArray(sc),bb.buffer=null),bb.x!==Nb||bb.y!==ed||bb.z!==Nc||
bb.w!==sa)X.vertexAttrib4f(sc,Nb,ed,Nc,sa),bb.x=Nb,bb.y=ed,bb.z=Nc,bb.w=sa;Eb=h.call(this,ja,a,0);Ab.offset=Eb;rc=!1;Sa=null;Lc=0;dc=!1;Fc=pc=0;Wb=1;Ac=0;Zb=5126;Fb=Ma=Sc=Gc=0;kb(Ab)?(rc=!0,Sa=y.createStream(34962,Ab),Zb=Sa.dtype):(Sa=y.getBuffer(Ab))?Zb=Sa.dtype:"constant"in Ab?(Wb=2,"number"===typeof Ab.constant?(Sc=Ab.constant,Ma=Fb=Gc=0):(Sc=0<Ab.constant.length?Ab.constant[0]:0,Ma=1<Ab.constant.length?Ab.constant[1]:0,Fb=2<Ab.constant.length?Ab.constant[2]:0,Gc=3<Ab.constant.length?Ab.constant[3]:
0)):(Sa=kb(Ab.buffer)?y.createStream(34962,Ab.buffer):y.getBuffer(Ab.buffer),Zb="type"in Ab?lc[Ab.type]:Sa.dtype,dc=!!Ab.normalized,Fc=Ab.size|0,pc=Ab.offset|0,Ac=Ab.stride|0,Lc=Ab.divisor|0);Wa=N.location;ra=T[Wa];if(1===Wb){ra.buffer||X.enableVertexAttribArray(Wa);td=Fc||2;if(ra.type!==Zb||ra.size!==td||ra.buffer!==Sa||ra.normalized!==dc||ra.offset!==pc||ra.stride!==Ac)X.bindBuffer(34962,Sa.buffer),X.vertexAttribPointer(Wa,td,Zb,dc,Ac,pc),ra.type=Zb,ra.size=td,ra.buffer=Sa,ra.normalized=dc,ra.offset=
pc,ra.stride=Ac;ra.divisor!==Lc&&(S.vertexAttribDivisorANGLE(Wa,Lc),ra.divisor=Lc)}else if(ra.buffer&&(X.disableVertexAttribArray(Wa),ra.buffer=null),ra.x!==Sc||ra.y!==Ma||ra.z!==Fb||ra.w!==Gc)X.vertexAttrib4f(Wa,Sc,Ma,Fb,Gc),ra.x=Sc,ra.y=Ma,ra.z=Fb,ra.w=Gc;Ib=q.call(this,ja,a,0);ga.offset=Ib;Ta=!1;qc=null;eb=0;uc=!1;xc=Rb=0;kc=1;Sb=0;r=5126;wb=pb=Na=Tb=0;kb(ga)?(Ta=!0,qc=y.createStream(34962,ga),r=qc.dtype):(qc=y.getBuffer(ga))?r=qc.dtype:"constant"in ga?(kc=2,"number"===typeof ga.constant?(Na=ga.constant,
pb=wb=Tb=0):(Na=0<ga.constant.length?ga.constant[0]:0,pb=1<ga.constant.length?ga.constant[1]:0,wb=2<ga.constant.length?ga.constant[2]:0,Tb=3<ga.constant.length?ga.constant[3]:0)):(qc=kb(ga.buffer)?y.createStream(34962,ga.buffer):y.getBuffer(ga.buffer),r="type"in ga?lc[ga.type]:qc.dtype,uc=!!ga.normalized,xc=ga.size|0,Rb=ga.offset|0,Sb=ga.stride|0,eb=ga.divisor|0);ib=bc.location;Pa=T[ib];if(1===kc){Pa.buffer||X.enableVertexAttribArray(ib);Ka=xc||4;if(Pa.type!==r||Pa.size!==Ka||Pa.buffer!==qc||Pa.normalized!==
uc||Pa.offset!==Rb||Pa.stride!==Sb)X.bindBuffer(34962,qc.buffer),X.vertexAttribPointer(ib,Ka,r,uc,Sb,Rb),Pa.type=r,Pa.size=Ka,Pa.buffer=qc,Pa.normalized=uc,Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==eb&&(S.vertexAttribDivisorANGLE(ib,eb),Pa.divisor=eb)}else if(Pa.buffer&&(X.disableVertexAttribArray(ib),Pa.buffer=null),Pa.x!==Na||Pa.y!==pb||Pa.z!==wb||Pa.w!==Tb)X.vertexAttrib4f(ib,Na,pb,wb,Tb),Pa.x=Na,Pa.y=pb,Pa.z=wb,Pa.w=Tb;$b=B.call(this,ja,a,0);db.offset=$b;Dd=!1;fb=null;mc=0;Hc=!1;lb=fc=0;mb=1;ta=
0;qb=5126;ya=cb=Ua=va=0;kb(db)?(Dd=!0,fb=y.createStream(34962,db),qb=fb.dtype):(fb=y.getBuffer(db))?qb=fb.dtype:"constant"in db?(mb=2,"number"===typeof db.constant?(Ua=db.constant,cb=ya=va=0):(Ua=0<db.constant.length?db.constant[0]:0,cb=1<db.constant.length?db.constant[1]:0,ya=2<db.constant.length?db.constant[2]:0,va=3<db.constant.length?db.constant[3]:0)):(fb=kb(db.buffer)?y.createStream(34962,db.buffer):y.getBuffer(db.buffer),qb="type"in db?lc[db.type]:fb.dtype,Hc=!!db.normalized,lb=db.size|0,fc=
db.offset|0,ta=db.stride|0,mc=db.divisor|0);gb=Vb.location;Ia=T[gb];if(1===mb){Ia.buffer||X.enableVertexAttribArray(gb);Cb=lb||4;if(Ia.type!==qb||Ia.size!==Cb||Ia.buffer!==fb||Ia.normalized!==Hc||Ia.offset!==fc||Ia.stride!==ta)X.bindBuffer(34962,fb.buffer),X.vertexAttribPointer(gb,Cb,qb,Hc,ta,fc),Ia.type=qb,Ia.size=Cb,Ia.buffer=fb,Ia.normalized=Hc,Ia.offset=fc,Ia.stride=ta;Ia.divisor!==mc&&(S.vertexAttribDivisorANGLE(gb,mc),Ia.divisor=mc)}else if(Ia.buffer&&(X.disableVertexAttribArray(gb),Ia.buffer=
null),Ia.x!==Ua||Ia.y!==cb||Ia.z!==ya||Ia.w!==va)X.vertexAttrib4f(gb,Ua,cb,ya,va),Ia.x=Ua,Ia.y=cb,Ia.z=ya,Ia.w=va;Bb=ub.location;Ra=T[Bb];Ra.buffer||X.enableVertexAttribArray(Bb);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==l||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)X.bindBuffer(34962,l.buffer),X.vertexAttribPointer(Bb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=l,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(S.vertexAttribDivisorANGLE(Bb,0),Ra.divisor=0);Mc=na.location;
Jb=T[Mc];Jb.buffer||X.enableVertexAttribArray(Mc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==w||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)X.bindBuffer(34962,w.buffer),X.vertexAttribPointer(Mc,2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=w,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(S.vertexAttribDivisorANGLE(Mc,0),Jb.divisor=0);Za=U.location;Ub=T[Za];Ub.buffer||X.enableVertexAttribArray(Za);if(5126!==Ub.type||2!==Ub.size||Ub.buffer!==P||!1!==Ub.normalized||16!==Ub.offset||
24!==Ub.stride)X.bindBuffer(34962,P.buffer),X.vertexAttribPointer(Za,2,5126,!1,24,16),Ub.type=5126,Ub.size=2,Ub.buffer=P,Ub.normalized=!1,Ub.offset=16,Ub.stride=24;0!==Ub.divisor&&(S.vertexAttribDivisorANGLE(Za,0),Ub.divisor=0);wa=z.call(this,ja,a,0);X.uniform4f($a.location,wa[0],wa[1],wa[2],wa[3]);X.uniform1f(Oa.location,a.lineWidth);X.uniform1f(la.location,a.capSize);he=a.scale;X.uniform2f(R.location,he[0],he[1]);Ja=a.scaleFract;X.uniform2f(pa.location,Ja[0],Ja[1]);Ob=a.translate;X.uniform2f(O.location,
Ob[0],Ob[1]);hb=a.translateFract;X.uniform2f(Yb.location,hb[0],hb[1]);X.uniform1f(Y.location,a.opacity);(jb=Aa.elements)?X.bindBuffer(34963,jb.buffer.buffer):oc.currentVAO&&(jb=La.getElements(oc.currentVAO.elements))&&X.bindBuffer(34963,jb.buffer.buffer);xa=Aa.offset;gc=a.count;0<gc?jb?S.drawElementsInstancedANGLE(4,36,jb.type,xa<<(jb.type-5121>>1),gc):S.drawArraysInstancedANGLE(4,xa,36,gc):0>gc&&(jb?X.drawElements(4,36,jb.type,xa<<(jb.type-5121>>1)):X.drawArrays(4,xa,36));ca.dirty=!0;oc.setVAO(null);
ja.viewportWidth=v;ja.viewportHeight=x;u&&(c.cpuTime+=performance.now()-H);L&&y.destroyStream(Q);rc&&y.destroyStream(Sa);Ta&&y.destroyStream(qc);Dd&&y.destroyStream(fb)},scope:function(a,b,e){var d,h,f,g,n,m,q,t,B,A,z,D,E,G,F,ea,aa,H,N,L,V,K,O,R,T,X,ha,ka,Y,U,ia,Ba,Z,ua,oc,qa,Da,ma,pa,la,Zb,Gc,Sc,Ma,Fb,Wa,ra,sd,Ib,Ta,na,eb,vb,ab,$a,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,Oa,$b,La,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,ub,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,
nb,xb,Db,tb,wc,yb,Yb,tc,Ga,Oc,ad,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,cc,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,Vb,bc,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,vf,ze,oe,Pe,Qe,Le,re,Ce,Fe,Ge,He,De,Jd;d=a.viewport;h=d.x|0;f=d.y|0;g="width"in d?d.width|0:ja.framebufferWidth-h;n="height"in d?d.height|0:ja.framebufferHeight-f;m=ja.viewportWidth;ja.viewportWidth=g;q=ja.viewportHeight;ja.viewportHeight=n;t=Ha[0];Ha[0]=h;B=Ha[1];Ha[1]=f;A=Ha[2];
Ha[2]=g;z=Ha[3];Ha[3]=n;D=xc[0];xc[0]=0;E=xc[1];xc[1]=0;G=xc[2];xc[2]=0;F=xc[3];xc[3]=0;ea=fa.blend_enable;fa.blend_enable=!0;aa=Fc[0];Fc[0]=32774;H=Fc[1];Fc[1]=32774;N=M[0];M[0]=770;L=M[1];M[1]=771;V=M[2];M[2]=773;K=M[3];M[3]=1;O=fa.depth_enable;fa.depth_enable=!1;R=a.viewport;T=R.x|0;X=R.y|0;ha="width"in R?R.width|0:ja.framebufferWidth-T;ka="height"in R?R.height|0:ja.framebufferHeight-X;Y=W[0];W[0]=T;U=W[1];W[1]=X;ia=W[2];W[2]=ha;Ba=W[3];W[3]=ka;Z=fa.scissor_enable;fa.scissor_enable=!0;if(ua=ca.profile)oc=
performance.now(),c.count++;qa=Aa.count;Aa.count=36;Da=a.count;ma=Aa.instances;Aa.instances=Da;pa=Aa.primitive;Aa.primitive=4;la=a.capSize;Zb=Wb[5];Wb[5]=la;Gc=a.lineWidth;Sc=Wb[4];Wb[4]=Gc;Ma=a.opacity;Fb=Wb[10];Wb[10]=Ma;Wa=a.range;ra=Wb[18];Wb[18]=Wa;sd=a.scale;Ib=Wb[6];Wb[6]=sd;Ta=a.scaleFract;na=Wb[7];Wb[7]=Ta;eb=a.translate;vb=Wb[8];Wb[8]=eb;ab=a.translateFract;$a=Wb[9];Wb[9]=ab;kc=p.call(this,ja,a,e);Sb=Wb[3];Wb[3]=kc;r=C.buffer;C.buffer=P;Tb=C.divisor;C.divisor=0;Na=C.normalized;C.normalized=
!1;pb=C.offset;C.offset=16;wb=C.size;C.size=0;ib=C.state;C.state=1;Pa=C.stride;C.stride=24;Oa=C.type;C.type=5126;$b=C.w;C.w=0;La=C.x;C.x=0;fb=C.y;C.y=0;mc=C.z;C.z=0;Hc=S.call(this,ja,a,e);db.offset=Hc;fc=!1;lb=null;mb=0;ta=!1;va=qb=0;Ua=1;cb=0;ya=5126;Bb=Cb=Ia=gb=0;kb(db)?(fc=!0,lb=y.createStream(34962,db),ya=lb.dtype):(lb=y.getBuffer(db))?ya=lb.dtype:"constant"in db?(Ua=2,"number"===typeof db.constant?(Ia=db.constant,Cb=Bb=gb=0):(Ia=0<db.constant.length?db.constant[0]:0,Cb=1<db.constant.length?db.constant[1]:
0,Bb=2<db.constant.length?db.constant[2]:0,gb=3<db.constant.length?db.constant[3]:0)):(lb=kb(db.buffer)?y.createStream(34962,db.buffer):y.getBuffer(db.buffer),ya="type"in db?lc[db.type]:lb.dtype,ta=!!db.normalized,va=db.size|0,qb=db.offset|0,cb=db.stride|0,mb=db.divisor|0);Ra=u.buffer;u.buffer=lb;Mc=u.divisor;u.divisor=mb;Jb=u.normalized;u.normalized=ta;Za=u.offset;u.offset=qb;Ub=u.size;u.size=va;wa=u.state;u.state=Ua;ub=u.stride;u.stride=cb;Ja=u.type;u.type=ya;Ob=u.w;u.w=gb;hb=u.x;u.x=Ia;jb=u.y;
u.y=Cb;xa=u.z;u.z=Bb;gc=J.buffer;J.buffer=l;Ca=J.divisor;J.divisor=0;rb=J.normalized;J.normalized=!1;sb=J.offset;J.offset=0;Xa=J.size;J.size=0;Ya=J.state;J.state=1;nc=J.stride;J.stride=24;Ic=J.type;J.type=5126;vc=J.w;J.w=0;Va=J.x;J.x=0;Lb=J.y;J.y=0;Zc=J.z;J.z=0;Ea=I.call(this,ja,a,e);ga.offset=Ea;yc=!1;Qa=null;za=0;nb=!1;Db=xb=0;tb=1;wc=0;yb=5126;Oc=Ga=tc=Yb=0;kb(ga)?(yc=!0,Qa=y.createStream(34962,ga),yb=Qa.dtype):(Qa=y.getBuffer(ga))?yb=Qa.dtype:"constant"in ga?(tb=2,"number"===typeof ga.constant?
(tc=ga.constant,Ga=Oc=Yb=0):(tc=0<ga.constant.length?ga.constant[0]:0,Ga=1<ga.constant.length?ga.constant[1]:0,Oc=2<ga.constant.length?ga.constant[2]:0,Yb=3<ga.constant.length?ga.constant[3]:0)):(Qa=kb(ga.buffer)?y.createStream(34962,ga.buffer):y.getBuffer(ga.buffer),yb="type"in ga?lc[ga.type]:Qa.dtype,nb=!!ga.normalized,Db=ga.size|0,xb=ga.offset|0,wc=ga.stride|0,za=ga.divisor|0);ad=v.buffer;v.buffer=Qa;fd=v.divisor;v.divisor=za;Xb=v.normalized;v.normalized=nb;ec=v.offset;v.offset=xb;Pb=v.size;v.size=
Db;Fa=v.state;v.state=tb;ac=v.stride;v.stride=wc;ob=v.type;v.type=yb;zb=v.w;v.w=Yb;Mb=v.x;v.x=tc;Qb=v.y;v.y=Ga;hc=v.z;v.z=Oc;jc=x.buffer;x.buffer=w;cc=x.divisor;x.divisor=0;Bc=x.normalized;x.normalized=!1;Cc=x.offset;x.offset=8;Dc=x.size;x.size=0;Pc=x.state;x.state=1;$c=x.stride;x.stride=24;Tc=x.type;x.type=5126;Qc=x.w;x.w=0;Kb=x.x;x.x=0;Gb=x.y;x.y=0;Rc=x.z;x.z=0;Jc=k.call(this,ja,a,e);Hb.offset=Jc;Uc=!1;ic=null;Xc=0;wd=!1;jd=gd=0;Yc=1;Vb=0;bc=5126;Id=me=ue=je=0;kb(Hb)?(Uc=!0,ic=y.createStream(34962,
Hb),bc=ic.dtype):(ic=y.getBuffer(Hb))?bc=ic.dtype:"constant"in Hb?(Yc=2,"number"===typeof Hb.constant?(ue=Hb.constant,me=Id=je=0):(ue=0<Hb.constant.length?Hb.constant[0]:0,me=1<Hb.constant.length?Hb.constant[1]:0,Id=2<Hb.constant.length?Hb.constant[2]:0,je=3<Hb.constant.length?Hb.constant[3]:0)):(ic=kb(Hb.buffer)?y.createStream(34962,Hb.buffer):y.getBuffer(Hb.buffer),bc="type"in Hb?lc[Hb.type]:ic.dtype,wd=!!Hb.normalized,jd=Hb.size|0,gd=Hb.offset|0,Vb=Hb.stride|0,Xc=Hb.divisor|0);Gd=da.buffer;da.buffer=
ic;dd=da.divisor;da.divisor=Xc;Ec=da.normalized;da.normalized=wd;nd=da.offset;da.offset=gd;hd=da.size;da.size=jd;bd=da.state;da.state=Yc;pd=da.stride;da.stride=Vb;Bd=da.type;da.type=bc;Ed=da.w;da.w=je;ve=da.x;da.x=ue;ne=da.y;da.y=me;ye=da.z;da.z=Id;ce=Q.call(this,ja,a,e);Ab.offset=ce;be=!1;ae=null;pe=0;Zd=!1;zc=fe=0;Wc=1;qe=0;ke=5126;Qd=Pd=Nd=Hd=0;kb(Ab)?(be=!0,ae=y.createStream(34962,Ab),ke=ae.dtype):(ae=y.getBuffer(Ab))?ke=ae.dtype:"constant"in Ab?(Wc=2,"number"===typeof Ab.constant?(Nd=Ab.constant,
Pd=Qd=Hd=0):(Nd=0<Ab.constant.length?Ab.constant[0]:0,Pd=1<Ab.constant.length?Ab.constant[1]:0,Qd=2<Ab.constant.length?Ab.constant[2]:0,Hd=3<Ab.constant.length?Ab.constant[3]:0)):(ae=kb(Ab.buffer)?y.createStream(34962,Ab.buffer):y.getBuffer(Ab.buffer),ke="type"in Ab?lc[Ab.type]:ae.dtype,Zd=!!Ab.normalized,zc=Ab.size|0,fe=Ab.offset|0,qe=Ab.stride|0,pe=Ab.divisor|0);ge=ba.buffer;ba.buffer=ae;vf=ba.divisor;ba.divisor=pe;ze=ba.normalized;ba.normalized=Zd;oe=ba.offset;ba.offset=fe;Pe=ba.size;ba.size=zc;
Qe=ba.state;ba.state=Wc;Le=ba.stride;ba.stride=qe;re=ba.type;ba.type=ke;Ce=ba.w;ba.w=Hd;Fe=ba.x;ba.x=Nd;Ge=ba.y;ba.y=Pd;He=ba.z;ba.z=Qd;De=sa.vert;sa.vert=2;Jd=sa.frag;sa.frag=1;ca.dirty=!0;b(ja,a,e);ja.viewportWidth=m;ja.viewportHeight=q;Ha[0]=t;Ha[1]=B;Ha[2]=A;Ha[3]=z;xc[0]=D;xc[1]=E;xc[2]=G;xc[3]=F;fa.blend_enable=ea;Fc[0]=aa;Fc[1]=H;M[0]=N;M[1]=L;M[2]=V;M[3]=K;fa.depth_enable=O;W[0]=Y;W[1]=U;W[2]=ia;W[3]=Ba;fa.scissor_enable=Z;ua&&(c.cpuTime+=performance.now()-oc);Aa.count=qa;Aa.instances=ma;
Aa.primitive=pa;Wb[5]=Zb;Wb[4]=Sc;Wb[10]=Fb;Wb[18]=ra;Wb[6]=Ib;Wb[7]=na;Wb[8]=vb;Wb[9]=$a;Wb[3]=Sb;C.buffer=r;C.divisor=Tb;C.normalized=Na;C.offset=pb;C.size=wb;C.state=ib;C.stride=Pa;C.type=Oa;C.w=$b;C.x=La;C.y=fb;C.z=mc;fc&&y.destroyStream(lb);u.buffer=Ra;u.divisor=Mc;u.normalized=Jb;u.offset=Za;u.size=Ub;u.state=wa;u.stride=ub;u.type=Ja;u.w=Ob;u.x=hb;u.y=jb;u.z=xa;J.buffer=gc;J.divisor=Ca;J.normalized=rb;J.offset=sb;J.size=Xa;J.state=Ya;J.stride=nc;J.type=Ic;J.w=vc;J.x=Va;J.y=Lb;J.z=Zc;yc&&y.destroyStream(Qa);
v.buffer=ad;v.divisor=fd;v.normalized=Xb;v.offset=ec;v.size=Pb;v.state=Fa;v.stride=ac;v.type=ob;v.w=zb;v.x=Mb;v.y=Qb;v.z=hc;x.buffer=jc;x.divisor=cc;x.normalized=Bc;x.offset=Cc;x.size=Dc;x.state=Pc;x.stride=$c;x.type=Tc;x.w=Qc;x.x=Kb;x.y=Gb;x.z=Rc;Uc&&y.destroyStream(ic);da.buffer=Gd;da.divisor=dd;da.normalized=Ec;da.offset=nd;da.size=hd;da.state=bd;da.stride=pd;da.type=Bd;da.w=Ed;da.x=ve;da.y=ne;da.z=ye;be&&y.destroyStream(ae);ba.buffer=ge;ba.divisor=vf;ba.normalized=ze;ba.offset=oe;ba.size=Pe;ba.state=
Qe;ba.stride=Le;ba.type=re;ba.w=Ce;ba.x=Fe;ba.y=Ge;ba.z=He;sa.vert=De;sa.frag=Jd;ca.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,c,f,g,d,b,n,e,h,q,B,l,w,P,z,p,C,u,I,J,Ka,v,x,k,da,Q,ba,E,ma,H,Z,m,L,U,la,Vb,ub){var bc,na,Oa,Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa,Wb,oc,xc,sd,Fc,aa,M,ka,Da,vb,ab,ad,F,D,ia,ua,W,ha,qa,G,A;bc=a.attributes;na=a.buffer;
Oa=a.context;Y=a.current;K=a.draw;N=a.elements;R=a.extensions;pa=a.framebuffer;O=a.gl;Yb=a.isBufferArgs;$a=a.next;T=a.shader;y=a.uniforms;ja=a.vao;ca=$a.blend_color;Aa=Y.blend_color;La=$a.blend_equation;cc=Y.blend_equation;Ga=$a.blend_func;X=Y.blend_func;kb=$a.colorMask;fa=Y.colorMask;sa=$a.depth_range;Wb=Y.depth_range;oc=$a.polygonOffset_offset;xc=Y.polygonOffset_offset;sd=$a.sample_coverage;Fc=Y.sample_coverage;aa=$a.scissor_box;M=Y.scissor_box;ka=$a.stencil_func;Da=Y.stencil_func;vb=$a.stencil_opBack;
ab=Y.stencil_opBack;ad=$a.stencil_opFront;F=Y.stencil_opFront;D=$a.viewport;ia=Y.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};W={divisor:1,offset:8,stride:8};ha={divisor:1,offset:8,stride:8};qa={divisor:1,offset:16,stride:8};G={divisor:1,offset:16,stride:8};A={divisor:1,offset:0,stride:4};return{batch:function(a,e){var h,f,g,l,n,q;h=pa.next;h!==pa.cur&&(h?O.bindFramebuffer(36160,h.framebuffer):O.bindFramebuffer(36160,null),pa.cur=h);if(Y.dirty){var B,
w,y,z,p,P,D,C,aa,oa,T,ca,La,Ga,Od,Oe,$e,Xe,xd,Ee,Vd,Wd,le,Ke,yd,kd,Cd,od,cd,Vc,vd,ed;B=$a.dither;B!==Y.dither&&(B?O.enable(3024):O.disable(3024),Y.dither=B);w=$a.depth_func;w!==Y.depth_func&&(O.depthFunc(w),Y.depth_func=w);y=sa[0];z=sa[1];if(y!==Wb[0]||z!==Wb[1])O.depthRange(y,z),Wb[0]=y,Wb[1]=z;p=$a.depth_mask;p!==Y.depth_mask&&(O.depthMask(p),Y.depth_mask=p);P=kb[0];D=kb[1];C=kb[2];aa=kb[3];if(P!==fa[0]||D!==fa[1]||C!==fa[2]||aa!==fa[3])O.colorMask(P,D,C,aa),fa[0]=P,fa[1]=D,fa[2]=C,fa[3]=aa;oa=
$a.cull_enable;oa!==Y.cull_enable&&(oa?O.enable(2884):O.disable(2884),Y.cull_enable=oa);T=$a.cull_face;T!==Y.cull_face&&(O.cullFace(T),Y.cull_face=T);ca=$a.frontFace;ca!==Y.frontFace&&(O.frontFace(ca),Y.frontFace=ca);La=$a.lineWidth;La!==Y.lineWidth&&(O.lineWidth(La),Y.lineWidth=La);Ga=$a.polygonOffset_enable;Ga!==Y.polygonOffset_enable&&(Ga?O.enable(32823):O.disable(32823),Y.polygonOffset_enable=Ga);Od=oc[0];Oe=oc[1];if(Od!==xc[0]||Oe!==xc[1])O.polygonOffset(Od,Oe),xc[0]=Od,xc[1]=Oe;$e=$a.sample_alpha;
$e!==Y.sample_alpha&&($e?O.enable(32926):O.disable(32926),Y.sample_alpha=$e);Xe=$a.sample_enable;Xe!==Y.sample_enable&&(Xe?O.enable(32928):O.disable(32928),Y.sample_enable=Xe);xd=sd[0];Ee=sd[1];if(xd!==Fc[0]||Ee!==Fc[1])O.sampleCoverage(xd,Ee),Fc[0]=xd,Fc[1]=Ee;Vd=$a.stencil_mask;Vd!==Y.stencil_mask&&(O.stencilMask(Vd),Y.stencil_mask=Vd);Wd=ka[0];le=ka[1];Ke=ka[2];if(Wd!==Da[0]||le!==Da[1]||Ke!==Da[2])O.stencilFunc(Wd,le,Ke),Da[0]=Wd,Da[1]=le,Da[2]=Ke;yd=ad[0];kd=ad[1];Cd=ad[2];od=ad[3];if(yd!==F[0]||
kd!==F[1]||Cd!==F[2]||od!==F[3])O.stencilOpSeparate(yd,kd,Cd,od),F[0]=yd,F[1]=kd,F[2]=Cd,F[3]=od;cd=vb[0];Vc=vb[1];vd=vb[2];ed=vb[3];if(cd!==ab[0]||Vc!==ab[1]||vd!==ab[2]||ed!==ab[3])O.stencilOpSeparate(cd,Vc,vd,ed),ab[0]=cd,ab[1]=Vc,ab[2]=vd,ab[3]=ed}O.blendColor(0,0,0,0);Aa[0]=0;Aa[1]=0;Aa[2]=0;Aa[3]=0;O.enable(3042);Y.blend_enable=!0;O.blendEquationSeparate(32774,32774);cc[0]=32774;cc[1]=32774;O.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;O.enable(3089);Y.scissor_enable=
!0;O.disable(2960);Y.stencil_enable=!1;if(f=Y.profile)g=performance.now(),c.count+=e;O.useProgram(u.program);l=R.angle_instanced_arrays;var Nc,sc,bb,Kc,Eb;ja.setVAO(null);Nc=ma.location;sc=bc[Nc];sc.buffer||O.enableVertexAttribArray(Nc);if(5126!==sc.type||1!==sc.size||sc.buffer!==d||!1!==sc.normalized||0!==sc.offset||8!==sc.stride)O.bindBuffer(34962,d.buffer),O.vertexAttribPointer(Nc,1,5126,!1,8,0),sc.type=5126,sc.size=1,sc.buffer=d,sc.normalized=!1,sc.offset=0,sc.stride=8;0!==sc.divisor&&(l.vertexAttribDivisorANGLE(Nc,
0),sc.divisor=0);bb=H.location;Kc=bc[bb];Kc.buffer||O.enableVertexAttribArray(bb);if(5126!==Kc.type||1!==Kc.size||Kc.buffer!==b||!1!==Kc.normalized||4!==Kc.offset||8!==Kc.stride)O.bindBuffer(34962,b.buffer),O.vertexAttribPointer(bb,1,5126,!1,8,4),Kc.type=5126,Kc.size=1,Kc.buffer=b,Kc.normalized=!1,Kc.offset=4,Kc.stride=8;0!==Kc.divisor&&(l.vertexAttribDivisorANGLE(bb,0),Kc.divisor=0);(Eb=K.elements)?O.bindBuffer(34963,Eb.buffer.buffer):ja.currentVAO&&(Eb=N.getElements(ja.currentVAO.elements))&&O.bindBuffer(34963,
Eb.buffer.buffer);for(n=0;n<e;++n){q=a[n];var rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,nf,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,df,ie,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd;rc=q.viewport;Sa=rc.x|0;Lc=rc.y|0;dc="width"in rc?rc.width|
0:Oa.framebufferWidth-Sa;pc="height"in rc?rc.height|0:Oa.framebufferHeight-Lc;Ld=Oa.viewportWidth;Oa.viewportWidth=dc;qd=Oa.viewportHeight;Oa.viewportHeight=pc;O.viewport(Sa,Lc,dc,pc);ia[0]=Sa;ia[1]=Lc;ia[2]=dc;ia[3]=pc;(Ac=I.call(this,Oa,q,n))?O.enable(2929):O.disable(2929);Y.depth_enable=Ac;Zb=q.viewport;Gc=Zb.x|0;Sc=Zb.y|0;Ma="width"in Zb?Zb.width|0:Oa.framebufferWidth-Gc;Fb="height"in Zb?Zb.height|0:Oa.framebufferHeight-Sc;O.scissor(Gc,Sc,Ma,Fb);M[0]=Gc;M[1]=Sc;M[2]=Ma;M[3]=Fb;W.buffer=q.positionBuffer;
Wa=!1;ra=null;td=0;Ib=!1;qc=Ta=0;eb=1;uc=0;Rb=5126;r=Sb=kc=Td=0;Yb(W)?(Wa=!0,ra=na.createStream(34962,W),Rb=ra.dtype):(ra=na.getBuffer(W))?Rb=ra.dtype:"constant"in W?(eb=2,"number"===typeof W.constant?(kc=W.constant,Sb=r=Td=0):(kc=0<W.constant.length?W.constant[0]:0,Sb=1<W.constant.length?W.constant[1]:0,r=2<W.constant.length?W.constant[2]:0,Td=3<W.constant.length?W.constant[3]:0)):(ra=Yb(W.buffer)?na.createStream(34962,W.buffer):na.getBuffer(W.buffer),Rb="type"in W?ua[W.type]:ra.dtype,Ib=!!W.normalized,
qc=W.size|0,Ta=W.offset|0,uc=W.stride|0,td=W.divisor|0);Tb=Ka.location;Na=bc[Tb];if(1===eb){Na.buffer||O.enableVertexAttribArray(Tb);pb=qc||2;if(Na.type!==Rb||Na.size!==pb||Na.buffer!==ra||Na.normalized!==Ib||Na.offset!==Ta||Na.stride!==uc)O.bindBuffer(34962,ra.buffer),O.vertexAttribPointer(Tb,pb,Rb,Ib,uc,Ta),Na.type=Rb,Na.size=pb,Na.buffer=ra,Na.normalized=Ib,Na.offset=Ta,Na.stride=uc;Na.divisor!==td&&(l.vertexAttribDivisorANGLE(Tb,td),Na.divisor=td)}else if(Na.buffer&&(O.disableVertexAttribArray(Tb),
Na.buffer=null),Na.x!==kc||Na.y!==Sb||Na.z!==r||Na.w!==Td)O.vertexAttrib4f(Tb,kc,Sb,r,Td),Na.x=kc,Na.y=Sb,Na.z=r,Na.w=Td;qa.buffer=q.positionBuffer;wb=!1;ib=null;Pa=0;md=!1;Dd=$b=0;fb=1;mc=0;Hc=5126;ta=mb=lb=fc=0;Yb(qa)?(wb=!0,ib=na.createStream(34962,qa),Hc=ib.dtype):(ib=na.getBuffer(qa))?Hc=ib.dtype:"constant"in qa?(fb=2,"number"===typeof qa.constant?(lb=qa.constant,mb=ta=fc=0):(lb=0<qa.constant.length?qa.constant[0]:0,mb=1<qa.constant.length?qa.constant[1]:0,ta=2<qa.constant.length?qa.constant[2]:
0,fc=3<qa.constant.length?qa.constant[3]:0)):(ib=Yb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),Hc="type"in qa?ua[qa.type]:ib.dtype,md=!!qa.normalized,Dd=qa.size|0,$b=qa.offset|0,mc=qa.stride|0,Pa=qa.divisor|0);qb=x.location;va=bc[qb];if(1===fb){va.buffer||O.enableVertexAttribArray(qb);Ua=Dd||2;if(va.type!==Hc||va.size!==Ua||va.buffer!==ib||va.normalized!==md||va.offset!==$b||va.stride!==mc)O.bindBuffer(34962,ib.buffer),O.vertexAttribPointer(qb,Ua,Hc,md,mc,$b),va.type=Hc,va.size=
Ua,va.buffer=ib,va.normalized=md,va.offset=$b,va.stride=mc;va.divisor!==Pa&&(l.vertexAttribDivisorANGLE(qb,Pa),va.divisor=Pa)}else if(va.buffer&&(O.disableVertexAttribArray(qb),va.buffer=null),va.x!==lb||va.y!==mb||va.z!==ta||va.w!==fc)O.vertexAttrib4f(qb,lb,mb,ta,fc),va.x=lb,va.y=mb,va.z=ta,va.w=fc;ha.buffer=q.positionFractBuffer;cb=!1;ya=null;gb=0;Ia=!1;Bb=Cb=0;Ra=1;Mc=0;Jb=5126;he=wa=Ub=Za=0;Yb(ha)?(cb=!0,ya=na.createStream(34962,ha),Jb=ya.dtype):(ya=na.getBuffer(ha))?Jb=ya.dtype:"constant"in ha?
(Ra=2,"number"===typeof ha.constant?(Ub=ha.constant,wa=he=Za=0):(Ub=0<ha.constant.length?ha.constant[0]:0,wa=1<ha.constant.length?ha.constant[1]:0,he=2<ha.constant.length?ha.constant[2]:0,Za=3<ha.constant.length?ha.constant[3]:0)):(ya=Yb(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),Jb="type"in ha?ua[ha.type]:ya.dtype,Ia=!!ha.normalized,Bb=ha.size|0,Cb=ha.offset|0,Mc=ha.stride|0,gb=ha.divisor|0);Ja=v.location;Ob=bc[Ja];if(1===Ra){Ob.buffer||O.enableVertexAttribArray(Ja);hb=Bb||
2;if(Ob.type!==Jb||Ob.size!==hb||Ob.buffer!==ya||Ob.normalized!==Ia||Ob.offset!==Cb||Ob.stride!==Mc)O.bindBuffer(34962,ya.buffer),O.vertexAttribPointer(Ja,hb,Jb,Ia,Mc,Cb),Ob.type=Jb,Ob.size=hb,Ob.buffer=ya,Ob.normalized=Ia,Ob.offset=Cb,Ob.stride=Mc;Ob.divisor!==gb&&(l.vertexAttribDivisorANGLE(Ja,gb),Ob.divisor=gb)}else if(Ob.buffer&&(O.disableVertexAttribArray(Ja),Ob.buffer=null),Ob.x!==Ub||Ob.y!==wa||Ob.z!==he||Ob.w!==Za)O.vertexAttrib4f(Ja,Ub,wa,he,Za),Ob.x=Ub,Ob.y=wa,Ob.z=he,Ob.w=Za;G.buffer=q.positionFractBuffer;
jb=!1;xa=null;gc=0;Ca=!1;sb=rb=0;Xa=1;Ya=0;nc=5126;Lb=Va=vc=Ic=0;Yb(G)?(jb=!0,xa=na.createStream(34962,G),nc=xa.dtype):(xa=na.getBuffer(G))?nc=xa.dtype:"constant"in G?(Xa=2,"number"===typeof G.constant?(vc=G.constant,Va=Lb=Ic=0):(vc=0<G.constant.length?G.constant[0]:0,Va=1<G.constant.length?G.constant[1]:0,Lb=2<G.constant.length?G.constant[2]:0,Ic=3<G.constant.length?G.constant[3]:0)):(xa=Yb(G.buffer)?na.createStream(34962,G.buffer):na.getBuffer(G.buffer),nc="type"in G?ua[G.type]:xa.dtype,Ca=!!G.normalized,
sb=G.size|0,rb=G.offset|0,Ya=G.stride|0,gc=G.divisor|0);Zc=k.location;Ea=bc[Zc];if(1===Xa){Ea.buffer||O.enableVertexAttribArray(Zc);yc=sb||2;if(Ea.type!==nc||Ea.size!==yc||Ea.buffer!==xa||Ea.normalized!==Ca||Ea.offset!==rb||Ea.stride!==Ya)O.bindBuffer(34962,xa.buffer),O.vertexAttribPointer(Zc,yc,nc,Ca,Ya,rb),Ea.type=nc,Ea.size=yc,Ea.buffer=xa,Ea.normalized=Ca,Ea.offset=rb,Ea.stride=Ya;Ea.divisor!==gc&&(l.vertexAttribDivisorANGLE(Zc,gc),Ea.divisor=gc)}else if(Ea.buffer&&(O.disableVertexAttribArray(Zc),
Ea.buffer=null),Ea.x!==vc||Ea.y!==Va||Ea.z!==Lb||Ea.w!==Ic)O.vertexAttrib4f(Zc,vc,Va,Lb,Ic),Ea.x=vc,Ea.y=Va,Ea.z=Lb,Ea.w=Ic;A.buffer=q.colorBuffer;Qa=!1;za=null;nb=0;xb=!1;tb=Db=0;wc=1;yb=0;id=5126;ld=Oc=Md=tc=0;Yb(A)?(Qa=!0,za=na.createStream(34962,A),id=za.dtype):(za=na.getBuffer(A))?id=za.dtype:"constant"in A?(wc=2,"number"===typeof A.constant?(Md=A.constant,Oc=ld=tc=0):(Md=0<A.constant.length?A.constant[0]:0,Oc=1<A.constant.length?A.constant[1]:0,ld=2<A.constant.length?A.constant[2]:0,tc=3<A.constant.length?
A.constant[3]:0)):(za=Yb(A.buffer)?na.createStream(34962,A.buffer):na.getBuffer(A.buffer),id="type"in A?ua[A.type]:za.dtype,xb=!!A.normalized,tb=A.size|0,Db=A.offset|0,yb=A.stride|0,nb=A.divisor|0);fd=da.location;Xb=bc[fd];if(1===wc){Xb.buffer||O.enableVertexAttribArray(fd);ec=tb||4;if(Xb.type!==id||Xb.size!==ec||Xb.buffer!==za||Xb.normalized!==xb||Xb.offset!==Db||Xb.stride!==yb)O.bindBuffer(34962,za.buffer),O.vertexAttribPointer(fd,ec,id,xb,yb,Db),Xb.type=id,Xb.size=ec,Xb.buffer=za,Xb.normalized=
xb,Xb.offset=Db,Xb.stride=yb;Xb.divisor!==nb&&(l.vertexAttribDivisorANGLE(fd,nb),Xb.divisor=nb)}else if(Xb.buffer&&(O.disableVertexAttribArray(fd),Xb.buffer=null),Xb.x!==Md||Xb.y!==Oc||Xb.z!==ld||Xb.w!==tc)O.vertexAttrib4f(fd,Md,Oc,ld,tc),Xb.x=Md,Xb.y=Oc,Xb.z=ld,Xb.w=tc;Pb=q.scale;Fa=Pb[0];ob=Pb[1];n&&ac===Fa&&zb===ob||(ac=Fa,zb=ob,O.uniform2f(m.location,Fa,ob));Mb=q.scaleFract;Qb=Mb[0];jc=Mb[1];n&&hc===Qb&&nf===jc||(hc=Qb,nf=jc,O.uniform2f(L.location,Qb,jc));Bc=q.translate;Cc=Bc[0];Pc=Bc[1];n&&Dc===
Cc&&$c===Pc||(Dc=Cc,$c=Pc,O.uniform2f(la.location,Cc,Pc));Tc=q.translateFract;Qc=Tc[0];Gb=Tc[1];n&&Kb===Qc&&Rc===Gb||(Kb=Qc,Rc=Gb,O.uniform2f(Vb.location,Qc,Gb));Jc=q.thickness;n&&Uc===Jc||(Uc=Jc,O.uniform1f(U.location,Jc));ic=q.depth;n&&Xc===ic||(Xc=ic,O.uniform1f(E.location,ic));wd=J.call(this,Oa,q,n);gd=wd[0];Yc=wd[1];ie=wd[2];ue=wd[3];n&&jd===gd&&df===Yc&&je===ie&&me===ue||(jd=gd,df=Yc,je=ie,me=ue,O.uniform4f(ub.location,gd,Yc,ie,ue));Id=q.dashLength;n&&Gd===Id||(Gd=Id,O.uniform1f(Q.location,
Id));dd=q.opacity;n&&Ec===dd||(Ec=dd,O.uniform1f(Z.location,dd));(nd=q.dashTexture)&&"framebuffer"===nd._reglType&&(nd=nd.color[0]);hd=nd._texture;O.uniform1i(ba.location,hd.bind());bd=q.count;0<bd?Eb?l.drawElementsInstancedANGLE(5,4,Eb.type,0<<(Eb.type-5121>>1),bd):l.drawArraysInstancedANGLE(5,0,4,bd):0>bd&&(Eb?O.drawElements(5,4,Eb.type,0<<(Eb.type-5121>>1)):O.drawArrays(5,0,4));Oa.viewportWidth=Ld;Oa.viewportHeight=qd;Wa&&na.destroyStream(ra);wb&&na.destroyStream(ib);cb&&na.destroyStream(ya);jb&&
na.destroyStream(xa);Qa&&na.destroyStream(za);hd.unbind()}Y.dirty=!0;ja.setVAO(null);f&&(c.cpuTime+=performance.now()-g)},draw:function(a){var e,h,l,q,B,w,y,z,p,P,D,C,aa,u,oa,S,J,T,ca,I,Nb,Od,Oe,La,Xe,xd,Ee,Vd,Wd,le,Ga,yd,kd,Cd,od,cd,Vc,vd,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb;e=pa.next;e!==pa.cur&&(e?O.bindFramebuffer(36160,
e.framebuffer):O.bindFramebuffer(36160,null),pa.cur=e);if(Y.dirty){var sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb;sb=$a.dither;sb!==Y.dither&&(sb?O.enable(3024):O.disable(3024),Y.dither=sb);Xa=$a.depth_func;Xa!==Y.depth_func&&(O.depthFunc(Xa),Y.depth_func=Xa);Ya=sa[0];nc=sa[1];if(Ya!==Wb[0]||nc!==Wb[1])O.depthRange(Ya,nc),Wb[0]=Ya,Wb[1]=nc;Ic=$a.depth_mask;Ic!==Y.depth_mask&&(O.depthMask(Ic),Y.depth_mask=Ic);vc=kb[0];Va=kb[1];Lb=kb[2];Zc=kb[3];
if(vc!==fa[0]||Va!==fa[1]||Lb!==fa[2]||Zc!==fa[3])O.colorMask(vc,Va,Lb,Zc),fa[0]=vc,fa[1]=Va,fa[2]=Lb,fa[3]=Zc;Ea=$a.cull_enable;Ea!==Y.cull_enable&&(Ea?O.enable(2884):O.disable(2884),Y.cull_enable=Ea);yc=$a.cull_face;yc!==Y.cull_face&&(O.cullFace(yc),Y.cull_face=yc);Qa=$a.frontFace;Qa!==Y.frontFace&&(O.frontFace(Qa),Y.frontFace=Qa);za=$a.lineWidth;za!==Y.lineWidth&&(O.lineWidth(za),Y.lineWidth=za);nb=$a.polygonOffset_enable;nb!==Y.polygonOffset_enable&&(nb?O.enable(32823):O.disable(32823),Y.polygonOffset_enable=
nb);xb=oc[0];Db=oc[1];if(xb!==xc[0]||Db!==xc[1])O.polygonOffset(xb,Db),xc[0]=xb,xc[1]=Db;tb=$a.sample_alpha;tb!==Y.sample_alpha&&(tb?O.enable(32926):O.disable(32926),Y.sample_alpha=tb);wc=$a.sample_enable;wc!==Y.sample_enable&&(wc?O.enable(32928):O.disable(32928),Y.sample_enable=wc);yb=sd[0];id=sd[1];if(yb!==Fc[0]||id!==Fc[1])O.sampleCoverage(yb,id),Fc[0]=yb,Fc[1]=id;tc=$a.stencil_mask;tc!==Y.stencil_mask&&(O.stencilMask(tc),Y.stencil_mask=tc);Md=ka[0];Oc=ka[1];ld=ka[2];if(Md!==Da[0]||Oc!==Da[1]||
ld!==Da[2])O.stencilFunc(Md,Oc,ld),Da[0]=Md,Da[1]=Oc,Da[2]=ld;fd=ad[0];Xb=ad[1];ec=ad[2];Pb=ad[3];if(fd!==F[0]||Xb!==F[1]||ec!==F[2]||Pb!==F[3])O.stencilOpSeparate(fd,Xb,ec,Pb),F[0]=fd,F[1]=Xb,F[2]=ec,F[3]=Pb;Fa=vb[0];ac=vb[1];ob=vb[2];zb=vb[3];if(Fa!==ab[0]||ac!==ab[1]||ob!==ab[2]||zb!==ab[3])O.stencilOpSeparate(Fa,ac,ob,zb),ab[0]=Fa,ab[1]=ac,ab[2]=ob,ab[3]=zb}h=a.viewport;l=h.x|0;q=h.y|0;B="width"in h?h.width|0:Oa.framebufferWidth-l;w="height"in h?h.height|0:Oa.framebufferHeight-q;y=Oa.viewportWidth;
Oa.viewportWidth=B;z=Oa.viewportHeight;Oa.viewportHeight=w;O.viewport(l,q,B,w);ia[0]=l;ia[1]=q;ia[2]=B;ia[3]=w;O.blendColor(0,0,0,0);Aa[0]=0;Aa[1]=0;Aa[2]=0;Aa[3]=0;O.enable(3042);Y.blend_enable=!0;O.blendEquationSeparate(32774,32774);cc[0]=32774;cc[1]=32774;O.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;(p=f.call(this,Oa,a,0))?O.enable(2929):O.disable(2929);Y.depth_enable=p;P=a.viewport;D=P.x|0;C=P.y|0;aa="width"in P?P.width|0:Oa.framebufferWidth-D;u="height"in P?P.height|0:
Oa.framebufferHeight-C;O.scissor(D,C,aa,u);M[0]=D;M[1]=C;M[2]=aa;M[3]=u;O.enable(3089);Y.scissor_enable=!0;O.disable(2960);Y.stencil_enable=!1;if(oa=Y.profile)S=performance.now(),c.count++;O.useProgram(g.program);J=R.angle_instanced_arrays;ja.setVAO(null);W.buffer=a.positionBuffer;T=!1;ca=null;I=0;Nb=!1;Oe=Od=0;La=1;Xe=0;xd=5126;le=Wd=Vd=Ee=0;Yb(W)?(T=!0,ca=na.createStream(34962,W),xd=ca.dtype):(ca=na.getBuffer(W))?xd=ca.dtype:"constant"in W?(La=2,"number"===typeof W.constant?(Vd=W.constant,Wd=le=
Ee=0):(Vd=0<W.constant.length?W.constant[0]:0,Wd=1<W.constant.length?W.constant[1]:0,le=2<W.constant.length?W.constant[2]:0,Ee=3<W.constant.length?W.constant[3]:0)):(ca=Yb(W.buffer)?na.createStream(34962,W.buffer):na.getBuffer(W.buffer),xd="type"in W?ua[W.type]:ca.dtype,Nb=!!W.normalized,Oe=W.size|0,Od=W.offset|0,Xe=W.stride|0,I=W.divisor|0);Ga=Ka.location;yd=bc[Ga];if(1===La){yd.buffer||O.enableVertexAttribArray(Ga);kd=Oe||2;if(yd.type!==xd||yd.size!==kd||yd.buffer!==ca||yd.normalized!==Nb||yd.offset!==
Od||yd.stride!==Xe)O.bindBuffer(34962,ca.buffer),O.vertexAttribPointer(Ga,kd,xd,Nb,Xe,Od),yd.type=xd,yd.size=kd,yd.buffer=ca,yd.normalized=Nb,yd.offset=Od,yd.stride=Xe;yd.divisor!==I&&(J.vertexAttribDivisorANGLE(Ga,I),yd.divisor=I)}else if(yd.buffer&&(O.disableVertexAttribArray(Ga),yd.buffer=null),yd.x!==Vd||yd.y!==Wd||yd.z!==le||yd.w!==Ee)O.vertexAttrib4f(Ga,Vd,Wd,le,Ee),yd.x=Vd,yd.y=Wd,yd.z=le,yd.w=Ee;qa.buffer=a.positionBuffer;Cd=!1;od=null;cd=0;Vc=!1;ed=vd=0;Nc=1;sc=0;bb=5126;Sa=rc=Eb=Kc=0;Yb(qa)?
(Cd=!0,od=na.createStream(34962,qa),bb=od.dtype):(od=na.getBuffer(qa))?bb=od.dtype:"constant"in qa?(Nc=2,"number"===typeof qa.constant?(Eb=qa.constant,rc=Sa=Kc=0):(Eb=0<qa.constant.length?qa.constant[0]:0,rc=1<qa.constant.length?qa.constant[1]:0,Sa=2<qa.constant.length?qa.constant[2]:0,Kc=3<qa.constant.length?qa.constant[3]:0)):(od=Yb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),bb="type"in qa?ua[qa.type]:od.dtype,Vc=!!qa.normalized,ed=qa.size|0,vd=qa.offset|0,sc=qa.stride|
0,cd=qa.divisor|0);Lc=x.location;dc=bc[Lc];if(1===Nc){dc.buffer||O.enableVertexAttribArray(Lc);pc=ed||2;if(dc.type!==bb||dc.size!==pc||dc.buffer!==od||dc.normalized!==Vc||dc.offset!==vd||dc.stride!==sc)O.bindBuffer(34962,od.buffer),O.vertexAttribPointer(Lc,pc,bb,Vc,sc,vd),dc.type=bb,dc.size=pc,dc.buffer=od,dc.normalized=Vc,dc.offset=vd,dc.stride=sc;dc.divisor!==cd&&(J.vertexAttribDivisorANGLE(Lc,cd),dc.divisor=cd)}else if(dc.buffer&&(O.disableVertexAttribArray(Lc),dc.buffer=null),dc.x!==Eb||dc.y!==
rc||dc.z!==Sa||dc.w!==Kc)O.vertexAttrib4f(Lc,Eb,rc,Sa,Kc),dc.x=Eb,dc.y=rc,dc.z=Sa,dc.w=Kc;ha.buffer=a.positionFractBuffer;Ld=!1;qd=null;Ac=0;Zb=!1;Sc=Gc=0;Ma=1;Fb=0;Wa=5126;Ta=Ib=td=ra=0;Yb(ha)?(Ld=!0,qd=na.createStream(34962,ha),Wa=qd.dtype):(qd=na.getBuffer(ha))?Wa=qd.dtype:"constant"in ha?(Ma=2,"number"===typeof ha.constant?(td=ha.constant,Ib=Ta=ra=0):(td=0<ha.constant.length?ha.constant[0]:0,Ib=1<ha.constant.length?ha.constant[1]:0,Ta=2<ha.constant.length?ha.constant[2]:0,ra=3<ha.constant.length?
ha.constant[3]:0)):(qd=Yb(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),Wa="type"in ha?ua[ha.type]:qd.dtype,Zb=!!ha.normalized,Sc=ha.size|0,Gc=ha.offset|0,Fb=ha.stride|0,Ac=ha.divisor|0);qc=v.location;eb=bc[qc];if(1===Ma){eb.buffer||O.enableVertexAttribArray(qc);uc=Sc||2;if(eb.type!==Wa||eb.size!==uc||eb.buffer!==qd||eb.normalized!==Zb||eb.offset!==Gc||eb.stride!==Fb)O.bindBuffer(34962,qd.buffer),O.vertexAttribPointer(qc,uc,Wa,Zb,Fb,Gc),eb.type=Wa,eb.size=uc,eb.buffer=qd,eb.normalized=
Zb,eb.offset=Gc,eb.stride=Fb;eb.divisor!==Ac&&(J.vertexAttribDivisorANGLE(qc,Ac),eb.divisor=Ac)}else if(eb.buffer&&(O.disableVertexAttribArray(qc),eb.buffer=null),eb.x!==td||eb.y!==Ib||eb.z!==Ta||eb.w!==ra)O.vertexAttrib4f(qc,td,Ib,Ta,ra),eb.x=td,eb.y=Ib,eb.z=Ta,eb.w=ra;G.buffer=a.positionFractBuffer;Rb=!1;Td=null;kc=0;Sb=!1;Tb=r=0;Na=1;pb=0;wb=5126;$b=md=Pa=ib=0;Yb(G)?(Rb=!0,Td=na.createStream(34962,G),wb=Td.dtype):(Td=na.getBuffer(G))?wb=Td.dtype:"constant"in G?(Na=2,"number"===typeof G.constant?
(Pa=G.constant,md=$b=ib=0):(Pa=0<G.constant.length?G.constant[0]:0,md=1<G.constant.length?G.constant[1]:0,$b=2<G.constant.length?G.constant[2]:0,ib=3<G.constant.length?G.constant[3]:0)):(Td=Yb(G.buffer)?na.createStream(34962,G.buffer):na.getBuffer(G.buffer),wb="type"in G?ua[G.type]:Td.dtype,Sb=!!G.normalized,Tb=G.size|0,r=G.offset|0,pb=G.stride|0,kc=G.divisor|0);Dd=k.location;fb=bc[Dd];if(1===Na){fb.buffer||O.enableVertexAttribArray(Dd);mc=Tb||2;if(fb.type!==wb||fb.size!==mc||fb.buffer!==Td||fb.normalized!==
Sb||fb.offset!==r||fb.stride!==pb)O.bindBuffer(34962,Td.buffer),O.vertexAttribPointer(Dd,mc,wb,Sb,pb,r),fb.type=wb,fb.size=mc,fb.buffer=Td,fb.normalized=Sb,fb.offset=r,fb.stride=pb;fb.divisor!==kc&&(J.vertexAttribDivisorANGLE(Dd,kc),fb.divisor=kc)}else if(fb.buffer&&(O.disableVertexAttribArray(Dd),fb.buffer=null),fb.x!==Pa||fb.y!==md||fb.z!==$b||fb.w!==ib)O.vertexAttrib4f(Dd,Pa,md,$b,ib),fb.x=Pa,fb.y=md,fb.z=$b,fb.w=ib;A.buffer=a.colorBuffer;Hc=!1;fc=null;lb=0;mb=!1;qb=ta=0;va=1;Ua=0;cb=5126;Cb=Ia=
gb=ya=0;Yb(A)?(Hc=!0,fc=na.createStream(34962,A),cb=fc.dtype):(fc=na.getBuffer(A))?cb=fc.dtype:"constant"in A?(va=2,"number"===typeof A.constant?(gb=A.constant,Ia=Cb=ya=0):(gb=0<A.constant.length?A.constant[0]:0,Ia=1<A.constant.length?A.constant[1]:0,Cb=2<A.constant.length?A.constant[2]:0,ya=3<A.constant.length?A.constant[3]:0)):(fc=Yb(A.buffer)?na.createStream(34962,A.buffer):na.getBuffer(A.buffer),cb="type"in A?ua[A.type]:fc.dtype,mb=!!A.normalized,qb=A.size|0,ta=A.offset|0,Ua=A.stride|0,lb=A.divisor|
0);Bb=da.location;Ra=bc[Bb];if(1===va){Ra.buffer||O.enableVertexAttribArray(Bb);Mc=qb||4;if(Ra.type!==cb||Ra.size!==Mc||Ra.buffer!==fc||Ra.normalized!==mb||Ra.offset!==ta||Ra.stride!==Ua)O.bindBuffer(34962,fc.buffer),O.vertexAttribPointer(Bb,Mc,cb,mb,Ua,ta),Ra.type=cb,Ra.size=Mc,Ra.buffer=fc,Ra.normalized=mb,Ra.offset=ta,Ra.stride=Ua;Ra.divisor!==lb&&(J.vertexAttribDivisorANGLE(Bb,lb),Ra.divisor=lb)}else if(Ra.buffer&&(O.disableVertexAttribArray(Bb),Ra.buffer=null),Ra.x!==gb||Ra.y!==Ia||Ra.z!==Cb||
Ra.w!==ya)O.vertexAttrib4f(Bb,gb,Ia,Cb,ya),Ra.x=gb,Ra.y=Ia,Ra.z=Cb,Ra.w=ya;Jb=ma.location;Za=bc[Jb];Za.buffer||O.enableVertexAttribArray(Jb);if(5126!==Za.type||1!==Za.size||Za.buffer!==d||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)O.bindBuffer(34962,d.buffer),O.vertexAttribPointer(Jb,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=d,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(J.vertexAttribDivisorANGLE(Jb,0),Za.divisor=0);Ub=H.location;wa=bc[Ub];wa.buffer||O.enableVertexAttribArray(Ub);
if(5126!==wa.type||1!==wa.size||wa.buffer!==b||!1!==wa.normalized||4!==wa.offset||8!==wa.stride)O.bindBuffer(34962,b.buffer),O.vertexAttribPointer(Ub,1,5126,!1,8,4),wa.type=5126,wa.size=1,wa.buffer=b,wa.normalized=!1,wa.offset=4,wa.stride=8;0!==wa.divisor&&(J.vertexAttribDivisorANGLE(Ub,0),wa.divisor=0);he=a.scale;O.uniform2f(m.location,he[0],he[1]);Ja=a.scaleFract;O.uniform2f(L.location,Ja[0],Ja[1]);Ob=a.translate;O.uniform2f(la.location,Ob[0],Ob[1]);hb=a.translateFract;O.uniform2f(Vb.location,hb[0],
hb[1]);O.uniform1f(U.location,a.thickness);O.uniform1f(E.location,a.depth);jb=n.call(this,Oa,a,0);O.uniform4f(ub.location,jb[0],jb[1],jb[2],jb[3]);O.uniform1f(Q.location,a.dashLength);O.uniform1f(Z.location,a.opacity);(xa=a.dashTexture)&&"framebuffer"===xa._reglType&&(xa=xa.color[0]);gc=xa._texture;O.uniform1i(ba.location,gc.bind());(Ca=K.elements)?O.bindBuffer(34963,Ca.buffer.buffer):ja.currentVAO&&(Ca=N.getElements(ja.currentVAO.elements))&&O.bindBuffer(34963,Ca.buffer.buffer);rb=a.count;0<rb?Ca?
J.drawElementsInstancedANGLE(5,4,Ca.type,0<<(Ca.type-5121>>1),rb):J.drawArraysInstancedANGLE(5,0,4,rb):0>rb&&(Ca?O.drawElements(5,4,Ca.type,0<<(Ca.type-5121>>1)):O.drawArrays(5,0,4));Y.dirty=!0;ja.setVAO(null);Oa.viewportWidth=y;Oa.viewportHeight=z;oa&&(c.cpuTime+=performance.now()-S);T&&na.destroyStream(ca);Cd&&na.destroyStream(od);Ld&&na.destroyStream(qd);Rb&&na.destroyStream(Td);Hc&&na.destroyStream(fc);gc.unbind()},scope:function(a,f,k){var g,n,m,v,x,M,E,F,u,S,H,J,N,L,O,Q,R,X,ka,ba,U,ia,da,fa,
ja,Z,oc,Da,I,ma,pa,sa,Nb,la,sd,Fc,ed,Nc,sc,bb,vb,Eb,rc,Sa,Lc,dc,pc,ab,Wb,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,Aa,Ib,Ta,qc,eb,uc,Rb,xc,Ka,Sb,r,Tb,Na,pb,wb,ib,Pa,kb,$b,ub,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,ad,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,cc,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,Vb,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,bc,ie,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,
Nd,Pd,Qd,ge,vf,ze,oe,Pe,Qe,Le,re,Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me;g=a.viewport;n=g.x|0;m=g.y|0;v="width"in g?g.width|0:Oa.framebufferWidth-n;x="height"in g?g.height|0:Oa.framebufferHeight-m;M=Oa.viewportWidth;Oa.viewportWidth=v;E=Oa.viewportHeight;Oa.viewportHeight=x;F=D[0];D[0]=n;u=D[1];D[1]=m;S=D[2];D[2]=v;H=D[3];D[3]=x;J=ca[0];ca[0]=0;N=ca[1];ca[1]=0;L=ca[2];ca[2]=0;O=ca[3];ca[3]=0;Q=$a.blend_enable;$a.blend_enable=!0;R=La[0];La[0]=32774;X=La[1];La[1]=32774;ka=Ga[0];Ga[0]=
770;ba=Ga[1];Ga[1]=771;U=Ga[2];Ga[2]=773;ia=Ga[3];Ga[3]=1;da=e.call(this,Oa,a,k);fa=$a.depth_enable;$a.depth_enable=da;ja=a.viewport;Z=ja.x|0;oc=ja.y|0;Da="width"in ja?ja.width|0:Oa.framebufferWidth-Z;I="height"in ja?ja.height|0:Oa.framebufferHeight-oc;ma=aa[0];aa[0]=Z;pa=aa[1];aa[1]=oc;sa=aa[2];aa[2]=Da;Nb=aa[3];aa[3]=I;la=$a.scissor_enable;$a.scissor_enable=!0;sd=$a.stencil_enable;$a.stencil_enable=!1;if(Fc=Y.profile)ed=performance.now(),c.count++;Nc=K.offset;K.offset=0;sc=K.count;K.count=4;bb=
a.count;vb=K.instances;K.instances=bb;Eb=K.primitive;K.primitive=5;rc=a.dashLength;Sa=y[23];y[23]=rc;Lc=a.dashTexture;dc=y[24];y[24]=Lc;pc=a.depth;ab=y[22];y[22]=pc;Wb=a.id;Ac=y[31];y[31]=Wb;Zb=a.miterLimit;Gc=y[32];y[32]=Zb;Sc=h.call(this,Oa,a,k);Ma=y[33];y[33]=Sc;Fb=a.opacity;Wa=y[10];y[10]=Fb;ra=Oa.pixelRatio;Aa=y[34];y[34]=ra;Ib=a.scale;Ta=y[6];y[6]=Ib;qc=a.scaleFract;eb=y[7];y[7]=qc;uc=a.thickness;Rb=y[21];y[21]=uc;xc=a.translate;Ka=y[8];y[8]=xc;Sb=a.translateFract;r=y[9];y[9]=Sb;Tb=q.call(this,
Oa,a,k);Na=y[3];y[3]=Tb;W.buffer=a.positionBuffer;pb=!1;wb=null;ib=0;Pa=!1;$b=kb=0;ub=1;fb=0;mc=5126;mb=lb=fc=Hc=0;Yb(W)?(pb=!0,wb=na.createStream(34962,W),mc=wb.dtype):(wb=na.getBuffer(W))?mc=wb.dtype:"constant"in W?(ub=2,"number"===typeof W.constant?(fc=W.constant,lb=mb=Hc=0):(fc=0<W.constant.length?W.constant[0]:0,lb=1<W.constant.length?W.constant[1]:0,mb=2<W.constant.length?W.constant[2]:0,Hc=3<W.constant.length?W.constant[3]:0)):(wb=Yb(W.buffer)?na.createStream(34962,W.buffer):na.getBuffer(W.buffer),
mc="type"in W?ua[W.type]:wb.dtype,Pa=!!W.normalized,$b=W.size|0,kb=W.offset|0,fb=W.stride|0,ib=W.divisor|0);ta=B.buffer;B.buffer=wb;qb=B.divisor;B.divisor=ib;va=B.normalized;B.normalized=Pa;Ua=B.offset;B.offset=kb;cb=B.size;B.size=$b;ya=B.state;B.state=ub;gb=B.stride;B.stride=fb;Ia=B.type;B.type=mc;Cb=B.w;B.w=Hc;Bb=B.x;B.x=fc;Ra=B.y;B.y=lb;Mc=B.z;B.z=mb;ha.buffer=a.positionFractBuffer;Jb=!1;Za=null;Ub=0;wa=!1;Ja=ad=0;Ob=1;hb=0;jb=5126;rb=Ca=gc=xa=0;Yb(ha)?(Jb=!0,Za=na.createStream(34962,ha),jb=Za.dtype):
(Za=na.getBuffer(ha))?jb=Za.dtype:"constant"in ha?(Ob=2,"number"===typeof ha.constant?(gc=ha.constant,Ca=rb=xa=0):(gc=0<ha.constant.length?ha.constant[0]:0,Ca=1<ha.constant.length?ha.constant[1]:0,rb=2<ha.constant.length?ha.constant[2]:0,xa=3<ha.constant.length?ha.constant[3]:0)):(Za=Yb(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),jb="type"in ha?ua[ha.type]:Za.dtype,wa=!!ha.normalized,Ja=ha.size|0,ad=ha.offset|0,hb=ha.stride|0,Ub=ha.divisor|0);sb=l.buffer;l.buffer=Za;Xa=l.divisor;
l.divisor=Ub;Ya=l.normalized;l.normalized=wa;nc=l.offset;l.offset=ad;Ic=l.size;l.size=Ja;vc=l.state;l.state=Ob;Va=l.stride;l.stride=hb;Lb=l.type;l.type=jb;Zc=l.w;l.w=xa;Ea=l.x;l.x=gc;yc=l.y;l.y=Ca;Qa=l.z;l.z=rb;qa.buffer=a.positionBuffer;za=!1;nb=null;xb=0;Db=!1;wc=tb=0;yb=1;id=0;tc=5126;fd=ld=Oc=cc=0;Yb(qa)?(za=!0,nb=na.createStream(34962,qa),tc=nb.dtype):(nb=na.getBuffer(qa))?tc=nb.dtype:"constant"in qa?(yb=2,"number"===typeof qa.constant?(Oc=qa.constant,ld=fd=cc=0):(Oc=0<qa.constant.length?qa.constant[0]:
0,ld=1<qa.constant.length?qa.constant[1]:0,fd=2<qa.constant.length?qa.constant[2]:0,cc=3<qa.constant.length?qa.constant[3]:0)):(nb=Yb(qa.buffer)?na.createStream(34962,qa.buffer):na.getBuffer(qa.buffer),tc="type"in qa?ua[qa.type]:nb.dtype,Db=!!qa.normalized,wc=qa.size|0,tb=qa.offset|0,id=qa.stride|0,xb=qa.divisor|0);Xb=w.buffer;w.buffer=nb;ec=w.divisor;w.divisor=xb;Pb=w.normalized;w.normalized=Db;Fa=w.offset;w.offset=tb;ac=w.size;w.size=wc;ob=w.state;w.state=yb;zb=w.stride;w.stride=id;Mb=w.type;w.type=
tc;Qb=w.w;w.w=cc;hc=w.x;w.x=Oc;jc=w.y;w.y=ld;Vb=w.z;w.z=fd;G.buffer=a.positionFractBuffer;Bc=!1;Cc=null;Dc=0;Pc=!1;Tc=$c=0;Qc=1;Kb=0;Gb=5126;ic=Uc=Jc=Rc=0;Yb(G)?(Bc=!0,Cc=na.createStream(34962,G),Gb=Cc.dtype):(Cc=na.getBuffer(G))?Gb=Cc.dtype:"constant"in G?(Qc=2,"number"===typeof G.constant?(Jc=G.constant,Uc=ic=Rc=0):(Jc=0<G.constant.length?G.constant[0]:0,Uc=1<G.constant.length?G.constant[1]:0,ic=2<G.constant.length?G.constant[2]:0,Rc=3<G.constant.length?G.constant[3]:0)):(Cc=Yb(G.buffer)?na.createStream(34962,
G.buffer):na.getBuffer(G.buffer),Gb="type"in G?ua[G.type]:Cc.dtype,Pc=!!G.normalized,Tc=G.size|0,$c=G.offset|0,Kb=G.stride|0,Dc=G.divisor|0);Xc=P.buffer;P.buffer=Cc;wd=P.divisor;P.divisor=Dc;gd=P.normalized;P.normalized=Pc;jd=P.offset;P.offset=$c;Yc=P.size;P.size=Tc;bc=P.state;P.state=Qc;ie=P.stride;P.stride=Kb;je=P.type;P.type=Gb;ue=P.w;P.w=Rc;me=P.x;P.x=Jc;Id=P.y;P.y=Uc;Gd=P.z;P.z=ic;A.buffer=a.colorBuffer;dd=!1;Ec=null;nd=0;hd=!1;pd=bd=0;Bd=1;Ed=0;ve=5126;be=ce=ye=ne=0;Yb(A)?(dd=!0,Ec=na.createStream(34962,
A),ve=Ec.dtype):(Ec=na.getBuffer(A))?ve=Ec.dtype:"constant"in A?(Bd=2,"number"===typeof A.constant?(ye=A.constant,ce=be=ne=0):(ye=0<A.constant.length?A.constant[0]:0,ce=1<A.constant.length?A.constant[1]:0,be=2<A.constant.length?A.constant[2]:0,ne=3<A.constant.length?A.constant[3]:0)):(Ec=Yb(A.buffer)?na.createStream(34962,A.buffer):na.getBuffer(A.buffer),ve="type"in A?ua[A.type]:Ec.dtype,hd=!!A.normalized,pd=A.size|0,bd=A.offset|0,Ed=A.stride|0,nd=A.divisor|0);ae=z.buffer;z.buffer=Ec;pe=z.divisor;
z.divisor=nd;Zd=z.normalized;z.normalized=hd;fe=z.offset;z.offset=bd;zc=z.size;z.size=pd;Wc=z.state;z.state=Bd;qe=z.stride;z.stride=Ed;ke=z.type;z.type=ve;Hd=z.w;z.w=ne;Nd=z.x;z.x=ye;Pd=z.y;z.y=ce;Qd=z.z;z.z=be;ge=p.buffer;p.buffer=d;vf=p.divisor;p.divisor=0;ze=p.normalized;p.normalized=!1;oe=p.offset;p.offset=0;Pe=p.size;p.size=0;Qe=p.state;p.state=1;Le=p.stride;p.stride=8;re=p.type;p.type=5126;Ce=p.w;p.w=0;Fe=p.x;p.x=0;Ge=p.y;p.y=0;He=p.z;p.z=0;De=C.buffer;C.buffer=b;Jd=C.divisor;C.divisor=0;Ud=
C.normalized;C.normalized=!1;Yd=C.offset;C.offset=4;$d=C.size;C.size=0;Ie=C.state;C.state=1;zd=C.stride;C.stride=8;Rd=C.type;C.type=5126;Ae=C.w;C.w=0;Je=C.x;C.x=0;af=C.y;C.y=0;Ze=C.z;C.z=0;Re=T.vert;T.vert=20;Me=T.frag;T.frag=19;Y.dirty=!0;f(Oa,a,k);Oa.viewportWidth=M;Oa.viewportHeight=E;D[0]=F;D[1]=u;D[2]=S;D[3]=H;ca[0]=J;ca[1]=N;ca[2]=L;ca[3]=O;$a.blend_enable=Q;La[0]=R;La[1]=X;Ga[0]=ka;Ga[1]=ba;Ga[2]=U;Ga[3]=ia;$a.depth_enable=fa;aa[0]=ma;aa[1]=pa;aa[2]=sa;aa[3]=Nb;$a.scissor_enable=la;$a.stencil_enable=
sd;Fc&&(c.cpuTime+=performance.now()-ed);K.offset=Nc;K.count=sc;K.instances=vb;K.primitive=Eb;y[23]=Sa;y[24]=dc;y[22]=ab;y[31]=Ac;y[32]=Gc;y[33]=Ma;y[10]=Wa;y[34]=Aa;y[6]=Ta;y[7]=eb;y[21]=Rb;y[8]=Ka;y[9]=r;y[3]=Na;pb&&na.destroyStream(wb);B.buffer=ta;B.divisor=qb;B.normalized=va;B.offset=Ua;B.size=cb;B.state=ya;B.stride=gb;B.type=Ia;B.w=Cb;B.x=Bb;B.y=Ra;B.z=Mc;Jb&&na.destroyStream(Za);l.buffer=sb;l.divisor=Xa;l.normalized=Ya;l.offset=nc;l.size=Ic;l.state=vc;l.stride=Va;l.type=Lb;l.w=Zc;l.x=Ea;l.y=
yc;l.z=Qa;za&&na.destroyStream(nb);w.buffer=Xb;w.divisor=ec;w.normalized=Pb;w.offset=Fa;w.size=ac;w.state=ob;w.stride=zb;w.type=Mb;w.w=Qb;w.x=hc;w.y=jc;w.z=Vb;Bc&&na.destroyStream(Cc);P.buffer=Xc;P.divisor=wd;P.normalized=gd;P.offset=jd;P.size=Yc;P.state=bc;P.stride=ie;P.type=je;P.w=ue;P.x=me;P.y=Id;P.z=Gd;dd&&na.destroyStream(Ec);z.buffer=ae;z.divisor=pe;z.normalized=Zd;z.offset=fe;z.size=zc;z.state=Wc;z.stride=qe;z.type=ke;z.w=Hd;z.x=Nd;z.y=Pd;z.z=Qd;p.buffer=ge;p.divisor=vf;p.normalized=ze;p.offset=
oe;p.size=Pe;p.state=Qe;p.stride=Le;p.type=re;p.w=Ce;p.x=Fe;p.y=Ge;p.z=He;C.buffer=De;C.divisor=Jd;C.normalized=Ud;C.offset=Yd;C.size=$d;C.state=Ie;C.stride=zd;C.type=Rd;C.w=Ae;C.x=Je;C.y=af;C.z=Ze;T.vert=Re;T.frag=Me;Y.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,c,f,g,d,b,n,e,h,q,B,l,w,P,z,p,C,u,I,J,Ka,v,x,k,da,Q,ba,E,ma,H,Z,m,L,U,la,Vb,ub,bc,na,Oa,Y){var K,
N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa,Wb,oc,xc,sd,Fc,aa,M,ka,Da,vb,ab,ad,F,D,ia,ua,W,ha,qa,G,A,ea,V,Ba,Ha,t;K=a.attributes;N=a.buffer;R=a.context;pa=a.current;O=a.draw;Yb=a.elements;$a=a.extensions;T=a.framebuffer;y=a.gl;ja=a.isBufferArgs;ca=a.next;Aa=a.shader;La=a.uniforms;cc=a.vao;Ga=ca.blend_color;X=pa.blend_color;kb=ca.blend_equation;fa=pa.blend_equation;sa=ca.blend_func;Wb=pa.blend_func;oc=ca.colorMask;xc=pa.colorMask;sd=ca.depth_range;Fc=pa.depth_range;aa=ca.polygonOffset_offset;M=
pa.polygonOffset_offset;ka=ca.sample_coverage;Da=pa.sample_coverage;vb=ca.scissor_box;ab=pa.scissor_box;ad=ca.stencil_func;F=pa.stencil_func;D=ca.stencil_opBack;ia=pa.stencil_opBack;ua=ca.stencil_opFront;W=pa.stencil_opFront;ha=ca.viewport;qa=pa.viewport;G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};A={divisor:1,offset:0,stride:4};ea={divisor:1,offset:8,stride:8};V={divisor:1,offset:4,stride:4};Ba={divisor:1,offset:16,stride:8};Ha={divisor:1,offset:24,
stride:8};t={divisor:1,offset:0,stride:8};return{batch:function(a,e){var h,f,g,l,n,q;h=T.next;h!==T.cur&&(h?y.bindFramebuffer(36160,h.framebuffer):y.bindFramebuffer(36160,null),T.cur=h);if(pa.dirty){var B,w,p,P,z,C,u,oa,S,ha,I,sa,vb,Aa,La,Vd,Wd,Nb,Ga,yd,kd,kb,od,cd,Vc,vd,ed,Nc,sc,bb;B=ca.dither;B!==pa.dither&&(B?y.enable(3024):y.disable(3024),pa.dither=B);w=ca.depth_func;w!==pa.depth_func&&(y.depthFunc(w),pa.depth_func=w);p=sd[0];P=sd[1];if(p!==Fc[0]||P!==Fc[1])y.depthRange(p,P),Fc[0]=p,Fc[1]=P;z=
ca.depth_mask;z!==pa.depth_mask&&(y.depthMask(z),pa.depth_mask=z);C=oc[0];u=oc[1];oa=oc[2];S=oc[3];if(C!==xc[0]||u!==xc[1]||oa!==xc[2]||S!==xc[3])y.colorMask(C,u,oa,S),xc[0]=C,xc[1]=u,xc[2]=oa,xc[3]=S;ha=ca.frontFace;ha!==pa.frontFace&&(y.frontFace(ha),pa.frontFace=ha);I=ca.lineWidth;I!==pa.lineWidth&&(y.lineWidth(I),pa.lineWidth=I);sa=ca.polygonOffset_enable;sa!==pa.polygonOffset_enable&&(sa?y.enable(32823):y.disable(32823),pa.polygonOffset_enable=sa);vb=aa[0];Aa=aa[1];if(vb!==M[0]||Aa!==M[1])y.polygonOffset(vb,
Aa),M[0]=vb,M[1]=Aa;La=ca.sample_alpha;La!==pa.sample_alpha&&(La?y.enable(32926):y.disable(32926),pa.sample_alpha=La);Vd=ca.sample_enable;Vd!==pa.sample_enable&&(Vd?y.enable(32928):y.disable(32928),pa.sample_enable=Vd);Wd=ka[0];Nb=ka[1];if(Wd!==Da[0]||Nb!==Da[1])y.sampleCoverage(Wd,Nb),Da[0]=Wd,Da[1]=Nb;Ga=ca.stencil_mask;Ga!==pa.stencil_mask&&(y.stencilMask(Ga),pa.stencil_mask=Ga);yd=ad[0];kd=ad[1];kb=ad[2];if(yd!==F[0]||kd!==F[1]||kb!==F[2])y.stencilFunc(yd,kd,kb),F[0]=yd,F[1]=kd,F[2]=kb;od=ua[0];
cd=ua[1];Vc=ua[2];vd=ua[3];if(od!==W[0]||cd!==W[1]||Vc!==W[2]||vd!==W[3])y.stencilOpSeparate(od,cd,Vc,vd),W[0]=od,W[1]=cd,W[2]=Vc,W[3]=vd;ed=D[0];Nc=D[1];sc=D[2];bb=D[3];if(ed!==ia[0]||Nc!==ia[1]||sc!==ia[2]||bb!==ia[3])y.stencilOpSeparate(ed,Nc,sc,bb),ia[0]=ed,ia[1]=Nc,ia[2]=sc,ia[3]=bb}y.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;y.enable(3042);pa.blend_enable=!0;y.blendEquationSeparate(32774,32774);fa[0]=32774;fa[1]=32774;y.blendFuncSeparate(770,771,773,1);Wb[0]=770;Wb[1]=771;Wb[2]=773;Wb[3]=
1;y.enable(2884);pa.cull_enable=!0;y.cullFace(1029);pa.cull_face=1029;y.enable(3089);pa.scissor_enable=!0;y.disable(2960);pa.stencil_enable=!1;if(f=pa.profile)g=performance.now(),c.count+=e;y.useProgram(J.program);l=$a.angle_instanced_arrays;var Kc,Eb,rc,Sa,Lc;cc.setVAO(null);Kc=Z.location;Eb=K[Kc];Eb.buffer||y.enableVertexAttribArray(Kc);if(5126!==Eb.type||1!==Eb.size||Eb.buffer!==d||!1!==Eb.normalized||0!==Eb.offset||8!==Eb.stride)y.bindBuffer(34962,d.buffer),y.vertexAttribPointer(Kc,1,5126,!1,
8,0),Eb.type=5126,Eb.size=1,Eb.buffer=d,Eb.normalized=!1,Eb.offset=0,Eb.stride=8;0!==Eb.divisor&&(l.vertexAttribDivisorANGLE(Kc,0),Eb.divisor=0);rc=m.location;Sa=K[rc];Sa.buffer||y.enableVertexAttribArray(rc);if(5126!==Sa.type||1!==Sa.size||Sa.buffer!==b||!1!==Sa.normalized||4!==Sa.offset||8!==Sa.stride)y.bindBuffer(34962,b.buffer),y.vertexAttribPointer(rc,1,5126,!1,8,4),Sa.type=5126,Sa.size=1,Sa.buffer=b,Sa.normalized=!1,Sa.offset=4,Sa.stride=8;0!==Sa.divisor&&(l.vertexAttribDivisorANGLE(rc,0),Sa.divisor=
0);(Lc=O.elements)?y.bindBuffer(34963,Lc.buffer.buffer):cc.currentVAO&&(Lc=Yb.getElements(cc.currentVAO.elements))&&y.bindBuffer(34963,Lc.buffer.buffer);for(n=0;n<e;++n){q=a[n];var dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,nf,Bc,Cc,Dc,Pc,$c,Tc,Qc,
Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,df,ie,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc;dc=q.viewport;pc=dc.x|0;Ld=dc.y|0;qd="width"in dc?dc.width|0:R.framebufferWidth-pc;Ac="height"in dc?dc.height|0:R.framebufferHeight-Ld;Zb=R.viewportWidth;R.viewportWidth=qd;Gc=R.viewportHeight;R.viewportHeight=Ac;y.viewport(pc,Ld,qd,Ac);qa[0]=pc;qa[1]=Ld;qa[2]=qd;qa[3]=Ac;(Sc=Ka.call(this,R,q,n))?y.enable(2929):y.disable(2929);pa.depth_enable=Sc;Ma=q.viewport;Fb=Ma.x|0;Wa=Ma.y|0;ra="width"in
Ma?Ma.width|0:R.framebufferWidth-Fb;td="height"in Ma?Ma.height|0:R.framebufferHeight-Wa;y.scissor(Fb,Wa,ra,td);ab[0]=Fb;ab[1]=Wa;ab[2]=ra;ab[3]=td;ea.buffer=q.positionBuffer;Ib=!1;Ta=null;qc=0;eb=!1;Rb=uc=0;Td=1;kc=0;Sb=5126;pb=Na=Tb=r=0;ja(ea)?(Ib=!0,Ta=N.createStream(34962,ea),Sb=Ta.dtype):(Ta=N.getBuffer(ea))?Sb=Ta.dtype:"constant"in ea?(Td=2,"number"===typeof ea.constant?(Tb=ea.constant,Na=pb=r=0):(Tb=0<ea.constant.length?ea.constant[0]:0,Na=1<ea.constant.length?ea.constant[1]:0,pb=2<ea.constant.length?
ea.constant[2]:0,r=3<ea.constant.length?ea.constant[3]:0)):(Ta=ja(ea.buffer)?N.createStream(34962,ea.buffer):N.getBuffer(ea.buffer),Sb="type"in ea?G[ea.type]:Ta.dtype,eb=!!ea.normalized,Rb=ea.size|0,uc=ea.offset|0,kc=ea.stride|0,qc=ea.divisor|0);wb=da.location;ib=K[wb];if(1===Td){ib.buffer||y.enableVertexAttribArray(wb);Pa=Rb||2;if(ib.type!==Sb||ib.size!==Pa||ib.buffer!==Ta||ib.normalized!==eb||ib.offset!==uc||ib.stride!==kc)y.bindBuffer(34962,Ta.buffer),y.vertexAttribPointer(wb,Pa,Sb,eb,kc,uc),ib.type=
Sb,ib.size=Pa,ib.buffer=Ta,ib.normalized=eb,ib.offset=uc,ib.stride=kc;ib.divisor!==qc&&(l.vertexAttribDivisorANGLE(wb,qc),ib.divisor=qc)}else if(ib.buffer&&(y.disableVertexAttribArray(wb),ib.buffer=null),ib.x!==Tb||ib.y!==Na||ib.z!==pb||ib.w!==r)y.vertexAttrib4f(wb,Tb,Na,pb,r),ib.x=Tb,ib.y=Na,ib.z=pb,ib.w=r;Ba.buffer=q.positionBuffer;md=!1;$b=null;Dd=0;fb=!1;Hc=mc=0;fc=1;lb=0;mb=5126;Ua=va=qb=ta=0;ja(Ba)?(md=!0,$b=N.createStream(34962,Ba),mb=$b.dtype):($b=N.getBuffer(Ba))?mb=$b.dtype:"constant"in
Ba?(fc=2,"number"===typeof Ba.constant?(qb=Ba.constant,va=Ua=ta=0):(qb=0<Ba.constant.length?Ba.constant[0]:0,va=1<Ba.constant.length?Ba.constant[1]:0,Ua=2<Ba.constant.length?Ba.constant[2]:0,ta=3<Ba.constant.length?Ba.constant[3]:0)):($b=ja(Ba.buffer)?N.createStream(34962,Ba.buffer):N.getBuffer(Ba.buffer),mb="type"in Ba?G[Ba.type]:$b.dtype,fb=!!Ba.normalized,Hc=Ba.size|0,mc=Ba.offset|0,lb=Ba.stride|0,Dd=Ba.divisor|0);cb=ba.location;ya=K[cb];if(1===fc){ya.buffer||y.enableVertexAttribArray(cb);gb=Hc||
2;if(ya.type!==mb||ya.size!==gb||ya.buffer!==$b||ya.normalized!==fb||ya.offset!==mc||ya.stride!==lb)y.bindBuffer(34962,$b.buffer),y.vertexAttribPointer(cb,gb,mb,fb,lb,mc),ya.type=mb,ya.size=gb,ya.buffer=$b,ya.normalized=fb,ya.offset=mc,ya.stride=lb;ya.divisor!==Dd&&(l.vertexAttribDivisorANGLE(cb,Dd),ya.divisor=Dd)}else if(ya.buffer&&(y.disableVertexAttribArray(cb),ya.buffer=null),ya.x!==qb||ya.y!==va||ya.z!==Ua||ya.w!==ta)y.vertexAttrib4f(cb,qb,va,Ua,ta),ya.x=qb,ya.y=va,ya.z=Ua,ya.w=ta;Ha.buffer=
q.positionBuffer;Ia=!1;Cb=null;Bb=0;Ra=!1;Jb=Mc=0;Za=1;Ub=0;wa=5126;hb=Ob=Ja=he=0;ja(Ha)?(Ia=!0,Cb=N.createStream(34962,Ha),wa=Cb.dtype):(Cb=N.getBuffer(Ha))?wa=Cb.dtype:"constant"in Ha?(Za=2,"number"===typeof Ha.constant?(Ja=Ha.constant,Ob=hb=he=0):(Ja=0<Ha.constant.length?Ha.constant[0]:0,Ob=1<Ha.constant.length?Ha.constant[1]:0,hb=2<Ha.constant.length?Ha.constant[2]:0,he=3<Ha.constant.length?Ha.constant[3]:0)):(Cb=ja(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),wa="type"in
Ha?G[Ha.type]:Cb.dtype,Ra=!!Ha.normalized,Jb=Ha.size|0,Mc=Ha.offset|0,Ub=Ha.stride|0,Bb=Ha.divisor|0);jb=la.location;xa=K[jb];if(1===Za){xa.buffer||y.enableVertexAttribArray(jb);gc=Jb||2;if(xa.type!==wa||xa.size!==gc||xa.buffer!==Cb||xa.normalized!==Ra||xa.offset!==Mc||xa.stride!==Ub)y.bindBuffer(34962,Cb.buffer),y.vertexAttribPointer(jb,gc,wa,Ra,Ub,Mc),xa.type=wa,xa.size=gc,xa.buffer=Cb,xa.normalized=Ra,xa.offset=Mc,xa.stride=Ub;xa.divisor!==Bb&&(l.vertexAttribDivisorANGLE(jb,Bb),xa.divisor=Bb)}else if(xa.buffer&&
(y.disableVertexAttribArray(jb),xa.buffer=null),xa.x!==Ja||xa.y!==Ob||xa.z!==hb||xa.w!==he)y.vertexAttrib4f(jb,Ja,Ob,hb,he),xa.x=Ja,xa.y=Ob,xa.z=hb,xa.w=he;t.buffer=q.positionBuffer;Ca=!1;rb=null;sb=0;Xa=!1;nc=Ya=0;Ic=1;vc=0;Va=5126;yc=Ea=Zc=Lb=0;ja(t)?(Ca=!0,rb=N.createStream(34962,t),Va=rb.dtype):(rb=N.getBuffer(t))?Va=rb.dtype:"constant"in t?(Ic=2,"number"===typeof t.constant?(Zc=t.constant,Ea=yc=Lb=0):(Zc=0<t.constant.length?t.constant[0]:0,Ea=1<t.constant.length?t.constant[1]:0,yc=2<t.constant.length?
t.constant[2]:0,Lb=3<t.constant.length?t.constant[3]:0)):(rb=ja(t.buffer)?N.createStream(34962,t.buffer):N.getBuffer(t.buffer),Va="type"in t?G[t.type]:rb.dtype,Xa=!!t.normalized,nc=t.size|0,Ya=t.offset|0,vc=t.stride|0,sb=t.divisor|0);Qa=ub.location;za=K[Qa];if(1===Ic){za.buffer||y.enableVertexAttribArray(Qa);nb=nc||2;if(za.type!==Va||za.size!==nb||za.buffer!==rb||za.normalized!==Xa||za.offset!==Ya||za.stride!==vc)y.bindBuffer(34962,rb.buffer),y.vertexAttribPointer(Qa,nb,Va,Xa,vc,Ya),za.type=Va,za.size=
nb,za.buffer=rb,za.normalized=Xa,za.offset=Ya,za.stride=vc;za.divisor!==sb&&(l.vertexAttribDivisorANGLE(Qa,sb),za.divisor=sb)}else if(za.buffer&&(y.disableVertexAttribArray(Qa),za.buffer=null),za.x!==Zc||za.y!==Ea||za.z!==yc||za.w!==Lb)y.vertexAttrib4f(Qa,Zc,Ea,yc,Lb),za.x=Zc,za.y=Ea,za.z=yc,za.w=Lb;A.buffer=q.colorBuffer;xb=!1;Db=null;tb=0;wc=!1;id=yb=0;tc=1;Md=0;Oc=5126;ec=Xb=fd=ld=0;ja(A)?(xb=!0,Db=N.createStream(34962,A),Oc=Db.dtype):(Db=N.getBuffer(A))?Oc=Db.dtype:"constant"in A?(tc=2,"number"===
typeof A.constant?(fd=A.constant,Xb=ec=ld=0):(fd=0<A.constant.length?A.constant[0]:0,Xb=1<A.constant.length?A.constant[1]:0,ec=2<A.constant.length?A.constant[2]:0,ld=3<A.constant.length?A.constant[3]:0)):(Db=ja(A.buffer)?N.createStream(34962,A.buffer):N.getBuffer(A.buffer),Oc="type"in A?G[A.type]:Db.dtype,wc=!!A.normalized,id=A.size|0,yb=A.offset|0,Md=A.stride|0,tb=A.divisor|0);Pb=k.location;Fa=K[Pb];if(1===tc){Fa.buffer||y.enableVertexAttribArray(Pb);ac=id||4;if(Fa.type!==Oc||Fa.size!==ac||Fa.buffer!==
Db||Fa.normalized!==wc||Fa.offset!==yb||Fa.stride!==Md)y.bindBuffer(34962,Db.buffer),y.vertexAttribPointer(Pb,ac,Oc,wc,Md,yb),Fa.type=Oc,Fa.size=ac,Fa.buffer=Db,Fa.normalized=wc,Fa.offset=yb,Fa.stride=Md;Fa.divisor!==tb&&(l.vertexAttribDivisorANGLE(Pb,tb),Fa.divisor=tb)}else if(Fa.buffer&&(y.disableVertexAttribArray(Pb),Fa.buffer=null),Fa.x!==fd||Fa.y!==Xb||Fa.z!==ec||Fa.w!==ld)y.vertexAttrib4f(Pb,fd,Xb,ec,ld),Fa.x=fd,Fa.y=Xb,Fa.z=ec,Fa.w=ld;V.buffer=q.colorBuffer;ob=!1;zb=null;Mb=0;Qb=!1;jc=hc=0;
nf=1;Bc=0;Cc=5126;Tc=$c=Pc=Dc=0;ja(V)?(ob=!0,zb=N.createStream(34962,V),Cc=zb.dtype):(zb=N.getBuffer(V))?Cc=zb.dtype:"constant"in V?(nf=2,"number"===typeof V.constant?(Pc=V.constant,$c=Tc=Dc=0):(Pc=0<V.constant.length?V.constant[0]:0,$c=1<V.constant.length?V.constant[1]:0,Tc=2<V.constant.length?V.constant[2]:0,Dc=3<V.constant.length?V.constant[3]:0)):(zb=ja(V.buffer)?N.createStream(34962,V.buffer):N.getBuffer(V.buffer),Cc="type"in V?G[V.type]:zb.dtype,Qb=!!V.normalized,jc=V.size|0,hc=V.offset|0,Bc=
V.stride|0,Mb=V.divisor|0);Qc=Q.location;Kb=K[Qc];if(1===nf){Kb.buffer||y.enableVertexAttribArray(Qc);Gb=jc||4;if(Kb.type!==Cc||Kb.size!==Gb||Kb.buffer!==zb||Kb.normalized!==Qb||Kb.offset!==hc||Kb.stride!==Bc)y.bindBuffer(34962,zb.buffer),y.vertexAttribPointer(Qc,Gb,Cc,Qb,Bc,hc),Kb.type=Cc,Kb.size=Gb,Kb.buffer=zb,Kb.normalized=Qb,Kb.offset=hc,Kb.stride=Bc;Kb.divisor!==Mb&&(l.vertexAttribDivisorANGLE(Qc,Mb),Kb.divisor=Mb)}else if(Kb.buffer&&(y.disableVertexAttribArray(Qc),Kb.buffer=null),Kb.x!==Pc||
Kb.y!==$c||Kb.z!==Tc||Kb.w!==Dc)y.vertexAttrib4f(Qc,Pc,$c,Tc,Dc),Kb.x=Pc,Kb.y=$c,Kb.z=Tc,Kb.w=Dc;Rc=q.scale;Jc=Rc[0];ic=Rc[1];n&&Uc===Jc&&Xc===ic||(Uc=Jc,Xc=ic,y.uniform2f(bc.location,Jc,ic));wd=q.translate;gd=wd[0];Yc=wd[1];n&&jd===gd&&df===Yc||(jd=gd,df=Yc,y.uniform2f(Oa.location,gd,Yc));ie=q.thickness;n&&je===ie||(je=ie,y.uniform1f(na.location,ie));ue=q.depth;n&&me===ue||(me=ue,y.uniform1f(H.location,ue));Id=v.call(this,R,q,n);Gd=Id[0];Ec=Id[1];hd=Id[2];pd=Id[3];n&&dd===Gd&&nd===Ec&&bd===hd&&Bd===
pd||(dd=Gd,nd=Ec,bd=hd,Bd=pd,y.uniform4f(Y.location,Gd,Ec,hd,pd));Ed=q.miterLimit;n&&ve===Ed||(ve=Ed,y.uniform1f(L.location,Ed));ne=x.call(this,R,q,n);n&&ye===ne||(ye=ne,y.uniform1f(U.location,ne));ce=q.dashLength;n&&be===ce||(be=ce,y.uniform1f(E.location,ce));ae=q.opacity;n&&pe===ae||(pe=ae,y.uniform1f(Vb.location,ae));(Zd=q.dashTexture)&&"framebuffer"===Zd._reglType&&(Zd=Zd.color[0]);fe=Zd._texture;y.uniform1i(ma.location,fe.bind());zc=q.count;0<zc?Lc?l.drawElementsInstancedANGLE(5,4,Lc.type,0<<
(Lc.type-5121>>1),zc):l.drawArraysInstancedANGLE(5,0,4,zc):0>zc&&(Lc?y.drawElements(5,4,Lc.type,0<<(Lc.type-5121>>1)):y.drawArrays(5,0,4));R.viewportWidth=Zb;R.viewportHeight=Gc;Ib&&N.destroyStream(Ta);md&&N.destroyStream($b);Ia&&N.destroyStream(Cb);Ca&&N.destroyStream(rb);xb&&N.destroyStream(Db);ob&&N.destroyStream(zb);fe.unbind()}pa.dirty=!0;cc.setVAO(null);f&&(c.cpuTime+=performance.now()-g)},draw:function(a){var h,l,q,B,w,v,p,x,P,z,C,u,J,oa,S,ha,I,sa,vb,Aa,La,Ka,Vd,Wd,Nb,Ga,kb,kd,Cd,od,cd,Vc,
vd,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id;h=T.next;h!==T.cur&&(h?y.bindFramebuffer(36160,h.framebuffer):y.bindFramebuffer(36160,null),T.cur=h);if(pa.dirty){var tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,nf,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic;tc=ca.dither;tc!==
pa.dither&&(tc?y.enable(3024):y.disable(3024),pa.dither=tc);Md=ca.depth_func;Md!==pa.depth_func&&(y.depthFunc(Md),pa.depth_func=Md);Oc=sd[0];ld=sd[1];if(Oc!==Fc[0]||ld!==Fc[1])y.depthRange(Oc,ld),Fc[0]=Oc,Fc[1]=ld;fd=ca.depth_mask;fd!==pa.depth_mask&&(y.depthMask(fd),pa.depth_mask=fd);Xb=oc[0];ec=oc[1];Pb=oc[2];Fa=oc[3];if(Xb!==xc[0]||ec!==xc[1]||Pb!==xc[2]||Fa!==xc[3])y.colorMask(Xb,ec,Pb,Fa),xc[0]=Xb,xc[1]=ec,xc[2]=Pb,xc[3]=Fa;ac=ca.frontFace;ac!==pa.frontFace&&(y.frontFace(ac),pa.frontFace=ac);
ob=ca.lineWidth;ob!==pa.lineWidth&&(y.lineWidth(ob),pa.lineWidth=ob);zb=ca.polygonOffset_enable;zb!==pa.polygonOffset_enable&&(zb?y.enable(32823):y.disable(32823),pa.polygonOffset_enable=zb);Mb=aa[0];Qb=aa[1];if(Mb!==M[0]||Qb!==M[1])y.polygonOffset(Mb,Qb),M[0]=Mb,M[1]=Qb;hc=ca.sample_alpha;hc!==pa.sample_alpha&&(hc?y.enable(32926):y.disable(32926),pa.sample_alpha=hc);jc=ca.sample_enable;jc!==pa.sample_enable&&(jc?y.enable(32928):y.disable(32928),pa.sample_enable=jc);nf=ka[0];Bc=ka[1];if(nf!==Da[0]||
Bc!==Da[1])y.sampleCoverage(nf,Bc),Da[0]=nf,Da[1]=Bc;Cc=ca.stencil_mask;Cc!==pa.stencil_mask&&(y.stencilMask(Cc),pa.stencil_mask=Cc);Dc=ad[0];Pc=ad[1];$c=ad[2];if(Dc!==F[0]||Pc!==F[1]||$c!==F[2])y.stencilFunc(Dc,Pc,$c),F[0]=Dc,F[1]=Pc,F[2]=$c;Tc=ua[0];Qc=ua[1];Kb=ua[2];Gb=ua[3];if(Tc!==W[0]||Qc!==W[1]||Kb!==W[2]||Gb!==W[3])y.stencilOpSeparate(Tc,Qc,Kb,Gb),W[0]=Tc,W[1]=Qc,W[2]=Kb,W[3]=Gb;Rc=D[0];Jc=D[1];Uc=D[2];ic=D[3];if(Rc!==ia[0]||Jc!==ia[1]||Uc!==ia[2]||ic!==ia[3])y.stencilOpSeparate(Rc,Jc,Uc,
ic),ia[0]=Rc,ia[1]=Jc,ia[2]=Uc,ia[3]=ic}l=a.viewport;q=l.x|0;B=l.y|0;w="width"in l?l.width|0:R.framebufferWidth-q;v="height"in l?l.height|0:R.framebufferHeight-B;p=R.viewportWidth;R.viewportWidth=w;x=R.viewportHeight;R.viewportHeight=v;y.viewport(q,B,w,v);qa[0]=q;qa[1]=B;qa[2]=w;qa[3]=v;y.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;y.enable(3042);pa.blend_enable=!0;y.blendEquationSeparate(32774,32774);fa[0]=32774;fa[1]=32774;y.blendFuncSeparate(770,771,773,1);Wb[0]=770;Wb[1]=771;Wb[2]=773;Wb[3]=
1;y.enable(2884);pa.cull_enable=!0;y.cullFace(1029);pa.cull_face=1029;(P=f.call(this,R,a,0))?y.enable(2929):y.disable(2929);pa.depth_enable=P;z=a.viewport;C=z.x|0;u=z.y|0;J="width"in z?z.width|0:R.framebufferWidth-C;oa="height"in z?z.height|0:R.framebufferHeight-u;y.scissor(C,u,J,oa);ab[0]=C;ab[1]=u;ab[2]=J;ab[3]=oa;y.enable(3089);pa.scissor_enable=!0;y.disable(2960);pa.stencil_enable=!1;if(S=pa.profile)ha=performance.now(),c.count++;y.useProgram(g.program);I=$a.angle_instanced_arrays;cc.setVAO(null);
ea.buffer=a.positionBuffer;sa=!1;vb=null;Aa=0;La=!1;Vd=Ka=0;Wd=1;Nb=0;Ga=5126;od=Cd=kd=kb=0;ja(ea)?(sa=!0,vb=N.createStream(34962,ea),Ga=vb.dtype):(vb=N.getBuffer(ea))?Ga=vb.dtype:"constant"in ea?(Wd=2,"number"===typeof ea.constant?(kd=ea.constant,Cd=od=kb=0):(kd=0<ea.constant.length?ea.constant[0]:0,Cd=1<ea.constant.length?ea.constant[1]:0,od=2<ea.constant.length?ea.constant[2]:0,kb=3<ea.constant.length?ea.constant[3]:0)):(vb=ja(ea.buffer)?N.createStream(34962,ea.buffer):N.getBuffer(ea.buffer),Ga=
"type"in ea?G[ea.type]:vb.dtype,La=!!ea.normalized,Vd=ea.size|0,Ka=ea.offset|0,Nb=ea.stride|0,Aa=ea.divisor|0);cd=da.location;Vc=K[cd];if(1===Wd){Vc.buffer||y.enableVertexAttribArray(cd);vd=Vd||2;if(Vc.type!==Ga||Vc.size!==vd||Vc.buffer!==vb||Vc.normalized!==La||Vc.offset!==Ka||Vc.stride!==Nb)y.bindBuffer(34962,vb.buffer),y.vertexAttribPointer(cd,vd,Ga,La,Nb,Ka),Vc.type=Ga,Vc.size=vd,Vc.buffer=vb,Vc.normalized=La,Vc.offset=Ka,Vc.stride=Nb;Vc.divisor!==Aa&&(I.vertexAttribDivisorANGLE(cd,Aa),Vc.divisor=
Aa)}else if(Vc.buffer&&(y.disableVertexAttribArray(cd),Vc.buffer=null),Vc.x!==kd||Vc.y!==Cd||Vc.z!==od||Vc.w!==kb)y.vertexAttrib4f(cd,kd,Cd,od,kb),Vc.x=kd,Vc.y=Cd,Vc.z=od,Vc.w=kb;Ba.buffer=a.positionBuffer;ed=!1;Nc=null;sc=0;bb=!1;Eb=Kc=0;rc=1;Sa=0;Lc=5126;qd=Ld=pc=dc=0;ja(Ba)?(ed=!0,Nc=N.createStream(34962,Ba),Lc=Nc.dtype):(Nc=N.getBuffer(Ba))?Lc=Nc.dtype:"constant"in Ba?(rc=2,"number"===typeof Ba.constant?(pc=Ba.constant,Ld=qd=dc=0):(pc=0<Ba.constant.length?Ba.constant[0]:0,Ld=1<Ba.constant.length?
Ba.constant[1]:0,qd=2<Ba.constant.length?Ba.constant[2]:0,dc=3<Ba.constant.length?Ba.constant[3]:0)):(Nc=ja(Ba.buffer)?N.createStream(34962,Ba.buffer):N.getBuffer(Ba.buffer),Lc="type"in Ba?G[Ba.type]:Nc.dtype,bb=!!Ba.normalized,Eb=Ba.size|0,Kc=Ba.offset|0,Sa=Ba.stride|0,sc=Ba.divisor|0);Ac=ba.location;Zb=K[Ac];if(1===rc){Zb.buffer||y.enableVertexAttribArray(Ac);Gc=Eb||2;if(Zb.type!==Lc||Zb.size!==Gc||Zb.buffer!==Nc||Zb.normalized!==bb||Zb.offset!==Kc||Zb.stride!==Sa)y.bindBuffer(34962,Nc.buffer),
y.vertexAttribPointer(Ac,Gc,Lc,bb,Sa,Kc),Zb.type=Lc,Zb.size=Gc,Zb.buffer=Nc,Zb.normalized=bb,Zb.offset=Kc,Zb.stride=Sa;Zb.divisor!==sc&&(I.vertexAttribDivisorANGLE(Ac,sc),Zb.divisor=sc)}else if(Zb.buffer&&(y.disableVertexAttribArray(Ac),Zb.buffer=null),Zb.x!==pc||Zb.y!==Ld||Zb.z!==qd||Zb.w!==dc)y.vertexAttrib4f(Ac,pc,Ld,qd,dc),Zb.x=pc,Zb.y=Ld,Zb.z=qd,Zb.w=dc;Ha.buffer=a.positionBuffer;Sc=!1;Ma=null;Fb=0;Wa=!1;td=ra=0;Ib=1;Ta=0;qc=5126;Td=Rb=uc=eb=0;ja(Ha)?(Sc=!0,Ma=N.createStream(34962,Ha),qc=Ma.dtype):
(Ma=N.getBuffer(Ha))?qc=Ma.dtype:"constant"in Ha?(Ib=2,"number"===typeof Ha.constant?(uc=Ha.constant,Rb=Td=eb=0):(uc=0<Ha.constant.length?Ha.constant[0]:0,Rb=1<Ha.constant.length?Ha.constant[1]:0,Td=2<Ha.constant.length?Ha.constant[2]:0,eb=3<Ha.constant.length?Ha.constant[3]:0)):(Ma=ja(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),qc="type"in Ha?G[Ha.type]:Ma.dtype,Wa=!!Ha.normalized,td=Ha.size|0,ra=Ha.offset|0,Ta=Ha.stride|0,Fb=Ha.divisor|0);kc=la.location;Sb=K[kc];if(1===Ib){Sb.buffer||
y.enableVertexAttribArray(kc);r=td||2;if(Sb.type!==qc||Sb.size!==r||Sb.buffer!==Ma||Sb.normalized!==Wa||Sb.offset!==ra||Sb.stride!==Ta)y.bindBuffer(34962,Ma.buffer),y.vertexAttribPointer(kc,r,qc,Wa,Ta,ra),Sb.type=qc,Sb.size=r,Sb.buffer=Ma,Sb.normalized=Wa,Sb.offset=ra,Sb.stride=Ta;Sb.divisor!==Fb&&(I.vertexAttribDivisorANGLE(kc,Fb),Sb.divisor=Fb)}else if(Sb.buffer&&(y.disableVertexAttribArray(kc),Sb.buffer=null),Sb.x!==uc||Sb.y!==Rb||Sb.z!==Td||Sb.w!==eb)y.vertexAttrib4f(kc,uc,Rb,Td,eb),Sb.x=uc,Sb.y=
Rb,Sb.z=Td,Sb.w=eb;t.buffer=a.positionBuffer;Tb=!1;Na=null;pb=0;wb=!1;Pa=ib=0;md=1;$b=0;Dd=5126;fc=Hc=mc=fb=0;ja(t)?(Tb=!0,Na=N.createStream(34962,t),Dd=Na.dtype):(Na=N.getBuffer(t))?Dd=Na.dtype:"constant"in t?(md=2,"number"===typeof t.constant?(mc=t.constant,Hc=fc=fb=0):(mc=0<t.constant.length?t.constant[0]:0,Hc=1<t.constant.length?t.constant[1]:0,fc=2<t.constant.length?t.constant[2]:0,fb=3<t.constant.length?t.constant[3]:0)):(Na=ja(t.buffer)?N.createStream(34962,t.buffer):N.getBuffer(t.buffer),
Dd="type"in t?G[t.type]:Na.dtype,wb=!!t.normalized,Pa=t.size|0,ib=t.offset|0,$b=t.stride|0,pb=t.divisor|0);lb=ub.location;mb=K[lb];if(1===md){mb.buffer||y.enableVertexAttribArray(lb);ta=Pa||2;if(mb.type!==Dd||mb.size!==ta||mb.buffer!==Na||mb.normalized!==wb||mb.offset!==ib||mb.stride!==$b)y.bindBuffer(34962,Na.buffer),y.vertexAttribPointer(lb,ta,Dd,wb,$b,ib),mb.type=Dd,mb.size=ta,mb.buffer=Na,mb.normalized=wb,mb.offset=ib,mb.stride=$b;mb.divisor!==pb&&(I.vertexAttribDivisorANGLE(lb,pb),mb.divisor=
pb)}else if(mb.buffer&&(y.disableVertexAttribArray(lb),mb.buffer=null),mb.x!==mc||mb.y!==Hc||mb.z!==fc||mb.w!==fb)y.vertexAttrib4f(lb,mc,Hc,fc,fb),mb.x=mc,mb.y=Hc,mb.z=fc,mb.w=fb;A.buffer=a.colorBuffer;qb=!1;va=null;Ua=0;cb=!1;gb=ya=0;Ia=1;Cb=0;Bb=5126;Za=Jb=Mc=Ra=0;ja(A)?(qb=!0,va=N.createStream(34962,A),Bb=va.dtype):(va=N.getBuffer(A))?Bb=va.dtype:"constant"in A?(Ia=2,"number"===typeof A.constant?(Mc=A.constant,Jb=Za=Ra=0):(Mc=0<A.constant.length?A.constant[0]:0,Jb=1<A.constant.length?A.constant[1]:
0,Za=2<A.constant.length?A.constant[2]:0,Ra=3<A.constant.length?A.constant[3]:0)):(va=ja(A.buffer)?N.createStream(34962,A.buffer):N.getBuffer(A.buffer),Bb="type"in A?G[A.type]:va.dtype,cb=!!A.normalized,gb=A.size|0,ya=A.offset|0,Cb=A.stride|0,Ua=A.divisor|0);Ub=k.location;wa=K[Ub];if(1===Ia){wa.buffer||y.enableVertexAttribArray(Ub);he=gb||4;if(wa.type!==Bb||wa.size!==he||wa.buffer!==va||wa.normalized!==cb||wa.offset!==ya||wa.stride!==Cb)y.bindBuffer(34962,va.buffer),y.vertexAttribPointer(Ub,he,Bb,
cb,Cb,ya),wa.type=Bb,wa.size=he,wa.buffer=va,wa.normalized=cb,wa.offset=ya,wa.stride=Cb;wa.divisor!==Ua&&(I.vertexAttribDivisorANGLE(Ub,Ua),wa.divisor=Ua)}else if(wa.buffer&&(y.disableVertexAttribArray(Ub),wa.buffer=null),wa.x!==Mc||wa.y!==Jb||wa.z!==Za||wa.w!==Ra)y.vertexAttrib4f(Ub,Mc,Jb,Za,Ra),wa.x=Mc,wa.y=Jb,wa.z=Za,wa.w=Ra;V.buffer=a.colorBuffer;Ja=!1;Ob=null;hb=0;jb=!1;gc=xa=0;Ca=1;rb=0;sb=5126;Ic=nc=Ya=Xa=0;ja(V)?(Ja=!0,Ob=N.createStream(34962,V),sb=Ob.dtype):(Ob=N.getBuffer(V))?sb=Ob.dtype:
"constant"in V?(Ca=2,"number"===typeof V.constant?(Ya=V.constant,nc=Ic=Xa=0):(Ya=0<V.constant.length?V.constant[0]:0,nc=1<V.constant.length?V.constant[1]:0,Ic=2<V.constant.length?V.constant[2]:0,Xa=3<V.constant.length?V.constant[3]:0)):(Ob=ja(V.buffer)?N.createStream(34962,V.buffer):N.getBuffer(V.buffer),sb="type"in V?G[V.type]:Ob.dtype,jb=!!V.normalized,gc=V.size|0,xa=V.offset|0,rb=V.stride|0,hb=V.divisor|0);vc=Q.location;Va=K[vc];if(1===Ca){Va.buffer||y.enableVertexAttribArray(vc);Lb=gc||4;if(Va.type!==
sb||Va.size!==Lb||Va.buffer!==Ob||Va.normalized!==jb||Va.offset!==xa||Va.stride!==rb)y.bindBuffer(34962,Ob.buffer),y.vertexAttribPointer(vc,Lb,sb,jb,rb,xa),Va.type=sb,Va.size=Lb,Va.buffer=Ob,Va.normalized=jb,Va.offset=xa,Va.stride=rb;Va.divisor!==hb&&(I.vertexAttribDivisorANGLE(vc,hb),Va.divisor=hb)}else if(Va.buffer&&(y.disableVertexAttribArray(vc),Va.buffer=null),Va.x!==Ya||Va.y!==nc||Va.z!==Ic||Va.w!==Xa)y.vertexAttrib4f(vc,Ya,nc,Ic,Xa),Va.x=Ya,Va.y=nc,Va.z=Ic,Va.w=Xa;Zc=Z.location;Ea=K[Zc];Ea.buffer||
y.enableVertexAttribArray(Zc);if(5126!==Ea.type||1!==Ea.size||Ea.buffer!==d||!1!==Ea.normalized||0!==Ea.offset||8!==Ea.stride)y.bindBuffer(34962,d.buffer),y.vertexAttribPointer(Zc,1,5126,!1,8,0),Ea.type=5126,Ea.size=1,Ea.buffer=d,Ea.normalized=!1,Ea.offset=0,Ea.stride=8;0!==Ea.divisor&&(I.vertexAttribDivisorANGLE(Zc,0),Ea.divisor=0);yc=m.location;Qa=K[yc];Qa.buffer||y.enableVertexAttribArray(yc);if(5126!==Qa.type||1!==Qa.size||Qa.buffer!==b||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)y.bindBuffer(34962,
b.buffer),y.vertexAttribPointer(yc,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=b,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(I.vertexAttribDivisorANGLE(yc,0),Qa.divisor=0);za=a.scale;y.uniform2f(bc.location,za[0],za[1]);nb=a.translate;y.uniform2f(Oa.location,nb[0],nb[1]);y.uniform1f(na.location,a.thickness);y.uniform1f(H.location,a.depth);xb=n.call(this,R,a,0);y.uniform4f(Y.location,xb[0],xb[1],xb[2],xb[3]);y.uniform1f(L.location,a.miterLimit);Db=e.call(this,R,a,0);y.uniform1f(U.location,
Db);y.uniform1f(E.location,a.dashLength);y.uniform1f(Vb.location,a.opacity);(tb=a.dashTexture)&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);wc=tb._texture;y.uniform1i(ma.location,wc.bind());(yb=O.elements)?y.bindBuffer(34963,yb.buffer.buffer):cc.currentVAO&&(yb=Yb.getElements(cc.currentVAO.elements))&&y.bindBuffer(34963,yb.buffer.buffer);id=a.count;0<id?yb?I.drawElementsInstancedANGLE(5,4,yb.type,0<<(yb.type-5121>>1),id):I.drawArraysInstancedANGLE(5,0,4,id):0>id&&(yb?y.drawElements(5,4,yb.type,
0<<(yb.type-5121>>1)):y.drawArrays(5,0,4));pa.dirty=!0;cc.setVAO(null);R.viewportWidth=p;R.viewportHeight=x;S&&(c.cpuTime+=performance.now()-ha);sa&&N.destroyStream(vb);ed&&N.destroyStream(Nc);Sc&&N.destroyStream(Ma);Tb&&N.destroyStream(Na);qb&&N.destroyStream(va);Ja&&N.destroyStream(Ob);wc.unbind()},scope:function(a,e,f){var g,k,n,m,v,y,x,D,M,E,F,aa,H,J,L,K,Q,T,X,W,ka,ba,Y,U,ia,da,fa,Z,ua,oc,qa,Da,ma,la,bb,sd,Eb,na,Sa,Fc,dc,pc,ab,Wb,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,Ka,Ib,Ta,qc,eb,xc,Rb,$a,Oa,Sb,r,Tb,Na,pb,
wb,ib,Pa,ub,$b,ad,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,Yb,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,cc,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,Vb,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,bc,gd,jd,Yc,df,ie,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,vf,ze,oe,Pe,Qe,Le,re,Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,jf,kf,lf,rf,of,sf,Cf,
Df,Ne,Be,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;g=a.viewport;k=g.x|0;n=g.y|0;m="width"in g?g.width|0:R.framebufferWidth-k;v="height"in g?g.height|0:R.framebufferHeight-n;y=R.viewportWidth;R.viewportWidth=m;x=R.viewportHeight;R.viewportHeight=v;D=ha[0];ha[0]=k;M=ha[1];ha[1]=n;E=ha[2];ha[2]=m;F=ha[3];ha[3]=v;aa=Ga[0];Ga[0]=0;H=Ga[1];Ga[1]=0;J=Ga[2];Ga[2]=0;L=Ga[3];Ga[3]=0;K=ca.blend_enable;ca.blend_enable=!0;Q=kb[0];kb[0]=32774;T=kb[1];kb[1]=32774;X=sa[0];sa[0]=770;W=sa[1];sa[1]=771;ka=sa[2];sa[2]=773;
ba=sa[3];sa[3]=1;Y=ca.cull_enable;ca.cull_enable=!0;U=ca.cull_face;ca.cull_face=1029;ia=h.call(this,R,a,f);da=ca.depth_enable;ca.depth_enable=ia;fa=a.viewport;Z=fa.x|0;ua=fa.y|0;oc="width"in fa?fa.width|0:R.framebufferWidth-Z;qa="height"in fa?fa.height|0:R.framebufferHeight-ua;Da=vb[0];vb[0]=Z;ma=vb[1];vb[1]=ua;la=vb[2];vb[2]=oc;bb=vb[3];vb[3]=qa;sd=ca.scissor_enable;ca.scissor_enable=!0;Eb=ca.stencil_enable;ca.stencil_enable=!1;if(na=pa.profile)Sa=performance.now(),c.count++;Fc=O.offset;O.offset=
0;dc=O.count;O.count=4;pc=a.count;ab=O.instances;O.instances=pc;Wb=O.primitive;O.primitive=5;Ac=a.dashLength;Zb=La[23];La[23]=Ac;Gc=a.dashTexture;Sc=La[24];La[24]=Gc;Ma=a.depth;Fb=La[22];La[22]=Ma;Wa=a.id;ra=La[31];La[31]=Wa;Ka=a.miterLimit;Ib=La[32];La[32]=Ka;Ta=q.call(this,R,a,f);qc=La[33];La[33]=Ta;eb=a.opacity;xc=La[10];La[10]=eb;Rb=R.pixelRatio;$a=La[34];La[34]=Rb;Oa=a.scale;Sb=La[6];La[6]=Oa;r=a.scaleFract;Tb=La[7];La[7]=r;Na=a.thickness;pb=La[21];La[21]=Na;wb=a.translate;ib=La[8];La[8]=wb;
Pa=a.translateFract;ub=La[9];La[9]=Pa;$b=B.call(this,R,a,f);ad=La[3];La[3]=$b;A.buffer=a.colorBuffer;fb=!1;mc=null;Hc=0;fc=!1;mb=lb=0;ta=1;qb=0;va=5126;gb=ya=cb=Ua=0;ja(A)?(fb=!0,mc=N.createStream(34962,A),va=mc.dtype):(mc=N.getBuffer(A))?va=mc.dtype:"constant"in A?(ta=2,"number"===typeof A.constant?(cb=A.constant,ya=gb=Ua=0):(cb=0<A.constant.length?A.constant[0]:0,ya=1<A.constant.length?A.constant[1]:0,gb=2<A.constant.length?A.constant[2]:0,Ua=3<A.constant.length?A.constant[3]:0)):(mc=ja(A.buffer)?
N.createStream(34962,A.buffer):N.getBuffer(A.buffer),va="type"in A?G[A.type]:mc.dtype,fc=!!A.normalized,mb=A.size|0,lb=A.offset|0,qb=A.stride|0,Hc=A.divisor|0);Ia=l.buffer;l.buffer=mc;Cb=l.divisor;l.divisor=Hc;Bb=l.normalized;l.normalized=fc;Ra=l.offset;l.offset=lb;Mc=l.size;l.size=mb;Jb=l.state;l.state=ta;Za=l.stride;l.stride=qb;Ub=l.type;l.type=va;wa=l.w;l.w=Ua;Yb=l.x;l.x=cb;Ja=l.y;l.y=ya;Ob=l.z;l.z=gb;ea.buffer=a.positionBuffer;hb=!1;jb=null;xa=0;gc=!1;rb=Ca=0;sb=1;Xa=0;Ya=5126;Va=vc=Ic=nc=0;ja(ea)?
(hb=!0,jb=N.createStream(34962,ea),Ya=jb.dtype):(jb=N.getBuffer(ea))?Ya=jb.dtype:"constant"in ea?(sb=2,"number"===typeof ea.constant?(Ic=ea.constant,vc=Va=nc=0):(Ic=0<ea.constant.length?ea.constant[0]:0,vc=1<ea.constant.length?ea.constant[1]:0,Va=2<ea.constant.length?ea.constant[2]:0,nc=3<ea.constant.length?ea.constant[3]:0)):(jb=ja(ea.buffer)?N.createStream(34962,ea.buffer):N.getBuffer(ea.buffer),Ya="type"in ea?G[ea.type]:jb.dtype,gc=!!ea.normalized,rb=ea.size|0,Ca=ea.offset|0,Xa=ea.stride|0,xa=
ea.divisor|0);Lb=w.buffer;w.buffer=jb;Zc=w.divisor;w.divisor=xa;Ea=w.normalized;w.normalized=gc;yc=w.offset;w.offset=Ca;Qa=w.size;w.size=rb;za=w.state;w.state=sb;nb=w.stride;w.stride=Xa;xb=w.type;w.type=Ya;Db=w.w;w.w=nc;tb=w.x;w.x=Ic;wc=w.y;w.y=vc;yb=w.z;w.z=Va;V.buffer=a.colorBuffer;id=!1;tc=null;cc=0;Oc=!1;fd=ld=0;Xb=1;ec=0;Pb=5126;zb=ob=ac=Fa=0;ja(V)?(id=!0,tc=N.createStream(34962,V),Pb=tc.dtype):(tc=N.getBuffer(V))?Pb=tc.dtype:"constant"in V?(Xb=2,"number"===typeof V.constant?(ac=V.constant,ob=
zb=Fa=0):(ac=0<V.constant.length?V.constant[0]:0,ob=1<V.constant.length?V.constant[1]:0,zb=2<V.constant.length?V.constant[2]:0,Fa=3<V.constant.length?V.constant[3]:0)):(tc=ja(V.buffer)?N.createStream(34962,V.buffer):N.getBuffer(V.buffer),Pb="type"in V?G[V.type]:tc.dtype,Oc=!!V.normalized,fd=V.size|0,ld=V.offset|0,ec=V.stride|0,cc=V.divisor|0);Mb=P.buffer;P.buffer=tc;Qb=P.divisor;P.divisor=cc;hc=P.normalized;P.normalized=Oc;jc=P.offset;P.offset=ld;Vb=P.size;P.size=fd;Bc=P.state;P.state=Xb;Cc=P.stride;
P.stride=ec;Dc=P.type;P.type=Pb;Pc=P.w;P.w=Fa;$c=P.x;P.x=ac;Tc=P.y;P.y=ob;Qc=P.z;P.z=zb;Ba.buffer=a.positionBuffer;Kb=!1;Gb=null;Rc=0;Jc=!1;ic=Uc=0;Xc=1;bc=0;gd=5126;ie=df=Yc=jd=0;ja(Ba)?(Kb=!0,Gb=N.createStream(34962,Ba),gd=Gb.dtype):(Gb=N.getBuffer(Ba))?gd=Gb.dtype:"constant"in Ba?(Xc=2,"number"===typeof Ba.constant?(Yc=Ba.constant,df=ie=jd=0):(Yc=0<Ba.constant.length?Ba.constant[0]:0,df=1<Ba.constant.length?Ba.constant[1]:0,ie=2<Ba.constant.length?Ba.constant[2]:0,jd=3<Ba.constant.length?Ba.constant[3]:
0)):(Gb=ja(Ba.buffer)?N.createStream(34962,Ba.buffer):N.getBuffer(Ba.buffer),gd="type"in Ba?G[Ba.type]:Gb.dtype,Jc=!!Ba.normalized,ic=Ba.size|0,Uc=Ba.offset|0,bc=Ba.stride|0,Rc=Ba.divisor|0);je=z.buffer;z.buffer=Gb;ue=z.divisor;z.divisor=Rc;me=z.normalized;z.normalized=Jc;Id=z.offset;z.offset=Uc;Gd=z.size;z.size=ic;dd=z.state;z.state=Xc;Ec=z.stride;z.stride=bc;nd=z.type;z.type=gd;hd=z.w;z.w=jd;bd=z.x;z.x=Yc;pd=z.y;z.y=df;Bd=z.z;z.z=ie;Ed=p.buffer;p.buffer=d;ve=p.divisor;p.divisor=0;ne=p.normalized;
p.normalized=!1;ye=p.offset;p.offset=0;ce=p.size;p.size=0;be=p.state;p.state=1;ae=p.stride;p.stride=8;pe=p.type;p.type=5126;Zd=p.w;p.w=0;fe=p.x;p.x=0;zc=p.y;p.y=0;Wc=p.z;p.z=0;qe=C.buffer;C.buffer=b;ke=C.divisor;C.divisor=0;Hd=C.normalized;C.normalized=!1;Nd=C.offset;C.offset=4;Pd=C.size;C.size=0;Qd=C.state;C.state=1;ge=C.stride;C.stride=8;vf=C.type;C.type=5126;ze=C.w;C.w=0;oe=C.x;C.x=0;Pe=C.y;C.y=0;Qe=C.z;C.z=0;Ha.buffer=a.positionBuffer;Le=!1;re=null;Ce=0;Fe=!1;He=Ge=0;De=1;Jd=0;Ud=5126;zd=Ie=$d=
Yd=0;ja(Ha)?(Le=!0,re=N.createStream(34962,Ha),Ud=re.dtype):(re=N.getBuffer(Ha))?Ud=re.dtype:"constant"in Ha?(De=2,"number"===typeof Ha.constant?($d=Ha.constant,Ie=zd=Yd=0):($d=0<Ha.constant.length?Ha.constant[0]:0,Ie=1<Ha.constant.length?Ha.constant[1]:0,zd=2<Ha.constant.length?Ha.constant[2]:0,Yd=3<Ha.constant.length?Ha.constant[3]:0)):(re=ja(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),Ud="type"in Ha?G[Ha.type]:re.dtype,Fe=!!Ha.normalized,He=Ha.size|0,Ge=Ha.offset|0,Jd=Ha.stride|
0,Ce=Ha.divisor|0);Rd=u.buffer;u.buffer=re;Ae=u.divisor;u.divisor=Ce;Je=u.normalized;u.normalized=Fe;af=u.offset;u.offset=Ge;Ze=u.size;u.size=He;Re=u.state;u.state=De;Me=u.stride;u.stride=Jd;Ye=u.type;u.type=Ud;Ve=u.w;u.w=Yd;Se=u.x;u.x=$d;Te=u.y;u.y=Ie;Sd=u.z;u.z=zd;t.buffer=a.positionBuffer;Xd=!1;Ue=null;hf=0;mf=!1;jf=ef=0;kf=1;lf=0;rf=5126;Df=Cf=sf=of=0;ja(t)?(Xd=!0,Ue=N.createStream(34962,t),rf=Ue.dtype):(Ue=N.getBuffer(t))?rf=Ue.dtype:"constant"in t?(kf=2,"number"===typeof t.constant?(sf=t.constant,
Cf=Df=of=0):(sf=0<t.constant.length?t.constant[0]:0,Cf=1<t.constant.length?t.constant[1]:0,Df=2<t.constant.length?t.constant[2]:0,of=3<t.constant.length?t.constant[3]:0)):(Ue=ja(t.buffer)?N.createStream(34962,t.buffer):N.getBuffer(t.buffer),rf="type"in t?G[t.type]:Ue.dtype,mf=!!t.normalized,jf=t.size|0,ef=t.offset|0,lf=t.stride|0,hf=t.divisor|0);Ne=I.buffer;I.buffer=Ue;Be=I.divisor;I.divisor=hf;pf=I.normalized;I.normalized=mf;qf=I.offset;I.offset=ef;Ef=I.size;I.size=jf;Hf=I.state;I.state=kf;Bf=I.stride;
I.stride=lf;Ff=I.type;I.type=rf;Gf=I.w;I.w=of;xf=I.x;I.x=sf;yf=I.y;I.y=Cf;wf=I.z;I.z=Df;zf=Aa.vert;Aa.vert=36;Af=Aa.frag;Aa.frag=35;pa.dirty=!0;e(R,a,f);R.viewportWidth=y;R.viewportHeight=x;ha[0]=D;ha[1]=M;ha[2]=E;ha[3]=F;Ga[0]=aa;Ga[1]=H;Ga[2]=J;Ga[3]=L;ca.blend_enable=K;kb[0]=Q;kb[1]=T;sa[0]=X;sa[1]=W;sa[2]=ka;sa[3]=ba;ca.cull_enable=Y;ca.cull_face=U;ca.depth_enable=da;vb[0]=Da;vb[1]=ma;vb[2]=la;vb[3]=bb;ca.scissor_enable=sd;ca.stencil_enable=Eb;na&&(c.cpuTime+=performance.now()-Sa);O.offset=Fc;
O.count=dc;O.instances=ab;O.primitive=Wb;La[23]=Zb;La[24]=Sc;La[22]=Fb;La[31]=ra;La[32]=Ib;La[33]=qc;La[10]=xc;La[34]=$a;La[6]=Sb;La[7]=Tb;La[21]=pb;La[8]=ib;La[9]=ub;La[3]=ad;fb&&N.destroyStream(mc);l.buffer=Ia;l.divisor=Cb;l.normalized=Bb;l.offset=Ra;l.size=Mc;l.state=Jb;l.stride=Za;l.type=Ub;l.w=wa;l.x=Yb;l.y=Ja;l.z=Ob;hb&&N.destroyStream(jb);w.buffer=Lb;w.divisor=Zc;w.normalized=Ea;w.offset=yc;w.size=Qa;w.state=za;w.stride=nb;w.type=xb;w.w=Db;w.x=tb;w.y=wc;w.z=yb;id&&N.destroyStream(tc);P.buffer=
Mb;P.divisor=Qb;P.normalized=hc;P.offset=jc;P.size=Vb;P.state=Bc;P.stride=Cc;P.type=Dc;P.w=Pc;P.x=$c;P.y=Tc;P.z=Qc;Kb&&N.destroyStream(Gb);z.buffer=je;z.divisor=ue;z.normalized=me;z.offset=Id;z.size=Gd;z.state=dd;z.stride=Ec;z.type=nd;z.w=hd;z.x=bd;z.y=pd;z.z=Bd;p.buffer=Ed;p.divisor=ve;p.normalized=ne;p.offset=ye;p.size=ce;p.state=be;p.stride=ae;p.type=pe;p.w=Zd;p.x=fe;p.y=zc;p.z=Wc;C.buffer=qe;C.divisor=ke;C.normalized=Hd;C.offset=Nd;C.size=Pd;C.state=Qd;C.stride=ge;C.type=vf;C.w=ze;C.x=oe;C.y=
Pe;C.z=Qe;Le&&N.destroyStream(re);u.buffer=Rd;u.divisor=Ae;u.normalized=Je;u.offset=af;u.size=Ze;u.state=Re;u.stride=Me;u.type=Ye;u.w=Ve;u.x=Se;u.y=Te;u.z=Sd;Xd&&N.destroyStream(Ue);I.buffer=Ne;I.divisor=Be;I.normalized=pf;I.offset=qf;I.size=Ef;I.state=Hf;I.stride=Bf;I.type=Ff;I.w=Gf;I.x=xf;I.y=yf;I.z=wf;Aa.vert=zf;Aa.frag=Af;pa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,c,f,g,d,b,n,e,h,q,B,l,w,p,z,u,C,S,I){var J,Ka,v,x,k,da,Q,ba,
E,ma,H,Z,m,L,U,la,Vb,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa;J=a.attributes;Ka=a.buffer;v=a.context;x=a.current;k=a.draw;da=a.elements;Q=a.extensions;ba=a.framebuffer;E=a.gl;ma=a.isBufferArgs;H=a.next;Z=a.shader;m=a.uniforms;L=a.vao;U=H.blend_color;la=x.blend_color;Vb=H.blend_equation;ub=x.blend_equation;bc=H.blend_func;na=x.blend_func;Oa=H.colorMask;Y=x.colorMask;K=H.depth_range;N=x.depth_range;R=H.polygonOffset_offset;pa=x.polygonOffset_offset;O=H.sample_coverage;Yb=x.sample_coverage;
$a=H.scissor_box;T=x.scissor_box;y=H.stencil_func;ja=x.stencil_func;ca=H.stencil_opBack;Aa=x.stencil_opBack;La=H.stencil_opFront;cc=x.stencil_opFront;Ga=H.viewport;X=x.viewport;kb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};fa={offset:8,stride:8};sa={offset:8,stride:8};return{batch:function(a,b){var e,d,f,g,n,m;e=ba.next;e!==ba.cur&&(e?E.bindFramebuffer(36160,e.framebuffer):E.bindFramebuffer(36160,null),ba.cur=e);if(x.dirty){var U,Z,ab,Ga,F,D,ia,
ua,W,ha,qa,G,A,ea,V,Ba,Ha,t,lc,db,ga,Hb,Ab,$a,bc,Vb,te,xe,se,rd,de,we;U=H.dither;U!==x.dither&&(U?E.enable(3024):E.disable(3024),x.dither=U);Z=H.depth_func;Z!==x.depth_func&&(E.depthFunc(Z),x.depth_func=Z);ab=K[0];Ga=K[1];if(ab!==N[0]||Ga!==N[1])E.depthRange(ab,Ga),N[0]=ab,N[1]=Ga;F=H.depth_mask;F!==x.depth_mask&&(E.depthMask(F),x.depth_mask=F);D=Oa[0];ia=Oa[1];ua=Oa[2];W=Oa[3];if(D!==Y[0]||ia!==Y[1]||ua!==Y[2]||W!==Y[3])E.colorMask(D,ia,ua,W),Y[0]=D,Y[1]=ia,Y[2]=ua,Y[3]=W;ha=H.cull_enable;ha!==x.cull_enable&&
(ha?E.enable(2884):E.disable(2884),x.cull_enable=ha);qa=H.cull_face;qa!==x.cull_face&&(E.cullFace(qa),x.cull_face=qa);G=H.frontFace;G!==x.frontFace&&(E.frontFace(G),x.frontFace=G);A=H.lineWidth;A!==x.lineWidth&&(E.lineWidth(A),x.lineWidth=A);ea=H.polygonOffset_enable;ea!==x.polygonOffset_enable&&(ea?E.enable(32823):E.disable(32823),x.polygonOffset_enable=ea);V=R[0];Ba=R[1];if(V!==pa[0]||Ba!==pa[1])E.polygonOffset(V,Ba),pa[0]=V,pa[1]=Ba;Ha=H.sample_alpha;Ha!==x.sample_alpha&&(Ha?E.enable(32926):E.disable(32926),
x.sample_alpha=Ha);t=H.sample_enable;t!==x.sample_enable&&(t?E.enable(32928):E.disable(32928),x.sample_enable=t);lc=O[0];db=O[1];if(lc!==Yb[0]||db!==Yb[1])E.sampleCoverage(lc,db),Yb[0]=lc,Yb[1]=db;ga=H.stencil_mask;ga!==x.stencil_mask&&(E.stencilMask(ga),x.stencil_mask=ga);Hb=y[0];Ab=y[1];$a=y[2];if(Hb!==ja[0]||Ab!==ja[1]||$a!==ja[2])E.stencilFunc(Hb,Ab,$a),ja[0]=Hb,ja[1]=Ab,ja[2]=$a;bc=La[0];Vb=La[1];te=La[2];xe=La[3];if(bc!==cc[0]||Vb!==cc[1]||te!==cc[2]||xe!==cc[3])E.stencilOpSeparate(bc,Vb,te,
xe),cc[0]=bc,cc[1]=Vb,cc[2]=te,cc[3]=xe;se=ca[0];rd=ca[1];de=ca[2];we=ca[3];if(se!==Aa[0]||rd!==Aa[1]||de!==Aa[2]||we!==Aa[3])E.stencilOpSeparate(se,rd,de,we),Aa[0]=se,Aa[1]=rd,Aa[2]=de,Aa[3]=we}E.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;E.enable(3042);x.blend_enable=!0;E.blendEquationSeparate(32774,32774);ub[0]=32774;ub[1]=32774;E.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;E.disable(2929);x.depth_enable=!1;E.enable(3089);x.scissor_enable=!0;E.disable(2960);
x.stencil_enable=!1;if(d=x.profile)f=performance.now(),c.count+=b;E.useProgram(h.program);g=Q.angle_instanced_arrays;var ud;L.setVAO(null);ud=k.instances;for(n=0;n<b;++n){m=a[n];var Fd,Kd,Od,Oe,$e,Xe,xd,Ee,Vd,Wd,le,Ke,yd,kd,Cd,od,cd,Vc,vd,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub;Fd=m.viewport;Kd=Fd.x|0;Od=Fd.y|0;Oe="width"in Fd?Fd.width|0:v.framebufferWidth-
Kd;$e="height"in Fd?Fd.height|0:v.framebufferHeight-Od;Xe=v.viewportWidth;v.viewportWidth=Oe;xd=v.viewportHeight;v.viewportHeight=$e;E.viewport(Kd,Od,Oe,$e);X[0]=Kd;X[1]=Od;X[2]=Oe;X[3]=$e;Ee=m.viewport;Vd=Ee.x|0;Wd=Ee.y|0;le="width"in Ee?Ee.width|0:v.framebufferWidth-Vd;Ke="height"in Ee?Ee.height|0:v.framebufferHeight-Wd;E.scissor(Vd,Wd,le,Ke);T[0]=Vd;T[1]=Wd;T[2]=le;T[3]=Ke;fa.buffer=m.positionBuffer;yd=!1;kd=null;Cd=0;od=!1;Vc=cd=0;vd=1;ed=0;Nc=5126;Eb=Kc=bb=sc=0;ma(fa)?(yd=!0,kd=Ka.createStream(34962,
fa),Nc=kd.dtype):(kd=Ka.getBuffer(fa))?Nc=kd.dtype:"constant"in fa?(vd=2,"number"===typeof fa.constant?(bb=fa.constant,Kc=Eb=sc=0):(bb=0<fa.constant.length?fa.constant[0]:0,Kc=1<fa.constant.length?fa.constant[1]:0,Eb=2<fa.constant.length?fa.constant[2]:0,sc=3<fa.constant.length?fa.constant[3]:0)):(kd=ma(fa.buffer)?Ka.createStream(34962,fa.buffer):Ka.getBuffer(fa.buffer),Nc="type"in fa?kb[fa.type]:kd.dtype,od=!!fa.normalized,Vc=fa.size|0,cd=fa.offset|0,ed=fa.stride|0,Cd=fa.divisor|0);rc=p.location;
Sa=J[rc];if(1===vd){Sa.buffer||E.enableVertexAttribArray(rc);Lc=Vc||2;if(Sa.type!==Nc||Sa.size!==Lc||Sa.buffer!==kd||Sa.normalized!==od||Sa.offset!==cd||Sa.stride!==ed)E.bindBuffer(34962,kd.buffer),E.vertexAttribPointer(rc,Lc,Nc,od,ed,cd),Sa.type=Nc,Sa.size=Lc,Sa.buffer=kd,Sa.normalized=od,Sa.offset=cd,Sa.stride=ed;Sa.divisor!==Cd&&(g.vertexAttribDivisorANGLE(rc,Cd),Sa.divisor=Cd)}else if(Sa.buffer&&(E.disableVertexAttribArray(rc),Sa.buffer=null),Sa.x!==bb||Sa.y!==Kc||Sa.z!==Eb||Sa.w!==sc)E.vertexAttrib4f(rc,
bb,Kc,Eb,sc),Sa.x=bb,Sa.y=Kc,Sa.z=Eb,Sa.w=sc;sa.buffer=m.positionFractBuffer;dc=!1;pc=null;Ld=0;qd=!1;Zb=Ac=0;Gc=1;Sc=0;Ma=5126;td=ra=Wa=Fb=0;ma(sa)?(dc=!0,pc=Ka.createStream(34962,sa),Ma=pc.dtype):(pc=Ka.getBuffer(sa))?Ma=pc.dtype:"constant"in sa?(Gc=2,"number"===typeof sa.constant?(Wa=sa.constant,ra=td=Fb=0):(Wa=0<sa.constant.length?sa.constant[0]:0,ra=1<sa.constant.length?sa.constant[1]:0,td=2<sa.constant.length?sa.constant[2]:0,Fb=3<sa.constant.length?sa.constant[3]:0)):(pc=ma(sa.buffer)?Ka.createStream(34962,
sa.buffer):Ka.getBuffer(sa.buffer),Ma="type"in sa?kb[sa.type]:pc.dtype,qd=!!sa.normalized,Zb=sa.size|0,Ac=sa.offset|0,Sc=sa.stride|0,Ld=sa.divisor|0);Ib=z.location;Ta=J[Ib];if(1===Gc){Ta.buffer||E.enableVertexAttribArray(Ib);qc=Zb||2;if(Ta.type!==Ma||Ta.size!==qc||Ta.buffer!==pc||Ta.normalized!==qd||Ta.offset!==Ac||Ta.stride!==Sc)E.bindBuffer(34962,pc.buffer),E.vertexAttribPointer(Ib,qc,Ma,qd,Sc,Ac),Ta.type=Ma,Ta.size=qc,Ta.buffer=pc,Ta.normalized=qd,Ta.offset=Ac,Ta.stride=Sc;Ta.divisor!==Ld&&(g.vertexAttribDivisorANGLE(Ib,
Ld),Ta.divisor=Ld)}else if(Ta.buffer&&(E.disableVertexAttribArray(Ib),Ta.buffer=null),Ta.x!==Wa||Ta.y!==ra||Ta.z!==td||Ta.w!==Fb)E.vertexAttrib4f(Ib,Wa,ra,td,Fb),Ta.x=Wa,Ta.y=ra,Ta.z=td,Ta.w=Fb;eb=m.fill;uc=eb[0];Td=eb[1];Sb=eb[2];Tb=eb[3];n&&Rb===uc&&kc===Td&&r===Sb&&Na===Tb||(Rb=uc,kc=Td,r=Sb,Na=Tb,E.uniform4f(B.location,uc,Td,Sb,Tb));pb=m.scale;wb=pb[0];Pa=pb[1];n&&ib===wb&&md===Pa||(ib=wb,md=Pa,E.uniform2f(u.location,wb,Pa));$b=m.scaleFract;Dd=$b[0];mc=$b[1];n&&fb===Dd&&Hc===mc||(fb=Dd,Hc=mc,
E.uniform2f(C.location,Dd,mc));fc=m.translate;lb=fc[0];ta=fc[1];n&&mb===lb&&qb===ta||(mb=lb,qb=ta,E.uniform2f(S.location,lb,ta));va=m.translateFract;Ua=va[0];ya=va[1];n&&cb===Ua&&gb===ya||(cb=Ua,gb=ya,E.uniform2f(I.location,Ua,ya));Ia=m.id;n&&Cb===Ia||(Cb=Ia,E.uniform1f(l.location,Ia));Bb=m.opacity;n&&Ra===Bb||(Ra=Bb,E.uniform1f(w.location,Bb));Mc=q.call(this,v,m,n);Jb=null;(Jb=(Za=ma(Mc))?da.createStream(Mc):da.getElements(Mc))&&E.bindBuffer(34963,Jb.buffer.buffer);if(Ub=Jb?Jb.vertCount:-1)0<ud?
Jb?g.drawElementsInstancedANGLE(4,Ub,Jb.type,0<<(Jb.type-5121>>1),ud):g.drawArraysInstancedANGLE(4,0,Ub,ud):0>ud&&(Jb?E.drawElements(4,Ub,Jb.type,0<<(Jb.type-5121>>1)):E.drawArrays(4,0,Ub)),v.viewportWidth=Xe,v.viewportHeight=xd,yd&&Ka.destroyStream(kd),dc&&Ka.destroyStream(pc),Za&&da.destroyStream(Jb)}x.dirty=!0;L.setVAO(null);d&&(c.cpuTime+=performance.now()-f)},draw:function(a){var b,e,d,h,n,m,q,U,Z,ab,Ga,F,D,ia,ua,W,ha,qa,G,A,ea,V;b=ba.next;b!==ba.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):
E.bindFramebuffer(36160,null),ba.cur=b);if(x.dirty){b=H.dither;b!==x.dither&&(b?E.enable(3024):E.disable(3024),x.dither=b);b=H.depth_func;b!==x.depth_func&&(E.depthFunc(b),x.depth_func=b);b=K[0];m=K[1];if(b!==N[0]||m!==N[1])E.depthRange(b,m),N[0]=b,N[1]=m;b=H.depth_mask;b!==x.depth_mask&&(E.depthMask(b),x.depth_mask=b);b=Oa[0];m=Oa[1];e=Oa[2];d=Oa[3];if(b!==Y[0]||m!==Y[1]||e!==Y[2]||d!==Y[3])E.colorMask(b,m,e,d),Y[0]=b,Y[1]=m,Y[2]=e,Y[3]=d;b=H.cull_enable;b!==x.cull_enable&&(b?E.enable(2884):E.disable(2884),
x.cull_enable=b);b=H.cull_face;b!==x.cull_face&&(E.cullFace(b),x.cull_face=b);b=H.frontFace;b!==x.frontFace&&(E.frontFace(b),x.frontFace=b);b=H.lineWidth;b!==x.lineWidth&&(E.lineWidth(b),x.lineWidth=b);b=H.polygonOffset_enable;b!==x.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),x.polygonOffset_enable=b);b=R[0];m=R[1];if(b!==pa[0]||m!==pa[1])E.polygonOffset(b,m),pa[0]=b,pa[1]=m;b=H.sample_alpha;b!==x.sample_alpha&&(b?E.enable(32926):E.disable(32926),x.sample_alpha=b);b=H.sample_enable;
b!==x.sample_enable&&(b?E.enable(32928):E.disable(32928),x.sample_enable=b);b=O[0];m=O[1];if(b!==Yb[0]||m!==Yb[1])E.sampleCoverage(b,m),Yb[0]=b,Yb[1]=m;b=H.stencil_mask;b!==x.stencil_mask&&(E.stencilMask(b),x.stencil_mask=b);b=y[0];m=y[1];e=y[2];if(b!==ja[0]||m!==ja[1]||e!==ja[2])E.stencilFunc(b,m,e),ja[0]=b,ja[1]=m,ja[2]=e;b=La[0];m=La[1];e=La[2];d=La[3];if(b!==cc[0]||m!==cc[1]||e!==cc[2]||d!==cc[3])E.stencilOpSeparate(b,m,e,d),cc[0]=b,cc[1]=m,cc[2]=e,cc[3]=d;b=ca[0];m=ca[1];e=ca[2];d=ca[3];if(b!==
Aa[0]||m!==Aa[1]||e!==Aa[2]||d!==Aa[3])E.stencilOpSeparate(b,m,e,d),Aa[0]=b,Aa[1]=m,Aa[2]=e,Aa[3]=d}b=a.viewport;e=b.x|0;d=b.y|0;h="width"in b?b.width|0:v.framebufferWidth-e;n="height"in b?b.height|0:v.framebufferHeight-d;b=v.viewportWidth;v.viewportWidth=h;m=v.viewportHeight;v.viewportHeight=n;E.viewport(e,d,h,n);X[0]=e;X[1]=d;X[2]=h;X[3]=n;E.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;E.enable(3042);x.blend_enable=!0;E.blendEquationSeparate(32774,32774);ub[0]=32774;ub[1]=32774;E.blendFuncSeparate(770,
771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;E.disable(2929);x.depth_enable=!1;n=a.viewport;e=n.x|0;d=n.y|0;h="width"in n?n.width|0:v.framebufferWidth-e;n="height"in n?n.height|0:v.framebufferHeight-d;E.scissor(e,d,h,n);T[0]=e;T[1]=d;T[2]=h;T[3]=n;E.enable(3089);x.scissor_enable=!0;E.disable(2960);x.stencil_enable=!1;if(e=x.profile)q=performance.now(),c.count++;E.useProgram(f.program);d=Q.angle_instanced_arrays;L.setVAO(null);fa.buffer=a.positionBuffer;h=!1;U=0;Z=!1;Ga=ab=0;F=1;D=0;ia=5126;qa=
ha=W=ua=0;ma(fa)?(h=!0,n=Ka.createStream(34962,fa),ia=n.dtype):(n=Ka.getBuffer(fa))?ia=n.dtype:"constant"in fa?(F=2,"number"===typeof fa.constant?(W=fa.constant,ha=qa=ua=0):(W=0<fa.constant.length?fa.constant[0]:0,ha=1<fa.constant.length?fa.constant[1]:0,qa=2<fa.constant.length?fa.constant[2]:0,ua=3<fa.constant.length?fa.constant[3]:0)):(n=ma(fa.buffer)?Ka.createStream(34962,fa.buffer):Ka.getBuffer(fa.buffer),ia="type"in fa?kb[fa.type]:n.dtype,Z=!!fa.normalized,Ga=fa.size|0,ab=fa.offset|0,D=fa.stride|
0,U=fa.divisor|0);G=p.location;A=J[G];if(1===F){A.buffer||E.enableVertexAttribArray(G);Ga=Ga||2;if(A.type!==ia||A.size!==Ga||A.buffer!==n||A.normalized!==Z||A.offset!==ab||A.stride!==D)E.bindBuffer(34962,n.buffer),E.vertexAttribPointer(G,Ga,ia,Z,D,ab),A.type=ia,A.size=Ga,A.buffer=n,A.normalized=Z,A.offset=ab,A.stride=D;A.divisor!==U&&(d.vertexAttribDivisorANGLE(G,U),A.divisor=U)}else if(A.buffer&&(E.disableVertexAttribArray(G),A.buffer=null),A.x!==W||A.y!==ha||A.z!==qa||A.w!==ua)E.vertexAttrib4f(G,
W,ha,qa,ua),A.x=W,A.y=ha,A.z=qa,A.w=ua;sa.buffer=a.positionFractBuffer;U=!1;ab=0;D=!1;ua=ia=0;W=1;G=0;A=5126;V=ea=qa=ha=0;ma(sa)?(U=!0,Z=Ka.createStream(34962,sa),A=Z.dtype):(Z=Ka.getBuffer(sa))?A=Z.dtype:"constant"in sa?(W=2,"number"===typeof sa.constant?(qa=sa.constant,ea=V=ha=0):(qa=0<sa.constant.length?sa.constant[0]:0,ea=1<sa.constant.length?sa.constant[1]:0,V=2<sa.constant.length?sa.constant[2]:0,ha=3<sa.constant.length?sa.constant[3]:0)):(Z=ma(sa.buffer)?Ka.createStream(34962,sa.buffer):Ka.getBuffer(sa.buffer),
A="type"in sa?kb[sa.type]:Z.dtype,D=!!sa.normalized,ua=sa.size|0,ia=sa.offset|0,G=sa.stride|0,ab=sa.divisor|0);Ga=z.location;F=J[Ga];if(1===W){F.buffer||E.enableVertexAttribArray(Ga);ua=ua||2;if(F.type!==A||F.size!==ua||F.buffer!==Z||F.normalized!==D||F.offset!==ia||F.stride!==G)E.bindBuffer(34962,Z.buffer),E.vertexAttribPointer(Ga,ua,A,D,G,ia),F.type=A,F.size=ua,F.buffer=Z,F.normalized=D,F.offset=ia,F.stride=G;F.divisor!==ab&&(d.vertexAttribDivisorANGLE(Ga,ab),F.divisor=ab)}else if(F.buffer&&(E.disableVertexAttribArray(Ga),
F.buffer=null),F.x!==qa||F.y!==ea||F.z!==V||F.w!==ha)E.vertexAttrib4f(Ga,qa,ea,V,ha),F.x=qa,F.y=ea,F.z=V,F.w=ha;ab=a.fill;E.uniform4f(B.location,ab[0],ab[1],ab[2],ab[3]);ab=a.scale;E.uniform2f(u.location,ab[0],ab[1]);ab=a.scaleFract;E.uniform2f(C.location,ab[0],ab[1]);ab=a.translate;E.uniform2f(S.location,ab[0],ab[1]);ab=a.translateFract;E.uniform2f(I.location,ab[0],ab[1]);E.uniform1f(l.location,a.id);E.uniform1f(w.location,a.opacity);ab=g.call(this,v,a,0);(ab=(a=ma(ab))?da.createStream(ab):da.getElements(ab))&&
E.bindBuffer(34963,ab.buffer.buffer);if(D=ab?ab.vertCount:-1)ia=k.instances,0<ia?ab?d.drawElementsInstancedANGLE(4,D,ab.type,0<<(ab.type-5121>>1),ia):d.drawArraysInstancedANGLE(4,0,D,ia):0>ia&&(ab?E.drawElements(4,D,ab.type,0<<(ab.type-5121>>1)):E.drawArrays(4,0,D)),x.dirty=!0,L.setVAO(null),v.viewportWidth=b,v.viewportHeight=m,e&&(c.cpuTime+=performance.now()-q),h&&Ka.destroyStream(n),U&&Ka.destroyStream(Z),a&&da.destroyStream(ab)},scope:function(a,h,f){var g,l,q,B,w,p,y,z,P,C,D,u,E,J,N,L,G,A,ea,
K,Q,oa,t,O,S,T,R,X,I,ba,Y,ca,ja,pa,la,na,Aa,La,Nb,Oa,Od,Oe,ub,Yb,xd,cc,Vd,Wd,le,Ke,yd,kd,Cd,od,cd,Vc,vd,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb;g=a.viewport;l=g.x|0;q=g.y|0;B="width"in g?g.width|0:v.framebufferWidth-l;w="height"in g?g.height|0:v.framebufferHeight-q;p=v.viewportWidth;v.viewportWidth=B;y=v.viewportHeight;v.viewportHeight=w;z=Ga[0];Ga[0]=l;P=Ga[1];Ga[1]=q;
C=Ga[2];Ga[2]=B;D=Ga[3];Ga[3]=w;u=U[0];U[0]=0;E=U[1];U[1]=0;J=U[2];U[2]=0;N=U[3];U[3]=0;L=H.blend_enable;H.blend_enable=!0;G=Vb[0];Vb[0]=32774;A=Vb[1];Vb[1]=32774;ea=bc[0];bc[0]=770;K=bc[1];bc[1]=771;Q=bc[2];bc[2]=773;oa=bc[3];bc[3]=1;t=H.depth_enable;H.depth_enable=!1;O=a.viewport;S=O.x|0;T=O.y|0;R="width"in O?O.width|0:v.framebufferWidth-S;X="height"in O?O.height|0:v.framebufferHeight-T;I=$a[0];$a[0]=S;ba=$a[1];$a[1]=T;Y=$a[2];$a[2]=R;ca=$a[3];$a[3]=X;ja=H.scissor_enable;H.scissor_enable=!0;pa=
H.stencil_enable;H.stencil_enable=!1;if(la=x.profile)na=performance.now(),c.count++;Aa=d.call(this,v,a,f);La=null;La=(Nb=ma(Aa))?da.createStream(Aa):da.getElements(Aa);Oa=k.elements;k.elements=La;Od=k.offset;k.offset=0;Oe=La?La.vertCount:-1;ub=k.count;k.count=Oe;Yb=k.primitive;k.primitive=4;xd=a.fill;cc=m[14];m[14]=xd;Vd=a.id;Wd=m[31];m[31]=Vd;le=a.opacity;Ke=m[10];m[10]=le;yd=v.pixelRatio;kd=m[34];m[34]=yd;Cd=a.scale;od=m[6];m[6]=Cd;cd=a.scaleFract;Vc=m[7];m[7]=cd;vd=a.translate;ed=m[8];m[8]=vd;
Nc=a.translateFract;sc=m[9];m[9]=Nc;bb=b.call(this,v,a,f);Kc=m[3];m[3]=bb;fa.buffer=a.positionBuffer;Eb=!1;rc=null;Sa=0;Lc=!1;pc=dc=0;Ld=1;qd=0;Ac=5126;Ma=Sc=Gc=Zb=0;ma(fa)?(Eb=!0,rc=Ka.createStream(34962,fa),Ac=rc.dtype):(rc=Ka.getBuffer(fa))?Ac=rc.dtype:"constant"in fa?(Ld=2,"number"===typeof fa.constant?(Gc=fa.constant,Sc=Ma=Zb=0):(Gc=0<fa.constant.length?fa.constant[0]:0,Sc=1<fa.constant.length?fa.constant[1]:0,Ma=2<fa.constant.length?fa.constant[2]:0,Zb=3<fa.constant.length?fa.constant[3]:0)):
(rc=ma(fa.buffer)?Ka.createStream(34962,fa.buffer):Ka.getBuffer(fa.buffer),Ac="type"in fa?kb[fa.type]:rc.dtype,Lc=!!fa.normalized,pc=fa.size|0,dc=fa.offset|0,qd=fa.stride|0,Sa=fa.divisor|0);Fb=n.buffer;n.buffer=rc;Wa=n.divisor;n.divisor=Sa;ra=n.normalized;n.normalized=Lc;td=n.offset;n.offset=dc;Ib=n.size;n.size=pc;Ta=n.state;n.state=Ld;qc=n.stride;n.stride=qd;eb=n.type;n.type=Ac;uc=n.w;n.w=Zb;Rb=n.x;n.x=Gc;Td=n.y;n.y=Sc;kc=n.z;n.z=Ma;sa.buffer=a.positionFractBuffer;Sb=!1;r=null;Tb=0;Na=!1;wb=pb=0;
ib=1;Pa=0;md=5126;mc=fb=Dd=$b=0;ma(sa)?(Sb=!0,r=Ka.createStream(34962,sa),md=r.dtype):(r=Ka.getBuffer(sa))?md=r.dtype:"constant"in sa?(ib=2,"number"===typeof sa.constant?(Dd=sa.constant,fb=mc=$b=0):(Dd=0<sa.constant.length?sa.constant[0]:0,fb=1<sa.constant.length?sa.constant[1]:0,mc=2<sa.constant.length?sa.constant[2]:0,$b=3<sa.constant.length?sa.constant[3]:0)):(r=ma(sa.buffer)?Ka.createStream(34962,sa.buffer):Ka.getBuffer(sa.buffer),md="type"in sa?kb[sa.type]:r.dtype,Na=!!sa.normalized,wb=sa.size|
0,pb=sa.offset|0,Pa=sa.stride|0,Tb=sa.divisor|0);Hc=e.buffer;e.buffer=r;fc=e.divisor;e.divisor=Tb;lb=e.normalized;e.normalized=Na;mb=e.offset;e.offset=pb;ta=e.size;e.size=wb;qb=e.state;e.state=ib;va=e.stride;e.stride=Pa;Ua=e.type;e.type=md;cb=e.w;e.w=$b;ya=e.x;e.x=Dd;gb=e.y;e.y=fb;Ia=e.z;e.z=mc;Cb=Z.vert;Z.vert=42;Bb=Z.frag;Z.frag=41;x.dirty=!0;h(v,a,f);v.viewportWidth=p;v.viewportHeight=y;Ga[0]=z;Ga[1]=P;Ga[2]=C;Ga[3]=D;U[0]=u;U[1]=E;U[2]=J;U[3]=N;H.blend_enable=L;Vb[0]=G;Vb[1]=A;bc[0]=ea;bc[1]=
K;bc[2]=Q;bc[3]=oa;H.depth_enable=t;$a[0]=I;$a[1]=ba;$a[2]=Y;$a[3]=ca;H.scissor_enable=ja;H.stencil_enable=pa;la&&(c.cpuTime+=performance.now()-na);Nb&&da.destroyStream(La);k.elements=Oa;k.offset=Od;k.count=ub;k.primitive=Yb;m[14]=cc;m[31]=Wd;m[10]=Ke;m[34]=kd;m[6]=od;m[7]=Vc;m[8]=ed;m[9]=sc;m[3]=Kc;Eb&&Ka.destroyStream(rc);n.buffer=Fb;n.divisor=Wa;n.normalized=ra;n.offset=td;n.size=Ib;n.state=Ta;n.stride=qc;n.type=eb;n.w=uc;n.x=Rb;n.y=Td;n.z=kc;Sb&&Ka.destroyStream(r);e.buffer=Hc;e.divisor=fc;e.normalized=
lb;e.offset=mb;e.size=ta;e.state=qb;e.stride=va;e.type=Ua;e.w=cb;e.x=ya;e.y=gb;e.z=Ia;Z.vert=Cb;Z.frag=Bb;x.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,f,g,d,b,n,e,h,q,B,l,w,p,z,u,C,S,I,J,Ka,v,x,k,da,Q,ba,E,ma,H,Z,m,L,U,la,Vb,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa,Wb,oc,xc,sd,Fc){var aa,M,ka,Da,vb,ab,ad,F,
D,ia,ua,W,ha,qa,G,A,ea,V,Ba,Ha,t,lc,db,ga,Hb,Ab,We,Ad,ee,te,xe,se,rd,de,we,ud,Fd,Kd,Od;aa=a.attributes;M=a.buffer;ka=a.context;Da=a.current;vb=a.draw;ab=a.elements;ad=a.extensions;F=a.framebuffer;D=a.gl;ia=a.isBufferArgs;ua=a.next;W=a.shader;ha=a.uniforms;qa=a.vao;G=ua.blend_color;A=Da.blend_color;ea=ua.blend_equation;V=Da.blend_equation;Ba=ua.blend_func;Ha=Da.blend_func;t=ua.colorMask;lc=Da.colorMask;db=ua.depth_range;ga=Da.depth_range;Hb=ua.polygonOffset_offset;Ab=Da.polygonOffset_offset;We=ua.sample_coverage;
Ad=Da.sample_coverage;ee=ua.scissor_box;te=Da.scissor_box;xe=ua.stencil_func;se=Da.stencil_func;rd=ua.stencil_opBack;de=Da.stencil_opBack;we=ua.stencil_opFront;ud=Da.stencil_opFront;Fd=ua.viewport;Kd=Da.viewport;Od={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var e,d,h,f,g,l;e=F.next;e!==F.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),F.cur=e);if(Da.dirty){var k,n,m,q,B,w,v,p,x,z,P,C,u,E,G,
H,J,L,Q,S,oa,W,I,U,ha,ba,Z,da,ra,Ba,ma,Ta,Ka,eb;k=ua.dither;k!==Da.dither&&(k?D.enable(3024):D.disable(3024),Da.dither=k);n=ea[0];m=ea[1];if(n!==V[0]||m!==V[1])D.blendEquationSeparate(n,m),V[0]=n,V[1]=m;q=ua.depth_func;q!==Da.depth_func&&(D.depthFunc(q),Da.depth_func=q);B=db[0];w=db[1];if(B!==ga[0]||w!==ga[1])D.depthRange(B,w),ga[0]=B,ga[1]=w;v=ua.depth_mask;v!==Da.depth_mask&&(D.depthMask(v),Da.depth_mask=v);p=t[0];x=t[1];z=t[2];P=t[3];if(p!==lc[0]||x!==lc[1]||z!==lc[2]||P!==lc[3])D.colorMask(p,
x,z,P),lc[0]=p,lc[1]=x,lc[2]=z,lc[3]=P;C=ua.cull_enable;C!==Da.cull_enable&&(C?D.enable(2884):D.disable(2884),Da.cull_enable=C);u=ua.cull_face;u!==Da.cull_face&&(D.cullFace(u),Da.cull_face=u);E=ua.frontFace;E!==Da.frontFace&&(D.frontFace(E),Da.frontFace=E);G=ua.lineWidth;G!==Da.lineWidth&&(D.lineWidth(G),Da.lineWidth=G);H=ua.polygonOffset_enable;H!==Da.polygonOffset_enable&&(H?D.enable(32823):D.disable(32823),Da.polygonOffset_enable=H);J=Hb[0];L=Hb[1];if(J!==Ab[0]||L!==Ab[1])D.polygonOffset(J,L),
Ab[0]=J,Ab[1]=L;Q=ua.sample_alpha;Q!==Da.sample_alpha&&(Q?D.enable(32926):D.disable(32926),Da.sample_alpha=Q);S=ua.sample_enable;S!==Da.sample_enable&&(S?D.enable(32928):D.disable(32928),Da.sample_enable=S);oa=We[0];W=We[1];if(oa!==Ad[0]||W!==Ad[1])D.sampleCoverage(oa,W),Ad[0]=oa,Ad[1]=W;I=ua.stencil_mask;I!==Da.stencil_mask&&(D.stencilMask(I),Da.stencil_mask=I);U=xe[0];ha=xe[1];ba=xe[2];if(U!==se[0]||ha!==se[1]||ba!==se[2])D.stencilFunc(U,ha,ba),se[0]=U,se[1]=ha,se[2]=ba;Z=we[0];da=we[1];ra=we[2];
Ba=we[3];if(Z!==ud[0]||da!==ud[1]||ra!==ud[2]||Ba!==ud[3])D.stencilOpSeparate(Z,da,ra,Ba),ud[0]=Z,ud[1]=da,ud[2]=ra,ud[3]=Ba;ma=rd[0];Ta=rd[1];Ka=rd[2];eb=rd[3];if(ma!==de[0]||Ta!==de[1]||Ka!==de[2]||eb!==de[3])D.stencilOpSeparate(ma,Ta,Ka,eb),de[0]=ma,de[1]=Ta,de[2]=Ka,de[3]=eb}D.blendColor(0,0,0,1);A[0]=0;A[1]=0;A[2]=0;A[3]=1;D.enable(3042);Da.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;D.disable(2929);Da.depth_enable=!1;D.enable(3089);Da.scissor_enable=
!0;D.disable(2960);Da.stencil_enable=!1;if(d=Da.profile)h=performance.now(),c.count+=b;D.useProgram(la.program);f=ad.angle_instanced_arrays;var Nb;qa.setVAO(null);D.uniform1i(y.location,!1);D.uniform1i(cc.location,pa.bind());Nb=vb.instances;for(g=0;g<b;++g){l=a[g];var Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,
Qb,hc,jc,Fd,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,df,ie,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,ee,ze,oe,Pe,Qe,Le,re,Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,jf,kf,lf,rf,of,sf,Cf,Df,Ne,Be,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf;Rb=l.viewport;Td=Rb.x|0;kc=Rb.y|0;Sb="width"in Rb?Rb.width|0:ka.framebufferWidth-Td;r="height"in Rb?Rb.height|0:ka.framebufferHeight-
kc;Tb=ka.viewportWidth;ka.viewportWidth=Sb;Na=ka.viewportHeight;ka.viewportHeight=r;D.viewport(Td,kc,Sb,r);Kd[0]=Td;Kd[1]=kc;Kd[2]=Sb;Kd[3]=r;pb=l.viewport;wb=pb.x|0;ib=pb.y|0;Pa="width"in pb?pb.width|0:ka.framebufferWidth-wb;md="height"in pb?pb.height|0:ka.framebufferHeight-ib;D.scissor(wb,ib,Pa,md);te[0]=wb;te[1]=ib;te[2]=Pa;te[3]=md;$b=Vb.call(this,ka,l,g);Dd=!1;fb=null;mc=0;Hc=!1;lb=fc=0;mb=1;ta=0;qb=5126;ya=cb=Ua=va=0;ia($b)?(Dd=!0,fb=M.createStream(34962,$b),qb=fb.dtype):(fb=M.getBuffer($b))?
qb=fb.dtype:"constant"in $b?(mb=2,"number"===typeof $b.constant?(Ua=$b.constant,cb=ya=va=0):(Ua=0<$b.constant.length?$b.constant[0]:0,cb=1<$b.constant.length?$b.constant[1]:0,ya=2<$b.constant.length?$b.constant[2]:0,va=3<$b.constant.length?$b.constant[3]:0)):(fb=ia($b.buffer)?M.createStream(34962,$b.buffer):M.getBuffer($b.buffer),qb="type"in $b?Od[$b.type]:fb.dtype,Hc=!!$b.normalized,lb=$b.size|0,fc=$b.offset|0,ta=$b.stride|0,mc=$b.divisor|0);gb=oc.location;Ia=aa[gb];if(1===mb){Ia.buffer||D.enableVertexAttribArray(gb);
Cb=lb||1;if(Ia.type!==qb||Ia.size!==Cb||Ia.buffer!==fb||Ia.normalized!==Hc||Ia.offset!==fc||Ia.stride!==ta)D.bindBuffer(34962,fb.buffer),D.vertexAttribPointer(gb,Cb,qb,Hc,ta,fc),Ia.type=qb,Ia.size=Cb,Ia.buffer=fb,Ia.normalized=Hc,Ia.offset=fc,Ia.stride=ta;Ia.divisor!==mc&&(f.vertexAttribDivisorANGLE(gb,mc),Ia.divisor=mc)}else if(Ia.buffer&&(D.disableVertexAttribArray(gb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==cb||Ia.z!==ya||Ia.w!==va)D.vertexAttrib4f(gb,Ua,cb,ya,va),Ia.x=Ua,Ia.y=cb,Ia.z=ya,Ia.w=va;Bb=
ub.call(this,ka,l,g);Ra=!1;Mc=null;Jb=0;Za=!1;wa=Ub=0;he=1;Ja=0;Ob=5126;gc=xa=jb=hb=0;ia(Bb)?(Ra=!0,Mc=M.createStream(34962,Bb),Ob=Mc.dtype):(Mc=M.getBuffer(Bb))?Ob=Mc.dtype:"constant"in Bb?(he=2,"number"===typeof Bb.constant?(jb=Bb.constant,xa=gc=hb=0):(jb=0<Bb.constant.length?Bb.constant[0]:0,xa=1<Bb.constant.length?Bb.constant[1]:0,gc=2<Bb.constant.length?Bb.constant[2]:0,hb=3<Bb.constant.length?Bb.constant[3]:0)):(Mc=ia(Bb.buffer)?M.createStream(34962,Bb.buffer):M.getBuffer(Bb.buffer),Ob="type"in
Bb?Od[Bb.type]:Mc.dtype,Za=!!Bb.normalized,wa=Bb.size|0,Ub=Bb.offset|0,Ja=Bb.stride|0,Jb=Bb.divisor|0);Ca=sd.location;rb=aa[Ca];if(1===he){rb.buffer||D.enableVertexAttribArray(Ca);sb=wa||1;if(rb.type!==Ob||rb.size!==sb||rb.buffer!==Mc||rb.normalized!==Za||rb.offset!==Ub||rb.stride!==Ja)D.bindBuffer(34962,Mc.buffer),D.vertexAttribPointer(Ca,sb,Ob,Za,Ja,Ub),rb.type=Ob,rb.size=sb,rb.buffer=Mc,rb.normalized=Za,rb.offset=Ub,rb.stride=Ja;rb.divisor!==Jb&&(f.vertexAttribDivisorANGLE(Ca,Jb),rb.divisor=Jb)}else if(rb.buffer&&
(D.disableVertexAttribArray(Ca),rb.buffer=null),rb.x!==jb||rb.y!==xa||rb.z!==gc||rb.w!==hb)D.vertexAttrib4f(Ca,jb,xa,gc,hb),rb.x=jb,rb.y=xa,rb.z=gc,rb.w=hb;Xa=bc.call(this,ka,l,g);Ya=!1;nc=null;Ic=0;vc=!1;Lb=Va=0;Zc=1;Ea=0;yc=5126;xb=nb=za=Qa=0;ia(Xa)?(Ya=!0,nc=M.createStream(34962,Xa),yc=nc.dtype):(nc=M.getBuffer(Xa))?yc=nc.dtype:"constant"in Xa?(Zc=2,"number"===typeof Xa.constant?(za=Xa.constant,nb=xb=Qa=0):(za=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,xb=2<
Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=ia(Xa.buffer)?M.createStream(34962,Xa.buffer):M.getBuffer(Xa.buffer),yc="type"in Xa?Od[Xa.type]:nc.dtype,vc=!!Xa.normalized,Lb=Xa.size|0,Va=Xa.offset|0,Ea=Xa.stride|0,Ic=Xa.divisor|0);Db=xc.location;tb=aa[Db];if(1===Zc){tb.buffer||D.enableVertexAttribArray(Db);wc=Lb||1;if(tb.type!==yc||tb.size!==wc||tb.buffer!==nc||tb.normalized!==vc||tb.offset!==Va||tb.stride!==Ea)D.bindBuffer(34962,nc.buffer),D.vertexAttribPointer(Db,
wc,yc,vc,Ea,Va),tb.type=yc,tb.size=wc,tb.buffer=nc,tb.normalized=vc,tb.offset=Va,tb.stride=Ea;tb.divisor!==Ic&&(f.vertexAttribDivisorANGLE(Db,Ic),tb.divisor=Ic)}else if(tb.buffer&&(D.disableVertexAttribArray(Db),tb.buffer=null),tb.x!==za||tb.y!==nb||tb.z!==xb||tb.w!==Qa)D.vertexAttrib4f(Db,za,nb,xb,Qa),tb.x=za,tb.y=nb,tb.z=xb,tb.w=Qa;yb=na.call(this,ka,l,g);id=!1;tc=null;Md=0;Oc=!1;fd=ld=0;Xb=1;ec=0;Pb=5126;zb=ob=ac=Fa=0;ia(yb)?(id=!0,tc=M.createStream(34962,yb),Pb=tc.dtype):(tc=M.getBuffer(yb))?
Pb=tc.dtype:"constant"in yb?(Xb=2,"number"===typeof yb.constant?(ac=yb.constant,ob=zb=Fa=0):(ac=0<yb.constant.length?yb.constant[0]:0,ob=1<yb.constant.length?yb.constant[1]:0,zb=2<yb.constant.length?yb.constant[2]:0,Fa=3<yb.constant.length?yb.constant[3]:0)):(tc=ia(yb.buffer)?M.createStream(34962,yb.buffer):M.getBuffer(yb.buffer),Pb="type"in yb?Od[yb.type]:tc.dtype,Oc=!!yb.normalized,fd=yb.size|0,ld=yb.offset|0,ec=yb.stride|0,Md=yb.divisor|0);Mb=Fc.location;Qb=aa[Mb];if(1===Xb){Qb.buffer||D.enableVertexAttribArray(Mb);
hc=fd||1;if(Qb.type!==Pb||Qb.size!==hc||Qb.buffer!==tc||Qb.normalized!==Oc||Qb.offset!==ld||Qb.stride!==ec)D.bindBuffer(34962,tc.buffer),D.vertexAttribPointer(Mb,hc,Pb,Oc,ec,ld),Qb.type=Pb,Qb.size=hc,Qb.buffer=tc,Qb.normalized=Oc,Qb.offset=ld,Qb.stride=ec;Qb.divisor!==Md&&(f.vertexAttribDivisorANGLE(Mb,Md),Qb.divisor=Md)}else if(Qb.buffer&&(D.disableVertexAttribArray(Mb),Qb.buffer=null),Qb.x!==ac||Qb.y!==ob||Qb.z!==zb||Qb.w!==Fa)D.vertexAttrib4f(Mb,ac,ob,zb,Fa),Qb.x=ac,Qb.y=ob,Qb.z=zb,Qb.w=Fa;jc=
Oa.call(this,ka,l,g);Fd=!1;Bc=null;Cc=0;Dc=!1;$c=Pc=0;Tc=1;Qc=0;Kb=5126;Uc=Jc=Rc=Gb=0;ia(jc)?(Fd=!0,Bc=M.createStream(34962,jc),Kb=Bc.dtype):(Bc=M.getBuffer(jc))?Kb=Bc.dtype:"constant"in jc?(Tc=2,"number"===typeof jc.constant?(Rc=jc.constant,Jc=Uc=Gb=0):(Rc=0<jc.constant.length?jc.constant[0]:0,Jc=1<jc.constant.length?jc.constant[1]:0,Uc=2<jc.constant.length?jc.constant[2]:0,Gb=3<jc.constant.length?jc.constant[3]:0)):(Bc=ia(jc.buffer)?M.createStream(34962,jc.buffer):M.getBuffer(jc.buffer),Kb="type"in
jc?Od[jc.type]:Bc.dtype,Dc=!!jc.normalized,$c=jc.size|0,Pc=jc.offset|0,Qc=jc.stride|0,Cc=jc.divisor|0);ic=fa.location;Xc=aa[ic];if(1===Tc){Xc.buffer||D.enableVertexAttribArray(ic);wd=$c||1;if(Xc.type!==Kb||Xc.size!==wd||Xc.buffer!==Bc||Xc.normalized!==Dc||Xc.offset!==Pc||Xc.stride!==Qc)D.bindBuffer(34962,Bc.buffer),D.vertexAttribPointer(ic,wd,Kb,Dc,Qc,Pc),Xc.type=Kb,Xc.size=wd,Xc.buffer=Bc,Xc.normalized=Dc,Xc.offset=Pc,Xc.stride=Qc;Xc.divisor!==Cc&&(f.vertexAttribDivisorANGLE(ic,Cc),Xc.divisor=Cc)}else if(Xc.buffer&&
(D.disableVertexAttribArray(ic),Xc.buffer=null),Xc.x!==Rc||Xc.y!==Jc||Xc.z!==Uc||Xc.w!==Gb)D.vertexAttrib4f(ic,Rc,Jc,Uc,Gb),Xc.x=Rc,Xc.y=Jc,Xc.z=Uc,Xc.w=Gb;gd=Y.call(this,ka,l,g);jd=!1;Yc=null;df=0;ie=!1;ue=je=0;me=1;Id=0;Gd=5126;hd=nd=Ec=dd=0;ia(gd)?(jd=!0,Yc=M.createStream(34962,gd),Gd=Yc.dtype):(Yc=M.getBuffer(gd))?Gd=Yc.dtype:"constant"in gd?(me=2,"number"===typeof gd.constant?(Ec=gd.constant,nd=hd=dd=0):(Ec=0<gd.constant.length?gd.constant[0]:0,nd=1<gd.constant.length?gd.constant[1]:0,hd=2<gd.constant.length?
gd.constant[2]:0,dd=3<gd.constant.length?gd.constant[3]:0)):(Yc=ia(gd.buffer)?M.createStream(34962,gd.buffer):M.getBuffer(gd.buffer),Gd="type"in gd?Od[gd.type]:Yc.dtype,ie=!!gd.normalized,ue=gd.size|0,je=gd.offset|0,Id=gd.stride|0,df=gd.divisor|0);bd=$a.location;pd=aa[bd];if(1===me){pd.buffer||D.enableVertexAttribArray(bd);Bd=ue||1;if(pd.type!==Gd||pd.size!==Bd||pd.buffer!==Yc||pd.normalized!==ie||pd.offset!==je||pd.stride!==Id)D.bindBuffer(34962,Yc.buffer),D.vertexAttribPointer(bd,Bd,Gd,ie,Id,je),
pd.type=Gd,pd.size=Bd,pd.buffer=Yc,pd.normalized=ie,pd.offset=je,pd.stride=Id;pd.divisor!==df&&(f.vertexAttribDivisorANGLE(bd,df),pd.divisor=df)}else if(pd.buffer&&(D.disableVertexAttribArray(bd),pd.buffer=null),pd.x!==Ec||pd.y!==nd||pd.z!==hd||pd.w!==dd)D.vertexAttrib4f(bd,Ec,nd,hd,dd),pd.x=Ec,pd.y=nd,pd.z=hd,pd.w=dd;Ed=K.call(this,ka,l,g);ve=!1;ne=null;ye=0;ce=!1;ae=be=0;pe=1;Zd=0;fe=5126;ke=qe=Wc=zc=0;ia(Ed)?(ve=!0,ne=M.createStream(34962,Ed),fe=ne.dtype):(ne=M.getBuffer(Ed))?fe=ne.dtype:"constant"in
Ed?(pe=2,"number"===typeof Ed.constant?(Wc=Ed.constant,qe=ke=zc=0):(Wc=0<Ed.constant.length?Ed.constant[0]:0,qe=1<Ed.constant.length?Ed.constant[1]:0,ke=2<Ed.constant.length?Ed.constant[2]:0,zc=3<Ed.constant.length?Ed.constant[3]:0)):(ne=ia(Ed.buffer)?M.createStream(34962,Ed.buffer):M.getBuffer(Ed.buffer),fe="type"in Ed?Od[Ed.type]:ne.dtype,ce=!!Ed.normalized,ae=Ed.size|0,be=Ed.offset|0,Zd=Ed.stride|0,ye=Ed.divisor|0);Hd=T.location;Nd=aa[Hd];if(1===pe){Nd.buffer||D.enableVertexAttribArray(Hd);Pd=
ae||4;if(Nd.type!==fe||Nd.size!==Pd||Nd.buffer!==ne||Nd.normalized!==ce||Nd.offset!==be||Nd.stride!==Zd)D.bindBuffer(34962,ne.buffer),D.vertexAttribPointer(Hd,Pd,fe,ce,Zd,be),Nd.type=fe,Nd.size=Pd,Nd.buffer=ne,Nd.normalized=ce,Nd.offset=be,Nd.stride=Zd;Nd.divisor!==ye&&(f.vertexAttribDivisorANGLE(Hd,ye),Nd.divisor=ye)}else if(Nd.buffer&&(D.disableVertexAttribArray(Hd),Nd.buffer=null),Nd.x!==Wc||Nd.y!==qe||Nd.z!==ke||Nd.w!==zc)D.vertexAttrib4f(Hd,Wc,qe,ke,zc),Nd.x=Wc,Nd.y=qe,Nd.z=ke,Nd.w=zc;Qd=N.call(this,
ka,l,g);ge=!1;ee=null;ze=0;oe=!1;Qe=Pe=0;Le=1;re=0;Ce=5126;De=He=Ge=Fe=0;ia(Qd)?(ge=!0,ee=M.createStream(34962,Qd),Ce=ee.dtype):(ee=M.getBuffer(Qd))?Ce=ee.dtype:"constant"in Qd?(Le=2,"number"===typeof Qd.constant?(Ge=Qd.constant,He=De=Fe=0):(Ge=0<Qd.constant.length?Qd.constant[0]:0,He=1<Qd.constant.length?Qd.constant[1]:0,De=2<Qd.constant.length?Qd.constant[2]:0,Fe=3<Qd.constant.length?Qd.constant[3]:0)):(ee=ia(Qd.buffer)?M.createStream(34962,Qd.buffer):M.getBuffer(Qd.buffer),Ce="type"in Qd?Od[Qd.type]:
ee.dtype,oe=!!Qd.normalized,Qe=Qd.size|0,Pe=Qd.offset|0,re=Qd.stride|0,ze=Qd.divisor|0);Jd=Yb.location;Ud=aa[Jd];if(1===Le){Ud.buffer||D.enableVertexAttribArray(Jd);Yd=Qe||4;if(Ud.type!==Ce||Ud.size!==Yd||Ud.buffer!==ee||Ud.normalized!==oe||Ud.offset!==Pe||Ud.stride!==re)D.bindBuffer(34962,ee.buffer),D.vertexAttribPointer(Jd,Yd,Ce,oe,re,Pe),Ud.type=Ce,Ud.size=Yd,Ud.buffer=ee,Ud.normalized=oe,Ud.offset=Pe,Ud.stride=re;Ud.divisor!==ze&&(f.vertexAttribDivisorANGLE(Jd,ze),Ud.divisor=ze)}else if(Ud.buffer&&
(D.disableVertexAttribArray(Jd),Ud.buffer=null),Ud.x!==Ge||Ud.y!==He||Ud.z!==De||Ud.w!==Fe)D.vertexAttrib4f(Jd,Ge,He,De,Fe),Ud.x=Ge,Ud.y=He,Ud.z=De,Ud.w=Fe;$d=R.call(this,ka,l,g);Ie=!1;zd=null;Rd=0;Ae=!1;af=Je=0;Ze=1;Re=0;Me=5126;Te=Se=Ve=Ye=0;ia($d)?(Ie=!0,zd=M.createStream(34962,$d),Me=zd.dtype):(zd=M.getBuffer($d))?Me=zd.dtype:"constant"in $d?(Ze=2,"number"===typeof $d.constant?(Ve=$d.constant,Se=Te=Ye=0):(Ve=0<$d.constant.length?$d.constant[0]:0,Se=1<$d.constant.length?$d.constant[1]:0,Te=2<$d.constant.length?
$d.constant[2]:0,Ye=3<$d.constant.length?$d.constant[3]:0)):(zd=ia($d.buffer)?M.createStream(34962,$d.buffer):M.getBuffer($d.buffer),Me="type"in $d?Od[$d.type]:zd.dtype,Ae=!!$d.normalized,af=$d.size|0,Je=$d.offset|0,Re=$d.stride|0,Rd=$d.divisor|0);Sd=ja.location;Xd=aa[Sd];if(1===Ze){Xd.buffer||D.enableVertexAttribArray(Sd);Ue=af||1;if(Xd.type!==Me||Xd.size!==Ue||Xd.buffer!==zd||Xd.normalized!==Ae||Xd.offset!==Je||Xd.stride!==Re)D.bindBuffer(34962,zd.buffer),D.vertexAttribPointer(Sd,Ue,Me,Ae,Re,Je),
Xd.type=Me,Xd.size=Ue,Xd.buffer=zd,Xd.normalized=Ae,Xd.offset=Je,Xd.stride=Re;Xd.divisor!==Rd&&(f.vertexAttribDivisorANGLE(Sd,Rd),Xd.divisor=Rd)}else if(Xd.buffer&&(D.disableVertexAttribArray(Sd),Xd.buffer=null),Xd.x!==Ve||Xd.y!==Se||Xd.z!==Te||Xd.w!==Ye)D.vertexAttrib4f(Sd,Ve,Se,Te,Ye),Xd.x=Ve,Xd.y=Se,Xd.z=Te,Xd.w=Ye;hf=ka.pixelRatio;g&&mf===hf||(mf=hf,D.uniform1f(Ga.location,hf));ef=l.scale;jf=ef[0];lf=ef[1];g&&kf===jf&&rf===lf||(kf=jf,rf=lf,D.uniform2f(X.location,jf,lf));of=l.scaleFract;sf=of[0];
Df=of[1];g&&Cf===sf&&Ne===Df||(Cf=sf,Ne=Df,D.uniform2f(kb.location,sf,Df));Be=l.translate;pf=Be[0];Ef=Be[1];g&&qf===pf&&Hf===Ef||(qf=pf,Hf=Ef,D.uniform2f(sa.location,pf,Ef));Bf=l.translateFract;Ff=Bf[0];xf=Bf[1];g&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,D.uniform2f(Wb.location,Ff,xf));wf=O.call(this,ka,l,g);zf=wf[0];Jf=wf[1];g&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,D.uniform2f(La.location,zf,Jf));Lf=l.opacity;g&&Mf===Lf||(Mf=Lf,D.uniform1f(Aa.location,Lf));(tf=l.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Rf=tf._texture;D.uniform1i(ca.location,Rf.bind());If=l.elements;uf=null;(uf=(dg=ia(If))?ab.createStream(If):ab.getElements(If))&&D.bindBuffer(34963,uf.buffer.buffer);Sf=l.offset;if(Tf=l.count)0<Nb?uf?f.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),Nb):f.drawArraysInstancedANGLE(0,Sf,Tf,Nb):0>Nb&&(uf?D.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):D.drawArrays(0,Sf,Tf)),ka.viewportWidth=Tb,ka.viewportHeight=Na,Dd&&M.destroyStream(fb),Ra&&M.destroyStream(Mc),Ya&&M.destroyStream(nc),
id&&M.destroyStream(tc),Fd&&M.destroyStream(Bc),jd&&M.destroyStream(Yc),ve&&M.destroyStream(ne),ge&&M.destroyStream(ee),Ie&&M.destroyStream(zd),Rf.unbind(),dg&&ab.destroyStream(uf)}pa.unbind();Da.dirty=!0;qa.setVAO(null);d&&(c.cpuTime+=performance.now()-h)},draw:function(a){var k,m,v,x,z,C,u,E,G,H,J,L,N,Q,S,O,oa,K,R,W,I,U,ha,ba,Z,Y,da,Ba,ma,pa,la,na,Ma,Fb,Wa,ra,Ka,Ib,Ta,Nb,eb,Oa,Rb,ub,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,bc,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,Vb,Ja,Ob,hb,
jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,Fd,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,ee,ie,je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,vf,ze,oe,Pe,Qe,Le,re;k=F.next;k!==F.cur&&(k?D.bindFramebuffer(36160,k.framebuffer):D.bindFramebuffer(36160,null),F.cur=k);if(Da.dirty){var Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,
jf,kf,lf,rf,of,sf;Ce=ua.dither;Ce!==Da.dither&&(Ce?D.enable(3024):D.disable(3024),Da.dither=Ce);Fe=ea[0];Ge=ea[1];if(Fe!==V[0]||Ge!==V[1])D.blendEquationSeparate(Fe,Ge),V[0]=Fe,V[1]=Ge;He=ua.depth_func;He!==Da.depth_func&&(D.depthFunc(He),Da.depth_func=He);De=db[0];Jd=db[1];if(De!==ga[0]||Jd!==ga[1])D.depthRange(De,Jd),ga[0]=De,ga[1]=Jd;Ud=ua.depth_mask;Ud!==Da.depth_mask&&(D.depthMask(Ud),Da.depth_mask=Ud);Yd=t[0];$d=t[1];Ie=t[2];zd=t[3];if(Yd!==lc[0]||$d!==lc[1]||Ie!==lc[2]||zd!==lc[3])D.colorMask(Yd,
$d,Ie,zd),lc[0]=Yd,lc[1]=$d,lc[2]=Ie,lc[3]=zd;Rd=ua.cull_enable;Rd!==Da.cull_enable&&(Rd?D.enable(2884):D.disable(2884),Da.cull_enable=Rd);Ae=ua.cull_face;Ae!==Da.cull_face&&(D.cullFace(Ae),Da.cull_face=Ae);Je=ua.frontFace;Je!==Da.frontFace&&(D.frontFace(Je),Da.frontFace=Je);af=ua.lineWidth;af!==Da.lineWidth&&(D.lineWidth(af),Da.lineWidth=af);Ze=ua.polygonOffset_enable;Ze!==Da.polygonOffset_enable&&(Ze?D.enable(32823):D.disable(32823),Da.polygonOffset_enable=Ze);Re=Hb[0];Me=Hb[1];if(Re!==Ab[0]||Me!==
Ab[1])D.polygonOffset(Re,Me),Ab[0]=Re,Ab[1]=Me;Ye=ua.sample_alpha;Ye!==Da.sample_alpha&&(Ye?D.enable(32926):D.disable(32926),Da.sample_alpha=Ye);Ve=ua.sample_enable;Ve!==Da.sample_enable&&(Ve?D.enable(32928):D.disable(32928),Da.sample_enable=Ve);Se=We[0];Te=We[1];if(Se!==Ad[0]||Te!==Ad[1])D.sampleCoverage(Se,Te),Ad[0]=Se,Ad[1]=Te;Sd=ua.stencil_mask;Sd!==Da.stencil_mask&&(D.stencilMask(Sd),Da.stencil_mask=Sd);Xd=xe[0];Ue=xe[1];hf=xe[2];if(Xd!==se[0]||Ue!==se[1]||hf!==se[2])D.stencilFunc(Xd,Ue,hf),
se[0]=Xd,se[1]=Ue,se[2]=hf;mf=we[0];ef=we[1];jf=we[2];kf=we[3];if(mf!==ud[0]||ef!==ud[1]||jf!==ud[2]||kf!==ud[3])D.stencilOpSeparate(mf,ef,jf,kf),ud[0]=mf,ud[1]=ef,ud[2]=jf,ud[3]=kf;lf=rd[0];rf=rd[1];of=rd[2];sf=rd[3];if(lf!==de[0]||rf!==de[1]||of!==de[2]||sf!==de[3])D.stencilOpSeparate(lf,rf,of,sf),de[0]=lf,de[1]=rf,de[2]=of,de[3]=sf}m=a.viewport;v=m.x|0;x=m.y|0;z="width"in m?m.width|0:ka.framebufferWidth-v;C="height"in m?m.height|0:ka.framebufferHeight-x;u=ka.viewportWidth;ka.viewportWidth=z;E=
ka.viewportHeight;ka.viewportHeight=C;D.viewport(v,x,z,C);Kd[0]=v;Kd[1]=x;Kd[2]=z;Kd[3]=C;D.blendColor(0,0,0,1);A[0]=0;A[1]=0;A[2]=0;A[3]=1;D.enable(3042);Da.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;D.disable(2929);Da.depth_enable=!1;G=a.viewport;H=G.x|0;J=G.y|0;L="width"in G?G.width|0:ka.framebufferWidth-H;N="height"in G?G.height|0:ka.framebufferHeight-J;D.scissor(H,J,L,N);te[0]=H;te[1]=J;te[2]=L;te[3]=N;D.enable(3089);Da.scissor_enable=!0;D.disable(2960);
Da.stencil_enable=!1;if(Q=Da.profile)S=performance.now(),c.count++;D.useProgram(f.program);O=ad.angle_instanced_arrays;qa.setVAO(null);oa=g.call(this,ka,a,0);K=!1;R=null;W=0;I=!1;ha=U=0;ba=1;Z=0;Y=5126;pa=ma=Ba=da=0;ia(oa)?(K=!0,R=M.createStream(34962,oa),Y=R.dtype):(R=M.getBuffer(oa))?Y=R.dtype:"constant"in oa?(ba=2,"number"===typeof oa.constant?(Ba=oa.constant,ma=pa=da=0):(Ba=0<oa.constant.length?oa.constant[0]:0,ma=1<oa.constant.length?oa.constant[1]:0,pa=2<oa.constant.length?oa.constant[2]:0,
da=3<oa.constant.length?oa.constant[3]:0)):(R=ia(oa.buffer)?M.createStream(34962,oa.buffer):M.getBuffer(oa.buffer),Y="type"in oa?Od[oa.type]:R.dtype,I=!!oa.normalized,ha=oa.size|0,U=oa.offset|0,Z=oa.stride|0,W=oa.divisor|0);la=oc.location;na=aa[la];if(1===ba){na.buffer||D.enableVertexAttribArray(la);Ma=ha||1;if(na.type!==Y||na.size!==Ma||na.buffer!==R||na.normalized!==I||na.offset!==U||na.stride!==Z)D.bindBuffer(34962,R.buffer),D.vertexAttribPointer(la,Ma,Y,I,Z,U),na.type=Y,na.size=Ma,na.buffer=R,
na.normalized=I,na.offset=U,na.stride=Z;na.divisor!==W&&(O.vertexAttribDivisorANGLE(la,W),na.divisor=W)}else if(na.buffer&&(D.disableVertexAttribArray(la),na.buffer=null),na.x!==Ba||na.y!==ma||na.z!==pa||na.w!==da)D.vertexAttrib4f(la,Ba,ma,pa,da),na.x=Ba,na.y=ma,na.z=pa,na.w=da;Fb=d.call(this,ka,a,0);Wa=!1;ra=null;Ka=0;Ib=!1;Nb=Ta=0;eb=1;Oa=0;Rb=5126;r=Sb=kc=ub=0;ia(Fb)?(Wa=!0,ra=M.createStream(34962,Fb),Rb=ra.dtype):(ra=M.getBuffer(Fb))?Rb=ra.dtype:"constant"in Fb?(eb=2,"number"===typeof Fb.constant?
(kc=Fb.constant,Sb=r=ub=0):(kc=0<Fb.constant.length?Fb.constant[0]:0,Sb=1<Fb.constant.length?Fb.constant[1]:0,r=2<Fb.constant.length?Fb.constant[2]:0,ub=3<Fb.constant.length?Fb.constant[3]:0)):(ra=ia(Fb.buffer)?M.createStream(34962,Fb.buffer):M.getBuffer(Fb.buffer),Rb="type"in Fb?Od[Fb.type]:ra.dtype,Ib=!!Fb.normalized,Nb=Fb.size|0,Ta=Fb.offset|0,Oa=Fb.stride|0,Ka=Fb.divisor|0);Tb=sd.location;Na=aa[Tb];if(1===eb){Na.buffer||D.enableVertexAttribArray(Tb);pb=Nb||1;if(Na.type!==Rb||Na.size!==pb||Na.buffer!==
ra||Na.normalized!==Ib||Na.offset!==Ta||Na.stride!==Oa)D.bindBuffer(34962,ra.buffer),D.vertexAttribPointer(Tb,pb,Rb,Ib,Oa,Ta),Na.type=Rb,Na.size=pb,Na.buffer=ra,Na.normalized=Ib,Na.offset=Ta,Na.stride=Oa;Na.divisor!==Ka&&(O.vertexAttribDivisorANGLE(Tb,Ka),Na.divisor=Ka)}else if(Na.buffer&&(D.disableVertexAttribArray(Tb),Na.buffer=null),Na.x!==kc||Na.y!==Sb||Na.z!==r||Na.w!==ub)D.vertexAttrib4f(Tb,kc,Sb,r,ub),Na.x=kc,Na.y=Sb,Na.z=r,Na.w=ub;wb=b.call(this,ka,a,0);ib=!1;Pa=null;md=0;$b=!1;fb=bc=0;mc=
1;Hc=0;fc=5126;qb=ta=mb=lb=0;ia(wb)?(ib=!0,Pa=M.createStream(34962,wb),fc=Pa.dtype):(Pa=M.getBuffer(wb))?fc=Pa.dtype:"constant"in wb?(mc=2,"number"===typeof wb.constant?(mb=wb.constant,ta=qb=lb=0):(mb=0<wb.constant.length?wb.constant[0]:0,ta=1<wb.constant.length?wb.constant[1]:0,qb=2<wb.constant.length?wb.constant[2]:0,lb=3<wb.constant.length?wb.constant[3]:0)):(Pa=ia(wb.buffer)?M.createStream(34962,wb.buffer):M.getBuffer(wb.buffer),fc="type"in wb?Od[wb.type]:Pa.dtype,$b=!!wb.normalized,fb=wb.size|
0,bc=wb.offset|0,Hc=wb.stride|0,md=wb.divisor|0);va=xc.location;Ua=aa[va];if(1===mc){Ua.buffer||D.enableVertexAttribArray(va);cb=fb||1;if(Ua.type!==fc||Ua.size!==cb||Ua.buffer!==Pa||Ua.normalized!==$b||Ua.offset!==bc||Ua.stride!==Hc)D.bindBuffer(34962,Pa.buffer),D.vertexAttribPointer(va,cb,fc,$b,Hc,bc),Ua.type=fc,Ua.size=cb,Ua.buffer=Pa,Ua.normalized=$b,Ua.offset=bc,Ua.stride=Hc;Ua.divisor!==md&&(O.vertexAttribDivisorANGLE(va,md),Ua.divisor=md)}else if(Ua.buffer&&(D.disableVertexAttribArray(va),Ua.buffer=
null),Ua.x!==mb||Ua.y!==ta||Ua.z!==qb||Ua.w!==lb)D.vertexAttrib4f(va,mb,ta,qb,lb),Ua.x=mb,Ua.y=ta,Ua.z=qb,Ua.w=lb;ya=n.call(this,ka,a,0);gb=!1;Ia=null;Cb=0;Bb=!1;Mc=Ra=0;Jb=1;Za=0;Ub=5126;Ob=Ja=Vb=wa=0;ia(ya)?(gb=!0,Ia=M.createStream(34962,ya),Ub=Ia.dtype):(Ia=M.getBuffer(ya))?Ub=Ia.dtype:"constant"in ya?(Jb=2,"number"===typeof ya.constant?(Vb=ya.constant,Ja=Ob=wa=0):(Vb=0<ya.constant.length?ya.constant[0]:0,Ja=1<ya.constant.length?ya.constant[1]:0,Ob=2<ya.constant.length?ya.constant[2]:0,wa=3<ya.constant.length?
ya.constant[3]:0)):(Ia=ia(ya.buffer)?M.createStream(34962,ya.buffer):M.getBuffer(ya.buffer),Ub="type"in ya?Od[ya.type]:Ia.dtype,Bb=!!ya.normalized,Mc=ya.size|0,Ra=ya.offset|0,Za=ya.stride|0,Cb=ya.divisor|0);hb=Fc.location;jb=aa[hb];if(1===Jb){jb.buffer||D.enableVertexAttribArray(hb);xa=Mc||1;if(jb.type!==Ub||jb.size!==xa||jb.buffer!==Ia||jb.normalized!==Bb||jb.offset!==Ra||jb.stride!==Za)D.bindBuffer(34962,Ia.buffer),D.vertexAttribPointer(hb,xa,Ub,Bb,Za,Ra),jb.type=Ub,jb.size=xa,jb.buffer=Ia,jb.normalized=
Bb,jb.offset=Ra,jb.stride=Za;jb.divisor!==Cb&&(O.vertexAttribDivisorANGLE(hb,Cb),jb.divisor=Cb)}else if(jb.buffer&&(D.disableVertexAttribArray(hb),jb.buffer=null),jb.x!==Vb||jb.y!==Ja||jb.z!==Ob||jb.w!==wa)D.vertexAttrib4f(hb,Vb,Ja,Ob,wa),jb.x=Vb,jb.y=Ja,jb.z=Ob,jb.w=wa;gc=e.call(this,ka,a,0);Ca=!1;rb=null;sb=0;Xa=!1;nc=Ya=0;Ic=1;vc=0;Va=5126;yc=Ea=Zc=Lb=0;ia(gc)?(Ca=!0,rb=M.createStream(34962,gc),Va=rb.dtype):(rb=M.getBuffer(gc))?Va=rb.dtype:"constant"in gc?(Ic=2,"number"===typeof gc.constant?(Zc=
gc.constant,Ea=yc=Lb=0):(Zc=0<gc.constant.length?gc.constant[0]:0,Ea=1<gc.constant.length?gc.constant[1]:0,yc=2<gc.constant.length?gc.constant[2]:0,Lb=3<gc.constant.length?gc.constant[3]:0)):(rb=ia(gc.buffer)?M.createStream(34962,gc.buffer):M.getBuffer(gc.buffer),Va="type"in gc?Od[gc.type]:rb.dtype,Xa=!!gc.normalized,nc=gc.size|0,Ya=gc.offset|0,vc=gc.stride|0,sb=gc.divisor|0);Qa=fa.location;za=aa[Qa];if(1===Ic){za.buffer||D.enableVertexAttribArray(Qa);nb=nc||1;if(za.type!==Va||za.size!==nb||za.buffer!==
rb||za.normalized!==Xa||za.offset!==Ya||za.stride!==vc)D.bindBuffer(34962,rb.buffer),D.vertexAttribPointer(Qa,nb,Va,Xa,vc,Ya),za.type=Va,za.size=nb,za.buffer=rb,za.normalized=Xa,za.offset=Ya,za.stride=vc;za.divisor!==sb&&(O.vertexAttribDivisorANGLE(Qa,sb),za.divisor=sb)}else if(za.buffer&&(D.disableVertexAttribArray(Qa),za.buffer=null),za.x!==Zc||za.y!==Ea||za.z!==yc||za.w!==Lb)D.vertexAttrib4f(Qa,Zc,Ea,yc,Lb),za.x=Zc,za.y=Ea,za.z=yc,za.w=Lb;xb=h.call(this,ka,a,0);Db=!1;tb=null;wc=0;yb=!1;tc=id=0;
Md=1;Oc=0;ld=5126;Pb=ec=Xb=fd=0;ia(xb)?(Db=!0,tb=M.createStream(34962,xb),ld=tb.dtype):(tb=M.getBuffer(xb))?ld=tb.dtype:"constant"in xb?(Md=2,"number"===typeof xb.constant?(Xb=xb.constant,ec=Pb=fd=0):(Xb=0<xb.constant.length?xb.constant[0]:0,ec=1<xb.constant.length?xb.constant[1]:0,Pb=2<xb.constant.length?xb.constant[2]:0,fd=3<xb.constant.length?xb.constant[3]:0)):(tb=ia(xb.buffer)?M.createStream(34962,xb.buffer):M.getBuffer(xb.buffer),ld="type"in xb?Od[xb.type]:tb.dtype,yb=!!xb.normalized,tc=xb.size|
0,id=xb.offset|0,Oc=xb.stride|0,wc=xb.divisor|0);Fa=$a.location;ac=aa[Fa];if(1===Md){ac.buffer||D.enableVertexAttribArray(Fa);ob=tc||1;if(ac.type!==ld||ac.size!==ob||ac.buffer!==tb||ac.normalized!==yb||ac.offset!==id||ac.stride!==Oc)D.bindBuffer(34962,tb.buffer),D.vertexAttribPointer(Fa,ob,ld,yb,Oc,id),ac.type=ld,ac.size=ob,ac.buffer=tb,ac.normalized=yb,ac.offset=id,ac.stride=Oc;ac.divisor!==wc&&(O.vertexAttribDivisorANGLE(Fa,wc),ac.divisor=wc)}else if(ac.buffer&&(D.disableVertexAttribArray(Fa),ac.buffer=
null),ac.x!==Xb||ac.y!==ec||ac.z!==Pb||ac.w!==fd)D.vertexAttrib4f(Fa,Xb,ec,Pb,fd),ac.x=Xb,ac.y=ec,ac.z=Pb,ac.w=fd;zb=q.call(this,ka,a,0);Mb=!1;Qb=null;hc=0;jc=!1;Bc=Fd=0;Cc=1;Dc=0;Pc=5126;Kb=Qc=Tc=$c=0;ia(zb)?(Mb=!0,Qb=M.createStream(34962,zb),Pc=Qb.dtype):(Qb=M.getBuffer(zb))?Pc=Qb.dtype:"constant"in zb?(Cc=2,"number"===typeof zb.constant?(Tc=zb.constant,Qc=Kb=$c=0):(Tc=0<zb.constant.length?zb.constant[0]:0,Qc=1<zb.constant.length?zb.constant[1]:0,Kb=2<zb.constant.length?zb.constant[2]:0,$c=3<zb.constant.length?
zb.constant[3]:0)):(Qb=ia(zb.buffer)?M.createStream(34962,zb.buffer):M.getBuffer(zb.buffer),Pc="type"in zb?Od[zb.type]:Qb.dtype,jc=!!zb.normalized,Bc=zb.size|0,Fd=zb.offset|0,Dc=zb.stride|0,hc=zb.divisor|0);Gb=T.location;Rc=aa[Gb];if(1===Cc){Rc.buffer||D.enableVertexAttribArray(Gb);Jc=Bc||4;if(Rc.type!==Pc||Rc.size!==Jc||Rc.buffer!==Qb||Rc.normalized!==jc||Rc.offset!==Fd||Rc.stride!==Dc)D.bindBuffer(34962,Qb.buffer),D.vertexAttribPointer(Gb,Jc,Pc,jc,Dc,Fd),Rc.type=Pc,Rc.size=Jc,Rc.buffer=Qb,Rc.normalized=
jc,Rc.offset=Fd,Rc.stride=Dc;Rc.divisor!==hc&&(O.vertexAttribDivisorANGLE(Gb,hc),Rc.divisor=hc)}else if(Rc.buffer&&(D.disableVertexAttribArray(Gb),Rc.buffer=null),Rc.x!==Tc||Rc.y!==Qc||Rc.z!==Kb||Rc.w!==$c)D.vertexAttrib4f(Gb,Tc,Qc,Kb,$c),Rc.x=Tc,Rc.y=Qc,Rc.z=Kb,Rc.w=$c;Uc=B.call(this,ka,a,0);ic=!1;Xc=null;wd=0;gd=!1;Yc=jd=0;ee=1;ie=0;je=5126;Gd=Id=me=ue=0;ia(Uc)?(ic=!0,Xc=M.createStream(34962,Uc),je=Xc.dtype):(Xc=M.getBuffer(Uc))?je=Xc.dtype:"constant"in Uc?(ee=2,"number"===typeof Uc.constant?(me=
Uc.constant,Id=Gd=ue=0):(me=0<Uc.constant.length?Uc.constant[0]:0,Id=1<Uc.constant.length?Uc.constant[1]:0,Gd=2<Uc.constant.length?Uc.constant[2]:0,ue=3<Uc.constant.length?Uc.constant[3]:0)):(Xc=ia(Uc.buffer)?M.createStream(34962,Uc.buffer):M.getBuffer(Uc.buffer),je="type"in Uc?Od[Uc.type]:Xc.dtype,gd=!!Uc.normalized,Yc=Uc.size|0,jd=Uc.offset|0,ie=Uc.stride|0,wd=Uc.divisor|0);dd=Yb.location;Ec=aa[dd];if(1===ee){Ec.buffer||D.enableVertexAttribArray(dd);nd=Yc||4;if(Ec.type!==je||Ec.size!==nd||Ec.buffer!==
Xc||Ec.normalized!==gd||Ec.offset!==jd||Ec.stride!==ie)D.bindBuffer(34962,Xc.buffer),D.vertexAttribPointer(dd,nd,je,gd,ie,jd),Ec.type=je,Ec.size=nd,Ec.buffer=Xc,Ec.normalized=gd,Ec.offset=jd,Ec.stride=ie;Ec.divisor!==wd&&(O.vertexAttribDivisorANGLE(dd,wd),Ec.divisor=wd)}else if(Ec.buffer&&(D.disableVertexAttribArray(dd),Ec.buffer=null),Ec.x!==me||Ec.y!==Id||Ec.z!==Gd||Ec.w!==ue)D.vertexAttrib4f(dd,me,Id,Gd,ue),Ec.x=me,Ec.y=Id,Ec.z=Gd,Ec.w=ue;hd=l.call(this,ka,a,0);bd=!1;pd=null;Bd=0;Ed=!1;ne=ve=0;
ye=1;ce=0;be=5126;fe=Zd=pe=ae=0;ia(hd)?(bd=!0,pd=M.createStream(34962,hd),be=pd.dtype):(pd=M.getBuffer(hd))?be=pd.dtype:"constant"in hd?(ye=2,"number"===typeof hd.constant?(pe=hd.constant,Zd=fe=ae=0):(pe=0<hd.constant.length?hd.constant[0]:0,Zd=1<hd.constant.length?hd.constant[1]:0,fe=2<hd.constant.length?hd.constant[2]:0,ae=3<hd.constant.length?hd.constant[3]:0)):(pd=ia(hd.buffer)?M.createStream(34962,hd.buffer):M.getBuffer(hd.buffer),be="type"in hd?Od[hd.type]:pd.dtype,Ed=!!hd.normalized,ne=hd.size|
0,ve=hd.offset|0,ce=hd.stride|0,Bd=hd.divisor|0);zc=ja.location;Wc=aa[zc];if(1===ye){Wc.buffer||D.enableVertexAttribArray(zc);qe=ne||1;if(Wc.type!==be||Wc.size!==qe||Wc.buffer!==pd||Wc.normalized!==Ed||Wc.offset!==ve||Wc.stride!==ce)D.bindBuffer(34962,pd.buffer),D.vertexAttribPointer(zc,qe,be,Ed,ce,ve),Wc.type=be,Wc.size=qe,Wc.buffer=pd,Wc.normalized=Ed,Wc.offset=ve,Wc.stride=ce;Wc.divisor!==Bd&&(O.vertexAttribDivisorANGLE(zc,Bd),Wc.divisor=Bd)}else if(Wc.buffer&&(D.disableVertexAttribArray(zc),Wc.buffer=
null),Wc.x!==pe||Wc.y!==Zd||Wc.z!==fe||Wc.w!==ae)D.vertexAttrib4f(zc,pe,Zd,fe,ae),Wc.x=pe,Wc.y=Zd,Wc.z=fe,Wc.w=ae;D.uniform1i(y.location,!1);D.uniform1f(Ga.location,ka.pixelRatio);ke=a.scale;D.uniform2f(X.location,ke[0],ke[1]);Hd=a.scaleFract;D.uniform2f(kb.location,Hd[0],Hd[1]);Nd=a.translate;D.uniform2f(sa.location,Nd[0],Nd[1]);Pd=a.translateFract;D.uniform2f(Wb.location,Pd[0],Pd[1]);Qd=w.call(this,ka,a,0);D.uniform2f(La.location,Qd[0],Qd[1]);D.uniform1f(Aa.location,a.opacity);D.uniform1i(cc.location,
p.bind());(ge=a.markerTexture)&&"framebuffer"===ge._reglType&&(ge=ge.color[0]);vf=ge._texture;D.uniform1i(ca.location,vf.bind());ze=a.elements;oe=null;(oe=(Pe=ia(ze))?ab.createStream(ze):ab.getElements(ze))&&D.bindBuffer(34963,oe.buffer.buffer);Qe=a.offset;if(Le=a.count)re=vb.instances,0<re?oe?O.drawElementsInstancedANGLE(0,Le,oe.type,Qe<<(oe.type-5121>>1),re):O.drawArraysInstancedANGLE(0,Qe,Le,re):0>re&&(oe?D.drawElements(0,Le,oe.type,Qe<<(oe.type-5121>>1)):D.drawArrays(0,Qe,Le)),Da.dirty=!0,qa.setVAO(null),
ka.viewportWidth=u,ka.viewportHeight=E,Q&&(c.cpuTime+=performance.now()-S),K&&M.destroyStream(R),Wa&&M.destroyStream(ra),ib&&M.destroyStream(Pa),gb&&M.destroyStream(Ia),Ca&&M.destroyStream(rb),Db&&M.destroyStream(tb),Mb&&M.destroyStream(Qb),ic&&M.destroyStream(Xc),bd&&M.destroyStream(pd),p.unbind(),vf.unbind(),Pe&&ab.destroyStream(oe)},scope:function(a,b,e){var d,h,f,g,l,n,q,B,t,w,p,y,A,P,D,F,N,O,K,aa,ea,R,T,V,X,Y,ga,ca,fa,ja,na,qa,Ha,ra,pa,sa,la,Ga,Aa,db,La,Ab,Oa,$a,r,Hb,Na,pb,wb,ib,Pa,Fc,kb,ub,
fb,lc,sd,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Yb,Jb,Za,Ub,wa,Wb,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Vb,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,bc,tc,cc,Oc,oc,xc,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,ad,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,rd,gd,jd,Yc,te,Kd,Ad,xe,ud,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,de,se,we,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,We,ze,oe,Pe,Qe,Le,re,Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,jf,kf,lf,rf,of,sf,Cf,Df,Ne,Be,pf,qf,Ef,
Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,ff,bf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,cf,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;d=a.viewport;h=d.x|0;f=d.y|0;g="width"in d?d.width|0:ka.framebufferWidth-h;l="height"in d?d.height|0:ka.framebufferHeight-f;n=ka.viewportWidth;ka.viewportWidth=g;q=ka.viewportHeight;ka.viewportHeight=l;B=Fd[0];Fd[0]=h;t=Fd[1];Fd[1]=f;w=Fd[2];Fd[2]=g;p=Fd[3];Fd[3]=l;y=G[0];
G[0]=0;A=G[1];G[1]=0;P=G[2];G[2]=0;D=G[3];G[3]=1;F=ua.blend_enable;ua.blend_enable=!0;N=Ba[0];Ba[0]=770;O=Ba[1];Ba[1]=771;K=Ba[2];Ba[2]=773;aa=Ba[3];Ba[3]=1;ea=ua.depth_enable;ua.depth_enable=!1;R=a.viewport;T=R.x|0;V=R.y|0;X="width"in R?R.width|0:ka.framebufferWidth-T;Y="height"in R?R.height|0:ka.framebufferHeight-V;ga=ee[0];ee[0]=T;ca=ee[1];ee[1]=V;fa=ee[2];ee[2]=X;ja=ee[3];ee[3]=Y;na=ua.scissor_enable;ua.scissor_enable=!0;qa=ua.stencil_enable;ua.stencil_enable=!1;if(Ha=Da.profile)ra=performance.now(),
c.count++;pa=a.elements;sa=null;sa=(la=ia(pa))?ab.createStream(pa):ab.getElements(pa);Ga=vb.elements;vb.elements=sa;Aa=a.offset;db=vb.offset;vb.offset=Aa;La=a.count;Ab=vb.count;vb.count=La;Oa=vb.primitive;vb.primitive=0;$a=ha[45];ha[45]=!1;r=a.markerTexture;Hb=ha[48];ha[48]=r;Na=a.opacity;pb=ha[10];ha[10]=Na;wb=z.call(this,ka,a,e);ib=ha[46];ha[46]=wb;Pa=ha[47];ha[47]=u;Fc=ka.pixelRatio;kb=ha[34];ha[34]=Fc;ub=a.scale;fb=ha[6];ha[6]=ub;lc=a.scaleFract;sd=ha[7];ha[7]=lc;fc=a.translate;lb=ha[8];ha[8]=
fc;mb=a.translateFract;ta=ha[9];ha[9]=mb;qb=C.call(this,ka,a,e);va=!1;Ua=null;cb=0;ya=!1;Ia=gb=0;Cb=1;Bb=0;Ra=5126;Ub=Za=Jb=Yb=0;ia(qb)?(va=!0,Ua=M.createStream(34962,qb),Ra=Ua.dtype):(Ua=M.getBuffer(qb))?Ra=Ua.dtype:"constant"in qb?(Cb=2,"number"===typeof qb.constant?(Jb=qb.constant,Za=Ub=Yb=0):(Jb=0<qb.constant.length?qb.constant[0]:0,Za=1<qb.constant.length?qb.constant[1]:0,Ub=2<qb.constant.length?qb.constant[2]:0,Yb=3<qb.constant.length?qb.constant[3]:0)):(Ua=ia(qb.buffer)?M.createStream(34962,
qb.buffer):M.getBuffer(qb.buffer),Ra="type"in qb?Od[qb.type]:Ua.dtype,ya=!!qb.normalized,Ia=qb.size|0,gb=qb.offset|0,Bb=qb.stride|0,cb=qb.divisor|0);wa=S.buffer;S.buffer=Ua;Wb=S.divisor;S.divisor=cb;Ja=S.normalized;S.normalized=ya;Ob=S.offset;S.offset=gb;hb=S.size;S.size=Ia;jb=S.state;S.state=Cb;xa=S.stride;S.stride=Bb;gc=S.type;S.type=Ra;Ca=S.w;S.w=Yb;rb=S.x;S.x=Jb;sb=S.y;S.y=Za;Xa=S.z;S.z=Ub;Ya=I.call(this,ka,a,e);nc=!1;Ic=null;vc=0;Va=!1;Vb=Lb=0;Ea=1;yc=0;Qa=5126;Db=xb=nb=za=0;ia(Ya)?(nc=!0,Ic=
M.createStream(34962,Ya),Qa=Ic.dtype):(Ic=M.getBuffer(Ya))?Qa=Ic.dtype:"constant"in Ya?(Ea=2,"number"===typeof Ya.constant?(nb=Ya.constant,xb=Db=za=0):(nb=0<Ya.constant.length?Ya.constant[0]:0,xb=1<Ya.constant.length?Ya.constant[1]:0,Db=2<Ya.constant.length?Ya.constant[2]:0,za=3<Ya.constant.length?Ya.constant[3]:0)):(Ic=ia(Ya.buffer)?M.createStream(34962,Ya.buffer):M.getBuffer(Ya.buffer),Qa="type"in Ya?Od[Ya.type]:Ic.dtype,Va=!!Ya.normalized,Vb=Ya.size|0,Lb=Ya.offset|0,yc=Ya.stride|0,vc=Ya.divisor|
0);tb=J.buffer;J.buffer=Ic;wc=J.divisor;J.divisor=vc;yb=J.normalized;J.normalized=Va;bc=J.offset;J.offset=Lb;tc=J.size;J.size=Vb;cc=J.state;J.state=Ea;Oc=J.stride;J.stride=yc;oc=J.type;J.type=Qa;xc=J.w;J.w=za;Xb=J.x;J.x=nb;ec=J.y;J.y=xb;Pb=J.z;J.z=Db;Fa=Ka.call(this,ka,a,e);ac=!1;ob=null;zb=0;Mb=!1;hc=Qb=0;jc=1;ad=0;Bc=5126;$c=Pc=Dc=Cc=0;ia(Fa)?(ac=!0,ob=M.createStream(34962,Fa),Bc=ob.dtype):(ob=M.getBuffer(Fa))?Bc=ob.dtype:"constant"in Fa?(jc=2,"number"===typeof Fa.constant?(Dc=Fa.constant,Pc=$c=
Cc=0):(Dc=0<Fa.constant.length?Fa.constant[0]:0,Pc=1<Fa.constant.length?Fa.constant[1]:0,$c=2<Fa.constant.length?Fa.constant[2]:0,Cc=3<Fa.constant.length?Fa.constant[3]:0)):(ob=ia(Fa.buffer)?M.createStream(34962,Fa.buffer):M.getBuffer(Fa.buffer),Bc="type"in Fa?Od[Fa.type]:ob.dtype,Mb=!!Fa.normalized,hc=Fa.size|0,Qb=Fa.offset|0,ad=Fa.stride|0,zb=Fa.divisor|0);Tc=v.buffer;v.buffer=ob;Qc=v.divisor;v.divisor=zb;Kb=v.normalized;v.normalized=Mb;Gb=v.offset;v.offset=Qb;Rc=v.size;v.size=hc;Jc=v.state;v.state=
jc;Uc=v.stride;v.stride=ad;ic=v.type;v.type=Bc;Xc=v.w;v.w=Cc;rd=v.x;v.x=Dc;gd=v.y;v.y=Pc;jd=v.z;v.z=$c;Yc=x.call(this,ka,a,e);te=!1;Kd=null;Ad=0;xe=!1;Id=ud=0;Gd=1;dd=0;Ec=5126;pd=bd=hd=nd=0;ia(Yc)?(te=!0,Kd=M.createStream(34962,Yc),Ec=Kd.dtype):(Kd=M.getBuffer(Yc))?Ec=Kd.dtype:"constant"in Yc?(Gd=2,"number"===typeof Yc.constant?(hd=Yc.constant,bd=pd=nd=0):(hd=0<Yc.constant.length?Yc.constant[0]:0,bd=1<Yc.constant.length?Yc.constant[1]:0,pd=2<Yc.constant.length?Yc.constant[2]:0,nd=3<Yc.constant.length?
Yc.constant[3]:0)):(Kd=ia(Yc.buffer)?M.createStream(34962,Yc.buffer):M.getBuffer(Yc.buffer),Ec="type"in Yc?Od[Yc.type]:Kd.dtype,xe=!!Yc.normalized,Id=Yc.size|0,ud=Yc.offset|0,dd=Yc.stride|0,Ad=Yc.divisor|0);Bd=k.buffer;k.buffer=Kd;Ed=k.divisor;k.divisor=Ad;de=k.normalized;k.normalized=xe;se=k.offset;k.offset=ud;we=k.size;k.size=Id;ce=k.state;k.state=Gd;be=k.stride;k.stride=dd;ae=k.type;k.type=Ec;pe=k.w;k.w=nd;Zd=k.x;k.x=hd;fe=k.y;k.y=bd;zc=k.z;k.z=pd;Wc=da.call(this,ka,a,e);qe=!1;ke=null;Hd=0;Nd=
!1;Qd=Pd=0;ge=1;We=0;ze=5126;Le=Qe=Pe=oe=0;ia(Wc)?(qe=!0,ke=M.createStream(34962,Wc),ze=ke.dtype):(ke=M.getBuffer(Wc))?ze=ke.dtype:"constant"in Wc?(ge=2,"number"===typeof Wc.constant?(Pe=Wc.constant,Qe=Le=oe=0):(Pe=0<Wc.constant.length?Wc.constant[0]:0,Qe=1<Wc.constant.length?Wc.constant[1]:0,Le=2<Wc.constant.length?Wc.constant[2]:0,oe=3<Wc.constant.length?Wc.constant[3]:0)):(ke=ia(Wc.buffer)?M.createStream(34962,Wc.buffer):M.getBuffer(Wc.buffer),ze="type"in Wc?Od[Wc.type]:ke.dtype,Nd=!!Wc.normalized,
Qd=Wc.size|0,Pd=Wc.offset|0,We=Wc.stride|0,Hd=Wc.divisor|0);re=Q.buffer;Q.buffer=ke;Ce=Q.divisor;Q.divisor=Hd;Fe=Q.normalized;Q.normalized=Nd;Ge=Q.offset;Q.offset=Pd;He=Q.size;Q.size=Qd;De=Q.state;Q.state=ge;Jd=Q.stride;Q.stride=We;Ud=Q.type;Q.type=ze;Yd=Q.w;Q.w=oe;$d=Q.x;Q.x=Pe;Ie=Q.y;Q.y=Qe;zd=Q.z;Q.z=Le;Rd=ba.call(this,ka,a,e);Ae=!1;Je=null;af=0;Ze=!1;Me=Re=0;Ye=1;Ve=0;Se=5126;Ue=Xd=Sd=Te=0;ia(Rd)?(Ae=!0,Je=M.createStream(34962,Rd),Se=Je.dtype):(Je=M.getBuffer(Rd))?Se=Je.dtype:"constant"in Rd?
(Ye=2,"number"===typeof Rd.constant?(Sd=Rd.constant,Xd=Ue=Te=0):(Sd=0<Rd.constant.length?Rd.constant[0]:0,Xd=1<Rd.constant.length?Rd.constant[1]:0,Ue=2<Rd.constant.length?Rd.constant[2]:0,Te=3<Rd.constant.length?Rd.constant[3]:0)):(Je=ia(Rd.buffer)?M.createStream(34962,Rd.buffer):M.getBuffer(Rd.buffer),Se="type"in Rd?Od[Rd.type]:Je.dtype,Ze=!!Rd.normalized,Me=Rd.size|0,Re=Rd.offset|0,Ve=Rd.stride|0,af=Rd.divisor|0);hf=E.buffer;E.buffer=Je;mf=E.divisor;E.divisor=af;ef=E.normalized;E.normalized=Ze;
jf=E.offset;E.offset=Re;kf=E.size;E.size=Me;lf=E.state;E.state=Ye;rf=E.stride;E.stride=Ve;of=E.type;E.type=Se;sf=E.w;E.w=Te;Cf=E.x;E.x=Sd;Df=E.y;E.y=Xd;Ne=E.z;E.z=Ue;Be=ma.call(this,ka,a,e);pf=!1;qf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ia(Be)?(pf=!0,qf=M.createStream(34962,Be),yf=qf.dtype):(qf=M.getBuffer(Be))?yf=qf.dtype:"constant"in Be?(Gf=2,"number"===typeof Be.constant?(zf=Be.constant,Af=Jf=wf=0):(zf=0<Be.constant.length?Be.constant[0]:0,Af=1<Be.constant.length?Be.constant[1]:
0,Jf=2<Be.constant.length?Be.constant[2]:0,wf=3<Be.constant.length?Be.constant[3]:0)):(qf=ia(Be.buffer)?M.createStream(34962,Be.buffer):M.getBuffer(Be.buffer),yf="type"in Be?Od[Be.type]:qf.dtype,Hf=!!Be.normalized,Ff=Be.size|0,Bf=Be.offset|0,xf=Be.stride|0,Ef=Be.divisor|0);Kf=H.buffer;H.buffer=qf;Lf=H.divisor;H.divisor=Ef;Mf=H.normalized;H.normalized=Hf;tf=H.offset;H.offset=Bf;Rf=H.size;H.size=Ff;If=H.state;H.state=Gf;uf=H.stride;H.stride=xf;dg=H.type;H.type=yf;Sf=H.w;H.w=wf;Tf=H.x;H.x=zf;qg=H.y;
H.y=Af;ff=H.z;H.z=Jf;bf=Z.call(this,ka,a,e);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ia(bf)?(Nf=!0,Of=M.createStream(34962,bf),Uf=Of.dtype):(Of=M.getBuffer(bf))?Uf=Of.dtype:"constant"in bf?(ig=2,"number"===typeof bf.constant?(Yf=bf.constant,Zf=jg=Xf=0):(Yf=0<bf.constant.length?bf.constant[0]:0,Zf=1<bf.constant.length?bf.constant[1]:0,jg=2<bf.constant.length?bf.constant[2]:0,Xf=3<bf.constant.length?bf.constant[3]:0)):(Of=ia(bf.buffer)?M.createStream(34962,bf.buffer):M.getBuffer(bf.buffer),
Uf="type"in bf?Od[bf.type]:Of.dtype,fg=!!bf.normalized,hg=bf.size|0,gg=bf.offset|0,Wf=bf.stride|0,eg=bf.divisor|0);rg=m.buffer;m.buffer=Of;sg=m.divisor;m.divisor=eg;tg=m.normalized;m.normalized=fg;ug=m.offset;m.offset=gg;vg=m.size;m.size=hg;wg=m.state;m.state=ig;xg=m.stride;m.stride=Wf;yg=m.type;m.type=Uf;zg=m.w;m.w=Xf;Ag=m.x;m.x=Yf;Bg=m.y;m.y=Zf;gf=m.z;m.z=jg;cf=L.call(this,ka,a,e);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ia(cf)?(Pf=!0,Qf=M.createStream(34962,cf),Vf=Qf.dtype):
(Qf=M.getBuffer(cf))?Vf=Qf.dtype:"constant"in cf?(og=2,"number"===typeof cf.constant?(bg=cf.constant,cg=pg=ag=0):(bg=0<cf.constant.length?cf.constant[0]:0,cg=1<cf.constant.length?cf.constant[1]:0,pg=2<cf.constant.length?cf.constant[2]:0,ag=3<cf.constant.length?cf.constant[3]:0)):(Qf=ia(cf.buffer)?M.createStream(34962,cf.buffer):M.getBuffer(cf.buffer),Vf="type"in cf?Od[cf.type]:Qf.dtype,lg=!!cf.normalized,ng=cf.size|0,mg=cf.offset|0,$f=cf.stride|0,kg=cf.divisor|0);Cg=U.buffer;U.buffer=Qf;Dg=U.divisor;
U.divisor=kg;Eg=U.normalized;U.normalized=lg;Fg=U.offset;U.offset=mg;Gg=U.size;U.size=ng;Hg=U.state;U.state=og;Ig=U.stride;U.stride=$f;Jg=U.type;U.type=Vf;Kg=U.w;U.w=ag;Lg=U.x;U.x=bg;Mg=U.y;U.y=cg;Ng=U.z;U.z=pg;Og=W.vert;W.vert=44;Pg=W.frag;W.frag=43;Da.dirty=!0;b(ka,a,e);ka.viewportWidth=n;ka.viewportHeight=q;Fd[0]=B;Fd[1]=t;Fd[2]=w;Fd[3]=p;G[0]=y;G[1]=A;G[2]=P;G[3]=D;ua.blend_enable=F;Ba[0]=N;Ba[1]=O;Ba[2]=K;Ba[3]=aa;ua.depth_enable=ea;ee[0]=ga;ee[1]=ca;ee[2]=fa;ee[3]=ja;ua.scissor_enable=na;ua.stencil_enable=
qa;Ha&&(c.cpuTime+=performance.now()-ra);la&&ab.destroyStream(sa);vb.elements=Ga;vb.offset=db;vb.count=Ab;vb.primitive=Oa;ha[45]=$a;ha[48]=Hb;ha[10]=pb;ha[46]=ib;ha[47]=Pa;ha[34]=kb;ha[6]=fb;ha[7]=sd;ha[8]=lb;ha[9]=ta;va&&M.destroyStream(Ua);S.buffer=wa;S.divisor=Wb;S.normalized=Ja;S.offset=Ob;S.size=hb;S.state=jb;S.stride=xa;S.type=gc;S.w=Ca;S.x=rb;S.y=sb;S.z=Xa;nc&&M.destroyStream(Ic);J.buffer=tb;J.divisor=wc;J.normalized=yb;J.offset=bc;J.size=tc;J.state=cc;J.stride=Oc;J.type=oc;J.w=xc;J.x=Xb;J.y=
ec;J.z=Pb;ac&&M.destroyStream(ob);v.buffer=Tc;v.divisor=Qc;v.normalized=Kb;v.offset=Gb;v.size=Rc;v.state=Jc;v.stride=Uc;v.type=ic;v.w=Xc;v.x=rd;v.y=gd;v.z=jd;te&&M.destroyStream(Kd);k.buffer=Bd;k.divisor=Ed;k.normalized=de;k.offset=se;k.size=we;k.state=ce;k.stride=be;k.type=ae;k.w=pe;k.x=Zd;k.y=fe;k.z=zc;qe&&M.destroyStream(ke);Q.buffer=re;Q.divisor=Ce;Q.normalized=Fe;Q.offset=Ge;Q.size=He;Q.state=De;Q.stride=Jd;Q.type=Ud;Q.w=Yd;Q.x=$d;Q.y=Ie;Q.z=zd;Ae&&M.destroyStream(Je);E.buffer=hf;E.divisor=mf;
E.normalized=ef;E.offset=jf;E.size=kf;E.state=lf;E.stride=rf;E.type=of;E.w=sf;E.x=Cf;E.y=Df;E.z=Ne;pf&&M.destroyStream(qf);H.buffer=Kf;H.divisor=Lf;H.normalized=Mf;H.offset=tf;H.size=Rf;H.state=If;H.stride=uf;H.type=dg;H.w=Sf;H.x=Tf;H.y=qg;H.z=ff;Nf&&M.destroyStream(Of);m.buffer=rg;m.divisor=sg;m.normalized=tg;m.offset=ug;m.size=vg;m.state=wg;m.stride=xg;m.type=yg;m.w=zg;m.x=Ag;m.y=Bg;m.z=gf;Pf&&M.destroyStream(Qf);U.buffer=Cg;U.divisor=Dg;U.normalized=Eg;U.offset=Fg;U.size=Gg;U.state=Hg;U.stride=
Ig;U.type=Jg;U.w=Kg;U.x=Lg;U.y=Mg;U.z=Ng;W.vert=Og;W.frag=Pg;Da.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,f,g,d,b,n,e,h,q,B,l,w,p,z,u,C,S,I,J,Ka,v,x,k,da,Q,ba,E,ma,H,Z,m,L,U,la,Vb,ub,bc,na,Oa,Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa,Wb,oc,xc,sd){var Fc,aa,M,ka,Da,vb,ab,ad,F,D,ia,ua,W,ha,qa,G,A,ea,V,Ba,Ha,t,lc,db,ga,Hb,Ab,We,Ad,ee,te,
xe,se,rd,de,we,ud,Fd,Kd;Fc=a.attributes;aa=a.buffer;M=a.context;ka=a.current;Da=a.draw;vb=a.elements;ab=a.extensions;ad=a.framebuffer;F=a.gl;D=a.isBufferArgs;ia=a.next;ua=a.shader;W=a.uniforms;ha=a.vao;qa=ia.blend_color;G=ka.blend_color;A=ia.blend_equation;ea=ka.blend_equation;V=ia.blend_func;Ba=ka.blend_func;Ha=ia.colorMask;t=ka.colorMask;lc=ia.depth_range;db=ka.depth_range;ga=ia.polygonOffset_offset;Hb=ka.polygonOffset_offset;Ab=ia.sample_coverage;We=ka.sample_coverage;Ad=ia.scissor_box;ee=ka.scissor_box;
te=ia.stencil_func;xe=ka.stencil_func;se=ia.stencil_opBack;rd=ka.stencil_opBack;de=ia.stencil_opFront;we=ka.stencil_opFront;ud=ia.viewport;Fd=ka.viewport;Kd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var e,d,h,f,g,l;e=ad.next;e!==ad.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),ad.cur=e);if(ka.dirty){var k,n,m,q,B,w,v,p,x,z,P,C,u,E,H,J,oa,L,Q,S,V,I,W,U,ba,Z,da,ua,qa,ra,ma,Ka,Ta,Nb;k=ia.dither;
k!==ka.dither&&(k?F.enable(3024):F.disable(3024),ka.dither=k);n=A[0];m=A[1];if(n!==ea[0]||m!==ea[1])F.blendEquationSeparate(n,m),ea[0]=n,ea[1]=m;q=ia.depth_func;q!==ka.depth_func&&(F.depthFunc(q),ka.depth_func=q);B=lc[0];w=lc[1];if(B!==db[0]||w!==db[1])F.depthRange(B,w),db[0]=B,db[1]=w;v=ia.depth_mask;v!==ka.depth_mask&&(F.depthMask(v),ka.depth_mask=v);p=Ha[0];x=Ha[1];z=Ha[2];P=Ha[3];if(p!==t[0]||x!==t[1]||z!==t[2]||P!==t[3])F.colorMask(p,x,z,P),t[0]=p,t[1]=x,t[2]=z,t[3]=P;C=ia.cull_enable;C!==ka.cull_enable&&
(C?F.enable(2884):F.disable(2884),ka.cull_enable=C);u=ia.cull_face;u!==ka.cull_face&&(F.cullFace(u),ka.cull_face=u);E=ia.frontFace;E!==ka.frontFace&&(F.frontFace(E),ka.frontFace=E);H=ia.lineWidth;H!==ka.lineWidth&&(F.lineWidth(H),ka.lineWidth=H);J=ia.polygonOffset_enable;J!==ka.polygonOffset_enable&&(J?F.enable(32823):F.disable(32823),ka.polygonOffset_enable=J);oa=ga[0];L=ga[1];if(oa!==Hb[0]||L!==Hb[1])F.polygonOffset(oa,L),Hb[0]=oa,Hb[1]=L;Q=ia.sample_alpha;Q!==ka.sample_alpha&&(Q?F.enable(32926):
F.disable(32926),ka.sample_alpha=Q);S=ia.sample_enable;S!==ka.sample_enable&&(S?F.enable(32928):F.disable(32928),ka.sample_enable=S);V=Ab[0];I=Ab[1];if(V!==We[0]||I!==We[1])F.sampleCoverage(V,I),We[0]=V,We[1]=I;W=ia.stencil_mask;W!==ka.stencil_mask&&(F.stencilMask(W),ka.stencil_mask=W);U=te[0];ba=te[1];Z=te[2];if(U!==xe[0]||ba!==xe[1]||Z!==xe[2])F.stencilFunc(U,ba,Z),xe[0]=U,xe[1]=ba,xe[2]=Z;da=de[0];ua=de[1];qa=de[2];ra=de[3];if(da!==we[0]||ua!==we[1]||qa!==we[2]||ra!==we[3])F.stencilOpSeparate(da,
ua,qa,ra),we[0]=da,we[1]=ua,we[2]=qa,we[3]=ra;ma=se[0];Ka=se[1];Ta=se[2];Nb=se[3];if(ma!==rd[0]||Ka!==rd[1]||Ta!==rd[2]||Nb!==rd[3])F.stencilOpSeparate(ma,Ka,Ta,Nb),rd[0]=ma,rd[1]=Ka,rd[2]=Ta,rd[3]=Nb}F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);ka.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;F.disable(2929);ka.depth_enable=!1;F.enable(3089);ka.scissor_enable=!0;F.disable(2960);ka.stencil_enable=!1;if(d=ka.profile)h=performance.now(),
c.count+=b;F.useProgram(la.program);f=ab.angle_instanced_arrays;var eb;ha.setVAO(null);F.uniform1i(y.location,!1);F.uniform1i(La.location,pa.bind());eb=Da.instances;for(g=0;g<b;++g){l=a[g];var uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,Ad,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,ud,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,df,ie,
je,ue,me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,vf,ze,oe,Pe,Qe,Le,re,Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,jf,kf,lf,rf,of,sf,Cf,Df,Ne,Be,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf;uc=l.viewport;Rb=uc.x|0;Td=uc.y|0;kc="width"in uc?uc.width|0:M.framebufferWidth-Rb;Sb="height"in uc?uc.height|0:M.framebufferHeight-Td;r=M.viewportWidth;M.viewportWidth=kc;Tb=M.viewportHeight;M.viewportHeight=Sb;F.viewport(Rb,
Td,kc,Sb);Fd[0]=Rb;Fd[1]=Td;Fd[2]=kc;Fd[3]=Sb;Na=l.viewport;pb=Na.x|0;wb=Na.y|0;ib="width"in Na?Na.width|0:M.framebufferWidth-pb;Pa="height"in Na?Na.height|0:M.framebufferHeight-wb;F.scissor(pb,wb,ib,Pa);ee[0]=pb;ee[1]=wb;ee[2]=ib;ee[3]=Pa;md=Vb.call(this,M,l,g);$b=!1;Dd=null;fb=0;mc=!1;fc=Hc=0;lb=1;mb=0;ta=5126;cb=Ua=va=qb=0;D(md)?($b=!0,Dd=aa.createStream(34962,md),ta=Dd.dtype):(Dd=aa.getBuffer(md))?ta=Dd.dtype:"constant"in md?(lb=2,"number"===typeof md.constant?(va=md.constant,Ua=cb=qb=0):(va=
0<md.constant.length?md.constant[0]:0,Ua=1<md.constant.length?md.constant[1]:0,cb=2<md.constant.length?md.constant[2]:0,qb=3<md.constant.length?md.constant[3]:0)):(Dd=D(md.buffer)?aa.createStream(34962,md.buffer):aa.getBuffer(md.buffer),ta="type"in md?Kd[md.type]:Dd.dtype,mc=!!md.normalized,fc=md.size|0,Hc=md.offset|0,mb=md.stride|0,fb=md.divisor|0);ya=Wb.location;gb=Fc[ya];if(1===lb){gb.buffer||F.enableVertexAttribArray(ya);Ia=fc||1;if(gb.type!==ta||gb.size!==Ia||gb.buffer!==Dd||gb.normalized!==
mc||gb.offset!==Hc||gb.stride!==mb)F.bindBuffer(34962,Dd.buffer),F.vertexAttribPointer(ya,Ia,ta,mc,mb,Hc),gb.type=ta,gb.size=Ia,gb.buffer=Dd,gb.normalized=mc,gb.offset=Hc,gb.stride=mb;gb.divisor!==fb&&(f.vertexAttribDivisorANGLE(ya,fb),gb.divisor=fb)}else if(gb.buffer&&(F.disableVertexAttribArray(ya),gb.buffer=null),gb.x!==va||gb.y!==Ua||gb.z!==cb||gb.w!==qb)F.vertexAttrib4f(ya,va,Ua,cb,qb),gb.x=va,gb.y=Ua,gb.z=cb,gb.w=qb;Cb=ub.call(this,M,l,g);Bb=!1;Ra=null;Mc=0;Jb=!1;Ub=Za=0;wa=1;Ad=0;Ja=5126;xa=
jb=hb=Ob=0;D(Cb)?(Bb=!0,Ra=aa.createStream(34962,Cb),Ja=Ra.dtype):(Ra=aa.getBuffer(Cb))?Ja=Ra.dtype:"constant"in Cb?(wa=2,"number"===typeof Cb.constant?(hb=Cb.constant,jb=xa=Ob=0):(hb=0<Cb.constant.length?Cb.constant[0]:0,jb=1<Cb.constant.length?Cb.constant[1]:0,xa=2<Cb.constant.length?Cb.constant[2]:0,Ob=3<Cb.constant.length?Cb.constant[3]:0)):(Ra=D(Cb.buffer)?aa.createStream(34962,Cb.buffer):aa.getBuffer(Cb.buffer),Ja="type"in Cb?Kd[Cb.type]:Ra.dtype,Jb=!!Cb.normalized,Ub=Cb.size|0,Za=Cb.offset|
0,Ad=Cb.stride|0,Mc=Cb.divisor|0);gc=xc.location;Ca=Fc[gc];if(1===wa){Ca.buffer||F.enableVertexAttribArray(gc);rb=Ub||1;if(Ca.type!==Ja||Ca.size!==rb||Ca.buffer!==Ra||Ca.normalized!==Jb||Ca.offset!==Za||Ca.stride!==Ad)F.bindBuffer(34962,Ra.buffer),F.vertexAttribPointer(gc,rb,Ja,Jb,Ad,Za),Ca.type=Ja,Ca.size=rb,Ca.buffer=Ra,Ca.normalized=Jb,Ca.offset=Za,Ca.stride=Ad;Ca.divisor!==Mc&&(f.vertexAttribDivisorANGLE(gc,Mc),Ca.divisor=Mc)}else if(Ca.buffer&&(F.disableVertexAttribArray(gc),Ca.buffer=null),
Ca.x!==hb||Ca.y!==jb||Ca.z!==xa||Ca.w!==Ob)F.vertexAttrib4f(gc,hb,jb,xa,Ob),Ca.x=hb,Ca.y=jb,Ca.z=xa,Ca.w=Ob;sb=bc.call(this,M,l,g);Xa=!1;Ya=null;nc=0;Ic=!1;Va=vc=0;Lb=1;Zc=0;Ea=5126;nb=za=Qa=yc=0;D(sb)?(Xa=!0,Ya=aa.createStream(34962,sb),Ea=Ya.dtype):(Ya=aa.getBuffer(sb))?Ea=Ya.dtype:"constant"in sb?(Lb=2,"number"===typeof sb.constant?(Qa=sb.constant,za=nb=yc=0):(Qa=0<sb.constant.length?sb.constant[0]:0,za=1<sb.constant.length?sb.constant[1]:0,nb=2<sb.constant.length?sb.constant[2]:0,yc=3<sb.constant.length?
sb.constant[3]:0)):(Ya=D(sb.buffer)?aa.createStream(34962,sb.buffer):aa.getBuffer(sb.buffer),Ea="type"in sb?Kd[sb.type]:Ya.dtype,Ic=!!sb.normalized,Va=sb.size|0,vc=sb.offset|0,Zc=sb.stride|0,nc=sb.divisor|0);xb=oc.location;Db=Fc[xb];if(1===Lb){Db.buffer||F.enableVertexAttribArray(xb);tb=Va||1;if(Db.type!==Ea||Db.size!==tb||Db.buffer!==Ya||Db.normalized!==Ic||Db.offset!==vc||Db.stride!==Zc)F.bindBuffer(34962,Ya.buffer),F.vertexAttribPointer(xb,tb,Ea,Ic,Zc,vc),Db.type=Ea,Db.size=tb,Db.buffer=Ya,Db.normalized=
Ic,Db.offset=vc,Db.stride=Zc;Db.divisor!==nc&&(f.vertexAttribDivisorANGLE(xb,nc),Db.divisor=nc)}else if(Db.buffer&&(F.disableVertexAttribArray(xb),Db.buffer=null),Db.x!==Qa||Db.y!==za||Db.z!==nb||Db.w!==yc)F.vertexAttrib4f(xb,Qa,za,nb,yc),Db.x=Qa,Db.y=za,Db.z=nb,Db.w=yc;wc=na.call(this,M,l,g);yb=!1;id=null;tc=0;Md=!1;ld=Oc=0;fd=1;Xb=0;ec=5126;ob=ac=Fa=Pb=0;D(wc)?(yb=!0,id=aa.createStream(34962,wc),ec=id.dtype):(id=aa.getBuffer(wc))?ec=id.dtype:"constant"in wc?(fd=2,"number"===typeof wc.constant?(Fa=
wc.constant,ac=ob=Pb=0):(Fa=0<wc.constant.length?wc.constant[0]:0,ac=1<wc.constant.length?wc.constant[1]:0,ob=2<wc.constant.length?wc.constant[2]:0,Pb=3<wc.constant.length?wc.constant[3]:0)):(id=D(wc.buffer)?aa.createStream(34962,wc.buffer):aa.getBuffer(wc.buffer),ec="type"in wc?Kd[wc.type]:id.dtype,Md=!!wc.normalized,ld=wc.size|0,Oc=wc.offset|0,Xb=wc.stride|0,tc=wc.divisor|0);zb=sd.location;Mb=Fc[zb];if(1===fd){Mb.buffer||F.enableVertexAttribArray(zb);Qb=ld||1;if(Mb.type!==ec||Mb.size!==Qb||Mb.buffer!==
id||Mb.normalized!==Md||Mb.offset!==Oc||Mb.stride!==Xb)F.bindBuffer(34962,id.buffer),F.vertexAttribPointer(zb,Qb,ec,Md,Xb,Oc),Mb.type=ec,Mb.size=Qb,Mb.buffer=id,Mb.normalized=Md,Mb.offset=Oc,Mb.stride=Xb;Mb.divisor!==tc&&(f.vertexAttribDivisorANGLE(zb,tc),Mb.divisor=tc)}else if(Mb.buffer&&(F.disableVertexAttribArray(zb),Mb.buffer=null),Mb.x!==Fa||Mb.y!==ac||Mb.z!==ob||Mb.w!==Pb)F.vertexAttrib4f(zb,Fa,ac,ob,Pb),Mb.x=Fa,Mb.y=ac,Mb.z=ob,Mb.w=Pb;hc=Oa.call(this,M,l,g);jc=!1;ud=null;Bc=0;Cc=!1;Pc=Dc=0;
$c=1;Tc=0;Qc=5126;Jc=Rc=Gb=Kb=0;D(hc)?(jc=!0,ud=aa.createStream(34962,hc),Qc=ud.dtype):(ud=aa.getBuffer(hc))?Qc=ud.dtype:"constant"in hc?($c=2,"number"===typeof hc.constant?(Gb=hc.constant,Rc=Jc=Kb=0):(Gb=0<hc.constant.length?hc.constant[0]:0,Rc=1<hc.constant.length?hc.constant[1]:0,Jc=2<hc.constant.length?hc.constant[2]:0,Kb=3<hc.constant.length?hc.constant[3]:0)):(ud=D(hc.buffer)?aa.createStream(34962,hc.buffer):aa.getBuffer(hc.buffer),Qc="type"in hc?Kd[hc.type]:ud.dtype,Cc=!!hc.normalized,Pc=hc.size|
0,Dc=hc.offset|0,Tc=hc.stride|0,Bc=hc.divisor|0);Uc=kb.location;ic=Fc[Uc];if(1===$c){ic.buffer||F.enableVertexAttribArray(Uc);Xc=Pc||1;if(ic.type!==Qc||ic.size!==Xc||ic.buffer!==ud||ic.normalized!==Cc||ic.offset!==Dc||ic.stride!==Tc)F.bindBuffer(34962,ud.buffer),F.vertexAttribPointer(Uc,Xc,Qc,Cc,Tc,Dc),ic.type=Qc,ic.size=Xc,ic.buffer=ud,ic.normalized=Cc,ic.offset=Dc,ic.stride=Tc;ic.divisor!==Bc&&(f.vertexAttribDivisorANGLE(Uc,Bc),ic.divisor=Bc)}else if(ic.buffer&&(F.disableVertexAttribArray(Uc),ic.buffer=
null),ic.x!==Gb||ic.y!==Rc||ic.z!==Jc||ic.w!==Kb)F.vertexAttrib4f(Uc,Gb,Rc,Jc,Kb),ic.x=Gb,ic.y=Rc,ic.z=Jc,ic.w=Kb;wd=Y.call(this,M,l,g);gd=!1;jd=null;Yc=0;df=!1;je=ie=0;ue=1;me=0;Id=5126;nd=Ec=dd=Gd=0;D(wd)?(gd=!0,jd=aa.createStream(34962,wd),Id=jd.dtype):(jd=aa.getBuffer(wd))?Id=jd.dtype:"constant"in wd?(ue=2,"number"===typeof wd.constant?(dd=wd.constant,Ec=nd=Gd=0):(dd=0<wd.constant.length?wd.constant[0]:0,Ec=1<wd.constant.length?wd.constant[1]:0,nd=2<wd.constant.length?wd.constant[2]:0,Gd=3<wd.constant.length?
wd.constant[3]:0)):(jd=D(wd.buffer)?aa.createStream(34962,wd.buffer):aa.getBuffer(wd.buffer),Id="type"in wd?Kd[wd.type]:jd.dtype,df=!!wd.normalized,je=wd.size|0,ie=wd.offset|0,me=wd.stride|0,Yc=wd.divisor|0);hd=$a.location;bd=Fc[hd];if(1===ue){bd.buffer||F.enableVertexAttribArray(hd);pd=je||1;if(bd.type!==Id||bd.size!==pd||bd.buffer!==jd||bd.normalized!==df||bd.offset!==ie||bd.stride!==me)F.bindBuffer(34962,jd.buffer),F.vertexAttribPointer(hd,pd,Id,df,me,ie),bd.type=Id,bd.size=pd,bd.buffer=jd,bd.normalized=
df,bd.offset=ie,bd.stride=me;bd.divisor!==Yc&&(f.vertexAttribDivisorANGLE(hd,Yc),bd.divisor=Yc)}else if(bd.buffer&&(F.disableVertexAttribArray(hd),bd.buffer=null),bd.x!==dd||bd.y!==Ec||bd.z!==nd||bd.w!==Gd)F.vertexAttrib4f(hd,dd,Ec,nd,Gd),bd.x=dd,bd.y=Ec,bd.z=nd,bd.w=Gd;Bd=K.call(this,M,l,g);Ed=!1;ve=null;ne=0;ye=!1;be=ce=0;ae=1;pe=0;Zd=5126;qe=Wc=zc=fe=0;D(Bd)?(Ed=!0,ve=aa.createStream(34962,Bd),Zd=ve.dtype):(ve=aa.getBuffer(Bd))?Zd=ve.dtype:"constant"in Bd?(ae=2,"number"===typeof Bd.constant?(zc=
Bd.constant,Wc=qe=fe=0):(zc=0<Bd.constant.length?Bd.constant[0]:0,Wc=1<Bd.constant.length?Bd.constant[1]:0,qe=2<Bd.constant.length?Bd.constant[2]:0,fe=3<Bd.constant.length?Bd.constant[3]:0)):(ve=D(Bd.buffer)?aa.createStream(34962,Bd.buffer):aa.getBuffer(Bd.buffer),Zd="type"in Bd?Kd[Bd.type]:ve.dtype,ye=!!Bd.normalized,be=Bd.size|0,ce=Bd.offset|0,pe=Bd.stride|0,ne=Bd.divisor|0);ke=T.location;Hd=Fc[ke];if(1===ae){Hd.buffer||F.enableVertexAttribArray(ke);Nd=be||4;if(Hd.type!==Zd||Hd.size!==Nd||Hd.buffer!==
ve||Hd.normalized!==ye||Hd.offset!==ce||Hd.stride!==pe)F.bindBuffer(34962,ve.buffer),F.vertexAttribPointer(ke,Nd,Zd,ye,pe,ce),Hd.type=Zd,Hd.size=Nd,Hd.buffer=ve,Hd.normalized=ye,Hd.offset=ce,Hd.stride=pe;Hd.divisor!==ne&&(f.vertexAttribDivisorANGLE(ke,ne),Hd.divisor=ne)}else if(Hd.buffer&&(F.disableVertexAttribArray(ke),Hd.buffer=null),Hd.x!==zc||Hd.y!==Wc||Hd.z!==qe||Hd.w!==fe)F.vertexAttrib4f(ke,zc,Wc,qe,fe),Hd.x=zc,Hd.y=Wc,Hd.z=qe,Hd.w=fe;Pd=N.call(this,M,l,g);Qd=!1;ge=null;vf=0;ze=!1;Pe=oe=0;
Qe=1;Le=0;re=5126;He=Ge=Fe=Ce=0;D(Pd)?(Qd=!0,ge=aa.createStream(34962,Pd),re=ge.dtype):(ge=aa.getBuffer(Pd))?re=ge.dtype:"constant"in Pd?(Qe=2,"number"===typeof Pd.constant?(Fe=Pd.constant,Ge=He=Ce=0):(Fe=0<Pd.constant.length?Pd.constant[0]:0,Ge=1<Pd.constant.length?Pd.constant[1]:0,He=2<Pd.constant.length?Pd.constant[2]:0,Ce=3<Pd.constant.length?Pd.constant[3]:0)):(ge=D(Pd.buffer)?aa.createStream(34962,Pd.buffer):aa.getBuffer(Pd.buffer),re="type"in Pd?Kd[Pd.type]:ge.dtype,ze=!!Pd.normalized,Pe=Pd.size|
0,oe=Pd.offset|0,Le=Pd.stride|0,vf=Pd.divisor|0);De=Yb.location;Jd=Fc[De];if(1===Qe){Jd.buffer||F.enableVertexAttribArray(De);Ud=Pe||4;if(Jd.type!==re||Jd.size!==Ud||Jd.buffer!==ge||Jd.normalized!==ze||Jd.offset!==oe||Jd.stride!==Le)F.bindBuffer(34962,ge.buffer),F.vertexAttribPointer(De,Ud,re,ze,Le,oe),Jd.type=re,Jd.size=Ud,Jd.buffer=ge,Jd.normalized=ze,Jd.offset=oe,Jd.stride=Le;Jd.divisor!==vf&&(f.vertexAttribDivisorANGLE(De,vf),Jd.divisor=vf)}else if(Jd.buffer&&(F.disableVertexAttribArray(De),Jd.buffer=
null),Jd.x!==Fe||Jd.y!==Ge||Jd.z!==He||Jd.w!==Ce)F.vertexAttrib4f(De,Fe,Ge,He,Ce),Jd.x=Fe,Jd.y=Ge,Jd.z=He,Jd.w=Ce;Yd=R.call(this,M,l,g);$d=!1;Ie=null;zd=0;Rd=!1;Je=Ae=0;af=1;Ze=0;Re=5126;Se=Ve=Ye=Me=0;D(Yd)?($d=!0,Ie=aa.createStream(34962,Yd),Re=Ie.dtype):(Ie=aa.getBuffer(Yd))?Re=Ie.dtype:"constant"in Yd?(af=2,"number"===typeof Yd.constant?(Ye=Yd.constant,Ve=Se=Me=0):(Ye=0<Yd.constant.length?Yd.constant[0]:0,Ve=1<Yd.constant.length?Yd.constant[1]:0,Se=2<Yd.constant.length?Yd.constant[2]:0,Me=3<Yd.constant.length?
Yd.constant[3]:0)):(Ie=D(Yd.buffer)?aa.createStream(34962,Yd.buffer):aa.getBuffer(Yd.buffer),Re="type"in Yd?Kd[Yd.type]:Ie.dtype,Rd=!!Yd.normalized,Je=Yd.size|0,Ae=Yd.offset|0,Ze=Yd.stride|0,zd=Yd.divisor|0);Te=ja.location;Sd=Fc[Te];if(1===af){Sd.buffer||F.enableVertexAttribArray(Te);Xd=Je||1;if(Sd.type!==Re||Sd.size!==Xd||Sd.buffer!==Ie||Sd.normalized!==Rd||Sd.offset!==Ae||Sd.stride!==Ze)F.bindBuffer(34962,Ie.buffer),F.vertexAttribPointer(Te,Xd,Re,Rd,Ze,Ae),Sd.type=Re,Sd.size=Xd,Sd.buffer=Ie,Sd.normalized=
Rd,Sd.offset=Ae,Sd.stride=Ze;Sd.divisor!==zd&&(f.vertexAttribDivisorANGLE(Te,zd),Sd.divisor=zd)}else if(Sd.buffer&&(F.disableVertexAttribArray(Te),Sd.buffer=null),Sd.x!==Ye||Sd.y!==Ve||Sd.z!==Se||Sd.w!==Me)F.vertexAttrib4f(Te,Ye,Ve,Se,Me),Sd.x=Ye,Sd.y=Ve,Sd.z=Se,Sd.w=Me;Ue=M.pixelRatio;g&&hf===Ue||(hf=Ue,F.uniform1f(cc.location,Ue));mf=O.call(this,M,l,g);ef=mf[0];kf=mf[1];g&&jf===ef&&lf===kf||(jf=ef,lf=kf,F.uniform2f(Aa.location,ef,kf));rf=l.scale;of=rf[0];Cf=rf[1];g&&sf===of&&Df===Cf||(sf=of,Df=
Cf,F.uniform2f(Ga.location,of,Cf));Ne=l.scaleFract;Be=Ne[0];qf=Ne[1];g&&pf===Be&&Ef===qf||(pf=Be,Ef=qf,F.uniform2f(X.location,Be,qf));Hf=l.translate;Bf=Hf[0];Gf=Hf[1];g&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,F.uniform2f(fa.location,Bf,Gf));yf=l.translateFract;wf=yf[0];Af=yf[1];g&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,F.uniform2f(sa.location,wf,Af));Kf=l.opacity;g&&Lf===Kf||(Lf=Kf,F.uniform1f(ca.location,Kf));Mf=l.elements;tf=null;(tf=(Rf=D(Mf))?vb.createStream(Mf):vb.getElements(Mf))&&F.bindBuffer(34963,tf.buffer.buffer);
If=l.offset;if(uf=l.count)0<eb?tf?f.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),eb):f.drawArraysInstancedANGLE(0,If,uf,eb):0>eb&&(tf?F.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):F.drawArrays(0,If,uf)),M.viewportWidth=r,M.viewportHeight=Tb,$b&&aa.destroyStream(Dd),Bb&&aa.destroyStream(Ra),Xa&&aa.destroyStream(Ya),yb&&aa.destroyStream(id),jc&&aa.destroyStream(ud),gd&&aa.destroyStream(jd),Ed&&aa.destroyStream(ve),Qd&&aa.destroyStream(ge),$d&&aa.destroyStream(Ie),Rf&&vb.destroyStream(tf)}pa.unbind();
ka.dirty=!0;ha.setVAO(null);d&&(c.cpuTime+=performance.now()-h)},draw:function(a){var k,m,v,x,z,C,u,E,H,J,oa,L,N,O,Q,S,K,R,V,I,W,U,ba,Z,Y,da,ua,qa,ma,na,pa,la,Ka,Ma,Nb,Wa,ra,Oa,Ib,Ta,ub,eb,uc,Rb,Vb,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,bc,$b,Ad,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,ud,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,nf,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd,gd,jd,Yc,df,ie,je,ue,
me,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,ve,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,vf,ze,oe,Pe;k=ad.next;k!==ad.cur&&(k?F.bindFramebuffer(36160,k.framebuffer):F.bindFramebuffer(36160,null),ad.cur=k);if(ka.dirty){var Qe,Le,re,Ce,Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,jf,kf,lf;Qe=ia.dither;Qe!==ka.dither&&(Qe?F.enable(3024):F.disable(3024),ka.dither=Qe);Le=A[0];re=A[1];if(Le!==ea[0]||re!==ea[1])F.blendEquationSeparate(Le,re),ea[0]=Le,ea[1]=re;Ce=ia.depth_func;
Ce!==ka.depth_func&&(F.depthFunc(Ce),ka.depth_func=Ce);Fe=lc[0];Ge=lc[1];if(Fe!==db[0]||Ge!==db[1])F.depthRange(Fe,Ge),db[0]=Fe,db[1]=Ge;He=ia.depth_mask;He!==ka.depth_mask&&(F.depthMask(He),ka.depth_mask=He);De=Ha[0];Jd=Ha[1];Ud=Ha[2];Yd=Ha[3];if(De!==t[0]||Jd!==t[1]||Ud!==t[2]||Yd!==t[3])F.colorMask(De,Jd,Ud,Yd),t[0]=De,t[1]=Jd,t[2]=Ud,t[3]=Yd;$d=ia.cull_enable;$d!==ka.cull_enable&&($d?F.enable(2884):F.disable(2884),ka.cull_enable=$d);Ie=ia.cull_face;Ie!==ka.cull_face&&(F.cullFace(Ie),ka.cull_face=
Ie);zd=ia.frontFace;zd!==ka.frontFace&&(F.frontFace(zd),ka.frontFace=zd);Rd=ia.lineWidth;Rd!==ka.lineWidth&&(F.lineWidth(Rd),ka.lineWidth=Rd);Ae=ia.polygonOffset_enable;Ae!==ka.polygonOffset_enable&&(Ae?F.enable(32823):F.disable(32823),ka.polygonOffset_enable=Ae);Je=ga[0];af=ga[1];if(Je!==Hb[0]||af!==Hb[1])F.polygonOffset(Je,af),Hb[0]=Je,Hb[1]=af;Ze=ia.sample_alpha;Ze!==ka.sample_alpha&&(Ze?F.enable(32926):F.disable(32926),ka.sample_alpha=Ze);Re=ia.sample_enable;Re!==ka.sample_enable&&(Re?F.enable(32928):
F.disable(32928),ka.sample_enable=Re);Me=Ab[0];Ye=Ab[1];if(Me!==We[0]||Ye!==We[1])F.sampleCoverage(Me,Ye),We[0]=Me,We[1]=Ye;Ve=ia.stencil_mask;Ve!==ka.stencil_mask&&(F.stencilMask(Ve),ka.stencil_mask=Ve);Se=te[0];Te=te[1];Sd=te[2];if(Se!==xe[0]||Te!==xe[1]||Sd!==xe[2])F.stencilFunc(Se,Te,Sd),xe[0]=Se,xe[1]=Te,xe[2]=Sd;Xd=de[0];Ue=de[1];hf=de[2];mf=de[3];if(Xd!==we[0]||Ue!==we[1]||hf!==we[2]||mf!==we[3])F.stencilOpSeparate(Xd,Ue,hf,mf),we[0]=Xd,we[1]=Ue,we[2]=hf,we[3]=mf;ef=se[0];jf=se[1];kf=se[2];
lf=se[3];if(ef!==rd[0]||jf!==rd[1]||kf!==rd[2]||lf!==rd[3])F.stencilOpSeparate(ef,jf,kf,lf),rd[0]=ef,rd[1]=jf,rd[2]=kf,rd[3]=lf}m=a.viewport;v=m.x|0;x=m.y|0;z="width"in m?m.width|0:M.framebufferWidth-v;C="height"in m?m.height|0:M.framebufferHeight-x;u=M.viewportWidth;M.viewportWidth=z;E=M.viewportHeight;M.viewportHeight=C;F.viewport(v,x,z,C);Fd[0]=v;Fd[1]=x;Fd[2]=z;Fd[3]=C;F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);ka.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);Ba[0]=
770;Ba[1]=771;Ba[2]=773;Ba[3]=1;F.disable(2929);ka.depth_enable=!1;H=a.viewport;J=H.x|0;oa=H.y|0;L="width"in H?H.width|0:M.framebufferWidth-J;N="height"in H?H.height|0:M.framebufferHeight-oa;F.scissor(J,oa,L,N);ee[0]=J;ee[1]=oa;ee[2]=L;ee[3]=N;F.enable(3089);ka.scissor_enable=!0;F.disable(2960);ka.stencil_enable=!1;if(O=ka.profile)Q=performance.now(),c.count++;F.useProgram(f.program);S=ab.angle_instanced_arrays;ha.setVAO(null);K=g.call(this,M,a,0);R=!1;V=null;I=0;W=!1;ba=U=0;Z=1;Y=0;da=5126;na=ma=
qa=ua=0;D(K)?(R=!0,V=aa.createStream(34962,K),da=V.dtype):(V=aa.getBuffer(K))?da=V.dtype:"constant"in K?(Z=2,"number"===typeof K.constant?(qa=K.constant,ma=na=ua=0):(qa=0<K.constant.length?K.constant[0]:0,ma=1<K.constant.length?K.constant[1]:0,na=2<K.constant.length?K.constant[2]:0,ua=3<K.constant.length?K.constant[3]:0)):(V=D(K.buffer)?aa.createStream(34962,K.buffer):aa.getBuffer(K.buffer),da="type"in K?Kd[K.type]:V.dtype,W=!!K.normalized,ba=K.size|0,U=K.offset|0,Y=K.stride|0,I=K.divisor|0);pa=Wb.location;
la=Fc[pa];if(1===Z){la.buffer||F.enableVertexAttribArray(pa);Ka=ba||1;if(la.type!==da||la.size!==Ka||la.buffer!==V||la.normalized!==W||la.offset!==U||la.stride!==Y)F.bindBuffer(34962,V.buffer),F.vertexAttribPointer(pa,Ka,da,W,Y,U),la.type=da,la.size=Ka,la.buffer=V,la.normalized=W,la.offset=U,la.stride=Y;la.divisor!==I&&(S.vertexAttribDivisorANGLE(pa,I),la.divisor=I)}else if(la.buffer&&(F.disableVertexAttribArray(pa),la.buffer=null),la.x!==qa||la.y!==ma||la.z!==na||la.w!==ua)F.vertexAttrib4f(pa,qa,
ma,na,ua),la.x=qa,la.y=ma,la.z=na,la.w=ua;Ma=d.call(this,M,a,0);Nb=!1;Wa=null;ra=0;Oa=!1;Ta=Ib=0;ub=1;eb=0;uc=5126;Sb=kc=Vb=Rb=0;D(Ma)?(Nb=!0,Wa=aa.createStream(34962,Ma),uc=Wa.dtype):(Wa=aa.getBuffer(Ma))?uc=Wa.dtype:"constant"in Ma?(ub=2,"number"===typeof Ma.constant?(Vb=Ma.constant,kc=Sb=Rb=0):(Vb=0<Ma.constant.length?Ma.constant[0]:0,kc=1<Ma.constant.length?Ma.constant[1]:0,Sb=2<Ma.constant.length?Ma.constant[2]:0,Rb=3<Ma.constant.length?Ma.constant[3]:0)):(Wa=D(Ma.buffer)?aa.createStream(34962,
Ma.buffer):aa.getBuffer(Ma.buffer),uc="type"in Ma?Kd[Ma.type]:Wa.dtype,Oa=!!Ma.normalized,Ta=Ma.size|0,Ib=Ma.offset|0,eb=Ma.stride|0,ra=Ma.divisor|0);r=xc.location;Tb=Fc[r];if(1===ub){Tb.buffer||F.enableVertexAttribArray(r);Na=Ta||1;if(Tb.type!==uc||Tb.size!==Na||Tb.buffer!==Wa||Tb.normalized!==Oa||Tb.offset!==Ib||Tb.stride!==eb)F.bindBuffer(34962,Wa.buffer),F.vertexAttribPointer(r,Na,uc,Oa,eb,Ib),Tb.type=uc,Tb.size=Na,Tb.buffer=Wa,Tb.normalized=Oa,Tb.offset=Ib,Tb.stride=eb;Tb.divisor!==ra&&(S.vertexAttribDivisorANGLE(r,
ra),Tb.divisor=ra)}else if(Tb.buffer&&(F.disableVertexAttribArray(r),Tb.buffer=null),Tb.x!==Vb||Tb.y!==kc||Tb.z!==Sb||Tb.w!==Rb)F.vertexAttrib4f(r,Vb,kc,Sb,Rb),Tb.x=Vb,Tb.y=kc,Tb.z=Sb,Tb.w=Rb;pb=b.call(this,M,a,0);wb=!1;ib=null;Pa=0;bc=!1;Ad=$b=0;fb=1;mc=0;Hc=5126;ta=mb=lb=fc=0;D(pb)?(wb=!0,ib=aa.createStream(34962,pb),Hc=ib.dtype):(ib=aa.getBuffer(pb))?Hc=ib.dtype:"constant"in pb?(fb=2,"number"===typeof pb.constant?(lb=pb.constant,mb=ta=fc=0):(lb=0<pb.constant.length?pb.constant[0]:0,mb=1<pb.constant.length?
pb.constant[1]:0,ta=2<pb.constant.length?pb.constant[2]:0,fc=3<pb.constant.length?pb.constant[3]:0)):(ib=D(pb.buffer)?aa.createStream(34962,pb.buffer):aa.getBuffer(pb.buffer),Hc="type"in pb?Kd[pb.type]:ib.dtype,bc=!!pb.normalized,Ad=pb.size|0,$b=pb.offset|0,mc=pb.stride|0,Pa=pb.divisor|0);qb=oc.location;va=Fc[qb];if(1===fb){va.buffer||F.enableVertexAttribArray(qb);Ua=Ad||1;if(va.type!==Hc||va.size!==Ua||va.buffer!==ib||va.normalized!==bc||va.offset!==$b||va.stride!==mc)F.bindBuffer(34962,ib.buffer),
F.vertexAttribPointer(qb,Ua,Hc,bc,mc,$b),va.type=Hc,va.size=Ua,va.buffer=ib,va.normalized=bc,va.offset=$b,va.stride=mc;va.divisor!==Pa&&(S.vertexAttribDivisorANGLE(qb,Pa),va.divisor=Pa)}else if(va.buffer&&(F.disableVertexAttribArray(qb),va.buffer=null),va.x!==lb||va.y!==mb||va.z!==ta||va.w!==fc)F.vertexAttrib4f(qb,lb,mb,ta,fc),va.x=lb,va.y=mb,va.z=ta,va.w=fc;cb=n.call(this,M,a,0);ya=!1;gb=null;Ia=0;Cb=!1;Ra=Bb=0;Mc=1;Jb=0;Za=5126;Ja=ud=wa=Ub=0;D(cb)?(ya=!0,gb=aa.createStream(34962,cb),Za=gb.dtype):
(gb=aa.getBuffer(cb))?Za=gb.dtype:"constant"in cb?(Mc=2,"number"===typeof cb.constant?(wa=cb.constant,ud=Ja=Ub=0):(wa=0<cb.constant.length?cb.constant[0]:0,ud=1<cb.constant.length?cb.constant[1]:0,Ja=2<cb.constant.length?cb.constant[2]:0,Ub=3<cb.constant.length?cb.constant[3]:0)):(gb=D(cb.buffer)?aa.createStream(34962,cb.buffer):aa.getBuffer(cb.buffer),Za="type"in cb?Kd[cb.type]:gb.dtype,Cb=!!cb.normalized,Ra=cb.size|0,Bb=cb.offset|0,Jb=cb.stride|0,Ia=cb.divisor|0);Ob=sd.location;hb=Fc[Ob];if(1===
Mc){hb.buffer||F.enableVertexAttribArray(Ob);jb=Ra||1;if(hb.type!==Za||hb.size!==jb||hb.buffer!==gb||hb.normalized!==Cb||hb.offset!==Bb||hb.stride!==Jb)F.bindBuffer(34962,gb.buffer),F.vertexAttribPointer(Ob,jb,Za,Cb,Jb,Bb),hb.type=Za,hb.size=jb,hb.buffer=gb,hb.normalized=Cb,hb.offset=Bb,hb.stride=Jb;hb.divisor!==Ia&&(S.vertexAttribDivisorANGLE(Ob,Ia),hb.divisor=Ia)}else if(hb.buffer&&(F.disableVertexAttribArray(Ob),hb.buffer=null),hb.x!==wa||hb.y!==ud||hb.z!==Ja||hb.w!==Ub)F.vertexAttrib4f(Ob,wa,
ud,Ja,Ub),hb.x=wa,hb.y=ud,hb.z=Ja,hb.w=Ub;xa=e.call(this,M,a,0);gc=!1;Ca=null;rb=0;sb=!1;Ya=Xa=0;nc=1;Ic=0;vc=5126;Ea=Zc=Lb=Va=0;D(xa)?(gc=!0,Ca=aa.createStream(34962,xa),vc=Ca.dtype):(Ca=aa.getBuffer(xa))?vc=Ca.dtype:"constant"in xa?(nc=2,"number"===typeof xa.constant?(Lb=xa.constant,Zc=Ea=Va=0):(Lb=0<xa.constant.length?xa.constant[0]:0,Zc=1<xa.constant.length?xa.constant[1]:0,Ea=2<xa.constant.length?xa.constant[2]:0,Va=3<xa.constant.length?xa.constant[3]:0)):(Ca=D(xa.buffer)?aa.createStream(34962,
xa.buffer):aa.getBuffer(xa.buffer),vc="type"in xa?Kd[xa.type]:Ca.dtype,sb=!!xa.normalized,Ya=xa.size|0,Xa=xa.offset|0,Ic=xa.stride|0,rb=xa.divisor|0);yc=kb.location;Qa=Fc[yc];if(1===nc){Qa.buffer||F.enableVertexAttribArray(yc);za=Ya||1;if(Qa.type!==vc||Qa.size!==za||Qa.buffer!==Ca||Qa.normalized!==sb||Qa.offset!==Xa||Qa.stride!==Ic)F.bindBuffer(34962,Ca.buffer),F.vertexAttribPointer(yc,za,vc,sb,Ic,Xa),Qa.type=vc,Qa.size=za,Qa.buffer=Ca,Qa.normalized=sb,Qa.offset=Xa,Qa.stride=Ic;Qa.divisor!==rb&&(S.vertexAttribDivisorANGLE(yc,
rb),Qa.divisor=rb)}else if(Qa.buffer&&(F.disableVertexAttribArray(yc),Qa.buffer=null),Qa.x!==Lb||Qa.y!==Zc||Qa.z!==Ea||Qa.w!==Va)F.vertexAttrib4f(yc,Lb,Zc,Ea,Va),Qa.x=Lb,Qa.y=Zc,Qa.z=Ea,Qa.w=Va;nb=h.call(this,M,a,0);xb=!1;Db=null;tb=0;wc=!1;id=yb=0;tc=1;Md=0;Oc=5126;ec=Xb=fd=ld=0;D(nb)?(xb=!0,Db=aa.createStream(34962,nb),Oc=Db.dtype):(Db=aa.getBuffer(nb))?Oc=Db.dtype:"constant"in nb?(tc=2,"number"===typeof nb.constant?(fd=nb.constant,Xb=ec=ld=0):(fd=0<nb.constant.length?nb.constant[0]:0,Xb=1<nb.constant.length?
nb.constant[1]:0,ec=2<nb.constant.length?nb.constant[2]:0,ld=3<nb.constant.length?nb.constant[3]:0)):(Db=D(nb.buffer)?aa.createStream(34962,nb.buffer):aa.getBuffer(nb.buffer),Oc="type"in nb?Kd[nb.type]:Db.dtype,wc=!!nb.normalized,id=nb.size|0,yb=nb.offset|0,Md=nb.stride|0,tb=nb.divisor|0);Pb=$a.location;Fa=Fc[Pb];if(1===tc){Fa.buffer||F.enableVertexAttribArray(Pb);ac=id||1;if(Fa.type!==Oc||Fa.size!==ac||Fa.buffer!==Db||Fa.normalized!==wc||Fa.offset!==yb||Fa.stride!==Md)F.bindBuffer(34962,Db.buffer),
F.vertexAttribPointer(Pb,ac,Oc,wc,Md,yb),Fa.type=Oc,Fa.size=ac,Fa.buffer=Db,Fa.normalized=wc,Fa.offset=yb,Fa.stride=Md;Fa.divisor!==tb&&(S.vertexAttribDivisorANGLE(Pb,tb),Fa.divisor=tb)}else if(Fa.buffer&&(F.disableVertexAttribArray(Pb),Fa.buffer=null),Fa.x!==fd||Fa.y!==Xb||Fa.z!==ec||Fa.w!==ld)F.vertexAttrib4f(Pb,fd,Xb,ec,ld),Fa.x=fd,Fa.y=Xb,Fa.z=ec,Fa.w=ld;ob=q.call(this,M,a,0);zb=!1;Mb=null;Qb=0;hc=!1;nf=jc=0;Bc=1;Cc=0;Dc=5126;Qc=Tc=$c=Pc=0;D(ob)?(zb=!0,Mb=aa.createStream(34962,ob),Dc=Mb.dtype):
(Mb=aa.getBuffer(ob))?Dc=Mb.dtype:"constant"in ob?(Bc=2,"number"===typeof ob.constant?($c=ob.constant,Tc=Qc=Pc=0):($c=0<ob.constant.length?ob.constant[0]:0,Tc=1<ob.constant.length?ob.constant[1]:0,Qc=2<ob.constant.length?ob.constant[2]:0,Pc=3<ob.constant.length?ob.constant[3]:0)):(Mb=D(ob.buffer)?aa.createStream(34962,ob.buffer):aa.getBuffer(ob.buffer),Dc="type"in ob?Kd[ob.type]:Mb.dtype,hc=!!ob.normalized,nf=ob.size|0,jc=ob.offset|0,Cc=ob.stride|0,Qb=ob.divisor|0);Kb=T.location;Gb=Fc[Kb];if(1===
Bc){Gb.buffer||F.enableVertexAttribArray(Kb);Rc=nf||4;if(Gb.type!==Dc||Gb.size!==Rc||Gb.buffer!==Mb||Gb.normalized!==hc||Gb.offset!==jc||Gb.stride!==Cc)F.bindBuffer(34962,Mb.buffer),F.vertexAttribPointer(Kb,Rc,Dc,hc,Cc,jc),Gb.type=Dc,Gb.size=Rc,Gb.buffer=Mb,Gb.normalized=hc,Gb.offset=jc,Gb.stride=Cc;Gb.divisor!==Qb&&(S.vertexAttribDivisorANGLE(Kb,Qb),Gb.divisor=Qb)}else if(Gb.buffer&&(F.disableVertexAttribArray(Kb),Gb.buffer=null),Gb.x!==$c||Gb.y!==Tc||Gb.z!==Qc||Gb.w!==Pc)F.vertexAttrib4f(Kb,$c,
Tc,Qc,Pc),Gb.x=$c,Gb.y=Tc,Gb.z=Qc,Gb.w=Pc;Jc=B.call(this,M,a,0);Uc=!1;ic=null;Xc=0;wd=!1;jd=gd=0;Yc=1;df=0;ie=5126;Id=me=ue=je=0;D(Jc)?(Uc=!0,ic=aa.createStream(34962,Jc),ie=ic.dtype):(ic=aa.getBuffer(Jc))?ie=ic.dtype:"constant"in Jc?(Yc=2,"number"===typeof Jc.constant?(ue=Jc.constant,me=Id=je=0):(ue=0<Jc.constant.length?Jc.constant[0]:0,me=1<Jc.constant.length?Jc.constant[1]:0,Id=2<Jc.constant.length?Jc.constant[2]:0,je=3<Jc.constant.length?Jc.constant[3]:0)):(ic=D(Jc.buffer)?aa.createStream(34962,
Jc.buffer):aa.getBuffer(Jc.buffer),ie="type"in Jc?Kd[Jc.type]:ic.dtype,wd=!!Jc.normalized,jd=Jc.size|0,gd=Jc.offset|0,df=Jc.stride|0,Xc=Jc.divisor|0);Gd=Yb.location;dd=Fc[Gd];if(1===Yc){dd.buffer||F.enableVertexAttribArray(Gd);Ec=jd||4;if(dd.type!==ie||dd.size!==Ec||dd.buffer!==ic||dd.normalized!==wd||dd.offset!==gd||dd.stride!==df)F.bindBuffer(34962,ic.buffer),F.vertexAttribPointer(Gd,Ec,ie,wd,df,gd),dd.type=ie,dd.size=Ec,dd.buffer=ic,dd.normalized=wd,dd.offset=gd,dd.stride=df;dd.divisor!==Xc&&(S.vertexAttribDivisorANGLE(Gd,
Xc),dd.divisor=Xc)}else if(dd.buffer&&(F.disableVertexAttribArray(Gd),dd.buffer=null),dd.x!==ue||dd.y!==me||dd.z!==Id||dd.w!==je)F.vertexAttrib4f(Gd,ue,me,Id,je),dd.x=ue,dd.y=me,dd.z=Id,dd.w=je;nd=l.call(this,M,a,0);hd=!1;bd=null;pd=0;Bd=!1;ve=Ed=0;ne=1;ye=0;ce=5126;Zd=pe=ae=be=0;D(nd)?(hd=!0,bd=aa.createStream(34962,nd),ce=bd.dtype):(bd=aa.getBuffer(nd))?ce=bd.dtype:"constant"in nd?(ne=2,"number"===typeof nd.constant?(ae=nd.constant,pe=Zd=be=0):(ae=0<nd.constant.length?nd.constant[0]:0,pe=1<nd.constant.length?
nd.constant[1]:0,Zd=2<nd.constant.length?nd.constant[2]:0,be=3<nd.constant.length?nd.constant[3]:0)):(bd=D(nd.buffer)?aa.createStream(34962,nd.buffer):aa.getBuffer(nd.buffer),ce="type"in nd?Kd[nd.type]:bd.dtype,Bd=!!nd.normalized,ve=nd.size|0,Ed=nd.offset|0,ye=nd.stride|0,pd=nd.divisor|0);fe=ja.location;zc=Fc[fe];if(1===ne){zc.buffer||F.enableVertexAttribArray(fe);Wc=ve||1;if(zc.type!==ce||zc.size!==Wc||zc.buffer!==bd||zc.normalized!==Bd||zc.offset!==Ed||zc.stride!==ye)F.bindBuffer(34962,bd.buffer),
F.vertexAttribPointer(fe,Wc,ce,Bd,ye,Ed),zc.type=ce,zc.size=Wc,zc.buffer=bd,zc.normalized=Bd,zc.offset=Ed,zc.stride=ye;zc.divisor!==pd&&(S.vertexAttribDivisorANGLE(fe,pd),zc.divisor=pd)}else if(zc.buffer&&(F.disableVertexAttribArray(fe),zc.buffer=null),zc.x!==ae||zc.y!==pe||zc.z!==Zd||zc.w!==be)F.vertexAttrib4f(fe,ae,pe,Zd,be),zc.x=ae,zc.y=pe,zc.z=Zd,zc.w=be;F.uniform1i(y.location,!1);F.uniform1f(cc.location,M.pixelRatio);qe=w.call(this,M,a,0);F.uniform2f(Aa.location,qe[0],qe[1]);ke=a.scale;F.uniform2f(Ga.location,
ke[0],ke[1]);Hd=a.scaleFract;F.uniform2f(X.location,Hd[0],Hd[1]);Nd=a.translate;F.uniform2f(fa.location,Nd[0],Nd[1]);Pd=a.translateFract;F.uniform2f(sa.location,Pd[0],Pd[1]);F.uniform1f(ca.location,a.opacity);F.uniform1i(La.location,p.bind());Qd=a.elements;ge=null;(ge=(vf=D(Qd))?vb.createStream(Qd):vb.getElements(Qd))&&F.bindBuffer(34963,ge.buffer.buffer);ze=a.offset;if(oe=a.count)Pe=Da.instances,0<Pe?ge?S.drawElementsInstancedANGLE(0,oe,ge.type,ze<<(ge.type-5121>>1),Pe):S.drawArraysInstancedANGLE(0,
ze,oe,Pe):0>Pe&&(ge?F.drawElements(0,oe,ge.type,ze<<(ge.type-5121>>1)):F.drawArrays(0,ze,oe)),ka.dirty=!0,ha.setVAO(null),M.viewportWidth=u,M.viewportHeight=E,O&&(c.cpuTime+=performance.now()-Q),R&&aa.destroyStream(V),Nb&&aa.destroyStream(Wa),wb&&aa.destroyStream(ib),ya&&aa.destroyStream(gb),gc&&aa.destroyStream(Ca),xb&&aa.destroyStream(Db),zb&&aa.destroyStream(Mb),Uc&&aa.destroyStream(ic),hd&&aa.destroyStream(bd),p.unbind(),vf&&vb.destroyStream(ge)},scope:function(a,b,e){var d,h,f,g,l,n,q,B,t,w,
p,y,A,P,G,F,K,N,O,R,ea,T,X,Y,ha,ga,ca,fa,ja,la,na,Ba,pa,Ha,ra,sa,Ga,Aa,db,La,Oa,Ab,ab,$a,Hb,r,Fc,Na,pb,wb,ib,Pa,kb,ub,lc,fb,sd,Yb,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Vb,Jb,Za,Ub,wa,bc,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Wb,vc,Va,Lb,cc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,oc,tc,xc,Oc,ad,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,rd,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,te,gd,jd,Yc,Fd,xe,ee,de,se,Id,Gd,dd,Ec,nd,hd,bd,pd,Bd,Ed,we,ne,ye,ce,be,ae,pe,Zd,fe,zc,Wc,qe,ke,Hd,Nd,Pd,Qd,ge,We,ze,oe,Pe,Qe,Le,re,Ce,
Fe,Ge,He,De,Jd,Ud,Yd,$d,Ie,zd,Rd,Ae,Je,af,Ze,Re,Me,Ye,Ve,Se,Te,Sd,Xd,Ue,hf,mf,ef,jf,kf,lf,rf,of,sf,Cf,Df,Ne,Be,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,ff,bf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,cf,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;d=a.viewport;h=d.x|0;f=d.y|0;g="width"in d?d.width|0:M.framebufferWidth-h;l="height"in d?d.height|0:M.framebufferHeight-f;n=M.viewportWidth;M.viewportWidth=
g;q=M.viewportHeight;M.viewportHeight=l;B=ud[0];ud[0]=h;t=ud[1];ud[1]=f;w=ud[2];ud[2]=g;p=ud[3];ud[3]=l;y=qa[0];qa[0]=0;A=qa[1];qa[1]=0;P=qa[2];qa[2]=0;G=qa[3];qa[3]=1;F=ia.blend_enable;ia.blend_enable=!0;K=V[0];V[0]=770;N=V[1];V[1]=771;O=V[2];V[2]=773;R=V[3];V[3]=1;ea=ia.depth_enable;ia.depth_enable=!1;T=a.viewport;X=T.x|0;Y=T.y|0;ha="width"in T?T.width|0:M.framebufferWidth-X;ga="height"in T?T.height|0:M.framebufferHeight-Y;ca=Ad[0];Ad[0]=X;fa=Ad[1];Ad[1]=Y;ja=Ad[2];Ad[2]=ha;la=Ad[3];Ad[3]=ga;na=
ia.scissor_enable;ia.scissor_enable=!0;Ba=ia.stencil_enable;ia.stencil_enable=!1;if(pa=ka.profile)Ha=performance.now(),c.count++;ra=a.elements;sa=null;sa=(Ga=D(ra))?vb.createStream(ra):vb.getElements(ra);Aa=Da.elements;Da.elements=sa;db=a.offset;La=Da.offset;Da.offset=db;Oa=a.count;Ab=Da.count;Da.count=Oa;ab=Da.primitive;Da.primitive=0;$a=W[45];W[45]=!1;Hb=a.markerTexture;r=W[48];W[48]=Hb;Fc=a.opacity;Na=W[10];W[10]=Fc;pb=z.call(this,M,a,e);wb=W[46];W[46]=pb;ib=W[47];W[47]=u;Pa=M.pixelRatio;kb=W[34];
W[34]=Pa;ub=a.scale;lc=W[6];W[6]=ub;fb=a.scaleFract;sd=W[7];W[7]=fb;Yb=a.translate;fc=W[8];W[8]=Yb;lb=a.translateFract;mb=W[9];W[9]=lb;ta=C.call(this,M,a,e);qb=!1;va=null;Ua=0;cb=!1;gb=ya=0;Ia=1;Cb=0;Bb=5126;Za=Jb=Vb=Ra=0;D(ta)?(qb=!0,va=aa.createStream(34962,ta),Bb=va.dtype):(va=aa.getBuffer(ta))?Bb=va.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(Vb=ta.constant,Jb=Za=Ra=0):(Vb=0<ta.constant.length?ta.constant[0]:0,Jb=1<ta.constant.length?ta.constant[1]:0,Za=2<ta.constant.length?ta.constant[2]:
0,Ra=3<ta.constant.length?ta.constant[3]:0)):(va=D(ta.buffer)?aa.createStream(34962,ta.buffer):aa.getBuffer(ta.buffer),Bb="type"in ta?Kd[ta.type]:va.dtype,cb=!!ta.normalized,gb=ta.size|0,ya=ta.offset|0,Cb=ta.stride|0,Ua=ta.divisor|0);Ub=S.buffer;S.buffer=va;wa=S.divisor;S.divisor=Ua;bc=S.normalized;S.normalized=cb;Ja=S.offset;S.offset=ya;Ob=S.size;S.size=gb;hb=S.state;S.state=Ia;jb=S.stride;S.stride=Cb;xa=S.type;S.type=Bb;gc=S.w;S.w=Ra;Ca=S.x;S.x=Vb;rb=S.y;S.y=Jb;sb=S.z;S.z=Za;Xa=I.call(this,M,a,
e);Ya=!1;nc=null;Wb=0;vc=!1;Lb=Va=0;cc=1;Ea=0;yc=5126;xb=nb=za=Qa=0;D(Xa)?(Ya=!0,nc=aa.createStream(34962,Xa),yc=nc.dtype):(nc=aa.getBuffer(Xa))?yc=nc.dtype:"constant"in Xa?(cc=2,"number"===typeof Xa.constant?(za=Xa.constant,nb=xb=Qa=0):(za=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,xb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=D(Xa.buffer)?aa.createStream(34962,Xa.buffer):aa.getBuffer(Xa.buffer),yc="type"in Xa?Kd[Xa.type]:
nc.dtype,vc=!!Xa.normalized,Lb=Xa.size|0,Va=Xa.offset|0,Ea=Xa.stride|0,Wb=Xa.divisor|0);Db=J.buffer;J.buffer=nc;tb=J.divisor;J.divisor=Wb;wc=J.normalized;J.normalized=vc;yb=J.offset;J.offset=Va;oc=J.size;J.size=Lb;tc=J.state;J.state=cc;xc=J.stride;J.stride=Ea;Oc=J.type;J.type=yc;ad=J.w;J.w=Qa;fd=J.x;J.x=za;Xb=J.y;J.y=nb;ec=J.z;J.z=xb;Pb=Ka.call(this,M,a,e);Fa=!1;ac=null;ob=0;zb=!1;Qb=Mb=0;hc=1;jc=0;rd=5126;Pc=Dc=Cc=Bc=0;D(Pb)?(Fa=!0,ac=aa.createStream(34962,Pb),rd=ac.dtype):(ac=aa.getBuffer(Pb))?
rd=ac.dtype:"constant"in Pb?(hc=2,"number"===typeof Pb.constant?(Cc=Pb.constant,Dc=Pc=Bc=0):(Cc=0<Pb.constant.length?Pb.constant[0]:0,Dc=1<Pb.constant.length?Pb.constant[1]:0,Pc=2<Pb.constant.length?Pb.constant[2]:0,Bc=3<Pb.constant.length?Pb.constant[3]:0)):(ac=D(Pb.buffer)?aa.createStream(34962,Pb.buffer):aa.getBuffer(Pb.buffer),rd="type"in Pb?Kd[Pb.type]:ac.dtype,zb=!!Pb.normalized,Qb=Pb.size|0,Mb=Pb.offset|0,jc=Pb.stride|0,ob=Pb.divisor|0);$c=v.buffer;v.buffer=ac;Tc=v.divisor;v.divisor=ob;Qc=
v.normalized;v.normalized=zb;Kb=v.offset;v.offset=Mb;Gb=v.size;v.size=Qb;Rc=v.state;v.state=hc;Jc=v.stride;v.stride=jc;Uc=v.type;v.type=rd;ic=v.w;v.w=Bc;Xc=v.x;v.x=Cc;te=v.y;v.y=Dc;gd=v.z;v.z=Pc;jd=x.call(this,M,a,e);Yc=!1;Fd=null;xe=0;ee=!1;se=de=0;Id=1;Gd=0;dd=5126;bd=hd=nd=Ec=0;D(jd)?(Yc=!0,Fd=aa.createStream(34962,jd),dd=Fd.dtype):(Fd=aa.getBuffer(jd))?dd=Fd.dtype:"constant"in jd?(Id=2,"number"===typeof jd.constant?(nd=jd.constant,hd=bd=Ec=0):(nd=0<jd.constant.length?jd.constant[0]:0,hd=1<jd.constant.length?
jd.constant[1]:0,bd=2<jd.constant.length?jd.constant[2]:0,Ec=3<jd.constant.length?jd.constant[3]:0)):(Fd=D(jd.buffer)?aa.createStream(34962,jd.buffer):aa.getBuffer(jd.buffer),dd="type"in jd?Kd[jd.type]:Fd.dtype,ee=!!jd.normalized,se=jd.size|0,de=jd.offset|0,Gd=jd.stride|0,xe=jd.divisor|0);pd=k.buffer;k.buffer=Fd;Bd=k.divisor;k.divisor=xe;Ed=k.normalized;k.normalized=ee;we=k.offset;k.offset=de;ne=k.size;k.size=se;ye=k.state;k.state=Id;ce=k.stride;k.stride=Gd;be=k.type;k.type=dd;ae=k.w;k.w=Ec;pe=k.x;
k.x=nd;Zd=k.y;k.y=hd;fe=k.z;k.z=bd;zc=da.call(this,M,a,e);Wc=!1;qe=null;ke=0;Hd=!1;Pd=Nd=0;Qd=1;ge=0;We=5126;Qe=Pe=oe=ze=0;D(zc)?(Wc=!0,qe=aa.createStream(34962,zc),We=qe.dtype):(qe=aa.getBuffer(zc))?We=qe.dtype:"constant"in zc?(Qd=2,"number"===typeof zc.constant?(oe=zc.constant,Pe=Qe=ze=0):(oe=0<zc.constant.length?zc.constant[0]:0,Pe=1<zc.constant.length?zc.constant[1]:0,Qe=2<zc.constant.length?zc.constant[2]:0,ze=3<zc.constant.length?zc.constant[3]:0)):(qe=D(zc.buffer)?aa.createStream(34962,zc.buffer):
aa.getBuffer(zc.buffer),We="type"in zc?Kd[zc.type]:qe.dtype,Hd=!!zc.normalized,Pd=zc.size|0,Nd=zc.offset|0,ge=zc.stride|0,ke=zc.divisor|0);Le=Q.buffer;Q.buffer=qe;re=Q.divisor;Q.divisor=ke;Ce=Q.normalized;Q.normalized=Hd;Fe=Q.offset;Q.offset=Nd;Ge=Q.size;Q.size=Pd;He=Q.state;Q.state=Qd;De=Q.stride;Q.stride=ge;Jd=Q.type;Q.type=We;Ud=Q.w;Q.w=ze;Yd=Q.x;Q.x=oe;$d=Q.y;Q.y=Pe;Ie=Q.z;Q.z=Qe;zd=ba.call(this,M,a,e);Rd=!1;Ae=null;Je=0;af=!1;Re=Ze=0;Me=1;Ye=0;Ve=5126;Xd=Sd=Te=Se=0;D(zd)?(Rd=!0,Ae=aa.createStream(34962,
zd),Ve=Ae.dtype):(Ae=aa.getBuffer(zd))?Ve=Ae.dtype:"constant"in zd?(Me=2,"number"===typeof zd.constant?(Te=zd.constant,Sd=Xd=Se=0):(Te=0<zd.constant.length?zd.constant[0]:0,Sd=1<zd.constant.length?zd.constant[1]:0,Xd=2<zd.constant.length?zd.constant[2]:0,Se=3<zd.constant.length?zd.constant[3]:0)):(Ae=D(zd.buffer)?aa.createStream(34962,zd.buffer):aa.getBuffer(zd.buffer),Ve="type"in zd?Kd[zd.type]:Ae.dtype,af=!!zd.normalized,Re=zd.size|0,Ze=zd.offset|0,Ye=zd.stride|0,Je=zd.divisor|0);Ue=E.buffer;E.buffer=
Ae;hf=E.divisor;E.divisor=Je;mf=E.normalized;E.normalized=af;ef=E.offset;E.offset=Ze;jf=E.size;E.size=Re;kf=E.state;E.state=Me;lf=E.stride;E.stride=Ye;rf=E.type;E.type=Ve;of=E.w;E.w=Se;sf=E.x;E.x=Te;Cf=E.y;E.y=Sd;Df=E.z;E.z=Xd;Ne=ma.call(this,M,a,e);Be=!1;pf=null;qf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;D(Ne)?(Be=!0,pf=aa.createStream(34962,Ne),xf=pf.dtype):(pf=aa.getBuffer(Ne))?xf=pf.dtype:"constant"in Ne?(Ff=2,"number"===typeof Ne.constant?(wf=Ne.constant,zf=Af=yf=0):(wf=0<Ne.constant.length?
Ne.constant[0]:0,zf=1<Ne.constant.length?Ne.constant[1]:0,Af=2<Ne.constant.length?Ne.constant[2]:0,yf=3<Ne.constant.length?Ne.constant[3]:0)):(pf=D(Ne.buffer)?aa.createStream(34962,Ne.buffer):aa.getBuffer(Ne.buffer),xf="type"in Ne?Kd[Ne.type]:pf.dtype,Ef=!!Ne.normalized,Bf=Ne.size|0,Hf=Ne.offset|0,Gf=Ne.stride|0,qf=Ne.divisor|0);Jf=H.buffer;H.buffer=pf;Kf=H.divisor;H.divisor=qf;Lf=H.normalized;H.normalized=Ef;Mf=H.offset;H.offset=Hf;tf=H.size;H.size=Bf;Rf=H.state;H.state=Ff;If=H.stride;H.stride=Gf;
uf=H.type;H.type=xf;dg=H.w;H.w=yf;Sf=H.x;H.x=wf;Tf=H.y;H.y=zf;qg=H.z;H.z=Af;ff=Z.call(this,M,a,e);bf=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;D(ff)?(bf=!0,Nf=aa.createStream(34962,ff),Wf=Nf.dtype):(Nf=aa.getBuffer(ff))?Wf=Nf.dtype:"constant"in ff?(hg=2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Nf=
D(ff.buffer)?aa.createStream(34962,ff.buffer):aa.getBuffer(ff.buffer),Wf="type"in ff?Kd[ff.type]:Nf.dtype,eg=!!ff.normalized,gg=ff.size|0,fg=ff.offset|0,ig=ff.stride|0,Of=ff.divisor|0);jg=m.buffer;m.buffer=Nf;rg=m.divisor;m.divisor=Of;sg=m.normalized;m.normalized=eg;tg=m.offset;m.offset=fg;ug=m.size;m.size=gg;vg=m.state;m.state=hg;wg=m.stride;m.stride=ig;xg=m.type;m.type=Wf;yg=m.w;m.w=Uf;zg=m.x;m.x=Xf;Ag=m.y;m.y=Yf;Bg=m.z;m.z=Zf;gf=L.call(this,M,a,e);cf=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=
5126;cg=bg=ag=Vf=0;D(gf)?(cf=!0,Pf=aa.createStream(34962,gf),$f=Pf.dtype):(Pf=aa.getBuffer(gf))?$f=Pf.dtype:"constant"in gf?(ng=2,"number"===typeof gf.constant?(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Pf=D(gf.buffer)?aa.createStream(34962,gf.buffer):aa.getBuffer(gf.buffer),$f="type"in gf?Kd[gf.type]:Pf.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|
0,og=gf.stride|0,Qf=gf.divisor|0);pg=U.buffer;U.buffer=Pf;Cg=U.divisor;U.divisor=Qf;Dg=U.normalized;U.normalized=kg;Eg=U.offset;U.offset=lg;Fg=U.size;U.size=mg;Gg=U.state;U.state=ng;Hg=U.stride;U.stride=og;Ig=U.type;U.type=$f;Jg=U.w;U.w=Vf;Kg=U.x;U.x=ag;Lg=U.y;U.y=bg;Mg=U.z;U.z=cg;Ng=ua.vert;ua.vert=59;Og=ua.frag;ua.frag=58;ka.dirty=!0;b(M,a,e);M.viewportWidth=n;M.viewportHeight=q;ud[0]=B;ud[1]=t;ud[2]=w;ud[3]=p;qa[0]=y;qa[1]=A;qa[2]=P;qa[3]=G;ia.blend_enable=F;V[0]=K;V[1]=N;V[2]=O;V[3]=R;ia.depth_enable=
ea;Ad[0]=ca;Ad[1]=fa;Ad[2]=ja;Ad[3]=la;ia.scissor_enable=na;ia.stencil_enable=Ba;pa&&(c.cpuTime+=performance.now()-Ha);Ga&&vb.destroyStream(sa);Da.elements=Aa;Da.offset=La;Da.count=Ab;Da.primitive=ab;W[45]=$a;W[48]=r;W[10]=Na;W[46]=wb;W[47]=ib;W[34]=kb;W[6]=lc;W[7]=sd;W[8]=fc;W[9]=mb;qb&&aa.destroyStream(va);S.buffer=Ub;S.divisor=wa;S.normalized=bc;S.offset=Ja;S.size=Ob;S.state=hb;S.stride=jb;S.type=xa;S.w=gc;S.x=Ca;S.y=rb;S.z=sb;Ya&&aa.destroyStream(nc);J.buffer=Db;J.divisor=tb;J.normalized=wc;J.offset=
yb;J.size=oc;J.state=tc;J.stride=xc;J.type=Oc;J.w=ad;J.x=fd;J.y=Xb;J.z=ec;Fa&&aa.destroyStream(ac);v.buffer=$c;v.divisor=Tc;v.normalized=Qc;v.offset=Kb;v.size=Gb;v.state=Rc;v.stride=Jc;v.type=Uc;v.w=ic;v.x=Xc;v.y=te;v.z=gd;Yc&&aa.destroyStream(Fd);k.buffer=pd;k.divisor=Bd;k.normalized=Ed;k.offset=we;k.size=ne;k.state=ye;k.stride=ce;k.type=be;k.w=ae;k.x=pe;k.y=Zd;k.z=fe;Wc&&aa.destroyStream(qe);Q.buffer=Le;Q.divisor=re;Q.normalized=Ce;Q.offset=Fe;Q.size=Ge;Q.state=He;Q.stride=De;Q.type=Jd;Q.w=Ud;Q.x=
Yd;Q.y=$d;Q.z=Ie;Rd&&aa.destroyStream(Ae);E.buffer=Ue;E.divisor=hf;E.normalized=mf;E.offset=ef;E.size=jf;E.state=kf;E.stride=lf;E.type=rf;E.w=of;E.x=sf;E.y=Cf;E.z=Df;Be&&aa.destroyStream(pf);H.buffer=Jf;H.divisor=Kf;H.normalized=Lf;H.offset=Mf;H.size=tf;H.state=Rf;H.stride=If;H.type=uf;H.w=dg;H.x=Sf;H.y=Tf;H.z=qg;bf&&aa.destroyStream(Nf);m.buffer=jg;m.divisor=rg;m.normalized=sg;m.offset=tg;m.size=ug;m.state=vg;m.stride=wg;m.type=xg;m.w=yg;m.x=zg;m.y=Ag;m.z=Bg;cf&&aa.destroyStream(Pf);U.buffer=pg;
U.divisor=Cg;U.normalized=Dg;U.offset=Eg;U.size=Fg;U.state=Gg;U.stride=Hg;U.type=Ig;U.w=Jg;U.x=Kg;U.y=Lg;U.z=Mg;ua.vert=Ng;ua.frag=Og;ka.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,c,f,g,d,b,n,e,h,q,B,l,w,p,z,u,C,S,I,J,Ka,v,x,k,da,Q,ba,E,ma,H,Z,m,L,U,la,Vb,ub,bc,na,Oa){var Y,K,N,R,pa,O,Yb,$a,T,y,ja,ca,Aa,La,cc,Ga,X,kb,fa,sa,Wb,oc,xc,sd,Fc,aa,M,ka,Da,vb,ab,ad,F,D,ia,ua,W,ha,qa,
G,A;Y=a.attributes;K=a.buffer;N=a.context;R=a.current;pa=a.draw;O=a.elements;Yb=a.extensions;$a=a.framebuffer;T=a.gl;y=a.isBufferArgs;ja=a.next;ca=a.shader;Aa=a.uniforms;La=a.vao;cc=ja.blend_color;Ga=R.blend_color;X=ja.blend_equation;kb=R.blend_equation;fa=ja.blend_func;sa=R.blend_func;Wb=ja.colorMask;oc=R.colorMask;xc=ja.depth_range;sd=R.depth_range;Fc=ja.polygonOffset_offset;aa=R.polygonOffset_offset;M=ja.sample_coverage;ka=R.sample_coverage;Da=ja.scissor_box;vb=R.scissor_box;ab=ja.stencil_func;
ad=R.stencil_func;F=ja.stencil_opBack;D=R.stencil_opBack;ia=ja.stencil_opFront;ua=R.stencil_opFront;W=ja.viewport;ha=R.viewport;qa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};G={offset:4,stride:8};A={offset:0,stride:8};return{batch:function(a,b){var e,d,h,f,g,l,n,q,B,w,p,z,u;e=$a.next;e!==$a.cur&&(e?T.bindFramebuffer(36160,e.framebuffer):T.bindFramebuffer(36160,null),$a.cur=e);if(R.dirty){var C,P,oa,W,ca,fa,Aa,cc,Oe,$e,Xe,xd,Ee,Vd,Wd,le,Ke,yd,kd,
Cd,od,cd,Vc,vd,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb;C=ja.dither;C!==R.dither&&(C?T.enable(3024):T.disable(3024),R.dither=C);P=X[0];oa=X[1];if(P!==kb[0]||oa!==kb[1])T.blendEquationSeparate(P,oa),kb[0]=P,kb[1]=oa;W=ja.depth_func;W!==R.depth_func&&(T.depthFunc(W),R.depth_func=W);ca=xc[0];fa=xc[1];if(ca!==sd[0]||fa!==sd[1])T.depthRange(ca,fa),sd[0]=ca,sd[1]=fa;Aa=ja.depth_mask;Aa!==R.depth_mask&&(T.depthMask(Aa),R.depth_mask=Aa);cc=Wb[0];Oe=Wb[1];$e=Wb[2];Xe=Wb[3];if(cc!==oc[0]||Oe!==oc[1]||$e!==
oc[2]||Xe!==oc[3])T.colorMask(cc,Oe,$e,Xe),oc[0]=cc,oc[1]=Oe,oc[2]=$e,oc[3]=Xe;xd=ja.cull_enable;xd!==R.cull_enable&&(xd?T.enable(2884):T.disable(2884),R.cull_enable=xd);Ee=ja.cull_face;Ee!==R.cull_face&&(T.cullFace(Ee),R.cull_face=Ee);Vd=ja.frontFace;Vd!==R.frontFace&&(T.frontFace(Vd),R.frontFace=Vd);Wd=ja.lineWidth;Wd!==R.lineWidth&&(T.lineWidth(Wd),R.lineWidth=Wd);le=ja.polygonOffset_enable;le!==R.polygonOffset_enable&&(le?T.enable(32823):T.disable(32823),R.polygonOffset_enable=le);Ke=Fc[0];yd=
Fc[1];if(Ke!==aa[0]||yd!==aa[1])T.polygonOffset(Ke,yd),aa[0]=Ke,aa[1]=yd;kd=ja.sample_alpha;kd!==R.sample_alpha&&(kd?T.enable(32926):T.disable(32926),R.sample_alpha=kd);Cd=ja.sample_enable;Cd!==R.sample_enable&&(Cd?T.enable(32928):T.disable(32928),R.sample_enable=Cd);od=M[0];cd=M[1];if(od!==ka[0]||cd!==ka[1])T.sampleCoverage(od,cd),ka[0]=od,ka[1]=cd;Vc=ja.stencil_mask;Vc!==R.stencil_mask&&(T.stencilMask(Vc),R.stencil_mask=Vc);vd=ab[0];ed=ab[1];Nc=ab[2];if(vd!==ad[0]||ed!==ad[1]||Nc!==ad[2])T.stencilFunc(vd,
ed,Nc),ad[0]=vd,ad[1]=ed,ad[2]=Nc;sc=ia[0];bb=ia[1];Kc=ia[2];Eb=ia[3];if(sc!==ua[0]||bb!==ua[1]||Kc!==ua[2]||Eb!==ua[3])T.stencilOpSeparate(sc,bb,Kc,Eb),ua[0]=sc,ua[1]=bb,ua[2]=Kc,ua[3]=Eb;rc=F[0];Sa=F[1];Lc=F[2];dc=F[3];if(rc!==D[0]||Sa!==D[1]||Lc!==D[2]||dc!==D[3])T.stencilOpSeparate(rc,Sa,Lc,dc),D[0]=rc,D[1]=Sa,D[2]=Lc,D[3]=dc;pc=ja.scissor_enable;pc!==R.scissor_enable&&(pc?T.enable(3089):T.disable(3089),R.scissor_enable=pc);Ld=Da[0];qd=Da[1];Ac=Da[2];Zb=Da[3];if(Ld!==vb[0]||qd!==vb[1]||Ac!==vb[2]||
Zb!==vb[3])T.scissor(Ld,qd,Ac,Zb),vb[0]=Ld,vb[1]=qd,vb[2]=Ac,vb[3]=Zb}d=this.viewport;h=d.x|0;f=d.y|0;g="width"in d?d.width|0:N.framebufferWidth-h;l="height"in d?d.height|0:N.framebufferHeight-f;n=N.viewportWidth;N.viewportWidth=g;q=N.viewportHeight;N.viewportHeight=l;T.viewport(h,f,g,l);ha[0]=h;ha[1]=f;ha[2]=g;ha[3]=l;T.blendColor(0,0,0,1);Ga[0]=0;Ga[1]=0;Ga[2]=0;Ga[3]=1;T.enable(3042);R.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;T.disable(2929);R.depth_enable=
!1;T.disable(2960);R.stencil_enable=!1;if(B=R.profile)w=performance.now(),c.count+=b;T.useProgram(S.program);p=Yb.angle_instanced_arrays;var Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb;La.setVAO(null);A.buffer=this.sizeBuffer;Gc=!1;Sc=null;Ma=0;Fb=!1;ra=Wa=0;td=1;Ib=0;Ta=5126;Rb=uc=eb=qc=0;y(A)?(Gc=!0,Sc=K.createStream(34962,A),Ta=
Sc.dtype):(Sc=K.getBuffer(A))?Ta=Sc.dtype:"constant"in A?(td=2,"number"===typeof A.constant?(eb=A.constant,uc=Rb=qc=0):(eb=0<A.constant.length?A.constant[0]:0,uc=1<A.constant.length?A.constant[1]:0,Rb=2<A.constant.length?A.constant[2]:0,qc=3<A.constant.length?A.constant[3]:0)):(Sc=y(A.buffer)?K.createStream(34962,A.buffer):K.getBuffer(A.buffer),Ta="type"in A?qa[A.type]:Sc.dtype,Fb=!!A.normalized,ra=A.size|0,Wa=A.offset|0,Ib=A.stride|0,Ma=A.divisor|0);Td=Oa.location;kc=Y[Td];if(1===td){kc.buffer||
T.enableVertexAttribArray(Td);Sb=ra||1;if(kc.type!==Ta||kc.size!==Sb||kc.buffer!==Sc||kc.normalized!==Fb||kc.offset!==Wa||kc.stride!==Ib)T.bindBuffer(34962,Sc.buffer),T.vertexAttribPointer(Td,Sb,Ta,Fb,Ib,Wa),kc.type=Ta,kc.size=Sb,kc.buffer=Sc,kc.normalized=Fb,kc.offset=Wa,kc.stride=Ib;kc.divisor!==Ma&&(p.vertexAttribDivisorANGLE(Td,Ma),kc.divisor=Ma)}else if(kc.buffer&&(T.disableVertexAttribArray(Td),kc.buffer=null),kc.x!==eb||kc.y!==uc||kc.z!==Rb||kc.w!==qc)T.vertexAttrib4f(Td,eb,uc,Rb,qc),kc.x=
eb,kc.y=uc,kc.z=Rb,kc.w=qc;G.buffer=this.sizeBuffer;r=!1;Tb=null;Na=0;pb=!1;ib=wb=0;Pa=1;md=0;$b=5126;Hc=mc=fb=Dd=0;y(G)?(r=!0,Tb=K.createStream(34962,G),$b=Tb.dtype):(Tb=K.getBuffer(G))?$b=Tb.dtype:"constant"in G?(Pa=2,"number"===typeof G.constant?(fb=G.constant,mc=Hc=Dd=0):(fb=0<G.constant.length?G.constant[0]:0,mc=1<G.constant.length?G.constant[1]:0,Hc=2<G.constant.length?G.constant[2]:0,Dd=3<G.constant.length?G.constant[3]:0)):(Tb=y(G.buffer)?K.createStream(34962,G.buffer):K.getBuffer(G.buffer),
$b="type"in G?qa[G.type]:Tb.dtype,pb=!!G.normalized,ib=G.size|0,wb=G.offset|0,md=G.stride|0,Na=G.divisor|0);fc=H.location;lb=Y[fc];if(1===Pa){lb.buffer||T.enableVertexAttribArray(fc);mb=ib||1;if(lb.type!==$b||lb.size!==mb||lb.buffer!==Tb||lb.normalized!==pb||lb.offset!==wb||lb.stride!==md)T.bindBuffer(34962,Tb.buffer),T.vertexAttribPointer(fc,mb,$b,pb,md,wb),lb.type=$b,lb.size=mb,lb.buffer=Tb,lb.normalized=pb,lb.offset=wb,lb.stride=md;lb.divisor!==Na&&(p.vertexAttribDivisorANGLE(fc,Na),lb.divisor=
Na)}else if(lb.buffer&&(T.disableVertexAttribArray(fc),lb.buffer=null),lb.x!==fb||lb.y!==mc||lb.z!==Hc||lb.w!==Dd)T.vertexAttrib4f(fc,fb,mc,Hc,Dd),lb.x=fb,lb.y=mc,lb.z=Hc,lb.w=Dd;ta=this.charBuffer;qb=!1;va=null;Ua=0;cb=!1;gb=ya=0;Ia=1;Cb=0;Bb=5126;Za=Jb=Mc=Ra=0;y(ta)?(qb=!0,va=K.createStream(34962,ta),Bb=va.dtype):(va=K.getBuffer(ta))?Bb=va.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(Mc=ta.constant,Jb=Za=Ra=0):(Mc=0<ta.constant.length?ta.constant[0]:0,Jb=1<ta.constant.length?ta.constant[1]:
0,Za=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?ta.constant[3]:0)):(va=y(ta.buffer)?K.createStream(34962,ta.buffer):K.getBuffer(ta.buffer),Bb="type"in ta?qa[ta.type]:va.dtype,cb=!!ta.normalized,gb=ta.size|0,ya=ta.offset|0,Cb=ta.stride|0,Ua=ta.divisor|0);Ub=ma.location;wa=Y[Ub];if(1===Ia){wa.buffer||T.enableVertexAttribArray(Ub);he=gb||1;if(wa.type!==Bb||wa.size!==he||wa.buffer!==va||wa.normalized!==cb||wa.offset!==ya||wa.stride!==Cb)T.bindBuffer(34962,va.buffer),T.vertexAttribPointer(Ub,
he,Bb,cb,Cb,ya),wa.type=Bb,wa.size=he,wa.buffer=va,wa.normalized=cb,wa.offset=ya,wa.stride=Cb;wa.divisor!==Ua&&(p.vertexAttribDivisorANGLE(Ub,Ua),wa.divisor=Ua)}else if(wa.buffer&&(T.disableVertexAttribArray(Ub),wa.buffer=null),wa.x!==Mc||wa.y!==Jb||wa.z!==Za||wa.w!==Ra)T.vertexAttrib4f(Ub,Mc,Jb,Za,Ra),wa.x=Mc,wa.y=Jb,wa.z=Za,wa.w=Ra;Ja=this.position;Ob=!1;hb=null;jb=0;xa=!1;Ca=gc=0;rb=1;sb=0;Xa=5126;vc=Ic=nc=Ya=0;y(Ja)?(Ob=!0,hb=K.createStream(34962,Ja),Xa=hb.dtype):(hb=K.getBuffer(Ja))?Xa=hb.dtype:
"constant"in Ja?(rb=2,"number"===typeof Ja.constant?(nc=Ja.constant,Ic=vc=Ya=0):(nc=0<Ja.constant.length?Ja.constant[0]:0,Ic=1<Ja.constant.length?Ja.constant[1]:0,vc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(hb=y(Ja.buffer)?K.createStream(34962,Ja.buffer):K.getBuffer(Ja.buffer),Xa="type"in Ja?qa[Ja.type]:hb.dtype,xa=!!Ja.normalized,Ca=Ja.size|0,gc=Ja.offset|0,sb=Ja.stride|0,jb=Ja.divisor|0);Va=la.location;Lb=Y[Va];if(1===rb){Lb.buffer||T.enableVertexAttribArray(Va);
Zc=Ca||2;if(Lb.type!==Xa||Lb.size!==Zc||Lb.buffer!==hb||Lb.normalized!==xa||Lb.offset!==gc||Lb.stride!==sb)T.bindBuffer(34962,hb.buffer),T.vertexAttribPointer(Va,Zc,Xa,xa,sb,gc),Lb.type=Xa,Lb.size=Zc,Lb.buffer=hb,Lb.normalized=xa,Lb.offset=gc,Lb.stride=sb;Lb.divisor!==jb&&(p.vertexAttribDivisorANGLE(Va,jb),Lb.divisor=jb)}else if(Lb.buffer&&(T.disableVertexAttribArray(Va),Lb.buffer=null),Lb.x!==nc||Lb.y!==Ic||Lb.z!==vc||Lb.w!==Ya)T.vertexAttrib4f(Va,nc,Ic,vc,Ya),Lb.x=nc,Lb.y=Ic,Lb.z=vc,Lb.w=Ya;Ea=
this.viewportArray;T.uniform4f(na.location,Ea[0],Ea[1],Ea[2],Ea[3]);yc=this.scale;T.uniform2f(ub.location,yc[0],yc[1]);Qa=this.translate;T.uniform2f(bc.location,Qa[0],Qa[1]);(za=pa.elements)?T.bindBuffer(34963,za.buffer.buffer):La.currentVAO&&(za=O.getElements(La.currentVAO.elements))&&T.bindBuffer(34963,za.buffer.buffer);nb=pa.instances;for(z=0;z<b;++z){u=a[z];var xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,nf,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc,wd;xb=I.call(this,N,u,
z);z&&Db===xb||(Db=xb,T.uniform1f(Z.location,xb));tb=J.call(this,N,u,z);z&&wc===tb||(wc=tb,T.uniform1f(L.location,tb));yb=u.align;z&&id===yb||(id=yb,T.uniform1f(k.location,yb));tc=u.baseline;z&&Md===tc||(Md=tc,T.uniform1f(E.location,tc));Oc=u.color;ld=Oc[0];Xb=Oc[1];Pb=Oc[2];ac=Oc[3];z&&fd===ld&&ec===Xb&&Fa===Pb&&ob===ac||(fd=ld,ec=Xb,Fa=Pb,ob=ac,T.uniform4f(m.location,ld,Xb,Pb,ac));zb=Ka.call(this,N,u,z);Mb=zb[0];hc=zb[1];z&&Qb===Mb&&jc===hc||(Qb=Mb,jc=hc,T.uniform2f(ba.location,Mb,hc));nf=v.call(this,
N,u,z);Bc=nf[0];Dc=nf[1];z&&Cc===Bc&&Pc===Dc||(Cc=Bc,Pc=Dc,T.uniform2f(Q.location,Bc,Dc));$c=u.positionOffset;Tc=$c[0];Kb=$c[1];z&&Qc===Tc&&Gb===Kb||(Qc=Tc,Gb=Kb,T.uniform2f(Vb.location,Tc,Kb));Rc=u.opacity;z&&Jc===Rc||(Jc=Rc,T.uniform1f(U.location,Rc));(Uc=x.call(this,N,u,z))&&"framebuffer"===Uc._reglType&&(Uc=Uc.color[0]);ic=Uc._texture;T.uniform1i(da.location,ic.bind());Xc=u.offset;if(wd=u.count)0<nb?za?p.drawElementsInstancedANGLE(0,wd,za.type,Xc<<(za.type-5121>>1),nb):p.drawArraysInstancedANGLE(0,
Xc,wd,nb):0>nb&&(za?T.drawElements(0,wd,za.type,Xc<<(za.type-5121>>1)):T.drawArrays(0,Xc,wd)),ic.unbind()}Gc&&K.destroyStream(Sc);r&&K.destroyStream(Tb);qb&&K.destroyStream(va);Ob&&K.destroyStream(hb);R.dirty=!0;La.setVAO(null);N.viewportWidth=n;N.viewportHeight=q;B&&(c.cpuTime+=performance.now()-w)},draw:function(a){var h,l,q,B,w,v,p,z,u,x,C,P,J,S,oa,W,I,ca,fa,Aa,Ka,Nb,cc,$e,Xe,xd,Ee,Vd,Wd,le,Ke,yd,kd,Cd,od,cd,Vc,vd,ed,Nc,sc,bb,Kc,Eb,rc,Sa,Lc,dc,pc,Ld,qd,Ac,Zb,Gc,Sc,Ma,Fb,Wa,ra,td,Ib,Ta,qc,eb,uc,
Rb,Td,kc,Sb,r,Tb,Na,pb,wb,ib,Pa,md,$b,Dd,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb;h=$a.next;h!==$a.cur&&(h?T.bindFramebuffer(36160,h.framebuffer):T.bindFramebuffer(36160,null),$a.cur=h);if(R.dirty){var Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc;Ia=ja.dither;Ia!==R.dither&&(Ia?T.enable(3024):T.disable(3024),R.dither=Ia);Cb=X[0];Bb=X[1];if(Cb!==kb[0]||Bb!==kb[1])T.blendEquationSeparate(Cb,Bb),kb[0]=Cb,kb[1]=Bb;Ra=ja.depth_func;
Ra!==R.depth_func&&(T.depthFunc(Ra),R.depth_func=Ra);Mc=xc[0];Jb=xc[1];if(Mc!==sd[0]||Jb!==sd[1])T.depthRange(Mc,Jb),sd[0]=Mc,sd[1]=Jb;Za=ja.depth_mask;Za!==R.depth_mask&&(T.depthMask(Za),R.depth_mask=Za);Ub=Wb[0];wa=Wb[1];he=Wb[2];Ja=Wb[3];if(Ub!==oc[0]||wa!==oc[1]||he!==oc[2]||Ja!==oc[3])T.colorMask(Ub,wa,he,Ja),oc[0]=Ub,oc[1]=wa,oc[2]=he,oc[3]=Ja;Ob=ja.cull_enable;Ob!==R.cull_enable&&(Ob?T.enable(2884):T.disable(2884),R.cull_enable=Ob);hb=ja.cull_face;hb!==R.cull_face&&(T.cullFace(hb),R.cull_face=
hb);jb=ja.frontFace;jb!==R.frontFace&&(T.frontFace(jb),R.frontFace=jb);xa=ja.lineWidth;xa!==R.lineWidth&&(T.lineWidth(xa),R.lineWidth=xa);gc=ja.polygonOffset_enable;gc!==R.polygonOffset_enable&&(gc?T.enable(32823):T.disable(32823),R.polygonOffset_enable=gc);Ca=Fc[0];rb=Fc[1];if(Ca!==aa[0]||rb!==aa[1])T.polygonOffset(Ca,rb),aa[0]=Ca,aa[1]=rb;sb=ja.sample_alpha;sb!==R.sample_alpha&&(sb?T.enable(32926):T.disable(32926),R.sample_alpha=sb);Xa=ja.sample_enable;Xa!==R.sample_enable&&(Xa?T.enable(32928):
T.disable(32928),R.sample_enable=Xa);Ya=M[0];nc=M[1];if(Ya!==ka[0]||nc!==ka[1])T.sampleCoverage(Ya,nc),ka[0]=Ya,ka[1]=nc;Ic=ja.stencil_mask;Ic!==R.stencil_mask&&(T.stencilMask(Ic),R.stencil_mask=Ic);vc=ab[0];Va=ab[1];Lb=ab[2];if(vc!==ad[0]||Va!==ad[1]||Lb!==ad[2])T.stencilFunc(vc,Va,Lb),ad[0]=vc,ad[1]=Va,ad[2]=Lb;Zc=ia[0];Ea=ia[1];yc=ia[2];Qa=ia[3];if(Zc!==ua[0]||Ea!==ua[1]||yc!==ua[2]||Qa!==ua[3])T.stencilOpSeparate(Zc,Ea,yc,Qa),ua[0]=Zc,ua[1]=Ea,ua[2]=yc,ua[3]=Qa;za=F[0];nb=F[1];xb=F[2];Db=F[3];
if(za!==D[0]||nb!==D[1]||xb!==D[2]||Db!==D[3])T.stencilOpSeparate(za,nb,xb,Db),D[0]=za,D[1]=nb,D[2]=xb,D[3]=Db;tb=ja.scissor_enable;tb!==R.scissor_enable&&(tb?T.enable(3089):T.disable(3089),R.scissor_enable=tb);wc=Da[0];yb=Da[1];id=Da[2];tc=Da[3];if(wc!==vb[0]||yb!==vb[1]||id!==vb[2]||tc!==vb[3])T.scissor(wc,yb,id,tc),vb[0]=wc,vb[1]=yb,vb[2]=id,vb[3]=tc}l=this.viewport;q=l.x|0;B=l.y|0;w="width"in l?l.width|0:N.framebufferWidth-q;v="height"in l?l.height|0:N.framebufferHeight-B;p=N.viewportWidth;N.viewportWidth=
w;z=N.viewportHeight;N.viewportHeight=v;T.viewport(q,B,w,v);ha[0]=q;ha[1]=B;ha[2]=w;ha[3]=v;T.blendColor(0,0,0,1);Ga[0]=0;Ga[1]=0;Ga[2]=0;Ga[3]=1;T.enable(3042);R.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;T.disable(2929);R.depth_enable=!1;T.disable(2960);R.stencil_enable=!1;if(u=R.profile)x=performance.now(),c.count++;T.useProgram(f.program);C=Yb.angle_instanced_arrays;La.setVAO(null);A.buffer=this.sizeBuffer;P=!1;J=null;S=0;oa=!1;I=W=0;ca=1;fa=0;Aa=
5126;$e=cc=Nb=Ka=0;y(A)?(P=!0,J=K.createStream(34962,A),Aa=J.dtype):(J=K.getBuffer(A))?Aa=J.dtype:"constant"in A?(ca=2,"number"===typeof A.constant?(Nb=A.constant,cc=$e=Ka=0):(Nb=0<A.constant.length?A.constant[0]:0,cc=1<A.constant.length?A.constant[1]:0,$e=2<A.constant.length?A.constant[2]:0,Ka=3<A.constant.length?A.constant[3]:0)):(J=y(A.buffer)?K.createStream(34962,A.buffer):K.getBuffer(A.buffer),Aa="type"in A?qa[A.type]:J.dtype,oa=!!A.normalized,I=A.size|0,W=A.offset|0,fa=A.stride|0,S=A.divisor|
0);Xe=Oa.location;xd=Y[Xe];if(1===ca){xd.buffer||T.enableVertexAttribArray(Xe);Ee=I||1;if(xd.type!==Aa||xd.size!==Ee||xd.buffer!==J||xd.normalized!==oa||xd.offset!==W||xd.stride!==fa)T.bindBuffer(34962,J.buffer),T.vertexAttribPointer(Xe,Ee,Aa,oa,fa,W),xd.type=Aa,xd.size=Ee,xd.buffer=J,xd.normalized=oa,xd.offset=W,xd.stride=fa;xd.divisor!==S&&(C.vertexAttribDivisorANGLE(Xe,S),xd.divisor=S)}else if(xd.buffer&&(T.disableVertexAttribArray(Xe),xd.buffer=null),xd.x!==Nb||xd.y!==cc||xd.z!==$e||xd.w!==Ka)T.vertexAttrib4f(Xe,
Nb,cc,$e,Ka),xd.x=Nb,xd.y=cc,xd.z=$e,xd.w=Ka;G.buffer=this.sizeBuffer;Vd=!1;Wd=null;le=0;Ke=!1;kd=yd=0;Cd=1;od=0;cd=5126;Nc=ed=vd=Vc=0;y(G)?(Vd=!0,Wd=K.createStream(34962,G),cd=Wd.dtype):(Wd=K.getBuffer(G))?cd=Wd.dtype:"constant"in G?(Cd=2,"number"===typeof G.constant?(vd=G.constant,ed=Nc=Vc=0):(vd=0<G.constant.length?G.constant[0]:0,ed=1<G.constant.length?G.constant[1]:0,Nc=2<G.constant.length?G.constant[2]:0,Vc=3<G.constant.length?G.constant[3]:0)):(Wd=y(G.buffer)?K.createStream(34962,G.buffer):
K.getBuffer(G.buffer),cd="type"in G?qa[G.type]:Wd.dtype,Ke=!!G.normalized,kd=G.size|0,yd=G.offset|0,od=G.stride|0,le=G.divisor|0);sc=H.location;bb=Y[sc];if(1===Cd){bb.buffer||T.enableVertexAttribArray(sc);Kc=kd||1;if(bb.type!==cd||bb.size!==Kc||bb.buffer!==Wd||bb.normalized!==Ke||bb.offset!==yd||bb.stride!==od)T.bindBuffer(34962,Wd.buffer),T.vertexAttribPointer(sc,Kc,cd,Ke,od,yd),bb.type=cd,bb.size=Kc,bb.buffer=Wd,bb.normalized=Ke,bb.offset=yd,bb.stride=od;bb.divisor!==le&&(C.vertexAttribDivisorANGLE(sc,
le),bb.divisor=le)}else if(bb.buffer&&(T.disableVertexAttribArray(sc),bb.buffer=null),bb.x!==vd||bb.y!==ed||bb.z!==Nc||bb.w!==Vc)T.vertexAttrib4f(sc,vd,ed,Nc,Vc),bb.x=vd,bb.y=ed,bb.z=Nc,bb.w=Vc;Eb=this.charBuffer;rc=!1;Sa=null;Lc=0;dc=!1;Ld=pc=0;qd=1;Ac=0;Zb=5126;Fb=Ma=Sc=Gc=0;y(Eb)?(rc=!0,Sa=K.createStream(34962,Eb),Zb=Sa.dtype):(Sa=K.getBuffer(Eb))?Zb=Sa.dtype:"constant"in Eb?(qd=2,"number"===typeof Eb.constant?(Sc=Eb.constant,Ma=Fb=Gc=0):(Sc=0<Eb.constant.length?Eb.constant[0]:0,Ma=1<Eb.constant.length?
Eb.constant[1]:0,Fb=2<Eb.constant.length?Eb.constant[2]:0,Gc=3<Eb.constant.length?Eb.constant[3]:0)):(Sa=y(Eb.buffer)?K.createStream(34962,Eb.buffer):K.getBuffer(Eb.buffer),Zb="type"in Eb?qa[Eb.type]:Sa.dtype,dc=!!Eb.normalized,Ld=Eb.size|0,pc=Eb.offset|0,Ac=Eb.stride|0,Lc=Eb.divisor|0);Wa=ma.location;ra=Y[Wa];if(1===qd){ra.buffer||T.enableVertexAttribArray(Wa);td=Ld||1;if(ra.type!==Zb||ra.size!==td||ra.buffer!==Sa||ra.normalized!==dc||ra.offset!==pc||ra.stride!==Ac)T.bindBuffer(34962,Sa.buffer),
T.vertexAttribPointer(Wa,td,Zb,dc,Ac,pc),ra.type=Zb,ra.size=td,ra.buffer=Sa,ra.normalized=dc,ra.offset=pc,ra.stride=Ac;ra.divisor!==Lc&&(C.vertexAttribDivisorANGLE(Wa,Lc),ra.divisor=Lc)}else if(ra.buffer&&(T.disableVertexAttribArray(Wa),ra.buffer=null),ra.x!==Sc||ra.y!==Ma||ra.z!==Fb||ra.w!==Gc)T.vertexAttrib4f(Wa,Sc,Ma,Fb,Gc),ra.x=Sc,ra.y=Ma,ra.z=Fb,ra.w=Gc;Ib=this.position;Ta=!1;qc=null;eb=0;uc=!1;Td=Rb=0;kc=1;Sb=0;r=5126;wb=pb=Na=Tb=0;y(Ib)?(Ta=!0,qc=K.createStream(34962,Ib),r=qc.dtype):(qc=K.getBuffer(Ib))?
r=qc.dtype:"constant"in Ib?(kc=2,"number"===typeof Ib.constant?(Na=Ib.constant,pb=wb=Tb=0):(Na=0<Ib.constant.length?Ib.constant[0]:0,pb=1<Ib.constant.length?Ib.constant[1]:0,wb=2<Ib.constant.length?Ib.constant[2]:0,Tb=3<Ib.constant.length?Ib.constant[3]:0)):(qc=y(Ib.buffer)?K.createStream(34962,Ib.buffer):K.getBuffer(Ib.buffer),r="type"in Ib?qa[Ib.type]:qc.dtype,uc=!!Ib.normalized,Td=Ib.size|0,Rb=Ib.offset|0,Sb=Ib.stride|0,eb=Ib.divisor|0);ib=la.location;Pa=Y[ib];if(1===kc){Pa.buffer||T.enableVertexAttribArray(ib);
md=Td||2;if(Pa.type!==r||Pa.size!==md||Pa.buffer!==qc||Pa.normalized!==uc||Pa.offset!==Rb||Pa.stride!==Sb)T.bindBuffer(34962,qc.buffer),T.vertexAttribPointer(ib,md,r,uc,Sb,Rb),Pa.type=r,Pa.size=md,Pa.buffer=qc,Pa.normalized=uc,Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==eb&&(C.vertexAttribDivisorANGLE(ib,eb),Pa.divisor=eb)}else if(Pa.buffer&&(T.disableVertexAttribArray(ib),Pa.buffer=null),Pa.x!==Na||Pa.y!==pb||Pa.z!==wb||Pa.w!==Tb)T.vertexAttrib4f(ib,Na,pb,wb,Tb),Pa.x=Na,Pa.y=pb,Pa.z=wb,Pa.w=Tb;$b=g.call(this,
N,a,0);T.uniform1f(Z.location,$b);Dd=d.call(this,N,a,0);T.uniform1f(L.location,Dd);T.uniform1f(k.location,a.align);T.uniform1f(E.location,a.baseline);fb=this.viewportArray;T.uniform4f(na.location,fb[0],fb[1],fb[2],fb[3]);mc=a.color;T.uniform4f(m.location,mc[0],mc[1],mc[2],mc[3]);Hc=b.call(this,N,a,0);T.uniform2f(ba.location,Hc[0],Hc[1]);fc=n.call(this,N,a,0);T.uniform2f(Q.location,fc[0],fc[1]);lb=this.scale;T.uniform2f(ub.location,lb[0],lb[1]);mb=this.translate;T.uniform2f(bc.location,mb[0],mb[1]);
ta=a.positionOffset;T.uniform2f(Vb.location,ta[0],ta[1]);T.uniform1f(U.location,a.opacity);(qb=e.call(this,N,a,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);va=qb._texture;T.uniform1i(da.location,va.bind());(Ua=pa.elements)?T.bindBuffer(34963,Ua.buffer.buffer):La.currentVAO&&(Ua=O.getElements(La.currentVAO.elements))&&T.bindBuffer(34963,Ua.buffer.buffer);cb=a.offset;if(ya=a.count)gb=pa.instances,0<gb?Ua?C.drawElementsInstancedANGLE(0,ya,Ua.type,cb<<(Ua.type-5121>>1),gb):C.drawArraysInstancedANGLE(0,
cb,ya,gb):0>gb&&(Ua?T.drawElements(0,ya,Ua.type,cb<<(Ua.type-5121>>1)):T.drawArrays(0,cb,ya)),R.dirty=!0,La.setVAO(null),N.viewportWidth=p,N.viewportHeight=z,u&&(c.cpuTime+=performance.now()-x),P&&K.destroyStream(J),Vd&&K.destroyStream(Wd),rc&&K.destroyStream(Sa),Ta&&K.destroyStream(qc),va.unbind()},scope:function(a,b,e){var d,f,g,k,n,m,v,x,D,E,F,J,H,M,L,S,O,Q,aa,I,T,U,X,Y,ba,ha,Z,da,ia,ka,ua,la,ma,na,sa,Ka,Da,Ga,Nb,La,Oa,ab,$a,Sa,Fc,vb,kb,ub,sd,Vb,Zb,Yb,bc,Ma,Fb,Wa,ra,Wb,Ib,Ta,qc,eb,uc,Rb,oc,kc,
Sb,r,Tb,Na,pb,wb,ib,Pa,xc,$b,ad,fb,mc,Hc,fc,lb,mb,ta,qb,va,Ua,cb,ya,gb,Ia,Cb,Bb,Ra,Mc,Jb,Za,Ub,wa,he,Ja,Ob,hb,jb,xa,gc,Ca,rb,sb,Xa,Ya,nc,Ic,vc,Va,Lb,Zc,Ea,yc,Qa,za,nb,xb,Db,tb,wc,yb,id,tc,Md,Oc,ld,fd,Xb,ec,Pb,Fa,ac,ob,zb,Mb,Qb,hc,jc,nf,Bc,Cc,Dc,Pc,$c,Tc,Qc,Kb,Gb,Rc,Jc,Uc,ic,Xc;d=this.viewport;f=d.x|0;g=d.y|0;k="width"in d?d.width|0:N.framebufferWidth-f;n="height"in d?d.height|0:N.framebufferHeight-g;m=N.viewportWidth;N.viewportWidth=k;v=N.viewportHeight;N.viewportHeight=n;x=W[0];W[0]=f;D=W[1];W[1]=
g;E=W[2];W[2]=k;F=W[3];W[3]=n;J=cc[0];cc[0]=0;H=cc[1];cc[1]=0;M=cc[2];cc[2]=0;L=cc[3];cc[3]=1;S=ja.blend_enable;ja.blend_enable=!0;O=fa[0];fa[0]=770;Q=fa[1];fa[1]=771;aa=fa[2];fa[2]=773;I=fa[3];fa[3]=1;T=ja.depth_enable;ja.depth_enable=!1;U=ja.stencil_enable;ja.stencil_enable=!1;if(X=R.profile)Y=performance.now(),c.count++;ba=a.offset;ha=pa.offset;pa.offset=ba;Z=a.count;da=pa.count;pa.count=Z;ia=pa.primitive;pa.primitive=0;ka=a.align;ua=Aa[64];Aa[64]=ka;la=h.call(this,N,a,e);ma=Aa[69];Aa[69]=la;na=
q.call(this,N,a,e);sa=Aa[67];Aa[67]=na;Ka=B.call(this,N,a,e);Da=Aa[66];Aa[66]=Ka;Ga=a.baseline;Nb=Aa[65];Aa[65]=Ga;La=l.call(this,N,a,e);Oa=Aa[62];Aa[62]=La;ab=a.color;$a=Aa[14];Aa[14]=ab;Sa=w.call(this,N,a,e);Fc=Aa[63];Aa[63]=Sa;vb=a.opacity;kb=Aa[10];Aa[10]=vb;ub=a.positionOffset;sd=Aa[68];Aa[68]=ub;Vb=this.scale;Zb=Aa[6];Aa[6]=Vb;Yb=this.translate;bc=Aa[8];Aa[8]=Yb;Ma=this.viewportArray;Fb=Aa[3];Aa[3]=Ma;Wa=this.charBuffer;ra=!1;Wb=null;Ib=0;Ta=!1;eb=qc=0;uc=1;Rb=0;oc=5126;Tb=r=Sb=kc=0;y(Wa)?(ra=
!0,Wb=K.createStream(34962,Wa),oc=Wb.dtype):(Wb=K.getBuffer(Wa))?oc=Wb.dtype:"constant"in Wa?(uc=2,"number"===typeof Wa.constant?(Sb=Wa.constant,r=Tb=kc=0):(Sb=0<Wa.constant.length?Wa.constant[0]:0,r=1<Wa.constant.length?Wa.constant[1]:0,Tb=2<Wa.constant.length?Wa.constant[2]:0,kc=3<Wa.constant.length?Wa.constant[3]:0)):(Wb=y(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),oc="type"in Wa?qa[Wa.type]:Wb.dtype,Ta=!!Wa.normalized,eb=Wa.size|0,qc=Wa.offset|0,Rb=Wa.stride|0,Ib=Wa.divisor|
0);Na=p.buffer;p.buffer=Wb;pb=p.divisor;p.divisor=Ib;wb=p.normalized;p.normalized=Ta;ib=p.offset;p.offset=qc;Pa=p.size;p.size=eb;xc=p.state;p.state=uc;$b=p.stride;p.stride=Rb;ad=p.type;p.type=oc;fb=p.w;p.w=kc;mc=p.x;p.x=Sb;Hc=p.y;p.y=r;fc=p.z;p.z=Tb;G.buffer=this.sizeBuffer;lb=!1;mb=null;ta=0;qb=!1;Ua=va=0;cb=1;ya=0;gb=5126;Ra=Bb=Cb=Ia=0;y(G)?(lb=!0,mb=K.createStream(34962,G),gb=mb.dtype):(mb=K.getBuffer(G))?gb=mb.dtype:"constant"in G?(cb=2,"number"===typeof G.constant?(Cb=G.constant,Bb=Ra=Ia=0):
(Cb=0<G.constant.length?G.constant[0]:0,Bb=1<G.constant.length?G.constant[1]:0,Ra=2<G.constant.length?G.constant[2]:0,Ia=3<G.constant.length?G.constant[3]:0)):(mb=y(G.buffer)?K.createStream(34962,G.buffer):K.getBuffer(G.buffer),gb="type"in G?qa[G.type]:mb.dtype,qb=!!G.normalized,Ua=G.size|0,va=G.offset|0,ya=G.stride|0,ta=G.divisor|0);Mc=z.buffer;z.buffer=mb;Jb=z.divisor;z.divisor=ta;Za=z.normalized;z.normalized=qb;Ub=z.offset;z.offset=va;wa=z.size;z.size=Ua;he=z.state;z.state=cb;Ja=z.stride;z.stride=
ya;Ob=z.type;z.type=gb;hb=z.w;z.w=Ia;jb=z.x;z.x=Cb;xa=z.y;z.y=Bb;gc=z.z;z.z=Ra;Ca=this.position;rb=!1;sb=null;Xa=0;Ya=!1;Ic=nc=0;vc=1;Va=0;Lb=5126;Qa=yc=Ea=Zc=0;y(Ca)?(rb=!0,sb=K.createStream(34962,Ca),Lb=sb.dtype):(sb=K.getBuffer(Ca))?Lb=sb.dtype:"constant"in Ca?(vc=2,"number"===typeof Ca.constant?(Ea=Ca.constant,yc=Qa=Zc=0):(Ea=0<Ca.constant.length?Ca.constant[0]:0,yc=1<Ca.constant.length?Ca.constant[1]:0,Qa=2<Ca.constant.length?Ca.constant[2]:0,Zc=3<Ca.constant.length?Ca.constant[3]:0)):(sb=y(Ca.buffer)?
K.createStream(34962,Ca.buffer):K.getBuffer(Ca.buffer),Lb="type"in Ca?qa[Ca.type]:sb.dtype,Ya=!!Ca.normalized,Ic=Ca.size|0,nc=Ca.offset|0,Va=Ca.stride|0,Xa=Ca.divisor|0);za=u.buffer;u.buffer=sb;nb=u.divisor;u.divisor=Xa;xb=u.normalized;u.normalized=Ya;Db=u.offset;u.offset=nc;tb=u.size;u.size=Ic;wc=u.state;u.state=vc;yb=u.stride;u.stride=Va;id=u.type;u.type=Lb;tc=u.w;u.w=Zc;Md=u.x;u.x=Ea;Oc=u.y;u.y=yc;ld=u.z;u.z=Qa;A.buffer=this.sizeBuffer;fd=!1;Xb=null;ec=0;Pb=!1;ac=Fa=0;ob=1;zb=0;Mb=5126;nf=jc=hc=
Qb=0;y(A)?(fd=!0,Xb=K.createStream(34962,A),Mb=Xb.dtype):(Xb=K.getBuffer(A))?Mb=Xb.dtype:"constant"in A?(ob=2,"number"===typeof A.constant?(hc=A.constant,jc=nf=Qb=0):(hc=0<A.constant.length?A.constant[0]:0,jc=1<A.constant.length?A.constant[1]:0,nf=2<A.constant.length?A.constant[2]:0,Qb=3<A.constant.length?A.constant[3]:0)):(Xb=y(A.buffer)?K.createStream(34962,A.buffer):K.getBuffer(A.buffer),Mb="type"in A?qa[A.type]:Xb.dtype,Pb=!!A.normalized,ac=A.size|0,Fa=A.offset|0,zb=A.stride|0,ec=A.divisor|0);
Bc=C.buffer;C.buffer=Xb;Cc=C.divisor;C.divisor=ec;Dc=C.normalized;C.normalized=Pb;Pc=C.offset;C.offset=Fa;$c=C.size;C.size=ac;Tc=C.state;C.state=ob;Qc=C.stride;C.stride=zb;Kb=C.type;C.type=Mb;Gb=C.w;C.w=Qb;Rc=C.x;C.x=hc;Jc=C.y;C.y=jc;Uc=C.z;C.z=nf;ic=ca.vert;ca.vert=61;Xc=ca.frag;ca.frag=60;R.dirty=!0;b(N,a,e);N.viewportWidth=m;N.viewportHeight=v;W[0]=x;W[1]=D;W[2]=E;W[3]=F;cc[0]=J;cc[1]=H;cc[2]=M;cc[3]=L;ja.blend_enable=S;fa[0]=O;fa[1]=Q;fa[2]=aa;fa[3]=I;ja.depth_enable=T;ja.stencil_enable=U;X&&
(c.cpuTime+=performance.now()-Y);pa.offset=ha;pa.count=da;pa.primitive=ia;Aa[64]=ua;Aa[69]=ma;Aa[67]=sa;Aa[66]=Da;Aa[65]=Nb;Aa[62]=Oa;Aa[14]=$a;Aa[63]=Fc;Aa[10]=kb;Aa[68]=sd;Aa[6]=Zb;Aa[8]=bc;Aa[3]=Fb;ra&&K.destroyStream(Wb);p.buffer=Na;p.divisor=pb;p.normalized=wb;p.offset=ib;p.size=Pa;p.state=xc;p.stride=$b;p.type=ad;p.w=fb;p.x=mc;p.y=Hc;p.z=fc;lb&&K.destroyStream(mb);z.buffer=Mc;z.divisor=Jb;z.normalized=Za;z.offset=Ub;z.size=wa;z.state=he;z.stride=Ja;z.type=Ob;z.w=hb;z.x=jb;z.y=xa;z.z=gc;rb&&
K.destroyStream(sb);u.buffer=za;u.divisor=nb;u.normalized=xb;u.offset=Db;u.size=tb;u.state=wc;u.stride=yb;u.type=id;u.w=tc;u.x=Md;u.y=Oc;u.z=ld;fd&&K.destroyStream(Xb);C.buffer=Bc;C.divisor=Cc;C.normalized=Dc;C.offset=Pc;C.size=$c;C.state=Tc;C.stride=Qc;C.type=Kb;C.w=Gb;C.x=Rc;C.y=Jc;C.z=Uc;ca.vert=ic;ca.frag=Xc;R.dirty=!0}}}}},{}],25:[function(p,u,I){var a=p("./sorted-object-keys");u.exports=function(c,f){for(var g=a(f),d=0;d<g.length;++d)c[g[d]]=f[g[d]];return c}},{"./sorted-object-keys":34}],26:[function(p,
u,I){function a(a,c,b,f,e,h){for(var q=0;q<c;++q)for(var B=a[q],l=0;l<b;++l)for(var w=B[l],p=0;p<f;++p)e[h++]=w[p]}function c(f,d,b,n,e){for(var h=1,q=b+1;q<d.length;++q)h*=d[q];var B=d[b];if(4===d.length-b){var l=d[b+1],w=d[b+2];d=d[b+3];for(q=0;q<B;++q)a(f[q],l,w,d,n,e),e+=h}else for(q=0;q<B;++q)c(f[q],d,b+1,n,e),e+=h}var f=p("./pool");u.exports={shape:function(a){for(var c=[];a.length;a=a[0])c.push(a.length);return c},flatten:function(g,d,b,n){var e=1;if(d.length)for(var h=0;h<d.length;++h)e*=
d[h];else e=0;b=n||f.allocType(b,e);switch(d.length){case 0:break;case 1:n=d[0];for(d=0;d<n;++d)b[d]=g[d];break;case 2:n=d[0];d=d[1];for(h=e=0;h<n;++h)for(var q=g[h],B=0;B<d;++B)b[e++]=q[B];break;case 3:a(g,d[0],d[1],d[2],b,0);break;default:c(g,d,0,b,0)}return b}}},{"./pool":32}],27:[function(p,u,I){var a=p("./is-typed-array");u.exports=function(c){return Array.isArray(c)||a(c)}},{"./is-typed-array":30}],28:[function(p,u,I){var a=p("./is-typed-array");u.exports=function(c){return!!c&&"object"===typeof c&&
Array.isArray(c.shape)&&Array.isArray(c.stride)&&"number"===typeof c.offset&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||a(c.data))}},{"./is-typed-array":30}],29:[function(p,u,I){u.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(p,u,I){u.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof
Uint8ClampedArray}},{}],31:[function(p,u,I){u.exports=function(a,c){for(var f=Array(a),g=0;g<a;++g)f[g]=c(g);return f}},{}],32:[function(p,u,I){function a(a){var c,b;c=(65535<a)<<4;a>>>=c;b=(255<a)<<3;a>>>=b;c|=b;b=(15<a)<<2;a>>>=b;c|=b;b=(3<a)<<1;return c|b|a>>>b>>1}function c(){function c(d){a:{for(var e=16;268435456>=e;e*=16)if(d<=e){d=e;break a}d=0}e=b[a(d)>>2];return 0<e.length?e.pop():new ArrayBuffer(d)}function d(c){b[a(c.byteLength)>>2].push(c)}var b=f(8,function(){return[]});return{alloc:c,
free:d,allocType:function(a,b){var d=null;switch(a){case 5120:d=new Int8Array(c(b),0,b);break;case 5121:d=new Uint8Array(c(b),0,b);break;case 5122:d=new Int16Array(c(2*b),0,b);break;case 5123:d=new Uint16Array(c(2*b),0,b);break;case 5124:d=new Int32Array(c(4*b),0,b);break;case 5125:d=new Uint32Array(c(4*b),0,b);break;case 5126:d=new Float32Array(c(4*b),0,b);break;default:return null}return d.length!==b?d.subarray(0,b):d},freeType:function(a){d(a.buffer)}}}var f=p("./loop");p=c();p.zero=c();u.exports=
p},{"./loop":31}],33:[function(p,u,I){u.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(p,u,I){u.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(p,u,I){var a=p("./pool"),c=new Float32Array(1),f=new Uint32Array(c.buffer);u.exports=function(g){for(var d=a.allocType(5123,
g.length),b=0;b<g.length;++b)if(isNaN(g[b]))d[b]=65535;else if(Infinity===g[b])d[b]=31744;else if(-Infinity===g[b])d[b]=64512;else{c[0]=g[b];var n=f[0],e=n>>>31<<15,h=(n<<1>>>24)-127,n=n>>13&1023;d[b]=-24>h?e:-14>h?e+(n+1024>>-14-h):15<h?e+31744:e+(h+15<<10)+n}return d}},{"./pool":32}],36:[function(p,u,I){var a=p("./sorted-object-keys");u.exports=function(c){return a(c).map(function(a){return c[a]})}},{"./sorted-object-keys":34}],37:[function(p,u,I){function a(a,c,d){function f(){var b=window.innerWidth,
c=window.innerHeight;a!==document.body&&(c=g.getBoundingClientRect(),b=c.right-c.left,c=c.bottom-c.top);g.width=d*b;g.height=d*c}var g=document.createElement("canvas");b(g.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(g);a===document.body&&(g.style.position="absolute",b(a.style,{margin:0,padding:0}));var l;a!==document.body&&"function"===typeof ResizeObserver?(l=new ResizeObserver(function(){setTimeout(f)}),l.observe(a)):window.addEventListener("resize",
f,!1);f();return{canvas:g,onDestroy:function(){l?l.disconnect():window.removeEventListener("resize",f);a.removeChild(g)}}}function c(a,b){function c(d){try{return a.getContext(d,b)}catch(h){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function f(a){if("string"===typeof a)return a.split();d(Array.isArray(a),"invalid extension array");return a}function g(a){return"string"===typeof a?(d("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):
a}var d=p("./util/check"),b=p("./util/extend");u.exports=function(b){var e=b||{},h,q,B,l;b={};var w=[],p=[],z="undefined"===typeof window?1:window.devicePixelRatio,u=!1,C=function(a){a&&d.raise(a)},S=function(){};"string"===typeof e?(d("undefined"!==typeof document,"selector queries only supported in DOM environments"),h=document.querySelector(e),d(h,"invalid query string for element")):"object"===typeof e?"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&"function"===typeof e.getBoundingClientRect?
h=e:"function"===typeof e.drawArrays||"function"===typeof e.drawElements?(l=e,B=l.canvas):(d.constructor(e),"gl"in e?l=e.gl:"canvas"in e?B=g(e.canvas):"container"in e&&(q=g(e.container)),"attributes"in e&&(b=e.attributes,d.type(b,"object","invalid context attributes")),"extensions"in e&&(w=f(e.extensions)),"optionalExtensions"in e&&(p=f(e.optionalExtensions)),"onDone"in e&&(d.type(e.onDone,"function","invalid or missing onDone callback"),C=e.onDone),"profile"in e&&(u=!!e.profile),"pixelRatio"in e&&
(z=+e.pixelRatio,d(0<z,"invalid pixel ratio"))):d.raise("invalid arguments to regl");h&&("canvas"===h.nodeName.toLowerCase()?B=h:q=h);if(!l){if(!B){d("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");h=a(q||document.body,C,z);if(!h)return null;B=h.canvas;S=h.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);l=c(B,b)}return l?{gl:l,canvas:B,container:q,extensions:w,optionalExtensions:p,pixelRatio:z,profile:u,onDone:C,onDestroy:S}:(S(),
C("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(p,u,I){},{}],39:[function(p,u,I){u.exports=function(a,c){var f=c[0],g=c[1],d=c[2],b=c[3],n=c[4],e=c[5],h=c[6],q=c[7],B=c[8],l=c[9],w=c[10],p=c[11],z=c[12],u=c[13],C=c[14],S=c[15];a[0]=e*(w*S-p*C)-l*(h*S-q*C)+u*(h*p-q*w);a[1]=-(g*(w*S-p*C)-l*(d*S-b*C)+u*(d*p-b*w));a[2]=g*(h*S-q*C)-e*(d*S-b*C)+u*(d*q-b*h);a[3]=-(g*(h*p-q*w)-e*(d*p-b*w)+l*(d*q-b*h));
a[4]=-(n*(w*S-p*C)-B*(h*S-q*C)+z*(h*p-q*w));a[5]=f*(w*S-p*C)-B*(d*S-b*C)+z*(d*p-b*w);a[6]=-(f*(h*S-q*C)-n*(d*S-b*C)+z*(d*q-b*h));a[7]=f*(h*p-q*w)-n*(d*p-b*w)+B*(d*q-b*h);a[8]=n*(l*S-p*u)-B*(e*S-q*u)+z*(e*p-q*l);a[9]=-(f*(l*S-p*u)-B*(g*S-b*u)+z*(g*p-b*l));a[10]=f*(e*S-q*u)-n*(g*S-b*u)+z*(g*q-b*e);a[11]=-(f*(e*p-q*l)-n*(g*p-b*l)+B*(g*q-b*e));a[12]=-(n*(l*C-w*u)-B*(e*C-h*u)+z*(e*w-h*l));a[13]=f*(l*C-w*u)-B*(g*C-d*u)+z*(g*w-d*l);a[14]=-(f*(e*C-h*u)-n*(g*C-d*u)+z*(g*h-d*e));a[15]=f*(e*w-h*l)-n*(g*w-d*
l)+B*(g*h-d*e);return a}},{}],40:[function(p,u,I){u.exports=function(a){var c=new Float32Array(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c}},{}],41:[function(p,u,I){u.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];
return a}},{}],42:[function(p,u,I){u.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],43:[function(p,u,I){u.exports=function(a){var c=a[0],f=a[1],g=a[2],d=a[3],b=a[4],n=a[5],e=a[6],h=a[7],q=a[8],B=a[9],l=a[10],p=a[11],u=a[12],z=a[13],I=a[14];a=a[15];return(c*n-f*b)*(l*a-p*I)-(c*e-g*b)*(B*a-p*z)+(c*h-d*b)*(B*I-l*z)+(f*e-g*n)*(q*a-p*u)-(f*h-d*n)*(q*I-l*u)+(g*h-d*e)*(q*z-
B*u)}},{}],44:[function(p,u,I){u.exports=function(a,c){var f=c[0],g=c[1],d=c[2],b=c[3],n=f+f,e=g+g,h=d+d,f=f*n,q=g*n,g=g*e,B=d*n,l=d*e,d=d*h,n=b*n,e=b*e,b=b*h;a[0]=1-g-d;a[1]=q+b;a[2]=B-e;a[3]=0;a[4]=q-b;a[5]=1-f-d;a[6]=l+n;a[7]=0;a[8]=B+e;a[9]=l-n;a[10]=1-f-g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],45:[function(p,u,I){u.exports=function(a,c,f){var g,d,b=f[0],n=f[1];f=f[2];g=Math.sqrt(b*b+n*n+f*f);if(1E-6>Math.abs(g))return null;g=1/g;b*=g;n*=g;f*=g;g=Math.sin(c);c=Math.cos(c);d=1-
c;a[0]=b*b*d+c;a[1]=n*b*d+f*g;a[2]=f*b*d-n*g;a[3]=0;a[4]=b*n*d-f*g;a[5]=n*n*d+c;a[6]=f*n*d+b*g;a[7]=0;a[8]=b*f*d+n*g;a[9]=n*f*d-b*g;a[10]=f*f*d+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],46:[function(p,u,I){u.exports=function(a,c,f){var g=c[0],d=c[1],b=c[2],n=c[3],e=g+g,h=d+d,q=b+b;c=g*e;var B=g*h,g=g*q,l=d*h,d=d*q,b=b*q,e=n*e,h=n*h,n=n*q;a[0]=1-(l+b);a[1]=B+n;a[2]=g-h;a[3]=0;a[4]=B-n;a[5]=1-(c+b);a[6]=d+e;a[7]=0;a[8]=g+h;a[9]=d-e;a[10]=1-(c+l);a[11]=0;a[12]=f[0];a[13]=f[1];a[14]=f[2];
a[15]=1;return a}},{}],47:[function(p,u,I){u.exports=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(p,u,I){u.exports=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}},{}],49:[function(p,u,I){u.exports=function(a,c){var f=Math.sin(c),g=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=
0;a[5]=g;a[6]=f;a[7]=0;a[8]=0;a[9]=-f;a[10]=g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(p,u,I){u.exports=function(a,c){var f=Math.sin(c),g=Math.cos(c);a[0]=g;a[1]=0;a[2]=-f;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=f;a[9]=0;a[10]=g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(p,u,I){u.exports=function(a,c){var f=Math.sin(c),g=Math.cos(c);a[0]=g;a[1]=f;a[2]=0;a[3]=0;a[4]=-f;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=
1;return a}},{}],52:[function(p,u,I){u.exports=function(a,c,f,g,d,b,n){var e=1/(f-c),h=1/(d-g),q=1/(b-n);a[0]=2*b*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*b*h;a[6]=0;a[7]=0;a[8]=(f+c)*e;a[9]=(d+g)*h;a[10]=(n+b)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=n*b*2*q;a[15]=0;return a}},{}],53:[function(p,u,I){u.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],54:[function(p,u,I){u.exports={create:p("./create"),clone:p("./clone"),
copy:p("./copy"),identity:p("./identity"),transpose:p("./transpose"),invert:p("./invert"),adjoint:p("./adjoint"),determinant:p("./determinant"),multiply:p("./multiply"),translate:p("./translate"),scale:p("./scale"),rotate:p("./rotate"),rotateX:p("./rotateX"),rotateY:p("./rotateY"),rotateZ:p("./rotateZ"),fromRotation:p("./fromRotation"),fromRotationTranslation:p("./fromRotationTranslation"),fromScaling:p("./fromScaling"),fromTranslation:p("./fromTranslation"),fromXRotation:p("./fromXRotation"),fromYRotation:p("./fromYRotation"),
fromZRotation:p("./fromZRotation"),fromQuat:p("./fromQuat"),frustum:p("./frustum"),perspective:p("./perspective"),perspectiveFromFieldOfView:p("./perspectiveFromFieldOfView"),ortho:p("./ortho"),lookAt:p("./lookAt"),str:p("./str")}},{"./adjoint":39,"./clone":40,"./copy":41,"./create":42,"./determinant":43,"./fromQuat":44,"./fromRotation":45,"./fromRotationTranslation":46,"./fromScaling":47,"./fromTranslation":48,"./fromXRotation":49,"./fromYRotation":50,"./fromZRotation":51,"./frustum":52,"./identity":53,
"./invert":55,"./lookAt":56,"./multiply":57,"./ortho":58,"./perspective":59,"./perspectiveFromFieldOfView":60,"./rotate":61,"./rotateX":62,"./rotateY":63,"./rotateZ":64,"./scale":65,"./str":66,"./translate":67,"./transpose":68}],55:[function(p,u,I){u.exports=function(a,c){var f=c[0],g=c[1],d=c[2],b=c[3],n=c[4],e=c[5],h=c[6],q=c[7],B=c[8],l=c[9],p=c[10],u=c[11],z=c[12],I=c[13],C=c[14],S=c[15],Nb=f*e-g*n,J=f*h-d*n,Ka=f*q-b*n,v=g*h-d*e,x=g*q-b*e,k=d*q-b*h,da=B*I-l*z,Q=B*C-p*z,ba=B*S-u*z,E=l*C-p*I,ma=
l*S-u*I,H=p*S-u*C,Z=Nb*H-J*ma+Ka*E+v*ba-x*Q+k*da;if(!Z)return null;Z=1/Z;a[0]=(e*H-h*ma+q*E)*Z;a[1]=(d*ma-g*H-b*E)*Z;a[2]=(I*k-C*x+S*v)*Z;a[3]=(p*x-l*k-u*v)*Z;a[4]=(h*ba-n*H-q*Q)*Z;a[5]=(f*H-d*ba+b*Q)*Z;a[6]=(C*Ka-z*k-S*J)*Z;a[7]=(B*k-p*Ka+u*J)*Z;a[8]=(n*ma-e*ba+q*da)*Z;a[9]=(g*ba-f*ma-b*da)*Z;a[10]=(z*x-I*Ka+S*Nb)*Z;a[11]=(l*Ka-B*x-u*Nb)*Z;a[12]=(e*Q-n*E-h*da)*Z;a[13]=(f*E-g*Q+d*da)*Z;a[14]=(I*J-z*v-C*Nb)*Z;a[15]=(B*v-l*J+p*Nb)*Z;return a}},{}],56:[function(p,u,I){var a=p("./identity");u.exports=
function(c,f,g,d){var b,n,e,h,q,p,l,w,u=f[0],z=f[1];f=f[2];e=d[0];h=d[1];n=d[2];l=g[0];d=g[1];b=g[2];if(1E-6>Math.abs(u-l)&&1E-6>Math.abs(z-d)&&1E-6>Math.abs(f-b))return a(c);g=u-l;d=z-d;l=f-b;w=1/Math.sqrt(g*g+d*d+l*l);g*=w;d*=w;l*=w;b=h*l-n*d;n=n*g-e*l;e=e*d-h*g;(w=Math.sqrt(b*b+n*n+e*e))?(w=1/w,b*=w,n*=w,e*=w):e=n=b=0;h=d*e-l*n;q=l*b-g*e;p=g*n-d*b;(w=Math.sqrt(h*h+q*q+p*p))?(w=1/w,h*=w,q*=w,p*=w):p=q=h=0;c[0]=b;c[1]=h;c[2]=g;c[3]=0;c[4]=n;c[5]=q;c[6]=d;c[7]=0;c[8]=e;c[9]=p;c[10]=l;c[11]=0;c[12]=
-(b*u+n*z+e*f);c[13]=-(h*u+q*z+p*f);c[14]=-(g*u+d*z+l*f);c[15]=1;return c}},{"./identity":53}],57:[function(p,u,I){u.exports=function(a,c,f){var g=c[0],d=c[1],b=c[2],n=c[3],e=c[4],h=c[5],q=c[6],p=c[7],l=c[8],w=c[9],u=c[10],z=c[11],I=c[12],C=c[13],S=c[14];c=c[15];var Nb=f[0],J=f[1],Ka=f[2],v=f[3];a[0]=Nb*g+J*e+Ka*l+v*I;a[1]=Nb*d+J*h+Ka*w+v*C;a[2]=Nb*b+J*q+Ka*u+v*S;a[3]=Nb*n+J*p+Ka*z+v*c;Nb=f[4];J=f[5];Ka=f[6];v=f[7];a[4]=Nb*g+J*e+Ka*l+v*I;a[5]=Nb*d+J*h+Ka*w+v*C;a[6]=Nb*b+J*q+Ka*u+v*S;a[7]=Nb*n+J*p+
Ka*z+v*c;Nb=f[8];J=f[9];Ka=f[10];v=f[11];a[8]=Nb*g+J*e+Ka*l+v*I;a[9]=Nb*d+J*h+Ka*w+v*C;a[10]=Nb*b+J*q+Ka*u+v*S;a[11]=Nb*n+J*p+Ka*z+v*c;Nb=f[12];J=f[13];Ka=f[14];v=f[15];a[12]=Nb*g+J*e+Ka*l+v*I;a[13]=Nb*d+J*h+Ka*w+v*C;a[14]=Nb*b+J*q+Ka*u+v*S;a[15]=Nb*n+J*p+Ka*z+v*c;return a}},{}],58:[function(p,u,I){u.exports=function(a,c,f,g,d,b,n){var e=1/(c-f),h=1/(g-d),q=1/(b-n);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(c+f)*e;a[13]=(d+g)*h;a[14]=(n+b)*
q;a[15]=1;return a}},{}],59:[function(p,u,I){u.exports=function(a,c,f,g,d){c=1/Math.tan(c/2);var b=1/(g-d);a[0]=c/f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+g)*b;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*g*b;a[15]=0;return a}},{}],60:[function(p,u,I){u.exports=function(a,c,f,g){var d=Math.tan(c.upDegrees*Math.PI/180),b=Math.tan(c.downDegrees*Math.PI/180),n=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var e=2/(n+c),h=2/(d+b);a[0]=e;a[1]=0;a[2]=
0;a[3]=0;a[4]=0;a[5]=h;a[6]=0;a[7]=0;a[8]=-((n-c)*e*.5);a[9]=(d-b)*h*.5;a[10]=g/(f-g);a[11]=-1;a[12]=0;a[13]=0;a[14]=g*f/(f-g);a[15]=0;return a}},{}],61:[function(p,u,I){u.exports=function(a,c,f,g){var d=g[0],b=g[1];g=g[2];var n=Math.sqrt(d*d+b*b+g*g),e,h,q,p,l,w,u,z,I,C,S,Nb,J,Ka,v,x,k,da,Q,ba;if(1E-6>Math.abs(n))return null;n=1/n;d*=n;b*=n;g*=n;e=Math.sin(f);h=Math.cos(f);q=1-h;f=c[0];n=c[1];p=c[2];l=c[3];w=c[4];u=c[5];z=c[6];I=c[7];C=c[8];S=c[9];Nb=c[10];J=c[11];Ka=d*d*q+h;v=b*d*q+g*e;x=g*d*q-
b*e;k=d*b*q-g*e;da=b*b*q+h;Q=g*b*q+d*e;ba=d*g*q+b*e;d=b*g*q-d*e;b=g*g*q+h;a[0]=f*Ka+w*v+C*x;a[1]=n*Ka+u*v+S*x;a[2]=p*Ka+z*v+Nb*x;a[3]=l*Ka+I*v+J*x;a[4]=f*k+w*da+C*Q;a[5]=n*k+u*da+S*Q;a[6]=p*k+z*da+Nb*Q;a[7]=l*k+I*da+J*Q;a[8]=f*ba+w*d+C*b;a[9]=n*ba+u*d+S*b;a[10]=p*ba+z*d+Nb*b;a[11]=l*ba+I*d+J*b;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a}},{}],62:[function(p,u,I){u.exports=function(a,c,f){var g=Math.sin(f);f=Math.cos(f);var d=c[4],b=c[5],n=c[6],e=c[7],h=c[8],q=c[9],p=c[10],l=
c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=d*f+h*g;a[5]=b*f+q*g;a[6]=n*f+p*g;a[7]=e*f+l*g;a[8]=h*f-d*g;a[9]=q*f-b*g;a[10]=p*f-n*g;a[11]=l*f-e*g;return a}},{}],63:[function(p,u,I){u.exports=function(a,c,f){var g=Math.sin(f);f=Math.cos(f);var d=c[0],b=c[1],n=c[2],e=c[3],h=c[8],q=c[9],p=c[10],l=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*f-h*g;a[1]=b*f-q*g;a[2]=n*f-p*g;a[3]=
e*f-l*g;a[8]=d*g+h*f;a[9]=b*g+q*f;a[10]=n*g+p*f;a[11]=e*g+l*f;return a}},{}],64:[function(p,u,I){u.exports=function(a,c,f){var g=Math.sin(f);f=Math.cos(f);var d=c[0],b=c[1],n=c[2],e=c[3],h=c[4],q=c[5],p=c[6],l=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=d*f+h*g;a[1]=b*f+q*g;a[2]=n*f+p*g;a[3]=e*f+l*g;a[4]=h*f-d*g;a[5]=q*f-b*g;a[6]=p*f-n*g;a[7]=l*f-e*g;return a}},{}],65:[function(p,u,I){u.exports=function(a,c,f){var g=f[0],d=f[1];f=
f[2];a[0]=c[0]*g;a[1]=c[1]*g;a[2]=c[2]*g;a[3]=c[3]*g;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*f;a[9]=c[9]*f;a[10]=c[10]*f;a[11]=c[11]*f;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],66:[function(p,u,I){u.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],67:[function(p,u,I){u.exports=function(a,c,f){var g=f[0],d=
f[1];f=f[2];var b,n,e,h,q,p,l,w,u,z,I,C;c===a?(a[12]=c[0]*g+c[4]*d+c[8]*f+c[12],a[13]=c[1]*g+c[5]*d+c[9]*f+c[13],a[14]=c[2]*g+c[6]*d+c[10]*f+c[14],a[15]=c[3]*g+c[7]*d+c[11]*f+c[15]):(b=c[0],n=c[1],e=c[2],h=c[3],q=c[4],p=c[5],l=c[6],w=c[7],u=c[8],z=c[9],I=c[10],C=c[11],a[0]=b,a[1]=n,a[2]=e,a[3]=h,a[4]=q,a[5]=p,a[6]=l,a[7]=w,a[8]=u,a[9]=z,a[10]=I,a[11]=C,a[12]=b*g+q*d+u*f+c[12],a[13]=n*g+p*d+z*f+c[13],a[14]=e*g+l*d+I*f+c[14],a[15]=h*g+w*d+C*f+c[15]);return a}},{}],68:[function(p,u,I){u.exports=function(a,
c){if(a===c){var f=c[1],g=c[2],d=c[3],b=c[6],n=c[7],e=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=f;a[6]=c[9];a[7]=c[13];a[8]=g;a[9]=b;a[11]=c[14];a[12]=d;a[13]=n;a[14]=e}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a}},{}],69:[function(p,u,I){I=p("./lib/alea");var a=p("./lib/xor128"),c=p("./lib/xorwow"),f=p("./lib/xorshift7"),g=p("./lib/xor4096"),d=p("./lib/tychei");
p=p("./seedrandom");p.alea=I;p.xor128=a;p.xorwow=c;p.xorshift7=f;p.xor4096=g;p.tychei=d;u.exports=p},{"./lib/alea":70,"./lib/tychei":71,"./lib/xor128":72,"./lib/xor4096":73,"./lib/xorshift7":74,"./lib/xorwow":75,"./seedrandom":76}],70:[function(p,u,I){(function(a,c,f){function g(a){var b=this,c=n();b.next=function(){var a=2091639*b.s0+2.3283064365386963E-10*b.c;b.s0=b.s1;b.s1=b.s2;return b.s2=a-(b.c=a|0)};b.c=1;b.s0=c(" ");b.s1=c(" ");b.s2=c(" ");b.s0-=c(a);0>b.s0&&(b.s0+=1);b.s1-=c(a);0>b.s1&&(b.s1+=
1);b.s2-=c(a);0>b.s2&&(b.s2+=1);c=null}function d(a,b){b.c=a.c;b.s0=a.s0;b.s1=a.s1;b.s2=a.s2;return b}function b(a,b){var c=new g(a),f=b&&b.state,l=c.next;l.int32=function(){return 4294967296*c.next()|0};l["double"]=function(){return l()+1.1102230246251565E-16*(2097152*l()|0)};l.quick=l;f&&("object"==typeof f&&d(f,c),l.state=function(){return d(c,{})});return l}function n(){var a=4022871197;return function(b){b=b.toString();for(var c=0;c<b.length;c++){a+=b.charCodeAt(c);var d=.02519603282416938*a;
a=d>>>0;d-=a;d*=a;a=d>>>0;d-=a;a+=4294967296*d}return 2.3283064365386963E-10*(a>>>0)}}c&&c.exports?c.exports=b:f&&f.amd?f(function(){return b}):this.alea=b})(this,"object"==typeof u&&u,"function"==typeof define&&define)},{}],71:[function(p,u,I){(function(a,c,f){function g(a){var b=this,c="";b.next=function(){var a=b.b,c=b.c,d=b.d,f=b.a,a=a<<25^a>>>7^c,c=c-d|0,d=d<<24^d>>>8^f,f=f-a|0;b.b=a=a<<20^a>>>12^c;b.c=c=c-d|0;b.d=d<<16^c>>>16^f;return b.a=f-a|0};b.a=0;b.b=0;b.c=-1640531527;b.d=1367130551;a===
Math.floor(a)?(b.a=a/4294967296|0,b.b=a|0):c+=a;for(a=0;a<c.length+20;a++)b.b^=c.charCodeAt(a)|0,b.next()}function d(a,b){b.a=a.a;b.b=a.b;b.c=a.c;b.d=a.d;return b}function b(a,b){var c=new g(a),f=b&&b.state,p=function(){return(c.next()>>>0)/4294967296};p["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=c.next;p.quick=p;f&&("object"==typeof f&&d(f,c),p.state=function(){return d(c,{})});return p}c&&c.exports?c.exports=b:f&&f.amd?
f(function(){return b}):this.tychei=b})(this,"object"==typeof u&&u,"function"==typeof define&&define)},{}],72:[function(p,u,I){(function(a,c,f){function g(a){var b=this,c="";b.x=0;b.y=0;b.z=0;b.w=0;b.next=function(){var a=b.x^b.x<<11;b.x=b.y;b.y=b.z;b.z=b.w;return b.w=b.w^b.w>>>19^a^a>>>8};a===(a|0)?b.x=a:c+=a;for(a=0;a<c.length+64;a++)b.x^=c.charCodeAt(a)|0,b.next()}function d(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.w=a.w;return b}function b(a,b){var c=new g(a),f=b&&b.state,p=function(){return(c.next()>>>
0)/4294967296};p["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=c.next;p.quick=p;f&&("object"==typeof f&&d(f,c),p.state=function(){return d(c,{})});return p}c&&c.exports?c.exports=b:f&&f.amd?f(function(){return b}):this.xor128=b})(this,"object"==typeof u&&u,"function"==typeof define&&define)},{}],73:[function(p,u,I){(function(a,c,f){function g(a){var b=this;b.next=function(){var a=b.w,c=b.X,d=b.i,f,g;b.w=a=a+1640531527|0;g=c[d+
34&127];f=c[d=d+1&127];g^=g<<13;f^=f<<17;g=c[d]=g^g>>>15^f^f>>>12;b.i=d;return g+(a^a>>>16)|0};(function(a,b){var c,e,d,f,g,n=[],p=128;b===(b|0)?(e=b,b=null):(b+="\x00",e=0,p=Math.max(p,b.length));d=0;for(f=-32;f<p;++f)b&&(e^=b.charCodeAt((f+32)%b.length)),0===f&&(g=e),e^=e<<10,e^=e>>>15,e^=e<<4,e^=e>>>13,0<=f&&(g=g+1640531527|0,c=n[f&127]^=e+g,d=0==c?d+1:0);128<=d&&(n[(b&&b.length||0)&127]=-1);d=127;for(f=512;0<f;--f)e=n[d+34&127],c=n[d=d+1&127],e^=e<<13,c^=c<<17,e^=e>>>15,c^=c>>>12,n[d]=e^c;a.w=
g;a.X=n;a.i=d})(b,a)}function d(a,b){b.i=a.i;b.w=a.w;b.X=a.X.slice();return b}function b(a,b){null==a&&(a=+new Date);var c=new g(a),f=b&&b.state,p=function(){return(c.next()>>>0)/4294967296};p["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=c.next;p.quick=p;f&&(f.X&&d(f,c),p.state=function(){return d(c,{})});return p}c&&c.exports?c.exports=b:f&&f.amd?f(function(){return b}):this.xor4096=b})(this,"object"==typeof u&&u,"function"==
typeof define&&define)},{}],74:[function(p,u,I){(function(a,c,f){function g(a){var b=this;b.next=function(){var a=b.x,c=b.i,d,f;d=a[c];d^=d>>>7;f=d^d<<24;d=a[c+1&7];f=f^d^d>>>10;d=a[c+3&7];f=f^d^d>>>3;d=a[c+4&7];f=f^d^d<<7;d=a[c+7&7];d^=d<<13;f=f^d^d<<9;a[c]=f;b.i=c+1&7;return f};(function(a,b){var c,e=[];if(b===(b|0))e[0]=b;else for(b=""+b,c=0;c<b.length;++c)e[c&7]=e[c&7]<<15^b.charCodeAt(c)+e[c+1&7]<<13;for(;8>e.length;)e.push(0);for(c=0;8>c&&0===e[c];++c);8==c&&(e[7]=-1);a.x=e;a.i=0;for(c=256;0<
c;--c)a.next()})(b,a)}function d(a,b){b.x=a.x.slice();b.i=a.i;return b}function b(a,b){null==a&&(a=+new Date);var c=new g(a),f=b&&b.state,p=function(){return(c.next()>>>0)/4294967296};p["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=c.next;p.quick=p;f&&(f.x&&d(f,c),p.state=function(){return d(c,{})});return p}c&&c.exports?c.exports=b:f&&f.amd?f(function(){return b}):this.xorshift7=b})(this,"object"==typeof u&&u,"function"==typeof define&&
define)},{}],75:[function(p,u,I){(function(a,c,f){function g(a){var b=this,c="";b.next=function(){var a=b.x^b.x>>>2;b.x=b.y;b.y=b.z;b.z=b.w;b.w=b.v;return(b.d=b.d+362437|0)+(b.v=b.v^b.v<<4^a^a<<1)|0};b.x=0;b.y=0;b.z=0;b.w=0;b.v=0;a===(a|0)?b.x=a:c+=a;for(a=0;a<c.length+64;a++)b.x^=c.charCodeAt(a)|0,a==c.length&&(b.d=b.x<<10^b.x>>>4),b.next()}function d(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.w=a.w;b.v=a.v;b.d=a.d;return b}function b(a,b){var c=new g(a),f=b&&b.state,p=function(){return(c.next()>>>0)/4294967296};
p["double"]=function(){do var a=c.next()>>>11,b=(c.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};p.int32=c.next;p.quick=p;f&&("object"==typeof f&&d(f,c),p.state=function(){return d(c,{})});return p}c&&c.exports?c.exports=b:f&&f.amd?f(function(){return b}):this.xorwow=b})(this,"object"==typeof u&&u,"function"==typeof define&&define)},{}],76:[function(p,u,I){(function(a,c){function f(f,p,q){var u=[];p=1==p?{entropy:!0}:p||{};f=n(b(p.entropy?[f,h(a)]:null==f?e():f,3),u);var I=new g(u),
u=function(){for(var a=I.g(6),b=B,c=0;a<l;)a=256*(a+c),b*=256,c=I.g(1);for(;a>=w;)a/=2,b/=2,c>>>=1;return(a+c)/b};u.int32=function(){return I.g(4)|0};u.quick=function(){return I.g(4)/4294967296};u["double"]=u;n(h(I.S),a);return(p.pass||q||function(a,b,e,f){f&&(f.S&&d(f,I),a.state=function(){return d(I,{})});return e?(c.random=a,b):a})(u,f,"global"in p?p.global:this==c,p.state)}function g(a){var b,c=a.length,e=this,d=0,f=e.i=e.j=0,g=e.S=[];for(c||(a=[c++]);256>d;)g[d]=d++;for(d=0;256>d;d++)g[d]=g[f=
255&f+a[d%c]+(b=g[d])],g[f]=b;(e.g=function(a){for(var b,c=0,d=e.i,f=e.j,g=e.S;a--;)b=g[d=255&d+1],c=256*c+g[255&(g[d]=g[f=255&f+b])+(g[f]=b)];e.i=d;e.j=f;return c})(256)}function d(a,b){b.i=a.i;b.j=a.j;b.S=a.S.slice();return b}function b(a,c){var e=[],d=typeof a,f;if(c&&"object"==d)for(f in a)try{e.push(b(a[f],c-1))}catch(g){}return e.length?e:"string"==d?a:a+"\x00"}function n(a,b){for(var c=a+"",e,d=0;d<c.length;)b[255&d]=255&(e^=19*b[255&d])+c.charCodeAt(d++);return h(b)}function e(){try{var b;
I&&(b=I.randomBytes)?b=b(256):(b=new Uint8Array(256),(q.crypto||q.msCrypto).getRandomValues(b));return h(b)}catch(c){return b=q.navigator,[+new Date,q,b&&b.plugins,q.screen,h(a)]}}function h(a){return String.fromCharCode.apply(0,a)}var q=(0,eval)("this"),B=c.pow(256,6),l=c.pow(2,52),w=2*l,I;c.seedrandom=f;n(c.random(),a);if("object"==typeof u&&u.exports){u.exports=f;try{I=p("crypto")}catch(z){}}else"function"==typeof define&&define.amd&&define(function(){return f})})([],Math)},{crypto:38}],77:[function(p,
u,I){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var c=p("./lib/util/check"),f=p("./lib/util/extend"),g=p("./lib/dynamic"),d=p("./lib/util/raf"),b=p("./lib/util/clock"),n=p("./lib/strings"),e=p("./lib/webgl"),h=p("./lib/extension"),q=p("./lib/limits"),B=p("./lib/buffer"),l=p("./lib/elements"),w=p("./lib/texture"),P=p("./lib/renderbuffer"),z=p("./lib/framebuffer"),oa=p("./lib/attribute"),C=p("./lib/shader"),S=p("./lib/read"),Nb=p("./lib/core"),J=p("./lib/stats"),Ka=p("./lib/timer");
u.exports=function(p){function u(){if(0===kb.length)K&&K.update(),oc=null;else{oc=d.next(u);m();for(var a=kb.length-1;0<=a;--a){var b=kb[a];b&&b(O,null,0)}la.flush();K&&K.update()}}function k(){!oc&&0<kb.length&&(oc=d.next(u))}function I(){oc&&(d.cancel(u),oc=null)}function Q(a){a.preventDefault();ub=!0;I();fa.forEach(function(a){a()})}function ba(a){la.getError();ub=!1;bc.restore();ja.restore();$a.restore();ca.restore();Aa.restore();La.restore();y.restore();K&&K.restore();cc.procs.refresh();k();
sa.forEach(function(a){a()})}function E(a){function b(a,c){var e={},d={};Object.keys(a).forEach(function(b){var f=a[b];if(g.isDynamic(f))d[b]=g.unbox(f,b);else{if(c&&Array.isArray(f))for(var h=0;h<f.length;++h)if(g.isDynamic(f[h])){d[b]=g.unbox(f,b);return}e[b]=f}});return{dynamic:d,"static":e}}function e(a){for(;u.length<a;)u.push(null);return u}c(!!a,"invalid args to regl({...})");c.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),h=b(a.uniforms||{},!0),k=b(a.attributes||
{},!1);a=b(function(a){function b(a){if(a in c){var e=c[a];delete c[a];Object.keys(e).forEach(function(b){c[a+"."+b]=e[b]})}}var c=f({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var l={gpuTime:0,cpuTime:0,count:0},m=cc.compile(a,k,h,d,l),n=m.draw,
p=m.batch,q=m.scope,u=[];return f(function(a,b){var d;ub&&c.raise("context lost");if("function"===typeof a)return q.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)q.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)q.call(this,a[d],b,d);else return q.call(this,a,b,0);else if("number"===typeof a){if(0<a)return p.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return p.call(this,a,a.length)}else return n.call(this,a)},{stats:l,destroy:function(){m.destroy()}})}
function ma(a,b){var d=0;cc.procs.poll();var e=b.color;e&&(la.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),d|=16384);"depth"in b&&(la.clearDepth(+b.depth),d|=256);"stencil"in b&&(la.clearStencil(b.stencil|0),d|=1024);c(!!d,"called regl.clear with no buffer specified");la.clear(d)}function H(b){c.type(b,"function","regl.frame() callback must be a function");kb.push(b);k();return{cancel:function(){function d(){var b=a(kb,d);kb[b]=kb[kb.length-1];--kb.length;0>=kb.length&&I()}var e=a(kb,b);c(0<=e,
"cannot cancel a frame twice");kb[e]=d}}}function Z(){var a=Ga.viewport,b=Ga.scissor_box;a[0]=a[1]=b[0]=b[1]=0;O.viewportWidth=O.framebufferWidth=O.drawingBufferWidth=a[2]=b[2]=la.drawingBufferWidth;O.viewportHeight=O.framebufferHeight=O.drawingBufferHeight=a[3]=b[3]=la.drawingBufferHeight}function m(){O.tick+=1;O.time=U();Z();cc.procs.poll()}function L(){ca.refresh();Z();cc.procs.refresh();K&&K.update()}function U(){return(b()-N)/1E3}console.log("REGL args are:",p);p=e(p);console.log("REGL configs are:",
p);if(!p)return null;var la=p.gl,Vb=la.getContextAttributes(),ub=la.isContextLost(),bc=h(la,p);if(!bc)return null;var na=n(),Oa=J(),Y=bc.extensions,K=Ka(la,Y),N=b(),R=la.drawingBufferWidth,pa=la.drawingBufferHeight,O={tick:0,time:0,viewportWidth:R,viewportHeight:pa,framebufferWidth:R,framebufferHeight:pa,drawingBufferWidth:R,drawingBufferHeight:pa,pixelRatio:p.pixelRatio},R={elements:null,primitive:4,count:-1,offset:0,instances:-1},Yb=q(la,Y),$a=B(la,Oa,p,function(a){return y.destroyBuffer(a)}),T=
l(la,Y,$a,Oa),y=oa(la,Y,Yb,Oa,$a,T,R),ja=C(la,na,Oa,p),ca=w(la,Y,Yb,function(){cc.procs.poll()},O,Oa,p),Aa=P(la,Y,Yb,Oa,p),La=z(la,Y,Yb,ca,Aa,Oa),cc=Nb(la,na,Y,Yb,$a,T,ca,La,{},y,ja,R,O,K,p),na=S(la,La,cc.procs.poll,O,Vb,Y,Yb),Ga=cc.next,X=la.canvas,kb=[],fa=[],sa=[],Wb=[p.onDestroy],oc=null;X&&(X.addEventListener("webglcontextlost",Q,!1),X.addEventListener("webglcontextrestored",ba,!1));var xc=La.setFBO=E({framebuffer:g.define.call(null,1,"framebuffer")});L();Vb=f(E,{clear:function(a){c("object"===
typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)xc(f({framebuffer:a.framebuffer.faces[b]},a),ma);else xc(a,ma);else ma(null,a)},prop:g.define.bind(null,1),context:g.define.bind(null,2),"this":g.define.bind(null,3),draw:E({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return T.create(a,!1)},texture:ca.create2D,cube:ca.createCube,renderbuffer:Aa.create,framebuffer:La.create,
framebufferCube:La.createCube,vao:y.createVAO,attributes:Vb,frame:H,on:function(a,b){c.type(b,"function","listener callback must be a function");var d;switch(a){case "frame":return H(b);case "lost":d=fa;break;case "restore":d=sa;break;case "destroy":d=Wb;break;default:c.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(b);return{cancel:function(){for(var a=0;a<d.length;++a)if(d[a]===b){d[a]=d[d.length-1];d.pop();break}}}},limits:Yb,hasExtension:function(a){return 0<=Yb.extensions.indexOf(a.toLowerCase())},
read:na,destroy:function(){kb.length=0;I();X&&(X.removeEventListener("webglcontextlost",Q),X.removeEventListener("webglcontextrestored",ba));ja.clear();La.clear();Aa.clear();y.clear();ca.clear();T.clear();$a.clear();K&&K.clear();Wb.forEach(function(a){a()})},_gl:la,_refresh:L,poll:function(){m();K&&K.update()},now:U,stats:Oa});p.onDone(null,Vb);return Vb}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,
"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

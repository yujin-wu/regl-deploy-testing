<!DOCTYPE html>
      <html>
        <head>
          <title>example/feedback.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function X(ia,Fa,d){function K(g,k){if(!Fa[g]){if(!ia[g]){var m="function"==typeof require&&require;if(!k&&m)return m(g,!0);if(I)return I(g,!0);m=Error("Cannot find module '"+g+"'");throw m.code="MODULE_NOT_FOUND",m;}m=Fa[g]={exports:{}};ia[g][0].call(m.exports,function(b){return K(ia[g][1][b]||b)},m,m.exports,X,ia,Fa,d)}return Fa[g].exports}for(var I="function"==typeof require&&require,M=0;M<d.length;M++)K(d[M]);return K}return X})()({1:[function(X,ia,Fa){var d=X("../regl")(),K=X("mouse-change")(),
I=d.texture(),M=d({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform vec2 mouse;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    float dist = length(gl_FragCoord.xy - mouse);\n    gl_FragColor = vec4(0.98 * texture2D(texture,\n      uv + cos(t) * vec2(0.5 - uv.y, uv.x - 0.5) - sin(2.0 * t) * (uv - 0.5)).rgb, 1) +\n      exp(-0.01 * dist) * vec4(\n        1.0 + cos(2.0 * t),\n        1.0 + cos(2.0 * t + 1.5),\n        1.0 + cos(2.0 * t + 3.0),\n        0.0);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:I,mouse:function(g){var k=g.pixelRatio;return[K.x*k,g.viewportHeight-K.y*k]},t:function(g){return.01*g.tick}},count:3});d.frame(function(){d.clear({color:[0,0,0,1]});M();I({copy:!0})})},{"../regl":40,"mouse-change":38}],2:[function(X,ia,Fa){function d(){this.w=this.z=
this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var K=X("./util/sorted-object-keys"),I=X("./util/check"),M=X("./util/values"),g=X("./constants/dtypes.json"),k=X("./util/is-typed-array"),m=X("./util/is-ndarray"),b=X("./constants/primitives.json"),G="attributes elements offset count primitive instances".split(" ");ia.exports=function(B,L,W,u,A,w,Z){function r(h){if(h!==ba.currentVAO){var z=L.oes_vertex_array_object;h?z.bindVertexArrayOES(h.vao):
z.bindVertexArrayOES(null);ba.currentVAO=h}}function U(h){if(h!==ba.currentVAO){if(h)h.bindAttrs();else{for(var z=L.angle_instanced_arrays,b=0;b<C.length;++b){var e=C[b];e.buffer?(B.enableVertexAttribArray(b),e.buffer.bind(),B.vertexAttribPointer(b,e.size,e.type,e.normalized,e.stride,e.offfset),z&&e.divisor&&z.vertexAttribDivisorANGLE(b,e.divisor)):(B.disableVertexAttribArray(b),B.vertexAttrib4f(b,e.x,e.y,e.z,e.w))}Z.elements?B.bindBuffer(34963,Z.elements.buffer.buffer):B.bindBuffer(34963,null)}ba.currentVAO=
h}}function n(){M(f).forEach(function(b){b.destroy()})}function O(){this.id=++V;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=L.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;f[this.id]=this;this.buffers=[]}function ja(){L.oes_vertex_array_object&&M(f).forEach(function(b){b.refresh()})}var e=W.maxAttributes,C=Array(e);for(W=0;W<e;++W)C[W]=new d;var V=0,f={},ba={Record:d,scope:{},state:C,currentVAO:null,
targetVAO:null,restore:L.oes_vertex_array_object?ja:function(){},createVAO:function(h){function z(h){var C;if(Array.isArray(h))C=h,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{I("object"===typeof h,"invalid arguments for create vao");I("attributes"in h,"must specify attributes for vao");if(h.elements){var c=h.elements;f.ownsElements?("function"===typeof c&&"elements"===c._reglType?f.elements.destroy():f.elements(c),
f.ownsElements=!1):w.getElements(h.elements)?(f.elements=h.elements,f.ownsElements=!1):(f.elements=w.create(h.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;C=h.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in h&&(f.offset=h.offset|0);"count"in h&&(f.count=h.count|0);"instances"in h&&(f.instances=h.instances|0);"primitive"in h&&(I(h.primitive in b,"bad primitive type: "+
h.primitive),f.primitive=b[h.primitive]);I.optional(function(){for(var a=K(h),c=0;c<a.length;++c)I(0<=G.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+G)});I(Array.isArray(C),"attributes must be an array")}I(C.length<e,"too many attributes");I(0<C.length,"must specify at least one attribute");var c={},t=f.attributes;t.length=C.length;for(var a=0;a<C.length;++a){var n=C[a],y=t[a]=new d,V=n.data||n;if(Array.isArray(V)||k(V)||m(V)){var r;f.buffers[a]&&(r=f.buffers[a],k(V)&&r._buffer.byteLength>=
V.byteLength?r.subdata(V):(r.destroy(),f.buffers[a]=null));f.buffers[a]||(r=f.buffers[a]=A.create(n,34962,!1,!0));y.buffer=A.getBuffer(r);y.size=y.buffer.dimension|0;y.normalized=!1;y.type=y.buffer.dtype;y.offset=0;y.stride=0;y.divisor=0;y.state=1;c[a]=1}else A.getBuffer(n)?(y.buffer=A.getBuffer(n),y.size=y.buffer.dimension|0,y.normalized=!1,y.type=y.buffer.dtype,y.offset=0,y.stride=0,y.divisor=0,y.state=1):A.getBuffer(n.buffer)?(y.buffer=A.getBuffer(n.buffer),y.size=(+n.size||y.buffer.dimension)|
0,y.normalized=!!n.normalized||!1,"type"in n?(I.parameter(n.type,g,"invalid buffer type"),y.type=g[n.type]):y.type=y.buffer.dtype,y.offset=(n.offset||0)|0,y.stride=(n.stride||0)|0,y.divisor=(n.divisor||0)|0,y.state=1,I(1<=y.size&&4>=y.size,"size must be between 1 and 4"),I(0<=y.offset,"invalid offset"),I(0<=y.stride&&255>=y.stride,"stride must be between 0 and 255"),I(0<=y.divisor,"divisor must be positive"),I(!y.divisor||!!L.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):
"x"in n?(I(0<a,"first attribute must not be a constant"),y.x=+n.x||0,y.y=+n.y||0,y.z=+n.z||0,y.w=+n.w||0,y.state=2):I(!1,"invalid attribute spec for location "+a)}for(r=0;r<f.buffers.length;++r)!c[r]&&f.buffers[r]&&(f.buffers[r].destroy(),f.buffers[r]=null);f.refresh();return z}var f=new O;u.vaoCount+=1;z.destroy=function(){for(var h=0;h<f.buffers.length;++h)f.buffers[h]&&f.buffers[h].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};
z._vao=f;z._reglType="vao";return z(h)},getVAO:function(h){return"function"===typeof h&&h._vao?h._vao:null},destroyBuffer:function(h){for(var b=0;b<C.length;++b){var e=C[b];e.buffer===h&&(B.disableVertexAttribArray(b),e.buffer=null)}},setVAO:L.oes_vertex_array_object?r:U,clear:L.oes_vertex_array_object?n:function(){}};O.prototype.bindAttrs=function(){for(var h=L.angle_instanced_arrays,b=this.attributes,k=0;k<b.length;++k){var f=b[k];f.buffer?(B.enableVertexAttribArray(k),B.bindBuffer(34962,f.buffer.buffer),
B.vertexAttribPointer(k,f.size,f.type,f.normalized,f.stride,f.offset),h&&f.divisor&&h.vertexAttribDivisorANGLE(k,f.divisor)):(B.disableVertexAttribArray(k),B.vertexAttrib4f(k,f.x,f.y,f.z,f.w))}for(h=b.length;h<e;++h)B.disableVertexAttribArray(h);(h=w.getElements(this.elements))?B.bindBuffer(34963,h.buffer.buffer):B.bindBuffer(34963,null)};O.prototype.refresh=function(){var h=L.oes_vertex_array_object;h&&(h.bindVertexArrayOES(this.vao),this.bindAttrs(),ba.currentVAO=null,h.bindVertexArrayOES(null))};
O.prototype.destroy=function(){if(this.vao){var h=L.oes_vertex_array_object;this===ba.currentVAO&&(ba.currentVAO=null,h.bindVertexArrayOES(null));h.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);f[this.id]&&(delete f[this.id],--u.vaoCount)};return ba}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],
3:[function(X,ia,Fa){function d(b){return W[Object.prototype.toString.call(b)]|0}function K(b,k){for(var m=0;m<k.length;++m)b[m]=k[m]}function I(b,k,m,n,g,d,e){for(var C=0,V=0;V<m;++V)for(var f=0;f<n;++f)b[C++]=k[g*V+d*f+e]}var M=X("./util/sorted-object-keys"),g=X("./util/check"),k=X("./util/is-typed-array"),m=X("./util/is-ndarray"),b=X("./util/values"),G=X("./util/pool");Fa=X("./util/flatten");var B=Fa.flatten,L=Fa.shape,W=X("./constants/arraytypes.json"),u=X("./constants/dtypes.json"),A=X("./constants/usage.json"),
w=[];w[5120]=1;w[5122]=2;w[5124]=4;w[5121]=1;w[5123]=2;w[5125]=4;w[5126]=4;ia.exports=function(W,r,U,n){function O(b){this.id=V++;this.buffer=W.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;U.profile&&(this.stats={size:0})}function ja(b,e,k){b.byteLength=e.byteLength;W.bufferData(b.type,e,k)}function e(b,e,f,C,n,c){b.usage=f;if(Array.isArray(e)){if(b.dtype=C||5126,0<e.length)if(Array.isArray(e[0])){n=L(e);for(var t=C=1;t<n.length;++t)C*=
n[t];b.dimension=C;e=B(e,n,b.dtype);ja(b,e,f);c?b.persistentData=e:G.freeType(e)}else"number"===typeof e[0]?(b.dimension=n,n=G.allocType(b.dtype,e.length),K(n,e),ja(b,n,f),c?b.persistentData=n:G.freeType(n)):k(e[0])?(b.dimension=e[0].length,b.dtype=C||d(e[0])||5126,e=B(e,[e.length,e[0].length],b.dtype),ja(b,e,f),c?b.persistentData=e:G.freeType(e)):g.raise("invalid buffer data")}else if(k(e))b.dtype=C||d(e),b.dimension=n,ja(b,e,f),c&&(b.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(m(e)){n=
e.shape;var a=e.stride,t=e.offset,V=0,y=0,r=0,O=0;1===n.length?(V=n[0],y=1,r=a[0],O=0):2===n.length?(V=n[0],y=n[1],r=a[0],O=a[1]):g.raise("invalid shape");b.dtype=C||d(e.data)||5126;b.dimension=y;n=G.allocType(b.dtype,V*y);I(n,e.data,V,y,r,O,t);ja(b,n,f);c?b.persistentData=n:G.freeType(n)}else e instanceof ArrayBuffer?(b.dtype=5121,b.dimension=n,ja(b,e,f),c&&(b.persistentData=new Uint8Array(new Uint8Array(e)))):g.raise("invalid buffer data")}function C(b){r.bufferCount--;n(b);var e=b.buffer;g(e,"buffer must not be deleted already");
W.deleteBuffer(e);b.buffer=null;delete f[b.id]}var V=0,f={};O.prototype.bind=function(){W.bindBuffer(this.type,this.buffer)};O.prototype.destroy=function(){C(this)};var ba=[];U.profile&&(r.getTotalBufferSize=function(){var b=0;M(f).forEach(function(e){b+=f[e].stats.size});return b});return{create:function(b,z,n,V){function D(a){var c=35044,b=null,f=0,h=0,z=1;Array.isArray(a)||k(a)||m(a)||a instanceof ArrayBuffer?b=a:"number"===typeof a?f=a|0:a&&(g.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(g(null===b||Array.isArray(b)||k(b)||m(b),"invalid data for buffer"),b=a.data),"usage"in a&&(g.parameter(a.usage,A,"invalid buffer usage"),c=A[a.usage]),"type"in a&&(g.parameter(a.type,u,"invalid buffer type"),h=u[a.type]),"dimension"in a&&(g.type(a.dimension,"number","invalid dimension"),z=a.dimension|0),"length"in a&&(g.nni(f,"buffer length must be a nonnegative integer"),f=a.length|0));t.bind();b?e(t,b,c,h,z,V):(f&&W.bufferData(t.type,f,c),t.dtype=h||5121,t.usage=c,t.dimension=z,t.byteLength=
f);U.profile&&(t.stats.size=t.byteLength*w[t.dtype]);return D}function c(a,c){g(c+a.byteLength<=t.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+c+" to a buffer of size "+t.byteLength);W.bufferSubData(t.type,c,a)}r.bufferCount++;var t=new O(z);f[t.id]=t;n||D(b);D._reglType="buffer";D._buffer=t;D.subdata=function(a,b){var e=(b||0)|0,f;t.bind();if(k(a)||a instanceof ArrayBuffer)c(a,e);else if(Array.isArray(a)){if(0<a.length)if("number"===
typeof a[0]){var h=G.allocType(t.dtype,a.length);K(h,a);c(h,e);G.freeType(h)}else Array.isArray(a[0])||k(a[0])?(f=L(a),h=B(a,f,t.dtype),c(h,e),G.freeType(h)):g.raise("invalid buffer data")}else if(m(a)){f=a.shape;var z=a.stride,n=h=0,C=0,T=0;1===f.length?(h=f[0],n=1,C=z[0],T=0):2===f.length?(h=f[0],n=f[1],C=z[0],T=z[1]):g.raise("invalid shape");f=Array.isArray(a.data)?t.dtype:d(a.data);f=G.allocType(f,h*n);I(f,a.data,h,n,C,T,a.offset);c(f,e);G.freeType(f)}else g.raise("invalid data for buffer subdata");
return D};U.profile&&(D.stats=t.stats);D.destroy=function(){C(t)};return D},createStream:function(b,f){var k=ba.pop();k||(k=new O(b));k.bind();e(k,f,35040,0,1,!1);return k},destroyStream:function(b){ba.push(b)},clear:function(){b(f).forEach(C);ba.forEach(C)},getBuffer:function(b){return b&&b._buffer instanceof O?b._buffer:null},restore:function(){b(f).forEach(function(b){b.buffer=W.createBuffer();W.bindBuffer(b.type,b.buffer);W.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:e}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(X,ia,Fa){ia.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(X,ia,Fa){ia.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(X,ia,Fa){ia.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(X,ia,Fa){ia.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(X,ia,Fa){function d(b){return Array.isArray(b)||W(b)||
u(b)}function K(b){return b.sort(function(b,e){return"viewport"===b?-1:"viewport"===e?1:b<e?-1:1})}function I(b,e,k,f){this.thisDep=b;this.contextDep=e;this.propDep=k;this.append=f}function M(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function g(b){return new I(!1,!1,!1,b)}function k(b,e){var k=b.type;if(0===k)return k=b.data.length,new I(!0,1<=k,2<=k,e);if(4===k)return k=b.data,new I(k.thisDep,k.contextDep,k.propDep,e);if(5===k)return new I(!1,!1,!1,e);if(6===k){for(var f=k=!1,m=!1,c=0;c<
b.data.length;++c){var t=b.data[c];1===t.type?m=!0:2===t.type?f=!0:3===t.type?k=!0:0===t.type?(k=!0,t=t.data,1<=t&&(f=!0),2<=t&&(m=!0)):4===t.type&&(k=k||t.data.thisDep,f=f||t.data.contextDep,m=m||t.data.propDep)}return new I(k,f,m,e)}return new I(3===k,2===k,1===k,e)}var m=X("./util/sorted-object-keys"),b=X("./util/check"),G=X("./util/extend"),B=X("./util/codegen"),L=X("./util/loop"),W=X("./util/is-typed-array"),u=X("./util/is-ndarray"),A=X("./util/is-array-like"),w=X("./dynamic"),Z=X("./constants/primitives.json"),
r=X("./constants/dtypes.json"),U=["x","y","z","w"],n="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),O={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
ja="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),e={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,
always:519},C={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},V={frag:35632,vert:35633},f={cw:2304,ccw:2305},ba=new I(!1,!1,!1,function(){});ia.exports=function(h,z,u,E,D,c,t,a,W,y,na,Cc,Y,fa,P){function T(a){return a.replace(".","_")}function x(a,c,b){var e=T(a);ua.push(a);aa[e]=la[e]=!!b;Ia[e]=c}function l(a,c,b){var e=T(a);ua.push(a);Array.isArray(b)?(la[e]=b.slice(),aa[e]=b.slice()):la[e]=aa[e]=b;Ba[e]=c}function N(){var a=
B(),c=a.link,e=a.global;a.id=zd++;a.batchId="0";var l=c(mb),q=a.shared={props:"a0"};m(mb).forEach(function(a){q[a]=e.def(l,".",a)});b.optional(function(){a.CHECK=c(b);a.commandStr=b.guessCommand();a.command=c(a.commandStr);a.assert=function(a,b,e){a("if(!(",b,"))",this.CHECK,".commandRaise(",c(e),",",this.command,");")};ea.invalidBlendCombinations=ja});var v=a.next={},p=a.current={};m(Ba).forEach(function(a){Array.isArray(la[a])&&(v[a]=e.def(q.next,".",a),p[a]=e.def(q.current,".",a))});var k=a.constants=
{};m(ea).forEach(function(a){k[a]=e.def(JSON.stringify(ea[a]))});a.invoke=function(b,e){switch(e.type){case 0:var l=["this",q.context,q.props,a.batchId];return b.def(c(e.data),".call(",l.slice(0,Math.max(e.data.length+1,4)),")");case 1:return b.def(q.props,e.data);case 2:return b.def(q.context,e.data);case 3:return b.def("this",e.data);case 4:return e.data.append(a,b),e.data.ref;case 5:return e.data.toString();case 6:return e.data.map(function(c){return a.invoke(b,c)})}};a.attribCache={};var f={};
a.scopeAttrib=function(a){a=z.id(a);if(a in f)return f[a];var b=y.scope[a];b||(b=y.scope[a]=new sa);return f[a]=c(b)};return a}function Q(a){var c=a["static"];a=a.dynamic;var b;if("profile"in c){var e=!!c.profile;b=g(function(a,c){return e});b.enable=e}else if("profile"in a){var l=a.profile;b=k(l,function(a,c){return a.invoke(c,l)})}return b}function za(c,e){var l=c["static"],q=c.dynamic;if("framebuffer"in l){var v=l.framebuffer;return v?(v=a.getFramebuffer(v),b.command(v,"invalid framebuffer object"),
g(function(a,c){var b=a.link(v),e=a.shared;c.set(e.framebuffer,".next",b);e=e.context;c.set(e,".framebufferWidth",b+".width");c.set(e,".framebufferHeight",b+".height");return b})):g(function(a,c){var b=a.shared;c.set(b.framebuffer,".next","null");b=b.context;c.set(b,".framebufferWidth",b+".drawingBufferWidth");c.set(b,".framebufferHeight",b+".drawingBufferHeight");return"null"})}if("framebuffer"in q){var p=q.framebuffer;return k(p,function(a,c){var e=a.invoke(c,p),l=a.shared,q=l.framebuffer,v=c.def(q,
".getFramebuffer(",e,")");b.optional(function(){a.assert(c,"!"+e+"||"+v,"invalid framebuffer object")});c.set(q,".next",v);l=l.context;c.set(l,".framebufferWidth",v+"?"+v+".width:"+l+".drawingBufferWidth");c.set(l,".framebufferHeight",v+"?"+v+".height:"+l+".drawingBufferHeight");return v})}return null}function oa(a,c,e){function l(a){if(a in v){var p=v[a];b.commandType(p,"object","invalid "+a,e.commandStr);var f=!0,H=p.x|0,R=p.y|0,F,m;"width"in p?(F=p.width|0,b.command(0<=F,"invalid "+a,e.commandStr)):
f=!1;"height"in p?(m=p.height|0,b.command(0<=m,"invalid "+a,e.commandStr)):f=!1;return new I(!f&&c&&c.thisDep,!f&&c&&c.contextDep,!f&&c&&c.propDep,function(a,c){var b=a.shared.context,e=F;"width"in p||(e=c.def(b,".","framebufferWidth","-",H));var l=m;"height"in p||(l=c.def(b,".","framebufferHeight","-",R));return[H,R,e,l]})}if(a in q){var h=q[a],f=k(h,function(c,e){var l=c.invoke(e,h);b.optional(function(){c.assert(e,l+"&&typeof "+l+'==="object"',"invalid "+a)});var v=c.shared.context,q=e.def(l,".x|0"),
p=e.def(l,".y|0"),f=e.def('"width" in ',l,"?",l,".width|0:","(",v,".","framebufferWidth","-",q,")"),k=e.def('"height" in ',l,"?",l,".height|0:","(",v,".","framebufferHeight","-",p,")");b.optional(function(){c.assert(e,f+">=0&&"+k+">=0","invalid "+a)});return[q,p,f,k]});c&&(f.thisDep=f.thisDep||c.thisDep,f.contextDep=f.contextDep||c.contextDep,f.propDep=f.propDep||c.propDep);return f}return c?new I(c.thisDep,c.contextDep,c.propDep,function(a,c){var b=a.shared.context;return[0,0,c.def(b,".","framebufferWidth"),
c.def(b,".","framebufferHeight")]}):null}var v=a["static"],q=a.dynamic;if(a=l("viewport")){var p=a;a=new I(a.thisDep,a.contextDep,a.propDep,function(a,c){var b=p.append(a,c),e=a.shared.context;c.set(e,".viewportWidth",b[2]);c.set(e,".viewportHeight",b[3]);return b})}return{viewport:a,scissor_box:l("scissor.box")}}function q(a,c){var e=a["static"];if("string"===typeof e.frag&&"string"===typeof e.vert){if(0<m(c.dynamic).length)return null;var e=c["static"],l=m(e);if(0<l.length&&"number"===typeof e[l[0]]){for(var v=
[],q=0;q<l.length;++q)b("number"===typeof e[l[q]],"must specify all vertex attribute locations when using vaos"),v.push([e[l[q]]|0,l[q]]);return v}}return null}function J(a,c,e){function l(a){if(a in q){var c=z.id(q[a]);b.optional(function(){na.shader(V[a],c,b.guessCommand())});var e=g(function(){return c});e.id=c;return e}if(a in v){var p=v[a];return k(p,function(c,e){var l=c.invoke(e,p),q=e.def(c.shared.strings,".id(",l,")");b.optional(function(){e(c.shared.shader,".shader(",V[a],",",q,",",c.command,
");")});return q})}return null}var q=a["static"],v=a.dynamic,p=l("frag"),f=l("vert"),H=null;M(p)&&M(f)?(H=na.program(f.id,p.id,null,e),a=g(function(a,c){return a.link(H)})):a=new I(p&&p.thisDep||f&&f.thisDep,p&&p.contextDep||f&&f.contextDep,p&&p.propDep||f&&f.propDep,function(a,c){var e=a.shared.shader,l;l=p?p.append(a,c):c.def(e,".","frag");var q;q=f?f.append(a,c):c.def(e,".","vert");var v=e+".program("+q+","+l;b.optional(function(){v+=","+a.command});return c.def(v+")")});return{frag:p,vert:f,progVar:a,
program:H}}function da(a,e){function l(a,c){if(a in q){var F=q[a]|0;c?p.offset=F:p.instances=F;b.command(!c||0<=F,"invalid "+a,e.commandStr);return g(function(a,b){c&&(a.OFFSET=F);return F})}if(a in v){var h=v[a];return k(h,function(e,l){var q=e.invoke(l,h);c&&(e.OFFSET=q,b.optional(function(){e.assert(l,q+">=0","invalid "+a)}));return q})}if(c){if(R)return g(function(a,c){return a.OFFSET=0});if(f)return new I(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+
a.shared.vao+".currentVAO.offset:0")})}else if(f)return new I(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var q=a["static"],v=a.dynamic,p={},f=!1,H=function(){if("vao"in q){var a=q.vao;null!==a&&null===y.getVAO(a)&&(a=y.createVAO(a));f=!0;p.vao=a;return g(function(c){var b=y.getVAO(a);return b?c.link(b):"null"})}if("vao"in v){f=!0;var c=v.vao;return k(c,function(a,b){var e=a.invoke(b,c);return b.def(a.shared.vao+
".getVAO("+e+")")})}return null}(),R=!1,F=function(){if("elements"in q){var a=q.elements;p.elements=a;if(d(a)){var l=p.elements=c.create(a,!0),a=c.getElements(l);R=!0}else a&&(a=c.getElements(a),R=!0,b.command(a,"invalid elements",e.commandStr));l=g(function(c,b){if(a){var e=c.link(a);return c.ELEMENTS=e}return c.ELEMENTS=null});l.value=a;return l}if("elements"in v){R=!0;var F=v.elements;return k(F,function(a,c){var e=a.shared,l=e.isBufferArgs,e=e.elements,q=a.invoke(c,F),v=c.def("null"),l=c.def(l,
"(",q,")"),p=a.cond(l).then(v,"=",e,".createStream(",q,");")["else"](v,"=",e,".getElements(",q,");");b.optional(function(){a.assert(p["else"],"!"+q+"||"+v,"invalid elements")});c.entry(p);c.exit(a.cond(l).then(e,".destroyStream(",v,");"));return a.ELEMENTS=v})}return f?new I(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),h=l("offset",!0),z=function(){if("primitive"in q){var a=
q.primitive;p.primitive=a;b.commandParameter(a,Z,"invalid primitve",e.commandStr);return g(function(c,b){return Z[a]})}if("primitive"in v){var c=v.primitive;return k(c,function(a,e){var l=a.constants.primTypes,q=a.invoke(e,c);b.optional(function(){a.assert(e,q+" in "+l,"invalid primitive, must be one of "+m(Z))});return e.def(l,"[",q,"]")})}return R?M(F)?F.value?g(function(a,c){return c.def(a.ELEMENTS,".primType")}):g(function(){return 4}):new I(F.thisDep,F.contextDep,F.propDep,function(a,c){var b=
a.ELEMENTS;return c.def(b,"?",b,".primType:",4)}):f?new I(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),t=function(){if("count"in q){var a=q.count|0;p.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",e.commandStr);return g(function(){return a})}if("count"in v){var c=v.count;return k(c,function(a,e){var l=a.invoke(e,c);b.optional(function(){a.assert(e,"typeof "+l+'==="number"&&'+l+">=0&&"+
l+"===("+l+"|0)","invalid vertex count")});return l})}if(R){if(M(F)){if(F)return h?new I(h.thisDep,h.contextDep,h.propDep,function(a,c){var e=c.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(c,e+">=0","invalid vertex offset/element buffer too small")});return e}):g(function(a,c){return c.def(a.ELEMENTS,".vertCount")});var l=g(function(){return-1});b.optional(function(){l.MISSING=!0});return l}var m=new I(F.thisDep||h.thisDep,F.contextDep||h.contextDep,F.propDep||h.propDep,function(a,
c){var b=a.ELEMENTS;return a.OFFSET?c.def(b,"?",b,".vertCount-",a.OFFSET,":-1"):c.def(b,"?",b,".vertCount:-1")});b.optional(function(){m.DYNAMIC=!0});return m}return f?new I(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),n=l("instances",!1);return{elements:F,primitive:z,count:t,instances:n,offset:h,vao:H,vaoActive:f,elementsActive:R,"static":p}}function S(a,c){var l=a["static"],q=a.dynamic,v={};ua.forEach(function(a){function p(c,
b){if(a in l){var e=c(l[a]);v[H]=g(function(){return e})}else if(a in q){var f=q[a];v[H]=k(f,function(a,c){return b(a,c,a.invoke(c,f))})}}var H=T(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return p(function(e){b.commandType(e,"boolean",a,c.commandStr);return e},function(c,e,l){b.optional(function(){c.assert(e,"typeof "+l+'==="boolean"',
"invalid flag "+a,c.commandStr)});return l});case "depth.func":return p(function(l){b.commandParameter(l,e,"invalid "+a,c.commandStr);return e[l]},function(c,l,q){var p=c.constants.compareFuncs;b.optional(function(){c.assert(l,q+" in "+p,"invalid "+a+", must be one of "+m(e))});return l.def(p,"[",q,"]")});case "depth.range":return p(function(a){b.command(A(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",c.commandStr);return a},function(a,c,e){b.optional(function(){a.assert(c,
a.shared.isArrayLike+"("+e+")&&"+e+".length===2&&typeof "+e+'[0]==="number"&&typeof '+e+'[1]==="number"&&'+e+"[0]<="+e+"[1]","depth range must be a 2d array")});var l=c.def("+",e,"[0]"),q=c.def("+",e,"[1]");return[l,q]});case "blend.func":return p(function(a){b.commandType(a,"object","blend.func",c.commandStr);var e="srcRGB"in a?a.srcRGB:a.src,l="srcAlpha"in a?a.srcAlpha:a.src,q="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(e,O,H+".srcRGB",c.commandStr);b.commandParameter(l,
O,H+".srcAlpha",c.commandStr);b.commandParameter(q,O,H+".dstRGB",c.commandStr);b.commandParameter(a,O,H+".dstAlpha",c.commandStr);b.command(-1===ja.indexOf(e+", "+q),"unallowed blending combination (srcRGB, dstRGB) = ("+e+", "+q+")",c.commandStr);return[O[e],O[q],O[l],O[a]]},function(c,e,l){function q(v,f){var k=e.def('"',v,f,'" in ',l,"?",l,".",v,f,":",l,".",v);b.optional(function(){c.assert(e,k+" in "+p,"invalid "+a+"."+v+f+", must be one of "+m(O))});return k}var p=c.constants.blendFuncs;b.optional(function(){c.assert(e,
l+"&&typeof "+l+'==="object"',"invalid blend func, must be an object")});var v=q("src","RGB"),f=q("dst","RGB");b.optional(function(){c.assert(e,c.constants.invalidBlendCombinations+".indexOf("+v+'+", "+'+f+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var k=e.def(p,"[",v,"]"),H=e.def(p,"[",q("src","Alpha"),"]"),F=e.def(p,"[",f,"]"),R=e.def(p,"[",q("dst","Alpha"),"]");return[k,F,H,R]});case "blend.equation":return p(function(e){if("string"===typeof e)return b.commandParameter(e,
Ea,"invalid "+a,c.commandStr),[Ea[e],Ea[e]];if("object"===typeof e)return b.commandParameter(e.rgb,Ea,a+".rgb",c.commandStr),b.commandParameter(e.alpha,Ea,a+".alpha",c.commandStr),[Ea[e.rgb],Ea[e.alpha]];b.commandRaise("invalid blend.equation",c.commandStr)},function(c,e,l){var q=c.constants.blendEquations,p=e.def(),v=e.def(),f=c.cond("typeof ",l,'==="string"');b.optional(function(){function e(a,b,l){c.assert(a,l+" in "+q,"invalid "+b+", must be one of "+m(Ea))}e(f.then,a,l);c.assert(f["else"],l+
"&&typeof "+l+'==="object"',"invalid "+a);e(f["else"],a+".rgb",l+".rgb");e(f["else"],a+".alpha",l+".alpha")});f.then(p,"=",v,"=",q,"[",l,"];");f["else"](p,"=",q,"[",l,".rgb];",v,"=",q,"[",l,".alpha];");e(f);return[p,v]});case "blend.color":return p(function(a){b.command(A(a)&&4===a.length,"blend.color must be a 4d array",c.commandStr);return L(4,function(c){return+a[c]})},function(a,c,e){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+e+")&&"+e+".length===4","blend.color must be a 4d array")});
return L(4,function(a){return c.def("+",e,"[",a,"]")})});case "stencil.mask":return p(function(a){b.commandType(a,"number",H,c.commandStr);return a|0},function(a,c,e){b.optional(function(){a.assert(c,"typeof "+e+'==="number"',"invalid stencil.mask")});return c.def(e,"|0")});case "stencil.func":return p(function(l){b.commandType(l,"object",H,c.commandStr);var q=l.cmp||"keep",p=l.ref||0;l="mask"in l?l.mask:-1;b.commandParameter(q,e,a+".cmp",c.commandStr);b.commandType(p,"number",a+".ref",c.commandStr);
b.commandType(l,"number",a+".mask",c.commandStr);return[e[q],p,l]},function(a,c,e){var l=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(c,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(e+"&&typeof ",e,'==="object"');b('!("cmp" in ',e,")||(",e,".cmp in ",l,")")});var q=c.def('"cmp" in ',e,"?",l,"[",e,".cmp]",":",7680),p=c.def(e,".ref|0"),v=c.def('"mask" in ',e,"?",e,".mask|0:-1");return[q,p,v]});case "stencil.opFront":case "stencil.opBack":return p(function(e){b.commandType(e,
"object",H,c.commandStr);var l=e.fail||"keep",q=e.zfail||"keep";e=e.zpass||"keep";b.commandParameter(l,C,a+".fail",c.commandStr);b.commandParameter(q,C,a+".zfail",c.commandStr);b.commandParameter(e,C,a+".zpass",c.commandStr);return["stencil.opBack"===a?1029:1028,C[l],C[q],C[e]]},function(c,e,l){function q(v){b.optional(function(){c.assert(e,'!("'+v+'" in '+l+")||("+l+"."+v+" in "+p+")","invalid "+a+"."+v+", must be one of "+m(C))});return e.def('"',v,'" in ',l,"?",p,"[",l,".",v,"]:",7680)}var p=c.constants.stencilOps;
b.optional(function(){c.assert(e,l+"&&typeof "+l+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,q("fail"),q("zfail"),q("zpass")]});case "polygonOffset.offset":return p(function(a){b.commandType(a,"object",H,c.commandStr);var e=a.factor|0;a=a.units|0;b.commandType(e,"number",H+".factor",c.commandStr);b.commandType(a,"number",H+".units",c.commandStr);return[e,a]},function(c,e,l){b.optional(function(){c.assert(e,l+"&&typeof "+l+'==="object"',"invalid "+a)});var q=e.def(l,".factor|0"),
p=e.def(l,".units|0");return[q,p]});case "cull.face":return p(function(a){var e=0;"front"===a?e=1028:"back"===a&&(e=1029);b.command(!!e,H,c.commandStr);return e},function(a,c,e){b.optional(function(){a.assert(c,e+'==="front"||'+e+'==="back"',"invalid cull.face")});return c.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return p(function(a){b.command("number"===typeof a&&a>=E.lineWidthDims[0]&&a<=E.lineWidthDims[1],"invalid line width, must be a positive number between "+E.lineWidthDims[0]+
" and "+E.lineWidthDims[1],c.commandStr);return a},function(a,c,e){b.optional(function(){a.assert(c,"typeof "+e+'==="number"&&'+e+">="+E.lineWidthDims[0]+"&&"+e+"<="+E.lineWidthDims[1],"invalid line width")});return e});case "frontFace":return p(function(a){b.commandParameter(a,f,H,c.commandStr);return f[a]},function(a,c,e){b.optional(function(){a.assert(c,e+'==="cw"||'+e+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return c.def(e+'==="cw"?2304:2305')});case "colorMask":return p(function(a){b.command(A(a)&&
4===a.length,"color.mask must be length 4 array",c.commandStr);return a.map(function(a){return!!a})},function(a,c,e){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+e+")&&"+e+".length===4","invalid color.mask")});return L(4,function(a){return"!!"+e+"["+a+"]"})});case "sample.coverage":return p(function(a){b.command("object"===typeof a&&a,H,c.commandStr);var e="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof e&&0<=e&&1>=e,"sample.coverage.value must be a number between 0 and 1",
c.commandStr);return[e,a]},function(a,c,e){b.optional(function(){a.assert(c,e+"&&typeof "+e+'==="object"',"invalid sample.coverage")});var l=c.def('"value" in ',e,"?+",e,".value:1"),q=c.def("!!",e,".invert");return[l,q]})}});return v}function ma(a,c){var e=a["static"],l=a.dynamic,q={};m(e).forEach(function(a){var l=e[a],p;if("number"===typeof l||"boolean"===typeof l)p=g(function(){return l});else if("function"===typeof l){var v=l._reglType;"texture2d"===v||"textureCube"===v?p=g(function(a){return a.link(l)}):
"framebuffer"===v||"framebufferCube"===v?(b.command(0<l.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',c.commandStr),p=g(function(a){return a.link(l.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',c.commandStr)}else A(l)?p=g(function(c){return c.global.def("[",L(l.length,function(e){b.command("number"===typeof l[e]||"boolean"===typeof l[e],"invalid uniform "+a,c.commandStr);return l[e]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+
a+'"',c.commandStr);p.value=l;q[a]=p});m(l).forEach(function(a){var c=l[a];q[a]=k(c,function(a,e){return a.invoke(e,c)})});return q}function ra(a,c){var e=a["static"],l=a.dynamic,q={};m(e).forEach(function(a){var l=e[a],p=z.id(a),v=new sa;if(d(l))v.state=1,v.buffer=D.getBuffer(D.create(l,34962,!1,!0)),v.type=0;else{var f=D.getBuffer(l);if(f)v.state=1,v.buffer=f,v.type=0;else if(b.command("object"===typeof l&&l,"invalid data for attribute "+a,c.commandStr),"constant"in l){var k=l.constant;v.buffer=
"null";v.state=2;"number"===typeof k?v.x=k:(b.command(A(k)&&0<k.length&&4>=k.length,"invalid constant for attribute "+a,c.commandStr),U.forEach(function(a,c){c<k.length&&(v[a]=k[c])}))}else{f=d(l.buffer)?D.getBuffer(D.create(l.buffer,34962,!1,!0)):D.getBuffer(l.buffer);b.command(!!f,'missing buffer for attribute "'+a+'"',c.commandStr);var H=l.offset|0;b.command(0<=H,'invalid offset for attribute "'+a+'"',c.commandStr);var F=l.stride|0;b.command(0<=F&&256>F,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',
c.commandStr);var R=l.size|0;b.command(!("size"in l)||0<R&&4>=R,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var h=!!l.normalized,t=0;"type"in l&&(b.commandParameter(l.type,r,"invalid type for attribute "+a,c.commandStr),t=r[l.type]);var n=l.divisor|0;b.optional(function(){"divisor"in l&&(b.command(0===n||pa,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),b.command(0<=n,'invalid divisor for attribute "'+a+'"',c.commandStr));var e=c.commandStr,
q="buffer offset divisor normalized type size stride".split(" ");m(l).forEach(function(c){b.command(0<=q.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+q+")",e)})});v.buffer=f;v.state=1;v.size=R;v.normalized=h;v.type=t||f.dtype;v.offset=H;v.stride=F;v.divisor=n}}q[a]=g(function(a,c){var e=a.attribCache;if(p in e)return e[p];var l={isStream:!1};m(v).forEach(function(a){l[a]=v[a]});v.buffer&&(l.buffer=a.link(v.buffer),l.type=l.type||l.buffer+".dtype");return e[p]=
l})});m(l).forEach(function(a){var c=l[a];q[a]=k(c,function(e,l){function q(a){l(F[a],"=",v,".",a,"|0;")}var v=e.invoke(l,c),p=e.shared,f=e.constants,k=p.isBufferArgs,H=p.buffer;b.optional(function(){e.assert(l,v+"&&(typeof "+v+'==="object"||typeof '+v+'==="function")&&('+k+"("+v+")||"+H+".getBuffer("+v+")||"+H+".getBuffer("+v+".buffer)||"+k+"("+v+'.buffer)||("constant" in '+v+"&&(typeof "+v+'.constant==="number"||'+p.isArrayLike+"("+v+".constant))))",'invalid dynamic attribute "'+a+'"')});var F=
{isStream:l.def(!1)},R=new sa;R.state=1;m(R).forEach(function(a){F[a]=l.def(""+R[a])});var h=F.buffer,z=F.type;l("if(",k,"(",v,")){",F.isStream,"=true;",h,"=",H,".createStream(",34962,",",v,");",z,"=",h,".dtype;","}else{",h,"=",H,".getBuffer(",v,");","if(",h,"){",z,"=",h,".dtype;",'}else if("constant" in ',v,"){",F.state,"=",2,";","if(typeof "+v+'.constant === "number"){',F[U[0]],"=",v,".constant;",U.slice(1).map(function(a){return F[a]}).join("="),"=0;","}else{",U.map(function(a,c){return F[a]+"="+
v+".constant.length>"+c+"?"+v+".constant["+c+"]:0;"}).join(""),"}}else{","if(",k,"(",v,".buffer)){",h,"=",H,".createStream(",34962,",",v,".buffer);","}else{",h,"=",H,".getBuffer(",v,".buffer);","}",z,'="type" in ',v,"?",f.glTypes,"[",v,".type]:",h,".dtype;",F.normalized,"=!!",v,".normalized;");q("size");q("offset");q("stride");q("divisor");l("}}");l.exit("if(",F.isStream,"){",H,".destroyStream(",h,");","}");return F})});return q}function Ca(a){var c=a["static"],e=a.dynamic,l={};m(c).forEach(function(a){var e=
c[a];l[a]=g(function(a,c){return"number"===typeof e||"boolean"===typeof e?""+e:a.link(e)})});m(e).forEach(function(a){var c=e[a];l[a]=k(c,function(a,e){return a.invoke(e,c)})});return l}function wa(a,c,e,l,v){function p(a){var c=R[a];c&&(z[a]=c)}var f=a["static"],k=a.dynamic;b.optional(function(){function a(e){m(e).forEach(function(a){b.command(0<=c.indexOf(a),'unknown parameter "'+a+'"',v.commandStr)})}var c="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);
a(f);a(k)});var H=q(a,c),F=za(a,v),R=oa(a,F,v),h=da(a,v),z=S(a,v),t=J(a,v,H);p("viewport");p(T("scissor.box"));var n=0<m(z).length,F={framebuffer:F,draw:h,shader:t,state:z,dirty:n,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};F.profile=Q(a,v);F.uniforms=ma(e,v);F.drawVAO=F.scopeVAO=h.vao;if(!F.drawVAO&&t.program&&!H&&u.angle_instanced_arrays&&h["static"].elements){var C=!0;a=t.program.attributes.map(function(a){a=c["static"][a];C=C&&!!a;return a});if(C&&0<a.length){var sa=y.getVAO(y.createVAO({attributes:a,
elements:h["static"].elements}));F.drawVAO=new I(null,null,null,function(a,c){return a.link(sa)});F.useVAO=!0}}H?F.useVAO=!0:F.attributes=ra(c,v);F.context=Ca(l,v);return F}function ga(a,c,e){var l=a.shared.context,b=a.scope();m(e).forEach(function(v){c.save(l,"."+v);var q=e[v].append(a,c);Array.isArray(q)?b(l,".",v,"=[",q.join(),"];"):b(l,".",v,"=",q,";")});c(b)}function Da(a,c,e,l){var b=a.shared,v=b.gl,q=b.framebuffer,p;ya&&(p=c.def(b.extensions,".webgl_draw_buffers"));var f=a.constants,b=f.drawBuffer,
f=f.backBuffer;a=e?e.append(a,c):c.def(q,".next");l||c("if(",a,"!==",q,".cur){");c("if(",a,"){",v,".bindFramebuffer(",36160,",",a,".framebuffer);");ya&&c(p,".drawBuffersWEBGL(",b,"[",a,".colorAttachments.length]);");c("}else{",v,".bindFramebuffer(",36160,",null);");ya&&c(p,".drawBuffersWEBGL(",f,");");c("}",q,".cur=",a,";");l||c("}")}function ka(a,c,e){var l=a.shared,b=l.gl,v=a.current,q=a.next,p=l.current,f=l.next,k=a.cond(p,".dirty");ua.forEach(function(c){c=T(c);if(!(c in e.state)){var l,H;if(c in
q){l=q[c];H=v[c];var F=L(la[c].length,function(a){return k.def(l,"[",a,"]")});k(a.cond(F.map(function(a,c){return a+"!=="+H+"["+c+"]"}).join("||")).then(b,".",Ba[c],"(",F,");",F.map(function(a,c){return H+"["+c+"]="+a}).join(";"),";"))}else l=k.def(f,".",c),F=a.cond(l,"!==",p,".",c),k(F),c in Ia?F(a.cond(l).then(b,".enable(",Ia[c],");")["else"](b,".disable(",Ia[c],");"),p,".",c,"=",l,";"):F(b,".",Ba[c],"(",l,");",p,".",c,"=",l,";")}});0===m(e.state).length&&k(p,".dirty=false;");c(k)}function qa(a,
c,e,l){var b=a.shared,v=a.current,q=b.current,p=b.gl;K(m(e)).forEach(function(b){var f=e[b];if(!l||l(f)){var k=f.append(a,c);if(Ia[b]){var H=Ia[b];M(f)?k?c(p,".enable(",H,");"):c(p,".disable(",H,");"):c(a.cond(k).then(p,".enable(",H,");")["else"](p,".disable(",H,");"));c(q,".",b,"=",k,";")}else if(A(k)){var F=v[b];c(p,".",Ba[b],"(",k,");",k.map(function(a,c){return F+"["+c+"]="+a}).join(";"),";")}else c(p,".",Ba[b],"(",k,");",q,".",b,"=",k,";")}})}function Aa(a,c){pa&&(a.instancing=c.def(a.shared.extensions,
".angle_instanced_arrays"))}function Ma(a,c,e,l,b){function v(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function q(a){R=c.def();a(R,"=",v(),";");"string"===typeof b?a(H,".count+=",b,";"):a(H,".count++;");fa&&(l?(m=c.def(),a(m,"=",h,".getNumPendingQueries();")):a(h,".beginQuery(",H,");"))}function p(a){a(H,".cpuTime+=",v(),"-",R,";");fa&&(l?a(h,".pushScopeStats(",m,",",h,".getNumPendingQueries(),",H,");"):a(h,".endQuery();"))}function f(a){var e=c.def(F,".profile");
c(F,".profile=",a,";");c.exit(F,".profile=",e,";")}var k=a.shared,H=a.stats,F=k.current,h=k.timer;e=e.profile;var R,m;if(e){if(M(e)){e.enable?(q(c),p(c.exit),f("true")):f("false");return}e=e.append(a,c);f(e)}else e=c.def(F,".profile");k=a.block();q(k);c("if(",e,"){",k,"}");a=a.block();p(a);c.exit("if(",e,"){",a,"}")}function F(a,c,e,l,v){function q(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function p(e,l,b){function v(){c("if(!",F,".buffer){",k,".enableVertexAttribArray(",H,");}");var e=b.type,q;q=b.size?c.def(b.size,"||",l):l;c("if(",F,".type!==",e,"||",F,".size!==",q,"||",m.map(function(a){return F+"."+a+"!=="+b[a]}).join("||"),"){",k,".bindBuffer(",34962,",",h,".buffer);",k,".vertexAttribPointer(",[H,q,e,b.normalized,b.stride,b.offset],");",F,".type=",e,";",F,".size=",q,";",m.map(function(a){return F+"."+a+"="+b[a]+";"}).join(""),"}");pa&&(e=b.divisor,c("if(",F,".divisor!==",e,"){",
a.instancing,".vertexAttribDivisorANGLE(",[H,e],");",F,".divisor=",e,";}"))}function q(){c("if(",F,".buffer){",k,".disableVertexAttribArray(",H,");",F,".buffer=null;","}if(",U.map(function(a,c){return F+"."+a+"!=="+R[c]}).join("||"),"){",k,".vertexAttrib4f(",H,",",R,");",U.map(function(a,c){return F+"."+a+"="+R[c]+";"}).join(""),"}")}var k=f.gl,H=c.def(e,".location"),F=c.def(f.attributes,"[",H,"]");e=b.state;var h=b.buffer,R=[b.x,b.y,b.z,b.w],m=["buffer","normalized","offset","stride"];1===e?v():
2===e?q():(c("if(",e,"===",1,"){"),v(),c("}else{"),q(),c("}"))}var f=a.shared;l.forEach(function(l){var f=l.name,k=e.attributes[f],H;if(k){if(!v(k))return;H=k.append(a,c)}else{if(!v(ba))return;var F=a.scopeAttrib(f);b.optional(function(){a.assert(c,F+".state","missing attribute "+f)});H={};m(new sa).forEach(function(a){H[a]=c.def(F,".",a)})}p(a.link(l),q(l.info.type),H)})}function eb(a,c,e,l,v,q){for(var p=a.shared,f=p.gl,k,H=0;H<l.length;++H){var F=l[H],h=F.name,R=F.info.type,m=e.uniforms[h],F=a.link(F)+
".location",t;if(m){if(!v(m))continue;if(M(m)){var n=m.value;b.command(null!==n&&"undefined"!==typeof n,'missing uniform "'+h+'"',a.commandStr);if(35678===R||35680===R)b.command("function"===typeof n&&(35678===R&&("texture2d"===n._reglType||"framebuffer"===n._reglType)||35680===R&&("textureCube"===n._reglType||"framebufferCube"===n._reglType)),"invalid texture for uniform "+h,a.commandStr),m=a.link(n._texture||n.color[0]._texture),c(f,".uniform1i(",F,",",m+".bind());"),c.exit(m,".unbind();");else if(35674===
R||35675===R||35676===R){b.optional(function(){b.command(A(n),"invalid matrix for uniform "+h,a.commandStr);b.command(35674===R&&4===n.length||35675===R&&9===n.length||35676===R&&16===n.length,"invalid length for matrix uniform "+h,a.commandStr)});var m=a.global.def("new Float32Array(["+Array.prototype.slice.call(n)+"])"),C=2;35675===R?C=3:35676===R&&(C=4);c(f,".uniformMatrix",C,"fv(",F,",false,",m,");")}else{switch(R){case 5126:b.commandType(n,"number","uniform "+h,a.commandStr);k="1f";break;case 35664:b.command(A(n)&&
2===n.length,"uniform "+h,a.commandStr);k="2f";break;case 35665:b.command(A(n)&&3===n.length,"uniform "+h,a.commandStr);k="3f";break;case 35666:b.command(A(n)&&4===n.length,"uniform "+h,a.commandStr);k="4f";break;case 35670:b.commandType(n,"boolean","uniform "+h,a.commandStr);k="1i";break;case 5124:b.commandType(n,"number","uniform "+h,a.commandStr);k="1i";break;case 35671:b.command(A(n)&&2===n.length,"uniform "+h,a.commandStr);k="2i";break;case 35667:b.command(A(n)&&2===n.length,"uniform "+h,a.commandStr);
k="2i";break;case 35672:b.command(A(n)&&3===n.length,"uniform "+h,a.commandStr);k="3i";break;case 35668:b.command(A(n)&&3===n.length,"uniform "+h,a.commandStr);k="3i";break;case 35673:b.command(A(n)&&4===n.length,"uniform "+h,a.commandStr);k="4i";break;case 35669:b.command(A(n)&&4===n.length,"uniform "+h,a.commandStr),k="4i"}c(f,".uniform",k,"(",F,",",A(n)?Array.prototype.slice.call(n):n,");")}continue}else t=m.append(a,c)}else{if(!v(ba))continue;t=c.def(p.uniforms,"[",z.id(h),"]")}35678===R?(b(!Array.isArray(t),
"must specify a scalar prop for textures"),c("if(",t,"&&",t,'._reglType==="framebuffer"){',t,"=",t,".color[0];","}")):35680===R&&(b(!Array.isArray(t),"must specify a scalar prop for cube maps"),c("if(",t,"&&",t,'._reglType==="framebufferCube"){',t,"=",t,".color[0];","}"));b.optional(function(){function e(l,b){a.assert(c,l,'bad data or missing for uniform "'+h+'".  '+b)}function l(a){b(!Array.isArray(t),"must not specify an array type for uniform");e("typeof "+t+'==="'+a+'"',"invalid type, expected "+
a)}function v(c,l){Array.isArray(t)?b(t.length===c,"must have length "+c):e(p.isArrayLike+"("+t+")&&"+t+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function q(c){b(!Array.isArray(t),"must not specify a value type");e("typeof "+t+'==="function"&&'+t+'._reglType==="texture'+(3553===c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(R){case 5124:l("number");break;case 35667:v(2,"number");break;case 35668:v(3,"number");break;case 35669:v(4,"number");break;case 5126:l("number");
break;case 35664:v(2,"number");break;case 35665:v(3,"number");break;case 35666:v(4,"number");break;case 35670:l("boolean");break;case 35671:v(2,"boolean");break;case 35672:v(3,"boolean");break;case 35673:v(4,"boolean");break;case 35674:v(4,"number");break;case 35675:v(9,"number");break;case 35676:v(16,"number");break;case 35678:q(3553);break;case 35680:q(34067)}});m=1;switch(R){case 35678:case 35680:m=c.def(t,"._texture");c(f,".uniform1i(",F,",",m,".bind());");c.exit(m,".unbind();");continue;case 5124:case 35670:k=
"1i";break;case 35667:case 35671:k="2i";m=2;break;case 35668:case 35672:k="3i";m=3;break;case 35669:case 35673:k="4i";m=4;break;case 5126:k="1f";break;case 35664:k="2f";m=2;break;case 35665:k="3f";m=3;break;case 35666:k="4f";m=4;break;case 35674:k="Matrix2fv";break;case 35675:k="Matrix3fv";break;case 35676:k="Matrix4fv"}if("M"===k.charAt(0)){c(f,".uniform",k,"(",F,",");var F=Math.pow(R-35674+2,2),T=a.global.def("new Float32Array(",F,")");Array.isArray(t)?c("false,(",L(F,function(a){return T+"["+a+
"]="+t[a]}),",",T,")"):c("false,(Array.isArray(",t,")||",t," instanceof Float32Array)?",t,":(",L(F,function(a){return T+"["+a+"]="+t+"["+a+"]"}),",",T,")");c(");")}else{if(1<m){for(var C=[],sa=[],Ma=0;Ma<m;++Ma)Array.isArray(t)?sa.push(t[Ma]):sa.push(c.def(t+"["+Ma+"]")),q&&C.push(c.def());q&&c("if(!",a.batchId,"||",C.map(function(a,c){return a+"!=="+sa[c]}).join("||"),"){",C.map(function(a,c){return a+"="+sa[c]+";"}).join(""));c(f,".uniform",k,"(",F,",",sa.join(","),");")}else b(!Array.isArray(t),
"uniform value must not be an array"),q&&(m=c.def(),c("if(!",a.batchId,"||",m,"!==",t,"){",m,"=",t,";")),c(f,".uniform",k,"(",F,",",t,");");q&&c("}")}}}function Ua(a,c,e,l){function v(b){var q=F[b];return q?q.contextDep&&l.contextDynamic||q.propDep?q.append(a,e):q.append(a,c):c.def(H,".",b)}function q(){function a(){e(z,".drawElementsInstancedANGLE(",[R,n,C,m+"<<(("+C+"-5121)>>1)",t],");")}function c(){e(z,".drawArraysInstancedANGLE(",[R,m,n,t],");")}h&&"null"!==h?T?a():(e("if(",h,"){"),a(),e("}else{"),
c(),e("}")):c()}function p(){function a(){e(f+".drawElements("+[R,n,C,m+"<<(("+C+"-5121)>>1)"]+");")}function c(){e(f+".drawArrays("+[R,m,n]+");")}h&&"null"!==h?T?a():(e("if(",h,"){"),a(),e("}else{"),c(),e("}")):c()}var k=a.shared,f=k.gl,H=k.draw,F=l.draw,h=function(){var b=F.elements,v=c;if(b){if(b.contextDep&&l.contextDynamic||b.propDep)v=e;b=b.append(a,v);F.elementsActive&&v("if("+b+")"+f+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=v.def(),v(b,"=",H,".","elements",";","if(",b,"){",f,".bindBuffer(",
34963,",",b,".buffer.buffer);}","else if(",k.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+k.vao,".currentVAO.elements);",Ja?"":"if("+b+")"+f+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),R=v("primitive"),m=v("offset"),n=function(){var v=F.count,q,p=c;if(v){if(v.contextDep&&l.contextDynamic||v.propDep)p=e;q=v.append(a,p);b.optional(function(){v.MISSING&&a.assert(c,"false","missing vertex count");v.DYNAMIC&&a.assert(p,q+">=0","missing vertex count")})}else q=p.def(H,".",
"count"),b.optional(function(){a.assert(p,q+">=0","missing vertex count")});return q}();if("number"===typeof n){if(0===n)return}else e("if(",n,"){"),e.exit("}");var t,z;pa&&(t=v("instances"),z=a.instancing);var C=h+".type",T=F.elements&&M(F.elements)&&!F.vaoActive;pa&&("number"!==typeof t||0<=t)?"string"===typeof t?(e("if(",t,">0){"),q(),e("}else if(",t,"<0){"),p(),e("}")):q():p()}function v(a,c,e,l,v){var q=N();v=q.proc("body",v);b.optional(function(){q.commandStr=c.commandStr;q.command=q.link(c.commandStr)});
pa&&(q.instancing=v.def(q.shared.extensions,".angle_instanced_arrays"));a(q,v,e,l);return q.compile().body}function p(a,c,e,l){Aa(a,c);e.useVAO?e.drawVAO?c(a.shared.vao,".setVAO(",e.drawVAO.append(a,c),");"):c(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(c(a.shared.vao,".setVAO(null);"),F(a,c,e,l.attributes,function(){return!0}));eb(a,c,e,l.uniforms,function(){return!0},!1);Ua(a,c,c,e)}function R(a,c){var e=a.proc("draw",1);Aa(a,e);ga(a,e,c.context);Da(a,e,c.framebuffer);ka(a,e,c);qa(a,e,
c.state);Ma(a,e,c,!1,!0);var l=c.shader.progVar.append(a,e);e(a.shared.gl,".useProgram(",l,".program);");if(c.shader.program)p(a,e,c,c.shader.program);else{e(a.shared.vao,".setVAO(null);");var b=a.global.def("{}"),q=e.def(l,".id"),f=e.def(b,"[",q,"]");e(a.cond(f).then(f,".call(this,a0);")["else"](f,"=",b,"[",q,"]=",a.link(function(e){return v(p,a,c,e,1)}),"(",l,");",f,".call(this,a0);"))}0<m(c.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function ta(a,
c,e,l){function b(){return!0}a.batchId="a1";Aa(a,c);F(a,c,e,l.attributes,b);eb(a,c,e,l.uniforms,b,!1);Ua(a,c,c,e)}function va(a,c,e,l){function b(a){return a.contextDep&&p||a.propDep}function q(a){return!b(a)}Aa(a,c);var p=e.contextDep,f=c.def(),k=c.def();a.shared.props=k;a.batchId=f;var H=a.scope(),h=a.scope();c(H.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",k,"=","a0","[",f,"];",h,"}",H.exit);e.needsContext&&ga(a,h,e.context);e.needsFramebuffer&&Da(a,h,e.framebuffer);qa(a,h,e.state,b);e.profile&&
b(e.profile)&&Ma(a,h,e,!1,!0);l?(e.useVAO?e.drawVAO?b(e.drawVAO)?h(a.shared.vao,".setVAO(",e.drawVAO.append(a,h),");"):H(a.shared.vao,".setVAO(",e.drawVAO.append(a,H),");"):H(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(H(a.shared.vao,".setVAO(null);"),F(a,H,e,l.attributes,q),F(a,h,e,l.attributes,b)),eb(a,H,e,l.uniforms,q,!1),eb(a,h,e,l.uniforms,b,!0),Ua(a,H,h,e)):(c=a.global.def("{}"),l=e.shader.progVar.append(a,h),k=h.def(l,".id"),H=h.def(c,"[",k,"]"),h(a.shared.gl,".useProgram(",l,".program);",
"if(!",H,"){",H,"=",c,"[",k,"]=",a.link(function(c){return v(ta,a,e,c,2)}),"(",l,");}",H,".call(this,a0[",f,"],",f,");"))}function td(a,c){function e(a){return a.contextDep&&b||a.propDep}var l=a.proc("batch",2);a.batchId="0";Aa(a,l);var b=!1,q=!0;m(c.context).forEach(function(a){b=b||c.context[a].propDep});b||(ga(a,l,c.context),q=!1);var p=c.framebuffer,f=!1;p?(p.propDep?b=f=!0:p.contextDep&&b&&(f=!0),f||Da(a,l,p)):Da(a,l,null);c.state.viewport&&c.state.viewport.propDep&&(b=!0);ka(a,l,c);qa(a,l,c.state,
function(a){return!e(a)});c.profile&&e(c.profile)||Ma(a,l,c,!1,"a1");c.contextDep=b;c.needsContext=q;c.needsFramebuffer=f;q=c.shader.progVar;if(q.contextDep&&b||q.propDep)va(a,l,c,null);else if(q=q.append(a,l),l(a.shared.gl,".useProgram(",q,".program);"),c.shader.program)va(a,l,c,c.shader.program);else{l(a.shared.vao,".setVAO(null);");var p=a.global.def("{}"),f=l.def(q,".id"),k=l.def(p,"[",f,"]");l(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",p,"[",f,"]=",a.link(function(e){return v(va,a,
c,e,2)}),"(",q,");",k,".call(this,a0,a1);"))}0<m(c.state).length&&l(a.shared.current,".dirty=true;");a.shared.vao&&l(a.shared.vao,".setVAO(null);")}function Hb(a,c){function e(v){var q=c.shader[v];q&&l.set(b.shader,"."+v,q.append(a,l))}var l=a.proc("scope",3);a.batchId="a2";var b=a.shared,v=b.current;ga(a,l,c.context);c.framebuffer&&c.framebuffer.append(a,l);K(m(c.state)).forEach(function(e){var v=c.state[e].append(a,l);A(v)?v.forEach(function(c,b){l.set(a.next[e],"["+b+"]",c)}):l.set(b.next,"."+
e,v)});Ma(a,l,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(e){var v=c.draw[e];v&&l.set(b.draw,"."+e,""+v.append(a,l))});m(c.uniforms).forEach(function(e){var v=c.uniforms[e].append(a,l);Array.isArray(v)&&(v="["+v.join()+"]");l.set(b.uniforms,"["+z.id(e)+"]",v)});m(c.attributes).forEach(function(e){var b=c.attributes[e].append(a,l),v=a.scopeAttrib(e);m(new sa).forEach(function(a){l.set(v,"."+a,b[a])})});c.scopeVAO&&l.set(b.vao,".targetVAO",c.scopeVAO.append(a,l));
e("vert");e("frag");0<m(c.state).length&&(l(v,".dirty=true;"),l.exit(v,".dirty=true;"));l("a1(",a.shared.context,",a0,",a.batchId,");")}function ha(a){if("object"===typeof a&&!A(a)){for(var c=m(a),e=0;e<c.length;++e)if(w.isDynamic(a[c[e]]))return!0;return!1}}function H(a,c,e){function l(a,c){q.forEach(function(e){var l=b[e];w.isDynamic(l)&&(l=a.invoke(c,l),c(F,".",e,"=",l,";"))})}var b=c["static"][e];if(b&&ha(b)){var v=a.global,q=m(b),p=!1,f=!1,H=!1,F=a.global.def("{}");q.forEach(function(c){var e=
b[c];if(w.isDynamic(e))"function"===typeof e&&(e=b[c]=w.unbox(e)),c=k(e,null),p=p||c.thisDep,H=H||c.propDep,f=f||c.contextDep;else{v(F,".",c,"=");switch(typeof e){case "number":v(e);break;case "string":v('"',e,'"');break;case "object":Array.isArray(e)&&v("[",e.join(),"]");break;default:v(a.link(e))}v(";")}});c.dynamic[e]=new w.DynamicVariable(4,{thisDep:p,contextDep:f,propDep:H,ref:F,append:l});delete c["static"][e]}}var sa=y.Record,Ea={add:32774,subtract:32778,"reverse subtract":32779};u.ext_blend_minmax&&
(Ea.min=32775,Ea.max=32776);var pa=u.angle_instanced_arrays,ya=u.webgl_draw_buffers,Ja=u.oes_vertex_array_object,la={dirty:!0,profile:P.profile},aa={},ua=[],Ia={},Ba={};x("dither",3024);x("blend.enable",3042);l("blend.color","blendColor",[0,0,0,0]);l("blend.equation","blendEquationSeparate",[32774,32774]);l("blend.func","blendFuncSeparate",[1,0,1,0]);x("depth.enable",2929,!0);l("depth.func","depthFunc",513);l("depth.range","depthRange",[0,1]);l("depth.mask","depthMask",!0);l("colorMask","colorMask",
[!0,!0,!0,!0]);x("cull.enable",2884);l("cull.face","cullFace",1029);l("frontFace","frontFace",2305);l("lineWidth","lineWidth",1);x("polygonOffset.enable",32823);l("polygonOffset.offset","polygonOffset",[0,0]);x("sample.alpha",32926);x("sample.enable",32928);l("sample.coverage","sampleCoverage",[1,!1]);x("stencil.enable",2960);l("stencil.mask","stencilMask",-1);l("stencil.func","stencilFunc",[519,0,-1]);l("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);l("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);x("scissor.enable",3089);l("scissor.box","scissor",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);l("viewport","viewport",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);var mb={gl:h,context:Y,strings:z,next:aa,current:la,draw:Cc,elements:c,buffer:D,shader:na,attributes:y.state,vao:y,uniforms:W,framebuffer:a,extensions:u,timer:fa,isBufferArgs:d},ea={primTypes:Z,compareFuncs:e,blendFuncs:O,blendEquations:Ea,stencilOps:C,glTypes:r,orientationType:f};b.optional(function(){mb.isArrayLike=
A});ya&&(ea.backBuffer=[1029],ea.drawBuffer=L(E.maxDrawbuffers,function(a){return 0===a?[0]:L(a,function(a){return 36064+a})}));var zd=0;return{next:aa,current:la,procs:function(){var a=N(),c=a.proc("poll"),e=a.proc("refresh"),l=a.block();c(l);e(l);var b=a.shared,v=b.gl,q=b.next,p=b.current;l(p,".dirty=false;");Da(a,c);Da(a,e,null,!0);var f;pa&&(f=a.link(pa));u.oes_vertex_array_object&&e(a.link(u.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var k=0;k<E.maxAttributes;++k){var H=e.def(b.attributes,
"[",k,"]"),F=a.cond(H,".buffer");F.then(v,".enableVertexAttribArray(",k,");",v,".bindBuffer(",34962,",",H,".buffer.buffer);",v,".vertexAttribPointer(",k,",",H,".size,",H,".type,",H,".normalized,",H,".stride,",H,".offset);")["else"](v,".disableVertexAttribArray(",k,");",v,".vertexAttrib4f(",k,",",H,".x,",H,".y,",H,".z,",H,".w);",H,".buffer=null;");e(F);pa&&e(f,".vertexAttribDivisorANGLE(",k,",",H,".divisor);")}e(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");
m(Ia).forEach(function(b){var f=Ia[b],k=l.def(q,".",b),H=a.block();H("if(",k,"){",v,".enable(",f,")}else{",v,".disable(",f,")}",p,".",b,"=",k,";");e(H);c("if(",k,"!==",p,".",b,"){",H,"}")});m(Ba).forEach(function(b){var f=Ba[b],k=la[b],H,F,h=a.block();h(v,".",f,"(");A(k)?(f=k.length,H=a.global.def(q,".",b),F=a.global.def(p,".",b),h(L(f,function(a){return H+"["+a+"]"}),");",L(f,function(a){return F+"["+a+"]="+H+"["+a+"];"}).join("")),c("if(",L(f,function(a){return H+"["+a+"]!=="+F+"["+a+"]"}).join("||"),
"){",h,"}")):(H=l.def(q,".",b),F=l.def(p,".",b),h(H,");",p,".",b,"=",H,";"),c("if(",H,"!==",F,"){",h,"}"));e(h)});return a.compile()}(),compile:function(a,c,e,l,b){var v=N();v.stats=v.link(b);m(c["static"]).forEach(function(a){H(v,c,a)});n.forEach(function(c){H(v,a,c)});var q=wa(a,c,e,l,v);R(v,q);Hb(v,q);td(v,q);return G(v.compile(),{destroy:function(){q.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,
"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(X,ia,Fa){function d(m,b){this.id=k++;this.type=m;this.data=b}function K(k){if(0===k.length)return[];var b=k.charAt(0),g=k.charAt(k.length-1);if(1<k.length&&b===g&&('"'===b||"'"===b))return['"'+k.substr(1,k.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(k))return K(k.substr(0,b.index)).concat(K(b[1])).concat(K(k.substr(b.index+
b[0].length)));b=k.split(".");if(1===b.length)return['"'+k.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];k=[];for(g=0;g<b.length;++g)k=k.concat(K(b[g]));return k}function I(k){return"["+K(k).join("][")+"]"}function M(k,b){if("function"===typeof k)return new d(0,k);if("number"===typeof k||"boolean"===typeof k)return new d(5,k);if(Array.isArray(k))return new d(6,k.map(function(k,m){return M(k,b+"["+m+"]")}));if(k instanceof d)return k;g(!1,"invalid option type in uniform "+b)}var g=X("./util/check"),
k=0;ia.exports={DynamicVariable:d,define:function(k,b){return new d(k,I(b+""))},isDynamic:function(k){return"function"===typeof k&&!k._reglType||k instanceof d},unbox:M,accessor:I}},{"./util/check":21}],10:[function(X,ia,Fa){var d=X("./util/check"),K=X("./util/is-typed-array"),I=X("./util/is-ndarray"),M=X("./util/values"),g=X("./constants/primitives.json"),k=X("./constants/usage.json");ia.exports=function(m,b,G,B){function L(b){this.id=w++;A[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=
0}function W(k,n,g,r,e,C,V){k.buffer.bind();var f;n?((f=V)||K(n)&&(!I(n)||K(n.data))||(f=b.oes_element_index_uint?5125:5123),G._initBuffer(k.buffer,n,g,f,3)):(m.bufferData(34963,C,g),k.buffer.dtype=f||5121,k.buffer.usage=g,k.buffer.dimension=3,k.buffer.byteLength=C);f=V;if(!V){switch(k.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125;break;default:d.raise("unsupported type for element array")}k.buffer.dtype=f}k.type=f;d(5125!==f||!!b.oes_element_index_uint,
"32 bit element buffers not supported, enable oes_element_index_uint first");n=e;0>n&&(n=k.buffer.byteLength,5123===f?n>>=1:5125===f&&(n>>=2));k.vertCount=n;n=r;0>r&&(n=4,r=k.buffer.dimension,1===r&&(n=0),2===r&&(n=1),3===r&&(n=4));k.primType=n}function u(b){B.elementsCount--;d(null!==b.buffer,"must not double destroy elements");delete A[b.id];b.buffer.destroy();b.buffer=null}var A={},w=0,Z={uint8:5121,uint16:5123};b.oes_element_index_uint&&(Z.uint32=5125);L.prototype.bind=function(){this.buffer.bind()};
var r=[];return{create:function(b,n){function m(b){if(b)if("number"===typeof b)r(b),e.primType=4,e.vertCount=b|0,e.type=5121;else{var n=null,f=35044,A=-1,h=-1,z=0,u=0;if(Array.isArray(b)||K(b)||I(b))n=b;else if(d.type(b,"object","invalid arguments for elements"),"data"in b&&(n=b.data,d(Array.isArray(n)||K(n)||I(n),"invalid data for element buffer")),"usage"in b&&(d.parameter(b.usage,k,"invalid element buffer usage"),f=k[b.usage]),"primitive"in b&&(d.parameter(b.primitive,g,"invalid element buffer primitive"),
A=g[b.primitive]),"count"in b&&(d("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),h=b.count|0),"type"in b&&(d.parameter(b.type,Z,"invalid buffer type"),u=Z[b.type]),"length"in b)z=b.length|0;else if(z=h,5123===u||5122===u)z*=2;else if(5125===u||5124===u)z*=4;W(e,n,f,A,h,z,u)}else r(),e.primType=4,e.vertCount=0,e.type=5121;return m}var r=G.create(null,34963,!0),e=new L(r._buffer);B.elementsCount++;m(b);m._reglType="elements";m._elements=e;m.subdata=function(e,b){r.subdata(e,
b);return m};m.destroy=function(){u(e)};return m},createStream:function(b){var k=r.pop();k||(k=new L(G.create(null,34963,!0,!1)._buffer));W(k,b,35040,-1,-1,0,0);return k},destroyStream:function(b){r.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof L?b._elements:null},clear:function(){M(A).forEach(u)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(X,
ia,Fa){var d=X("./util/sorted-object-keys"),K=X("./util/check");ia.exports=function(I,M){function g(b){K.type(b,"string","extension name must be string");b=b.toLowerCase();var m;try{m=k[b]=I.getExtension(b)}catch(g){}return!!m}for(var k={},m=0;m<M.extensions.length;++m){var b=M.extensions[m];if(!g(b))return M.onDestroy(),M.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}M.optionalExtensions.forEach(g);return{extensions:k,
restore:function(){d(k).forEach(function(b){if(k[b]&&!g(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(X,ia,Fa){var d=X("./util/check"),K=X("./util/values"),I=X("./util/extend"),M=[6407,6408],g=[];g[6408]=4;g[6407]=3;var k=[];k[5121]=1;k[5126]=4;k[36193]=2;var m=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};ia.exports=function(G,B,L,W,u,A){function w(a,c,e){this.target=a;this.texture=c;this.renderbuffer=e;var b=a=0;c?(a=c.width,b=c.height):e&&(a=e.width,b=e.height);this.width=a;this.height=b}function Z(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function r(a,c,e){if(a){if(a.texture){a=a.texture._texture;var b=Math.max(1,a.height);d(Math.max(1,a.width)===c&&b===e,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,
d(a.width===c&&a.height===e,"inconsistent width/height for renderbuffer");a.refCount+=1}}function U(a,c){c&&(c.texture?G.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):G.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function n(a){var c=3553,e=null,b=null,k=a;"object"===typeof a&&(k=a.data,"target"in a&&(c=a.target|0));d.type(k,"function","invalid attachment data");a=k._reglType;"texture2d"===a?(e=k,d(3553===c)):"textureCube"===a?(e=k,d(34069<=
c&&34075>c,"invalid cube map target")):"renderbuffer"===a?(b=k,c=36161):d.raise("invalid regl object for attachment");return new w(c,e,b)}function O(a,c,e,b,k){if(e)return a=W.create2D({width:a,height:c,format:b,type:k}),a._texture.refCount=0,new w(3553,a,null);a=u.create({width:a,height:c,format:b});a._renderbuffer.refCount=0;return new w(36161,null,a)}function ja(a){return a&&(a.texture||a.renderbuffer)}function e(a,c,e){a&&(a.texture?a.texture.resize(c,e):a.renderbuffer&&a.renderbuffer.resize(c,
e),a.width=c,a.height=e)}function C(){this.id=c++;t[this.id]=this;this.framebuffer=G.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function V(a){a.colorAttachments.forEach(Z);Z(a.depthAttachment);Z(a.stencilAttachment);Z(a.depthStencilAttachment)}function f(a){var c=a.framebuffer;d(c,"must not double destroy framebuffer");G.deleteFramebuffer(c);a.framebuffer=null;A.framebufferCount--;delete t[a.id]}
function ba(a){var c;G.bindFramebuffer(36160,a.framebuffer);var e=a.colorAttachments;for(c=0;c<e.length;++c)U(36064+c,e[c]);for(c=e.length;c<L.maxColorAttachments;++c)G.framebufferTexture2D(36160,36064+c,3553,null,0);G.framebufferTexture2D(36160,33306,3553,null,0);G.framebufferTexture2D(36160,36096,3553,null,0);G.framebufferTexture2D(36160,36128,3553,null,0);U(36096,a.depthAttachment);U(36128,a.stencilAttachment);U(33306,a.depthStencilAttachment);a=G.checkFramebufferStatus(36160);G.isContextLost()||
36053===a||d.raise("framebuffer configuration not supported, status = "+b[a]);G.bindFramebuffer(36160,z.next?z.next.framebuffer:null);z.cur=z.next;G.getError()}function h(a,c){function b(a,c){var e;d(z.next!==h,"can not update framebuffer which is currently in use");var f=0,t=0,x=!0,l=!0;e=null;var C=!0,Q="rgba",u="uint8",A=1,q=null,J=null,da=null,S=!1;if("number"===typeof a)f=a|0,t=c|0||f;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(t=a.shape,d(Array.isArray(t)&&
2<=t.length,"invalid shape for framebuffer"),f=t[0],t=t[1]):("radius"in a&&(f=t=a.radius),"width"in a&&(f=a.width),"height"in a&&(t=a.height));if("color"in a||"colors"in a)e=a.color||a.colors,Array.isArray(e)&&d(1===e.length||B.webgl_draw_buffers,"multiple render targets not supported");if(!e){"colorCount"in a&&(A=a.colorCount|0,d(0<A,"invalid color buffer count"));"colorTexture"in a&&(C=!!a.colorTexture,Q="rgba4");if("colorType"in a){u=a.colorType;if(C)d(B.oes_texture_float||!("float"===u||"float32"===
u),"you must enable OES_texture_float in order to use floating point framebuffer objects"),d(B.oes_texture_half_float||!("half float"===u||"float16"===u),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===u||"float16"===u)d(B.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Q="rgba16f";else if("float"===u||"float32"===u)d(B.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
Q="rgba32f";d.oneOf(u,D,"invalid color type")}"colorFormat"in a&&(Q=a.colorFormat,0<=ca.indexOf(Q)?C=!0:0<=E.indexOf(Q)?C=!1:d.optional(function(){if(C)d.oneOf(a.colorFormat,ca,"invalid color format for texture");else d.oneOf(a.colorFormat,E,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)S=!(!a.depthTexture&&!a.depthStencilTexture),d(!S||B.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?x=a.depth:
(q=a.depth,l=!1));"stencil"in a&&("boolean"===typeof a.stencil?l=a.stencil:(J=a.stencil,x=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?x=l=a.depthStencil:(da=a.depthStencil,l=x=!1))}else f=t=1;var w=null,W=null,K=null,wa=null;if(Array.isArray(e))w=e.map(n);else if(e)w=[n(e)];else for(w=Array(A),e=0;e<A;++e)w[e]=O(f,t,C,Q,u);d(B.webgl_draw_buffers||1>=w.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");d(w.length<=L.maxColorAttachments,
"too many color attachments, not supported");f=f||w[0].width;t=t||w[0].height;q?W=n(q):x&&!l&&(W=O(f,t,S,"depth","uint32"));J?K=n(J):l&&!x&&(K=O(f,t,!1,"stencil","uint8"));da?wa=n(da):!q&&!J&&l&&x&&(wa=O(f,t,S,"depth stencil","depth stencil"));d(1>=!!q+!!J+!!da,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");x=null;for(e=0;e<w.length;++e)r(w[e],f,t),d(!w[e]||w[e].texture&&0<=M.indexOf(w[e].texture._texture.format)||w[e].renderbuffer&&0<=m.indexOf(w[e].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+e+" is invalid"),w[e]&&w[e].texture&&(l=g[w[e].texture._texture.format]*k[w[e].texture._texture.type],null===x?x=l:d(x===l,"all color attachments much have the same number of bits per pixel."));r(W,f,t);d(!W||W.texture&&6402===W.texture._texture.format||W.renderbuffer&&33189===W.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");r(K,f,t);d(!K||K.renderbuffer&&36168===K.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
r(wa,f,t);d(!wa||wa.texture&&34041===wa.texture._texture.format||wa.renderbuffer&&34041===wa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");V(h);h.width=f;h.height=t;h.colorAttachments=w;h.depthAttachment=W;h.stencilAttachment=K;h.depthStencilAttachment=wa;b.color=w.map(ja);b.depth=ja(W);b.stencil=ja(K);b.depthStencil=ja(wa);b.width=h.width;b.height=h.height;ba(h);return b}var h=new C;A.framebufferCount++;b(a,c);return I(b,{resize:function(a,c){d(z.next!==
h,"can not resize a framebuffer which is currently in use");var k=Math.max(a|0,1),f=Math.max(c|0||k,1);if(k===h.width&&f===h.height)return b;for(var t=h.colorAttachments,n=0;n<t.length;++n)e(t[n],k,f);e(h.depthAttachment,k,f);e(h.stencilAttachment,k,f);e(h.depthStencilAttachment,k,f);h.width=b.width=k;h.height=b.height=f;ba(h);return b},_reglType:"framebuffer",_framebuffer:h,destroy:function(){f(h);V(h)},use:function(a){z.setFBO({framebuffer:b},a)}})}var z={cur:null,next:null,dirty:!1,setFBO:null},
ca=["rgba"],E=["rgba4","rgb565","rgb5 a1"];B.ext_srgb&&E.push("srgba");B.ext_color_buffer_half_float&&E.push("rgba16f","rgb16f");B.webgl_color_buffer_float&&E.push("rgba32f");var D=["uint8"];B.oes_texture_half_float&&D.push("half float","float16");B.oes_texture_float&&D.push("float","float32");var c=0,t={};return I(z,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof C)?a:null},create:h,createCube:function(a){function c(a){var b;d(0>
e.indexOf(z.next),"can not update framebuffer which is currently in use");var k={color:null},f=0,t=null;b="rgba";var n="uint8",m=1;if("number"===typeof a)f=a|0;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(f=a.shape,d(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),d(f[0]===f[1],"cube framebuffer must be square"),f=f[0]):("radius"in a&&(f=a.radius|0),"width"in a?(f=a.width|0,"height"in a&&d(a.height===f,"must be square")):"height"in a&&(f=a.height|0));
if("color"in a||"colors"in a)t=a.color||a.colors,Array.isArray(t)&&d(1===t.length||B.webgl_draw_buffers,"multiple render targets not supported");t||("colorCount"in a&&(m=a.colorCount|0,d(0<m,"invalid color buffer count")),"colorType"in a&&(d.oneOf(a.colorType,D,"invalid color type"),n=a.colorType),"colorFormat"in a&&(b=a.colorFormat,d.oneOf(a.colorFormat,ca,"invalid color format for texture")));"depth"in a&&(k.depth=a.depth);"stencil"in a&&(k.stencil=a.stencil);"depthStencil"in a&&(k.depthStencil=
a.depthStencil)}else f=1;if(t)if(Array.isArray(t))for(a=[],b=0;b<t.length;++b)a[b]=t[b];else a=[t];else for(a=Array(m),t={radius:f,format:b,type:n},b=0;b<m;++b)a[b]=W.createCube(t);k.color=Array(a.length);for(b=0;b<a.length;++b)m=a[b],d("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),f=f||m.width,d(m.width===f&&m.height===f,"invalid cube map shape"),k.color[b]={target:34069,data:a[b]};for(b=0;6>b;++b){for(m=0;m<a.length;++m)k.color[m].target=34069+b;0<b&&(k.depth=e[0].depth,
k.stencil=e[0].stencil,k.depthStencil=e[0].depthStencil);if(e[b])e[b](k);else e[b]=h(k)}return I(c,{width:f,height:f,color:a})}var e=Array(6);c(a);return I(c,{faces:e,resize:function(a){var b=a|0;d(0<b&&b<=L.maxCubeMapSize,"invalid radius for cube fbo");if(b===c.width)return c;var k=c.color;for(a=0;a<k.length;++a)k[a].resize(b);for(a=0;6>a;++a)e[a].resize(b);c.width=c.height=b;return c},_reglType:"framebufferCube",destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){K(t).forEach(f)},
restore:function(){z.cur=null;z.next=null;z.dirty=!0;K(t).forEach(function(a){a.framebuffer=G.createFramebuffer();ba(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(X,ia,Fa){var d=X("./util/sorted-object-keys"),K=X("./util/pool");ia.exports=function(I,M){var g=1;M.ext_texture_filter_anisotropic&&(g=I.getParameter(34047));var k=1,m=1;M.webgl_draw_buffers&&(k=I.getParameter(34852),m=I.getParameter(36063));var b=!!M.oes_texture_float;if(b){b=I.createTexture();I.bindTexture(3553,
b);I.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var G=I.createFramebuffer();I.bindFramebuffer(36160,G);I.framebufferTexture2D(36160,36064,3553,b,0);I.bindTexture(3553,null);if(36053!==I.checkFramebufferStatus(36160))b=!1;else{I.viewport(0,0,1,1);I.clearColor(1,0,0,1);I.clear(16384);var B=K.allocType(5126,4);I.readPixels(0,0,1,1,6408,5126,B);I.getError()?b=!1:(I.deleteFramebuffer(G),I.deleteTexture(b),b=1===B[0]);K.freeType(B)}}B=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(B=I.createTexture(),G=K.allocType(5121,36),I.activeTexture(33984),I.bindTexture(34067,B),I.texImage2D(34069,0,6408,3,3,0,6408,5121,G),K.freeType(G),I.bindTexture(34067,null),I.deleteTexture(B),B=!I.getError());return{colorBits:[I.getParameter(3410),I.getParameter(3411),I.getParameter(3412),I.getParameter(3413)],depthBits:I.getParameter(3414),stencilBits:I.getParameter(3415),subpixelBits:I.getParameter(3408),extensions:d(M).filter(function(b){return!!M[b]}),
maxAnisotropic:g,maxDrawbuffers:k,maxColorAttachments:m,pointSizeDims:I.getParameter(33901),lineWidthDims:I.getParameter(33902),maxViewportDims:I.getParameter(3386),maxCombinedTextureUnits:I.getParameter(35661),maxCubeMapSize:I.getParameter(34076),maxRenderbufferSize:I.getParameter(34024),maxTextureUnits:I.getParameter(34930),maxTextureSize:I.getParameter(3379),maxAttributes:I.getParameter(34921),maxVertexUniforms:I.getParameter(36347),maxVertexTextureUnits:I.getParameter(35660),maxVaryingVectors:I.getParameter(36348),
maxFragmentUniforms:I.getParameter(36349),glsl:I.getParameter(35724),renderer:I.getParameter(7937),vendor:I.getParameter(7936),version:I.getParameter(7938),readFloat:b,npotTextureCube:B}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(X,ia,Fa){var d=X("./util/check"),K=X("./util/is-typed-array");ia.exports=function(I,M,g,k,m,b,G){function B(W){var u;null===M.next?(d(m.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
u=5121):(d(null!==M.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=M.next.colorAttachments[0].texture._texture.type,d.optional(function(){b.oes_texture_float?(d(5121===u||5126===u,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===u&&d(G.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):d(5121===u,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var A=0,w=0,B=k.framebufferWidth,r=k.framebufferHeight,U=null;K(W)?U=W:W&&(d.type(W,"object","invalid arguments to regl.read()"),A=W.x|0,w=W.y|0,d(0<=A&&A<k.framebufferWidth,"invalid x offset for regl.read"),d(0<=w&&w<k.framebufferHeight,"invalid y offset for regl.read"),B=(W.width||k.framebufferWidth-A)|0,r=(W.height||k.framebufferHeight-w)|0,U=W.data||null);U&&(5121===u?d(U instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===u&&d(U instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));d(0<B&&B+A<=k.framebufferWidth,"invalid width for read pixels");d(0<r&&r+w<=k.framebufferHeight,"invalid height for read pixels");g();W=B*r*4;U||(5121===u?U=new Uint8Array(W):5126===u&&(U=U||new Float32Array(W)));d.isTypedArray(U,"data buffer for regl.read() must be a typedarray");d(U.byteLength>=W,"data buffer for regl.read() too small");I.pixelStorei(3333,4);I.readPixels(A,w,B,r,6408,u,U);return U}function L(b){var k;
M.setFBO({framebuffer:b.framebuffer},function(){k=B(b)});return k}return function(b){return b&&"framebuffer"in b?L(b):B(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(X,ia,Fa){var d=X("./util/sorted-object-keys"),K=X("./util/check"),I=X("./util/values"),M=[];M[32854]=2;M[32855]=2;M[36194]=2;M[33189]=2;M[36168]=1;M[34041]=4;M[35907]=4;M[34836]=16;M[34842]=8;M[34843]=6;ia.exports=function(g,k,m,b,G){function B(b){this.id=A++;this.refCount=1;this.renderbuffer=b;this.format=32854;
this.height=this.width=0;G.profile&&(this.stats={size:0})}function L(k){var m=k.renderbuffer;K(m,"must not double destroy renderbuffer");g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(m);k.renderbuffer=null;k.refCount=0;delete w[k.id];b.renderbufferCount--}var W={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};k.ext_srgb&&(W.srgba=35907);k.ext_color_buffer_half_float&&(W.rgba16f=34842,W.rgb16f=34843);k.webgl_color_buffer_float&&(W.rgba32f=34836);var u=
[];d(W).forEach(function(b){u[W[b]]=b});var A=0,w={};B.prototype.decRef=function(){0>=--this.refCount&&L(this)};G.profile&&(b.getTotalRenderbufferSize=function(){var b=0;d(w).forEach(function(k){b+=w[k].stats.size});return b});return{create:function(k,r){function d(b,k){var e=0,C=0,r=32854;"object"===typeof b&&b?("shape"in b?(C=b.shape,K(Array.isArray(C)&&2<=C.length,"invalid renderbuffer shape"),e=C[0]|0,C=C[1]|0):("radius"in b&&(e=C=b.radius|0),"width"in b&&(e=b.width|0),"height"in b&&(C=b.height|
0)),"format"in b&&(K.parameter(b.format,W,"invalid renderbuffer format"),r=W[b.format])):"number"===typeof b?(e=b|0,C="number"===typeof k?k|0:e):b?K.raise("invalid arguments to renderbuffer constructor"):e=C=1;K(0<e&&0<C&&e<=m.maxRenderbufferSize&&C<=m.maxRenderbufferSize,"invalid renderbuffer size");if(e!==n.width||C!==n.height||r!==n.format)return d.width=n.width=e,d.height=n.height=C,n.format=r,g.bindRenderbuffer(36161,n.renderbuffer),g.renderbufferStorage(36161,r,e,C),K(0===g.getError(),"invalid render buffer format"),
G.profile&&(n.stats.size=M[n.format]*n.width*n.height),d.format=u[n.format],d}var n=new B(g.createRenderbuffer());w[n.id]=n;b.renderbufferCount++;d(k,r);d.resize=function(b,k){var e=b|0,C=k|0||e;if(e===n.width&&C===n.height)return d;K(0<e&&0<C&&e<=m.maxRenderbufferSize&&C<=m.maxRenderbufferSize,"invalid renderbuffer size");d.width=n.width=e;d.height=n.height=C;g.bindRenderbuffer(36161,n.renderbuffer);g.renderbufferStorage(36161,n.format,e,C);K(0===g.getError(),"invalid render buffer format");G.profile&&
(n.stats.size=M[n.format]*n.width*n.height);return d};d._reglType="renderbuffer";d._renderbuffer=n;G.profile&&(d.stats=n.stats);d.destroy=function(){n.decRef()};return d},clear:function(){I(w).forEach(L)},restore:function(){I(w).forEach(function(b){b.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,b.renderbuffer);g.renderbufferStorage(36161,b.format,b.width,b.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(X,
ia,Fa){var d=X("./util/sorted-object-keys"),K=X("./util/check"),I=X("./util/extend"),M=X("./util/values");ia.exports=function(g,k,m,b){function G(b,k,m,e){this.name=b;this.id=k;this.location=m;this.info=e}function B(b,k){for(var m=0;m<b.length;++m)if(b[m].id===k.id){b[m].location=k.location;return}b.push(k)}function L(b,m,r){var e=35632===b?A:w,C=e[m];if(!C){var d=k.str(m),C=g.createShader(b);g.shaderSource(C,d);g.compileShader(C);K.shaderError(g,C,d,b,r);e[m]=C}return C}function W(k,m){this.id=U++;
this.fragId=k;this.vertId=m;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(m,r,d){var e;e=L(35632,m.fragId);var C=L(35633,m.vertId),V=m.program=g.createProgram();g.attachShader(V,e);g.attachShader(V,C);if(d)for(e=0;e<d.length;++e)C=d[e],g.bindAttribLocation(V,C[0],C[1]);g.linkProgram(V);K.linkError(g,V,k.str(m.fragId),k.str(m.vertId),r);d=g.getProgramParameter(V,35718);b.profile&&(m.stats.uniformsCount=d);
C=m.uniforms;for(e=0;e<d;++e)if(r=g.getActiveUniform(V,e))if(1<r.size)for(var f=0;f<r.size;++f){var u=r.name.replace("[0]","["+f+"]");B(C,new G(u,k.id(u),g.getUniformLocation(V,u),r))}else B(C,new G(r.name,k.id(r.name),g.getUniformLocation(V,r.name),r));d=g.getProgramParameter(V,35721);b.profile&&(m.stats.attributesCount=d);m=m.attributes;for(e=0;e<d;++e)(r=g.getActiveAttrib(V,e))&&B(m,new G(r.name,k.id(r.name),g.getAttribLocation(V,r.name),r))}var A={},w={},Z={},r=[],U=0;b.profile&&(m.getMaxUniformsCount=
function(){var b=0;r.forEach(function(k){k.stats.uniformsCount>b&&(b=k.stats.uniformsCount)});return b},m.getMaxAttributesCount=function(){var b=0;r.forEach(function(k){k.stats.attributesCount>b&&(b=k.stats.attributesCount)});return b});return{clear:function(){var b=g.deleteShader.bind(g);M(A).forEach(b);A={};M(w).forEach(b);w={};r.forEach(function(b){g.deleteProgram(b.program)});r.length=0;Z={};m.shaderCount=0},program:function(b,k,M,e){K.command(0<=b,"missing vertex shader",M);K.command(0<=k,"missing fragment shader",
M);var C=Z[k];C||(C=Z[k]={});var V=C[b];if(V&&(V.refCount++,!e))return V;var f=new W(k,b);m.shaderCount++;u(f,M,e);V||(C[b]=f);r.push(f);return I(f,{destroy:function(){f.refCount--;if(0>=f.refCount){g.deleteProgram(f.program);var e=r.indexOf(f);r.splice(e,1);m.shaderCount--}0>=C[f.vertId].refCount&&(g.deleteShader(w[f.vertId]),delete w[f.vertId],delete Z[f.fragId][f.vertId]);d(Z[f.fragId]).length||(g.deleteShader(A[f.fragId]),delete A[f.fragId],delete Z[f.fragId])}})},restore:function(){A={};w={};
for(var b=0;b<r.length;++b)u(r[b],null,r[b].attributes.map(function(b){return[b.location,b.name]}))},shader:L,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(X,ia,Fa){ia.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(X,ia,Fa){ia.exports=function(){var d={"":0},K=[""];return{id:function(I){var M=
d[I];if(M)return M;M=d[I]=K.length;K.push(I);return M},str:function(d){return K[d]}}}},{}],19:[function(X,ia,Fa){function d(c){return"[object "+c+"]"}function K(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function I(c){return Array.isArray(c)&&0!==c.length&&Z(c[0])?!0:!1}function M(c){return Object.prototype.toString.call(c)}function g(c){if(!c)return!1;var e=M(c);return 0<=ca.indexOf(e)?!0:K(c)||I(c)||u(c)}function k(c,e){36193===c.type?(c.data=w(e),A.freeType(e)):c.data=e}
function m(c,b,a,k,f,h){c="undefined"!==typeof D[c]?D[c]:e[c]*E[b];h&&(c*=6);if(f){for(k=0;1<=a;)k+=c*a*a,a/=2;return k}return c*a*k}var b=X("./util/sorted-object-keys"),G=X("./util/check"),B=X("./util/extend"),L=X("./util/values"),W=X("./util/is-typed-array"),u=X("./util/is-ndarray"),A=X("./util/pool"),w=X("./util/to-half-float"),Z=X("./util/is-array-like"),r=X("./util/flatten"),U=X("./util/is-pow2");Fa=X("./constants/arraytypes.json");var n=X("./constants/arraytypes.json"),O=[9984,9986,9985,9987],
ja=[0,6409,6410,6407,6408],e={};e[6409]=e[6406]=e[6402]=1;e[34041]=e[6410]=2;e[6407]=e[35904]=3;e[6408]=e[35906]=4;var C=d("HTMLCanvasElement"),V=d("OffscreenCanvas"),f=d("CanvasRenderingContext2D"),ba=d("ImageBitmap"),h=d("HTMLImageElement"),z=d("HTMLVideoElement"),ca=b(Fa).concat([C,V,f,ba,h,z]),E=[];E[5121]=1;E[5126]=4;E[36193]=2;E[5123]=2;E[5125]=4;var D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[34041]=4;D[33776]=.5;D[33777]=.5;D[33778]=1;D[33779]=1;D[35986]=.5;D[35987]=1;D[34798]=1;D[35840]=.5;D[35841]=
.25;D[35842]=.5;D[35843]=.25;D[36196]=.5;ia.exports=function(c,t,a,d,y,D,E){function Y(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function fa(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;
a.width=c.width;a.height=c.height;a.channels=c.channels}function P(c,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(G.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),c.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(G.type(b.flipY,"boolean","invalid texture flip"),c.flipY=b.flipY);"alignment"in b&&(G.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),c.unpackAlignment=b.alignment);"colorSpace"in b&&(G.parameter(b.colorSpace,Ua,"invalid colorSpace"),c.colorSpace=
Ua[b.colorSpace]);if("type"in b){var l=b.type;G(t.oes_texture_float||!("float"===l||"float32"===l),"you must enable the OES_texture_float extension in order to use floating point textures.");G(t.oes_texture_half_float||!("half float"===l||"float16"===l),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");G(t.webgl_depth_texture||!("uint16"===l||"uint32"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
G.parameter(l,v,"invalid texture type");c.type=v[l]}var k=c.width,q=c.height,f=c.channels,l=!1;"shape"in b?(G(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),k=b.shape[0],q=b.shape[1],3===b.shape.length&&(f=b.shape[2],G(0<f&&4>=f,"invalid number of channels"),l=!0),G(0<=k&&k<=a.maxTextureSize,"invalid width"),G(0<=q&&q<=a.maxTextureSize,"invalid height")):("radius"in b&&(k=q=b.radius,G(0<=k&&k<=a.maxTextureSize,"invalid radius")),"width"in b&&(k=b.width,G(0<=k&&k<=a.maxTextureSize,
"invalid width")),"height"in b&&(q=b.height,G(0<=q&&q<=a.maxTextureSize,"invalid height")),"channels"in b&&(f=b.channels,G(0<f&&4>=f,"invalid number of channels"),l=!0));c.width=k|0;c.height=q|0;c.channels=f|0;k=!1;"format"in b&&(k=b.format,G(t.webgl_depth_texture||!("depth"===k||"depth stencil"===k),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),G.parameter(k,p,"invalid texture format"),q=c.internalformat=p[k],c.format=Ea[q],k in v&&!("type"in b)&&(c.type=
v[k]),k in R&&(c.compressed=!0),k=!0);!l&&k?c.channels=e[c.format]:l&&!k?c.channels!==ja[c.format]&&(c.format=c.internalformat=ja[c.channels]):k&&l&&G(c.channels===e[c.format],"number of channels inconsistent with specified format")}}function T(a){c.pixelStorei(37440,a.flipY);c.pixelStorei(37441,a.premultiplyAlpha);c.pixelStorei(37443,a.colorSpace);c.pixelStorei(3317,a.unpackAlignment)}function x(){Y.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function l(c,e){var b=null;g(e)?b=e:e&&(G.type(e,"object","invalid pixel data type"),P(c,e),"x"in e&&(c.xOffset=e.x|0),"y"in e&&(c.yOffset=e.y|0),g(e.data)&&(b=e.data));G(!c.compressed||b instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(e.copy){G(!b,"can not specify copy and data field for the same texture");var l=y.viewportWidth,v=y.viewportHeight;c.width=c.width||l-c.xOffset;c.height=c.height||v-c.yOffset;c.needsCopy=!0;G(0<=c.xOffset&&c.xOffset<l&&0<=c.yOffset&&
c.yOffset<v&&0<c.width&&c.width<=l&&0<c.height&&c.height<=v,"copy texture read out of bounds")}else if(!b)c.width=c.width||1,c.height=c.height||1,c.channels=c.channels||4;else if(W(b))c.channels=c.channels||4,c.data=b,"type"in e||5121!==c.type||(c.type=n[Object.prototype.toString.call(b)]|0);else if(K(b)){c.channels=c.channels||4;l=b;v=l.length;switch(c.type){case 5121:case 5123:case 5125:case 5126:v=A.allocType(c.type,v);v.set(l);c.data=v;break;case 36193:c.data=w(l);break;default:G.raise("unsupported texture type, must specify a typed array")}c.alignment=
1;c.needsFree=!0}else if(u(b)){l=b.data;Array.isArray(l)||5121!==c.type||(c.type=n[Object.prototype.toString.call(l)]|0);var v=b.shape,q=b.stride,p,H,F,t;3===v.length?(F=v[2],t=q[2]):(G(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),t=F=1);p=v[0];H=v[1];v=q[0];q=q[1];c.alignment=1;c.width=p;c.height=H;c.channels=F;c.format=c.internalformat=ja[F];c.needsFree=!0;p=t;b=b.offset;F=c.width;t=c.height;H=c.channels;for(var m=A.allocType(36193===c.type?5126:c.type,F*t*H),R=0,sa=0;sa<t;++sa)for(var Ma=
0;Ma<F;++Ma)for(var Ea=0;Ea<H;++Ea)m[R++]=l[v*Ma+q*sa+p*Ea+b];k(c,m)}else if(M(b)===C||M(b)===V||M(b)===f)M(b)===C||M(b)===V?c.element=b:c.element=b.canvas,c.width=c.element.width,c.height=c.element.height,c.channels=4;else if(M(b)===ba)c.element=b,c.width=b.width,c.height=b.height,c.channels=4;else if(M(b)===h)c.element=b,c.width=b.naturalWidth,c.height=b.naturalHeight,c.channels=4;else if(M(b)===z)c.element=b,c.width=b.videoWidth,c.height=b.videoHeight,c.channels=4;else if(I(b)){l=c.width||b[0].length;
v=c.height||b.length;q=c.channels;q=Z(b[0][0])?q||b[0][0].length:q||1;p=r.shape(b);F=1;for(t=0;t<p.length;++t)F*=p[t];F=A.allocType(36193===c.type?5126:c.type,F);r.flatten(b,p,"",F);k(c,F);c.alignment=1;c.width=l;c.height=v;c.channels=q;c.format=c.internalformat=ja[q];c.needsFree=!0}5126===c.type?G(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===c.type&&G(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function N(a,b,e,l,k){var v=a.element,q=a.data,f=a.internalformat,p=a.format,H=a.type,F=a.width,h=a.height;T(a);v?c.texSubImage2D(b,k,e,l,p,H,v):a.compressed?c.compressedTexSubImage2D(b,k,e,l,f,F,h,q):a.needsCopy?(d(),c.copyTexSubImage2D(b,k,e,l,a.xOffset,a.yOffset,F,h)):c.texSubImage2D(b,k,e,l,F,h,p,H,q)}function Q(){return pa.pop()||new x}function za(a){a.needsFree&&A.freeType(a.data);x.call(a);pa.push(a)}function oa(){Y.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function q(a,c,b){var e=a.images[0]=Q();a.mipmask=1;e.width=a.width=c;e.height=a.height=b;e.channels=a.channels=4}function J(a,c){var b=null;if(g(c))b=a.images[0]=Q(),fa(b,a),l(b,c),a.mipmask=1;else if(P(a,c),Array.isArray(c.mipmap))for(var e=c.mipmap,k=0;k<e.length;++k)b=a.images[k]=Q(),fa(b,a),b.width>>=k,b.height>>=k,l(b,e[k]),a.mipmask|=1<<k;else b=a.images[0]=Q(),fa(b,a),l(b,c),a.mipmask=1;fa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||G(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(a,b){for(var e=a.images,l=0;l<e.length&&e[l];++l){var k=e[l],v=b,q=l,f=k.element,p=k.data,H=k.internalformat,F=k.format,h=k.type,t=k.width,m=k.height;T(k);f?c.texImage2D(v,q,F,F,h,f):k.compressed?c.compressedTexImage2D(v,q,H,t,m,0,p):k.needsCopy?(d(),c.copyTexImage2D(v,q,F,k.xOffset,k.yOffset,t,m,0)):c.texImage2D(v,
q,F,t,m,0,F,h,p||null)}}function S(){var a=ya.pop()||new oa;Y.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function ma(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&za(c[b]),c[b]=null;ya.push(a)}function ra(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ca(c,b){if("min"in b){var e=b.min;G.parameter(e,eb);c.minFilter=eb[e];0<=O.indexOf(c.minFilter)&&!("faces"in b)&&(c.genMipmaps=!0)}"mag"in b&&
(e=b.mag,G.parameter(e,F),c.magFilter=F[e]);var e=c.wrapS,l=c.wrapT;if("wrap"in b){var k=b.wrap;"string"===typeof k?(G.parameter(k,Ma),e=l=Ma[k]):Array.isArray(k)&&(G.parameter(k[0],Ma),G.parameter(k[1],Ma),e=Ma[k[0]],l=Ma[k[1]])}else"wrapS"in b&&(e=b.wrapS,G.parameter(e,Ma),e=Ma[e]),"wrapT"in b&&(l=b.wrapT,G.parameter(l,Ma),l=Ma[l]);c.wrapS=e;c.wrapT=l;"anisotropic"in b&&(e=b.anisotropic,G("number"===typeof e&&1<=e&&e<=a.maxAnisotropic,"aniso samples must be between 1 and "),c.anisotropic=b.anisotropic);
if("mipmap"in b){e=!1;switch(typeof b.mipmap){case "string":G.parameter(b.mipmap,Aa,"invalid mipmap hint");c.mipmapHint=Aa[b.mipmap];e=c.genMipmaps=!0;break;case "boolean":e=c.genMipmaps=b.mipmap;break;case "object":G(Array.isArray(b.mipmap),"invalid mipmap type");c.genMipmaps=!1;e=!0;break;default:G.raise("invalid mipmap type")}!e||"min"in b||(c.minFilter=9984)}}function wa(a,b){c.texParameteri(b,10241,a.minFilter);c.texParameteri(b,10240,a.magFilter);c.texParameteri(b,10242,a.wrapS);c.texParameteri(b,
10243,a.wrapT);t.ext_texture_filter_anisotropic&&c.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(b))}function ga(a){Y.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ja++;this.refCount=1;this.target=a;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ra;E.profile&&(this.stats={size:0})}function Da(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function ka(){var a=ua[0];a?c.bindTexture(a.target,a.texture):
c.bindTexture(3553,null)}function qa(a){var b=a.texture;G(b,"must not double destroy texture");var e=a.unit,l=a.target;0<=e&&(c.activeTexture(33984+e),c.bindTexture(l,null),ua[e]=null);c.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete la[a.id];D.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ma={repeat:10497,clamp:33071,mirror:33648},F={nearest:9728,linear:9729},eb=B({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},F),Ua={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},p={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},R={};t.ext_srgb&&(p.srgb=35904,p.srgba=35906);t.oes_texture_float&&(v.float32=v["float"]=5126);t.oes_texture_half_float&&(v.float16=v["half float"]=36193);t.webgl_depth_texture&&(B(p,{depth:6402,"depth stencil":34041}),B(v,{uint16:5123,uint32:5125,
"depth stencil":34042}));t.webgl_compressed_texture_s3tc&&B(R,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});t.webgl_compressed_texture_atc&&B(R,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});t.webgl_compressed_texture_pvrtc&&B(R,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});t.webgl_compressed_texture_etc1&&(R["rgb etc1"]=36196);var ta=Array.prototype.slice.call(c.getParameter(34467));
b(R).forEach(function(a){var c=R[a];0<=ta.indexOf(c)&&(p[a]=c)});var va=b(p);a.textureFormats=va;var td=[];b(p).forEach(function(a){td[p[a]]=a});var Hb=[];b(v).forEach(function(a){Hb[v[a]]=a});var ha=[];b(F).forEach(function(a){ha[F[a]]=a});var H=[];b(eb).forEach(function(a){H[eb[a]]=a});var sa=[];b(Ma).forEach(function(a){sa[Ma[a]]=a});var Ea=va.reduce(function(a,c){var b=p[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||t.ext_srgb&&(35904===b||35906===b)?a[b]=b:32855===b||0<=c.indexOf("rgba")?
a[b]=6408:a[b]=6407;return a},{}),pa=[],ya=[],Ja=0,la={},aa=a.maxTextureUnits,ua=Array(aa).map(function(){return null});B(ga.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<aa;++b){var e=ua[b];if(e){if(0<e.bindCount)continue;e.unit=-1}ua[b]=this;a=b;break}a>=aa&&G.raise("insufficient number of texture units");E.profile&&D.maxTextureUnits<a+1&&(D.maxTextureUnits=a+1);this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&qa(this)}});E.profile&&(D.getTotalTextureSize=function(){var a=0;b(la).forEach(function(c){a+=la[c].stats.size});return a});return{create2D:function(b,e){function k(c,b){var e=v.texInfo;ra.call(e);var l=S();"number"===typeof c?"number"===typeof b?q(l,c|0,b|0):q(l,c|0,c|0):c?(G.type(c,"object","invalid arguments to regl.texture"),ca(e,c),J(l,c)):q(l,1,1);e.genMipmaps&&(l.mipmask=(l.width<<1)-1);v.mipmask=l.mipmask;fa(v,l);G.texture2D(e,l,a);v.internalformat=l.internalformat;
k.width=l.width;k.height=l.height;Da(v);da(l,3553);wa(e,3553);ka();ma(l);E.profile&&(v.stats.size=m(v.internalformat,v.type,l.width,l.height,e.genMipmaps,!1));k.format=td[v.internalformat];k.type=Hb[v.type];k.mag=ha[e.magFilter];k.min=H[e.minFilter];k.wrapS=sa[e.wrapS];k.wrapT=sa[e.wrapT];return k}var v=new ga(3553);la[v.id]=v;D.textureCount++;k(b,e);k.subimage=function(a,c,b,e){G(!!a,"must specify image data");c|=0;b|=0;e|=0;var q=Q();fa(q,v);q.width=0;q.height=0;l(q,a);q.width=q.width||(v.width>>
e)-c;q.height=q.height||(v.height>>e)-b;G(v.type===q.type&&v.format===q.format&&v.internalformat===q.internalformat,"incompatible format for texture.subimage");G(0<=c&&0<=b&&c+q.width<=v.width&&b+q.height<=v.height,"texture.subimage write out of bounds");G(v.mipmask&1<<e,"missing mipmap data");G(q.data||q.element||q.needsCopy,"missing image data");Da(v);N(q,3553,c,b,e);ka();za(q);return k};k.resize=function(a,b){var e=a|0,l=b|0||e;if(e===v.width&&l===v.height)return k;k.width=v.width=e;k.height=v.height=
l;Da(v);for(var q=0;v.mipmask>>q;++q){var f=e>>q,p=l>>q;if(!f||!p)break;c.texImage2D(3553,q,v.format,f,p,0,v.format,v.type,null)}ka();E.profile&&(v.stats.size=m(v.internalformat,v.type,e,l,!1,!1));return k};k._reglType="texture2d";k._texture=v;E.profile&&(k.stats=v.stats);k.destroy=function(){v.decRef()};return k},createCube:function(b,e,k,v,f,p){function F(c,b,e,l,k,v){var f,p=h.texInfo;ra.call(p);for(f=0;6>f;++f)t[f]=S();if("number"!==typeof c&&c)if("object"===typeof c)if(b)J(t[0],c),J(t[1],b),
J(t[2],e),J(t[3],l),J(t[4],k),J(t[5],v);else if(ca(p,c),P(h,c),"faces"in c)for(c=c.faces,G(Array.isArray(c)&&6===c.length,"cube faces must be a length 6 array"),f=0;6>f;++f)G("object"===typeof c[f]&&!!c[f],"invalid input for cube map face"),fa(t[f],h),J(t[f],c[f]);else for(f=0;6>f;++f)J(t[f],c);else G.raise("invalid arguments to cube map");else for(c=c|0||1,f=0;6>f;++f)q(t[f],c,c);fa(h,t[0]);G.optional(function(){a.npotTextureCube||G(U(h.width)&&U(h.height),"your browser does not support non power or two texture dimensions")});
h.mipmask=p.genMipmaps?(t[0].width<<1)-1:t[0].mipmask;G.textureCube(h,p,t,a);h.internalformat=t[0].internalformat;F.width=t[0].width;F.height=t[0].height;Da(h);for(f=0;6>f;++f)da(t[f],34069+f);wa(p,34067);ka();E.profile&&(h.stats.size=m(h.internalformat,h.type,F.width,F.height,p.genMipmaps,!0));F.format=td[h.internalformat];F.type=Hb[h.type];F.mag=ha[p.magFilter];F.min=H[p.minFilter];F.wrapS=sa[p.wrapS];F.wrapT=sa[p.wrapT];for(f=0;6>f;++f)ma(t[f]);return F}var h=new ga(34067);la[h.id]=h;D.cubeCount++;
var t=Array(6);F(b,e,k,v,f,p);F.subimage=function(a,c,b,e,k){G(!!c,"must specify image data");G("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");b|=0;e|=0;k|=0;var v=Q();fa(v,h);v.width=0;v.height=0;l(v,c);v.width=v.width||(h.width>>k)-b;v.height=v.height||(h.height>>k)-e;G(h.type===v.type&&h.format===v.format&&h.internalformat===v.internalformat,"incompatible format for texture.subimage");G(0<=b&&0<=e&&b+v.width<=h.width&&e+v.height<=h.height,"texture.subimage write out of bounds");G(h.mipmask&
1<<k,"missing mipmap data");G(v.data||v.element||v.needsCopy,"missing image data");Da(h);N(v,34069+a,b,e,k);ka();za(v);return F};F.resize=function(a){a|=0;if(a!==h.width){F.width=h.width=a;F.height=h.height=a;Da(h);for(var b=0;6>b;++b)for(var e=0;h.mipmask>>e;++e)c.texImage2D(34069+b,e,h.format,a>>e,a>>e,0,h.format,h.type,null);ka();E.profile&&(h.stats.size=m(h.internalformat,h.type,F.width,F.height,!1,!0));return F}};F._reglType="textureCube";F._texture=h;E.profile&&(F.stats=h.stats);F.destroy=function(){h.decRef()};
return F},clear:function(){for(var a=0;a<aa;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),ua[a]=null;L(la).forEach(qa);D.cubeCount=0;D.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<aa;++a){var b=ua[a];b&&(b.bindCount=0,b.unit=-1,ua[a]=null)}L(la).forEach(function(a){a.texture=c.createTexture();c.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)c.texImage2D(3553,b,a.internalformat,a.width>>b,a.height>>b,0,
a.internalformat,a.type,null);else for(var e=0;6>e;++e)c.texImage2D(34069+e,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);wa(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<aa;++a){var b=ua[a];b&&(b.bindCount=0,b.unit=-1,ua[a]=null);c.activeTexture(33984+a);c.bindTexture(3553,null);c.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,
"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(X,ia,Fa){ia.exports=function(d,K){function I(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function M(k,g,d){var A=m.pop()||new I;A.startQueryIndex=k;A.endQueryIndex=g;A.sum=0;A.stats=d;b.push(A)}if(!K.ext_disjoint_timer_query)return null;var g=[],k=[],m=[],b=[],G=[],B=[];return{beginQuery:function(b){var m=g.pop()||K.ext_disjoint_timer_query.createQueryEXT();
K.ext_disjoint_timer_query.beginQueryEXT(35007,m);k.push(m);M(k.length-1,k.length,b)},endQuery:function(){K.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:M,update:function(){var d,M;d=k.length;if(0!==d){B.length=Math.max(B.length,d+1);G.length=Math.max(G.length,d+1);G[0]=0;var u=B[0]=0;for(M=d=0;M<k.length;++M){var A=k[M];K.ext_disjoint_timer_query.getQueryObjectEXT(A,34919)?(u+=K.ext_disjoint_timer_query.getQueryObjectEXT(A,34918),g.push(A)):k[d++]=A;G[M+1]=u;B[M+1]=d}k.length=d;for(M=
d=0;M<b.length;++M){var u=b[M],w=u.startQueryIndex,A=u.endQueryIndex;u.sum+=G[A]-G[w];w=B[w];A=B[A];A===w?(u.stats.gpuTime+=u.sum/1E6,m.push(u)):(u.startQueryIndex=w,u.endQueryIndex=A,b[d++]=u)}b.length=d}},getNumPendingQueries:function(){return k.length},clear:function(){g.push.apply(g,k);for(var b=0;b<g.length;b++)K.ext_disjoint_timer_query.deleteQueryEXT(g[b]);k.length=0;g.length=0},restore:function(){k.length=0;g.length=0}}}},{}],21:[function(X,ia,Fa){function d(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function K(b){b=Error("(regl) "+b);console.error(b);throw b;}function I(b,e){b||K(e)}function M(b){return b?": "+b:""}function g(b,e){switch(e){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function k(b,e,k){0>e.indexOf(b)&&K("invalid value"+
M(k)+". must be one of: "+e)}function m(b,e){for(b+="";b.length<e;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function G(b,e){this.number=b;this.line=e;this.errors=[]}function B(b,e,k){this.file=b;this.line=e;this.message=k}function L(){var b=Error(),b=(b.stack||b).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return e?e[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function W(){var b=Error(),b=(b.stack||b).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return e?e[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function u(e,k){var m=e.split("\n"),h=1,z=0,n={unknown:new b,0:new b};n.unknown.name=n[0].name=k||L();n.unknown.lines.push(new G(0,""));for(var C=0;C<m.length;++C){var r=m[C],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(r);if(c)switch(c[1]){case "line":if(c=/(\d+)(\s+\d+)?/.exec(c[2]))h=c[1]|0,c[2]&&(z=c[2]|0,z in n||(n[z]=new b));break;case "define":if(c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]))n[z].name=
c[1]?d(c[2]):c[2]}n[z].lines.push(new G(h++,r))}O(n).forEach(function(c){var a=n[c];a.lines.forEach(function(c){a.index[c.number]=c})});return n}function A(b){var e=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var k=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);k?e.push(new B(k[1]|0,k[2]|0,k[3].trim())):0<b.length&&e.push(new B("unknown",0,b))}});return e}function w(b,e){e.forEach(function(e){var k=b[e.file];if(k){var f=k.index[e.line];if(f){f.errors.push(e);k.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(e)})}function Z(b){b._commandRef=L()}function r(b,e){var k=W();K(b+" in command "+(e||L())+("unknown"===k?"":" called from "+k))}function U(b,e,k,h){g(b,e)||r("invalid parameter type"+M(k)+". expected "+e+", got "+typeof b,h||L())}function n(b,e){return 32820===b||32819===b||33635===b?2:34042===b?4:C[b]*e}var O=X("./sorted-object-keys"),ja=X("./is-typed-array");X=X("./extend");var e="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
C={};C[5120]=C[5121]=1;C[5122]=C[5123]=C[36193]=C[33635]=C[32819]=C[32820]=2;C[5124]=C[5125]=C[5126]=C[34042]=4;ia.exports=X(I,{optional:function(b){b()},raise:K,commandRaise:r,command:function(b,e,k){b||r(e,k||L())},parameter:function(b,e,k){b in e||K("unknown parameter ("+b+")"+M(k)+". possible values: "+O(e).join())},commandParameter:function(b,e,k,h){b in e||r("unknown parameter ("+b+")"+M(k)+". possible values: "+O(e).join(),h||L())},constructor:function(b){O(b).forEach(function(b){0>e.indexOf(b)&&
K('invalid regl constructor argument "'+b+'". must be one of '+e)})},type:function(b,e,k){g(b,e)||K("invalid parameter type"+M(k)+". expected "+e+", got "+typeof b)},commandType:U,isTypedArray:function(b,e){ja(b)||K("invalid parameter type"+M(e)+". must be a typed array")},nni:function(b,e){0<=b&&(b|0)===b||K("invalid parameter type, ("+b+")"+M(e)+". must be a nonnegative integer")},oneOf:k,shaderError:function(b,e,k,h,n){if(!b.getShaderParameter(e,b.COMPILE_STATUS)){e=b.getShaderInfoLog(e);b=h===
b.FRAGMENT_SHADER?"fragment":"vertex";U(k,"string",b+" shader source must be a string",n);var C=u(k,n);k=A(e);w(C,k);O(C).forEach(function(b){function e(c,b){k.push(c);a.push(b||"")}var c=C[b];if(c.hasErrors){var k=[""],a=[""];e("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){e(m(a.number,4)+"|  ","background-color:yellow; font-weight:bold");e(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(b){b=b.message;var k=/^\s*'(.*)'\s*:\s*(.*)$/.exec(b);if(k){var f=k[1];b=k[2];switch(f){case "assign":f="="}c=Math.max(a.line.indexOf(f,c),0)}else c=0;e(m("| ",6));e(m("^^^",c+3)+"\n","font-weight:bold");e(m("| ",6));e(b+"\n","font-weight:bold")});e(m("| ",6)+"\n")}else e(m(a.number,4)+"|  "),e(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(k.join("")):(a[0]=k.join("%c"),console.log.apply(console,a))}});I.raise("Error compiling "+
b+" shader, "+C[0].name)}},linkError:function(b,e,k,h,m){b.getProgramParameter(e,b.LINK_STATUS)||(b=b.getProgramInfoLog(e),k=u(k,m),h='Error linking program with vertex shader, "'+u(h,m)[0].name+'", and fragment shader "'+k[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(h+"\n"+b),I.raise(h))},callSite:W,saveCommandRef:Z,saveDrawInfo:function(b,e,k,h){function m(b){return b?h.id(b):0}function n(b,
c){O(c).forEach(function(c){b[h.id(c)]=!0})}Z(b);b._fragId=m(b["static"].frag);b._vertId=m(b["static"].vert);var C=b._uniformSet={};n(C,e["static"]);n(C,e.dynamic);e=b._attributeSet={};n(e,k["static"]);n(e,k.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,e,m){b.texture?k(b.texture._texture.internalformat,e,"unsupported texture format for attachment"):k(b.renderbuffer._renderbuffer.format,m,"unsupported renderbuffer format for attachment")},
guessCommand:L,texture2D:function(b,e,k){var h=e.width,m=e.height,C=e.channels;I(0<h&&h<=k.maxTextureSize&&0<m&&m<=k.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||I(!(h&h-1)&&!!h&&!(m&m-1)&&!!m,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==h&&1!==m&&I(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(I(!(h&h-1)&&!!h&&!(m&m-1)&&!!m,"texture must be a square power of 2 to support mipmapping"),
I(e.mipmask===(h<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>k.extensions.indexOf("oes_texture_float_linear")&&I(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),I(!b.genMipmaps,"mipmap generation not supported with float textures"));var r=e.images;for(k=0;16>k;++k)if(r[k]){var d=h>>k,c=m>>k;I(e.mipmask&1<<k,"missing mipmap data");var t=r[k];I(t.width===d&&t.height===c,"invalid shape for mip images");I(t.format===e.format&&t.internalformat===
e.internalformat&&t.type===e.type,"incompatible type for mip image");!t.compressed&&t.data&&(d=Math.ceil(n(t.type,C)*d/t.unpackAlignment)*t.unpackAlignment,I(t.data.byteLength===d*c,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||I(0===(e.mipmask&1<<k),"extra mipmap data");e.compressed&&I(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,e,k,h){var m=b.width,C=b.height,d=b.channels;I(0<m&&m<=h.maxTextureSize&&
0<C&&C<=h.maxTextureSize,"invalid texture shape");I(m===C,"cube map must be square");I(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(h=0;h<k.length;++h){var r=k[h];I(r.width===m&&r.height===C,"inconsistent cube map face shape");e.genMipmaps&&(I(!r.compressed,"can not generate mipmap for compressed textures"),I(1===r.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=r.images,t=0;16>t;++t){var a=c[t];if(a){var g=m>>t,y=C>>t;I(r.mipmask&1<<t,"missing mipmap data");
I(a.width===g&&a.height===y,"invalid shape for mip images");I(a.format===b.format&&a.internalformat===b.internalformat&&a.type===b.type,"incompatible type for mip image");a.compressed||a.data&&I(a.data.byteLength===g*y*Math.max(n(a.type,d),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(X,ia,Fa){ia.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(X,ia,Fa){function d(d){return Array.prototype.slice.call(d)}function K(g){return d(g).join("")}var I=X("./extend"),M=X("./compiled-fns");ia.exports=function(){function g(){var k=[],m=[];return I(function(){k.push.apply(k,d(arguments))},{def:function(){var g="v"+b;b++;m.push(g);0<arguments.length&&(k.push(g,"="),k.push.apply(k,d(arguments)),k.push(";"));return g},toString:function(){return K([0<m.length?"var "+m.join(",")+";":"",K(k)])}})}function k(){function b(r,
d){m(r,d,"=",k.def(r,d),";")}var k=g(),m=g(),M=k.toString,K=m.toString;return I(function(){k.apply(k,d(arguments))},{def:k.def,entry:k,exit:m,save:b,set:function(m,d,n){b(m,d);k(m,d,"=",n,";")},toString:function(){return M()+K()}})}var m=0,b=0,G={},B=g(),L={};return{global:B,link:function(b){var k="$"+m,d=!1;"object"===typeof b&&b.name&&(k=b.name.replace(/ /g,"_"),d=!0);if(k in G)return k;G[k]=b;d||m++;return k},block:g,proc:function(b,m){function d(){var b="a"+g.length;g.push(b);return b}var g=[];
m=m||0;for(var M=0;M<m;++M)d();var M=k(),r=M.toString;return L[b]=I(M,{arg:d,toString:function(){return K(["function(",g.join(),"){",r(),"}"])}})},scope:k,cond:function(){var b=K(arguments),m=k(),g=k(),M=m.toString,B=g.toString;return I(m,{then:function(){m.apply(m,d(arguments));return this},"else":function(){g.apply(g,d(arguments));return this},toString:function(){var k=B();k&&(k="else{"+k+"}");return K(["if(",b,"){",M(),"}",k])}})},compile:function(){var b=[],k=[];Object.keys(G).sort(function(b,
k){var m="$"===b.charAt(0),d="$"===k.charAt(0);return m||d?m&&d?+b.slice(1)<+k.slice(1)?-1:1:m&&!d?-1:1:b.localeCompare(k)}).forEach(function(m){var n=G[m];b.push(m);k.push(n)});for(var m=0,d=b.length-1;-1<d;d--)if("$"===b[d].charAt(0)){m=d;break}var g=['"use strict";',B,"return {"];Object.keys(L).forEach(function(b){g.push('"',b,'":',L[b].toString(),",")});g.push("}");var d=K(g).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),m=b.slice(m).join(),r=M[m];if(!r)throw console.log("src code is:"),
console.log(d),console.log("compiled values:",k),console.log("linked names:",b),console.log("Keys available:",Object.keys(M)),console.log("Key:",m),console.log('"'+m+'": function('+b.join(", ")+") \n{\n"+d+"\n},"),Error("missing precompiled function with key: "+m);return r.apply(null,k)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(X,ia,Fa){ia.exports={$0:function(d){var K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D;K=d.attributes;I=d.current;M=d.framebuffer;g=d.gl;k=d.next;
m=d.vao;b=k.blend_color;G=I.blend_color;B=k.blend_equation;L=I.blend_equation;W=k.blend_func;u=I.blend_func;A=k.colorMask;w=I.colorMask;Z=k.depth_range;r=I.depth_range;U=k.polygonOffset_offset;n=I.polygonOffset_offset;O=k.sample_coverage;ja=I.sample_coverage;e=k.scissor_box;C=I.scissor_box;V=k.stencil_func;f=I.stencil_func;ba=k.stencil_opBack;h=I.stencil_opBack;z=k.stencil_opFront;ca=I.stencil_opFront;E=k.viewport;D=I.viewport;return{poll:function(){var c,m,a,d,y,K,Cc,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,
S,ma;I.dirty=!1;m=k.blend_enable;a=k.cull_enable;d=k.depth_enable;y=k.dither;K=k.polygonOffset_enable;Cc=k.sample_alpha;Y=k.sample_enable;fa=k.scissor_enable;P=k.stencil_enable;T=k.cull_face;x=I.cull_face;l=k.depth_func;N=I.depth_func;Q=k.depth_mask;za=I.depth_mask;oa=k.frontFace;q=I.frontFace;J=k.lineWidth;da=I.lineWidth;S=k.stencil_mask;ma=I.stencil_mask;c=M.next;c!==M.cur&&(c?g.bindFramebuffer(36160,c.framebuffer):g.bindFramebuffer(36160,null),M.cur=c);m!==I.blend_enable&&(m?g.enable(3042):g.disable(3042),
I.blend_enable=m);a!==I.cull_enable&&(a?g.enable(2884):g.disable(2884),I.cull_enable=a);d!==I.depth_enable&&(d?g.enable(2929):g.disable(2929),I.depth_enable=d);y!==I.dither&&(y?g.enable(3024):g.disable(3024),I.dither=y);K!==I.polygonOffset_enable&&(K?g.enable(32823):g.disable(32823),I.polygonOffset_enable=K);Cc!==I.sample_alpha&&(Cc?g.enable(32926):g.disable(32926),I.sample_alpha=Cc);Y!==I.sample_enable&&(Y?g.enable(32928):g.disable(32928),I.sample_enable=Y);fa!==I.scissor_enable&&(fa?g.enable(3089):
g.disable(3089),I.scissor_enable=fa);P!==I.stencil_enable&&(P?g.enable(2960):g.disable(2960),I.stencil_enable=P);if(b[0]!==G[0]||b[1]!==G[1]||b[2]!==G[2]||b[3]!==G[3])g.blendColor(b[0],b[1],b[2],b[3]),G[0]=b[0],G[1]=b[1],G[2]=b[2],G[3]=b[3];if(B[0]!==L[0]||B[1]!==L[1])g.blendEquationSeparate(B[0],B[1]),L[0]=B[0],L[1]=B[1];if(W[0]!==u[0]||W[1]!==u[1]||W[2]!==u[2]||W[3]!==u[3])g.blendFuncSeparate(W[0],W[1],W[2],W[3]),u[0]=W[0],u[1]=W[1],u[2]=W[2],u[3]=W[3];if(A[0]!==w[0]||A[1]!==w[1]||A[2]!==w[2]||
A[3]!==w[3])g.colorMask(A[0],A[1],A[2],A[3]),w[0]=A[0],w[1]=A[1],w[2]=A[2],w[3]=A[3];T!==x&&(g.cullFace(T),I.cull_face=T);l!==N&&(g.depthFunc(l),I.depth_func=l);Q!==za&&(g.depthMask(Q),I.depth_mask=Q);if(Z[0]!==r[0]||Z[1]!==r[1])g.depthRange(Z[0],Z[1]),r[0]=Z[0],r[1]=Z[1];oa!==q&&(g.frontFace(oa),I.frontFace=oa);J!==da&&(g.lineWidth(J),I.lineWidth=J);if(U[0]!==n[0]||U[1]!==n[1])g.polygonOffset(U[0],U[1]),n[0]=U[0],n[1]=U[1];if(O[0]!==ja[0]||O[1]!==ja[1])g.sampleCoverage(O[0],O[1]),ja[0]=O[0],ja[1]=
O[1];if(e[0]!==C[0]||e[1]!==C[1]||e[2]!==C[2]||e[3]!==C[3])g.scissor(e[0],e[1],e[2],e[3]),C[0]=e[0],C[1]=e[1],C[2]=e[2],C[3]=e[3];if(V[0]!==f[0]||V[1]!==f[1]||V[2]!==f[2])g.stencilFunc(V[0],V[1],V[2]),f[0]=V[0],f[1]=V[1],f[2]=V[2];S!==ma&&(g.stencilMask(S),I.stencil_mask=S);if(ba[0]!==h[0]||ba[1]!==h[1]||ba[2]!==h[2]||ba[3]!==h[3])g.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]),h[0]=ba[0],h[1]=ba[1],h[2]=ba[2],h[3]=ba[3];if(z[0]!==ca[0]||z[1]!==ca[1]||z[2]!==ca[2]||z[3]!==ca[3])g.stencilOpSeparate(z[0],
z[1],z[2],z[3]),ca[0]=z[0],ca[1]=z[1],ca[2]=z[2],ca[3]=z[3];if(E[0]!==D[0]||E[1]!==D[1]||E[2]!==D[2]||E[3]!==D[3])g.viewport(E[0],E[1],E[2],E[3]),D[0]=E[0],D[1]=E[1],D[2]=E[2],D[3]=E[3]},refresh:function(){var c,t,a,d,y,na,Cc,Y,fa,P,T,x,l,N,Q,za;I.dirty=!1;t=k.blend_enable;a=k.cull_enable;d=k.depth_enable;y=k.dither;na=k.polygonOffset_enable;Cc=k.sample_alpha;Y=k.sample_enable;fa=k.scissor_enable;P=k.stencil_enable;T=k.cull_face;x=k.depth_func;l=k.depth_mask;N=k.frontFace;Q=k.lineWidth;za=k.stencil_mask;
(c=M.next)?g.bindFramebuffer(36160,c.framebuffer):g.bindFramebuffer(36160,null);M.cur=c;c=K[0];c.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);c=K[1];c.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(1),
g.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);c=K[2];c.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);c=K[3];c.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,c.x,c.y,c.z,
c.w),c.buffer=null);c=K[4];c.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);c=K[5];c.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);c=K[6];c.buffer?
(g.enableVertexAttribArray(6),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);c=K[7];c.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);c=K[8];c.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,
c.buffer.buffer),g.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);c=K[9];c.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);c=K[10];c.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(10,
c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);c=K[11];c.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);c=K[12];c.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(12,c.size,c.type,c.normalized,
c.stride,c.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);c=K[13];c.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);c=K[14];c.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(14),
g.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);c=K[15];c.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);m.currentVAO=null;m.setVAO(m.targetVAO);t?g.enable(3042):g.disable(3042);I.blend_enable=t;a?g.enable(2884):g.disable(2884);I.cull_enable=a;d?g.enable(2929):g.disable(2929);I.depth_enable=d;y?g.enable(3024):g.disable(3024);
I.dither=y;na?g.enable(32823):g.disable(32823);I.polygonOffset_enable=na;Cc?g.enable(32926):g.disable(32926);I.sample_alpha=Cc;Y?g.enable(32928):g.disable(32928);I.sample_enable=Y;fa?g.enable(3089):g.disable(3089);I.scissor_enable=fa;P?g.enable(2960):g.disable(2960);I.stencil_enable=P;g.blendColor(b[0],b[1],b[2],b[3]);G[0]=b[0];G[1]=b[1];G[2]=b[2];G[3]=b[3];g.blendEquationSeparate(B[0],B[1]);L[0]=B[0];L[1]=B[1];g.blendFuncSeparate(W[0],W[1],W[2],W[3]);u[0]=W[0];u[1]=W[1];u[2]=W[2];u[3]=W[3];g.colorMask(A[0],
A[1],A[2],A[3]);w[0]=A[0];w[1]=A[1];w[2]=A[2];w[3]=A[3];g.cullFace(T);I.cull_face=T;g.depthFunc(x);I.depth_func=x;g.depthMask(l);I.depth_mask=l;g.depthRange(Z[0],Z[1]);r[0]=Z[0];r[1]=Z[1];g.frontFace(N);I.frontFace=N;g.lineWidth(Q);I.lineWidth=Q;g.polygonOffset(U[0],U[1]);n[0]=U[0];n[1]=U[1];g.sampleCoverage(O[0],O[1]);ja[0]=O[0];ja[1]=O[1];g.scissor(e[0],e[1],e[2],e[3]);C[0]=e[0];C[1]=e[1];C[2]=e[2];C[3]=e[3];g.stencilFunc(V[0],V[1],V[2]);f[0]=V[0];f[1]=V[1];f[2]=V[2];g.stencilMask(za);I.stencil_mask=
za;g.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]);h[0]=ba[0];h[1]=ba[1];h[2]=ba[2];h[3]=ba[3];g.stencilOpSeparate(z[0],z[1],z[2],z[3]);ca[0]=z[0];ca[1]=z[1];ca[2]=z[2];ca[3]=z[3];g.viewport(E[0],E[1],E[2],E[3]);D[0]=E[0];D[1]=E[1];D[2]=E[2];D[3]=E[3]}}},$3:function(d,K,I,M){var g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na;g=d.context;k=d.current;m=d.framebuffer;b=d.gl;G=d.next;B=d.shader;L=d.vao;W=G.blend_color;u=k.blend_color;A=G.blend_equation;w=k.blend_equation;Z=G.blend_func;
r=k.blend_func;U=G.colorMask;n=k.colorMask;O=G.depth_range;ja=k.depth_range;e=G.polygonOffset_offset;C=k.polygonOffset_offset;V=G.sample_coverage;f=k.sample_coverage;ba=G.scissor_box;h=k.scissor_box;z=G.stencil_func;ca=k.stencil_func;E=G.stencil_opBack;D=k.stencil_opBack;c=G.stencil_opFront;t=k.stencil_opFront;a=G.viewport;xa=k.viewport;y={};na={};return{batch:function(d,g){var y,P,T,x,l;y=m.next;y!==m.cur&&(y?b.bindFramebuffer(36160,y.framebuffer):b.bindFramebuffer(36160,null),m.cur=y);if(k.dirty){y=
G.dither;y!==k.dither&&(y?b.enable(3024):b.disable(3024),k.dither=y);y=G.blend_enable;y!==k.blend_enable&&(y?b.enable(3042):b.disable(3042),k.blend_enable=y);y=W[0];T=W[1];x=W[2];l=W[3];if(y!==u[0]||T!==u[1]||x!==u[2]||l!==u[3])b.blendColor(y,T,x,l),u[0]=y,u[1]=T,u[2]=x,u[3]=l;y=A[0];T=A[1];if(y!==w[0]||T!==w[1])b.blendEquationSeparate(y,T),w[0]=y,w[1]=T;y=Z[0];T=Z[1];x=Z[2];l=Z[3];if(y!==r[0]||T!==r[1]||x!==r[2]||l!==r[3])b.blendFuncSeparate(y,T,x,l),r[0]=y,r[1]=T,r[2]=x,r[3]=l;y=G.depth_enable;
y!==k.depth_enable&&(y?b.enable(2929):b.disable(2929),k.depth_enable=y);y=G.depth_func;y!==k.depth_func&&(b.depthFunc(y),k.depth_func=y);y=O[0];T=O[1];if(y!==ja[0]||T!==ja[1])b.depthRange(y,T),ja[0]=y,ja[1]=T;y=G.depth_mask;y!==k.depth_mask&&(b.depthMask(y),k.depth_mask=y);y=U[0];T=U[1];x=U[2];l=U[3];if(y!==n[0]||T!==n[1]||x!==n[2]||l!==n[3])b.colorMask(y,T,x,l),n[0]=y,n[1]=T,n[2]=x,n[3]=l;y=G.cull_enable;y!==k.cull_enable&&(y?b.enable(2884):b.disable(2884),k.cull_enable=y);y=G.cull_face;y!==k.cull_face&&
(b.cullFace(y),k.cull_face=y);y=G.frontFace;y!==k.frontFace&&(b.frontFace(y),k.frontFace=y);y=G.lineWidth;y!==k.lineWidth&&(b.lineWidth(y),k.lineWidth=y);y=G.polygonOffset_enable;y!==k.polygonOffset_enable&&(y?b.enable(32823):b.disable(32823),k.polygonOffset_enable=y);y=e[0];T=e[1];if(y!==C[0]||T!==C[1])b.polygonOffset(y,T),C[0]=y,C[1]=T;y=G.sample_alpha;y!==k.sample_alpha&&(y?b.enable(32926):b.disable(32926),k.sample_alpha=y);y=G.sample_enable;y!==k.sample_enable&&(y?b.enable(32928):b.disable(32928),
k.sample_enable=y);y=V[0];T=V[1];if(y!==f[0]||T!==f[1])b.sampleCoverage(y,T),f[0]=y,f[1]=T;y=G.stencil_enable;y!==k.stencil_enable&&(y?b.enable(2960):b.disable(2960),k.stencil_enable=y);y=G.stencil_mask;y!==k.stencil_mask&&(b.stencilMask(y),k.stencil_mask=y);y=z[0];T=z[1];x=z[2];if(y!==ca[0]||T!==ca[1]||x!==ca[2])b.stencilFunc(y,T,x),ca[0]=y,ca[1]=T,ca[2]=x;y=c[0];T=c[1];x=c[2];l=c[3];if(y!==t[0]||T!==t[1]||x!==t[2]||l!==t[3])b.stencilOpSeparate(y,T,x,l),t[0]=y,t[1]=T,t[2]=x,t[3]=l;y=E[0];T=E[1];
x=E[2];l=E[3];if(y!==D[0]||T!==D[1]||x!==D[2]||l!==D[3])b.stencilOpSeparate(y,T,x,l),D[0]=y,D[1]=T,D[2]=x,D[3]=l;y=G.scissor_enable;y!==k.scissor_enable&&(y?b.enable(3089):b.disable(3089),k.scissor_enable=y);y=ba[0];T=ba[1];x=ba[2];l=ba[3];if(y!==h[0]||T!==h[1]||x!==h[2]||l!==h[3])b.scissor(y,T,x,l),h[0]=y,h[1]=T,h[2]=x,h[3]=l;y=a[0];T=a[1];x=a[2];l=a[3];if(y!==xa[0]||T!==xa[1]||x!==xa[2]||l!==xa[3])b.viewport(y,T,x,l),xa[0]=y,xa[1]=T,xa[2]=x,xa[3]=l;k.dirty=!1}if(y=k.profile)P=performance.now(),
K.count+=g;T=B.program(B.vert,B.frag);b.useProgram(T.program);L.setVAO(null);x=T.id;(l=na[x])||(l=na[x]=M(T));l.call(this,d,g);L.setVAO(null);y&&(K.cpuTime+=performance.now()-P)},draw:function(d){var g,M,P,T,x;g=m.next;g!==m.cur&&(g?b.bindFramebuffer(36160,g.framebuffer):b.bindFramebuffer(36160,null),m.cur=g);if(k.dirty){g=G.dither;g!==k.dither&&(g?b.enable(3024):b.disable(3024),k.dither=g);g=G.blend_enable;g!==k.blend_enable&&(g?b.enable(3042):b.disable(3042),k.blend_enable=g);g=W[0];P=W[1];T=W[2];
x=W[3];if(g!==u[0]||P!==u[1]||T!==u[2]||x!==u[3])b.blendColor(g,P,T,x),u[0]=g,u[1]=P,u[2]=T,u[3]=x;g=A[0];P=A[1];if(g!==w[0]||P!==w[1])b.blendEquationSeparate(g,P),w[0]=g,w[1]=P;g=Z[0];P=Z[1];T=Z[2];x=Z[3];if(g!==r[0]||P!==r[1]||T!==r[2]||x!==r[3])b.blendFuncSeparate(g,P,T,x),r[0]=g,r[1]=P,r[2]=T,r[3]=x;g=G.depth_enable;g!==k.depth_enable&&(g?b.enable(2929):b.disable(2929),k.depth_enable=g);g=G.depth_func;g!==k.depth_func&&(b.depthFunc(g),k.depth_func=g);g=O[0];P=O[1];if(g!==ja[0]||P!==ja[1])b.depthRange(g,
P),ja[0]=g,ja[1]=P;g=G.depth_mask;g!==k.depth_mask&&(b.depthMask(g),k.depth_mask=g);g=U[0];P=U[1];T=U[2];x=U[3];if(g!==n[0]||P!==n[1]||T!==n[2]||x!==n[3])b.colorMask(g,P,T,x),n[0]=g,n[1]=P,n[2]=T,n[3]=x;g=G.cull_enable;g!==k.cull_enable&&(g?b.enable(2884):b.disable(2884),k.cull_enable=g);g=G.cull_face;g!==k.cull_face&&(b.cullFace(g),k.cull_face=g);g=G.frontFace;g!==k.frontFace&&(b.frontFace(g),k.frontFace=g);g=G.lineWidth;g!==k.lineWidth&&(b.lineWidth(g),k.lineWidth=g);g=G.polygonOffset_enable;g!==
k.polygonOffset_enable&&(g?b.enable(32823):b.disable(32823),k.polygonOffset_enable=g);g=e[0];P=e[1];if(g!==C[0]||P!==C[1])b.polygonOffset(g,P),C[0]=g,C[1]=P;g=G.sample_alpha;g!==k.sample_alpha&&(g?b.enable(32926):b.disable(32926),k.sample_alpha=g);g=G.sample_enable;g!==k.sample_enable&&(g?b.enable(32928):b.disable(32928),k.sample_enable=g);g=V[0];P=V[1];if(g!==f[0]||P!==f[1])b.sampleCoverage(g,P),f[0]=g,f[1]=P;g=G.stencil_enable;g!==k.stencil_enable&&(g?b.enable(2960):b.disable(2960),k.stencil_enable=
g);g=G.stencil_mask;g!==k.stencil_mask&&(b.stencilMask(g),k.stencil_mask=g);g=z[0];P=z[1];T=z[2];if(g!==ca[0]||P!==ca[1]||T!==ca[2])b.stencilFunc(g,P,T),ca[0]=g,ca[1]=P,ca[2]=T;g=c[0];P=c[1];T=c[2];x=c[3];if(g!==t[0]||P!==t[1]||T!==t[2]||x!==t[3])b.stencilOpSeparate(g,P,T,x),t[0]=g,t[1]=P,t[2]=T,t[3]=x;g=E[0];P=E[1];T=E[2];x=E[3];if(g!==D[0]||P!==D[1]||T!==D[2]||x!==D[3])b.stencilOpSeparate(g,P,T,x),D[0]=g,D[1]=P,D[2]=T,D[3]=x;g=G.scissor_enable;g!==k.scissor_enable&&(g?b.enable(3089):b.disable(3089),
k.scissor_enable=g);g=ba[0];P=ba[1];T=ba[2];x=ba[3];if(g!==h[0]||P!==h[1]||T!==h[2]||x!==h[3])b.scissor(g,P,T,x),h[0]=g,h[1]=P,h[2]=T,h[3]=x;g=a[0];P=a[1];T=a[2];x=a[3];if(g!==xa[0]||P!==xa[1]||T!==xa[2]||x!==xa[3])b.viewport(g,P,T,x),xa[0]=g,xa[1]=P,xa[2]=T,xa[3]=x;k.dirty=!1}if(g=k.profile)M=performance.now(),K.count++;P=B.program(B.vert,B.frag);b.useProgram(P.program);L.setVAO(null);T=P.id;(x=y[T])||(x=y[T]=I(P));x.call(this,d);L.setVAO(null);g&&(K.cpuTime+=performance.now()-M)},scope:function(a,
c,b){var e,f;if(e=k.profile)f=performance.now(),K.count++;c(g,a,b);e&&(K.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,Cc,Y,fa,P,T,x,l,N,Q,za,
oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,td,Hb,ha,H,sa,Ea,pa,ya,Ja){var la,aa,ua,Ia,Ba,mb,ea,zd,$b,Ga,ac,Sb,X,Gd,ke,Wd,ze,se,Vd,ne,Ad,Dd,qd,ge,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va;la=d.attributes;aa=d.context;ua=d.current;Ia=d.draw;Ba=d.elements;mb=d.framebuffer;ea=d.gl;zd=d.next;$b=d.shader;Ga=d.uniforms;ac=d.vao;Sb=zd.blend_color;X=ua.blend_color;Gd=zd.blend_equation;ke=ua.blend_equation;
Wd=zd.blend_func;ze=ua.blend_func;se=zd.colorMask;Vd=ua.colorMask;ne=zd.depth_range;Ad=ua.depth_range;Dd=zd.polygonOffset_offset;qd=ua.polygonOffset_offset;ge=zd.sample_coverage;be=ua.sample_coverage;Ce=zd.scissor_box;Ze=ua.scissor_box;Re=zd.stencil_func;Hd=ua.stencil_func;Ae=zd.stencil_opBack;te=ua.stencil_opBack;Zd=zd.stencil_opFront;Bd=ua.stencil_opFront;$d=zd.viewport;ld=ua.viewport;$c={};rd={};Lc=new Float32Array(16);nd=new Float32Array(16);Gc=new Float32Array(16);dd=new Float32Array(16);Pc=
new Float32Array(16);kd=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);tc=new Float32Array(16);xb=new Float32Array(16);wc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);lc=new Float32Array(16);Hc=new Float32Array(16);Wc=new Float32Array(16);Vc=new Float32Array(16);Dc=new Float32Array(16);dc=new Float32Array(16);Ic=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);mc=new Float32Array(16);ec=new Float32Array(16);$a=new Float32Array(16);
Fc=new Float32Array(16);yb=new Float32Array(16);cb=new Float32Array(16);Nb=new Float32Array(16);ab=new Float32Array(16);ob=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,c){var e,f,h,t;e=mb.next;e!==mb.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),mb.cur=e);if(ua.dirty){var y,d,C,z,E,D,K,O,I,V,ba,ja,Ga,xa,na,ca,Sb,$b,La,Fb,Pc,Bb,Cb,Pa,Ce;y=se[0];d=se[1];C=se[2];z=se[3];if(y!==Vd[0]||d!==Vd[1]||C!==Vd[2]||z!==Vd[3])ea.colorMask(y,d,C,z),Vd[0]=
y,Vd[1]=d,Vd[2]=C,Vd[3]=z;E=zd.frontFace;E!==ua.frontFace&&(ea.frontFace(E),ua.frontFace=E);D=zd.polygonOffset_enable;D!==ua.polygonOffset_enable&&(D?ea.enable(32823):ea.disable(32823),ua.polygonOffset_enable=D);K=Dd[0];O=Dd[1];if(K!==qd[0]||O!==qd[1])ea.polygonOffset(K,O),qd[0]=K,qd[1]=O;I=zd.sample_alpha;I!==ua.sample_alpha&&(I?ea.enable(32926):ea.disable(32926),ua.sample_alpha=I);V=zd.sample_enable;V!==ua.sample_enable&&(V?ea.enable(32928):ea.disable(32928),ua.sample_enable=V);ba=ge[0];ja=ge[1];
if(ba!==be[0]||ja!==be[1])ea.sampleCoverage(ba,ja),be[0]=ba,be[1]=ja;Ga=zd.stencil_enable;Ga!==ua.stencil_enable&&(Ga?ea.enable(2960):ea.disable(2960),ua.stencil_enable=Ga);xa=zd.stencil_mask;xa!==ua.stencil_mask&&(ea.stencilMask(xa),ua.stencil_mask=xa);na=Re[0];ca=Re[1];Sb=Re[2];if(na!==Hd[0]||ca!==Hd[1]||Sb!==Hd[2])ea.stencilFunc(na,ca,Sb),Hd[0]=na,Hd[1]=ca,Hd[2]=Sb;$b=Zd[0];La=Zd[1];Fb=Zd[2];Pc=Zd[3];if($b!==Bd[0]||La!==Bd[1]||Fb!==Bd[2]||Pc!==Bd[3])ea.stencilOpSeparate($b,La,Fb,Pc),Bd[0]=$b,Bd[1]=
La,Bd[2]=Fb,Bd[3]=Pc;Bb=Ae[0];Cb=Ae[1];Pa=Ae[2];Ce=Ae[3];if(Bb!==te[0]||Cb!==te[1]||Pa!==te[2]||Ce!==te[3])ea.stencilOpSeparate(Bb,Cb,Pa,Ce),te[0]=Bb,te[1]=Cb,te[2]=Pa,te[3]=Ce}ea.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;ea.disable(3042);ua.blend_enable=!1;ea.blendEquationSeparate(32774,32774);ke[0]=32774;ke[1]=32774;ea.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);ua.cull_enable=!0;ea.cullFace(1029);ua.cull_face=1029;ea.enable(2929);ua.depth_enable=!0;
ea.depthFunc(513);ua.depth_func=513;ea.depthMask(!0);ua.depth_mask=!0;ea.depthRange(0,1);Ad[0]=0;Ad[1]=1;ea.disable(3024);ua.dither=!1;ea.lineWidth(2);ua.lineWidth=2;ea.enable(3089);ua.scissor_enable=!0;f=ua.profile;ua.profile=!1;ea.useProgram(Cc.program);var Ra,xb,kd,Na,lc,Ya,Gc,Wd,lb,Oa,tc,Qa,ub,vb,Ta,nb,nd,Gd,Hc,bb,Jc,dd,Xa,Lc,Ab,Za,ne,wc,Wb,Qb,$d,Rb,Wc;ac.setVAO(null);Ra=Aa.location;xb=la[Ra];xb.buffer||ea.enableVertexAttribArray(Ra);if(xb.type!==M.dtype||4!==xb.size||xb.buffer!==M||!1!==xb.normalized||
0!==xb.offset||0!==xb.stride)ea.bindBuffer(34962,M.buffer),ea.vertexAttribPointer(Ra,4,M.dtype,!1,0,0),xb.type=M.dtype,xb.size=4,xb.buffer=M,xb.normalized=!1,xb.offset=0,xb.stride=0;kd=Ma.location;Na=la[kd];Na.buffer||ea.enableVertexAttribArray(kd);if(Na.type!==g.dtype||4!==Na.size||Na.buffer!==g||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(kd,4,g.dtype,!1,0,0),Na.type=g.dtype,Na.size=4,Na.buffer=g,Na.normalized=!1,Na.offset=0,Na.stride=0;
lc=F.location;Ya=la[lc];Ya.buffer||ea.enableVertexAttribArray(lc);if(Ya.type!==k.dtype||4!==Ya.size||Ya.buffer!==k||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(lc,4,k.dtype,!1,0,0),Ya.type=k.dtype,Ya.size=4,Ya.buffer=k,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Gc=eb.location;Wd=la[Gc];Wd.buffer||ea.enableVertexAttribArray(Gc);if(Wd.type!==m.dtype||4!==Wd.size||Wd.buffer!==m||!1!==Wd.normalized||0!==Wd.offset||0!==Wd.stride)ea.bindBuffer(34962,
m.buffer),ea.vertexAttribPointer(Gc,4,m.dtype,!1,0,0),Wd.type=m.dtype,Wd.size=4,Wd.buffer=m,Wd.normalized=!1,Wd.offset=0,Wd.stride=0;lb=Ua.location;Oa=la[lb];Oa.buffer||ea.enableVertexAttribArray(lb);if(Oa.type!==b.dtype||4!==Oa.size||Oa.buffer!==b||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ea.bindBuffer(34962,b.buffer),ea.vertexAttribPointer(lb,4,b.dtype,!1,0,0),Oa.type=b.dtype,Oa.size=4,Oa.buffer=b,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;tc=v.location;Qa=la[tc];Qa.buffer||ea.enableVertexAttribArray(tc);
if(Qa.type!==G.dtype||4!==Qa.size||Qa.buffer!==G||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)ea.bindBuffer(34962,G.buffer),ea.vertexAttribPointer(tc,4,G.dtype,!1,0,0),Qa.type=G.dtype,Qa.size=4,Qa.buffer=G,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;ub=p.location;vb=la[ub];vb.buffer||ea.enableVertexAttribArray(ub);if(vb.type!==B.dtype||4!==vb.size||vb.buffer!==B||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)ea.bindBuffer(34962,B.buffer),ea.vertexAttribPointer(ub,4,B.dtype,!1,0,0),vb.type=B.dtype,
vb.size=4,vb.buffer=B,vb.normalized=!1,vb.offset=0,vb.stride=0;Ta=R.location;nb=la[Ta];nb.buffer||ea.enableVertexAttribArray(Ta);if(nb.type!==L.dtype||4!==nb.size||nb.buffer!==L||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)ea.bindBuffer(34962,L.buffer),ea.vertexAttribPointer(Ta,4,L.dtype,!1,0,0),nb.type=L.dtype,nb.size=4,nb.buffer=L,nb.normalized=!1,nb.offset=0,nb.stride=0;nd=ta.location;Gd=la[nd];Gd.buffer||ea.enableVertexAttribArray(nd);if(Gd.type!==W.dtype||4!==Gd.size||Gd.buffer!==W||!1!==
Gd.normalized||0!==Gd.offset||0!==Gd.stride)ea.bindBuffer(34962,W.buffer),ea.vertexAttribPointer(nd,4,W.dtype,!1,0,0),Gd.type=W.dtype,Gd.size=4,Gd.buffer=W,Gd.normalized=!1,Gd.offset=0,Gd.stride=0;Hc=va.location;bb=la[Hc];bb.buffer||ea.enableVertexAttribArray(Hc);if(bb.type!==u.dtype||4!==bb.size||bb.buffer!==u||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ea.bindBuffer(34962,u.buffer),ea.vertexAttribPointer(Hc,4,u.dtype,!1,0,0),bb.type=u.dtype,bb.size=4,bb.buffer=u,bb.normalized=!1,bb.offset=
0,bb.stride=0;Jc=td.location;dd=la[Jc];dd.buffer||ea.enableVertexAttribArray(Jc);if(dd.type!==A.dtype||4!==dd.size||dd.buffer!==A||!1!==dd.normalized||0!==dd.offset||0!==dd.stride)ea.bindBuffer(34962,A.buffer),ea.vertexAttribPointer(Jc,4,A.dtype,!1,0,0),dd.type=A.dtype,dd.size=4,dd.buffer=A,dd.normalized=!1,dd.offset=0,dd.stride=0;Xa=Hb.location;Lc=la[Xa];Lc.buffer||ea.enableVertexAttribArray(Xa);if(Lc.type!==w.dtype||4!==Lc.size||Lc.buffer!==w||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ea.bindBuffer(34962,
w.buffer),ea.vertexAttribPointer(Xa,4,w.dtype,!1,0,0),Lc.type=w.dtype,Lc.size=4,Lc.buffer=w,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=ha.location;Za=la[Ab];Za.buffer||ea.enableVertexAttribArray(Ab);if(Za.type!==Z.dtype||4!==Za.size||Za.buffer!==Z||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ea.bindBuffer(34962,Z.buffer),ea.vertexAttribPointer(Ab,4,Z.dtype,!1,0,0),Za.type=Z.dtype,Za.size=4,Za.buffer=Z,Za.normalized=!1,Za.offset=0,Za.stride=0;ne=H.location;wc=la[ne];wc.buffer||ea.enableVertexAttribArray(ne);
if(wc.type!==r.dtype||4!==wc.size||wc.buffer!==r||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)ea.bindBuffer(34962,r.buffer),ea.vertexAttribPointer(ne,4,r.dtype,!1,0,0),wc.type=r.dtype,wc.size=4,wc.buffer=r,wc.normalized=!1,wc.offset=0,wc.stride=0;Wb=sa.location;Qb=la[Wb];Qb.buffer||ea.enableVertexAttribArray(Wb);if(Qb.type!==U.dtype||4!==Qb.size||Qb.buffer!==U||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ea.bindBuffer(34962,U.buffer),ea.vertexAttribPointer(Wb,4,U.dtype,!1,0,0),Qb.type=U.dtype,
Qb.size=4,Qb.buffer=U,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;$d=fa.location;Rb=la[$d];Rb.buffer||ea.enableVertexAttribArray($d);if(Rb.type!==n.dtype||4!==Rb.size||Rb.buffer!==n||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)ea.bindBuffer(34962,n.buffer),ea.vertexAttribPointer($d,4,n.dtype,!1,0,0),Rb.type=n.dtype,Rb.size=4,Rb.buffer=n,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;ea.uniform1i(Ea.location,Y.bind());(Wc=Ia.elements)?ea.bindBuffer(34963,Wc.buffer.buffer):ac.currentVAO&&(Wc=Ba.getElements(ac.currentVAO.elements))&&
ea.bindBuffer(34963,Wc.buffer.buffer);for(h=0;h<c;++h){t=a[h];var Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,ia,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,Fa,ue,je,ie,he,ve,ee;$c.height=t.viewportHeight;$c.width=t.viewportWidth;$c.x=t.viewportX;$c.y=t.viewportY;Ec=$c.x|0;Ed=$c.y|0;Nc="width"in $c?$c.width|0:aa.framebufferWidth-Ec;ed="height"in $c?$c.height|0:aa.framebufferHeight-Ed;od=aa.viewportWidth;aa.viewportWidth=Nc;nc=aa.viewportHeight;
aa.viewportHeight=ed;ea.viewport(Ec,Ed,Nc,ed);ld[0]=Ec;ld[1]=Ed;ld[2]=Nc;ld[3]=ed;rd.height=t.scissorHeight;rd.width=t.scissorWidth;rd.x=t.scissorX;rd.y=t.scissorY;vc=rd.x|0;gc=rd.y|0;db="width"in rd?rd.width|0:aa.framebufferWidth-vc;rc="height"in rd?rd.height|0:aa.framebufferHeight-gc;ea.scissor(vc,gc,db,rc);Ze[0]=vc;Ze[1]=gc;Ze[2]=db;Ze[3]=rc;Tb=t.dim0A;ea.uniformMatrix4fv(T.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(Vc[0]=Tb[0],Vc[1]=Tb[1],Vc[2]=Tb[2],Vc[3]=Tb[3],Vc[4]=Tb[4],
Vc[5]=Tb[5],Vc[6]=Tb[6],Vc[7]=Tb[7],Vc[8]=Tb[8],Vc[9]=Tb[9],Vc[10]=Tb[10],Vc[11]=Tb[11],Vc[12]=Tb[12],Vc[13]=Tb[13],Vc[14]=Tb[14],Vc[15]=Tb[15],Vc));Xb=t.dim1A;ea.uniformMatrix4fv(Q.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Dc[0]=Xb[0],Dc[1]=Xb[1],Dc[2]=Xb[2],Dc[3]=Xb[3],Dc[4]=Xb[4],Dc[5]=Xb[5],Dc[6]=Xb[6],Dc[7]=Xb[7],Dc[8]=Xb[8],Dc[9]=Xb[9],Dc[10]=Xb[10],Dc[11]=Xb[11],Dc[12]=Xb[12],Dc[13]=Xb[13],Dc[14]=Xb[14],Dc[15]=Xb[15],Dc));cc=t.dim0B;ea.uniformMatrix4fv(x.location,!1,Array.isArray(cc)||
cc instanceof Float32Array?cc:(dc[0]=cc[0],dc[1]=cc[1],dc[2]=cc[2],dc[3]=cc[3],dc[4]=cc[4],dc[5]=cc[5],dc[6]=cc[6],dc[7]=cc[7],dc[8]=cc[8],dc[9]=cc[9],dc[10]=cc[10],dc[11]=cc[11],dc[12]=cc[12],dc[13]=cc[13],dc[14]=cc[14],dc[15]=cc[15],dc));hc=t.dim1B;ea.uniformMatrix4fv(za.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Ic[0]=hc[0],Ic[1]=hc[1],Ic[2]=hc[2],Ic[3]=hc[3],Ic[4]=hc[4],Ic[5]=hc[5],Ic[6]=hc[6],Ic[7]=hc[7],Ic[8]=hc[8],Ic[9]=hc[9],Ic[10]=hc[10],Ic[11]=hc[11],Ic[12]=hc[12],Ic[13]=
hc[13],Ic[14]=hc[14],Ic[15]=hc[15],Ic));xc=t.dim0C;ea.uniformMatrix4fv(l.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));Ac=t.dim1C;ea.uniformMatrix4fv(oa.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(pc[0]=Ac[0],pc[1]=Ac[1],pc[2]=Ac[2],pc[3]=Ac[3],pc[4]=Ac[4],pc[5]=
Ac[5],pc[6]=Ac[6],pc[7]=Ac[7],pc[8]=Ac[8],pc[9]=Ac[9],pc[10]=Ac[10],pc[11]=Ac[11],pc[12]=Ac[12],pc[13]=Ac[13],pc[14]=Ac[14],pc[15]=Ac[15],pc));ad=t.dim0D;ea.uniformMatrix4fv(N.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(mc[0]=ad[0],mc[1]=ad[1],mc[2]=ad[2],mc[3]=ad[3],mc[4]=ad[4],mc[5]=ad[5],mc[6]=ad[6],mc[7]=ad[7],mc[8]=ad[8],mc[9]=ad[9],mc[10]=ad[10],mc[11]=ad[11],mc[12]=ad[12],mc[13]=ad[13],mc[14]=ad[14],mc[15]=ad[15],mc));Qc=t.dim1D;ea.uniformMatrix4fv(q.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(ec[0]=Qc[0],ec[1]=Qc[1],ec[2]=Qc[2],ec[3]=Qc[3],ec[4]=Qc[4],ec[5]=Qc[5],ec[6]=Qc[6],ec[7]=Qc[7],ec[8]=Qc[8],ec[9]=Qc[9],ec[10]=Qc[10],ec[11]=Qc[11],ec[12]=Qc[12],ec[13]=Qc[13],ec[14]=Qc[14],ec[15]=Qc[15],ec));Rc=t.loA;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:($a[0]=Rc[0],$a[1]=Rc[1],$a[2]=Rc[2],$a[3]=Rc[3],$a[4]=Rc[4],$a[5]=Rc[5],$a[6]=Rc[6],$a[7]=Rc[7],$a[8]=Rc[8],$a[9]=Rc[9],$a[10]=Rc[10],$a[11]=Rc[11],$a[12]=Rc[12],$a[13]=
Rc[13],$a[14]=Rc[14],$a[15]=Rc[15],$a));Sc=t.hiA;ea.uniformMatrix4fv(da.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(Fc[0]=Sc[0],Fc[1]=Sc[1],Fc[2]=Sc[2],Fc[3]=Sc[3],Fc[4]=Sc[4],Fc[5]=Sc[5],Fc[6]=Sc[6],Fc[7]=Sc[7],Fc[8]=Sc[8],Fc[9]=Sc[9],Fc[10]=Sc[10],Fc[11]=Sc[11],Fc[12]=Sc[12],Fc[13]=Sc[13],Fc[14]=Sc[14],Fc[15]=Sc[15],Fc));Xc=t.loB;ea.uniformMatrix4fv(wa.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(yb[0]=Xc[0],yb[1]=Xc[1],yb[2]=Xc[2],yb[3]=Xc[3],yb[4]=Xc[4],yb[5]=
Xc[5],yb[6]=Xc[6],yb[7]=Xc[7],yb[8]=Xc[8],yb[9]=Xc[9],yb[10]=Xc[10],yb[11]=Xc[11],yb[12]=Xc[12],yb[13]=Xc[13],yb[14]=Xc[14],yb[15]=Xc[15],yb));wd=t.hiB;ea.uniformMatrix4fv(S.location,!1,Array.isArray(wd)||wd instanceof Float32Array?wd:(cb[0]=wd[0],cb[1]=wd[1],cb[2]=wd[2],cb[3]=wd[3],cb[4]=wd[4],cb[5]=wd[5],cb[6]=wd[6],cb[7]=wd[7],cb[8]=wd[8],cb[9]=wd[9],cb[10]=wd[10],cb[11]=wd[11],cb[12]=wd[12],cb[13]=wd[13],cb[14]=wd[14],cb[15]=wd[15],cb));bd=t.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(bd)||
bd instanceof Float32Array?bd:(Nb[0]=bd[0],Nb[1]=bd[1],Nb[2]=bd[2],Nb[3]=bd[3],Nb[4]=bd[4],Nb[5]=bd[5],Nb[6]=bd[6],Nb[7]=bd[7],Nb[8]=bd[8],Nb[9]=bd[9],Nb[10]=bd[10],Nb[11]=bd[11],Nb[12]=bd[12],Nb[13]=bd[13],Nb[14]=bd[14],Nb[15]=bd[15],Nb));Yc=t.hiC;ea.uniformMatrix4fv(ma.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(ab[0]=Yc[0],ab[1]=Yc[1],ab[2]=Yc[2],ab[3]=Yc[3],ab[4]=Yc[4],ab[5]=Yc[5],ab[6]=Yc[6],ab[7]=Yc[7],ab[8]=Yc[8],ab[9]=Yc[9],ab[10]=Yc[10],ab[11]=Yc[11],ab[12]=Yc[12],ab[13]=
Yc[13],ab[14]=Yc[14],ab[15]=Yc[15],ab));kc=t.loD;ea.uniformMatrix4fv(Da.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(ob[0]=kc[0],ob[1]=kc[1],ob[2]=kc[2],ob[3]=kc[3],ob[4]=kc[4],ob[5]=kc[5],ob[6]=kc[6],ob[7]=kc[7],ob[8]=kc[8],ob[9]=kc[9],ob[10]=kc[10],ob[11]=kc[11],ob[12]=kc[12],ob[13]=kc[13],ob[14]=kc[14],ob[15]=kc[15],ob));bc=t.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(bc)||bc instanceof Float32Array?bc:(Va[0]=bc[0],Va[1]=bc[1],Va[2]=bc[2],Va[3]=bc[3],Va[4]=bc[4],Va[5]=
bc[5],Va[6]=bc[6],Va[7]=bc[7],Va[8]=bc[8],Va[9]=bc[9],Va[10]=bc[10],Va[11]=bc[11],Va[12]=bc[12],Va[13]=bc[13],Va[14]=bc[14],Va[15]=bc[15],Va));Zc=t.resolution;Uc=Zc[0];yc=Zc[1];h&&cd===Uc&&hd===yc||(cd=Uc,hd=yc,ea.uniform2f(pa.location,Uc,yc));pd=t.viewBoxPos;ye=pd[0];id=pd[1];h&&ia===ye&&mf===id||(ia=ye,mf=id,ea.uniform2f(ya.location,ye,id));Nd=t.viewBoxSize;Xd=Nd[0];Od=Nd[1];h&&de===Xd&&Kd===Od||(de=Xd,Kd=Od,ea.uniform2f(Ja.location,Xd,Od));Id=t.maskHeight;h&&md===Id||(md=Id,ea.uniform1f(ka.location,
Id));Tc=t.drwLayer;h&&ud===Tc||(ud=Tc,ea.uniform1f(J.location,Tc));sd=t.contextColor;jd=sd[0];Cd=sd[1];oe=sd[2];ue=sd[3];h&&xd===jd&&Fd===Cd&&Fa===oe&&je===ue||(xd=jd,Fd=Cd,Fa=oe,je=ue,ea.uniform4f(P.location,jd,Cd,oe,ue));(ie=t.maskTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);he=ie._texture;ea.uniform1i(qa.location,he.bind());ve=t.offset;if(ee=t.count)Wc?ea.drawElements(1,ee,Wc.type,ve<<(Wc.type-5121>>1)):ea.drawArrays(1,ve,ee),aa.viewportWidth=od,aa.viewportHeight=nc,he.unbind()}Y.unbind();
ua.dirty=!0;ac.setVAO(null);ua.profile=f},draw:function(a){var c,e,f,h,t,y;c=mb.next;c!==mb.cur&&(c?ea.bindFramebuffer(36160,c.framebuffer):ea.bindFramebuffer(36160,null),mb.cur=c);if(ua.dirty){c=se[0];y=se[1];e=se[2];f=se[3];if(c!==Vd[0]||y!==Vd[1]||e!==Vd[2]||f!==Vd[3])ea.colorMask(c,y,e,f),Vd[0]=c,Vd[1]=y,Vd[2]=e,Vd[3]=f;c=zd.frontFace;c!==ua.frontFace&&(ea.frontFace(c),ua.frontFace=c);c=zd.polygonOffset_enable;c!==ua.polygonOffset_enable&&(c?ea.enable(32823):ea.disable(32823),ua.polygonOffset_enable=
c);c=Dd[0];y=Dd[1];if(c!==qd[0]||y!==qd[1])ea.polygonOffset(c,y),qd[0]=c,qd[1]=y;c=zd.sample_alpha;c!==ua.sample_alpha&&(c?ea.enable(32926):ea.disable(32926),ua.sample_alpha=c);c=zd.sample_enable;c!==ua.sample_enable&&(c?ea.enable(32928):ea.disable(32928),ua.sample_enable=c);c=ge[0];y=ge[1];if(c!==be[0]||y!==be[1])ea.sampleCoverage(c,y),be[0]=c,be[1]=y;c=zd.stencil_enable;c!==ua.stencil_enable&&(c?ea.enable(2960):ea.disable(2960),ua.stencil_enable=c);c=zd.stencil_mask;c!==ua.stencil_mask&&(ea.stencilMask(c),
ua.stencil_mask=c);c=Re[0];y=Re[1];e=Re[2];if(c!==Hd[0]||y!==Hd[1]||e!==Hd[2])ea.stencilFunc(c,y,e),Hd[0]=c,Hd[1]=y,Hd[2]=e;c=Zd[0];y=Zd[1];e=Zd[2];f=Zd[3];if(c!==Bd[0]||y!==Bd[1]||e!==Bd[2]||f!==Bd[3])ea.stencilOpSeparate(c,y,e,f),Bd[0]=c,Bd[1]=y,Bd[2]=e,Bd[3]=f;c=Ae[0];y=Ae[1];e=Ae[2];f=Ae[3];if(c!==te[0]||y!==te[1]||e!==te[2]||f!==te[3])ea.stencilOpSeparate(c,y,e,f),te[0]=c,te[1]=y,te[2]=e,te[3]=f}$c.height=a.viewportHeight;$c.width=a.viewportWidth;$c.x=a.viewportX;$c.y=a.viewportY;e=$c.x|0;f=
$c.y|0;h="width"in $c?$c.width|0:aa.framebufferWidth-e;t="height"in $c?$c.height|0:aa.framebufferHeight-f;c=aa.viewportWidth;aa.viewportWidth=h;y=aa.viewportHeight;aa.viewportHeight=t;ea.viewport(e,f,h,t);ld[0]=e;ld[1]=f;ld[2]=h;ld[3]=t;ea.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;ea.disable(3042);ua.blend_enable=!1;ea.blendEquationSeparate(32774,32774);ke[0]=32774;ke[1]=32774;ea.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);ua.cull_enable=!0;ea.cullFace(1029);
ua.cull_face=1029;ea.enable(2929);ua.depth_enable=!0;ea.depthFunc(513);ua.depth_func=513;ea.depthMask(!0);ua.depth_mask=!0;ea.depthRange(0,1);Ad[0]=0;Ad[1]=1;ea.disable(3024);ua.dither=!1;ea.lineWidth(2);ua.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;e=rd.x|0;f=rd.y|0;h="width"in rd?rd.width|0:aa.framebufferWidth-e;t="height"in rd?rd.height|0:aa.framebufferHeight-f;ea.scissor(e,f,h,t);Ze[0]=e;Ze[1]=f;Ze[2]=h;Ze[3]=t;ea.enable(3089);ua.scissor_enable=
!0;e=ua.profile;ua.profile=!1;ea.useProgram(I.program);ac.setVAO(null);f=Aa.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==M.dtype||4!==h.size||h.buffer!==M||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,M.buffer),ea.vertexAttribPointer(f,4,M.dtype,!1,0,0),h.type=M.dtype,h.size=4,h.buffer=M,h.normalized=!1,h.offset=0,h.stride=0;f=Ma.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==
h.offset||0!==h.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(f,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;f=F.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(f,4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,h.normalized=!1,h.offset=0,h.stride=0;f=eb.location;h=la[f];h.buffer||
ea.enableVertexAttribArray(f);if(h.type!==m.dtype||4!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,m.buffer),ea.vertexAttribPointer(f,4,m.dtype,!1,0,0),h.type=m.dtype,h.size=4,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;f=Ua.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==b.dtype||4!==h.size||h.buffer!==b||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,b.buffer),ea.vertexAttribPointer(f,4,b.dtype,!1,0,0),h.type=
b.dtype,h.size=4,h.buffer=b,h.normalized=!1,h.offset=0,h.stride=0;f=v.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==G.dtype||4!==h.size||h.buffer!==G||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,G.buffer),ea.vertexAttribPointer(f,4,G.dtype,!1,0,0),h.type=G.dtype,h.size=4,h.buffer=G,h.normalized=!1,h.offset=0,h.stride=0;f=p.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==B.dtype||4!==h.size||h.buffer!==B||!1!==h.normalized||0!==h.offset||
0!==h.stride)ea.bindBuffer(34962,B.buffer),ea.vertexAttribPointer(f,4,B.dtype,!1,0,0),h.type=B.dtype,h.size=4,h.buffer=B,h.normalized=!1,h.offset=0,h.stride=0;f=R.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==L.dtype||4!==h.size||h.buffer!==L||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,L.buffer),ea.vertexAttribPointer(f,4,L.dtype,!1,0,0),h.type=L.dtype,h.size=4,h.buffer=L,h.normalized=!1,h.offset=0,h.stride=0;f=ta.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);
if(h.type!==W.dtype||4!==h.size||h.buffer!==W||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,W.buffer),ea.vertexAttribPointer(f,4,W.dtype,!1,0,0),h.type=W.dtype,h.size=4,h.buffer=W,h.normalized=!1,h.offset=0,h.stride=0;f=va.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,u.buffer),ea.vertexAttribPointer(f,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,
h.normalized=!1,h.offset=0,h.stride=0;f=td.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==A.dtype||4!==h.size||h.buffer!==A||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,A.buffer),ea.vertexAttribPointer(f,4,A.dtype,!1,0,0),h.type=A.dtype,h.size=4,h.buffer=A,h.normalized=!1,h.offset=0,h.stride=0;f=Hb.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==w.dtype||4!==h.size||h.buffer!==w||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,
w.buffer),ea.vertexAttribPointer(f,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;f=ha.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==Z.dtype||4!==h.size||h.buffer!==Z||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,Z.buffer),ea.vertexAttribPointer(f,4,Z.dtype,!1,0,0),h.type=Z.dtype,h.size=4,h.buffer=Z,h.normalized=!1,h.offset=0,h.stride=0;f=H.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==r.dtype||
4!==h.size||h.buffer!==r||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,r.buffer),ea.vertexAttribPointer(f,4,r.dtype,!1,0,0),h.type=r.dtype,h.size=4,h.buffer=r,h.normalized=!1,h.offset=0,h.stride=0;f=sa.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==U.dtype||4!==h.size||h.buffer!==U||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,U.buffer),ea.vertexAttribPointer(f,4,U.dtype,!1,0,0),h.type=U.dtype,h.size=4,h.buffer=U,h.normalized=!1,h.offset=
0,h.stride=0;f=fa.location;h=la[f];h.buffer||ea.enableVertexAttribArray(f);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,n.buffer),ea.vertexAttribPointer(f,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,h.normalized=!1,h.offset=0,h.stride=0;f=a.dim0A;ea.uniformMatrix4fv(T.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],Lc[8]=f[8],
Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.dim1A;ea.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(nd[0]=f[0],nd[1]=f[1],nd[2]=f[2],nd[3]=f[3],nd[4]=f[4],nd[5]=f[5],nd[6]=f[6],nd[7]=f[7],nd[8]=f[8],nd[9]=f[9],nd[10]=f[10],nd[11]=f[11],nd[12]=f[12],nd[13]=f[13],nd[14]=f[14],nd[15]=f[15],nd));f=a.dim0B;ea.uniformMatrix4fv(x.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],Gc[2]=f[2],
Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=f[14],Gc[15]=f[15],Gc));f=a.dim1B;ea.uniformMatrix4fv(za.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(dd[0]=f[0],dd[1]=f[1],dd[2]=f[2],dd[3]=f[3],dd[4]=f[4],dd[5]=f[5],dd[6]=f[6],dd[7]=f[7],dd[8]=f[8],dd[9]=f[9],dd[10]=f[10],dd[11]=f[11],dd[12]=f[12],dd[13]=f[13],dd[14]=f[14],dd[15]=f[15],dd));f=a.dim0C;ea.uniformMatrix4fv(l.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Pc[0]=f[0],Pc[1]=f[1],Pc[2]=f[2],Pc[3]=f[3],Pc[4]=f[4],Pc[5]=f[5],Pc[6]=f[6],Pc[7]=f[7],Pc[8]=f[8],Pc[9]=f[9],Pc[10]=f[10],Pc[11]=f[11],Pc[12]=f[12],Pc[13]=f[13],Pc[14]=f[14],Pc[15]=f[15],Pc));f=a.dim1C;ea.uniformMatrix4fv(oa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(kd[0]=f[0],kd[1]=f[1],kd[2]=f[2],kd[3]=f[3],kd[4]=f[4],kd[5]=f[5],kd[6]=f[6],kd[7]=f[7],kd[8]=f[8],kd[9]=f[9],kd[10]=f[10],kd[11]=f[11],kd[12]=f[12],kd[13]=f[13],kd[14]=f[14],kd[15]=f[15],
kd));f=a.dim0D;ea.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.dim1D;ea.uniformMatrix4fv(q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fb[0]=f[0],Fb[1]=f[1],Fb[2]=f[2],Fb[3]=f[3],Fb[4]=f[4],Fb[5]=f[5],Fb[6]=f[6],Fb[7]=f[7],Fb[8]=f[8],Fb[9]=f[9],Fb[10]=f[10],
Fb[11]=f[11],Fb[12]=f[12],Fb[13]=f[13],Fb[14]=f[14],Fb[15]=f[15],Fb));f=a.loA;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(tc[0]=f[0],tc[1]=f[1],tc[2]=f[2],tc[3]=f[3],tc[4]=f[4],tc[5]=f[5],tc[6]=f[6],tc[7]=f[7],tc[8]=f[8],tc[9]=f[9],tc[10]=f[10],tc[11]=f[11],tc[12]=f[12],tc[13]=f[13],tc[14]=f[14],tc[15]=f[15],tc));f=a.hiA;ea.uniformMatrix4fv(da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xb[0]=f[0],xb[1]=f[1],xb[2]=f[2],xb[3]=f[3],xb[4]=f[4],xb[5]=
f[5],xb[6]=f[6],xb[7]=f[7],xb[8]=f[8],xb[9]=f[9],xb[10]=f[10],xb[11]=f[11],xb[12]=f[12],xb[13]=f[13],xb[14]=f[14],xb[15]=f[15],xb));f=a.loB;ea.uniformMatrix4fv(wa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wc[0]=f[0],wc[1]=f[1],wc[2]=f[2],wc[3]=f[3],wc[4]=f[4],wc[5]=f[5],wc[6]=f[6],wc[7]=f[7],wc[8]=f[8],wc[9]=f[9],wc[10]=f[10],wc[11]=f[11],wc[12]=f[12],wc[13]=f[13],wc[14]=f[14],wc[15]=f[15],wc));f=a.hiB;ea.uniformMatrix4fv(S.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Cb[0]=f[0],Cb[1]=f[1],Cb[2]=f[2],Cb[3]=f[3],Cb[4]=f[4],Cb[5]=f[5],Cb[6]=f[6],Cb[7]=f[7],Cb[8]=f[8],Cb[9]=f[9],Cb[10]=f[10],Cb[11]=f[11],Cb[12]=f[12],Cb[13]=f[13],Cb[14]=f[14],Cb[15]=f[15],Cb));f=a.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;ea.uniformMatrix4fv(ma.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(lc[0]=f[0],lc[1]=f[1],lc[2]=f[2],lc[3]=f[3],lc[4]=f[4],lc[5]=f[5],lc[6]=f[6],lc[7]=f[7],lc[8]=f[8],lc[9]=f[9],lc[10]=f[10],lc[11]=f[11],lc[12]=f[12],lc[13]=f[13],lc[14]=f[14],lc[15]=f[15],lc));f=a.loD;ea.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=
f[14],Hc[15]=f[15],Hc));f=a.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Wc[0]=f[0],Wc[1]=f[1],Wc[2]=f[2],Wc[3]=f[3],Wc[4]=f[4],Wc[5]=f[5],Wc[6]=f[6],Wc[7]=f[7],Wc[8]=f[8],Wc[9]=f[9],Wc[10]=f[10],Wc[11]=f[11],Wc[12]=f[12],Wc[13]=f[13],Wc[14]=f[14],Wc[15]=f[15],Wc));f=a.resolution;ea.uniform2f(pa.location,f[0],f[1]);f=a.viewBoxPos;ea.uniform2f(ya.location,f[0],f[1]);f=a.viewBoxSize;ea.uniform2f(Ja.location,f[0],f[1]);ea.uniform1f(ka.location,a.maskHeight);ea.uniform1f(J.location,
a.drwLayer);f=a.contextColor;ea.uniform4f(P.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;ea.uniform1i(qa.location,f.bind());ea.uniform1i(Ea.location,O.bind());(h=Ia.elements)?ea.bindBuffer(34963,h.buffer.buffer):ac.currentVAO&&(h=Ba.getElements(ac.currentVAO.elements))&&ea.bindBuffer(34963,h.buffer.buffer);t=a.offset;if(a=a.count)h?ea.drawElements(1,a,h.type,t<<(h.type-5121>>1)):ea.drawArrays(1,t,a),ua.dirty=!0,ac.setVAO(null),aa.viewportWidth=
c,aa.viewportHeight=y,ua.profile=e,f.unbind(),O.unbind()},scope:function(l,v,q){var p,H,F,R,d,sa,Ma,Ea,J,T,x,S,eb,ga,pa,ha,P,la,Q,ta,N,da,ya,K,Ja,ea,za,O,I,wa,ra,ka,Y,Ua,fa,Aa,va,qa,Da,oa,ma,Hb,Ca,td,Ba,mb,Cc,$a,dc,Fb,Pc,Bb,ec,oc,xb,Cb,be,Ae,mc,ac,Zd,pc,cb,ab,Va,Ic,X,Re,kd,lc,ob,Gc,te,dd,Hd,Lc,tc,yb,wc,ke,nd,Hc,Dc,Jc,Vd,ld,Bd,Nb,Dd,Fc,Ze,Vc,Jf,Wc,ge,se,ze,qd,Ad,ia,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,Fa,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,
Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=l.viewportHeight;$c.width=l.viewportWidth;$c.x=l.viewportX;$c.y=l.viewportY;
p=$c.x|0;H=$c.y|0;F="width"in $c?$c.width|0:aa.framebufferWidth-p;R="height"in $c?$c.height|0:aa.framebufferHeight-H;d=aa.viewportWidth;aa.viewportWidth=F;sa=aa.viewportHeight;aa.viewportHeight=R;Ma=$d[0];$d[0]=p;Ea=$d[1];$d[1]=H;J=$d[2];$d[2]=F;T=$d[3];$d[3]=R;x=Sb[0];Sb[0]=0;S=Sb[1];Sb[1]=0;eb=Sb[2];Sb[2]=0;ga=Sb[3];Sb[3]=0;pa=zd.blend_enable;zd.blend_enable=!1;ha=Gd[0];Gd[0]=32774;P=Gd[1];Gd[1]=32774;la=Wd[0];Wd[0]=770;Q=Wd[1];Wd[1]=771;ta=Wd[2];Wd[2]=1;N=Wd[3];Wd[3]=1;da=zd.cull_enable;zd.cull_enable=
!0;ya=zd.cull_face;zd.cull_face=1029;K=zd.depth_enable;zd.depth_enable=!0;Ja=zd.depth_func;zd.depth_func=513;ea=zd.depth_mask;zd.depth_mask=!0;za=ne[0];ne[0]=0;O=ne[1];ne[1]=1;I=zd.dither;zd.dither=!1;wa=zd.lineWidth;zd.lineWidth=2;rd.height=l.scissorHeight;rd.width=l.scissorWidth;rd.x=l.scissorX;rd.y=l.scissorY;ra=rd.x|0;ka=rd.y|0;Y="width"in rd?rd.width|0:aa.framebufferWidth-ra;Ua="height"in rd?rd.height|0:aa.framebufferHeight-ka;fa=Ce[0];Ce[0]=ra;Aa=Ce[1];Ce[1]=ka;va=Ce[2];Ce[2]=Y;qa=Ce[3];Ce[3]=
Ua;Da=zd.scissor_enable;zd.scissor_enable=!0;oa=ua.profile;ua.profile=!1;ma=l.offset;Hb=Ia.offset;Ia.offset=ma;Ca=l.count;td=Ia.count;Ia.count=Ca;Ba=Ia.primitive;Ia.primitive=1;mb=l.contextColor;Cc=Ga[24];Ga[24]=mb;$a=l.dim0A;dc=Ga[3];Ga[3]=$a;Fb=l.dim0B;Pc=Ga[5];Ga[5]=Fb;Bb=l.dim0C;ec=Ga[7];Ga[7]=Bb;oc=l.dim0D;xb=Ga[9];Ga[9]=oc;Cb=l.dim1A;be=Ga[4];Ga[4]=Cb;Ae=l.dim1B;mc=Ga[6];Ga[6]=Ae;ac=l.dim1C;Zd=Ga[8];Ga[8]=ac;pc=l.dim1D;cb=Ga[10];Ga[10]=pc;ab=l.drwLayer;Va=Ga[23];Ga[23]=ab;Ic=l.hiA;X=Ga[12];
Ga[12]=Ic;Re=l.hiB;kd=Ga[14];Ga[14]=Re;lc=l.hiC;ob=Ga[16];Ga[16]=lc;Gc=l.hiD;te=Ga[18];Ga[18]=Gc;dd=l.loA;Hd=Ga[11];Ga[11]=dd;Lc=l.loB;tc=Ga[13];Ga[13]=Lc;yb=l.loC;wc=Ga[15];Ga[15]=yb;ke=l.loD;nd=Ga[17];Ga[17]=ke;Hc=l.maskHeight;Dc=Ga[22];Ga[22]=Hc;Jc=l.maskTexture;Vd=Ga[25];Ga[25]=Jc;ld=Ga[26];Ga[26]=ja;Bd=l.resolution;Nb=Ga[19];Ga[19]=Bd;Dd=l.viewBoxPos;Fc=Ga[20];Ga[20]=Dd;Ze=l.viewBoxSize;Vc=Ga[21];Ga[21]=Ze;Jf=e.buffer;e.buffer=n;Wc=e.divisor;e.divisor=0;ge=e.normalized;e.normalized=!1;se=e.offset;
e.offset=0;ze=e.size;e.size=0;qd=e.state;e.state=1;Ad=e.stride;e.stride=0;ia=e.type;e.type=n.dtype;Od=e.w;e.w=0;Kd=e.x;e.x=0;Id=e.y;e.y=0;md=e.z;e.z=0;Tc=C.buffer;C.buffer=M;ud=C.divisor;C.divisor=0;sd=C.normalized;C.normalized=!1;jd=C.offset;C.offset=0;xd=C.size;C.size=0;Cd=C.state;C.state=1;Fd=C.stride;C.stride=0;Fa=C.type;C.type=M.dtype;qe=C.w;C.w=0;ue=C.x;C.x=0;je=C.y;C.y=0;ie=C.z;C.z=0;he=V.buffer;V.buffer=g;ve=V.divisor;V.divisor=0;ee=V.normalized;V.normalized=!1;le=V.offset;V.offset=0;Oc=V.size;
V.size=0;fd=V.state;V.state=1;we=V.stride;V.stride=0;pe=V.type;V.type=g.dtype;Ld=V.w;V.w=0;Pd=V.x;V.x=0;Rd=V.y;V.y=0;Sd=V.z;V.z=0;me=f.buffer;f.buffer=k;He=f.divisor;f.divisor=0;Be=f.normalized;f.normalized=!1;re=f.offset;f.offset=0;Se=f.size;f.size=0;Te=f.state;f.state=1;Oe=f.stride;f.stride=0;xe=f.type;f.type=k.dtype;Fe=f.w;f.w=0;Ie=f.x;f.x=0;Je=f.y;f.y=0;Ke=f.z;f.z=0;Ge=ba.buffer;ba.buffer=m;Md=ba.divisor;ba.divisor=0;Yd=ba.normalized;ba.normalized=!1;ce=ba.offset;ba.offset=0;fe=ba.size;ba.size=
0;Le=ba.state;ba.state=1;Jd=ba.stride;ba.stride=0;Td=ba.type;ba.type=m.dtype;De=ba.w;ba.w=0;Me=ba.x;ba.x=0;bf=ba.y;ba.y=0;af=ba.z;ba.z=0;Ue=h.buffer;h.buffer=b;Pe=h.divisor;h.divisor=0;$e=h.normalized;h.normalized=!1;Ye=h.offset;h.offset=0;Ve=h.size;h.size=0;We=h.state;h.state=1;Ud=h.stride;h.stride=0;ae=h.type;h.type=b.dtype;Xe=h.w;h.w=0;hf=h.x;h.x=0;nf=h.y;h.y=0;ef=h.z;h.z=0;jf=z.buffer;z.buffer=G;kf=z.divisor;z.divisor=0;lf=z.normalized;z.normalized=!1;rf=z.offset;z.offset=0;of=z.size;z.size=0;
sf=z.state;z.state=1;Bf=z.stride;z.stride=0;Cf=z.type;z.type=G.dtype;Qe=z.w;z.w=0;Ee=z.x;z.x=0;pf=z.y;z.y=0;qf=z.z;z.z=0;Df=ca.buffer;ca.buffer=B;Gf=ca.divisor;ca.divisor=0;Af=ca.normalized;ca.normalized=!1;Ef=ca.offset;ca.offset=0;Ff=ca.size;ca.size=0;wf=ca.state;ca.state=1;xf=ca.stride;ca.stride=0;vf=ca.type;ca.type=B.dtype;yf=ca.w;ca.w=0;zf=ca.x;ca.x=0;If=ca.y;ca.y=0;Kf=ca.z;ca.z=0;Lf=E.buffer;E.buffer=L;Mf=E.divisor;E.divisor=0;tf=E.normalized;E.normalized=!1;Rf=E.offset;E.offset=0;Hf=E.size;
E.size=0;uf=E.state;E.state=1;dg=E.stride;E.stride=0;Sf=E.type;E.type=L.dtype;Tf=E.w;E.w=0;qg=E.x;E.x=0;ff=E.y;E.y=0;cf=E.z;E.z=0;Nf=D.buffer;D.buffer=W;Of=D.divisor;D.divisor=0;eg=D.normalized;D.normalized=!1;fg=D.offset;D.offset=0;gg=D.size;D.size=0;hg=D.state;D.state=1;ig=D.stride;D.stride=0;Wf=D.type;D.type=W.dtype;Uf=D.w;D.w=0;Xf=D.x;D.x=0;Yf=D.y;D.y=0;Zf=D.z;D.z=0;jg=c.buffer;c.buffer=u;rg=c.divisor;c.divisor=0;sg=c.normalized;c.normalized=!1;tg=c.offset;c.offset=0;ug=c.size;c.size=0;vg=c.state;
c.state=1;wg=c.stride;c.stride=0;xg=c.type;c.type=u.dtype;yg=c.w;c.w=0;zg=c.x;c.x=0;Ag=c.y;c.y=0;Bg=c.z;c.z=0;gf=t.buffer;t.buffer=A;df=t.divisor;t.divisor=0;Pf=t.normalized;t.normalized=!1;Qf=t.offset;t.offset=0;kg=t.size;t.size=0;lg=t.state;t.state=1;mg=t.stride;t.stride=0;ng=t.type;t.type=A.dtype;og=t.w;t.w=0;$f=t.x;t.x=0;Vf=t.y;t.y=0;ag=t.z;t.z=0;bg=a.buffer;a.buffer=w;cg=a.divisor;a.divisor=0;pg=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;
a.stride=0;Gg=a.type;a.type=w.dtype;Hg=a.w;a.w=0;Ig=a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=xa.buffer;xa.buffer=Z;Mg=xa.divisor;xa.divisor=0;Ng=xa.normalized;xa.normalized=!1;Og=xa.offset;xa.offset=0;Pg=xa.size;xa.size=0;Qg=xa.state;xa.state=1;Rg=xa.stride;xa.stride=0;Sg=xa.type;xa.type=Z.dtype;Tg=xa.w;xa.w=0;Ug=xa.x;xa.x=0;Vg=xa.y;xa.y=0;Wg=xa.z;xa.z=0;Xg=y.buffer;y.buffer=r;Yg=y.divisor;y.divisor=0;Zg=y.normalized;y.normalized=!1;$g=y.offset;y.offset=0;ah=y.size;y.size=0;bh=y.state;y.state=1;ch=
y.stride;y.stride=0;dh=y.type;y.type=r.dtype;eh=y.w;y.w=0;fh=y.x;y.x=0;gh=y.y;y.y=0;hh=y.z;y.z=0;ih=na.buffer;na.buffer=U;jh=na.divisor;na.divisor=0;kh=na.normalized;na.normalized=!1;lh=na.offset;na.offset=0;mh=na.size;na.size=0;nh=na.state;na.state=1;oh=na.stride;na.stride=0;ph=na.type;na.type=U.dtype;qh=na.w;na.w=0;rh=na.x;na.x=0;sh=na.y;na.y=0;th=na.z;na.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ua.dirty=!0;v(aa,l,q);aa.viewportWidth=d;aa.viewportHeight=sa;$d[0]=Ma;$d[1]=Ea;$d[2]=J;$d[3]=T;
Sb[0]=x;Sb[1]=S;Sb[2]=eb;Sb[3]=ga;zd.blend_enable=pa;Gd[0]=ha;Gd[1]=P;Wd[0]=la;Wd[1]=Q;Wd[2]=ta;Wd[3]=N;zd.cull_enable=da;zd.cull_face=ya;zd.depth_enable=K;zd.depth_func=Ja;zd.depth_mask=ea;ne[0]=za;ne[1]=O;zd.dither=I;zd.lineWidth=wa;Ce[0]=fa;Ce[1]=Aa;Ce[2]=va;Ce[3]=qa;zd.scissor_enable=Da;ua.profile=oa;Ia.offset=Hb;Ia.count=td;Ia.primitive=Ba;Ga[24]=Cc;Ga[3]=dc;Ga[5]=Pc;Ga[7]=ec;Ga[9]=xb;Ga[4]=be;Ga[6]=mc;Ga[8]=Zd;Ga[10]=cb;Ga[23]=Va;Ga[12]=X;Ga[14]=kd;Ga[16]=ob;Ga[18]=te;Ga[11]=Hd;Ga[13]=tc;Ga[15]=
wc;Ga[17]=nd;Ga[22]=Dc;Ga[25]=Vd;Ga[26]=ld;Ga[19]=Nb;Ga[20]=Fc;Ga[21]=Vc;e.buffer=Jf;e.divisor=Wc;e.normalized=ge;e.offset=se;e.size=ze;e.state=qd;e.stride=Ad;e.type=ia;e.w=Od;e.x=Kd;e.y=Id;e.z=md;C.buffer=Tc;C.divisor=ud;C.normalized=sd;C.offset=jd;C.size=xd;C.state=Cd;C.stride=Fd;C.type=Fa;C.w=qe;C.x=ue;C.y=je;C.z=ie;V.buffer=he;V.divisor=ve;V.normalized=ee;V.offset=le;V.size=Oc;V.state=fd;V.stride=we;V.type=pe;V.w=Ld;V.x=Pd;V.y=Rd;V.z=Sd;f.buffer=me;f.divisor=He;f.normalized=Be;f.offset=re;f.size=
Se;f.state=Te;f.stride=Oe;f.type=xe;f.w=Fe;f.x=Ie;f.y=Je;f.z=Ke;ba.buffer=Ge;ba.divisor=Md;ba.normalized=Yd;ba.offset=ce;ba.size=fe;ba.state=Le;ba.stride=Jd;ba.type=Td;ba.w=De;ba.x=Me;ba.y=bf;ba.z=af;h.buffer=Ue;h.divisor=Pe;h.normalized=$e;h.offset=Ye;h.size=Ve;h.state=We;h.stride=Ud;h.type=ae;h.w=Xe;h.x=hf;h.y=nf;h.z=ef;z.buffer=jf;z.divisor=kf;z.normalized=lf;z.offset=rf;z.size=of;z.state=sf;z.stride=Bf;z.type=Cf;z.w=Qe;z.x=Ee;z.y=pf;z.z=qf;ca.buffer=Df;ca.divisor=Gf;ca.normalized=Af;ca.offset=
Ef;ca.size=Ff;ca.state=wf;ca.stride=xf;ca.type=vf;ca.w=yf;ca.x=zf;ca.y=If;ca.z=Kf;E.buffer=Lf;E.divisor=Mf;E.normalized=tf;E.offset=Rf;E.size=Hf;E.state=uf;E.stride=dg;E.type=Sf;E.w=Tf;E.x=qg;E.y=ff;E.z=cf;D.buffer=Nf;D.divisor=Of;D.normalized=eg;D.offset=fg;D.size=gg;D.state=hg;D.stride=ig;D.type=Wf;D.w=Uf;D.x=Xf;D.y=Yf;D.z=Zf;c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;t.buffer=gf;t.divisor=df;t.normalized=Pf;t.offset=
Qf;t.size=kg;t.state=lg;t.stride=mg;t.type=ng;t.w=og;t.x=$f;t.y=Vf;t.z=ag;a.buffer=bg;a.divisor=cg;a.normalized=pg;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;xa.buffer=Lg;xa.divisor=Mg;xa.normalized=Ng;xa.offset=Og;xa.size=Pg;xa.state=Qg;xa.stride=Rg;xa.type=Sg;xa.w=Tg;xa.x=Ug;xa.y=Vg;xa.z=Wg;y.buffer=Xg;y.divisor=Yg;y.normalized=Zg;y.offset=$g;y.size=ah;y.state=bh;y.stride=ch;y.type=dh;y.w=eh;y.x=fh;y.y=gh;y.z=hh;na.buffer=ih;na.divisor=jh;na.normalized=kh;
na.offset=lh;na.size=mh;na.state=nh;na.stride=oh;na.type=ph;na.w=qh;na.x=rh;na.y=sh;na.z=th;$b.vert=uh;$b.frag=vh;ua.dirty=!0}}},$1:function(d,K){var I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c;I=d.attributes;M=d.current;g=d.framebuffer;k=d.gl;m=d.next;b=d.vao;G=m.blend_color;B=M.blend_color;L=m.blend_equation;W=M.blend_equation;u=m.blend_func;A=M.blend_func;w=m.colorMask;Z=M.colorMask;r=m.depth_range;U=M.depth_range;n=m.polygonOffset_offset;O=M.polygonOffset_offset;ja=m.sample_coverage;
e=M.sample_coverage;C=m.scissor_box;V=M.scissor_box;f=m.stencil_func;ba=M.stencil_func;h=m.stencil_opBack;z=M.stencil_opBack;ca=m.stencil_opFront;E=M.stencil_opFront;D=m.viewport;c=M.viewport;return{poll:function(){var b,a,d,y,K,I,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra;M.dirty=!1;a=m.blend_enable;d=m.cull_enable;y=m.depth_enable;K=m.dither;I=m.polygonOffset_enable;Y=m.sample_alpha;fa=m.sample_enable;P=m.scissor_enable;T=m.stencil_enable;x=m.cull_face;l=M.cull_face;N=m.depth_func;Q=M.depth_func;za=
m.depth_mask;oa=M.depth_mask;q=m.frontFace;J=M.frontFace;da=m.lineWidth;S=M.lineWidth;ma=m.stencil_mask;ra=M.stencil_mask;b=g.next;b!==g.cur&&(b?k.bindFramebuffer(36160,b.framebuffer):k.bindFramebuffer(36160,null),g.cur=b);a!==M.blend_enable&&(a?k.enable(3042):k.disable(3042),M.blend_enable=a);d!==M.cull_enable&&(d?k.enable(2884):k.disable(2884),M.cull_enable=d);y!==M.depth_enable&&(y?k.enable(2929):k.disable(2929),M.depth_enable=y);K!==M.dither&&(K?k.enable(3024):k.disable(3024),M.dither=K);I!==
M.polygonOffset_enable&&(I?k.enable(32823):k.disable(32823),M.polygonOffset_enable=I);Y!==M.sample_alpha&&(Y?k.enable(32926):k.disable(32926),M.sample_alpha=Y);fa!==M.sample_enable&&(fa?k.enable(32928):k.disable(32928),M.sample_enable=fa);P!==M.scissor_enable&&(P?k.enable(3089):k.disable(3089),M.scissor_enable=P);T!==M.stencil_enable&&(T?k.enable(2960):k.disable(2960),M.stencil_enable=T);if(G[0]!==B[0]||G[1]!==B[1]||G[2]!==B[2]||G[3]!==B[3])k.blendColor(G[0],G[1],G[2],G[3]),B[0]=G[0],B[1]=G[1],B[2]=
G[2],B[3]=G[3];if(L[0]!==W[0]||L[1]!==W[1])k.blendEquationSeparate(L[0],L[1]),W[0]=L[0],W[1]=L[1];if(u[0]!==A[0]||u[1]!==A[1]||u[2]!==A[2]||u[3]!==A[3])k.blendFuncSeparate(u[0],u[1],u[2],u[3]),A[0]=u[0],A[1]=u[1],A[2]=u[2],A[3]=u[3];if(w[0]!==Z[0]||w[1]!==Z[1]||w[2]!==Z[2]||w[3]!==Z[3])k.colorMask(w[0],w[1],w[2],w[3]),Z[0]=w[0],Z[1]=w[1],Z[2]=w[2],Z[3]=w[3];x!==l&&(k.cullFace(x),M.cull_face=x);N!==Q&&(k.depthFunc(N),M.depth_func=N);za!==oa&&(k.depthMask(za),M.depth_mask=za);if(r[0]!==U[0]||r[1]!==
U[1])k.depthRange(r[0],r[1]),U[0]=r[0],U[1]=r[1];q!==J&&(k.frontFace(q),M.frontFace=q);da!==S&&(k.lineWidth(da),M.lineWidth=da);if(n[0]!==O[0]||n[1]!==O[1])k.polygonOffset(n[0],n[1]),O[0]=n[0],O[1]=n[1];if(ja[0]!==e[0]||ja[1]!==e[1])k.sampleCoverage(ja[0],ja[1]),e[0]=ja[0],e[1]=ja[1];if(C[0]!==V[0]||C[1]!==V[1]||C[2]!==V[2]||C[3]!==V[3])k.scissor(C[0],C[1],C[2],C[3]),V[0]=C[0],V[1]=C[1],V[2]=C[2],V[3]=C[3];if(f[0]!==ba[0]||f[1]!==ba[1]||f[2]!==ba[2])k.stencilFunc(f[0],f[1],f[2]),ba[0]=f[0],ba[1]=
f[1],ba[2]=f[2];ma!==ra&&(k.stencilMask(ma),M.stencil_mask=ma);if(h[0]!==z[0]||h[1]!==z[1]||h[2]!==z[2]||h[3]!==z[3])k.stencilOpSeparate(h[0],h[1],h[2],h[3]),z[0]=h[0],z[1]=h[1],z[2]=h[2],z[3]=h[3];if(ca[0]!==E[0]||ca[1]!==E[1]||ca[2]!==E[2]||ca[3]!==E[3])k.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]),E[0]=ca[0],E[1]=ca[1],E[2]=ca[2],E[3]=ca[3];if(D[0]!==c[0]||D[1]!==c[1]||D[2]!==c[2]||D[3]!==c[3])k.viewport(D[0],D[1],D[2],D[3]),c[0]=D[0],c[1]=D[1],c[2]=D[2],c[3]=D[3]},refresh:function(){var t,a,d,
y,na,Cc,Y,fa,P,T,x,l,N,Q,za,oa;M.dirty=!1;a=m.blend_enable;d=m.cull_enable;y=m.depth_enable;na=m.dither;Cc=m.polygonOffset_enable;Y=m.sample_alpha;fa=m.sample_enable;P=m.scissor_enable;T=m.stencil_enable;x=m.cull_face;l=m.depth_func;N=m.depth_mask;Q=m.frontFace;za=m.lineWidth;oa=m.stencil_mask;(t=g.next)?k.bindFramebuffer(36160,t.framebuffer):k.bindFramebuffer(36160,null);g.cur=t;t=I[0];t.buffer?(k.enableVertexAttribArray(0),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(0,t.size,t.type,
t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(0),k.vertexAttrib4f(0,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(0,t.divisor);t=I[1];t.buffer?(k.enableVertexAttribArray(1),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(1,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(1),k.vertexAttrib4f(1,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(1,t.divisor);t=I[2];t.buffer?(k.enableVertexAttribArray(2),k.bindBuffer(34962,t.buffer.buffer),
k.vertexAttribPointer(2,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(2),k.vertexAttrib4f(2,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(2,t.divisor);t=I[3];t.buffer?(k.enableVertexAttribArray(3),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(3,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(3),k.vertexAttrib4f(3,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(3,t.divisor);t=I[4];t.buffer?(k.enableVertexAttribArray(4),
k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(4,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(4),k.vertexAttrib4f(4,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(4,t.divisor);t=I[5];t.buffer?(k.enableVertexAttribArray(5),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(5,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(5),k.vertexAttrib4f(5,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(5,t.divisor);
t=I[6];t.buffer?(k.enableVertexAttribArray(6),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(6,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(6),k.vertexAttrib4f(6,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(6,t.divisor);t=I[7];t.buffer?(k.enableVertexAttribArray(7),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(7,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(7),k.vertexAttrib4f(7,t.x,t.y,t.z,t.w),t.buffer=
null);K.vertexAttribDivisorANGLE(7,t.divisor);t=I[8];t.buffer?(k.enableVertexAttribArray(8),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(8,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(8),k.vertexAttrib4f(8,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(8,t.divisor);t=I[9];t.buffer?(k.enableVertexAttribArray(9),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(9,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(9),
k.vertexAttrib4f(9,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(9,t.divisor);t=I[10];t.buffer?(k.enableVertexAttribArray(10),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(10,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(10),k.vertexAttrib4f(10,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(10,t.divisor);t=I[11];t.buffer?(k.enableVertexAttribArray(11),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(11,t.size,t.type,t.normalized,
t.stride,t.offset)):(k.disableVertexAttribArray(11),k.vertexAttrib4f(11,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(11,t.divisor);t=I[12];t.buffer?(k.enableVertexAttribArray(12),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(12,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(12),k.vertexAttrib4f(12,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(12,t.divisor);t=I[13];t.buffer?(k.enableVertexAttribArray(13),k.bindBuffer(34962,t.buffer.buffer),
k.vertexAttribPointer(13,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(13),k.vertexAttrib4f(13,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(13,t.divisor);t=I[14];t.buffer?(k.enableVertexAttribArray(14),k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(14,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(14),k.vertexAttrib4f(14,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(14,t.divisor);t=I[15];t.buffer?(k.enableVertexAttribArray(15),
k.bindBuffer(34962,t.buffer.buffer),k.vertexAttribPointer(15,t.size,t.type,t.normalized,t.stride,t.offset)):(k.disableVertexAttribArray(15),k.vertexAttrib4f(15,t.x,t.y,t.z,t.w),t.buffer=null);K.vertexAttribDivisorANGLE(15,t.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);a?k.enable(3042):k.disable(3042);M.blend_enable=a;d?k.enable(2884):k.disable(2884);M.cull_enable=d;y?k.enable(2929):k.disable(2929);M.depth_enable=y;na?k.enable(3024):k.disable(3024);M.dither=na;Cc?k.enable(32823):k.disable(32823);
M.polygonOffset_enable=Cc;Y?k.enable(32926):k.disable(32926);M.sample_alpha=Y;fa?k.enable(32928):k.disable(32928);M.sample_enable=fa;P?k.enable(3089):k.disable(3089);M.scissor_enable=P;T?k.enable(2960):k.disable(2960);M.stencil_enable=T;k.blendColor(G[0],G[1],G[2],G[3]);B[0]=G[0];B[1]=G[1];B[2]=G[2];B[3]=G[3];k.blendEquationSeparate(L[0],L[1]);W[0]=L[0];W[1]=L[1];k.blendFuncSeparate(u[0],u[1],u[2],u[3]);A[0]=u[0];A[1]=u[1];A[2]=u[2];A[3]=u[3];k.colorMask(w[0],w[1],w[2],w[3]);Z[0]=w[0];Z[1]=w[1];Z[2]=
w[2];Z[3]=w[3];k.cullFace(x);M.cull_face=x;k.depthFunc(l);M.depth_func=l;k.depthMask(N);M.depth_mask=N;k.depthRange(r[0],r[1]);U[0]=r[0];U[1]=r[1];k.frontFace(Q);M.frontFace=Q;k.lineWidth(za);M.lineWidth=za;k.polygonOffset(n[0],n[1]);O[0]=n[0];O[1]=n[1];k.sampleCoverage(ja[0],ja[1]);e[0]=ja[0];e[1]=ja[1];k.scissor(C[0],C[1],C[2],C[3]);V[0]=C[0];V[1]=C[1];V[2]=C[2];V[3]=C[3];k.stencilFunc(f[0],f[1],f[2]);ba[0]=f[0];ba[1]=f[1];ba[2]=f[2];k.stencilMask(oa);M.stencil_mask=oa;k.stencilOpSeparate(h[0],
h[1],h[2],h[3]);z[0]=h[0];z[1]=h[1];z[2]=h[2];z[3]=h[3];k.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]);E[0]=ca[0];E[1]=ca[1];E[2]=ca[2];E[3]=ca[3];k.viewport(D[0],D[1],D[2],D[3]);c[0]=D[0];c[1]=D[1];c[2]=D[2];c[3]=D[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,Cc,Y,fa,P,T,x,l,N,Q,za,oa){var q,J,da,S,ma,ra,
Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,td,Hb,ha,H,sa,Ea,pa,ya,Ja,la,aa,ua,Ia,Ba,mb,ea,zd,$b,Ga,ac,Sb;q=d.attributes;J=d.buffer;da=d.context;S=d.current;ma=d.draw;ra=d.elements;Ca=d.extensions;wa=d.framebuffer;ga=d.gl;Da=d.isBufferArgs;ka=d.next;qa=d.shader;Aa=d.uniforms;Ma=d.vao;F=ka.blend_color;eb=S.blend_color;Ua=ka.blend_equation;v=S.blend_equation;p=ka.blend_func;R=S.blend_func;ta=ka.colorMask;va=S.colorMask;td=ka.depth_range;Hb=S.depth_range;ha=ka.polygonOffset_offset;H=S.polygonOffset_offset;
sa=ka.sample_coverage;Ea=S.sample_coverage;pa=ka.scissor_box;ya=S.scissor_box;Ja=ka.stencil_func;la=S.stencil_func;aa=ka.stencil_opBack;ua=S.stencil_opBack;Ia=ka.stencil_opFront;Ba=S.stencil_opFront;mb=ka.viewport;ea=S.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=I;$b.divisor=1;Ga={};Ga.buffer=M;Ga.divisor=1;ac={};ac.buffer=g;ac.divisor=1;Sb={};Sb.buffer=k;Sb.divisor=1;return{batch:function(b,e){var f,k,h,p,F,m;f=wa.next;
f!==wa.cur&&(f?ga.bindFramebuffer(36160,f.framebuffer):ga.bindFramebuffer(36160,null),wa.cur=f);if(S.dirty){var g,n,d,C,r,pa,M,w,B,O,I,G,V,L,U,Ua,ba,Aa,Z,qa,ja,mb,X,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc;g=ka.dither;g!==S.dither&&(g?ga.enable(3024):ga.disable(3024),S.dither=g);n=ka.depth_func;n!==S.depth_func&&(ga.depthFunc(n),S.depth_func=n);d=td[0];C=td[1];if(d!==Hb[0]||C!==Hb[1])ga.depthRange(d,C),Hb[0]=d,Hb[1]=C;r=ka.depth_mask;r!==S.depth_mask&&(ga.depthMask(r),S.depth_mask=r);pa=ta[0];M=ta[1];w=ta[2];
B=ta[3];if(pa!==va[0]||M!==va[1]||w!==va[2]||B!==va[3])ga.colorMask(pa,M,w,B),va[0]=pa,va[1]=M,va[2]=w,va[3]=B;O=ka.cull_enable;O!==S.cull_enable&&(O?ga.enable(2884):ga.disable(2884),S.cull_enable=O);I=ka.cull_face;I!==S.cull_face&&(ga.cullFace(I),S.cull_face=I);G=ka.frontFace;G!==S.frontFace&&(ga.frontFace(G),S.frontFace=G);V=ka.lineWidth;V!==S.lineWidth&&(ga.lineWidth(V),S.lineWidth=V);L=ka.polygonOffset_enable;L!==S.polygonOffset_enable&&(L?ga.enable(32823):ga.disable(32823),S.polygonOffset_enable=
L);U=ha[0];Ua=ha[1];if(U!==H[0]||Ua!==H[1])ga.polygonOffset(U,Ua),H[0]=U,H[1]=Ua;ba=ka.sample_alpha;ba!==S.sample_alpha&&(ba?ga.enable(32926):ga.disable(32926),S.sample_alpha=ba);Aa=ka.sample_enable;Aa!==S.sample_enable&&(Aa?ga.enable(32928):ga.disable(32928),S.sample_enable=Aa);Z=sa[0];qa=sa[1];if(Z!==Ea[0]||qa!==Ea[1])ga.sampleCoverage(Z,qa),Ea[0]=Z,Ea[1]=qa;ja=ka.stencil_enable;ja!==S.stencil_enable&&(ja?ga.enable(2960):ga.disable(2960),S.stencil_enable=ja);mb=ka.stencil_mask;mb!==S.stencil_mask&&
(ga.stencilMask(mb),S.stencil_mask=mb);X=Ja[0];Bb=Ja[1];Fb=Ja[2];if(X!==la[0]||Bb!==la[1]||Fb!==la[2])ga.stencilFunc(X,Bb,Fb),la[0]=X,la[1]=Bb,la[2]=Fb;tc=Ia[0];xb=Ia[1];wc=Ia[2];Cb=Ia[3];if(tc!==Ba[0]||xb!==Ba[1]||wc!==Ba[2]||Cb!==Ba[3])ga.stencilOpSeparate(tc,xb,wc,Cb),Ba[0]=tc,Ba[1]=xb,Ba[2]=wc,Ba[3]=Cb;Jc=aa[0];lc=aa[1];Hc=aa[2];Wc=aa[3];if(Jc!==ua[0]||lc!==ua[1]||Hc!==ua[2]||Wc!==ua[3])ga.stencilOpSeparate(Jc,lc,Hc,Wc),ua[0]=Jc,ua[1]=lc,ua[2]=Hc,ua[3]=Wc}ga.blendColor(0,0,0,0);eb[0]=0;eb[1]=
0;eb[2]=0;eb[3]=0;ga.enable(3042);S.blend_enable=!0;ga.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ga.blendFuncSeparate(770,771,773,1);R[0]=770;R[1]=771;R[2]=773;R[3]=1;ga.disable(2929);S.depth_enable=!1;ga.enable(3089);S.scissor_enable=!0;if(k=S.profile)h=performance.now(),K.count+=e;ga.useProgram(z.program);p=Ca.angle_instanced_arrays;var Vc,Dc,dc,Ic,oc,pc,mc,ec;Ma.setVAO(null);Vc=na.location;Dc=q[Vc];Dc.buffer||ga.enableVertexAttribArray(Vc);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==
W||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)ga.bindBuffer(34962,W.buffer),ga.vertexAttribPointer(Vc,2,5126,!1,24,0),Dc.type=5126,Dc.size=2,Dc.buffer=W,Dc.normalized=!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(p.vertexAttribDivisorANGLE(Vc,0),Dc.divisor=0);dc=Y.location;Ic=q[dc];Ic.buffer||ga.enableVertexAttribArray(dc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==u||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)ga.bindBuffer(34962,u.buffer),ga.vertexAttribPointer(dc,2,5126,!1,24,8),Ic.type=
5126,Ic.size=2,Ic.buffer=u,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(p.vertexAttribDivisorANGLE(dc,0),Ic.divisor=0);oc=a.location;pc=q[oc];pc.buffer||ga.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==A||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)ga.bindBuffer(34962,A.buffer),ga.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=A,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(p.vertexAttribDivisorANGLE(oc,0),pc.divisor=
0);(mc=ma.elements)?ga.bindBuffer(34963,mc.buffer.buffer):Ma.currentVAO&&(mc=ra.getElements(Ma.currentVAO.elements))&&ga.bindBuffer(34963,mc.buffer.buffer);ec=ma.offset;for(F=0;F<e;++F){m=b[F];var $a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,ia,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,
hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc;$a=m.viewport;Fc=$a.x|0;yb=$a.y|0;cb="width"in $a?$a.width|0:da.framebufferWidth-Fc;Nb="height"in $a?$a.height|0:da.framebufferHeight-yb;ab=da.viewportWidth;da.viewportWidth=cb;ob=da.viewportHeight;da.viewportHeight=Nb;ga.viewport(Fc,yb,cb,Nb);ea[0]=Fc;ea[1]=yb;ea[2]=cb;ea[3]=Nb;Va=m.viewport;vd=Va.x|0;Ib=Va.y|0;Jb="width"in Va?Va.width|0:da.framebufferWidth-vd;qc="height"in Va?Va.height|0:da.framebufferHeight-Ib;ga.scissor(vd,Ib,Jb,qc);ya[0]=vd;ya[1]=Ib;
ya[2]=Jb;ya[3]=qc;Ob=ca.call(this,da,m,F);ac.offset=Ob;jb=!1;Gb=null;Db=0;wb=!1;Yb=hb=0;Pb=1;qb=0;Sa=5126;ib=ic=zb=Ub=0;Da(ac)?(jb=!0,Gb=J.createStream(34962,ac),Sa=Gb.dtype):(Gb=J.getBuffer(ac))?Sa=Gb.dtype:"constant"in ac?(Pb=2,"number"===typeof ac.constant?(zb=ac.constant,ic=ib=Ub=0):(zb=0<ac.constant.length?ac.constant[0]:0,ic=1<ac.constant.length?ac.constant[1]:0,ib=2<ac.constant.length?ac.constant[2]:0,Ub=3<ac.constant.length?ac.constant[3]:0)):(Gb=Da(ac.buffer)?J.createStream(34962,ac.buffer):
J.getBuffer(ac.buffer),Sa="type"in ac?zd[ac.type]:Gb.dtype,wb=!!ac.normalized,Yb=ac.size|0,hb=ac.offset|0,qb=ac.stride|0,Db=ac.divisor|0);pb=T.location;Ha=q[pb];if(1===Pb){Ha.buffer||ga.enableVertexAttribArray(pb);rb=Yb||2;if(Ha.type!==Sa||Ha.size!==rb||Ha.buffer!==Gb||Ha.normalized!==wb||Ha.offset!==hb||Ha.stride!==qb)ga.bindBuffer(34962,Gb.buffer),ga.vertexAttribPointer(pb,rb,Sa,wb,qb,hb),Ha.type=Sa,Ha.size=rb,Ha.buffer=Gb,Ha.normalized=wb,Ha.offset=hb,Ha.stride=qb;Ha.divisor!==Db&&(p.vertexAttribDivisorANGLE(pb,
Db),Ha.divisor=Db)}else if(Ha.buffer&&(ga.disableVertexAttribArray(pb),Ha.buffer=null),Ha.x!==zb||Ha.y!==ic||Ha.z!==ib||Ha.w!==Ub)ga.vertexAttrib4f(pb,zb,ic,ib,Ub),Ha.x=zb,Ha.y=ic,Ha.z=ib,Ha.w=Ub;Ka=E.call(this,da,m,F);Sb.offset=Ka;fb=!1;gb=null;La=0;kb=!1;tb=Wa=0;sb=1;Pa=0;Bc=5126;Na=Eb=Kb=Ra=0;Da(Sb)?(fb=!0,gb=J.createStream(34962,Sb),Bc=gb.dtype):(gb=J.getBuffer(Sb))?Bc=gb.dtype:"constant"in Sb?(sb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Na=Ra=0):(Kb=0<Sb.constant.length?Sb.constant[0]:
0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Na=2<Sb.constant.length?Sb.constant[2]:0,Ra=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Da(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),Bc="type"in Sb?zd[Sb.type]:gb.dtype,kb=!!Sb.normalized,tb=Sb.size|0,Wa=Sb.offset|0,Pa=Sb.stride|0,La=Sb.divisor|0);yd=x.location;Ya=q[yd];if(1===sb){Ya.buffer||ga.enableVertexAttribArray(yd);Lb=tb||2;if(Ya.type!==Bc||Ya.size!==Lb||Ya.buffer!==gb||Ya.normalized!==kb||Ya.offset!==Wa||Ya.stride!==Pa)ga.bindBuffer(34962,
gb.buffer),ga.vertexAttribPointer(yd,Lb,Bc,kb,Pa,Wa),Ya.type=Bc,Ya.size=Lb,Ya.buffer=gb,Ya.normalized=kb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==La&&(p.vertexAttribDivisorANGLE(yd,La),Ya.divisor=La)}else if(Ya.buffer&&(ga.disableVertexAttribArray(yd),Ya.buffer=null),Ya.x!==Kb||Ya.y!==Eb||Ya.z!==Na||Ya.w!==Ra)ga.vertexAttrib4f(yd,Kb,Eb,Na,Ra),Ya.x=Kb,Ya.y=Eb,Ya.z=Na,Ya.w=Ra;Mb=D.call(this,da,m,F);Ga.offset=Mb;lb=!1;Oa=null;Zb=0;Qa=!1;vb=ub=0;Ta=1;nb=0;fc=5126;jc=bb=uc=zc=0;Da(Ga)?(lb=!0,Oa=J.createStream(34962,
Ga),fc=Oa.dtype):(Oa=J.getBuffer(Ga))?fc=Oa.dtype:"constant"in Ga?(Ta=2,"number"===typeof Ga.constant?(uc=Ga.constant,bb=jc=zc=0):(uc=0<Ga.constant.length?Ga.constant[0]:0,bb=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,zc=3<Ga.constant.length?Ga.constant[3]:0)):(Oa=Da(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),fc="type"in Ga?zd[Ga.type]:Oa.dtype,Qa=!!Ga.normalized,vb=Ga.size|0,ub=Ga.offset|0,nb=Ga.stride|0,Zb=Ga.divisor|0);gd=Cc.location;Xa=
q[gd];if(1===Ta){Xa.buffer||ga.enableVertexAttribArray(gd);Mc=vb||4;if(Xa.type!==fc||Xa.size!==Mc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==ub||Xa.stride!==nb)ga.bindBuffer(34962,Oa.buffer),ga.vertexAttribPointer(gd,Mc,fc,Qa,nb,ub),Xa.type=fc,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=ub,Xa.stride=nb;Xa.divisor!==Zb&&(p.vertexAttribDivisorANGLE(gd,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(ga.disableVertexAttribArray(gd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)ga.vertexAttrib4f(gd,
uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;Ab=c.call(this,da,m,F);$b.offset=Ab;Za=!1;Vb=null;sc=0;Wb=!1;Kc=Qb=0;Rb=1;Qd=0;Ec=5126;od=ed=Nc=ia=0;Da($b)?(Za=!0,Vb=J.createStream(34962,$b),Ec=Vb.dtype):(Vb=J.getBuffer($b))?Ec=Vb.dtype:"constant"in $b?(Rb=2,"number"===typeof $b.constant?(Nc=$b.constant,ed=od=ia=0):(Nc=0<$b.constant.length?$b.constant[0]:0,ed=1<$b.constant.length?$b.constant[1]:0,od=2<$b.constant.length?$b.constant[2]:0,ia=3<$b.constant.length?$b.constant[3]:0)):(Vb=Da($b.buffer)?J.createStream(34962,
$b.buffer):J.getBuffer($b.buffer),Ec="type"in $b?zd[$b.type]:Vb.dtype,Wb=!!$b.normalized,Kc=$b.size|0,Qb=$b.offset|0,Qd=$b.stride|0,sc=$b.divisor|0);nc=y.location;vc=q[nc];if(1===Rb){vc.buffer||ga.enableVertexAttribArray(nc);gc=Kc||4;if(vc.type!==Ec||vc.size!==gc||vc.buffer!==Vb||vc.normalized!==Wb||vc.offset!==Qb||vc.stride!==Qd)ga.bindBuffer(34962,Vb.buffer),ga.vertexAttribPointer(nc,gc,Ec,Wb,Qd,Qb),vc.type=Ec,vc.size=gc,vc.buffer=Vb,vc.normalized=Wb,vc.offset=Qb,vc.stride=Qd;vc.divisor!==sc&&(p.vertexAttribDivisorANGLE(nc,
sc),vc.divisor=sc)}else if(vc.buffer&&(ga.disableVertexAttribArray(nc),vc.buffer=null),vc.x!==Nc||vc.y!==ed||vc.z!==od||vc.w!==ia)ga.vertexAttrib4f(nc,Nc,ed,od,ia),vc.x=Nc,vc.y=ed,vc.z=od,vc.w=ia;db=t.call(this,da,m,F);rc=db[0];Xb=db[1];hc=db[2];Ac=db[3];F&&Tb===rc&&cc===Xb&&xc===hc&&ad===Ac||(Tb=rc,cc=Xb,xc=hc,ad=Ac,ga.uniform4f(oa.location,rc,Xb,hc,Ac));Qc=m.lineWidth;F&&Rc===Qc||(Rc=Qc,ga.uniform1f(fa.location,Qc));Sc=m.capSize;F&&Xc===Sc||(Xc=Sc,ga.uniform1f(xa.location,Sc));wd=m.scale;bd=wd[0];
kc=wd[1];F&&Yc===bd&&bc===kc||(Yc=bd,bc=kc,ga.uniform2f(l.location,bd,kc));Zc=m.scaleFract;Uc=Zc[0];yc=Zc[1];F&&cd===Uc&&hd===yc||(cd=Uc,hd=yc,ga.uniform2f(N.location,Uc,yc));pd=m.translate;ye=pd[0];id=pd[1];F&&Ne===ye&&Fa===id||(Ne=ye,Fa=id,ga.uniform2f(Q.location,ye,id));Nd=m.translateFract;Xd=Nd[0];Od=Nd[1];F&&de===Xd&&Kd===Od||(de=Xd,Kd=Od,ga.uniform2f(za.location,Xd,Od));Id=m.opacity;F&&md===Id||(md=Id,ga.uniform1f(P.location,Id));Tc=m.count;0<Tc?mc?p.drawElementsInstancedANGLE(4,36,mc.type,
ec<<(mc.type-5121>>1),Tc):p.drawArraysInstancedANGLE(4,ec,36,Tc):0>Tc&&(mc?ga.drawElements(4,36,mc.type,ec<<(mc.type-5121>>1)):ga.drawArrays(4,ec,36));da.viewportWidth=ab;da.viewportHeight=ob;jb&&J.destroyStream(Gb);fb&&J.destroyStream(gb);lb&&J.destroyStream(Oa);Za&&J.destroyStream(Vb)}S.dirty=!0;Ma.setVAO(null);k&&(K.cpuTime+=performance.now()-h)},draw:function(c){var e,f,k,h,p,F,t,g,n,d,C,z,r,pa,E,D,M,O,I,V,U,Ua,ba,Aa,Z,qa,ja,ca,mb,X,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,
yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb;e=wa.next;e!==wa.cur&&(e?ga.bindFramebuffer(36160,e.framebuffer):ga.bindFramebuffer(36160,null),wa.cur=e);if(S.dirty){var Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,ia,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb;Qa=ka.dither;Qa!==S.dither&&(Qa?ga.enable(3024):ga.disable(3024),S.dither=Qa);ub=ka.depth_func;ub!==S.depth_func&&(ga.depthFunc(ub),S.depth_func=
ub);vb=td[0];Ta=td[1];if(vb!==Hb[0]||Ta!==Hb[1])ga.depthRange(vb,Ta),Hb[0]=vb,Hb[1]=Ta;nb=ka.depth_mask;nb!==S.depth_mask&&(ga.depthMask(nb),S.depth_mask=nb);fc=ta[0];zc=ta[1];uc=ta[2];bb=ta[3];if(fc!==va[0]||zc!==va[1]||uc!==va[2]||bb!==va[3])ga.colorMask(fc,zc,uc,bb),va[0]=fc,va[1]=zc,va[2]=uc,va[3]=bb;jc=ka.cull_enable;jc!==S.cull_enable&&(jc?ga.enable(2884):ga.disable(2884),S.cull_enable=jc);gd=ka.cull_face;gd!==S.cull_face&&(ga.cullFace(gd),S.cull_face=gd);Xa=ka.frontFace;Xa!==S.frontFace&&(ga.frontFace(Xa),
S.frontFace=Xa);Mc=ka.lineWidth;Mc!==S.lineWidth&&(ga.lineWidth(Mc),S.lineWidth=Mc);Ab=ka.polygonOffset_enable;Ab!==S.polygonOffset_enable&&(Ab?ga.enable(32823):ga.disable(32823),S.polygonOffset_enable=Ab);Za=ha[0];Vb=ha[1];if(Za!==H[0]||Vb!==H[1])ga.polygonOffset(Za,Vb),H[0]=Za,H[1]=Vb;sc=ka.sample_alpha;sc!==S.sample_alpha&&(sc?ga.enable(32926):ga.disable(32926),S.sample_alpha=sc);Wb=ka.sample_enable;Wb!==S.sample_enable&&(Wb?ga.enable(32928):ga.disable(32928),S.sample_enable=Wb);Qb=sa[0];Kc=sa[1];
if(Qb!==Ea[0]||Kc!==Ea[1])ga.sampleCoverage(Qb,Kc),Ea[0]=Qb,Ea[1]=Kc;Rb=ka.stencil_enable;Rb!==S.stencil_enable&&(Rb?ga.enable(2960):ga.disable(2960),S.stencil_enable=Rb);ia=ka.stencil_mask;ia!==S.stencil_mask&&(ga.stencilMask(ia),S.stencil_mask=ia);Ec=Ja[0];Ed=Ja[1];Nc=Ja[2];if(Ec!==la[0]||Ed!==la[1]||Nc!==la[2])ga.stencilFunc(Ec,Ed,Nc),la[0]=Ec,la[1]=Ed,la[2]=Nc;ed=Ia[0];od=Ia[1];nc=Ia[2];vc=Ia[3];if(ed!==Ba[0]||od!==Ba[1]||nc!==Ba[2]||vc!==Ba[3])ga.stencilOpSeparate(ed,od,nc,vc),Ba[0]=ed,Ba[1]=
od,Ba[2]=nc,Ba[3]=vc;gc=aa[0];db=aa[1];rc=aa[2];Tb=aa[3];if(gc!==ua[0]||db!==ua[1]||rc!==ua[2]||Tb!==ua[3])ga.stencilOpSeparate(gc,db,rc,Tb),ua[0]=gc,ua[1]=db,ua[2]=rc,ua[3]=Tb}f=c.viewport;k=f.x|0;h=f.y|0;p="width"in f?f.width|0:da.framebufferWidth-k;F="height"in f?f.height|0:da.framebufferHeight-h;t=da.viewportWidth;da.viewportWidth=p;g=da.viewportHeight;da.viewportHeight=F;ga.viewport(k,h,p,F);ea[0]=k;ea[1]=h;ea[2]=p;ea[3]=F;ga.blendColor(0,0,0,0);eb[0]=0;eb[1]=0;eb[2]=0;eb[3]=0;ga.enable(3042);
S.blend_enable=!0;ga.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ga.blendFuncSeparate(770,771,773,1);R[0]=770;R[1]=771;R[2]=773;R[3]=1;ga.disable(2929);S.depth_enable=!1;n=c.viewport;d=n.x|0;C=n.y|0;z="width"in n?n.width|0:da.framebufferWidth-d;r="height"in n?n.height|0:da.framebufferHeight-C;ga.scissor(d,C,z,r);ya[0]=d;ya[1]=C;ya[2]=z;ya[3]=r;ga.enable(3089);S.scissor_enable=!0;if(pa=S.profile)E=performance.now(),K.count++;ga.useProgram(m.program);D=Ca.angle_instanced_arrays;Ma.setVAO(null);
M=b.call(this,da,c,0);ac.offset=M;O=!1;I=null;V=0;U=!1;ba=Ua=0;Aa=1;Z=0;qa=5126;X=mb=ca=ja=0;Da(ac)?(O=!0,I=J.createStream(34962,ac),qa=I.dtype):(I=J.getBuffer(ac))?qa=I.dtype:"constant"in ac?(Aa=2,"number"===typeof ac.constant?(ca=ac.constant,mb=X=ja=0):(ca=0<ac.constant.length?ac.constant[0]:0,mb=1<ac.constant.length?ac.constant[1]:0,X=2<ac.constant.length?ac.constant[2]:0,ja=3<ac.constant.length?ac.constant[3]:0)):(I=Da(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),qa="type"in
ac?zd[ac.type]:I.dtype,U=!!ac.normalized,ba=ac.size|0,Ua=ac.offset|0,Z=ac.stride|0,V=ac.divisor|0);Bb=T.location;Fb=q[Bb];if(1===Aa){Fb.buffer||ga.enableVertexAttribArray(Bb);tc=ba||2;if(Fb.type!==qa||Fb.size!==tc||Fb.buffer!==I||Fb.normalized!==U||Fb.offset!==Ua||Fb.stride!==Z)ga.bindBuffer(34962,I.buffer),ga.vertexAttribPointer(Bb,tc,qa,U,Z,Ua),Fb.type=qa,Fb.size=tc,Fb.buffer=I,Fb.normalized=U,Fb.offset=Ua,Fb.stride=Z;Fb.divisor!==V&&(D.vertexAttribDivisorANGLE(Bb,V),Fb.divisor=V)}else if(Fb.buffer&&
(ga.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==ca||Fb.y!==mb||Fb.z!==X||Fb.w!==ja)ga.vertexAttrib4f(Bb,ca,mb,X,ja),Fb.x=ca,Fb.y=mb,Fb.z=X,Fb.w=ja;xb=G.call(this,da,c,0);Sb.offset=xb;wc=!1;Cb=null;Jc=0;lc=!1;Wc=Hc=0;Vc=1;Dc=0;dc=5126;mc=pc=oc=Ic=0;Da(Sb)?(wc=!0,Cb=J.createStream(34962,Sb),dc=Cb.dtype):(Cb=J.getBuffer(Sb))?dc=Cb.dtype:"constant"in Sb?(Vc=2,"number"===typeof Sb.constant?(oc=Sb.constant,pc=mc=Ic=0):(oc=0<Sb.constant.length?Sb.constant[0]:0,pc=1<Sb.constant.length?Sb.constant[1]:
0,mc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Da(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),dc="type"in Sb?zd[Sb.type]:Cb.dtype,lc=!!Sb.normalized,Wc=Sb.size|0,Hc=Sb.offset|0,Dc=Sb.stride|0,Jc=Sb.divisor|0);ec=x.location;$a=q[ec];if(1===Vc){$a.buffer||ga.enableVertexAttribArray(ec);Fc=Wc||2;if($a.type!==dc||$a.size!==Fc||$a.buffer!==Cb||$a.normalized!==lc||$a.offset!==Hc||$a.stride!==Dc)ga.bindBuffer(34962,Cb.buffer),ga.vertexAttribPointer(ec,
Fc,dc,lc,Dc,Hc),$a.type=dc,$a.size=Fc,$a.buffer=Cb,$a.normalized=lc,$a.offset=Hc,$a.stride=Dc;$a.divisor!==Jc&&(D.vertexAttribDivisorANGLE(ec,Jc),$a.divisor=Jc)}else if($a.buffer&&(ga.disableVertexAttribArray(ec),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Ic)ga.vertexAttrib4f(ec,oc,pc,mc,Ic),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Ic;yb=B.call(this,da,c,0);Ga.offset=yb;cb=!1;Nb=null;ab=0;ob=!1;vd=Va=0;Ib=1;Jb=0;qc=5126;Db=Gb=jb=Ob=0;Da(Ga)?(cb=!0,Nb=J.createStream(34962,Ga),qc=Nb.dtype):(Nb=J.getBuffer(Ga))?
qc=Nb.dtype:"constant"in Ga?(Ib=2,"number"===typeof Ga.constant?(jb=Ga.constant,Gb=Db=Ob=0):(jb=0<Ga.constant.length?Ga.constant[0]:0,Gb=1<Ga.constant.length?Ga.constant[1]:0,Db=2<Ga.constant.length?Ga.constant[2]:0,Ob=3<Ga.constant.length?Ga.constant[3]:0)):(Nb=Da(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),qc="type"in Ga?zd[Ga.type]:Nb.dtype,ob=!!Ga.normalized,vd=Ga.size|0,Va=Ga.offset|0,Jb=Ga.stride|0,ab=Ga.divisor|0);wb=Cc.location;hb=q[wb];if(1===Ib){hb.buffer||ga.enableVertexAttribArray(wb);
Yb=vd||4;if(hb.type!==qc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Va||hb.stride!==Jb)ga.bindBuffer(34962,Nb.buffer),ga.vertexAttribPointer(wb,Yb,qc,ob,Jb,Va),hb.type=qc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Va,hb.stride=Jb;hb.divisor!==ab&&(D.vertexAttribDivisorANGLE(wb,ab),hb.divisor=ab)}else if(hb.buffer&&(ga.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)ga.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;
Pb=L.call(this,da,c,0);$b.offset=Pb;qb=!1;Sa=null;Ub=0;zb=!1;ib=ic=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;Da($b)?(qb=!0,Sa=J.createStream(34962,$b),rb=Sa.dtype):(Sa=J.getBuffer($b))?rb=Sa.dtype:"constant"in $b?(pb=2,"number"===typeof $b.constant?(fb=$b.constant,gb=La=Ka=0):(fb=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,La=2<$b.constant.length?$b.constant[2]:0,Ka=3<$b.constant.length?$b.constant[3]:0)):(Sa=Da($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),
rb="type"in $b?zd[$b.type]:Sa.dtype,zb=!!$b.normalized,ib=$b.size|0,ic=$b.offset|0,Ha=$b.stride|0,Ub=$b.divisor|0);kb=y.location;Wa=q[kb];if(1===pb){Wa.buffer||ga.enableVertexAttribArray(kb);tb=ib||4;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Sa||Wa.normalized!==zb||Wa.offset!==ic||Wa.stride!==Ha)ga.bindBuffer(34962,Sa.buffer),ga.vertexAttribPointer(kb,tb,rb,zb,Ha,ic),Wa.type=rb,Wa.size=tb,Wa.buffer=Sa,Wa.normalized=zb,Wa.offset=ic,Wa.stride=Ha;Wa.divisor!==Ub&&(D.vertexAttribDivisorANGLE(kb,Ub),
Wa.divisor=Ub)}else if(Wa.buffer&&(ga.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==fb||Wa.y!==gb||Wa.z!==La||Wa.w!==Ka)ga.vertexAttrib4f(kb,fb,gb,La,Ka),Wa.x=fb,Wa.y=gb,Wa.z=La,Wa.w=Ka;sb=na.location;Pa=q[sb];Pa.buffer||ga.enableVertexAttribArray(sb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==W||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ga.bindBuffer(34962,W.buffer),ga.vertexAttribPointer(sb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=W,Pa.normalized=!1,Pa.offset=0,Pa.stride=
24;0!==Pa.divisor&&(D.vertexAttribDivisorANGLE(sb,0),Pa.divisor=0);Bc=Y.location;Ra=q[Bc];Ra.buffer||ga.enableVertexAttribArray(Bc);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==u||!1!==Ra.normalized||8!==Ra.offset||24!==Ra.stride)ga.bindBuffer(34962,u.buffer),ga.vertexAttribPointer(Bc,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=u,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(D.vertexAttribDivisorANGLE(Bc,0),Ra.divisor=0);Kb=a.location;Eb=q[Kb];Eb.buffer||ga.enableVertexAttribArray(Kb);
if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==A||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)ga.bindBuffer(34962,A.buffer),ga.vertexAttribPointer(Kb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,Eb.buffer=A,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(D.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Na=w.call(this,da,c,0);ga.uniform4f(oa.location,Na[0],Na[1],Na[2],Na[3]);ga.uniform1f(fa.location,c.lineWidth);ga.uniform1f(xa.location,c.capSize);yd=c.scale;ga.uniform2f(l.location,yd[0],
yd[1]);Ya=c.scaleFract;ga.uniform2f(N.location,Ya[0],Ya[1]);Lb=c.translate;ga.uniform2f(Q.location,Lb[0],Lb[1]);Mb=c.translateFract;ga.uniform2f(za.location,Mb[0],Mb[1]);ga.uniform1f(P.location,c.opacity);(lb=ma.elements)?ga.bindBuffer(34963,lb.buffer.buffer):Ma.currentVAO&&(lb=ra.getElements(Ma.currentVAO.elements))&&ga.bindBuffer(34963,lb.buffer.buffer);Oa=ma.offset;Zb=c.count;0<Zb?lb?D.drawElementsInstancedANGLE(4,36,lb.type,Oa<<(lb.type-5121>>1),Zb):D.drawArraysInstancedANGLE(4,Oa,36,Zb):0>Zb&&
(lb?ga.drawElements(4,36,lb.type,Oa<<(lb.type-5121>>1)):ga.drawArrays(4,Oa,36));S.dirty=!0;Ma.setVAO(null);da.viewportWidth=t;da.viewportHeight=g;pa&&(K.cpuTime+=performance.now()-E);O&&J.destroyStream(I);wc&&J.destroyStream(Cb);cb&&J.destroyStream(Nb);qb&&J.destroyStream(Sa)},scope:function(a,c,b){var l,k,v,q,H,m,t,g,R,y,d,z,sa,Ma,Ea,T,x,eb,ga,ha,P,la,Q,E,D,aa,M,ta,N,ya,w,I,Ja,B,ea,za,wa,ra,G,L,Y,ua,fa,va,oa,Hb,ca,xa,na,Ca,td,Ba,Ia,Cc,X,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,
Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,ia,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md;l=a.viewport;k=l.x|0;v=l.y|0;q="width"in l?l.width|0:da.framebufferWidth-k;H="height"in l?l.height|0:da.framebufferHeight-v;m=da.viewportWidth;
da.viewportWidth=q;t=da.viewportHeight;da.viewportHeight=H;g=mb[0];mb[0]=k;R=mb[1];mb[1]=v;y=mb[2];mb[2]=q;d=mb[3];mb[3]=H;z=F[0];F[0]=0;sa=F[1];F[1]=0;Ma=F[2];F[2]=0;Ea=F[3];F[3]=0;T=ka.blend_enable;ka.blend_enable=!0;x=Ua[0];Ua[0]=32774;eb=Ua[1];Ua[1]=32774;ga=p[0];p[0]=770;ha=p[1];p[1]=771;P=p[2];p[2]=773;la=p[3];p[3]=1;Q=ka.depth_enable;ka.depth_enable=!1;E=a.viewport;D=E.x|0;aa=E.y|0;M="width"in E?E.width|0:da.framebufferWidth-D;ta="height"in E?E.height|0:da.framebufferHeight-aa;N=pa[0];pa[0]=
D;ya=pa[1];pa[1]=aa;w=pa[2];pa[2]=M;I=pa[3];pa[3]=ta;Ja=ka.scissor_enable;ka.scissor_enable=!0;if(B=S.profile)ea=performance.now(),K.count++;za=ma.count;ma.count=36;wa=a.count;ra=ma.instances;ma.instances=wa;G=ma.primitive;ma.primitive=4;L=a.capSize;Y=Aa[5];Aa[5]=L;ua=a.lineWidth;fa=Aa[4];Aa[4]=ua;va=a.opacity;oa=Aa[10];Aa[10]=va;Hb=a.range;ca=Aa[18];Aa[18]=Hb;xa=a.scale;na=Aa[6];Aa[6]=xa;Ca=a.scaleFract;td=Aa[7];Aa[7]=Ca;Ba=a.translate;Ia=Aa[8];Aa[8]=Ba;Cc=a.translateFract;X=Aa[9];Aa[9]=Cc;Ib=Z.call(this,
da,a,b);Jb=Aa[3];Aa[3]=Ib;qc=r.buffer;r.buffer=A;Ob=r.divisor;r.divisor=0;jb=r.normalized;r.normalized=!1;Gb=r.offset;r.offset=16;Db=r.size;r.size=0;wb=r.state;r.state=1;hb=r.stride;r.stride=24;Yb=r.type;r.type=5126;Pb=r.w;r.w=0;qb=r.x;r.x=0;Sa=r.y;r.y=0;Ub=r.z;r.z=0;zb=U.call(this,da,a,b);$b.offset=zb;ic=!1;ib=null;pb=0;Ha=!1;Ka=rb=0;fb=1;gb=0;La=5126;sb=tb=Wa=kb=0;Da($b)?(ic=!0,ib=J.createStream(34962,$b),La=ib.dtype):(ib=J.getBuffer($b))?La=ib.dtype:"constant"in $b?(fb=2,"number"===typeof $b.constant?
(Wa=$b.constant,tb=sb=kb=0):(Wa=0<$b.constant.length?$b.constant[0]:0,tb=1<$b.constant.length?$b.constant[1]:0,sb=2<$b.constant.length?$b.constant[2]:0,kb=3<$b.constant.length?$b.constant[3]:0)):(ib=Da($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),La="type"in $b?zd[$b.type]:ib.dtype,Ha=!!$b.normalized,Ka=$b.size|0,rb=$b.offset|0,gb=$b.stride|0,pb=$b.divisor|0);Pa=n.buffer;n.buffer=ib;Bc=n.divisor;n.divisor=pb;Ra=n.normalized;n.normalized=Ha;Kb=n.offset;n.offset=rb;Eb=n.size;n.size=
Ka;Na=n.state;n.state=fb;yd=n.stride;n.stride=gb;Ya=n.type;n.type=La;Lb=n.w;n.w=kb;Mb=n.x;n.x=Wa;lb=n.y;n.y=tb;Oa=n.z;n.z=sb;Zb=O.buffer;O.buffer=W;Qa=O.divisor;O.divisor=0;ub=O.normalized;O.normalized=!1;vb=O.offset;O.offset=0;Ta=O.size;O.size=0;nb=O.state;O.state=1;fc=O.stride;O.stride=24;zc=O.type;O.type=5126;uc=O.w;O.w=0;bb=O.x;O.x=0;jc=O.y;O.y=0;ia=O.z;O.z=0;Xa=ja.call(this,da,a,b);Ga.offset=Xa;Mc=!1;Ab=null;Za=0;Vb=!1;Wb=sc=0;Qb=1;Kc=0;Rb=5126;Nc=Ed=Ec=Qd=0;Da(Ga)?(Mc=!0,Ab=J.createStream(34962,
Ga),Rb=Ab.dtype):(Ab=J.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Ec=Ga.constant,Ed=Nc=Qd=0):(Ec=0<Ga.constant.length?Ga.constant[0]:0,Ed=1<Ga.constant.length?Ga.constant[1]:0,Nc=2<Ga.constant.length?Ga.constant[2]:0,Qd=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Da(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Rb="type"in Ga?zd[Ga.type]:Ab.dtype,Vb=!!Ga.normalized,Wb=Ga.size|0,sc=Ga.offset|0,Kc=Ga.stride|0,Za=Ga.divisor|0);ed=e.buffer;e.buffer=
Ab;od=e.divisor;e.divisor=Za;nc=e.normalized;e.normalized=Vb;vc=e.offset;e.offset=sc;gc=e.size;e.size=Wb;db=e.state;e.state=Qb;rc=e.stride;e.stride=Kc;Tb=e.type;e.type=Rb;Xb=e.w;e.w=Qd;cc=e.x;e.x=Ec;hc=e.y;e.y=Ed;xc=e.z;e.z=Nc;Ac=C.buffer;C.buffer=u;ad=C.divisor;C.divisor=0;Qc=C.normalized;C.normalized=!1;Rc=C.offset;C.offset=8;Sc=C.size;C.size=0;Xc=C.state;C.state=1;wd=C.stride;C.stride=24;bd=C.type;C.type=5126;Yc=C.w;C.w=0;kc=C.x;C.x=0;bc=C.y;C.y=0;Zc=C.z;C.z=0;Uc=V.call(this,da,a,b);ac.offset=
Uc;cd=!1;yc=null;hd=0;pd=!1;Ne=ye=0;id=1;Fa=0;Nd=5126;Kd=Od=de=Xd=0;Da(ac)?(cd=!0,yc=J.createStream(34962,ac),Nd=yc.dtype):(yc=J.getBuffer(ac))?Nd=yc.dtype:"constant"in ac?(id=2,"number"===typeof ac.constant?(de=ac.constant,Od=Kd=Xd=0):(de=0<ac.constant.length?ac.constant[0]:0,Od=1<ac.constant.length?ac.constant[1]:0,Kd=2<ac.constant.length?ac.constant[2]:0,Xd=3<ac.constant.length?ac.constant[3]:0)):(yc=Da(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Nd="type"in ac?zd[ac.type]:
yc.dtype,pd=!!ac.normalized,Ne=ac.size|0,ye=ac.offset|0,Fa=ac.stride|0,hd=ac.divisor|0);Id=f.buffer;f.buffer=yc;md=f.divisor;f.divisor=hd;Tc=f.normalized;f.normalized=pd;ud=f.offset;f.offset=ye;sd=f.size;f.size=Ne;jd=f.state;f.state=id;xd=f.stride;f.stride=Fa;Cd=f.type;f.type=Nd;Fd=f.w;f.w=Xd;oe=f.x;f.x=de;qe=f.y;f.y=Od;ue=f.z;f.z=Kd;je=ba.call(this,da,a,b);Sb.offset=je;ie=!1;he=null;ve=0;ee=!1;Oc=le=0;fd=1;we=0;pe=5126;Sd=Rd=Pd=Ld=0;Da(Sb)?(ie=!0,he=J.createStream(34962,Sb),pe=he.dtype):(he=J.getBuffer(Sb))?
pe=he.dtype:"constant"in Sb?(fd=2,"number"===typeof Sb.constant?(Pd=Sb.constant,Rd=Sd=Ld=0):(Pd=0<Sb.constant.length?Sb.constant[0]:0,Rd=1<Sb.constant.length?Sb.constant[1]:0,Sd=2<Sb.constant.length?Sb.constant[2]:0,Ld=3<Sb.constant.length?Sb.constant[3]:0)):(he=Da(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),pe="type"in Sb?zd[Sb.type]:he.dtype,ee=!!Sb.normalized,Oc=Sb.size|0,le=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);me=h.buffer;h.buffer=he;He=h.divisor;h.divisor=ve;Be=h.normalized;
h.normalized=ee;re=h.offset;h.offset=le;Se=h.size;h.size=Oc;Te=h.state;h.state=fd;Oe=h.stride;h.stride=we;xe=h.type;h.type=pe;Fe=h.w;h.w=Ld;Ie=h.x;h.x=Pd;Je=h.y;h.y=Rd;Ke=h.z;h.z=Sd;Ge=qa.vert;qa.vert=2;Md=qa.frag;qa.frag=1;S.dirty=!0;c(da,a,b);da.viewportWidth=m;da.viewportHeight=t;mb[0]=g;mb[1]=R;mb[2]=y;mb[3]=d;F[0]=z;F[1]=sa;F[2]=Ma;F[3]=Ea;ka.blend_enable=T;Ua[0]=x;Ua[1]=eb;p[0]=ga;p[1]=ha;p[2]=P;p[3]=la;ka.depth_enable=Q;pa[0]=N;pa[1]=ya;pa[2]=w;pa[3]=I;ka.scissor_enable=Ja;B&&(K.cpuTime+=performance.now()-
ea);ma.count=za;ma.instances=ra;ma.primitive=G;Aa[5]=Y;Aa[4]=fa;Aa[10]=oa;Aa[18]=ca;Aa[6]=na;Aa[7]=td;Aa[8]=Ia;Aa[9]=X;Aa[3]=Jb;r.buffer=qc;r.divisor=Ob;r.normalized=jb;r.offset=Gb;r.size=Db;r.state=wb;r.stride=hb;r.type=Yb;r.w=Pb;r.x=qb;r.y=Sa;r.z=Ub;ic&&J.destroyStream(ib);n.buffer=Pa;n.divisor=Bc;n.normalized=Ra;n.offset=Kb;n.size=Eb;n.state=Na;n.stride=yd;n.type=Ya;n.w=Lb;n.x=Mb;n.y=lb;n.z=Oa;O.buffer=Zb;O.divisor=Qa;O.normalized=ub;O.offset=vb;O.size=Ta;O.state=nb;O.stride=fc;O.type=zc;O.w=uc;
O.x=bb;O.y=jc;O.z=ia;Mc&&J.destroyStream(Ab);e.buffer=ed;e.divisor=od;e.normalized=nc;e.offset=vc;e.size=gc;e.state=db;e.stride=rc;e.type=Tb;e.w=Xb;e.x=cc;e.y=hc;e.z=xc;C.buffer=Ac;C.divisor=ad;C.normalized=Qc;C.offset=Rc;C.size=Sc;C.state=Xc;C.stride=wd;C.type=bd;C.w=Yc;C.x=kc;C.y=bc;C.z=Zc;cd&&J.destroyStream(yc);f.buffer=Id;f.divisor=md;f.normalized=Tc;f.offset=ud;f.size=sd;f.state=jd;f.stride=xd;f.type=Cd;f.w=Fd;f.x=oe;f.y=qe;f.z=ue;ie&&J.destroyStream(he);h.buffer=me;h.divisor=He;h.normalized=
Be;h.offset=re;h.size=Se;h.state=Te;h.stride=Oe;h.type=xe;h.w=Fe;h.x=Ie;h.y=Je;h.z=Ke;qa.vert=Ge;qa.frag=Md;S.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na){var Cc,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,td,Hb,ha,H,sa,Ea,pa,ya,Ja,la,aa;Cc=d.attributes;
Y=d.buffer;fa=d.context;P=d.current;T=d.draw;x=d.elements;l=d.extensions;N=d.framebuffer;Q=d.gl;za=d.isBufferArgs;oa=d.next;q=d.shader;J=d.uniforms;da=d.vao;S=oa.blend_color;ma=P.blend_color;ra=oa.blend_equation;Ca=P.blend_equation;wa=oa.blend_func;ga=P.blend_func;Da=oa.colorMask;ka=P.colorMask;qa=oa.depth_range;Aa=P.depth_range;Ma=oa.polygonOffset_offset;F=P.polygonOffset_offset;eb=oa.sample_coverage;Ua=P.sample_coverage;v=oa.scissor_box;p=P.scissor_box;R=oa.stencil_func;ta=P.stencil_func;va=oa.stencil_opBack;
td=P.stencil_opBack;Hb=oa.stencil_opFront;ha=P.stencil_opFront;H=oa.viewport;sa=P.viewport;Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};pa={divisor:1,offset:8,stride:8};ya={divisor:1,offset:8,stride:8};Ja={divisor:1,offset:16,stride:8};la={divisor:1,offset:16,stride:8};aa={divisor:1,offset:0,stride:4};return{batch:function(b,v){var q,H,m,d,J,r;q=N.next;q!==N.cur&&(q?Q.bindFramebuffer(36160,q.framebuffer):Q.bindFramebuffer(36160,null),N.cur=q);if(P.dirty){var S,
M,u,A,w,I,B,wa,ra,G,L,W,Z,X,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc;S=oa.dither;S!==P.dither&&(S?Q.enable(3024):Q.disable(3024),P.dither=S);M=oa.depth_func;M!==P.depth_func&&(Q.depthFunc(M),P.depth_func=M);u=qa[0];A=qa[1];if(u!==Aa[0]||A!==Aa[1])Q.depthRange(u,A),Aa[0]=u,Aa[1]=A;w=oa.depth_mask;w!==P.depth_mask&&(Q.depthMask(w),P.depth_mask=w);I=Da[0];B=Da[1];wa=Da[2];ra=Da[3];if(I!==ka[0]||B!==ka[1]||wa!==ka[2]||ra!==ka[3])Q.colorMask(I,B,wa,ra),ka[0]=I,ka[1]=B,ka[2]=wa,ka[3]=ra;G=
oa.cull_enable;G!==P.cull_enable&&(G?Q.enable(2884):Q.disable(2884),P.cull_enable=G);L=oa.cull_face;L!==P.cull_face&&(Q.cullFace(L),P.cull_face=L);W=oa.frontFace;W!==P.frontFace&&(Q.frontFace(W),P.frontFace=W);Z=oa.lineWidth;Z!==P.lineWidth&&(Q.lineWidth(Z),P.lineWidth=Z);X=oa.polygonOffset_enable;X!==P.polygonOffset_enable&&(X?Q.enable(32823):Q.disable(32823),P.polygonOffset_enable=X);be=Ma[0];Ce=Ma[1];if(be!==F[0]||Ce!==F[1])Q.polygonOffset(be,Ce),F[0]=be,F[1]=Ce;Ze=oa.sample_alpha;Ze!==P.sample_alpha&&
(Ze?Q.enable(32926):Q.disable(32926),P.sample_alpha=Ze);Re=oa.sample_enable;Re!==P.sample_enable&&(Re?Q.enable(32928):Q.disable(32928),P.sample_enable=Re);Hd=eb[0];Ae=eb[1];if(Hd!==Ua[0]||Ae!==Ua[1])Q.sampleCoverage(Hd,Ae),Ua[0]=Hd,Ua[1]=Ae;te=oa.stencil_mask;te!==P.stencil_mask&&(Q.stencilMask(te),P.stencil_mask=te);Zd=R[0];Bd=R[1];$d=R[2];if(Zd!==ta[0]||Bd!==ta[1]||$d!==ta[2])Q.stencilFunc(Zd,Bd,$d),ta[0]=Zd,ta[1]=Bd,ta[2]=$d;ld=Hb[0];$c=Hb[1];rd=Hb[2];Lc=Hb[3];if(ld!==ha[0]||$c!==ha[1]||rd!==ha[2]||
Lc!==ha[3])Q.stencilOpSeparate(ld,$c,rd,Lc),ha[0]=ld,ha[1]=$c,ha[2]=rd,ha[3]=Lc;nd=va[0];Gc=va[1];dd=va[2];Pc=va[3];if(nd!==td[0]||Gc!==td[1]||dd!==td[2]||Pc!==td[3])Q.stencilOpSeparate(nd,Gc,dd,Pc),td[0]=nd,td[1]=Gc,td[2]=dd,td[3]=Pc}Q.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;Q.enable(3042);P.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;Q.blendFuncSeparate(770,771,773,1);ga[0]=770;ga[1]=771;ga[2]=773;ga[3]=1;Q.enable(3089);P.scissor_enable=!0;Q.disable(2960);
P.stencil_enable=!1;if(H=P.profile)m=performance.now(),K.count+=v;Q.useProgram(U.program);d=l.angle_instanced_arrays;var kd,Bb,Fb,tc,xb;da.setVAO(null);kd=ca.location;Bb=Cc[kd];Bb.buffer||Q.enableVertexAttribArray(kd);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==g||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)Q.bindBuffer(34962,g.buffer),Q.vertexAttribPointer(kd,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=g,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(d.vertexAttribDivisorANGLE(kd,
0),Bb.divisor=0);Fb=E.location;tc=Cc[Fb];tc.buffer||Q.enableVertexAttribArray(Fb);if(5126!==tc.type||1!==tc.size||tc.buffer!==k||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)Q.bindBuffer(34962,k.buffer),Q.vertexAttribPointer(Fb,1,5126,!1,8,4),tc.type=5126,tc.size=1,tc.buffer=k,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(d.vertexAttribDivisorANGLE(Fb,0),tc.divisor=0);(xb=T.elements)?Q.bindBuffer(34963,xb.buffer.buffer):da.currentVAO&&(xb=x.getElements(da.currentVAO.elements))&&Q.bindBuffer(34963,
xb.buffer.buffer);for(J=0;J<v;++J){r=b[J];var wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,ia,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd;wc=r.viewport;Cb=wc.x|0;Jc=wc.y|0;lc="width"in wc?wc.width|
0:fa.framebufferWidth-Cb;Hc="height"in wc?wc.height|0:fa.framebufferHeight-Jc;Wc=fa.viewportWidth;fa.viewportWidth=lc;Vc=fa.viewportHeight;fa.viewportHeight=Hc;Q.viewport(Cb,Jc,lc,Hc);sa[0]=Cb;sa[1]=Jc;sa[2]=lc;sa[3]=Hc;(Dc=n.call(this,fa,r,J))?Q.enable(2929):Q.disable(2929);P.depth_enable=Dc;dc=r.viewport;Ic=dc.x|0;oc=dc.y|0;pc="width"in dc?dc.width|0:fa.framebufferWidth-Ic;mc="height"in dc?dc.height|0:fa.framebufferHeight-oc;Q.scissor(Ic,oc,pc,mc);p[0]=Ic;p[1]=oc;p[2]=pc;p[3]=mc;pa.buffer=r.positionBuffer;
ec=!1;$a=null;Fc=0;yb=!1;Nb=cb=0;ab=1;ob=0;Va=5126;qc=Jb=Ib=vd=0;za(pa)?(ec=!0,$a=Y.createStream(34962,pa),Va=$a.dtype):($a=Y.getBuffer(pa))?Va=$a.dtype:"constant"in pa?(ab=2,"number"===typeof pa.constant?(Ib=pa.constant,Jb=qc=vd=0):(Ib=0<pa.constant.length?pa.constant[0]:0,Jb=1<pa.constant.length?pa.constant[1]:0,qc=2<pa.constant.length?pa.constant[2]:0,vd=3<pa.constant.length?pa.constant[3]:0)):($a=za(pa.buffer)?Y.createStream(34962,pa.buffer):Y.getBuffer(pa.buffer),Va="type"in pa?Ea[pa.type]:$a.dtype,
yb=!!pa.normalized,Nb=pa.size|0,cb=pa.offset|0,ob=pa.stride|0,Fc=pa.divisor|0);Ob=ja.location;jb=Cc[Ob];if(1===ab){jb.buffer||Q.enableVertexAttribArray(Ob);Gb=Nb||2;if(jb.type!==Va||jb.size!==Gb||jb.buffer!==$a||jb.normalized!==yb||jb.offset!==cb||jb.stride!==ob)Q.bindBuffer(34962,$a.buffer),Q.vertexAttribPointer(Ob,Gb,Va,yb,ob,cb),jb.type=Va,jb.size=Gb,jb.buffer=$a,jb.normalized=yb,jb.offset=cb,jb.stride=ob;jb.divisor!==Fc&&(d.vertexAttribDivisorANGLE(Ob,Fc),jb.divisor=Fc)}else if(jb.buffer&&(Q.disableVertexAttribArray(Ob),
jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==qc||jb.w!==vd)Q.vertexAttrib4f(Ob,Ib,Jb,qc,vd),jb.x=Ib,jb.y=Jb,jb.z=qc,jb.w=vd;Ja.buffer=r.positionBuffer;Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Sa=1;Ub=0;zb=5126;Ha=pb=ib=ic=0;za(Ja)?(Db=!0,wb=Y.createStream(34962,Ja),zb=wb.dtype):(wb=Y.getBuffer(Ja))?zb=wb.dtype:"constant"in Ja?(Sa=2,"number"===typeof Ja.constant?(ib=Ja.constant,pb=Ha=ic=0):(ib=0<Ja.constant.length?Ja.constant[0]:0,pb=1<Ja.constant.length?Ja.constant[1]:0,Ha=2<Ja.constant.length?Ja.constant[2]:
0,ic=3<Ja.constant.length?Ja.constant[3]:0)):(wb=za(Ja.buffer)?Y.createStream(34962,Ja.buffer):Y.getBuffer(Ja.buffer),zb="type"in Ja?Ea[Ja.type]:wb.dtype,Yb=!!Ja.normalized,qb=Ja.size|0,Pb=Ja.offset|0,Ub=Ja.stride|0,hb=Ja.divisor|0);rb=C.location;Ka=Cc[rb];if(1===Sa){Ka.buffer||Q.enableVertexAttribArray(rb);fb=qb||2;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)Q.bindBuffer(34962,wb.buffer),Q.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=
fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(d.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(Q.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==ic)Q.vertexAttrib4f(rb,ib,pb,Ha,ic),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=ic;ya.buffer=r.positionFractBuffer;gb=!1;La=null;kb=0;Wa=!1;sb=tb=0;Pa=1;Bc=0;Ra=5126;ia=Na=Eb=Kb=0;za(ya)?(gb=!0,La=Y.createStream(34962,ya),Ra=La.dtype):(La=Y.getBuffer(ya))?Ra=La.dtype:"constant"in ya?
(Pa=2,"number"===typeof ya.constant?(Eb=ya.constant,Na=ia=Kb=0):(Eb=0<ya.constant.length?ya.constant[0]:0,Na=1<ya.constant.length?ya.constant[1]:0,ia=2<ya.constant.length?ya.constant[2]:0,Kb=3<ya.constant.length?ya.constant[3]:0)):(La=za(ya.buffer)?Y.createStream(34962,ya.buffer):Y.getBuffer(ya.buffer),Ra="type"in ya?Ea[ya.type]:La.dtype,Wa=!!ya.normalized,sb=ya.size|0,tb=ya.offset|0,Bc=ya.stride|0,kb=ya.divisor|0);Ya=e.location;Lb=Cc[Ya];if(1===Pa){Lb.buffer||Q.enableVertexAttribArray(Ya);Mb=sb||
2;if(Lb.type!==Ra||Lb.size!==Mb||Lb.buffer!==La||Lb.normalized!==Wa||Lb.offset!==tb||Lb.stride!==Bc)Q.bindBuffer(34962,La.buffer),Q.vertexAttribPointer(Ya,Mb,Ra,Wa,Bc,tb),Lb.type=Ra,Lb.size=Mb,Lb.buffer=La,Lb.normalized=Wa,Lb.offset=tb,Lb.stride=Bc;Lb.divisor!==kb&&(d.vertexAttribDivisorANGLE(Ya,kb),Lb.divisor=kb)}else if(Lb.buffer&&(Q.disableVertexAttribArray(Ya),Lb.buffer=null),Lb.x!==Eb||Lb.y!==Na||Lb.z!==ia||Lb.w!==Kb)Q.vertexAttrib4f(Ya,Eb,Na,ia,Kb),Lb.x=Eb,Lb.y=Na,Lb.z=ia,Lb.w=Kb;la.buffer=
r.positionFractBuffer;lb=!1;Oa=null;Zb=0;Qa=!1;vb=ub=0;Ta=1;nb=0;fc=5126;jc=bb=uc=zc=0;za(la)?(lb=!0,Oa=Y.createStream(34962,la),fc=Oa.dtype):(Oa=Y.getBuffer(la))?fc=Oa.dtype:"constant"in la?(Ta=2,"number"===typeof la.constant?(uc=la.constant,bb=jc=zc=0):(uc=0<la.constant.length?la.constant[0]:0,bb=1<la.constant.length?la.constant[1]:0,jc=2<la.constant.length?la.constant[2]:0,zc=3<la.constant.length?la.constant[3]:0)):(Oa=za(la.buffer)?Y.createStream(34962,la.buffer):Y.getBuffer(la.buffer),fc="type"in
la?Ea[la.type]:Oa.dtype,Qa=!!la.normalized,vb=la.size|0,ub=la.offset|0,nb=la.stride|0,Zb=la.divisor|0);gd=V.location;Xa=Cc[gd];if(1===Ta){Xa.buffer||Q.enableVertexAttribArray(gd);Mc=vb||2;if(Xa.type!==fc||Xa.size!==Mc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==ub||Xa.stride!==nb)Q.bindBuffer(34962,Oa.buffer),Q.vertexAttribPointer(gd,Mc,fc,Qa,nb,ub),Xa.type=fc,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=ub,Xa.stride=nb;Xa.divisor!==Zb&&(d.vertexAttribDivisorANGLE(gd,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&
(Q.disableVertexAttribArray(gd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)Q.vertexAttrib4f(gd,uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;aa.buffer=r.colorBuffer;Ab=!1;Za=null;Vb=0;sc=!1;Qb=Wb=0;Kc=1;Rb=0;Qd=5126;ed=Nc=Ed=Ec=0;za(aa)?(Ab=!0,Za=Y.createStream(34962,aa),Qd=Za.dtype):(Za=Y.getBuffer(aa))?Qd=Za.dtype:"constant"in aa?(Kc=2,"number"===typeof aa.constant?(Ed=aa.constant,Nc=ed=Ec=0):(Ed=0<aa.constant.length?aa.constant[0]:0,Nc=1<aa.constant.length?aa.constant[1]:0,ed=2<
aa.constant.length?aa.constant[2]:0,Ec=3<aa.constant.length?aa.constant[3]:0)):(Za=za(aa.buffer)?Y.createStream(34962,aa.buffer):Y.getBuffer(aa.buffer),Qd="type"in aa?Ea[aa.type]:Za.dtype,sc=!!aa.normalized,Qb=aa.size|0,Wb=aa.offset|0,Rb=aa.stride|0,Vb=aa.divisor|0);od=f.location;nc=Cc[od];if(1===Kc){nc.buffer||Q.enableVertexAttribArray(od);vc=Qb||4;if(nc.type!==Qd||nc.size!==vc||nc.buffer!==Za||nc.normalized!==sc||nc.offset!==Wb||nc.stride!==Rb)Q.bindBuffer(34962,Za.buffer),Q.vertexAttribPointer(od,
vc,Qd,sc,Rb,Wb),nc.type=Qd,nc.size=vc,nc.buffer=Za,nc.normalized=sc,nc.offset=Wb,nc.stride=Rb;nc.divisor!==Vb&&(d.vertexAttribDivisorANGLE(od,Vb),nc.divisor=Vb)}else if(nc.buffer&&(Q.disableVertexAttribArray(od),nc.buffer=null),nc.x!==Ed||nc.y!==Nc||nc.z!==ed||nc.w!==Ec)Q.vertexAttrib4f(od,Ed,Nc,ed,Ec),nc.x=Ed,nc.y=Nc,nc.z=ed,nc.w=Ec;gc=r.scale;db=gc[0];Tb=gc[1];J&&rc===db&&Xb===Tb||(rc=db,Xb=Tb,Q.uniform2f(c.location,db,Tb));cc=r.scaleFract;hc=cc[0];Ac=cc[1];J&&xc===hc&&ad===Ac||(xc=hc,ad=Ac,Q.uniform2f(t.location,
hc,Ac));Qc=r.translate;Rc=Qc[0];Xc=Qc[1];J&&Sc===Rc&&wd===Xc||(Sc=Rc,wd=Xc,Q.uniform2f(xa.location,Rc,Xc));bd=r.translateFract;Yc=bd[0];bc=bd[1];J&&kc===Yc&&Zc===bc||(kc=Yc,Zc=bc,Q.uniform2f(y.location,Yc,bc));Uc=r.thickness;J&&cd===Uc||(cd=Uc,Q.uniform1f(a.location,Uc));yc=r.depth;J&&hd===yc||(hd=yc,Q.uniform1f(z.location,yc));pd=O.call(this,fa,r,J);ye=pd[0];id=pd[1];Nd=pd[2];de=pd[3];J&&Ne===ye&&Fa===id&&Xd===Nd&&Od===de||(Ne=ye,Fa=id,Xd=Nd,Od=de,Q.uniform4f(na.location,ye,id,Nd,de));Kd=r.dashLength;
J&&Id===Kd||(Id=Kd,Q.uniform1f(ba.location,Kd));md=r.opacity;J&&Tc===md||(Tc=md,Q.uniform1f(D.location,md));(ud=r.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);sd=ud._texture;Q.uniform1i(h.location,sd.bind());jd=r.count;0<jd?xb?d.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),jd):d.drawArraysInstancedANGLE(5,0,4,jd):0>jd&&(xb?Q.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):Q.drawArrays(5,0,4));fa.viewportWidth=Wc;fa.viewportHeight=Vc;ec&&Y.destroyStream($a);Db&&Y.destroyStream(wb);
gb&&Y.destroyStream(La);lb&&Y.destroyStream(Oa);Ab&&Y.destroyStream(Za);sd.unbind()}P.dirty=!0;da.setVAO(null);H&&(K.cpuTime+=performance.now()-m)},draw:function(b){var v,q,H,n,d,r,J,S,u,A,w,B,O,wa,ra,G,L,W,U,Z,X,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,ia,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub;v=N.next;v!==N.cur&&(v?
Q.bindFramebuffer(36160,v.framebuffer):Q.bindFramebuffer(36160,null),N.cur=v);if(P.dirty){var vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb;vb=oa.dither;vb!==P.dither&&(vb?Q.enable(3024):Q.disable(3024),P.dither=vb);Ta=oa.depth_func;Ta!==P.depth_func&&(Q.depthFunc(Ta),P.depth_func=Ta);nb=qa[0];fc=qa[1];if(nb!==Aa[0]||fc!==Aa[1])Q.depthRange(nb,fc),Aa[0]=nb,Aa[1]=fc;zc=oa.depth_mask;zc!==P.depth_mask&&(Q.depthMask(zc),P.depth_mask=zc);uc=Da[0];bb=Da[1];
jc=Da[2];gd=Da[3];if(uc!==ka[0]||bb!==ka[1]||jc!==ka[2]||gd!==ka[3])Q.colorMask(uc,bb,jc,gd),ka[0]=uc,ka[1]=bb,ka[2]=jc,ka[3]=gd;Xa=oa.cull_enable;Xa!==P.cull_enable&&(Xa?Q.enable(2884):Q.disable(2884),P.cull_enable=Xa);Mc=oa.cull_face;Mc!==P.cull_face&&(Q.cullFace(Mc),P.cull_face=Mc);Ab=oa.frontFace;Ab!==P.frontFace&&(Q.frontFace(Ab),P.frontFace=Ab);Za=oa.lineWidth;Za!==P.lineWidth&&(Q.lineWidth(Za),P.lineWidth=Za);Vb=oa.polygonOffset_enable;Vb!==P.polygonOffset_enable&&(Vb?Q.enable(32823):Q.disable(32823),
P.polygonOffset_enable=Vb);sc=Ma[0];Wb=Ma[1];if(sc!==F[0]||Wb!==F[1])Q.polygonOffset(sc,Wb),F[0]=sc,F[1]=Wb;Qb=oa.sample_alpha;Qb!==P.sample_alpha&&(Qb?Q.enable(32926):Q.disable(32926),P.sample_alpha=Qb);Kc=oa.sample_enable;Kc!==P.sample_enable&&(Kc?Q.enable(32928):Q.disable(32928),P.sample_enable=Kc);Rb=eb[0];Qd=eb[1];if(Rb!==Ua[0]||Qd!==Ua[1])Q.sampleCoverage(Rb,Qd),Ua[0]=Rb,Ua[1]=Qd;Ec=oa.stencil_mask;Ec!==P.stencil_mask&&(Q.stencilMask(Ec),P.stencil_mask=Ec);Ed=R[0];Nc=R[1];ed=R[2];if(Ed!==ta[0]||
Nc!==ta[1]||ed!==ta[2])Q.stencilFunc(Ed,Nc,ed),ta[0]=Ed,ta[1]=Nc,ta[2]=ed;od=Hb[0];nc=Hb[1];vc=Hb[2];gc=Hb[3];if(od!==ha[0]||nc!==ha[1]||vc!==ha[2]||gc!==ha[3])Q.stencilOpSeparate(od,nc,vc,gc),ha[0]=od,ha[1]=nc,ha[2]=vc,ha[3]=gc;db=va[0];rc=va[1];Tb=va[2];Xb=va[3];if(db!==td[0]||rc!==td[1]||Tb!==td[2]||Xb!==td[3])Q.stencilOpSeparate(db,rc,Tb,Xb),td[0]=db,td[1]=rc,td[2]=Tb,td[3]=Xb}q=b.viewport;H=q.x|0;n=q.y|0;d="width"in q?q.width|0:fa.framebufferWidth-H;r="height"in q?q.height|0:fa.framebufferHeight-
n;J=fa.viewportWidth;fa.viewportWidth=d;S=fa.viewportHeight;fa.viewportHeight=r;Q.viewport(H,n,d,r);sa[0]=H;sa[1]=n;sa[2]=d;sa[3]=r;Q.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;Q.enable(3042);P.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;Q.blendFuncSeparate(770,771,773,1);ga[0]=770;ga[1]=771;ga[2]=773;ga[3]=1;(u=I.call(this,fa,b,0))?Q.enable(2929):Q.disable(2929);P.depth_enable=u;A=b.viewport;w=A.x|0;B=A.y|0;O="width"in A?A.width|0:fa.framebufferWidth-w;wa=
"height"in A?A.height|0:fa.framebufferHeight-B;Q.scissor(w,B,O,wa);p[0]=w;p[1]=B;p[2]=O;p[3]=wa;Q.enable(3089);P.scissor_enable=!0;Q.disable(2960);P.stencil_enable=!1;if(ra=P.profile)G=performance.now(),K.count++;Q.useProgram(M.program);L=l.angle_instanced_arrays;da.setVAO(null);pa.buffer=b.positionBuffer;W=!1;U=null;Z=0;X=!1;Ce=be=0;Ze=1;Re=0;Hd=5126;Bd=Zd=te=Ae=0;za(pa)?(W=!0,U=Y.createStream(34962,pa),Hd=U.dtype):(U=Y.getBuffer(pa))?Hd=U.dtype:"constant"in pa?(Ze=2,"number"===typeof pa.constant?
(te=pa.constant,Zd=Bd=Ae=0):(te=0<pa.constant.length?pa.constant[0]:0,Zd=1<pa.constant.length?pa.constant[1]:0,Bd=2<pa.constant.length?pa.constant[2]:0,Ae=3<pa.constant.length?pa.constant[3]:0)):(U=za(pa.buffer)?Y.createStream(34962,pa.buffer):Y.getBuffer(pa.buffer),Hd="type"in pa?Ea[pa.type]:U.dtype,X=!!pa.normalized,Ce=pa.size|0,be=pa.offset|0,Re=pa.stride|0,Z=pa.divisor|0);$d=ja.location;ld=Cc[$d];if(1===Ze){ld.buffer||Q.enableVertexAttribArray($d);$c=Ce||2;if(ld.type!==Hd||ld.size!==$c||ld.buffer!==
U||ld.normalized!==X||ld.offset!==be||ld.stride!==Re)Q.bindBuffer(34962,U.buffer),Q.vertexAttribPointer($d,$c,Hd,X,Re,be),ld.type=Hd,ld.size=$c,ld.buffer=U,ld.normalized=X,ld.offset=be,ld.stride=Re;ld.divisor!==Z&&(L.vertexAttribDivisorANGLE($d,Z),ld.divisor=Z)}else if(ld.buffer&&(Q.disableVertexAttribArray($d),ld.buffer=null),ld.x!==te||ld.y!==Zd||ld.z!==Bd||ld.w!==Ae)Q.vertexAttrib4f($d,te,Zd,Bd,Ae),ld.x=te,ld.y=Zd,ld.z=Bd,ld.w=Ae;Ja.buffer=b.positionBuffer;rd=!1;Lc=null;nd=0;Gc=!1;Pc=dd=0;kd=1;
Bb=0;Fb=5126;Cb=wc=xb=tc=0;za(Ja)?(rd=!0,Lc=Y.createStream(34962,Ja),Fb=Lc.dtype):(Lc=Y.getBuffer(Ja))?Fb=Lc.dtype:"constant"in Ja?(kd=2,"number"===typeof Ja.constant?(xb=Ja.constant,wc=Cb=tc=0):(xb=0<Ja.constant.length?Ja.constant[0]:0,wc=1<Ja.constant.length?Ja.constant[1]:0,Cb=2<Ja.constant.length?Ja.constant[2]:0,tc=3<Ja.constant.length?Ja.constant[3]:0)):(Lc=za(Ja.buffer)?Y.createStream(34962,Ja.buffer):Y.getBuffer(Ja.buffer),Fb="type"in Ja?Ea[Ja.type]:Lc.dtype,Gc=!!Ja.normalized,Pc=Ja.size|
0,dd=Ja.offset|0,Bb=Ja.stride|0,nd=Ja.divisor|0);Jc=C.location;lc=Cc[Jc];if(1===kd){lc.buffer||Q.enableVertexAttribArray(Jc);Hc=Pc||2;if(lc.type!==Fb||lc.size!==Hc||lc.buffer!==Lc||lc.normalized!==Gc||lc.offset!==dd||lc.stride!==Bb)Q.bindBuffer(34962,Lc.buffer),Q.vertexAttribPointer(Jc,Hc,Fb,Gc,Bb,dd),lc.type=Fb,lc.size=Hc,lc.buffer=Lc,lc.normalized=Gc,lc.offset=dd,lc.stride=Bb;lc.divisor!==nd&&(L.vertexAttribDivisorANGLE(Jc,nd),lc.divisor=nd)}else if(lc.buffer&&(Q.disableVertexAttribArray(Jc),lc.buffer=
null),lc.x!==xb||lc.y!==wc||lc.z!==Cb||lc.w!==tc)Q.vertexAttrib4f(Jc,xb,wc,Cb,tc),lc.x=xb,lc.y=wc,lc.z=Cb,lc.w=tc;ya.buffer=b.positionFractBuffer;Wc=!1;Vc=null;Dc=0;dc=!1;oc=Ic=0;pc=1;mc=0;ec=5126;cb=yb=Fc=$a=0;za(ya)?(Wc=!0,Vc=Y.createStream(34962,ya),ec=Vc.dtype):(Vc=Y.getBuffer(ya))?ec=Vc.dtype:"constant"in ya?(pc=2,"number"===typeof ya.constant?(Fc=ya.constant,yb=cb=$a=0):(Fc=0<ya.constant.length?ya.constant[0]:0,yb=1<ya.constant.length?ya.constant[1]:0,cb=2<ya.constant.length?ya.constant[2]:
0,$a=3<ya.constant.length?ya.constant[3]:0)):(Vc=za(ya.buffer)?Y.createStream(34962,ya.buffer):Y.getBuffer(ya.buffer),ec="type"in ya?Ea[ya.type]:Vc.dtype,dc=!!ya.normalized,oc=ya.size|0,Ic=ya.offset|0,mc=ya.stride|0,Dc=ya.divisor|0);Nb=e.location;ab=Cc[Nb];if(1===pc){ab.buffer||Q.enableVertexAttribArray(Nb);ob=oc||2;if(ab.type!==ec||ab.size!==ob||ab.buffer!==Vc||ab.normalized!==dc||ab.offset!==Ic||ab.stride!==mc)Q.bindBuffer(34962,Vc.buffer),Q.vertexAttribPointer(Nb,ob,ec,dc,mc,Ic),ab.type=ec,ab.size=
ob,ab.buffer=Vc,ab.normalized=dc,ab.offset=Ic,ab.stride=mc;ab.divisor!==Dc&&(L.vertexAttribDivisorANGLE(Nb,Dc),ab.divisor=Dc)}else if(ab.buffer&&(Q.disableVertexAttribArray(Nb),ab.buffer=null),ab.x!==Fc||ab.y!==yb||ab.z!==cb||ab.w!==$a)Q.vertexAttrib4f(Nb,Fc,yb,cb,$a),ab.x=Fc,ab.y=yb,ab.z=cb,ab.w=$a;la.buffer=b.positionFractBuffer;Va=!1;vd=null;Ib=0;Jb=!1;Ob=qc=0;jb=1;Gb=0;Db=5126;Pb=Yb=hb=wb=0;za(la)?(Va=!0,vd=Y.createStream(34962,la),Db=vd.dtype):(vd=Y.getBuffer(la))?Db=vd.dtype:"constant"in la?
(jb=2,"number"===typeof la.constant?(hb=la.constant,Yb=Pb=wb=0):(hb=0<la.constant.length?la.constant[0]:0,Yb=1<la.constant.length?la.constant[1]:0,Pb=2<la.constant.length?la.constant[2]:0,wb=3<la.constant.length?la.constant[3]:0)):(vd=za(la.buffer)?Y.createStream(34962,la.buffer):Y.getBuffer(la.buffer),Db="type"in la?Ea[la.type]:vd.dtype,Jb=!!la.normalized,Ob=la.size|0,qc=la.offset|0,Gb=la.stride|0,Ib=la.divisor|0);qb=V.location;Sa=Cc[qb];if(1===jb){Sa.buffer||Q.enableVertexAttribArray(qb);Ub=Ob||
2;if(Sa.type!==Db||Sa.size!==Ub||Sa.buffer!==vd||Sa.normalized!==Jb||Sa.offset!==qc||Sa.stride!==Gb)Q.bindBuffer(34962,vd.buffer),Q.vertexAttribPointer(qb,Ub,Db,Jb,Gb,qc),Sa.type=Db,Sa.size=Ub,Sa.buffer=vd,Sa.normalized=Jb,Sa.offset=qc,Sa.stride=Gb;Sa.divisor!==Ib&&(L.vertexAttribDivisorANGLE(qb,Ib),Sa.divisor=Ib)}else if(Sa.buffer&&(Q.disableVertexAttribArray(qb),Sa.buffer=null),Sa.x!==hb||Sa.y!==Yb||Sa.z!==Pb||Sa.w!==wb)Q.vertexAttrib4f(qb,hb,Yb,Pb,wb),Sa.x=hb,Sa.y=Yb,Sa.z=Pb,Sa.w=wb;aa.buffer=
b.colorBuffer;zb=!1;ic=null;ib=0;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Wa=kb=La=0;za(aa)?(zb=!0,ic=Y.createStream(34962,aa),gb=ic.dtype):(ic=Y.getBuffer(aa))?gb=ic.dtype:"constant"in aa?(Ka=2,"number"===typeof aa.constant?(kb=aa.constant,Wa=tb=La=0):(kb=0<aa.constant.length?aa.constant[0]:0,Wa=1<aa.constant.length?aa.constant[1]:0,tb=2<aa.constant.length?aa.constant[2]:0,La=3<aa.constant.length?aa.constant[3]:0)):(ic=za(aa.buffer)?Y.createStream(34962,aa.buffer):Y.getBuffer(aa.buffer),gb="type"in aa?
Ea[aa.type]:ic.dtype,pb=!!aa.normalized,rb=aa.size|0,Ha=aa.offset|0,fb=aa.stride|0,ib=aa.divisor|0);sb=f.location;Pa=Cc[sb];if(1===Ka){Pa.buffer||Q.enableVertexAttribArray(sb);Bc=rb||4;if(Pa.type!==gb||Pa.size!==Bc||Pa.buffer!==ic||Pa.normalized!==pb||Pa.offset!==Ha||Pa.stride!==fb)Q.bindBuffer(34962,ic.buffer),Q.vertexAttribPointer(sb,Bc,gb,pb,fb,Ha),Pa.type=gb,Pa.size=Bc,Pa.buffer=ic,Pa.normalized=pb,Pa.offset=Ha,Pa.stride=fb;Pa.divisor!==ib&&(L.vertexAttribDivisorANGLE(sb,ib),Pa.divisor=ib)}else if(Pa.buffer&&
(Q.disableVertexAttribArray(sb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==tb||Pa.w!==La)Q.vertexAttrib4f(sb,kb,Wa,tb,La),Pa.x=kb,Pa.y=Wa,Pa.z=tb,Pa.w=La;Ra=ca.location;Kb=Cc[Ra];Kb.buffer||Q.enableVertexAttribArray(Ra);if(5126!==Kb.type||1!==Kb.size||Kb.buffer!==g||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)Q.bindBuffer(34962,g.buffer),Q.vertexAttribPointer(Ra,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=g,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(L.vertexAttribDivisorANGLE(Ra,
0),Kb.divisor=0);Eb=E.location;Na=Cc[Eb];Na.buffer||Q.enableVertexAttribArray(Eb);if(5126!==Na.type||1!==Na.size||Na.buffer!==k||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)Q.bindBuffer(34962,k.buffer),Q.vertexAttribPointer(Eb,1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=k,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(L.vertexAttribDivisorANGLE(Eb,0),Na.divisor=0);ia=b.scale;Q.uniform2f(c.location,ia[0],ia[1]);Ya=b.scaleFract;Q.uniform2f(t.location,Ya[0],Ya[1]);Lb=b.translate;
Q.uniform2f(xa.location,Lb[0],Lb[1]);Mb=b.translateFract;Q.uniform2f(y.location,Mb[0],Mb[1]);Q.uniform1f(a.location,b.thickness);Q.uniform1f(z.location,b.depth);lb=m.call(this,fa,b,0);Q.uniform4f(na.location,lb[0],lb[1],lb[2],lb[3]);Q.uniform1f(ba.location,b.dashLength);Q.uniform1f(D.location,b.opacity);(Oa=b.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);Zb=Oa._texture;Q.uniform1i(h.location,Zb.bind());(Qa=T.elements)?Q.bindBuffer(34963,Qa.buffer.buffer):da.currentVAO&&(Qa=x.getElements(da.currentVAO.elements))&&
Q.bindBuffer(34963,Qa.buffer.buffer);ub=b.count;0<ub?Qa?L.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),ub):L.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Qa?Q.drawElements(5,4,Qa.type,0<<(Qa.type-5121>>1)):Q.drawArrays(5,0,4));P.dirty=!0;da.setVAO(null);fa.viewportWidth=J;fa.viewportHeight=S;ra&&(K.cpuTime+=performance.now()-G);W&&Y.destroyStream(U);rd&&Y.destroyStream(Lc);Wc&&Y.destroyStream(Vc);Va&&Y.destroyStream(vd);zb&&Y.destroyStream(ic);Zb.unbind()},scope:function(a,c,e){var f,
l,h,p,F,m,t,R,n,d,y,C,z,sa,Ma,x,eb,ga,ha,E,Q,D,M,ta,N,da,I,O,V,U,ka,Ua,ba,Aa,qa,va,Da,ja,Hb,ma,ca,xa,na,Ca,td,Cc,X,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,ia,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,
Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe;f=a.viewport;l=f.x|0;h=f.y|0;p="width"in f?f.width|0:fa.framebufferWidth-l;F="height"in f?f.height|0:fa.framebufferHeight-h;m=fa.viewportWidth;fa.viewportWidth=p;t=fa.viewportHeight;fa.viewportHeight=F;R=H[0];H[0]=l;n=H[1];H[1]=h;d=H[2];H[2]=p;y=H[3];H[3]=F;C=S[0];S[0]=0;z=S[1];S[1]=0;sa=S[2];S[2]=0;Ma=S[3];S[3]=0;x=oa.blend_enable;oa.blend_enable=!0;eb=ra[0];ra[0]=
32774;ga=ra[1];ra[1]=32774;ha=wa[0];wa[0]=770;E=wa[1];wa[1]=771;Q=wa[2];wa[2]=773;D=wa[3];wa[3]=1;M=b.call(this,fa,a,e);ta=oa.depth_enable;oa.depth_enable=M;N=a.viewport;da=N.x|0;I=N.y|0;O="width"in N?N.width|0:fa.framebufferWidth-da;V="height"in N?N.height|0:fa.framebufferHeight-I;U=v[0];v[0]=da;ka=v[1];v[1]=I;Ua=v[2];v[2]=O;ba=v[3];v[3]=V;Aa=oa.scissor_enable;oa.scissor_enable=!0;qa=oa.stencil_enable;oa.stencil_enable=!1;if(va=P.profile)Da=performance.now(),K.count++;ja=T.offset;T.offset=0;Hb=T.count;
T.count=4;ma=a.count;ca=T.instances;T.instances=ma;xa=T.primitive;T.primitive=5;na=a.dashLength;Ca=J[23];J[23]=na;td=a.dashTexture;Cc=J[24];J[24]=td;X=a.depth;Wc=J[22];J[22]=X;Vc=a.id;Dc=J[31];J[31]=Vc;dc=a.miterLimit;Ic=J[32];J[32]=dc;oc=G.call(this,fa,a,e);pc=J[33];J[33]=oc;mc=a.opacity;ec=J[10];J[10]=mc;$a=fa.pixelRatio;Fc=J[34];J[34]=$a;yb=a.scale;cb=J[6];J[6]=yb;Nb=a.scaleFract;ab=J[7];J[7]=Nb;ob=a.thickness;Va=J[21];J[21]=ob;ia=a.translate;Ib=J[8];J[8]=ia;Jb=a.translateFract;qc=J[9];J[9]=Jb;
Ob=B.call(this,fa,a,e);jb=J[3];J[3]=Ob;pa.buffer=a.positionBuffer;Gb=!1;Db=null;wb=0;hb=!1;Pb=Yb=0;qb=1;Sa=0;Ub=5126;pb=ib=ic=zb=0;za(pa)?(Gb=!0,Db=Y.createStream(34962,pa),Ub=Db.dtype):(Db=Y.getBuffer(pa))?Ub=Db.dtype:"constant"in pa?(qb=2,"number"===typeof pa.constant?(ic=pa.constant,ib=pb=zb=0):(ic=0<pa.constant.length?pa.constant[0]:0,ib=1<pa.constant.length?pa.constant[1]:0,pb=2<pa.constant.length?pa.constant[2]:0,zb=3<pa.constant.length?pa.constant[3]:0)):(Db=za(pa.buffer)?Y.createStream(34962,
pa.buffer):Y.getBuffer(pa.buffer),Ub="type"in pa?Ea[pa.type]:Db.dtype,hb=!!pa.normalized,Pb=pa.size|0,Yb=pa.offset|0,Sa=pa.stride|0,wb=pa.divisor|0);Ha=L.buffer;L.buffer=Db;rb=L.divisor;L.divisor=wb;Ka=L.normalized;L.normalized=hb;fb=L.offset;L.offset=Yb;gb=L.size;L.size=Pb;La=L.state;L.state=qb;kb=L.stride;L.stride=Sa;Wa=L.type;L.type=Ub;tb=L.w;L.w=zb;sb=L.x;L.x=ic;Pa=L.y;L.y=ib;Bc=L.z;L.z=pb;ya.buffer=a.positionFractBuffer;Ra=!1;Kb=null;Eb=0;Na=!1;Ya=yd=0;Lb=1;Mb=0;lb=5126;ub=Qa=Zb=Oa=0;za(ya)?
(Ra=!0,Kb=Y.createStream(34962,ya),lb=Kb.dtype):(Kb=Y.getBuffer(ya))?lb=Kb.dtype:"constant"in ya?(Lb=2,"number"===typeof ya.constant?(Zb=ya.constant,Qa=ub=Oa=0):(Zb=0<ya.constant.length?ya.constant[0]:0,Qa=1<ya.constant.length?ya.constant[1]:0,ub=2<ya.constant.length?ya.constant[2]:0,Oa=3<ya.constant.length?ya.constant[3]:0)):(Kb=za(ya.buffer)?Y.createStream(34962,ya.buffer):Y.getBuffer(ya.buffer),lb="type"in ya?Ea[ya.type]:Kb.dtype,Na=!!ya.normalized,Ya=ya.size|0,yd=ya.offset|0,Mb=ya.stride|0,Eb=
ya.divisor|0);vb=W.buffer;W.buffer=Kb;Ta=W.divisor;W.divisor=Eb;nb=W.normalized;W.normalized=Na;fc=W.offset;W.offset=yd;zc=W.size;W.size=Ya;uc=W.state;W.state=Lb;bb=W.stride;W.stride=Mb;jc=W.type;W.type=lb;gd=W.w;W.w=Oa;Xa=W.x;W.x=Zb;Mc=W.y;W.y=Qa;Ab=W.z;W.z=ub;Ja.buffer=a.positionBuffer;Za=!1;Vb=null;sc=0;Wb=!1;Kc=Qb=0;Rb=1;Qd=0;Ec=5126;od=ed=Nc=Ed=0;za(Ja)?(Za=!0,Vb=Y.createStream(34962,Ja),Ec=Vb.dtype):(Vb=Y.getBuffer(Ja))?Ec=Vb.dtype:"constant"in Ja?(Rb=2,"number"===typeof Ja.constant?(Nc=Ja.constant,
ed=od=Ed=0):(Nc=0<Ja.constant.length?Ja.constant[0]:0,ed=1<Ja.constant.length?Ja.constant[1]:0,od=2<Ja.constant.length?Ja.constant[2]:0,Ed=3<Ja.constant.length?Ja.constant[3]:0)):(Vb=za(Ja.buffer)?Y.createStream(34962,Ja.buffer):Y.getBuffer(Ja.buffer),Ec="type"in Ja?Ea[Ja.type]:Vb.dtype,Wb=!!Ja.normalized,Kc=Ja.size|0,Qb=Ja.offset|0,Qd=Ja.stride|0,sc=Ja.divisor|0);nc=u.buffer;u.buffer=Vb;vc=u.divisor;u.divisor=sc;gc=u.normalized;u.normalized=Wb;db=u.offset;u.offset=Qb;rc=u.size;u.size=Kc;Tb=u.state;
u.state=Rb;Xb=u.stride;u.stride=Qd;cc=u.type;u.type=Ec;hc=u.w;u.w=Ed;xc=u.x;u.x=Nc;Ac=u.y;u.y=ed;ad=u.z;u.z=od;la.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Sc=0;Xc=!1;bd=wd=0;Yc=1;kc=0;bc=5126;yc=cd=Uc=Zc=0;za(la)?(Qc=!0,Rc=Y.createStream(34962,la),bc=Rc.dtype):(Rc=Y.getBuffer(la))?bc=Rc.dtype:"constant"in la?(Yc=2,"number"===typeof la.constant?(Uc=la.constant,cd=yc=Zc=0):(Uc=0<la.constant.length?la.constant[0]:0,cd=1<la.constant.length?la.constant[1]:0,yc=2<la.constant.length?la.constant[2]:0,Zc=
3<la.constant.length?la.constant[3]:0)):(Rc=za(la.buffer)?Y.createStream(34962,la.buffer):Y.getBuffer(la.buffer),bc="type"in la?Ea[la.type]:Rc.dtype,Xc=!!la.normalized,bd=la.size|0,wd=la.offset|0,kc=la.stride|0,Sc=la.divisor|0);hd=A.buffer;A.buffer=Rc;pd=A.divisor;A.divisor=Sc;ye=A.normalized;A.normalized=Xc;Ne=A.offset;A.offset=wd;id=A.size;A.size=bd;Fa=A.state;A.state=Yc;Nd=A.stride;A.stride=kc;Xd=A.type;A.type=bc;de=A.w;A.w=Zc;Od=A.x;A.x=Uc;Kd=A.y;A.y=cd;Id=A.z;A.z=yc;aa.buffer=a.colorBuffer;md=
!1;Tc=null;ud=0;sd=!1;xd=jd=0;Cd=1;Fd=0;oe=5126;ie=je=ue=qe=0;za(aa)?(md=!0,Tc=Y.createStream(34962,aa),oe=Tc.dtype):(Tc=Y.getBuffer(aa))?oe=Tc.dtype:"constant"in aa?(Cd=2,"number"===typeof aa.constant?(ue=aa.constant,je=ie=qe=0):(ue=0<aa.constant.length?aa.constant[0]:0,je=1<aa.constant.length?aa.constant[1]:0,ie=2<aa.constant.length?aa.constant[2]:0,qe=3<aa.constant.length?aa.constant[3]:0)):(Tc=za(aa.buffer)?Y.createStream(34962,aa.buffer):Y.getBuffer(aa.buffer),oe="type"in aa?Ea[aa.type]:Tc.dtype,
sd=!!aa.normalized,xd=aa.size|0,jd=aa.offset|0,Fd=aa.stride|0,ud=aa.divisor|0);he=w.buffer;w.buffer=Tc;ve=w.divisor;w.divisor=ud;ee=w.normalized;w.normalized=sd;le=w.offset;w.offset=jd;Oc=w.size;w.size=xd;fd=w.state;w.state=Cd;we=w.stride;w.stride=Fd;pe=w.type;w.type=oe;Ld=w.w;w.w=qe;Pd=w.x;w.x=ue;Rd=w.y;w.y=je;Sd=w.z;w.z=ie;me=Z.buffer;Z.buffer=g;He=Z.divisor;Z.divisor=0;Be=Z.normalized;Z.normalized=!1;re=Z.offset;Z.offset=0;Se=Z.size;Z.size=0;Te=Z.state;Z.state=1;Oe=Z.stride;Z.stride=8;xe=Z.type;
Z.type=5126;Fe=Z.w;Z.w=0;Ie=Z.x;Z.x=0;Je=Z.y;Z.y=0;Ke=Z.z;Z.z=0;Ge=r.buffer;r.buffer=k;Md=r.divisor;r.divisor=0;Yd=r.normalized;r.normalized=!1;ce=r.offset;r.offset=4;fe=r.size;r.size=0;Le=r.state;r.state=1;Jd=r.stride;r.stride=8;Td=r.type;r.type=5126;De=r.w;r.w=0;Me=r.x;r.x=0;bf=r.y;r.y=0;af=r.z;r.z=0;Ue=q.vert;q.vert=20;Pe=q.frag;q.frag=19;P.dirty=!0;c(fa,a,e);fa.viewportWidth=m;fa.viewportHeight=t;H[0]=R;H[1]=n;H[2]=d;H[3]=y;S[0]=C;S[1]=z;S[2]=sa;S[3]=Ma;oa.blend_enable=x;ra[0]=eb;ra[1]=ga;wa[0]=
ha;wa[1]=E;wa[2]=Q;wa[3]=D;oa.depth_enable=ta;v[0]=U;v[1]=ka;v[2]=Ua;v[3]=ba;oa.scissor_enable=Aa;oa.stencil_enable=qa;va&&(K.cpuTime+=performance.now()-Da);T.offset=ja;T.count=Hb;T.instances=ca;T.primitive=xa;J[23]=Ca;J[24]=Cc;J[22]=Wc;J[31]=Dc;J[32]=Ic;J[33]=pc;J[10]=ec;J[34]=Fc;J[6]=cb;J[7]=ab;J[21]=Va;J[8]=Ib;J[9]=qc;J[3]=jb;Gb&&Y.destroyStream(Db);L.buffer=Ha;L.divisor=rb;L.normalized=Ka;L.offset=fb;L.size=gb;L.state=La;L.stride=kb;L.type=Wa;L.w=tb;L.x=sb;L.y=Pa;L.z=Bc;Ra&&Y.destroyStream(Kb);
W.buffer=vb;W.divisor=Ta;W.normalized=nb;W.offset=fc;W.size=zc;W.state=uc;W.stride=bb;W.type=jc;W.w=gd;W.x=Xa;W.y=Mc;W.z=Ab;Za&&Y.destroyStream(Vb);u.buffer=nc;u.divisor=vc;u.normalized=gc;u.offset=db;u.size=rc;u.state=Tb;u.stride=Xb;u.type=cc;u.w=hc;u.x=xc;u.y=Ac;u.z=ad;Qc&&Y.destroyStream(Rc);A.buffer=hd;A.divisor=pd;A.normalized=ye;A.offset=Ne;A.size=id;A.state=Fa;A.stride=Nd;A.type=Xd;A.w=de;A.x=Od;A.y=Kd;A.z=Id;md&&Y.destroyStream(Tc);w.buffer=he;w.divisor=ve;w.normalized=ee;w.offset=le;w.size=
Oc;w.state=fd;w.stride=we;w.type=pe;w.w=Ld;w.x=Pd;w.y=Rd;w.z=Sd;Z.buffer=me;Z.divisor=He;Z.normalized=Be;Z.offset=re;Z.size=Se;Z.state=Te;Z.stride=Oe;Z.type=xe;Z.w=Fe;Z.x=Ie;Z.y=Je;Z.z=Ke;r.buffer=Ge;r.divisor=Md;r.normalized=Yd;r.offset=ce;r.size=fe;r.state=Le;r.stride=Jd;r.type=Td;r.w=De;r.x=Me;r.y=bf;r.z=af;q.vert=Ue;q.frag=Pe;P.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(d,
K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,Cc,Y,fa,P){var T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,td,Hb,ha,H,sa,Ea,pa,ya,Ja,la,aa,ua,Ia,Ba,mb,ea;T=d.attributes;x=d.buffer;l=d.context;N=d.current;Q=d.draw;za=d.elements;oa=d.extensions;q=d.framebuffer;J=d.gl;da=d.isBufferArgs;S=d.next;ma=d.shader;ra=d.uniforms;Ca=d.vao;wa=S.blend_color;ga=N.blend_color;Da=S.blend_equation;ka=N.blend_equation;qa=S.blend_func;Aa=N.blend_func;Ma=S.colorMask;
F=N.colorMask;eb=S.depth_range;Ua=N.depth_range;v=S.polygonOffset_offset;p=N.polygonOffset_offset;R=S.sample_coverage;ta=N.sample_coverage;va=S.scissor_box;td=N.scissor_box;Hb=S.stencil_func;ha=N.stencil_func;H=S.stencil_opBack;sa=N.stencil_opBack;Ea=S.stencil_opFront;pa=N.stencil_opFront;ya=S.viewport;Ja=N.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ia={divisor:1,offset:4,
stride:4};Ba={divisor:1,offset:16,stride:8};mb={divisor:1,offset:24,stride:8};ea={divisor:1,offset:0,stride:8};return{batch:function(b,m){var n,d,r,M,A,u;n=q.next;n!==q.cur&&(n?J.bindFramebuffer(36160,n.framebuffer):J.bindFramebuffer(36160,null),q.cur=n);if(N.dirty){var w,ya,I,B,wa,ra,G,L,U,W,Z,qa,va,Da,ma,X,Zd,Bd,ia,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb;w=S.dither;w!==N.dither&&(w?J.enable(3024):J.disable(3024),N.dither=w);ya=S.depth_func;ya!==N.depth_func&&(J.depthFunc(ya),N.depth_func=ya);I=eb[0];B=
eb[1];if(I!==Ua[0]||B!==Ua[1])J.depthRange(I,B),Ua[0]=I,Ua[1]=B;wa=S.depth_mask;wa!==N.depth_mask&&(J.depthMask(wa),N.depth_mask=wa);ra=Ma[0];G=Ma[1];L=Ma[2];U=Ma[3];if(ra!==F[0]||G!==F[1]||L!==F[2]||U!==F[3])J.colorMask(ra,G,L,U),F[0]=ra,F[1]=G,F[2]=L,F[3]=U;W=S.frontFace;W!==N.frontFace&&(J.frontFace(W),N.frontFace=W);Z=S.lineWidth;Z!==N.lineWidth&&(J.lineWidth(Z),N.lineWidth=Z);qa=S.polygonOffset_enable;qa!==N.polygonOffset_enable&&(qa?J.enable(32823):J.disable(32823),N.polygonOffset_enable=qa);
va=v[0];Da=v[1];if(va!==p[0]||Da!==p[1])J.polygonOffset(va,Da),p[0]=va,p[1]=Da;ma=S.sample_alpha;ma!==N.sample_alpha&&(ma?J.enable(32926):J.disable(32926),N.sample_alpha=ma);X=S.sample_enable;X!==N.sample_enable&&(X?J.enable(32928):J.disable(32928),N.sample_enable=X);Zd=R[0];Bd=R[1];if(Zd!==ta[0]||Bd!==ta[1])J.sampleCoverage(Zd,Bd),ta[0]=Zd,ta[1]=Bd;ia=S.stencil_mask;ia!==N.stencil_mask&&(J.stencilMask(ia),N.stencil_mask=ia);ld=Hb[0];$c=Hb[1];rd=Hb[2];if(ld!==ha[0]||$c!==ha[1]||rd!==ha[2])J.stencilFunc(ld,
$c,rd),ha[0]=ld,ha[1]=$c,ha[2]=rd;Lc=Ea[0];nd=Ea[1];Gc=Ea[2];dd=Ea[3];if(Lc!==pa[0]||nd!==pa[1]||Gc!==pa[2]||dd!==pa[3])J.stencilOpSeparate(Lc,nd,Gc,dd),pa[0]=Lc,pa[1]=nd,pa[2]=Gc,pa[3]=dd;Pc=H[0];kd=H[1];Bb=H[2];Fb=H[3];if(Pc!==sa[0]||kd!==sa[1]||Bb!==sa[2]||Fb!==sa[3])J.stencilOpSeparate(Pc,kd,Bb,Fb),sa[0]=Pc,sa[1]=kd,sa[2]=Bb,sa[3]=Fb}J.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,
771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(d=N.profile)r=performance.now(),K.count+=m;J.useProgram(O.program);M=oa.angle_instanced_arrays;var tc,xb,wc,Cb,Jc;Ca.setVAO(null);tc=D.location;xb=T[tc];xb.buffer||J.enableVertexAttribArray(tc);if(5126!==xb.type||1!==xb.size||xb.buffer!==g||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)J.bindBuffer(34962,g.buffer),
J.vertexAttribPointer(tc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=g,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(M.vertexAttribDivisorANGLE(tc,0),xb.divisor=0);wc=c.location;Cb=T[wc];Cb.buffer||J.enableVertexAttribArray(wc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==k||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)J.bindBuffer(34962,k.buffer),J.vertexAttribPointer(wc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=k,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&
(M.vertexAttribDivisorANGLE(wc,0),Cb.divisor=0);(Jc=Q.elements)?J.bindBuffer(34963,Jc.buffer.buffer):Ca.currentVAO&&(Jc=za.getElements(Ca.currentVAO.elements))&&J.bindBuffer(34963,Jc.buffer.buffer);for(A=0;A<m;++A){u=b[A];var lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,
rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc;lc=u.viewport;Hc=lc.x|0;Wc=lc.y|0;Vc="width"in lc?lc.width|0:l.framebufferWidth-Hc;Dc="height"in lc?lc.height|0:l.framebufferHeight-Wc;dc=l.viewportWidth;l.viewportWidth=Vc;Ic=l.viewportHeight;l.viewportHeight=Dc;J.viewport(Hc,Wc,Vc,Dc);Ja[0]=Hc;Ja[1]=Wc;Ja[2]=Vc;Ja[3]=Dc;(oc=ja.call(this,l,u,A))?J.enable(2929):J.disable(2929);N.depth_enable=oc;pc=
u.viewport;mc=pc.x|0;ec=pc.y|0;$a="width"in pc?pc.width|0:l.framebufferWidth-mc;Fc="height"in pc?pc.height|0:l.framebufferHeight-ec;J.scissor(mc,ec,$a,Fc);td[0]=mc;td[1]=ec;td[2]=$a;td[3]=Fc;ua.buffer=u.positionBuffer;yb=!1;cb=null;Nb=0;ab=!1;Va=ob=0;vd=1;Ib=0;Jb=5126;Gb=jb=Ob=qc=0;da(ua)?(yb=!0,cb=x.createStream(34962,ua),Jb=cb.dtype):(cb=x.getBuffer(ua))?Jb=cb.dtype:"constant"in ua?(vd=2,"number"===typeof ua.constant?(Ob=ua.constant,jb=Gb=qc=0):(Ob=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?
ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,qc=3<ua.constant.length?ua.constant[3]:0)):(cb=da(ua.buffer)?x.createStream(34962,ua.buffer):x.getBuffer(ua.buffer),Jb="type"in ua?la[ua.type]:cb.dtype,ab=!!ua.normalized,Va=ua.size|0,ob=ua.offset|0,Ib=ua.stride|0,Nb=ua.divisor|0);Db=f.location;wb=T[Db];if(1===vd){wb.buffer||J.enableVertexAttribArray(Db);hb=Va||2;if(wb.type!==Jb||wb.size!==hb||wb.buffer!==cb||wb.normalized!==ab||wb.offset!==ob||wb.stride!==Ib)J.bindBuffer(34962,cb.buffer),
J.vertexAttribPointer(Db,hb,Jb,ab,Ib,ob),wb.type=Jb,wb.size=hb,wb.buffer=cb,wb.normalized=ab,wb.offset=ob,wb.stride=Ib;wb.divisor!==Nb&&(M.vertexAttribDivisorANGLE(Db,Nb),wb.divisor=Nb)}else if(wb.buffer&&(J.disableVertexAttribArray(Db),wb.buffer=null),wb.x!==Ob||wb.y!==jb||wb.z!==Gb||wb.w!==qc)J.vertexAttrib4f(Db,Ob,jb,Gb,qc),wb.x=Ob,wb.y=jb,wb.z=Gb,wb.w=qc;Ba.buffer=u.positionBuffer;Yb=!1;Pb=null;qb=0;Sa=!1;zb=Ub=0;ic=1;ib=0;pb=5126;fb=Ka=rb=Ha=0;da(Ba)?(Yb=!0,Pb=x.createStream(34962,Ba),pb=Pb.dtype):
(Pb=x.getBuffer(Ba))?pb=Pb.dtype:"constant"in Ba?(ic=2,"number"===typeof Ba.constant?(rb=Ba.constant,Ka=fb=Ha=0):(rb=0<Ba.constant.length?Ba.constant[0]:0,Ka=1<Ba.constant.length?Ba.constant[1]:0,fb=2<Ba.constant.length?Ba.constant[2]:0,Ha=3<Ba.constant.length?Ba.constant[3]:0)):(Pb=da(Ba.buffer)?x.createStream(34962,Ba.buffer):x.getBuffer(Ba.buffer),pb="type"in Ba?la[Ba.type]:Pb.dtype,Sa=!!Ba.normalized,zb=Ba.size|0,Ub=Ba.offset|0,ib=Ba.stride|0,qb=Ba.divisor|0);gb=h.location;La=T[gb];if(1===ic){La.buffer||
J.enableVertexAttribArray(gb);kb=zb||2;if(La.type!==pb||La.size!==kb||La.buffer!==Pb||La.normalized!==Sa||La.offset!==Ub||La.stride!==ib)J.bindBuffer(34962,Pb.buffer),J.vertexAttribPointer(gb,kb,pb,Sa,ib,Ub),La.type=pb,La.size=kb,La.buffer=Pb,La.normalized=Sa,La.offset=Ub,La.stride=ib;La.divisor!==qb&&(M.vertexAttribDivisorANGLE(gb,qb),La.divisor=qb)}else if(La.buffer&&(J.disableVertexAttribArray(gb),La.buffer=null),La.x!==rb||La.y!==Ka||La.z!==fb||La.w!==Ha)J.vertexAttrib4f(gb,rb,Ka,fb,Ha),La.x=
rb,La.y=Ka,La.z=fb,La.w=Ha;mb.buffer=u.positionBuffer;Wa=!1;tb=null;sb=0;Pa=!1;Ra=Bc=0;Kb=1;Eb=0;Na=5126;Mb=Lb=Ya=yd=0;da(mb)?(Wa=!0,tb=x.createStream(34962,mb),Na=tb.dtype):(tb=x.getBuffer(mb))?Na=tb.dtype:"constant"in mb?(Kb=2,"number"===typeof mb.constant?(Ya=mb.constant,Lb=Mb=yd=0):(Ya=0<mb.constant.length?mb.constant[0]:0,Lb=1<mb.constant.length?mb.constant[1]:0,Mb=2<mb.constant.length?mb.constant[2]:0,yd=3<mb.constant.length?mb.constant[3]:0)):(tb=da(mb.buffer)?x.createStream(34962,mb.buffer):
x.getBuffer(mb.buffer),Na="type"in mb?la[mb.type]:tb.dtype,Pa=!!mb.normalized,Ra=mb.size|0,Bc=mb.offset|0,Eb=mb.stride|0,sb=mb.divisor|0);lb=xa.location;Oa=T[lb];if(1===Kb){Oa.buffer||J.enableVertexAttribArray(lb);Zb=Ra||2;if(Oa.type!==Na||Oa.size!==Zb||Oa.buffer!==tb||Oa.normalized!==Pa||Oa.offset!==Bc||Oa.stride!==Eb)J.bindBuffer(34962,tb.buffer),J.vertexAttribPointer(lb,Zb,Na,Pa,Eb,Bc),Oa.type=Na,Oa.size=Zb,Oa.buffer=tb,Oa.normalized=Pa,Oa.offset=Bc,Oa.stride=Eb;Oa.divisor!==sb&&(M.vertexAttribDivisorANGLE(lb,
sb),Oa.divisor=sb)}else if(Oa.buffer&&(J.disableVertexAttribArray(lb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Lb||Oa.z!==Mb||Oa.w!==yd)J.vertexAttrib4f(lb,Ya,Lb,Mb,yd),Oa.x=Ya,Oa.y=Lb,Oa.z=Mb,Oa.w=yd;ea.buffer=u.positionBuffer;Qa=!1;ub=null;vb=0;Ta=!1;fc=nb=0;zc=1;uc=0;bb=5126;Mc=Xa=gd=jc=0;da(ea)?(Qa=!0,ub=x.createStream(34962,ea),bb=ub.dtype):(ub=x.getBuffer(ea))?bb=ub.dtype:"constant"in ea?(zc=2,"number"===typeof ea.constant?(gd=ea.constant,Xa=Mc=jc=0):(gd=0<ea.constant.length?ea.constant[0]:0,Xa=1<
ea.constant.length?ea.constant[1]:0,Mc=2<ea.constant.length?ea.constant[2]:0,jc=3<ea.constant.length?ea.constant[3]:0)):(ub=da(ea.buffer)?x.createStream(34962,ea.buffer):x.getBuffer(ea.buffer),bb="type"in ea?la[ea.type]:ub.dtype,Ta=!!ea.normalized,fc=ea.size|0,nb=ea.offset|0,uc=ea.stride|0,vb=ea.divisor|0);Ab=na.location;Za=T[Ab];if(1===zc){Za.buffer||J.enableVertexAttribArray(Ab);Vb=fc||2;if(Za.type!==bb||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Ta||Za.offset!==nb||Za.stride!==uc)J.bindBuffer(34962,
ub.buffer),J.vertexAttribPointer(Ab,Vb,bb,Ta,uc,nb),Za.type=bb,Za.size=Vb,Za.buffer=ub,Za.normalized=Ta,Za.offset=nb,Za.stride=uc;Za.divisor!==vb&&(M.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&(J.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==gd||Za.y!==Xa||Za.z!==Mc||Za.w!==jc)J.vertexAttrib4f(Ab,gd,Xa,Mc,jc),Za.x=gd,Za.y=Xa,Za.z=Mc,Za.w=jc;aa.buffer=u.colorBuffer;sc=!1;Wb=null;Qb=0;Kc=!1;Qd=Rb=0;Ec=1;Ed=0;Nc=5126;vc=nc=od=ed=0;da(aa)?(sc=!0,Wb=x.createStream(34962,aa),
Nc=Wb.dtype):(Wb=x.getBuffer(aa))?Nc=Wb.dtype:"constant"in aa?(Ec=2,"number"===typeof aa.constant?(od=aa.constant,nc=vc=ed=0):(od=0<aa.constant.length?aa.constant[0]:0,nc=1<aa.constant.length?aa.constant[1]:0,vc=2<aa.constant.length?aa.constant[2]:0,ed=3<aa.constant.length?aa.constant[3]:0)):(Wb=da(aa.buffer)?x.createStream(34962,aa.buffer):x.getBuffer(aa.buffer),Nc="type"in aa?la[aa.type]:Wb.dtype,Kc=!!aa.normalized,Qd=aa.size|0,Rb=aa.offset|0,Ed=aa.stride|0,Qb=aa.divisor|0);gc=V.location;db=T[gc];
if(1===Ec){db.buffer||J.enableVertexAttribArray(gc);rc=Qd||4;if(db.type!==Nc||db.size!==rc||db.buffer!==Wb||db.normalized!==Kc||db.offset!==Rb||db.stride!==Ed)J.bindBuffer(34962,Wb.buffer),J.vertexAttribPointer(gc,rc,Nc,Kc,Ed,Rb),db.type=Nc,db.size=rc,db.buffer=Wb,db.normalized=Kc,db.offset=Rb,db.stride=Ed;db.divisor!==Qb&&(M.vertexAttribDivisorANGLE(gc,Qb),db.divisor=Qb)}else if(db.buffer&&(J.disableVertexAttribArray(gc),db.buffer=null),db.x!==od||db.y!==nc||db.z!==vc||db.w!==ed)J.vertexAttrib4f(gc,
od,nc,vc,ed),db.x=od,db.y=nc,db.z=vc,db.w=ed;Ia.buffer=u.colorBuffer;Tb=!1;Xb=null;cc=0;hc=!1;Ac=xc=0;ad=1;Qc=0;Rc=5126;bd=wd=Xc=Sc=0;da(Ia)?(Tb=!0,Xb=x.createStream(34962,Ia),Rc=Xb.dtype):(Xb=x.getBuffer(Ia))?Rc=Xb.dtype:"constant"in Ia?(ad=2,"number"===typeof Ia.constant?(Xc=Ia.constant,wd=bd=Sc=0):(Xc=0<Ia.constant.length?Ia.constant[0]:0,wd=1<Ia.constant.length?Ia.constant[1]:0,bd=2<Ia.constant.length?Ia.constant[2]:0,Sc=3<Ia.constant.length?Ia.constant[3]:0)):(Xb=da(Ia.buffer)?x.createStream(34962,
Ia.buffer):x.getBuffer(Ia.buffer),Rc="type"in Ia?la[Ia.type]:Xb.dtype,hc=!!Ia.normalized,Ac=Ia.size|0,xc=Ia.offset|0,Qc=Ia.stride|0,cc=Ia.divisor|0);Yc=ba.location;kc=T[Yc];if(1===ad){kc.buffer||J.enableVertexAttribArray(Yc);bc=Ac||4;if(kc.type!==Rc||kc.size!==bc||kc.buffer!==Xb||kc.normalized!==hc||kc.offset!==xc||kc.stride!==Qc)J.bindBuffer(34962,Xb.buffer),J.vertexAttribPointer(Yc,bc,Rc,hc,Qc,xc),kc.type=Rc,kc.size=bc,kc.buffer=Xb,kc.normalized=hc,kc.offset=xc,kc.stride=Qc;kc.divisor!==cc&&(M.vertexAttribDivisorANGLE(Yc,
cc),kc.divisor=cc)}else if(kc.buffer&&(J.disableVertexAttribArray(Yc),kc.buffer=null),kc.x!==Xc||kc.y!==wd||kc.z!==bd||kc.w!==Sc)J.vertexAttrib4f(Yc,Xc,wd,bd,Sc),kc.x=Xc,kc.y=wd,kc.z=bd,kc.w=Sc;Zc=u.scale;Uc=Zc[0];yc=Zc[1];A&&cd===Uc&&hd===yc||(cd=Uc,hd=yc,J.uniform2f(Cc.location,Uc,yc));pd=u.translate;ye=pd[0];id=pd[1];A&&Ne===ye&&Fa===id||(Ne=ye,Fa=id,J.uniform2f(fa.location,ye,id));Nd=u.thickness;A&&Xd===Nd||(Xd=Nd,J.uniform1f(Y.location,Nd));de=u.depth;A&&Od===de||(Od=de,J.uniform1f(E.location,
de));Kd=e.call(this,l,u,A);Id=Kd[0];Tc=Kd[1];sd=Kd[2];xd=Kd[3];A&&md===Id&&ud===Tc&&jd===sd&&Cd===xd||(md=Id,ud=Tc,jd=sd,Cd=xd,J.uniform4f(P.location,Id,Tc,sd,xd));Fd=u.miterLimit;A&&oe===Fd||(oe=Fd,J.uniform1f(t.location,Fd));qe=C.call(this,l,u,A);A&&ue===qe||(ue=qe,J.uniform1f(a.location,qe));je=u.dashLength;A&&ie===je||(ie=je,J.uniform1f(z.location,je));he=u.opacity;A&&ve===he||(ve=he,J.uniform1f(y.location,he));(ee=u.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);le=ee._texture;
J.uniform1i(ca.location,le.bind());Oc=u.count;0<Oc?Jc?M.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):M.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?J.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):J.drawArrays(5,0,4));l.viewportWidth=dc;l.viewportHeight=Ic;yb&&x.destroyStream(cb);Yb&&x.destroyStream(Pb);Wa&&x.destroyStream(tb);Qa&&x.destroyStream(ub);sc&&x.destroyStream(Wb);Tb&&x.destroyStream(Xb);le.unbind()}N.dirty=!0;Ca.setVAO(null);d&&(K.cpuTime+=performance.now()-r)},draw:function(e){var n,
d,C,r,u,A,w,ya,B,O,wa,ra,G,L,U,W,Z,qa,va,Da,ma,ja,X,Zd,Bd,ia,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd;n=q.next;n!==q.cur&&(n?J.bindFramebuffer(36160,n.framebuffer):J.bindFramebuffer(36160,null),q.cur=n);if(N.dirty){var Ec,Ed,Nc,ed,od,nc,vc,gc,db,
rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc;Ec=S.dither;Ec!==N.dither&&(Ec?J.enable(3024):J.disable(3024),N.dither=Ec);Ed=S.depth_func;Ed!==N.depth_func&&(J.depthFunc(Ed),N.depth_func=Ed);Nc=eb[0];ed=eb[1];if(Nc!==Ua[0]||ed!==Ua[1])J.depthRange(Nc,ed),Ua[0]=Nc,Ua[1]=ed;od=S.depth_mask;od!==N.depth_mask&&(J.depthMask(od),N.depth_mask=od);nc=Ma[0];vc=Ma[1];gc=Ma[2];db=Ma[3];if(nc!==F[0]||vc!==F[1]||gc!==F[2]||db!==F[3])J.colorMask(nc,vc,gc,db),F[0]=nc,F[1]=vc,F[2]=gc,F[3]=db;rc=S.frontFace;
rc!==N.frontFace&&(J.frontFace(rc),N.frontFace=rc);Tb=S.lineWidth;Tb!==N.lineWidth&&(J.lineWidth(Tb),N.lineWidth=Tb);Xb=S.polygonOffset_enable;Xb!==N.polygonOffset_enable&&(Xb?J.enable(32823):J.disable(32823),N.polygonOffset_enable=Xb);cc=v[0];hc=v[1];if(cc!==p[0]||hc!==p[1])J.polygonOffset(cc,hc),p[0]=cc,p[1]=hc;xc=S.sample_alpha;xc!==N.sample_alpha&&(xc?J.enable(32926):J.disable(32926),N.sample_alpha=xc);Ac=S.sample_enable;Ac!==N.sample_enable&&(Ac?J.enable(32928):J.disable(32928),N.sample_enable=
Ac);ad=R[0];Qc=R[1];if(ad!==ta[0]||Qc!==ta[1])J.sampleCoverage(ad,Qc),ta[0]=ad,ta[1]=Qc;Rc=S.stencil_mask;Rc!==N.stencil_mask&&(J.stencilMask(Rc),N.stencil_mask=Rc);Sc=Hb[0];Xc=Hb[1];wd=Hb[2];if(Sc!==ha[0]||Xc!==ha[1]||wd!==ha[2])J.stencilFunc(Sc,Xc,wd),ha[0]=Sc,ha[1]=Xc,ha[2]=wd;bd=Ea[0];Yc=Ea[1];kc=Ea[2];bc=Ea[3];if(bd!==pa[0]||Yc!==pa[1]||kc!==pa[2]||bc!==pa[3])J.stencilOpSeparate(bd,Yc,kc,bc),pa[0]=bd,pa[1]=Yc,pa[2]=kc,pa[3]=bc;Zc=H[0];Uc=H[1];cd=H[2];yc=H[3];if(Zc!==sa[0]||Uc!==sa[1]||cd!==sa[2]||
yc!==sa[3])J.stencilOpSeparate(Zc,Uc,cd,yc),sa[0]=Zc,sa[1]=Uc,sa[2]=cd,sa[3]=yc}d=e.viewport;C=d.x|0;r=d.y|0;u="width"in d?d.width|0:l.framebufferWidth-C;A="height"in d?d.height|0:l.framebufferHeight-r;w=l.viewportWidth;l.viewportWidth=u;ya=l.viewportHeight;l.viewportHeight=A;J.viewport(C,r,u,A);Ja[0]=C;Ja[1]=r;Ja[2]=u;Ja[3]=A;J.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,
771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;(B=I.call(this,l,e,0))?J.enable(2929):J.disable(2929);N.depth_enable=B;O=e.viewport;wa=O.x|0;ra=O.y|0;G="width"in O?O.width|0:l.framebufferWidth-wa;L="height"in O?O.height|0:l.framebufferHeight-ra;J.scissor(wa,ra,G,L);td[0]=wa;td[1]=ra;td[2]=G;td[3]=L;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(U=N.profile)W=performance.now(),K.count++;J.useProgram(M.program);
Z=oa.angle_instanced_arrays;Ca.setVAO(null);ua.buffer=e.positionBuffer;qa=!1;va=null;Da=0;ma=!1;X=ja=0;Zd=1;Bd=0;ia=5126;Lc=rd=$c=ld=0;da(ua)?(qa=!0,va=x.createStream(34962,ua),ia=va.dtype):(va=x.getBuffer(ua))?ia=va.dtype:"constant"in ua?(Zd=2,"number"===typeof ua.constant?($c=ua.constant,rd=Lc=ld=0):($c=0<ua.constant.length?ua.constant[0]:0,rd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,ld=3<ua.constant.length?ua.constant[3]:0)):(va=da(ua.buffer)?x.createStream(34962,
ua.buffer):x.getBuffer(ua.buffer),ia="type"in ua?la[ua.type]:va.dtype,ma=!!ua.normalized,X=ua.size|0,ja=ua.offset|0,Bd=ua.stride|0,Da=ua.divisor|0);nd=f.location;Gc=T[nd];if(1===Zd){Gc.buffer||J.enableVertexAttribArray(nd);dd=X||2;if(Gc.type!==ia||Gc.size!==dd||Gc.buffer!==va||Gc.normalized!==ma||Gc.offset!==ja||Gc.stride!==Bd)J.bindBuffer(34962,va.buffer),J.vertexAttribPointer(nd,dd,ia,ma,Bd,ja),Gc.type=ia,Gc.size=dd,Gc.buffer=va,Gc.normalized=ma,Gc.offset=ja,Gc.stride=Bd;Gc.divisor!==Da&&(Z.vertexAttribDivisorANGLE(nd,
Da),Gc.divisor=Da)}else if(Gc.buffer&&(J.disableVertexAttribArray(nd),Gc.buffer=null),Gc.x!==$c||Gc.y!==rd||Gc.z!==Lc||Gc.w!==ld)J.vertexAttrib4f(nd,$c,rd,Lc,ld),Gc.x=$c,Gc.y=rd,Gc.z=Lc,Gc.w=ld;Ba.buffer=e.positionBuffer;Pc=!1;kd=null;Bb=0;Fb=!1;xb=tc=0;wc=1;Cb=0;Jc=5126;Vc=Wc=Hc=lc=0;da(Ba)?(Pc=!0,kd=x.createStream(34962,Ba),Jc=kd.dtype):(kd=x.getBuffer(Ba))?Jc=kd.dtype:"constant"in Ba?(wc=2,"number"===typeof Ba.constant?(Hc=Ba.constant,Wc=Vc=lc=0):(Hc=0<Ba.constant.length?Ba.constant[0]:0,Wc=1<
Ba.constant.length?Ba.constant[1]:0,Vc=2<Ba.constant.length?Ba.constant[2]:0,lc=3<Ba.constant.length?Ba.constant[3]:0)):(kd=da(Ba.buffer)?x.createStream(34962,Ba.buffer):x.getBuffer(Ba.buffer),Jc="type"in Ba?la[Ba.type]:kd.dtype,Fb=!!Ba.normalized,xb=Ba.size|0,tc=Ba.offset|0,Cb=Ba.stride|0,Bb=Ba.divisor|0);Dc=h.location;dc=T[Dc];if(1===wc){dc.buffer||J.enableVertexAttribArray(Dc);Ic=xb||2;if(dc.type!==Jc||dc.size!==Ic||dc.buffer!==kd||dc.normalized!==Fb||dc.offset!==tc||dc.stride!==Cb)J.bindBuffer(34962,
kd.buffer),J.vertexAttribPointer(Dc,Ic,Jc,Fb,Cb,tc),dc.type=Jc,dc.size=Ic,dc.buffer=kd,dc.normalized=Fb,dc.offset=tc,dc.stride=Cb;dc.divisor!==Bb&&(Z.vertexAttribDivisorANGLE(Dc,Bb),dc.divisor=Bb)}else if(dc.buffer&&(J.disableVertexAttribArray(Dc),dc.buffer=null),dc.x!==Hc||dc.y!==Wc||dc.z!==Vc||dc.w!==lc)J.vertexAttrib4f(Dc,Hc,Wc,Vc,lc),dc.x=Hc,dc.y=Wc,dc.z=Vc,dc.w=lc;mb.buffer=e.positionBuffer;oc=!1;pc=null;mc=0;ec=!1;Fc=$a=0;yb=1;cb=0;Nb=5126;vd=Va=ob=ab=0;da(mb)?(oc=!0,pc=x.createStream(34962,
mb),Nb=pc.dtype):(pc=x.getBuffer(mb))?Nb=pc.dtype:"constant"in mb?(yb=2,"number"===typeof mb.constant?(ob=mb.constant,Va=vd=ab=0):(ob=0<mb.constant.length?mb.constant[0]:0,Va=1<mb.constant.length?mb.constant[1]:0,vd=2<mb.constant.length?mb.constant[2]:0,ab=3<mb.constant.length?mb.constant[3]:0)):(pc=da(mb.buffer)?x.createStream(34962,mb.buffer):x.getBuffer(mb.buffer),Nb="type"in mb?la[mb.type]:pc.dtype,ec=!!mb.normalized,Fc=mb.size|0,$a=mb.offset|0,cb=mb.stride|0,mc=mb.divisor|0);Ib=xa.location;Jb=
T[Ib];if(1===yb){Jb.buffer||J.enableVertexAttribArray(Ib);qc=Fc||2;if(Jb.type!==Nb||Jb.size!==qc||Jb.buffer!==pc||Jb.normalized!==ec||Jb.offset!==$a||Jb.stride!==cb)J.bindBuffer(34962,pc.buffer),J.vertexAttribPointer(Ib,qc,Nb,ec,cb,$a),Jb.type=Nb,Jb.size=qc,Jb.buffer=pc,Jb.normalized=ec,Jb.offset=$a,Jb.stride=cb;Jb.divisor!==mc&&(Z.vertexAttribDivisorANGLE(Ib,mc),Jb.divisor=mc)}else if(Jb.buffer&&(J.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==ob||Jb.y!==Va||Jb.z!==vd||Jb.w!==ab)J.vertexAttrib4f(Ib,
ob,Va,vd,ab),Jb.x=ob,Jb.y=Va,Jb.z=vd,Jb.w=ab;ea.buffer=e.positionBuffer;Ob=!1;jb=null;Gb=0;Db=!1;hb=wb=0;Yb=1;Pb=0;qb=5126;ic=zb=Ub=Sa=0;da(ea)?(Ob=!0,jb=x.createStream(34962,ea),qb=jb.dtype):(jb=x.getBuffer(ea))?qb=jb.dtype:"constant"in ea?(Yb=2,"number"===typeof ea.constant?(Ub=ea.constant,zb=ic=Sa=0):(Ub=0<ea.constant.length?ea.constant[0]:0,zb=1<ea.constant.length?ea.constant[1]:0,ic=2<ea.constant.length?ea.constant[2]:0,Sa=3<ea.constant.length?ea.constant[3]:0)):(jb=da(ea.buffer)?x.createStream(34962,
ea.buffer):x.getBuffer(ea.buffer),qb="type"in ea?la[ea.type]:jb.dtype,Db=!!ea.normalized,hb=ea.size|0,wb=ea.offset|0,Pb=ea.stride|0,Gb=ea.divisor|0);ib=na.location;pb=T[ib];if(1===Yb){pb.buffer||J.enableVertexAttribArray(ib);Ha=hb||2;if(pb.type!==qb||pb.size!==Ha||pb.buffer!==jb||pb.normalized!==Db||pb.offset!==wb||pb.stride!==Pb)J.bindBuffer(34962,jb.buffer),J.vertexAttribPointer(ib,Ha,qb,Db,Pb,wb),pb.type=qb,pb.size=Ha,pb.buffer=jb,pb.normalized=Db,pb.offset=wb,pb.stride=Pb;pb.divisor!==Gb&&(Z.vertexAttribDivisorANGLE(ib,
Gb),pb.divisor=Gb)}else if(pb.buffer&&(J.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==ic||pb.w!==Sa)J.vertexAttrib4f(ib,Ub,zb,ic,Sa),pb.x=Ub,pb.y=zb,pb.z=ic,pb.w=Sa;aa.buffer=e.colorBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Wa=1;tb=0;sb=5126;Kb=Ra=Bc=Pa=0;da(aa)?(rb=!0,Ka=x.createStream(34962,aa),sb=Ka.dtype):(Ka=x.getBuffer(aa))?sb=Ka.dtype:"constant"in aa?(Wa=2,"number"===typeof aa.constant?(Bc=aa.constant,Ra=Kb=Pa=0):(Bc=0<aa.constant.length?aa.constant[0]:0,Ra=1<aa.constant.length?
aa.constant[1]:0,Kb=2<aa.constant.length?aa.constant[2]:0,Pa=3<aa.constant.length?aa.constant[3]:0)):(Ka=da(aa.buffer)?x.createStream(34962,aa.buffer):x.getBuffer(aa.buffer),sb="type"in aa?la[aa.type]:Ka.dtype,gb=!!aa.normalized,kb=aa.size|0,La=aa.offset|0,tb=aa.stride|0,fb=aa.divisor|0);Eb=V.location;Na=T[Eb];if(1===Wa){Na.buffer||J.enableVertexAttribArray(Eb);yd=kb||4;if(Na.type!==sb||Na.size!==yd||Na.buffer!==Ka||Na.normalized!==gb||Na.offset!==La||Na.stride!==tb)J.bindBuffer(34962,Ka.buffer),
J.vertexAttribPointer(Eb,yd,sb,gb,tb,La),Na.type=sb,Na.size=yd,Na.buffer=Ka,Na.normalized=gb,Na.offset=La,Na.stride=tb;Na.divisor!==fb&&(Z.vertexAttribDivisorANGLE(Eb,fb),Na.divisor=fb)}else if(Na.buffer&&(J.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Kb||Na.w!==Pa)J.vertexAttrib4f(Eb,Bc,Ra,Kb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Kb,Na.w=Pa;Ia.buffer=e.colorBuffer;Ya=!1;Lb=null;Mb=0;lb=!1;Zb=Oa=0;Qa=1;ub=0;vb=5126;zc=fc=nb=Ta=0;da(Ia)?(Ya=!0,Lb=x.createStream(34962,Ia),vb=Lb.dtype):
(Lb=x.getBuffer(Ia))?vb=Lb.dtype:"constant"in Ia?(Qa=2,"number"===typeof Ia.constant?(nb=Ia.constant,fc=zc=Ta=0):(nb=0<Ia.constant.length?Ia.constant[0]:0,fc=1<Ia.constant.length?Ia.constant[1]:0,zc=2<Ia.constant.length?Ia.constant[2]:0,Ta=3<Ia.constant.length?Ia.constant[3]:0)):(Lb=da(Ia.buffer)?x.createStream(34962,Ia.buffer):x.getBuffer(Ia.buffer),vb="type"in Ia?la[Ia.type]:Lb.dtype,lb=!!Ia.normalized,Zb=Ia.size|0,Oa=Ia.offset|0,ub=Ia.stride|0,Mb=Ia.divisor|0);uc=ba.location;bb=T[uc];if(1===Qa){bb.buffer||
J.enableVertexAttribArray(uc);jc=Zb||4;if(bb.type!==vb||bb.size!==jc||bb.buffer!==Lb||bb.normalized!==lb||bb.offset!==Oa||bb.stride!==ub)J.bindBuffer(34962,Lb.buffer),J.vertexAttribPointer(uc,jc,vb,lb,ub,Oa),bb.type=vb,bb.size=jc,bb.buffer=Lb,bb.normalized=lb,bb.offset=Oa,bb.stride=ub;bb.divisor!==Mb&&(Z.vertexAttribDivisorANGLE(uc,Mb),bb.divisor=Mb)}else if(bb.buffer&&(J.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==nb||bb.y!==fc||bb.z!==zc||bb.w!==Ta)J.vertexAttrib4f(uc,nb,fc,zc,Ta),bb.x=
nb,bb.y=fc,bb.z=zc,bb.w=Ta;gd=D.location;Xa=T[gd];Xa.buffer||J.enableVertexAttribArray(gd);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==g||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)J.bindBuffer(34962,g.buffer),J.vertexAttribPointer(gd,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=g,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(Z.vertexAttribDivisorANGLE(gd,0),Xa.divisor=0);Mc=c.location;Ab=T[Mc];Ab.buffer||J.enableVertexAttribArray(Mc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==
k||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)J.bindBuffer(34962,k.buffer),J.vertexAttribPointer(Mc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=k,Ab.normalized=!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(Z.vertexAttribDivisorANGLE(Mc,0),Ab.divisor=0);Za=e.scale;J.uniform2f(Cc.location,Za[0],Za[1]);Vb=e.translate;J.uniform2f(fa.location,Vb[0],Vb[1]);J.uniform1f(Y.location,e.thickness);J.uniform1f(E.location,e.depth);sc=m.call(this,l,e,0);J.uniform4f(P.location,sc[0],sc[1],sc[2],sc[3]);J.uniform1f(t.location,
e.miterLimit);Wb=b.call(this,l,e,0);J.uniform1f(a.location,Wb);J.uniform1f(z.location,e.dashLength);J.uniform1f(y.location,e.opacity);(Qb=e.dashTexture)&&"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;J.uniform1i(ca.location,Kc.bind());(Rb=Q.elements)?J.bindBuffer(34963,Rb.buffer.buffer):Ca.currentVAO&&(Rb=za.getElements(Ca.currentVAO.elements))&&J.bindBuffer(34963,Rb.buffer.buffer);Qd=e.count;0<Qd?Rb?Z.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),Qd):Z.drawArraysInstancedANGLE(5,
0,4,Qd):0>Qd&&(Rb?J.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):J.drawArrays(5,0,4));N.dirty=!0;Ca.setVAO(null);l.viewportWidth=w;l.viewportHeight=ya;U&&(K.cpuTime+=performance.now()-W);qa&&x.destroyStream(va);Pc&&x.destroyStream(kd);oc&&x.destroyStream(pc);Ob&&x.destroyStream(jb);rb&&x.destroyStream(Ka);Ya&&x.destroyStream(Lb);Kc.unbind()},scope:function(a,c,b){var e,f,v,h,q,p,F,H,m,t,R,d,y,C,z,sa,Ma,J,Ea,T,eb,pa,ga,ha,P,E,M,D,ta,I,O,Ja,za,V,ka,Ua,Y,ba,Aa,fa,ja,Hb,oa,ca,xa,na,Ca,td,Cc,X,ec,$a,
Fc,yb,cb,Nb,ab,ob,Va,ia,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Fa,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,
We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;e=a.viewport;f=e.x|0;v=e.y|0;h="width"in e?e.width|0:l.framebufferWidth-f;q="height"in e?e.height|0:l.framebufferHeight-v;p=l.viewportWidth;l.viewportWidth=h;F=l.viewportHeight;l.viewportHeight=q;H=ya[0];ya[0]=f;m=ya[1];ya[1]=v;t=ya[2];ya[2]=h;R=ya[3];ya[3]=q;d=wa[0];wa[0]=0;y=wa[1];wa[1]=0;C=wa[2];wa[2]=0;z=wa[3];wa[3]=0;sa=S.blend_enable;S.blend_enable=!0;Ma=Da[0];Da[0]=32774;J=Da[1];Da[1]=32774;Ea=qa[0];qa[0]=
770;T=qa[1];qa[1]=771;eb=qa[2];qa[2]=773;pa=qa[3];qa[3]=1;ga=S.cull_enable;S.cull_enable=!0;ha=S.cull_face;S.cull_face=1029;P=G.call(this,l,a,b);E=S.depth_enable;S.depth_enable=P;M=a.viewport;D=M.x|0;ta=M.y|0;I="width"in M?M.width|0:l.framebufferWidth-D;O="height"in M?M.height|0:l.framebufferHeight-ta;Ja=va[0];va[0]=D;za=va[1];va[1]=ta;V=va[2];va[2]=I;ka=va[3];va[3]=O;Ua=S.scissor_enable;S.scissor_enable=!0;Y=S.stencil_enable;S.stencil_enable=!1;if(ba=N.profile)Aa=performance.now(),K.count++;fa=Q.offset;
Q.offset=0;ja=Q.count;Q.count=4;Hb=a.count;oa=Q.instances;Q.instances=Hb;ca=Q.primitive;Q.primitive=5;xa=a.dashLength;na=ra[23];ra[23]=xa;Ca=a.dashTexture;td=ra[24];ra[24]=Ca;Cc=a.depth;X=ra[22];ra[22]=Cc;ec=a.id;$a=ra[31];ra[31]=ec;Fc=a.miterLimit;yb=ra[32];ra[32]=Fc;cb=B.call(this,l,a,b);Nb=ra[33];ra[33]=cb;ab=a.opacity;ob=ra[10];ra[10]=ab;Va=l.pixelRatio;ia=ra[34];ra[34]=Va;Ib=a.scale;Jb=ra[6];ra[6]=Ib;qc=a.scaleFract;Ob=ra[7];ra[7]=qc;jb=a.thickness;Gb=ra[21];ra[21]=jb;Db=a.translate;wb=ra[8];
ra[8]=Db;hb=a.translateFract;Yb=ra[9];ra[9]=hb;Pb=L.call(this,l,a,b);qb=ra[3];ra[3]=Pb;aa.buffer=a.colorBuffer;Sa=!1;Ub=null;zb=0;ic=!1;pb=ib=0;Ha=1;rb=0;Ka=5126;kb=La=gb=fb=0;da(aa)?(Sa=!0,Ub=x.createStream(34962,aa),Ka=Ub.dtype):(Ub=x.getBuffer(aa))?Ka=Ub.dtype:"constant"in aa?(Ha=2,"number"===typeof aa.constant?(gb=aa.constant,La=kb=fb=0):(gb=0<aa.constant.length?aa.constant[0]:0,La=1<aa.constant.length?aa.constant[1]:0,kb=2<aa.constant.length?aa.constant[2]:0,fb=3<aa.constant.length?aa.constant[3]:
0)):(Ub=da(aa.buffer)?x.createStream(34962,aa.buffer):x.getBuffer(aa.buffer),Ka="type"in aa?la[aa.type]:Ub.dtype,ic=!!aa.normalized,pb=aa.size|0,ib=aa.offset|0,rb=aa.stride|0,zb=aa.divisor|0);Wa=W.buffer;W.buffer=Ub;tb=W.divisor;W.divisor=zb;sb=W.normalized;W.normalized=ic;Pa=W.offset;W.offset=ib;Bc=W.size;W.size=pb;Ra=W.state;W.state=Ha;Kb=W.stride;W.stride=rb;Eb=W.type;W.type=Ka;Na=W.w;W.w=fb;yd=W.x;W.x=gb;Ya=W.y;W.y=La;Lb=W.z;W.z=kb;ua.buffer=a.positionBuffer;Mb=!1;lb=null;Oa=0;Zb=!1;ub=Qa=0;vb=
1;Ta=0;nb=5126;bb=uc=zc=fc=0;da(ua)?(Mb=!0,lb=x.createStream(34962,ua),nb=lb.dtype):(lb=x.getBuffer(ua))?nb=lb.dtype:"constant"in ua?(vb=2,"number"===typeof ua.constant?(zc=ua.constant,uc=bb=fc=0):(zc=0<ua.constant.length?ua.constant[0]:0,uc=1<ua.constant.length?ua.constant[1]:0,bb=2<ua.constant.length?ua.constant[2]:0,fc=3<ua.constant.length?ua.constant[3]:0)):(lb=da(ua.buffer)?x.createStream(34962,ua.buffer):x.getBuffer(ua.buffer),nb="type"in ua?la[ua.type]:lb.dtype,Zb=!!ua.normalized,ub=ua.size|
0,Qa=ua.offset|0,Ta=ua.stride|0,Oa=ua.divisor|0);jc=u.buffer;u.buffer=lb;gd=u.divisor;u.divisor=Oa;Xa=u.normalized;u.normalized=Zb;Mc=u.offset;u.offset=Qa;Ab=u.size;u.size=ub;Za=u.state;u.state=vb;Vb=u.stride;u.stride=Ta;sc=u.type;u.type=nb;Wb=u.w;u.w=fc;Qb=u.x;u.x=zc;Kc=u.y;u.y=uc;Rb=u.z;u.z=bb;Ia.buffer=a.colorBuffer;Qd=!1;Ec=null;Ed=0;Nc=!1;od=ed=0;nc=1;vc=0;gc=5126;Xb=Tb=rc=db=0;da(Ia)?(Qd=!0,Ec=x.createStream(34962,Ia),gc=Ec.dtype):(Ec=x.getBuffer(Ia))?gc=Ec.dtype:"constant"in Ia?(nc=2,"number"===
typeof Ia.constant?(rc=Ia.constant,Tb=Xb=db=0):(rc=0<Ia.constant.length?Ia.constant[0]:0,Tb=1<Ia.constant.length?Ia.constant[1]:0,Xb=2<Ia.constant.length?Ia.constant[2]:0,db=3<Ia.constant.length?Ia.constant[3]:0)):(Ec=da(Ia.buffer)?x.createStream(34962,Ia.buffer):x.getBuffer(Ia.buffer),gc="type"in Ia?la[Ia.type]:Ec.dtype,Nc=!!Ia.normalized,od=Ia.size|0,ed=Ia.offset|0,vc=Ia.stride|0,Ed=Ia.divisor|0);cc=A.buffer;A.buffer=Ec;hc=A.divisor;A.divisor=Ed;xc=A.normalized;A.normalized=Nc;Ac=A.offset;A.offset=
ed;ad=A.size;A.size=od;Qc=A.state;A.state=nc;Rc=A.stride;A.stride=vc;Sc=A.type;A.type=gc;Xc=A.w;A.w=db;wd=A.x;A.x=rc;bd=A.y;A.y=Tb;Yc=A.z;A.z=Xb;Ba.buffer=a.positionBuffer;kc=!1;bc=null;Zc=0;Uc=!1;yc=cd=0;hd=1;pd=0;ye=5126;Nd=mf=id=Fa=0;da(Ba)?(kc=!0,bc=x.createStream(34962,Ba),ye=bc.dtype):(bc=x.getBuffer(Ba))?ye=bc.dtype:"constant"in Ba?(hd=2,"number"===typeof Ba.constant?(id=Ba.constant,mf=Nd=Fa=0):(id=0<Ba.constant.length?Ba.constant[0]:0,mf=1<Ba.constant.length?Ba.constant[1]:0,Nd=2<Ba.constant.length?
Ba.constant[2]:0,Fa=3<Ba.constant.length?Ba.constant[3]:0)):(bc=da(Ba.buffer)?x.createStream(34962,Ba.buffer):x.getBuffer(Ba.buffer),ye="type"in Ba?la[Ba.type]:bc.dtype,Uc=!!Ba.normalized,yc=Ba.size|0,cd=Ba.offset|0,pd=Ba.stride|0,Zc=Ba.divisor|0);Xd=w.buffer;w.buffer=bc;de=w.divisor;w.divisor=Zc;Od=w.normalized;w.normalized=Uc;Kd=w.offset;w.offset=cd;Id=w.size;w.size=yc;md=w.state;w.state=hd;Tc=w.stride;w.stride=pd;ud=w.type;w.type=ye;sd=w.w;w.w=Fa;jd=w.x;w.x=id;xd=w.y;w.y=mf;Cd=w.z;w.z=Nd;Fd=Z.buffer;
Z.buffer=g;oe=Z.divisor;Z.divisor=0;qe=Z.normalized;Z.normalized=!1;ue=Z.offset;Z.offset=0;je=Z.size;Z.size=0;ie=Z.state;Z.state=1;he=Z.stride;Z.stride=8;ve=Z.type;Z.type=5126;ee=Z.w;Z.w=0;le=Z.x;Z.x=0;Oc=Z.y;Z.y=0;fd=Z.z;Z.z=0;we=r.buffer;r.buffer=k;pe=r.divisor;r.divisor=0;Ld=r.normalized;r.normalized=!1;Pd=r.offset;r.offset=4;Rd=r.size;r.size=0;Sd=r.state;r.state=1;me=r.stride;r.stride=8;He=r.type;r.type=5126;Be=r.w;r.w=0;re=r.x;r.x=0;Se=r.y;r.y=0;Te=r.z;r.z=0;mb.buffer=a.positionBuffer;Oe=!1;
xe=null;Fe=0;Ie=!1;Ke=Je=0;Ge=1;Md=0;Yd=5126;Jd=Le=fe=ce=0;da(mb)?(Oe=!0,xe=x.createStream(34962,mb),Yd=xe.dtype):(xe=x.getBuffer(mb))?Yd=xe.dtype:"constant"in mb?(Ge=2,"number"===typeof mb.constant?(fe=mb.constant,Le=Jd=ce=0):(fe=0<mb.constant.length?mb.constant[0]:0,Le=1<mb.constant.length?mb.constant[1]:0,Jd=2<mb.constant.length?mb.constant[2]:0,ce=3<mb.constant.length?mb.constant[3]:0)):(xe=da(mb.buffer)?x.createStream(34962,mb.buffer):x.getBuffer(mb.buffer),Yd="type"in mb?la[mb.type]:xe.dtype,
Ie=!!mb.normalized,Ke=mb.size|0,Je=mb.offset|0,Md=mb.stride|0,Fe=mb.divisor|0);Td=U.buffer;U.buffer=xe;De=U.divisor;U.divisor=Fe;Me=U.normalized;U.normalized=Ie;bf=U.offset;U.offset=Je;af=U.size;U.size=Ke;Ue=U.state;U.state=Ge;Pe=U.stride;U.stride=Md;$e=U.type;U.type=Yd;Ye=U.w;U.w=ce;Ve=U.x;U.x=fe;We=U.y;U.y=Le;Ud=U.z;U.z=Jd;ea.buffer=a.positionBuffer;ae=!1;Xe=null;hf=0;nf=!1;jf=ef=0;kf=1;lf=0;rf=5126;Cf=Bf=sf=of=0;da(ea)?(ae=!0,Xe=x.createStream(34962,ea),rf=Xe.dtype):(Xe=x.getBuffer(ea))?rf=Xe.dtype:
"constant"in ea?(kf=2,"number"===typeof ea.constant?(sf=ea.constant,Bf=Cf=of=0):(sf=0<ea.constant.length?ea.constant[0]:0,Bf=1<ea.constant.length?ea.constant[1]:0,Cf=2<ea.constant.length?ea.constant[2]:0,of=3<ea.constant.length?ea.constant[3]:0)):(Xe=da(ea.buffer)?x.createStream(34962,ea.buffer):x.getBuffer(ea.buffer),rf="type"in ea?la[ea.type]:Xe.dtype,nf=!!ea.normalized,jf=ea.size|0,ef=ea.offset|0,lf=ea.stride|0,hf=ea.divisor|0);Qe=n.buffer;n.buffer=Xe;Ee=n.divisor;n.divisor=hf;pf=n.normalized;
n.normalized=nf;qf=n.offset;n.offset=ef;Df=n.size;n.size=jf;Gf=n.state;n.state=kf;Af=n.stride;n.stride=lf;Ef=n.type;n.type=rf;Ff=n.w;n.w=of;wf=n.x;n.x=sf;xf=n.y;n.y=Bf;vf=n.z;n.z=Cf;yf=ma.vert;ma.vert=36;zf=ma.frag;ma.frag=35;N.dirty=!0;c(l,a,b);l.viewportWidth=p;l.viewportHeight=F;ya[0]=H;ya[1]=m;ya[2]=t;ya[3]=R;wa[0]=d;wa[1]=y;wa[2]=C;wa[3]=z;S.blend_enable=sa;Da[0]=Ma;Da[1]=J;qa[0]=Ea;qa[1]=T;qa[2]=eb;qa[3]=pa;S.cull_enable=ga;S.cull_face=ha;S.depth_enable=E;va[0]=Ja;va[1]=za;va[2]=V;va[3]=ka;
S.scissor_enable=Ua;S.stencil_enable=Y;ba&&(K.cpuTime+=performance.now()-Aa);Q.offset=fa;Q.count=ja;Q.instances=oa;Q.primitive=ca;ra[23]=na;ra[24]=td;ra[22]=X;ra[31]=$a;ra[32]=yb;ra[33]=Nb;ra[10]=ob;ra[34]=ia;ra[6]=Jb;ra[7]=Ob;ra[21]=Gb;ra[8]=wb;ra[9]=Yb;ra[3]=qb;Sa&&x.destroyStream(Ub);W.buffer=Wa;W.divisor=tb;W.normalized=sb;W.offset=Pa;W.size=Bc;W.state=Ra;W.stride=Kb;W.type=Eb;W.w=Na;W.x=yd;W.y=Ya;W.z=Lb;Mb&&x.destroyStream(lb);u.buffer=jc;u.divisor=gd;u.normalized=Xa;u.offset=Mc;u.size=Ab;u.state=
Za;u.stride=Vb;u.type=sc;u.w=Wb;u.x=Qb;u.y=Kc;u.z=Rb;Qd&&x.destroyStream(Ec);A.buffer=cc;A.divisor=hc;A.normalized=xc;A.offset=Ac;A.size=ad;A.state=Qc;A.stride=Rc;A.type=Sc;A.w=Xc;A.x=wd;A.y=bd;A.z=Yc;kc&&x.destroyStream(bc);w.buffer=Xd;w.divisor=de;w.normalized=Od;w.offset=Kd;w.size=Id;w.state=md;w.stride=Tc;w.type=ud;w.w=sd;w.x=jd;w.y=xd;w.z=Cd;Z.buffer=Fd;Z.divisor=oe;Z.normalized=qe;Z.offset=ue;Z.size=je;Z.state=ie;Z.stride=he;Z.type=ve;Z.w=ee;Z.x=le;Z.y=Oc;Z.z=fd;r.buffer=we;r.divisor=pe;r.normalized=
Ld;r.offset=Pd;r.size=Rd;r.state=Sd;r.stride=me;r.type=He;r.w=Be;r.x=re;r.y=Se;r.z=Te;Oe&&x.destroyStream(xe);U.buffer=Td;U.divisor=De;U.normalized=Me;U.offset=bf;U.size=af;U.state=Ue;U.stride=Pe;U.type=$e;U.w=Ye;U.x=Ve;U.y=We;U.z=Ud;ae&&x.destroyStream(Xe);n.buffer=Qe;n.divisor=Ee;n.normalized=pf;n.offset=qf;n.size=Df;n.state=Gf;n.stride=Af;n.type=Ef;n.w=Ff;n.x=wf;n.y=xf;n.z=vf;ma.vert=yf;ma.frag=zf;N.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(d,
K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n){var O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,Cc,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa;O=d.attributes;ja=d.buffer;e=d.context;C=d.current;V=d.draw;f=d.elements;ba=d.extensions;h=d.framebuffer;z=d.gl;ca=d.isBufferArgs;E=d.next;D=d.shader;c=d.uniforms;t=d.vao;a=E.blend_color;xa=C.blend_color;y=E.blend_equation;na=C.blend_equation;Cc=E.blend_func;Y=C.blend_func;fa=E.colorMask;P=C.colorMask;T=E.depth_range;x=C.depth_range;l=E.polygonOffset_offset;
N=C.polygonOffset_offset;Q=E.sample_coverage;za=C.sample_coverage;oa=E.scissor_box;q=C.scissor_box;J=E.stencil_func;da=C.stencil_func;S=E.stencil_opBack;ma=C.stencil_opBack;ra=E.stencil_opFront;Ca=C.stencil_opFront;wa=E.viewport;ga=C.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};qa={offset:8,stride:8};return{batch:function(a,c){var b,k,m,v,p,g;b=h.next;b!==h.cur&&(b?z.bindFramebuffer(36160,b.framebuffer):z.bindFramebuffer(36160,
null),h.cur=b);if(C.dirty){var d,y,M,D,ha,H,sa,Ea,pa,ya,I,la,aa,wa,oa,Ba,Cc,ea,X,$b,Ga,ac,Sb,ia,Gd,ke,Wd,ze,Fa,Vd,ne,Ad;d=E.dither;d!==C.dither&&(d?z.enable(3024):z.disable(3024),C.dither=d);y=E.depth_func;y!==C.depth_func&&(z.depthFunc(y),C.depth_func=y);M=T[0];D=T[1];if(M!==x[0]||D!==x[1])z.depthRange(M,D),x[0]=M,x[1]=D;ha=E.depth_mask;ha!==C.depth_mask&&(z.depthMask(ha),C.depth_mask=ha);H=fa[0];sa=fa[1];Ea=fa[2];pa=fa[3];if(H!==P[0]||sa!==P[1]||Ea!==P[2]||pa!==P[3])z.colorMask(H,sa,Ea,pa),P[0]=
H,P[1]=sa,P[2]=Ea,P[3]=pa;ya=E.cull_enable;ya!==C.cull_enable&&(ya?z.enable(2884):z.disable(2884),C.cull_enable=ya);I=E.cull_face;I!==C.cull_face&&(z.cullFace(I),C.cull_face=I);la=E.frontFace;la!==C.frontFace&&(z.frontFace(la),C.frontFace=la);aa=E.lineWidth;aa!==C.lineWidth&&(z.lineWidth(aa),C.lineWidth=aa);wa=E.polygonOffset_enable;wa!==C.polygonOffset_enable&&(wa?z.enable(32823):z.disable(32823),C.polygonOffset_enable=wa);oa=l[0];Ba=l[1];if(oa!==N[0]||Ba!==N[1])z.polygonOffset(oa,Ba),N[0]=oa,N[1]=
Ba;Cc=E.sample_alpha;Cc!==C.sample_alpha&&(Cc?z.enable(32926):z.disable(32926),C.sample_alpha=Cc);ea=E.sample_enable;ea!==C.sample_enable&&(ea?z.enable(32928):z.disable(32928),C.sample_enable=ea);X=Q[0];$b=Q[1];if(X!==za[0]||$b!==za[1])z.sampleCoverage(X,$b),za[0]=X,za[1]=$b;Ga=E.stencil_mask;Ga!==C.stencil_mask&&(z.stencilMask(Ga),C.stencil_mask=Ga);ac=J[0];Sb=J[1];ia=J[2];if(ac!==da[0]||Sb!==da[1]||ia!==da[2])z.stencilFunc(ac,Sb,ia),da[0]=ac,da[1]=Sb,da[2]=ia;Gd=ra[0];ke=ra[1];Wd=ra[2];ze=ra[3];
if(Gd!==Ca[0]||ke!==Ca[1]||Wd!==Ca[2]||ze!==Ca[3])z.stencilOpSeparate(Gd,ke,Wd,ze),Ca[0]=Gd,Ca[1]=ke,Ca[2]=Wd,Ca[3]=ze;Fa=S[0];Vd=S[1];ne=S[2];Ad=S[3];if(Fa!==ma[0]||Vd!==ma[1]||ne!==ma[2]||Ad!==ma[3])z.stencilOpSeparate(Fa,Vd,ne,Ad),ma[0]=Fa,ma[1]=Vd,ma[2]=ne,ma[3]=Ad}z.blendColor(0,0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;z.enable(3042);C.blend_enable=!0;z.blendEquationSeparate(32774,32774);na[0]=32774;na[1]=32774;z.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;z.disable(2929);
C.depth_enable=!1;z.enable(3089);C.scissor_enable=!0;z.disable(2960);C.stencil_enable=!1;if(k=C.profile)m=performance.now(),K.count+=c;z.useProgram(G.program);v=ba.angle_instanced_arrays;var Dd;t.setVAO(null);Dd=V.instances;for(p=0;p<c;++p){g=a[p];var qd,ge,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb;qd=g.viewport;
ge=qd.x|0;be=qd.y|0;Ce="width"in qd?qd.width|0:e.framebufferWidth-ge;Ze="height"in qd?qd.height|0:e.framebufferHeight-be;Re=e.viewportWidth;e.viewportWidth=Ce;Hd=e.viewportHeight;e.viewportHeight=Ze;z.viewport(ge,be,Ce,Ze);ga[0]=ge;ga[1]=be;ga[2]=Ce;ga[3]=Ze;Ae=g.viewport;te=Ae.x|0;Zd=Ae.y|0;Bd="width"in Ae?Ae.width|0:e.framebufferWidth-te;$d="height"in Ae?Ae.height|0:e.framebufferHeight-Zd;z.scissor(te,Zd,Bd,$d);q[0]=te;q[1]=Zd;q[2]=Bd;q[3]=$d;ka.buffer=g.positionBuffer;ld=!1;$c=null;rd=0;Lc=!1;
Gc=nd=0;dd=1;Pc=0;kd=5126;xb=tc=Fb=Bb=0;ca(ka)?(ld=!0,$c=ja.createStream(34962,ka),kd=$c.dtype):($c=ja.getBuffer(ka))?kd=$c.dtype:"constant"in ka?(dd=2,"number"===typeof ka.constant?(Fb=ka.constant,tc=xb=Bb=0):(Fb=0<ka.constant.length?ka.constant[0]:0,tc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Bb=3<ka.constant.length?ka.constant[3]:0)):($c=ca(ka.buffer)?ja.createStream(34962,ka.buffer):ja.getBuffer(ka.buffer),kd="type"in ka?Da[ka.type]:$c.dtype,Lc=!!ka.normalized,
Gc=ka.size|0,nd=ka.offset|0,Pc=ka.stride|0,rd=ka.divisor|0);wc=A.location;Cb=O[wc];if(1===dd){Cb.buffer||z.enableVertexAttribArray(wc);Jc=Gc||2;if(Cb.type!==kd||Cb.size!==Jc||Cb.buffer!==$c||Cb.normalized!==Lc||Cb.offset!==nd||Cb.stride!==Pc)z.bindBuffer(34962,$c.buffer),z.vertexAttribPointer(wc,Jc,kd,Lc,Pc,nd),Cb.type=kd,Cb.size=Jc,Cb.buffer=$c,Cb.normalized=Lc,Cb.offset=nd,Cb.stride=Pc;Cb.divisor!==rd&&(v.vertexAttribDivisorANGLE(wc,rd),Cb.divisor=rd)}else if(Cb.buffer&&(z.disableVertexAttribArray(wc),
Cb.buffer=null),Cb.x!==Fb||Cb.y!==tc||Cb.z!==xb||Cb.w!==Bb)z.vertexAttrib4f(wc,Fb,tc,xb,Bb),Cb.x=Fb,Cb.y=tc,Cb.z=xb,Cb.w=Bb;qa.buffer=g.positionFractBuffer;lc=!1;Hc=null;Wc=0;Vc=!1;dc=Dc=0;Ic=1;oc=0;pc=5126;Fc=$a=ec=mc=0;ca(qa)?(lc=!0,Hc=ja.createStream(34962,qa),pc=Hc.dtype):(Hc=ja.getBuffer(qa))?pc=Hc.dtype:"constant"in qa?(Ic=2,"number"===typeof qa.constant?(ec=qa.constant,$a=Fc=mc=0):(ec=0<qa.constant.length?qa.constant[0]:0,$a=1<qa.constant.length?qa.constant[1]:0,Fc=2<qa.constant.length?qa.constant[2]:
0,mc=3<qa.constant.length?qa.constant[3]:0)):(Hc=ca(qa.buffer)?ja.createStream(34962,qa.buffer):ja.getBuffer(qa.buffer),pc="type"in qa?Da[qa.type]:Hc.dtype,Vc=!!qa.normalized,dc=qa.size|0,Dc=qa.offset|0,oc=qa.stride|0,Wc=qa.divisor|0);yb=w.location;cb=O[yb];if(1===Ic){cb.buffer||z.enableVertexAttribArray(yb);Nb=dc||2;if(cb.type!==pc||cb.size!==Nb||cb.buffer!==Hc||cb.normalized!==Vc||cb.offset!==Dc||cb.stride!==oc)z.bindBuffer(34962,Hc.buffer),z.vertexAttribPointer(yb,Nb,pc,Vc,oc,Dc),cb.type=pc,cb.size=
Nb,cb.buffer=Hc,cb.normalized=Vc,cb.offset=Dc,cb.stride=oc;cb.divisor!==Wc&&(v.vertexAttribDivisorANGLE(yb,Wc),cb.divisor=Wc)}else if(cb.buffer&&(z.disableVertexAttribArray(yb),cb.buffer=null),cb.x!==ec||cb.y!==$a||cb.z!==Fc||cb.w!==mc)z.vertexAttrib4f(yb,ec,$a,Fc,mc),cb.x=ec,cb.y=$a,cb.z=Fc,cb.w=mc;ab=g.fill;ob=ab[0];vd=ab[1];Jb=ab[2];Ob=ab[3];p&&Va===ob&&Ib===vd&&qc===Jb&&jb===Ob||(Va=ob,Ib=vd,qc=Jb,jb=Ob,z.uniform4f(L.location,ob,vd,Jb,Ob));Gb=g.scale;Db=Gb[0];hb=Gb[1];p&&wb===Db&&Yb===hb||(wb=
Db,Yb=hb,z.uniform2f(Z.location,Db,hb));Pb=g.scaleFract;qb=Pb[0];Ub=Pb[1];p&&Sa===qb&&zb===Ub||(Sa=qb,zb=Ub,z.uniform2f(r.location,qb,Ub));ic=g.translate;ib=ic[0];Ha=ic[1];p&&pb===ib&&rb===Ha||(pb=ib,rb=Ha,z.uniform2f(U.location,ib,Ha));Ka=g.translateFract;fb=Ka[0];La=Ka[1];p&&gb===fb&&kb===La||(gb=fb,kb=La,z.uniform2f(n.location,fb,La));Wa=g.id;p&&tb===Wa||(tb=Wa,z.uniform1f(W.location,Wa));sb=g.opacity;p&&Pa===sb||(Pa=sb,z.uniform1f(u.location,sb));Bc=B.call(this,e,g,p);Ra=null;(Ra=(Kb=ca(Bc))?
f.createStream(Bc):f.getElements(Bc))&&z.bindBuffer(34963,Ra.buffer.buffer);if(Eb=Ra?Ra.vertCount:-1)0<Dd?Ra?v.drawElementsInstancedANGLE(4,Eb,Ra.type,0<<(Ra.type-5121>>1),Dd):v.drawArraysInstancedANGLE(4,0,Eb,Dd):0>Dd&&(Ra?z.drawElements(4,Eb,Ra.type,0<<(Ra.type-5121>>1)):z.drawArrays(4,0,Eb)),e.viewportWidth=Re,e.viewportHeight=Hd,ld&&ja.destroyStream($c),lc&&ja.destroyStream(Hc),Kb&&f.destroyStream(Ra)}C.dirty=!0;t.setVAO(null);k&&(K.cpuTime+=performance.now()-m)},draw:function(a){var c,b,k,m,
v,p,g,d,y,D,B,ha,H,sa,Ea,pa,ya,wa,la,aa,G,oa;c=h.next;c!==h.cur&&(c?z.bindFramebuffer(36160,c.framebuffer):z.bindFramebuffer(36160,null),h.cur=c);if(C.dirty){c=E.dither;c!==C.dither&&(c?z.enable(3024):z.disable(3024),C.dither=c);c=E.depth_func;c!==C.depth_func&&(z.depthFunc(c),C.depth_func=c);c=T[0];p=T[1];if(c!==x[0]||p!==x[1])z.depthRange(c,p),x[0]=c,x[1]=p;c=E.depth_mask;c!==C.depth_mask&&(z.depthMask(c),C.depth_mask=c);c=fa[0];p=fa[1];b=fa[2];k=fa[3];if(c!==P[0]||p!==P[1]||b!==P[2]||k!==P[3])z.colorMask(c,
p,b,k),P[0]=c,P[1]=p,P[2]=b,P[3]=k;c=E.cull_enable;c!==C.cull_enable&&(c?z.enable(2884):z.disable(2884),C.cull_enable=c);c=E.cull_face;c!==C.cull_face&&(z.cullFace(c),C.cull_face=c);c=E.frontFace;c!==C.frontFace&&(z.frontFace(c),C.frontFace=c);c=E.lineWidth;c!==C.lineWidth&&(z.lineWidth(c),C.lineWidth=c);c=E.polygonOffset_enable;c!==C.polygonOffset_enable&&(c?z.enable(32823):z.disable(32823),C.polygonOffset_enable=c);c=l[0];p=l[1];if(c!==N[0]||p!==N[1])z.polygonOffset(c,p),N[0]=c,N[1]=p;c=E.sample_alpha;
c!==C.sample_alpha&&(c?z.enable(32926):z.disable(32926),C.sample_alpha=c);c=E.sample_enable;c!==C.sample_enable&&(c?z.enable(32928):z.disable(32928),C.sample_enable=c);c=Q[0];p=Q[1];if(c!==za[0]||p!==za[1])z.sampleCoverage(c,p),za[0]=c,za[1]=p;c=E.stencil_mask;c!==C.stencil_mask&&(z.stencilMask(c),C.stencil_mask=c);c=J[0];p=J[1];b=J[2];if(c!==da[0]||p!==da[1]||b!==da[2])z.stencilFunc(c,p,b),da[0]=c,da[1]=p,da[2]=b;c=ra[0];p=ra[1];b=ra[2];k=ra[3];if(c!==Ca[0]||p!==Ca[1]||b!==Ca[2]||k!==Ca[3])z.stencilOpSeparate(c,
p,b,k),Ca[0]=c,Ca[1]=p,Ca[2]=b,Ca[3]=k;c=S[0];p=S[1];b=S[2];k=S[3];if(c!==ma[0]||p!==ma[1]||b!==ma[2]||k!==ma[3])z.stencilOpSeparate(c,p,b,k),ma[0]=c,ma[1]=p,ma[2]=b,ma[3]=k}c=a.viewport;b=c.x|0;k=c.y|0;m="width"in c?c.width|0:e.framebufferWidth-b;v="height"in c?c.height|0:e.framebufferHeight-k;c=e.viewportWidth;e.viewportWidth=m;p=e.viewportHeight;e.viewportHeight=v;z.viewport(b,k,m,v);ga[0]=b;ga[1]=k;ga[2]=m;ga[3]=v;z.blendColor(0,0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;z.enable(3042);C.blend_enable=
!0;z.blendEquationSeparate(32774,32774);na[0]=32774;na[1]=32774;z.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;z.disable(2929);C.depth_enable=!1;v=a.viewport;b=v.x|0;k=v.y|0;m="width"in v?v.width|0:e.framebufferWidth-b;v="height"in v?v.height|0:e.framebufferHeight-k;z.scissor(b,k,m,v);q[0]=b;q[1]=k;q[2]=m;q[3]=v;z.enable(3089);C.scissor_enable=!0;z.disable(2960);C.stencil_enable=!1;if(b=C.profile)g=performance.now(),K.count++;z.useProgram(I.program);k=ba.angle_instanced_arrays;
t.setVAO(null);ka.buffer=a.positionBuffer;m=!1;d=0;y=!1;B=D=0;ha=1;H=0;sa=5126;wa=ya=pa=Ea=0;ca(ka)?(m=!0,v=ja.createStream(34962,ka),sa=v.dtype):(v=ja.getBuffer(ka))?sa=v.dtype:"constant"in ka?(ha=2,"number"===typeof ka.constant?(pa=ka.constant,ya=wa=Ea=0):(pa=0<ka.constant.length?ka.constant[0]:0,ya=1<ka.constant.length?ka.constant[1]:0,wa=2<ka.constant.length?ka.constant[2]:0,Ea=3<ka.constant.length?ka.constant[3]:0)):(v=ca(ka.buffer)?ja.createStream(34962,ka.buffer):ja.getBuffer(ka.buffer),sa=
"type"in ka?Da[ka.type]:v.dtype,y=!!ka.normalized,B=ka.size|0,D=ka.offset|0,H=ka.stride|0,d=ka.divisor|0);la=A.location;aa=O[la];if(1===ha){aa.buffer||z.enableVertexAttribArray(la);B=B||2;if(aa.type!==sa||aa.size!==B||aa.buffer!==v||aa.normalized!==y||aa.offset!==D||aa.stride!==H)z.bindBuffer(34962,v.buffer),z.vertexAttribPointer(la,B,sa,y,H,D),aa.type=sa,aa.size=B,aa.buffer=v,aa.normalized=y,aa.offset=D,aa.stride=H;aa.divisor!==d&&(k.vertexAttribDivisorANGLE(la,d),aa.divisor=d)}else if(aa.buffer&&
(z.disableVertexAttribArray(la),aa.buffer=null),aa.x!==pa||aa.y!==ya||aa.z!==wa||aa.w!==Ea)z.vertexAttrib4f(la,pa,ya,wa,Ea),aa.x=pa,aa.y=ya,aa.z=wa,aa.w=Ea;qa.buffer=a.positionFractBuffer;d=!1;D=0;H=!1;Ea=sa=0;pa=1;la=0;aa=5126;oa=G=wa=ya=0;ca(qa)?(d=!0,y=ja.createStream(34962,qa),aa=y.dtype):(y=ja.getBuffer(qa))?aa=y.dtype:"constant"in qa?(pa=2,"number"===typeof qa.constant?(wa=qa.constant,G=oa=ya=0):(wa=0<qa.constant.length?qa.constant[0]:0,G=1<qa.constant.length?qa.constant[1]:0,oa=2<qa.constant.length?
qa.constant[2]:0,ya=3<qa.constant.length?qa.constant[3]:0)):(y=ca(qa.buffer)?ja.createStream(34962,qa.buffer):ja.getBuffer(qa.buffer),aa="type"in qa?Da[qa.type]:y.dtype,H=!!qa.normalized,Ea=qa.size|0,sa=qa.offset|0,la=qa.stride|0,D=qa.divisor|0);B=w.location;ha=O[B];if(1===pa){ha.buffer||z.enableVertexAttribArray(B);Ea=Ea||2;if(ha.type!==aa||ha.size!==Ea||ha.buffer!==y||ha.normalized!==H||ha.offset!==sa||ha.stride!==la)z.bindBuffer(34962,y.buffer),z.vertexAttribPointer(B,Ea,aa,H,la,sa),ha.type=aa,
ha.size=Ea,ha.buffer=y,ha.normalized=H,ha.offset=sa,ha.stride=la;ha.divisor!==D&&(k.vertexAttribDivisorANGLE(B,D),ha.divisor=D)}else if(ha.buffer&&(z.disableVertexAttribArray(B),ha.buffer=null),ha.x!==wa||ha.y!==G||ha.z!==oa||ha.w!==ya)z.vertexAttrib4f(B,wa,G,oa,ya),ha.x=wa,ha.y=G,ha.z=oa,ha.w=ya;D=a.fill;z.uniform4f(L.location,D[0],D[1],D[2],D[3]);D=a.scale;z.uniform2f(Z.location,D[0],D[1]);D=a.scaleFract;z.uniform2f(r.location,D[0],D[1]);D=a.translate;z.uniform2f(U.location,D[0],D[1]);D=a.translateFract;
z.uniform2f(n.location,D[0],D[1]);z.uniform1f(W.location,a.id);z.uniform1f(u.location,a.opacity);D=M.call(this,e,a,0);(D=(a=ca(D))?f.createStream(D):f.getElements(D))&&z.bindBuffer(34963,D.buffer.buffer);if(H=D?D.vertCount:-1)sa=V.instances,0<sa?D?k.drawElementsInstancedANGLE(4,H,D.type,0<<(D.type-5121>>1),sa):k.drawArraysInstancedANGLE(4,0,H,sa):0>sa&&(D?z.drawElements(4,H,D.type,0<<(D.type-5121>>1)):z.drawArrays(4,0,H)),C.dirty=!0,t.setVAO(null),e.viewportWidth=c,e.viewportHeight=p,b&&(K.cpuTime+=
performance.now()-g),m&&ja.destroyStream(v),d&&ja.destroyStream(y),a&&f.destroyStream(D)},scope:function(l,h,q){var t,d,v,p,R,n,z,r,J,T,H,sa,Ea,x,S,ga,P,M,u,Q,A,N,da,B,w,I,O,G,za,ra,L,U,W,Y,Z,ba,fa,ma,xa,na,Ca,X,ia,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb;t=l.viewport;d=t.x|0;v=t.y|0;p="width"in t?t.width|0:e.framebufferWidth-d;
R="height"in t?t.height|0:e.framebufferHeight-v;n=e.viewportWidth;e.viewportWidth=p;z=e.viewportHeight;e.viewportHeight=R;r=wa[0];wa[0]=d;J=wa[1];wa[1]=v;T=wa[2];wa[2]=p;H=wa[3];wa[3]=R;sa=a[0];a[0]=0;Ea=a[1];a[1]=0;x=a[2];a[2]=0;S=a[3];a[3]=0;ga=E.blend_enable;E.blend_enable=!0;P=y[0];y[0]=32774;M=y[1];y[1]=32774;u=Cc[0];Cc[0]=770;Q=Cc[1];Cc[1]=771;A=Cc[2];Cc[2]=773;N=Cc[3];Cc[3]=1;da=E.depth_enable;E.depth_enable=!1;B=l.viewport;w=B.x|0;I=B.y|0;O="width"in B?B.width|0:e.framebufferWidth-w;G="height"in
B?B.height|0:e.framebufferHeight-I;za=oa[0];oa[0]=w;ra=oa[1];oa[1]=I;L=oa[2];oa[2]=O;U=oa[3];oa[3]=G;W=E.scissor_enable;E.scissor_enable=!0;Y=E.stencil_enable;E.stencil_enable=!1;if(Z=C.profile)ba=performance.now(),K.count++;fa=g.call(this,e,l,q);ma=null;ma=(xa=ca(fa))?f.createStream(fa):f.getElements(fa);na=V.elements;V.elements=ma;Ca=V.offset;V.offset=0;X=ma?ma.vertCount:-1;ia=V.count;V.count=X;Re=V.primitive;V.primitive=4;Hd=l.fill;Ae=c[14];c[14]=Hd;te=l.id;Zd=c[31];c[31]=te;Bd=l.opacity;$d=c[10];
c[10]=Bd;ld=e.pixelRatio;$c=c[34];c[34]=ld;rd=l.scale;Lc=c[6];c[6]=rd;nd=l.scaleFract;Gc=c[7];c[7]=nd;dd=l.translate;Pc=c[8];c[8]=dd;kd=l.translateFract;Bb=c[9];c[9]=kd;Fb=k.call(this,e,l,q);tc=c[3];c[3]=Fb;ka.buffer=l.positionBuffer;xb=!1;wc=null;Cb=0;Jc=!1;Hc=lc=0;Wc=1;Vc=0;Dc=5126;pc=oc=Ic=dc=0;ca(ka)?(xb=!0,wc=ja.createStream(34962,ka),Dc=wc.dtype):(wc=ja.getBuffer(ka))?Dc=wc.dtype:"constant"in ka?(Wc=2,"number"===typeof ka.constant?(Ic=ka.constant,oc=pc=dc=0):(Ic=0<ka.constant.length?ka.constant[0]:
0,oc=1<ka.constant.length?ka.constant[1]:0,pc=2<ka.constant.length?ka.constant[2]:0,dc=3<ka.constant.length?ka.constant[3]:0)):(wc=ca(ka.buffer)?ja.createStream(34962,ka.buffer):ja.getBuffer(ka.buffer),Dc="type"in ka?Da[ka.type]:wc.dtype,Jc=!!ka.normalized,Hc=ka.size|0,lc=ka.offset|0,Vc=ka.stride|0,Cb=ka.divisor|0);mc=m.buffer;m.buffer=wc;ec=m.divisor;m.divisor=Cb;$a=m.normalized;m.normalized=Jc;Fc=m.offset;m.offset=lc;yb=m.size;m.size=Hc;cb=m.state;m.state=Wc;Nb=m.stride;m.stride=Vc;ab=m.type;m.type=
Dc;ob=m.w;m.w=dc;Va=m.x;m.x=Ic;vd=m.y;m.y=oc;Ib=m.z;m.z=pc;qa.buffer=l.positionFractBuffer;Jb=!1;qc=null;Ob=0;jb=!1;Db=Gb=0;wb=1;hb=0;Yb=5126;Ub=Sa=qb=Pb=0;ca(qa)?(Jb=!0,qc=ja.createStream(34962,qa),Yb=qc.dtype):(qc=ja.getBuffer(qa))?Yb=qc.dtype:"constant"in qa?(wb=2,"number"===typeof qa.constant?(qb=qa.constant,Sa=Ub=Pb=0):(qb=0<qa.constant.length?qa.constant[0]:0,Sa=1<qa.constant.length?qa.constant[1]:0,Ub=2<qa.constant.length?qa.constant[2]:0,Pb=3<qa.constant.length?qa.constant[3]:0)):(qc=ca(qa.buffer)?
ja.createStream(34962,qa.buffer):ja.getBuffer(qa.buffer),Yb="type"in qa?Da[qa.type]:qc.dtype,jb=!!qa.normalized,Db=qa.size|0,Gb=qa.offset|0,hb=qa.stride|0,Ob=qa.divisor|0);zb=b.buffer;b.buffer=qc;ic=b.divisor;b.divisor=Ob;ib=b.normalized;b.normalized=jb;pb=b.offset;b.offset=Gb;Ha=b.size;b.size=Db;rb=b.state;b.state=wb;Ka=b.stride;b.stride=hb;fb=b.type;b.type=Yb;gb=b.w;b.w=Pb;La=b.x;b.x=qb;kb=b.y;b.y=Sa;Wa=b.z;b.z=Ub;tb=D.vert;D.vert=42;sb=D.frag;D.frag=41;C.dirty=!0;h(e,l,q);e.viewportWidth=n;e.viewportHeight=
z;wa[0]=r;wa[1]=J;wa[2]=T;wa[3]=H;a[0]=sa;a[1]=Ea;a[2]=x;a[3]=S;E.blend_enable=ga;y[0]=P;y[1]=M;Cc[0]=u;Cc[1]=Q;Cc[2]=A;Cc[3]=N;E.depth_enable=da;oa[0]=za;oa[1]=ra;oa[2]=L;oa[3]=U;E.scissor_enable=W;E.stencil_enable=Y;Z&&(K.cpuTime+=performance.now()-ba);xa&&f.destroyStream(ma);V.elements=na;V.offset=Ca;V.count=ia;V.primitive=Re;c[14]=Ae;c[31]=Zd;c[10]=$d;c[34]=$c;c[6]=Lc;c[7]=Gc;c[8]=Pc;c[9]=Bb;c[3]=tc;xb&&ja.destroyStream(wc);m.buffer=mc;m.divisor=ec;m.normalized=$a;m.offset=Fc;m.size=yb;m.state=
cb;m.stride=Nb;m.type=ab;m.w=ob;m.x=Va;m.y=vd;m.z=Ib;Jb&&ja.destroyStream(qc);b.buffer=zb;b.divisor=ic;b.normalized=ib;b.offset=pb;b.size=Ha;b.state=rb;b.stride=Ka;b.type=fb;b.w=gb;b.x=La;b.y=kb;b.z=Wa;D.vert=tb;D.frag=sb;C.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,
a,xa,y,na,X,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua){var v,p,R,ta,va,td,Hb,ha,H,sa,Ea,pa,ya,Ja,la,aa,ua,Ia,Ba,mb,ea,ia,$b,Ga,ac,Sb,Fa,Gd,ke,Wd,ze,se,Vd,ne,Ad,Dd,qd,ge,be;v=d.attributes;p=d.buffer;R=d.context;ta=d.current;va=d.draw;td=d.elements;Hb=d.extensions;ha=d.framebuffer;H=d.gl;sa=d.isBufferArgs;Ea=d.next;pa=d.shader;ya=d.uniforms;Ja=d.vao;la=Ea.blend_color;aa=ta.blend_color;ua=Ea.blend_equation;Ia=ta.blend_equation;Ba=Ea.blend_func;mb=ta.blend_func;ea=Ea.colorMask;
ia=ta.colorMask;$b=Ea.depth_range;Ga=ta.depth_range;ac=Ea.polygonOffset_offset;Sb=ta.polygonOffset_offset;Fa=Ea.sample_coverage;Gd=ta.sample_coverage;ke=Ea.scissor_box;Wd=ta.scissor_box;ze=Ea.stencil_func;se=ta.stencil_func;Vd=Ea.stencil_opBack;ne=ta.stencil_opBack;Ad=Ea.stencil_opFront;Dd=ta.stencil_opFront;qd=Ea.viewport;ge=ta.viewport;be={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,e,f,k,h,m;b=ha.next;b!==ha.cur&&
(b?H.bindFramebuffer(36160,b.framebuffer):H.bindFramebuffer(36160,null),ha.cur=b);if(ta.dirty){var t,g,d,n,C,z,r,D,pa,M,E,u,A,la,B,w,I,ya,O,G,L,U,W,V,Z,ba,ja,ca,Ba,Fc,yb,cb,Nb,ab;t=Ea.dither;t!==ta.dither&&(t?H.enable(3024):H.disable(3024),ta.dither=t);g=ua[0];d=ua[1];if(g!==Ia[0]||d!==Ia[1])H.blendEquationSeparate(g,d),Ia[0]=g,Ia[1]=d;n=Ea.depth_func;n!==ta.depth_func&&(H.depthFunc(n),ta.depth_func=n);C=$b[0];z=$b[1];if(C!==Ga[0]||z!==Ga[1])H.depthRange(C,z),Ga[0]=C,Ga[1]=z;r=Ea.depth_mask;r!==ta.depth_mask&&
(H.depthMask(r),ta.depth_mask=r);D=ea[0];pa=ea[1];M=ea[2];E=ea[3];if(D!==ia[0]||pa!==ia[1]||M!==ia[2]||E!==ia[3])H.colorMask(D,pa,M,E),ia[0]=D,ia[1]=pa,ia[2]=M,ia[3]=E;u=Ea.cull_enable;u!==ta.cull_enable&&(u?H.enable(2884):H.disable(2884),ta.cull_enable=u);A=Ea.cull_face;A!==ta.cull_face&&(H.cullFace(A),ta.cull_face=A);la=Ea.frontFace;la!==ta.frontFace&&(H.frontFace(la),ta.frontFace=la);B=Ea.lineWidth;B!==ta.lineWidth&&(H.lineWidth(B),ta.lineWidth=B);w=Ea.polygonOffset_enable;w!==ta.polygonOffset_enable&&
(w?H.enable(32823):H.disable(32823),ta.polygonOffset_enable=w);I=ac[0];ya=ac[1];if(I!==Sb[0]||ya!==Sb[1])H.polygonOffset(I,ya),Sb[0]=I,Sb[1]=ya;O=Ea.sample_alpha;O!==ta.sample_alpha&&(O?H.enable(32926):H.disable(32926),ta.sample_alpha=O);G=Ea.sample_enable;G!==ta.sample_enable&&(G?H.enable(32928):H.disable(32928),ta.sample_enable=G);L=Fa[0];U=Fa[1];if(L!==Gd[0]||U!==Gd[1])H.sampleCoverage(L,U),Gd[0]=L,Gd[1]=U;W=Ea.stencil_mask;W!==ta.stencil_mask&&(H.stencilMask(W),ta.stencil_mask=W);V=ze[0];Z=ze[1];
ba=ze[2];if(V!==se[0]||Z!==se[1]||ba!==se[2])H.stencilFunc(V,Z,ba),se[0]=V,se[1]=Z,se[2]=ba;ja=Ad[0];ca=Ad[1];Ba=Ad[2];Fc=Ad[3];if(ja!==Dd[0]||ca!==Dd[1]||Ba!==Dd[2]||Fc!==Dd[3])H.stencilOpSeparate(ja,ca,Ba,Fc),Dd[0]=ja,Dd[1]=ca,Dd[2]=Ba,Dd[3]=Fc;yb=Vd[0];cb=Vd[1];Nb=Vd[2];ab=Vd[3];if(yb!==ne[0]||cb!==ne[1]||Nb!==ne[2]||ab!==ne[3])H.stencilOpSeparate(yb,cb,Nb,ab),ne[0]=yb,ne[1]=cb,ne[2]=Nb,ne[3]=ab}H.blendColor(0,0,0,1);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=1;H.enable(3042);ta.blend_enable=!0;H.blendFuncSeparate(770,
771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;H.disable(2929);ta.depth_enable=!1;H.enable(3089);ta.scissor_enable=!0;H.disable(2960);ta.stencil_enable=!1;if(e=ta.profile)f=performance.now(),K.count+=c;H.useProgram(xa.program);k=Hb.angle_instanced_arrays;var ob;Ja.setVAO(null);H.uniform1i(J.location,!1);H.uniform1i(Ca.location,N.bind());ob=va.instances;for(h=0;h<c;++h){m=a[h];var Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,
Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,ke,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,qd,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf;Va=m.viewport;vd=
Va.x|0;Ib=Va.y|0;Jb="width"in Va?Va.width|0:R.framebufferWidth-vd;qc="height"in Va?Va.height|0:R.framebufferHeight-Ib;Ob=R.viewportWidth;R.viewportWidth=Jb;jb=R.viewportHeight;R.viewportHeight=qc;H.viewport(vd,Ib,Jb,qc);ge[0]=vd;ge[1]=Ib;ge[2]=Jb;ge[3]=qc;Gb=m.viewport;Db=Gb.x|0;wb=Gb.y|0;hb="width"in Gb?Gb.width|0:R.framebufferWidth-Db;Yb="height"in Gb?Gb.height|0:R.framebufferHeight-wb;H.scissor(Db,wb,hb,Yb);Wd[0]=Db;Wd[1]=wb;Wd[2]=hb;Wd[3]=Yb;Pb=y.call(this,R,m,h);qb=!1;Sa=null;Ub=0;zb=!1;ib=ic=
0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;sa(Pb)?(qb=!0,Sa=p.createStream(34962,Pb),rb=Sa.dtype):(Sa=p.getBuffer(Pb))?rb=Sa.dtype:"constant"in Pb?(pb=2,"number"===typeof Pb.constant?(fb=Pb.constant,gb=La=Ka=0):(fb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,La=2<Pb.constant.length?Pb.constant[2]:0,Ka=3<Pb.constant.length?Pb.constant[3]:0)):(Sa=sa(Pb.buffer)?p.createStream(34962,Pb.buffer):p.getBuffer(Pb.buffer),rb="type"in Pb?be[Pb.type]:Sa.dtype,zb=!!Pb.normalized,ib=Pb.size|
0,ic=Pb.offset|0,Ha=Pb.stride|0,Ub=Pb.divisor|0);kb=Ma.location;Wa=v[kb];if(1===pb){Wa.buffer||H.enableVertexAttribArray(kb);tb=ib||1;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Sa||Wa.normalized!==zb||Wa.offset!==ic||Wa.stride!==Ha)H.bindBuffer(34962,Sa.buffer),H.vertexAttribPointer(kb,tb,rb,zb,Ha,ic),Wa.type=rb,Wa.size=tb,Wa.buffer=Sa,Wa.normalized=zb,Wa.offset=ic,Wa.stride=Ha;Wa.divisor!==Ub&&(k.vertexAttribDivisorANGLE(kb,Ub),Wa.divisor=Ub)}else if(Wa.buffer&&(H.disableVertexAttribArray(kb),Wa.buffer=
null),Wa.x!==fb||Wa.y!==gb||Wa.z!==La||Wa.w!==Ka)H.vertexAttrib4f(kb,fb,gb,La,Ka),Wa.x=fb,Wa.y=gb,Wa.z=La,Wa.w=Ka;sb=na.call(this,R,m,h);Pa=!1;Bc=null;Ra=0;Kb=!1;Na=Eb=0;yd=1;Ya=0;Lb=5126;Zb=Oa=lb=Mb=0;sa(sb)?(Pa=!0,Bc=p.createStream(34962,sb),Lb=Bc.dtype):(Bc=p.getBuffer(sb))?Lb=Bc.dtype:"constant"in sb?(yd=2,"number"===typeof sb.constant?(lb=sb.constant,Oa=Zb=Mb=0):(lb=0<sb.constant.length?sb.constant[0]:0,Oa=1<sb.constant.length?sb.constant[1]:0,Zb=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?
sb.constant[3]:0)):(Bc=sa(sb.buffer)?p.createStream(34962,sb.buffer):p.getBuffer(sb.buffer),Lb="type"in sb?be[sb.type]:Bc.dtype,Kb=!!sb.normalized,Na=sb.size|0,Eb=sb.offset|0,Ya=sb.stride|0,Ra=sb.divisor|0);Qa=eb.location;ub=v[Qa];if(1===yd){ub.buffer||H.enableVertexAttribArray(Qa);vb=Na||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==Bc||ub.normalized!==Kb||ub.offset!==Eb||ub.stride!==Ya)H.bindBuffer(34962,Bc.buffer),H.vertexAttribPointer(Qa,vb,Lb,Kb,Ya,Eb),ub.type=Lb,ub.size=vb,ub.buffer=Bc,ub.normalized=
Kb,ub.offset=Eb,ub.stride=Ya;ub.divisor!==Ra&&(k.vertexAttribDivisorANGLE(Qa,Ra),ub.divisor=Ra)}else if(ub.buffer&&(H.disableVertexAttribArray(Qa),ub.buffer=null),ub.x!==lb||ub.y!==Oa||ub.z!==Zb||ub.w!==Mb)H.vertexAttrib4f(Qa,lb,Oa,Zb,Mb),ub.x=lb,ub.y=Oa,ub.z=Zb,ub.w=Mb;Ta=X.call(this,R,m,h);nb=!1;fc=null;zc=0;uc=!1;jc=bb=0;gd=1;Xa=0;Mc=5126;sc=Vb=Za=Ab=0;sa(Ta)?(nb=!0,fc=p.createStream(34962,Ta),Mc=fc.dtype):(fc=p.getBuffer(Ta))?Mc=fc.dtype:"constant"in Ta?(gd=2,"number"===typeof Ta.constant?(Za=
Ta.constant,Vb=sc=Ab=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Vb=1<Ta.constant.length?Ta.constant[1]:0,sc=2<Ta.constant.length?Ta.constant[2]:0,Ab=3<Ta.constant.length?Ta.constant[3]:0)):(fc=sa(Ta.buffer)?p.createStream(34962,Ta.buffer):p.getBuffer(Ta.buffer),Mc="type"in Ta?be[Ta.type]:fc.dtype,uc=!!Ta.normalized,jc=Ta.size|0,bb=Ta.offset|0,Xa=Ta.stride|0,zc=Ta.divisor|0);Wb=F.location;Qb=v[Wb];if(1===gd){Qb.buffer||H.enableVertexAttribArray(Wb);Kc=jc||1;if(Qb.type!==Mc||Qb.size!==Kc||Qb.buffer!==
fc||Qb.normalized!==uc||Qb.offset!==bb||Qb.stride!==Xa)H.bindBuffer(34962,fc.buffer),H.vertexAttribPointer(Wb,Kc,Mc,uc,Xa,bb),Qb.type=Mc,Qb.size=Kc,Qb.buffer=fc,Qb.normalized=uc,Qb.offset=bb,Qb.stride=Xa;Qb.divisor!==zc&&(k.vertexAttribDivisorANGLE(Wb,zc),Qb.divisor=zc)}else if(Qb.buffer&&(H.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==Za||Qb.y!==Vb||Qb.z!==sc||Qb.w!==Ab)H.vertexAttrib4f(Wb,Za,Vb,sc,Ab),Qb.x=Za,Qb.y=Vb,Qb.z=sc,Qb.w=Ab;Rb=Y.call(this,R,m,h);Qd=!1;Ec=null;ke=0;Nc=!1;od=ed=0;
nc=1;vc=0;gc=5126;Xb=Tb=rc=db=0;sa(Rb)?(Qd=!0,Ec=p.createStream(34962,Rb),gc=Ec.dtype):(Ec=p.getBuffer(Rb))?gc=Ec.dtype:"constant"in Rb?(nc=2,"number"===typeof Rb.constant?(rc=Rb.constant,Tb=Xb=db=0):(rc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Xb=2<Rb.constant.length?Rb.constant[2]:0,db=3<Rb.constant.length?Rb.constant[3]:0)):(Ec=sa(Rb.buffer)?p.createStream(34962,Rb.buffer):p.getBuffer(Rb.buffer),gc="type"in Rb?be[Rb.type]:Ec.dtype,Nc=!!Rb.normalized,od=Rb.size|
0,ed=Rb.offset|0,vc=Rb.stride|0,ke=Rb.divisor|0);cc=Ua.location;hc=v[cc];if(1===nc){hc.buffer||H.enableVertexAttribArray(cc);xc=od||1;if(hc.type!==gc||hc.size!==xc||hc.buffer!==Ec||hc.normalized!==Nc||hc.offset!==ed||hc.stride!==vc)H.bindBuffer(34962,Ec.buffer),H.vertexAttribPointer(cc,xc,gc,Nc,vc,ed),hc.type=gc,hc.size=xc,hc.buffer=Ec,hc.normalized=Nc,hc.offset=ed,hc.stride=vc;hc.divisor!==ke&&(k.vertexAttribDivisorANGLE(cc,ke),hc.divisor=ke)}else if(hc.buffer&&(H.disableVertexAttribArray(cc),hc.buffer=
null),hc.x!==rc||hc.y!==Tb||hc.z!==Xb||hc.w!==db)H.vertexAttrib4f(cc,rc,Tb,Xb,db),hc.x=rc,hc.y=Tb,hc.z=Xb,hc.w=db;Ac=fa.call(this,R,m,h);ad=!1;Qc=null;Rc=0;Sc=!1;wd=Xc=0;bd=1;Yc=0;kc=5126;cd=Uc=Zc=bc=0;sa(Ac)?(ad=!0,Qc=p.createStream(34962,Ac),kc=Qc.dtype):(Qc=p.getBuffer(Ac))?kc=Qc.dtype:"constant"in Ac?(bd=2,"number"===typeof Ac.constant?(Zc=Ac.constant,Uc=cd=bc=0):(Zc=0<Ac.constant.length?Ac.constant[0]:0,Uc=1<Ac.constant.length?Ac.constant[1]:0,cd=2<Ac.constant.length?Ac.constant[2]:0,bc=3<Ac.constant.length?
Ac.constant[3]:0)):(Qc=sa(Ac.buffer)?p.createStream(34962,Ac.buffer):p.getBuffer(Ac.buffer),kc="type"in Ac?be[Ac.type]:Qc.dtype,Sc=!!Ac.normalized,wd=Ac.size|0,Xc=Ac.offset|0,Yc=Ac.stride|0,Rc=Ac.divisor|0);yc=ka.location;hd=v[yc];if(1===bd){hd.buffer||H.enableVertexAttribArray(yc);pd=wd||1;if(hd.type!==kc||hd.size!==pd||hd.buffer!==Qc||hd.normalized!==Sc||hd.offset!==Xc||hd.stride!==Yc)H.bindBuffer(34962,Qc.buffer),H.vertexAttribPointer(yc,pd,kc,Sc,Yc,Xc),hd.type=kc,hd.size=pd,hd.buffer=Qc,hd.normalized=
Sc,hd.offset=Xc,hd.stride=Yc;hd.divisor!==Rc&&(k.vertexAttribDivisorANGLE(yc,Rc),hd.divisor=Rc)}else if(hd.buffer&&(H.disableVertexAttribArray(yc),hd.buffer=null),hd.x!==Zc||hd.y!==Uc||hd.z!==cd||hd.w!==bc)H.vertexAttrib4f(yc,Zc,Uc,cd,bc),hd.x=Zc,hd.y=Uc,hd.z=cd,hd.w=bc;qd=P.call(this,R,m,h);Ne=!1;id=null;mf=0;Nd=!1;de=Xd=0;Od=1;Kd=0;Id=5126;sd=ud=Tc=md=0;sa(qd)?(Ne=!0,id=p.createStream(34962,qd),Id=id.dtype):(id=p.getBuffer(qd))?Id=id.dtype:"constant"in qd?(Od=2,"number"===typeof qd.constant?(Tc=
qd.constant,ud=sd=md=0):(Tc=0<qd.constant.length?qd.constant[0]:0,ud=1<qd.constant.length?qd.constant[1]:0,sd=2<qd.constant.length?qd.constant[2]:0,md=3<qd.constant.length?qd.constant[3]:0)):(id=sa(qd.buffer)?p.createStream(34962,qd.buffer):p.getBuffer(qd.buffer),Id="type"in qd?be[qd.type]:id.dtype,Nd=!!qd.normalized,de=qd.size|0,Xd=qd.offset|0,Kd=qd.stride|0,mf=qd.divisor|0);jd=oa.location;xd=v[jd];if(1===Od){xd.buffer||H.enableVertexAttribArray(jd);Cd=de||1;if(xd.type!==Id||xd.size!==Cd||xd.buffer!==
id||xd.normalized!==Nd||xd.offset!==Xd||xd.stride!==Kd)H.bindBuffer(34962,id.buffer),H.vertexAttribPointer(jd,Cd,Id,Nd,Kd,Xd),xd.type=Id,xd.size=Cd,xd.buffer=id,xd.normalized=Nd,xd.offset=Xd,xd.stride=Kd;xd.divisor!==mf&&(k.vertexAttribDivisorANGLE(jd,mf),xd.divisor=mf)}else if(xd.buffer&&(H.disableVertexAttribArray(jd),xd.buffer=null),xd.x!==Tc||xd.y!==ud||xd.z!==sd||xd.w!==md)H.vertexAttrib4f(jd,Tc,ud,sd,md),xd.x=Tc,xd.y=ud,xd.z=sd,xd.w=md;Fd=T.call(this,R,m,h);oe=!1;qe=null;ue=0;je=!1;he=ie=0;
ve=1;ee=0;le=5126;pe=we=fd=Oc=0;sa(Fd)?(oe=!0,qe=p.createStream(34962,Fd),le=qe.dtype):(qe=p.getBuffer(Fd))?le=qe.dtype:"constant"in Fd?(ve=2,"number"===typeof Fd.constant?(fd=Fd.constant,we=pe=Oc=0):(fd=0<Fd.constant.length?Fd.constant[0]:0,we=1<Fd.constant.length?Fd.constant[1]:0,pe=2<Fd.constant.length?Fd.constant[2]:0,Oc=3<Fd.constant.length?Fd.constant[3]:0)):(qe=sa(Fd.buffer)?p.createStream(34962,Fd.buffer):p.getBuffer(Fd.buffer),le="type"in Fd?be[Fd.type]:qe.dtype,je=!!Fd.normalized,he=Fd.size|
0,ie=Fd.offset|0,ee=Fd.stride|0,ue=Fd.divisor|0);Ld=q.location;Pd=v[Ld];if(1===ve){Pd.buffer||H.enableVertexAttribArray(Ld);Rd=he||4;if(Pd.type!==le||Pd.size!==Rd||Pd.buffer!==qe||Pd.normalized!==je||Pd.offset!==ie||Pd.stride!==ee)H.bindBuffer(34962,qe.buffer),H.vertexAttribPointer(Ld,Rd,le,je,ee,ie),Pd.type=le,Pd.size=Rd,Pd.buffer=qe,Pd.normalized=je,Pd.offset=ie,Pd.stride=ee;Pd.divisor!==ue&&(k.vertexAttribDivisorANGLE(Ld,ue),Pd.divisor=ue)}else if(Pd.buffer&&(H.disableVertexAttribArray(Ld),Pd.buffer=
null),Pd.x!==fd||Pd.y!==we||Pd.z!==pe||Pd.w!==Oc)H.vertexAttrib4f(Ld,fd,we,pe,Oc),Pd.x=fd,Pd.y=we,Pd.z=pe,Pd.w=Oc;Sd=x.call(this,R,m,h);me=!1;He=null;Be=0;re=!1;Te=Se=0;Oe=1;xe=0;Fe=5126;Ge=Ke=Je=Ie=0;sa(Sd)?(me=!0,He=p.createStream(34962,Sd),Fe=He.dtype):(He=p.getBuffer(Sd))?Fe=He.dtype:"constant"in Sd?(Oe=2,"number"===typeof Sd.constant?(Je=Sd.constant,Ke=Ge=Ie=0):(Je=0<Sd.constant.length?Sd.constant[0]:0,Ke=1<Sd.constant.length?Sd.constant[1]:0,Ge=2<Sd.constant.length?Sd.constant[2]:0,Ie=3<Sd.constant.length?
Sd.constant[3]:0)):(He=sa(Sd.buffer)?p.createStream(34962,Sd.buffer):p.getBuffer(Sd.buffer),Fe="type"in Sd?be[Sd.type]:He.dtype,re=!!Sd.normalized,Te=Sd.size|0,Se=Sd.offset|0,xe=Sd.stride|0,Be=Sd.divisor|0);Md=za.location;Yd=v[Md];if(1===Oe){Yd.buffer||H.enableVertexAttribArray(Md);ce=Te||4;if(Yd.type!==Fe||Yd.size!==ce||Yd.buffer!==He||Yd.normalized!==re||Yd.offset!==Se||Yd.stride!==xe)H.bindBuffer(34962,He.buffer),H.vertexAttribPointer(Md,ce,Fe,re,xe,Se),Yd.type=Fe,Yd.size=ce,Yd.buffer=He,Yd.normalized=
re,Yd.offset=Se,Yd.stride=xe;Yd.divisor!==Be&&(k.vertexAttribDivisorANGLE(Md,Be),Yd.divisor=Be)}else if(Yd.buffer&&(H.disableVertexAttribArray(Md),Yd.buffer=null),Yd.x!==Je||Yd.y!==Ke||Yd.z!==Ge||Yd.w!==Ie)H.vertexAttrib4f(Md,Je,Ke,Ge,Ie),Yd.x=Je,Yd.y=Ke,Yd.z=Ge,Yd.w=Ie;fe=l.call(this,R,m,h);Le=!1;Jd=null;Td=0;De=!1;bf=Me=0;af=1;Ue=0;Pe=5126;We=Ve=Ye=$e=0;sa(fe)?(Le=!0,Jd=p.createStream(34962,fe),Pe=Jd.dtype):(Jd=p.getBuffer(fe))?Pe=Jd.dtype:"constant"in fe?(af=2,"number"===typeof fe.constant?(Ye=
fe.constant,Ve=We=$e=0):(Ye=0<fe.constant.length?fe.constant[0]:0,Ve=1<fe.constant.length?fe.constant[1]:0,We=2<fe.constant.length?fe.constant[2]:0,$e=3<fe.constant.length?fe.constant[3]:0)):(Jd=sa(fe.buffer)?p.createStream(34962,fe.buffer):p.getBuffer(fe.buffer),Pe="type"in fe?be[fe.type]:Jd.dtype,De=!!fe.normalized,bf=fe.size|0,Me=fe.offset|0,Ue=fe.stride|0,Td=fe.divisor|0);Ud=da.location;ae=v[Ud];if(1===af){ae.buffer||H.enableVertexAttribArray(Ud);Xe=bf||1;if(ae.type!==Pe||ae.size!==Xe||ae.buffer!==
Jd||ae.normalized!==De||ae.offset!==Me||ae.stride!==Ue)H.bindBuffer(34962,Jd.buffer),H.vertexAttribPointer(Ud,Xe,Pe,De,Ue,Me),ae.type=Pe,ae.size=Xe,ae.buffer=Jd,ae.normalized=De,ae.offset=Me,ae.stride=Ue;ae.divisor!==Td&&(k.vertexAttribDivisorANGLE(Ud,Td),ae.divisor=Td)}else if(ae.buffer&&(H.disableVertexAttribArray(Ud),ae.buffer=null),ae.x!==Ye||ae.y!==Ve||ae.z!==We||ae.w!==$e)H.vertexAttrib4f(Ud,Ye,Ve,We,$e),ae.x=Ye,ae.y=Ve,ae.z=We,ae.w=$e;hf=R.pixelRatio;h&&nf===hf||(nf=hf,H.uniform1f(wa.location,
hf));ef=m.scale;jf=ef[0];lf=ef[1];h&&kf===jf&&rf===lf||(kf=jf,rf=lf,H.uniform2f(ga.location,jf,lf));of=m.scaleFract;sf=of[0];Cf=of[1];h&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,H.uniform2f(Da.location,sf,Cf));Ee=m.translate;pf=Ee[0];Df=Ee[1];h&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,H.uniform2f(qa.location,pf,Df));Af=m.translateFract;Ef=Af[0];wf=Af[1];h&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,H.uniform2f(Aa.location,Ef,wf));vf=Q.call(this,R,m,h);yf=vf[0];If=vf[1];h&&zf===yf&&Kf===If||(zf=yf,Kf=If,H.uniform2f(ra.location,
yf,If));Lf=m.opacity;h&&Mf===Lf||(Mf=Lf,H.uniform1f(ma.location,Lf));(tf=m.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;H.uniform1i(S.location,Rf.bind());Hf=m.elements;uf=null;(uf=(dg=sa(Hf))?td.createStream(Hf):td.getElements(Hf))&&H.bindBuffer(34963,uf.buffer.buffer);Sf=m.offset;if(Tf=m.count)0<ob?uf?k.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),ob):k.drawArraysInstancedANGLE(0,Sf,Tf,ob):0>ob&&(uf?H.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>
1)):H.drawArrays(0,Sf,Tf)),R.viewportWidth=Ob,R.viewportHeight=jb,qb&&p.destroyStream(Sa),Pa&&p.destroyStream(Bc),nb&&p.destroyStream(fc),Qd&&p.destroyStream(Ec),ad&&p.destroyStream(Qc),Ne&&p.destroyStream(id),oe&&p.destroyStream(qe),me&&p.destroyStream(He),Le&&p.destroyStream(Jd),Rf.unbind(),dg&&td.destroyStream(uf)}N.unbind();ta.dirty=!0;Ja.setVAO(null);e&&(K.cpuTime+=performance.now()-f)},draw:function(a){var c,e,f,l,h,t,d,y,n,C,z,r,T,x,D,pa,P,E,la,Q,N,w,ya,O,U,V,Y,Z,ba,fa,ja,ca,xa,na,X,Ba,Cc,
yb,cb,Nb,ab,ob,Va,qd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,ke,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe;c=ha.next;c!==ha.cur&&(c?H.bindFramebuffer(36160,c.framebuffer):H.bindFramebuffer(36160,
null),ha.cur=c);if(ta.dirty){var Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf;Fe=Ea.dither;Fe!==ta.dither&&(Fe?H.enable(3024):H.disable(3024),ta.dither=Fe);Ie=ua[0];Je=ua[1];if(Ie!==Ia[0]||Je!==Ia[1])H.blendEquationSeparate(Ie,Je),Ia[0]=Ie,Ia[1]=Je;Ke=Ea.depth_func;Ke!==ta.depth_func&&(H.depthFunc(Ke),ta.depth_func=Ke);Ge=$b[0];Md=$b[1];if(Ge!==Ga[0]||Md!==Ga[1])H.depthRange(Ge,Md),Ga[0]=Ge,Ga[1]=Md;Yd=Ea.depth_mask;Yd!==ta.depth_mask&&(H.depthMask(Yd),
ta.depth_mask=Yd);ce=ea[0];fe=ea[1];Le=ea[2];Jd=ea[3];if(ce!==ia[0]||fe!==ia[1]||Le!==ia[2]||Jd!==ia[3])H.colorMask(ce,fe,Le,Jd),ia[0]=ce,ia[1]=fe,ia[2]=Le,ia[3]=Jd;Td=Ea.cull_enable;Td!==ta.cull_enable&&(Td?H.enable(2884):H.disable(2884),ta.cull_enable=Td);De=Ea.cull_face;De!==ta.cull_face&&(H.cullFace(De),ta.cull_face=De);Me=Ea.frontFace;Me!==ta.frontFace&&(H.frontFace(Me),ta.frontFace=Me);bf=Ea.lineWidth;bf!==ta.lineWidth&&(H.lineWidth(bf),ta.lineWidth=bf);af=Ea.polygonOffset_enable;af!==ta.polygonOffset_enable&&
(af?H.enable(32823):H.disable(32823),ta.polygonOffset_enable=af);Ue=ac[0];Pe=ac[1];if(Ue!==Sb[0]||Pe!==Sb[1])H.polygonOffset(Ue,Pe),Sb[0]=Ue,Sb[1]=Pe;$e=Ea.sample_alpha;$e!==ta.sample_alpha&&($e?H.enable(32926):H.disable(32926),ta.sample_alpha=$e);Ye=Ea.sample_enable;Ye!==ta.sample_enable&&(Ye?H.enable(32928):H.disable(32928),ta.sample_enable=Ye);Ve=Fa[0];We=Fa[1];if(Ve!==Gd[0]||We!==Gd[1])H.sampleCoverage(Ve,We),Gd[0]=Ve,Gd[1]=We;Ud=Ea.stencil_mask;Ud!==ta.stencil_mask&&(H.stencilMask(Ud),ta.stencil_mask=
Ud);ae=ze[0];Xe=ze[1];hf=ze[2];if(ae!==se[0]||Xe!==se[1]||hf!==se[2])H.stencilFunc(ae,Xe,hf),se[0]=ae,se[1]=Xe,se[2]=hf;nf=Ad[0];ef=Ad[1];jf=Ad[2];kf=Ad[3];if(nf!==Dd[0]||ef!==Dd[1]||jf!==Dd[2]||kf!==Dd[3])H.stencilOpSeparate(nf,ef,jf,kf),Dd[0]=nf,Dd[1]=ef,Dd[2]=jf,Dd[3]=kf;lf=Vd[0];rf=Vd[1];of=Vd[2];sf=Vd[3];if(lf!==ne[0]||rf!==ne[1]||of!==ne[2]||sf!==ne[3])H.stencilOpSeparate(lf,rf,of,sf),ne[0]=lf,ne[1]=rf,ne[2]=of,ne[3]=sf}e=a.viewport;f=e.x|0;l=e.y|0;h="width"in e?e.width|0:R.framebufferWidth-
f;t="height"in e?e.height|0:R.framebufferHeight-l;d=R.viewportWidth;R.viewportWidth=h;y=R.viewportHeight;R.viewportHeight=t;H.viewport(f,l,h,t);ge[0]=f;ge[1]=l;ge[2]=h;ge[3]=t;H.blendColor(0,0,0,1);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=1;H.enable(3042);ta.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;H.disable(2929);ta.depth_enable=!1;n=a.viewport;C=n.x|0;z=n.y|0;r="width"in n?n.width|0:R.framebufferWidth-C;T="height"in n?n.height|0:R.framebufferHeight-z;H.scissor(C,
z,r,T);Wd[0]=C;Wd[1]=z;Wd[2]=r;Wd[3]=T;H.enable(3089);ta.scissor_enable=!0;H.disable(2960);ta.stencil_enable=!1;if(x=ta.profile)D=performance.now(),K.count++;H.useProgram(I.program);pa=Hb.angle_instanced_arrays;Ja.setVAO(null);P=M.call(this,R,a,0);E=!1;la=null;Q=0;N=!1;ya=w=0;O=1;U=0;V=5126;fa=ba=Z=Y=0;sa(P)?(E=!0,la=p.createStream(34962,P),V=la.dtype):(la=p.getBuffer(P))?V=la.dtype:"constant"in P?(O=2,"number"===typeof P.constant?(Z=P.constant,ba=fa=Y=0):(Z=0<P.constant.length?P.constant[0]:0,ba=
1<P.constant.length?P.constant[1]:0,fa=2<P.constant.length?P.constant[2]:0,Y=3<P.constant.length?P.constant[3]:0)):(la=sa(P.buffer)?p.createStream(34962,P.buffer):p.getBuffer(P.buffer),V="type"in P?be[P.type]:la.dtype,N=!!P.normalized,ya=P.size|0,w=P.offset|0,U=P.stride|0,Q=P.divisor|0);ja=Ma.location;ca=v[ja];if(1===O){ca.buffer||H.enableVertexAttribArray(ja);xa=ya||1;if(ca.type!==V||ca.size!==xa||ca.buffer!==la||ca.normalized!==N||ca.offset!==w||ca.stride!==U)H.bindBuffer(34962,la.buffer),H.vertexAttribPointer(ja,
xa,V,N,U,w),ca.type=V,ca.size=xa,ca.buffer=la,ca.normalized=N,ca.offset=w,ca.stride=U;ca.divisor!==Q&&(pa.vertexAttribDivisorANGLE(ja,Q),ca.divisor=Q)}else if(ca.buffer&&(H.disableVertexAttribArray(ja),ca.buffer=null),ca.x!==Z||ca.y!==ba||ca.z!==fa||ca.w!==Y)H.vertexAttrib4f(ja,Z,ba,fa,Y),ca.x=Z,ca.y=ba,ca.z=fa,ca.w=Y;na=g.call(this,R,a,0);X=!1;Ba=null;Cc=0;yb=!1;Nb=cb=0;ab=1;ob=0;Va=5126;qc=Jb=Ib=qd=0;sa(na)?(X=!0,Ba=p.createStream(34962,na),Va=Ba.dtype):(Ba=p.getBuffer(na))?Va=Ba.dtype:"constant"in
na?(ab=2,"number"===typeof na.constant?(Ib=na.constant,Jb=qc=qd=0):(Ib=0<na.constant.length?na.constant[0]:0,Jb=1<na.constant.length?na.constant[1]:0,qc=2<na.constant.length?na.constant[2]:0,qd=3<na.constant.length?na.constant[3]:0)):(Ba=sa(na.buffer)?p.createStream(34962,na.buffer):p.getBuffer(na.buffer),Va="type"in na?be[na.type]:Ba.dtype,yb=!!na.normalized,Nb=na.size|0,cb=na.offset|0,ob=na.stride|0,Cc=na.divisor|0);Ob=eb.location;jb=v[Ob];if(1===ab){jb.buffer||H.enableVertexAttribArray(Ob);Gb=
Nb||1;if(jb.type!==Va||jb.size!==Gb||jb.buffer!==Ba||jb.normalized!==yb||jb.offset!==cb||jb.stride!==ob)H.bindBuffer(34962,Ba.buffer),H.vertexAttribPointer(Ob,Gb,Va,yb,ob,cb),jb.type=Va,jb.size=Gb,jb.buffer=Ba,jb.normalized=yb,jb.offset=cb,jb.stride=ob;jb.divisor!==Cc&&(pa.vertexAttribDivisorANGLE(Ob,Cc),jb.divisor=Cc)}else if(jb.buffer&&(H.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==qc||jb.w!==qd)H.vertexAttrib4f(Ob,Ib,Jb,qc,qd),jb.x=Ib,jb.y=Jb,jb.z=qc,jb.w=qd;Db=k.call(this,
R,a,0);wb=!1;hb=null;Yb=0;Pb=!1;Sa=qb=0;Ub=1;zb=0;ic=5126;rb=Ha=pb=ib=0;sa(Db)?(wb=!0,hb=p.createStream(34962,Db),ic=hb.dtype):(hb=p.getBuffer(Db))?ic=hb.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(pb=Db.constant,Ha=rb=ib=0):(pb=0<Db.constant.length?Db.constant[0]:0,Ha=1<Db.constant.length?Db.constant[1]:0,rb=2<Db.constant.length?Db.constant[2]:0,ib=3<Db.constant.length?Db.constant[3]:0)):(hb=sa(Db.buffer)?p.createStream(34962,Db.buffer):p.getBuffer(Db.buffer),ic="type"in Db?be[Db.type]:
hb.dtype,Pb=!!Db.normalized,Sa=Db.size|0,qb=Db.offset|0,zb=Db.stride|0,Yb=Db.divisor|0);Ka=F.location;fb=v[Ka];if(1===Ub){fb.buffer||H.enableVertexAttribArray(Ka);gb=Sa||1;if(fb.type!==ic||fb.size!==gb||fb.buffer!==hb||fb.normalized!==Pb||fb.offset!==qb||fb.stride!==zb)H.bindBuffer(34962,hb.buffer),H.vertexAttribPointer(Ka,gb,ic,Pb,zb,qb),fb.type=ic,fb.size=gb,fb.buffer=hb,fb.normalized=Pb,fb.offset=qb,fb.stride=zb;fb.divisor!==Yb&&(pa.vertexAttribDivisorANGLE(Ka,Yb),fb.divisor=Yb)}else if(fb.buffer&&
(H.disableVertexAttribArray(Ka),fb.buffer=null),fb.x!==pb||fb.y!==Ha||fb.z!==rb||fb.w!==ib)H.vertexAttrib4f(Ka,pb,Ha,rb,ib),fb.x=pb,fb.y=Ha,fb.z=rb,fb.w=ib;La=m.call(this,R,a,0);kb=!1;Wa=null;tb=0;sb=!1;Bc=Pa=0;Ra=1;Kb=0;Eb=5126;Lb=Ya=yd=Na=0;sa(La)?(kb=!0,Wa=p.createStream(34962,La),Eb=Wa.dtype):(Wa=p.getBuffer(La))?Eb=Wa.dtype:"constant"in La?(Ra=2,"number"===typeof La.constant?(yd=La.constant,Ya=Lb=Na=0):(yd=0<La.constant.length?La.constant[0]:0,Ya=1<La.constant.length?La.constant[1]:0,Lb=2<La.constant.length?
La.constant[2]:0,Na=3<La.constant.length?La.constant[3]:0)):(Wa=sa(La.buffer)?p.createStream(34962,La.buffer):p.getBuffer(La.buffer),Eb="type"in La?be[La.type]:Wa.dtype,sb=!!La.normalized,Bc=La.size|0,Pa=La.offset|0,Kb=La.stride|0,tb=La.divisor|0);Mb=Ua.location;lb=v[Mb];if(1===Ra){lb.buffer||H.enableVertexAttribArray(Mb);Oa=Bc||1;if(lb.type!==Eb||lb.size!==Oa||lb.buffer!==Wa||lb.normalized!==sb||lb.offset!==Pa||lb.stride!==Kb)H.bindBuffer(34962,Wa.buffer),H.vertexAttribPointer(Mb,Oa,Eb,sb,Kb,Pa),
lb.type=Eb,lb.size=Oa,lb.buffer=Wa,lb.normalized=sb,lb.offset=Pa,lb.stride=Kb;lb.divisor!==tb&&(pa.vertexAttribDivisorANGLE(Mb,tb),lb.divisor=tb)}else if(lb.buffer&&(H.disableVertexAttribArray(Mb),lb.buffer=null),lb.x!==yd||lb.y!==Ya||lb.z!==Lb||lb.w!==Na)H.vertexAttrib4f(Mb,yd,Ya,Lb,Na),lb.x=yd,lb.y=Ya,lb.z=Lb,lb.w=Na;Zb=b.call(this,R,a,0);Qa=!1;ub=null;vb=0;Ta=!1;fc=nb=0;zc=1;uc=0;bb=5126;Mc=Xa=gd=jc=0;sa(Zb)?(Qa=!0,ub=p.createStream(34962,Zb),bb=ub.dtype):(ub=p.getBuffer(Zb))?bb=ub.dtype:"constant"in
Zb?(zc=2,"number"===typeof Zb.constant?(gd=Zb.constant,Xa=Mc=jc=0):(gd=0<Zb.constant.length?Zb.constant[0]:0,Xa=1<Zb.constant.length?Zb.constant[1]:0,Mc=2<Zb.constant.length?Zb.constant[2]:0,jc=3<Zb.constant.length?Zb.constant[3]:0)):(ub=sa(Zb.buffer)?p.createStream(34962,Zb.buffer):p.getBuffer(Zb.buffer),bb="type"in Zb?be[Zb.type]:ub.dtype,Ta=!!Zb.normalized,fc=Zb.size|0,nb=Zb.offset|0,uc=Zb.stride|0,vb=Zb.divisor|0);Ab=ka.location;Za=v[Ab];if(1===zc){Za.buffer||H.enableVertexAttribArray(Ab);Vb=
fc||1;if(Za.type!==bb||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Ta||Za.offset!==nb||Za.stride!==uc)H.bindBuffer(34962,ub.buffer),H.vertexAttribPointer(Ab,Vb,bb,Ta,uc,nb),Za.type=bb,Za.size=Vb,Za.buffer=ub,Za.normalized=Ta,Za.offset=nb,Za.stride=uc;Za.divisor!==vb&&(pa.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&(H.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==gd||Za.y!==Xa||Za.z!==Mc||Za.w!==jc)H.vertexAttrib4f(Ab,gd,Xa,Mc,jc),Za.x=gd,Za.y=Xa,Za.z=Mc,Za.w=jc;sc=G.call(this,
R,a,0);Wb=!1;Qb=null;Kc=0;Rb=!1;Ec=ke=0;Ed=1;Nc=0;ed=5126;gc=vc=nc=od=0;sa(sc)?(Wb=!0,Qb=p.createStream(34962,sc),ed=Qb.dtype):(Qb=p.getBuffer(sc))?ed=Qb.dtype:"constant"in sc?(Ed=2,"number"===typeof sc.constant?(nc=sc.constant,vc=gc=od=0):(nc=0<sc.constant.length?sc.constant[0]:0,vc=1<sc.constant.length?sc.constant[1]:0,gc=2<sc.constant.length?sc.constant[2]:0,od=3<sc.constant.length?sc.constant[3]:0)):(Qb=sa(sc.buffer)?p.createStream(34962,sc.buffer):p.getBuffer(sc.buffer),ed="type"in sc?be[sc.type]:
Qb.dtype,Rb=!!sc.normalized,Ec=sc.size|0,ke=sc.offset|0,Nc=sc.stride|0,Kc=sc.divisor|0);db=oa.location;rc=v[db];if(1===Ed){rc.buffer||H.enableVertexAttribArray(db);Tb=Ec||1;if(rc.type!==ed||rc.size!==Tb||rc.buffer!==Qb||rc.normalized!==Rb||rc.offset!==ke||rc.stride!==Nc)H.bindBuffer(34962,Qb.buffer),H.vertexAttribPointer(db,Tb,ed,Rb,Nc,ke),rc.type=ed,rc.size=Tb,rc.buffer=Qb,rc.normalized=Rb,rc.offset=ke,rc.stride=Nc;rc.divisor!==Kc&&(pa.vertexAttribDivisorANGLE(db,Kc),rc.divisor=Kc)}else if(rc.buffer&&
(H.disableVertexAttribArray(db),rc.buffer=null),rc.x!==nc||rc.y!==vc||rc.z!==gc||rc.w!==od)H.vertexAttrib4f(db,nc,vc,gc,od),rc.x=nc,rc.y=vc,rc.z=gc,rc.w=od;Xb=B.call(this,R,a,0);cc=!1;hc=null;xc=0;Ac=!1;Qc=ad=0;Rc=1;Sc=0;Xc=5126;kc=Yc=bd=wd=0;sa(Xb)?(cc=!0,hc=p.createStream(34962,Xb),Xc=hc.dtype):(hc=p.getBuffer(Xb))?Xc=hc.dtype:"constant"in Xb?(Rc=2,"number"===typeof Xb.constant?(bd=Xb.constant,Yc=kc=wd=0):(bd=0<Xb.constant.length?Xb.constant[0]:0,Yc=1<Xb.constant.length?Xb.constant[1]:0,kc=2<Xb.constant.length?
Xb.constant[2]:0,wd=3<Xb.constant.length?Xb.constant[3]:0)):(hc=sa(Xb.buffer)?p.createStream(34962,Xb.buffer):p.getBuffer(Xb.buffer),Xc="type"in Xb?be[Xb.type]:hc.dtype,Ac=!!Xb.normalized,Qc=Xb.size|0,ad=Xb.offset|0,Sc=Xb.stride|0,xc=Xb.divisor|0);bc=q.location;Zc=v[bc];if(1===Rc){Zc.buffer||H.enableVertexAttribArray(bc);Uc=Qc||4;if(Zc.type!==Xc||Zc.size!==Uc||Zc.buffer!==hc||Zc.normalized!==Ac||Zc.offset!==ad||Zc.stride!==Sc)H.bindBuffer(34962,hc.buffer),H.vertexAttribPointer(bc,Uc,Xc,Ac,Sc,ad),
Zc.type=Xc,Zc.size=Uc,Zc.buffer=hc,Zc.normalized=Ac,Zc.offset=ad,Zc.stride=Sc;Zc.divisor!==xc&&(pa.vertexAttribDivisorANGLE(bc,xc),Zc.divisor=xc)}else if(Zc.buffer&&(H.disableVertexAttribArray(bc),Zc.buffer=null),Zc.x!==bd||Zc.y!==Yc||Zc.z!==kc||Zc.w!==wd)H.vertexAttrib4f(bc,bd,Yc,kc,wd),Zc.x=bd,Zc.y=Yc,Zc.z=kc,Zc.w=wd;cd=L.call(this,R,a,0);yc=!1;hd=null;pd=0;ye=!1;id=Ne=0;mf=1;Nd=0;Xd=5126;Id=Kd=Od=de=0;sa(cd)?(yc=!0,hd=p.createStream(34962,cd),Xd=hd.dtype):(hd=p.getBuffer(cd))?Xd=hd.dtype:"constant"in
cd?(mf=2,"number"===typeof cd.constant?(Od=cd.constant,Kd=Id=de=0):(Od=0<cd.constant.length?cd.constant[0]:0,Kd=1<cd.constant.length?cd.constant[1]:0,Id=2<cd.constant.length?cd.constant[2]:0,de=3<cd.constant.length?cd.constant[3]:0)):(hd=sa(cd.buffer)?p.createStream(34962,cd.buffer):p.getBuffer(cd.buffer),Xd="type"in cd?be[cd.type]:hd.dtype,ye=!!cd.normalized,id=cd.size|0,Ne=cd.offset|0,Nd=cd.stride|0,pd=cd.divisor|0);md=za.location;Tc=v[md];if(1===mf){Tc.buffer||H.enableVertexAttribArray(md);ud=
id||4;if(Tc.type!==Xd||Tc.size!==ud||Tc.buffer!==hd||Tc.normalized!==ye||Tc.offset!==Ne||Tc.stride!==Nd)H.bindBuffer(34962,hd.buffer),H.vertexAttribPointer(md,ud,Xd,ye,Nd,Ne),Tc.type=Xd,Tc.size=ud,Tc.buffer=hd,Tc.normalized=ye,Tc.offset=Ne,Tc.stride=Nd;Tc.divisor!==pd&&(pa.vertexAttribDivisorANGLE(md,pd),Tc.divisor=pd)}else if(Tc.buffer&&(H.disableVertexAttribArray(md),Tc.buffer=null),Tc.x!==Od||Tc.y!==Kd||Tc.z!==Id||Tc.w!==de)H.vertexAttrib4f(md,Od,Kd,Id,de),Tc.x=Od,Tc.y=Kd,Tc.z=Id,Tc.w=de;sd=W.call(this,
R,a,0);jd=!1;xd=null;Cd=0;Fd=!1;qe=oe=0;ue=1;je=0;ie=5126;le=ee=ve=he=0;sa(sd)?(jd=!0,xd=p.createStream(34962,sd),ie=xd.dtype):(xd=p.getBuffer(sd))?ie=xd.dtype:"constant"in sd?(ue=2,"number"===typeof sd.constant?(ve=sd.constant,ee=le=he=0):(ve=0<sd.constant.length?sd.constant[0]:0,ee=1<sd.constant.length?sd.constant[1]:0,le=2<sd.constant.length?sd.constant[2]:0,he=3<sd.constant.length?sd.constant[3]:0)):(xd=sa(sd.buffer)?p.createStream(34962,sd.buffer):p.getBuffer(sd.buffer),ie="type"in sd?be[sd.type]:
xd.dtype,Fd=!!sd.normalized,qe=sd.size|0,oe=sd.offset|0,je=sd.stride|0,Cd=sd.divisor|0);Oc=da.location;fd=v[Oc];if(1===ue){fd.buffer||H.enableVertexAttribArray(Oc);we=qe||1;if(fd.type!==ie||fd.size!==we||fd.buffer!==xd||fd.normalized!==Fd||fd.offset!==oe||fd.stride!==je)H.bindBuffer(34962,xd.buffer),H.vertexAttribPointer(Oc,we,ie,Fd,je,oe),fd.type=ie,fd.size=we,fd.buffer=xd,fd.normalized=Fd,fd.offset=oe,fd.stride=je;fd.divisor!==Cd&&(pa.vertexAttribDivisorANGLE(Oc,Cd),fd.divisor=Cd)}else if(fd.buffer&&
(H.disableVertexAttribArray(Oc),fd.buffer=null),fd.x!==ve||fd.y!==ee||fd.z!==le||fd.w!==he)H.vertexAttrib4f(Oc,ve,ee,le,he),fd.x=ve,fd.y=ee,fd.z=le,fd.w=he;H.uniform1i(J.location,!1);H.uniform1f(wa.location,R.pixelRatio);pe=a.scale;H.uniform2f(ga.location,pe[0],pe[1]);Ld=a.scaleFract;H.uniform2f(Da.location,Ld[0],Ld[1]);Pd=a.translate;H.uniform2f(qa.location,Pd[0],Pd[1]);Rd=a.translateFract;H.uniform2f(Aa.location,Rd[0],Rd[1]);Sd=u.call(this,R,a,0);H.uniform2f(ra.location,Sd[0],Sd[1]);H.uniform1f(ma.location,
a.opacity);H.uniform1i(Ca.location,A.bind());(me=a.markerTexture)&&"framebuffer"===me._reglType&&(me=me.color[0]);He=me._texture;H.uniform1i(S.location,He.bind());Be=a.elements;re=null;(re=(Se=sa(Be))?td.createStream(Be):td.getElements(Be))&&H.bindBuffer(34963,re.buffer.buffer);Te=a.offset;if(Oe=a.count)xe=va.instances,0<xe?re?pa.drawElementsInstancedANGLE(0,Oe,re.type,Te<<(re.type-5121>>1),xe):pa.drawArraysInstancedANGLE(0,Te,Oe,xe):0>xe&&(re?H.drawElements(0,Oe,re.type,Te<<(re.type-5121>>1)):H.drawArrays(0,
Te,Oe)),ta.dirty=!0,Ja.setVAO(null),R.viewportWidth=d,R.viewportHeight=y,x&&(K.cpuTime+=performance.now()-D),E&&p.destroyStream(la),X&&p.destroyStream(Ba),wb&&p.destroyStream(hb),kb&&p.destroyStream(Wa),Qa&&p.destroyStream(ub),Wb&&p.destroyStream(Qb),cc&&p.destroyStream(hc),yc&&p.destroyStream(hd),jd&&p.destroyStream(xd),A.unbind(),He.unbind(),Se&&td.destroyStream(re)},scope:function(b,k,l){var v,q,m,H,F,g,d,y,J,T,x,S,P,ga,ha,M,eb,Q,u,A,Ma,N,aa,B,da,I,wa,G,za,ra,L,Ja,ea,W,ka,Y,fa,Ua,qa,Da,ma,oa,Aa,
na,xa,ua,Hb,Ca,X,Ga,Cc,mb,Ia,Sb,Sa,ia,$b,ac,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Wd,Ra,Kb,Eb,Na,zd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,Gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Fa,Ec,Vd,Nc,ed,ge,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,ze,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,Dd,ne,id,Ad,se,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,Jf,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,
rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;v=b.viewport;q=v.x|0;m=v.y|0;H="width"in v?v.width|0:R.framebufferWidth-q;F="height"in v?v.height|0:R.framebufferHeight-m;g=R.viewportWidth;R.viewportWidth=H;d=R.viewportHeight;R.viewportHeight=F;y=qd[0];qd[0]=q;J=qd[1];qd[1]=m;T=qd[2];qd[2]=H;
x=qd[3];qd[3]=F;S=la[0];la[0]=0;P=la[1];la[1]=0;ga=la[2];la[2]=0;ha=la[3];la[3]=1;M=Ea.blend_enable;Ea.blend_enable=!0;eb=Ba[0];Ba[0]=770;Q=Ba[1];Ba[1]=771;u=Ba[2];Ba[2]=773;A=Ba[3];Ba[3]=1;Ma=Ea.depth_enable;Ea.depth_enable=!1;N=b.viewport;aa=N.x|0;B=N.y|0;da="width"in N?N.width|0:R.framebufferWidth-aa;I="height"in N?N.height|0:R.framebufferHeight-B;wa=ke[0];ke[0]=aa;G=ke[1];ke[1]=B;za=ke[2];ke[2]=da;ra=ke[3];ke[3]=I;L=Ea.scissor_enable;Ea.scissor_enable=!0;Ja=Ea.stencil_enable;Ea.stencil_enable=
!1;if(ea=ta.profile)W=performance.now(),K.count++;ka=b.elements;Y=null;Y=(fa=sa(ka))?td.createStream(ka):td.getElements(ka);Ua=va.elements;va.elements=Y;qa=b.offset;Da=va.offset;va.offset=qa;ma=b.count;oa=va.count;va.count=ma;Aa=va.primitive;va.primitive=0;na=ya[45];ya[45]=!1;xa=b.markerTexture;ua=ya[48];ya[48]=xa;Hb=b.opacity;Ca=ya[10];ya[10]=Hb;X=w.call(this,R,b,l);Ga=ya[46];ya[46]=X;Cc=ya[47];ya[47]=Z;mb=R.pixelRatio;Ia=ya[34];ya[34]=mb;Sb=b.scale;Sa=ya[6];ya[6]=Sb;ia=b.scaleFract;$b=ya[7];ya[7]=
ia;ac=b.translate;ib=ya[8];ya[8]=ac;pb=b.translateFract;Ha=ya[9];ya[9]=pb;rb=r.call(this,R,b,l);Ka=!1;fb=null;gb=0;La=!1;Wa=kb=0;tb=1;sb=0;Pa=5126;Eb=Kb=Ra=Wd=0;sa(rb)?(Ka=!0,fb=p.createStream(34962,rb),Pa=fb.dtype):(fb=p.getBuffer(rb))?Pa=fb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Ra=rb.constant,Kb=Eb=Wd=0):(Ra=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Eb=2<rb.constant.length?rb.constant[2]:0,Wd=3<rb.constant.length?rb.constant[3]:0)):(fb=sa(rb.buffer)?
p.createStream(34962,rb.buffer):p.getBuffer(rb.buffer),Pa="type"in rb?be[rb.type]:fb.dtype,La=!!rb.normalized,Wa=rb.size|0,kb=rb.offset|0,sb=rb.stride|0,gb=rb.divisor|0);Na=U.buffer;U.buffer=fb;zd=U.divisor;U.divisor=gb;Ya=U.normalized;U.normalized=La;Lb=U.offset;U.offset=kb;Mb=U.size;U.size=Wa;lb=U.state;U.state=tb;Oa=U.stride;U.stride=sb;Zb=U.type;U.type=Pa;Qa=U.w;U.w=Wd;ub=U.x;U.x=Ra;vb=U.y;U.y=Kb;Ta=U.z;U.z=Eb;nb=n.call(this,R,b,l);fc=!1;zc=null;uc=0;bb=!1;Gd=jc=0;Xa=1;Mc=0;Ab=5126;Wb=sc=Vb=Za=
0;sa(nb)?(fc=!0,zc=p.createStream(34962,nb),Ab=zc.dtype):(zc=p.getBuffer(nb))?Ab=zc.dtype:"constant"in nb?(Xa=2,"number"===typeof nb.constant?(Vb=nb.constant,sc=Wb=Za=0):(Vb=0<nb.constant.length?nb.constant[0]:0,sc=1<nb.constant.length?nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,Za=3<nb.constant.length?nb.constant[3]:0)):(zc=sa(nb.buffer)?p.createStream(34962,nb.buffer):p.getBuffer(nb.buffer),Ab="type"in nb?be[nb.type]:zc.dtype,bb=!!nb.normalized,Gd=nb.size|0,jc=nb.offset|0,Mc=nb.stride|
0,uc=nb.divisor|0);Qb=O.buffer;O.buffer=zc;Kc=O.divisor;O.divisor=uc;Rb=O.normalized;O.normalized=bb;Fa=O.offset;O.offset=jc;Ec=O.size;O.size=Gd;Vd=O.state;O.state=Xa;Nc=O.stride;O.stride=Mc;ed=O.type;O.type=Ab;ge=O.w;O.w=Za;nc=O.x;O.x=Vb;vc=O.y;O.y=sc;gc=O.z;O.z=Wb;db=ja.call(this,R,b,l);rc=!1;Tb=null;Xb=0;cc=!1;xc=hc=0;Ac=1;ad=0;Qc=5126;ze=Xc=Sc=Rc=0;sa(db)?(rc=!0,Tb=p.createStream(34962,db),Qc=Tb.dtype):(Tb=p.getBuffer(db))?Qc=Tb.dtype:"constant"in db?(Ac=2,"number"===typeof db.constant?(Sc=db.constant,
Xc=ze=Rc=0):(Sc=0<db.constant.length?db.constant[0]:0,Xc=1<db.constant.length?db.constant[1]:0,ze=2<db.constant.length?db.constant[2]:0,Rc=3<db.constant.length?db.constant[3]:0)):(Tb=sa(db.buffer)?p.createStream(34962,db.buffer):p.getBuffer(db.buffer),Qc="type"in db?be[db.type]:Tb.dtype,cc=!!db.normalized,xc=db.size|0,hc=db.offset|0,ad=db.stride|0,Xb=db.divisor|0);bd=e.buffer;e.buffer=Tb;Yc=e.divisor;e.divisor=Xb;kc=e.normalized;e.normalized=cc;bc=e.offset;e.offset=hc;Zc=e.size;e.size=xc;Uc=e.state;
e.state=Ac;cd=e.stride;e.stride=ad;yc=e.type;e.type=Qc;hd=e.w;e.w=Rc;pd=e.x;e.x=Sc;Dd=e.y;e.y=Xc;ne=e.z;e.z=ze;id=C.call(this,R,b,l);Ad=!1;se=null;Xd=0;de=!1;Kd=Od=0;Id=1;md=0;Tc=5126;xd=jd=sd=ud=0;sa(id)?(Ad=!0,se=p.createStream(34962,id),Tc=se.dtype):(se=p.getBuffer(id))?Tc=se.dtype:"constant"in id?(Id=2,"number"===typeof id.constant?(sd=id.constant,jd=xd=ud=0):(sd=0<id.constant.length?id.constant[0]:0,jd=1<id.constant.length?id.constant[1]:0,xd=2<id.constant.length?id.constant[2]:0,ud=3<id.constant.length?
id.constant[3]:0)):(se=sa(id.buffer)?p.createStream(34962,id.buffer):p.getBuffer(id.buffer),Tc="type"in id?be[id.type]:se.dtype,de=!!id.normalized,Kd=id.size|0,Od=id.offset|0,md=id.stride|0,Xd=id.divisor|0);Cd=V.buffer;V.buffer=se;Fd=V.divisor;V.divisor=Xd;oe=V.normalized;V.normalized=de;qe=V.offset;V.offset=Od;ue=V.size;V.size=Kd;je=V.state;V.state=Id;ie=V.stride;V.stride=md;he=V.type;V.type=Tc;ve=V.w;V.w=ud;ee=V.x;V.x=sd;le=V.y;V.y=jd;Oc=V.z;V.z=xd;fd=f.call(this,R,b,l);we=!1;pe=null;Ld=0;Pd=!1;
Sd=Rd=0;me=1;Jf=0;Be=5126;Oe=Te=Se=re=0;sa(fd)?(we=!0,pe=p.createStream(34962,fd),Be=pe.dtype):(pe=p.getBuffer(fd))?Be=pe.dtype:"constant"in fd?(me=2,"number"===typeof fd.constant?(Se=fd.constant,Te=Oe=re=0):(Se=0<fd.constant.length?fd.constant[0]:0,Te=1<fd.constant.length?fd.constant[1]:0,Oe=2<fd.constant.length?fd.constant[2]:0,re=3<fd.constant.length?fd.constant[3]:0)):(pe=sa(fd.buffer)?p.createStream(34962,fd.buffer):p.getBuffer(fd.buffer),Be="type"in fd?be[fd.type]:pe.dtype,Pd=!!fd.normalized,
Sd=fd.size|0,Rd=fd.offset|0,Jf=fd.stride|0,Ld=fd.divisor|0);xe=ba.buffer;ba.buffer=pe;Fe=ba.divisor;ba.divisor=Ld;Ie=ba.normalized;ba.normalized=Pd;Je=ba.offset;ba.offset=Rd;Ke=ba.size;ba.size=Sd;Ge=ba.state;ba.state=me;Md=ba.stride;ba.stride=Jf;Yd=ba.type;ba.type=Be;ce=ba.w;ba.w=re;fe=ba.x;ba.x=Se;Le=ba.y;ba.y=Te;Jd=ba.z;ba.z=Oe;Td=h.call(this,R,b,l);De=!1;Me=null;bf=0;af=!1;Pe=Ue=0;$e=1;Ye=0;Ve=5126;Xe=ae=Ud=We=0;sa(Td)?(De=!0,Me=p.createStream(34962,Td),Ve=Me.dtype):(Me=p.getBuffer(Td))?Ve=Me.dtype:
"constant"in Td?($e=2,"number"===typeof Td.constant?(Ud=Td.constant,ae=Xe=We=0):(Ud=0<Td.constant.length?Td.constant[0]:0,ae=1<Td.constant.length?Td.constant[1]:0,Xe=2<Td.constant.length?Td.constant[2]:0,We=3<Td.constant.length?Td.constant[3]:0)):(Me=sa(Td.buffer)?p.createStream(34962,Td.buffer):p.getBuffer(Td.buffer),Ve="type"in Td?be[Td.type]:Me.dtype,af=!!Td.normalized,Pe=Td.size|0,Ue=Td.offset|0,Ye=Td.stride|0,bf=Td.divisor|0);hf=z.buffer;z.buffer=Me;nf=z.divisor;z.divisor=bf;ef=z.normalized;
z.normalized=af;jf=z.offset;z.offset=Ue;kf=z.size;z.size=Pe;lf=z.state;z.state=$e;rf=z.stride;z.stride=Ye;of=z.type;z.type=Ve;sf=z.w;z.w=We;Bf=z.x;z.x=Ud;Cf=z.y;z.y=ae;Qe=z.z;z.z=Xe;Ee=ca.call(this,R,b,l);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Ee)?(pf=!0,qf=p.createStream(34962,Ee),xf=qf.dtype):(qf=p.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?
Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=sa(Ee.buffer)?p.createStream(34962,Ee.buffer):p.getBuffer(Ee.buffer),xf="type"in Ee?be[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Kf=E.buffer;E.buffer=qf;Lf=E.divisor;E.divisor=Df;Mf=E.normalized;E.normalized=Gf;tf=E.offset;E.offset=Af;Rf=E.size;E.size=Ef;Hf=E.state;E.state=Ff;uf=E.stride;E.stride=wf;dg=E.type;E.type=xf;Sf=E.w;E.w=vf;Tf=E.x;
E.x=yf;qg=E.y;E.y=zf;ff=E.z;E.z=If;cf=D.call(this,R,b,l);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;sa(cf)?(Nf=!0,Of=p.createStream(34962,cf),Uf=Of.dtype):(Of=p.getBuffer(cf))?Uf=Of.dtype:"constant"in cf?(ig=2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Of=sa(cf.buffer)?p.createStream(34962,cf.buffer):
p.getBuffer(cf.buffer),Uf="type"in cf?be[cf.type]:Of.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=c.buffer;c.buffer=Of;sg=c.divisor;c.divisor=eg;tg=c.normalized;c.normalized=fg;ug=c.offset;c.offset=gg;vg=c.size;c.size=hg;wg=c.state;c.state=ig;xg=c.stride;c.stride=Wf;yg=c.type;c.type=Uf;zg=c.w;c.w=Xf;Ag=c.x;c.x=Yf;Bg=c.y;c.y=Zf;gf=c.z;c.z=jg;df=t.call(this,R,b,l);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;sa(df)?(Pf=!0,Qf=p.createStream(34962,
df),Vf=Qf.dtype):(Qf=p.getBuffer(df))?Vf=Qf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Qf=sa(df.buffer)?p.createStream(34962,df.buffer):p.getBuffer(df.buffer),Vf="type"in df?be[df.type]:Qf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=a.buffer;a.buffer=
Qf;Dg=a.divisor;a.divisor=kg;Eg=a.normalized;a.normalized=lg;Fg=a.offset;a.offset=mg;Gg=a.size;a.size=ng;Hg=a.state;a.state=og;Ig=a.stride;a.stride=$f;Jg=a.type;a.type=Vf;Kg=a.w;a.w=ag;Lg=a.x;a.x=bg;Mg=a.y;a.y=cg;Ng=a.z;a.z=pg;Og=pa.vert;pa.vert=44;Pg=pa.frag;pa.frag=43;ta.dirty=!0;k(R,b,l);R.viewportWidth=g;R.viewportHeight=d;qd[0]=y;qd[1]=J;qd[2]=T;qd[3]=x;la[0]=S;la[1]=P;la[2]=ga;la[3]=ha;Ea.blend_enable=M;Ba[0]=eb;Ba[1]=Q;Ba[2]=u;Ba[3]=A;Ea.depth_enable=Ma;ke[0]=wa;ke[1]=G;ke[2]=za;ke[3]=ra;Ea.scissor_enable=
L;Ea.stencil_enable=Ja;ea&&(K.cpuTime+=performance.now()-W);fa&&td.destroyStream(Y);va.elements=Ua;va.offset=Da;va.count=oa;va.primitive=Aa;ya[45]=na;ya[48]=ua;ya[10]=Ca;ya[46]=Ga;ya[47]=Cc;ya[34]=Ia;ya[6]=Sa;ya[7]=$b;ya[8]=ib;ya[9]=Ha;Ka&&p.destroyStream(fb);U.buffer=Na;U.divisor=zd;U.normalized=Ya;U.offset=Lb;U.size=Mb;U.state=lb;U.stride=Oa;U.type=Zb;U.w=Qa;U.x=ub;U.y=vb;U.z=Ta;fc&&p.destroyStream(zc);O.buffer=Qb;O.divisor=Kc;O.normalized=Rb;O.offset=Fa;O.size=Ec;O.state=Vd;O.stride=Nc;O.type=
ed;O.w=ge;O.x=nc;O.y=vc;O.z=gc;rc&&p.destroyStream(Tb);e.buffer=bd;e.divisor=Yc;e.normalized=kc;e.offset=bc;e.size=Zc;e.state=Uc;e.stride=cd;e.type=yc;e.w=hd;e.x=pd;e.y=Dd;e.z=ne;Ad&&p.destroyStream(se);V.buffer=Cd;V.divisor=Fd;V.normalized=oe;V.offset=qe;V.size=ue;V.state=je;V.stride=ie;V.type=he;V.w=ve;V.x=ee;V.y=le;V.z=Oc;we&&p.destroyStream(pe);ba.buffer=xe;ba.divisor=Fe;ba.normalized=Ie;ba.offset=Je;ba.size=Ke;ba.state=Ge;ba.stride=Md;ba.type=Yd;ba.w=ce;ba.x=fe;ba.y=Le;ba.z=Jd;De&&p.destroyStream(Me);
z.buffer=hf;z.divisor=nf;z.normalized=ef;z.offset=jf;z.size=kf;z.state=lf;z.stride=rf;z.type=of;z.w=sf;z.x=Bf;z.y=Cf;z.z=Qe;pf&&p.destroyStream(qf);E.buffer=Kf;E.divisor=Lf;E.normalized=Mf;E.offset=tf;E.size=Rf;E.state=Hf;E.stride=uf;E.type=dg;E.w=Sf;E.x=Tf;E.y=qg;E.z=ff;Nf&&p.destroyStream(Of);c.buffer=rg;c.divisor=sg;c.normalized=tg;c.offset=ug;c.size=vg;c.state=wg;c.stride=xg;c.type=yg;c.w=zg;c.x=Ag;c.y=Bg;c.z=gf;Pf&&p.destroyStream(Qf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=
Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;pa.vert=Og;pa.frag=Pg;ta.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,X,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb){var Ua,v,p,R,ta,va,td,Hb,ha,H,sa,Ea,pa,ya,Ja,la,aa,ua,Ia,Ba,mb,ea,ia,
$b,Ga,ac,Sb,Fa,Gd,ke,Wd,ze,se,Vd,ne,Ad,Dd,qd,ge;Ua=d.attributes;v=d.buffer;p=d.context;R=d.current;ta=d.draw;va=d.elements;td=d.extensions;Hb=d.framebuffer;ha=d.gl;H=d.isBufferArgs;sa=d.next;Ea=d.shader;pa=d.uniforms;ya=d.vao;Ja=sa.blend_color;la=R.blend_color;aa=sa.blend_equation;ua=R.blend_equation;Ia=sa.blend_func;Ba=R.blend_func;mb=sa.colorMask;ea=R.colorMask;ia=sa.depth_range;$b=R.depth_range;Ga=sa.polygonOffset_offset;ac=R.polygonOffset_offset;Sb=sa.sample_coverage;Fa=R.sample_coverage;Gd=sa.scissor_box;
ke=R.scissor_box;Wd=sa.stencil_func;ze=R.stencil_func;se=sa.stencil_opBack;Vd=R.stencil_opBack;ne=sa.stencil_opFront;Ad=R.stencil_opFront;Dd=sa.viewport;qd=R.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,e,f,k,h,m;b=Hb.next;b!==Hb.cur&&(b?ha.bindFramebuffer(36160,b.framebuffer):ha.bindFramebuffer(36160,null),Hb.cur=b);if(R.dirty){var t,g,d,n,C,z,r,Ea,D,pa,M,E,u,A,B,w,I,O,G,L,Ja,U,W,V,Z,ba,ja,ca,Ia,$a,Fc,
yb,cb,Nb;t=sa.dither;t!==R.dither&&(t?ha.enable(3024):ha.disable(3024),R.dither=t);g=aa[0];d=aa[1];if(g!==ua[0]||d!==ua[1])ha.blendEquationSeparate(g,d),ua[0]=g,ua[1]=d;n=sa.depth_func;n!==R.depth_func&&(ha.depthFunc(n),R.depth_func=n);C=ia[0];z=ia[1];if(C!==$b[0]||z!==$b[1])ha.depthRange(C,z),$b[0]=C,$b[1]=z;r=sa.depth_mask;r!==R.depth_mask&&(ha.depthMask(r),R.depth_mask=r);Ea=mb[0];D=mb[1];pa=mb[2];M=mb[3];if(Ea!==ea[0]||D!==ea[1]||pa!==ea[2]||M!==ea[3])ha.colorMask(Ea,D,pa,M),ea[0]=Ea,ea[1]=D,
ea[2]=pa,ea[3]=M;E=sa.cull_enable;E!==R.cull_enable&&(E?ha.enable(2884):ha.disable(2884),R.cull_enable=E);u=sa.cull_face;u!==R.cull_face&&(ha.cullFace(u),R.cull_face=u);A=sa.frontFace;A!==R.frontFace&&(ha.frontFace(A),R.frontFace=A);B=sa.lineWidth;B!==R.lineWidth&&(ha.lineWidth(B),R.lineWidth=B);w=sa.polygonOffset_enable;w!==R.polygonOffset_enable&&(w?ha.enable(32823):ha.disable(32823),R.polygonOffset_enable=w);I=Ga[0];O=Ga[1];if(I!==ac[0]||O!==ac[1])ha.polygonOffset(I,O),ac[0]=I,ac[1]=O;G=sa.sample_alpha;
G!==R.sample_alpha&&(G?ha.enable(32926):ha.disable(32926),R.sample_alpha=G);L=sa.sample_enable;L!==R.sample_enable&&(L?ha.enable(32928):ha.disable(32928),R.sample_enable=L);Ja=Sb[0];U=Sb[1];if(Ja!==Fa[0]||U!==Fa[1])ha.sampleCoverage(Ja,U),Fa[0]=Ja,Fa[1]=U;W=sa.stencil_mask;W!==R.stencil_mask&&(ha.stencilMask(W),R.stencil_mask=W);V=Wd[0];Z=Wd[1];ba=Wd[2];if(V!==ze[0]||Z!==ze[1]||ba!==ze[2])ha.stencilFunc(V,Z,ba),ze[0]=V,ze[1]=Z,ze[2]=ba;ja=ne[0];ca=ne[1];Ia=ne[2];$a=ne[3];if(ja!==Ad[0]||ca!==Ad[1]||
Ia!==Ad[2]||$a!==Ad[3])ha.stencilOpSeparate(ja,ca,Ia,$a),Ad[0]=ja,Ad[1]=ca,Ad[2]=Ia,Ad[3]=$a;Fc=se[0];yb=se[1];cb=se[2];Nb=se[3];if(Fc!==Vd[0]||yb!==Vd[1]||cb!==Vd[2]||Nb!==Vd[3])ha.stencilOpSeparate(Fc,yb,cb,Nb),Vd[0]=Fc,Vd[1]=yb,Vd[2]=cb,Vd[3]=Nb}ha.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ha.enable(3042);R.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;ha.disable(2929);R.depth_enable=!1;ha.enable(3089);R.scissor_enable=!0;ha.disable(2960);R.stencil_enable=
!1;if(e=R.profile)f=performance.now(),K.count+=c;ha.useProgram(xa.program);k=td.angle_instanced_arrays;var ab;ya.setVAO(null);ha.uniform1i(J.location,!1);ha.uniform1i(ra.location,N.bind());ab=ta.instances;for(h=0;h<c;++h){m=a[h];var ob,Va,Gd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Dd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,
kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf;ob=m.viewport;Va=ob.x|0;Gd=ob.y|0;Ib="width"in ob?ob.width|0:p.framebufferWidth-Va;Jb="height"in ob?ob.height|0:p.framebufferHeight-Gd;qc=p.viewportWidth;p.viewportWidth=Ib;Ob=
p.viewportHeight;p.viewportHeight=Jb;ha.viewport(Va,Gd,Ib,Jb);qd[0]=Va;qd[1]=Gd;qd[2]=Ib;qd[3]=Jb;jb=m.viewport;Gb=jb.x|0;Db=jb.y|0;wb="width"in jb?jb.width|0:p.framebufferWidth-Gb;hb="height"in jb?jb.height|0:p.framebufferHeight-Db;ha.scissor(Gb,Db,wb,hb);ke[0]=Gb;ke[1]=Db;ke[2]=wb;ke[3]=hb;Yb=y.call(this,p,m,h);Pb=!1;qb=null;Sa=0;Ub=!1;ic=zb=0;ib=1;pb=0;Ha=5126;gb=fb=Ka=rb=0;H(Yb)?(Pb=!0,qb=v.createStream(34962,Yb),Ha=qb.dtype):(qb=v.getBuffer(Yb))?Ha=qb.dtype:"constant"in Yb?(ib=2,"number"===typeof Yb.constant?
(Ka=Yb.constant,fb=gb=rb=0):(Ka=0<Yb.constant.length?Yb.constant[0]:0,fb=1<Yb.constant.length?Yb.constant[1]:0,gb=2<Yb.constant.length?Yb.constant[2]:0,rb=3<Yb.constant.length?Yb.constant[3]:0)):(qb=H(Yb.buffer)?v.createStream(34962,Yb.buffer):v.getBuffer(Yb.buffer),Ha="type"in Yb?ge[Yb.type]:qb.dtype,Ub=!!Yb.normalized,ic=Yb.size|0,zb=Yb.offset|0,pb=Yb.stride|0,Sa=Yb.divisor|0);La=Aa.location;kb=Ua[La];if(1===ib){kb.buffer||ha.enableVertexAttribArray(La);Wa=ic||1;if(kb.type!==Ha||kb.size!==Wa||kb.buffer!==
qb||kb.normalized!==Ub||kb.offset!==zb||kb.stride!==pb)ha.bindBuffer(34962,qb.buffer),ha.vertexAttribPointer(La,Wa,Ha,Ub,pb,zb),kb.type=Ha,kb.size=Wa,kb.buffer=qb,kb.normalized=Ub,kb.offset=zb,kb.stride=pb;kb.divisor!==Sa&&(k.vertexAttribDivisorANGLE(La,Sa),kb.divisor=Sa)}else if(kb.buffer&&(ha.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==fb||kb.z!==gb||kb.w!==rb)ha.vertexAttrib4f(La,Ka,fb,gb,rb),kb.x=Ka,kb.y=fb,kb.z=gb,kb.w=rb;tb=na.call(this,p,m,h);sb=!1;Pa=null;Bc=0;Ra=!1;Eb=
Kb=0;Na=1;yd=0;Ya=5126;Oa=lb=Mb=Lb=0;H(tb)?(sb=!0,Pa=v.createStream(34962,tb),Ya=Pa.dtype):(Pa=v.getBuffer(tb))?Ya=Pa.dtype:"constant"in tb?(Na=2,"number"===typeof tb.constant?(Mb=tb.constant,lb=Oa=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,lb=1<tb.constant.length?tb.constant[1]:0,Oa=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Pa=H(tb.buffer)?v.createStream(34962,tb.buffer):v.getBuffer(tb.buffer),Ya="type"in tb?ge[tb.type]:Pa.dtype,Ra=!!tb.normalized,Eb=
tb.size|0,Kb=tb.offset|0,yd=tb.stride|0,Bc=tb.divisor|0);Zb=F.location;Qa=Ua[Zb];if(1===Na){Qa.buffer||ha.enableVertexAttribArray(Zb);ub=Eb||1;if(Qa.type!==Ya||Qa.size!==ub||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Kb||Qa.stride!==yd)ha.bindBuffer(34962,Pa.buffer),ha.vertexAttribPointer(Zb,ub,Ya,Ra,yd,Kb),Qa.type=Ya,Qa.size=ub,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Kb,Qa.stride=yd;Qa.divisor!==Bc&&(k.vertexAttribDivisorANGLE(Zb,Bc),Qa.divisor=Bc)}else if(Qa.buffer&&(ha.disableVertexAttribArray(Zb),
Qa.buffer=null),Qa.x!==Mb||Qa.y!==lb||Qa.z!==Oa||Qa.w!==Lb)ha.vertexAttrib4f(Zb,Mb,lb,Oa,Lb),Qa.x=Mb,Qa.y=lb,Qa.z=Oa,Qa.w=Lb;vb=X.call(this,p,m,h);Ta=!1;nb=null;fc=0;zc=!1;bb=uc=0;jc=1;gd=0;Xa=5126;Vb=Za=Ab=Mc=0;H(vb)?(Ta=!0,nb=v.createStream(34962,vb),Xa=nb.dtype):(nb=v.getBuffer(vb))?Xa=nb.dtype:"constant"in vb?(jc=2,"number"===typeof vb.constant?(Ab=vb.constant,Za=Vb=Mc=0):(Ab=0<vb.constant.length?vb.constant[0]:0,Za=1<vb.constant.length?vb.constant[1]:0,Vb=2<vb.constant.length?vb.constant[2]:
0,Mc=3<vb.constant.length?vb.constant[3]:0)):(nb=H(vb.buffer)?v.createStream(34962,vb.buffer):v.getBuffer(vb.buffer),Xa="type"in vb?ge[vb.type]:nb.dtype,zc=!!vb.normalized,bb=vb.size|0,uc=vb.offset|0,gd=vb.stride|0,fc=vb.divisor|0);sc=Ma.location;Wb=Ua[sc];if(1===jc){Wb.buffer||ha.enableVertexAttribArray(sc);Qb=bb||1;if(Wb.type!==Xa||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==zc||Wb.offset!==uc||Wb.stride!==gd)ha.bindBuffer(34962,nb.buffer),ha.vertexAttribPointer(sc,Qb,Xa,zc,gd,uc),Wb.type=Xa,
Wb.size=Qb,Wb.buffer=nb,Wb.normalized=zc,Wb.offset=uc,Wb.stride=gd;Wb.divisor!==fc&&(k.vertexAttribDivisorANGLE(sc,fc),Wb.divisor=fc)}else if(Wb.buffer&&(ha.disableVertexAttribArray(sc),Wb.buffer=null),Wb.x!==Ab||Wb.y!==Za||Wb.z!==Vb||Wb.w!==Mc)ha.vertexAttrib4f(sc,Ab,Za,Vb,Mc),Wb.x=Ab,Wb.y=Za,Wb.z=Vb,Wb.w=Mc;Kc=Y.call(this,p,m,h);Rb=!1;Dd=null;Ec=0;Ed=!1;ed=Nc=0;od=1;nc=0;vc=5126;Tb=rc=db=gc=0;H(Kc)?(Rb=!0,Dd=v.createStream(34962,Kc),vc=Dd.dtype):(Dd=v.getBuffer(Kc))?vc=Dd.dtype:"constant"in Kc?
(od=2,"number"===typeof Kc.constant?(db=Kc.constant,rc=Tb=gc=0):(db=0<Kc.constant.length?Kc.constant[0]:0,rc=1<Kc.constant.length?Kc.constant[1]:0,Tb=2<Kc.constant.length?Kc.constant[2]:0,gc=3<Kc.constant.length?Kc.constant[3]:0)):(Dd=H(Kc.buffer)?v.createStream(34962,Kc.buffer):v.getBuffer(Kc.buffer),vc="type"in Kc?ge[Kc.type]:Dd.dtype,Ed=!!Kc.normalized,ed=Kc.size|0,Nc=Kc.offset|0,nc=Kc.stride|0,Ec=Kc.divisor|0);Xb=eb.location;cc=Ua[Xb];if(1===od){cc.buffer||ha.enableVertexAttribArray(Xb);hc=ed||
1;if(cc.type!==vc||cc.size!==hc||cc.buffer!==Dd||cc.normalized!==Ed||cc.offset!==Nc||cc.stride!==nc)ha.bindBuffer(34962,Dd.buffer),ha.vertexAttribPointer(Xb,hc,vc,Ed,nc,Nc),cc.type=vc,cc.size=hc,cc.buffer=Dd,cc.normalized=Ed,cc.offset=Nc,cc.stride=nc;cc.divisor!==Ec&&(k.vertexAttribDivisorANGLE(Xb,Ec),cc.divisor=Ec)}else if(cc.buffer&&(ha.disableVertexAttribArray(Xb),cc.buffer=null),cc.x!==db||cc.y!==rc||cc.z!==Tb||cc.w!==gc)ha.vertexAttrib4f(Xb,db,rc,Tb,gc),cc.x=db,cc.y=rc,cc.z=Tb,cc.w=gc;xc=fa.call(this,
p,m,h);Ac=!1;ad=null;Qc=0;Rc=!1;Xc=Sc=0;wd=1;bd=0;Yc=5126;Uc=Zc=bc=kc=0;H(xc)?(Ac=!0,ad=v.createStream(34962,xc),Yc=ad.dtype):(ad=v.getBuffer(xc))?Yc=ad.dtype:"constant"in xc?(wd=2,"number"===typeof xc.constant?(bc=xc.constant,Zc=Uc=kc=0):(bc=0<xc.constant.length?xc.constant[0]:0,Zc=1<xc.constant.length?xc.constant[1]:0,Uc=2<xc.constant.length?xc.constant[2]:0,kc=3<xc.constant.length?xc.constant[3]:0)):(ad=H(xc.buffer)?v.createStream(34962,xc.buffer):v.getBuffer(xc.buffer),Yc="type"in xc?ge[xc.type]:
ad.dtype,Rc=!!xc.normalized,Xc=xc.size|0,Sc=xc.offset|0,bd=xc.stride|0,Qc=xc.divisor|0);cd=Da.location;yc=Ua[cd];if(1===wd){yc.buffer||ha.enableVertexAttribArray(cd);hd=Xc||1;if(yc.type!==Yc||yc.size!==hd||yc.buffer!==ad||yc.normalized!==Rc||yc.offset!==Sc||yc.stride!==bd)ha.bindBuffer(34962,ad.buffer),ha.vertexAttribPointer(cd,hd,Yc,Rc,bd,Sc),yc.type=Yc,yc.size=hd,yc.buffer=ad,yc.normalized=Rc,yc.offset=Sc,yc.stride=bd;yc.divisor!==Qc&&(k.vertexAttribDivisorANGLE(cd,Qc),yc.divisor=Qc)}else if(yc.buffer&&
(ha.disableVertexAttribArray(cd),yc.buffer=null),yc.x!==bc||yc.y!==Zc||yc.z!==Uc||yc.w!==kc)ha.vertexAttrib4f(cd,bc,Zc,Uc,kc),yc.x=bc,yc.y=Zc,yc.z=Uc,yc.w=kc;pd=P.call(this,p,m,h);ye=!1;Ne=null;id=0;mf=!1;Xd=Nd=0;de=1;Od=0;Kd=5126;ud=Tc=md=Id=0;H(pd)?(ye=!0,Ne=v.createStream(34962,pd),Kd=Ne.dtype):(Ne=v.getBuffer(pd))?Kd=Ne.dtype:"constant"in pd?(de=2,"number"===typeof pd.constant?(md=pd.constant,Tc=ud=Id=0):(md=0<pd.constant.length?pd.constant[0]:0,Tc=1<pd.constant.length?pd.constant[1]:0,ud=2<pd.constant.length?
pd.constant[2]:0,Id=3<pd.constant.length?pd.constant[3]:0)):(Ne=H(pd.buffer)?v.createStream(34962,pd.buffer):v.getBuffer(pd.buffer),Kd="type"in pd?ge[pd.type]:Ne.dtype,mf=!!pd.normalized,Xd=pd.size|0,Nd=pd.offset|0,Od=pd.stride|0,id=pd.divisor|0);sd=oa.location;jd=Ua[sd];if(1===de){jd.buffer||ha.enableVertexAttribArray(sd);xd=Xd||1;if(jd.type!==Kd||jd.size!==xd||jd.buffer!==Ne||jd.normalized!==mf||jd.offset!==Nd||jd.stride!==Od)ha.bindBuffer(34962,Ne.buffer),ha.vertexAttribPointer(sd,xd,Kd,mf,Od,
Nd),jd.type=Kd,jd.size=xd,jd.buffer=Ne,jd.normalized=mf,jd.offset=Nd,jd.stride=Od;jd.divisor!==id&&(k.vertexAttribDivisorANGLE(sd,id),jd.divisor=id)}else if(jd.buffer&&(ha.disableVertexAttribArray(sd),jd.buffer=null),jd.x!==md||jd.y!==Tc||jd.z!==ud||jd.w!==Id)ha.vertexAttrib4f(sd,md,Tc,ud,Id),jd.x=md,jd.y=Tc,jd.z=ud,jd.w=Id;Cd=T.call(this,p,m,h);Fd=!1;oe=null;qe=0;ue=!1;ie=je=0;he=1;ve=0;ee=5126;we=fd=Oc=le=0;H(Cd)?(Fd=!0,oe=v.createStream(34962,Cd),ee=oe.dtype):(oe=v.getBuffer(Cd))?ee=oe.dtype:"constant"in
Cd?(he=2,"number"===typeof Cd.constant?(Oc=Cd.constant,fd=we=le=0):(Oc=0<Cd.constant.length?Cd.constant[0]:0,fd=1<Cd.constant.length?Cd.constant[1]:0,we=2<Cd.constant.length?Cd.constant[2]:0,le=3<Cd.constant.length?Cd.constant[3]:0)):(oe=H(Cd.buffer)?v.createStream(34962,Cd.buffer):v.getBuffer(Cd.buffer),ee="type"in Cd?ge[Cd.type]:oe.dtype,ue=!!Cd.normalized,ie=Cd.size|0,je=Cd.offset|0,ve=Cd.stride|0,qe=Cd.divisor|0);pe=q.location;Ld=Ua[pe];if(1===he){Ld.buffer||ha.enableVertexAttribArray(pe);Pd=
ie||4;if(Ld.type!==ee||Ld.size!==Pd||Ld.buffer!==oe||Ld.normalized!==ue||Ld.offset!==je||Ld.stride!==ve)ha.bindBuffer(34962,oe.buffer),ha.vertexAttribPointer(pe,Pd,ee,ue,ve,je),Ld.type=ee,Ld.size=Pd,Ld.buffer=oe,Ld.normalized=ue,Ld.offset=je,Ld.stride=ve;Ld.divisor!==qe&&(k.vertexAttribDivisorANGLE(pe,qe),Ld.divisor=qe)}else if(Ld.buffer&&(ha.disableVertexAttribArray(pe),Ld.buffer=null),Ld.x!==Oc||Ld.y!==fd||Ld.z!==we||Ld.w!==le)ha.vertexAttrib4f(pe,Oc,fd,we,le),Ld.x=Oc,Ld.y=fd,Ld.z=we,Ld.w=le;Rd=
x.call(this,p,m,h);Sd=!1;me=null;He=0;Be=!1;Se=re=0;Te=1;Oe=0;xe=5126;Ke=Je=Ie=Fe=0;H(Rd)?(Sd=!0,me=v.createStream(34962,Rd),xe=me.dtype):(me=v.getBuffer(Rd))?xe=me.dtype:"constant"in Rd?(Te=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ke=Fe=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?Rd.constant[1]:0,Ke=2<Rd.constant.length?Rd.constant[2]:0,Fe=3<Rd.constant.length?Rd.constant[3]:0)):(me=H(Rd.buffer)?v.createStream(34962,Rd.buffer):v.getBuffer(Rd.buffer),xe="type"in
Rd?ge[Rd.type]:me.dtype,Be=!!Rd.normalized,Se=Rd.size|0,re=Rd.offset|0,Oe=Rd.stride|0,He=Rd.divisor|0);Ge=za.location;Md=Ua[Ge];if(1===Te){Md.buffer||ha.enableVertexAttribArray(Ge);Yd=Se||4;if(Md.type!==xe||Md.size!==Yd||Md.buffer!==me||Md.normalized!==Be||Md.offset!==re||Md.stride!==Oe)ha.bindBuffer(34962,me.buffer),ha.vertexAttribPointer(Ge,Yd,xe,Be,Oe,re),Md.type=xe,Md.size=Yd,Md.buffer=me,Md.normalized=Be,Md.offset=re,Md.stride=Oe;Md.divisor!==He&&(k.vertexAttribDivisorANGLE(Ge,He),Md.divisor=
He)}else if(Md.buffer&&(ha.disableVertexAttribArray(Ge),Md.buffer=null),Md.x!==Ie||Md.y!==Je||Md.z!==Ke||Md.w!==Fe)ha.vertexAttrib4f(Ge,Ie,Je,Ke,Fe),Md.x=Ie,Md.y=Je,Md.z=Ke,Md.w=Fe;ce=l.call(this,p,m,h);fe=!1;Le=null;Jd=0;Td=!1;Me=De=0;bf=1;af=0;Ue=5126;Ve=Ye=$e=Pe=0;H(ce)?(fe=!0,Le=v.createStream(34962,ce),Ue=Le.dtype):(Le=v.getBuffer(ce))?Ue=Le.dtype:"constant"in ce?(bf=2,"number"===typeof ce.constant?($e=ce.constant,Ye=Ve=Pe=0):($e=0<ce.constant.length?ce.constant[0]:0,Ye=1<ce.constant.length?
ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,Pe=3<ce.constant.length?ce.constant[3]:0)):(Le=H(ce.buffer)?v.createStream(34962,ce.buffer):v.getBuffer(ce.buffer),Ue="type"in ce?ge[ce.type]:Le.dtype,Td=!!ce.normalized,Me=ce.size|0,De=ce.offset|0,af=ce.stride|0,Jd=ce.divisor|0);We=da.location;Ud=Ua[We];if(1===bf){Ud.buffer||ha.enableVertexAttribArray(We);ae=Me||1;if(Ud.type!==Ue||Ud.size!==ae||Ud.buffer!==Le||Ud.normalized!==Td||Ud.offset!==De||Ud.stride!==af)ha.bindBuffer(34962,Le.buffer),
ha.vertexAttribPointer(We,ae,Ue,Td,af,De),Ud.type=Ue,Ud.size=ae,Ud.buffer=Le,Ud.normalized=Td,Ud.offset=De,Ud.stride=af;Ud.divisor!==Jd&&(k.vertexAttribDivisorANGLE(We,Jd),Ud.divisor=Jd)}else if(Ud.buffer&&(ha.disableVertexAttribArray(We),Ud.buffer=null),Ud.x!==$e||Ud.y!==Ye||Ud.z!==Ve||Ud.w!==Pe)ha.vertexAttrib4f(We,$e,Ye,Ve,Pe),Ud.x=$e,Ud.y=Ye,Ud.z=Ve,Ud.w=Pe;Xe=p.pixelRatio;h&&hf===Xe||(hf=Xe,ha.uniform1f(Ca.location,Xe));nf=Q.call(this,p,m,h);ef=nf[0];kf=nf[1];h&&jf===ef&&lf===kf||(jf=ef,lf=kf,
ha.uniform2f(ma.location,ef,kf));rf=m.scale;of=rf[0];Bf=rf[1];h&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ha.uniform2f(wa.location,of,Bf));Qe=m.scaleFract;Ee=Qe[0];qf=Qe[1];h&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ha.uniform2f(ga.location,Ee,qf));Gf=m.translate;Af=Gf[0];Ff=Gf[1];h&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ha.uniform2f(ka.location,Af,Ff));xf=m.translateFract;vf=xf[0];zf=xf[1];h&&yf===vf&&If===zf||(yf=vf,If=zf,ha.uniform2f(qa.location,vf,zf));Kf=m.opacity;h&&Lf===Kf||(Lf=Kf,ha.uniform1f(S.location,Kf));Mf=m.elements;
tf=null;(tf=(Rf=H(Mf))?va.createStream(Mf):va.getElements(Mf))&&ha.bindBuffer(34963,tf.buffer.buffer);Hf=m.offset;if(uf=m.count)0<ab?tf?k.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),ab):k.drawArraysInstancedANGLE(0,Hf,uf,ab):0>ab&&(tf?ha.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ha.drawArrays(0,Hf,uf)),p.viewportWidth=qc,p.viewportHeight=Ob,Pb&&v.destroyStream(qb),sb&&v.destroyStream(Pa),Ta&&v.destroyStream(nb),Rb&&v.destroyStream(Dd),Ac&&v.destroyStream(ad),ye&&v.destroyStream(Ne),
Fd&&v.destroyStream(oe),Sd&&v.destroyStream(me),fe&&v.destroyStream(Le),Rf&&va.destroyStream(tf)}N.unbind();R.dirty=!0;ya.setVAO(null);e&&(K.cpuTime+=performance.now()-f)},draw:function(a){var c,e,f,l,h,t,d,n,y,C,z,r,Ea,T,x,D,P,pa,E,Q,N,w,O,Ja,U,V,Y,Z,ba,fa,ja,ca,na,xa,X,Cc,Ia,Fc,yb,cb,Nb,ab,ob,Va,Gd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,Dd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,
od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se;c=Hb.next;c!==Hb.cur&&(c?ha.bindFramebuffer(36160,c.framebuffer):ha.bindFramebuffer(36160,null),Hb.cur=c);if(R.dirty){var Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf;Te=sa.dither;Te!==R.dither&&(Te?ha.enable(3024):ha.disable(3024),R.dither=
Te);Oe=aa[0];xe=aa[1];if(Oe!==ua[0]||xe!==ua[1])ha.blendEquationSeparate(Oe,xe),ua[0]=Oe,ua[1]=xe;Fe=sa.depth_func;Fe!==R.depth_func&&(ha.depthFunc(Fe),R.depth_func=Fe);Ie=ia[0];Je=ia[1];if(Ie!==$b[0]||Je!==$b[1])ha.depthRange(Ie,Je),$b[0]=Ie,$b[1]=Je;Ke=sa.depth_mask;Ke!==R.depth_mask&&(ha.depthMask(Ke),R.depth_mask=Ke);Ge=mb[0];Md=mb[1];Yd=mb[2];ce=mb[3];if(Ge!==ea[0]||Md!==ea[1]||Yd!==ea[2]||ce!==ea[3])ha.colorMask(Ge,Md,Yd,ce),ea[0]=Ge,ea[1]=Md,ea[2]=Yd,ea[3]=ce;fe=sa.cull_enable;fe!==R.cull_enable&&
(fe?ha.enable(2884):ha.disable(2884),R.cull_enable=fe);Le=sa.cull_face;Le!==R.cull_face&&(ha.cullFace(Le),R.cull_face=Le);Jd=sa.frontFace;Jd!==R.frontFace&&(ha.frontFace(Jd),R.frontFace=Jd);Td=sa.lineWidth;Td!==R.lineWidth&&(ha.lineWidth(Td),R.lineWidth=Td);De=sa.polygonOffset_enable;De!==R.polygonOffset_enable&&(De?ha.enable(32823):ha.disable(32823),R.polygonOffset_enable=De);Me=Ga[0];bf=Ga[1];if(Me!==ac[0]||bf!==ac[1])ha.polygonOffset(Me,bf),ac[0]=Me,ac[1]=bf;af=sa.sample_alpha;af!==R.sample_alpha&&
(af?ha.enable(32926):ha.disable(32926),R.sample_alpha=af);Ue=sa.sample_enable;Ue!==R.sample_enable&&(Ue?ha.enable(32928):ha.disable(32928),R.sample_enable=Ue);Pe=Sb[0];$e=Sb[1];if(Pe!==Fa[0]||$e!==Fa[1])ha.sampleCoverage(Pe,$e),Fa[0]=Pe,Fa[1]=$e;Ye=sa.stencil_mask;Ye!==R.stencil_mask&&(ha.stencilMask(Ye),R.stencil_mask=Ye);Ve=Wd[0];We=Wd[1];Ud=Wd[2];if(Ve!==ze[0]||We!==ze[1]||Ud!==ze[2])ha.stencilFunc(Ve,We,Ud),ze[0]=Ve,ze[1]=We,ze[2]=Ud;ae=ne[0];Xe=ne[1];hf=ne[2];nf=ne[3];if(ae!==Ad[0]||Xe!==Ad[1]||
hf!==Ad[2]||nf!==Ad[3])ha.stencilOpSeparate(ae,Xe,hf,nf),Ad[0]=ae,Ad[1]=Xe,Ad[2]=hf,Ad[3]=nf;ef=se[0];jf=se[1];kf=se[2];lf=se[3];if(ef!==Vd[0]||jf!==Vd[1]||kf!==Vd[2]||lf!==Vd[3])ha.stencilOpSeparate(ef,jf,kf,lf),Vd[0]=ef,Vd[1]=jf,Vd[2]=kf,Vd[3]=lf}e=a.viewport;f=e.x|0;l=e.y|0;h="width"in e?e.width|0:p.framebufferWidth-f;t="height"in e?e.height|0:p.framebufferHeight-l;d=p.viewportWidth;p.viewportWidth=h;n=p.viewportHeight;p.viewportHeight=t;ha.viewport(f,l,h,t);qd[0]=f;qd[1]=l;qd[2]=h;qd[3]=t;ha.blendColor(0,
0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ha.enable(3042);R.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;ha.disable(2929);R.depth_enable=!1;y=a.viewport;C=y.x|0;z=y.y|0;r="width"in y?y.width|0:p.framebufferWidth-C;Ea="height"in y?y.height|0:p.framebufferHeight-z;ha.scissor(C,z,r,Ea);ke[0]=C;ke[1]=z;ke[2]=r;ke[3]=Ea;ha.enable(3089);R.scissor_enable=!0;ha.disable(2960);R.stencil_enable=!1;if(T=R.profile)x=performance.now(),K.count++;ha.useProgram(I.program);
D=td.angle_instanced_arrays;ya.setVAO(null);P=M.call(this,p,a,0);pa=!1;E=null;Q=0;N=!1;O=w=0;Ja=1;U=0;V=5126;fa=ba=Z=Y=0;H(P)?(pa=!0,E=v.createStream(34962,P),V=E.dtype):(E=v.getBuffer(P))?V=E.dtype:"constant"in P?(Ja=2,"number"===typeof P.constant?(Z=P.constant,ba=fa=Y=0):(Z=0<P.constant.length?P.constant[0]:0,ba=1<P.constant.length?P.constant[1]:0,fa=2<P.constant.length?P.constant[2]:0,Y=3<P.constant.length?P.constant[3]:0)):(E=H(P.buffer)?v.createStream(34962,P.buffer):v.getBuffer(P.buffer),V=
"type"in P?ge[P.type]:E.dtype,N=!!P.normalized,O=P.size|0,w=P.offset|0,U=P.stride|0,Q=P.divisor|0);ja=Aa.location;ca=Ua[ja];if(1===Ja){ca.buffer||ha.enableVertexAttribArray(ja);na=O||1;if(ca.type!==V||ca.size!==na||ca.buffer!==E||ca.normalized!==N||ca.offset!==w||ca.stride!==U)ha.bindBuffer(34962,E.buffer),ha.vertexAttribPointer(ja,na,V,N,U,w),ca.type=V,ca.size=na,ca.buffer=E,ca.normalized=N,ca.offset=w,ca.stride=U;ca.divisor!==Q&&(D.vertexAttribDivisorANGLE(ja,Q),ca.divisor=Q)}else if(ca.buffer&&
(ha.disableVertexAttribArray(ja),ca.buffer=null),ca.x!==Z||ca.y!==ba||ca.z!==fa||ca.w!==Y)ha.vertexAttrib4f(ja,Z,ba,fa,Y),ca.x=Z,ca.y=ba,ca.z=fa,ca.w=Y;xa=g.call(this,p,a,0);X=!1;Cc=null;Ia=0;Fc=!1;cb=yb=0;Nb=1;ab=0;ob=5126;Jb=Ib=Gd=Va=0;H(xa)?(X=!0,Cc=v.createStream(34962,xa),ob=Cc.dtype):(Cc=v.getBuffer(xa))?ob=Cc.dtype:"constant"in xa?(Nb=2,"number"===typeof xa.constant?(Gd=xa.constant,Ib=Jb=Va=0):(Gd=0<xa.constant.length?xa.constant[0]:0,Ib=1<xa.constant.length?xa.constant[1]:0,Jb=2<xa.constant.length?
xa.constant[2]:0,Va=3<xa.constant.length?xa.constant[3]:0)):(Cc=H(xa.buffer)?v.createStream(34962,xa.buffer):v.getBuffer(xa.buffer),ob="type"in xa?ge[xa.type]:Cc.dtype,Fc=!!xa.normalized,cb=xa.size|0,yb=xa.offset|0,ab=xa.stride|0,Ia=xa.divisor|0);qc=F.location;Ob=Ua[qc];if(1===Nb){Ob.buffer||ha.enableVertexAttribArray(qc);jb=cb||1;if(Ob.type!==ob||Ob.size!==jb||Ob.buffer!==Cc||Ob.normalized!==Fc||Ob.offset!==yb||Ob.stride!==ab)ha.bindBuffer(34962,Cc.buffer),ha.vertexAttribPointer(qc,jb,ob,Fc,ab,yb),
Ob.type=ob,Ob.size=jb,Ob.buffer=Cc,Ob.normalized=Fc,Ob.offset=yb,Ob.stride=ab;Ob.divisor!==Ia&&(D.vertexAttribDivisorANGLE(qc,Ia),Ob.divisor=Ia)}else if(Ob.buffer&&(ha.disableVertexAttribArray(qc),Ob.buffer=null),Ob.x!==Gd||Ob.y!==Ib||Ob.z!==Jb||Ob.w!==Va)ha.vertexAttrib4f(qc,Gd,Ib,Jb,Va),Ob.x=Gd,Ob.y=Ib,Ob.z=Jb,Ob.w=Va;Gb=k.call(this,p,a,0);Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Sa=1;Ub=0;zb=5126;Ha=pb=ib=ic=0;H(Gb)?(Db=!0,wb=v.createStream(34962,Gb),zb=wb.dtype):(wb=v.getBuffer(Gb))?zb=wb.dtype:"constant"in
Gb?(Sa=2,"number"===typeof Gb.constant?(ib=Gb.constant,pb=Ha=ic=0):(ib=0<Gb.constant.length?Gb.constant[0]:0,pb=1<Gb.constant.length?Gb.constant[1]:0,Ha=2<Gb.constant.length?Gb.constant[2]:0,ic=3<Gb.constant.length?Gb.constant[3]:0)):(wb=H(Gb.buffer)?v.createStream(34962,Gb.buffer):v.getBuffer(Gb.buffer),zb="type"in Gb?ge[Gb.type]:wb.dtype,Yb=!!Gb.normalized,qb=Gb.size|0,Pb=Gb.offset|0,Ub=Gb.stride|0,hb=Gb.divisor|0);rb=Ma.location;Ka=Ua[rb];if(1===Sa){Ka.buffer||ha.enableVertexAttribArray(rb);fb=
qb||1;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)ha.bindBuffer(34962,wb.buffer),ha.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(D.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(ha.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==ic)ha.vertexAttrib4f(rb,ib,pb,Ha,ic),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=ic;gb=
m.call(this,p,a,0);La=!1;kb=null;Wa=0;tb=!1;Pa=sb=0;Bc=1;Ra=0;Kb=5126;Ya=Dd=Na=Eb=0;H(gb)?(La=!0,kb=v.createStream(34962,gb),Kb=kb.dtype):(kb=v.getBuffer(gb))?Kb=kb.dtype:"constant"in gb?(Bc=2,"number"===typeof gb.constant?(Na=gb.constant,Dd=Ya=Eb=0):(Na=0<gb.constant.length?gb.constant[0]:0,Dd=1<gb.constant.length?gb.constant[1]:0,Ya=2<gb.constant.length?gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(kb=H(gb.buffer)?v.createStream(34962,gb.buffer):v.getBuffer(gb.buffer),Kb="type"in
gb?ge[gb.type]:kb.dtype,tb=!!gb.normalized,Pa=gb.size|0,sb=gb.offset|0,Ra=gb.stride|0,Wa=gb.divisor|0);Lb=eb.location;Mb=Ua[Lb];if(1===Bc){Mb.buffer||ha.enableVertexAttribArray(Lb);lb=Pa||1;if(Mb.type!==Kb||Mb.size!==lb||Mb.buffer!==kb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Ra)ha.bindBuffer(34962,kb.buffer),ha.vertexAttribPointer(Lb,lb,Kb,tb,Ra,sb),Mb.type=Kb,Mb.size=lb,Mb.buffer=kb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Ra;Mb.divisor!==Wa&&(D.vertexAttribDivisorANGLE(Lb,Wa),Mb.divisor=
Wa)}else if(Mb.buffer&&(ha.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Na||Mb.y!==Dd||Mb.z!==Ya||Mb.w!==Eb)ha.vertexAttrib4f(Lb,Na,Dd,Ya,Eb),Mb.x=Na,Mb.y=Dd,Mb.z=Ya,Mb.w=Eb;Oa=b.call(this,p,a,0);Zb=!1;Qa=null;ub=0;vb=!1;nb=Ta=0;fc=1;zc=0;uc=5126;Xa=gd=jc=bb=0;H(Oa)?(Zb=!0,Qa=v.createStream(34962,Oa),uc=Qa.dtype):(Qa=v.getBuffer(Oa))?uc=Qa.dtype:"constant"in Oa?(fc=2,"number"===typeof Oa.constant?(jc=Oa.constant,gd=Xa=bb=0):(jc=0<Oa.constant.length?Oa.constant[0]:0,gd=1<Oa.constant.length?
Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=H(Oa.buffer)?v.createStream(34962,Oa.buffer):v.getBuffer(Oa.buffer),uc="type"in Oa?ge[Oa.type]:Qa.dtype,vb=!!Oa.normalized,nb=Oa.size|0,Ta=Oa.offset|0,zc=Oa.stride|0,ub=Oa.divisor|0);Mc=Da.location;Ab=Ua[Mc];if(1===fc){Ab.buffer||ha.enableVertexAttribArray(Mc);Za=nb||1;if(Ab.type!==uc||Ab.size!==Za||Ab.buffer!==Qa||Ab.normalized!==vb||Ab.offset!==Ta||Ab.stride!==zc)ha.bindBuffer(34962,Qa.buffer),
ha.vertexAttribPointer(Mc,Za,uc,vb,zc,Ta),Ab.type=uc,Ab.size=Za,Ab.buffer=Qa,Ab.normalized=vb,Ab.offset=Ta,Ab.stride=zc;Ab.divisor!==ub&&(D.vertexAttribDivisorANGLE(Mc,ub),Ab.divisor=ub)}else if(Ab.buffer&&(ha.disableVertexAttribArray(Mc),Ab.buffer=null),Ab.x!==jc||Ab.y!==gd||Ab.z!==Xa||Ab.w!==bb)ha.vertexAttrib4f(Mc,jc,gd,Xa,bb),Ab.x=jc,Ab.y=gd,Ab.z=Xa,Ab.w=bb;Vb=G.call(this,p,a,0);sc=!1;Wb=null;Qb=0;Kc=!1;Qd=Rb=0;Ec=1;Ed=0;Nc=5126;vc=nc=od=ed=0;H(Vb)?(sc=!0,Wb=v.createStream(34962,Vb),Nc=Wb.dtype):
(Wb=v.getBuffer(Vb))?Nc=Wb.dtype:"constant"in Vb?(Ec=2,"number"===typeof Vb.constant?(od=Vb.constant,nc=vc=ed=0):(od=0<Vb.constant.length?Vb.constant[0]:0,nc=1<Vb.constant.length?Vb.constant[1]:0,vc=2<Vb.constant.length?Vb.constant[2]:0,ed=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=H(Vb.buffer)?v.createStream(34962,Vb.buffer):v.getBuffer(Vb.buffer),Nc="type"in Vb?ge[Vb.type]:Wb.dtype,Kc=!!Vb.normalized,Qd=Vb.size|0,Rb=Vb.offset|0,Ed=Vb.stride|0,Qb=Vb.divisor|0);gc=oa.location;db=Ua[gc];if(1===Ec){db.buffer||
ha.enableVertexAttribArray(gc);rc=Qd||1;if(db.type!==Nc||db.size!==rc||db.buffer!==Wb||db.normalized!==Kc||db.offset!==Rb||db.stride!==Ed)ha.bindBuffer(34962,Wb.buffer),ha.vertexAttribPointer(gc,rc,Nc,Kc,Ed,Rb),db.type=Nc,db.size=rc,db.buffer=Wb,db.normalized=Kc,db.offset=Rb,db.stride=Ed;db.divisor!==Qb&&(D.vertexAttribDivisorANGLE(gc,Qb),db.divisor=Qb)}else if(db.buffer&&(ha.disableVertexAttribArray(gc),db.buffer=null),db.x!==od||db.y!==nc||db.z!==vc||db.w!==ed)ha.vertexAttrib4f(gc,od,nc,vc,ed),
db.x=od,db.y=nc,db.z=vc,db.w=ed;Tb=B.call(this,p,a,0);Xb=!1;cc=null;hc=0;xc=!1;ad=Ac=0;Qc=1;Rc=0;Sc=5126;Yc=bd=wd=Xc=0;H(Tb)?(Xb=!0,cc=v.createStream(34962,Tb),Sc=cc.dtype):(cc=v.getBuffer(Tb))?Sc=cc.dtype:"constant"in Tb?(Qc=2,"number"===typeof Tb.constant?(wd=Tb.constant,bd=Yc=Xc=0):(wd=0<Tb.constant.length?Tb.constant[0]:0,bd=1<Tb.constant.length?Tb.constant[1]:0,Yc=2<Tb.constant.length?Tb.constant[2]:0,Xc=3<Tb.constant.length?Tb.constant[3]:0)):(cc=H(Tb.buffer)?v.createStream(34962,Tb.buffer):
v.getBuffer(Tb.buffer),Sc="type"in Tb?ge[Tb.type]:cc.dtype,xc=!!Tb.normalized,ad=Tb.size|0,Ac=Tb.offset|0,Rc=Tb.stride|0,hc=Tb.divisor|0);kc=q.location;bc=Ua[kc];if(1===Qc){bc.buffer||ha.enableVertexAttribArray(kc);Zc=ad||4;if(bc.type!==Sc||bc.size!==Zc||bc.buffer!==cc||bc.normalized!==xc||bc.offset!==Ac||bc.stride!==Rc)ha.bindBuffer(34962,cc.buffer),ha.vertexAttribPointer(kc,Zc,Sc,xc,Rc,Ac),bc.type=Sc,bc.size=Zc,bc.buffer=cc,bc.normalized=xc,bc.offset=Ac,bc.stride=Rc;bc.divisor!==hc&&(D.vertexAttribDivisorANGLE(kc,
hc),bc.divisor=hc)}else if(bc.buffer&&(ha.disableVertexAttribArray(kc),bc.buffer=null),bc.x!==wd||bc.y!==bd||bc.z!==Yc||bc.w!==Xc)ha.vertexAttrib4f(kc,wd,bd,Yc,Xc),bc.x=wd,bc.y=bd,bc.z=Yc,bc.w=Xc;Uc=L.call(this,p,a,0);cd=!1;yc=null;hd=0;pd=!1;Ne=ye=0;id=1;mf=0;Nd=5126;Kd=Od=de=Xd=0;H(Uc)?(cd=!0,yc=v.createStream(34962,Uc),Nd=yc.dtype):(yc=v.getBuffer(Uc))?Nd=yc.dtype:"constant"in Uc?(id=2,"number"===typeof Uc.constant?(de=Uc.constant,Od=Kd=Xd=0):(de=0<Uc.constant.length?Uc.constant[0]:0,Od=1<Uc.constant.length?
Uc.constant[1]:0,Kd=2<Uc.constant.length?Uc.constant[2]:0,Xd=3<Uc.constant.length?Uc.constant[3]:0)):(yc=H(Uc.buffer)?v.createStream(34962,Uc.buffer):v.getBuffer(Uc.buffer),Nd="type"in Uc?ge[Uc.type]:yc.dtype,pd=!!Uc.normalized,Ne=Uc.size|0,ye=Uc.offset|0,mf=Uc.stride|0,hd=Uc.divisor|0);Id=za.location;md=Ua[Id];if(1===id){md.buffer||ha.enableVertexAttribArray(Id);Tc=Ne||4;if(md.type!==Nd||md.size!==Tc||md.buffer!==yc||md.normalized!==pd||md.offset!==ye||md.stride!==mf)ha.bindBuffer(34962,yc.buffer),
ha.vertexAttribPointer(Id,Tc,Nd,pd,mf,ye),md.type=Nd,md.size=Tc,md.buffer=yc,md.normalized=pd,md.offset=ye,md.stride=mf;md.divisor!==hd&&(D.vertexAttribDivisorANGLE(Id,hd),md.divisor=hd)}else if(md.buffer&&(ha.disableVertexAttribArray(Id),md.buffer=null),md.x!==de||md.y!==Od||md.z!==Kd||md.w!==Xd)ha.vertexAttrib4f(Id,de,Od,Kd,Xd),md.x=de,md.y=Od,md.z=Kd,md.w=Xd;ud=W.call(this,p,a,0);sd=!1;jd=null;xd=0;Cd=!1;oe=Fd=0;qe=1;ue=0;je=5126;ee=ve=he=ie=0;H(ud)?(sd=!0,jd=v.createStream(34962,ud),je=jd.dtype):
(jd=v.getBuffer(ud))?je=jd.dtype:"constant"in ud?(qe=2,"number"===typeof ud.constant?(he=ud.constant,ve=ee=ie=0):(he=0<ud.constant.length?ud.constant[0]:0,ve=1<ud.constant.length?ud.constant[1]:0,ee=2<ud.constant.length?ud.constant[2]:0,ie=3<ud.constant.length?ud.constant[3]:0)):(jd=H(ud.buffer)?v.createStream(34962,ud.buffer):v.getBuffer(ud.buffer),je="type"in ud?ge[ud.type]:jd.dtype,Cd=!!ud.normalized,oe=ud.size|0,Fd=ud.offset|0,ue=ud.stride|0,xd=ud.divisor|0);le=da.location;Oc=Ua[le];if(1===qe){Oc.buffer||
ha.enableVertexAttribArray(le);fd=oe||1;if(Oc.type!==je||Oc.size!==fd||Oc.buffer!==jd||Oc.normalized!==Cd||Oc.offset!==Fd||Oc.stride!==ue)ha.bindBuffer(34962,jd.buffer),ha.vertexAttribPointer(le,fd,je,Cd,ue,Fd),Oc.type=je,Oc.size=fd,Oc.buffer=jd,Oc.normalized=Cd,Oc.offset=Fd,Oc.stride=ue;Oc.divisor!==xd&&(D.vertexAttribDivisorANGLE(le,xd),Oc.divisor=xd)}else if(Oc.buffer&&(ha.disableVertexAttribArray(le),Oc.buffer=null),Oc.x!==he||Oc.y!==ve||Oc.z!==ee||Oc.w!==ie)ha.vertexAttrib4f(le,he,ve,ee,ie),
Oc.x=he,Oc.y=ve,Oc.z=ee,Oc.w=ie;ha.uniform1i(J.location,!1);ha.uniform1f(Ca.location,p.pixelRatio);we=u.call(this,p,a,0);ha.uniform2f(ma.location,we[0],we[1]);pe=a.scale;ha.uniform2f(wa.location,pe[0],pe[1]);Ld=a.scaleFract;ha.uniform2f(ga.location,Ld[0],Ld[1]);Pd=a.translate;ha.uniform2f(ka.location,Pd[0],Pd[1]);Rd=a.translateFract;ha.uniform2f(qa.location,Rd[0],Rd[1]);ha.uniform1f(S.location,a.opacity);ha.uniform1i(ra.location,A.bind());Sd=a.elements;me=null;(me=(He=H(Sd))?va.createStream(Sd):va.getElements(Sd))&&
ha.bindBuffer(34963,me.buffer.buffer);Be=a.offset;if(re=a.count)Se=ta.instances,0<Se?me?D.drawElementsInstancedANGLE(0,re,me.type,Be<<(me.type-5121>>1),Se):D.drawArraysInstancedANGLE(0,Be,re,Se):0>Se&&(me?ha.drawElements(0,re,me.type,Be<<(me.type-5121>>1)):ha.drawArrays(0,Be,re)),R.dirty=!0,ya.setVAO(null),p.viewportWidth=d,p.viewportHeight=n,T&&(K.cpuTime+=performance.now()-x),pa&&v.destroyStream(E),X&&v.destroyStream(Cc),Db&&v.destroyStream(wb),La&&v.destroyStream(kb),Zb&&v.destroyStream(Qa),sc&&
v.destroyStream(Wb),Xb&&v.destroyStream(cc),cd&&v.destroyStream(yc),sd&&v.destroyStream(jd),A.unbind(),He&&va.destroyStream(me)},scope:function(b,k,l){var q,m,F,g,d,y,J,T,P,x,S,ga,ha,M,eb,Q,u,la,A,Ma,N,B,aa,I,da,ya,wa,G,za,ra,L,W,ea,ka,Y,fa,Ua,qa,Da,ma,oa,Aa,xa,na,ua,Hb,Ca,Cc,X,Ba,Ga,td,mb,Sb,ia,Sa,$b,ac,Wd,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,qd,Ra,Kb,Eb,Na,zd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,Fa,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Vd,Ec,ke,Nc,ze,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,
Qc,Rc,Sc,Xc,ne,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,se,Ad,id,Jf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,
Ig,Jg,Kg,Lg,Mg,Ng,Og;q=b.viewport;m=q.x|0;F=q.y|0;g="width"in q?q.width|0:p.framebufferWidth-m;d="height"in q?q.height|0:p.framebufferHeight-F;y=p.viewportWidth;p.viewportWidth=g;J=p.viewportHeight;p.viewportHeight=d;T=Dd[0];Dd[0]=m;P=Dd[1];Dd[1]=F;x=Dd[2];Dd[2]=g;S=Dd[3];Dd[3]=d;ga=Ja[0];Ja[0]=0;ha=Ja[1];Ja[1]=0;M=Ja[2];Ja[2]=0;eb=Ja[3];Ja[3]=1;Q=sa.blend_enable;sa.blend_enable=!0;u=Ia[0];Ia[0]=770;la=Ia[1];Ia[1]=771;A=Ia[2];Ia[2]=773;Ma=Ia[3];Ia[3]=1;N=sa.depth_enable;sa.depth_enable=!1;B=b.viewport;
aa=B.x|0;I=B.y|0;da="width"in B?B.width|0:p.framebufferWidth-aa;ya="height"in B?B.height|0:p.framebufferHeight-I;wa=Gd[0];Gd[0]=aa;G=Gd[1];Gd[1]=I;za=Gd[2];Gd[2]=da;ra=Gd[3];Gd[3]=ya;L=sa.scissor_enable;sa.scissor_enable=!0;W=sa.stencil_enable;sa.stencil_enable=!1;if(ea=R.profile)ka=performance.now(),K.count++;Y=b.elements;fa=null;fa=(Ua=H(Y))?va.createStream(Y):va.getElements(Y);qa=ta.elements;ta.elements=fa;Da=b.offset;ma=ta.offset;ta.offset=Da;oa=b.count;Aa=ta.count;ta.count=oa;xa=ta.primitive;
ta.primitive=0;na=pa[45];pa[45]=!1;ua=b.markerTexture;Hb=pa[48];pa[48]=ua;Ca=b.opacity;Cc=pa[10];pa[10]=Ca;X=w.call(this,p,b,l);Ba=pa[46];pa[46]=X;Ga=pa[47];pa[47]=Z;td=p.pixelRatio;mb=pa[34];pa[34]=td;Sb=b.scale;ia=pa[6];pa[6]=Sb;Sa=b.scaleFract;$b=pa[7];pa[7]=Sa;ac=b.translate;Wd=pa[8];pa[8]=ac;ib=b.translateFract;pb=pa[9];pa[9]=ib;Ha=r.call(this,p,b,l);rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Wa=1;tb=0;sb=5126;Kb=Ra=qd=Pa=0;H(Ha)?(rb=!0,Ka=v.createStream(34962,Ha),sb=Ka.dtype):(Ka=v.getBuffer(Ha))?sb=
Ka.dtype:"constant"in Ha?(Wa=2,"number"===typeof Ha.constant?(qd=Ha.constant,Ra=Kb=Pa=0):(qd=0<Ha.constant.length?Ha.constant[0]:0,Ra=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Pa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=H(Ha.buffer)?v.createStream(34962,Ha.buffer):v.getBuffer(Ha.buffer),sb="type"in Ha?ge[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=U.buffer;U.buffer=Ka;Na=U.divisor;U.divisor=fb;zd=U.normalized;
U.normalized=gb;Ya=U.offset;U.offset=La;Lb=U.size;U.size=kb;Mb=U.state;U.state=Wa;lb=U.stride;U.stride=tb;Oa=U.type;U.type=sb;Zb=U.w;U.w=Pa;Qa=U.x;U.x=qd;ub=U.y;U.y=Ra;vb=U.z;U.z=Kb;Ta=n.call(this,p,b,l);nb=!1;fc=null;zc=0;uc=!1;jc=bb=0;Fa=1;Xa=0;Mc=5126;sc=Vb=Za=Ab=0;H(Ta)?(nb=!0,fc=v.createStream(34962,Ta),Mc=fc.dtype):(fc=v.getBuffer(Ta))?Mc=fc.dtype:"constant"in Ta?(Fa=2,"number"===typeof Ta.constant?(Za=Ta.constant,Vb=sc=Ab=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Vb=1<Ta.constant.length?
Ta.constant[1]:0,sc=2<Ta.constant.length?Ta.constant[2]:0,Ab=3<Ta.constant.length?Ta.constant[3]:0)):(fc=H(Ta.buffer)?v.createStream(34962,Ta.buffer):v.getBuffer(Ta.buffer),Mc="type"in Ta?ge[Ta.type]:fc.dtype,uc=!!Ta.normalized,jc=Ta.size|0,bb=Ta.offset|0,Xa=Ta.stride|0,zc=Ta.divisor|0);Wb=O.buffer;O.buffer=fc;Qb=O.divisor;O.divisor=zc;Kc=O.normalized;O.normalized=uc;Rb=O.offset;O.offset=bb;Vd=O.size;O.size=jc;Ec=O.state;O.state=Fa;ke=O.stride;O.stride=Xa;Nc=O.type;O.type=Mc;ze=O.w;O.w=Ab;od=O.x;
O.x=Za;nc=O.y;O.y=Vb;vc=O.z;O.z=sc;gc=ja.call(this,p,b,l);db=!1;rc=null;Tb=0;Xb=!1;hc=cc=0;xc=1;Ac=0;ad=5126;Xc=Sc=Rc=Qc=0;H(gc)?(db=!0,rc=v.createStream(34962,gc),ad=rc.dtype):(rc=v.getBuffer(gc))?ad=rc.dtype:"constant"in gc?(xc=2,"number"===typeof gc.constant?(Rc=gc.constant,Sc=Xc=Qc=0):(Rc=0<gc.constant.length?gc.constant[0]:0,Sc=1<gc.constant.length?gc.constant[1]:0,Xc=2<gc.constant.length?gc.constant[2]:0,Qc=3<gc.constant.length?gc.constant[3]:0)):(rc=H(gc.buffer)?v.createStream(34962,gc.buffer):
v.getBuffer(gc.buffer),ad="type"in gc?ge[gc.type]:rc.dtype,Xb=!!gc.normalized,hc=gc.size|0,cc=gc.offset|0,Ac=gc.stride|0,Tb=gc.divisor|0);ne=e.buffer;e.buffer=rc;bd=e.divisor;e.divisor=Tb;Yc=e.normalized;e.normalized=Xb;kc=e.offset;e.offset=cc;bc=e.size;e.size=hc;Zc=e.state;e.state=xc;Uc=e.stride;e.stride=Ac;cd=e.type;e.type=ad;yc=e.w;e.w=Qc;hd=e.x;e.x=Rc;pd=e.y;e.y=Sc;se=e.z;e.z=Xc;Ad=C.call(this,p,b,l);id=!1;Jf=null;Nd=0;Xd=!1;Od=de=0;Kd=1;Id=0;md=5126;jd=sd=ud=Tc=0;H(Ad)?(id=!0,Jf=v.createStream(34962,
Ad),md=Jf.dtype):(Jf=v.getBuffer(Ad))?md=Jf.dtype:"constant"in Ad?(Kd=2,"number"===typeof Ad.constant?(ud=Ad.constant,sd=jd=Tc=0):(ud=0<Ad.constant.length?Ad.constant[0]:0,sd=1<Ad.constant.length?Ad.constant[1]:0,jd=2<Ad.constant.length?Ad.constant[2]:0,Tc=3<Ad.constant.length?Ad.constant[3]:0)):(Jf=H(Ad.buffer)?v.createStream(34962,Ad.buffer):v.getBuffer(Ad.buffer),md="type"in Ad?ge[Ad.type]:Jf.dtype,Xd=!!Ad.normalized,Od=Ad.size|0,de=Ad.offset|0,Id=Ad.stride|0,Nd=Ad.divisor|0);xd=V.buffer;V.buffer=
Jf;Cd=V.divisor;V.divisor=Nd;Fd=V.normalized;V.normalized=Xd;oe=V.offset;V.offset=de;qe=V.size;V.size=Od;ue=V.state;V.state=Kd;je=V.stride;V.stride=Id;ie=V.type;V.type=md;he=V.w;V.w=Tc;ve=V.x;V.x=ud;ee=V.y;V.y=sd;le=V.z;V.z=jd;Oc=f.call(this,p,b,l);fd=!1;we=null;pe=0;Ld=!1;Rd=Pd=0;Sd=1;me=0;He=5126;Te=Se=re=Be=0;H(Oc)?(fd=!0,we=v.createStream(34962,Oc),He=we.dtype):(we=v.getBuffer(Oc))?He=we.dtype:"constant"in Oc?(Sd=2,"number"===typeof Oc.constant?(re=Oc.constant,Se=Te=Be=0):(re=0<Oc.constant.length?
Oc.constant[0]:0,Se=1<Oc.constant.length?Oc.constant[1]:0,Te=2<Oc.constant.length?Oc.constant[2]:0,Be=3<Oc.constant.length?Oc.constant[3]:0)):(we=H(Oc.buffer)?v.createStream(34962,Oc.buffer):v.getBuffer(Oc.buffer),He="type"in Oc?ge[Oc.type]:we.dtype,Ld=!!Oc.normalized,Rd=Oc.size|0,Pd=Oc.offset|0,me=Oc.stride|0,pe=Oc.divisor|0);Oe=ba.buffer;ba.buffer=we;xe=ba.divisor;ba.divisor=pe;Fe=ba.normalized;ba.normalized=Ld;Ie=ba.offset;ba.offset=Pd;Je=ba.size;ba.size=Rd;Ke=ba.state;ba.state=Sd;Ge=ba.stride;
ba.stride=me;Md=ba.type;ba.type=He;Yd=ba.w;ba.w=Be;ce=ba.x;ba.x=re;fe=ba.y;ba.y=Se;Le=ba.z;ba.z=Te;Jd=h.call(this,p,b,l);Td=!1;De=null;Me=0;bf=!1;Ue=af=0;Pe=1;$e=0;Ye=5126;ae=Ud=We=Ve=0;H(Jd)?(Td=!0,De=v.createStream(34962,Jd),Ye=De.dtype):(De=v.getBuffer(Jd))?Ye=De.dtype:"constant"in Jd?(Pe=2,"number"===typeof Jd.constant?(We=Jd.constant,Ud=ae=Ve=0):(We=0<Jd.constant.length?Jd.constant[0]:0,Ud=1<Jd.constant.length?Jd.constant[1]:0,ae=2<Jd.constant.length?Jd.constant[2]:0,Ve=3<Jd.constant.length?
Jd.constant[3]:0)):(De=H(Jd.buffer)?v.createStream(34962,Jd.buffer):v.getBuffer(Jd.buffer),Ye="type"in Jd?ge[Jd.type]:De.dtype,bf=!!Jd.normalized,Ue=Jd.size|0,af=Jd.offset|0,$e=Jd.stride|0,Me=Jd.divisor|0);Xe=z.buffer;z.buffer=De;hf=z.divisor;z.divisor=Me;nf=z.normalized;z.normalized=bf;ef=z.offset;z.offset=af;jf=z.size;z.size=Ue;kf=z.state;z.state=Pe;lf=z.stride;z.stride=$e;rf=z.type;z.type=Ye;of=z.w;z.w=Ve;sf=z.x;z.x=We;Bf=z.y;z.y=Ud;Cf=z.z;z.z=ae;Qe=ca.call(this,p,b,l);Ee=!1;pf=null;qf=0;Df=!1;
Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;H(Qe)?(Ee=!0,pf=v.createStream(34962,Qe),wf=pf.dtype):(pf=v.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(pf=H(Qe.buffer)?v.createStream(34962,Qe.buffer):v.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:pf.dtype,Df=!!Qe.normalized,
Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=E.buffer;E.buffer=pf;Kf=E.divisor;E.divisor=qf;Lf=E.normalized;E.normalized=Df;Mf=E.offset;E.offset=Gf;tf=E.size;E.size=Af;Rf=E.state;E.state=Ef;Hf=E.stride;E.stride=Ff;uf=E.type;E.type=wf;dg=E.w;E.w=xf;Sf=E.x;E.x=vf;Tf=E.y;E.y=yf;qg=E.z;E.z=zf;ff=D.call(this,p,b,l);cf=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;H(ff)?(cf=!0,Nf=v.createStream(34962,ff),Wf=Nf.dtype):(Nf=v.getBuffer(ff))?Wf=Nf.dtype:"constant"in ff?(hg=
2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Nf=H(ff.buffer)?v.createStream(34962,ff.buffer):v.getBuffer(ff.buffer),Wf="type"in ff?ge[ff.type]:Nf.dtype,eg=!!ff.normalized,gg=ff.size|0,fg=ff.offset|0,ig=ff.stride|0,Of=ff.divisor|0);jg=c.buffer;c.buffer=Nf;rg=c.divisor;c.divisor=Of;sg=c.normalized;c.normalized=eg;tg=c.offset;
c.offset=fg;ug=c.size;c.size=gg;vg=c.state;c.state=hg;wg=c.stride;c.stride=ig;xg=c.type;c.type=Wf;yg=c.w;c.w=Uf;zg=c.x;c.x=Xf;Ag=c.y;c.y=Yf;Bg=c.z;c.z=Zf;gf=t.call(this,p,b,l);df=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;H(gf)?(df=!0,Pf=v.createStream(34962,gf),$f=Pf.dtype):(Pf=v.getBuffer(gf))?$f=Pf.dtype:"constant"in gf?(ng=2,"number"===typeof gf.constant?(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?
gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Pf=H(gf.buffer)?v.createStream(34962,gf.buffer):v.getBuffer(gf.buffer),$f="type"in gf?ge[gf.type]:Pf.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Qf=gf.divisor|0);pg=a.buffer;a.buffer=Pf;Cg=a.divisor;a.divisor=Qf;Dg=a.normalized;a.normalized=kg;Eg=a.offset;a.offset=lg;Fg=a.size;a.size=mg;Gg=a.state;a.state=ng;Hg=a.stride;a.stride=og;Ig=a.type;a.type=$f;Jg=a.w;a.w=Vf;Kg=a.x;a.x=ag;Lg=a.y;a.y=bg;Mg=a.z;a.z=cg;Ng=Ea.vert;
Ea.vert=59;Og=Ea.frag;Ea.frag=58;R.dirty=!0;k(p,b,l);p.viewportWidth=y;p.viewportHeight=J;Dd[0]=T;Dd[1]=P;Dd[2]=x;Dd[3]=S;Ja[0]=ga;Ja[1]=ha;Ja[2]=M;Ja[3]=eb;sa.blend_enable=Q;Ia[0]=u;Ia[1]=la;Ia[2]=A;Ia[3]=Ma;sa.depth_enable=N;Gd[0]=wa;Gd[1]=G;Gd[2]=za;Gd[3]=ra;sa.scissor_enable=L;sa.stencil_enable=W;ea&&(K.cpuTime+=performance.now()-ka);Ua&&va.destroyStream(fa);ta.elements=qa;ta.offset=ma;ta.count=Aa;ta.primitive=xa;pa[45]=na;pa[48]=Hb;pa[10]=Cc;pa[46]=Ba;pa[47]=Ga;pa[34]=mb;pa[6]=ia;pa[7]=$b;pa[8]=
Wd;pa[9]=pb;rb&&v.destroyStream(Ka);U.buffer=Eb;U.divisor=Na;U.normalized=zd;U.offset=Ya;U.size=Lb;U.state=Mb;U.stride=lb;U.type=Oa;U.w=Zb;U.x=Qa;U.y=ub;U.z=vb;nb&&v.destroyStream(fc);O.buffer=Wb;O.divisor=Qb;O.normalized=Kc;O.offset=Rb;O.size=Vd;O.state=Ec;O.stride=ke;O.type=Nc;O.w=ze;O.x=od;O.y=nc;O.z=vc;db&&v.destroyStream(rc);e.buffer=ne;e.divisor=bd;e.normalized=Yc;e.offset=kc;e.size=bc;e.state=Zc;e.stride=Uc;e.type=cd;e.w=yc;e.x=hd;e.y=pd;e.z=se;id&&v.destroyStream(Jf);V.buffer=xd;V.divisor=
Cd;V.normalized=Fd;V.offset=oe;V.size=qe;V.state=ue;V.stride=je;V.type=ie;V.w=he;V.x=ve;V.y=ee;V.z=le;fd&&v.destroyStream(we);ba.buffer=Oe;ba.divisor=xe;ba.normalized=Fe;ba.offset=Ie;ba.size=Je;ba.state=Ke;ba.stride=Ge;ba.type=Md;ba.w=Yd;ba.x=ce;ba.y=fe;ba.z=Le;Td&&v.destroyStream(De);z.buffer=Xe;z.divisor=hf;z.normalized=nf;z.offset=ef;z.size=jf;z.state=kf;z.stride=lf;z.type=rf;z.w=of;z.x=sf;z.y=Bf;z.z=Cf;Ee&&v.destroyStream(pf);E.buffer=If;E.divisor=Kf;E.normalized=Lf;E.offset=Mf;E.size=tf;E.state=
Rf;E.stride=Hf;E.type=uf;E.w=dg;E.x=Sf;E.y=Tf;E.z=qg;cf&&v.destroyStream(Nf);c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;df&&v.destroyStream(Pf);a.buffer=pg;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Ea.vert=Ng;Ea.frag=Og;R.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(d,
K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,Cc,Y,fa){var P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,X,Hb,ha,H,sa,Ea,pa,ya,Ja,la,aa;P=d.attributes;T=d.buffer;x=d.context;l=d.current;N=d.draw;Q=d.elements;za=d.extensions;oa=d.framebuffer;q=d.gl;J=d.isBufferArgs;da=d.next;S=d.shader;ma=d.uniforms;ra=d.vao;Ca=da.blend_color;wa=l.blend_color;ga=da.blend_equation;Da=l.blend_equation;ka=da.blend_func;qa=l.blend_func;Aa=da.colorMask;Ma=l.colorMask;
F=da.depth_range;eb=l.depth_range;Ua=da.polygonOffset_offset;v=l.polygonOffset_offset;p=da.sample_coverage;R=l.sample_coverage;ta=da.scissor_box;va=l.scissor_box;X=da.stencil_func;Hb=l.stencil_func;ha=da.stencil_opBack;H=l.stencil_opBack;sa=da.stencil_opFront;Ea=l.stencil_opFront;pa=da.viewport;ya=l.viewport;Ja={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:4,stride:8};aa={offset:0,stride:8};return{batch:function(b,k){var m,g,d,r,S,pa,M,u,
A,B,w,I,G;m=oa.next;m!==oa.cur&&(m?q.bindFramebuffer(36160,m.framebuffer):q.bindFramebuffer(36160,null),oa.cur=m);if(l.dirty){var L,W,ka,Z,ma,Ca,ia,Fa,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc;L=da.dither;L!==l.dither&&(L?q.enable(3024):q.disable(3024),l.dither=L);W=ga[0];ka=ga[1];if(W!==Da[0]||ka!==Da[1])q.blendEquationSeparate(W,ka),Da[0]=W,Da[1]=ka;Z=da.depth_func;Z!==l.depth_func&&(q.depthFunc(Z),l.depth_func=Z);ma=F[0];Ca=F[1];if(ma!==eb[0]||
Ca!==eb[1])q.depthRange(ma,Ca),eb[0]=ma,eb[1]=Ca;ia=da.depth_mask;ia!==l.depth_mask&&(q.depthMask(ia),l.depth_mask=ia);Fa=Aa[0];Ce=Aa[1];Ze=Aa[2];Re=Aa[3];if(Fa!==Ma[0]||Ce!==Ma[1]||Ze!==Ma[2]||Re!==Ma[3])q.colorMask(Fa,Ce,Ze,Re),Ma[0]=Fa,Ma[1]=Ce,Ma[2]=Ze,Ma[3]=Re;Hd=da.cull_enable;Hd!==l.cull_enable&&(Hd?q.enable(2884):q.disable(2884),l.cull_enable=Hd);Ae=da.cull_face;Ae!==l.cull_face&&(q.cullFace(Ae),l.cull_face=Ae);te=da.frontFace;te!==l.frontFace&&(q.frontFace(te),l.frontFace=te);Zd=da.lineWidth;
Zd!==l.lineWidth&&(q.lineWidth(Zd),l.lineWidth=Zd);Bd=da.polygonOffset_enable;Bd!==l.polygonOffset_enable&&(Bd?q.enable(32823):q.disable(32823),l.polygonOffset_enable=Bd);$d=Ua[0];ld=Ua[1];if($d!==v[0]||ld!==v[1])q.polygonOffset($d,ld),v[0]=$d,v[1]=ld;$c=da.sample_alpha;$c!==l.sample_alpha&&($c?q.enable(32926):q.disable(32926),l.sample_alpha=$c);rd=da.sample_enable;rd!==l.sample_enable&&(rd?q.enable(32928):q.disable(32928),l.sample_enable=rd);Lc=p[0];nd=p[1];if(Lc!==R[0]||nd!==R[1])q.sampleCoverage(Lc,
nd),R[0]=Lc,R[1]=nd;Gc=da.stencil_mask;Gc!==l.stencil_mask&&(q.stencilMask(Gc),l.stencil_mask=Gc);dd=X[0];Pc=X[1];kd=X[2];if(dd!==Hb[0]||Pc!==Hb[1]||kd!==Hb[2])q.stencilFunc(dd,Pc,kd),Hb[0]=dd,Hb[1]=Pc,Hb[2]=kd;Bb=sa[0];Fb=sa[1];tc=sa[2];xb=sa[3];if(Bb!==Ea[0]||Fb!==Ea[1]||tc!==Ea[2]||xb!==Ea[3])q.stencilOpSeparate(Bb,Fb,tc,xb),Ea[0]=Bb,Ea[1]=Fb,Ea[2]=tc,Ea[3]=xb;wc=ha[0];Cb=ha[1];Jc=ha[2];lc=ha[3];if(wc!==H[0]||Cb!==H[1]||Jc!==H[2]||lc!==H[3])q.stencilOpSeparate(wc,Cb,Jc,lc),H[0]=wc,H[1]=Cb,H[2]=
Jc,H[3]=lc;Hc=da.scissor_enable;Hc!==l.scissor_enable&&(Hc?q.enable(3089):q.disable(3089),l.scissor_enable=Hc);Wc=ta[0];Vc=ta[1];Dc=ta[2];dc=ta[3];if(Wc!==va[0]||Vc!==va[1]||Dc!==va[2]||dc!==va[3])q.scissor(Wc,Vc,Dc,dc),va[0]=Wc,va[1]=Vc,va[2]=Dc,va[3]=dc}g=this.viewport;d=g.x|0;r=g.y|0;S="width"in g?g.width|0:x.framebufferWidth-d;pa="height"in g?g.height|0:x.framebufferHeight-r;M=x.viewportWidth;x.viewportWidth=S;u=x.viewportHeight;x.viewportHeight=pa;q.viewport(d,r,S,pa);ya[0]=d;ya[1]=r;ya[2]=S;
ya[3]=pa;q.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;q.enable(3042);l.blend_enable=!0;q.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;q.disable(2929);l.depth_enable=!1;q.disable(2960);l.stencil_enable=!1;if(A=l.profile)B=performance.now(),K.count+=k;q.useProgram(U.program);w=za.angle_instanced_arrays;var Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,
Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb;ra.setVAO(null);aa.buffer=this.sizeBuffer;Ic=!1;oc=null;pc=0;mc=!1;$a=ec=0;Fc=1;yb=0;cb=5126;Va=ob=ab=Nb=0;J(aa)?(Ic=!0,oc=T.createStream(34962,aa),cb=oc.dtype):(oc=T.getBuffer(aa))?cb=oc.dtype:"constant"in aa?(Fc=2,"number"===typeof aa.constant?(ab=aa.constant,ob=Va=Nb=0):(ab=0<aa.constant.length?aa.constant[0]:0,ob=1<aa.constant.length?aa.constant[1]:0,Va=2<aa.constant.length?aa.constant[2]:0,Nb=3<aa.constant.length?aa.constant[3]:0)):(oc=J(aa.buffer)?
T.createStream(34962,aa.buffer):T.getBuffer(aa.buffer),cb="type"in aa?Ja[aa.type]:oc.dtype,mc=!!aa.normalized,$a=aa.size|0,ec=aa.offset|0,yb=aa.stride|0,pc=aa.divisor|0);vd=fa.location;Ib=P[vd];if(1===Fc){Ib.buffer||q.enableVertexAttribArray(vd);Jb=$a||1;if(Ib.type!==cb||Ib.size!==Jb||Ib.buffer!==oc||Ib.normalized!==mc||Ib.offset!==ec||Ib.stride!==yb)q.bindBuffer(34962,oc.buffer),q.vertexAttribPointer(vd,Jb,cb,mc,yb,ec),Ib.type=cb,Ib.size=Jb,Ib.buffer=oc,Ib.normalized=mc,Ib.offset=ec,Ib.stride=yb;
Ib.divisor!==pc&&(w.vertexAttribDivisorANGLE(vd,pc),Ib.divisor=pc)}else if(Ib.buffer&&(q.disableVertexAttribArray(vd),Ib.buffer=null),Ib.x!==ab||Ib.y!==ob||Ib.z!==Va||Ib.w!==Nb)q.vertexAttrib4f(vd,ab,ob,Va,Nb),Ib.x=ab,Ib.y=ob,Ib.z=Va,Ib.w=Nb;la.buffer=this.sizeBuffer;qc=!1;Ob=null;jb=0;Gb=!1;wb=Db=0;hb=1;Yb=0;Pb=5126;zb=Ub=Sa=qb=0;J(la)?(qc=!0,Ob=T.createStream(34962,la),Pb=Ob.dtype):(Ob=T.getBuffer(la))?Pb=Ob.dtype:"constant"in la?(hb=2,"number"===typeof la.constant?(Sa=la.constant,Ub=zb=qb=0):(Sa=
0<la.constant.length?la.constant[0]:0,Ub=1<la.constant.length?la.constant[1]:0,zb=2<la.constant.length?la.constant[2]:0,qb=3<la.constant.length?la.constant[3]:0)):(Ob=J(la.buffer)?T.createStream(34962,la.buffer):T.getBuffer(la.buffer),Pb="type"in la?Ja[la.type]:Ob.dtype,Gb=!!la.normalized,wb=la.size|0,Db=la.offset|0,Yb=la.stride|0,jb=la.divisor|0);ic=E.location;ib=P[ic];if(1===hb){ib.buffer||q.enableVertexAttribArray(ic);pb=wb||1;if(ib.type!==Pb||ib.size!==pb||ib.buffer!==Ob||ib.normalized!==Gb||
ib.offset!==Db||ib.stride!==Yb)q.bindBuffer(34962,Ob.buffer),q.vertexAttribPointer(ic,pb,Pb,Gb,Yb,Db),ib.type=Pb,ib.size=pb,ib.buffer=Ob,ib.normalized=Gb,ib.offset=Db,ib.stride=Yb;ib.divisor!==jb&&(w.vertexAttribDivisorANGLE(ic,jb),ib.divisor=jb)}else if(ib.buffer&&(q.disableVertexAttribArray(ic),ib.buffer=null),ib.x!==Sa||ib.y!==Ub||ib.z!==zb||ib.w!==qb)q.vertexAttrib4f(ic,Sa,Ub,zb,qb),ib.x=Sa,ib.y=Ub,ib.z=zb,ib.w=qb;Ha=this.charBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Wa=1;tb=0;sb=5126;Kb=Ra=Bc=
Pa=0;J(Ha)?(rb=!0,Ka=T.createStream(34962,Ha),sb=Ka.dtype):(Ka=T.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Wa=2,"number"===typeof Ha.constant?(Bc=Ha.constant,Ra=Kb=Pa=0):(Bc=0<Ha.constant.length?Ha.constant[0]:0,Ra=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Pa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=J(Ha.buffer)?T.createStream(34962,Ha.buffer):T.getBuffer(Ha.buffer),sb="type"in Ha?Ja[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|
0,fb=Ha.divisor|0);Eb=ca.location;Na=P[Eb];if(1===Wa){Na.buffer||q.enableVertexAttribArray(Eb);yd=kb||1;if(Na.type!==sb||Na.size!==yd||Na.buffer!==Ka||Na.normalized!==gb||Na.offset!==La||Na.stride!==tb)q.bindBuffer(34962,Ka.buffer),q.vertexAttribPointer(Eb,yd,sb,gb,tb,La),Na.type=sb,Na.size=yd,Na.buffer=Ka,Na.normalized=gb,Na.offset=La,Na.stride=tb;Na.divisor!==fb&&(w.vertexAttribDivisorANGLE(Eb,fb),Na.divisor=fb)}else if(Na.buffer&&(q.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Bc||Na.y!==
Ra||Na.z!==Kb||Na.w!==Pa)q.vertexAttrib4f(Eb,Bc,Ra,Kb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Kb,Na.w=Pa;Ya=this.position;Lb=!1;Mb=null;lb=0;Oa=!1;Qa=Zb=0;ub=1;vb=0;Ta=5126;uc=zc=fc=nb=0;J(Ya)?(Lb=!0,Mb=T.createStream(34962,Ya),Ta=Mb.dtype):(Mb=T.getBuffer(Ya))?Ta=Mb.dtype:"constant"in Ya?(ub=2,"number"===typeof Ya.constant?(fc=Ya.constant,zc=uc=nb=0):(fc=0<Ya.constant.length?Ya.constant[0]:0,zc=1<Ya.constant.length?Ya.constant[1]:0,uc=2<Ya.constant.length?Ya.constant[2]:0,nb=3<Ya.constant.length?Ya.constant[3]:
0)):(Mb=J(Ya.buffer)?T.createStream(34962,Ya.buffer):T.getBuffer(Ya.buffer),Ta="type"in Ya?Ja[Ya.type]:Mb.dtype,Oa=!!Ya.normalized,Qa=Ya.size|0,Zb=Ya.offset|0,vb=Ya.stride|0,lb=Ya.divisor|0);bb=xa.location;jc=P[bb];if(1===ub){jc.buffer||q.enableVertexAttribArray(bb);gd=Qa||2;if(jc.type!==Ta||jc.size!==gd||jc.buffer!==Mb||jc.normalized!==Oa||jc.offset!==Zb||jc.stride!==vb)q.bindBuffer(34962,Mb.buffer),q.vertexAttribPointer(bb,gd,Ta,Oa,vb,Zb),jc.type=Ta,jc.size=gd,jc.buffer=Mb,jc.normalized=Oa,jc.offset=
Zb,jc.stride=vb;jc.divisor!==lb&&(w.vertexAttribDivisorANGLE(bb,lb),jc.divisor=lb)}else if(jc.buffer&&(q.disableVertexAttribArray(bb),jc.buffer=null),jc.x!==fc||jc.y!==zc||jc.z!==uc||jc.w!==nb)q.vertexAttrib4f(bb,fc,zc,uc,nb),jc.x=fc,jc.y=zc,jc.z=uc,jc.w=nb;Xa=this.viewportArray;q.uniform4f(Y.location,Xa[0],Xa[1],Xa[2],Xa[3]);Mc=this.scale;q.uniform2f(na.location,Mc[0],Mc[1]);Ab=this.translate;q.uniform2f(Cc.location,Ab[0],Ab[1]);(Za=N.elements)?q.bindBuffer(34963,Za.buffer.buffer):ra.currentVAO&&
(Za=Q.getElements(ra.currentVAO.elements))&&q.bindBuffer(34963,Za.buffer.buffer);Vb=N.instances;for(I=0;I<k;++I){G=b[I];var sc,Wb,Qb,Kc,Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd;sc=n.call(this,x,G,I);I&&Wb===sc||(Wb=sc,q.uniform1f(D.location,sc));Qb=O.call(this,x,G,I);I&&Kc===Qb||(Kc=Qb,q.uniform1f(t.location,Qb));Rb=G.align;I&&Qd===Rb||(Qd=Rb,q.uniform1f(V.location,Rb));Ec=G.baseline;I&&Ed===Ec||(Ed=Ec,q.uniform1f(z.location,Ec));Nc=G.color;
ed=Nc[0];nc=Nc[1];gc=Nc[2];rc=Nc[3];I&&od===ed&&vc===nc&&db===gc&&Tb===rc||(od=ed,vc=nc,db=gc,Tb=rc,q.uniform4f(c.location,ed,nc,gc,rc));Xb=ja.call(this,x,G,I);cc=Xb[0];xc=Xb[1];I&&hc===cc&&Ac===xc||(hc=cc,Ac=xc,q.uniform2f(h.location,cc,xc));ad=e.call(this,x,G,I);Qc=ad[0];Sc=ad[1];I&&Rc===Qc&&Xc===Sc||(Rc=Qc,Xc=Sc,q.uniform2f(ba.location,Qc,Sc));wd=G.positionOffset;bd=wd[0];kc=wd[1];I&&Yc===bd&&bc===kc||(Yc=bd,bc=kc,q.uniform2f(y.location,bd,kc));Zc=G.opacity;I&&Uc===Zc||(Uc=Zc,q.uniform1f(a.location,
Zc));(cd=C.call(this,x,G,I))&&"framebuffer"===cd._reglType&&(cd=cd.color[0]);yc=cd._texture;q.uniform1i(f.location,yc.bind());hd=G.offset;if(pd=G.count)0<Vb?Za?w.drawElementsInstancedANGLE(0,pd,Za.type,hd<<(Za.type-5121>>1),Vb):w.drawArraysInstancedANGLE(0,hd,pd,Vb):0>Vb&&(Za?q.drawElements(0,pd,Za.type,hd<<(Za.type-5121>>1)):q.drawArrays(0,hd,pd)),yc.unbind()}Ic&&T.destroyStream(oc);qc&&T.destroyStream(Ob);rb&&T.destroyStream(Ka);Lb&&T.destroyStream(Mb);l.dirty=!0;ra.setVAO(null);x.viewportWidth=
M;x.viewportHeight=u;A&&(K.cpuTime+=performance.now()-B)},draw:function(e){var d,n,C,r,S,pa,u,A,B,w,O,G,L,U,W,ka,Z,ja,ma,Ca,ia,Fa,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb;d=oa.next;d!==oa.cur&&(d?q.bindFramebuffer(36160,d.framebuffer):q.bindFramebuffer(36160,null),oa.cur=d);if(l.dirty){var Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,
Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,Rb,Qd,Ec;Wa=da.dither;Wa!==l.dither&&(Wa?q.enable(3024):q.disable(3024),l.dither=Wa);tb=ga[0];sb=ga[1];if(tb!==Da[0]||sb!==Da[1])q.blendEquationSeparate(tb,sb),Da[0]=tb,Da[1]=sb;Pa=da.depth_func;Pa!==l.depth_func&&(q.depthFunc(Pa),l.depth_func=Pa);Bc=F[0];Ra=F[1];if(Bc!==eb[0]||Ra!==eb[1])q.depthRange(Bc,Ra),eb[0]=Bc,eb[1]=Ra;Kb=da.depth_mask;Kb!==l.depth_mask&&(q.depthMask(Kb),l.depth_mask=Kb);Eb=Aa[0];Na=Aa[1];yd=Aa[2];Ya=Aa[3];if(Eb!==
Ma[0]||Na!==Ma[1]||yd!==Ma[2]||Ya!==Ma[3])q.colorMask(Eb,Na,yd,Ya),Ma[0]=Eb,Ma[1]=Na,Ma[2]=yd,Ma[3]=Ya;Lb=da.cull_enable;Lb!==l.cull_enable&&(Lb?q.enable(2884):q.disable(2884),l.cull_enable=Lb);Mb=da.cull_face;Mb!==l.cull_face&&(q.cullFace(Mb),l.cull_face=Mb);lb=da.frontFace;lb!==l.frontFace&&(q.frontFace(lb),l.frontFace=lb);Oa=da.lineWidth;Oa!==l.lineWidth&&(q.lineWidth(Oa),l.lineWidth=Oa);Zb=da.polygonOffset_enable;Zb!==l.polygonOffset_enable&&(Zb?q.enable(32823):q.disable(32823),l.polygonOffset_enable=
Zb);Qa=Ua[0];ub=Ua[1];if(Qa!==v[0]||ub!==v[1])q.polygonOffset(Qa,ub),v[0]=Qa,v[1]=ub;vb=da.sample_alpha;vb!==l.sample_alpha&&(vb?q.enable(32926):q.disable(32926),l.sample_alpha=vb);Ta=da.sample_enable;Ta!==l.sample_enable&&(Ta?q.enable(32928):q.disable(32928),l.sample_enable=Ta);nb=p[0];fc=p[1];if(nb!==R[0]||fc!==R[1])q.sampleCoverage(nb,fc),R[0]=nb,R[1]=fc;zc=da.stencil_mask;zc!==l.stencil_mask&&(q.stencilMask(zc),l.stencil_mask=zc);uc=X[0];bb=X[1];jc=X[2];if(uc!==Hb[0]||bb!==Hb[1]||jc!==Hb[2])q.stencilFunc(uc,
bb,jc),Hb[0]=uc,Hb[1]=bb,Hb[2]=jc;gd=sa[0];Xa=sa[1];Mc=sa[2];Ab=sa[3];if(gd!==Ea[0]||Xa!==Ea[1]||Mc!==Ea[2]||Ab!==Ea[3])q.stencilOpSeparate(gd,Xa,Mc,Ab),Ea[0]=gd,Ea[1]=Xa,Ea[2]=Mc,Ea[3]=Ab;Za=ha[0];Vb=ha[1];sc=ha[2];Wb=ha[3];if(Za!==H[0]||Vb!==H[1]||sc!==H[2]||Wb!==H[3])q.stencilOpSeparate(Za,Vb,sc,Wb),H[0]=Za,H[1]=Vb,H[2]=sc,H[3]=Wb;Qb=da.scissor_enable;Qb!==l.scissor_enable&&(Qb?q.enable(3089):q.disable(3089),l.scissor_enable=Qb);Kc=ta[0];Rb=ta[1];Qd=ta[2];Ec=ta[3];if(Kc!==va[0]||Rb!==va[1]||Qd!==
va[2]||Ec!==va[3])q.scissor(Kc,Rb,Qd,Ec),va[0]=Kc,va[1]=Rb,va[2]=Qd,va[3]=Ec}n=this.viewport;C=n.x|0;r=n.y|0;S="width"in n?n.width|0:x.framebufferWidth-C;pa="height"in n?n.height|0:x.framebufferHeight-r;u=x.viewportWidth;x.viewportWidth=S;A=x.viewportHeight;x.viewportHeight=pa;q.viewport(C,r,S,pa);ya[0]=C;ya[1]=r;ya[2]=S;ya[3]=pa;q.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;q.enable(3042);l.blend_enable=!0;q.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;q.disable(2929);
l.depth_enable=!1;q.disable(2960);l.stencil_enable=!1;if(B=l.profile)w=performance.now(),K.count++;q.useProgram(I.program);O=za.angle_instanced_arrays;ra.setVAO(null);aa.buffer=this.sizeBuffer;G=!1;L=null;U=0;W=!1;Z=ka=0;ja=1;ma=0;Ca=5126;Ze=Ce=Fa=ia=0;J(aa)?(G=!0,L=T.createStream(34962,aa),Ca=L.dtype):(L=T.getBuffer(aa))?Ca=L.dtype:"constant"in aa?(ja=2,"number"===typeof aa.constant?(Fa=aa.constant,Ce=Ze=ia=0):(Fa=0<aa.constant.length?aa.constant[0]:0,Ce=1<aa.constant.length?aa.constant[1]:0,Ze=
2<aa.constant.length?aa.constant[2]:0,ia=3<aa.constant.length?aa.constant[3]:0)):(L=J(aa.buffer)?T.createStream(34962,aa.buffer):T.getBuffer(aa.buffer),Ca="type"in aa?Ja[aa.type]:L.dtype,W=!!aa.normalized,Z=aa.size|0,ka=aa.offset|0,ma=aa.stride|0,U=aa.divisor|0);Re=fa.location;Hd=P[Re];if(1===ja){Hd.buffer||q.enableVertexAttribArray(Re);Ae=Z||1;if(Hd.type!==Ca||Hd.size!==Ae||Hd.buffer!==L||Hd.normalized!==W||Hd.offset!==ka||Hd.stride!==ma)q.bindBuffer(34962,L.buffer),q.vertexAttribPointer(Re,Ae,Ca,
W,ma,ka),Hd.type=Ca,Hd.size=Ae,Hd.buffer=L,Hd.normalized=W,Hd.offset=ka,Hd.stride=ma;Hd.divisor!==U&&(O.vertexAttribDivisorANGLE(Re,U),Hd.divisor=U)}else if(Hd.buffer&&(q.disableVertexAttribArray(Re),Hd.buffer=null),Hd.x!==Fa||Hd.y!==Ce||Hd.z!==Ze||Hd.w!==ia)q.vertexAttrib4f(Re,Fa,Ce,Ze,ia),Hd.x=Fa,Hd.y=Ce,Hd.z=Ze,Hd.w=ia;la.buffer=this.sizeBuffer;te=!1;Zd=null;Bd=0;$d=!1;$c=ld=0;rd=1;Lc=0;nd=5126;kd=Pc=dd=Gc=0;J(la)?(te=!0,Zd=T.createStream(34962,la),nd=Zd.dtype):(Zd=T.getBuffer(la))?nd=Zd.dtype:
"constant"in la?(rd=2,"number"===typeof la.constant?(dd=la.constant,Pc=kd=Gc=0):(dd=0<la.constant.length?la.constant[0]:0,Pc=1<la.constant.length?la.constant[1]:0,kd=2<la.constant.length?la.constant[2]:0,Gc=3<la.constant.length?la.constant[3]:0)):(Zd=J(la.buffer)?T.createStream(34962,la.buffer):T.getBuffer(la.buffer),nd="type"in la?Ja[la.type]:Zd.dtype,$d=!!la.normalized,$c=la.size|0,ld=la.offset|0,Lc=la.stride|0,Bd=la.divisor|0);Bb=E.location;Fb=P[Bb];if(1===rd){Fb.buffer||q.enableVertexAttribArray(Bb);
tc=$c||1;if(Fb.type!==nd||Fb.size!==tc||Fb.buffer!==Zd||Fb.normalized!==$d||Fb.offset!==ld||Fb.stride!==Lc)q.bindBuffer(34962,Zd.buffer),q.vertexAttribPointer(Bb,tc,nd,$d,Lc,ld),Fb.type=nd,Fb.size=tc,Fb.buffer=Zd,Fb.normalized=$d,Fb.offset=ld,Fb.stride=Lc;Fb.divisor!==Bd&&(O.vertexAttribDivisorANGLE(Bb,Bd),Fb.divisor=Bd)}else if(Fb.buffer&&(q.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==dd||Fb.y!==Pc||Fb.z!==kd||Fb.w!==Gc)q.vertexAttrib4f(Bb,dd,Pc,kd,Gc),Fb.x=dd,Fb.y=Pc,Fb.z=kd,Fb.w=Gc;xb=
this.charBuffer;wc=!1;Cb=null;Jc=0;lc=!1;Wc=Hc=0;Vc=1;Dc=0;dc=5126;mc=pc=oc=Ic=0;J(xb)?(wc=!0,Cb=T.createStream(34962,xb),dc=Cb.dtype):(Cb=T.getBuffer(xb))?dc=Cb.dtype:"constant"in xb?(Vc=2,"number"===typeof xb.constant?(oc=xb.constant,pc=mc=Ic=0):(oc=0<xb.constant.length?xb.constant[0]:0,pc=1<xb.constant.length?xb.constant[1]:0,mc=2<xb.constant.length?xb.constant[2]:0,Ic=3<xb.constant.length?xb.constant[3]:0)):(Cb=J(xb.buffer)?T.createStream(34962,xb.buffer):T.getBuffer(xb.buffer),dc="type"in xb?
Ja[xb.type]:Cb.dtype,lc=!!xb.normalized,Wc=xb.size|0,Hc=xb.offset|0,Dc=xb.stride|0,Jc=xb.divisor|0);ec=ca.location;$a=P[ec];if(1===Vc){$a.buffer||q.enableVertexAttribArray(ec);Fc=Wc||1;if($a.type!==dc||$a.size!==Fc||$a.buffer!==Cb||$a.normalized!==lc||$a.offset!==Hc||$a.stride!==Dc)q.bindBuffer(34962,Cb.buffer),q.vertexAttribPointer(ec,Fc,dc,lc,Dc,Hc),$a.type=dc,$a.size=Fc,$a.buffer=Cb,$a.normalized=lc,$a.offset=Hc,$a.stride=Dc;$a.divisor!==Jc&&(O.vertexAttribDivisorANGLE(ec,Jc),$a.divisor=Jc)}else if($a.buffer&&
(q.disableVertexAttribArray(ec),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Ic)q.vertexAttrib4f(ec,oc,pc,mc,Ic),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Ic;yb=this.position;cb=!1;Nb=null;ab=0;ob=!1;vd=Va=0;Ib=1;Jb=0;qc=5126;Db=Gb=jb=Ob=0;J(yb)?(cb=!0,Nb=T.createStream(34962,yb),qc=Nb.dtype):(Nb=T.getBuffer(yb))?qc=Nb.dtype:"constant"in yb?(Ib=2,"number"===typeof yb.constant?(jb=yb.constant,Gb=Db=Ob=0):(jb=0<yb.constant.length?yb.constant[0]:0,Gb=1<yb.constant.length?yb.constant[1]:0,Db=2<yb.constant.length?
yb.constant[2]:0,Ob=3<yb.constant.length?yb.constant[3]:0)):(Nb=J(yb.buffer)?T.createStream(34962,yb.buffer):T.getBuffer(yb.buffer),qc="type"in yb?Ja[yb.type]:Nb.dtype,ob=!!yb.normalized,vd=yb.size|0,Va=yb.offset|0,Jb=yb.stride|0,ab=yb.divisor|0);wb=xa.location;hb=P[wb];if(1===Ib){hb.buffer||q.enableVertexAttribArray(wb);Yb=vd||2;if(hb.type!==qc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Va||hb.stride!==Jb)q.bindBuffer(34962,Nb.buffer),q.vertexAttribPointer(wb,Yb,qc,ob,Jb,Va),
hb.type=qc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Va,hb.stride=Jb;hb.divisor!==ab&&(O.vertexAttribDivisorANGLE(wb,ab),hb.divisor=ab)}else if(hb.buffer&&(q.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)q.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=M.call(this,x,e,0);q.uniform1f(D.location,Pb);qb=g.call(this,x,e,0);q.uniform1f(t.location,qb);q.uniform1f(V.location,e.align);q.uniform1f(z.location,e.baseline);Sa=this.viewportArray;
q.uniform4f(Y.location,Sa[0],Sa[1],Sa[2],Sa[3]);Ub=e.color;q.uniform4f(c.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=k.call(this,x,e,0);q.uniform2f(h.location,zb[0],zb[1]);ic=m.call(this,x,e,0);q.uniform2f(ba.location,ic[0],ic[1]);ib=this.scale;q.uniform2f(na.location,ib[0],ib[1]);pb=this.translate;q.uniform2f(Cc.location,pb[0],pb[1]);Ha=e.positionOffset;q.uniform2f(y.location,Ha[0],Ha[1]);q.uniform1f(a.location,e.opacity);(rb=b.call(this,x,e,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);Ka=rb._texture;
q.uniform1i(f.location,Ka.bind());(fb=N.elements)?q.bindBuffer(34963,fb.buffer.buffer):ra.currentVAO&&(fb=Q.getElements(ra.currentVAO.elements))&&q.bindBuffer(34963,fb.buffer.buffer);gb=e.offset;if(La=e.count)kb=N.instances,0<kb?fb?O.drawElementsInstancedANGLE(0,La,fb.type,gb<<(fb.type-5121>>1),kb):O.drawArraysInstancedANGLE(0,gb,La,kb):0>kb&&(fb?q.drawElements(0,La,fb.type,gb<<(fb.type-5121>>1)):q.drawArrays(0,gb,La)),l.dirty=!0,ra.setVAO(null),x.viewportWidth=u,x.viewportHeight=A,B&&(K.cpuTime+=
performance.now()-w),G&&T.destroyStream(L),te&&T.destroyStream(Zd),wc&&T.destroyStream(Cb),cb&&T.destroyStream(Nb),Ka.unbind()},scope:function(a,c,b){var e,f,k,h,v,q,p,m,H,F,t,g,d,n,y,R,C,z,sa,Ea,P,D,ga,M,ha,E,eb,Q,Ma,I,O,ya,ta,wa,za,ra,U,V,Y,ba,fa,Ua,ca,ja,qa,Da,oa,Aa,xa,na,va,Hb,X,Cc,td,ia,$a,Fa,yb,cb,Nb,ab,ob,Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa,Mc,Ab,Za,Vb,sc,Wb,Qb,Kc,
Rb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Tb,Xb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd;e=this.viewport;f=e.x|0;k=e.y|0;h="width"in e?e.width|0:x.framebufferWidth-f;v="height"in e?e.height|0:x.framebufferHeight-k;q=x.viewportWidth;x.viewportWidth=h;p=x.viewportHeight;x.viewportHeight=v;m=pa[0];pa[0]=f;H=pa[1];pa[1]=k;F=pa[2];pa[2]=h;t=pa[3];pa[3]=v;g=Ca[0];Ca[0]=0;d=Ca[1];Ca[1]=0;n=Ca[2];Ca[2]=0;y=Ca[3];Ca[3]=1;R=da.blend_enable;da.blend_enable=!0;C=ka[0];ka[0]=770;z=ka[1];ka[1]=771;sa=
ka[2];ka[2]=773;Ea=ka[3];ka[3]=1;P=da.depth_enable;da.depth_enable=!1;D=da.stencil_enable;da.stencil_enable=!1;if(ga=l.profile)M=performance.now(),K.count++;ha=a.offset;E=N.offset;N.offset=ha;eb=a.count;Q=N.count;N.count=eb;Ma=N.primitive;N.primitive=0;I=a.align;O=ma[64];ma[64]=I;ya=G.call(this,x,a,b);ta=ma[69];ma[69]=ya;wa=B.call(this,x,a,b);za=ma[67];ma[67]=wa;ra=L.call(this,x,a,b);U=ma[66];ma[66]=ra;V=a.baseline;Y=ma[65];ma[65]=V;ba=W.call(this,x,a,b);fa=ma[62];ma[62]=ba;Ua=a.color;ca=ma[14];ma[14]=
Ua;ja=u.call(this,x,a,b);qa=ma[63];ma[63]=ja;Da=a.opacity;oa=ma[10];ma[10]=Da;Aa=a.positionOffset;xa=ma[68];ma[68]=Aa;na=this.scale;va=ma[6];ma[6]=na;Hb=this.translate;X=ma[8];ma[8]=Hb;Cc=this.viewportArray;td=ma[3];ma[3]=Cc;ia=this.charBuffer;$a=!1;Fa=null;yb=0;cb=!1;ab=Nb=0;ob=1;Va=0;vd=5126;Ob=qc=Jb=Ib=0;J(ia)?($a=!0,Fa=T.createStream(34962,ia),vd=Fa.dtype):(Fa=T.getBuffer(ia))?vd=Fa.dtype:"constant"in ia?(ob=2,"number"===typeof ia.constant?(Jb=ia.constant,qc=Ob=Ib=0):(Jb=0<ia.constant.length?
ia.constant[0]:0,qc=1<ia.constant.length?ia.constant[1]:0,Ob=2<ia.constant.length?ia.constant[2]:0,Ib=3<ia.constant.length?ia.constant[3]:0)):(Fa=J(ia.buffer)?T.createStream(34962,ia.buffer):T.getBuffer(ia.buffer),vd="type"in ia?Ja[ia.type]:Fa.dtype,cb=!!ia.normalized,ab=ia.size|0,Nb=ia.offset|0,Va=ia.stride|0,yb=ia.divisor|0);jb=A.buffer;A.buffer=Fa;Gb=A.divisor;A.divisor=yb;Db=A.normalized;A.normalized=cb;wb=A.offset;A.offset=Nb;hb=A.size;A.size=ab;Yb=A.state;A.state=ob;Pb=A.stride;A.stride=Va;
qb=A.type;A.type=vd;Sa=A.w;A.w=Ib;Ub=A.x;A.x=Jb;zb=A.y;A.y=qc;ic=A.z;A.z=Ob;la.buffer=this.sizeBuffer;ib=!1;pb=null;Ha=0;rb=!1;fb=Ka=0;gb=1;La=0;kb=5126;Pa=sb=tb=Wa=0;J(la)?(ib=!0,pb=T.createStream(34962,la),kb=pb.dtype):(pb=T.getBuffer(la))?kb=pb.dtype:"constant"in la?(gb=2,"number"===typeof la.constant?(tb=la.constant,sb=Pa=Wa=0):(tb=0<la.constant.length?la.constant[0]:0,sb=1<la.constant.length?la.constant[1]:0,Pa=2<la.constant.length?la.constant[2]:0,Wa=3<la.constant.length?la.constant[3]:0)):
(pb=J(la.buffer)?T.createStream(34962,la.buffer):T.getBuffer(la.buffer),kb="type"in la?Ja[la.type]:pb.dtype,rb=!!la.normalized,fb=la.size|0,Ka=la.offset|0,La=la.stride|0,Ha=la.divisor|0);Bc=w.buffer;w.buffer=pb;Ra=w.divisor;w.divisor=Ha;Kb=w.normalized;w.normalized=rb;Eb=w.offset;w.offset=Ka;Na=w.size;w.size=fb;yd=w.state;w.state=gb;Ya=w.stride;w.stride=La;Lb=w.type;w.type=kb;Mb=w.w;w.w=Wa;lb=w.x;w.x=tb;Oa=w.y;w.y=sb;Zb=w.z;w.z=Pa;Qa=this.position;ub=!1;vb=null;Ta=0;nb=!1;zc=fc=0;uc=1;bb=0;jc=5126;
Ab=Mc=Xa=gd=0;J(Qa)?(ub=!0,vb=T.createStream(34962,Qa),jc=vb.dtype):(vb=T.getBuffer(Qa))?jc=vb.dtype:"constant"in Qa?(uc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,Mc=Ab=gd=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,Mc=1<Qa.constant.length?Qa.constant[1]:0,Ab=2<Qa.constant.length?Qa.constant[2]:0,gd=3<Qa.constant.length?Qa.constant[3]:0)):(vb=J(Qa.buffer)?T.createStream(34962,Qa.buffer):T.getBuffer(Qa.buffer),jc="type"in Qa?Ja[Qa.type]:vb.dtype,nb=!!Qa.normalized,zc=Qa.size|0,fc=Qa.offset|
0,bb=Qa.stride|0,Ta=Qa.divisor|0);Za=Z.buffer;Z.buffer=vb;Vb=Z.divisor;Z.divisor=Ta;sc=Z.normalized;Z.normalized=nb;Wb=Z.offset;Z.offset=fc;Qb=Z.size;Z.size=zc;Kc=Z.state;Z.state=uc;Rb=Z.stride;Z.stride=bb;Qd=Z.type;Z.type=jc;Ec=Z.w;Z.w=gd;Ed=Z.x;Z.x=Xa;Nc=Z.y;Z.y=Mc;ed=Z.z;Z.z=Ab;aa.buffer=this.sizeBuffer;od=!1;nc=null;vc=0;gc=!1;rc=db=0;Tb=1;Xb=0;cc=5126;ad=Ac=xc=hc=0;J(aa)?(od=!0,nc=T.createStream(34962,aa),cc=nc.dtype):(nc=T.getBuffer(aa))?cc=nc.dtype:"constant"in aa?(Tb=2,"number"===typeof aa.constant?
(xc=aa.constant,Ac=ad=hc=0):(xc=0<aa.constant.length?aa.constant[0]:0,Ac=1<aa.constant.length?aa.constant[1]:0,ad=2<aa.constant.length?aa.constant[2]:0,hc=3<aa.constant.length?aa.constant[3]:0)):(nc=J(aa.buffer)?T.createStream(34962,aa.buffer):T.getBuffer(aa.buffer),cc="type"in aa?Ja[aa.type]:nc.dtype,gc=!!aa.normalized,rc=aa.size|0,db=aa.offset|0,Xb=aa.stride|0,vc=aa.divisor|0);Qc=r.buffer;r.buffer=nc;Rc=r.divisor;r.divisor=vc;Sc=r.normalized;r.normalized=gc;Xc=r.offset;r.offset=db;wd=r.size;r.size=
rc;bd=r.state;r.state=Tb;Yc=r.stride;r.stride=Xb;kc=r.type;r.type=cc;bc=r.w;r.w=hc;Zc=r.x;r.x=xc;Uc=r.y;r.y=Ac;cd=r.z;r.z=ad;yc=S.vert;S.vert=61;hd=S.frag;S.frag=60;l.dirty=!0;c(x,a,b);x.viewportWidth=q;x.viewportHeight=p;pa[0]=m;pa[1]=H;pa[2]=F;pa[3]=t;Ca[0]=g;Ca[1]=d;Ca[2]=n;Ca[3]=y;da.blend_enable=R;ka[0]=C;ka[1]=z;ka[2]=sa;ka[3]=Ea;da.depth_enable=P;da.stencil_enable=D;ga&&(K.cpuTime+=performance.now()-M);N.offset=E;N.count=Q;N.primitive=Ma;ma[64]=O;ma[69]=ta;ma[67]=za;ma[66]=U;ma[65]=Y;ma[62]=
fa;ma[14]=ca;ma[63]=qa;ma[10]=oa;ma[68]=xa;ma[6]=va;ma[8]=X;ma[3]=td;$a&&T.destroyStream(Fa);A.buffer=jb;A.divisor=Gb;A.normalized=Db;A.offset=wb;A.size=hb;A.state=Yb;A.stride=Pb;A.type=qb;A.w=Sa;A.x=Ub;A.y=zb;A.z=ic;ib&&T.destroyStream(pb);w.buffer=Bc;w.divisor=Ra;w.normalized=Kb;w.offset=Eb;w.size=Na;w.state=yd;w.stride=Ya;w.type=Lb;w.w=Mb;w.x=lb;w.y=Oa;w.z=Zb;ub&&T.destroyStream(vb);Z.buffer=Za;Z.divisor=Vb;Z.normalized=sc;Z.offset=Wb;Z.size=Qb;Z.state=Kc;Z.stride=Rb;Z.type=Qd;Z.w=Ec;Z.x=Ed;Z.y=
Nc;Z.z=ed;od&&T.destroyStream(nc);r.buffer=Qc;r.divisor=Rc;r.normalized=Sc;r.offset=Xc;r.size=wd;r.state=bd;r.stride=Yc;r.type=kc;r.w=bc;r.x=Zc;r.y=Uc;r.z=cd;S.vert=yc;S.frag=hd;l.dirty=!0}}},$2:function(d,K,I){var M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t;M=d.attributes;g=d.current;k=d.framebuffer;m=d.gl;b=d.next;G=d.vao;B=b.blend_color;L=g.blend_color;W=b.blend_equation;u=g.blend_equation;A=b.blend_func;w=g.blend_func;Z=b.colorMask;r=g.colorMask;U=b.depth_range;n=g.depth_range;
O=b.polygonOffset_offset;ja=g.polygonOffset_offset;e=b.sample_coverage;C=g.sample_coverage;V=b.scissor_box;f=g.scissor_box;ba=b.stencil_func;h=g.stencil_func;z=b.stencil_opBack;ca=g.stencil_opBack;E=b.stencil_opFront;D=g.stencil_opFront;c=b.viewport;t=g.viewport;return{poll:function(){var a,d,y,M,I,G,K,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca;g.dirty=!1;d=b.blend_enable;y=b.cull_enable;M=b.depth_enable;I=b.dither;G=b.polygonOffset_enable;K=b.sample_alpha;P=b.sample_enable;T=b.scissor_enable;x=b.stencil_enable;
l=b.cull_face;N=g.cull_face;Q=b.depth_func;za=g.depth_func;oa=b.depth_mask;q=g.depth_mask;J=b.frontFace;da=g.frontFace;S=b.lineWidth;ma=g.lineWidth;ra=b.stencil_mask;Ca=g.stencil_mask;a=k.next;a!==k.cur&&(a?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null),k.cur=a);d!==g.blend_enable&&(d?m.enable(3042):m.disable(3042),g.blend_enable=d);y!==g.cull_enable&&(y?m.enable(2884):m.disable(2884),g.cull_enable=y);M!==g.depth_enable&&(M?m.enable(2929):m.disable(2929),g.depth_enable=M);I!==
g.dither&&(I?m.enable(3024):m.disable(3024),g.dither=I);G!==g.polygonOffset_enable&&(G?m.enable(32823):m.disable(32823),g.polygonOffset_enable=G);K!==g.sample_alpha&&(K?m.enable(32926):m.disable(32926),g.sample_alpha=K);P!==g.sample_enable&&(P?m.enable(32928):m.disable(32928),g.sample_enable=P);T!==g.scissor_enable&&(T?m.enable(3089):m.disable(3089),g.scissor_enable=T);x!==g.stencil_enable&&(x?m.enable(2960):m.disable(2960),g.stencil_enable=x);if(B[0]!==L[0]||B[1]!==L[1]||B[2]!==L[2]||B[3]!==L[3])m.blendColor(B[0],
B[1],B[2],B[3]),L[0]=B[0],L[1]=B[1],L[2]=B[2],L[3]=B[3];if(W[0]!==u[0]||W[1]!==u[1])m.blendEquationSeparate(W[0],W[1]),u[0]=W[0],u[1]=W[1];if(A[0]!==w[0]||A[1]!==w[1]||A[2]!==w[2]||A[3]!==w[3])m.blendFuncSeparate(A[0],A[1],A[2],A[3]),w[0]=A[0],w[1]=A[1],w[2]=A[2],w[3]=A[3];if(Z[0]!==r[0]||Z[1]!==r[1]||Z[2]!==r[2]||Z[3]!==r[3])m.colorMask(Z[0],Z[1],Z[2],Z[3]),r[0]=Z[0],r[1]=Z[1],r[2]=Z[2],r[3]=Z[3];l!==N&&(m.cullFace(l),g.cull_face=l);Q!==za&&(m.depthFunc(Q),g.depth_func=Q);oa!==q&&(m.depthMask(oa),
g.depth_mask=oa);if(U[0]!==n[0]||U[1]!==n[1])m.depthRange(U[0],U[1]),n[0]=U[0],n[1]=U[1];J!==da&&(m.frontFace(J),g.frontFace=J);S!==ma&&(m.lineWidth(S),g.lineWidth=S);if(O[0]!==ja[0]||O[1]!==ja[1])m.polygonOffset(O[0],O[1]),ja[0]=O[0],ja[1]=O[1];if(e[0]!==C[0]||e[1]!==C[1])m.sampleCoverage(e[0],e[1]),C[0]=e[0],C[1]=e[1];if(V[0]!==f[0]||V[1]!==f[1]||V[2]!==f[2]||V[3]!==f[3])m.scissor(V[0],V[1],V[2],V[3]),f[0]=V[0],f[1]=V[1],f[2]=V[2],f[3]=V[3];if(ba[0]!==h[0]||ba[1]!==h[1]||ba[2]!==h[2])m.stencilFunc(ba[0],
ba[1],ba[2]),h[0]=ba[0],h[1]=ba[1],h[2]=ba[2];ra!==Ca&&(m.stencilMask(ra),g.stencil_mask=ra);if(z[0]!==ca[0]||z[1]!==ca[1]||z[2]!==ca[2]||z[3]!==ca[3])m.stencilOpSeparate(z[0],z[1],z[2],z[3]),ca[0]=z[0],ca[1]=z[1],ca[2]=z[2],ca[3]=z[3];if(E[0]!==D[0]||E[1]!==D[1]||E[2]!==D[2]||E[3]!==D[3])m.stencilOpSeparate(E[0],E[1],E[2],E[3]),D[0]=E[0],D[1]=E[1],D[2]=E[2],D[3]=E[3];if(c[0]!==t[0]||c[1]!==t[1]||c[2]!==t[2]||c[3]!==t[3])m.viewport(c[0],c[1],c[2],c[3]),t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=c[3]},refresh:function(){var a,
d,y,I,K,Y,fa,P,T,x,l,N,Q,za,oa,q;g.dirty=!1;d=b.blend_enable;y=b.cull_enable;I=b.depth_enable;K=b.dither;Y=b.polygonOffset_enable;fa=b.sample_alpha;P=b.sample_enable;T=b.scissor_enable;x=b.stencil_enable;l=b.cull_face;N=b.depth_func;Q=b.depth_mask;za=b.frontFace;oa=b.lineWidth;q=b.stencil_mask;(a=k.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);k.cur=a;a=M[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,
a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=M[1];a.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=M[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):
(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=M[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=M[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(4),
m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=M[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=M[6];a.buffer?(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,a.x,a.y,a.z,
a.w),a.buffer=null);a=M[7];a.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=M[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=M[9];a.buffer?
(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=M[10];a.buffer?(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=M[11];a.buffer?(m.enableVertexAttribArray(11),
m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=M[12];a.buffer?(m.enableVertexAttribArray(12),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=M[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),
m.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=M[14];a.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=M[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(15,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);G.currentVAO=null;G.setVAO(G.targetVAO);d?m.enable(3042):m.disable(3042);g.blend_enable=d;y?m.enable(2884):m.disable(2884);g.cull_enable=y;I?m.enable(2929):m.disable(2929);g.depth_enable=I;K?m.enable(3024):m.disable(3024);g.dither=K;Y?m.enable(32823):m.disable(32823);g.polygonOffset_enable=Y;fa?m.enable(32926):m.disable(32926);g.sample_alpha=fa;P?m.enable(32928):m.disable(32928);
g.sample_enable=P;T?m.enable(3089):m.disable(3089);g.scissor_enable=T;x?m.enable(2960):m.disable(2960);g.stencil_enable=x;m.blendColor(B[0],B[1],B[2],B[3]);L[0]=B[0];L[1]=B[1];L[2]=B[2];L[3]=B[3];m.blendEquationSeparate(W[0],W[1]);u[0]=W[0];u[1]=W[1];m.blendFuncSeparate(A[0],A[1],A[2],A[3]);w[0]=A[0];w[1]=A[1];w[2]=A[2];w[3]=A[3];m.colorMask(Z[0],Z[1],Z[2],Z[3]);r[0]=Z[0];r[1]=Z[1];r[2]=Z[2];r[3]=Z[3];m.cullFace(l);g.cull_face=l;m.depthFunc(N);g.depth_func=N;m.depthMask(Q);g.depth_mask=Q;m.depthRange(U[0],
U[1]);n[0]=U[0];n[1]=U[1];m.frontFace(za);g.frontFace=za;m.lineWidth(oa);g.lineWidth=oa;m.polygonOffset(O[0],O[1]);ja[0]=O[0];ja[1]=O[1];m.sampleCoverage(e[0],e[1]);C[0]=e[0];C[1]=e[1];m.scissor(V[0],V[1],V[2],V[3]);f[0]=V[0];f[1]=V[1];f[2]=V[2];f[3]=V[3];m.stencilFunc(ba[0],ba[1],ba[2]);h[0]=ba[0];h[1]=ba[1];h[2]=ba[2];m.stencilMask(q);g.stencil_mask=q;m.stencilOpSeparate(z[0],z[1],z[2],z[3]);ca[0]=z[0];ca[1]=z[1];ca[2]=z[2];ca[3]=z[3];m.stencilOpSeparate(E[0],E[1],E[2],E[3]);D[0]=E[0];D[1]=E[1];
D[2]=E[2];D[3]=E[3];m.viewport(c[0],c[1],c[2],c[3]);t[0]=c[0];t[1]=c[1];t[2]=c[2];t[3]=c[3]}}},$7:function(d,K,I,M,g,k,m,b){var G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,X,Y,fa,P;G=d.context;B=d.current;L=d.framebuffer;W=d.gl;u=d.next;A=d.shader;w=d.vao;Z=u.blend_color;r=B.blend_color;U=u.blend_equation;n=B.blend_equation;O=u.blend_func;ja=B.blend_func;e=u.colorMask;C=B.colorMask;V=u.depth_range;f=B.depth_range;ba=u.polygonOffset_offset;h=B.polygonOffset_offset;z=u.sample_coverage;
ca=B.sample_coverage;E=u.scissor_box;D=B.scissor_box;c=u.stencil_func;t=B.stencil_func;a=u.stencil_opBack;xa=B.stencil_opBack;y=u.stencil_opFront;na=B.stencil_opFront;X=u.viewport;Y=B.viewport;fa={};P={};return{draw:function(b){var m,l,d,P,E,oa,q,J,da,S;m=b.framebuffer;l=L.getFramebuffer(m);m&&!l&&K.commandRaise(g,I);m=L.next;L.next=l;d=G.framebufferWidth;G.framebufferWidth=l?l.width:G.drawingBufferWidth;P=G.framebufferHeight;G.framebufferHeight=l?l.height:G.drawingBufferHeight;l!==L.cur&&(l?W.bindFramebuffer(36160,
l.framebuffer):W.bindFramebuffer(36160,null),L.cur=l);if(B.dirty){l=u.dither;l!==B.dither&&(l?W.enable(3024):W.disable(3024),B.dither=l);l=u.blend_enable;l!==B.blend_enable&&(l?W.enable(3042):W.disable(3042),B.blend_enable=l);l=Z[0];q=Z[1];E=Z[2];oa=Z[3];if(l!==r[0]||q!==r[1]||E!==r[2]||oa!==r[3])W.blendColor(l,q,E,oa),r[0]=l,r[1]=q,r[2]=E,r[3]=oa;l=U[0];q=U[1];if(l!==n[0]||q!==n[1])W.blendEquationSeparate(l,q),n[0]=l,n[1]=q;l=O[0];q=O[1];E=O[2];oa=O[3];if(l!==ja[0]||q!==ja[1]||E!==ja[2]||oa!==ja[3])W.blendFuncSeparate(l,
q,E,oa),ja[0]=l,ja[1]=q,ja[2]=E,ja[3]=oa;l=u.depth_enable;l!==B.depth_enable&&(l?W.enable(2929):W.disable(2929),B.depth_enable=l);l=u.depth_func;l!==B.depth_func&&(W.depthFunc(l),B.depth_func=l);l=V[0];q=V[1];if(l!==f[0]||q!==f[1])W.depthRange(l,q),f[0]=l,f[1]=q;l=u.depth_mask;l!==B.depth_mask&&(W.depthMask(l),B.depth_mask=l);l=e[0];q=e[1];E=e[2];oa=e[3];if(l!==C[0]||q!==C[1]||E!==C[2]||oa!==C[3])W.colorMask(l,q,E,oa),C[0]=l,C[1]=q,C[2]=E,C[3]=oa;l=u.cull_enable;l!==B.cull_enable&&(l?W.enable(2884):
W.disable(2884),B.cull_enable=l);l=u.cull_face;l!==B.cull_face&&(W.cullFace(l),B.cull_face=l);l=u.frontFace;l!==B.frontFace&&(W.frontFace(l),B.frontFace=l);l=u.lineWidth;l!==B.lineWidth&&(W.lineWidth(l),B.lineWidth=l);l=u.polygonOffset_enable;l!==B.polygonOffset_enable&&(l?W.enable(32823):W.disable(32823),B.polygonOffset_enable=l);l=ba[0];q=ba[1];if(l!==h[0]||q!==h[1])W.polygonOffset(l,q),h[0]=l,h[1]=q;l=u.sample_alpha;l!==B.sample_alpha&&(l?W.enable(32926):W.disable(32926),B.sample_alpha=l);l=u.sample_enable;
l!==B.sample_enable&&(l?W.enable(32928):W.disable(32928),B.sample_enable=l);l=z[0];q=z[1];if(l!==ca[0]||q!==ca[1])W.sampleCoverage(l,q),ca[0]=l,ca[1]=q;l=u.stencil_enable;l!==B.stencil_enable&&(l?W.enable(2960):W.disable(2960),B.stencil_enable=l);l=u.stencil_mask;l!==B.stencil_mask&&(W.stencilMask(l),B.stencil_mask=l);l=c[0];q=c[1];E=c[2];if(l!==t[0]||q!==t[1]||E!==t[2])W.stencilFunc(l,q,E),t[0]=l,t[1]=q,t[2]=E;l=y[0];q=y[1];E=y[2];oa=y[3];if(l!==na[0]||q!==na[1]||E!==na[2]||oa!==na[3])W.stencilOpSeparate(l,
q,E,oa),na[0]=l,na[1]=q,na[2]=E,na[3]=oa;l=a[0];q=a[1];E=a[2];oa=a[3];if(l!==xa[0]||q!==xa[1]||E!==xa[2]||oa!==xa[3])W.stencilOpSeparate(l,q,E,oa),xa[0]=l,xa[1]=q,xa[2]=E,xa[3]=oa;l=u.scissor_enable;l!==B.scissor_enable&&(l?W.enable(3089):W.disable(3089),B.scissor_enable=l)}E=G.framebufferWidth;oa=G.framebufferHeight;l=G.viewportWidth;G.viewportWidth=E;q=G.viewportHeight;G.viewportHeight=oa;W.viewport(0,0,E,oa);Y[0]=0;Y[1]=0;Y[2]=E;Y[3]=oa;E=G.framebufferWidth;oa=G.framebufferHeight;W.scissor(0,0,
E,oa);D[0]=0;D[1]=0;D[2]=E;D[3]=oa;if(E=B.profile)J=performance.now(),M.count++;oa=A.program(A.vert,A.frag,I);W.useProgram(oa.program);w.setVAO(null);da=oa.id;(S=fa[da])||(S=fa[da]=k(oa));S.call(this,b);B.dirty=!0;w.setVAO(null);L.next=m;G.framebufferWidth=d;G.framebufferHeight=P;G.viewportWidth=l;G.viewportHeight=q;E&&(M.cpuTime+=performance.now()-J)},scope:function(a,c,b){var e,f,k,h,q,t,g,d,n,y,C,z,r,P,D;e=a.framebuffer;f=L.getFramebuffer(e);e&&!f&&K.commandRaise(m,I);e=L.next;L.next=f;k=G.framebufferWidth;
G.framebufferWidth=f?f.width:G.drawingBufferWidth;h=G.framebufferHeight;G.framebufferHeight=f?f.height:G.drawingBufferHeight;q=G.framebufferWidth;t=G.framebufferHeight;f=G.viewportWidth;G.viewportWidth=q;g=G.viewportHeight;G.viewportHeight=t;d=X[0];X[0]=0;n=X[1];X[1]=0;y=X[2];X[2]=q;q=X[3];X[3]=t;C=G.framebufferWidth;z=G.framebufferHeight;t=E[0];E[0]=0;r=E[1];E[1]=0;P=E[2];E[2]=C;C=E[3];E[3]=z;if(z=B.profile)D=performance.now(),M.count++;B.dirty=!0;c(G,a,b);L.next=e;G.framebufferWidth=k;G.framebufferHeight=
h;G.viewportWidth=f;G.viewportHeight=g;X[0]=d;X[1]=n;X[2]=y;X[3]=q;E[0]=t;E[1]=r;E[2]=P;E[3]=C;z&&(M.cpuTime+=performance.now()-D);B.dirty=!0},batch:function(k,m){var l,g,d,D,E;if(B.dirty){l=u.dither;l!==B.dither&&(l?W.enable(3024):W.disable(3024),B.dither=l);l=u.blend_enable;l!==B.blend_enable&&(l?W.enable(3042):W.disable(3042),B.blend_enable=l);l=Z[0];d=Z[1];D=Z[2];E=Z[3];if(l!==r[0]||d!==r[1]||D!==r[2]||E!==r[3])W.blendColor(l,d,D,E),r[0]=l,r[1]=d,r[2]=D,r[3]=E;l=U[0];d=U[1];if(l!==n[0]||d!==n[1])W.blendEquationSeparate(l,
d),n[0]=l,n[1]=d;l=O[0];d=O[1];D=O[2];E=O[3];if(l!==ja[0]||d!==ja[1]||D!==ja[2]||E!==ja[3])W.blendFuncSeparate(l,d,D,E),ja[0]=l,ja[1]=d,ja[2]=D,ja[3]=E;l=u.depth_enable;l!==B.depth_enable&&(l?W.enable(2929):W.disable(2929),B.depth_enable=l);l=u.depth_func;l!==B.depth_func&&(W.depthFunc(l),B.depth_func=l);l=V[0];d=V[1];if(l!==f[0]||d!==f[1])W.depthRange(l,d),f[0]=l,f[1]=d;l=u.depth_mask;l!==B.depth_mask&&(W.depthMask(l),B.depth_mask=l);l=e[0];d=e[1];D=e[2];E=e[3];if(l!==C[0]||d!==C[1]||D!==C[2]||E!==
C[3])W.colorMask(l,d,D,E),C[0]=l,C[1]=d,C[2]=D,C[3]=E;l=u.cull_enable;l!==B.cull_enable&&(l?W.enable(2884):W.disable(2884),B.cull_enable=l);l=u.cull_face;l!==B.cull_face&&(W.cullFace(l),B.cull_face=l);l=u.frontFace;l!==B.frontFace&&(W.frontFace(l),B.frontFace=l);l=u.lineWidth;l!==B.lineWidth&&(W.lineWidth(l),B.lineWidth=l);l=u.polygonOffset_enable;l!==B.polygonOffset_enable&&(l?W.enable(32823):W.disable(32823),B.polygonOffset_enable=l);l=ba[0];d=ba[1];if(l!==h[0]||d!==h[1])W.polygonOffset(l,d),h[0]=
l,h[1]=d;l=u.sample_alpha;l!==B.sample_alpha&&(l?W.enable(32926):W.disable(32926),B.sample_alpha=l);l=u.sample_enable;l!==B.sample_enable&&(l?W.enable(32928):W.disable(32928),B.sample_enable=l);l=z[0];d=z[1];if(l!==ca[0]||d!==ca[1])W.sampleCoverage(l,d),ca[0]=l,ca[1]=d;l=u.stencil_enable;l!==B.stencil_enable&&(l?W.enable(2960):W.disable(2960),B.stencil_enable=l);l=u.stencil_mask;l!==B.stencil_mask&&(W.stencilMask(l),B.stencil_mask=l);l=c[0];d=c[1];D=c[2];if(l!==t[0]||d!==t[1]||D!==t[2])W.stencilFunc(l,
d,D),t[0]=l,t[1]=d,t[2]=D;l=y[0];d=y[1];D=y[2];E=y[3];if(l!==na[0]||d!==na[1]||D!==na[2]||E!==na[3])W.stencilOpSeparate(l,d,D,E),na[0]=l,na[1]=d,na[2]=D,na[3]=E;l=a[0];d=a[1];D=a[2];E=a[3];if(l!==xa[0]||d!==xa[1]||D!==xa[2]||E!==xa[3])W.stencilOpSeparate(l,d,D,E),xa[0]=l,xa[1]=d,xa[2]=D,xa[3]=E;l=u.scissor_enable;l!==B.scissor_enable&&(l?W.enable(3089):W.disable(3089),B.scissor_enable=l)}if(l=B.profile)g=performance.now(),M.count+=m;d=A.program(A.vert,A.frag,I);W.useProgram(d.program);w.setVAO(null);
D=d.id;(E=P[D])||(E=P[D]=b(d));E.call(this,k,m);B.dirty=!0;w.setVAO(null);l&&(M.cpuTime+=performance.now()-g)}}},$5:function(d,K,I,M,g,k){var m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,X,Y;m=d.context;b=d.current;G=d.framebuffer;B=d.gl;L=d.next;W=d.shader;u=d.vao;A=L.blend_color;w=b.blend_color;Z=L.blend_equation;r=b.blend_equation;U=L.blend_func;n=b.blend_func;O=L.colorMask;ja=b.colorMask;e=L.depth_range;C=b.depth_range;V=L.polygonOffset_offset;f=b.polygonOffset_offset;ba=
L.sample_coverage;h=b.sample_coverage;z=L.scissor_box;ca=b.scissor_box;E=L.stencil_func;D=b.stencil_func;c=L.stencil_opBack;t=b.stencil_opBack;a=L.stencil_opFront;xa=b.stencil_opFront;y=L.viewport;na=b.viewport;X={};Y={};return{draw:function(k){var m,d,x,l,N;m=G.next;m!==G.cur&&(m?B.bindFramebuffer(36160,m.framebuffer):B.bindFramebuffer(36160,null),G.cur=m);if(b.dirty){m=L.dither;m!==b.dither&&(m?B.enable(3024):B.disable(3024),b.dither=m);m=L.blend_enable;m!==b.blend_enable&&(m?B.enable(3042):B.disable(3042),
b.blend_enable=m);m=A[0];x=A[1];l=A[2];N=A[3];if(m!==w[0]||x!==w[1]||l!==w[2]||N!==w[3])B.blendColor(m,x,l,N),w[0]=m,w[1]=x,w[2]=l,w[3]=N;m=Z[0];x=Z[1];if(m!==r[0]||x!==r[1])B.blendEquationSeparate(m,x),r[0]=m,r[1]=x;m=U[0];x=U[1];l=U[2];N=U[3];if(m!==n[0]||x!==n[1]||l!==n[2]||N!==n[3])B.blendFuncSeparate(m,x,l,N),n[0]=m,n[1]=x,n[2]=l,n[3]=N;m=L.depth_enable;m!==b.depth_enable&&(m?B.enable(2929):B.disable(2929),b.depth_enable=m);m=L.depth_func;m!==b.depth_func&&(B.depthFunc(m),b.depth_func=m);m=e[0];
x=e[1];if(m!==C[0]||x!==C[1])B.depthRange(m,x),C[0]=m,C[1]=x;m=L.depth_mask;m!==b.depth_mask&&(B.depthMask(m),b.depth_mask=m);m=O[0];x=O[1];l=O[2];N=O[3];if(m!==ja[0]||x!==ja[1]||l!==ja[2]||N!==ja[3])B.colorMask(m,x,l,N),ja[0]=m,ja[1]=x,ja[2]=l,ja[3]=N;m=L.cull_enable;m!==b.cull_enable&&(m?B.enable(2884):B.disable(2884),b.cull_enable=m);m=L.cull_face;m!==b.cull_face&&(B.cullFace(m),b.cull_face=m);m=L.frontFace;m!==b.frontFace&&(B.frontFace(m),b.frontFace=m);m=L.lineWidth;m!==b.lineWidth&&(B.lineWidth(m),
b.lineWidth=m);m=L.polygonOffset_enable;m!==b.polygonOffset_enable&&(m?B.enable(32823):B.disable(32823),b.polygonOffset_enable=m);m=V[0];x=V[1];if(m!==f[0]||x!==f[1])B.polygonOffset(m,x),f[0]=m,f[1]=x;m=L.sample_alpha;m!==b.sample_alpha&&(m?B.enable(32926):B.disable(32926),b.sample_alpha=m);m=L.sample_enable;m!==b.sample_enable&&(m?B.enable(32928):B.disable(32928),b.sample_enable=m);m=ba[0];x=ba[1];if(m!==h[0]||x!==h[1])B.sampleCoverage(m,x),h[0]=m,h[1]=x;m=L.stencil_enable;m!==b.stencil_enable&&
(m?B.enable(2960):B.disable(2960),b.stencil_enable=m);m=L.stencil_mask;m!==b.stencil_mask&&(B.stencilMask(m),b.stencil_mask=m);m=E[0];x=E[1];l=E[2];if(m!==D[0]||x!==D[1]||l!==D[2])B.stencilFunc(m,x,l),D[0]=m,D[1]=x,D[2]=l;m=a[0];x=a[1];l=a[2];N=a[3];if(m!==xa[0]||x!==xa[1]||l!==xa[2]||N!==xa[3])B.stencilOpSeparate(m,x,l,N),xa[0]=m,xa[1]=x,xa[2]=l,xa[3]=N;m=c[0];x=c[1];l=c[2];N=c[3];if(m!==t[0]||x!==t[1]||l!==t[2]||N!==t[3])B.stencilOpSeparate(m,x,l,N),t[0]=m,t[1]=x,t[2]=l,t[3]=N;m=L.scissor_enable;
m!==b.scissor_enable&&(m?B.enable(3089):B.disable(3089),b.scissor_enable=m);m=z[0];x=z[1];l=z[2];N=z[3];if(m!==ca[0]||x!==ca[1]||l!==ca[2]||N!==ca[3])B.scissor(m,x,l,N),ca[0]=m,ca[1]=x,ca[2]=l,ca[3]=N;m=y[0];x=y[1];l=y[2];N=y[3];if(m!==na[0]||x!==na[1]||l!==na[2]||N!==na[3])B.viewport(m,x,l,N),na[0]=m,na[1]=x,na[2]=l,na[3]=N;b.dirty=!1}if(m=b.profile)d=performance.now(),M.count++;x=W.program(W.vert,W.frag,I);B.useProgram(x.program);u.setVAO(null);l=x.id;(N=X[l])||(N=X[l]=g(x));N.call(this,k);u.setVAO(null);
m&&(M.cpuTime+=performance.now()-d)},scope:function(a,c,e){var f,k;if(f=b.profile)k=performance.now(),M.count++;c(m,a,e);f&&(M.cpuTime+=performance.now()-k)},batch:function(m,d){var g,x,l,N,Q;g=G.next;g!==G.cur&&(g?B.bindFramebuffer(36160,g.framebuffer):B.bindFramebuffer(36160,null),G.cur=g);if(b.dirty){g=L.dither;g!==b.dither&&(g?B.enable(3024):B.disable(3024),b.dither=g);g=L.blend_enable;g!==b.blend_enable&&(g?B.enable(3042):B.disable(3042),b.blend_enable=g);g=A[0];l=A[1];N=A[2];Q=A[3];if(g!==w[0]||
l!==w[1]||N!==w[2]||Q!==w[3])B.blendColor(g,l,N,Q),w[0]=g,w[1]=l,w[2]=N,w[3]=Q;g=Z[0];l=Z[1];if(g!==r[0]||l!==r[1])B.blendEquationSeparate(g,l),r[0]=g,r[1]=l;g=U[0];l=U[1];N=U[2];Q=U[3];if(g!==n[0]||l!==n[1]||N!==n[2]||Q!==n[3])B.blendFuncSeparate(g,l,N,Q),n[0]=g,n[1]=l,n[2]=N,n[3]=Q;g=L.depth_enable;g!==b.depth_enable&&(g?B.enable(2929):B.disable(2929),b.depth_enable=g);g=L.depth_func;g!==b.depth_func&&(B.depthFunc(g),b.depth_func=g);g=e[0];l=e[1];if(g!==C[0]||l!==C[1])B.depthRange(g,l),C[0]=g,C[1]=
l;g=L.depth_mask;g!==b.depth_mask&&(B.depthMask(g),b.depth_mask=g);g=O[0];l=O[1];N=O[2];Q=O[3];if(g!==ja[0]||l!==ja[1]||N!==ja[2]||Q!==ja[3])B.colorMask(g,l,N,Q),ja[0]=g,ja[1]=l,ja[2]=N,ja[3]=Q;g=L.cull_enable;g!==b.cull_enable&&(g?B.enable(2884):B.disable(2884),b.cull_enable=g);g=L.cull_face;g!==b.cull_face&&(B.cullFace(g),b.cull_face=g);g=L.frontFace;g!==b.frontFace&&(B.frontFace(g),b.frontFace=g);g=L.lineWidth;g!==b.lineWidth&&(B.lineWidth(g),b.lineWidth=g);g=L.polygonOffset_enable;g!==b.polygonOffset_enable&&
(g?B.enable(32823):B.disable(32823),b.polygonOffset_enable=g);g=V[0];l=V[1];if(g!==f[0]||l!==f[1])B.polygonOffset(g,l),f[0]=g,f[1]=l;g=L.sample_alpha;g!==b.sample_alpha&&(g?B.enable(32926):B.disable(32926),b.sample_alpha=g);g=L.sample_enable;g!==b.sample_enable&&(g?B.enable(32928):B.disable(32928),b.sample_enable=g);g=ba[0];l=ba[1];if(g!==h[0]||l!==h[1])B.sampleCoverage(g,l),h[0]=g,h[1]=l;g=L.stencil_enable;g!==b.stencil_enable&&(g?B.enable(2960):B.disable(2960),b.stencil_enable=g);g=L.stencil_mask;
g!==b.stencil_mask&&(B.stencilMask(g),b.stencil_mask=g);g=E[0];l=E[1];N=E[2];if(g!==D[0]||l!==D[1]||N!==D[2])B.stencilFunc(g,l,N),D[0]=g,D[1]=l,D[2]=N;g=a[0];l=a[1];N=a[2];Q=a[3];if(g!==xa[0]||l!==xa[1]||N!==xa[2]||Q!==xa[3])B.stencilOpSeparate(g,l,N,Q),xa[0]=g,xa[1]=l,xa[2]=N,xa[3]=Q;g=c[0];l=c[1];N=c[2];Q=c[3];if(g!==t[0]||l!==t[1]||N!==t[2]||Q!==t[3])B.stencilOpSeparate(g,l,N,Q),t[0]=g,t[1]=l,t[2]=N,t[3]=Q;g=L.scissor_enable;g!==b.scissor_enable&&(g?B.enable(3089):B.disable(3089),b.scissor_enable=
g);g=z[0];l=z[1];N=z[2];Q=z[3];if(g!==ca[0]||l!==ca[1]||N!==ca[2]||Q!==ca[3])B.scissor(g,l,N,Q),ca[0]=g,ca[1]=l,ca[2]=N,ca[3]=Q;g=y[0];l=y[1];N=y[2];Q=y[3];if(g!==na[0]||l!==na[1]||N!==na[2]||Q!==na[3])B.viewport(g,l,N,Q),na[0]=g,na[1]=l,na[2]=N,na[3]=Q;b.dirty=!1}if(g=b.profile)x=performance.now(),M.count+=d;l=W.program(W.vert,W.frag,I);B.useProgram(l.program);u.setVAO(null);N=l.id;(Q=Y[N])||(Q=Y[N]=k(l));Q.call(this,m,d);u.setVAO(null);g&&(M.cpuTime+=performance.now()-x)}}},"$26,color,freq,phase,projection,time,view":function(d,
K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t){var a,xa,y,na,X,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,ia,Hb,ha;a=d.attributes;xa=d.context;y=d.current;na=d.draw;X=d.elements;Y=d.framebuffer;fa=d.gl;P=d.isArrayLike;T=d.next;x=d.shader;l=d.uniforms;N=d.vao;Q=T.blend_color;za=y.blend_color;oa=T.blend_equation;q=y.blend_equation;J=T.blend_func;da=y.blend_func;S=T.colorMask;ma=y.colorMask;ra=T.depth_range;Ca=y.depth_range;wa=T.polygonOffset_offset;
ga=y.polygonOffset_offset;Da=T.sample_coverage;ka=y.sample_coverage;qa=T.scissor_box;Aa=y.scissor_box;Ma=T.stencil_func;F=y.stencil_func;eb=T.stencil_opBack;Ua=y.stencil_opBack;v=T.stencil_opFront;p=y.stencil_opFront;R=T.viewport;ta=y.viewport;va=new Float32Array(16);ia=new Float32Array(16);Hb=new Float32Array(16);ha=new Float32Array(16);return{draw:function(e){var f,l,h,d;f=Y.next;f!==Y.cur&&(f?fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),Y.cur=f);if(y.dirty){var n;f=T.dither;
f!==y.dither&&(f?fa.enable(3024):fa.disable(3024),y.dither=f);f=T.blend_enable;f!==y.blend_enable&&(f?fa.enable(3042):fa.disable(3042),y.blend_enable=f);f=Q[0];h=Q[1];d=Q[2];n=Q[3];if(f!==za[0]||h!==za[1]||d!==za[2]||n!==za[3])fa.blendColor(f,h,d,n),za[0]=f,za[1]=h,za[2]=d,za[3]=n;f=oa[0];h=oa[1];if(f!==q[0]||h!==q[1])fa.blendEquationSeparate(f,h),q[0]=f,q[1]=h;f=J[0];h=J[1];d=J[2];n=J[3];if(f!==da[0]||h!==da[1]||d!==da[2]||n!==da[3])fa.blendFuncSeparate(f,h,d,n),da[0]=f,da[1]=h,da[2]=d,da[3]=n;f=
T.depth_enable;f!==y.depth_enable&&(f?fa.enable(2929):fa.disable(2929),y.depth_enable=f);f=T.depth_func;f!==y.depth_func&&(fa.depthFunc(f),y.depth_func=f);f=ra[0];h=ra[1];if(f!==Ca[0]||h!==Ca[1])fa.depthRange(f,h),Ca[0]=f,Ca[1]=h;f=T.depth_mask;f!==y.depth_mask&&(fa.depthMask(f),y.depth_mask=f);f=S[0];h=S[1];d=S[2];n=S[3];if(f!==ma[0]||h!==ma[1]||d!==ma[2]||n!==ma[3])fa.colorMask(f,h,d,n),ma[0]=f,ma[1]=h,ma[2]=d,ma[3]=n;f=T.cull_enable;f!==y.cull_enable&&(f?fa.enable(2884):fa.disable(2884),y.cull_enable=
f);f=T.cull_face;f!==y.cull_face&&(fa.cullFace(f),y.cull_face=f);f=T.frontFace;f!==y.frontFace&&(fa.frontFace(f),y.frontFace=f);f=T.lineWidth;f!==y.lineWidth&&(fa.lineWidth(f),y.lineWidth=f);f=T.polygonOffset_enable;f!==y.polygonOffset_enable&&(f?fa.enable(32823):fa.disable(32823),y.polygonOffset_enable=f);f=wa[0];h=wa[1];if(f!==ga[0]||h!==ga[1])fa.polygonOffset(f,h),ga[0]=f,ga[1]=h;f=T.sample_alpha;f!==y.sample_alpha&&(f?fa.enable(32926):fa.disable(32926),y.sample_alpha=f);f=T.sample_enable;f!==
y.sample_enable&&(f?fa.enable(32928):fa.disable(32928),y.sample_enable=f);f=Da[0];h=Da[1];if(f!==ka[0]||h!==ka[1])fa.sampleCoverage(f,h),ka[0]=f,ka[1]=h;f=T.stencil_enable;f!==y.stencil_enable&&(f?fa.enable(2960):fa.disable(2960),y.stencil_enable=f);f=T.stencil_mask;f!==y.stencil_mask&&(fa.stencilMask(f),y.stencil_mask=f);f=Ma[0];h=Ma[1];d=Ma[2];if(f!==F[0]||h!==F[1]||d!==F[2])fa.stencilFunc(f,h,d),F[0]=f,F[1]=h,F[2]=d;f=v[0];h=v[1];d=v[2];n=v[3];if(f!==p[0]||h!==p[1]||d!==p[2]||n!==p[3])fa.stencilOpSeparate(f,
h,d,n),p[0]=f,p[1]=h,p[2]=d,p[3]=n;f=eb[0];h=eb[1];d=eb[2];n=eb[3];if(f!==Ua[0]||h!==Ua[1]||d!==Ua[2]||n!==Ua[3])fa.stencilOpSeparate(f,h,d,n),Ua[0]=f,Ua[1]=h,Ua[2]=d,Ua[3]=n;f=T.scissor_enable;f!==y.scissor_enable&&(f?fa.enable(3089):fa.disable(3089),y.scissor_enable=f);f=qa[0];h=qa[1];d=qa[2];n=qa[3];if(f!==Aa[0]||h!==Aa[1]||d!==Aa[2]||n!==Aa[3])fa.scissor(f,h,d,n),Aa[0]=f,Aa[1]=h,Aa[2]=d,Aa[3]=n;f=R[0];h=R[1];d=R[2];n=R[3];if(f!==ta[0]||h!==ta[1]||d!==ta[2]||n!==ta[3])fa.viewport(f,h,d,n),ta[0]=
f,ta[1]=h,ta[2]=d,ta[3]=n;y.dirty=!1}if(f=y.profile)l=performance.now(),M.count++;fa.useProgram(g.program);N.setVAO(null);h=ca.location;d=a[h];d.buffer||fa.enableVertexAttribArray(h);if(5126!==d.type||4!==d.size||d.buffer!==k||!1!==d.normalized||0!==d.offset||44!==d.stride)fa.bindBuffer(34962,k.buffer),fa.vertexAttribPointer(h,4,5126,!1,44,0),d.type=5126,d.size=4,d.buffer=k,d.normalized=!1,d.offset=0,d.stride=44;h=E.location;d=a[h];d.buffer||fa.enableVertexAttribArray(h);if(5126!==d.type||4!==d.size||
d.buffer!==m||!1!==d.normalized||16!==d.offset||44!==d.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(h,4,5126,!1,44,16),d.type=5126,d.size=4,d.buffer=m,d.normalized=!1,d.offset=16,d.stride=44;h=z.location;d=a[h];d.buffer||fa.enableVertexAttribArray(h);if(5126!==d.type||3!==d.size||d.buffer!==b||!1!==d.normalized||32!==d.offset||44!==d.stride)fa.bindBuffer(34962,b.buffer),fa.vertexAttribPointer(h,3,5126,!1,44,32),d.type=5126,d.size=3,d.buffer=b,d.normalized=!1,d.offset=32,d.stride=44;
h=G.call(this,xa,e,0);"number"!==typeof h&&K.commandRaise(B,I);fa.uniform1f(c.location,h);h=L.call(this,xa,e,0);P(h)&&16===h.length||K.commandRaise(W,I);fa.uniformMatrix4fv(t.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(va[0]=h[0],va[1]=h[1],va[2]=h[2],va[3]=h[3],va[4]=h[4],va[5]=h[5],va[6]=h[6],va[7]=h[7],va[8]=h[8],va[9]=h[9],va[10]=h[10],va[11]=h[11],va[12]=h[12],va[13]=h[13],va[14]=h[14],va[15]=h[15],va));e=u.call(this,xa,e,0);P(e)&&16===e.length||K.commandRaise(A,I);fa.uniformMatrix4fv(D.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(ia[0]=e[0],ia[1]=e[1],ia[2]=e[2],ia[3]=e[3],ia[4]=e[4],ia[5]=e[5],ia[6]=e[6],ia[7]=e[7],ia[8]=e[8],ia[9]=e[9],ia[10]=e[10],ia[11]=e[11],ia[12]=e[12],ia[13]=e[13],ia[14]=e[14],ia[15]=e[15],ia));(e=na.elements)?fa.bindBuffer(34963,e.buffer.buffer):N.currentVAO&&(e=X.getElements(N.currentVAO.elements))&&fa.bindBuffer(34963,e.buffer.buffer);h=na.offset;e?fa.drawElements(0,1E4,e.type,h<<(e.type-5121>>1)):fa.drawArrays(0,h,1E4);N.setVAO(null);f&&(M.cpuTime+=
performance.now()-l)},scope:function(a,c,e){var f,h,v,q,p,g,d,F,t,R,C,z,D,J,E,S,ga,ha,eb,u,A,Ma,I,B,N,P,da,G,ta,Q,T,K,wa,L,ra,W,V,ka,Y,ba,za,Ua,fa,ca,ja;if(f=y.profile)h=performance.now(),M.count++;v=na.count;na.count=1E4;q=na.primitive;na.primitive=0;p=w.call(this,xa,a,e);g=l[5];l[5]=p;d=Z.call(this,xa,a,e);p=l[3];l[3]=d;F=r.call(this,xa,a,e);d=l[4];l[4]=F;F=U.buffer;U.buffer=b;t=U.divisor;U.divisor=0;R=U.normalized;U.normalized=!1;C=U.offset;U.offset=32;z=U.size;U.size=0;D=U.state;U.state=1;J=U.stride;
U.stride=44;E=U.type;U.type=5126;S=U.w;U.w=0;ga=U.x;U.x=0;ha=U.y;U.y=0;eb=U.z;U.z=0;u=n.buffer;n.buffer=k;A=n.divisor;n.divisor=0;Ma=n.normalized;n.normalized=!1;I=n.offset;n.offset=0;B=n.size;n.size=0;N=n.state;n.state=1;P=n.stride;n.stride=44;da=n.type;n.type=5126;G=n.w;n.w=0;ta=n.x;n.x=0;Q=n.y;n.y=0;T=n.z;n.z=0;K=O.buffer;O.buffer=m;wa=O.divisor;O.divisor=0;L=O.normalized;O.normalized=!1;ra=O.offset;O.offset=16;W=O.size;O.size=0;V=O.state;O.state=1;ka=O.stride;O.stride=44;Y=O.type;O.type=5126;
ba=O.w;O.w=0;za=O.x;O.x=0;Ua=O.y;O.y=0;fa=O.z;O.z=0;ca=x.vert;x.vert=2;ja=x.frag;x.frag=1;c(xa,a,e);f&&(M.cpuTime+=performance.now()-h);na.count=v;na.primitive=q;l[5]=g;l[3]=p;l[4]=d;U.buffer=F;U.divisor=t;U.normalized=R;U.offset=C;U.size=z;U.state=D;U.stride=J;U.type=E;U.w=S;U.x=ga;U.y=ha;U.z=eb;n.buffer=u;n.divisor=A;n.normalized=Ma;n.offset=I;n.size=B;n.state=N;n.stride=P;n.type=da;n.w=G;n.x=ta;n.y=Q;n.z=T;O.buffer=K;O.divisor=wa;O.normalized=L;O.offset=ra;O.size=W;O.state=V;O.stride=ka;O.type=
Y;O.w=ba;O.x=za;O.y=Ua;O.z=fa;x.vert=ca;x.frag=ja},batch:function(l,g){var d,n,r;d=Y.next;d!==Y.cur&&(d?fa.bindFramebuffer(36160,d.framebuffer):fa.bindFramebuffer(36160,null),Y.cur=d);if(y.dirty){var x,u,A;d=T.dither;d!==y.dither&&(d?fa.enable(3024):fa.disable(3024),y.dither=d);d=T.blend_enable;d!==y.blend_enable&&(d?fa.enable(3042):fa.disable(3042),y.blend_enable=d);d=Q[0];x=Q[1];u=Q[2];A=Q[3];if(d!==za[0]||x!==za[1]||u!==za[2]||A!==za[3])fa.blendColor(d,x,u,A),za[0]=d,za[1]=x,za[2]=u,za[3]=A;d=
oa[0];x=oa[1];if(d!==q[0]||x!==q[1])fa.blendEquationSeparate(d,x),q[0]=d,q[1]=x;d=J[0];x=J[1];u=J[2];A=J[3];if(d!==da[0]||x!==da[1]||u!==da[2]||A!==da[3])fa.blendFuncSeparate(d,x,u,A),da[0]=d,da[1]=x,da[2]=u,da[3]=A;d=T.depth_enable;d!==y.depth_enable&&(d?fa.enable(2929):fa.disable(2929),y.depth_enable=d);d=T.depth_func;d!==y.depth_func&&(fa.depthFunc(d),y.depth_func=d);d=ra[0];x=ra[1];if(d!==Ca[0]||x!==Ca[1])fa.depthRange(d,x),Ca[0]=d,Ca[1]=x;d=T.depth_mask;d!==y.depth_mask&&(fa.depthMask(d),y.depth_mask=
d);d=S[0];x=S[1];u=S[2];A=S[3];if(d!==ma[0]||x!==ma[1]||u!==ma[2]||A!==ma[3])fa.colorMask(d,x,u,A),ma[0]=d,ma[1]=x,ma[2]=u,ma[3]=A;d=T.cull_enable;d!==y.cull_enable&&(d?fa.enable(2884):fa.disable(2884),y.cull_enable=d);d=T.cull_face;d!==y.cull_face&&(fa.cullFace(d),y.cull_face=d);d=T.frontFace;d!==y.frontFace&&(fa.frontFace(d),y.frontFace=d);d=T.lineWidth;d!==y.lineWidth&&(fa.lineWidth(d),y.lineWidth=d);d=T.polygonOffset_enable;d!==y.polygonOffset_enable&&(d?fa.enable(32823):fa.disable(32823),y.polygonOffset_enable=
d);d=wa[0];x=wa[1];if(d!==ga[0]||x!==ga[1])fa.polygonOffset(d,x),ga[0]=d,ga[1]=x;d=T.sample_alpha;d!==y.sample_alpha&&(d?fa.enable(32926):fa.disable(32926),y.sample_alpha=d);d=T.sample_enable;d!==y.sample_enable&&(d?fa.enable(32928):fa.disable(32928),y.sample_enable=d);d=Da[0];x=Da[1];if(d!==ka[0]||x!==ka[1])fa.sampleCoverage(d,x),ka[0]=d,ka[1]=x;d=T.stencil_enable;d!==y.stencil_enable&&(d?fa.enable(2960):fa.disable(2960),y.stencil_enable=d);d=T.stencil_mask;d!==y.stencil_mask&&(fa.stencilMask(d),
y.stencil_mask=d);d=Ma[0];x=Ma[1];u=Ma[2];if(d!==F[0]||x!==F[1]||u!==F[2])fa.stencilFunc(d,x,u),F[0]=d,F[1]=x,F[2]=u;d=v[0];x=v[1];u=v[2];A=v[3];if(d!==p[0]||x!==p[1]||u!==p[2]||A!==p[3])fa.stencilOpSeparate(d,x,u,A),p[0]=d,p[1]=x,p[2]=u,p[3]=A;d=eb[0];x=eb[1];u=eb[2];A=eb[3];if(d!==Ua[0]||x!==Ua[1]||u!==Ua[2]||A!==Ua[3])fa.stencilOpSeparate(d,x,u,A),Ua[0]=d,Ua[1]=x,Ua[2]=u,Ua[3]=A;d=T.scissor_enable;d!==y.scissor_enable&&(d?fa.enable(3089):fa.disable(3089),y.scissor_enable=d);d=qa[0];x=qa[1];u=qa[2];
A=qa[3];if(d!==Aa[0]||x!==Aa[1]||u!==Aa[2]||A!==Aa[3])fa.scissor(d,x,u,A),Aa[0]=d,Aa[1]=x,Aa[2]=u,Aa[3]=A;d=R[0];x=R[1];u=R[2];A=R[3];if(d!==ta[0]||x!==ta[1]||u!==ta[2]||A!==ta[3])fa.viewport(d,x,u,A),ta[0]=d,ta[1]=x,ta[2]=u,ta[3]=A;y.dirty=!1}if(d=y.profile)n=performance.now(),M.count+=g;fa.useProgram(ja.program);N.setVAO(null);x=ca.location;u=a[x];u.buffer||fa.enableVertexAttribArray(x);if(5126!==u.type||4!==u.size||u.buffer!==k||!1!==u.normalized||0!==u.offset||44!==u.stride)fa.bindBuffer(34962,
k.buffer),fa.vertexAttribPointer(x,4,5126,!1,44,0),u.type=5126,u.size=4,u.buffer=k,u.normalized=!1,u.offset=0,u.stride=44;x=E.location;u=a[x];u.buffer||fa.enableVertexAttribArray(x);if(5126!==u.type||4!==u.size||u.buffer!==m||!1!==u.normalized||16!==u.offset||44!==u.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(x,4,5126,!1,44,16),u.type=5126,u.size=4,u.buffer=m,u.normalized=!1,u.offset=16,u.stride=44;x=z.location;u=a[x];u.buffer||fa.enableVertexAttribArray(x);if(5126!==u.type||3!==u.size||
u.buffer!==b||!1!==u.normalized||32!==u.offset||44!==u.stride)fa.bindBuffer(34962,b.buffer),fa.vertexAttribPointer(x,3,5126,!1,44,32),u.type=5126,u.size=3,u.buffer=b,u.normalized=!1,u.offset=32,u.stride=44;x=e.call(this,xa,void 0,r);"number"!==typeof x&&K.commandRaise(C,I);fa.uniform1f(c.location,x);x=V.call(this,xa,void 0,r);P(x)&&16===x.length||K.commandRaise(f,I);fa.uniformMatrix4fv(t.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Hb[0]=x[0],Hb[1]=x[1],Hb[2]=x[2],Hb[3]=x[3],Hb[4]=x[4],
Hb[5]=x[5],Hb[6]=x[6],Hb[7]=x[7],Hb[8]=x[8],Hb[9]=x[9],Hb[10]=x[10],Hb[11]=x[11],Hb[12]=x[12],Hb[13]=x[13],Hb[14]=x[14],Hb[15]=x[15],Hb));r=ba.call(this,xa,void 0,r);P(r)&&16===r.length||K.commandRaise(h,I);fa.uniformMatrix4fv(D.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(ha[0]=r[0],ha[1]=r[1],ha[2]=r[2],ha[3]=r[3],ha[4]=r[4],ha[5]=r[5],ha[6]=r[6],ha[7]=r[7],ha[8]=r[8],ha[9]=r[9],ha[10]=r[10],ha[11]=r[11],ha[12]=r[12],ha[13]=r[13],ha[14]=r[14],ha[15]=r[15],ha));(x=na.elements)?fa.bindBuffer(34963,
x.buffer.buffer):N.currentVAO&&(x=X.getElements(N.currentVAO.elements))&&fa.bindBuffer(34963,x.buffer.buffer);u=na.offset;for(r=0;r<g;++r)x?fa.drawElements(0,1E4,x.type,u<<(x.type-5121>>1)):fa.drawArrays(0,u,1E4);N.setVAO(null);d&&(M.cpuTime+=performance.now()-n)}}},"$34,atlas,normal,position,projection,uv,view":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,X,Y,fa,P){var T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,ia,Hb,ha,H,
sa,Ea,pa,ya,Ja,la,aa,ua,Ia,Ba;T=d.attributes;x=d.buffer;l=d.context;N=d.current;Q=d.draw;za=d.elements;oa=d.framebuffer;q=d.gl;J=d.isArrayLike;da=d.isBufferArgs;S=d.next;ma=d.shader;ra=d.uniforms;Ca=d.vao;wa=S.blend_color;ga=N.blend_color;Da=S.blend_equation;ka=N.blend_equation;qa=S.blend_func;Aa=N.blend_func;Ma=S.colorMask;F=N.colorMask;eb=S.depth_range;Ua=N.depth_range;v=S.polygonOffset_offset;p=N.polygonOffset_offset;R=S.sample_coverage;ta=N.sample_coverage;va=S.scissor_box;ia=N.scissor_box;Hb=
S.stencil_func;ha=N.stencil_func;H=S.stencil_opBack;sa=N.stencil_opBack;Ea=S.stencil_opFront;pa=N.stencil_opFront;ya=S.viewport;Ja=N.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa=new Float32Array(16);ua=new Float32Array(16);Ia=new Float32Array(16);Ba=new Float32Array(16);return{draw:function(a){var c,e,f,h,d,t,n,r,C,z,D,E,O,Q,ra,U,V,Z,ba,ca,ja,ma,xa,Ba,Ia,Fa,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,
pc,mc,ec,$a,Fc,yb,cb,Nb,ab,ob;c=l.view;e=g.call(this,l,a,0);l.view=e;f=oa.next;f!==oa.cur&&(f?q.bindFramebuffer(36160,f.framebuffer):q.bindFramebuffer(36160,null),oa.cur=f);if(N.dirty){var Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb;Va=S.dither;Va!==N.dither&&(Va?q.enable(3024):q.disable(3024),N.dither=Va);vd=S.blend_enable;vd!==N.blend_enable&&(vd?q.enable(3042):q.disable(3042),N.blend_enable=
vd);Ib=wa[0];Jb=wa[1];qc=wa[2];Ob=wa[3];if(Ib!==ga[0]||Jb!==ga[1]||qc!==ga[2]||Ob!==ga[3])q.blendColor(Ib,Jb,qc,Ob),ga[0]=Ib,ga[1]=Jb,ga[2]=qc,ga[3]=Ob;jb=Da[0];Gb=Da[1];if(jb!==ka[0]||Gb!==ka[1])q.blendEquationSeparate(jb,Gb),ka[0]=jb,ka[1]=Gb;Db=qa[0];wb=qa[1];hb=qa[2];Yb=qa[3];if(Db!==Aa[0]||wb!==Aa[1]||hb!==Aa[2]||Yb!==Aa[3])q.blendFuncSeparate(Db,wb,hb,Yb),Aa[0]=Db,Aa[1]=wb,Aa[2]=hb,Aa[3]=Yb;Pb=S.depth_enable;Pb!==N.depth_enable&&(Pb?q.enable(2929):q.disable(2929),N.depth_enable=Pb);qb=S.depth_func;
qb!==N.depth_func&&(q.depthFunc(qb),N.depth_func=qb);Sa=eb[0];Ub=eb[1];if(Sa!==Ua[0]||Ub!==Ua[1])q.depthRange(Sa,Ub),Ua[0]=Sa,Ua[1]=Ub;zb=S.depth_mask;zb!==N.depth_mask&&(q.depthMask(zb),N.depth_mask=zb);ic=Ma[0];ib=Ma[1];pb=Ma[2];Ha=Ma[3];if(ic!==F[0]||ib!==F[1]||pb!==F[2]||Ha!==F[3])q.colorMask(ic,ib,pb,Ha),F[0]=ic,F[1]=ib,F[2]=pb,F[3]=Ha;rb=S.frontFace;rb!==N.frontFace&&(q.frontFace(rb),N.frontFace=rb);Ka=S.lineWidth;Ka!==N.lineWidth&&(q.lineWidth(Ka),N.lineWidth=Ka);fb=S.polygonOffset_enable;
fb!==N.polygonOffset_enable&&(fb?q.enable(32823):q.disable(32823),N.polygonOffset_enable=fb);gb=v[0];La=v[1];if(gb!==p[0]||La!==p[1])q.polygonOffset(gb,La),p[0]=gb,p[1]=La;kb=S.sample_alpha;kb!==N.sample_alpha&&(kb?q.enable(32926):q.disable(32926),N.sample_alpha=kb);Wa=S.sample_enable;Wa!==N.sample_enable&&(Wa?q.enable(32928):q.disable(32928),N.sample_enable=Wa);tb=R[0];sb=R[1];if(tb!==ta[0]||sb!==ta[1])q.sampleCoverage(tb,sb),ta[0]=tb,ta[1]=sb;Pa=S.stencil_enable;Pa!==N.stencil_enable&&(Pa?q.enable(2960):
q.disable(2960),N.stencil_enable=Pa);Bc=S.stencil_mask;Bc!==N.stencil_mask&&(q.stencilMask(Bc),N.stencil_mask=Bc);Ra=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Ra!==ha[0]||Kb!==ha[1]||Eb!==ha[2])q.stencilFunc(Ra,Kb,Eb),ha[0]=Ra,ha[1]=Kb,ha[2]=Eb;Na=Ea[0];yd=Ea[1];Ya=Ea[2];Lb=Ea[3];if(Na!==pa[0]||yd!==pa[1]||Ya!==pa[2]||Lb!==pa[3])q.stencilOpSeparate(Na,yd,Ya,Lb),pa[0]=Na,pa[1]=yd,pa[2]=Ya,pa[3]=Lb;Mb=H[0];lb=H[1];Oa=H[2];Zb=H[3];if(Mb!==sa[0]||lb!==sa[1]||Oa!==sa[2]||Zb!==sa[3])q.stencilOpSeparate(Mb,lb,Oa,Zb),sa[0]=
Mb,sa[1]=lb,sa[2]=Oa,sa[3]=Zb;Qa=S.scissor_enable;Qa!==N.scissor_enable&&(Qa?q.enable(3089):q.disable(3089),N.scissor_enable=Qa);ub=va[0];vb=va[1];Ta=va[2];nb=va[3];if(ub!==ia[0]||vb!==ia[1]||Ta!==ia[2]||nb!==ia[3])q.scissor(ub,vb,Ta,nb),ia[0]=ub,ia[1]=vb,ia[2]=Ta,ia[3]=nb;fc=ya[0];zc=ya[1];uc=ya[2];bb=ya[3];if(fc!==Ja[0]||zc!==Ja[1]||uc!==Ja[2]||bb!==Ja[3])q.viewport(fc,zc,uc,bb),Ja[0]=fc,Ja[1]=zc,Ja[2]=uc,Ja[3]=bb}q.enable(2884);N.cull_enable=!0;q.cullFace(1029);N.cull_face=1029;if(h=N.profile)d=
performance.now(),M.count++;q.useProgram(k.program);Ca.setVAO(null);(t=a.position)&&("object"===typeof t||"function"===typeof t)&&(da(t)||x.getBuffer(t)||x.getBuffer(t.buffer)||da(t.buffer)||"constant"in t&&("number"===typeof t.constant||J(t.constant)))||K.commandRaise(m,I);n=!1;r=null;C=!1;D=z=0;E=1;O=0;Q=5126;Z=V=U=ra=0;da(t)?(n=!0,r=x.createStream(34962,t),Q=r.dtype):(r=x.getBuffer(t))?Q=r.dtype:"constant"in t?(E=2,"number"===typeof t.constant?(U=t.constant,V=Z=ra=0):(U=0<t.constant.length?t.constant[0]:
0,V=1<t.constant.length?t.constant[1]:0,Z=2<t.constant.length?t.constant[2]:0,ra=3<t.constant.length?t.constant[3]:0)):(r=da(t.buffer)?x.createStream(34962,t.buffer):x.getBuffer(t.buffer),Q="type"in t?la[t.type]:r.dtype,C=!!t.normalized,D=t.size|0,z=t.offset|0,O=t.stride|0);ba=X.location;ca=T[ba];if(1===E){if(ca.buffer||q.enableVertexAttribArray(ba),ja=D||3,ca.type!==Q||ca.size!==ja||ca.buffer!==r||ca.normalized!==C||ca.offset!==z||ca.stride!==O)q.bindBuffer(34962,r.buffer),q.vertexAttribPointer(ba,
ja,Q,C,O,z),ca.type=Q,ca.size=ja,ca.buffer=r,ca.normalized=C,ca.offset=z,ca.stride=O}else if(ca.buffer&&(q.disableVertexAttribArray(ba),ca.buffer=null),ca.x!==U||ca.y!==V||ca.z!==Z||ca.w!==ra)q.vertexAttrib4f(ba,U,V,Z,ra),ca.x=U,ca.y=V,ca.z=Z,ca.w=ra;(ma=a.normal)&&("object"===typeof ma||"function"===typeof ma)&&(da(ma)||x.getBuffer(ma)||x.getBuffer(ma.buffer)||da(ma.buffer)||"constant"in ma&&("number"===typeof ma.constant||J(ma.constant)))||K.commandRaise(b,I);xa=!1;Ba=null;Ia=!1;Bd=Fa=0;$d=1;ld=
0;$c=5126;Gc=nd=Lc=rd=0;da(ma)?(xa=!0,Ba=x.createStream(34962,ma),$c=Ba.dtype):(Ba=x.getBuffer(ma))?$c=Ba.dtype:"constant"in ma?($d=2,"number"===typeof ma.constant?(Lc=ma.constant,nd=Gc=rd=0):(Lc=0<ma.constant.length?ma.constant[0]:0,nd=1<ma.constant.length?ma.constant[1]:0,Gc=2<ma.constant.length?ma.constant[2]:0,rd=3<ma.constant.length?ma.constant[3]:0)):(Ba=da(ma.buffer)?x.createStream(34962,ma.buffer):x.getBuffer(ma.buffer),$c="type"in ma?la[ma.type]:Ba.dtype,Ia=!!ma.normalized,Bd=ma.size|0,Fa=
ma.offset|0,ld=ma.stride|0);dd=na.location;Pc=T[dd];if(1===$d){if(Pc.buffer||q.enableVertexAttribArray(dd),kd=Bd||3,Pc.type!==$c||Pc.size!==kd||Pc.buffer!==Ba||Pc.normalized!==Ia||Pc.offset!==Fa||Pc.stride!==ld)q.bindBuffer(34962,Ba.buffer),q.vertexAttribPointer(dd,kd,$c,Ia,ld,Fa),Pc.type=$c,Pc.size=kd,Pc.buffer=Ba,Pc.normalized=Ia,Pc.offset=Fa,Pc.stride=ld}else if(Pc.buffer&&(q.disableVertexAttribArray(dd),Pc.buffer=null),Pc.x!==Lc||Pc.y!==nd||Pc.z!==Gc||Pc.w!==rd)q.vertexAttrib4f(dd,Lc,nd,Gc,rd),
Pc.x=Lc,Pc.y=nd,Pc.z=Gc,Pc.w=rd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(da(Bb)||x.getBuffer(Bb)||x.getBuffer(Bb.buffer)||da(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||J(Bb.constant)))||K.commandRaise(G,I);Fb=!1;tc=null;xb=!1;Cb=wc=0;Jc=1;lc=0;Hc=5126;dc=Dc=Vc=Wc=0;da(Bb)?(Fb=!0,tc=x.createStream(34962,Bb),Hc=tc.dtype):(tc=x.getBuffer(Bb))?Hc=tc.dtype:"constant"in Bb?(Jc=2,"number"===typeof Bb.constant?(Vc=Bb.constant,Dc=dc=Wc=0):(Vc=0<Bb.constant.length?Bb.constant[0]:
0,Dc=1<Bb.constant.length?Bb.constant[1]:0,dc=2<Bb.constant.length?Bb.constant[2]:0,Wc=3<Bb.constant.length?Bb.constant[3]:0)):(tc=da(Bb.buffer)?x.createStream(34962,Bb.buffer):x.getBuffer(Bb.buffer),Hc="type"in Bb?la[Bb.type]:tc.dtype,xb=!!Bb.normalized,Cb=Bb.size|0,wc=Bb.offset|0,lc=Bb.stride|0);Ic=fa.location;oc=T[Ic];if(1===Jc){if(oc.buffer||q.enableVertexAttribArray(Ic),pc=Cb||2,oc.type!==Hc||oc.size!==pc||oc.buffer!==tc||oc.normalized!==xb||oc.offset!==wc||oc.stride!==lc)q.bindBuffer(34962,
tc.buffer),q.vertexAttribPointer(Ic,pc,Hc,xb,lc,wc),oc.type=Hc,oc.size=pc,oc.buffer=tc,oc.normalized=xb,oc.offset=wc,oc.stride=lc}else if(oc.buffer&&(q.disableVertexAttribArray(Ic),oc.buffer=null),oc.x!==Vc||oc.y!==Dc||oc.z!==dc||oc.w!==Wc)q.vertexAttrib4f(Ic,Vc,Dc,dc,Wc),oc.x=Vc,oc.y=Dc,oc.z=dc,oc.w=Wc;mc=B.call(this,l,a,0);J(mc)&&16===mc.length||K.commandRaise(L,I);q.uniformMatrix4fv(Y.location,!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(aa[0]=mc[0],aa[1]=mc[1],aa[2]=mc[2],aa[3]=mc[3],
aa[4]=mc[4],aa[5]=mc[5],aa[6]=mc[6],aa[7]=mc[7],aa[8]=mc[8],aa[9]=mc[9],aa[10]=mc[10],aa[11]=mc[11],aa[12]=mc[12],aa[13]=mc[13],aa[14]=mc[14],aa[15]=mc[15],aa));ec=l.view;J(ec)&&16===ec.length||K.commandRaise(W,I);q.uniformMatrix4fv(P.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(ua[0]=ec[0],ua[1]=ec[1],ua[2]=ec[2],ua[3]=ec[3],ua[4]=ec[4],ua[5]=ec[5],ua[6]=ec[6],ua[7]=ec[7],ua[8]=ec[8],ua[9]=ec[9],ua[10]=ec[10],ua[11]=ec[11],ua[12]=ec[12],ua[13]=ec[13],ua[14]=ec[14],ua[15]=ec[15],
ua));($a=a.atlas)&&"framebuffer"===$a._reglType&&($a=$a.color[0]);"function"===typeof $a&&"texture2d"===$a._reglType||K.commandRaise(u,I);Fc=$a._texture;q.uniform1i(y.location,Fc.bind());yb=a.elements;cb=null;(Nb=da(yb))?cb=za.createStream(yb):(cb=za.getElements(yb),yb&&!cb&&K.commandRaise(A,I));cb&&q.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;ob=cb?cb.vertCount:-1;0<=ob||K.commandRaise(w,I);ob&&(cb?q.drawElements(ab,ob,cb.type,0<<(cb.type-5121>>1)):q.drawArrays(ab,0,ob),N.dirty=!0,Ca.setVAO(null),
l.view=c,h&&(M.cpuTime+=performance.now()-d),n&&x.destroyStream(r),xa&&x.destroyStream(Ba),Fb&&x.destroyStream(tc),Fc.unbind(),Nb&&za.destroyStream(cb))},scope:function(a,c,b){var f,k,h,v,q,m,d,p,g,t,F,H,y,R,z,D,u,E,A,ga,ha,eb,Ma,B,w,sa,P,Ea,G,pa,ta,T,wa,aa,L,W,ka,Y,ba,ca,Ua,fa,ya,qa,Da,Aa,xa,va,na,oa,Ja,Ca,Hb,X,ia,ua,Ba,Cc,Ia,td,Va,Fa,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb;f=l.view;k=Z.call(this,l,a,b);l.view=k;h=S.cull_enable;
S.cull_enable=!0;v=S.cull_face;S.cull_face=1029;if(q=N.profile)m=performance.now(),M.count++;d=a.elements;p=null;(g=da(d))?p=za.createStream(d):(p=za.getElements(d),d&&!p&&K.commandRaise(r,I));t=Q.elements;Q.elements=p;F=Q.offset;Q.offset=0;H=p?p.vertCount:-1;y=Q.count;Q.count=H;R=p?p.primType:4;z=Q.primitive;Q.primitive=R;D=a.atlas;u=ra[5];ra[5]=D;E=U.call(this,l,a,b);A=ra[3];ra[3]=E;ga=l.view;ha=ra[4];ra[4]=ga;(eb=a.normal)&&("object"===typeof eb||"function"===typeof eb)&&(da(eb)||x.getBuffer(eb)||
x.getBuffer(eb.buffer)||da(eb.buffer)||"constant"in eb&&("number"===typeof eb.constant||J(eb.constant)))||K.commandRaise(n,I);Ma=!1;B=null;w=0;sa=!1;Ea=P=0;G=1;pa=0;ta=5126;L=aa=wa=T=0;da(eb)?(Ma=!0,B=x.createStream(34962,eb),ta=B.dtype):(B=x.getBuffer(eb))?ta=B.dtype:"constant"in eb?(G=2,"number"===typeof eb.constant?(wa=eb.constant,aa=L=T=0):(wa=0<eb.constant.length?eb.constant[0]:0,aa=1<eb.constant.length?eb.constant[1]:0,L=2<eb.constant.length?eb.constant[2]:0,T=3<eb.constant.length?eb.constant[3]:
0)):(B=da(eb.buffer)?x.createStream(34962,eb.buffer):x.getBuffer(eb.buffer),ta="type"in eb?la[eb.type]:B.dtype,sa=!!eb.normalized,Ea=eb.size|0,P=eb.offset|0,pa=eb.stride|0,w=eb.divisor|0);W=O.buffer;O.buffer=B;ka=O.divisor;O.divisor=w;Y=O.normalized;O.normalized=sa;ba=O.offset;O.offset=P;ca=O.size;O.size=Ea;Ua=O.state;O.state=G;fa=O.stride;O.stride=pa;ya=O.type;O.type=ta;qa=O.w;O.w=T;Da=O.x;O.x=wa;Aa=O.y;O.y=aa;xa=O.z;O.z=L;(va=a.position)&&("object"===typeof va||"function"===typeof va)&&(da(va)||
x.getBuffer(va)||x.getBuffer(va.buffer)||da(va.buffer)||"constant"in va&&("number"===typeof va.constant||J(va.constant)))||K.commandRaise(ja,I);na=!1;oa=null;Ja=0;Ca=!1;X=Hb=0;ia=1;ua=0;Ba=5126;Va=td=Ia=Cc=0;da(va)?(na=!0,oa=x.createStream(34962,va),Ba=oa.dtype):(oa=x.getBuffer(va))?Ba=oa.dtype:"constant"in va?(ia=2,"number"===typeof va.constant?(Ia=va.constant,td=Va=Cc=0):(Ia=0<va.constant.length?va.constant[0]:0,td=1<va.constant.length?va.constant[1]:0,Va=2<va.constant.length?va.constant[2]:0,Cc=
3<va.constant.length?va.constant[3]:0)):(oa=da(va.buffer)?x.createStream(34962,va.buffer):x.getBuffer(va.buffer),Ba="type"in va?la[va.type]:oa.dtype,Ca=!!va.normalized,X=va.size|0,Hb=va.offset|0,ua=va.stride|0,Ja=va.divisor|0);Fa=e.buffer;e.buffer=oa;Ib=e.divisor;e.divisor=Ja;Jb=e.normalized;e.normalized=Ca;qc=e.offset;e.offset=Hb;Ob=e.size;e.size=X;jb=e.state;e.state=ia;Gb=e.stride;e.stride=ua;Db=e.type;e.type=Ba;wb=e.w;e.w=Cc;hb=e.x;e.x=Ia;Yb=e.y;e.y=td;Pb=e.z;e.z=Va;(qb=a.uv)&&("object"===typeof qb||
"function"===typeof qb)&&(da(qb)||x.getBuffer(qb)||x.getBuffer(qb.buffer)||da(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||J(qb.constant)))||K.commandRaise(C,I);Sa=!1;Ub=null;zb=0;ic=!1;pb=ib=0;Ha=1;rb=0;Ka=5126;kb=La=gb=fb=0;da(qb)?(Sa=!0,Ub=x.createStream(34962,qb),Ka=Ub.dtype):(Ub=x.getBuffer(qb))?Ka=Ub.dtype:"constant"in qb?(Ha=2,"number"===typeof qb.constant?(gb=qb.constant,La=kb=fb=0):(gb=0<qb.constant.length?qb.constant[0]:0,La=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?
qb.constant[2]:0,fb=3<qb.constant.length?qb.constant[3]:0)):(Ub=da(qb.buffer)?x.createStream(34962,qb.buffer):x.getBuffer(qb.buffer),Ka="type"in qb?la[qb.type]:Ub.dtype,ic=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|0);Wa=V.buffer;V.buffer=Ub;tb=V.divisor;V.divisor=zb;sb=V.normalized;V.normalized=ic;Pa=V.offset;V.offset=ib;Bc=V.size;V.size=pb;Ra=V.state;V.state=Ha;Kb=V.stride;V.stride=rb;Eb=V.type;V.type=Ka;Na=V.w;V.w=fb;yd=V.x;V.x=gb;Ya=V.y;V.y=La;Lb=V.z;V.z=kb;Mb=ma.vert;
ma.vert=2;lb=ma.frag;ma.frag=1;N.dirty=!0;c(l,a,b);l.view=f;S.cull_enable=h;S.cull_face=v;q&&(M.cpuTime+=performance.now()-m);g&&za.destroyStream(p);Q.elements=t;Q.offset=F;Q.count=y;Q.primitive=z;ra[5]=u;ra[3]=A;ra[4]=ha;Ma&&x.destroyStream(B);O.buffer=W;O.divisor=ka;O.normalized=Y;O.offset=ba;O.size=ca;O.state=Ua;O.stride=fa;O.type=ya;O.w=qa;O.x=Da;O.y=Aa;O.z=xa;na&&x.destroyStream(oa);e.buffer=Fa;e.divisor=Ib;e.normalized=Jb;e.offset=qc;e.size=Ob;e.state=jb;e.stride=Gb;e.type=Db;e.w=wb;e.x=hb;
e.y=Yb;e.z=Pb;Sa&&x.destroyStream(Ub);V.buffer=Wa;V.divisor=tb;V.normalized=sb;V.offset=Pa;V.size=Bc;V.state=Ra;V.stride=Kb;V.type=Eb;V.w=Na;V.x=yd;V.y=Ya;V.z=Lb;ma.vert=Mb;ma.frag=lb;N.dirty=!0},batch:function(b,e){var k,m,d,g,n,r,C;k=l.view;m=f.call(this,l,b,0);l.view=m;d=oa.next;d!==oa.cur&&(d?q.bindFramebuffer(36160,d.framebuffer):q.bindFramebuffer(36160,null),oa.cur=d);if(N.dirty){var u,A,B,w,O,G,Q,aa,L,ra,U,V,W,Z,ma,ja,ua,Fa,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Bb,Fb,tc,xb,wc,Cb,Jc,lc,Hc,Wc,Vc,
Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,yb,cb,Nb;u=S.dither;u!==N.dither&&(u?q.enable(3024):q.disable(3024),N.dither=u);A=S.blend_enable;A!==N.blend_enable&&(A?q.enable(3042):q.disable(3042),N.blend_enable=A);B=wa[0];w=wa[1];O=wa[2];G=wa[3];if(B!==ga[0]||w!==ga[1]||O!==ga[2]||G!==ga[3])q.blendColor(B,w,O,G),ga[0]=B,ga[1]=w,ga[2]=O,ga[3]=G;Q=Da[0];aa=Da[1];if(Q!==ka[0]||aa!==ka[1])q.blendEquationSeparate(Q,aa),ka[0]=Q,ka[1]=aa;L=qa[0];ra=qa[1];U=qa[2];V=qa[3];if(L!==Aa[0]||ra!==Aa[1]||U!==Aa[2]||V!==Aa[3])q.blendFuncSeparate(L,
ra,U,V),Aa[0]=L,Aa[1]=ra,Aa[2]=U,Aa[3]=V;W=S.depth_enable;W!==N.depth_enable&&(W?q.enable(2929):q.disable(2929),N.depth_enable=W);Z=S.depth_func;Z!==N.depth_func&&(q.depthFunc(Z),N.depth_func=Z);ma=eb[0];ja=eb[1];if(ma!==Ua[0]||ja!==Ua[1])q.depthRange(ma,ja),Ua[0]=ma,Ua[1]=ja;ua=S.depth_mask;ua!==N.depth_mask&&(q.depthMask(ua),N.depth_mask=ua);Fa=Ma[0];Bd=Ma[1];$d=Ma[2];ld=Ma[3];if(Fa!==F[0]||Bd!==F[1]||$d!==F[2]||ld!==F[3])q.colorMask(Fa,Bd,$d,ld),F[0]=Fa,F[1]=Bd,F[2]=$d,F[3]=ld;$c=S.frontFace;$c!==
N.frontFace&&(q.frontFace($c),N.frontFace=$c);rd=S.lineWidth;rd!==N.lineWidth&&(q.lineWidth(rd),N.lineWidth=rd);Lc=S.polygonOffset_enable;Lc!==N.polygonOffset_enable&&(Lc?q.enable(32823):q.disable(32823),N.polygonOffset_enable=Lc);nd=v[0];Gc=v[1];if(nd!==p[0]||Gc!==p[1])q.polygonOffset(nd,Gc),p[0]=nd,p[1]=Gc;dd=S.sample_alpha;dd!==N.sample_alpha&&(dd?q.enable(32926):q.disable(32926),N.sample_alpha=dd);Pc=S.sample_enable;Pc!==N.sample_enable&&(Pc?q.enable(32928):q.disable(32928),N.sample_enable=Pc);
kd=R[0];Bb=R[1];if(kd!==ta[0]||Bb!==ta[1])q.sampleCoverage(kd,Bb),ta[0]=kd,ta[1]=Bb;Fb=S.stencil_enable;Fb!==N.stencil_enable&&(Fb?q.enable(2960):q.disable(2960),N.stencil_enable=Fb);tc=S.stencil_mask;tc!==N.stencil_mask&&(q.stencilMask(tc),N.stencil_mask=tc);xb=Hb[0];wc=Hb[1];Cb=Hb[2];if(xb!==ha[0]||wc!==ha[1]||Cb!==ha[2])q.stencilFunc(xb,wc,Cb),ha[0]=xb,ha[1]=wc,ha[2]=Cb;Jc=Ea[0];lc=Ea[1];Hc=Ea[2];Wc=Ea[3];if(Jc!==pa[0]||lc!==pa[1]||Hc!==pa[2]||Wc!==pa[3])q.stencilOpSeparate(Jc,lc,Hc,Wc),pa[0]=
Jc,pa[1]=lc,pa[2]=Hc,pa[3]=Wc;Vc=H[0];Dc=H[1];dc=H[2];Ic=H[3];if(Vc!==sa[0]||Dc!==sa[1]||dc!==sa[2]||Ic!==sa[3])q.stencilOpSeparate(Vc,Dc,dc,Ic),sa[0]=Vc,sa[1]=Dc,sa[2]=dc,sa[3]=Ic;oc=S.scissor_enable;oc!==N.scissor_enable&&(oc?q.enable(3089):q.disable(3089),N.scissor_enable=oc);pc=va[0];mc=va[1];ec=va[2];$a=va[3];if(pc!==ia[0]||mc!==ia[1]||ec!==ia[2]||$a!==ia[3])q.scissor(pc,mc,ec,$a),ia[0]=pc,ia[1]=mc,ia[2]=ec,ia[3]=$a;Fc=ya[0];yb=ya[1];cb=ya[2];Nb=ya[3];if(Fc!==Ja[0]||yb!==Ja[1]||cb!==Ja[2]||Nb!==
Ja[3])q.viewport(Fc,yb,cb,Nb),Ja[0]=Fc,Ja[1]=yb,Ja[2]=cb,Ja[3]=Nb}q.enable(2884);N.cull_enable=!0;q.cullFace(1029);N.cull_face=1029;if(g=N.profile)n=performance.now(),M.count+=e;q.useProgram(ba.program);var ab,ob;Ca.setVAO(null);ab=E.call(this,l,C,r);J(ab)&&16===ab.length||K.commandRaise(D,I);q.uniformMatrix4fv(Y.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ia[0]=ab[0],Ia[1]=ab[1],Ia[2]=ab[2],Ia[3]=ab[3],Ia[4]=ab[4],Ia[5]=ab[5],Ia[6]=ab[6],Ia[7]=ab[7],Ia[8]=ab[8],Ia[9]=ab[9],Ia[10]=
ab[10],Ia[11]=ab[11],Ia[12]=ab[12],Ia[13]=ab[13],Ia[14]=ab[14],Ia[15]=ab[15],Ia));ob=l.view;J(ob)&&16===ob.length||K.commandRaise(c,I);q.uniformMatrix4fv(P.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Ba[0]=ob[0],Ba[1]=ob[1],Ba[2]=ob[2],Ba[3]=ob[3],Ba[4]=ob[4],Ba[5]=ob[5],Ba[6]=ob[6],Ba[7]=ob[7],Ba[8]=ob[8],Ba[9]=ob[9],Ba[10]=ob[10],Ba[11]=ob[11],Ba[12]=ob[12],Ba[13]=ob[13],Ba[14]=ob[14],Ba[15]=ob[15],Ba));for(r=0;r<e;++r){C=b[r];var Va,vd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Sa,Ub,
zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Pa,Bc,Ra,Kb,Eb,Na,yd,Ya,Lb,Mb,lb,Oa,Zb,Qa,ub,vb,Ta,nb,fc,zc,uc,bb,jc,gd,Xa;(Va=C.position)&&("object"===typeof Va||"function"===typeof Va)&&(da(Va)||x.getBuffer(Va)||x.getBuffer(Va.buffer)||da(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||J(Va.constant)))||K.commandRaise(h,I);vd=!1;Ib=null;Jb=!1;Ob=qc=0;jb=1;Gb=0;Db=5126;Pb=Yb=hb=wb=0;da(Va)?(vd=!0,Ib=x.createStream(34962,Va),Db=Ib.dtype):(Ib=x.getBuffer(Va))?Db=Ib.dtype:"constant"in Va?(jb=
2,"number"===typeof Va.constant?(hb=Va.constant,Yb=Pb=wb=0):(hb=0<Va.constant.length?Va.constant[0]:0,Yb=1<Va.constant.length?Va.constant[1]:0,Pb=2<Va.constant.length?Va.constant[2]:0,wb=3<Va.constant.length?Va.constant[3]:0)):(Ib=da(Va.buffer)?x.createStream(34962,Va.buffer):x.getBuffer(Va.buffer),Db="type"in Va?la[Va.type]:Ib.dtype,Jb=!!Va.normalized,Ob=Va.size|0,qc=Va.offset|0,Gb=Va.stride|0);qb=X.location;Sa=T[qb];if(1===jb){if(Sa.buffer||q.enableVertexAttribArray(qb),Ub=Ob||3,Sa.type!==Db||Sa.size!==
Ub||Sa.buffer!==Ib||Sa.normalized!==Jb||Sa.offset!==qc||Sa.stride!==Gb)q.bindBuffer(34962,Ib.buffer),q.vertexAttribPointer(qb,Ub,Db,Jb,Gb,qc),Sa.type=Db,Sa.size=Ub,Sa.buffer=Ib,Sa.normalized=Jb,Sa.offset=qc,Sa.stride=Gb}else if(Sa.buffer&&(q.disableVertexAttribArray(qb),Sa.buffer=null),Sa.x!==hb||Sa.y!==Yb||Sa.z!==Pb||Sa.w!==wb)q.vertexAttrib4f(qb,hb,Yb,Pb,wb),Sa.x=hb,Sa.y=Yb,Sa.z=Pb,Sa.w=wb;(zb=C.normal)&&("object"===typeof zb||"function"===typeof zb)&&(da(zb)||x.getBuffer(zb)||x.getBuffer(zb.buffer)||
da(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||J(zb.constant)))||K.commandRaise(z,I);ic=!1;ib=null;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Wa=kb=La=0;da(zb)?(ic=!0,ib=x.createStream(34962,zb),gb=ib.dtype):(ib=x.getBuffer(zb))?gb=ib.dtype:"constant"in zb?(Ka=2,"number"===typeof zb.constant?(kb=zb.constant,Wa=tb=La=0):(kb=0<zb.constant.length?zb.constant[0]:0,Wa=1<zb.constant.length?zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,La=3<zb.constant.length?zb.constant[3]:0)):(ib=
da(zb.buffer)?x.createStream(34962,zb.buffer):x.getBuffer(zb.buffer),gb="type"in zb?la[zb.type]:ib.dtype,pb=!!zb.normalized,rb=zb.size|0,Ha=zb.offset|0,fb=zb.stride|0);sb=na.location;Pa=T[sb];if(1===Ka){if(Pa.buffer||q.enableVertexAttribArray(sb),Bc=rb||3,Pa.type!==gb||Pa.size!==Bc||Pa.buffer!==ib||Pa.normalized!==pb||Pa.offset!==Ha||Pa.stride!==fb)q.bindBuffer(34962,ib.buffer),q.vertexAttribPointer(sb,Bc,gb,pb,fb,Ha),Pa.type=gb,Pa.size=Bc,Pa.buffer=ib,Pa.normalized=pb,Pa.offset=Ha,Pa.stride=fb}else if(Pa.buffer&&
(q.disableVertexAttribArray(sb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==tb||Pa.w!==La)q.vertexAttrib4f(sb,kb,Wa,tb,La),Pa.x=kb,Pa.y=Wa,Pa.z=tb,Pa.w=La;(Ra=C.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(da(Ra)||x.getBuffer(Ra)||x.getBuffer(Ra.buffer)||da(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||J(Ra.constant)))||K.commandRaise(ca,I);Kb=!1;Eb=null;Na=!1;Ya=yd=0;Lb=1;Mb=0;lb=5126;ub=Qa=Zb=Oa=0;da(Ra)?(Kb=!0,Eb=x.createStream(34962,Ra),lb=Eb.dtype):(Eb=x.getBuffer(Ra))?
lb=Eb.dtype:"constant"in Ra?(Lb=2,"number"===typeof Ra.constant?(Zb=Ra.constant,Qa=ub=Oa=0):(Zb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,ub=2<Ra.constant.length?Ra.constant[2]:0,Oa=3<Ra.constant.length?Ra.constant[3]:0)):(Eb=da(Ra.buffer)?x.createStream(34962,Ra.buffer):x.getBuffer(Ra.buffer),lb="type"in Ra?la[Ra.type]:Eb.dtype,Na=!!Ra.normalized,Ya=Ra.size|0,yd=Ra.offset|0,Mb=Ra.stride|0);vb=fa.location;Ta=T[vb];if(1===Lb){if(Ta.buffer||q.enableVertexAttribArray(vb),
nb=Ya||2,Ta.type!==lb||Ta.size!==nb||Ta.buffer!==Eb||Ta.normalized!==Na||Ta.offset!==yd||Ta.stride!==Mb)q.bindBuffer(34962,Eb.buffer),q.vertexAttribPointer(vb,nb,lb,Na,Mb,yd),Ta.type=lb,Ta.size=nb,Ta.buffer=Eb,Ta.normalized=Na,Ta.offset=yd,Ta.stride=Mb}else if(Ta.buffer&&(q.disableVertexAttribArray(vb),Ta.buffer=null),Ta.x!==Zb||Ta.y!==Qa||Ta.z!==ub||Ta.w!==Oa)q.vertexAttrib4f(vb,Zb,Qa,ub,Oa),Ta.x=Zb,Ta.y=Qa,Ta.z=ub,Ta.w=Oa;(fc=C.atlas)&&"framebuffer"===fc._reglType&&(fc=fc.color[0]);"function"===
typeof fc&&"texture2d"===fc._reglType||K.commandRaise(t,I);zc=fc._texture;q.uniform1i(y.location,zc.bind());uc=C.elements;bb=null;(jc=da(uc))?bb=za.createStream(uc):(bb=za.getElements(uc),uc&&!bb&&K.commandRaise(a,I));bb&&q.bindBuffer(34963,bb.buffer.buffer);gd=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||K.commandRaise(xa,I);Xa&&(bb?q.drawElements(gd,Xa,bb.type,0<<(bb.type-5121>>1)):q.drawArrays(gd,0,Xa),vd&&x.destroyStream(Ib),ic&&x.destroyStream(ib),Kb&&x.destroyStream(Eb),zc.unbind(),jc&&za.destroyStream(bb))}N.dirty=
!0;Ca.setVAO(null);l.view=k;g&&(M.cpuTime+=performance.now()-n)}}},"$7,color,position":function(d,K,I,M,g,k,m,b,G,B){var L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,xa,y,na,X,Y,fa,P,T,x,l,N,Q;L=d.attributes;W=d.context;u=d.current;A=d.draw;w=d.elements;Z=d.framebuffer;r=d.gl;U=d.next;n=d.shader;O=d.uniforms;ja=d.vao;e=U.blend_color;C=u.blend_color;V=U.blend_equation;f=u.blend_equation;ba=U.blend_func;h=u.blend_func;z=U.colorMask;ca=u.colorMask;E=U.depth_range;D=u.depth_range;c=U.polygonOffset_offset;
t=u.polygonOffset_offset;a=U.sample_coverage;xa=u.sample_coverage;y=U.scissor_box;na=u.scissor_box;X=U.stencil_func;Y=u.stencil_func;fa=U.stencil_opBack;P=u.stencil_opBack;T=U.stencil_opFront;x=u.stencil_opFront;l=U.viewport;N=u.viewport;Q=[1,0,0,1];return{draw:function(b){var m,q,d,n;b=Z.next;b!==Z.cur&&(b?r.bindFramebuffer(36160,b.framebuffer):r.bindFramebuffer(36160,null),Z.cur=b);if(u.dirty){b=U.dither;b!==u.dither&&(b?r.enable(3024):r.disable(3024),u.dither=b);b=U.blend_enable;b!==u.blend_enable&&
(b?r.enable(3042):r.disable(3042),u.blend_enable=b);b=e[0];q=e[1];d=e[2];n=e[3];if(b!==C[0]||q!==C[1]||d!==C[2]||n!==C[3])r.blendColor(b,q,d,n),C[0]=b,C[1]=q,C[2]=d,C[3]=n;b=V[0];q=V[1];if(b!==f[0]||q!==f[1])r.blendEquationSeparate(b,q),f[0]=b,f[1]=q;b=ba[0];q=ba[1];d=ba[2];n=ba[3];if(b!==h[0]||q!==h[1]||d!==h[2]||n!==h[3])r.blendFuncSeparate(b,q,d,n),h[0]=b,h[1]=q,h[2]=d,h[3]=n;b=U.depth_enable;b!==u.depth_enable&&(b?r.enable(2929):r.disable(2929),u.depth_enable=b);b=U.depth_func;b!==u.depth_func&&
(r.depthFunc(b),u.depth_func=b);b=E[0];q=E[1];if(b!==D[0]||q!==D[1])r.depthRange(b,q),D[0]=b,D[1]=q;b=U.depth_mask;b!==u.depth_mask&&(r.depthMask(b),u.depth_mask=b);b=z[0];q=z[1];d=z[2];n=z[3];if(b!==ca[0]||q!==ca[1]||d!==ca[2]||n!==ca[3])r.colorMask(b,q,d,n),ca[0]=b,ca[1]=q,ca[2]=d,ca[3]=n;b=U.cull_enable;b!==u.cull_enable&&(b?r.enable(2884):r.disable(2884),u.cull_enable=b);b=U.cull_face;b!==u.cull_face&&(r.cullFace(b),u.cull_face=b);b=U.frontFace;b!==u.frontFace&&(r.frontFace(b),u.frontFace=b);
b=U.lineWidth;b!==u.lineWidth&&(r.lineWidth(b),u.lineWidth=b);b=U.polygonOffset_enable;b!==u.polygonOffset_enable&&(b?r.enable(32823):r.disable(32823),u.polygonOffset_enable=b);b=c[0];q=c[1];if(b!==t[0]||q!==t[1])r.polygonOffset(b,q),t[0]=b,t[1]=q;b=U.sample_alpha;b!==u.sample_alpha&&(b?r.enable(32926):r.disable(32926),u.sample_alpha=b);b=U.sample_enable;b!==u.sample_enable&&(b?r.enable(32928):r.disable(32928),u.sample_enable=b);b=a[0];q=a[1];if(b!==xa[0]||q!==xa[1])r.sampleCoverage(b,q),xa[0]=b,
xa[1]=q;b=U.stencil_enable;b!==u.stencil_enable&&(b?r.enable(2960):r.disable(2960),u.stencil_enable=b);b=U.stencil_mask;b!==u.stencil_mask&&(r.stencilMask(b),u.stencil_mask=b);b=X[0];q=X[1];d=X[2];if(b!==Y[0]||q!==Y[1]||d!==Y[2])r.stencilFunc(b,q,d),Y[0]=b,Y[1]=q,Y[2]=d;b=T[0];q=T[1];d=T[2];n=T[3];if(b!==x[0]||q!==x[1]||d!==x[2]||n!==x[3])r.stencilOpSeparate(b,q,d,n),x[0]=b,x[1]=q,x[2]=d,x[3]=n;b=fa[0];q=fa[1];d=fa[2];n=fa[3];if(b!==P[0]||q!==P[1]||d!==P[2]||n!==P[3])r.stencilOpSeparate(b,q,d,n),
P[0]=b,P[1]=q,P[2]=d,P[3]=n;b=U.scissor_enable;b!==u.scissor_enable&&(b?r.enable(3089):r.disable(3089),u.scissor_enable=b);b=y[0];q=y[1];d=y[2];n=y[3];if(b!==na[0]||q!==na[1]||d!==na[2]||n!==na[3])r.scissor(b,q,d,n),na[0]=b,na[1]=q,na[2]=d,na[3]=n;b=l[0];q=l[1];d=l[2];n=l[3];if(b!==N[0]||q!==N[1]||d!==N[2]||n!==N[3])r.viewport(b,q,d,n),N[0]=b,N[1]=q,N[2]=d,N[3]=n;u.dirty=!1}if(b=u.profile)m=performance.now(),M.count++;r.useProgram(g.program);ja.setVAO(null);q=B.location;d=L[q];d.buffer||r.enableVertexAttribArray(q);
if(d.type!==k.dtype||2!==d.size||d.buffer!==k||!1!==d.normalized||0!==d.offset||0!==d.stride)r.bindBuffer(34962,k.buffer),r.vertexAttribPointer(q,2,k.dtype,!1,0,0),d.type=k.dtype,d.size=2,d.buffer=k,d.normalized=!1,d.offset=0,d.stride=0;r.uniform4f(G.location,1,0,0,1);(q=A.elements)?r.bindBuffer(34963,q.buffer.buffer):ja.currentVAO&&(q=w.getElements(ja.currentVAO.elements))&&r.bindBuffer(34963,q.buffer.buffer);d=A.primitive;n=A.offset;q?r.drawElements(d,3,q.type,n<<(q.type-5121>>1)):r.drawArrays(d,
n,3);ja.setVAO(null);b&&(M.cpuTime+=performance.now()-m)},scope:function(a,b,c){var e,f,l,h,d,g,t,y,r,C,x,z,D,F,E,B,v,p;if(e=u.profile)f=performance.now(),M.count++;l=A.count;A.count=3;h=O[3];O[3]=Q;d=m.buffer;m.buffer=k;g=m.divisor;m.divisor=0;t=m.normalized;m.normalized=!1;y=m.offset;m.offset=0;r=m.size;m.size=0;C=m.state;m.state=1;x=m.stride;m.stride=0;z=m.type;m.type=k.dtype;D=m.w;m.w=0;F=m.x;m.x=0;E=m.y;m.y=0;B=m.z;m.z=0;v=n.vert;n.vert=2;p=n.frag;n.frag=1;b(W,a,c);e&&(M.cpuTime+=performance.now()-
f);A.count=l;O[3]=h;m.buffer=d;m.divisor=g;m.normalized=t;m.offset=y;m.size=r;m.state=C;m.stride=x;m.type=z;m.w=D;m.x=F;m.y=E;m.z=B;n.vert=v;n.frag=p},batch:function(d,m){var q,g,n;q=Z.next;q!==Z.cur&&(q?r.bindFramebuffer(36160,q.framebuffer):r.bindFramebuffer(36160,null),Z.cur=q);if(u.dirty){var S,I;q=U.dither;q!==u.dither&&(q?r.enable(3024):r.disable(3024),u.dither=q);q=U.blend_enable;q!==u.blend_enable&&(q?r.enable(3042):r.disable(3042),u.blend_enable=q);q=e[0];n=e[1];S=e[2];I=e[3];if(q!==C[0]||
n!==C[1]||S!==C[2]||I!==C[3])r.blendColor(q,n,S,I),C[0]=q,C[1]=n,C[2]=S,C[3]=I;q=V[0];n=V[1];if(q!==f[0]||n!==f[1])r.blendEquationSeparate(q,n),f[0]=q,f[1]=n;q=ba[0];n=ba[1];S=ba[2];I=ba[3];if(q!==h[0]||n!==h[1]||S!==h[2]||I!==h[3])r.blendFuncSeparate(q,n,S,I),h[0]=q,h[1]=n,h[2]=S,h[3]=I;q=U.depth_enable;q!==u.depth_enable&&(q?r.enable(2929):r.disable(2929),u.depth_enable=q);q=U.depth_func;q!==u.depth_func&&(r.depthFunc(q),u.depth_func=q);q=E[0];n=E[1];if(q!==D[0]||n!==D[1])r.depthRange(q,n),D[0]=
q,D[1]=n;q=U.depth_mask;q!==u.depth_mask&&(r.depthMask(q),u.depth_mask=q);q=z[0];n=z[1];S=z[2];I=z[3];if(q!==ca[0]||n!==ca[1]||S!==ca[2]||I!==ca[3])r.colorMask(q,n,S,I),ca[0]=q,ca[1]=n,ca[2]=S,ca[3]=I;q=U.cull_enable;q!==u.cull_enable&&(q?r.enable(2884):r.disable(2884),u.cull_enable=q);q=U.cull_face;q!==u.cull_face&&(r.cullFace(q),u.cull_face=q);q=U.frontFace;q!==u.frontFace&&(r.frontFace(q),u.frontFace=q);q=U.lineWidth;q!==u.lineWidth&&(r.lineWidth(q),u.lineWidth=q);q=U.polygonOffset_enable;q!==
u.polygonOffset_enable&&(q?r.enable(32823):r.disable(32823),u.polygonOffset_enable=q);q=c[0];n=c[1];if(q!==t[0]||n!==t[1])r.polygonOffset(q,n),t[0]=q,t[1]=n;q=U.sample_alpha;q!==u.sample_alpha&&(q?r.enable(32926):r.disable(32926),u.sample_alpha=q);q=U.sample_enable;q!==u.sample_enable&&(q?r.enable(32928):r.disable(32928),u.sample_enable=q);q=a[0];n=a[1];if(q!==xa[0]||n!==xa[1])r.sampleCoverage(q,n),xa[0]=q,xa[1]=n;q=U.stencil_enable;q!==u.stencil_enable&&(q?r.enable(2960):r.disable(2960),u.stencil_enable=
q);q=U.stencil_mask;q!==u.stencil_mask&&(r.stencilMask(q),u.stencil_mask=q);q=X[0];n=X[1];S=X[2];if(q!==Y[0]||n!==Y[1]||S!==Y[2])r.stencilFunc(q,n,S),Y[0]=q,Y[1]=n,Y[2]=S;q=T[0];n=T[1];S=T[2];I=T[3];if(q!==x[0]||n!==x[1]||S!==x[2]||I!==x[3])r.stencilOpSeparate(q,n,S,I),x[0]=q,x[1]=n,x[2]=S,x[3]=I;q=fa[0];n=fa[1];S=fa[2];I=fa[3];if(q!==P[0]||n!==P[1]||S!==P[2]||I!==P[3])r.stencilOpSeparate(q,n,S,I),P[0]=q,P[1]=n,P[2]=S,P[3]=I;q=U.scissor_enable;q!==u.scissor_enable&&(q?r.enable(3089):r.disable(3089),
u.scissor_enable=q);q=y[0];n=y[1];S=y[2];I=y[3];if(q!==na[0]||n!==na[1]||S!==na[2]||I!==na[3])r.scissor(q,n,S,I),na[0]=q,na[1]=n,na[2]=S,na[3]=I;q=l[0];n=l[1];S=l[2];I=l[3];if(q!==N[0]||n!==N[1]||S!==N[2]||I!==N[3])r.viewport(q,n,S,I),N[0]=q,N[1]=n,N[2]=S,N[3]=I;u.dirty=!1}if(q=u.profile)g=performance.now(),M.count+=m;r.useProgram(b.program);var O;ja.setVAO(null);n=B.location;S=L[n];S.buffer||r.enableVertexAttribArray(n);if(S.type!==k.dtype||2!==S.size||S.buffer!==k||!1!==S.normalized||0!==S.offset||
0!==S.stride)r.bindBuffer(34962,k.buffer),r.vertexAttribPointer(n,2,k.dtype,!1,0,0),S.type=k.dtype,S.size=2,S.buffer=k,S.normalized=!1,S.offset=0,S.stride=0;r.uniform4f(G.location,1,0,0,1);(S=A.elements)?r.bindBuffer(34963,S.buffer.buffer):ja.currentVAO&&(S=w.getElements(ja.currentVAO.elements))&&r.bindBuffer(34963,S.buffer.buffer);I=A.primitive;O=A.offset;for(n=0;n<m;++n)S?r.drawElements(I,3,S.type,O<<(S.type-5121>>1)):r.drawArrays(I,O,3);ja.setVAO(null);q&&(M.cpuTime+=performance.now()-g)}}},"$19,angle,color,offset,position":function(d,
K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V){var f,ba,h,z,ca,E,D,c,t,a,xa,y,na,X,Y,fa,P,T,x,l,N,Q,ia,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa;f=d.attributes;ba=d.context;h=d.current;z=d.draw;ca=d.elements;E=d.framebuffer;D=d.gl;c=d.isArrayLike;t=d.next;a=d.shader;xa=d.uniforms;y=d.vao;na=t.blend_color;X=h.blend_color;Y=t.blend_equation;fa=h.blend_equation;P=t.blend_func;T=h.blend_func;x=t.colorMask;l=h.colorMask;N=t.depth_range;Q=h.depth_range;ia=t.polygonOffset_offset;oa=h.polygonOffset_offset;q=t.sample_coverage;
J=h.sample_coverage;da=t.scissor_box;S=h.scissor_box;ma=t.stencil_func;ra=h.stencil_func;Ca=t.stencil_opBack;wa=h.stencil_opBack;ga=t.stencil_opFront;Da=h.stencil_opFront;ka=t.viewport;qa=h.viewport;return{draw:function(a){var d,n,r,u;d=E.next;d!==E.cur&&(d?D.bindFramebuffer(36160,d.framebuffer):D.bindFramebuffer(36160,null),E.cur=d);if(h.dirty){var v;d=t.dither;d!==h.dither&&(d?D.enable(3024):D.disable(3024),h.dither=d);d=t.blend_enable;d!==h.blend_enable&&(d?D.enable(3042):D.disable(3042),h.blend_enable=
d);d=na[0];r=na[1];u=na[2];v=na[3];if(d!==X[0]||r!==X[1]||u!==X[2]||v!==X[3])D.blendColor(d,r,u,v),X[0]=d,X[1]=r,X[2]=u,X[3]=v;d=Y[0];r=Y[1];if(d!==fa[0]||r!==fa[1])D.blendEquationSeparate(d,r),fa[0]=d,fa[1]=r;d=P[0];r=P[1];u=P[2];v=P[3];if(d!==T[0]||r!==T[1]||u!==T[2]||v!==T[3])D.blendFuncSeparate(d,r,u,v),T[0]=d,T[1]=r,T[2]=u,T[3]=v;d=t.depth_func;d!==h.depth_func&&(D.depthFunc(d),h.depth_func=d);d=N[0];r=N[1];if(d!==Q[0]||r!==Q[1])D.depthRange(d,r),Q[0]=d,Q[1]=r;d=t.depth_mask;d!==h.depth_mask&&
(D.depthMask(d),h.depth_mask=d);d=x[0];r=x[1];u=x[2];v=x[3];if(d!==l[0]||r!==l[1]||u!==l[2]||v!==l[3])D.colorMask(d,r,u,v),l[0]=d,l[1]=r,l[2]=u,l[3]=v;d=t.cull_enable;d!==h.cull_enable&&(d?D.enable(2884):D.disable(2884),h.cull_enable=d);d=t.cull_face;d!==h.cull_face&&(D.cullFace(d),h.cull_face=d);d=t.frontFace;d!==h.frontFace&&(D.frontFace(d),h.frontFace=d);d=t.lineWidth;d!==h.lineWidth&&(D.lineWidth(d),h.lineWidth=d);d=t.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?D.enable(32823):D.disable(32823),
h.polygonOffset_enable=d);d=ia[0];r=ia[1];if(d!==oa[0]||r!==oa[1])D.polygonOffset(d,r),oa[0]=d,oa[1]=r;d=t.sample_alpha;d!==h.sample_alpha&&(d?D.enable(32926):D.disable(32926),h.sample_alpha=d);d=t.sample_enable;d!==h.sample_enable&&(d?D.enable(32928):D.disable(32928),h.sample_enable=d);d=q[0];r=q[1];if(d!==J[0]||r!==J[1])D.sampleCoverage(d,r),J[0]=d,J[1]=r;d=t.stencil_enable;d!==h.stencil_enable&&(d?D.enable(2960):D.disable(2960),h.stencil_enable=d);d=t.stencil_mask;d!==h.stencil_mask&&(D.stencilMask(d),
h.stencil_mask=d);d=ma[0];r=ma[1];u=ma[2];if(d!==ra[0]||r!==ra[1]||u!==ra[2])D.stencilFunc(d,r,u),ra[0]=d,ra[1]=r,ra[2]=u;d=ga[0];r=ga[1];u=ga[2];v=ga[3];if(d!==Da[0]||r!==Da[1]||u!==Da[2]||v!==Da[3])D.stencilOpSeparate(d,r,u,v),Da[0]=d,Da[1]=r,Da[2]=u,Da[3]=v;d=Ca[0];r=Ca[1];u=Ca[2];v=Ca[3];if(d!==wa[0]||r!==wa[1]||u!==wa[2]||v!==wa[3])D.stencilOpSeparate(d,r,u,v),wa[0]=d,wa[1]=r,wa[2]=u,wa[3]=v;d=t.scissor_enable;d!==h.scissor_enable&&(d?D.enable(3089):D.disable(3089),h.scissor_enable=d);d=da[0];
r=da[1];u=da[2];v=da[3];if(d!==S[0]||r!==S[1]||u!==S[2]||v!==S[3])D.scissor(d,r,u,v),S[0]=d,S[1]=r,S[2]=u,S[3]=v;d=ka[0];r=ka[1];u=ka[2];v=ka[3];if(d!==qa[0]||r!==qa[1]||u!==qa[2]||v!==qa[3])D.viewport(d,r,u,v),qa[0]=d,qa[1]=r,qa[2]=u,qa[3]=v}D.disable(2929);h.depth_enable=!1;if(d=h.profile)n=performance.now(),M.count++;D.useProgram(g.program);y.setVAO(null);r=V.location;u=f[r];u.buffer||D.enableVertexAttribArray(r);if(u.type!==k.dtype||2!==u.size||u.buffer!==k||!1!==u.normalized||0!==u.offset||0!==
u.stride)D.bindBuffer(34962,k.buffer),D.vertexAttribPointer(r,2,k.dtype,!1,0,0),u.type=k.dtype,u.size=2,u.buffer=k,u.normalized=!1,u.offset=0,u.stride=0;r=m.call(this,ba,a,0);"number"!==typeof r&&K.commandRaise(b,I);D.uniform1f(ja.location,r);r=a.offset;c(r)&&2===r.length||K.commandRaise(G,I);D.uniform2f(C.location,r[0],r[1]);a=B.call(this,ba,a,0);c(a)&&4===a.length||K.commandRaise(L,I);D.uniform4f(e.location,a[0],a[1],a[2],a[3]);(a=z.elements)?D.bindBuffer(34963,a.buffer.buffer):y.currentVAO&&(a=
ca.getElements(y.currentVAO.elements))&&D.bindBuffer(34963,a.buffer.buffer);r=z.primitive;u=z.offset;a?D.drawElements(r,3,a.type,u<<(a.type-5121>>1)):D.drawArrays(r,u,3);h.dirty=!0;y.setVAO(null);d&&(M.cpuTime+=performance.now()-n)},scope:function(b,c,e){var f,l,d,m,q,g,n,r,y,C,H,x,D,E,S,I,J,ga,B,w,O;f=t.depth_enable;t.depth_enable=!1;if(l=h.profile)d=performance.now(),M.count++;m=z.count;z.count=3;q=W.call(this,ba,b,e);g=xa[3];xa[3]=q;n=u.call(this,ba,b,e);q=xa[5];xa[5]=n;r=b.offset;n=xa[4];xa[4]=
r;r=A.buffer;A.buffer=k;y=A.divisor;A.divisor=0;C=A.normalized;A.normalized=!1;H=A.offset;A.offset=0;x=A.size;A.size=0;D=A.state;A.state=1;E=A.stride;A.stride=0;S=A.type;A.type=k.dtype;I=A.w;A.w=0;J=A.x;A.x=0;ga=A.y;A.y=0;B=A.z;A.z=0;w=a.vert;a.vert=2;O=a.frag;a.frag=1;h.dirty=!0;c(ba,b,e);t.depth_enable=f;l&&(M.cpuTime+=performance.now()-d);z.count=m;xa[3]=g;xa[5]=q;xa[4]=n;A.buffer=r;A.divisor=y;A.normalized=C;A.offset=H;A.size=x;A.state=D;A.stride=E;A.type=S;A.w=I;A.x=J;A.y=ga;A.z=B;a.vert=w;a.frag=
O;h.dirty=!0},batch:function(a,b){var d,m,g,v;d=E.next;d!==E.cur&&(d?D.bindFramebuffer(36160,d.framebuffer):D.bindFramebuffer(36160,null),E.cur=d);if(h.dirty){var p,R,u;d=t.dither;d!==h.dither&&(d?D.enable(3024):D.disable(3024),h.dither=d);d=t.blend_enable;d!==h.blend_enable&&(d?D.enable(3042):D.disable(3042),h.blend_enable=d);d=na[0];p=na[1];R=na[2];u=na[3];if(d!==X[0]||p!==X[1]||R!==X[2]||u!==X[3])D.blendColor(d,p,R,u),X[0]=d,X[1]=p,X[2]=R,X[3]=u;d=Y[0];p=Y[1];if(d!==fa[0]||p!==fa[1])D.blendEquationSeparate(d,
p),fa[0]=d,fa[1]=p;d=P[0];p=P[1];R=P[2];u=P[3];if(d!==T[0]||p!==T[1]||R!==T[2]||u!==T[3])D.blendFuncSeparate(d,p,R,u),T[0]=d,T[1]=p,T[2]=R,T[3]=u;d=t.depth_func;d!==h.depth_func&&(D.depthFunc(d),h.depth_func=d);d=N[0];p=N[1];if(d!==Q[0]||p!==Q[1])D.depthRange(d,p),Q[0]=d,Q[1]=p;d=t.depth_mask;d!==h.depth_mask&&(D.depthMask(d),h.depth_mask=d);d=x[0];p=x[1];R=x[2];u=x[3];if(d!==l[0]||p!==l[1]||R!==l[2]||u!==l[3])D.colorMask(d,p,R,u),l[0]=d,l[1]=p,l[2]=R,l[3]=u;d=t.cull_enable;d!==h.cull_enable&&(d?
D.enable(2884):D.disable(2884),h.cull_enable=d);d=t.cull_face;d!==h.cull_face&&(D.cullFace(d),h.cull_face=d);d=t.frontFace;d!==h.frontFace&&(D.frontFace(d),h.frontFace=d);d=t.lineWidth;d!==h.lineWidth&&(D.lineWidth(d),h.lineWidth=d);d=t.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?D.enable(32823):D.disable(32823),h.polygonOffset_enable=d);d=ia[0];p=ia[1];if(d!==oa[0]||p!==oa[1])D.polygonOffset(d,p),oa[0]=d,oa[1]=p;d=t.sample_alpha;d!==h.sample_alpha&&(d?D.enable(32926):D.disable(32926),h.sample_alpha=
d);d=t.sample_enable;d!==h.sample_enable&&(d?D.enable(32928):D.disable(32928),h.sample_enable=d);d=q[0];p=q[1];if(d!==J[0]||p!==J[1])D.sampleCoverage(d,p),J[0]=d,J[1]=p;d=t.stencil_enable;d!==h.stencil_enable&&(d?D.enable(2960):D.disable(2960),h.stencil_enable=d);d=t.stencil_mask;d!==h.stencil_mask&&(D.stencilMask(d),h.stencil_mask=d);d=ma[0];p=ma[1];R=ma[2];if(d!==ra[0]||p!==ra[1]||R!==ra[2])D.stencilFunc(d,p,R),ra[0]=d,ra[1]=p,ra[2]=R;d=ga[0];p=ga[1];R=ga[2];u=ga[3];if(d!==Da[0]||p!==Da[1]||R!==
Da[2]||u!==Da[3])D.stencilOpSeparate(d,p,R,u),Da[0]=d,Da[1]=p,Da[2]=R,Da[3]=u;d=Ca[0];p=Ca[1];R=Ca[2];u=Ca[3];if(d!==wa[0]||p!==wa[1]||R!==wa[2]||u!==wa[3])D.stencilOpSeparate(d,p,R,u),wa[0]=d,wa[1]=p,wa[2]=R,wa[3]=u;d=t.scissor_enable;d!==h.scissor_enable&&(d?D.enable(3089):D.disable(3089),h.scissor_enable=d);d=da[0];p=da[1];R=da[2];u=da[3];if(d!==S[0]||p!==S[1]||R!==S[2]||u!==S[3])D.scissor(d,p,R,u),S[0]=d,S[1]=p,S[2]=R,S[3]=u;d=ka[0];p=ka[1];R=ka[2];u=ka[3];if(d!==qa[0]||p!==qa[1]||R!==qa[2]||
u!==qa[3])D.viewport(d,p,R,u),qa[0]=d,qa[1]=p,qa[2]=R,qa[3]=u}D.disable(2929);h.depth_enable=!1;if(d=h.profile)m=performance.now(),M.count+=b;D.useProgram(w.program);y.setVAO(null);p=V.location;R=f[p];R.buffer||D.enableVertexAttribArray(p);if(R.type!==k.dtype||2!==R.size||R.buffer!==k||!1!==R.normalized||0!==R.offset||0!==R.stride)D.bindBuffer(34962,k.buffer),D.vertexAttribPointer(p,2,k.dtype,!1,0,0),R.type=k.dtype,R.size=2,R.buffer=k,R.normalized=!1,R.offset=0,R.stride=0;g=Z.call(this,ba,v,g);"number"!==
typeof g&&K.commandRaise(r,I);D.uniform1f(ja.location,g);(p=z.elements)?D.bindBuffer(34963,p.buffer.buffer):y.currentVAO&&(p=ca.getElements(y.currentVAO.elements))&&D.bindBuffer(34963,p.buffer.buffer);R=z.primitive;u=z.offset;for(g=0;g<b;++g){v=a[g];var A,B,G,ha,H,sa,Ea,pa,L;A=v.offset;c(A)&&2===A.length||K.commandRaise(U,I);B=A[0];A=A[1];g&&G===B&&ha===A||(G=B,ha=A,D.uniform2f(C.location,B,A));H=n.call(this,ba,v,g);c(H)&&4===H.length||K.commandRaise(O,I);v=H[0];B=H[1];A=H[2];H=H[3];g&&sa===v&&Ea===
B&&pa===A&&L===H||(sa=v,Ea=B,pa=A,L=H,D.uniform4f(e.location,v,B,A,H));p?D.drawElements(R,3,p.type,u<<(p.type-5121>>1)):D.drawArrays(R,u,3)}h.dirty=!0;y.setVAO(null);d&&(M.cpuTime+=performance.now()-m)}}},"$23,model,position,projection,view":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z){var ca,E,D,c,t,a,xa,y,na,X,Y,fa,P,T,x,l,N,Q,ia,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va;ca=d.attributes;E=d.context;D=d.current;c=d.draw;t=d.framebuffer;a=d.gl;xa=d.isArrayLike;
y=d.next;na=d.shader;X=d.uniforms;Y=d.vao;fa=y.blend_color;P=D.blend_color;T=y.blend_equation;x=D.blend_equation;l=y.blend_func;N=D.blend_func;Q=y.colorMask;ia=D.colorMask;oa=y.depth_range;q=D.depth_range;J=y.polygonOffset_offset;da=D.polygonOffset_offset;S=y.sample_coverage;ma=D.sample_coverage;ra=y.scissor_box;Ca=D.scissor_box;wa=y.stencil_func;ga=D.stencil_func;Da=y.stencil_opBack;ka=D.stencil_opBack;qa=y.stencil_opFront;Aa=D.stencil_opFront;Ma=y.viewport;F=D.viewport;eb=new Float32Array([1,0,
0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ua=new Float32Array(16);v=new Float32Array(16);p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];R=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ta=new Float32Array(16);va=new Float32Array(16);return{draw:function(c){var e,d,p,n;e=t.next;e!==t.cur&&(e?a.bindFramebuffer(36160,e.framebuffer):a.bindFramebuffer(36160,null),t.cur=e);if(D.dirty){var r;e=y.dither;e!==D.dither&&(e?a.enable(3024):a.disable(3024),D.dither=e);e=y.blend_enable;e!==D.blend_enable&&(e?a.enable(3042):a.disable(3042),
D.blend_enable=e);e=fa[0];p=fa[1];n=fa[2];r=fa[3];if(e!==P[0]||p!==P[1]||n!==P[2]||r!==P[3])a.blendColor(e,p,n,r),P[0]=e,P[1]=p,P[2]=n,P[3]=r;e=T[0];p=T[1];if(e!==x[0]||p!==x[1])a.blendEquationSeparate(e,p),x[0]=e,x[1]=p;e=l[0];p=l[1];n=l[2];r=l[3];if(e!==N[0]||p!==N[1]||n!==N[2]||r!==N[3])a.blendFuncSeparate(e,p,n,r),N[0]=e,N[1]=p,N[2]=n,N[3]=r;e=y.depth_enable;e!==D.depth_enable&&(e?a.enable(2929):a.disable(2929),D.depth_enable=e);e=y.depth_func;e!==D.depth_func&&(a.depthFunc(e),D.depth_func=e);
e=oa[0];p=oa[1];if(e!==q[0]||p!==q[1])a.depthRange(e,p),q[0]=e,q[1]=p;e=y.depth_mask;e!==D.depth_mask&&(a.depthMask(e),D.depth_mask=e);e=Q[0];p=Q[1];n=Q[2];r=Q[3];if(e!==ia[0]||p!==ia[1]||n!==ia[2]||r!==ia[3])a.colorMask(e,p,n,r),ia[0]=e,ia[1]=p,ia[2]=n,ia[3]=r;e=y.cull_enable;e!==D.cull_enable&&(e?a.enable(2884):a.disable(2884),D.cull_enable=e);e=y.cull_face;e!==D.cull_face&&(a.cullFace(e),D.cull_face=e);e=y.frontFace;e!==D.frontFace&&(a.frontFace(e),D.frontFace=e);e=y.lineWidth;e!==D.lineWidth&&
(a.lineWidth(e),D.lineWidth=e);e=y.polygonOffset_enable;e!==D.polygonOffset_enable&&(e?a.enable(32823):a.disable(32823),D.polygonOffset_enable=e);e=J[0];p=J[1];if(e!==da[0]||p!==da[1])a.polygonOffset(e,p),da[0]=e,da[1]=p;e=y.sample_alpha;e!==D.sample_alpha&&(e?a.enable(32926):a.disable(32926),D.sample_alpha=e);e=y.sample_enable;e!==D.sample_enable&&(e?a.enable(32928):a.disable(32928),D.sample_enable=e);e=S[0];p=S[1];if(e!==ma[0]||p!==ma[1])a.sampleCoverage(e,p),ma[0]=e,ma[1]=p;e=y.stencil_enable;
e!==D.stencil_enable&&(e?a.enable(2960):a.disable(2960),D.stencil_enable=e);e=y.stencil_mask;e!==D.stencil_mask&&(a.stencilMask(e),D.stencil_mask=e);e=wa[0];p=wa[1];n=wa[2];if(e!==ga[0]||p!==ga[1]||n!==ga[2])a.stencilFunc(e,p,n),ga[0]=e,ga[1]=p,ga[2]=n;e=qa[0];p=qa[1];n=qa[2];r=qa[3];if(e!==Aa[0]||p!==Aa[1]||n!==Aa[2]||r!==Aa[3])a.stencilOpSeparate(e,p,n,r),Aa[0]=e,Aa[1]=p,Aa[2]=n,Aa[3]=r;e=Da[0];p=Da[1];n=Da[2];r=Da[3];if(e!==ka[0]||p!==ka[1]||n!==ka[2]||r!==ka[3])a.stencilOpSeparate(e,p,n,r),ka[0]=
e,ka[1]=p,ka[2]=n,ka[3]=r;e=y.scissor_enable;e!==D.scissor_enable&&(e?a.enable(3089):a.disable(3089),D.scissor_enable=e);e=ra[0];p=ra[1];n=ra[2];r=ra[3];if(e!==Ca[0]||p!==Ca[1]||n!==Ca[2]||r!==Ca[3])a.scissor(e,p,n,r),Ca[0]=e,Ca[1]=p,Ca[2]=n,Ca[3]=r;e=Ma[0];p=Ma[1];n=Ma[2];r=Ma[3];if(e!==F[0]||p!==F[1]||n!==F[2]||r!==F[3])a.viewport(e,p,n,r),F[0]=e,F[1]=p,F[2]=n,F[3]=r;D.dirty=!1}if(e=D.profile)d=performance.now(),M.count++;a.useProgram(g.program);Y.setVAO(null);p=ba.location;n=ca[p];n.buffer||a.enableVertexAttribArray(p);
if(n.type!==k.dtype||3!==n.size||n.buffer!==k||!1!==n.normalized||0!==n.offset||0!==n.stride)a.bindBuffer(34962,k.buffer),a.vertexAttribPointer(p,3,k.dtype,!1,0,0),n.type=k.dtype,n.size=3,n.buffer=k,n.normalized=!1,n.offset=0,n.stride=0;a.uniformMatrix4fv(f.location,!1,eb);p=m.call(this,E,c,0);xa(p)&&16===p.length||K.commandRaise(b,I);a.uniformMatrix4fv(z.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Ua[0]=p[0],Ua[1]=p[1],Ua[2]=p[2],Ua[3]=p[3],Ua[4]=p[4],Ua[5]=p[5],Ua[6]=p[6],Ua[7]=p[7],
Ua[8]=p[8],Ua[9]=p[9],Ua[10]=p[10],Ua[11]=p[11],Ua[12]=p[12],Ua[13]=p[13],Ua[14]=p[14],Ua[15]=p[15],Ua));c=G.call(this,E,c,0);xa(c)&&16===c.length||K.commandRaise(B,I);a.uniformMatrix4fv(h.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(v[0]=c[0],v[1]=c[1],v[2]=c[2],v[3]=c[3],v[4]=c[4],v[5]=c[5],v[6]=c[6],v[7]=c[7],v[8]=c[8],v[9]=c[9],v[10]=c[10],v[11]=c[11],v[12]=c[12],v[13]=c[13],v[14]=c[14],v[15]=c[15],v));L&&a.bindBuffer(34963,L.buffer.buffer);c=L.primType;p=L.vertCount-0;0<=p||K.commandRaise(W,
I);p&&(a.drawElements(c,p,L.type,0<<(L.type-5121>>1)),Y.setVAO(null),e&&(M.cpuTime+=performance.now()-d))},scope:function(a,b,e){var f,d,l,h,v,m,q,g,n,t,y,F,C,R,x,z,S,J,ga,B,O,N,eb;if(f=D.profile)d=performance.now(),M.count++;l=c.elements;c.elements=u;h=c.offset;c.offset=0;v=u.vertCount-0;0<=v||K.commandRaise(A,I);m=c.count;c.count=v;q=u.primType;v=c.primitive;c.primitive=q;q=X[3];X[3]=p;g=w.call(this,E,a,e);n=X[5];X[5]=g;t=Z.call(this,E,a,e);g=X[4];X[4]=t;t=r.buffer;r.buffer=k;y=r.divisor;r.divisor=
0;F=r.normalized;r.normalized=!1;C=r.offset;r.offset=0;R=r.size;r.size=0;x=r.state;r.state=1;z=r.stride;r.stride=0;S=r.type;r.type=k.dtype;J=r.w;r.w=0;ga=r.x;r.x=0;B=r.y;r.y=0;O=r.z;r.z=0;N=na.vert;na.vert=2;eb=na.frag;na.frag=1;b(E,a,e);f&&(M.cpuTime+=performance.now()-d);c.elements=l;c.offset=h;c.count=m;c.primitive=v;X[3]=q;X[5]=n;X[4]=g;r.buffer=t;r.divisor=y;r.normalized=F;r.offset=C;r.size=R;r.state=x;r.stride=z;r.type=S;r.w=J;r.x=ga;r.y=B;r.z=O;na.vert=N;na.frag=eb},batch:function(b,c){var d,
v,m;d=t.next;d!==t.cur&&(d?a.bindFramebuffer(36160,d.framebuffer):a.bindFramebuffer(36160,null),t.cur=d);if(D.dirty){var p,g,r;d=y.dither;d!==D.dither&&(d?a.enable(3024):a.disable(3024),D.dither=d);d=y.blend_enable;d!==D.blend_enable&&(d?a.enable(3042):a.disable(3042),D.blend_enable=d);d=fa[0];p=fa[1];g=fa[2];r=fa[3];if(d!==P[0]||p!==P[1]||g!==P[2]||r!==P[3])a.blendColor(d,p,g,r),P[0]=d,P[1]=p,P[2]=g,P[3]=r;d=T[0];p=T[1];if(d!==x[0]||p!==x[1])a.blendEquationSeparate(d,p),x[0]=d,x[1]=p;d=l[0];p=l[1];
g=l[2];r=l[3];if(d!==N[0]||p!==N[1]||g!==N[2]||r!==N[3])a.blendFuncSeparate(d,p,g,r),N[0]=d,N[1]=p,N[2]=g,N[3]=r;d=y.depth_enable;d!==D.depth_enable&&(d?a.enable(2929):a.disable(2929),D.depth_enable=d);d=y.depth_func;d!==D.depth_func&&(a.depthFunc(d),D.depth_func=d);d=oa[0];p=oa[1];if(d!==q[0]||p!==q[1])a.depthRange(d,p),q[0]=d,q[1]=p;d=y.depth_mask;d!==D.depth_mask&&(a.depthMask(d),D.depth_mask=d);d=Q[0];p=Q[1];g=Q[2];r=Q[3];if(d!==ia[0]||p!==ia[1]||g!==ia[2]||r!==ia[3])a.colorMask(d,p,g,r),ia[0]=
d,ia[1]=p,ia[2]=g,ia[3]=r;d=y.cull_enable;d!==D.cull_enable&&(d?a.enable(2884):a.disable(2884),D.cull_enable=d);d=y.cull_face;d!==D.cull_face&&(a.cullFace(d),D.cull_face=d);d=y.frontFace;d!==D.frontFace&&(a.frontFace(d),D.frontFace=d);d=y.lineWidth;d!==D.lineWidth&&(a.lineWidth(d),D.lineWidth=d);d=y.polygonOffset_enable;d!==D.polygonOffset_enable&&(d?a.enable(32823):a.disable(32823),D.polygonOffset_enable=d);d=J[0];p=J[1];if(d!==da[0]||p!==da[1])a.polygonOffset(d,p),da[0]=d,da[1]=p;d=y.sample_alpha;
d!==D.sample_alpha&&(d?a.enable(32926):a.disable(32926),D.sample_alpha=d);d=y.sample_enable;d!==D.sample_enable&&(d?a.enable(32928):a.disable(32928),D.sample_enable=d);d=S[0];p=S[1];if(d!==ma[0]||p!==ma[1])a.sampleCoverage(d,p),ma[0]=d,ma[1]=p;d=y.stencil_enable;d!==D.stencil_enable&&(d?a.enable(2960):a.disable(2960),D.stencil_enable=d);d=y.stencil_mask;d!==D.stencil_mask&&(a.stencilMask(d),D.stencil_mask=d);d=wa[0];p=wa[1];g=wa[2];if(d!==ga[0]||p!==ga[1]||g!==ga[2])a.stencilFunc(d,p,g),ga[0]=d,ga[1]=
p,ga[2]=g;d=qa[0];p=qa[1];g=qa[2];r=qa[3];if(d!==Aa[0]||p!==Aa[1]||g!==Aa[2]||r!==Aa[3])a.stencilOpSeparate(d,p,g,r),Aa[0]=d,Aa[1]=p,Aa[2]=g,Aa[3]=r;d=Da[0];p=Da[1];g=Da[2];r=Da[3];if(d!==ka[0]||p!==ka[1]||g!==ka[2]||r!==ka[3])a.stencilOpSeparate(d,p,g,r),ka[0]=d,ka[1]=p,ka[2]=g,ka[3]=r;d=y.scissor_enable;d!==D.scissor_enable&&(d?a.enable(3089):a.disable(3089),D.scissor_enable=d);d=ra[0];p=ra[1];g=ra[2];r=ra[3];if(d!==Ca[0]||p!==Ca[1]||g!==Ca[2]||r!==Ca[3])a.scissor(d,p,g,r),Ca[0]=d,Ca[1]=p,Ca[2]=
g,Ca[3]=r;d=Ma[0];p=Ma[1];g=Ma[2];r=Ma[3];if(d!==F[0]||p!==F[1]||g!==F[2]||r!==F[3])a.viewport(d,p,g,r),F[0]=d,F[1]=p,F[2]=g,F[3]=r;D.dirty=!1}if(d=D.profile)v=performance.now(),M.count+=c;a.useProgram(U.program);Y.setVAO(null);p=ba.location;g=ca[p];g.buffer||a.enableVertexAttribArray(p);if(g.type!==k.dtype||3!==g.size||g.buffer!==k||!1!==g.normalized||0!==g.offset||0!==g.stride)a.bindBuffer(34962,k.buffer),a.vertexAttribPointer(p,3,k.dtype,!1,0,0),g.type=k.dtype,g.size=3,g.buffer=k,g.normalized=
!1,g.offset=0,g.stride=0;a.uniformMatrix4fv(f.location,!1,R);p=n.call(this,E,void 0,m);xa(p)&&16===p.length||K.commandRaise(O,I);a.uniformMatrix4fv(z.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(ta[0]=p[0],ta[1]=p[1],ta[2]=p[2],ta[3]=p[3],ta[4]=p[4],ta[5]=p[5],ta[6]=p[6],ta[7]=p[7],ta[8]=p[8],ta[9]=p[9],ta[10]=p[10],ta[11]=p[11],ta[12]=p[12],ta[13]=p[13],ta[14]=p[14],ta[15]=p[15],ta));m=ja.call(this,E,void 0,m);xa(m)&&16===m.length||K.commandRaise(e,I);a.uniformMatrix4fv(h.location,
!1,Array.isArray(m)||m instanceof Float32Array?m:(va[0]=m[0],va[1]=m[1],va[2]=m[2],va[3]=m[3],va[4]=m[4],va[5]=m[5],va[6]=m[6],va[7]=m[7],va[8]=m[8],va[9]=m[9],va[10]=m[10],va[11]=m[11],va[12]=m[12],va[13]=m[13],va[14]=m[14],va[15]=m[15],va));C&&a.bindBuffer(34963,C.buffer.buffer);p=C.primType;g=C.vertCount-0;0<=g||K.commandRaise(V,I);for(m=0;m<c;++m)g&&a.drawElements(p,g,C.type,0<<(C.type-5121>>1));Y.setVAO(null);d&&(M.cpuTime+=performance.now()-v)}}},$20:function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,
r,U,n,O,ja){var e,C,V,f,ba,h,z,ca,E,D,c,t,a,X,y,na,ia,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca;e=d.context;C=d.current;V=d.framebuffer;f=d.gl;ba=d.next;h=d.shader;z=d.uniforms;ca=d.vao;E=ba.blend_color;D=C.blend_color;c=ba.blend_equation;t=C.blend_equation;a=ba.blend_func;X=C.blend_func;y=ba.colorMask;na=C.colorMask;ia=ba.depth_range;Y=C.depth_range;fa=ba.polygonOffset_offset;P=C.polygonOffset_offset;T=ba.sample_coverage;x=C.sample_coverage;l=ba.scissor_box;N=C.scissor_box;Q=ba.stencil_func;za=C.stencil_func;
oa=ba.stencil_opBack;q=C.stencil_opBack;J=ba.stencil_opFront;da=C.stencil_opFront;S=ba.viewport;ma=C.viewport;ra={};Ca={};return{draw:function(d){var n,r,u,z,A,w,F,O,L,v,p,R,K;n=e.center;r=e.distance;u=e.eye;z=e.phi;A=e.projection;w=m.call(this,e,d,0);F=e.theta;O=e.up;L=e.view;e.center=g;e.distance=2.302585092994046;e.eye=k;e.phi=0;e.projection=w;e.theta=0;e.up=b;e.view=G;w=V.next;w!==V.cur&&(w?f.bindFramebuffer(36160,w.framebuffer):f.bindFramebuffer(36160,null),V.cur=w);if(C.dirty){w=ba.dither;w!==
C.dither&&(w?f.enable(3024):f.disable(3024),C.dither=w);w=ba.blend_enable;w!==C.blend_enable&&(w?f.enable(3042):f.disable(3042),C.blend_enable=w);w=E[0];p=E[1];R=E[2];K=E[3];if(w!==D[0]||p!==D[1]||R!==D[2]||K!==D[3])f.blendColor(w,p,R,K),D[0]=w,D[1]=p,D[2]=R,D[3]=K;w=c[0];p=c[1];if(w!==t[0]||p!==t[1])f.blendEquationSeparate(w,p),t[0]=w,t[1]=p;w=a[0];p=a[1];R=a[2];K=a[3];if(w!==X[0]||p!==X[1]||R!==X[2]||K!==X[3])f.blendFuncSeparate(w,p,R,K),X[0]=w,X[1]=p,X[2]=R,X[3]=K;w=ba.depth_enable;w!==C.depth_enable&&
(w?f.enable(2929):f.disable(2929),C.depth_enable=w);w=ba.depth_func;w!==C.depth_func&&(f.depthFunc(w),C.depth_func=w);w=ia[0];p=ia[1];if(w!==Y[0]||p!==Y[1])f.depthRange(w,p),Y[0]=w,Y[1]=p;w=ba.depth_mask;w!==C.depth_mask&&(f.depthMask(w),C.depth_mask=w);w=y[0];p=y[1];R=y[2];K=y[3];if(w!==na[0]||p!==na[1]||R!==na[2]||K!==na[3])f.colorMask(w,p,R,K),na[0]=w,na[1]=p,na[2]=R,na[3]=K;w=ba.cull_enable;w!==C.cull_enable&&(w?f.enable(2884):f.disable(2884),C.cull_enable=w);w=ba.cull_face;w!==C.cull_face&&(f.cullFace(w),
C.cull_face=w);w=ba.frontFace;w!==C.frontFace&&(f.frontFace(w),C.frontFace=w);w=ba.lineWidth;w!==C.lineWidth&&(f.lineWidth(w),C.lineWidth=w);w=ba.polygonOffset_enable;w!==C.polygonOffset_enable&&(w?f.enable(32823):f.disable(32823),C.polygonOffset_enable=w);w=fa[0];p=fa[1];if(w!==P[0]||p!==P[1])f.polygonOffset(w,p),P[0]=w,P[1]=p;w=ba.sample_alpha;w!==C.sample_alpha&&(w?f.enable(32926):f.disable(32926),C.sample_alpha=w);w=ba.sample_enable;w!==C.sample_enable&&(w?f.enable(32928):f.disable(32928),C.sample_enable=
w);w=T[0];p=T[1];if(w!==x[0]||p!==x[1])f.sampleCoverage(w,p),x[0]=w,x[1]=p;w=ba.stencil_enable;w!==C.stencil_enable&&(w?f.enable(2960):f.disable(2960),C.stencil_enable=w);w=ba.stencil_mask;w!==C.stencil_mask&&(f.stencilMask(w),C.stencil_mask=w);w=Q[0];p=Q[1];R=Q[2];if(w!==za[0]||p!==za[1]||R!==za[2])f.stencilFunc(w,p,R),za[0]=w,za[1]=p,za[2]=R;w=J[0];p=J[1];R=J[2];K=J[3];if(w!==da[0]||p!==da[1]||R!==da[2]||K!==da[3])f.stencilOpSeparate(w,p,R,K),da[0]=w,da[1]=p,da[2]=R,da[3]=K;w=oa[0];p=oa[1];R=oa[2];
K=oa[3];if(w!==q[0]||p!==q[1]||R!==q[2]||K!==q[3])f.stencilOpSeparate(w,p,R,K),q[0]=w,q[1]=p,q[2]=R,q[3]=K;w=ba.scissor_enable;w!==C.scissor_enable&&(w?f.enable(3089):f.disable(3089),C.scissor_enable=w);w=l[0];p=l[1];R=l[2];K=l[3];if(w!==N[0]||p!==N[1]||R!==N[2]||K!==N[3])f.scissor(w,p,R,K),N[0]=w,N[1]=p,N[2]=R,N[3]=K;w=S[0];p=S[1];R=S[2];K=S[3];if(w!==ma[0]||p!==ma[1]||R!==ma[2]||K!==ma[3])f.viewport(w,p,R,K),ma[0]=w,ma[1]=p,ma[2]=R,ma[3]=K;C.dirty=!1}if(w=C.profile)v=performance.now(),M.count++;
p=h.program(h.vert,h.frag,I);f.useProgram(p.program);ca.setVAO(null);R=p.id;(K=ra[R])||(K=ra[R]=B(p));K.call(this,d);ca.setVAO(null);e.center=n;e.distance=r;e.eye=u;e.phi=z;e.projection=A;e.theta=F;e.up=O;e.view=L;w&&(M.cpuTime+=performance.now()-v)},scope:function(a,b,c){var f,d,k,l,h,m,q,v,p,g,n,t,r,y,x,H,D,E,S;f=e.center;d=e.distance;k=e.eye;l=e.phi;h=e.projection;m=u.call(this,e,a,c);q=e.theta;v=e.up;p=e.view;e.center=L;e.distance=2.302585092994046;e.eye=W;e.phi=0;e.projection=m;e.theta=0;e.up=
A;e.view=w;if(m=C.profile)g=performance.now(),M.count++;n=e.center;t=z[1];z[1]=n;r=e.distance;n=z[2];z[2]=r;y=e.eye;r=z[3];z[3]=y;x=e.phi;y=z[4];z[4]=x;H=e.projection;x=z[5];z[5]=H;D=e.theta;H=z[6];z[6]=D;E=e.up;D=z[7];z[7]=E;E=e.view;S=z[8];z[8]=E;b(e,a,c);e.center=f;e.distance=d;e.eye=k;e.phi=l;e.projection=h;e.theta=q;e.up=v;e.view=p;m&&(M.cpuTime+=performance.now()-g);z[1]=t;z[2]=n;z[3]=r;z[4]=y;z[5]=x;z[6]=H;z[7]=D;z[8]=S},batch:function(b,d){var k,m,g,u,z,F,w,A,v,p,R,B,K;k=e.center;m=e.distance;
g=e.eye;u=e.phi;z=e.projection;F=U.call(this,e,b,0);w=e.theta;A=e.up;v=e.view;e.center=Z;e.distance=2.302585092994046;e.eye=r;e.phi=0;e.projection=F;e.theta=0;e.up=n;e.view=O;F=V.next;F!==V.cur&&(F?f.bindFramebuffer(36160,F.framebuffer):f.bindFramebuffer(36160,null),V.cur=F);if(C.dirty){F=ba.dither;F!==C.dither&&(F?f.enable(3024):f.disable(3024),C.dither=F);F=ba.blend_enable;F!==C.blend_enable&&(F?f.enable(3042):f.disable(3042),C.blend_enable=F);F=E[0];R=E[1];B=E[2];K=E[3];if(F!==D[0]||R!==D[1]||
B!==D[2]||K!==D[3])f.blendColor(F,R,B,K),D[0]=F,D[1]=R,D[2]=B,D[3]=K;F=c[0];R=c[1];if(F!==t[0]||R!==t[1])f.blendEquationSeparate(F,R),t[0]=F,t[1]=R;F=a[0];R=a[1];B=a[2];K=a[3];if(F!==X[0]||R!==X[1]||B!==X[2]||K!==X[3])f.blendFuncSeparate(F,R,B,K),X[0]=F,X[1]=R,X[2]=B,X[3]=K;F=ba.depth_enable;F!==C.depth_enable&&(F?f.enable(2929):f.disable(2929),C.depth_enable=F);F=ba.depth_func;F!==C.depth_func&&(f.depthFunc(F),C.depth_func=F);F=ia[0];R=ia[1];if(F!==Y[0]||R!==Y[1])f.depthRange(F,R),Y[0]=F,Y[1]=R;
F=ba.depth_mask;F!==C.depth_mask&&(f.depthMask(F),C.depth_mask=F);F=y[0];R=y[1];B=y[2];K=y[3];if(F!==na[0]||R!==na[1]||B!==na[2]||K!==na[3])f.colorMask(F,R,B,K),na[0]=F,na[1]=R,na[2]=B,na[3]=K;F=ba.cull_enable;F!==C.cull_enable&&(F?f.enable(2884):f.disable(2884),C.cull_enable=F);F=ba.cull_face;F!==C.cull_face&&(f.cullFace(F),C.cull_face=F);F=ba.frontFace;F!==C.frontFace&&(f.frontFace(F),C.frontFace=F);F=ba.lineWidth;F!==C.lineWidth&&(f.lineWidth(F),C.lineWidth=F);F=ba.polygonOffset_enable;F!==C.polygonOffset_enable&&
(F?f.enable(32823):f.disable(32823),C.polygonOffset_enable=F);F=fa[0];R=fa[1];if(F!==P[0]||R!==P[1])f.polygonOffset(F,R),P[0]=F,P[1]=R;F=ba.sample_alpha;F!==C.sample_alpha&&(F?f.enable(32926):f.disable(32926),C.sample_alpha=F);F=ba.sample_enable;F!==C.sample_enable&&(F?f.enable(32928):f.disable(32928),C.sample_enable=F);F=T[0];R=T[1];if(F!==x[0]||R!==x[1])f.sampleCoverage(F,R),x[0]=F,x[1]=R;F=ba.stencil_enable;F!==C.stencil_enable&&(F?f.enable(2960):f.disable(2960),C.stencil_enable=F);F=ba.stencil_mask;
F!==C.stencil_mask&&(f.stencilMask(F),C.stencil_mask=F);F=Q[0];R=Q[1];B=Q[2];if(F!==za[0]||R!==za[1]||B!==za[2])f.stencilFunc(F,R,B),za[0]=F,za[1]=R,za[2]=B;F=J[0];R=J[1];B=J[2];K=J[3];if(F!==da[0]||R!==da[1]||B!==da[2]||K!==da[3])f.stencilOpSeparate(F,R,B,K),da[0]=F,da[1]=R,da[2]=B,da[3]=K;F=oa[0];R=oa[1];B=oa[2];K=oa[3];if(F!==q[0]||R!==q[1]||B!==q[2]||K!==q[3])f.stencilOpSeparate(F,R,B,K),q[0]=F,q[1]=R,q[2]=B,q[3]=K;F=ba.scissor_enable;F!==C.scissor_enable&&(F?f.enable(3089):f.disable(3089),C.scissor_enable=
F);F=l[0];R=l[1];B=l[2];K=l[3];if(F!==N[0]||R!==N[1]||B!==N[2]||K!==N[3])f.scissor(F,R,B,K),N[0]=F,N[1]=R,N[2]=B,N[3]=K;F=S[0];R=S[1];B=S[2];K=S[3];if(F!==ma[0]||R!==ma[1]||B!==ma[2]||K!==ma[3])f.viewport(F,R,B,K),ma[0]=F,ma[1]=R,ma[2]=B,ma[3]=K;C.dirty=!1}if(F=C.profile)p=performance.now(),M.count+=d;R=h.program(h.vert,h.frag,I);f.useProgram(R.program);ca.setVAO(null);B=R.id;(K=Ca[B])||(K=Ca[B]=ja(R));K.call(this,b,d);ca.setVAO(null);e.center=k;e.distance=m;e.eye=g;e.phi=u;e.projection=z;e.theta=
w;e.up=A;e.view=v;F&&(M.cpuTime+=performance.now()-p)}}},"$27,position,projection,tex,uv,view":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t){var a,X,y,na,ia,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F,eb,Ua,v,p,R,ta,va,Fa,Hb;a=d.attributes;X=d.context;y=d.current;na=d.draw;ia=d.framebuffer;Y=d.gl;fa=d.isArrayLike;P=d.next;T=d.shader;x=d.uniforms;l=d.vao;N=P.blend_color;Q=y.blend_color;za=P.blend_equation;oa=y.blend_equation;q=P.blend_func;J=y.blend_func;
da=P.colorMask;S=y.colorMask;ma=P.depth_range;ra=y.depth_range;Ca=P.polygonOffset_offset;wa=y.polygonOffset_offset;ga=P.sample_coverage;Da=y.sample_coverage;ka=P.scissor_box;qa=y.scissor_box;Aa=P.stencil_func;Ma=y.stencil_func;F=P.stencil_opBack;eb=y.stencil_opBack;Ua=P.stencil_opFront;v=y.stencil_opFront;p=P.viewport;R=y.viewport;ta=new Float32Array(16);va=new Float32Array(16);Fa=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(e){var f,d,h,n;f=ia.next;f!==ia.cur&&(f?Y.bindFramebuffer(36160,
f.framebuffer):Y.bindFramebuffer(36160,null),ia.cur=f);if(y.dirty){var r;f=P.dither;f!==y.dither&&(f?Y.enable(3024):Y.disable(3024),y.dither=f);f=P.blend_enable;f!==y.blend_enable&&(f?Y.enable(3042):Y.disable(3042),y.blend_enable=f);f=N[0];h=N[1];n=N[2];r=N[3];if(f!==Q[0]||h!==Q[1]||n!==Q[2]||r!==Q[3])Y.blendColor(f,h,n,r),Q[0]=f,Q[1]=h,Q[2]=n,Q[3]=r;f=za[0];h=za[1];if(f!==oa[0]||h!==oa[1])Y.blendEquationSeparate(f,h),oa[0]=f,oa[1]=h;f=q[0];h=q[1];n=q[2];r=q[3];if(f!==J[0]||h!==J[1]||n!==J[2]||r!==
J[3])Y.blendFuncSeparate(f,h,n,r),J[0]=f,J[1]=h,J[2]=n,J[3]=r;f=P.depth_enable;f!==y.depth_enable&&(f?Y.enable(2929):Y.disable(2929),y.depth_enable=f);f=P.depth_func;f!==y.depth_func&&(Y.depthFunc(f),y.depth_func=f);f=ma[0];h=ma[1];if(f!==ra[0]||h!==ra[1])Y.depthRange(f,h),ra[0]=f,ra[1]=h;f=P.depth_mask;f!==y.depth_mask&&(Y.depthMask(f),y.depth_mask=f);f=da[0];h=da[1];n=da[2];r=da[3];if(f!==S[0]||h!==S[1]||n!==S[2]||r!==S[3])Y.colorMask(f,h,n,r),S[0]=f,S[1]=h,S[2]=n,S[3]=r;f=P.cull_enable;f!==y.cull_enable&&
(f?Y.enable(2884):Y.disable(2884),y.cull_enable=f);f=P.cull_face;f!==y.cull_face&&(Y.cullFace(f),y.cull_face=f);f=P.frontFace;f!==y.frontFace&&(Y.frontFace(f),y.frontFace=f);f=P.lineWidth;f!==y.lineWidth&&(Y.lineWidth(f),y.lineWidth=f);f=P.polygonOffset_enable;f!==y.polygonOffset_enable&&(f?Y.enable(32823):Y.disable(32823),y.polygonOffset_enable=f);f=Ca[0];h=Ca[1];if(f!==wa[0]||h!==wa[1])Y.polygonOffset(f,h),wa[0]=f,wa[1]=h;f=P.sample_alpha;f!==y.sample_alpha&&(f?Y.enable(32926):Y.disable(32926),
y.sample_alpha=f);f=P.sample_enable;f!==y.sample_enable&&(f?Y.enable(32928):Y.disable(32928),y.sample_enable=f);f=ga[0];h=ga[1];if(f!==Da[0]||h!==Da[1])Y.sampleCoverage(f,h),Da[0]=f,Da[1]=h;f=P.stencil_enable;f!==y.stencil_enable&&(f?Y.enable(2960):Y.disable(2960),y.stencil_enable=f);f=P.stencil_mask;f!==y.stencil_mask&&(Y.stencilMask(f),y.stencil_mask=f);f=Aa[0];h=Aa[1];n=Aa[2];if(f!==Ma[0]||h!==Ma[1]||n!==Ma[2])Y.stencilFunc(f,h,n),Ma[0]=f,Ma[1]=h,Ma[2]=n;f=Ua[0];h=Ua[1];n=Ua[2];r=Ua[3];if(f!==
v[0]||h!==v[1]||n!==v[2]||r!==v[3])Y.stencilOpSeparate(f,h,n,r),v[0]=f,v[1]=h,v[2]=n,v[3]=r;f=F[0];h=F[1];n=F[2];r=F[3];if(f!==eb[0]||h!==eb[1]||n!==eb[2]||r!==eb[3])Y.stencilOpSeparate(f,h,n,r),eb[0]=f,eb[1]=h,eb[2]=n,eb[3]=r;f=P.scissor_enable;f!==y.scissor_enable&&(f?Y.enable(3089):Y.disable(3089),y.scissor_enable=f);f=ka[0];h=ka[1];n=ka[2];r=ka[3];if(f!==qa[0]||h!==qa[1]||n!==qa[2]||r!==qa[3])Y.scissor(f,h,n,r),qa[0]=f,qa[1]=h,qa[2]=n,qa[3]=r;f=p[0];h=p[1];n=p[2];r=p[3];if(f!==R[0]||h!==R[1]||
n!==R[2]||r!==R[3])Y.viewport(f,h,n,r),R[0]=f,R[1]=h,R[2]=n,R[3]=r;y.dirty=!1}if(f=y.profile)d=performance.now(),M.count++;Y.useProgram(g.program);l.setVAO(null);h=ca.location;n=a[h];n.buffer||Y.enableVertexAttribArray(h);if(n.type!==k.dtype||3!==n.size||n.buffer!==k||!1!==n.normalized||0!==n.offset||0!==n.stride)Y.bindBuffer(34962,k.buffer),Y.vertexAttribPointer(h,3,k.dtype,!1,0,0),n.type=k.dtype,n.size=3,n.buffer=k,n.normalized=!1,n.offset=0,n.stride=0;h=c.location;n=a[h];n.buffer||Y.enableVertexAttribArray(h);
if(n.type!==m.dtype||2!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||0!==n.stride)Y.bindBuffer(34962,m.buffer),Y.vertexAttribPointer(h,2,m.dtype,!1,0,0),n.type=m.dtype,n.size=2,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;h=b.call(this,X,e,0);fa(h)&&16===h.length||K.commandRaise(G,I);Y.uniformMatrix4fv(E.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(ta[0]=h[0],ta[1]=h[1],ta[2]=h[2],ta[3]=h[3],ta[4]=h[4],ta[5]=h[5],ta[6]=h[6],ta[7]=h[7],ta[8]=h[8],ta[9]=h[9],ta[10]=h[10],
ta[11]=h[11],ta[12]=h[12],ta[13]=h[13],ta[14]=h[14],ta[15]=h[15],ta));h=B.call(this,X,e,0);fa(h)&&16===h.length||K.commandRaise(L,I);Y.uniformMatrix4fv(t.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(va[0]=h[0],va[1]=h[1],va[2]=h[2],va[3]=h[3],va[4]=h[4],va[5]=h[5],va[6]=h[6],va[7]=h[7],va[8]=h[8],va[9]=h[9],va[10]=h[10],va[11]=h[11],va[12]=h[12],va[13]=h[13],va[14]=h[14],va[15]=h[15],va));(e=e.texture)&&"framebuffer"===e._reglType&&(e=e.color[0]);"function"===typeof e&&"texture2d"===
e._reglType||K.commandRaise(W,I);e=e._texture;Y.uniform1i(D.location,e.bind());u&&Y.bindBuffer(34963,u.buffer.buffer);h=u.primType;n=u.vertCount-0;0<=n||K.commandRaise(A,I);n&&(Y.drawElements(h,n,u.type,0<<(u.type-5121>>1)),l.setVAO(null),f&&(M.cpuTime+=performance.now()-d),e.unbind())},scope:function(a,b,c){var e,f,d,h,l,p,v,q,g,t,u,F,C,R,z,D,E,A,S,B,J,ga,N,G,eb,P,Q,L,wa,V,ra,W,Y,ka,ba;if(e=y.profile)f=performance.now(),M.count++;d=na.elements;na.elements=w;h=na.offset;na.offset=0;l=w.vertCount-
0;0<=l||K.commandRaise(Z,I);p=na.count;na.count=l;v=w.primType;l=na.primitive;na.primitive=v;q=r.call(this,X,a,c);v=x[3];x[3]=q;g=a.texture;q=x[5];x[5]=g;t=U.call(this,X,a,c);g=x[4];x[4]=t;t=n.buffer;n.buffer=k;u=n.divisor;n.divisor=0;F=n.normalized;n.normalized=!1;C=n.offset;n.offset=0;R=n.size;n.size=0;z=n.state;n.state=1;D=n.stride;n.stride=0;E=n.type;n.type=k.dtype;A=n.w;n.w=0;S=n.x;n.x=0;B=n.y;n.y=0;J=n.z;n.z=0;ga=O.buffer;O.buffer=m;N=O.divisor;O.divisor=0;G=O.normalized;O.normalized=!1;eb=
O.offset;O.offset=0;P=O.size;O.size=0;Q=O.state;O.state=1;L=O.stride;O.stride=0;wa=O.type;O.type=m.dtype;V=O.w;O.w=0;ra=O.x;O.x=0;W=O.y;O.y=0;Y=O.z;O.z=0;ka=T.vert;T.vert=2;ba=T.frag;T.frag=1;b(X,a,c);e&&(M.cpuTime+=performance.now()-f);na.elements=d;na.offset=h;na.count=p;na.primitive=l;x[3]=v;x[5]=q;x[4]=g;n.buffer=t;n.divisor=u;n.normalized=F;n.offset=C;n.size=R;n.state=z;n.stride=D;n.type=E;n.w=A;n.x=S;n.y=B;n.z=J;O.buffer=ga;O.divisor=N;O.normalized=G;O.offset=eb;O.size=P;O.state=Q;O.stride=
L;O.type=wa;O.w=V;O.x=ra;O.y=W;O.z=Y;T.vert=ka;T.frag=ba},batch:function(b,d){var g,n,r,u;g=ia.next;g!==ia.cur&&(g?Y.bindFramebuffer(36160,g.framebuffer):Y.bindFramebuffer(36160,null),ia.cur=g);if(y.dirty){var x,w,A;g=P.dither;g!==y.dither&&(g?Y.enable(3024):Y.disable(3024),y.dither=g);g=P.blend_enable;g!==y.blend_enable&&(g?Y.enable(3042):Y.disable(3042),y.blend_enable=g);g=N[0];x=N[1];w=N[2];A=N[3];if(g!==Q[0]||x!==Q[1]||w!==Q[2]||A!==Q[3])Y.blendColor(g,x,w,A),Q[0]=g,Q[1]=x,Q[2]=w,Q[3]=A;g=za[0];
x=za[1];if(g!==oa[0]||x!==oa[1])Y.blendEquationSeparate(g,x),oa[0]=g,oa[1]=x;g=q[0];x=q[1];w=q[2];A=q[3];if(g!==J[0]||x!==J[1]||w!==J[2]||A!==J[3])Y.blendFuncSeparate(g,x,w,A),J[0]=g,J[1]=x,J[2]=w,J[3]=A;g=P.depth_enable;g!==y.depth_enable&&(g?Y.enable(2929):Y.disable(2929),y.depth_enable=g);g=P.depth_func;g!==y.depth_func&&(Y.depthFunc(g),y.depth_func=g);g=ma[0];x=ma[1];if(g!==ra[0]||x!==ra[1])Y.depthRange(g,x),ra[0]=g,ra[1]=x;g=P.depth_mask;g!==y.depth_mask&&(Y.depthMask(g),y.depth_mask=g);g=da[0];
x=da[1];w=da[2];A=da[3];if(g!==S[0]||x!==S[1]||w!==S[2]||A!==S[3])Y.colorMask(g,x,w,A),S[0]=g,S[1]=x,S[2]=w,S[3]=A;g=P.cull_enable;g!==y.cull_enable&&(g?Y.enable(2884):Y.disable(2884),y.cull_enable=g);g=P.cull_face;g!==y.cull_face&&(Y.cullFace(g),y.cull_face=g);g=P.frontFace;g!==y.frontFace&&(Y.frontFace(g),y.frontFace=g);g=P.lineWidth;g!==y.lineWidth&&(Y.lineWidth(g),y.lineWidth=g);g=P.polygonOffset_enable;g!==y.polygonOffset_enable&&(g?Y.enable(32823):Y.disable(32823),y.polygonOffset_enable=g);
g=Ca[0];x=Ca[1];if(g!==wa[0]||x!==wa[1])Y.polygonOffset(g,x),wa[0]=g,wa[1]=x;g=P.sample_alpha;g!==y.sample_alpha&&(g?Y.enable(32926):Y.disable(32926),y.sample_alpha=g);g=P.sample_enable;g!==y.sample_enable&&(g?Y.enable(32928):Y.disable(32928),y.sample_enable=g);g=ga[0];x=ga[1];if(g!==Da[0]||x!==Da[1])Y.sampleCoverage(g,x),Da[0]=g,Da[1]=x;g=P.stencil_enable;g!==y.stencil_enable&&(g?Y.enable(2960):Y.disable(2960),y.stencil_enable=g);g=P.stencil_mask;g!==y.stencil_mask&&(Y.stencilMask(g),y.stencil_mask=
g);g=Aa[0];x=Aa[1];w=Aa[2];if(g!==Ma[0]||x!==Ma[1]||w!==Ma[2])Y.stencilFunc(g,x,w),Ma[0]=g,Ma[1]=x,Ma[2]=w;g=Ua[0];x=Ua[1];w=Ua[2];A=Ua[3];if(g!==v[0]||x!==v[1]||w!==v[2]||A!==v[3])Y.stencilOpSeparate(g,x,w,A),v[0]=g,v[1]=x,v[2]=w,v[3]=A;g=F[0];x=F[1];w=F[2];A=F[3];if(g!==eb[0]||x!==eb[1]||w!==eb[2]||A!==eb[3])Y.stencilOpSeparate(g,x,w,A),eb[0]=g,eb[1]=x,eb[2]=w,eb[3]=A;g=P.scissor_enable;g!==y.scissor_enable&&(g?Y.enable(3089):Y.disable(3089),y.scissor_enable=g);g=ka[0];x=ka[1];w=ka[2];A=ka[3];if(g!==
qa[0]||x!==qa[1]||w!==qa[2]||A!==qa[3])Y.scissor(g,x,w,A),qa[0]=g,qa[1]=x,qa[2]=w,qa[3]=A;g=p[0];x=p[1];w=p[2];A=p[3];if(g!==R[0]||x!==R[1]||w!==R[2]||A!==R[3])Y.viewport(g,x,w,A),R[0]=g,R[1]=x,R[2]=w,R[3]=A;y.dirty=!1}if(g=y.profile)n=performance.now(),M.count+=d;Y.useProgram(ja.program);l.setVAO(null);x=ca.location;w=a[x];w.buffer||Y.enableVertexAttribArray(x);if(w.type!==k.dtype||3!==w.size||w.buffer!==k||!1!==w.normalized||0!==w.offset||0!==w.stride)Y.bindBuffer(34962,k.buffer),Y.vertexAttribPointer(x,
3,k.dtype,!1,0,0),w.type=k.dtype,w.size=3,w.buffer=k,w.normalized=!1,w.offset=0,w.stride=0;x=c.location;w=a[x];w.buffer||Y.enableVertexAttribArray(x);if(w.type!==m.dtype||2!==w.size||w.buffer!==m||!1!==w.normalized||0!==w.offset||0!==w.stride)Y.bindBuffer(34962,m.buffer),Y.vertexAttribPointer(x,2,m.dtype,!1,0,0),w.type=m.dtype,w.size=2,w.buffer=m,w.normalized=!1,w.offset=0,w.stride=0;x=e.call(this,X,u,r);fa(x)&&16===x.length||K.commandRaise(C,I);Y.uniformMatrix4fv(E.location,!1,Array.isArray(x)||
x instanceof Float32Array?x:(Fa[0]=x[0],Fa[1]=x[1],Fa[2]=x[2],Fa[3]=x[3],Fa[4]=x[4],Fa[5]=x[5],Fa[6]=x[6],Fa[7]=x[7],Fa[8]=x[8],Fa[9]=x[9],Fa[10]=x[10],Fa[11]=x[11],Fa[12]=x[12],Fa[13]=x[13],Fa[14]=x[14],Fa[15]=x[15],Fa));r=V.call(this,X,u,r);fa(r)&&16===r.length||K.commandRaise(f,I);Y.uniformMatrix4fv(t.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Hb[0]=r[0],Hb[1]=r[1],Hb[2]=r[2],Hb[3]=r[3],Hb[4]=r[4],Hb[5]=r[5],Hb[6]=r[6],Hb[7]=r[7],Hb[8]=r[8],Hb[9]=r[9],Hb[10]=r[10],Hb[11]=r[11],
Hb[12]=r[12],Hb[13]=r[13],Hb[14]=r[14],Hb[15]=r[15],Hb));h&&Y.bindBuffer(34963,h.buffer.buffer);x=h.primType;w=h.vertCount-0;0<=w||K.commandRaise(z,I);for(r=0;r<d;++r)u=b[r],(u=u.texture)&&"framebuffer"===u._reglType&&(u=u.color[0]),"function"===typeof u&&"texture2d"===u._reglType||K.commandRaise(ba,I),u=u._texture,Y.uniform1i(D.location,u.bind()),w&&(Y.drawElements(x,w,h.type,0<<(h.type-5121>>1)),u.unbind());l.setVAO(null);g&&(M.cpuTime+=performance.now()-n)}}},"$19,normal,position,projection,view":function(d,
K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,ja,e,C,V){var f,ba,h,z,ca,E,D,c,t,a,X,y,na,ia,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa,Ma,F;f=d.attributes;ba=d.context;h=d.current;z=d.draw;ca=d.framebuffer;E=d.gl;D=d.isArrayLike;c=d.next;t=d.shader;a=d.uniforms;X=d.vao;y=c.blend_color;na=h.blend_color;ia=c.blend_equation;Y=h.blend_equation;fa=c.blend_func;P=h.blend_func;T=c.colorMask;x=h.colorMask;l=c.depth_range;N=h.depth_range;Q=c.polygonOffset_offset;za=h.polygonOffset_offset;oa=c.sample_coverage;
q=h.sample_coverage;J=c.scissor_box;da=h.scissor_box;S=c.stencil_func;ma=h.stencil_func;ra=c.stencil_opBack;Ca=h.stencil_opBack;wa=c.stencil_opFront;ga=h.stencil_opFront;Da=c.viewport;ka=h.viewport;qa=new Float32Array(16);Aa=new Float32Array(16);Ma=new Float32Array(16);F=new Float32Array(16);return{draw:function(d){var n,v,p;d=ca.next;d!==ca.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),ca.cur=d);if(h.dirty){var r;d=c.dither;d!==h.dither&&(d?E.enable(3024):E.disable(3024),
h.dither=d);d=c.blend_enable;d!==h.blend_enable&&(d?E.enable(3042):E.disable(3042),h.blend_enable=d);d=y[0];v=y[1];p=y[2];r=y[3];if(d!==na[0]||v!==na[1]||p!==na[2]||r!==na[3])E.blendColor(d,v,p,r),na[0]=d,na[1]=v,na[2]=p,na[3]=r;d=ia[0];v=ia[1];if(d!==Y[0]||v!==Y[1])E.blendEquationSeparate(d,v),Y[0]=d,Y[1]=v;d=fa[0];v=fa[1];p=fa[2];r=fa[3];if(d!==P[0]||v!==P[1]||p!==P[2]||r!==P[3])E.blendFuncSeparate(d,v,p,r),P[0]=d,P[1]=v,P[2]=p,P[3]=r;d=c.depth_enable;d!==h.depth_enable&&(d?E.enable(2929):E.disable(2929),
h.depth_enable=d);d=c.depth_func;d!==h.depth_func&&(E.depthFunc(d),h.depth_func=d);d=l[0];v=l[1];if(d!==N[0]||v!==N[1])E.depthRange(d,v),N[0]=d,N[1]=v;d=c.depth_mask;d!==h.depth_mask&&(E.depthMask(d),h.depth_mask=d);d=T[0];v=T[1];p=T[2];r=T[3];if(d!==x[0]||v!==x[1]||p!==x[2]||r!==x[3])E.colorMask(d,v,p,r),x[0]=d,x[1]=v,x[2]=p,x[3]=r;d=c.cull_enable;d!==h.cull_enable&&(d?E.enable(2884):E.disable(2884),h.cull_enable=d);d=c.cull_face;d!==h.cull_face&&(E.cullFace(d),h.cull_face=d);d=c.frontFace;d!==h.frontFace&&
(E.frontFace(d),h.frontFace=d);d=c.lineWidth;d!==h.lineWidth&&(E.lineWidth(d),h.lineWidth=d);d=c.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?E.enable(32823):E.disable(32823),h.polygonOffset_enable=d);d=Q[0];v=Q[1];if(d!==za[0]||v!==za[1])E.polygonOffset(d,v),za[0]=d,za[1]=v;d=c.sample_alpha;d!==h.sample_alpha&&(d?E.enable(32926):E.disable(32926),h.sample_alpha=d);d=c.sample_enable;d!==h.sample_enable&&(d?E.enable(32928):E.disable(32928),h.sample_enable=d);d=oa[0];v=oa[1];if(d!==q[0]||v!==
q[1])E.sampleCoverage(d,v),q[0]=d,q[1]=v;d=c.stencil_enable;d!==h.stencil_enable&&(d?E.enable(2960):E.disable(2960),h.stencil_enable=d);d=c.stencil_mask;d!==h.stencil_mask&&(E.stencilMask(d),h.stencil_mask=d);d=S[0];v=S[1];p=S[2];if(d!==ma[0]||v!==ma[1]||p!==ma[2])E.stencilFunc(d,v,p),ma[0]=d,ma[1]=v,ma[2]=p;d=wa[0];v=wa[1];p=wa[2];r=wa[3];if(d!==ga[0]||v!==ga[1]||p!==ga[2]||r!==ga[3])E.stencilOpSeparate(d,v,p,r),ga[0]=d,ga[1]=v,ga[2]=p,ga[3]=r;d=ra[0];v=ra[1];p=ra[2];r=ra[3];if(d!==Ca[0]||v!==Ca[1]||
p!==Ca[2]||r!==Ca[3])E.stencilOpSeparate(d,v,p,r),Ca[0]=d,Ca[1]=v,Ca[2]=p,Ca[3]=r;d=c.scissor_enable;d!==h.scissor_enable&&(d?E.enable(3089):E.disable(3089),h.scissor_enable=d);d=J[0];v=J[1];p=J[2];r=J[3];if(d!==da[0]||v!==da[1]||p!==da[2]||r!==da[3])E.scissor(d,v,p,r),da[0]=d,da[1]=v,da[2]=p,da[3]=r;d=Da[0];v=Da[1];p=Da[2];r=Da[3];if(d!==ka[0]||v!==ka[1]||p!==ka[2]||r!==ka[3])E.viewport(d,v,p,r),ka[0]=d,ka[1]=v,ka[2]=p,ka[3]=r;h.dirty=!1}if(d=h.profile)n=performance.now(),M.count++;E.useProgram(g.program);
X.setVAO(null);v=e.location;p=f[v];p.buffer||E.enableVertexAttribArray(v);if(p.type!==k.dtype||3!==p.size||p.buffer!==k||!1!==p.normalized||0!==p.offset||0!==p.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(v,3,k.dtype,!1,0,0),p.type=k.dtype,p.size=3,p.buffer=k,p.normalized=!1,p.offset=0,p.stride=0;v=ja.location;p=f[v];p.buffer||E.enableVertexAttribArray(v);if(p.type!==m.dtype||3!==p.size||p.buffer!==m||!1!==p.normalized||0!==p.offset||0!==p.stride)E.bindBuffer(34962,m.buffer),E.vertexAttribPointer(v,
3,m.dtype,!1,0,0),p.type=m.dtype,p.size=3,p.buffer=m,p.normalized=!1,p.offset=0,p.stride=0;v=a[5];D(v)&&16===v.length||K.commandRaise(b,I);E.uniformMatrix4fv(C.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(qa[0]=v[0],qa[1]=v[1],qa[2]=v[2],qa[3]=v[3],qa[4]=v[4],qa[5]=v[5],qa[6]=v[6],qa[7]=v[7],qa[8]=v[8],qa[9]=v[9],qa[10]=v[10],qa[11]=v[11],qa[12]=v[12],qa[13]=v[13],qa[14]=v[14],qa[15]=v[15],qa));v=a[8];D(v)&&16===v.length||K.commandRaise(G,I);E.uniformMatrix4fv(V.location,!1,Array.isArray(v)||
v instanceof Float32Array?v:(Aa[0]=v[0],Aa[1]=v[1],Aa[2]=v[2],Aa[3]=v[3],Aa[4]=v[4],Aa[5]=v[5],Aa[6]=v[6],Aa[7]=v[7],Aa[8]=v[8],Aa[9]=v[9],Aa[10]=v[10],Aa[11]=v[11],Aa[12]=v[12],Aa[13]=v[13],Aa[14]=v[14],Aa[15]=v[15],Aa));B&&E.bindBuffer(34963,B.buffer.buffer);v=B.primType;p=B.vertCount-0;0<=p||K.commandRaise(L,I);p&&(E.drawElements(v,p,B.type,0<<(B.type-5121>>1)),X.setVAO(null),d&&(M.cpuTime+=performance.now()-n))},scope:function(a,b,c){var e,f,d,l,g,q,n,r,x,y,F,C,D,E,S,B,J,ga,O,N,G,P,Q,L,T,wa,U,
V,ra,Y,Z,ka;if(e=h.profile)f=performance.now(),M.count++;d=z.elements;z.elements=W;l=z.offset;z.offset=0;g=W.vertCount-0;0<=g||K.commandRaise(u,I);q=z.count;z.count=g;n=W.primType;g=z.primitive;z.primitive=n;n=A.buffer;A.buffer=m;r=A.divisor;A.divisor=0;x=A.normalized;A.normalized=!1;y=A.offset;A.offset=0;F=A.size;A.size=0;C=A.state;A.state=1;D=A.stride;A.stride=0;E=A.type;A.type=m.dtype;S=A.w;A.w=0;B=A.x;A.x=0;J=A.y;A.y=0;ga=A.z;A.z=0;O=w.buffer;w.buffer=k;N=w.divisor;w.divisor=0;G=w.normalized;
w.normalized=!1;P=w.offset;w.offset=0;Q=w.size;w.size=0;L=w.state;w.state=1;T=w.stride;w.stride=0;wa=w.type;w.type=k.dtype;U=w.w;w.w=0;V=w.x;w.x=0;ra=w.y;w.y=0;Y=w.z;w.z=0;Z=t.vert;t.vert=10;ka=t.frag;t.frag=9;b(ba,a,c);e&&(M.cpuTime+=performance.now()-f);z.elements=d;z.offset=l;z.count=q;z.primitive=g;A.buffer=n;A.divisor=r;A.normalized=x;A.offset=y;A.size=F;A.state=C;A.stride=D;A.type=E;A.w=S;A.x=B;A.y=J;A.z=ga;w.buffer=O;w.divisor=N;w.normalized=G;w.offset=P;w.size=Q;w.state=L;w.stride=T;w.type=
wa;w.w=U;w.x=V;w.y=ra;w.z=Y;t.vert=Z;t.frag=ka},batch:function(b,d){var g,p,t;g=ca.next;g!==ca.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),ca.cur=g);if(h.dirty){var u,w;g=c.dither;g!==h.dither&&(g?E.enable(3024):E.disable(3024),h.dither=g);g=c.blend_enable;g!==h.blend_enable&&(g?E.enable(3042):E.disable(3042),h.blend_enable=g);g=y[0];t=y[1];u=y[2];w=y[3];if(g!==na[0]||t!==na[1]||u!==na[2]||w!==na[3])E.blendColor(g,t,u,w),na[0]=g,na[1]=t,na[2]=u,na[3]=w;g=ia[0];t=ia[1];
if(g!==Y[0]||t!==Y[1])E.blendEquationSeparate(g,t),Y[0]=g,Y[1]=t;g=fa[0];t=fa[1];u=fa[2];w=fa[3];if(g!==P[0]||t!==P[1]||u!==P[2]||w!==P[3])E.blendFuncSeparate(g,t,u,w),P[0]=g,P[1]=t,P[2]=u,P[3]=w;g=c.depth_enable;g!==h.depth_enable&&(g?E.enable(2929):E.disable(2929),h.depth_enable=g);g=c.depth_func;g!==h.depth_func&&(E.depthFunc(g),h.depth_func=g);g=l[0];t=l[1];if(g!==N[0]||t!==N[1])E.depthRange(g,t),N[0]=g,N[1]=t;g=c.depth_mask;g!==h.depth_mask&&(E.depthMask(g),h.depth_mask=g);g=T[0];t=T[1];u=T[2];
w=T[3];if(g!==x[0]||t!==x[1]||u!==x[2]||w!==x[3])E.colorMask(g,t,u,w),x[0]=g,x[1]=t,x[2]=u,x[3]=w;g=c.cull_enable;g!==h.cull_enable&&(g?E.enable(2884):E.disable(2884),h.cull_enable=g);g=c.cull_face;g!==h.cull_face&&(E.cullFace(g),h.cull_face=g);g=c.frontFace;g!==h.frontFace&&(E.frontFace(g),h.frontFace=g);g=c.lineWidth;g!==h.lineWidth&&(E.lineWidth(g),h.lineWidth=g);g=c.polygonOffset_enable;g!==h.polygonOffset_enable&&(g?E.enable(32823):E.disable(32823),h.polygonOffset_enable=g);g=Q[0];t=Q[1];if(g!==
za[0]||t!==za[1])E.polygonOffset(g,t),za[0]=g,za[1]=t;g=c.sample_alpha;g!==h.sample_alpha&&(g?E.enable(32926):E.disable(32926),h.sample_alpha=g);g=c.sample_enable;g!==h.sample_enable&&(g?E.enable(32928):E.disable(32928),h.sample_enable=g);g=oa[0];t=oa[1];if(g!==q[0]||t!==q[1])E.sampleCoverage(g,t),q[0]=g,q[1]=t;g=c.stencil_enable;g!==h.stencil_enable&&(g?E.enable(2960):E.disable(2960),h.stencil_enable=g);g=c.stencil_mask;g!==h.stencil_mask&&(E.stencilMask(g),h.stencil_mask=g);g=S[0];t=S[1];u=S[2];
if(g!==ma[0]||t!==ma[1]||u!==ma[2])E.stencilFunc(g,t,u),ma[0]=g,ma[1]=t,ma[2]=u;g=wa[0];t=wa[1];u=wa[2];w=wa[3];if(g!==ga[0]||t!==ga[1]||u!==ga[2]||w!==ga[3])E.stencilOpSeparate(g,t,u,w),ga[0]=g,ga[1]=t,ga[2]=u,ga[3]=w;g=ra[0];t=ra[1];u=ra[2];w=ra[3];if(g!==Ca[0]||t!==Ca[1]||u!==Ca[2]||w!==Ca[3])E.stencilOpSeparate(g,t,u,w),Ca[0]=g,Ca[1]=t,Ca[2]=u,Ca[3]=w;g=c.scissor_enable;g!==h.scissor_enable&&(g?E.enable(3089):E.disable(3089),h.scissor_enable=g);g=J[0];t=J[1];u=J[2];w=J[3];if(g!==da[0]||t!==da[1]||
u!==da[2]||w!==da[3])E.scissor(g,t,u,w),da[0]=g,da[1]=t,da[2]=u,da[3]=w;g=Da[0];t=Da[1];u=Da[2];w=Da[3];if(g!==ka[0]||t!==ka[1]||u!==ka[2]||w!==ka[3])E.viewport(g,t,u,w),ka[0]=g,ka[1]=t,ka[2]=u,ka[3]=w;h.dirty=!1}if(g=h.profile)p=performance.now(),M.count+=d;E.useProgram(Z.program);X.setVAO(null);t=e.location;u=f[t];u.buffer||E.enableVertexAttribArray(t);if(u.type!==k.dtype||3!==u.size||u.buffer!==k||!1!==u.normalized||0!==u.offset||0!==u.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(t,
3,k.dtype,!1,0,0),u.type=k.dtype,u.size=3,u.buffer=k,u.normalized=!1,u.offset=0,u.stride=0;t=ja.location;u=f[t];u.buffer||E.enableVertexAttribArray(t);if(u.type!==m.dtype||3!==u.size||u.buffer!==m||!1!==u.normalized||0!==u.offset||0!==u.stride)E.bindBuffer(34962,m.buffer),E.vertexAttribPointer(t,3,m.dtype,!1,0,0),u.type=m.dtype,u.size=3,u.buffer=m,u.normalized=!1,u.offset=0,u.stride=0;t=a[5];D(t)&&16===t.length||K.commandRaise(r,I);E.uniformMatrix4fv(C.location,!1,Array.isArray(t)||t instanceof Float32Array?
t:(Ma[0]=t[0],Ma[1]=t[1],Ma[2]=t[2],Ma[3]=t[3],Ma[4]=t[4],Ma[5]=t[5],Ma[6]=t[6],Ma[7]=t[7],Ma[8]=t[8],Ma[9]=t[9],Ma[10]=t[10],Ma[11]=t[11],Ma[12]=t[12],Ma[13]=t[13],Ma[14]=t[14],Ma[15]=t[15],Ma));t=a[8];D(t)&&16===t.length||K.commandRaise(U,I);E.uniformMatrix4fv(V.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(F[0]=t[0],F[1]=t[1],F[2]=t[2],F[3]=t[3],F[4]=t[4],F[5]=t[5],F[6]=t[6],F[7]=t[7],F[8]=t[8],F[9]=t[9],F[10]=t[10],F[11]=t[11],F[12]=t[12],F[13]=t[13],F[14]=t[14],F[15]=t[15],F));n&&
E.bindBuffer(34963,n.buffer.buffer);u=n.primType;w=n.vertCount-0;0<=w||K.commandRaise(O,I);for(t=0;t<d;++t)w&&E.drawElements(u,w,n.type,0<<(n.type-5121>>1));X.setVAO(null);g&&(M.cpuTime+=performance.now()-p)}}},"$14,angle,color,position":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U){var n,O,ja,e,C,V,f,ba,h,z,ca,E,D,c,t,a,X,y,na,ia,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra;n=d.attributes;O=d.context;ja=d.current;e=d.draw;C=d.elements;V=d.framebuffer;f=d.gl;ba=d.isArrayLike;h=d.next;z=d.shader;ca=d.uniforms;
E=d.vao;D=h.blend_color;c=ja.blend_color;t=h.blend_equation;a=ja.blend_equation;X=h.blend_func;y=ja.blend_func;na=h.colorMask;ia=ja.colorMask;Y=h.depth_range;fa=ja.depth_range;P=h.polygonOffset_offset;T=ja.polygonOffset_offset;x=h.sample_coverage;l=ja.sample_coverage;N=h.scissor_box;Q=ja.scissor_box;za=h.stencil_func;oa=ja.stencil_func;q=h.stencil_opBack;J=ja.stencil_opBack;da=h.stencil_opFront;S=ja.stencil_opFront;ma=h.viewport;ra=ja.viewport;return{draw:function(d){var u,w,z,A;u=V.next;u!==V.cur&&
(u?f.bindFramebuffer(36160,u.framebuffer):f.bindFramebuffer(36160,null),V.cur=u);if(ja.dirty){var B;u=h.dither;u!==ja.dither&&(u?f.enable(3024):f.disable(3024),ja.dither=u);u=h.blend_enable;u!==ja.blend_enable&&(u?f.enable(3042):f.disable(3042),ja.blend_enable=u);u=D[0];z=D[1];A=D[2];B=D[3];if(u!==c[0]||z!==c[1]||A!==c[2]||B!==c[3])f.blendColor(u,z,A,B),c[0]=u,c[1]=z,c[2]=A,c[3]=B;u=t[0];z=t[1];if(u!==a[0]||z!==a[1])f.blendEquationSeparate(u,z),a[0]=u,a[1]=z;u=X[0];z=X[1];A=X[2];B=X[3];if(u!==y[0]||
z!==y[1]||A!==y[2]||B!==y[3])f.blendFuncSeparate(u,z,A,B),y[0]=u,y[1]=z,y[2]=A,y[3]=B;u=h.depth_func;u!==ja.depth_func&&(f.depthFunc(u),ja.depth_func=u);u=Y[0];z=Y[1];if(u!==fa[0]||z!==fa[1])f.depthRange(u,z),fa[0]=u,fa[1]=z;u=h.depth_mask;u!==ja.depth_mask&&(f.depthMask(u),ja.depth_mask=u);u=na[0];z=na[1];A=na[2];B=na[3];if(u!==ia[0]||z!==ia[1]||A!==ia[2]||B!==ia[3])f.colorMask(u,z,A,B),ia[0]=u,ia[1]=z,ia[2]=A,ia[3]=B;u=h.cull_enable;u!==ja.cull_enable&&(u?f.enable(2884):f.disable(2884),ja.cull_enable=
u);u=h.cull_face;u!==ja.cull_face&&(f.cullFace(u),ja.cull_face=u);u=h.frontFace;u!==ja.frontFace&&(f.frontFace(u),ja.frontFace=u);u=h.lineWidth;u!==ja.lineWidth&&(f.lineWidth(u),ja.lineWidth=u);u=h.polygonOffset_enable;u!==ja.polygonOffset_enable&&(u?f.enable(32823):f.disable(32823),ja.polygonOffset_enable=u);u=P[0];z=P[1];if(u!==T[0]||z!==T[1])f.polygonOffset(u,z),T[0]=u,T[1]=z;u=h.sample_alpha;u!==ja.sample_alpha&&(u?f.enable(32926):f.disable(32926),ja.sample_alpha=u);u=h.sample_enable;u!==ja.sample_enable&&
(u?f.enable(32928):f.disable(32928),ja.sample_enable=u);u=x[0];z=x[1];if(u!==l[0]||z!==l[1])f.sampleCoverage(u,z),l[0]=u,l[1]=z;u=h.stencil_enable;u!==ja.stencil_enable&&(u?f.enable(2960):f.disable(2960),ja.stencil_enable=u);u=h.stencil_mask;u!==ja.stencil_mask&&(f.stencilMask(u),ja.stencil_mask=u);u=za[0];z=za[1];A=za[2];if(u!==oa[0]||z!==oa[1]||A!==oa[2])f.stencilFunc(u,z,A),oa[0]=u,oa[1]=z,oa[2]=A;u=da[0];z=da[1];A=da[2];B=da[3];if(u!==S[0]||z!==S[1]||A!==S[2]||B!==S[3])f.stencilOpSeparate(u,z,
A,B),S[0]=u,S[1]=z,S[2]=A,S[3]=B;u=q[0];z=q[1];A=q[2];B=q[3];if(u!==J[0]||z!==J[1]||A!==J[2]||B!==J[3])f.stencilOpSeparate(u,z,A,B),J[0]=u,J[1]=z,J[2]=A,J[3]=B;u=h.scissor_enable;u!==ja.scissor_enable&&(u?f.enable(3089):f.disable(3089),ja.scissor_enable=u);u=N[0];z=N[1];A=N[2];B=N[3];if(u!==Q[0]||z!==Q[1]||A!==Q[2]||B!==Q[3])f.scissor(u,z,A,B),Q[0]=u,Q[1]=z,Q[2]=A,Q[3]=B;u=ma[0];z=ma[1];A=ma[2];B=ma[3];if(u!==ra[0]||z!==ra[1]||A!==ra[2]||B!==ra[3])f.viewport(u,z,A,B),ra[0]=u,ra[1]=z,ra[2]=A,ra[3]=
B}f.disable(2929);ja.depth_enable=!1;if(u=ja.profile)w=performance.now(),M.count++;f.useProgram(g.program);E.setVAO(null);z=U.location;A=n[z];A.buffer||f.enableVertexAttribArray(z);if(A.type!==k.dtype||2!==A.size||A.buffer!==k||!1!==A.normalized||0!==A.offset||0!==A.stride)f.bindBuffer(34962,k.buffer),f.vertexAttribPointer(z,2,k.dtype,!1,0,0),A.type=k.dtype,A.size=2,A.buffer=k,A.normalized=!1,A.offset=0,A.stride=0;z=m.call(this,O,d,0);"number"!==typeof z&&K.commandRaise(b,I);f.uniform1f(Z.location,
z);d=d.color;ba(d)&&4===d.length||K.commandRaise(G,I);f.uniform4f(r.location,d[0],d[1],d[2],d[3]);(d=e.elements)?f.bindBuffer(34963,d.buffer.buffer):E.currentVAO&&(d=C.getElements(E.currentVAO.elements))&&f.bindBuffer(34963,d.buffer.buffer);z=e.primitive;A=e.offset;d?f.drawElements(z,3,d.type,A<<(d.type-5121>>1)):f.drawArrays(z,A,3);ja.dirty=!0;E.setVAO(null);u&&(M.cpuTime+=performance.now()-w)},scope:function(a,b,c){var f,d,l,g,m,q,n,t,v,p,r,u,x,w,y,C,A,D,E,S;f=h.depth_enable;h.depth_enable=!1;if(d=
ja.profile)l=performance.now(),M.count++;g=e.count;e.count=3;m=B.call(this,O,a,c);q=ca[3];ca[3]=m;n=a.color;m=ca[4];ca[4]=n;n=L.buffer;L.buffer=k;t=L.divisor;L.divisor=0;v=L.normalized;L.normalized=!1;p=L.offset;L.offset=0;r=L.size;L.size=0;u=L.state;L.state=1;x=L.stride;L.stride=0;w=L.type;L.type=k.dtype;y=L.w;L.w=0;C=L.x;L.x=0;A=L.y;L.y=0;D=L.z;L.z=0;E=z.vert;z.vert=2;S=z.frag;z.frag=1;ja.dirty=!0;b(O,a,c);h.depth_enable=f;d&&(M.cpuTime+=performance.now()-l);e.count=g;ca[3]=q;ca[4]=m;L.buffer=n;
L.divisor=t;L.normalized=v;L.offset=p;L.size=r;L.state=u;L.stride=x;L.type=w;L.w=y;L.x=C;L.y=A;L.z=D;z.vert=E;z.frag=S;ja.dirty=!0},batch:function(b,d){var g,m,z,B;g=V.next;g!==V.cur&&(g?f.bindFramebuffer(36160,g.framebuffer):f.bindFramebuffer(36160,null),V.cur=g);if(ja.dirty){var G,L,F;g=h.dither;g!==ja.dither&&(g?f.enable(3024):f.disable(3024),ja.dither=g);g=h.blend_enable;g!==ja.blend_enable&&(g?f.enable(3042):f.disable(3042),ja.blend_enable=g);g=D[0];G=D[1];L=D[2];F=D[3];if(g!==c[0]||G!==c[1]||
L!==c[2]||F!==c[3])f.blendColor(g,G,L,F),c[0]=g,c[1]=G,c[2]=L,c[3]=F;g=t[0];G=t[1];if(g!==a[0]||G!==a[1])f.blendEquationSeparate(g,G),a[0]=g,a[1]=G;g=X[0];G=X[1];L=X[2];F=X[3];if(g!==y[0]||G!==y[1]||L!==y[2]||F!==y[3])f.blendFuncSeparate(g,G,L,F),y[0]=g,y[1]=G,y[2]=L,y[3]=F;g=h.depth_func;g!==ja.depth_func&&(f.depthFunc(g),ja.depth_func=g);g=Y[0];G=Y[1];if(g!==fa[0]||G!==fa[1])f.depthRange(g,G),fa[0]=g,fa[1]=G;g=h.depth_mask;g!==ja.depth_mask&&(f.depthMask(g),ja.depth_mask=g);g=na[0];G=na[1];L=na[2];
F=na[3];if(g!==ia[0]||G!==ia[1]||L!==ia[2]||F!==ia[3])f.colorMask(g,G,L,F),ia[0]=g,ia[1]=G,ia[2]=L,ia[3]=F;g=h.cull_enable;g!==ja.cull_enable&&(g?f.enable(2884):f.disable(2884),ja.cull_enable=g);g=h.cull_face;g!==ja.cull_face&&(f.cullFace(g),ja.cull_face=g);g=h.frontFace;g!==ja.frontFace&&(f.frontFace(g),ja.frontFace=g);g=h.lineWidth;g!==ja.lineWidth&&(f.lineWidth(g),ja.lineWidth=g);g=h.polygonOffset_enable;g!==ja.polygonOffset_enable&&(g?f.enable(32823):f.disable(32823),ja.polygonOffset_enable=g);
g=P[0];G=P[1];if(g!==T[0]||G!==T[1])f.polygonOffset(g,G),T[0]=g,T[1]=G;g=h.sample_alpha;g!==ja.sample_alpha&&(g?f.enable(32926):f.disable(32926),ja.sample_alpha=g);g=h.sample_enable;g!==ja.sample_enable&&(g?f.enable(32928):f.disable(32928),ja.sample_enable=g);g=x[0];G=x[1];if(g!==l[0]||G!==l[1])f.sampleCoverage(g,G),l[0]=g,l[1]=G;g=h.stencil_enable;g!==ja.stencil_enable&&(g?f.enable(2960):f.disable(2960),ja.stencil_enable=g);g=h.stencil_mask;g!==ja.stencil_mask&&(f.stencilMask(g),ja.stencil_mask=
g);g=za[0];G=za[1];L=za[2];if(g!==oa[0]||G!==oa[1]||L!==oa[2])f.stencilFunc(g,G,L),oa[0]=g,oa[1]=G,oa[2]=L;g=da[0];G=da[1];L=da[2];F=da[3];if(g!==S[0]||G!==S[1]||L!==S[2]||F!==S[3])f.stencilOpSeparate(g,G,L,F),S[0]=g,S[1]=G,S[2]=L,S[3]=F;g=q[0];G=q[1];L=q[2];F=q[3];if(g!==J[0]||G!==J[1]||L!==J[2]||F!==J[3])f.stencilOpSeparate(g,G,L,F),J[0]=g,J[1]=G,J[2]=L,J[3]=F;g=h.scissor_enable;g!==ja.scissor_enable&&(g?f.enable(3089):f.disable(3089),ja.scissor_enable=g);g=N[0];G=N[1];L=N[2];F=N[3];if(g!==Q[0]||
G!==Q[1]||L!==Q[2]||F!==Q[3])f.scissor(g,G,L,F),Q[0]=g,Q[1]=G,Q[2]=L,Q[3]=F;g=ma[0];G=ma[1];L=ma[2];F=ma[3];if(g!==ra[0]||G!==ra[1]||L!==ra[2]||F!==ra[3])f.viewport(g,G,L,F),ra[0]=g,ra[1]=G,ra[2]=L,ra[3]=F}f.disable(2929);ja.depth_enable=!1;if(g=ja.profile)m=performance.now(),M.count+=d;f.useProgram(W.program);E.setVAO(null);G=U.location;L=n[G];L.buffer||f.enableVertexAttribArray(G);if(L.type!==k.dtype||2!==L.size||L.buffer!==k||!1!==L.normalized||0!==L.offset||0!==L.stride)f.bindBuffer(34962,k.buffer),
f.vertexAttribPointer(G,2,k.dtype,!1,0,0),L.type=k.dtype,L.size=2,L.buffer=k,L.normalized=!1,L.offset=0,L.stride=0;z=u.call(this,O,B,z);"number"!==typeof z&&K.commandRaise(A,I);f.uniform1f(Z.location,z);(G=e.elements)?f.bindBuffer(34963,G.buffer.buffer):E.currentVAO&&(G=C.getElements(E.currentVAO.elements))&&f.bindBuffer(34963,G.buffer.buffer);L=e.primitive;F=e.offset;for(z=0;z<d;++z){B=b[z];var ca,Ua,v,p,R,ta,va;ca=B.color;ba(ca)&&4===ca.length||K.commandRaise(w,I);B=ca[0];v=ca[1];R=ca[2];ca=ca[3];
z&&Ua===B&&p===v&&ta===R&&va===ca||(Ua=B,p=v,ta=R,va=ca,f.uniform4f(r.location,B,v,R,ca));G?f.drawElements(L,3,G.type,F<<(G.type-5121>>1)):f.drawArrays(L,F,3)}ja.dirty=!0;E.setVAO(null);g&&(M.cpuTime+=performance.now()-m)}}},"$13,color,position":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z){var r,U,n,O,X,e,C,V,f,ba,h,z,ca,E,D,c,t,a,ia,y,na,Fa,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da;r=d.attributes;U=d.context;n=d.current;O=d.draw;X=d.framebuffer;e=d.gl;C=d.next;V=d.shader;f=d.uniforms;ba=d.vao;h=C.blend_color;z=
n.blend_color;ca=C.blend_equation;E=n.blend_equation;D=C.blend_func;c=n.blend_func;t=C.colorMask;a=n.colorMask;ia=C.depth_range;y=n.depth_range;na=C.polygonOffset_offset;Fa=n.polygonOffset_offset;Y=C.sample_coverage;fa=n.sample_coverage;P=C.scissor_box;T=n.scissor_box;x=C.stencil_func;l=n.stencil_func;N=C.stencil_opBack;Q=n.stencil_opBack;za=C.stencil_opFront;oa=n.stencil_opFront;q=C.viewport;J=n.viewport;da=[1,0,0,1];return{draw:function(f){var d,u,A;f=X.next;f!==X.cur&&(f?e.bindFramebuffer(36160,
f.framebuffer):e.bindFramebuffer(36160,null),X.cur=f);if(n.dirty){var B;f=C.dither;f!==n.dither&&(f?e.enable(3024):e.disable(3024),n.dither=f);f=C.blend_enable;f!==n.blend_enable&&(f?e.enable(3042):e.disable(3042),n.blend_enable=f);f=h[0];u=h[1];A=h[2];B=h[3];if(f!==z[0]||u!==z[1]||A!==z[2]||B!==z[3])e.blendColor(f,u,A,B),z[0]=f,z[1]=u,z[2]=A,z[3]=B;f=ca[0];u=ca[1];if(f!==E[0]||u!==E[1])e.blendEquationSeparate(f,u),E[0]=f,E[1]=u;f=D[0];u=D[1];A=D[2];B=D[3];if(f!==c[0]||u!==c[1]||A!==c[2]||B!==c[3])e.blendFuncSeparate(f,
u,A,B),c[0]=f,c[1]=u,c[2]=A,c[3]=B;f=C.depth_enable;f!==n.depth_enable&&(f?e.enable(2929):e.disable(2929),n.depth_enable=f);f=C.depth_func;f!==n.depth_func&&(e.depthFunc(f),n.depth_func=f);f=ia[0];u=ia[1];if(f!==y[0]||u!==y[1])e.depthRange(f,u),y[0]=f,y[1]=u;f=C.depth_mask;f!==n.depth_mask&&(e.depthMask(f),n.depth_mask=f);f=t[0];u=t[1];A=t[2];B=t[3];if(f!==a[0]||u!==a[1]||A!==a[2]||B!==a[3])e.colorMask(f,u,A,B),a[0]=f,a[1]=u,a[2]=A,a[3]=B;f=C.cull_enable;f!==n.cull_enable&&(f?e.enable(2884):e.disable(2884),
n.cull_enable=f);f=C.cull_face;f!==n.cull_face&&(e.cullFace(f),n.cull_face=f);f=C.frontFace;f!==n.frontFace&&(e.frontFace(f),n.frontFace=f);f=C.polygonOffset_enable;f!==n.polygonOffset_enable&&(f?e.enable(32823):e.disable(32823),n.polygonOffset_enable=f);f=na[0];u=na[1];if(f!==Fa[0]||u!==Fa[1])e.polygonOffset(f,u),Fa[0]=f,Fa[1]=u;f=C.sample_alpha;f!==n.sample_alpha&&(f?e.enable(32926):e.disable(32926),n.sample_alpha=f);f=C.sample_enable;f!==n.sample_enable&&(f?e.enable(32928):e.disable(32928),n.sample_enable=
f);f=Y[0];u=Y[1];if(f!==fa[0]||u!==fa[1])e.sampleCoverage(f,u),fa[0]=f,fa[1]=u;f=C.stencil_enable;f!==n.stencil_enable&&(f?e.enable(2960):e.disable(2960),n.stencil_enable=f);f=C.stencil_mask;f!==n.stencil_mask&&(e.stencilMask(f),n.stencil_mask=f);f=x[0];u=x[1];A=x[2];if(f!==l[0]||u!==l[1]||A!==l[2])e.stencilFunc(f,u,A),l[0]=f,l[1]=u,l[2]=A;f=za[0];u=za[1];A=za[2];B=za[3];if(f!==oa[0]||u!==oa[1]||A!==oa[2]||B!==oa[3])e.stencilOpSeparate(f,u,A,B),oa[0]=f,oa[1]=u,oa[2]=A,oa[3]=B;f=N[0];u=N[1];A=N[2];
B=N[3];if(f!==Q[0]||u!==Q[1]||A!==Q[2]||B!==Q[3])e.stencilOpSeparate(f,u,A,B),Q[0]=f,Q[1]=u,Q[2]=A,Q[3]=B;f=C.scissor_enable;f!==n.scissor_enable&&(f?e.enable(3089):e.disable(3089),n.scissor_enable=f);f=P[0];u=P[1];A=P[2];B=P[3];if(f!==T[0]||u!==T[1]||A!==T[2]||B!==T[3])e.scissor(f,u,A,B),T[0]=f,T[1]=u,T[2]=A,T[3]=B;f=q[0];u=q[1];A=q[2];B=q[3];if(f!==J[0]||u!==J[1]||A!==J[2]||B!==J[3])e.viewport(f,u,A,B),J[0]=f,J[1]=u,J[2]=A,J[3]=B}e.lineWidth(1);n.lineWidth=1;if(f=n.profile)d=performance.now(),M.count++;
e.useProgram(g.program);ba.setVAO(null);u=Z.location;A=r[u];A.buffer||e.enableVertexAttribArray(u);if(A.type!==k.dtype||2!==A.size||A.buffer!==k||!1!==A.normalized||0!==A.offset||0!==A.stride)e.bindBuffer(34962,k.buffer),e.vertexAttribPointer(u,2,k.dtype,!1,0,0),A.type=k.dtype,A.size=2,A.buffer=k,A.normalized=!1,A.offset=0,A.stride=0;e.uniform4f(w.location,1,0,0,1);m&&e.bindBuffer(34963,m.buffer.buffer);u=m.primType;A=m.vertCount-0;0<=A||K.commandRaise(b,I);A&&(e.drawElements(u,A,m.type,0<<(m.type-
5121>>1)),n.dirty=!0,ba.setVAO(null),f&&(M.cpuTime+=performance.now()-d))},scope:function(a,b,c){var e,d,g,h,l,m,q,t,u,r,x,v,p,z,w,y,A,D,E,H,J,N;e=C.lineWidth;C.lineWidth=1;if(d=n.profile)g=performance.now(),M.count++;h=O.elements;O.elements=G;l=O.offset;O.offset=0;m=G.vertCount-0;0<=m||K.commandRaise(B,I);q=O.count;O.count=m;t=G.primType;m=O.primitive;O.primitive=t;t=f[3];f[3]=da;u=L.buffer;L.buffer=k;r=L.divisor;L.divisor=0;x=L.normalized;L.normalized=!1;v=L.offset;L.offset=0;p=L.size;L.size=0;
z=L.state;L.state=1;w=L.stride;L.stride=0;y=L.type;L.type=k.dtype;A=L.w;L.w=0;D=L.x;L.x=0;E=L.y;L.y=0;H=L.z;L.z=0;J=V.vert;V.vert=2;N=V.frag;V.frag=1;n.dirty=!0;b(U,a,c);C.lineWidth=e;d&&(M.cpuTime+=performance.now()-g);O.elements=h;O.offset=l;O.count=q;O.primitive=m;f[3]=t;L.buffer=u;L.divisor=r;L.normalized=x;L.offset=v;L.size=p;L.state=z;L.stride=w;L.type=y;L.w=A;L.x=D;L.y=E;L.z=H;V.vert=J;V.frag=N;n.dirty=!0},batch:function(b,f){var d,g,m;d=X.next;d!==X.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):
e.bindFramebuffer(36160,null),X.cur=d);if(n.dirty){var B,G;d=C.dither;d!==n.dither&&(d?e.enable(3024):e.disable(3024),n.dither=d);d=C.blend_enable;d!==n.blend_enable&&(d?e.enable(3042):e.disable(3042),n.blend_enable=d);d=h[0];m=h[1];B=h[2];G=h[3];if(d!==z[0]||m!==z[1]||B!==z[2]||G!==z[3])e.blendColor(d,m,B,G),z[0]=d,z[1]=m,z[2]=B,z[3]=G;d=ca[0];m=ca[1];if(d!==E[0]||m!==E[1])e.blendEquationSeparate(d,m),E[0]=d,E[1]=m;d=D[0];m=D[1];B=D[2];G=D[3];if(d!==c[0]||m!==c[1]||B!==c[2]||G!==c[3])e.blendFuncSeparate(d,
m,B,G),c[0]=d,c[1]=m,c[2]=B,c[3]=G;d=C.depth_enable;d!==n.depth_enable&&(d?e.enable(2929):e.disable(2929),n.depth_enable=d);d=C.depth_func;d!==n.depth_func&&(e.depthFunc(d),n.depth_func=d);d=ia[0];m=ia[1];if(d!==y[0]||m!==y[1])e.depthRange(d,m),y[0]=d,y[1]=m;d=C.depth_mask;d!==n.depth_mask&&(e.depthMask(d),n.depth_mask=d);d=t[0];m=t[1];B=t[2];G=t[3];if(d!==a[0]||m!==a[1]||B!==a[2]||G!==a[3])e.colorMask(d,m,B,G),a[0]=d,a[1]=m,a[2]=B,a[3]=G;d=C.cull_enable;d!==n.cull_enable&&(d?e.enable(2884):e.disable(2884),
n.cull_enable=d);d=C.cull_face;d!==n.cull_face&&(e.cullFace(d),n.cull_face=d);d=C.frontFace;d!==n.frontFace&&(e.frontFace(d),n.frontFace=d);d=C.polygonOffset_enable;d!==n.polygonOffset_enable&&(d?e.enable(32823):e.disable(32823),n.polygonOffset_enable=d);d=na[0];m=na[1];if(d!==Fa[0]||m!==Fa[1])e.polygonOffset(d,m),Fa[0]=d,Fa[1]=m;d=C.sample_alpha;d!==n.sample_alpha&&(d?e.enable(32926):e.disable(32926),n.sample_alpha=d);d=C.sample_enable;d!==n.sample_enable&&(d?e.enable(32928):e.disable(32928),n.sample_enable=
d);d=Y[0];m=Y[1];if(d!==fa[0]||m!==fa[1])e.sampleCoverage(d,m),fa[0]=d,fa[1]=m;d=C.stencil_enable;d!==n.stencil_enable&&(d?e.enable(2960):e.disable(2960),n.stencil_enable=d);d=C.stencil_mask;d!==n.stencil_mask&&(e.stencilMask(d),n.stencil_mask=d);d=x[0];m=x[1];B=x[2];if(d!==l[0]||m!==l[1]||B!==l[2])e.stencilFunc(d,m,B),l[0]=d,l[1]=m,l[2]=B;d=za[0];m=za[1];B=za[2];G=za[3];if(d!==oa[0]||m!==oa[1]||B!==oa[2]||G!==oa[3])e.stencilOpSeparate(d,m,B,G),oa[0]=d,oa[1]=m,oa[2]=B,oa[3]=G;d=N[0];m=N[1];B=N[2];
G=N[3];if(d!==Q[0]||m!==Q[1]||B!==Q[2]||G!==Q[3])e.stencilOpSeparate(d,m,B,G),Q[0]=d,Q[1]=m,Q[2]=B,Q[3]=G;d=C.scissor_enable;d!==n.scissor_enable&&(d?e.enable(3089):e.disable(3089),n.scissor_enable=d);d=P[0];m=P[1];B=P[2];G=P[3];if(d!==T[0]||m!==T[1]||B!==T[2]||G!==T[3])e.scissor(d,m,B,G),T[0]=d,T[1]=m,T[2]=B,T[3]=G;d=q[0];m=q[1];B=q[2];G=q[3];if(d!==J[0]||m!==J[1]||B!==J[2]||G!==J[3])e.viewport(d,m,B,G),J[0]=d,J[1]=m,J[2]=B,J[3]=G}e.lineWidth(1);n.lineWidth=1;if(d=n.profile)g=performance.now(),M.count+=
f;e.useProgram(W.program);ba.setVAO(null);m=Z.location;B=r[m];B.buffer||e.enableVertexAttribArray(m);if(B.type!==k.dtype||2!==B.size||B.buffer!==k||!1!==B.normalized||0!==B.offset||0!==B.stride)e.bindBuffer(34962,k.buffer),e.vertexAttribPointer(m,2,k.dtype,!1,0,0),B.type=k.dtype,B.size=2,B.buffer=k,B.normalized=!1,B.offset=0,B.stride=0;e.uniform4f(w.location,1,0,0,1);u&&e.bindBuffer(34963,u.buffer.buffer);B=u.primType;G=u.vertCount-0;0<=G||K.commandRaise(A,I);for(m=0;m<f;++m)G&&e.drawElements(B,G,
u.type,0<<(u.type-5121>>1));n.dirty=!0;ba.setVAO(null);d&&(M.cpuTime+=performance.now()-g)}}},"$20,mouse,position,t,texture":function(d,K,I,M,g,k,m,b,G,B,L,W,u,A,w,Z,r,U,n,O,X,e,C,V,f){var ba,h,z,ca,E,D,c,t,a,ia,y,na,Fa,Y,fa,P,T,x,l,N,Q,za,oa,q,J,da,S,ma,ra,Ca,wa,ga,Da,ka,qa,Aa;ba=d.attributes;h=d.context;z=d.current;ca=d.draw;E=d.elements;D=d.framebuffer;c=d.gl;t=d.isArrayLike;a=d.next;ia=d.shader;y=d.uniforms;na=d.vao;Fa=a.blend_color;Y=z.blend_color;fa=a.blend_equation;P=z.blend_equation;T=a.blend_func;
x=z.blend_func;l=a.colorMask;N=z.colorMask;Q=a.depth_range;za=z.depth_range;oa=a.polygonOffset_offset;q=z.polygonOffset_offset;J=a.sample_coverage;da=z.sample_coverage;S=a.scissor_box;ma=z.scissor_box;ra=a.stencil_func;Ca=z.stencil_func;wa=a.stencil_opBack;ga=z.stencil_opBack;Da=a.stencil_opFront;ka=z.stencil_opFront;qa=a.viewport;Aa=z.viewport;return{draw:function(d){var n,u,r,v;n=D.next;n!==D.cur&&(n?c.bindFramebuffer(36160,n.framebuffer):c.bindFramebuffer(36160,null),D.cur=n);if(z.dirty){var p;
n=a.dither;n!==z.dither&&(n?c.enable(3024):c.disable(3024),z.dither=n);n=a.blend_enable;n!==z.blend_enable&&(n?c.enable(3042):c.disable(3042),z.blend_enable=n);n=Fa[0];r=Fa[1];v=Fa[2];p=Fa[3];if(n!==Y[0]||r!==Y[1]||v!==Y[2]||p!==Y[3])c.blendColor(n,r,v,p),Y[0]=n,Y[1]=r,Y[2]=v,Y[3]=p;n=fa[0];r=fa[1];if(n!==P[0]||r!==P[1])c.blendEquationSeparate(n,r),P[0]=n,P[1]=r;n=T[0];r=T[1];v=T[2];p=T[3];if(n!==x[0]||r!==x[1]||v!==x[2]||p!==x[3])c.blendFuncSeparate(n,r,v,p),x[0]=n,x[1]=r,x[2]=v,x[3]=p;n=a.depth_enable;
n!==z.depth_enable&&(n?c.enable(2929):c.disable(2929),z.depth_enable=n);n=a.depth_func;n!==z.depth_func&&(c.depthFunc(n),z.depth_func=n);n=Q[0];r=Q[1];if(n!==za[0]||r!==za[1])c.depthRange(n,r),za[0]=n,za[1]=r;n=a.depth_mask;n!==z.depth_mask&&(c.depthMask(n),z.depth_mask=n);n=l[0];r=l[1];v=l[2];p=l[3];if(n!==N[0]||r!==N[1]||v!==N[2]||p!==N[3])c.colorMask(n,r,v,p),N[0]=n,N[1]=r,N[2]=v,N[3]=p;n=a.cull_enable;n!==z.cull_enable&&(n?c.enable(2884):c.disable(2884),z.cull_enable=n);n=a.cull_face;n!==z.cull_face&&
(c.cullFace(n),z.cull_face=n);n=a.frontFace;n!==z.frontFace&&(c.frontFace(n),z.frontFace=n);n=a.lineWidth;n!==z.lineWidth&&(c.lineWidth(n),z.lineWidth=n);n=a.polygonOffset_enable;n!==z.polygonOffset_enable&&(n?c.enable(32823):c.disable(32823),z.polygonOffset_enable=n);n=oa[0];r=oa[1];if(n!==q[0]||r!==q[1])c.polygonOffset(n,r),q[0]=n,q[1]=r;n=a.sample_alpha;n!==z.sample_alpha&&(n?c.enable(32926):c.disable(32926),z.sample_alpha=n);n=a.sample_enable;n!==z.sample_enable&&(n?c.enable(32928):c.disable(32928),
z.sample_enable=n);n=J[0];r=J[1];if(n!==da[0]||r!==da[1])c.sampleCoverage(n,r),da[0]=n,da[1]=r;n=a.stencil_enable;n!==z.stencil_enable&&(n?c.enable(2960):c.disable(2960),z.stencil_enable=n);n=a.stencil_mask;n!==z.stencil_mask&&(c.stencilMask(n),z.stencil_mask=n);n=ra[0];r=ra[1];v=ra[2];if(n!==Ca[0]||r!==Ca[1]||v!==Ca[2])c.stencilFunc(n,r,v),Ca[0]=n,Ca[1]=r,Ca[2]=v;n=Da[0];r=Da[1];v=Da[2];p=Da[3];if(n!==ka[0]||r!==ka[1]||v!==ka[2]||p!==ka[3])c.stencilOpSeparate(n,r,v,p),ka[0]=n,ka[1]=r,ka[2]=v,ka[3]=
p;n=wa[0];r=wa[1];v=wa[2];p=wa[3];if(n!==ga[0]||r!==ga[1]||v!==ga[2]||p!==ga[3])c.stencilOpSeparate(n,r,v,p),ga[0]=n,ga[1]=r,ga[2]=v,ga[3]=p;n=a.scissor_enable;n!==z.scissor_enable&&(n?c.enable(3089):c.disable(3089),z.scissor_enable=n);n=S[0];r=S[1];v=S[2];p=S[3];if(n!==ma[0]||r!==ma[1]||v!==ma[2]||p!==ma[3])c.scissor(n,r,v,p),ma[0]=n,ma[1]=r,ma[2]=v,ma[3]=p;n=qa[0];r=qa[1];v=qa[2];p=qa[3];if(n!==Aa[0]||r!==Aa[1]||v!==Aa[2]||p!==Aa[3])c.viewport(n,r,v,p),Aa[0]=n,Aa[1]=r,Aa[2]=v,Aa[3]=p;z.dirty=!1}if(n=
z.profile)u=performance.now(),M.count++;c.useProgram(g.program);na.setVAO(null);r=C.location;v=ba[r];v.buffer||c.enableVertexAttribArray(r);if(v.type!==k.dtype||2!==v.size||v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)c.bindBuffer(34962,k.buffer),c.vertexAttribPointer(r,2,k.dtype,!1,0,0),v.type=k.dtype,v.size=2,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;r=m.call(this,h,d,0);t(r)&&2===r.length||K.commandRaise(b,I);c.uniform2f(e.location,r[0],r[1]);d=G.call(this,h,d,0);"number"!==
typeof d&&K.commandRaise(B,I);c.uniform1f(V.location,d);c.uniform1i(f.location,L.bind());(d=ca.elements)?c.bindBuffer(34963,d.buffer.buffer):na.currentVAO&&(d=E.getElements(na.currentVAO.elements))&&c.bindBuffer(34963,d.buffer.buffer);r=ca.primitive;v=ca.offset;d?c.drawElements(r,3,d.type,v<<(d.type-5121>>1)):c.drawArrays(r,v,3);na.setVAO(null);n&&(M.cpuTime+=performance.now()-u);L.unbind()},scope:function(a,b,c){var e,f,d,g,l,m,n,q,r,t,x,B,C,D,E,G,J,I,K,L;if(e=z.profile)f=performance.now(),M.count++;
d=ca.count;ca.count=3;g=W.call(this,h,a,c);l=y[3];y[3]=g;m=u.call(this,h,a,c);g=y[4];y[4]=m;m=y[5];y[5]=A;n=w.buffer;w.buffer=k;q=w.divisor;w.divisor=0;r=w.normalized;w.normalized=!1;t=w.offset;w.offset=0;x=w.size;w.size=0;B=w.state;w.state=1;C=w.stride;w.stride=0;D=w.type;w.type=k.dtype;E=w.w;w.w=0;G=w.x;w.x=0;J=w.y;w.y=0;I=w.z;w.z=0;K=ia.vert;ia.vert=2;L=ia.frag;ia.frag=1;b(h,a,c);e&&(M.cpuTime+=performance.now()-f);ca.count=d;y[3]=l;y[4]=g;y[5]=m;w.buffer=n;w.divisor=q;w.normalized=r;w.offset=
t;w.size=x;w.state=B;w.stride=C;w.type=D;w.w=E;w.x=G;w.y=J;w.z=I;ia.vert=K;ia.frag=L},batch:function(b,d){var g,m,u;g=D.next;g!==D.cur&&(g?c.bindFramebuffer(36160,g.framebuffer):c.bindFramebuffer(36160,null),D.cur=g);if(z.dirty){var p,w,y;g=a.dither;g!==z.dither&&(g?c.enable(3024):c.disable(3024),z.dither=g);g=a.blend_enable;g!==z.blend_enable&&(g?c.enable(3042):c.disable(3042),z.blend_enable=g);g=Fa[0];p=Fa[1];w=Fa[2];y=Fa[3];if(g!==Y[0]||p!==Y[1]||w!==Y[2]||y!==Y[3])c.blendColor(g,p,w,y),Y[0]=g,
Y[1]=p,Y[2]=w,Y[3]=y;g=fa[0];p=fa[1];if(g!==P[0]||p!==P[1])c.blendEquationSeparate(g,p),P[0]=g,P[1]=p;g=T[0];p=T[1];w=T[2];y=T[3];if(g!==x[0]||p!==x[1]||w!==x[2]||y!==x[3])c.blendFuncSeparate(g,p,w,y),x[0]=g,x[1]=p,x[2]=w,x[3]=y;g=a.depth_enable;g!==z.depth_enable&&(g?c.enable(2929):c.disable(2929),z.depth_enable=g);g=a.depth_func;g!==z.depth_func&&(c.depthFunc(g),z.depth_func=g);g=Q[0];p=Q[1];if(g!==za[0]||p!==za[1])c.depthRange(g,p),za[0]=g,za[1]=p;g=a.depth_mask;g!==z.depth_mask&&(c.depthMask(g),
z.depth_mask=g);g=l[0];p=l[1];w=l[2];y=l[3];if(g!==N[0]||p!==N[1]||w!==N[2]||y!==N[3])c.colorMask(g,p,w,y),N[0]=g,N[1]=p,N[2]=w,N[3]=y;g=a.cull_enable;g!==z.cull_enable&&(g?c.enable(2884):c.disable(2884),z.cull_enable=g);g=a.cull_face;g!==z.cull_face&&(c.cullFace(g),z.cull_face=g);g=a.frontFace;g!==z.frontFace&&(c.frontFace(g),z.frontFace=g);g=a.lineWidth;g!==z.lineWidth&&(c.lineWidth(g),z.lineWidth=g);g=a.polygonOffset_enable;g!==z.polygonOffset_enable&&(g?c.enable(32823):c.disable(32823),z.polygonOffset_enable=
g);g=oa[0];p=oa[1];if(g!==q[0]||p!==q[1])c.polygonOffset(g,p),q[0]=g,q[1]=p;g=a.sample_alpha;g!==z.sample_alpha&&(g?c.enable(32926):c.disable(32926),z.sample_alpha=g);g=a.sample_enable;g!==z.sample_enable&&(g?c.enable(32928):c.disable(32928),z.sample_enable=g);g=J[0];p=J[1];if(g!==da[0]||p!==da[1])c.sampleCoverage(g,p),da[0]=g,da[1]=p;g=a.stencil_enable;g!==z.stencil_enable&&(g?c.enable(2960):c.disable(2960),z.stencil_enable=g);g=a.stencil_mask;g!==z.stencil_mask&&(c.stencilMask(g),z.stencil_mask=
g);g=ra[0];p=ra[1];w=ra[2];if(g!==Ca[0]||p!==Ca[1]||w!==Ca[2])c.stencilFunc(g,p,w),Ca[0]=g,Ca[1]=p,Ca[2]=w;g=Da[0];p=Da[1];w=Da[2];y=Da[3];if(g!==ka[0]||p!==ka[1]||w!==ka[2]||y!==ka[3])c.stencilOpSeparate(g,p,w,y),ka[0]=g,ka[1]=p,ka[2]=w,ka[3]=y;g=wa[0];p=wa[1];w=wa[2];y=wa[3];if(g!==ga[0]||p!==ga[1]||w!==ga[2]||y!==ga[3])c.stencilOpSeparate(g,p,w,y),ga[0]=g,ga[1]=p,ga[2]=w,ga[3]=y;g=a.scissor_enable;g!==z.scissor_enable&&(g?c.enable(3089):c.disable(3089),z.scissor_enable=g);g=S[0];p=S[1];w=S[2];
y=S[3];if(g!==ma[0]||p!==ma[1]||w!==ma[2]||y!==ma[3])c.scissor(g,p,w,y),ma[0]=g,ma[1]=p,ma[2]=w,ma[3]=y;g=qa[0];p=qa[1];w=qa[2];y=qa[3];if(g!==Aa[0]||p!==Aa[1]||w!==Aa[2]||y!==Aa[3])c.viewport(g,p,w,y),Aa[0]=g,Aa[1]=p,Aa[2]=w,Aa[3]=y;z.dirty=!1}if(g=z.profile)m=performance.now(),M.count+=d;c.useProgram(Z.program);na.setVAO(null);p=C.location;w=ba[p];w.buffer||c.enableVertexAttribArray(p);if(w.type!==k.dtype||2!==w.size||w.buffer!==k||!1!==w.normalized||0!==w.offset||0!==w.stride)c.bindBuffer(34962,
k.buffer),c.vertexAttribPointer(p,2,k.dtype,!1,0,0),w.type=k.dtype,w.size=2,w.buffer=k,w.normalized=!1,w.offset=0,w.stride=0;p=r.call(this,h,void 0,u);t(p)&&2===p.length||K.commandRaise(U,I);c.uniform2f(e.location,p[0],p[1]);u=n.call(this,h,void 0,u);"number"!==typeof u&&K.commandRaise(O,I);c.uniform1f(V.location,u);c.uniform1i(f.location,X.bind());(p=ca.elements)?c.bindBuffer(34963,p.buffer.buffer):na.currentVAO&&(p=E.getElements(na.currentVAO.elements))&&c.bindBuffer(34963,p.buffer.buffer);w=ca.primitive;
y=ca.offset;for(u=0;u<d;++u)p?c.drawElements(w,3,p.type,y<<(p.type-5121>>1)):c.drawArrays(w,y,3);X.unbind();na.setVAO(null);g&&(M.cpuTime+=performance.now()-m)}}}}},{}],25:[function(X,ia,Fa){var d=X("./sorted-object-keys");ia.exports=function(K,I){for(var M=d(I),g=0;g<M.length;++g)K[M[g]]=I[M[g]];return K}},{"./sorted-object-keys":34}],26:[function(X,ia,Fa){function d(d,g,k,m,b,G){for(var B=0;B<g;++B)for(var I=d[B],K=0;K<k;++K)for(var u=I[K],A=0;A<m;++A)b[G++]=u[A]}function K(I,g,k,m,b){for(var G=
1,B=k+1;B<g.length;++B)G*=g[B];var L=g[k];if(4===g.length-k){var W=g[k+1],u=g[k+2];g=g[k+3];for(B=0;B<L;++B)d(I[B],W,u,g,m,b),b+=G}else for(B=0;B<L;++B)K(I[B],g,k+1,m,b),b+=G}var I=X("./pool");ia.exports={shape:function(d){for(var g=[];d.length;d=d[0])g.push(d.length);return g},flatten:function(M,g,k,m){var b=1;if(g.length)for(var G=0;G<g.length;++G)b*=g[G];else b=0;k=m||I.allocType(k,b);switch(g.length){case 0:break;case 1:m=g[0];for(g=0;g<m;++g)k[g]=M[g];break;case 2:m=g[0];g=g[1];for(G=b=0;G<m;++G)for(var B=
M[G],L=0;L<g;++L)k[b++]=B[L];break;case 3:d(M,g[0],g[1],g[2],k,0);break;default:K(M,g,0,k,0)}return k}}},{"./pool":32}],27:[function(X,ia,Fa){var d=X("./is-typed-array");ia.exports=function(K){return Array.isArray(K)||d(K)}},{"./is-typed-array":30}],28:[function(X,ia,Fa){var d=X("./is-typed-array");ia.exports=function(K){return!!K&&"object"===typeof K&&Array.isArray(K.shape)&&Array.isArray(K.stride)&&"number"===typeof K.offset&&K.shape.length===K.stride.length&&(Array.isArray(K.data)||d(K.data))}},
{"./is-typed-array":30}],29:[function(X,ia,Fa){ia.exports=function(d){return!(d&d-1)&&!!d}},{}],30:[function(X,ia,Fa){ia.exports=function(d){return d instanceof Uint8Array||d instanceof Uint16Array||d instanceof Uint32Array||d instanceof Int8Array||d instanceof Int16Array||d instanceof Int32Array||d instanceof Float32Array||d instanceof Float64Array||d instanceof Uint8ClampedArray}},{}],31:[function(X,ia,Fa){ia.exports=function(d,K){for(var I=Array(d),M=0;M<d;++M)I[M]=K(M);return I}},{}],32:[function(X,
ia,Fa){function d(d){var g,k;g=(65535<d)<<4;d>>>=g;k=(255<d)<<3;d>>>=k;g|=k;k=(15<d)<<2;d>>>=k;g|=k;k=(3<d)<<1;return g|k|d>>>k>>1}function K(){function K(g){a:{for(var b=16;268435456>=b;b*=16)if(g<=b){g=b;break a}g=0}b=k[d(g)>>2];return 0<b.length?b.pop():new ArrayBuffer(g)}function g(g){k[d(g.byteLength)>>2].push(g)}var k=I(8,function(){return[]});return{alloc:K,free:g,allocType:function(d,b){var g=null;switch(d){case 5120:g=new Int8Array(K(b),0,b);break;case 5121:g=new Uint8Array(K(b),0,b);break;
case 5122:g=new Int16Array(K(2*b),0,b);break;case 5123:g=new Uint16Array(K(2*b),0,b);break;case 5124:g=new Int32Array(K(4*b),0,b);break;case 5125:g=new Uint32Array(K(4*b),0,b);break;case 5126:g=new Float32Array(K(4*b),0,b);break;default:return null}return g.length!==b?g.subarray(0,b):g},freeType:function(d){g(d.buffer)}}}var I=X("./loop");X=K();X.zero=K();ia.exports=X},{"./loop":31}],33:[function(X,ia,Fa){ia.exports={next:"function"===typeof requestAnimationFrame?function(d){return requestAnimationFrame(d)}:
function(d){return setTimeout(d,16)},cancel:"function"===typeof cancelAnimationFrame?function(d){return cancelAnimationFrame(d)}:clearTimeout}},{}],34:[function(X,ia,Fa){ia.exports=function(d){return Object.keys(d).sort()}},{}],35:[function(X,ia,Fa){var d=X("./pool"),K=new Float32Array(1),I=new Uint32Array(K.buffer);ia.exports=function(M){for(var g=d.allocType(5123,M.length),k=0;k<M.length;++k)if(isNaN(M[k]))g[k]=65535;else if(Infinity===M[k])g[k]=31744;else if(-Infinity===M[k])g[k]=64512;else{K[0]=
M[k];var m=I[0],b=m>>>31<<15,G=(m<<1>>>24)-127,m=m>>13&1023;g[k]=-24>G?b:-14>G?b+(m+1024>>-14-G):15<G?b+31744:b+(G+15<<10)+m}return g}},{"./pool":32}],36:[function(X,ia,Fa){var d=X("./sorted-object-keys");ia.exports=function(K){return d(K).map(function(d){return K[d]})}},{"./sorted-object-keys":34}],37:[function(X,ia,Fa){function d(d,b,g){function B(){var b=window.innerWidth,k=window.innerHeight;d!==document.body&&(k=I.getBoundingClientRect(),b=k.right-k.left,k=k.bottom-k.top);I.width=g*b;I.height=
g*k}var I=document.createElement("canvas");k(I.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});d.appendChild(I);d===document.body&&(I.style.position="absolute",k(d.style,{margin:0,padding:0}));var K;d!==document.body&&"function"===typeof ResizeObserver?(K=new ResizeObserver(function(){setTimeout(B)}),K.observe(d)):window.addEventListener("resize",B,!1);B();return{canvas:I,onDestroy:function(){K?K.disconnect():window.removeEventListener("resize",B);d.removeChild(I)}}}function K(d,
b){function g(k){try{return d.getContext(k,b)}catch(G){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}function I(d){if("string"===typeof d)return d.split();g(Array.isArray(d),"invalid extension array");return d}function M(d){return"string"===typeof d?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(d)):d}var g=X("./util/check"),k=X("./util/extend");ia.exports=function(k){var b=k||{},G,B,L,W;k={};var u=[],A=[],w="undefined"===
typeof window?1:window.devicePixelRatio,Z=!1,r=function(b){b&&g.raise(b)},U=function(){};"string"===typeof b?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),G=document.querySelector(b),g(G,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?G=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(W=b,L=W.canvas):(g.constructor(b),
"gl"in b?W=b.gl:"canvas"in b?L=M(b.canvas):"container"in b&&(B=M(b.container)),"attributes"in b&&(k=b.attributes,g.type(k,"object","invalid context attributes")),"extensions"in b&&(u=I(b.extensions)),"optionalExtensions"in b&&(A=I(b.optionalExtensions)),"onDone"in b&&(g.type(b.onDone,"function","invalid or missing onDone callback"),r=b.onDone),"profile"in b&&(Z=!!b.profile),"pixelRatio"in b&&(w=+b.pixelRatio,g(0<w,"invalid pixel ratio"))):g.raise("invalid arguments to regl");G&&("canvas"===G.nodeName.toLowerCase()?
L=G:B=G);if(!W){if(!L){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");G=d(B||document.body,r,w);if(!G)return null;L=G.canvas;U=G.onDestroy}void 0===k.premultipliedAlpha&&(k.premultipliedAlpha=!0);W=K(L,k)}return W?{gl:W,canvas:L,container:B,extensions:u,optionalExtensions:A,pixelRatio:w,profile:Z,onDone:r,onDestroy:U}:(U(),r("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],
38:[function(X,ia,Fa){ia.exports=function(K,I){function M(b){var d=!1;"altKey"in b&&(d=d||b.altKey!==Z.alt,Z.alt=!!b.altKey);"shiftKey"in b&&(d=d||b.shiftKey!==Z.shift,Z.shift=!!b.shiftKey);"ctrlKey"in b&&(d=d||b.ctrlKey!==Z.control,Z.control=!!b.ctrlKey);"metaKey"in b&&(d=d||b.metaKey!==Z.meta,Z.meta=!!b.metaKey);return d}function g(b,g){var k=d.x(g),e=d.y(g);"buttons"in g&&(b=g.buttons|0);if(b!==u||k!==A||e!==w||M(g))u=b|0,A=k||0,w=e||0,I&&I(u,A,w,Z)}function k(b){g(0,b)}function m(){if(u||A||w||
Z.shift||Z.alt||Z.meta||Z.control)u=A=w=0,Z.shift=Z.alt=Z.control=Z.meta=!1,I&&I(0,0,0,Z)}function b(b){M(b)&&I&&I(u,A,w,Z)}function G(b){0===d.buttons(b)?g(0,b):g(u,b)}function B(b){g(u|d.buttons(b),b)}function L(b){g(u&~d.buttons(b),b)}function W(){r||(r=!0,K.addEventListener("mousemove",G),K.addEventListener("mousedown",B),K.addEventListener("mouseup",L),K.addEventListener("mouseleave",k),K.addEventListener("mouseenter",k),K.addEventListener("mouseout",k),K.addEventListener("mouseover",k),K.addEventListener("blur",
m),K.addEventListener("keyup",b),K.addEventListener("keydown",b),K.addEventListener("keypress",b),K!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}I||(I=K,K=window);var u=0,A=0,w=0,Z={shift:!1,alt:!1,control:!1,meta:!1},r=!1;W();var U={element:K};Object.defineProperties(U,{enabled:{get:function(){return r},set:function(d){d?W():r&&(r=!1,K.removeEventListener("mousemove",G),K.removeEventListener("mousedown",
B),K.removeEventListener("mouseup",L),K.removeEventListener("mouseleave",k),K.removeEventListener("mouseenter",k),K.removeEventListener("mouseout",k),K.removeEventListener("mouseover",k),K.removeEventListener("blur",m),K.removeEventListener("keyup",b),K.removeEventListener("keydown",b),K.removeEventListener("keypress",b),K!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",b),window.removeEventListener("keydown",b),window.removeEventListener("keypress",b)))},enumerable:!0},
buttons:{get:function(){return u},enumerable:!0},x:{get:function(){return A},enumerable:!0},y:{get:function(){return w},enumerable:!0},mods:{get:function(){return Z},enumerable:!0}});return U};var d=X("mouse-event")},{"mouse-event":39}],39:[function(X,ia,Fa){function d(d){return d.target||d.srcElement||window}Fa.buttons=function(d){if("object"===typeof d){if("buttons"in d)return d.buttons;if("which"in d){d=d.which;if(2===d)return 4;if(3===d)return 2;if(0<d)return 1<<d-1}else if("button"in d){d=d.button;
if(1===d)return 4;if(2===d)return 2;if(0<=d)return 1<<d}}return 0};Fa.element=d;Fa.x=function(K){if("object"===typeof K){if("offsetX"in K)return K.offsetX;var I=d(K).getBoundingClientRect();return K.clientX-I.left}return 0};Fa.y=function(K){if("object"===typeof K){if("offsetY"in K)return K.offsetY;var I=d(K).getBoundingClientRect();return K.clientY-I.top}return 0}},{}],40:[function(X,ia,Fa){function d(b,d){for(var g=0;g<b.length;++g)if(b[g]===d)return g;return-1}var K=X("./lib/util/check"),I=X("./lib/util/extend"),
M=X("./lib/dynamic"),g=X("./lib/util/raf"),k=X("./lib/util/clock"),m=X("./lib/strings"),b=X("./lib/webgl"),G=X("./lib/extension"),B=X("./lib/limits"),L=X("./lib/buffer"),W=X("./lib/elements"),u=X("./lib/texture"),A=X("./lib/renderbuffer"),w=X("./lib/framebuffer"),Z=X("./lib/attribute"),r=X("./lib/shader"),U=X("./lib/read"),n=X("./lib/core"),O=X("./lib/stats"),ja=X("./lib/timer");ia.exports=function(e){function C(){if(0===Da.length)T&&T.update(),Ma=null;else{Ma=g.next(C);c();for(var a=Da.length-1;0<=
a;--a){var b=Da[a];b&&b(Q,null,0)}X.flush();T&&T.update()}}function V(){!Ma&&0<Da.length&&(Ma=g.next(C))}function f(){Ma&&(g.cancel(C),Ma=null)}function ba(a){a.preventDefault();ia=!0;f();ka.forEach(function(a){a()})}function h(a){X.getError();ia=!1;Fa.restore();da.restore();oa.restore();S.restore();ma.restore();ra.restore();J.restore();T&&T.restore();Ca.procs.refresh();V();qa.forEach(function(a){a()})}function z(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(M.isDynamic(f))e[b]=
M.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(M.isDynamic(f[g])){e[b]=M.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<a;)n.push(null);return n}K(!!a,"invalid args to regl({...})");K.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=I({},a);delete c.uniforms;
delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Ca.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return I(function(a,b){var d;ia&&K.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===
typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function ca(a,b){var c=0;Ca.procs.poll();var d=b.color;d&&(X.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in
b&&(X.clearDepth(+b.depth),c|=256);"stencil"in b&&(X.clearStencil(b.stencil|0),c|=1024);K(!!c,"called regl.clear with no buffer specified");X.clear(c)}function E(a){K.type(a,"function","regl.frame() callback must be a function");Da.push(a);V();return{cancel:function(){function b(){var a=d(Da,b);Da[a]=Da[Da.length-1];--Da.length;0>=Da.length&&f()}var c=d(Da,a);K(0<=c,"cannot cancel a frame twice");Da[c]=b}}}function D(){var a=wa.viewport,b=wa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=
Q.drawingBufferWidth=a[2]=b[2]=X.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=X.drawingBufferHeight}function c(){Q.tick+=1;Q.time=a();D();Ca.procs.poll()}function t(){S.refresh();D();Ca.procs.refresh();T&&T.update()}function a(){return(k()-x)/1E3}console.log("REGL args are:",e);e=b(e);console.log("REGL configs are:",e);if(!e)return null;var X=e.gl,y=X.getContextAttributes(),ia=X.isContextLost(),Fa=G(X,e);if(!Fa)return null;var Y=m(),fa=O(),P=Fa.extensions,
T=ja(X,P),x=k(),l=X.drawingBufferWidth,N=X.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:l,viewportHeight:N,framebufferWidth:l,framebufferHeight:N,drawingBufferWidth:l,drawingBufferHeight:N,pixelRatio:e.pixelRatio},l={elements:null,primitive:4,count:-1,offset:0,instances:-1},za=B(X,P),oa=L(X,fa,e,function(a){return J.destroyBuffer(a)}),q=W(X,P,oa,fa),J=Z(X,P,za,fa,oa,q,l),da=r(X,Y,fa,e),S=u(X,P,za,function(){Ca.procs.poll()},Q,fa,e),ma=A(X,P,za,fa,e),ra=w(X,P,za,S,ma,fa),Ca=n(X,Y,P,za,oa,q,S,
ra,{},J,da,l,Q,T,e),Y=U(X,ra,Ca.procs.poll,Q,y,P,za),wa=Ca.next,ga=X.canvas,Da=[],ka=[],qa=[],Aa=[e.onDestroy],Ma=null;ga&&(ga.addEventListener("webglcontextlost",ba,!1),ga.addEventListener("webglcontextrestored",h,!1));var F=ra.setFBO=z({framebuffer:M.define.call(null,1,"framebuffer")});t();y=I(z,{clear:function(a){K("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)F(I({framebuffer:a.framebuffer.faces[b]},
a),ca);else F(a,ca);else ca(null,a)},prop:M.define.bind(null,1),context:M.define.bind(null,2),"this":M.define.bind(null,3),draw:z({}),buffer:function(a){return oa.create(a,34962,!1,!1)},elements:function(a){return q.create(a,!1)},texture:S.create2D,cube:S.createCube,renderbuffer:ma.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:J.createVAO,attributes:y,frame:E,on:function(a,b){K.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return E(b);case "lost":c=
ka;break;case "restore":c=qa;break;case "destroy":c=Aa;break;default:K.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:za,hasExtension:function(a){return 0<=za.extensions.indexOf(a.toLowerCase())},read:Y,destroy:function(){Da.length=0;f();ga&&(ga.removeEventListener("webglcontextlost",ba),ga.removeEventListener("webglcontextrestored",h));da.clear();ra.clear();ma.clear();
J.clear();S.clear();q.clear();oa.clear();T&&T.clear();Aa.forEach(function(a){a()})},_gl:X,_refresh:t,poll:function(){c();T&&T.update()},now:a,stats:fa});e.onDone(null,y);return y}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,
"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
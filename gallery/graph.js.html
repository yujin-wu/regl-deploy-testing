<!DOCTYPE html>
      <html>
        <head>
          <title>example/graph.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function z(T,Ha,h){function y(e,b){if(!Ha[e]){if(!T[e]){var t="function"==typeof require&&require;if(!b&&t)return t(e,!0);if(m)return m(e,!0);t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t;}t=Ha[e]={exports:{}};T[e][0].call(t.exports,function(a){return y(T[e][1][a]||a)},t,t.exports,z,T,Ha,h)}return Ha[e].exports}for(var m="function"==typeof require&&require,N=0;N<h.length;N++)y(h[N]);return y}return z})()({1:[function(z,T,Ha){function h(a){return[a%64,a/64|0]}
function y(a){var b=a.tick;pa({framebuffer:x[0]},function(){m.clear({color:[0,0,0,1]});P();fa({vertexState:t[(b+1)%2]})});for(a=0;4>a;++a)M({dest:x[(a+1)%2],src:x[a%2],axis:a%2});H({dest:x[1],src:x[0]});r({dest:t[(b+1)%2],src:t[b%2]});C({dest:t[b%2],src:t[(b+1)%2],field:x[1]})}var m=z("../regl")({extensions:["webgl_draw_buffers","oes_texture_float"]}),N=z("mouse-change")();z=.5/64;var e=new Float32Array(16384),b=new Float32Array(8192);(function(){for(var a=0;64>a;++a)for(var h=0;64>h;++h){var t=64*
a+h;b[2*t]=a/64;b[2*t+1]=h/64;e[4*t]=Math.random();e[4*t+1]=Math.random()}})();T=m.buffer(b);var t=[m.framebuffer({color:m.texture({radius:64,data:e,type:"float"}),depthStencil:!1}),m.framebuffer({radius:64,colorType:"float",depthStencil:!1})],a=[];(function(){for(var b=0;64>b;++b)for(var e=0;64>e;++e){if(63>b){var h=b+64*e,d=b+1+64*e;a.push([h,d],[d,h])}63>e&&(h=b+64*e,d=b+64*(e+1),a.push([h,d],[d,h]))}})();var x=[m.framebuffer({color:m.texture({type:"float",wrap:"repeat",radius:1024}),depthStencil:!1}),
m.framebuffer({color:m.texture({type:"float",wrap:"repeat",radius:1024}),depthStencil:!1})],pa=m({framebuffer:m.prop("framebuffer")}),fa=m({vert:"\n  precision highp float;\n  attribute vec2 id;\n  uniform sampler2D vertexState;\n  void main () {\n    vec4 state = texture2D(vertexState, id);\n    gl_Position = vec4(2.0 * fract(state.xy) - 1.0, 0, 1);\n  }",frag:"\n  precision highp float;\n  void main () {\n    gl_FragColor = vec4(1, 0, 0, 0);\n  }",attributes:{id:T},uniforms:{vertexState:m.prop("vertexState")},
blend:{enable:!0,func:{src:1,dst:1},equation:"add"},depth:{enable:!1,mask:!1},primitive:"points",count:4096,elements:null}),M=m({framebuffer:m.prop("dest"),vert:"\n  precision highp float;\n  attribute vec2 p;\n  varying vec2 uv;\n  void main () {\n    uv = 0.5 * (p + 1.0);\n    gl_Position = vec4(p, 0, 1);\n  }",frag:"\n  precision highp float;\n  uniform sampler2D src;\n  uniform vec2 axis;\n  varying vec2 uv;\n  void main () {\n    float f = 0.0;\n    for (int i = -16; i <= 16; ++i) {\n      f += (17.0 - abs(float(i))) / 33.0 *\n          texture2D(src, axis * float(i) + uv).r;\n    }\n    gl_FragColor = vec4(f, 0, 0, 1);\n  }",
attributes:{p:[-4,0,4,4,4,-4]},uniforms:{src:function(a,b){return b.src},axis:function(a,b){var e=[0,0];e[b.axis]=1/1024;return e}},depth:{enable:!1,mask:!1},count:3}),H=m({framebuffer:m.prop("dest"),vert:"\n  precision highp float;\n  attribute vec2 p;\n  varying vec2 uv;\n  void main () {\n    uv = 0.5 * (p + 1.0);\n    gl_Position = vec4(p, 0, 1);\n  }",frag:"\n  precision highp float;\n  uniform sampler2D src;\n  uniform vec2 deriv;\n  varying vec2 uv;\n  void main () {\n    float f01 = texture2D(src, uv - vec2(deriv.x, 0)).x;\n    float f21 = texture2D(src, uv + vec2(deriv.x, 0)).x;\n    float f10 = texture2D(src, uv - vec2(0, deriv.y)).x;\n    float f12 = texture2D(src, uv + vec2(0, deriv.y)).x;\n    gl_FragColor = vec4(f21 - f01, f12 - f10, 0, 1);\n  }",
attributes:{p:[-4,0,4,4,4,-4]},uniforms:{src:m.prop("src"),deriv:function(a,b){return[1/b.src.width,1/b.src.height]}},depth:{enable:!1,mask:!1},count:3}),r=m({framebuffer:m.prop("dest"),vert:"\n  precision highp float;\n  attribute vec4 edge;\n  varying vec2 force;\n  uniform sampler2D vertexState;\n  uniform float restLength, stiffness;\n  void main () {\n    vec4 s0 = texture2D(vertexState, edge.rg);\n    vec4 s1 = texture2D(vertexState, edge.ba);\n    vec2 d = s1.xy - s0.xy;\n    float l = max(length(d), 0.001);\n    force = stiffness * log(l / restLength) * d / l;\n    gl_Position = vec4(2.0 * edge.xy - 1.0 + 1.0 / 64.0, 0, 1);\n  }",
frag:"\n  precision highp float;\n  varying vec2 force;\n  void main () {\n    gl_FragColor = vec4(0, 0, force);\n  }",attributes:{edge:a.map(function(a){var b=h(a[0]);a=h(a[1]);return[b[0]/64,b[1]/64,a[0]/64,a[1]/64]})},uniforms:{vertexState:m.prop("src"),restLength:z,stiffness:.08},blend:{enable:!0,func:{src:1,dst:1},equation:"add"},depth:{enable:!1,mask:!1},count:a.length,primitive:"points"}),C=m({framebuffer:m.prop("dest"),vert:"\n  precision highp float;\n  attribute vec2 p;\n  varying vec2 id;\n  void main () {\n    id = 0.5 * (p + 1.0);\n    gl_Position = vec4(p, 0, 1);\n  }",
frag:"\n  precision highp float;\n  uniform sampler2D vertexState, field;\n  uniform float temperature, t;\n  varying vec2 id;\n\n  float rnd (vec2 co) {\n    return fract(sin(t*0.1+dot(co.xy, vec2(12.9898,78.233))) * 43758.5453);\n  }\n\n  void main () {\n    vec4 state = texture2D(vertexState, id);\n    vec2 p = state.rg;\n    vec2 v = state.ba;\n    vec2 force = texture2D(field, p).xy;\n    p += 1.0E-4 * v;\n    v = float(0.98) * (v - float(0.05) * force);\n    vec2 jitter = vec2(rnd(id), rnd(id + 1000.0)) - 0.5;\n    gl_FragColor = vec4(p + temperature * jitter, v);\n  }",
attributes:{p:[-4,0,4,-4,4,4]},uniforms:{vertexState:m.prop("src"),field:m.prop("field"),temperature:function(a){return 1/(.5*a.tick+20)},t:m.context("tick")},count:3}),A=m({vert:"\n  precision highp float;\n  attribute vec2 id;\n  uniform sampler2D vertexState;\n  void main () {\n    vec4 state = texture2D(vertexState, id);\n    gl_PointSize = 2.0;\n    gl_Position = vec4(2.0 * fract(state.xy) - 1.0, 0, 1);\n  }",frag:"\n  precision highp float;\n  void main () {\n    gl_FragColor = vec4(0, 0, 0, 1);\n  }",
attributes:{id:T},uniforms:{vertexState:function(a){return t[a.tick%2]}},depth:{enable:!1,mask:!1},primitive:"points",count:4096,elements:null});z=2;z>m.limits.lineWidthDims[1]&&(z=m.limits.lineWidthDims[1]);var B=m({vert:"\n  precision highp float;\n  attribute vec4 id;\n  attribute float arcDir;\n  uniform float dir;\n  uniform sampler2D vertexState;\n  void main () {\n    float side = arcDir + dir - 2.0 * dir * arcDir;\n    vec2 s0 = texture2D(vertexState, id.rg).xy;\n    vec2 s1 = texture2D(vertexState, id.ba).xy;\n    vec2 shift = mix(fract(s0) - s0, fract(s1) - s1, side);\n    gl_Position = vec4(2.0 * (s0.xy + shift) - 1.0, 0, 1);\n  }",
frag:"\n  void main () {\n    gl_FragColor = vec4(0.1, 0, 1, 1);\n  }",attributes:{id:a.map(function(a){var b=h(a[0]);a=h(a[1]);return[b[0]/64,b[1]/64,a[0]/64,a[1]/64]}),arcDir:a.map(function(a,b){return b%2})},uniforms:{vertexState:function(a){return t[a.tick%2]},dir:m.prop("dir")},depth:{enable:!1,mask:!1},count:a.length,primitive:"lines",lineWidth:z}),P=m({vert:"\n  uniform vec2 mouse;\n  attribute float p;\n  void main () {\n    gl_PointSize = 32.0;\n    gl_Position = vec4(mouse, p, 1);\n  }",
frag:"\n  precision highp float;\n  uniform float strength;\n  void main () {\n    float s = strength * exp(-16.0 * dot(gl_PointCoord.xy, gl_PointCoord.xy));\n    gl_FragColor = vec4(s, 0, 0, 1);\n  }",attributes:{p:[0]},uniforms:{mouse:function(a){var b=a.pixelRatio;return[2*b*N.x/a.drawingBufferWidth-1,1-2*b*N.y/a.drawingBufferHeight]},strength:function(){return N.buttons?5:1}},count:1,primitive:"points"});m.frame(function(a){y(a);m.clear({color:[1,1,1,1]});B([{dir:0},{dir:1}]);A()})},{"../regl":40,
"mouse-change":38}],2:[function(z,T,Ha){function h(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var y=z("./util/sorted-object-keys"),m=z("./util/check"),N=z("./util/values"),e=z("./constants/dtypes.json"),b=z("./util/is-typed-array"),t=z("./util/is-ndarray"),a=z("./constants/primitives.json"),x="attributes elements offset count primitive instances".split(" ");T.exports=function(pa,fa,M,H,r,C,A){function B(a){if(a!==
V.currentVAO){var b=fa.oes_vertex_array_object;a?b.bindVertexArrayOES(a.vao):b.bindVertexArrayOES(null);V.currentVAO=a}}function P(a){if(a!==V.currentVAO){if(a)a.bindAttrs();else{for(var b=fa.angle_instanced_arrays,e=0;e<f.length;++e){var g=f[e];g.buffer?(pa.enableVertexAttribArray(e),g.buffer.bind(),pa.vertexAttribPointer(e,g.size,g.type,g.normalized,g.stride,g.offfset),b&&g.divisor&&b.vertexAttribDivisorANGLE(e,g.divisor)):(pa.disableVertexAttribArray(e),pa.vertexAttrib4f(e,g.x,g.y,g.z,g.w))}A.elements?
pa.bindBuffer(34963,A.elements.buffer.buffer):pa.bindBuffer(34963,null)}V.currentVAO=a}}function R(){N(n).forEach(function(a){a.destroy()})}function L(){this.id=++g;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=fa.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;n[this.id]=this;this.buffers=[]}function z(){fa.oes_vertex_array_object&&N(n).forEach(function(a){a.refresh()})}var d=M.maxAttributes,f=Array(d);
for(M=0;M<d;++M)f[M]=new h;var g=0,n={},V={Record:h,scope:{},state:f,currentVAO:null,targetVAO:null,restore:fa.oes_vertex_array_object?z:function(){},createVAO:function(g){function q(g){var aa;if(Array.isArray(g))aa=g,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{m("object"===typeof g,"invalid arguments for create vao");m("attributes"in g,"must specify attributes for vao");if(g.elements){var c=g.elements;f.ownsElements?
("function"===typeof c&&"elements"===c._reglType?f.elements.destroy():f.elements(c),f.ownsElements=!1):C.getElements(g.elements)?(f.elements=g.elements,f.ownsElements=!1):(f.elements=C.create(g.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;aa=g.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in g&&(f.offset=g.offset|0);"count"in g&&(f.count=g.count|0);"instances"in
g&&(f.instances=g.instances|0);"primitive"in g&&(m(g.primitive in a,"bad primitive type: "+g.primitive),f.primitive=a[g.primitive]);m.optional(function(){for(var a=y(g),c=0;c<a.length;++c)m(0<=x.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+x)});m(Array.isArray(aa),"attributes must be an array")}m(aa.length<d,"too many attributes");m(0<aa.length,"must specify at least one attribute");var c={},k=f.attributes;k.length=aa.length;for(var ba=0;ba<aa.length;++ba){var R=aa[ba],n=
k[ba]=new h,A=R.data||R;if(Array.isArray(A)||b(A)||t(A)){var L;f.buffers[ba]&&(L=f.buffers[ba],b(A)&&L._buffer.byteLength>=A.byteLength?L.subdata(A):(L.destroy(),f.buffers[ba]=null));f.buffers[ba]||(L=f.buffers[ba]=r.create(R,34962,!1,!0));n.buffer=r.getBuffer(L);n.size=n.buffer.dimension|0;n.normalized=!1;n.type=n.buffer.dtype;n.offset=0;n.stride=0;n.divisor=0;n.state=1;c[ba]=1}else r.getBuffer(R)?(n.buffer=r.getBuffer(R),n.size=n.buffer.dimension|0,n.normalized=!1,n.type=n.buffer.dtype,n.offset=
0,n.stride=0,n.divisor=0,n.state=1):r.getBuffer(R.buffer)?(n.buffer=r.getBuffer(R.buffer),n.size=(+R.size||n.buffer.dimension)|0,n.normalized=!!R.normalized||!1,"type"in R?(m.parameter(R.type,e,"invalid buffer type"),n.type=e[R.type]):n.type=n.buffer.dtype,n.offset=(R.offset||0)|0,n.stride=(R.stride||0)|0,n.divisor=(R.divisor||0)|0,n.state=1,m(1<=n.size&&4>=n.size,"size must be between 1 and 4"),m(0<=n.offset,"invalid offset"),m(0<=n.stride&&255>=n.stride,"stride must be between 0 and 255"),m(0<=
n.divisor,"divisor must be positive"),m(!n.divisor||!!fa.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in R?(m(0<ba,"first attribute must not be a constant"),n.x=+R.x||0,n.y=+R.y||0,n.z=+R.z||0,n.w=+R.w||0,n.state=2):m(!1,"invalid attribute spec for location "+ba)}for(L=0;L<f.buffers.length;++L)!c[L]&&f.buffers[L]&&(f.buffers[L].destroy(),f.buffers[L]=null);f.refresh();return q}var f=new L;H.vaoCount+=1;q.destroy=function(){for(var a=0;a<f.buffers.length;++a)f.buffers[a]&&
f.buffers[a].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};q._vao=f;q._reglType="vao";return q(g)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var b=0;b<f.length;++b){var e=f[b];e.buffer===a&&(pa.disableVertexAttribArray(b),e.buffer=null)}},setVAO:fa.oes_vertex_array_object?B:P,clear:fa.oes_vertex_array_object?R:function(){}};L.prototype.bindAttrs=function(){for(var a=fa.angle_instanced_arrays,
b=this.attributes,e=0;e<b.length;++e){var g=b[e];g.buffer?(pa.enableVertexAttribArray(e),pa.bindBuffer(34962,g.buffer.buffer),pa.vertexAttribPointer(e,g.size,g.type,g.normalized,g.stride,g.offset),a&&g.divisor&&a.vertexAttribDivisorANGLE(e,g.divisor)):(pa.disableVertexAttribArray(e),pa.vertexAttrib4f(e,g.x,g.y,g.z,g.w))}for(a=b.length;a<d;++a)pa.disableVertexAttribArray(a);(a=C.getElements(this.elements))?pa.bindBuffer(34963,a.buffer.buffer):pa.bindBuffer(34963,null)};L.prototype.refresh=function(){var a=
fa.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),V.currentVAO=null,a.bindVertexArrayOES(null))};L.prototype.destroy=function(){if(this.vao){var a=fa.oes_vertex_array_object;this===V.currentVAO&&(V.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);n[this.id]&&(delete n[this.id],--H.vaoCount)};return V}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(z,T,Ha){function h(a){return M[Object.prototype.toString.call(a)]|0}function y(a,b){for(var e=0;e<b.length;++e)a[e]=b[e]}function m(a,b,e,h,t,m,d){for(var f=0,g=0;g<e;++g)for(var n=0;n<h;++n)a[f++]=b[t*g+m*n+d]}var N=z("./util/sorted-object-keys"),e=z("./util/check"),b=z("./util/is-typed-array"),t=z("./util/is-ndarray"),a=z("./util/values"),x=z("./util/pool");Ha=z("./util/flatten");
var pa=Ha.flatten,fa=Ha.shape,M=z("./constants/arraytypes.json"),H=z("./constants/dtypes.json"),r=z("./constants/usage.json"),C=[];C[5120]=1;C[5122]=2;C[5124]=4;C[5121]=1;C[5123]=2;C[5125]=4;C[5126]=4;T.exports=function(A,B,M,R){function L(a){this.id=g++;this.buffer=A.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;M.profile&&(this.stats={size:0})}function z(a,b,e){a.byteLength=b.byteLength;A.bufferData(a.type,b,e)}function d(a,
g,f,d,n,c){a.usage=f;if(Array.isArray(g)){if(a.dtype=d||5126,0<g.length)if(Array.isArray(g[0])){n=fa(g);for(var k=d=1;k<n.length;++k)d*=n[k];a.dimension=d;g=pa(g,n,a.dtype);z(a,g,f);c?a.persistentData=g:x.freeType(g)}else"number"===typeof g[0]?(a.dimension=n,n=x.allocType(a.dtype,g.length),y(n,g),z(a,n,f),c?a.persistentData=n:x.freeType(n)):b(g[0])?(a.dimension=g[0].length,a.dtype=d||h(g[0])||5126,g=pa(g,[g.length,g[0].length],a.dtype),z(a,g,f),c?a.persistentData=g:x.freeType(g)):e.raise("invalid buffer data")}else if(b(g))a.dtype=
d||h(g),a.dimension=n,z(a,g,f),c&&(a.persistentData=new Uint8Array(new Uint8Array(g.buffer)));else if(t(g)){n=g.shape;var ba=g.stride,k=g.offset,R=0,r=0,L=0,A=0;1===n.length?(R=n[0],r=1,L=ba[0],A=0):2===n.length?(R=n[0],r=n[1],L=ba[0],A=ba[1]):e.raise("invalid shape");a.dtype=d||h(g.data)||5126;a.dimension=r;n=x.allocType(a.dtype,R*r);m(n,g.data,R,r,L,A,k);z(a,n,f);c?a.persistentData=n:x.freeType(n)}else g instanceof ArrayBuffer?(a.dtype=5121,a.dimension=n,z(a,g,f),c&&(a.persistentData=new Uint8Array(new Uint8Array(g)))):
e.raise("invalid buffer data")}function f(a){B.bufferCount--;R(a);var b=a.buffer;e(b,"buffer must not be deleted already");A.deleteBuffer(b);a.buffer=null;delete n[a.id]}var g=0,n={};L.prototype.bind=function(){A.bindBuffer(this.type,this.buffer)};L.prototype.destroy=function(){f(this)};var V=[];M.profile&&(B.getTotalBufferSize=function(){var a=0;N(n).forEach(function(b){a+=n[b].stats.size});return a});return{create:function(a,g,R,I){function V(a){var c=35044,g=null,f=0,q=0,n=1;Array.isArray(a)||
b(a)||t(a)||a instanceof ArrayBuffer?g=a:"number"===typeof a?f=a|0:a&&(e.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(e(null===g||Array.isArray(g)||b(g)||t(g),"invalid data for buffer"),g=a.data),"usage"in a&&(e.parameter(a.usage,r,"invalid buffer usage"),c=r[a.usage]),"type"in a&&(e.parameter(a.type,H,"invalid buffer type"),q=H[a.type]),"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),n=a.dimension|0),"length"in a&&(e.nni(f,"buffer length must be a nonnegative integer"),
f=a.length|0));k.bind();g?d(k,g,c,q,n,I):(f&&A.bufferData(k.type,f,c),k.dtype=q||5121,k.usage=c,k.dimension=n,k.byteLength=f);M.profile&&(k.stats.size=k.byteLength*C[k.dtype]);return V}function c(a,b){e(b+a.byteLength<=k.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+b+" to a buffer of size "+k.byteLength);A.bufferSubData(k.type,b,a)}B.bufferCount++;var k=new L(g);n[k.id]=k;R||V(a);V._reglType="buffer";V._buffer=k;V.subdata=
function(a,g){var f=(g||0)|0,q;k.bind();if(b(a)||a instanceof ArrayBuffer)c(a,f);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var n=x.allocType(k.dtype,a.length);y(n,a);c(n,f);x.freeType(n)}else Array.isArray(a[0])||b(a[0])?(q=fa(a),n=pa(a,q,k.dtype),c(n,f),x.freeType(n)):e.raise("invalid buffer data")}else if(t(a)){q=a.shape;var d=a.stride,R=n=0,r=0,L=0;1===q.length?(n=q[0],R=1,r=d[0],L=0):2===q.length?(n=q[0],R=q[1],r=d[0],L=d[1]):e.raise("invalid shape");q=Array.isArray(a.data)?
k.dtype:h(a.data);q=x.allocType(q,n*R);m(q,a.data,n,R,r,L,a.offset);c(q,f);x.freeType(q)}else e.raise("invalid data for buffer subdata");return V};M.profile&&(V.stats=k.stats);V.destroy=function(){f(k)};return V},createStream:function(a,b){var g=V.pop();g||(g=new L(a));g.bind();d(g,b,35040,0,1,!1);return g},destroyStream:function(a){V.push(a)},clear:function(){a(n).forEach(f);V.forEach(f)},getBuffer:function(a){return a&&a._buffer instanceof L?a._buffer:null},restore:function(){a(n).forEach(function(a){a.buffer=
A.createBuffer();A.bindBuffer(a.type,a.buffer);A.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:d}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(z,T,Ha){T.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(z,T,Ha){T.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(z,T,Ha){T.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(z,T,Ha){T.exports={"static":35044,
dynamic:35048,stream:35040}},{}],8:[function(z,T,Ha){function h(a){return Array.isArray(a)||M(a)||H(a)}function y(a){return a.sort(function(a,b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function m(a,b,g,e){this.thisDep=a;this.contextDep=b;this.propDep=g;this.append=e}function N(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function e(a){return new m(!1,!1,!1,a)}function b(a,b){var g=a.type;if(0===g)return g=a.data.length,new m(!0,1<=g,2<=g,b);if(4===g)return g=a.data,new m(g.thisDep,
g.contextDep,g.propDep,b);if(5===g)return new m(!1,!1,!1,b);if(6===g){for(var e=g=!1,f=!1,c=0;c<a.data.length;++c){var k=a.data[c];1===k.type?f=!0:2===k.type?e=!0:3===k.type?g=!0:0===k.type?(g=!0,k=k.data,1<=k&&(e=!0),2<=k&&(f=!0)):4===k.type&&(g=g||k.data.thisDep,e=e||k.data.contextDep,f=f||k.data.propDep)}return new m(g,e,f,b)}return new m(3===g,2===g,1===g,b)}var t=z("./util/sorted-object-keys"),a=z("./util/check"),x=z("./util/extend"),pa=z("./util/codegen"),fa=z("./util/loop"),M=z("./util/is-typed-array"),
H=z("./util/is-ndarray"),r=z("./util/is-array-like"),C=z("./dynamic"),A=z("./constants/primitives.json"),B=z("./constants/dtypes.json"),P=["x","y","z","w"],R="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),L={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wd="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),d={never:512,less:513,"<":513,equal:514,"=":514,
"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},f={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},g={frag:35632,vert:35633},n={cw:2304,ccw:2305},V=new m(!1,!1,!1,function(){});T.exports=function(M,q,H,I,ea,c,k,ba,la,z,gb,wc,ma,Na,Z){function K(a){return a.replace(".","_")}function O(a,p,b){var c=K(a);da.push(a);u[c]=F[c]=!!b;D[c]=p}function U(a,p,b){var c=
K(a);da.push(a);Array.isArray(b)?(F[c]=b.slice(),u[c]=b.slice()):F[c]=u[c]=b;xa[c]=p}function qa(){var b=pa(),p=b.link,c=b.global;b.id=ic++;b.batchId="0";var g=p(na),e=b.shared={props:"a0"};t(na).forEach(function(a){e[a]=c.def(g,".",a)});a.optional(function(){b.CHECK=p(a);b.commandStr=a.guessCommand();b.command=p(b.commandStr);b.assert=function(a,b,c){a("if(!(",b,"))",this.CHECK,".commandRaise(",p(c),",",this.command,");")};l.invalidBlendCombinations=Wd});var D=b.next={},k=b.current={};t(xa).forEach(function(a){Array.isArray(F[a])&&
(D[a]=c.def(e.next,".",a),k[a]=c.def(e.current,".",a))});var f=b.constants={};t(l).forEach(function(a){f[a]=c.def(JSON.stringify(l[a]))});b.invoke=function(a,c){switch(c.type){case 0:var g=["this",e.context,e.props,b.batchId];return a.def(p(c.data),".call(",g.slice(0,Math.max(c.data.length+1,4)),")");case 1:return a.def(e.props,c.data);case 2:return a.def(e.context,c.data);case 3:return a.def("this",c.data);case 4:return c.data.append(b,a),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(p){return b.invoke(a,
p)})}};b.attribCache={};var Kd={};b.scopeAttrib=function(a){a=q.id(a);if(a in Kd)return Kd[a];var b=z.scope[a];b||(b=z.scope[a]=new ia);return Kd[a]=p(b)};return b}function G(a){var p=a["static"];a=a.dynamic;var c;if("profile"in p){var g=!!p.profile;c=e(function(a,b){return g});c.enable=g}else if("profile"in a){var l=a.profile;c=b(l,function(a,b){return a.invoke(b,l)})}return c}function Zb(c,p){var g=c["static"],l=c.dynamic;if("framebuffer"in g){var D=g.framebuffer;return D?(D=ba.getFramebuffer(D),
a.command(D,"invalid framebuffer object"),e(function(a,b){var p=a.link(D),c=a.shared;b.set(c.framebuffer,".next",p);c=c.context;b.set(c,".framebufferWidth",p+".width");b.set(c,".framebufferHeight",p+".height");return p})):e(function(a,b){var p=a.shared;b.set(p.framebuffer,".next","null");p=p.context;b.set(p,".framebufferWidth",p+".drawingBufferWidth");b.set(p,".framebufferHeight",p+".drawingBufferHeight");return"null"})}if("framebuffer"in l){var k=l.framebuffer;return b(k,function(b,p){var c=b.invoke(p,
k),g=b.shared,l=g.framebuffer,e=p.def(l,".getFramebuffer(",c,")");a.optional(function(){b.assert(p,"!"+c+"||"+e,"invalid framebuffer object")});p.set(l,".next",e);g=g.context;p.set(g,".framebufferWidth",e+"?"+e+".width:"+g+".drawingBufferWidth");p.set(g,".framebufferHeight",e+"?"+e+".height:"+g+".drawingBufferHeight");return e})}return null}function $a(c,p,g){function l(c){if(c in e){var X=e[c];a.commandType(X,"object","invalid "+c,g.commandStr);var k=!0,nd=X.x|0,f=X.y|0,n,q;"width"in X?(n=X.width|
0,a.command(0<=n,"invalid "+c,g.commandStr)):k=!1;"height"in X?(q=X.height|0,a.command(0<=q,"invalid "+c,g.commandStr)):k=!1;return new m(!k&&p&&p.thisDep,!k&&p&&p.contextDep,!k&&p&&p.propDep,function(a,p){var b=a.shared.context,c=n;"width"in X||(c=p.def(b,".","framebufferWidth","-",nd));var g=q;"height"in X||(g=p.def(b,".","framebufferHeight","-",f));return[nd,f,c,g]})}if(c in D){var d=D[c],k=b(d,function(p,b){var g=p.invoke(b,d);a.optional(function(){p.assert(b,g+"&&typeof "+g+'==="object"',"invalid "+
c)});var l=p.shared.context,e=b.def(g,".x|0"),X=b.def(g,".y|0"),D=b.def('"width" in ',g,"?",g,".width|0:","(",l,".","framebufferWidth","-",e,")"),k=b.def('"height" in ',g,"?",g,".height|0:","(",l,".","framebufferHeight","-",X,")");a.optional(function(){p.assert(b,D+">=0&&"+k+">=0","invalid "+c)});return[e,X,D,k]});p&&(k.thisDep=k.thisDep||p.thisDep,k.contextDep=k.contextDep||p.contextDep,k.propDep=k.propDep||p.propDep);return k}return p?new m(p.thisDep,p.contextDep,p.propDep,function(a,b){var p=a.shared.context;
return[0,0,b.def(p,".","framebufferWidth"),b.def(p,".","framebufferHeight")]}):null}var e=c["static"],D=c.dynamic;if(c=l("viewport")){var k=c;c=new m(c.thisDep,c.contextDep,c.propDep,function(a,b){var p=k.append(a,b),c=a.shared.context;b.set(c,".viewportWidth",p[2]);b.set(c,".viewportHeight",p[3]);return p})}return{viewport:c,scissor_box:l("scissor.box")}}function Q(b,p){var c=b["static"];if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<t(p.dynamic).length)return null;var c=p["static"],
g=t(c);if(0<g.length&&"number"===typeof c[g[0]]){for(var l=[],e=0;e<g.length;++e)a("number"===typeof c[g[e]],"must specify all vertex attribute locations when using vaos"),l.push([c[g[e]]|0,g[e]]);return l}}return null}function v(c,p,l){function D(c){if(c in k){var p=q.id(k[c]);a.optional(function(){gb.shader(g[c],p,a.guessCommand())});var l=e(function(){return p});l.id=p;return l}if(c in f){var X=f[c];return b(X,function(b,p){var l=b.invoke(p,X),e=p.def(b.shared.strings,".id(",l,")");a.optional(function(){p(b.shared.shader,
".shader(",g[c],",",e,",",b.command,");")});return e})}return null}var k=c["static"],f=c.dynamic,n=D("frag"),d=D("vert"),Kd=null;N(n)&&N(d)?(Kd=gb.program(d.id,n.id,null,l),c=e(function(a,c){return a.link(Kd)})):c=new m(n&&n.thisDep||d&&d.thisDep,n&&n.contextDep||d&&d.contextDep,n&&n.propDep||d&&d.propDep,function(c,b){var p=c.shared.shader,g;g=n?n.append(c,b):b.def(p,".","frag");var l;l=d?d.append(c,b):b.def(p,".","vert");var e=p+".program("+l+","+g;a.optional(function(){e+=","+c.command});return b.def(e+
")")});return{frag:n,vert:d,progVar:c,program:Kd}}function ja(g,p){function l(c,g){if(c in D){var X=D[c]|0;g?f.offset=X:f.instances=X;a.command(!g||0<=X,"invalid "+c,p.commandStr);return e(function(a,c){g&&(a.OFFSET=X);return X})}if(c in k){var nd=k[c];return b(nd,function(b,p){var l=b.invoke(p,nd);g&&(b.OFFSET=l,a.optional(function(){b.assert(p,l+">=0","invalid "+c)}));return l})}if(g){if(Kd)return e(function(a,c){return a.OFFSET=0});if(n)return new m(d.thisDep,d.contextDep,d.propDep,function(a,
c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(n)return new m(d.thisDep,d.contextDep,d.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var D=g["static"],k=g.dynamic,f={},n=!1,d=function(){if("vao"in D){var a=D.vao;null!==a&&null===z.getVAO(a)&&(a=z.createVAO(a));n=!0;f.vao=a;return e(function(c){var b=z.getVAO(a);return b?c.link(b):"null"})}if("vao"in k){n=!0;var c=k.vao;return b(c,function(a,
b){var p=a.invoke(b,c);return b.def(a.shared.vao+".getVAO("+p+")")})}return null}(),Kd=!1,q=function(){if("elements"in D){var g=D.elements;f.elements=g;if(h(g)){var l=f.elements=c.create(g,!0),g=c.getElements(l);Kd=!0}else g&&(g=c.getElements(g),Kd=!0,a.command(g,"invalid elements",p.commandStr));l=e(function(a,c){if(g){var b=a.link(g);return a.ELEMENTS=b}return a.ELEMENTS=null});l.value=g;return l}if("elements"in k){Kd=!0;var X=k.elements;return b(X,function(c,b){var p=c.shared,g=p.isBufferArgs,
p=p.elements,l=c.invoke(b,X),e=b.def("null"),g=b.def(g,"(",l,")"),D=c.cond(g).then(e,"=",p,".createStream(",l,");")["else"](e,"=",p,".getElements(",l,");");a.optional(function(){c.assert(D["else"],"!"+l+"||"+e,"invalid elements")});b.entry(D);b.exit(c.cond(g).then(p,".destroyStream(",e,");"));return c.ELEMENTS=e})}return n?new m(d.thisDep,d.contextDep,d.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),
nd=l("offset",!0),u=function(){if("primitive"in D){var c=D.primitive;f.primitive=c;a.commandParameter(c,A,"invalid primitve",p.commandStr);return e(function(a,b){return A[c]})}if("primitive"in k){var g=k.primitive;return b(g,function(c,b){var p=c.constants.primTypes,l=c.invoke(b,g);a.optional(function(){c.assert(b,l+" in "+p,"invalid primitive, must be one of "+t(A))});return b.def(p,"[",l,"]")})}return Kd?N(q)?q.value?e(function(a,c){return c.def(a.ELEMENTS,".primType")}):e(function(){return 4}):
new m(q.thisDep,q.contextDep,q.propDep,function(a,c){var b=a.ELEMENTS;return c.def(b,"?",b,".primType:",4)}):n?new m(d.thisDep,d.contextDep,d.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),v=function(){if("count"in D){var c=D.count|0;f.count=c;a.command("number"===typeof c&&0<=c,"invalid vertex count",p.commandStr);return e(function(){return c})}if("count"in k){var g=k.count;return b(g,function(c,b){var p=c.invoke(b,g);a.optional(function(){c.assert(b,
"typeof "+p+'==="number"&&'+p+">=0&&"+p+"===("+p+"|0)","invalid vertex count")});return p})}if(Kd){if(N(q)){if(q)return nd?new m(nd.thisDep,nd.contextDep,nd.propDep,function(c,b){var p=b.def(c.ELEMENTS,".vertCount-",c.OFFSET);a.optional(function(){c.assert(b,p+">=0","invalid vertex offset/element buffer too small")});return p}):e(function(a,c){return c.def(a.ELEMENTS,".vertCount")});var l=e(function(){return-1});a.optional(function(){l.MISSING=!0});return l}var X=new m(q.thisDep||nd.thisDep,q.contextDep||
nd.contextDep,q.propDep||nd.propDep,function(a,c){var b=a.ELEMENTS;return a.OFFSET?c.def(b,"?",b,".vertCount-",a.OFFSET,":-1"):c.def(b,"?",b,".vertCount:-1")});a.optional(function(){X.DYNAMIC=!0});return X}return n?new m(d.thisDep,d.contextDep,d.propDep,function(a,c){return c.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),na=l("instances",!1);return{elements:q,primitive:u,count:v,instances:na,offset:nd,vao:d,vaoActive:n,elementsActive:Kd,"static":f}}function ca(c,p){var g=
c["static"],l=c.dynamic,D={};da.forEach(function(c){function X(a,p){if(c in g){var f=a(g[c]);D[k]=e(function(){return f})}else if(c in l){var n=l[c];D[k]=b(n,function(a,c){return p(a,c,a.invoke(c,n))})}}var k=K(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return X(function(b){a.commandType(b,"boolean",c,p.commandStr);return b},
function(b,p,g){a.optional(function(){b.assert(p,"typeof "+g+'==="boolean"',"invalid flag "+c,b.commandStr)});return g});case "depth.func":return X(function(b){a.commandParameter(b,d,"invalid "+c,p.commandStr);return d[b]},function(b,p,g){var l=b.constants.compareFuncs;a.optional(function(){b.assert(p,g+" in "+l,"invalid "+c+", must be one of "+t(d))});return p.def(l,"[",g,"]")});case "depth.range":return X(function(c){a.command(r(c)&&2===c.length&&"number"===typeof c[0]&&"number"===typeof c[1]&&
c[0]<=c[1],"depth range is 2d array",p.commandStr);return c},function(c,b,p){a.optional(function(){c.assert(b,c.shared.isArrayLike+"("+p+")&&"+p+".length===2&&typeof "+p+'[0]==="number"&&typeof '+p+'[1]==="number"&&'+p+"[0]<="+p+"[1]","depth range must be a 2d array")});var g=b.def("+",p,"[0]"),l=b.def("+",p,"[1]");return[g,l]});case "blend.func":return X(function(c){a.commandType(c,"object","blend.func",p.commandStr);var b="srcRGB"in c?c.srcRGB:c.src,g="srcAlpha"in c?c.srcAlpha:c.src,l="dstRGB"in
c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;a.commandParameter(b,L,k+".srcRGB",p.commandStr);a.commandParameter(g,L,k+".srcAlpha",p.commandStr);a.commandParameter(l,L,k+".dstRGB",p.commandStr);a.commandParameter(c,L,k+".dstAlpha",p.commandStr);a.command(-1===Wd.indexOf(b+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+l+")",p.commandStr);return[L[b],L[l],L[g],L[c]]},function(b,p,g){function l(X,D){var k=p.def('"',X,D,'" in ',g,"?",g,".",X,D,":",g,".",X);a.optional(function(){b.assert(p,
k+" in "+e,"invalid "+c+"."+X+D+", must be one of "+t(L))});return k}var e=b.constants.blendFuncs;a.optional(function(){b.assert(p,g+"&&typeof "+g+'==="object"',"invalid blend func, must be an object")});var X=l("src","RGB"),D=l("dst","RGB");a.optional(function(){b.assert(p,b.constants.invalidBlendCombinations+".indexOf("+X+'+", "+'+D+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var k=p.def(e,"[",X,"]"),f=p.def(e,"[",l("src","Alpha"),"]"),n=p.def(e,"[",D,"]"),d=p.def(e,"[",
l("dst","Alpha"),"]");return[k,n,f,d]});case "blend.equation":return X(function(b){if("string"===typeof b)return a.commandParameter(b,ta,"invalid "+c,p.commandStr),[ta[b],ta[b]];if("object"===typeof b)return a.commandParameter(b.rgb,ta,c+".rgb",p.commandStr),a.commandParameter(b.alpha,ta,c+".alpha",p.commandStr),[ta[b.rgb],ta[b.alpha]];a.commandRaise("invalid blend.equation",p.commandStr)},function(b,p,g){var l=b.constants.blendEquations,e=p.def(),X=p.def(),D=b.cond("typeof ",g,'==="string"');a.optional(function(){function a(c,
p,g){b.assert(c,g+" in "+l,"invalid "+p+", must be one of "+t(ta))}a(D.then,c,g);b.assert(D["else"],g+"&&typeof "+g+'==="object"',"invalid "+c);a(D["else"],c+".rgb",g+".rgb");a(D["else"],c+".alpha",g+".alpha")});D.then(e,"=",X,"=",l,"[",g,"];");D["else"](e,"=",l,"[",g,".rgb];",X,"=",l,"[",g,".alpha];");p(D);return[e,X]});case "blend.color":return X(function(c){a.command(r(c)&&4===c.length,"blend.color must be a 4d array",p.commandStr);return fa(4,function(a){return+c[a]})},function(c,b,p){a.optional(function(){c.assert(b,
c.shared.isArrayLike+"("+p+")&&"+p+".length===4","blend.color must be a 4d array")});return fa(4,function(a){return b.def("+",p,"[",a,"]")})});case "stencil.mask":return X(function(c){a.commandType(c,"number",k,p.commandStr);return c|0},function(c,b,p){a.optional(function(){c.assert(b,"typeof "+p+'==="number"',"invalid stencil.mask")});return b.def(p,"|0")});case "stencil.func":return X(function(b){a.commandType(b,"object",k,p.commandStr);var g=b.cmp||"keep",l=b.ref||0;b="mask"in b?b.mask:-1;a.commandParameter(g,
d,c+".cmp",p.commandStr);a.commandType(l,"number",c+".ref",p.commandStr);a.commandType(b,"number",c+".mask",p.commandStr);return[d[g],l,b]},function(c,b,p){var g=c.constants.compareFuncs;a.optional(function(){function a(){c.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(p+"&&typeof ",p,'==="object"');a('!("cmp" in ',p,")||(",p,".cmp in ",g,")")});var l=b.def('"cmp" in ',p,"?",g,"[",p,".cmp]",":",7680),e=b.def(p,".ref|0"),X=b.def('"mask" in ',p,"?",p,".mask|0:-1");return[l,
e,X]});case "stencil.opFront":case "stencil.opBack":return X(function(b){a.commandType(b,"object",k,p.commandStr);var g=b.fail||"keep",l=b.zfail||"keep";b=b.zpass||"keep";a.commandParameter(g,f,c+".fail",p.commandStr);a.commandParameter(l,f,c+".zfail",p.commandStr);a.commandParameter(b,f,c+".zpass",p.commandStr);return["stencil.opBack"===c?1029:1028,f[g],f[l],f[b]]},function(b,p,g){function l(X){a.optional(function(){b.assert(p,'!("'+X+'" in '+g+")||("+g+"."+X+" in "+e+")","invalid "+c+"."+X+", must be one of "+
t(f))});return p.def('"',X,'" in ',g,"?",e,"[",g,".",X,"]:",7680)}var e=b.constants.stencilOps;a.optional(function(){b.assert(p,g+"&&typeof "+g+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return X(function(c){a.commandType(c,"object",k,p.commandStr);var b=c.factor|0;c=c.units|0;a.commandType(b,"number",k+".factor",p.commandStr);a.commandType(c,"number",k+".units",p.commandStr);return[b,c]},function(b,p,g){a.optional(function(){b.assert(p,
g+"&&typeof "+g+'==="object"',"invalid "+c)});var l=p.def(g,".factor|0"),e=p.def(g,".units|0");return[l,e]});case "cull.face":return X(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);a.command(!!b,k,p.commandStr);return b},function(c,b,p){a.optional(function(){c.assert(b,p+'==="front"||'+p+'==="back"',"invalid cull.face")});return b.def(p,'==="front"?',1028,":",1029)});case "lineWidth":return X(function(c){a.command("number"===typeof c&&c>=I.lineWidthDims[0]&&c<=I.lineWidthDims[1],"invalid line width, must be a positive number between "+
I.lineWidthDims[0]+" and "+I.lineWidthDims[1],p.commandStr);return c},function(c,b,p){a.optional(function(){c.assert(b,"typeof "+p+'==="number"&&'+p+">="+I.lineWidthDims[0]+"&&"+p+"<="+I.lineWidthDims[1],"invalid line width")});return p});case "frontFace":return X(function(c){a.commandParameter(c,n,k,p.commandStr);return n[c]},function(c,b,p){a.optional(function(){c.assert(b,p+'==="cw"||'+p+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(p+'==="cw"?2304:2305')});case "colorMask":return X(function(c){a.command(r(c)&&
4===c.length,"color.mask must be length 4 array",p.commandStr);return c.map(function(a){return!!a})},function(c,b,p){a.optional(function(){c.assert(b,c.shared.isArrayLike+"("+p+")&&"+p+".length===4","invalid color.mask")});return fa(4,function(a){return"!!"+p+"["+a+"]"})});case "sample.coverage":return X(function(c){a.command("object"===typeof c&&c,k,p.commandStr);var b="value"in c?c.value:1;c=!!c.invert;a.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",
p.commandStr);return[b,c]},function(c,b,p){a.optional(function(){c.assert(b,p+"&&typeof "+p+'==="object"',"invalid sample.coverage")});var g=b.def('"value" in ',p,"?+",p,".value:1"),l=b.def("!!",p,".invert");return[g,l]})}});return D}function Ea(c,p){var g=c["static"],l=c.dynamic,D={};t(g).forEach(function(c){var b=g[c],l;if("number"===typeof b||"boolean"===typeof b)l=e(function(){return b});else if("function"===typeof b){var X=b._reglType;"texture2d"===X||"textureCube"===X?l=e(function(a){return a.link(b)}):
"framebuffer"===X||"framebufferCube"===X?(a.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',p.commandStr),l=e(function(a){return a.link(b.color[0])})):a.commandRaise('invalid data for uniform "'+c+'"',p.commandStr)}else r(b)?l=e(function(p){return p.global.def("[",fa(b.length,function(g){a.command("number"===typeof b[g]||"boolean"===typeof b[g],"invalid uniform "+c,p.commandStr);return b[g]}),"]")}):a.commandRaise('invalid or missing data for uniform "'+
c+'"',p.commandStr);l.value=b;D[c]=l});t(l).forEach(function(a){var c=l[a];D[a]=b(c,function(a,b){return a.invoke(b,c)})});return D}function Oa(c,p){var g=c["static"],l=c.dynamic,D={};t(g).forEach(function(c){var b=g[c],l=q.id(c),X=new ia;if(h(b))X.state=1,X.buffer=ea.getBuffer(ea.create(b,34962,!1,!0)),X.type=0;else{var k=ea.getBuffer(b);if(k)X.state=1,X.buffer=k,X.type=0;else if(a.command("object"===typeof b&&b,"invalid data for attribute "+c,p.commandStr),"constant"in b){var f=b.constant;X.buffer=
"null";X.state=2;"number"===typeof f?X.x=f:(a.command(r(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+c,p.commandStr),P.forEach(function(a,c){c<f.length&&(X[a]=f[c])}))}else{k=h(b.buffer)?ea.getBuffer(ea.create(b.buffer,34962,!1,!0)):ea.getBuffer(b.buffer);a.command(!!k,'missing buffer for attribute "'+c+'"',p.commandStr);var n=b.offset|0;a.command(0<=n,'invalid offset for attribute "'+c+'"',p.commandStr);var d=b.stride|0;a.command(0<=d&&256>d,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',
p.commandStr);var u=b.size|0;a.command(!("size"in b)||0<u&&4>=u,'invalid size for attribute "'+c+'", must be 1,2,3,4',p.commandStr);var v=!!b.normalized,na=0;"type"in b&&(a.commandParameter(b.type,B,"invalid type for attribute "+c,p.commandStr),na=B[b.type]);var w=b.divisor|0;a.optional(function(){"divisor"in b&&(a.command(0===w||S,'cannot specify divisor for attribute "'+c+'", instancing not supported',p.commandStr),a.command(0<=w,'invalid divisor for attribute "'+c+'"',p.commandStr));var g=p.commandStr,
l="buffer offset divisor normalized type size stride".split(" ");t(b).forEach(function(b){a.command(0<=l.indexOf(b),'unknown parameter "'+b+'" for attribute pointer "'+c+'" (valid parameters are '+l+")",g)})});X.buffer=k;X.state=1;X.size=u;X.normalized=v;X.type=na||k.dtype;X.offset=n;X.stride=d;X.divisor=w}}D[c]=e(function(a,c){var b=a.attribCache;if(l in b)return b[l];var p={isStream:!1};t(X).forEach(function(a){p[a]=X[a]});X.buffer&&(p.buffer=a.link(X.buffer),p.type=p.type||p.buffer+".dtype");return b[l]=
p})});t(l).forEach(function(c){var p=l[c];D[c]=b(p,function(b,g){function l(a){g(n[a],"=",X,".",a,"|0;")}var X=b.invoke(g,p),e=b.shared,D=b.constants,k=e.isBufferArgs,f=e.buffer;a.optional(function(){b.assert(g,X+"&&(typeof "+X+'==="object"||typeof '+X+'==="function")&&('+k+"("+X+")||"+f+".getBuffer("+X+")||"+f+".getBuffer("+X+".buffer)||"+k+"("+X+'.buffer)||("constant" in '+X+"&&(typeof "+X+'.constant==="number"||'+e.isArrayLike+"("+X+".constant))))",'invalid dynamic attribute "'+c+'"')});var n=
{isStream:g.def(!1)},d=new ia;d.state=1;t(d).forEach(function(a){n[a]=g.def(""+d[a])});var q=n.buffer,u=n.type;g("if(",k,"(",X,")){",n.isStream,"=true;",q,"=",f,".createStream(",34962,",",X,");",u,"=",q,".dtype;","}else{",q,"=",f,".getBuffer(",X,");","if(",q,"){",u,"=",q,".dtype;",'}else if("constant" in ',X,"){",n.state,"=",2,";","if(typeof "+X+'.constant === "number"){',n[P[0]],"=",X,".constant;",P.slice(1).map(function(a){return n[a]}).join("="),"=0;","}else{",P.map(function(a,c){return n[a]+"="+
X+".constant.length>"+c+"?"+X+".constant["+c+"]:0;"}).join(""),"}}else{","if(",k,"(",X,".buffer)){",q,"=",f,".createStream(",34962,",",X,".buffer);","}else{",q,"=",f,".getBuffer(",X,".buffer);","}",u,'="type" in ',X,"?",D.glTypes,"[",X,".type]:",q,".dtype;",n.normalized,"=!!",X,".normalized;");l("size");l("offset");l("stride");l("divisor");g("}}");g.exit("if(",n.isStream,"){",f,".destroyStream(",q,");","}");return n})});return D}function T(a){var c=a["static"],g=a.dynamic,l={};t(c).forEach(function(a){var b=
c[a];l[a]=e(function(a,c){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});t(g).forEach(function(a){var c=g[a];l[a]=b(c,function(a,b){return a.invoke(b,c)})});return l}function Ia(c,b,g,l,e){function D(a){var c=q[a];c&&(na[a]=c)}var k=c["static"],f=c.dynamic;a.optional(function(){function c(p){t(p).forEach(function(c){a.command(0<=b.indexOf(c),'unknown parameter "'+c+'"',e.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(da);
c(k);c(f)});var n=Q(c,b),d=Zb(c,e),q=$a(c,d,e),u=ja(c,e),na=ca(c,e),h=v(c,e,n);D("viewport");D(K("scissor.box"));var w=0<t(na).length,d={framebuffer:d,draw:u,shader:h,state:na,dirty:w,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};d.profile=G(c,e);d.uniforms=Ea(g,e);d.drawVAO=d.scopeVAO=u.vao;if(!d.drawVAO&&h.program&&!n&&H.angle_instanced_arrays&&u["static"].elements){var R=!0;c=h.program.attributes.map(function(c){c=b["static"][c];R=R&&!!c;return c});if(R&&0<c.length){var xa=z.getVAO(z.createVAO({attributes:c,
elements:u["static"].elements}));d.drawVAO=new m(null,null,null,function(c,a){return c.link(xa)});d.useVAO=!0}}n?d.useVAO=!0:d.attributes=Oa(b,e);d.context=T(l,e);return d}function W(c,a,b){var g=c.shared.context,l=c.scope();t(b).forEach(function(e){a.save(g,"."+e);var D=b[e].append(c,a);Array.isArray(D)?l(g,".",e,"=[",D.join(),"];"):l(g,".",e,"=",D,";")});a(l)}function sb(c,a,b,g){var l=c.shared,e=l.gl,D=l.framebuffer,k;ga&&(k=a.def(l.extensions,".webgl_draw_buffers"));var f=c.constants,l=f.drawBuffer,
f=f.backBuffer;c=b?b.append(c,a):a.def(D,".next");g||a("if(",c,"!==",D,".cur){");a("if(",c,"){",e,".bindFramebuffer(",36160,",",c,".framebuffer);");ga&&a(k,".drawBuffersWEBGL(",l,"[",c,".colorAttachments.length]);");a("}else{",e,".bindFramebuffer(",36160,",null);");ga&&a(k,".drawBuffersWEBGL(",f,");");a("}",D,".cur=",c,";");g||a("}")}function ha(c,a,b){var g=c.shared,l=g.gl,e=c.current,k=c.next,f=g.current,n=g.next,d=c.cond(f,".dirty");da.forEach(function(a){a=K(a);if(!(a in b.state)){var p,g;if(a in
k){p=k[a];g=e[a];var q=fa(F[a].length,function(a){return d.def(p,"[",a,"]")});d(c.cond(q.map(function(a,c){return a+"!=="+g+"["+c+"]"}).join("||")).then(l,".",xa[a],"(",q,");",q.map(function(a,c){return g+"["+c+"]="+a}).join(";"),";"))}else p=d.def(n,".",a),q=c.cond(p,"!==",f,".",a),d(q),a in D?q(c.cond(p).then(l,".enable(",D[a],");")["else"](l,".disable(",D[a],");"),f,".",a,"=",p,";"):q(l,".",xa[a],"(",p,");",f,".",a,"=",p,";")}});0===t(b.state).length&&d(f,".dirty=false;");a(d)}function ua(a,c,
b,g){var l=a.shared,e=a.current,k=l.current,f=l.gl;y(t(b)).forEach(function(l){var n=b[l];if(!g||g(n)){var d=n.append(a,c);if(D[l]){var q=D[l];N(n)?d?c(f,".enable(",q,");"):c(f,".disable(",q,");"):c(a.cond(d).then(f,".enable(",q,");")["else"](f,".disable(",q,");"));c(k,".",l,"=",d,";")}else if(r(d)){var u=e[l];c(f,".",xa[l],"(",d,");",d.map(function(a,c){return u+"["+c+"]="+a}).join(";"),";")}else c(f,".",xa[l],"(",d,");",k,".",l,"=",d,";")}})}function Wb(a,c){S&&(a.instancing=c.def(a.shared.extensions,
".angle_instanced_arrays"))}function nc(a,c,b,g,l){function e(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function D(a){v=c.def();a(v,"=",e(),";");"string"===typeof l?a(n,".count+=",l,";"):a(n,".count++;");Na&&(g?(na=c.def(),a(na,"=",u,".getNumPendingQueries();")):a(u,".beginQuery(",n,");"))}function k(a){a(n,".cpuTime+=",e(),"-",v,";");Na&&(g?a(u,".pushScopeStats(",na,",",u,".getNumPendingQueries(),",n,");"):a(u,".endQuery();"))}function f(a){var b=c.def(q,".profile");
c(q,".profile=",a,";");c.exit(q,".profile=",b,";")}var d=a.shared,n=a.stats,q=d.current,u=d.timer;b=b.profile;var v,na;if(b){if(N(b)){b.enable?(D(c),k(c.exit),f("true")):f("false");return}b=b.append(a,c);f(b)}else b=c.def(q,".profile");d=a.block();D(d);c("if(",b,"){",d,"}");a=a.block();k(a);c.exit("if(",b,"){",a,"}")}function jc(c,b,g,l,e){function D(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function k(a,g,l){function e(){b("if(!",q,".buffer){",d,".enableVertexAttribArray(",n,");}");var a=l.type,D;D=l.size?b.def(l.size,"||",g):g;b("if(",q,".type!==",a,"||",q,".size!==",D,"||",na.map(function(a){return q+"."+a+"!=="+l[a]}).join("||"),"){",d,".bindBuffer(",34962,",",u,".buffer);",d,".vertexAttribPointer(",[n,D,a,l.normalized,l.stride,l.offset],");",q,".type=",a,";",q,".size=",D,";",na.map(function(a){return q+"."+a+"="+l[a]+";"}).join(""),"}");S&&(a=l.divisor,b("if(",q,".divisor!==",a,
"){",c.instancing,".vertexAttribDivisorANGLE(",[n,a],");",q,".divisor=",a,";}"))}function D(){b("if(",q,".buffer){",d,".disableVertexAttribArray(",n,");",q,".buffer=null;","}if(",P.map(function(a,c){return q+"."+a+"!=="+v[c]}).join("||"),"){",d,".vertexAttrib4f(",n,",",v,");",P.map(function(a,c){return q+"."+a+"="+v[c]+";"}).join(""),"}")}var d=f.gl,n=b.def(a,".location"),q=b.def(f.attributes,"[",n,"]");a=l.state;var u=l.buffer,v=[l.x,l.y,l.z,l.w],na=["buffer","normalized","offset","stride"];1===
a?e():2===a?D():(b("if(",a,"===",1,"){"),e(),b("}else{"),D(),b("}"))}var f=c.shared;l.forEach(function(l){var f=l.name,d=g.attributes[f],n;if(d){if(!e(d))return;n=d.append(c,b)}else{if(!e(V))return;var q=c.scopeAttrib(f);a.optional(function(){c.assert(b,q+".state","missing attribute "+f)});n={};t(new ia).forEach(function(a){n[a]=b.def(q,".",a)})}k(c.link(l),D(l.info.type),n)})}function qd(c,b,g,l,e,D){for(var k=c.shared,f=k.gl,d,n=0;n<l.length;++n){var u=l[n],v=u.name,na=u.info.type,h=g.uniforms[v],
u=c.link(u)+".location",w;if(h){if(!e(h))continue;if(N(h)){var t=h.value;a.command(null!==t&&"undefined"!==typeof t,'missing uniform "'+v+'"',c.commandStr);if(35678===na||35680===na)a.command("function"===typeof t&&(35678===na&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===na&&("textureCube"===t._reglType||"framebufferCube"===t._reglType)),"invalid texture for uniform "+v,c.commandStr),h=c.link(t._texture||t.color[0]._texture),b(f,".uniform1i(",u,",",h+".bind());"),b.exit(h,".unbind();");
else if(35674===na||35675===na||35676===na){a.optional(function(){a.command(r(t),"invalid matrix for uniform "+v,c.commandStr);a.command(35674===na&&4===t.length||35675===na&&9===t.length||35676===na&&16===t.length,"invalid length for matrix uniform "+v,c.commandStr)});var h=c.global.def("new Float32Array(["+Array.prototype.slice.call(t)+"])"),R=2;35675===na?R=3:35676===na&&(R=4);b(f,".uniformMatrix",R,"fv(",u,",false,",h,");")}else{switch(na){case 5126:a.commandType(t,"number","uniform "+v,c.commandStr);
d="1f";break;case 35664:a.command(r(t)&&2===t.length,"uniform "+v,c.commandStr);d="2f";break;case 35665:a.command(r(t)&&3===t.length,"uniform "+v,c.commandStr);d="3f";break;case 35666:a.command(r(t)&&4===t.length,"uniform "+v,c.commandStr);d="4f";break;case 35670:a.commandType(t,"boolean","uniform "+v,c.commandStr);d="1i";break;case 5124:a.commandType(t,"number","uniform "+v,c.commandStr);d="1i";break;case 35671:a.command(r(t)&&2===t.length,"uniform "+v,c.commandStr);d="2i";break;case 35667:a.command(r(t)&&
2===t.length,"uniform "+v,c.commandStr);d="2i";break;case 35672:a.command(r(t)&&3===t.length,"uniform "+v,c.commandStr);d="3i";break;case 35668:a.command(r(t)&&3===t.length,"uniform "+v,c.commandStr);d="3i";break;case 35673:a.command(r(t)&&4===t.length,"uniform "+v,c.commandStr);d="4i";break;case 35669:a.command(r(t)&&4===t.length,"uniform "+v,c.commandStr),d="4i"}b(f,".uniform",d,"(",u,",",r(t)?Array.prototype.slice.call(t):t,");")}continue}else w=h.append(c,b)}else{if(!e(V))continue;w=b.def(k.uniforms,
"[",q.id(v),"]")}35678===na?(a(!Array.isArray(w),"must specify a scalar prop for textures"),b("if(",w,"&&",w,'._reglType==="framebuffer"){',w,"=",w,".color[0];","}")):35680===na&&(a(!Array.isArray(w),"must specify a scalar prop for cube maps"),b("if(",w,"&&",w,'._reglType==="framebufferCube"){',w,"=",w,".color[0];","}"));a.optional(function(){function g(a,l){c.assert(b,a,'bad data or missing for uniform "'+v+'".  '+l)}function l(c){a(!Array.isArray(w),"must not specify an array type for uniform");
g("typeof "+w+'==="'+c+'"',"invalid type, expected "+c)}function e(b,l){Array.isArray(w)?a(w.length===b,"must have length "+b):g(k.isArrayLike+"("+w+")&&"+w+".length==="+b,"invalid vector, should have length "+b,c.commandStr)}function D(b){a(!Array.isArray(w),"must not specify a value type");g("typeof "+w+'==="function"&&'+w+'._reglType==="texture'+(3553===b?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(na){case 5124:l("number");break;case 35667:e(2,"number");break;case 35668:e(3,"number");
break;case 35669:e(4,"number");break;case 5126:l("number");break;case 35664:e(2,"number");break;case 35665:e(3,"number");break;case 35666:e(4,"number");break;case 35670:l("boolean");break;case 35671:e(2,"boolean");break;case 35672:e(3,"boolean");break;case 35673:e(4,"boolean");break;case 35674:e(4,"number");break;case 35675:e(9,"number");break;case 35676:e(16,"number");break;case 35678:D(3553);break;case 35680:D(34067)}});h=1;switch(na){case 35678:case 35680:h=b.def(w,"._texture");b(f,".uniform1i(",
u,",",h,".bind());");b.exit(h,".unbind();");continue;case 5124:case 35670:d="1i";break;case 35667:case 35671:d="2i";h=2;break;case 35668:case 35672:d="3i";h=3;break;case 35669:case 35673:d="4i";h=4;break;case 5126:d="1f";break;case 35664:d="2f";h=2;break;case 35665:d="3f";h=3;break;case 35666:d="4f";h=4;break;case 35674:d="Matrix2fv";break;case 35675:d="Matrix3fv";break;case 35676:d="Matrix4fv"}if("M"===d.charAt(0)){b(f,".uniform",d,"(",u,",");var u=Math.pow(na-35674+2,2),xa=c.global.def("new Float32Array(",
u,")");Array.isArray(w)?b("false,(",fa(u,function(a){return xa+"["+a+"]="+w[a]}),",",xa,")"):b("false,(Array.isArray(",w,")||",w," instanceof Float32Array)?",w,":(",fa(u,function(a){return xa+"["+a+"]="+w+"["+a+"]"}),",",xa,")");b(");")}else{if(1<h){for(var R=[],m=[],J=0;J<h;++J)Array.isArray(w)?m.push(w[J]):m.push(b.def(w+"["+J+"]")),D&&R.push(b.def());D&&b("if(!",c.batchId,"||",R.map(function(a,c){return a+"!=="+m[c]}).join("||"),"){",R.map(function(a,c){return a+"="+m[c]+";"}).join(""));b(f,".uniform",
d,"(",u,",",m.join(","),");")}else a(!Array.isArray(w),"uniform value must not be an array"),D&&(h=b.def(),b("if(!",c.batchId,"||",h,"!==",w,"){",h,"=",w,";")),b(f,".uniform",d,"(",u,",",w,");");D&&b("}")}}}function xc(c,b,g,l){function e(a){var D=q[a];return D?D.contextDep&&l.contextDynamic||D.propDep?D.append(c,g):D.append(c,b):b.def(n,".",a)}function D(){function c(){g(h,".drawElementsInstancedANGLE(",[v,w,R,na+"<<(("+R+"-5121)>>1)",t],");")}function a(){g(h,".drawArraysInstancedANGLE(",[v,na,
w,t],");")}u&&"null"!==u?m?c():(g("if(",u,"){"),c(),g("}else{"),a(),g("}")):a()}function k(){function c(){g(d+".drawElements("+[v,w,R,na+"<<(("+R+"-5121)>>1)"]+");")}function a(){g(d+".drawArrays("+[v,na,w]+");")}u&&"null"!==u?m?c():(g("if(",u,"){"),c(),g("}else{"),a(),g("}")):a()}var f=c.shared,d=f.gl,n=f.draw,q=l.draw,u=function(){var a=q.elements,e=b;if(a){if(a.contextDep&&l.contextDynamic||a.propDep)e=g;a=a.append(c,e);q.elementsActive&&e("if("+a+")"+d+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=
e.def(),e(a,"=",n,".","elements",";","if(",a,"){",d,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",f.vao,".currentVAO){",a,"=",c.shared.elements+".getElements("+f.vao,".currentVAO.elements);",ra?"":"if("+a+")"+d+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),v=e("primitive"),na=e("offset"),w=function(){var e=q.count,D,k=b;if(e){if(e.contextDep&&l.contextDynamic||e.propDep)k=g;D=e.append(c,k);a.optional(function(){e.MISSING&&c.assert(b,"false","missing vertex count");e.DYNAMIC&&
c.assert(k,D+">=0","missing vertex count")})}else D=k.def(n,".","count"),a.optional(function(){c.assert(k,D+">=0","missing vertex count")});return D}();if("number"===typeof w){if(0===w)return}else g("if(",w,"){"),g.exit("}");var t,h;S&&(t=e("instances"),h=c.instancing);var R=u+".type",m=q.elements&&N(q.elements)&&!q.vaoActive;S&&("number"!==typeof t||0<=t)?"string"===typeof t?(g("if(",t,">0){"),D(),g("}else if(",t,"<0){"),k(),g("}")):D():k()}function Y(c,b,g,l,e){var D=qa();e=D.proc("body",e);a.optional(function(){D.commandStr=
b.commandStr;D.command=D.link(b.commandStr)});S&&(D.instancing=e.def(D.shared.extensions,".angle_instanced_arrays"));c(D,e,g,l);return D.compile().body}function J(a,c,b,g){Wb(a,c);b.useVAO?b.drawVAO?c(a.shared.vao,".setVAO(",b.drawVAO.append(a,c),");"):c(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(c(a.shared.vao,".setVAO(null);"),jc(a,c,b,g.attributes,function(){return!0}));qd(a,c,b,g.uniforms,function(){return!0},!1);xc(a,c,c,b)}function ka(a,c){var b=a.proc("draw",1);Wb(a,b);W(a,b,c.context);
sb(a,b,c.framebuffer);ha(a,b,c);ua(a,b,c.state);nc(a,b,c,!1,!0);var g=c.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",g,".program);");if(c.shader.program)J(a,b,c,c.shader.program);else{b(a.shared.vao,".setVAO(null);");var l=a.global.def("{}"),e=b.def(g,".id"),D=b.def(l,"[",e,"]");b(a.cond(D).then(D,".call(this,a0);")["else"](D,"=",l,"[",e,"]=",a.link(function(b){return Y(J,a,c,b,1)}),"(",g,");",D,".call(this,a0);"))}0<t(c.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,
".setVAO(null);")}function Ca(a,c,b,g){function l(){return!0}a.batchId="a1";Wb(a,c);jc(a,c,b,g.attributes,l);qd(a,c,b,g.uniforms,l,!1);xc(a,c,c,b)}function tb(a,c,b,g){function l(a){return a.contextDep&&D||a.propDep}function e(a){return!l(a)}Wb(a,c);var D=b.contextDep,k=c.def(),f=c.def();a.shared.props=f;a.batchId=k;var d=a.scope(),n=a.scope();c(d.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",f,"=","a0","[",k,"];",n,"}",d.exit);b.needsContext&&W(a,n,b.context);b.needsFramebuffer&&sb(a,n,b.framebuffer);
ua(a,n,b.state,l);b.profile&&l(b.profile)&&nc(a,n,b,!1,!0);g?(b.useVAO?b.drawVAO?l(b.drawVAO)?n(a.shared.vao,".setVAO(",b.drawVAO.append(a,n),");"):d(a.shared.vao,".setVAO(",b.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(d(a.shared.vao,".setVAO(null);"),jc(a,d,b,g.attributes,e),jc(a,n,b,g.attributes,l)),qd(a,d,b,g.uniforms,e,!1),qd(a,n,b,g.uniforms,l,!0),xc(a,d,n,b)):(c=a.global.def("{}"),g=b.shader.progVar.append(a,n),f=n.def(g,".id"),d=n.def(c,"[",f,"]"),n(a.shared.gl,
".useProgram(",g,".program);","if(!",d,"){",d,"=",c,"[",f,"]=",a.link(function(c){return Y(Ca,a,b,c,2)}),"(",g,");}",d,".call(this,a0[",k,"],",k,");"))}function Lc(a,c){function b(a){return a.contextDep&&l||a.propDep}var g=a.proc("batch",2);a.batchId="0";Wb(a,g);var l=!1,e=!0;t(c.context).forEach(function(a){l=l||c.context[a].propDep});l||(W(a,g,c.context),e=!1);var D=c.framebuffer,k=!1;D?(D.propDep?l=k=!0:D.contextDep&&l&&(k=!0),k||sb(a,g,D)):sb(a,g,null);c.state.viewport&&c.state.viewport.propDep&&
(l=!0);ha(a,g,c);ua(a,g,c.state,function(a){return!b(a)});c.profile&&b(c.profile)||nc(a,g,c,!1,"a1");c.contextDep=l;c.needsContext=e;c.needsFramebuffer=k;e=c.shader.progVar;if(e.contextDep&&l||e.propDep)tb(a,g,c,null);else if(e=e.append(a,g),g(a.shared.gl,".useProgram(",e,".program);"),c.shader.program)tb(a,g,c,c.shader.program);else{g(a.shared.vao,".setVAO(null);");var D=a.global.def("{}"),k=g.def(e,".id"),d=g.def(D,"[",k,"]");g(a.cond(d).then(d,".call(this,a0,a1);")["else"](d,"=",D,"[",k,"]=",a.link(function(b){return Y(tb,
a,c,b,2)}),"(",e,");",d,".call(this,a0,a1);"))}0<t(c.state).length&&g(a.shared.current,".dirty=true;");a.shared.vao&&g(a.shared.vao,".setVAO(null);")}function Wc(a,c){function b(e){var D=c.shader[e];D&&g.set(l.shader,"."+e,D.append(a,g))}var g=a.proc("scope",3);a.batchId="a2";var l=a.shared,e=l.current;W(a,g,c.context);c.framebuffer&&c.framebuffer.append(a,g);y(t(c.state)).forEach(function(b){var e=c.state[b].append(a,g);r(e)?e.forEach(function(c,l){g.set(a.next[b],"["+l+"]",c)}):g.set(l.next,"."+
b,e)});nc(a,g,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var e=c.draw[b];e&&g.set(l.draw,"."+b,""+e.append(a,g))});t(c.uniforms).forEach(function(b){var e=c.uniforms[b].append(a,g);Array.isArray(e)&&(e="["+e.join()+"]");g.set(l.uniforms,"["+q.id(b)+"]",e)});t(c.attributes).forEach(function(b){var l=c.attributes[b].append(a,g),e=a.scopeAttrib(b);t(new ia).forEach(function(a){g.set(e,"."+a,l[a])})});c.scopeVAO&&g.set(l.vao,".targetVAO",c.scopeVAO.append(a,g));
b("vert");b("frag");0<t(c.state).length&&(g(e,".dirty=true;"),g.exit(e,".dirty=true;"));g("a1(",a.shared.context,",a0,",a.batchId,");")}function E(a){if("object"===typeof a&&!r(a)){for(var c=t(a),b=0;b<c.length;++b)if(C.isDynamic(a[c[b]]))return!0;return!1}}function w(a,c,g){function l(a,c){k.forEach(function(b){var g=e[b];C.isDynamic(g)&&(g=a.invoke(c,g),c(q,".",b,"=",g,";"))})}var e=c["static"][g];if(e&&E(e)){var D=a.global,k=t(e),d=!1,f=!1,n=!1,q=a.global.def("{}");k.forEach(function(c){var g=
e[c];if(C.isDynamic(g))"function"===typeof g&&(g=e[c]=C.unbox(g)),c=b(g,null),d=d||c.thisDep,n=n||c.propDep,f=f||c.contextDep;else{D(q,".",c,"=");switch(typeof g){case "number":D(g);break;case "string":D('"',g,'"');break;case "object":Array.isArray(g)&&D("[",g.join(),"]");break;default:D(a.link(g))}D(";")}});c.dynamic[g]=new C.DynamicVariable(4,{thisDep:d,contextDep:f,propDep:n,ref:q,append:l});delete c["static"][g]}}var ia=z.Record,ta={add:32774,subtract:32778,"reverse subtract":32779};H.ext_blend_minmax&&
(ta.min=32775,ta.max=32776);var S=H.angle_instanced_arrays,ga=H.webgl_draw_buffers,ra=H.oes_vertex_array_object,F={dirty:!0,profile:Z.profile},u={},da=[],D={},xa={};O("dither",3024);O("blend.enable",3042);U("blend.color","blendColor",[0,0,0,0]);U("blend.equation","blendEquationSeparate",[32774,32774]);U("blend.func","blendFuncSeparate",[1,0,1,0]);O("depth.enable",2929,!0);U("depth.func","depthFunc",513);U("depth.range","depthRange",[0,1]);U("depth.mask","depthMask",!0);U("colorMask","colorMask",[!0,
!0,!0,!0]);O("cull.enable",2884);U("cull.face","cullFace",1029);U("frontFace","frontFace",2305);U("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);U("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);U("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);U("stencil.mask","stencilMask",-1);U("stencil.func","stencilFunc",[519,0,-1]);U("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);U("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);O("scissor.enable",3089);U("scissor.box","scissor",[0,0,M.drawingBufferWidth,M.drawingBufferHeight]);U("viewport","viewport",[0,0,M.drawingBufferWidth,M.drawingBufferHeight]);var na={gl:M,context:ma,strings:q,next:u,current:F,draw:wc,elements:c,buffer:ea,shader:gb,attributes:z.state,vao:z,uniforms:la,framebuffer:ba,extensions:H,timer:Na,isBufferArgs:h},l={primTypes:A,compareFuncs:d,blendFuncs:L,blendEquations:ta,stencilOps:f,glTypes:B,orientationType:n};a.optional(function(){na.isArrayLike=
r});ga&&(l.backBuffer=[1029],l.drawBuffer=fa(I.maxDrawbuffers,function(a){return 0===a?[0]:fa(a,function(a){return 36064+a})}));var ic=0;return{next:u,current:F,procs:function(){var a=qa(),c=a.proc("poll"),b=a.proc("refresh"),g=a.block();c(g);b(g);var l=a.shared,e=l.gl,k=l.next,d=l.current;g(d,".dirty=false;");sb(a,c);sb(a,b,null,!0);var f;S&&(f=a.link(S));H.oes_vertex_array_object&&b(a.link(H.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<I.maxAttributes;++n){var q=b.def(l.attributes,
"[",n,"]"),u=a.cond(q,".buffer");u.then(e,".enableVertexAttribArray(",n,");",e,".bindBuffer(",34962,",",q,".buffer.buffer);",e,".vertexAttribPointer(",n,",",q,".size,",q,".type,",q,".normalized,",q,".stride,",q,".offset);")["else"](e,".disableVertexAttribArray(",n,");",e,".vertexAttrib4f(",n,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer=null;");b(u);S&&b(f,".vertexAttribDivisorANGLE(",n,",",q,".divisor);")}b(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");t(D).forEach(function(l){var f=
D[l],n=g.def(k,".",l),q=a.block();q("if(",n,"){",e,".enable(",f,")}else{",e,".disable(",f,")}",d,".",l,"=",n,";");b(q);c("if(",n,"!==",d,".",l,"){",q,"}")});t(xa).forEach(function(l){var D=xa[l],f=F[l],n,q,u=a.block();u(e,".",D,"(");r(f)?(D=f.length,n=a.global.def(k,".",l),q=a.global.def(d,".",l),u(fa(D,function(a){return n+"["+a+"]"}),");",fa(D,function(a){return q+"["+a+"]="+n+"["+a+"];"}).join("")),c("if(",fa(D,function(a){return n+"["+a+"]!=="+q+"["+a+"]"}).join("||"),"){",u,"}")):(n=g.def(k,
".",l),q=g.def(d,".",l),u(n,");",d,".",l,"=",n,";"),c("if(",n,"!==",q,"){",u,"}"));b(u)});return a.compile()}(),compile:function(a,c,b,g,l){var e=qa();e.stats=e.link(l);t(c["static"]).forEach(function(a){w(e,c,a)});R.forEach(function(c){w(e,a,c)});var D=Ia(a,c,b,g,e);ka(e,D);Wc(e,D);Lc(e,D);return x(e.compile(),{destroy:function(){D.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,
"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(z,T,Ha){function h(e,a){this.id=b++;this.type=e;this.data=a}function y(b){if(0===b.length)return[];var a=b.charAt(0),e=b.charAt(b.length-1);if(1<b.length&&a===e&&('"'===a||"'"===a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return y(b.substr(0,a.index)).concat(y(a[1])).concat(y(b.substr(a.index+
a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(e=0;e<a.length;++e)b=b.concat(y(a[e]));return b}function m(b){return"["+y(b).join("][")+"]"}function N(b,a){if("function"===typeof b)return new h(0,b);if("number"===typeof b||"boolean"===typeof b)return new h(5,b);if(Array.isArray(b))return new h(6,b.map(function(b,e){return N(b,a+"["+e+"]")}));if(b instanceof h)return b;e(!1,"invalid option type in uniform "+a)}var e=z("./util/check"),
b=0;T.exports={DynamicVariable:h,define:function(b,a){return new h(b,m(a+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof h},unbox:N,accessor:m}},{"./util/check":21}],10:[function(z,T,Ha){var h=z("./util/check"),y=z("./util/is-typed-array"),m=z("./util/is-ndarray"),N=z("./util/values"),e=z("./constants/primitives.json"),b=z("./constants/usage.json");T.exports=function(t,a,x,pa){function fa(a){this.id=C++;r[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=
0}function M(b,e,r,A,d,f,g){b.buffer.bind();var n;e?((n=g)||y(e)&&(!m(e)||y(e.data))||(n=a.oes_element_index_uint?5125:5123),x._initBuffer(b.buffer,e,r,n,3)):(t.bufferData(34963,f,r),b.buffer.dtype=n||5121,b.buffer.usage=r,b.buffer.dimension=3,b.buffer.byteLength=f);n=g;if(!g){switch(b.buffer.dtype){case 5121:case 5120:n=5121;break;case 5123:case 5122:n=5123;break;case 5125:case 5124:n=5125;break;default:h.raise("unsupported type for element array")}b.buffer.dtype=n}b.type=n;h(5125!==n||!!a.oes_element_index_uint,
"32 bit element buffers not supported, enable oes_element_index_uint first");e=d;0>e&&(e=b.buffer.byteLength,5123===n?e>>=1:5125===n&&(e>>=2));b.vertCount=e;e=A;0>A&&(e=4,A=b.buffer.dimension,1===A&&(e=0),2===A&&(e=1),3===A&&(e=4));b.primType=e}function H(a){pa.elementsCount--;h(null!==a.buffer,"must not double destroy elements");delete r[a.id];a.buffer.destroy();a.buffer=null}var r={},C=0,A={uint8:5121,uint16:5123};a.oes_element_index_uint&&(A.uint32=5125);fa.prototype.bind=function(){this.buffer.bind()};
var B=[];return{create:function(a,t){function r(a){if(a)if("number"===typeof a)B(a),d.primType=4,d.vertCount=a|0,d.type=5121;else{var g=null,n=35044,t=-1,R=-1,q=0,x=0;if(Array.isArray(a)||y(a)||m(a))g=a;else if(h.type(a,"object","invalid arguments for elements"),"data"in a&&(g=a.data,h(Array.isArray(g)||y(g)||m(g),"invalid data for element buffer")),"usage"in a&&(h.parameter(a.usage,b,"invalid element buffer usage"),n=b[a.usage]),"primitive"in a&&(h.parameter(a.primitive,e,"invalid element buffer primitive"),
t=e[a.primitive]),"count"in a&&(h("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),R=a.count|0),"type"in a&&(h.parameter(a.type,A,"invalid buffer type"),x=A[a.type]),"length"in a)q=a.length|0;else if(q=R,5123===x||5122===x)q*=2;else if(5125===x||5124===x)q*=4;M(d,g,n,t,R,q,x)}else B(),d.primType=4,d.vertCount=0,d.type=5121;return r}var B=x.create(null,34963,!0),d=new fa(B._buffer);pa.elementsCount++;r(a);r._reglType="elements";r._elements=d;r.subdata=function(a,b){B.subdata(a,
b);return r};r.destroy=function(){H(d)};return r},createStream:function(a){var b=B.pop();b||(b=new fa(x.create(null,34963,!0,!1)._buffer));M(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){B.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof fa?a._elements:null},clear:function(){N(r).forEach(H)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(z,
T,Ha){var h=z("./util/sorted-object-keys"),y=z("./util/check");T.exports=function(m,N){function e(a){y.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=b[a]=m.getExtension(a)}catch(h){}return!!e}for(var b={},t=0;t<N.extensions.length;++t){var a=N.extensions[t];if(!e(a))return N.onDestroy(),N.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}N.optionalExtensions.forEach(e);return{extensions:b,
restore:function(){h(b).forEach(function(a){if(b[a]&&!e(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(z,T,Ha){var h=z("./util/check"),y=z("./util/values"),m=z("./util/extend"),N=[6407,6408],e=[];e[6408]=4;e[6407]=3;var b=[];b[5121]=1;b[5126]=4;b[36193]=2;var t=[32854,32855,36194,35907,34842,34843,34836],a={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};T.exports=function(x,pa,fa,M,H,r){function C(a,c,b){this.target=a;this.texture=c;this.renderbuffer=b;var g=a=0;c?(a=c.width,g=c.height):b&&(a=b.width,g=b.height);this.width=a;this.height=g}function A(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function B(a,c,b){if(a){if(a.texture){a=a.texture._texture;var g=Math.max(1,a.height);h(Math.max(1,a.width)===c&&g===b,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,
h(a.width===c&&a.height===b,"inconsistent width/height for renderbuffer");a.refCount+=1}}function P(a,c){c&&(c.texture?x.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):x.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function R(a){var c=3553,b=null,g=null,e=a;"object"===typeof a&&(e=a.data,"target"in a&&(c=a.target|0));h.type(e,"function","invalid attachment data");a=e._reglType;"texture2d"===a?(b=e,h(3553===c)):"textureCube"===a?(b=e,h(34069<=
c&&34075>c,"invalid cube map target")):"renderbuffer"===a?(g=e,c=36161):h.raise("invalid regl object for attachment");return new C(c,b,g)}function L(a,c,b,g,e){if(b)return a=M.create2D({width:a,height:c,format:g,type:e}),a._texture.refCount=0,new C(3553,a,null);a=H.create({width:a,height:c,format:g});a._renderbuffer.refCount=0;return new C(36161,null,a)}function z(a){return a&&(a.texture||a.renderbuffer)}function d(a,c,b){a&&(a.texture?a.texture.resize(c,b):a.renderbuffer&&a.renderbuffer.resize(c,
b),a.width=c,a.height=b)}function f(){this.id=c++;k[this.id]=this;this.framebuffer=x.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function g(a){a.colorAttachments.forEach(A);A(a.depthAttachment);A(a.stencilAttachment);A(a.depthStencilAttachment)}function n(a){var c=a.framebuffer;h(c,"must not double destroy framebuffer");x.deleteFramebuffer(c);a.framebuffer=null;r.framebufferCount--;delete k[a.id]}
function V(c){var b;x.bindFramebuffer(36160,c.framebuffer);var g=c.colorAttachments;for(b=0;b<g.length;++b)P(36064+b,g[b]);for(b=g.length;b<fa.maxColorAttachments;++b)x.framebufferTexture2D(36160,36064+b,3553,null,0);x.framebufferTexture2D(36160,33306,3553,null,0);x.framebufferTexture2D(36160,36096,3553,null,0);x.framebufferTexture2D(36160,36128,3553,null,0);P(36096,c.depthAttachment);P(36128,c.stencilAttachment);P(33306,c.depthStencilAttachment);c=x.checkFramebufferStatus(36160);x.isContextLost()||
36053===c||h.raise("framebuffer configuration not supported, status = "+a[c]);x.bindFramebuffer(36160,q.next?q.next.framebuffer:null);q.cur=q.next;x.getError()}function aa(a,c){function k(a,c){var d;h(q.next!==y,"can not update framebuffer which is currently in use");var n=0,f=0,m=!0,r=!0;d=null;var x=!0,A="rgba",M="uint8",C=1,H=null,v=null,ba=null,P=!1;if("number"===typeof a)n=a|0,f=c|0||n;else if(a){h.type(a,"object","invalid arguments for framebuffer");"shape"in a?(f=a.shape,h(Array.isArray(f)&&
2<=f.length,"invalid shape for framebuffer"),n=f[0],f=f[1]):("radius"in a&&(n=f=a.radius),"width"in a&&(n=a.width),"height"in a&&(f=a.height));if("color"in a||"colors"in a)d=a.color||a.colors,Array.isArray(d)&&h(1===d.length||pa.webgl_draw_buffers,"multiple render targets not supported");if(!d){"colorCount"in a&&(C=a.colorCount|0,h(0<C,"invalid color buffer count"));"colorTexture"in a&&(x=!!a.colorTexture,A="rgba4");if("colorType"in a){M=a.colorType;if(x)h(pa.oes_texture_float||!("float"===M||"float32"===
M),"you must enable OES_texture_float in order to use floating point framebuffer objects"),h(pa.oes_texture_half_float||!("half float"===M||"float16"===M),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===M||"float16"===M)h(pa.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),A="rgba16f";else if("float"===M||"float32"===M)h(pa.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
A="rgba32f";h.oneOf(M,ea,"invalid color type")}"colorFormat"in a&&(A=a.colorFormat,0<=oa.indexOf(A)?x=!0:0<=I.indexOf(A)?x=!1:h.optional(function(){if(x)h.oneOf(a.colorFormat,oa,"invalid color format for texture");else h.oneOf(a.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)P=!(!a.depthTexture&&!a.depthStencilTexture),h(!P||pa.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?m=a.depth:
(H=a.depth,r=!1));"stencil"in a&&("boolean"===typeof a.stencil?r=a.stencil:(v=a.stencil,m=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?m=r=a.depthStencil:(ba=a.depthStencil,r=m=!1))}else n=f=1;var aa=null,la=null,T=null,Ia=null;if(Array.isArray(d))aa=d.map(R);else if(d)aa=[R(d)];else for(aa=Array(C),d=0;d<C;++d)aa[d]=L(n,f,x,A,M);h(pa.webgl_draw_buffers||1>=aa.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");h(aa.length<=fa.maxColorAttachments,
"too many color attachments, not supported");n=n||aa[0].width;f=f||aa[0].height;H?la=R(H):m&&!r&&(la=L(n,f,P,"depth","uint32"));v?T=R(v):r&&!m&&(T=L(n,f,!1,"stencil","uint8"));ba?Ia=R(ba):!H&&!v&&r&&m&&(Ia=L(n,f,P,"depth stencil","depth stencil"));h(1>=!!H+!!v+!!ba,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");m=null;for(d=0;d<aa.length;++d)B(aa[d],n,f),h(!aa[d]||aa[d].texture&&0<=N.indexOf(aa[d].texture._texture.format)||aa[d].renderbuffer&&0<=t.indexOf(aa[d].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+d+" is invalid"),aa[d]&&aa[d].texture&&(r=e[aa[d].texture._texture.format]*b[aa[d].texture._texture.type],null===m?m=r:h(m===r,"all color attachments much have the same number of bits per pixel."));B(la,n,f);h(!la||la.texture&&6402===la.texture._texture.format||la.renderbuffer&&33189===la.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");B(T,n,f);h(!T||T.renderbuffer&&36168===T.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
B(Ia,n,f);h(!Ia||Ia.texture&&34041===Ia.texture._texture.format||Ia.renderbuffer&&34041===Ia.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");g(y);y.width=n;y.height=f;y.colorAttachments=aa;y.depthAttachment=la;y.stencilAttachment=T;y.depthStencilAttachment=Ia;k.color=aa.map(z);k.depth=z(la);k.stencil=z(T);k.depthStencil=z(Ia);k.width=y.width;k.height=y.height;V(y);return k}var y=new f;r.framebufferCount++;k(a,c);return m(k,{resize:function(a,c){h(q.next!==
y,"can not resize a framebuffer which is currently in use");var b=Math.max(a|0,1),g=Math.max(c|0||b,1);if(b===y.width&&g===y.height)return k;for(var e=y.colorAttachments,n=0;n<e.length;++n)d(e[n],b,g);d(y.depthAttachment,b,g);d(y.stencilAttachment,b,g);d(y.depthStencilAttachment,b,g);y.width=k.width=b;y.height=k.height=g;V(y);return k},_reglType:"framebuffer",_framebuffer:y,destroy:function(){n(y);g(y)},use:function(a){q.setFBO({framebuffer:k},a)}})}var q={cur:null,next:null,dirty:!1,setFBO:null},
oa=["rgba"],I=["rgba4","rgb565","rgb5 a1"];pa.ext_srgb&&I.push("srgba");pa.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");pa.webgl_color_buffer_float&&I.push("rgba32f");var ea=["uint8"];pa.oes_texture_half_float&&ea.push("half float","float16");pa.oes_texture_float&&ea.push("float","float32");var c=0,k={};return m(q,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof f)?a:null},create:aa,createCube:function(a){function c(a){var g;
h(0>b.indexOf(q.next),"can not update framebuffer which is currently in use");var e={color:null},k=0,d=null;g="rgba";var n="uint8",f=1;if("number"===typeof a)k=a|0;else if(a){h.type(a,"object","invalid arguments for framebuffer");"shape"in a?(k=a.shape,h(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),h(k[0]===k[1],"cube framebuffer must be square"),k=k[0]):("radius"in a&&(k=a.radius|0),"width"in a?(k=a.width|0,"height"in a&&h(a.height===k,"must be square")):"height"in a&&(k=a.height|
0));if("color"in a||"colors"in a)d=a.color||a.colors,Array.isArray(d)&&h(1===d.length||pa.webgl_draw_buffers,"multiple render targets not supported");d||("colorCount"in a&&(f=a.colorCount|0,h(0<f,"invalid color buffer count")),"colorType"in a&&(h.oneOf(a.colorType,ea,"invalid color type"),n=a.colorType),"colorFormat"in a&&(g=a.colorFormat,h.oneOf(a.colorFormat,oa,"invalid color format for texture")));"depth"in a&&(e.depth=a.depth);"stencil"in a&&(e.stencil=a.stencil);"depthStencil"in a&&(e.depthStencil=
a.depthStencil)}else k=1;if(d)if(Array.isArray(d))for(a=[],g=0;g<d.length;++g)a[g]=d[g];else a=[d];else for(a=Array(f),d={radius:k,format:g,type:n},g=0;g<f;++g)a[g]=M.createCube(d);e.color=Array(a.length);for(g=0;g<a.length;++g)f=a[g],h("function"===typeof f&&"textureCube"===f._reglType,"invalid cube map"),k=k||f.width,h(f.width===k&&f.height===k,"invalid cube map shape"),e.color[g]={target:34069,data:a[g]};for(g=0;6>g;++g){for(f=0;f<a.length;++f)e.color[f].target=34069+g;0<g&&(e.depth=b[0].depth,
e.stencil=b[0].stencil,e.depthStencil=b[0].depthStencil);if(b[g])b[g](e);else b[g]=aa(e)}return m(c,{width:k,height:k,color:a})}var b=Array(6);c(a);return m(c,{faces:b,resize:function(a){var g=a|0;h(0<g&&g<=fa.maxCubeMapSize,"invalid radius for cube fbo");if(g===c.width)return c;var e=c.color;for(a=0;a<e.length;++a)e[a].resize(g);for(a=0;6>a;++a)b[a].resize(g);c.width=c.height=g;return c},_reglType:"framebufferCube",destroy:function(){b.forEach(function(a){a.destroy()})}})},clear:function(){y(k).forEach(n)},
restore:function(){q.cur=null;q.next=null;q.dirty=!0;y(k).forEach(function(a){a.framebuffer=x.createFramebuffer();V(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(z,T,Ha){var h=z("./util/sorted-object-keys"),y=z("./util/pool");T.exports=function(m,N){var e=1;N.ext_texture_filter_anisotropic&&(e=m.getParameter(34047));var b=1,t=1;N.webgl_draw_buffers&&(b=m.getParameter(34852),t=m.getParameter(36063));var a=!!N.oes_texture_float;if(a){a=m.createTexture();m.bindTexture(3553,
a);m.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var x=m.createFramebuffer();m.bindFramebuffer(36160,x);m.framebufferTexture2D(36160,36064,3553,a,0);m.bindTexture(3553,null);if(36053!==m.checkFramebufferStatus(36160))a=!1;else{m.viewport(0,0,1,1);m.clearColor(1,0,0,1);m.clear(16384);var pa=y.allocType(5126,4);m.readPixels(0,0,1,1,6408,5126,pa);m.getError()?a=!1:(m.deleteFramebuffer(x),m.deleteTexture(a),a=1===pa[0]);y.freeType(pa)}}pa=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(pa=m.createTexture(),x=y.allocType(5121,36),m.activeTexture(33984),m.bindTexture(34067,pa),m.texImage2D(34069,0,6408,3,3,0,6408,5121,x),y.freeType(x),m.bindTexture(34067,null),m.deleteTexture(pa),pa=!m.getError());return{colorBits:[m.getParameter(3410),m.getParameter(3411),m.getParameter(3412),m.getParameter(3413)],depthBits:m.getParameter(3414),stencilBits:m.getParameter(3415),subpixelBits:m.getParameter(3408),extensions:h(N).filter(function(a){return!!N[a]}),
maxAnisotropic:e,maxDrawbuffers:b,maxColorAttachments:t,pointSizeDims:m.getParameter(33901),lineWidthDims:m.getParameter(33902),maxViewportDims:m.getParameter(3386),maxCombinedTextureUnits:m.getParameter(35661),maxCubeMapSize:m.getParameter(34076),maxRenderbufferSize:m.getParameter(34024),maxTextureUnits:m.getParameter(34930),maxTextureSize:m.getParameter(3379),maxAttributes:m.getParameter(34921),maxVertexUniforms:m.getParameter(36347),maxVertexTextureUnits:m.getParameter(35660),maxVaryingVectors:m.getParameter(36348),
maxFragmentUniforms:m.getParameter(36349),glsl:m.getParameter(35724),renderer:m.getParameter(7937),vendor:m.getParameter(7936),version:m.getParameter(7938),readFloat:a,npotTextureCube:pa}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(z,T,Ha){var h=z("./util/check"),y=z("./util/is-typed-array");T.exports=function(m,N,e,b,t,a,x){function pa(M){var H;null===N.next?(h(t.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
H=5121):(h(null!==N.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),H=N.next.colorAttachments[0].texture._texture.type,h.optional(function(){a.oes_texture_float?(h(5121===H||5126===H,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===H&&h(x.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):h(5121===H,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var r=0,C=0,A=b.framebufferWidth,B=b.framebufferHeight,P=null;y(M)?P=M:M&&(h.type(M,"object","invalid arguments to regl.read()"),r=M.x|0,C=M.y|0,h(0<=r&&r<b.framebufferWidth,"invalid x offset for regl.read"),h(0<=C&&C<b.framebufferHeight,"invalid y offset for regl.read"),A=(M.width||b.framebufferWidth-r)|0,B=(M.height||b.framebufferHeight-C)|0,P=M.data||null);P&&(5121===H?h(P instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===H&&h(P instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));h(0<A&&A+r<=b.framebufferWidth,"invalid width for read pixels");h(0<B&&B+C<=b.framebufferHeight,"invalid height for read pixels");e();M=A*B*4;P||(5121===H?P=new Uint8Array(M):5126===H&&(P=P||new Float32Array(M)));h.isTypedArray(P,"data buffer for regl.read() must be a typedarray");h(P.byteLength>=M,"data buffer for regl.read() too small");m.pixelStorei(3333,4);m.readPixels(r,C,A,B,6408,H,P);return P}function fa(a){var b;
N.setFBO({framebuffer:a.framebuffer},function(){b=pa(a)});return b}return function(a){return a&&"framebuffer"in a?fa(a):pa(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(z,T,Ha){var h=z("./util/sorted-object-keys"),y=z("./util/check"),m=z("./util/values"),N=[];N[32854]=2;N[32855]=2;N[36194]=2;N[33189]=2;N[36168]=1;N[34041]=4;N[35907]=4;N[34836]=16;N[34842]=8;N[34843]=6;T.exports=function(e,b,t,a,x){function pa(a){this.id=r++;this.refCount=1;this.renderbuffer=a;this.format=32854;
this.height=this.width=0;x.profile&&(this.stats={size:0})}function fa(b){var h=b.renderbuffer;y(h,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(h);b.renderbuffer=null;b.refCount=0;delete C[b.id];a.renderbufferCount--}var M={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(M.srgba=35907);b.ext_color_buffer_half_float&&(M.rgba16f=34842,M.rgb16f=34843);b.webgl_color_buffer_float&&(M.rgba32f=34836);var H=
[];h(M).forEach(function(a){H[M[a]]=a});var r=0,C={};pa.prototype.decRef=function(){0>=--this.refCount&&fa(this)};x.profile&&(a.getTotalRenderbufferSize=function(){var a=0;h(C).forEach(function(b){a+=C[b].stats.size});return a});return{create:function(b,h){function m(a,b){var d=0,f=0,g=32854;"object"===typeof a&&a?("shape"in a?(f=a.shape,y(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),d=f[0]|0,f=f[1]|0):("radius"in a&&(d=f=a.radius|0),"width"in a&&(d=a.width|0),"height"in a&&(f=a.height|
0)),"format"in a&&(y.parameter(a.format,M,"invalid renderbuffer format"),g=M[a.format])):"number"===typeof a?(d=a|0,f="number"===typeof b?b|0:d):a?y.raise("invalid arguments to renderbuffer constructor"):d=f=1;y(0<d&&0<f&&d<=t.maxRenderbufferSize&&f<=t.maxRenderbufferSize,"invalid renderbuffer size");if(d!==r.width||f!==r.height||g!==r.format)return m.width=r.width=d,m.height=r.height=f,r.format=g,e.bindRenderbuffer(36161,r.renderbuffer),e.renderbufferStorage(36161,g,d,f),y(0===e.getError(),"invalid render buffer format"),
x.profile&&(r.stats.size=N[r.format]*r.width*r.height),m.format=H[r.format],m}var r=new pa(e.createRenderbuffer());C[r.id]=r;a.renderbufferCount++;m(b,h);m.resize=function(a,b){var d=a|0,f=b|0||d;if(d===r.width&&f===r.height)return m;y(0<d&&0<f&&d<=t.maxRenderbufferSize&&f<=t.maxRenderbufferSize,"invalid renderbuffer size");m.width=r.width=d;m.height=r.height=f;e.bindRenderbuffer(36161,r.renderbuffer);e.renderbufferStorage(36161,r.format,d,f);y(0===e.getError(),"invalid render buffer format");x.profile&&
(r.stats.size=N[r.format]*r.width*r.height);return m};m._reglType="renderbuffer";m._renderbuffer=r;x.profile&&(m.stats=r.stats);m.destroy=function(){r.decRef()};return m},clear:function(){m(C).forEach(fa)},restore:function(){m(C).forEach(function(a){a.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,a.renderbuffer);e.renderbufferStorage(36161,a.format,a.width,a.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(z,
T,Ha){var h=z("./util/sorted-object-keys"),y=z("./util/check"),m=z("./util/extend"),N=z("./util/values");T.exports=function(e,b,t,a){function x(a,b,e,d){this.name=a;this.id=b;this.location=e;this.info=d}function pa(a,b){for(var e=0;e<a.length;++e)if(a[e].id===b.id){a[e].location=b.location;return}a.push(b)}function fa(a,h,m){var d=35632===a?r:C,f=d[h];if(!f){var g=b.str(h),f=e.createShader(a);e.shaderSource(f,g);e.compileShader(f);y.shaderError(e,f,g,a,m);d[h]=f}return f}function M(b,e){this.id=P++;
this.fragId=b;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function H(h,r,m){var d;d=fa(35632,h.fragId);var f=fa(35633,h.vertId),g=h.program=e.createProgram();e.attachShader(g,d);e.attachShader(g,f);if(m)for(d=0;d<m.length;++d)f=m[d],e.bindAttribLocation(g,f[0],f[1]);e.linkProgram(g);y.linkError(e,g,b.str(h.fragId),b.str(h.vertId),r);m=e.getProgramParameter(g,35718);a.profile&&(h.stats.uniformsCount=
m);f=h.uniforms;for(d=0;d<m;++d)if(r=e.getActiveUniform(g,d))if(1<r.size)for(var n=0;n<r.size;++n){var t=r.name.replace("[0]","["+n+"]");pa(f,new x(t,b.id(t),e.getUniformLocation(g,t),r))}else pa(f,new x(r.name,b.id(r.name),e.getUniformLocation(g,r.name),r));m=e.getProgramParameter(g,35721);a.profile&&(h.stats.attributesCount=m);h=h.attributes;for(d=0;d<m;++d)(r=e.getActiveAttrib(g,d))&&pa(h,new x(r.name,b.id(r.name),e.getAttribLocation(g,r.name),r))}var r={},C={},A={},B=[],P=0;a.profile&&(t.getMaxUniformsCount=
function(){var a=0;B.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},t.getMaxAttributesCount=function(){var a=0;B.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var a=e.deleteShader.bind(e);N(r).forEach(a);r={};N(C).forEach(a);C={};B.forEach(function(a){e.deleteProgram(a.program)});B.length=0;A={};t.shaderCount=0},program:function(a,b,x,d){y.command(0<=a,"missing vertex shader",x);y.command(0<=b,"missing fragment shader",
x);var f=A[b];f||(f=A[b]={});var g=f[a];if(g&&(g.refCount++,!d))return g;var n=new M(b,a);t.shaderCount++;H(n,x,d);g||(f[a]=n);B.push(n);return m(n,{destroy:function(){n.refCount--;if(0>=n.refCount){e.deleteProgram(n.program);var a=B.indexOf(n);B.splice(a,1);t.shaderCount--}0>=f[n.vertId].refCount&&(e.deleteShader(C[n.vertId]),delete C[n.vertId],delete A[n.fragId][n.vertId]);h(A[n.fragId]).length||(e.deleteShader(r[n.fragId]),delete r[n.fragId],delete A[n.fragId])}})},restore:function(){r={};C={};
for(var a=0;a<B.length;++a)H(B[a],null,B[a].attributes.map(function(a){return[a.location,a.name]}))},shader:fa,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(z,T,Ha){T.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(z,T,Ha){T.exports=function(){var h={"":0},y=[""];return{id:function(m){var N=
h[m];if(N)return N;N=h[m]=y.length;y.push(m);return N},str:function(h){return y[h]}}}},{}],19:[function(z,T,Ha){function h(a){return"[object "+a+"]"}function y(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function m(a){return Array.isArray(a)&&0!==a.length&&A(a[0])?!0:!1}function N(a){return Object.prototype.toString.call(a)}function e(a){if(!a)return!1;var b=N(a);return 0<=oa.indexOf(b)?!0:y(a)||m(a)||H(a)}function b(a,b){36193===a.type?(a.data=C(b),r.freeType(b)):a.data=b}
function t(a,b,g,e,n,f){a="undefined"!==typeof ea[a]?ea[a]:d[a]*I[b];f&&(a*=6);if(n){for(e=0;1<=g;)e+=a*g*g,g/=2;return e}return a*g*e}var a=z("./util/sorted-object-keys"),x=z("./util/check"),pa=z("./util/extend"),fa=z("./util/values"),M=z("./util/is-typed-array"),H=z("./util/is-ndarray"),r=z("./util/pool"),C=z("./util/to-half-float"),A=z("./util/is-array-like"),B=z("./util/flatten"),P=z("./util/is-pow2");Ha=z("./constants/arraytypes.json");var R=z("./constants/arraytypes.json"),L=[9984,9986,9985,
9987],Wd=[0,6409,6410,6407,6408],d={};d[6409]=d[6406]=d[6402]=1;d[34041]=d[6410]=2;d[6407]=d[35904]=3;d[6408]=d[35906]=4;var f=h("HTMLCanvasElement"),g=h("OffscreenCanvas"),n=h("CanvasRenderingContext2D"),V=h("ImageBitmap"),aa=h("HTMLImageElement"),q=h("HTMLVideoElement"),oa=a(Ha).concat([f,g,n,V,aa,q]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var ea=[];ea[32854]=2;ea[32855]=2;ea[36194]=2;ea[34041]=4;ea[33776]=.5;ea[33777]=.5;ea[33778]=1;ea[33779]=1;ea[35986]=.5;ea[35987]=1;ea[34798]=
1;ea[35840]=.5;ea[35841]=.25;ea[35842]=.5;ea[35843]=.25;ea[36196]=.5;T.exports=function(c,k,h,I,z,ea,oa){function ma(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Na(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;
a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Z(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(x.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(x.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(x.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(x.parameter(b.colorSpace,xc,"invalid colorSpace"),
a.colorSpace=xc[b.colorSpace]);if("type"in b){var c=b.type;x(k.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");x(k.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");x(k.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
x.parameter(c,Y,"invalid texture type");a.type=Y[c]}var g=a.width,e=a.height,n=a.channels,c=!1;"shape"in b?(x(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),g=b.shape[0],e=b.shape[1],3===b.shape.length&&(n=b.shape[2],x(0<n&&4>=n,"invalid number of channels"),c=!0),x(0<=g&&g<=h.maxTextureSize,"invalid width"),x(0<=e&&e<=h.maxTextureSize,"invalid height")):("radius"in b&&(g=e=b.radius,x(0<=g&&g<=h.maxTextureSize,"invalid radius")),"width"in b&&(g=b.width,x(0<=g&&g<=h.maxTextureSize,
"invalid width")),"height"in b&&(e=b.height,x(0<=e&&e<=h.maxTextureSize,"invalid height")),"channels"in b&&(n=b.channels,x(0<n&&4>=n,"invalid number of channels"),c=!0));a.width=g|0;a.height=e|0;a.channels=n|0;g=!1;"format"in b&&(g=b.format,x(k.webgl_depth_texture||!("depth"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(g,J,"invalid texture format"),e=a.internalformat=J[g],a.format=ta[e],g in Y&&!("type"in b)&&(a.type=
Y[g]),g in ka&&(a.compressed=!0),g=!0);!c&&g?a.channels=d[a.format]:c&&!g?a.channels!==Wd[a.format]&&(a.format=a.internalformat=Wd[a.channels]):g&&c&&x(a.channels===d[a.format],"number of channels inconsistent with specified format")}}function K(a){c.pixelStorei(37440,a.flipY);c.pixelStorei(37441,a.premultiplyAlpha);c.pixelStorei(37443,a.colorSpace);c.pixelStorei(3317,a.unpackAlignment)}function O(){ma.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function U(a,c){var k=null;e(c)?k=c:c&&(x.type(c,"object","invalid pixel data type"),Z(a,c),"x"in c&&(a.xOffset=c.x|0),"y"in c&&(a.yOffset=c.y|0),e(c.data)&&(k=c.data));x(!a.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){x(!k,"can not specify copy and data field for the same texture");var l=z.viewportWidth,d=z.viewportHeight;a.width=a.width||l-a.xOffset;a.height=a.height||d-a.yOffset;a.needsCopy=!0;x(0<=a.xOffset&&a.xOffset<l&&0<=a.yOffset&&
a.yOffset<d&&0<a.width&&a.width<=l&&0<a.height&&a.height<=d,"copy texture read out of bounds")}else if(!k)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(M(k))a.channels=a.channels||4,a.data=k,"type"in c||5121!==a.type||(a.type=R[Object.prototype.toString.call(k)]|0);else if(y(k)){a.channels=a.channels||4;l=k;d=l.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:d=r.allocType(a.type,d);d.set(l);a.data=d;break;case 36193:a.data=C(l);break;default:x.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(H(k)){l=k.data;Array.isArray(l)||5121!==a.type||(a.type=R[Object.prototype.toString.call(l)]|0);var d=k.shape,u=k.stride,p,v,w,t;3===d.length?(w=d[2],t=u[2]):(x(2===d.length,"invalid ndarray pixel data, must be 2 or 3D"),t=w=1);p=d[0];v=d[1];d=u[0];u=u[1];a.alignment=1;a.width=p;a.height=v;a.channels=w;a.format=a.internalformat=Wd[w];a.needsFree=!0;p=t;k=k.offset;w=a.width;t=a.height;v=a.channels;for(var J=r.allocType(36193===a.type?5126:a.type,w*t*v),F=0,da=0;da<t;++da)for(var E=
0;E<w;++E)for(var Y=0;Y<v;++Y)J[F++]=l[d*E+u*da+p*Y+k];b(a,J)}else if(N(k)===f||N(k)===g||N(k)===n)N(k)===f||N(k)===g?a.element=k:a.element=k.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(N(k)===V)a.element=k,a.width=k.width,a.height=k.height,a.channels=4;else if(N(k)===aa)a.element=k,a.width=k.naturalWidth,a.height=k.naturalHeight,a.channels=4;else if(N(k)===q)a.element=k,a.width=k.videoWidth,a.height=k.videoHeight,a.channels=4;else if(m(k)){l=a.width||k[0].length;
d=a.height||k.length;u=a.channels;u=A(k[0][0])?u||k[0][0].length:u||1;p=B.shape(k);w=1;for(t=0;t<p.length;++t)w*=p[t];w=r.allocType(36193===a.type?5126:a.type,w);B.flatten(k,p,"",w);b(a,w);a.alignment=1;a.width=l;a.height=d;a.channels=u;a.format=a.internalformat=Wd[u];a.needsFree=!0}5126===a.type?x(0<=h.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&x(0<=h.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function qa(a,b,g,e,k){var d=a.element,p=a.data,n=a.internalformat,f=a.format,q=a.type,u=a.width,h=a.height;K(a);d?c.texSubImage2D(b,k,g,e,f,q,d):a.compressed?c.compressedTexSubImage2D(b,k,g,e,n,u,h,p):a.needsCopy?(I(),c.copyTexSubImage2D(b,k,g,e,a.xOffset,a.yOffset,u,h)):c.texSubImage2D(b,k,g,e,u,h,f,q,p)}function G(){return S.pop()||new O}function T(a){a.needsFree&&r.freeType(a.data);O.call(a);S.push(a)}function $a(){ma.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function Q(a,b,c){var g=a.images[0]=G();a.mipmask=1;g.width=a.width=b;g.height=a.height=c;g.channels=a.channels=4}function v(a,b){var c=null;if(e(b))c=a.images[0]=G(),Na(c,a),U(c,b),a.mipmask=1;else if(Z(a,b),Array.isArray(b.mipmap))for(var g=b.mipmap,k=0;k<g.length;++k)c=a.images[k]=G(),Na(c,a),c.width>>=k,c.height>>=k,U(c,g[k]),a.mipmask|=1<<k;else c=a.images[0]=G(),Na(c,a),U(c,b),a.mipmask=1;Na(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||x(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ja(a,b){for(var g=a.images,e=0;e<g.length&&g[e];++e){var k=g[e],d=b,p=e,n=k.element,f=k.data,q=k.internalformat,u=k.format,h=k.type,w=k.width,v=k.height;K(k);n?c.texImage2D(d,p,u,u,h,n):k.compressed?c.compressedTexImage2D(d,p,q,w,v,0,f):k.needsCopy?(I(),c.copyTexImage2D(d,p,u,k.xOffset,k.yOffset,w,v,0)):c.texImage2D(d,
p,u,w,v,0,u,h,f||null)}}function ca(){var a=ga.pop()||new $a;ma.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Ea(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&T(b[c]),b[c]=null;ga.push(a)}function Oa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function dc(a,b){if("min"in b){var c=b.min;x.parameter(c,qd);a.minFilter=qd[c];0<=L.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&
(c=b.mag,x.parameter(c,jc),a.magFilter=jc[c]);var c=a.wrapS,g=a.wrapT;if("wrap"in b){var e=b.wrap;"string"===typeof e?(x.parameter(e,nc),c=g=nc[e]):Array.isArray(e)&&(x.parameter(e[0],nc),x.parameter(e[1],nc),c=nc[e[0]],g=nc[e[1]])}else"wrapS"in b&&(c=b.wrapS,x.parameter(c,nc),c=nc[c]),"wrapT"in b&&(g=b.wrapT,x.parameter(g,nc),g=nc[g]);a.wrapS=c;a.wrapT=g;"anisotropic"in b&&(c=b.anisotropic,x("number"===typeof c&&1<=c&&c<=h.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);
if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":x.parameter(b.mipmap,Wb,"invalid mipmap hint");a.mipmapHint=Wb[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":x(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;c=!0;break;default:x.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ia(a,b){c.texParameteri(b,10241,a.minFilter);c.texParameteri(b,10240,a.magFilter);c.texParameteri(b,10242,a.wrapS);c.texParameteri(b,
10243,a.wrapT);k.ext_texture_filter_anisotropic&&c.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(b))}function W(a){ma.call(this);this.mipmask=0;this.internalformat=6408;this.id=ra++;this.refCount=1;this.target=a;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Oa;oa.profile&&(this.stats={size:0})}function sb(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function ha(){var a=da[0];a?c.bindTexture(a.target,a.texture):
c.bindTexture(3553,null)}function ua(a){var b=a.texture;x(b,"must not double destroy texture");var g=a.unit,e=a.target;0<=g&&(c.activeTexture(33984+g),c.bindTexture(e,null),da[g]=null);c.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete F[a.id];ea.textureCount--}var Wb={"don't care":4352,"dont care":4352,nice:4354,fast:4353},nc={repeat:10497,clamp:33071,mirror:33648},jc={nearest:9728,linear:9729},qd=pa({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},jc),xc={none:0,browser:37444},Y={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},J={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ka={};k.ext_srgb&&(J.srgb=35904,J.srgba=35906);k.oes_texture_float&&(Y.float32=Y["float"]=5126);k.oes_texture_half_float&&(Y.float16=Y["half float"]=36193);k.webgl_depth_texture&&(pa(J,{depth:6402,"depth stencil":34041}),pa(Y,{uint16:5123,uint32:5125,
"depth stencil":34042}));k.webgl_compressed_texture_s3tc&&pa(ka,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});k.webgl_compressed_texture_atc&&pa(ka,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});k.webgl_compressed_texture_pvrtc&&pa(ka,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});k.webgl_compressed_texture_etc1&&(ka["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(c.getParameter(34467));
a(ka).forEach(function(a){var b=ka[a];0<=Ca.indexOf(b)&&(J[a]=b)});var tb=a(J);h.textureFormats=tb;var Lc=[];a(J).forEach(function(a){Lc[J[a]]=a});var Wc=[];a(Y).forEach(function(a){Wc[Y[a]]=a});var E=[];a(jc).forEach(function(a){E[jc[a]]=a});var w=[];a(qd).forEach(function(a){w[qd[a]]=a});var ia=[];a(nc).forEach(function(a){ia[nc[a]]=a});var ta=tb.reduce(function(a,b){var c=J[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||k.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?
a[c]=6408:a[c]=6407;return a},{}),S=[],ga=[],ra=0,F={},u=h.maxTextureUnits,da=Array(u).map(function(){return null});pa(W.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<u;++b){var g=da[b];if(g){if(0<g.bindCount)continue;g.unit=-1}da[b]=this;a=b;break}a>=u&&x.raise("insufficient number of texture units");oa.profile&&ea.maxTextureUnits<a+1&&(ea.maxTextureUnits=a+1);this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&ua(this)}});oa.profile&&(ea.getTotalTextureSize=function(){var b=0;a(F).forEach(function(a){b+=F[a].stats.size});return b});return{create2D:function(a,b){function g(a,b){var c=e.texInfo;Oa.call(c);var k=ca();"number"===typeof a?"number"===typeof b?Q(k,a|0,b|0):Q(k,a|0,a|0):a?(x.type(a,"object","invalid arguments to regl.texture"),dc(c,a),v(k,a)):Q(k,1,1);c.genMipmaps&&(k.mipmask=(k.width<<1)-1);e.mipmask=k.mipmask;Na(e,k);x.texture2D(c,k,h);e.internalformat=k.internalformat;
g.width=k.width;g.height=k.height;sb(e);ja(k,3553);Ia(c,3553);ha();Ea(k);oa.profile&&(e.stats.size=t(e.internalformat,e.type,k.width,k.height,c.genMipmaps,!1));g.format=Lc[e.internalformat];g.type=Wc[e.type];g.mag=E[c.magFilter];g.min=w[c.minFilter];g.wrapS=ia[c.wrapS];g.wrapT=ia[c.wrapT];return g}var e=new W(3553);F[e.id]=e;ea.textureCount++;g(a,b);g.subimage=function(a,b,c,k){x(!!a,"must specify image data");b|=0;c|=0;k|=0;var d=G();Na(d,e);d.width=0;d.height=0;U(d,a);d.width=d.width||(e.width>>
k)-b;d.height=d.height||(e.height>>k)-c;x(e.type===d.type&&e.format===d.format&&e.internalformat===d.internalformat,"incompatible format for texture.subimage");x(0<=b&&0<=c&&b+d.width<=e.width&&c+d.height<=e.height,"texture.subimage write out of bounds");x(e.mipmask&1<<k,"missing mipmap data");x(d.data||d.element||d.needsCopy,"missing image data");sb(e);qa(d,3553,b,c,k);ha();T(d);return g};g.resize=function(a,b){var k=a|0,d=b|0||k;if(k===e.width&&d===e.height)return g;g.width=e.width=k;g.height=e.height=
d;sb(e);for(var n=0;e.mipmask>>n;++n){var f=k>>n,q=d>>n;if(!f||!q)break;c.texImage2D(3553,n,e.format,f,q,0,e.format,e.type,null)}ha();oa.profile&&(e.stats.size=t(e.internalformat,e.type,k,d,!1,!1));return g};g._reglType="texture2d";g._texture=e;oa.profile&&(g.stats=e.stats);g.destroy=function(){e.decRef()};return g},createCube:function(a,b,g,e,k,d){function n(a,b,c,g,e,k){var l,d=f.texInfo;Oa.call(d);for(l=0;6>l;++l)q[l]=ca();if("number"!==typeof a&&a)if("object"===typeof a)if(b)v(q[0],a),v(q[1],
b),v(q[2],c),v(q[3],g),v(q[4],e),v(q[5],k);else if(dc(d,a),Z(f,a),"faces"in a)for(a=a.faces,x(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),l=0;6>l;++l)x("object"===typeof a[l]&&!!a[l],"invalid input for cube map face"),Na(q[l],f),v(q[l],a[l]);else for(l=0;6>l;++l)v(q[l],a);else x.raise("invalid arguments to cube map");else for(a=a|0||1,l=0;6>l;++l)Q(q[l],a,a);Na(f,q[0]);x.optional(function(){h.npotTextureCube||x(P(f.width)&&P(f.height),"your browser does not support non power or two texture dimensions")});
f.mipmask=d.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;x.textureCube(f,d,q,h);f.internalformat=q[0].internalformat;n.width=q[0].width;n.height=q[0].height;sb(f);for(l=0;6>l;++l)ja(q[l],34069+l);Ia(d,34067);ha();oa.profile&&(f.stats.size=t(f.internalformat,f.type,n.width,n.height,d.genMipmaps,!0));n.format=Lc[f.internalformat];n.type=Wc[f.type];n.mag=E[d.magFilter];n.min=w[d.minFilter];n.wrapS=ia[d.wrapS];n.wrapT=ia[d.wrapT];for(l=0;6>l;++l)Ea(q[l]);return n}var f=new W(34067);F[f.id]=f;ea.cubeCount++;
var q=Array(6);n(a,b,g,e,k,d);n.subimage=function(a,b,c,g,e){x(!!b,"must specify image data");x("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;g|=0;e|=0;var k=G();Na(k,f);k.width=0;k.height=0;U(k,b);k.width=k.width||(f.width>>e)-c;k.height=k.height||(f.height>>e)-g;x(f.type===k.type&&f.format===k.format&&f.internalformat===k.internalformat,"incompatible format for texture.subimage");x(0<=c&&0<=g&&c+k.width<=f.width&&g+k.height<=f.height,"texture.subimage write out of bounds");x(f.mipmask&
1<<e,"missing mipmap data");x(k.data||k.element||k.needsCopy,"missing image data");sb(f);qa(k,34069+a,c,g,e);ha();T(k);return n};n.resize=function(a){a|=0;if(a!==f.width){n.width=f.width=a;n.height=f.height=a;sb(f);for(var b=0;6>b;++b)for(var g=0;f.mipmask>>g;++g)c.texImage2D(34069+b,g,f.format,a>>g,a>>g,0,f.format,f.type,null);ha();oa.profile&&(f.stats.size=t(f.internalformat,f.type,n.width,n.height,!1,!0));return n}};n._reglType="textureCube";n._texture=f;oa.profile&&(n.stats=f.stats);n.destroy=
function(){f.decRef()};return n},clear:function(){for(var a=0;a<u;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),da[a]=null;fa(F).forEach(ua);ea.cubeCount=0;ea.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<u;++a){var b=da[a];b&&(b.bindCount=0,b.unit=-1,da[a]=null)}fa(F).forEach(function(a){a.texture=c.createTexture();c.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)c.texImage2D(3553,b,a.internalformat,a.width>>
b,a.height>>b,0,a.internalformat,a.type,null);else for(var g=0;6>g;++g)c.texImage2D(34069+g,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);Ia(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<u;++a){var b=da[a];b&&(b.bindCount=0,b.unit=-1,da[a]=null);c.activeTexture(33984+a);c.bindTexture(3553,null);c.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(z,T,Ha){T.exports=function(h,y){function m(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function N(b,e,h){var r=t.pop()||new m;r.startQueryIndex=b;r.endQueryIndex=e;r.sum=0;r.stats=h;a.push(r)}if(!y.ext_disjoint_timer_query)return null;var e=[],b=[],t=[],a=[],x=[],pa=[];return{beginQuery:function(a){var h=e.pop()||y.ext_disjoint_timer_query.createQueryEXT();
y.ext_disjoint_timer_query.beginQueryEXT(35007,h);b.push(h);N(b.length-1,b.length,a)},endQuery:function(){y.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:N,update:function(){var h,m;h=b.length;if(0!==h){pa.length=Math.max(pa.length,h+1);x.length=Math.max(x.length,h+1);x[0]=0;var H=pa[0]=0;for(m=h=0;m<b.length;++m){var r=b[m];y.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(H+=y.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),e.push(r)):b[h++]=r;x[m+1]=H;pa[m+1]=h}b.length=
h;for(m=h=0;m<a.length;++m){var H=a[m],C=H.startQueryIndex,r=H.endQueryIndex;H.sum+=x[r]-x[C];C=pa[C];r=pa[r];r===C?(H.stats.gpuTime+=H.sum/1E6,t.push(H)):(H.startQueryIndex=C,H.endQueryIndex=r,a[h++]=H)}a.length=h}},getNumPendingQueries:function(){return b.length},clear:function(){e.push.apply(e,b);for(var a=0;a<e.length;a++)y.ext_disjoint_timer_query.deleteQueryEXT(e[a]);b.length=0;e.length=0},restore:function(){b.length=0;e.length=0}}}},{}],21:[function(z,T,Ha){function h(a){return"undefined"!==
typeof atob?atob(a):"base64:"+a}function y(a){a=Error("(regl) "+a);console.error(a);throw a;}function m(a,b){a||y(b)}function N(a){return a?": "+a:""}function e(a,b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function b(a,b,e){0>b.indexOf(a)&&
y("invalid value"+N(e)+". must be one of: "+b)}function t(a,b){for(a+="";a.length<b;)a=" "+a;return a}function a(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function x(a,b){this.number=a;this.line=b;this.errors=[]}function pa(a,b,e){this.file=a;this.line=b;this.message=e}function fa(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function M(){var a=Error(),
a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function H(b,e){var d=b.split("\n"),f=1,q=0,r={unknown:new a,0:new a};r.unknown.name=r[0].name=e||fa();r.unknown.lines.push(new x(0,""));for(var m=0;m<d.length;++m){var t=d[m],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(t);if(c)switch(c[1]){case "line":if(c=/(\d+)(\s+\d+)?/.exec(c[2]))f=c[1]|0,c[2]&&(q=c[2]|0,q in r||(r[q]=new a));break;case "define":if(c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]))r[q].name=
c[1]?h(c[2]):c[2]}r[q].lines.push(new x(f++,t))}L(r).forEach(function(a){var b=r[a];b.lines.forEach(function(a){b.index[a.number]=a})});return r}function r(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);g?b.push(new pa(g[1]|0,g[2]|0,g[3].trim())):0<a.length&&b.push(new pa("unknown",0,a))}});return b}function C(a,b){b.forEach(function(b){var e=a[b.file];if(e){var d=e.index[b.line];if(d){d.errors.push(b);e.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(b)})}function A(a){a._commandRef=fa()}function B(a,b){var e=M();y(a+" in command "+(b||fa())+("unknown"===e?"":" called from "+e))}function P(a,b,d,f){e(a,b)||B("invalid parameter type"+N(d)+". expected "+b+", got "+typeof a,f||fa())}function R(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:f[a]*b}var L=z("./sorted-object-keys"),Wd=z("./is-typed-array");z=z("./extend");var d="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
f={};f[5120]=f[5121]=1;f[5122]=f[5123]=f[36193]=f[33635]=f[32819]=f[32820]=2;f[5124]=f[5125]=f[5126]=f[34042]=4;T.exports=z(m,{optional:function(a){a()},raise:y,commandRaise:B,command:function(a,b,e){a||B(b,e||fa())},parameter:function(a,b,e){a in b||y("unknown parameter ("+a+")"+N(e)+". possible values: "+L(b).join())},commandParameter:function(a,b,e,d){a in b||B("unknown parameter ("+a+")"+N(e)+". possible values: "+L(b).join(),d||fa())},constructor:function(a){L(a).forEach(function(a){0>d.indexOf(a)&&
y('invalid regl constructor argument "'+a+'". must be one of '+d)})},type:function(a,b,d){e(a,b)||y("invalid parameter type"+N(d)+". expected "+b+", got "+typeof a)},commandType:P,isTypedArray:function(a,b){Wd(a)||y("invalid parameter type"+N(b)+". must be a typed array")},nni:function(a,b){0<=a&&(a|0)===a||y("invalid parameter type, ("+a+")"+N(b)+". must be a nonnegative integer")},oneOf:b,shaderError:function(a,b,e,d,f){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=d===
a.FRAGMENT_SHADER?"fragment":"vertex";P(e,"string",a+" shader source must be a string",f);var h=H(e,f);e=r(b);C(h,e);L(h).forEach(function(a){function b(a,c){g.push(a);e.push(c||"")}var c=h[a];if(c.hasErrors){var g=[""],e=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(t(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(g){g=g.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(g);if(e){var k=e[1];g=e[2];switch(k){case "assign":k="="}c=Math.max(a.line.indexOf(k,c),0)}else c=0;b(t("| ",6));b(t("^^^",c+3)+"\n","font-weight:bold");b(t("| ",6));b(g+"\n","font-weight:bold")});b(t("| ",6)+"\n")}else b(t(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(g.join("")):(e[0]=g.join("%c"),console.log.apply(console,e))}});m.raise("Error compiling "+
a+" shader, "+h[0].name)}},linkError:function(a,b,e,d,f){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),e=H(e,f),d='Error linking program with vertex shader, "'+H(d,f)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+d+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(d+"\n"+a),m.raise(d))},callSite:M,saveCommandRef:A,saveDrawInfo:function(a,b,e,d){function f(a){return a?d.id(a):0}function h(a,
b){L(b).forEach(function(b){a[d.id(b)]=!0})}A(a);a._fragId=f(a["static"].frag);a._vertId=f(a["static"].vert);var r=a._uniformSet={};h(r,b["static"]);h(r,b.dynamic);b=a._attributeSet={};h(b,e["static"]);h(b,e.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,e,d){a.texture?b(a.texture._texture.internalformat,e,"unsupported texture format for attachment"):b(a.renderbuffer._renderbuffer.format,d,"unsupported renderbuffer format for attachment")},
guessCommand:fa,texture2D:function(a,b,e){var d=b.width,f=b.height,h=b.channels;m(0<d&&d<=e.maxTextureSize&&0<f&&f<=e.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||m(!(d&d-1)&&!!d&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==d&&1!==f&&m(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(m(!(d&d-1)&&!!d&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),
m(b.mipmask===(d<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&m(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),m(!a.genMipmaps,"mipmap generation not supported with float textures"));var r=b.images;for(e=0;16>e;++e)if(r[e]){var t=d>>e,c=f>>e;m(b.mipmask&1<<e,"missing mipmap data");var k=r[e];m(k.width===t&&k.height===c,"invalid shape for mip images");m(k.format===b.format&&k.internalformat===
b.internalformat&&k.type===b.type,"incompatible type for mip image");!k.compressed&&k.data&&(t=Math.ceil(R(k.type,h)*t/k.unpackAlignment)*k.unpackAlignment,m(k.data.byteLength===t*c,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||m(0===(b.mipmask&1<<e),"extra mipmap data");b.compressed&&m(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,e,d){var f=a.width,h=a.height,r=a.channels;m(0<f&&f<=d.maxTextureSize&&
0<h&&h<=d.maxTextureSize,"invalid texture shape");m(f===h,"cube map must be square");m(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(d=0;d<e.length;++d){var t=e[d];m(t.width===f&&t.height===h,"inconsistent cube map face shape");b.genMipmaps&&(m(!t.compressed,"can not generate mipmap for compressed textures"),m(1===t.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=t.images,k=0;16>k;++k){var y=c[k];if(y){var x=f>>k,A=h>>k;m(t.mipmask&1<<k,"missing mipmap data");
m(y.width===x&&y.height===A,"invalid shape for mip images");m(y.format===a.format&&y.internalformat===a.internalformat&&y.type===a.type,"incompatible type for mip image");y.compressed||y.data&&m(y.data.byteLength===x*A*Math.max(R(y.type,r),y.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(z,T,Ha){T.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(z,T,Ha){function h(h){return Array.prototype.slice.call(h)}var y=z("./extend"),m=z("./compiled-fns");T.exports=function(){function N(){var a=[],b=[];return y(function(){a.push.apply(a,h(arguments))},{def:function(){var e="v"+t;t++;b.push(e);0<arguments.length&&(a.push(e,"="),a.push.apply(a,h(arguments)),a.push(";"));return e},toString:function(){return h([0<b.length?"var "+b.join(",")+";":"",h(a).join("")]).join("")}})}function e(){function a(h,r){e(h,
r,"=",b.def(h,r),";")}var b=N(),e=N(),m=b.toString,r=e.toString;return y(function(){b.apply(b,h(arguments))},{def:b.def,entry:b,exit:e,save:a,set:function(e,h,r){a(e,h);b(e,h,"=",r,";")},toString:function(){return m()+r()}})}var b=0,t=0,a={},x={};return{global:N(),link:function(e){var h="$"+b,m=!1;"object"===typeof e&&e.name&&(h=e.name.replace(/ /g,"_"),m=!0);if(h in a)return h;a[h]=e;m||b++;return h},block:N,proc:function(a,b){function m(){var a="a"+t.length;t.push(a);return a}var t=[];b=b||0;for(var r=
0;r<b;++r)m();var r=e(),C=r.toString;return x[a]=y(r,{arg:m,toString:function(){return h(["function(",t.join(),"){",C(),"}"]).join("")}})},scope:e,cond:function(){var a=h(arguments).join(""),b=e(),m=e(),t=b.toString,r=m.toString;return y(b,{then:function(){b.apply(b,h(arguments));return this},"else":function(){m.apply(m,h(arguments));return this},toString:function(){var b=r();b&&(b="else{"+b+"}");return h(["if(",a,"){",t(),"}",b]).join("")}})},compile:function(){var b=[],e=[];Object.keys(a).sort(function(a,
b){var e="$"===a.charAt(0),h="$"===b.charAt(0);return e||h?e&&h?+a.slice(1)<+b.slice(1)?-1:1:e&&!h?-1:1:a.localeCompare(b)}).forEach(function(h){var m=a[h];b.push(h);e.push(m)});for(var h=0,t=b.length-1;-1<t;t--)if("$"===b[t].charAt(0)){h=t;break}h=b.slice(h).join();t=m[h];if(!t)throw Error("missing precompiled function with key: "+h);return t.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(z,T,Ha){T.exports={$0:function(h){var y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,
V,aa,q,oa,I,ea;y=h.attributes;m=h.current;N=h.framebuffer;e=h.gl;b=h.next;t=h.vao;a=b.blend_color;x=m.blend_color;z=b.blend_equation;fa=m.blend_equation;M=b.blend_func;H=m.blend_func;r=b.colorMask;C=m.colorMask;A=b.depth_range;B=m.depth_range;P=b.polygonOffset_offset;R=m.polygonOffset_offset;L=b.sample_coverage;T=m.sample_coverage;d=b.scissor_box;f=m.scissor_box;g=b.stencil_func;n=m.stencil_func;V=b.stencil_opBack;aa=m.stencil_opBack;q=b.stencil_opFront;oa=m.stencil_opFront;I=b.viewport;ea=m.viewport;
return{poll:function(){var c,k,h,t,y,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea;m.dirty=!1;k=b.blend_enable;h=b.cull_enable;t=b.depth_enable;y=b.dither;gb=b.polygonOffset_enable;wc=b.sample_alpha;ma=b.sample_enable;Na=b.scissor_enable;Z=b.stencil_enable;K=b.cull_face;O=m.cull_face;U=b.depth_func;qa=m.depth_func;G=b.depth_mask;Zb=m.depth_mask;$a=b.frontFace;Q=m.frontFace;v=b.lineWidth;ja=m.lineWidth;ca=b.stencil_mask;Ea=m.stencil_mask;c=N.next;c!==N.cur&&(c?e.bindFramebuffer(36160,c.framebuffer):
e.bindFramebuffer(36160,null),N.cur=c);k!==m.blend_enable&&(k?e.enable(3042):e.disable(3042),m.blend_enable=k);h!==m.cull_enable&&(h?e.enable(2884):e.disable(2884),m.cull_enable=h);t!==m.depth_enable&&(t?e.enable(2929):e.disable(2929),m.depth_enable=t);y!==m.dither&&(y?e.enable(3024):e.disable(3024),m.dither=y);gb!==m.polygonOffset_enable&&(gb?e.enable(32823):e.disable(32823),m.polygonOffset_enable=gb);wc!==m.sample_alpha&&(wc?e.enable(32926):e.disable(32926),m.sample_alpha=wc);ma!==m.sample_enable&&
(ma?e.enable(32928):e.disable(32928),m.sample_enable=ma);Na!==m.scissor_enable&&(Na?e.enable(3089):e.disable(3089),m.scissor_enable=Na);Z!==m.stencil_enable&&(Z?e.enable(2960):e.disable(2960),m.stencil_enable=Z);if(a[0]!==x[0]||a[1]!==x[1]||a[2]!==x[2]||a[3]!==x[3])e.blendColor(a[0],a[1],a[2],a[3]),x[0]=a[0],x[1]=a[1],x[2]=a[2],x[3]=a[3];if(z[0]!==fa[0]||z[1]!==fa[1])e.blendEquationSeparate(z[0],z[1]),fa[0]=z[0],fa[1]=z[1];if(M[0]!==H[0]||M[1]!==H[1]||M[2]!==H[2]||M[3]!==H[3])e.blendFuncSeparate(M[0],
M[1],M[2],M[3]),H[0]=M[0],H[1]=M[1],H[2]=M[2],H[3]=M[3];if(r[0]!==C[0]||r[1]!==C[1]||r[2]!==C[2]||r[3]!==C[3])e.colorMask(r[0],r[1],r[2],r[3]),C[0]=r[0],C[1]=r[1],C[2]=r[2],C[3]=r[3];K!==O&&(e.cullFace(K),m.cull_face=K);U!==qa&&(e.depthFunc(U),m.depth_func=U);G!==Zb&&(e.depthMask(G),m.depth_mask=G);if(A[0]!==B[0]||A[1]!==B[1])e.depthRange(A[0],A[1]),B[0]=A[0],B[1]=A[1];$a!==Q&&(e.frontFace($a),m.frontFace=$a);v!==ja&&(e.lineWidth(v),m.lineWidth=v);if(P[0]!==R[0]||P[1]!==R[1])e.polygonOffset(P[0],
P[1]),R[0]=P[0],R[1]=P[1];if(L[0]!==T[0]||L[1]!==T[1])e.sampleCoverage(L[0],L[1]),T[0]=L[0],T[1]=L[1];if(d[0]!==f[0]||d[1]!==f[1]||d[2]!==f[2]||d[3]!==f[3])e.scissor(d[0],d[1],d[2],d[3]),f[0]=d[0],f[1]=d[1],f[2]=d[2],f[3]=d[3];if(g[0]!==n[0]||g[1]!==n[1]||g[2]!==n[2])e.stencilFunc(g[0],g[1],g[2]),n[0]=g[0],n[1]=g[1],n[2]=g[2];ca!==Ea&&(e.stencilMask(ca),m.stencil_mask=ca);if(V[0]!==aa[0]||V[1]!==aa[1]||V[2]!==aa[2]||V[3]!==aa[3])e.stencilOpSeparate(V[0],V[1],V[2],V[3]),aa[0]=V[0],aa[1]=V[1],aa[2]=
V[2],aa[3]=V[3];if(q[0]!==oa[0]||q[1]!==oa[1]||q[2]!==oa[2]||q[3]!==oa[3])e.stencilOpSeparate(q[0],q[1],q[2],q[3]),oa[0]=q[0],oa[1]=q[1],oa[2]=q[2],oa[3]=q[3];if(I[0]!==ea[0]||I[1]!==ea[1]||I[2]!==ea[2]||I[3]!==ea[3])e.viewport(I[0],I[1],I[2],I[3]),ea[0]=I[0],ea[1]=I[1],ea[2]=I[2],ea[3]=I[3]},refresh:function(){var c,k,h,la,Qb,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb;m.dirty=!1;k=b.blend_enable;h=b.cull_enable;la=b.depth_enable;Qb=b.dither;gb=b.polygonOffset_enable;wc=b.sample_alpha;ma=b.sample_enable;Na=b.scissor_enable;
Z=b.stencil_enable;K=b.cull_face;O=b.depth_func;U=b.depth_mask;qa=b.frontFace;G=b.lineWidth;Zb=b.stencil_mask;(c=N.next)?e.bindFramebuffer(36160,c.framebuffer):e.bindFramebuffer(36160,null);N.cur=c;c=y[0];c.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);c=y[1];c.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,c.buffer.buffer),
e.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);c=y[2];c.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);c=y[3];c.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(3,c.size,
c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);c=y[4];c.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);c=y[5];c.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):
(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);c=y[6];c.buffer?(e.enableVertexAttribArray(6),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);c=y[7];c.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(7),
e.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);c=y[8];c.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);c=y[9];c.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,c.x,c.y,c.z,
c.w),c.buffer=null);c=y[10];c.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(10,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);c=y[11];c.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);c=
y[12];c.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);c=y[13];c.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);c=y[14];c.buffer?(e.enableVertexAttribArray(14),
e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);c=y[15];c.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,c.buffer.buffer),e.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);t.currentVAO=null;t.setVAO(t.targetVAO);k?e.enable(3042):e.disable(3042);
m.blend_enable=k;h?e.enable(2884):e.disable(2884);m.cull_enable=h;la?e.enable(2929):e.disable(2929);m.depth_enable=la;Qb?e.enable(3024):e.disable(3024);m.dither=Qb;gb?e.enable(32823):e.disable(32823);m.polygonOffset_enable=gb;wc?e.enable(32926):e.disable(32926);m.sample_alpha=wc;ma?e.enable(32928):e.disable(32928);m.sample_enable=ma;Na?e.enable(3089):e.disable(3089);m.scissor_enable=Na;Z?e.enable(2960):e.disable(2960);m.stencil_enable=Z;e.blendColor(a[0],a[1],a[2],a[3]);x[0]=a[0];x[1]=a[1];x[2]=a[2];
x[3]=a[3];e.blendEquationSeparate(z[0],z[1]);fa[0]=z[0];fa[1]=z[1];e.blendFuncSeparate(M[0],M[1],M[2],M[3]);H[0]=M[0];H[1]=M[1];H[2]=M[2];H[3]=M[3];e.colorMask(r[0],r[1],r[2],r[3]);C[0]=r[0];C[1]=r[1];C[2]=r[2];C[3]=r[3];e.cullFace(K);m.cull_face=K;e.depthFunc(O);m.depth_func=O;e.depthMask(U);m.depth_mask=U;e.depthRange(A[0],A[1]);B[0]=A[0];B[1]=A[1];e.frontFace(qa);m.frontFace=qa;e.lineWidth(G);m.lineWidth=G;e.polygonOffset(P[0],P[1]);R[0]=P[0];R[1]=P[1];e.sampleCoverage(L[0],L[1]);T[0]=L[0];T[1]=
L[1];e.scissor(d[0],d[1],d[2],d[3]);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];e.stencilFunc(g[0],g[1],g[2]);n[0]=g[0];n[1]=g[1];n[2]=g[2];e.stencilMask(Zb);m.stencil_mask=Zb;e.stencilOpSeparate(V[0],V[1],V[2],V[3]);aa[0]=V[0];aa[1]=V[1];aa[2]=V[2];aa[3]=V[3];e.stencilOpSeparate(q[0],q[1],q[2],q[3]);oa[0]=q[0];oa[1]=q[1];oa[2]=q[2];oa[3]=q[3];e.viewport(I[0],I[1],I[2],I[3]);ea[0]=I[0];ea[1]=I[1];ea[2]=I[2];ea[3]=I[3]}}},$3:function(h,y,m,N){var e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,V,aa,q,oa,I,
ea,c,k,ba,la,Qb,gb;e=h.context;b=h.current;t=h.framebuffer;a=h.gl;x=h.next;z=h.shader;fa=h.vao;M=x.blend_color;H=b.blend_color;r=x.blend_equation;C=b.blend_equation;A=x.blend_func;B=b.blend_func;P=x.colorMask;R=b.colorMask;L=x.depth_range;T=b.depth_range;d=x.polygonOffset_offset;f=b.polygonOffset_offset;g=x.sample_coverage;n=b.sample_coverage;V=x.scissor_box;aa=b.scissor_box;q=x.stencil_func;oa=b.stencil_func;I=x.stencil_opBack;ea=b.stencil_opBack;c=x.stencil_opFront;k=b.stencil_opFront;ba=x.viewport;
la=b.viewport;Qb={};gb={};return{batch:function(e,h){var m,Z,K,O,U;m=t.next;m!==t.cur&&(m?a.bindFramebuffer(36160,m.framebuffer):a.bindFramebuffer(36160,null),t.cur=m);if(b.dirty){m=x.dither;m!==b.dither&&(m?a.enable(3024):a.disable(3024),b.dither=m);m=x.blend_enable;m!==b.blend_enable&&(m?a.enable(3042):a.disable(3042),b.blend_enable=m);m=M[0];K=M[1];O=M[2];U=M[3];if(m!==H[0]||K!==H[1]||O!==H[2]||U!==H[3])a.blendColor(m,K,O,U),H[0]=m,H[1]=K,H[2]=O,H[3]=U;m=r[0];K=r[1];if(m!==C[0]||K!==C[1])a.blendEquationSeparate(m,
K),C[0]=m,C[1]=K;m=A[0];K=A[1];O=A[2];U=A[3];if(m!==B[0]||K!==B[1]||O!==B[2]||U!==B[3])a.blendFuncSeparate(m,K,O,U),B[0]=m,B[1]=K,B[2]=O,B[3]=U;m=x.depth_enable;m!==b.depth_enable&&(m?a.enable(2929):a.disable(2929),b.depth_enable=m);m=x.depth_func;m!==b.depth_func&&(a.depthFunc(m),b.depth_func=m);m=L[0];K=L[1];if(m!==T[0]||K!==T[1])a.depthRange(m,K),T[0]=m,T[1]=K;m=x.depth_mask;m!==b.depth_mask&&(a.depthMask(m),b.depth_mask=m);m=P[0];K=P[1];O=P[2];U=P[3];if(m!==R[0]||K!==R[1]||O!==R[2]||U!==R[3])a.colorMask(m,
K,O,U),R[0]=m,R[1]=K,R[2]=O,R[3]=U;m=x.cull_enable;m!==b.cull_enable&&(m?a.enable(2884):a.disable(2884),b.cull_enable=m);m=x.cull_face;m!==b.cull_face&&(a.cullFace(m),b.cull_face=m);m=x.frontFace;m!==b.frontFace&&(a.frontFace(m),b.frontFace=m);m=x.lineWidth;m!==b.lineWidth&&(a.lineWidth(m),b.lineWidth=m);m=x.polygonOffset_enable;m!==b.polygonOffset_enable&&(m?a.enable(32823):a.disable(32823),b.polygonOffset_enable=m);m=d[0];K=d[1];if(m!==f[0]||K!==f[1])a.polygonOffset(m,K),f[0]=m,f[1]=K;m=x.sample_alpha;
m!==b.sample_alpha&&(m?a.enable(32926):a.disable(32926),b.sample_alpha=m);m=x.sample_enable;m!==b.sample_enable&&(m?a.enable(32928):a.disable(32928),b.sample_enable=m);m=g[0];K=g[1];if(m!==n[0]||K!==n[1])a.sampleCoverage(m,K),n[0]=m,n[1]=K;m=x.stencil_enable;m!==b.stencil_enable&&(m?a.enable(2960):a.disable(2960),b.stencil_enable=m);m=x.stencil_mask;m!==b.stencil_mask&&(a.stencilMask(m),b.stencil_mask=m);m=q[0];K=q[1];O=q[2];if(m!==oa[0]||K!==oa[1]||O!==oa[2])a.stencilFunc(m,K,O),oa[0]=m,oa[1]=K,
oa[2]=O;m=c[0];K=c[1];O=c[2];U=c[3];if(m!==k[0]||K!==k[1]||O!==k[2]||U!==k[3])a.stencilOpSeparate(m,K,O,U),k[0]=m,k[1]=K,k[2]=O,k[3]=U;m=I[0];K=I[1];O=I[2];U=I[3];if(m!==ea[0]||K!==ea[1]||O!==ea[2]||U!==ea[3])a.stencilOpSeparate(m,K,O,U),ea[0]=m,ea[1]=K,ea[2]=O,ea[3]=U;m=x.scissor_enable;m!==b.scissor_enable&&(m?a.enable(3089):a.disable(3089),b.scissor_enable=m);m=V[0];K=V[1];O=V[2];U=V[3];if(m!==aa[0]||K!==aa[1]||O!==aa[2]||U!==aa[3])a.scissor(m,K,O,U),aa[0]=m,aa[1]=K,aa[2]=O,aa[3]=U;m=ba[0];K=ba[1];
O=ba[2];U=ba[3];if(m!==la[0]||K!==la[1]||O!==la[2]||U!==la[3])a.viewport(m,K,O,U),la[0]=m,la[1]=K,la[2]=O,la[3]=U;b.dirty=!1}if(m=b.profile)Z=performance.now(),y.count+=h;K=z.program(z.vert,z.frag);a.useProgram(K.program);fa.setVAO(null);O=K.id;(U=gb[O])||(U=gb[O]=N(K));U.call(this,e,h);fa.setVAO(null);m&&(y.cpuTime+=performance.now()-Z)},draw:function(e){var h,N,Z,K,O;h=t.next;h!==t.cur&&(h?a.bindFramebuffer(36160,h.framebuffer):a.bindFramebuffer(36160,null),t.cur=h);if(b.dirty){h=x.dither;h!==b.dither&&
(h?a.enable(3024):a.disable(3024),b.dither=h);h=x.blend_enable;h!==b.blend_enable&&(h?a.enable(3042):a.disable(3042),b.blend_enable=h);h=M[0];Z=M[1];K=M[2];O=M[3];if(h!==H[0]||Z!==H[1]||K!==H[2]||O!==H[3])a.blendColor(h,Z,K,O),H[0]=h,H[1]=Z,H[2]=K,H[3]=O;h=r[0];Z=r[1];if(h!==C[0]||Z!==C[1])a.blendEquationSeparate(h,Z),C[0]=h,C[1]=Z;h=A[0];Z=A[1];K=A[2];O=A[3];if(h!==B[0]||Z!==B[1]||K!==B[2]||O!==B[3])a.blendFuncSeparate(h,Z,K,O),B[0]=h,B[1]=Z,B[2]=K,B[3]=O;h=x.depth_enable;h!==b.depth_enable&&(h?
a.enable(2929):a.disable(2929),b.depth_enable=h);h=x.depth_func;h!==b.depth_func&&(a.depthFunc(h),b.depth_func=h);h=L[0];Z=L[1];if(h!==T[0]||Z!==T[1])a.depthRange(h,Z),T[0]=h,T[1]=Z;h=x.depth_mask;h!==b.depth_mask&&(a.depthMask(h),b.depth_mask=h);h=P[0];Z=P[1];K=P[2];O=P[3];if(h!==R[0]||Z!==R[1]||K!==R[2]||O!==R[3])a.colorMask(h,Z,K,O),R[0]=h,R[1]=Z,R[2]=K,R[3]=O;h=x.cull_enable;h!==b.cull_enable&&(h?a.enable(2884):a.disable(2884),b.cull_enable=h);h=x.cull_face;h!==b.cull_face&&(a.cullFace(h),b.cull_face=
h);h=x.frontFace;h!==b.frontFace&&(a.frontFace(h),b.frontFace=h);h=x.lineWidth;h!==b.lineWidth&&(a.lineWidth(h),b.lineWidth=h);h=x.polygonOffset_enable;h!==b.polygonOffset_enable&&(h?a.enable(32823):a.disable(32823),b.polygonOffset_enable=h);h=d[0];Z=d[1];if(h!==f[0]||Z!==f[1])a.polygonOffset(h,Z),f[0]=h,f[1]=Z;h=x.sample_alpha;h!==b.sample_alpha&&(h?a.enable(32926):a.disable(32926),b.sample_alpha=h);h=x.sample_enable;h!==b.sample_enable&&(h?a.enable(32928):a.disable(32928),b.sample_enable=h);h=g[0];
Z=g[1];if(h!==n[0]||Z!==n[1])a.sampleCoverage(h,Z),n[0]=h,n[1]=Z;h=x.stencil_enable;h!==b.stencil_enable&&(h?a.enable(2960):a.disable(2960),b.stencil_enable=h);h=x.stencil_mask;h!==b.stencil_mask&&(a.stencilMask(h),b.stencil_mask=h);h=q[0];Z=q[1];K=q[2];if(h!==oa[0]||Z!==oa[1]||K!==oa[2])a.stencilFunc(h,Z,K),oa[0]=h,oa[1]=Z,oa[2]=K;h=c[0];Z=c[1];K=c[2];O=c[3];if(h!==k[0]||Z!==k[1]||K!==k[2]||O!==k[3])a.stencilOpSeparate(h,Z,K,O),k[0]=h,k[1]=Z,k[2]=K,k[3]=O;h=I[0];Z=I[1];K=I[2];O=I[3];if(h!==ea[0]||
Z!==ea[1]||K!==ea[2]||O!==ea[3])a.stencilOpSeparate(h,Z,K,O),ea[0]=h,ea[1]=Z,ea[2]=K,ea[3]=O;h=x.scissor_enable;h!==b.scissor_enable&&(h?a.enable(3089):a.disable(3089),b.scissor_enable=h);h=V[0];Z=V[1];K=V[2];O=V[3];if(h!==aa[0]||Z!==aa[1]||K!==aa[2]||O!==aa[3])a.scissor(h,Z,K,O),aa[0]=h,aa[1]=Z,aa[2]=K,aa[3]=O;h=ba[0];Z=ba[1];K=ba[2];O=ba[3];if(h!==la[0]||Z!==la[1]||K!==la[2]||O!==la[3])a.viewport(h,Z,K,O),la[0]=h,la[1]=Z,la[2]=K,la[3]=O;b.dirty=!1}if(h=b.profile)N=performance.now(),y.count++;Z=
z.program(z.vert,z.frag);a.useProgram(Z.program);fa.setVAO(null);K=Z.id;(O=Qb[K])||(O=Qb[K]=m(Z));O.call(this,e);fa.setVAO(null);h&&(y.cpuTime+=performance.now()-N)},scope:function(a,c,g){var k,d;if(k=b.profile)d=performance.now(),y.count++;c(e,a,g);k&&(y.cpuTime+=performance.now()-d)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(h,
y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Qb,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua,Wb,nc,jc,qd,xc,Y,J,ka,Ca,tb,Lc,Wc,E,w,ia,ta,S,ga,ra){var F,u,da,D,xa,na,l,ic,X,p,Hb,zb,Ve,me,te,fe,Kd,Ee,nd,ie,se,Id,Cd,$d,Xd,Ze,If,tf,vd,Fe,Sd,Td,de,Yd,od,kd,sd,md,cd,pc,pd,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,Dd,wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb;F=h.attributes;u=h.context;da=h.current;D=h.draw;xa=h.elements;na=h.framebuffer;l=h.gl;ic=h.next;X=h.shader;
p=h.uniforms;Hb=h.vao;zb=ic.blend_color;Ve=da.blend_color;me=ic.blend_equation;te=da.blend_equation;fe=ic.blend_func;Kd=da.blend_func;Ee=ic.colorMask;nd=da.colorMask;ie=ic.depth_range;se=da.depth_range;Id=ic.polygonOffset_offset;Cd=da.polygonOffset_offset;$d=ic.sample_coverage;Xd=da.sample_coverage;Ze=ic.scissor_box;If=da.scissor_box;tf=ic.stencil_func;vd=da.stencil_func;Fe=ic.stencil_opBack;Sd=da.stencil_opBack;Td=ic.stencil_opFront;de=da.stencil_opFront;Yd=ic.viewport;od=da.viewport;kd={};sd={};
md=new Float32Array(16);cd=new Float32Array(16);pc=new Float32Array(16);pd=new Float32Array(16);fd=new Float32Array(16);Mc=new Float32Array(16);rc=new Float32Array(16);ab=new Float32Array(16);Jc=new Float32Array(16);Eb=new Float32Array(16);qc=new Float32Array(16);Ta=new Float32Array(16);Kc=new Float32Array(16);bc=new Float32Array(16);sc=new Float32Array(16);Dd=new Float32Array(16);wd=new Float32Array(16);Bc=new Float32Array(16);Xb=new Float32Array(16);Gc=new Float32Array(16);Rc=new Float32Array(16);
La=new Float32Array(16);ub=new Float32Array(16);Wa=new Float32Array(16);va=new Float32Array(16);rd=new Float32Array(16);Bb=new Float32Array(16);Sa=new Float32Array(16);Gb=new Float32Array(16);cb=new Float32Array(16);Yb=new Float32Array(16);Rb=new Float32Array(16);return{batch:function(c,g){var k,d,h,f;k=na.next;k!==na.cur&&(k?l.bindFramebuffer(36160,k.framebuffer):l.bindFramebuffer(36160,null),na.cur=k);if(da.dirty){var m,p,n,q,y,X,I,L,V,aa,ba,ab,Ta,sa,ea,wa,zb,Eb,Aa,bc,Ja,oa,Mc,Ra,fd;m=Ee[0];p=Ee[1];
n=Ee[2];q=Ee[3];if(m!==nd[0]||p!==nd[1]||n!==nd[2]||q!==nd[3])l.colorMask(m,p,n,q),nd[0]=m,nd[1]=p,nd[2]=n,nd[3]=q;y=ic.frontFace;y!==da.frontFace&&(l.frontFace(y),da.frontFace=y);X=ic.polygonOffset_enable;X!==da.polygonOffset_enable&&(X?l.enable(32823):l.disable(32823),da.polygonOffset_enable=X);I=Id[0];L=Id[1];if(I!==Cd[0]||L!==Cd[1])l.polygonOffset(I,L),Cd[0]=I,Cd[1]=L;V=ic.sample_alpha;V!==da.sample_alpha&&(V?l.enable(32926):l.disable(32926),da.sample_alpha=V);aa=ic.sample_enable;aa!==da.sample_enable&&
(aa?l.enable(32928):l.disable(32928),da.sample_enable=aa);ba=$d[0];ab=$d[1];if(ba!==Xd[0]||ab!==Xd[1])l.sampleCoverage(ba,ab),Xd[0]=ba,Xd[1]=ab;Ta=ic.stencil_enable;Ta!==da.stencil_enable&&(Ta?l.enable(2960):l.disable(2960),da.stencil_enable=Ta);sa=ic.stencil_mask;sa!==da.stencil_mask&&(l.stencilMask(sa),da.stencil_mask=sa);ea=tf[0];wa=tf[1];zb=tf[2];if(ea!==vd[0]||wa!==vd[1]||zb!==vd[2])l.stencilFunc(ea,wa,zb),vd[0]=ea,vd[1]=wa,vd[2]=zb;Eb=Td[0];Aa=Td[1];bc=Td[2];Ja=Td[3];if(Eb!==de[0]||Aa!==de[1]||
bc!==de[2]||Ja!==de[3])l.stencilOpSeparate(Eb,Aa,bc,Ja),de[0]=Eb,de[1]=Aa,de[2]=bc,de[3]=Ja;oa=Fe[0];Mc=Fe[1];Ra=Fe[2];fd=Fe[3];if(oa!==Sd[0]||Mc!==Sd[1]||Ra!==Sd[2]||fd!==Sd[3])l.stencilOpSeparate(oa,Mc,Ra,fd),Sd[0]=oa,Sd[1]=Mc,Sd[2]=Ra,Sd[3]=fd}l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);da.blend_enable=!1;l.blendEquationSeparate(32774,32774);te[0]=32774;te[1]=32774;l.blendFuncSeparate(770,771,1,1);Kd[0]=770;Kd[1]=771;Kd[2]=1;Kd[3]=1;l.enable(2884);da.cull_enable=!0;l.cullFace(1029);
da.cull_face=1029;l.enable(2929);da.depth_enable=!0;l.depthFunc(513);da.depth_func=513;l.depthMask(!0);da.depth_mask=!0;l.depthRange(0,1);se[0]=0;se[1]=1;l.disable(3024);da.dither=!1;l.lineWidth(2);da.lineWidth=2;l.enable(3089);da.scissor_enable=!0;d=da.profile;da.profile=!1;l.useProgram(wc.program);var la,Za,rc,ya,Ze,Ka,pc,fb,ib,za,Kc,Da,pb,qb,Xa,Ya,Jc,sc,T,Va,Lb,cd,Fa,qc,Qa,Ba,lb,wb,Db,rb,md,xb,pd;Hb.setVAO(null);la=Wb.location;Za=F[la];Za.buffer||l.enableVertexAttribArray(la);if(Za.type!==N.dtype||
4!==Za.size||Za.buffer!==N||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)l.bindBuffer(34962,N.buffer),l.vertexAttribPointer(la,4,N.dtype,!1,0,0),Za.type=N.dtype,Za.size=4,Za.buffer=N,Za.normalized=!1,Za.offset=0,Za.stride=0;rc=nc.location;ya=F[rc];ya.buffer||l.enableVertexAttribArray(rc);if(ya.type!==e.dtype||4!==ya.size||ya.buffer!==e||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,e.buffer),l.vertexAttribPointer(rc,4,e.dtype,!1,0,0),ya.type=e.dtype,ya.size=4,ya.buffer=e,
ya.normalized=!1,ya.offset=0,ya.stride=0;Ze=jc.location;Ka=F[Ze];Ka.buffer||l.enableVertexAttribArray(Ze);if(Ka.type!==b.dtype||4!==Ka.size||Ka.buffer!==b||!1!==Ka.normalized||0!==Ka.offset||0!==Ka.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(Ze,4,b.dtype,!1,0,0),Ka.type=b.dtype,Ka.size=4,Ka.buffer=b,Ka.normalized=!1,Ka.offset=0,Ka.stride=0;pc=qd.location;fb=F[pc];fb.buffer||l.enableVertexAttribArray(pc);if(fb.type!==t.dtype||4!==fb.size||fb.buffer!==t||!1!==fb.normalized||0!==fb.offset||
0!==fb.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(pc,4,t.dtype,!1,0,0),fb.type=t.dtype,fb.size=4,fb.buffer=t,fb.normalized=!1,fb.offset=0,fb.stride=0;ib=xc.location;za=F[ib];za.buffer||l.enableVertexAttribArray(ib);if(za.type!==a.dtype||4!==za.size||za.buffer!==a||!1!==za.normalized||0!==za.offset||0!==za.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(ib,4,a.dtype,!1,0,0),za.type=a.dtype,za.size=4,za.buffer=a,za.normalized=!1,za.offset=0,za.stride=0;Kc=Y.location;Da=F[Kc];
Da.buffer||l.enableVertexAttribArray(Kc);if(Da.type!==x.dtype||4!==Da.size||Da.buffer!==x||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(Kc,4,x.dtype,!1,0,0),Da.type=x.dtype,Da.size=4,Da.buffer=x,Da.normalized=!1,Da.offset=0,Da.stride=0;pb=J.location;qb=F[pb];qb.buffer||l.enableVertexAttribArray(pb);if(qb.type!==z.dtype||4!==qb.size||qb.buffer!==z||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(pb,
4,z.dtype,!1,0,0),qb.type=z.dtype,qb.size=4,qb.buffer=z,qb.normalized=!1,qb.offset=0,qb.stride=0;Xa=ka.location;Ya=F[Xa];Ya.buffer||l.enableVertexAttribArray(Xa);if(Ya.type!==fa.dtype||4!==Ya.size||Ya.buffer!==fa||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)l.bindBuffer(34962,fa.buffer),l.vertexAttribPointer(Xa,4,fa.dtype,!1,0,0),Ya.type=fa.dtype,Ya.size=4,Ya.buffer=fa,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Jc=Ca.location;sc=F[Jc];sc.buffer||l.enableVertexAttribArray(Jc);if(sc.type!==M.dtype||
4!==sc.size||sc.buffer!==M||!1!==sc.normalized||0!==sc.offset||0!==sc.stride)l.bindBuffer(34962,M.buffer),l.vertexAttribPointer(Jc,4,M.dtype,!1,0,0),sc.type=M.dtype,sc.size=4,sc.buffer=M,sc.normalized=!1,sc.offset=0,sc.stride=0;T=tb.location;Va=F[T];Va.buffer||l.enableVertexAttribArray(T);if(Va.type!==H.dtype||4!==Va.size||Va.buffer!==H||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(T,4,H.dtype,!1,0,0),Va.type=H.dtype,Va.size=4,Va.buffer=H,Va.normalized=
!1,Va.offset=0,Va.stride=0;Lb=Lc.location;cd=F[Lb];cd.buffer||l.enableVertexAttribArray(Lb);if(cd.type!==r.dtype||4!==cd.size||cd.buffer!==r||!1!==cd.normalized||0!==cd.offset||0!==cd.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(Lb,4,r.dtype,!1,0,0),cd.type=r.dtype,cd.size=4,cd.buffer=r,cd.normalized=!1,cd.offset=0,cd.stride=0;Fa=Wc.location;qc=F[Fa];qc.buffer||l.enableVertexAttribArray(Fa);if(qc.type!==C.dtype||4!==qc.size||qc.buffer!==C||!1!==qc.normalized||0!==qc.offset||0!==qc.stride)l.bindBuffer(34962,
C.buffer),l.vertexAttribPointer(Fa,4,C.dtype,!1,0,0),qc.type=C.dtype,qc.size=4,qc.buffer=C,qc.normalized=!1,qc.offset=0,qc.stride=0;Qa=E.location;Ba=F[Qa];Ba.buffer||l.enableVertexAttribArray(Qa);if(Ba.type!==A.dtype||4!==Ba.size||Ba.buffer!==A||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(Qa,4,A.dtype,!1,0,0),Ba.type=A.dtype,Ba.size=4,Ba.buffer=A,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;lb=w.location;wb=F[lb];wb.buffer||l.enableVertexAttribArray(lb);
if(wb.type!==B.dtype||4!==wb.size||wb.buffer!==B||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(lb,4,B.dtype,!1,0,0),wb.type=B.dtype,wb.size=4,wb.buffer=B,wb.normalized=!1,wb.offset=0,wb.stride=0;Db=ia.location;rb=F[Db];rb.buffer||l.enableVertexAttribArray(Db);if(rb.type!==P.dtype||4!==rb.size||rb.buffer!==P||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)l.bindBuffer(34962,P.buffer),l.vertexAttribPointer(Db,4,P.dtype,!1,0,0),rb.type=P.dtype,
rb.size=4,rb.buffer=P,rb.normalized=!1,rb.offset=0,rb.stride=0;md=Na.location;xb=F[md];xb.buffer||l.enableVertexAttribArray(md);if(xb.type!==R.dtype||4!==xb.size||xb.buffer!==R||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)l.bindBuffer(34962,R.buffer),l.vertexAttribPointer(md,4,R.dtype,!1,0,0),xb.type=R.dtype,xb.size=4,xb.buffer=R,xb.normalized=!1,xb.offset=0,xb.stride=0;l.uniform1i(ta.location,ma.bind());(pd=D.elements)?l.bindBuffer(34963,pd.buffer.buffer):Hb.currentVAO&&(pd=xa.getElements(Hb.currentVAO.elements))&&
l.bindBuffer(34963,pd.buffer.buffer);for(h=0;h<g;++h){f=c[h];var fe,ie,Yd,Dd,me,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,gb,Qb,id,Yc,Wd,Ld,zf,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,Ha,ve,he,ge,ee,oe,be;kd.height=f.viewportHeight;kd.width=f.viewportWidth;kd.x=f.viewportX;kd.y=f.viewportY;fe=kd.x|0;ie=kd.y|0;Yd="width"in kd?kd.width|0:u.framebufferWidth-fe;Dd="height"in kd?kd.height|0:u.framebufferHeight-ie;me=u.viewportWidth;u.viewportWidth=Yd;Vb=u.viewportHeight;
u.viewportHeight=Dd;l.viewport(fe,ie,Yd,Dd);od[0]=fe;od[1]=ie;od[2]=Yd;od[3]=Dd;sd.height=f.scissorHeight;sd.width=f.scissorWidth;sd.x=f.scissorX;sd.y=f.scissorY;cc=sd.x|0;Ob=sd.y|0;Ga="width"in sd?sd.width|0:u.framebufferWidth-cc;$b="height"in sd?sd.height|0:u.framebufferHeight-Ob;l.scissor(cc,Ob,Ga,$b);If[0]=cc;If[1]=Ob;If[2]=Ga;If[3]=$b;mb=f.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(wd[0]=mb[0],wd[1]=mb[1],wd[2]=mb[2],wd[3]=mb[3],wd[4]=mb[4],wd[5]=
mb[5],wd[6]=mb[6],wd[7]=mb[7],wd[8]=mb[8],wd[9]=mb[9],wd[10]=mb[10],wd[11]=mb[11],wd[12]=mb[12],wd[13]=mb[13],wd[14]=mb[14],wd[15]=mb[15],wd));yb=f.dim1A;l.uniformMatrix4fv(G.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(Bc[0]=yb[0],Bc[1]=yb[1],Bc[2]=yb[2],Bc[3]=yb[3],Bc[4]=yb[4],Bc[5]=yb[5],Bc[6]=yb[6],Bc[7]=yb[7],Bc[8]=yb[8],Bc[9]=yb[9],Bc[10]=yb[10],Bc[11]=yb[11],Bc[12]=yb[12],Bc[13]=yb[13],Bc[14]=yb[14],Bc[15]=yb[15],Bc));Mb=f.dim0B;l.uniformMatrix4fv(O.location,!1,Array.isArray(Mb)||
Mb instanceof Float32Array?Mb:(Xb[0]=Mb[0],Xb[1]=Mb[1],Xb[2]=Mb[2],Xb[3]=Mb[3],Xb[4]=Mb[4],Xb[5]=Mb[5],Xb[6]=Mb[6],Xb[7]=Mb[7],Xb[8]=Mb[8],Xb[9]=Mb[9],Xb[10]=Mb[10],Xb[11]=Mb[11],Xb[12]=Mb[12],Xb[13]=Mb[13],Xb[14]=Mb[14],Xb[15]=Mb[15],Xb));Pb=f.dim1B;l.uniformMatrix4fv(Zb.location,!1,Array.isArray(Pb)||Pb instanceof Float32Array?Pb:(Gc[0]=Pb[0],Gc[1]=Pb[1],Gc[2]=Pb[2],Gc[3]=Pb[3],Gc[4]=Pb[4],Gc[5]=Pb[5],Gc[6]=Pb[6],Gc[7]=Pb[7],Gc[8]=Pb[8],Gc[9]=Pb[9],Gc[10]=Pb[10],Gc[11]=Pb[11],Gc[12]=Pb[12],Gc[13]=
Pb[13],Gc[14]=Pb[14],Gc[15]=Pb[15],Gc));fc=f.dim0C;l.uniformMatrix4fv(U.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(Rc[0]=fc[0],Rc[1]=fc[1],Rc[2]=fc[2],Rc[3]=fc[3],Rc[4]=fc[4],Rc[5]=fc[5],Rc[6]=fc[6],Rc[7]=fc[7],Rc[8]=fc[8],Rc[9]=fc[9],Rc[10]=fc[10],Rc[11]=fc[11],Rc[12]=fc[12],Rc[13]=fc[13],Rc[14]=fc[14],Rc[15]=fc[15],Rc));hc=f.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(La[0]=hc[0],La[1]=hc[1],La[2]=hc[2],La[3]=hc[3],La[4]=hc[4],La[5]=
hc[5],La[6]=hc[6],La[7]=hc[7],La[8]=hc[8],La[9]=hc[9],La[10]=hc[10],La[11]=hc[11],La[12]=hc[12],La[13]=hc[13],La[14]=hc[14],La[15]=hc[15],La));Sc=f.dim0D;l.uniformMatrix4fv(qa.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(ub[0]=Sc[0],ub[1]=Sc[1],ub[2]=Sc[2],ub[3]=Sc[3],ub[4]=Sc[4],ub[5]=Sc[5],ub[6]=Sc[6],ub[7]=Sc[7],ub[8]=Sc[8],ub[9]=Sc[9],ub[10]=Sc[10],ub[11]=Sc[11],ub[12]=Sc[12],ub[13]=Sc[13],ub[14]=Sc[14],ub[15]=Sc[15],ub));Cc=f.dim1D;l.uniformMatrix4fv(Q.location,!1,Array.isArray(Cc)||
Cc instanceof Float32Array?Cc:(Wa[0]=Cc[0],Wa[1]=Cc[1],Wa[2]=Cc[2],Wa[3]=Cc[3],Wa[4]=Cc[4],Wa[5]=Cc[5],Wa[6]=Cc[6],Wa[7]=Cc[7],Wa[8]=Cc[8],Wa[9]=Cc[9],Wa[10]=Cc[10],Wa[11]=Cc[11],Wa[12]=Cc[12],Wa[13]=Cc[13],Wa[14]=Cc[14],Wa[15]=Cc[15],Wa));Dc=f.loA;l.uniformMatrix4fv(dc.location,!1,Array.isArray(Dc)||Dc instanceof Float32Array?Dc:(va[0]=Dc[0],va[1]=Dc[1],va[2]=Dc[2],va[3]=Dc[3],va[4]=Dc[4],va[5]=Dc[5],va[6]=Dc[6],va[7]=Dc[7],va[8]=Dc[8],va[9]=Dc[9],va[10]=Dc[10],va[11]=Dc[11],va[12]=Dc[12],va[13]=
Dc[13],va[14]=Dc[14],va[15]=Dc[15],va));Ec=f.hiA;l.uniformMatrix4fv(ja.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(rd[0]=Ec[0],rd[1]=Ec[1],rd[2]=Ec[2],rd[3]=Ec[3],rd[4]=Ec[4],rd[5]=Ec[5],rd[6]=Ec[6],rd[7]=Ec[7],rd[8]=Ec[8],rd[9]=Ec[9],rd[10]=Ec[10],rd[11]=Ec[11],rd[12]=Ec[12],rd[13]=Ec[13],rd[14]=Ec[14],rd[15]=Ec[15],rd));Oc=f.loB;l.uniformMatrix4fv(Ia.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(Bb[0]=Oc[0],Bb[1]=Oc[1],Bb[2]=Oc[2],Bb[3]=Oc[3],Bb[4]=Oc[4],Bb[5]=
Oc[5],Bb[6]=Oc[6],Bb[7]=Oc[7],Bb[8]=Oc[8],Bb[9]=Oc[9],Bb[10]=Oc[10],Bb[11]=Oc[11],Bb[12]=Oc[12],Bb[13]=Oc[13],Bb[14]=Oc[14],Bb[15]=Oc[15],Bb));Zc=f.hiB;l.uniformMatrix4fv(ca.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Sa[0]=Zc[0],Sa[1]=Zc[1],Sa[2]=Zc[2],Sa[3]=Zc[3],Sa[4]=Zc[4],Sa[5]=Zc[5],Sa[6]=Zc[6],Sa[7]=Zc[7],Sa[8]=Zc[8],Sa[9]=Zc[9],Sa[10]=Zc[10],Sa[11]=Zc[11],Sa[12]=Zc[12],Sa[13]=Zc[13],Sa[14]=Zc[14],Sa[15]=Zc[15],Sa));Tc=f.loC;l.uniformMatrix4fv(W.location,!1,Array.isArray(Tc)||
Tc instanceof Float32Array?Tc:(Gb[0]=Tc[0],Gb[1]=Tc[1],Gb[2]=Tc[2],Gb[3]=Tc[3],Gb[4]=Tc[4],Gb[5]=Tc[5],Gb[6]=Tc[6],Gb[7]=Tc[7],Gb[8]=Tc[8],Gb[9]=Tc[9],Gb[10]=Tc[10],Gb[11]=Tc[11],Gb[12]=Tc[12],Gb[13]=Tc[13],Gb[14]=Tc[14],Gb[15]=Tc[15],Gb));Pc=f.hiC;l.uniformMatrix4fv(Ea.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(cb[0]=Pc[0],cb[1]=Pc[1],cb[2]=Pc[2],cb[3]=Pc[3],cb[4]=Pc[4],cb[5]=Pc[5],cb[6]=Pc[6],cb[7]=Pc[7],cb[8]=Pc[8],cb[9]=Pc[9],cb[10]=Pc[10],cb[11]=Pc[11],cb[12]=Pc[12],cb[13]=
Pc[13],cb[14]=Pc[14],cb[15]=Pc[15],cb));Kb=f.loD;l.uniformMatrix4fv(sb.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(Yb[0]=Kb[0],Yb[1]=Kb[1],Yb[2]=Kb[2],Yb[3]=Kb[3],Yb[4]=Kb[4],Yb[5]=Kb[5],Yb[6]=Kb[6],Yb[7]=Kb[7],Yb[8]=Kb[8],Yb[9]=Kb[9],Yb[10]=Kb[10],Yb[11]=Kb[11],Yb[12]=Kb[12],Yb[13]=Kb[13],Yb[14]=Kb[14],Yb[15]=Kb[15],Yb));Fb=f.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Rb[0]=Fb[0],Rb[1]=Fb[1],Rb[2]=Fb[2],Rb[3]=Fb[3],Rb[4]=Fb[4],Rb[5]=
Fb[5],Rb[6]=Fb[6],Rb[7]=Fb[7],Rb[8]=Fb[8],Rb[9]=Fb[9],Rb[10]=Fb[10],Rb[11]=Fb[11],Rb[12]=Fb[12],Rb[13]=Fb[13],Rb[14]=Fb[14],Rb[15]=Fb[15],Rb));Qc=f.resolution;Ic=Qc[0];gc=Qc[1];h&&Uc===Ic&&Xc===gc||(Uc=Ic,Xc=gc,l.uniform2f(S.location,Ic,gc));gb=f.viewBoxPos;Qb=gb[0];Yc=gb[1];h&&id===Qb&&Wd===Yc||(id=Qb,Wd=Yc,l.uniform2f(ga.location,Qb,Yc));Ld=f.viewBoxSize;zf=Ld[0];Ud=Ld[1];h&&re===zf&&Gd===Ud||(re=zf,Gd=Ud,l.uniform2f(ra.location,zf,Ud));Ed=f.maskHeight;h&&ed===Ed||(ed=Ed,l.uniform1f(ha.location,
Ed));Fc=f.drwLayer;h&&ld===Fc||(ld=Fc,l.uniform1f(v.location,Fc));hd=f.contextColor;$c=hd[0];zd=hd[1];we=hd[2];ve=hd[3];h&&jd===$c&&Bd===zd&&Ha===we&&he===ve||(jd=$c,Bd=zd,Ha=we,he=ve,l.uniform4f(Z.location,$c,zd,we,ve));(ge=f.maskTexture)&&"framebuffer"===ge._reglType&&(ge=ge.color[0]);ee=ge._texture;l.uniform1i(ua.location,ee.bind());oe=f.offset;if(be=f.count)pd?l.drawElements(1,be,pd.type,oe<<(pd.type-5121>>1)):l.drawArrays(1,oe,be),u.viewportWidth=me,u.viewportHeight=Vb,ee.unbind()}ma.unbind();
da.dirty=!0;Hb.setVAO(null);da.profile=d},draw:function(c){var g,k,d,f,h,p;g=na.next;g!==na.cur&&(g?l.bindFramebuffer(36160,g.framebuffer):l.bindFramebuffer(36160,null),na.cur=g);if(da.dirty){g=Ee[0];p=Ee[1];k=Ee[2];d=Ee[3];if(g!==nd[0]||p!==nd[1]||k!==nd[2]||d!==nd[3])l.colorMask(g,p,k,d),nd[0]=g,nd[1]=p,nd[2]=k,nd[3]=d;g=ic.frontFace;g!==da.frontFace&&(l.frontFace(g),da.frontFace=g);g=ic.polygonOffset_enable;g!==da.polygonOffset_enable&&(g?l.enable(32823):l.disable(32823),da.polygonOffset_enable=
g);g=Id[0];p=Id[1];if(g!==Cd[0]||p!==Cd[1])l.polygonOffset(g,p),Cd[0]=g,Cd[1]=p;g=ic.sample_alpha;g!==da.sample_alpha&&(g?l.enable(32926):l.disable(32926),da.sample_alpha=g);g=ic.sample_enable;g!==da.sample_enable&&(g?l.enable(32928):l.disable(32928),da.sample_enable=g);g=$d[0];p=$d[1];if(g!==Xd[0]||p!==Xd[1])l.sampleCoverage(g,p),Xd[0]=g,Xd[1]=p;g=ic.stencil_enable;g!==da.stencil_enable&&(g?l.enable(2960):l.disable(2960),da.stencil_enable=g);g=ic.stencil_mask;g!==da.stencil_mask&&(l.stencilMask(g),
da.stencil_mask=g);g=tf[0];p=tf[1];k=tf[2];if(g!==vd[0]||p!==vd[1]||k!==vd[2])l.stencilFunc(g,p,k),vd[0]=g,vd[1]=p,vd[2]=k;g=Td[0];p=Td[1];k=Td[2];d=Td[3];if(g!==de[0]||p!==de[1]||k!==de[2]||d!==de[3])l.stencilOpSeparate(g,p,k,d),de[0]=g,de[1]=p,de[2]=k,de[3]=d;g=Fe[0];p=Fe[1];k=Fe[2];d=Fe[3];if(g!==Sd[0]||p!==Sd[1]||k!==Sd[2]||d!==Sd[3])l.stencilOpSeparate(g,p,k,d),Sd[0]=g,Sd[1]=p,Sd[2]=k,Sd[3]=d}kd.height=c.viewportHeight;kd.width=c.viewportWidth;kd.x=c.viewportX;kd.y=c.viewportY;k=kd.x|0;d=kd.y|
0;f="width"in kd?kd.width|0:u.framebufferWidth-k;h="height"in kd?kd.height|0:u.framebufferHeight-d;g=u.viewportWidth;u.viewportWidth=f;p=u.viewportHeight;u.viewportHeight=h;l.viewport(k,d,f,h);od[0]=k;od[1]=d;od[2]=f;od[3]=h;l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);da.blend_enable=!1;l.blendEquationSeparate(32774,32774);te[0]=32774;te[1]=32774;l.blendFuncSeparate(770,771,1,1);Kd[0]=770;Kd[1]=771;Kd[2]=1;Kd[3]=1;l.enable(2884);da.cull_enable=!0;l.cullFace(1029);da.cull_face=
1029;l.enable(2929);da.depth_enable=!0;l.depthFunc(513);da.depth_func=513;l.depthMask(!0);da.depth_mask=!0;l.depthRange(0,1);se[0]=0;se[1]=1;l.disable(3024);da.dither=!1;l.lineWidth(2);da.lineWidth=2;sd.height=c.scissorHeight;sd.width=c.scissorWidth;sd.x=c.scissorX;sd.y=c.scissorY;k=sd.x|0;d=sd.y|0;f="width"in sd?sd.width|0:u.framebufferWidth-k;h="height"in sd?sd.height|0:u.framebufferHeight-d;l.scissor(k,d,f,h);If[0]=k;If[1]=d;If[2]=f;If[3]=h;l.enable(3089);da.scissor_enable=!0;k=da.profile;da.profile=
!1;l.useProgram(m.program);Hb.setVAO(null);d=Wb.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==N.dtype||4!==f.size||f.buffer!==N||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,N.buffer),l.vertexAttribPointer(d,4,N.dtype,!1,0,0),f.type=N.dtype,f.size=4,f.buffer=N,f.normalized=!1,f.offset=0,f.stride=0;d=nc.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==e.dtype||4!==f.size||f.buffer!==e||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,
e.buffer),l.vertexAttribPointer(d,4,e.dtype,!1,0,0),f.type=e.dtype,f.size=4,f.buffer=e,f.normalized=!1,f.offset=0,f.stride=0;d=jc.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==b.dtype||4!==f.size||f.buffer!==b||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(d,4,b.dtype,!1,0,0),f.type=b.dtype,f.size=4,f.buffer=b,f.normalized=!1,f.offset=0,f.stride=0;d=qd.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==t.dtype||
4!==f.size||f.buffer!==t||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(d,4,t.dtype,!1,0,0),f.type=t.dtype,f.size=4,f.buffer=t,f.normalized=!1,f.offset=0,f.stride=0;d=xc.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==a.dtype||4!==f.size||f.buffer!==a||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(d,4,a.dtype,!1,0,0),f.type=a.dtype,f.size=4,f.buffer=a,f.normalized=!1,f.offset=0,
f.stride=0;d=Y.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==x.dtype||4!==f.size||f.buffer!==x||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(d,4,x.dtype,!1,0,0),f.type=x.dtype,f.size=4,f.buffer=x,f.normalized=!1,f.offset=0,f.stride=0;d=J.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==z.dtype||4!==f.size||f.buffer!==z||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(d,
4,z.dtype,!1,0,0),f.type=z.dtype,f.size=4,f.buffer=z,f.normalized=!1,f.offset=0,f.stride=0;d=ka.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==fa.dtype||4!==f.size||f.buffer!==fa||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,fa.buffer),l.vertexAttribPointer(d,4,fa.dtype,!1,0,0),f.type=fa.dtype,f.size=4,f.buffer=fa,f.normalized=!1,f.offset=0,f.stride=0;d=Ca.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==M.dtype||4!==f.size||f.buffer!==M||
!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,M.buffer),l.vertexAttribPointer(d,4,M.dtype,!1,0,0),f.type=M.dtype,f.size=4,f.buffer=M,f.normalized=!1,f.offset=0,f.stride=0;d=tb.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==H.dtype||4!==f.size||f.buffer!==H||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(d,4,H.dtype,!1,0,0),f.type=H.dtype,f.size=4,f.buffer=H,f.normalized=!1,f.offset=0,f.stride=0;d=Lc.location;
f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==r.dtype||4!==f.size||f.buffer!==r||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(d,4,r.dtype,!1,0,0),f.type=r.dtype,f.size=4,f.buffer=r,f.normalized=!1,f.offset=0,f.stride=0;d=Wc.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==C.dtype||4!==f.size||f.buffer!==C||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(d,4,C.dtype,!1,
0,0),f.type=C.dtype,f.size=4,f.buffer=C,f.normalized=!1,f.offset=0,f.stride=0;d=E.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==A.dtype||4!==f.size||f.buffer!==A||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(d,4,A.dtype,!1,0,0),f.type=A.dtype,f.size=4,f.buffer=A,f.normalized=!1,f.offset=0,f.stride=0;d=w.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==B.dtype||4!==f.size||f.buffer!==B||!1!==f.normalized||0!==
f.offset||0!==f.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(d,4,B.dtype,!1,0,0),f.type=B.dtype,f.size=4,f.buffer=B,f.normalized=!1,f.offset=0,f.stride=0;d=ia.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);if(f.type!==P.dtype||4!==f.size||f.buffer!==P||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,P.buffer),l.vertexAttribPointer(d,4,P.dtype,!1,0,0),f.type=P.dtype,f.size=4,f.buffer=P,f.normalized=!1,f.offset=0,f.stride=0;d=Na.location;f=F[d];f.buffer||l.enableVertexAttribArray(d);
if(f.type!==R.dtype||4!==f.size||f.buffer!==R||!1!==f.normalized||0!==f.offset||0!==f.stride)l.bindBuffer(34962,R.buffer),l.vertexAttribPointer(d,4,R.dtype,!1,0,0),f.type=R.dtype,f.size=4,f.buffer=R,f.normalized=!1,f.offset=0,f.stride=0;d=c.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(md[0]=d[0],md[1]=d[1],md[2]=d[2],md[3]=d[3],md[4]=d[4],md[5]=d[5],md[6]=d[6],md[7]=d[7],md[8]=d[8],md[9]=d[9],md[10]=d[10],md[11]=d[11],md[12]=d[12],md[13]=d[13],md[14]=d[14],
md[15]=d[15],md));d=c.dim1A;l.uniformMatrix4fv(G.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(cd[0]=d[0],cd[1]=d[1],cd[2]=d[2],cd[3]=d[3],cd[4]=d[4],cd[5]=d[5],cd[6]=d[6],cd[7]=d[7],cd[8]=d[8],cd[9]=d[9],cd[10]=d[10],cd[11]=d[11],cd[12]=d[12],cd[13]=d[13],cd[14]=d[14],cd[15]=d[15],cd));d=c.dim0B;l.uniformMatrix4fv(O.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(pc[0]=d[0],pc[1]=d[1],pc[2]=d[2],pc[3]=d[3],pc[4]=d[4],pc[5]=d[5],pc[6]=d[6],pc[7]=d[7],pc[8]=d[8],pc[9]=d[9],
pc[10]=d[10],pc[11]=d[11],pc[12]=d[12],pc[13]=d[13],pc[14]=d[14],pc[15]=d[15],pc));d=c.dim1B;l.uniformMatrix4fv(Zb.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(pd[0]=d[0],pd[1]=d[1],pd[2]=d[2],pd[3]=d[3],pd[4]=d[4],pd[5]=d[5],pd[6]=d[6],pd[7]=d[7],pd[8]=d[8],pd[9]=d[9],pd[10]=d[10],pd[11]=d[11],pd[12]=d[12],pd[13]=d[13],pd[14]=d[14],pd[15]=d[15],pd));d=c.dim0C;l.uniformMatrix4fv(U.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(fd[0]=d[0],fd[1]=d[1],fd[2]=d[2],fd[3]=d[3],
fd[4]=d[4],fd[5]=d[5],fd[6]=d[6],fd[7]=d[7],fd[8]=d[8],fd[9]=d[9],fd[10]=d[10],fd[11]=d[11],fd[12]=d[12],fd[13]=d[13],fd[14]=d[14],fd[15]=d[15],fd));d=c.dim1C;l.uniformMatrix4fv($a.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Mc[0]=d[0],Mc[1]=d[1],Mc[2]=d[2],Mc[3]=d[3],Mc[4]=d[4],Mc[5]=d[5],Mc[6]=d[6],Mc[7]=d[7],Mc[8]=d[8],Mc[9]=d[9],Mc[10]=d[10],Mc[11]=d[11],Mc[12]=d[12],Mc[13]=d[13],Mc[14]=d[14],Mc[15]=d[15],Mc));d=c.dim0D;l.uniformMatrix4fv(qa.location,!1,Array.isArray(d)||d instanceof
Float32Array?d:(rc[0]=d[0],rc[1]=d[1],rc[2]=d[2],rc[3]=d[3],rc[4]=d[4],rc[5]=d[5],rc[6]=d[6],rc[7]=d[7],rc[8]=d[8],rc[9]=d[9],rc[10]=d[10],rc[11]=d[11],rc[12]=d[12],rc[13]=d[13],rc[14]=d[14],rc[15]=d[15],rc));d=c.dim1D;l.uniformMatrix4fv(Q.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(ab[0]=d[0],ab[1]=d[1],ab[2]=d[2],ab[3]=d[3],ab[4]=d[4],ab[5]=d[5],ab[6]=d[6],ab[7]=d[7],ab[8]=d[8],ab[9]=d[9],ab[10]=d[10],ab[11]=d[11],ab[12]=d[12],ab[13]=d[13],ab[14]=d[14],ab[15]=d[15],ab));d=c.loA;l.uniformMatrix4fv(dc.location,
!1,Array.isArray(d)||d instanceof Float32Array?d:(Jc[0]=d[0],Jc[1]=d[1],Jc[2]=d[2],Jc[3]=d[3],Jc[4]=d[4],Jc[5]=d[5],Jc[6]=d[6],Jc[7]=d[7],Jc[8]=d[8],Jc[9]=d[9],Jc[10]=d[10],Jc[11]=d[11],Jc[12]=d[12],Jc[13]=d[13],Jc[14]=d[14],Jc[15]=d[15],Jc));d=c.hiA;l.uniformMatrix4fv(ja.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Eb[0]=d[0],Eb[1]=d[1],Eb[2]=d[2],Eb[3]=d[3],Eb[4]=d[4],Eb[5]=d[5],Eb[6]=d[6],Eb[7]=d[7],Eb[8]=d[8],Eb[9]=d[9],Eb[10]=d[10],Eb[11]=d[11],Eb[12]=d[12],Eb[13]=d[13],Eb[14]=
d[14],Eb[15]=d[15],Eb));d=c.loB;l.uniformMatrix4fv(Ia.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(qc[0]=d[0],qc[1]=d[1],qc[2]=d[2],qc[3]=d[3],qc[4]=d[4],qc[5]=d[5],qc[6]=d[6],qc[7]=d[7],qc[8]=d[8],qc[9]=d[9],qc[10]=d[10],qc[11]=d[11],qc[12]=d[12],qc[13]=d[13],qc[14]=d[14],qc[15]=d[15],qc));d=c.hiB;l.uniformMatrix4fv(ca.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Ta[0]=d[0],Ta[1]=d[1],Ta[2]=d[2],Ta[3]=d[3],Ta[4]=d[4],Ta[5]=d[5],Ta[6]=d[6],Ta[7]=d[7],Ta[8]=d[8],Ta[9]=d[9],
Ta[10]=d[10],Ta[11]=d[11],Ta[12]=d[12],Ta[13]=d[13],Ta[14]=d[14],Ta[15]=d[15],Ta));d=c.loC;l.uniformMatrix4fv(W.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Kc[0]=d[0],Kc[1]=d[1],Kc[2]=d[2],Kc[3]=d[3],Kc[4]=d[4],Kc[5]=d[5],Kc[6]=d[6],Kc[7]=d[7],Kc[8]=d[8],Kc[9]=d[9],Kc[10]=d[10],Kc[11]=d[11],Kc[12]=d[12],Kc[13]=d[13],Kc[14]=d[14],Kc[15]=d[15],Kc));d=c.hiC;l.uniformMatrix4fv(Ea.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(bc[0]=d[0],bc[1]=d[1],bc[2]=d[2],bc[3]=d[3],bc[4]=
d[4],bc[5]=d[5],bc[6]=d[6],bc[7]=d[7],bc[8]=d[8],bc[9]=d[9],bc[10]=d[10],bc[11]=d[11],bc[12]=d[12],bc[13]=d[13],bc[14]=d[14],bc[15]=d[15],bc));d=c.loD;l.uniformMatrix4fv(sb.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(sc[0]=d[0],sc[1]=d[1],sc[2]=d[2],sc[3]=d[3],sc[4]=d[4],sc[5]=d[5],sc[6]=d[6],sc[7]=d[7],sc[8]=d[8],sc[9]=d[9],sc[10]=d[10],sc[11]=d[11],sc[12]=d[12],sc[13]=d[13],sc[14]=d[14],sc[15]=d[15],sc));d=c.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(d)||d instanceof Float32Array?
d:(Dd[0]=d[0],Dd[1]=d[1],Dd[2]=d[2],Dd[3]=d[3],Dd[4]=d[4],Dd[5]=d[5],Dd[6]=d[6],Dd[7]=d[7],Dd[8]=d[8],Dd[9]=d[9],Dd[10]=d[10],Dd[11]=d[11],Dd[12]=d[12],Dd[13]=d[13],Dd[14]=d[14],Dd[15]=d[15],Dd));d=c.resolution;l.uniform2f(S.location,d[0],d[1]);d=c.viewBoxPos;l.uniform2f(ga.location,d[0],d[1]);d=c.viewBoxSize;l.uniform2f(ra.location,d[0],d[1]);l.uniform1f(ha.location,c.maskHeight);l.uniform1f(v.location,c.drwLayer);d=c.contextColor;l.uniform4f(Z.location,d[0],d[1],d[2],d[3]);(d=c.maskTexture)&&"framebuffer"===
d._reglType&&(d=d.color[0]);d=d._texture;l.uniform1i(ua.location,d.bind());l.uniform1i(ta.location,L.bind());(f=D.elements)?l.bindBuffer(34963,f.buffer.buffer):Hb.currentVAO&&(f=xa.getElements(Hb.currentVAO.elements))&&l.bindBuffer(34963,f.buffer.buffer);h=c.offset;if(c=c.count)f?l.drawElements(1,c,f.type,h<<(f.type-5121>>1)):l.drawArrays(1,h,c),da.dirty=!0,Hb.setVAO(null),u.viewportWidth=g,u.viewportHeight=p,da.profile=k,d.unbind(),L.unbind()},scope:function(l,h,m){var w,v,y,J,F,E,Y,O,K,G,L,U,Q,
W,S,ga,ka,na,Z,ia,ca,xa,ha,ja,ta,va,nc,ab,ra,Ta,Ca,ya,La,Xd,Eb,Hb,Wa,za,Td,Da,bc,Gc,Mc,qa,fd,Xb,Sa,ub,rc,sc,Fa,Rc,Qa,Ba,qd,nd,ua,cd,Bb,cb,ma,pc,qc,vd,Sd,Kc,Jc,Bc,Gb,Ga,tb,mb,yb,od,pd,de,Lc,Rb,md,xc,rd,Yb,Ea,wd,Ve,Kb,Fb,te,Kd,Id,If,Fe,Dd,Wb,tf,$a,Na,jc,$d,Ee,Oa,sb,Cd,se,Fc,Zb,Ia,Wc,jd,dc,wc,Ha,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ye,Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,of,Xe,Qe,Ne,We,Ue,Re,Se,Qd,Vd,Te,pf,hf,bf,ef,ff,gf,mf,jf,nf,Af,Bf,Oe,Ae,kf,lf,Cf,Ff,yf,Df,Ef,
uf,vf,sf,wf,xf,Hf,Jf,Kf,Lf,qf,Qf,Gf,rf,cg,Rf,Sf,pg,cf,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;kd.height=l.viewportHeight;kd.width=l.viewportWidth;kd.x=l.viewportX;kd.y=l.viewportY;w=kd.x|0;v=kd.y|0;y="width"in kd?kd.width|0:u.framebufferWidth-w;J="height"in kd?kd.height|0:u.framebufferHeight-
v;F=u.viewportWidth;u.viewportWidth=y;E=u.viewportHeight;u.viewportHeight=J;Y=Yd[0];Yd[0]=w;O=Yd[1];Yd[1]=v;K=Yd[2];Yd[2]=y;G=Yd[3];Yd[3]=J;L=zb[0];zb[0]=0;U=zb[1];zb[1]=0;Q=zb[2];zb[2]=0;W=zb[3];zb[3]=0;S=ic.blend_enable;ic.blend_enable=!1;ga=me[0];me[0]=32774;ka=me[1];me[1]=32774;na=fe[0];fe[0]=770;Z=fe[1];fe[1]=771;ia=fe[2];fe[2]=1;ca=fe[3];fe[3]=1;xa=ic.cull_enable;ic.cull_enable=!0;ha=ic.cull_face;ic.cull_face=1029;ja=ic.depth_enable;ic.depth_enable=!0;ta=ic.depth_func;ic.depth_func=513;va=ic.depth_mask;
ic.depth_mask=!0;nc=ie[0];ie[0]=0;ab=ie[1];ie[1]=1;ra=ic.dither;ic.dither=!1;Ta=ic.lineWidth;ic.lineWidth=2;sd.height=l.scissorHeight;sd.width=l.scissorWidth;sd.x=l.scissorX;sd.y=l.scissorY;Ca=sd.x|0;ya=sd.y|0;La="width"in sd?sd.width|0:u.framebufferWidth-Ca;Xd="height"in sd?sd.height|0:u.framebufferHeight-ya;Eb=Ze[0];Ze[0]=Ca;Hb=Ze[1];Ze[1]=ya;Wa=Ze[2];Ze[2]=La;za=Ze[3];Ze[3]=Xd;Td=ic.scissor_enable;ic.scissor_enable=!0;Da=da.profile;da.profile=!1;bc=l.offset;Gc=D.offset;D.offset=bc;Mc=l.count;qa=
D.count;D.count=Mc;fd=D.primitive;D.primitive=1;Xb=l.contextColor;Sa=p[24];p[24]=Xb;ub=l.dim0A;rc=p[3];p[3]=ub;sc=l.dim0B;Fa=p[5];p[5]=sc;Rc=l.dim0C;Qa=p[7];p[7]=Rc;Ba=l.dim0D;qd=p[9];p[9]=Ba;nd=l.dim1A;ua=p[4];p[4]=nd;cd=l.dim1B;Bb=p[6];p[6]=cd;cb=l.dim1C;ma=p[8];p[8]=cb;pc=l.dim1D;qc=p[10];p[10]=pc;vd=l.drwLayer;Sd=p[23];p[23]=vd;Kc=l.hiA;Jc=p[12];p[12]=Kc;Bc=l.hiB;Gb=p[14];p[14]=Bc;Ga=l.hiC;tb=p[16];p[16]=Ga;mb=l.hiD;yb=p[18];p[18]=mb;od=l.loA;pd=p[11];p[11]=od;de=l.loB;Lc=p[13];p[13]=de;Rb=l.loC;
md=p[15];p[15]=Rb;xc=l.loD;rd=p[17];p[17]=xc;Yb=l.maskHeight;Ea=p[22];p[22]=Yb;wd=l.maskTexture;Ve=p[25];p[25]=wd;Kb=p[26];p[26]=T;Fb=l.resolution;te=p[19];p[19]=Fb;Kd=l.viewBoxPos;Id=p[20];p[20]=Kd;If=l.viewBoxSize;Fe=p[21];p[21]=If;Dd=d.buffer;d.buffer=R;Wb=d.divisor;d.divisor=0;tf=d.normalized;d.normalized=!1;$a=d.offset;d.offset=0;Na=d.size;d.size=0;jc=d.state;d.state=1;$d=d.stride;d.stride=0;Ee=d.type;d.type=R.dtype;Oa=d.w;d.w=0;sb=d.x;d.x=0;Cd=d.y;d.y=0;se=d.z;d.z=0;Fc=f.buffer;f.buffer=N;Zb=
f.divisor;f.divisor=0;Ia=f.normalized;f.normalized=!1;Wc=f.offset;f.offset=0;jd=f.size;f.size=0;dc=f.state;f.state=1;wc=f.stride;f.stride=0;Ha=f.type;f.type=N.dtype;ye=f.w;f.w=0;ve=f.x;f.x=0;he=f.y;f.y=0;ge=f.z;f.z=0;ee=g.buffer;g.buffer=e;oe=g.divisor;g.divisor=0;be=g.normalized;g.normalized=!1;je=g.offset;g.offset=0;Ac=g.size;g.size=0;Vc=g.state;g.state=1;pe=g.stride;g.stride=0;le=g.type;g.type=e.dtype;Fd=g.w;g.w=0;Md=g.x;g.x=0;Nd=g.y;g.y=0;Od=g.z;g.z=0;ke=n.buffer;n.buffer=b;Ge=n.divisor;n.divisor=
0;xe=n.normalized;n.normalized=!1;ne=n.offset;n.offset=0;Ye=n.size;n.size=0;Pe=n.state;n.state=1;Me=n.stride;n.stride=0;qe=n.type;n.type=b.dtype;Ce=n.w;n.w=0;He=n.x;n.x=0;Ie=n.y;n.y=0;Je=n.z;n.z=0;De=V.buffer;V.buffer=t;Hd=V.divisor;V.divisor=0;Rd=V.normalized;V.normalized=!1;Zd=V.offset;V.offset=0;ce=V.size;V.size=0;Ke=V.state;V.state=1;xd=V.stride;V.stride=0;Pd=V.type;V.type=t.dtype;ze=V.w;V.w=0;Le=V.x;V.x=0;of=V.y;V.y=0;Xe=V.z;V.z=0;Qe=aa.buffer;aa.buffer=a;Ne=aa.divisor;aa.divisor=0;We=aa.normalized;
aa.normalized=!1;Ue=aa.offset;aa.offset=0;Re=aa.size;aa.size=0;Se=aa.state;aa.state=1;Qd=aa.stride;aa.stride=0;Vd=aa.type;aa.type=a.dtype;Te=aa.w;aa.w=0;pf=aa.x;aa.x=0;hf=aa.y;aa.y=0;bf=aa.z;aa.z=0;ef=q.buffer;q.buffer=x;ff=q.divisor;q.divisor=0;gf=q.normalized;q.normalized=!1;mf=q.offset;q.offset=0;jf=q.size;q.size=0;nf=q.state;q.state=1;Af=q.stride;q.stride=0;Bf=q.type;q.type=x.dtype;Oe=q.w;q.w=0;Ae=q.x;q.x=0;kf=q.y;q.y=0;lf=q.z;q.z=0;Cf=oa.buffer;oa.buffer=z;Ff=oa.divisor;oa.divisor=0;yf=oa.normalized;
oa.normalized=!1;Df=oa.offset;oa.offset=0;Ef=oa.size;oa.size=0;uf=oa.state;oa.state=1;vf=oa.stride;oa.stride=0;sf=oa.type;oa.type=z.dtype;wf=oa.w;oa.w=0;xf=oa.x;oa.x=0;Hf=oa.y;oa.y=0;Jf=oa.z;oa.z=0;Kf=I.buffer;I.buffer=fa;Lf=I.divisor;I.divisor=0;qf=I.normalized;I.normalized=!1;Qf=I.offset;I.offset=0;Gf=I.size;I.size=0;rf=I.state;I.state=1;cg=I.stride;I.stride=0;Rf=I.type;I.type=fa.dtype;Sf=I.w;I.w=0;pg=I.x;I.x=0;cf=I.y;I.y=0;$e=I.z;I.z=0;Mf=ea.buffer;ea.buffer=M;Nf=ea.divisor;ea.divisor=0;dg=ea.normalized;
ea.normalized=!1;eg=ea.offset;ea.offset=0;fg=ea.size;ea.size=0;gg=ea.state;ea.state=1;hg=ea.stride;ea.stride=0;Vf=ea.type;ea.type=M.dtype;Tf=ea.w;ea.w=0;Wf=ea.x;ea.x=0;Xf=ea.y;ea.y=0;Yf=ea.z;ea.z=0;ig=c.buffer;c.buffer=H;qg=c.divisor;c.divisor=0;rg=c.normalized;c.normalized=!1;sg=c.offset;c.offset=0;tg=c.size;c.size=0;ug=c.state;c.state=1;vg=c.stride;c.stride=0;wg=c.type;c.type=H.dtype;xg=c.w;c.w=0;yg=c.x;c.x=0;zg=c.y;c.y=0;Ag=c.z;c.z=0;df=k.buffer;k.buffer=r;af=k.divisor;k.divisor=0;Of=k.normalized;
k.normalized=!1;Pf=k.offset;k.offset=0;jg=k.size;k.size=0;kg=k.state;k.state=1;lg=k.stride;k.stride=0;mg=k.type;k.type=r.dtype;ng=k.w;k.w=0;Zf=k.x;k.x=0;Uf=k.y;k.y=0;$f=k.z;k.z=0;ag=ba.buffer;ba.buffer=C;bg=ba.divisor;ba.divisor=0;og=ba.normalized;ba.normalized=!1;Bg=ba.offset;ba.offset=0;Cg=ba.size;ba.size=0;Dg=ba.state;ba.state=1;Eg=ba.stride;ba.stride=0;Fg=ba.type;ba.type=C.dtype;Gg=ba.w;ba.w=0;Hg=ba.x;ba.x=0;Ig=ba.y;ba.y=0;Jg=ba.z;ba.z=0;Kg=la.buffer;la.buffer=A;Lg=la.divisor;la.divisor=0;Mg=
la.normalized;la.normalized=!1;Ng=la.offset;la.offset=0;Og=la.size;la.size=0;Qg=la.state;la.state=1;Rg=la.stride;la.stride=0;Sg=la.type;la.type=A.dtype;Tg=la.w;la.w=0;Ug=la.x;la.x=0;Vg=la.y;la.y=0;Wg=la.z;la.z=0;Xg=Qb.buffer;Qb.buffer=B;Yg=Qb.divisor;Qb.divisor=0;Zg=Qb.normalized;Qb.normalized=!1;$g=Qb.offset;Qb.offset=0;ah=Qb.size;Qb.size=0;bh=Qb.state;Qb.state=1;ch=Qb.stride;Qb.stride=0;dh=Qb.type;Qb.type=B.dtype;eh=Qb.w;Qb.w=0;fh=Qb.x;Qb.x=0;gh=Qb.y;Qb.y=0;hh=Qb.z;Qb.z=0;ih=gb.buffer;gb.buffer=
P;jh=gb.divisor;gb.divisor=0;kh=gb.normalized;gb.normalized=!1;lh=gb.offset;gb.offset=0;mh=gb.size;gb.size=0;nh=gb.state;gb.state=1;oh=gb.stride;gb.stride=0;ph=gb.type;gb.type=P.dtype;qh=gb.w;gb.w=0;rh=gb.x;gb.x=0;sh=gb.y;gb.y=0;th=gb.z;gb.z=0;uh=X.vert;X.vert=2;vh=X.frag;X.frag=1;da.dirty=!0;h(u,l,m);u.viewportWidth=F;u.viewportHeight=E;Yd[0]=Y;Yd[1]=O;Yd[2]=K;Yd[3]=G;zb[0]=L;zb[1]=U;zb[2]=Q;zb[3]=W;ic.blend_enable=S;me[0]=ga;me[1]=ka;fe[0]=na;fe[1]=Z;fe[2]=ia;fe[3]=ca;ic.cull_enable=xa;ic.cull_face=
ha;ic.depth_enable=ja;ic.depth_func=ta;ic.depth_mask=va;ie[0]=nc;ie[1]=ab;ic.dither=ra;ic.lineWidth=Ta;Ze[0]=Eb;Ze[1]=Hb;Ze[2]=Wa;Ze[3]=za;ic.scissor_enable=Td;da.profile=Da;D.offset=Gc;D.count=qa;D.primitive=fd;p[24]=Sa;p[3]=rc;p[5]=Fa;p[7]=Qa;p[9]=qd;p[4]=ua;p[6]=Bb;p[8]=ma;p[10]=qc;p[23]=Sd;p[12]=Jc;p[14]=Gb;p[16]=tb;p[18]=yb;p[11]=pd;p[13]=Lc;p[15]=md;p[17]=rd;p[22]=Ea;p[25]=Ve;p[26]=Kb;p[19]=te;p[20]=Id;p[21]=Fe;d.buffer=Dd;d.divisor=Wb;d.normalized=tf;d.offset=$a;d.size=Na;d.state=jc;d.stride=
$d;d.type=Ee;d.w=Oa;d.x=sb;d.y=Cd;d.z=se;f.buffer=Fc;f.divisor=Zb;f.normalized=Ia;f.offset=Wc;f.size=jd;f.state=dc;f.stride=wc;f.type=Ha;f.w=ye;f.x=ve;f.y=he;f.z=ge;g.buffer=ee;g.divisor=oe;g.normalized=be;g.offset=je;g.size=Ac;g.state=Vc;g.stride=pe;g.type=le;g.w=Fd;g.x=Md;g.y=Nd;g.z=Od;n.buffer=ke;n.divisor=Ge;n.normalized=xe;n.offset=ne;n.size=Ye;n.state=Pe;n.stride=Me;n.type=qe;n.w=Ce;n.x=He;n.y=Ie;n.z=Je;V.buffer=De;V.divisor=Hd;V.normalized=Rd;V.offset=Zd;V.size=ce;V.state=Ke;V.stride=xd;V.type=
Pd;V.w=ze;V.x=Le;V.y=of;V.z=Xe;aa.buffer=Qe;aa.divisor=Ne;aa.normalized=We;aa.offset=Ue;aa.size=Re;aa.state=Se;aa.stride=Qd;aa.type=Vd;aa.w=Te;aa.x=pf;aa.y=hf;aa.z=bf;q.buffer=ef;q.divisor=ff;q.normalized=gf;q.offset=mf;q.size=jf;q.state=nf;q.stride=Af;q.type=Bf;q.w=Oe;q.x=Ae;q.y=kf;q.z=lf;oa.buffer=Cf;oa.divisor=Ff;oa.normalized=yf;oa.offset=Df;oa.size=Ef;oa.state=uf;oa.stride=vf;oa.type=sf;oa.w=wf;oa.x=xf;oa.y=Hf;oa.z=Jf;I.buffer=Kf;I.divisor=Lf;I.normalized=qf;I.offset=Qf;I.size=Gf;I.state=rf;
I.stride=cg;I.type=Rf;I.w=Sf;I.x=pg;I.y=cf;I.z=$e;ea.buffer=Mf;ea.divisor=Nf;ea.normalized=dg;ea.offset=eg;ea.size=fg;ea.state=gg;ea.stride=hg;ea.type=Vf;ea.w=Tf;ea.x=Wf;ea.y=Xf;ea.z=Yf;c.buffer=ig;c.divisor=qg;c.normalized=rg;c.offset=sg;c.size=tg;c.state=ug;c.stride=vg;c.type=wg;c.w=xg;c.x=yg;c.y=zg;c.z=Ag;k.buffer=df;k.divisor=af;k.normalized=Of;k.offset=Pf;k.size=jg;k.state=kg;k.stride=lg;k.type=mg;k.w=ng;k.x=Zf;k.y=Uf;k.z=$f;ba.buffer=ag;ba.divisor=bg;ba.normalized=og;ba.offset=Bg;ba.size=Cg;
ba.state=Dg;ba.stride=Eg;ba.type=Fg;ba.w=Gg;ba.x=Hg;ba.y=Ig;ba.z=Jg;la.buffer=Kg;la.divisor=Lg;la.normalized=Mg;la.offset=Ng;la.size=Og;la.state=Qg;la.stride=Rg;la.type=Sg;la.w=Tg;la.x=Ug;la.y=Vg;la.z=Wg;Qb.buffer=Xg;Qb.divisor=Yg;Qb.normalized=Zg;Qb.offset=$g;Qb.size=ah;Qb.state=bh;Qb.stride=ch;Qb.type=dh;Qb.w=eh;Qb.x=fh;Qb.y=gh;Qb.z=hh;gb.buffer=ih;gb.divisor=jh;gb.normalized=kh;gb.offset=lh;gb.size=mh;gb.state=nh;gb.stride=oh;gb.type=ph;gb.w=qh;gb.x=rh;gb.y=sh;gb.z=th;X.vert=uh;X.frag=vh;da.dirty=
!0}}},$1:function(h,y){var m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,V,aa,q,oa,I,ea,c;m=h.attributes;N=h.current;e=h.framebuffer;b=h.gl;t=h.next;a=h.vao;x=t.blend_color;z=N.blend_color;fa=t.blend_equation;M=N.blend_equation;H=t.blend_func;r=N.blend_func;C=t.colorMask;A=N.colorMask;B=t.depth_range;P=N.depth_range;R=t.polygonOffset_offset;L=N.polygonOffset_offset;T=t.sample_coverage;d=N.sample_coverage;f=t.scissor_box;g=N.scissor_box;n=t.stencil_func;V=N.stencil_func;aa=t.stencil_opBack;q=N.stencil_opBack;
oa=t.stencil_opFront;I=N.stencil_opFront;ea=t.viewport;c=N.viewport;return{poll:function(){var a,h,m,y,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa;N.dirty=!1;h=t.blend_enable;m=t.cull_enable;y=t.depth_enable;gb=t.dither;wc=t.polygonOffset_enable;ma=t.sample_alpha;Na=t.sample_enable;Z=t.scissor_enable;K=t.stencil_enable;O=t.cull_face;U=N.cull_face;qa=t.depth_func;G=N.depth_func;Zb=t.depth_mask;$a=N.depth_mask;Q=t.frontFace;v=N.frontFace;ja=t.lineWidth;ca=N.lineWidth;Ea=t.stencil_mask;Oa=N.stencil_mask;
a=e.next;a!==e.cur&&(a?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null),e.cur=a);h!==N.blend_enable&&(h?b.enable(3042):b.disable(3042),N.blend_enable=h);m!==N.cull_enable&&(m?b.enable(2884):b.disable(2884),N.cull_enable=m);y!==N.depth_enable&&(y?b.enable(2929):b.disable(2929),N.depth_enable=y);gb!==N.dither&&(gb?b.enable(3024):b.disable(3024),N.dither=gb);wc!==N.polygonOffset_enable&&(wc?b.enable(32823):b.disable(32823),N.polygonOffset_enable=wc);ma!==N.sample_alpha&&(ma?b.enable(32926):
b.disable(32926),N.sample_alpha=ma);Na!==N.sample_enable&&(Na?b.enable(32928):b.disable(32928),N.sample_enable=Na);Z!==N.scissor_enable&&(Z?b.enable(3089):b.disable(3089),N.scissor_enable=Z);K!==N.stencil_enable&&(K?b.enable(2960):b.disable(2960),N.stencil_enable=K);if(x[0]!==z[0]||x[1]!==z[1]||x[2]!==z[2]||x[3]!==z[3])b.blendColor(x[0],x[1],x[2],x[3]),z[0]=x[0],z[1]=x[1],z[2]=x[2],z[3]=x[3];if(fa[0]!==M[0]||fa[1]!==M[1])b.blendEquationSeparate(fa[0],fa[1]),M[0]=fa[0],M[1]=fa[1];if(H[0]!==r[0]||H[1]!==
r[1]||H[2]!==r[2]||H[3]!==r[3])b.blendFuncSeparate(H[0],H[1],H[2],H[3]),r[0]=H[0],r[1]=H[1],r[2]=H[2],r[3]=H[3];if(C[0]!==A[0]||C[1]!==A[1]||C[2]!==A[2]||C[3]!==A[3])b.colorMask(C[0],C[1],C[2],C[3]),A[0]=C[0],A[1]=C[1],A[2]=C[2],A[3]=C[3];O!==U&&(b.cullFace(O),N.cull_face=O);qa!==G&&(b.depthFunc(qa),N.depth_func=qa);Zb!==$a&&(b.depthMask(Zb),N.depth_mask=Zb);if(B[0]!==P[0]||B[1]!==P[1])b.depthRange(B[0],B[1]),P[0]=B[0],P[1]=B[1];Q!==v&&(b.frontFace(Q),N.frontFace=Q);ja!==ca&&(b.lineWidth(ja),N.lineWidth=
ja);if(R[0]!==L[0]||R[1]!==L[1])b.polygonOffset(R[0],R[1]),L[0]=R[0],L[1]=R[1];if(T[0]!==d[0]||T[1]!==d[1])b.sampleCoverage(T[0],T[1]),d[0]=T[0],d[1]=T[1];if(f[0]!==g[0]||f[1]!==g[1]||f[2]!==g[2]||f[3]!==g[3])b.scissor(f[0],f[1],f[2],f[3]),g[0]=f[0],g[1]=f[1],g[2]=f[2],g[3]=f[3];if(n[0]!==V[0]||n[1]!==V[1]||n[2]!==V[2])b.stencilFunc(n[0],n[1],n[2]),V[0]=n[0],V[1]=n[1],V[2]=n[2];Ea!==Oa&&(b.stencilMask(Ea),N.stencil_mask=Ea);if(aa[0]!==q[0]||aa[1]!==q[1]||aa[2]!==q[2]||aa[3]!==q[3])b.stencilOpSeparate(aa[0],
aa[1],aa[2],aa[3]),q[0]=aa[0],q[1]=aa[1],q[2]=aa[2],q[3]=aa[3];if(oa[0]!==I[0]||oa[1]!==I[1]||oa[2]!==I[2]||oa[3]!==I[3])b.stencilOpSeparate(oa[0],oa[1],oa[2],oa[3]),I[0]=oa[0],I[1]=oa[1],I[2]=oa[2],I[3]=oa[3];if(ea[0]!==c[0]||ea[1]!==c[1]||ea[2]!==c[2]||ea[3]!==c[3])b.viewport(ea[0],ea[1],ea[2],ea[3]),c[0]=ea[0],c[1]=ea[1],c[2]=ea[2],c[3]=ea[3]},refresh:function(){var k,h,la,Qb,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb,$a;N.dirty=!1;h=t.blend_enable;la=t.cull_enable;Qb=t.depth_enable;gb=t.dither;wc=t.polygonOffset_enable;
ma=t.sample_alpha;Na=t.sample_enable;Z=t.scissor_enable;K=t.stencil_enable;O=t.cull_face;U=t.depth_func;qa=t.depth_mask;G=t.frontFace;Zb=t.lineWidth;$a=t.stencil_mask;(k=e.next)?b.bindFramebuffer(36160,k.framebuffer):b.bindFramebuffer(36160,null);e.cur=k;k=m[0];k.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(0,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(0,
k.divisor);k=m[1];k.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(1,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(1,k.divisor);k=m[2];k.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(2,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(2),b.vertexAttrib4f(2,k.x,k.y,k.z,
k.w),k.buffer=null);y.vertexAttribDivisorANGLE(2,k.divisor);k=m[3];k.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(3,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(3,k.divisor);k=m[4];k.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(4,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(4),
b.vertexAttrib4f(4,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(4,k.divisor);k=m[5];k.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(5,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(5,k.divisor);k=m[6];k.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(6,k.size,k.type,k.normalized,k.stride,
k.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(6,k.divisor);k=m[7];k.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(7,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(7,k.divisor);k=m[8];k.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(8,
k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(8,k.divisor);k=m[9];k.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(9,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(9,k.divisor);k=m[10];k.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,
k.buffer.buffer),b.vertexAttribPointer(10,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(10,k.divisor);k=m[11];k.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(11,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(11,k.divisor);k=m[12];
k.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(12,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(12,k.divisor);k=m[13];k.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(13,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,k.x,k.y,k.z,k.w),k.buffer=
null);y.vertexAttribDivisorANGLE(13,k.divisor);k=m[14];k.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(14,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(14,k.divisor);k=m[15];k.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,k.buffer.buffer),b.vertexAttribPointer(15,k.size,k.type,k.normalized,k.stride,k.offset)):(b.disableVertexAttribArray(15),
b.vertexAttrib4f(15,k.x,k.y,k.z,k.w),k.buffer=null);y.vertexAttribDivisorANGLE(15,k.divisor);a.currentVAO=null;a.setVAO(a.targetVAO);h?b.enable(3042):b.disable(3042);N.blend_enable=h;la?b.enable(2884):b.disable(2884);N.cull_enable=la;Qb?b.enable(2929):b.disable(2929);N.depth_enable=Qb;gb?b.enable(3024):b.disable(3024);N.dither=gb;wc?b.enable(32823):b.disable(32823);N.polygonOffset_enable=wc;ma?b.enable(32926):b.disable(32926);N.sample_alpha=ma;Na?b.enable(32928):b.disable(32928);N.sample_enable=Na;
Z?b.enable(3089):b.disable(3089);N.scissor_enable=Z;K?b.enable(2960):b.disable(2960);N.stencil_enable=K;b.blendColor(x[0],x[1],x[2],x[3]);z[0]=x[0];z[1]=x[1];z[2]=x[2];z[3]=x[3];b.blendEquationSeparate(fa[0],fa[1]);M[0]=fa[0];M[1]=fa[1];b.blendFuncSeparate(H[0],H[1],H[2],H[3]);r[0]=H[0];r[1]=H[1];r[2]=H[2];r[3]=H[3];b.colorMask(C[0],C[1],C[2],C[3]);A[0]=C[0];A[1]=C[1];A[2]=C[2];A[3]=C[3];b.cullFace(O);N.cull_face=O;b.depthFunc(U);N.depth_func=U;b.depthMask(qa);N.depth_mask=qa;b.depthRange(B[0],B[1]);
P[0]=B[0];P[1]=B[1];b.frontFace(G);N.frontFace=G;b.lineWidth(Zb);N.lineWidth=Zb;b.polygonOffset(R[0],R[1]);L[0]=R[0];L[1]=R[1];b.sampleCoverage(T[0],T[1]);d[0]=T[0];d[1]=T[1];b.scissor(f[0],f[1],f[2],f[3]);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];b.stencilFunc(n[0],n[1],n[2]);V[0]=n[0];V[1]=n[1];V[2]=n[2];b.stencilMask($a);N.stencil_mask=$a;b.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]);q[0]=aa[0];q[1]=aa[1];q[2]=aa[2];q[3]=aa[3];b.stencilOpSeparate(oa[0],oa[1],oa[2],oa[3]);I[0]=oa[0];I[1]=oa[1];I[2]=
oa[2];I[3]=oa[3];b.viewport(ea[0],ea[1],ea[2],ea[3]);c[0]=ea[0];c[1]=ea[1];c[2]=ea[2];c[3]=ea[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(h,y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Qb,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb,$a){var Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua,Wb,nc,jc,qd,xc,Y,J,ka,Ca,tb,Lc,Wc,E,w,ia,ta,S,ga,ra,F,u,da,D,xa,na,l,ic,X,p,Hb,zb;Q=h.attributes;
v=h.buffer;ja=h.context;ca=h.current;Ea=h.draw;Oa=h.elements;dc=h.extensions;Ia=h.framebuffer;W=h.gl;sb=h.isBufferArgs;ha=h.next;ua=h.shader;Wb=h.uniforms;nc=h.vao;jc=ha.blend_color;qd=ca.blend_color;xc=ha.blend_equation;Y=ca.blend_equation;J=ha.blend_func;ka=ca.blend_func;Ca=ha.colorMask;tb=ca.colorMask;Lc=ha.depth_range;Wc=ca.depth_range;E=ha.polygonOffset_offset;w=ca.polygonOffset_offset;ia=ha.sample_coverage;ta=ca.sample_coverage;S=ha.scissor_box;ga=ca.scissor_box;ra=ha.stencil_func;F=ca.stencil_func;
u=ha.stencil_opBack;da=ca.stencil_opBack;D=ha.stencil_opFront;xa=ca.stencil_opFront;na=ha.viewport;l=ca.viewport;ic={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={};X.buffer=m;X.divisor=1;p={};p.buffer=N;p.divisor=1;Hb={};Hb.buffer=e;Hb.divisor=1;zb={};zb.buffer=b;zb.divisor=1;return{batch:function(a,b){var d,e,g,f,h,m;d=Ia.next;d!==Ia.cur&&(d?W.bindFramebuffer(36160,d.framebuffer):W.bindFramebuffer(36160,null),Ia.cur=d);if(ca.dirty){var n,t,J,x,
A,B,N,C,R,L,z,P,S,na,V,aa,fa,T,ua,pc,pd,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,pa;n=ha.dither;n!==ca.dither&&(n?W.enable(3024):W.disable(3024),ca.dither=n);t=ha.depth_func;t!==ca.depth_func&&(W.depthFunc(t),ca.depth_func=t);J=Lc[0];x=Lc[1];if(J!==Wc[0]||x!==Wc[1])W.depthRange(J,x),Wc[0]=J,Wc[1]=x;A=ha.depth_mask;A!==ca.depth_mask&&(W.depthMask(A),ca.depth_mask=A);B=Ca[0];N=Ca[1];C=Ca[2];R=Ca[3];if(B!==tb[0]||N!==tb[1]||C!==tb[2]||R!==tb[3])W.colorMask(B,N,C,R),tb[0]=B,tb[1]=N,tb[2]=C,tb[3]=R;L=ha.cull_enable;
L!==ca.cull_enable&&(L?W.enable(2884):W.disable(2884),ca.cull_enable=L);z=ha.cull_face;z!==ca.cull_face&&(W.cullFace(z),ca.cull_face=z);P=ha.frontFace;P!==ca.frontFace&&(W.frontFace(P),ca.frontFace=P);S=ha.lineWidth;S!==ca.lineWidth&&(W.lineWidth(S),ca.lineWidth=S);na=ha.polygonOffset_enable;na!==ca.polygonOffset_enable&&(na?W.enable(32823):W.disable(32823),ca.polygonOffset_enable=na);V=E[0];aa=E[1];if(V!==w[0]||aa!==w[1])W.polygonOffset(V,aa),w[0]=V,w[1]=aa;fa=ha.sample_alpha;fa!==ca.sample_alpha&&
(fa?W.enable(32926):W.disable(32926),ca.sample_alpha=fa);T=ha.sample_enable;T!==ca.sample_enable&&(T?W.enable(32928):W.disable(32928),ca.sample_enable=T);ua=ia[0];pc=ia[1];if(ua!==ta[0]||pc!==ta[1])W.sampleCoverage(ua,pc),ta[0]=ua,ta[1]=pc;pd=ha.stencil_enable;pd!==ca.stencil_enable&&(pd?W.enable(2960):W.disable(2960),ca.stencil_enable=pd);fd=ha.stencil_mask;fd!==ca.stencil_mask&&(W.stencilMask(fd),ca.stencil_mask=fd);Mc=ra[0];rc=ra[1];ab=ra[2];if(Mc!==F[0]||rc!==F[1]||ab!==F[2])W.stencilFunc(Mc,
rc,ab),F[0]=Mc,F[1]=rc,F[2]=ab;Jc=D[0];Eb=D[1];qc=D[2];Ta=D[3];if(Jc!==xa[0]||Eb!==xa[1]||qc!==xa[2]||Ta!==xa[3])W.stencilOpSeparate(Jc,Eb,qc,Ta),xa[0]=Jc,xa[1]=Eb,xa[2]=qc,xa[3]=Ta;Kc=u[0];bc=u[1];sc=u[2];pa=u[3];if(Kc!==da[0]||bc!==da[1]||sc!==da[2]||pa!==da[3])W.stencilOpSeparate(Kc,bc,sc,pa),da[0]=Kc,da[1]=bc,da[2]=sc,da[3]=pa}W.blendColor(0,0,0,0);qd[0]=0;qd[1]=0;qd[2]=0;qd[3]=0;W.enable(3042);ca.blend_enable=!0;W.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;W.blendFuncSeparate(770,
771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;W.disable(2929);ca.depth_enable=!1;W.enable(3089);ca.scissor_enable=!0;if(e=ca.profile)g=performance.now(),y.count+=b;W.useProgram(q.program);f=dc.angle_instanced_arrays;var xc,Bc,Xb,Gc,Rc,La,ub,Wa;nc.setVAO(null);xc=gb.location;Bc=Q[xc];Bc.buffer||W.enableVertexAttribArray(xc);if(5126!==Bc.type||2!==Bc.size||Bc.buffer!==M||!1!==Bc.normalized||0!==Bc.offset||24!==Bc.stride)W.bindBuffer(34962,M.buffer),W.vertexAttribPointer(xc,2,5126,!1,24,0),Bc.type=
5126,Bc.size=2,Bc.buffer=M,Bc.normalized=!1,Bc.offset=0,Bc.stride=24;0!==Bc.divisor&&(f.vertexAttribDivisorANGLE(xc,0),Bc.divisor=0);Xb=ma.location;Gc=Q[Xb];Gc.buffer||W.enableVertexAttribArray(Xb);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==H||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)W.bindBuffer(34962,H.buffer),W.vertexAttribPointer(Xb,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=H,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(f.vertexAttribDivisorANGLE(Xb,0),Gc.divisor=
0);Rc=ba.location;La=Q[Rc];La.buffer||W.enableVertexAttribArray(Rc);if(5126!==La.type||2!==La.size||La.buffer!==r||!1!==La.normalized||16!==La.offset||24!==La.stride)W.bindBuffer(34962,r.buffer),W.vertexAttribPointer(Rc,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=r,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(f.vertexAttribDivisorANGLE(Rc,0),La.divisor=0);(ub=Ea.elements)?W.bindBuffer(34963,ub.buffer.buffer):nc.currentVAO&&(ub=Oa.getElements(nc.currentVAO.elements))&&W.bindBuffer(34963,
ub.buffer.buffer);Wa=Ea.offset;for(h=0;h<b;++h){m=a[h];var va,rd,Bb,Sa,Gb,cb,Yb,Rb,Wb,ac,Sb,jc,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,Jd,id,Yc,Wd,Ld,Ha,re,Ud,Gd,Ed,ed,Fc;va=m.viewport;rd=va.x|0;Bb=va.y|0;Sa="width"in va?va.width|0:ja.framebufferWidth-rd;Gb="height"in
va?va.height|0:ja.framebufferHeight-Bb;cb=ja.viewportWidth;ja.viewportWidth=Sa;Yb=ja.viewportHeight;ja.viewportHeight=Gb;W.viewport(rd,Bb,Sa,Gb);l[0]=rd;l[1]=Bb;l[2]=Sa;l[3]=Gb;Rb=m.viewport;Wb=Rb.x|0;ac=Rb.y|0;Sb="width"in Rb?Rb.width|0:ja.framebufferWidth-Wb;jc="height"in Rb?Rb.height|0:ja.framebufferHeight-ac;W.scissor(Wb,ac,Sb,jc);ga[0]=Wb;ga[1]=ac;ga[2]=Sb;ga[3]=jc;Tb=oa.call(this,ja,m,h);Hb.offset=Tb;Ma=!1;nb=null;vb=0;hb=!1;oc=Pa=0;Ib=1;dd=0;db=5126;jb=mc=Hc=kc=0;sb(Hb)?(Ma=!0,nb=v.createStream(34962,
Hb),db=nb.dtype):(nb=v.getBuffer(Hb))?db=nb.dtype:"constant"in Hb?(Ib=2,"number"===typeof Hb.constant?(Hc=Hb.constant,mc=jb=kc=0):(Hc=0<Hb.constant.length?Hb.constant[0]:0,mc=1<Hb.constant.length?Hb.constant[1]:0,jb=2<Hb.constant.length?Hb.constant[2]:0,kc=3<Hb.constant.length?Hb.constant[3]:0)):(nb=sb(Hb.buffer)?v.createStream(34962,Hb.buffer):v.getBuffer(Hb.buffer),db="type"in Hb?ic[Hb.type]:nb.dtype,hb=!!Hb.normalized,oc=Hb.size|0,Pa=Hb.offset|0,dd=Hb.stride|0,vb=Hb.divisor|0);kb=K.location;sa=
Q[kb];if(1===Ib){sa.buffer||W.enableVertexAttribArray(kb);ob=oc||2;if(sa.type!==db||sa.size!==ob||sa.buffer!==nb||sa.normalized!==hb||sa.offset!==Pa||sa.stride!==dd)W.bindBuffer(34962,nb.buffer),W.vertexAttribPointer(kb,ob,db,hb,dd,Pa),sa.type=db,sa.size=ob,sa.buffer=nb,sa.normalized=hb,sa.offset=Pa,sa.stride=dd;sa.divisor!==vb&&(f.vertexAttribDivisorANGLE(kb,vb),sa.divisor=vb)}else if(sa.buffer&&(W.disableVertexAttribArray(kb),sa.buffer=null),sa.x!==Hc||sa.y!==mc||sa.z!==jb||sa.w!==kc)W.vertexAttrib4f(kb,
Hc,mc,jb,kc),sa.x=Hc,sa.y=mc,sa.z=jb,sa.w=kc;wa=I.call(this,ja,m,h);zb.offset=wa;Ua=!1;bb=null;Aa=0;eb=!1;Cb=Ja=0;Ab=1;Ra=0;yc=5126;ya=Ub=Za=Jb=0;sb(zb)?(Ua=!0,bb=v.createStream(34962,zb),yc=bb.dtype):(bb=v.getBuffer(zb))?yc=bb.dtype:"constant"in zb?(Ab=2,"number"===typeof zb.constant?(Za=zb.constant,Ub=ya=Jb=0):(Za=0<zb.constant.length?zb.constant[0]:0,Ub=1<zb.constant.length?zb.constant[1]:0,ya=2<zb.constant.length?zb.constant[2]:0,Jb=3<zb.constant.length?zb.constant[3]:0)):(bb=sb(zb.buffer)?v.createStream(34962,
zb.buffer):v.getBuffer(zb.buffer),yc="type"in zb?ic[zb.type]:bb.dtype,eb=!!zb.normalized,Cb=zb.size|0,Ja=zb.offset|0,Ra=zb.stride|0,Aa=zb.divisor|0);Be=O.location;Ka=Q[Be];if(1===Ab){Ka.buffer||W.enableVertexAttribArray(Be);Nb=Cb||2;if(Ka.type!==yc||Ka.size!==Nb||Ka.buffer!==bb||Ka.normalized!==eb||Ka.offset!==Ja||Ka.stride!==Ra)W.bindBuffer(34962,bb.buffer),W.vertexAttribPointer(Be,Nb,yc,eb,Ra,Ja),Ka.type=yc,Ka.size=Nb,Ka.buffer=bb,Ka.normalized=eb,Ka.offset=Ja,Ka.stride=Ra;Ka.divisor!==Aa&&(f.vertexAttribDivisorANGLE(Be,
Aa),Ka.divisor=Aa)}else if(Ka.buffer&&(W.disableVertexAttribArray(Be),Ka.buffer=null),Ka.x!==Za||Ka.y!==Ub||Ka.z!==ya||Ka.w!==Jb)W.vertexAttrib4f(Be,Za,Ub,ya,Jb),Ka.x=Za,Ka.y=Ub,Ka.z=ya,Ka.w=Jb;fb=ea.call(this,ja,m,h);p.offset=fb;ib=!1;za=null;ec=0;Da=!1;qb=pb=0;Xa=1;Ya=0;lc=5126;Lb=Va=uc=ad=0;sb(p)?(ib=!0,za=v.createStream(34962,p),lc=za.dtype):(za=v.getBuffer(p))?lc=za.dtype:"constant"in p?(Xa=2,"number"===typeof p.constant?(uc=p.constant,Va=Lb=ad=0):(uc=0<p.constant.length?p.constant[0]:0,Va=1<
p.constant.length?p.constant[1]:0,Lb=2<p.constant.length?p.constant[2]:0,ad=3<p.constant.length?p.constant[3]:0)):(za=sb(p.buffer)?v.createStream(34962,p.buffer):v.getBuffer(p.buffer),lc="type"in p?ic[p.type]:za.dtype,Da=!!p.normalized,qb=p.size|0,pb=p.offset|0,Ya=p.stride|0,ec=p.divisor|0);bd=wc.location;Fa=Q[bd];if(1===Xa){Fa.buffer||W.enableVertexAttribArray(bd);zc=qb||4;if(Fa.type!==lc||Fa.size!==zc||Fa.buffer!==za||Fa.normalized!==Da||Fa.offset!==pb||Fa.stride!==Ya)W.bindBuffer(34962,za.buffer),
W.vertexAttribPointer(bd,zc,lc,Da,Ya,pb),Fa.type=lc,Fa.size=zc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=pb,Fa.stride=Ya;Fa.divisor!==ec&&(f.vertexAttribDivisorANGLE(bd,ec),Fa.divisor=ec)}else if(Fa.buffer&&(W.disableVertexAttribArray(bd),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Lb||Fa.w!==ad)W.vertexAttrib4f(bd,uc,Va,Lb,ad),Fa.x=uc,Fa.y=Va,Fa.z=Lb,Fa.w=ad;Qa=c.call(this,ja,m,h);X.offset=Qa;Ba=!1;lb=null;wb=0;Db=!1;vc=rb=0;xb=1;td=0;tc=5126;ud=gd=Nc=ue=0;sb(X)?(Ba=!0,lb=v.createStream(34962,X),
tc=lb.dtype):(lb=v.getBuffer(X))?tc=lb.dtype:"constant"in X?(xb=2,"number"===typeof X.constant?(Nc=X.constant,gd=ud=ue=0):(Nc=0<X.constant.length?X.constant[0]:0,gd=1<X.constant.length?X.constant[1]:0,ud=2<X.constant.length?X.constant[2]:0,ue=3<X.constant.length?X.constant[3]:0)):(lb=sb(X.buffer)?v.createStream(34962,X.buffer):v.getBuffer(X.buffer),tc="type"in X?ic[X.type]:lb.dtype,Db=!!X.normalized,vc=X.size|0,rb=X.offset|0,td=X.stride|0,wb=X.divisor|0);Vb=Qb.location;cc=Q[Vb];if(1===xb){cc.buffer||
W.enableVertexAttribArray(Vb);Ob=vc||4;if(cc.type!==tc||cc.size!==Ob||cc.buffer!==lb||cc.normalized!==Db||cc.offset!==rb||cc.stride!==td)W.bindBuffer(34962,lb.buffer),W.vertexAttribPointer(Vb,Ob,tc,Db,td,rb),cc.type=tc,cc.size=Ob,cc.buffer=lb,cc.normalized=Db,cc.offset=rb,cc.stride=td;cc.divisor!==wb&&(f.vertexAttribDivisorANGLE(Vb,wb),cc.divisor=wb)}else if(cc.buffer&&(W.disableVertexAttribArray(Vb),cc.buffer=null),cc.x!==Nc||cc.y!==gd||cc.z!==ud||cc.w!==ue)W.vertexAttrib4f(Vb,Nc,gd,ud,ue),cc.x=
Nc,cc.y=gd,cc.z=ud,cc.w=ue;Ga=k.call(this,ja,m,h);$b=Ga[0];yb=Ga[1];Pb=Ga[2];hc=Ga[3];h&&mb===$b&&Mb===yb&&fc===Pb&&Sc===hc||(mb=$b,Mb=yb,fc=Pb,Sc=hc,W.uniform4f($a.location,$b,yb,Pb,hc));Cc=m.lineWidth;h&&Dc===Cc||(Dc=Cc,W.uniform1f(Na.location,Cc));Ec=m.capSize;h&&Oc===Ec||(Oc=Ec,W.uniform1f(la.location,Ec));Zc=m.scale;Tc=Zc[0];Kb=Zc[1];h&&Pc===Tc&&Fb===Kb||(Pc=Tc,Fb=Kb,W.uniform2f(U.location,Tc,Kb));Qc=m.scaleFract;Ic=Qc[0];gc=Qc[1];h&&Uc===Ic&&Xc===gc||(Uc=Ic,Xc=gc,W.uniform2f(qa.location,Ic,
gc));yd=m.translate;Jd=yd[0];Yc=yd[1];h&&id===Jd&&Wd===Yc||(id=Jd,Wd=Yc,W.uniform2f(G.location,Jd,Yc));Ld=m.translateFract;Ha=Ld[0];Ud=Ld[1];h&&re===Ha&&Gd===Ud||(re=Ha,Gd=Ud,W.uniform2f(Zb.location,Ha,Ud));Ed=m.opacity;h&&ed===Ed||(ed=Ed,W.uniform1f(Z.location,Ed));Fc=m.count;0<Fc?ub?f.drawElementsInstancedANGLE(4,36,ub.type,Wa<<(ub.type-5121>>1),Fc):f.drawArraysInstancedANGLE(4,Wa,36,Fc):0>Fc&&(ub?W.drawElements(4,36,ub.type,Wa<<(ub.type-5121>>1)):W.drawArrays(4,Wa,36));ja.viewportWidth=cb;ja.viewportHeight=
Yb;Ma&&v.destroyStream(nb);Ua&&v.destroyStream(bb);ib&&v.destroyStream(za);Ba&&v.destroyStream(lb)}ca.dirty=!0;nc.setVAO(null);e&&(y.cpuTime+=performance.now()-g)},draw:function(b){var c,d,e,g,f,k,h,m,n,q,J,A,B,N,R,I,L,P,S,na,V,aa,ea,T,oa,ua,pc,xc,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,Wb,jc,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,za,ec;c=Ia.next;c!==Ia.cur&&(c?W.bindFramebuffer(36160,
c.framebuffer):W.bindFramebuffer(36160,null),Ia.cur=c);if(ca.dirty){var Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb;Da=ha.dither;Da!==ca.dither&&(Da?W.enable(3024):W.disable(3024),ca.dither=Da);pb=ha.depth_func;pb!==ca.depth_func&&(W.depthFunc(pb),ca.depth_func=pb);qb=Lc[0];Xa=Lc[1];if(qb!==Wc[0]||Xa!==Wc[1])W.depthRange(qb,Xa),Wc[0]=qb,Wc[1]=Xa;Ya=ha.depth_mask;Ya!==ca.depth_mask&&(W.depthMask(Ya),ca.depth_mask=Ya);lc=Ca[0];ad=Ca[1];uc=Ca[2];
Va=Ca[3];if(lc!==tb[0]||ad!==tb[1]||uc!==tb[2]||Va!==tb[3])W.colorMask(lc,ad,uc,Va),tb[0]=lc,tb[1]=ad,tb[2]=uc,tb[3]=Va;Lb=ha.cull_enable;Lb!==ca.cull_enable&&(Lb?W.enable(2884):W.disable(2884),ca.cull_enable=Lb);bd=ha.cull_face;bd!==ca.cull_face&&(W.cullFace(bd),ca.cull_face=bd);Fa=ha.frontFace;Fa!==ca.frontFace&&(W.frontFace(Fa),ca.frontFace=Fa);zc=ha.lineWidth;zc!==ca.lineWidth&&(W.lineWidth(zc),ca.lineWidth=zc);Qa=ha.polygonOffset_enable;Qa!==ca.polygonOffset_enable&&(Qa?W.enable(32823):W.disable(32823),
ca.polygonOffset_enable=Qa);Ba=E[0];lb=E[1];if(Ba!==w[0]||lb!==w[1])W.polygonOffset(Ba,lb),w[0]=Ba,w[1]=lb;wb=ha.sample_alpha;wb!==ca.sample_alpha&&(wb?W.enable(32926):W.disable(32926),ca.sample_alpha=wb);Db=ha.sample_enable;Db!==ca.sample_enable&&(Db?W.enable(32928):W.disable(32928),ca.sample_enable=Db);rb=ia[0];vc=ia[1];if(rb!==ta[0]||vc!==ta[1])W.sampleCoverage(rb,vc),ta[0]=rb,ta[1]=vc;xb=ha.stencil_enable;xb!==ca.stencil_enable&&(xb?W.enable(2960):W.disable(2960),ca.stencil_enable=xb);td=ha.stencil_mask;
td!==ca.stencil_mask&&(W.stencilMask(td),ca.stencil_mask=td);tc=ra[0];ue=ra[1];Nc=ra[2];if(tc!==F[0]||ue!==F[1]||Nc!==F[2])W.stencilFunc(tc,ue,Nc),F[0]=tc,F[1]=ue,F[2]=Nc;gd=D[0];ud=D[1];Vb=D[2];cc=D[3];if(gd!==xa[0]||ud!==xa[1]||Vb!==xa[2]||cc!==xa[3])W.stencilOpSeparate(gd,ud,Vb,cc),xa[0]=gd,xa[1]=ud,xa[2]=Vb,xa[3]=cc;Ob=u[0];Ga=u[1];$b=u[2];mb=u[3];if(Ob!==da[0]||Ga!==da[1]||$b!==da[2]||mb!==da[3])W.stencilOpSeparate(Ob,Ga,$b,mb),da[0]=Ob,da[1]=Ga,da[2]=$b,da[3]=mb}d=b.viewport;e=d.x|0;g=d.y|0;
f="width"in d?d.width|0:ja.framebufferWidth-e;k="height"in d?d.height|0:ja.framebufferHeight-g;h=ja.viewportWidth;ja.viewportWidth=f;m=ja.viewportHeight;ja.viewportHeight=k;W.viewport(e,g,f,k);l[0]=e;l[1]=g;l[2]=f;l[3]=k;W.blendColor(0,0,0,0);qd[0]=0;qd[1]=0;qd[2]=0;qd[3]=0;W.enable(3042);ca.blend_enable=!0;W.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;W.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;W.disable(2929);ca.depth_enable=!1;n=b.viewport;q=n.x|0;J=n.y|
0;A="width"in n?n.width|0:ja.framebufferWidth-q;B="height"in n?n.height|0:ja.framebufferHeight-J;W.scissor(q,J,A,B);ga[0]=q;ga[1]=J;ga[2]=A;ga[3]=B;W.enable(3089);ca.scissor_enable=!0;if(N=ca.profile)R=performance.now(),y.count++;W.useProgram(t.program);I=dc.angle_instanced_arrays;nc.setVAO(null);L=a.call(this,ja,b,0);Hb.offset=L;P=!1;S=null;na=0;V=!1;ea=aa=0;T=1;oa=0;ua=5126;Mc=fd=xc=pc=0;sb(Hb)?(P=!0,S=v.createStream(34962,Hb),ua=S.dtype):(S=v.getBuffer(Hb))?ua=S.dtype:"constant"in Hb?(T=2,"number"===
typeof Hb.constant?(xc=Hb.constant,fd=Mc=pc=0):(xc=0<Hb.constant.length?Hb.constant[0]:0,fd=1<Hb.constant.length?Hb.constant[1]:0,Mc=2<Hb.constant.length?Hb.constant[2]:0,pc=3<Hb.constant.length?Hb.constant[3]:0)):(S=sb(Hb.buffer)?v.createStream(34962,Hb.buffer):v.getBuffer(Hb.buffer),ua="type"in Hb?ic[Hb.type]:S.dtype,V=!!Hb.normalized,ea=Hb.size|0,aa=Hb.offset|0,oa=Hb.stride|0,na=Hb.divisor|0);rc=K.location;ab=Q[rc];if(1===T){ab.buffer||W.enableVertexAttribArray(rc);Jc=ea||2;if(ab.type!==ua||ab.size!==
Jc||ab.buffer!==S||ab.normalized!==V||ab.offset!==aa||ab.stride!==oa)W.bindBuffer(34962,S.buffer),W.vertexAttribPointer(rc,Jc,ua,V,oa,aa),ab.type=ua,ab.size=Jc,ab.buffer=S,ab.normalized=V,ab.offset=aa,ab.stride=oa;ab.divisor!==na&&(I.vertexAttribDivisorANGLE(rc,na),ab.divisor=na)}else if(ab.buffer&&(W.disableVertexAttribArray(rc),ab.buffer=null),ab.x!==xc||ab.y!==fd||ab.z!==Mc||ab.w!==pc)W.vertexAttrib4f(rc,xc,fd,Mc,pc),ab.x=xc,ab.y=fd,ab.z=Mc,ab.w=pc;Eb=x.call(this,ja,b,0);zb.offset=Eb;qc=!1;Ta=
null;Kc=0;bc=!1;Wb=sc=0;jc=1;Bc=0;Xb=5126;ub=La=Rc=Gc=0;sb(zb)?(qc=!0,Ta=v.createStream(34962,zb),Xb=Ta.dtype):(Ta=v.getBuffer(zb))?Xb=Ta.dtype:"constant"in zb?(jc=2,"number"===typeof zb.constant?(Rc=zb.constant,La=ub=Gc=0):(Rc=0<zb.constant.length?zb.constant[0]:0,La=1<zb.constant.length?zb.constant[1]:0,ub=2<zb.constant.length?zb.constant[2]:0,Gc=3<zb.constant.length?zb.constant[3]:0)):(Ta=sb(zb.buffer)?v.createStream(34962,zb.buffer):v.getBuffer(zb.buffer),Xb="type"in zb?ic[zb.type]:Ta.dtype,bc=
!!zb.normalized,Wb=zb.size|0,sc=zb.offset|0,Bc=zb.stride|0,Kc=zb.divisor|0);Wa=O.location;va=Q[Wa];if(1===jc){va.buffer||W.enableVertexAttribArray(Wa);rd=Wb||2;if(va.type!==Xb||va.size!==rd||va.buffer!==Ta||va.normalized!==bc||va.offset!==sc||va.stride!==Bc)W.bindBuffer(34962,Ta.buffer),W.vertexAttribPointer(Wa,rd,Xb,bc,Bc,sc),va.type=Xb,va.size=rd,va.buffer=Ta,va.normalized=bc,va.offset=sc,va.stride=Bc;va.divisor!==Kc&&(I.vertexAttribDivisorANGLE(Wa,Kc),va.divisor=Kc)}else if(va.buffer&&(W.disableVertexAttribArray(Wa),
va.buffer=null),va.x!==Rc||va.y!==La||va.z!==ub||va.w!==Gc)W.vertexAttrib4f(Wa,Rc,La,ub,Gc),va.x=Rc,va.y=La,va.z=ub,va.w=Gc;Bb=z.call(this,ja,b,0);p.offset=Bb;Sa=!1;Gb=null;cb=0;Yb=!1;ae=Rb=0;ac=1;Sb=0;Ad=5126;vb=nb=Ma=Tb=0;sb(p)?(Sa=!0,Gb=v.createStream(34962,p),Ad=Gb.dtype):(Gb=v.getBuffer(p))?Ad=Gb.dtype:"constant"in p?(ac=2,"number"===typeof p.constant?(Ma=p.constant,nb=vb=Tb=0):(Ma=0<p.constant.length?p.constant[0]:0,nb=1<p.constant.length?p.constant[1]:0,vb=2<p.constant.length?p.constant[2]:
0,Tb=3<p.constant.length?p.constant[3]:0)):(Gb=sb(p.buffer)?v.createStream(34962,p.buffer):v.getBuffer(p.buffer),Ad="type"in p?ic[p.type]:Gb.dtype,Yb=!!p.normalized,ae=p.size|0,Rb=p.offset|0,Sb=p.stride|0,cb=p.divisor|0);hb=wc.location;Pa=Q[hb];if(1===ac){Pa.buffer||W.enableVertexAttribArray(hb);oc=ae||4;if(Pa.type!==Ad||Pa.size!==oc||Pa.buffer!==Gb||Pa.normalized!==Yb||Pa.offset!==Rb||Pa.stride!==Sb)W.bindBuffer(34962,Gb.buffer),W.vertexAttribPointer(hb,oc,Ad,Yb,Sb,Rb),Pa.type=Ad,Pa.size=oc,Pa.buffer=
Gb,Pa.normalized=Yb,Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==cb&&(I.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(W.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==nb||Pa.z!==vb||Pa.w!==Tb)W.vertexAttrib4f(hb,Ma,nb,vb,Tb),Pa.x=Ma,Pa.y=nb,Pa.z=vb,Pa.w=Tb;Ib=fa.call(this,ja,b,0);X.offset=Ib;dd=!1;db=null;kc=0;Hc=!1;jb=mc=0;kb=1;sa=0;ob=5126;Aa=bb=Ua=wa=0;sb(X)?(dd=!0,db=v.createStream(34962,X),ob=db.dtype):(db=v.getBuffer(X))?ob=db.dtype:"constant"in X?(kb=2,"number"===
typeof X.constant?(Ua=X.constant,bb=Aa=wa=0):(Ua=0<X.constant.length?X.constant[0]:0,bb=1<X.constant.length?X.constant[1]:0,Aa=2<X.constant.length?X.constant[2]:0,wa=3<X.constant.length?X.constant[3]:0)):(db=sb(X.buffer)?v.createStream(34962,X.buffer):v.getBuffer(X.buffer),ob="type"in X?ic[X.type]:db.dtype,Hc=!!X.normalized,jb=X.size|0,mc=X.offset|0,sa=X.stride|0,kc=X.divisor|0);eb=Qb.location;Ja=Q[eb];if(1===kb){Ja.buffer||W.enableVertexAttribArray(eb);Cb=jb||4;if(Ja.type!==ob||Ja.size!==Cb||Ja.buffer!==
db||Ja.normalized!==Hc||Ja.offset!==mc||Ja.stride!==sa)W.bindBuffer(34962,db.buffer),W.vertexAttribPointer(eb,Cb,ob,Hc,sa,mc),Ja.type=ob,Ja.size=Cb,Ja.buffer=db,Ja.normalized=Hc,Ja.offset=mc,Ja.stride=sa;Ja.divisor!==kc&&(I.vertexAttribDivisorANGLE(eb,kc),Ja.divisor=kc)}else if(Ja.buffer&&(W.disableVertexAttribArray(eb),Ja.buffer=null),Ja.x!==Ua||Ja.y!==bb||Ja.z!==Aa||Ja.w!==wa)W.vertexAttrib4f(eb,Ua,bb,Aa,wa),Ja.x=Ua,Ja.y=bb,Ja.z=Aa,Ja.w=wa;Ab=gb.location;Ra=Q[Ab];Ra.buffer||W.enableVertexAttribArray(Ab);
if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==M||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)W.bindBuffer(34962,M.buffer),W.vertexAttribPointer(Ab,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=M,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(I.vertexAttribDivisorANGLE(Ab,0),Ra.divisor=0);yc=ma.location;Jb=Q[yc];Jb.buffer||W.enableVertexAttribArray(yc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==H||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)W.bindBuffer(34962,H.buffer),W.vertexAttribPointer(yc,
2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=H,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(I.vertexAttribDivisorANGLE(yc,0),Jb.divisor=0);Za=ba.location;Ub=Q[Za];Ub.buffer||W.enableVertexAttribArray(Za);if(5126!==Ub.type||2!==Ub.size||Ub.buffer!==r||!1!==Ub.normalized||16!==Ub.offset||24!==Ub.stride)W.bindBuffer(34962,r.buffer),W.vertexAttribPointer(Za,2,5126,!1,24,16),Ub.type=5126,Ub.size=2,Ub.buffer=r,Ub.normalized=!1,Ub.offset=16,Ub.stride=24;0!==Ub.divisor&&(I.vertexAttribDivisorANGLE(Za,
0),Ub.divisor=0);ya=C.call(this,ja,b,0);W.uniform4f($a.location,ya[0],ya[1],ya[2],ya[3]);W.uniform1f(Na.location,b.lineWidth);W.uniform1f(la.location,b.capSize);Be=b.scale;W.uniform2f(U.location,Be[0],Be[1]);Ka=b.scaleFract;W.uniform2f(qa.location,Ka[0],Ka[1]);Nb=b.translate;W.uniform2f(G.location,Nb[0],Nb[1]);fb=b.translateFract;W.uniform2f(Zb.location,fb[0],fb[1]);W.uniform1f(Z.location,b.opacity);(ib=Ea.elements)?W.bindBuffer(34963,ib.buffer.buffer):nc.currentVAO&&(ib=Oa.getElements(nc.currentVAO.elements))&&
W.bindBuffer(34963,ib.buffer.buffer);za=Ea.offset;ec=b.count;0<ec?ib?I.drawElementsInstancedANGLE(4,36,ib.type,za<<(ib.type-5121>>1),ec):I.drawArraysInstancedANGLE(4,za,36,ec):0>ec&&(ib?W.drawElements(4,36,ib.type,za<<(ib.type-5121>>1)):W.drawArrays(4,za,36));ca.dirty=!0;nc.setVAO(null);ja.viewportWidth=h;ja.viewportHeight=m;N&&(y.cpuTime+=performance.now()-R);P&&v.destroyStream(S);qc&&v.destroyStream(Ta);Sa&&v.destroyStream(Gb);dd&&v.destroyStream(db)},scope:function(a,b,c){var e,k,l,h,m,q,u,w,t,
x,D,F,E,da,Y,N,C,I,O,K,G,z,U,Q,W,ga,ka,Z,ia,xa,fa,ba,ta,nc,ra,ea,Ca,oa,qa,qd,Xb,Gc,Rc,La,ub,Wa,va,ma,Bb,Sa,la,cb,pa,tb,Lc,ac,Sb,$a,Tb,Ma,nb,vb,hb,Pa,Na,Ib,Oa,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,gb,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,Zb,tc,Ia,Nc,Wc,Qb,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,dc,id,Yc,wc,Ld,Ha,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,
Md,Nd,Od,ke,Ge,xe,ne,Ye,Pe,Me,qe,Ce,He,Ie,Je,De,Hd;e=a.viewport;k=e.x|0;l=e.y|0;h="width"in e?e.width|0:ja.framebufferWidth-k;m="height"in e?e.height|0:ja.framebufferHeight-l;q=ja.viewportWidth;ja.viewportWidth=h;u=ja.viewportHeight;ja.viewportHeight=m;w=na[0];na[0]=k;t=na[1];na[1]=l;x=na[2];na[2]=h;D=na[3];na[3]=m;F=jc[0];jc[0]=0;E=jc[1];jc[1]=0;da=jc[2];jc[2]=0;Y=jc[3];jc[3]=0;N=ha.blend_enable;ha.blend_enable=!0;C=xc[0];xc[0]=32774;I=xc[1];xc[1]=32774;O=J[0];J[0]=770;K=J[1];J[1]=771;G=J[2];J[2]=
773;z=J[3];J[3]=1;U=ha.depth_enable;ha.depth_enable=!1;Q=a.viewport;W=Q.x|0;ga=Q.y|0;ka="width"in Q?Q.width|0:ja.framebufferWidth-W;Z="height"in Q?Q.height|0:ja.framebufferHeight-ga;ia=S[0];S[0]=W;xa=S[1];S[1]=ga;fa=S[2];S[2]=ka;ba=S[3];S[3]=Z;ta=ha.scissor_enable;ha.scissor_enable=!0;if(nc=ca.profile)ra=performance.now(),y.count++;ea=Ea.count;Ea.count=36;Ca=a.count;oa=Ea.instances;Ea.instances=Ca;qa=Ea.primitive;Ea.primitive=4;qd=a.capSize;Xb=Wb[5];Wb[5]=qd;Gc=a.lineWidth;Rc=Wb[4];Wb[4]=Gc;La=a.opacity;
ub=Wb[10];Wb[10]=La;Wa=a.range;va=Wb[18];Wb[18]=Wa;ma=a.scale;Bb=Wb[6];Wb[6]=ma;Sa=a.scaleFract;la=Wb[7];Wb[7]=Sa;cb=a.translate;pa=Wb[8];Wb[8]=cb;tb=a.translateFract;Lc=Wb[9];Wb[9]=tb;ac=A.call(this,ja,a,c);Sb=Wb[3];Wb[3]=ac;$a=B.buffer;B.buffer=r;Tb=B.divisor;B.divisor=0;Ma=B.normalized;B.normalized=!1;nb=B.offset;B.offset=16;vb=B.size;B.size=0;hb=B.state;B.state=1;Pa=B.stride;B.stride=24;Na=B.type;B.type=5126;Ib=B.w;B.w=0;Oa=B.x;B.x=0;db=B.y;B.y=0;kc=B.z;B.z=0;Hc=P.call(this,ja,a,c);X.offset=Hc;
mc=!1;jb=null;kb=0;sa=!1;wa=ob=0;Ua=1;bb=0;Aa=5126;Ab=Cb=Ja=eb=0;sb(X)?(mc=!0,jb=v.createStream(34962,X),Aa=jb.dtype):(jb=v.getBuffer(X))?Aa=jb.dtype:"constant"in X?(Ua=2,"number"===typeof X.constant?(Ja=X.constant,Cb=Ab=eb=0):(Ja=0<X.constant.length?X.constant[0]:0,Cb=1<X.constant.length?X.constant[1]:0,Ab=2<X.constant.length?X.constant[2]:0,eb=3<X.constant.length?X.constant[3]:0)):(jb=sb(X.buffer)?v.createStream(34962,X.buffer):v.getBuffer(X.buffer),Aa="type"in X?ic[X.type]:jb.dtype,sa=!!X.normalized,
wa=X.size|0,ob=X.offset|0,bb=X.stride|0,kb=X.divisor|0);Ra=R.buffer;R.buffer=jb;yc=R.divisor;R.divisor=kb;Jb=R.normalized;R.normalized=sa;Za=R.offset;R.offset=ob;Ub=R.size;R.size=wa;ya=R.state;R.state=Ua;gb=R.stride;R.stride=bb;Ka=R.type;R.type=Aa;Nb=R.w;R.w=eb;fb=R.x;R.x=Ja;ib=R.y;R.y=Cb;za=R.z;R.z=Ab;ec=L.buffer;L.buffer=M;Da=L.divisor;L.divisor=0;pb=L.normalized;L.normalized=!1;qb=L.offset;L.offset=0;Xa=L.size;L.size=0;Ya=L.state;L.state=1;lc=L.stride;L.stride=24;ad=L.type;L.type=5126;uc=L.w;L.w=
0;Va=L.x;L.x=0;Lb=L.y;L.y=0;bd=L.z;L.z=0;Fa=T.call(this,ja,a,c);p.offset=Fa;zc=!1;Qa=null;Ba=0;lb=!1;Db=wb=0;rb=1;vc=0;xb=5126;Nc=Ia=tc=Zb=0;sb(p)?(zc=!0,Qa=v.createStream(34962,p),xb=Qa.dtype):(Qa=v.getBuffer(p))?xb=Qa.dtype:"constant"in p?(rb=2,"number"===typeof p.constant?(tc=p.constant,Ia=Nc=Zb=0):(tc=0<p.constant.length?p.constant[0]:0,Ia=1<p.constant.length?p.constant[1]:0,Nc=2<p.constant.length?p.constant[2]:0,Zb=3<p.constant.length?p.constant[3]:0)):(Qa=sb(p.buffer)?v.createStream(34962,p.buffer):
v.getBuffer(p.buffer),xb="type"in p?ic[p.type]:Qa.dtype,lb=!!p.normalized,Db=p.size|0,wb=p.offset|0,vc=p.stride|0,Ba=p.divisor|0);Wc=d.buffer;d.buffer=Qa;Qb=d.divisor;d.divisor=Ba;Vb=d.normalized;d.normalized=lb;cc=d.offset;d.offset=wb;Ob=d.size;d.size=Db;Ga=d.state;d.state=rb;$b=d.stride;d.stride=vc;mb=d.type;d.type=xb;yb=d.w;d.w=Zb;Mb=d.x;d.x=tc;Pb=d.y;d.y=Ia;fc=d.z;d.z=Nc;hc=f.buffer;f.buffer=H;Sc=f.divisor;f.divisor=0;Cc=f.normalized;f.normalized=!1;Dc=f.offset;f.offset=8;Ec=f.size;f.size=0;Oc=
f.state;f.state=1;Zc=f.stride;f.stride=24;Tc=f.type;f.type=5126;Pc=f.w;f.w=0;Kb=f.x;f.x=0;Fb=f.y;f.y=0;Qc=f.z;f.z=0;Ic=g.call(this,ja,a,c);Hb.offset=Ic;Uc=!1;gc=null;Xc=0;yd=!1;id=dc=0;Yc=1;wc=0;Ld=5126;Gd=Ud=re=Ha=0;sb(Hb)?(Uc=!0,gc=v.createStream(34962,Hb),Ld=gc.dtype):(gc=v.getBuffer(Hb))?Ld=gc.dtype:"constant"in Hb?(Yc=2,"number"===typeof Hb.constant?(re=Hb.constant,Ud=Gd=Ha=0):(re=0<Hb.constant.length?Hb.constant[0]:0,Ud=1<Hb.constant.length?Hb.constant[1]:0,Gd=2<Hb.constant.length?Hb.constant[2]:
0,Ha=3<Hb.constant.length?Hb.constant[3]:0)):(gc=sb(Hb.buffer)?v.createStream(34962,Hb.buffer):v.getBuffer(Hb.buffer),Ld="type"in Hb?ic[Hb.type]:gc.dtype,yd=!!Hb.normalized,id=Hb.size|0,dc=Hb.offset|0,wc=Hb.stride|0,Xc=Hb.divisor|0);Ed=n.buffer;n.buffer=gc;ed=n.divisor;n.divisor=Xc;Fc=n.normalized;n.normalized=yd;ld=n.offset;n.offset=dc;hd=n.size;n.size=id;$c=n.state;n.state=Yc;jd=n.stride;n.stride=wc;zd=n.type;n.type=Ld;Bd=n.w;n.w=Ha;we=n.x;n.x=re;ye=n.y;n.y=Ud;ve=n.z;n.z=Gd;he=V.call(this,ja,a,
c);zb.offset=he;ge=!1;ee=null;oe=0;be=!1;Ac=je=0;Vc=1;pe=0;le=5126;Od=Nd=Md=Fd=0;sb(zb)?(ge=!0,ee=v.createStream(34962,zb),le=ee.dtype):(ee=v.getBuffer(zb))?le=ee.dtype:"constant"in zb?(Vc=2,"number"===typeof zb.constant?(Md=zb.constant,Nd=Od=Fd=0):(Md=0<zb.constant.length?zb.constant[0]:0,Nd=1<zb.constant.length?zb.constant[1]:0,Od=2<zb.constant.length?zb.constant[2]:0,Fd=3<zb.constant.length?zb.constant[3]:0)):(ee=sb(zb.buffer)?v.createStream(34962,zb.buffer):v.getBuffer(zb.buffer),le="type"in zb?
ic[zb.type]:ee.dtype,be=!!zb.normalized,Ac=zb.size|0,je=zb.offset|0,pe=zb.stride|0,oe=zb.divisor|0);ke=aa.buffer;aa.buffer=ee;Ge=aa.divisor;aa.divisor=oe;xe=aa.normalized;aa.normalized=be;ne=aa.offset;aa.offset=je;Ye=aa.size;aa.size=Ac;Pe=aa.state;aa.state=Vc;Me=aa.stride;aa.stride=pe;qe=aa.type;aa.type=le;Ce=aa.w;aa.w=Fd;He=aa.x;aa.x=Md;Ie=aa.y;aa.y=Nd;Je=aa.z;aa.z=Od;De=ua.vert;ua.vert=2;Hd=ua.frag;ua.frag=1;ca.dirty=!0;b(ja,a,c);ja.viewportWidth=q;ja.viewportHeight=u;na[0]=w;na[1]=t;na[2]=x;na[3]=
D;jc[0]=F;jc[1]=E;jc[2]=da;jc[3]=Y;ha.blend_enable=N;xc[0]=C;xc[1]=I;J[0]=O;J[1]=K;J[2]=G;J[3]=z;ha.depth_enable=U;S[0]=ia;S[1]=xa;S[2]=fa;S[3]=ba;ha.scissor_enable=ta;nc&&(y.cpuTime+=performance.now()-ra);Ea.count=ea;Ea.instances=oa;Ea.primitive=qa;Wb[5]=Xb;Wb[4]=Rc;Wb[10]=ub;Wb[18]=va;Wb[6]=Bb;Wb[7]=la;Wb[8]=pa;Wb[9]=Lc;Wb[3]=Sb;B.buffer=$a;B.divisor=Tb;B.normalized=Ma;B.offset=nb;B.size=vb;B.state=hb;B.stride=Pa;B.type=Na;B.w=Ib;B.x=Oa;B.y=db;B.z=kc;mc&&v.destroyStream(jb);R.buffer=Ra;R.divisor=
yc;R.normalized=Jb;R.offset=Za;R.size=Ub;R.state=ya;R.stride=gb;R.type=Ka;R.w=Nb;R.x=fb;R.y=ib;R.z=za;L.buffer=ec;L.divisor=Da;L.normalized=pb;L.offset=qb;L.size=Xa;L.state=Ya;L.stride=lc;L.type=ad;L.w=uc;L.x=Va;L.y=Lb;L.z=bd;zc&&v.destroyStream(Qa);d.buffer=Wc;d.divisor=Qb;d.normalized=Vb;d.offset=cc;d.size=Ob;d.state=Ga;d.stride=$b;d.type=mb;d.w=yb;d.x=Mb;d.y=Pb;d.z=fc;f.buffer=hc;f.divisor=Sc;f.normalized=Cc;f.offset=Dc;f.size=Ec;f.state=Oc;f.stride=Zc;f.type=Tc;f.w=Pc;f.x=Kb;f.y=Fb;f.z=Qc;Uc&&
v.destroyStream(gc);n.buffer=Ed;n.divisor=ed;n.normalized=Fc;n.offset=ld;n.size=hd;n.state=$c;n.stride=jd;n.type=zd;n.w=Bd;n.x=we;n.y=ye;n.z=ve;ge&&v.destroyStream(ee);aa.buffer=ke;aa.divisor=Ge;aa.normalized=xe;aa.offset=ne;aa.size=Ye;aa.state=Pe;aa.stride=Me;aa.type=qe;aa.w=Ce;aa.x=He;aa.y=Ie;aa.z=Je;ua.vert=De;ua.frag=Hd;ca.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(h,
y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Qb,gb){var wc,ma,Na,Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua,Wb,nc,jc,qd,xc,Y,J,ka,Ca,tb,Lc,Wc,E,w,ia,ta,S,ga,ra,F,u;wc=h.attributes;ma=h.buffer;Na=h.context;Z=h.current;K=h.draw;O=h.elements;U=h.extensions;qa=h.framebuffer;G=h.gl;Zb=h.isBufferArgs;$a=h.next;Q=h.shader;v=h.uniforms;ja=h.vao;ca=$a.blend_color;Ea=Z.blend_color;Oa=$a.blend_equation;dc=Z.blend_equation;Ia=$a.blend_func;W=Z.blend_func;sb=$a.colorMask;
ha=Z.colorMask;ua=$a.depth_range;Wb=Z.depth_range;nc=$a.polygonOffset_offset;jc=Z.polygonOffset_offset;qd=$a.sample_coverage;xc=Z.sample_coverage;Y=$a.scissor_box;J=Z.scissor_box;ka=$a.stencil_func;Ca=Z.stencil_func;tb=$a.stencil_opBack;Lc=Z.stencil_opBack;Wc=$a.stencil_opFront;E=Z.stencil_opFront;w=$a.viewport;ia=Z.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};S={divisor:1,offset:8,stride:8};ga={divisor:1,offset:8,stride:8};ra={divisor:1,
offset:16,stride:8};F={divisor:1,offset:16,stride:8};u={divisor:1,offset:0,stride:4};return{batch:function(a,h){var m,w,l,t,r,p;m=qa.next;m!==qa.cur&&(m?G.bindFramebuffer(36160,m.framebuffer):G.bindFramebuffer(36160,null),qa.cur=m);if(Z.dirty){var v,x,A,Y,B,N,C,H,z,M,Q,ca,fa,pa,Xd,Ze,Oa,tf,vd,Fe,Sd,Td,de,Yd,od,kd,sd,md,cd,pc,pd,fd;v=$a.dither;v!==Z.dither&&(v?G.enable(3024):G.disable(3024),Z.dither=v);x=$a.depth_func;x!==Z.depth_func&&(G.depthFunc(x),Z.depth_func=x);A=ua[0];Y=ua[1];if(A!==Wb[0]||
Y!==Wb[1])G.depthRange(A,Y),Wb[0]=A,Wb[1]=Y;B=$a.depth_mask;B!==Z.depth_mask&&(G.depthMask(B),Z.depth_mask=B);N=sb[0];C=sb[1];H=sb[2];z=sb[3];if(N!==ha[0]||C!==ha[1]||H!==ha[2]||z!==ha[3])G.colorMask(N,C,H,z),ha[0]=N,ha[1]=C,ha[2]=H,ha[3]=z;M=$a.cull_enable;M!==Z.cull_enable&&(M?G.enable(2884):G.disable(2884),Z.cull_enable=M);Q=$a.cull_face;Q!==Z.cull_face&&(G.cullFace(Q),Z.cull_face=Q);ca=$a.frontFace;ca!==Z.frontFace&&(G.frontFace(ca),Z.frontFace=ca);fa=$a.lineWidth;fa!==Z.lineWidth&&(G.lineWidth(fa),
Z.lineWidth=fa);pa=$a.polygonOffset_enable;pa!==Z.polygonOffset_enable&&(pa?G.enable(32823):G.disable(32823),Z.polygonOffset_enable=pa);Xd=nc[0];Ze=nc[1];if(Xd!==jc[0]||Ze!==jc[1])G.polygonOffset(Xd,Ze),jc[0]=Xd,jc[1]=Ze;Oa=$a.sample_alpha;Oa!==Z.sample_alpha&&(Oa?G.enable(32926):G.disable(32926),Z.sample_alpha=Oa);tf=$a.sample_enable;tf!==Z.sample_enable&&(tf?G.enable(32928):G.disable(32928),Z.sample_enable=tf);vd=qd[0];Fe=qd[1];if(vd!==xc[0]||Fe!==xc[1])G.sampleCoverage(vd,Fe),xc[0]=vd,xc[1]=Fe;
Sd=$a.stencil_mask;Sd!==Z.stencil_mask&&(G.stencilMask(Sd),Z.stencil_mask=Sd);Td=ka[0];de=ka[1];Yd=ka[2];if(Td!==Ca[0]||de!==Ca[1]||Yd!==Ca[2])G.stencilFunc(Td,de,Yd),Ca[0]=Td,Ca[1]=de,Ca[2]=Yd;od=Wc[0];kd=Wc[1];sd=Wc[2];md=Wc[3];if(od!==E[0]||kd!==E[1]||sd!==E[2]||md!==E[3])G.stencilOpSeparate(od,kd,sd,md),E[0]=od,E[1]=kd,E[2]=sd,E[3]=md;cd=tb[0];pc=tb[1];pd=tb[2];fd=tb[3];if(cd!==Lc[0]||pc!==Lc[1]||pd!==Lc[2]||fd!==Lc[3])G.stencilOpSeparate(cd,pc,pd,fd),Lc[0]=cd,Lc[1]=pc,Lc[2]=pd,Lc[3]=fd}G.blendColor(0,
0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;G.enable(3042);Z.blend_enable=!0;G.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;G.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;G.enable(3089);Z.scissor_enable=!0;G.disable(2960);Z.stencil_enable=!1;if(w=Z.profile)l=performance.now(),y.count+=h;G.useProgram(P.program);t=U.angle_instanced_arrays;var Mc,rc,ab,Jc,Eb;ja.setVAO(null);Mc=oa.location;rc=wc[Mc];rc.buffer||G.enableVertexAttribArray(Mc);if(5126!==rc.type||1!==rc.size||
rc.buffer!==e||!1!==rc.normalized||0!==rc.offset||8!==rc.stride)G.bindBuffer(34962,e.buffer),G.vertexAttribPointer(Mc,1,5126,!1,8,0),rc.type=5126,rc.size=1,rc.buffer=e,rc.normalized=!1,rc.offset=0,rc.stride=8;0!==rc.divisor&&(t.vertexAttribDivisorANGLE(Mc,0),rc.divisor=0);ab=I.location;Jc=wc[ab];Jc.buffer||G.enableVertexAttribArray(ab);if(5126!==Jc.type||1!==Jc.size||Jc.buffer!==b||!1!==Jc.normalized||4!==Jc.offset||8!==Jc.stride)G.bindBuffer(34962,b.buffer),G.vertexAttribPointer(ab,1,5126,!1,8,4),
Jc.type=5126,Jc.size=1,Jc.buffer=b,Jc.normalized=!1,Jc.offset=4,Jc.stride=8;0!==Jc.divisor&&(t.vertexAttribDivisorANGLE(ab,0),Jc.divisor=0);(Eb=K.elements)?G.bindBuffer(34963,Eb.buffer.buffer):ja.currentVAO&&(Eb=O.getElements(ja.currentVAO.elements))&&G.bindBuffer(34963,Eb.buffer.buffer);for(r=0;r<h;++r){p=a[r];var qc,Ta,Kc,bc,sc,Dd,wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,Ia,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,
za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,Jd,id,Yc,Ha,Ld,zf,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c;qc=p.viewport;Ta=qc.x|0;Kc=qc.y|0;bc="width"in qc?qc.width|0:Na.framebufferWidth-Ta;sc="height"in qc?qc.height|0:Na.framebufferHeight-Kc;Dd=Na.viewportWidth;Na.viewportWidth=bc;wd=Na.viewportHeight;Na.viewportHeight=sc;G.viewport(Ta,Kc,bc,sc);ia[0]=Ta;ia[1]=Kc;ia[2]=bc;ia[3]=sc;(Bc=R.call(this,
Na,p,r))?G.enable(2929):G.disable(2929);Z.depth_enable=Bc;Xb=p.viewport;Gc=Xb.x|0;Rc=Xb.y|0;La="width"in Xb?Xb.width|0:Na.framebufferWidth-Gc;ub="height"in Xb?Xb.height|0:Na.framebufferHeight-Rc;G.scissor(Gc,Rc,La,ub);J[0]=Gc;J[1]=Rc;J[2]=La;J[3]=ub;S.buffer=p.positionBuffer;Wa=!1;va=null;rd=0;Bb=!1;Gb=Sa=0;cb=1;Yb=0;Rb=5126;Ad=Sb=ac=Ia=0;Zb(S)?(Wa=!0,va=ma.createStream(34962,S),Rb=va.dtype):(va=ma.getBuffer(S))?Rb=va.dtype:"constant"in S?(cb=2,"number"===typeof S.constant?(ac=S.constant,Sb=Ad=Ia=
0):(ac=0<S.constant.length?S.constant[0]:0,Sb=1<S.constant.length?S.constant[1]:0,Ad=2<S.constant.length?S.constant[2]:0,Ia=3<S.constant.length?S.constant[3]:0)):(va=Zb(S.buffer)?ma.createStream(34962,S.buffer):ma.getBuffer(S.buffer),Rb="type"in S?ta[S.type]:va.dtype,Bb=!!S.normalized,Gb=S.size|0,Sa=S.offset|0,Yb=S.stride|0,rd=S.divisor|0);Tb=T.location;Ma=wc[Tb];if(1===cb){Ma.buffer||G.enableVertexAttribArray(Tb);nb=Gb||2;if(Ma.type!==Rb||Ma.size!==nb||Ma.buffer!==va||Ma.normalized!==Bb||Ma.offset!==
Sa||Ma.stride!==Yb)G.bindBuffer(34962,va.buffer),G.vertexAttribPointer(Tb,nb,Rb,Bb,Yb,Sa),Ma.type=Rb,Ma.size=nb,Ma.buffer=va,Ma.normalized=Bb,Ma.offset=Sa,Ma.stride=Yb;Ma.divisor!==rd&&(t.vertexAttribDivisorANGLE(Tb,rd),Ma.divisor=rd)}else if(Ma.buffer&&(G.disableVertexAttribArray(Tb),Ma.buffer=null),Ma.x!==ac||Ma.y!==Sb||Ma.z!==Ad||Ma.w!==Ia)G.vertexAttrib4f(Tb,ac,Sb,Ad,Ia),Ma.x=ac,Ma.y=Sb,Ma.z=Ad,Ma.w=Ia;ra.buffer=p.positionBuffer;vb=!1;hb=null;Pa=0;oc=!1;dd=Ib=0;db=1;kc=0;Hc=5126;sa=kb=jb=mc=0;
Zb(ra)?(vb=!0,hb=ma.createStream(34962,ra),Hc=hb.dtype):(hb=ma.getBuffer(ra))?Hc=hb.dtype:"constant"in ra?(db=2,"number"===typeof ra.constant?(jb=ra.constant,kb=sa=mc=0):(jb=0<ra.constant.length?ra.constant[0]:0,kb=1<ra.constant.length?ra.constant[1]:0,sa=2<ra.constant.length?ra.constant[2]:0,mc=3<ra.constant.length?ra.constant[3]:0)):(hb=Zb(ra.buffer)?ma.createStream(34962,ra.buffer):ma.getBuffer(ra.buffer),Hc="type"in ra?ta[ra.type]:hb.dtype,oc=!!ra.normalized,dd=ra.size|0,Ib=ra.offset|0,kc=ra.stride|
0,Pa=ra.divisor|0);ob=f.location;wa=wc[ob];if(1===db){wa.buffer||G.enableVertexAttribArray(ob);Ua=dd||2;if(wa.type!==Hc||wa.size!==Ua||wa.buffer!==hb||wa.normalized!==oc||wa.offset!==Ib||wa.stride!==kc)G.bindBuffer(34962,hb.buffer),G.vertexAttribPointer(ob,Ua,Hc,oc,kc,Ib),wa.type=Hc,wa.size=Ua,wa.buffer=hb,wa.normalized=oc,wa.offset=Ib,wa.stride=kc;wa.divisor!==Pa&&(t.vertexAttribDivisorANGLE(ob,Pa),wa.divisor=Pa)}else if(wa.buffer&&(G.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==
kb||wa.z!==sa||wa.w!==mc)G.vertexAttrib4f(ob,jb,kb,sa,mc),wa.x=jb,wa.y=kb,wa.z=sa,wa.w=mc;ga.buffer=p.positionFractBuffer;bb=!1;Aa=null;eb=0;Ja=!1;Ab=Cb=0;Ra=1;yc=0;Jb=5126;Be=ya=Ub=Za=0;Zb(ga)?(bb=!0,Aa=ma.createStream(34962,ga),Jb=Aa.dtype):(Aa=ma.getBuffer(ga))?Jb=Aa.dtype:"constant"in ga?(Ra=2,"number"===typeof ga.constant?(Ub=ga.constant,ya=Be=Za=0):(Ub=0<ga.constant.length?ga.constant[0]:0,ya=1<ga.constant.length?ga.constant[1]:0,Be=2<ga.constant.length?ga.constant[2]:0,Za=3<ga.constant.length?
ga.constant[3]:0)):(Aa=Zb(ga.buffer)?ma.createStream(34962,ga.buffer):ma.getBuffer(ga.buffer),Jb="type"in ga?ta[ga.type]:Aa.dtype,Ja=!!ga.normalized,Ab=ga.size|0,Cb=ga.offset|0,yc=ga.stride|0,eb=ga.divisor|0);Ka=d.location;Nb=wc[Ka];if(1===Ra){Nb.buffer||G.enableVertexAttribArray(Ka);fb=Ab||2;if(Nb.type!==Jb||Nb.size!==fb||Nb.buffer!==Aa||Nb.normalized!==Ja||Nb.offset!==Cb||Nb.stride!==yc)G.bindBuffer(34962,Aa.buffer),G.vertexAttribPointer(Ka,fb,Jb,Ja,yc,Cb),Nb.type=Jb,Nb.size=fb,Nb.buffer=Aa,Nb.normalized=
Ja,Nb.offset=Cb,Nb.stride=yc;Nb.divisor!==eb&&(t.vertexAttribDivisorANGLE(Ka,eb),Nb.divisor=eb)}else if(Nb.buffer&&(G.disableVertexAttribArray(Ka),Nb.buffer=null),Nb.x!==Ub||Nb.y!==ya||Nb.z!==Be||Nb.w!==Za)G.vertexAttrib4f(Ka,Ub,ya,Be,Za),Nb.x=Ub,Nb.y=ya,Nb.z=Be,Nb.w=Za;F.buffer=p.positionFractBuffer;ib=!1;za=null;ec=0;Da=!1;qb=pb=0;Xa=1;Ya=0;lc=5126;Lb=Va=uc=ad=0;Zb(F)?(ib=!0,za=ma.createStream(34962,F),lc=za.dtype):(za=ma.getBuffer(F))?lc=za.dtype:"constant"in F?(Xa=2,"number"===typeof F.constant?
(uc=F.constant,Va=Lb=ad=0):(uc=0<F.constant.length?F.constant[0]:0,Va=1<F.constant.length?F.constant[1]:0,Lb=2<F.constant.length?F.constant[2]:0,ad=3<F.constant.length?F.constant[3]:0)):(za=Zb(F.buffer)?ma.createStream(34962,F.buffer):ma.getBuffer(F.buffer),lc="type"in F?ta[F.type]:za.dtype,Da=!!F.normalized,qb=F.size|0,pb=F.offset|0,Ya=F.stride|0,ec=F.divisor|0);bd=g.location;Fa=wc[bd];if(1===Xa){Fa.buffer||G.enableVertexAttribArray(bd);zc=qb||2;if(Fa.type!==lc||Fa.size!==zc||Fa.buffer!==za||Fa.normalized!==
Da||Fa.offset!==pb||Fa.stride!==Ya)G.bindBuffer(34962,za.buffer),G.vertexAttribPointer(bd,zc,lc,Da,Ya,pb),Fa.type=lc,Fa.size=zc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=pb,Fa.stride=Ya;Fa.divisor!==ec&&(t.vertexAttribDivisorANGLE(bd,ec),Fa.divisor=ec)}else if(Fa.buffer&&(G.disableVertexAttribArray(bd),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Lb||Fa.w!==ad)G.vertexAttrib4f(bd,uc,Va,Lb,ad),Fa.x=uc,Fa.y=Va,Fa.z=Lb,Fa.w=ad;u.buffer=p.colorBuffer;Qa=!1;Ba=null;lb=0;wb=!1;rb=Db=0;vc=1;xb=0;td=5126;gd=
Nc=ue=tc=0;Zb(u)?(Qa=!0,Ba=ma.createStream(34962,u),td=Ba.dtype):(Ba=ma.getBuffer(u))?td=Ba.dtype:"constant"in u?(vc=2,"number"===typeof u.constant?(ue=u.constant,Nc=gd=tc=0):(ue=0<u.constant.length?u.constant[0]:0,Nc=1<u.constant.length?u.constant[1]:0,gd=2<u.constant.length?u.constant[2]:0,tc=3<u.constant.length?u.constant[3]:0)):(Ba=Zb(u.buffer)?ma.createStream(34962,u.buffer):ma.getBuffer(u.buffer),td="type"in u?ta[u.type]:Ba.dtype,wb=!!u.normalized,rb=u.size|0,Db=u.offset|0,xb=u.stride|0,lb=
u.divisor|0);ud=n.location;Vb=wc[ud];if(1===vc){Vb.buffer||G.enableVertexAttribArray(ud);cc=rb||4;if(Vb.type!==td||Vb.size!==cc||Vb.buffer!==Ba||Vb.normalized!==wb||Vb.offset!==Db||Vb.stride!==xb)G.bindBuffer(34962,Ba.buffer),G.vertexAttribPointer(ud,cc,td,wb,xb,Db),Vb.type=td,Vb.size=cc,Vb.buffer=Ba,Vb.normalized=wb,Vb.offset=Db,Vb.stride=xb;Vb.divisor!==lb&&(t.vertexAttribDivisorANGLE(ud,lb),Vb.divisor=lb)}else if(Vb.buffer&&(G.disableVertexAttribArray(ud),Vb.buffer=null),Vb.x!==ue||Vb.y!==Nc||
Vb.z!==gd||Vb.w!==tc)G.vertexAttrib4f(ud,ue,Nc,gd,tc),Vb.x=ue,Vb.y=Nc,Vb.z=gd,Vb.w=tc;Ob=p.scale;Ga=Ob[0];mb=Ob[1];r&&$b===Ga&&yb===mb||($b=Ga,yb=mb,G.uniform2f(c.location,Ga,mb));Mb=p.scaleFract;Pb=Mb[0];hc=Mb[1];r&&fc===Pb&&Sc===hc||(fc=Pb,Sc=hc,G.uniform2f(k.location,Pb,hc));Cc=p.translate;Dc=Cc[0];Oc=Cc[1];r&&Ec===Dc&&Zc===Oc||(Ec=Dc,Zc=Oc,G.uniform2f(la.location,Dc,Oc));Tc=p.translateFract;Pc=Tc[0];Fb=Tc[1];r&&Kb===Pc&&Qc===Fb||(Kb=Pc,Qc=Fb,G.uniform2f(Qb.location,Pc,Fb));Ic=p.thickness;r&&Uc===
Ic||(Uc=Ic,G.uniform1f(ba.location,Ic));gc=p.depth;r&&Xc===gc||(Xc=gc,G.uniform1f(q.location,gc));yd=L.call(this,Na,p,r);Jd=yd[0];Yc=yd[1];Ld=yd[2];re=yd[3];r&&id===Jd&&Ha===Yc&&zf===Ld&&Ud===re||(id=Jd,Ha=Yc,zf=Ld,Ud=re,G.uniform4f(gb.location,Jd,Yc,Ld,re));Gd=p.dashLength;r&&Ed===Gd||(Ed=Gd,G.uniform1f(V.location,Gd));ed=p.opacity;r&&Fc===ed||(Fc=ed,G.uniform1f(ea.location,ed));(ld=p.dashTexture)&&"framebuffer"===ld._reglType&&(ld=ld.color[0]);hd=ld._texture;G.uniform1i(aa.location,hd.bind());$c=
p.count;0<$c?Eb?t.drawElementsInstancedANGLE(5,4,Eb.type,0<<(Eb.type-5121>>1),$c):t.drawArraysInstancedANGLE(5,0,4,$c):0>$c&&(Eb?G.drawElements(5,4,Eb.type,0<<(Eb.type-5121>>1)):G.drawArrays(5,0,4));Na.viewportWidth=Dd;Na.viewportHeight=wd;Wa&&ma.destroyStream(va);vb&&ma.destroyStream(hb);bb&&ma.destroyStream(Aa);ib&&ma.destroyStream(za);Qa&&ma.destroyStream(Ba);hd.unbind()}Z.dirty=!0;ja.setVAO(null);w&&(y.cpuTime+=performance.now()-l)},draw:function(a){var h,r,w,l,v,x,p,A,Y,B,C,H,R,z,M,L,Q,P,ca,
fa,pa,Xd,Ze,Oa,Ia,vd,Fe,Sd,Td,de,Yd,od,kd,sd,md,cd,pc,pd,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,Dd,wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,za,ec,Da,pb;h=qa.next;h!==qa.cur&&(h?G.bindFramebuffer(36160,h.framebuffer):G.bindFramebuffer(36160,null),qa.cur=h);if(Z.dirty){var qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb;qb=$a.dither;
qb!==Z.dither&&(qb?G.enable(3024):G.disable(3024),Z.dither=qb);Xa=$a.depth_func;Xa!==Z.depth_func&&(G.depthFunc(Xa),Z.depth_func=Xa);Ya=ua[0];lc=ua[1];if(Ya!==Wb[0]||lc!==Wb[1])G.depthRange(Ya,lc),Wb[0]=Ya,Wb[1]=lc;ad=$a.depth_mask;ad!==Z.depth_mask&&(G.depthMask(ad),Z.depth_mask=ad);uc=sb[0];Va=sb[1];Lb=sb[2];bd=sb[3];if(uc!==ha[0]||Va!==ha[1]||Lb!==ha[2]||bd!==ha[3])G.colorMask(uc,Va,Lb,bd),ha[0]=uc,ha[1]=Va,ha[2]=Lb,ha[3]=bd;Fa=$a.cull_enable;Fa!==Z.cull_enable&&(Fa?G.enable(2884):G.disable(2884),
Z.cull_enable=Fa);zc=$a.cull_face;zc!==Z.cull_face&&(G.cullFace(zc),Z.cull_face=zc);Qa=$a.frontFace;Qa!==Z.frontFace&&(G.frontFace(Qa),Z.frontFace=Qa);Ba=$a.lineWidth;Ba!==Z.lineWidth&&(G.lineWidth(Ba),Z.lineWidth=Ba);lb=$a.polygonOffset_enable;lb!==Z.polygonOffset_enable&&(lb?G.enable(32823):G.disable(32823),Z.polygonOffset_enable=lb);wb=nc[0];Db=nc[1];if(wb!==jc[0]||Db!==jc[1])G.polygonOffset(wb,Db),jc[0]=wb,jc[1]=Db;rb=$a.sample_alpha;rb!==Z.sample_alpha&&(rb?G.enable(32926):G.disable(32926),Z.sample_alpha=
rb);vc=$a.sample_enable;vc!==Z.sample_enable&&(vc?G.enable(32928):G.disable(32928),Z.sample_enable=vc);xb=qd[0];td=qd[1];if(xb!==xc[0]||td!==xc[1])G.sampleCoverage(xb,td),xc[0]=xb,xc[1]=td;tc=$a.stencil_mask;tc!==Z.stencil_mask&&(G.stencilMask(tc),Z.stencil_mask=tc);ue=ka[0];Nc=ka[1];gd=ka[2];if(ue!==Ca[0]||Nc!==Ca[1]||gd!==Ca[2])G.stencilFunc(ue,Nc,gd),Ca[0]=ue,Ca[1]=Nc,Ca[2]=gd;ud=Wc[0];Vb=Wc[1];cc=Wc[2];Ob=Wc[3];if(ud!==E[0]||Vb!==E[1]||cc!==E[2]||Ob!==E[3])G.stencilOpSeparate(ud,Vb,cc,Ob),E[0]=
ud,E[1]=Vb,E[2]=cc,E[3]=Ob;Ga=tb[0];$b=tb[1];mb=tb[2];yb=tb[3];if(Ga!==Lc[0]||$b!==Lc[1]||mb!==Lc[2]||yb!==Lc[3])G.stencilOpSeparate(Ga,$b,mb,yb),Lc[0]=Ga,Lc[1]=$b,Lc[2]=mb,Lc[3]=yb}r=a.viewport;w=r.x|0;l=r.y|0;v="width"in r?r.width|0:Na.framebufferWidth-w;x="height"in r?r.height|0:Na.framebufferHeight-l;p=Na.viewportWidth;Na.viewportWidth=v;A=Na.viewportHeight;Na.viewportHeight=x;G.viewport(w,l,v,x);ia[0]=w;ia[1]=l;ia[2]=v;ia[3]=x;G.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;G.enable(3042);
Z.blend_enable=!0;G.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;G.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;(Y=m.call(this,Na,a,0))?G.enable(2929):G.disable(2929);Z.depth_enable=Y;B=a.viewport;C=B.x|0;H=B.y|0;R="width"in B?B.width|0:Na.framebufferWidth-C;z="height"in B?B.height|0:Na.framebufferHeight-H;G.scissor(C,H,R,z);J[0]=C;J[1]=H;J[2]=R;J[3]=z;G.enable(3089);Z.scissor_enable=!0;G.disable(2960);Z.stencil_enable=!1;if(M=Z.profile)L=performance.now(),y.count++;
G.useProgram(N.program);Q=U.angle_instanced_arrays;ja.setVAO(null);S.buffer=a.positionBuffer;P=!1;ca=null;fa=0;pa=!1;Ze=Xd=0;Oa=1;Ia=0;vd=5126;de=Td=Sd=Fe=0;Zb(S)?(P=!0,ca=ma.createStream(34962,S),vd=ca.dtype):(ca=ma.getBuffer(S))?vd=ca.dtype:"constant"in S?(Oa=2,"number"===typeof S.constant?(Sd=S.constant,Td=de=Fe=0):(Sd=0<S.constant.length?S.constant[0]:0,Td=1<S.constant.length?S.constant[1]:0,de=2<S.constant.length?S.constant[2]:0,Fe=3<S.constant.length?S.constant[3]:0)):(ca=Zb(S.buffer)?ma.createStream(34962,
S.buffer):ma.getBuffer(S.buffer),vd="type"in S?ta[S.type]:ca.dtype,pa=!!S.normalized,Ze=S.size|0,Xd=S.offset|0,Ia=S.stride|0,fa=S.divisor|0);Yd=T.location;od=wc[Yd];if(1===Oa){od.buffer||G.enableVertexAttribArray(Yd);kd=Ze||2;if(od.type!==vd||od.size!==kd||od.buffer!==ca||od.normalized!==pa||od.offset!==Xd||od.stride!==Ia)G.bindBuffer(34962,ca.buffer),G.vertexAttribPointer(Yd,kd,vd,pa,Ia,Xd),od.type=vd,od.size=kd,od.buffer=ca,od.normalized=pa,od.offset=Xd,od.stride=Ia;od.divisor!==fa&&(Q.vertexAttribDivisorANGLE(Yd,
fa),od.divisor=fa)}else if(od.buffer&&(G.disableVertexAttribArray(Yd),od.buffer=null),od.x!==Sd||od.y!==Td||od.z!==de||od.w!==Fe)G.vertexAttrib4f(Yd,Sd,Td,de,Fe),od.x=Sd,od.y=Td,od.z=de,od.w=Fe;ra.buffer=a.positionBuffer;sd=!1;md=null;cd=0;pc=!1;fd=pd=0;Mc=1;rc=0;ab=5126;Ta=qc=Eb=Jc=0;Zb(ra)?(sd=!0,md=ma.createStream(34962,ra),ab=md.dtype):(md=ma.getBuffer(ra))?ab=md.dtype:"constant"in ra?(Mc=2,"number"===typeof ra.constant?(Eb=ra.constant,qc=Ta=Jc=0):(Eb=0<ra.constant.length?ra.constant[0]:0,qc=
1<ra.constant.length?ra.constant[1]:0,Ta=2<ra.constant.length?ra.constant[2]:0,Jc=3<ra.constant.length?ra.constant[3]:0)):(md=Zb(ra.buffer)?ma.createStream(34962,ra.buffer):ma.getBuffer(ra.buffer),ab="type"in ra?ta[ra.type]:md.dtype,pc=!!ra.normalized,fd=ra.size|0,pd=ra.offset|0,rc=ra.stride|0,cd=ra.divisor|0);Kc=f.location;bc=wc[Kc];if(1===Mc){bc.buffer||G.enableVertexAttribArray(Kc);sc=fd||2;if(bc.type!==ab||bc.size!==sc||bc.buffer!==md||bc.normalized!==pc||bc.offset!==pd||bc.stride!==rc)G.bindBuffer(34962,
md.buffer),G.vertexAttribPointer(Kc,sc,ab,pc,rc,pd),bc.type=ab,bc.size=sc,bc.buffer=md,bc.normalized=pc,bc.offset=pd,bc.stride=rc;bc.divisor!==cd&&(Q.vertexAttribDivisorANGLE(Kc,cd),bc.divisor=cd)}else if(bc.buffer&&(G.disableVertexAttribArray(Kc),bc.buffer=null),bc.x!==Eb||bc.y!==qc||bc.z!==Ta||bc.w!==Jc)G.vertexAttrib4f(Kc,Eb,qc,Ta,Jc),bc.x=Eb,bc.y=qc,bc.z=Ta,bc.w=Jc;ga.buffer=a.positionFractBuffer;Dd=!1;wd=null;Bc=0;Xb=!1;Rc=Gc=0;La=1;ub=0;Wa=5126;Sa=Bb=rd=va=0;Zb(ga)?(Dd=!0,wd=ma.createStream(34962,
ga),Wa=wd.dtype):(wd=ma.getBuffer(ga))?Wa=wd.dtype:"constant"in ga?(La=2,"number"===typeof ga.constant?(rd=ga.constant,Bb=Sa=va=0):(rd=0<ga.constant.length?ga.constant[0]:0,Bb=1<ga.constant.length?ga.constant[1]:0,Sa=2<ga.constant.length?ga.constant[2]:0,va=3<ga.constant.length?ga.constant[3]:0)):(wd=Zb(ga.buffer)?ma.createStream(34962,ga.buffer):ma.getBuffer(ga.buffer),Wa="type"in ga?ta[ga.type]:wd.dtype,Xb=!!ga.normalized,Rc=ga.size|0,Gc=ga.offset|0,ub=ga.stride|0,Bc=ga.divisor|0);Gb=d.location;
cb=wc[Gb];if(1===La){cb.buffer||G.enableVertexAttribArray(Gb);Yb=Rc||2;if(cb.type!==Wa||cb.size!==Yb||cb.buffer!==wd||cb.normalized!==Xb||cb.offset!==Gc||cb.stride!==ub)G.bindBuffer(34962,wd.buffer),G.vertexAttribPointer(Gb,Yb,Wa,Xb,ub,Gc),cb.type=Wa,cb.size=Yb,cb.buffer=wd,cb.normalized=Xb,cb.offset=Gc,cb.stride=ub;cb.divisor!==Bc&&(Q.vertexAttribDivisorANGLE(Gb,Bc),cb.divisor=Bc)}else if(cb.buffer&&(G.disableVertexAttribArray(Gb),cb.buffer=null),cb.x!==rd||cb.y!==Bb||cb.z!==Sa||cb.w!==va)G.vertexAttrib4f(Gb,
rd,Bb,Sa,va),cb.x=rd,cb.y=Bb,cb.z=Sa,cb.w=va;F.buffer=a.positionFractBuffer;Rb=!1;ae=null;ac=0;Sb=!1;Tb=Ad=0;Ma=1;nb=0;vb=5126;Ib=oc=Pa=hb=0;Zb(F)?(Rb=!0,ae=ma.createStream(34962,F),vb=ae.dtype):(ae=ma.getBuffer(F))?vb=ae.dtype:"constant"in F?(Ma=2,"number"===typeof F.constant?(Pa=F.constant,oc=Ib=hb=0):(Pa=0<F.constant.length?F.constant[0]:0,oc=1<F.constant.length?F.constant[1]:0,Ib=2<F.constant.length?F.constant[2]:0,hb=3<F.constant.length?F.constant[3]:0)):(ae=Zb(F.buffer)?ma.createStream(34962,
F.buffer):ma.getBuffer(F.buffer),vb="type"in F?ta[F.type]:ae.dtype,Sb=!!F.normalized,Tb=F.size|0,Ad=F.offset|0,nb=F.stride|0,ac=F.divisor|0);dd=g.location;db=wc[dd];if(1===Ma){db.buffer||G.enableVertexAttribArray(dd);kc=Tb||2;if(db.type!==vb||db.size!==kc||db.buffer!==ae||db.normalized!==Sb||db.offset!==Ad||db.stride!==nb)G.bindBuffer(34962,ae.buffer),G.vertexAttribPointer(dd,kc,vb,Sb,nb,Ad),db.type=vb,db.size=kc,db.buffer=ae,db.normalized=Sb,db.offset=Ad,db.stride=nb;db.divisor!==ac&&(Q.vertexAttribDivisorANGLE(dd,
ac),db.divisor=ac)}else if(db.buffer&&(G.disableVertexAttribArray(dd),db.buffer=null),db.x!==Pa||db.y!==oc||db.z!==Ib||db.w!==hb)G.vertexAttrib4f(dd,Pa,oc,Ib,hb),db.x=Pa,db.y=oc,db.z=Ib,db.w=hb;u.buffer=a.colorBuffer;Hc=!1;mc=null;jb=0;kb=!1;ob=sa=0;wa=1;Ua=0;bb=5126;Cb=Ja=eb=Aa=0;Zb(u)?(Hc=!0,mc=ma.createStream(34962,u),bb=mc.dtype):(mc=ma.getBuffer(u))?bb=mc.dtype:"constant"in u?(wa=2,"number"===typeof u.constant?(eb=u.constant,Ja=Cb=Aa=0):(eb=0<u.constant.length?u.constant[0]:0,Ja=1<u.constant.length?
u.constant[1]:0,Cb=2<u.constant.length?u.constant[2]:0,Aa=3<u.constant.length?u.constant[3]:0)):(mc=Zb(u.buffer)?ma.createStream(34962,u.buffer):ma.getBuffer(u.buffer),bb="type"in u?ta[u.type]:mc.dtype,kb=!!u.normalized,ob=u.size|0,sa=u.offset|0,Ua=u.stride|0,jb=u.divisor|0);Ab=n.location;Ra=wc[Ab];if(1===wa){Ra.buffer||G.enableVertexAttribArray(Ab);yc=ob||4;if(Ra.type!==bb||Ra.size!==yc||Ra.buffer!==mc||Ra.normalized!==kb||Ra.offset!==sa||Ra.stride!==Ua)G.bindBuffer(34962,mc.buffer),G.vertexAttribPointer(Ab,
yc,bb,kb,Ua,sa),Ra.type=bb,Ra.size=yc,Ra.buffer=mc,Ra.normalized=kb,Ra.offset=sa,Ra.stride=Ua;Ra.divisor!==jb&&(Q.vertexAttribDivisorANGLE(Ab,jb),Ra.divisor=jb)}else if(Ra.buffer&&(G.disableVertexAttribArray(Ab),Ra.buffer=null),Ra.x!==eb||Ra.y!==Ja||Ra.z!==Cb||Ra.w!==Aa)G.vertexAttrib4f(Ab,eb,Ja,Cb,Aa),Ra.x=eb,Ra.y=Ja,Ra.z=Cb,Ra.w=Aa;Jb=oa.location;Za=wc[Jb];Za.buffer||G.enableVertexAttribArray(Jb);if(5126!==Za.type||1!==Za.size||Za.buffer!==e||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)G.bindBuffer(34962,
e.buffer),G.vertexAttribPointer(Jb,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=e,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(Q.vertexAttribDivisorANGLE(Jb,0),Za.divisor=0);Ub=I.location;ya=wc[Ub];ya.buffer||G.enableVertexAttribArray(Ub);if(5126!==ya.type||1!==ya.size||ya.buffer!==b||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)G.bindBuffer(34962,b.buffer),G.vertexAttribPointer(Ub,1,5126,!1,8,4),ya.type=5126,ya.size=1,ya.buffer=b,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&
(Q.vertexAttribDivisorANGLE(Ub,0),ya.divisor=0);Be=a.scale;G.uniform2f(c.location,Be[0],Be[1]);Ka=a.scaleFract;G.uniform2f(k.location,Ka[0],Ka[1]);Nb=a.translate;G.uniform2f(la.location,Nb[0],Nb[1]);fb=a.translateFract;G.uniform2f(Qb.location,fb[0],fb[1]);G.uniform1f(ba.location,a.thickness);G.uniform1f(q.location,a.depth);ib=t.call(this,Na,a,0);G.uniform4f(gb.location,ib[0],ib[1],ib[2],ib[3]);G.uniform1f(V.location,a.dashLength);G.uniform1f(ea.location,a.opacity);(za=a.dashTexture)&&"framebuffer"===
za._reglType&&(za=za.color[0]);ec=za._texture;G.uniform1i(aa.location,ec.bind());(Da=K.elements)?G.bindBuffer(34963,Da.buffer.buffer):ja.currentVAO&&(Da=O.getElements(ja.currentVAO.elements))&&G.bindBuffer(34963,Da.buffer.buffer);pb=a.count;0<pb?Da?Q.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),pb):Q.drawArraysInstancedANGLE(5,0,4,pb):0>pb&&(Da?G.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):G.drawArrays(5,0,4));Z.dirty=!0;ja.setVAO(null);Na.viewportWidth=p;Na.viewportHeight=A;M&&
(y.cpuTime+=performance.now()-L);P&&ma.destroyStream(ca);sd&&ma.destroyStream(md);Dd&&ma.destroyStream(wd);Rb&&ma.destroyStream(ae);Hc&&ma.destroyStream(mc);ec.unbind()},scope:function(c,d,g){var f,k,h,m,p,n,q,t,J,E,N,I,O,R,L,G,P,U,W,V,ka,aa,ia,ha,ja,ba,nc,ea,Ca,oa,T,ua,qa,qd,la,xc,fd,Mc,rc,ab,tb,Eb,qc,Ta,Kc,bc,sc,Lc,Wb,Bc,Xb,Gc,Rc,La,ub,Wa,va,Ea,Bb,Sa,Gb,cb,Yb,Rb,jc,ac,Sb,sb,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,gb,Ka,Nb,fb,ib,za,ec,Da,pb,qb,
Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,Wc,tc,Qb,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,dc,wc,id,Yc,Ha,Ld,Wd,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ye,Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,of,Xe,Qe,Ne;f=c.viewport;k=f.x|0;h=f.y|0;m="width"in f?f.width|0:Na.framebufferWidth-k;p="height"in f?f.height|0:Na.framebufferHeight-h;n=Na.viewportWidth;Na.viewportWidth=m;q=Na.viewportHeight;
Na.viewportHeight=p;t=w[0];w[0]=k;J=w[1];w[1]=h;E=w[2];w[2]=m;N=w[3];w[3]=p;I=ca[0];ca[0]=0;O=ca[1];ca[1]=0;R=ca[2];ca[2]=0;L=ca[3];ca[3]=0;G=$a.blend_enable;$a.blend_enable=!0;P=Oa[0];Oa[0]=32774;U=Oa[1];Oa[1]=32774;W=Ia[0];Ia[0]=770;V=Ia[1];Ia[1]=771;ka=Ia[2];Ia[2]=773;aa=Ia[3];Ia[3]=1;ia=a.call(this,Na,c,g);ha=$a.depth_enable;$a.depth_enable=ia;ja=c.viewport;ba=ja.x|0;nc=ja.y|0;ea="width"in ja?ja.width|0:Na.framebufferWidth-ba;Ca="height"in ja?ja.height|0:Na.framebufferHeight-nc;oa=Y[0];Y[0]=ba;
T=Y[1];Y[1]=nc;ua=Y[2];Y[2]=ea;qa=Y[3];Y[3]=Ca;qd=$a.scissor_enable;$a.scissor_enable=!0;la=$a.stencil_enable;$a.stencil_enable=!1;if(xc=Z.profile)fd=performance.now(),y.count++;Mc=K.offset;K.offset=0;rc=K.count;K.count=4;ab=c.count;tb=K.instances;K.instances=ab;Eb=K.primitive;K.primitive=5;qc=c.dashLength;Ta=v[23];v[23]=qc;Kc=c.dashTexture;bc=v[24];v[24]=Kc;sc=c.depth;Lc=v[22];v[22]=sc;Wb=c.id;Bc=v[31];v[31]=Wb;Xb=c.miterLimit;Gc=v[32];v[32]=Xb;Rc=x.call(this,Na,c,g);La=v[33];v[33]=Rc;ub=c.opacity;
Wa=v[10];v[10]=ub;va=Na.pixelRatio;Ea=v[34];v[34]=va;Bb=c.scale;Sa=v[6];v[6]=Bb;Gb=c.scaleFract;cb=v[7];v[7]=Gb;Yb=c.thickness;Rb=v[21];v[21]=Yb;jc=c.translate;ac=v[8];v[8]=jc;Sb=c.translateFract;sb=v[9];v[9]=Sb;Tb=z.call(this,Na,c,g);Ma=v[3];v[3]=Tb;S.buffer=c.positionBuffer;nb=!1;vb=null;hb=0;Pa=!1;Ib=oc=0;dd=1;db=0;kc=5126;kb=jb=mc=Hc=0;Zb(S)?(nb=!0,vb=ma.createStream(34962,S),kc=vb.dtype):(vb=ma.getBuffer(S))?kc=vb.dtype:"constant"in S?(dd=2,"number"===typeof S.constant?(mc=S.constant,jb=kb=Hc=
0):(mc=0<S.constant.length?S.constant[0]:0,jb=1<S.constant.length?S.constant[1]:0,kb=2<S.constant.length?S.constant[2]:0,Hc=3<S.constant.length?S.constant[3]:0)):(vb=Zb(S.buffer)?ma.createStream(34962,S.buffer):ma.getBuffer(S.buffer),kc="type"in S?ta[S.type]:vb.dtype,Pa=!!S.normalized,Ib=S.size|0,oc=S.offset|0,db=S.stride|0,hb=S.divisor|0);sa=fa.buffer;fa.buffer=vb;ob=fa.divisor;fa.divisor=hb;wa=fa.normalized;fa.normalized=Pa;Ua=fa.offset;fa.offset=oc;bb=fa.size;fa.size=Ib;Aa=fa.state;fa.state=dd;
eb=fa.stride;fa.stride=db;Ja=fa.type;fa.type=kc;Cb=fa.w;fa.w=Hc;Ab=fa.x;fa.x=mc;Ra=fa.y;fa.y=jb;yc=fa.z;fa.z=kb;ga.buffer=c.positionFractBuffer;Jb=!1;Za=null;Ub=0;ya=!1;Ka=gb=0;Nb=1;fb=0;ib=5126;pb=Da=ec=za=0;Zb(ga)?(Jb=!0,Za=ma.createStream(34962,ga),ib=Za.dtype):(Za=ma.getBuffer(ga))?ib=Za.dtype:"constant"in ga?(Nb=2,"number"===typeof ga.constant?(ec=ga.constant,Da=pb=za=0):(ec=0<ga.constant.length?ga.constant[0]:0,Da=1<ga.constant.length?ga.constant[1]:0,pb=2<ga.constant.length?ga.constant[2]:
0,za=3<ga.constant.length?ga.constant[3]:0)):(Za=Zb(ga.buffer)?ma.createStream(34962,ga.buffer):ma.getBuffer(ga.buffer),ib="type"in ga?ta[ga.type]:Za.dtype,ya=!!ga.normalized,Ka=ga.size|0,gb=ga.offset|0,fb=ga.stride|0,Ub=ga.divisor|0);qb=M.buffer;M.buffer=Za;Xa=M.divisor;M.divisor=Ub;Ya=M.normalized;M.normalized=ya;lc=M.offset;M.offset=gb;ad=M.size;M.size=Ka;uc=M.state;M.state=Nb;Va=M.stride;M.stride=fb;Lb=M.type;M.type=ib;bd=M.w;M.w=za;Fa=M.x;M.x=ec;zc=M.y;M.y=Da;Qa=M.z;M.z=pb;ra.buffer=c.positionBuffer;
Ba=!1;lb=null;wb=0;Db=!1;vc=rb=0;xb=1;Wc=0;tc=5126;ud=gd=Nc=Qb=0;Zb(ra)?(Ba=!0,lb=ma.createStream(34962,ra),tc=lb.dtype):(lb=ma.getBuffer(ra))?tc=lb.dtype:"constant"in ra?(xb=2,"number"===typeof ra.constant?(Nc=ra.constant,gd=ud=Qb=0):(Nc=0<ra.constant.length?ra.constant[0]:0,gd=1<ra.constant.length?ra.constant[1]:0,ud=2<ra.constant.length?ra.constant[2]:0,Qb=3<ra.constant.length?ra.constant[3]:0)):(lb=Zb(ra.buffer)?ma.createStream(34962,ra.buffer):ma.getBuffer(ra.buffer),tc="type"in ra?ta[ra.type]:
lb.dtype,Db=!!ra.normalized,vc=ra.size|0,rb=ra.offset|0,Wc=ra.stride|0,wb=ra.divisor|0);Vb=H.buffer;H.buffer=lb;cc=H.divisor;H.divisor=wb;Ob=H.normalized;H.normalized=Db;Ga=H.offset;H.offset=rb;$b=H.size;H.size=vc;mb=H.state;H.state=xb;yb=H.stride;H.stride=Wc;Mb=H.type;H.type=tc;Pb=H.w;H.w=Qb;fc=H.x;H.x=Nc;hc=H.y;H.y=gd;Sc=H.z;H.z=ud;F.buffer=c.positionFractBuffer;Cc=!1;Dc=null;Ec=0;Oc=!1;Tc=Zc=0;Pc=1;Kb=0;Fb=5126;gc=Uc=Ic=Qc=0;Zb(F)?(Cc=!0,Dc=ma.createStream(34962,F),Fb=Dc.dtype):(Dc=ma.getBuffer(F))?
Fb=Dc.dtype:"constant"in F?(Pc=2,"number"===typeof F.constant?(Ic=F.constant,Uc=gc=Qc=0):(Ic=0<F.constant.length?F.constant[0]:0,Uc=1<F.constant.length?F.constant[1]:0,gc=2<F.constant.length?F.constant[2]:0,Qc=3<F.constant.length?F.constant[3]:0)):(Dc=Zb(F.buffer)?ma.createStream(34962,F.buffer):ma.getBuffer(F.buffer),Fb="type"in F?ta[F.type]:Dc.dtype,Oc=!!F.normalized,Tc=F.size|0,Zc=F.offset|0,Kb=F.stride|0,Ec=F.divisor|0);Xc=r.buffer;r.buffer=Dc;dc=r.divisor;r.divisor=Ec;wc=r.normalized;r.normalized=
Oc;id=r.offset;r.offset=Zc;Yc=r.size;r.size=Tc;Ha=r.state;r.state=Pc;Ld=r.stride;r.stride=Kb;Wd=r.type;r.type=Fb;re=r.w;r.w=Qc;Ud=r.x;r.x=Ic;Gd=r.y;r.y=Uc;Ed=r.z;r.z=gc;u.buffer=c.colorBuffer;ed=!1;Fc=null;ld=0;hd=!1;jd=$c=0;zd=1;Bd=0;we=5126;ge=he=ve=ye=0;Zb(u)?(ed=!0,Fc=ma.createStream(34962,u),we=Fc.dtype):(Fc=ma.getBuffer(u))?we=Fc.dtype:"constant"in u?(zd=2,"number"===typeof u.constant?(ve=u.constant,he=ge=ye=0):(ve=0<u.constant.length?u.constant[0]:0,he=1<u.constant.length?u.constant[1]:0,ge=
2<u.constant.length?u.constant[2]:0,ye=3<u.constant.length?u.constant[3]:0)):(Fc=Zb(u.buffer)?ma.createStream(34962,u.buffer):ma.getBuffer(u.buffer),we="type"in u?ta[u.type]:Fc.dtype,hd=!!u.normalized,jd=u.size|0,$c=u.offset|0,Bd=u.stride|0,ld=u.divisor|0);ee=C.buffer;C.buffer=Fc;oe=C.divisor;C.divisor=ld;be=C.normalized;C.normalized=hd;je=C.offset;C.offset=$c;Ac=C.size;C.size=jd;Vc=C.state;C.state=zd;pe=C.stride;C.stride=Bd;le=C.type;C.type=we;Fd=C.w;C.w=ye;Md=C.x;C.x=ve;Nd=C.y;C.y=he;Od=C.z;C.z=
ge;ke=A.buffer;A.buffer=e;Ge=A.divisor;A.divisor=0;xe=A.normalized;A.normalized=!1;ne=A.offset;A.offset=0;Ye=A.size;A.size=0;Pe=A.state;A.state=1;Me=A.stride;A.stride=8;qe=A.type;A.type=5126;Ce=A.w;A.w=0;He=A.x;A.x=0;Ie=A.y;A.y=0;Je=A.z;A.z=0;De=B.buffer;B.buffer=b;Hd=B.divisor;B.divisor=0;Rd=B.normalized;B.normalized=!1;Zd=B.offset;B.offset=4;ce=B.size;B.size=0;Ke=B.state;B.state=1;xd=B.stride;B.stride=8;Pd=B.type;B.type=5126;ze=B.w;B.w=0;Le=B.x;B.x=0;of=B.y;B.y=0;Xe=B.z;B.z=0;Qe=Q.vert;Q.vert=20;
Ne=Q.frag;Q.frag=19;Z.dirty=!0;d(Na,c,g);Na.viewportWidth=n;Na.viewportHeight=q;w[0]=t;w[1]=J;w[2]=E;w[3]=N;ca[0]=I;ca[1]=O;ca[2]=R;ca[3]=L;$a.blend_enable=G;Oa[0]=P;Oa[1]=U;Ia[0]=W;Ia[1]=V;Ia[2]=ka;Ia[3]=aa;$a.depth_enable=ha;Y[0]=oa;Y[1]=T;Y[2]=ua;Y[3]=qa;$a.scissor_enable=qd;$a.stencil_enable=la;xc&&(y.cpuTime+=performance.now()-fd);K.offset=Mc;K.count=rc;K.instances=tb;K.primitive=Eb;v[23]=Ta;v[24]=bc;v[22]=Lc;v[31]=Bc;v[32]=Gc;v[33]=La;v[10]=Wa;v[34]=Ea;v[6]=Sa;v[7]=cb;v[21]=Rb;v[8]=ac;v[9]=
sb;v[3]=Ma;nb&&ma.destroyStream(vb);fa.buffer=sa;fa.divisor=ob;fa.normalized=wa;fa.offset=Ua;fa.size=bb;fa.state=Aa;fa.stride=eb;fa.type=Ja;fa.w=Cb;fa.x=Ab;fa.y=Ra;fa.z=yc;Jb&&ma.destroyStream(Za);M.buffer=qb;M.divisor=Xa;M.normalized=Ya;M.offset=lc;M.size=ad;M.state=uc;M.stride=Va;M.type=Lb;M.w=bd;M.x=Fa;M.y=zc;M.z=Qa;Ba&&ma.destroyStream(lb);H.buffer=Vb;H.divisor=cc;H.normalized=Ob;H.offset=Ga;H.size=$b;H.state=mb;H.stride=yb;H.type=Mb;H.w=Pb;H.x=fc;H.y=hc;H.z=Sc;Cc&&ma.destroyStream(Dc);r.buffer=
Xc;r.divisor=dc;r.normalized=wc;r.offset=id;r.size=Yc;r.state=Ha;r.stride=Ld;r.type=Wd;r.w=re;r.x=Ud;r.y=Gd;r.z=Ed;ed&&ma.destroyStream(Fc);C.buffer=ee;C.divisor=oe;C.normalized=be;C.offset=je;C.size=Ac;C.state=Vc;C.stride=pe;C.type=le;C.w=Fd;C.x=Md;C.y=Nd;C.z=Od;A.buffer=ke;A.divisor=Ge;A.normalized=xe;A.offset=ne;A.size=Ye;A.state=Pe;A.stride=Me;A.type=qe;A.w=Ce;A.x=He;A.y=Ie;A.z=Je;B.buffer=De;B.divisor=Hd;B.normalized=Rd;B.offset=Zd;B.size=ce;B.state=Ke;B.stride=xd;B.type=Pd;B.w=ze;B.x=Le;B.y=
of;B.z=Xe;Q.vert=Qe;Q.frag=Ne;Z.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(h,y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Qb,gb,wc,ma,Na,Z){var K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua,Wb,nc,jc,qd,xc,Y,J,ka,Ca,tb,Lc,Wc,E,w,ia,ta,S,ga,ra,F,u,da,D,xa,na,l;K=h.attributes;O=h.buffer;U=h.context;qa=h.current;G=h.draw;Zb=h.elements;
$a=h.extensions;Q=h.framebuffer;v=h.gl;ja=h.isBufferArgs;ca=h.next;Ea=h.shader;Oa=h.uniforms;dc=h.vao;Ia=ca.blend_color;W=qa.blend_color;sb=ca.blend_equation;ha=qa.blend_equation;ua=ca.blend_func;Wb=qa.blend_func;nc=ca.colorMask;jc=qa.colorMask;qd=ca.depth_range;xc=qa.depth_range;Y=ca.polygonOffset_offset;J=qa.polygonOffset_offset;ka=ca.sample_coverage;Ca=qa.sample_coverage;tb=ca.scissor_box;Lc=qa.scissor_box;Wc=ca.stencil_func;E=qa.stencil_func;w=ca.stencil_opBack;ia=qa.stencil_opBack;ta=ca.stencil_opFront;
S=qa.stencil_opFront;ga=ca.viewport;ra=qa.viewport;F={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};u={divisor:1,offset:0,stride:4};da={divisor:1,offset:8,stride:8};D={divisor:1,offset:4,stride:4};xa={divisor:1,offset:16,stride:8};na={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(a,h){var m,r,t,x,B,A;m=Q.next;m!==Q.cur&&(m?v.bindFramebuffer(36160,m.framebuffer):v.bindFramebuffer(36160,null),Q.cur=m);if(qa.dirty){var N,
C,H,R,z,M,P,ga,fa,ua,pa,tb,Ea,Oa,Ia,Sd,Td,de,sb,od,kd,sd,md,cd,pc,pd,fd,Mc,rc,ab;N=ca.dither;N!==qa.dither&&(N?v.enable(3024):v.disable(3024),qa.dither=N);C=ca.depth_func;C!==qa.depth_func&&(v.depthFunc(C),qa.depth_func=C);H=qd[0];R=qd[1];if(H!==xc[0]||R!==xc[1])v.depthRange(H,R),xc[0]=H,xc[1]=R;z=ca.depth_mask;z!==qa.depth_mask&&(v.depthMask(z),qa.depth_mask=z);M=nc[0];P=nc[1];ga=nc[2];fa=nc[3];if(M!==jc[0]||P!==jc[1]||ga!==jc[2]||fa!==jc[3])v.colorMask(M,P,ga,fa),jc[0]=M,jc[1]=P,jc[2]=ga,jc[3]=
fa;ua=ca.frontFace;ua!==qa.frontFace&&(v.frontFace(ua),qa.frontFace=ua);pa=ca.lineWidth;pa!==qa.lineWidth&&(v.lineWidth(pa),qa.lineWidth=pa);tb=ca.polygonOffset_enable;tb!==qa.polygonOffset_enable&&(tb?v.enable(32823):v.disable(32823),qa.polygonOffset_enable=tb);Ea=Y[0];Oa=Y[1];if(Ea!==J[0]||Oa!==J[1])v.polygonOffset(Ea,Oa),J[0]=Ea,J[1]=Oa;Ia=ca.sample_alpha;Ia!==qa.sample_alpha&&(Ia?v.enable(32926):v.disable(32926),qa.sample_alpha=Ia);Sd=ca.sample_enable;Sd!==qa.sample_enable&&(Sd?v.enable(32928):
v.disable(32928),qa.sample_enable=Sd);Td=ka[0];de=ka[1];if(Td!==Ca[0]||de!==Ca[1])v.sampleCoverage(Td,de),Ca[0]=Td,Ca[1]=de;sb=ca.stencil_mask;sb!==qa.stencil_mask&&(v.stencilMask(sb),qa.stencil_mask=sb);od=Wc[0];kd=Wc[1];sd=Wc[2];if(od!==E[0]||kd!==E[1]||sd!==E[2])v.stencilFunc(od,kd,sd),E[0]=od,E[1]=kd,E[2]=sd;md=ta[0];cd=ta[1];pc=ta[2];pd=ta[3];if(md!==S[0]||cd!==S[1]||pc!==S[2]||pd!==S[3])v.stencilOpSeparate(md,cd,pc,pd),S[0]=md,S[1]=cd,S[2]=pc,S[3]=pd;fd=w[0];Mc=w[1];rc=w[2];ab=w[3];if(fd!==
ia[0]||Mc!==ia[1]||rc!==ia[2]||ab!==ia[3])v.stencilOpSeparate(fd,Mc,rc,ab),ia[0]=fd,ia[1]=Mc,ia[2]=rc,ia[3]=ab}v.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;v.enable(3042);qa.blend_enable=!0;v.blendEquationSeparate(32774,32774);ha[0]=32774;ha[1]=32774;v.blendFuncSeparate(770,771,773,1);Wb[0]=770;Wb[1]=771;Wb[2]=773;Wb[3]=1;v.enable(2884);qa.cull_enable=!0;v.cullFace(1029);qa.cull_face=1029;v.enable(3089);qa.scissor_enable=!0;v.disable(2960);qa.stencil_enable=!1;if(r=qa.profile)t=performance.now(),
y.count+=h;v.useProgram(L.program);x=$a.angle_instanced_arrays;var Jc,Eb,qc,Ta,Kc;dc.setVAO(null);Jc=ea.location;Eb=K[Jc];Eb.buffer||v.enableVertexAttribArray(Jc);if(5126!==Eb.type||1!==Eb.size||Eb.buffer!==e||!1!==Eb.normalized||0!==Eb.offset||8!==Eb.stride)v.bindBuffer(34962,e.buffer),v.vertexAttribPointer(Jc,1,5126,!1,8,0),Eb.type=5126,Eb.size=1,Eb.buffer=e,Eb.normalized=!1,Eb.offset=0,Eb.stride=8;0!==Eb.divisor&&(x.vertexAttribDivisorANGLE(Jc,0),Eb.divisor=0);qc=c.location;Ta=K[qc];Ta.buffer||
v.enableVertexAttribArray(qc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==b||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)v.bindBuffer(34962,b.buffer),v.vertexAttribPointer(qc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=b,Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(x.vertexAttribDivisorANGLE(qc,0),Ta.divisor=0);(Kc=G.elements)?v.bindBuffer(34963,Kc.buffer.buffer):dc.currentVAO&&(Kc=Zb.getElements(dc.currentVAO.elements))&&v.bindBuffer(34963,Kc.buffer.buffer);for(B=0;B<h;++B){A=
a[B];var bc,sc,Dd,wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,Ha,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,Jd,id,Yc,Pg,Ld,zf,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac;bc=A.viewport;sc=bc.x|0;Dd=bc.y|0;wd="width"in bc?bc.width|0:U.framebufferWidth-
sc;Bc="height"in bc?bc.height|0:U.framebufferHeight-Dd;Xb=U.viewportWidth;U.viewportWidth=wd;Gc=U.viewportHeight;U.viewportHeight=Bc;v.viewport(sc,Dd,wd,Bc);ra[0]=sc;ra[1]=Dd;ra[2]=wd;ra[3]=Bc;(Rc=T.call(this,U,A,B))?v.enable(2929):v.disable(2929);qa.depth_enable=Rc;La=A.viewport;ub=La.x|0;Wa=La.y|0;va="width"in La?La.width|0:U.framebufferWidth-ub;rd="height"in La?La.height|0:U.framebufferHeight-Wa;v.scissor(ub,Wa,va,rd);Lc[0]=ub;Lc[1]=Wa;Lc[2]=va;Lc[3]=rd;da.buffer=A.positionBuffer;Bb=!1;Sa=null;
Gb=0;cb=!1;Rb=Yb=0;ae=1;ac=0;Sb=5126;nb=Ma=Tb=Ad=0;ja(da)?(Bb=!0,Sa=O.createStream(34962,da),Sb=Sa.dtype):(Sa=O.getBuffer(da))?Sb=Sa.dtype:"constant"in da?(ae=2,"number"===typeof da.constant?(Tb=da.constant,Ma=nb=Ad=0):(Tb=0<da.constant.length?da.constant[0]:0,Ma=1<da.constant.length?da.constant[1]:0,nb=2<da.constant.length?da.constant[2]:0,Ad=3<da.constant.length?da.constant[3]:0)):(Sa=ja(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),Sb="type"in da?F[da.type]:Sa.dtype,cb=!!da.normalized,
Rb=da.size|0,Yb=da.offset|0,ac=da.stride|0,Gb=da.divisor|0);vb=n.location;hb=K[vb];if(1===ae){hb.buffer||v.enableVertexAttribArray(vb);Pa=Rb||2;if(hb.type!==Sb||hb.size!==Pa||hb.buffer!==Sa||hb.normalized!==cb||hb.offset!==Yb||hb.stride!==ac)v.bindBuffer(34962,Sa.buffer),v.vertexAttribPointer(vb,Pa,Sb,cb,ac,Yb),hb.type=Sb,hb.size=Pa,hb.buffer=Sa,hb.normalized=cb,hb.offset=Yb,hb.stride=ac;hb.divisor!==Gb&&(x.vertexAttribDivisorANGLE(vb,Gb),hb.divisor=Gb)}else if(hb.buffer&&(v.disableVertexAttribArray(vb),
hb.buffer=null),hb.x!==Tb||hb.y!==Ma||hb.z!==nb||hb.w!==Ad)v.vertexAttrib4f(vb,Tb,Ma,nb,Ad),hb.x=Tb,hb.y=Ma,hb.z=nb,hb.w=Ad;xa.buffer=A.positionBuffer;oc=!1;Ib=null;dd=0;db=!1;Hc=kc=0;mc=1;jb=0;kb=5126;Ua=wa=ob=sa=0;ja(xa)?(oc=!0,Ib=O.createStream(34962,xa),kb=Ib.dtype):(Ib=O.getBuffer(xa))?kb=Ib.dtype:"constant"in xa?(mc=2,"number"===typeof xa.constant?(ob=xa.constant,wa=Ua=sa=0):(ob=0<xa.constant.length?xa.constant[0]:0,wa=1<xa.constant.length?xa.constant[1]:0,Ua=2<xa.constant.length?xa.constant[2]:
0,sa=3<xa.constant.length?xa.constant[3]:0)):(Ib=ja(xa.buffer)?O.createStream(34962,xa.buffer):O.getBuffer(xa.buffer),kb="type"in xa?F[xa.type]:Ib.dtype,db=!!xa.normalized,Hc=xa.size|0,kc=xa.offset|0,jb=xa.stride|0,dd=xa.divisor|0);bb=aa.location;Aa=K[bb];if(1===mc){Aa.buffer||v.enableVertexAttribArray(bb);eb=Hc||2;if(Aa.type!==kb||Aa.size!==eb||Aa.buffer!==Ib||Aa.normalized!==db||Aa.offset!==kc||Aa.stride!==jb)v.bindBuffer(34962,Ib.buffer),v.vertexAttribPointer(bb,eb,kb,db,jb,kc),Aa.type=kb,Aa.size=
eb,Aa.buffer=Ib,Aa.normalized=db,Aa.offset=kc,Aa.stride=jb;Aa.divisor!==dd&&(x.vertexAttribDivisorANGLE(bb,dd),Aa.divisor=dd)}else if(Aa.buffer&&(v.disableVertexAttribArray(bb),Aa.buffer=null),Aa.x!==ob||Aa.y!==wa||Aa.z!==Ua||Aa.w!==sa)v.vertexAttrib4f(bb,ob,wa,Ua,sa),Aa.x=ob,Aa.y=wa,Aa.z=Ua,Aa.w=sa;na.buffer=A.positionBuffer;Ja=!1;Cb=null;Ab=0;Ra=!1;Jb=yc=0;Za=1;Ub=0;ya=5126;fb=Nb=Ka=Be=0;ja(na)?(Ja=!0,Cb=O.createStream(34962,na),ya=Cb.dtype):(Cb=O.getBuffer(na))?ya=Cb.dtype:"constant"in na?(Za=
2,"number"===typeof na.constant?(Ka=na.constant,Nb=fb=Be=0):(Ka=0<na.constant.length?na.constant[0]:0,Nb=1<na.constant.length?na.constant[1]:0,fb=2<na.constant.length?na.constant[2]:0,Be=3<na.constant.length?na.constant[3]:0)):(Cb=ja(na.buffer)?O.createStream(34962,na.buffer):O.getBuffer(na.buffer),ya="type"in na?F[na.type]:Cb.dtype,Ra=!!na.normalized,Jb=na.size|0,yc=na.offset|0,Ub=na.stride|0,Ab=na.divisor|0);ib=la.location;za=K[ib];if(1===Za){za.buffer||v.enableVertexAttribArray(ib);ec=Jb||2;if(za.type!==
ya||za.size!==ec||za.buffer!==Cb||za.normalized!==Ra||za.offset!==yc||za.stride!==Ub)v.bindBuffer(34962,Cb.buffer),v.vertexAttribPointer(ib,ec,ya,Ra,Ub,yc),za.type=ya,za.size=ec,za.buffer=Cb,za.normalized=Ra,za.offset=yc,za.stride=Ub;za.divisor!==Ab&&(x.vertexAttribDivisorANGLE(ib,Ab),za.divisor=Ab)}else if(za.buffer&&(v.disableVertexAttribArray(ib),za.buffer=null),za.x!==Ka||za.y!==Nb||za.z!==fb||za.w!==Be)v.vertexAttrib4f(ib,Ka,Nb,fb,Be),za.x=Ka,za.y=Nb,za.z=fb,za.w=Be;l.buffer=A.positionBuffer;
Da=!1;pb=null;qb=0;Xa=!1;lc=Ya=0;ad=1;uc=0;Va=5126;zc=Fa=bd=Lb=0;ja(l)?(Da=!0,pb=O.createStream(34962,l),Va=pb.dtype):(pb=O.getBuffer(l))?Va=pb.dtype:"constant"in l?(ad=2,"number"===typeof l.constant?(bd=l.constant,Fa=zc=Lb=0):(bd=0<l.constant.length?l.constant[0]:0,Fa=1<l.constant.length?l.constant[1]:0,zc=2<l.constant.length?l.constant[2]:0,Lb=3<l.constant.length?l.constant[3]:0)):(pb=ja(l.buffer)?O.createStream(34962,l.buffer):O.getBuffer(l.buffer),Va="type"in l?F[l.type]:pb.dtype,Xa=!!l.normalized,
lc=l.size|0,Ya=l.offset|0,uc=l.stride|0,qb=l.divisor|0);Qa=gb.location;Ba=K[Qa];if(1===ad){Ba.buffer||v.enableVertexAttribArray(Qa);lb=lc||2;if(Ba.type!==Va||Ba.size!==lb||Ba.buffer!==pb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==uc)v.bindBuffer(34962,pb.buffer),v.vertexAttribPointer(Qa,lb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=lb,Ba.buffer=pb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==qb&&(x.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(v.disableVertexAttribArray(Qa),
Ba.buffer=null),Ba.x!==bd||Ba.y!==Fa||Ba.z!==zc||Ba.w!==Lb)v.vertexAttrib4f(Qa,bd,Fa,zc,Lb),Ba.x=bd,Ba.y=Fa,Ba.z=zc,Ba.w=Lb;u.buffer=A.colorBuffer;wb=!1;Db=null;rb=0;vc=!1;td=xb=0;tc=1;Ha=0;Nc=5126;cc=Vb=ud=gd=0;ja(u)?(wb=!0,Db=O.createStream(34962,u),Nc=Db.dtype):(Db=O.getBuffer(u))?Nc=Db.dtype:"constant"in u?(tc=2,"number"===typeof u.constant?(ud=u.constant,Vb=cc=gd=0):(ud=0<u.constant.length?u.constant[0]:0,Vb=1<u.constant.length?u.constant[1]:0,cc=2<u.constant.length?u.constant[2]:0,gd=3<u.constant.length?
u.constant[3]:0)):(Db=ja(u.buffer)?O.createStream(34962,u.buffer):O.getBuffer(u.buffer),Nc="type"in u?F[u.type]:Db.dtype,vc=!!u.normalized,td=u.size|0,xb=u.offset|0,Ha=u.stride|0,rb=u.divisor|0);Ob=g.location;Ga=K[Ob];if(1===tc){Ga.buffer||v.enableVertexAttribArray(Ob);$b=td||4;if(Ga.type!==Nc||Ga.size!==$b||Ga.buffer!==Db||Ga.normalized!==vc||Ga.offset!==xb||Ga.stride!==Ha)v.bindBuffer(34962,Db.buffer),v.vertexAttribPointer(Ob,$b,Nc,vc,Ha,xb),Ga.type=Nc,Ga.size=$b,Ga.buffer=Db,Ga.normalized=vc,Ga.offset=
xb,Ga.stride=Ha;Ga.divisor!==rb&&(x.vertexAttribDivisorANGLE(Ob,rb),Ga.divisor=rb)}else if(Ga.buffer&&(v.disableVertexAttribArray(Ob),Ga.buffer=null),Ga.x!==ud||Ga.y!==Vb||Ga.z!==cc||Ga.w!==gd)v.vertexAttrib4f(Ob,ud,Vb,cc,gd),Ga.x=ud,Ga.y=Vb,Ga.z=cc,Ga.w=gd;D.buffer=A.colorBuffer;mb=!1;yb=null;Mb=0;Pb=!1;hc=fc=0;Sc=1;Cc=0;Dc=5126;Tc=Zc=Oc=Ec=0;ja(D)?(mb=!0,yb=O.createStream(34962,D),Dc=yb.dtype):(yb=O.getBuffer(D))?Dc=yb.dtype:"constant"in D?(Sc=2,"number"===typeof D.constant?(Oc=D.constant,Zc=Tc=
Ec=0):(Oc=0<D.constant.length?D.constant[0]:0,Zc=1<D.constant.length?D.constant[1]:0,Tc=2<D.constant.length?D.constant[2]:0,Ec=3<D.constant.length?D.constant[3]:0)):(yb=ja(D.buffer)?O.createStream(34962,D.buffer):O.getBuffer(D.buffer),Dc="type"in D?F[D.type]:yb.dtype,Pb=!!D.normalized,hc=D.size|0,fc=D.offset|0,Cc=D.stride|0,Mb=D.divisor|0);Pc=V.location;Kb=K[Pc];if(1===Sc){Kb.buffer||v.enableVertexAttribArray(Pc);Fb=hc||4;if(Kb.type!==Dc||Kb.size!==Fb||Kb.buffer!==yb||Kb.normalized!==Pb||Kb.offset!==
fc||Kb.stride!==Cc)v.bindBuffer(34962,yb.buffer),v.vertexAttribPointer(Pc,Fb,Dc,Pb,Cc,fc),Kb.type=Dc,Kb.size=Fb,Kb.buffer=yb,Kb.normalized=Pb,Kb.offset=fc,Kb.stride=Cc;Kb.divisor!==Mb&&(x.vertexAttribDivisorANGLE(Pc,Mb),Kb.divisor=Mb)}else if(Kb.buffer&&(v.disableVertexAttribArray(Pc),Kb.buffer=null),Kb.x!==Oc||Kb.y!==Zc||Kb.z!==Tc||Kb.w!==Ec)v.vertexAttrib4f(Pc,Oc,Zc,Tc,Ec),Kb.x=Oc,Kb.y=Zc,Kb.z=Tc,Kb.w=Ec;Qc=A.scale;Ic=Qc[0];gc=Qc[1];B&&Uc===Ic&&Xc===gc||(Uc=Ic,Xc=gc,v.uniform2f(wc.location,Ic,gc));
yd=A.translate;Jd=yd[0];Yc=yd[1];B&&id===Jd&&Pg===Yc||(id=Jd,Pg=Yc,v.uniform2f(Na.location,Jd,Yc));Ld=A.thickness;B&&zf===Ld||(zf=Ld,v.uniform1f(ma.location,Ld));re=A.depth;B&&Ud===re||(Ud=re,v.uniform1f(I.location,re));Gd=d.call(this,U,A,B);Ed=Gd[0];Fc=Gd[1];hd=Gd[2];jd=Gd[3];B&&ed===Ed&&ld===Fc&&$c===hd&&zd===jd||(ed=Ed,ld=Fc,$c=hd,zd=jd,v.uniform4f(Z.location,Ed,Fc,hd,jd));Bd=A.miterLimit;B&&we===Bd||(we=Bd,v.uniform1f(k.location,Bd));ye=f.call(this,U,A,B);B&&ve===ye||(ve=ye,v.uniform1f(ba.location,
ye));he=A.dashLength;B&&ge===he||(ge=he,v.uniform1f(q.location,he));ee=A.opacity;B&&oe===ee||(oe=ee,v.uniform1f(Qb.location,ee));(be=A.dashTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);je=be._texture;v.uniform1i(oa.location,je.bind());Ac=A.count;0<Ac?Kc?x.drawElementsInstancedANGLE(5,4,Kc.type,0<<(Kc.type-5121>>1),Ac):x.drawArraysInstancedANGLE(5,0,4,Ac):0>Ac&&(Kc?v.drawElements(5,4,Kc.type,0<<(Kc.type-5121>>1)):v.drawArrays(5,0,4));U.viewportWidth=Xb;U.viewportHeight=Gc;Bb&&O.destroyStream(Sa);
oc&&O.destroyStream(Ib);Ja&&O.destroyStream(Cb);Da&&O.destroyStream(pb);wb&&O.destroyStream(Db);mb&&O.destroyStream(yb);je.unbind()}qa.dirty=!0;dc.setVAO(null);r&&(y.cpuTime+=performance.now()-t)},draw:function(d){var f,h,r,x,A,B,C,H,R,z,M,L,P,ga,fa,ua,T,pa,tb,Ea,Oa,Ia,Sd,Td,sb,Yd,od,kd,sd,md,cd,pc,pd,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,Dd,wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Ha,Ka,Nb,
fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td;f=Q.next;f!==Q.cur&&(f?v.bindFramebuffer(36160,f.framebuffer):v.bindFramebuffer(36160,null),Q.cur=f);if(qa.dirty){var tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc;tc=ca.dither;tc!==qa.dither&&(tc?v.enable(3024):v.disable(3024),qa.dither=tc);ue=ca.depth_func;ue!==qa.depth_func&&(v.depthFunc(ue),qa.depth_func=ue);Nc=qd[0];gd=qd[1];if(Nc!==xc[0]||gd!==xc[1])v.depthRange(Nc,gd),xc[0]=
Nc,xc[1]=gd;ud=ca.depth_mask;ud!==qa.depth_mask&&(v.depthMask(ud),qa.depth_mask=ud);Vb=nc[0];cc=nc[1];Ob=nc[2];Ga=nc[3];if(Vb!==jc[0]||cc!==jc[1]||Ob!==jc[2]||Ga!==jc[3])v.colorMask(Vb,cc,Ob,Ga),jc[0]=Vb,jc[1]=cc,jc[2]=Ob,jc[3]=Ga;$b=ca.frontFace;$b!==qa.frontFace&&(v.frontFace($b),qa.frontFace=$b);mb=ca.lineWidth;mb!==qa.lineWidth&&(v.lineWidth(mb),qa.lineWidth=mb);yb=ca.polygonOffset_enable;yb!==qa.polygonOffset_enable&&(yb?v.enable(32823):v.disable(32823),qa.polygonOffset_enable=yb);Mb=Y[0];Pb=
Y[1];if(Mb!==J[0]||Pb!==J[1])v.polygonOffset(Mb,Pb),J[0]=Mb,J[1]=Pb;fc=ca.sample_alpha;fc!==qa.sample_alpha&&(fc?v.enable(32926):v.disable(32926),qa.sample_alpha=fc);hc=ca.sample_enable;hc!==qa.sample_enable&&(hc?v.enable(32928):v.disable(32928),qa.sample_enable=hc);Sc=ka[0];Cc=ka[1];if(Sc!==Ca[0]||Cc!==Ca[1])v.sampleCoverage(Sc,Cc),Ca[0]=Sc,Ca[1]=Cc;Dc=ca.stencil_mask;Dc!==qa.stencil_mask&&(v.stencilMask(Dc),qa.stencil_mask=Dc);Ec=Wc[0];Oc=Wc[1];Zc=Wc[2];if(Ec!==E[0]||Oc!==E[1]||Zc!==E[2])v.stencilFunc(Ec,
Oc,Zc),E[0]=Ec,E[1]=Oc,E[2]=Zc;Tc=ta[0];Pc=ta[1];Kb=ta[2];Fb=ta[3];if(Tc!==S[0]||Pc!==S[1]||Kb!==S[2]||Fb!==S[3])v.stencilOpSeparate(Tc,Pc,Kb,Fb),S[0]=Tc,S[1]=Pc,S[2]=Kb,S[3]=Fb;Qc=w[0];Ic=w[1];Uc=w[2];gc=w[3];if(Qc!==ia[0]||Ic!==ia[1]||Uc!==ia[2]||gc!==ia[3])v.stencilOpSeparate(Qc,Ic,Uc,gc),ia[0]=Qc,ia[1]=Ic,ia[2]=Uc,ia[3]=gc}h=d.viewport;r=h.x|0;x=h.y|0;A="width"in h?h.width|0:U.framebufferWidth-r;B="height"in h?h.height|0:U.framebufferHeight-x;C=U.viewportWidth;U.viewportWidth=A;H=U.viewportHeight;
U.viewportHeight=B;v.viewport(r,x,A,B);ra[0]=r;ra[1]=x;ra[2]=A;ra[3]=B;v.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;v.enable(3042);qa.blend_enable=!0;v.blendEquationSeparate(32774,32774);ha[0]=32774;ha[1]=32774;v.blendFuncSeparate(770,771,773,1);Wb[0]=770;Wb[1]=771;Wb[2]=773;Wb[3]=1;v.enable(2884);qa.cull_enable=!0;v.cullFace(1029);qa.cull_face=1029;(R=m.call(this,U,d,0))?v.enable(2929):v.disable(2929);qa.depth_enable=R;z=d.viewport;M=z.x|0;L=z.y|0;P="width"in z?z.width|0:U.framebufferWidth-
M;ga="height"in z?z.height|0:U.framebufferHeight-L;v.scissor(M,L,P,ga);Lc[0]=M;Lc[1]=L;Lc[2]=P;Lc[3]=ga;v.enable(3089);qa.scissor_enable=!0;v.disable(2960);qa.stencil_enable=!1;if(fa=qa.profile)ua=performance.now(),y.count++;v.useProgram(N.program);T=$a.angle_instanced_arrays;dc.setVAO(null);da.buffer=d.positionBuffer;pa=!1;tb=null;Ea=0;Oa=!1;Sd=Ia=0;Td=1;sb=0;Yd=5126;md=sd=kd=od=0;ja(da)?(pa=!0,tb=O.createStream(34962,da),Yd=tb.dtype):(tb=O.getBuffer(da))?Yd=tb.dtype:"constant"in da?(Td=2,"number"===
typeof da.constant?(kd=da.constant,sd=md=od=0):(kd=0<da.constant.length?da.constant[0]:0,sd=1<da.constant.length?da.constant[1]:0,md=2<da.constant.length?da.constant[2]:0,od=3<da.constant.length?da.constant[3]:0)):(tb=ja(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),Yd="type"in da?F[da.type]:tb.dtype,Oa=!!da.normalized,Sd=da.size|0,Ia=da.offset|0,sb=da.stride|0,Ea=da.divisor|0);cd=n.location;pc=K[cd];if(1===Td){pc.buffer||v.enableVertexAttribArray(cd);pd=Sd||2;if(pc.type!==Yd||
pc.size!==pd||pc.buffer!==tb||pc.normalized!==Oa||pc.offset!==Ia||pc.stride!==sb)v.bindBuffer(34962,tb.buffer),v.vertexAttribPointer(cd,pd,Yd,Oa,sb,Ia),pc.type=Yd,pc.size=pd,pc.buffer=tb,pc.normalized=Oa,pc.offset=Ia,pc.stride=sb;pc.divisor!==Ea&&(T.vertexAttribDivisorANGLE(cd,Ea),pc.divisor=Ea)}else if(pc.buffer&&(v.disableVertexAttribArray(cd),pc.buffer=null),pc.x!==kd||pc.y!==sd||pc.z!==md||pc.w!==od)v.vertexAttrib4f(cd,kd,sd,md,od),pc.x=kd,pc.y=sd,pc.z=md,pc.w=od;xa.buffer=d.positionBuffer;fd=
!1;Mc=null;rc=0;ab=!1;Eb=Jc=0;qc=1;Ta=0;Kc=5126;wd=Dd=sc=bc=0;ja(xa)?(fd=!0,Mc=O.createStream(34962,xa),Kc=Mc.dtype):(Mc=O.getBuffer(xa))?Kc=Mc.dtype:"constant"in xa?(qc=2,"number"===typeof xa.constant?(sc=xa.constant,Dd=wd=bc=0):(sc=0<xa.constant.length?xa.constant[0]:0,Dd=1<xa.constant.length?xa.constant[1]:0,wd=2<xa.constant.length?xa.constant[2]:0,bc=3<xa.constant.length?xa.constant[3]:0)):(Mc=ja(xa.buffer)?O.createStream(34962,xa.buffer):O.getBuffer(xa.buffer),Kc="type"in xa?F[xa.type]:Mc.dtype,
ab=!!xa.normalized,Eb=xa.size|0,Jc=xa.offset|0,Ta=xa.stride|0,rc=xa.divisor|0);Bc=aa.location;Xb=K[Bc];if(1===qc){Xb.buffer||v.enableVertexAttribArray(Bc);Gc=Eb||2;if(Xb.type!==Kc||Xb.size!==Gc||Xb.buffer!==Mc||Xb.normalized!==ab||Xb.offset!==Jc||Xb.stride!==Ta)v.bindBuffer(34962,Mc.buffer),v.vertexAttribPointer(Bc,Gc,Kc,ab,Ta,Jc),Xb.type=Kc,Xb.size=Gc,Xb.buffer=Mc,Xb.normalized=ab,Xb.offset=Jc,Xb.stride=Ta;Xb.divisor!==rc&&(T.vertexAttribDivisorANGLE(Bc,rc),Xb.divisor=rc)}else if(Xb.buffer&&(v.disableVertexAttribArray(Bc),
Xb.buffer=null),Xb.x!==sc||Xb.y!==Dd||Xb.z!==wd||Xb.w!==bc)v.vertexAttrib4f(Bc,sc,Dd,wd,bc),Xb.x=sc,Xb.y=Dd,Xb.z=wd,Xb.w=bc;na.buffer=d.positionBuffer;Rc=!1;La=null;ub=0;Wa=!1;rd=va=0;Bb=1;Sa=0;Gb=5126;ae=Rb=Yb=cb=0;ja(na)?(Rc=!0,La=O.createStream(34962,na),Gb=La.dtype):(La=O.getBuffer(na))?Gb=La.dtype:"constant"in na?(Bb=2,"number"===typeof na.constant?(Yb=na.constant,Rb=ae=cb=0):(Yb=0<na.constant.length?na.constant[0]:0,Rb=1<na.constant.length?na.constant[1]:0,ae=2<na.constant.length?na.constant[2]:
0,cb=3<na.constant.length?na.constant[3]:0)):(La=ja(na.buffer)?O.createStream(34962,na.buffer):O.getBuffer(na.buffer),Gb="type"in na?F[na.type]:La.dtype,Wa=!!na.normalized,rd=na.size|0,va=na.offset|0,Sa=na.stride|0,ub=na.divisor|0);ac=la.location;Sb=K[ac];if(1===Bb){Sb.buffer||v.enableVertexAttribArray(ac);Ad=rd||2;if(Sb.type!==Gb||Sb.size!==Ad||Sb.buffer!==La||Sb.normalized!==Wa||Sb.offset!==va||Sb.stride!==Sa)v.bindBuffer(34962,La.buffer),v.vertexAttribPointer(ac,Ad,Gb,Wa,Sa,va),Sb.type=Gb,Sb.size=
Ad,Sb.buffer=La,Sb.normalized=Wa,Sb.offset=va,Sb.stride=Sa;Sb.divisor!==ub&&(T.vertexAttribDivisorANGLE(ac,ub),Sb.divisor=ub)}else if(Sb.buffer&&(v.disableVertexAttribArray(ac),Sb.buffer=null),Sb.x!==Yb||Sb.y!==Rb||Sb.z!==ae||Sb.w!==cb)v.vertexAttrib4f(ac,Yb,Rb,ae,cb),Sb.x=Yb,Sb.y=Rb,Sb.z=ae,Sb.w=cb;l.buffer=d.positionBuffer;Tb=!1;Ma=null;nb=0;vb=!1;Pa=hb=0;oc=1;Ib=0;dd=5126;mc=Hc=kc=db=0;ja(l)?(Tb=!0,Ma=O.createStream(34962,l),dd=Ma.dtype):(Ma=O.getBuffer(l))?dd=Ma.dtype:"constant"in l?(oc=2,"number"===
typeof l.constant?(kc=l.constant,Hc=mc=db=0):(kc=0<l.constant.length?l.constant[0]:0,Hc=1<l.constant.length?l.constant[1]:0,mc=2<l.constant.length?l.constant[2]:0,db=3<l.constant.length?l.constant[3]:0)):(Ma=ja(l.buffer)?O.createStream(34962,l.buffer):O.getBuffer(l.buffer),dd="type"in l?F[l.type]:Ma.dtype,vb=!!l.normalized,Pa=l.size|0,hb=l.offset|0,Ib=l.stride|0,nb=l.divisor|0);jb=gb.location;kb=K[jb];if(1===oc){kb.buffer||v.enableVertexAttribArray(jb);sa=Pa||2;if(kb.type!==dd||kb.size!==sa||kb.buffer!==
Ma||kb.normalized!==vb||kb.offset!==hb||kb.stride!==Ib)v.bindBuffer(34962,Ma.buffer),v.vertexAttribPointer(jb,sa,dd,vb,Ib,hb),kb.type=dd,kb.size=sa,kb.buffer=Ma,kb.normalized=vb,kb.offset=hb,kb.stride=Ib;kb.divisor!==nb&&(T.vertexAttribDivisorANGLE(jb,nb),kb.divisor=nb)}else if(kb.buffer&&(v.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==kc||kb.y!==Hc||kb.z!==mc||kb.w!==db)v.vertexAttrib4f(jb,kc,Hc,mc,db),kb.x=kc,kb.y=Hc,kb.z=mc,kb.w=db;u.buffer=d.colorBuffer;ob=!1;wa=null;Ua=0;bb=!1;eb=Aa=0;
Ja=1;Cb=0;Ab=5126;Za=Jb=yc=Ra=0;ja(u)?(ob=!0,wa=O.createStream(34962,u),Ab=wa.dtype):(wa=O.getBuffer(u))?Ab=wa.dtype:"constant"in u?(Ja=2,"number"===typeof u.constant?(yc=u.constant,Jb=Za=Ra=0):(yc=0<u.constant.length?u.constant[0]:0,Jb=1<u.constant.length?u.constant[1]:0,Za=2<u.constant.length?u.constant[2]:0,Ra=3<u.constant.length?u.constant[3]:0)):(wa=ja(u.buffer)?O.createStream(34962,u.buffer):O.getBuffer(u.buffer),Ab="type"in u?F[u.type]:wa.dtype,bb=!!u.normalized,eb=u.size|0,Aa=u.offset|0,Cb=
u.stride|0,Ua=u.divisor|0);Ub=g.location;ya=K[Ub];if(1===Ja){ya.buffer||v.enableVertexAttribArray(Ub);Ha=eb||4;if(ya.type!==Ab||ya.size!==Ha||ya.buffer!==wa||ya.normalized!==bb||ya.offset!==Aa||ya.stride!==Cb)v.bindBuffer(34962,wa.buffer),v.vertexAttribPointer(Ub,Ha,Ab,bb,Cb,Aa),ya.type=Ab,ya.size=Ha,ya.buffer=wa,ya.normalized=bb,ya.offset=Aa,ya.stride=Cb;ya.divisor!==Ua&&(T.vertexAttribDivisorANGLE(Ub,Ua),ya.divisor=Ua)}else if(ya.buffer&&(v.disableVertexAttribArray(Ub),ya.buffer=null),ya.x!==yc||
ya.y!==Jb||ya.z!==Za||ya.w!==Ra)v.vertexAttrib4f(Ub,yc,Jb,Za,Ra),ya.x=yc,ya.y=Jb,ya.z=Za,ya.w=Ra;D.buffer=d.colorBuffer;Ka=!1;Nb=null;fb=0;ib=!1;ec=za=0;Da=1;pb=0;qb=5126;ad=lc=Ya=Xa=0;ja(D)?(Ka=!0,Nb=O.createStream(34962,D),qb=Nb.dtype):(Nb=O.getBuffer(D))?qb=Nb.dtype:"constant"in D?(Da=2,"number"===typeof D.constant?(Ya=D.constant,lc=ad=Xa=0):(Ya=0<D.constant.length?D.constant[0]:0,lc=1<D.constant.length?D.constant[1]:0,ad=2<D.constant.length?D.constant[2]:0,Xa=3<D.constant.length?D.constant[3]:
0)):(Nb=ja(D.buffer)?O.createStream(34962,D.buffer):O.getBuffer(D.buffer),qb="type"in D?F[D.type]:Nb.dtype,ib=!!D.normalized,ec=D.size|0,za=D.offset|0,pb=D.stride|0,fb=D.divisor|0);uc=V.location;Va=K[uc];if(1===Da){Va.buffer||v.enableVertexAttribArray(uc);Lb=ec||4;if(Va.type!==qb||Va.size!==Lb||Va.buffer!==Nb||Va.normalized!==ib||Va.offset!==za||Va.stride!==pb)v.bindBuffer(34962,Nb.buffer),v.vertexAttribPointer(uc,Lb,qb,ib,pb,za),Va.type=qb,Va.size=Lb,Va.buffer=Nb,Va.normalized=ib,Va.offset=za,Va.stride=
pb;Va.divisor!==fb&&(T.vertexAttribDivisorANGLE(uc,fb),Va.divisor=fb)}else if(Va.buffer&&(v.disableVertexAttribArray(uc),Va.buffer=null),Va.x!==Ya||Va.y!==lc||Va.z!==ad||Va.w!==Xa)v.vertexAttrib4f(uc,Ya,lc,ad,Xa),Va.x=Ya,Va.y=lc,Va.z=ad,Va.w=Xa;bd=ea.location;Fa=K[bd];Fa.buffer||v.enableVertexAttribArray(bd);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==e||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)v.bindBuffer(34962,e.buffer),v.vertexAttribPointer(bd,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=
e,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(T.vertexAttribDivisorANGLE(bd,0),Fa.divisor=0);zc=c.location;Qa=K[zc];Qa.buffer||v.enableVertexAttribArray(zc);if(5126!==Qa.type||1!==Qa.size||Qa.buffer!==b||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)v.bindBuffer(34962,b.buffer),v.vertexAttribPointer(zc,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=b,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(T.vertexAttribDivisorANGLE(zc,0),Qa.divisor=0);Ba=d.scale;v.uniform2f(wc.location,
Ba[0],Ba[1]);lb=d.translate;v.uniform2f(Na.location,lb[0],lb[1]);v.uniform1f(ma.location,d.thickness);v.uniform1f(I.location,d.depth);wb=t.call(this,U,d,0);v.uniform4f(Z.location,wb[0],wb[1],wb[2],wb[3]);v.uniform1f(k.location,d.miterLimit);Db=a.call(this,U,d,0);v.uniform1f(ba.location,Db);v.uniform1f(q.location,d.dashLength);v.uniform1f(Qb.location,d.opacity);(rb=d.dashTexture)&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);vc=rb._texture;v.uniform1i(oa.location,vc.bind());(xb=G.elements)?v.bindBuffer(34963,
xb.buffer.buffer):dc.currentVAO&&(xb=Zb.getElements(dc.currentVAO.elements))&&v.bindBuffer(34963,xb.buffer.buffer);td=d.count;0<td?xb?T.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),td):T.drawArraysInstancedANGLE(5,0,4,td):0>td&&(xb?v.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):v.drawArrays(5,0,4));qa.dirty=!0;dc.setVAO(null);U.viewportWidth=C;U.viewportHeight=H;fa&&(y.cpuTime+=performance.now()-ua);pa&&O.destroyStream(tb);fd&&O.destroyStream(Mc);Rc&&O.destroyStream(La);Tb&&O.destroyStream(Ma);
ob&&O.destroyStream(wa);Ka&&O.destroyStream(Nb);vc.unbind()},scope:function(a,c,d){var g,f,k,h,m,n,q,t,w,v,J,E,Y,N,I,L,K,Q,S,W,V,ka,Z,aa,ia,ha,ba,ta,nc,ea,ra,Ca,T,oa,ab,qd,Eb,la,Ta,ma,bc,xc,Lc,Wb,Bc,Xb,Gc,Rc,La,ub,Wa,va,jc,Bb,Sa,Gb,cb,Yb,Rb,$a,ac,Sb,Na,Tb,Ma,nb,vb,hb,Pa,oc,Ib,gb,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Wc,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,Zb,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,Qb,tc,Ha,Nc,gd,dc,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,
Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,wc,Jd,id,Yc,Wd,Ld,zf,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ye,Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,of,Xe,Qe,Ne,We,Ue,Re,Se,Qd,Vd,Te,pf,hf,bf,ef,ff,gf,mf,jf,nf,Af,Bf,Oe,Ae,kf,lf,Cf,Ff,yf,Df,Ef,uf,vf,sf,wf,xf;g=a.viewport;f=g.x|0;k=g.y|0;h="width"in g?g.width|0:U.framebufferWidth-f;m="height"in g?g.height|0:U.framebufferHeight-k;n=U.viewportWidth;U.viewportWidth=h;q=U.viewportHeight;U.viewportHeight=m;
t=ga[0];ga[0]=f;w=ga[1];ga[1]=k;v=ga[2];ga[2]=h;J=ga[3];ga[3]=m;E=Ia[0];Ia[0]=0;Y=Ia[1];Ia[1]=0;N=Ia[2];Ia[2]=0;I=Ia[3];Ia[3]=0;L=ca.blend_enable;ca.blend_enable=!0;K=sb[0];sb[0]=32774;Q=sb[1];sb[1]=32774;S=ua[0];ua[0]=770;W=ua[1];ua[1]=771;V=ua[2];ua[2]=773;ka=ua[3];ua[3]=1;Z=ca.cull_enable;ca.cull_enable=!0;aa=ca.cull_face;ca.cull_face=1029;ia=x.call(this,U,a,d);ha=ca.depth_enable;ca.depth_enable=ia;ba=a.viewport;ta=ba.x|0;nc=ba.y|0;ea="width"in ba?ba.width|0:U.framebufferWidth-ta;ra="height"in
ba?ba.height|0:U.framebufferHeight-nc;Ca=tb[0];tb[0]=ta;T=tb[1];tb[1]=nc;oa=tb[2];tb[2]=ea;ab=tb[3];tb[3]=ra;qd=ca.scissor_enable;ca.scissor_enable=!0;Eb=ca.stencil_enable;ca.stencil_enable=!1;if(la=qa.profile)Ta=performance.now(),y.count++;ma=G.offset;G.offset=0;bc=G.count;G.count=4;xc=a.count;Lc=G.instances;G.instances=xc;Wb=G.primitive;G.primitive=5;Bc=a.dashLength;Xb=Oa[23];Oa[23]=Bc;Gc=a.dashTexture;Rc=Oa[24];Oa[24]=Gc;La=a.depth;ub=Oa[22];Oa[22]=La;Wa=a.id;va=Oa[31];Oa[31]=Wa;jc=a.miterLimit;
Bb=Oa[32];Oa[32]=jc;Sa=z.call(this,U,a,d);Gb=Oa[33];Oa[33]=Sa;cb=a.opacity;Yb=Oa[10];Oa[10]=cb;Rb=U.pixelRatio;$a=Oa[34];Oa[34]=Rb;ac=a.scale;Sb=Oa[6];Oa[6]=ac;Na=a.scaleFract;Tb=Oa[7];Oa[7]=Na;Ma=a.thickness;nb=Oa[21];Oa[21]=Ma;vb=a.translate;hb=Oa[8];Oa[8]=vb;Pa=a.translateFract;oc=Oa[9];Oa[9]=Pa;Ib=fa.call(this,U,a,d);gb=Oa[3];Oa[3]=Ib;u.buffer=a.colorBuffer;db=!1;kc=null;Hc=0;mc=!1;kb=jb=0;sa=1;ob=0;wa=5126;eb=Aa=bb=Ua=0;ja(u)?(db=!0,kc=O.createStream(34962,u),wa=kc.dtype):(kc=O.getBuffer(u))?
wa=kc.dtype:"constant"in u?(sa=2,"number"===typeof u.constant?(bb=u.constant,Aa=eb=Ua=0):(bb=0<u.constant.length?u.constant[0]:0,Aa=1<u.constant.length?u.constant[1]:0,eb=2<u.constant.length?u.constant[2]:0,Ua=3<u.constant.length?u.constant[3]:0)):(kc=ja(u.buffer)?O.createStream(34962,u.buffer):O.getBuffer(u.buffer),wa="type"in u?F[u.type]:kc.dtype,mc=!!u.normalized,kb=u.size|0,jb=u.offset|0,ob=u.stride|0,Hc=u.divisor|0);Ja=M.buffer;M.buffer=kc;Cb=M.divisor;M.divisor=Hc;Ab=M.normalized;M.normalized=
mc;Ra=M.offset;M.offset=jb;yc=M.size;M.size=kb;Jb=M.state;M.state=sa;Za=M.stride;M.stride=ob;Ub=M.type;M.type=wa;ya=M.w;M.w=Ua;Wc=M.x;M.x=bb;Ka=M.y;M.y=Aa;Nb=M.z;M.z=eb;da.buffer=a.positionBuffer;fb=!1;ib=null;za=0;ec=!1;pb=Da=0;qb=1;Xa=0;Ya=5126;Va=uc=ad=lc=0;ja(da)?(fb=!0,ib=O.createStream(34962,da),Ya=ib.dtype):(ib=O.getBuffer(da))?Ya=ib.dtype:"constant"in da?(qb=2,"number"===typeof da.constant?(ad=da.constant,uc=Va=lc=0):(ad=0<da.constant.length?da.constant[0]:0,uc=1<da.constant.length?da.constant[1]:
0,Va=2<da.constant.length?da.constant[2]:0,lc=3<da.constant.length?da.constant[3]:0)):(ib=ja(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),Ya="type"in da?F[da.type]:ib.dtype,ec=!!da.normalized,pb=da.size|0,Da=da.offset|0,Xa=da.stride|0,za=da.divisor|0);Lb=H.buffer;H.buffer=ib;Zb=H.divisor;H.divisor=za;Fa=H.normalized;H.normalized=ec;zc=H.offset;H.offset=Da;Qa=H.size;H.size=pb;Ba=H.state;H.state=qb;lb=H.stride;H.stride=Xa;wb=H.type;H.type=Ya;Db=H.w;H.w=lc;rb=H.x;H.x=ad;vc=H.y;H.y=
uc;xb=H.z;H.z=Va;D.buffer=a.colorBuffer;Qb=!1;tc=null;Ha=0;Nc=!1;dc=gd=0;Vb=1;cc=0;Ob=5126;yb=mb=$b=Ga=0;ja(D)?(Qb=!0,tc=O.createStream(34962,D),Ob=tc.dtype):(tc=O.getBuffer(D))?Ob=tc.dtype:"constant"in D?(Vb=2,"number"===typeof D.constant?($b=D.constant,mb=yb=Ga=0):($b=0<D.constant.length?D.constant[0]:0,mb=1<D.constant.length?D.constant[1]:0,yb=2<D.constant.length?D.constant[2]:0,Ga=3<D.constant.length?D.constant[3]:0)):(tc=ja(D.buffer)?O.createStream(34962,D.buffer):O.getBuffer(D.buffer),Ob="type"in
D?F[D.type]:tc.dtype,Nc=!!D.normalized,dc=D.size|0,gd=D.offset|0,cc=D.stride|0,Ha=D.divisor|0);Mb=r.buffer;r.buffer=tc;Pb=r.divisor;r.divisor=Ha;fc=r.normalized;r.normalized=Nc;hc=r.offset;r.offset=gd;Sc=r.size;r.size=dc;Cc=r.state;r.state=Vb;Dc=r.stride;r.stride=cc;Ec=r.type;r.type=Ob;Oc=r.w;r.w=Ga;Zc=r.x;r.x=$b;Tc=r.y;r.y=mb;Pc=r.z;r.z=yb;xa.buffer=a.positionBuffer;Kb=!1;Fb=null;Qc=0;Ic=!1;gc=Uc=0;Xc=1;wc=0;Jd=5126;Ld=Wd=Yc=id=0;ja(xa)?(Kb=!0,Fb=O.createStream(34962,xa),Jd=Fb.dtype):(Fb=O.getBuffer(xa))?
Jd=Fb.dtype:"constant"in xa?(Xc=2,"number"===typeof xa.constant?(Yc=xa.constant,Wd=Ld=id=0):(Yc=0<xa.constant.length?xa.constant[0]:0,Wd=1<xa.constant.length?xa.constant[1]:0,Ld=2<xa.constant.length?xa.constant[2]:0,id=3<xa.constant.length?xa.constant[3]:0)):(Fb=ja(xa.buffer)?O.createStream(34962,xa.buffer):O.getBuffer(xa.buffer),Jd="type"in xa?F[xa.type]:Fb.dtype,Ic=!!xa.normalized,gc=xa.size|0,Uc=xa.offset|0,wc=xa.stride|0,Qc=xa.divisor|0);zf=C.buffer;C.buffer=Fb;re=C.divisor;C.divisor=Qc;Ud=C.normalized;
C.normalized=Ic;Gd=C.offset;C.offset=Uc;Ed=C.size;C.size=gc;ed=C.state;C.state=Xc;Fc=C.stride;C.stride=wc;ld=C.type;C.type=Jd;hd=C.w;C.w=id;$c=C.x;C.x=Yc;jd=C.y;C.y=Wd;zd=C.z;C.z=Ld;Bd=A.buffer;A.buffer=e;we=A.divisor;A.divisor=0;ye=A.normalized;A.normalized=!1;ve=A.offset;A.offset=0;he=A.size;A.size=0;ge=A.state;A.state=1;ee=A.stride;A.stride=8;oe=A.type;A.type=5126;be=A.w;A.w=0;je=A.x;A.x=0;Ac=A.y;A.y=0;Vc=A.z;A.z=0;pe=B.buffer;B.buffer=b;le=B.divisor;B.divisor=0;Fd=B.normalized;B.normalized=!1;
Md=B.offset;B.offset=4;Nd=B.size;B.size=0;Od=B.state;B.state=1;ke=B.stride;B.stride=8;Ge=B.type;B.type=5126;xe=B.w;B.w=0;ne=B.x;B.x=0;Ye=B.y;B.y=0;Pe=B.z;B.z=0;na.buffer=a.positionBuffer;Me=!1;qe=null;Ce=0;He=!1;Je=Ie=0;De=1;Hd=0;Rd=5126;xd=Ke=ce=Zd=0;ja(na)?(Me=!0,qe=O.createStream(34962,na),Rd=qe.dtype):(qe=O.getBuffer(na))?Rd=qe.dtype:"constant"in na?(De=2,"number"===typeof na.constant?(ce=na.constant,Ke=xd=Zd=0):(ce=0<na.constant.length?na.constant[0]:0,Ke=1<na.constant.length?na.constant[1]:
0,xd=2<na.constant.length?na.constant[2]:0,Zd=3<na.constant.length?na.constant[3]:0)):(qe=ja(na.buffer)?O.createStream(34962,na.buffer):O.getBuffer(na.buffer),Rd="type"in na?F[na.type]:qe.dtype,He=!!na.normalized,Je=na.size|0,Ie=na.offset|0,Hd=na.stride|0,Ce=na.divisor|0);Pd=P.buffer;P.buffer=qe;ze=P.divisor;P.divisor=Ce;Le=P.normalized;P.normalized=He;of=P.offset;P.offset=Ie;Xe=P.size;P.size=Je;Qe=P.state;P.state=De;Ne=P.stride;P.stride=Hd;We=P.type;P.type=Rd;Ue=P.w;P.w=Zd;Re=P.x;P.x=ce;Se=P.y;P.y=
Ke;Qd=P.z;P.z=xd;l.buffer=a.positionBuffer;Vd=!1;Te=null;pf=0;hf=!1;ef=bf=0;ff=1;gf=0;mf=5126;Bf=Af=nf=jf=0;ja(l)?(Vd=!0,Te=O.createStream(34962,l),mf=Te.dtype):(Te=O.getBuffer(l))?mf=Te.dtype:"constant"in l?(ff=2,"number"===typeof l.constant?(nf=l.constant,Af=Bf=jf=0):(nf=0<l.constant.length?l.constant[0]:0,Af=1<l.constant.length?l.constant[1]:0,Bf=2<l.constant.length?l.constant[2]:0,jf=3<l.constant.length?l.constant[3]:0)):(Te=ja(l.buffer)?O.createStream(34962,l.buffer):O.getBuffer(l.buffer),mf=
"type"in l?F[l.type]:Te.dtype,hf=!!l.normalized,ef=l.size|0,bf=l.offset|0,gf=l.stride|0,pf=l.divisor|0);Oe=R.buffer;R.buffer=Te;Ae=R.divisor;R.divisor=pf;kf=R.normalized;R.normalized=hf;lf=R.offset;R.offset=bf;Cf=R.size;R.size=ef;Ff=R.state;R.state=ff;yf=R.stride;R.stride=gf;Df=R.type;R.type=mf;Ef=R.w;R.w=jf;uf=R.x;R.x=nf;vf=R.y;R.y=Af;sf=R.z;R.z=Bf;wf=Ea.vert;Ea.vert=36;xf=Ea.frag;Ea.frag=35;qa.dirty=!0;c(U,a,d);U.viewportWidth=n;U.viewportHeight=q;ga[0]=t;ga[1]=w;ga[2]=v;ga[3]=J;Ia[0]=E;Ia[1]=Y;
Ia[2]=N;Ia[3]=I;ca.blend_enable=L;sb[0]=K;sb[1]=Q;ua[0]=S;ua[1]=W;ua[2]=V;ua[3]=ka;ca.cull_enable=Z;ca.cull_face=aa;ca.depth_enable=ha;tb[0]=Ca;tb[1]=T;tb[2]=oa;tb[3]=ab;ca.scissor_enable=qd;ca.stencil_enable=Eb;la&&(y.cpuTime+=performance.now()-Ta);G.offset=ma;G.count=bc;G.instances=Lc;G.primitive=Wb;Oa[23]=Xb;Oa[24]=Rc;Oa[22]=ub;Oa[31]=va;Oa[32]=Bb;Oa[33]=Gb;Oa[10]=Yb;Oa[34]=$a;Oa[6]=Sb;Oa[7]=Tb;Oa[21]=nb;Oa[8]=hb;Oa[9]=oc;Oa[3]=gb;db&&O.destroyStream(kc);M.buffer=Ja;M.divisor=Cb;M.normalized=Ab;
M.offset=Ra;M.size=yc;M.state=Jb;M.stride=Za;M.type=Ub;M.w=ya;M.x=Wc;M.y=Ka;M.z=Nb;fb&&O.destroyStream(ib);H.buffer=Lb;H.divisor=Zb;H.normalized=Fa;H.offset=zc;H.size=Qa;H.state=Ba;H.stride=lb;H.type=wb;H.w=Db;H.x=rb;H.y=vc;H.z=xb;Qb&&O.destroyStream(tc);r.buffer=Mb;r.divisor=Pb;r.normalized=fc;r.offset=hc;r.size=Sc;r.state=Cc;r.stride=Dc;r.type=Ec;r.w=Oc;r.x=Zc;r.y=Tc;r.z=Pc;Kb&&O.destroyStream(Fb);C.buffer=zf;C.divisor=re;C.normalized=Ud;C.offset=Gd;C.size=Ed;C.state=ed;C.stride=Fc;C.type=ld;C.w=
hd;C.x=$c;C.y=jd;C.z=zd;A.buffer=Bd;A.divisor=we;A.normalized=ye;A.offset=ve;A.size=he;A.state=ge;A.stride=ee;A.type=oe;A.w=be;A.x=je;A.y=Ac;A.z=Vc;B.buffer=pe;B.divisor=le;B.normalized=Fd;B.offset=Md;B.size=Nd;B.state=Od;B.stride=ke;B.type=Ge;B.w=xe;B.x=ne;B.y=Ye;B.z=Pe;Me&&O.destroyStream(qe);P.buffer=Pd;P.divisor=ze;P.normalized=Le;P.offset=of;P.size=Xe;P.state=Qe;P.stride=Ne;P.type=We;P.w=Ue;P.x=Re;P.y=Se;P.z=Qd;Vd&&O.destroyStream(Te);R.buffer=Oe;R.divisor=Ae;R.normalized=kf;R.offset=lf;R.size=
Cf;R.state=Ff;R.stride=yf;R.type=Df;R.w=Ef;R.x=uf;R.y=vf;R.z=sf;Ea.vert=wf;Ea.frag=xf;qa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(h,y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R){var L,T,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Qb,gb,Ha,ma,Na,Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua;L=h.attributes;T=h.buffer;d=h.context;f=h.current;g=h.draw;n=h.elements;V=h.extensions;aa=h.framebuffer;q=h.gl;oa=h.isBufferArgs;I=h.next;ea=h.shader;c=h.uniforms;
k=h.vao;ba=I.blend_color;la=f.blend_color;Qb=I.blend_equation;gb=f.blend_equation;Ha=I.blend_func;ma=f.blend_func;Na=I.colorMask;Z=f.colorMask;K=I.depth_range;O=f.depth_range;U=I.polygonOffset_offset;qa=f.polygonOffset_offset;G=I.sample_coverage;Zb=f.sample_coverage;$a=I.scissor_box;Q=f.scissor_box;v=I.stencil_func;ja=f.stencil_func;ca=I.stencil_opBack;Ea=f.stencil_opBack;Oa=I.stencil_opFront;dc=f.stencil_opFront;Ia=I.viewport;W=f.viewport;sb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,
uint32:5125,"float":5126,float32:5126};ha={offset:8,stride:8};ua={offset:8,stride:8};return{batch:function(a,b){var c,e,h,m,t,N;c=aa.next;c!==aa.cur&&(c?q.bindFramebuffer(36160,c.framebuffer):q.bindFramebuffer(36160,null),aa.cur=c);if(f.dirty){var ba,ea,Lc,Ia,E,w,ia,ta,S,ga,ra,F,u,da,D,xa,na,l,ic,X,p,Hb,zb,$a,Ha,Qb,fe,Kd,wc,nd,ie,se;ba=I.dither;ba!==f.dither&&(ba?q.enable(3024):q.disable(3024),f.dither=ba);ea=I.depth_func;ea!==f.depth_func&&(q.depthFunc(ea),f.depth_func=ea);Lc=K[0];Ia=K[1];if(Lc!==
O[0]||Ia!==O[1])q.depthRange(Lc,Ia),O[0]=Lc,O[1]=Ia;E=I.depth_mask;E!==f.depth_mask&&(q.depthMask(E),f.depth_mask=E);w=Na[0];ia=Na[1];ta=Na[2];S=Na[3];if(w!==Z[0]||ia!==Z[1]||ta!==Z[2]||S!==Z[3])q.colorMask(w,ia,ta,S),Z[0]=w,Z[1]=ia,Z[2]=ta,Z[3]=S;ga=I.cull_enable;ga!==f.cull_enable&&(ga?q.enable(2884):q.disable(2884),f.cull_enable=ga);ra=I.cull_face;ra!==f.cull_face&&(q.cullFace(ra),f.cull_face=ra);F=I.frontFace;F!==f.frontFace&&(q.frontFace(F),f.frontFace=F);u=I.lineWidth;u!==f.lineWidth&&(q.lineWidth(u),
f.lineWidth=u);da=I.polygonOffset_enable;da!==f.polygonOffset_enable&&(da?q.enable(32823):q.disable(32823),f.polygonOffset_enable=da);D=U[0];xa=U[1];if(D!==qa[0]||xa!==qa[1])q.polygonOffset(D,xa),qa[0]=D,qa[1]=xa;na=I.sample_alpha;na!==f.sample_alpha&&(na?q.enable(32926):q.disable(32926),f.sample_alpha=na);l=I.sample_enable;l!==f.sample_enable&&(l?q.enable(32928):q.disable(32928),f.sample_enable=l);ic=G[0];X=G[1];if(ic!==Zb[0]||X!==Zb[1])q.sampleCoverage(ic,X),Zb[0]=ic,Zb[1]=X;p=I.stencil_mask;p!==
f.stencil_mask&&(q.stencilMask(p),f.stencil_mask=p);Hb=v[0];zb=v[1];$a=v[2];if(Hb!==ja[0]||zb!==ja[1]||$a!==ja[2])q.stencilFunc(Hb,zb,$a),ja[0]=Hb,ja[1]=zb,ja[2]=$a;Ha=Oa[0];Qb=Oa[1];fe=Oa[2];Kd=Oa[3];if(Ha!==dc[0]||Qb!==dc[1]||fe!==dc[2]||Kd!==dc[3])q.stencilOpSeparate(Ha,Qb,fe,Kd),dc[0]=Ha,dc[1]=Qb,dc[2]=fe,dc[3]=Kd;wc=ca[0];nd=ca[1];ie=ca[2];se=ca[3];if(wc!==Ea[0]||nd!==Ea[1]||ie!==Ea[2]||se!==Ea[3])q.stencilOpSeparate(wc,nd,ie,se),Ea[0]=wc,Ea[1]=nd,Ea[2]=ie,Ea[3]=se}q.blendColor(0,0,0,0);la[0]=
0;la[1]=0;la[2]=0;la[3]=0;q.enable(3042);f.blend_enable=!0;q.blendEquationSeparate(32774,32774);gb[0]=32774;gb[1]=32774;q.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;q.disable(2929);f.depth_enable=!1;q.enable(3089);f.scissor_enable=!0;q.disable(2960);f.stencil_enable=!1;if(e=f.profile)h=performance.now(),y.count+=b;q.useProgram(x.program);m=V.angle_instanced_arrays;var Id;k.setVAO(null);Id=g.instances;for(t=0;t<b;++t){N=a[t];var Cd,$d,Xd,Ze,If,tf,vd,Fe,Sd,Td,de,Yd,od,kd,
sd,md,cd,pc,pd,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,Dd,wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub;Cd=N.viewport;$d=Cd.x|0;Xd=Cd.y|0;Ze="width"in Cd?Cd.width|0:d.framebufferWidth-$d;If="height"in Cd?Cd.height|0:d.framebufferHeight-Xd;tf=d.viewportWidth;d.viewportWidth=Ze;vd=d.viewportHeight;d.viewportHeight=If;q.viewport($d,Xd,Ze,If);W[0]=$d;W[1]=Xd;W[2]=Ze;W[3]=If;Fe=N.viewport;Sd=Fe.x|0;Td=Fe.y|
0;de="width"in Fe?Fe.width|0:d.framebufferWidth-Sd;Yd="height"in Fe?Fe.height|0:d.framebufferHeight-Td;q.scissor(Sd,Td,de,Yd);Q[0]=Sd;Q[1]=Td;Q[2]=de;Q[3]=Yd;ha.buffer=N.positionBuffer;od=!1;kd=null;sd=0;md=!1;pc=cd=0;pd=1;fd=0;Mc=5126;Eb=Jc=ab=rc=0;oa(ha)?(od=!0,kd=T.createStream(34962,ha),Mc=kd.dtype):(kd=T.getBuffer(ha))?Mc=kd.dtype:"constant"in ha?(pd=2,"number"===typeof ha.constant?(ab=ha.constant,Jc=Eb=rc=0):(ab=0<ha.constant.length?ha.constant[0]:0,Jc=1<ha.constant.length?ha.constant[1]:0,
Eb=2<ha.constant.length?ha.constant[2]:0,rc=3<ha.constant.length?ha.constant[3]:0)):(kd=oa(ha.buffer)?T.createStream(34962,ha.buffer):T.getBuffer(ha.buffer),Mc="type"in ha?sb[ha.type]:kd.dtype,md=!!ha.normalized,pc=ha.size|0,cd=ha.offset|0,fd=ha.stride|0,sd=ha.divisor|0);qc=r.location;Ta=L[qc];if(1===pd){Ta.buffer||q.enableVertexAttribArray(qc);Kc=pc||2;if(Ta.type!==Mc||Ta.size!==Kc||Ta.buffer!==kd||Ta.normalized!==md||Ta.offset!==cd||Ta.stride!==fd)q.bindBuffer(34962,kd.buffer),q.vertexAttribPointer(qc,
Kc,Mc,md,fd,cd),Ta.type=Mc,Ta.size=Kc,Ta.buffer=kd,Ta.normalized=md,Ta.offset=cd,Ta.stride=fd;Ta.divisor!==sd&&(m.vertexAttribDivisorANGLE(qc,sd),Ta.divisor=sd)}else if(Ta.buffer&&(q.disableVertexAttribArray(qc),Ta.buffer=null),Ta.x!==ab||Ta.y!==Jc||Ta.z!==Eb||Ta.w!==rc)q.vertexAttrib4f(qc,ab,Jc,Eb,rc),Ta.x=ab,Ta.y=Jc,Ta.z=Eb,Ta.w=rc;ua.buffer=N.positionFractBuffer;bc=!1;sc=null;Dd=0;wd=!1;Xb=Bc=0;Gc=1;Rc=0;La=5126;rd=va=Wa=ub=0;oa(ua)?(bc=!0,sc=T.createStream(34962,ua),La=sc.dtype):(sc=T.getBuffer(ua))?
La=sc.dtype:"constant"in ua?(Gc=2,"number"===typeof ua.constant?(Wa=ua.constant,va=rd=ub=0):(Wa=0<ua.constant.length?ua.constant[0]:0,va=1<ua.constant.length?ua.constant[1]:0,rd=2<ua.constant.length?ua.constant[2]:0,ub=3<ua.constant.length?ua.constant[3]:0)):(sc=oa(ua.buffer)?T.createStream(34962,ua.buffer):T.getBuffer(ua.buffer),La="type"in ua?sb[ua.type]:sc.dtype,wd=!!ua.normalized,Xb=ua.size|0,Bc=ua.offset|0,Rc=ua.stride|0,Dd=ua.divisor|0);Bb=C.location;Sa=L[Bb];if(1===Gc){Sa.buffer||q.enableVertexAttribArray(Bb);
Gb=Xb||2;if(Sa.type!==La||Sa.size!==Gb||Sa.buffer!==sc||Sa.normalized!==wd||Sa.offset!==Bc||Sa.stride!==Rc)q.bindBuffer(34962,sc.buffer),q.vertexAttribPointer(Bb,Gb,La,wd,Rc,Bc),Sa.type=La,Sa.size=Gb,Sa.buffer=sc,Sa.normalized=wd,Sa.offset=Bc,Sa.stride=Rc;Sa.divisor!==Dd&&(m.vertexAttribDivisorANGLE(Bb,Dd),Sa.divisor=Dd)}else if(Sa.buffer&&(q.disableVertexAttribArray(Bb),Sa.buffer=null),Sa.x!==Wa||Sa.y!==va||Sa.z!==rd||Sa.w!==ub)q.vertexAttrib4f(Bb,Wa,va,rd,ub),Sa.x=Wa,Sa.y=va,Sa.z=rd,Sa.w=ub;cb=
N.fill;Yb=cb[0];ae=cb[1];Sb=cb[2];Tb=cb[3];t&&Rb===Yb&&ac===ae&&Ad===Sb&&Ma===Tb||(Rb=Yb,ac=ae,Ad=Sb,Ma=Tb,q.uniform4f(fa.location,Yb,ae,Sb,Tb));nb=N.scale;vb=nb[0];Pa=nb[1];t&&hb===vb&&oc===Pa||(hb=vb,oc=Pa,q.uniform2f(A.location,vb,Pa));Ib=N.scaleFract;dd=Ib[0];kc=Ib[1];t&&db===dd&&Hc===kc||(db=dd,Hc=kc,q.uniform2f(B.location,dd,kc));mc=N.translate;jb=mc[0];sa=mc[1];t&&kb===jb&&ob===sa||(kb=jb,ob=sa,q.uniform2f(P.location,jb,sa));wa=N.translateFract;Ua=wa[0];Aa=wa[1];t&&bb===Ua&&eb===Aa||(bb=Ua,
eb=Aa,q.uniform2f(R.location,Ua,Aa));Ja=N.id;t&&Cb===Ja||(Cb=Ja,q.uniform1f(M.location,Ja));Ab=N.opacity;t&&Ra===Ab||(Ra=Ab,q.uniform1f(H.location,Ab));yc=z.call(this,d,N,t);Jb=null;(Jb=(Za=oa(yc))?n.createStream(yc):n.getElements(yc))&&q.bindBuffer(34963,Jb.buffer.buffer);if(Ub=Jb?Jb.vertCount:-1)0<Id?Jb?m.drawElementsInstancedANGLE(4,Ub,Jb.type,0<<(Jb.type-5121>>1),Id):m.drawArraysInstancedANGLE(4,0,Ub,Id):0>Id&&(Jb?q.drawElements(4,Ub,Jb.type,0<<(Jb.type-5121>>1)):q.drawArrays(4,0,Ub)),d.viewportWidth=
tf,d.viewportHeight=vd,od&&T.destroyStream(kd),bc&&T.destroyStream(sc),Za&&n.destroyStream(Jb)}f.dirty=!0;k.setVAO(null);e&&(y.cpuTime+=performance.now()-h)},draw:function(a){var b,c,e,h,t,x,z,ba,ea,pa,Ia,E,w,ia,ta,S,ga,ra,F,u,da,D;b=aa.next;b!==aa.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),aa.cur=b);if(f.dirty){b=I.dither;b!==f.dither&&(b?q.enable(3024):q.disable(3024),f.dither=b);b=I.depth_func;b!==f.depth_func&&(q.depthFunc(b),f.depth_func=b);b=K[0];x=K[1];if(b!==
O[0]||x!==O[1])q.depthRange(b,x),O[0]=b,O[1]=x;b=I.depth_mask;b!==f.depth_mask&&(q.depthMask(b),f.depth_mask=b);b=Na[0];x=Na[1];c=Na[2];e=Na[3];if(b!==Z[0]||x!==Z[1]||c!==Z[2]||e!==Z[3])q.colorMask(b,x,c,e),Z[0]=b,Z[1]=x,Z[2]=c,Z[3]=e;b=I.cull_enable;b!==f.cull_enable&&(b?q.enable(2884):q.disable(2884),f.cull_enable=b);b=I.cull_face;b!==f.cull_face&&(q.cullFace(b),f.cull_face=b);b=I.frontFace;b!==f.frontFace&&(q.frontFace(b),f.frontFace=b);b=I.lineWidth;b!==f.lineWidth&&(q.lineWidth(b),f.lineWidth=
b);b=I.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?q.enable(32823):q.disable(32823),f.polygonOffset_enable=b);b=U[0];x=U[1];if(b!==qa[0]||x!==qa[1])q.polygonOffset(b,x),qa[0]=b,qa[1]=x;b=I.sample_alpha;b!==f.sample_alpha&&(b?q.enable(32926):q.disable(32926),f.sample_alpha=b);b=I.sample_enable;b!==f.sample_enable&&(b?q.enable(32928):q.disable(32928),f.sample_enable=b);b=G[0];x=G[1];if(b!==Zb[0]||x!==Zb[1])q.sampleCoverage(b,x),Zb[0]=b,Zb[1]=x;b=I.stencil_mask;b!==f.stencil_mask&&(q.stencilMask(b),
f.stencil_mask=b);b=v[0];x=v[1];c=v[2];if(b!==ja[0]||x!==ja[1]||c!==ja[2])q.stencilFunc(b,x,c),ja[0]=b,ja[1]=x,ja[2]=c;b=Oa[0];x=Oa[1];c=Oa[2];e=Oa[3];if(b!==dc[0]||x!==dc[1]||c!==dc[2]||e!==dc[3])q.stencilOpSeparate(b,x,c,e),dc[0]=b,dc[1]=x,dc[2]=c,dc[3]=e;b=ca[0];x=ca[1];c=ca[2];e=ca[3];if(b!==Ea[0]||x!==Ea[1]||c!==Ea[2]||e!==Ea[3])q.stencilOpSeparate(b,x,c,e),Ea[0]=b,Ea[1]=x,Ea[2]=c,Ea[3]=e}b=a.viewport;c=b.x|0;e=b.y|0;h="width"in b?b.width|0:d.framebufferWidth-c;t="height"in b?b.height|0:d.framebufferHeight-
e;b=d.viewportWidth;d.viewportWidth=h;x=d.viewportHeight;d.viewportHeight=t;q.viewport(c,e,h,t);W[0]=c;W[1]=e;W[2]=h;W[3]=t;q.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;q.enable(3042);f.blend_enable=!0;q.blendEquationSeparate(32774,32774);gb[0]=32774;gb[1]=32774;q.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;q.disable(2929);f.depth_enable=!1;t=a.viewport;c=t.x|0;e=t.y|0;h="width"in t?t.width|0:d.framebufferWidth-c;t="height"in t?t.height|0:d.framebufferHeight-e;
q.scissor(c,e,h,t);Q[0]=c;Q[1]=e;Q[2]=h;Q[3]=t;q.enable(3089);f.scissor_enable=!0;q.disable(2960);f.stencil_enable=!1;if(c=f.profile)z=performance.now(),y.count++;q.useProgram(m.program);e=V.angle_instanced_arrays;k.setVAO(null);ha.buffer=a.positionBuffer;h=!1;ba=0;ea=!1;Ia=pa=0;E=1;w=0;ia=5126;ra=ga=S=ta=0;oa(ha)?(h=!0,t=T.createStream(34962,ha),ia=t.dtype):(t=T.getBuffer(ha))?ia=t.dtype:"constant"in ha?(E=2,"number"===typeof ha.constant?(S=ha.constant,ga=ra=ta=0):(S=0<ha.constant.length?ha.constant[0]:
0,ga=1<ha.constant.length?ha.constant[1]:0,ra=2<ha.constant.length?ha.constant[2]:0,ta=3<ha.constant.length?ha.constant[3]:0)):(t=oa(ha.buffer)?T.createStream(34962,ha.buffer):T.getBuffer(ha.buffer),ia="type"in ha?sb[ha.type]:t.dtype,ea=!!ha.normalized,Ia=ha.size|0,pa=ha.offset|0,w=ha.stride|0,ba=ha.divisor|0);F=r.location;u=L[F];if(1===E){u.buffer||q.enableVertexAttribArray(F);Ia=Ia||2;if(u.type!==ia||u.size!==Ia||u.buffer!==t||u.normalized!==ea||u.offset!==pa||u.stride!==w)q.bindBuffer(34962,t.buffer),
q.vertexAttribPointer(F,Ia,ia,ea,w,pa),u.type=ia,u.size=Ia,u.buffer=t,u.normalized=ea,u.offset=pa,u.stride=w;u.divisor!==ba&&(e.vertexAttribDivisorANGLE(F,ba),u.divisor=ba)}else if(u.buffer&&(q.disableVertexAttribArray(F),u.buffer=null),u.x!==S||u.y!==ga||u.z!==ra||u.w!==ta)q.vertexAttrib4f(F,S,ga,ra,ta),u.x=S,u.y=ga,u.z=ra,u.w=ta;ua.buffer=a.positionFractBuffer;ba=!1;pa=0;w=!1;ta=ia=0;S=1;F=0;u=5126;D=da=ra=ga=0;oa(ua)?(ba=!0,ea=T.createStream(34962,ua),u=ea.dtype):(ea=T.getBuffer(ua))?u=ea.dtype:
"constant"in ua?(S=2,"number"===typeof ua.constant?(ra=ua.constant,da=D=ga=0):(ra=0<ua.constant.length?ua.constant[0]:0,da=1<ua.constant.length?ua.constant[1]:0,D=2<ua.constant.length?ua.constant[2]:0,ga=3<ua.constant.length?ua.constant[3]:0)):(ea=oa(ua.buffer)?T.createStream(34962,ua.buffer):T.getBuffer(ua.buffer),u="type"in ua?sb[ua.type]:ea.dtype,w=!!ua.normalized,ta=ua.size|0,ia=ua.offset|0,F=ua.stride|0,pa=ua.divisor|0);Ia=C.location;E=L[Ia];if(1===S){E.buffer||q.enableVertexAttribArray(Ia);
ta=ta||2;if(E.type!==u||E.size!==ta||E.buffer!==ea||E.normalized!==w||E.offset!==ia||E.stride!==F)q.bindBuffer(34962,ea.buffer),q.vertexAttribPointer(Ia,ta,u,w,F,ia),E.type=u,E.size=ta,E.buffer=ea,E.normalized=w,E.offset=ia,E.stride=F;E.divisor!==pa&&(e.vertexAttribDivisorANGLE(Ia,pa),E.divisor=pa)}else if(E.buffer&&(q.disableVertexAttribArray(Ia),E.buffer=null),E.x!==ra||E.y!==da||E.z!==D||E.w!==ga)q.vertexAttrib4f(Ia,ra,da,D,ga),E.x=ra,E.y=da,E.z=D,E.w=ga;pa=a.fill;q.uniform4f(fa.location,pa[0],
pa[1],pa[2],pa[3]);pa=a.scale;q.uniform2f(A.location,pa[0],pa[1]);pa=a.scaleFract;q.uniform2f(B.location,pa[0],pa[1]);pa=a.translate;q.uniform2f(P.location,pa[0],pa[1]);pa=a.translateFract;q.uniform2f(R.location,pa[0],pa[1]);q.uniform1f(M.location,a.id);q.uniform1f(H.location,a.opacity);pa=N.call(this,d,a,0);(pa=(a=oa(pa))?n.createStream(pa):n.getElements(pa))&&q.bindBuffer(34963,pa.buffer.buffer);if(w=pa?pa.vertCount:-1)ia=g.instances,0<ia?pa?e.drawElementsInstancedANGLE(4,w,pa.type,0<<(pa.type-
5121>>1),ia):e.drawArraysInstancedANGLE(4,0,w,ia):0>ia&&(pa?q.drawElements(4,w,pa.type,0<<(pa.type-5121>>1)):q.drawArrays(4,0,w)),f.dirty=!0,k.setVAO(null),d.viewportWidth=b,d.viewportHeight=x,c&&(y.cpuTime+=performance.now()-z),h&&T.destroyStream(t),ba&&T.destroyStream(ea),a&&n.destroyStream(pa)},scope:function(k,h,m){var q,r,v,x,A,B,N,C,z,E,w,H,R,O,M,L,F,u,da,D,K,Q,l,G,X,p,P,W,U,V,Z,aa,fa,ca,ja,pa,qa,la,ma,Ea,Oa,Na,gb,Zb,vd,dc,Sd,Td,de,Yd,od,kd,sd,md,cd,pc,pd,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,Dd,
wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab;q=k.viewport;r=q.x|0;v=q.y|0;x="width"in q?q.width|0:d.framebufferWidth-r;A="height"in q?q.height|0:d.framebufferHeight-v;B=d.viewportWidth;d.viewportWidth=x;N=d.viewportHeight;d.viewportHeight=A;C=Ia[0];Ia[0]=r;z=Ia[1];Ia[1]=v;E=Ia[2];Ia[2]=x;w=Ia[3];Ia[3]=A;H=ba[0];ba[0]=0;R=ba[1];ba[1]=0;O=ba[2];ba[2]=0;M=ba[3];ba[3]=0;L=I.blend_enable;I.blend_enable=!0;F=Qb[0];
Qb[0]=32774;u=Qb[1];Qb[1]=32774;da=Ha[0];Ha[0]=770;D=Ha[1];Ha[1]=771;K=Ha[2];Ha[2]=773;Q=Ha[3];Ha[3]=1;l=I.depth_enable;I.depth_enable=!1;G=k.viewport;X=G.x|0;p=G.y|0;P="width"in G?G.width|0:d.framebufferWidth-X;W="height"in G?G.height|0:d.framebufferHeight-p;U=$a[0];$a[0]=X;V=$a[1];$a[1]=p;Z=$a[2];$a[2]=P;aa=$a[3];$a[3]=W;fa=I.scissor_enable;I.scissor_enable=!0;ca=I.stencil_enable;I.stencil_enable=!1;if(ja=f.profile)pa=performance.now(),y.count++;qa=e.call(this,d,k,m);la=null;la=(ma=oa(qa))?n.createStream(qa):
n.getElements(qa);Ea=g.elements;g.elements=la;Oa=g.offset;g.offset=0;Na=la?la.vertCount:-1;gb=g.count;g.count=Na;Zb=g.primitive;g.primitive=4;vd=k.fill;dc=c[14];c[14]=vd;Sd=k.id;Td=c[31];c[31]=Sd;de=k.opacity;Yd=c[10];c[10]=de;od=d.pixelRatio;kd=c[34];c[34]=od;sd=k.scale;md=c[6];c[6]=sd;cd=k.scaleFract;pc=c[7];c[7]=cd;pd=k.translate;fd=c[8];c[8]=pd;Mc=k.translateFract;rc=c[9];c[9]=Mc;ab=b.call(this,d,k,m);Jc=c[3];c[3]=ab;ha.buffer=k.positionBuffer;Eb=!1;qc=null;Ta=0;Kc=!1;sc=bc=0;Dd=1;wd=0;Bc=5126;
La=Rc=Gc=Xb=0;oa(ha)?(Eb=!0,qc=T.createStream(34962,ha),Bc=qc.dtype):(qc=T.getBuffer(ha))?Bc=qc.dtype:"constant"in ha?(Dd=2,"number"===typeof ha.constant?(Gc=ha.constant,Rc=La=Xb=0):(Gc=0<ha.constant.length?ha.constant[0]:0,Rc=1<ha.constant.length?ha.constant[1]:0,La=2<ha.constant.length?ha.constant[2]:0,Xb=3<ha.constant.length?ha.constant[3]:0)):(qc=oa(ha.buffer)?T.createStream(34962,ha.buffer):T.getBuffer(ha.buffer),Bc="type"in ha?sb[ha.type]:qc.dtype,Kc=!!ha.normalized,sc=ha.size|0,bc=ha.offset|
0,wd=ha.stride|0,Ta=ha.divisor|0);ub=t.buffer;t.buffer=qc;Wa=t.divisor;t.divisor=Ta;va=t.normalized;t.normalized=Kc;rd=t.offset;t.offset=bc;Bb=t.size;t.size=sc;Sa=t.state;t.state=Dd;Gb=t.stride;t.stride=wd;cb=t.type;t.type=Bc;Yb=t.w;t.w=Xb;Rb=t.x;t.x=Gc;ae=t.y;t.y=Rc;ac=t.z;t.z=La;ua.buffer=k.positionFractBuffer;Sb=!1;Ad=null;Tb=0;Ma=!1;vb=nb=0;hb=1;Pa=0;oc=5126;kc=db=dd=Ib=0;oa(ua)?(Sb=!0,Ad=T.createStream(34962,ua),oc=Ad.dtype):(Ad=T.getBuffer(ua))?oc=Ad.dtype:"constant"in ua?(hb=2,"number"===typeof ua.constant?
(dd=ua.constant,db=kc=Ib=0):(dd=0<ua.constant.length?ua.constant[0]:0,db=1<ua.constant.length?ua.constant[1]:0,kc=2<ua.constant.length?ua.constant[2]:0,Ib=3<ua.constant.length?ua.constant[3]:0)):(Ad=oa(ua.buffer)?T.createStream(34962,ua.buffer):T.getBuffer(ua.buffer),oc="type"in ua?sb[ua.type]:Ad.dtype,Ma=!!ua.normalized,vb=ua.size|0,nb=ua.offset|0,Pa=ua.stride|0,Tb=ua.divisor|0);Hc=a.buffer;a.buffer=Ad;mc=a.divisor;a.divisor=Tb;jb=a.normalized;a.normalized=Ma;kb=a.offset;a.offset=nb;sa=a.size;a.size=
vb;ob=a.state;a.state=hb;wa=a.stride;a.stride=Pa;Ua=a.type;a.type=oc;bb=a.w;a.w=Ib;Aa=a.x;a.x=dd;eb=a.y;a.y=db;Ja=a.z;a.z=kc;Cb=ea.vert;ea.vert=42;Ab=ea.frag;ea.frag=41;f.dirty=!0;h(d,k,m);d.viewportWidth=B;d.viewportHeight=N;Ia[0]=C;Ia[1]=z;Ia[2]=E;Ia[3]=w;ba[0]=H;ba[1]=R;ba[2]=O;ba[3]=M;I.blend_enable=L;Qb[0]=F;Qb[1]=u;Ha[0]=da;Ha[1]=D;Ha[2]=K;Ha[3]=Q;I.depth_enable=l;$a[0]=U;$a[1]=V;$a[2]=Z;$a[3]=aa;I.scissor_enable=fa;I.stencil_enable=ca;ja&&(y.cpuTime+=performance.now()-pa);ma&&n.destroyStream(la);
g.elements=Ea;g.offset=Oa;g.count=gb;g.primitive=Zb;c[14]=dc;c[31]=Td;c[10]=Yd;c[34]=kd;c[6]=md;c[7]=pc;c[8]=fd;c[9]=rc;c[3]=Jc;Eb&&T.destroyStream(qc);t.buffer=ub;t.divisor=Wa;t.normalized=va;t.offset=rd;t.size=Bb;t.state=Sa;t.stride=Gb;t.type=cb;t.w=Yb;t.x=Rb;t.y=ae;t.z=ac;Sb&&T.destroyStream(Ad);a.buffer=Hc;a.divisor=mc;a.normalized=jb;a.offset=kb;a.size=sa;a.state=ob;a.stride=wa;a.type=Ua;a.w=bb;a.x=Aa;a.y=eb;a.z=Ja;ea.vert=Cb;ea.frag=Ab;f.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(h,
y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,R,L,T,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Ha,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua,Wb,nc,jc,qd,xc){var Y,J,ka,Ca,tb,Lc,Wc,E,w,ia,ta,S,ga,ra,F,u,da,D,xa,na,l,ic,X,p,Hb,zb,Ve,me,te,fe,Kd,Ee,nd,ie,se,Id,Cd,$d,Xd;Y=h.attributes;J=h.buffer;ka=h.context;Ca=h.current;tb=h.draw;Lc=h.elements;Wc=h.extensions;E=h.framebuffer;w=h.gl;ia=h.isBufferArgs;ta=h.next;S=h.shader;ga=h.uniforms;ra=h.vao;F=ta.blend_color;u=Ca.blend_color;da=ta.blend_equation;D=
Ca.blend_equation;xa=ta.blend_func;na=Ca.blend_func;l=ta.colorMask;ic=Ca.colorMask;X=ta.depth_range;p=Ca.depth_range;Hb=ta.polygonOffset_offset;zb=Ca.polygonOffset_offset;Ve=ta.sample_coverage;me=Ca.sample_coverage;te=ta.scissor_box;fe=Ca.scissor_box;Kd=ta.stencil_func;Ee=Ca.stencil_func;nd=ta.stencil_opBack;ie=Ca.stencil_opBack;se=ta.stencil_opFront;Id=Ca.stencil_opFront;Cd=ta.viewport;$d=Ca.viewport;Xd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,b){var c,d,e,g,f,k;c=E.next;c!==E.cur&&(c?w.bindFramebuffer(36160,c.framebuffer):w.bindFramebuffer(36160,null),E.cur=c);if(Ca.dirty){var h,m,n,q,t,r,x,A,B,N,F,C,z,H,R,I,M,L,P,S,V,ga,aa,fa,ba,T,ea,pa,va,xa,oa,Sa,Gb,cb;h=ta.dither;h!==Ca.dither&&(h?w.enable(3024):w.disable(3024),Ca.dither=h);m=da[0];n=da[1];if(m!==D[0]||n!==D[1])w.blendEquationSeparate(m,n),D[0]=m,D[1]=n;q=ta.depth_func;q!==Ca.depth_func&&(w.depthFunc(q),Ca.depth_func=q);t=X[0];r=X[1];if(t!==p[0]||r!==p[1])w.depthRange(t,
r),p[0]=t,p[1]=r;x=ta.depth_mask;x!==Ca.depth_mask&&(w.depthMask(x),Ca.depth_mask=x);A=l[0];B=l[1];N=l[2];F=l[3];if(A!==ic[0]||B!==ic[1]||N!==ic[2]||F!==ic[3])w.colorMask(A,B,N,F),ic[0]=A,ic[1]=B,ic[2]=N,ic[3]=F;C=ta.cull_enable;C!==Ca.cull_enable&&(C?w.enable(2884):w.disable(2884),Ca.cull_enable=C);z=ta.cull_face;z!==Ca.cull_face&&(w.cullFace(z),Ca.cull_face=z);H=ta.frontFace;H!==Ca.frontFace&&(w.frontFace(H),Ca.frontFace=H);R=ta.lineWidth;R!==Ca.lineWidth&&(w.lineWidth(R),Ca.lineWidth=R);I=ta.polygonOffset_enable;
I!==Ca.polygonOffset_enable&&(I?w.enable(32823):w.disable(32823),Ca.polygonOffset_enable=I);M=Hb[0];L=Hb[1];if(M!==zb[0]||L!==zb[1])w.polygonOffset(M,L),zb[0]=M,zb[1]=L;P=ta.sample_alpha;P!==Ca.sample_alpha&&(P?w.enable(32926):w.disable(32926),Ca.sample_alpha=P);S=ta.sample_enable;S!==Ca.sample_enable&&(S?w.enable(32928):w.disable(32928),Ca.sample_enable=S);V=Ve[0];ga=Ve[1];if(V!==me[0]||ga!==me[1])w.sampleCoverage(V,ga),me[0]=V,me[1]=ga;aa=ta.stencil_mask;aa!==Ca.stencil_mask&&(w.stencilMask(aa),
Ca.stencil_mask=aa);fa=Kd[0];ba=Kd[1];T=Kd[2];if(fa!==Ee[0]||ba!==Ee[1]||T!==Ee[2])w.stencilFunc(fa,ba,T),Ee[0]=fa,Ee[1]=ba,Ee[2]=T;ea=se[0];pa=se[1];va=se[2];xa=se[3];if(ea!==Id[0]||pa!==Id[1]||va!==Id[2]||xa!==Id[3])w.stencilOpSeparate(ea,pa,va,xa),Id[0]=ea,Id[1]=pa,Id[2]=va,Id[3]=xa;oa=nd[0];Sa=nd[1];Gb=nd[2];cb=nd[3];if(oa!==ie[0]||Sa!==ie[1]||Gb!==ie[2]||cb!==ie[3])w.stencilOpSeparate(oa,Sa,Gb,cb),ie[0]=oa,ie[1]=Sa,ie[2]=Gb,ie[3]=cb}w.blendColor(0,0,0,1);u[0]=0;u[1]=0;u[2]=0;u[3]=1;w.enable(3042);
Ca.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;w.disable(2929);Ca.depth_enable=!1;w.enable(3089);Ca.scissor_enable=!0;w.disable(2960);Ca.stencil_enable=!1;if(d=Ca.profile)e=performance.now(),y.count+=b;w.useProgram(la.program);g=Wc.angle_instanced_arrays;var Yb;ra.setVAO(null);w.uniform1i(v.location,!1);w.uniform1i(dc.location,qa.bind());Yb=tb.instances;for(f=0;f<b;++f){k=a[f];var Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,
bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,Jd,id,Yc,Cd,Ld,te,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ye,Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,of,Xe,Qe,Ne,We,Ue,Re,Se,Qd,Vd,Te,Wd,hf,bf,ef,ff,gf,mf,jf,nf,Af,Bf,Oe,Ae,kf,lf,Cf,Ff,yf,Df,Ef,uf,vf,sf,wf,xf,Hf,
Jf,Kf,Lf,qf,Qf,Gf,rf,cg,Rf,Sf;Rb=k.viewport;ae=Rb.x|0;ac=Rb.y|0;Sb="width"in Rb?Rb.width|0:ka.framebufferWidth-ae;Ad="height"in Rb?Rb.height|0:ka.framebufferHeight-ac;Tb=ka.viewportWidth;ka.viewportWidth=Sb;Ma=ka.viewportHeight;ka.viewportHeight=Ad;w.viewport(ae,ac,Sb,Ad);$d[0]=ae;$d[1]=ac;$d[2]=Sb;$d[3]=Ad;nb=k.viewport;vb=nb.x|0;hb=nb.y|0;Pa="width"in nb?nb.width|0:ka.framebufferWidth-vb;oc="height"in nb?nb.height|0:ka.framebufferHeight-hb;w.scissor(vb,hb,Pa,oc);fe[0]=vb;fe[1]=hb;fe[2]=Pa;fe[3]=
oc;Ib=Ha.call(this,ka,k,f);dd=!1;db=null;kc=0;Hc=!1;jb=mc=0;kb=1;sa=0;ob=5126;Aa=bb=Ua=wa=0;ia(Ib)?(dd=!0,db=J.createStream(34962,Ib),ob=db.dtype):(db=J.getBuffer(Ib))?ob=db.dtype:"constant"in Ib?(kb=2,"number"===typeof Ib.constant?(Ua=Ib.constant,bb=Aa=wa=0):(Ua=0<Ib.constant.length?Ib.constant[0]:0,bb=1<Ib.constant.length?Ib.constant[1]:0,Aa=2<Ib.constant.length?Ib.constant[2]:0,wa=3<Ib.constant.length?Ib.constant[3]:0)):(db=ia(Ib.buffer)?J.createStream(34962,Ib.buffer):J.getBuffer(Ib.buffer),ob=
"type"in Ib?Xd[Ib.type]:db.dtype,Hc=!!Ib.normalized,jb=Ib.size|0,mc=Ib.offset|0,sa=Ib.stride|0,kc=Ib.divisor|0);eb=nc.location;Ja=Y[eb];if(1===kb){Ja.buffer||w.enableVertexAttribArray(eb);Cb=jb||1;if(Ja.type!==ob||Ja.size!==Cb||Ja.buffer!==db||Ja.normalized!==Hc||Ja.offset!==mc||Ja.stride!==sa)w.bindBuffer(34962,db.buffer),w.vertexAttribPointer(eb,Cb,ob,Hc,sa,mc),Ja.type=ob,Ja.size=Cb,Ja.buffer=db,Ja.normalized=Hc,Ja.offset=mc,Ja.stride=sa;Ja.divisor!==kc&&(g.vertexAttribDivisorANGLE(eb,kc),Ja.divisor=
kc)}else if(Ja.buffer&&(w.disableVertexAttribArray(eb),Ja.buffer=null),Ja.x!==Ua||Ja.y!==bb||Ja.z!==Aa||Ja.w!==wa)w.vertexAttrib4f(eb,Ua,bb,Aa,wa),Ja.x=Ua,Ja.y=bb,Ja.z=Aa,Ja.w=wa;Ab=gb.call(this,ka,k,f);Ra=!1;yc=null;Jb=0;Za=!1;ya=Ub=0;Be=1;Ka=0;Nb=5126;ec=za=ib=fb=0;ia(Ab)?(Ra=!0,yc=J.createStream(34962,Ab),Nb=yc.dtype):(yc=J.getBuffer(Ab))?Nb=yc.dtype:"constant"in Ab?(Be=2,"number"===typeof Ab.constant?(ib=Ab.constant,za=ec=fb=0):(ib=0<Ab.constant.length?Ab.constant[0]:0,za=1<Ab.constant.length?
Ab.constant[1]:0,ec=2<Ab.constant.length?Ab.constant[2]:0,fb=3<Ab.constant.length?Ab.constant[3]:0)):(yc=ia(Ab.buffer)?J.createStream(34962,Ab.buffer):J.getBuffer(Ab.buffer),Nb="type"in Ab?Xd[Ab.type]:yc.dtype,Za=!!Ab.normalized,ya=Ab.size|0,Ub=Ab.offset|0,Ka=Ab.stride|0,Jb=Ab.divisor|0);Da=qd.location;pb=Y[Da];if(1===Be){pb.buffer||w.enableVertexAttribArray(Da);qb=ya||1;if(pb.type!==Nb||pb.size!==qb||pb.buffer!==yc||pb.normalized!==Za||pb.offset!==Ub||pb.stride!==Ka)w.bindBuffer(34962,yc.buffer),
w.vertexAttribPointer(Da,qb,Nb,Za,Ka,Ub),pb.type=Nb,pb.size=qb,pb.buffer=yc,pb.normalized=Za,pb.offset=Ub,pb.stride=Ka;pb.divisor!==Jb&&(g.vertexAttribDivisorANGLE(Da,Jb),pb.divisor=Jb)}else if(pb.buffer&&(w.disableVertexAttribArray(Da),pb.buffer=null),pb.x!==ib||pb.y!==za||pb.z!==ec||pb.w!==fb)w.vertexAttrib4f(Da,ib,za,ec,fb),pb.x=ib,pb.y=za,pb.z=ec,pb.w=fb;Xa=wc.call(this,ka,k,f);Ya=!1;lc=null;ad=0;uc=!1;Lb=Va=0;bd=1;Fa=0;zc=5126;wb=lb=Ba=Qa=0;ia(Xa)?(Ya=!0,lc=J.createStream(34962,Xa),zc=lc.dtype):
(lc=J.getBuffer(Xa))?zc=lc.dtype:"constant"in Xa?(bd=2,"number"===typeof Xa.constant?(Ba=Xa.constant,lb=wb=Qa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?Xa.constant[1]:0,wb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(lc=ia(Xa.buffer)?J.createStream(34962,Xa.buffer):J.getBuffer(Xa.buffer),zc="type"in Xa?Xd[Xa.type]:lc.dtype,uc=!!Xa.normalized,Lb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,ad=Xa.divisor|0);Db=jc.location;rb=Y[Db];if(1===bd){rb.buffer||
w.enableVertexAttribArray(Db);vc=Lb||1;if(rb.type!==zc||rb.size!==vc||rb.buffer!==lc||rb.normalized!==uc||rb.offset!==Va||rb.stride!==Fa)w.bindBuffer(34962,lc.buffer),w.vertexAttribPointer(Db,vc,zc,uc,Fa,Va),rb.type=zc,rb.size=vc,rb.buffer=lc,rb.normalized=uc,rb.offset=Va,rb.stride=Fa;rb.divisor!==ad&&(g.vertexAttribDivisorANGLE(Db,ad),rb.divisor=ad)}else if(rb.buffer&&(w.disableVertexAttribArray(Db),rb.buffer=null),rb.x!==Ba||rb.y!==lb||rb.z!==wb||rb.w!==Qa)w.vertexAttrib4f(Db,Ba,lb,wb,Qa),rb.x=
Ba,rb.y=lb,rb.z=wb,rb.w=Qa;xb=ma.call(this,ka,k,f);td=!1;tc=null;ue=0;Nc=!1;ud=gd=0;Vb=1;cc=0;Ob=5126;yb=mb=$b=Ga=0;ia(xb)?(td=!0,tc=J.createStream(34962,xb),Ob=tc.dtype):(tc=J.getBuffer(xb))?Ob=tc.dtype:"constant"in xb?(Vb=2,"number"===typeof xb.constant?($b=xb.constant,mb=yb=Ga=0):($b=0<xb.constant.length?xb.constant[0]:0,mb=1<xb.constant.length?xb.constant[1]:0,yb=2<xb.constant.length?xb.constant[2]:0,Ga=3<xb.constant.length?xb.constant[3]:0)):(tc=ia(xb.buffer)?J.createStream(34962,xb.buffer):
J.getBuffer(xb.buffer),Ob="type"in xb?Xd[xb.type]:tc.dtype,Nc=!!xb.normalized,ud=xb.size|0,gd=xb.offset|0,cc=xb.stride|0,ue=xb.divisor|0);Mb=xc.location;Pb=Y[Mb];if(1===Vb){Pb.buffer||w.enableVertexAttribArray(Mb);fc=ud||1;if(Pb.type!==Ob||Pb.size!==fc||Pb.buffer!==tc||Pb.normalized!==Nc||Pb.offset!==gd||Pb.stride!==cc)w.bindBuffer(34962,tc.buffer),w.vertexAttribPointer(Mb,fc,Ob,Nc,cc,gd),Pb.type=Ob,Pb.size=fc,Pb.buffer=tc,Pb.normalized=Nc,Pb.offset=gd,Pb.stride=cc;Pb.divisor!==ue&&(g.vertexAttribDivisorANGLE(Mb,
ue),Pb.divisor=ue)}else if(Pb.buffer&&(w.disableVertexAttribArray(Mb),Pb.buffer=null),Pb.x!==$b||Pb.y!==mb||Pb.z!==yb||Pb.w!==Ga)w.vertexAttrib4f(Mb,$b,mb,yb,Ga),Pb.x=$b,Pb.y=mb,Pb.z=yb,Pb.w=Ga;hc=Na.call(this,ka,k,f);Sc=!1;Cc=null;Dc=0;Ec=!1;Zc=Oc=0;Tc=1;Pc=0;Kb=5126;Uc=Ic=Qc=Fb=0;ia(hc)?(Sc=!0,Cc=J.createStream(34962,hc),Kb=Cc.dtype):(Cc=J.getBuffer(hc))?Kb=Cc.dtype:"constant"in hc?(Tc=2,"number"===typeof hc.constant?(Qc=hc.constant,Ic=Uc=Fb=0):(Qc=0<hc.constant.length?hc.constant[0]:0,Ic=1<hc.constant.length?
hc.constant[1]:0,Uc=2<hc.constant.length?hc.constant[2]:0,Fb=3<hc.constant.length?hc.constant[3]:0)):(Cc=ia(hc.buffer)?J.createStream(34962,hc.buffer):J.getBuffer(hc.buffer),Kb="type"in hc?Xd[hc.type]:Cc.dtype,Ec=!!hc.normalized,Zc=hc.size|0,Oc=hc.offset|0,Pc=hc.stride|0,Dc=hc.divisor|0);gc=ha.location;Xc=Y[gc];if(1===Tc){Xc.buffer||w.enableVertexAttribArray(gc);yd=Zc||1;if(Xc.type!==Kb||Xc.size!==yd||Xc.buffer!==Cc||Xc.normalized!==Ec||Xc.offset!==Oc||Xc.stride!==Pc)w.bindBuffer(34962,Cc.buffer),
w.vertexAttribPointer(gc,yd,Kb,Ec,Pc,Oc),Xc.type=Kb,Xc.size=yd,Xc.buffer=Cc,Xc.normalized=Ec,Xc.offset=Oc,Xc.stride=Pc;Xc.divisor!==Dc&&(g.vertexAttribDivisorANGLE(gc,Dc),Xc.divisor=Dc)}else if(Xc.buffer&&(w.disableVertexAttribArray(gc),Xc.buffer=null),Xc.x!==Qc||Xc.y!==Ic||Xc.z!==Uc||Xc.w!==Fb)w.vertexAttrib4f(gc,Qc,Ic,Uc,Fb),Xc.x=Qc,Xc.y=Ic,Xc.z=Uc,Xc.w=Fb;Jd=Z.call(this,ka,k,f);id=!1;Yc=null;Cd=0;Ld=!1;re=te=0;Ud=1;Gd=0;Ed=5126;hd=ld=Fc=ed=0;ia(Jd)?(id=!0,Yc=J.createStream(34962,Jd),Ed=Yc.dtype):
(Yc=J.getBuffer(Jd))?Ed=Yc.dtype:"constant"in Jd?(Ud=2,"number"===typeof Jd.constant?(Fc=Jd.constant,ld=hd=ed=0):(Fc=0<Jd.constant.length?Jd.constant[0]:0,ld=1<Jd.constant.length?Jd.constant[1]:0,hd=2<Jd.constant.length?Jd.constant[2]:0,ed=3<Jd.constant.length?Jd.constant[3]:0)):(Yc=ia(Jd.buffer)?J.createStream(34962,Jd.buffer):J.getBuffer(Jd.buffer),Ed="type"in Jd?Xd[Jd.type]:Yc.dtype,Ld=!!Jd.normalized,re=Jd.size|0,te=Jd.offset|0,Gd=Jd.stride|0,Cd=Jd.divisor|0);$c=$a.location;jd=Y[$c];if(1===Ud){jd.buffer||
w.enableVertexAttribArray($c);zd=re||1;if(jd.type!==Ed||jd.size!==zd||jd.buffer!==Yc||jd.normalized!==Ld||jd.offset!==te||jd.stride!==Gd)w.bindBuffer(34962,Yc.buffer),w.vertexAttribPointer($c,zd,Ed,Ld,Gd,te),jd.type=Ed,jd.size=zd,jd.buffer=Yc,jd.normalized=Ld,jd.offset=te,jd.stride=Gd;jd.divisor!==Cd&&(g.vertexAttribDivisorANGLE($c,Cd),jd.divisor=Cd)}else if(jd.buffer&&(w.disableVertexAttribArray($c),jd.buffer=null),jd.x!==Fc||jd.y!==ld||jd.z!==hd||jd.w!==ed)w.vertexAttrib4f($c,Fc,ld,hd,ed),jd.x=
Fc,jd.y=ld,jd.z=hd,jd.w=ed;Bd=K.call(this,ka,k,f);we=!1;ye=null;ve=0;he=!1;ee=ge=0;oe=1;be=0;je=5126;le=pe=Vc=Ac=0;ia(Bd)?(we=!0,ye=J.createStream(34962,Bd),je=ye.dtype):(ye=J.getBuffer(Bd))?je=ye.dtype:"constant"in Bd?(oe=2,"number"===typeof Bd.constant?(Vc=Bd.constant,pe=le=Ac=0):(Vc=0<Bd.constant.length?Bd.constant[0]:0,pe=1<Bd.constant.length?Bd.constant[1]:0,le=2<Bd.constant.length?Bd.constant[2]:0,Ac=3<Bd.constant.length?Bd.constant[3]:0)):(ye=ia(Bd.buffer)?J.createStream(34962,Bd.buffer):J.getBuffer(Bd.buffer),
je="type"in Bd?Xd[Bd.type]:ye.dtype,he=!!Bd.normalized,ee=Bd.size|0,ge=Bd.offset|0,be=Bd.stride|0,ve=Bd.divisor|0);Fd=Q.location;Md=Y[Fd];if(1===oe){Md.buffer||w.enableVertexAttribArray(Fd);Nd=ee||4;if(Md.type!==je||Md.size!==Nd||Md.buffer!==ye||Md.normalized!==he||Md.offset!==ge||Md.stride!==be)w.bindBuffer(34962,ye.buffer),w.vertexAttribPointer(Fd,Nd,je,he,be,ge),Md.type=je,Md.size=Nd,Md.buffer=ye,Md.normalized=he,Md.offset=ge,Md.stride=be;Md.divisor!==ve&&(g.vertexAttribDivisorANGLE(Fd,ve),Md.divisor=
ve)}else if(Md.buffer&&(w.disableVertexAttribArray(Fd),Md.buffer=null),Md.x!==Vc||Md.y!==pe||Md.z!==le||Md.w!==Ac)w.vertexAttrib4f(Fd,Vc,pe,le,Ac),Md.x=Vc,Md.y=pe,Md.z=le,Md.w=Ac;Od=O.call(this,ka,k,f);ke=!1;Ge=null;xe=0;ne=!1;Pe=Ye=0;Me=1;qe=0;Ce=5126;De=Je=Ie=He=0;ia(Od)?(ke=!0,Ge=J.createStream(34962,Od),Ce=Ge.dtype):(Ge=J.getBuffer(Od))?Ce=Ge.dtype:"constant"in Od?(Me=2,"number"===typeof Od.constant?(Ie=Od.constant,Je=De=He=0):(Ie=0<Od.constant.length?Od.constant[0]:0,Je=1<Od.constant.length?
Od.constant[1]:0,De=2<Od.constant.length?Od.constant[2]:0,He=3<Od.constant.length?Od.constant[3]:0)):(Ge=ia(Od.buffer)?J.createStream(34962,Od.buffer):J.getBuffer(Od.buffer),Ce="type"in Od?Xd[Od.type]:Ge.dtype,ne=!!Od.normalized,Pe=Od.size|0,Ye=Od.offset|0,qe=Od.stride|0,xe=Od.divisor|0);Hd=Zb.location;Rd=Y[Hd];if(1===Me){Rd.buffer||w.enableVertexAttribArray(Hd);Zd=Pe||4;if(Rd.type!==Ce||Rd.size!==Zd||Rd.buffer!==Ge||Rd.normalized!==ne||Rd.offset!==Ye||Rd.stride!==qe)w.bindBuffer(34962,Ge.buffer),
w.vertexAttribPointer(Hd,Zd,Ce,ne,qe,Ye),Rd.type=Ce,Rd.size=Zd,Rd.buffer=Ge,Rd.normalized=ne,Rd.offset=Ye,Rd.stride=qe;Rd.divisor!==xe&&(g.vertexAttribDivisorANGLE(Hd,xe),Rd.divisor=xe)}else if(Rd.buffer&&(w.disableVertexAttribArray(Hd),Rd.buffer=null),Rd.x!==Ie||Rd.y!==Je||Rd.z!==De||Rd.w!==He)w.vertexAttrib4f(Hd,Ie,Je,De,He),Rd.x=Ie,Rd.y=Je,Rd.z=De,Rd.w=He;ce=U.call(this,ka,k,f);Ke=!1;xd=null;Pd=0;ze=!1;of=Le=0;Xe=1;Qe=0;Ne=5126;Se=Re=Ue=We=0;ia(ce)?(Ke=!0,xd=J.createStream(34962,ce),Ne=xd.dtype):
(xd=J.getBuffer(ce))?Ne=xd.dtype:"constant"in ce?(Xe=2,"number"===typeof ce.constant?(Ue=ce.constant,Re=Se=We=0):(Ue=0<ce.constant.length?ce.constant[0]:0,Re=1<ce.constant.length?ce.constant[1]:0,Se=2<ce.constant.length?ce.constant[2]:0,We=3<ce.constant.length?ce.constant[3]:0)):(xd=ia(ce.buffer)?J.createStream(34962,ce.buffer):J.getBuffer(ce.buffer),Ne="type"in ce?Xd[ce.type]:xd.dtype,ze=!!ce.normalized,of=ce.size|0,Le=ce.offset|0,Qe=ce.stride|0,Pd=ce.divisor|0);Qd=ja.location;Vd=Y[Qd];if(1===Xe){Vd.buffer||
w.enableVertexAttribArray(Qd);Te=of||1;if(Vd.type!==Ne||Vd.size!==Te||Vd.buffer!==xd||Vd.normalized!==ze||Vd.offset!==Le||Vd.stride!==Qe)w.bindBuffer(34962,xd.buffer),w.vertexAttribPointer(Qd,Te,Ne,ze,Qe,Le),Vd.type=Ne,Vd.size=Te,Vd.buffer=xd,Vd.normalized=ze,Vd.offset=Le,Vd.stride=Qe;Vd.divisor!==Pd&&(g.vertexAttribDivisorANGLE(Qd,Pd),Vd.divisor=Pd)}else if(Vd.buffer&&(w.disableVertexAttribArray(Qd),Vd.buffer=null),Vd.x!==Ue||Vd.y!==Re||Vd.z!==Se||Vd.w!==We)w.vertexAttrib4f(Qd,Ue,Re,Se,We),Vd.x=
Ue,Vd.y=Re,Vd.z=Se,Vd.w=We;Wd=ka.pixelRatio;f&&hf===Wd||(hf=Wd,w.uniform1f(Ia.location,Wd));bf=k.scale;ef=bf[0];gf=bf[1];f&&ff===ef&&mf===gf||(ff=ef,mf=gf,w.uniform2f(W.location,ef,gf));jf=k.scaleFract;nf=jf[0];Bf=jf[1];f&&Af===nf&&Oe===Bf||(Af=nf,Oe=Bf,w.uniform2f(sb.location,nf,Bf));Ae=k.translate;kf=Ae[0];Cf=Ae[1];f&&lf===kf&&Ff===Cf||(lf=kf,Ff=Cf,w.uniform2f(ua.location,kf,Cf));yf=k.translateFract;Df=yf[0];uf=yf[1];f&&Ef===Df&&vf===uf||(Ef=Df,vf=uf,w.uniform2f(Wb.location,Df,uf));sf=G.call(this,
ka,k,f);wf=sf[0];Hf=sf[1];f&&xf===wf&&Jf===Hf||(xf=wf,Jf=Hf,w.uniform2f(Oa.location,wf,Hf));Kf=k.opacity;f&&Lf===Kf||(Lf=Kf,w.uniform1f(Ea.location,Kf));(qf=k.markerTexture)&&"framebuffer"===qf._reglType&&(qf=qf.color[0]);Qf=qf._texture;w.uniform1i(ca.location,Qf.bind());Gf=k.elements;rf=null;(rf=(cg=ia(Gf))?Lc.createStream(Gf):Lc.getElements(Gf))&&w.bindBuffer(34963,rf.buffer.buffer);Rf=k.offset;if(Sf=k.count)0<Yb?rf?g.drawElementsInstancedANGLE(0,Sf,rf.type,Rf<<(rf.type-5121>>1),Yb):g.drawArraysInstancedANGLE(0,
Rf,Sf,Yb):0>Yb&&(rf?w.drawElements(0,Sf,rf.type,Rf<<(rf.type-5121>>1)):w.drawArrays(0,Rf,Sf)),ka.viewportWidth=Tb,ka.viewportHeight=Ma,dd&&J.destroyStream(db),Ra&&J.destroyStream(yc),Ya&&J.destroyStream(lc),td&&J.destroyStream(tc),Sc&&J.destroyStream(Cc),id&&J.destroyStream(Yc),we&&J.destroyStream(ye),ke&&J.destroyStream(Ge),Ke&&J.destroyStream(xd),Qf.unbind(),cg&&Lc.destroyStream(rf)}qa.unbind();Ca.dirty=!0;ra.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(c){var d,g,f,k,h,n,q,A,
B,F,C,R,I,O,L,G,K,P,S,V,U,ga,aa,Z,ba,T,ea,xa,oa,qa,la,ma,La,ub,Wa,va,Na,Bb,Sa,Gb,cb,Yb,Rb,Ha,ac,Sb,gb,Tb,Ma,nb,vb,hb,Pa,oc,Ib,Qb,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,wc,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,Cd,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,Jd,id,Yc,te,Ld,zf,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ye,Pe,
Me,qe;d=E.next;d!==E.cur&&(d?w.bindFramebuffer(36160,d.framebuffer):w.bindFramebuffer(36160,null),E.cur=d);if(Ca.dirty){var Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,Wd,Xe,Qe,Ne,We,Ue,Re,Se,Qd,Vd,Te,pf,hf,bf,ef,ff,gf,mf,jf,nf;Ce=ta.dither;Ce!==Ca.dither&&(Ce?w.enable(3024):w.disable(3024),Ca.dither=Ce);He=da[0];Ie=da[1];if(He!==D[0]||Ie!==D[1])w.blendEquationSeparate(He,Ie),D[0]=He,D[1]=Ie;Je=ta.depth_func;Je!==Ca.depth_func&&(w.depthFunc(Je),Ca.depth_func=Je);De=X[0];Hd=X[1];if(De!==p[0]||Hd!==p[1])w.depthRange(De,
Hd),p[0]=De,p[1]=Hd;Rd=ta.depth_mask;Rd!==Ca.depth_mask&&(w.depthMask(Rd),Ca.depth_mask=Rd);Zd=l[0];ce=l[1];Ke=l[2];xd=l[3];if(Zd!==ic[0]||ce!==ic[1]||Ke!==ic[2]||xd!==ic[3])w.colorMask(Zd,ce,Ke,xd),ic[0]=Zd,ic[1]=ce,ic[2]=Ke,ic[3]=xd;Pd=ta.cull_enable;Pd!==Ca.cull_enable&&(Pd?w.enable(2884):w.disable(2884),Ca.cull_enable=Pd);ze=ta.cull_face;ze!==Ca.cull_face&&(w.cullFace(ze),Ca.cull_face=ze);Le=ta.frontFace;Le!==Ca.frontFace&&(w.frontFace(Le),Ca.frontFace=Le);Wd=ta.lineWidth;Wd!==Ca.lineWidth&&(w.lineWidth(Wd),
Ca.lineWidth=Wd);Xe=ta.polygonOffset_enable;Xe!==Ca.polygonOffset_enable&&(Xe?w.enable(32823):w.disable(32823),Ca.polygonOffset_enable=Xe);Qe=Hb[0];Ne=Hb[1];if(Qe!==zb[0]||Ne!==zb[1])w.polygonOffset(Qe,Ne),zb[0]=Qe,zb[1]=Ne;We=ta.sample_alpha;We!==Ca.sample_alpha&&(We?w.enable(32926):w.disable(32926),Ca.sample_alpha=We);Ue=ta.sample_enable;Ue!==Ca.sample_enable&&(Ue?w.enable(32928):w.disable(32928),Ca.sample_enable=Ue);Re=Ve[0];Se=Ve[1];if(Re!==me[0]||Se!==me[1])w.sampleCoverage(Re,Se),me[0]=Re,me[1]=
Se;Qd=ta.stencil_mask;Qd!==Ca.stencil_mask&&(w.stencilMask(Qd),Ca.stencil_mask=Qd);Vd=Kd[0];Te=Kd[1];pf=Kd[2];if(Vd!==Ee[0]||Te!==Ee[1]||pf!==Ee[2])w.stencilFunc(Vd,Te,pf),Ee[0]=Vd,Ee[1]=Te,Ee[2]=pf;hf=se[0];bf=se[1];ef=se[2];ff=se[3];if(hf!==Id[0]||bf!==Id[1]||ef!==Id[2]||ff!==Id[3])w.stencilOpSeparate(hf,bf,ef,ff),Id[0]=hf,Id[1]=bf,Id[2]=ef,Id[3]=ff;gf=nd[0];mf=nd[1];jf=nd[2];nf=nd[3];if(gf!==ie[0]||mf!==ie[1]||jf!==ie[2]||nf!==ie[3])w.stencilOpSeparate(gf,mf,jf,nf),ie[0]=gf,ie[1]=mf,ie[2]=jf,ie[3]=
nf}g=c.viewport;f=g.x|0;k=g.y|0;h="width"in g?g.width|0:ka.framebufferWidth-f;n="height"in g?g.height|0:ka.framebufferHeight-k;q=ka.viewportWidth;ka.viewportWidth=h;A=ka.viewportHeight;ka.viewportHeight=n;w.viewport(f,k,h,n);$d[0]=f;$d[1]=k;$d[2]=h;$d[3]=n;w.blendColor(0,0,0,1);u[0]=0;u[1]=0;u[2]=0;u[3]=1;w.enable(3042);Ca.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;w.disable(2929);Ca.depth_enable=!1;B=c.viewport;F=B.x|0;C=B.y|0;R="width"in B?B.width|0:
ka.framebufferWidth-F;I="height"in B?B.height|0:ka.framebufferHeight-C;w.scissor(F,C,R,I);fe[0]=F;fe[1]=C;fe[2]=R;fe[3]=I;w.enable(3089);Ca.scissor_enable=!0;w.disable(2960);Ca.stencil_enable=!1;if(O=Ca.profile)L=performance.now(),y.count++;w.useProgram(m.program);G=Wc.angle_instanced_arrays;ra.setVAO(null);K=N.call(this,ka,c,0);P=!1;S=null;V=0;U=!1;aa=ga=0;Z=1;ba=0;T=5126;qa=oa=xa=ea=0;ia(K)?(P=!0,S=J.createStream(34962,K),T=S.dtype):(S=J.getBuffer(K))?T=S.dtype:"constant"in K?(Z=2,"number"===typeof K.constant?
(xa=K.constant,oa=qa=ea=0):(xa=0<K.constant.length?K.constant[0]:0,oa=1<K.constant.length?K.constant[1]:0,qa=2<K.constant.length?K.constant[2]:0,ea=3<K.constant.length?K.constant[3]:0)):(S=ia(K.buffer)?J.createStream(34962,K.buffer):J.getBuffer(K.buffer),T="type"in K?Xd[K.type]:S.dtype,U=!!K.normalized,aa=K.size|0,ga=K.offset|0,ba=K.stride|0,V=K.divisor|0);la=nc.location;ma=Y[la];if(1===Z){ma.buffer||w.enableVertexAttribArray(la);La=aa||1;if(ma.type!==T||ma.size!==La||ma.buffer!==S||ma.normalized!==
U||ma.offset!==ga||ma.stride!==ba)w.bindBuffer(34962,S.buffer),w.vertexAttribPointer(la,La,T,U,ba,ga),ma.type=T,ma.size=La,ma.buffer=S,ma.normalized=U,ma.offset=ga,ma.stride=ba;ma.divisor!==V&&(G.vertexAttribDivisorANGLE(la,V),ma.divisor=V)}else if(ma.buffer&&(w.disableVertexAttribArray(la),ma.buffer=null),ma.x!==xa||ma.y!==oa||ma.z!==qa||ma.w!==ea)w.vertexAttrib4f(la,xa,oa,qa,ea),ma.x=xa,ma.y=oa,ma.z=qa,ma.w=ea;ub=e.call(this,ka,c,0);Wa=!1;va=null;Na=0;Bb=!1;Gb=Sa=0;cb=1;Yb=0;Rb=5126;gb=Sb=ac=Ha=
0;ia(ub)?(Wa=!0,va=J.createStream(34962,ub),Rb=va.dtype):(va=J.getBuffer(ub))?Rb=va.dtype:"constant"in ub?(cb=2,"number"===typeof ub.constant?(ac=ub.constant,Sb=gb=Ha=0):(ac=0<ub.constant.length?ub.constant[0]:0,Sb=1<ub.constant.length?ub.constant[1]:0,gb=2<ub.constant.length?ub.constant[2]:0,Ha=3<ub.constant.length?ub.constant[3]:0)):(va=ia(ub.buffer)?J.createStream(34962,ub.buffer):J.getBuffer(ub.buffer),Rb="type"in ub?Xd[ub.type]:va.dtype,Bb=!!ub.normalized,Gb=ub.size|0,Sa=ub.offset|0,Yb=ub.stride|
0,Na=ub.divisor|0);Tb=qd.location;Ma=Y[Tb];if(1===cb){Ma.buffer||w.enableVertexAttribArray(Tb);nb=Gb||1;if(Ma.type!==Rb||Ma.size!==nb||Ma.buffer!==va||Ma.normalized!==Bb||Ma.offset!==Sa||Ma.stride!==Yb)w.bindBuffer(34962,va.buffer),w.vertexAttribPointer(Tb,nb,Rb,Bb,Yb,Sa),Ma.type=Rb,Ma.size=nb,Ma.buffer=va,Ma.normalized=Bb,Ma.offset=Sa,Ma.stride=Yb;Ma.divisor!==Na&&(G.vertexAttribDivisorANGLE(Tb,Na),Ma.divisor=Na)}else if(Ma.buffer&&(w.disableVertexAttribArray(Tb),Ma.buffer=null),Ma.x!==ac||Ma.y!==
Sb||Ma.z!==gb||Ma.w!==Ha)w.vertexAttrib4f(Tb,ac,Sb,gb,Ha),Ma.x=ac,Ma.y=Sb,Ma.z=gb,Ma.w=Ha;vb=b.call(this,ka,c,0);hb=!1;Pa=null;oc=0;Ib=!1;db=Qb=0;kc=1;Hc=0;mc=5126;ob=sa=kb=jb=0;ia(vb)?(hb=!0,Pa=J.createStream(34962,vb),mc=Pa.dtype):(Pa=J.getBuffer(vb))?mc=Pa.dtype:"constant"in vb?(kc=2,"number"===typeof vb.constant?(kb=vb.constant,sa=ob=jb=0):(kb=0<vb.constant.length?vb.constant[0]:0,sa=1<vb.constant.length?vb.constant[1]:0,ob=2<vb.constant.length?vb.constant[2]:0,jb=3<vb.constant.length?vb.constant[3]:
0)):(Pa=ia(vb.buffer)?J.createStream(34962,vb.buffer):J.getBuffer(vb.buffer),mc="type"in vb?Xd[vb.type]:Pa.dtype,Ib=!!vb.normalized,db=vb.size|0,Qb=vb.offset|0,Hc=vb.stride|0,oc=vb.divisor|0);wa=jc.location;Ua=Y[wa];if(1===kc){Ua.buffer||w.enableVertexAttribArray(wa);bb=db||1;if(Ua.type!==mc||Ua.size!==bb||Ua.buffer!==Pa||Ua.normalized!==Ib||Ua.offset!==Qb||Ua.stride!==Hc)w.bindBuffer(34962,Pa.buffer),w.vertexAttribPointer(wa,bb,mc,Ib,Hc,Qb),Ua.type=mc,Ua.size=bb,Ua.buffer=Pa,Ua.normalized=Ib,Ua.offset=
Qb,Ua.stride=Hc;Ua.divisor!==oc&&(G.vertexAttribDivisorANGLE(wa,oc),Ua.divisor=oc)}else if(Ua.buffer&&(w.disableVertexAttribArray(wa),Ua.buffer=null),Ua.x!==kb||Ua.y!==sa||Ua.z!==ob||Ua.w!==jb)w.vertexAttrib4f(wa,kb,sa,ob,jb),Ua.x=kb,Ua.y=sa,Ua.z=ob,Ua.w=jb;Aa=t.call(this,ka,c,0);eb=!1;Ja=null;Cb=0;Ab=!1;yc=Ra=0;Jb=1;Za=0;Ub=5126;Nb=Ka=wc=ya=0;ia(Aa)?(eb=!0,Ja=J.createStream(34962,Aa),Ub=Ja.dtype):(Ja=J.getBuffer(Aa))?Ub=Ja.dtype:"constant"in Aa?(Jb=2,"number"===typeof Aa.constant?(wc=Aa.constant,
Ka=Nb=ya=0):(wc=0<Aa.constant.length?Aa.constant[0]:0,Ka=1<Aa.constant.length?Aa.constant[1]:0,Nb=2<Aa.constant.length?Aa.constant[2]:0,ya=3<Aa.constant.length?Aa.constant[3]:0)):(Ja=ia(Aa.buffer)?J.createStream(34962,Aa.buffer):J.getBuffer(Aa.buffer),Ub="type"in Aa?Xd[Aa.type]:Ja.dtype,Ab=!!Aa.normalized,yc=Aa.size|0,Ra=Aa.offset|0,Za=Aa.stride|0,Cb=Aa.divisor|0);fb=xc.location;ib=Y[fb];if(1===Jb){ib.buffer||w.enableVertexAttribArray(fb);za=yc||1;if(ib.type!==Ub||ib.size!==za||ib.buffer!==Ja||ib.normalized!==
Ab||ib.offset!==Ra||ib.stride!==Za)w.bindBuffer(34962,Ja.buffer),w.vertexAttribPointer(fb,za,Ub,Ab,Za,Ra),ib.type=Ub,ib.size=za,ib.buffer=Ja,ib.normalized=Ab,ib.offset=Ra,ib.stride=Za;ib.divisor!==Cb&&(G.vertexAttribDivisorANGLE(fb,Cb),ib.divisor=Cb)}else if(ib.buffer&&(w.disableVertexAttribArray(fb),ib.buffer=null),ib.x!==wc||ib.y!==Ka||ib.z!==Nb||ib.w!==ya)w.vertexAttrib4f(fb,wc,Ka,Nb,ya),ib.x=wc,ib.y=Ka,ib.z=Nb,ib.w=ya;ec=a.call(this,ka,c,0);Da=!1;pb=null;qb=0;Xa=!1;lc=Ya=0;ad=1;uc=0;Va=5126;zc=
Fa=bd=Lb=0;ia(ec)?(Da=!0,pb=J.createStream(34962,ec),Va=pb.dtype):(pb=J.getBuffer(ec))?Va=pb.dtype:"constant"in ec?(ad=2,"number"===typeof ec.constant?(bd=ec.constant,Fa=zc=Lb=0):(bd=0<ec.constant.length?ec.constant[0]:0,Fa=1<ec.constant.length?ec.constant[1]:0,zc=2<ec.constant.length?ec.constant[2]:0,Lb=3<ec.constant.length?ec.constant[3]:0)):(pb=ia(ec.buffer)?J.createStream(34962,ec.buffer):J.getBuffer(ec.buffer),Va="type"in ec?Xd[ec.type]:pb.dtype,Xa=!!ec.normalized,lc=ec.size|0,Ya=ec.offset|0,
uc=ec.stride|0,qb=ec.divisor|0);Qa=ha.location;Ba=Y[Qa];if(1===ad){Ba.buffer||w.enableVertexAttribArray(Qa);lb=lc||1;if(Ba.type!==Va||Ba.size!==lb||Ba.buffer!==pb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==uc)w.bindBuffer(34962,pb.buffer),w.vertexAttribPointer(Qa,lb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=lb,Ba.buffer=pb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==qb&&(G.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(w.disableVertexAttribArray(Qa),Ba.buffer=null),Ba.x!==
bd||Ba.y!==Fa||Ba.z!==zc||Ba.w!==Lb)w.vertexAttrib4f(Qa,bd,Fa,zc,Lb),Ba.x=bd,Ba.y=Fa,Ba.z=zc,Ba.w=Lb;wb=x.call(this,ka,c,0);Db=!1;rb=null;vc=0;xb=!1;tc=td=0;Cd=1;Nc=0;gd=5126;Ob=cc=Vb=ud=0;ia(wb)?(Db=!0,rb=J.createStream(34962,wb),gd=rb.dtype):(rb=J.getBuffer(wb))?gd=rb.dtype:"constant"in wb?(Cd=2,"number"===typeof wb.constant?(Vb=wb.constant,cc=Ob=ud=0):(Vb=0<wb.constant.length?wb.constant[0]:0,cc=1<wb.constant.length?wb.constant[1]:0,Ob=2<wb.constant.length?wb.constant[2]:0,ud=3<wb.constant.length?
wb.constant[3]:0)):(rb=ia(wb.buffer)?J.createStream(34962,wb.buffer):J.getBuffer(wb.buffer),gd="type"in wb?Xd[wb.type]:rb.dtype,xb=!!wb.normalized,tc=wb.size|0,td=wb.offset|0,Nc=wb.stride|0,vc=wb.divisor|0);Ga=$a.location;$b=Y[Ga];if(1===Cd){$b.buffer||w.enableVertexAttribArray(Ga);mb=tc||1;if($b.type!==gd||$b.size!==mb||$b.buffer!==rb||$b.normalized!==xb||$b.offset!==td||$b.stride!==Nc)w.bindBuffer(34962,rb.buffer),w.vertexAttribPointer(Ga,mb,gd,xb,Nc,td),$b.type=gd,$b.size=mb,$b.buffer=rb,$b.normalized=
xb,$b.offset=td,$b.stride=Nc;$b.divisor!==vc&&(G.vertexAttribDivisorANGLE(Ga,vc),$b.divisor=vc)}else if($b.buffer&&(w.disableVertexAttribArray(Ga),$b.buffer=null),$b.x!==Vb||$b.y!==cc||$b.z!==Ob||$b.w!==ud)w.vertexAttrib4f(Ga,Vb,cc,Ob,ud),$b.x=Vb,$b.y=cc,$b.z=Ob,$b.w=ud;yb=z.call(this,ka,c,0);Mb=!1;Pb=null;fc=0;hc=!1;Cc=Sc=0;Dc=1;Ec=0;Oc=5126;Kb=Pc=Tc=Zc=0;ia(yb)?(Mb=!0,Pb=J.createStream(34962,yb),Oc=Pb.dtype):(Pb=J.getBuffer(yb))?Oc=Pb.dtype:"constant"in yb?(Dc=2,"number"===typeof yb.constant?(Tc=
yb.constant,Pc=Kb=Zc=0):(Tc=0<yb.constant.length?yb.constant[0]:0,Pc=1<yb.constant.length?yb.constant[1]:0,Kb=2<yb.constant.length?yb.constant[2]:0,Zc=3<yb.constant.length?yb.constant[3]:0)):(Pb=ia(yb.buffer)?J.createStream(34962,yb.buffer):J.getBuffer(yb.buffer),Oc="type"in yb?Xd[yb.type]:Pb.dtype,hc=!!yb.normalized,Cc=yb.size|0,Sc=yb.offset|0,Ec=yb.stride|0,fc=yb.divisor|0);Fb=Q.location;Qc=Y[Fb];if(1===Dc){Qc.buffer||w.enableVertexAttribArray(Fb);Ic=Cc||4;if(Qc.type!==Oc||Qc.size!==Ic||Qc.buffer!==
Pb||Qc.normalized!==hc||Qc.offset!==Sc||Qc.stride!==Ec)w.bindBuffer(34962,Pb.buffer),w.vertexAttribPointer(Fb,Ic,Oc,hc,Ec,Sc),Qc.type=Oc,Qc.size=Ic,Qc.buffer=Pb,Qc.normalized=hc,Qc.offset=Sc,Qc.stride=Ec;Qc.divisor!==fc&&(G.vertexAttribDivisorANGLE(Fb,fc),Qc.divisor=fc)}else if(Qc.buffer&&(w.disableVertexAttribArray(Fb),Qc.buffer=null),Qc.x!==Tc||Qc.y!==Pc||Qc.z!==Kb||Qc.w!==Zc)w.vertexAttrib4f(Fb,Tc,Pc,Kb,Zc),Qc.x=Tc,Qc.y=Pc,Qc.z=Kb,Qc.w=Zc;Uc=fa.call(this,ka,c,0);gc=!1;Xc=null;yd=0;Jd=!1;Yc=id=
0;te=1;Ld=0;zf=5126;Ed=Gd=Ud=re=0;ia(Uc)?(gc=!0,Xc=J.createStream(34962,Uc),zf=Xc.dtype):(Xc=J.getBuffer(Uc))?zf=Xc.dtype:"constant"in Uc?(te=2,"number"===typeof Uc.constant?(Ud=Uc.constant,Gd=Ed=re=0):(Ud=0<Uc.constant.length?Uc.constant[0]:0,Gd=1<Uc.constant.length?Uc.constant[1]:0,Ed=2<Uc.constant.length?Uc.constant[2]:0,re=3<Uc.constant.length?Uc.constant[3]:0)):(Xc=ia(Uc.buffer)?J.createStream(34962,Uc.buffer):J.getBuffer(Uc.buffer),zf="type"in Uc?Xd[Uc.type]:Xc.dtype,Jd=!!Uc.normalized,Yc=Uc.size|
0,id=Uc.offset|0,Ld=Uc.stride|0,yd=Uc.divisor|0);ed=Zb.location;Fc=Y[ed];if(1===te){Fc.buffer||w.enableVertexAttribArray(ed);ld=Yc||4;if(Fc.type!==zf||Fc.size!==ld||Fc.buffer!==Xc||Fc.normalized!==Jd||Fc.offset!==id||Fc.stride!==Ld)w.bindBuffer(34962,Xc.buffer),w.vertexAttribPointer(ed,ld,zf,Jd,Ld,id),Fc.type=zf,Fc.size=ld,Fc.buffer=Xc,Fc.normalized=Jd,Fc.offset=id,Fc.stride=Ld;Fc.divisor!==yd&&(G.vertexAttribDivisorANGLE(ed,yd),Fc.divisor=yd)}else if(Fc.buffer&&(w.disableVertexAttribArray(ed),Fc.buffer=
null),Fc.x!==Ud||Fc.y!==Gd||Fc.z!==Ed||Fc.w!==re)w.vertexAttrib4f(ed,Ud,Gd,Ed,re),Fc.x=Ud,Fc.y=Gd,Fc.z=Ed,Fc.w=re;hd=M.call(this,ka,c,0);$c=!1;jd=null;zd=0;Bd=!1;ye=we=0;ve=1;he=0;ge=5126;je=be=oe=ee=0;ia(hd)?($c=!0,jd=J.createStream(34962,hd),ge=jd.dtype):(jd=J.getBuffer(hd))?ge=jd.dtype:"constant"in hd?(ve=2,"number"===typeof hd.constant?(oe=hd.constant,be=je=ee=0):(oe=0<hd.constant.length?hd.constant[0]:0,be=1<hd.constant.length?hd.constant[1]:0,je=2<hd.constant.length?hd.constant[2]:0,ee=3<hd.constant.length?
hd.constant[3]:0)):(jd=ia(hd.buffer)?J.createStream(34962,hd.buffer):J.getBuffer(hd.buffer),ge="type"in hd?Xd[hd.type]:jd.dtype,Bd=!!hd.normalized,ye=hd.size|0,we=hd.offset|0,he=hd.stride|0,zd=hd.divisor|0);Ac=ja.location;Vc=Y[Ac];if(1===ve){Vc.buffer||w.enableVertexAttribArray(Ac);pe=ye||1;if(Vc.type!==ge||Vc.size!==pe||Vc.buffer!==jd||Vc.normalized!==Bd||Vc.offset!==we||Vc.stride!==he)w.bindBuffer(34962,jd.buffer),w.vertexAttribPointer(Ac,pe,ge,Bd,he,we),Vc.type=ge,Vc.size=pe,Vc.buffer=jd,Vc.normalized=
Bd,Vc.offset=we,Vc.stride=he;Vc.divisor!==zd&&(G.vertexAttribDivisorANGLE(Ac,zd),Vc.divisor=zd)}else if(Vc.buffer&&(w.disableVertexAttribArray(Ac),Vc.buffer=null),Vc.x!==oe||Vc.y!==be||Vc.z!==je||Vc.w!==ee)w.vertexAttrib4f(Ac,oe,be,je,ee),Vc.x=oe,Vc.y=be,Vc.z=je,Vc.w=ee;w.uniform1i(v.location,!1);w.uniform1f(Ia.location,ka.pixelRatio);le=c.scale;w.uniform2f(W.location,le[0],le[1]);Fd=c.scaleFract;w.uniform2f(sb.location,Fd[0],Fd[1]);Md=c.translate;w.uniform2f(ua.location,Md[0],Md[1]);Nd=c.translateFract;
w.uniform2f(Wb.location,Nd[0],Nd[1]);Od=H.call(this,ka,c,0);w.uniform2f(Oa.location,Od[0],Od[1]);w.uniform1f(Ea.location,c.opacity);w.uniform1i(dc.location,r.bind());(ke=c.markerTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);Ge=ke._texture;w.uniform1i(ca.location,Ge.bind());xe=c.elements;ne=null;(ne=(Ye=ia(xe))?Lc.createStream(xe):Lc.getElements(xe))&&w.bindBuffer(34963,ne.buffer.buffer);Pe=c.offset;if(Me=c.count)qe=tb.instances,0<qe?ne?G.drawElementsInstancedANGLE(0,Me,ne.type,Pe<<(ne.type-
5121>>1),qe):G.drawArraysInstancedANGLE(0,Pe,Me,qe):0>qe&&(ne?w.drawElements(0,Me,ne.type,Pe<<(ne.type-5121>>1)):w.drawArrays(0,Pe,Me)),Ca.dirty=!0,ra.setVAO(null),ka.viewportWidth=q,ka.viewportHeight=A,O&&(y.cpuTime+=performance.now()-L),P&&J.destroyStream(S),Wa&&J.destroyStream(va),hb&&J.destroyStream(Pa),eb&&J.destroyStream(Ja),Da&&J.destroyStream(pb),Db&&J.destroyStream(rb),Mb&&J.destroyStream(Pb),gc&&J.destroyStream(Xc),$c&&J.destroyStream(jd),r.unbind(),Ge.unbind(),Ye&&Lc.destroyStream(ne)},
scope:function(a,b,e){var h,l,m,p,t,r,u,w,v,x,D,N,E,z,H,K,O,G,M,Y,da,Q,X,U,W,Z,fa,ca,na,pa,ja,ha,ma,va,ra,qa,ua,la,Ia,Ea,Oa,zb,Na,xc,$a,Hb,Ma,nb,vb,hb,Pa,Ha,Ib,sb,db,gb,ic,qd,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,Qb,Jb,Za,Ub,ya,Zb,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,Wb,uc,Va,Lb,nc,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,dc,tc,jc,Nc,gd,nd,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,wc,Kd,id,Yc,Wc,fe,$d,Id,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,ie,se,Ee,he,ge,ee,oe,be,je,Ac,Vc,pe,
le,Fd,Md,Nd,Od,ke,me,xe,ne,Ye,Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,Ve,Xe,Qe,Ne,We,Ue,Re,Se,Qd,Vd,Te,pf,hf,bf,ef,ff,gf,mf,jf,nf,Af,Bf,Oe,Ae,kf,lf,Cf,Ff,yf,Df,Ef,uf,vf,sf,wf,xf,Hf,Jf,Kf,Lf,qf,Qf,Gf,rf,cg,Rf,Sf,pg,cf,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;h=a.viewport;l=h.x|0;m=h.y|0;p="width"in h?h.width|0:ka.framebufferWidth-l;t="height"in h?h.height|0:ka.framebufferHeight-
m;r=ka.viewportWidth;ka.viewportWidth=p;u=ka.viewportHeight;ka.viewportHeight=t;w=Cd[0];Cd[0]=l;v=Cd[1];Cd[1]=m;x=Cd[2];Cd[2]=p;D=Cd[3];Cd[3]=t;N=F[0];F[0]=0;E=F[1];F[1]=0;z=F[2];F[2]=0;H=F[3];F[3]=1;K=ta.blend_enable;ta.blend_enable=!0;O=xa[0];xa[0]=770;G=xa[1];xa[1]=771;M=xa[2];xa[2]=773;Y=xa[3];xa[3]=1;da=ta.depth_enable;ta.depth_enable=!1;Q=a.viewport;X=Q.x|0;U=Q.y|0;W="width"in Q?Q.width|0:ka.framebufferWidth-X;Z="height"in Q?Q.height|0:ka.framebufferHeight-U;fa=te[0];te[0]=X;ca=te[1];te[1]=
U;na=te[2];te[2]=W;pa=te[3];te[3]=Z;ja=ta.scissor_enable;ta.scissor_enable=!0;ha=ta.stencil_enable;ta.stencil_enable=!1;if(ma=Ca.profile)va=performance.now(),y.count++;ra=a.elements;qa=null;qa=(ua=ia(ra))?Lc.createStream(ra):Lc.getElements(ra);la=tb.elements;tb.elements=qa;Ia=a.offset;Ea=tb.offset;tb.offset=Ia;Oa=a.count;zb=tb.count;tb.count=Oa;Na=tb.primitive;tb.primitive=0;xc=ga[45];ga[45]=!1;$a=a.markerTexture;Hb=ga[48];ga[48]=$a;Ma=a.opacity;nb=ga[10];ga[10]=Ma;vb=C.call(this,ka,a,e);hb=ga[46];
ga[46]=vb;Pa=ga[47];ga[47]=A;Ha=ka.pixelRatio;Ib=ga[34];ga[34]=Ha;sb=a.scale;db=ga[6];ga[6]=sb;gb=a.scaleFract;ic=ga[7];ga[7]=gb;qd=a.translate;jb=ga[8];ga[8]=qd;kb=a.translateFract;sa=ga[9];ga[9]=kb;ob=B.call(this,ka,a,e);wa=!1;Ua=null;bb=0;Aa=!1;Ja=eb=0;Cb=1;Ab=0;Ra=5126;Ub=Za=Jb=Qb=0;ia(ob)?(wa=!0,Ua=J.createStream(34962,ob),Ra=Ua.dtype):(Ua=J.getBuffer(ob))?Ra=Ua.dtype:"constant"in ob?(Cb=2,"number"===typeof ob.constant?(Jb=ob.constant,Za=Ub=Qb=0):(Jb=0<ob.constant.length?ob.constant[0]:0,Za=
1<ob.constant.length?ob.constant[1]:0,Ub=2<ob.constant.length?ob.constant[2]:0,Qb=3<ob.constant.length?ob.constant[3]:0)):(Ua=ia(ob.buffer)?J.createStream(34962,ob.buffer):J.getBuffer(ob.buffer),Ra="type"in ob?Xd[ob.type]:Ua.dtype,Aa=!!ob.normalized,Ja=ob.size|0,eb=ob.offset|0,Ab=ob.stride|0,bb=ob.divisor|0);ya=P.buffer;P.buffer=Ua;Zb=P.divisor;P.divisor=bb;Ka=P.normalized;P.normalized=Aa;Nb=P.offset;P.offset=eb;fb=P.size;P.size=Ja;ib=P.state;P.state=Cb;za=P.stride;P.stride=Ab;ec=P.type;P.type=Ra;
Da=P.w;P.w=Qb;pb=P.x;P.x=Jb;qb=P.y;P.y=Za;Xa=P.z;P.z=Ub;Ya=R.call(this,ka,a,e);lc=!1;Wb=null;uc=0;Va=!1;nc=Lb=0;Fa=1;zc=0;Qa=5126;Db=wb=lb=Ba=0;ia(Ya)?(lc=!0,Wb=J.createStream(34962,Ya),Qa=Wb.dtype):(Wb=J.getBuffer(Ya))?Qa=Wb.dtype:"constant"in Ya?(Fa=2,"number"===typeof Ya.constant?(lb=Ya.constant,wb=Db=Ba=0):(lb=0<Ya.constant.length?Ya.constant[0]:0,wb=1<Ya.constant.length?Ya.constant[1]:0,Db=2<Ya.constant.length?Ya.constant[2]:0,Ba=3<Ya.constant.length?Ya.constant[3]:0)):(Wb=ia(Ya.buffer)?J.createStream(34962,
Ya.buffer):J.getBuffer(Ya.buffer),Qa="type"in Ya?Xd[Ya.type]:Wb.dtype,Va=!!Ya.normalized,nc=Ya.size|0,Lb=Ya.offset|0,zc=Ya.stride|0,uc=Ya.divisor|0);rb=L.buffer;L.buffer=Wb;vc=L.divisor;L.divisor=uc;xb=L.normalized;L.normalized=Va;dc=L.offset;L.offset=Lb;tc=L.size;L.size=nc;jc=L.state;L.state=Fa;Nc=L.stride;L.stride=zc;gd=L.type;L.type=Qa;nd=L.w;L.w=Ba;Vb=L.x;L.x=lb;cc=L.y;L.y=wb;Ob=L.z;L.z=Db;Ga=T.call(this,ka,a,e);$b=!1;mb=null;yb=0;Mb=!1;fc=Pb=0;hc=1;Sc=0;Cc=5126;Zc=Oc=Ec=Dc=0;ia(Ga)?($b=!0,mb=
J.createStream(34962,Ga),Cc=mb.dtype):(mb=J.getBuffer(Ga))?Cc=mb.dtype:"constant"in Ga?(hc=2,"number"===typeof Ga.constant?(Ec=Ga.constant,Oc=Zc=Dc=0):(Ec=0<Ga.constant.length?Ga.constant[0]:0,Oc=1<Ga.constant.length?Ga.constant[1]:0,Zc=2<Ga.constant.length?Ga.constant[2]:0,Dc=3<Ga.constant.length?Ga.constant[3]:0)):(mb=ia(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Cc="type"in Ga?Xd[Ga.type]:mb.dtype,Mb=!!Ga.normalized,fc=Ga.size|0,Pb=Ga.offset|0,Sc=Ga.stride|0,yb=Ga.divisor|
0);Tc=d.buffer;d.buffer=mb;Pc=d.divisor;d.divisor=yb;Kb=d.normalized;d.normalized=Mb;Fb=d.offset;d.offset=Pb;Qc=d.size;d.size=fc;Ic=d.state;d.state=hc;Uc=d.stride;d.stride=Sc;gc=d.type;d.type=Cc;Xc=d.w;d.w=Dc;wc=d.x;d.x=Ec;Kd=d.y;d.y=Oc;id=d.z;d.z=Zc;Yc=f.call(this,ka,a,e);Wc=!1;fe=null;$d=0;Id=!1;Gd=Ud=0;Ed=1;ed=0;Fc=5126;jd=$c=hd=ld=0;ia(Yc)?(Wc=!0,fe=J.createStream(34962,Yc),Fc=fe.dtype):(fe=J.getBuffer(Yc))?Fc=fe.dtype:"constant"in Yc?(Ed=2,"number"===typeof Yc.constant?(hd=Yc.constant,$c=jd=
ld=0):(hd=0<Yc.constant.length?Yc.constant[0]:0,$c=1<Yc.constant.length?Yc.constant[1]:0,jd=2<Yc.constant.length?Yc.constant[2]:0,ld=3<Yc.constant.length?Yc.constant[3]:0)):(fe=ia(Yc.buffer)?J.createStream(34962,Yc.buffer):J.getBuffer(Yc.buffer),Fc="type"in Yc?Xd[Yc.type]:fe.dtype,Id=!!Yc.normalized,Gd=Yc.size|0,Ud=Yc.offset|0,ed=Yc.stride|0,$d=Yc.divisor|0);zd=g.buffer;g.buffer=fe;Bd=g.divisor;g.divisor=$d;ie=g.normalized;g.normalized=Id;se=g.offset;g.offset=Ud;Ee=g.size;g.size=Gd;he=g.state;g.state=
Ed;ge=g.stride;g.stride=ed;ee=g.type;g.type=Fc;oe=g.w;g.w=ld;be=g.x;g.x=hd;je=g.y;g.y=$c;Ac=g.z;g.z=jd;Vc=n.call(this,ka,a,e);pe=!1;le=null;Fd=0;Md=!1;Od=Nd=0;ke=1;me=0;xe=5126;Me=Pe=Ye=ne=0;ia(Vc)?(pe=!0,le=J.createStream(34962,Vc),xe=le.dtype):(le=J.getBuffer(Vc))?xe=le.dtype:"constant"in Vc?(ke=2,"number"===typeof Vc.constant?(Ye=Vc.constant,Pe=Me=ne=0):(Ye=0<Vc.constant.length?Vc.constant[0]:0,Pe=1<Vc.constant.length?Vc.constant[1]:0,Me=2<Vc.constant.length?Vc.constant[2]:0,ne=3<Vc.constant.length?
Vc.constant[3]:0)):(le=ia(Vc.buffer)?J.createStream(34962,Vc.buffer):J.getBuffer(Vc.buffer),xe="type"in Vc?Xd[Vc.type]:le.dtype,Md=!!Vc.normalized,Od=Vc.size|0,Nd=Vc.offset|0,me=Vc.stride|0,Fd=Vc.divisor|0);qe=V.buffer;V.buffer=le;Ce=V.divisor;V.divisor=Fd;He=V.normalized;V.normalized=Md;Ie=V.offset;V.offset=Nd;Je=V.size;V.size=Od;De=V.state;V.state=ke;Hd=V.stride;V.stride=me;Rd=V.type;V.type=xe;Zd=V.w;V.w=ne;ce=V.x;V.x=Ye;Ke=V.y;V.y=Pe;xd=V.z;V.z=Me;Pd=aa.call(this,ka,a,e);ze=!1;Le=null;Ve=0;Xe=
!1;Ne=Qe=0;We=1;Ue=0;Re=5126;Te=Vd=Qd=Se=0;ia(Pd)?(ze=!0,Le=J.createStream(34962,Pd),Re=Le.dtype):(Le=J.getBuffer(Pd))?Re=Le.dtype:"constant"in Pd?(We=2,"number"===typeof Pd.constant?(Qd=Pd.constant,Vd=Te=Se=0):(Qd=0<Pd.constant.length?Pd.constant[0]:0,Vd=1<Pd.constant.length?Pd.constant[1]:0,Te=2<Pd.constant.length?Pd.constant[2]:0,Se=3<Pd.constant.length?Pd.constant[3]:0)):(Le=ia(Pd.buffer)?J.createStream(34962,Pd.buffer):J.getBuffer(Pd.buffer),Re="type"in Pd?Xd[Pd.type]:Le.dtype,Xe=!!Pd.normalized,
Ne=Pd.size|0,Qe=Pd.offset|0,Ue=Pd.stride|0,Ve=Pd.divisor|0);pf=q.buffer;q.buffer=Le;hf=q.divisor;q.divisor=Ve;bf=q.normalized;q.normalized=Xe;ef=q.offset;q.offset=Qe;ff=q.size;q.size=Ne;gf=q.state;q.state=We;mf=q.stride;q.stride=Ue;jf=q.type;q.type=Re;nf=q.w;q.w=Se;Af=q.x;q.x=Qd;Bf=q.y;q.y=Vd;Oe=q.z;q.z=Te;Ae=oa.call(this,ka,a,e);kf=!1;lf=null;Cf=0;Ff=!1;Df=yf=0;Ef=1;uf=0;vf=5126;Hf=xf=wf=sf=0;ia(Ae)?(kf=!0,lf=J.createStream(34962,Ae),vf=lf.dtype):(lf=J.getBuffer(Ae))?vf=lf.dtype:"constant"in Ae?
(Ef=2,"number"===typeof Ae.constant?(wf=Ae.constant,xf=Hf=sf=0):(wf=0<Ae.constant.length?Ae.constant[0]:0,xf=1<Ae.constant.length?Ae.constant[1]:0,Hf=2<Ae.constant.length?Ae.constant[2]:0,sf=3<Ae.constant.length?Ae.constant[3]:0)):(lf=ia(Ae.buffer)?J.createStream(34962,Ae.buffer):J.getBuffer(Ae.buffer),vf="type"in Ae?Xd[Ae.type]:lf.dtype,Ff=!!Ae.normalized,Df=Ae.size|0,yf=Ae.offset|0,uf=Ae.stride|0,Cf=Ae.divisor|0);Jf=I.buffer;I.buffer=lf;Kf=I.divisor;I.divisor=Cf;Lf=I.normalized;I.normalized=Ff;
qf=I.offset;I.offset=yf;Qf=I.size;I.size=Df;Gf=I.state;I.state=Ef;rf=I.stride;I.stride=uf;cg=I.type;I.type=vf;Rf=I.w;I.w=sf;Sf=I.x;I.x=wf;pg=I.y;I.y=xf;cf=I.z;I.z=Hf;$e=ea.call(this,ka,a,e);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ia($e)?(Mf=!0,Nf=J.createStream(34962,$e),Tf=Nf.dtype):(Nf=J.getBuffer($e))?Tf=Nf.dtype:"constant"in $e?(hg=2,"number"===typeof $e.constant?(Xf=$e.constant,Yf=ig=Wf=0):(Xf=0<$e.constant.length?$e.constant[0]:0,Yf=1<$e.constant.length?$e.constant[1]:
0,ig=2<$e.constant.length?$e.constant[2]:0,Wf=3<$e.constant.length?$e.constant[3]:0)):(Nf=ia($e.buffer)?J.createStream(34962,$e.buffer):J.getBuffer($e.buffer),Tf="type"in $e?Xd[$e.type]:Nf.dtype,eg=!!$e.normalized,gg=$e.size|0,fg=$e.offset|0,Vf=$e.stride|0,dg=$e.divisor|0);qg=c.buffer;c.buffer=Nf;rg=c.divisor;c.divisor=dg;sg=c.normalized;c.normalized=eg;tg=c.offset;c.offset=fg;ug=c.size;c.size=gg;vg=c.state;c.state=hg;wg=c.stride;c.stride=Vf;xg=c.type;c.type=Tf;yg=c.w;c.w=Wf;zg=c.x;c.x=Xf;Ag=c.y;
c.y=Yf;df=c.z;c.z=ig;af=k.call(this,ka,a,e);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;ia(af)?(Of=!0,Pf=J.createStream(34962,af),Uf=Pf.dtype):(Pf=J.getBuffer(af))?Uf=Pf.dtype:"constant"in af?(ng=2,"number"===typeof af.constant?(ag=af.constant,bg=og=$f=0):(ag=0<af.constant.length?af.constant[0]:0,bg=1<af.constant.length?af.constant[1]:0,og=2<af.constant.length?af.constant[2]:0,$f=3<af.constant.length?af.constant[3]:0)):(Pf=ia(af.buffer)?J.createStream(34962,af.buffer):J.getBuffer(af.buffer),
Uf="type"in af?Xd[af.type]:Pf.dtype,kg=!!af.normalized,mg=af.size|0,lg=af.offset|0,Zf=af.stride|0,jg=af.divisor|0);Bg=ba.buffer;ba.buffer=Pf;Cg=ba.divisor;ba.divisor=jg;Dg=ba.normalized;ba.normalized=kg;Eg=ba.offset;ba.offset=lg;Fg=ba.size;ba.size=mg;Gg=ba.state;ba.state=ng;Hg=ba.stride;ba.stride=Zf;Ig=ba.type;ba.type=Uf;Jg=ba.w;ba.w=$f;Kg=ba.x;ba.x=ag;Lg=ba.y;ba.y=bg;Mg=ba.z;ba.z=og;Ng=S.vert;S.vert=44;Og=S.frag;S.frag=43;Ca.dirty=!0;b(ka,a,e);ka.viewportWidth=r;ka.viewportHeight=u;Cd[0]=w;Cd[1]=
v;Cd[2]=x;Cd[3]=D;F[0]=N;F[1]=E;F[2]=z;F[3]=H;ta.blend_enable=K;xa[0]=O;xa[1]=G;xa[2]=M;xa[3]=Y;ta.depth_enable=da;te[0]=fa;te[1]=ca;te[2]=na;te[3]=pa;ta.scissor_enable=ja;ta.stencil_enable=ha;ma&&(y.cpuTime+=performance.now()-va);ua&&Lc.destroyStream(qa);tb.elements=la;tb.offset=Ea;tb.count=zb;tb.primitive=Na;ga[45]=xc;ga[48]=Hb;ga[10]=nb;ga[46]=hb;ga[47]=Pa;ga[34]=Ib;ga[6]=db;ga[7]=ic;ga[8]=jb;ga[9]=sa;wa&&J.destroyStream(Ua);P.buffer=ya;P.divisor=Zb;P.normalized=Ka;P.offset=Nb;P.size=fb;P.state=
ib;P.stride=za;P.type=ec;P.w=Da;P.x=pb;P.y=qb;P.z=Xa;lc&&J.destroyStream(Wb);L.buffer=rb;L.divisor=vc;L.normalized=xb;L.offset=dc;L.size=tc;L.state=jc;L.stride=Nc;L.type=gd;L.w=nd;L.x=Vb;L.y=cc;L.z=Ob;$b&&J.destroyStream(mb);d.buffer=Tc;d.divisor=Pc;d.normalized=Kb;d.offset=Fb;d.size=Qc;d.state=Ic;d.stride=Uc;d.type=gc;d.w=Xc;d.x=wc;d.y=Kd;d.z=id;Wc&&J.destroyStream(fe);g.buffer=zd;g.divisor=Bd;g.normalized=ie;g.offset=se;g.size=Ee;g.state=he;g.stride=ge;g.type=ee;g.w=oe;g.x=be;g.y=je;g.z=Ac;pe&&
J.destroyStream(le);V.buffer=qe;V.divisor=Ce;V.normalized=He;V.offset=Ie;V.size=Je;V.state=De;V.stride=Hd;V.type=Rd;V.w=Zd;V.x=ce;V.y=Ke;V.z=xd;ze&&J.destroyStream(Le);q.buffer=pf;q.divisor=hf;q.normalized=bf;q.offset=ef;q.size=ff;q.state=gf;q.stride=mf;q.type=jf;q.w=nf;q.x=Af;q.y=Bf;q.z=Oe;kf&&J.destroyStream(lf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=qf;I.size=Qf;I.state=Gf;I.stride=rf;I.type=cg;I.w=Rf;I.x=Sf;I.y=pg;I.z=cf;Mf&&J.destroyStream(Nf);c.buffer=qg;c.divisor=rg;c.normalized=
sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=df;Of&&J.destroyStream(Pf);ba.buffer=Bg;ba.divisor=Cg;ba.normalized=Dg;ba.offset=Eg;ba.size=Fg;ba.state=Gg;ba.stride=Hg;ba.type=Ig;ba.w=Jg;ba.x=Kg;ba.y=Lg;ba.z=Mg;S.vert=Ng;S.frag=Og;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(h,y,m,N,e,b,t,a,x,z,fa,M,H,r,C,A,B,P,
R,L,T,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Ha,gb,wc,ma,Na,Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua,Wb,nc,jc,qd){var xc,Y,J,ka,Ca,tb,Lc,Wc,E,w,ia,ta,S,ga,ra,F,u,da,D,xa,na,l,ic,X,p,Hb,zb,Ve,me,te,fe,Kd,Ee,nd,ie,se,Id,Cd,$d;xc=h.attributes;Y=h.buffer;J=h.context;ka=h.current;Ca=h.draw;tb=h.elements;Lc=h.extensions;Wc=h.framebuffer;E=h.gl;w=h.isBufferArgs;ia=h.next;ta=h.shader;S=h.uniforms;ga=h.vao;ra=ia.blend_color;F=ka.blend_color;u=ia.blend_equation;da=ka.blend_equation;D=ia.blend_func;xa=
ka.blend_func;na=ia.colorMask;l=ka.colorMask;ic=ia.depth_range;X=ka.depth_range;p=ia.polygonOffset_offset;Hb=ka.polygonOffset_offset;zb=ia.sample_coverage;Ve=ka.sample_coverage;me=ia.scissor_box;te=ka.scissor_box;fe=ia.stencil_func;Kd=ka.stencil_func;Ee=ia.stencil_opBack;nd=ka.stencil_opBack;ie=ia.stencil_opFront;se=ka.stencil_opFront;Id=ia.viewport;Cd=ka.viewport;$d={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,e,
g,f,k;c=Wc.next;c!==Wc.cur&&(c?E.bindFramebuffer(36160,c.framebuffer):E.bindFramebuffer(36160,null),Wc.cur=c);if(ka.dirty){var h,m,n,q,t,r,x,B,A,D,N,C,z,H,R,I,M,L,P,S,V,aa,T,fa,ba,ea,pa,ta,ra,va,oa,Bb,Sa,Gb;h=ia.dither;h!==ka.dither&&(h?E.enable(3024):E.disable(3024),ka.dither=h);m=u[0];n=u[1];if(m!==da[0]||n!==da[1])E.blendEquationSeparate(m,n),da[0]=m,da[1]=n;q=ia.depth_func;q!==ka.depth_func&&(E.depthFunc(q),ka.depth_func=q);t=ic[0];r=ic[1];if(t!==X[0]||r!==X[1])E.depthRange(t,r),X[0]=t,X[1]=r;
x=ia.depth_mask;x!==ka.depth_mask&&(E.depthMask(x),ka.depth_mask=x);B=na[0];A=na[1];D=na[2];N=na[3];if(B!==l[0]||A!==l[1]||D!==l[2]||N!==l[3])E.colorMask(B,A,D,N),l[0]=B,l[1]=A,l[2]=D,l[3]=N;C=ia.cull_enable;C!==ka.cull_enable&&(C?E.enable(2884):E.disable(2884),ka.cull_enable=C);z=ia.cull_face;z!==ka.cull_face&&(E.cullFace(z),ka.cull_face=z);H=ia.frontFace;H!==ka.frontFace&&(E.frontFace(H),ka.frontFace=H);R=ia.lineWidth;R!==ka.lineWidth&&(E.lineWidth(R),ka.lineWidth=R);I=ia.polygonOffset_enable;I!==
ka.polygonOffset_enable&&(I?E.enable(32823):E.disable(32823),ka.polygonOffset_enable=I);M=p[0];L=p[1];if(M!==Hb[0]||L!==Hb[1])E.polygonOffset(M,L),Hb[0]=M,Hb[1]=L;P=ia.sample_alpha;P!==ka.sample_alpha&&(P?E.enable(32926):E.disable(32926),ka.sample_alpha=P);S=ia.sample_enable;S!==ka.sample_enable&&(S?E.enable(32928):E.disable(32928),ka.sample_enable=S);V=zb[0];aa=zb[1];if(V!==Ve[0]||aa!==Ve[1])E.sampleCoverage(V,aa),Ve[0]=V,Ve[1]=aa;T=ia.stencil_mask;T!==ka.stencil_mask&&(E.stencilMask(T),ka.stencil_mask=
T);fa=fe[0];ba=fe[1];ea=fe[2];if(fa!==Kd[0]||ba!==Kd[1]||ea!==Kd[2])E.stencilFunc(fa,ba,ea),Kd[0]=fa,Kd[1]=ba,Kd[2]=ea;pa=ie[0];ta=ie[1];ra=ie[2];va=ie[3];if(pa!==se[0]||ta!==se[1]||ra!==se[2]||va!==se[3])E.stencilOpSeparate(pa,ta,ra,va),se[0]=pa,se[1]=ta,se[2]=ra,se[3]=va;oa=Ee[0];Bb=Ee[1];Sa=Ee[2];Gb=Ee[3];if(oa!==nd[0]||Bb!==nd[1]||Sa!==nd[2]||Gb!==nd[3])E.stencilOpSeparate(oa,Bb,Sa,Gb),nd[0]=oa,nd[1]=Bb,nd[2]=Sa,nd[3]=Gb}E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);ka.blend_enable=
!0;E.blendFuncSeparate(770,771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;E.disable(2929);ka.depth_enable=!1;E.enable(3089);ka.scissor_enable=!0;E.disable(2960);ka.stencil_enable=!1;if(d=ka.profile)e=performance.now(),y.count+=b;E.useProgram(la.program);g=Lc.angle_instanced_arrays;var cb;ga.setVAO(null);E.uniform1i(v.location,!1);E.uniform1i(Oa.location,qa.bind());cb=Ca.instances;for(f=0;f<b;++f){k=a[f];var Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,
Ab,Ra,yc,Jb,Za,Ub,ya,Id,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,Jd,id,Yc,me,Ld,Wd,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ye,Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,of,Xe,Qe,Ne,We,Ue,Re,Se,Qd,Vd,Te,pf,hf,bf,ef,ff,gf,mf,jf,nf,Af,Bf,Oe,Ae,kf,lf,Cf,Ff,yf,Df,Ef,uf,vf,sf,wf,xf,Hf,Jf,Kf,Lf,qf,Qf,
Gf,rf;Yb=k.viewport;Rb=Yb.x|0;ae=Yb.y|0;ac="width"in Yb?Yb.width|0:J.framebufferWidth-Rb;Sb="height"in Yb?Yb.height|0:J.framebufferHeight-ae;Ad=J.viewportWidth;J.viewportWidth=ac;Tb=J.viewportHeight;J.viewportHeight=Sb;E.viewport(Rb,ae,ac,Sb);Cd[0]=Rb;Cd[1]=ae;Cd[2]=ac;Cd[3]=Sb;Ma=k.viewport;nb=Ma.x|0;vb=Ma.y|0;hb="width"in Ma?Ma.width|0:J.framebufferWidth-nb;Pa="height"in Ma?Ma.height|0:J.framebufferHeight-vb;E.scissor(nb,vb,hb,Pa);te[0]=nb;te[1]=vb;te[2]=hb;te[3]=Pa;oc=Ha.call(this,J,k,f);Ib=!1;
dd=null;db=0;kc=!1;mc=Hc=0;jb=1;kb=0;sa=5126;bb=Ua=wa=ob=0;w(oc)?(Ib=!0,dd=Y.createStream(34962,oc),sa=dd.dtype):(dd=Y.getBuffer(oc))?sa=dd.dtype:"constant"in oc?(jb=2,"number"===typeof oc.constant?(wa=oc.constant,Ua=bb=ob=0):(wa=0<oc.constant.length?oc.constant[0]:0,Ua=1<oc.constant.length?oc.constant[1]:0,bb=2<oc.constant.length?oc.constant[2]:0,ob=3<oc.constant.length?oc.constant[3]:0)):(dd=w(oc.buffer)?Y.createStream(34962,oc.buffer):Y.getBuffer(oc.buffer),sa="type"in oc?$d[oc.type]:dd.dtype,
kc=!!oc.normalized,mc=oc.size|0,Hc=oc.offset|0,kb=oc.stride|0,db=oc.divisor|0);Aa=Wb.location;eb=xc[Aa];if(1===jb){eb.buffer||E.enableVertexAttribArray(Aa);Ja=mc||1;if(eb.type!==sa||eb.size!==Ja||eb.buffer!==dd||eb.normalized!==kc||eb.offset!==Hc||eb.stride!==kb)E.bindBuffer(34962,dd.buffer),E.vertexAttribPointer(Aa,Ja,sa,kc,kb,Hc),eb.type=sa,eb.size=Ja,eb.buffer=dd,eb.normalized=kc,eb.offset=Hc,eb.stride=kb;eb.divisor!==db&&(g.vertexAttribDivisorANGLE(Aa,db),eb.divisor=db)}else if(eb.buffer&&(E.disableVertexAttribArray(Aa),
eb.buffer=null),eb.x!==wa||eb.y!==Ua||eb.z!==bb||eb.w!==ob)E.vertexAttrib4f(Aa,wa,Ua,bb,ob),eb.x=wa,eb.y=Ua,eb.z=bb,eb.w=ob;Cb=gb.call(this,J,k,f);Ab=!1;Ra=null;yc=0;Jb=!1;Ub=Za=0;ya=1;Id=0;Ka=5126;za=ib=fb=Nb=0;w(Cb)?(Ab=!0,Ra=Y.createStream(34962,Cb),Ka=Ra.dtype):(Ra=Y.getBuffer(Cb))?Ka=Ra.dtype:"constant"in Cb?(ya=2,"number"===typeof Cb.constant?(fb=Cb.constant,ib=za=Nb=0):(fb=0<Cb.constant.length?Cb.constant[0]:0,ib=1<Cb.constant.length?Cb.constant[1]:0,za=2<Cb.constant.length?Cb.constant[2]:
0,Nb=3<Cb.constant.length?Cb.constant[3]:0)):(Ra=w(Cb.buffer)?Y.createStream(34962,Cb.buffer):Y.getBuffer(Cb.buffer),Ka="type"in Cb?$d[Cb.type]:Ra.dtype,Jb=!!Cb.normalized,Ub=Cb.size|0,Za=Cb.offset|0,Id=Cb.stride|0,yc=Cb.divisor|0);ec=jc.location;Da=xc[ec];if(1===ya){Da.buffer||E.enableVertexAttribArray(ec);pb=Ub||1;if(Da.type!==Ka||Da.size!==pb||Da.buffer!==Ra||Da.normalized!==Jb||Da.offset!==Za||Da.stride!==Id)E.bindBuffer(34962,Ra.buffer),E.vertexAttribPointer(ec,pb,Ka,Jb,Id,Za),Da.type=Ka,Da.size=
pb,Da.buffer=Ra,Da.normalized=Jb,Da.offset=Za,Da.stride=Id;Da.divisor!==yc&&(g.vertexAttribDivisorANGLE(ec,yc),Da.divisor=yc)}else if(Da.buffer&&(E.disableVertexAttribArray(ec),Da.buffer=null),Da.x!==fb||Da.y!==ib||Da.z!==za||Da.w!==Nb)E.vertexAttrib4f(ec,fb,ib,za,Nb),Da.x=fb,Da.y=ib,Da.z=za,Da.w=Nb;qb=wc.call(this,J,k,f);Xa=!1;Ya=null;lc=0;ad=!1;Va=uc=0;Lb=1;bd=0;Fa=5126;lb=Ba=Qa=zc=0;w(qb)?(Xa=!0,Ya=Y.createStream(34962,qb),Fa=Ya.dtype):(Ya=Y.getBuffer(qb))?Fa=Ya.dtype:"constant"in qb?(Lb=2,"number"===
typeof qb.constant?(Qa=qb.constant,Ba=lb=zc=0):(Qa=0<qb.constant.length?qb.constant[0]:0,Ba=1<qb.constant.length?qb.constant[1]:0,lb=2<qb.constant.length?qb.constant[2]:0,zc=3<qb.constant.length?qb.constant[3]:0)):(Ya=w(qb.buffer)?Y.createStream(34962,qb.buffer):Y.getBuffer(qb.buffer),Fa="type"in qb?$d[qb.type]:Ya.dtype,ad=!!qb.normalized,Va=qb.size|0,uc=qb.offset|0,bd=qb.stride|0,lc=qb.divisor|0);wb=nc.location;Db=xc[wb];if(1===Lb){Db.buffer||E.enableVertexAttribArray(wb);rb=Va||1;if(Db.type!==Fa||
Db.size!==rb||Db.buffer!==Ya||Db.normalized!==ad||Db.offset!==uc||Db.stride!==bd)E.bindBuffer(34962,Ya.buffer),E.vertexAttribPointer(wb,rb,Fa,ad,bd,uc),Db.type=Fa,Db.size=rb,Db.buffer=Ya,Db.normalized=ad,Db.offset=uc,Db.stride=bd;Db.divisor!==lc&&(g.vertexAttribDivisorANGLE(wb,lc),Db.divisor=lc)}else if(Db.buffer&&(E.disableVertexAttribArray(wb),Db.buffer=null),Db.x!==Qa||Db.y!==Ba||Db.z!==lb||Db.w!==zc)E.vertexAttrib4f(wb,Qa,Ba,lb,zc),Db.x=Qa,Db.y=Ba,Db.z=lb,Db.w=zc;vc=ma.call(this,J,k,f);xb=!1;
td=null;tc=0;ue=!1;gd=Nc=0;ud=1;Vb=0;cc=5126;mb=$b=Ga=Ob=0;w(vc)?(xb=!0,td=Y.createStream(34962,vc),cc=td.dtype):(td=Y.getBuffer(vc))?cc=td.dtype:"constant"in vc?(ud=2,"number"===typeof vc.constant?(Ga=vc.constant,$b=mb=Ob=0):(Ga=0<vc.constant.length?vc.constant[0]:0,$b=1<vc.constant.length?vc.constant[1]:0,mb=2<vc.constant.length?vc.constant[2]:0,Ob=3<vc.constant.length?vc.constant[3]:0)):(td=w(vc.buffer)?Y.createStream(34962,vc.buffer):Y.getBuffer(vc.buffer),cc="type"in vc?$d[vc.type]:td.dtype,
ue=!!vc.normalized,gd=vc.size|0,Nc=vc.offset|0,Vb=vc.stride|0,tc=vc.divisor|0);yb=qd.location;Mb=xc[yb];if(1===ud){Mb.buffer||E.enableVertexAttribArray(yb);Pb=gd||1;if(Mb.type!==cc||Mb.size!==Pb||Mb.buffer!==td||Mb.normalized!==ue||Mb.offset!==Nc||Mb.stride!==Vb)E.bindBuffer(34962,td.buffer),E.vertexAttribPointer(yb,Pb,cc,ue,Vb,Nc),Mb.type=cc,Mb.size=Pb,Mb.buffer=td,Mb.normalized=ue,Mb.offset=Nc,Mb.stride=Vb;Mb.divisor!==tc&&(g.vertexAttribDivisorANGLE(yb,tc),Mb.divisor=tc)}else if(Mb.buffer&&(E.disableVertexAttribArray(yb),
Mb.buffer=null),Mb.x!==Ga||Mb.y!==$b||Mb.z!==mb||Mb.w!==Ob)E.vertexAttrib4f(yb,Ga,$b,mb,Ob),Mb.x=Ga,Mb.y=$b,Mb.z=mb,Mb.w=Ob;fc=Na.call(this,J,k,f);hc=!1;Sc=null;Cc=0;Dc=!1;Oc=Ec=0;Zc=1;Tc=0;Pc=5126;Ic=Qc=Fb=Kb=0;w(fc)?(hc=!0,Sc=Y.createStream(34962,fc),Pc=Sc.dtype):(Sc=Y.getBuffer(fc))?Pc=Sc.dtype:"constant"in fc?(Zc=2,"number"===typeof fc.constant?(Fb=fc.constant,Qc=Ic=Kb=0):(Fb=0<fc.constant.length?fc.constant[0]:0,Qc=1<fc.constant.length?fc.constant[1]:0,Ic=2<fc.constant.length?fc.constant[2]:
0,Kb=3<fc.constant.length?fc.constant[3]:0)):(Sc=w(fc.buffer)?Y.createStream(34962,fc.buffer):Y.getBuffer(fc.buffer),Pc="type"in fc?$d[fc.type]:Sc.dtype,Dc=!!fc.normalized,Oc=fc.size|0,Ec=fc.offset|0,Tc=fc.stride|0,Cc=fc.divisor|0);Uc=sb.location;gc=xc[Uc];if(1===Zc){gc.buffer||E.enableVertexAttribArray(Uc);Xc=Oc||1;if(gc.type!==Pc||gc.size!==Xc||gc.buffer!==Sc||gc.normalized!==Dc||gc.offset!==Ec||gc.stride!==Tc)E.bindBuffer(34962,Sc.buffer),E.vertexAttribPointer(Uc,Xc,Pc,Dc,Tc,Ec),gc.type=Pc,gc.size=
Xc,gc.buffer=Sc,gc.normalized=Dc,gc.offset=Ec,gc.stride=Tc;gc.divisor!==Cc&&(g.vertexAttribDivisorANGLE(Uc,Cc),gc.divisor=Cc)}else if(gc.buffer&&(E.disableVertexAttribArray(Uc),gc.buffer=null),gc.x!==Fb||gc.y!==Qc||gc.z!==Ic||gc.w!==Kb)E.vertexAttrib4f(Uc,Fb,Qc,Ic,Kb),gc.x=Fb,gc.y=Qc,gc.z=Ic,gc.w=Kb;yd=Z.call(this,J,k,f);Jd=!1;id=null;Yc=0;me=!1;Wd=Ld=0;re=1;Ud=0;Gd=5126;ld=Fc=ed=Ed=0;w(yd)?(Jd=!0,id=Y.createStream(34962,yd),Gd=id.dtype):(id=Y.getBuffer(yd))?Gd=id.dtype:"constant"in yd?(re=2,"number"===
typeof yd.constant?(ed=yd.constant,Fc=ld=Ed=0):(ed=0<yd.constant.length?yd.constant[0]:0,Fc=1<yd.constant.length?yd.constant[1]:0,ld=2<yd.constant.length?yd.constant[2]:0,Ed=3<yd.constant.length?yd.constant[3]:0)):(id=w(yd.buffer)?Y.createStream(34962,yd.buffer):Y.getBuffer(yd.buffer),Gd="type"in yd?$d[yd.type]:id.dtype,me=!!yd.normalized,Wd=yd.size|0,Ld=yd.offset|0,Ud=yd.stride|0,Yc=yd.divisor|0);hd=$a.location;$c=xc[hd];if(1===re){$c.buffer||E.enableVertexAttribArray(hd);jd=Wd||1;if($c.type!==Gd||
$c.size!==jd||$c.buffer!==id||$c.normalized!==me||$c.offset!==Ld||$c.stride!==Ud)E.bindBuffer(34962,id.buffer),E.vertexAttribPointer(hd,jd,Gd,me,Ud,Ld),$c.type=Gd,$c.size=jd,$c.buffer=id,$c.normalized=me,$c.offset=Ld,$c.stride=Ud;$c.divisor!==Yc&&(g.vertexAttribDivisorANGLE(hd,Yc),$c.divisor=Yc)}else if($c.buffer&&(E.disableVertexAttribArray(hd),$c.buffer=null),$c.x!==ed||$c.y!==Fc||$c.z!==ld||$c.w!==Ed)E.vertexAttrib4f(hd,ed,Fc,ld,Ed),$c.x=ed,$c.y=Fc,$c.z=ld,$c.w=Ed;zd=K.call(this,J,k,f);Bd=!1;we=
null;ye=0;ve=!1;ge=he=0;ee=1;oe=0;be=5126;pe=Vc=Ac=je=0;w(zd)?(Bd=!0,we=Y.createStream(34962,zd),be=we.dtype):(we=Y.getBuffer(zd))?be=we.dtype:"constant"in zd?(ee=2,"number"===typeof zd.constant?(Ac=zd.constant,Vc=pe=je=0):(Ac=0<zd.constant.length?zd.constant[0]:0,Vc=1<zd.constant.length?zd.constant[1]:0,pe=2<zd.constant.length?zd.constant[2]:0,je=3<zd.constant.length?zd.constant[3]:0)):(we=w(zd.buffer)?Y.createStream(34962,zd.buffer):Y.getBuffer(zd.buffer),be="type"in zd?$d[zd.type]:we.dtype,ve=
!!zd.normalized,ge=zd.size|0,he=zd.offset|0,oe=zd.stride|0,ye=zd.divisor|0);le=Q.location;Fd=xc[le];if(1===ee){Fd.buffer||E.enableVertexAttribArray(le);Md=ge||4;if(Fd.type!==be||Fd.size!==Md||Fd.buffer!==we||Fd.normalized!==ve||Fd.offset!==he||Fd.stride!==oe)E.bindBuffer(34962,we.buffer),E.vertexAttribPointer(le,Md,be,ve,oe,he),Fd.type=be,Fd.size=Md,Fd.buffer=we,Fd.normalized=ve,Fd.offset=he,Fd.stride=oe;Fd.divisor!==ye&&(g.vertexAttribDivisorANGLE(le,ye),Fd.divisor=ye)}else if(Fd.buffer&&(E.disableVertexAttribArray(le),
Fd.buffer=null),Fd.x!==Ac||Fd.y!==Vc||Fd.z!==pe||Fd.w!==je)E.vertexAttrib4f(le,Ac,Vc,pe,je),Fd.x=Ac,Fd.y=Vc,Fd.z=pe,Fd.w=je;Nd=O.call(this,J,k,f);Od=!1;ke=null;Ge=0;xe=!1;Ye=ne=0;Pe=1;Me=0;qe=5126;Je=Ie=He=Ce=0;w(Nd)?(Od=!0,ke=Y.createStream(34962,Nd),qe=ke.dtype):(ke=Y.getBuffer(Nd))?qe=ke.dtype:"constant"in Nd?(Pe=2,"number"===typeof Nd.constant?(He=Nd.constant,Ie=Je=Ce=0):(He=0<Nd.constant.length?Nd.constant[0]:0,Ie=1<Nd.constant.length?Nd.constant[1]:0,Je=2<Nd.constant.length?Nd.constant[2]:0,
Ce=3<Nd.constant.length?Nd.constant[3]:0)):(ke=w(Nd.buffer)?Y.createStream(34962,Nd.buffer):Y.getBuffer(Nd.buffer),qe="type"in Nd?$d[Nd.type]:ke.dtype,xe=!!Nd.normalized,Ye=Nd.size|0,ne=Nd.offset|0,Me=Nd.stride|0,Ge=Nd.divisor|0);De=Zb.location;Hd=xc[De];if(1===Pe){Hd.buffer||E.enableVertexAttribArray(De);Rd=Ye||4;if(Hd.type!==qe||Hd.size!==Rd||Hd.buffer!==ke||Hd.normalized!==xe||Hd.offset!==ne||Hd.stride!==Me)E.bindBuffer(34962,ke.buffer),E.vertexAttribPointer(De,Rd,qe,xe,Me,ne),Hd.type=qe,Hd.size=
Rd,Hd.buffer=ke,Hd.normalized=xe,Hd.offset=ne,Hd.stride=Me;Hd.divisor!==Ge&&(g.vertexAttribDivisorANGLE(De,Ge),Hd.divisor=Ge)}else if(Hd.buffer&&(E.disableVertexAttribArray(De),Hd.buffer=null),Hd.x!==He||Hd.y!==Ie||Hd.z!==Je||Hd.w!==Ce)E.vertexAttrib4f(De,He,Ie,Je,Ce),Hd.x=He,Hd.y=Ie,Hd.z=Je,Hd.w=Ce;Zd=U.call(this,J,k,f);ce=!1;Ke=null;xd=0;Pd=!1;Le=ze=0;of=1;Xe=0;Qe=5126;Re=Ue=We=Ne=0;w(Zd)?(ce=!0,Ke=Y.createStream(34962,Zd),Qe=Ke.dtype):(Ke=Y.getBuffer(Zd))?Qe=Ke.dtype:"constant"in Zd?(of=2,"number"===
typeof Zd.constant?(We=Zd.constant,Ue=Re=Ne=0):(We=0<Zd.constant.length?Zd.constant[0]:0,Ue=1<Zd.constant.length?Zd.constant[1]:0,Re=2<Zd.constant.length?Zd.constant[2]:0,Ne=3<Zd.constant.length?Zd.constant[3]:0)):(Ke=w(Zd.buffer)?Y.createStream(34962,Zd.buffer):Y.getBuffer(Zd.buffer),Qe="type"in Zd?$d[Zd.type]:Ke.dtype,Pd=!!Zd.normalized,Le=Zd.size|0,ze=Zd.offset|0,Xe=Zd.stride|0,xd=Zd.divisor|0);Se=ja.location;Qd=xc[Se];if(1===of){Qd.buffer||E.enableVertexAttribArray(Se);Vd=Le||1;if(Qd.type!==Qe||
Qd.size!==Vd||Qd.buffer!==Ke||Qd.normalized!==Pd||Qd.offset!==ze||Qd.stride!==Xe)E.bindBuffer(34962,Ke.buffer),E.vertexAttribPointer(Se,Vd,Qe,Pd,Xe,ze),Qd.type=Qe,Qd.size=Vd,Qd.buffer=Ke,Qd.normalized=Pd,Qd.offset=ze,Qd.stride=Xe;Qd.divisor!==xd&&(g.vertexAttribDivisorANGLE(Se,xd),Qd.divisor=xd)}else if(Qd.buffer&&(E.disableVertexAttribArray(Se),Qd.buffer=null),Qd.x!==We||Qd.y!==Ue||Qd.z!==Re||Qd.w!==Ne)E.vertexAttrib4f(Se,We,Ue,Re,Ne),Qd.x=We,Qd.y=Ue,Qd.z=Re,Qd.w=Ne;Te=J.pixelRatio;f&&pf===Te||(pf=
Te,E.uniform1f(dc.location,Te));hf=G.call(this,J,k,f);bf=hf[0];ff=hf[1];f&&ef===bf&&gf===ff||(ef=bf,gf=ff,E.uniform2f(Ea.location,bf,ff));mf=k.scale;jf=mf[0];Af=mf[1];f&&nf===jf&&Bf===Af||(nf=jf,Bf=Af,E.uniform2f(Ia.location,jf,Af));Oe=k.scaleFract;Ae=Oe[0];lf=Oe[1];f&&kf===Ae&&Cf===lf||(kf=Ae,Cf=lf,E.uniform2f(W.location,Ae,lf));Ff=k.translate;yf=Ff[0];Ef=Ff[1];f&&Df===yf&&uf===Ef||(Df=yf,uf=Ef,E.uniform2f(ha.location,yf,Ef));vf=k.translateFract;sf=vf[0];xf=vf[1];f&&wf===sf&&Hf===xf||(wf=sf,Hf=xf,
E.uniform2f(ua.location,sf,xf));Jf=k.opacity;f&&Kf===Jf||(Kf=Jf,E.uniform1f(ca.location,Jf));Lf=k.elements;qf=null;(qf=(Qf=w(Lf))?tb.createStream(Lf):tb.getElements(Lf))&&E.bindBuffer(34963,qf.buffer.buffer);Gf=k.offset;if(rf=k.count)0<cb?qf?g.drawElementsInstancedANGLE(0,rf,qf.type,Gf<<(qf.type-5121>>1),cb):g.drawArraysInstancedANGLE(0,Gf,rf,cb):0>cb&&(qf?E.drawElements(0,rf,qf.type,Gf<<(qf.type-5121>>1)):E.drawArrays(0,Gf,rf)),J.viewportWidth=Ad,J.viewportHeight=Tb,Ib&&Y.destroyStream(dd),Ab&&Y.destroyStream(Ra),
Xa&&Y.destroyStream(Ya),xb&&Y.destroyStream(td),hc&&Y.destroyStream(Sc),Jd&&Y.destroyStream(id),Bd&&Y.destroyStream(we),Od&&Y.destroyStream(ke),ce&&Y.destroyStream(Ke),Qf&&tb.destroyStream(qf)}qa.unbind();ka.dirty=!0;ga.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(c){var d,f,g,k,h,n,q,B,A,D,C,R,I,K,O,L,G,P,S,V,U,aa,T,ba,Z,ea,ta,ra,oa,ma,qa,la,Na,La,ub,Wa,va,Ha,Bb,Sa,Gb,cb,Yb,Rb,gb,ac,Sb,Qb,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,
ya,wc,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,Id,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd,Jd,id,Yc,me,Ld,Wd,re,Ud,Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,we,ye,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ye;d=Wc.next;d!==Wc.cur&&(d?E.bindFramebuffer(36160,d.framebuffer):E.bindFramebuffer(36160,null),Wc.cur=d);if(ka.dirty){var Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,of,Xe,Qe,Ne,We,Ue,Re,Se,
Qd,Vd,Te,pf,hf,bf,ef,ff,gf;Pe=ia.dither;Pe!==ka.dither&&(Pe?E.enable(3024):E.disable(3024),ka.dither=Pe);Me=u[0];qe=u[1];if(Me!==da[0]||qe!==da[1])E.blendEquationSeparate(Me,qe),da[0]=Me,da[1]=qe;Ce=ia.depth_func;Ce!==ka.depth_func&&(E.depthFunc(Ce),ka.depth_func=Ce);He=ic[0];Ie=ic[1];if(He!==X[0]||Ie!==X[1])E.depthRange(He,Ie),X[0]=He,X[1]=Ie;Je=ia.depth_mask;Je!==ka.depth_mask&&(E.depthMask(Je),ka.depth_mask=Je);De=na[0];Hd=na[1];Rd=na[2];Zd=na[3];if(De!==l[0]||Hd!==l[1]||Rd!==l[2]||Zd!==l[3])E.colorMask(De,
Hd,Rd,Zd),l[0]=De,l[1]=Hd,l[2]=Rd,l[3]=Zd;ce=ia.cull_enable;ce!==ka.cull_enable&&(ce?E.enable(2884):E.disable(2884),ka.cull_enable=ce);Ke=ia.cull_face;Ke!==ka.cull_face&&(E.cullFace(Ke),ka.cull_face=Ke);xd=ia.frontFace;xd!==ka.frontFace&&(E.frontFace(xd),ka.frontFace=xd);Pd=ia.lineWidth;Pd!==ka.lineWidth&&(E.lineWidth(Pd),ka.lineWidth=Pd);ze=ia.polygonOffset_enable;ze!==ka.polygonOffset_enable&&(ze?E.enable(32823):E.disable(32823),ka.polygonOffset_enable=ze);Le=p[0];of=p[1];if(Le!==Hb[0]||of!==Hb[1])E.polygonOffset(Le,
of),Hb[0]=Le,Hb[1]=of;Xe=ia.sample_alpha;Xe!==ka.sample_alpha&&(Xe?E.enable(32926):E.disable(32926),ka.sample_alpha=Xe);Qe=ia.sample_enable;Qe!==ka.sample_enable&&(Qe?E.enable(32928):E.disable(32928),ka.sample_enable=Qe);Ne=zb[0];We=zb[1];if(Ne!==Ve[0]||We!==Ve[1])E.sampleCoverage(Ne,We),Ve[0]=Ne,Ve[1]=We;Ue=ia.stencil_mask;Ue!==ka.stencil_mask&&(E.stencilMask(Ue),ka.stencil_mask=Ue);Re=fe[0];Se=fe[1];Qd=fe[2];if(Re!==Kd[0]||Se!==Kd[1]||Qd!==Kd[2])E.stencilFunc(Re,Se,Qd),Kd[0]=Re,Kd[1]=Se,Kd[2]=Qd;
Vd=ie[0];Te=ie[1];pf=ie[2];hf=ie[3];if(Vd!==se[0]||Te!==se[1]||pf!==se[2]||hf!==se[3])E.stencilOpSeparate(Vd,Te,pf,hf),se[0]=Vd,se[1]=Te,se[2]=pf,se[3]=hf;bf=Ee[0];ef=Ee[1];ff=Ee[2];gf=Ee[3];if(bf!==nd[0]||ef!==nd[1]||ff!==nd[2]||gf!==nd[3])E.stencilOpSeparate(bf,ef,ff,gf),nd[0]=bf,nd[1]=ef,nd[2]=ff,nd[3]=gf}f=c.viewport;g=f.x|0;k=f.y|0;h="width"in f?f.width|0:J.framebufferWidth-g;n="height"in f?f.height|0:J.framebufferHeight-k;q=J.viewportWidth;J.viewportWidth=h;B=J.viewportHeight;J.viewportHeight=
n;E.viewport(g,k,h,n);Cd[0]=g;Cd[1]=k;Cd[2]=h;Cd[3]=n;E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);ka.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;E.disable(2929);ka.depth_enable=!1;A=c.viewport;D=A.x|0;C=A.y|0;R="width"in A?A.width|0:J.framebufferWidth-D;I="height"in A?A.height|0:J.framebufferHeight-C;E.scissor(D,C,R,I);te[0]=D;te[1]=C;te[2]=R;te[3]=I;E.enable(3089);ka.scissor_enable=!0;E.disable(2960);ka.stencil_enable=!1;if(K=ka.profile)O=
performance.now(),y.count++;E.useProgram(m.program);L=Lc.angle_instanced_arrays;ga.setVAO(null);G=N.call(this,J,c,0);P=!1;S=null;V=0;U=!1;T=aa=0;ba=1;Z=0;ea=5126;ma=oa=ra=ta=0;w(G)?(P=!0,S=Y.createStream(34962,G),ea=S.dtype):(S=Y.getBuffer(G))?ea=S.dtype:"constant"in G?(ba=2,"number"===typeof G.constant?(ra=G.constant,oa=ma=ta=0):(ra=0<G.constant.length?G.constant[0]:0,oa=1<G.constant.length?G.constant[1]:0,ma=2<G.constant.length?G.constant[2]:0,ta=3<G.constant.length?G.constant[3]:0)):(S=w(G.buffer)?
Y.createStream(34962,G.buffer):Y.getBuffer(G.buffer),ea="type"in G?$d[G.type]:S.dtype,U=!!G.normalized,T=G.size|0,aa=G.offset|0,Z=G.stride|0,V=G.divisor|0);qa=Wb.location;la=xc[qa];if(1===ba){la.buffer||E.enableVertexAttribArray(qa);Na=T||1;if(la.type!==ea||la.size!==Na||la.buffer!==S||la.normalized!==U||la.offset!==aa||la.stride!==Z)E.bindBuffer(34962,S.buffer),E.vertexAttribPointer(qa,Na,ea,U,Z,aa),la.type=ea,la.size=Na,la.buffer=S,la.normalized=U,la.offset=aa,la.stride=Z;la.divisor!==V&&(L.vertexAttribDivisorANGLE(qa,
V),la.divisor=V)}else if(la.buffer&&(E.disableVertexAttribArray(qa),la.buffer=null),la.x!==ra||la.y!==oa||la.z!==ma||la.w!==ta)E.vertexAttrib4f(qa,ra,oa,ma,ta),la.x=ra,la.y=oa,la.z=ma,la.w=ta;La=e.call(this,J,c,0);ub=!1;Wa=null;va=0;Ha=!1;Sa=Bb=0;Gb=1;cb=0;Yb=5126;Sb=ac=gb=Rb=0;w(La)?(ub=!0,Wa=Y.createStream(34962,La),Yb=Wa.dtype):(Wa=Y.getBuffer(La))?Yb=Wa.dtype:"constant"in La?(Gb=2,"number"===typeof La.constant?(gb=La.constant,ac=Sb=Rb=0):(gb=0<La.constant.length?La.constant[0]:0,ac=1<La.constant.length?
La.constant[1]:0,Sb=2<La.constant.length?La.constant[2]:0,Rb=3<La.constant.length?La.constant[3]:0)):(Wa=w(La.buffer)?Y.createStream(34962,La.buffer):Y.getBuffer(La.buffer),Yb="type"in La?$d[La.type]:Wa.dtype,Ha=!!La.normalized,Sa=La.size|0,Bb=La.offset|0,cb=La.stride|0,va=La.divisor|0);Qb=jc.location;Tb=xc[Qb];if(1===Gb){Tb.buffer||E.enableVertexAttribArray(Qb);Ma=Sa||1;if(Tb.type!==Yb||Tb.size!==Ma||Tb.buffer!==Wa||Tb.normalized!==Ha||Tb.offset!==Bb||Tb.stride!==cb)E.bindBuffer(34962,Wa.buffer),
E.vertexAttribPointer(Qb,Ma,Yb,Ha,cb,Bb),Tb.type=Yb,Tb.size=Ma,Tb.buffer=Wa,Tb.normalized=Ha,Tb.offset=Bb,Tb.stride=cb;Tb.divisor!==va&&(L.vertexAttribDivisorANGLE(Qb,va),Tb.divisor=va)}else if(Tb.buffer&&(E.disableVertexAttribArray(Qb),Tb.buffer=null),Tb.x!==gb||Tb.y!==ac||Tb.z!==Sb||Tb.w!==Rb)E.vertexAttrib4f(Qb,gb,ac,Sb,Rb),Tb.x=gb,Tb.y=ac,Tb.z=Sb,Tb.w=Rb;nb=b.call(this,J,c,0);vb=!1;hb=null;Pa=0;oc=!1;dd=Ib=0;db=1;kc=0;Hc=5126;sa=kb=jb=mc=0;w(nb)?(vb=!0,hb=Y.createStream(34962,nb),Hc=hb.dtype):
(hb=Y.getBuffer(nb))?Hc=hb.dtype:"constant"in nb?(db=2,"number"===typeof nb.constant?(jb=nb.constant,kb=sa=mc=0):(jb=0<nb.constant.length?nb.constant[0]:0,kb=1<nb.constant.length?nb.constant[1]:0,sa=2<nb.constant.length?nb.constant[2]:0,mc=3<nb.constant.length?nb.constant[3]:0)):(hb=w(nb.buffer)?Y.createStream(34962,nb.buffer):Y.getBuffer(nb.buffer),Hc="type"in nb?$d[nb.type]:hb.dtype,oc=!!nb.normalized,dd=nb.size|0,Ib=nb.offset|0,kc=nb.stride|0,Pa=nb.divisor|0);ob=nc.location;wa=xc[ob];if(1===db){wa.buffer||
E.enableVertexAttribArray(ob);Ua=dd||1;if(wa.type!==Hc||wa.size!==Ua||wa.buffer!==hb||wa.normalized!==oc||wa.offset!==Ib||wa.stride!==kc)E.bindBuffer(34962,hb.buffer),E.vertexAttribPointer(ob,Ua,Hc,oc,kc,Ib),wa.type=Hc,wa.size=Ua,wa.buffer=hb,wa.normalized=oc,wa.offset=Ib,wa.stride=kc;wa.divisor!==Pa&&(L.vertexAttribDivisorANGLE(ob,Pa),wa.divisor=Pa)}else if(wa.buffer&&(E.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==kb||wa.z!==sa||wa.w!==mc)E.vertexAttrib4f(ob,jb,kb,sa,mc),wa.x=
jb,wa.y=kb,wa.z=sa,wa.w=mc;bb=t.call(this,J,c,0);Aa=!1;eb=null;Ja=0;Cb=!1;Ra=Ab=0;yc=1;Jb=0;Za=5126;Ka=wc=ya=Ub=0;w(bb)?(Aa=!0,eb=Y.createStream(34962,bb),Za=eb.dtype):(eb=Y.getBuffer(bb))?Za=eb.dtype:"constant"in bb?(yc=2,"number"===typeof bb.constant?(ya=bb.constant,wc=Ka=Ub=0):(ya=0<bb.constant.length?bb.constant[0]:0,wc=1<bb.constant.length?bb.constant[1]:0,Ka=2<bb.constant.length?bb.constant[2]:0,Ub=3<bb.constant.length?bb.constant[3]:0)):(eb=w(bb.buffer)?Y.createStream(34962,bb.buffer):Y.getBuffer(bb.buffer),
Za="type"in bb?$d[bb.type]:eb.dtype,Cb=!!bb.normalized,Ra=bb.size|0,Ab=bb.offset|0,Jb=bb.stride|0,Ja=bb.divisor|0);Nb=qd.location;fb=xc[Nb];if(1===yc){fb.buffer||E.enableVertexAttribArray(Nb);ib=Ra||1;if(fb.type!==Za||fb.size!==ib||fb.buffer!==eb||fb.normalized!==Cb||fb.offset!==Ab||fb.stride!==Jb)E.bindBuffer(34962,eb.buffer),E.vertexAttribPointer(Nb,ib,Za,Cb,Jb,Ab),fb.type=Za,fb.size=ib,fb.buffer=eb,fb.normalized=Cb,fb.offset=Ab,fb.stride=Jb;fb.divisor!==Ja&&(L.vertexAttribDivisorANGLE(Nb,Ja),fb.divisor=
Ja)}else if(fb.buffer&&(E.disableVertexAttribArray(Nb),fb.buffer=null),fb.x!==ya||fb.y!==wc||fb.z!==Ka||fb.w!==Ub)E.vertexAttrib4f(Nb,ya,wc,Ka,Ub),fb.x=ya,fb.y=wc,fb.z=Ka,fb.w=Ub;za=a.call(this,J,c,0);ec=!1;Da=null;pb=0;qb=!1;Ya=Xa=0;lc=1;ad=0;uc=5126;Fa=bd=Lb=Va=0;w(za)?(ec=!0,Da=Y.createStream(34962,za),uc=Da.dtype):(Da=Y.getBuffer(za))?uc=Da.dtype:"constant"in za?(lc=2,"number"===typeof za.constant?(Lb=za.constant,bd=Fa=Va=0):(Lb=0<za.constant.length?za.constant[0]:0,bd=1<za.constant.length?za.constant[1]:
0,Fa=2<za.constant.length?za.constant[2]:0,Va=3<za.constant.length?za.constant[3]:0)):(Da=w(za.buffer)?Y.createStream(34962,za.buffer):Y.getBuffer(za.buffer),uc="type"in za?$d[za.type]:Da.dtype,qb=!!za.normalized,Ya=za.size|0,Xa=za.offset|0,ad=za.stride|0,pb=za.divisor|0);zc=sb.location;Qa=xc[zc];if(1===lc){Qa.buffer||E.enableVertexAttribArray(zc);Ba=Ya||1;if(Qa.type!==uc||Qa.size!==Ba||Qa.buffer!==Da||Qa.normalized!==qb||Qa.offset!==Xa||Qa.stride!==ad)E.bindBuffer(34962,Da.buffer),E.vertexAttribPointer(zc,
Ba,uc,qb,ad,Xa),Qa.type=uc,Qa.size=Ba,Qa.buffer=Da,Qa.normalized=qb,Qa.offset=Xa,Qa.stride=ad;Qa.divisor!==pb&&(L.vertexAttribDivisorANGLE(zc,pb),Qa.divisor=pb)}else if(Qa.buffer&&(E.disableVertexAttribArray(zc),Qa.buffer=null),Qa.x!==Lb||Qa.y!==bd||Qa.z!==Fa||Qa.w!==Va)E.vertexAttrib4f(zc,Lb,bd,Fa,Va),Qa.x=Lb,Qa.y=bd,Qa.z=Fa,Qa.w=Va;lb=x.call(this,J,c,0);wb=!1;Db=null;rb=0;vc=!1;td=xb=0;tc=1;Id=0;Nc=5126;cc=Vb=ud=gd=0;w(lb)?(wb=!0,Db=Y.createStream(34962,lb),Nc=Db.dtype):(Db=Y.getBuffer(lb))?Nc=
Db.dtype:"constant"in lb?(tc=2,"number"===typeof lb.constant?(ud=lb.constant,Vb=cc=gd=0):(ud=0<lb.constant.length?lb.constant[0]:0,Vb=1<lb.constant.length?lb.constant[1]:0,cc=2<lb.constant.length?lb.constant[2]:0,gd=3<lb.constant.length?lb.constant[3]:0)):(Db=w(lb.buffer)?Y.createStream(34962,lb.buffer):Y.getBuffer(lb.buffer),Nc="type"in lb?$d[lb.type]:Db.dtype,vc=!!lb.normalized,td=lb.size|0,xb=lb.offset|0,Id=lb.stride|0,rb=lb.divisor|0);Ob=$a.location;Ga=xc[Ob];if(1===tc){Ga.buffer||E.enableVertexAttribArray(Ob);
$b=td||1;if(Ga.type!==Nc||Ga.size!==$b||Ga.buffer!==Db||Ga.normalized!==vc||Ga.offset!==xb||Ga.stride!==Id)E.bindBuffer(34962,Db.buffer),E.vertexAttribPointer(Ob,$b,Nc,vc,Id,xb),Ga.type=Nc,Ga.size=$b,Ga.buffer=Db,Ga.normalized=vc,Ga.offset=xb,Ga.stride=Id;Ga.divisor!==rb&&(L.vertexAttribDivisorANGLE(Ob,rb),Ga.divisor=rb)}else if(Ga.buffer&&(E.disableVertexAttribArray(Ob),Ga.buffer=null),Ga.x!==ud||Ga.y!==Vb||Ga.z!==cc||Ga.w!==gd)E.vertexAttrib4f(Ob,ud,Vb,cc,gd),Ga.x=ud,Ga.y=Vb,Ga.z=cc,Ga.w=gd;mb=
z.call(this,J,c,0);yb=!1;Mb=null;Pb=0;fc=!1;Sc=hc=0;Cc=1;Dc=0;Ec=5126;Pc=Tc=Zc=Oc=0;w(mb)?(yb=!0,Mb=Y.createStream(34962,mb),Ec=Mb.dtype):(Mb=Y.getBuffer(mb))?Ec=Mb.dtype:"constant"in mb?(Cc=2,"number"===typeof mb.constant?(Zc=mb.constant,Tc=Pc=Oc=0):(Zc=0<mb.constant.length?mb.constant[0]:0,Tc=1<mb.constant.length?mb.constant[1]:0,Pc=2<mb.constant.length?mb.constant[2]:0,Oc=3<mb.constant.length?mb.constant[3]:0)):(Mb=w(mb.buffer)?Y.createStream(34962,mb.buffer):Y.getBuffer(mb.buffer),Ec="type"in
mb?$d[mb.type]:Mb.dtype,fc=!!mb.normalized,Sc=mb.size|0,hc=mb.offset|0,Dc=mb.stride|0,Pb=mb.divisor|0);Kb=Q.location;Fb=xc[Kb];if(1===Cc){Fb.buffer||E.enableVertexAttribArray(Kb);Qc=Sc||4;if(Fb.type!==Ec||Fb.size!==Qc||Fb.buffer!==Mb||Fb.normalized!==fc||Fb.offset!==hc||Fb.stride!==Dc)E.bindBuffer(34962,Mb.buffer),E.vertexAttribPointer(Kb,Qc,Ec,fc,Dc,hc),Fb.type=Ec,Fb.size=Qc,Fb.buffer=Mb,Fb.normalized=fc,Fb.offset=hc,Fb.stride=Dc;Fb.divisor!==Pb&&(L.vertexAttribDivisorANGLE(Kb,Pb),Fb.divisor=Pb)}else if(Fb.buffer&&
(E.disableVertexAttribArray(Kb),Fb.buffer=null),Fb.x!==Zc||Fb.y!==Tc||Fb.z!==Pc||Fb.w!==Oc)E.vertexAttrib4f(Kb,Zc,Tc,Pc,Oc),Fb.x=Zc,Fb.y=Tc,Fb.z=Pc,Fb.w=Oc;Ic=fa.call(this,J,c,0);Uc=!1;gc=null;Xc=0;yd=!1;id=Jd=0;Yc=1;me=0;Ld=5126;Gd=Ud=re=Wd=0;w(Ic)?(Uc=!0,gc=Y.createStream(34962,Ic),Ld=gc.dtype):(gc=Y.getBuffer(Ic))?Ld=gc.dtype:"constant"in Ic?(Yc=2,"number"===typeof Ic.constant?(re=Ic.constant,Ud=Gd=Wd=0):(re=0<Ic.constant.length?Ic.constant[0]:0,Ud=1<Ic.constant.length?Ic.constant[1]:0,Gd=2<Ic.constant.length?
Ic.constant[2]:0,Wd=3<Ic.constant.length?Ic.constant[3]:0)):(gc=w(Ic.buffer)?Y.createStream(34962,Ic.buffer):Y.getBuffer(Ic.buffer),Ld="type"in Ic?$d[Ic.type]:gc.dtype,yd=!!Ic.normalized,id=Ic.size|0,Jd=Ic.offset|0,me=Ic.stride|0,Xc=Ic.divisor|0);Ed=Zb.location;ed=xc[Ed];if(1===Yc){ed.buffer||E.enableVertexAttribArray(Ed);Fc=id||4;if(ed.type!==Ld||ed.size!==Fc||ed.buffer!==gc||ed.normalized!==yd||ed.offset!==Jd||ed.stride!==me)E.bindBuffer(34962,gc.buffer),E.vertexAttribPointer(Ed,Fc,Ld,yd,me,Jd),
ed.type=Ld,ed.size=Fc,ed.buffer=gc,ed.normalized=yd,ed.offset=Jd,ed.stride=me;ed.divisor!==Xc&&(L.vertexAttribDivisorANGLE(Ed,Xc),ed.divisor=Xc)}else if(ed.buffer&&(E.disableVertexAttribArray(Ed),ed.buffer=null),ed.x!==re||ed.y!==Ud||ed.z!==Gd||ed.w!==Wd)E.vertexAttrib4f(Ed,re,Ud,Gd,Wd),ed.x=re,ed.y=Ud,ed.z=Gd,ed.w=Wd;ld=M.call(this,J,c,0);hd=!1;$c=null;jd=0;zd=!1;we=Bd=0;ye=1;ve=0;he=5126;be=oe=ee=ge=0;w(ld)?(hd=!0,$c=Y.createStream(34962,ld),he=$c.dtype):($c=Y.getBuffer(ld))?he=$c.dtype:"constant"in
ld?(ye=2,"number"===typeof ld.constant?(ee=ld.constant,oe=be=ge=0):(ee=0<ld.constant.length?ld.constant[0]:0,oe=1<ld.constant.length?ld.constant[1]:0,be=2<ld.constant.length?ld.constant[2]:0,ge=3<ld.constant.length?ld.constant[3]:0)):($c=w(ld.buffer)?Y.createStream(34962,ld.buffer):Y.getBuffer(ld.buffer),he="type"in ld?$d[ld.type]:$c.dtype,zd=!!ld.normalized,we=ld.size|0,Bd=ld.offset|0,ve=ld.stride|0,jd=ld.divisor|0);je=ja.location;Ac=xc[je];if(1===ye){Ac.buffer||E.enableVertexAttribArray(je);Vc=
we||1;if(Ac.type!==he||Ac.size!==Vc||Ac.buffer!==$c||Ac.normalized!==zd||Ac.offset!==Bd||Ac.stride!==ve)E.bindBuffer(34962,$c.buffer),E.vertexAttribPointer(je,Vc,he,zd,ve,Bd),Ac.type=he,Ac.size=Vc,Ac.buffer=$c,Ac.normalized=zd,Ac.offset=Bd,Ac.stride=ve;Ac.divisor!==jd&&(L.vertexAttribDivisorANGLE(je,jd),Ac.divisor=jd)}else if(Ac.buffer&&(E.disableVertexAttribArray(je),Ac.buffer=null),Ac.x!==ee||Ac.y!==oe||Ac.z!==be||Ac.w!==ge)E.vertexAttrib4f(je,ee,oe,be,ge),Ac.x=ee,Ac.y=oe,Ac.z=be,Ac.w=ge;E.uniform1i(v.location,
!1);E.uniform1f(dc.location,J.pixelRatio);pe=H.call(this,J,c,0);E.uniform2f(Ea.location,pe[0],pe[1]);le=c.scale;E.uniform2f(Ia.location,le[0],le[1]);Fd=c.scaleFract;E.uniform2f(W.location,Fd[0],Fd[1]);Md=c.translate;E.uniform2f(ha.location,Md[0],Md[1]);Nd=c.translateFract;E.uniform2f(ua.location,Nd[0],Nd[1]);E.uniform1f(ca.location,c.opacity);E.uniform1i(Oa.location,r.bind());Od=c.elements;ke=null;(ke=(Ge=w(Od))?tb.createStream(Od):tb.getElements(Od))&&E.bindBuffer(34963,ke.buffer.buffer);xe=c.offset;
if(ne=c.count)Ye=Ca.instances,0<Ye?ke?L.drawElementsInstancedANGLE(0,ne,ke.type,xe<<(ke.type-5121>>1),Ye):L.drawArraysInstancedANGLE(0,xe,ne,Ye):0>Ye&&(ke?E.drawElements(0,ne,ke.type,xe<<(ke.type-5121>>1)):E.drawArrays(0,xe,ne)),ka.dirty=!0,ga.setVAO(null),J.viewportWidth=q,J.viewportHeight=B,K&&(y.cpuTime+=performance.now()-O),P&&Y.destroyStream(S),ub&&Y.destroyStream(Wa),vb&&Y.destroyStream(hb),Aa&&Y.destroyStream(eb),ec&&Y.destroyStream(Da),wb&&Y.destroyStream(Db),yb&&Y.destroyStream(Mb),Uc&&Y.destroyStream(gc),
hd&&Y.destroyStream($c),r.unbind(),Ge&&tb.destroyStream(ke)},scope:function(a,b,e){var h,l,m,p,t,r,u,v,x,N,F,E,G,z,H,K,O,M,Q,da,X,U,W,ga,Z,fa,ca,na,pa,ja,ha,la,xa,ma,qa,ua,Ia,Ea,Na,Oa,zb,Ha,xc,$a,Hb,gb,sb,Ma,nb,vb,hb,Pa,Qb,Ib,ic,db,qd,Wb,Zb,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,nc,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,dc,uc,Va,Lb,wc,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,jc,tc,Lc,Nc,nd,fe,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,Kd,Wc,id,Yc,Cd,Ld,ie,te,Ud,
Gd,Ed,ed,Fc,ld,hd,$c,jd,zd,Bd,se,Ee,ve,he,ge,ee,oe,be,je,Ac,Vc,pe,le,Fd,Md,Nd,Od,ke,Ge,xe,ne,Ve,Pe,Me,qe,Ce,He,Ie,Je,De,Hd,Rd,Zd,ce,Ke,xd,Pd,ze,Le,of,Xe,Qe,Ne,We,Ue,Re,Se,Qd,Vd,Te,pf,hf,bf,ef,ff,gf,mf,jf,nf,Af,Bf,Oe,Ae,kf,lf,Cf,Ff,yf,Df,Ef,uf,vf,sf,wf,xf,Hf,Jf,Kf,Lf,qf,Qf,Gf,rf,cg,Rf,Sf,pg,cf,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng;h=a.viewport;l=h.x|0;m=h.y|0;p="width"in h?h.width|
0:J.framebufferWidth-l;t="height"in h?h.height|0:J.framebufferHeight-m;r=J.viewportWidth;J.viewportWidth=p;u=J.viewportHeight;J.viewportHeight=t;v=Id[0];Id[0]=l;x=Id[1];Id[1]=m;N=Id[2];Id[2]=p;F=Id[3];Id[3]=t;E=ra[0];ra[0]=0;G=ra[1];ra[1]=0;z=ra[2];ra[2]=0;H=ra[3];ra[3]=1;K=ia.blend_enable;ia.blend_enable=!0;O=D[0];D[0]=770;M=D[1];D[1]=771;Q=D[2];D[2]=773;da=D[3];D[3]=1;X=ia.depth_enable;ia.depth_enable=!1;U=a.viewport;W=U.x|0;ga=U.y|0;Z="width"in U?U.width|0:J.framebufferWidth-W;fa="height"in U?
U.height|0:J.framebufferHeight-ga;ca=me[0];me[0]=W;na=me[1];me[1]=ga;pa=me[2];me[2]=Z;ja=me[3];me[3]=fa;ha=ia.scissor_enable;ia.scissor_enable=!0;la=ia.stencil_enable;ia.stencil_enable=!1;if(xa=ka.profile)ma=performance.now(),y.count++;qa=a.elements;ua=null;ua=(Ia=w(qa))?tb.createStream(qa):tb.getElements(qa);Ea=Ca.elements;Ca.elements=ua;Na=a.offset;Oa=Ca.offset;Ca.offset=Na;zb=a.count;Ha=Ca.count;Ca.count=zb;xc=Ca.primitive;Ca.primitive=0;$a=S[45];S[45]=!1;Hb=a.markerTexture;gb=S[48];S[48]=Hb;sb=
a.opacity;Ma=S[10];S[10]=sb;nb=C.call(this,J,a,e);vb=S[46];S[46]=nb;hb=S[47];S[47]=A;Pa=J.pixelRatio;Qb=S[34];S[34]=Pa;Ib=a.scale;ic=S[6];S[6]=Ib;db=a.scaleFract;qd=S[7];S[7]=db;Wb=a.translate;Zb=S[8];S[8]=Wb;jb=a.translateFract;kb=S[9];S[9]=jb;sa=B.call(this,J,a,e);ob=!1;wa=null;Ua=0;bb=!1;eb=Aa=0;Ja=1;Cb=0;Ab=5126;Za=Jb=yc=Ra=0;w(sa)?(ob=!0,wa=Y.createStream(34962,sa),Ab=wa.dtype):(wa=Y.getBuffer(sa))?Ab=wa.dtype:"constant"in sa?(Ja=2,"number"===typeof sa.constant?(yc=sa.constant,Jb=Za=Ra=0):(yc=
0<sa.constant.length?sa.constant[0]:0,Jb=1<sa.constant.length?sa.constant[1]:0,Za=2<sa.constant.length?sa.constant[2]:0,Ra=3<sa.constant.length?sa.constant[3]:0)):(wa=w(sa.buffer)?Y.createStream(34962,sa.buffer):Y.getBuffer(sa.buffer),Ab="type"in sa?$d[sa.type]:wa.dtype,bb=!!sa.normalized,eb=sa.size|0,Aa=sa.offset|0,Cb=sa.stride|0,Ua=sa.divisor|0);Ub=P.buffer;P.buffer=wa;ya=P.divisor;P.divisor=Ua;nc=P.normalized;P.normalized=bb;Ka=P.offset;P.offset=Aa;Nb=P.size;P.size=eb;fb=P.state;P.state=Ja;ib=
P.stride;P.stride=Cb;za=P.type;P.type=Ab;ec=P.w;P.w=Ra;Da=P.x;P.x=yc;pb=P.y;P.y=Jb;qb=P.z;P.z=Za;Xa=R.call(this,J,a,e);Ya=!1;lc=null;dc=0;uc=!1;Lb=Va=0;wc=1;Fa=0;zc=5126;wb=lb=Ba=Qa=0;w(Xa)?(Ya=!0,lc=Y.createStream(34962,Xa),zc=lc.dtype):(lc=Y.getBuffer(Xa))?zc=lc.dtype:"constant"in Xa?(wc=2,"number"===typeof Xa.constant?(Ba=Xa.constant,lb=wb=Qa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?Xa.constant[1]:0,wb=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:
0)):(lc=w(Xa.buffer)?Y.createStream(34962,Xa.buffer):Y.getBuffer(Xa.buffer),zc="type"in Xa?$d[Xa.type]:lc.dtype,uc=!!Xa.normalized,Lb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,dc=Xa.divisor|0);Db=L.buffer;L.buffer=lc;rb=L.divisor;L.divisor=dc;vc=L.normalized;L.normalized=uc;xb=L.offset;L.offset=Va;jc=L.size;L.size=Lb;tc=L.state;L.state=wc;Lc=L.stride;L.stride=Fa;Nc=L.type;L.type=zc;nd=L.w;L.w=Qa;fe=L.x;L.x=Ba;Vb=L.y;L.y=lb;cc=L.z;L.z=wb;Ob=T.call(this,J,a,e);Ga=!1;$b=null;mb=0;yb=!1;Pb=Mb=0;fc=1;hc=
0;Sc=5126;Oc=Ec=Dc=Cc=0;w(Ob)?(Ga=!0,$b=Y.createStream(34962,Ob),Sc=$b.dtype):($b=Y.getBuffer(Ob))?Sc=$b.dtype:"constant"in Ob?(fc=2,"number"===typeof Ob.constant?(Dc=Ob.constant,Ec=Oc=Cc=0):(Dc=0<Ob.constant.length?Ob.constant[0]:0,Ec=1<Ob.constant.length?Ob.constant[1]:0,Oc=2<Ob.constant.length?Ob.constant[2]:0,Cc=3<Ob.constant.length?Ob.constant[3]:0)):($b=w(Ob.buffer)?Y.createStream(34962,Ob.buffer):Y.getBuffer(Ob.buffer),Sc="type"in Ob?$d[Ob.type]:$b.dtype,yb=!!Ob.normalized,Pb=Ob.size|0,Mb=
Ob.offset|0,hc=Ob.stride|0,mb=Ob.divisor|0);Zc=d.buffer;d.buffer=$b;Tc=d.divisor;d.divisor=mb;Pc=d.normalized;d.normalized=yb;Kb=d.offset;d.offset=Mb;Fb=d.size;d.size=Pb;Qc=d.state;d.state=fc;Ic=d.stride;d.stride=hc;Uc=d.type;d.type=Sc;gc=d.w;d.w=Cc;Xc=d.x;d.x=Dc;Kd=d.y;d.y=Ec;Wc=d.z;d.z=Oc;id=f.call(this,J,a,e);Yc=!1;Cd=null;Ld=0;ie=!1;Ud=te=0;Gd=1;Ed=0;ed=5126;$c=hd=ld=Fc=0;w(id)?(Yc=!0,Cd=Y.createStream(34962,id),ed=Cd.dtype):(Cd=Y.getBuffer(id))?ed=Cd.dtype:"constant"in id?(Gd=2,"number"===typeof id.constant?
(ld=id.constant,hd=$c=Fc=0):(ld=0<id.constant.length?id.constant[0]:0,hd=1<id.constant.length?id.constant[1]:0,$c=2<id.constant.length?id.constant[2]:0,Fc=3<id.constant.length?id.constant[3]:0)):(Cd=w(id.buffer)?Y.createStream(34962,id.buffer):Y.getBuffer(id.buffer),ed="type"in id?$d[id.type]:Cd.dtype,ie=!!id.normalized,Ud=id.size|0,te=id.offset|0,Ed=id.stride|0,Ld=id.divisor|0);jd=g.buffer;g.buffer=Cd;zd=g.divisor;g.divisor=Ld;Bd=g.normalized;g.normalized=ie;se=g.offset;g.offset=te;Ee=g.size;g.size=
Ud;ve=g.state;g.state=Gd;he=g.stride;g.stride=Ed;ge=g.type;g.type=ed;ee=g.w;g.w=Fc;oe=g.x;g.x=ld;be=g.y;g.y=hd;je=g.z;g.z=$c;Ac=n.call(this,J,a,e);Vc=!1;pe=null;le=0;Fd=!1;Nd=Md=0;Od=1;ke=0;Ge=5126;Pe=Ve=ne=xe=0;w(Ac)?(Vc=!0,pe=Y.createStream(34962,Ac),Ge=pe.dtype):(pe=Y.getBuffer(Ac))?Ge=pe.dtype:"constant"in Ac?(Od=2,"number"===typeof Ac.constant?(ne=Ac.constant,Ve=Pe=xe=0):(ne=0<Ac.constant.length?Ac.constant[0]:0,Ve=1<Ac.constant.length?Ac.constant[1]:0,Pe=2<Ac.constant.length?Ac.constant[2]:
0,xe=3<Ac.constant.length?Ac.constant[3]:0)):(pe=w(Ac.buffer)?Y.createStream(34962,Ac.buffer):Y.getBuffer(Ac.buffer),Ge="type"in Ac?$d[Ac.type]:pe.dtype,Fd=!!Ac.normalized,Nd=Ac.size|0,Md=Ac.offset|0,ke=Ac.stride|0,le=Ac.divisor|0);Me=V.buffer;V.buffer=pe;qe=V.divisor;V.divisor=le;Ce=V.normalized;V.normalized=Fd;He=V.offset;V.offset=Md;Ie=V.size;V.size=Nd;Je=V.state;V.state=Od;De=V.stride;V.stride=ke;Hd=V.type;V.type=Ge;Rd=V.w;V.w=xe;Zd=V.x;V.x=ne;ce=V.y;V.y=Ve;Ke=V.z;V.z=Pe;xd=aa.call(this,J,a,e);
Pd=!1;ze=null;Le=0;of=!1;Qe=Xe=0;Ne=1;We=0;Ue=5126;Vd=Qd=Se=Re=0;w(xd)?(Pd=!0,ze=Y.createStream(34962,xd),Ue=ze.dtype):(ze=Y.getBuffer(xd))?Ue=ze.dtype:"constant"in xd?(Ne=2,"number"===typeof xd.constant?(Se=xd.constant,Qd=Vd=Re=0):(Se=0<xd.constant.length?xd.constant[0]:0,Qd=1<xd.constant.length?xd.constant[1]:0,Vd=2<xd.constant.length?xd.constant[2]:0,Re=3<xd.constant.length?xd.constant[3]:0)):(ze=w(xd.buffer)?Y.createStream(34962,xd.buffer):Y.getBuffer(xd.buffer),Ue="type"in xd?$d[xd.type]:ze.dtype,
of=!!xd.normalized,Qe=xd.size|0,Xe=xd.offset|0,We=xd.stride|0,Le=xd.divisor|0);Te=q.buffer;q.buffer=ze;pf=q.divisor;q.divisor=Le;hf=q.normalized;q.normalized=of;bf=q.offset;q.offset=Xe;ef=q.size;q.size=Qe;ff=q.state;q.state=Ne;gf=q.stride;q.stride=We;mf=q.type;q.type=Ue;jf=q.w;q.w=Re;nf=q.x;q.x=Se;Af=q.y;q.y=Qd;Bf=q.z;q.z=Vd;Oe=oa.call(this,J,a,e);Ae=!1;kf=null;lf=0;Cf=!1;yf=Ff=0;Df=1;Ef=0;uf=5126;xf=wf=sf=vf=0;w(Oe)?(Ae=!0,kf=Y.createStream(34962,Oe),uf=kf.dtype):(kf=Y.getBuffer(Oe))?uf=kf.dtype:
"constant"in Oe?(Df=2,"number"===typeof Oe.constant?(sf=Oe.constant,wf=xf=vf=0):(sf=0<Oe.constant.length?Oe.constant[0]:0,wf=1<Oe.constant.length?Oe.constant[1]:0,xf=2<Oe.constant.length?Oe.constant[2]:0,vf=3<Oe.constant.length?Oe.constant[3]:0)):(kf=w(Oe.buffer)?Y.createStream(34962,Oe.buffer):Y.getBuffer(Oe.buffer),uf="type"in Oe?$d[Oe.type]:kf.dtype,Cf=!!Oe.normalized,yf=Oe.size|0,Ff=Oe.offset|0,Ef=Oe.stride|0,lf=Oe.divisor|0);Hf=I.buffer;I.buffer=kf;Jf=I.divisor;I.divisor=lf;Kf=I.normalized;I.normalized=
Cf;Lf=I.offset;I.offset=Ff;qf=I.size;I.size=yf;Qf=I.state;I.state=Df;Gf=I.stride;I.stride=Ef;rf=I.type;I.type=uf;cg=I.w;I.w=vf;Rf=I.x;I.x=sf;Sf=I.y;I.y=wf;pg=I.z;I.z=xf;cf=ea.call(this,J,a,e);$e=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;Yf=Xf=Wf=Tf=0;w(cf)?($e=!0,Mf=Y.createStream(34962,cf),Vf=Mf.dtype):(Mf=Y.getBuffer(cf))?Vf=Mf.dtype:"constant"in cf?(gg=2,"number"===typeof cf.constant?(Wf=cf.constant,Xf=Yf=Tf=0):(Wf=0<cf.constant.length?cf.constant[0]:0,Xf=1<cf.constant.length?cf.constant[1]:
0,Yf=2<cf.constant.length?cf.constant[2]:0,Tf=3<cf.constant.length?cf.constant[3]:0)):(Mf=w(cf.buffer)?Y.createStream(34962,cf.buffer):Y.getBuffer(cf.buffer),Vf="type"in cf?$d[cf.type]:Mf.dtype,dg=!!cf.normalized,fg=cf.size|0,eg=cf.offset|0,hg=cf.stride|0,Nf=cf.divisor|0);ig=c.buffer;c.buffer=Mf;qg=c.divisor;c.divisor=Nf;rg=c.normalized;c.normalized=dg;sg=c.offset;c.offset=eg;tg=c.size;c.size=fg;ug=c.state;c.state=gg;vg=c.stride;c.stride=hg;wg=c.type;c.type=Vf;xg=c.w;c.w=Tf;yg=c.x;c.x=Wf;zg=c.y;c.y=
Xf;Ag=c.z;c.z=Yf;df=k.call(this,J,a,e);af=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;w(df)?(af=!0,Of=Y.createStream(34962,df),Zf=Of.dtype):(Of=Y.getBuffer(df))?Zf=Of.dtype:"constant"in df?(mg=2,"number"===typeof df.constant?($f=df.constant,ag=bg=Uf=0):($f=0<df.constant.length?df.constant[0]:0,ag=1<df.constant.length?df.constant[1]:0,bg=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Of=w(df.buffer)?Y.createStream(34962,df.buffer):Y.getBuffer(df.buffer),
Zf="type"in df?$d[df.type]:Of.dtype,jg=!!df.normalized,lg=df.size|0,kg=df.offset|0,ng=df.stride|0,Pf=df.divisor|0);og=ba.buffer;ba.buffer=Of;Bg=ba.divisor;ba.divisor=Pf;Cg=ba.normalized;ba.normalized=jg;Dg=ba.offset;ba.offset=kg;Eg=ba.size;ba.size=lg;Fg=ba.state;ba.state=mg;Gg=ba.stride;ba.stride=ng;Hg=ba.type;ba.type=Zf;Ig=ba.w;ba.w=Uf;Jg=ba.x;ba.x=$f;Kg=ba.y;ba.y=ag;Lg=ba.z;ba.z=bg;Mg=ta.vert;ta.vert=59;Ng=ta.frag;ta.frag=58;ka.dirty=!0;b(J,a,e);J.viewportWidth=r;J.viewportHeight=u;Id[0]=v;Id[1]=
x;Id[2]=N;Id[3]=F;ra[0]=E;ra[1]=G;ra[2]=z;ra[3]=H;ia.blend_enable=K;D[0]=O;D[1]=M;D[2]=Q;D[3]=da;ia.depth_enable=X;me[0]=ca;me[1]=na;me[2]=pa;me[3]=ja;ia.scissor_enable=ha;ia.stencil_enable=la;xa&&(y.cpuTime+=performance.now()-ma);Ia&&tb.destroyStream(ua);Ca.elements=Ea;Ca.offset=Oa;Ca.count=Ha;Ca.primitive=xc;S[45]=$a;S[48]=gb;S[10]=Ma;S[46]=vb;S[47]=hb;S[34]=Qb;S[6]=ic;S[7]=qd;S[8]=Zb;S[9]=kb;ob&&Y.destroyStream(wa);P.buffer=Ub;P.divisor=ya;P.normalized=nc;P.offset=Ka;P.size=Nb;P.state=fb;P.stride=
ib;P.type=za;P.w=ec;P.x=Da;P.y=pb;P.z=qb;Ya&&Y.destroyStream(lc);L.buffer=Db;L.divisor=rb;L.normalized=vc;L.offset=xb;L.size=jc;L.state=tc;L.stride=Lc;L.type=Nc;L.w=nd;L.x=fe;L.y=Vb;L.z=cc;Ga&&Y.destroyStream($b);d.buffer=Zc;d.divisor=Tc;d.normalized=Pc;d.offset=Kb;d.size=Fb;d.state=Qc;d.stride=Ic;d.type=Uc;d.w=gc;d.x=Xc;d.y=Kd;d.z=Wc;Yc&&Y.destroyStream(Cd);g.buffer=jd;g.divisor=zd;g.normalized=Bd;g.offset=se;g.size=Ee;g.state=ve;g.stride=he;g.type=ge;g.w=ee;g.x=oe;g.y=be;g.z=je;Vc&&Y.destroyStream(pe);
V.buffer=Me;V.divisor=qe;V.normalized=Ce;V.offset=He;V.size=Ie;V.state=Je;V.stride=De;V.type=Hd;V.w=Rd;V.x=Zd;V.y=ce;V.z=Ke;Pd&&Y.destroyStream(ze);q.buffer=Te;q.divisor=pf;q.normalized=hf;q.offset=bf;q.size=ef;q.state=ff;q.stride=gf;q.type=mf;q.w=jf;q.x=nf;q.y=Af;q.z=Bf;Ae&&Y.destroyStream(kf);I.buffer=Hf;I.divisor=Jf;I.normalized=Kf;I.offset=Lf;I.size=qf;I.state=Qf;I.stride=Gf;I.type=rf;I.w=cg;I.x=Rf;I.y=Sf;I.z=pg;$e&&Y.destroyStream(Mf);c.buffer=ig;c.divisor=qg;c.normalized=rg;c.offset=sg;c.size=
tg;c.state=ug;c.stride=vg;c.type=wg;c.w=xg;c.x=yg;c.y=zg;c.z=Ag;af&&Y.destroyStream(Of);ba.buffer=og;ba.divisor=Bg;ba.normalized=Cg;ba.offset=Dg;ba.size=Eg;ba.state=Fg;ba.stride=Gg;ba.type=Hg;ba.w=Ig;ba.x=Jg;ba.y=Kg;ba.z=Lg;ta.vert=Mg;ta.frag=Ng;ka.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(h,y,m,N,e,b,t,a,x,z,T,M,H,r,C,A,B,P,R,L,Ha,d,f,g,n,V,aa,q,oa,I,ea,c,k,ba,la,Qb,gb,wc,ma,
Na){var Z,K,O,U,qa,G,Zb,$a,Q,v,ja,ca,Ea,Oa,dc,Ia,W,sb,ha,ua,Wb,nc,jc,qd,xc,Y,J,ka,Ca,tb,Lc,Wc,E,w,ia,ta,S,ga,ra,F,u;Z=h.attributes;K=h.buffer;O=h.context;U=h.current;qa=h.draw;G=h.elements;Zb=h.extensions;$a=h.framebuffer;Q=h.gl;v=h.isBufferArgs;ja=h.next;ca=h.shader;Ea=h.uniforms;Oa=h.vao;dc=ja.blend_color;Ia=U.blend_color;W=ja.blend_equation;sb=U.blend_equation;ha=ja.blend_func;ua=U.blend_func;Wb=ja.colorMask;nc=U.colorMask;jc=ja.depth_range;qd=U.depth_range;xc=ja.polygonOffset_offset;Y=U.polygonOffset_offset;
J=ja.sample_coverage;ka=U.sample_coverage;Ca=ja.scissor_box;tb=U.scissor_box;Lc=ja.stencil_func;Wc=U.stencil_func;E=ja.stencil_opBack;w=U.stencil_opBack;ia=ja.stencil_opFront;ta=U.stencil_opFront;S=ja.viewport;ga=U.viewport;ra={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};F={offset:4,stride:8};u={offset:0,stride:8};return{batch:function(a,b){var e,h,l,m,t,p,r,x,A,B,N,C,z;e=$a.next;e!==$a.cur&&(e?Q.bindFramebuffer(36160,e.framebuffer):Q.bindFramebuffer(36160,
null),$a.cur=e);if(U.dirty){var H,M,S,T,fa,ca,pa,ha,Ea,dc,tf,vd,Fe,Sd,Td,de,Yd,od,kd,sd,md,cd,pc,pd,fd,Mc,rc,ab,Jc,Eb,qc,Ta,Kc,bc,sc,Dd,wd,Bc,Xb;H=ja.dither;H!==U.dither&&(H?Q.enable(3024):Q.disable(3024),U.dither=H);M=W[0];S=W[1];if(M!==sb[0]||S!==sb[1])Q.blendEquationSeparate(M,S),sb[0]=M,sb[1]=S;T=ja.depth_func;T!==U.depth_func&&(Q.depthFunc(T),U.depth_func=T);fa=jc[0];ca=jc[1];if(fa!==qd[0]||ca!==qd[1])Q.depthRange(fa,ca),qd[0]=fa,qd[1]=ca;pa=ja.depth_mask;pa!==U.depth_mask&&(Q.depthMask(pa),
U.depth_mask=pa);ha=Wb[0];Ea=Wb[1];dc=Wb[2];tf=Wb[3];if(ha!==nc[0]||Ea!==nc[1]||dc!==nc[2]||tf!==nc[3])Q.colorMask(ha,Ea,dc,tf),nc[0]=ha,nc[1]=Ea,nc[2]=dc,nc[3]=tf;vd=ja.cull_enable;vd!==U.cull_enable&&(vd?Q.enable(2884):Q.disable(2884),U.cull_enable=vd);Fe=ja.cull_face;Fe!==U.cull_face&&(Q.cullFace(Fe),U.cull_face=Fe);Sd=ja.frontFace;Sd!==U.frontFace&&(Q.frontFace(Sd),U.frontFace=Sd);Td=ja.lineWidth;Td!==U.lineWidth&&(Q.lineWidth(Td),U.lineWidth=Td);de=ja.polygonOffset_enable;de!==U.polygonOffset_enable&&
(de?Q.enable(32823):Q.disable(32823),U.polygonOffset_enable=de);Yd=xc[0];od=xc[1];if(Yd!==Y[0]||od!==Y[1])Q.polygonOffset(Yd,od),Y[0]=Yd,Y[1]=od;kd=ja.sample_alpha;kd!==U.sample_alpha&&(kd?Q.enable(32926):Q.disable(32926),U.sample_alpha=kd);sd=ja.sample_enable;sd!==U.sample_enable&&(sd?Q.enable(32928):Q.disable(32928),U.sample_enable=sd);md=J[0];cd=J[1];if(md!==ka[0]||cd!==ka[1])Q.sampleCoverage(md,cd),ka[0]=md,ka[1]=cd;pc=ja.stencil_mask;pc!==U.stencil_mask&&(Q.stencilMask(pc),U.stencil_mask=pc);
pd=Lc[0];fd=Lc[1];Mc=Lc[2];if(pd!==Wc[0]||fd!==Wc[1]||Mc!==Wc[2])Q.stencilFunc(pd,fd,Mc),Wc[0]=pd,Wc[1]=fd,Wc[2]=Mc;rc=ia[0];ab=ia[1];Jc=ia[2];Eb=ia[3];if(rc!==ta[0]||ab!==ta[1]||Jc!==ta[2]||Eb!==ta[3])Q.stencilOpSeparate(rc,ab,Jc,Eb),ta[0]=rc,ta[1]=ab,ta[2]=Jc,ta[3]=Eb;qc=E[0];Ta=E[1];Kc=E[2];bc=E[3];if(qc!==w[0]||Ta!==w[1]||Kc!==w[2]||bc!==w[3])Q.stencilOpSeparate(qc,Ta,Kc,bc),w[0]=qc,w[1]=Ta,w[2]=Kc,w[3]=bc;sc=ja.scissor_enable;sc!==U.scissor_enable&&(sc?Q.enable(3089):Q.disable(3089),U.scissor_enable=
sc);Dd=Ca[0];wd=Ca[1];Bc=Ca[2];Xb=Ca[3];if(Dd!==tb[0]||wd!==tb[1]||Bc!==tb[2]||Xb!==tb[3])Q.scissor(Dd,wd,Bc,Xb),tb[0]=Dd,tb[1]=wd,tb[2]=Bc,tb[3]=Xb}h=this.viewport;l=h.x|0;m=h.y|0;t="width"in h?h.width|0:O.framebufferWidth-l;p="height"in h?h.height|0:O.framebufferHeight-m;r=O.viewportWidth;O.viewportWidth=t;x=O.viewportHeight;O.viewportHeight=p;Q.viewport(l,m,t,p);ga[0]=l;ga[1]=m;ga[2]=t;ga[3]=p;Q.blendColor(0,0,0,1);Ia[0]=0;Ia[1]=0;Ia[2]=0;Ia[3]=1;Q.enable(3042);U.blend_enable=!0;Q.blendFuncSeparate(770,
771,773,1);ua[0]=770;ua[1]=771;ua[2]=773;ua[3]=1;Q.disable(2929);U.depth_enable=!1;Q.disable(2960);U.stencil_enable=!1;if(A=U.profile)B=performance.now(),y.count+=b;Q.useProgram(P.program);N=Zb.angle_instanced_arrays;var Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb;Oa.setVAO(null);u.buffer=this.sizeBuffer;Gc=!1;Rc=null;La=0;ub=!1;va=
Wa=0;rd=1;Bb=0;Sa=5126;Rb=Yb=cb=Gb=0;v(u)?(Gc=!0,Rc=K.createStream(34962,u),Sa=Rc.dtype):(Rc=K.getBuffer(u))?Sa=Rc.dtype:"constant"in u?(rd=2,"number"===typeof u.constant?(cb=u.constant,Yb=Rb=Gb=0):(cb=0<u.constant.length?u.constant[0]:0,Yb=1<u.constant.length?u.constant[1]:0,Rb=2<u.constant.length?u.constant[2]:0,Gb=3<u.constant.length?u.constant[3]:0)):(Rc=v(u.buffer)?K.createStream(34962,u.buffer):K.getBuffer(u.buffer),Sa="type"in u?ra[u.type]:Rc.dtype,ub=!!u.normalized,va=u.size|0,Wa=u.offset|
0,Bb=u.stride|0,La=u.divisor|0);ae=Na.location;ac=Z[ae];if(1===rd){ac.buffer||Q.enableVertexAttribArray(ae);Sb=va||1;if(ac.type!==Sa||ac.size!==Sb||ac.buffer!==Rc||ac.normalized!==ub||ac.offset!==Wa||ac.stride!==Bb)Q.bindBuffer(34962,Rc.buffer),Q.vertexAttribPointer(ae,Sb,Sa,ub,Bb,Wa),ac.type=Sa,ac.size=Sb,ac.buffer=Rc,ac.normalized=ub,ac.offset=Wa,ac.stride=Bb;ac.divisor!==La&&(N.vertexAttribDivisorANGLE(ae,La),ac.divisor=La)}else if(ac.buffer&&(Q.disableVertexAttribArray(ae),ac.buffer=null),ac.x!==
cb||ac.y!==Yb||ac.z!==Rb||ac.w!==Gb)Q.vertexAttrib4f(ae,cb,Yb,Rb,Gb),ac.x=cb,ac.y=Yb,ac.z=Rb,ac.w=Gb;F.buffer=this.sizeBuffer;Ad=!1;Tb=null;Ma=0;nb=!1;hb=vb=0;Pa=1;oc=0;Ib=5126;Hc=kc=db=dd=0;v(F)?(Ad=!0,Tb=K.createStream(34962,F),Ib=Tb.dtype):(Tb=K.getBuffer(F))?Ib=Tb.dtype:"constant"in F?(Pa=2,"number"===typeof F.constant?(db=F.constant,kc=Hc=dd=0):(db=0<F.constant.length?F.constant[0]:0,kc=1<F.constant.length?F.constant[1]:0,Hc=2<F.constant.length?F.constant[2]:0,dd=3<F.constant.length?F.constant[3]:
0)):(Tb=v(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),Ib="type"in F?ra[F.type]:Tb.dtype,nb=!!F.normalized,hb=F.size|0,vb=F.offset|0,oc=F.stride|0,Ma=F.divisor|0);mc=I.location;jb=Z[mc];if(1===Pa){jb.buffer||Q.enableVertexAttribArray(mc);kb=hb||1;if(jb.type!==Ib||jb.size!==kb||jb.buffer!==Tb||jb.normalized!==nb||jb.offset!==vb||jb.stride!==oc)Q.bindBuffer(34962,Tb.buffer),Q.vertexAttribPointer(mc,kb,Ib,nb,oc,vb),jb.type=Ib,jb.size=kb,jb.buffer=Tb,jb.normalized=nb,jb.offset=vb,jb.stride=
oc;jb.divisor!==Ma&&(N.vertexAttribDivisorANGLE(mc,Ma),jb.divisor=Ma)}else if(jb.buffer&&(Q.disableVertexAttribArray(mc),jb.buffer=null),jb.x!==db||jb.y!==kc||jb.z!==Hc||jb.w!==dd)Q.vertexAttrib4f(mc,db,kc,Hc,dd),jb.x=db,jb.y=kc,jb.z=Hc,jb.w=dd;sa=this.charBuffer;ob=!1;wa=null;Ua=0;bb=!1;eb=Aa=0;Ja=1;Cb=0;Ab=5126;Za=Jb=yc=Ra=0;v(sa)?(ob=!0,wa=K.createStream(34962,sa),Ab=wa.dtype):(wa=K.getBuffer(sa))?Ab=wa.dtype:"constant"in sa?(Ja=2,"number"===typeof sa.constant?(yc=sa.constant,Jb=Za=Ra=0):(yc=0<
sa.constant.length?sa.constant[0]:0,Jb=1<sa.constant.length?sa.constant[1]:0,Za=2<sa.constant.length?sa.constant[2]:0,Ra=3<sa.constant.length?sa.constant[3]:0)):(wa=v(sa.buffer)?K.createStream(34962,sa.buffer):K.getBuffer(sa.buffer),Ab="type"in sa?ra[sa.type]:wa.dtype,bb=!!sa.normalized,eb=sa.size|0,Aa=sa.offset|0,Cb=sa.stride|0,Ua=sa.divisor|0);Ub=oa.location;ya=Z[Ub];if(1===Ja){ya.buffer||Q.enableVertexAttribArray(Ub);Be=eb||1;if(ya.type!==Ab||ya.size!==Be||ya.buffer!==wa||ya.normalized!==bb||ya.offset!==
Aa||ya.stride!==Cb)Q.bindBuffer(34962,wa.buffer),Q.vertexAttribPointer(Ub,Be,Ab,bb,Cb,Aa),ya.type=Ab,ya.size=Be,ya.buffer=wa,ya.normalized=bb,ya.offset=Aa,ya.stride=Cb;ya.divisor!==Ua&&(N.vertexAttribDivisorANGLE(Ub,Ua),ya.divisor=Ua)}else if(ya.buffer&&(Q.disableVertexAttribArray(Ub),ya.buffer=null),ya.x!==yc||ya.y!==Jb||ya.z!==Za||ya.w!==Ra)Q.vertexAttrib4f(Ub,yc,Jb,Za,Ra),ya.x=yc,ya.y=Jb,ya.z=Za,ya.w=Ra;Ka=this.position;Nb=!1;fb=null;ib=0;za=!1;Da=ec=0;pb=1;qb=0;Xa=5126;uc=ad=lc=Ya=0;v(Ka)?(Nb=
!0,fb=K.createStream(34962,Ka),Xa=fb.dtype):(fb=K.getBuffer(Ka))?Xa=fb.dtype:"constant"in Ka?(pb=2,"number"===typeof Ka.constant?(lc=Ka.constant,ad=uc=Ya=0):(lc=0<Ka.constant.length?Ka.constant[0]:0,ad=1<Ka.constant.length?Ka.constant[1]:0,uc=2<Ka.constant.length?Ka.constant[2]:0,Ya=3<Ka.constant.length?Ka.constant[3]:0)):(fb=v(Ka.buffer)?K.createStream(34962,Ka.buffer):K.getBuffer(Ka.buffer),Xa="type"in Ka?ra[Ka.type]:fb.dtype,za=!!Ka.normalized,Da=Ka.size|0,ec=Ka.offset|0,qb=Ka.stride|0,ib=Ka.divisor|
0);Va=la.location;Lb=Z[Va];if(1===pb){Lb.buffer||Q.enableVertexAttribArray(Va);bd=Da||2;if(Lb.type!==Xa||Lb.size!==bd||Lb.buffer!==fb||Lb.normalized!==za||Lb.offset!==ec||Lb.stride!==qb)Q.bindBuffer(34962,fb.buffer),Q.vertexAttribPointer(Va,bd,Xa,za,qb,ec),Lb.type=Xa,Lb.size=bd,Lb.buffer=fb,Lb.normalized=za,Lb.offset=ec,Lb.stride=qb;Lb.divisor!==ib&&(N.vertexAttribDivisorANGLE(Va,ib),Lb.divisor=ib)}else if(Lb.buffer&&(Q.disableVertexAttribArray(Va),Lb.buffer=null),Lb.x!==lc||Lb.y!==ad||Lb.z!==uc||
Lb.w!==Ya)Q.vertexAttrib4f(Va,lc,ad,uc,Ya),Lb.x=lc,Lb.y=ad,Lb.z=uc,Lb.w=Ya;Fa=this.viewportArray;Q.uniform4f(ma.location,Fa[0],Fa[1],Fa[2],Fa[3]);zc=this.scale;Q.uniform2f(gb.location,zc[0],zc[1]);Qa=this.translate;Q.uniform2f(wc.location,Qa[0],Qa[1]);(Ba=qa.elements)?Q.bindBuffer(34963,Ba.buffer.buffer):Oa.currentVAO&&(Ba=G.getElements(Oa.currentVAO.elements))&&Q.bindBuffer(34963,Ba.buffer.buffer);lb=qa.instances;for(C=0;C<b;++C){z=a[C];var wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,
Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,yd;wb=R.call(this,O,z,C);C&&Db===wb||(Db=wb,Q.uniform1f(ea.location,wb));rb=L.call(this,O,z,C);C&&vc===rb||(vc=rb,Q.uniform1f(k.location,rb));xb=z.align;C&&td===xb||(td=xb,Q.uniform1f(g.location,xb));tc=z.baseline;C&&ue===tc||(ue=tc,Q.uniform1f(q.location,tc));Nc=z.color;gd=Nc[0];Vb=Nc[1];Ob=Nc[2];$b=Nc[3];C&&ud===gd&&cc===Vb&&Ga===Ob&&mb===$b||(ud=gd,cc=Vb,Ga=Ob,mb=$b,Q.uniform4f(c.location,gd,Vb,Ob,$b));yb=Ha.call(this,O,z,C);Mb=yb[0];fc=yb[1];
C&&Pb===Mb&&hc===fc||(Pb=Mb,hc=fc,Q.uniform2f(aa.location,Mb,fc));Sc=d.call(this,O,z,C);Cc=Sc[0];Ec=Sc[1];C&&Dc===Cc&&Oc===Ec||(Dc=Cc,Oc=Ec,Q.uniform2f(V.location,Cc,Ec));Zc=z.positionOffset;Tc=Zc[0];Kb=Zc[1];C&&Pc===Tc&&Fb===Kb||(Pc=Tc,Fb=Kb,Q.uniform2f(Qb.location,Tc,Kb));Qc=z.opacity;C&&Ic===Qc||(Ic=Qc,Q.uniform1f(ba.location,Qc));(Uc=f.call(this,O,z,C))&&"framebuffer"===Uc._reglType&&(Uc=Uc.color[0]);gc=Uc._texture;Q.uniform1i(n.location,gc.bind());Xc=z.offset;if(yd=z.count)0<lb?Ba?N.drawElementsInstancedANGLE(0,
yd,Ba.type,Xc<<(Ba.type-5121>>1),lb):N.drawArraysInstancedANGLE(0,Xc,yd,lb):0>lb&&(Ba?Q.drawElements(0,yd,Ba.type,Xc<<(Ba.type-5121>>1)):Q.drawArrays(0,Xc,yd)),gc.unbind()}Gc&&K.destroyStream(Rc);Ad&&K.destroyStream(Tb);ob&&K.destroyStream(wa);Nb&&K.destroyStream(fb);U.dirty=!0;Oa.setVAO(null);O.viewportWidth=r;O.viewportHeight=x;A&&(y.cpuTime+=performance.now()-B)},draw:function(d){var f,h,r,l,x,A,p,B,C,z,H,R,L,M,S,P,T,fa,ca,pa,ha,Ea,Ha,dc,Wd,vd,Fe,Sd,Td,de,Yd,od,kd,sd,md,cd,pc,pd,fd,Mc,rc,ab,Jc,
Eb,qc,Ta,Kc,bc,sc,Dd,wd,Bc,Xb,Gc,Rc,La,ub,Wa,va,rd,Bb,Sa,Gb,cb,Yb,Rb,ae,ac,Sb,Ad,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb;f=$a.next;f!==$a.cur&&(f?Q.bindFramebuffer(36160,f.framebuffer):Q.bindFramebuffer(36160,null),$a.cur=f);if(U.dirty){var Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Be,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc;Ja=ja.dither;Ja!==U.dither&&(Ja?Q.enable(3024):Q.disable(3024),U.dither=Ja);Cb=W[0];Ab=W[1];if(Cb!==sb[0]||Ab!==sb[1])Q.blendEquationSeparate(Cb,
Ab),sb[0]=Cb,sb[1]=Ab;Ra=ja.depth_func;Ra!==U.depth_func&&(Q.depthFunc(Ra),U.depth_func=Ra);yc=jc[0];Jb=jc[1];if(yc!==qd[0]||Jb!==qd[1])Q.depthRange(yc,Jb),qd[0]=yc,qd[1]=Jb;Za=ja.depth_mask;Za!==U.depth_mask&&(Q.depthMask(Za),U.depth_mask=Za);Ub=Wb[0];ya=Wb[1];Be=Wb[2];Ka=Wb[3];if(Ub!==nc[0]||ya!==nc[1]||Be!==nc[2]||Ka!==nc[3])Q.colorMask(Ub,ya,Be,Ka),nc[0]=Ub,nc[1]=ya,nc[2]=Be,nc[3]=Ka;Nb=ja.cull_enable;Nb!==U.cull_enable&&(Nb?Q.enable(2884):Q.disable(2884),U.cull_enable=Nb);fb=ja.cull_face;fb!==
U.cull_face&&(Q.cullFace(fb),U.cull_face=fb);ib=ja.frontFace;ib!==U.frontFace&&(Q.frontFace(ib),U.frontFace=ib);za=ja.lineWidth;za!==U.lineWidth&&(Q.lineWidth(za),U.lineWidth=za);ec=ja.polygonOffset_enable;ec!==U.polygonOffset_enable&&(ec?Q.enable(32823):Q.disable(32823),U.polygonOffset_enable=ec);Da=xc[0];pb=xc[1];if(Da!==Y[0]||pb!==Y[1])Q.polygonOffset(Da,pb),Y[0]=Da,Y[1]=pb;qb=ja.sample_alpha;qb!==U.sample_alpha&&(qb?Q.enable(32926):Q.disable(32926),U.sample_alpha=qb);Xa=ja.sample_enable;Xa!==
U.sample_enable&&(Xa?Q.enable(32928):Q.disable(32928),U.sample_enable=Xa);Ya=J[0];lc=J[1];if(Ya!==ka[0]||lc!==ka[1])Q.sampleCoverage(Ya,lc),ka[0]=Ya,ka[1]=lc;ad=ja.stencil_mask;ad!==U.stencil_mask&&(Q.stencilMask(ad),U.stencil_mask=ad);uc=Lc[0];Va=Lc[1];Lb=Lc[2];if(uc!==Wc[0]||Va!==Wc[1]||Lb!==Wc[2])Q.stencilFunc(uc,Va,Lb),Wc[0]=uc,Wc[1]=Va,Wc[2]=Lb;bd=ia[0];Fa=ia[1];zc=ia[2];Qa=ia[3];if(bd!==ta[0]||Fa!==ta[1]||zc!==ta[2]||Qa!==ta[3])Q.stencilOpSeparate(bd,Fa,zc,Qa),ta[0]=bd,ta[1]=Fa,ta[2]=zc,ta[3]=
Qa;Ba=E[0];lb=E[1];wb=E[2];Db=E[3];if(Ba!==w[0]||lb!==w[1]||wb!==w[2]||Db!==w[3])Q.stencilOpSeparate(Ba,lb,wb,Db),w[0]=Ba,w[1]=lb,w[2]=wb,w[3]=Db;rb=ja.scissor_enable;rb!==U.scissor_enable&&(rb?Q.enable(3089):Q.disable(3089),U.scissor_enable=rb);vc=Ca[0];xb=Ca[1];td=Ca[2];tc=Ca[3];if(vc!==tb[0]||xb!==tb[1]||td!==tb[2]||tc!==tb[3])Q.scissor(vc,xb,td,tc),tb[0]=vc,tb[1]=xb,tb[2]=td,tb[3]=tc}h=this.viewport;r=h.x|0;l=h.y|0;x="width"in h?h.width|0:O.framebufferWidth-r;A="height"in h?h.height|0:O.framebufferHeight-
l;p=O.viewportWidth;O.viewportWidth=x;B=O.viewportHeight;O.viewportHeight=A;Q.viewport(r,l,x,A);ga[0]=r;ga[1]=l;ga[2]=x;ga[3]=A;Q.blendColor(0,0,0,1);Ia[0]=0;Ia[1]=0;Ia[2]=0;Ia[3]=1;Q.enable(3042);U.blend_enable=!0;Q.blendFuncSeparate(770,771,773,1);ua[0]=770;ua[1]=771;ua[2]=773;ua[3]=1;Q.disable(2929);U.depth_enable=!1;Q.disable(2960);U.stencil_enable=!1;if(C=U.profile)z=performance.now(),y.count++;Q.useProgram(m.program);H=Zb.angle_instanced_arrays;Oa.setVAO(null);u.buffer=this.sizeBuffer;R=!1;
L=null;M=0;S=!1;T=P=0;fa=1;ca=0;pa=5126;dc=Ha=Ea=ha=0;v(u)?(R=!0,L=K.createStream(34962,u),pa=L.dtype):(L=K.getBuffer(u))?pa=L.dtype:"constant"in u?(fa=2,"number"===typeof u.constant?(Ea=u.constant,Ha=dc=ha=0):(Ea=0<u.constant.length?u.constant[0]:0,Ha=1<u.constant.length?u.constant[1]:0,dc=2<u.constant.length?u.constant[2]:0,ha=3<u.constant.length?u.constant[3]:0)):(L=v(u.buffer)?K.createStream(34962,u.buffer):K.getBuffer(u.buffer),pa="type"in u?ra[u.type]:L.dtype,S=!!u.normalized,T=u.size|0,P=u.offset|
0,ca=u.stride|0,M=u.divisor|0);Wd=Na.location;vd=Z[Wd];if(1===fa){vd.buffer||Q.enableVertexAttribArray(Wd);Fe=T||1;if(vd.type!==pa||vd.size!==Fe||vd.buffer!==L||vd.normalized!==S||vd.offset!==P||vd.stride!==ca)Q.bindBuffer(34962,L.buffer),Q.vertexAttribPointer(Wd,Fe,pa,S,ca,P),vd.type=pa,vd.size=Fe,vd.buffer=L,vd.normalized=S,vd.offset=P,vd.stride=ca;vd.divisor!==M&&(H.vertexAttribDivisorANGLE(Wd,M),vd.divisor=M)}else if(vd.buffer&&(Q.disableVertexAttribArray(Wd),vd.buffer=null),vd.x!==Ea||vd.y!==
Ha||vd.z!==dc||vd.w!==ha)Q.vertexAttrib4f(Wd,Ea,Ha,dc,ha),vd.x=Ea,vd.y=Ha,vd.z=dc,vd.w=ha;F.buffer=this.sizeBuffer;Sd=!1;Td=null;de=0;Yd=!1;kd=od=0;sd=1;md=0;cd=5126;Mc=fd=pd=pc=0;v(F)?(Sd=!0,Td=K.createStream(34962,F),cd=Td.dtype):(Td=K.getBuffer(F))?cd=Td.dtype:"constant"in F?(sd=2,"number"===typeof F.constant?(pd=F.constant,fd=Mc=pc=0):(pd=0<F.constant.length?F.constant[0]:0,fd=1<F.constant.length?F.constant[1]:0,Mc=2<F.constant.length?F.constant[2]:0,pc=3<F.constant.length?F.constant[3]:0)):(Td=
v(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),cd="type"in F?ra[F.type]:Td.dtype,Yd=!!F.normalized,kd=F.size|0,od=F.offset|0,md=F.stride|0,de=F.divisor|0);rc=I.location;ab=Z[rc];if(1===sd){ab.buffer||Q.enableVertexAttribArray(rc);Jc=kd||1;if(ab.type!==cd||ab.size!==Jc||ab.buffer!==Td||ab.normalized!==Yd||ab.offset!==od||ab.stride!==md)Q.bindBuffer(34962,Td.buffer),Q.vertexAttribPointer(rc,Jc,cd,Yd,md,od),ab.type=cd,ab.size=Jc,ab.buffer=Td,ab.normalized=Yd,ab.offset=od,ab.stride=
md;ab.divisor!==de&&(H.vertexAttribDivisorANGLE(rc,de),ab.divisor=de)}else if(ab.buffer&&(Q.disableVertexAttribArray(rc),ab.buffer=null),ab.x!==pd||ab.y!==fd||ab.z!==Mc||ab.w!==pc)Q.vertexAttrib4f(rc,pd,fd,Mc,pc),ab.x=pd,ab.y=fd,ab.z=Mc,ab.w=pc;Eb=this.charBuffer;qc=!1;Ta=null;Kc=0;bc=!1;Dd=sc=0;wd=1;Bc=0;Xb=5126;ub=La=Rc=Gc=0;v(Eb)?(qc=!0,Ta=K.createStream(34962,Eb),Xb=Ta.dtype):(Ta=K.getBuffer(Eb))?Xb=Ta.dtype:"constant"in Eb?(wd=2,"number"===typeof Eb.constant?(Rc=Eb.constant,La=ub=Gc=0):(Rc=0<
Eb.constant.length?Eb.constant[0]:0,La=1<Eb.constant.length?Eb.constant[1]:0,ub=2<Eb.constant.length?Eb.constant[2]:0,Gc=3<Eb.constant.length?Eb.constant[3]:0)):(Ta=v(Eb.buffer)?K.createStream(34962,Eb.buffer):K.getBuffer(Eb.buffer),Xb="type"in Eb?ra[Eb.type]:Ta.dtype,bc=!!Eb.normalized,Dd=Eb.size|0,sc=Eb.offset|0,Bc=Eb.stride|0,Kc=Eb.divisor|0);Wa=oa.location;va=Z[Wa];if(1===wd){va.buffer||Q.enableVertexAttribArray(Wa);rd=Dd||1;if(va.type!==Xb||va.size!==rd||va.buffer!==Ta||va.normalized!==bc||va.offset!==
sc||va.stride!==Bc)Q.bindBuffer(34962,Ta.buffer),Q.vertexAttribPointer(Wa,rd,Xb,bc,Bc,sc),va.type=Xb,va.size=rd,va.buffer=Ta,va.normalized=bc,va.offset=sc,va.stride=Bc;va.divisor!==Kc&&(H.vertexAttribDivisorANGLE(Wa,Kc),va.divisor=Kc)}else if(va.buffer&&(Q.disableVertexAttribArray(Wa),va.buffer=null),va.x!==Rc||va.y!==La||va.z!==ub||va.w!==Gc)Q.vertexAttrib4f(Wa,Rc,La,ub,Gc),va.x=Rc,va.y=La,va.z=ub,va.w=Gc;Bb=this.position;Sa=!1;Gb=null;cb=0;Yb=!1;ae=Rb=0;ac=1;Sb=0;Ad=5126;vb=nb=Ma=Tb=0;v(Bb)?(Sa=
!0,Gb=K.createStream(34962,Bb),Ad=Gb.dtype):(Gb=K.getBuffer(Bb))?Ad=Gb.dtype:"constant"in Bb?(ac=2,"number"===typeof Bb.constant?(Ma=Bb.constant,nb=vb=Tb=0):(Ma=0<Bb.constant.length?Bb.constant[0]:0,nb=1<Bb.constant.length?Bb.constant[1]:0,vb=2<Bb.constant.length?Bb.constant[2]:0,Tb=3<Bb.constant.length?Bb.constant[3]:0)):(Gb=v(Bb.buffer)?K.createStream(34962,Bb.buffer):K.getBuffer(Bb.buffer),Ad="type"in Bb?ra[Bb.type]:Gb.dtype,Yb=!!Bb.normalized,ae=Bb.size|0,Rb=Bb.offset|0,Sb=Bb.stride|0,cb=Bb.divisor|
0);hb=la.location;Pa=Z[hb];if(1===ac){Pa.buffer||Q.enableVertexAttribArray(hb);oc=ae||2;if(Pa.type!==Ad||Pa.size!==oc||Pa.buffer!==Gb||Pa.normalized!==Yb||Pa.offset!==Rb||Pa.stride!==Sb)Q.bindBuffer(34962,Gb.buffer),Q.vertexAttribPointer(hb,oc,Ad,Yb,Sb,Rb),Pa.type=Ad,Pa.size=oc,Pa.buffer=Gb,Pa.normalized=Yb,Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==cb&&(H.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(Q.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==nb||Pa.z!==vb||
Pa.w!==Tb)Q.vertexAttrib4f(hb,Ma,nb,vb,Tb),Pa.x=Ma,Pa.y=nb,Pa.z=vb,Pa.w=Tb;Ib=N.call(this,O,d,0);Q.uniform1f(ea.location,Ib);dd=e.call(this,O,d,0);Q.uniform1f(k.location,dd);Q.uniform1f(g.location,d.align);Q.uniform1f(q.location,d.baseline);db=this.viewportArray;Q.uniform4f(ma.location,db[0],db[1],db[2],db[3]);kc=d.color;Q.uniform4f(c.location,kc[0],kc[1],kc[2],kc[3]);Hc=b.call(this,O,d,0);Q.uniform2f(aa.location,Hc[0],Hc[1]);mc=t.call(this,O,d,0);Q.uniform2f(V.location,mc[0],mc[1]);jb=this.scale;
Q.uniform2f(gb.location,jb[0],jb[1]);kb=this.translate;Q.uniform2f(wc.location,kb[0],kb[1]);sa=d.positionOffset;Q.uniform2f(Qb.location,sa[0],sa[1]);Q.uniform1f(ba.location,d.opacity);(ob=a.call(this,O,d,0))&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);wa=ob._texture;Q.uniform1i(n.location,wa.bind());(Ua=qa.elements)?Q.bindBuffer(34963,Ua.buffer.buffer):Oa.currentVAO&&(Ua=G.getElements(Oa.currentVAO.elements))&&Q.bindBuffer(34963,Ua.buffer.buffer);bb=d.offset;if(Aa=d.count)eb=qa.instances,0<eb?
Ua?H.drawElementsInstancedANGLE(0,Aa,Ua.type,bb<<(Ua.type-5121>>1),eb):H.drawArraysInstancedANGLE(0,bb,Aa,eb):0>eb&&(Ua?Q.drawElements(0,Aa,Ua.type,bb<<(Ua.type-5121>>1)):Q.drawArrays(0,bb,Aa)),U.dirty=!0,Oa.setVAO(null),O.viewportWidth=p,O.viewportHeight=B,C&&(y.cpuTime+=performance.now()-z),R&&K.destroyStream(L),Sd&&K.destroyStream(Td),qc&&K.destroyStream(Ta),Sa&&K.destroyStream(Gb),wa.unbind()},scope:function(a,b,c){var d,e,f,g,k,h,m,n,q,t,w,N,E,J,G,L,R,I,P,Q,Y,V,W,ga,aa,Z,ba,ea,ia,ka,ta,la,ma,
oa,ua,Ca,Ia,Ha,Na,Oa,xc,$a,gb,Ta,tb,sb,Qb,qd,Wb,Zb,Xb,nc,wc,La,ub,Wa,va,jc,Bb,Sa,Gb,cb,Yb,Rb,Lc,ac,Sb,Wc,Tb,Ma,nb,vb,hb,Pa,oc,Ib,dd,db,kc,Hc,mc,jb,kb,sa,ob,wa,Ua,bb,Aa,eb,Ja,Cb,Ab,Ra,yc,Jb,Za,Ub,ya,Wd,Ka,Nb,fb,ib,za,ec,Da,pb,qb,Xa,Ya,lc,ad,uc,Va,Lb,bd,Fa,zc,Qa,Ba,lb,wb,Db,rb,vc,xb,td,tc,ue,Nc,gd,ud,Vb,cc,Ob,Ga,$b,mb,yb,Mb,Pb,fc,hc,Sc,Cc,Dc,Ec,Oc,Zc,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc;d=this.viewport;e=d.x|0;f=d.y|0;g="width"in d?d.width|0:O.framebufferWidth-e;k="height"in d?d.height|0:O.framebufferHeight-
f;h=O.viewportWidth;O.viewportWidth=g;m=O.viewportHeight;O.viewportHeight=k;n=S[0];S[0]=e;q=S[1];S[1]=f;t=S[2];S[2]=g;w=S[3];S[3]=k;N=dc[0];dc[0]=0;E=dc[1];dc[1]=0;J=dc[2];dc[2]=0;G=dc[3];dc[3]=1;L=ja.blend_enable;ja.blend_enable=!0;R=ha[0];ha[0]=770;I=ha[1];ha[1]=771;P=ha[2];ha[2]=773;Q=ha[3];ha[3]=1;Y=ja.depth_enable;ja.depth_enable=!1;V=ja.stencil_enable;ja.stencil_enable=!1;if(W=U.profile)ga=performance.now(),y.count++;aa=a.offset;Z=qa.offset;qa.offset=aa;ba=a.count;ea=qa.count;qa.count=ba;ia=
qa.primitive;qa.primitive=0;ka=a.align;ta=Ea[64];Ea[64]=ka;la=x.call(this,O,a,c);ma=Ea[69];Ea[69]=la;oa=z.call(this,O,a,c);ua=Ea[67];Ea[67]=oa;Ca=T.call(this,O,a,c);Ia=Ea[66];Ea[66]=Ca;Ha=a.baseline;Na=Ea[65];Ea[65]=Ha;Oa=M.call(this,O,a,c);xc=Ea[62];Ea[62]=Oa;$a=a.color;gb=Ea[14];Ea[14]=$a;Ta=H.call(this,O,a,c);tb=Ea[63];Ea[63]=Ta;sb=a.opacity;Qb=Ea[10];Ea[10]=sb;qd=a.positionOffset;Wb=Ea[68];Ea[68]=qd;Zb=this.scale;Xb=Ea[6];Ea[6]=Zb;nc=this.translate;wc=Ea[8];Ea[8]=nc;La=this.viewportArray;ub=Ea[3];
Ea[3]=La;Wa=this.charBuffer;va=!1;jc=null;Bb=0;Sa=!1;cb=Gb=0;Yb=1;Rb=0;Lc=5126;Tb=Wc=Sb=ac=0;v(Wa)?(va=!0,jc=K.createStream(34962,Wa),Lc=jc.dtype):(jc=K.getBuffer(Wa))?Lc=jc.dtype:"constant"in Wa?(Yb=2,"number"===typeof Wa.constant?(Sb=Wa.constant,Wc=Tb=ac=0):(Sb=0<Wa.constant.length?Wa.constant[0]:0,Wc=1<Wa.constant.length?Wa.constant[1]:0,Tb=2<Wa.constant.length?Wa.constant[2]:0,ac=3<Wa.constant.length?Wa.constant[3]:0)):(jc=v(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),Lc=
"type"in Wa?ra[Wa.type]:jc.dtype,Sa=!!Wa.normalized,cb=Wa.size|0,Gb=Wa.offset|0,Rb=Wa.stride|0,Bb=Wa.divisor|0);Ma=r.buffer;r.buffer=jc;nb=r.divisor;r.divisor=Bb;vb=r.normalized;r.normalized=Sa;hb=r.offset;r.offset=Gb;Pa=r.size;r.size=cb;oc=r.state;r.state=Yb;Ib=r.stride;r.stride=Rb;dd=r.type;r.type=Lc;db=r.w;r.w=ac;kc=r.x;r.x=Sb;Hc=r.y;r.y=Wc;mc=r.z;r.z=Tb;F.buffer=this.sizeBuffer;jb=!1;kb=null;sa=0;ob=!1;Ua=wa=0;bb=1;Aa=0;eb=5126;Ra=Ab=Cb=Ja=0;v(F)?(jb=!0,kb=K.createStream(34962,F),eb=kb.dtype):
(kb=K.getBuffer(F))?eb=kb.dtype:"constant"in F?(bb=2,"number"===typeof F.constant?(Cb=F.constant,Ab=Ra=Ja=0):(Cb=0<F.constant.length?F.constant[0]:0,Ab=1<F.constant.length?F.constant[1]:0,Ra=2<F.constant.length?F.constant[2]:0,Ja=3<F.constant.length?F.constant[3]:0)):(kb=v(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),eb="type"in F?ra[F.type]:kb.dtype,ob=!!F.normalized,Ua=F.size|0,wa=F.offset|0,Aa=F.stride|0,sa=F.divisor|0);yc=C.buffer;C.buffer=kb;Jb=C.divisor;C.divisor=sa;Za=C.normalized;
C.normalized=ob;Ub=C.offset;C.offset=wa;ya=C.size;C.size=Ua;Wd=C.state;C.state=bb;Ka=C.stride;C.stride=Aa;Nb=C.type;C.type=eb;fb=C.w;C.w=Ja;ib=C.x;C.x=Cb;za=C.y;C.y=Ab;ec=C.z;C.z=Ra;Da=this.position;pb=!1;qb=null;Xa=0;Ya=!1;ad=lc=0;uc=1;Va=0;Lb=5126;Qa=zc=Fa=bd=0;v(Da)?(pb=!0,qb=K.createStream(34962,Da),Lb=qb.dtype):(qb=K.getBuffer(Da))?Lb=qb.dtype:"constant"in Da?(uc=2,"number"===typeof Da.constant?(Fa=Da.constant,zc=Qa=bd=0):(Fa=0<Da.constant.length?Da.constant[0]:0,zc=1<Da.constant.length?Da.constant[1]:
0,Qa=2<Da.constant.length?Da.constant[2]:0,bd=3<Da.constant.length?Da.constant[3]:0)):(qb=v(Da.buffer)?K.createStream(34962,Da.buffer):K.getBuffer(Da.buffer),Lb="type"in Da?ra[Da.type]:qb.dtype,Ya=!!Da.normalized,ad=Da.size|0,lc=Da.offset|0,Va=Da.stride|0,Xa=Da.divisor|0);Ba=A.buffer;A.buffer=qb;lb=A.divisor;A.divisor=Xa;wb=A.normalized;A.normalized=Ya;Db=A.offset;A.offset=lc;rb=A.size;A.size=ad;vc=A.state;A.state=uc;xb=A.stride;A.stride=Va;td=A.type;A.type=Lb;tc=A.w;A.w=bd;ue=A.x;A.x=Fa;Nc=A.y;A.y=
zc;gd=A.z;A.z=Qa;u.buffer=this.sizeBuffer;ud=!1;Vb=null;cc=0;Ob=!1;$b=Ga=0;mb=1;yb=0;Mb=5126;Sc=hc=fc=Pb=0;v(u)?(ud=!0,Vb=K.createStream(34962,u),Mb=Vb.dtype):(Vb=K.getBuffer(u))?Mb=Vb.dtype:"constant"in u?(mb=2,"number"===typeof u.constant?(fc=u.constant,hc=Sc=Pb=0):(fc=0<u.constant.length?u.constant[0]:0,hc=1<u.constant.length?u.constant[1]:0,Sc=2<u.constant.length?u.constant[2]:0,Pb=3<u.constant.length?u.constant[3]:0)):(Vb=v(u.buffer)?K.createStream(34962,u.buffer):K.getBuffer(u.buffer),Mb="type"in
u?ra[u.type]:Vb.dtype,Ob=!!u.normalized,$b=u.size|0,Ga=u.offset|0,yb=u.stride|0,cc=u.divisor|0);Cc=B.buffer;B.buffer=Vb;Dc=B.divisor;B.divisor=cc;Ec=B.normalized;B.normalized=Ob;Oc=B.offset;B.offset=Ga;Zc=B.size;B.size=$b;Tc=B.state;B.state=mb;Pc=B.stride;B.stride=yb;Kb=B.type;B.type=Mb;Fb=B.w;B.w=Pb;Qc=B.x;B.x=fc;Ic=B.y;B.y=hc;Uc=B.z;B.z=Sc;gc=ca.vert;ca.vert=61;Xc=ca.frag;ca.frag=60;U.dirty=!0;b(O,a,c);O.viewportWidth=h;O.viewportHeight=m;S[0]=n;S[1]=q;S[2]=t;S[3]=w;dc[0]=N;dc[1]=E;dc[2]=J;dc[3]=
G;ja.blend_enable=L;ha[0]=R;ha[1]=I;ha[2]=P;ha[3]=Q;ja.depth_enable=Y;ja.stencil_enable=V;W&&(y.cpuTime+=performance.now()-ga);qa.offset=Z;qa.count=ea;qa.primitive=ia;Ea[64]=ta;Ea[69]=ma;Ea[67]=ua;Ea[66]=Ia;Ea[65]=Na;Ea[62]=xc;Ea[14]=gb;Ea[63]=tb;Ea[10]=Qb;Ea[68]=Wb;Ea[6]=Xb;Ea[8]=wc;Ea[3]=ub;va&&K.destroyStream(jc);r.buffer=Ma;r.divisor=nb;r.normalized=vb;r.offset=hb;r.size=Pa;r.state=oc;r.stride=Ib;r.type=dd;r.w=db;r.x=kc;r.y=Hc;r.z=mc;jb&&K.destroyStream(kb);C.buffer=yc;C.divisor=Jb;C.normalized=
Za;C.offset=Ub;C.size=ya;C.state=Wd;C.stride=Ka;C.type=Nb;C.w=fb;C.x=ib;C.y=za;C.z=ec;pb&&K.destroyStream(qb);A.buffer=Ba;A.divisor=lb;A.normalized=wb;A.offset=Db;A.size=rb;A.state=vc;A.stride=xb;A.type=td;A.w=tc;A.x=ue;A.y=Nc;A.z=gd;ud&&K.destroyStream(Vb);B.buffer=Cc;B.divisor=Dc;B.normalized=Ec;B.offset=Oc;B.size=Zc;B.state=Tc;B.stride=Pc;B.type=Kb;B.w=Fb;B.x=Qc;B.y=Ic;B.z=Uc;ca.vert=gc;ca.frag=Xc;U.dirty=!0}}}}},{}],25:[function(z,T,Ha){var h=z("./sorted-object-keys");T.exports=function(y,m){for(var N=
h(m),e=0;e<N.length;++e)y[N[e]]=m[N[e]];return y}},{"./sorted-object-keys":34}],26:[function(z,T,Ha){function h(h,e,b,m,a,x){for(var y=0;y<e;++y)for(var z=h[y],M=0;M<b;++M)for(var H=z[M],r=0;r<m;++r)a[x++]=H[r]}function y(m,e,b,t,a){for(var x=1,z=b+1;z<e.length;++z)x*=e[z];var T=e[b];if(4===e.length-b){var M=e[b+1],H=e[b+2];e=e[b+3];for(z=0;z<T;++z)h(m[z],M,H,e,t,a),a+=x}else for(z=0;z<T;++z)y(m[z],e,b+1,t,a),a+=x}var m=z("./pool");T.exports={shape:function(h){for(var e=[];h.length;h=h[0])e.push(h.length);
return e},flatten:function(z,e,b,t){var a=1;if(e.length)for(var x=0;x<e.length;++x)a*=e[x];else a=0;b=t||m.allocType(b,a);switch(e.length){case 0:break;case 1:t=e[0];for(e=0;e<t;++e)b[e]=z[e];break;case 2:t=e[0];e=e[1];for(x=a=0;x<t;++x)for(var T=z[x],fa=0;fa<e;++fa)b[a++]=T[fa];break;case 3:h(z,e[0],e[1],e[2],b,0);break;default:y(z,e,0,b,0)}return b}}},{"./pool":32}],27:[function(z,T,Ha){var h=z("./is-typed-array");T.exports=function(y){return Array.isArray(y)||h(y)}},{"./is-typed-array":30}],28:[function(z,
T,Ha){var h=z("./is-typed-array");T.exports=function(y){return!!y&&"object"===typeof y&&Array.isArray(y.shape)&&Array.isArray(y.stride)&&"number"===typeof y.offset&&y.shape.length===y.stride.length&&(Array.isArray(y.data)||h(y.data))}},{"./is-typed-array":30}],29:[function(z,T,Ha){T.exports=function(h){return!(h&h-1)&&!!h}},{}],30:[function(z,T,Ha){T.exports=function(h){return h instanceof Uint8Array||h instanceof Uint16Array||h instanceof Uint32Array||h instanceof Int8Array||h instanceof Int16Array||
h instanceof Int32Array||h instanceof Float32Array||h instanceof Float64Array||h instanceof Uint8ClampedArray}},{}],31:[function(z,T,Ha){T.exports=function(h,y){for(var m=Array(h),z=0;z<h;++z)m[z]=y(z);return m}},{}],32:[function(z,T,Ha){function h(h){var e,b;e=(65535<h)<<4;h>>>=e;b=(255<h)<<3;h>>>=b;e|=b;b=(15<h)<<2;h>>>=b;e|=b;b=(3<h)<<1;return e|b|h>>>b>>1}function y(){function y(e){a:{for(var a=16;268435456>=a;a*=16)if(e<=a){e=a;break a}e=0}a=b[h(e)>>2];return 0<a.length?a.pop():new ArrayBuffer(e)}
function e(e){b[h(e.byteLength)>>2].push(e)}var b=m(8,function(){return[]});return{alloc:y,free:e,allocType:function(b,a){var e=null;switch(b){case 5120:e=new Int8Array(y(a),0,a);break;case 5121:e=new Uint8Array(y(a),0,a);break;case 5122:e=new Int16Array(y(2*a),0,a);break;case 5123:e=new Uint16Array(y(2*a),0,a);break;case 5124:e=new Int32Array(y(4*a),0,a);break;case 5125:e=new Uint32Array(y(4*a),0,a);break;case 5126:e=new Float32Array(y(4*a),0,a);break;default:return null}return e.length!==a?e.subarray(0,
a):e},freeType:function(b){e(b.buffer)}}}var m=z("./loop");z=y();z.zero=y();T.exports=z},{"./loop":31}],33:[function(z,T,Ha){T.exports={next:"function"===typeof requestAnimationFrame?function(h){return requestAnimationFrame(h)}:function(h){return setTimeout(h,16)},cancel:"function"===typeof cancelAnimationFrame?function(h){return cancelAnimationFrame(h)}:clearTimeout}},{}],34:[function(z,T,Ha){T.exports=function(h){return Object.keys(h).sort()}},{}],35:[function(z,T,Ha){var h=z("./pool"),y=new Float32Array(1),
m=new Uint32Array(y.buffer);T.exports=function(z){for(var e=h.allocType(5123,z.length),b=0;b<z.length;++b)if(isNaN(z[b]))e[b]=65535;else if(Infinity===z[b])e[b]=31744;else if(-Infinity===z[b])e[b]=64512;else{y[0]=z[b];var t=m[0],a=t>>>31<<15,x=(t<<1>>>24)-127,t=t>>13&1023;e[b]=-24>x?a:-14>x?a+(t+1024>>-14-x):15<x?a+31744:a+(x+15<<10)+t}return e}},{"./pool":32}],36:[function(z,T,Ha){var h=z("./sorted-object-keys");T.exports=function(y){return h(y).map(function(h){return y[h]})}},{"./sorted-object-keys":34}],
37:[function(z,T,Ha){function h(e,a,h){function m(){var a=window.innerWidth,b=window.innerHeight;e!==document.body&&(b=y.getBoundingClientRect(),a=b.right-b.left,b=b.bottom-b.top);y.width=h*a;y.height=h*b}var y=document.createElement("canvas");b(y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});e.appendChild(y);e===document.body&&(y.style.position="absolute",b(e.style,{margin:0,padding:0}));var z;e!==document.body&&"function"===typeof ResizeObserver?(z=new ResizeObserver(function(){setTimeout(m)}),
z.observe(e)):window.addEventListener("resize",m,!1);m();return{canvas:y,onDestroy:function(){z?z.disconnect():window.removeEventListener("resize",m);e.removeChild(y)}}}function y(b,a){function e(h){try{return b.getContext(h,a)}catch(m){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function m(b){if("string"===typeof b)return b.split();e(Array.isArray(b),"invalid extension array");return b}function N(b){return"string"===typeof b?(e("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(b)):b}var e=z("./util/check"),b=z("./util/extend");T.exports=function(b){var a=b||{},x,z,T,M;b={};var H=[],r=[],C="undefined"===typeof window?1:window.devicePixelRatio,A=!1,B=function(a){a&&e.raise(a)},P=function(){};"string"===typeof a?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),x=document.querySelector(a),e(x,"invalid query string for element")):"object"===typeof a?"string"===typeof a.nodeName&&"function"===typeof a.appendChild&&
"function"===typeof a.getBoundingClientRect?x=a:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?(M=a,T=M.canvas):(e.constructor(a),"gl"in a?M=a.gl:"canvas"in a?T=N(a.canvas):"container"in a&&(z=N(a.container)),"attributes"in a&&(b=a.attributes,e.type(b,"object","invalid context attributes")),"extensions"in a&&(H=m(a.extensions)),"optionalExtensions"in a&&(r=m(a.optionalExtensions)),"onDone"in a&&(e.type(a.onDone,"function","invalid or missing onDone callback"),B=a.onDone),"profile"in
a&&(A=!!a.profile),"pixelRatio"in a&&(C=+a.pixelRatio,e(0<C,"invalid pixel ratio"))):e.raise("invalid arguments to regl");x&&("canvas"===x.nodeName.toLowerCase()?T=x:z=x);if(!M){if(!T){e("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");x=h(z||document.body,B,C);if(!x)return null;T=x.canvas;P=x.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);M=y(T,b)}return M?{gl:M,canvas:T,container:z,extensions:H,optionalExtensions:r,pixelRatio:C,
profile:A,onDone:B,onDestroy:P}:(P(),B("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(z,T,Ha){T.exports=function(y,m){function z(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==A.alt,A.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==A.shift,A.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==A.control,A.control=!!a.ctrlKey);"metaKey"in a&&(b=b||a.metaKey!==A.meta,A.meta=!!a.metaKey);return b}
function e(a,b){var e=h.x(b),d=h.y(b);"buttons"in b&&(a=b.buttons|0);if(a!==H||e!==r||d!==C||z(b))H=a|0,r=e||0,C=d||0,m&&m(H,r,C,A)}function b(a){e(0,a)}function t(){if(H||r||C||A.shift||A.alt||A.meta||A.control)H=r=C=0,A.shift=A.alt=A.control=A.meta=!1,m&&m(0,0,0,A)}function a(a){z(a)&&m&&m(H,r,C,A)}function x(a){0===h.buttons(a)?e(0,a):e(H,a)}function T(a){e(H|h.buttons(a),a)}function fa(a){e(H&~h.buttons(a),a)}function M(){B||(B=!0,y.addEventListener("mousemove",x),y.addEventListener("mousedown",
T),y.addEventListener("mouseup",fa),y.addEventListener("mouseleave",b),y.addEventListener("mouseenter",b),y.addEventListener("mouseout",b),y.addEventListener("mouseover",b),y.addEventListener("blur",t),y.addEventListener("keyup",a),y.addEventListener("keydown",a),y.addEventListener("keypress",a),y!==window&&(window.addEventListener("blur",t),window.addEventListener("keyup",a),window.addEventListener("keydown",a),window.addEventListener("keypress",a)))}m||(m=y,y=window);var H=0,r=0,C=0,A={shift:!1,
alt:!1,control:!1,meta:!1},B=!1;M();var P={element:y};Object.defineProperties(P,{enabled:{get:function(){return B},set:function(e){e?M():B&&(B=!1,y.removeEventListener("mousemove",x),y.removeEventListener("mousedown",T),y.removeEventListener("mouseup",fa),y.removeEventListener("mouseleave",b),y.removeEventListener("mouseenter",b),y.removeEventListener("mouseout",b),y.removeEventListener("mouseover",b),y.removeEventListener("blur",t),y.removeEventListener("keyup",a),y.removeEventListener("keydown",
a),y.removeEventListener("keypress",a),y!==window&&(window.removeEventListener("blur",t),window.removeEventListener("keyup",a),window.removeEventListener("keydown",a),window.removeEventListener("keypress",a)))},enumerable:!0},buttons:{get:function(){return H},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return C},enumerable:!0},mods:{get:function(){return A},enumerable:!0}});return P};var h=z("mouse-event")},{"mouse-event":39}],39:[function(z,T,Ha){function h(h){return h.target||
h.srcElement||window}Ha.buttons=function(h){if("object"===typeof h){if("buttons"in h)return h.buttons;if("which"in h){h=h.which;if(2===h)return 4;if(3===h)return 2;if(0<h)return 1<<h-1}else if("button"in h){h=h.button;if(1===h)return 4;if(2===h)return 2;if(0<=h)return 1<<h}}return 0};Ha.element=h;Ha.x=function(y){if("object"===typeof y){if("offsetX"in y)return y.offsetX;var m=h(y).getBoundingClientRect();return y.clientX-m.left}return 0};Ha.y=function(y){if("object"===typeof y){if("offsetY"in y)return y.offsetY;
var m=h(y).getBoundingClientRect();return y.clientY-m.top}return 0}},{}],40:[function(z,T,Ha){function h(a,b){for(var e=0;e<a.length;++e)if(a[e]===b)return e;return-1}var y=z("./lib/util/check"),m=z("./lib/util/extend"),N=z("./lib/dynamic"),e=z("./lib/util/raf"),b=z("./lib/util/clock"),t=z("./lib/strings"),a=z("./lib/webgl"),x=z("./lib/extension"),pa=z("./lib/limits"),fa=z("./lib/buffer"),M=z("./lib/elements"),H=z("./lib/texture"),r=z("./lib/renderbuffer"),C=z("./lib/framebuffer"),A=z("./lib/attribute"),
B=z("./lib/shader"),P=z("./lib/read"),R=z("./lib/core"),L=z("./lib/stats"),Wd=z("./lib/timer");T.exports=function(d){function f(){if(0===sb.length)K&&K.update(),nc=null;else{nc=e.next(f);c();for(var a=sb.length-1;0<=a;--a){var b=sb[a];b&&b(G,null,0)}la.flush();K&&K.update()}}function g(){!nc&&0<sb.length&&(nc=e.next(f))}function n(){nc&&(e.cancel(f),nc=null)}function z(a){a.preventDefault();gb=!0;n();ha.forEach(function(a){a()})}function T(a){la.getError();gb=!1;wc.restore();ja.restore();$a.restore();
ca.restore();Ea.restore();Oa.restore();v.restore();K&&K.restore();dc.procs.refresh();g();ua.forEach(function(a){a()})}function q(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(N.isDynamic(f))e[b]=N.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(N.isDynamic(f[g])){e[b]=N.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}y(!!a,"invalid args to regl({...})");y.type(a,"object","invalid args to regl({...})");
var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=m({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);
var g={gpuTime:0,cpuTime:0,count:0},h=dc.compile(a,f,e,d,g),k=h.draw,n=h.batch,q=h.scope,r=[];return m(function(a,b){var d;gb&&y.raise("context lost");if("function"===typeof a)return q.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)q.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)q.call(this,a[d],b,d);else return q.call(this,a,b,0);else if("number"===typeof a){if(0<a)return n.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return n.call(this,
a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function oa(a,b){var c=0;dc.procs.poll();var d=b.color;d&&(la.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(la.clearDepth(+b.depth),c|=256);"stencil"in b&&(la.clearStencil(b.stencil|0),c|=1024);y(!!c,"called regl.clear with no buffer specified");la.clear(c)}function I(a){y.type(a,"function","regl.frame() callback must be a function");sb.push(a);g();return{cancel:function(){function b(){var a=
h(sb,b);sb[a]=sb[sb.length-1];--sb.length;0>=sb.length&&n()}var c=h(sb,a);y(0<=c,"cannot cancel a frame twice");sb[c]=b}}}function ea(){var a=Ia.viewport,b=Ia.scissor_box;a[0]=a[1]=b[0]=b[1]=0;G.viewportWidth=G.framebufferWidth=G.drawingBufferWidth=a[2]=b[2]=la.drawingBufferWidth;G.viewportHeight=G.framebufferHeight=G.drawingBufferHeight=a[3]=b[3]=la.drawingBufferHeight}function c(){G.tick+=1;G.time=ba();ea();dc.procs.poll()}function k(){ca.refresh();ea();dc.procs.refresh();K&&K.update()}function ba(){return(b()-
O)/1E3}console.log("REGL args are:",d);d=a(d);if(!d)return null;var la=d.gl,Ha=la.getContextAttributes(),gb=la.isContextLost(),wc=x(la,d);if(!wc)return null;var ma=t(),Na=L(),Z=wc.extensions,K=Wd(la,Z),O=b(),U=la.drawingBufferWidth,qa=la.drawingBufferHeight,G={tick:0,time:0,viewportWidth:U,viewportHeight:qa,framebufferWidth:U,framebufferHeight:qa,drawingBufferWidth:U,drawingBufferHeight:qa,pixelRatio:d.pixelRatio},U={elements:null,primitive:4,count:-1,offset:0,instances:-1},Zb=pa(la,Z),$a=fa(la,Na,
d,function(a){return v.destroyBuffer(a)}),Q=M(la,Z,$a,Na),v=A(la,Z,Zb,Na,$a,Q,U),ja=B(la,ma,Na,d),ca=H(la,Z,Zb,function(){dc.procs.poll()},G,Na,d),Ea=r(la,Z,Zb,Na,d),Oa=C(la,Z,Zb,ca,Ea,Na),dc=R(la,ma,Z,Zb,$a,Q,ca,Oa,{},v,ja,U,G,K,d),ma=P(la,Oa,dc.procs.poll,G,Ha,Z,Zb),Ia=dc.next,W=la.canvas,sb=[],ha=[],ua=[],Wb=[d.onDestroy],nc=null;W&&(W.addEventListener("webglcontextlost",z,!1),W.addEventListener("webglcontextrestored",T,!1));var jc=Oa.setFBO=q({framebuffer:N.define.call(null,1,"framebuffer")});
k();Ha=m(q,{clear:function(a){y("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)jc(m({framebuffer:a.framebuffer.faces[b]},a),oa);else jc(a,oa);else oa(null,a)},prop:N.define.bind(null,1),context:N.define.bind(null,2),"this":N.define.bind(null,3),draw:q({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return Q.create(a,!1)},texture:ca.create2D,cube:ca.createCube,
renderbuffer:Ea.create,framebuffer:Oa.create,framebufferCube:Oa.createCube,vao:v.createVAO,attributes:Ha,frame:I,on:function(a,b){y.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return I(b);case "lost":c=ha;break;case "restore":c=ua;break;case "destroy":c=Wb;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Zb,
hasExtension:function(a){return 0<=Zb.extensions.indexOf(a.toLowerCase())},read:ma,destroy:function(){sb.length=0;n();W&&(W.removeEventListener("webglcontextlost",z),W.removeEventListener("webglcontextrestored",T));ja.clear();Oa.clear();Ea.clear();v.clear();ca.clear();Q.clear();$a.clear();K&&K.clear();Wb.forEach(function(a){a()})},_gl:la,_refresh:k,poll:function(){c();K&&K.update()},now:ba,stats:Na});d.onDone(null,Ha);return Ha}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,
"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
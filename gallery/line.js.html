<!DOCTYPE html>
      <html>
        <head>
          <title>example/line.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global?global:d}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return"jscomp_symbol_"+d+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();if(d[$jscomp.global.Symbol.iterator])return d[$jscomp.global.Symbol.iterator]();var h=0;return{next:function(){return h==d.length?{done:!0}:{done:!1,value:d[h++]}}}};
$jscomp.arrayFromIterator=function(d){for(var h,t=[];!(h=d.next()).done;)t.push(h.value);return t};$jscomp.arrayFromIterable=function(d){return d instanceof Array?d:$jscomp.arrayFromIterator($jscomp.makeIterator(d))};
$jscomp.inherits=function(d,h){function t(){}t.prototype=h.prototype;d.prototype=new t;d.prototype.constructor=d;for(var a in h)if($jscomp.global.Object.defineProperties){var c=$jscomp.global.Object.getOwnPropertyDescriptor(h,a);c&&$jscomp.global.Object.defineProperty(d,a,c)}else d[a]=h[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(d,h){d instanceof String&&(d=String(d));var t=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},c=(a.next=function(){if(t<d.length){var a=t++;return{value:h(a,d[a]),done:!1}}c.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return c},a);return c};
$jscomp.array.findInternal_=function(d,h,t){d instanceof String&&(d=String(d));for(var a=d.length,c=0;c<a;c++){var z=d[c];if(h.call(t,z,c,d))return{i:c,v:z}}return{i:-1,v:void 0}};
$jscomp.array.from=function(d,h,t){h=void 0===h?function(c){return c}:h;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(d[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();d=d[Symbol.iterator]();for(var c;!(c=d.next()).done;)a.push(h.call(t,c.value))}else{c=d.length;for(var z=0;z<c;z++)a.push(h.call(t,d[z]))}return a};$jscomp.array.of=function(d){for(var h=[],t=0;t<arguments.length;++t)h[t-0]=arguments[t];return $jscomp.array.from(h)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(d,h){return[d,h]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(d){return d})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(d,h){return h})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(d,h,t){var a=this.length;d=Number(d);h=Number(h);t=Number(null!=t?t:a);if(d<h)for(t=Math.min(t,a);h<t;)h in this?this[d++]=this[h++]:(delete this[d++],h++);else for(t=Math.min(t,a+h-d),d+=t-h;t>h;)--t in this?this[--d]=this[t]:delete this[d];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(d,h,t){null!=t&&d.length||(t=this.length||0);t=Number(t);for(h=Number((void 0===h?0:h)||0);h<t;h++)this[h]=d;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(d,h){return $jscomp.array.findInternal_(this,d,h).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(d,h){return $jscomp.array.findInternal_(this,d,h).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(d){d=void 0===d?[]:d;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(d){d=$jscomp.makeIterator(d);for(var h=d.next();!h.done;h=d.next())h=h.value,this.set(h[0],h[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var d=$jscomp.global.Map;if(!d||!d.prototype.entries||!Object.seal)return!1;try{var h=Object.seal({x:4}),t=new d($jscomp.makeIterator([[h,"s"]]));if("s"!=t.get(h)||1!=t.size||t.get({x:4})||t.set({x:4},"t")!=t||2!=t.size)return!1;var a=t.entries(),c=a.next();if(c.done||c.value[0]!=h||"s"!=c.value[1])return!1;c=a.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!a.next().done?!1:!0}catch(z){return!1}};
$jscomp.Map.createHead_=function(){var d={};return d.previous=d.next=d.head=d};$jscomp.Map.getId_=function(d){if(!(d instanceof Object))return String(d);$jscomp.Map.key_ in d||d instanceof Object&&Object.isExtensible&&Object.isExtensible(d)&&$jscomp.Map.defineProperty_(d,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in d?d[$jscomp.Map.key_]:" "+d};
$jscomp.Map.prototype.set=function(d,h){var t=this.maybeGetEntry_(d),a=t.id,c=t.list,t=t.entry;c||(c=this.data_[a]=[]);t?t.value=h:(t={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:h},c.push(t),this.head_.previous.next=t,this.head_.previous=t,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(d){var h=this.maybeGetEntry_(d);d=h.id;var t=h.list,a=h.index;return(h=h.entry)&&t?(t.splice(a,1),t.length||delete this.data_[d],h.previous.next=h.next,h.next.previous=h.previous,h.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(d){return!!this.maybeGetEntry_(d).entry};
$jscomp.Map.prototype.get=function(d){return(d=this.maybeGetEntry_(d).entry)&&d.value};$jscomp.Map.prototype.maybeGetEntry_=function(d){var h=$jscomp.Map.getId_(d),t=this.data_[h];if(t)for(var a=0;a<t.length;a++){var c=t[a];if(d!==d&&c.key!==c.key||d===c.key)return{id:h,list:t,index:a,entry:c}}return{id:h,list:t,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(d){return[d.key,d.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(d){return d.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(d){return d.value})};$jscomp.Map.prototype.forEach=function(d,h){for(var t=$jscomp.makeIterator(this.entries()),a=t.next();!a.done;a=t.next())a=a.value,d.call(h,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(d){var h=this,t=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(t){for(;t.head!=h.head_;)t=t.previous;for(;t.next!=t.head;)return t=t.next,{done:!1,value:d(t)};t=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(d,h,t){Object.defineProperty(d,h,{value:String(t)})}:function(d,h,t){d[h]=String(t)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(d){d=Number(d)>>>0;if(0===d)return 32;var h=0;0===(d&4294901760)&&(d<<=16,h+=16);0===(d&4278190080)&&(d<<=8,h+=8);0===(d&4026531840)&&(d<<=4,h+=4);0===(d&3221225472)&&(d<<=2,h+=2);0===(d&2147483648)&&h++;return h};$jscomp.math.imul=function(d,h){d=Number(d);h=Number(h);var t=d&65535,a=h&65535;return t*a+((d>>>16&65535)*a+t*(h>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1};
$jscomp.math.log10=function(d){return Math.log(d)/Math.LN10};$jscomp.math.log2=function(d){return Math.log(d)/Math.LN2};$jscomp.math.log1p=function(d){d=Number(d);if(.25>d&&-.25<d){for(var h=d,t=1,a=d,c=0,z=1;c!=a;)h*=d,z*=-1,a=(c=a)+z*h/++t;return a}return Math.log(1+d)};$jscomp.math.expm1=function(d){d=Number(d);if(.25>d&&-.25<d){for(var h=d,t=1,a=d,c=0;c!=a;)h*=d/++t,a=(c=a)+h;return a}return Math.exp(d)-1};$jscomp.math.cosh=function(d){d=Number(d);return(Math.exp(d)+Math.exp(-d))/2};
$jscomp.math.sinh=function(d){d=Number(d);return 0===d?d:(Math.exp(d)-Math.exp(-d))/2};$jscomp.math.tanh=function(d){d=Number(d);if(0===d)return d;var h=Math.exp(2*-Math.abs(d)),h=(1-h)/(1+h);return 0>d?-h:h};$jscomp.math.acosh=function(d){d=Number(d);return Math.log(d+Math.sqrt(d*d-1))};$jscomp.math.asinh=function(d){d=Number(d);if(0===d)return d;var h=Math.log(Math.abs(d)+Math.sqrt(d*d+1));return 0>d?-h:h};
$jscomp.math.atanh=function(d){d=Number(d);return($jscomp.math.log1p(d)-$jscomp.math.log1p(-d))/2};
$jscomp.math.hypot=function(d,h,t){for(var a=[],c=2;c<arguments.length;++c)a[c-2]=arguments[c];d=Number(d);h=Number(h);for(var z=Math.max(Math.abs(d),Math.abs(h)),D=$jscomp.makeIterator(a),c=D.next();!c.done;c=D.next())z=Math.max(z,Math.abs(c.value));if(1E100<z||1E-100>z){d/=z;h/=z;D=d*d+h*h;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c)/z,D+=c*c;return Math.sqrt(D)*z}z=d*d+h*h;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c),z+=
c*c;return Math.sqrt(z)};$jscomp.math.trunc=function(d){d=Number(d);if(isNaN(d)||Infinity===d||-Infinity===d||0===d)return d;var h=Math.floor(Math.abs(d));return 0>d?-h:h};$jscomp.math.cbrt=function(d){if(0===d)return d;d=Number(d);var h=Math.pow(Math.abs(d),1/3);return 0>d?-h:h};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(d){return"number"!==typeof d?!1:!isNaN(d)&&Infinity!==d&&-Infinity!==d};
$jscomp.number.isInteger=function(d){return $jscomp.number.isFinite(d)?d===Math.floor(d):!1};$jscomp.number.isNaN=function(d){return"number"===typeof d&&isNaN(d)};$jscomp.number.isSafeInteger=function(d){return $jscomp.number.isInteger(d)&&Math.abs(d)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(d,h){for(var t=[],a=1;a<arguments.length;++a)t[a-1]=arguments[a];t=$jscomp.makeIterator(t);for(a=t.next();!a.done;a=t.next())if(a=a.value)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d};$jscomp.object.is=function(d,h){return d===h?0!==d||1/d===1/h:d!==d&&h!==h};$jscomp.Set=function(d){d=void 0===d?[]:d;this.map_=new $jscomp.Map;if(d){d=$jscomp.makeIterator(d);for(var h=d.next();!h.done;h=d.next())this.add(h.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var d=$jscomp.global.Set;if(!d||!d.prototype.entries||!Object.seal)return!1;var h=Object.seal({x:4}),d=new d($jscomp.makeIterator([h]));if(d.has(h)||1!=d.size||d.add(h)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var d=d.entries(),t=d.next();if(t.done||t.value[0]!=h||t.value[1]!=h)return!1;t=d.next();return t.done||t.value[0]==h||4!=t.value[0].x||t.value[1]!=t.value[0]?!1:d.next().done};
$jscomp.Set.prototype.add=function(d){this.map_.set(d,d);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(d){d=this.map_["delete"](d);this.size=this.map_.size;return d};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(d){return this.map_.has(d)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(d,h){var t=this;this.map_.forEach(function(a){return d.call(h,a,a,t)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(d,h){if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(d){for(var h=[],t=0;t<arguments.length;++t)h[t-0]=arguments[t];for(var t="",h=$jscomp.makeIterator(h),a=h.next();!a.done;a=h.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?t+=String.fromCharCode(a):(a-=65536,t+=String.fromCharCode(a>>>10&1023|55296),t+=String.fromCharCode(a&1023|56320))}return t};
$jscomp.string.repeat=function(d){var h=this.toString();if(0>d||1342177279<d)throw new RangeError("Invalid count value");d|=0;for(var t="";d;)if(d&1&&(t+=h),d>>>=1)h+=h;return t};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(d){var h=this.toString(),t=h.length;d=Number(d)||0;if(0<=d&&d<t){d|=0;var a=h.charCodeAt(d);if(55296>a||56319<a||d+1===t)return a;d=h.charCodeAt(d+1);return 56320>d||57343<d?a:1024*(a-55296)+d+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(d,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(d,"includes");return-1!==this.toString().indexOf(d,h)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(d,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(d,"startsWith");var t=this.toString();d+="";for(var a=t.length,c=d.length,z=Math.max(0,Math.min(h|0,t.length)),D=0;D<c&&z<a;)if(t[z++]!=d[D++])return!1;return D>=c};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(d,h){$jscomp.string.noRegExp_(d,"endsWith");var t=this.toString();d+="";void 0===h&&(h=t.length);for(var a=Math.max(0,Math.min(h|0,t.length)),c=d.length;0<c&&0<a;)if(t[--a]!=d[--c])return!1;return 0>=c};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function d(h,t,a){function c(m,l){if(!t[m]){if(!h[m]){var f="function"==typeof require&&require;if(!l&&f)return f(m,!0);if(z)return z(m,!0);f=Error("Cannot find module '"+m+"'");throw f.code="MODULE_NOT_FOUND",f;}f=t[m]={exports:{}};h[m][0].call(f.exports,function(f){return c(h[m][1][f]||f)},f,f.exports,d,h,t,a)}return t[m].exports}for(var z="function"==typeof require&&require,D=0;D<a.length;D++)c(a[D]);return c}return d})()({1:[function(d,h,t){var a=d("../regl"),c=d("gl-mat4"),z=d("canvas-orbit-camera");
d=d("canvas-fit");h=Array.prototype;var D=h.push,m=h.unshift,l={duplicate:function(b,g,f){null==g&&(g=1);null==f&&(f=1);for(var c=[],k=Array(2*g),a=0,q=b.length/g;a<q;a++){for(var l=a*g,y=0;y<g;y++){var C=b[l+y];k[y]=C;k[y+g]=C*f}D.apply(c,k)}return c},mapElement:function(b,g,f,c){for(var k=0,a=b.length/f;k<a;k++){var q=g+k*f;b[q]=c(b[q],q,k)}return b},pushElement:function(b,g,f){var c=Array(f);g*=f;for(var k=0;k<f;k++)c[k]=b[g+k];D.apply(b,c);return b},unshiftElement:function(b,g,f){var c=Array(f);
g*=f;for(var k=0;k<f;k++)c[k]=b[g+k];m.apply(b,c);return b}};t=Float32Array.BYTES_PER_ELEMENT;h=document.createElement("canvas");var f=a(h),k=z(h),a=function(b,g,f){for(var c=2*Math.PI,k=0;k<g;k++){var a=k/(g-1)*c,q=f(a,k);b.push(Math.cos(a)*q,Math.sin(a)*q,0)}return b}([],200,function(b){return 20*Math.sin(2.5*b)}).slice();l.mapElement(a,2,3,function(b,g,f){return 20*(f/200-.5)});l.pushElement(a,0,3);l.unshiftElement(a,199,3);var z=Array(200).fill(1).map(function(b,g){return(g+1)/200}),b=new Float32Array(l.duplicate(a,
3)),q=new Float32Array(b),z=l.duplicate(z,1,-1),a=function(b,g,f){for(var c=0;c<g-1;c++){var k=f+2*c,a=k+1,q=k+2;b.push(k,a,q,q,a,k+3)}return b}([],200,0),C=f.buffer({usage:"dynamic",type:"float",length:1212*t}),z=f.buffer({usage:"static",type:"float",length:404*t,data:z});t={prevPosition:{buffer:C,offset:0,stride:3*t},currPosition:{buffer:C,offset:6*t,stride:3*t},nextPosition:{buffer:C,offset:12*t,stride:3*t},offsetScale:z};var z={projection:function(b){return c.perspective([],Math.PI/2,b.viewportWidth/
b.viewportHeight,.01,1E3)},model:c.identity([]),view:function(){return k.view()},aspect:function(b){return b.viewportWidth/b.viewportHeight},color:[.8,.5,0,1],thickness:1,miter:0},a=f.elements({primitive:"triangles",usage:"static",type:"uint16",data:a}),y=f({attributes:t,uniforms:z,elements:a,vert:"\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nuniform float aspect;\n\nuniform float thickness;\nuniform int miter;\n\nattribute vec3 prevPosition;\nattribute vec3 currPosition;\nattribute vec3 nextPosition;\nattribute float offsetScale;\n\nvoid main() {\n  vec2 aspectVec = vec2(aspect, 1.0);\n  mat4 projViewModel = projection * view * model;\n  vec4 prevProjected = projViewModel * vec4(prevPosition, 1.0);\n  vec4 currProjected = projViewModel * vec4(currPosition, 1.0);\n  vec4 nextProjected = projViewModel * vec4(nextPosition, 1.0);\n\n  // get 2D screen space with W divide and aspect correction\n  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;\n  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n\n  float len = thickness;\n\n  // starting point uses (next - current)\n  vec2 dir = vec2(0.0);\n  if (currScreen == prevScreen) {\n    dir = normalize(nextScreen - currScreen);\n  }\n  // ending point uses (current - previous)\n  else if (currScreen == nextScreen) {\n    dir = normalize(currScreen - prevScreen);\n  }\n  // somewhere in middle, needs a join\n  else {\n    // get directions from (C - B) and (B - A)\n    vec2 dirA = normalize((currScreen - prevScreen));\n    if (miter == 1) {\n      vec2 dirB = normalize((nextScreen - currScreen));\n      // now compute the miter join normal and length\n      vec2 tangent = normalize(dirA + dirB);\n      vec2 perp = vec2(-dirA.y, dirA.x);\n      vec2 miter = vec2(-tangent.y, tangent.x);\n      dir = tangent;\n      len = thickness / dot(miter, perp);\n    } else {\n      dir = dirA;\n    }\n  }\n\n  vec2 normal = vec2(-dir.y, dir.x) * thickness;\n  normal.x /= aspect;\n  vec4 offset = vec4(normal * offsetScale, 0.0, 1.0);\n  gl_Position = currProjected + offset;\n}",
frag:"\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"});f.frame(function(e){var g=e.tick;f.clear({color:[.1,.1,.1,1],depth:1});k.tick();l.mapElement(q,2,3,function(e,f,c){return b[f]+5*Math.sin(.05*g+.1*Math.floor(c/2))});C.subdata(q,0);y()});window.addEventListener("resize",d(h),!1);document.body.appendChild(h)},{"../regl":81,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59}],2:[function(d,h,t){function a(){this.w=this.z=this.y=this.x=this.state=0;
this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var c=d("./util/sorted-object-keys"),z=d("./util/check"),D=d("./util/values"),m=d("./constants/dtypes.json"),l=d("./util/is-typed-array"),f=d("./util/is-ndarray"),k=d("./constants/primitives.json"),b="attributes elements offset count primitive instances".split(" ");h.exports=function(q,C,y,e,g,p,n){function r(b){if(b!==h.currentVAO){var g=C.oes_vertex_array_object;b?g.bindVertexArrayOES(b.vao):g.bindVertexArrayOES(null);
h.currentVAO=b}}function u(b){if(b!==h.currentVAO){if(b)b.bindAttrs();else{for(var g=C.angle_instanced_arrays,e=0;e<B.length;++e){var f=B[e];f.buffer?(q.enableVertexAttribArray(e),f.buffer.bind(),q.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offfset),g&&f.divisor&&g.vertexAttribDivisorANGLE(e,f.divisor)):(q.disableVertexAttribArray(e),q.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}n.elements?q.bindBuffer(34963,n.elements.buffer.buffer):q.bindBuffer(34963,null)}h.currentVAO=b}}function M(){D(na).forEach(function(b){b.destroy()})}
function w(){this.id=++ca;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=C.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;na[this.id]=this;this.buffers=[]}function d(){C.oes_vertex_array_object&&D(na).forEach(function(b){b.refresh()})}var x=y.maxAttributes,B=Array(x);for(y=0;y<x;++y)B[y]=new a;var ca=0,na={},h={Record:a,scope:{},state:B,currentVAO:null,targetVAO:null,restore:C.oes_vertex_array_object?d:
function(){},createVAO:function(n){function q(e){var n;if(Array.isArray(e))n=e,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{z("object"===typeof e,"invalid arguments for create vao");z("attributes"in e,"must specify attributes for vao");if(e.elements){var u=e.elements;r.ownsElements?("function"===typeof u&&"elements"===u._reglType?r.elements.destroy():r.elements(u),r.ownsElements=!1):p.getElements(e.elements)?
(r.elements=e.elements,r.ownsElements=!1):(r.elements=p.create(e.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;n=e.attributes;r.offset=0;r.count=-1;r.instances=-1;r.primitive=4;r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType);"offset"in e&&(r.offset=e.offset|0);"count"in e&&(r.count=e.count|0);"instances"in e&&(r.instances=e.instances|0);"primitive"in e&&(z(e.primitive in k,"bad primitive type: "+e.primitive),r.primitive=k[e.primitive]);
z.optional(function(){for(var g=c(e),f=0;f<g.length;++f)z(0<=b.indexOf(g[f]),'invalid option for vao: "'+g[f]+'" valid options are '+b)});z(Array.isArray(n),"attributes must be an array")}z(n.length<x,"too many attributes");z(0<n.length,"must specify at least one attribute");var u={},y=r.attributes;y.length=n.length;for(var M=0;M<n.length;++M){var w=n[M],d=y[M]=new a,D=w.data||w;if(Array.isArray(D)||l(D)||f(D)){var ca;r.buffers[M]&&(ca=r.buffers[M],l(D)&&ca._buffer.byteLength>=D.byteLength?ca.subdata(D):
(ca.destroy(),r.buffers[M]=null));r.buffers[M]||(ca=r.buffers[M]=g.create(w,34962,!1,!0));d.buffer=g.getBuffer(ca);d.size=d.buffer.dimension|0;d.normalized=!1;d.type=d.buffer.dtype;d.offset=0;d.stride=0;d.divisor=0;d.state=1;u[M]=1}else g.getBuffer(w)?(d.buffer=g.getBuffer(w),d.size=d.buffer.dimension|0,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):g.getBuffer(w.buffer)?(d.buffer=g.getBuffer(w.buffer),d.size=(+w.size||d.buffer.dimension)|0,d.normalized=!!w.normalized||
!1,"type"in w?(z.parameter(w.type,m,"invalid buffer type"),d.type=m[w.type]):d.type=d.buffer.dtype,d.offset=(w.offset||0)|0,d.stride=(w.stride||0)|0,d.divisor=(w.divisor||0)|0,d.state=1,z(1<=d.size&&4>=d.size,"size must be between 1 and 4"),z(0<=d.offset,"invalid offset"),z(0<=d.stride&&255>=d.stride,"stride must be between 0 and 255"),z(0<=d.divisor,"divisor must be positive"),z(!d.divisor||!!C.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in w?(z(0<M,"first attribute must not be a constant"),
d.x=+w.x||0,d.y=+w.y||0,d.z=+w.z||0,d.w=+w.w||0,d.state=2):z(!1,"invalid attribute spec for location "+M)}for(ca=0;ca<r.buffers.length;++ca)!u[ca]&&r.buffers[ca]&&(r.buffers[ca].destroy(),r.buffers[ca]=null);r.refresh();return q}var r=new w;e.vaoCount+=1;q.destroy=function(){for(var b=0;b<r.buffers.length;++b)r.buffers[b]&&r.buffers[b].destroy();r.buffers.length=0;r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1);r.destroy()};q._vao=r;q._reglType="vao";return q(n)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var g=0;g<B.length;++g){var e=B[g];e.buffer===b&&(q.disableVertexAttribArray(g),e.buffer=null)}},setVAO:C.oes_vertex_array_object?r:u,clear:C.oes_vertex_array_object?M:function(){}};w.prototype.bindAttrs=function(){for(var b=C.angle_instanced_arrays,g=this.attributes,e=0;e<g.length;++e){var f=g[e];f.buffer?(q.enableVertexAttribArray(e),q.bindBuffer(34962,f.buffer.buffer),q.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offset),
b&&f.divisor&&b.vertexAttribDivisorANGLE(e,f.divisor)):(q.disableVertexAttribArray(e),q.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}for(b=g.length;b<x;++b)q.disableVertexAttribArray(b);(b=p.getElements(this.elements))?q.bindBuffer(34963,b.buffer.buffer):q.bindBuffer(34963,null)};w.prototype.refresh=function(){var b=C.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=null,b.bindVertexArrayOES(null))};w.prototype.destroy=function(){if(this.vao){var b=C.oes_vertex_array_object;
this===h.currentVAO&&(h.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);na[this.id]&&(delete na[this.id],--e.vaoCount)};return h}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(d,h,t){function a(b){return y[Object.prototype.toString.call(b)]|
0}function c(b,g){for(var e=0;e<g.length;++e)b[e]=g[e]}function z(b,g,e,f,c,k,a){for(var p=0,q=0;q<e;++q)for(var l=0;l<f;++l)b[p++]=g[c*q+k*l+a]}var D=d("./util/sorted-object-keys"),m=d("./util/check"),l=d("./util/is-typed-array"),f=d("./util/is-ndarray"),k=d("./util/values"),b=d("./util/pool");t=d("./util/flatten");var q=t.flatten,C=t.shape,y=d("./constants/arraytypes.json"),e=d("./constants/dtypes.json"),g=d("./constants/usage.json"),p=[];p[5120]=1;p[5122]=2;p[5124]=4;p[5121]=1;p[5123]=2;p[5125]=
4;p[5126]=4;h.exports=function(n,r,u,y){function w(b){this.id=ca++;this.buffer=n.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;u.profile&&(this.stats={size:0})}function d(b,g,e){b.byteLength=g.byteLength;n.bufferData(b.type,g,e)}function x(g,e,k,p,n,r){g.usage=k;if(Array.isArray(e)){if(g.dtype=p||5126,0<e.length)if(Array.isArray(e[0])){n=C(e);for(var u=p=1;u<n.length;++u)p*=n[u];g.dimension=p;e=q(e,n,g.dtype);d(g,e,k);r?g.persistentData=
e:b.freeType(e)}else"number"===typeof e[0]?(g.dimension=n,n=b.allocType(g.dtype,e.length),c(n,e),d(g,n,k),r?g.persistentData=n:b.freeType(n)):l(e[0])?(g.dimension=e[0].length,g.dtype=p||a(e[0])||5126,e=q(e,[e.length,e[0].length],g.dtype),d(g,e,k),r?g.persistentData=e:b.freeType(e)):m.raise("invalid buffer data")}else if(l(e))g.dtype=p||a(e),g.dimension=n,d(g,e,k),r&&(g.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(f(e)){n=e.shape;var y=e.stride,u=e.offset,w=0,M=0,D=0,x=0;1===n.length?
(w=n[0],M=1,D=y[0],x=0):2===n.length?(w=n[0],M=n[1],D=y[0],x=y[1]):m.raise("invalid shape");g.dtype=p||a(e.data)||5126;g.dimension=M;n=b.allocType(g.dtype,w*M);z(n,e.data,w,M,D,x,u);d(g,n,k);r?g.persistentData=n:b.freeType(n)}else e instanceof ArrayBuffer?(g.dtype=5121,g.dimension=n,d(g,e,k),r&&(g.persistentData=new Uint8Array(new Uint8Array(e)))):m.raise("invalid buffer data")}function B(b){r.bufferCount--;y(b);var g=b.buffer;m(g,"buffer must not be deleted already");n.deleteBuffer(g);b.buffer=null;
delete na[b.id]}var ca=0,na={};w.prototype.bind=function(){n.bindBuffer(this.type,this.buffer)};w.prototype.destroy=function(){B(this)};var h=[];u.profile&&(r.getTotalBufferSize=function(){var b=0;D(na).forEach(function(g){b+=na[g].stats.size});return b});return{create:function(k,y,M,d){function D(b){var c=35044,k=null,a=0,q=0,r=1;Array.isArray(b)||l(b)||f(b)||b instanceof ArrayBuffer?k=b:"number"===typeof b?a=b|0:b&&(m.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in
b&&(m(null===k||Array.isArray(k)||l(k)||f(k),"invalid data for buffer"),k=b.data),"usage"in b&&(m.parameter(b.usage,g,"invalid buffer usage"),c=g[b.usage]),"type"in b&&(m.parameter(b.type,e,"invalid buffer type"),q=e[b.type]),"dimension"in b&&(m.type(b.dimension,"number","invalid dimension"),r=b.dimension|0),"length"in b&&(m.nni(a,"buffer length must be a nonnegative integer"),a=b.length|0));sa.bind();k?x(sa,k,c,q,r,d):(a&&n.bufferData(sa.type,a,c),sa.dtype=q||5121,sa.usage=c,sa.dimension=r,sa.byteLength=
a);u.profile&&(sa.stats.size=sa.byteLength*p[sa.dtype]);return D}function ca(b,g){m(g+b.byteLength<=sa.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+g+" to a buffer of size "+sa.byteLength);n.bufferSubData(sa.type,g,b)}r.bufferCount++;var sa=new w(y);na[sa.id]=sa;M||D(k);D._reglType="buffer";D._buffer=sa;D.subdata=function(g,e){var k=(e||0)|0,n;sa.bind();if(l(g)||g instanceof ArrayBuffer)ca(g,k);else if(Array.isArray(g)){if(0<
g.length)if("number"===typeof g[0]){var p=b.allocType(sa.dtype,g.length);c(p,g);ca(p,k);b.freeType(p)}else Array.isArray(g[0])||l(g[0])?(n=C(g),p=q(g,n,sa.dtype),ca(p,k),b.freeType(p)):m.raise("invalid buffer data")}else if(f(g)){n=g.shape;var r=g.stride,u=p=0,y=0,w=0;1===n.length?(p=n[0],u=1,y=r[0],w=0):2===n.length?(p=n[0],u=n[1],y=r[0],w=r[1]):m.raise("invalid shape");n=Array.isArray(g.data)?sa.dtype:a(g.data);n=b.allocType(n,p*u);z(n,g.data,p,u,y,w,g.offset);ca(n,k);b.freeType(n)}else m.raise("invalid data for buffer subdata");
return D};u.profile&&(D.stats=sa.stats);D.destroy=function(){B(sa)};return D},createStream:function(b,g){var e=h.pop();e||(e=new w(b));e.bind();x(e,g,35040,0,1,!1);return e},destroyStream:function(b){h.push(b)},clear:function(){k(na).forEach(B);h.forEach(B)},getBuffer:function(b){return b&&b._buffer instanceof w?b._buffer:null},restore:function(){k(na).forEach(function(b){b.buffer=n.createBuffer();n.bindBuffer(b.type,b.buffer);n.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:x}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(d,h,t){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(d,h,t){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(d,h,t){h.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(d,h,t){h.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(d,h,t){function a(b){return Array.isArray(b)||y(b)||e(b)}function c(b){return b.sort(function(b,
g){return"viewport"===b?-1:"viewport"===g?1:b<g?-1:1})}function z(b,g,e,f){this.thisDep=b;this.contextDep=g;this.propDep=e;this.append=f}function D(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function m(b){return new z(!1,!1,!1,b)}function l(b,g){var e=b.type;if(0===e)return e=b.data.length,new z(!0,1<=e,2<=e,g);if(4===e)return e=b.data,new z(e.thisDep,e.contextDep,e.propDep,g);if(5===e)return new z(!1,!1,!1,g);if(6===e){for(var f=e=!1,c=!1,k=0;k<b.data.length;++k){var n=b.data[k];1===n.type?
c=!0:2===n.type?f=!0:3===n.type?e=!0:0===n.type?(e=!0,n=n.data,1<=n&&(f=!0),2<=n&&(c=!0)):4===n.type&&(e=e||n.data.thisDep,f=f||n.data.contextDep,c=c||n.data.propDep)}return new z(e,f,c,g)}return new z(3===e,2===e,1===e,g)}var f=d("./util/sorted-object-keys"),k=d("./util/check"),b=d("./util/extend"),q=d("./util/codegen"),C=d("./util/loop"),y=d("./util/is-typed-array"),e=d("./util/is-ndarray"),g=d("./util/is-array-like"),p=d("./dynamic"),n=d("./constants/primitives.json"),r=d("./constants/dtypes.json"),
u=["x","y","z","w"],M="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),w={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},sa="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
x={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},B={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ca={frag:35632,vert:35633},na={cw:2304,ccw:2305},S=new z(!1,!1,!1,function(){});h.exports=function(e,y,d,h,t,K,ja,T,ha,la,Qa,Bb,oa,Oa,W){function P(b){return b.replace(".","_")}function L(b,g,e){var f=P(b);
da.push(b);H[f]=N[f]=!!e;Aa[f]=g}function U(b,g,e){var f=P(b);da.push(b);Array.isArray(e)?(N[f]=e.slice(),H[f]=e.slice()):N[f]=H[f]=e;Da[f]=g}function pa(){var b=q(),g=b.link,e=b.global;b.id=nc++;b.batchId="0";var c=g(Ja),n=b.shared={props:"a0"};f(Ja).forEach(function(b){n[b]=e.def(c,".",b)});k.optional(function(){b.CHECK=g(k);b.commandStr=k.guessCommand();b.command=g(b.commandStr);b.assert=function(b,e,f){b("if(!(",e,"))",this.CHECK,".commandRaise(",g(f),",",this.command,");")};F.invalidBlendCombinations=
sa});var a=b.next={},p=b.current={};f(Da).forEach(function(b){Array.isArray(N[b])&&(a[b]=e.def(n.next,".",b),p[b]=e.def(n.current,".",b))});var r=b.constants={};f(F).forEach(function(b){r[b]=e.def(JSON.stringify(F[b]))});b.invoke=function(e,f){switch(f.type){case 0:var c=["this",n.context,n.props,b.batchId];return e.def(g(f.data),".call(",c.slice(0,Math.max(f.data.length+1,4)),")");case 1:return e.def(n.props,f.data);case 2:return e.def(n.context,f.data);case 3:return e.def("this",f.data);case 4:return f.data.append(b,
e),f.data.ref;case 5:return f.data.toString();case 6:return f.data.map(function(g){return b.invoke(e,g)})}};b.attribCache={};var u={};b.scopeAttrib=function(b){b=y.id(b);if(b in u)return u[b];var e=la.scope[b];e||(e=la.scope[b]=new ia);return u[b]=g(e)};return b}function Q(b){var e=b["static"];b=b.dynamic;var g;if("profile"in e){var f=!!e.profile;g=m(function(b,e){return f});g.enable=f}else if("profile"in b){var c=b.profile;g=l(c,function(b,e){return b.invoke(e,c)})}return g}function Pb(b,e){var g=
b["static"],f=b.dynamic;if("framebuffer"in g){var c=g.framebuffer;return c?(c=T.getFramebuffer(c),k.command(c,"invalid framebuffer object"),m(function(b,e){var g=b.link(c),f=b.shared;e.set(f.framebuffer,".next",g);f=f.context;e.set(f,".framebufferWidth",g+".width");e.set(f,".framebufferHeight",g+".height");return g})):m(function(b,e){var g=b.shared;e.set(g.framebuffer,".next","null");g=g.context;e.set(g,".framebufferWidth",g+".drawingBufferWidth");e.set(g,".framebufferHeight",g+".drawingBufferHeight");
return"null"})}if("framebuffer"in f){var n=f.framebuffer;return l(n,function(b,g){var e=b.invoke(g,n),f=b.shared,c=f.framebuffer,a=g.def(c,".getFramebuffer(",e,")");k.optional(function(){b.assert(g,"!"+e+"||"+a,"invalid framebuffer object")});g.set(c,".next",a);f=f.context;g.set(f,".framebufferWidth",a+"?"+a+".width:"+f+".drawingBufferWidth");g.set(f,".framebufferHeight",a+"?"+a+".height:"+f+".drawingBufferHeight");return a})}return null}function ab(b,g,e){function f(b){if(b in c){var a=c[b];k.commandType(a,
"object","invalid "+b,e.commandStr);var p=!0,q=a.x|0,r=a.y|0,u,y;"width"in a?(u=a.width|0,k.command(0<=u,"invalid "+b,e.commandStr)):p=!1;"height"in a?(y=a.height|0,k.command(0<=y,"invalid "+b,e.commandStr)):p=!1;return new z(!p&&g&&g.thisDep,!p&&g&&g.contextDep,!p&&g&&g.propDep,function(b,g){var e=b.shared.context,f=u;"width"in a||(f=g.def(e,".","framebufferWidth","-",q));var c=y;"height"in a||(c=g.def(e,".","framebufferHeight","-",r));return[q,r,f,c]})}if(b in n){var w=n[b],p=l(w,function(g,e){var f=
g.invoke(e,w);k.optional(function(){g.assert(e,f+"&&typeof "+f+'==="object"',"invalid "+b)});var c=g.shared.context,n=e.def(f,".x|0"),a=e.def(f,".y|0"),p=e.def('"width" in ',f,"?",f,".width|0:","(",c,".","framebufferWidth","-",n,")"),q=e.def('"height" in ',f,"?",f,".height|0:","(",c,".","framebufferHeight","-",a,")");k.optional(function(){g.assert(e,p+">=0&&"+q+">=0","invalid "+b)});return[n,a,p,q]});g&&(p.thisDep=p.thisDep||g.thisDep,p.contextDep=p.contextDep||g.contextDep,p.propDep=p.propDep||g.propDep);
return p}return g?new z(g.thisDep,g.contextDep,g.propDep,function(b,g){var e=b.shared.context;return[0,0,g.def(e,".","framebufferWidth"),g.def(e,".","framebufferHeight")]}):null}var c=b["static"],n=b.dynamic;if(b=f("viewport")){var a=b;b=new z(b.thisDep,b.contextDep,b.propDep,function(b,g){var e=a.append(b,g),f=b.shared.context;g.set(f,".viewportWidth",e[2]);g.set(f,".viewportHeight",e[3]);return e})}return{viewport:b,scissor_box:f("scissor.box")}}function R(b,g){var e=b["static"];if("string"===typeof e.frag&&
"string"===typeof e.vert){if(0<f(g.dynamic).length)return null;var e=g["static"],c=f(e);if(0<c.length&&"number"===typeof e[c[0]]){for(var n=[],a=0;a<c.length;++a)k("number"===typeof e[c[a]],"must specify all vertex attribute locations when using vaos"),n.push([e[c[a]]|0,c[a]]);return n}}return null}function E(b,g,e){function f(b){if(b in c){var g=y.id(c[b]);k.optional(function(){Qa.shader(ca[b],g,k.guessCommand())});var e=m(function(){return g});e.id=g;return e}if(b in n){var a=n[b];return l(a,function(g,
e){var f=g.invoke(e,a),c=e.def(g.shared.strings,".id(",f,")");k.optional(function(){e(g.shared.shader,".shader(",ca[b],",",c,",",g.command,");")});return c})}return null}var c=b["static"],n=b.dynamic,a=f("frag"),p=f("vert"),q=null;D(a)&&D(p)?(q=Qa.program(p.id,a.id,null,e),b=m(function(b,g){return b.link(q)})):b=new z(a&&a.thisDep||p&&p.thisDep,a&&a.contextDep||p&&p.contextDep,a&&a.propDep||p&&p.propDep,function(b,g){var e=b.shared.shader,f;f=a?a.append(b,g):g.def(e,".","frag");var c;c=p?p.append(b,
g):g.def(e,".","vert");var n=e+".program("+c+","+f;k.optional(function(){n+=","+b.command});return g.def(n+")")});return{frag:a,vert:p,progVar:b,program:q}}function ma(b,g){function e(b,f){if(b in c){var a=c[b]|0;f?q.offset=a:q.instances=a;k.command(!f||0<=a,"invalid "+b,g.commandStr);return m(function(b,g){f&&(b.OFFSET=a);return a})}if(b in p){var n=p[b];return l(n,function(g,e){var c=g.invoke(e,n);f&&(g.OFFSET=c,k.optional(function(){g.assert(e,c+">=0","invalid "+b)}));return c})}if(f){if(y)return m(function(b,
g){return b.OFFSET=0});if(r)return new z(u.thisDep,u.contextDep,u.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(r)return new z(u.thisDep,u.contextDep,u.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var c=b["static"],p=b.dynamic,q={},r=!1,u=function(){if("vao"in c){var b=c.vao;null!==b&&null===la.getVAO(b)&&(b=la.createVAO(b));r=!0;q.vao=b;return m(function(g){var e=
la.getVAO(b);return e?g.link(e):"null"})}if("vao"in p){r=!0;var g=p.vao;return l(g,function(b,e){var f=b.invoke(e,g);return e.def(b.shared.vao+".getVAO("+f+")")})}return null}(),y=!1,w=function(){if("elements"in c){var b=c.elements;q.elements=b;if(a(b)){var e=q.elements=K.create(b,!0),b=K.getElements(e);y=!0}else b&&(b=K.getElements(b),y=!0,k.command(b,"invalid elements",g.commandStr));e=m(function(g,e){if(b){var f=g.link(b);return g.ELEMENTS=f}return g.ELEMENTS=null});e.value=b;return e}if("elements"in
p){y=!0;var f=p.elements;return l(f,function(b,g){var e=b.shared,c=e.isBufferArgs,e=e.elements,a=b.invoke(g,f),n=g.def("null"),c=g.def(c,"(",a,")"),p=b.cond(c).then(n,"=",e,".createStream(",a,");")["else"](n,"=",e,".getElements(",a,");");k.optional(function(){b.assert(p["else"],"!"+a+"||"+n,"invalid elements")});g.entry(p);g.exit(b.cond(c).then(e,".destroyStream(",n,");"));return b.ELEMENTS=n})}return r?new z(u.thisDep,u.contextDep,u.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+
b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),C=e("offset",!0),M=function(){if("primitive"in c){var b=c.primitive;q.primitive=b;k.commandParameter(b,n,"invalid primitve",g.commandStr);return m(function(g,e){return n[b]})}if("primitive"in p){var e=p.primitive;return l(e,function(b,g){var c=b.constants.primTypes,a=b.invoke(g,e);k.optional(function(){b.assert(g,a+" in "+c,"invalid primitive, must be one of "+f(n))});return g.def(c,"[",a,"]")})}return y?D(w)?w.value?
m(function(b,g){return g.def(b.ELEMENTS,".primType")}):m(function(){return 4}):new z(w.thisDep,w.contextDep,w.propDep,function(b,g){var e=b.ELEMENTS;return g.def(e,"?",e,".primType:",4)}):r?new z(u.thisDep,u.contextDep,u.propDep,function(b,g){return g.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),d=function(){if("count"in c){var b=c.count|0;q.count=b;k.command("number"===typeof b&&0<=b,"invalid vertex count",g.commandStr);return m(function(){return b})}if("count"in
p){var e=p.count;return l(e,function(b,g){var f=b.invoke(g,e);k.optional(function(){b.assert(g,"typeof "+f+'==="number"&&'+f+">=0&&"+f+"===("+f+"|0)","invalid vertex count")});return f})}if(y){if(D(w)){if(w)return C?new z(C.thisDep,C.contextDep,C.propDep,function(b,g){var e=g.def(b.ELEMENTS,".vertCount-",b.OFFSET);k.optional(function(){b.assert(g,e+">=0","invalid vertex offset/element buffer too small")});return e}):m(function(b,g){return g.def(b.ELEMENTS,".vertCount")});var f=m(function(){return-1});
k.optional(function(){f.MISSING=!0});return f}var a=new z(w.thisDep||C.thisDep,w.contextDep||C.contextDep,w.propDep||C.propDep,function(b,g){var e=b.ELEMENTS;return b.OFFSET?g.def(e,"?",e,".vertCount-",b.OFFSET,":-1"):g.def(e,"?",e,".vertCount:-1")});k.optional(function(){a.DYNAMIC=!0});return a}return r?new z(u.thisDep,u.contextDep,u.propDep,function(b,g){return g.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),x=e("instances",!1);return{elements:w,primitive:M,count:d,
instances:x,offset:C,vao:u,vaoActive:r,elementsActive:y,"static":q}}function ea(b,e){var c=b["static"],a=b.dynamic,n={};da.forEach(function(b){function p(e,g){if(b in c){var f=e(c[b]);n[q]=m(function(){return f})}else if(b in a){var k=a[b];n[q]=l(k,function(b,e){return g(b,e,b.invoke(e,k))})}}var q=P(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return p(function(g){k.commandType(g,
"boolean",b,e.commandStr);return g},function(e,g,f){k.optional(function(){e.assert(g,"typeof "+f+'==="boolean"',"invalid flag "+b,e.commandStr)});return f});case "depth.func":return p(function(g){k.commandParameter(g,x,"invalid "+b,e.commandStr);return x[g]},function(e,g,c){var a=e.constants.compareFuncs;k.optional(function(){e.assert(g,c+" in "+a,"invalid "+b+", must be one of "+f(x))});return g.def(a,"[",c,"]")});case "depth.range":return p(function(b){k.command(g(b)&&2===b.length&&"number"===typeof b[0]&&
"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",e.commandStr);return b},function(b,e,g){k.optional(function(){b.assert(e,b.shared.isArrayLike+"("+g+")&&"+g+".length===2&&typeof "+g+'[0]==="number"&&typeof '+g+'[1]==="number"&&'+g+"[0]<="+g+"[1]","depth range must be a 2d array")});var f=e.def("+",g,"[0]"),c=e.def("+",g,"[1]");return[f,c]});case "blend.func":return p(function(b){k.commandType(b,"object","blend.func",e.commandStr);var g="srcRGB"in b?b.srcRGB:b.src,f="srcAlpha"in b?b.srcAlpha:
b.src,c="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;k.commandParameter(g,w,q+".srcRGB",e.commandStr);k.commandParameter(f,w,q+".srcAlpha",e.commandStr);k.commandParameter(c,w,q+".dstRGB",e.commandStr);k.commandParameter(b,w,q+".dstAlpha",e.commandStr);k.command(-1===sa.indexOf(g+", "+c),"unallowed blending combination (srcRGB, dstRGB) = ("+g+", "+c+")",e.commandStr);return[w[g],w[c],w[f],w[b]]},function(g,e,c){function a(p,q){var r=e.def('"',p,q,'" in ',c,"?",c,".",p,q,":",c,".",
p);k.optional(function(){g.assert(e,r+" in "+n,"invalid "+b+"."+p+q+", must be one of "+f(w))});return r}var n=g.constants.blendFuncs;k.optional(function(){g.assert(e,c+"&&typeof "+c+'==="object"',"invalid blend func, must be an object")});var p=a("src","RGB"),q=a("dst","RGB");k.optional(function(){g.assert(e,g.constants.invalidBlendCombinations+".indexOf("+p+'+", "+'+q+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var r=e.def(n,"[",p,"]"),u=e.def(n,"[",a("src","Alpha"),"]"),
l=e.def(n,"[",q,"]"),y=e.def(n,"[",a("dst","Alpha"),"]");return[r,l,u,y]});case "blend.equation":return p(function(g){if("string"===typeof g)return k.commandParameter(g,ua,"invalid "+b,e.commandStr),[ua[g],ua[g]];if("object"===typeof g)return k.commandParameter(g.rgb,ua,b+".rgb",e.commandStr),k.commandParameter(g.alpha,ua,b+".alpha",e.commandStr),[ua[g.rgb],ua[g.alpha]];k.commandRaise("invalid blend.equation",e.commandStr)},function(g,e,c){var a=g.constants.blendEquations,n=e.def(),p=e.def(),q=g.cond("typeof ",
c,'==="string"');k.optional(function(){function e(b,c,k){g.assert(b,k+" in "+a,"invalid "+c+", must be one of "+f(ua))}e(q.then,b,c);g.assert(q["else"],c+"&&typeof "+c+'==="object"',"invalid "+b);e(q["else"],b+".rgb",c+".rgb");e(q["else"],b+".alpha",c+".alpha")});q.then(n,"=",p,"=",a,"[",c,"];");q["else"](n,"=",a,"[",c,".rgb];",p,"=",a,"[",c,".alpha];");e(q);return[n,p]});case "blend.color":return p(function(b){k.command(g(b)&&4===b.length,"blend.color must be a 4d array",e.commandStr);return C(4,
function(g){return+b[g]})},function(b,g,e){k.optional(function(){b.assert(g,b.shared.isArrayLike+"("+e+")&&"+e+".length===4","blend.color must be a 4d array")});return C(4,function(b){return g.def("+",e,"[",b,"]")})});case "stencil.mask":return p(function(b){k.commandType(b,"number",q,e.commandStr);return b|0},function(b,g,e){k.optional(function(){b.assert(g,"typeof "+e+'==="number"',"invalid stencil.mask")});return g.def(e,"|0")});case "stencil.func":return p(function(g){k.commandType(g,"object",
q,e.commandStr);var f=g.cmp||"keep",c=g.ref||0;g="mask"in g?g.mask:-1;k.commandParameter(f,x,b+".cmp",e.commandStr);k.commandType(c,"number",b+".ref",e.commandStr);k.commandType(g,"number",b+".mask",e.commandStr);return[x[f],c,g]},function(b,g,e){var f=b.constants.compareFuncs;k.optional(function(){function c(){b.assert(g,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(e+"&&typeof ",e,'==="object"');c('!("cmp" in ',e,")||(",e,".cmp in ",f,")")});var c=g.def('"cmp" in ',e,"?",f,"[",
e,".cmp]",":",7680),a=g.def(e,".ref|0"),n=g.def('"mask" in ',e,"?",e,".mask|0:-1");return[c,a,n]});case "stencil.opFront":case "stencil.opBack":return p(function(g){k.commandType(g,"object",q,e.commandStr);var f=g.fail||"keep",c=g.zfail||"keep";g=g.zpass||"keep";k.commandParameter(f,B,b+".fail",e.commandStr);k.commandParameter(c,B,b+".zfail",e.commandStr);k.commandParameter(g,B,b+".zpass",e.commandStr);return["stencil.opBack"===b?1029:1028,B[f],B[c],B[g]]},function(g,e,c){function a(p){k.optional(function(){g.assert(e,
'!("'+p+'" in '+c+")||("+c+"."+p+" in "+n+")","invalid "+b+"."+p+", must be one of "+f(B))});return e.def('"',p,'" in ',c,"?",n,"[",c,".",p,"]:",7680)}var n=g.constants.stencilOps;k.optional(function(){g.assert(e,c+"&&typeof "+c+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,a("fail"),a("zfail"),a("zpass")]});case "polygonOffset.offset":return p(function(b){k.commandType(b,"object",q,e.commandStr);var g=b.factor|0;b=b.units|0;k.commandType(g,"number",q+".factor",e.commandStr);
k.commandType(b,"number",q+".units",e.commandStr);return[g,b]},function(g,e,f){k.optional(function(){g.assert(e,f+"&&typeof "+f+'==="object"',"invalid "+b)});var c=e.def(f,".factor|0"),a=e.def(f,".units|0");return[c,a]});case "cull.face":return p(function(b){var g=0;"front"===b?g=1028:"back"===b&&(g=1029);k.command(!!g,q,e.commandStr);return g},function(b,g,e){k.optional(function(){b.assert(g,e+'==="front"||'+e+'==="back"',"invalid cull.face")});return g.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return p(function(b){k.command("number"===
typeof b&&b>=h.lineWidthDims[0]&&b<=h.lineWidthDims[1],"invalid line width, must be a positive number between "+h.lineWidthDims[0]+" and "+h.lineWidthDims[1],e.commandStr);return b},function(b,g,e){k.optional(function(){b.assert(g,"typeof "+e+'==="number"&&'+e+">="+h.lineWidthDims[0]+"&&"+e+"<="+h.lineWidthDims[1],"invalid line width")});return e});case "frontFace":return p(function(b){k.commandParameter(b,na,q,e.commandStr);return na[b]},function(b,g,e){k.optional(function(){b.assert(g,e+'==="cw"||'+
e+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return g.def(e+'==="cw"?2304:2305')});case "colorMask":return p(function(b){k.command(g(b)&&4===b.length,"color.mask must be length 4 array",e.commandStr);return b.map(function(b){return!!b})},function(b,g,e){k.optional(function(){b.assert(g,b.shared.isArrayLike+"("+e+")&&"+e+".length===4","invalid color.mask")});return C(4,function(b){return"!!"+e+"["+b+"]"})});case "sample.coverage":return p(function(b){k.command("object"===typeof b&&b,
q,e.commandStr);var g="value"in b?b.value:1;b=!!b.invert;k.command("number"===typeof g&&0<=g&&1>=g,"sample.coverage.value must be a number between 0 and 1",e.commandStr);return[g,b]},function(b,g,e){k.optional(function(){b.assert(g,e+"&&typeof "+e+'==="object"',"invalid sample.coverage")});var f=g.def('"value" in ',e,"?+",e,".value:1"),c=g.def("!!",e,".invert");return[f,c]})}});return n}function wa(b,e){var c=b["static"],a=b.dynamic,n={};f(c).forEach(function(b){var f=c[b],a;if("number"===typeof f||
"boolean"===typeof f)a=m(function(){return f});else if("function"===typeof f){var p=f._reglType;"texture2d"===p||"textureCube"===p?a=m(function(b){return b.link(f)}):"framebuffer"===p||"framebufferCube"===p?(k.command(0<f.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',e.commandStr),a=m(function(b){return b.link(f.color[0])})):k.commandRaise('invalid data for uniform "'+b+'"',e.commandStr)}else g(f)?a=m(function(g){return g.global.def("[",C(f.length,function(e){k.command("number"===
typeof f[e]||"boolean"===typeof f[e],"invalid uniform "+b,g.commandStr);return f[e]}),"]")}):k.commandRaise('invalid or missing data for uniform "'+b+'"',e.commandStr);a.value=f;n[b]=a});f(a).forEach(function(b){var g=a[b];n[b]=l(g,function(b,e){return b.invoke(e,g)})});return n}function La(b,e){var c=b["static"],n=b.dynamic,p={};f(c).forEach(function(b){var n=c[b],q=y.id(b),l=new ia;if(a(n))l.state=1,l.buffer=t.getBuffer(t.create(n,34962,!1,!0)),l.type=0;else{var w=t.getBuffer(n);if(w)l.state=1,
l.buffer=w,l.type=0;else if(k.command("object"===typeof n&&n,"invalid data for attribute "+b,e.commandStr),"constant"in n){var C=n.constant;l.buffer="null";l.state=2;"number"===typeof C?l.x=C:(k.command(g(C)&&0<C.length&&4>=C.length,"invalid constant for attribute "+b,e.commandStr),u.forEach(function(b,g){g<C.length&&(l[b]=C[g])}))}else{w=a(n.buffer)?t.getBuffer(t.create(n.buffer,34962,!1,!0)):t.getBuffer(n.buffer);k.command(!!w,'missing buffer for attribute "'+b+'"',e.commandStr);var M=n.offset|
0;k.command(0<=M,'invalid offset for attribute "'+b+'"',e.commandStr);var d=n.stride|0;k.command(0<=d&&256>d,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',e.commandStr);var D=n.size|0;k.command(!("size"in n)||0<D&&4>=D,'invalid size for attribute "'+b+'", must be 1,2,3,4',e.commandStr);var z=!!n.normalized,x=0;"type"in n&&(k.commandParameter(n.type,r,"invalid type for attribute "+b,e.commandStr),x=r[n.type]);var ca=n.divisor|0;k.optional(function(){"divisor"in n&&(k.command(0===
ca||Z,'cannot specify divisor for attribute "'+b+'", instancing not supported',e.commandStr),k.command(0<=ca,'invalid divisor for attribute "'+b+'"',e.commandStr));var g=e.commandStr,c="buffer offset divisor normalized type size stride".split(" ");f(n).forEach(function(e){k.command(0<=c.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+b+'" (valid parameters are '+c+")",g)})});l.buffer=w;l.state=1;l.size=D;l.normalized=z;l.type=x||w.dtype;l.offset=M;l.stride=d;l.divisor=ca}}p[b]=m(function(b,
g){var e=b.attribCache;if(q in e)return e[q];var c={isStream:!1};f(l).forEach(function(b){c[b]=l[b]});l.buffer&&(c.buffer=b.link(l.buffer),c.type=c.type||c.buffer+".dtype");return e[q]=c})});f(n).forEach(function(b){var g=n[b];p[b]=l(g,function(e,c){function n(b){c(y[b],"=",a,".",b,"|0;")}var a=e.invoke(c,g),p=e.shared,q=e.constants,r=p.isBufferArgs,l=p.buffer;k.optional(function(){e.assert(c,a+"&&(typeof "+a+'==="object"||typeof '+a+'==="function")&&('+r+"("+a+")||"+l+".getBuffer("+a+")||"+l+".getBuffer("+
a+".buffer)||"+r+"("+a+'.buffer)||("constant" in '+a+"&&(typeof "+a+'.constant==="number"||'+p.isArrayLike+"("+a+".constant))))",'invalid dynamic attribute "'+b+'"')});var y={isStream:c.def(!1)},w=new ia;w.state=1;f(w).forEach(function(b){y[b]=c.def(""+w[b])});var C=y.buffer,M=y.type;c("if(",r,"(",a,")){",y.isStream,"=true;",C,"=",l,".createStream(",34962,",",a,");",M,"=",C,".dtype;","}else{",C,"=",l,".getBuffer(",a,");","if(",C,"){",M,"=",C,".dtype;",'}else if("constant" in ',a,"){",y.state,"=",
2,";","if(typeof "+a+'.constant === "number"){',y[u[0]],"=",a,".constant;",u.slice(1).map(function(b){return y[b]}).join("="),"=0;","}else{",u.map(function(b,g){return y[b]+"="+a+".constant.length>"+g+"?"+a+".constant["+g+"]:0;"}).join(""),"}}else{","if(",r,"(",a,".buffer)){",C,"=",l,".createStream(",34962,",",a,".buffer);","}else{",C,"=",l,".getBuffer(",a,".buffer);","}",M,'="type" in ',a,"?",q.glTypes,"[",a,".type]:",C,".dtype;",y.normalized,"=!!",a,".normalized;");n("size");n("offset");n("stride");
n("divisor");c("}}");c.exit("if(",y.isStream,"){",l,".destroyStream(",C,");","}");return y})});return p}function yb(b){var g=b["static"],e=b.dynamic,c={};f(g).forEach(function(b){var e=g[b];c[b]=m(function(b,g){return"number"===typeof e||"boolean"===typeof e?""+e:b.link(e)})});f(e).forEach(function(b){var g=e[b];c[b]=l(g,function(b,e){return b.invoke(e,g)})});return c}function Ka(b,g,e,c,a){function n(b){var g=l[b];g&&(w[b]=g)}var p=b["static"],q=b.dynamic;k.optional(function(){function b(e){f(e).forEach(function(b){k.command(0<=
g.indexOf(b),'unknown parameter "'+b+'"',a.commandStr)})}var g="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(da);b(p);b(q)});var r=R(b,g),u=Pb(b,a),l=ab(b,u,a),y=ma(b,a),w=ea(b,a),C=E(b,a,r);n("viewport");n(P("scissor.box"));var M=0<f(w).length,u={framebuffer:u,draw:y,shader:C,state:w,dirty:M,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};u.profile=Q(b,a);u.uniforms=wa(e,a);u.drawVAO=u.scopeVAO=y.vao;if(!u.drawVAO&&C.program&&!r&&d.angle_instanced_arrays&&
y["static"].elements){var m=!0;b=C.program.attributes.map(function(b){b=g["static"][b];m=m&&!!b;return b});if(m&&0<b.length){var D=la.getVAO(la.createVAO({attributes:b,elements:y["static"].elements}));u.drawVAO=new z(null,null,null,function(b,g){return b.link(D)});u.useVAO=!0}}r?u.useVAO=!0:u.attributes=La(g,a);u.context=yb(c,a);return u}function X(b,g,e){var c=b.shared.context,a=b.scope();f(e).forEach(function(f){g.save(c,"."+f);var k=e[f].append(b,g);Array.isArray(k)?a(c,".",f,"=[",k.join(),"];"):
a(c,".",f,"=",k,";")});g(a)}function nb(b,g,e,f){var c=b.shared,a=c.gl,k=c.framebuffer,n;fa&&(n=g.def(c.extensions,".webgl_draw_buffers"));var p=b.constants,c=p.drawBuffer,p=p.backBuffer;b=e?e.append(b,g):g.def(k,".next");f||g("if(",b,"!==",k,".cur){");g("if(",b,"){",a,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&g(n,".drawBuffersWEBGL(",c,"[",b,".colorAttachments.length]);");g("}else{",a,".bindFramebuffer(",36160,",null);");fa&&g(n,".drawBuffersWEBGL(",p,");");g("}",k,".cur=",b,";");f||
g("}")}function ga(b,g,e){var c=b.shared,a=c.gl,k=b.current,n=b.next,p=c.current,q=c.next,r=b.cond(p,".dirty");da.forEach(function(g){g=P(g);if(!(g in e.state)){var f,c;if(g in n){f=n[g];c=k[g];var u=C(N[g].length,function(b){return r.def(f,"[",b,"]")});r(b.cond(u.map(function(b,g){return b+"!=="+c+"["+g+"]"}).join("||")).then(a,".",Da[g],"(",u,");",u.map(function(b,g){return c+"["+g+"]="+b}).join(";"),";"))}else f=r.def(q,".",g),u=b.cond(f,"!==",p,".",g),r(u),g in Aa?u(b.cond(f).then(a,".enable(",
Aa[g],");")["else"](a,".disable(",Aa[g],");"),p,".",g,"=",f,";"):u(a,".",Da[g],"(",f,");",p,".",g,"=",f,";")}});0===f(e.state).length&&r(p,".dirty=false;");g(r)}function ra(b,e,a,k){var n=b.shared,p=b.current,q=n.current,r=n.gl;c(f(a)).forEach(function(f){var c=a[f];if(!k||k(c)){var n=c.append(b,e);if(Aa[f]){var u=Aa[f];D(c)?n?e(r,".enable(",u,");"):e(r,".disable(",u,");"):e(b.cond(n).then(r,".enable(",u,");")["else"](r,".disable(",u,");"));e(q,".",f,"=",n,";")}else if(g(n)){var l=p[f];e(r,".",Da[f],
"(",n,");",n.map(function(b,g){return l+"["+g+"]="+b}).join(";"),";")}else e(r,".",Da[f],"(",n,");",q,".",f,"=",n,";")}})}function cc(b,g){Z&&(b.instancing=g.def(b.shared.extensions,".angle_instanced_arrays"))}function pc(b,g,e,f,c){function a(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function k(b){y=g.def();b(y,"=",a(),";");"string"===typeof c?b(r,".count+=",c,";"):b(r,".count++;");Oa&&(f?(w=g.def(),b(w,"=",l,".getNumPendingQueries();")):b(l,".beginQuery(",r,");"))}
function n(b){b(r,".cpuTime+=",a(),"-",y,";");Oa&&(f?b(l,".pushScopeStats(",w,",",l,".getNumPendingQueries(),",r,");"):b(l,".endQuery();"))}function p(b){var e=g.def(u,".profile");g(u,".profile=",b,";");g.exit(u,".profile=",e,";")}var q=b.shared,r=b.stats,u=q.current,l=q.timer;e=e.profile;var y,w;if(e){if(D(e)){e.enable?(k(g),n(g.exit),p("true")):p("false");return}e=e.append(b,g);p(e)}else e=g.def(u,".profile");q=b.block();k(q);g("if(",e,"){",q,"}");b=b.block();n(b);g.exit("if(",e,"){",b,"}")}function jc(b,
g,e,c,a){function n(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function p(e,f,c){function a(){g("if(!",l,".buffer){",k,".enableVertexAttribArray(",r,");}");var e=c.type,n;n=c.size?g.def(c.size,"||",f):f;g("if(",l,".type!==",e,"||",l,".size!==",n,"||",C.map(function(b){return l+"."+b+"!=="+c[b]}).join("||"),"){",k,".bindBuffer(",34962,",",y,".buffer);",k,".vertexAttribPointer(",[r,n,e,
c.normalized,c.stride,c.offset],");",l,".type=",e,";",l,".size=",n,";",C.map(function(b){return l+"."+b+"="+c[b]+";"}).join(""),"}");Z&&(e=c.divisor,g("if(",l,".divisor!==",e,"){",b.instancing,".vertexAttribDivisorANGLE(",[r,e],");",l,".divisor=",e,";}"))}function n(){g("if(",l,".buffer){",k,".disableVertexAttribArray(",r,");",l,".buffer=null;","}if(",u.map(function(b,g){return l+"."+b+"!=="+w[g]}).join("||"),"){",k,".vertexAttrib4f(",r,",",w,");",u.map(function(b,g){return l+"."+b+"="+w[g]+";"}).join(""),
"}")}var k=q.gl,r=g.def(e,".location"),l=g.def(q.attributes,"[",r,"]");e=c.state;var y=c.buffer,w=[c.x,c.y,c.z,c.w],C=["buffer","normalized","offset","stride"];1===e?a():2===e?n():(g("if(",e,"===",1,"){"),a(),g("}else{"),n(),g("}"))}var q=b.shared;c.forEach(function(c){var q=c.name,r=e.attributes[q],u;if(r){if(!a(r))return;u=r.append(b,g)}else{if(!a(S))return;var l=b.scopeAttrib(q);k.optional(function(){b.assert(g,l+".state","missing attribute "+q)});u={};f(new ia).forEach(function(b){u[b]=g.def(l,
".",b)})}p(b.link(c),n(c.info.type),u)})}function td(b,e,f,c,a,n){for(var p=b.shared,q=p.gl,r,u=0;u<c.length;++u){var l=c[u],w=l.name,M=l.info.type,d=f.uniforms[w],l=b.link(l)+".location",m;if(d){if(!a(d))continue;if(D(d)){var z=d.value;k.command(null!==z&&"undefined"!==typeof z,'missing uniform "'+w+'"',b.commandStr);if(35678===M||35680===M)k.command("function"===typeof z&&(35678===M&&("texture2d"===z._reglType||"framebuffer"===z._reglType)||35680===M&&("textureCube"===z._reglType||"framebufferCube"===
z._reglType)),"invalid texture for uniform "+w,b.commandStr),d=b.link(z._texture||z.color[0]._texture),e(q,".uniform1i(",l,",",d+".bind());"),e.exit(d,".unbind();");else if(35674===M||35675===M||35676===M){k.optional(function(){k.command(g(z),"invalid matrix for uniform "+w,b.commandStr);k.command(35674===M&&4===z.length||35675===M&&9===z.length||35676===M&&16===z.length,"invalid length for matrix uniform "+w,b.commandStr)});var d=b.global.def("new Float32Array(["+Array.prototype.slice.call(z)+"])"),
x=2;35675===M?x=3:35676===M&&(x=4);e(q,".uniformMatrix",x,"fv(",l,",false,",d,");")}else{switch(M){case 5126:k.commandType(z,"number","uniform "+w,b.commandStr);r="1f";break;case 35664:k.command(g(z)&&2===z.length,"uniform "+w,b.commandStr);r="2f";break;case 35665:k.command(g(z)&&3===z.length,"uniform "+w,b.commandStr);r="3f";break;case 35666:k.command(g(z)&&4===z.length,"uniform "+w,b.commandStr);r="4f";break;case 35670:k.commandType(z,"boolean","uniform "+w,b.commandStr);r="1i";break;case 5124:k.commandType(z,
"number","uniform "+w,b.commandStr);r="1i";break;case 35671:k.command(g(z)&&2===z.length,"uniform "+w,b.commandStr);r="2i";break;case 35667:k.command(g(z)&&2===z.length,"uniform "+w,b.commandStr);r="2i";break;case 35672:k.command(g(z)&&3===z.length,"uniform "+w,b.commandStr);r="3i";break;case 35668:k.command(g(z)&&3===z.length,"uniform "+w,b.commandStr);r="3i";break;case 35673:k.command(g(z)&&4===z.length,"uniform "+w,b.commandStr);r="4i";break;case 35669:k.command(g(z)&&4===z.length,"uniform "+w,
b.commandStr),r="4i"}e(q,".uniform",r,"(",l,",",g(z)?Array.prototype.slice.call(z):z,");")}continue}else m=d.append(b,e)}else{if(!a(S))continue;m=e.def(p.uniforms,"[",y.id(w),"]")}35678===M?(k(!Array.isArray(m),"must specify a scalar prop for textures"),e("if(",m,"&&",m,'._reglType==="framebuffer"){',m,"=",m,".color[0];","}")):35680===M&&(k(!Array.isArray(m),"must specify a scalar prop for cube maps"),e("if(",m,"&&",m,'._reglType==="framebufferCube"){',m,"=",m,".color[0];","}"));k.optional(function(){function g(f,
c){b.assert(e,f,'bad data or missing for uniform "'+w+'".  '+c)}function f(b){k(!Array.isArray(m),"must not specify an array type for uniform");g("typeof "+m+'==="'+b+'"',"invalid type, expected "+b)}function c(e,f){Array.isArray(m)?k(m.length===e,"must have length "+e):g(p.isArrayLike+"("+m+")&&"+m+".length==="+e,"invalid vector, should have length "+e,b.commandStr)}function a(e){k(!Array.isArray(m),"must not specify a value type");g("typeof "+m+'==="function"&&'+m+'._reglType==="texture'+(3553===
e?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(M){case 5124:f("number");break;case 35667:c(2,"number");break;case 35668:c(3,"number");break;case 35669:c(4,"number");break;case 5126:f("number");break;case 35664:c(2,"number");break;case 35665:c(3,"number");break;case 35666:c(4,"number");break;case 35670:f("boolean");break;case 35671:c(2,"boolean");break;case 35672:c(3,"boolean");break;case 35673:c(4,"boolean");break;case 35674:c(4,"number");break;case 35675:c(9,"number");break;case 35676:c(16,
"number");break;case 35678:a(3553);break;case 35680:a(34067)}});d=1;switch(M){case 35678:case 35680:d=e.def(m,"._texture");e(q,".uniform1i(",l,",",d,".bind());");e.exit(d,".unbind();");continue;case 5124:case 35670:r="1i";break;case 35667:case 35671:r="2i";d=2;break;case 35668:case 35672:r="3i";d=3;break;case 35669:case 35673:r="4i";d=4;break;case 5126:r="1f";break;case 35664:r="2f";d=2;break;case 35665:r="3f";d=3;break;case 35666:r="4f";d=4;break;case 35674:r="Matrix2fv";break;case 35675:r="Matrix3fv";
break;case 35676:r="Matrix4fv"}if("M"===r.charAt(0)){e(q,".uniform",r,"(",l,",");var l=Math.pow(M-35674+2,2),ca=b.global.def("new Float32Array(",l,")");Array.isArray(m)?e("false,(",C(l,function(b){return ca+"["+b+"]="+m[b]}),",",ca,")"):e("false,(Array.isArray(",m,")||",m," instanceof Float32Array)?",m,":(",C(l,function(b){return ca+"["+b+"]="+m+"["+b+"]"}),",",ca,")");e(");")}else{if(1<d){for(var x=[],K=[],F=0;F<d;++F)Array.isArray(m)?K.push(m[F]):K.push(e.def(m+"["+F+"]")),n&&x.push(e.def());n&&
e("if(!",b.batchId,"||",x.map(function(b,g){return b+"!=="+K[g]}).join("||"),"){",x.map(function(b,g){return b+"="+K[g]+";"}).join(""));e(q,".uniform",r,"(",l,",",K.join(","),");")}else k(!Array.isArray(m),"uniform value must not be an array"),n&&(d=e.def(),e("if(!",b.batchId,"||",d,"!==",m,"){",d,"=",m,";")),e(q,".uniform",r,"(",l,",",m,");");n&&e("}")}}}function zc(b,g,e,f){function c(a){var n=u[a];return n?n.contextDep&&f.contextDynamic||n.propDep?n.append(b,e):n.append(b,g):g.def(r,".",a)}function a(){function b(){e(m,
".drawElementsInstancedANGLE(",[y,C,d,w+"<<(("+d+"-5121)>>1)",M],");")}function g(){e(m,".drawArraysInstancedANGLE(",[y,w,C,M],");")}l&&"null"!==l?z?b():(e("if(",l,"){"),b(),e("}else{"),g(),e("}")):g()}function n(){function b(){e(q+".drawElements("+[y,C,d,w+"<<(("+d+"-5121)>>1)"]+");")}function g(){e(q+".drawArrays("+[y,w,C]+");")}l&&"null"!==l?z?b():(e("if(",l,"){"),b(),e("}else{"),g(),e("}")):g()}var p=b.shared,q=p.gl,r=p.draw,u=f.draw,l=function(){var c=u.elements,a=g;if(c){if(c.contextDep&&f.contextDynamic||
c.propDep)a=e;c=c.append(b,a);u.elementsActive&&a("if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=a.def(),a(c,"=",r,".","elements",";","if(",c,"){",q,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",p.vao,".currentVAO){",c,"=",b.shared.elements+".getElements("+p.vao,".currentVAO.elements);",ta?"":"if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),y=c("primitive"),w=c("offset"),C=function(){var c=u.count,a,n=g;if(c){if(c.contextDep&&f.contextDynamic||
c.propDep)n=e;a=c.append(b,n);k.optional(function(){c.MISSING&&b.assert(g,"false","missing vertex count");c.DYNAMIC&&b.assert(n,a+">=0","missing vertex count")})}else a=n.def(r,".","count"),k.optional(function(){b.assert(n,a+">=0","missing vertex count")});return a}();if("number"===typeof C){if(0===C)return}else e("if(",C,"){"),e.exit("}");var M,m;Z&&(M=c("instances"),m=b.instancing);var d=l+".type",z=u.elements&&D(u.elements)&&!u.vaoActive;Z&&("number"!==typeof M||0<=M)?"string"===typeof M?(e("if(",
M,">0){"),a(),e("}else if(",M,"<0){"),n(),e("}")):a():n()}function aa(b,g,e,c,f){var a=pa();f=a.proc("body",f);k.optional(function(){a.commandStr=g.commandStr;a.command=a.link(g.commandStr)});Z&&(a.instancing=f.def(a.shared.extensions,".angle_instanced_arrays"));b(a,f,e,c);return a.compile().body}function O(b,g,e,f){cc(b,g);e.useVAO?e.drawVAO?g(b.shared.vao,".setVAO(",e.drawVAO.append(b,g),");"):g(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(g(b.shared.vao,".setVAO(null);"),jc(b,g,e,f.attributes,
function(){return!0}));td(b,g,e,f.uniforms,function(){return!0},!1);zc(b,g,g,e)}function ka(b,g){var e=b.proc("draw",1);cc(b,e);X(b,e,g.context);nb(b,e,g.framebuffer);ga(b,e,g);ra(b,e,g.state);pc(b,e,g,!1,!0);var c=g.shader.progVar.append(b,e);e(b.shared.gl,".useProgram(",c,".program);");if(g.shader.program)O(b,e,g,g.shader.program);else{e(b.shared.vao,".setVAO(null);");var a=b.global.def("{}"),n=e.def(c,".id"),k=e.def(a,"[",n,"]");e(b.cond(k).then(k,".call(this,a0);")["else"](k,"=",a,"[",n,"]=",
b.link(function(e){return aa(O,b,g,e,1)}),"(",c,");",k,".call(this,a0);"))}0<f(g.state).length&&e(b.shared.current,".dirty=true;");b.shared.vao&&e(b.shared.vao,".setVAO(null);")}function Ga(b,g,e,f){function c(){return!0}b.batchId="a1";cc(b,g);jc(b,g,e,f.attributes,c);td(b,g,e,f.uniforms,c,!1);zc(b,g,g,e)}function Kb(b,g,e,f){function c(b){return b.contextDep&&n||b.propDep}function a(b){return!c(b)}cc(b,g);var n=e.contextDep,k=g.def(),p=g.def();b.shared.props=p;b.batchId=k;var q=b.scope(),r=b.scope();
g(q.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",p,"=","a0","[",k,"];",r,"}",q.exit);e.needsContext&&X(b,r,e.context);e.needsFramebuffer&&nb(b,r,e.framebuffer);ra(b,r,e.state,c);e.profile&&c(e.profile)&&pc(b,r,e,!1,!0);f?(e.useVAO?e.drawVAO?c(e.drawVAO)?r(b.shared.vao,".setVAO(",e.drawVAO.append(b,r),");"):q(b.shared.vao,".setVAO(",e.drawVAO.append(b,q),");"):q(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(q(b.shared.vao,".setVAO(null);"),jc(b,q,e,f.attributes,a),jc(b,r,e,f.attributes,c)),
td(b,q,e,f.uniforms,a,!1),td(b,r,e,f.uniforms,c,!0),zc(b,q,r,e)):(g=b.global.def("{}"),f=e.shader.progVar.append(b,r),p=r.def(f,".id"),q=r.def(g,"[",p,"]"),r(b.shared.gl,".useProgram(",f,".program);","if(!",q,"){",q,"=",g,"[",p,"]=",b.link(function(g){return aa(Ga,b,e,g,2)}),"(",f,");}",q,".call(this,a0[",k,"],",k,");"))}function bd(b,e){function g(b){return b.contextDep&&a||b.propDep}var c=b.proc("batch",2);b.batchId="0";cc(b,c);var a=!1,n=!0;f(e.context).forEach(function(b){a=a||e.context[b].propDep});
a||(X(b,c,e.context),n=!1);var k=e.framebuffer,p=!1;k?(k.propDep?a=p=!0:k.contextDep&&a&&(p=!0),p||nb(b,c,k)):nb(b,c,null);e.state.viewport&&e.state.viewport.propDep&&(a=!0);ga(b,c,e);ra(b,c,e.state,function(b){return!g(b)});e.profile&&g(e.profile)||pc(b,c,e,!1,"a1");e.contextDep=a;e.needsContext=n;e.needsFramebuffer=p;n=e.shader.progVar;if(n.contextDep&&a||n.propDep)Kb(b,c,e,null);else if(n=n.append(b,c),c(b.shared.gl,".useProgram(",n,".program);"),e.shader.program)Kb(b,c,e,e.shader.program);else{c(b.shared.vao,
".setVAO(null);");var k=b.global.def("{}"),p=c.def(n,".id"),q=c.def(k,"[",p,"]");c(b.cond(q).then(q,".call(this,a0,a1);")["else"](q,"=",k,"[",p,"]=",b.link(function(g){return aa(Kb,b,e,g,2)}),"(",n,");",q,".call(this,a0,a1);"))}0<f(e.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function Oc(b,e){function a(g){var c=e.shader[g];c&&n.set(k.shader,"."+g,c.append(b,n))}var n=b.proc("scope",3);b.batchId="a2";var k=b.shared,p=k.current;X(b,n,e.context);
e.framebuffer&&e.framebuffer.append(b,n);c(f(e.state)).forEach(function(c){var f=e.state[c].append(b,n);g(f)?f.forEach(function(e,g){n.set(b.next[c],"["+g+"]",e)}):n.set(k.next,"."+c,f)});pc(b,n,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(g){var c=e.draw[g];c&&n.set(k.draw,"."+g,""+c.append(b,n))});f(e.uniforms).forEach(function(g){var c=e.uniforms[g].append(b,n);Array.isArray(c)&&(c="["+c.join()+"]");n.set(k.uniforms,"["+y.id(g)+"]",c)});f(e.attributes).forEach(function(g){var c=
e.attributes[g].append(b,n),a=b.scopeAttrib(g);f(new ia).forEach(function(b){n.set(a,"."+b,c[b])})});e.scopeVAO&&n.set(k.vao,".targetVAO",e.scopeVAO.append(b,n));a("vert");a("frag");0<f(e.state).length&&(n(p,".dirty=true;"),n.exit(p,".dirty=true;"));n("a1(",b.shared.context,",a0,",b.batchId,");")}function J(b){if("object"===typeof b&&!g(b)){for(var e=f(b),c=0;c<e.length;++c)if(p.isDynamic(b[e[c]]))return!0;return!1}}function G(b,e,g){function c(b,e){k.forEach(function(g){var c=a[g];p.isDynamic(c)&&
(c=b.invoke(e,c),e(y,".",g,"=",c,";"))})}var a=e["static"][g];if(a&&J(a)){var n=b.global,k=f(a),q=!1,r=!1,u=!1,y=b.global.def("{}");k.forEach(function(e){var g=a[e];if(p.isDynamic(g))"function"===typeof g&&(g=a[e]=p.unbox(g)),e=l(g,null),q=q||e.thisDep,u=u||e.propDep,r=r||e.contextDep;else{n(y,".",e,"=");switch(typeof g){case "number":n(g);break;case "string":n('"',g,'"');break;case "object":Array.isArray(g)&&n("[",g.join(),"]");break;default:n(b.link(g))}n(";")}});e.dynamic[g]=new p.DynamicVariable(4,
{thisDep:q,contextDep:r,propDep:u,ref:y,append:c});delete e["static"][g]}}var ia=la.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};d.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var Z=d.angle_instanced_arrays,fa=d.webgl_draw_buffers,ta=d.oes_vertex_array_object,N={dirty:!0,profile:W.profile},H={},da=[],Aa={},Da={};L("dither",3024);L("blend.enable",3042);U("blend.color","blendColor",[0,0,0,0]);U("blend.equation","blendEquationSeparate",[32774,32774]);U("blend.func","blendFuncSeparate",
[1,0,1,0]);L("depth.enable",2929,!0);U("depth.func","depthFunc",513);U("depth.range","depthRange",[0,1]);U("depth.mask","depthMask",!0);U("colorMask","colorMask",[!0,!0,!0,!0]);L("cull.enable",2884);U("cull.face","cullFace",1029);U("frontFace","frontFace",2305);U("lineWidth","lineWidth",1);L("polygonOffset.enable",32823);U("polygonOffset.offset","polygonOffset",[0,0]);L("sample.alpha",32926);L("sample.enable",32928);U("sample.coverage","sampleCoverage",[1,!1]);L("stencil.enable",2960);U("stencil.mask",
"stencilMask",-1);U("stencil.func","stencilFunc",[519,0,-1]);U("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);U("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);L("scissor.enable",3089);U("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);U("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var Ja={gl:e,context:oa,strings:y,next:H,current:N,draw:Bb,elements:K,buffer:t,shader:Qa,attributes:la.state,vao:la,uniforms:ha,framebuffer:T,
extensions:d,timer:Oa,isBufferArgs:a},F={primTypes:n,compareFuncs:x,blendFuncs:w,blendEquations:ua,stencilOps:B,glTypes:r,orientationType:na};k.optional(function(){Ja.isArrayLike=g});fa&&(F.backBuffer=[1029],F.drawBuffer=C(h.maxDrawbuffers,function(b){return 0===b?[0]:C(b,function(b){return 36064+b})}));var nc=0;return{next:H,current:N,procs:function(){var b=pa(),e=b.proc("poll"),c=b.proc("refresh"),a=b.block();e(a);c(a);var n=b.shared,k=n.gl,p=n.next,q=n.current;a(q,".dirty=false;");nb(b,e);nb(b,
c,null,!0);var r;Z&&(r=b.link(Z));d.oes_vertex_array_object&&c(b.link(d.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var u=0;u<h.maxAttributes;++u){var l=c.def(n.attributes,"[",u,"]"),y=b.cond(l,".buffer");y.then(k,".enableVertexAttribArray(",u,");",k,".bindBuffer(",34962,",",l,".buffer.buffer);",k,".vertexAttribPointer(",u,",",l,".size,",l,".type,",l,".normalized,",l,".stride,",l,".offset);")["else"](k,".disableVertexAttribArray(",u,");",k,".vertexAttrib4f(",u,",",l,".x,",l,".y,",l,
".z,",l,".w);",l,".buffer=null;");c(y);Z&&c(r,".vertexAttribDivisorANGLE(",u,",",l,".divisor);")}c(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");f(Aa).forEach(function(g){var f=Aa[g],n=a.def(p,".",g),r=b.block();r("if(",n,"){",k,".enable(",f,")}else{",k,".disable(",f,")}",q,".",g,"=",n,";");c(r);e("if(",n,"!==",q,".",g,"){",r,"}")});f(Da).forEach(function(f){var n=Da[f],r=N[f],u,l,y=b.block();y(k,".",n,"(");g(r)?(n=r.length,u=b.global.def(p,".",f),l=b.global.def(q,
".",f),y(C(n,function(b){return u+"["+b+"]"}),");",C(n,function(b){return l+"["+b+"]="+u+"["+b+"];"}).join("")),e("if(",C(n,function(b){return u+"["+b+"]!=="+l+"["+b+"]"}).join("||"),"){",y,"}")):(u=a.def(p,".",f),l=a.def(q,".",f),y(u,");",q,".",f,"=",u,";"),e("if(",u,"!==",l,"){",y,"}"));c(y)});return b.compile()}(),compile:function(e,g,c,a,n){var k=pa();k.stats=k.link(n);f(g["static"]).forEach(function(b){G(k,g,b)});M.forEach(function(b){G(k,e,b)});var p=Ka(e,g,c,a,k);ka(k,p);Oc(k,p);bd(k,p);return b(k.compile(),
{destroy:function(){p.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(d,h,t){function a(c,a){this.id=l++;this.type=c;this.data=a}function c(f){if(0===f.length)return[];var a=f.charAt(0),b=f.charAt(f.length-1);if(1<f.length&&a===b&&('"'===a||"'"===
a))return['"'+f.substr(1,f.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(f))return c(f.substr(0,a.index)).concat(c(a[1])).concat(c(f.substr(a.index+a[0].length)));a=f.split(".");if(1===a.length)return['"'+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];f=[];for(b=0;b<a.length;++b)f=f.concat(c(a[b]));return f}function z(f){return"["+c(f).join("][")+"]"}function D(c,k){if("function"===typeof c)return new a(0,c);if("number"===typeof c||
"boolean"===typeof c)return new a(5,c);if(Array.isArray(c))return new a(6,c.map(function(b,c){return D(b,k+"["+c+"]")}));if(c instanceof a)return c;m(!1,"invalid option type in uniform "+k)}var m=d("./util/check"),l=0;h.exports={DynamicVariable:a,define:function(c,k){return new a(c,z(k+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof a},unbox:D,accessor:z}},{"./util/check":21}],10:[function(d,h,t){var a=d("./util/check"),c=d("./util/is-typed-array"),z=d("./util/is-ndarray"),
D=d("./util/values"),m=d("./constants/primitives.json"),l=d("./constants/usage.json");h.exports=function(f,k,b,q){function C(b){this.id=p++;g[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function y(e,g,n,p,q,r,l){e.buffer.bind();var y;g?((y=l)||c(g)&&(!z(g)||c(g.data))||(y=k.oes_element_index_uint?5125:5123),b._initBuffer(e.buffer,g,n,y,3)):(f.bufferData(34963,r,n),e.buffer.dtype=y||5121,e.buffer.usage=n,e.buffer.dimension=3,e.buffer.byteLength=r);y=l;if(!l){switch(e.buffer.dtype){case 5121:case 5120:y=
5121;break;case 5123:case 5122:y=5123;break;case 5125:case 5124:y=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=y}e.type=y;a(5125!==y||!!k.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=q;0>g&&(g=e.buffer.byteLength,5123===y?g>>=1:5125===y&&(g>>=2));e.vertCount=g;g=p;0>p&&(g=4,p=e.buffer.dimension,1===p&&(g=0),2===p&&(g=1),3===p&&(g=4));e.primType=g}function e(b){q.elementsCount--;a(null!==b.buffer,"must not double destroy elements");
delete g[b.id];b.buffer.destroy();b.buffer=null}var g={},p=0,n={uint8:5121,uint16:5123};k.oes_element_index_uint&&(n.uint32=5125);C.prototype.bind=function(){this.buffer.bind()};var r=[];return{create:function(g,f){function k(b){if(b)if("number"===typeof b)p(b),r.primType=4,r.vertCount=b|0,r.type=5121;else{var e=null,g=35044,f=-1,q=-1,u=0,C=0;if(Array.isArray(b)||c(b)||z(b))e=b;else if(a.type(b,"object","invalid arguments for elements"),"data"in b&&(e=b.data,a(Array.isArray(e)||c(e)||z(e),"invalid data for element buffer")),
"usage"in b&&(a.parameter(b.usage,l,"invalid element buffer usage"),g=l[b.usage]),"primitive"in b&&(a.parameter(b.primitive,m,"invalid element buffer primitive"),f=m[b.primitive]),"count"in b&&(a("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),q=b.count|0),"type"in b&&(a.parameter(b.type,n,"invalid buffer type"),C=n[b.type]),"length"in b)u=b.length|0;else if(u=q,5123===C||5122===C)u*=2;else if(5125===C||5124===C)u*=4;y(r,e,g,f,q,u,C)}else p(),r.primType=4,r.vertCount=0,
r.type=5121;return k}var p=b.create(null,34963,!0),r=new C(p._buffer);q.elementsCount++;k(g);k._reglType="elements";k._elements=r;k.subdata=function(b,e){p.subdata(b,e);return k};k.destroy=function(){e(r)};return k},createStream:function(e){var g=r.pop();g||(g=new C(b.create(null,34963,!0,!1)._buffer));y(g,e,35040,-1,-1,0,0);return g},destroyStream:function(b){r.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof C?b._elements:null},clear:function(){D(g).forEach(e)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(d,h,t){var a=d("./util/sorted-object-keys"),c=d("./util/check");h.exports=function(d,D){function m(b){c.type(b,"string","extension name must be string");b=b.toLowerCase();var f;try{f=l[b]=d.getExtension(b)}catch(a){}return!!f}for(var l={},f=0;f<D.extensions.length;++f){var k=D.extensions[f];if(!m(k))return D.onDestroy(),D.onDone('"'+k+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}D.optionalExtensions.forEach(m);return{extensions:l,restore:function(){a(l).forEach(function(b){if(l[b]&&!m(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(d,h,t){var a=d("./util/check"),c=d("./util/values"),z=d("./util/extend"),D=[6407,6408],m=[];m[6408]=4;m[6407]=3;var l=[];l[5121]=1;l[5126]=4;l[36193]=2;var f=[32854,32855,36194,35907,34842,34843,34836],k={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};h.exports=function(b,q,C,y,e,g){function p(b,e,g){this.target=b;this.texture=e;this.renderbuffer=g;var c=b=0;e?(b=e.width,c=e.height):g&&(b=g.width,c=g.height);this.width=b;this.height=c}function n(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function r(b,e,g){if(b){if(b.texture){b=b.texture._texture;var c=Math.max(1,b.height);a(Math.max(1,b.width)===e&&c===g,"inconsistent width/height for supplied texture")}else b=
b.renderbuffer._renderbuffer,a(b.width===e&&b.height===g,"inconsistent width/height for renderbuffer");b.refCount+=1}}function u(e,g){g&&(g.texture?b.framebufferTexture2D(36160,e,g.target,g.texture._texture.texture,0):b.framebufferRenderbuffer(36160,e,36161,g.renderbuffer._renderbuffer.renderbuffer))}function d(b){var e=3553,g=null,c=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(e=b.target|0));a.type(f,"function","invalid attachment data");b=f._reglType;"texture2d"===b?(g=f,a(3553===e)):
"textureCube"===b?(g=f,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===b?(c=f,e=36161):a.raise("invalid regl object for attachment");return new p(e,g,c)}function w(b,g,c,f,a){if(c)return b=y.create2D({width:b,height:g,format:f,type:a}),b._texture.refCount=0,new p(3553,b,null);b=e.create({width:b,height:g,format:f});b._renderbuffer.refCount=0;return new p(36161,null,b)}function sa(b){return b&&(b.texture||b.renderbuffer)}function x(b,e,g){b&&(b.texture?b.texture.resize(e,g):b.renderbuffer&&
b.renderbuffer.resize(e,g),b.width=e,b.height=g)}function B(){this.id=K++;ja[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function ca(b){b.colorAttachments.forEach(n);n(b.depthAttachment);n(b.stencilAttachment);n(b.depthStencilAttachment)}function h(e){var c=e.framebuffer;a(c,"must not double destroy framebuffer");b.deleteFramebuffer(c);e.framebuffer=null;g.framebufferCount--;
delete ja[e.id]}function S(e){var g;b.bindFramebuffer(36160,e.framebuffer);var c=e.colorAttachments;for(g=0;g<c.length;++g)u(36064+g,c[g]);for(g=c.length;g<C.maxColorAttachments;++g)b.framebufferTexture2D(36160,36064+g,3553,null,0);b.framebufferTexture2D(36160,33306,3553,null,0);b.framebufferTexture2D(36160,36096,3553,null,0);b.framebufferTexture2D(36160,36128,3553,null,0);u(36096,e.depthAttachment);u(36128,e.stencilAttachment);u(33306,e.depthStencilAttachment);e=b.checkFramebufferStatus(36160);b.isContextLost()||
36053===e||a.raise("framebuffer configuration not supported, status = "+k[e]);b.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;b.getError()}function ba(b,e){function c(b,e){var g;a(A.next!==n,"can not update framebuffer which is currently in use");var k=0,p=0,u=!0,y=!0;g=null;var z=!0,x="rgba",K="uint8",B=1,h=null,na=null,ja=null,ba=!1;if("number"===typeof b)k=b|0,p=e|0||k;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(p=b.shape,a(Array.isArray(p)&&
2<=p.length,"invalid shape for framebuffer"),k=p[0],p=p[1]):("radius"in b&&(k=p=b.radius),"width"in b&&(k=b.width),"height"in b&&(p=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||q.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(B=b.colorCount|0,a(0<B,"invalid color buffer count"));"colorTexture"in b&&(z=!!b.colorTexture,x="rgba4");if("colorType"in b){K=b.colorType;if(z)a(q.oes_texture_float||!("float"===K||"float32"===
K),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(q.oes_texture_half_float||!("half float"===K||"float16"===K),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===K||"float16"===K)a(q.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f";else if("float"===K||"float32"===K)a(q.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
x="rgba32f";a.oneOf(K,V,"invalid color type")}"colorFormat"in b&&(x=b.colorFormat,0<=t.indexOf(x)?z=!0:0<=I.indexOf(x)?z=!1:a.optional(function(){if(z)a.oneOf(b.colorFormat,t,"invalid color format for texture");else a.oneOf(b.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)ba=!(!b.depthTexture&&!b.depthStencilTexture),a(!ba||q.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?u=b.depth:
(h=b.depth,y=!1));"stencil"in b&&("boolean"===typeof b.stencil?y=b.stencil:(na=b.stencil,u=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?u=y=b.depthStencil:(ja=b.depthStencil,y=u=!1))}else k=p=1;var T=null,ha=null,yb=null,Ka=null;if(Array.isArray(g))T=g.map(d);else if(g)T=[d(g)];else for(T=Array(B),g=0;g<B;++g)T[g]=w(k,p,z,x,K);a(q.webgl_draw_buffers||1>=T.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(T.length<=C.maxColorAttachments,
"too many color attachments, not supported");k=k||T[0].width;p=p||T[0].height;h?ha=d(h):u&&!y&&(ha=w(k,p,ba,"depth","uint32"));na?yb=d(na):y&&!u&&(yb=w(k,p,!1,"stencil","uint8"));ja?Ka=d(ja):!h&&!na&&y&&u&&(Ka=w(k,p,ba,"depth stencil","depth stencil"));a(1>=!!h+!!na+!!ja,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");u=null;for(g=0;g<T.length;++g)r(T[g],k,p),a(!T[g]||T[g].texture&&0<=D.indexOf(T[g].texture._texture.format)||T[g].renderbuffer&&0<=f.indexOf(T[g].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+g+" is invalid"),T[g]&&T[g].texture&&(y=m[T[g].texture._texture.format]*l[T[g].texture._texture.type],null===u?u=y:a(u===y,"all color attachments much have the same number of bits per pixel."));r(ha,k,p);a(!ha||ha.texture&&6402===ha.texture._texture.format||ha.renderbuffer&&33189===ha.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");r(yb,k,p);a(!yb||yb.renderbuffer&&36168===yb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
r(Ka,k,p);a(!Ka||Ka.texture&&34041===Ka.texture._texture.format||Ka.renderbuffer&&34041===Ka.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");ca(n);n.width=k;n.height=p;n.colorAttachments=T;n.depthAttachment=ha;n.stencilAttachment=yb;n.depthStencilAttachment=Ka;c.color=T.map(sa);c.depth=sa(ha);c.stencil=sa(yb);c.depthStencil=sa(Ka);c.width=n.width;c.height=n.height;S(n);return c}var n=new B;g.framebufferCount++;c(b,e);return z(c,{resize:function(b,g){a(A.next!==
n,"can not resize a framebuffer which is currently in use");var e=Math.max(b|0,1),f=Math.max(g|0||e,1);if(e===n.width&&f===n.height)return c;for(var k=n.colorAttachments,p=0;p<k.length;++p)x(k[p],e,f);x(n.depthAttachment,e,f);x(n.stencilAttachment,e,f);x(n.depthStencilAttachment,e,f);n.width=c.width=e;n.height=c.height=f;S(n);return c},_reglType:"framebuffer",_framebuffer:n,destroy:function(){h(n);ca(n)},use:function(b){A.setFBO({framebuffer:c},b)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},
t=["rgba"],I=["rgba4","rgb565","rgb5 a1"];q.ext_srgb&&I.push("srgba");q.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");q.webgl_color_buffer_float&&I.push("rgba32f");var V=["uint8"];q.oes_texture_half_float&&V.push("half float","float16");q.oes_texture_float&&V.push("float","float32");var K=0,ja={};return z(A,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof B)?b:null},create:ba,createCube:function(b){function e(b){var c;a(0>
g.indexOf(A.next),"can not update framebuffer which is currently in use");var f={color:null},n=0,k=null;c="rgba";var p="uint8",r=1;if("number"===typeof b)n=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(n=b.shape,a(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),a(n[0]===n[1],"cube framebuffer must be square"),n=n[0]):("radius"in b&&(n=b.radius|0),"width"in b?(n=b.width|0,"height"in b&&a(b.height===n,"must be square")):"height"in b&&(n=b.height|0));
if("color"in b||"colors"in b)k=b.color||b.colors,Array.isArray(k)&&a(1===k.length||q.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in b&&(r=b.colorCount|0,a(0<r,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,V,"invalid color type"),p=b.colorType),"colorFormat"in b&&(c=b.colorFormat,a.oneOf(b.colorFormat,t,"invalid color format for texture")));"depth"in b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=
b.depthStencil)}else n=1;if(k)if(Array.isArray(k))for(b=[],c=0;c<k.length;++c)b[c]=k[c];else b=[k];else for(b=Array(r),k={radius:n,format:c,type:p},c=0;c<r;++c)b[c]=y.createCube(k);f.color=Array(b.length);for(c=0;c<b.length;++c)r=b[c],a("function"===typeof r&&"textureCube"===r._reglType,"invalid cube map"),n=n||r.width,a(r.width===n&&r.height===n,"invalid cube map shape"),f.color[c]={target:34069,data:b[c]};for(c=0;6>c;++c){for(r=0;r<b.length;++r)f.color[r].target=34069+c;0<c&&(f.depth=g[0].depth,
f.stencil=g[0].stencil,f.depthStencil=g[0].depthStencil);if(g[c])g[c](f);else g[c]=ba(f)}return z(e,{width:n,height:n,color:b})}var g=Array(6);e(b);return z(e,{faces:g,resize:function(b){var c=b|0;a(0<c&&c<=C.maxCubeMapSize,"invalid radius for cube fbo");if(c===e.width)return e;var f=e.color;for(b=0;b<f.length;++b)f[b].resize(c);for(b=0;6>b;++b)g[b].resize(c);e.width=e.height=c;return e},_reglType:"framebufferCube",destroy:function(){g.forEach(function(b){b.destroy()})}})},clear:function(){c(ja).forEach(h)},
restore:function(){A.cur=null;A.next=null;A.dirty=!0;c(ja).forEach(function(e){e.framebuffer=b.createFramebuffer();S(e)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(d,h,t){var a=d("./util/sorted-object-keys"),c=d("./util/pool");h.exports=function(d,D){var m=1;D.ext_texture_filter_anisotropic&&(m=d.getParameter(34047));var l=1,f=1;D.webgl_draw_buffers&&(l=d.getParameter(34852),f=d.getParameter(36063));var k=!!D.oes_texture_float;if(k){k=d.createTexture();d.bindTexture(3553,
k);d.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var b=d.createFramebuffer();d.bindFramebuffer(36160,b);d.framebufferTexture2D(36160,36064,3553,k,0);d.bindTexture(3553,null);if(36053!==d.checkFramebufferStatus(36160))k=!1;else{d.viewport(0,0,1,1);d.clearColor(1,0,0,1);d.clear(16384);var q=c.allocType(5126,4);d.readPixels(0,0,1,1,6408,5126,q);d.getError()?k=!1:(d.deleteFramebuffer(b),d.deleteTexture(k),k=1===q[0]);c.freeType(q)}}q=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(q=d.createTexture(),b=c.allocType(5121,36),d.activeTexture(33984),d.bindTexture(34067,q),d.texImage2D(34069,0,6408,3,3,0,6408,5121,b),c.freeType(b),d.bindTexture(34067,null),d.deleteTexture(q),q=!d.getError());return{colorBits:[d.getParameter(3410),d.getParameter(3411),d.getParameter(3412),d.getParameter(3413)],depthBits:d.getParameter(3414),stencilBits:d.getParameter(3415),subpixelBits:d.getParameter(3408),extensions:a(D).filter(function(b){return!!D[b]}),
maxAnisotropic:m,maxDrawbuffers:l,maxColorAttachments:f,pointSizeDims:d.getParameter(33901),lineWidthDims:d.getParameter(33902),maxViewportDims:d.getParameter(3386),maxCombinedTextureUnits:d.getParameter(35661),maxCubeMapSize:d.getParameter(34076),maxRenderbufferSize:d.getParameter(34024),maxTextureUnits:d.getParameter(34930),maxTextureSize:d.getParameter(3379),maxAttributes:d.getParameter(34921),maxVertexUniforms:d.getParameter(36347),maxVertexTextureUnits:d.getParameter(35660),maxVaryingVectors:d.getParameter(36348),
maxFragmentUniforms:d.getParameter(36349),glsl:d.getParameter(35724),renderer:d.getParameter(7937),vendor:d.getParameter(7936),version:d.getParameter(7938),readFloat:k,npotTextureCube:q}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(d,h,t){var a=d("./util/check"),c=d("./util/is-typed-array");h.exports=function(d,D,m,l,f,k,b){function q(q){var e;null===D.next?(a(f.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(a(null!==D.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=D.next.colorAttachments[0].texture._texture.type,a.optional(function(){k.oes_texture_float?(a(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&a(b.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var g=0,p=0,n=l.framebufferWidth,r=l.framebufferHeight,u=null;c(q)?u=q:q&&(a.type(q,"object","invalid arguments to regl.read()"),g=q.x|0,p=q.y|0,a(0<=g&&g<l.framebufferWidth,"invalid x offset for regl.read"),a(0<=p&&p<l.framebufferHeight,"invalid y offset for regl.read"),n=(q.width||l.framebufferWidth-g)|0,r=(q.height||l.framebufferHeight-p)|0,u=q.data||null);u&&(5121===e?a(u instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&a(u instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<n&&n+g<=l.framebufferWidth,"invalid width for read pixels");a(0<r&&r+p<=l.framebufferHeight,"invalid height for read pixels");m();q=n*r*4;u||(5121===e?u=new Uint8Array(q):5126===e&&(u=u||new Float32Array(q)));a.isTypedArray(u,"data buffer for regl.read() must be a typedarray");a(u.byteLength>=q,"data buffer for regl.read() too small");d.pixelStorei(3333,4);d.readPixels(g,p,n,r,6408,e,u);return u}function C(b){var e;
D.setFBO({framebuffer:b.framebuffer},function(){e=q(b)});return e}return function(b){return b&&"framebuffer"in b?C(b):q(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(d,h,t){var a=d("./util/sorted-object-keys"),c=d("./util/check"),z=d("./util/values"),D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[33189]=2;D[36168]=1;D[34041]=4;D[35907]=4;D[34836]=16;D[34842]=8;D[34843]=6;h.exports=function(d,l,f,k,b){function q(e){this.id=g++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;b.profile&&(this.stats={size:0})}function C(b){var e=b.renderbuffer;c(e,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(e);b.renderbuffer=null;b.refCount=0;delete p[b.id];k.renderbufferCount--}var y={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};l.ext_srgb&&(y.srgba=35907);l.ext_color_buffer_half_float&&(y.rgba16f=34842,y.rgb16f=34843);l.webgl_color_buffer_float&&(y.rgba32f=34836);var e=[];a(y).forEach(function(b){e[y[b]]=
b});var g=0,p={};q.prototype.decRef=function(){0>=--this.refCount&&C(this)};b.profile&&(k.getTotalRenderbufferSize=function(){var b=0;a(p).forEach(function(e){b+=p[e].stats.size});return b});return{create:function(g,a){function u(g,n){var a=0,k=0,p=32854;"object"===typeof g&&g?("shape"in g?(k=g.shape,c(Array.isArray(k)&&2<=k.length,"invalid renderbuffer shape"),a=k[0]|0,k=k[1]|0):("radius"in g&&(a=k=g.radius|0),"width"in g&&(a=g.width|0),"height"in g&&(k=g.height|0)),"format"in g&&(c.parameter(g.format,
y,"invalid renderbuffer format"),p=y[g.format])):"number"===typeof g?(a=g|0,k="number"===typeof n?n|0:a):g?c.raise("invalid arguments to renderbuffer constructor"):a=k=1;c(0<a&&0<k&&a<=f.maxRenderbufferSize&&k<=f.maxRenderbufferSize,"invalid renderbuffer size");if(a!==l.width||k!==l.height||p!==l.format)return u.width=l.width=a,u.height=l.height=k,l.format=p,d.bindRenderbuffer(36161,l.renderbuffer),d.renderbufferStorage(36161,p,a,k),c(0===d.getError(),"invalid render buffer format"),b.profile&&(l.stats.size=
D[l.format]*l.width*l.height),u.format=e[l.format],u}var l=new q(d.createRenderbuffer());p[l.id]=l;k.renderbufferCount++;u(g,a);u.resize=function(g,e){var a=g|0,n=e|0||a;if(a===l.width&&n===l.height)return u;c(0<a&&0<n&&a<=f.maxRenderbufferSize&&n<=f.maxRenderbufferSize,"invalid renderbuffer size");u.width=l.width=a;u.height=l.height=n;d.bindRenderbuffer(36161,l.renderbuffer);d.renderbufferStorage(36161,l.format,a,n);c(0===d.getError(),"invalid render buffer format");b.profile&&(l.stats.size=D[l.format]*
l.width*l.height);return u};u._reglType="renderbuffer";u._renderbuffer=l;b.profile&&(u.stats=l.stats);u.destroy=function(){l.decRef()};return u},clear:function(){z(p).forEach(C)},restore:function(){z(p).forEach(function(b){b.renderbuffer=d.createRenderbuffer();d.bindRenderbuffer(36161,b.renderbuffer);d.renderbufferStorage(36161,b.format,b.width,b.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(d,h,t){var a=d("./util/sorted-object-keys"),
c=d("./util/check"),z=d("./util/extend"),D=d("./util/values");h.exports=function(d,l,f,k){function b(b,g,e,c){this.name=b;this.id=g;this.location=e;this.info=c}function q(b,g){for(var e=0;e<b.length;++e)if(b[e].id===g.id){b[e].location=g.location;return}b.push(g)}function C(b,e,f){var a=35632===b?g:p,n=a[e];if(!n){var k=l.str(e),n=d.createShader(b);d.shaderSource(n,k);d.compileShader(n);c.shaderError(d,n,k,b,f);a[e]=n}return n}function y(b,g){this.id=u++;this.fragId=b;this.vertId=g;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;k.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(g,e,f){var a;a=C(35632,g.fragId);var n=C(35633,g.vertId),p=g.program=d.createProgram();d.attachShader(p,a);d.attachShader(p,n);if(f)for(a=0;a<f.length;++a)n=f[a],d.bindAttribLocation(p,n[0],n[1]);d.linkProgram(p);c.linkError(d,p,l.str(g.fragId),l.str(g.vertId),e);f=d.getProgramParameter(p,35718);k.profile&&(g.stats.uniformsCount=f);n=g.uniforms;for(a=0;a<f;++a)if(e=d.getActiveUniform(p,
a))if(1<e.size)for(var r=0;r<e.size;++r){var u=e.name.replace("[0]","["+r+"]");q(n,new b(u,l.id(u),d.getUniformLocation(p,u),e))}else q(n,new b(e.name,l.id(e.name),d.getUniformLocation(p,e.name),e));f=d.getProgramParameter(p,35721);k.profile&&(g.stats.attributesCount=f);g=g.attributes;for(a=0;a<f;++a)(e=d.getActiveAttrib(p,a))&&q(g,new b(e.name,l.id(e.name),d.getAttribLocation(p,e.name),e))}var g={},p={},n={},r=[],u=0;k.profile&&(f.getMaxUniformsCount=function(){var b=0;r.forEach(function(e){e.stats.uniformsCount>
b&&(b=e.stats.uniformsCount)});return b},f.getMaxAttributesCount=function(){var b=0;r.forEach(function(e){e.stats.attributesCount>b&&(b=e.stats.attributesCount)});return b});return{clear:function(){var b=d.deleteShader.bind(d);D(g).forEach(b);g={};D(p).forEach(b);p={};r.forEach(function(b){d.deleteProgram(b.program)});r.length=0;n={};f.shaderCount=0},program:function(b,k,q,u){c.command(0<=b,"missing vertex shader",q);c.command(0<=k,"missing fragment shader",q);var l=n[k];l||(l=n[k]={});var C=l[b];
if(C&&(C.refCount++,!u))return C;var D=new y(k,b);f.shaderCount++;e(D,q,u);C||(l[b]=D);r.push(D);return z(D,{destroy:function(){D.refCount--;if(0>=D.refCount){d.deleteProgram(D.program);var b=r.indexOf(D);r.splice(b,1);f.shaderCount--}0>=l[D.vertId].refCount&&(d.deleteShader(p[D.vertId]),delete p[D.vertId],delete n[D.fragId][D.vertId]);a(n[D.fragId]).length||(d.deleteShader(g[D.fragId]),delete g[D.fragId],delete n[D.fragId])}})},restore:function(){g={};p={};for(var b=0;b<r.length;++b)e(r[b],null,
r[b].attributes.map(function(b){return[b.location,b.name]}))},shader:C,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(d,h,t){h.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(d,h,t){h.exports=function(){var a={"":0},c=[""];return{id:function(d){var D=a[d];if(D)return D;D=a[d]=c.length;c.push(d);
return D},str:function(a){return c[a]}}}},{}],19:[function(d,h,t){function a(b){return"[object "+b+"]"}function c(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function z(b){return Array.isArray(b)&&0!==b.length&&n(b[0])?!0:!1}function D(b){return Object.prototype.toString.call(b)}function m(b){if(!b)return!1;var g=D(b);return 0<=Y.indexOf(g)?!0:c(b)||z(b)||e(b)}function l(b,e){36193===b.type?(b.data=p(e),g.freeType(e)):b.data=e}function f(b,e,g,c,f,a){b="undefined"!==typeof V[b]?
V[b]:x[b]*I[e];a&&(b*=6);if(f){for(c=0;1<=g;)c+=b*g*g,g/=2;return c}return b*g*c}var k=d("./util/sorted-object-keys"),b=d("./util/check"),q=d("./util/extend"),C=d("./util/values"),y=d("./util/is-typed-array"),e=d("./util/is-ndarray"),g=d("./util/pool"),p=d("./util/to-half-float"),n=d("./util/is-array-like"),r=d("./util/flatten"),u=d("./util/is-pow2");t=d("./constants/arraytypes.json");var M=d("./constants/arraytypes.json"),w=[9984,9986,9985,9987],sa=[0,6409,6410,6407,6408],x={};x[6409]=x[6406]=x[6402]=
1;x[34041]=x[6410]=2;x[6407]=x[35904]=3;x[6408]=x[35906]=4;var B=a("HTMLCanvasElement"),ca=a("OffscreenCanvas"),na=a("CanvasRenderingContext2D"),S=a("ImageBitmap"),ba=a("HTMLImageElement"),A=a("HTMLVideoElement"),Y=k(t).concat([B,ca,na,S,ba,A]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var V=[];V[32854]=2;V[32855]=2;V[36194]=2;V[34041]=4;V[33776]=.5;V[33777]=.5;V[33778]=1;V[33779]=1;V[35986]=.5;V[35987]=1;V[34798]=1;V[35840]=.5;V[35841]=.25;V[35842]=.5;V[35843]=.25;V[36196]=.5;h.exports=
function(a,d,h,I,t,V,Y){function oa(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Oa(b,e){b.internalformat=e.internalformat;b.format=e.format;b.type=e.type;b.compressed=e.compressed;b.premultiplyAlpha=e.premultiplyAlpha;b.flipY=e.flipY;b.unpackAlignment=e.unpackAlignment;b.colorSpace=e.colorSpace;b.width=e.width;b.height=e.height;b.channels=e.channels}
function W(e,g){if("object"===typeof g&&g){"premultiplyAlpha"in g&&(b.type(g.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=g.premultiplyAlpha);"flipY"in g&&(b.type(g.flipY,"boolean","invalid texture flip"),e.flipY=g.flipY);"alignment"in g&&(b.oneOf(g.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=g.alignment);"colorSpace"in g&&(b.parameter(g.colorSpace,zc,"invalid colorSpace"),e.colorSpace=zc[g.colorSpace]);if("type"in g){var c=g.type;b(d.oes_texture_float||
!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");b(d.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");b(d.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");b.parameter(c,aa,"invalid texture type");e.type=
aa[c]}var f=e.width,a=e.height,n=e.channels,c=!1;"shape"in g?(b(Array.isArray(g.shape)&&2<=g.shape.length,"shape must be an array"),f=g.shape[0],a=g.shape[1],3===g.shape.length&&(n=g.shape[2],b(0<n&&4>=n,"invalid number of channels"),c=!0),b(0<=f&&f<=h.maxTextureSize,"invalid width"),b(0<=a&&a<=h.maxTextureSize,"invalid height")):("radius"in g&&(f=a=g.radius,b(0<=f&&f<=h.maxTextureSize,"invalid radius")),"width"in g&&(f=g.width,b(0<=f&&f<=h.maxTextureSize,"invalid width")),"height"in g&&(a=g.height,
b(0<=a&&a<=h.maxTextureSize,"invalid height")),"channels"in g&&(n=g.channels,b(0<n&&4>=n,"invalid number of channels"),c=!0));e.width=f|0;e.height=a|0;e.channels=n|0;f=!1;"format"in g&&(f=g.format,b(d.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),b.parameter(f,O,"invalid texture format"),a=e.internalformat=O[f],e.format=ua[a],f in aa&&!("type"in g)&&(e.type=aa[f]),f in ka&&(e.compressed=!0),f=!0);
!c&&f?e.channels=x[e.format]:c&&!f?e.channels!==sa[e.format]&&(e.format=e.internalformat=sa[e.channels]):f&&c&&b(e.channels===x[e.format],"number of channels inconsistent with specified format")}}function P(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function L(){oa.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function U(f,a){var k=null;
m(a)?k=a:a&&(b.type(a,"object","invalid pixel data type"),W(f,a),"x"in a&&(f.xOffset=a.x|0),"y"in a&&(f.yOffset=a.y|0),m(a.data)&&(k=a.data));b(!f.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){b(!k,"can not specify copy and data field for the same texture");var q=t.viewportWidth,u=t.viewportHeight;f.width=f.width||q-f.xOffset;f.height=f.height||u-f.yOffset;f.needsCopy=!0;b(0<=f.xOffset&&f.xOffset<q&&0<=f.yOffset&&f.yOffset<u&&0<f.width&&f.width<=
q&&0<f.height&&f.height<=u,"copy texture read out of bounds")}else if(!k)f.width=f.width||1,f.height=f.height||1,f.channels=f.channels||4;else if(y(k))f.channels=f.channels||4,f.data=k,"type"in a||5121!==f.type||(f.type=M[Object.prototype.toString.call(k)]|0);else if(c(k)){f.channels=f.channels||4;q=k;u=q.length;switch(f.type){case 5121:case 5123:case 5125:case 5126:u=g.allocType(f.type,u);u.set(q);f.data=u;break;case 36193:f.data=p(q);break;default:b.raise("unsupported texture type, must specify a typed array")}f.alignment=
1;f.needsFree=!0}else if(e(k)){q=k.data;Array.isArray(q)||5121!==f.type||(f.type=M[Object.prototype.toString.call(q)]|0);var u=k.shape,d=k.stride,C,w,x,K;3===u.length?(x=u[2],K=d[2]):(b(2===u.length,"invalid ndarray pixel data, must be 2 or 3D"),K=x=1);C=u[0];w=u[1];u=d[0];d=d[1];f.alignment=1;f.width=C;f.height=w;f.channels=x;f.format=f.internalformat=sa[x];f.needsFree=!0;C=K;k=k.offset;x=f.width;K=f.height;w=f.channels;for(var ja=g.allocType(36193===f.type?5126:f.type,x*K*w),H=0,E=0;E<K;++E)for(var G=
0;G<x;++G)for(var O=0;O<w;++O)ja[H++]=q[u*G+d*E+C*O+k];l(f,ja)}else if(D(k)===B||D(k)===ca||D(k)===na)D(k)===B||D(k)===ca?f.element=k:f.element=k.canvas,f.width=f.element.width,f.height=f.element.height,f.channels=4;else if(D(k)===S)f.element=k,f.width=k.width,f.height=k.height,f.channels=4;else if(D(k)===ba)f.element=k,f.width=k.naturalWidth,f.height=k.naturalHeight,f.channels=4;else if(D(k)===A)f.element=k,f.width=k.videoWidth,f.height=k.videoHeight,f.channels=4;else if(z(k)){q=f.width||k[0].length;
u=f.height||k.length;d=f.channels;d=n(k[0][0])?d||k[0][0].length:d||1;C=r.shape(k);x=1;for(K=0;K<C.length;++K)x*=C[K];x=g.allocType(36193===f.type?5126:f.type,x);r.flatten(k,C,"",x);l(f,x);f.alignment=1;f.width=q;f.height=u;f.channels=d;f.format=f.internalformat=sa[d];f.needsFree=!0}5126===f.type?b(0<=h.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===f.type&&b(0<=h.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function pa(b,e,g,c,f){var k=b.element,n=b.data,p=b.internalformat,q=b.format,r=b.type,u=b.width,l=b.height;P(b);k?a.texSubImage2D(e,f,g,c,q,r,k):b.compressed?a.compressedTexSubImage2D(e,f,g,c,p,u,l,n):b.needsCopy?(I(),a.copyTexSubImage2D(e,f,g,c,b.xOffset,b.yOffset,u,l)):a.texSubImage2D(e,f,g,c,u,l,q,r,n)}function Q(){return Z.pop()||new L}function Pb(b){b.needsFree&&g.freeType(b.data);L.call(b);Z.push(b)}function ab(){oa.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function R(b,e,g){var c=b.images[0]=Q();b.mipmask=1;c.width=b.width=e;c.height=b.height=g;c.channels=b.channels=4}function E(e,g){var c=null;if(m(g))c=e.images[0]=Q(),Oa(c,e),U(c,g),e.mipmask=1;else if(W(e,g),Array.isArray(g.mipmap))for(var f=g.mipmap,a=0;a<f.length;++a)c=e.images[a]=Q(),Oa(c,e),c.width>>=a,c.height>>=a,U(c,f[a]),e.mipmask|=1<<a;else c=e.images[0]=Q(),Oa(c,e),U(c,g),e.mipmask=1;Oa(e,e.images[0]);!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==
e.internalformat&&33779!==e.internalformat||b(0===e.width%4&&0===e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ma(b,e){for(var g=b.images,c=0;c<g.length&&g[c];++c){var f=g[c],k=e,n=c,p=f.element,q=f.data,r=f.internalformat,u=f.format,l=f.type,d=f.width,y=f.height;P(f);p?a.texImage2D(k,n,u,u,l,p):f.compressed?a.compressedTexImage2D(k,n,r,d,y,0,q):f.needsCopy?(I(),a.copyTexImage2D(k,n,u,f.xOffset,f.yOffset,d,y,0)):a.texImage2D(k,
n,u,d,y,0,u,l,q||null)}}function ea(){var b=fa.pop()||new ab;oa.call(b);for(var e=b.mipmask=0;16>e;++e)b.images[e]=null;return b}function wa(b){for(var e=b.images,g=0;g<e.length;++g)e[g]&&Pb(e[g]),e[g]=null;fa.push(b)}function La(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function yb(e,g){if("min"in g){var c=g.min;b.parameter(c,td);e.minFilter=td[c];0<=w.indexOf(e.minFilter)&&!("faces"in g)&&(e.genMipmaps=!0)}"mag"in
g&&(c=g.mag,b.parameter(c,jc),e.magFilter=jc[c]);var c=e.wrapS,f=e.wrapT;if("wrap"in g){var a=g.wrap;"string"===typeof a?(b.parameter(a,pc),c=f=pc[a]):Array.isArray(a)&&(b.parameter(a[0],pc),b.parameter(a[1],pc),c=pc[a[0]],f=pc[a[1]])}else"wrapS"in g&&(c=g.wrapS,b.parameter(c,pc),c=pc[c]),"wrapT"in g&&(f=g.wrapT,b.parameter(f,pc),f=pc[f]);e.wrapS=c;e.wrapT=f;"anisotropic"in g&&(c=g.anisotropic,b("number"===typeof c&&1<=c&&c<=h.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=g.anisotropic);
if("mipmap"in g){c=!1;switch(typeof g.mipmap){case "string":b.parameter(g.mipmap,cc,"invalid mipmap hint");e.mipmapHint=cc[g.mipmap];c=e.genMipmaps=!0;break;case "boolean":c=e.genMipmaps=g.mipmap;break;case "object":b(Array.isArray(g.mipmap),"invalid mipmap type");e.genMipmaps=!1;c=!0;break;default:b.raise("invalid mipmap type")}!c||"min"in g||(e.minFilter=9984)}}function Ka(b,e){a.texParameteri(e,10241,b.minFilter);a.texParameteri(e,10240,b.magFilter);a.texParameteri(e,10242,b.wrapS);a.texParameteri(e,
10243,b.wrapT);d.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(e))}function X(b){oa.call(this);this.mipmask=0;this.internalformat=6408;this.id=ta++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new La;Y.profile&&(this.stats={size:0})}function nb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=da[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function ra(e){var g=e.texture;b(g,"must not double destroy texture");var c=e.unit,f=e.target;0<=c&&(a.activeTexture(33984+c),a.bindTexture(f,null),da[c]=null);a.deleteTexture(g);e.texture=null;e.params=null;e.pixels=null;e.refCount=0;delete N[e.id];V.textureCount--}var cc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,clamp:33071,mirror:33648},jc={nearest:9728,linear:9729},td=q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},jc),zc={none:0,browser:37444},aa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},O={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ka={};d.ext_srgb&&(O.srgb=35904,O.srgba=35906);d.oes_texture_float&&(aa.float32=aa["float"]=5126);d.oes_texture_half_float&&(aa.float16=aa["half float"]=36193);d.webgl_depth_texture&&(q(O,{depth:6402,"depth stencil":34041}),q(aa,{uint16:5123,uint32:5125,
"depth stencil":34042}));d.webgl_compressed_texture_s3tc&&q(ka,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});d.webgl_compressed_texture_atc&&q(ka,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});d.webgl_compressed_texture_pvrtc&&q(ka,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});d.webgl_compressed_texture_etc1&&(ka["rgb etc1"]=36196);var Ga=Array.prototype.slice.call(a.getParameter(34467));
k(ka).forEach(function(b){var e=ka[b];0<=Ga.indexOf(e)&&(O[b]=e)});var Kb=k(O);h.textureFormats=Kb;var bd=[];k(O).forEach(function(b){bd[O[b]]=b});var Oc=[];k(aa).forEach(function(b){Oc[aa[b]]=b});var J=[];k(jc).forEach(function(b){J[jc[b]]=b});var G=[];k(td).forEach(function(b){G[td[b]]=b});var ia=[];k(pc).forEach(function(b){ia[pc[b]]=b});var ua=Kb.reduce(function(b,e){var g=O[e];6409===g||6406===g||6409===g||6410===g||6402===g||34041===g||d.ext_srgb&&(35904===g||35906===g)?b[g]=g:32855===g||0<=
e.indexOf("rgba")?b[g]=6408:b[g]=6407;return b},{}),Z=[],fa=[],ta=0,N={},H=h.maxTextureUnits,da=Array(H).map(function(){return null});q(X.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var g=0;g<H;++g){var c=da[g];if(c){if(0<c.bindCount)continue;c.unit=-1}da[g]=this;e=g;break}e>=H&&b.raise("insufficient number of texture units");Y.profile&&V.maxTextureUnits<e+1&&(V.maxTextureUnits=e+1);this.unit=e;a.activeTexture(33984+e);a.bindTexture(this.target,this.texture)}return e},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ra(this)}});Y.profile&&(V.getTotalTextureSize=function(){var b=0;k(N).forEach(function(e){b+=N[e].stats.size});return b});return{create2D:function(e,g){function c(e,g){var a=k.texInfo;La.call(a);var n=ea();"number"===typeof e?"number"===typeof g?R(n,e|0,g|0):R(n,e|0,e|0):e?(b.type(e,"object","invalid arguments to regl.texture"),yb(a,e),E(n,e)):R(n,1,1);a.genMipmaps&&(n.mipmask=(n.width<<1)-1);k.mipmask=n.mipmask;Oa(k,n);b.texture2D(a,
n,h);k.internalformat=n.internalformat;c.width=n.width;c.height=n.height;nb(k);ma(n,3553);Ka(a,3553);ga();wa(n);Y.profile&&(k.stats.size=f(k.internalformat,k.type,n.width,n.height,a.genMipmaps,!1));c.format=bd[k.internalformat];c.type=Oc[k.type];c.mag=J[a.magFilter];c.min=G[a.minFilter];c.wrapS=ia[a.wrapS];c.wrapT=ia[a.wrapT];return c}var k=new X(3553);N[k.id]=k;V.textureCount++;c(e,g);c.subimage=function(e,g,f,a){b(!!e,"must specify image data");g|=0;f|=0;a|=0;var n=Q();Oa(n,k);n.width=0;n.height=
0;U(n,e);n.width=n.width||(k.width>>a)-g;n.height=n.height||(k.height>>a)-f;b(k.type===n.type&&k.format===n.format&&k.internalformat===n.internalformat,"incompatible format for texture.subimage");b(0<=g&&0<=f&&g+n.width<=k.width&&f+n.height<=k.height,"texture.subimage write out of bounds");b(k.mipmask&1<<a,"missing mipmap data");b(n.data||n.element||n.needsCopy,"missing image data");nb(k);pa(n,3553,g,f,a);ga();Pb(n);return c};c.resize=function(b,e){var g=b|0,n=e|0||g;if(g===k.width&&n===k.height)return c;
c.width=k.width=g;c.height=k.height=n;nb(k);for(var p=0;k.mipmask>>p;++p){var q=g>>p,r=n>>p;if(!q||!r)break;a.texImage2D(3553,p,k.format,q,r,0,k.format,k.type,null)}ga();Y.profile&&(k.stats.size=f(k.internalformat,k.type,g,n,!1,!1));return c};c._reglType="texture2d";c._texture=k;Y.profile&&(c.stats=k.stats);c.destroy=function(){k.decRef()};return c},createCube:function(e,g,c,n,k,p){function q(e,g,c,a,n,k){var p,d=r.texInfo;La.call(d);for(p=0;6>p;++p)l[p]=ea();if("number"!==typeof e&&e)if("object"===
typeof e)if(g)E(l[0],e),E(l[1],g),E(l[2],c),E(l[3],a),E(l[4],n),E(l[5],k);else if(yb(d,e),W(r,e),"faces"in e)for(e=e.faces,b(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),p=0;6>p;++p)b("object"===typeof e[p]&&!!e[p],"invalid input for cube map face"),Oa(l[p],r),E(l[p],e[p]);else for(p=0;6>p;++p)E(l[p],e);else b.raise("invalid arguments to cube map");else for(e=e|0||1,p=0;6>p;++p)R(l[p],e,e);Oa(r,l[0]);b.optional(function(){h.npotTextureCube||b(u(r.width)&&u(r.height),"your browser does not support non power or two texture dimensions")});
r.mipmask=d.genMipmaps?(l[0].width<<1)-1:l[0].mipmask;b.textureCube(r,d,l,h);r.internalformat=l[0].internalformat;q.width=l[0].width;q.height=l[0].height;nb(r);for(p=0;6>p;++p)ma(l[p],34069+p);Ka(d,34067);ga();Y.profile&&(r.stats.size=f(r.internalformat,r.type,q.width,q.height,d.genMipmaps,!0));q.format=bd[r.internalformat];q.type=Oc[r.type];q.mag=J[d.magFilter];q.min=G[d.minFilter];q.wrapS=ia[d.wrapS];q.wrapT=ia[d.wrapT];for(p=0;6>p;++p)wa(l[p]);return q}var r=new X(34067);N[r.id]=r;V.cubeCount++;
var l=Array(6);q(e,g,c,n,k,p);q.subimage=function(e,g,c,f,a){b(!!g,"must specify image data");b("number"===typeof e&&e===(e|0)&&0<=e&&6>e,"invalid face");c|=0;f|=0;a|=0;var n=Q();Oa(n,r);n.width=0;n.height=0;U(n,g);n.width=n.width||(r.width>>a)-c;n.height=n.height||(r.height>>a)-f;b(r.type===n.type&&r.format===n.format&&r.internalformat===n.internalformat,"incompatible format for texture.subimage");b(0<=c&&0<=f&&c+n.width<=r.width&&f+n.height<=r.height,"texture.subimage write out of bounds");b(r.mipmask&
1<<a,"missing mipmap data");b(n.data||n.element||n.needsCopy,"missing image data");nb(r);pa(n,34069+e,c,f,a);ga();Pb(n);return q};q.resize=function(b){b|=0;if(b!==r.width){q.width=r.width=b;q.height=r.height=b;nb(r);for(var e=0;6>e;++e)for(var g=0;r.mipmask>>g;++g)a.texImage2D(34069+e,g,r.format,b>>g,b>>g,0,r.format,r.type,null);ga();Y.profile&&(r.stats.size=f(r.internalformat,r.type,q.width,q.height,!1,!0));return q}};q._reglType="textureCube";q._texture=r;Y.profile&&(q.stats=r.stats);q.destroy=
function(){r.decRef()};return q},clear:function(){for(var b=0;b<H;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),da[b]=null;C(N).forEach(ra);V.cubeCount=0;V.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<H;++b){var e=da[b];e&&(e.bindCount=0,e.unit=-1,da[b]=null)}C(N).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var e=0;32>e;++e)if(0!==(b.mipmask&1<<e))if(3553===b.target)a.texImage2D(3553,e,b.internalformat,b.width>>
e,b.height>>e,0,b.internalformat,b.type,null);else for(var g=0;6>g;++g)a.texImage2D(34069+g,e,b.internalformat,b.width>>e,b.height>>e,0,b.internalformat,b.type,null);Ka(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<H;++b){var e=da[b];e&&(e.bindCount=0,e.unit=-1,da[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(d,h,t){h.exports=function(a,c){function d(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function D(b,c,e){var g=f.pop()||new d;g.startQueryIndex=b;g.endQueryIndex=c;g.sum=0;g.stats=e;k.push(g)}if(!c.ext_disjoint_timer_query)return null;var m=[],l=[],f=[],k=[],b=[],q=[];return{beginQuery:function(b){var f=m.pop()||c.ext_disjoint_timer_query.createQueryEXT();
c.ext_disjoint_timer_query.beginQueryEXT(35007,f);l.push(f);D(l.length-1,l.length,b)},endQuery:function(){c.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:D,update:function(){var a,d;a=l.length;if(0!==a){q.length=Math.max(q.length,a+1);b.length=Math.max(b.length,a+1);b[0]=0;var e=q[0]=0;for(d=a=0;d<l.length;++d){var g=l[d];c.ext_disjoint_timer_query.getQueryObjectEXT(g,34919)?(e+=c.ext_disjoint_timer_query.getQueryObjectEXT(g,34918),m.push(g)):l[a++]=g;b[d+1]=e;q[d+1]=a}l.length=a;for(d=
a=0;d<k.length;++d){var e=k[d],p=e.startQueryIndex,g=e.endQueryIndex;e.sum+=b[g]-b[p];p=q[p];g=q[g];g===p?(e.stats.gpuTime+=e.sum/1E6,f.push(e)):(e.startQueryIndex=p,e.endQueryIndex=g,k[a++]=e)}k.length=a}},getNumPendingQueries:function(){return l.length},clear:function(){m.push.apply(m,l);for(var b=0;b<m.length;b++)c.ext_disjoint_timer_query.deleteQueryEXT(m[b]);l.length=0;m.length=0},restore:function(){l.length=0;m.length=0}}}},{}],21:[function(d,h,t){function a(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function c(b){b=Error("(regl) "+b);console.error(b);throw b;}function z(b,e){b||c(e)}function D(b){return b?": "+b:""}function m(b,e){switch(e){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function l(b,e,g){0>e.indexOf(b)&&c("invalid value"+
D(g)+". must be one of: "+e)}function f(b,e){for(b+="";b.length<e;)b=" "+b;return b}function k(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function b(b,e){this.number=b;this.line=e;this.errors=[]}function q(b,e,g){this.file=b;this.line=e;this.message=g}function C(){var b=Error(),b=(b.stack||b).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return e?e[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function y(){var b=Error(),b=(b.stack||b).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return e?e[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function e(e,g){var c=e.split("\n"),f=1,n=0,p={unknown:new k,0:new k};p.unknown.name=p[0].name=g||C();p.unknown.lines.push(new b(0,""));for(var q=0;q<c.length;++q){var r=c[q],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(r);if(u)switch(u[1]){case "line":if(u=/(\d+)(\s+\d+)?/.exec(u[2]))f=u[1]|0,u[2]&&(n=u[2]|0,n in p||(p[n]=new k));break;case "define":if(u=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]))p[n].name=
u[1]?a(u[2]):u[2]}p[n].lines.push(new b(f++,r))}w(p).forEach(function(b){var e=p[b];e.lines.forEach(function(b){e.index[b.number]=b})});return p}function g(b){var e=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);g?e.push(new q(g[1]|0,g[2]|0,g[3].trim())):0<b.length&&e.push(new q("unknown",0,b))}});return e}function p(b,e){e.forEach(function(e){var g=b[e.file];if(g){var c=g.index[e.line];if(c){c.errors.push(e);g.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(e)})}function n(b){b._commandRef=C()}function r(b,e){var g=y();c(b+" in command "+(e||C())+("unknown"===g?"":" called from "+g))}function u(b,e,g,c){m(b,e)||r("invalid parameter type"+D(g)+". expected "+e+", got "+typeof b,c||C())}function M(b,e){return 32820===b||32819===b||33635===b?2:34042===b?4:B[b]*e}var w=d("./sorted-object-keys"),sa=d("./is-typed-array");d=d("./extend");var x="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
B={};B[5120]=B[5121]=1;B[5122]=B[5123]=B[36193]=B[33635]=B[32819]=B[32820]=2;B[5124]=B[5125]=B[5126]=B[34042]=4;h.exports=d(z,{optional:function(b){b()},raise:c,commandRaise:r,command:function(b,e,g){b||r(e,g||C())},parameter:function(b,e,g){b in e||c("unknown parameter ("+b+")"+D(g)+". possible values: "+w(e).join())},commandParameter:function(b,e,g,c){b in e||r("unknown parameter ("+b+")"+D(g)+". possible values: "+w(e).join(),c||C())},constructor:function(b){w(b).forEach(function(b){0>x.indexOf(b)&&
c('invalid regl constructor argument "'+b+'". must be one of '+x)})},type:function(b,e,g){m(b,e)||c("invalid parameter type"+D(g)+". expected "+e+", got "+typeof b)},commandType:u,isTypedArray:function(b,e){sa(b)||c("invalid parameter type"+D(e)+". must be a typed array")},nni:function(b,e){0<=b&&(b|0)===b||c("invalid parameter type, ("+b+")"+D(e)+". must be a nonnegative integer")},oneOf:l,shaderError:function(b,c,a,n,k){if(!b.getShaderParameter(c,b.COMPILE_STATUS)){c=b.getShaderInfoLog(c);b=n===
b.FRAGMENT_SHADER?"fragment":"vertex";u(a,"string",b+" shader source must be a string",k);var q=e(a,k);a=g(c);p(q,a);w(q).forEach(function(b){function e(b,g){c.push(b);a.push(g||"")}var g=q[b];if(g.hasErrors){var c=[""],a=[""];e("file number "+b+": "+g.name+"\n","color:red;text-decoration:underline;font-weight:bold");g.lines.forEach(function(b){if(0<b.errors.length){e(f(b.number,4)+"|  ","background-color:yellow; font-weight:bold");e(b.line+"\n","color:red; background-color:yellow; font-weight:bold");
var g=0;b.errors.forEach(function(c){c=c.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(a){var n=a[1];c=a[2];switch(n){case "assign":n="="}g=Math.max(b.line.indexOf(n,g),0)}else g=0;e(f("| ",6));e(f("^^^",g+3)+"\n","font-weight:bold");e(f("| ",6));e(c+"\n","font-weight:bold")});e(f("| ",6)+"\n")}else e(f(b.number,4)+"|  "),e(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(c.join("")):(a[0]=c.join("%c"),console.log.apply(console,a))}});z.raise("Error compiling "+
b+" shader, "+q[0].name)}},linkError:function(b,g,c,f,a){b.getProgramParameter(g,b.LINK_STATUS)||(b=b.getProgramInfoLog(g),c=e(c,a),f='Error linking program with vertex shader, "'+e(f,a)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+b),z.raise(f))},callSite:y,saveCommandRef:n,saveDrawInfo:function(b,e,g,c){function f(b){return b?c.id(b):0}function a(b,
e){w(e).forEach(function(e){b[c.id(e)]=!0})}n(b);b._fragId=f(b["static"].frag);b._vertId=f(b["static"].vert);var k=b._uniformSet={};a(k,e["static"]);a(k,e.dynamic);e=b._attributeSet={};a(e,g["static"]);a(e,g.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,e,g){b.texture?l(b.texture._texture.internalformat,e,"unsupported texture format for attachment"):l(b.renderbuffer._renderbuffer.format,g,"unsupported renderbuffer format for attachment")},
guessCommand:C,texture2D:function(b,e,g){var c=e.width,f=e.height,a=e.channels;z(0<c&&c<=g.maxTextureSize&&0<f&&f<=g.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||z(!(c&c-1)&&!!c&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==c&&1!==f&&z(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(z(!(c&c-1)&&!!c&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),
z(e.mipmask===(c<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&z(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),z(!b.genMipmaps,"mipmap generation not supported with float textures"));var n=e.images;for(g=0;16>g;++g)if(n[g]){var k=c>>g,p=f>>g;z(e.mipmask&1<<g,"missing mipmap data");var q=n[g];z(q.width===k&&q.height===p,"invalid shape for mip images");z(q.format===e.format&&q.internalformat===
e.internalformat&&q.type===e.type,"incompatible type for mip image");!q.compressed&&q.data&&(k=Math.ceil(M(q.type,a)*k/q.unpackAlignment)*q.unpackAlignment,z(q.data.byteLength===k*p,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||z(0===(e.mipmask&1<<g),"extra mipmap data");e.compressed&&z(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,e,g,c){var f=b.width,a=b.height,n=b.channels;z(0<f&&f<=c.maxTextureSize&&
0<a&&a<=c.maxTextureSize,"invalid texture shape");z(f===a,"cube map must be square");z(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(c=0;c<g.length;++c){var k=g[c];z(k.width===f&&k.height===a,"inconsistent cube map face shape");e.genMipmaps&&(z(!k.compressed,"can not generate mipmap for compressed textures"),z(1===k.mipmask,"can not specify mipmaps and generate mipmaps"));for(var p=k.images,q=0;16>q;++q){var r=p[q];if(r){var u=f>>q,l=a>>q;z(k.mipmask&1<<q,"missing mipmap data");
z(r.width===u&&r.height===l,"invalid shape for mip images");z(r.format===b.format&&r.internalformat===b.internalformat&&r.type===b.type,"incompatible type for mip image");r.compressed||r.data&&z(r.data.byteLength===u*l*Math.max(M(r.type,n),r.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(d,h,t){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(d,h,t){function a(c){return Array.prototype.slice.call(c)}var c=d("./extend"),z=d("./compiled-fns");h.exports=function(){function d(){var b=[],k=[];return c(function(){b.push.apply(b,a(arguments))},{def:function(){var c="v"+f;f++;k.push(c);0<arguments.length&&(b.push(c,"="),b.push.apply(b,a(arguments)),b.push(";"));return c},toString:function(){return a([0<k.length?"var "+k.join(",")+";":"",a(b).join("")]).join("")}})}function m(){function b(e,g){k(e,
g,"=",f.def(e,g),";")}var f=d(),k=d(),e=f.toString,g=k.toString;return c(function(){f.apply(f,a(arguments))},{def:f.def,entry:f,exit:k,save:b,set:function(e,g,c){b(e,g);f(e,g,"=",c,";")},toString:function(){return e()+g()}})}var l=0,f=0,k={},b={};return{global:d(),link:function(b){var c="$"+l,f=!1;"object"===typeof b&&b.name&&(c=b.name.replace(/ /g,"_"),f=!0);if(c in k)return c;k[c]=b;f||l++;return c},block:d,proc:function(f,k){function l(){var b="a"+e.length;e.push(b);return b}var e=[];k=k||0;for(var g=
0;g<k;++g)l();var g=m(),p=g.toString;return b[f]=c(g,{arg:l,toString:function(){return a(["function(",e.join(),"){",p(),"}"]).join("")}})},scope:m,cond:function(){var b=a(arguments).join(""),f=m(),k=m(),e=f.toString,g=k.toString;return c(f,{then:function(){f.apply(f,a(arguments));return this},"else":function(){k.apply(k,a(arguments));return this},toString:function(){var c=g();c&&(c="else{"+c+"}");return a(["if(",b,"){",e(),"}",c]).join("")}})},compile:function(){var b=[],c=[];Object.keys(k).sort(function(b,
e){var c="$"===b.charAt(0),f="$"===e.charAt(0);return c||f?c&&f?+b.slice(1)<+e.slice(1)?-1:1:c&&!f?-1:1:b.localeCompare(e)}).forEach(function(e){var f=k[e];b.push(e);c.push(f)});for(var f=0,e=b.length-1;-1<e;e--)if("$"===b[e].charAt(0)){f=e;break}f=b.slice(f).join();e=z[f];if(!e)throw Error("missing precompiled function with key: "+f);return e.apply(null,c)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(d,h,t){h.exports={$0:function(a){var c,d,D,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,h,x,B,ca,na,
S,t,A,Y,I,V;c=a.attributes;d=a.current;D=a.framebuffer;m=a.gl;l=a.next;f=a.vao;k=l.blend_color;b=d.blend_color;q=l.blend_equation;C=d.blend_equation;y=l.blend_func;e=d.blend_func;g=l.colorMask;p=d.colorMask;n=l.depth_range;r=d.depth_range;u=l.polygonOffset_offset;M=d.polygonOffset_offset;w=l.sample_coverage;h=d.sample_coverage;x=l.scissor_box;B=d.scissor_box;ca=l.stencil_func;na=d.stencil_func;S=l.stencil_opBack;t=d.stencil_opBack;A=l.stencil_opFront;Y=d.stencil_opFront;I=l.viewport;V=d.viewport;
return{poll:function(){var c,f,a,ha,la,Qa,Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa;d.dirty=!1;f=l.blend_enable;a=l.cull_enable;ha=l.depth_enable;la=l.dither;Qa=l.polygonOffset_enable;Bb=l.sample_alpha;oa=l.sample_enable;Oa=l.scissor_enable;W=l.stencil_enable;P=l.cull_face;L=d.cull_face;U=l.depth_func;pa=d.depth_func;Q=l.depth_mask;Pb=d.depth_mask;ab=l.frontFace;R=d.frontFace;E=l.lineWidth;ma=d.lineWidth;ea=l.stencil_mask;wa=d.stencil_mask;c=D.next;c!==D.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):
m.bindFramebuffer(36160,null),D.cur=c);f!==d.blend_enable&&(f?m.enable(3042):m.disable(3042),d.blend_enable=f);a!==d.cull_enable&&(a?m.enable(2884):m.disable(2884),d.cull_enable=a);ha!==d.depth_enable&&(ha?m.enable(2929):m.disable(2929),d.depth_enable=ha);la!==d.dither&&(la?m.enable(3024):m.disable(3024),d.dither=la);Qa!==d.polygonOffset_enable&&(Qa?m.enable(32823):m.disable(32823),d.polygonOffset_enable=Qa);Bb!==d.sample_alpha&&(Bb?m.enable(32926):m.disable(32926),d.sample_alpha=Bb);oa!==d.sample_enable&&
(oa?m.enable(32928):m.disable(32928),d.sample_enable=oa);Oa!==d.scissor_enable&&(Oa?m.enable(3089):m.disable(3089),d.scissor_enable=Oa);W!==d.stencil_enable&&(W?m.enable(2960):m.disable(2960),d.stencil_enable=W);if(k[0]!==b[0]||k[1]!==b[1]||k[2]!==b[2]||k[3]!==b[3])m.blendColor(k[0],k[1],k[2],k[3]),b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3];if(q[0]!==C[0]||q[1]!==C[1])m.blendEquationSeparate(q[0],q[1]),C[0]=q[0],C[1]=q[1];if(y[0]!==e[0]||y[1]!==e[1]||y[2]!==e[2]||y[3]!==e[3])m.blendFuncSeparate(y[0],
y[1],y[2],y[3]),e[0]=y[0],e[1]=y[1],e[2]=y[2],e[3]=y[3];if(g[0]!==p[0]||g[1]!==p[1]||g[2]!==p[2]||g[3]!==p[3])m.colorMask(g[0],g[1],g[2],g[3]),p[0]=g[0],p[1]=g[1],p[2]=g[2],p[3]=g[3];P!==L&&(m.cullFace(P),d.cull_face=P);U!==pa&&(m.depthFunc(U),d.depth_func=U);Q!==Pb&&(m.depthMask(Q),d.depth_mask=Q);if(n[0]!==r[0]||n[1]!==r[1])m.depthRange(n[0],n[1]),r[0]=n[0],r[1]=n[1];ab!==R&&(m.frontFace(ab),d.frontFace=ab);E!==ma&&(m.lineWidth(E),d.lineWidth=E);if(u[0]!==M[0]||u[1]!==M[1])m.polygonOffset(u[0],
u[1]),M[0]=u[0],M[1]=u[1];if(w[0]!==h[0]||w[1]!==h[1])m.sampleCoverage(w[0],w[1]),h[0]=w[0],h[1]=w[1];if(x[0]!==B[0]||x[1]!==B[1]||x[2]!==B[2]||x[3]!==B[3])m.scissor(x[0],x[1],x[2],x[3]),B[0]=x[0],B[1]=x[1],B[2]=x[2],B[3]=x[3];if(ca[0]!==na[0]||ca[1]!==na[1]||ca[2]!==na[2])m.stencilFunc(ca[0],ca[1],ca[2]),na[0]=ca[0],na[1]=ca[1],na[2]=ca[2];ea!==wa&&(m.stencilMask(ea),d.stencil_mask=ea);if(S[0]!==t[0]||S[1]!==t[1]||S[2]!==t[2]||S[3]!==t[3])m.stencilOpSeparate(S[0],S[1],S[2],S[3]),t[0]=S[0],t[1]=S[1],
t[2]=S[2],t[3]=S[3];if(A[0]!==Y[0]||A[1]!==Y[1]||A[2]!==Y[2]||A[3]!==Y[3])m.stencilOpSeparate(A[0],A[1],A[2],A[3]),Y[0]=A[0],Y[1]=A[1],Y[2]=A[2],Y[3]=A[3];if(I[0]!==V[0]||I[1]!==V[1]||I[2]!==V[2]||I[3]!==V[3])m.viewport(I[0],I[1],I[2],I[3]),V[0]=I[0],V[1]=I[1],V[2]=I[2],V[3]=I[3]},refresh:function(){var a,ja,T,ha,la,Qa,Bb,oa,Oa,W,P,L,U,pa,Q,Pb;d.dirty=!1;ja=l.blend_enable;T=l.cull_enable;ha=l.depth_enable;la=l.dither;Qa=l.polygonOffset_enable;Bb=l.sample_alpha;oa=l.sample_enable;Oa=l.scissor_enable;
W=l.stencil_enable;P=l.cull_face;L=l.depth_func;U=l.depth_mask;pa=l.frontFace;Q=l.lineWidth;Pb=l.stencil_mask;(a=D.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);D.cur=a;a=c[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=c[1];a.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,a.buffer.buffer),
m.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=c[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=c[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,a.size,
a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=c[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=c[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):
(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=c[6];a.buffer?(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=c[7];a.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),
m.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=c[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=c[9];a.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=c[10];a.buffer?(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=c[11];a.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=
c[12];a.buffer?(m.enableVertexAttribArray(12),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=c[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=c[14];a.buffer?(m.enableVertexAttribArray(14),
m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=c[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);f.currentVAO=null;f.setVAO(f.targetVAO);ja?m.enable(3042):m.disable(3042);
d.blend_enable=ja;T?m.enable(2884):m.disable(2884);d.cull_enable=T;ha?m.enable(2929):m.disable(2929);d.depth_enable=ha;la?m.enable(3024):m.disable(3024);d.dither=la;Qa?m.enable(32823):m.disable(32823);d.polygonOffset_enable=Qa;Bb?m.enable(32926):m.disable(32926);d.sample_alpha=Bb;oa?m.enable(32928):m.disable(32928);d.sample_enable=oa;Oa?m.enable(3089):m.disable(3089);d.scissor_enable=Oa;W?m.enable(2960):m.disable(2960);d.stencil_enable=W;m.blendColor(k[0],k[1],k[2],k[3]);b[0]=k[0];b[1]=k[1];b[2]=
k[2];b[3]=k[3];m.blendEquationSeparate(q[0],q[1]);C[0]=q[0];C[1]=q[1];m.blendFuncSeparate(y[0],y[1],y[2],y[3]);e[0]=y[0];e[1]=y[1];e[2]=y[2];e[3]=y[3];m.colorMask(g[0],g[1],g[2],g[3]);p[0]=g[0];p[1]=g[1];p[2]=g[2];p[3]=g[3];m.cullFace(P);d.cull_face=P;m.depthFunc(L);d.depth_func=L;m.depthMask(U);d.depth_mask=U;m.depthRange(n[0],n[1]);r[0]=n[0];r[1]=n[1];m.frontFace(pa);d.frontFace=pa;m.lineWidth(Q);d.lineWidth=Q;m.polygonOffset(u[0],u[1]);M[0]=u[0];M[1]=u[1];m.sampleCoverage(w[0],w[1]);h[0]=w[0];
h[1]=w[1];m.scissor(x[0],x[1],x[2],x[3]);B[0]=x[0];B[1]=x[1];B[2]=x[2];B[3]=x[3];m.stencilFunc(ca[0],ca[1],ca[2]);na[0]=ca[0];na[1]=ca[1];na[2]=ca[2];m.stencilMask(Pb);d.stencil_mask=Pb;m.stencilOpSeparate(S[0],S[1],S[2],S[3]);t[0]=S[0];t[1]=S[1];t[2]=S[2];t[3]=S[3];m.stencilOpSeparate(A[0],A[1],A[2],A[3]);Y[0]=A[0];Y[1]=A[1];Y[2]=A[2];Y[3]=A[3];m.viewport(I[0],I[1],I[2],I[3]);V[0]=I[0];V[1]=I[1];V[2]=I[2];V[3]=I[3]}}},$3:function(a,c,d,D){var m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,h,x,B,ca,na,S,t,A,Y,I,
V,K,ja,T,ha,la,Qa;m=a.context;l=a.current;f=a.framebuffer;k=a.gl;b=a.next;q=a.shader;C=a.vao;y=b.blend_color;e=l.blend_color;g=b.blend_equation;p=l.blend_equation;n=b.blend_func;r=l.blend_func;u=b.colorMask;M=l.colorMask;w=b.depth_range;h=l.depth_range;x=b.polygonOffset_offset;B=l.polygonOffset_offset;ca=b.sample_coverage;na=l.sample_coverage;S=b.scissor_box;t=l.scissor_box;A=b.stencil_func;Y=l.stencil_func;I=b.stencil_opBack;V=l.stencil_opBack;K=b.stencil_opFront;ja=l.stencil_opFront;T=b.viewport;
ha=l.viewport;la={};Qa={};return{batch:function(a,d){var m,z,P,L,U;m=f.next;m!==f.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),f.cur=m);if(l.dirty){m=b.dither;m!==l.dither&&(m?k.enable(3024):k.disable(3024),l.dither=m);m=b.blend_enable;m!==l.blend_enable&&(m?k.enable(3042):k.disable(3042),l.blend_enable=m);m=y[0];P=y[1];L=y[2];U=y[3];if(m!==e[0]||P!==e[1]||L!==e[2]||U!==e[3])k.blendColor(m,P,L,U),e[0]=m,e[1]=P,e[2]=L,e[3]=U;m=g[0];P=g[1];if(m!==p[0]||P!==p[1])k.blendEquationSeparate(m,
P),p[0]=m,p[1]=P;m=n[0];P=n[1];L=n[2];U=n[3];if(m!==r[0]||P!==r[1]||L!==r[2]||U!==r[3])k.blendFuncSeparate(m,P,L,U),r[0]=m,r[1]=P,r[2]=L,r[3]=U;m=b.depth_enable;m!==l.depth_enable&&(m?k.enable(2929):k.disable(2929),l.depth_enable=m);m=b.depth_func;m!==l.depth_func&&(k.depthFunc(m),l.depth_func=m);m=w[0];P=w[1];if(m!==h[0]||P!==h[1])k.depthRange(m,P),h[0]=m,h[1]=P;m=b.depth_mask;m!==l.depth_mask&&(k.depthMask(m),l.depth_mask=m);m=u[0];P=u[1];L=u[2];U=u[3];if(m!==M[0]||P!==M[1]||L!==M[2]||U!==M[3])k.colorMask(m,
P,L,U),M[0]=m,M[1]=P,M[2]=L,M[3]=U;m=b.cull_enable;m!==l.cull_enable&&(m?k.enable(2884):k.disable(2884),l.cull_enable=m);m=b.cull_face;m!==l.cull_face&&(k.cullFace(m),l.cull_face=m);m=b.frontFace;m!==l.frontFace&&(k.frontFace(m),l.frontFace=m);m=b.lineWidth;m!==l.lineWidth&&(k.lineWidth(m),l.lineWidth=m);m=b.polygonOffset_enable;m!==l.polygonOffset_enable&&(m?k.enable(32823):k.disable(32823),l.polygonOffset_enable=m);m=x[0];P=x[1];if(m!==B[0]||P!==B[1])k.polygonOffset(m,P),B[0]=m,B[1]=P;m=b.sample_alpha;
m!==l.sample_alpha&&(m?k.enable(32926):k.disable(32926),l.sample_alpha=m);m=b.sample_enable;m!==l.sample_enable&&(m?k.enable(32928):k.disable(32928),l.sample_enable=m);m=ca[0];P=ca[1];if(m!==na[0]||P!==na[1])k.sampleCoverage(m,P),na[0]=m,na[1]=P;m=b.stencil_enable;m!==l.stencil_enable&&(m?k.enable(2960):k.disable(2960),l.stencil_enable=m);m=b.stencil_mask;m!==l.stencil_mask&&(k.stencilMask(m),l.stencil_mask=m);m=A[0];P=A[1];L=A[2];if(m!==Y[0]||P!==Y[1]||L!==Y[2])k.stencilFunc(m,P,L),Y[0]=m,Y[1]=P,
Y[2]=L;m=K[0];P=K[1];L=K[2];U=K[3];if(m!==ja[0]||P!==ja[1]||L!==ja[2]||U!==ja[3])k.stencilOpSeparate(m,P,L,U),ja[0]=m,ja[1]=P,ja[2]=L,ja[3]=U;m=I[0];P=I[1];L=I[2];U=I[3];if(m!==V[0]||P!==V[1]||L!==V[2]||U!==V[3])k.stencilOpSeparate(m,P,L,U),V[0]=m,V[1]=P,V[2]=L,V[3]=U;m=b.scissor_enable;m!==l.scissor_enable&&(m?k.enable(3089):k.disable(3089),l.scissor_enable=m);m=S[0];P=S[1];L=S[2];U=S[3];if(m!==t[0]||P!==t[1]||L!==t[2]||U!==t[3])k.scissor(m,P,L,U),t[0]=m,t[1]=P,t[2]=L,t[3]=U;m=T[0];P=T[1];L=T[2];
U=T[3];if(m!==ha[0]||P!==ha[1]||L!==ha[2]||U!==ha[3])k.viewport(m,P,L,U),ha[0]=m,ha[1]=P,ha[2]=L,ha[3]=U;l.dirty=!1}if(m=l.profile)z=performance.now(),c.count+=d;P=q.program(q.vert,q.frag);k.useProgram(P.program);C.setVAO(null);L=P.id;(U=Qa[L])||(U=Qa[L]=D(P));U.call(this,a,d);C.setVAO(null);m&&(c.cpuTime+=performance.now()-z)},draw:function(a){var m,D,W,P,L;m=f.next;m!==f.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),f.cur=m);if(l.dirty){m=b.dither;m!==l.dither&&(m?
k.enable(3024):k.disable(3024),l.dither=m);m=b.blend_enable;m!==l.blend_enable&&(m?k.enable(3042):k.disable(3042),l.blend_enable=m);m=y[0];W=y[1];P=y[2];L=y[3];if(m!==e[0]||W!==e[1]||P!==e[2]||L!==e[3])k.blendColor(m,W,P,L),e[0]=m,e[1]=W,e[2]=P,e[3]=L;m=g[0];W=g[1];if(m!==p[0]||W!==p[1])k.blendEquationSeparate(m,W),p[0]=m,p[1]=W;m=n[0];W=n[1];P=n[2];L=n[3];if(m!==r[0]||W!==r[1]||P!==r[2]||L!==r[3])k.blendFuncSeparate(m,W,P,L),r[0]=m,r[1]=W,r[2]=P,r[3]=L;m=b.depth_enable;m!==l.depth_enable&&(m?k.enable(2929):
k.disable(2929),l.depth_enable=m);m=b.depth_func;m!==l.depth_func&&(k.depthFunc(m),l.depth_func=m);m=w[0];W=w[1];if(m!==h[0]||W!==h[1])k.depthRange(m,W),h[0]=m,h[1]=W;m=b.depth_mask;m!==l.depth_mask&&(k.depthMask(m),l.depth_mask=m);m=u[0];W=u[1];P=u[2];L=u[3];if(m!==M[0]||W!==M[1]||P!==M[2]||L!==M[3])k.colorMask(m,W,P,L),M[0]=m,M[1]=W,M[2]=P,M[3]=L;m=b.cull_enable;m!==l.cull_enable&&(m?k.enable(2884):k.disable(2884),l.cull_enable=m);m=b.cull_face;m!==l.cull_face&&(k.cullFace(m),l.cull_face=m);m=b.frontFace;
m!==l.frontFace&&(k.frontFace(m),l.frontFace=m);m=b.lineWidth;m!==l.lineWidth&&(k.lineWidth(m),l.lineWidth=m);m=b.polygonOffset_enable;m!==l.polygonOffset_enable&&(m?k.enable(32823):k.disable(32823),l.polygonOffset_enable=m);m=x[0];W=x[1];if(m!==B[0]||W!==B[1])k.polygonOffset(m,W),B[0]=m,B[1]=W;m=b.sample_alpha;m!==l.sample_alpha&&(m?k.enable(32926):k.disable(32926),l.sample_alpha=m);m=b.sample_enable;m!==l.sample_enable&&(m?k.enable(32928):k.disable(32928),l.sample_enable=m);m=ca[0];W=ca[1];if(m!==
na[0]||W!==na[1])k.sampleCoverage(m,W),na[0]=m,na[1]=W;m=b.stencil_enable;m!==l.stencil_enable&&(m?k.enable(2960):k.disable(2960),l.stencil_enable=m);m=b.stencil_mask;m!==l.stencil_mask&&(k.stencilMask(m),l.stencil_mask=m);m=A[0];W=A[1];P=A[2];if(m!==Y[0]||W!==Y[1]||P!==Y[2])k.stencilFunc(m,W,P),Y[0]=m,Y[1]=W,Y[2]=P;m=K[0];W=K[1];P=K[2];L=K[3];if(m!==ja[0]||W!==ja[1]||P!==ja[2]||L!==ja[3])k.stencilOpSeparate(m,W,P,L),ja[0]=m,ja[1]=W,ja[2]=P,ja[3]=L;m=I[0];W=I[1];P=I[2];L=I[3];if(m!==V[0]||W!==V[1]||
P!==V[2]||L!==V[3])k.stencilOpSeparate(m,W,P,L),V[0]=m,V[1]=W,V[2]=P,V[3]=L;m=b.scissor_enable;m!==l.scissor_enable&&(m?k.enable(3089):k.disable(3089),l.scissor_enable=m);m=S[0];W=S[1];P=S[2];L=S[3];if(m!==t[0]||W!==t[1]||P!==t[2]||L!==t[3])k.scissor(m,W,P,L),t[0]=m,t[1]=W,t[2]=P,t[3]=L;m=T[0];W=T[1];P=T[2];L=T[3];if(m!==ha[0]||W!==ha[1]||P!==ha[2]||L!==ha[3])k.viewport(m,W,P,L),ha[0]=m,ha[1]=W,ha[2]=P,ha[3]=L;l.dirty=!1}if(m=l.profile)D=performance.now(),c.count++;W=q.program(q.vert,q.frag);k.useProgram(W.program);
C.setVAO(null);P=W.id;(L=la[P])||(L=la[P]=d(W));L.call(this,a);C.setVAO(null);m&&(c.cpuTime+=performance.now()-D)},scope:function(b,e,g){var a,f;if(a=l.profile)f=performance.now(),c.count++;e(m,b,g);a&&(c.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
c,d,D,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,h,x,B,ca,na,t,ba,A,Y,I,V,K,ja,T,ha,la,Qa,Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra,cc,pc,jc,td,zc,aa,O,ka,Ga,Kb,bd,Oc,J,G,ia,ua,Z,fa,ta){var N,H,da,Aa,Da,Ja,F,nc,Eb,qa,Fb,xb,Ye,xd,ge,je,we,ue,Od,fe,ve,yd,Dd,zd,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb,hd,Gb,oc,Xa,Fc,$b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac;N=a.attributes;H=a.context;da=a.current;Aa=a.draw;Da=a.elements;Ja=a.framebuffer;F=a.gl;nc=a.next;Eb=
a.shader;qa=a.uniforms;Fb=a.vao;xb=nc.blend_color;Ye=da.blend_color;xd=nc.blend_equation;ge=da.blend_equation;je=nc.blend_func;we=da.blend_func;ue=nc.colorMask;Od=da.colorMask;fe=nc.depth_range;ve=da.depth_range;yd=nc.polygonOffset_offset;Dd=da.polygonOffset_offset;zd=nc.sample_coverage;Ad=da.sample_coverage;xe=nc.scissor_box;Me=da.scissor_box;Qe=nc.stencil_func;Bd=da.stencil_func;Be=nc.stencil_opBack;Vd=da.stencil_opBack;Wd=nc.stencil_opFront;ae=da.stencil_opFront;Yd=nc.viewport;qd=da.viewport;nd=
{};vd={};$c=new Float32Array(16);sd=new Float32Array(16);Tc=new Float32Array(16);Ed=new Float32Array(16);Pc=new Float32Array(16);Jc=new Float32Array(16);qc=new Float32Array(16);gb=new Float32Array(16);hd=new Float32Array(16);Gb=new Float32Array(16);oc=new Float32Array(16);Xa=new Float32Array(16);Fc=new Float32Array(16);$b=new Float32Array(16);lc=new Float32Array(16);Id=new Float32Array(16);rd=new Float32Array(16);Gc=new Float32Array(16);dc=new Float32Array(16);Cc=new Float32Array(16);Xc=new Float32Array(16);
Yb=new Float32Array(16);Hc=new Float32Array(16);Ya=new Float32Array(16);Ea=new Float32Array(16);ud=new Float32Array(16);Hb=new Float32Array(16);Ua=new Float32Array(16);Lb=new Float32Array(16);cb=new Float32Array(16);Dc=new Float32Array(16);ac=new Float32Array(16);return{batch:function(c,a){var d,w,x,z;d=Ja.next;d!==Ja.cur&&(d?F.bindFramebuffer(36160,d.framebuffer):F.bindFramebuffer(36160,null),Ja.cur=d);if(da.dirty){var h,B,sa,ca,A,ja,t,na,I,S,qa,K,ba,T,Y,V,gb,Eb,Ba,Xa,ha,xb,Gb,Ta,$b;h=ue[0];B=ue[1];
sa=ue[2];ca=ue[3];if(h!==Od[0]||B!==Od[1]||sa!==Od[2]||ca!==Od[3])F.colorMask(h,B,sa,ca),Od[0]=h,Od[1]=B,Od[2]=sa,Od[3]=ca;A=nc.frontFace;A!==da.frontFace&&(F.frontFace(A),da.frontFace=A);ja=nc.polygonOffset_enable;ja!==da.polygonOffset_enable&&(ja?F.enable(32823):F.disable(32823),da.polygonOffset_enable=ja);t=yd[0];na=yd[1];if(t!==Dd[0]||na!==Dd[1])F.polygonOffset(t,na),Dd[0]=t,Dd[1]=na;I=nc.sample_alpha;I!==da.sample_alpha&&(I?F.enable(32926):F.disable(32926),da.sample_alpha=I);S=nc.sample_enable;
S!==da.sample_enable&&(S?F.enable(32928):F.disable(32928),da.sample_enable=S);qa=zd[0];K=zd[1];if(qa!==Ad[0]||K!==Ad[1])F.sampleCoverage(qa,K),Ad[0]=qa,Ad[1]=K;ba=nc.stencil_enable;ba!==da.stencil_enable&&(ba?F.enable(2960):F.disable(2960),da.stencil_enable=ba);T=nc.stencil_mask;T!==da.stencil_mask&&(F.stencilMask(T),da.stencil_mask=T);Y=Qe[0];V=Qe[1];gb=Qe[2];if(Y!==Bd[0]||V!==Bd[1]||gb!==Bd[2])F.stencilFunc(Y,V,gb),Bd[0]=Y,Bd[1]=V,Bd[2]=gb;Eb=Wd[0];Ba=Wd[1];Xa=Wd[2];ha=Wd[3];if(Eb!==ae[0]||Ba!==
ae[1]||Xa!==ae[2]||ha!==ae[3])F.stencilOpSeparate(Eb,Ba,Xa,ha),ae[0]=Eb,ae[1]=Ba,ae[2]=Xa,ae[3]=ha;xb=Be[0];Gb=Be[1];Ta=Be[2];$b=Be[3];if(xb!==Vd[0]||Gb!==Vd[1]||Ta!==Vd[2]||$b!==Vd[3])F.stencilOpSeparate(xb,Gb,Ta,$b),Vd[0]=xb,Vd[1]=Gb,Vd[2]=Ta,Vd[3]=$b}F.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;F.disable(3042);da.blend_enable=!1;F.blendEquationSeparate(32774,32774);ge[0]=32774;ge[1]=32774;F.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;F.enable(2884);da.cull_enable=
!0;F.cullFace(1029);da.cull_face=1029;F.enable(2929);da.depth_enable=!0;F.depthFunc(513);da.depth_func=513;F.depthMask(!0);da.depth_mask=!0;F.depthRange(0,1);ve[0]=0;ve[1]=1;F.disable(3024);da.dither=!1;F.lineWidth(2);da.lineWidth=2;F.enable(3089);da.scissor_enable=!0;w=da.profile;da.profile=!1;F.useProgram(Bb.program);var Jc,Pc,qc,xa,xe,Ma,Tc,fb,ib,ya,Fc,Fa,qb,rb,Za,$a,hd,lc,sd,Wa,Nb,oc,Ha,$c,Sa,Ca,lb,ub,Cb,sb,Ed,vb,la;Fb.setVAO(null);Jc=cc.location;Pc=N[Jc];Pc.buffer||F.enableVertexAttribArray(Jc);
if(Pc.type!==D.dtype||4!==Pc.size||Pc.buffer!==D||!1!==Pc.normalized||0!==Pc.offset||0!==Pc.stride)F.bindBuffer(34962,D.buffer),F.vertexAttribPointer(Jc,4,D.dtype,!1,0,0),Pc.type=D.dtype,Pc.size=4,Pc.buffer=D,Pc.normalized=!1,Pc.offset=0,Pc.stride=0;qc=pc.location;xa=N[qc];xa.buffer||F.enableVertexAttribArray(qc);if(xa.type!==m.dtype||4!==xa.size||xa.buffer!==m||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)F.bindBuffer(34962,m.buffer),F.vertexAttribPointer(qc,4,m.dtype,!1,0,0),xa.type=m.dtype,
xa.size=4,xa.buffer=m,xa.normalized=!1,xa.offset=0,xa.stride=0;xe=jc.location;Ma=N[xe];Ma.buffer||F.enableVertexAttribArray(xe);if(Ma.type!==l.dtype||4!==Ma.size||Ma.buffer!==l||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)F.bindBuffer(34962,l.buffer),F.vertexAttribPointer(xe,4,l.dtype,!1,0,0),Ma.type=l.dtype,Ma.size=4,Ma.buffer=l,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;Tc=td.location;fb=N[Tc];fb.buffer||F.enableVertexAttribArray(Tc);if(fb.type!==f.dtype||4!==fb.size||fb.buffer!==f||!1!==fb.normalized||
0!==fb.offset||0!==fb.stride)F.bindBuffer(34962,f.buffer),F.vertexAttribPointer(Tc,4,f.dtype,!1,0,0),fb.type=f.dtype,fb.size=4,fb.buffer=f,fb.normalized=!1,fb.offset=0,fb.stride=0;ib=zc.location;ya=N[ib];ya.buffer||F.enableVertexAttribArray(ib);if(ya.type!==k.dtype||4!==ya.size||ya.buffer!==k||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)F.bindBuffer(34962,k.buffer),F.vertexAttribPointer(ib,4,k.dtype,!1,0,0),ya.type=k.dtype,ya.size=4,ya.buffer=k,ya.normalized=!1,ya.offset=0,ya.stride=0;Fc=aa.location;
Fa=N[Fc];Fa.buffer||F.enableVertexAttribArray(Fc);if(Fa.type!==b.dtype||4!==Fa.size||Fa.buffer!==b||!1!==Fa.normalized||0!==Fa.offset||0!==Fa.stride)F.bindBuffer(34962,b.buffer),F.vertexAttribPointer(Fc,4,b.dtype,!1,0,0),Fa.type=b.dtype,Fa.size=4,Fa.buffer=b,Fa.normalized=!1,Fa.offset=0,Fa.stride=0;qb=O.location;rb=N[qb];rb.buffer||F.enableVertexAttribArray(qb);if(rb.type!==q.dtype||4!==rb.size||rb.buffer!==q||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)F.bindBuffer(34962,q.buffer),F.vertexAttribPointer(qb,
4,q.dtype,!1,0,0),rb.type=q.dtype,rb.size=4,rb.buffer=q,rb.normalized=!1,rb.offset=0,rb.stride=0;Za=ka.location;$a=N[Za];$a.buffer||F.enableVertexAttribArray(Za);if($a.type!==C.dtype||4!==$a.size||$a.buffer!==C||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)F.bindBuffer(34962,C.buffer),F.vertexAttribPointer(Za,4,C.dtype,!1,0,0),$a.type=C.dtype,$a.size=4,$a.buffer=C,$a.normalized=!1,$a.offset=0,$a.stride=0;hd=Ga.location;lc=N[hd];lc.buffer||F.enableVertexAttribArray(hd);if(lc.type!==y.dtype||4!==
lc.size||lc.buffer!==y||!1!==lc.normalized||0!==lc.offset||0!==lc.stride)F.bindBuffer(34962,y.buffer),F.vertexAttribPointer(hd,4,y.dtype,!1,0,0),lc.type=y.dtype,lc.size=4,lc.buffer=y,lc.normalized=!1,lc.offset=0,lc.stride=0;sd=Kb.location;Wa=N[sd];Wa.buffer||F.enableVertexAttribArray(sd);if(Wa.type!==e.dtype||4!==Wa.size||Wa.buffer!==e||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)F.bindBuffer(34962,e.buffer),F.vertexAttribPointer(sd,4,e.dtype,!1,0,0),Wa.type=e.dtype,Wa.size=4,Wa.buffer=e,Wa.normalized=
!1,Wa.offset=0,Wa.stride=0;Nb=bd.location;oc=N[Nb];oc.buffer||F.enableVertexAttribArray(Nb);if(oc.type!==g.dtype||4!==oc.size||oc.buffer!==g||!1!==oc.normalized||0!==oc.offset||0!==oc.stride)F.bindBuffer(34962,g.buffer),F.vertexAttribPointer(Nb,4,g.dtype,!1,0,0),oc.type=g.dtype,oc.size=4,oc.buffer=g,oc.normalized=!1,oc.offset=0,oc.stride=0;Ha=Oc.location;$c=N[Ha];$c.buffer||F.enableVertexAttribArray(Ha);if($c.type!==p.dtype||4!==$c.size||$c.buffer!==p||!1!==$c.normalized||0!==$c.offset||0!==$c.stride)F.bindBuffer(34962,
p.buffer),F.vertexAttribPointer(Ha,4,p.dtype,!1,0,0),$c.type=p.dtype,$c.size=4,$c.buffer=p,$c.normalized=!1,$c.offset=0,$c.stride=0;Sa=J.location;Ca=N[Sa];Ca.buffer||F.enableVertexAttribArray(Sa);if(Ca.type!==n.dtype||4!==Ca.size||Ca.buffer!==n||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)F.bindBuffer(34962,n.buffer),F.vertexAttribPointer(Sa,4,n.dtype,!1,0,0),Ca.type=n.dtype,Ca.size=4,Ca.buffer=n,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;lb=G.location;ub=N[lb];ub.buffer||F.enableVertexAttribArray(lb);
if(ub.type!==r.dtype||4!==ub.size||ub.buffer!==r||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)F.bindBuffer(34962,r.buffer),F.vertexAttribPointer(lb,4,r.dtype,!1,0,0),ub.type=r.dtype,ub.size=4,ub.buffer=r,ub.normalized=!1,ub.offset=0,ub.stride=0;Cb=ia.location;sb=N[Cb];sb.buffer||F.enableVertexAttribArray(Cb);if(sb.type!==u.dtype||4!==sb.size||sb.buffer!==u||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)F.bindBuffer(34962,u.buffer),F.vertexAttribPointer(Cb,4,u.dtype,!1,0,0),sb.type=u.dtype,
sb.size=4,sb.buffer=u,sb.normalized=!1,sb.offset=0,sb.stride=0;Ed=Oa.location;vb=N[Ed];vb.buffer||F.enableVertexAttribArray(Ed);if(vb.type!==M.dtype||4!==vb.size||vb.buffer!==M||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)F.bindBuffer(34962,M.buffer),F.vertexAttribPointer(Ed,4,M.dtype,!1,0,0),vb.type=M.dtype,vb.size=4,vb.buffer=M,vb.normalized=!1,vb.offset=0,vb.stride=0;F.uniform1i(ua.location,oa.bind());(la=Aa.elements)?F.bindBuffer(34963,la.buffer.buffer):Fb.currentVAO&&(la=Da.getElements(Fb.currentVAO.elements))&&
F.bindBuffer(34963,la.buffer.buffer);for(x=0;x<a;++x){z=c[x];var je,fe,Yd,Id,Qa,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,xd,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be;nd.height=z.viewportHeight;nd.width=z.viewportWidth;nd.x=z.viewportX;nd.y=z.viewportY;je=nd.x|0;fe=nd.y|0;Yd="width"in nd?nd.width|0:H.framebufferWidth-je;Id="height"in nd?nd.height|0:H.framebufferHeight-fe;Qa=H.viewportWidth;H.viewportWidth=Yd;Wb=H.viewportHeight;
H.viewportHeight=Id;F.viewport(je,fe,Yd,Id);qd[0]=je;qd[1]=fe;qd[2]=Yd;qd[3]=Id;vd.height=z.scissorHeight;vd.width=z.scissorWidth;vd.x=z.scissorX;vd.y=z.scissorY;bc=vd.x|0;Rb=vd.y|0;Ia="width"in vd?vd.width|0:H.framebufferWidth-bc;Zb="height"in vd?vd.height|0:H.framebufferHeight-Rb;F.scissor(bc,Rb,Ia,Zb);Me[0]=bc;Me[1]=Rb;Me[2]=Ia;Me[3]=Zb;mb=z.dim0A;F.uniformMatrix4fv(P.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(rd[0]=mb[0],rd[1]=mb[1],rd[2]=mb[2],rd[3]=mb[3],rd[4]=mb[4],rd[5]=
mb[5],rd[6]=mb[6],rd[7]=mb[7],rd[8]=mb[8],rd[9]=mb[9],rd[10]=mb[10],rd[11]=mb[11],rd[12]=mb[12],rd[13]=mb[13],rd[14]=mb[14],rd[15]=mb[15],rd));wb=z.dim1A;F.uniformMatrix4fv(Q.location,!1,Array.isArray(wb)||wb instanceof Float32Array?wb:(Gc[0]=wb[0],Gc[1]=wb[1],Gc[2]=wb[2],Gc[3]=wb[3],Gc[4]=wb[4],Gc[5]=wb[5],Gc[6]=wb[6],Gc[7]=wb[7],Gc[8]=wb[8],Gc[9]=wb[9],Gc[10]=wb[10],Gc[11]=wb[11],Gc[12]=wb[12],Gc[13]=wb[13],Gc[14]=wb[14],Gc[15]=wb[15],Gc));Ob=z.dim0B;F.uniformMatrix4fv(L.location,!1,Array.isArray(Ob)||
Ob instanceof Float32Array?Ob:(dc[0]=Ob[0],dc[1]=Ob[1],dc[2]=Ob[2],dc[3]=Ob[3],dc[4]=Ob[4],dc[5]=Ob[5],dc[6]=Ob[6],dc[7]=Ob[7],dc[8]=Ob[8],dc[9]=Ob[9],dc[10]=Ob[10],dc[11]=Ob[11],dc[12]=Ob[12],dc[13]=Ob[13],dc[14]=Ob[14],dc[15]=Ob[15],dc));Sb=z.dim1B;F.uniformMatrix4fv(Pb.location,!1,Array.isArray(Sb)||Sb instanceof Float32Array?Sb:(Cc[0]=Sb[0],Cc[1]=Sb[1],Cc[2]=Sb[2],Cc[3]=Sb[3],Cc[4]=Sb[4],Cc[5]=Sb[5],Cc[6]=Sb[6],Cc[7]=Sb[7],Cc[8]=Sb[8],Cc[9]=Sb[9],Cc[10]=Sb[10],Cc[11]=Sb[11],Cc[12]=Sb[12],Cc[13]=
Sb[13],Cc[14]=Sb[14],Cc[15]=Sb[15],Cc));fc=z.dim0C;F.uniformMatrix4fv(U.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(Xc[0]=fc[0],Xc[1]=fc[1],Xc[2]=fc[2],Xc[3]=fc[3],Xc[4]=fc[4],Xc[5]=fc[5],Xc[6]=fc[6],Xc[7]=fc[7],Xc[8]=fc[8],Xc[9]=fc[9],Xc[10]=fc[10],Xc[11]=fc[11],Xc[12]=fc[12],Xc[13]=fc[13],Xc[14]=fc[14],Xc[15]=fc[15],Xc));hc=z.dim1C;F.uniformMatrix4fv(ab.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Yb[0]=hc[0],Yb[1]=hc[1],Yb[2]=hc[2],Yb[3]=hc[3],Yb[4]=hc[4],Yb[5]=
hc[5],Yb[6]=hc[6],Yb[7]=hc[7],Yb[8]=hc[8],Yb[9]=hc[9],Yb[10]=hc[10],Yb[11]=hc[11],Yb[12]=hc[12],Yb[13]=hc[13],Yb[14]=hc[14],Yb[15]=hc[15],Yb));xd=z.dim0D;F.uniformMatrix4fv(pa.location,!1,Array.isArray(xd)||xd instanceof Float32Array?xd:(Hc[0]=xd[0],Hc[1]=xd[1],Hc[2]=xd[2],Hc[3]=xd[3],Hc[4]=xd[4],Hc[5]=xd[5],Hc[6]=xd[6],Hc[7]=xd[7],Hc[8]=xd[8],Hc[9]=xd[9],Hc[10]=xd[10],Hc[11]=xd[11],Hc[12]=xd[12],Hc[13]=xd[13],Hc[14]=xd[14],Hc[15]=xd[15],Hc));xc=z.dim1D;F.uniformMatrix4fv(R.location,!1,Array.isArray(xc)||
xc instanceof Float32Array?xc:(Ya[0]=xc[0],Ya[1]=xc[1],Ya[2]=xc[2],Ya[3]=xc[3],Ya[4]=xc[4],Ya[5]=xc[5],Ya[6]=xc[6],Ya[7]=xc[7],Ya[8]=xc[8],Ya[9]=xc[9],Ya[10]=xc[10],Ya[11]=xc[11],Ya[12]=xc[12],Ya[13]=xc[13],Ya[14]=xc[14],Ya[15]=xc[15],Ya));yc=z.loA;F.uniformMatrix4fv(yb.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(Ea[0]=yc[0],Ea[1]=yc[1],Ea[2]=yc[2],Ea[3]=yc[3],Ea[4]=yc[4],Ea[5]=yc[5],Ea[6]=yc[6],Ea[7]=yc[7],Ea[8]=yc[8],Ea[9]=yc[9],Ea[10]=yc[10],Ea[11]=yc[11],Ea[12]=yc[12],Ea[13]=
yc[13],Ea[14]=yc[14],Ea[15]=yc[15],Ea));Ac=z.hiA;F.uniformMatrix4fv(ma.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(ud[0]=Ac[0],ud[1]=Ac[1],ud[2]=Ac[2],ud[3]=Ac[3],ud[4]=Ac[4],ud[5]=Ac[5],ud[6]=Ac[6],ud[7]=Ac[7],ud[8]=Ac[8],ud[9]=Ac[9],ud[10]=Ac[10],ud[11]=Ac[11],ud[12]=Ac[12],ud[13]=Ac[13],ud[14]=Ac[14],ud[15]=Ac[15],ud));Lc=z.loB;F.uniformMatrix4fv(Ka.location,!1,Array.isArray(Lc)||Lc instanceof Float32Array?Lc:(Hb[0]=Lc[0],Hb[1]=Lc[1],Hb[2]=Lc[2],Hb[3]=Lc[3],Hb[4]=Lc[4],Hb[5]=
Lc[5],Hb[6]=Lc[6],Hb[7]=Lc[7],Hb[8]=Lc[8],Hb[9]=Lc[9],Hb[10]=Lc[10],Hb[11]=Lc[11],Hb[12]=Lc[12],Hb[13]=Lc[13],Hb[14]=Lc[14],Hb[15]=Lc[15],Hb));Zc=z.hiB;F.uniformMatrix4fv(ea.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Ua[0]=Zc[0],Ua[1]=Zc[1],Ua[2]=Zc[2],Ua[3]=Zc[3],Ua[4]=Zc[4],Ua[5]=Zc[5],Ua[6]=Zc[6],Ua[7]=Zc[7],Ua[8]=Zc[8],Ua[9]=Zc[9],Ua[10]=Zc[10],Ua[11]=Zc[11],Ua[12]=Zc[12],Ua[13]=Zc[13],Ua[14]=Zc[14],Ua[15]=Zc[15],Ua));Rc=z.loC;F.uniformMatrix4fv(X.location,!1,Array.isArray(Rc)||
Rc instanceof Float32Array?Rc:(Lb[0]=Rc[0],Lb[1]=Rc[1],Lb[2]=Rc[2],Lb[3]=Rc[3],Lb[4]=Rc[4],Lb[5]=Rc[5],Lb[6]=Rc[6],Lb[7]=Rc[7],Lb[8]=Rc[8],Lb[9]=Rc[9],Lb[10]=Rc[10],Lb[11]=Rc[11],Lb[12]=Rc[12],Lb[13]=Rc[13],Lb[14]=Rc[14],Lb[15]=Rc[15],Lb));Mc=z.hiC;F.uniformMatrix4fv(wa.location,!1,Array.isArray(Mc)||Mc instanceof Float32Array?Mc:(cb[0]=Mc[0],cb[1]=Mc[1],cb[2]=Mc[2],cb[3]=Mc[3],cb[4]=Mc[4],cb[5]=Mc[5],cb[6]=Mc[6],cb[7]=Mc[7],cb[8]=Mc[8],cb[9]=Mc[9],cb[10]=Mc[10],cb[11]=Mc[11],cb[12]=Mc[12],cb[13]=
Mc[13],cb[14]=Mc[14],cb[15]=Mc[15],cb));Jb=z.loD;F.uniformMatrix4fv(nb.location,!1,Array.isArray(Jb)||Jb instanceof Float32Array?Jb:(Dc[0]=Jb[0],Dc[1]=Jb[1],Dc[2]=Jb[2],Dc[3]=Jb[3],Dc[4]=Jb[4],Dc[5]=Jb[5],Dc[6]=Jb[6],Dc[7]=Jb[7],Dc[8]=Jb[8],Dc[9]=Jb[9],Dc[10]=Jb[10],Dc[11]=Jb[11],Dc[12]=Jb[12],Dc[13]=Jb[13],Dc[14]=Jb[14],Dc[15]=Jb[15],Dc));Db=z.hiD;F.uniformMatrix4fv(La.location,!1,Array.isArray(Db)||Db instanceof Float32Array?Db:(ac[0]=Db[0],ac[1]=Db[1],ac[2]=Db[2],ac[3]=Db[3],ac[4]=Db[4],ac[5]=
Db[5],ac[6]=Db[6],ac[7]=Db[7],ac[8]=Db[8],ac[9]=Db[9],ac[10]=Db[10],ac[11]=Db[11],ac[12]=Db[12],ac[13]=Db[13],ac[14]=Db[14],ac[15]=Db[15],ac));Nc=z.resolution;Ec=Nc[0];gc=Nc[1];x&&Sc===Ec&&Vc===gc||(Sc=Ec,Vc=gc,F.uniform2f(Z.location,Ec,gc));gd=z.viewBoxPos;kd=gd[0];Wc=gd[1];x&&md===kd&&bf===Wc||(md=kd,bf=Wc,F.uniform2f(fa.location,kd,Wc));Zd=z.viewBoxSize;ke=Zd[0];me=Zd[1];x&&se===ke&&Md===me||(se=ke,Md=me,F.uniform2f(ta.location,ke,me));Kd=z.maskHeight;x&&id===Kd||(id=Kd,F.uniform1f(ga.location,
Kd));Bc=z.drwLayer;x&&od===Bc||(od=Bc,F.uniform1f(E.location,Bc));ld=z.contextColor;ad=ld[0];Gd=ld[1];te=ld[2];Ae=ld[3];x&&pd===ad&&Hd===Gd&&ze===te&&ne===Ae||(pd=ad,Hd=Gd,ze=te,ne=Ae,F.uniform4f(W.location,ad,Gd,te,Ae));(ee=z.maskTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);de=ee._texture;F.uniform1i(ra.location,de.bind());pe=z.offset;if(be=z.count)la?F.drawElements(1,be,la.type,pe<<(la.type-5121>>1)):F.drawArrays(1,pe,be),H.viewportWidth=Qa,H.viewportHeight=Wb,de.unbind()}oa.unbind();
da.dirty=!0;Fb.setVAO(null);da.profile=w},draw:function(c){var a,x,v,h,B,sa;a=Ja.next;a!==Ja.cur&&(a?F.bindFramebuffer(36160,a.framebuffer):F.bindFramebuffer(36160,null),Ja.cur=a);if(da.dirty){a=ue[0];sa=ue[1];x=ue[2];v=ue[3];if(a!==Od[0]||sa!==Od[1]||x!==Od[2]||v!==Od[3])F.colorMask(a,sa,x,v),Od[0]=a,Od[1]=sa,Od[2]=x,Od[3]=v;a=nc.frontFace;a!==da.frontFace&&(F.frontFace(a),da.frontFace=a);a=nc.polygonOffset_enable;a!==da.polygonOffset_enable&&(a?F.enable(32823):F.disable(32823),da.polygonOffset_enable=
a);a=yd[0];sa=yd[1];if(a!==Dd[0]||sa!==Dd[1])F.polygonOffset(a,sa),Dd[0]=a,Dd[1]=sa;a=nc.sample_alpha;a!==da.sample_alpha&&(a?F.enable(32926):F.disable(32926),da.sample_alpha=a);a=nc.sample_enable;a!==da.sample_enable&&(a?F.enable(32928):F.disable(32928),da.sample_enable=a);a=zd[0];sa=zd[1];if(a!==Ad[0]||sa!==Ad[1])F.sampleCoverage(a,sa),Ad[0]=a,Ad[1]=sa;a=nc.stencil_enable;a!==da.stencil_enable&&(a?F.enable(2960):F.disable(2960),da.stencil_enable=a);a=nc.stencil_mask;a!==da.stencil_mask&&(F.stencilMask(a),
da.stencil_mask=a);a=Qe[0];sa=Qe[1];x=Qe[2];if(a!==Bd[0]||sa!==Bd[1]||x!==Bd[2])F.stencilFunc(a,sa,x),Bd[0]=a,Bd[1]=sa,Bd[2]=x;a=Wd[0];sa=Wd[1];x=Wd[2];v=Wd[3];if(a!==ae[0]||sa!==ae[1]||x!==ae[2]||v!==ae[3])F.stencilOpSeparate(a,sa,x,v),ae[0]=a,ae[1]=sa,ae[2]=x,ae[3]=v;a=Be[0];sa=Be[1];x=Be[2];v=Be[3];if(a!==Vd[0]||sa!==Vd[1]||x!==Vd[2]||v!==Vd[3])F.stencilOpSeparate(a,sa,x,v),Vd[0]=a,Vd[1]=sa,Vd[2]=x,Vd[3]=v}nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;x=
nd.x|0;v=nd.y|0;h="width"in nd?nd.width|0:H.framebufferWidth-x;B="height"in nd?nd.height|0:H.framebufferHeight-v;a=H.viewportWidth;H.viewportWidth=h;sa=H.viewportHeight;H.viewportHeight=B;F.viewport(x,v,h,B);qd[0]=x;qd[1]=v;qd[2]=h;qd[3]=B;F.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;F.disable(3042);da.blend_enable=!1;F.blendEquationSeparate(32774,32774);ge[0]=32774;ge[1]=32774;F.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;F.enable(2884);da.cull_enable=!0;F.cullFace(1029);
da.cull_face=1029;F.enable(2929);da.depth_enable=!0;F.depthFunc(513);da.depth_func=513;F.depthMask(!0);da.depth_mask=!0;F.depthRange(0,1);ve[0]=0;ve[1]=1;F.disable(3024);da.dither=!1;F.lineWidth(2);da.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;x=vd.x|0;v=vd.y|0;h="width"in vd?vd.width|0:H.framebufferWidth-x;B="height"in vd?vd.height|0:H.framebufferHeight-v;F.scissor(x,v,h,B);Me[0]=x;Me[1]=v;Me[2]=h;Me[3]=B;F.enable(3089);da.scissor_enable=!0;x=da.profile;
da.profile=!1;F.useProgram(d.program);Fb.setVAO(null);v=cc.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==D.dtype||4!==h.size||h.buffer!==D||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,D.buffer),F.vertexAttribPointer(v,4,D.dtype,!1,0,0),h.type=D.dtype,h.size=4,h.buffer=D,h.normalized=!1,h.offset=0,h.stride=0;v=pc.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==m.dtype||4!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,
m.buffer),F.vertexAttribPointer(v,4,m.dtype,!1,0,0),h.type=m.dtype,h.size=4,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;v=jc.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==l.dtype||4!==h.size||h.buffer!==l||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,l.buffer),F.vertexAttribPointer(v,4,l.dtype,!1,0,0),h.type=l.dtype,h.size=4,h.buffer=l,h.normalized=!1,h.offset=0,h.stride=0;v=td.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==f.dtype||
4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,f.buffer),F.vertexAttribPointer(v,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;v=zc.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,k.buffer),F.vertexAttribPointer(v,4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,h.normalized=!1,h.offset=0,
h.stride=0;v=aa.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==b.dtype||4!==h.size||h.buffer!==b||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,b.buffer),F.vertexAttribPointer(v,4,b.dtype,!1,0,0),h.type=b.dtype,h.size=4,h.buffer=b,h.normalized=!1,h.offset=0,h.stride=0;v=O.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==q.dtype||4!==h.size||h.buffer!==q||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,q.buffer),F.vertexAttribPointer(v,
4,q.dtype,!1,0,0),h.type=q.dtype,h.size=4,h.buffer=q,h.normalized=!1,h.offset=0,h.stride=0;v=ka.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==C.dtype||4!==h.size||h.buffer!==C||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,C.buffer),F.vertexAttribPointer(v,4,C.dtype,!1,0,0),h.type=C.dtype,h.size=4,h.buffer=C,h.normalized=!1,h.offset=0,h.stride=0;v=Ga.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==y.dtype||4!==h.size||h.buffer!==y||!1!==h.normalized||
0!==h.offset||0!==h.stride)F.bindBuffer(34962,y.buffer),F.vertexAttribPointer(v,4,y.dtype,!1,0,0),h.type=y.dtype,h.size=4,h.buffer=y,h.normalized=!1,h.offset=0,h.stride=0;v=Kb.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==e.dtype||4!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,e.buffer),F.vertexAttribPointer(v,4,e.dtype,!1,0,0),h.type=e.dtype,h.size=4,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;v=bd.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);
if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,g.buffer),F.vertexAttribPointer(v,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;v=Oc.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==p.dtype||4!==h.size||h.buffer!==p||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,p.buffer),F.vertexAttribPointer(v,4,p.dtype,!1,0,0),h.type=p.dtype,h.size=4,h.buffer=p,h.normalized=
!1,h.offset=0,h.stride=0;v=J.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,n.buffer),F.vertexAttribPointer(v,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,h.normalized=!1,h.offset=0,h.stride=0;v=G.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==r.dtype||4!==h.size||h.buffer!==r||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,r.buffer),
F.vertexAttribPointer(v,4,r.dtype,!1,0,0),h.type=r.dtype,h.size=4,h.buffer=r,h.normalized=!1,h.offset=0,h.stride=0;v=ia.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,u.buffer),F.vertexAttribPointer(v,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;v=Oa.location;h=N[v];h.buffer||F.enableVertexAttribArray(v);if(h.type!==M.dtype||4!==h.size||
h.buffer!==M||!1!==h.normalized||0!==h.offset||0!==h.stride)F.bindBuffer(34962,M.buffer),F.vertexAttribPointer(v,4,M.dtype,!1,0,0),h.type=M.dtype,h.size=4,h.buffer=M,h.normalized=!1,h.offset=0,h.stride=0;v=c.dim0A;F.uniformMatrix4fv(P.location,!1,Array.isArray(v)||v instanceof Float32Array?v:($c[0]=v[0],$c[1]=v[1],$c[2]=v[2],$c[3]=v[3],$c[4]=v[4],$c[5]=v[5],$c[6]=v[6],$c[7]=v[7],$c[8]=v[8],$c[9]=v[9],$c[10]=v[10],$c[11]=v[11],$c[12]=v[12],$c[13]=v[13],$c[14]=v[14],$c[15]=v[15],$c));v=c.dim1A;F.uniformMatrix4fv(Q.location,
!1,Array.isArray(v)||v instanceof Float32Array?v:(sd[0]=v[0],sd[1]=v[1],sd[2]=v[2],sd[3]=v[3],sd[4]=v[4],sd[5]=v[5],sd[6]=v[6],sd[7]=v[7],sd[8]=v[8],sd[9]=v[9],sd[10]=v[10],sd[11]=v[11],sd[12]=v[12],sd[13]=v[13],sd[14]=v[14],sd[15]=v[15],sd));v=c.dim0B;F.uniformMatrix4fv(L.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Tc[0]=v[0],Tc[1]=v[1],Tc[2]=v[2],Tc[3]=v[3],Tc[4]=v[4],Tc[5]=v[5],Tc[6]=v[6],Tc[7]=v[7],Tc[8]=v[8],Tc[9]=v[9],Tc[10]=v[10],Tc[11]=v[11],Tc[12]=v[12],Tc[13]=v[13],Tc[14]=
v[14],Tc[15]=v[15],Tc));v=c.dim1B;F.uniformMatrix4fv(Pb.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Ed[0]=v[0],Ed[1]=v[1],Ed[2]=v[2],Ed[3]=v[3],Ed[4]=v[4],Ed[5]=v[5],Ed[6]=v[6],Ed[7]=v[7],Ed[8]=v[8],Ed[9]=v[9],Ed[10]=v[10],Ed[11]=v[11],Ed[12]=v[12],Ed[13]=v[13],Ed[14]=v[14],Ed[15]=v[15],Ed));v=c.dim0C;F.uniformMatrix4fv(U.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Pc[0]=v[0],Pc[1]=v[1],Pc[2]=v[2],Pc[3]=v[3],Pc[4]=v[4],Pc[5]=v[5],Pc[6]=v[6],Pc[7]=v[7],Pc[8]=v[8],Pc[9]=
v[9],Pc[10]=v[10],Pc[11]=v[11],Pc[12]=v[12],Pc[13]=v[13],Pc[14]=v[14],Pc[15]=v[15],Pc));v=c.dim1C;F.uniformMatrix4fv(ab.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Jc[0]=v[0],Jc[1]=v[1],Jc[2]=v[2],Jc[3]=v[3],Jc[4]=v[4],Jc[5]=v[5],Jc[6]=v[6],Jc[7]=v[7],Jc[8]=v[8],Jc[9]=v[9],Jc[10]=v[10],Jc[11]=v[11],Jc[12]=v[12],Jc[13]=v[13],Jc[14]=v[14],Jc[15]=v[15],Jc));v=c.dim0D;F.uniformMatrix4fv(pa.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(qc[0]=v[0],qc[1]=v[1],qc[2]=v[2],qc[3]=
v[3],qc[4]=v[4],qc[5]=v[5],qc[6]=v[6],qc[7]=v[7],qc[8]=v[8],qc[9]=v[9],qc[10]=v[10],qc[11]=v[11],qc[12]=v[12],qc[13]=v[13],qc[14]=v[14],qc[15]=v[15],qc));v=c.dim1D;F.uniformMatrix4fv(R.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(gb[0]=v[0],gb[1]=v[1],gb[2]=v[2],gb[3]=v[3],gb[4]=v[4],gb[5]=v[5],gb[6]=v[6],gb[7]=v[7],gb[8]=v[8],gb[9]=v[9],gb[10]=v[10],gb[11]=v[11],gb[12]=v[12],gb[13]=v[13],gb[14]=v[14],gb[15]=v[15],gb));v=c.loA;F.uniformMatrix4fv(yb.location,!1,Array.isArray(v)||v instanceof
Float32Array?v:(hd[0]=v[0],hd[1]=v[1],hd[2]=v[2],hd[3]=v[3],hd[4]=v[4],hd[5]=v[5],hd[6]=v[6],hd[7]=v[7],hd[8]=v[8],hd[9]=v[9],hd[10]=v[10],hd[11]=v[11],hd[12]=v[12],hd[13]=v[13],hd[14]=v[14],hd[15]=v[15],hd));v=c.hiA;F.uniformMatrix4fv(ma.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Gb[0]=v[0],Gb[1]=v[1],Gb[2]=v[2],Gb[3]=v[3],Gb[4]=v[4],Gb[5]=v[5],Gb[6]=v[6],Gb[7]=v[7],Gb[8]=v[8],Gb[9]=v[9],Gb[10]=v[10],Gb[11]=v[11],Gb[12]=v[12],Gb[13]=v[13],Gb[14]=v[14],Gb[15]=v[15],Gb));v=c.loB;F.uniformMatrix4fv(Ka.location,
!1,Array.isArray(v)||v instanceof Float32Array?v:(oc[0]=v[0],oc[1]=v[1],oc[2]=v[2],oc[3]=v[3],oc[4]=v[4],oc[5]=v[5],oc[6]=v[6],oc[7]=v[7],oc[8]=v[8],oc[9]=v[9],oc[10]=v[10],oc[11]=v[11],oc[12]=v[12],oc[13]=v[13],oc[14]=v[14],oc[15]=v[15],oc));v=c.hiB;F.uniformMatrix4fv(ea.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Xa[0]=v[0],Xa[1]=v[1],Xa[2]=v[2],Xa[3]=v[3],Xa[4]=v[4],Xa[5]=v[5],Xa[6]=v[6],Xa[7]=v[7],Xa[8]=v[8],Xa[9]=v[9],Xa[10]=v[10],Xa[11]=v[11],Xa[12]=v[12],Xa[13]=v[13],Xa[14]=
v[14],Xa[15]=v[15],Xa));v=c.loC;F.uniformMatrix4fv(X.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Fc[0]=v[0],Fc[1]=v[1],Fc[2]=v[2],Fc[3]=v[3],Fc[4]=v[4],Fc[5]=v[5],Fc[6]=v[6],Fc[7]=v[7],Fc[8]=v[8],Fc[9]=v[9],Fc[10]=v[10],Fc[11]=v[11],Fc[12]=v[12],Fc[13]=v[13],Fc[14]=v[14],Fc[15]=v[15],Fc));v=c.hiC;F.uniformMatrix4fv(wa.location,!1,Array.isArray(v)||v instanceof Float32Array?v:($b[0]=v[0],$b[1]=v[1],$b[2]=v[2],$b[3]=v[3],$b[4]=v[4],$b[5]=v[5],$b[6]=v[6],$b[7]=v[7],$b[8]=v[8],$b[9]=v[9],
$b[10]=v[10],$b[11]=v[11],$b[12]=v[12],$b[13]=v[13],$b[14]=v[14],$b[15]=v[15],$b));v=c.loD;F.uniformMatrix4fv(nb.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(lc[0]=v[0],lc[1]=v[1],lc[2]=v[2],lc[3]=v[3],lc[4]=v[4],lc[5]=v[5],lc[6]=v[6],lc[7]=v[7],lc[8]=v[8],lc[9]=v[9],lc[10]=v[10],lc[11]=v[11],lc[12]=v[12],lc[13]=v[13],lc[14]=v[14],lc[15]=v[15],lc));v=c.hiD;F.uniformMatrix4fv(La.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Id[0]=v[0],Id[1]=v[1],Id[2]=v[2],Id[3]=v[3],Id[4]=
v[4],Id[5]=v[5],Id[6]=v[6],Id[7]=v[7],Id[8]=v[8],Id[9]=v[9],Id[10]=v[10],Id[11]=v[11],Id[12]=v[12],Id[13]=v[13],Id[14]=v[14],Id[15]=v[15],Id));v=c.resolution;F.uniform2f(Z.location,v[0],v[1]);v=c.viewBoxPos;F.uniform2f(fa.location,v[0],v[1]);v=c.viewBoxSize;F.uniform2f(ta.location,v[0],v[1]);F.uniform1f(ga.location,c.maskHeight);F.uniform1f(E.location,c.drwLayer);v=c.contextColor;F.uniform4f(W.location,v[0],v[1],v[2],v[3]);(v=c.maskTexture)&&"framebuffer"===v._reglType&&(v=v.color[0]);v=v._texture;
F.uniform1i(ra.location,v.bind());F.uniform1i(ua.location,w.bind());(h=Aa.elements)?F.bindBuffer(34963,h.buffer.buffer):Fb.currentVAO&&(h=Da.getElements(Fb.currentVAO.elements))&&F.bindBuffer(34963,h.buffer.buffer);B=c.offset;if(c=c.count)h?F.drawElements(1,c,h.type,B<<(h.type-5121>>1)):F.drawArrays(1,B,c),da.dirty=!0,Fb.setVAO(null),H.viewportWidth=a,H.viewportHeight=sa,da.profile=x,v.unbind(),w.unbind()},scope:function(c,a,d){var w,z,F,E,G,O,N,J,aa,L,P,Q,U,R,X,Z,fa,ka,W,ia,ea,ga,ma,Da,ua,Ea,pc,
gb,Ja,ta,Xa,xa,Ga,oa,Yb,Ad,Gb,ya,Pc,Fa,Fb,Ya,Wd,$b,Cc,Jc,pa,dc,Ua,Hc,Ha,qc,Sa,Ca,lc,Xc,td,ra,Hb,cb,Tc,oc,Bd,Vd,$c,Fc,hd,Gc,Lb,Ia,Kb,mb,wb,qd,sd,ae,bd,ac,Ed,zc,ud,Dc,Od,wa,rd,Jb,Db,Ye,ge,yd,Me,Be,Id,cc,Oa,Qe,ab,jc,zd,ue,La,nb,Dd,we,Bc,Pb,ve,Ka,Oc,yb,Bb,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,
dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;w=nd.x|0;z=nd.y|0;F="width"in nd?nd.width|0:H.framebufferWidth-w;E="height"in nd?nd.height|0:H.framebufferHeight-z;G=H.viewportWidth;H.viewportWidth=
F;O=H.viewportHeight;H.viewportHeight=E;N=Yd[0];Yd[0]=w;J=Yd[1];Yd[1]=z;aa=Yd[2];Yd[2]=F;L=Yd[3];Yd[3]=E;P=xb[0];xb[0]=0;Q=xb[1];xb[1]=0;U=xb[2];xb[2]=0;R=xb[3];xb[3]=0;X=nc.blend_enable;nc.blend_enable=!1;Z=xd[0];xd[0]=32774;fa=xd[1];xd[1]=32774;ka=je[0];je[0]=770;W=je[1];je[1]=771;ia=je[2];je[2]=1;ea=je[3];je[3]=1;ga=nc.cull_enable;nc.cull_enable=!0;ma=nc.cull_face;nc.cull_face=1029;Da=nc.depth_enable;nc.depth_enable=!0;ua=nc.depth_func;nc.depth_func=513;Ea=nc.depth_mask;nc.depth_mask=!0;pc=fe[0];
fe[0]=0;gb=fe[1];fe[1]=1;Ja=nc.dither;nc.dither=!1;ta=nc.lineWidth;nc.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;Xa=vd.x|0;xa=vd.y|0;Ga="width"in vd?vd.width|0:H.framebufferWidth-Xa;oa="height"in vd?vd.height|0:H.framebufferHeight-xa;Yb=xe[0];xe[0]=Xa;Ad=xe[1];xe[1]=xa;Gb=xe[2];xe[2]=Ga;ya=xe[3];xe[3]=oa;Pc=nc.scissor_enable;nc.scissor_enable=!0;Fa=da.profile;da.profile=!1;Fb=c.offset;Ya=Aa.offset;Aa.offset=Fb;Wd=c.count;$b=Aa.count;Aa.count=Wd;Cc=
Aa.primitive;Aa.primitive=1;Jc=c.contextColor;pa=qa[24];qa[24]=Jc;dc=c.dim0A;Ua=qa[3];qa[3]=dc;Hc=c.dim0B;Ha=qa[5];qa[5]=Hc;qc=c.dim0C;Sa=qa[7];qa[7]=qc;Ca=c.dim0D;lc=qa[9];qa[9]=Ca;Xc=c.dim1A;td=qa[4];qa[4]=Xc;ra=c.dim1B;Hb=qa[6];qa[6]=ra;cb=c.dim1C;Tc=qa[8];qa[8]=cb;oc=c.dim1D;Bd=qa[10];qa[10]=oc;Vd=c.drwLayer;$c=qa[23];qa[23]=Vd;Fc=c.hiA;hd=qa[12];qa[12]=Fc;Gc=c.hiB;Lb=qa[14];qa[14]=Gc;Ia=c.hiC;Kb=qa[16];qa[16]=Ia;mb=c.hiD;wb=qa[18];qa[18]=mb;qd=c.loA;sd=qa[11];qa[11]=qd;ae=c.loB;bd=qa[13];qa[13]=
ae;ac=c.loC;Ed=qa[15];qa[15]=ac;zc=c.loD;ud=qa[17];qa[17]=zc;Dc=c.maskHeight;Od=qa[22];qa[22]=Dc;wa=c.maskTexture;rd=qa[25];qa[25]=wa;Jb=qa[26];qa[26]=h;Db=c.resolution;Ye=qa[19];qa[19]=Db;ge=c.viewBoxPos;yd=qa[20];qa[20]=ge;Me=c.viewBoxSize;Be=qa[21];qa[21]=Me;Id=x.buffer;x.buffer=M;cc=x.divisor;x.divisor=0;Oa=x.normalized;x.normalized=!1;Qe=x.offset;x.offset=0;ab=x.size;x.size=0;jc=x.state;x.state=1;zd=x.stride;x.stride=0;ue=x.type;x.type=M.dtype;La=x.w;x.w=0;nb=x.x;x.x=0;Dd=x.y;x.y=0;we=x.z;x.z=
0;Bc=B.buffer;B.buffer=D;Pb=B.divisor;B.divisor=0;ve=B.normalized;B.normalized=!1;Ka=B.offset;B.offset=0;Oc=B.size;B.size=0;yb=B.state;B.state=1;Bb=B.stride;B.stride=0;te=B.type;B.type=D.dtype;ze=B.w;B.w=0;Ae=B.x;B.x=0;ne=B.y;B.y=0;ee=B.z;B.z=0;de=ca.buffer;ca.buffer=m;pe=ca.divisor;ca.divisor=0;be=ca.normalized;ca.normalized=!1;he=ca.offset;ca.offset=0;wc=ca.size;ca.size=0;Uc=ca.state;ca.state=1;qe=ca.stride;ca.stride=0;le=ca.type;ca.type=m.dtype;Ld=ca.w;ca.w=0;Pd=ca.x;ca.x=0;Qd=ca.y;ca.y=0;Rd=ca.z;
ca.z=0;ie=na.buffer;na.buffer=l;vf=na.divisor;na.divisor=0;Ce=na.normalized;na.normalized=!1;oe=na.offset;na.offset=0;Re=na.size;na.size=0;Se=na.state;na.state=1;Ne=na.stride;na.stride=0;re=na.type;na.type=l.dtype;Fe=na.w;na.w=0;He=na.x;na.x=0;Ie=na.y;na.y=0;Je=na.z;na.z=0;Ge=t.buffer;t.buffer=f;Nd=t.divisor;t.divisor=0;Ud=t.normalized;t.normalized=!1;$d=t.offset;t.offset=0;ce=t.size;t.size=0;Ke=t.state;t.state=1;Cd=t.stride;t.stride=0;Sd=t.type;t.type=f.dtype;De=t.w;t.w=0;Le=t.x;t.x=0;cf=t.y;t.y=
0;af=t.z;t.z=0;Te=ba.buffer;ba.buffer=k;Oe=ba.divisor;ba.divisor=0;$e=ba.normalized;ba.normalized=!1;Xe=ba.offset;ba.offset=0;Ue=ba.size;ba.size=0;Ve=ba.state;ba.state=1;Td=ba.stride;ba.stride=0;Xd=ba.type;ba.type=k.dtype;We=ba.w;ba.w=0;jf=ba.x;ba.x=0;nf=ba.y;ba.y=0;ff=ba.z;ba.z=0;kf=A.buffer;A.buffer=b;lf=A.divisor;A.divisor=0;mf=A.normalized;A.normalized=!1;rf=A.offset;A.offset=0;of=A.size;A.size=0;sf=A.state;A.state=1;Cf=A.stride;A.stride=0;Df=A.type;A.type=b.dtype;Pe=A.w;A.w=0;Ee=A.x;A.x=0;pf=
A.y;A.y=0;qf=A.z;A.z=0;Ef=Y.buffer;Y.buffer=q;Hf=Y.divisor;Y.divisor=0;Bf=Y.normalized;Y.normalized=!1;Ff=Y.offset;Y.offset=0;Gf=Y.size;Y.size=0;xf=Y.state;Y.state=1;yf=Y.stride;Y.stride=0;wf=Y.type;Y.type=q.dtype;zf=Y.w;Y.w=0;Af=Y.x;Y.x=0;Jf=Y.y;Y.y=0;Kf=Y.z;Y.z=0;Lf=I.buffer;I.buffer=C;Mf=I.divisor;I.divisor=0;tf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;If=I.size;I.size=0;uf=I.state;I.state=1;dg=I.stride;I.stride=0;Sf=I.type;I.type=C.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;gf=I.y;I.y=0;df=I.z;
I.z=0;Nf=V.buffer;V.buffer=y;Of=V.divisor;V.divisor=0;eg=V.normalized;V.normalized=!1;fg=V.offset;V.offset=0;gg=V.size;V.size=0;hg=V.state;V.state=1;ig=V.stride;V.stride=0;Wf=V.type;V.type=y.dtype;Uf=V.w;V.w=0;Xf=V.x;V.x=0;Yf=V.y;V.y=0;Zf=V.z;V.z=0;jg=K.buffer;K.buffer=e;rg=K.divisor;K.divisor=0;sg=K.normalized;K.normalized=!1;tg=K.offset;K.offset=0;ug=K.size;K.size=0;vg=K.state;K.state=1;wg=K.stride;K.stride=0;xg=K.type;K.type=e.dtype;yg=K.w;K.w=0;zg=K.x;K.x=0;Ag=K.y;K.y=0;Bg=K.z;K.z=0;hf=ja.buffer;
ja.buffer=g;ef=ja.divisor;ja.divisor=0;Pf=ja.normalized;ja.normalized=!1;Qf=ja.offset;ja.offset=0;kg=ja.size;ja.size=0;lg=ja.state;ja.state=1;mg=ja.stride;ja.stride=0;ng=ja.type;ja.type=g.dtype;og=ja.w;ja.w=0;$f=ja.x;ja.x=0;Vf=ja.y;ja.y=0;ag=ja.z;ja.z=0;bg=T.buffer;T.buffer=p;cg=T.divisor;T.divisor=0;pg=T.normalized;T.normalized=!1;Cg=T.offset;T.offset=0;Dg=T.size;T.size=0;Eg=T.state;T.state=1;Fg=T.stride;T.stride=0;Gg=T.type;T.type=p.dtype;Hg=T.w;T.w=0;Ig=T.x;T.x=0;Jg=T.y;T.y=0;Kg=T.z;T.z=0;Lg=ha.buffer;
ha.buffer=n;Mg=ha.divisor;ha.divisor=0;Ng=ha.normalized;ha.normalized=!1;Og=ha.offset;ha.offset=0;Pg=ha.size;ha.size=0;Qg=ha.state;ha.state=1;Rg=ha.stride;ha.stride=0;Sg=ha.type;ha.type=n.dtype;Tg=ha.w;ha.w=0;Ug=ha.x;ha.x=0;Vg=ha.y;ha.y=0;Wg=ha.z;ha.z=0;Xg=la.buffer;la.buffer=r;Yg=la.divisor;la.divisor=0;Zg=la.normalized;la.normalized=!1;$g=la.offset;la.offset=0;ah=la.size;la.size=0;bh=la.state;la.state=1;ch=la.stride;la.stride=0;dh=la.type;la.type=r.dtype;eh=la.w;la.w=0;fh=la.x;la.x=0;gh=la.y;la.y=
0;hh=la.z;la.z=0;ih=Qa.buffer;Qa.buffer=u;jh=Qa.divisor;Qa.divisor=0;kh=Qa.normalized;Qa.normalized=!1;lh=Qa.offset;Qa.offset=0;mh=Qa.size;Qa.size=0;nh=Qa.state;Qa.state=1;oh=Qa.stride;Qa.stride=0;ph=Qa.type;Qa.type=u.dtype;qh=Qa.w;Qa.w=0;rh=Qa.x;Qa.x=0;sh=Qa.y;Qa.y=0;th=Qa.z;Qa.z=0;uh=Eb.vert;Eb.vert=2;vh=Eb.frag;Eb.frag=1;da.dirty=!0;a(H,c,d);H.viewportWidth=G;H.viewportHeight=O;Yd[0]=N;Yd[1]=J;Yd[2]=aa;Yd[3]=L;xb[0]=P;xb[1]=Q;xb[2]=U;xb[3]=R;nc.blend_enable=X;xd[0]=Z;xd[1]=fa;je[0]=ka;je[1]=W;
je[2]=ia;je[3]=ea;nc.cull_enable=ga;nc.cull_face=ma;nc.depth_enable=Da;nc.depth_func=ua;nc.depth_mask=Ea;fe[0]=pc;fe[1]=gb;nc.dither=Ja;nc.lineWidth=ta;xe[0]=Yb;xe[1]=Ad;xe[2]=Gb;xe[3]=ya;nc.scissor_enable=Pc;da.profile=Fa;Aa.offset=Ya;Aa.count=$b;Aa.primitive=Cc;qa[24]=pa;qa[3]=Ua;qa[5]=Ha;qa[7]=Sa;qa[9]=lc;qa[4]=td;qa[6]=Hb;qa[8]=Tc;qa[10]=Bd;qa[23]=$c;qa[12]=hd;qa[14]=Lb;qa[16]=Kb;qa[18]=wb;qa[11]=sd;qa[13]=bd;qa[15]=Ed;qa[17]=ud;qa[22]=Od;qa[25]=rd;qa[26]=Jb;qa[19]=Ye;qa[20]=yd;qa[21]=Be;x.buffer=
Id;x.divisor=cc;x.normalized=Oa;x.offset=Qe;x.size=ab;x.state=jc;x.stride=zd;x.type=ue;x.w=La;x.x=nb;x.y=Dd;x.z=we;B.buffer=Bc;B.divisor=Pb;B.normalized=ve;B.offset=Ka;B.size=Oc;B.state=yb;B.stride=Bb;B.type=te;B.w=ze;B.x=Ae;B.y=ne;B.z=ee;ca.buffer=de;ca.divisor=pe;ca.normalized=be;ca.offset=he;ca.size=wc;ca.state=Uc;ca.stride=qe;ca.type=le;ca.w=Ld;ca.x=Pd;ca.y=Qd;ca.z=Rd;na.buffer=ie;na.divisor=vf;na.normalized=Ce;na.offset=oe;na.size=Re;na.state=Se;na.stride=Ne;na.type=re;na.w=Fe;na.x=He;na.y=Ie;
na.z=Je;t.buffer=Ge;t.divisor=Nd;t.normalized=Ud;t.offset=$d;t.size=ce;t.state=Ke;t.stride=Cd;t.type=Sd;t.w=De;t.x=Le;t.y=cf;t.z=af;ba.buffer=Te;ba.divisor=Oe;ba.normalized=$e;ba.offset=Xe;ba.size=Ue;ba.state=Ve;ba.stride=Td;ba.type=Xd;ba.w=We;ba.x=jf;ba.y=nf;ba.z=ff;A.buffer=kf;A.divisor=lf;A.normalized=mf;A.offset=rf;A.size=of;A.state=sf;A.stride=Cf;A.type=Df;A.w=Pe;A.x=Ee;A.y=pf;A.z=qf;Y.buffer=Ef;Y.divisor=Hf;Y.normalized=Bf;Y.offset=Ff;Y.size=Gf;Y.state=xf;Y.stride=yf;Y.type=wf;Y.w=zf;Y.x=Af;
Y.y=Jf;Y.z=Kf;I.buffer=Lf;I.divisor=Mf;I.normalized=tf;I.offset=Rf;I.size=If;I.state=uf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=gf;I.z=df;V.buffer=Nf;V.divisor=Of;V.normalized=eg;V.offset=fg;V.size=gg;V.state=hg;V.stride=ig;V.type=Wf;V.w=Uf;V.x=Xf;V.y=Yf;V.z=Zf;K.buffer=jg;K.divisor=rg;K.normalized=sg;K.offset=tg;K.size=ug;K.state=vg;K.stride=wg;K.type=xg;K.w=yg;K.x=zg;K.y=Ag;K.z=Bg;ja.buffer=hf;ja.divisor=ef;ja.normalized=Pf;ja.offset=Qf;ja.size=kg;ja.state=lg;ja.stride=mg;ja.type=ng;ja.w=og;ja.x=
$f;ja.y=Vf;ja.z=ag;T.buffer=bg;T.divisor=cg;T.normalized=pg;T.offset=Cg;T.size=Dg;T.state=Eg;T.stride=Fg;T.type=Gg;T.w=Hg;T.x=Ig;T.y=Jg;T.z=Kg;ha.buffer=Lg;ha.divisor=Mg;ha.normalized=Ng;ha.offset=Og;ha.size=Pg;ha.state=Qg;ha.stride=Rg;ha.type=Sg;ha.w=Tg;ha.x=Ug;ha.y=Vg;ha.z=Wg;la.buffer=Xg;la.divisor=Yg;la.normalized=Zg;la.offset=$g;la.size=ah;la.state=bh;la.stride=ch;la.type=dh;la.w=eh;la.x=fh;la.y=gh;la.z=hh;Qa.buffer=ih;Qa.divisor=jh;Qa.normalized=kh;Qa.offset=lh;Qa.size=mh;Qa.state=nh;Qa.stride=
oh;Qa.type=ph;Qa.w=qh;Qa.x=rh;Qa.y=sh;Qa.z=th;Eb.vert=uh;Eb.frag=vh;da.dirty=!0}}},$1:function(a,c){var d,h,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,sa,x,B,ca,t,S,ba,A,Y,I,V,K;d=a.attributes;h=a.current;m=a.framebuffer;l=a.gl;f=a.next;k=a.vao;b=f.blend_color;q=h.blend_color;C=f.blend_equation;y=h.blend_equation;e=f.blend_func;g=h.blend_func;p=f.colorMask;n=h.colorMask;r=f.depth_range;u=h.depth_range;M=f.polygonOffset_offset;w=h.polygonOffset_offset;sa=f.sample_coverage;x=h.sample_coverage;B=f.scissor_box;
ca=h.scissor_box;t=f.stencil_func;S=h.stencil_func;ba=f.stencil_opBack;A=h.stencil_opBack;Y=f.stencil_opFront;I=h.stencil_opFront;V=f.viewport;K=h.viewport;return{poll:function(){var c,a,k,d,z,Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La;h.dirty=!1;a=f.blend_enable;k=f.cull_enable;d=f.depth_enable;z=f.dither;Bb=f.polygonOffset_enable;oa=f.sample_alpha;Oa=f.sample_enable;W=f.scissor_enable;P=f.stencil_enable;L=f.cull_face;U=h.cull_face;pa=f.depth_func;Q=h.depth_func;Pb=f.depth_mask;ab=h.depth_mask;
R=f.frontFace;E=h.frontFace;ma=f.lineWidth;ea=h.lineWidth;wa=f.stencil_mask;La=h.stencil_mask;c=m.next;c!==m.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),m.cur=c);a!==h.blend_enable&&(a?l.enable(3042):l.disable(3042),h.blend_enable=a);k!==h.cull_enable&&(k?l.enable(2884):l.disable(2884),h.cull_enable=k);d!==h.depth_enable&&(d?l.enable(2929):l.disable(2929),h.depth_enable=d);z!==h.dither&&(z?l.enable(3024):l.disable(3024),h.dither=z);Bb!==h.polygonOffset_enable&&(Bb?
l.enable(32823):l.disable(32823),h.polygonOffset_enable=Bb);oa!==h.sample_alpha&&(oa?l.enable(32926):l.disable(32926),h.sample_alpha=oa);Oa!==h.sample_enable&&(Oa?l.enable(32928):l.disable(32928),h.sample_enable=Oa);W!==h.scissor_enable&&(W?l.enable(3089):l.disable(3089),h.scissor_enable=W);P!==h.stencil_enable&&(P?l.enable(2960):l.disable(2960),h.stencil_enable=P);if(b[0]!==q[0]||b[1]!==q[1]||b[2]!==q[2]||b[3]!==q[3])l.blendColor(b[0],b[1],b[2],b[3]),q[0]=b[0],q[1]=b[1],q[2]=b[2],q[3]=b[3];if(C[0]!==
y[0]||C[1]!==y[1])l.blendEquationSeparate(C[0],C[1]),y[0]=C[0],y[1]=C[1];if(e[0]!==g[0]||e[1]!==g[1]||e[2]!==g[2]||e[3]!==g[3])l.blendFuncSeparate(e[0],e[1],e[2],e[3]),g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=e[3];if(p[0]!==n[0]||p[1]!==n[1]||p[2]!==n[2]||p[3]!==n[3])l.colorMask(p[0],p[1],p[2],p[3]),n[0]=p[0],n[1]=p[1],n[2]=p[2],n[3]=p[3];L!==U&&(l.cullFace(L),h.cull_face=L);pa!==Q&&(l.depthFunc(pa),h.depth_func=pa);Pb!==ab&&(l.depthMask(Pb),h.depth_mask=Pb);if(r[0]!==u[0]||r[1]!==u[1])l.depthRange(r[0],
r[1]),u[0]=r[0],u[1]=r[1];R!==E&&(l.frontFace(R),h.frontFace=R);ma!==ea&&(l.lineWidth(ma),h.lineWidth=ma);if(M[0]!==w[0]||M[1]!==w[1])l.polygonOffset(M[0],M[1]),w[0]=M[0],w[1]=M[1];if(sa[0]!==x[0]||sa[1]!==x[1])l.sampleCoverage(sa[0],sa[1]),x[0]=sa[0],x[1]=sa[1];if(B[0]!==ca[0]||B[1]!==ca[1]||B[2]!==ca[2]||B[3]!==ca[3])l.scissor(B[0],B[1],B[2],B[3]),ca[0]=B[0],ca[1]=B[1],ca[2]=B[2],ca[3]=B[3];if(t[0]!==S[0]||t[1]!==S[1]||t[2]!==S[2])l.stencilFunc(t[0],t[1],t[2]),S[0]=t[0],S[1]=t[1],S[2]=t[2];wa!==
La&&(l.stencilMask(wa),h.stencil_mask=wa);if(ba[0]!==A[0]||ba[1]!==A[1]||ba[2]!==A[2]||ba[3]!==A[3])l.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]),A[0]=ba[0],A[1]=ba[1],A[2]=ba[2],A[3]=ba[3];if(Y[0]!==I[0]||Y[1]!==I[1]||Y[2]!==I[2]||Y[3]!==I[3])l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]),I[0]=Y[0],I[1]=Y[1],I[2]=Y[2],I[3]=Y[3];if(V[0]!==K[0]||V[1]!==K[1]||V[2]!==K[2]||V[3]!==K[3])l.viewport(V[0],V[1],V[2],V[3]),K[0]=V[0],K[1]=V[1],K[2]=V[2],K[3]=V[3]},refresh:function(){var a,T,ha,la,Qa,Bb,oa,Oa,W,P,L,
U,pa,Q,Pb,ab;h.dirty=!1;T=f.blend_enable;ha=f.cull_enable;la=f.depth_enable;Qa=f.dither;Bb=f.polygonOffset_enable;oa=f.sample_alpha;Oa=f.sample_enable;W=f.scissor_enable;P=f.stencil_enable;L=f.cull_face;U=f.depth_func;pa=f.depth_mask;Q=f.frontFace;Pb=f.lineWidth;ab=f.stencil_mask;(a=m.next)?l.bindFramebuffer(36160,a.framebuffer):l.bindFramebuffer(36160,null);m.cur=a;a=d[0];a.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(0,a.size,a.type,a.normalized,
a.stride,a.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(0,a.divisor);a=d[1];a.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(1,a.divisor);a=d[2];a.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(2,
a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(2),l.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(2,a.divisor);a=d[3];a.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(3,a.divisor);a=d[4];a.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,
a.buffer.buffer),l.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(4,a.divisor);a=d[5];a.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(5,a.divisor);a=d[6];a.buffer?
(l.enableVertexAttribArray(6),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(6,a.divisor);a=d[7];a.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(7,
a.divisor);a=d[8];a.buffer?(l.enableVertexAttribArray(8),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(8,a.divisor);a=d[9];a.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);c.vertexAttribDivisorANGLE(9,a.divisor);a=d[10];a.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(10,a.divisor);a=d[11];a.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(11),
l.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(11,a.divisor);a=d[12];a.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(12,a.divisor);a=d[13];a.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(13,a.size,a.type,a.normalized,
a.stride,a.offset)):(l.disableVertexAttribArray(13),l.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(13,a.divisor);a=d[14];a.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(14,a.divisor);a=d[15];a.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,a.buffer.buffer),
l.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(15,a.divisor);k.currentVAO=null;k.setVAO(k.targetVAO);T?l.enable(3042):l.disable(3042);h.blend_enable=T;ha?l.enable(2884):l.disable(2884);h.cull_enable=ha;la?l.enable(2929):l.disable(2929);h.depth_enable=la;Qa?l.enable(3024):l.disable(3024);h.dither=Qa;Bb?l.enable(32823):l.disable(32823);h.polygonOffset_enable=Bb;oa?
l.enable(32926):l.disable(32926);h.sample_alpha=oa;Oa?l.enable(32928):l.disable(32928);h.sample_enable=Oa;W?l.enable(3089):l.disable(3089);h.scissor_enable=W;P?l.enable(2960):l.disable(2960);h.stencil_enable=P;l.blendColor(b[0],b[1],b[2],b[3]);q[0]=b[0];q[1]=b[1];q[2]=b[2];q[3]=b[3];l.blendEquationSeparate(C[0],C[1]);y[0]=C[0];y[1]=C[1];l.blendFuncSeparate(e[0],e[1],e[2],e[3]);g[0]=e[0];g[1]=e[1];g[2]=e[2];g[3]=e[3];l.colorMask(p[0],p[1],p[2],p[3]);n[0]=p[0];n[1]=p[1];n[2]=p[2];n[3]=p[3];l.cullFace(L);
h.cull_face=L;l.depthFunc(U);h.depth_func=U;l.depthMask(pa);h.depth_mask=pa;l.depthRange(r[0],r[1]);u[0]=r[0];u[1]=r[1];l.frontFace(Q);h.frontFace=Q;l.lineWidth(Pb);h.lineWidth=Pb;l.polygonOffset(M[0],M[1]);w[0]=M[0];w[1]=M[1];l.sampleCoverage(sa[0],sa[1]);x[0]=sa[0];x[1]=sa[1];l.scissor(B[0],B[1],B[2],B[3]);ca[0]=B[0];ca[1]=B[1];ca[2]=B[2];ca[3]=B[3];l.stencilFunc(t[0],t[1],t[2]);S[0]=t[0];S[1]=t[1];S[2]=t[2];l.stencilMask(ab);h.stencil_mask=ab;l.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]);A[0]=ba[0];
A[1]=ba[1];A[2]=ba[2];A[3]=ba[3];l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]);I[0]=Y[0];I[1]=Y[1];I[2]=Y[2];I[3]=Y[3];l.viewport(V[0],V[1],V[2],V[3]);K[0]=V[0];K[1]=V[1];K[2]=V[2];K[3]=V[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,c,d,h,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,sa,x,B,ca,t,S,ba,A,Y,I,V,K,ja,T,ha,la,Qa,Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab){var R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra,cc,pc,jc,
td,zc,aa,O,ka,Ga,Kb,bd,Oc,J,G,ia,ua,Z,fa,ta,N,H,da,Aa,Da,Ja,F,nc,Eb,qa,Fb,xb;R=a.attributes;E=a.buffer;ma=a.context;ea=a.current;wa=a.draw;La=a.elements;yb=a.extensions;Ka=a.framebuffer;X=a.gl;nb=a.isBufferArgs;ga=a.next;ra=a.shader;cc=a.uniforms;pc=a.vao;jc=ga.blend_color;td=ea.blend_color;zc=ga.blend_equation;aa=ea.blend_equation;O=ga.blend_func;ka=ea.blend_func;Ga=ga.colorMask;Kb=ea.colorMask;bd=ga.depth_range;Oc=ea.depth_range;J=ga.polygonOffset_offset;G=ea.polygonOffset_offset;ia=ga.sample_coverage;
ua=ea.sample_coverage;Z=ga.scissor_box;fa=ea.scissor_box;ta=ga.stencil_func;N=ea.stencil_func;H=ga.stencil_opBack;da=ea.stencil_opBack;Aa=ga.stencil_opFront;Da=ea.stencil_opFront;Ja=ga.viewport;F=ea.viewport;nc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Eb={};Eb.buffer=d;Eb.divisor=1;qa={};qa.buffer=h;qa.divisor=1;Fb={};Fb.buffer=m;Fb.divisor=1;xb={};xb.buffer=l;xb.divisor=1;return{batch:function(b,a){var f,k,n,p,q,r;f=Ka.next;f!==Ka.cur&&(f?X.bindFramebuffer(36160,
f.framebuffer):X.bindFramebuffer(36160,null),Ka.cur=f);if(ea.dirty){var d,u,l,m,h,C,w,M,D,x,z,sa,B,t,ca,O,na,S,Z,ba,Ja,Pc,Jc,qc,gb,ra,Gb,oc,Xa,Fc,$b,lc,zc;d=ga.dither;d!==ea.dither&&(d?X.enable(3024):X.disable(3024),ea.dither=d);u=ga.depth_func;u!==ea.depth_func&&(X.depthFunc(u),ea.depth_func=u);l=bd[0];m=bd[1];if(l!==Oc[0]||m!==Oc[1])X.depthRange(l,m),Oc[0]=l,Oc[1]=m;h=ga.depth_mask;h!==ea.depth_mask&&(X.depthMask(h),ea.depth_mask=h);C=Ga[0];w=Ga[1];M=Ga[2];D=Ga[3];if(C!==Kb[0]||w!==Kb[1]||M!==Kb[2]||
D!==Kb[3])X.colorMask(C,w,M,D),Kb[0]=C,Kb[1]=w,Kb[2]=M,Kb[3]=D;x=ga.cull_enable;x!==ea.cull_enable&&(x?X.enable(2884):X.disable(2884),ea.cull_enable=x);z=ga.cull_face;z!==ea.cull_face&&(X.cullFace(z),ea.cull_face=z);sa=ga.frontFace;sa!==ea.frontFace&&(X.frontFace(sa),ea.frontFace=sa);B=ga.lineWidth;B!==ea.lineWidth&&(X.lineWidth(B),ea.lineWidth=B);t=ga.polygonOffset_enable;t!==ea.polygonOffset_enable&&(t?X.enable(32823):X.disable(32823),ea.polygonOffset_enable=t);ca=J[0];O=J[1];if(ca!==G[0]||O!==
G[1])X.polygonOffset(ca,O),G[0]=ca,G[1]=O;na=ga.sample_alpha;na!==ea.sample_alpha&&(na?X.enable(32926):X.disable(32926),ea.sample_alpha=na);S=ga.sample_enable;S!==ea.sample_enable&&(S?X.enable(32928):X.disable(32928),ea.sample_enable=S);Z=ia[0];ba=ia[1];if(Z!==ua[0]||ba!==ua[1])X.sampleCoverage(Z,ba),ua[0]=Z,ua[1]=ba;Ja=ga.stencil_enable;Ja!==ea.stencil_enable&&(Ja?X.enable(2960):X.disable(2960),ea.stencil_enable=Ja);Pc=ga.stencil_mask;Pc!==ea.stencil_mask&&(X.stencilMask(Pc),ea.stencil_mask=Pc);
Jc=ta[0];qc=ta[1];gb=ta[2];if(Jc!==N[0]||qc!==N[1]||gb!==N[2])X.stencilFunc(Jc,qc,gb),N[0]=Jc,N[1]=qc,N[2]=gb;ra=Aa[0];Gb=Aa[1];oc=Aa[2];Xa=Aa[3];if(ra!==Da[0]||Gb!==Da[1]||oc!==Da[2]||Xa!==Da[3])X.stencilOpSeparate(ra,Gb,oc,Xa),Da[0]=ra,Da[1]=Gb,Da[2]=oc,Da[3]=Xa;Fc=H[0];$b=H[1];lc=H[2];zc=H[3];if(Fc!==da[0]||$b!==da[1]||lc!==da[2]||zc!==da[3])X.stencilOpSeparate(Fc,$b,lc,zc),da[0]=Fc,da[1]=$b,da[2]=lc,da[3]=zc}X.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;X.enable(3042);ea.blend_enable=
!0;X.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;X.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;X.disable(2929);ea.depth_enable=!1;X.enable(3089);ea.scissor_enable=!0;if(k=ea.profile)n=performance.now(),c.count+=a;X.useProgram(A.program);p=yb.angle_instanced_arrays;var rd,Gc,dc,Cc,Xc,Yb,Hc,Ya;pc.setVAO(null);rd=Qa.location;Gc=R[rd];Gc.buffer||X.enableVertexAttribArray(rd);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==y||!1!==Gc.normalized||0!==Gc.offset||24!==
Gc.stride)X.bindBuffer(34962,y.buffer),X.vertexAttribPointer(rd,2,5126,!1,24,0),Gc.type=5126,Gc.size=2,Gc.buffer=y,Gc.normalized=!1,Gc.offset=0,Gc.stride=24;0!==Gc.divisor&&(p.vertexAttribDivisorANGLE(rd,0),Gc.divisor=0);dc=oa.location;Cc=R[dc];Cc.buffer||X.enableVertexAttribArray(dc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==e||!1!==Cc.normalized||8!==Cc.offset||24!==Cc.stride)X.bindBuffer(34962,e.buffer),X.vertexAttribPointer(dc,2,5126,!1,24,8),Cc.type=5126,Cc.size=2,Cc.buffer=e,Cc.normalized=
!1,Cc.offset=8,Cc.stride=24;0!==Cc.divisor&&(p.vertexAttribDivisorANGLE(dc,0),Cc.divisor=0);Xc=T.location;Yb=R[Xc];Yb.buffer||X.enableVertexAttribArray(Xc);if(5126!==Yb.type||2!==Yb.size||Yb.buffer!==g||!1!==Yb.normalized||16!==Yb.offset||24!==Yb.stride)X.bindBuffer(34962,g.buffer),X.vertexAttribPointer(Xc,2,5126,!1,24,16),Yb.type=5126,Yb.size=2,Yb.buffer=g,Yb.normalized=!1,Yb.offset=16,Yb.stride=24;0!==Yb.divisor&&(p.vertexAttribDivisorANGLE(Xc,0),Yb.divisor=0);(Hc=wa.elements)?X.bindBuffer(34963,
Hc.buffer.buffer):pc.currentVAO&&(Hc=La.getElements(pc.currentVAO.elements))&&X.bindBuffer(34963,Hc.buffer.buffer);Ya=wa.offset;for(q=0;q<a;++q){r=b[q];var Ea,ud,Hb,Ua,Lb,cb,Dc,ac,cc,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,jc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc;
Ea=r.viewport;ud=Ea.x|0;Hb=Ea.y|0;Ua="width"in Ea?Ea.width|0:ma.framebufferWidth-ud;Lb="height"in Ea?Ea.height|0:ma.framebufferHeight-Hb;cb=ma.viewportWidth;ma.viewportWidth=Ua;Dc=ma.viewportHeight;ma.viewportHeight=Lb;X.viewport(ud,Hb,Ua,Lb);F[0]=ud;F[1]=Hb;F[2]=Ua;F[3]=Lb;ac=r.viewport;cc=ac.x|0;mc=ac.y|0;Tb="width"in ac?ac.width|0:ma.framebufferWidth-cc;v="height"in ac?ac.height|0:ma.framebufferHeight-mc;X.scissor(cc,mc,Tb,v);fa[0]=cc;fa[1]=mc;fa[2]=Tb;fa[3]=v;Ub=Y.call(this,ma,r,q);Fb.offset=
Ub;Pa=!1;ob=null;tb=0;hb=!1;jc=Ra=0;Xb=1;jd=0;db=5126;jb=ic=Yc=kc=0;nb(Fb)?(Pa=!0,ob=E.createStream(34962,Fb),db=ob.dtype):(ob=E.getBuffer(Fb))?db=ob.dtype:"constant"in Fb?(Xb=2,"number"===typeof Fb.constant?(Yc=Fb.constant,ic=jb=kc=0):(Yc=0<Fb.constant.length?Fb.constant[0]:0,ic=1<Fb.constant.length?Fb.constant[1]:0,jb=2<Fb.constant.length?Fb.constant[2]:0,kc=3<Fb.constant.length?Fb.constant[3]:0)):(ob=nb(Fb.buffer)?E.createStream(34962,Fb.buffer):E.getBuffer(Fb.buffer),db="type"in Fb?nc[Fb.type]:
ob.dtype,hb=!!Fb.normalized,jc=Fb.size|0,Ra=Fb.offset|0,jd=Fb.stride|0,tb=Fb.divisor|0);kb=P.location;va=R[kb];if(1===Xb){va.buffer||X.enableVertexAttribArray(kb);pb=jc||2;if(va.type!==db||va.size!==pb||va.buffer!==ob||va.normalized!==hb||va.offset!==Ra||va.stride!==jd)X.bindBuffer(34962,ob.buffer),X.vertexAttribPointer(kb,pb,db,hb,jd,Ra),va.type=db,va.size=pb,va.buffer=ob,va.normalized=hb,va.offset=Ra,va.stride=jd;va.divisor!==tb&&(p.vertexAttribDivisorANGLE(kb,tb),va.divisor=tb)}else if(va.buffer&&
(X.disableVertexAttribArray(kb),va.buffer=null),va.x!==Yc||va.y!==ic||va.z!==jb||va.w!==kc)X.vertexAttrib4f(kb,Yc,ic,jb,kc),va.x=Yc,va.y=ic,va.z=jb,va.w=kc;za=I.call(this,ma,r,q);xb.offset=za;Va=!1;bb=null;Ba=0;eb=!1;Ab=Na=0;zb=1;Ta=0;Ic=5126;xa=Vb=Mb=Ib=0;nb(xb)?(Va=!0,bb=E.createStream(34962,xb),Ic=bb.dtype):(bb=E.getBuffer(xb))?Ic=bb.dtype:"constant"in xb?(zb=2,"number"===typeof xb.constant?(Mb=xb.constant,Vb=xa=Ib=0):(Mb=0<xb.constant.length?xb.constant[0]:0,Vb=1<xb.constant.length?xb.constant[1]:
0,xa=2<xb.constant.length?xb.constant[2]:0,Ib=3<xb.constant.length?xb.constant[3]:0)):(bb=nb(xb.buffer)?E.createStream(34962,xb.buffer):E.getBuffer(xb.buffer),Ic="type"in xb?nc[xb.type]:bb.dtype,eb=!!xb.normalized,Ab=xb.size|0,Na=xb.offset|0,Ta=xb.stride|0,Ba=xb.divisor|0);Jd=L.location;Ma=R[Jd];if(1===zb){Ma.buffer||X.enableVertexAttribArray(Jd);Qb=Ab||2;if(Ma.type!==Ic||Ma.size!==Qb||Ma.buffer!==bb||Ma.normalized!==eb||Ma.offset!==Na||Ma.stride!==Ta)X.bindBuffer(34962,bb.buffer),X.vertexAttribPointer(Jd,
Qb,Ic,eb,Ta,Na),Ma.type=Ic,Ma.size=Qb,Ma.buffer=bb,Ma.normalized=eb,Ma.offset=Na,Ma.stride=Ta;Ma.divisor!==Ba&&(p.vertexAttribDivisorANGLE(Jd,Ba),Ma.divisor=Ba)}else if(Ma.buffer&&(X.disableVertexAttribArray(Jd),Ma.buffer=null),Ma.x!==Mb||Ma.y!==Vb||Ma.z!==xa||Ma.w!==Ib)X.vertexAttrib4f(Jd,Mb,Vb,xa,Ib),Ma.x=Mb,Ma.y=Vb,Ma.z=xa,Ma.w=Ib;fb=V.call(this,ma,r,q);qa.offset=fb;ib=!1;ya=null;ec=0;Fa=!1;rb=qb=0;Za=1;$a=0;rc=5126;Nb=Wa=tc=cd=0;nb(qa)?(ib=!0,ya=E.createStream(34962,qa),rc=ya.dtype):(ya=E.getBuffer(qa))?
rc=ya.dtype:"constant"in qa?(Za=2,"number"===typeof qa.constant?(tc=qa.constant,Wa=Nb=cd=0):(tc=0<qa.constant.length?qa.constant[0]:0,Wa=1<qa.constant.length?qa.constant[1]:0,Nb=2<qa.constant.length?qa.constant[2]:0,cd=3<qa.constant.length?qa.constant[3]:0)):(ya=nb(qa.buffer)?E.createStream(34962,qa.buffer):E.getBuffer(qa.buffer),rc="type"in qa?nc[qa.type]:ya.dtype,Fa=!!qa.normalized,rb=qa.size|0,qb=qa.offset|0,$a=qa.stride|0,ec=qa.divisor|0);dd=Bb.location;Ha=R[dd];if(1===Za){Ha.buffer||X.enableVertexAttribArray(dd);
vc=rb||4;if(Ha.type!==rc||Ha.size!==vc||Ha.buffer!==ya||Ha.normalized!==Fa||Ha.offset!==qb||Ha.stride!==$a)X.bindBuffer(34962,ya.buffer),X.vertexAttribPointer(dd,vc,rc,Fa,$a,qb),Ha.type=rc,Ha.size=vc,Ha.buffer=ya,Ha.normalized=Fa,Ha.offset=qb,Ha.stride=$a;Ha.divisor!==ec&&(p.vertexAttribDivisorANGLE(dd,ec),Ha.divisor=ec)}else if(Ha.buffer&&(X.disableVertexAttribArray(dd),Ha.buffer=null),Ha.x!==tc||Ha.y!==Wa||Ha.z!==Nb||Ha.w!==cd)X.vertexAttrib4f(dd,tc,Wa,Nb,cd),Ha.x=tc,Ha.y=Wa,Ha.z=Nb,Ha.w=cd;Sa=
K.call(this,ma,r,q);Eb.offset=Sa;Ca=!1;lb=null;ub=0;Cb=!1;uc=sb=0;vb=1;wd=0;sc=5126;fd=ed=Kc=Fd=0;nb(Eb)?(Ca=!0,lb=E.createStream(34962,Eb),sc=lb.dtype):(lb=E.getBuffer(Eb))?sc=lb.dtype:"constant"in Eb?(vb=2,"number"===typeof Eb.constant?(Kc=Eb.constant,ed=fd=Fd=0):(Kc=0<Eb.constant.length?Eb.constant[0]:0,ed=1<Eb.constant.length?Eb.constant[1]:0,fd=2<Eb.constant.length?Eb.constant[2]:0,Fd=3<Eb.constant.length?Eb.constant[3]:0)):(lb=nb(Eb.buffer)?E.createStream(34962,Eb.buffer):E.getBuffer(Eb.buffer),
sc="type"in Eb?nc[Eb.type]:lb.dtype,Cb=!!Eb.normalized,uc=Eb.size|0,sb=Eb.offset|0,wd=Eb.stride|0,ub=Eb.divisor|0);Wb=la.location;bc=R[Wb];if(1===vb){bc.buffer||X.enableVertexAttribArray(Wb);Rb=uc||4;if(bc.type!==sc||bc.size!==Rb||bc.buffer!==lb||bc.normalized!==Cb||bc.offset!==sb||bc.stride!==wd)X.bindBuffer(34962,lb.buffer),X.vertexAttribPointer(Wb,Rb,sc,Cb,wd,sb),bc.type=sc,bc.size=Rb,bc.buffer=lb,bc.normalized=Cb,bc.offset=sb,bc.stride=wd;bc.divisor!==ub&&(p.vertexAttribDivisorANGLE(Wb,ub),bc.divisor=
ub)}else if(bc.buffer&&(X.disableVertexAttribArray(Wb),bc.buffer=null),bc.x!==Kc||bc.y!==ed||bc.z!==fd||bc.w!==Fd)X.vertexAttrib4f(Wb,Kc,ed,fd,Fd),bc.x=Kc,bc.y=ed,bc.z=fd,bc.w=Fd;Ia=ja.call(this,ma,r,q);Zb=Ia[0];wb=Ia[1];Sb=Ia[2];hc=Ia[3];q&&mb===Zb&&Ob===wb&&fc===Sb&&Ze===hc||(mb=Zb,Ob=wb,fc=Sb,Ze=hc,X.uniform4f(ab.location,Zb,wb,Sb,hc));xc=r.lineWidth;q&&yc===xc||(yc=xc,X.uniform1f(Oa.location,xc));Ac=r.capSize;q&&Lc===Ac||(Lc=Ac,X.uniform1f(ha.location,Ac));Zc=r.scale;Rc=Zc[0];Jb=Zc[1];q&&Mc===
Rc&&Db===Jb||(Mc=Rc,Db=Jb,X.uniform2f(U.location,Rc,Jb));Nc=r.scaleFract;Ec=Nc[0];gc=Nc[1];q&&Sc===Ec&&Vc===gc||(Sc=Ec,Vc=gc,X.uniform2f(pa.location,Ec,gc));gd=r.translate;kd=gd[0];Wc=gd[1];q&&md===kd&&bf===Wc||(md=kd,bf=Wc,X.uniform2f(Q.location,kd,Wc));Zd=r.translateFract;ke=Zd[0];me=Zd[1];q&&se===ke&&Md===me||(se=ke,Md=me,X.uniform2f(Pb.location,ke,me));Kd=r.opacity;q&&id===Kd||(id=Kd,X.uniform1f(W.location,Kd));Bc=r.count;0<Bc?Hc?p.drawElementsInstancedANGLE(4,36,Hc.type,Ya<<(Hc.type-5121>>1),
Bc):p.drawArraysInstancedANGLE(4,Ya,36,Bc):0>Bc&&(Hc?X.drawElements(4,36,Hc.type,Ya<<(Hc.type-5121>>1)):X.drawArrays(4,Ya,36));ma.viewportWidth=cb;ma.viewportHeight=Dc;Pa&&E.destroyStream(ob);Va&&E.destroyStream(bb);ib&&E.destroyStream(ya);Ca&&E.destroyStream(lb)}ea.dirty=!0;pc.setVAO(null);k&&(c.cpuTime+=performance.now()-n)},draw:function(a){var n,r,d,u,l,m,h,w,M,D,x,z,sa,B,t,ca,A,O,I,na,S,K,Z,ba,Y,V,Ja,ra,Pc,Jc,qc,gb,zc,Gb,oc,Xa,Fc,$b,lc,ja,cc,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,jc,mc,
Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec;n=Ka.next;n!==Ka.cur&&(n?X.bindFramebuffer(36160,n.framebuffer):X.bindFramebuffer(36160,null),Ka.cur=n);if(ea.dirty){var Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb;Fa=ga.dither;Fa!==ea.dither&&(Fa?X.enable(3024):X.disable(3024),ea.dither=Fa);qb=ga.depth_func;qb!==ea.depth_func&&(X.depthFunc(qb),ea.depth_func=qb);rb=bd[0];Za=
bd[1];if(rb!==Oc[0]||Za!==Oc[1])X.depthRange(rb,Za),Oc[0]=rb,Oc[1]=Za;$a=ga.depth_mask;$a!==ea.depth_mask&&(X.depthMask($a),ea.depth_mask=$a);rc=Ga[0];cd=Ga[1];tc=Ga[2];Wa=Ga[3];if(rc!==Kb[0]||cd!==Kb[1]||tc!==Kb[2]||Wa!==Kb[3])X.colorMask(rc,cd,tc,Wa),Kb[0]=rc,Kb[1]=cd,Kb[2]=tc,Kb[3]=Wa;Nb=ga.cull_enable;Nb!==ea.cull_enable&&(Nb?X.enable(2884):X.disable(2884),ea.cull_enable=Nb);dd=ga.cull_face;dd!==ea.cull_face&&(X.cullFace(dd),ea.cull_face=dd);Ha=ga.frontFace;Ha!==ea.frontFace&&(X.frontFace(Ha),
ea.frontFace=Ha);vc=ga.lineWidth;vc!==ea.lineWidth&&(X.lineWidth(vc),ea.lineWidth=vc);Sa=ga.polygonOffset_enable;Sa!==ea.polygonOffset_enable&&(Sa?X.enable(32823):X.disable(32823),ea.polygonOffset_enable=Sa);Ca=J[0];lb=J[1];if(Ca!==G[0]||lb!==G[1])X.polygonOffset(Ca,lb),G[0]=Ca,G[1]=lb;ub=ga.sample_alpha;ub!==ea.sample_alpha&&(ub?X.enable(32926):X.disable(32926),ea.sample_alpha=ub);Cb=ga.sample_enable;Cb!==ea.sample_enable&&(Cb?X.enable(32928):X.disable(32928),ea.sample_enable=Cb);sb=ia[0];uc=ia[1];
if(sb!==ua[0]||uc!==ua[1])X.sampleCoverage(sb,uc),ua[0]=sb,ua[1]=uc;vb=ga.stencil_enable;vb!==ea.stencil_enable&&(vb?X.enable(2960):X.disable(2960),ea.stencil_enable=vb);wd=ga.stencil_mask;wd!==ea.stencil_mask&&(X.stencilMask(wd),ea.stencil_mask=wd);sc=ta[0];Fd=ta[1];Kc=ta[2];if(sc!==N[0]||Fd!==N[1]||Kc!==N[2])X.stencilFunc(sc,Fd,Kc),N[0]=sc,N[1]=Fd,N[2]=Kc;ed=Aa[0];fd=Aa[1];Wb=Aa[2];bc=Aa[3];if(ed!==Da[0]||fd!==Da[1]||Wb!==Da[2]||bc!==Da[3])X.stencilOpSeparate(ed,fd,Wb,bc),Da[0]=ed,Da[1]=fd,Da[2]=
Wb,Da[3]=bc;Rb=H[0];Ia=H[1];Zb=H[2];mb=H[3];if(Rb!==da[0]||Ia!==da[1]||Zb!==da[2]||mb!==da[3])X.stencilOpSeparate(Rb,Ia,Zb,mb),da[0]=Rb,da[1]=Ia,da[2]=Zb,da[3]=mb}r=a.viewport;d=r.x|0;u=r.y|0;l="width"in r?r.width|0:ma.framebufferWidth-d;m="height"in r?r.height|0:ma.framebufferHeight-u;h=ma.viewportWidth;ma.viewportWidth=l;w=ma.viewportHeight;ma.viewportHeight=m;X.viewport(d,u,l,m);F[0]=d;F[1]=u;F[2]=l;F[3]=m;X.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;X.enable(3042);ea.blend_enable=!0;
X.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;X.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;X.disable(2929);ea.depth_enable=!1;M=a.viewport;D=M.x|0;x=M.y|0;z="width"in M?M.width|0:ma.framebufferWidth-D;sa="height"in M?M.height|0:ma.framebufferHeight-x;X.scissor(D,x,z,sa);fa[0]=D;fa[1]=x;fa[2]=z;fa[3]=sa;X.enable(3089);ea.scissor_enable=!0;if(B=ea.profile)t=performance.now(),c.count++;X.useProgram(f.program);ca=yb.angle_instanced_arrays;pc.setVAO(null);A=k.call(this,
ma,a,0);Fb.offset=A;O=!1;I=null;na=0;S=!1;Z=K=0;ba=1;Y=0;V=5126;Jc=Pc=ra=Ja=0;nb(Fb)?(O=!0,I=E.createStream(34962,Fb),V=I.dtype):(I=E.getBuffer(Fb))?V=I.dtype:"constant"in Fb?(ba=2,"number"===typeof Fb.constant?(ra=Fb.constant,Pc=Jc=Ja=0):(ra=0<Fb.constant.length?Fb.constant[0]:0,Pc=1<Fb.constant.length?Fb.constant[1]:0,Jc=2<Fb.constant.length?Fb.constant[2]:0,Ja=3<Fb.constant.length?Fb.constant[3]:0)):(I=nb(Fb.buffer)?E.createStream(34962,Fb.buffer):E.getBuffer(Fb.buffer),V="type"in Fb?nc[Fb.type]:
I.dtype,S=!!Fb.normalized,Z=Fb.size|0,K=Fb.offset|0,Y=Fb.stride|0,na=Fb.divisor|0);qc=P.location;gb=R[qc];if(1===ba){gb.buffer||X.enableVertexAttribArray(qc);zc=Z||2;if(gb.type!==V||gb.size!==zc||gb.buffer!==I||gb.normalized!==S||gb.offset!==K||gb.stride!==Y)X.bindBuffer(34962,I.buffer),X.vertexAttribPointer(qc,zc,V,S,Y,K),gb.type=V,gb.size=zc,gb.buffer=I,gb.normalized=S,gb.offset=K,gb.stride=Y;gb.divisor!==na&&(ca.vertexAttribDivisorANGLE(qc,na),gb.divisor=na)}else if(gb.buffer&&(X.disableVertexAttribArray(qc),
gb.buffer=null),gb.x!==ra||gb.y!==Pc||gb.z!==Jc||gb.w!==Ja)X.vertexAttrib4f(qc,ra,Pc,Jc,Ja),gb.x=ra,gb.y=Pc,gb.z=Jc,gb.w=Ja;Gb=b.call(this,ma,a,0);xb.offset=Gb;oc=!1;Xa=null;Fc=0;$b=!1;ja=lc=0;cc=1;Gc=0;dc=5126;Hc=Yb=Xc=Cc=0;nb(xb)?(oc=!0,Xa=E.createStream(34962,xb),dc=Xa.dtype):(Xa=E.getBuffer(xb))?dc=Xa.dtype:"constant"in xb?(cc=2,"number"===typeof xb.constant?(Xc=xb.constant,Yb=Hc=Cc=0):(Xc=0<xb.constant.length?xb.constant[0]:0,Yb=1<xb.constant.length?xb.constant[1]:0,Hc=2<xb.constant.length?xb.constant[2]:
0,Cc=3<xb.constant.length?xb.constant[3]:0)):(Xa=nb(xb.buffer)?E.createStream(34962,xb.buffer):E.getBuffer(xb.buffer),dc="type"in xb?nc[xb.type]:Xa.dtype,$b=!!xb.normalized,ja=xb.size|0,lc=xb.offset|0,Gc=xb.stride|0,Fc=xb.divisor|0);Ya=L.location;Ea=R[Ya];if(1===cc){Ea.buffer||X.enableVertexAttribArray(Ya);ud=ja||2;if(Ea.type!==dc||Ea.size!==ud||Ea.buffer!==Xa||Ea.normalized!==$b||Ea.offset!==lc||Ea.stride!==Gc)X.bindBuffer(34962,Xa.buffer),X.vertexAttribPointer(Ya,ud,dc,$b,Gc,lc),Ea.type=dc,Ea.size=
ud,Ea.buffer=Xa,Ea.normalized=$b,Ea.offset=lc,Ea.stride=Gc;Ea.divisor!==Fc&&(ca.vertexAttribDivisorANGLE(Ya,Fc),Ea.divisor=Fc)}else if(Ea.buffer&&(X.disableVertexAttribArray(Ya),Ea.buffer=null),Ea.x!==Xc||Ea.y!==Yb||Ea.z!==Hc||Ea.w!==Cc)X.vertexAttrib4f(Ya,Xc,Yb,Hc,Cc),Ea.x=Xc,Ea.y=Yb,Ea.z=Hc,Ea.w=Cc;Hb=q.call(this,ma,a,0);qa.offset=Hb;Ua=!1;Lb=null;cb=0;Dc=!1;jc=ac=0;mc=1;Tb=0;v=5126;tb=ob=Pa=Ub=0;nb(qa)?(Ua=!0,Lb=E.createStream(34962,qa),v=Lb.dtype):(Lb=E.getBuffer(qa))?v=Lb.dtype:"constant"in qa?
(mc=2,"number"===typeof qa.constant?(Pa=qa.constant,ob=tb=Ub=0):(Pa=0<qa.constant.length?qa.constant[0]:0,ob=1<qa.constant.length?qa.constant[1]:0,tb=2<qa.constant.length?qa.constant[2]:0,Ub=3<qa.constant.length?qa.constant[3]:0)):(Lb=nb(qa.buffer)?E.createStream(34962,qa.buffer):E.getBuffer(qa.buffer),v="type"in qa?nc[qa.type]:Lb.dtype,Dc=!!qa.normalized,jc=qa.size|0,ac=qa.offset|0,Tb=qa.stride|0,cb=qa.divisor|0);hb=Bb.location;Ra=R[hb];if(1===mc){Ra.buffer||X.enableVertexAttribArray(hb);Qc=jc||
4;if(Ra.type!==v||Ra.size!==Qc||Ra.buffer!==Lb||Ra.normalized!==Dc||Ra.offset!==ac||Ra.stride!==Tb)X.bindBuffer(34962,Lb.buffer),X.vertexAttribPointer(hb,Qc,v,Dc,Tb,ac),Ra.type=v,Ra.size=Qc,Ra.buffer=Lb,Ra.normalized=Dc,Ra.offset=ac,Ra.stride=Tb;Ra.divisor!==cb&&(ca.vertexAttribDivisorANGLE(hb,cb),Ra.divisor=cb)}else if(Ra.buffer&&(X.disableVertexAttribArray(hb),Ra.buffer=null),Ra.x!==Pa||Ra.y!==ob||Ra.z!==tb||Ra.w!==Ub)X.vertexAttrib4f(hb,Pa,ob,tb,Ub),Ra.x=Pa,Ra.y=ob,Ra.z=tb,Ra.w=Ub;Xb=C.call(this,
ma,a,0);Eb.offset=Xb;jd=!1;db=null;kc=0;Yc=!1;jb=ic=0;kb=1;va=0;pb=5126;Ba=bb=Va=za=0;nb(Eb)?(jd=!0,db=E.createStream(34962,Eb),pb=db.dtype):(db=E.getBuffer(Eb))?pb=db.dtype:"constant"in Eb?(kb=2,"number"===typeof Eb.constant?(Va=Eb.constant,bb=Ba=za=0):(Va=0<Eb.constant.length?Eb.constant[0]:0,bb=1<Eb.constant.length?Eb.constant[1]:0,Ba=2<Eb.constant.length?Eb.constant[2]:0,za=3<Eb.constant.length?Eb.constant[3]:0)):(db=nb(Eb.buffer)?E.createStream(34962,Eb.buffer):E.getBuffer(Eb.buffer),pb="type"in
Eb?nc[Eb.type]:db.dtype,Yc=!!Eb.normalized,jb=Eb.size|0,ic=Eb.offset|0,va=Eb.stride|0,kc=Eb.divisor|0);eb=la.location;Na=R[eb];if(1===kb){Na.buffer||X.enableVertexAttribArray(eb);Ab=jb||4;if(Na.type!==pb||Na.size!==Ab||Na.buffer!==db||Na.normalized!==Yc||Na.offset!==ic||Na.stride!==va)X.bindBuffer(34962,db.buffer),X.vertexAttribPointer(eb,Ab,pb,Yc,va,ic),Na.type=pb,Na.size=Ab,Na.buffer=db,Na.normalized=Yc,Na.offset=ic,Na.stride=va;Na.divisor!==kc&&(ca.vertexAttribDivisorANGLE(eb,kc),Na.divisor=kc)}else if(Na.buffer&&
(X.disableVertexAttribArray(eb),Na.buffer=null),Na.x!==Va||Na.y!==bb||Na.z!==Ba||Na.w!==za)X.vertexAttrib4f(eb,Va,bb,Ba,za),Na.x=Va,Na.y=bb,Na.z=Ba,Na.w=za;zb=Qa.location;Ta=R[zb];Ta.buffer||X.enableVertexAttribArray(zb);if(5126!==Ta.type||2!==Ta.size||Ta.buffer!==y||!1!==Ta.normalized||0!==Ta.offset||24!==Ta.stride)X.bindBuffer(34962,y.buffer),X.vertexAttribPointer(zb,2,5126,!1,24,0),Ta.type=5126,Ta.size=2,Ta.buffer=y,Ta.normalized=!1,Ta.offset=0,Ta.stride=24;0!==Ta.divisor&&(ca.vertexAttribDivisorANGLE(zb,
0),Ta.divisor=0);Ic=oa.location;Ib=R[Ic];Ib.buffer||X.enableVertexAttribArray(Ic);if(5126!==Ib.type||2!==Ib.size||Ib.buffer!==e||!1!==Ib.normalized||8!==Ib.offset||24!==Ib.stride)X.bindBuffer(34962,e.buffer),X.vertexAttribPointer(Ic,2,5126,!1,24,8),Ib.type=5126,Ib.size=2,Ib.buffer=e,Ib.normalized=!1,Ib.offset=8,Ib.stride=24;0!==Ib.divisor&&(ca.vertexAttribDivisorANGLE(Ic,0),Ib.divisor=0);Mb=T.location;Vb=R[Mb];Vb.buffer||X.enableVertexAttribArray(Mb);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==g||
!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)X.bindBuffer(34962,g.buffer),X.vertexAttribPointer(Mb,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=g,Vb.normalized=!1,Vb.offset=16,Vb.stride=24;0!==Vb.divisor&&(ca.vertexAttribDivisorANGLE(Mb,0),Vb.divisor=0);xa=p.call(this,ma,a,0);X.uniform4f(ab.location,xa[0],xa[1],xa[2],xa[3]);X.uniform1f(Oa.location,a.lineWidth);X.uniform1f(ha.location,a.capSize);Jd=a.scale;X.uniform2f(U.location,Jd[0],Jd[1]);Ma=a.scaleFract;X.uniform2f(pa.location,Ma[0],
Ma[1]);Qb=a.translate;X.uniform2f(Q.location,Qb[0],Qb[1]);fb=a.translateFract;X.uniform2f(Pb.location,fb[0],fb[1]);X.uniform1f(W.location,a.opacity);(ib=wa.elements)?X.bindBuffer(34963,ib.buffer.buffer):pc.currentVAO&&(ib=La.getElements(pc.currentVAO.elements))&&X.bindBuffer(34963,ib.buffer.buffer);ya=wa.offset;ec=a.count;0<ec?ib?ca.drawElementsInstancedANGLE(4,36,ib.type,ya<<(ib.type-5121>>1),ec):ca.drawArraysInstancedANGLE(4,ya,36,ec):0>ec&&(ib?X.drawElements(4,36,ib.type,ya<<(ib.type-5121>>1)):
X.drawArrays(4,ya,36));ea.dirty=!0;pc.setVAO(null);ma.viewportWidth=h;ma.viewportHeight=w;B&&(c.cpuTime+=performance.now()-t);O&&E.destroyStream(I);oc&&E.destroyStream(Xa);Ua&&E.destroyStream(Lb);jd&&E.destroyStream(db)},scope:function(b,a,f){var k,p,q,d,l,m,h,C,D,z,F,A,H,G,I,N,J,da,aa,L,P,K,Q,U,R,X,fa,ka,W,T,Y,V,ia,Da,ua,pc,Aa,ta,Ga,oa,ha,Cc,pa,Yb,Hc,Ya,Ea,td,Hb,Ua,Lb,cb,Kb,ja,bd,la,Tb,v,Ub,Pa,ob,tb,hb,Ra,Oa,Xb,ab,db,kc,La,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Qa,Ma,Qb,fb,ib,ya,
ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,Pb,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,Ka,sc,Oc,Kc,yb,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Bb,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd;k=b.viewport;p=k.x|0;q=k.y|0;d="width"in k?k.width|0:ma.framebufferWidth-p;l="height"in k?k.height|0:ma.framebufferHeight-q;m=ma.viewportWidth;ma.viewportWidth=d;h=ma.viewportHeight;ma.viewportHeight=
l;C=Ja[0];Ja[0]=p;D=Ja[1];Ja[1]=q;z=Ja[2];Ja[2]=d;F=Ja[3];Ja[3]=l;A=jc[0];jc[0]=0;H=jc[1];jc[1]=0;G=jc[2];jc[2]=0;I=jc[3];jc[3]=0;N=ga.blend_enable;ga.blend_enable=!0;J=zc[0];zc[0]=32774;da=zc[1];zc[1]=32774;aa=O[0];O[0]=770;L=O[1];O[1]=771;P=O[2];O[2]=773;K=O[3];O[3]=1;Q=ga.depth_enable;ga.depth_enable=!1;U=b.viewport;R=U.x|0;X=U.y|0;fa="width"in U?U.width|0:ma.framebufferWidth-R;ka="height"in U?U.height|0:ma.framebufferHeight-X;W=Z[0];Z[0]=R;T=Z[1];Z[1]=X;Y=Z[2];Z[2]=fa;V=Z[3];Z[3]=ka;ia=ga.scissor_enable;
ga.scissor_enable=!0;if(Da=ea.profile)ua=performance.now(),c.count++;pc=wa.count;wa.count=36;Aa=b.count;ta=wa.instances;wa.instances=Aa;Ga=wa.primitive;wa.primitive=4;oa=b.capSize;ha=cc[5];cc[5]=oa;Cc=b.lineWidth;pa=cc[4];cc[4]=Cc;Yb=b.opacity;Hc=cc[10];cc[10]=Yb;Ya=b.range;Ea=cc[18];cc[18]=Ya;td=b.scale;Hb=cc[6];cc[6]=td;Ua=b.scaleFract;Lb=cc[7];cc[7]=Ua;cb=b.translate;Kb=cc[8];cc[8]=cb;ja=b.translateFract;bd=cc[9];cc[9]=ja;la=n.call(this,ma,b,f);Tb=cc[3];cc[3]=la;v=r.buffer;r.buffer=g;Ub=r.divisor;
r.divisor=0;Pa=r.normalized;r.normalized=!1;ob=r.offset;r.offset=16;tb=r.size;r.size=0;hb=r.state;r.state=1;Ra=r.stride;r.stride=24;Oa=r.type;r.type=5126;Xb=r.w;r.w=0;ab=r.x;r.x=0;db=r.y;r.y=0;kc=r.z;r.z=0;La=u.call(this,ma,b,f);Eb.offset=La;ic=!1;jb=null;kb=0;va=!1;za=pb=0;Va=1;bb=0;Ba=5126;zb=Ab=Na=eb=0;nb(Eb)?(ic=!0,jb=E.createStream(34962,Eb),Ba=jb.dtype):(jb=E.getBuffer(Eb))?Ba=jb.dtype:"constant"in Eb?(Va=2,"number"===typeof Eb.constant?(Na=Eb.constant,Ab=zb=eb=0):(Na=0<Eb.constant.length?Eb.constant[0]:
0,Ab=1<Eb.constant.length?Eb.constant[1]:0,zb=2<Eb.constant.length?Eb.constant[2]:0,eb=3<Eb.constant.length?Eb.constant[3]:0)):(jb=nb(Eb.buffer)?E.createStream(34962,Eb.buffer):E.getBuffer(Eb.buffer),Ba="type"in Eb?nc[Eb.type]:jb.dtype,va=!!Eb.normalized,za=Eb.size|0,pb=Eb.offset|0,bb=Eb.stride|0,kb=Eb.divisor|0);Ta=M.buffer;M.buffer=jb;Ic=M.divisor;M.divisor=kb;Ib=M.normalized;M.normalized=va;Mb=M.offset;M.offset=pb;Vb=M.size;M.size=za;xa=M.state;M.state=Va;Qa=M.stride;M.stride=bb;Ma=M.type;M.type=
Ba;Qb=M.w;M.w=eb;fb=M.x;M.x=Na;ib=M.y;M.y=Ab;ya=M.z;M.z=zb;ec=w.buffer;w.buffer=y;Fa=w.divisor;w.divisor=0;qb=w.normalized;w.normalized=!1;rb=w.offset;w.offset=0;Za=w.size;w.size=0;$a=w.state;w.state=1;rc=w.stride;w.stride=24;cd=w.type;w.type=5126;tc=w.w;w.w=0;Wa=w.x;w.x=0;Nb=w.y;w.y=0;Pb=w.z;w.z=0;Ha=sa.call(this,ma,b,f);qa.offset=Ha;vc=!1;Sa=null;Ca=0;lb=!1;Cb=ub=0;sb=1;uc=0;vb=5126;Kc=Oc=sc=Ka=0;nb(qa)?(vc=!0,Sa=E.createStream(34962,qa),vb=Sa.dtype):(Sa=E.getBuffer(qa))?vb=Sa.dtype:"constant"in
qa?(sb=2,"number"===typeof qa.constant?(sc=qa.constant,Oc=Kc=Ka=0):(sc=0<qa.constant.length?qa.constant[0]:0,Oc=1<qa.constant.length?qa.constant[1]:0,Kc=2<qa.constant.length?qa.constant[2]:0,Ka=3<qa.constant.length?qa.constant[3]:0)):(Sa=nb(qa.buffer)?E.createStream(34962,qa.buffer):E.getBuffer(qa.buffer),vb="type"in qa?nc[qa.type]:Sa.dtype,lb=!!qa.normalized,Cb=qa.size|0,ub=qa.offset|0,uc=qa.stride|0,Ca=qa.divisor|0);yb=x.buffer;x.buffer=Sa;fd=x.divisor;x.divisor=Ca;Wb=x.normalized;x.normalized=
lb;bc=x.offset;x.offset=ub;Rb=x.size;x.size=Cb;Ia=x.state;x.state=sb;Zb=x.stride;x.stride=uc;mb=x.type;x.type=vb;wb=x.w;x.w=Ka;Ob=x.x;x.x=sc;Sb=x.y;x.y=Oc;fc=x.z;x.z=Kc;hc=B.buffer;B.buffer=e;Bb=B.divisor;B.divisor=0;xc=B.normalized;B.normalized=!1;yc=B.offset;B.offset=8;Ac=B.size;B.size=0;Lc=B.state;B.state=1;Zc=B.stride;B.stride=24;Rc=B.type;B.type=5126;Mc=B.w;B.w=0;Jb=B.x;B.x=0;Db=B.y;B.y=0;Nc=B.z;B.z=0;Ec=ca.call(this,ma,b,f);Fb.offset=Ec;Sc=!1;gc=null;Vc=0;gd=!1;md=kd=0;Wc=1;bf=0;Zd=5126;Md=
me=se=ke=0;nb(Fb)?(Sc=!0,gc=E.createStream(34962,Fb),Zd=gc.dtype):(gc=E.getBuffer(Fb))?Zd=gc.dtype:"constant"in Fb?(Wc=2,"number"===typeof Fb.constant?(se=Fb.constant,me=Md=ke=0):(se=0<Fb.constant.length?Fb.constant[0]:0,me=1<Fb.constant.length?Fb.constant[1]:0,Md=2<Fb.constant.length?Fb.constant[2]:0,ke=3<Fb.constant.length?Fb.constant[3]:0)):(gc=nb(Fb.buffer)?E.createStream(34962,Fb.buffer):E.getBuffer(Fb.buffer),Zd="type"in Fb?nc[Fb.type]:gc.dtype,gd=!!Fb.normalized,md=Fb.size|0,kd=Fb.offset|0,
bf=Fb.stride|0,Vc=Fb.divisor|0);Kd=t.buffer;t.buffer=gc;id=t.divisor;t.divisor=Vc;Bc=t.normalized;t.normalized=gd;od=t.offset;t.offset=kd;ld=t.size;t.size=md;ad=t.state;t.state=Wc;pd=t.stride;t.stride=bf;Gd=t.type;t.type=Zd;Hd=t.w;t.w=ke;te=t.x;t.x=se;ze=t.y;t.y=me;Ae=t.z;t.z=Md;ne=S.call(this,ma,b,f);xb.offset=ne;ee=!1;de=null;pe=0;be=!1;wc=he=0;Uc=1;qe=0;le=5126;Rd=Qd=Pd=Ld=0;nb(xb)?(ee=!0,de=E.createStream(34962,xb),le=de.dtype):(de=E.getBuffer(xb))?le=de.dtype:"constant"in xb?(Uc=2,"number"===
typeof xb.constant?(Pd=xb.constant,Qd=Rd=Ld=0):(Pd=0<xb.constant.length?xb.constant[0]:0,Qd=1<xb.constant.length?xb.constant[1]:0,Rd=2<xb.constant.length?xb.constant[2]:0,Ld=3<xb.constant.length?xb.constant[3]:0)):(de=nb(xb.buffer)?E.createStream(34962,xb.buffer):E.getBuffer(xb.buffer),le="type"in xb?nc[xb.type]:de.dtype,be=!!xb.normalized,wc=xb.size|0,he=xb.offset|0,qe=xb.stride|0,pe=xb.divisor|0);ie=ba.buffer;ba.buffer=de;vf=ba.divisor;ba.divisor=pe;Ce=ba.normalized;ba.normalized=be;oe=ba.offset;
ba.offset=he;Re=ba.size;ba.size=wc;Se=ba.state;ba.state=Uc;Ne=ba.stride;ba.stride=qe;re=ba.type;ba.type=le;Fe=ba.w;ba.w=Ld;He=ba.x;ba.x=Pd;Ie=ba.y;ba.y=Qd;Je=ba.z;ba.z=Rd;Ge=ra.vert;ra.vert=2;Nd=ra.frag;ra.frag=1;ea.dirty=!0;a(ma,b,f);ma.viewportWidth=m;ma.viewportHeight=h;Ja[0]=C;Ja[1]=D;Ja[2]=z;Ja[3]=F;jc[0]=A;jc[1]=H;jc[2]=G;jc[3]=I;ga.blend_enable=N;zc[0]=J;zc[1]=da;O[0]=aa;O[1]=L;O[2]=P;O[3]=K;ga.depth_enable=Q;Z[0]=W;Z[1]=T;Z[2]=Y;Z[3]=V;ga.scissor_enable=ia;Da&&(c.cpuTime+=performance.now()-
ua);wa.count=pc;wa.instances=ta;wa.primitive=Ga;cc[5]=ha;cc[4]=pa;cc[10]=Hc;cc[18]=Ea;cc[6]=Hb;cc[7]=Lb;cc[8]=Kb;cc[9]=bd;cc[3]=Tb;r.buffer=v;r.divisor=Ub;r.normalized=Pa;r.offset=ob;r.size=tb;r.state=hb;r.stride=Ra;r.type=Oa;r.w=Xb;r.x=ab;r.y=db;r.z=kc;ic&&E.destroyStream(jb);M.buffer=Ta;M.divisor=Ic;M.normalized=Ib;M.offset=Mb;M.size=Vb;M.state=xa;M.stride=Qa;M.type=Ma;M.w=Qb;M.x=fb;M.y=ib;M.z=ya;w.buffer=ec;w.divisor=Fa;w.normalized=qb;w.offset=rb;w.size=Za;w.state=$a;w.stride=rc;w.type=cd;w.w=
tc;w.x=Wa;w.y=Nb;w.z=Pb;vc&&E.destroyStream(Sa);x.buffer=yb;x.divisor=fd;x.normalized=Wb;x.offset=bc;x.size=Rb;x.state=Ia;x.stride=Zb;x.type=mb;x.w=wb;x.x=Ob;x.y=Sb;x.z=fc;B.buffer=hc;B.divisor=Bb;B.normalized=xc;B.offset=yc;B.size=Ac;B.state=Lc;B.stride=Zc;B.type=Rc;B.w=Mc;B.x=Jb;B.y=Db;B.z=Nc;Sc&&E.destroyStream(gc);t.buffer=Kd;t.divisor=id;t.normalized=Bc;t.offset=od;t.size=ld;t.state=ad;t.stride=pd;t.type=Gd;t.w=Hd;t.x=te;t.y=ze;t.z=Ae;ee&&E.destroyStream(de);ba.buffer=ie;ba.divisor=vf;ba.normalized=
Ce;ba.offset=oe;ba.size=Re;ba.state=Se;ba.stride=Ne;ba.type=re;ba.w=Fe;ba.x=He;ba.y=Ie;ba.z=Je;ra.vert=Ge;ra.frag=Nd;ea.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,c,d,h,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,sa,x,B,t,na,S,ba,A,Y,I,V,K,ja,T,ha,la,Qa){var Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra,cc,pc,jc,td,zc,aa,O,ka,Ga,Kb,bd,Oc,J,G,ia,ua,Z,fa,
ta,N,H;Bb=a.attributes;oa=a.buffer;Oa=a.context;W=a.current;P=a.draw;L=a.elements;U=a.extensions;pa=a.framebuffer;Q=a.gl;Pb=a.isBufferArgs;ab=a.next;R=a.shader;E=a.uniforms;ma=a.vao;ea=ab.blend_color;wa=W.blend_color;La=ab.blend_equation;yb=W.blend_equation;Ka=ab.blend_func;X=W.blend_func;nb=ab.colorMask;ga=W.colorMask;ra=ab.depth_range;cc=W.depth_range;pc=ab.polygonOffset_offset;jc=W.polygonOffset_offset;td=ab.sample_coverage;zc=W.sample_coverage;aa=ab.scissor_box;O=W.scissor_box;ka=ab.stencil_func;
Ga=W.stencil_func;Kb=ab.stencil_opBack;bd=W.stencil_opBack;Oc=ab.stencil_opFront;J=W.stencil_opFront;G=ab.viewport;ia=W.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Z={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};ta={divisor:1,offset:16,stride:8};N={divisor:1,offset:16,stride:8};H={divisor:1,offset:0,stride:4};return{batch:function(b,e){var g,a,f,k,n,p;g=pa.next;g!==pa.cur&&(g?Q.bindFramebuffer(36160,g.framebuffer):Q.bindFramebuffer(36160,
null),pa.cur=g);if(W.dirty){var q,r,d,h,y,C,D,z,E,G,aa,R,ea,La,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,$c,sd,Tc,Ed,Pc;q=ab.dither;q!==W.dither&&(q?Q.enable(3024):Q.disable(3024),W.dither=q);r=ab.depth_func;r!==W.depth_func&&(Q.depthFunc(r),W.depth_func=r);d=ra[0];h=ra[1];if(d!==cc[0]||h!==cc[1])Q.depthRange(d,h),cc[0]=d,cc[1]=h;y=ab.depth_mask;y!==W.depth_mask&&(Q.depthMask(y),W.depth_mask=y);C=nb[0];D=nb[1];z=nb[2];E=nb[3];if(C!==ga[0]||D!==ga[1]||z!==ga[2]||E!==ga[3])Q.colorMask(C,D,z,E),ga[0]=C,
ga[1]=D,ga[2]=z,ga[3]=E;G=ab.cull_enable;G!==W.cull_enable&&(G?Q.enable(2884):Q.disable(2884),W.cull_enable=G);aa=ab.cull_face;aa!==W.cull_face&&(Q.cullFace(aa),W.cull_face=aa);R=ab.frontFace;R!==W.frontFace&&(Q.frontFace(R),W.frontFace=R);ea=ab.lineWidth;ea!==W.lineWidth&&(Q.lineWidth(ea),W.lineWidth=ea);La=ab.polygonOffset_enable;La!==W.polygonOffset_enable&&(La?Q.enable(32823):Q.disable(32823),W.polygonOffset_enable=La);Ad=pc[0];xe=pc[1];if(Ad!==jc[0]||xe!==jc[1])Q.polygonOffset(Ad,xe),jc[0]=Ad,
jc[1]=xe;Me=ab.sample_alpha;Me!==W.sample_alpha&&(Me?Q.enable(32926):Q.disable(32926),W.sample_alpha=Me);Qe=ab.sample_enable;Qe!==W.sample_enable&&(Qe?Q.enable(32928):Q.disable(32928),W.sample_enable=Qe);Bd=td[0];Be=td[1];if(Bd!==zc[0]||Be!==zc[1])Q.sampleCoverage(Bd,Be),zc[0]=Bd,zc[1]=Be;Vd=ab.stencil_mask;Vd!==W.stencil_mask&&(Q.stencilMask(Vd),W.stencil_mask=Vd);Wd=ka[0];ae=ka[1];Yd=ka[2];if(Wd!==Ga[0]||ae!==Ga[1]||Yd!==Ga[2])Q.stencilFunc(Wd,ae,Yd),Ga[0]=Wd,Ga[1]=ae,Ga[2]=Yd;qd=Oc[0];nd=Oc[1];
vd=Oc[2];$c=Oc[3];if(qd!==J[0]||nd!==J[1]||vd!==J[2]||$c!==J[3])Q.stencilOpSeparate(qd,nd,vd,$c),J[0]=qd,J[1]=nd,J[2]=vd,J[3]=$c;sd=Kb[0];Tc=Kb[1];Ed=Kb[2];Pc=Kb[3];if(sd!==bd[0]||Tc!==bd[1]||Ed!==bd[2]||Pc!==bd[3])Q.stencilOpSeparate(sd,Tc,Ed,Pc),bd[0]=sd,bd[1]=Tc,bd[2]=Ed,bd[3]=Pc}Q.blendColor(0,0,0,0);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=0;Q.enable(3042);W.blend_enable=!0;Q.blendEquationSeparate(32774,32774);yb[0]=32774;yb[1]=32774;Q.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;
Q.enable(3089);W.scissor_enable=!0;Q.disable(2960);W.stencil_enable=!1;if(a=W.profile)f=performance.now(),c.count+=e;Q.useProgram(u.program);k=U.angle_instanced_arrays;var Jc,qc,gb,hd,Gb;ma.setVAO(null);Jc=Y.location;qc=Bb[Jc];qc.buffer||Q.enableVertexAttribArray(Jc);if(5126!==qc.type||1!==qc.size||qc.buffer!==m||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Jc,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=m,qc.normalized=!1,qc.offset=0,qc.stride=
8;0!==qc.divisor&&(k.vertexAttribDivisorANGLE(Jc,0),qc.divisor=0);gb=I.location;hd=Bb[gb];hd.buffer||Q.enableVertexAttribArray(gb);if(5126!==hd.type||1!==hd.size||hd.buffer!==l||!1!==hd.normalized||4!==hd.offset||8!==hd.stride)Q.bindBuffer(34962,l.buffer),Q.vertexAttribPointer(gb,1,5126,!1,8,4),hd.type=5126,hd.size=1,hd.buffer=l,hd.normalized=!1,hd.offset=4,hd.stride=8;0!==hd.divisor&&(k.vertexAttribDivisorANGLE(gb,0),hd.divisor=0);(Gb=P.elements)?Q.bindBuffer(34963,Gb.buffer.buffer):ma.currentVAO&&
(Gb=L.getElements(ma.currentVAO.elements))&&Q.bindBuffer(34963,Gb.buffer.buffer);for(n=0;n<e;++n){p=b[n];var oc,Xa,Fc,$b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,Ka,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,
ld,ad;oc=p.viewport;Xa=oc.x|0;Fc=oc.y|0;$b="width"in oc?oc.width|0:Oa.framebufferWidth-Xa;lc="height"in oc?oc.height|0:Oa.framebufferHeight-Fc;Id=Oa.viewportWidth;Oa.viewportWidth=$b;rd=Oa.viewportHeight;Oa.viewportHeight=lc;Q.viewport(Xa,Fc,$b,lc);ia[0]=Xa;ia[1]=Fc;ia[2]=$b;ia[3]=lc;(Gc=M.call(this,Oa,p,n))?Q.enable(2929):Q.disable(2929);W.depth_enable=Gc;dc=p.viewport;Cc=dc.x|0;Xc=dc.y|0;Yb="width"in dc?dc.width|0:Oa.framebufferWidth-Cc;Hc="height"in dc?dc.height|0:Oa.framebufferHeight-Xc;Q.scissor(Cc,
Xc,Yb,Hc);O[0]=Cc;O[1]=Xc;O[2]=Yb;O[3]=Hc;Z.buffer=p.positionBuffer;Ya=!1;Ea=null;ud=0;Hb=!1;Lb=Ua=0;cb=1;Dc=0;ac=5126;v=Tb=mc=Ka=0;Pb(Z)?(Ya=!0,Ea=oa.createStream(34962,Z),ac=Ea.dtype):(Ea=oa.getBuffer(Z))?ac=Ea.dtype:"constant"in Z?(cb=2,"number"===typeof Z.constant?(mc=Z.constant,Tb=v=Ka=0):(mc=0<Z.constant.length?Z.constant[0]:0,Tb=1<Z.constant.length?Z.constant[1]:0,v=2<Z.constant.length?Z.constant[2]:0,Ka=3<Z.constant.length?Z.constant[3]:0)):(Ea=Pb(Z.buffer)?oa.createStream(34962,Z.buffer):
oa.getBuffer(Z.buffer),ac="type"in Z?ua[Z.type]:Ea.dtype,Hb=!!Z.normalized,Lb=Z.size|0,Ua=Z.offset|0,Dc=Z.stride|0,ud=Z.divisor|0);Ub=sa.location;Pa=Bb[Ub];if(1===cb){Pa.buffer||Q.enableVertexAttribArray(Ub);ob=Lb||2;if(Pa.type!==ac||Pa.size!==ob||Pa.buffer!==Ea||Pa.normalized!==Hb||Pa.offset!==Ua||Pa.stride!==Dc)Q.bindBuffer(34962,Ea.buffer),Q.vertexAttribPointer(Ub,ob,ac,Hb,Dc,Ua),Pa.type=ac,Pa.size=ob,Pa.buffer=Ea,Pa.normalized=Hb,Pa.offset=Ua,Pa.stride=Dc;Pa.divisor!==ud&&(k.vertexAttribDivisorANGLE(Ub,
ud),Pa.divisor=ud)}else if(Pa.buffer&&(Q.disableVertexAttribArray(Ub),Pa.buffer=null),Pa.x!==mc||Pa.y!==Tb||Pa.z!==v||Pa.w!==Ka)Q.vertexAttrib4f(Ub,mc,Tb,v,Ka),Pa.x=mc,Pa.y=Tb,Pa.z=v,Pa.w=Ka;ta.buffer=p.positionBuffer;tb=!1;hb=null;Ra=0;Qc=!1;jd=Xb=0;db=1;kc=0;Yc=5126;va=kb=jb=ic=0;Pb(ta)?(tb=!0,hb=oa.createStream(34962,ta),Yc=hb.dtype):(hb=oa.getBuffer(ta))?Yc=hb.dtype:"constant"in ta?(db=2,"number"===typeof ta.constant?(jb=ta.constant,kb=va=ic=0):(jb=0<ta.constant.length?ta.constant[0]:0,kb=1<ta.constant.length?
ta.constant[1]:0,va=2<ta.constant.length?ta.constant[2]:0,ic=3<ta.constant.length?ta.constant[3]:0)):(hb=Pb(ta.buffer)?oa.createStream(34962,ta.buffer):oa.getBuffer(ta.buffer),Yc="type"in ta?ua[ta.type]:hb.dtype,Qc=!!ta.normalized,jd=ta.size|0,Xb=ta.offset|0,kc=ta.stride|0,Ra=ta.divisor|0);pb=B.location;za=Bb[pb];if(1===db){za.buffer||Q.enableVertexAttribArray(pb);Va=jd||2;if(za.type!==Yc||za.size!==Va||za.buffer!==hb||za.normalized!==Qc||za.offset!==Xb||za.stride!==kc)Q.bindBuffer(34962,hb.buffer),
Q.vertexAttribPointer(pb,Va,Yc,Qc,kc,Xb),za.type=Yc,za.size=Va,za.buffer=hb,za.normalized=Qc,za.offset=Xb,za.stride=kc;za.divisor!==Ra&&(k.vertexAttribDivisorANGLE(pb,Ra),za.divisor=Ra)}else if(za.buffer&&(Q.disableVertexAttribArray(pb),za.buffer=null),za.x!==jb||za.y!==kb||za.z!==va||za.w!==ic)Q.vertexAttrib4f(pb,jb,kb,va,ic),za.x=jb,za.y=kb,za.z=va,za.w=ic;fa.buffer=p.positionFractBuffer;bb=!1;Ba=null;eb=0;Na=!1;zb=Ab=0;Ta=1;Ic=0;Ib=5126;Jd=xa=Vb=Mb=0;Pb(fa)?(bb=!0,Ba=oa.createStream(34962,fa),
Ib=Ba.dtype):(Ba=oa.getBuffer(fa))?Ib=Ba.dtype:"constant"in fa?(Ta=2,"number"===typeof fa.constant?(Vb=fa.constant,xa=Jd=Mb=0):(Vb=0<fa.constant.length?fa.constant[0]:0,xa=1<fa.constant.length?fa.constant[1]:0,Jd=2<fa.constant.length?fa.constant[2]:0,Mb=3<fa.constant.length?fa.constant[3]:0)):(Ba=Pb(fa.buffer)?oa.createStream(34962,fa.buffer):oa.getBuffer(fa.buffer),Ib="type"in fa?ua[fa.type]:Ba.dtype,Na=!!fa.normalized,zb=fa.size|0,Ab=fa.offset|0,Ic=fa.stride|0,eb=fa.divisor|0);Ma=x.location;Qb=
Bb[Ma];if(1===Ta){Qb.buffer||Q.enableVertexAttribArray(Ma);fb=zb||2;if(Qb.type!==Ib||Qb.size!==fb||Qb.buffer!==Ba||Qb.normalized!==Na||Qb.offset!==Ab||Qb.stride!==Ic)Q.bindBuffer(34962,Ba.buffer),Q.vertexAttribPointer(Ma,fb,Ib,Na,Ic,Ab),Qb.type=Ib,Qb.size=fb,Qb.buffer=Ba,Qb.normalized=Na,Qb.offset=Ab,Qb.stride=Ic;Qb.divisor!==eb&&(k.vertexAttribDivisorANGLE(Ma,eb),Qb.divisor=eb)}else if(Qb.buffer&&(Q.disableVertexAttribArray(Ma),Qb.buffer=null),Qb.x!==Vb||Qb.y!==xa||Qb.z!==Jd||Qb.w!==Mb)Q.vertexAttrib4f(Ma,
Vb,xa,Jd,Mb),Qb.x=Vb,Qb.y=xa,Qb.z=Jd,Qb.w=Mb;N.buffer=p.positionFractBuffer;ib=!1;ya=null;ec=0;Fa=!1;rb=qb=0;Za=1;$a=0;rc=5126;Nb=Wa=tc=cd=0;Pb(N)?(ib=!0,ya=oa.createStream(34962,N),rc=ya.dtype):(ya=oa.getBuffer(N))?rc=ya.dtype:"constant"in N?(Za=2,"number"===typeof N.constant?(tc=N.constant,Wa=Nb=cd=0):(tc=0<N.constant.length?N.constant[0]:0,Wa=1<N.constant.length?N.constant[1]:0,Nb=2<N.constant.length?N.constant[2]:0,cd=3<N.constant.length?N.constant[3]:0)):(ya=Pb(N.buffer)?oa.createStream(34962,
N.buffer):oa.getBuffer(N.buffer),rc="type"in N?ua[N.type]:ya.dtype,Fa=!!N.normalized,rb=N.size|0,qb=N.offset|0,$a=N.stride|0,ec=N.divisor|0);dd=t.location;Ha=Bb[dd];if(1===Za){Ha.buffer||Q.enableVertexAttribArray(dd);vc=rb||2;if(Ha.type!==rc||Ha.size!==vc||Ha.buffer!==ya||Ha.normalized!==Fa||Ha.offset!==qb||Ha.stride!==$a)Q.bindBuffer(34962,ya.buffer),Q.vertexAttribPointer(dd,vc,rc,Fa,$a,qb),Ha.type=rc,Ha.size=vc,Ha.buffer=ya,Ha.normalized=Fa,Ha.offset=qb,Ha.stride=$a;Ha.divisor!==ec&&(k.vertexAttribDivisorANGLE(dd,
ec),Ha.divisor=ec)}else if(Ha.buffer&&(Q.disableVertexAttribArray(dd),Ha.buffer=null),Ha.x!==tc||Ha.y!==Wa||Ha.z!==Nb||Ha.w!==cd)Q.vertexAttrib4f(dd,tc,Wa,Nb,cd),Ha.x=tc,Ha.y=Wa,Ha.z=Nb,Ha.w=cd;H.buffer=p.colorBuffer;Sa=!1;Ca=null;lb=0;ub=!1;sb=Cb=0;uc=1;vb=0;wd=5126;ed=Kc=Fd=sc=0;Pb(H)?(Sa=!0,Ca=oa.createStream(34962,H),wd=Ca.dtype):(Ca=oa.getBuffer(H))?wd=Ca.dtype:"constant"in H?(uc=2,"number"===typeof H.constant?(Fd=H.constant,Kc=ed=sc=0):(Fd=0<H.constant.length?H.constant[0]:0,Kc=1<H.constant.length?
H.constant[1]:0,ed=2<H.constant.length?H.constant[2]:0,sc=3<H.constant.length?H.constant[3]:0)):(Ca=Pb(H.buffer)?oa.createStream(34962,H.buffer):oa.getBuffer(H.buffer),wd="type"in H?ua[H.type]:Ca.dtype,ub=!!H.normalized,sb=H.size|0,Cb=H.offset|0,vb=H.stride|0,lb=H.divisor|0);fd=na.location;Wb=Bb[fd];if(1===uc){Wb.buffer||Q.enableVertexAttribArray(fd);bc=sb||4;if(Wb.type!==wd||Wb.size!==bc||Wb.buffer!==Ca||Wb.normalized!==ub||Wb.offset!==Cb||Wb.stride!==vb)Q.bindBuffer(34962,Ca.buffer),Q.vertexAttribPointer(fd,
bc,wd,ub,vb,Cb),Wb.type=wd,Wb.size=bc,Wb.buffer=Ca,Wb.normalized=ub,Wb.offset=Cb,Wb.stride=vb;Wb.divisor!==lb&&(k.vertexAttribDivisorANGLE(fd,lb),Wb.divisor=lb)}else if(Wb.buffer&&(Q.disableVertexAttribArray(fd),Wb.buffer=null),Wb.x!==Fd||Wb.y!==Kc||Wb.z!==ed||Wb.w!==sc)Q.vertexAttrib4f(fd,Fd,Kc,ed,sc),Wb.x=Fd,Wb.y=Kc,Wb.z=ed,Wb.w=sc;Rb=p.scale;Ia=Rb[0];mb=Rb[1];n&&Zb===Ia&&wb===mb||(Zb=Ia,wb=mb,Q.uniform2f(K.location,Ia,mb));Ob=p.scaleFract;Sb=Ob[0];hc=Ob[1];n&&fc===Sb&&Ze===hc||(fc=Sb,Ze=hc,Q.uniform2f(ja.location,
Sb,hc));xc=p.translate;yc=xc[0];Lc=xc[1];n&&Ac===yc&&Zc===Lc||(Ac=yc,Zc=Lc,Q.uniform2f(ha.location,yc,Lc));Rc=p.translateFract;Mc=Rc[0];Db=Rc[1];n&&Jb===Mc&&Nc===Db||(Jb=Mc,Nc=Db,Q.uniform2f(la.location,Mc,Db));Ec=p.thickness;n&&Sc===Ec||(Sc=Ec,Q.uniform1f(T.location,Ec));gc=p.depth;n&&Vc===gc||(Vc=gc,Q.uniform1f(A.location,gc));gd=w.call(this,Oa,p,n);kd=gd[0];Wc=gd[1];Zd=gd[2];se=gd[3];n&&md===kd&&bf===Wc&&ke===Zd&&me===se||(md=kd,bf=Wc,ke=Zd,me=se,Q.uniform4f(Qa.location,kd,Wc,Zd,se));Md=p.dashLength;
n&&Kd===Md||(Kd=Md,Q.uniform1f(S.location,Md));id=p.opacity;n&&Bc===id||(Bc=id,Q.uniform1f(V.location,id));(od=p.dashTexture)&&"framebuffer"===od._reglType&&(od=od.color[0]);ld=od._texture;Q.uniform1i(ba.location,ld.bind());ad=p.count;0<ad?Gb?k.drawElementsInstancedANGLE(5,4,Gb.type,0<<(Gb.type-5121>>1),ad):k.drawArraysInstancedANGLE(5,0,4,ad):0>ad&&(Gb?Q.drawElements(5,4,Gb.type,0<<(Gb.type-5121>>1)):Q.drawArrays(5,0,4));Oa.viewportWidth=Id;Oa.viewportHeight=rd;Ya&&oa.destroyStream(Ea);tb&&oa.destroyStream(hb);
bb&&oa.destroyStream(Ba);ib&&oa.destroyStream(ya);Sa&&oa.destroyStream(Ca);ld.unbind()}W.dirty=!0;ma.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(b){var e,g,a,k,n,p,q,r,u,y,C,w,M,E,G,aa,R,ea,La,Ka,zd,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb,hd,Gb,oc,Xa,Fc,$b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb;e=pa.next;e!==pa.cur&&
(e?Q.bindFramebuffer(36160,e.framebuffer):Q.bindFramebuffer(36160,null),pa.cur=e);if(W.dirty){var rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb;rb=ab.dither;rb!==W.dither&&(rb?Q.enable(3024):Q.disable(3024),W.dither=rb);Za=ab.depth_func;Za!==W.depth_func&&(Q.depthFunc(Za),W.depth_func=Za);$a=ra[0];rc=ra[1];if($a!==cc[0]||rc!==cc[1])Q.depthRange($a,rc),cc[0]=$a,cc[1]=rc;cd=ab.depth_mask;cd!==W.depth_mask&&(Q.depthMask(cd),W.depth_mask=cd);tc=nb[0];
Wa=nb[1];Nb=nb[2];dd=nb[3];if(tc!==ga[0]||Wa!==ga[1]||Nb!==ga[2]||dd!==ga[3])Q.colorMask(tc,Wa,Nb,dd),ga[0]=tc,ga[1]=Wa,ga[2]=Nb,ga[3]=dd;Ha=ab.cull_enable;Ha!==W.cull_enable&&(Ha?Q.enable(2884):Q.disable(2884),W.cull_enable=Ha);vc=ab.cull_face;vc!==W.cull_face&&(Q.cullFace(vc),W.cull_face=vc);Sa=ab.frontFace;Sa!==W.frontFace&&(Q.frontFace(Sa),W.frontFace=Sa);Ca=ab.lineWidth;Ca!==W.lineWidth&&(Q.lineWidth(Ca),W.lineWidth=Ca);lb=ab.polygonOffset_enable;lb!==W.polygonOffset_enable&&(lb?Q.enable(32823):
Q.disable(32823),W.polygonOffset_enable=lb);ub=pc[0];Cb=pc[1];if(ub!==jc[0]||Cb!==jc[1])Q.polygonOffset(ub,Cb),jc[0]=ub,jc[1]=Cb;sb=ab.sample_alpha;sb!==W.sample_alpha&&(sb?Q.enable(32926):Q.disable(32926),W.sample_alpha=sb);uc=ab.sample_enable;uc!==W.sample_enable&&(uc?Q.enable(32928):Q.disable(32928),W.sample_enable=uc);vb=td[0];wd=td[1];if(vb!==zc[0]||wd!==zc[1])Q.sampleCoverage(vb,wd),zc[0]=vb,zc[1]=wd;sc=ab.stencil_mask;sc!==W.stencil_mask&&(Q.stencilMask(sc),W.stencil_mask=sc);Fd=ka[0];Kc=ka[1];
ed=ka[2];if(Fd!==Ga[0]||Kc!==Ga[1]||ed!==Ga[2])Q.stencilFunc(Fd,Kc,ed),Ga[0]=Fd,Ga[1]=Kc,Ga[2]=ed;fd=Oc[0];Wb=Oc[1];bc=Oc[2];Rb=Oc[3];if(fd!==J[0]||Wb!==J[1]||bc!==J[2]||Rb!==J[3])Q.stencilOpSeparate(fd,Wb,bc,Rb),J[0]=fd,J[1]=Wb,J[2]=bc,J[3]=Rb;Ia=Kb[0];Zb=Kb[1];mb=Kb[2];wb=Kb[3];if(Ia!==bd[0]||Zb!==bd[1]||mb!==bd[2]||wb!==bd[3])Q.stencilOpSeparate(Ia,Zb,mb,wb),bd[0]=Ia,bd[1]=Zb,bd[2]=mb,bd[3]=wb}g=b.viewport;a=g.x|0;k=g.y|0;n="width"in g?g.width|0:Oa.framebufferWidth-a;p="height"in g?g.height|0:
Oa.framebufferHeight-k;q=Oa.viewportWidth;Oa.viewportWidth=n;r=Oa.viewportHeight;Oa.viewportHeight=p;Q.viewport(a,k,n,p);ia[0]=a;ia[1]=k;ia[2]=n;ia[3]=p;Q.blendColor(0,0,0,0);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=0;Q.enable(3042);W.blend_enable=!0;Q.blendEquationSeparate(32774,32774);yb[0]=32774;yb[1]=32774;Q.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;(u=d.call(this,Oa,b,0))?Q.enable(2929):Q.disable(2929);W.depth_enable=u;y=b.viewport;C=y.x|0;w=y.y|0;M="width"in y?y.width|0:Oa.framebufferWidth-
C;E="height"in y?y.height|0:Oa.framebufferHeight-w;Q.scissor(C,w,M,E);O[0]=C;O[1]=w;O[2]=M;O[3]=E;Q.enable(3089);W.scissor_enable=!0;Q.disable(2960);W.stencil_enable=!1;if(G=W.profile)aa=performance.now(),c.count++;Q.useProgram(h.program);R=U.angle_instanced_arrays;ma.setVAO(null);Z.buffer=b.positionBuffer;ea=!1;La=null;Ka=0;zd=!1;xe=Ad=0;Me=1;Qe=0;Bd=5126;ae=Wd=Vd=Be=0;Pb(Z)?(ea=!0,La=oa.createStream(34962,Z),Bd=La.dtype):(La=oa.getBuffer(Z))?Bd=La.dtype:"constant"in Z?(Me=2,"number"===typeof Z.constant?
(Vd=Z.constant,Wd=ae=Be=0):(Vd=0<Z.constant.length?Z.constant[0]:0,Wd=1<Z.constant.length?Z.constant[1]:0,ae=2<Z.constant.length?Z.constant[2]:0,Be=3<Z.constant.length?Z.constant[3]:0)):(La=Pb(Z.buffer)?oa.createStream(34962,Z.buffer):oa.getBuffer(Z.buffer),Bd="type"in Z?ua[Z.type]:La.dtype,zd=!!Z.normalized,xe=Z.size|0,Ad=Z.offset|0,Qe=Z.stride|0,Ka=Z.divisor|0);Yd=sa.location;qd=Bb[Yd];if(1===Me){qd.buffer||Q.enableVertexAttribArray(Yd);nd=xe||2;if(qd.type!==Bd||qd.size!==nd||qd.buffer!==La||qd.normalized!==
zd||qd.offset!==Ad||qd.stride!==Qe)Q.bindBuffer(34962,La.buffer),Q.vertexAttribPointer(Yd,nd,Bd,zd,Qe,Ad),qd.type=Bd,qd.size=nd,qd.buffer=La,qd.normalized=zd,qd.offset=Ad,qd.stride=Qe;qd.divisor!==Ka&&(R.vertexAttribDivisorANGLE(Yd,Ka),qd.divisor=Ka)}else if(qd.buffer&&(Q.disableVertexAttribArray(Yd),qd.buffer=null),qd.x!==Vd||qd.y!==Wd||qd.z!==ae||qd.w!==Be)Q.vertexAttrib4f(Yd,Vd,Wd,ae,Be),qd.x=Vd,qd.y=Wd,qd.z=ae,qd.w=Be;ta.buffer=b.positionBuffer;vd=!1;$c=null;sd=0;Tc=!1;Pc=Ed=0;Jc=1;qc=0;gb=5126;
Xa=oc=Gb=hd=0;Pb(ta)?(vd=!0,$c=oa.createStream(34962,ta),gb=$c.dtype):($c=oa.getBuffer(ta))?gb=$c.dtype:"constant"in ta?(Jc=2,"number"===typeof ta.constant?(Gb=ta.constant,oc=Xa=hd=0):(Gb=0<ta.constant.length?ta.constant[0]:0,oc=1<ta.constant.length?ta.constant[1]:0,Xa=2<ta.constant.length?ta.constant[2]:0,hd=3<ta.constant.length?ta.constant[3]:0)):($c=Pb(ta.buffer)?oa.createStream(34962,ta.buffer):oa.getBuffer(ta.buffer),gb="type"in ta?ua[ta.type]:$c.dtype,Tc=!!ta.normalized,Pc=ta.size|0,Ed=ta.offset|
0,qc=ta.stride|0,sd=ta.divisor|0);Fc=B.location;$b=Bb[Fc];if(1===Jc){$b.buffer||Q.enableVertexAttribArray(Fc);lc=Pc||2;if($b.type!==gb||$b.size!==lc||$b.buffer!==$c||$b.normalized!==Tc||$b.offset!==Ed||$b.stride!==qc)Q.bindBuffer(34962,$c.buffer),Q.vertexAttribPointer(Fc,lc,gb,Tc,qc,Ed),$b.type=gb,$b.size=lc,$b.buffer=$c,$b.normalized=Tc,$b.offset=Ed,$b.stride=qc;$b.divisor!==sd&&(R.vertexAttribDivisorANGLE(Fc,sd),$b.divisor=sd)}else if($b.buffer&&(Q.disableVertexAttribArray(Fc),$b.buffer=null),$b.x!==
Gb||$b.y!==oc||$b.z!==Xa||$b.w!==hd)Q.vertexAttrib4f(Fc,Gb,oc,Xa,hd),$b.x=Gb,$b.y=oc,$b.z=Xa,$b.w=hd;fa.buffer=b.positionFractBuffer;Id=!1;rd=null;Gc=0;dc=!1;Xc=Cc=0;Yb=1;Hc=0;Ya=5126;Ua=Hb=ud=Ea=0;Pb(fa)?(Id=!0,rd=oa.createStream(34962,fa),Ya=rd.dtype):(rd=oa.getBuffer(fa))?Ya=rd.dtype:"constant"in fa?(Yb=2,"number"===typeof fa.constant?(ud=fa.constant,Hb=Ua=Ea=0):(ud=0<fa.constant.length?fa.constant[0]:0,Hb=1<fa.constant.length?fa.constant[1]:0,Ua=2<fa.constant.length?fa.constant[2]:0,Ea=3<fa.constant.length?
fa.constant[3]:0)):(rd=Pb(fa.buffer)?oa.createStream(34962,fa.buffer):oa.getBuffer(fa.buffer),Ya="type"in fa?ua[fa.type]:rd.dtype,dc=!!fa.normalized,Xc=fa.size|0,Cc=fa.offset|0,Hc=fa.stride|0,Gc=fa.divisor|0);Lb=x.location;cb=Bb[Lb];if(1===Yb){cb.buffer||Q.enableVertexAttribArray(Lb);Dc=Xc||2;if(cb.type!==Ya||cb.size!==Dc||cb.buffer!==rd||cb.normalized!==dc||cb.offset!==Cc||cb.stride!==Hc)Q.bindBuffer(34962,rd.buffer),Q.vertexAttribPointer(Lb,Dc,Ya,dc,Hc,Cc),cb.type=Ya,cb.size=Dc,cb.buffer=rd,cb.normalized=
dc,cb.offset=Cc,cb.stride=Hc;cb.divisor!==Gc&&(R.vertexAttribDivisorANGLE(Lb,Gc),cb.divisor=Gc)}else if(cb.buffer&&(Q.disableVertexAttribArray(Lb),cb.buffer=null),cb.x!==ud||cb.y!==Hb||cb.z!==Ua||cb.w!==Ea)Q.vertexAttrib4f(Lb,ud,Hb,Ua,Ea),cb.x=ud,cb.y=Hb,cb.z=Ua,cb.w=Ea;N.buffer=b.positionFractBuffer;ac=!1;ye=null;mc=0;Tb=!1;Ub=v=0;Pa=1;ob=0;tb=5126;Xb=Qc=Ra=hb=0;Pb(N)?(ac=!0,ye=oa.createStream(34962,N),tb=ye.dtype):(ye=oa.getBuffer(N))?tb=ye.dtype:"constant"in N?(Pa=2,"number"===typeof N.constant?
(Ra=N.constant,Qc=Xb=hb=0):(Ra=0<N.constant.length?N.constant[0]:0,Qc=1<N.constant.length?N.constant[1]:0,Xb=2<N.constant.length?N.constant[2]:0,hb=3<N.constant.length?N.constant[3]:0)):(ye=Pb(N.buffer)?oa.createStream(34962,N.buffer):oa.getBuffer(N.buffer),tb="type"in N?ua[N.type]:ye.dtype,Tb=!!N.normalized,Ub=N.size|0,v=N.offset|0,ob=N.stride|0,mc=N.divisor|0);jd=t.location;db=Bb[jd];if(1===Pa){db.buffer||Q.enableVertexAttribArray(jd);kc=Ub||2;if(db.type!==tb||db.size!==kc||db.buffer!==ye||db.normalized!==
Tb||db.offset!==v||db.stride!==ob)Q.bindBuffer(34962,ye.buffer),Q.vertexAttribPointer(jd,kc,tb,Tb,ob,v),db.type=tb,db.size=kc,db.buffer=ye,db.normalized=Tb,db.offset=v,db.stride=ob;db.divisor!==mc&&(R.vertexAttribDivisorANGLE(jd,mc),db.divisor=mc)}else if(db.buffer&&(Q.disableVertexAttribArray(jd),db.buffer=null),db.x!==Ra||db.y!==Qc||db.z!==Xb||db.w!==hb)Q.vertexAttrib4f(jd,Ra,Qc,Xb,hb),db.x=Ra,db.y=Qc,db.z=Xb,db.w=hb;H.buffer=b.colorBuffer;Yc=!1;ic=null;jb=0;kb=!1;pb=va=0;za=1;Va=0;bb=5126;Ab=Na=
eb=Ba=0;Pb(H)?(Yc=!0,ic=oa.createStream(34962,H),bb=ic.dtype):(ic=oa.getBuffer(H))?bb=ic.dtype:"constant"in H?(za=2,"number"===typeof H.constant?(eb=H.constant,Na=Ab=Ba=0):(eb=0<H.constant.length?H.constant[0]:0,Na=1<H.constant.length?H.constant[1]:0,Ab=2<H.constant.length?H.constant[2]:0,Ba=3<H.constant.length?H.constant[3]:0)):(ic=Pb(H.buffer)?oa.createStream(34962,H.buffer):oa.getBuffer(H.buffer),bb="type"in H?ua[H.type]:ic.dtype,kb=!!H.normalized,pb=H.size|0,va=H.offset|0,Va=H.stride|0,jb=H.divisor|
0);zb=na.location;Ta=Bb[zb];if(1===za){Ta.buffer||Q.enableVertexAttribArray(zb);Ic=pb||4;if(Ta.type!==bb||Ta.size!==Ic||Ta.buffer!==ic||Ta.normalized!==kb||Ta.offset!==va||Ta.stride!==Va)Q.bindBuffer(34962,ic.buffer),Q.vertexAttribPointer(zb,Ic,bb,kb,Va,va),Ta.type=bb,Ta.size=Ic,Ta.buffer=ic,Ta.normalized=kb,Ta.offset=va,Ta.stride=Va;Ta.divisor!==jb&&(R.vertexAttribDivisorANGLE(zb,jb),Ta.divisor=jb)}else if(Ta.buffer&&(Q.disableVertexAttribArray(zb),Ta.buffer=null),Ta.x!==eb||Ta.y!==Na||Ta.z!==Ab||
Ta.w!==Ba)Q.vertexAttrib4f(zb,eb,Na,Ab,Ba),Ta.x=eb,Ta.y=Na,Ta.z=Ab,Ta.w=Ba;Ib=Y.location;Mb=Bb[Ib];Mb.buffer||Q.enableVertexAttribArray(Ib);if(5126!==Mb.type||1!==Mb.size||Mb.buffer!==m||!1!==Mb.normalized||0!==Mb.offset||8!==Mb.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Ib,1,5126,!1,8,0),Mb.type=5126,Mb.size=1,Mb.buffer=m,Mb.normalized=!1,Mb.offset=0,Mb.stride=8;0!==Mb.divisor&&(R.vertexAttribDivisorANGLE(Ib,0),Mb.divisor=0);Vb=I.location;xa=Bb[Vb];xa.buffer||Q.enableVertexAttribArray(Vb);
if(5126!==xa.type||1!==xa.size||xa.buffer!==l||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)Q.bindBuffer(34962,l.buffer),Q.vertexAttribPointer(Vb,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=l,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&(R.vertexAttribDivisorANGLE(Vb,0),xa.divisor=0);Jd=b.scale;Q.uniform2f(K.location,Jd[0],Jd[1]);Ma=b.scaleFract;Q.uniform2f(ja.location,Ma[0],Ma[1]);Qb=b.translate;Q.uniform2f(ha.location,Qb[0],Qb[1]);fb=b.translateFract;Q.uniform2f(la.location,
fb[0],fb[1]);Q.uniform1f(T.location,b.thickness);Q.uniform1f(A.location,b.depth);ib=f.call(this,Oa,b,0);Q.uniform4f(Qa.location,ib[0],ib[1],ib[2],ib[3]);Q.uniform1f(S.location,b.dashLength);Q.uniform1f(V.location,b.opacity);(ya=b.dashTexture)&&"framebuffer"===ya._reglType&&(ya=ya.color[0]);ec=ya._texture;Q.uniform1i(ba.location,ec.bind());(Fa=P.elements)?Q.bindBuffer(34963,Fa.buffer.buffer):ma.currentVAO&&(Fa=L.getElements(ma.currentVAO.elements))&&Q.bindBuffer(34963,Fa.buffer.buffer);qb=b.count;
0<qb?Fa?R.drawElementsInstancedANGLE(5,4,Fa.type,0<<(Fa.type-5121>>1),qb):R.drawArraysInstancedANGLE(5,0,4,qb):0>qb&&(Fa?Q.drawElements(5,4,Fa.type,0<<(Fa.type-5121>>1)):Q.drawArrays(5,0,4));W.dirty=!0;ma.setVAO(null);Oa.viewportWidth=q;Oa.viewportHeight=r;G&&(c.cpuTime+=performance.now()-aa);ea&&oa.destroyStream(La);vd&&oa.destroyStream($c);Id&&oa.destroyStream(rd);ac&&oa.destroyStream(ye);Yc&&oa.destroyStream(ic);ec.unbind()},scope:function(a,f,d){var u,h,w,M,D,x,z,sa,B,t,ca,A,O,I,J,na,L,S,K,Q,
U,X,ba,ka,T,Y,V,ia,ga,ma,pc,Ga,ha,pa,ra,td,Pc,Jc,qc,gb,zc,Gb,oc,Xa,Fc,$b,lc,Kb,ja,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,bd,Hb,Ua,Lb,cb,cc,wa,la,jc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qa,Xb,nb,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Oc,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,yb,sc,Bb,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,
qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe;u=a.viewport;h=u.x|0;w=u.y|0;M="width"in u?u.width|0:Oa.framebufferWidth-h;D="height"in u?u.height|0:Oa.framebufferHeight-w;x=Oa.viewportWidth;Oa.viewportWidth=M;z=Oa.viewportHeight;Oa.viewportHeight=D;sa=G[0];G[0]=h;B=G[1];G[1]=w;t=G[2];G[2]=M;ca=G[3];G[3]=D;A=ea[0];ea[0]=0;O=ea[1];ea[1]=0;I=ea[2];ea[2]=0;J=ea[3];ea[3]=0;na=ab.blend_enable;ab.blend_enable=!0;L=La[0];La[0]=32774;S=La[1];La[1]=32774;K=Ka[0];
Ka[0]=770;Q=Ka[1];Ka[1]=771;U=Ka[2];Ka[2]=773;X=Ka[3];Ka[3]=1;ba=k.call(this,Oa,a,d);ka=ab.depth_enable;ab.depth_enable=ba;T=a.viewport;Y=T.x|0;V=T.y|0;ia="width"in T?T.width|0:Oa.framebufferWidth-Y;ga="height"in T?T.height|0:Oa.framebufferHeight-V;ma=aa[0];aa[0]=Y;pc=aa[1];aa[1]=V;Ga=aa[2];aa[2]=ia;ha=aa[3];aa[3]=ga;pa=ab.scissor_enable;ab.scissor_enable=!0;ra=ab.stencil_enable;ab.stencil_enable=!1;if(td=W.profile)Pc=performance.now(),c.count++;Jc=P.offset;P.offset=0;qc=P.count;P.count=4;gb=a.count;
zc=P.instances;P.instances=gb;Gb=P.primitive;P.primitive=5;oc=a.dashLength;Xa=E[23];E[23]=oc;Fc=a.dashTexture;$b=E[24];E[24]=Fc;lc=a.depth;Kb=E[22];E[22]=lc;ja=a.id;Gc=E[31];E[31]=ja;dc=a.miterLimit;Cc=E[32];E[32]=dc;Xc=b.call(this,Oa,a,d);Yb=E[33];E[33]=Xc;Hc=a.opacity;Ya=E[10];E[10]=Hc;Ea=Oa.pixelRatio;bd=E[34];E[34]=Ea;Hb=a.scale;Ua=E[6];E[6]=Hb;Lb=a.scaleFract;cb=E[7];E[7]=Lb;cc=a.thickness;wa=E[21];E[21]=cc;la=a.translate;jc=E[8];E[8]=la;Tb=a.translateFract;v=E[9];E[9]=Tb;Ub=q.call(this,Oa,a,
d);Pa=E[3];E[3]=Ub;Z.buffer=a.positionBuffer;ob=!1;tb=null;hb=0;Ra=!1;Xb=Qa=0;nb=1;db=0;kc=5126;kb=jb=ic=Yc=0;Pb(Z)?(ob=!0,tb=oa.createStream(34962,Z),kc=tb.dtype):(tb=oa.getBuffer(Z))?kc=tb.dtype:"constant"in Z?(nb=2,"number"===typeof Z.constant?(ic=Z.constant,jb=kb=Yc=0):(ic=0<Z.constant.length?Z.constant[0]:0,jb=1<Z.constant.length?Z.constant[1]:0,kb=2<Z.constant.length?Z.constant[2]:0,Yc=3<Z.constant.length?Z.constant[3]:0)):(tb=Pb(Z.buffer)?oa.createStream(34962,Z.buffer):oa.getBuffer(Z.buffer),
kc="type"in Z?ua[Z.type]:tb.dtype,Ra=!!Z.normalized,Xb=Z.size|0,Qa=Z.offset|0,db=Z.stride|0,hb=Z.divisor|0);va=C.buffer;C.buffer=tb;pb=C.divisor;C.divisor=hb;za=C.normalized;C.normalized=Ra;Va=C.offset;C.offset=Qa;bb=C.size;C.size=Xb;Ba=C.state;C.state=nb;eb=C.stride;C.stride=db;Na=C.type;C.type=kc;Ab=C.w;C.w=Yc;zb=C.x;C.x=ic;Ta=C.y;C.y=jb;Ic=C.z;C.z=kb;fa.buffer=a.positionFractBuffer;Ib=!1;Mb=null;Vb=0;xa=!1;Ma=Oc=0;Qb=1;fb=0;ib=5126;qb=Fa=ec=ya=0;Pb(fa)?(Ib=!0,Mb=oa.createStream(34962,fa),ib=Mb.dtype):
(Mb=oa.getBuffer(fa))?ib=Mb.dtype:"constant"in fa?(Qb=2,"number"===typeof fa.constant?(ec=fa.constant,Fa=qb=ya=0):(ec=0<fa.constant.length?fa.constant[0]:0,Fa=1<fa.constant.length?fa.constant[1]:0,qb=2<fa.constant.length?fa.constant[2]:0,ya=3<fa.constant.length?fa.constant[3]:0)):(Mb=Pb(fa.buffer)?oa.createStream(34962,fa.buffer):oa.getBuffer(fa.buffer),ib="type"in fa?ua[fa.type]:Mb.dtype,xa=!!fa.normalized,Ma=fa.size|0,Oc=fa.offset|0,fb=fa.stride|0,Vb=fa.divisor|0);rb=y.buffer;y.buffer=Mb;Za=y.divisor;
y.divisor=Vb;$a=y.normalized;y.normalized=xa;rc=y.offset;y.offset=Oc;cd=y.size;y.size=Ma;tc=y.state;y.state=Qb;Wa=y.stride;y.stride=fb;Nb=y.type;y.type=ib;dd=y.w;y.w=ya;Ha=y.x;y.x=ec;vc=y.y;y.y=Fa;Sa=y.z;y.z=qb;ta.buffer=a.positionBuffer;Ca=!1;lb=null;ub=0;Cb=!1;uc=sb=0;vb=1;yb=0;sc=5126;fd=ed=Kc=Bb=0;Pb(ta)?(Ca=!0,lb=oa.createStream(34962,ta),sc=lb.dtype):(lb=oa.getBuffer(ta))?sc=lb.dtype:"constant"in ta?(vb=2,"number"===typeof ta.constant?(Kc=ta.constant,ed=fd=Bb=0):(Kc=0<ta.constant.length?ta.constant[0]:
0,ed=1<ta.constant.length?ta.constant[1]:0,fd=2<ta.constant.length?ta.constant[2]:0,Bb=3<ta.constant.length?ta.constant[3]:0)):(lb=Pb(ta.buffer)?oa.createStream(34962,ta.buffer):oa.getBuffer(ta.buffer),sc="type"in ta?ua[ta.type]:lb.dtype,Cb=!!ta.normalized,uc=ta.size|0,sb=ta.offset|0,yb=ta.stride|0,ub=ta.divisor|0);Wb=e.buffer;e.buffer=lb;bc=e.divisor;e.divisor=ub;Rb=e.normalized;e.normalized=Cb;Ia=e.offset;e.offset=sb;Zb=e.size;e.size=uc;mb=e.state;e.state=vb;wb=e.stride;e.stride=yb;Ob=e.type;e.type=
sc;Sb=e.w;e.w=Bb;fc=e.x;e.x=Kc;hc=e.y;e.y=ed;Ze=e.z;e.z=fd;N.buffer=a.positionFractBuffer;xc=!1;yc=null;Ac=0;Lc=!1;Rc=Zc=0;Mc=1;Jb=0;Db=5126;gc=Sc=Ec=Nc=0;Pb(N)?(xc=!0,yc=oa.createStream(34962,N),Db=yc.dtype):(yc=oa.getBuffer(N))?Db=yc.dtype:"constant"in N?(Mc=2,"number"===typeof N.constant?(Ec=N.constant,Sc=gc=Nc=0):(Ec=0<N.constant.length?N.constant[0]:0,Sc=1<N.constant.length?N.constant[1]:0,gc=2<N.constant.length?N.constant[2]:0,Nc=3<N.constant.length?N.constant[3]:0)):(yc=Pb(N.buffer)?oa.createStream(34962,
N.buffer):oa.getBuffer(N.buffer),Db="type"in N?ua[N.type]:yc.dtype,Lc=!!N.normalized,Rc=N.size|0,Zc=N.offset|0,Jb=N.stride|0,Ac=N.divisor|0);Vc=g.buffer;g.buffer=yc;gd=g.divisor;g.divisor=Ac;kd=g.normalized;g.normalized=Lc;md=g.offset;g.offset=Zc;Wc=g.size;g.size=Rc;bf=g.state;g.state=Mc;Zd=g.stride;g.stride=Jb;ke=g.type;g.type=Db;se=g.w;g.w=Nc;me=g.x;g.x=Ec;Md=g.y;g.y=Sc;Kd=g.z;g.z=gc;H.buffer=a.colorBuffer;id=!1;Bc=null;od=0;ld=!1;pd=ad=0;Gd=1;Hd=0;te=5126;ee=ne=Ae=ze=0;Pb(H)?(id=!0,Bc=oa.createStream(34962,
H),te=Bc.dtype):(Bc=oa.getBuffer(H))?te=Bc.dtype:"constant"in H?(Gd=2,"number"===typeof H.constant?(Ae=H.constant,ne=ee=ze=0):(Ae=0<H.constant.length?H.constant[0]:0,ne=1<H.constant.length?H.constant[1]:0,ee=2<H.constant.length?H.constant[2]:0,ze=3<H.constant.length?H.constant[3]:0)):(Bc=Pb(H.buffer)?oa.createStream(34962,H.buffer):oa.getBuffer(H.buffer),te="type"in H?ua[H.type]:Bc.dtype,ld=!!H.normalized,pd=H.size|0,ad=H.offset|0,Hd=H.stride|0,od=H.divisor|0);de=p.buffer;p.buffer=Bc;pe=p.divisor;
p.divisor=od;be=p.normalized;p.normalized=ld;he=p.offset;p.offset=ad;wc=p.size;p.size=pd;Uc=p.state;p.state=Gd;qe=p.stride;p.stride=Hd;le=p.type;p.type=te;Ld=p.w;p.w=ze;Pd=p.x;p.x=Ae;Qd=p.y;p.y=ne;Rd=p.z;p.z=ee;ie=n.buffer;n.buffer=m;vf=n.divisor;n.divisor=0;Ce=n.normalized;n.normalized=!1;oe=n.offset;n.offset=0;Re=n.size;n.size=0;Se=n.state;n.state=1;Ne=n.stride;n.stride=8;re=n.type;n.type=5126;Fe=n.w;n.w=0;He=n.x;n.x=0;Ie=n.y;n.y=0;Je=n.z;n.z=0;Ge=r.buffer;r.buffer=l;Nd=r.divisor;r.divisor=0;Ud=
r.normalized;r.normalized=!1;$d=r.offset;r.offset=4;ce=r.size;r.size=0;Ke=r.state;r.state=1;Cd=r.stride;r.stride=8;Sd=r.type;r.type=5126;De=r.w;r.w=0;Le=r.x;r.x=0;cf=r.y;r.y=0;af=r.z;r.z=0;Te=R.vert;R.vert=20;Oe=R.frag;R.frag=19;W.dirty=!0;f(Oa,a,d);Oa.viewportWidth=x;Oa.viewportHeight=z;G[0]=sa;G[1]=B;G[2]=t;G[3]=ca;ea[0]=A;ea[1]=O;ea[2]=I;ea[3]=J;ab.blend_enable=na;La[0]=L;La[1]=S;Ka[0]=K;Ka[1]=Q;Ka[2]=U;Ka[3]=X;ab.depth_enable=ka;aa[0]=ma;aa[1]=pc;aa[2]=Ga;aa[3]=ha;ab.scissor_enable=pa;ab.stencil_enable=
ra;td&&(c.cpuTime+=performance.now()-Pc);P.offset=Jc;P.count=qc;P.instances=zc;P.primitive=Gb;E[23]=Xa;E[24]=$b;E[22]=Kb;E[31]=Gc;E[32]=Cc;E[33]=Yb;E[10]=Ya;E[34]=bd;E[6]=Ua;E[7]=cb;E[21]=wa;E[8]=jc;E[9]=v;E[3]=Pa;ob&&oa.destroyStream(tb);C.buffer=va;C.divisor=pb;C.normalized=za;C.offset=Va;C.size=bb;C.state=Ba;C.stride=eb;C.type=Na;C.w=Ab;C.x=zb;C.y=Ta;C.z=Ic;Ib&&oa.destroyStream(Mb);y.buffer=rb;y.divisor=Za;y.normalized=$a;y.offset=rc;y.size=cd;y.state=tc;y.stride=Wa;y.type=Nb;y.w=dd;y.x=Ha;y.y=
vc;y.z=Sa;Ca&&oa.destroyStream(lb);e.buffer=Wb;e.divisor=bc;e.normalized=Rb;e.offset=Ia;e.size=Zb;e.state=mb;e.stride=wb;e.type=Ob;e.w=Sb;e.x=fc;e.y=hc;e.z=Ze;xc&&oa.destroyStream(yc);g.buffer=Vc;g.divisor=gd;g.normalized=kd;g.offset=md;g.size=Wc;g.state=bf;g.stride=Zd;g.type=ke;g.w=se;g.x=me;g.y=Md;g.z=Kd;id&&oa.destroyStream(Bc);p.buffer=de;p.divisor=pe;p.normalized=be;p.offset=he;p.size=wc;p.state=Uc;p.stride=qe;p.type=le;p.w=Ld;p.x=Pd;p.y=Qd;p.z=Rd;n.buffer=ie;n.divisor=vf;n.normalized=Ce;n.offset=
oe;n.size=Re;n.state=Se;n.stride=Ne;n.type=re;n.w=Fe;n.x=He;n.y=Ie;n.z=Je;r.buffer=Ge;r.divisor=Nd;r.normalized=Ud;r.offset=$d;r.size=ce;r.state=Ke;r.stride=Cd;r.type=Sd;r.w=De;r.x=Le;r.y=cf;r.z=af;R.vert=Te;R.frag=Oe;W.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,c,d,h,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,sa,x,B,t,na,S,ba,A,Y,I,V,K,ja,T,ha,la,Qa,Bb,oa,Oa,W){var P,
L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra,cc,pc,jc,td,zc,aa,O,ka,Ga,Kb,bd,Oc,J,G,ia,ua,Z,fa,ta,N,H,da,Aa,Da,Ja,F;P=a.attributes;L=a.buffer;U=a.context;pa=a.current;Q=a.draw;Pb=a.elements;ab=a.extensions;R=a.framebuffer;E=a.gl;ma=a.isBufferArgs;ea=a.next;wa=a.shader;La=a.uniforms;yb=a.vao;Ka=ea.blend_color;X=pa.blend_color;nb=ea.blend_equation;ga=pa.blend_equation;ra=ea.blend_func;cc=pa.blend_func;pc=ea.colorMask;jc=pa.colorMask;td=ea.depth_range;zc=pa.depth_range;aa=ea.polygonOffset_offset;
O=pa.polygonOffset_offset;ka=ea.sample_coverage;Ga=pa.sample_coverage;Kb=ea.scissor_box;bd=pa.scissor_box;Oc=ea.stencil_func;J=pa.stencil_func;G=ea.stencil_opBack;ia=pa.stencil_opBack;ua=ea.stencil_opFront;Z=pa.stencil_opFront;fa=ea.viewport;ta=pa.viewport;N={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};H={divisor:1,offset:0,stride:4};da={divisor:1,offset:8,stride:8};Aa={divisor:1,offset:4,stride:4};Da={divisor:1,offset:16,stride:8};Ja={divisor:1,offset:24,
stride:8};F={divisor:1,offset:0,stride:8};return{batch:function(b,e){var g,a,f,k,n,p;g=R.next;g!==R.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),R.cur=g);if(pa.dirty){var q,r,d,u,h,y,C,M,D,z,fa,ra,Kb,wa,La,Vd,Wd,Ka,nb,qd,nd,vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb;q=ea.dither;q!==pa.dither&&(q?E.enable(3024):E.disable(3024),pa.dither=q);r=ea.depth_func;r!==pa.depth_func&&(E.depthFunc(r),pa.depth_func=r);d=td[0];u=td[1];if(d!==zc[0]||u!==zc[1])E.depthRange(d,u),zc[0]=d,zc[1]=u;h=
ea.depth_mask;h!==pa.depth_mask&&(E.depthMask(h),pa.depth_mask=h);y=pc[0];C=pc[1];M=pc[2];D=pc[3];if(y!==jc[0]||C!==jc[1]||M!==jc[2]||D!==jc[3])E.colorMask(y,C,M,D),jc[0]=y,jc[1]=C,jc[2]=M,jc[3]=D;z=ea.frontFace;z!==pa.frontFace&&(E.frontFace(z),pa.frontFace=z);fa=ea.lineWidth;fa!==pa.lineWidth&&(E.lineWidth(fa),pa.lineWidth=fa);ra=ea.polygonOffset_enable;ra!==pa.polygonOffset_enable&&(ra?E.enable(32823):E.disable(32823),pa.polygonOffset_enable=ra);Kb=aa[0];wa=aa[1];if(Kb!==O[0]||wa!==O[1])E.polygonOffset(Kb,
wa),O[0]=Kb,O[1]=wa;La=ea.sample_alpha;La!==pa.sample_alpha&&(La?E.enable(32926):E.disable(32926),pa.sample_alpha=La);Vd=ea.sample_enable;Vd!==pa.sample_enable&&(Vd?E.enable(32928):E.disable(32928),pa.sample_enable=Vd);Wd=ka[0];Ka=ka[1];if(Wd!==Ga[0]||Ka!==Ga[1])E.sampleCoverage(Wd,Ka),Ga[0]=Wd,Ga[1]=Ka;nb=ea.stencil_mask;nb!==pa.stencil_mask&&(E.stencilMask(nb),pa.stencil_mask=nb);qd=Oc[0];nd=Oc[1];vd=Oc[2];if(qd!==J[0]||nd!==J[1]||vd!==J[2])E.stencilFunc(qd,nd,vd),J[0]=qd,J[1]=nd,J[2]=vd;$c=ua[0];
sd=ua[1];Tc=ua[2];Ed=ua[3];if($c!==Z[0]||sd!==Z[1]||Tc!==Z[2]||Ed!==Z[3])E.stencilOpSeparate($c,sd,Tc,Ed),Z[0]=$c,Z[1]=sd,Z[2]=Tc,Z[3]=Ed;Pc=G[0];Jc=G[1];qc=G[2];gb=G[3];if(Pc!==ia[0]||Jc!==ia[1]||qc!==ia[2]||gb!==ia[3])E.stencilOpSeparate(Pc,Jc,qc,gb),ia[0]=Pc,ia[1]=Jc,ia[2]=qc,ia[3]=gb}E.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;E.enable(3042);pa.blend_enable=!0;E.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;E.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;cc[3]=
1;E.enable(2884);pa.cull_enable=!0;E.cullFace(1029);pa.cull_face=1029;E.enable(3089);pa.scissor_enable=!0;E.disable(2960);pa.stencil_enable=!1;if(a=pa.profile)f=performance.now(),c.count+=e;E.useProgram(w.program);k=ab.angle_instanced_arrays;var hd,Gb,oc,Xa,Fc;yb.setVAO(null);hd=V.location;Gb=P[hd];Gb.buffer||E.enableVertexAttribArray(hd);if(5126!==Gb.type||1!==Gb.size||Gb.buffer!==m||!1!==Gb.normalized||0!==Gb.offset||8!==Gb.stride)E.bindBuffer(34962,m.buffer),E.vertexAttribPointer(hd,1,5126,!1,
8,0),Gb.type=5126,Gb.size=1,Gb.buffer=m,Gb.normalized=!1,Gb.offset=0,Gb.stride=8;0!==Gb.divisor&&(k.vertexAttribDivisorANGLE(hd,0),Gb.divisor=0);oc=K.location;Xa=P[oc];Xa.buffer||E.enableVertexAttribArray(oc);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==l||!1!==Xa.normalized||4!==Xa.offset||8!==Xa.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(oc,1,5126,!1,8,4),Xa.type=5126,Xa.size=1,Xa.buffer=l,Xa.normalized=!1,Xa.offset=4,Xa.stride=8;0!==Xa.divisor&&(k.vertexAttribDivisorANGLE(oc,0),Xa.divisor=
0);(Fc=Q.elements)?E.bindBuffer(34963,Fc.buffer.buffer):yb.currentVAO&&(Fc=Pb.getElements(yb.currentVAO.elements))&&E.bindBuffer(34963,Fc.buffer.buffer);for(n=0;n<e;++n){p=b[n];var $b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,
Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc;$b=p.viewport;lc=$b.x|0;Id=$b.y|0;rd="width"in $b?$b.width|0:U.framebufferWidth-lc;Gc="height"in $b?$b.height|0:U.framebufferHeight-Id;dc=U.viewportWidth;U.viewportWidth=rd;Cc=U.viewportHeight;U.viewportHeight=Gc;E.viewport(lc,Id,rd,Gc);ta[0]=lc;ta[1]=Id;ta[2]=rd;ta[3]=Gc;(Xc=sa.call(this,U,p,n))?E.enable(2929):E.disable(2929);pa.depth_enable=Xc;Yb=p.viewport;Hc=Yb.x|0;Ya=Yb.y|0;Ea="width"in
Yb?Yb.width|0:U.framebufferWidth-Hc;ud="height"in Yb?Yb.height|0:U.framebufferHeight-Ya;E.scissor(Hc,Ya,Ea,ud);bd[0]=Hc;bd[1]=Ya;bd[2]=Ea;bd[3]=ud;da.buffer=p.positionBuffer;Hb=!1;Ua=null;Lb=0;cb=!1;ac=Dc=0;ye=1;mc=0;Tb=5126;ob=Pa=Ub=v=0;ma(da)?(Hb=!0,Ua=L.createStream(34962,da),Tb=Ua.dtype):(Ua=L.getBuffer(da))?Tb=Ua.dtype:"constant"in da?(ye=2,"number"===typeof da.constant?(Ub=da.constant,Pa=ob=v=0):(Ub=0<da.constant.length?da.constant[0]:0,Pa=1<da.constant.length?da.constant[1]:0,ob=2<da.constant.length?
da.constant[2]:0,v=3<da.constant.length?da.constant[3]:0)):(Ua=ma(da.buffer)?L.createStream(34962,da.buffer):L.getBuffer(da.buffer),Tb="type"in da?N[da.type]:Ua.dtype,cb=!!da.normalized,ac=da.size|0,Dc=da.offset|0,mc=da.stride|0,Lb=da.divisor|0);tb=na.location;hb=P[tb];if(1===ye){hb.buffer||E.enableVertexAttribArray(tb);Ra=ac||2;if(hb.type!==Tb||hb.size!==Ra||hb.buffer!==Ua||hb.normalized!==cb||hb.offset!==Dc||hb.stride!==mc)E.bindBuffer(34962,Ua.buffer),E.vertexAttribPointer(tb,Ra,Tb,cb,mc,Dc),hb.type=
Tb,hb.size=Ra,hb.buffer=Ua,hb.normalized=cb,hb.offset=Dc,hb.stride=mc;hb.divisor!==Lb&&(k.vertexAttribDivisorANGLE(tb,Lb),hb.divisor=Lb)}else if(hb.buffer&&(E.disableVertexAttribArray(tb),hb.buffer=null),hb.x!==Ub||hb.y!==Pa||hb.z!==ob||hb.w!==v)E.vertexAttrib4f(tb,Ub,Pa,ob,v),hb.x=Ub,hb.y=Pa,hb.z=ob,hb.w=v;Da.buffer=p.positionBuffer;Qc=!1;Xb=null;jd=0;db=!1;Yc=kc=0;ic=1;jb=0;kb=5126;Va=za=pb=va=0;ma(Da)?(Qc=!0,Xb=L.createStream(34962,Da),kb=Xb.dtype):(Xb=L.getBuffer(Da))?kb=Xb.dtype:"constant"in
Da?(ic=2,"number"===typeof Da.constant?(pb=Da.constant,za=Va=va=0):(pb=0<Da.constant.length?Da.constant[0]:0,za=1<Da.constant.length?Da.constant[1]:0,Va=2<Da.constant.length?Da.constant[2]:0,va=3<Da.constant.length?Da.constant[3]:0)):(Xb=ma(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),kb="type"in Da?N[Da.type]:Xb.dtype,db=!!Da.normalized,Yc=Da.size|0,kc=Da.offset|0,jb=Da.stride|0,jd=Da.divisor|0);bb=ba.location;Ba=P[bb];if(1===ic){Ba.buffer||E.enableVertexAttribArray(bb);eb=Yc||
2;if(Ba.type!==kb||Ba.size!==eb||Ba.buffer!==Xb||Ba.normalized!==db||Ba.offset!==kc||Ba.stride!==jb)E.bindBuffer(34962,Xb.buffer),E.vertexAttribPointer(bb,eb,kb,db,jb,kc),Ba.type=kb,Ba.size=eb,Ba.buffer=Xb,Ba.normalized=db,Ba.offset=kc,Ba.stride=jb;Ba.divisor!==jd&&(k.vertexAttribDivisorANGLE(bb,jd),Ba.divisor=jd)}else if(Ba.buffer&&(E.disableVertexAttribArray(bb),Ba.buffer=null),Ba.x!==pb||Ba.y!==za||Ba.z!==Va||Ba.w!==va)E.vertexAttrib4f(bb,pb,za,Va,va),Ba.x=pb,Ba.y=za,Ba.z=Va,Ba.w=va;Ja.buffer=
p.positionBuffer;Na=!1;Ab=null;zb=0;Ta=!1;Ib=Ic=0;Mb=1;Vb=0;xa=5126;fb=Qb=Ma=Jd=0;ma(Ja)?(Na=!0,Ab=L.createStream(34962,Ja),xa=Ab.dtype):(Ab=L.getBuffer(Ja))?xa=Ab.dtype:"constant"in Ja?(Mb=2,"number"===typeof Ja.constant?(Ma=Ja.constant,Qb=fb=Jd=0):(Ma=0<Ja.constant.length?Ja.constant[0]:0,Qb=1<Ja.constant.length?Ja.constant[1]:0,fb=2<Ja.constant.length?Ja.constant[2]:0,Jd=3<Ja.constant.length?Ja.constant[3]:0)):(Ab=ma(Ja.buffer)?L.createStream(34962,Ja.buffer):L.getBuffer(Ja.buffer),xa="type"in
Ja?N[Ja.type]:Ab.dtype,Ta=!!Ja.normalized,Ib=Ja.size|0,Ic=Ja.offset|0,Vb=Ja.stride|0,zb=Ja.divisor|0);ib=ha.location;ya=P[ib];if(1===Mb){ya.buffer||E.enableVertexAttribArray(ib);ec=Ib||2;if(ya.type!==xa||ya.size!==ec||ya.buffer!==Ab||ya.normalized!==Ta||ya.offset!==Ic||ya.stride!==Vb)E.bindBuffer(34962,Ab.buffer),E.vertexAttribPointer(ib,ec,xa,Ta,Vb,Ic),ya.type=xa,ya.size=ec,ya.buffer=Ab,ya.normalized=Ta,ya.offset=Ic,ya.stride=Vb;ya.divisor!==zb&&(k.vertexAttribDivisorANGLE(ib,zb),ya.divisor=zb)}else if(ya.buffer&&
(E.disableVertexAttribArray(ib),ya.buffer=null),ya.x!==Ma||ya.y!==Qb||ya.z!==fb||ya.w!==Jd)E.vertexAttrib4f(ib,Ma,Qb,fb,Jd),ya.x=Ma,ya.y=Qb,ya.z=fb,ya.w=Jd;F.buffer=p.positionBuffer;Fa=!1;qb=null;rb=0;Za=!1;rc=$a=0;cd=1;tc=0;Wa=5126;vc=Ha=dd=Nb=0;ma(F)?(Fa=!0,qb=L.createStream(34962,F),Wa=qb.dtype):(qb=L.getBuffer(F))?Wa=qb.dtype:"constant"in F?(cd=2,"number"===typeof F.constant?(dd=F.constant,Ha=vc=Nb=0):(dd=0<F.constant.length?F.constant[0]:0,Ha=1<F.constant.length?F.constant[1]:0,vc=2<F.constant.length?
F.constant[2]:0,Nb=3<F.constant.length?F.constant[3]:0)):(qb=ma(F.buffer)?L.createStream(34962,F.buffer):L.getBuffer(F.buffer),Wa="type"in F?N[F.type]:qb.dtype,Za=!!F.normalized,rc=F.size|0,$a=F.offset|0,tc=F.stride|0,rb=F.divisor|0);Sa=Qa.location;Ca=P[Sa];if(1===cd){Ca.buffer||E.enableVertexAttribArray(Sa);lb=rc||2;if(Ca.type!==Wa||Ca.size!==lb||Ca.buffer!==qb||Ca.normalized!==Za||Ca.offset!==$a||Ca.stride!==tc)E.bindBuffer(34962,qb.buffer),E.vertexAttribPointer(Sa,lb,Wa,Za,tc,$a),Ca.type=Wa,Ca.size=
lb,Ca.buffer=qb,Ca.normalized=Za,Ca.offset=$a,Ca.stride=tc;Ca.divisor!==rb&&(k.vertexAttribDivisorANGLE(Sa,rb),Ca.divisor=rb)}else if(Ca.buffer&&(E.disableVertexAttribArray(Sa),Ca.buffer=null),Ca.x!==dd||Ca.y!==Ha||Ca.z!==vc||Ca.w!==Nb)E.vertexAttrib4f(Sa,dd,Ha,vc,Nb),Ca.x=dd,Ca.y=Ha,Ca.z=vc,Ca.w=Nb;H.buffer=p.colorBuffer;ub=!1;Cb=null;sb=0;uc=!1;wd=vb=0;sc=1;Fd=0;Kc=5126;bc=Wb=fd=ed=0;ma(H)?(ub=!0,Cb=L.createStream(34962,H),Kc=Cb.dtype):(Cb=L.getBuffer(H))?Kc=Cb.dtype:"constant"in H?(sc=2,"number"===
typeof H.constant?(fd=H.constant,Wb=bc=ed=0):(fd=0<H.constant.length?H.constant[0]:0,Wb=1<H.constant.length?H.constant[1]:0,bc=2<H.constant.length?H.constant[2]:0,ed=3<H.constant.length?H.constant[3]:0)):(Cb=ma(H.buffer)?L.createStream(34962,H.buffer):L.getBuffer(H.buffer),Kc="type"in H?N[H.type]:Cb.dtype,uc=!!H.normalized,wd=H.size|0,vb=H.offset|0,Fd=H.stride|0,sb=H.divisor|0);Rb=t.location;Ia=P[Rb];if(1===sc){Ia.buffer||E.enableVertexAttribArray(Rb);Zb=wd||4;if(Ia.type!==Kc||Ia.size!==Zb||Ia.buffer!==
Cb||Ia.normalized!==uc||Ia.offset!==vb||Ia.stride!==Fd)E.bindBuffer(34962,Cb.buffer),E.vertexAttribPointer(Rb,Zb,Kc,uc,Fd,vb),Ia.type=Kc,Ia.size=Zb,Ia.buffer=Cb,Ia.normalized=uc,Ia.offset=vb,Ia.stride=Fd;Ia.divisor!==sb&&(k.vertexAttribDivisorANGLE(Rb,sb),Ia.divisor=sb)}else if(Ia.buffer&&(E.disableVertexAttribArray(Rb),Ia.buffer=null),Ia.x!==fd||Ia.y!==Wb||Ia.z!==bc||Ia.w!==ed)E.vertexAttrib4f(Rb,fd,Wb,bc,ed),Ia.x=fd,Ia.y=Wb,Ia.z=bc,Ia.w=ed;Aa.buffer=p.colorBuffer;mb=!1;wb=null;Ob=0;Sb=!1;hc=fc=
0;Ze=1;xc=0;yc=5126;Rc=Zc=Lc=Ac=0;ma(Aa)?(mb=!0,wb=L.createStream(34962,Aa),yc=wb.dtype):(wb=L.getBuffer(Aa))?yc=wb.dtype:"constant"in Aa?(Ze=2,"number"===typeof Aa.constant?(Lc=Aa.constant,Zc=Rc=Ac=0):(Lc=0<Aa.constant.length?Aa.constant[0]:0,Zc=1<Aa.constant.length?Aa.constant[1]:0,Rc=2<Aa.constant.length?Aa.constant[2]:0,Ac=3<Aa.constant.length?Aa.constant[3]:0)):(wb=ma(Aa.buffer)?L.createStream(34962,Aa.buffer):L.getBuffer(Aa.buffer),yc="type"in Aa?N[Aa.type]:wb.dtype,Sb=!!Aa.normalized,hc=Aa.size|
0,fc=Aa.offset|0,xc=Aa.stride|0,Ob=Aa.divisor|0);Mc=S.location;Jb=P[Mc];if(1===Ze){Jb.buffer||E.enableVertexAttribArray(Mc);Db=hc||4;if(Jb.type!==yc||Jb.size!==Db||Jb.buffer!==wb||Jb.normalized!==Sb||Jb.offset!==fc||Jb.stride!==xc)E.bindBuffer(34962,wb.buffer),E.vertexAttribPointer(Mc,Db,yc,Sb,xc,fc),Jb.type=yc,Jb.size=Db,Jb.buffer=wb,Jb.normalized=Sb,Jb.offset=fc,Jb.stride=xc;Jb.divisor!==Ob&&(k.vertexAttribDivisorANGLE(Mc,Ob),Jb.divisor=Ob)}else if(Jb.buffer&&(E.disableVertexAttribArray(Mc),Jb.buffer=
null),Jb.x!==Lc||Jb.y!==Zc||Jb.z!==Rc||Jb.w!==Ac)E.vertexAttrib4f(Mc,Lc,Zc,Rc,Ac),Jb.x=Lc,Jb.y=Zc,Jb.z=Rc,Jb.w=Ac;Nc=p.scale;Ec=Nc[0];gc=Nc[1];n&&Sc===Ec&&Vc===gc||(Sc=Ec,Vc=gc,E.uniform2f(Bb.location,Ec,gc));gd=p.translate;kd=gd[0];Wc=gd[1];n&&md===kd&&bf===Wc||(md=kd,bf=Wc,E.uniform2f(Oa.location,kd,Wc));Zd=p.thickness;n&&ke===Zd||(ke=Zd,E.uniform1f(oa.location,Zd));se=p.depth;n&&me===se||(me=se,E.uniform1f(I.location,se));Md=x.call(this,U,p,n);Kd=Md[0];Bc=Md[1];ld=Md[2];pd=Md[3];n&&id===Kd&&od===
Bc&&ad===ld&&Gd===pd||(id=Kd,od=Bc,ad=ld,Gd=pd,E.uniform4f(W.location,Kd,Bc,ld,pd));Hd=p.miterLimit;n&&te===Hd||(te=Hd,E.uniform1f(ja.location,Hd));ze=B.call(this,U,p,n);n&&Ae===ze||(Ae=ze,E.uniform1f(T.location,ze));ne=p.dashLength;n&&ee===ne||(ee=ne,E.uniform1f(A.location,ne));de=p.opacity;n&&pe===de||(pe=de,E.uniform1f(la.location,de));(be=p.dashTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);he=be._texture;E.uniform1i(Y.location,he.bind());wc=p.count;0<wc?Fc?k.drawElementsInstancedANGLE(5,
4,Fc.type,0<<(Fc.type-5121>>1),wc):k.drawArraysInstancedANGLE(5,0,4,wc):0>wc&&(Fc?E.drawElements(5,4,Fc.type,0<<(Fc.type-5121>>1)):E.drawArrays(5,0,4));U.viewportWidth=dc;U.viewportHeight=Cc;Hb&&L.destroyStream(Ua);Qc&&L.destroyStream(Xb);Na&&L.destroyStream(Ab);Fa&&L.destroyStream(qb);ub&&L.destroyStream(Cb);mb&&L.destroyStream(wb);he.unbind()}pa.dirty=!0;yb.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(b){var e,g,a,n,p,q,r,u,y,C,w,M,x,sa,B,fa,ra,Kb,wa,La,Ka,nb,Vd,Wd,ae,Yd,qd,nd,
vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb,hd,Gb,oc,Xa,Fc,$b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd;e=R.next;e!==R.cur&&(e?E.bindFramebuffer(36160,e.framebuffer):E.bindFramebuffer(36160,null),R.cur=e);if(pa.dirty){var sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc;sc=
ea.dither;sc!==pa.dither&&(sc?E.enable(3024):E.disable(3024),pa.dither=sc);Fd=ea.depth_func;Fd!==pa.depth_func&&(E.depthFunc(Fd),pa.depth_func=Fd);Kc=td[0];ed=td[1];if(Kc!==zc[0]||ed!==zc[1])E.depthRange(Kc,ed),zc[0]=Kc,zc[1]=ed;fd=ea.depth_mask;fd!==pa.depth_mask&&(E.depthMask(fd),pa.depth_mask=fd);Wb=pc[0];bc=pc[1];Rb=pc[2];Ia=pc[3];if(Wb!==jc[0]||bc!==jc[1]||Rb!==jc[2]||Ia!==jc[3])E.colorMask(Wb,bc,Rb,Ia),jc[0]=Wb,jc[1]=bc,jc[2]=Rb,jc[3]=Ia;Zb=ea.frontFace;Zb!==pa.frontFace&&(E.frontFace(Zb),pa.frontFace=
Zb);mb=ea.lineWidth;mb!==pa.lineWidth&&(E.lineWidth(mb),pa.lineWidth=mb);wb=ea.polygonOffset_enable;wb!==pa.polygonOffset_enable&&(wb?E.enable(32823):E.disable(32823),pa.polygonOffset_enable=wb);Ob=aa[0];Sb=aa[1];if(Ob!==O[0]||Sb!==O[1])E.polygonOffset(Ob,Sb),O[0]=Ob,O[1]=Sb;fc=ea.sample_alpha;fc!==pa.sample_alpha&&(fc?E.enable(32926):E.disable(32926),pa.sample_alpha=fc);hc=ea.sample_enable;hc!==pa.sample_enable&&(hc?E.enable(32928):E.disable(32928),pa.sample_enable=hc);Ze=ka[0];xc=ka[1];if(Ze!==
Ga[0]||xc!==Ga[1])E.sampleCoverage(Ze,xc),Ga[0]=Ze,Ga[1]=xc;yc=ea.stencil_mask;yc!==pa.stencil_mask&&(E.stencilMask(yc),pa.stencil_mask=yc);Ac=Oc[0];Lc=Oc[1];Zc=Oc[2];if(Ac!==J[0]||Lc!==J[1]||Zc!==J[2])E.stencilFunc(Ac,Lc,Zc),J[0]=Ac,J[1]=Lc,J[2]=Zc;Rc=ua[0];Mc=ua[1];Jb=ua[2];Db=ua[3];if(Rc!==Z[0]||Mc!==Z[1]||Jb!==Z[2]||Db!==Z[3])E.stencilOpSeparate(Rc,Mc,Jb,Db),Z[0]=Rc,Z[1]=Mc,Z[2]=Jb,Z[3]=Db;Nc=G[0];Ec=G[1];Sc=G[2];gc=G[3];if(Nc!==ia[0]||Ec!==ia[1]||Sc!==ia[2]||gc!==ia[3])E.stencilOpSeparate(Nc,
Ec,Sc,gc),ia[0]=Nc,ia[1]=Ec,ia[2]=Sc,ia[3]=gc}g=b.viewport;a=g.x|0;n=g.y|0;p="width"in g?g.width|0:U.framebufferWidth-a;q="height"in g?g.height|0:U.framebufferHeight-n;r=U.viewportWidth;U.viewportWidth=p;u=U.viewportHeight;U.viewportHeight=q;E.viewport(a,n,p,q);ta[0]=a;ta[1]=n;ta[2]=p;ta[3]=q;E.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;E.enable(3042);pa.blend_enable=!0;E.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;E.blendFuncSeparate(770,771,773,1);cc[0]=770;cc[1]=771;cc[2]=773;
cc[3]=1;E.enable(2884);pa.cull_enable=!0;E.cullFace(1029);pa.cull_face=1029;(y=d.call(this,U,b,0))?E.enable(2929):E.disable(2929);pa.depth_enable=y;C=b.viewport;w=C.x|0;M=C.y|0;x="width"in C?C.width|0:U.framebufferWidth-w;sa="height"in C?C.height|0:U.framebufferHeight-M;E.scissor(w,M,x,sa);bd[0]=w;bd[1]=M;bd[2]=x;bd[3]=sa;E.enable(3089);pa.scissor_enable=!0;E.disable(2960);pa.stencil_enable=!1;if(B=pa.profile)fa=performance.now(),c.count++;E.useProgram(h.program);ra=ab.angle_instanced_arrays;yb.setVAO(null);
da.buffer=b.positionBuffer;Kb=!1;wa=null;La=0;Ka=!1;Vd=nb=0;Wd=1;ae=0;Yd=5126;$c=vd=nd=qd=0;ma(da)?(Kb=!0,wa=L.createStream(34962,da),Yd=wa.dtype):(wa=L.getBuffer(da))?Yd=wa.dtype:"constant"in da?(Wd=2,"number"===typeof da.constant?(nd=da.constant,vd=$c=qd=0):(nd=0<da.constant.length?da.constant[0]:0,vd=1<da.constant.length?da.constant[1]:0,$c=2<da.constant.length?da.constant[2]:0,qd=3<da.constant.length?da.constant[3]:0)):(wa=ma(da.buffer)?L.createStream(34962,da.buffer):L.getBuffer(da.buffer),Yd=
"type"in da?N[da.type]:wa.dtype,Ka=!!da.normalized,Vd=da.size|0,nb=da.offset|0,ae=da.stride|0,La=da.divisor|0);sd=na.location;Tc=P[sd];if(1===Wd){Tc.buffer||E.enableVertexAttribArray(sd);Ed=Vd||2;if(Tc.type!==Yd||Tc.size!==Ed||Tc.buffer!==wa||Tc.normalized!==Ka||Tc.offset!==nb||Tc.stride!==ae)E.bindBuffer(34962,wa.buffer),E.vertexAttribPointer(sd,Ed,Yd,Ka,ae,nb),Tc.type=Yd,Tc.size=Ed,Tc.buffer=wa,Tc.normalized=Ka,Tc.offset=nb,Tc.stride=ae;Tc.divisor!==La&&(ra.vertexAttribDivisorANGLE(sd,La),Tc.divisor=
La)}else if(Tc.buffer&&(E.disableVertexAttribArray(sd),Tc.buffer=null),Tc.x!==nd||Tc.y!==vd||Tc.z!==$c||Tc.w!==qd)E.vertexAttrib4f(sd,nd,vd,$c,qd),Tc.x=nd,Tc.y=vd,Tc.z=$c,Tc.w=qd;Da.buffer=b.positionBuffer;Pc=!1;Jc=null;qc=0;gb=!1;Gb=hd=0;oc=1;Xa=0;Fc=5126;rd=Id=lc=$b=0;ma(Da)?(Pc=!0,Jc=L.createStream(34962,Da),Fc=Jc.dtype):(Jc=L.getBuffer(Da))?Fc=Jc.dtype:"constant"in Da?(oc=2,"number"===typeof Da.constant?(lc=Da.constant,Id=rd=$b=0):(lc=0<Da.constant.length?Da.constant[0]:0,Id=1<Da.constant.length?
Da.constant[1]:0,rd=2<Da.constant.length?Da.constant[2]:0,$b=3<Da.constant.length?Da.constant[3]:0)):(Jc=ma(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),Fc="type"in Da?N[Da.type]:Jc.dtype,gb=!!Da.normalized,Gb=Da.size|0,hd=Da.offset|0,Xa=Da.stride|0,qc=Da.divisor|0);Gc=ba.location;dc=P[Gc];if(1===oc){dc.buffer||E.enableVertexAttribArray(Gc);Cc=Gb||2;if(dc.type!==Fc||dc.size!==Cc||dc.buffer!==Jc||dc.normalized!==gb||dc.offset!==hd||dc.stride!==Xa)E.bindBuffer(34962,Jc.buffer),
E.vertexAttribPointer(Gc,Cc,Fc,gb,Xa,hd),dc.type=Fc,dc.size=Cc,dc.buffer=Jc,dc.normalized=gb,dc.offset=hd,dc.stride=Xa;dc.divisor!==qc&&(ra.vertexAttribDivisorANGLE(Gc,qc),dc.divisor=qc)}else if(dc.buffer&&(E.disableVertexAttribArray(Gc),dc.buffer=null),dc.x!==lc||dc.y!==Id||dc.z!==rd||dc.w!==$b)E.vertexAttrib4f(Gc,lc,Id,rd,$b),dc.x=lc,dc.y=Id,dc.z=rd,dc.w=$b;Ja.buffer=b.positionBuffer;Xc=!1;Yb=null;Hc=0;Ya=!1;ud=Ea=0;Hb=1;Ua=0;Lb=5126;ye=ac=Dc=cb=0;ma(Ja)?(Xc=!0,Yb=L.createStream(34962,Ja),Lb=Yb.dtype):
(Yb=L.getBuffer(Ja))?Lb=Yb.dtype:"constant"in Ja?(Hb=2,"number"===typeof Ja.constant?(Dc=Ja.constant,ac=ye=cb=0):(Dc=0<Ja.constant.length?Ja.constant[0]:0,ac=1<Ja.constant.length?Ja.constant[1]:0,ye=2<Ja.constant.length?Ja.constant[2]:0,cb=3<Ja.constant.length?Ja.constant[3]:0)):(Yb=ma(Ja.buffer)?L.createStream(34962,Ja.buffer):L.getBuffer(Ja.buffer),Lb="type"in Ja?N[Ja.type]:Yb.dtype,Ya=!!Ja.normalized,ud=Ja.size|0,Ea=Ja.offset|0,Ua=Ja.stride|0,Hc=Ja.divisor|0);mc=ha.location;Tb=P[mc];if(1===Hb){Tb.buffer||
E.enableVertexAttribArray(mc);v=ud||2;if(Tb.type!==Lb||Tb.size!==v||Tb.buffer!==Yb||Tb.normalized!==Ya||Tb.offset!==Ea||Tb.stride!==Ua)E.bindBuffer(34962,Yb.buffer),E.vertexAttribPointer(mc,v,Lb,Ya,Ua,Ea),Tb.type=Lb,Tb.size=v,Tb.buffer=Yb,Tb.normalized=Ya,Tb.offset=Ea,Tb.stride=Ua;Tb.divisor!==Hc&&(ra.vertexAttribDivisorANGLE(mc,Hc),Tb.divisor=Hc)}else if(Tb.buffer&&(E.disableVertexAttribArray(mc),Tb.buffer=null),Tb.x!==Dc||Tb.y!==ac||Tb.z!==ye||Tb.w!==cb)E.vertexAttrib4f(mc,Dc,ac,ye,cb),Tb.x=Dc,
Tb.y=ac,Tb.z=ye,Tb.w=cb;F.buffer=b.positionBuffer;Ub=!1;Pa=null;ob=0;tb=!1;Ra=hb=0;Qc=1;Xb=0;jd=5126;ic=Yc=kc=db=0;ma(F)?(Ub=!0,Pa=L.createStream(34962,F),jd=Pa.dtype):(Pa=L.getBuffer(F))?jd=Pa.dtype:"constant"in F?(Qc=2,"number"===typeof F.constant?(kc=F.constant,Yc=ic=db=0):(kc=0<F.constant.length?F.constant[0]:0,Yc=1<F.constant.length?F.constant[1]:0,ic=2<F.constant.length?F.constant[2]:0,db=3<F.constant.length?F.constant[3]:0)):(Pa=ma(F.buffer)?L.createStream(34962,F.buffer):L.getBuffer(F.buffer),
jd="type"in F?N[F.type]:Pa.dtype,tb=!!F.normalized,Ra=F.size|0,hb=F.offset|0,Xb=F.stride|0,ob=F.divisor|0);jb=Qa.location;kb=P[jb];if(1===Qc){kb.buffer||E.enableVertexAttribArray(jb);va=Ra||2;if(kb.type!==jd||kb.size!==va||kb.buffer!==Pa||kb.normalized!==tb||kb.offset!==hb||kb.stride!==Xb)E.bindBuffer(34962,Pa.buffer),E.vertexAttribPointer(jb,va,jd,tb,Xb,hb),kb.type=jd,kb.size=va,kb.buffer=Pa,kb.normalized=tb,kb.offset=hb,kb.stride=Xb;kb.divisor!==ob&&(ra.vertexAttribDivisorANGLE(jb,ob),kb.divisor=
ob)}else if(kb.buffer&&(E.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==kc||kb.y!==Yc||kb.z!==ic||kb.w!==db)E.vertexAttrib4f(jb,kc,Yc,ic,db),kb.x=kc,kb.y=Yc,kb.z=ic,kb.w=db;H.buffer=b.colorBuffer;pb=!1;za=null;Va=0;bb=!1;eb=Ba=0;Na=1;Ab=0;zb=5126;Mb=Ib=Ic=Ta=0;ma(H)?(pb=!0,za=L.createStream(34962,H),zb=za.dtype):(za=L.getBuffer(H))?zb=za.dtype:"constant"in H?(Na=2,"number"===typeof H.constant?(Ic=H.constant,Ib=Mb=Ta=0):(Ic=0<H.constant.length?H.constant[0]:0,Ib=1<H.constant.length?H.constant[1]:
0,Mb=2<H.constant.length?H.constant[2]:0,Ta=3<H.constant.length?H.constant[3]:0)):(za=ma(H.buffer)?L.createStream(34962,H.buffer):L.getBuffer(H.buffer),zb="type"in H?N[H.type]:za.dtype,bb=!!H.normalized,eb=H.size|0,Ba=H.offset|0,Ab=H.stride|0,Va=H.divisor|0);Vb=t.location;xa=P[Vb];if(1===Na){xa.buffer||E.enableVertexAttribArray(Vb);Jd=eb||4;if(xa.type!==zb||xa.size!==Jd||xa.buffer!==za||xa.normalized!==bb||xa.offset!==Ba||xa.stride!==Ab)E.bindBuffer(34962,za.buffer),E.vertexAttribPointer(Vb,Jd,zb,
bb,Ab,Ba),xa.type=zb,xa.size=Jd,xa.buffer=za,xa.normalized=bb,xa.offset=Ba,xa.stride=Ab;xa.divisor!==Va&&(ra.vertexAttribDivisorANGLE(Vb,Va),xa.divisor=Va)}else if(xa.buffer&&(E.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Ic||xa.y!==Ib||xa.z!==Mb||xa.w!==Ta)E.vertexAttrib4f(Vb,Ic,Ib,Mb,Ta),xa.x=Ic,xa.y=Ib,xa.z=Mb,xa.w=Ta;Aa.buffer=b.colorBuffer;Ma=!1;Qb=null;fb=0;ib=!1;ec=ya=0;Fa=1;qb=0;rb=5126;cd=rc=$a=Za=0;ma(Aa)?(Ma=!0,Qb=L.createStream(34962,Aa),rb=Qb.dtype):(Qb=L.getBuffer(Aa))?rb=Qb.dtype:
"constant"in Aa?(Fa=2,"number"===typeof Aa.constant?($a=Aa.constant,rc=cd=Za=0):($a=0<Aa.constant.length?Aa.constant[0]:0,rc=1<Aa.constant.length?Aa.constant[1]:0,cd=2<Aa.constant.length?Aa.constant[2]:0,Za=3<Aa.constant.length?Aa.constant[3]:0)):(Qb=ma(Aa.buffer)?L.createStream(34962,Aa.buffer):L.getBuffer(Aa.buffer),rb="type"in Aa?N[Aa.type]:Qb.dtype,ib=!!Aa.normalized,ec=Aa.size|0,ya=Aa.offset|0,qb=Aa.stride|0,fb=Aa.divisor|0);tc=S.location;Wa=P[tc];if(1===Fa){Wa.buffer||E.enableVertexAttribArray(tc);
Nb=ec||4;if(Wa.type!==rb||Wa.size!==Nb||Wa.buffer!==Qb||Wa.normalized!==ib||Wa.offset!==ya||Wa.stride!==qb)E.bindBuffer(34962,Qb.buffer),E.vertexAttribPointer(tc,Nb,rb,ib,qb,ya),Wa.type=rb,Wa.size=Nb,Wa.buffer=Qb,Wa.normalized=ib,Wa.offset=ya,Wa.stride=qb;Wa.divisor!==fb&&(ra.vertexAttribDivisorANGLE(tc,fb),Wa.divisor=fb)}else if(Wa.buffer&&(E.disableVertexAttribArray(tc),Wa.buffer=null),Wa.x!==$a||Wa.y!==rc||Wa.z!==cd||Wa.w!==Za)E.vertexAttrib4f(tc,$a,rc,cd,Za),Wa.x=$a,Wa.y=rc,Wa.z=cd,Wa.w=Za;dd=
V.location;Ha=P[dd];Ha.buffer||E.enableVertexAttribArray(dd);if(5126!==Ha.type||1!==Ha.size||Ha.buffer!==m||!1!==Ha.normalized||0!==Ha.offset||8!==Ha.stride)E.bindBuffer(34962,m.buffer),E.vertexAttribPointer(dd,1,5126,!1,8,0),Ha.type=5126,Ha.size=1,Ha.buffer=m,Ha.normalized=!1,Ha.offset=0,Ha.stride=8;0!==Ha.divisor&&(ra.vertexAttribDivisorANGLE(dd,0),Ha.divisor=0);vc=K.location;Sa=P[vc];Sa.buffer||E.enableVertexAttribArray(vc);if(5126!==Sa.type||1!==Sa.size||Sa.buffer!==l||!1!==Sa.normalized||4!==
Sa.offset||8!==Sa.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(vc,1,5126,!1,8,4),Sa.type=5126,Sa.size=1,Sa.buffer=l,Sa.normalized=!1,Sa.offset=4,Sa.stride=8;0!==Sa.divisor&&(ra.vertexAttribDivisorANGLE(vc,0),Sa.divisor=0);Ca=b.scale;E.uniform2f(Bb.location,Ca[0],Ca[1]);lb=b.translate;E.uniform2f(Oa.location,lb[0],lb[1]);E.uniform1f(oa.location,b.thickness);E.uniform1f(I.location,b.depth);ub=f.call(this,U,b,0);E.uniform4f(W.location,ub[0],ub[1],ub[2],ub[3]);E.uniform1f(ja.location,b.miterLimit);
Cb=k.call(this,U,b,0);E.uniform1f(T.location,Cb);E.uniform1f(A.location,b.dashLength);E.uniform1f(la.location,b.opacity);(sb=b.dashTexture)&&"framebuffer"===sb._reglType&&(sb=sb.color[0]);uc=sb._texture;E.uniform1i(Y.location,uc.bind());(vb=Q.elements)?E.bindBuffer(34963,vb.buffer.buffer):yb.currentVAO&&(vb=Pb.getElements(yb.currentVAO.elements))&&E.bindBuffer(34963,vb.buffer.buffer);wd=b.count;0<wd?vb?ra.drawElementsInstancedANGLE(5,4,vb.type,0<<(vb.type-5121>>1),wd):ra.drawArraysInstancedANGLE(5,
0,4,wd):0>wd&&(vb?E.drawElements(5,4,vb.type,0<<(vb.type-5121>>1)):E.drawArrays(5,0,4));pa.dirty=!0;yb.setVAO(null);U.viewportWidth=r;U.viewportHeight=u;B&&(c.cpuTime+=performance.now()-fa);Kb&&L.destroyStream(wa);Pc&&L.destroyStream(Jc);Xc&&L.destroyStream(Yb);Ub&&L.destroyStream(Pa);pb&&L.destroyStream(za);Ma&&L.destroyStream(Qb);uc.unbind()},scope:function(a,f,k){var d,h,w,D,x,z,sa,B,t,ca,A,E,G,O,I,J,aa,na,S,P,K,R,X,ba,Z,ka,T,W,Y,V,ia,ga,ua,pc,ta,Ga,oa,ha,Xa,td,$b,lc,zc,ja,bd,dc,Cc,Xc,Yb,Hc,Ya,
Ea,cc,Hb,Ua,Lb,cb,la,jc,Oa,ab,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qa,Xb,Oc,db,kc,Pb,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,yb,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,Bb,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,
Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;d=a.viewport;h=d.x|0;w=d.y|0;D="width"in d?d.width|0:U.framebufferWidth-h;x="height"in d?d.height|0:U.framebufferHeight-w;z=U.viewportWidth;U.viewportWidth=D;sa=U.viewportHeight;U.viewportHeight=x;B=fa[0];fa[0]=h;t=fa[1];fa[1]=w;ca=fa[2];fa[2]=D;A=fa[3];fa[3]=x;E=Ka[0];Ka[0]=0;G=Ka[1];Ka[1]=0;O=Ka[2];Ka[2]=0;I=Ka[3];Ka[3]=0;J=ea.blend_enable;ea.blend_enable=!0;aa=nb[0];nb[0]=32774;na=nb[1];nb[1]=32774;S=ra[0];ra[0]=
770;P=ra[1];ra[1]=771;K=ra[2];ra[2]=773;R=ra[3];ra[3]=1;X=ea.cull_enable;ea.cull_enable=!0;ba=ea.cull_face;ea.cull_face=1029;Z=b.call(this,U,a,k);ka=ea.depth_enable;ea.depth_enable=Z;T=a.viewport;W=T.x|0;Y=T.y|0;V="width"in T?T.width|0:U.framebufferWidth-W;ia="height"in T?T.height|0:U.framebufferHeight-Y;ga=Kb[0];Kb[0]=W;ua=Kb[1];Kb[1]=Y;pc=Kb[2];Kb[2]=V;ta=Kb[3];Kb[3]=ia;Ga=ea.scissor_enable;ea.scissor_enable=!0;oa=ea.stencil_enable;ea.stencil_enable=!1;if(ha=pa.profile)Xa=performance.now(),c.count++;
td=Q.offset;Q.offset=0;$b=Q.count;Q.count=4;lc=a.count;zc=Q.instances;Q.instances=lc;ja=Q.primitive;Q.primitive=5;bd=a.dashLength;dc=La[23];La[23]=bd;Cc=a.dashTexture;Xc=La[24];La[24]=Cc;Yb=a.depth;Hc=La[22];La[22]=Yb;Ya=a.id;Ea=La[31];La[31]=Ya;cc=a.miterLimit;Hb=La[32];La[32]=cc;Ua=q.call(this,U,a,k);Lb=La[33];La[33]=Ua;cb=a.opacity;la=La[10];La[10]=cb;jc=U.pixelRatio;Oa=La[34];La[34]=jc;ab=a.scale;Tb=La[6];La[6]=ab;v=a.scaleFract;Ub=La[7];La[7]=v;Pa=a.thickness;ob=La[21];La[21]=Pa;tb=a.translate;
hb=La[8];La[8]=tb;Ra=a.translateFract;Qa=La[9];La[9]=Ra;Xb=C.call(this,U,a,k);Oc=La[3];La[3]=Xb;H.buffer=a.colorBuffer;db=!1;kc=null;Pb=0;ic=!1;kb=jb=0;va=1;pb=0;za=5126;eb=Ba=bb=Va=0;ma(H)?(db=!0,kc=L.createStream(34962,H),za=kc.dtype):(kc=L.getBuffer(H))?za=kc.dtype:"constant"in H?(va=2,"number"===typeof H.constant?(bb=H.constant,Ba=eb=Va=0):(bb=0<H.constant.length?H.constant[0]:0,Ba=1<H.constant.length?H.constant[1]:0,eb=2<H.constant.length?H.constant[2]:0,Va=3<H.constant.length?H.constant[3]:
0)):(kc=ma(H.buffer)?L.createStream(34962,H.buffer):L.getBuffer(H.buffer),za="type"in H?N[H.type]:kc.dtype,ic=!!H.normalized,kb=H.size|0,jb=H.offset|0,pb=H.stride|0,Pb=H.divisor|0);Na=y.buffer;y.buffer=kc;Ab=y.divisor;y.divisor=Pb;zb=y.normalized;y.normalized=ic;Ta=y.offset;y.offset=jb;Ic=y.size;y.size=kb;Ib=y.state;y.state=va;Mb=y.stride;y.stride=pb;Vb=y.type;y.type=za;xa=y.w;y.w=Va;yb=y.x;y.x=bb;Ma=y.y;y.y=Ba;Qb=y.z;y.z=eb;da.buffer=a.positionBuffer;fb=!1;ib=null;ya=0;ec=!1;qb=Fa=0;rb=1;Za=0;$a=
5126;Wa=tc=cd=rc=0;ma(da)?(fb=!0,ib=L.createStream(34962,da),$a=ib.dtype):(ib=L.getBuffer(da))?$a=ib.dtype:"constant"in da?(rb=2,"number"===typeof da.constant?(cd=da.constant,tc=Wa=rc=0):(cd=0<da.constant.length?da.constant[0]:0,tc=1<da.constant.length?da.constant[1]:0,Wa=2<da.constant.length?da.constant[2]:0,rc=3<da.constant.length?da.constant[3]:0)):(ib=ma(da.buffer)?L.createStream(34962,da.buffer):L.getBuffer(da.buffer),$a="type"in da?N[da.type]:ib.dtype,ec=!!da.normalized,qb=da.size|0,Fa=da.offset|
0,Za=da.stride|0,ya=da.divisor|0);Nb=e.buffer;e.buffer=ib;dd=e.divisor;e.divisor=ya;Ha=e.normalized;e.normalized=ec;vc=e.offset;e.offset=Fa;Sa=e.size;e.size=qb;Ca=e.state;e.state=rb;lb=e.stride;e.stride=Za;ub=e.type;e.type=$a;Cb=e.w;e.w=rc;sb=e.x;e.x=cd;uc=e.y;e.y=tc;vb=e.z;e.z=Wa;Aa.buffer=a.colorBuffer;Bb=!1;sc=null;Fd=0;Kc=!1;fd=ed=0;Wb=1;bc=0;Rb=5126;wb=mb=Zb=Ia=0;ma(Aa)?(Bb=!0,sc=L.createStream(34962,Aa),Rb=sc.dtype):(sc=L.getBuffer(Aa))?Rb=sc.dtype:"constant"in Aa?(Wb=2,"number"===typeof Aa.constant?
(Zb=Aa.constant,mb=wb=Ia=0):(Zb=0<Aa.constant.length?Aa.constant[0]:0,mb=1<Aa.constant.length?Aa.constant[1]:0,wb=2<Aa.constant.length?Aa.constant[2]:0,Ia=3<Aa.constant.length?Aa.constant[3]:0)):(sc=ma(Aa.buffer)?L.createStream(34962,Aa.buffer):L.getBuffer(Aa.buffer),Rb="type"in Aa?N[Aa.type]:sc.dtype,Kc=!!Aa.normalized,fd=Aa.size|0,ed=Aa.offset|0,bc=Aa.stride|0,Fd=Aa.divisor|0);Ob=g.buffer;g.buffer=sc;Sb=g.divisor;g.divisor=Fd;fc=g.normalized;g.normalized=Kc;hc=g.offset;g.offset=ed;Ze=g.size;g.size=
fd;xc=g.state;g.state=Wb;yc=g.stride;g.stride=bc;Ac=g.type;g.type=Rb;Lc=g.w;g.w=Ia;Zc=g.x;g.x=Zb;Rc=g.y;g.y=mb;Mc=g.z;g.z=wb;Da.buffer=a.positionBuffer;Jb=!1;Db=null;Nc=0;Ec=!1;gc=Sc=0;Vc=1;gd=0;kd=5126;Zd=bf=Wc=md=0;ma(Da)?(Jb=!0,Db=L.createStream(34962,Da),kd=Db.dtype):(Db=L.getBuffer(Da))?kd=Db.dtype:"constant"in Da?(Vc=2,"number"===typeof Da.constant?(Wc=Da.constant,bf=Zd=md=0):(Wc=0<Da.constant.length?Da.constant[0]:0,bf=1<Da.constant.length?Da.constant[1]:0,Zd=2<Da.constant.length?Da.constant[2]:
0,md=3<Da.constant.length?Da.constant[3]:0)):(Db=ma(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),kd="type"in Da?N[Da.type]:Db.dtype,Ec=!!Da.normalized,gc=Da.size|0,Sc=Da.offset|0,gd=Da.stride|0,Nc=Da.divisor|0);ke=p.buffer;p.buffer=Db;se=p.divisor;p.divisor=Nc;me=p.normalized;p.normalized=Ec;Md=p.offset;p.offset=Sc;Kd=p.size;p.size=gc;id=p.state;p.state=Vc;Bc=p.stride;p.stride=gd;od=p.type;p.type=kd;ld=p.w;p.w=md;ad=p.x;p.x=Wc;pd=p.y;p.y=bf;Gd=p.z;p.z=Zd;Hd=n.buffer;n.buffer=
m;te=n.divisor;n.divisor=0;ze=n.normalized;n.normalized=!1;Ae=n.offset;n.offset=0;ne=n.size;n.size=0;ee=n.state;n.state=1;de=n.stride;n.stride=8;pe=n.type;n.type=5126;be=n.w;n.w=0;he=n.x;n.x=0;wc=n.y;n.y=0;Uc=n.z;n.z=0;qe=r.buffer;r.buffer=l;le=r.divisor;r.divisor=0;Ld=r.normalized;r.normalized=!1;Pd=r.offset;r.offset=4;Qd=r.size;r.size=0;Rd=r.state;r.state=1;ie=r.stride;r.stride=8;vf=r.type;r.type=5126;Ce=r.w;r.w=0;oe=r.x;r.x=0;Re=r.y;r.y=0;Se=r.z;r.z=0;Ja.buffer=a.positionBuffer;Ne=!1;re=null;Fe=
0;He=!1;Je=Ie=0;Ge=1;Nd=0;Ud=5126;Cd=Ke=ce=$d=0;ma(Ja)?(Ne=!0,re=L.createStream(34962,Ja),Ud=re.dtype):(re=L.getBuffer(Ja))?Ud=re.dtype:"constant"in Ja?(Ge=2,"number"===typeof Ja.constant?(ce=Ja.constant,Ke=Cd=$d=0):(ce=0<Ja.constant.length?Ja.constant[0]:0,Ke=1<Ja.constant.length?Ja.constant[1]:0,Cd=2<Ja.constant.length?Ja.constant[2]:0,$d=3<Ja.constant.length?Ja.constant[3]:0)):(re=ma(Ja.buffer)?L.createStream(34962,Ja.buffer):L.getBuffer(Ja.buffer),Ud="type"in Ja?N[Ja.type]:re.dtype,He=!!Ja.normalized,
Je=Ja.size|0,Ie=Ja.offset|0,Nd=Ja.stride|0,Fe=Ja.divisor|0);Sd=u.buffer;u.buffer=re;De=u.divisor;u.divisor=Fe;Le=u.normalized;u.normalized=He;cf=u.offset;u.offset=Ie;af=u.size;u.size=Je;Te=u.state;u.state=Ge;Oe=u.stride;u.stride=Nd;$e=u.type;u.type=Ud;Xe=u.w;u.w=$d;Ue=u.x;u.x=ce;Ve=u.y;u.y=Ke;Td=u.z;u.z=Cd;F.buffer=a.positionBuffer;Xd=!1;We=null;jf=0;nf=!1;kf=ff=0;lf=1;mf=0;rf=5126;Df=Cf=sf=of=0;ma(F)?(Xd=!0,We=L.createStream(34962,F),rf=We.dtype):(We=L.getBuffer(F))?rf=We.dtype:"constant"in F?(lf=
2,"number"===typeof F.constant?(sf=F.constant,Cf=Df=of=0):(sf=0<F.constant.length?F.constant[0]:0,Cf=1<F.constant.length?F.constant[1]:0,Df=2<F.constant.length?F.constant[2]:0,of=3<F.constant.length?F.constant[3]:0)):(We=ma(F.buffer)?L.createStream(34962,F.buffer):L.getBuffer(F.buffer),rf="type"in F?N[F.type]:We.dtype,nf=!!F.normalized,kf=F.size|0,ff=F.offset|0,mf=F.stride|0,jf=F.divisor|0);Pe=M.buffer;M.buffer=We;Ee=M.divisor;M.divisor=jf;pf=M.normalized;M.normalized=nf;qf=M.offset;M.offset=ff;Ef=
M.size;M.size=kf;Hf=M.state;M.state=lf;Bf=M.stride;M.stride=mf;Ff=M.type;M.type=rf;Gf=M.w;M.w=of;xf=M.x;M.x=sf;yf=M.y;M.y=Cf;wf=M.z;M.z=Df;zf=wa.vert;wa.vert=36;Af=wa.frag;wa.frag=35;pa.dirty=!0;f(U,a,k);U.viewportWidth=z;U.viewportHeight=sa;fa[0]=B;fa[1]=t;fa[2]=ca;fa[3]=A;Ka[0]=E;Ka[1]=G;Ka[2]=O;Ka[3]=I;ea.blend_enable=J;nb[0]=aa;nb[1]=na;ra[0]=S;ra[1]=P;ra[2]=K;ra[3]=R;ea.cull_enable=X;ea.cull_face=ba;ea.depth_enable=ka;Kb[0]=ga;Kb[1]=ua;Kb[2]=pc;Kb[3]=ta;ea.scissor_enable=Ga;ea.stencil_enable=
oa;ha&&(c.cpuTime+=performance.now()-Xa);Q.offset=td;Q.count=$b;Q.instances=zc;Q.primitive=ja;La[23]=dc;La[24]=Xc;La[22]=Hc;La[31]=Ea;La[32]=Hb;La[33]=Lb;La[10]=la;La[34]=Oa;La[6]=Tb;La[7]=Ub;La[21]=ob;La[8]=hb;La[9]=Qa;La[3]=Oc;db&&L.destroyStream(kc);y.buffer=Na;y.divisor=Ab;y.normalized=zb;y.offset=Ta;y.size=Ic;y.state=Ib;y.stride=Mb;y.type=Vb;y.w=xa;y.x=yb;y.y=Ma;y.z=Qb;fb&&L.destroyStream(ib);e.buffer=Nb;e.divisor=dd;e.normalized=Ha;e.offset=vc;e.size=Sa;e.state=Ca;e.stride=lb;e.type=ub;e.w=
Cb;e.x=sb;e.y=uc;e.z=vb;Bb&&L.destroyStream(sc);g.buffer=Ob;g.divisor=Sb;g.normalized=fc;g.offset=hc;g.size=Ze;g.state=xc;g.stride=yc;g.type=Ac;g.w=Lc;g.x=Zc;g.y=Rc;g.z=Mc;Jb&&L.destroyStream(Db);p.buffer=ke;p.divisor=se;p.normalized=me;p.offset=Md;p.size=Kd;p.state=id;p.stride=Bc;p.type=od;p.w=ld;p.x=ad;p.y=pd;p.z=Gd;n.buffer=Hd;n.divisor=te;n.normalized=ze;n.offset=Ae;n.size=ne;n.state=ee;n.stride=de;n.type=pe;n.w=be;n.x=he;n.y=wc;n.z=Uc;r.buffer=qe;r.divisor=le;r.normalized=Ld;r.offset=Pd;r.size=
Qd;r.state=Rd;r.stride=ie;r.type=vf;r.w=Ce;r.x=oe;r.y=Re;r.z=Se;Ne&&L.destroyStream(re);u.buffer=Sd;u.divisor=De;u.normalized=Le;u.offset=cf;u.size=af;u.state=Te;u.stride=Oe;u.type=$e;u.w=Xe;u.x=Ue;u.y=Ve;u.z=Td;Xd&&L.destroyStream(We);M.buffer=Pe;M.divisor=Ee;M.normalized=pf;M.offset=qf;M.size=Ef;M.state=Hf;M.stride=Bf;M.type=Ff;M.w=Gf;M.x=xf;M.y=yf;M.z=wf;wa.vert=zf;wa.frag=Af;pa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,c,d,h,
m,l,f,k,b,q,C,y,e,g,p,n,r,u,M){var w,sa,x,B,t,na,S,ba,A,Y,I,V,K,ja,T,ha,la,Qa,Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra;w=a.attributes;sa=a.buffer;x=a.context;B=a.current;t=a.draw;na=a.elements;S=a.extensions;ba=a.framebuffer;A=a.gl;Y=a.isBufferArgs;I=a.next;V=a.shader;K=a.uniforms;ja=a.vao;T=I.blend_color;ha=B.blend_color;la=I.blend_equation;Qa=B.blend_equation;Bb=I.blend_func;oa=B.blend_func;Oa=I.colorMask;W=B.colorMask;P=I.depth_range;L=B.depth_range;U=I.polygonOffset_offset;
pa=B.polygonOffset_offset;Q=I.sample_coverage;Pb=B.sample_coverage;ab=I.scissor_box;R=B.scissor_box;E=I.stencil_func;ma=B.stencil_func;ea=I.stencil_opBack;wa=B.stencil_opBack;La=I.stencil_opFront;yb=B.stencil_opFront;Ka=I.viewport;X=B.viewport;nb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};ra={offset:8,stride:8};return{batch:function(a,f){var k,d,l,m,h,D;k=ba.next;k!==ba.cur&&(k?A.bindFramebuffer(36160,k.framebuffer):A.bindFramebuffer(36160,
null),ba.cur=k);if(B.dirty){var z,K,T,V,J,G,ia,ua,Z,fa,ta,N,H,da,Aa,Da,Ja,F,la,Eb,qa,Fb,xb,Ka,ab,Bb,je,we,ue,Od,fe,ve;z=I.dither;z!==B.dither&&(z?A.enable(3024):A.disable(3024),B.dither=z);K=I.depth_func;K!==B.depth_func&&(A.depthFunc(K),B.depth_func=K);T=P[0];V=P[1];if(T!==L[0]||V!==L[1])A.depthRange(T,V),L[0]=T,L[1]=V;J=I.depth_mask;J!==B.depth_mask&&(A.depthMask(J),B.depth_mask=J);G=Oa[0];ia=Oa[1];ua=Oa[2];Z=Oa[3];if(G!==W[0]||ia!==W[1]||ua!==W[2]||Z!==W[3])A.colorMask(G,ia,ua,Z),W[0]=G,W[1]=ia,
W[2]=ua,W[3]=Z;fa=I.cull_enable;fa!==B.cull_enable&&(fa?A.enable(2884):A.disable(2884),B.cull_enable=fa);ta=I.cull_face;ta!==B.cull_face&&(A.cullFace(ta),B.cull_face=ta);N=I.frontFace;N!==B.frontFace&&(A.frontFace(N),B.frontFace=N);H=I.lineWidth;H!==B.lineWidth&&(A.lineWidth(H),B.lineWidth=H);da=I.polygonOffset_enable;da!==B.polygonOffset_enable&&(da?A.enable(32823):A.disable(32823),B.polygonOffset_enable=da);Aa=U[0];Da=U[1];if(Aa!==pa[0]||Da!==pa[1])A.polygonOffset(Aa,Da),pa[0]=Aa,pa[1]=Da;Ja=I.sample_alpha;
Ja!==B.sample_alpha&&(Ja?A.enable(32926):A.disable(32926),B.sample_alpha=Ja);F=I.sample_enable;F!==B.sample_enable&&(F?A.enable(32928):A.disable(32928),B.sample_enable=F);la=Q[0];Eb=Q[1];if(la!==Pb[0]||Eb!==Pb[1])A.sampleCoverage(la,Eb),Pb[0]=la,Pb[1]=Eb;qa=I.stencil_mask;qa!==B.stencil_mask&&(A.stencilMask(qa),B.stencil_mask=qa);Fb=E[0];xb=E[1];Ka=E[2];if(Fb!==ma[0]||xb!==ma[1]||Ka!==ma[2])A.stencilFunc(Fb,xb,Ka),ma[0]=Fb,ma[1]=xb,ma[2]=Ka;ab=La[0];Bb=La[1];je=La[2];we=La[3];if(ab!==yb[0]||Bb!==
yb[1]||je!==yb[2]||we!==yb[3])A.stencilOpSeparate(ab,Bb,je,we),yb[0]=ab,yb[1]=Bb,yb[2]=je,yb[3]=we;ue=ea[0];Od=ea[1];fe=ea[2];ve=ea[3];if(ue!==wa[0]||Od!==wa[1]||fe!==wa[2]||ve!==wa[3])A.stencilOpSeparate(ue,Od,fe,ve),wa[0]=ue,wa[1]=Od,wa[2]=fe,wa[3]=ve}A.blendColor(0,0,0,0);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=0;A.enable(3042);B.blend_enable=!0;A.blendEquationSeparate(32774,32774);Qa[0]=32774;Qa[1]=32774;A.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;A.disable(2929);B.depth_enable=
!1;A.enable(3089);B.scissor_enable=!0;A.disable(2960);B.stencil_enable=!1;if(d=B.profile)l=performance.now(),c.count+=f;A.useProgram(b.program);m=S.angle_instanced_arrays;var yd;ja.setVAO(null);yd=t.instances;for(h=0;h<f;++h){D=a[h];var Dd,zd,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb,hd,Gb,oc,Xa,Fc,$b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb;Dd=D.viewport;zd=Dd.x|
0;Ad=Dd.y|0;xe="width"in Dd?Dd.width|0:x.framebufferWidth-zd;Me="height"in Dd?Dd.height|0:x.framebufferHeight-Ad;Qe=x.viewportWidth;x.viewportWidth=xe;Bd=x.viewportHeight;x.viewportHeight=Me;A.viewport(zd,Ad,xe,Me);X[0]=zd;X[1]=Ad;X[2]=xe;X[3]=Me;Be=D.viewport;Vd=Be.x|0;Wd=Be.y|0;ae="width"in Be?Be.width|0:x.framebufferWidth-Vd;Yd="height"in Be?Be.height|0:x.framebufferHeight-Wd;A.scissor(Vd,Wd,ae,Yd);R[0]=Vd;R[1]=Wd;R[2]=ae;R[3]=Yd;ga.buffer=D.positionBuffer;qd=!1;nd=null;vd=0;$c=!1;Tc=sd=0;Ed=1;
Pc=0;Jc=5126;Gb=hd=gb=qc=0;Y(ga)?(qd=!0,nd=sa.createStream(34962,ga),Jc=nd.dtype):(nd=sa.getBuffer(ga))?Jc=nd.dtype:"constant"in ga?(Ed=2,"number"===typeof ga.constant?(gb=ga.constant,hd=Gb=qc=0):(gb=0<ga.constant.length?ga.constant[0]:0,hd=1<ga.constant.length?ga.constant[1]:0,Gb=2<ga.constant.length?ga.constant[2]:0,qc=3<ga.constant.length?ga.constant[3]:0)):(nd=Y(ga.buffer)?sa.createStream(34962,ga.buffer):sa.getBuffer(ga.buffer),Jc="type"in ga?nb[ga.type]:nd.dtype,$c=!!ga.normalized,Tc=ga.size|
0,sd=ga.offset|0,Pc=ga.stride|0,vd=ga.divisor|0);oc=g.location;Xa=w[oc];if(1===Ed){Xa.buffer||A.enableVertexAttribArray(oc);Fc=Tc||2;if(Xa.type!==Jc||Xa.size!==Fc||Xa.buffer!==nd||Xa.normalized!==$c||Xa.offset!==sd||Xa.stride!==Pc)A.bindBuffer(34962,nd.buffer),A.vertexAttribPointer(oc,Fc,Jc,$c,Pc,sd),Xa.type=Jc,Xa.size=Fc,Xa.buffer=nd,Xa.normalized=$c,Xa.offset=sd,Xa.stride=Pc;Xa.divisor!==vd&&(m.vertexAttribDivisorANGLE(oc,vd),Xa.divisor=vd)}else if(Xa.buffer&&(A.disableVertexAttribArray(oc),Xa.buffer=
null),Xa.x!==gb||Xa.y!==hd||Xa.z!==Gb||Xa.w!==qc)A.vertexAttrib4f(oc,gb,hd,Gb,qc),Xa.x=gb,Xa.y=hd,Xa.z=Gb,Xa.w=qc;ra.buffer=D.positionFractBuffer;$b=!1;lc=null;Id=0;rd=!1;dc=Gc=0;Cc=1;Xc=0;Yb=5126;ud=Ea=Ya=Hc=0;Y(ra)?($b=!0,lc=sa.createStream(34962,ra),Yb=lc.dtype):(lc=sa.getBuffer(ra))?Yb=lc.dtype:"constant"in ra?(Cc=2,"number"===typeof ra.constant?(Ya=ra.constant,Ea=ud=Hc=0):(Ya=0<ra.constant.length?ra.constant[0]:0,Ea=1<ra.constant.length?ra.constant[1]:0,ud=2<ra.constant.length?ra.constant[2]:
0,Hc=3<ra.constant.length?ra.constant[3]:0)):(lc=Y(ra.buffer)?sa.createStream(34962,ra.buffer):sa.getBuffer(ra.buffer),Yb="type"in ra?nb[ra.type]:lc.dtype,rd=!!ra.normalized,dc=ra.size|0,Gc=ra.offset|0,Xc=ra.stride|0,Id=ra.divisor|0);Hb=p.location;Ua=w[Hb];if(1===Cc){Ua.buffer||A.enableVertexAttribArray(Hb);Lb=dc||2;if(Ua.type!==Yb||Ua.size!==Lb||Ua.buffer!==lc||Ua.normalized!==rd||Ua.offset!==Gc||Ua.stride!==Xc)A.bindBuffer(34962,lc.buffer),A.vertexAttribPointer(Hb,Lb,Yb,rd,Xc,Gc),Ua.type=Yb,Ua.size=
Lb,Ua.buffer=lc,Ua.normalized=rd,Ua.offset=Gc,Ua.stride=Xc;Ua.divisor!==Id&&(m.vertexAttribDivisorANGLE(Hb,Id),Ua.divisor=Id)}else if(Ua.buffer&&(A.disableVertexAttribArray(Hb),Ua.buffer=null),Ua.x!==Ya||Ua.y!==Ea||Ua.z!==ud||Ua.w!==Hc)A.vertexAttrib4f(Hb,Ya,Ea,ud,Hc),Ua.x=Ya,Ua.y=Ea,Ua.z=ud,Ua.w=Hc;cb=D.fill;Dc=cb[0];ye=cb[1];Tb=cb[2];Ub=cb[3];h&&ac===Dc&&mc===ye&&v===Tb&&Pa===Ub||(ac=Dc,mc=ye,v=Tb,Pa=Ub,A.uniform4f(C.location,Dc,ye,Tb,Ub));ob=D.scale;tb=ob[0];Ra=ob[1];h&&hb===tb&&Qc===Ra||(hb=tb,
Qc=Ra,A.uniform2f(n.location,tb,Ra));Xb=D.scaleFract;jd=Xb[0];kc=Xb[1];h&&db===jd&&Yc===kc||(db=jd,Yc=kc,A.uniform2f(r.location,jd,kc));ic=D.translate;jb=ic[0];va=ic[1];h&&kb===jb&&pb===va||(kb=jb,pb=va,A.uniform2f(u.location,jb,va));za=D.translateFract;Va=za[0];Ba=za[1];h&&bb===Va&&eb===Ba||(bb=Va,eb=Ba,A.uniform2f(M.location,Va,Ba));Na=D.id;h&&Ab===Na||(Ab=Na,A.uniform1f(y.location,Na));zb=D.opacity;h&&Ta===zb||(Ta=zb,A.uniform1f(e.location,zb));Ic=q.call(this,x,D,h);Ib=null;(Ib=(Mb=Y(Ic))?na.createStream(Ic):
na.getElements(Ic))&&A.bindBuffer(34963,Ib.buffer.buffer);if(Vb=Ib?Ib.vertCount:-1)0<yd?Ib?m.drawElementsInstancedANGLE(4,Vb,Ib.type,0<<(Ib.type-5121>>1),yd):m.drawArraysInstancedANGLE(4,0,Vb,yd):0>yd&&(Ib?A.drawElements(4,Vb,Ib.type,0<<(Ib.type-5121>>1)):A.drawArrays(4,0,Vb)),x.viewportWidth=Qe,x.viewportHeight=Bd,qd&&sa.destroyStream(nd),$b&&sa.destroyStream(lc),Mb&&na.destroyStream(Ib)}B.dirty=!0;ja.setVAO(null);d&&(c.cpuTime+=performance.now()-l)},draw:function(b){var a,f,k,q,l,m,K,T,V,la,Ka,
J,G,ia,ua,Z,fa,ta,N,H,da,Aa;a=ba.next;a!==ba.cur&&(a?A.bindFramebuffer(36160,a.framebuffer):A.bindFramebuffer(36160,null),ba.cur=a);if(B.dirty){a=I.dither;a!==B.dither&&(a?A.enable(3024):A.disable(3024),B.dither=a);a=I.depth_func;a!==B.depth_func&&(A.depthFunc(a),B.depth_func=a);a=P[0];m=P[1];if(a!==L[0]||m!==L[1])A.depthRange(a,m),L[0]=a,L[1]=m;a=I.depth_mask;a!==B.depth_mask&&(A.depthMask(a),B.depth_mask=a);a=Oa[0];m=Oa[1];f=Oa[2];k=Oa[3];if(a!==W[0]||m!==W[1]||f!==W[2]||k!==W[3])A.colorMask(a,
m,f,k),W[0]=a,W[1]=m,W[2]=f,W[3]=k;a=I.cull_enable;a!==B.cull_enable&&(a?A.enable(2884):A.disable(2884),B.cull_enable=a);a=I.cull_face;a!==B.cull_face&&(A.cullFace(a),B.cull_face=a);a=I.frontFace;a!==B.frontFace&&(A.frontFace(a),B.frontFace=a);a=I.lineWidth;a!==B.lineWidth&&(A.lineWidth(a),B.lineWidth=a);a=I.polygonOffset_enable;a!==B.polygonOffset_enable&&(a?A.enable(32823):A.disable(32823),B.polygonOffset_enable=a);a=U[0];m=U[1];if(a!==pa[0]||m!==pa[1])A.polygonOffset(a,m),pa[0]=a,pa[1]=m;a=I.sample_alpha;
a!==B.sample_alpha&&(a?A.enable(32926):A.disable(32926),B.sample_alpha=a);a=I.sample_enable;a!==B.sample_enable&&(a?A.enable(32928):A.disable(32928),B.sample_enable=a);a=Q[0];m=Q[1];if(a!==Pb[0]||m!==Pb[1])A.sampleCoverage(a,m),Pb[0]=a,Pb[1]=m;a=I.stencil_mask;a!==B.stencil_mask&&(A.stencilMask(a),B.stencil_mask=a);a=E[0];m=E[1];f=E[2];if(a!==ma[0]||m!==ma[1]||f!==ma[2])A.stencilFunc(a,m,f),ma[0]=a,ma[1]=m,ma[2]=f;a=La[0];m=La[1];f=La[2];k=La[3];if(a!==yb[0]||m!==yb[1]||f!==yb[2]||k!==yb[3])A.stencilOpSeparate(a,
m,f,k),yb[0]=a,yb[1]=m,yb[2]=f,yb[3]=k;a=ea[0];m=ea[1];f=ea[2];k=ea[3];if(a!==wa[0]||m!==wa[1]||f!==wa[2]||k!==wa[3])A.stencilOpSeparate(a,m,f,k),wa[0]=a,wa[1]=m,wa[2]=f,wa[3]=k}a=b.viewport;f=a.x|0;k=a.y|0;q="width"in a?a.width|0:x.framebufferWidth-f;l="height"in a?a.height|0:x.framebufferHeight-k;a=x.viewportWidth;x.viewportWidth=q;m=x.viewportHeight;x.viewportHeight=l;A.viewport(f,k,q,l);X[0]=f;X[1]=k;X[2]=q;X[3]=l;A.blendColor(0,0,0,0);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=0;A.enable(3042);B.blend_enable=
!0;A.blendEquationSeparate(32774,32774);Qa[0]=32774;Qa[1]=32774;A.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;A.disable(2929);B.depth_enable=!1;l=b.viewport;f=l.x|0;k=l.y|0;q="width"in l?l.width|0:x.framebufferWidth-f;l="height"in l?l.height|0:x.framebufferHeight-k;A.scissor(f,k,q,l);R[0]=f;R[1]=k;R[2]=q;R[3]=l;A.enable(3089);B.scissor_enable=!0;A.disable(2960);B.stencil_enable=!1;if(f=B.profile)K=performance.now(),c.count++;A.useProgram(d.program);k=S.angle_instanced_arrays;
ja.setVAO(null);ga.buffer=b.positionBuffer;q=!1;T=0;V=!1;Ka=la=0;J=1;G=0;ia=5126;ta=fa=Z=ua=0;Y(ga)?(q=!0,l=sa.createStream(34962,ga),ia=l.dtype):(l=sa.getBuffer(ga))?ia=l.dtype:"constant"in ga?(J=2,"number"===typeof ga.constant?(Z=ga.constant,fa=ta=ua=0):(Z=0<ga.constant.length?ga.constant[0]:0,fa=1<ga.constant.length?ga.constant[1]:0,ta=2<ga.constant.length?ga.constant[2]:0,ua=3<ga.constant.length?ga.constant[3]:0)):(l=Y(ga.buffer)?sa.createStream(34962,ga.buffer):sa.getBuffer(ga.buffer),ia="type"in
ga?nb[ga.type]:l.dtype,V=!!ga.normalized,Ka=ga.size|0,la=ga.offset|0,G=ga.stride|0,T=ga.divisor|0);N=g.location;H=w[N];if(1===J){H.buffer||A.enableVertexAttribArray(N);Ka=Ka||2;if(H.type!==ia||H.size!==Ka||H.buffer!==l||H.normalized!==V||H.offset!==la||H.stride!==G)A.bindBuffer(34962,l.buffer),A.vertexAttribPointer(N,Ka,ia,V,G,la),H.type=ia,H.size=Ka,H.buffer=l,H.normalized=V,H.offset=la,H.stride=G;H.divisor!==T&&(k.vertexAttribDivisorANGLE(N,T),H.divisor=T)}else if(H.buffer&&(A.disableVertexAttribArray(N),
H.buffer=null),H.x!==Z||H.y!==fa||H.z!==ta||H.w!==ua)A.vertexAttrib4f(N,Z,fa,ta,ua),H.x=Z,H.y=fa,H.z=ta,H.w=ua;ra.buffer=b.positionFractBuffer;T=!1;la=0;G=!1;ua=ia=0;Z=1;N=0;H=5126;Aa=da=ta=fa=0;Y(ra)?(T=!0,V=sa.createStream(34962,ra),H=V.dtype):(V=sa.getBuffer(ra))?H=V.dtype:"constant"in ra?(Z=2,"number"===typeof ra.constant?(ta=ra.constant,da=Aa=fa=0):(ta=0<ra.constant.length?ra.constant[0]:0,da=1<ra.constant.length?ra.constant[1]:0,Aa=2<ra.constant.length?ra.constant[2]:0,fa=3<ra.constant.length?
ra.constant[3]:0)):(V=Y(ra.buffer)?sa.createStream(34962,ra.buffer):sa.getBuffer(ra.buffer),H="type"in ra?nb[ra.type]:V.dtype,G=!!ra.normalized,ua=ra.size|0,ia=ra.offset|0,N=ra.stride|0,la=ra.divisor|0);Ka=p.location;J=w[Ka];if(1===Z){J.buffer||A.enableVertexAttribArray(Ka);ua=ua||2;if(J.type!==H||J.size!==ua||J.buffer!==V||J.normalized!==G||J.offset!==ia||J.stride!==N)A.bindBuffer(34962,V.buffer),A.vertexAttribPointer(Ka,ua,H,G,N,ia),J.type=H,J.size=ua,J.buffer=V,J.normalized=G,J.offset=ia,J.stride=
N;J.divisor!==la&&(k.vertexAttribDivisorANGLE(Ka,la),J.divisor=la)}else if(J.buffer&&(A.disableVertexAttribArray(Ka),J.buffer=null),J.x!==ta||J.y!==da||J.z!==Aa||J.w!==fa)A.vertexAttrib4f(Ka,ta,da,Aa,fa),J.x=ta,J.y=da,J.z=Aa,J.w=fa;la=b.fill;A.uniform4f(C.location,la[0],la[1],la[2],la[3]);la=b.scale;A.uniform2f(n.location,la[0],la[1]);la=b.scaleFract;A.uniform2f(r.location,la[0],la[1]);la=b.translate;A.uniform2f(u.location,la[0],la[1]);la=b.translateFract;A.uniform2f(M.location,la[0],la[1]);A.uniform1f(y.location,
b.id);A.uniform1f(e.location,b.opacity);la=h.call(this,x,b,0);(la=(b=Y(la))?na.createStream(la):na.getElements(la))&&A.bindBuffer(34963,la.buffer.buffer);if(G=la?la.vertCount:-1)ia=t.instances,0<ia?la?k.drawElementsInstancedANGLE(4,G,la.type,0<<(la.type-5121>>1),ia):k.drawArraysInstancedANGLE(4,0,G,ia):0>ia&&(la?A.drawElements(4,G,la.type,0<<(la.type-5121>>1)):A.drawArrays(4,0,G)),B.dirty=!0,ja.setVAO(null),x.viewportWidth=a,x.viewportHeight=m,f&&(c.cpuTime+=performance.now()-K),q&&sa.destroyStream(l),
T&&sa.destroyStream(V),b&&na.destroyStream(la)},scope:function(b,e,g){var a,n,p,q,r,d,u,h,y,C,w,M,D,z,A,E,N,H,L,S,P,Q,F,R,U,X,ba,W,ea,ma,oa,ha,pa,wa,La,ja,Oa,Qa,Pb,yb,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb,hd,Gb,oc,Xa,Fc,$b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb;a=b.viewport;n=a.x|0;p=a.y|0;q="width"in a?a.width|0:x.framebufferWidth-n;r="height"in a?a.height|0:x.framebufferHeight-
p;d=x.viewportWidth;x.viewportWidth=q;u=x.viewportHeight;x.viewportHeight=r;h=Ka[0];Ka[0]=n;y=Ka[1];Ka[1]=p;C=Ka[2];Ka[2]=q;w=Ka[3];Ka[3]=r;M=T[0];T[0]=0;D=T[1];T[1]=0;z=T[2];T[2]=0;A=T[3];T[3]=0;E=I.blend_enable;I.blend_enable=!0;N=la[0];la[0]=32774;H=la[1];la[1]=32774;L=Bb[0];Bb[0]=770;S=Bb[1];Bb[1]=771;P=Bb[2];Bb[2]=773;Q=Bb[3];Bb[3]=1;F=I.depth_enable;I.depth_enable=!1;R=b.viewport;U=R.x|0;X=R.y|0;ba="width"in R?R.width|0:x.framebufferWidth-U;W="height"in R?R.height|0:x.framebufferHeight-X;ea=
ab[0];ab[0]=U;ma=ab[1];ab[1]=X;oa=ab[2];ab[2]=ba;ha=ab[3];ab[3]=W;pa=I.scissor_enable;I.scissor_enable=!0;wa=I.stencil_enable;I.stencil_enable=!1;if(La=B.profile)ja=performance.now(),c.count++;Oa=m.call(this,x,b,g);Qa=null;Qa=(Pb=Y(Oa))?na.createStream(Oa):na.getElements(Oa);yb=t.elements;t.elements=Qa;Ad=t.offset;t.offset=0;xe=Qa?Qa.vertCount:-1;Me=t.count;t.count=xe;Qe=t.primitive;t.primitive=4;Bd=b.fill;Be=K[14];K[14]=Bd;Vd=b.id;Wd=K[31];K[31]=Vd;ae=b.opacity;Yd=K[10];K[10]=ae;qd=x.pixelRatio;
nd=K[34];K[34]=qd;vd=b.scale;$c=K[6];K[6]=vd;sd=b.scaleFract;Tc=K[7];K[7]=sd;Ed=b.translate;Pc=K[8];K[8]=Ed;Jc=b.translateFract;qc=K[9];K[9]=Jc;gb=l.call(this,x,b,g);hd=K[3];K[3]=gb;ga.buffer=b.positionBuffer;Gb=!1;oc=null;Xa=0;Fc=!1;lc=$b=0;Id=1;rd=0;Gc=5126;Yb=Xc=Cc=dc=0;Y(ga)?(Gb=!0,oc=sa.createStream(34962,ga),Gc=oc.dtype):(oc=sa.getBuffer(ga))?Gc=oc.dtype:"constant"in ga?(Id=2,"number"===typeof ga.constant?(Cc=ga.constant,Xc=Yb=dc=0):(Cc=0<ga.constant.length?ga.constant[0]:0,Xc=1<ga.constant.length?
ga.constant[1]:0,Yb=2<ga.constant.length?ga.constant[2]:0,dc=3<ga.constant.length?ga.constant[3]:0)):(oc=Y(ga.buffer)?sa.createStream(34962,ga.buffer):sa.getBuffer(ga.buffer),Gc="type"in ga?nb[ga.type]:oc.dtype,Fc=!!ga.normalized,lc=ga.size|0,$b=ga.offset|0,rd=ga.stride|0,Xa=ga.divisor|0);Hc=f.buffer;f.buffer=oc;Ya=f.divisor;f.divisor=Xa;Ea=f.normalized;f.normalized=Fc;ud=f.offset;f.offset=$b;Hb=f.size;f.size=lc;Ua=f.state;f.state=Id;Lb=f.stride;f.stride=rd;cb=f.type;f.type=Gc;Dc=f.w;f.w=dc;ac=f.x;
f.x=Cc;ye=f.y;f.y=Xc;mc=f.z;f.z=Yb;ra.buffer=b.positionFractBuffer;Tb=!1;v=null;Ub=0;Pa=!1;tb=ob=0;hb=1;Ra=0;Qc=5126;kc=db=jd=Xb=0;Y(ra)?(Tb=!0,v=sa.createStream(34962,ra),Qc=v.dtype):(v=sa.getBuffer(ra))?Qc=v.dtype:"constant"in ra?(hb=2,"number"===typeof ra.constant?(jd=ra.constant,db=kc=Xb=0):(jd=0<ra.constant.length?ra.constant[0]:0,db=1<ra.constant.length?ra.constant[1]:0,kc=2<ra.constant.length?ra.constant[2]:0,Xb=3<ra.constant.length?ra.constant[3]:0)):(v=Y(ra.buffer)?sa.createStream(34962,
ra.buffer):sa.getBuffer(ra.buffer),Qc="type"in ra?nb[ra.type]:v.dtype,Pa=!!ra.normalized,tb=ra.size|0,ob=ra.offset|0,Ra=ra.stride|0,Ub=ra.divisor|0);Yc=k.buffer;k.buffer=v;ic=k.divisor;k.divisor=Ub;jb=k.normalized;k.normalized=Pa;kb=k.offset;k.offset=ob;va=k.size;k.size=tb;pb=k.state;k.state=hb;za=k.stride;k.stride=Ra;Va=k.type;k.type=Qc;bb=k.w;k.w=Xb;Ba=k.x;k.x=jd;eb=k.y;k.y=db;Na=k.z;k.z=kc;Ab=V.vert;V.vert=42;zb=V.frag;V.frag=41;B.dirty=!0;e(x,b,g);x.viewportWidth=d;x.viewportHeight=u;Ka[0]=h;
Ka[1]=y;Ka[2]=C;Ka[3]=w;T[0]=M;T[1]=D;T[2]=z;T[3]=A;I.blend_enable=E;la[0]=N;la[1]=H;Bb[0]=L;Bb[1]=S;Bb[2]=P;Bb[3]=Q;I.depth_enable=F;ab[0]=ea;ab[1]=ma;ab[2]=oa;ab[3]=ha;I.scissor_enable=pa;I.stencil_enable=wa;La&&(c.cpuTime+=performance.now()-ja);Pb&&na.destroyStream(Qa);t.elements=yb;t.offset=Ad;t.count=Me;t.primitive=Qe;K[14]=Be;K[31]=Wd;K[10]=Yd;K[34]=nd;K[6]=$c;K[7]=Tc;K[8]=Pc;K[9]=qc;K[3]=hd;Gb&&sa.destroyStream(oc);f.buffer=Hc;f.divisor=Ya;f.normalized=Ea;f.offset=ud;f.size=Hb;f.state=Ua;f.stride=
Lb;f.type=cb;f.w=Dc;f.x=ac;f.y=ye;f.z=mc;Tb&&sa.destroyStream(v);k.buffer=Yc;k.divisor=ic;k.normalized=jb;k.offset=kb;k.size=va;k.state=pb;k.stride=za;k.type=Va;k.w=bb;k.x=Ba;k.y=eb;k.z=Na;V.vert=Ab;V.frag=zb;B.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,d,h,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,sa,x,B,t,na,S,ba,A,Y,I,V,K,ja,T,ha,la,Qa,
Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra,cc,pc,jc,td,zc){var aa,O,ka,Ga,Kb,bd,Oc,J,G,ia,ua,Z,fa,ta,N,H,da,Aa,Da,Ja,F,nc,Eb,qa,Fb,xb,Ye,xd,ge,je,we,ue,Od,fe,ve,yd,Dd,zd,Ad;aa=a.attributes;O=a.buffer;ka=a.context;Ga=a.current;Kb=a.draw;bd=a.elements;Oc=a.extensions;J=a.framebuffer;G=a.gl;ia=a.isBufferArgs;ua=a.next;Z=a.shader;fa=a.uniforms;ta=a.vao;N=ua.blend_color;H=Ga.blend_color;da=ua.blend_equation;Aa=Ga.blend_equation;Da=ua.blend_func;Ja=Ga.blend_func;F=ua.colorMask;nc=Ga.colorMask;
Eb=ua.depth_range;qa=Ga.depth_range;Fb=ua.polygonOffset_offset;xb=Ga.polygonOffset_offset;Ye=ua.sample_coverage;xd=Ga.sample_coverage;ge=ua.scissor_box;je=Ga.scissor_box;we=ua.stencil_func;ue=Ga.stencil_func;Od=ua.stencil_opBack;fe=Ga.stencil_opBack;ve=ua.stencil_opFront;yd=Ga.stencil_opFront;Dd=ua.viewport;zd=Ga.viewport;Ad={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,e){var g,a,f,k,n,p;g=J.next;g!==J.cur&&(g?G.bindFramebuffer(36160,
g.framebuffer):G.bindFramebuffer(36160,null),J.cur=g);if(Ga.dirty){var q,r,d,u,l,m,h,y,C,w,M,D,x,z,t,sa,B,A,ca,I,N,na,S,K,T,V,ba,Z,fa,Y,Da,Ua,ja,cb;q=ua.dither;q!==Ga.dither&&(q?G.enable(3024):G.disable(3024),Ga.dither=q);r=da[0];d=da[1];if(r!==Aa[0]||d!==Aa[1])G.blendEquationSeparate(r,d),Aa[0]=r,Aa[1]=d;u=ua.depth_func;u!==Ga.depth_func&&(G.depthFunc(u),Ga.depth_func=u);l=Eb[0];m=Eb[1];if(l!==qa[0]||m!==qa[1])G.depthRange(l,m),qa[0]=l,qa[1]=m;h=ua.depth_mask;h!==Ga.depth_mask&&(G.depthMask(h),Ga.depth_mask=
h);y=F[0];C=F[1];w=F[2];M=F[3];if(y!==nc[0]||C!==nc[1]||w!==nc[2]||M!==nc[3])G.colorMask(y,C,w,M),nc[0]=y,nc[1]=C,nc[2]=w,nc[3]=M;D=ua.cull_enable;D!==Ga.cull_enable&&(D?G.enable(2884):G.disable(2884),Ga.cull_enable=D);x=ua.cull_face;x!==Ga.cull_face&&(G.cullFace(x),Ga.cull_face=x);z=ua.frontFace;z!==Ga.frontFace&&(G.frontFace(z),Ga.frontFace=z);t=ua.lineWidth;t!==Ga.lineWidth&&(G.lineWidth(t),Ga.lineWidth=t);sa=ua.polygonOffset_enable;sa!==Ga.polygonOffset_enable&&(sa?G.enable(32823):G.disable(32823),
Ga.polygonOffset_enable=sa);B=Fb[0];A=Fb[1];if(B!==xb[0]||A!==xb[1])G.polygonOffset(B,A),xb[0]=B,xb[1]=A;ca=ua.sample_alpha;ca!==Ga.sample_alpha&&(ca?G.enable(32926):G.disable(32926),Ga.sample_alpha=ca);I=ua.sample_enable;I!==Ga.sample_enable&&(I?G.enable(32928):G.disable(32928),Ga.sample_enable=I);N=Ye[0];na=Ye[1];if(N!==xd[0]||na!==xd[1])G.sampleCoverage(N,na),xd[0]=N,xd[1]=na;S=ua.stencil_mask;S!==Ga.stencil_mask&&(G.stencilMask(S),Ga.stencil_mask=S);K=we[0];T=we[1];V=we[2];if(K!==ue[0]||T!==ue[1]||
V!==ue[2])G.stencilFunc(K,T,V),ue[0]=K,ue[1]=T,ue[2]=V;ba=ve[0];Z=ve[1];fa=ve[2];Y=ve[3];if(ba!==yd[0]||Z!==yd[1]||fa!==yd[2]||Y!==yd[3])G.stencilOpSeparate(ba,Z,fa,Y),yd[0]=ba,yd[1]=Z,yd[2]=fa,yd[3]=Y;Da=Od[0];Ua=Od[1];ja=Od[2];cb=Od[3];if(Da!==fe[0]||Ua!==fe[1]||ja!==fe[2]||cb!==fe[3])G.stencilOpSeparate(Da,Ua,ja,cb),fe[0]=Da,fe[1]=Ua,fe[2]=ja,fe[3]=cb}G.blendColor(0,0,0,1);H[0]=0;H[1]=0;H[2]=0;H[3]=1;G.enable(3042);Ga.blend_enable=!0;G.blendFuncSeparate(770,771,773,1);Ja[0]=770;Ja[1]=771;Ja[2]=
773;Ja[3]=1;G.disable(2929);Ga.depth_enable=!1;G.enable(3089);Ga.scissor_enable=!0;G.disable(2960);Ga.stencil_enable=!1;if(a=Ga.profile)f=performance.now(),c.count+=e;G.useProgram(ha.program);k=Oc.angle_instanced_arrays;var Dc;ta.setVAO(null);G.uniform1i(E.location,!1);G.uniform1i(yb.location,pa.bind());Dc=Kb.instances;for(n=0;n<e;++n){p=b[n];var ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,
Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,Dd,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,ge,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf;ac=p.viewport;ye=ac.x|0;mc=ac.y|0;Tb="width"in ac?ac.width|
0:ka.framebufferWidth-ye;v="height"in ac?ac.height|0:ka.framebufferHeight-mc;Ub=ka.viewportWidth;ka.viewportWidth=Tb;Pa=ka.viewportHeight;ka.viewportHeight=v;G.viewport(ye,mc,Tb,v);zd[0]=ye;zd[1]=mc;zd[2]=Tb;zd[3]=v;ob=p.viewport;tb=ob.x|0;hb=ob.y|0;Ra="width"in ob?ob.width|0:ka.framebufferWidth-tb;Qc="height"in ob?ob.height|0:ka.framebufferHeight-hb;G.scissor(tb,hb,Ra,Qc);je[0]=tb;je[1]=hb;je[2]=Ra;je[3]=Qc;Xb=la.call(this,ka,p,n);jd=!1;db=null;kc=0;Yc=!1;jb=ic=0;kb=1;va=0;pb=5126;Ba=bb=Va=za=0;
ia(Xb)?(jd=!0,db=O.createStream(34962,Xb),pb=db.dtype):(db=O.getBuffer(Xb))?pb=db.dtype:"constant"in Xb?(kb=2,"number"===typeof Xb.constant?(Va=Xb.constant,bb=Ba=za=0):(Va=0<Xb.constant.length?Xb.constant[0]:0,bb=1<Xb.constant.length?Xb.constant[1]:0,Ba=2<Xb.constant.length?Xb.constant[2]:0,za=3<Xb.constant.length?Xb.constant[3]:0)):(db=ia(Xb.buffer)?O.createStream(34962,Xb.buffer):O.getBuffer(Xb.buffer),pb="type"in Xb?Ad[Xb.type]:db.dtype,Yc=!!Xb.normalized,jb=Xb.size|0,ic=Xb.offset|0,va=Xb.stride|
0,kc=Xb.divisor|0);eb=pc.location;Na=aa[eb];if(1===kb){Na.buffer||G.enableVertexAttribArray(eb);Ab=jb||1;if(Na.type!==pb||Na.size!==Ab||Na.buffer!==db||Na.normalized!==Yc||Na.offset!==ic||Na.stride!==va)G.bindBuffer(34962,db.buffer),G.vertexAttribPointer(eb,Ab,pb,Yc,va,ic),Na.type=pb,Na.size=Ab,Na.buffer=db,Na.normalized=Yc,Na.offset=ic,Na.stride=va;Na.divisor!==kc&&(k.vertexAttribDivisorANGLE(eb,kc),Na.divisor=kc)}else if(Na.buffer&&(G.disableVertexAttribArray(eb),Na.buffer=null),Na.x!==Va||Na.y!==
bb||Na.z!==Ba||Na.w!==za)G.vertexAttrib4f(eb,Va,bb,Ba,za),Na.x=Va,Na.y=bb,Na.z=Ba,Na.w=za;zb=Qa.call(this,ka,p,n);Ta=!1;Ic=null;Ib=0;Mb=!1;xa=Vb=0;Jd=1;Ma=0;Qb=5126;ec=ya=ib=fb=0;ia(zb)?(Ta=!0,Ic=O.createStream(34962,zb),Qb=Ic.dtype):(Ic=O.getBuffer(zb))?Qb=Ic.dtype:"constant"in zb?(Jd=2,"number"===typeof zb.constant?(ib=zb.constant,ya=ec=fb=0):(ib=0<zb.constant.length?zb.constant[0]:0,ya=1<zb.constant.length?zb.constant[1]:0,ec=2<zb.constant.length?zb.constant[2]:0,fb=3<zb.constant.length?zb.constant[3]:
0)):(Ic=ia(zb.buffer)?O.createStream(34962,zb.buffer):O.getBuffer(zb.buffer),Qb="type"in zb?Ad[zb.type]:Ic.dtype,Mb=!!zb.normalized,xa=zb.size|0,Vb=zb.offset|0,Ma=zb.stride|0,Ib=zb.divisor|0);Fa=td.location;qb=aa[Fa];if(1===Jd){qb.buffer||G.enableVertexAttribArray(Fa);rb=xa||1;if(qb.type!==Qb||qb.size!==rb||qb.buffer!==Ic||qb.normalized!==Mb||qb.offset!==Vb||qb.stride!==Ma)G.bindBuffer(34962,Ic.buffer),G.vertexAttribPointer(Fa,rb,Qb,Mb,Ma,Vb),qb.type=Qb,qb.size=rb,qb.buffer=Ic,qb.normalized=Mb,qb.offset=
Vb,qb.stride=Ma;qb.divisor!==Ib&&(k.vertexAttribDivisorANGLE(Fa,Ib),qb.divisor=Ib)}else if(qb.buffer&&(G.disableVertexAttribArray(Fa),qb.buffer=null),qb.x!==ib||qb.y!==ya||qb.z!==ec||qb.w!==fb)G.vertexAttrib4f(Fa,ib,ya,ec,fb),qb.x=ib,qb.y=ya,qb.z=ec,qb.w=fb;Za=Bb.call(this,ka,p,n);$a=!1;rc=null;cd=0;tc=!1;Nb=Wa=0;dd=1;Ha=0;vc=5126;ub=lb=Ca=Sa=0;ia(Za)?($a=!0,rc=O.createStream(34962,Za),vc=rc.dtype):(rc=O.getBuffer(Za))?vc=rc.dtype:"constant"in Za?(dd=2,"number"===typeof Za.constant?(Ca=Za.constant,
lb=ub=Sa=0):(Ca=0<Za.constant.length?Za.constant[0]:0,lb=1<Za.constant.length?Za.constant[1]:0,ub=2<Za.constant.length?Za.constant[2]:0,Sa=3<Za.constant.length?Za.constant[3]:0)):(rc=ia(Za.buffer)?O.createStream(34962,Za.buffer):O.getBuffer(Za.buffer),vc="type"in Za?Ad[Za.type]:rc.dtype,tc=!!Za.normalized,Nb=Za.size|0,Wa=Za.offset|0,Ha=Za.stride|0,cd=Za.divisor|0);Cb=jc.location;sb=aa[Cb];if(1===dd){sb.buffer||G.enableVertexAttribArray(Cb);uc=Nb||1;if(sb.type!==vc||sb.size!==uc||sb.buffer!==rc||sb.normalized!==
tc||sb.offset!==Wa||sb.stride!==Ha)G.bindBuffer(34962,rc.buffer),G.vertexAttribPointer(Cb,uc,vc,tc,Ha,Wa),sb.type=vc,sb.size=uc,sb.buffer=rc,sb.normalized=tc,sb.offset=Wa,sb.stride=Ha;sb.divisor!==cd&&(k.vertexAttribDivisorANGLE(Cb,cd),sb.divisor=cd)}else if(sb.buffer&&(G.disableVertexAttribArray(Cb),sb.buffer=null),sb.x!==Ca||sb.y!==lb||sb.z!==ub||sb.w!==Sa)G.vertexAttrib4f(Cb,Ca,lb,ub,Sa),sb.x=Ca,sb.y=lb,sb.z=ub,sb.w=Sa;vb=oa.call(this,ka,p,n);wd=!1;sc=null;Fd=0;Kc=!1;fd=ed=0;Wb=1;bc=0;Rb=5126;
wb=mb=Zb=Ia=0;ia(vb)?(wd=!0,sc=O.createStream(34962,vb),Rb=sc.dtype):(sc=O.getBuffer(vb))?Rb=sc.dtype:"constant"in vb?(Wb=2,"number"===typeof vb.constant?(Zb=vb.constant,mb=wb=Ia=0):(Zb=0<vb.constant.length?vb.constant[0]:0,mb=1<vb.constant.length?vb.constant[1]:0,wb=2<vb.constant.length?vb.constant[2]:0,Ia=3<vb.constant.length?vb.constant[3]:0)):(sc=ia(vb.buffer)?O.createStream(34962,vb.buffer):O.getBuffer(vb.buffer),Rb="type"in vb?Ad[vb.type]:sc.dtype,Kc=!!vb.normalized,fd=vb.size|0,ed=vb.offset|
0,bc=vb.stride|0,Fd=vb.divisor|0);Ob=zc.location;Sb=aa[Ob];if(1===Wb){Sb.buffer||G.enableVertexAttribArray(Ob);fc=fd||1;if(Sb.type!==Rb||Sb.size!==fc||Sb.buffer!==sc||Sb.normalized!==Kc||Sb.offset!==ed||Sb.stride!==bc)G.bindBuffer(34962,sc.buffer),G.vertexAttribPointer(Ob,fc,Rb,Kc,bc,ed),Sb.type=Rb,Sb.size=fc,Sb.buffer=sc,Sb.normalized=Kc,Sb.offset=ed,Sb.stride=bc;Sb.divisor!==Fd&&(k.vertexAttribDivisorANGLE(Ob,Fd),Sb.divisor=Fd)}else if(Sb.buffer&&(G.disableVertexAttribArray(Ob),Sb.buffer=null),
Sb.x!==Zb||Sb.y!==mb||Sb.z!==wb||Sb.w!==Ia)G.vertexAttrib4f(Ob,Zb,mb,wb,Ia),Sb.x=Zb,Sb.y=mb,Sb.z=wb,Sb.w=Ia;hc=Oa.call(this,ka,p,n);Ze=!1;xc=null;yc=0;Ac=!1;Zc=Lc=0;Rc=1;Mc=0;Jb=5126;Sc=Ec=Nc=Db=0;ia(hc)?(Ze=!0,xc=O.createStream(34962,hc),Jb=xc.dtype):(xc=O.getBuffer(hc))?Jb=xc.dtype:"constant"in hc?(Rc=2,"number"===typeof hc.constant?(Nc=hc.constant,Ec=Sc=Db=0):(Nc=0<hc.constant.length?hc.constant[0]:0,Ec=1<hc.constant.length?hc.constant[1]:0,Sc=2<hc.constant.length?hc.constant[2]:0,Db=3<hc.constant.length?
hc.constant[3]:0)):(xc=ia(hc.buffer)?O.createStream(34962,hc.buffer):O.getBuffer(hc.buffer),Jb="type"in hc?Ad[hc.type]:xc.dtype,Ac=!!hc.normalized,Zc=hc.size|0,Lc=hc.offset|0,Mc=hc.stride|0,yc=hc.divisor|0);gc=ga.location;Vc=aa[gc];if(1===Rc){Vc.buffer||G.enableVertexAttribArray(gc);gd=Zc||1;if(Vc.type!==Jb||Vc.size!==gd||Vc.buffer!==xc||Vc.normalized!==Ac||Vc.offset!==Lc||Vc.stride!==Mc)G.bindBuffer(34962,xc.buffer),G.vertexAttribPointer(gc,gd,Jb,Ac,Mc,Lc),Vc.type=Jb,Vc.size=gd,Vc.buffer=xc,Vc.normalized=
Ac,Vc.offset=Lc,Vc.stride=Mc;Vc.divisor!==yc&&(k.vertexAttribDivisorANGLE(gc,yc),Vc.divisor=yc)}else if(Vc.buffer&&(G.disableVertexAttribArray(gc),Vc.buffer=null),Vc.x!==Nc||Vc.y!==Ec||Vc.z!==Sc||Vc.w!==Db)G.vertexAttrib4f(gc,Nc,Ec,Sc,Db),Vc.x=Nc,Vc.y=Ec,Vc.z=Sc,Vc.w=Db;kd=W.call(this,ka,p,n);md=!1;Wc=null;Dd=0;Zd=!1;se=ke=0;me=1;Md=0;Kd=5126;ld=od=Bc=id=0;ia(kd)?(md=!0,Wc=O.createStream(34962,kd),Kd=Wc.dtype):(Wc=O.getBuffer(kd))?Kd=Wc.dtype:"constant"in kd?(me=2,"number"===typeof kd.constant?(Bc=
kd.constant,od=ld=id=0):(Bc=0<kd.constant.length?kd.constant[0]:0,od=1<kd.constant.length?kd.constant[1]:0,ld=2<kd.constant.length?kd.constant[2]:0,id=3<kd.constant.length?kd.constant[3]:0)):(Wc=ia(kd.buffer)?O.createStream(34962,kd.buffer):O.getBuffer(kd.buffer),Kd="type"in kd?Ad[kd.type]:Wc.dtype,Zd=!!kd.normalized,se=kd.size|0,ke=kd.offset|0,Md=kd.stride|0,Dd=kd.divisor|0);ad=ab.location;pd=aa[ad];if(1===me){pd.buffer||G.enableVertexAttribArray(ad);Gd=se||1;if(pd.type!==Kd||pd.size!==Gd||pd.buffer!==
Wc||pd.normalized!==Zd||pd.offset!==ke||pd.stride!==Md)G.bindBuffer(34962,Wc.buffer),G.vertexAttribPointer(ad,Gd,Kd,Zd,Md,ke),pd.type=Kd,pd.size=Gd,pd.buffer=Wc,pd.normalized=Zd,pd.offset=ke,pd.stride=Md;pd.divisor!==Dd&&(k.vertexAttribDivisorANGLE(ad,Dd),pd.divisor=Dd)}else if(pd.buffer&&(G.disableVertexAttribArray(ad),pd.buffer=null),pd.x!==Bc||pd.y!==od||pd.z!==ld||pd.w!==id)G.vertexAttrib4f(ad,Bc,od,ld,id),pd.x=Bc,pd.y=od,pd.z=ld,pd.w=id;Hd=P.call(this,ka,p,n);te=!1;ze=null;Ae=0;ne=!1;de=ee=0;
pe=1;be=0;he=5126;le=qe=Uc=wc=0;ia(Hd)?(te=!0,ze=O.createStream(34962,Hd),he=ze.dtype):(ze=O.getBuffer(Hd))?he=ze.dtype:"constant"in Hd?(pe=2,"number"===typeof Hd.constant?(Uc=Hd.constant,qe=le=wc=0):(Uc=0<Hd.constant.length?Hd.constant[0]:0,qe=1<Hd.constant.length?Hd.constant[1]:0,le=2<Hd.constant.length?Hd.constant[2]:0,wc=3<Hd.constant.length?Hd.constant[3]:0)):(ze=ia(Hd.buffer)?O.createStream(34962,Hd.buffer):O.getBuffer(Hd.buffer),he="type"in Hd?Ad[Hd.type]:ze.dtype,ne=!!Hd.normalized,de=Hd.size|
0,ee=Hd.offset|0,be=Hd.stride|0,Ae=Hd.divisor|0);Ld=R.location;Pd=aa[Ld];if(1===pe){Pd.buffer||G.enableVertexAttribArray(Ld);Qd=de||4;if(Pd.type!==he||Pd.size!==Qd||Pd.buffer!==ze||Pd.normalized!==ne||Pd.offset!==ee||Pd.stride!==be)G.bindBuffer(34962,ze.buffer),G.vertexAttribPointer(Ld,Qd,he,ne,be,ee),Pd.type=he,Pd.size=Qd,Pd.buffer=ze,Pd.normalized=ne,Pd.offset=ee,Pd.stride=be;Pd.divisor!==Ae&&(k.vertexAttribDivisorANGLE(Ld,Ae),Pd.divisor=Ae)}else if(Pd.buffer&&(G.disableVertexAttribArray(Ld),Pd.buffer=
null),Pd.x!==Uc||Pd.y!==qe||Pd.z!==le||Pd.w!==wc)G.vertexAttrib4f(Ld,Uc,qe,le,wc),Pd.x=Uc,Pd.y=qe,Pd.z=le,Pd.w=wc;Rd=L.call(this,ka,p,n);ie=!1;ge=null;Ce=0;oe=!1;Se=Re=0;Ne=1;re=0;Fe=5126;Ge=Je=Ie=He=0;ia(Rd)?(ie=!0,ge=O.createStream(34962,Rd),Fe=ge.dtype):(ge=O.getBuffer(Rd))?Fe=ge.dtype:"constant"in Rd?(Ne=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ge=He=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?Rd.constant[1]:0,Ge=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?
Rd.constant[3]:0)):(ge=ia(Rd.buffer)?O.createStream(34962,Rd.buffer):O.getBuffer(Rd.buffer),Fe="type"in Rd?Ad[Rd.type]:ge.dtype,oe=!!Rd.normalized,Se=Rd.size|0,Re=Rd.offset|0,re=Rd.stride|0,Ce=Rd.divisor|0);Nd=Pb.location;Ud=aa[Nd];if(1===Ne){Ud.buffer||G.enableVertexAttribArray(Nd);$d=Se||4;if(Ud.type!==Fe||Ud.size!==$d||Ud.buffer!==ge||Ud.normalized!==oe||Ud.offset!==Re||Ud.stride!==re)G.bindBuffer(34962,ge.buffer),G.vertexAttribPointer(Nd,$d,Fe,oe,re,Re),Ud.type=Fe,Ud.size=$d,Ud.buffer=ge,Ud.normalized=
oe,Ud.offset=Re,Ud.stride=re;Ud.divisor!==Ce&&(k.vertexAttribDivisorANGLE(Nd,Ce),Ud.divisor=Ce)}else if(Ud.buffer&&(G.disableVertexAttribArray(Nd),Ud.buffer=null),Ud.x!==Ie||Ud.y!==Je||Ud.z!==Ge||Ud.w!==He)G.vertexAttrib4f(Nd,Ie,Je,Ge,He),Ud.x=Ie,Ud.y=Je,Ud.z=Ge,Ud.w=He;ce=U.call(this,ka,p,n);Ke=!1;Cd=null;Sd=0;De=!1;cf=Le=0;af=1;Te=0;Oe=5126;Ve=Ue=Xe=$e=0;ia(ce)?(Ke=!0,Cd=O.createStream(34962,ce),Oe=Cd.dtype):(Cd=O.getBuffer(ce))?Oe=Cd.dtype:"constant"in ce?(af=2,"number"===typeof ce.constant?(Xe=
ce.constant,Ue=Ve=$e=0):(Xe=0<ce.constant.length?ce.constant[0]:0,Ue=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,$e=3<ce.constant.length?ce.constant[3]:0)):(Cd=ia(ce.buffer)?O.createStream(34962,ce.buffer):O.getBuffer(ce.buffer),Oe="type"in ce?Ad[ce.type]:Cd.dtype,De=!!ce.normalized,cf=ce.size|0,Le=ce.offset|0,Te=ce.stride|0,Sd=ce.divisor|0);Td=ma.location;Xd=aa[Td];if(1===af){Xd.buffer||G.enableVertexAttribArray(Td);We=cf||1;if(Xd.type!==Oe||Xd.size!==We||Xd.buffer!==
Cd||Xd.normalized!==De||Xd.offset!==Le||Xd.stride!==Te)G.bindBuffer(34962,Cd.buffer),G.vertexAttribPointer(Td,We,Oe,De,Te,Le),Xd.type=Oe,Xd.size=We,Xd.buffer=Cd,Xd.normalized=De,Xd.offset=Le,Xd.stride=Te;Xd.divisor!==Sd&&(k.vertexAttribDivisorANGLE(Td,Sd),Xd.divisor=Sd)}else if(Xd.buffer&&(G.disableVertexAttribArray(Td),Xd.buffer=null),Xd.x!==Xe||Xd.y!==Ue||Xd.z!==Ve||Xd.w!==$e)G.vertexAttrib4f(Td,Xe,Ue,Ve,$e),Xd.x=Xe,Xd.y=Ue,Xd.z=Ve,Xd.w=$e;jf=ka.pixelRatio;n&&nf===jf||(nf=jf,G.uniform1f(Ka.location,
jf));ff=p.scale;kf=ff[0];mf=ff[1];n&&lf===kf&&rf===mf||(lf=kf,rf=mf,G.uniform2f(X.location,kf,mf));of=p.scaleFract;sf=of[0];Df=of[1];n&&Cf===sf&&Pe===Df||(Cf=sf,Pe=Df,G.uniform2f(nb.location,sf,Df));Ee=p.translate;pf=Ee[0];Ef=Ee[1];n&&qf===pf&&Hf===Ef||(qf=pf,Hf=Ef,G.uniform2f(ra.location,pf,Ef));Bf=p.translateFract;Ff=Bf[0];xf=Bf[1];n&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,G.uniform2f(cc.location,Ff,xf));wf=Q.call(this,ka,p,n);zf=wf[0];Jf=wf[1];n&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,G.uniform2f(La.location,
zf,Jf));Lf=p.opacity;n&&Mf===Lf||(Mf=Lf,G.uniform1f(wa.location,Lf));(tf=p.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;G.uniform1i(ea.location,Rf.bind());If=p.elements;uf=null;(uf=(dg=ia(If))?bd.createStream(If):bd.getElements(If))&&G.bindBuffer(34963,uf.buffer.buffer);Sf=p.offset;if(Tf=p.count)0<Dc?uf?k.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),Dc):k.drawArraysInstancedANGLE(0,Sf,Tf,Dc):0>Dc&&(uf?G.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>
1)):G.drawArrays(0,Sf,Tf)),ka.viewportWidth=Ub,ka.viewportHeight=Pa,jd&&O.destroyStream(db),Ta&&O.destroyStream(Ic),$a&&O.destroyStream(rc),wd&&O.destroyStream(sc),Ze&&O.destroyStream(xc),md&&O.destroyStream(Wc),te&&O.destroyStream(ze),ie&&O.destroyStream(ge),Ke&&O.destroyStream(Cd),Rf.unbind(),dg&&bd.destroyStream(uf)}pa.unbind();Ga.dirty=!0;ta.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(a){var n,p,r,u,w,M,x,t,sa,B,A,ca,I,N,na,S,L,K,P,Q,T,V,U,ba,Z,fa,W,Y,la,Da,oa,ha,pa,ja,Ya,
Ea,Oa,Hb,Ua,Lb,cb,Qa,ac,Bb,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Dd,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,ge,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re;n=J.next;n!==J.cur&&(n?G.bindFramebuffer(36160,n.framebuffer):
G.bindFramebuffer(36160,null),J.cur=n);if(Ga.dirty){var Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf;Fe=ua.dither;Fe!==Ga.dither&&(Fe?G.enable(3024):G.disable(3024),Ga.dither=Fe);He=da[0];Ie=da[1];if(He!==Aa[0]||Ie!==Aa[1])G.blendEquationSeparate(He,Ie),Aa[0]=He,Aa[1]=Ie;Je=ua.depth_func;Je!==Ga.depth_func&&(G.depthFunc(Je),Ga.depth_func=Je);Ge=Eb[0];Nd=Eb[1];if(Ge!==qa[0]||Nd!==qa[1])G.depthRange(Ge,Nd),qa[0]=Ge,qa[1]=Nd;Ud=ua.depth_mask;Ud!==
Ga.depth_mask&&(G.depthMask(Ud),Ga.depth_mask=Ud);$d=F[0];ce=F[1];Ke=F[2];Cd=F[3];if($d!==nc[0]||ce!==nc[1]||Ke!==nc[2]||Cd!==nc[3])G.colorMask($d,ce,Ke,Cd),nc[0]=$d,nc[1]=ce,nc[2]=Ke,nc[3]=Cd;Sd=ua.cull_enable;Sd!==Ga.cull_enable&&(Sd?G.enable(2884):G.disable(2884),Ga.cull_enable=Sd);De=ua.cull_face;De!==Ga.cull_face&&(G.cullFace(De),Ga.cull_face=De);Le=ua.frontFace;Le!==Ga.frontFace&&(G.frontFace(Le),Ga.frontFace=Le);cf=ua.lineWidth;cf!==Ga.lineWidth&&(G.lineWidth(cf),Ga.lineWidth=cf);af=ua.polygonOffset_enable;
af!==Ga.polygonOffset_enable&&(af?G.enable(32823):G.disable(32823),Ga.polygonOffset_enable=af);Te=Fb[0];Oe=Fb[1];if(Te!==xb[0]||Oe!==xb[1])G.polygonOffset(Te,Oe),xb[0]=Te,xb[1]=Oe;$e=ua.sample_alpha;$e!==Ga.sample_alpha&&($e?G.enable(32926):G.disable(32926),Ga.sample_alpha=$e);Xe=ua.sample_enable;Xe!==Ga.sample_enable&&(Xe?G.enable(32928):G.disable(32928),Ga.sample_enable=Xe);Ue=Ye[0];Ve=Ye[1];if(Ue!==xd[0]||Ve!==xd[1])G.sampleCoverage(Ue,Ve),xd[0]=Ue,xd[1]=Ve;Td=ua.stencil_mask;Td!==Ga.stencil_mask&&
(G.stencilMask(Td),Ga.stencil_mask=Td);Xd=we[0];We=we[1];jf=we[2];if(Xd!==ue[0]||We!==ue[1]||jf!==ue[2])G.stencilFunc(Xd,We,jf),ue[0]=Xd,ue[1]=We,ue[2]=jf;nf=ve[0];ff=ve[1];kf=ve[2];lf=ve[3];if(nf!==yd[0]||ff!==yd[1]||kf!==yd[2]||lf!==yd[3])G.stencilOpSeparate(nf,ff,kf,lf),yd[0]=nf,yd[1]=ff,yd[2]=kf,yd[3]=lf;mf=Od[0];rf=Od[1];of=Od[2];sf=Od[3];if(mf!==fe[0]||rf!==fe[1]||of!==fe[2]||sf!==fe[3])G.stencilOpSeparate(mf,rf,of,sf),fe[0]=mf,fe[1]=rf,fe[2]=of,fe[3]=sf}p=a.viewport;r=p.x|0;u=p.y|0;w="width"in
p?p.width|0:ka.framebufferWidth-r;M="height"in p?p.height|0:ka.framebufferHeight-u;x=ka.viewportWidth;ka.viewportWidth=w;t=ka.viewportHeight;ka.viewportHeight=M;G.viewport(r,u,w,M);zd[0]=r;zd[1]=u;zd[2]=w;zd[3]=M;G.blendColor(0,0,0,1);H[0]=0;H[1]=0;H[2]=0;H[3]=1;G.enable(3042);Ga.blend_enable=!0;G.blendFuncSeparate(770,771,773,1);Ja[0]=770;Ja[1]=771;Ja[2]=773;Ja[3]=1;G.disable(2929);Ga.depth_enable=!1;sa=a.viewport;B=sa.x|0;A=sa.y|0;ca="width"in sa?sa.width|0:ka.framebufferWidth-B;I="height"in sa?
sa.height|0:ka.framebufferHeight-A;G.scissor(B,A,ca,I);je[0]=B;je[1]=A;je[2]=ca;je[3]=I;G.enable(3089);Ga.scissor_enable=!0;G.disable(2960);Ga.stencil_enable=!1;if(N=Ga.profile)na=performance.now(),c.count++;G.useProgram(d.program);S=Oc.angle_instanced_arrays;ta.setVAO(null);L=h.call(this,ka,a,0);K=!1;P=null;Q=0;T=!1;U=V=0;ba=1;Z=0;fa=5126;Da=la=Y=W=0;ia(L)?(K=!0,P=O.createStream(34962,L),fa=P.dtype):(P=O.getBuffer(L))?fa=P.dtype:"constant"in L?(ba=2,"number"===typeof L.constant?(Y=L.constant,la=
Da=W=0):(Y=0<L.constant.length?L.constant[0]:0,la=1<L.constant.length?L.constant[1]:0,Da=2<L.constant.length?L.constant[2]:0,W=3<L.constant.length?L.constant[3]:0)):(P=ia(L.buffer)?O.createStream(34962,L.buffer):O.getBuffer(L.buffer),fa="type"in L?Ad[L.type]:P.dtype,T=!!L.normalized,U=L.size|0,V=L.offset|0,Z=L.stride|0,Q=L.divisor|0);oa=pc.location;ha=aa[oa];if(1===ba){ha.buffer||G.enableVertexAttribArray(oa);pa=U||1;if(ha.type!==fa||ha.size!==pa||ha.buffer!==P||ha.normalized!==T||ha.offset!==V||
ha.stride!==Z)G.bindBuffer(34962,P.buffer),G.vertexAttribPointer(oa,pa,fa,T,Z,V),ha.type=fa,ha.size=pa,ha.buffer=P,ha.normalized=T,ha.offset=V,ha.stride=Z;ha.divisor!==Q&&(S.vertexAttribDivisorANGLE(oa,Q),ha.divisor=Q)}else if(ha.buffer&&(G.disableVertexAttribArray(oa),ha.buffer=null),ha.x!==Y||ha.y!==la||ha.z!==Da||ha.w!==W)G.vertexAttrib4f(oa,Y,la,Da,W),ha.x=Y,ha.y=la,ha.z=Da,ha.w=W;ja=m.call(this,ka,a,0);Ya=!1;Ea=null;Oa=0;Hb=!1;Lb=Ua=0;cb=1;Qa=0;ac=5126;v=Tb=mc=Bb=0;ia(ja)?(Ya=!0,Ea=O.createStream(34962,
ja),ac=Ea.dtype):(Ea=O.getBuffer(ja))?ac=Ea.dtype:"constant"in ja?(cb=2,"number"===typeof ja.constant?(mc=ja.constant,Tb=v=Bb=0):(mc=0<ja.constant.length?ja.constant[0]:0,Tb=1<ja.constant.length?ja.constant[1]:0,v=2<ja.constant.length?ja.constant[2]:0,Bb=3<ja.constant.length?ja.constant[3]:0)):(Ea=ia(ja.buffer)?O.createStream(34962,ja.buffer):O.getBuffer(ja.buffer),ac="type"in ja?Ad[ja.type]:Ea.dtype,Hb=!!ja.normalized,Lb=ja.size|0,Ua=ja.offset|0,Qa=ja.stride|0,Oa=ja.divisor|0);Ub=td.location;Pa=
aa[Ub];if(1===cb){Pa.buffer||G.enableVertexAttribArray(Ub);ob=Lb||1;if(Pa.type!==ac||Pa.size!==ob||Pa.buffer!==Ea||Pa.normalized!==Hb||Pa.offset!==Ua||Pa.stride!==Qa)G.bindBuffer(34962,Ea.buffer),G.vertexAttribPointer(Ub,ob,ac,Hb,Qa,Ua),Pa.type=ac,Pa.size=ob,Pa.buffer=Ea,Pa.normalized=Hb,Pa.offset=Ua,Pa.stride=Qa;Pa.divisor!==Oa&&(S.vertexAttribDivisorANGLE(Ub,Oa),Pa.divisor=Oa)}else if(Pa.buffer&&(G.disableVertexAttribArray(Ub),Pa.buffer=null),Pa.x!==mc||Pa.y!==Tb||Pa.z!==v||Pa.w!==Bb)G.vertexAttrib4f(Ub,
mc,Tb,v,Bb),Pa.x=mc,Pa.y=Tb,Pa.z=v,Pa.w=Bb;tb=l.call(this,ka,a,0);hb=!1;Ra=null;Qc=0;Xb=!1;db=jd=0;kc=1;Yc=0;ic=5126;pb=va=kb=jb=0;ia(tb)?(hb=!0,Ra=O.createStream(34962,tb),ic=Ra.dtype):(Ra=O.getBuffer(tb))?ic=Ra.dtype:"constant"in tb?(kc=2,"number"===typeof tb.constant?(kb=tb.constant,va=pb=jb=0):(kb=0<tb.constant.length?tb.constant[0]:0,va=1<tb.constant.length?tb.constant[1]:0,pb=2<tb.constant.length?tb.constant[2]:0,jb=3<tb.constant.length?tb.constant[3]:0)):(Ra=ia(tb.buffer)?O.createStream(34962,
tb.buffer):O.getBuffer(tb.buffer),ic="type"in tb?Ad[tb.type]:Ra.dtype,Xb=!!tb.normalized,db=tb.size|0,jd=tb.offset|0,Yc=tb.stride|0,Qc=tb.divisor|0);za=jc.location;Va=aa[za];if(1===kc){Va.buffer||G.enableVertexAttribArray(za);bb=db||1;if(Va.type!==ic||Va.size!==bb||Va.buffer!==Ra||Va.normalized!==Xb||Va.offset!==jd||Va.stride!==Yc)G.bindBuffer(34962,Ra.buffer),G.vertexAttribPointer(za,bb,ic,Xb,Yc,jd),Va.type=ic,Va.size=bb,Va.buffer=Ra,Va.normalized=Xb,Va.offset=jd,Va.stride=Yc;Va.divisor!==Qc&&(S.vertexAttribDivisorANGLE(za,
Qc),Va.divisor=Qc)}else if(Va.buffer&&(G.disableVertexAttribArray(za),Va.buffer=null),Va.x!==kb||Va.y!==va||Va.z!==pb||Va.w!==jb)G.vertexAttrib4f(za,kb,va,pb,jb),Va.x=kb,Va.y=va,Va.z=pb,Va.w=jb;Ba=f.call(this,ka,a,0);eb=!1;Na=null;Ab=0;zb=!1;Ic=Ta=0;Ib=1;Mb=0;Vb=5126;Qb=Ma=Jd=xa=0;ia(Ba)?(eb=!0,Na=O.createStream(34962,Ba),Vb=Na.dtype):(Na=O.getBuffer(Ba))?Vb=Na.dtype:"constant"in Ba?(Ib=2,"number"===typeof Ba.constant?(Jd=Ba.constant,Ma=Qb=xa=0):(Jd=0<Ba.constant.length?Ba.constant[0]:0,Ma=1<Ba.constant.length?
Ba.constant[1]:0,Qb=2<Ba.constant.length?Ba.constant[2]:0,xa=3<Ba.constant.length?Ba.constant[3]:0)):(Na=ia(Ba.buffer)?O.createStream(34962,Ba.buffer):O.getBuffer(Ba.buffer),Vb="type"in Ba?Ad[Ba.type]:Na.dtype,zb=!!Ba.normalized,Ic=Ba.size|0,Ta=Ba.offset|0,Mb=Ba.stride|0,Ab=Ba.divisor|0);fb=zc.location;ib=aa[fb];if(1===Ib){ib.buffer||G.enableVertexAttribArray(fb);ya=Ic||1;if(ib.type!==Vb||ib.size!==ya||ib.buffer!==Na||ib.normalized!==zb||ib.offset!==Ta||ib.stride!==Mb)G.bindBuffer(34962,Na.buffer),
G.vertexAttribPointer(fb,ya,Vb,zb,Mb,Ta),ib.type=Vb,ib.size=ya,ib.buffer=Na,ib.normalized=zb,ib.offset=Ta,ib.stride=Mb;ib.divisor!==Ab&&(S.vertexAttribDivisorANGLE(fb,Ab),ib.divisor=Ab)}else if(ib.buffer&&(G.disableVertexAttribArray(fb),ib.buffer=null),ib.x!==Jd||ib.y!==Ma||ib.z!==Qb||ib.w!==xa)G.vertexAttrib4f(fb,Jd,Ma,Qb,xa),ib.x=Jd,ib.y=Ma,ib.z=Qb,ib.w=xa;ec=k.call(this,ka,a,0);Fa=!1;qb=null;rb=0;Za=!1;rc=$a=0;cd=1;tc=0;Wa=5126;vc=Ha=dd=Nb=0;ia(ec)?(Fa=!0,qb=O.createStream(34962,ec),Wa=qb.dtype):
(qb=O.getBuffer(ec))?Wa=qb.dtype:"constant"in ec?(cd=2,"number"===typeof ec.constant?(dd=ec.constant,Ha=vc=Nb=0):(dd=0<ec.constant.length?ec.constant[0]:0,Ha=1<ec.constant.length?ec.constant[1]:0,vc=2<ec.constant.length?ec.constant[2]:0,Nb=3<ec.constant.length?ec.constant[3]:0)):(qb=ia(ec.buffer)?O.createStream(34962,ec.buffer):O.getBuffer(ec.buffer),Wa="type"in ec?Ad[ec.type]:qb.dtype,Za=!!ec.normalized,rc=ec.size|0,$a=ec.offset|0,tc=ec.stride|0,rb=ec.divisor|0);Sa=ga.location;Ca=aa[Sa];if(1===cd){Ca.buffer||
G.enableVertexAttribArray(Sa);lb=rc||1;if(Ca.type!==Wa||Ca.size!==lb||Ca.buffer!==qb||Ca.normalized!==Za||Ca.offset!==$a||Ca.stride!==tc)G.bindBuffer(34962,qb.buffer),G.vertexAttribPointer(Sa,lb,Wa,Za,tc,$a),Ca.type=Wa,Ca.size=lb,Ca.buffer=qb,Ca.normalized=Za,Ca.offset=$a,Ca.stride=tc;Ca.divisor!==rb&&(S.vertexAttribDivisorANGLE(Sa,rb),Ca.divisor=rb)}else if(Ca.buffer&&(G.disableVertexAttribArray(Sa),Ca.buffer=null),Ca.x!==dd||Ca.y!==Ha||Ca.z!==vc||Ca.w!==Nb)G.vertexAttrib4f(Sa,dd,Ha,vc,Nb),Ca.x=
dd,Ca.y=Ha,Ca.z=vc,Ca.w=Nb;ub=b.call(this,ka,a,0);Cb=!1;sb=null;uc=0;vb=!1;sc=wd=0;Fd=1;Kc=0;ed=5126;Rb=bc=Wb=fd=0;ia(ub)?(Cb=!0,sb=O.createStream(34962,ub),ed=sb.dtype):(sb=O.getBuffer(ub))?ed=sb.dtype:"constant"in ub?(Fd=2,"number"===typeof ub.constant?(Wb=ub.constant,bc=Rb=fd=0):(Wb=0<ub.constant.length?ub.constant[0]:0,bc=1<ub.constant.length?ub.constant[1]:0,Rb=2<ub.constant.length?ub.constant[2]:0,fd=3<ub.constant.length?ub.constant[3]:0)):(sb=ia(ub.buffer)?O.createStream(34962,ub.buffer):O.getBuffer(ub.buffer),
ed="type"in ub?Ad[ub.type]:sb.dtype,vb=!!ub.normalized,sc=ub.size|0,wd=ub.offset|0,Kc=ub.stride|0,uc=ub.divisor|0);Ia=ab.location;Zb=aa[Ia];if(1===Fd){Zb.buffer||G.enableVertexAttribArray(Ia);mb=sc||1;if(Zb.type!==ed||Zb.size!==mb||Zb.buffer!==sb||Zb.normalized!==vb||Zb.offset!==wd||Zb.stride!==Kc)G.bindBuffer(34962,sb.buffer),G.vertexAttribPointer(Ia,mb,ed,vb,Kc,wd),Zb.type=ed,Zb.size=mb,Zb.buffer=sb,Zb.normalized=vb,Zb.offset=wd,Zb.stride=Kc;Zb.divisor!==uc&&(S.vertexAttribDivisorANGLE(Ia,uc),Zb.divisor=
uc)}else if(Zb.buffer&&(G.disableVertexAttribArray(Ia),Zb.buffer=null),Zb.x!==Wb||Zb.y!==bc||Zb.z!==Rb||Zb.w!==fd)G.vertexAttrib4f(Ia,Wb,bc,Rb,fd),Zb.x=Wb,Zb.y=bc,Zb.z=Rb,Zb.w=fd;wb=q.call(this,ka,a,0);Ob=!1;Sb=null;fc=0;hc=!1;xc=Dd=0;yc=1;Ac=0;Lc=5126;Jb=Mc=Rc=Zc=0;ia(wb)?(Ob=!0,Sb=O.createStream(34962,wb),Lc=Sb.dtype):(Sb=O.getBuffer(wb))?Lc=Sb.dtype:"constant"in wb?(yc=2,"number"===typeof wb.constant?(Rc=wb.constant,Mc=Jb=Zc=0):(Rc=0<wb.constant.length?wb.constant[0]:0,Mc=1<wb.constant.length?
wb.constant[1]:0,Jb=2<wb.constant.length?wb.constant[2]:0,Zc=3<wb.constant.length?wb.constant[3]:0)):(Sb=ia(wb.buffer)?O.createStream(34962,wb.buffer):O.getBuffer(wb.buffer),Lc="type"in wb?Ad[wb.type]:Sb.dtype,hc=!!wb.normalized,xc=wb.size|0,Dd=wb.offset|0,Ac=wb.stride|0,fc=wb.divisor|0);Db=R.location;Nc=aa[Db];if(1===yc){Nc.buffer||G.enableVertexAttribArray(Db);Ec=xc||4;if(Nc.type!==Lc||Nc.size!==Ec||Nc.buffer!==Sb||Nc.normalized!==hc||Nc.offset!==Dd||Nc.stride!==Ac)G.bindBuffer(34962,Sb.buffer),
G.vertexAttribPointer(Db,Ec,Lc,hc,Ac,Dd),Nc.type=Lc,Nc.size=Ec,Nc.buffer=Sb,Nc.normalized=hc,Nc.offset=Dd,Nc.stride=Ac;Nc.divisor!==fc&&(S.vertexAttribDivisorANGLE(Db,fc),Nc.divisor=fc)}else if(Nc.buffer&&(G.disableVertexAttribArray(Db),Nc.buffer=null),Nc.x!==Rc||Nc.y!==Mc||Nc.z!==Jb||Nc.w!==Zc)G.vertexAttrib4f(Db,Rc,Mc,Jb,Zc),Nc.x=Rc,Nc.y=Mc,Nc.z=Jb,Nc.w=Zc;Sc=C.call(this,ka,a,0);gc=!1;Vc=null;gd=0;kd=!1;Wc=md=0;ge=1;Zd=0;ke=5126;Kd=Md=me=se=0;ia(Sc)?(gc=!0,Vc=O.createStream(34962,Sc),ke=Vc.dtype):
(Vc=O.getBuffer(Sc))?ke=Vc.dtype:"constant"in Sc?(ge=2,"number"===typeof Sc.constant?(me=Sc.constant,Md=Kd=se=0):(me=0<Sc.constant.length?Sc.constant[0]:0,Md=1<Sc.constant.length?Sc.constant[1]:0,Kd=2<Sc.constant.length?Sc.constant[2]:0,se=3<Sc.constant.length?Sc.constant[3]:0)):(Vc=ia(Sc.buffer)?O.createStream(34962,Sc.buffer):O.getBuffer(Sc.buffer),ke="type"in Sc?Ad[Sc.type]:Vc.dtype,kd=!!Sc.normalized,Wc=Sc.size|0,md=Sc.offset|0,Zd=Sc.stride|0,gd=Sc.divisor|0);id=Pb.location;Bc=aa[id];if(1===ge){Bc.buffer||
G.enableVertexAttribArray(id);od=Wc||4;if(Bc.type!==ke||Bc.size!==od||Bc.buffer!==Vc||Bc.normalized!==kd||Bc.offset!==md||Bc.stride!==Zd)G.bindBuffer(34962,Vc.buffer),G.vertexAttribPointer(id,od,ke,kd,Zd,md),Bc.type=ke,Bc.size=od,Bc.buffer=Vc,Bc.normalized=kd,Bc.offset=md,Bc.stride=Zd;Bc.divisor!==gd&&(S.vertexAttribDivisorANGLE(id,gd),Bc.divisor=gd)}else if(Bc.buffer&&(G.disableVertexAttribArray(id),Bc.buffer=null),Bc.x!==me||Bc.y!==Md||Bc.z!==Kd||Bc.w!==se)G.vertexAttrib4f(id,me,Md,Kd,se),Bc.x=
me,Bc.y=Md,Bc.z=Kd,Bc.w=se;ld=y.call(this,ka,a,0);ad=!1;pd=null;Gd=0;Hd=!1;ze=te=0;Ae=1;ne=0;ee=5126;he=be=pe=de=0;ia(ld)?(ad=!0,pd=O.createStream(34962,ld),ee=pd.dtype):(pd=O.getBuffer(ld))?ee=pd.dtype:"constant"in ld?(Ae=2,"number"===typeof ld.constant?(pe=ld.constant,be=he=de=0):(pe=0<ld.constant.length?ld.constant[0]:0,be=1<ld.constant.length?ld.constant[1]:0,he=2<ld.constant.length?ld.constant[2]:0,de=3<ld.constant.length?ld.constant[3]:0)):(pd=ia(ld.buffer)?O.createStream(34962,ld.buffer):O.getBuffer(ld.buffer),
ee="type"in ld?Ad[ld.type]:pd.dtype,Hd=!!ld.normalized,ze=ld.size|0,te=ld.offset|0,ne=ld.stride|0,Gd=ld.divisor|0);wc=ma.location;Uc=aa[wc];if(1===Ae){Uc.buffer||G.enableVertexAttribArray(wc);qe=ze||1;if(Uc.type!==ee||Uc.size!==qe||Uc.buffer!==pd||Uc.normalized!==Hd||Uc.offset!==te||Uc.stride!==ne)G.bindBuffer(34962,pd.buffer),G.vertexAttribPointer(wc,qe,ee,Hd,ne,te),Uc.type=ee,Uc.size=qe,Uc.buffer=pd,Uc.normalized=Hd,Uc.offset=te,Uc.stride=ne;Uc.divisor!==Gd&&(S.vertexAttribDivisorANGLE(wc,Gd),Uc.divisor=
Gd)}else if(Uc.buffer&&(G.disableVertexAttribArray(wc),Uc.buffer=null),Uc.x!==pe||Uc.y!==be||Uc.z!==he||Uc.w!==de)G.vertexAttrib4f(wc,pe,be,he,de),Uc.x=pe,Uc.y=be,Uc.z=he,Uc.w=de;G.uniform1i(E.location,!1);G.uniform1f(Ka.location,ka.pixelRatio);le=a.scale;G.uniform2f(X.location,le[0],le[1]);Ld=a.scaleFract;G.uniform2f(nb.location,Ld[0],Ld[1]);Pd=a.translate;G.uniform2f(ra.location,Pd[0],Pd[1]);Qd=a.translateFract;G.uniform2f(cc.location,Qd[0],Qd[1]);Rd=e.call(this,ka,a,0);G.uniform2f(La.location,
Rd[0],Rd[1]);G.uniform1f(wa.location,a.opacity);G.uniform1i(yb.location,g.bind());(ie=a.markerTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);vf=ie._texture;G.uniform1i(ea.location,vf.bind());Ce=a.elements;oe=null;(oe=(Re=ia(Ce))?bd.createStream(Ce):bd.getElements(Ce))&&G.bindBuffer(34963,oe.buffer.buffer);Se=a.offset;if(Ne=a.count)re=Kb.instances,0<re?oe?S.drawElementsInstancedANGLE(0,Ne,oe.type,Se<<(oe.type-5121>>1),re):S.drawArraysInstancedANGLE(0,Se,Ne,re):0>re&&(oe?G.drawElements(0,
Ne,oe.type,Se<<(oe.type-5121>>1)):G.drawArrays(0,Se,Ne)),Ga.dirty=!0,ta.setVAO(null),ka.viewportWidth=x,ka.viewportHeight=t,N&&(c.cpuTime+=performance.now()-na),K&&O.destroyStream(P),Ya&&O.destroyStream(Ea),hb&&O.destroyStream(Ra),eb&&O.destroyStream(Na),Fa&&O.destroyStream(qb),Cb&&O.destroyStream(sb),Ob&&O.destroyStream(Sb),gc&&O.destroyStream(Vc),ad&&O.destroyStream(pd),g.unbind(),vf.unbind(),Re&&bd.destroyStream(oe)},scope:function(b,e,g){var a,f,k,q,d,l,m,h,y,C,D,z,F,E,H,G,J,L,P,Q,aa,R,da,U,X,
W,ea,ha,ga,ma,qa,la,oa,ta,ra,Ja,pa,Aa,wa,Ka,La,Oa,xb,Eb,v,Qa,Pa,ob,tb,hb,Ra,ab,Fb,zc,db,nb,td,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,nc,Ib,Mb,Vb,xa,Pb,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,Bb,yb,tc,Wa,Nb,cc,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,pc,sc,jc,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Oc,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,je,zd,Od,xd,we,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,yd,fe,ue,ve,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,
Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=b.viewport;f=a.x|0;k=a.y|0;q="width"in a?a.width|0:ka.framebufferWidth-f;d="height"in a?a.height|0:ka.framebufferHeight-k;l=ka.viewportWidth;ka.viewportWidth=q;m=ka.viewportHeight;ka.viewportHeight=
d;h=Dd[0];Dd[0]=f;y=Dd[1];Dd[1]=k;C=Dd[2];Dd[2]=q;D=Dd[3];Dd[3]=d;z=N[0];N[0]=0;F=N[1];N[1]=0;E=N[2];N[2]=0;H=N[3];N[3]=1;G=ua.blend_enable;ua.blend_enable=!0;J=Da[0];Da[0]=770;L=Da[1];Da[1]=771;P=Da[2];Da[2]=773;Q=Da[3];Da[3]=1;aa=ua.depth_enable;ua.depth_enable=!1;R=b.viewport;da=R.x|0;U=R.y|0;X="width"in R?R.width|0:ka.framebufferWidth-da;W="height"in R?R.height|0:ka.framebufferHeight-U;ea=ge[0];ge[0]=da;ha=ge[1];ge[1]=U;ga=ge[2];ge[2]=X;ma=ge[3];ge[3]=W;qa=ua.scissor_enable;ua.scissor_enable=
!0;la=ua.stencil_enable;ua.stencil_enable=!1;if(oa=Ga.profile)ta=performance.now(),c.count++;ra=b.elements;Ja=null;Ja=(pa=ia(ra))?bd.createStream(ra):bd.getElements(ra);Aa=Kb.elements;Kb.elements=Ja;wa=b.offset;Ka=Kb.offset;Kb.offset=wa;La=b.count;Oa=Kb.count;Kb.count=La;xb=Kb.primitive;Kb.primitive=0;Eb=fa[45];fa[45]=!1;v=b.markerTexture;Qa=fa[48];fa[48]=v;Pa=b.opacity;ob=fa[10];fa[10]=Pa;tb=p.call(this,ka,b,g);hb=fa[46];fa[46]=tb;Ra=fa[47];fa[47]=n;ab=ka.pixelRatio;Fb=fa[34];fa[34]=ab;zc=b.scale;
db=fa[6];fa[6]=zc;nb=b.scaleFract;td=fa[7];fa[7]=nb;ic=b.translate;jb=fa[8];fa[8]=ic;kb=b.translateFract;va=fa[9];fa[9]=kb;pb=r.call(this,ka,b,g);za=!1;Va=null;bb=0;Ba=!1;Na=eb=0;Ab=1;zb=0;Ta=5126;Vb=Mb=Ib=nc=0;ia(pb)?(za=!0,Va=O.createStream(34962,pb),Ta=Va.dtype):(Va=O.getBuffer(pb))?Ta=Va.dtype:"constant"in pb?(Ab=2,"number"===typeof pb.constant?(Ib=pb.constant,Mb=Vb=nc=0):(Ib=0<pb.constant.length?pb.constant[0]:0,Mb=1<pb.constant.length?pb.constant[1]:0,Vb=2<pb.constant.length?pb.constant[2]:
0,nc=3<pb.constant.length?pb.constant[3]:0)):(Va=ia(pb.buffer)?O.createStream(34962,pb.buffer):O.getBuffer(pb.buffer),Ta="type"in pb?Ad[pb.type]:Va.dtype,Ba=!!pb.normalized,Na=pb.size|0,eb=pb.offset|0,zb=pb.stride|0,bb=pb.divisor|0);xa=u.buffer;u.buffer=Va;Pb=u.divisor;u.divisor=bb;Ma=u.normalized;u.normalized=Ba;Qb=u.offset;u.offset=eb;fb=u.size;u.size=Na;ib=u.state;u.state=Ab;ya=u.stride;u.stride=zb;ec=u.type;u.type=Ta;Fa=u.w;u.w=nc;qb=u.x;u.x=Ib;rb=u.y;u.y=Mb;Za=u.z;u.z=Vb;$a=M.call(this,ka,b,
g);Bb=!1;yb=null;tc=0;Wa=!1;cc=Nb=0;Ha=1;vc=0;Sa=5126;Cb=ub=lb=Ca=0;ia($a)?(Bb=!0,yb=O.createStream(34962,$a),Sa=yb.dtype):(yb=O.getBuffer($a))?Sa=yb.dtype:"constant"in $a?(Ha=2,"number"===typeof $a.constant?(lb=$a.constant,ub=Cb=Ca=0):(lb=0<$a.constant.length?$a.constant[0]:0,ub=1<$a.constant.length?$a.constant[1]:0,Cb=2<$a.constant.length?$a.constant[2]:0,Ca=3<$a.constant.length?$a.constant[3]:0)):(yb=ia($a.buffer)?O.createStream(34962,$a.buffer):O.getBuffer($a.buffer),Sa="type"in $a?Ad[$a.type]:
yb.dtype,Wa=!!$a.normalized,cc=$a.size|0,Nb=$a.offset|0,vc=$a.stride|0,tc=$a.divisor|0);sb=w.buffer;w.buffer=yb;uc=w.divisor;w.divisor=tc;vb=w.normalized;w.normalized=Wa;pc=w.offset;w.offset=Nb;sc=w.size;w.size=cc;jc=w.state;w.state=Ha;Kc=w.stride;w.stride=vc;ed=w.type;w.type=Sa;fd=w.w;w.w=Ca;Wb=w.x;w.x=lb;bc=w.y;w.y=ub;Rb=w.z;w.z=Cb;Ia=sa.call(this,ka,b,g);Zb=!1;mb=null;wb=0;Ob=!1;fc=Sb=0;hc=1;Oc=0;xc=5126;Zc=Lc=Ac=yc=0;ia(Ia)?(Zb=!0,mb=O.createStream(34962,Ia),xc=mb.dtype):(mb=O.getBuffer(Ia))?
xc=mb.dtype:"constant"in Ia?(hc=2,"number"===typeof Ia.constant?(Ac=Ia.constant,Lc=Zc=yc=0):(Ac=0<Ia.constant.length?Ia.constant[0]:0,Lc=1<Ia.constant.length?Ia.constant[1]:0,Zc=2<Ia.constant.length?Ia.constant[2]:0,yc=3<Ia.constant.length?Ia.constant[3]:0)):(mb=ia(Ia.buffer)?O.createStream(34962,Ia.buffer):O.getBuffer(Ia.buffer),xc="type"in Ia?Ad[Ia.type]:mb.dtype,Ob=!!Ia.normalized,fc=Ia.size|0,Sb=Ia.offset|0,Oc=Ia.stride|0,wb=Ia.divisor|0);Rc=x.buffer;x.buffer=mb;Mc=x.divisor;x.divisor=wb;Jb=x.normalized;
x.normalized=Ob;Db=x.offset;x.offset=Sb;Nc=x.size;x.size=fc;Ec=x.state;x.state=hc;Sc=x.stride;x.stride=Oc;gc=x.type;x.type=xc;Vc=x.w;x.w=yc;gd=x.x;x.x=Ac;kd=x.y;x.y=Lc;md=x.z;x.z=Zc;Wc=B.call(this,ka,b,g);je=!1;zd=null;Od=0;xd=!1;Md=we=0;Kd=1;id=0;Bc=5126;pd=ad=ld=od=0;ia(Wc)?(je=!0,zd=O.createStream(34962,Wc),Bc=zd.dtype):(zd=O.getBuffer(Wc))?Bc=zd.dtype:"constant"in Wc?(Kd=2,"number"===typeof Wc.constant?(ld=Wc.constant,ad=pd=od=0):(ld=0<Wc.constant.length?Wc.constant[0]:0,ad=1<Wc.constant.length?
Wc.constant[1]:0,pd=2<Wc.constant.length?Wc.constant[2]:0,od=3<Wc.constant.length?Wc.constant[3]:0)):(zd=ia(Wc.buffer)?O.createStream(34962,Wc.buffer):O.getBuffer(Wc.buffer),Bc="type"in Wc?Ad[Wc.type]:zd.dtype,xd=!!Wc.normalized,Md=Wc.size|0,we=Wc.offset|0,id=Wc.stride|0,Od=Wc.divisor|0);Gd=t.buffer;t.buffer=zd;Hd=t.divisor;t.divisor=Od;yd=t.normalized;t.normalized=xd;fe=t.offset;t.offset=we;ue=t.size;t.size=Md;ve=t.state;t.state=Kd;ee=t.stride;t.stride=id;de=t.type;t.type=Bc;pe=t.w;t.w=od;be=t.x;
t.x=ld;he=t.y;t.y=ad;wc=t.z;t.z=pd;Uc=na.call(this,ka,b,g);qe=!1;le=null;Ld=0;Pd=!1;Rd=Qd=0;ie=1;Ye=0;Ce=5126;Ne=Se=Re=oe=0;ia(Uc)?(qe=!0,le=O.createStream(34962,Uc),Ce=le.dtype):(le=O.getBuffer(Uc))?Ce=le.dtype:"constant"in Uc?(ie=2,"number"===typeof Uc.constant?(Re=Uc.constant,Se=Ne=oe=0):(Re=0<Uc.constant.length?Uc.constant[0]:0,Se=1<Uc.constant.length?Uc.constant[1]:0,Ne=2<Uc.constant.length?Uc.constant[2]:0,oe=3<Uc.constant.length?Uc.constant[3]:0)):(le=ia(Uc.buffer)?O.createStream(34962,Uc.buffer):
O.getBuffer(Uc.buffer),Ce="type"in Uc?Ad[Uc.type]:le.dtype,Pd=!!Uc.normalized,Rd=Uc.size|0,Qd=Uc.offset|0,Ye=Uc.stride|0,Ld=Uc.divisor|0);re=S.buffer;S.buffer=le;Fe=S.divisor;S.divisor=Ld;He=S.normalized;S.normalized=Pd;Ie=S.offset;S.offset=Qd;Je=S.size;S.size=Rd;Ge=S.state;S.state=ie;Nd=S.stride;S.stride=Ye;Ud=S.type;S.type=Ce;$d=S.w;S.w=oe;ce=S.x;S.x=Re;Ke=S.y;S.y=Se;Cd=S.z;S.z=Ne;Sd=ba.call(this,ka,b,g);De=!1;Le=null;cf=0;af=!1;Oe=Te=0;$e=1;Xe=0;Ue=5126;We=Xd=Td=Ve=0;ia(Sd)?(De=!0,Le=O.createStream(34962,
Sd),Ue=Le.dtype):(Le=O.getBuffer(Sd))?Ue=Le.dtype:"constant"in Sd?($e=2,"number"===typeof Sd.constant?(Td=Sd.constant,Xd=We=Ve=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,Xd=1<Sd.constant.length?Sd.constant[1]:0,We=2<Sd.constant.length?Sd.constant[2]:0,Ve=3<Sd.constant.length?Sd.constant[3]:0)):(Le=ia(Sd.buffer)?O.createStream(34962,Sd.buffer):O.getBuffer(Sd.buffer),Ue="type"in Sd?Ad[Sd.type]:Le.dtype,af=!!Sd.normalized,Oe=Sd.size|0,Te=Sd.offset|0,Xe=Sd.stride|0,cf=Sd.divisor|0);jf=A.buffer;A.buffer=
Le;nf=A.divisor;A.divisor=cf;ff=A.normalized;A.normalized=af;kf=A.offset;A.offset=Te;lf=A.size;A.size=Oe;mf=A.state;A.state=$e;rf=A.stride;A.stride=Xe;of=A.type;A.type=Ue;sf=A.w;A.w=Ve;Cf=A.x;A.x=Td;Df=A.y;A.y=Xd;Pe=A.z;A.z=We;Ee=Y.call(this,ka,b,g);pf=!1;qf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ia(Ee)?(pf=!0,qf=O.createStream(34962,Ee),yf=qf.dtype):(qf=O.getBuffer(Ee))?yf=qf.dtype:"constant"in Ee?(Gf=2,"number"===typeof Ee.constant?(zf=Ee.constant,Af=Jf=wf=0):(zf=0<Ee.constant.length?
Ee.constant[0]:0,Af=1<Ee.constant.length?Ee.constant[1]:0,Jf=2<Ee.constant.length?Ee.constant[2]:0,wf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=ia(Ee.buffer)?O.createStream(34962,Ee.buffer):O.getBuffer(Ee.buffer),yf="type"in Ee?Ad[Ee.type]:qf.dtype,Hf=!!Ee.normalized,Ff=Ee.size|0,Bf=Ee.offset|0,xf=Ee.stride|0,Ef=Ee.divisor|0);Kf=I.buffer;I.buffer=qf;Lf=I.divisor;I.divisor=Ef;Mf=I.normalized;I.normalized=Hf;tf=I.offset;I.offset=Bf;Rf=I.size;I.size=Ff;If=I.state;I.state=Gf;uf=I.stride;I.stride=xf;
dg=I.type;I.type=yf;Sf=I.w;I.w=wf;Tf=I.x;I.x=zf;qg=I.y;I.y=Af;gf=I.z;I.z=Jf;df=V.call(this,ka,b,g);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ia(df)?(Nf=!0,Of=O.createStream(34962,df),Uf=Of.dtype):(Of=O.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=
ia(df.buffer)?O.createStream(34962,df.buffer):O.getBuffer(df.buffer),Uf="type"in df?Ad[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=K.buffer;K.buffer=Of;sg=K.divisor;K.divisor=eg;tg=K.normalized;K.normalized=fg;ug=K.offset;K.offset=gg;vg=K.size;K.size=hg;wg=K.state;K.state=ig;xg=K.stride;K.stride=Wf;yg=K.type;K.type=Uf;zg=K.w;K.w=Xf;Ag=K.x;K.x=Yf;Bg=K.y;K.y=Zf;hf=K.z;K.z=jg;ef=ja.call(this,ka,b,g);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=
5126;pg=cg=bg=ag=0;ia(ef)?(Pf=!0,Qf=O.createStream(34962,ef),Vf=Qf.dtype):(Qf=O.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=ia(ef.buffer)?O.createStream(34962,ef.buffer):O.getBuffer(ef.buffer),Vf="type"in ef?Ad[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|
0,$f=ef.stride|0,kg=ef.divisor|0);Cg=T.buffer;T.buffer=Qf;Dg=T.divisor;T.divisor=kg;Eg=T.normalized;T.normalized=lg;Fg=T.offset;T.offset=mg;Gg=T.size;T.size=ng;Hg=T.state;T.state=og;Ig=T.stride;T.stride=$f;Jg=T.type;T.type=Vf;Kg=T.w;T.w=ag;Lg=T.x;T.x=bg;Mg=T.y;T.y=cg;Ng=T.z;T.z=pg;Og=Z.vert;Z.vert=44;Pg=Z.frag;Z.frag=43;Ga.dirty=!0;e(ka,b,g);ka.viewportWidth=l;ka.viewportHeight=m;Dd[0]=h;Dd[1]=y;Dd[2]=C;Dd[3]=D;N[0]=z;N[1]=F;N[2]=E;N[3]=H;ua.blend_enable=G;Da[0]=J;Da[1]=L;Da[2]=P;Da[3]=Q;ua.depth_enable=
aa;ge[0]=ea;ge[1]=ha;ge[2]=ga;ge[3]=ma;ua.scissor_enable=qa;ua.stencil_enable=la;oa&&(c.cpuTime+=performance.now()-ta);pa&&bd.destroyStream(Ja);Kb.elements=Aa;Kb.offset=Ka;Kb.count=Oa;Kb.primitive=xb;fa[45]=Eb;fa[48]=Qa;fa[10]=ob;fa[46]=hb;fa[47]=Ra;fa[34]=Fb;fa[6]=db;fa[7]=td;fa[8]=jb;fa[9]=va;za&&O.destroyStream(Va);u.buffer=xa;u.divisor=Pb;u.normalized=Ma;u.offset=Qb;u.size=fb;u.state=ib;u.stride=ya;u.type=ec;u.w=Fa;u.x=qb;u.y=rb;u.z=Za;Bb&&O.destroyStream(yb);w.buffer=sb;w.divisor=uc;w.normalized=
vb;w.offset=pc;w.size=sc;w.state=jc;w.stride=Kc;w.type=ed;w.w=fd;w.x=Wb;w.y=bc;w.z=Rb;Zb&&O.destroyStream(mb);x.buffer=Rc;x.divisor=Mc;x.normalized=Jb;x.offset=Db;x.size=Nc;x.state=Ec;x.stride=Sc;x.type=gc;x.w=Vc;x.x=gd;x.y=kd;x.z=md;je&&O.destroyStream(zd);t.buffer=Gd;t.divisor=Hd;t.normalized=yd;t.offset=fe;t.size=ue;t.state=ve;t.stride=ee;t.type=de;t.w=pe;t.x=be;t.y=he;t.z=wc;qe&&O.destroyStream(le);S.buffer=re;S.divisor=Fe;S.normalized=He;S.offset=Ie;S.size=Je;S.state=Ge;S.stride=Nd;S.type=Ud;
S.w=$d;S.x=ce;S.y=Ke;S.z=Cd;De&&O.destroyStream(Le);A.buffer=jf;A.divisor=nf;A.normalized=ff;A.offset=kf;A.size=lf;A.state=mf;A.stride=rf;A.type=of;A.w=sf;A.x=Cf;A.y=Df;A.z=Pe;pf&&O.destroyStream(qf);I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=tf;I.size=Rf;I.state=If;I.stride=uf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=gf;Nf&&O.destroyStream(Of);K.buffer=rg;K.divisor=sg;K.normalized=tg;K.offset=ug;K.size=vg;K.state=wg;K.stride=xg;K.type=yg;K.w=zg;K.x=Ag;K.y=Bg;K.z=hf;Pf&&O.destroyStream(Qf);T.buffer=
Cg;T.divisor=Dg;T.normalized=Eg;T.offset=Fg;T.size=Gg;T.state=Hg;T.stride=Ig;T.type=Jg;T.w=Kg;T.x=Lg;T.y=Mg;T.z=Ng;Z.vert=Og;Z.frag=Pg;Ga.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,d,h,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,t,x,B,ca,na,S,ba,A,Y,I,V,K,ja,T,ha,la,Qa,Bb,oa,Oa,W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra,cc,pc,jc,td){var zc,aa,O,ka,
Ga,Kb,bd,Oc,J,G,ia,ua,Z,fa,ta,N,H,da,Aa,Da,Ja,F,nc,Eb,qa,Fb,xb,Ye,xd,ge,je,we,ue,Od,fe,ve,yd,Dd,zd;zc=a.attributes;aa=a.buffer;O=a.context;ka=a.current;Ga=a.draw;Kb=a.elements;bd=a.extensions;Oc=a.framebuffer;J=a.gl;G=a.isBufferArgs;ia=a.next;ua=a.shader;Z=a.uniforms;fa=a.vao;ta=ia.blend_color;N=ka.blend_color;H=ia.blend_equation;da=ka.blend_equation;Aa=ia.blend_func;Da=ka.blend_func;Ja=ia.colorMask;F=ka.colorMask;nc=ia.depth_range;Eb=ka.depth_range;qa=ia.polygonOffset_offset;Fb=ka.polygonOffset_offset;
xb=ia.sample_coverage;Ye=ka.sample_coverage;xd=ia.scissor_box;ge=ka.scissor_box;je=ia.stencil_func;we=ka.stencil_func;ue=ia.stencil_opBack;Od=ka.stencil_opBack;fe=ia.stencil_opFront;ve=ka.stencil_opFront;yd=ia.viewport;Dd=ka.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,e){var g,a,f,k,n,p;g=Oc.next;g!==Oc.cur&&(g?J.bindFramebuffer(36160,g.framebuffer):J.bindFramebuffer(36160,null),Oc.cur=g);if(ka.dirty){var q,r,d,
u,l,m,h,y,C,w,M,D,x,z,t,sa,B,A,ca,I,S,na,K,T,V,ba,Z,Y,ua,ta,ja,Aa,Ua,Lb;q=ia.dither;q!==ka.dither&&(q?J.enable(3024):J.disable(3024),ka.dither=q);r=H[0];d=H[1];if(r!==da[0]||d!==da[1])J.blendEquationSeparate(r,d),da[0]=r,da[1]=d;u=ia.depth_func;u!==ka.depth_func&&(J.depthFunc(u),ka.depth_func=u);l=nc[0];m=nc[1];if(l!==Eb[0]||m!==Eb[1])J.depthRange(l,m),Eb[0]=l,Eb[1]=m;h=ia.depth_mask;h!==ka.depth_mask&&(J.depthMask(h),ka.depth_mask=h);y=Ja[0];C=Ja[1];w=Ja[2];M=Ja[3];if(y!==F[0]||C!==F[1]||w!==F[2]||
M!==F[3])J.colorMask(y,C,w,M),F[0]=y,F[1]=C,F[2]=w,F[3]=M;D=ia.cull_enable;D!==ka.cull_enable&&(D?J.enable(2884):J.disable(2884),ka.cull_enable=D);x=ia.cull_face;x!==ka.cull_face&&(J.cullFace(x),ka.cull_face=x);z=ia.frontFace;z!==ka.frontFace&&(J.frontFace(z),ka.frontFace=z);t=ia.lineWidth;t!==ka.lineWidth&&(J.lineWidth(t),ka.lineWidth=t);sa=ia.polygonOffset_enable;sa!==ka.polygonOffset_enable&&(sa?J.enable(32823):J.disable(32823),ka.polygonOffset_enable=sa);B=qa[0];A=qa[1];if(B!==Fb[0]||A!==Fb[1])J.polygonOffset(B,
A),Fb[0]=B,Fb[1]=A;ca=ia.sample_alpha;ca!==ka.sample_alpha&&(ca?J.enable(32926):J.disable(32926),ka.sample_alpha=ca);I=ia.sample_enable;I!==ka.sample_enable&&(I?J.enable(32928):J.disable(32928),ka.sample_enable=I);S=xb[0];na=xb[1];if(S!==Ye[0]||na!==Ye[1])J.sampleCoverage(S,na),Ye[0]=S,Ye[1]=na;K=ia.stencil_mask;K!==ka.stencil_mask&&(J.stencilMask(K),ka.stencil_mask=K);T=je[0];V=je[1];ba=je[2];if(T!==we[0]||V!==we[1]||ba!==we[2])J.stencilFunc(T,V,ba),we[0]=T,we[1]=V,we[2]=ba;Z=fe[0];Y=fe[1];ua=fe[2];
ta=fe[3];if(Z!==ve[0]||Y!==ve[1]||ua!==ve[2]||ta!==ve[3])J.stencilOpSeparate(Z,Y,ua,ta),ve[0]=Z,ve[1]=Y,ve[2]=ua,ve[3]=ta;ja=ue[0];Aa=ue[1];Ua=ue[2];Lb=ue[3];if(ja!==Od[0]||Aa!==Od[1]||Ua!==Od[2]||Lb!==Od[3])J.stencilOpSeparate(ja,Aa,Ua,Lb),Od[0]=ja,Od[1]=Aa,Od[2]=Ua,Od[3]=Lb}J.blendColor(0,0,0,1);N[0]=0;N[1]=0;N[2]=0;N[3]=1;J.enable(3042);ka.blend_enable=!0;J.blendFuncSeparate(770,771,773,1);Da[0]=770;Da[1]=771;Da[2]=773;Da[3]=1;J.disable(2929);ka.depth_enable=!1;J.enable(3089);ka.scissor_enable=
!0;J.disable(2960);ka.stencil_enable=!1;if(a=ka.profile)f=performance.now(),c.count+=e;J.useProgram(ha.program);k=bd.angle_instanced_arrays;var cb;fa.setVAO(null);J.uniform1i(E.location,!1);J.uniform1i(La.location,pa.bind());cb=Ga.instances;for(n=0;n<e;++n){p=b[n];var Dc,ac,xd,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,
Ob,Sb,fc,hc,yd,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf;Dc=p.viewport;ac=Dc.x|0;xd=Dc.y|0;mc="width"in Dc?Dc.width|0:O.framebufferWidth-ac;Tb="height"in Dc?Dc.height|0:O.framebufferHeight-xd;v=O.viewportWidth;
O.viewportWidth=mc;Ub=O.viewportHeight;O.viewportHeight=Tb;J.viewport(ac,xd,mc,Tb);Dd[0]=ac;Dd[1]=xd;Dd[2]=mc;Dd[3]=Tb;Pa=p.viewport;ob=Pa.x|0;tb=Pa.y|0;hb="width"in Pa?Pa.width|0:O.framebufferWidth-ob;Ra="height"in Pa?Pa.height|0:O.framebufferHeight-tb;J.scissor(ob,tb,hb,Ra);ge[0]=ob;ge[1]=tb;ge[2]=hb;ge[3]=Ra;Qc=la.call(this,O,p,n);Xb=!1;jd=null;db=0;kc=!1;ic=Yc=0;jb=1;kb=0;va=5126;bb=Va=za=pb=0;G(Qc)?(Xb=!0,jd=aa.createStream(34962,Qc),va=jd.dtype):(jd=aa.getBuffer(Qc))?va=jd.dtype:"constant"in
Qc?(jb=2,"number"===typeof Qc.constant?(za=Qc.constant,Va=bb=pb=0):(za=0<Qc.constant.length?Qc.constant[0]:0,Va=1<Qc.constant.length?Qc.constant[1]:0,bb=2<Qc.constant.length?Qc.constant[2]:0,pb=3<Qc.constant.length?Qc.constant[3]:0)):(jd=G(Qc.buffer)?aa.createStream(34962,Qc.buffer):aa.getBuffer(Qc.buffer),va="type"in Qc?zd[Qc.type]:jd.dtype,kc=!!Qc.normalized,ic=Qc.size|0,Yc=Qc.offset|0,kb=Qc.stride|0,db=Qc.divisor|0);Ba=cc.location;eb=zc[Ba];if(1===jb){eb.buffer||J.enableVertexAttribArray(Ba);Na=
ic||1;if(eb.type!==va||eb.size!==Na||eb.buffer!==jd||eb.normalized!==kc||eb.offset!==Yc||eb.stride!==kb)J.bindBuffer(34962,jd.buffer),J.vertexAttribPointer(Ba,Na,va,kc,kb,Yc),eb.type=va,eb.size=Na,eb.buffer=jd,eb.normalized=kc,eb.offset=Yc,eb.stride=kb;eb.divisor!==db&&(k.vertexAttribDivisorANGLE(Ba,db),eb.divisor=db)}else if(eb.buffer&&(J.disableVertexAttribArray(Ba),eb.buffer=null),eb.x!==za||eb.y!==Va||eb.z!==bb||eb.w!==pb)J.vertexAttrib4f(Ba,za,Va,bb,pb),eb.x=za,eb.y=Va,eb.z=bb,eb.w=pb;Ab=Qa.call(this,
O,p,n);zb=!1;Ta=null;Ic=0;Ib=!1;Vb=Mb=0;xa=1;Jd=0;Ma=5126;ya=ib=fb=Qb=0;G(Ab)?(zb=!0,Ta=aa.createStream(34962,Ab),Ma=Ta.dtype):(Ta=aa.getBuffer(Ab))?Ma=Ta.dtype:"constant"in Ab?(xa=2,"number"===typeof Ab.constant?(fb=Ab.constant,ib=ya=Qb=0):(fb=0<Ab.constant.length?Ab.constant[0]:0,ib=1<Ab.constant.length?Ab.constant[1]:0,ya=2<Ab.constant.length?Ab.constant[2]:0,Qb=3<Ab.constant.length?Ab.constant[3]:0)):(Ta=G(Ab.buffer)?aa.createStream(34962,Ab.buffer):aa.getBuffer(Ab.buffer),Ma="type"in Ab?zd[Ab.type]:
Ta.dtype,Ib=!!Ab.normalized,Vb=Ab.size|0,Mb=Ab.offset|0,Jd=Ab.stride|0,Ic=Ab.divisor|0);ec=jc.location;Fa=zc[ec];if(1===xa){Fa.buffer||J.enableVertexAttribArray(ec);qb=Vb||1;if(Fa.type!==Ma||Fa.size!==qb||Fa.buffer!==Ta||Fa.normalized!==Ib||Fa.offset!==Mb||Fa.stride!==Jd)J.bindBuffer(34962,Ta.buffer),J.vertexAttribPointer(ec,qb,Ma,Ib,Jd,Mb),Fa.type=Ma,Fa.size=qb,Fa.buffer=Ta,Fa.normalized=Ib,Fa.offset=Mb,Fa.stride=Jd;Fa.divisor!==Ic&&(k.vertexAttribDivisorANGLE(ec,Ic),Fa.divisor=Ic)}else if(Fa.buffer&&
(J.disableVertexAttribArray(ec),Fa.buffer=null),Fa.x!==fb||Fa.y!==ib||Fa.z!==ya||Fa.w!==Qb)J.vertexAttrib4f(ec,fb,ib,ya,Qb),Fa.x=fb,Fa.y=ib,Fa.z=ya,Fa.w=Qb;rb=Bb.call(this,O,p,n);Za=!1;$a=null;rc=0;cd=!1;Wa=tc=0;Nb=1;dd=0;Ha=5126;lb=Ca=Sa=vc=0;G(rb)?(Za=!0,$a=aa.createStream(34962,rb),Ha=$a.dtype):($a=aa.getBuffer(rb))?Ha=$a.dtype:"constant"in rb?(Nb=2,"number"===typeof rb.constant?(Sa=rb.constant,Ca=lb=vc=0):(Sa=0<rb.constant.length?rb.constant[0]:0,Ca=1<rb.constant.length?rb.constant[1]:0,lb=2<
rb.constant.length?rb.constant[2]:0,vc=3<rb.constant.length?rb.constant[3]:0)):($a=G(rb.buffer)?aa.createStream(34962,rb.buffer):aa.getBuffer(rb.buffer),Ha="type"in rb?zd[rb.type]:$a.dtype,cd=!!rb.normalized,Wa=rb.size|0,tc=rb.offset|0,dd=rb.stride|0,rc=rb.divisor|0);ub=pc.location;Cb=zc[ub];if(1===Nb){Cb.buffer||J.enableVertexAttribArray(ub);sb=Wa||1;if(Cb.type!==Ha||Cb.size!==sb||Cb.buffer!==$a||Cb.normalized!==cd||Cb.offset!==tc||Cb.stride!==dd)J.bindBuffer(34962,$a.buffer),J.vertexAttribPointer(ub,
sb,Ha,cd,dd,tc),Cb.type=Ha,Cb.size=sb,Cb.buffer=$a,Cb.normalized=cd,Cb.offset=tc,Cb.stride=dd;Cb.divisor!==rc&&(k.vertexAttribDivisorANGLE(ub,rc),Cb.divisor=rc)}else if(Cb.buffer&&(J.disableVertexAttribArray(ub),Cb.buffer=null),Cb.x!==Sa||Cb.y!==Ca||Cb.z!==lb||Cb.w!==vc)J.vertexAttrib4f(ub,Sa,Ca,lb,vc),Cb.x=Sa,Cb.y=Ca,Cb.z=lb,Cb.w=vc;uc=oa.call(this,O,p,n);vb=!1;wd=null;sc=0;Fd=!1;ed=Kc=0;fd=1;Wb=0;bc=5126;mb=Zb=Ia=Rb=0;G(uc)?(vb=!0,wd=aa.createStream(34962,uc),bc=wd.dtype):(wd=aa.getBuffer(uc))?
bc=wd.dtype:"constant"in uc?(fd=2,"number"===typeof uc.constant?(Ia=uc.constant,Zb=mb=Rb=0):(Ia=0<uc.constant.length?uc.constant[0]:0,Zb=1<uc.constant.length?uc.constant[1]:0,mb=2<uc.constant.length?uc.constant[2]:0,Rb=3<uc.constant.length?uc.constant[3]:0)):(wd=G(uc.buffer)?aa.createStream(34962,uc.buffer):aa.getBuffer(uc.buffer),bc="type"in uc?zd[uc.type]:wd.dtype,Fd=!!uc.normalized,ed=uc.size|0,Kc=uc.offset|0,Wb=uc.stride|0,sc=uc.divisor|0);wb=td.location;Ob=zc[wb];if(1===fd){Ob.buffer||J.enableVertexAttribArray(wb);
Sb=ed||1;if(Ob.type!==bc||Ob.size!==Sb||Ob.buffer!==wd||Ob.normalized!==Fd||Ob.offset!==Kc||Ob.stride!==Wb)J.bindBuffer(34962,wd.buffer),J.vertexAttribPointer(wb,Sb,bc,Fd,Wb,Kc),Ob.type=bc,Ob.size=Sb,Ob.buffer=wd,Ob.normalized=Fd,Ob.offset=Kc,Ob.stride=Wb;Ob.divisor!==sc&&(k.vertexAttribDivisorANGLE(wb,sc),Ob.divisor=sc)}else if(Ob.buffer&&(J.disableVertexAttribArray(wb),Ob.buffer=null),Ob.x!==Ia||Ob.y!==Zb||Ob.z!==mb||Ob.w!==Rb)J.vertexAttrib4f(wb,Ia,Zb,mb,Rb),Ob.x=Ia,Ob.y=Zb,Ob.z=mb,Ob.w=Rb;fc=
Oa.call(this,O,p,n);hc=!1;yd=null;xc=0;yc=!1;Lc=Ac=0;Zc=1;Rc=0;Mc=5126;Ec=Nc=Db=Jb=0;G(fc)?(hc=!0,yd=aa.createStream(34962,fc),Mc=yd.dtype):(yd=aa.getBuffer(fc))?Mc=yd.dtype:"constant"in fc?(Zc=2,"number"===typeof fc.constant?(Db=fc.constant,Nc=Ec=Jb=0):(Db=0<fc.constant.length?fc.constant[0]:0,Nc=1<fc.constant.length?fc.constant[1]:0,Ec=2<fc.constant.length?fc.constant[2]:0,Jb=3<fc.constant.length?fc.constant[3]:0)):(yd=G(fc.buffer)?aa.createStream(34962,fc.buffer):aa.getBuffer(fc.buffer),Mc="type"in
fc?zd[fc.type]:yd.dtype,yc=!!fc.normalized,Lc=fc.size|0,Ac=fc.offset|0,Rc=fc.stride|0,xc=fc.divisor|0);Sc=nb.location;gc=zc[Sc];if(1===Zc){gc.buffer||J.enableVertexAttribArray(Sc);Vc=Lc||1;if(gc.type!==Mc||gc.size!==Vc||gc.buffer!==yd||gc.normalized!==yc||gc.offset!==Ac||gc.stride!==Rc)J.bindBuffer(34962,yd.buffer),J.vertexAttribPointer(Sc,Vc,Mc,yc,Rc,Ac),gc.type=Mc,gc.size=Vc,gc.buffer=yd,gc.normalized=yc,gc.offset=Ac,gc.stride=Rc;gc.divisor!==xc&&(k.vertexAttribDivisorANGLE(Sc,xc),gc.divisor=xc)}else if(gc.buffer&&
(J.disableVertexAttribArray(Sc),gc.buffer=null),gc.x!==Db||gc.y!==Nc||gc.z!==Ec||gc.w!==Jb)J.vertexAttrib4f(Sc,Db,Nc,Ec,Jb),gc.x=Db,gc.y=Nc,gc.z=Ec,gc.w=Jb;gd=W.call(this,O,p,n);kd=!1;md=null;Wc=0;bf=!1;ke=Zd=0;se=1;me=0;Md=5126;od=Bc=id=Kd=0;G(gd)?(kd=!0,md=aa.createStream(34962,gd),Md=md.dtype):(md=aa.getBuffer(gd))?Md=md.dtype:"constant"in gd?(se=2,"number"===typeof gd.constant?(id=gd.constant,Bc=od=Kd=0):(id=0<gd.constant.length?gd.constant[0]:0,Bc=1<gd.constant.length?gd.constant[1]:0,od=2<gd.constant.length?
gd.constant[2]:0,Kd=3<gd.constant.length?gd.constant[3]:0)):(md=G(gd.buffer)?aa.createStream(34962,gd.buffer):aa.getBuffer(gd.buffer),Md="type"in gd?zd[gd.type]:md.dtype,bf=!!gd.normalized,ke=gd.size|0,Zd=gd.offset|0,me=gd.stride|0,Wc=gd.divisor|0);ld=ab.location;ad=zc[ld];if(1===se){ad.buffer||J.enableVertexAttribArray(ld);pd=ke||1;if(ad.type!==Md||ad.size!==pd||ad.buffer!==md||ad.normalized!==bf||ad.offset!==Zd||ad.stride!==me)J.bindBuffer(34962,md.buffer),J.vertexAttribPointer(ld,pd,Md,bf,me,Zd),
ad.type=Md,ad.size=pd,ad.buffer=md,ad.normalized=bf,ad.offset=Zd,ad.stride=me;ad.divisor!==Wc&&(k.vertexAttribDivisorANGLE(ld,Wc),ad.divisor=Wc)}else if(ad.buffer&&(J.disableVertexAttribArray(ld),ad.buffer=null),ad.x!==id||ad.y!==Bc||ad.z!==od||ad.w!==Kd)J.vertexAttrib4f(ld,id,Bc,od,Kd),ad.x=id,ad.y=Bc,ad.z=od,ad.w=Kd;Gd=P.call(this,O,p,n);Hd=!1;te=null;ze=0;Ae=!1;ee=ne=0;de=1;pe=0;be=5126;qe=Uc=wc=he=0;G(Gd)?(Hd=!0,te=aa.createStream(34962,Gd),be=te.dtype):(te=aa.getBuffer(Gd))?be=te.dtype:"constant"in
Gd?(de=2,"number"===typeof Gd.constant?(wc=Gd.constant,Uc=qe=he=0):(wc=0<Gd.constant.length?Gd.constant[0]:0,Uc=1<Gd.constant.length?Gd.constant[1]:0,qe=2<Gd.constant.length?Gd.constant[2]:0,he=3<Gd.constant.length?Gd.constant[3]:0)):(te=G(Gd.buffer)?aa.createStream(34962,Gd.buffer):aa.getBuffer(Gd.buffer),be="type"in Gd?zd[Gd.type]:te.dtype,Ae=!!Gd.normalized,ee=Gd.size|0,ne=Gd.offset|0,pe=Gd.stride|0,ze=Gd.divisor|0);le=R.location;Ld=zc[le];if(1===de){Ld.buffer||J.enableVertexAttribArray(le);Pd=
ee||4;if(Ld.type!==be||Ld.size!==Pd||Ld.buffer!==te||Ld.normalized!==Ae||Ld.offset!==ne||Ld.stride!==pe)J.bindBuffer(34962,te.buffer),J.vertexAttribPointer(le,Pd,be,Ae,pe,ne),Ld.type=be,Ld.size=Pd,Ld.buffer=te,Ld.normalized=Ae,Ld.offset=ne,Ld.stride=pe;Ld.divisor!==ze&&(k.vertexAttribDivisorANGLE(le,ze),Ld.divisor=ze)}else if(Ld.buffer&&(J.disableVertexAttribArray(le),Ld.buffer=null),Ld.x!==wc||Ld.y!==Uc||Ld.z!==qe||Ld.w!==he)J.vertexAttrib4f(le,wc,Uc,qe,he),Ld.x=wc,Ld.y=Uc,Ld.z=qe,Ld.w=he;Qd=L.call(this,
O,p,n);Rd=!1;ie=null;vf=0;Ce=!1;Re=oe=0;Se=1;Ne=0;re=5126;Je=Ie=He=Fe=0;G(Qd)?(Rd=!0,ie=aa.createStream(34962,Qd),re=ie.dtype):(ie=aa.getBuffer(Qd))?re=ie.dtype:"constant"in Qd?(Se=2,"number"===typeof Qd.constant?(He=Qd.constant,Ie=Je=Fe=0):(He=0<Qd.constant.length?Qd.constant[0]:0,Ie=1<Qd.constant.length?Qd.constant[1]:0,Je=2<Qd.constant.length?Qd.constant[2]:0,Fe=3<Qd.constant.length?Qd.constant[3]:0)):(ie=G(Qd.buffer)?aa.createStream(34962,Qd.buffer):aa.getBuffer(Qd.buffer),re="type"in Qd?zd[Qd.type]:
ie.dtype,Ce=!!Qd.normalized,Re=Qd.size|0,oe=Qd.offset|0,Ne=Qd.stride|0,vf=Qd.divisor|0);Ge=Pb.location;Nd=zc[Ge];if(1===Se){Nd.buffer||J.enableVertexAttribArray(Ge);Ud=Re||4;if(Nd.type!==re||Nd.size!==Ud||Nd.buffer!==ie||Nd.normalized!==Ce||Nd.offset!==oe||Nd.stride!==Ne)J.bindBuffer(34962,ie.buffer),J.vertexAttribPointer(Ge,Ud,re,Ce,Ne,oe),Nd.type=re,Nd.size=Ud,Nd.buffer=ie,Nd.normalized=Ce,Nd.offset=oe,Nd.stride=Ne;Nd.divisor!==vf&&(k.vertexAttribDivisorANGLE(Ge,vf),Nd.divisor=vf)}else if(Nd.buffer&&
(J.disableVertexAttribArray(Ge),Nd.buffer=null),Nd.x!==He||Nd.y!==Ie||Nd.z!==Je||Nd.w!==Fe)J.vertexAttrib4f(Ge,He,Ie,Je,Fe),Nd.x=He,Nd.y=Ie,Nd.z=Je,Nd.w=Fe;$d=U.call(this,O,p,n);ce=!1;Ke=null;Cd=0;Sd=!1;Le=De=0;cf=1;af=0;Te=5126;Ue=Xe=$e=Oe=0;G($d)?(ce=!0,Ke=aa.createStream(34962,$d),Te=Ke.dtype):(Ke=aa.getBuffer($d))?Te=Ke.dtype:"constant"in $d?(cf=2,"number"===typeof $d.constant?($e=$d.constant,Xe=Ue=Oe=0):($e=0<$d.constant.length?$d.constant[0]:0,Xe=1<$d.constant.length?$d.constant[1]:0,Ue=2<$d.constant.length?
$d.constant[2]:0,Oe=3<$d.constant.length?$d.constant[3]:0)):(Ke=G($d.buffer)?aa.createStream(34962,$d.buffer):aa.getBuffer($d.buffer),Te="type"in $d?zd[$d.type]:Ke.dtype,Sd=!!$d.normalized,Le=$d.size|0,De=$d.offset|0,af=$d.stride|0,Cd=$d.divisor|0);Ve=ma.location;Td=zc[Ve];if(1===cf){Td.buffer||J.enableVertexAttribArray(Ve);Xd=Le||1;if(Td.type!==Te||Td.size!==Xd||Td.buffer!==Ke||Td.normalized!==Sd||Td.offset!==De||Td.stride!==af)J.bindBuffer(34962,Ke.buffer),J.vertexAttribPointer(Ve,Xd,Te,Sd,af,De),
Td.type=Te,Td.size=Xd,Td.buffer=Ke,Td.normalized=Sd,Td.offset=De,Td.stride=af;Td.divisor!==Cd&&(k.vertexAttribDivisorANGLE(Ve,Cd),Td.divisor=Cd)}else if(Td.buffer&&(J.disableVertexAttribArray(Ve),Td.buffer=null),Td.x!==$e||Td.y!==Xe||Td.z!==Ue||Td.w!==Oe)J.vertexAttrib4f(Ve,$e,Xe,Ue,Oe),Td.x=$e,Td.y=Xe,Td.z=Ue,Td.w=Oe;We=O.pixelRatio;n&&jf===We||(jf=We,J.uniform1f(yb.location,We));nf=Q.call(this,O,p,n);ff=nf[0];lf=nf[1];n&&kf===ff&&mf===lf||(kf=ff,mf=lf,J.uniform2f(wa.location,ff,lf));rf=p.scale;
of=rf[0];Cf=rf[1];n&&sf===of&&Df===Cf||(sf=of,Df=Cf,J.uniform2f(Ka.location,of,Cf));Pe=p.scaleFract;Ee=Pe[0];qf=Pe[1];n&&pf===Ee&&Ef===qf||(pf=Ee,Ef=qf,J.uniform2f(X.location,Ee,qf));Hf=p.translate;Bf=Hf[0];Gf=Hf[1];n&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,J.uniform2f(ga.location,Bf,Gf));yf=p.translateFract;wf=yf[0];Af=yf[1];n&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,J.uniform2f(ra.location,wf,Af));Kf=p.opacity;n&&Lf===Kf||(Lf=Kf,J.uniform1f(ea.location,Kf));Mf=p.elements;tf=null;(tf=(Rf=G(Mf))?Kb.createStream(Mf):
Kb.getElements(Mf))&&J.bindBuffer(34963,tf.buffer.buffer);If=p.offset;if(uf=p.count)0<cb?tf?k.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),cb):k.drawArraysInstancedANGLE(0,If,uf,cb):0>cb&&(tf?J.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):J.drawArrays(0,If,uf)),O.viewportWidth=v,O.viewportHeight=Ub,Xb&&aa.destroyStream(jd),zb&&aa.destroyStream(Ta),Za&&aa.destroyStream($a),vb&&aa.destroyStream(wd),hc&&aa.destroyStream(yd),kd&&aa.destroyStream(md),Hd&&aa.destroyStream(te),Rd&&aa.destroyStream(ie),
ce&&aa.destroyStream(Ke),Rf&&Kb.destroyStream(tf)}pa.unbind();ka.dirty=!0;fa.setVAO(null);a&&(c.cpuTime+=performance.now()-f)},draw:function(a){var n,p,r,u,w,M,x,t,sa,B,A,ca,I,L,S,na,K,P,Q,T,V,U,ba,Z,Y,W,ha,ua,la,ta,oa,ja,Aa,pa,Oa,Ya,Ea,Qa,Hb,Ua,Lb,cb,Bb,ac,xd,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,yd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,
yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,ad,pd,Gd,Hd,te,ze,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,vf,Ce,oe,Re;n=Oc.next;n!==Oc.cur&&(n?J.bindFramebuffer(36160,n.framebuffer):J.bindFramebuffer(36160,null),Oc.cur=n);if(ka.dirty){var Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf;Se=ia.dither;Se!==ka.dither&&(Se?J.enable(3024):J.disable(3024),ka.dither=Se);Ne=H[0];re=H[1];if(Ne!==da[0]||re!==da[1])J.blendEquationSeparate(Ne,
re),da[0]=Ne,da[1]=re;Fe=ia.depth_func;Fe!==ka.depth_func&&(J.depthFunc(Fe),ka.depth_func=Fe);He=nc[0];Ie=nc[1];if(He!==Eb[0]||Ie!==Eb[1])J.depthRange(He,Ie),Eb[0]=He,Eb[1]=Ie;Je=ia.depth_mask;Je!==ka.depth_mask&&(J.depthMask(Je),ka.depth_mask=Je);Ge=Ja[0];Nd=Ja[1];Ud=Ja[2];$d=Ja[3];if(Ge!==F[0]||Nd!==F[1]||Ud!==F[2]||$d!==F[3])J.colorMask(Ge,Nd,Ud,$d),F[0]=Ge,F[1]=Nd,F[2]=Ud,F[3]=$d;ce=ia.cull_enable;ce!==ka.cull_enable&&(ce?J.enable(2884):J.disable(2884),ka.cull_enable=ce);Ke=ia.cull_face;Ke!==
ka.cull_face&&(J.cullFace(Ke),ka.cull_face=Ke);Cd=ia.frontFace;Cd!==ka.frontFace&&(J.frontFace(Cd),ka.frontFace=Cd);Sd=ia.lineWidth;Sd!==ka.lineWidth&&(J.lineWidth(Sd),ka.lineWidth=Sd);De=ia.polygonOffset_enable;De!==ka.polygonOffset_enable&&(De?J.enable(32823):J.disable(32823),ka.polygonOffset_enable=De);Le=qa[0];cf=qa[1];if(Le!==Fb[0]||cf!==Fb[1])J.polygonOffset(Le,cf),Fb[0]=Le,Fb[1]=cf;af=ia.sample_alpha;af!==ka.sample_alpha&&(af?J.enable(32926):J.disable(32926),ka.sample_alpha=af);Te=ia.sample_enable;
Te!==ka.sample_enable&&(Te?J.enable(32928):J.disable(32928),ka.sample_enable=Te);Oe=xb[0];$e=xb[1];if(Oe!==Ye[0]||$e!==Ye[1])J.sampleCoverage(Oe,$e),Ye[0]=Oe,Ye[1]=$e;Xe=ia.stencil_mask;Xe!==ka.stencil_mask&&(J.stencilMask(Xe),ka.stencil_mask=Xe);Ue=je[0];Ve=je[1];Td=je[2];if(Ue!==we[0]||Ve!==we[1]||Td!==we[2])J.stencilFunc(Ue,Ve,Td),we[0]=Ue,we[1]=Ve,we[2]=Td;Xd=fe[0];We=fe[1];jf=fe[2];nf=fe[3];if(Xd!==ve[0]||We!==ve[1]||jf!==ve[2]||nf!==ve[3])J.stencilOpSeparate(Xd,We,jf,nf),ve[0]=Xd,ve[1]=We,ve[2]=
jf,ve[3]=nf;ff=ue[0];kf=ue[1];lf=ue[2];mf=ue[3];if(ff!==Od[0]||kf!==Od[1]||lf!==Od[2]||mf!==Od[3])J.stencilOpSeparate(ff,kf,lf,mf),Od[0]=ff,Od[1]=kf,Od[2]=lf,Od[3]=mf}p=a.viewport;r=p.x|0;u=p.y|0;w="width"in p?p.width|0:O.framebufferWidth-r;M="height"in p?p.height|0:O.framebufferHeight-u;x=O.viewportWidth;O.viewportWidth=w;t=O.viewportHeight;O.viewportHeight=M;J.viewport(r,u,w,M);Dd[0]=r;Dd[1]=u;Dd[2]=w;Dd[3]=M;J.blendColor(0,0,0,1);N[0]=0;N[1]=0;N[2]=0;N[3]=1;J.enable(3042);ka.blend_enable=!0;J.blendFuncSeparate(770,
771,773,1);Da[0]=770;Da[1]=771;Da[2]=773;Da[3]=1;J.disable(2929);ka.depth_enable=!1;sa=a.viewport;B=sa.x|0;A=sa.y|0;ca="width"in sa?sa.width|0:O.framebufferWidth-B;I="height"in sa?sa.height|0:O.framebufferHeight-A;J.scissor(B,A,ca,I);ge[0]=B;ge[1]=A;ge[2]=ca;ge[3]=I;J.enable(3089);ka.scissor_enable=!0;J.disable(2960);ka.stencil_enable=!1;if(L=ka.profile)S=performance.now(),c.count++;J.useProgram(d.program);na=bd.angle_instanced_arrays;fa.setVAO(null);K=h.call(this,O,a,0);P=!1;Q=null;T=0;V=!1;ba=U=
0;Z=1;Y=0;W=5126;ta=la=ua=ha=0;G(K)?(P=!0,Q=aa.createStream(34962,K),W=Q.dtype):(Q=aa.getBuffer(K))?W=Q.dtype:"constant"in K?(Z=2,"number"===typeof K.constant?(ua=K.constant,la=ta=ha=0):(ua=0<K.constant.length?K.constant[0]:0,la=1<K.constant.length?K.constant[1]:0,ta=2<K.constant.length?K.constant[2]:0,ha=3<K.constant.length?K.constant[3]:0)):(Q=G(K.buffer)?aa.createStream(34962,K.buffer):aa.getBuffer(K.buffer),W="type"in K?zd[K.type]:Q.dtype,V=!!K.normalized,ba=K.size|0,U=K.offset|0,Y=K.stride|0,
T=K.divisor|0);oa=cc.location;ja=zc[oa];if(1===Z){ja.buffer||J.enableVertexAttribArray(oa);Aa=ba||1;if(ja.type!==W||ja.size!==Aa||ja.buffer!==Q||ja.normalized!==V||ja.offset!==U||ja.stride!==Y)J.bindBuffer(34962,Q.buffer),J.vertexAttribPointer(oa,Aa,W,V,Y,U),ja.type=W,ja.size=Aa,ja.buffer=Q,ja.normalized=V,ja.offset=U,ja.stride=Y;ja.divisor!==T&&(na.vertexAttribDivisorANGLE(oa,T),ja.divisor=T)}else if(ja.buffer&&(J.disableVertexAttribArray(oa),ja.buffer=null),ja.x!==ua||ja.y!==la||ja.z!==ta||ja.w!==
ha)J.vertexAttrib4f(oa,ua,la,ta,ha),ja.x=ua,ja.y=la,ja.z=ta,ja.w=ha;pa=m.call(this,O,a,0);Oa=!1;Ya=null;Ea=0;Qa=!1;Ua=Hb=0;Lb=1;cb=0;Bb=5126;Tb=mc=xd=ac=0;G(pa)?(Oa=!0,Ya=aa.createStream(34962,pa),Bb=Ya.dtype):(Ya=aa.getBuffer(pa))?Bb=Ya.dtype:"constant"in pa?(Lb=2,"number"===typeof pa.constant?(xd=pa.constant,mc=Tb=ac=0):(xd=0<pa.constant.length?pa.constant[0]:0,mc=1<pa.constant.length?pa.constant[1]:0,Tb=2<pa.constant.length?pa.constant[2]:0,ac=3<pa.constant.length?pa.constant[3]:0)):(Ya=G(pa.buffer)?
aa.createStream(34962,pa.buffer):aa.getBuffer(pa.buffer),Bb="type"in pa?zd[pa.type]:Ya.dtype,Qa=!!pa.normalized,Ua=pa.size|0,Hb=pa.offset|0,cb=pa.stride|0,Ea=pa.divisor|0);v=jc.location;Ub=zc[v];if(1===Lb){Ub.buffer||J.enableVertexAttribArray(v);Pa=Ua||1;if(Ub.type!==Bb||Ub.size!==Pa||Ub.buffer!==Ya||Ub.normalized!==Qa||Ub.offset!==Hb||Ub.stride!==cb)J.bindBuffer(34962,Ya.buffer),J.vertexAttribPointer(v,Pa,Bb,Qa,cb,Hb),Ub.type=Bb,Ub.size=Pa,Ub.buffer=Ya,Ub.normalized=Qa,Ub.offset=Hb,Ub.stride=cb;
Ub.divisor!==Ea&&(na.vertexAttribDivisorANGLE(v,Ea),Ub.divisor=Ea)}else if(Ub.buffer&&(J.disableVertexAttribArray(v),Ub.buffer=null),Ub.x!==xd||Ub.y!==mc||Ub.z!==Tb||Ub.w!==ac)J.vertexAttrib4f(v,xd,mc,Tb,ac),Ub.x=xd,Ub.y=mc,Ub.z=Tb,Ub.w=ac;ob=l.call(this,O,a,0);tb=!1;hb=null;Ra=0;Qc=!1;jd=Xb=0;db=1;kc=0;Yc=5126;va=kb=jb=ic=0;G(ob)?(tb=!0,hb=aa.createStream(34962,ob),Yc=hb.dtype):(hb=aa.getBuffer(ob))?Yc=hb.dtype:"constant"in ob?(db=2,"number"===typeof ob.constant?(jb=ob.constant,kb=va=ic=0):(jb=0<
ob.constant.length?ob.constant[0]:0,kb=1<ob.constant.length?ob.constant[1]:0,va=2<ob.constant.length?ob.constant[2]:0,ic=3<ob.constant.length?ob.constant[3]:0)):(hb=G(ob.buffer)?aa.createStream(34962,ob.buffer):aa.getBuffer(ob.buffer),Yc="type"in ob?zd[ob.type]:hb.dtype,Qc=!!ob.normalized,jd=ob.size|0,Xb=ob.offset|0,kc=ob.stride|0,Ra=ob.divisor|0);pb=pc.location;za=zc[pb];if(1===db){za.buffer||J.enableVertexAttribArray(pb);Va=jd||1;if(za.type!==Yc||za.size!==Va||za.buffer!==hb||za.normalized!==Qc||
za.offset!==Xb||za.stride!==kc)J.bindBuffer(34962,hb.buffer),J.vertexAttribPointer(pb,Va,Yc,Qc,kc,Xb),za.type=Yc,za.size=Va,za.buffer=hb,za.normalized=Qc,za.offset=Xb,za.stride=kc;za.divisor!==Ra&&(na.vertexAttribDivisorANGLE(pb,Ra),za.divisor=Ra)}else if(za.buffer&&(J.disableVertexAttribArray(pb),za.buffer=null),za.x!==jb||za.y!==kb||za.z!==va||za.w!==ic)J.vertexAttrib4f(pb,jb,kb,va,ic),za.x=jb,za.y=kb,za.z=va,za.w=ic;bb=f.call(this,O,a,0);Ba=!1;eb=null;Na=0;Ab=!1;Ta=zb=0;Ic=1;Ib=0;Mb=5126;Ma=yd=
xa=Vb=0;G(bb)?(Ba=!0,eb=aa.createStream(34962,bb),Mb=eb.dtype):(eb=aa.getBuffer(bb))?Mb=eb.dtype:"constant"in bb?(Ic=2,"number"===typeof bb.constant?(xa=bb.constant,yd=Ma=Vb=0):(xa=0<bb.constant.length?bb.constant[0]:0,yd=1<bb.constant.length?bb.constant[1]:0,Ma=2<bb.constant.length?bb.constant[2]:0,Vb=3<bb.constant.length?bb.constant[3]:0)):(eb=G(bb.buffer)?aa.createStream(34962,bb.buffer):aa.getBuffer(bb.buffer),Mb="type"in bb?zd[bb.type]:eb.dtype,Ab=!!bb.normalized,Ta=bb.size|0,zb=bb.offset|0,
Ib=bb.stride|0,Na=bb.divisor|0);Qb=td.location;fb=zc[Qb];if(1===Ic){fb.buffer||J.enableVertexAttribArray(Qb);ib=Ta||1;if(fb.type!==Mb||fb.size!==ib||fb.buffer!==eb||fb.normalized!==Ab||fb.offset!==zb||fb.stride!==Ib)J.bindBuffer(34962,eb.buffer),J.vertexAttribPointer(Qb,ib,Mb,Ab,Ib,zb),fb.type=Mb,fb.size=ib,fb.buffer=eb,fb.normalized=Ab,fb.offset=zb,fb.stride=Ib;fb.divisor!==Na&&(na.vertexAttribDivisorANGLE(Qb,Na),fb.divisor=Na)}else if(fb.buffer&&(J.disableVertexAttribArray(Qb),fb.buffer=null),fb.x!==
xa||fb.y!==yd||fb.z!==Ma||fb.w!==Vb)J.vertexAttrib4f(Qb,xa,yd,Ma,Vb),fb.x=xa,fb.y=yd,fb.z=Ma,fb.w=Vb;ya=k.call(this,O,a,0);ec=!1;Fa=null;qb=0;rb=!1;$a=Za=0;rc=1;cd=0;tc=5126;Ha=dd=Nb=Wa=0;G(ya)?(ec=!0,Fa=aa.createStream(34962,ya),tc=Fa.dtype):(Fa=aa.getBuffer(ya))?tc=Fa.dtype:"constant"in ya?(rc=2,"number"===typeof ya.constant?(Nb=ya.constant,dd=Ha=Wa=0):(Nb=0<ya.constant.length?ya.constant[0]:0,dd=1<ya.constant.length?ya.constant[1]:0,Ha=2<ya.constant.length?ya.constant[2]:0,Wa=3<ya.constant.length?
ya.constant[3]:0)):(Fa=G(ya.buffer)?aa.createStream(34962,ya.buffer):aa.getBuffer(ya.buffer),tc="type"in ya?zd[ya.type]:Fa.dtype,rb=!!ya.normalized,$a=ya.size|0,Za=ya.offset|0,cd=ya.stride|0,qb=ya.divisor|0);vc=nb.location;Sa=zc[vc];if(1===rc){Sa.buffer||J.enableVertexAttribArray(vc);Ca=$a||1;if(Sa.type!==tc||Sa.size!==Ca||Sa.buffer!==Fa||Sa.normalized!==rb||Sa.offset!==Za||Sa.stride!==cd)J.bindBuffer(34962,Fa.buffer),J.vertexAttribPointer(vc,Ca,tc,rb,cd,Za),Sa.type=tc,Sa.size=Ca,Sa.buffer=Fa,Sa.normalized=
rb,Sa.offset=Za,Sa.stride=cd;Sa.divisor!==qb&&(na.vertexAttribDivisorANGLE(vc,qb),Sa.divisor=qb)}else if(Sa.buffer&&(J.disableVertexAttribArray(vc),Sa.buffer=null),Sa.x!==Nb||Sa.y!==dd||Sa.z!==Ha||Sa.w!==Wa)J.vertexAttrib4f(vc,Nb,dd,Ha,Wa),Sa.x=Nb,Sa.y=dd,Sa.z=Ha,Sa.w=Wa;lb=b.call(this,O,a,0);ub=!1;Cb=null;sb=0;uc=!1;wd=vb=0;sc=1;Fd=0;Kc=5126;bc=Wb=fd=ed=0;G(lb)?(ub=!0,Cb=aa.createStream(34962,lb),Kc=Cb.dtype):(Cb=aa.getBuffer(lb))?Kc=Cb.dtype:"constant"in lb?(sc=2,"number"===typeof lb.constant?(fd=
lb.constant,Wb=bc=ed=0):(fd=0<lb.constant.length?lb.constant[0]:0,Wb=1<lb.constant.length?lb.constant[1]:0,bc=2<lb.constant.length?lb.constant[2]:0,ed=3<lb.constant.length?lb.constant[3]:0)):(Cb=G(lb.buffer)?aa.createStream(34962,lb.buffer):aa.getBuffer(lb.buffer),Kc="type"in lb?zd[lb.type]:Cb.dtype,uc=!!lb.normalized,wd=lb.size|0,vb=lb.offset|0,Fd=lb.stride|0,sb=lb.divisor|0);Rb=ab.location;Ia=zc[Rb];if(1===sc){Ia.buffer||J.enableVertexAttribArray(Rb);Zb=wd||1;if(Ia.type!==Kc||Ia.size!==Zb||Ia.buffer!==
Cb||Ia.normalized!==uc||Ia.offset!==vb||Ia.stride!==Fd)J.bindBuffer(34962,Cb.buffer),J.vertexAttribPointer(Rb,Zb,Kc,uc,Fd,vb),Ia.type=Kc,Ia.size=Zb,Ia.buffer=Cb,Ia.normalized=uc,Ia.offset=vb,Ia.stride=Fd;Ia.divisor!==sb&&(na.vertexAttribDivisorANGLE(Rb,sb),Ia.divisor=sb)}else if(Ia.buffer&&(J.disableVertexAttribArray(Rb),Ia.buffer=null),Ia.x!==fd||Ia.y!==Wb||Ia.z!==bc||Ia.w!==ed)J.vertexAttrib4f(Rb,fd,Wb,bc,ed),Ia.x=fd,Ia.y=Wb,Ia.z=bc,Ia.w=ed;mb=q.call(this,O,a,0);wb=!1;Ob=null;Sb=0;fc=!1;Ze=hc=0;
xc=1;yc=0;Ac=5126;Mc=Rc=Zc=Lc=0;G(mb)?(wb=!0,Ob=aa.createStream(34962,mb),Ac=Ob.dtype):(Ob=aa.getBuffer(mb))?Ac=Ob.dtype:"constant"in mb?(xc=2,"number"===typeof mb.constant?(Zc=mb.constant,Rc=Mc=Lc=0):(Zc=0<mb.constant.length?mb.constant[0]:0,Rc=1<mb.constant.length?mb.constant[1]:0,Mc=2<mb.constant.length?mb.constant[2]:0,Lc=3<mb.constant.length?mb.constant[3]:0)):(Ob=G(mb.buffer)?aa.createStream(34962,mb.buffer):aa.getBuffer(mb.buffer),Ac="type"in mb?zd[mb.type]:Ob.dtype,fc=!!mb.normalized,Ze=mb.size|
0,hc=mb.offset|0,yc=mb.stride|0,Sb=mb.divisor|0);Jb=R.location;Db=zc[Jb];if(1===xc){Db.buffer||J.enableVertexAttribArray(Jb);Nc=Ze||4;if(Db.type!==Ac||Db.size!==Nc||Db.buffer!==Ob||Db.normalized!==fc||Db.offset!==hc||Db.stride!==yc)J.bindBuffer(34962,Ob.buffer),J.vertexAttribPointer(Jb,Nc,Ac,fc,yc,hc),Db.type=Ac,Db.size=Nc,Db.buffer=Ob,Db.normalized=fc,Db.offset=hc,Db.stride=yc;Db.divisor!==Sb&&(na.vertexAttribDivisorANGLE(Jb,Sb),Db.divisor=Sb)}else if(Db.buffer&&(J.disableVertexAttribArray(Jb),Db.buffer=
null),Db.x!==Zc||Db.y!==Rc||Db.z!==Mc||Db.w!==Lc)J.vertexAttrib4f(Jb,Zc,Rc,Mc,Lc),Db.x=Zc,Db.y=Rc,Db.z=Mc,Db.w=Lc;Ec=C.call(this,O,a,0);Sc=!1;gc=null;Vc=0;gd=!1;md=kd=0;Wc=1;bf=0;Zd=5126;Md=me=se=ke=0;G(Ec)?(Sc=!0,gc=aa.createStream(34962,Ec),Zd=gc.dtype):(gc=aa.getBuffer(Ec))?Zd=gc.dtype:"constant"in Ec?(Wc=2,"number"===typeof Ec.constant?(se=Ec.constant,me=Md=ke=0):(se=0<Ec.constant.length?Ec.constant[0]:0,me=1<Ec.constant.length?Ec.constant[1]:0,Md=2<Ec.constant.length?Ec.constant[2]:0,ke=3<Ec.constant.length?
Ec.constant[3]:0)):(gc=G(Ec.buffer)?aa.createStream(34962,Ec.buffer):aa.getBuffer(Ec.buffer),Zd="type"in Ec?zd[Ec.type]:gc.dtype,gd=!!Ec.normalized,md=Ec.size|0,kd=Ec.offset|0,bf=Ec.stride|0,Vc=Ec.divisor|0);Kd=Pb.location;id=zc[Kd];if(1===Wc){id.buffer||J.enableVertexAttribArray(Kd);Bc=md||4;if(id.type!==Zd||id.size!==Bc||id.buffer!==gc||id.normalized!==gd||id.offset!==kd||id.stride!==bf)J.bindBuffer(34962,gc.buffer),J.vertexAttribPointer(Kd,Bc,Zd,gd,bf,kd),id.type=Zd,id.size=Bc,id.buffer=gc,id.normalized=
gd,id.offset=kd,id.stride=bf;id.divisor!==Vc&&(na.vertexAttribDivisorANGLE(Kd,Vc),id.divisor=Vc)}else if(id.buffer&&(J.disableVertexAttribArray(Kd),id.buffer=null),id.x!==se||id.y!==me||id.z!==Md||id.w!==ke)J.vertexAttrib4f(Kd,se,me,Md,ke),id.x=se,id.y=me,id.z=Md,id.w=ke;od=y.call(this,O,a,0);ld=!1;ad=null;pd=0;Gd=!1;te=Hd=0;ze=1;Ae=0;ne=5126;be=pe=de=ee=0;G(od)?(ld=!0,ad=aa.createStream(34962,od),ne=ad.dtype):(ad=aa.getBuffer(od))?ne=ad.dtype:"constant"in od?(ze=2,"number"===typeof od.constant?(de=
od.constant,pe=be=ee=0):(de=0<od.constant.length?od.constant[0]:0,pe=1<od.constant.length?od.constant[1]:0,be=2<od.constant.length?od.constant[2]:0,ee=3<od.constant.length?od.constant[3]:0)):(ad=G(od.buffer)?aa.createStream(34962,od.buffer):aa.getBuffer(od.buffer),ne="type"in od?zd[od.type]:ad.dtype,Gd=!!od.normalized,te=od.size|0,Hd=od.offset|0,Ae=od.stride|0,pd=od.divisor|0);he=ma.location;wc=zc[he];if(1===ze){wc.buffer||J.enableVertexAttribArray(he);Uc=te||1;if(wc.type!==ne||wc.size!==Uc||wc.buffer!==
ad||wc.normalized!==Gd||wc.offset!==Hd||wc.stride!==Ae)J.bindBuffer(34962,ad.buffer),J.vertexAttribPointer(he,Uc,ne,Gd,Ae,Hd),wc.type=ne,wc.size=Uc,wc.buffer=ad,wc.normalized=Gd,wc.offset=Hd,wc.stride=Ae;wc.divisor!==pd&&(na.vertexAttribDivisorANGLE(he,pd),wc.divisor=pd)}else if(wc.buffer&&(J.disableVertexAttribArray(he),wc.buffer=null),wc.x!==de||wc.y!==pe||wc.z!==be||wc.w!==ee)J.vertexAttrib4f(he,de,pe,be,ee),wc.x=de,wc.y=pe,wc.z=be,wc.w=ee;J.uniform1i(E.location,!1);J.uniform1f(yb.location,O.pixelRatio);
qe=e.call(this,O,a,0);J.uniform2f(wa.location,qe[0],qe[1]);le=a.scale;J.uniform2f(Ka.location,le[0],le[1]);Ld=a.scaleFract;J.uniform2f(X.location,Ld[0],Ld[1]);Pd=a.translate;J.uniform2f(ga.location,Pd[0],Pd[1]);Qd=a.translateFract;J.uniform2f(ra.location,Qd[0],Qd[1]);J.uniform1f(ea.location,a.opacity);J.uniform1i(La.location,g.bind());Rd=a.elements;ie=null;(ie=(vf=G(Rd))?Kb.createStream(Rd):Kb.getElements(Rd))&&J.bindBuffer(34963,ie.buffer.buffer);Ce=a.offset;if(oe=a.count)Re=Ga.instances,0<Re?ie?
na.drawElementsInstancedANGLE(0,oe,ie.type,Ce<<(ie.type-5121>>1),Re):na.drawArraysInstancedANGLE(0,Ce,oe,Re):0>Re&&(ie?J.drawElements(0,oe,ie.type,Ce<<(ie.type-5121>>1)):J.drawArrays(0,Ce,oe)),ka.dirty=!0,fa.setVAO(null),O.viewportWidth=x,O.viewportHeight=t,L&&(c.cpuTime+=performance.now()-S),P&&aa.destroyStream(Q),Oa&&aa.destroyStream(Ya),tb&&aa.destroyStream(hb),Ba&&aa.destroyStream(eb),ec&&aa.destroyStream(Fa),ub&&aa.destroyStream(Cb),wb&&aa.destroyStream(Ob),Sc&&aa.destroyStream(gc),ld&&aa.destroyStream(ad),
g.unbind(),vf&&Kb.destroyStream(ie)},scope:function(b,e,a){var g,f,k,q,d,l,m,h,y,C,D,z,F,E,H,N,J,L,P,Q,R,U,da,W,X,fa,ea,ha,ga,ma,qa,la,pa,oa,Da,ra,Ja,wa,Ka,La,Oa,Qa,xb,Eb,ab,v,Fb,Pa,ob,tb,hb,Ra,zc,nb,Bb,db,td,nc,yb,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Pb,Ib,Mb,Vb,xa,cc,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,pc,tc,Wa,Nb,jc,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,Oc,sc,bd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,je,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd,kd,md,Wc,Dd,Od,we,ge,fe,Md,Kd,id,Bc,od,ld,ad,pd,Gd,
Hd,ue,ve,Ae,ne,ee,de,pe,be,he,wc,Uc,qe,le,Ld,Pd,Qd,Rd,ie,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Cd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;g=b.viewport;f=g.x|0;k=g.y|0;q="width"in g?g.width|0:O.framebufferWidth-f;d=
"height"in g?g.height|0:O.framebufferHeight-k;l=O.viewportWidth;O.viewportWidth=q;m=O.viewportHeight;O.viewportHeight=d;h=yd[0];yd[0]=f;y=yd[1];yd[1]=k;C=yd[2];yd[2]=q;D=yd[3];yd[3]=d;z=ta[0];ta[0]=0;F=ta[1];ta[1]=0;E=ta[2];ta[2]=0;H=ta[3];ta[3]=1;N=ia.blend_enable;ia.blend_enable=!0;J=Aa[0];Aa[0]=770;L=Aa[1];Aa[1]=771;P=Aa[2];Aa[2]=773;Q=Aa[3];Aa[3]=1;R=ia.depth_enable;ia.depth_enable=!1;U=b.viewport;da=U.x|0;W=U.y|0;X="width"in U?U.width|0:O.framebufferWidth-da;fa="height"in U?U.height|0:O.framebufferHeight-
W;ea=xd[0];xd[0]=da;ha=xd[1];xd[1]=W;ga=xd[2];xd[2]=X;ma=xd[3];xd[3]=fa;qa=ia.scissor_enable;ia.scissor_enable=!0;la=ia.stencil_enable;ia.stencil_enable=!1;if(pa=ka.profile)oa=performance.now(),c.count++;Da=b.elements;ra=null;ra=(Ja=G(Da))?Kb.createStream(Da):Kb.getElements(Da);wa=Ga.elements;Ga.elements=ra;Ka=b.offset;La=Ga.offset;Ga.offset=Ka;Oa=b.count;Qa=Ga.count;Ga.count=Oa;xb=Ga.primitive;Ga.primitive=0;Eb=Z[45];Z[45]=!1;ab=b.markerTexture;v=Z[48];Z[48]=ab;Fb=b.opacity;Pa=Z[10];Z[10]=Fb;ob=
p.call(this,O,b,a);tb=Z[46];Z[46]=ob;hb=Z[47];Z[47]=n;Ra=O.pixelRatio;zc=Z[34];Z[34]=Ra;nb=b.scale;Bb=Z[6];Z[6]=nb;db=b.scaleFract;td=Z[7];Z[7]=db;nc=b.translate;yb=Z[8];Z[8]=nc;jb=b.translateFract;kb=Z[9];Z[9]=jb;va=r.call(this,O,b,a);pb=!1;za=null;Va=0;bb=!1;eb=Ba=0;Na=1;Ab=0;zb=5126;Mb=Ib=Pb=Ta=0;G(va)?(pb=!0,za=aa.createStream(34962,va),zb=za.dtype):(za=aa.getBuffer(va))?zb=za.dtype:"constant"in va?(Na=2,"number"===typeof va.constant?(Pb=va.constant,Ib=Mb=Ta=0):(Pb=0<va.constant.length?va.constant[0]:
0,Ib=1<va.constant.length?va.constant[1]:0,Mb=2<va.constant.length?va.constant[2]:0,Ta=3<va.constant.length?va.constant[3]:0)):(za=G(va.buffer)?aa.createStream(34962,va.buffer):aa.getBuffer(va.buffer),zb="type"in va?zd[va.type]:za.dtype,bb=!!va.normalized,eb=va.size|0,Ba=va.offset|0,Ab=va.stride|0,Va=va.divisor|0);Vb=u.buffer;u.buffer=za;xa=u.divisor;u.divisor=Va;cc=u.normalized;u.normalized=bb;Ma=u.offset;u.offset=Ba;Qb=u.size;u.size=eb;fb=u.state;u.state=Na;ib=u.stride;u.stride=Ab;ya=u.type;u.type=
zb;ec=u.w;u.w=Ta;Fa=u.x;u.x=Pb;qb=u.y;u.y=Ib;rb=u.z;u.z=Mb;Za=M.call(this,O,b,a);$a=!1;rc=null;pc=0;tc=!1;Nb=Wa=0;jc=1;Ha=0;vc=5126;ub=lb=Ca=Sa=0;G(Za)?($a=!0,rc=aa.createStream(34962,Za),vc=rc.dtype):(rc=aa.getBuffer(Za))?vc=rc.dtype:"constant"in Za?(jc=2,"number"===typeof Za.constant?(Ca=Za.constant,lb=ub=Sa=0):(Ca=0<Za.constant.length?Za.constant[0]:0,lb=1<Za.constant.length?Za.constant[1]:0,ub=2<Za.constant.length?Za.constant[2]:0,Sa=3<Za.constant.length?Za.constant[3]:0)):(rc=G(Za.buffer)?aa.createStream(34962,
Za.buffer):aa.getBuffer(Za.buffer),vc="type"in Za?zd[Za.type]:rc.dtype,tc=!!Za.normalized,Nb=Za.size|0,Wa=Za.offset|0,Ha=Za.stride|0,pc=Za.divisor|0);Cb=w.buffer;w.buffer=rc;sb=w.divisor;w.divisor=pc;uc=w.normalized;w.normalized=tc;vb=w.offset;w.offset=Wa;Oc=w.size;w.size=Nb;sc=w.state;w.state=jc;bd=w.stride;w.stride=Ha;Kc=w.type;w.type=vc;ed=w.w;w.w=Sa;fd=w.x;w.x=Ca;Wb=w.y;w.y=lb;bc=w.z;w.z=ub;Rb=t.call(this,O,b,a);Ia=!1;Zb=null;mb=0;wb=!1;Sb=Ob=0;fc=1;hc=0;je=5126;Lc=Ac=yc=xc=0;G(Rb)?(Ia=!0,Zb=
aa.createStream(34962,Rb),je=Zb.dtype):(Zb=aa.getBuffer(Rb))?je=Zb.dtype:"constant"in Rb?(fc=2,"number"===typeof Rb.constant?(yc=Rb.constant,Ac=Lc=xc=0):(yc=0<Rb.constant.length?Rb.constant[0]:0,Ac=1<Rb.constant.length?Rb.constant[1]:0,Lc=2<Rb.constant.length?Rb.constant[2]:0,xc=3<Rb.constant.length?Rb.constant[3]:0)):(Zb=G(Rb.buffer)?aa.createStream(34962,Rb.buffer):aa.getBuffer(Rb.buffer),je="type"in Rb?zd[Rb.type]:Zb.dtype,wb=!!Rb.normalized,Sb=Rb.size|0,Ob=Rb.offset|0,hc=Rb.stride|0,mb=Rb.divisor|
0);Zc=x.buffer;x.buffer=Zb;Rc=x.divisor;x.divisor=mb;Mc=x.normalized;x.normalized=wb;Jb=x.offset;x.offset=Ob;Db=x.size;x.size=Sb;Nc=x.state;x.state=fc;Ec=x.stride;x.stride=hc;Sc=x.type;x.type=je;gc=x.w;x.w=xc;Vc=x.x;x.x=yc;gd=x.y;x.y=Ac;kd=x.z;x.z=Lc;md=B.call(this,O,b,a);Wc=!1;Dd=null;Od=0;we=!1;fe=ge=0;Md=1;Kd=0;id=5126;ad=ld=od=Bc=0;G(md)?(Wc=!0,Dd=aa.createStream(34962,md),id=Dd.dtype):(Dd=aa.getBuffer(md))?id=Dd.dtype:"constant"in md?(Md=2,"number"===typeof md.constant?(od=md.constant,ld=ad=
Bc=0):(od=0<md.constant.length?md.constant[0]:0,ld=1<md.constant.length?md.constant[1]:0,ad=2<md.constant.length?md.constant[2]:0,Bc=3<md.constant.length?md.constant[3]:0)):(Dd=G(md.buffer)?aa.createStream(34962,md.buffer):aa.getBuffer(md.buffer),id="type"in md?zd[md.type]:Dd.dtype,we=!!md.normalized,fe=md.size|0,ge=md.offset|0,Kd=md.stride|0,Od=md.divisor|0);pd=ca.buffer;ca.buffer=Dd;Gd=ca.divisor;ca.divisor=Od;Hd=ca.normalized;ca.normalized=we;ue=ca.offset;ca.offset=ge;ve=ca.size;ca.size=fe;Ae=
ca.state;ca.state=Md;ne=ca.stride;ca.stride=Kd;ee=ca.type;ca.type=id;de=ca.w;ca.w=Bc;pe=ca.x;ca.x=od;be=ca.y;ca.y=ld;he=ca.z;ca.z=ad;wc=na.call(this,O,b,a);Uc=!1;qe=null;le=0;Ld=!1;Qd=Pd=0;Rd=1;ie=0;Ye=5126;Se=Re=oe=Ce=0;G(wc)?(Uc=!0,qe=aa.createStream(34962,wc),Ye=qe.dtype):(qe=aa.getBuffer(wc))?Ye=qe.dtype:"constant"in wc?(Rd=2,"number"===typeof wc.constant?(oe=wc.constant,Re=Se=Ce=0):(oe=0<wc.constant.length?wc.constant[0]:0,Re=1<wc.constant.length?wc.constant[1]:0,Se=2<wc.constant.length?wc.constant[2]:
0,Ce=3<wc.constant.length?wc.constant[3]:0)):(qe=G(wc.buffer)?aa.createStream(34962,wc.buffer):aa.getBuffer(wc.buffer),Ye="type"in wc?zd[wc.type]:qe.dtype,Ld=!!wc.normalized,Qd=wc.size|0,Pd=wc.offset|0,ie=wc.stride|0,le=wc.divisor|0);Ne=S.buffer;S.buffer=qe;re=S.divisor;S.divisor=le;Fe=S.normalized;S.normalized=Ld;He=S.offset;S.offset=Pd;Ie=S.size;S.size=Qd;Je=S.state;S.state=Rd;Ge=S.stride;S.stride=ie;Nd=S.type;S.type=Ye;Ud=S.w;S.w=Ce;$d=S.x;S.x=oe;ce=S.y;S.y=Re;Ke=S.z;S.z=Se;Cd=ba.call(this,O,b,
a);Sd=!1;De=null;Le=0;cf=!1;Te=af=0;Oe=1;$e=0;Xe=5126;Xd=Td=Ve=Ue=0;G(Cd)?(Sd=!0,De=aa.createStream(34962,Cd),Xe=De.dtype):(De=aa.getBuffer(Cd))?Xe=De.dtype:"constant"in Cd?(Oe=2,"number"===typeof Cd.constant?(Ve=Cd.constant,Td=Xd=Ue=0):(Ve=0<Cd.constant.length?Cd.constant[0]:0,Td=1<Cd.constant.length?Cd.constant[1]:0,Xd=2<Cd.constant.length?Cd.constant[2]:0,Ue=3<Cd.constant.length?Cd.constant[3]:0)):(De=G(Cd.buffer)?aa.createStream(34962,Cd.buffer):aa.getBuffer(Cd.buffer),Xe="type"in Cd?zd[Cd.type]:
De.dtype,cf=!!Cd.normalized,Te=Cd.size|0,af=Cd.offset|0,$e=Cd.stride|0,Le=Cd.divisor|0);We=A.buffer;A.buffer=De;jf=A.divisor;A.divisor=Le;nf=A.normalized;A.normalized=cf;ff=A.offset;A.offset=af;kf=A.size;A.size=Te;lf=A.state;A.state=Oe;mf=A.stride;A.stride=$e;rf=A.type;A.type=Xe;of=A.w;A.w=Ue;sf=A.x;A.x=Ve;Cf=A.y;A.y=Td;Df=A.z;A.z=Xd;Pe=Y.call(this,O,b,a);Ee=!1;pf=null;qf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;G(Pe)?(Ee=!0,pf=aa.createStream(34962,Pe),xf=pf.dtype):(pf=aa.getBuffer(Pe))?xf=
pf.dtype:"constant"in Pe?(Ff=2,"number"===typeof Pe.constant?(wf=Pe.constant,zf=Af=yf=0):(wf=0<Pe.constant.length?Pe.constant[0]:0,zf=1<Pe.constant.length?Pe.constant[1]:0,Af=2<Pe.constant.length?Pe.constant[2]:0,yf=3<Pe.constant.length?Pe.constant[3]:0)):(pf=G(Pe.buffer)?aa.createStream(34962,Pe.buffer):aa.getBuffer(Pe.buffer),xf="type"in Pe?zd[Pe.type]:pf.dtype,Ef=!!Pe.normalized,Bf=Pe.size|0,Hf=Pe.offset|0,Gf=Pe.stride|0,qf=Pe.divisor|0);Jf=I.buffer;I.buffer=pf;Kf=I.divisor;I.divisor=qf;Lf=I.normalized;
I.normalized=Ef;Mf=I.offset;I.offset=Hf;tf=I.size;I.size=Bf;Rf=I.state;I.state=Ff;If=I.stride;I.stride=Gf;uf=I.type;I.type=xf;dg=I.w;I.w=yf;Sf=I.x;I.x=wf;Tf=I.y;I.y=zf;qg=I.z;I.z=Af;gf=V.call(this,O,b,a);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;G(gf)?(df=!0,Nf=aa.createStream(34962,gf),Wf=Nf.dtype):(Nf=aa.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?
gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=G(gf.buffer)?aa.createStream(34962,gf.buffer):aa.getBuffer(gf.buffer),Wf="type"in gf?zd[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|0,ig=gf.stride|0,Of=gf.divisor|0);jg=K.buffer;K.buffer=Nf;rg=K.divisor;K.divisor=Of;sg=K.normalized;K.normalized=eg;tg=K.offset;K.offset=fg;ug=K.size;K.size=gg;vg=K.state;K.state=hg;wg=K.stride;K.stride=ig;xg=K.type;K.type=Wf;yg=K.w;K.w=Uf;zg=K.x;
K.x=Xf;Ag=K.y;K.y=Yf;Bg=K.z;K.z=Zf;hf=ja.call(this,O,b,a);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;G(hf)?(ef=!0,Pf=aa.createStream(34962,hf),$f=Pf.dtype):(Pf=aa.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=G(hf.buffer)?aa.createStream(34962,hf.buffer):
aa.getBuffer(hf.buffer),$f="type"in hf?zd[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=T.buffer;T.buffer=Pf;Cg=T.divisor;T.divisor=Qf;Dg=T.normalized;T.normalized=kg;Eg=T.offset;T.offset=lg;Fg=T.size;T.size=mg;Gg=T.state;T.state=ng;Hg=T.stride;T.stride=og;Ig=T.type;T.type=$f;Jg=T.w;T.w=Vf;Kg=T.x;T.x=ag;Lg=T.y;T.y=bg;Mg=T.z;T.z=cg;Ng=ua.vert;ua.vert=59;Og=ua.frag;ua.frag=58;ka.dirty=!0;e(O,b,a);O.viewportWidth=l;O.viewportHeight=m;yd[0]=h;yd[1]=
y;yd[2]=C;yd[3]=D;ta[0]=z;ta[1]=F;ta[2]=E;ta[3]=H;ia.blend_enable=N;Aa[0]=J;Aa[1]=L;Aa[2]=P;Aa[3]=Q;ia.depth_enable=R;xd[0]=ea;xd[1]=ha;xd[2]=ga;xd[3]=ma;ia.scissor_enable=qa;ia.stencil_enable=la;pa&&(c.cpuTime+=performance.now()-oa);Ja&&Kb.destroyStream(ra);Ga.elements=wa;Ga.offset=La;Ga.count=Qa;Ga.primitive=xb;Z[45]=Eb;Z[48]=v;Z[10]=Pa;Z[46]=tb;Z[47]=hb;Z[34]=zc;Z[6]=Bb;Z[7]=td;Z[8]=yb;Z[9]=kb;pb&&aa.destroyStream(za);u.buffer=Vb;u.divisor=xa;u.normalized=cc;u.offset=Ma;u.size=Qb;u.state=fb;u.stride=
ib;u.type=ya;u.w=ec;u.x=Fa;u.y=qb;u.z=rb;$a&&aa.destroyStream(rc);w.buffer=Cb;w.divisor=sb;w.normalized=uc;w.offset=vb;w.size=Oc;w.state=sc;w.stride=bd;w.type=Kc;w.w=ed;w.x=fd;w.y=Wb;w.z=bc;Ia&&aa.destroyStream(Zb);x.buffer=Zc;x.divisor=Rc;x.normalized=Mc;x.offset=Jb;x.size=Db;x.state=Nc;x.stride=Ec;x.type=Sc;x.w=gc;x.x=Vc;x.y=gd;x.z=kd;Wc&&aa.destroyStream(Dd);ca.buffer=pd;ca.divisor=Gd;ca.normalized=Hd;ca.offset=ue;ca.size=ve;ca.state=Ae;ca.stride=ne;ca.type=ee;ca.w=de;ca.x=pe;ca.y=be;ca.z=he;Uc&&
aa.destroyStream(qe);S.buffer=Ne;S.divisor=re;S.normalized=Fe;S.offset=He;S.size=Ie;S.state=Je;S.stride=Ge;S.type=Nd;S.w=Ud;S.x=$d;S.y=ce;S.z=Ke;Sd&&aa.destroyStream(De);A.buffer=We;A.divisor=jf;A.normalized=nf;A.offset=ff;A.size=kf;A.state=lf;A.stride=mf;A.type=rf;A.w=of;A.x=sf;A.y=Cf;A.z=Df;Ee&&aa.destroyStream(pf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=tf;I.state=Rf;I.stride=If;I.type=uf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;df&&aa.destroyStream(Nf);K.buffer=jg;K.divisor=rg;K.normalized=
sg;K.offset=tg;K.size=ug;K.state=vg;K.stride=wg;K.type=xg;K.w=yg;K.x=zg;K.y=Ag;K.z=Bg;ef&&aa.destroyStream(Pf);T.buffer=pg;T.divisor=Cg;T.normalized=Dg;T.offset=Eg;T.size=Fg;T.state=Gg;T.stride=Hg;T.type=Ig;T.w=Jg;T.x=Kg;T.y=Lg;T.z=Mg;ua.vert=Ng;ua.frag=Og;ka.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,c,d,h,m,l,f,k,b,q,C,y,e,g,p,n,r,u,M,w,t,x,B,ca,na,S,ba,A,Y,I,V,K,ja,T,ha,la,
Qa,Bb,oa,Oa){var W,P,L,U,pa,Q,Pb,ab,R,E,ma,ea,wa,La,yb,Ka,X,nb,ga,ra,cc,pc,jc,td,zc,aa,O,ka,Ga,Kb,bd,Oc,J,G,ia,ua,Z,fa,ta,N,H;W=a.attributes;P=a.buffer;L=a.context;U=a.current;pa=a.draw;Q=a.elements;Pb=a.extensions;ab=a.framebuffer;R=a.gl;E=a.isBufferArgs;ma=a.next;ea=a.shader;wa=a.uniforms;La=a.vao;yb=ma.blend_color;Ka=U.blend_color;X=ma.blend_equation;nb=U.blend_equation;ga=ma.blend_func;ra=U.blend_func;cc=ma.colorMask;pc=U.colorMask;jc=ma.depth_range;td=U.depth_range;zc=ma.polygonOffset_offset;
aa=U.polygonOffset_offset;O=ma.sample_coverage;ka=U.sample_coverage;Ga=ma.scissor_box;Kb=U.scissor_box;bd=ma.stencil_func;Oc=U.stencil_func;J=ma.stencil_opBack;G=U.stencil_opBack;ia=ma.stencil_opFront;ua=U.stencil_opFront;Z=ma.viewport;fa=U.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};N={offset:4,stride:8};H={offset:0,stride:8};return{batch:function(b,e){var a,g,f,k,n,p,q,r,d,l,m,h,y;a=ab.next;a!==ab.cur&&(a?R.bindFramebuffer(36160,a.framebuffer):
R.bindFramebuffer(36160,null),ab.cur=a);if(U.dirty){var C,D,z,Z,ea,ga,wa,yb,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,qd,nd,vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb,hd,Gb,oc,Xa,Fc,$b,lc,Id,rd,Gc,dc;C=ma.dither;C!==U.dither&&(C?R.enable(3024):R.disable(3024),U.dither=C);D=X[0];z=X[1];if(D!==nb[0]||z!==nb[1])R.blendEquationSeparate(D,z),nb[0]=D,nb[1]=z;Z=ma.depth_func;Z!==U.depth_func&&(R.depthFunc(Z),U.depth_func=Z);ea=jc[0];ga=jc[1];if(ea!==td[0]||ga!==td[1])R.depthRange(ea,ga),td[0]=ea,td[1]=ga;wa=ma.depth_mask;wa!==U.depth_mask&&
(R.depthMask(wa),U.depth_mask=wa);yb=cc[0];xe=cc[1];Me=cc[2];Qe=cc[3];if(yb!==pc[0]||xe!==pc[1]||Me!==pc[2]||Qe!==pc[3])R.colorMask(yb,xe,Me,Qe),pc[0]=yb,pc[1]=xe,pc[2]=Me,pc[3]=Qe;Bd=ma.cull_enable;Bd!==U.cull_enable&&(Bd?R.enable(2884):R.disable(2884),U.cull_enable=Bd);Be=ma.cull_face;Be!==U.cull_face&&(R.cullFace(Be),U.cull_face=Be);Vd=ma.frontFace;Vd!==U.frontFace&&(R.frontFace(Vd),U.frontFace=Vd);Wd=ma.lineWidth;Wd!==U.lineWidth&&(R.lineWidth(Wd),U.lineWidth=Wd);ae=ma.polygonOffset_enable;ae!==
U.polygonOffset_enable&&(ae?R.enable(32823):R.disable(32823),U.polygonOffset_enable=ae);Yd=zc[0];qd=zc[1];if(Yd!==aa[0]||qd!==aa[1])R.polygonOffset(Yd,qd),aa[0]=Yd,aa[1]=qd;nd=ma.sample_alpha;nd!==U.sample_alpha&&(nd?R.enable(32926):R.disable(32926),U.sample_alpha=nd);vd=ma.sample_enable;vd!==U.sample_enable&&(vd?R.enable(32928):R.disable(32928),U.sample_enable=vd);$c=O[0];sd=O[1];if($c!==ka[0]||sd!==ka[1])R.sampleCoverage($c,sd),ka[0]=$c,ka[1]=sd;Tc=ma.stencil_mask;Tc!==U.stencil_mask&&(R.stencilMask(Tc),
U.stencil_mask=Tc);Ed=bd[0];Pc=bd[1];Jc=bd[2];if(Ed!==Oc[0]||Pc!==Oc[1]||Jc!==Oc[2])R.stencilFunc(Ed,Pc,Jc),Oc[0]=Ed,Oc[1]=Pc,Oc[2]=Jc;qc=ia[0];gb=ia[1];hd=ia[2];Gb=ia[3];if(qc!==ua[0]||gb!==ua[1]||hd!==ua[2]||Gb!==ua[3])R.stencilOpSeparate(qc,gb,hd,Gb),ua[0]=qc,ua[1]=gb,ua[2]=hd,ua[3]=Gb;oc=J[0];Xa=J[1];Fc=J[2];$b=J[3];if(oc!==G[0]||Xa!==G[1]||Fc!==G[2]||$b!==G[3])R.stencilOpSeparate(oc,Xa,Fc,$b),G[0]=oc,G[1]=Xa,G[2]=Fc,G[3]=$b;lc=ma.scissor_enable;lc!==U.scissor_enable&&(lc?R.enable(3089):R.disable(3089),
U.scissor_enable=lc);Id=Ga[0];rd=Ga[1];Gc=Ga[2];dc=Ga[3];if(Id!==Kb[0]||rd!==Kb[1]||Gc!==Kb[2]||dc!==Kb[3])R.scissor(Id,rd,Gc,dc),Kb[0]=Id,Kb[1]=rd,Kb[2]=Gc,Kb[3]=dc}g=this.viewport;f=g.x|0;k=g.y|0;n="width"in g?g.width|0:L.framebufferWidth-f;p="height"in g?g.height|0:L.framebufferHeight-k;q=L.viewportWidth;L.viewportWidth=n;r=L.viewportHeight;L.viewportHeight=p;R.viewport(f,k,n,p);fa[0]=f;fa[1]=k;fa[2]=n;fa[3]=p;R.blendColor(0,0,0,1);Ka[0]=0;Ka[1]=0;Ka[2]=0;Ka[3]=1;R.enable(3042);U.blend_enable=
!0;R.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;R.disable(2929);U.depth_enable=!1;R.disable(2960);U.stencil_enable=!1;if(d=U.profile)l=performance.now(),c.count+=e;R.useProgram(u.program);m=Pb.angle_instanced_arrays;var Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb;La.setVAO(null);H.buffer=this.sizeBuffer;
Cc=!1;Xc=null;Yb=0;Hc=!1;Ea=Ya=0;ud=1;Hb=0;Ua=5126;ac=Dc=cb=Lb=0;E(H)?(Cc=!0,Xc=P.createStream(34962,H),Ua=Xc.dtype):(Xc=P.getBuffer(H))?Ua=Xc.dtype:"constant"in H?(ud=2,"number"===typeof H.constant?(cb=H.constant,Dc=ac=Lb=0):(cb=0<H.constant.length?H.constant[0]:0,Dc=1<H.constant.length?H.constant[1]:0,ac=2<H.constant.length?H.constant[2]:0,Lb=3<H.constant.length?H.constant[3]:0)):(Xc=E(H.buffer)?P.createStream(34962,H.buffer):P.getBuffer(H.buffer),Ua="type"in H?ta[H.type]:Xc.dtype,Hc=!!H.normalized,
Ea=H.size|0,Ya=H.offset|0,Hb=H.stride|0,Yb=H.divisor|0);ye=Oa.location;mc=W[ye];if(1===ud){mc.buffer||R.enableVertexAttribArray(ye);Tb=Ea||1;if(mc.type!==Ua||mc.size!==Tb||mc.buffer!==Xc||mc.normalized!==Hc||mc.offset!==Ya||mc.stride!==Hb)R.bindBuffer(34962,Xc.buffer),R.vertexAttribPointer(ye,Tb,Ua,Hc,Hb,Ya),mc.type=Ua,mc.size=Tb,mc.buffer=Xc,mc.normalized=Hc,mc.offset=Ya,mc.stride=Hb;mc.divisor!==Yb&&(m.vertexAttribDivisorANGLE(ye,Yb),mc.divisor=Yb)}else if(mc.buffer&&(R.disableVertexAttribArray(ye),
mc.buffer=null),mc.x!==cb||mc.y!==Dc||mc.z!==ac||mc.w!==Lb)R.vertexAttrib4f(ye,cb,Dc,ac,Lb),mc.x=cb,mc.y=Dc,mc.z=ac,mc.w=Lb;N.buffer=this.sizeBuffer;v=!1;Ub=null;Pa=0;ob=!1;hb=tb=0;Ra=1;Qc=0;Xb=5126;Yc=kc=db=jd=0;E(N)?(v=!0,Ub=P.createStream(34962,N),Xb=Ub.dtype):(Ub=P.getBuffer(N))?Xb=Ub.dtype:"constant"in N?(Ra=2,"number"===typeof N.constant?(db=N.constant,kc=Yc=jd=0):(db=0<N.constant.length?N.constant[0]:0,kc=1<N.constant.length?N.constant[1]:0,Yc=2<N.constant.length?N.constant[2]:0,jd=3<N.constant.length?
N.constant[3]:0)):(Ub=E(N.buffer)?P.createStream(34962,N.buffer):P.getBuffer(N.buffer),Xb="type"in N?ta[N.type]:Ub.dtype,ob=!!N.normalized,hb=N.size|0,tb=N.offset|0,Qc=N.stride|0,Pa=N.divisor|0);ic=I.location;jb=W[ic];if(1===Ra){jb.buffer||R.enableVertexAttribArray(ic);kb=hb||1;if(jb.type!==Xb||jb.size!==kb||jb.buffer!==Ub||jb.normalized!==ob||jb.offset!==tb||jb.stride!==Qc)R.bindBuffer(34962,Ub.buffer),R.vertexAttribPointer(ic,kb,Xb,ob,Qc,tb),jb.type=Xb,jb.size=kb,jb.buffer=Ub,jb.normalized=ob,jb.offset=
tb,jb.stride=Qc;jb.divisor!==Pa&&(m.vertexAttribDivisorANGLE(ic,Pa),jb.divisor=Pa)}else if(jb.buffer&&(R.disableVertexAttribArray(ic),jb.buffer=null),jb.x!==db||jb.y!==kc||jb.z!==Yc||jb.w!==jd)R.vertexAttrib4f(ic,db,kc,Yc,jd),jb.x=db,jb.y=kc,jb.z=Yc,jb.w=jd;va=this.charBuffer;pb=!1;za=null;Va=0;bb=!1;eb=Ba=0;Na=1;Ab=0;zb=5126;Mb=Ib=Ic=Ta=0;E(va)?(pb=!0,za=P.createStream(34962,va),zb=za.dtype):(za=P.getBuffer(va))?zb=za.dtype:"constant"in va?(Na=2,"number"===typeof va.constant?(Ic=va.constant,Ib=Mb=
Ta=0):(Ic=0<va.constant.length?va.constant[0]:0,Ib=1<va.constant.length?va.constant[1]:0,Mb=2<va.constant.length?va.constant[2]:0,Ta=3<va.constant.length?va.constant[3]:0)):(za=E(va.buffer)?P.createStream(34962,va.buffer):P.getBuffer(va.buffer),zb="type"in va?ta[va.type]:za.dtype,bb=!!va.normalized,eb=va.size|0,Ba=va.offset|0,Ab=va.stride|0,Va=va.divisor|0);Vb=Y.location;xa=W[Vb];if(1===Na){xa.buffer||R.enableVertexAttribArray(Vb);Jd=eb||1;if(xa.type!==zb||xa.size!==Jd||xa.buffer!==za||xa.normalized!==
bb||xa.offset!==Ba||xa.stride!==Ab)R.bindBuffer(34962,za.buffer),R.vertexAttribPointer(Vb,Jd,zb,bb,Ab,Ba),xa.type=zb,xa.size=Jd,xa.buffer=za,xa.normalized=bb,xa.offset=Ba,xa.stride=Ab;xa.divisor!==Va&&(m.vertexAttribDivisorANGLE(Vb,Va),xa.divisor=Va)}else if(xa.buffer&&(R.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Ic||xa.y!==Ib||xa.z!==Mb||xa.w!==Ta)R.vertexAttrib4f(Vb,Ic,Ib,Mb,Ta),xa.x=Ic,xa.y=Ib,xa.z=Mb,xa.w=Ta;Ma=this.position;Qb=!1;fb=null;ib=0;ya=!1;Fa=ec=0;qb=1;rb=0;Za=5126;tc=cd=rc=
$a=0;E(Ma)?(Qb=!0,fb=P.createStream(34962,Ma),Za=fb.dtype):(fb=P.getBuffer(Ma))?Za=fb.dtype:"constant"in Ma?(qb=2,"number"===typeof Ma.constant?(rc=Ma.constant,cd=tc=$a=0):(rc=0<Ma.constant.length?Ma.constant[0]:0,cd=1<Ma.constant.length?Ma.constant[1]:0,tc=2<Ma.constant.length?Ma.constant[2]:0,$a=3<Ma.constant.length?Ma.constant[3]:0)):(fb=E(Ma.buffer)?P.createStream(34962,Ma.buffer):P.getBuffer(Ma.buffer),Za="type"in Ma?ta[Ma.type]:fb.dtype,ya=!!Ma.normalized,Fa=Ma.size|0,ec=Ma.offset|0,rb=Ma.stride|
0,ib=Ma.divisor|0);Wa=ha.location;Nb=W[Wa];if(1===qb){Nb.buffer||R.enableVertexAttribArray(Wa);dd=Fa||2;if(Nb.type!==Za||Nb.size!==dd||Nb.buffer!==fb||Nb.normalized!==ya||Nb.offset!==ec||Nb.stride!==rb)R.bindBuffer(34962,fb.buffer),R.vertexAttribPointer(Wa,dd,Za,ya,rb,ec),Nb.type=Za,Nb.size=dd,Nb.buffer=fb,Nb.normalized=ya,Nb.offset=ec,Nb.stride=rb;Nb.divisor!==ib&&(m.vertexAttribDivisorANGLE(Wa,ib),Nb.divisor=ib)}else if(Nb.buffer&&(R.disableVertexAttribArray(Wa),Nb.buffer=null),Nb.x!==rc||Nb.y!==
cd||Nb.z!==tc||Nb.w!==$a)R.vertexAttrib4f(Wa,rc,cd,tc,$a),Nb.x=rc,Nb.y=cd,Nb.z=tc,Nb.w=$a;Ha=this.viewportArray;R.uniform4f(oa.location,Ha[0],Ha[1],Ha[2],Ha[3]);vc=this.scale;R.uniform2f(Qa.location,vc[0],vc[1]);Sa=this.translate;R.uniform2f(Bb.location,Sa[0],Sa[1]);(Ca=pa.elements)?R.bindBuffer(34963,Ca.buffer.buffer):La.currentVAO&&(Ca=Q.getElements(La.currentVAO.elements))&&R.bindBuffer(34963,Ca.buffer.buffer);lb=pa.instances;for(h=0;h<e;++h){y=b[h];var ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,
Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc,gd;ub=M.call(this,L,y,h);h&&Cb===ub||(Cb=ub,R.uniform1f(V.location,ub));sb=w.call(this,L,y,h);h&&uc===sb||(uc=sb,R.uniform1f(ja.location,sb));vb=y.align;h&&wd===vb||(wd=vb,R.uniform1f(ca.location,vb));sc=y.baseline;h&&Fd===sc||(Fd=sc,R.uniform1f(A.location,sc));Kc=y.color;ed=Kc[0];Wb=Kc[1];Rb=Kc[2];Zb=Kc[3];h&&fd===ed&&bc===Wb&&Ia===Rb&&mb===Zb||(fd=ed,bc=Wb,Ia=Rb,mb=Zb,R.uniform4f(K.location,ed,Wb,Rb,Zb));wb=t.call(this,L,y,h);
Ob=wb[0];fc=wb[1];h&&Sb===Ob&&hc===fc||(Sb=Ob,hc=fc,R.uniform2f(ba.location,Ob,fc));Ze=x.call(this,L,y,h);xc=Ze[0];Ac=Ze[1];h&&yc===xc&&Lc===Ac||(yc=xc,Lc=Ac,R.uniform2f(S.location,xc,Ac));Zc=y.positionOffset;Rc=Zc[0];Jb=Zc[1];h&&Mc===Rc&&Db===Jb||(Mc=Rc,Db=Jb,R.uniform2f(la.location,Rc,Jb));Nc=y.opacity;h&&Ec===Nc||(Ec=Nc,R.uniform1f(T.location,Nc));(Sc=B.call(this,L,y,h))&&"framebuffer"===Sc._reglType&&(Sc=Sc.color[0]);gc=Sc._texture;R.uniform1i(na.location,gc.bind());Vc=y.offset;if(gd=y.count)0<
lb?Ca?m.drawElementsInstancedANGLE(0,gd,Ca.type,Vc<<(Ca.type-5121>>1),lb):m.drawArraysInstancedANGLE(0,Vc,gd,lb):0>lb&&(Ca?R.drawElements(0,gd,Ca.type,Vc<<(Ca.type-5121>>1)):R.drawArrays(0,Vc,gd)),gc.unbind()}Cc&&P.destroyStream(Xc);v&&P.destroyStream(Ub);pb&&P.destroyStream(za);Qb&&P.destroyStream(fb);U.dirty=!0;La.setVAO(null);L.viewportWidth=q;L.viewportHeight=r;d&&(c.cpuTime+=performance.now()-l)},draw:function(b){var e,a,g,n,p,q,r,u,y,C,w,M,x,t,sa,B,Z,ea,ga,wa,yb,Ad,xe,Me,Qe,Bd,Be,Vd,Wd,ae,Yd,
qd,nd,vd,$c,sd,Tc,Ed,Pc,Jc,qc,gb,hd,Gb,oc,Xa,Fc,$b,lc,Id,rd,Gc,dc,Cc,Xc,Yb,Hc,Ya,Ea,ud,Hb,Ua,Lb,cb,Dc,ac,ye,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,jd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb;e=ab.next;e!==ab.cur&&(e?R.bindFramebuffer(36160,e.framebuffer):R.bindFramebuffer(36160,null),ab.cur=e);if(U.dirty){var Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc;Na=ma.dither;Na!==U.dither&&(Na?R.enable(3024):R.disable(3024),U.dither=Na);Ab=X[0];
zb=X[1];if(Ab!==nb[0]||zb!==nb[1])R.blendEquationSeparate(Ab,zb),nb[0]=Ab,nb[1]=zb;Ta=ma.depth_func;Ta!==U.depth_func&&(R.depthFunc(Ta),U.depth_func=Ta);Ic=jc[0];Ib=jc[1];if(Ic!==td[0]||Ib!==td[1])R.depthRange(Ic,Ib),td[0]=Ic,td[1]=Ib;Mb=ma.depth_mask;Mb!==U.depth_mask&&(R.depthMask(Mb),U.depth_mask=Mb);Vb=cc[0];xa=cc[1];Jd=cc[2];Ma=cc[3];if(Vb!==pc[0]||xa!==pc[1]||Jd!==pc[2]||Ma!==pc[3])R.colorMask(Vb,xa,Jd,Ma),pc[0]=Vb,pc[1]=xa,pc[2]=Jd,pc[3]=Ma;Qb=ma.cull_enable;Qb!==U.cull_enable&&(Qb?R.enable(2884):
R.disable(2884),U.cull_enable=Qb);fb=ma.cull_face;fb!==U.cull_face&&(R.cullFace(fb),U.cull_face=fb);ib=ma.frontFace;ib!==U.frontFace&&(R.frontFace(ib),U.frontFace=ib);ya=ma.lineWidth;ya!==U.lineWidth&&(R.lineWidth(ya),U.lineWidth=ya);ec=ma.polygonOffset_enable;ec!==U.polygonOffset_enable&&(ec?R.enable(32823):R.disable(32823),U.polygonOffset_enable=ec);Fa=zc[0];qb=zc[1];if(Fa!==aa[0]||qb!==aa[1])R.polygonOffset(Fa,qb),aa[0]=Fa,aa[1]=qb;rb=ma.sample_alpha;rb!==U.sample_alpha&&(rb?R.enable(32926):R.disable(32926),
U.sample_alpha=rb);Za=ma.sample_enable;Za!==U.sample_enable&&(Za?R.enable(32928):R.disable(32928),U.sample_enable=Za);$a=O[0];rc=O[1];if($a!==ka[0]||rc!==ka[1])R.sampleCoverage($a,rc),ka[0]=$a,ka[1]=rc;cd=ma.stencil_mask;cd!==U.stencil_mask&&(R.stencilMask(cd),U.stencil_mask=cd);tc=bd[0];Wa=bd[1];Nb=bd[2];if(tc!==Oc[0]||Wa!==Oc[1]||Nb!==Oc[2])R.stencilFunc(tc,Wa,Nb),Oc[0]=tc,Oc[1]=Wa,Oc[2]=Nb;dd=ia[0];Ha=ia[1];vc=ia[2];Sa=ia[3];if(dd!==ua[0]||Ha!==ua[1]||vc!==ua[2]||Sa!==ua[3])R.stencilOpSeparate(dd,
Ha,vc,Sa),ua[0]=dd,ua[1]=Ha,ua[2]=vc,ua[3]=Sa;Ca=J[0];lb=J[1];ub=J[2];Cb=J[3];if(Ca!==G[0]||lb!==G[1]||ub!==G[2]||Cb!==G[3])R.stencilOpSeparate(Ca,lb,ub,Cb),G[0]=Ca,G[1]=lb,G[2]=ub,G[3]=Cb;sb=ma.scissor_enable;sb!==U.scissor_enable&&(sb?R.enable(3089):R.disable(3089),U.scissor_enable=sb);uc=Ga[0];vb=Ga[1];wd=Ga[2];sc=Ga[3];if(uc!==Kb[0]||vb!==Kb[1]||wd!==Kb[2]||sc!==Kb[3])R.scissor(uc,vb,wd,sc),Kb[0]=uc,Kb[1]=vb,Kb[2]=wd,Kb[3]=sc}a=this.viewport;g=a.x|0;n=a.y|0;p="width"in a?a.width|0:L.framebufferWidth-
g;q="height"in a?a.height|0:L.framebufferHeight-n;r=L.viewportWidth;L.viewportWidth=p;u=L.viewportHeight;L.viewportHeight=q;R.viewport(g,n,p,q);fa[0]=g;fa[1]=n;fa[2]=p;fa[3]=q;R.blendColor(0,0,0,1);Ka[0]=0;Ka[1]=0;Ka[2]=0;Ka[3]=1;R.enable(3042);U.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;R.disable(2929);U.depth_enable=!1;R.disable(2960);U.stencil_enable=!1;if(y=U.profile)C=performance.now(),c.count++;R.useProgram(d.program);w=Pb.angle_instanced_arrays;
La.setVAO(null);H.buffer=this.sizeBuffer;M=!1;x=null;t=0;sa=!1;Z=B=0;ea=1;ga=0;wa=5126;Me=xe=Ad=yb=0;E(H)?(M=!0,x=P.createStream(34962,H),wa=x.dtype):(x=P.getBuffer(H))?wa=x.dtype:"constant"in H?(ea=2,"number"===typeof H.constant?(Ad=H.constant,xe=Me=yb=0):(Ad=0<H.constant.length?H.constant[0]:0,xe=1<H.constant.length?H.constant[1]:0,Me=2<H.constant.length?H.constant[2]:0,yb=3<H.constant.length?H.constant[3]:0)):(x=E(H.buffer)?P.createStream(34962,H.buffer):P.getBuffer(H.buffer),wa="type"in H?ta[H.type]:
x.dtype,sa=!!H.normalized,Z=H.size|0,B=H.offset|0,ga=H.stride|0,t=H.divisor|0);Qe=Oa.location;Bd=W[Qe];if(1===ea){Bd.buffer||R.enableVertexAttribArray(Qe);Be=Z||1;if(Bd.type!==wa||Bd.size!==Be||Bd.buffer!==x||Bd.normalized!==sa||Bd.offset!==B||Bd.stride!==ga)R.bindBuffer(34962,x.buffer),R.vertexAttribPointer(Qe,Be,wa,sa,ga,B),Bd.type=wa,Bd.size=Be,Bd.buffer=x,Bd.normalized=sa,Bd.offset=B,Bd.stride=ga;Bd.divisor!==t&&(w.vertexAttribDivisorANGLE(Qe,t),Bd.divisor=t)}else if(Bd.buffer&&(R.disableVertexAttribArray(Qe),
Bd.buffer=null),Bd.x!==Ad||Bd.y!==xe||Bd.z!==Me||Bd.w!==yb)R.vertexAttrib4f(Qe,Ad,xe,Me,yb),Bd.x=Ad,Bd.y=xe,Bd.z=Me,Bd.w=yb;N.buffer=this.sizeBuffer;Vd=!1;Wd=null;ae=0;Yd=!1;nd=qd=0;vd=1;$c=0;sd=5126;Jc=Pc=Ed=Tc=0;E(N)?(Vd=!0,Wd=P.createStream(34962,N),sd=Wd.dtype):(Wd=P.getBuffer(N))?sd=Wd.dtype:"constant"in N?(vd=2,"number"===typeof N.constant?(Ed=N.constant,Pc=Jc=Tc=0):(Ed=0<N.constant.length?N.constant[0]:0,Pc=1<N.constant.length?N.constant[1]:0,Jc=2<N.constant.length?N.constant[2]:0,Tc=3<N.constant.length?
N.constant[3]:0)):(Wd=E(N.buffer)?P.createStream(34962,N.buffer):P.getBuffer(N.buffer),sd="type"in N?ta[N.type]:Wd.dtype,Yd=!!N.normalized,nd=N.size|0,qd=N.offset|0,$c=N.stride|0,ae=N.divisor|0);qc=I.location;gb=W[qc];if(1===vd){gb.buffer||R.enableVertexAttribArray(qc);hd=nd||1;if(gb.type!==sd||gb.size!==hd||gb.buffer!==Wd||gb.normalized!==Yd||gb.offset!==qd||gb.stride!==$c)R.bindBuffer(34962,Wd.buffer),R.vertexAttribPointer(qc,hd,sd,Yd,$c,qd),gb.type=sd,gb.size=hd,gb.buffer=Wd,gb.normalized=Yd,gb.offset=
qd,gb.stride=$c;gb.divisor!==ae&&(w.vertexAttribDivisorANGLE(qc,ae),gb.divisor=ae)}else if(gb.buffer&&(R.disableVertexAttribArray(qc),gb.buffer=null),gb.x!==Ed||gb.y!==Pc||gb.z!==Jc||gb.w!==Tc)R.vertexAttrib4f(qc,Ed,Pc,Jc,Tc),gb.x=Ed,gb.y=Pc,gb.z=Jc,gb.w=Tc;Gb=this.charBuffer;oc=!1;Xa=null;Fc=0;$b=!1;Id=lc=0;rd=1;Gc=0;dc=5126;Hc=Yb=Xc=Cc=0;E(Gb)?(oc=!0,Xa=P.createStream(34962,Gb),dc=Xa.dtype):(Xa=P.getBuffer(Gb))?dc=Xa.dtype:"constant"in Gb?(rd=2,"number"===typeof Gb.constant?(Xc=Gb.constant,Yb=Hc=
Cc=0):(Xc=0<Gb.constant.length?Gb.constant[0]:0,Yb=1<Gb.constant.length?Gb.constant[1]:0,Hc=2<Gb.constant.length?Gb.constant[2]:0,Cc=3<Gb.constant.length?Gb.constant[3]:0)):(Xa=E(Gb.buffer)?P.createStream(34962,Gb.buffer):P.getBuffer(Gb.buffer),dc="type"in Gb?ta[Gb.type]:Xa.dtype,$b=!!Gb.normalized,Id=Gb.size|0,lc=Gb.offset|0,Gc=Gb.stride|0,Fc=Gb.divisor|0);Ya=Y.location;Ea=W[Ya];if(1===rd){Ea.buffer||R.enableVertexAttribArray(Ya);ud=Id||1;if(Ea.type!==dc||Ea.size!==ud||Ea.buffer!==Xa||Ea.normalized!==
$b||Ea.offset!==lc||Ea.stride!==Gc)R.bindBuffer(34962,Xa.buffer),R.vertexAttribPointer(Ya,ud,dc,$b,Gc,lc),Ea.type=dc,Ea.size=ud,Ea.buffer=Xa,Ea.normalized=$b,Ea.offset=lc,Ea.stride=Gc;Ea.divisor!==Fc&&(w.vertexAttribDivisorANGLE(Ya,Fc),Ea.divisor=Fc)}else if(Ea.buffer&&(R.disableVertexAttribArray(Ya),Ea.buffer=null),Ea.x!==Xc||Ea.y!==Yb||Ea.z!==Hc||Ea.w!==Cc)R.vertexAttrib4f(Ya,Xc,Yb,Hc,Cc),Ea.x=Xc,Ea.y=Yb,Ea.z=Hc,Ea.w=Cc;Hb=this.position;Ua=!1;Lb=null;cb=0;Dc=!1;ye=ac=0;mc=1;Tb=0;v=5126;tb=ob=Pa=
Ub=0;E(Hb)?(Ua=!0,Lb=P.createStream(34962,Hb),v=Lb.dtype):(Lb=P.getBuffer(Hb))?v=Lb.dtype:"constant"in Hb?(mc=2,"number"===typeof Hb.constant?(Pa=Hb.constant,ob=tb=Ub=0):(Pa=0<Hb.constant.length?Hb.constant[0]:0,ob=1<Hb.constant.length?Hb.constant[1]:0,tb=2<Hb.constant.length?Hb.constant[2]:0,Ub=3<Hb.constant.length?Hb.constant[3]:0)):(Lb=E(Hb.buffer)?P.createStream(34962,Hb.buffer):P.getBuffer(Hb.buffer),v="type"in Hb?ta[Hb.type]:Lb.dtype,Dc=!!Hb.normalized,ye=Hb.size|0,ac=Hb.offset|0,Tb=Hb.stride|
0,cb=Hb.divisor|0);hb=ha.location;Ra=W[hb];if(1===mc){Ra.buffer||R.enableVertexAttribArray(hb);Qc=ye||2;if(Ra.type!==v||Ra.size!==Qc||Ra.buffer!==Lb||Ra.normalized!==Dc||Ra.offset!==ac||Ra.stride!==Tb)R.bindBuffer(34962,Lb.buffer),R.vertexAttribPointer(hb,Qc,v,Dc,Tb,ac),Ra.type=v,Ra.size=Qc,Ra.buffer=Lb,Ra.normalized=Dc,Ra.offset=ac,Ra.stride=Tb;Ra.divisor!==cb&&(w.vertexAttribDivisorANGLE(hb,cb),Ra.divisor=cb)}else if(Ra.buffer&&(R.disableVertexAttribArray(hb),Ra.buffer=null),Ra.x!==Pa||Ra.y!==ob||
Ra.z!==tb||Ra.w!==Ub)R.vertexAttrib4f(hb,Pa,ob,tb,Ub),Ra.x=Pa,Ra.y=ob,Ra.z=tb,Ra.w=Ub;Xb=h.call(this,L,b,0);R.uniform1f(V.location,Xb);jd=m.call(this,L,b,0);R.uniform1f(ja.location,jd);R.uniform1f(ca.location,b.align);R.uniform1f(A.location,b.baseline);db=this.viewportArray;R.uniform4f(oa.location,db[0],db[1],db[2],db[3]);kc=b.color;R.uniform4f(K.location,kc[0],kc[1],kc[2],kc[3]);Yc=l.call(this,L,b,0);R.uniform2f(ba.location,Yc[0],Yc[1]);ic=f.call(this,L,b,0);R.uniform2f(S.location,ic[0],ic[1]);jb=
this.scale;R.uniform2f(Qa.location,jb[0],jb[1]);kb=this.translate;R.uniform2f(Bb.location,kb[0],kb[1]);va=b.positionOffset;R.uniform2f(la.location,va[0],va[1]);R.uniform1f(T.location,b.opacity);(pb=k.call(this,L,b,0))&&"framebuffer"===pb._reglType&&(pb=pb.color[0]);za=pb._texture;R.uniform1i(na.location,za.bind());(Va=pa.elements)?R.bindBuffer(34963,Va.buffer.buffer):La.currentVAO&&(Va=Q.getElements(La.currentVAO.elements))&&R.bindBuffer(34963,Va.buffer.buffer);bb=b.offset;if(Ba=b.count)eb=pa.instances,
0<eb?Va?w.drawElementsInstancedANGLE(0,Ba,Va.type,bb<<(Va.type-5121>>1),eb):w.drawArraysInstancedANGLE(0,bb,Ba,eb):0>eb&&(Va?R.drawElements(0,Ba,Va.type,bb<<(Va.type-5121>>1)):R.drawArrays(0,bb,Ba)),U.dirty=!0,La.setVAO(null),L.viewportWidth=r,L.viewportHeight=u,y&&(c.cpuTime+=performance.now()-C),M&&P.destroyStream(x),Vd&&P.destroyStream(Wd),oc&&P.destroyStream(Xa),Ua&&P.destroyStream(Lb),za.unbind()},scope:function(a,f,k){var d,u,m,l,h,w,M,D,x,z,t,sa,B,A,G,ca,I,J,K,O,na,S,Q,R,T,aa,V,ba,W,X,fa,Y,
ha,ia,ka,ja,la,ua,oa,ra,Ga,Ka,La,Oa,Qa,ab,zc,nb,Bb,Kb,td,Pb,cc,Yb,pc,Ya,Ea,jc,Hb,Ua,Lb,cb,Dc,ac,Oc,mc,Tb,v,Ub,Pa,ob,tb,hb,Ra,Qc,Xb,bd,db,kc,Yc,ic,jb,kb,va,pb,za,Va,bb,Ba,eb,Na,Ab,zb,Ta,Ic,Ib,Mb,Vb,xa,Jd,Ma,Qb,fb,ib,ya,ec,Fa,qb,rb,Za,$a,rc,cd,tc,Wa,Nb,dd,Ha,vc,Sa,Ca,lb,ub,Cb,sb,uc,vb,wd,sc,Fd,Kc,ed,fd,Wb,bc,Rb,Ia,Zb,mb,wb,Ob,Sb,fc,hc,Ze,xc,yc,Ac,Lc,Zc,Rc,Mc,Jb,Db,Nc,Ec,Sc,gc,Vc;d=this.viewport;u=d.x|0;m=d.y|0;l="width"in d?d.width|0:L.framebufferWidth-u;h="height"in d?d.height|0:L.framebufferHeight-
m;w=L.viewportWidth;L.viewportWidth=l;M=L.viewportHeight;L.viewportHeight=h;D=Z[0];Z[0]=u;x=Z[1];Z[1]=m;z=Z[2];Z[2]=l;t=Z[3];Z[3]=h;sa=yb[0];yb[0]=0;B=yb[1];yb[1]=0;A=yb[2];yb[2]=0;G=yb[3];yb[3]=1;ca=ma.blend_enable;ma.blend_enable=!0;I=ga[0];ga[0]=770;J=ga[1];ga[1]=771;K=ga[2];ga[2]=773;O=ga[3];ga[3]=1;na=ma.depth_enable;ma.depth_enable=!1;S=ma.stencil_enable;ma.stencil_enable=!1;if(Q=U.profile)R=performance.now(),c.count++;T=a.offset;aa=pa.offset;pa.offset=T;V=a.count;ba=pa.count;pa.count=V;W=pa.primitive;
pa.primitive=0;X=a.align;fa=wa[64];wa[64]=X;Y=b.call(this,L,a,k);ha=wa[69];wa[69]=Y;ia=q.call(this,L,a,k);ka=wa[67];wa[67]=ia;ja=C.call(this,L,a,k);la=wa[66];wa[66]=ja;ua=a.baseline;oa=wa[65];wa[65]=ua;ra=y.call(this,L,a,k);Ga=wa[62];wa[62]=ra;Ka=a.color;La=wa[14];wa[14]=Ka;Oa=e.call(this,L,a,k);Qa=wa[63];wa[63]=Oa;ab=a.opacity;zc=wa[10];wa[10]=ab;nb=a.positionOffset;Bb=wa[68];wa[68]=nb;Kb=this.scale;td=wa[6];wa[6]=Kb;Pb=this.translate;cc=wa[8];wa[8]=Pb;Yb=this.viewportArray;pc=wa[3];wa[3]=Yb;Ya=
this.charBuffer;Ea=!1;jc=null;Hb=0;Ua=!1;cb=Lb=0;Dc=1;ac=0;Oc=5126;Ub=v=Tb=mc=0;E(Ya)?(Ea=!0,jc=P.createStream(34962,Ya),Oc=jc.dtype):(jc=P.getBuffer(Ya))?Oc=jc.dtype:"constant"in Ya?(Dc=2,"number"===typeof Ya.constant?(Tb=Ya.constant,v=Ub=mc=0):(Tb=0<Ya.constant.length?Ya.constant[0]:0,v=1<Ya.constant.length?Ya.constant[1]:0,Ub=2<Ya.constant.length?Ya.constant[2]:0,mc=3<Ya.constant.length?Ya.constant[3]:0)):(jc=E(Ya.buffer)?P.createStream(34962,Ya.buffer):P.getBuffer(Ya.buffer),Oc="type"in Ya?ta[Ya.type]:
jc.dtype,Ua=!!Ya.normalized,cb=Ya.size|0,Lb=Ya.offset|0,ac=Ya.stride|0,Hb=Ya.divisor|0);Pa=g.buffer;g.buffer=jc;ob=g.divisor;g.divisor=Hb;tb=g.normalized;g.normalized=Ua;hb=g.offset;g.offset=Lb;Ra=g.size;g.size=cb;Qc=g.state;g.state=Dc;Xb=g.stride;g.stride=ac;bd=g.type;g.type=Oc;db=g.w;g.w=mc;kc=g.x;g.x=Tb;Yc=g.y;g.y=v;ic=g.z;g.z=Ub;N.buffer=this.sizeBuffer;jb=!1;kb=null;va=0;pb=!1;Va=za=0;bb=1;Ba=0;eb=5126;Ta=zb=Ab=Na=0;E(N)?(jb=!0,kb=P.createStream(34962,N),eb=kb.dtype):(kb=P.getBuffer(N))?eb=kb.dtype:
"constant"in N?(bb=2,"number"===typeof N.constant?(Ab=N.constant,zb=Ta=Na=0):(Ab=0<N.constant.length?N.constant[0]:0,zb=1<N.constant.length?N.constant[1]:0,Ta=2<N.constant.length?N.constant[2]:0,Na=3<N.constant.length?N.constant[3]:0)):(kb=E(N.buffer)?P.createStream(34962,N.buffer):P.getBuffer(N.buffer),eb="type"in N?ta[N.type]:kb.dtype,pb=!!N.normalized,Va=N.size|0,za=N.offset|0,Ba=N.stride|0,va=N.divisor|0);Ic=p.buffer;p.buffer=kb;Ib=p.divisor;p.divisor=va;Mb=p.normalized;p.normalized=pb;Vb=p.offset;
p.offset=za;xa=p.size;p.size=Va;Jd=p.state;p.state=bb;Ma=p.stride;p.stride=Ba;Qb=p.type;p.type=eb;fb=p.w;p.w=Na;ib=p.x;p.x=Ab;ya=p.y;p.y=zb;ec=p.z;p.z=Ta;Fa=this.position;qb=!1;rb=null;Za=0;$a=!1;cd=rc=0;tc=1;Wa=0;Nb=5126;Sa=vc=Ha=dd=0;E(Fa)?(qb=!0,rb=P.createStream(34962,Fa),Nb=rb.dtype):(rb=P.getBuffer(Fa))?Nb=rb.dtype:"constant"in Fa?(tc=2,"number"===typeof Fa.constant?(Ha=Fa.constant,vc=Sa=dd=0):(Ha=0<Fa.constant.length?Fa.constant[0]:0,vc=1<Fa.constant.length?Fa.constant[1]:0,Sa=2<Fa.constant.length?
Fa.constant[2]:0,dd=3<Fa.constant.length?Fa.constant[3]:0)):(rb=E(Fa.buffer)?P.createStream(34962,Fa.buffer):P.getBuffer(Fa.buffer),Nb="type"in Fa?ta[Fa.type]:rb.dtype,$a=!!Fa.normalized,cd=Fa.size|0,rc=Fa.offset|0,Wa=Fa.stride|0,Za=Fa.divisor|0);Ca=n.buffer;n.buffer=rb;lb=n.divisor;n.divisor=Za;ub=n.normalized;n.normalized=$a;Cb=n.offset;n.offset=rc;sb=n.size;n.size=cd;uc=n.state;n.state=tc;vb=n.stride;n.stride=Wa;wd=n.type;n.type=Nb;sc=n.w;n.w=dd;Fd=n.x;n.x=Ha;Kc=n.y;n.y=vc;ed=n.z;n.z=Sa;H.buffer=
this.sizeBuffer;fd=!1;Wb=null;bc=0;Rb=!1;Zb=Ia=0;mb=1;wb=0;Ob=5126;Ze=hc=fc=Sb=0;E(H)?(fd=!0,Wb=P.createStream(34962,H),Ob=Wb.dtype):(Wb=P.getBuffer(H))?Ob=Wb.dtype:"constant"in H?(mb=2,"number"===typeof H.constant?(fc=H.constant,hc=Ze=Sb=0):(fc=0<H.constant.length?H.constant[0]:0,hc=1<H.constant.length?H.constant[1]:0,Ze=2<H.constant.length?H.constant[2]:0,Sb=3<H.constant.length?H.constant[3]:0)):(Wb=E(H.buffer)?P.createStream(34962,H.buffer):P.getBuffer(H.buffer),Ob="type"in H?ta[H.type]:Wb.dtype,
Rb=!!H.normalized,Zb=H.size|0,Ia=H.offset|0,wb=H.stride|0,bc=H.divisor|0);xc=r.buffer;r.buffer=Wb;yc=r.divisor;r.divisor=bc;Ac=r.normalized;r.normalized=Rb;Lc=r.offset;r.offset=Ia;Zc=r.size;r.size=Zb;Rc=r.state;r.state=mb;Mc=r.stride;r.stride=wb;Jb=r.type;r.type=Ob;Db=r.w;r.w=Sb;Nc=r.x;r.x=fc;Ec=r.y;r.y=hc;Sc=r.z;r.z=Ze;gc=ea.vert;ea.vert=61;Vc=ea.frag;ea.frag=60;U.dirty=!0;f(L,a,k);L.viewportWidth=w;L.viewportHeight=M;Z[0]=D;Z[1]=x;Z[2]=z;Z[3]=t;yb[0]=sa;yb[1]=B;yb[2]=A;yb[3]=G;ma.blend_enable=ca;
ga[0]=I;ga[1]=J;ga[2]=K;ga[3]=O;ma.depth_enable=na;ma.stencil_enable=S;Q&&(c.cpuTime+=performance.now()-R);pa.offset=aa;pa.count=ba;pa.primitive=W;wa[64]=fa;wa[69]=ha;wa[67]=ka;wa[66]=la;wa[65]=oa;wa[62]=Ga;wa[14]=La;wa[63]=Qa;wa[10]=zc;wa[68]=Bb;wa[6]=td;wa[8]=cc;wa[3]=pc;Ea&&P.destroyStream(jc);g.buffer=Pa;g.divisor=ob;g.normalized=tb;g.offset=hb;g.size=Ra;g.state=Qc;g.stride=Xb;g.type=bd;g.w=db;g.x=kc;g.y=Yc;g.z=ic;jb&&P.destroyStream(kb);p.buffer=Ic;p.divisor=Ib;p.normalized=Mb;p.offset=Vb;p.size=
xa;p.state=Jd;p.stride=Ma;p.type=Qb;p.w=fb;p.x=ib;p.y=ya;p.z=ec;qb&&P.destroyStream(rb);n.buffer=Ca;n.divisor=lb;n.normalized=ub;n.offset=Cb;n.size=sb;n.state=uc;n.stride=vb;n.type=wd;n.w=sc;n.x=Fd;n.y=Kc;n.z=ed;fd&&P.destroyStream(Wb);r.buffer=xc;r.divisor=yc;r.normalized=Ac;r.offset=Lc;r.size=Zc;r.state=Rc;r.stride=Mc;r.type=Jb;r.w=Db;r.x=Nc;r.y=Ec;r.z=Sc;ea.vert=gc;ea.frag=Vc;U.dirty=!0}}}}},{}],25:[function(d,h,t){var a=d("./sorted-object-keys");h.exports=function(c,d){for(var h=a(d),m=0;m<h.length;++m)c[h[m]]=
d[h[m]];return c}},{"./sorted-object-keys":34}],26:[function(d,h,t){function a(a,c,d,f,k,b){for(var q=0;q<c;++q)for(var h=a[q],y=0;y<d;++y)for(var e=h[y],g=0;g<f;++g)k[b++]=e[g]}function c(d,m,l,f,k){for(var b=1,q=l+1;q<m.length;++q)b*=m[q];var h=m[l];if(4===m.length-l){var y=m[l+1],e=m[l+2];m=m[l+3];for(q=0;q<h;++q)a(d[q],y,e,m,f,k),k+=b}else for(q=0;q<h;++q)c(d[q],m,l+1,f,k),k+=b}var z=d("./pool");h.exports={shape:function(a){for(var c=[];a.length;a=a[0])c.push(a.length);return c},flatten:function(d,
m,l,f){var k=1;if(m.length)for(var b=0;b<m.length;++b)k*=m[b];else k=0;l=f||z.allocType(l,k);switch(m.length){case 0:break;case 1:f=m[0];for(m=0;m<f;++m)l[m]=d[m];break;case 2:f=m[0];m=m[1];for(b=k=0;b<f;++b)for(var q=d[b],h=0;h<m;++h)l[k++]=q[h];break;case 3:a(d,m[0],m[1],m[2],l,0);break;default:c(d,m,0,l,0)}return l}}},{"./pool":32}],27:[function(d,h,t){var a=d("./is-typed-array");h.exports=function(c){return Array.isArray(c)||a(c)}},{"./is-typed-array":30}],28:[function(d,h,t){var a=d("./is-typed-array");
h.exports=function(c){return!!c&&"object"===typeof c&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&"number"===typeof c.offset&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||a(c.data))}},{"./is-typed-array":30}],29:[function(d,h,t){h.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(d,h,t){h.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof
Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(d,h,t){h.exports=function(a,c){for(var d=Array(a),h=0;h<a;++h)d[h]=c(h);return d}},{}],32:[function(d,h,t){function a(a){var c,d;c=(65535<a)<<4;a>>>=c;d=(255<a)<<3;a>>>=d;c|=d;d=(15<a)<<2;a>>>=d;c|=d;d=(3<a)<<1;return c|d|a>>>d>>1}function c(){function c(f){a:{for(var k=16;268435456>=k;k*=16)if(f<=k){f=k;break a}f=0}k=l[a(f)>>2];return 0<k.length?k.pop():new ArrayBuffer(f)}function d(c){l[a(c.byteLength)>>2].push(c)}
var l=z(8,function(){return[]});return{alloc:c,free:d,allocType:function(a,k){var b=null;switch(a){case 5120:b=new Int8Array(c(k),0,k);break;case 5121:b=new Uint8Array(c(k),0,k);break;case 5122:b=new Int16Array(c(2*k),0,k);break;case 5123:b=new Uint16Array(c(2*k),0,k);break;case 5124:b=new Int32Array(c(4*k),0,k);break;case 5125:b=new Uint32Array(c(4*k),0,k);break;case 5126:b=new Float32Array(c(4*k),0,k);break;default:return null}return b.length!==k?b.subarray(0,k):b},freeType:function(a){d(a.buffer)}}}
var z=d("./loop");d=c();d.zero=c();h.exports=d},{"./loop":31}],33:[function(d,h,t){h.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(d,h,t){h.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(d,h,t){var a=d("./pool"),c=new Float32Array(1),z=new Uint32Array(c.buffer);h.exports=
function(d){for(var m=a.allocType(5123,d.length),l=0;l<d.length;++l)if(isNaN(d[l]))m[l]=65535;else if(Infinity===d[l])m[l]=31744;else if(-Infinity===d[l])m[l]=64512;else{c[0]=d[l];var f=z[0],k=f>>>31<<15,b=(f<<1>>>24)-127,f=f>>13&1023;m[l]=-24>b?k:-14>b?k+(f+1024>>-14-b):15<b?k+31744:k+(b+15<<10)+f}return m}},{"./pool":32}],36:[function(d,h,t){var a=d("./sorted-object-keys");h.exports=function(c){return a(c).map(function(a){return c[a]})}},{"./sorted-object-keys":34}],37:[function(d,h,t){function a(a,
c,b){function q(){var e=window.innerWidth,g=window.innerHeight;a!==document.body&&(g=d.getBoundingClientRect(),e=g.right-g.left,g=g.bottom-g.top);d.width=b*e;d.height=b*g}var d=document.createElement("canvas");l(d.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(d);a===document.body&&(d.style.position="absolute",l(a.style,{margin:0,padding:0}));var m;a!==document.body&&"function"===typeof ResizeObserver?(m=new ResizeObserver(function(){setTimeout(q)}),m.observe(a)):
window.addEventListener("resize",q,!1);q();return{canvas:d,onDestroy:function(){m?m.disconnect():window.removeEventListener("resize",q);a.removeChild(d)}}}function c(a,c){function b(b){try{return a.getContext(b,c)}catch(d){return null}}return b("webgl")||b("experimental-webgl")||b("webgl-experimental")}function z(a){if("string"===typeof a)return a.split();m(Array.isArray(a),"invalid extension array");return a}function D(a){return"string"===typeof a?(m("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(a)):a}var m=d("./util/check"),l=d("./util/extend");h.exports=function(f){var k=f||{},b,q,d,l;f={};var e=[],g=[],p="undefined"===typeof window?1:window.devicePixelRatio,n=!1,r=function(b){b&&m.raise(b)},u=function(){};"string"===typeof k?(m("undefined"!==typeof document,"selector queries only supported in DOM environments"),b=document.querySelector(k),m(b,"invalid query string for element")):"object"===typeof k?"string"===typeof k.nodeName&&"function"===typeof k.appendChild&&
"function"===typeof k.getBoundingClientRect?b=k:"function"===typeof k.drawArrays||"function"===typeof k.drawElements?(l=k,d=l.canvas):(m.constructor(k),"gl"in k?l=k.gl:"canvas"in k?d=D(k.canvas):"container"in k&&(q=D(k.container)),"attributes"in k&&(f=k.attributes,m.type(f,"object","invalid context attributes")),"extensions"in k&&(e=z(k.extensions)),"optionalExtensions"in k&&(g=z(k.optionalExtensions)),"onDone"in k&&(m.type(k.onDone,"function","invalid or missing onDone callback"),r=k.onDone),"profile"in
k&&(n=!!k.profile),"pixelRatio"in k&&(p=+k.pixelRatio,m(0<p,"invalid pixel ratio"))):m.raise("invalid arguments to regl");b&&("canvas"===b.nodeName.toLowerCase()?d=b:q=b);if(!l){if(!d){m("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");b=a(q||document.body,r,p);if(!b)return null;d=b.canvas;u=b.onDestroy}void 0===f.premultipliedAlpha&&(f.premultipliedAlpha=!0);l=c(d,f)}return l?{gl:l,canvas:d,container:q,extensions:e,optionalExtensions:g,pixelRatio:p,
profile:n,onDone:r,onDestroy:u}:(u(),r("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(d,h,t){var a=d("element-size");h.exports=function(d,h,m){function l(){var k=l.parent||d.parentNode;if("function"===typeof k)var b=k(c)||c,k=b[0],b=b[1];else k&&k!==document.body?(b=a(k),k=b[0]|0,b=b[1]|0):(k=window.innerWidth,b=window.innerHeight);f?(d.setAttribute("width",k*l.scale+"px"),d.setAttribute("height",
b*l.scale+"px")):(d.width=k*l.scale,d.height=b*l.scale);d.style.width=k+"px";d.style.height=b+"px";return l}var f="SVG"===d.nodeName.toUpperCase();d.style.position=d.style.position||"absolute";d.style.top=0;d.style.left=0;l.scale=parseFloat(m||1);l.parent=h;return l()};var c=new Float32Array(2)},{"element-size":42}],39:[function(d,h,t){var a=d("orbit-camera"),c=d("scroll-speed"),z=d("mouse-position"),D=d("mouse-pressed"),m=d("key-pressed");h.exports=function(d,f){f=f||{};f.pan=!1!==f.pan;f.scale=
!1!==f.scale;f.rotate=!1!==f.rotate;var k=c(d,f.scale),b=D(d,f.rotate),q=z(d),h=a([0,10,30],[0,0,0],[0,1,0]);h.tick=function(){var a=m("<control>")||m("<alt>"),e=m("<shift>"),g=d.height,c=d.width;f.rotate&&b.left&&!a&&!e&&h.rotate([q.x/c-.5,q.y/g-.5],[q.prevX/c-.5,q.prevY/g-.5]);(f.pan&&b.right||b.left&&a&&!e)&&h.pan([1*(q.x-q.prevX)/c,1*(q.y-q.prevY)/g]);f.scale&&k[1]&&(h.distance*=Math.exp(k[1]/g));if(f.scale&&(b.middle||b.left&&!a&&e)){a=q.y-q.prevY;if(!a)return;h.distance*=Math.exp(a/g)}k.flush();
q.flush()};return h}},{"key-pressed":75,"mouse-position":40,"mouse-pressed":41,"orbit-camera":76,"scroll-speed":78}],40:[function(d,h,t){var a=d("events/");h.exports=function(c,d){var h=new a;h.x=0;h.y=0;h.prevX=0;h.prevY=0;h.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===typeof window)return h;d=d||c||window;c=c||document.body;d.addEventListener("mousemove",c===document.body||c===window?function(a){h.prevX=h.x;h.prevY=h.y;h.x=a.clientX;h.y=a.clientY;h.emit("move",a)}:function(a){h.prevX=
h.x;h.prevY=h.y;var d=c.getBoundingClientRect();h.x=a.clientX-d.left;h.y=a.clientY-d.top;h.emit("move",a)},!1);return h}},{"events/":43}],41:[function(d,h,t){var a=d("events/"),c=["left","middle","right"];h.exports=function(d,h){function m(a){f.right=!1;f[c[a.button]]=!0;f.emit("down",a);if(h){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function l(a){f.right=!1;f[c[a.button]]=!1;f.emit("up",a);h&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var f=new a;f.left=
!1;f.right=!1;f.middle=!1;"undefined"!==typeof window&&(d=d||window,d.addEventListener("mousedown",m,!1),d.addEventListener("mouseup",l,!1),h&&d.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return f}},{"events/":43}],42:[function(d,h,t){function a(a){return parseFloat(a)||0}h.exports=function(c){if(c===window||c===document.body)return[window.innerWidth,window.innerHeight];if(!c.parentNode){var d=!0;document.body.appendChild(c)}var h=c.getBoundingClientRect(),
m=getComputedStyle(c),l=(h.height|0)+a(m.getPropertyValue("margin-top"))+a(m.getPropertyValue("margin-bottom")),h=(h.width|0)+a(m.getPropertyValue("margin-left"))+a(m.getPropertyValue("margin-right"));d&&document.body.removeChild(c);return[h,l]}},{}],43:[function(d,h,t){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function c(a){return"function"===typeof a}function z(a){return"object"===typeof a&&null!==a}h.exports=a;a.EventEmitter=a;a.prototype._events=
void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var d,l,f,k;this._events||(this._events={});if("error"===a&&(!this._events.error||z(this._events.error)&&!this._events.error.length)){d=arguments[1];if(d instanceof Error)throw d;l=Error('Uncaught, unspecified "error" event. ('+d+")");l.context=d;throw l;
}l=this._events[a];if(void 0===l)return!1;if(c(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),l.apply(this,d)}else if(z(l))for(d=Array.prototype.slice.call(arguments,1),k=l.slice(),l=k.length,f=0;f<l;f++)k[f].apply(this,d);return!0};a.prototype.addListener=function(d,m){var l;if(!c(m))throw TypeError("listener must be a function");this._events||(this._events=
{});this._events.newListener&&this.emit("newListener",d,c(m.listener)?m.listener:m);this._events[d]?z(this._events[d])?this._events[d].push(m):this._events[d]=[this._events[d],m]:this._events[d]=m;z(this._events[d])&&!this._events[d].warned&&(l=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<l&&this._events[d].length>l&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",
this._events[d].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,d){function l(){this.removeListener(a,l);f||(f=!0,d.apply(this,arguments))}if(!c(d))throw TypeError("listener must be a function");var f=!1;l.listener=d;this.on(a,l);return this};a.prototype.removeListener=function(a,d){var l,f,k;if(!c(d))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;l=this._events[a];
k=l.length;f=-1;if(l===d||c(l.listener)&&l.listener===d)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,d);else if(z(l)){for(;0<k--;)if(l[k]===d||l[k].listener&&l[k].listener===d){f=k;break}if(0>f)return this;1===l.length?(l.length=0,delete this._events[a]):l.splice(f,1);this._events.removeListener&&this.emit("removeListener",a,d)}return this};a.prototype.removeAllListeners=function(a){var d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?
this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(d in this._events)"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events={};return this}d=this._events[a];if(c(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():
[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(c(a))return 1;if(a)return a.length}return 0};a.listenerCount=function(a,c){return a.listenerCount(c)}},{}],44:[function(d,h,t){h.exports=function(a,c){var d=c[0],h=c[1],m=c[2],l=c[3],f=c[4],k=c[5],b=c[6],q=c[7],C=c[8],y=c[9],e=c[10],g=c[11],p=c[12],n=c[13],r=c[14],u=c[15];a[0]=k*(e*u-g*r)-y*(b*u-q*r)+n*(b*g-q*e);a[1]=-(h*(e*u-g*r)-y*(m*u-l*r)+n*(m*g-l*e));a[2]=h*(b*u-q*r)-k*(m*u-l*r)+n*(m*q-l*b);a[3]=-(h*(b*g-q*e)-k*(m*
g-l*e)+y*(m*q-l*b));a[4]=-(f*(e*u-g*r)-C*(b*u-q*r)+p*(b*g-q*e));a[5]=d*(e*u-g*r)-C*(m*u-l*r)+p*(m*g-l*e);a[6]=-(d*(b*u-q*r)-f*(m*u-l*r)+p*(m*q-l*b));a[7]=d*(b*g-q*e)-f*(m*g-l*e)+C*(m*q-l*b);a[8]=f*(y*u-g*n)-C*(k*u-q*n)+p*(k*g-q*y);a[9]=-(d*(y*u-g*n)-C*(h*u-l*n)+p*(h*g-l*y));a[10]=d*(k*u-q*n)-f*(h*u-l*n)+p*(h*q-l*k);a[11]=-(d*(k*g-q*y)-f*(h*g-l*y)+C*(h*q-l*k));a[12]=-(f*(y*r-e*n)-C*(k*r-b*n)+p*(k*e-b*y));a[13]=d*(y*r-e*n)-C*(h*r-m*n)+p*(h*e-m*y);a[14]=-(d*(k*r-b*n)-f*(h*r-m*n)+p*(h*b-m*k));a[15]=d*
(k*e-b*y)-f*(h*e-m*y)+C*(h*b-m*k);return a}},{}],45:[function(d,h,t){h.exports=function(a){var c=new Float32Array(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c}},{}],46:[function(d,h,t){h.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=
c[14];a[15]=c[15];return a}},{}],47:[function(d,h,t){h.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(d,h,t){h.exports=function(a){var c=a[0],d=a[1],h=a[2],m=a[3],l=a[4],f=a[5],k=a[6],b=a[7],q=a[8],C=a[9],y=a[10],e=a[11],g=a[12],p=a[13],n=a[14];a=a[15];return(c*f-d*l)*(y*a-e*n)-(c*k-h*l)*(C*a-e*p)+(c*b-m*l)*(C*n-y*p)+(d*k-h*f)*(q*a-e*g)-(d*b-m*f)*(q*n-y*
g)+(h*b-m*k)*(q*p-C*g)}},{}],49:[function(d,h,t){h.exports=function(a,c){var d=c[0],h=c[1],m=c[2],l=c[3],f=d+d,k=h+h,b=m+m,d=d*f,q=h*f,h=h*k,C=m*f,y=m*k,m=m*b,f=l*f,k=l*k,l=l*b;a[0]=1-h-m;a[1]=q+l;a[2]=C-k;a[3]=0;a[4]=q-l;a[5]=1-d-m;a[6]=y+f;a[7]=0;a[8]=C+k;a[9]=y-f;a[10]=1-d-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(d,h,t){h.exports=function(a,c,d){var h,m,l=d[0],f=d[1];d=d[2];h=Math.sqrt(l*l+f*f+d*d);if(1E-6>Math.abs(h))return null;h=1/h;l*=h;f*=h;d*=h;h=Math.sin(c);
c=Math.cos(c);m=1-c;a[0]=l*l*m+c;a[1]=f*l*m+d*h;a[2]=d*l*m-f*h;a[3]=0;a[4]=l*f*m-d*h;a[5]=f*f*m+c;a[6]=d*f*m+l*h;a[7]=0;a[8]=l*d*m+f*h;a[9]=f*d*m-l*h;a[10]=d*d*m+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(d,h,t){h.exports=function(a,c,d){var h=c[0],m=c[1],l=c[2],f=c[3],k=h+h,b=m+m,q=l+l;c=h*k;var C=h*b,h=h*q,y=m*b,m=m*q,l=l*q,k=f*k,b=f*b,f=f*q;a[0]=1-(y+l);a[1]=C+f;a[2]=h-b;a[3]=0;a[4]=C-f;a[5]=1-(c+l);a[6]=m+k;a[7]=0;a[8]=h+b;a[9]=m-k;a[10]=1-(c+y);a[11]=0;a[12]=d[0];a[13]=
d[1];a[14]=d[2];a[15]=1;return a}},{}],52:[function(d,h,t){h.exports=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(d,h,t){h.exports=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}},{}],54:[function(d,h,t){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=1;a[1]=0;
a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(d,h,t){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=h;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],56:[function(d,h,t){h.exports=function(a,c){var d=Math.sin(c),h=Math.cos(c);a[0]=h;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;
a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(d,h,t){h.exports=function(a,c,d,h,m,l,f){var k=1/(d-c),b=1/(m-h),q=1/(l-f);a[0]=2*l*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*l*b;a[6]=0;a[7]=0;a[8]=(d+c)*k;a[9]=(m+h)*b;a[10]=(f+l)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*l*2*q;a[15]=0;return a}},{}],58:[function(d,h,t){h.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(d,h,t){h.exports={create:d("./create"),
clone:d("./clone"),copy:d("./copy"),identity:d("./identity"),transpose:d("./transpose"),invert:d("./invert"),adjoint:d("./adjoint"),determinant:d("./determinant"),multiply:d("./multiply"),translate:d("./translate"),scale:d("./scale"),rotate:d("./rotate"),rotateX:d("./rotateX"),rotateY:d("./rotateY"),rotateZ:d("./rotateZ"),fromRotation:d("./fromRotation"),fromRotationTranslation:d("./fromRotationTranslation"),fromScaling:d("./fromScaling"),fromTranslation:d("./fromTranslation"),fromXRotation:d("./fromXRotation"),
fromYRotation:d("./fromYRotation"),fromZRotation:d("./fromZRotation"),fromQuat:d("./fromQuat"),frustum:d("./frustum"),perspective:d("./perspective"),perspectiveFromFieldOfView:d("./perspectiveFromFieldOfView"),ortho:d("./ortho"),lookAt:d("./lookAt"),str:d("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,
"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(d,h,t){h.exports=function(a,c){var d=c[0],h=c[1],m=c[2],l=c[3],f=c[4],k=c[5],b=c[6],q=c[7],C=c[8],y=c[9],e=c[10],g=c[11],p=c[12],n=c[13],r=c[14],u=c[15],M=d*k-h*f,w=d*b-m*f,t=d*q-l*f,x=h*b-m*k,B=h*q-l*k,ca=m*q-l*b,na=C*n-y*p,S=C*
r-e*p,ba=C*u-g*p,A=y*r-e*n,Y=y*u-g*n,I=e*u-g*r,V=M*I-w*Y+t*A+x*ba-B*S+ca*na;if(!V)return null;V=1/V;a[0]=(k*I-b*Y+q*A)*V;a[1]=(m*Y-h*I-l*A)*V;a[2]=(n*ca-r*B+u*x)*V;a[3]=(e*B-y*ca-g*x)*V;a[4]=(b*ba-f*I-q*S)*V;a[5]=(d*I-m*ba+l*S)*V;a[6]=(r*t-p*ca-u*w)*V;a[7]=(C*ca-e*t+g*w)*V;a[8]=(f*Y-k*ba+q*na)*V;a[9]=(h*ba-d*Y-l*na)*V;a[10]=(p*B-n*t+u*M)*V;a[11]=(y*t-C*B-g*M)*V;a[12]=(k*S-f*A-b*na)*V;a[13]=(d*A-h*S+m*na)*V;a[14]=(n*w-p*x-r*M)*V;a[15]=(C*x-y*w+e*M)*V;return a}},{}],61:[function(d,h,t){var a=d("./identity");
h.exports=function(c,d,h,m){var l,f,k,b,q,C,y,e,g=d[0],p=d[1];d=d[2];k=m[0];b=m[1];f=m[2];y=h[0];m=h[1];l=h[2];if(1E-6>Math.abs(g-y)&&1E-6>Math.abs(p-m)&&1E-6>Math.abs(d-l))return a(c);h=g-y;m=p-m;y=d-l;e=1/Math.sqrt(h*h+m*m+y*y);h*=e;m*=e;y*=e;l=b*y-f*m;f=f*h-k*y;k=k*m-b*h;(e=Math.sqrt(l*l+f*f+k*k))?(e=1/e,l*=e,f*=e,k*=e):k=f=l=0;b=m*k-y*f;q=y*l-h*k;C=h*f-m*l;(e=Math.sqrt(b*b+q*q+C*C))?(e=1/e,b*=e,q*=e,C*=e):C=q=b=0;c[0]=l;c[1]=b;c[2]=h;c[3]=0;c[4]=f;c[5]=q;c[6]=m;c[7]=0;c[8]=k;c[9]=C;c[10]=y;c[11]=
0;c[12]=-(l*g+f*p+k*d);c[13]=-(b*g+q*p+C*d);c[14]=-(h*g+m*p+y*d);c[15]=1;return c}},{"./identity":58}],62:[function(d,h,t){h.exports=function(a,c,d){var h=c[0],m=c[1],l=c[2],f=c[3],k=c[4],b=c[5],q=c[6],C=c[7],y=c[8],e=c[9],g=c[10],p=c[11],n=c[12],r=c[13],u=c[14];c=c[15];var M=d[0],w=d[1],t=d[2],x=d[3];a[0]=M*h+w*k+t*y+x*n;a[1]=M*m+w*b+t*e+x*r;a[2]=M*l+w*q+t*g+x*u;a[3]=M*f+w*C+t*p+x*c;M=d[4];w=d[5];t=d[6];x=d[7];a[4]=M*h+w*k+t*y+x*n;a[5]=M*m+w*b+t*e+x*r;a[6]=M*l+w*q+t*g+x*u;a[7]=M*f+w*C+t*p+x*c;M=
d[8];w=d[9];t=d[10];x=d[11];a[8]=M*h+w*k+t*y+x*n;a[9]=M*m+w*b+t*e+x*r;a[10]=M*l+w*q+t*g+x*u;a[11]=M*f+w*C+t*p+x*c;M=d[12];w=d[13];t=d[14];x=d[15];a[12]=M*h+w*k+t*y+x*n;a[13]=M*m+w*b+t*e+x*r;a[14]=M*l+w*q+t*g+x*u;a[15]=M*f+w*C+t*p+x*c;return a}},{}],63:[function(d,h,t){h.exports=function(a,c,d,h,m,l,f){var k=1/(c-d),b=1/(h-m),q=1/(l-f);a[0]=-2*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(c+d)*k;a[13]=(m+h)*b;a[14]=(f+l)*q;a[15]=1;return a}},{}],64:[function(d,
h,t){h.exports=function(a,c,d,h,m){c=1/Math.tan(c/2);var l=1/(h-m);a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(m+h)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*m*h*l;a[15]=0;return a}},{}],65:[function(d,h,t){h.exports=function(a,c,d,h){var m=Math.tan(c.upDegrees*Math.PI/180),l=Math.tan(c.downDegrees*Math.PI/180),f=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var k=2/(f+c),b=2/(m+l);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=
-((f-c)*k*.5);a[9]=(m-l)*b*.5;a[10]=h/(d-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*d/(d-h);a[15]=0;return a}},{}],66:[function(d,h,t){h.exports=function(a,c,d,h){var m=h[0],l=h[1];h=h[2];var f=Math.sqrt(m*m+l*l+h*h),k,b,q,C,y,e,g,p,n,r,u,M,w,t,x,B,ca,na,S,ba;if(1E-6>Math.abs(f))return null;f=1/f;m*=f;l*=f;h*=f;k=Math.sin(d);b=Math.cos(d);q=1-b;d=c[0];f=c[1];C=c[2];y=c[3];e=c[4];g=c[5];p=c[6];n=c[7];r=c[8];u=c[9];M=c[10];w=c[11];t=m*m*q+b;x=l*m*q+h*k;B=h*m*q-l*k;ca=m*l*q-h*k;na=l*l*q+b;S=h*l*q+m*k;ba=m*
h*q+l*k;m=l*h*q-m*k;l=h*h*q+b;a[0]=d*t+e*x+r*B;a[1]=f*t+g*x+u*B;a[2]=C*t+p*x+M*B;a[3]=y*t+n*x+w*B;a[4]=d*ca+e*na+r*S;a[5]=f*ca+g*na+u*S;a[6]=C*ca+p*na+M*S;a[7]=y*ca+n*na+w*S;a[8]=d*ba+e*m+r*l;a[9]=f*ba+g*m+u*l;a[10]=C*ba+p*m+M*l;a[11]=y*ba+n*m+w*l;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a}},{}],67:[function(d,h,t){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var m=c[4],l=c[5],f=c[6],k=c[7],b=c[8],q=c[9],C=c[10],y=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=
c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=m*d+b*h;a[5]=l*d+q*h;a[6]=f*d+C*h;a[7]=k*d+y*h;a[8]=b*d-m*h;a[9]=q*d-l*h;a[10]=C*d-f*h;a[11]=y*d-k*h;return a}},{}],68:[function(d,h,t){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var m=c[0],l=c[1],f=c[2],k=c[3],b=c[8],q=c[9],C=c[10],y=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d-b*h;a[1]=l*d-q*h;a[2]=f*d-C*h;a[3]=k*d-y*h;a[8]=m*h+b*d;a[9]=l*h+q*d;a[10]=f*h+C*
d;a[11]=k*h+y*d;return a}},{}],69:[function(d,h,t){h.exports=function(a,c,d){var h=Math.sin(d);d=Math.cos(d);var m=c[0],l=c[1],f=c[2],k=c[3],b=c[4],q=c[5],C=c[6],y=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d+b*h;a[1]=l*d+q*h;a[2]=f*d+C*h;a[3]=k*d+y*h;a[4]=b*d-m*h;a[5]=q*d-l*h;a[6]=C*d-f*h;a[7]=y*d-k*h;return a}},{}],70:[function(d,h,t){h.exports=function(a,c,d){var h=d[0],m=d[1];d=d[2];a[0]=c[0]*h;a[1]=c[1]*h;a[2]=c[2]*h;a[3]=
c[3]*h;a[4]=c[4]*m;a[5]=c[5]*m;a[6]=c[6]*m;a[7]=c[7]*m;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],71:[function(d,h,t){h.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(d,h,t){h.exports=function(a,c,d){var h=d[0],m=d[1];d=d[2];var l,f,k,b,q,C,y,e,g,p,n,r;c===a?
(a[12]=c[0]*h+c[4]*m+c[8]*d+c[12],a[13]=c[1]*h+c[5]*m+c[9]*d+c[13],a[14]=c[2]*h+c[6]*m+c[10]*d+c[14],a[15]=c[3]*h+c[7]*m+c[11]*d+c[15]):(l=c[0],f=c[1],k=c[2],b=c[3],q=c[4],C=c[5],y=c[6],e=c[7],g=c[8],p=c[9],n=c[10],r=c[11],a[0]=l,a[1]=f,a[2]=k,a[3]=b,a[4]=q,a[5]=C,a[6]=y,a[7]=e,a[8]=g,a[9]=p,a[10]=n,a[11]=r,a[12]=l*h+q*m+g*d+c[12],a[13]=f*h+C*m+p*d+c[13],a[14]=k*h+y*m+n*d+c[14],a[15]=b*h+e*m+r*d+c[15]);return a}},{}],73:[function(d,h,t){h.exports=function(a,c){if(a===c){var d=c[1],h=c[2],m=c[3],l=
c[6],f=c[7],k=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=d;a[6]=c[9];a[7]=c[13];a[8]=h;a[9]=l;a[11]=c[14];a[12]=m;a[13]=f;a[14]=k}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a}},{}],74:[function(d,h,t){!function(a,c){if("object"==typeof t&&"object"==typeof h)h.exports=c();else if("function"==typeof define&&define.amd)define([],c);else{var d=c(),D;for(D in d)("object"==
typeof t?t:a)[D]=d[D]}}("undefined"!=typeof self?self:this,function(){return function(a){function c(h){if(d[h])return d[h].exports;var m=d[h]={i:h,l:!1,exports:{}};return a[h].call(m.exports,m,m.exports,c),m.l=!0,m.exports}var d={};return c.m=a,c.c=d,c.d=function(a,d,h){c.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:h})},c.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,d){if((1&d&&(a=c(a)),8&d)||4&d&&"object"==typeof a&&a&&a.__esModule)return a;var h=Object.create(null);if(c.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var f in a)c.d(h,f,function(c){return a[c]}.bind(null,f));return h},c.n=function(a){var d=a&&a.__esModule?function(){return a["default"]}:function(){return a};return c.d(d,"a",d),d},c.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,
c)},c.p="",c(c.s=10)}([function(a,c,d){Object.defineProperty(c,"__esModule",{value:!0});c.setMatrixArrayType=function(a){c.ARRAY_TYPE=a};c.toRadian=function(a){return a*m};c.equals=function(a,c){return Math.abs(a-c)<=h*Math.max(1,Math.abs(a),Math.abs(c))};var h=c.EPSILON=1E-6;c.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;c.RANDOM=Math.random;var m=Math.PI/180},function(a,c,d){function h(){var b=new y.ARRAY_TYPE(4);return y.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),
b}function m(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b[3]=a[3]-c[3],b}function l(b,a,c){return b[0]=a[0]*c[0],b[1]=a[1]*c[1],b[2]=a[2]*c[2],b[3]=a[3]*c[3],b}function f(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b[2]=a[2]/c[2],b[3]=a[3]/c[3],b}function k(b,a){var c=a[0]-b[0],f=a[1]-b[1],k=a[2]-b[2],d=a[3]-b[3];return Math.sqrt(c*c+f*f+k*k+d*d)}function b(b,a){var c=a[0]-b[0],f=a[1]-b[1],k=a[2]-b[2],d=a[3]-b[3];return c*c+f*f+k*k+d*d}function q(b){var a=b[0],c=b[1],f=b[2];b=b[3];
return Math.sqrt(a*a+c*c+f*f+b*b)}function C(b){var a=b[0],c=b[1],f=b[2];b=b[3];return a*a+c*c+f*f+b*b}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=h;c.clone=function(b){var a=new y.ARRAY_TYPE(4);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a};c.fromValues=function(b,a,c,f){var k=new y.ARRAY_TYPE(4);return k[0]=b,k[1]=a,k[2]=c,k[3]=f,k};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b};c.set=function(b,
a,c,f,k){return b[0]=a,b[1]=c,b[2]=f,b[3]=k,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b};c.subtract=m;c.multiply=l;c.divide=f;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b[3]=Math.ceil(a[3]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b[3]=Math.floor(a[3]),b};c.min=function(b,a,c){return b[0]=Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b[2]=Math.min(a[2],
c[2]),b[3]=Math.min(a[3],c[3]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),b[2]=Math.max(a[2],c[2]),b[3]=Math.max(a[3],c[3]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b[3]=Math.round(a[3]),b};c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b};c.scaleAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b[2]=a[2]+c[2]*f,b[3]=a[3]+c[3]*f,b};c.distance=k;c.squaredDistance=
b;c.length=q;c.squaredLength=C;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b[2]=1/a[2],b[3]=1/a[3],b};c.normalize=function(b,a){var c=a[0],f=a[1],k=a[2],d=a[3],q=c*c+f*f+k*k+d*d;0<q&&(q=1/Math.sqrt(q),b[0]=c*q,b[1]=f*q,b[2]=k*q,b[3]=d*q);return b};c.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};c.lerp=function(b,a,c,f){var k=a[0],d=a[1],q=a[2];a=a[3];return b[0]=k+f*(c[0]-k),b[1]=d+f*(c[1]-
d),b[2]=q+f*(c[2]-q),b[3]=a+f*(c[3]-a),b};c.random=function(b,a){var c,f,k,d,q,h;a=a||1;do c=2*y.RANDOM()-1,f=2*y.RANDOM()-1,q=c*c+f*f;while(1<=q);do k=2*y.RANDOM()-1,d=2*y.RANDOM()-1,h=k*k+d*d;while(1<=h);q=Math.sqrt((1-q)/h);return b[0]=a*c,b[1]=a*f,b[2]=a*k*q,b[3]=a*d*q,b};c.transformMat4=function(b,a,c){var f=a[0],k=a[1],d=a[2];a=a[3];return b[0]=c[0]*f+c[4]*k+c[8]*d+c[12]*a,b[1]=c[1]*f+c[5]*k+c[9]*d+c[13]*a,b[2]=c[2]*f+c[6]*k+c[10]*d+c[14]*a,b[3]=c[3]*f+c[7]*k+c[11]*d+c[15]*a,b};c.transformQuat=
function(b,a,c){var f=a[0],k=a[1],d=a[2],q=c[0],h=c[1],l=c[2];c=c[3];var m=c*f+h*d-l*k,y=c*k+l*f-q*d,C=c*d+q*k-h*f,f=-q*f-h*k-l*d;return b[0]=m*c+f*-q+y*-l-C*-h,b[1]=y*c+f*-h+C*-q-m*-l,b[2]=C*c+f*-l+m*-h-y*-q,b[3]=a[3],b};c.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};c.equals=function(b,a){var c=b[0],f=b[1],k=b[2],d=b[3],q=a[0],h=a[1],l=a[2],m=a[3];return Math.abs(c-q)<=y.EPSILON*Math.max(1,
Math.abs(c),Math.abs(q))&&Math.abs(f-h)<=y.EPSILON*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(k-l)<=y.EPSILON*Math.max(1,Math.abs(k),Math.abs(l))&&Math.abs(d-m)<=y.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))};var y=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.sub=m;c.mul=l;c.div=f;c.dist=k;c.sqrDist=b;c.len=q;c.sqrLen=C;c.forEach=function(){var b=h();return function(a,c,f,k,d,q){var h=
void 0,l=void 0;c||(c=4);f||(f=0);l=k?Math.min(k*c+f,a.length):a.length;for(h=f;h<l;h+=c)b[0]=a[h],b[1]=a[h+1],b[2]=a[h+2],b[3]=a[h+3],d(b,b,q),a[h]=b[0],a[h+1]=b[1],a[h+2]=b[2],a[h+3]=b[3];return a}}()},function(a,c,d){function h(){var b=new p.ARRAY_TYPE(3);return p.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function m(b){var a=b[0],e=b[1];b=b[2];return Math.sqrt(a*a+e*e+b*b)}function l(b,a,e){var g=new p.ARRAY_TYPE(3);return g[0]=b,g[1]=a,g[2]=e,g}function f(b,a,e){return b[0]=a[0]-e[0],
b[1]=a[1]-e[1],b[2]=a[2]-e[2],b}function k(b,a,e){return b[0]=a[0]*e[0],b[1]=a[1]*e[1],b[2]=a[2]*e[2],b}function b(b,a,e){return b[0]=a[0]/e[0],b[1]=a[1]/e[1],b[2]=a[2]/e[2],b}function q(b,a){var e=a[0]-b[0],g=a[1]-b[1],c=a[2]-b[2];return Math.sqrt(e*e+g*g+c*c)}function C(b,a){var e=a[0]-b[0],g=a[1]-b[1],c=a[2]-b[2];return e*e+g*g+c*c}function y(b){var a=b[0],e=b[1];b=b[2];return a*a+e*e+b*b}function e(b,a){var e=a[0],g=a[1],c=a[2],e=e*e+g*g+c*c;return 0<e&&(e=1/Math.sqrt(e),b[0]=a[0]*e,b[1]=a[1]*
e,b[2]=a[2]*e),b}function g(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=h;c.clone=function(b){var a=new p.ARRAY_TYPE(3);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a};c.length=m;c.fromValues=l;c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b};c.set=function(b,a,e,g){return b[0]=a,b[1]=e,b[2]=g,b};c.add=function(b,a,e){return b[0]=a[0]+e[0],b[1]=a[1]+e[1],b[2]=a[2]+e[2],b};
c.subtract=f;c.multiply=k;c.divide=b;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b};c.min=function(b,a,e){return b[0]=Math.min(a[0],e[0]),b[1]=Math.min(a[1],e[1]),b[2]=Math.min(a[2],e[2]),b};c.max=function(b,a,e){return b[0]=Math.max(a[0],e[0]),b[1]=Math.max(a[1],e[1]),b[2]=Math.max(a[2],e[2]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),
b[2]=Math.round(a[2]),b};c.scale=function(b,a,e){return b[0]=a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e,b};c.scaleAndAdd=function(b,a,e,g){return b[0]=a[0]+e[0]*g,b[1]=a[1]+e[1]*g,b[2]=a[2]+e[2]*g,b};c.distance=q;c.squaredDistance=C;c.squaredLength=y;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b[2]=1/a[2],b};c.normalize=e;c.dot=g;c.cross=function(b,a,e){var g=a[0],c=a[1];a=a[2];var f=e[0],k=e[1];e=e[2];return b[0]=c*e-a*k,b[1]=a*f-g*
e,b[2]=g*k-c*f,b};c.lerp=function(b,a,e,g){var c=a[0],f=a[1];a=a[2];return b[0]=c+g*(e[0]-c),b[1]=f+g*(e[1]-f),b[2]=a+g*(e[2]-a),b};c.hermite=function(b,a,e,g,c,f){var k=f*f,d=k*(2*f-3)+1,p=k*(f-2)+f,q=k*(f-1);f=k*(3-2*f);return b[0]=a[0]*d+e[0]*p+g[0]*q+c[0]*f,b[1]=a[1]*d+e[1]*p+g[1]*q+c[1]*f,b[2]=a[2]*d+e[2]*p+g[2]*q+c[2]*f,b};c.bezier=function(b,a,e,g,c,f){var k=1-f,d=k*k,p=f*f,q=d*k,d=3*f*d,k=3*p*k;f*=p;return b[0]=a[0]*q+e[0]*d+g[0]*k+c[0]*f,b[1]=a[1]*q+e[1]*d+g[1]*k+c[1]*f,b[2]=a[2]*q+e[2]*
d+g[2]*k+c[2]*f,b};c.random=function(b,a){a=a||1;var e=2*p.RANDOM()*Math.PI,g=2*p.RANDOM()-1,c=Math.sqrt(1-g*g)*a;return b[0]=Math.cos(e)*c,b[1]=Math.sin(e)*c,b[2]=g*a,b};c.transformMat4=function(b,a,e){var g=a[0],c=a[1];a=a[2];var f=e[3]*g+e[7]*c+e[11]*a+e[15];return f=f||1,b[0]=(e[0]*g+e[4]*c+e[8]*a+e[12])/f,b[1]=(e[1]*g+e[5]*c+e[9]*a+e[13])/f,b[2]=(e[2]*g+e[6]*c+e[10]*a+e[14])/f,b};c.transformMat3=function(b,a,e){var g=a[0],c=a[1];a=a[2];return b[0]=g*e[0]+c*e[3]+a*e[6],b[1]=g*e[1]+c*e[4]+a*e[7],
b[2]=g*e[2]+c*e[5]+a*e[8],b};c.transformQuat=function(b,a,e){var g=e[0],c=e[1],f=e[2],k=a[0],d=a[1];a=a[2];var p=c*a-f*d,q=f*k-g*a,h=g*d-c*k,l=c*h-f*q,f=f*p-g*h,g=g*q-c*p;e=2*e[3];return p*=e,q*=e,h*=e,l*=2,f*=2,g*=2,b[0]=k+p+l,b[1]=d+q+f,b[2]=a+h+g,b};c.rotateX=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[0],f[1]=c[1]*Math.cos(g)-c[2]*Math.sin(g),f[2]=c[1]*Math.sin(g)+c[2]*Math.cos(g),b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.rotateY=function(b,
a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[2]*Math.sin(g)+c[0]*Math.cos(g),f[1]=c[1],f[2]=c[2]*Math.cos(g)-c[0]*Math.sin(g),b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.rotateZ=function(b,a,e,g){var c=[],f=[];return c[0]=a[0]-e[0],c[1]=a[1]-e[1],c[2]=a[2]-e[2],f[0]=c[0]*Math.cos(g)-c[1]*Math.sin(g),f[1]=c[0]*Math.sin(g)+c[1]*Math.cos(g),f[2]=c[2],b[0]=f[0]+e[0],b[1]=f[1]+e[1],b[2]=f[2]+e[2],b};c.angle=function(b,a){var c=l(b[0],b[1],b[2]),f=l(a[0],a[1],a[2]);
e(c,c);e(f,f);c=g(c,f);return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]};c.equals=function(b,a){var e=b[0],g=b[1],c=b[2],f=a[0],k=a[1],d=a[2];return Math.abs(e-f)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(g-k)<=p.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(c-d)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))};var p=function(b){if(b&&b.__esModule)return b;
var a={};if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a["default"]=b,a}(d(0));c.sub=f;c.mul=k;c.div=b;c.dist=q;c.sqrDist=C;c.len=m;c.sqrLen=y;c.forEach=function(){var b=h();return function(a,e,g,c,f,k){var d=void 0,p=void 0;e||(e=3);g||(g=0);p=c?Math.min(c*e+g,a.length):a.length;for(d=g;d<p;d+=e)b[0]=a[d],b[1]=a[d+1],b[2]=a[d+2],f(b,b,k),a[d]=b[0],a[d+1]=b[1],a[d+2]=b[2];return a}}()},function(a,c,d){function h(b){if(b&&b.__esModule)return b;var a={};if(null!=
b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a["default"]=b,a}function m(){var b=new q.ARRAY_TYPE(4);return q.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function l(b,a,e){e*=.5;var c=Math.sin(e);return b[0]=c*a[0],b[1]=c*a[1],b[2]=c*a[2],b[3]=Math.cos(e),b}function f(b,a,e){var c=a[0],f=a[1],k=a[2];a=a[3];var d=e[0],q=e[1],h=e[2];e=e[3];return b[0]=c*e+a*d+f*h-k*q,b[1]=f*e+a*q+k*d-c*h,b[2]=k*e+a*h+c*q-f*d,b[3]=a*e-c*d-f*q-k*h,b}function k(b,a,e,c){var f=
a[0],k=a[1],d=a[2];a=a[3];var h=e[0],l=e[1],m=e[2];e=e[3];var y=void 0,C=void 0,t=void 0,z=void 0,A=void 0;return 0>(C=f*h+k*l+d*m+a*e)&&(C=-C,h=-h,l=-l,m=-m,e=-e),1-C>q.EPSILON?(y=Math.acos(C),t=Math.sin(y),z=Math.sin((1-c)*y)/t,A=Math.sin(c*y)/t):(z=1-c,A=c),b[0]=z*f+A*h,b[1]=z*k+A*l,b[2]=z*d+A*m,b[3]=z*a+A*e,b}function b(b,a){var e=a[0]+a[4]+a[8],c=void 0;if(0<e)c=Math.sqrt(e+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=
2);var f=(e+1)%3,k=(e+2)%3,c=Math.sqrt(a[3*e+e]-a[3*f+f]-a[3*k+k]+1);b[e]=.5*c;c=.5/c;b[3]=(a[3*f+k]-a[3*k+f])*c;b[f]=(a[3*f+e]+a[3*e+f])*c;b[k]=(a[3*k+e]+a[3*e+k])*c}return b}Object.defineProperty(c,"__esModule",{value:!0});c.setAxes=c.sqlerp=c.rotationTo=c.equals=c.exactEquals=c.normalize=c.sqrLen=c.squaredLength=c.len=c.length=c.lerp=c.dot=c.scale=c.mul=c.add=c.set=c.copy=c.fromValues=c.clone=void 0;c.create=m;c.identity=function(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b};c.setAxisAngle=l;c.getAxisAngle=
function(b,a){var e=2*Math.acos(a[3]),c=Math.sin(e/2);c>q.EPSILON?(b[0]=a[0]/c,b[1]=a[1]/c,b[2]=a[2]/c):(b[0]=1,b[1]=0,b[2]=0);return e};c.multiply=f;c.rotateX=function(b,a,e){e*=.5;var c=a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e+a*d,b[1]=f*e+k*d,b[2]=k*e-f*d,b[3]=a*e-c*d,b};c.rotateY=function(b,a,e){e*=.5;var c=a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e-k*d,b[1]=f*e+a*d,b[2]=k*e+c*d,b[3]=a*e-f*d,b};c.rotateZ=function(b,a,e){e*=.5;var c=
a[0],f=a[1],k=a[2];a=a[3];var d=Math.sin(e);e=Math.cos(e);return b[0]=c*e+f*d,b[1]=f*e-c*d,b[2]=k*e+a*d,b[3]=a*e-k*d,b};c.calculateW=function(b,a){var e=a[0],c=a[1],f=a[2];return b[0]=e,b[1]=c,b[2]=f,b[3]=Math.sqrt(Math.abs(1-e*e-c*c-f*f)),b};c.slerp=k;c.random=function(b){var a=q.RANDOM(),e=q.RANDOM(),c=q.RANDOM(),f=Math.sqrt(1-a),a=Math.sqrt(a);return b[0]=f*Math.sin(2*Math.PI*e),b[1]=f*Math.cos(2*Math.PI*e),b[2]=a*Math.sin(2*Math.PI*c),b[3]=a*Math.cos(2*Math.PI*c),b};c.invert=function(b,a){var e=
a[0],c=a[1],f=a[2],k=a[3],d=e*e+c*c+f*f+k*k,d=d?1/d:0;return b[0]=-e*d,b[1]=-c*d,b[2]=-f*d,b[3]=k*d,b};c.conjugate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b};c.fromMat3=b;c.fromEuler=function(b,a,e,c){var f=.5*Math.PI/180;a*=f;e*=f;c*=f;f=Math.sin(a);a=Math.cos(a);var k=Math.sin(e);e=Math.cos(e);var d=Math.sin(c);c=Math.cos(c);return b[0]=f*e*c-a*k*d,b[1]=a*k*c+f*e*d,b[2]=a*e*d-f*k*c,b[3]=a*e*c+f*k*d,b};c.str=function(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};
var q=h(d(0)),C=h(d(5)),y=h(d(2));a=h(d(1));c.clone=a.clone;c.fromValues=a.fromValues;c.copy=a.copy;c.set=a.set;c.add=a.add;c.mul=f;c.scale=a.scale;c.dot=a.dot;c.lerp=a.lerp;d=c.length=a.length;d=(c.len=d,c.squaredLength=a.squaredLength);var e=(c.sqrLen=d,c.normalize=a.normalize);c.exactEquals=a.exactEquals;c.equals=a.equals;c.rotationTo=function(){var b=y.create(),a=y.fromValues(1,0,0),c=y.fromValues(0,1,0);return function(f,k,d){var q=y.dot(k,d);return-.999999>q?(y.cross(b,a,k),1E-6>y.len(b)&&y.cross(b,
c,k),y.normalize(b,b),l(f,b,Math.PI),f):.999999<q?(f[0]=0,f[1]=0,f[2]=0,f[3]=1,f):(y.cross(b,k,d),f[0]=b[0],f[1]=b[1],f[2]=b[2],f[3]=1+q,e(f,f))}}();c.sqlerp=function(){var b=m(),a=m();return function(e,c,f,d,q,h){return k(b,c,q,h),k(a,f,d,h),k(e,b,a,2*h*(1-h)),e}}();c.setAxes=function(){var a=C.create();return function(c,f,k,d){return a[0]=k[0],a[3]=k[1],a[6]=k[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=-f[0],a[5]=-f[1],a[8]=-f[2],e(c,b(c,a))}}()},function(a,c,d){function h(b){return b[0]=1,b[1]=0,b[2]=
0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function m(b,a,c){var f=a[0],e=a[1],g=a[2],k=a[3],d=a[4],h=a[5],l=a[6],m=a[7],w=a[8],t=a[9],x=a[10],B=a[11],z=a[12],D=a[13],S=a[14];a=a[15];var ba=c[0],A=c[1],Y=c[2],I=c[3];return b[0]=ba*f+A*d+Y*w+I*z,b[1]=ba*e+A*h+Y*t+I*D,b[2]=ba*g+A*l+Y*x+I*S,b[3]=ba*k+A*m+Y*B+I*a,ba=c[4],A=c[5],Y=c[6],I=c[7],b[4]=ba*f+A*d+Y*w+I*z,b[5]=ba*e+A*h+Y*t+I*D,b[6]=ba*g+A*l+Y*x+I*S,b[7]=ba*k+A*m+Y*B+I*a,ba=c[8],A=c[9],
Y=c[10],I=c[11],b[8]=ba*f+A*d+Y*w+I*z,b[9]=ba*e+A*h+Y*t+I*D,b[10]=ba*g+A*l+Y*x+I*S,b[11]=ba*k+A*m+Y*B+I*a,ba=c[12],A=c[13],Y=c[14],I=c[15],b[12]=ba*f+A*d+Y*w+I*z,b[13]=ba*e+A*h+Y*t+I*D,b[14]=ba*g+A*l+Y*x+I*S,b[15]=ba*k+A*m+Y*B+I*a,b}function l(b,a,c){var f=a[0],e=a[1],g=a[2],k=a[3],d=f+f,h=e+e,l=g+g;a=f*d;var m=f*h,f=f*l,w=e*h,e=e*l,g=g*l,d=k*d,h=k*h,k=k*l;return b[0]=1-(w+g),b[1]=m+k,b[2]=f-h,b[3]=0,b[4]=m-k,b[5]=1-(a+g),b[6]=e+d,b[7]=0,b[8]=f+h,b[9]=e-d,b[10]=1-(a+w),b[11]=0,b[12]=c[0],b[13]=c[1],
b[14]=c[2],b[15]=1,b}function f(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b[3]=a[3]-c[3],b[4]=a[4]-c[4],b[5]=a[5]-c[5],b[6]=a[6]-c[6],b[7]=a[7]-c[7],b[8]=a[8]-c[8],b[9]=a[9]-c[9],b[10]=a[10]-c[10],b[11]=a[11]-c[11],b[12]=a[12]-c[12],b[13]=a[13]-c[13],b[14]=a[14]-c[14],b[15]=a[15]-c[15],b}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var b=new k.ARRAY_TYPE(16);k.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=
0,b[11]=0,b[12]=0,b[13]=0,b[14]=0);return b[0]=1,b[5]=1,b[10]=1,b[15]=1,b};c.clone=function(b){var a=new k.ARRAY_TYPE(16);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],
b};c.fromValues=function(b,a,c,f,e,g,d,n,h,l,m,w,t,x,B,z){var D=new k.ARRAY_TYPE(16);return D[0]=b,D[1]=a,D[2]=c,D[3]=f,D[4]=e,D[5]=g,D[6]=d,D[7]=n,D[8]=h,D[9]=l,D[10]=m,D[11]=w,D[12]=t,D[13]=x,D[14]=B,D[15]=z,D};c.set=function(b,a,c,f,e,g,k,d,h,l,m,w,t,x,B,z,D){return b[0]=a,b[1]=c,b[2]=f,b[3]=e,b[4]=g,b[5]=k,b[6]=d,b[7]=h,b[8]=l,b[9]=m,b[10]=w,b[11]=t,b[12]=x,b[13]=B,b[14]=z,b[15]=D,b};c.identity=h;c.transpose=function(b,a){if(b===a){var c=a[1],f=a[2],e=a[3],g=a[6],k=a[7],d=a[11];b[1]=a[4];b[2]=
a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=f;b[9]=g;b[11]=a[14];b[12]=e;b[13]=k;b[14]=d}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};c.invert=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=a[4],d=a[5],h=a[6],l=a[7],m=a[8],w=a[9],t=a[10],x=a[11],B=a[12],z=a[13],D=a[14],S=a[15],ba=c*d-f*k,A=c*h-e*k,Y=c*l-g*k,I=f*h-e*d,V=f*l-g*d,K=e*l-g*h,ja=m*z-w*B,T=m*
D-t*B,ha=m*S-x*B,la=w*D-t*z,Qa=w*S-x*z,Bb=t*S-x*D,oa=ba*Bb-A*Qa+Y*la+I*ha-V*T+K*ja;return oa?(oa=1/oa,b[0]=(d*Bb-h*Qa+l*la)*oa,b[1]=(e*Qa-f*Bb-g*la)*oa,b[2]=(z*K-D*V+S*I)*oa,b[3]=(t*V-w*K-x*I)*oa,b[4]=(h*ha-k*Bb-l*T)*oa,b[5]=(c*Bb-e*ha+g*T)*oa,b[6]=(D*Y-B*K-S*A)*oa,b[7]=(m*K-t*Y+x*A)*oa,b[8]=(k*Qa-d*ha+l*ja)*oa,b[9]=(f*ha-c*Qa-g*ja)*oa,b[10]=(B*V-z*Y+S*ba)*oa,b[11]=(w*Y-m*V-x*ba)*oa,b[12]=(d*T-k*la-h*ja)*oa,b[13]=(c*la-f*T+e*ja)*oa,b[14]=(z*A-B*I-D*ba)*oa,b[15]=(m*I-w*A+t*ba)*oa,b):null};c.adjoint=
function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=a[4],d=a[5],h=a[6],l=a[7],m=a[8],w=a[9],t=a[10],x=a[11],B=a[12],z=a[13],D=a[14],S=a[15];return b[0]=d*(t*S-x*D)-w*(h*S-l*D)+z*(h*x-l*t),b[1]=-(f*(t*S-x*D)-w*(e*S-g*D)+z*(e*x-g*t)),b[2]=f*(h*S-l*D)-d*(e*S-g*D)+z*(e*l-g*h),b[3]=-(f*(h*x-l*t)-d*(e*x-g*t)+w*(e*l-g*h)),b[4]=-(k*(t*S-x*D)-m*(h*S-l*D)+B*(h*x-l*t)),b[5]=c*(t*S-x*D)-m*(e*S-g*D)+B*(e*x-g*t),b[6]=-(c*(h*S-l*D)-k*(e*S-g*D)+B*(e*l-g*h)),b[7]=c*(h*x-l*t)-k*(e*x-g*t)+m*(e*l-g*h),b[8]=k*(w*S-x*z)-m*
(d*S-l*z)+B*(d*x-l*w),b[9]=-(c*(w*S-x*z)-m*(f*S-g*z)+B*(f*x-g*w)),b[10]=c*(d*S-l*z)-k*(f*S-g*z)+B*(f*l-g*d),b[11]=-(c*(d*x-l*w)-k*(f*x-g*w)+m*(f*l-g*d)),b[12]=-(k*(w*D-t*z)-m*(d*D-h*z)+B*(d*t-h*w)),b[13]=c*(w*D-t*z)-m*(f*D-e*z)+B*(f*t-e*w),b[14]=-(c*(d*D-h*z)-k*(f*D-e*z)+B*(f*h-e*d)),b[15]=c*(d*t-h*w)-k*(f*t-e*w)+m*(f*h-e*d),b};c.determinant=function(b){var a=b[0],c=b[1],f=b[2],e=b[3],g=b[4],k=b[5],d=b[6],h=b[7],l=b[8],m=b[9],w=b[10],t=b[11],x=b[12],B=b[13],z=b[14];b=b[15];return(a*k-c*g)*(w*b-t*
z)-(a*d-f*g)*(m*b-t*B)+(a*h-e*g)*(m*z-w*B)+(c*d-f*k)*(l*b-t*x)-(c*h-e*k)*(l*z-w*x)+(f*h-e*d)*(l*B-m*x)};c.multiply=m;c.translate=function(b,a,c){var f=c[0],e=c[1];c=c[2];var g=void 0,k=void 0,d=void 0,h=void 0,l=void 0,m=void 0,w=void 0,t=void 0,x=void 0,B=void 0,z=void 0,D=void 0;a===b?(b[12]=a[0]*f+a[4]*e+a[8]*c+a[12],b[13]=a[1]*f+a[5]*e+a[9]*c+a[13],b[14]=a[2]*f+a[6]*e+a[10]*c+a[14],b[15]=a[3]*f+a[7]*e+a[11]*c+a[15]):(g=a[0],k=a[1],d=a[2],h=a[3],l=a[4],m=a[5],w=a[6],t=a[7],x=a[8],B=a[9],z=a[10],
D=a[11],b[0]=g,b[1]=k,b[2]=d,b[3]=h,b[4]=l,b[5]=m,b[6]=w,b[7]=t,b[8]=x,b[9]=B,b[10]=z,b[11]=D,b[12]=g*f+l*e+x*c+a[12],b[13]=k*f+m*e+B*c+a[13],b[14]=d*f+w*e+z*c+a[14],b[15]=h*f+t*e+D*c+a[15]);return b};c.scale=function(b,a,c){var f=c[0],e=c[1];c=c[2];return b[0]=a[0]*f,b[1]=a[1]*f,b[2]=a[2]*f,b[3]=a[3]*f,b[4]=a[4]*e,b[5]=a[5]*e,b[6]=a[6]*e,b[7]=a[7]*e,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};c.rotate=function(b,a,c,f){var e=f[0],g=f[1];
f=f[2];var d=Math.sqrt(e*e+g*g+f*f),h=void 0,l=void 0,m=void 0,t=void 0,w=void 0,z=void 0,x=void 0,B=void 0,D=void 0,na=void 0,S=void 0,ba=void 0,A=void 0,Y=void 0,I=void 0,V=void 0,K=void 0,ja=void 0,T=void 0,ha=void 0,la=void 0,Qa=void 0,l=h=void 0;if(d<k.EPSILON)return null;e*=d=1/d;g*=d;f*=d;h=Math.sin(c);l=Math.cos(c);m=1-l;t=a[0];w=a[1];z=a[2];x=a[3];B=a[4];D=a[5];na=a[6];S=a[7];ba=a[8];A=a[9];Y=a[10];I=a[11];V=e*e*m+l;K=g*e*m+f*h;ja=f*e*m-g*h;T=e*g*m-f*h;ha=g*g*m+l;la=f*g*m+e*h;Qa=e*f*m+g*
h;h=g*f*m-e*h;l=f*f*m+l;b[0]=t*V+B*K+ba*ja;b[1]=w*V+D*K+A*ja;b[2]=z*V+na*K+Y*ja;b[3]=x*V+S*K+I*ja;b[4]=t*T+B*ha+ba*la;b[5]=w*T+D*ha+A*la;b[6]=z*T+na*ha+Y*la;b[7]=x*T+S*ha+I*la;b[8]=t*Qa+B*h+ba*l;b[9]=w*Qa+D*h+A*l;b[10]=z*Qa+na*h+Y*l;b[11]=x*Qa+S*h+I*l;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};c.rotateX=function(b,a,c){var f=Math.sin(c);c=Math.cos(c);var e=a[4],g=a[5],k=a[6],d=a[7],h=a[8],l=a[9],m=a[10],w=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=
a[13],b[14]=a[14],b[15]=a[15]);return b[4]=e*c+h*f,b[5]=g*c+l*f,b[6]=k*c+m*f,b[7]=d*c+w*f,b[8]=h*c-e*f,b[9]=l*c-g*f,b[10]=m*c-k*f,b[11]=w*c-d*f,b};c.rotateY=function(b,a,c){var f=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],k=a[2],d=a[3],h=a[8],l=a[9],m=a[10],w=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[0]=e*c-h*f,b[1]=g*c-l*f,b[2]=k*c-m*f,b[3]=d*c-w*f,b[8]=e*f+h*c,b[9]=g*f+l*c,b[10]=k*f+m*c,b[11]=d*f+w*c,b};c.rotateZ=function(b,
a,c){var f=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],k=a[2],d=a[3],h=a[4],l=a[5],m=a[6],w=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[0]=e*c+h*f,b[1]=g*c+l*f,b[2]=k*c+m*f,b[3]=d*c+w*f,b[4]=h*c-e*f,b[5]=l*c-g*f,b[6]=m*c-k*f,b[7]=w*c-d*f,b};c.fromTranslation=function(b,a){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=a[0],b[13]=a[1],b[14]=a[2],b[15]=1,b};c.fromScaling=function(b,
a){return b[0]=a[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=a[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromRotation=function(b,a,c){var f=c[0],e=c[1];c=c[2];var g=Math.sqrt(f*f+e*e+c*c),d=void 0,h=void 0,l=void 0;return g<k.EPSILON?null:(f*=g=1/g,e*=g,c*=g,d=Math.sin(a),h=Math.cos(a),l=1-h,b[0]=f*f*l+h,b[1]=e*f*l+c*d,b[2]=c*f*l-e*d,b[3]=0,b[4]=f*e*l-c*d,b[5]=e*e*l+h,b[6]=c*e*l+f*d,b[7]=0,b[8]=f*c*l+e*d,b[9]=e*c*l-f*d,b[10]=c*c*l+h,b[11]=0,b[12]=0,b[13]=0,b[14]=
0,b[15]=1,b)};c.fromXRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=f,b[6]=c,b[7]=0,b[8]=0,b[9]=-c,b[10]=f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromYRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=f,b[1]=0,b[2]=-c,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=c,b[9]=0,b[10]=f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromZRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=f,b[1]=c,b[2]=0,b[3]=0,b[4]=-c,
b[5]=f,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromRotationTranslation=l;c.fromQuat2=function(b,a){var c=new k.ARRAY_TYPE(3),f=-a[0],e=-a[1],g=-a[2],d=a[3],h=a[4],m=a[5],u=a[6],t=a[7],w=f*f+e*e+g*g+d*d;0<w?(c[0]=2*(h*d+t*f+m*g-u*e)/w,c[1]=2*(m*d+t*e+u*f-h*g)/w,c[2]=2*(u*d+t*g+h*e-m*f)/w):(c[0]=2*(h*d+t*f+m*g-u*e),c[1]=2*(m*d+t*e+u*f-h*g),c[2]=2*(u*d+t*g+h*e-m*f));return l(b,a,c),b};c.getTranslation=function(b,a){return b[0]=a[12],b[1]=a[13],b[2]=a[14],b};c.getScaling=
function(b,a){var c=a[0],f=a[1],e=a[2],g=a[4],k=a[5],d=a[6],h=a[8],l=a[9],m=a[10];return b[0]=Math.sqrt(c*c+f*f+e*e),b[1]=Math.sqrt(g*g+k*k+d*d),b[2]=Math.sqrt(h*h+l*l+m*m),b};c.getRotation=function(b,a){var c=a[0]+a[5]+a[10],f=0;0<c?(f=2*Math.sqrt(c+1),b[3]=.25*f,b[0]=(a[6]-a[9])/f,b[1]=(a[8]-a[2])/f,b[2]=(a[1]-a[4])/f):a[0]>a[5]&&a[0]>a[10]?(f=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/f,b[0]=.25*f,b[1]=(a[1]+a[4])/f,b[2]=(a[8]+a[2])/f):a[5]>a[10]?(f=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-
a[2])/f,b[0]=(a[1]+a[4])/f,b[1]=.25*f,b[2]=(a[6]+a[9])/f):(f=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/f,b[0]=(a[8]+a[2])/f,b[1]=(a[6]+a[9])/f,b[2]=.25*f);return b};c.fromRotationTranslationScale=function(b,a,c,f){var e=a[0],g=a[1],k=a[2],d=a[3],h=e+e,l=g+g,m=k+k;a=e*h;var w=e*l,e=e*m,t=g*l,g=g*m,k=k*m,h=d*h,l=d*l,d=d*m,m=f[0],x=f[1];f=f[2];return b[0]=(1-(t+k))*m,b[1]=(w+d)*m,b[2]=(e-l)*m,b[3]=0,b[4]=(w-d)*x,b[5]=(1-(a+k))*x,b[6]=(g+h)*x,b[7]=0,b[8]=(e+l)*f,b[9]=(g-h)*f,b[10]=(1-(a+t))*f,b[11]=
0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b};c.fromRotationTranslationScaleOrigin=function(b,a,c,f,e){var g=a[0],k=a[1],d=a[2],h=a[3],l=g+g,m=k+k,w=d+d;a=g*l;var t=g*m,x=g*w,g=k*m,k=k*w,B=d*w,d=h*l,m=h*m,z=h*w,D=f[0],S=f[1],w=f[2];f=e[0];h=e[1];e=e[2];var l=(1-(g+B))*D,ba=(t+z)*D,D=(x-m)*D,t=(t-z)*S,B=(1-(a+B))*S,S=(k+d)*S,x=(x+m)*w,k=(k-d)*w;a=(1-(a+g))*w;return b[0]=l,b[1]=ba,b[2]=D,b[3]=0,b[4]=t,b[5]=B,b[6]=S,b[7]=0,b[8]=x,b[9]=k,b[10]=a,b[11]=0,b[12]=c[0]+f-(l*f+t*h+x*e),b[13]=c[1]+h-(ba*f+B*
h+k*e),b[14]=c[2]+e-(D*f+S*h+a*e),b[15]=1,b};c.fromQuat=function(b,a){var c=a[0],f=a[1],e=a[2],g=a[3],k=c+c,d=f+f,h=e+e,c=c*k,l=f*k,f=f*d,m=e*k,w=e*d,e=e*h,k=g*k,d=g*d,g=g*h;return b[0]=1-f-e,b[1]=l+g,b[2]=m-d,b[3]=0,b[4]=l-g,b[5]=1-c-e,b[6]=w+k,b[7]=0,b[8]=m+d,b[9]=w-k,b[10]=1-c-f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.frustum=function(b,a,c,f,e,g,k){var d=1/(c-a),h=1/(e-f),l=1/(g-k);return b[0]=2*g*d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=2*g*h,b[6]=0,b[7]=0,b[8]=(c+a)*d,b[9]=(e+f)*h,b[10]=(k+g)*
l,b[11]=-1,b[12]=0,b[13]=0,b[14]=k*g*2*l,b[15]=0,b};c.perspective=function(b,a,c,f,e){a=1/Math.tan(a/2);var g=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=e&&e!==1/0?(g=1/(f-e),b[10]=(e+f)*g,b[14]=2*e*f*g):(b[10]=-1,b[14]=-2*f);return b};c.perspectiveFromFieldOfView=function(b,a,c,f){var e=Math.tan(a.upDegrees*Math.PI/180),g=Math.tan(a.downDegrees*Math.PI/180),k=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/
180);var d=2/(k+a),h=2/(e+g);return b[0]=d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=h,b[6]=0,b[7]=0,b[8]=-(k-a)*d*.5,b[9]=(e-g)*h*.5,b[10]=f/(c-f),b[11]=-1,b[12]=0,b[13]=0,b[14]=f*c/(c-f),b[15]=0,b};c.ortho=function(b,a,c,f,e,g,k){var d=1/(a-c),h=1/(f-e),l=1/(g-k);return b[0]=-2*d,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*h,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*l,b[11]=0,b[12]=(a+c)*d,b[13]=(e+f)*h,b[14]=(k+g)*l,b[15]=1,b};c.lookAt=function(b,a,c,f){var e=void 0,g=void 0,d=void 0,l=void 0,m=void 0,u=void 0,t=void 0,
w=void 0,z=void 0,x=void 0,B=a[0],ca=a[1];a=a[2];d=f[0];l=f[1];f=f[2];t=c[0];w=c[1];c=c[2];if(Math.abs(B-t)<k.EPSILON&&Math.abs(ca-w)<k.EPSILON&&Math.abs(a-c)<k.EPSILON)return h(b);t=B-t;w=ca-w;z=a-c;x=1/Math.sqrt(t*t+w*w+z*z);e=l*(z*=x)-f*(w*=x);g=f*(t*=x)-d*z;d=d*w-l*t;(x=Math.sqrt(e*e+g*g+d*d))?(e*=x=1/x,g*=x,d*=x):(e=0,g=0,d=0);l=w*d-z*g;m=z*e-t*d;u=t*g-w*e;(x=Math.sqrt(l*l+m*m+u*u))?(l*=x=1/x,m*=x,u*=x):(l=0,m=0,u=0);return b[0]=e,b[1]=l,b[2]=t,b[3]=0,b[4]=g,b[5]=m,b[6]=w,b[7]=0,b[8]=d,b[9]=
u,b[10]=z,b[11]=0,b[12]=-(e*B+g*ca+d*a),b[13]=-(l*B+m*ca+u*a),b[14]=-(t*B+w*ca+z*a),b[15]=1,b};c.targetTo=function(b,a,c,f){var e=a[0],g=a[1];a=a[2];var k=f[0],d=f[1],h=f[2];f=e-c[0];var l=g-c[1];c=a-c[2];var m=f*f+l*l+c*c;0<m&&(m=1/Math.sqrt(m),f*=m,l*=m,c*=m);var w=d*c-h*l,h=h*f-k*c,k=k*l-d*f;0<(m=w*w+h*h+k*k)&&(m=1/Math.sqrt(m),w*=m,h*=m,k*=m);return b[0]=w,b[1]=h,b[2]=k,b[3]=0,b[4]=l*k-c*h,b[5]=c*w-f*k,b[6]=f*h-l*w,b[7]=0,b[8]=f,b[9]=l,b[10]=c,b[11]=0,b[12]=e,b[13]=g,b[14]=a,b[15]=1,b};c.str=
function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};c.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],
2))};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b[4]=a[4]+c[4],b[5]=a[5]+c[5],b[6]=a[6]+c[6],b[7]=a[7]+c[7],b[8]=a[8]+c[8],b[9]=a[9]+c[9],b[10]=a[10]+c[10],b[11]=a[11]+c[11],b[12]=a[12]+c[12],b[13]=a[13]+c[13],b[14]=a[14]+c[14],b[15]=a[15]+c[15],b};c.subtract=f;c.multiplyScalar=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b[4]=a[4]*c,b[5]=a[5]*c,b[6]=a[6]*c,b[7]=a[7]*c,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=
a[12]*c,b[13]=a[13]*c,b[14]=a[14]*c,b[15]=a[15]*c,b};c.multiplyScalarAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b[2]=a[2]+c[2]*f,b[3]=a[3]+c[3]*f,b[4]=a[4]+c[4]*f,b[5]=a[5]+c[5]*f,b[6]=a[6]+c[6]*f,b[7]=a[7]+c[7]*f,b[8]=a[8]+c[8]*f,b[9]=a[9]+c[9]*f,b[10]=a[10]+c[10]*f,b[11]=a[11]+c[11]*f,b[12]=a[12]+c[12]*f,b[13]=a[13]+c[13]*f,b[14]=a[14]+c[14]*f,b[15]=a[15]+c[15]*f,b};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===
a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};c.equals=function(b,a){var c=b[0],f=b[1],e=b[2],g=b[3],d=b[4],h=b[5],l=b[6],m=b[7],t=b[8],w=b[9],z=b[10],x=b[11],B=b[12],D=b[13],na=b[14],S=b[15],ba=a[0],A=a[1],Y=a[2],I=a[3],V=a[4],K=a[5],ja=a[6],T=a[7],ha=a[8],la=a[9],Qa=a[10],Bb=a[11],oa=a[12],Oa=a[13],W=a[14],P=a[15];return Math.abs(c-ba)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(ba))&&Math.abs(f-
A)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(e-Y)<=k.EPSILON*Math.max(1,Math.abs(e),Math.abs(Y))&&Math.abs(g-I)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(d-V)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(V))&&Math.abs(h-K)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(K))&&Math.abs(l-ja)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(ja))&&Math.abs(m-T)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(t-ha)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(ha))&&Math.abs(w-la)<=
k.EPSILON*Math.max(1,Math.abs(w),Math.abs(la))&&Math.abs(z-Qa)<=k.EPSILON*Math.max(1,Math.abs(z),Math.abs(Qa))&&Math.abs(x-Bb)<=k.EPSILON*Math.max(1,Math.abs(x),Math.abs(Bb))&&Math.abs(B-oa)<=k.EPSILON*Math.max(1,Math.abs(B),Math.abs(oa))&&Math.abs(D-Oa)<=k.EPSILON*Math.max(1,Math.abs(D),Math.abs(Oa))&&Math.abs(na-W)<=k.EPSILON*Math.max(1,Math.abs(na),Math.abs(W))&&Math.abs(S-P)<=k.EPSILON*Math.max(1,Math.abs(S),Math.abs(P))};var k=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.mul=m;c.sub=f},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2],e=c[3],g=c[4],p=c[5],n=c[6],r=c[7];c=c[8];var u=b[0],t=b[1],w=b[2],z=b[3],x=b[4],B=b[5],D=b[6],na=b[7];b=b[8];return a[0]=u*d+t*e+w*n,a[1]=u*l+t*g+w*r,a[2]=u*m+t*p+w*c,a[3]=z*d+x*e+B*n,a[4]=z*l+x*g+B*r,a[5]=z*m+x*p+B*c,a[6]=D*d+na*e+b*n,a[7]=D*l+na*g+b*r,a[8]=D*m+na*p+b*c,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=
c[5]-b[5],a[6]=c[6]-b[6],a[7]=c[7]-b[7],a[8]=c[8]-b[8],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new l.ARRAY_TYPE(9);l.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};c.fromMat4=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[4],a[4]=c[5],a[5]=c[6],a[6]=c[8],a[7]=c[9],a[8]=c[10],a};c.clone=function(a){var c=new l.ARRAY_TYPE(9);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],
c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromValues=function(a,c,b,d,h,m,e,g,p){var n=new l.ARRAY_TYPE(9);return n[0]=a,n[1]=c,n[2]=b,n[3]=d,n[4]=h,n[5]=m,n[6]=e,n[7]=g,n[8]=p,n};c.set=function(a,c,b,d,h,l,e,g,p,m){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a[4]=l,a[5]=e,a[6]=g,a[7]=p,a[8]=m,a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=
1,a};c.transpose=function(a,c){if(a===c){var b=c[1],d=c[2],h=c[5];a[1]=c[3];a[2]=c[6];a[3]=b;a[5]=c[7];a[6]=d;a[7]=h}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],p=c[6],m=c[7],r=c[8],u=r*e-g*m,t=-r*l+g*p,w=m*l-e*p,z=b*u+d*t+h*w;return z?(z=1/z,a[0]=u*z,a[1]=(-r*d+h*m)*z,a[2]=(g*d-h*e)*z,a[3]=t*z,a[4]=(r*b-h*p)*z,a[5]=(-g*b+h*l)*z,a[6]=w*z,a[7]=(-m*b+d*p)*z,a[8]=(e*b-d*l)*
z,a):null};c.adjoint=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],p=c[6],m=c[7],r=c[8];return a[0]=e*r-g*m,a[1]=h*m-d*r,a[2]=d*g-h*e,a[3]=g*p-l*r,a[4]=b*r-h*p,a[5]=h*l-b*g,a[6]=l*m-e*p,a[7]=d*p-b*m,a[8]=b*e-d*l,a};c.determinant=function(a){var c=a[3],b=a[4],d=a[5],h=a[6],l=a[7],e=a[8];return a[0]*(e*b-d*l)+a[1]*(-e*c+d*h)+a[2]*(l*c-b*h)};c.multiply=h;c.translate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4],p=c[5],m=c[6],r=c[7];c=c[8];var u=b[0];b=b[1];return a[0]=d,a[1]=h,
a[2]=l,a[3]=e,a[4]=g,a[5]=p,a[6]=u*d+b*e+m,a[7]=u*h+b*g+r,a[8]=u*l+b*p+c,a};c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4],p=c[5],m=c[6],r=c[7];c=c[8];var u=Math.sin(b);b=Math.cos(b);return a[0]=b*d+u*e,a[1]=b*h+u*g,a[2]=b*l+u*p,a[3]=b*e-u*d,a[4]=b*g-u*h,a[5]=b*p-u*l,a[6]=m,a[7]=r,a[8]=c,a};c.scale=function(a,c,b){var d=b[0];b=b[1];return a[0]=d*c[0],a[1]=d*c[1],a[2]=d*c[2],a[3]=b*c[3],a[4]=b*c[4],a[5]=b*c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromTranslation=function(a,c){return a[0]=
1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=c[0],a[7]=c[1],a[8]=1,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=0,a[3]=-b,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=0,a[4]=c[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromMat2d=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=0,a[3]=c[2],a[4]=c[3],a[5]=0,a[6]=c[4],a[7]=c[5],a[8]=1,a};c.fromQuat=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=b+b,g=d+d,p=h+h,
b=b*e,m=d*e,d=d*g,r=h*e,u=h*g,h=h*p,e=l*e,g=l*g,l=l*p;return a[0]=1-d-h,a[3]=m-l,a[6]=r+g,a[1]=m+l,a[4]=1-b-h,a[7]=u-e,a[2]=r-g,a[5]=u+e,a[8]=1-b-d,a};c.normalFromMat4=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],p=c[6],m=c[7],r=c[8],u=c[9],t=c[10],w=c[11],z=c[12],x=c[13],B=c[14],D=c[15],na=b*g-d*e,S=b*p-h*e,ba=b*m-l*e,A=d*p-h*g,Y=d*m-l*g,I=h*m-l*p,V=r*x-u*z,K=r*B-t*z,r=r*D-w*z,ja=u*B-t*x,u=u*D-w*x,t=t*D-w*B;return(w=na*t-S*u+ba*ja+A*r-Y*K+I*V)?(w=1/w,a[0]=(g*t-p*u+m*ja)*w,a[1]=(p*
r-e*t-m*K)*w,a[2]=(e*u-g*r+m*V)*w,a[3]=(h*u-d*t-l*ja)*w,a[4]=(b*t-h*r+l*K)*w,a[5]=(d*r-b*u-l*V)*w,a[6]=(x*I-B*Y+D*A)*w,a[7]=(B*ba-z*I-D*S)*w,a[8]=(z*Y-x*ba+D*na)*w,a):null};c.projection=function(a,c,b){return a[0]=2/c,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/b,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};c.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],
2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a[6]=c[6]+b[6],a[7]=c[7]+b[7],a[8]=c[8]+b[8],a};c.subtract=m;c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a[6]=c[6]*b,a[7]=c[7]*b,a[8]=c[8]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*
d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*d,a[6]=c[6]+b[6]*d,a[7]=c[7]+b[7]*d,a[8]=c[8]+b[8]*d,a};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],m=a[3],e=a[4],g=a[5],p=a[6],n=a[7],r=a[8],u=c[0],t=c[1],w=c[2],z=c[3],x=c[4],B=c[5],D=c[6],na=c[7],S=c[8];return Math.abs(b-u)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(u))&&Math.abs(d-
t)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(h-w)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(m-z)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(e-x)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(g-B)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(p-D)<=l.EPSILON*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(n-na)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(na))&&Math.abs(r-S)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(S))};var l=function(a){if(a&&
a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=h;c.sub=m},function(a,c,d){function h(){var b=new y.ARRAY_TYPE(2);return y.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0),b}function m(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b}function l(b,a,c){return b[0]=a[0]*c[0],b[1]=a[1]*c[1],b}function f(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b}function k(b,a){var c=a[0]-b[0],f=a[1]-b[1];return Math.sqrt(c*
c+f*f)}function b(b,a){var c=a[0]-b[0],f=a[1]-b[1];return c*c+f*f}function q(b){var a=b[0];b=b[1];return Math.sqrt(a*a+b*b)}function t(b){var a=b[0];b=b[1];return a*a+b*b}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.sqrDist=c.dist=c.div=c.mul=c.sub=c.len=void 0;c.create=h;c.clone=function(b){var a=new y.ARRAY_TYPE(2);return a[0]=b[0],a[1]=b[1],a};c.fromValues=function(b,a){var c=new y.ARRAY_TYPE(2);return c[0]=b,c[1]=a,c};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b};
c.set=function(b,a,c){return b[0]=a,b[1]=c,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b};c.subtract=m;c.multiply=l;c.divide=f;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b};c.min=function(b,a,c){return b[0]=Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),
b[1]=Math.round(a[1]),b};c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b};c.scaleAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b};c.distance=k;c.squaredDistance=b;c.length=q;c.squaredLength=t;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b};c.normalize=function(b,a){var c=a[0],f=a[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c);return b};c.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]};c.cross=
function(b,a,c){a=a[0]*c[1]-a[1]*c[0];return b[0]=b[1]=0,b[2]=a,b};c.lerp=function(b,a,c,f){var d=a[0];a=a[1];return b[0]=d+f*(c[0]-d),b[1]=a+f*(c[1]-a),b};c.random=function(b,a){a=a||1;var c=2*y.RANDOM()*Math.PI;return b[0]=Math.cos(c)*a,b[1]=Math.sin(c)*a,b};c.transformMat2=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[2]*a,b[1]=c[1]*f+c[3]*a,b};c.transformMat2d=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[2]*a+c[4],b[1]=c[1]*f+c[3]*a+c[5],b};c.transformMat3=function(b,a,c){var f=
a[0];a=a[1];return b[0]=c[0]*f+c[3]*a+c[6],b[1]=c[1]*f+c[4]*a+c[7],b};c.transformMat4=function(b,a,c){var f=a[0];a=a[1];return b[0]=c[0]*f+c[4]*a+c[12],b[1]=c[1]*f+c[5]*a+c[13],b};c.rotate=function(b,a,c,f){var d=a[0]-c[0];a=a[1]-c[1];var k=Math.sin(f);f=Math.cos(f);return b[0]=d*f-a*k+c[0],b[1]=d*k+a*f+c[1],b};c.angle=function(b,a){var c=b[0],f=b[1],d=a[0],k=a[1],h=c*c+f*f;0<h&&(h=1/Math.sqrt(h));var l=d*d+k*k;0<l&&(l=1/Math.sqrt(l));c=(c*d+f*k)*h*l;return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=
function(b){return"vec2("+b[0]+", "+b[1]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]};c.equals=function(b,a){var c=b[0],f=b[1],d=a[0],k=a[1];return Math.abs(c-d)<=y.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(f-k)<=y.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))};var y=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.len=q;c.sub=m;c.mul=l;c.div=f;c.dist=k;
c.sqrDist=b;c.sqrLen=t;c.forEach=function(){var b=h();return function(a,c,f,d,k,h){var l=void 0,m=void 0;c||(c=2);f||(f=0);m=d?Math.min(d*c+f,a.length):a.length;for(l=f;l<m;l+=c)b[0]=a[l],b[1]=a[l+1],k(b,b,h),a[l]=b[0],a[l+1]=b[1];return a}}()},function(a,c,d){function h(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}function m(b,a,c){var f=.5*c[0],d=.5*c[1];c=.5*c[2];var k=a[0],h=a[1],l=a[2];a=a[3];
return b[0]=k,b[1]=h,b[2]=l,b[3]=a,b[4]=f*a+d*l-c*h,b[5]=d*a+c*k-f*l,b[6]=c*a+f*h-d*k,b[7]=-f*k-d*h-c*l,b}function l(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b}function f(b,a,c){var f=a[0],d=a[1],k=a[2],h=a[3],l=c[4],m=c[5],q=c[6],t=c[7],y=a[4],z=a[5],C=a[6];a=a[7];var D=c[0],A=c[1],Y=c[2];c=c[3];return b[0]=f*c+h*D+d*Y-k*A,b[1]=d*c+h*A+k*D-f*Y,b[2]=k*c+h*Y+f*A-d*D,b[3]=h*c-f*D-d*A-k*Y,b[4]=f*t+h*l+d*q-k*m+y*c+a*D+z*Y-C*A,b[5]=d*t+h*m+k*l-f*q+z*c+
a*A+C*D-y*Y,b[6]=k*t+h*q+f*m-d*l+C*c+a*Y+y*A-z*D,b[7]=h*t-f*l-d*m-k*q+a*c-y*D-z*A-C*Y,b}Object.defineProperty(c,"__esModule",{value:!0});c.sqrLen=c.squaredLength=c.len=c.length=c.dot=c.mul=c.setReal=c.getReal=void 0;c.create=function(){var b=new k.ARRAY_TYPE(8);k.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[4]=0,b[5]=0,b[6]=0,b[7]=0);return b[3]=1,b};c.clone=function(b){var a=new k.ARRAY_TYPE(8);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a};c.fromValues=
function(b,a,c,f,d,h,l,m){var q=new k.ARRAY_TYPE(8);return q[0]=b,q[1]=a,q[2]=c,q[3]=f,q[4]=d,q[5]=h,q[6]=l,q[7]=m,q};c.fromRotationTranslationValues=function(b,a,c,f,d,h,l){var m=new k.ARRAY_TYPE(8);m[0]=b;m[1]=a;m[2]=c;m[3]=f;d*=.5;h*=.5;l*=.5;return m[4]=d*f+h*c-l*a,m[5]=h*f+l*b-d*c,m[6]=l*f+d*a-h*b,m[7]=-d*b-h*a-l*c,m};c.fromRotationTranslation=m;c.fromTranslation=function(b,a){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b[4]=.5*a[0],b[5]=.5*a[1],b[6]=.5*a[2],b[7]=0,b};c.fromRotation=function(b,a){return b[0]=
a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=0,b[5]=0,b[6]=0,b[7]=0,b};c.fromMat4=function(a,c){var f=b.create();q.getRotation(f,c);var d=new k.ARRAY_TYPE(3);return q.getTranslation(d,c),m(a,f,d),a};c.copy=l;c.identity=function(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b[4]=0,b[5]=0,b[6]=0,b[7]=0,b};c.set=function(b,a,c,f,d,k,h,l,m){return b[0]=a,b[1]=c,b[2]=f,b[3]=d,b[4]=k,b[5]=h,b[6]=l,b[7]=m,b};c.getDual=function(b,a){return b[0]=a[4],b[1]=a[5],b[2]=a[6],b[3]=a[7],b};c.setDual=function(b,a){return b[4]=
a[0],b[5]=a[1],b[6]=a[2],b[7]=a[3],b};c.getTranslation=function(b,a){var c=a[4],f=a[5],d=a[6],k=a[7],h=-a[0],l=-a[1],m=-a[2],q=a[3];return b[0]=2*(c*q+k*h+f*m-d*l),b[1]=2*(f*q+k*l+d*h-c*m),b[2]=2*(d*q+k*m+c*l-f*h),b};c.translate=function(b,a,c){var f=a[0],d=a[1],k=a[2],h=a[3],l=.5*c[0],m=.5*c[1];c=.5*c[2];var q=a[4],t=a[5],y=a[6];a=a[7];return b[0]=f,b[1]=d,b[2]=k,b[3]=h,b[4]=h*l+d*c-k*m+q,b[5]=h*m+k*l-f*c+t,b[6]=h*c+f*m-d*l+y,b[7]=-f*l-d*m-k*c+a,b};c.rotateX=function(a,c,f){var d=-c[0],k=-c[1],h=
-c[2],l=c[3],m=c[4],q=c[5],t=c[6],y=c[7],z=m*l+y*d+q*h-t*k,C=q*l+y*k+t*d-m*h,D=t*l+y*h+m*k-q*d,m=y*l-m*d-q*k-t*h;return b.rotateX(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=z*l+m*d+C*h-D*k,a[5]=C*l+m*k+D*d-z*h,a[6]=D*l+m*h+z*k-C*d,a[7]=m*l-z*d-C*k-D*h,a};c.rotateY=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],t=c[6],y=c[7],z=m*l+y*d+q*h-t*k,C=q*l+y*k+t*d-m*h,D=t*l+y*h+m*k-q*d,m=y*l-m*d-q*k-t*h;return b.rotateY(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=z*l+m*d+C*h-D*k,a[5]=C*l+m*k+D*
d-z*h,a[6]=D*l+m*h+z*k-C*d,a[7]=m*l-z*d-C*k-D*h,a};c.rotateZ=function(a,c,f){var d=-c[0],k=-c[1],h=-c[2],l=c[3],m=c[4],q=c[5],t=c[6],y=c[7],z=m*l+y*d+q*h-t*k,C=q*l+y*k+t*d-m*h,D=t*l+y*h+m*k-q*d,m=y*l-m*d-q*k-t*h;return b.rotateZ(a,c,f),d=a[0],k=a[1],h=a[2],l=a[3],a[4]=z*l+m*d+C*h-D*k,a[5]=C*l+m*k+D*d-z*h,a[6]=D*l+m*h+z*k-C*d,a[7]=m*l-z*d-C*k-D*h,a};c.rotateByQuatAppend=function(b,a,c){var f=c[0],d=c[1],k=c[2];c=c[3];var h=a[0],l=a[1],m=a[2],q=a[3];return b[0]=h*c+q*f+l*k-m*d,b[1]=l*c+q*d+m*f-h*k,
b[2]=m*c+q*k+h*d-l*f,b[3]=q*c-h*f-l*d-m*k,h=a[4],l=a[5],m=a[6],q=a[7],b[4]=h*c+q*f+l*k-m*d,b[5]=l*c+q*d+m*f-h*k,b[6]=m*c+q*k+h*d-l*f,b[7]=q*c-h*f-l*d-m*k,b};c.rotateByQuatPrepend=function(b,a,c){var f=a[0],d=a[1],k=a[2];a=a[3];var h=c[0],l=c[1],m=c[2],q=c[3];return b[0]=f*q+a*h+d*m-k*l,b[1]=d*q+a*l+k*h-f*m,b[2]=k*q+a*m+f*l-d*h,b[3]=a*q-f*h-d*l-k*m,h=c[4],l=c[5],m=c[6],q=c[7],b[4]=f*q+a*h+d*m-k*l,b[5]=d*q+a*l+k*h-f*m,b[6]=k*q+a*m+f*l-d*h,b[7]=a*q-f*h-d*l-k*m,b};c.rotateAroundAxis=function(b,a,c,f){if(Math.abs(f)<
k.EPSILON)return l(b,a);var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);f*=.5;var h=Math.sin(f),m=h*c[0]/d,q=h*c[1]/d;c=h*c[2]/d;f=Math.cos(f);var d=a[0],h=a[1],t=a[2],y=a[3];b[0]=d*f+y*m+h*c-t*q;b[1]=h*f+y*q+t*m-d*c;b[2]=t*f+y*c+d*q-h*m;b[3]=y*f-d*m-h*q-t*c;d=a[4];h=a[5];t=a[6];a=a[7];return b[4]=d*f+a*m+h*c-t*q,b[5]=h*f+a*q+t*m-d*c,b[6]=t*f+a*c+d*q-h*m,b[7]=a*f-d*m-h*q-t*c,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b[3]=a[3]+c[3],b[4]=a[4]+c[4],b[5]=a[5]+c[5],b[6]=
a[6]+c[6],b[7]=a[7]+c[7],b};c.multiply=f;c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b[4]=a[4]*c,b[5]=a[5]*c,b[6]=a[6]*c,b[7]=a[7]*c,b};c.lerp=function(b,a,c,f){var d=1-f;0>t(a,c)&&(f=-f);return b[0]=a[0]*d+c[0]*f,b[1]=a[1]*d+c[1]*f,b[2]=a[2]*d+c[2]*f,b[3]=a[3]*d+c[3]*f,b[4]=a[4]*d+c[4]*f,b[5]=a[5]*d+c[5]*f,b[6]=a[6]*d+c[6]*f,b[7]=a[7]*d+c[7]*f,b};c.invert=function(b,a){var c=y(a);return b[0]=-a[0]/c,b[1]=-a[1]/c,b[2]=-a[2]/c,b[3]=a[3]/c,b[4]=-a[4]/c,b[5]=-a[5]/
c,b[6]=-a[6]/c,b[7]=a[7]/c,b};c.conjugate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b[4]=-a[4],b[5]=-a[5],b[6]=-a[6],b[7]=a[7],b};c.normalize=function(b,a){var c=y(a);if(0<c){var c=Math.sqrt(c),f=a[0]/c,d=a[1]/c,k=a[2]/c,h=a[3]/c,l=a[4],m=a[5],q=a[6],t=a[7],z=f*l+d*m+k*q+h*t;b[0]=f;b[1]=d;b[2]=k;b[3]=h;b[4]=(l-f*z)/c;b[5]=(m-d*z)/c;b[6]=(q-k*z)/c;b[7]=(t-h*z)/c}return b};c.str=function(b){return"quat2("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+
")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]};c.equals=function(b,a){var c=b[0],f=b[1],d=b[2],h=b[3],l=b[4],m=b[5],q=b[6],t=b[7],y=a[0],z=a[1],C=a[2],D=a[3],ba=a[4],A=a[5],Y=a[6],I=a[7];return Math.abs(c-y)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-z)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(d-C)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(h-D)<=k.EPSILON*
Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(l-ba)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(ba))&&Math.abs(m-A)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(q-Y)<=k.EPSILON*Math.max(1,Math.abs(q),Math.abs(Y))&&Math.abs(t-I)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(I))};var k=h(d(0)),b=h(d(3)),q=h(d(4));c.getReal=b.copy;c.setReal=b.copy;c.mul=f;var t=c.dot=b.dot;a=c.length=b.length;var y=(c.len=a,c.squaredLength=b.squaredLength);c.sqrLen=y},function(a,c,d){function h(a,c,b){var d=
c[0],l=c[1],m=c[2],e=c[3],g=c[4];c=c[5];var p=b[0],n=b[1],r=b[2],t=b[3],z=b[4];b=b[5];return a[0]=d*p+m*n,a[1]=l*p+e*n,a[2]=d*r+m*t,a[3]=l*r+e*t,a[4]=d*z+m*b+g,a[5]=l*z+e*b+c,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=c[5]-b[5],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new l.ARRAY_TYPE(6);l.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=
new l.ARRAY_TYPE(6);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};c.fromValues=function(a,c,b,d,h,m){var e=new l.ARRAY_TYPE(6);return e[0]=a,e[1]=c,e[2]=b,e[3]=d,e[4]=h,e[5]=m,e};c.set=function(a,c,b,d,h,l,e){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a[4]=l,a[5]=e,a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=
c[3],e=c[4],g=c[5],m=b*l-d*h;return m?(m=1/m,a[0]=l*m,a[1]=-d*m,a[2]=-h*m,a[3]=b*m,a[4]=(h*g-l*e)*m,a[5]=(d*e-b*g)*m,a):null};c.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};c.multiply=h;c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4];c=c[5];var m=Math.sin(b);b=Math.cos(b);return a[0]=d*b+l*m,a[1]=h*b+e*m,a[2]=d*-m+l*b,a[3]=h*-m+e*b,a[4]=g,a[5]=c,a};c.scale=function(a,c,b){var d=c[1],h=c[2],l=c[3],e=c[4],g=c[5],m=b[0];b=b[1];return a[0]=c[0]*m,a[1]=d*m,a[2]=h*b,a[3]=l*b,a[4]=
e,a[5]=g,a};c.translate=function(a,c,b){var d=c[0],h=c[1],l=c[2],e=c[3],g=c[4];c=c[5];var m=b[0];b=b[1];return a[0]=d,a[1]=h,a[2]=l,a[3]=e,a[4]=d*m+l*b+g,a[5]=h*m+e*b+c,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a[4]=0,a[5]=0,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=c[1],a[4]=0,a[5]=0,a};c.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=c[0],a[5]=c[1],a};c.str=function(a){return"mat2d("+a[0]+", "+
a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a};c.subtract=m;c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*
d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*d,a};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]};c.equals=function(a,c){var b=a[0],d=a[1],h=a[2],m=a[3],e=a[4],g=a[5],p=c[0],n=c[1],r=c[2],t=c[3],z=c[4],w=c[5];return Math.abs(b-p)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(p))&&Math.abs(d-n)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(h-r)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(r))&&
Math.abs(m-t)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(t))&&Math.abs(e-z)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(z))&&Math.abs(g-w)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))};var l=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=h;c.sub=m},function(a,c,d){function h(a,c,b){var d=c[0],l=c[1],m=c[2];c=c[3];var e=b[0],g=b[1],p=b[2];b=b[3];return a[0]=d*e+m*g,a[1]=l*e+c*g,
a[2]=d*p+m*b,a[3]=l*p+c*b,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new l.ARRAY_TYPE(4);l.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=new l.ARRAY_TYPE(4);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};c.identity=function(a){return a[0]=1,
a[1]=0,a[2]=0,a[3]=1,a};c.fromValues=function(a,c,b,d){var h=new l.ARRAY_TYPE(4);return h[0]=a,h[1]=c,h[2]=b,h[3]=d,h};c.set=function(a,c,b,d,h){return a[0]=c,a[1]=b,a[2]=d,a[3]=h,a};c.transpose=function(a,c){if(a===c){var b=c[1];a[1]=c[2];a[2]=b}else a[0]=c[0],a[1]=c[2],a[2]=c[1],a[3]=c[3];return a};c.invert=function(a,c){var b=c[0],d=c[1],h=c[2],l=c[3],e=b*l-h*d;return e?(e=1/e,a[0]=l*e,a[1]=-d*e,a[2]=-h*e,a[3]=b*e,a):null};c.adjoint=function(a,c){var b=c[0];return a[0]=c[3],a[1]=-c[1],a[2]=-c[2],
a[3]=b,a};c.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};c.multiply=h;c.rotate=function(a,c,b){var d=c[0],h=c[1],l=c[2];c=c[3];var e=Math.sin(b);b=Math.cos(b);return a[0]=d*b+l*e,a[1]=h*b+c*e,a[2]=d*-e+l*b,a[3]=h*-e+c*b,a};c.scale=function(a,c,b){var d=c[1],h=c[2],l=c[3],e=b[0];b=b[1];return a[0]=c[0]*e,a[1]=d*e,a[2]=h*b,a[3]=l*b,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,
a[3]=c[1],a};c.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};c.LDU=function(a,c,b,d){return a[2]=d[2]/d[0],b[0]=d[0],b[1]=d[1],b[3]=d[3]-a[2]*b[1],[a,c,b]};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a};c.subtract=m;c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};c.equals=function(a,c){var b=
a[0],d=a[1],h=a[2],m=a[3],e=c[0],g=c[1],p=c[2],n=c[3];return Math.abs(b-e)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))&&Math.abs(d-g)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(h-p)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(m-n)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(n))};c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=
c[3]+b[3]*d,a};var l=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=h;c.sub=m},function(a,c,d){function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(c,"__esModule",{value:!0});c.vec4=c.vec3=c.vec2=c.quat2=c.quat=c.mat4=c.mat3=c.mat2d=c.mat2=c.glMatrix=void 0;
a=h(d(0));var m=h(d(9)),l=h(d(8)),f=h(d(5)),k=h(d(4)),b=h(d(3)),q=h(d(7)),t=h(d(6)),y=h(d(2));d=h(d(1));c.glMatrix=a;c.mat2=m;c.mat2d=l;c.mat3=f;c.mat4=k;c.quat=b;c.quat2=q;c.vec2=t;c.vec3=y;c.vec4=d}])})},{}],75:[function(d,h,t){(function(a){function c(){l.forEach(function(a){f[m[a]]=!1})}function t(a){f[m[a.keyCode]]=!1}function D(a){f[m[a.keyCode]]=!0}var m=d("vkey"),l=Object.keys(m),f={};c();h.exports=function(a){return a?f[a]:f};a.browser&&(window.addEventListener("keydown",D,!1),window.addEventListener("keyup",
t,!1),window.addEventListener("blur",c,!1))}).call(this,d("_process"))},{_process:77,vkey:79}],76:[function(d,h,t){function a(a,c,d){this.rotation=a;this.center=c;this.distance=d}function c(a,c){var d=c[0],f=c[1],d=d*d+f*f;1<d&&(d=1);a[0]=-c[0];a[1]=c[1];a[2]=c[2]||Math.sqrt(1-d);a[3]=0}d=d("gl-matrix");var z=d.vec3,D=d.mat3,m=d.mat4,l=d.quat,f=new Float32Array(16),k=new Float32Array(16);d=a.prototype;d.view=function(a){a||(a=m.create());k[0]=k[1]=0;k[2]=-this.distance;m.fromRotationTranslation(a,
l.conjugate(f,this.rotation),k);m.translate(a,a,z.negate(f,this.center));return a};d.lookAt=function(a,c,d){m.lookAt(f,a,c,d);D.fromMat4(f,f);l.fromMat3(this.rotation,f);z.copy(this.center,c);this.distance=z.distance(a,c)};d.pan=function(a){var c=this.distance;f[0]=-c*(a[0]||0);f[1]=c*(a[1]||0);f[2]=c*(a[2]||0);z.transformQuat(f,f,this.rotation);z.add(this.center,this.center,f)};d.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};d.rotate=function(a,d){c(f,a);c(k,d);l.invert(k,
k);l.multiply(f,f,k);1E-6>l.length(f)||(l.multiply(this.rotation,this.rotation,f),l.normalize(this.rotation,this.rotation))};h.exports=function(b,c,d){b=b||[0,0,-1];c=c||[0,0,0];d=d||[0,1,0];var f=new a(l.create(),z.create(),1);f.lookAt(b,c,d);return f}},{"gl-matrix":74}],77:[function(d,h,t){function a(){throw Error("setTimeout has not been defined");}function c(){throw Error("clearTimeout has not been defined");}function z(c){if(b===setTimeout)return setTimeout(c,0);if((b===a||!b)&&setTimeout)return b=
setTimeout,setTimeout(c,0);try{return b(c,0)}catch(e){try{return b.call(null,c,0)}catch(d){return b.call(this,c,0)}}}function D(a){if(q===clearTimeout)return clearTimeout(a);if((q===c||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(b){try{return q.call(null,a)}catch(e){return q.call(this,a)}}}function m(){y&&e&&(y=!1,e.length?C=e.concat(C):g=-1,C.length&&l())}function l(){if(!y){var a=z(m);y=!0;for(var b=C.length;b;){e=C;for(C=[];++g<b;)e&&e[g].run();g=-1;b=C.length}e=
null;y=!1;D(a)}}function f(a,b){this.fun=a;this.array=b}function k(){}d=h.exports={};var b,q;try{b="function"===typeof setTimeout?setTimeout:a}catch(p){b=a}try{q="function"===typeof clearTimeout?clearTimeout:c}catch(p){q=c}var C=[],y=!1,e,g=-1;d.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];C.push(new f(a,b));1!==C.length||y||z(l)};f.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=
!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=k;d.addListener=k;d.once=k;d.off=k;d.removeListener=k;d.removeAllListeners=k;d.emit=k;d.prependListener=k;d.prependOnceListener=k;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");};d.umask=function(){return 0}},{}],78:[function(d,h,t){var a=d("events/"),c=d("wheel");h.exports=function(d,h){function m(){l[0]=
l[1]=l[2]=0}var l=new a;l.flush=m;m();if("undefined"===typeof window)return l;d=d||window;c(d,function(a){var c=1===a.deltaMode?12:1;l[0]+=c*(a.deltaX||0);l[1]+=c*(a.deltaY||0);l[2]+=c*(a.deltaZ||0);l.emit("scroll",l);h&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return l}},{"events/":43,wheel:80}],79:[function(d,h,t){var a="undefined"!==typeof window?window.navigator.userAgent:"";d=/OS X/.test(a);t=/Opera/.test(a);a=!/like Gecko/.test(a)&&!t;d=h.exports={0:d?
"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",
40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:d?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",
170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:d&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:t?"`":"<unicode>",246:"<attention>",247:"<crsel>",
248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(h=58;65>h;++h)d[h]=String.fromCharCode(h);for(h=48;58>h;++h)d[h]=h-48+"";for(h=65;91>h;++h)d[h]=String.fromCharCode(h);for(h=96;106>h;++h)d[h]="<num-"+(h-96)+">";for(h=112;136>h;++h)d[h]="F"+(h-111)},{}],80:[function(d,h,t){function a(a,d,f,h){a[z](c+d,"wheel"==D?f:function(a){!a&&(a=window.event);var c={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==
a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==D?(c.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(c.deltaX=-.025*a.wheelDeltaX)):c.deltaY=a.detail;return f(c)},h||!1)}h.exports=function(c,d,f){a(c,D,d,f);"DOMMouseScroll"==D&&a(c,"MozMousePixelScroll",d,f)};var c="",z,D;window.addEventListener?z="addEventListener":(z="attachEvent",c="on");D="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":
"DOMMouseScroll"},{}],81:[function(d,h,t){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var c=d("./lib/util/check"),z=d("./lib/util/extend"),D=d("./lib/dynamic"),m=d("./lib/util/raf"),l=d("./lib/util/clock"),f=d("./lib/strings"),k=d("./lib/webgl"),b=d("./lib/extension"),q=d("./lib/limits"),C=d("./lib/buffer"),y=d("./lib/elements"),e=d("./lib/texture"),g=d("./lib/renderbuffer"),p=d("./lib/framebuffer"),n=d("./lib/attribute"),r=d("./lib/shader"),u=d("./lib/read"),M=d("./lib/core"),
w=d("./lib/stats"),sa=d("./lib/timer");h.exports=function(d){function h(){if(0===nb.length)P&&P.update(),pc=null;else{pc=m.next(h);K();for(var a=nb.length-1;0<=a;--a){var b=nb[a];b&&b(Q,null,0)}ha.flush();P&&P.update()}}function t(){!pc&&0<nb.length&&(pc=m.next(h))}function na(){pc&&(m.cancel(h),pc=null)}function S(a){a.preventDefault();Qa=!0;na();ga.forEach(function(a){a()})}function ba(a){ha.getError();Qa=!1;Bb.restore();ma.restore();ab.restore();ea.restore();wa.restore();La.restore();E.restore();
P&&P.restore();yb.procs.refresh();t();ra.forEach(function(a){a()})}function A(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(D.isDynamic(f))e[b]=D.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(D.isDynamic(f[g])){e[b]=D.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function d(a){for(;p.length<a;)p.push(null);return p}c(!!a,"invalid args to regl({...})");c.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=
b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=z({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,
count:0},k=yb.compile(a,g,f,e,h),l=k.draw,m=k.batch,n=k.scope,p=[];return z(function(a,b){var e;Qa&&c.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)n.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)n.call(this,a[e],b,e);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,
a)},{stats:h,destroy:function(){k.destroy()}})}function Y(a,b){var d=0;yb.procs.poll();var e=b.color;e&&(ha.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),d|=16384);"depth"in b&&(ha.clearDepth(+b.depth),d|=256);"stencil"in b&&(ha.clearStencil(b.stencil|0),d|=1024);c(!!d,"called regl.clear with no buffer specified");ha.clear(d)}function I(b){c.type(b,"function","regl.frame() callback must be a function");nb.push(b);t();return{cancel:function(){function d(){var b=a(nb,d);nb[b]=nb[nb.length-1];--nb.length;
0>=nb.length&&na()}var e=a(nb,b);c(0<=e,"cannot cancel a frame twice");nb[e]=d}}}function V(){var a=Ka.viewport,b=Ka.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=ha.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=ha.drawingBufferHeight}function K(){Q.tick+=1;Q.time=T();V();yb.procs.poll()}function ja(){ea.refresh();V();yb.procs.refresh();P&&P.update()}function T(){return(l()-L)/1E3}console.log("REGL args are:",
d);d=k(d);console.log("REGL configs are:",d);if(!d)return null;var ha=d.gl,la=ha.getContextAttributes(),Qa=ha.isContextLost(),Bb=b(ha,d);if(!Bb)return null;var oa=f(),Oa=w(),W=Bb.extensions,P=sa(ha,W),L=l(),U=ha.drawingBufferWidth,pa=ha.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:U,viewportHeight:pa,framebufferWidth:U,framebufferHeight:pa,drawingBufferWidth:U,drawingBufferHeight:pa,pixelRatio:d.pixelRatio},U={elements:null,primitive:4,count:-1,offset:0,instances:-1},Pb=q(ha,W),ab=C(ha,Oa,d,
function(a){return E.destroyBuffer(a)}),R=y(ha,W,ab,Oa),E=n(ha,W,Pb,Oa,ab,R,U),ma=r(ha,oa,Oa,d),ea=e(ha,W,Pb,function(){yb.procs.poll()},Q,Oa,d),wa=g(ha,W,Pb,Oa,d),La=p(ha,W,Pb,ea,wa,Oa),yb=M(ha,oa,W,Pb,ab,R,ea,La,{},E,ma,U,Q,P,d),oa=u(ha,La,yb.procs.poll,Q,la,W,Pb),Ka=yb.next,X=ha.canvas,nb=[],ga=[],ra=[],cc=[d.onDestroy],pc=null;X&&(X.addEventListener("webglcontextlost",S,!1),X.addEventListener("webglcontextrestored",ba,!1));var jc=La.setFBO=A({framebuffer:D.define.call(null,1,"framebuffer")});
ja();la=z(A,{clear:function(a){c("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)jc(z({framebuffer:a.framebuffer.faces[b]},a),Y);else jc(a,Y);else Y(null,a)},prop:D.define.bind(null,1),context:D.define.bind(null,2),"this":D.define.bind(null,3),draw:A({}),buffer:function(a){return ab.create(a,34962,!1,!1)},elements:function(a){return R.create(a,!1)},texture:ea.create2D,cube:ea.createCube,
renderbuffer:wa.create,framebuffer:La.create,framebufferCube:La.createCube,vao:E.createVAO,attributes:la,frame:I,on:function(a,b){c.type(b,"function","listener callback must be a function");var d;switch(a){case "frame":return I(b);case "lost":d=ga;break;case "restore":d=ra;break;case "destroy":d=cc;break;default:c.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(b);return{cancel:function(){for(var a=0;a<d.length;++a)if(d[a]===b){d[a]=d[d.length-1];d.pop();break}}}},limits:Pb,
hasExtension:function(a){return 0<=Pb.extensions.indexOf(a.toLowerCase())},read:oa,destroy:function(){nb.length=0;na();X&&(X.removeEventListener("webglcontextlost",S),X.removeEventListener("webglcontextrestored",ba));ma.clear();La.clear();wa.clear();E.clear();ea.clear();R.clear();ab.clear();P&&P.clear();cc.forEach(function(a){a()})},_gl:ha,_refresh:ja,poll:function(){K();P&&P.update()},now:T,stats:Oa});d.onDone(null,la);return la}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,
"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
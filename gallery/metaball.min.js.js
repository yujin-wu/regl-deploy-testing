var $jscomp={scope:{},getGlobal:function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global?global:c}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return"jscomp_symbol_"+c+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();if(c[$jscomp.global.Symbol.iterator])return c[$jscomp.global.Symbol.iterator]();var n=0;return{next:function(){return n==c.length?{done:!0}:{done:!1,value:c[n++]}}}};
$jscomp.arrayFromIterator=function(c){for(var n,m=[];!(n=c.next()).done;)m.push(n.value);return m};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};
$jscomp.inherits=function(c,n){function m(){}m.prototype=n.prototype;c.prototype=new m;c.prototype.constructor=c;for(var a in n)if($jscomp.global.Object.defineProperties){var b=$jscomp.global.Object.getOwnPropertyDescriptor(n,a);b&&$jscomp.global.Object.defineProperty(c,a,b)}else c[a]=n[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(c,n){c instanceof String&&(c=String(c));var m=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},b=(a.next=function(){if(m<c.length){var a=m++;return{value:n(a,c[a]),done:!1}}b.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return b},a);return b};
$jscomp.array.findInternal_=function(c,n,m){c instanceof String&&(c=String(c));for(var a=c.length,b=0;b<a;b++){var e=c[b];if(n.call(m,e,b,c))return{i:b,v:e}}return{i:-1,v:void 0}};
$jscomp.array.from=function(c,n,m){n=void 0===n?function(b){return b}:n;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(c[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();c=c[Symbol.iterator]();for(var b;!(b=c.next()).done;)a.push(n.call(m,b.value))}else{b=c.length;for(var e=0;e<b;e++)a.push(n.call(m,c[e]))}return a};$jscomp.array.of=function(c){for(var n=[],m=0;m<arguments.length;++m)n[m-0]=arguments[m];return $jscomp.array.from(n)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(c,n){return[c,n]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(c){return c})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(c,n){return n})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(c,n,m){var a=this.length;c=Number(c);n=Number(n);m=Number(null!=m?m:a);if(c<n)for(m=Math.min(m,a);n<m;)n in this?this[c++]=this[n++]:(delete this[c++],n++);else for(m=Math.min(m,a+n-c),c+=m-n;m>n;)--m in this?this[--c]=this[m]:delete this[c];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(c,n,m){null!=m&&c.length||(m=this.length||0);m=Number(m);for(n=Number((void 0===n?0:n)||0);n<m;n++)this[n]=c;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(c,n){return $jscomp.array.findInternal_(this,c,n).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(c,n){return $jscomp.array.findInternal_(this,c,n).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(c){c=void 0===c?[]:c;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var n=c.next();!n.done;n=c.next())n=n.value,this.set(n[0],n[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var c=$jscomp.global.Map;if(!c||!c.prototype.entries||!Object.seal)return!1;try{var n=Object.seal({x:4}),m=new c($jscomp.makeIterator([[n,"s"]]));if("s"!=m.get(n)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var a=m.entries(),b=a.next();if(b.done||b.value[0]!=n||"s"!=b.value[1])return!1;b=a.next();return b.done||4!=b.value[0].x||"t"!=b.value[1]||!a.next().done?!1:!0}catch(e){return!1}};
$jscomp.Map.createHead_=function(){var c={};return c.previous=c.next=c.head=c};$jscomp.Map.getId_=function(c){if(!(c instanceof Object))return String(c);$jscomp.Map.key_ in c||c instanceof Object&&Object.isExtensible&&Object.isExtensible(c)&&$jscomp.Map.defineProperty_(c,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in c?c[$jscomp.Map.key_]:" "+c};
$jscomp.Map.prototype.set=function(c,n){var m=this.maybeGetEntry_(c),a=m.id,b=m.list,m=m.entry;b||(b=this.data_[a]=[]);m?m.value=n:(m={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:n},b.push(m),this.head_.previous.next=m,this.head_.previous=m,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(c){var n=this.maybeGetEntry_(c);c=n.id;var m=n.list,a=n.index;return(n=n.entry)&&m?(m.splice(a,1),m.length||delete this.data_[c],n.previous.next=n.next,n.next.previous=n.previous,n.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(c){return!!this.maybeGetEntry_(c).entry};
$jscomp.Map.prototype.get=function(c){return(c=this.maybeGetEntry_(c).entry)&&c.value};$jscomp.Map.prototype.maybeGetEntry_=function(c){var n=$jscomp.Map.getId_(c),m=this.data_[n];if(m)for(var a=0;a<m.length;a++){var b=m[a];if(c!==c&&b.key!==b.key||c===b.key)return{id:n,list:m,index:a,entry:b}}return{id:n,list:m,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(c){return[c.key,c.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(c){return c.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(c){return c.value})};$jscomp.Map.prototype.forEach=function(c,n){for(var m=$jscomp.makeIterator(this.entries()),a=m.next();!a.done;a=m.next())a=a.value,c.call(n,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(c){var n=this,m=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(m){for(;m.head!=n.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:c(m)};m=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(c,n,m){Object.defineProperty(c,n,{value:String(m)})}:function(c,n,m){c[n]=String(m)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(c){c=Number(c)>>>0;if(0===c)return 32;var n=0;0===(c&4294901760)&&(c<<=16,n+=16);0===(c&4278190080)&&(c<<=8,n+=8);0===(c&4026531840)&&(c<<=4,n+=4);0===(c&3221225472)&&(c<<=2,n+=2);0===(c&2147483648)&&n++;return n};$jscomp.math.imul=function(c,n){c=Number(c);n=Number(n);var m=c&65535,a=n&65535;return m*a+((c>>>16&65535)*a+m*(n>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1};
$jscomp.math.log10=function(c){return Math.log(c)/Math.LN10};$jscomp.math.log2=function(c){return Math.log(c)/Math.LN2};$jscomp.math.log1p=function(c){c=Number(c);if(.25>c&&-.25<c){for(var n=c,m=1,a=c,b=0,e=1;b!=a;)n*=c,e*=-1,a=(b=a)+e*n/++m;return a}return Math.log(1+c)};$jscomp.math.expm1=function(c){c=Number(c);if(.25>c&&-.25<c){for(var n=c,m=1,a=c,b=0;b!=a;)n*=c/++m,a=(b=a)+n;return a}return Math.exp(c)-1};$jscomp.math.cosh=function(c){c=Number(c);return(Math.exp(c)+Math.exp(-c))/2};
$jscomp.math.sinh=function(c){c=Number(c);return 0===c?c:(Math.exp(c)-Math.exp(-c))/2};$jscomp.math.tanh=function(c){c=Number(c);if(0===c)return c;var n=Math.exp(2*-Math.abs(c)),n=(1-n)/(1+n);return 0>c?-n:n};$jscomp.math.acosh=function(c){c=Number(c);return Math.log(c+Math.sqrt(c*c-1))};$jscomp.math.asinh=function(c){c=Number(c);if(0===c)return c;var n=Math.log(Math.abs(c)+Math.sqrt(c*c+1));return 0>c?-n:n};
$jscomp.math.atanh=function(c){c=Number(c);return($jscomp.math.log1p(c)-$jscomp.math.log1p(-c))/2};
$jscomp.math.hypot=function(c,n,m){for(var a=[],b=2;b<arguments.length;++b)a[b-2]=arguments[b];c=Number(c);n=Number(n);for(var e=Math.max(Math.abs(c),Math.abs(n)),k=$jscomp.makeIterator(a),b=k.next();!b.done;b=k.next())e=Math.max(e,Math.abs(b.value));if(1E100<e||1E-100>e){c/=e;n/=e;k=c*c+n*n;a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())b=b.value,b=Number(b)/e,k+=b*b;return Math.sqrt(k)*e}e=c*c+n*n;a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())b=b.value,b=Number(b),e+=
b*b;return Math.sqrt(e)};$jscomp.math.trunc=function(c){c=Number(c);if(isNaN(c)||Infinity===c||-Infinity===c||0===c)return c;var n=Math.floor(Math.abs(c));return 0>c?-n:n};$jscomp.math.cbrt=function(c){if(0===c)return c;c=Number(c);var n=Math.pow(Math.abs(c),1/3);return 0>c?-n:n};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(c){return"number"!==typeof c?!1:!isNaN(c)&&Infinity!==c&&-Infinity!==c};
$jscomp.number.isInteger=function(c){return $jscomp.number.isFinite(c)?c===Math.floor(c):!1};$jscomp.number.isNaN=function(c){return"number"===typeof c&&isNaN(c)};$jscomp.number.isSafeInteger=function(c){return $jscomp.number.isInteger(c)&&Math.abs(c)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(c,n){for(var m=[],a=1;a<arguments.length;++a)m[a-1]=arguments[a];m=$jscomp.makeIterator(m);for(a=m.next();!a.done;a=m.next())if(a=a.value)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c};$jscomp.object.is=function(c,n){return c===n?0!==c||1/c===1/n:c!==c&&n!==n};$jscomp.Set=function(c){c=void 0===c?[]:c;this.map_=new $jscomp.Map;if(c){c=$jscomp.makeIterator(c);for(var n=c.next();!n.done;n=c.next())this.add(n.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var c=$jscomp.global.Set;if(!c||!c.prototype.entries||!Object.seal)return!1;var n=Object.seal({x:4}),c=new c($jscomp.makeIterator([n]));if(c.has(n)||1!=c.size||c.add(n)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var c=c.entries(),m=c.next();if(m.done||m.value[0]!=n||m.value[1]!=n)return!1;m=c.next();return m.done||m.value[0]==n||4!=m.value[0].x||m.value[1]!=m.value[0]?!1:c.next().done};
$jscomp.Set.prototype.add=function(c){this.map_.set(c,c);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(c){c=this.map_["delete"](c);this.size=this.map_.size;return c};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(c){return this.map_.has(c)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(c,n){var m=this;this.map_.forEach(function(a){return c.call(n,a,a,m)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(c,n){if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(c){for(var n=[],m=0;m<arguments.length;++m)n[m-0]=arguments[m];for(var m="",n=$jscomp.makeIterator(n),a=n.next();!a.done;a=n.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?m+=String.fromCharCode(a):(a-=65536,m+=String.fromCharCode(a>>>10&1023|55296),m+=String.fromCharCode(a&1023|56320))}return m};
$jscomp.string.repeat=function(c){var n=this.toString();if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var m="";c;)if(c&1&&(m+=n),c>>>=1)n+=n;return m};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(c){var n=this.toString(),m=n.length;c=Number(c)||0;if(0<=c&&c<m){c|=0;var a=n.charCodeAt(c);if(55296>a||56319<a||c+1===m)return a;c=n.charCodeAt(c+1);return 56320>c||57343<c?a:1024*(a-55296)+c+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(c,n){n=void 0===n?0:n;$jscomp.string.noRegExp_(c,"includes");return-1!==this.toString().indexOf(c,n)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(c,n){n=void 0===n?0:n;$jscomp.string.noRegExp_(c,"startsWith");var m=this.toString();c+="";for(var a=m.length,b=c.length,e=Math.max(0,Math.min(n|0,m.length)),k=0;k<b&&e<a;)if(m[e++]!=c[k++])return!1;return k>=b};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(c,n){$jscomp.string.noRegExp_(c,"endsWith");var m=this.toString();c+="";void 0===n&&(n=m.length);for(var a=Math.max(0,Math.min(n|0,m.length)),b=c.length;0<b&&0<a;)if(m[--a]!=c[--b])return!1;return 0>=b};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function c(n,m,a){function b(l,d){if(!m[l]){if(!n[l]){var p="function"==typeof require&&require;if(!d&&p)return p(l,!0);if(e)return e(l,!0);p=Error("Cannot find module '"+l+"'");throw p.code="MODULE_NOT_FOUND",p;}p=m[l]={exports:{}};n[l][0].call(p.exports,function(a){return b(n[l][1][a]||a)},p,p.exports,c,n,m,a)}return m[l].exports}for(var e="function"==typeof require&&require,k=0;k<a.length;k++)b(a[k]);return b}return c})()({1:[function(c,n,m){var a=c("../regl")(),b=c("surface-nets"),
e=c("ndarray"),k=c("angle-normals"),l=c("gl-mat3"),d=c("./util/camera")(a,{distance:1.5,maxDistance:3,minDistance:.5,center:[1,1,1],theta:1}),p=a.buffer({length:49152,type:"float",usage:"dynamic"}),g=a.buffer({length:49152,type:"float",usage:"dynamic"}),u=a.elements({length:221184,count:36864,type:"uint16",usage:"dynamic",primitive:"triangles"}),T=a({vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n      gl_Position = vec4(position, 0., 1.);\n    }",frag:"\n    precision mediump float;\n    uniform vec3 color;\n    uniform float noise, width, height;\n\n    #define VIG_REDUCTION_POWER 1.\n    #define VIG_BOOST 1.\n\n    float random(vec3 scale,float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);\n    }\n\n    void main () {\n      vec2 resolution = vec2(width, height);\n      vec2 center = resolution * 0.5;\n      float vignette = distance( center, gl_FragCoord.xy ) / resolution.x;\n      vignette = VIG_BOOST - vignette * VIG_REDUCTION_POWER;\n\n      float n = noise * (.5 - random(vec3(1.), length(gl_FragCoord)));\n\n      float v = .5 * length(vec2(gl_FragCoord.y / resolution.y, (1. - abs(.5 - gl_FragCoord.x / resolution.x))));\n      vec3 base = color;\n      base += vec3(pow(v, 2.));\n\n      gl_FragColor = vec4(base * vec3(vignette) + vec3(n), 1.);\n    }",
uniforms:{color:[36/255,70/255,106/255],width:a.context("viewportWidth"),height:a.context("viewportHeight"),noise:.05},attributes:{position:[-4,-4,4,-4,0,4]},count:3}),w=a({vert:"\n    precision mediump float;\n    uniform mat4 projection, view;\n    uniform mat3 normalMatrix;\n\n    attribute vec3 position, normal;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    void main () {\n      vNormal = normalMatrix * normal;\n      vONormal = normal;\n      vPosition = vec4(position, 1.0);\n      vOPosition = view * vPosition;\n      vU = normalize(vec3(vOPosition));\n      gl_Position = projection * vOPosition;\n    }",
frag:"\n    precision mediump float;\n    uniform sampler2D textureMap, normalMap;\n    uniform float normalScale, texScale;\n    uniform vec3 color, eye;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    float random(vec3 scale, float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz + seed,scale)) * 43758.5453 + seed);\n    }\n\n    vec3 spherical_environment_map(vec3 ray, vec3 normal) {\n      vec3 r = reflect(normalize(ray), normalize(normal));\n      float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));\n      vec2 calculatedNormal = vec2(r.x / m + 0.5, r.y / m + 0.5);\n      return texture2D(textureMap, calculatedNormal).rgb;\n    }\n\n    mat3 tangent_space_basis(vec3 blend_weights) {\n      vec3 tanX = vec3(vNormal.x, -vNormal.z, vNormal.y);\n      vec3 tanY = vec3(vNormal.z, vNormal.y, -vNormal.x);\n      vec3 tanZ = vec3(-vNormal.y, vNormal.x, vNormal.z);\n      vec3 blended_tangent = tanX * blend_weights.xxx +\n                             tanY * blend_weights.yyy +\n                             tanZ * blend_weights.zzz;\n\n      return mat3(\n        normalize(blended_tangent),\n        normalize(cross(vNormal, blended_tangent)),\n        normalize(vNormal)\n      );\n    }\n\n    vec3 blended_bump(vec3 blend_weights) {\n      vec2 coord1 = vPosition.yz * texScale;\n      vec2 coord2 = vPosition.zx * texScale;\n      vec2 coord3 = vPosition.xy * texScale;\n\n      vec3 bump1 = texture2D(normalMap, coord1).rgb;\n      vec3 bump2 = texture2D(normalMap, coord2).rgb;\n      vec3 bump3 = texture2D(normalMap, coord3).rgb;\n\n      return bump1 * blend_weights.xxx +\n             bump2 * blend_weights.yyy +\n             bump3 * blend_weights.zzz;\n    }\n\n    void main() {\n      // Using triplanar texturing, as in http://http.developer.nvidia.com/GPUGems3/gpugems3_ch01.html\n      vec3 blend_weights = abs(normalize(vONormal.xyz));\n      blend_weights = (blend_weights - 0.2) * 7.;\n      blend_weights = max(blend_weights, 0.);\n      blend_weights /= (blend_weights.x + blend_weights.y + blend_weights.z);\n\n      mat3 tsb = tangent_space_basis(blend_weights);\n      vec3 bump = blended_bump(blend_weights);\n\n      vec3 normalTex = bump * 2.0 - 1.0;\n      normalTex.xy *= normalScale;\n      normalTex.y *= -1.;\n      normalTex = normalize(normalTex);\n      vec3 finalNormal = tsb * normalTex;\n      vec3 base = spherical_environment_map(vU, finalNormal);\n\n      float rim = 1.75 * max(0., abs(dot(normalize(vNormal), normalize(-vOPosition.xyz))));\n      base += 10. * base * color * clamp(1. - rim, 0., .15);\n\n      base = vec3(1.) - (vec3(1.) - base) * (vec3(1.) - base);\n\n      float dither = .05 * random(vec3(1.), length(gl_FragCoord));\n      base += vec3(dither);\n\n      gl_FragColor = vec4(base.rgb, 1.);\n    }",
attributes:{position:{buffer:p},normal:{buffer:g}},uniforms:{color:[36/255,70/255,106/255],sphereColor:[36/255,70/255,106/255],normalScale:1,texScale:10,normalMatrix:function(b){var a=l.create();l.normalFromMat4(a,b.view);return a},textureMap:a.prop("textureMap"),normalMap:a.prop("normalMap")},elements:u}),r=1.2/((Math.sqrt(20)-1)/4+1),x=[.5,.5,.5],v=[1.5,1.5,1.5],t=[0,1,2].map(function(b){return(v[b]-x[b])/50}),qa=50*Math.sqrt(r/12),z=function(a){a*=.5;for(var d=new Float32Array(125E3),g=0;20>g;g++)for(var l=
void 0,c=void 0,p=void 0,k=void 0,u=void 0,w=void 0,w=void 0,p=$jscomp.makeIterator([.27*Math.sin(g+1.26*a*(1.03+.5*Math.cos(.21*g)))+.5,.27*Math.cos(g+1.12*a*.21*Math.sin(.72+.83*g))+.5,.27*Math.cos(g+.132*a*Math.sin(.92+.53*g))+.5]),l=p.next().value,c=p.next().value,p=p.next().value,w=[l,c,p].map(function(h){h*=50;return[Math.max(Math.floor(h-qa),1),Math.min(Math.floor(h+qa),49)]}),k=w[0],u=w[1],w=w[2],v=w[0];v<w[1];v++)for(var F=2500*v,T=u[0];T<u[1];T++)for(var z=50*T,n=k[0];n<k[1];n++){var y=
n/50-l,h=T/50-c,f=v/50-p,y=r/(1E-6+y*y+h*h+f*f)-12;0<y&&(d[F+z+n]+=y)}a=b(e(d,[50,50,50]),80);d=Array(a.positions.length);for(g=0;g<a.positions.length;g++){l=a.positions[g];c=Array(3);for(p=0;3>p;p++)c[p]=x[p]+l[p]*t[p];d[g]=c}return{positions:d,cells:a.cells}};c("resl")({manifest:{sphereTexture:{type:"image",src:"assets/spheretexture.jpg",parser:function(b){return a.texture({data:b,mag:"linear",min:"linear"})}},normalTexture:{type:"image",src:"assets/normaltexture.jpg",parser:function(b){return a.texture({data:b,
wrapT:"repeat",wrapS:"repeat",min:"linear mipmap linear",mag:"linear"})}}},onDone:function(b){var e=b.sphereTexture,l=b.normalTexture;a.frame(function(b){b=z(b.time);p({data:b.positions});u({data:b.cells});g({data:k(b.cells,b.positions)});d(function(){T({depth:{enable:!1,mask:!1}});a.clear({depth:1});w({textureMap:e,normalMap:l})})})}})},{"../regl":91,"./util/camera":2,"angle-normals":39,"gl-mat3":58,ndarray:79,resl:83,"surface-nets":84}],2:[function(c,n,m){var a=c("mouse-change"),b=c("mouse-wheel"),
e=c("gl-mat4/identity"),k=c("gl-mat4/perspective"),l=c("gl-mat4/lookAt");n.exports=function(d,p){function g(b){b*=.9;return.1>Math.abs(b)?0:b}function c(b){var a=T.center,d=T.eye,e=T.up;T.theta+=t;T.phi=Math.min(Math.max(T.phi+qa,-Math.PI/2),Math.PI/2);T.distance=Math.min(Math.max(T.distance+z,x),v);t=g(t);qa=g(qa);z=g(z);for(var p=T.theta,k=T.phi,u=Math.exp(T.distance),F=u*Math.sin(p)*Math.cos(k),p=u*Math.cos(p)*Math.cos(k),k=u*Math.sin(k),u=0;3>u;++u)d[u]=a[u]+F*r[u]+p*w[u]+k*e[u];l(T.view,d,a,
e);n(b)}var T={view:e(new Float32Array(16)),projection:e(new Float32Array(16)),center:new Float32Array(p.center||3),theta:p.theta||0,phi:p.phi||0,distance:Math.log(p.distance||10),eye:new Float32Array(3),up:new Float32Array(p.up||[0,1,0])},w=new Float32Array([1,0,0]),r=new Float32Array([0,0,1]),x=Math.log("minDistance"in p?p.minDistance:.1),v=Math.log("maxDistance"in p?p.maxDistance:1E3),t=0,qa=0,z=0,B=0,S=0;a(function(b,a,d){if(b&1){b=(d-S)/window.innerHeight;var e=Math.max(T.distance,.5);t+=(a-
B)/window.innerWidth*e;qa+=e*b}B=a;S=d});b(function(b,a){z+=a/window.innerHeight});var n=d({context:Object.assign({},T,{projection:function(b){return k(T.projection,Math.PI/4,b.viewportWidth/b.viewportHeight,.01,1E3)}}),uniforms:Object.keys(T).reduce(function(b,a){b[a]=d.context(a);return b},{})});Object.keys(T).forEach(function(b){c[b]=T[b]});return c}},{"gl-mat4/identity":67,"gl-mat4/lookAt":68,"gl-mat4/perspective":69,"mouse-change":75,"mouse-wheel":77}],3:[function(c,n,m){function a(){this.w=
this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var b=c("./util/sorted-object-keys"),e=c("./util/check"),k=c("./util/values"),l=c("./constants/dtypes.json"),d=c("./util/is-typed-array"),p=c("./util/is-ndarray"),g=c("./constants/primitives.json"),u="attributes elements offset count primitive instances".split(" ");n.exports=function(c,w,r,x,v,t,qa){function z(b){if(b!==L.currentVAO){var a=w.oes_vertex_array_object;
b?a.bindVertexArrayOES(b.vao):a.bindVertexArrayOES(null);L.currentVAO=b}}function B(b){if(b!==L.currentVAO){if(b)b.bindAttrs();else{for(var a=w.angle_instanced_arrays,d=0;d<C.length;++d){var e=C[d];e.buffer?(c.enableVertexAttribArray(d),e.buffer.bind(),c.vertexAttribPointer(d,e.size,e.type,e.normalized,e.stride,e.offfset),a&&e.divisor&&a.vertexAttribDivisorANGLE(d,e.divisor)):(c.disableVertexAttribArray(d),c.vertexAttrib4f(d,e.x,e.y,e.z,e.w))}qa.elements?c.bindBuffer(34963,qa.elements.buffer.buffer):
c.bindBuffer(34963,null)}L.currentVAO=b}}function S(){k(aa).forEach(function(b){b.destroy()})}function n(){this.id=++I;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=w.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;aa[this.id]=this;this.buffers=[]}function m(){w.oes_vertex_array_object&&k(aa).forEach(function(b){b.refresh()})}var H=r.maxAttributes,C=Array(H);for(r=0;r<H;++r)C[r]=new a;var I=0,aa={},L={Record:a,
scope:{},state:C,currentVAO:null,targetVAO:null,restore:w.oes_vertex_array_object?m:function(){},createVAO:function(c){function k(c){var x;if(Array.isArray(c))x=c,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{e("object"===typeof c,"invalid arguments for create vao");e("attributes"in c,"must specify attributes for vao");if(c.elements){var y=c.elements;r.ownsElements?("function"===typeof y&&"elements"===y._reglType?
r.elements.destroy():r.elements(y),r.ownsElements=!1):t.getElements(c.elements)?(r.elements=c.elements,r.ownsElements=!1):(r.elements=t.create(c.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;x=c.attributes;r.offset=0;r.count=-1;r.instances=-1;r.primitive=4;r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType);"offset"in c&&(r.offset=c.offset|0);"count"in c&&(r.count=c.count|0);"instances"in c&&(r.instances=c.instances|0);"primitive"in
c&&(e(c.primitive in g,"bad primitive type: "+c.primitive),r.primitive=g[c.primitive]);e.optional(function(){for(var h=b(c),f=0;f<h.length;++f)e(0<=u.indexOf(h[f]),'invalid option for vao: "'+h[f]+'" valid options are '+u)});e(Array.isArray(x),"attributes must be an array")}e(x.length<H,"too many attributes");e(0<x.length,"must specify at least one attribute");var y={},h=r.attributes;h.length=x.length;for(var f=0;f<x.length;++f){var q=x[f],ca=h[f]=new a,L=q.data||q;if(Array.isArray(L)||d(L)||p(L)){var I;
r.buffers[f]&&(I=r.buffers[f],d(L)&&I._buffer.byteLength>=L.byteLength?I.subdata(L):(I.destroy(),r.buffers[f]=null));r.buffers[f]||(I=r.buffers[f]=v.create(q,34962,!1,!0));ca.buffer=v.getBuffer(I);ca.size=ca.buffer.dimension|0;ca.normalized=!1;ca.type=ca.buffer.dtype;ca.offset=0;ca.stride=0;ca.divisor=0;ca.state=1;y[f]=1}else v.getBuffer(q)?(ca.buffer=v.getBuffer(q),ca.size=ca.buffer.dimension|0,ca.normalized=!1,ca.type=ca.buffer.dtype,ca.offset=0,ca.stride=0,ca.divisor=0,ca.state=1):v.getBuffer(q.buffer)?
(ca.buffer=v.getBuffer(q.buffer),ca.size=(+q.size||ca.buffer.dimension)|0,ca.normalized=!!q.normalized||!1,"type"in q?(e.parameter(q.type,l,"invalid buffer type"),ca.type=l[q.type]):ca.type=ca.buffer.dtype,ca.offset=(q.offset||0)|0,ca.stride=(q.stride||0)|0,ca.divisor=(q.divisor||0)|0,ca.state=1,e(1<=ca.size&&4>=ca.size,"size must be between 1 and 4"),e(0<=ca.offset,"invalid offset"),e(0<=ca.stride&&255>=ca.stride,"stride must be between 0 and 255"),e(0<=ca.divisor,"divisor must be positive"),e(!ca.divisor||
!!w.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in q?(e(0<f,"first attribute must not be a constant"),ca.x=+q.x||0,ca.y=+q.y||0,ca.z=+q.z||0,ca.w=+q.w||0,ca.state=2):e(!1,"invalid attribute spec for location "+f)}for(I=0;I<r.buffers.length;++I)!y[I]&&r.buffers[I]&&(r.buffers[I].destroy(),r.buffers[I]=null);r.refresh();return k}var r=new n;x.vaoCount+=1;k.destroy=function(){for(var b=0;b<r.buffers.length;++b)r.buffers[b]&&r.buffers[b].destroy();r.buffers.length=
0;r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1);r.destroy()};k._vao=r;k._reglType="vao";return k(c)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var a=0;a<C.length;++a){var d=C[a];d.buffer===b&&(c.disableVertexAttribArray(a),d.buffer=null)}},setVAO:w.oes_vertex_array_object?z:B,clear:w.oes_vertex_array_object?S:function(){}};n.prototype.bindAttrs=function(){for(var b=w.angle_instanced_arrays,a=this.attributes,d=0;d<a.length;++d){var e=
a[d];e.buffer?(c.enableVertexAttribArray(d),c.bindBuffer(34962,e.buffer.buffer),c.vertexAttribPointer(d,e.size,e.type,e.normalized,e.stride,e.offset),b&&e.divisor&&b.vertexAttribDivisorANGLE(d,e.divisor)):(c.disableVertexAttribArray(d),c.vertexAttrib4f(d,e.x,e.y,e.z,e.w))}for(b=a.length;b<H;++b)c.disableVertexAttribArray(b);(b=t.getElements(this.elements))?c.bindBuffer(34963,b.buffer.buffer):c.bindBuffer(34963,null)};n.prototype.refresh=function(){var b=w.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),
this.bindAttrs(),L.currentVAO=null,b.bindVertexArrayOES(null))};n.prototype.destroy=function(){if(this.vao){var b=w.oes_vertex_array_object;this===L.currentVAO&&(L.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);aa[this.id]&&(delete aa[this.id],--x.vaoCount)};return L}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./util/check":22,"./util/is-ndarray":29,
"./util/is-typed-array":31,"./util/sorted-object-keys":35,"./util/values":37}],4:[function(c,n,m){function a(b){return r[Object.prototype.toString.call(b)]|0}function b(b,a){for(var d=0;d<a.length;++d)b[d]=a[d]}function e(b,a,d,e,g,l,c){for(var p=0,k=0;k<d;++k)for(var u=0;u<e;++u)b[p++]=a[g*k+l*u+c]}var k=c("./util/sorted-object-keys"),l=c("./util/check"),d=c("./util/is-typed-array"),p=c("./util/is-ndarray"),g=c("./util/values"),u=c("./util/pool");m=c("./util/flatten");var T=m.flatten,w=m.shape,r=
c("./constants/arraytypes.json"),x=c("./constants/dtypes.json"),v=c("./constants/usage.json"),t=[];t[5120]=1;t[5122]=2;t[5124]=4;t[5121]=1;t[5123]=2;t[5125]=4;t[5126]=4;n.exports=function(c,r,B,S){function n(b){this.id=I++;this.buffer=c.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;B.profile&&(this.stats={size:0})}function m(b,a,d){b.byteLength=a.byteLength;c.bufferData(b.type,a,d)}function H(g,c,k,r,v,y){g.usage=k;if(Array.isArray(c)){if(g.dtype=
r||5126,0<c.length)if(Array.isArray(c[0])){v=w(c);for(var h=r=1;h<v.length;++h)r*=v[h];g.dimension=r;c=T(c,v,g.dtype);m(g,c,k);y?g.persistentData=c:u.freeType(c)}else"number"===typeof c[0]?(g.dimension=v,v=u.allocType(g.dtype,c.length),b(v,c),m(g,v,k),y?g.persistentData=v:u.freeType(v)):d(c[0])?(g.dimension=c[0].length,g.dtype=r||a(c[0])||5126,c=T(c,[c.length,c[0].length],g.dtype),m(g,c,k),y?g.persistentData=c:u.freeType(c)):l.raise("invalid buffer data")}else if(d(c))g.dtype=r||a(c),g.dimension=
v,m(g,c,k),y&&(g.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(p(c)){v=c.shape;var f=c.stride,h=c.offset,q=0,x=0,t=0,I=0;1===v.length?(q=v[0],x=1,t=f[0],I=0):2===v.length?(q=v[0],x=v[1],t=f[0],I=f[1]):l.raise("invalid shape");g.dtype=r||a(c.data)||5126;g.dimension=x;v=u.allocType(g.dtype,q*x);e(v,c.data,q,x,t,I,h);m(g,v,k);y?g.persistentData=v:u.freeType(v)}else c instanceof ArrayBuffer?(g.dtype=5121,g.dimension=v,m(g,c,k),y&&(g.persistentData=new Uint8Array(new Uint8Array(c)))):
l.raise("invalid buffer data")}function C(b){r.bufferCount--;S(b);var a=b.buffer;l(a,"buffer must not be deleted already");c.deleteBuffer(a);b.buffer=null;delete aa[b.id]}var I=0,aa={};n.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)};n.prototype.destroy=function(){C(this)};var L=[];B.profile&&(r.getTotalBufferSize=function(){var b=0;k(aa).forEach(function(a){b+=aa[a].stats.size});return b});return{create:function(g,k,I,L){function S(b){var a=35044,e=null,g=0,k=0,y=1;Array.isArray(b)||
d(b)||p(b)||b instanceof ArrayBuffer?e=b:"number"===typeof b?g=b|0:b&&(l.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(l(null===e||Array.isArray(e)||d(e)||p(e),"invalid data for buffer"),e=b.data),"usage"in b&&(l.parameter(b.usage,v,"invalid buffer usage"),a=v[b.usage]),"type"in b&&(l.parameter(b.type,x,"invalid buffer type"),k=x[b.type]),"dimension"in b&&(l.type(b.dimension,"number","invalid dimension"),y=b.dimension|0),"length"in b&&(l.nni(g,"buffer length must be a nonnegative integer"),
g=b.length|0));h.bind();e?H(h,e,a,k,y,L):(g&&c.bufferData(h.type,g,a),h.dtype=k||5121,h.usage=a,h.dimension=y,h.byteLength=g);B.profile&&(h.stats.size=h.byteLength*t[h.dtype]);return S}function y(b,a){l(a+b.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+a+" to a buffer of size "+h.byteLength);c.bufferSubData(h.type,a,b)}r.bufferCount++;var h=new n(k);aa[h.id]=h;I||S(g);S._reglType="buffer";S._buffer=h;S.subdata=
function(f,g){var c=(g||0)|0,k;h.bind();if(d(f)||f instanceof ArrayBuffer)y(f,c);else if(Array.isArray(f)){if(0<f.length)if("number"===typeof f[0]){var r=u.allocType(h.dtype,f.length);b(r,f);y(r,c);u.freeType(r)}else Array.isArray(f[0])||d(f[0])?(k=w(f),r=T(f,k,h.dtype),y(r,c),u.freeType(r)):l.raise("invalid buffer data")}else if(p(f)){k=f.shape;var v=f.stride,x=r=0,t=0,I=0;1===k.length?(r=k[0],x=1,t=v[0],I=0):2===k.length?(r=k[0],x=k[1],t=v[0],I=v[1]):l.raise("invalid shape");k=Array.isArray(f.data)?
h.dtype:a(f.data);k=u.allocType(k,r*x);e(k,f.data,r,x,t,I,f.offset);y(k,c);u.freeType(k)}else l.raise("invalid data for buffer subdata");return S};B.profile&&(S.stats=h.stats);S.destroy=function(){C(h)};return S},createStream:function(b,a){var d=L.pop();d||(d=new n(b));d.bind();H(d,a,35040,0,1,!1);return d},destroyStream:function(b){L.push(b)},clear:function(){g(aa).forEach(C);L.forEach(C)},getBuffer:function(b){return b&&b._buffer instanceof n?b._buffer:null},restore:function(){g(aa).forEach(function(b){b.buffer=
c.createBuffer();c.bindBuffer(b.type,b.buffer);c.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:H}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,"./constants/usage.json":8,"./util/check":22,"./util/flatten":27,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/pool":33,"./util/sorted-object-keys":35,"./util/values":37}],5:[function(c,n,m){n.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(c,n,m){n.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],7:[function(c,n,m){n.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(c,n,m){n.exports={"static":35044,
dynamic:35048,stream:35040}},{}],9:[function(c,n,m){function a(b){return Array.isArray(b)||r(b)||x(b)}function b(b){return b.sort(function(b,a){return"viewport"===b?-1:"viewport"===a?1:b<a?-1:1})}function e(b,a,d,e){this.thisDep=b;this.contextDep=a;this.propDep=d;this.append=e}function k(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function l(b){return new e(!1,!1,!1,b)}function d(b,a){var d=b.type;if(0===d)return d=b.data.length,new e(!0,1<=d,2<=d,a);if(4===d)return d=b.data,new e(d.thisDep,
d.contextDep,d.propDep,a);if(5===d)return new e(!1,!1,!1,a);if(6===d){for(var g=d=!1,c=!1,l=0;l<b.data.length;++l){var h=b.data[l];1===h.type?c=!0:2===h.type?g=!0:3===h.type?d=!0:0===h.type?(d=!0,h=h.data,1<=h&&(g=!0),2<=h&&(c=!0)):4===h.type&&(d=d||h.data.thisDep,g=g||h.data.contextDep,c=c||h.data.propDep)}return new e(d,g,c,a)}return new e(3===d,2===d,1===d,a)}var p=c("./util/sorted-object-keys"),g=c("./util/check"),u=c("./util/extend"),T=c("./util/codegen"),w=c("./util/loop"),r=c("./util/is-typed-array"),
x=c("./util/is-ndarray"),v=c("./util/is-array-like"),t=c("./dynamic"),qa=c("./constants/primitives.json"),z=c("./constants/dtypes.json"),B=["x","y","z","w"],S="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),J={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},fa="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),H={never:512,less:513,"<":513,equal:514,"=":514,
"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},C={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},I={frag:35632,vert:35633},aa={cw:2304,ccw:2305},L=new e(!1,!1,!1,function(){});n.exports=function(c,r,x,n,m,y,h,f,q,ca,Wa,kc,pa,Na,ia){function Q(b){return b.replace(".","_")}function O(b,h,a){var d=Q(b);da.push(b);E[d]=K[d]=!!a;ua[d]=h}function W(b,h,
a){var d=Q(b);da.push(b);Array.isArray(a)?(K[d]=a.slice(),E[d]=a.slice()):K[d]=E[d]=a;sa[d]=h}function ta(){var b=T(),h=b.link,a=b.global;b.id=pc++;b.batchId="0";var d=h(Ia),f=b.shared={props:"a0"};p(Ia).forEach(function(b){f[b]=a.def(d,".",b)});g.optional(function(){b.CHECK=h(g);b.commandStr=g.guessCommand();b.command=h(b.commandStr);b.assert=function(b,a,d){b("if(!(",a,"))",this.CHECK,".commandRaise(",h(d),",",this.command,");")};A.invalidBlendCombinations=fa});var e=b.next={},c=b.current={};p(sa).forEach(function(b){Array.isArray(K[b])&&
(e[b]=a.def(f.next,".",b),c[b]=a.def(f.current,".",b))});var l=b.constants={};p(A).forEach(function(b){l[b]=a.def(JSON.stringify(A[b]))});b.invoke=function(a,d){switch(d.type){case 0:var e=["this",f.context,f.props,b.batchId];return a.def(h(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return a.def(f.props,d.data);case 2:return a.def(f.context,d.data);case 3:return a.def("this",d.data);case 4:return d.data.append(b,a),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(h){return b.invoke(a,
h)})}};b.attribCache={};var k={};b.scopeAttrib=function(b){b=r.id(b);if(b in k)return k[b];var a=ca.scope[b];a||(a=ca.scope[b]=new ka);return k[b]=h(a)};return b}function R(b){var h=b["static"];b=b.dynamic;var a;if("profile"in h){var f=!!h.profile;a=l(function(b,h){return f});a.enable=f}else if("profile"in b){var e=b.profile;a=d(e,function(b,h){return b.invoke(h,e)})}return a}function Vb(b,h){var a=b["static"],e=b.dynamic;if("framebuffer"in a){var c=a.framebuffer;return c?(c=f.getFramebuffer(c),g.command(c,
"invalid framebuffer object"),l(function(b,h){var a=b.link(c),d=b.shared;h.set(d.framebuffer,".next",a);d=d.context;h.set(d,".framebufferWidth",a+".width");h.set(d,".framebufferHeight",a+".height");return a})):l(function(b,h){var a=b.shared;h.set(a.framebuffer,".next","null");a=a.context;h.set(a,".framebufferWidth",a+".drawingBufferWidth");h.set(a,".framebufferHeight",a+".drawingBufferHeight");return"null"})}if("framebuffer"in e){var k=e.framebuffer;return d(k,function(b,h){var a=b.invoke(h,k),d=
b.shared,f=d.framebuffer,e=h.def(f,".getFramebuffer(",a,")");g.optional(function(){b.assert(h,"!"+a+"||"+e,"invalid framebuffer object")});h.set(f,".next",e);d=d.context;h.set(d,".framebufferWidth",e+"?"+e+".width:"+d+".drawingBufferWidth");h.set(d,".framebufferHeight",e+"?"+e+".height:"+d+".drawingBufferHeight");return e})}return null}function Xa(b,h,a){function f(b){if(b in c){var k=c[b];g.commandType(k,"object","invalid "+b,a.commandStr);var p=!0,q=k.x|0,y=k.y|0,u,r;"width"in k?(u=k.width|0,g.command(0<=
u,"invalid "+b,a.commandStr)):p=!1;"height"in k?(r=k.height|0,g.command(0<=r,"invalid "+b,a.commandStr)):p=!1;return new e(!p&&h&&h.thisDep,!p&&h&&h.contextDep,!p&&h&&h.propDep,function(b,h){var a=b.shared.context,d=u;"width"in k||(d=h.def(a,".","framebufferWidth","-",q));var f=r;"height"in k||(f=h.def(a,".","framebufferHeight","-",y));return[q,y,d,f]})}if(b in l){var w=l[b],p=d(w,function(h,a){var d=h.invoke(a,w);g.optional(function(){h.assert(a,d+"&&typeof "+d+'==="object"',"invalid "+b)});var f=
h.shared.context,e=a.def(d,".x|0"),c=a.def(d,".y|0"),l=a.def('"width" in ',d,"?",d,".width|0:","(",f,".","framebufferWidth","-",e,")"),k=a.def('"height" in ',d,"?",d,".height|0:","(",f,".","framebufferHeight","-",c,")");g.optional(function(){h.assert(a,l+">=0&&"+k+">=0","invalid "+b)});return[e,c,l,k]});h&&(p.thisDep=p.thisDep||h.thisDep,p.contextDep=p.contextDep||h.contextDep,p.propDep=p.propDep||h.propDep);return p}return h?new e(h.thisDep,h.contextDep,h.propDep,function(b,h){var a=b.shared.context;
return[0,0,h.def(a,".","framebufferWidth"),h.def(a,".","framebufferHeight")]}):null}var c=b["static"],l=b.dynamic;if(b=f("viewport")){var k=b;b=new e(b.thisDep,b.contextDep,b.propDep,function(b,h){var a=k.append(b,h),d=b.shared.context;h.set(d,".viewportWidth",a[2]);h.set(d,".viewportHeight",a[3]);return a})}return{viewport:b,scissor_box:f("scissor.box")}}function V(b,h){var a=b["static"];if("string"===typeof a.frag&&"string"===typeof a.vert){if(0<p(h.dynamic).length)return null;var a=h["static"],
d=p(a);if(0<d.length&&"number"===typeof a[d[0]]){for(var f=[],e=0;e<d.length;++e)g("number"===typeof a[d[e]],"must specify all vertex attribute locations when using vaos"),f.push([a[d[e]]|0,d[e]]);return f}}return null}function D(b,h,a){function f(b){if(b in c){var h=r.id(c[b]);g.optional(function(){Wa.shader(I[b],h,g.guessCommand())});var a=l(function(){return h});a.id=h;return a}if(b in p){var e=p[b];return d(e,function(h,a){var d=h.invoke(a,e),f=a.def(h.shared.strings,".id(",d,")");g.optional(function(){a(h.shared.shader,
".shader(",I[b],",",f,",",h.command,");")});return f})}return null}var c=b["static"],p=b.dynamic,q=f("frag"),y=f("vert"),u=null;k(q)&&k(y)?(u=Wa.program(y.id,q.id,null,a),b=l(function(b,h){return b.link(u)})):b=new e(q&&q.thisDep||y&&y.thisDep,q&&q.contextDep||y&&y.contextDep,q&&q.propDep||y&&y.propDep,function(b,h){var a=b.shared.shader,d;d=q?q.append(b,h):h.def(a,".","frag");var f;f=y?y.append(b,h):h.def(a,".","vert");var e=a+".program("+f+","+d;g.optional(function(){e+=","+b.command});return h.def(e+
")")});return{frag:q,vert:y,progVar:b,program:u}}function na(b,h){function f(b,a){if(b in c){var k=c[b]|0;a?u.offset=k:u.instances=k;g.command(!a||0<=k,"invalid "+b,h.commandStr);return l(function(b,h){a&&(b.OFFSET=k);return k})}if(b in q){var p=q[b];return d(p,function(h,d){var f=h.invoke(d,p);a&&(h.OFFSET=f,g.optional(function(){h.assert(d,f+">=0","invalid "+b)}));return f})}if(a){if(v)return l(function(b,h){return b.OFFSET=0});if(r)return new e(w.thisDep,w.contextDep,w.propDep,function(b,h){return h.def(b.shared.vao+
".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(r)return new e(w.thisDep,w.contextDep,w.propDep,function(b,h){return h.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var c=b["static"],q=b.dynamic,u={},r=!1,w=function(){if("vao"in c){var b=c.vao;null!==b&&null===ca.getVAO(b)&&(b=ca.createVAO(b));r=!0;u.vao=b;return l(function(h){var a=ca.getVAO(b);return a?h.link(a):"null"})}if("vao"in q){r=!0;var h=q.vao;return d(h,function(b,a){var d=b.invoke(a,
h);return a.def(b.shared.vao+".getVAO("+d+")")})}return null}(),v=!1,A=function(){if("elements"in c){var b=c.elements;u.elements=b;if(a(b)){var f=u.elements=y.create(b,!0),b=y.getElements(f);v=!0}else b&&(b=y.getElements(b),v=!0,g.command(b,"invalid elements",h.commandStr));f=l(function(h,a){if(b){var d=h.link(b);return h.ELEMENTS=d}return h.ELEMENTS=null});f.value=b;return f}if("elements"in q){v=!0;var k=q.elements;return d(k,function(b,h){var a=b.shared,d=a.isBufferArgs,a=a.elements,f=b.invoke(h,
k),e=h.def("null"),d=h.def(d,"(",f,")"),c=b.cond(d).then(e,"=",a,".createStream(",f,");")["else"](e,"=",a,".getElements(",f,");");g.optional(function(){b.assert(c["else"],"!"+f+"||"+e,"invalid elements")});h.entry(c);h.exit(b.cond(d).then(a,".destroyStream(",e,");"));return b.ELEMENTS=e})}return r?new e(w.thisDep,w.contextDep,w.propDep,function(b,h){return h.def(b.shared.vao+".currentVAO?"+b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),x=f("offset",!0),t=function(){if("primitive"in
c){var b=c.primitive;u.primitive=b;g.commandParameter(b,qa,"invalid primitve",h.commandStr);return l(function(h,a){return qa[b]})}if("primitive"in q){var a=q.primitive;return d(a,function(b,h){var d=b.constants.primTypes,f=b.invoke(h,a);g.optional(function(){b.assert(h,f+" in "+d,"invalid primitive, must be one of "+p(qa))});return h.def(d,"[",f,"]")})}return v?k(A)?A.value?l(function(b,h){return h.def(b.ELEMENTS,".primType")}):l(function(){return 4}):new e(A.thisDep,A.contextDep,A.propDep,function(b,
h){var a=b.ELEMENTS;return h.def(a,"?",a,".primType:",4)}):r?new e(w.thisDep,w.contextDep,w.propDep,function(b,h){return h.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),I=function(){if("count"in c){var b=c.count|0;u.count=b;g.command("number"===typeof b&&0<=b,"invalid vertex count",h.commandStr);return l(function(){return b})}if("count"in q){var a=q.count;return d(a,function(b,h){var d=b.invoke(h,a);g.optional(function(){b.assert(h,"typeof "+d+'==="number"&&'+d+
">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(v){if(k(A)){if(A)return x?new e(x.thisDep,x.contextDep,x.propDep,function(b,h){var a=h.def(b.ELEMENTS,".vertCount-",b.OFFSET);g.optional(function(){b.assert(h,a+">=0","invalid vertex offset/element buffer too small")});return a}):l(function(b,h){return h.def(b.ELEMENTS,".vertCount")});var f=l(function(){return-1});g.optional(function(){f.MISSING=!0});return f}var p=new e(A.thisDep||x.thisDep,A.contextDep||x.contextDep,A.propDep||x.propDep,
function(b,h){var a=b.ELEMENTS;return b.OFFSET?h.def(a,"?",a,".vertCount-",b.OFFSET,":-1"):h.def(a,"?",a,".vertCount:-1")});g.optional(function(){p.DYNAMIC=!0});return p}return r?new e(w.thisDep,w.contextDep,w.propDep,function(b,h){return h.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),ua=f("instances",!1);return{elements:A,primitive:t,count:I,instances:ua,offset:x,vao:w,vaoActive:r,elementsActive:v,"static":u}}function ba(b,h){var a=b["static"],f=b.dynamic,e={};da.forEach(function(b){function c(h,
g){if(b in a){var p=h(a[b]);e[k]=l(function(){return p})}else if(b in f){var q=f[b];e[k]=d(q,function(b,h){return g(b,h,b.invoke(h,q))})}}var k=Q(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return c(function(a){g.commandType(a,"boolean",b,h.commandStr);return a},function(h,a,d){g.optional(function(){h.assert(a,"typeof "+d+'==="boolean"',
"invalid flag "+b,h.commandStr)});return d});case "depth.func":return c(function(a){g.commandParameter(a,H,"invalid "+b,h.commandStr);return H[a]},function(h,a,d){var f=h.constants.compareFuncs;g.optional(function(){h.assert(a,d+" in "+f,"invalid "+b+", must be one of "+p(H))});return a.def(f,"[",d,"]")});case "depth.range":return c(function(b){g.command(v(b)&&2===b.length&&"number"===typeof b[0]&&"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",h.commandStr);return b},function(b,h,a){g.optional(function(){b.assert(h,
b.shared.isArrayLike+"("+a+")&&"+a+".length===2&&typeof "+a+'[0]==="number"&&typeof '+a+'[1]==="number"&&'+a+"[0]<="+a+"[1]","depth range must be a 2d array")});var d=h.def("+",a,"[0]"),f=h.def("+",a,"[1]");return[d,f]});case "blend.func":return c(function(b){g.commandType(b,"object","blend.func",h.commandStr);var a="srcRGB"in b?b.srcRGB:b.src,d="srcAlpha"in b?b.srcAlpha:b.src,f="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;g.commandParameter(a,J,k+".srcRGB",h.commandStr);g.commandParameter(d,
J,k+".srcAlpha",h.commandStr);g.commandParameter(f,J,k+".dstRGB",h.commandStr);g.commandParameter(b,J,k+".dstAlpha",h.commandStr);g.command(-1===fa.indexOf(a+", "+f),"unallowed blending combination (srcRGB, dstRGB) = ("+a+", "+f+")",h.commandStr);return[J[a],J[f],J[d],J[b]]},function(h,a,d){function f(c,k){var l=a.def('"',c,k,'" in ',d,"?",d,".",c,k,":",d,".",c);g.optional(function(){h.assert(a,l+" in "+e,"invalid "+b+"."+c+k+", must be one of "+p(J))});return l}var e=h.constants.blendFuncs;g.optional(function(){h.assert(a,
d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var c=f("src","RGB"),k=f("dst","RGB");g.optional(function(){h.assert(a,h.constants.invalidBlendCombinations+".indexOf("+c+'+", "+'+k+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var l=a.def(e,"[",c,"]"),q=a.def(e,"[",f("src","Alpha"),"]"),y=a.def(e,"[",k,"]"),u=a.def(e,"[",f("dst","Alpha"),"]");return[l,y,q,u]});case "blend.equation":return c(function(a){if("string"===typeof a)return g.commandParameter(a,
va,"invalid "+b,h.commandStr),[va[a],va[a]];if("object"===typeof a)return g.commandParameter(a.rgb,va,b+".rgb",h.commandStr),g.commandParameter(a.alpha,va,b+".alpha",h.commandStr),[va[a.rgb],va[a.alpha]];g.commandRaise("invalid blend.equation",h.commandStr)},function(h,a,d){var f=h.constants.blendEquations,e=a.def(),c=a.def(),k=h.cond("typeof ",d,'==="string"');g.optional(function(){function a(b,d,e){h.assert(b,e+" in "+f,"invalid "+d+", must be one of "+p(va))}a(k.then,b,d);h.assert(k["else"],d+
"&&typeof "+d+'==="object"',"invalid "+b);a(k["else"],b+".rgb",d+".rgb");a(k["else"],b+".alpha",d+".alpha")});k.then(e,"=",c,"=",f,"[",d,"];");k["else"](e,"=",f,"[",d,".rgb];",c,"=",f,"[",d,".alpha];");a(k);return[e,c]});case "blend.color":return c(function(b){g.command(v(b)&&4===b.length,"blend.color must be a 4d array",h.commandStr);return w(4,function(h){return+b[h]})},function(b,h,a){g.optional(function(){b.assert(h,b.shared.isArrayLike+"("+a+")&&"+a+".length===4","blend.color must be a 4d array")});
return w(4,function(b){return h.def("+",a,"[",b,"]")})});case "stencil.mask":return c(function(b){g.commandType(b,"number",k,h.commandStr);return b|0},function(b,h,a){g.optional(function(){b.assert(h,"typeof "+a+'==="number"',"invalid stencil.mask")});return h.def(a,"|0")});case "stencil.func":return c(function(a){g.commandType(a,"object",k,h.commandStr);var d=a.cmp||"keep",f=a.ref||0;a="mask"in a?a.mask:-1;g.commandParameter(d,H,b+".cmp",h.commandStr);g.commandType(f,"number",b+".ref",h.commandStr);
g.commandType(a,"number",b+".mask",h.commandStr);return[H[d],f,a]},function(b,h,a){var d=b.constants.compareFuncs;g.optional(function(){function f(){b.assert(h,Array.prototype.join.call(arguments,""),"invalid stencil.func")}f(a+"&&typeof ",a,'==="object"');f('!("cmp" in ',a,")||(",a,".cmp in ",d,")")});var f=h.def('"cmp" in ',a,"?",d,"[",a,".cmp]",":",7680),e=h.def(a,".ref|0"),c=h.def('"mask" in ',a,"?",a,".mask|0:-1");return[f,e,c]});case "stencil.opFront":case "stencil.opBack":return c(function(a){g.commandType(a,
"object",k,h.commandStr);var d=a.fail||"keep",f=a.zfail||"keep";a=a.zpass||"keep";g.commandParameter(d,C,b+".fail",h.commandStr);g.commandParameter(f,C,b+".zfail",h.commandStr);g.commandParameter(a,C,b+".zpass",h.commandStr);return["stencil.opBack"===b?1029:1028,C[d],C[f],C[a]]},function(h,a,d){function f(c){g.optional(function(){h.assert(a,'!("'+c+'" in '+d+")||("+d+"."+c+" in "+e+")","invalid "+b+"."+c+", must be one of "+p(C))});return a.def('"',c,'" in ',d,"?",e,"[",d,".",c,"]:",7680)}var e=h.constants.stencilOps;
g.optional(function(){h.assert(a,d+"&&typeof "+d+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return c(function(b){g.commandType(b,"object",k,h.commandStr);var a=b.factor|0;b=b.units|0;g.commandType(a,"number",k+".factor",h.commandStr);g.commandType(b,"number",k+".units",h.commandStr);return[a,b]},function(h,a,d){g.optional(function(){h.assert(a,d+"&&typeof "+d+'==="object"',"invalid "+b)});var f=a.def(d,".factor|0"),
e=a.def(d,".units|0");return[f,e]});case "cull.face":return c(function(b){var a=0;"front"===b?a=1028:"back"===b&&(a=1029);g.command(!!a,k,h.commandStr);return a},function(b,h,a){g.optional(function(){b.assert(h,a+'==="front"||'+a+'==="back"',"invalid cull.face")});return h.def(a,'==="front"?',1028,":",1029)});case "lineWidth":return c(function(b){g.command("number"===typeof b&&b>=n.lineWidthDims[0]&&b<=n.lineWidthDims[1],"invalid line width, must be a positive number between "+n.lineWidthDims[0]+
" and "+n.lineWidthDims[1],h.commandStr);return b},function(b,h,a){g.optional(function(){b.assert(h,"typeof "+a+'==="number"&&'+a+">="+n.lineWidthDims[0]+"&&"+a+"<="+n.lineWidthDims[1],"invalid line width")});return a});case "frontFace":return c(function(b){g.commandParameter(b,aa,k,h.commandStr);return aa[b]},function(b,h,a){g.optional(function(){b.assert(h,a+'==="cw"||'+a+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return h.def(a+'==="cw"?2304:2305')});case "colorMask":return c(function(b){g.command(v(b)&&
4===b.length,"color.mask must be length 4 array",h.commandStr);return b.map(function(b){return!!b})},function(b,h,a){g.optional(function(){b.assert(h,b.shared.isArrayLike+"("+a+")&&"+a+".length===4","invalid color.mask")});return w(4,function(b){return"!!"+a+"["+b+"]"})});case "sample.coverage":return c(function(b){g.command("object"===typeof b&&b,k,h.commandStr);var a="value"in b?b.value:1;b=!!b.invert;g.command("number"===typeof a&&0<=a&&1>=a,"sample.coverage.value must be a number between 0 and 1",
h.commandStr);return[a,b]},function(b,h,a){g.optional(function(){b.assert(h,a+"&&typeof "+a+'==="object"',"invalid sample.coverage")});var d=h.def('"value" in ',a,"?+",a,".value:1"),f=h.def("!!",a,".invert");return[d,f]})}});return e}function Ca(b,h){var a=b["static"],f=b.dynamic,e={};p(a).forEach(function(b){var d=a[b],f;if("number"===typeof d||"boolean"===typeof d)f=l(function(){return d});else if("function"===typeof d){var c=d._reglType;"texture2d"===c||"textureCube"===c?f=l(function(b){return b.link(d)}):
"framebuffer"===c||"framebufferCube"===c?(g.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',h.commandStr),f=l(function(b){return b.link(d.color[0])})):g.commandRaise('invalid data for uniform "'+b+'"',h.commandStr)}else v(d)?f=l(function(h){return h.global.def("[",w(d.length,function(a){g.command("number"===typeof d[a]||"boolean"===typeof d[a],"invalid uniform "+b,h.commandStr);return d[a]}),"]")}):g.commandRaise('invalid or missing data for uniform "'+
b+'"',h.commandStr);f.value=d;e[b]=f});p(f).forEach(function(b){var h=f[b];e[b]=d(h,function(b,a){return b.invoke(a,h)})});return e}function Ka(b,h){var f=b["static"],e=b.dynamic,c={};p(f).forEach(function(b){var d=f[b],e=r.id(b),k=new ka;if(a(d))k.state=1,k.buffer=m.getBuffer(m.create(d,34962,!1,!0)),k.type=0;else{var q=m.getBuffer(d);if(q)k.state=1,k.buffer=q,k.type=0;else if(g.command("object"===typeof d&&d,"invalid data for attribute "+b,h.commandStr),"constant"in d){var y=d.constant;k.buffer=
"null";k.state=2;"number"===typeof y?k.x=y:(g.command(v(y)&&0<y.length&&4>=y.length,"invalid constant for attribute "+b,h.commandStr),B.forEach(function(b,h){h<y.length&&(k[b]=y[h])}))}else{q=a(d.buffer)?m.getBuffer(m.create(d.buffer,34962,!1,!0)):m.getBuffer(d.buffer);g.command(!!q,'missing buffer for attribute "'+b+'"',h.commandStr);var u=d.offset|0;g.command(0<=u,'invalid offset for attribute "'+b+'"',h.commandStr);var w=d.stride|0;g.command(0<=w&&256>w,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',
h.commandStr);var A=d.size|0;g.command(!("size"in d)||0<A&&4>=A,'invalid size for attribute "'+b+'", must be 1,2,3,4',h.commandStr);var x=!!d.normalized,t=0;"type"in d&&(g.commandParameter(d.type,z,"invalid type for attribute "+b,h.commandStr),t=z[d.type]);var I=d.divisor|0;g.optional(function(){"divisor"in d&&(g.command(0===I||Y,'cannot specify divisor for attribute "'+b+'", instancing not supported',h.commandStr),g.command(0<=I,'invalid divisor for attribute "'+b+'"',h.commandStr));var a=h.commandStr,
f="buffer offset divisor normalized type size stride".split(" ");p(d).forEach(function(h){g.command(0<=f.indexOf(h),'unknown parameter "'+h+'" for attribute pointer "'+b+'" (valid parameters are '+f+")",a)})});k.buffer=q;k.state=1;k.size=A;k.normalized=x;k.type=t||q.dtype;k.offset=u;k.stride=w;k.divisor=I}}c[b]=l(function(b,h){var a=b.attribCache;if(e in a)return a[e];var d={isStream:!1};p(k).forEach(function(b){d[b]=k[b]});k.buffer&&(d.buffer=b.link(k.buffer),d.type=d.type||d.buffer+".dtype");return a[e]=
d})});p(e).forEach(function(b){var h=e[b];c[b]=d(h,function(a,d){function f(b){d(y[b],"=",e,".",b,"|0;")}var e=a.invoke(d,h),c=a.shared,k=a.constants,l=c.isBufferArgs,q=c.buffer;g.optional(function(){a.assert(d,e+"&&(typeof "+e+'==="object"||typeof '+e+'==="function")&&('+l+"("+e+")||"+q+".getBuffer("+e+")||"+q+".getBuffer("+e+".buffer)||"+l+"("+e+'.buffer)||("constant" in '+e+"&&(typeof "+e+'.constant==="number"||'+c.isArrayLike+"("+e+".constant))))",'invalid dynamic attribute "'+b+'"')});var y=
{isStream:d.def(!1)},u=new ka;u.state=1;p(u).forEach(function(b){y[b]=d.def(""+u[b])});var r=y.buffer,w=y.type;d("if(",l,"(",e,")){",y.isStream,"=true;",r,"=",q,".createStream(",34962,",",e,");",w,"=",r,".dtype;","}else{",r,"=",q,".getBuffer(",e,");","if(",r,"){",w,"=",r,".dtype;",'}else if("constant" in ',e,"){",y.state,"=",2,";","if(typeof "+e+'.constant === "number"){',y[B[0]],"=",e,".constant;",B.slice(1).map(function(b){return y[b]}).join("="),"=0;","}else{",B.map(function(b,h){return y[b]+"="+
e+".constant.length>"+h+"?"+e+".constant["+h+"]:0;"}).join(""),"}}else{","if(",l,"(",e,".buffer)){",r,"=",q,".createStream(",34962,",",e,".buffer);","}else{",r,"=",q,".getBuffer(",e,".buffer);","}",w,'="type" in ',e,"?",k.glTypes,"[",e,".type]:",r,".dtype;",y.normalized,"=!!",e,".normalized;");f("size");f("offset");f("stride");f("divisor");d("}}");d.exit("if(",y.isStream,"){",q,".destroyStream(",r,");","}");return y})});return c}function Wb(b){var h=b["static"],a=b.dynamic,f={};p(h).forEach(function(b){var a=
h[b];f[b]=l(function(b,h){return"number"===typeof a||"boolean"===typeof a?""+a:b.link(a)})});p(a).forEach(function(b){var h=a[b];f[b]=d(h,function(b,a){return b.invoke(a,h)})});return f}function $a(b,h,a,d,f){function c(b){var h=u[b];h&&(w[b]=h)}var k=b["static"],l=b.dynamic;g.optional(function(){function b(a){p(a).forEach(function(b){g.command(0<=h.indexOf(b),'unknown parameter "'+b+'"',f.commandStr)})}var h="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(da);
b(k);b(l)});var q=V(b,h),y=Vb(b,f),u=Xa(b,y,f),r=na(b,f),w=ba(b,f),v=D(b,f,q);c("viewport");c(Q("scissor.box"));var A=0<p(w).length,y={framebuffer:y,draw:r,shader:v,state:w,dirty:A,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};y.profile=R(b,f);y.uniforms=Ca(a,f);y.drawVAO=y.scopeVAO=r.vao;if(!y.drawVAO&&v.program&&!q&&x.angle_instanced_arrays&&r["static"].elements){var t=!0;b=v.program.attributes.map(function(b){b=h["static"][b];t=t&&!!b;return b});if(t&&0<b.length){var I=ca.getVAO(ca.createVAO({attributes:b,
elements:r["static"].elements}));y.drawVAO=new e(null,null,null,function(b,h){return b.link(I)});y.useVAO=!0}}q?y.useVAO=!0:y.attributes=Ka(h,f);y.context=Wb(d,f);return y}function X(b,h,a){var d=b.shared.context,f=b.scope();p(a).forEach(function(e){h.save(d,"."+e);var c=a[e].append(b,h);Array.isArray(c)?f(d,".",e,"=[",c.join(),"];"):f(d,".",e,"=",c,";")});h(f)}function qb(b,h,a,d){var f=b.shared,e=f.gl,c=f.framebuffer,g;ha&&(g=h.def(f.extensions,".webgl_draw_buffers"));var k=b.constants,f=k.drawBuffer,
k=k.backBuffer;b=a?a.append(b,h):h.def(c,".next");d||h("if(",b,"!==",c,".cur){");h("if(",b,"){",e,".bindFramebuffer(",36160,",",b,".framebuffer);");ha&&h(g,".drawBuffersWEBGL(",f,"[",b,".colorAttachments.length]);");h("}else{",e,".bindFramebuffer(",36160,",null);");ha&&h(g,".drawBuffersWEBGL(",k,");");h("}",c,".cur=",b,";");d||h("}")}function ga(b,h,a){var d=b.shared,f=d.gl,e=b.current,c=b.next,g=d.current,k=d.next,l=b.cond(g,".dirty");da.forEach(function(h){h=Q(h);if(!(h in a.state)){var d,p;if(h in
c){d=c[h];p=e[h];var q=w(K[h].length,function(b){return l.def(d,"[",b,"]")});l(b.cond(q.map(function(b,h){return b+"!=="+p+"["+h+"]"}).join("||")).then(f,".",sa[h],"(",q,");",q.map(function(b,h){return p+"["+h+"]="+b}).join(";"),";"))}else d=l.def(k,".",h),q=b.cond(d,"!==",g,".",h),l(q),h in ua?q(b.cond(d).then(f,".enable(",ua[h],");")["else"](f,".disable(",ua[h],");"),g,".",h,"=",d,";"):q(f,".",sa[h],"(",d,");",g,".",h,"=",d,";")}});0===p(a.state).length&&l(g,".dirty=false;");h(l)}function ra(h,
a,d,f){var e=h.shared,c=h.current,g=e.current,l=e.gl;b(p(d)).forEach(function(b){var e=d[b];if(!f||f(e)){var p=e.append(h,a);if(ua[b]){var q=ua[b];k(e)?p?a(l,".enable(",q,");"):a(l,".disable(",q,");"):a(h.cond(p).then(l,".enable(",q,");")["else"](l,".disable(",q,");"));a(g,".",b,"=",p,";")}else if(v(p)){var y=c[b];a(l,".",sa[b],"(",p,");",p.map(function(b,h){return y+"["+h+"]="+b}).join(";"),";")}else a(l,".",sa[b],"(",p,");",g,".",b,"=",p,";")}})}function Tb(b,h){Y&&(b.instancing=h.def(b.shared.extensions,
".angle_instanced_arrays"))}function rc(b,h,a,d,f){function e(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function c(b){r=h.def();b(r,"=",e(),";");"string"===typeof f?b(q,".count+=",f,";"):b(q,".count++;");Na&&(d?(w=h.def(),b(w,"=",u,".getNumPendingQueries();")):b(u,".beginQuery(",q,");"))}function g(b){b(q,".cpuTime+=",e(),"-",r,";");Na&&(d?b(u,".pushScopeStats(",w,",",u,".getNumPendingQueries(),",q,");"):b(u,".endQuery();"))}function l(b){var a=h.def(y,".profile");
h(y,".profile=",b,";");h.exit(y,".profile=",a,";")}var p=b.shared,q=b.stats,y=p.current,u=p.timer;a=a.profile;var r,w;if(a){if(k(a)){a.enable?(c(h),g(h.exit),l("true")):l("false");return}a=a.append(b,h);l(a)}else a=h.def(y,".profile");p=b.block();c(p);h("if(",a,"){",p,"}");b=b.block();g(b);h.exit("if(",a,"){",b,"}")}function mc(b,h,a,d,f){function e(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function c(a,d,f){function e(){h("if(!",q,".buffer){",l,".enableVertexAttribArray(",p,");}");var a=f.type,c;c=f.size?h.def(f.size,"||",d):d;h("if(",q,".type!==",a,"||",q,".size!==",c,"||",r.map(function(b){return q+"."+b+"!=="+f[b]}).join("||"),"){",l,".bindBuffer(",34962,",",y,".buffer);",l,".vertexAttribPointer(",[p,c,a,f.normalized,f.stride,f.offset],");",q,".type=",a,";",q,".size=",c,";",r.map(function(b){return q+"."+b+"="+f[b]+";"}).join(""),"}");Y&&(a=f.divisor,h("if(",q,".divisor!==",a,"){",
b.instancing,".vertexAttribDivisorANGLE(",[p,a],");",q,".divisor=",a,";}"))}function g(){h("if(",q,".buffer){",l,".disableVertexAttribArray(",p,");",q,".buffer=null;","}if(",B.map(function(b,h){return q+"."+b+"!=="+u[h]}).join("||"),"){",l,".vertexAttrib4f(",p,",",u,");",B.map(function(b,h){return q+"."+b+"="+u[h]+";"}).join(""),"}")}var l=k.gl,p=h.def(a,".location"),q=h.def(k.attributes,"[",p,"]");a=f.state;var y=f.buffer,u=[f.x,f.y,f.z,f.w],r=["buffer","normalized","offset","stride"];1===a?e():
2===a?g():(h("if(",a,"===",1,"){"),e(),h("}else{"),g(),h("}"))}var k=b.shared;d.forEach(function(d){var k=d.name,l=a.attributes[k],q;if(l){if(!f(l))return;q=l.append(b,h)}else{if(!f(L))return;var y=b.scopeAttrib(k);g.optional(function(){b.assert(h,y+".state","missing attribute "+k)});q={};p(new ka).forEach(function(b){q[b]=h.def(y,".",b)})}c(b.link(d),e(d.info.type),q)})}function td(b,h,a,d,f,e){for(var c=b.shared,l=c.gl,q,p=0;p<d.length;++p){var y=d[p],u=y.name,A=y.info.type,x=a.uniforms[u],y=b.link(y)+
".location",t;if(x){if(!f(x))continue;if(k(x)){var I=x.value;g.command(null!==I&&"undefined"!==typeof I,'missing uniform "'+u+'"',b.commandStr);if(35678===A||35680===A)g.command("function"===typeof I&&(35678===A&&("texture2d"===I._reglType||"framebuffer"===I._reglType)||35680===A&&("textureCube"===I._reglType||"framebufferCube"===I._reglType)),"invalid texture for uniform "+u,b.commandStr),x=b.link(I._texture||I.color[0]._texture),h(l,".uniform1i(",y,",",x+".bind());"),h.exit(x,".unbind();");else if(35674===
A||35675===A||35676===A){g.optional(function(){g.command(v(I),"invalid matrix for uniform "+u,b.commandStr);g.command(35674===A&&4===I.length||35675===A&&9===I.length||35676===A&&16===I.length,"invalid length for matrix uniform "+u,b.commandStr)});var x=b.global.def("new Float32Array(["+Array.prototype.slice.call(I)+"])"),ua=2;35675===A?ua=3:35676===A&&(ua=4);h(l,".uniformMatrix",ua,"fv(",y,",false,",x,");")}else{switch(A){case 5126:g.commandType(I,"number","uniform "+u,b.commandStr);q="1f";break;
case 35664:g.command(v(I)&&2===I.length,"uniform "+u,b.commandStr);q="2f";break;case 35665:g.command(v(I)&&3===I.length,"uniform "+u,b.commandStr);q="3f";break;case 35666:g.command(v(I)&&4===I.length,"uniform "+u,b.commandStr);q="4f";break;case 35670:g.commandType(I,"boolean","uniform "+u,b.commandStr);q="1i";break;case 5124:g.commandType(I,"number","uniform "+u,b.commandStr);q="1i";break;case 35671:g.command(v(I)&&2===I.length,"uniform "+u,b.commandStr);q="2i";break;case 35667:g.command(v(I)&&2===
I.length,"uniform "+u,b.commandStr);q="2i";break;case 35672:g.command(v(I)&&3===I.length,"uniform "+u,b.commandStr);q="3i";break;case 35668:g.command(v(I)&&3===I.length,"uniform "+u,b.commandStr);q="3i";break;case 35673:g.command(v(I)&&4===I.length,"uniform "+u,b.commandStr);q="4i";break;case 35669:g.command(v(I)&&4===I.length,"uniform "+u,b.commandStr),q="4i"}h(l,".uniform",q,"(",y,",",v(I)?Array.prototype.slice.call(I):I,");")}continue}else t=x.append(b,h)}else{if(!f(L))continue;t=h.def(c.uniforms,
"[",r.id(u),"]")}35678===A?(g(!Array.isArray(t),"must specify a scalar prop for textures"),h("if(",t,"&&",t,'._reglType==="framebuffer"){',t,"=",t,".color[0];","}")):35680===A&&(g(!Array.isArray(t),"must specify a scalar prop for cube maps"),h("if(",t,"&&",t,'._reglType==="framebufferCube"){',t,"=",t,".color[0];","}"));g.optional(function(){function a(d,f){b.assert(h,d,'bad data or missing for uniform "'+u+'".  '+f)}function d(b){g(!Array.isArray(t),"must not specify an array type for uniform");a("typeof "+
t+'==="'+b+'"',"invalid type, expected "+b)}function f(h,d){Array.isArray(t)?g(t.length===h,"must have length "+h):a(c.isArrayLike+"("+t+")&&"+t+".length==="+h,"invalid vector, should have length "+h,b.commandStr)}function e(h){g(!Array.isArray(t),"must not specify a value type");a("typeof "+t+'==="function"&&'+t+'._reglType==="texture'+(3553===h?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(A){case 5124:d("number");break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;
case 35669:f(4,"number");break;case 5126:d("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:d("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,"number");break;case 35676:f(16,"number");break;case 35678:e(3553);break;case 35680:e(34067)}});x=1;switch(A){case 35678:case 35680:x=h.def(t,"._texture");h(l,".uniform1i(",y,",",
x,".bind());");h.exit(x,".unbind();");continue;case 5124:case 35670:q="1i";break;case 35667:case 35671:q="2i";x=2;break;case 35668:case 35672:q="3i";x=3;break;case 35669:case 35673:q="4i";x=4;break;case 5126:q="1f";break;case 35664:q="2f";x=2;break;case 35665:q="3f";x=3;break;case 35666:q="4f";x=4;break;case 35674:q="Matrix2fv";break;case 35675:q="Matrix3fv";break;case 35676:q="Matrix4fv"}if("M"===q.charAt(0)){h(l,".uniform",q,"(",y,",");var y=Math.pow(A-35674+2,2),ca=b.global.def("new Float32Array(",
y,")");Array.isArray(t)?h("false,(",w(y,function(b){return ca+"["+b+"]="+t[b]}),",",ca,")"):h("false,(Array.isArray(",t,")||",t," instanceof Float32Array)?",t,":(",w(y,function(b){return ca+"["+b+"]="+t+"["+b+"]"}),",",ca,")");h(");")}else{if(1<x){for(var ua=[],C=[],T=0;T<x;++T)Array.isArray(t)?C.push(t[T]):C.push(h.def(t+"["+T+"]")),e&&ua.push(h.def());e&&h("if(!",b.batchId,"||",ua.map(function(b,h){return b+"!=="+C[h]}).join("||"),"){",ua.map(function(b,h){return b+"="+C[h]+";"}).join(""));h(l,
".uniform",q,"(",y,",",C.join(","),");")}else g(!Array.isArray(t),"uniform value must not be an array"),e&&(x=h.def(),h("if(!",b.batchId,"||",x,"!==",t,"){",x,"=",t,";")),h(l,".uniform",q,"(",y,",",t,");");e&&h("}")}}}function Bc(b,h,a,d){function f(e){var c=y[e];return c?c.contextDep&&d.contextDynamic||c.propDep?c.append(b,a):c.append(b,h):h.def(p,".",e)}function e(){function b(){a(v,".drawElementsInstancedANGLE(",[r,A,t,w+"<<(("+t+"-5121)>>1)",x],");")}function h(){a(v,".drawArraysInstancedANGLE(",
[r,w,A,x],");")}u&&"null"!==u?I?b():(a("if(",u,"){"),b(),a("}else{"),h(),a("}")):h()}function c(){function b(){a(q+".drawElements("+[r,A,t,w+"<<(("+t+"-5121)>>1)"]+");")}function h(){a(q+".drawArrays("+[r,w,A]+");")}u&&"null"!==u?I?b():(a("if(",u,"){"),b(),a("}else{"),h(),a("}")):h()}var l=b.shared,q=l.gl,p=l.draw,y=d.draw,u=function(){var f=y.elements,e=h;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)e=a;f=f.append(b,e);y.elementsActive&&e("if("+f+")"+q+".bindBuffer(34963,"+f+".buffer.buffer);")}else f=
e.def(),e(f,"=",p,".","elements",";","if(",f,"){",q,".bindBuffer(",34963,",",f,".buffer.buffer);}","else if(",l.vao,".currentVAO){",f,"=",b.shared.elements+".getElements("+l.vao,".currentVAO.elements);",ma?"":"if("+f+")"+q+".bindBuffer(34963,"+f+".buffer.buffer);","}");return f}(),r=f("primitive"),w=f("offset"),A=function(){var f=y.count,e,c=h;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)c=a;e=f.append(b,c);g.optional(function(){f.MISSING&&b.assert(h,"false","missing vertex count");f.DYNAMIC&&
b.assert(c,e+">=0","missing vertex count")})}else e=c.def(p,".","count"),g.optional(function(){b.assert(c,e+">=0","missing vertex count")});return e}();if("number"===typeof A){if(0===A)return}else a("if(",A,"){"),a.exit("}");var x,v;Y&&(x=f("instances"),v=b.instancing);var t=u+".type",I=y.elements&&k(y.elements)&&!y.vaoActive;Y&&("number"!==typeof x||0<=x)?"string"===typeof x?(a("if(",x,">0){"),e(),a("}else if(",x,"<0){"),c(),a("}")):e():c()}function Z(b,h,a,d,f){var e=ta();f=e.proc("body",f);g.optional(function(){e.commandStr=
h.commandStr;e.command=e.link(h.commandStr)});Y&&(e.instancing=f.def(e.shared.extensions,".angle_instanced_arrays"));b(e,f,a,d);return e.compile().body}function P(b,h,a,d){Tb(b,h);a.useVAO?a.drawVAO?h(b.shared.vao,".setVAO(",a.drawVAO.append(b,h),");"):h(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(h(b.shared.vao,".setVAO(null);"),mc(b,h,a,d.attributes,function(){return!0}));td(b,h,a,d.uniforms,function(){return!0},!1);Bc(b,h,h,a)}function ja(b,h){var a=b.proc("draw",1);Tb(b,a);X(b,a,h.context);
qb(b,a,h.framebuffer);ga(b,a,h);ra(b,a,h.state);rc(b,a,h,!1,!0);var d=h.shader.progVar.append(b,a);a(b.shared.gl,".useProgram(",d,".program);");if(h.shader.program)P(b,a,h,h.shader.program);else{a(b.shared.vao,".setVAO(null);");var f=b.global.def("{}"),e=a.def(d,".id"),c=a.def(f,"[",e,"]");a(b.cond(c).then(c,".call(this,a0);")["else"](c,"=",f,"[",e,"]=",b.link(function(a){return Z(P,b,h,a,1)}),"(",d,");",c,".call(this,a0);"))}0<p(h.state).length&&a(b.shared.current,".dirty=true;");b.shared.vao&&a(b.shared.vao,
".setVAO(null);")}function Fa(b,h,a,d){function f(){return!0}b.batchId="a1";Tb(b,h);mc(b,h,a,d.attributes,f);td(b,h,a,d.uniforms,f,!1);Bc(b,h,h,a)}function Ab(b,h,a,d){function f(b){return b.contextDep&&c||b.propDep}function e(b){return!f(b)}Tb(b,h);var c=a.contextDep,g=h.def(),k=h.def();b.shared.props=k;b.batchId=g;var l=b.scope(),q=b.scope();h(l.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",k,"=","a0","[",g,"];",q,"}",l.exit);a.needsContext&&X(b,q,a.context);a.needsFramebuffer&&qb(b,q,a.framebuffer);
ra(b,q,a.state,f);a.profile&&f(a.profile)&&rc(b,q,a,!1,!0);d?(a.useVAO?a.drawVAO?f(a.drawVAO)?q(b.shared.vao,".setVAO(",a.drawVAO.append(b,q),");"):l(b.shared.vao,".setVAO(",a.drawVAO.append(b,l),");"):l(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(l(b.shared.vao,".setVAO(null);"),mc(b,l,a,d.attributes,e),mc(b,q,a,d.attributes,f)),td(b,l,a,d.uniforms,e,!1),td(b,q,a,d.uniforms,f,!0),Bc(b,l,q,a)):(h=b.global.def("{}"),d=a.shader.progVar.append(b,q),k=q.def(d,".id"),l=q.def(h,"[",k,"]"),q(b.shared.gl,
".useProgram(",d,".program);","if(!",l,"){",l,"=",h,"[",k,"]=",b.link(function(h){return Z(Fa,b,a,h,2)}),"(",d,");}",l,".call(this,a0[",g,"],",g,");"))}function $c(b,h){function a(b){return b.contextDep&&f||b.propDep}var d=b.proc("batch",2);b.batchId="0";Tb(b,d);var f=!1,e=!0;p(h.context).forEach(function(b){f=f||h.context[b].propDep});f||(X(b,d,h.context),e=!1);var c=h.framebuffer,g=!1;c?(c.propDep?f=g=!0:c.contextDep&&f&&(g=!0),g||qb(b,d,c)):qb(b,d,null);h.state.viewport&&h.state.viewport.propDep&&
(f=!0);ga(b,d,h);ra(b,d,h.state,function(b){return!a(b)});h.profile&&a(h.profile)||rc(b,d,h,!1,"a1");h.contextDep=f;h.needsContext=e;h.needsFramebuffer=g;e=h.shader.progVar;if(e.contextDep&&f||e.propDep)Ab(b,d,h,null);else if(e=e.append(b,d),d(b.shared.gl,".useProgram(",e,".program);"),h.shader.program)Ab(b,d,h,h.shader.program);else{d(b.shared.vao,".setVAO(null);");var c=b.global.def("{}"),g=d.def(e,".id"),l=d.def(c,"[",g,"]");d(b.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",c,"[",g,"]=",b.link(function(a){return Z(Ab,
b,h,a,2)}),"(",e,");",l,".call(this,a0,a1);"))}0<p(h.state).length&&d(b.shared.current,".dirty=true;");b.shared.vao&&d(b.shared.vao,".setVAO(null);")}function Zb(h,a){function d(b){var c=a.shader[b];c&&f.set(e.shader,"."+b,c.append(h,f))}var f=h.proc("scope",3);h.batchId="a2";var e=h.shared,c=e.current;X(h,f,a.context);a.framebuffer&&a.framebuffer.append(h,f);b(p(a.state)).forEach(function(b){var d=a.state[b].append(h,f);v(d)?d.forEach(function(a,d){f.set(h.next[b],"["+d+"]",a)}):f.set(e.next,"."+
b,d)});rc(h,f,a,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var d=a.draw[b];d&&f.set(e.draw,"."+b,""+d.append(h,f))});p(a.uniforms).forEach(function(b){var d=a.uniforms[b].append(h,f);Array.isArray(d)&&(d="["+d.join()+"]");f.set(e.uniforms,"["+r.id(b)+"]",d)});p(a.attributes).forEach(function(b){var d=a.attributes[b].append(h,f),e=h.scopeAttrib(b);p(new ka).forEach(function(b){f.set(e,"."+b,d[b])})});a.scopeVAO&&f.set(e.vao,".targetVAO",a.scopeVAO.append(h,f));
d("vert");d("frag");0<p(a.state).length&&(f(c,".dirty=true;"),f.exit(c,".dirty=true;"));f("a1(",h.shared.context,",a0,",h.batchId,");")}function M(b){if("object"===typeof b&&!v(b)){for(var h=p(b),a=0;a<h.length;++a)if(t.isDynamic(b[h[a]]))return!0;return!1}}function G(b,h,a){function f(b,h){g.forEach(function(a){var d=e[a];t.isDynamic(d)&&(d=b.invoke(h,d),h(y,".",a,"=",d,";"))})}var e=h["static"][a];if(e&&M(e)){var c=b.global,g=p(e),l=!1,k=!1,q=!1,y=b.global.def("{}");g.forEach(function(h){var a=
e[h];if(t.isDynamic(a))"function"===typeof a&&(a=e[h]=t.unbox(a)),h=d(a,null),l=l||h.thisDep,q=q||h.propDep,k=k||h.contextDep;else{c(y,".",h,"=");switch(typeof a){case "number":c(a);break;case "string":c('"',a,'"');break;case "object":Array.isArray(a)&&c("[",a.join(),"]");break;default:c(b.link(a))}c(";")}});h.dynamic[a]=new t.DynamicVariable(4,{thisDep:l,contextDep:k,propDep:q,ref:y,append:f});delete h["static"][a]}}var ka=ca.Record,va={add:32774,subtract:32778,"reverse subtract":32779};x.ext_blend_minmax&&
(va.min=32775,va.max=32776);var Y=x.angle_instanced_arrays,ha=x.webgl_draw_buffers,ma=x.oes_vertex_array_object,K={dirty:!0,profile:ia.profile},E={},da=[],ua={},sa={};O("dither",3024);O("blend.enable",3042);W("blend.color","blendColor",[0,0,0,0]);W("blend.equation","blendEquationSeparate",[32774,32774]);W("blend.func","blendFuncSeparate",[1,0,1,0]);O("depth.enable",2929,!0);W("depth.func","depthFunc",513);W("depth.range","depthRange",[0,1]);W("depth.mask","depthMask",!0);W("colorMask","colorMask",
[!0,!0,!0,!0]);O("cull.enable",2884);W("cull.face","cullFace",1029);W("frontFace","frontFace",2305);W("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);W("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);W("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);W("stencil.mask","stencilMask",-1);W("stencil.func","stencilFunc",[519,0,-1]);W("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);W("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);O("scissor.enable",3089);W("scissor.box","scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);W("viewport","viewport",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var Ia={gl:c,context:pa,strings:r,next:E,current:K,draw:kc,elements:y,buffer:m,shader:Wa,attributes:ca.state,vao:ca,uniforms:q,framebuffer:f,extensions:x,timer:Na,isBufferArgs:a},A={primTypes:qa,compareFuncs:H,blendFuncs:J,blendEquations:va,stencilOps:C,glTypes:z,orientationType:aa};g.optional(function(){Ia.isArrayLike=
v});ha&&(A.backBuffer=[1029],A.drawBuffer=w(n.maxDrawbuffers,function(b){return 0===b?[0]:w(b,function(b){return 36064+b})}));var pc=0;return{next:E,current:K,procs:function(){var b=ta(),h=b.proc("poll"),a=b.proc("refresh"),d=b.block();h(d);a(d);var f=b.shared,e=f.gl,c=f.next,g=f.current;d(g,".dirty=false;");qb(b,h);qb(b,a,null,!0);var l;Y&&(l=b.link(Y));x.oes_vertex_array_object&&a(b.link(x.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var k=0;k<n.maxAttributes;++k){var q=a.def(f.attributes,
"[",k,"]"),y=b.cond(q,".buffer");y.then(e,".enableVertexAttribArray(",k,");",e,".bindBuffer(",34962,",",q,".buffer.buffer);",e,".vertexAttribPointer(",k,",",q,".size,",q,".type,",q,".normalized,",q,".stride,",q,".offset);")["else"](e,".disableVertexAttribArray(",k,");",e,".vertexAttrib4f(",k,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer=null;");a(y);Y&&a(l,".vertexAttribDivisorANGLE(",k,",",q,".divisor);")}a(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");p(ua).forEach(function(f){var l=
ua[f],q=d.def(c,".",f),k=b.block();k("if(",q,"){",e,".enable(",l,")}else{",e,".disable(",l,")}",g,".",f,"=",q,";");a(k);h("if(",q,"!==",g,".",f,"){",k,"}")});p(sa).forEach(function(f){var l=sa[f],q=K[f],k,p,y=b.block();y(e,".",l,"(");v(q)?(l=q.length,k=b.global.def(c,".",f),p=b.global.def(g,".",f),y(w(l,function(b){return k+"["+b+"]"}),");",w(l,function(b){return p+"["+b+"]="+k+"["+b+"];"}).join("")),h("if(",w(l,function(b){return k+"["+b+"]!=="+p+"["+b+"]"}).join("||"),"){",y,"}")):(k=d.def(c,".",
f),p=d.def(g,".",f),y(k,");",g,".",f,"=",k,";"),h("if(",k,"!==",p,"){",y,"}"));a(y)});return b.compile()}(),compile:function(b,h,a,d,f){var e=ta();e.stats=e.link(f);p(h["static"]).forEach(function(b){G(e,h,b)});S.forEach(function(h){G(e,b,h)});var c=$a(b,h,a,d,e);ja(e,c);Zb(e,c);$c(e,c);return u(e.compile(),{destroy:function(){c.shader.program.destroy()}})}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./dynamic":10,"./util/check":22,"./util/codegen":24,"./util/extend":26,"./util/is-array-like":28,
"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/loop":32,"./util/sorted-object-keys":35}],10:[function(c,n,m){function a(b,a){this.id=d++;this.type=b;this.data=a}function b(a){if(0===a.length)return[];var d=a.charAt(0),e=a.charAt(a.length-1);if(1<a.length&&d===e&&('"'===d||"'"===d))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(d=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,d.index)).concat(b(d[1])).concat(b(a.substr(d.index+
d[0].length)));d=a.split(".");if(1===d.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(e=0;e<d.length;++e)a=a.concat(b(d[e]));return a}function e(a){return"["+b(a).join("][")+"]"}function k(b,d){if("function"===typeof b)return new a(0,b);if("number"===typeof b||"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(b,a){return k(b,d+"["+a+"]")}));if(b instanceof a)return b;l(!1,"invalid option type in uniform "+d)}var l=c("./util/check"),
d=0;n.exports={DynamicVariable:a,define:function(b,d){return new a(b,e(d+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:k,accessor:e}},{"./util/check":22}],11:[function(c,n,m){var a=c("./util/check"),b=c("./util/is-typed-array"),e=c("./util/is-ndarray"),k=c("./util/values"),l=c("./constants/primitives.json"),d=c("./constants/usage.json");n.exports=function(c,g,u,T){function w(b){this.id=t++;v[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=
0}function r(d,k,l,r,w,x,v){d.buffer.bind();var t;k?((t=v)||b(k)&&(!e(k)||b(k.data))||(t=g.oes_element_index_uint?5125:5123),u._initBuffer(d.buffer,k,l,t,3)):(c.bufferData(34963,x,l),d.buffer.dtype=t||5121,d.buffer.usage=l,d.buffer.dimension=3,d.buffer.byteLength=x);t=v;if(!v){switch(d.buffer.dtype){case 5121:case 5120:t=5121;break;case 5123:case 5122:t=5123;break;case 5125:case 5124:t=5125;break;default:a.raise("unsupported type for element array")}d.buffer.dtype=t}d.type=t;a(5125!==t||!!g.oes_element_index_uint,
"32 bit element buffers not supported, enable oes_element_index_uint first");k=w;0>k&&(k=d.buffer.byteLength,5123===t?k>>=1:5125===t&&(k>>=2));d.vertCount=k;k=r;0>r&&(k=4,r=d.buffer.dimension,1===r&&(k=0),2===r&&(k=1),3===r&&(k=4));d.primType=k}function x(b){T.elementsCount--;a(null!==b.buffer,"must not double destroy elements");delete v[b.id];b.buffer.destroy();b.buffer=null}var v={},t=0,n={uint8:5121,uint16:5123};g.oes_element_index_uint&&(n.uint32=5125);w.prototype.bind=function(){this.buffer.bind()};
var z=[];return{create:function(c,g){function k(c){if(c)if("number"===typeof c)p(c),v.primType=4,v.vertCount=c|0,v.type=5121;else{var g=null,u=35044,w=-1,x=-1,t=0,T=0;if(Array.isArray(c)||b(c)||e(c))g=c;else if(a.type(c,"object","invalid arguments for elements"),"data"in c&&(g=c.data,a(Array.isArray(g)||b(g)||e(g),"invalid data for element buffer")),"usage"in c&&(a.parameter(c.usage,d,"invalid element buffer usage"),u=d[c.usage]),"primitive"in c&&(a.parameter(c.primitive,l,"invalid element buffer primitive"),
w=l[c.primitive]),"count"in c&&(a("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),x=c.count|0),"type"in c&&(a.parameter(c.type,n,"invalid buffer type"),T=n[c.type]),"length"in c)t=c.length|0;else if(t=x,5123===T||5122===T)t*=2;else if(5125===T||5124===T)t*=4;r(v,g,u,w,x,t,T)}else p(),v.primType=4,v.vertCount=0,v.type=5121;return k}var p=u.create(null,34963,!0),v=new w(p._buffer);T.elementsCount++;k(c);k._reglType="elements";k._elements=v;k.subdata=function(b,a){p.subdata(b,
a);return k};k.destroy=function(){x(v)};return k},createStream:function(b){var a=z.pop();a||(a=new w(u.create(null,34963,!0,!1)._buffer));r(a,b,35040,-1,-1,0,0);return a},destroyStream:function(b){z.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof w?b._elements:null},clear:function(){k(v).forEach(x)}}}},{"./constants/primitives.json":7,"./constants/usage.json":8,"./util/check":22,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/values":37}],12:[function(c,
n,m){var a=c("./util/sorted-object-keys"),b=c("./util/check");n.exports=function(e,c){function l(a){b.type(a,"string","extension name must be string");a=a.toLowerCase();var c;try{c=d[a]=e.getExtension(a)}catch(g){}return!!c}for(var d={},p=0;p<c.extensions.length;++p){var g=c.extensions[p];if(!l(g))return c.onDestroy(),c.onDone('"'+g+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}c.optionalExtensions.forEach(l);return{extensions:d,
restore:function(){a(d).forEach(function(b){if(d[b]&&!l(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":22,"./util/sorted-object-keys":35}],13:[function(c,n,m){var a=c("./util/check"),b=c("./util/values"),e=c("./util/extend"),k=[6407,6408],l=[];l[6408]=4;l[6407]=3;var d=[];d[5121]=1;d[5126]=4;d[36193]=2;var p=[32854,32855,36194,35907,34842,34843,34836],g={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};n.exports=function(c,T,w,r,x,v){function t(b,h,a){this.target=b;this.texture=h;this.renderbuffer=a;var d=b=0;h?(b=h.width,d=h.height):a&&(b=a.width,d=a.height);this.width=b;this.height=d}function n(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function z(b,h,d){if(b){if(b.texture){b=b.texture._texture;var e=Math.max(1,b.height);a(Math.max(1,b.width)===h&&e===d,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,
a(b.width===h&&b.height===d,"inconsistent width/height for renderbuffer");b.refCount+=1}}function B(b,h){h&&(h.texture?c.framebufferTexture2D(36160,b,h.target,h.texture._texture.texture,0):c.framebufferRenderbuffer(36160,b,36161,h.renderbuffer._renderbuffer.renderbuffer))}function S(b){var h=3553,d=null,e=null,c=b;"object"===typeof b&&(c=b.data,"target"in b&&(h=b.target|0));a.type(c,"function","invalid attachment data");b=c._reglType;"texture2d"===b?(d=c,a(3553===h)):"textureCube"===b?(d=c,a(34069<=
h&&34075>h,"invalid cube map target")):"renderbuffer"===b?(e=c,h=36161):a.raise("invalid regl object for attachment");return new t(h,d,e)}function m(b,h,a,d,e){if(a)return b=r.create2D({width:b,height:h,format:d,type:e}),b._texture.refCount=0,new t(3553,b,null);b=x.create({width:b,height:h,format:d});b._renderbuffer.refCount=0;return new t(36161,null,b)}function fa(b){return b&&(b.texture||b.renderbuffer)}function H(b,h,a){b&&(b.texture?b.texture.resize(h,a):b.renderbuffer&&b.renderbuffer.resize(h,
a),b.width=h,b.height=a)}function C(){this.id=y++;h[this.id]=this;this.framebuffer=c.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function I(b){b.colorAttachments.forEach(n);n(b.depthAttachment);n(b.stencilAttachment);n(b.depthStencilAttachment)}function aa(b){var d=b.framebuffer;a(d,"must not double destroy framebuffer");c.deleteFramebuffer(d);b.framebuffer=null;v.framebufferCount--;delete h[b.id]}
function L(b){var h;c.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(h=0;h<d.length;++h)B(36064+h,d[h]);for(h=d.length;h<w.maxColorAttachments;++h)c.framebufferTexture2D(36160,36064+h,3553,null,0);c.framebufferTexture2D(36160,33306,3553,null,0);c.framebufferTexture2D(36160,36096,3553,null,0);c.framebufferTexture2D(36160,36128,3553,null,0);B(36096,b.depthAttachment);B(36128,b.stencilAttachment);B(33306,b.depthStencilAttachment);b=c.checkFramebufferStatus(36160);c.isContextLost()||
36053===b||a.raise("framebuffer configuration not supported, status = "+g[b]);c.bindFramebuffer(36160,F.next?F.next.framebuffer:null);F.cur=F.next;c.getError()}function U(b,h){function c(b,h){var f;a(F.next!==g,"can not update framebuffer which is currently in use");var e=0,q=0,y=!0,r=!0;f=null;var u=!0,x="rgba",v="uint8",t=1,n=null,C=null,H=null,B=!1;if("number"===typeof b)e=b|0,q=h|0||e;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(q=b.shape,a(Array.isArray(q)&&
2<=q.length,"invalid shape for framebuffer"),e=q[0],q=q[1]):("radius"in b&&(e=q=b.radius),"width"in b&&(e=b.width),"height"in b&&(q=b.height));if("color"in b||"colors"in b)f=b.color||b.colors,Array.isArray(f)&&a(1===f.length||T.webgl_draw_buffers,"multiple render targets not supported");if(!f){"colorCount"in b&&(t=b.colorCount|0,a(0<t,"invalid color buffer count"));"colorTexture"in b&&(u=!!b.colorTexture,x="rgba4");if("colorType"in b){v=b.colorType;if(u)a(T.oes_texture_float||!("float"===v||"float32"===
v),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(T.oes_texture_half_float||!("half float"===v||"float16"===v),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===v||"float16"===v)a(T.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f";else if("float"===v||"float32"===v)a(T.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
x="rgba32f";a.oneOf(v,ea,"invalid color type")}"colorFormat"in b&&(x=b.colorFormat,0<=la.indexOf(x)?u=!0:0<=N.indexOf(x)?u=!1:a.optional(function(){if(u)a.oneOf(b.colorFormat,la,"invalid color format for texture");else a.oneOf(b.colorFormat,N,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)B=!(!b.depthTexture&&!b.depthStencilTexture),a(!B||T.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?y=b.depth:
(n=b.depth,r=!1));"stencil"in b&&("boolean"===typeof b.stencil?r=b.stencil:(C=b.stencil,y=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?y=r=b.depthStencil:(H=b.depthStencil,r=y=!1))}else e=q=1;var qa=null,aa=null,U=null,$a=null;if(Array.isArray(f))qa=f.map(S);else if(f)qa=[S(f)];else for(qa=Array(t),f=0;f<t;++f)qa[f]=m(e,q,u,x,v);a(T.webgl_draw_buffers||1>=qa.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(qa.length<=w.maxColorAttachments,
"too many color attachments, not supported");e=e||qa[0].width;q=q||qa[0].height;n?aa=S(n):y&&!r&&(aa=m(e,q,B,"depth","uint32"));C?U=S(C):r&&!y&&(U=m(e,q,!1,"stencil","uint8"));H?$a=S(H):!n&&!C&&r&&y&&($a=m(e,q,B,"depth stencil","depth stencil"));a(1>=!!n+!!C+!!H,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");y=null;for(f=0;f<qa.length;++f)z(qa[f],e,q),a(!qa[f]||qa[f].texture&&0<=k.indexOf(qa[f].texture._texture.format)||qa[f].renderbuffer&&0<=p.indexOf(qa[f].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+f+" is invalid"),qa[f]&&qa[f].texture&&(r=l[qa[f].texture._texture.format]*d[qa[f].texture._texture.type],null===y?y=r:a(y===r,"all color attachments much have the same number of bits per pixel."));z(aa,e,q);a(!aa||aa.texture&&6402===aa.texture._texture.format||aa.renderbuffer&&33189===aa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");z(U,e,q);a(!U||U.renderbuffer&&36168===U.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
z($a,e,q);a(!$a||$a.texture&&34041===$a.texture._texture.format||$a.renderbuffer&&34041===$a.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");I(g);g.width=e;g.height=q;g.colorAttachments=qa;g.depthAttachment=aa;g.stencilAttachment=U;g.depthStencilAttachment=$a;c.color=qa.map(fa);c.depth=fa(aa);c.stencil=fa(U);c.depthStencil=fa($a);c.width=g.width;c.height=g.height;L(g);return c}var g=new C;v.framebufferCount++;c(b,h);return e(c,{resize:function(b,h){a(F.next!==
g,"can not resize a framebuffer which is currently in use");var d=Math.max(b|0,1),f=Math.max(h|0||d,1);if(d===g.width&&f===g.height)return c;for(var e=g.colorAttachments,k=0;k<e.length;++k)H(e[k],d,f);H(g.depthAttachment,d,f);H(g.stencilAttachment,d,f);H(g.depthStencilAttachment,d,f);g.width=c.width=d;g.height=c.height=f;L(g);return c},_reglType:"framebuffer",_framebuffer:g,destroy:function(){aa(g);I(g)},use:function(b){F.setFBO({framebuffer:c},b)}})}var F={cur:null,next:null,dirty:!1,setFBO:null},
la=["rgba"],N=["rgba4","rgb565","rgb5 a1"];T.ext_srgb&&N.push("srgba");T.ext_color_buffer_half_float&&N.push("rgba16f","rgb16f");T.webgl_color_buffer_float&&N.push("rgba32f");var ea=["uint8"];T.oes_texture_half_float&&ea.push("half float","float16");T.oes_texture_float&&ea.push("float","float32");var y=0,h={};return e(F,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof C)?b:null},create:U,createCube:function(b){function h(b){var f;
a(0>d.indexOf(F.next),"can not update framebuffer which is currently in use");var c={color:null},g=0,k=null;f="rgba";var l="uint8",y=1;if("number"===typeof b)g=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(g=b.shape,a(Array.isArray(g)&&2<=g.length,"invalid shape for framebuffer"),a(g[0]===g[1],"cube framebuffer must be square"),g=g[0]):("radius"in b&&(g=b.radius|0),"width"in b?(g=b.width|0,"height"in b&&a(b.height===g,"must be square")):"height"in b&&(g=b.height|
0));if("color"in b||"colors"in b)k=b.color||b.colors,Array.isArray(k)&&a(1===k.length||T.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in b&&(y=b.colorCount|0,a(0<y,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,ea,"invalid color type"),l=b.colorType),"colorFormat"in b&&(f=b.colorFormat,a.oneOf(b.colorFormat,la,"invalid color format for texture")));"depth"in b&&(c.depth=b.depth);"stencil"in b&&(c.stencil=b.stencil);"depthStencil"in b&&(c.depthStencil=
b.depthStencil)}else g=1;if(k)if(Array.isArray(k))for(b=[],f=0;f<k.length;++f)b[f]=k[f];else b=[k];else for(b=Array(y),k={radius:g,format:f,type:l},f=0;f<y;++f)b[f]=r.createCube(k);c.color=Array(b.length);for(f=0;f<b.length;++f)y=b[f],a("function"===typeof y&&"textureCube"===y._reglType,"invalid cube map"),g=g||y.width,a(y.width===g&&y.height===g,"invalid cube map shape"),c.color[f]={target:34069,data:b[f]};for(f=0;6>f;++f){for(y=0;y<b.length;++y)c.color[y].target=34069+f;0<f&&(c.depth=d[0].depth,
c.stencil=d[0].stencil,c.depthStencil=d[0].depthStencil);if(d[f])d[f](c);else d[f]=U(c)}return e(h,{width:g,height:g,color:b})}var d=Array(6);h(b);return e(h,{faces:d,resize:function(b){var f=b|0;a(0<f&&f<=w.maxCubeMapSize,"invalid radius for cube fbo");if(f===h.width)return h;var e=h.color;for(b=0;b<e.length;++b)e[b].resize(f);for(b=0;6>b;++b)d[b].resize(f);h.width=h.height=f;return h},_reglType:"framebufferCube",destroy:function(){d.forEach(function(b){b.destroy()})}})},clear:function(){b(h).forEach(aa)},
restore:function(){F.cur=null;F.next=null;F.dirty=!0;b(h).forEach(function(b){b.framebuffer=c.createFramebuffer();L(b)})}})}},{"./util/check":22,"./util/extend":26,"./util/values":37}],14:[function(c,n,m){var a=c("./util/sorted-object-keys"),b=c("./util/pool");n.exports=function(e,c){var l=1;c.ext_texture_filter_anisotropic&&(l=e.getParameter(34047));var d=1,p=1;c.webgl_draw_buffers&&(d=e.getParameter(34852),p=e.getParameter(36063));var g=!!c.oes_texture_float;if(g){g=e.createTexture();e.bindTexture(3553,
g);e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=e.createFramebuffer();e.bindFramebuffer(36160,u);e.framebufferTexture2D(36160,36064,3553,g,0);e.bindTexture(3553,null);if(36053!==e.checkFramebufferStatus(36160))g=!1;else{e.viewport(0,0,1,1);e.clearColor(1,0,0,1);e.clear(16384);var T=b.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,T);e.getError()?g=!1:(e.deleteFramebuffer(u),e.deleteTexture(g),g=1===T[0]);b.freeType(T)}}T=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(T=e.createTexture(),u=b.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,T),e.texImage2D(34069,0,6408,3,3,0,6408,5121,u),b.freeType(u),e.bindTexture(34067,null),e.deleteTexture(T),T=!e.getError());return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:a(c).filter(function(b){return!!c[b]}),
maxAnisotropic:l,maxDrawbuffers:d,maxColorAttachments:p,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),
maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:g,npotTextureCube:T}}},{"./util/pool":33,"./util/sorted-object-keys":35}],15:[function(c,n,m){var a=c("./util/check"),b=c("./util/is-typed-array");n.exports=function(e,c,l,d,p,g,u){function T(r){var w;null===c.next?(a(p.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
w=5121):(a(null!==c.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),w=c.next.colorAttachments[0].texture._texture.type,a.optional(function(){g.oes_texture_float?(a(5121===w||5126===w,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===w&&a(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===w,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var v=0,t=0,T=d.framebufferWidth,n=d.framebufferHeight,B=null;b(r)?B=r:r&&(a.type(r,"object","invalid arguments to regl.read()"),v=r.x|0,t=r.y|0,a(0<=v&&v<d.framebufferWidth,"invalid x offset for regl.read"),a(0<=t&&t<d.framebufferHeight,"invalid y offset for regl.read"),T=(r.width||d.framebufferWidth-v)|0,n=(r.height||d.framebufferHeight-t)|0,B=r.data||null);B&&(5121===w?a(B instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===w&&a(B instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<T&&T+v<=d.framebufferWidth,"invalid width for read pixels");a(0<n&&n+t<=d.framebufferHeight,"invalid height for read pixels");l();r=T*n*4;B||(5121===w?B=new Uint8Array(r):5126===w&&(B=B||new Float32Array(r)));a.isTypedArray(B,"data buffer for regl.read() must be a typedarray");a(B.byteLength>=r,"data buffer for regl.read() too small");e.pixelStorei(3333,4);e.readPixels(v,t,T,n,6408,w,B);return B}function w(b){var a;
c.setFBO({framebuffer:b.framebuffer},function(){a=T(b)});return a}return function(b){return b&&"framebuffer"in b?w(b):T(b)}}},{"./util/check":22,"./util/is-typed-array":31}],16:[function(c,n,m){var a=c("./util/sorted-object-keys"),b=c("./util/check"),e=c("./util/values"),k=[];k[32854]=2;k[32855]=2;k[36194]=2;k[33189]=2;k[36168]=1;k[34041]=4;k[35907]=4;k[34836]=16;k[34842]=8;k[34843]=6;n.exports=function(c,d,p,g,u){function T(b){this.id=v++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=
this.width=0;u.profile&&(this.stats={size:0})}function w(a){var d=a.renderbuffer;b(d,"must not double destroy renderbuffer");c.bindRenderbuffer(36161,null);c.deleteRenderbuffer(d);a.renderbuffer=null;a.refCount=0;delete t[a.id];g.renderbufferCount--}var r={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(r.srgba=35907);d.ext_color_buffer_half_float&&(r.rgba16f=34842,r.rgb16f=34843);d.webgl_color_buffer_float&&(r.rgba32f=34836);var x=[];a(r).forEach(function(b){x[r[b]]=
b});var v=0,t={};T.prototype.decRef=function(){0>=--this.refCount&&w(this)};u.profile&&(g.getTotalRenderbufferSize=function(){var b=0;a(t).forEach(function(a){b+=t[a].stats.size});return b});return{create:function(a,d){function e(a,d){var g=0,v=0,t=32854;"object"===typeof a&&a?("shape"in a?(v=a.shape,b(Array.isArray(v)&&2<=v.length,"invalid renderbuffer shape"),g=v[0]|0,v=v[1]|0):("radius"in a&&(g=v=a.radius|0),"width"in a&&(g=a.width|0),"height"in a&&(v=a.height|0)),"format"in a&&(b.parameter(a.format,
r,"invalid renderbuffer format"),t=r[a.format])):"number"===typeof a?(g=a|0,v="number"===typeof d?d|0:g):a?b.raise("invalid arguments to renderbuffer constructor"):g=v=1;b(0<g&&0<v&&g<=p.maxRenderbufferSize&&v<=p.maxRenderbufferSize,"invalid renderbuffer size");if(g!==w.width||v!==w.height||t!==w.format)return e.width=w.width=g,e.height=w.height=v,w.format=t,c.bindRenderbuffer(36161,w.renderbuffer),c.renderbufferStorage(36161,t,g,v),b(0===c.getError(),"invalid render buffer format"),u.profile&&(w.stats.size=
k[w.format]*w.width*w.height),e.format=x[w.format],e}var w=new T(c.createRenderbuffer());t[w.id]=w;g.renderbufferCount++;e(a,d);e.resize=function(a,d){var g=a|0,r=d|0||g;if(g===w.width&&r===w.height)return e;b(0<g&&0<r&&g<=p.maxRenderbufferSize&&r<=p.maxRenderbufferSize,"invalid renderbuffer size");e.width=w.width=g;e.height=w.height=r;c.bindRenderbuffer(36161,w.renderbuffer);c.renderbufferStorage(36161,w.format,g,r);b(0===c.getError(),"invalid render buffer format");u.profile&&(w.stats.size=k[w.format]*
w.width*w.height);return e};e._reglType="renderbuffer";e._renderbuffer=w;u.profile&&(e.stats=w.stats);e.destroy=function(){w.decRef()};return e},clear:function(){e(t).forEach(w)},restore:function(){e(t).forEach(function(b){b.renderbuffer=c.createRenderbuffer();c.bindRenderbuffer(36161,b.renderbuffer);c.renderbufferStorage(36161,b.format,b.width,b.height)});c.bindRenderbuffer(36161,null)}}}},{"./util/check":22,"./util/sorted-object-keys":35,"./util/values":37}],17:[function(c,n,m){var a=c("./util/sorted-object-keys"),
b=c("./util/check"),e=c("./util/extend"),k=c("./util/values");n.exports=function(c,d,p,g){function u(b,a,d,e){this.name=b;this.id=a;this.location=d;this.info=e}function T(b,a){for(var d=0;d<b.length;++d)if(b[d].id===a.id){b[d].location=a.location;return}b.push(a)}function w(a,e,g){var k=35632===a?v:t,p=k[e];if(!p){var w=d.str(e),p=c.createShader(a);c.shaderSource(p,w);c.compileShader(p);b.shaderError(c,p,w,a,g);k[e]=p}return p}function r(b,a){this.id=B++;this.fragId=b;this.vertId=a;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;g.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function x(a,e,k){var p;p=w(35632,a.fragId);var r=w(35633,a.vertId),v=a.program=c.createProgram();c.attachShader(v,p);c.attachShader(v,r);if(k)for(p=0;p<k.length;++p)r=k[p],c.bindAttribLocation(v,r[0],r[1]);c.linkProgram(v);b.linkError(c,v,d.str(a.fragId),d.str(a.vertId),e);k=c.getProgramParameter(v,35718);g.profile&&(a.stats.uniformsCount=k);r=a.uniforms;for(p=0;p<k;++p)if(e=c.getActiveUniform(v,
p))if(1<e.size)for(var t=0;t<e.size;++t){var x=e.name.replace("[0]","["+t+"]");T(r,new u(x,d.id(x),c.getUniformLocation(v,x),e))}else T(r,new u(e.name,d.id(e.name),c.getUniformLocation(v,e.name),e));k=c.getProgramParameter(v,35721);g.profile&&(a.stats.attributesCount=k);a=a.attributes;for(p=0;p<k;++p)(e=c.getActiveAttrib(v,p))&&T(a,new u(e.name,d.id(e.name),c.getAttribLocation(v,e.name),e))}var v={},t={},n={},z=[],B=0;g.profile&&(p.getMaxUniformsCount=function(){var b=0;z.forEach(function(a){a.stats.uniformsCount>
b&&(b=a.stats.uniformsCount)});return b},p.getMaxAttributesCount=function(){var b=0;z.forEach(function(a){a.stats.attributesCount>b&&(b=a.stats.attributesCount)});return b});return{clear:function(){var b=c.deleteShader.bind(c);k(v).forEach(b);v={};k(t).forEach(b);t={};z.forEach(function(b){c.deleteProgram(b.program)});z.length=0;n={};p.shaderCount=0},program:function(d,g,k,w){b.command(0<=d,"missing vertex shader",k);b.command(0<=g,"missing fragment shader",k);var u=n[g];u||(u=n[g]={});var I=u[d];
if(I&&(I.refCount++,!w))return I;var T=new r(g,d);p.shaderCount++;x(T,k,w);I||(u[d]=T);z.push(T);return e(T,{destroy:function(){T.refCount--;if(0>=T.refCount){c.deleteProgram(T.program);var b=z.indexOf(T);z.splice(b,1);p.shaderCount--}0>=u[T.vertId].refCount&&(c.deleteShader(t[T.vertId]),delete t[T.vertId],delete n[T.fragId][T.vertId]);a(n[T.fragId]).length||(c.deleteShader(v[T.fragId]),delete v[T.fragId],delete n[T.fragId])}})},restore:function(){v={};t={};for(var b=0;b<z.length;++b)x(z[b],null,
z[b].attributes.map(function(b){return[b.location,b.name]}))},shader:w,frag:-1,vert:-1}}},{"./util/check":22,"./util/extend":26,"./util/sorted-object-keys":35,"./util/values":37}],18:[function(c,n,m){n.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],19:[function(c,n,m){n.exports=function(){var a={"":0},b=[""];return{id:function(e){var c=a[e];if(c)return c;c=a[e]=b.length;b.push(e);
return c},str:function(a){return b[a]}}}},{}],20:[function(c,n,m){function a(b){return"[object "+b+"]"}function b(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function e(b){return Array.isArray(b)&&0!==b.length&&qa(b[0])?!0:!1}function k(b){return Object.prototype.toString.call(b)}function l(a){if(!a)return!1;var h=k(a);return 0<=la.indexOf(h)?!0:b(a)||e(a)||x(a)}function d(b,h){36193===b.type?(b.data=t(h),v.freeType(h)):b.data=h}function p(b,h,a,d,e,c){b="undefined"!==typeof ea[b]?
ea[b]:H[b]*N[h];c&&(b*=6);if(e){for(d=0;1<=a;)d+=b*a*a,a/=2;return d}return b*a*d}var g=c("./util/sorted-object-keys"),u=c("./util/check"),T=c("./util/extend"),w=c("./util/values"),r=c("./util/is-typed-array"),x=c("./util/is-ndarray"),v=c("./util/pool"),t=c("./util/to-half-float"),qa=c("./util/is-array-like"),z=c("./util/flatten"),B=c("./util/is-pow2");m=c("./constants/arraytypes.json");var S=c("./constants/arraytypes.json"),J=[9984,9986,9985,9987],fa=[0,6409,6410,6407,6408],H={};H[6409]=H[6406]=
H[6402]=1;H[34041]=H[6410]=2;H[6407]=H[35904]=3;H[6408]=H[35906]=4;var C=a("HTMLCanvasElement"),I=a("OffscreenCanvas"),aa=a("CanvasRenderingContext2D"),L=a("ImageBitmap"),U=a("HTMLImageElement"),F=a("HTMLVideoElement"),la=g(m).concat([C,I,aa,L,U,F]),N=[];N[5121]=1;N[5126]=4;N[36193]=2;N[5123]=2;N[5125]=4;var ea=[];ea[32854]=2;ea[32855]=2;ea[36194]=2;ea[34041]=4;ea[33776]=.5;ea[33777]=.5;ea[33778]=1;ea[33779]=1;ea[35986]=.5;ea[35987]=1;ea[34798]=1;ea[35840]=.5;ea[35841]=.25;ea[35842]=.5;ea[35843]=
.25;ea[36196]=.5;n.exports=function(a,h,f,c,n,m,N){function pa(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Na(b,h){b.internalformat=h.internalformat;b.format=h.format;b.type=h.type;b.compressed=h.compressed;b.premultiplyAlpha=h.premultiplyAlpha;b.flipY=h.flipY;b.unpackAlignment=h.unpackAlignment;b.colorSpace=h.colorSpace;b.width=h.width;b.height=
h.height;b.channels=h.channels}function ia(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(u.type(a.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(u.type(a.flipY,"boolean","invalid texture flip"),b.flipY=a.flipY);"alignment"in a&&(u.oneOf(a.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=a.alignment);"colorSpace"in a&&(u.parameter(a.colorSpace,Bc,"invalid colorSpace"),b.colorSpace=Bc[a.colorSpace]);if("type"in
a){var d=a.type;u(h.oes_texture_float||!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");u(h.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");u(h.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");u.parameter(d,
Z,"invalid texture type");b.type=Z[d]}var e=b.width,c=b.height,g=b.channels,d=!1;"shape"in a?(u(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),e=a.shape[0],c=a.shape[1],3===a.shape.length&&(g=a.shape[2],u(0<g&&4>=g,"invalid number of channels"),d=!0),u(0<=e&&e<=f.maxTextureSize,"invalid width"),u(0<=c&&c<=f.maxTextureSize,"invalid height")):("radius"in a&&(e=c=a.radius,u(0<=e&&e<=f.maxTextureSize,"invalid radius")),"width"in a&&(e=a.width,u(0<=e&&e<=f.maxTextureSize,"invalid width")),
"height"in a&&(c=a.height,u(0<=c&&c<=f.maxTextureSize,"invalid height")),"channels"in a&&(g=a.channels,u(0<g&&4>=g,"invalid number of channels"),d=!0));b.width=e|0;b.height=c|0;b.channels=g|0;e=!1;"format"in a&&(e=a.format,u(h.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),u.parameter(e,P,"invalid texture format"),c=b.internalformat=P[e],b.format=va[c],e in Z&&!("type"in a)&&(b.type=Z[e]),e in ja&&
(b.compressed=!0),e=!0);!d&&e?b.channels=H[b.format]:d&&!e?b.channels!==fa[b.format]&&(b.format=b.internalformat=fa[b.channels]):e&&d&&u(b.channels===H[b.format],"number of channels inconsistent with specified format")}}function Q(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function O(){pa.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function W(h,
a){var c=null;l(a)?c=a:a&&(u.type(a,"object","invalid pixel data type"),ia(h,a),"x"in a&&(h.xOffset=a.x|0),"y"in a&&(h.yOffset=a.y|0),l(a.data)&&(c=a.data));u(!h.compressed||c instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){u(!c,"can not specify copy and data field for the same texture");var g=n.viewportWidth,q=n.viewportHeight;h.width=h.width||g-h.xOffset;h.height=h.height||q-h.yOffset;h.needsCopy=!0;u(0<=h.xOffset&&h.xOffset<g&&0<=h.yOffset&&h.yOffset<
q&&0<h.width&&h.width<=g&&0<h.height&&h.height<=q,"copy texture read out of bounds")}else if(!c)h.width=h.width||1,h.height=h.height||1,h.channels=h.channels||4;else if(r(c))h.channels=h.channels||4,h.data=c,"type"in a||5121!==h.type||(h.type=S[Object.prototype.toString.call(c)]|0);else if(b(c)){h.channels=h.channels||4;g=c;q=g.length;switch(h.type){case 5121:case 5123:case 5125:case 5126:q=v.allocType(h.type,q);q.set(g);h.data=q;break;case 36193:h.data=t(g);break;default:u.raise("unsupported texture type, must specify a typed array")}h.alignment=
1;h.needsFree=!0}else if(x(c)){g=c.data;Array.isArray(g)||5121!==h.type||(h.type=S[Object.prototype.toString.call(g)]|0);var q=c.shape,p=c.stride,y,w,T,E;3===q.length?(T=q[2],E=p[2]):(u(2===q.length,"invalid ndarray pixel data, must be 2 or 3D"),E=T=1);y=q[0];w=q[1];q=p[0];p=p[1];h.alignment=1;h.width=y;h.height=w;h.channels=T;h.format=h.internalformat=fa[T];h.needsFree=!0;y=E;c=c.offset;T=h.width;E=h.height;w=h.channels;for(var H=v.allocType(36193===h.type?5126:h.type,T*E*w),D=0,m=0;m<E;++m)for(var B=
0;B<T;++B)for(var G=0;G<w;++G)H[D++]=g[q*B+p*m+y*G+c];d(h,H)}else if(k(c)===C||k(c)===I||k(c)===aa)k(c)===C||k(c)===I?h.element=c:h.element=c.canvas,h.width=h.element.width,h.height=h.element.height,h.channels=4;else if(k(c)===L)h.element=c,h.width=c.width,h.height=c.height,h.channels=4;else if(k(c)===U)h.element=c,h.width=c.naturalWidth,h.height=c.naturalHeight,h.channels=4;else if(k(c)===F)h.element=c,h.width=c.videoWidth,h.height=c.videoHeight,h.channels=4;else if(e(c)){g=h.width||c[0].length;
q=h.height||c.length;p=h.channels;p=qa(c[0][0])?p||c[0][0].length:p||1;y=z.shape(c);T=1;for(E=0;E<y.length;++E)T*=y[E];T=v.allocType(36193===h.type?5126:h.type,T);z.flatten(c,y,"",T);d(h,T);h.alignment=1;h.width=g;h.height=q;h.channels=p;h.format=h.internalformat=fa[p];h.needsFree=!0}5126===h.type?u(0<=f.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===h.type&&u(0<=f.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function la(b,h,d,f,e){var g=b.element,k=b.data,l=b.internalformat,p=b.format,w=b.type,r=b.width,u=b.height;Q(b);g?a.texSubImage2D(h,e,d,f,p,w,g):b.compressed?a.compressedTexSubImage2D(h,e,d,f,l,r,u,k):b.needsCopy?(c(),a.copyTexSubImage2D(h,e,d,f,b.xOffset,b.yOffset,r,u)):a.texSubImage2D(h,e,d,f,r,u,p,w,k)}function R(){return Y.pop()||new O}function ea(b){b.needsFree&&v.freeType(b.data);O.call(b);Y.push(b)}function Xa(){pa.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function V(b,h,a){var d=b.images[0]=R();b.mipmask=1;d.width=b.width=h;d.height=b.height=a;d.channels=b.channels=4}function D(b,h){var a=null;if(l(h))a=b.images[0]=R(),Na(a,b),W(a,h),b.mipmask=1;else if(ia(b,h),Array.isArray(h.mipmap))for(var d=h.mipmap,f=0;f<d.length;++f)a=b.images[f]=R(),Na(a,b),a.width>>=f,a.height>>=f,W(a,d[f]),b.mipmask|=1<<f;else a=b.images[0]=R(),Na(a,b),W(a,h),b.mipmask=1;Na(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==
b.internalformat&&33779!==b.internalformat||u(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function na(b,h){for(var d=b.images,f=0;f<d.length&&d[f];++f){var e=d[f],g=h,k=f,l=e.element,p=e.data,w=e.internalformat,r=e.format,u=e.type,v=e.width,t=e.height;Q(e);l?a.texImage2D(g,k,r,r,u,l):e.compressed?a.compressedTexImage2D(g,k,w,v,t,0,p):e.needsCopy?(c(),a.copyTexImage2D(g,k,r,e.xOffset,e.yOffset,v,t,0)):a.texImage2D(g,
k,r,v,t,0,r,u,p||null)}}function ba(){var b=ha.pop()||new Xa;pa.call(b);for(var h=b.mipmask=0;16>h;++h)b.images[h]=null;return b}function Ca(b){for(var h=b.images,a=0;a<h.length;++a)h[a]&&ea(h[a]),h[a]=null;ha.push(b)}function Ka(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Wb(b,h){if("min"in h){var a=h.min;u.parameter(a,td);b.minFilter=td[a];0<=J.indexOf(b.minFilter)&&!("faces"in h)&&(b.genMipmaps=!0)}"mag"in
h&&(a=h.mag,u.parameter(a,mc),b.magFilter=mc[a]);var a=b.wrapS,d=b.wrapT;if("wrap"in h){var e=h.wrap;"string"===typeof e?(u.parameter(e,rc),a=d=rc[e]):Array.isArray(e)&&(u.parameter(e[0],rc),u.parameter(e[1],rc),a=rc[e[0]],d=rc[e[1]])}else"wrapS"in h&&(a=h.wrapS,u.parameter(a,rc),a=rc[a]),"wrapT"in h&&(d=h.wrapT,u.parameter(d,rc),d=rc[d]);b.wrapS=a;b.wrapT=d;"anisotropic"in h&&(a=h.anisotropic,u("number"===typeof a&&1<=a&&a<=f.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=h.anisotropic);
if("mipmap"in h){a=!1;switch(typeof h.mipmap){case "string":u.parameter(h.mipmap,Tb,"invalid mipmap hint");b.mipmapHint=Tb[h.mipmap];a=b.genMipmaps=!0;break;case "boolean":a=b.genMipmaps=h.mipmap;break;case "object":u(Array.isArray(h.mipmap),"invalid mipmap type");b.genMipmaps=!1;a=!0;break;default:u.raise("invalid mipmap type")}!a||"min"in h||(b.minFilter=9984)}}function $a(b,d){a.texParameteri(d,10241,b.minFilter);a.texParameteri(d,10240,b.magFilter);a.texParameteri(d,10242,b.wrapS);a.texParameteri(d,
10243,b.wrapT);h.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(d))}function X(b){pa.call(this);this.mipmask=0;this.internalformat=6408;this.id=ma++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ka;N.profile&&(this.stats={size:0})}function qb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=da[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function ra(b){var h=b.texture;u(h,"must not double destroy texture");var d=b.unit,e=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(e,null),da[d]=null);a.deleteTexture(h);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete K[b.id];m.textureCount--}var Tb={"don't care":4352,"dont care":4352,nice:4354,fast:4353},rc={repeat:10497,clamp:33071,mirror:33648},mc={nearest:9728,linear:9729},td=T({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},mc),Bc={none:0,browser:37444},Z={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},P={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ja={};h.ext_srgb&&(P.srgb=35904,P.srgba=35906);h.oes_texture_float&&(Z.float32=Z["float"]=5126);h.oes_texture_half_float&&(Z.float16=Z["half float"]=36193);h.webgl_depth_texture&&(T(P,{depth:6402,"depth stencil":34041}),T(Z,{uint16:5123,uint32:5125,
"depth stencil":34042}));h.webgl_compressed_texture_s3tc&&T(ja,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&T(ja,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&T(ja,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&(ja["rgb etc1"]=36196);var Fa=Array.prototype.slice.call(a.getParameter(34467));
g(ja).forEach(function(b){var h=ja[b];0<=Fa.indexOf(h)&&(P[b]=h)});var Ab=g(P);f.textureFormats=Ab;var $c=[];g(P).forEach(function(b){$c[P[b]]=b});var Zb=[];g(Z).forEach(function(b){Zb[Z[b]]=b});var M=[];g(mc).forEach(function(b){M[mc[b]]=b});var G=[];g(td).forEach(function(b){G[td[b]]=b});var ka=[];g(rc).forEach(function(b){ka[rc[b]]=b});var va=Ab.reduce(function(b,a){var d=P[a];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||h.ext_srgb&&(35904===d||35906===d)?b[d]=d:32855===d||0<=a.indexOf("rgba")?
b[d]=6408:b[d]=6407;return b},{}),Y=[],ha=[],ma=0,K={},E=f.maxTextureUnits,da=Array(E).map(function(){return null});T(X.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var h=0;h<E;++h){var d=da[h];if(d){if(0<d.bindCount)continue;d.unit=-1}da[h]=this;b=h;break}b>=E&&u.raise("insufficient number of texture units");N.profile&&m.maxTextureUnits<b+1&&(m.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&ra(this)}});N.profile&&(m.getTotalTextureSize=function(){var b=0;g(K).forEach(function(h){b+=K[h].stats.size});return b});return{create2D:function(b,h){function d(b,h){var a=e.texInfo;Ka.call(a);var c=ba();"number"===typeof b?"number"===typeof h?V(c,b|0,h|0):V(c,b|0,b|0):b?(u.type(b,"object","invalid arguments to regl.texture"),Wb(a,b),D(c,b)):V(c,1,1);a.genMipmaps&&(c.mipmask=(c.width<<1)-1);e.mipmask=c.mipmask;Na(e,c);u.texture2D(a,c,f);e.internalformat=c.internalformat;
d.width=c.width;d.height=c.height;qb(e);na(c,3553);$a(a,3553);ga();Ca(c);N.profile&&(e.stats.size=p(e.internalformat,e.type,c.width,c.height,a.genMipmaps,!1));d.format=$c[e.internalformat];d.type=Zb[e.type];d.mag=M[a.magFilter];d.min=G[a.minFilter];d.wrapS=ka[a.wrapS];d.wrapT=ka[a.wrapT];return d}var e=new X(3553);K[e.id]=e;m.textureCount++;d(b,h);d.subimage=function(b,h,a,f){u(!!b,"must specify image data");h|=0;a|=0;f|=0;var c=R();Na(c,e);c.width=0;c.height=0;W(c,b);c.width=c.width||(e.width>>f)-
h;c.height=c.height||(e.height>>f)-a;u(e.type===c.type&&e.format===c.format&&e.internalformat===c.internalformat,"incompatible format for texture.subimage");u(0<=h&&0<=a&&h+c.width<=e.width&&a+c.height<=e.height,"texture.subimage write out of bounds");u(e.mipmask&1<<f,"missing mipmap data");u(c.data||c.element||c.needsCopy,"missing image data");qb(e);la(c,3553,h,a,f);ga();ea(c);return d};d.resize=function(b,h){var f=b|0,c=h|0||f;if(f===e.width&&c===e.height)return d;d.width=e.width=f;d.height=e.height=
c;qb(e);for(var g=0;e.mipmask>>g;++g){var k=f>>g,q=c>>g;if(!k||!q)break;a.texImage2D(3553,g,e.format,k,q,0,e.format,e.type,null)}ga();N.profile&&(e.stats.size=p(e.internalformat,e.type,f,c,!1,!1));return d};d._reglType="texture2d";d._texture=e;N.profile&&(d.stats=e.stats);d.destroy=function(){e.decRef()};return d},createCube:function(b,h,d,e,c,g){function k(b,h,a,d,e,c){var g,y=q.texInfo;Ka.call(y);for(g=0;6>g;++g)l[g]=ba();if("number"!==typeof b&&b)if("object"===typeof b)if(h)D(l[0],b),D(l[1],h),
D(l[2],a),D(l[3],d),D(l[4],e),D(l[5],c);else if(Wb(y,b),ia(q,b),"faces"in b)for(b=b.faces,u(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),g=0;6>g;++g)u("object"===typeof b[g]&&!!b[g],"invalid input for cube map face"),Na(l[g],q),D(l[g],b[g]);else for(g=0;6>g;++g)D(l[g],b);else u.raise("invalid arguments to cube map");else for(b=b|0||1,g=0;6>g;++g)V(l[g],b,b);Na(q,l[0]);u.optional(function(){f.npotTextureCube||u(B(q.width)&&B(q.height),"your browser does not support non power or two texture dimensions")});
q.mipmask=y.genMipmaps?(l[0].width<<1)-1:l[0].mipmask;u.textureCube(q,y,l,f);q.internalformat=l[0].internalformat;k.width=l[0].width;k.height=l[0].height;qb(q);for(g=0;6>g;++g)na(l[g],34069+g);$a(y,34067);ga();N.profile&&(q.stats.size=p(q.internalformat,q.type,k.width,k.height,y.genMipmaps,!0));k.format=$c[q.internalformat];k.type=Zb[q.type];k.mag=M[y.magFilter];k.min=G[y.minFilter];k.wrapS=ka[y.wrapS];k.wrapT=ka[y.wrapT];for(g=0;6>g;++g)Ca(l[g]);return k}var q=new X(34067);K[q.id]=q;m.cubeCount++;
var l=Array(6);k(b,h,d,e,c,g);k.subimage=function(b,h,a,d,e){u(!!h,"must specify image data");u("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");a|=0;d|=0;e|=0;var f=R();Na(f,q);f.width=0;f.height=0;W(f,h);f.width=f.width||(q.width>>e)-a;f.height=f.height||(q.height>>e)-d;u(q.type===f.type&&q.format===f.format&&q.internalformat===f.internalformat,"incompatible format for texture.subimage");u(0<=a&&0<=d&&a+f.width<=q.width&&d+f.height<=q.height,"texture.subimage write out of bounds");u(q.mipmask&
1<<e,"missing mipmap data");u(f.data||f.element||f.needsCopy,"missing image data");qb(q);la(f,34069+b,a,d,e);ga();ea(f);return k};k.resize=function(b){b|=0;if(b!==q.width){k.width=q.width=b;k.height=q.height=b;qb(q);for(var h=0;6>h;++h)for(var d=0;q.mipmask>>d;++d)a.texImage2D(34069+h,d,q.format,b>>d,b>>d,0,q.format,q.type,null);ga();N.profile&&(q.stats.size=p(q.internalformat,q.type,k.width,k.height,!1,!0));return k}};k._reglType="textureCube";k._texture=q;N.profile&&(k.stats=q.stats);k.destroy=
function(){q.decRef()};return k},clear:function(){for(var b=0;b<E;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),da[b]=null;w(K).forEach(ra);m.cubeCount=0;m.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<E;++b){var h=da[b];h&&(h.bindCount=0,h.unit=-1,da[b]=null)}w(K).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var h=0;32>h;++h)if(0!==(b.mipmask&1<<h))if(3553===b.target)a.texImage2D(3553,h,b.internalformat,b.width>>
h,b.height>>h,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,h,b.internalformat,b.width>>h,b.height>>h,0,b.internalformat,b.type,null);$a(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<E;++b){var h=da[b];h&&(h.bindCount=0,h.unit=-1,da[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":5,"./util/check":22,"./util/extend":26,"./util/flatten":27,"./util/is-array-like":28,"./util/is-ndarray":29,
"./util/is-pow2":30,"./util/is-typed-array":31,"./util/pool":33,"./util/sorted-object-keys":35,"./util/to-half-float":36,"./util/values":37}],21:[function(c,n,m){n.exports=function(a,b){function e(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function c(b,a,d){var k=p.pop()||new e;k.startQueryIndex=b;k.endQueryIndex=a;k.sum=0;k.stats=d;g.push(k)}if(!b.ext_disjoint_timer_query)return null;var l=[],d=[],p=[],g=[],u=[],T=[];return{beginQuery:function(a){var e=l.pop()||b.ext_disjoint_timer_query.createQueryEXT();
b.ext_disjoint_timer_query.beginQueryEXT(35007,e);d.push(e);c(d.length-1,d.length,a)},endQuery:function(){b.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var a,e;a=d.length;if(0!==a){T.length=Math.max(T.length,a+1);u.length=Math.max(u.length,a+1);u[0]=0;var c=T[0]=0;for(e=a=0;e<d.length;++e){var k=d[e];b.ext_disjoint_timer_query.getQueryObjectEXT(k,34919)?(c+=b.ext_disjoint_timer_query.getQueryObjectEXT(k,34918),l.push(k)):d[a++]=k;u[e+1]=c;T[e+1]=a}d.length=a;for(e=
a=0;e<g.length;++e){var c=g[e],t=c.startQueryIndex,k=c.endQueryIndex;c.sum+=u[k]-u[t];t=T[t];k=T[k];k===t?(c.stats.gpuTime+=c.sum/1E6,p.push(c)):(c.startQueryIndex=t,c.endQueryIndex=k,g[a++]=c)}g.length=a}},getNumPendingQueries:function(){return d.length},clear:function(){l.push.apply(l,d);for(var a=0;a<l.length;a++)b.ext_disjoint_timer_query.deleteQueryEXT(l[a]);d.length=0;l.length=0},restore:function(){d.length=0;l.length=0}}}},{}],22:[function(c,n,m){function a(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function b(b){b=Error("(regl) "+b);console.error(b);throw b;}function e(a,d){a||b(d)}function k(b){return b?": "+b:""}function l(b,a){switch(a){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function d(a,d,e){0>d.indexOf(a)&&b("invalid value"+
k(e)+". must be one of: "+d)}function p(b,a){for(b+="";b.length<a;)b=" "+b;return b}function g(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function u(b,a){this.number=b;this.line=a;this.errors=[]}function T(b,a,d){this.file=b;this.line=a;this.message=d}function w(){var b=Error(),b=(b.stack||b).toString(),a=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return a?a[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function r(){var b=Error(),b=(b.stack||b).toString(),
a=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return a?a[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function x(b,d){var e=b.split("\n"),c=1,k=0,l={unknown:new g,0:new g};l.unknown.name=l[0].name=d||w();l.unknown.lines.push(new u(0,""));for(var p=0;p<e.length;++p){var r=e[p],y=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(r);if(y)switch(y[1]){case "line":if(y=/(\d+)(\s+\d+)?/.exec(y[2]))c=y[1]|0,y[2]&&(k=y[2]|0,k in l||(l[k]=new g));break;case "define":if(y=/SHADER_NAME(_B64)?\s+(.*)$/.exec(y[2]))l[k].name=
y[1]?a(y[2]):y[2]}l[k].lines.push(new u(c++,r))}J(l).forEach(function(b){var a=l[b];a.lines.forEach(function(b){a.index[b.number]=b})});return l}function v(b){var a=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var d=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);d?a.push(new T(d[1]|0,d[2]|0,d[3].trim())):0<b.length&&a.push(new T("unknown",0,b))}});return a}function t(b,a){a.forEach(function(a){var d=b[a.file];if(d){var e=d.index[a.line];if(e){e.errors.push(a);d.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(a)})}function qa(b){b._commandRef=w()}function z(a,d){var e=r();b(a+" in command "+(d||w())+("unknown"===e?"":" called from "+e))}function B(b,a,d,e){l(b,a)||z("invalid parameter type"+k(d)+". expected "+a+", got "+typeof b,e||w())}function S(b,a){return 32820===b||32819===b||33635===b?2:34042===b?4:C[b]*a}var J=c("./sorted-object-keys"),fa=c("./is-typed-array");c=c("./extend");var H="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
C={};C[5120]=C[5121]=1;C[5122]=C[5123]=C[36193]=C[33635]=C[32819]=C[32820]=2;C[5124]=C[5125]=C[5126]=C[34042]=4;n.exports=c(e,{optional:function(b){b()},raise:b,commandRaise:z,command:function(b,a,d){b||z(a,d||w())},parameter:function(a,d,e){a in d||b("unknown parameter ("+a+")"+k(e)+". possible values: "+J(d).join())},commandParameter:function(b,a,d,e){b in a||z("unknown parameter ("+b+")"+k(d)+". possible values: "+J(a).join(),e||w())},constructor:function(a){J(a).forEach(function(a){0>H.indexOf(a)&&
b('invalid regl constructor argument "'+a+'". must be one of '+H)})},type:function(a,d,e){l(a,d)||b("invalid parameter type"+k(e)+". expected "+d+", got "+typeof a)},commandType:B,isTypedArray:function(a,d){fa(a)||b("invalid parameter type"+k(d)+". must be a typed array")},nni:function(a,d){0<=a&&(a|0)===a||b("invalid parameter type, ("+a+")"+k(d)+". must be a nonnegative integer")},oneOf:d,shaderError:function(b,a,d,c,g){if(!b.getShaderParameter(a,b.COMPILE_STATUS)){a=b.getShaderInfoLog(a);b=c===
b.FRAGMENT_SHADER?"fragment":"vertex";B(d,"string",b+" shader source must be a string",g);var k=x(d,g);d=v(a);t(k,d);J(k).forEach(function(b){function a(b,d){h.push(b);e.push(d||"")}var d=k[b];if(d.hasErrors){var h=[""],e=[""];a("file number "+b+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(b){if(0<b.errors.length){a(p(b.number,4)+"|  ","background-color:yellow; font-weight:bold");a(b.line+"\n","color:red; background-color:yellow; font-weight:bold");
var h=0;b.errors.forEach(function(d){d=d.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(e){var c=e[1];d=e[2];switch(c){case "assign":c="="}h=Math.max(b.line.indexOf(c,h),0)}else h=0;a(p("| ",6));a(p("^^^",h+3)+"\n","font-weight:bold");a(p("| ",6));a(d+"\n","font-weight:bold")});a(p("| ",6)+"\n")}else a(p(b.number,4)+"|  "),a(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(h.join("")):(e[0]=h.join("%c"),console.log.apply(console,e))}});e.raise("Error compiling "+
b+" shader, "+k[0].name)}},linkError:function(b,a,d,c,g){b.getProgramParameter(a,b.LINK_STATUS)||(b=b.getProgramInfoLog(a),d=x(d,g),c='Error linking program with vertex shader, "'+x(c,g)[0].name+'", and fragment shader "'+d[0].name+'"',"undefined"!==typeof document?console.log("%c"+c+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(c+"\n"+b),e.raise(c))},callSite:r,saveCommandRef:qa,saveDrawInfo:function(b,a,d,e){function c(b){return b?e.id(b):0}function g(b,
a){J(a).forEach(function(h){b[e.id(h)]=!0})}qa(b);b._fragId=c(b["static"].frag);b._vertId=c(b["static"].vert);var k=b._uniformSet={};g(k,a["static"]);g(k,a.dynamic);a=b._attributeSet={};g(a,d["static"]);g(a,d.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,a,e){b.texture?d(b.texture._texture.internalformat,a,"unsupported texture format for attachment"):d(b.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},
guessCommand:w,texture2D:function(b,a,d){var c=a.width,g=a.height,k=a.channels;e(0<c&&c<=d.maxTextureSize&&0<g&&g<=d.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||e(!(c&c-1)&&!!c&&!(g&g-1)&&!!g,"incompatible wrap mode for texture, both width and height must be power of 2");1===a.mipmask?1!==c&&1!==g&&e(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(e(!(c&c-1)&&!!c&&!(g&g-1)&&!!g,"texture must be a square power of 2 to support mipmapping"),
e(a.mipmask===(c<<1)-1,"missing or incomplete mipmap data"));5126===a.type&&(0>d.extensions.indexOf("oes_texture_float_linear")&&e(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),e(!b.genMipmaps,"mipmap generation not supported with float textures"));var l=a.images;for(d=0;16>d;++d)if(l[d]){var p=c>>d,y=g>>d;e(a.mipmask&1<<d,"missing mipmap data");var h=l[d];e(h.width===p&&h.height===y,"invalid shape for mip images");e(h.format===a.format&&h.internalformat===
a.internalformat&&h.type===a.type,"incompatible type for mip image");!h.compressed&&h.data&&(p=Math.ceil(S(h.type,k)*p/h.unpackAlignment)*h.unpackAlignment,e(h.data.byteLength===p*y,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||e(0===(a.mipmask&1<<d),"extra mipmap data");a.compressed&&e(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,a,d,c){var g=b.width,k=b.height,l=b.channels;e(0<g&&g<=c.maxTextureSize&&
0<k&&k<=c.maxTextureSize,"invalid texture shape");e(g===k,"cube map must be square");e(33071===a.wrapS&&33071===a.wrapT,"wrap mode not supported by cube map");for(c=0;c<d.length;++c){var p=d[c];e(p.width===g&&p.height===k,"inconsistent cube map face shape");a.genMipmaps&&(e(!p.compressed,"can not generate mipmap for compressed textures"),e(1===p.mipmask,"can not specify mipmaps and generate mipmaps"));for(var y=p.images,h=0;16>h;++h){var f=y[h];if(f){var q=g>>h,u=k>>h;e(p.mipmask&1<<h,"missing mipmap data");
e(f.width===q&&f.height===u,"invalid shape for mip images");e(f.format===b.format&&f.internalformat===b.internalformat&&f.type===b.type,"incompatible type for mip image");f.compressed||f.data&&e(f.data.byteLength===q*u*Math.max(S(f.type,l),f.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":26,"./is-typed-array":31,"./sorted-object-keys":35}],23:[function(c,n,m){n.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],24:[function(c,n,m){function a(b){return Array.prototype.slice.call(b)}var b=c("./extend"),e=c("./compiled-fns");n.exports=function(){function c(){var d=[],e=[];return b(function(){d.push.apply(d,a(arguments))},{def:function(){var b="v"+p;p++;e.push(b);0<arguments.length&&(d.push(b,"="),d.push.apply(d,a(arguments)),d.push(";"));return b},toString:function(){return a([0<e.length?"var "+e.join(",")+";":"",a(d).join("")]).join("")}})}function l(){function d(b,a){g(b,
a,"=",e.def(b,a),";")}var e=c(),g=c(),l=e.toString,p=g.toString;return b(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:g,save:d,set:function(b,a,c){d(b,a);e(b,a,"=",c,";")},toString:function(){return l()+p()}})}var d=0,p=0,g={},u={};return{global:c(),link:function(b){var a="$"+d,e=!1;"object"===typeof b&&b.name&&(a=b.name.replace(/ /g,"_"),e=!0);if(a in g)return a;g[a]=b;e||d++;return a},block:c,proc:function(d,e){function c(){var b="a"+g.length;g.push(b);return b}var g=[];e=e||0;for(var k=
0;k<e;++k)c();var k=l(),p=k.toString;return u[d]=b(k,{arg:c,toString:function(){return a(["function(",g.join(),"){",p(),"}"]).join("")}})},scope:l,cond:function(){var d=a(arguments).join(""),e=l(),c=l(),g=e.toString,k=c.toString;return b(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){c.apply(c,a(arguments));return this},toString:function(){var b=k();b&&(b="else{"+b+"}");return a(["if(",d,"){",g(),"}",b]).join("")}})},compile:function(){var b=[],a=[];Object.keys(g).sort(function(b,
a){var d="$"===b.charAt(0),e="$"===a.charAt(0);return d||e?d&&e?+b.slice(1)<+a.slice(1)?-1:1:d&&!e?-1:1:b.localeCompare(a)}).forEach(function(d){var e=g[d];b.push(d);a.push(e)});for(var d=0,c=b.length-1;-1<c;c--)if("$"===b[c].charAt(0)){d=c;break}d=b.slice(d).join();c=e[d];if(!c)throw Error("missing precompiled function with key: "+d);return c.apply(null,a)}}}},{"./compiled-fns":25,"./extend":26}],25:[function(c,n,m){n.exports={$0:function(a){var b,e,c,l,d,p,g,u,T,w,r,x,v,t,n,z,m,S,J,fa,H,C,I,aa,
L,U,F,la,N,ea;b=a.attributes;e=a.current;c=a.framebuffer;l=a.gl;d=a.next;p=a.vao;g=d.blend_color;u=e.blend_color;T=d.blend_equation;w=e.blend_equation;r=d.blend_func;x=e.blend_func;v=d.colorMask;t=e.colorMask;n=d.depth_range;z=e.depth_range;m=d.polygonOffset_offset;S=e.polygonOffset_offset;J=d.sample_coverage;fa=e.sample_coverage;H=d.scissor_box;C=e.scissor_box;I=d.stencil_func;aa=e.stencil_func;L=d.stencil_opBack;U=e.stencil_opBack;F=d.stencil_opFront;la=e.stencil_opFront;N=d.viewport;ea=e.viewport;
return{poll:function(){var b,a,f,q,p,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca;e.dirty=!1;a=d.blend_enable;f=d.cull_enable;q=d.depth_enable;p=d.dither;Wa=d.polygonOffset_enable;kc=d.sample_alpha;pa=d.sample_enable;Na=d.scissor_enable;ia=d.stencil_enable;Q=d.cull_face;O=e.cull_face;W=d.depth_func;ta=e.depth_func;R=d.depth_mask;Vb=e.depth_mask;Xa=d.frontFace;V=e.frontFace;D=d.lineWidth;na=e.lineWidth;ba=d.stencil_mask;Ca=e.stencil_mask;b=c.next;b!==c.cur&&(b?l.bindFramebuffer(36160,b.framebuffer):
l.bindFramebuffer(36160,null),c.cur=b);a!==e.blend_enable&&(a?l.enable(3042):l.disable(3042),e.blend_enable=a);f!==e.cull_enable&&(f?l.enable(2884):l.disable(2884),e.cull_enable=f);q!==e.depth_enable&&(q?l.enable(2929):l.disable(2929),e.depth_enable=q);p!==e.dither&&(p?l.enable(3024):l.disable(3024),e.dither=p);Wa!==e.polygonOffset_enable&&(Wa?l.enable(32823):l.disable(32823),e.polygonOffset_enable=Wa);kc!==e.sample_alpha&&(kc?l.enable(32926):l.disable(32926),e.sample_alpha=kc);pa!==e.sample_enable&&
(pa?l.enable(32928):l.disable(32928),e.sample_enable=pa);Na!==e.scissor_enable&&(Na?l.enable(3089):l.disable(3089),e.scissor_enable=Na);ia!==e.stencil_enable&&(ia?l.enable(2960):l.disable(2960),e.stencil_enable=ia);if(g[0]!==u[0]||g[1]!==u[1]||g[2]!==u[2]||g[3]!==u[3])l.blendColor(g[0],g[1],g[2],g[3]),u[0]=g[0],u[1]=g[1],u[2]=g[2],u[3]=g[3];if(T[0]!==w[0]||T[1]!==w[1])l.blendEquationSeparate(T[0],T[1]),w[0]=T[0],w[1]=T[1];if(r[0]!==x[0]||r[1]!==x[1]||r[2]!==x[2]||r[3]!==x[3])l.blendFuncSeparate(r[0],
r[1],r[2],r[3]),x[0]=r[0],x[1]=r[1],x[2]=r[2],x[3]=r[3];if(v[0]!==t[0]||v[1]!==t[1]||v[2]!==t[2]||v[3]!==t[3])l.colorMask(v[0],v[1],v[2],v[3]),t[0]=v[0],t[1]=v[1],t[2]=v[2],t[3]=v[3];Q!==O&&(l.cullFace(Q),e.cull_face=Q);W!==ta&&(l.depthFunc(W),e.depth_func=W);R!==Vb&&(l.depthMask(R),e.depth_mask=R);if(n[0]!==z[0]||n[1]!==z[1])l.depthRange(n[0],n[1]),z[0]=n[0],z[1]=n[1];Xa!==V&&(l.frontFace(Xa),e.frontFace=Xa);D!==na&&(l.lineWidth(D),e.lineWidth=D);if(m[0]!==S[0]||m[1]!==S[1])l.polygonOffset(m[0],
m[1]),S[0]=m[0],S[1]=m[1];if(J[0]!==fa[0]||J[1]!==fa[1])l.sampleCoverage(J[0],J[1]),fa[0]=J[0],fa[1]=J[1];if(H[0]!==C[0]||H[1]!==C[1]||H[2]!==C[2]||H[3]!==C[3])l.scissor(H[0],H[1],H[2],H[3]),C[0]=H[0],C[1]=H[1],C[2]=H[2],C[3]=H[3];if(I[0]!==aa[0]||I[1]!==aa[1]||I[2]!==aa[2])l.stencilFunc(I[0],I[1],I[2]),aa[0]=I[0],aa[1]=I[1],aa[2]=I[2];ba!==Ca&&(l.stencilMask(ba),e.stencil_mask=ba);if(L[0]!==U[0]||L[1]!==U[1]||L[2]!==U[2]||L[3]!==U[3])l.stencilOpSeparate(L[0],L[1],L[2],L[3]),U[0]=L[0],U[1]=L[1],U[2]=
L[2],U[3]=L[3];if(F[0]!==la[0]||F[1]!==la[1]||F[2]!==la[2]||F[3]!==la[3])l.stencilOpSeparate(F[0],F[1],F[2],F[3]),la[0]=F[0],la[1]=F[1],la[2]=F[2],la[3]=F[3];if(N[0]!==ea[0]||N[1]!==ea[1]||N[2]!==ea[2]||N[3]!==ea[3])l.viewport(N[0],N[1],N[2],N[3]),ea[0]=N[0],ea[1]=N[1],ea[2]=N[2],ea[3]=N[3]},refresh:function(){var a,h,f,q,ca,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb;e.dirty=!1;h=d.blend_enable;f=d.cull_enable;q=d.depth_enable;ca=d.dither;Wa=d.polygonOffset_enable;kc=d.sample_alpha;pa=d.sample_enable;Na=d.scissor_enable;
ia=d.stencil_enable;Q=d.cull_face;O=d.depth_func;W=d.depth_mask;ta=d.frontFace;R=d.lineWidth;Vb=d.stencil_mask;(a=c.next)?l.bindFramebuffer(36160,a.framebuffer):l.bindFramebuffer(36160,null);c.cur=a;a=b[0];a.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=b[1];a.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,a.buffer.buffer),
l.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=b[2];a.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(2),l.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=b[3];a.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(3,a.size,
a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=b[4];a.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=b[5];a.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):
(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=b[6];a.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=b[7];a.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(7),
l.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=b[8];a.buffer?(l.enableVertexAttribArray(8),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=b[9];a.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=b[10];a.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=b[11];a.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=
b[12];a.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=b[13];a.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(13),l.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=b[14];a.buffer?(l.enableVertexAttribArray(14),
l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=b[15];a.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);p.currentVAO=null;p.setVAO(p.targetVAO);h?l.enable(3042):l.disable(3042);
e.blend_enable=h;f?l.enable(2884):l.disable(2884);e.cull_enable=f;q?l.enable(2929):l.disable(2929);e.depth_enable=q;ca?l.enable(3024):l.disable(3024);e.dither=ca;Wa?l.enable(32823):l.disable(32823);e.polygonOffset_enable=Wa;kc?l.enable(32926):l.disable(32926);e.sample_alpha=kc;pa?l.enable(32928):l.disable(32928);e.sample_enable=pa;Na?l.enable(3089):l.disable(3089);e.scissor_enable=Na;ia?l.enable(2960):l.disable(2960);e.stencil_enable=ia;l.blendColor(g[0],g[1],g[2],g[3]);u[0]=g[0];u[1]=g[1];u[2]=g[2];
u[3]=g[3];l.blendEquationSeparate(T[0],T[1]);w[0]=T[0];w[1]=T[1];l.blendFuncSeparate(r[0],r[1],r[2],r[3]);x[0]=r[0];x[1]=r[1];x[2]=r[2];x[3]=r[3];l.colorMask(v[0],v[1],v[2],v[3]);t[0]=v[0];t[1]=v[1];t[2]=v[2];t[3]=v[3];l.cullFace(Q);e.cull_face=Q;l.depthFunc(O);e.depth_func=O;l.depthMask(W);e.depth_mask=W;l.depthRange(n[0],n[1]);z[0]=n[0];z[1]=n[1];l.frontFace(ta);e.frontFace=ta;l.lineWidth(R);e.lineWidth=R;l.polygonOffset(m[0],m[1]);S[0]=m[0];S[1]=m[1];l.sampleCoverage(J[0],J[1]);fa[0]=J[0];fa[1]=
J[1];l.scissor(H[0],H[1],H[2],H[3]);C[0]=H[0];C[1]=H[1];C[2]=H[2];C[3]=H[3];l.stencilFunc(I[0],I[1],I[2]);aa[0]=I[0];aa[1]=I[1];aa[2]=I[2];l.stencilMask(Vb);e.stencil_mask=Vb;l.stencilOpSeparate(L[0],L[1],L[2],L[3]);U[0]=L[0];U[1]=L[1];U[2]=L[2];U[3]=L[3];l.stencilOpSeparate(F[0],F[1],F[2],F[3]);la[0]=F[0];la[1]=F[1];la[2]=F[2];la[3]=F[3];l.viewport(N[0],N[1],N[2],N[3]);ea[0]=N[0];ea[1]=N[1];ea[2]=N[2];ea[3]=N[3]}}},$3:function(a,b,e,c){var l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,
y,h,f,q,ca,Wa;l=a.context;d=a.current;p=a.framebuffer;g=a.gl;u=a.next;n=a.shader;w=a.vao;r=u.blend_color;x=d.blend_color;v=u.blend_equation;t=d.blend_equation;m=u.blend_func;z=d.blend_func;B=u.colorMask;S=d.colorMask;J=u.depth_range;fa=d.depth_range;H=u.polygonOffset_offset;C=d.polygonOffset_offset;I=u.sample_coverage;aa=d.sample_coverage;L=u.scissor_box;U=d.scissor_box;F=u.stencil_func;la=d.stencil_func;N=u.stencil_opBack;ea=d.stencil_opBack;y=u.stencil_opFront;h=d.stencil_opFront;f=u.viewport;q=
d.viewport;ca={};Wa={};return{batch:function(a,e){var l,ca,Q,O,W;l=p.next;l!==p.cur&&(l?g.bindFramebuffer(36160,l.framebuffer):g.bindFramebuffer(36160,null),p.cur=l);if(d.dirty){l=u.dither;l!==d.dither&&(l?g.enable(3024):g.disable(3024),d.dither=l);l=u.blend_enable;l!==d.blend_enable&&(l?g.enable(3042):g.disable(3042),d.blend_enable=l);l=r[0];Q=r[1];O=r[2];W=r[3];if(l!==x[0]||Q!==x[1]||O!==x[2]||W!==x[3])g.blendColor(l,Q,O,W),x[0]=l,x[1]=Q,x[2]=O,x[3]=W;l=v[0];Q=v[1];if(l!==t[0]||Q!==t[1])g.blendEquationSeparate(l,
Q),t[0]=l,t[1]=Q;l=m[0];Q=m[1];O=m[2];W=m[3];if(l!==z[0]||Q!==z[1]||O!==z[2]||W!==z[3])g.blendFuncSeparate(l,Q,O,W),z[0]=l,z[1]=Q,z[2]=O,z[3]=W;l=u.depth_enable;l!==d.depth_enable&&(l?g.enable(2929):g.disable(2929),d.depth_enable=l);l=u.depth_func;l!==d.depth_func&&(g.depthFunc(l),d.depth_func=l);l=J[0];Q=J[1];if(l!==fa[0]||Q!==fa[1])g.depthRange(l,Q),fa[0]=l,fa[1]=Q;l=u.depth_mask;l!==d.depth_mask&&(g.depthMask(l),d.depth_mask=l);l=B[0];Q=B[1];O=B[2];W=B[3];if(l!==S[0]||Q!==S[1]||O!==S[2]||W!==S[3])g.colorMask(l,
Q,O,W),S[0]=l,S[1]=Q,S[2]=O,S[3]=W;l=u.cull_enable;l!==d.cull_enable&&(l?g.enable(2884):g.disable(2884),d.cull_enable=l);l=u.cull_face;l!==d.cull_face&&(g.cullFace(l),d.cull_face=l);l=u.frontFace;l!==d.frontFace&&(g.frontFace(l),d.frontFace=l);l=u.lineWidth;l!==d.lineWidth&&(g.lineWidth(l),d.lineWidth=l);l=u.polygonOffset_enable;l!==d.polygonOffset_enable&&(l?g.enable(32823):g.disable(32823),d.polygonOffset_enable=l);l=H[0];Q=H[1];if(l!==C[0]||Q!==C[1])g.polygonOffset(l,Q),C[0]=l,C[1]=Q;l=u.sample_alpha;
l!==d.sample_alpha&&(l?g.enable(32926):g.disable(32926),d.sample_alpha=l);l=u.sample_enable;l!==d.sample_enable&&(l?g.enable(32928):g.disable(32928),d.sample_enable=l);l=I[0];Q=I[1];if(l!==aa[0]||Q!==aa[1])g.sampleCoverage(l,Q),aa[0]=l,aa[1]=Q;l=u.stencil_enable;l!==d.stencil_enable&&(l?g.enable(2960):g.disable(2960),d.stencil_enable=l);l=u.stencil_mask;l!==d.stencil_mask&&(g.stencilMask(l),d.stencil_mask=l);l=F[0];Q=F[1];O=F[2];if(l!==la[0]||Q!==la[1]||O!==la[2])g.stencilFunc(l,Q,O),la[0]=l,la[1]=
Q,la[2]=O;l=y[0];Q=y[1];O=y[2];W=y[3];if(l!==h[0]||Q!==h[1]||O!==h[2]||W!==h[3])g.stencilOpSeparate(l,Q,O,W),h[0]=l,h[1]=Q,h[2]=O,h[3]=W;l=N[0];Q=N[1];O=N[2];W=N[3];if(l!==ea[0]||Q!==ea[1]||O!==ea[2]||W!==ea[3])g.stencilOpSeparate(l,Q,O,W),ea[0]=l,ea[1]=Q,ea[2]=O,ea[3]=W;l=u.scissor_enable;l!==d.scissor_enable&&(l?g.enable(3089):g.disable(3089),d.scissor_enable=l);l=L[0];Q=L[1];O=L[2];W=L[3];if(l!==U[0]||Q!==U[1]||O!==U[2]||W!==U[3])g.scissor(l,Q,O,W),U[0]=l,U[1]=Q,U[2]=O,U[3]=W;l=f[0];Q=f[1];O=f[2];
W=f[3];if(l!==q[0]||Q!==q[1]||O!==q[2]||W!==q[3])g.viewport(l,Q,O,W),q[0]=l,q[1]=Q,q[2]=O,q[3]=W;d.dirty=!1}if(l=d.profile)ca=performance.now(),b.count+=e;Q=n.program(n.vert,n.frag);g.useProgram(Q.program);w.setVAO(null);O=Q.id;(W=Wa[O])||(W=Wa[O]=c(Q));W.call(this,a,e);w.setVAO(null);l&&(b.cpuTime+=performance.now()-ca)},draw:function(a){var c,l,k,Q,O;c=p.next;c!==p.cur&&(c?g.bindFramebuffer(36160,c.framebuffer):g.bindFramebuffer(36160,null),p.cur=c);if(d.dirty){c=u.dither;c!==d.dither&&(c?g.enable(3024):
g.disable(3024),d.dither=c);c=u.blend_enable;c!==d.blend_enable&&(c?g.enable(3042):g.disable(3042),d.blend_enable=c);c=r[0];k=r[1];Q=r[2];O=r[3];if(c!==x[0]||k!==x[1]||Q!==x[2]||O!==x[3])g.blendColor(c,k,Q,O),x[0]=c,x[1]=k,x[2]=Q,x[3]=O;c=v[0];k=v[1];if(c!==t[0]||k!==t[1])g.blendEquationSeparate(c,k),t[0]=c,t[1]=k;c=m[0];k=m[1];Q=m[2];O=m[3];if(c!==z[0]||k!==z[1]||Q!==z[2]||O!==z[3])g.blendFuncSeparate(c,k,Q,O),z[0]=c,z[1]=k,z[2]=Q,z[3]=O;c=u.depth_enable;c!==d.depth_enable&&(c?g.enable(2929):g.disable(2929),
d.depth_enable=c);c=u.depth_func;c!==d.depth_func&&(g.depthFunc(c),d.depth_func=c);c=J[0];k=J[1];if(c!==fa[0]||k!==fa[1])g.depthRange(c,k),fa[0]=c,fa[1]=k;c=u.depth_mask;c!==d.depth_mask&&(g.depthMask(c),d.depth_mask=c);c=B[0];k=B[1];Q=B[2];O=B[3];if(c!==S[0]||k!==S[1]||Q!==S[2]||O!==S[3])g.colorMask(c,k,Q,O),S[0]=c,S[1]=k,S[2]=Q,S[3]=O;c=u.cull_enable;c!==d.cull_enable&&(c?g.enable(2884):g.disable(2884),d.cull_enable=c);c=u.cull_face;c!==d.cull_face&&(g.cullFace(c),d.cull_face=c);c=u.frontFace;c!==
d.frontFace&&(g.frontFace(c),d.frontFace=c);c=u.lineWidth;c!==d.lineWidth&&(g.lineWidth(c),d.lineWidth=c);c=u.polygonOffset_enable;c!==d.polygonOffset_enable&&(c?g.enable(32823):g.disable(32823),d.polygonOffset_enable=c);c=H[0];k=H[1];if(c!==C[0]||k!==C[1])g.polygonOffset(c,k),C[0]=c,C[1]=k;c=u.sample_alpha;c!==d.sample_alpha&&(c?g.enable(32926):g.disable(32926),d.sample_alpha=c);c=u.sample_enable;c!==d.sample_enable&&(c?g.enable(32928):g.disable(32928),d.sample_enable=c);c=I[0];k=I[1];if(c!==aa[0]||
k!==aa[1])g.sampleCoverage(c,k),aa[0]=c,aa[1]=k;c=u.stencil_enable;c!==d.stencil_enable&&(c?g.enable(2960):g.disable(2960),d.stencil_enable=c);c=u.stencil_mask;c!==d.stencil_mask&&(g.stencilMask(c),d.stencil_mask=c);c=F[0];k=F[1];Q=F[2];if(c!==la[0]||k!==la[1]||Q!==la[2])g.stencilFunc(c,k,Q),la[0]=c,la[1]=k,la[2]=Q;c=y[0];k=y[1];Q=y[2];O=y[3];if(c!==h[0]||k!==h[1]||Q!==h[2]||O!==h[3])g.stencilOpSeparate(c,k,Q,O),h[0]=c,h[1]=k,h[2]=Q,h[3]=O;c=N[0];k=N[1];Q=N[2];O=N[3];if(c!==ea[0]||k!==ea[1]||Q!==
ea[2]||O!==ea[3])g.stencilOpSeparate(c,k,Q,O),ea[0]=c,ea[1]=k,ea[2]=Q,ea[3]=O;c=u.scissor_enable;c!==d.scissor_enable&&(c?g.enable(3089):g.disable(3089),d.scissor_enable=c);c=L[0];k=L[1];Q=L[2];O=L[3];if(c!==U[0]||k!==U[1]||Q!==U[2]||O!==U[3])g.scissor(c,k,Q,O),U[0]=c,U[1]=k,U[2]=Q,U[3]=O;c=f[0];k=f[1];Q=f[2];O=f[3];if(c!==q[0]||k!==q[1]||Q!==q[2]||O!==q[3])g.viewport(c,k,Q,O),q[0]=c,q[1]=k,q[2]=Q,q[3]=O;d.dirty=!1}if(c=d.profile)l=performance.now(),b.count++;k=n.program(n.vert,n.frag);g.useProgram(k.program);
w.setVAO(null);Q=k.id;(O=ca[Q])||(O=ca[Q]=e(k));O.call(this,a);w.setVAO(null);c&&(b.cpuTime+=performance.now()-l)},scope:function(a,h,c){var e,f;if(e=d.profile)f=performance.now(),b.count++;h(l,a,c);e&&(b.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra,Tb,rc,mc,td,Bc,Z,P,ja,Fa,Ab,$c,Zb,M,G,ka,va,Y,ha,ma){var K,E,da,ua,sa,Ia,A,pc,Cb,oa,Db,ub,We,oe,de,ie,we,ue,zd,he,ve,Ld,Ud,Zd,Nd,Ge,bf,Pe,Ad,Ae,pe,Vd,be,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc,Wc,wc,eb,jd,Eb,qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob;K=a.attributes;E=a.context;da=a.current;ua=a.draw;sa=a.elements;Ia=a.framebuffer;A=a.gl;pc=a.next;Cb=
a.shader;oa=a.uniforms;Db=a.vao;ub=pc.blend_color;We=da.blend_color;oe=pc.blend_equation;de=da.blend_equation;ie=pc.blend_func;we=da.blend_func;ue=pc.colorMask;zd=da.colorMask;he=pc.depth_range;ve=da.depth_range;Ld=pc.polygonOffset_offset;Ud=da.polygonOffset_offset;Zd=pc.sample_coverage;Nd=da.sample_coverage;Ge=pc.scissor_box;bf=da.scissor_box;Pe=pc.stencil_func;Ad=da.stencil_func;Ae=pc.stencil_opBack;pe=da.stencil_opBack;Vd=pc.stencil_opFront;be=da.stencil_opFront;Xd=pc.viewport;rd=da.viewport;md=
{};xd={};dd=new Float32Array(16);Bd=new Float32Array(16);Vc=new Float32Array(16);Dd=new Float32Array(16);Pc=new Float32Array(16);Wc=new Float32Array(16);wc=new Float32Array(16);eb=new Float32Array(16);jd=new Float32Array(16);Eb=new Float32Array(16);qc=new Float32Array(16);Ra=new Float32Array(16);Ic=new Float32Array(16);ic=new Float32Array(16);sc=new Float32Array(16);Gd=new Float32Array(16);nd=new Float32Array(16);Jc=new Float32Array(16);dc=new Float32Array(16);Qc=new Float32Array(16);ad=new Float32Array(16);
bc=new Float32Array(16);Rc=new Float32Array(16);Hb=new Float32Array(16);Da=new Float32Array(16);ud=new Float32Array(16);$b=new Float32Array(16);Ya=new Float32Array(16);Bb=new Float32Array(16);ab=new Float32Array(16);ec=new Float32Array(16);Ob=new Float32Array(16);return{batch:function(b,a){var h,c,e,f;h=Ia.next;h!==Ia.cur&&(h?A.bindFramebuffer(36160,h.framebuffer):A.bindFramebuffer(36160,null),Ia.cur=h);if(da.dirty){var q,y,ca,L,C,H,F,I,N,U,J,Wa,oa,aa,fa,la,ea,eb,Aa,Cb,Ra,ub,Eb,Qa,ic;q=ue[0];y=ue[1];
ca=ue[2];L=ue[3];if(q!==zd[0]||y!==zd[1]||ca!==zd[2]||L!==zd[3])A.colorMask(q,y,ca,L),zd[0]=q,zd[1]=y,zd[2]=ca,zd[3]=L;C=pc.frontFace;C!==da.frontFace&&(A.frontFace(C),da.frontFace=C);H=pc.polygonOffset_enable;H!==da.polygonOffset_enable&&(H?A.enable(32823):A.disable(32823),da.polygonOffset_enable=H);F=Ld[0];I=Ld[1];if(F!==Ud[0]||I!==Ud[1])A.polygonOffset(F,I),Ud[0]=F,Ud[1]=I;N=pc.sample_alpha;N!==da.sample_alpha&&(N?A.enable(32926):A.disable(32926),da.sample_alpha=N);U=pc.sample_enable;U!==da.sample_enable&&
(U?A.enable(32928):A.disable(32928),da.sample_enable=U);J=Zd[0];Wa=Zd[1];if(J!==Nd[0]||Wa!==Nd[1])A.sampleCoverage(J,Wa),Nd[0]=J,Nd[1]=Wa;oa=pc.stencil_enable;oa!==da.stencil_enable&&(oa?A.enable(2960):A.disable(2960),da.stencil_enable=oa);aa=pc.stencil_mask;aa!==da.stencil_mask&&(A.stencilMask(aa),da.stencil_mask=aa);fa=Pe[0];la=Pe[1];ea=Pe[2];if(fa!==Ad[0]||la!==Ad[1]||ea!==Ad[2])A.stencilFunc(fa,la,ea),Ad[0]=fa,Ad[1]=la,Ad[2]=ea;eb=Vd[0];Aa=Vd[1];Cb=Vd[2];Ra=Vd[3];if(eb!==be[0]||Aa!==be[1]||Cb!==
be[2]||Ra!==be[3])A.stencilOpSeparate(eb,Aa,Cb,Ra),be[0]=eb,be[1]=Aa,be[2]=Cb,be[3]=Ra;ub=Ae[0];Eb=Ae[1];Qa=Ae[2];ic=Ae[3];if(ub!==pe[0]||Eb!==pe[1]||Qa!==pe[2]||ic!==pe[3])A.stencilOpSeparate(ub,Eb,Qa,ic),pe[0]=ub,pe[1]=Eb,pe[2]=Qa,pe[3]=ic}A.blendColor(0,0,0,0);We[0]=0;We[1]=0;We[2]=0;We[3]=0;A.disable(3042);da.blend_enable=!1;A.blendEquationSeparate(32774,32774);de[0]=32774;de[1]=32774;A.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;A.enable(2884);da.cull_enable=!0;A.cullFace(1029);
da.cull_face=1029;A.enable(2929);da.depth_enable=!0;A.depthFunc(513);da.depth_func=513;A.depthMask(!0);da.depth_mask=!0;A.depthRange(0,1);ve[0]=0;ve[1]=1;A.disable(3024);da.dither=!1;A.lineWidth(2);da.lineWidth=2;A.enable(3089);da.scissor_enable=!0;c=da.profile;da.profile=!1;A.useProgram(kc.program);var Wc,Pc,wc,xa,Ge,Ja,Vc,db,gb,ya,Ic,Ea,nb,ob,Ua,Va,jd,sc,Bd,Ta,Jb,qc,Ga,dd,Pa,Ba,jb,sb,xb,pb,Dd,tb,ie;Db.setVAO(null);Wc=Tb.location;Pc=K[Wc];Pc.buffer||A.enableVertexAttribArray(Wc);if(Pc.type!==k.dtype||
4!==Pc.size||Pc.buffer!==k||!1!==Pc.normalized||0!==Pc.offset||0!==Pc.stride)A.bindBuffer(34962,k.buffer),A.vertexAttribPointer(Wc,4,k.dtype,!1,0,0),Pc.type=k.dtype,Pc.size=4,Pc.buffer=k,Pc.normalized=!1,Pc.offset=0,Pc.stride=0;wc=rc.location;xa=K[wc];xa.buffer||A.enableVertexAttribArray(wc);if(xa.type!==l.dtype||4!==xa.size||xa.buffer!==l||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)A.bindBuffer(34962,l.buffer),A.vertexAttribPointer(wc,4,l.dtype,!1,0,0),xa.type=l.dtype,xa.size=4,xa.buffer=l,
xa.normalized=!1,xa.offset=0,xa.stride=0;Ge=mc.location;Ja=K[Ge];Ja.buffer||A.enableVertexAttribArray(Ge);if(Ja.type!==d.dtype||4!==Ja.size||Ja.buffer!==d||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)A.bindBuffer(34962,d.buffer),A.vertexAttribPointer(Ge,4,d.dtype,!1,0,0),Ja.type=d.dtype,Ja.size=4,Ja.buffer=d,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;Vc=td.location;db=K[Vc];db.buffer||A.enableVertexAttribArray(Vc);if(db.type!==p.dtype||4!==db.size||db.buffer!==p||!1!==db.normalized||0!==db.offset||
0!==db.stride)A.bindBuffer(34962,p.buffer),A.vertexAttribPointer(Vc,4,p.dtype,!1,0,0),db.type=p.dtype,db.size=4,db.buffer=p,db.normalized=!1,db.offset=0,db.stride=0;gb=Bc.location;ya=K[gb];ya.buffer||A.enableVertexAttribArray(gb);if(ya.type!==g.dtype||4!==ya.size||ya.buffer!==g||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)A.bindBuffer(34962,g.buffer),A.vertexAttribPointer(gb,4,g.dtype,!1,0,0),ya.type=g.dtype,ya.size=4,ya.buffer=g,ya.normalized=!1,ya.offset=0,ya.stride=0;Ic=Z.location;Ea=K[Ic];
Ea.buffer||A.enableVertexAttribArray(Ic);if(Ea.type!==u.dtype||4!==Ea.size||Ea.buffer!==u||!1!==Ea.normalized||0!==Ea.offset||0!==Ea.stride)A.bindBuffer(34962,u.buffer),A.vertexAttribPointer(Ic,4,u.dtype,!1,0,0),Ea.type=u.dtype,Ea.size=4,Ea.buffer=u,Ea.normalized=!1,Ea.offset=0,Ea.stride=0;nb=P.location;ob=K[nb];ob.buffer||A.enableVertexAttribArray(nb);if(ob.type!==n.dtype||4!==ob.size||ob.buffer!==n||!1!==ob.normalized||0!==ob.offset||0!==ob.stride)A.bindBuffer(34962,n.buffer),A.vertexAttribPointer(nb,
4,n.dtype,!1,0,0),ob.type=n.dtype,ob.size=4,ob.buffer=n,ob.normalized=!1,ob.offset=0,ob.stride=0;Ua=ja.location;Va=K[Ua];Va.buffer||A.enableVertexAttribArray(Ua);if(Va.type!==w.dtype||4!==Va.size||Va.buffer!==w||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)A.bindBuffer(34962,w.buffer),A.vertexAttribPointer(Ua,4,w.dtype,!1,0,0),Va.type=w.dtype,Va.size=4,Va.buffer=w,Va.normalized=!1,Va.offset=0,Va.stride=0;jd=Fa.location;sc=K[jd];sc.buffer||A.enableVertexAttribArray(jd);if(sc.type!==r.dtype||4!==
sc.size||sc.buffer!==r||!1!==sc.normalized||0!==sc.offset||0!==sc.stride)A.bindBuffer(34962,r.buffer),A.vertexAttribPointer(jd,4,r.dtype,!1,0,0),sc.type=r.dtype,sc.size=4,sc.buffer=r,sc.normalized=!1,sc.offset=0,sc.stride=0;Bd=Ab.location;Ta=K[Bd];Ta.buffer||A.enableVertexAttribArray(Bd);if(Ta.type!==x.dtype||4!==Ta.size||Ta.buffer!==x||!1!==Ta.normalized||0!==Ta.offset||0!==Ta.stride)A.bindBuffer(34962,x.buffer),A.vertexAttribPointer(Bd,4,x.dtype,!1,0,0),Ta.type=x.dtype,Ta.size=4,Ta.buffer=x,Ta.normalized=
!1,Ta.offset=0,Ta.stride=0;Jb=$c.location;qc=K[Jb];qc.buffer||A.enableVertexAttribArray(Jb);if(qc.type!==v.dtype||4!==qc.size||qc.buffer!==v||!1!==qc.normalized||0!==qc.offset||0!==qc.stride)A.bindBuffer(34962,v.buffer),A.vertexAttribPointer(Jb,4,v.dtype,!1,0,0),qc.type=v.dtype,qc.size=4,qc.buffer=v,qc.normalized=!1,qc.offset=0,qc.stride=0;Ga=Zb.location;dd=K[Ga];dd.buffer||A.enableVertexAttribArray(Ga);if(dd.type!==t.dtype||4!==dd.size||dd.buffer!==t||!1!==dd.normalized||0!==dd.offset||0!==dd.stride)A.bindBuffer(34962,
t.buffer),A.vertexAttribPointer(Ga,4,t.dtype,!1,0,0),dd.type=t.dtype,dd.size=4,dd.buffer=t,dd.normalized=!1,dd.offset=0,dd.stride=0;Pa=M.location;Ba=K[Pa];Ba.buffer||A.enableVertexAttribArray(Pa);if(Ba.type!==m.dtype||4!==Ba.size||Ba.buffer!==m||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)A.bindBuffer(34962,m.buffer),A.vertexAttribPointer(Pa,4,m.dtype,!1,0,0),Ba.type=m.dtype,Ba.size=4,Ba.buffer=m,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;jb=G.location;sb=K[jb];sb.buffer||A.enableVertexAttribArray(jb);
if(sb.type!==z.dtype||4!==sb.size||sb.buffer!==z||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)A.bindBuffer(34962,z.buffer),A.vertexAttribPointer(jb,4,z.dtype,!1,0,0),sb.type=z.dtype,sb.size=4,sb.buffer=z,sb.normalized=!1,sb.offset=0,sb.stride=0;xb=ka.location;pb=K[xb];pb.buffer||A.enableVertexAttribArray(xb);if(pb.type!==B.dtype||4!==pb.size||pb.buffer!==B||!1!==pb.normalized||0!==pb.offset||0!==pb.stride)A.bindBuffer(34962,B.buffer),A.vertexAttribPointer(xb,4,B.dtype,!1,0,0),pb.type=B.dtype,
pb.size=4,pb.buffer=B,pb.normalized=!1,pb.offset=0,pb.stride=0;Dd=Na.location;tb=K[Dd];tb.buffer||A.enableVertexAttribArray(Dd);if(tb.type!==S.dtype||4!==tb.size||tb.buffer!==S||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)A.bindBuffer(34962,S.buffer),A.vertexAttribPointer(Dd,4,S.dtype,!1,0,0),tb.type=S.dtype,tb.size=4,tb.buffer=S,tb.normalized=!1,tb.offset=0,tb.stride=0;A.uniform1i(va.location,pa.bind());(ie=ua.elements)?A.bindBuffer(34963,ie.buffer.buffer):Db.currentVAO&&(ie=sa.getElements(Db.currentVAO.elements))&&
A.bindBuffer(34963,ie.buffer.buffer);for(e=0;e<a;++e){f=b[e];var he,Xd,Gd,oe,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Hf,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d;md.height=f.viewportHeight;md.width=f.viewportWidth;md.x=f.viewportX;md.y=f.viewportY;he=md.x|0;Xd=md.y|0;Gd="width"in md?md.width|0:E.framebufferWidth-he;oe="height"in md?md.height|0:E.framebufferHeight-Xd;bd=E.viewportWidth;E.viewportWidth=Gd;Sb=E.viewportHeight;
E.viewportHeight=oe;A.viewport(he,Xd,Gd,oe);rd[0]=he;rd[1]=Xd;rd[2]=Gd;rd[3]=oe;xd.height=f.scissorHeight;xd.width=f.scissorWidth;xd.x=f.scissorX;xd.y=f.scissorY;ac=xd.x|0;Mb=xd.y|0;Ha="width"in xd?xd.width|0:E.framebufferWidth-ac;Xb="height"in xd?xd.height|0:E.framebufferHeight-Mb;A.scissor(ac,Mb,Ha,Xb);bf[0]=ac;bf[1]=Mb;bf[2]=Ha;bf[3]=Xb;kb=f.dim0A;A.uniformMatrix4fv(Q.location,!1,Array.isArray(kb)||kb instanceof Float32Array?kb:(nd[0]=kb[0],nd[1]=kb[1],nd[2]=kb[2],nd[3]=kb[3],nd[4]=kb[4],nd[5]=
kb[5],nd[6]=kb[6],nd[7]=kb[7],nd[8]=kb[8],nd[9]=kb[9],nd[10]=kb[10],nd[11]=kb[11],nd[12]=kb[12],nd[13]=kb[13],nd[14]=kb[14],nd[15]=kb[15],nd));yb=f.dim1A;A.uniformMatrix4fv(R.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(Jc[0]=yb[0],Jc[1]=yb[1],Jc[2]=yb[2],Jc[3]=yb[3],Jc[4]=yb[4],Jc[5]=yb[5],Jc[6]=yb[6],Jc[7]=yb[7],Jc[8]=yb[8],Jc[9]=yb[9],Jc[10]=yb[10],Jc[11]=yb[11],Jc[12]=yb[12],Jc[13]=yb[13],Jc[14]=yb[14],Jc[15]=yb[15],Jc));Kb=f.dim0B;A.uniformMatrix4fv(O.location,!1,Array.isArray(Kb)||
Kb instanceof Float32Array?Kb:(dc[0]=Kb[0],dc[1]=Kb[1],dc[2]=Kb[2],dc[3]=Kb[3],dc[4]=Kb[4],dc[5]=Kb[5],dc[6]=Kb[6],dc[7]=Kb[7],dc[8]=Kb[8],dc[9]=Kb[9],dc[10]=Kb[10],dc[11]=Kb[11],dc[12]=Kb[12],dc[13]=Kb[13],dc[14]=Kb[14],dc[15]=Kb[15],dc));Nb=f.dim1B;A.uniformMatrix4fv(Vb.location,!1,Array.isArray(Nb)||Nb instanceof Float32Array?Nb:(Qc[0]=Nb[0],Qc[1]=Nb[1],Qc[2]=Nb[2],Qc[3]=Nb[3],Qc[4]=Nb[4],Qc[5]=Nb[5],Qc[6]=Nb[6],Qc[7]=Nb[7],Qc[8]=Nb[8],Qc[9]=Nb[9],Qc[10]=Nb[10],Qc[11]=Nb[11],Qc[12]=Nb[12],Qc[13]=
Nb[13],Qc[14]=Nb[14],Qc[15]=Nb[15],Qc));gc=f.dim0C;A.uniformMatrix4fv(W.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(ad[0]=gc[0],ad[1]=gc[1],ad[2]=gc[2],ad[3]=gc[3],ad[4]=gc[4],ad[5]=gc[5],ad[6]=gc[6],ad[7]=gc[7],ad[8]=gc[8],ad[9]=gc[9],ad[10]=gc[10],ad[11]=gc[11],ad[12]=gc[12],ad[13]=gc[13],ad[14]=gc[14],ad[15]=gc[15],ad));jc=f.dim1C;A.uniformMatrix4fv(Xa.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(bc[0]=jc[0],bc[1]=jc[1],bc[2]=jc[2],bc[3]=jc[3],bc[4]=jc[4],bc[5]=
jc[5],bc[6]=jc[6],bc[7]=jc[7],bc[8]=jc[8],bc[9]=jc[9],bc[10]=jc[10],bc[11]=jc[11],bc[12]=jc[12],bc[13]=jc[13],bc[14]=jc[14],bc[15]=jc[15],bc));Sc=f.dim0D;A.uniformMatrix4fv(ta.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(Rc[0]=Sc[0],Rc[1]=Sc[1],Rc[2]=Sc[2],Rc[3]=Sc[3],Rc[4]=Sc[4],Rc[5]=Sc[5],Rc[6]=Sc[6],Rc[7]=Sc[7],Rc[8]=Sc[8],Rc[9]=Sc[9],Rc[10]=Sc[10],Rc[11]=Sc[11],Rc[12]=Sc[12],Rc[13]=Sc[13],Rc[14]=Sc[14],Rc[15]=Sc[15],Rc));zc=f.dim1D;A.uniformMatrix4fv(V.location,!1,Array.isArray(zc)||
zc instanceof Float32Array?zc:(Hb[0]=zc[0],Hb[1]=zc[1],Hb[2]=zc[2],Hb[3]=zc[3],Hb[4]=zc[4],Hb[5]=zc[5],Hb[6]=zc[6],Hb[7]=zc[7],Hb[8]=zc[8],Hb[9]=zc[9],Hb[10]=zc[10],Hb[11]=zc[11],Hb[12]=zc[12],Hb[13]=zc[13],Hb[14]=zc[14],Hb[15]=zc[15],Hb));Ac=f.loA;A.uniformMatrix4fv(Wb.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(Da[0]=Ac[0],Da[1]=Ac[1],Da[2]=Ac[2],Da[3]=Ac[3],Da[4]=Ac[4],Da[5]=Ac[5],Da[6]=Ac[6],Da[7]=Ac[7],Da[8]=Ac[8],Da[9]=Ac[9],Da[10]=Ac[10],Da[11]=Ac[11],Da[12]=Ac[12],Da[13]=
Ac[13],Da[14]=Ac[14],Da[15]=Ac[15],Da));Ec=f.hiA;A.uniformMatrix4fv(na.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(ud[0]=Ec[0],ud[1]=Ec[1],ud[2]=Ec[2],ud[3]=Ec[3],ud[4]=Ec[4],ud[5]=Ec[5],ud[6]=Ec[6],ud[7]=Ec[7],ud[8]=Ec[8],ud[9]=Ec[9],ud[10]=Ec[10],ud[11]=Ec[11],ud[12]=Ec[12],ud[13]=Ec[13],ud[14]=Ec[14],ud[15]=Ec[15],ud));Mc=f.loB;A.uniformMatrix4fv($a.location,!1,Array.isArray(Mc)||Mc instanceof Float32Array?Mc:($b[0]=Mc[0],$b[1]=Mc[1],$b[2]=Mc[2],$b[3]=Mc[3],$b[4]=Mc[4],$b[5]=
Mc[5],$b[6]=Mc[6],$b[7]=Mc[7],$b[8]=Mc[8],$b[9]=Mc[9],$b[10]=Mc[10],$b[11]=Mc[11],$b[12]=Mc[12],$b[13]=Mc[13],$b[14]=Mc[14],$b[15]=Mc[15],$b));cd=f.hiB;A.uniformMatrix4fv(ba.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(Ya[0]=cd[0],Ya[1]=cd[1],Ya[2]=cd[2],Ya[3]=cd[3],Ya[4]=cd[4],Ya[5]=cd[5],Ya[6]=cd[6],Ya[7]=cd[7],Ya[8]=cd[8],Ya[9]=cd[9],Ya[10]=cd[10],Ya[11]=cd[11],Ya[12]=cd[12],Ya[13]=cd[13],Ya[14]=cd[14],Ya[15]=cd[15],Ya));Tc=f.loC;A.uniformMatrix4fv(X.location,!1,Array.isArray(Tc)||
Tc instanceof Float32Array?Tc:(Bb[0]=Tc[0],Bb[1]=Tc[1],Bb[2]=Tc[2],Bb[3]=Tc[3],Bb[4]=Tc[4],Bb[5]=Tc[5],Bb[6]=Tc[6],Bb[7]=Tc[7],Bb[8]=Tc[8],Bb[9]=Tc[9],Bb[10]=Tc[10],Bb[11]=Tc[11],Bb[12]=Tc[12],Bb[13]=Tc[13],Bb[14]=Tc[14],Bb[15]=Tc[15],Bb));Nc=f.hiC;A.uniformMatrix4fv(Ca.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(ab[0]=Nc[0],ab[1]=Nc[1],ab[2]=Nc[2],ab[3]=Nc[3],ab[4]=Nc[4],ab[5]=Nc[5],ab[6]=Nc[6],ab[7]=Nc[7],ab[8]=Nc[8],ab[9]=Nc[9],ab[10]=Nc[10],ab[11]=Nc[11],ab[12]=Nc[12],ab[13]=
Nc[13],ab[14]=Nc[14],ab[15]=Nc[15],ab));Gb=f.loD;A.uniformMatrix4fv(qb.location,!1,Array.isArray(Gb)||Gb instanceof Float32Array?Gb:(ec[0]=Gb[0],ec[1]=Gb[1],ec[2]=Gb[2],ec[3]=Gb[3],ec[4]=Gb[4],ec[5]=Gb[5],ec[6]=Gb[6],ec[7]=Gb[7],ec[8]=Gb[8],ec[9]=Gb[9],ec[10]=Gb[10],ec[11]=Gb[11],ec[12]=Gb[12],ec[13]=Gb[13],ec[14]=Gb[14],ec[15]=Gb[15],ec));zb=f.hiD;A.uniformMatrix4fv(Ka.location,!1,Array.isArray(zb)||zb instanceof Float32Array?zb:(Ob[0]=zb[0],Ob[1]=zb[1],Ob[2]=zb[2],Ob[3]=zb[3],Ob[4]=zb[4],Ob[5]=
zb[5],Ob[6]=zb[6],Ob[7]=zb[7],Ob[8]=zb[8],Ob[9]=zb[9],Ob[10]=zb[10],Ob[11]=zb[11],Ob[12]=zb[12],Ob[13]=zb[13],Ob[14]=zb[14],Ob[15]=zb[15],Ob));Oc=f.resolution;Hc=Oc[0];hc=Oc[1];e&&Uc===Hc&&Yc===hc||(Uc=Hc,Yc=hc,A.uniform2f(Y.location,Hc,hc));id=f.viewBoxPos;od=id[0];Zc=id[1];e&&qe===od&&Hf===Zc||(qe=od,Hf=Zc,A.uniform2f(ha.location,od,Zc));wd=f.viewBoxSize;je=wd[0];le=wd[1];e&&Xe===je&&Jd===le||(Xe=je,Jd=le,A.uniform2f(ma.location,je,le));Hd=f.maskHeight;e&&kd===Hd||(kd=Hd,A.uniform1f(ga.location,
Hd));Fc=f.drwLayer;e&&pd===Fc||(pd=Fc,A.uniform1f(D.location,Fc));ld=f.contextColor;fd=ld[0];Fd=ld[1];te=ld[2];Ye=ld[3];e&&qd===fd&&yd===Fd&&xe===te&&me===Ye||(qd=fd,yd=Fd,xe=te,me=Ye,A.uniform4f(ia.location,fd,Fd,te,Ye));(ee=f.maskTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);ce=ee._texture;A.uniform1i(ra.location,ce.bind());ye=f.offset;if($d=f.count)ie?A.drawElements(1,$d,ie.type,ye<<(ie.type-5121>>1)):A.drawArrays(1,ye,$d),E.viewportWidth=bd,E.viewportHeight=Sb,ce.unbind()}pa.unbind();
da.dirty=!0;Db.setVAO(null);da.profile=c},draw:function(b){var a,h,f,q,y,ca;a=Ia.next;a!==Ia.cur&&(a?A.bindFramebuffer(36160,a.framebuffer):A.bindFramebuffer(36160,null),Ia.cur=a);if(da.dirty){a=ue[0];ca=ue[1];h=ue[2];f=ue[3];if(a!==zd[0]||ca!==zd[1]||h!==zd[2]||f!==zd[3])A.colorMask(a,ca,h,f),zd[0]=a,zd[1]=ca,zd[2]=h,zd[3]=f;a=pc.frontFace;a!==da.frontFace&&(A.frontFace(a),da.frontFace=a);a=pc.polygonOffset_enable;a!==da.polygonOffset_enable&&(a?A.enable(32823):A.disable(32823),da.polygonOffset_enable=
a);a=Ld[0];ca=Ld[1];if(a!==Ud[0]||ca!==Ud[1])A.polygonOffset(a,ca),Ud[0]=a,Ud[1]=ca;a=pc.sample_alpha;a!==da.sample_alpha&&(a?A.enable(32926):A.disable(32926),da.sample_alpha=a);a=pc.sample_enable;a!==da.sample_enable&&(a?A.enable(32928):A.disable(32928),da.sample_enable=a);a=Zd[0];ca=Zd[1];if(a!==Nd[0]||ca!==Nd[1])A.sampleCoverage(a,ca),Nd[0]=a,Nd[1]=ca;a=pc.stencil_enable;a!==da.stencil_enable&&(a?A.enable(2960):A.disable(2960),da.stencil_enable=a);a=pc.stencil_mask;a!==da.stencil_mask&&(A.stencilMask(a),
da.stencil_mask=a);a=Pe[0];ca=Pe[1];h=Pe[2];if(a!==Ad[0]||ca!==Ad[1]||h!==Ad[2])A.stencilFunc(a,ca,h),Ad[0]=a,Ad[1]=ca,Ad[2]=h;a=Vd[0];ca=Vd[1];h=Vd[2];f=Vd[3];if(a!==be[0]||ca!==be[1]||h!==be[2]||f!==be[3])A.stencilOpSeparate(a,ca,h,f),be[0]=a,be[1]=ca,be[2]=h,be[3]=f;a=Ae[0];ca=Ae[1];h=Ae[2];f=Ae[3];if(a!==pe[0]||ca!==pe[1]||h!==pe[2]||f!==pe[3])A.stencilOpSeparate(a,ca,h,f),pe[0]=a,pe[1]=ca,pe[2]=h,pe[3]=f}md.height=b.viewportHeight;md.width=b.viewportWidth;md.x=b.viewportX;md.y=b.viewportY;h=
md.x|0;f=md.y|0;q="width"in md?md.width|0:E.framebufferWidth-h;y="height"in md?md.height|0:E.framebufferHeight-f;a=E.viewportWidth;E.viewportWidth=q;ca=E.viewportHeight;E.viewportHeight=y;A.viewport(h,f,q,y);rd[0]=h;rd[1]=f;rd[2]=q;rd[3]=y;A.blendColor(0,0,0,0);We[0]=0;We[1]=0;We[2]=0;We[3]=0;A.disable(3042);da.blend_enable=!1;A.blendEquationSeparate(32774,32774);de[0]=32774;de[1]=32774;A.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;A.enable(2884);da.cull_enable=!0;A.cullFace(1029);
da.cull_face=1029;A.enable(2929);da.depth_enable=!0;A.depthFunc(513);da.depth_func=513;A.depthMask(!0);da.depth_mask=!0;A.depthRange(0,1);ve[0]=0;ve[1]=1;A.disable(3024);da.dither=!1;A.lineWidth(2);da.lineWidth=2;xd.height=b.scissorHeight;xd.width=b.scissorWidth;xd.x=b.scissorX;xd.y=b.scissorY;h=xd.x|0;f=xd.y|0;q="width"in xd?xd.width|0:E.framebufferWidth-h;y="height"in xd?xd.height|0:E.framebufferHeight-f;A.scissor(h,f,q,y);bf[0]=h;bf[1]=f;bf[2]=q;bf[3]=y;A.enable(3089);da.scissor_enable=!0;h=da.profile;
da.profile=!1;A.useProgram(c.program);Db.setVAO(null);f=Tb.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==k.dtype||4!==q.size||q.buffer!==k||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,k.buffer),A.vertexAttribPointer(f,4,k.dtype,!1,0,0),q.type=k.dtype,q.size=4,q.buffer=k,q.normalized=!1,q.offset=0,q.stride=0;f=rc.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==l.dtype||4!==q.size||q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,
l.buffer),A.vertexAttribPointer(f,4,l.dtype,!1,0,0),q.type=l.dtype,q.size=4,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;f=mc.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==d.dtype||4!==q.size||q.buffer!==d||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,d.buffer),A.vertexAttribPointer(f,4,d.dtype,!1,0,0),q.type=d.dtype,q.size=4,q.buffer=d,q.normalized=!1,q.offset=0,q.stride=0;f=td.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==p.dtype||
4!==q.size||q.buffer!==p||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,p.buffer),A.vertexAttribPointer(f,4,p.dtype,!1,0,0),q.type=p.dtype,q.size=4,q.buffer=p,q.normalized=!1,q.offset=0,q.stride=0;f=Bc.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==g.dtype||4!==q.size||q.buffer!==g||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,g.buffer),A.vertexAttribPointer(f,4,g.dtype,!1,0,0),q.type=g.dtype,q.size=4,q.buffer=g,q.normalized=!1,q.offset=0,
q.stride=0;f=Z.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==u.dtype||4!==q.size||q.buffer!==u||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,u.buffer),A.vertexAttribPointer(f,4,u.dtype,!1,0,0),q.type=u.dtype,q.size=4,q.buffer=u,q.normalized=!1,q.offset=0,q.stride=0;f=P.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==n.dtype||4!==q.size||q.buffer!==n||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,n.buffer),A.vertexAttribPointer(f,
4,n.dtype,!1,0,0),q.type=n.dtype,q.size=4,q.buffer=n,q.normalized=!1,q.offset=0,q.stride=0;f=ja.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==w.dtype||4!==q.size||q.buffer!==w||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,w.buffer),A.vertexAttribPointer(f,4,w.dtype,!1,0,0),q.type=w.dtype,q.size=4,q.buffer=w,q.normalized=!1,q.offset=0,q.stride=0;f=Fa.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==r.dtype||4!==q.size||q.buffer!==r||!1!==q.normalized||
0!==q.offset||0!==q.stride)A.bindBuffer(34962,r.buffer),A.vertexAttribPointer(f,4,r.dtype,!1,0,0),q.type=r.dtype,q.size=4,q.buffer=r,q.normalized=!1,q.offset=0,q.stride=0;f=Ab.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==x.dtype||4!==q.size||q.buffer!==x||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,x.buffer),A.vertexAttribPointer(f,4,x.dtype,!1,0,0),q.type=x.dtype,q.size=4,q.buffer=x,q.normalized=!1,q.offset=0,q.stride=0;f=$c.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);
if(q.type!==v.dtype||4!==q.size||q.buffer!==v||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,v.buffer),A.vertexAttribPointer(f,4,v.dtype,!1,0,0),q.type=v.dtype,q.size=4,q.buffer=v,q.normalized=!1,q.offset=0,q.stride=0;f=Zb.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==t.dtype||4!==q.size||q.buffer!==t||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,t.buffer),A.vertexAttribPointer(f,4,t.dtype,!1,0,0),q.type=t.dtype,q.size=4,q.buffer=t,q.normalized=
!1,q.offset=0,q.stride=0;f=M.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==m.dtype||4!==q.size||q.buffer!==m||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,m.buffer),A.vertexAttribPointer(f,4,m.dtype,!1,0,0),q.type=m.dtype,q.size=4,q.buffer=m,q.normalized=!1,q.offset=0,q.stride=0;f=G.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==z.dtype||4!==q.size||q.buffer!==z||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,z.buffer),
A.vertexAttribPointer(f,4,z.dtype,!1,0,0),q.type=z.dtype,q.size=4,q.buffer=z,q.normalized=!1,q.offset=0,q.stride=0;f=ka.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==B.dtype||4!==q.size||q.buffer!==B||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,B.buffer),A.vertexAttribPointer(f,4,B.dtype,!1,0,0),q.type=B.dtype,q.size=4,q.buffer=B,q.normalized=!1,q.offset=0,q.stride=0;f=Na.location;q=K[f];q.buffer||A.enableVertexAttribArray(f);if(q.type!==S.dtype||4!==q.size||
q.buffer!==S||!1!==q.normalized||0!==q.offset||0!==q.stride)A.bindBuffer(34962,S.buffer),A.vertexAttribPointer(f,4,S.dtype,!1,0,0),q.type=S.dtype,q.size=4,q.buffer=S,q.normalized=!1,q.offset=0,q.stride=0;f=b.dim0A;A.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(dd[0]=f[0],dd[1]=f[1],dd[2]=f[2],dd[3]=f[3],dd[4]=f[4],dd[5]=f[5],dd[6]=f[6],dd[7]=f[7],dd[8]=f[8],dd[9]=f[9],dd[10]=f[10],dd[11]=f[11],dd[12]=f[12],dd[13]=f[13],dd[14]=f[14],dd[15]=f[15],dd));f=b.dim1A;A.uniformMatrix4fv(R.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(Bd[0]=f[0],Bd[1]=f[1],Bd[2]=f[2],Bd[3]=f[3],Bd[4]=f[4],Bd[5]=f[5],Bd[6]=f[6],Bd[7]=f[7],Bd[8]=f[8],Bd[9]=f[9],Bd[10]=f[10],Bd[11]=f[11],Bd[12]=f[12],Bd[13]=f[13],Bd[14]=f[14],Bd[15]=f[15],Bd));f=b.dim0B;A.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Vc[0]=f[0],Vc[1]=f[1],Vc[2]=f[2],Vc[3]=f[3],Vc[4]=f[4],Vc[5]=f[5],Vc[6]=f[6],Vc[7]=f[7],Vc[8]=f[8],Vc[9]=f[9],Vc[10]=f[10],Vc[11]=f[11],Vc[12]=f[12],Vc[13]=f[13],Vc[14]=
f[14],Vc[15]=f[15],Vc));f=b.dim1B;A.uniformMatrix4fv(Vb.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Dd[0]=f[0],Dd[1]=f[1],Dd[2]=f[2],Dd[3]=f[3],Dd[4]=f[4],Dd[5]=f[5],Dd[6]=f[6],Dd[7]=f[7],Dd[8]=f[8],Dd[9]=f[9],Dd[10]=f[10],Dd[11]=f[11],Dd[12]=f[12],Dd[13]=f[13],Dd[14]=f[14],Dd[15]=f[15],Dd));f=b.dim0C;A.uniformMatrix4fv(W.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Pc[0]=f[0],Pc[1]=f[1],Pc[2]=f[2],Pc[3]=f[3],Pc[4]=f[4],Pc[5]=f[5],Pc[6]=f[6],Pc[7]=f[7],Pc[8]=f[8],Pc[9]=
f[9],Pc[10]=f[10],Pc[11]=f[11],Pc[12]=f[12],Pc[13]=f[13],Pc[14]=f[14],Pc[15]=f[15],Pc));f=b.dim1C;A.uniformMatrix4fv(Xa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Wc[0]=f[0],Wc[1]=f[1],Wc[2]=f[2],Wc[3]=f[3],Wc[4]=f[4],Wc[5]=f[5],Wc[6]=f[6],Wc[7]=f[7],Wc[8]=f[8],Wc[9]=f[9],Wc[10]=f[10],Wc[11]=f[11],Wc[12]=f[12],Wc[13]=f[13],Wc[14]=f[14],Wc[15]=f[15],Wc));f=b.dim0D;A.uniformMatrix4fv(ta.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wc[0]=f[0],wc[1]=f[1],wc[2]=f[2],wc[3]=
f[3],wc[4]=f[4],wc[5]=f[5],wc[6]=f[6],wc[7]=f[7],wc[8]=f[8],wc[9]=f[9],wc[10]=f[10],wc[11]=f[11],wc[12]=f[12],wc[13]=f[13],wc[14]=f[14],wc[15]=f[15],wc));f=b.dim1D;A.uniformMatrix4fv(V.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(eb[0]=f[0],eb[1]=f[1],eb[2]=f[2],eb[3]=f[3],eb[4]=f[4],eb[5]=f[5],eb[6]=f[6],eb[7]=f[7],eb[8]=f[8],eb[9]=f[9],eb[10]=f[10],eb[11]=f[11],eb[12]=f[12],eb[13]=f[13],eb[14]=f[14],eb[15]=f[15],eb));f=b.loA;A.uniformMatrix4fv(Wb.location,!1,Array.isArray(f)||f instanceof
Float32Array?f:(jd[0]=f[0],jd[1]=f[1],jd[2]=f[2],jd[3]=f[3],jd[4]=f[4],jd[5]=f[5],jd[6]=f[6],jd[7]=f[7],jd[8]=f[8],jd[9]=f[9],jd[10]=f[10],jd[11]=f[11],jd[12]=f[12],jd[13]=f[13],jd[14]=f[14],jd[15]=f[15],jd));f=b.hiA;A.uniformMatrix4fv(na.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Eb[0]=f[0],Eb[1]=f[1],Eb[2]=f[2],Eb[3]=f[3],Eb[4]=f[4],Eb[5]=f[5],Eb[6]=f[6],Eb[7]=f[7],Eb[8]=f[8],Eb[9]=f[9],Eb[10]=f[10],Eb[11]=f[11],Eb[12]=f[12],Eb[13]=f[13],Eb[14]=f[14],Eb[15]=f[15],Eb));f=b.loB;A.uniformMatrix4fv($a.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(qc[0]=f[0],qc[1]=f[1],qc[2]=f[2],qc[3]=f[3],qc[4]=f[4],qc[5]=f[5],qc[6]=f[6],qc[7]=f[7],qc[8]=f[8],qc[9]=f[9],qc[10]=f[10],qc[11]=f[11],qc[12]=f[12],qc[13]=f[13],qc[14]=f[14],qc[15]=f[15],qc));f=b.hiB;A.uniformMatrix4fv(ba.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ra[0]=f[0],Ra[1]=f[1],Ra[2]=f[2],Ra[3]=f[3],Ra[4]=f[4],Ra[5]=f[5],Ra[6]=f[6],Ra[7]=f[7],Ra[8]=f[8],Ra[9]=f[9],Ra[10]=f[10],Ra[11]=f[11],Ra[12]=f[12],Ra[13]=f[13],Ra[14]=
f[14],Ra[15]=f[15],Ra));f=b.loC;A.uniformMatrix4fv(X.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ic[0]=f[0],Ic[1]=f[1],Ic[2]=f[2],Ic[3]=f[3],Ic[4]=f[4],Ic[5]=f[5],Ic[6]=f[6],Ic[7]=f[7],Ic[8]=f[8],Ic[9]=f[9],Ic[10]=f[10],Ic[11]=f[11],Ic[12]=f[12],Ic[13]=f[13],Ic[14]=f[14],Ic[15]=f[15],Ic));f=b.hiC;A.uniformMatrix4fv(Ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ic[0]=f[0],ic[1]=f[1],ic[2]=f[2],ic[3]=f[3],ic[4]=f[4],ic[5]=f[5],ic[6]=f[6],ic[7]=f[7],ic[8]=f[8],ic[9]=f[9],
ic[10]=f[10],ic[11]=f[11],ic[12]=f[12],ic[13]=f[13],ic[14]=f[14],ic[15]=f[15],ic));f=b.loD;A.uniformMatrix4fv(qb.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(sc[0]=f[0],sc[1]=f[1],sc[2]=f[2],sc[3]=f[3],sc[4]=f[4],sc[5]=f[5],sc[6]=f[6],sc[7]=f[7],sc[8]=f[8],sc[9]=f[9],sc[10]=f[10],sc[11]=f[11],sc[12]=f[12],sc[13]=f[13],sc[14]=f[14],sc[15]=f[15],sc));f=b.hiD;A.uniformMatrix4fv(Ka.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gd[0]=f[0],Gd[1]=f[1],Gd[2]=f[2],Gd[3]=f[3],Gd[4]=
f[4],Gd[5]=f[5],Gd[6]=f[6],Gd[7]=f[7],Gd[8]=f[8],Gd[9]=f[9],Gd[10]=f[10],Gd[11]=f[11],Gd[12]=f[12],Gd[13]=f[13],Gd[14]=f[14],Gd[15]=f[15],Gd));f=b.resolution;A.uniform2f(Y.location,f[0],f[1]);f=b.viewBoxPos;A.uniform2f(ha.location,f[0],f[1]);f=b.viewBoxSize;A.uniform2f(ma.location,f[0],f[1]);A.uniform1f(ga.location,b.maskHeight);A.uniform1f(D.location,b.drwLayer);f=b.contextColor;A.uniform4f(ia.location,f[0],f[1],f[2],f[3]);(f=b.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;
A.uniform1i(ra.location,f.bind());A.uniform1i(va.location,J.bind());(q=ua.elements)?A.bindBuffer(34963,q.buffer.buffer):Db.currentVAO&&(q=sa.getElements(Db.currentVAO.elements))&&A.bindBuffer(34963,q.buffer.buffer);y=b.offset;if(b=b.count)q?A.drawElements(1,b,q.type,y<<(q.type-5121>>1)):A.drawArrays(1,y,b),da.dirty=!0,Db.setVAO(null),E.viewportWidth=a,E.viewportHeight=ca,da.profile=h,f.unbind(),J.unbind()},scope:function(b,a,c){var e,A,D,G,P,K,M,Z,O,J,Q,R,W,V,X,Y,ha,ja,ka,ba,ga,na,sa,va,Da,rc,eb,
Ia,ma,Ra,ia,xa,Fa,pa,bc,Nd,Eb,ya,Pc,Ea,Db,kc,Hb,Vd,ic,Qc,Wc,dc,ta,Ya,Ga,Rc,Pa,Ba,wc,sc,ad,td,ra,$b,ab,Na,Vc,qc,Ad,pe,dd,Ic,jd,Ha,Jc,kb,Bb,Ab,rd,Bd,be,$c,Ob,Dd,Bc,ud,ec,zd,Ca,Gb,zb,nd,We,de,Ld,bf,Ae,Gd,Tb,Pe,Xa,mc,Zd,ue,Ka,qb,Ud,we,Fc,ve,Vb,$a,Zb,Wb,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,hf,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,
dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;md.height=b.viewportHeight;md.width=b.viewportWidth;md.x=b.viewportX;md.y=b.viewportY;e=md.x|0;A=md.y|0;D="width"in md?md.width|0:E.framebufferWidth-e;G="height"in md?md.height|0:E.framebufferHeight-A;P=E.viewportWidth;E.viewportWidth=
D;K=E.viewportHeight;E.viewportHeight=G;M=Xd[0];Xd[0]=e;Z=Xd[1];Xd[1]=A;O=Xd[2];Xd[2]=D;J=Xd[3];Xd[3]=G;Q=ub[0];ub[0]=0;R=ub[1];ub[1]=0;W=ub[2];ub[2]=0;V=ub[3];ub[3]=0;X=pc.blend_enable;pc.blend_enable=!1;Y=oe[0];oe[0]=32774;ha=oe[1];oe[1]=32774;ja=ie[0];ie[0]=770;ka=ie[1];ie[1]=771;ba=ie[2];ie[2]=1;ga=ie[3];ie[3]=1;na=pc.cull_enable;pc.cull_enable=!0;sa=pc.cull_face;pc.cull_face=1029;va=pc.depth_enable;pc.depth_enable=!0;Da=pc.depth_func;pc.depth_func=513;rc=pc.depth_mask;pc.depth_mask=!0;eb=he[0];
he[0]=0;Ia=he[1];he[1]=1;ma=pc.dither;pc.dither=!1;Ra=pc.lineWidth;pc.lineWidth=2;xd.height=b.scissorHeight;xd.width=b.scissorWidth;xd.x=b.scissorX;xd.y=b.scissorY;ia=xd.x|0;xa=xd.y|0;Fa="width"in xd?xd.width|0:E.framebufferWidth-ia;pa="height"in xd?xd.height|0:E.framebufferHeight-xa;bc=Ge[0];Ge[0]=ia;Nd=Ge[1];Ge[1]=xa;Eb=Ge[2];Ge[2]=Fa;ya=Ge[3];Ge[3]=pa;Pc=pc.scissor_enable;pc.scissor_enable=!0;Ea=da.profile;da.profile=!1;Db=b.offset;kc=ua.offset;ua.offset=Db;Hb=b.count;Vd=ua.count;ua.count=Hb;ic=
ua.primitive;ua.primitive=1;Qc=b.contextColor;Wc=oa[24];oa[24]=Qc;dc=b.dim0A;ta=oa[3];oa[3]=dc;Ya=b.dim0B;Ga=oa[5];oa[5]=Ya;Rc=b.dim0C;Pa=oa[7];oa[7]=Rc;Ba=b.dim0D;wc=oa[9];oa[9]=Ba;sc=b.dim1A;ad=oa[4];oa[4]=sc;td=b.dim1B;ra=oa[6];oa[6]=td;$b=b.dim1C;ab=oa[8];oa[8]=$b;Na=b.dim1D;Vc=oa[10];oa[10]=Na;qc=b.drwLayer;Ad=oa[23];oa[23]=qc;pe=b.hiA;dd=oa[12];oa[12]=pe;Ic=b.hiB;jd=oa[14];oa[14]=Ic;Ha=b.hiC;Jc=oa[16];oa[16]=Ha;kb=b.hiD;Bb=oa[18];oa[18]=kb;Ab=b.loA;rd=oa[11];oa[11]=Ab;Bd=b.loB;be=oa[13];oa[13]=
Bd;$c=b.loC;Ob=oa[15];oa[15]=$c;Dd=b.loD;Bc=oa[17];oa[17]=Dd;ud=b.maskHeight;ec=oa[22];oa[22]=ud;zd=b.maskTexture;Ca=oa[25];oa[25]=zd;Gb=oa[26];oa[26]=fa;zb=b.resolution;nd=oa[19];oa[19]=zb;We=b.viewBoxPos;de=oa[20];oa[20]=We;Ld=b.viewBoxSize;bf=oa[21];oa[21]=Ld;Ae=H.buffer;H.buffer=S;Gd=H.divisor;H.divisor=0;Tb=H.normalized;H.normalized=!1;Pe=H.offset;H.offset=0;Xa=H.size;H.size=0;mc=H.state;H.state=1;Zd=H.stride;H.stride=0;ue=H.type;H.type=S.dtype;Ka=H.w;H.w=0;qb=H.x;H.x=0;Ud=H.y;H.y=0;we=H.z;H.z=
0;Fc=C.buffer;C.buffer=k;ve=C.divisor;C.divisor=0;Vb=C.normalized;C.normalized=!1;$a=C.offset;C.offset=0;Zb=C.size;C.size=0;Wb=C.state;C.state=1;yd=C.stride;C.stride=0;te=C.type;C.type=k.dtype;xe=C.w;C.w=0;Ye=C.x;C.x=0;me=C.y;C.y=0;ee=C.z;C.z=0;ce=I.buffer;I.buffer=l;ye=I.divisor;I.divisor=0;$d=I.normalized;I.normalized=!1;fe=I.offset;I.offset=0;yc=I.size;I.size=0;Xc=I.state;I.state=1;re=I.stride;I.stride=0;ke=I.type;I.type=l.dtype;Id=I.w;I.w=0;Md=I.x;I.x=0;Pd=I.y;I.y=0;Qd=I.z;I.z=0;ge=aa.buffer;
aa.buffer=d;ze=aa.divisor;aa.divisor=0;Be=aa.normalized;aa.normalized=!1;ne=aa.offset;aa.offset=0;af=aa.size;aa.size=0;Qe=aa.state;aa.state=1;Me=aa.stride;aa.stride=0;se=aa.type;aa.type=d.dtype;Ee=aa.w;aa.w=0;He=aa.x;aa.x=0;Ie=aa.y;aa.y=0;Je=aa.z;aa.z=0;Fe=L.buffer;L.buffer=p;Kd=L.divisor;L.divisor=0;Td=L.normalized;L.normalized=!1;Yd=L.offset;L.offset=0;ae=L.size;L.size=0;Ke=L.state;L.state=1;Cd=L.stride;L.stride=0;Rd=L.type;L.type=p.dtype;Ce=L.w;L.w=0;Le=L.x;L.x=0;hf=L.y;L.y=0;$e=L.z;L.z=0;Re=U.buffer;
U.buffer=g;Ne=U.divisor;U.divisor=0;Ze=U.normalized;U.normalized=!1;Ve=U.offset;U.offset=0;Se=U.size;U.size=0;Te=U.state;U.state=1;Sd=U.stride;U.stride=0;Wd=U.type;U.type=g.dtype;Ue=U.w;U.w=0;jf=U.x;U.x=0;nf=U.y;U.y=0;ef=U.z;U.z=0;kf=F.buffer;F.buffer=u;lf=F.divisor;F.divisor=0;mf=F.normalized;F.normalized=!1;rf=F.offset;F.offset=0;of=F.size;F.size=0;sf=F.state;F.state=1;Bf=F.stride;F.stride=0;Cf=F.type;F.type=u.dtype;Oe=F.w;F.w=0;De=F.x;F.x=0;pf=F.y;F.y=0;qf=F.z;F.z=0;Df=la.buffer;la.buffer=n;Gf=
la.divisor;la.divisor=0;Af=la.normalized;la.normalized=!1;Ef=la.offset;la.offset=0;Ff=la.size;la.size=0;wf=la.state;la.state=1;xf=la.stride;la.stride=0;vf=la.type;la.type=n.dtype;yf=la.w;la.w=0;zf=la.x;la.x=0;Jf=la.y;la.y=0;Kf=la.z;la.z=0;Lf=N.buffer;N.buffer=w;Mf=N.divisor;N.divisor=0;tf=N.normalized;N.normalized=!1;Rf=N.offset;N.offset=0;If=N.size;N.size=0;uf=N.state;N.state=1;dg=N.stride;N.stride=0;Sf=N.type;N.type=w.dtype;Tf=N.w;N.w=0;qg=N.x;N.x=0;ff=N.y;N.y=0;cf=N.z;N.z=0;Nf=ea.buffer;ea.buffer=
r;Of=ea.divisor;ea.divisor=0;eg=ea.normalized;ea.normalized=!1;fg=ea.offset;ea.offset=0;gg=ea.size;ea.size=0;hg=ea.state;ea.state=1;ig=ea.stride;ea.stride=0;Wf=ea.type;ea.type=r.dtype;Uf=ea.w;ea.w=0;Xf=ea.x;ea.x=0;Yf=ea.y;ea.y=0;Zf=ea.z;ea.z=0;jg=y.buffer;y.buffer=x;rg=y.divisor;y.divisor=0;sg=y.normalized;y.normalized=!1;tg=y.offset;y.offset=0;ug=y.size;y.size=0;vg=y.state;y.state=1;wg=y.stride;y.stride=0;xg=y.type;y.type=x.dtype;yg=y.w;y.w=0;zg=y.x;y.x=0;Ag=y.y;y.y=0;Bg=y.z;y.z=0;gf=h.buffer;h.buffer=
v;df=h.divisor;h.divisor=0;Pf=h.normalized;h.normalized=!1;Qf=h.offset;h.offset=0;kg=h.size;h.size=0;lg=h.state;h.state=1;mg=h.stride;h.stride=0;ng=h.type;h.type=v.dtype;og=h.w;h.w=0;$f=h.x;h.x=0;Vf=h.y;h.y=0;ag=h.z;h.z=0;bg=f.buffer;f.buffer=t;cg=f.divisor;f.divisor=0;pg=f.normalized;f.normalized=!1;Cg=f.offset;f.offset=0;Dg=f.size;f.size=0;Eg=f.state;f.state=1;Fg=f.stride;f.stride=0;Gg=f.type;f.type=t.dtype;Hg=f.w;f.w=0;Ig=f.x;f.x=0;Jg=f.y;f.y=0;Kg=f.z;f.z=0;Lg=q.buffer;q.buffer=m;Mg=q.divisor;
q.divisor=0;Ng=q.normalized;q.normalized=!1;Og=q.offset;q.offset=0;Pg=q.size;q.size=0;Qg=q.state;q.state=1;Rg=q.stride;q.stride=0;Sg=q.type;q.type=m.dtype;Tg=q.w;q.w=0;Ug=q.x;q.x=0;Vg=q.y;q.y=0;Wg=q.z;q.z=0;Xg=ca.buffer;ca.buffer=z;Yg=ca.divisor;ca.divisor=0;Zg=ca.normalized;ca.normalized=!1;$g=ca.offset;ca.offset=0;ah=ca.size;ca.size=0;bh=ca.state;ca.state=1;ch=ca.stride;ca.stride=0;dh=ca.type;ca.type=z.dtype;eh=ca.w;ca.w=0;fh=ca.x;ca.x=0;gh=ca.y;ca.y=0;hh=ca.z;ca.z=0;ih=Wa.buffer;Wa.buffer=B;jh=
Wa.divisor;Wa.divisor=0;kh=Wa.normalized;Wa.normalized=!1;lh=Wa.offset;Wa.offset=0;mh=Wa.size;Wa.size=0;nh=Wa.state;Wa.state=1;oh=Wa.stride;Wa.stride=0;ph=Wa.type;Wa.type=B.dtype;qh=Wa.w;Wa.w=0;rh=Wa.x;Wa.x=0;sh=Wa.y;Wa.y=0;th=Wa.z;Wa.z=0;uh=Cb.vert;Cb.vert=2;vh=Cb.frag;Cb.frag=1;da.dirty=!0;a(E,b,c);E.viewportWidth=P;E.viewportHeight=K;Xd[0]=M;Xd[1]=Z;Xd[2]=O;Xd[3]=J;ub[0]=Q;ub[1]=R;ub[2]=W;ub[3]=V;pc.blend_enable=X;oe[0]=Y;oe[1]=ha;ie[0]=ja;ie[1]=ka;ie[2]=ba;ie[3]=ga;pc.cull_enable=na;pc.cull_face=
sa;pc.depth_enable=va;pc.depth_func=Da;pc.depth_mask=rc;he[0]=eb;he[1]=Ia;pc.dither=ma;pc.lineWidth=Ra;Ge[0]=bc;Ge[1]=Nd;Ge[2]=Eb;Ge[3]=ya;pc.scissor_enable=Pc;da.profile=Ea;ua.offset=kc;ua.count=Vd;ua.primitive=ic;oa[24]=Wc;oa[3]=ta;oa[5]=Ga;oa[7]=Pa;oa[9]=wc;oa[4]=ad;oa[6]=ra;oa[8]=ab;oa[10]=Vc;oa[23]=Ad;oa[12]=dd;oa[14]=jd;oa[16]=Jc;oa[18]=Bb;oa[11]=rd;oa[13]=be;oa[15]=Ob;oa[17]=Bc;oa[22]=ec;oa[25]=Ca;oa[26]=Gb;oa[19]=nd;oa[20]=de;oa[21]=bf;H.buffer=Ae;H.divisor=Gd;H.normalized=Tb;H.offset=Pe;
H.size=Xa;H.state=mc;H.stride=Zd;H.type=ue;H.w=Ka;H.x=qb;H.y=Ud;H.z=we;C.buffer=Fc;C.divisor=ve;C.normalized=Vb;C.offset=$a;C.size=Zb;C.state=Wb;C.stride=yd;C.type=te;C.w=xe;C.x=Ye;C.y=me;C.z=ee;I.buffer=ce;I.divisor=ye;I.normalized=$d;I.offset=fe;I.size=yc;I.state=Xc;I.stride=re;I.type=ke;I.w=Id;I.x=Md;I.y=Pd;I.z=Qd;aa.buffer=ge;aa.divisor=ze;aa.normalized=Be;aa.offset=ne;aa.size=af;aa.state=Qe;aa.stride=Me;aa.type=se;aa.w=Ee;aa.x=He;aa.y=Ie;aa.z=Je;L.buffer=Fe;L.divisor=Kd;L.normalized=Td;L.offset=
Yd;L.size=ae;L.state=Ke;L.stride=Cd;L.type=Rd;L.w=Ce;L.x=Le;L.y=hf;L.z=$e;U.buffer=Re;U.divisor=Ne;U.normalized=Ze;U.offset=Ve;U.size=Se;U.state=Te;U.stride=Sd;U.type=Wd;U.w=Ue;U.x=jf;U.y=nf;U.z=ef;F.buffer=kf;F.divisor=lf;F.normalized=mf;F.offset=rf;F.size=of;F.state=sf;F.stride=Bf;F.type=Cf;F.w=Oe;F.x=De;F.y=pf;F.z=qf;la.buffer=Df;la.divisor=Gf;la.normalized=Af;la.offset=Ef;la.size=Ff;la.state=wf;la.stride=xf;la.type=vf;la.w=yf;la.x=zf;la.y=Jf;la.z=Kf;N.buffer=Lf;N.divisor=Mf;N.normalized=tf;N.offset=
Rf;N.size=If;N.state=uf;N.stride=dg;N.type=Sf;N.w=Tf;N.x=qg;N.y=ff;N.z=cf;ea.buffer=Nf;ea.divisor=Of;ea.normalized=eg;ea.offset=fg;ea.size=gg;ea.state=hg;ea.stride=ig;ea.type=Wf;ea.w=Uf;ea.x=Xf;ea.y=Yf;ea.z=Zf;y.buffer=jg;y.divisor=rg;y.normalized=sg;y.offset=tg;y.size=ug;y.state=vg;y.stride=wg;y.type=xg;y.w=yg;y.x=zg;y.y=Ag;y.z=Bg;h.buffer=gf;h.divisor=df;h.normalized=Pf;h.offset=Qf;h.size=kg;h.state=lg;h.stride=mg;h.type=ng;h.w=og;h.x=$f;h.y=Vf;h.z=ag;f.buffer=bg;f.divisor=cg;f.normalized=pg;f.offset=
Cg;f.size=Dg;f.state=Eg;f.stride=Fg;f.type=Gg;f.w=Hg;f.x=Ig;f.y=Jg;f.z=Kg;q.buffer=Lg;q.divisor=Mg;q.normalized=Ng;q.offset=Og;q.size=Pg;q.state=Qg;q.stride=Rg;q.type=Sg;q.w=Tg;q.x=Ug;q.y=Vg;q.z=Wg;ca.buffer=Xg;ca.divisor=Yg;ca.normalized=Zg;ca.offset=$g;ca.size=ah;ca.state=bh;ca.stride=ch;ca.type=dh;ca.w=eh;ca.x=fh;ca.y=gh;ca.z=hh;Wa.buffer=ih;Wa.divisor=jh;Wa.normalized=kh;Wa.offset=lh;Wa.size=mh;Wa.state=nh;Wa.stride=oh;Wa.type=ph;Wa.w=qh;Wa.x=rh;Wa.y=sh;Wa.z=th;Cb.vert=uh;Cb.frag=vh;da.dirty=
!0}}},$1:function(a,b){var c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y;c=a.attributes;k=a.current;l=a.framebuffer;d=a.gl;p=a.next;g=a.vao;u=p.blend_color;n=k.blend_color;w=p.blend_equation;r=k.blend_equation;x=p.blend_func;v=k.blend_func;t=p.colorMask;m=k.colorMask;z=p.depth_range;B=k.depth_range;S=p.polygonOffset_offset;J=k.polygonOffset_offset;fa=p.sample_coverage;H=k.sample_coverage;C=p.scissor_box;I=k.scissor_box;aa=p.stencil_func;L=k.stencil_func;U=p.stencil_opBack;F=k.stencil_opBack;
la=p.stencil_opFront;N=k.stencil_opFront;ea=p.viewport;y=k.viewport;return{poll:function(){var b,a,c,e,g,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka;k.dirty=!1;a=p.blend_enable;c=p.cull_enable;e=p.depth_enable;g=p.dither;kc=p.polygonOffset_enable;pa=p.sample_alpha;Na=p.sample_enable;ia=p.scissor_enable;Q=p.stencil_enable;O=p.cull_face;W=k.cull_face;ta=p.depth_func;R=k.depth_func;Vb=p.depth_mask;Xa=k.depth_mask;V=p.frontFace;D=k.frontFace;na=p.lineWidth;ba=k.lineWidth;Ca=p.stencil_mask;Ka=k.stencil_mask;
b=l.next;b!==l.cur&&(b?d.bindFramebuffer(36160,b.framebuffer):d.bindFramebuffer(36160,null),l.cur=b);a!==k.blend_enable&&(a?d.enable(3042):d.disable(3042),k.blend_enable=a);c!==k.cull_enable&&(c?d.enable(2884):d.disable(2884),k.cull_enable=c);e!==k.depth_enable&&(e?d.enable(2929):d.disable(2929),k.depth_enable=e);g!==k.dither&&(g?d.enable(3024):d.disable(3024),k.dither=g);kc!==k.polygonOffset_enable&&(kc?d.enable(32823):d.disable(32823),k.polygonOffset_enable=kc);pa!==k.sample_alpha&&(pa?d.enable(32926):
d.disable(32926),k.sample_alpha=pa);Na!==k.sample_enable&&(Na?d.enable(32928):d.disable(32928),k.sample_enable=Na);ia!==k.scissor_enable&&(ia?d.enable(3089):d.disable(3089),k.scissor_enable=ia);Q!==k.stencil_enable&&(Q?d.enable(2960):d.disable(2960),k.stencil_enable=Q);if(u[0]!==n[0]||u[1]!==n[1]||u[2]!==n[2]||u[3]!==n[3])d.blendColor(u[0],u[1],u[2],u[3]),n[0]=u[0],n[1]=u[1],n[2]=u[2],n[3]=u[3];if(w[0]!==r[0]||w[1]!==r[1])d.blendEquationSeparate(w[0],w[1]),r[0]=w[0],r[1]=w[1];if(x[0]!==v[0]||x[1]!==
v[1]||x[2]!==v[2]||x[3]!==v[3])d.blendFuncSeparate(x[0],x[1],x[2],x[3]),v[0]=x[0],v[1]=x[1],v[2]=x[2],v[3]=x[3];if(t[0]!==m[0]||t[1]!==m[1]||t[2]!==m[2]||t[3]!==m[3])d.colorMask(t[0],t[1],t[2],t[3]),m[0]=t[0],m[1]=t[1],m[2]=t[2],m[3]=t[3];O!==W&&(d.cullFace(O),k.cull_face=O);ta!==R&&(d.depthFunc(ta),k.depth_func=ta);Vb!==Xa&&(d.depthMask(Vb),k.depth_mask=Vb);if(z[0]!==B[0]||z[1]!==B[1])d.depthRange(z[0],z[1]),B[0]=z[0],B[1]=z[1];V!==D&&(d.frontFace(V),k.frontFace=V);na!==ba&&(d.lineWidth(na),k.lineWidth=
na);if(S[0]!==J[0]||S[1]!==J[1])d.polygonOffset(S[0],S[1]),J[0]=S[0],J[1]=S[1];if(fa[0]!==H[0]||fa[1]!==H[1])d.sampleCoverage(fa[0],fa[1]),H[0]=fa[0],H[1]=fa[1];if(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3])d.scissor(C[0],C[1],C[2],C[3]),I[0]=C[0],I[1]=C[1],I[2]=C[2],I[3]=C[3];if(aa[0]!==L[0]||aa[1]!==L[1]||aa[2]!==L[2])d.stencilFunc(aa[0],aa[1],aa[2]),L[0]=aa[0],L[1]=aa[1],L[2]=aa[2];Ca!==Ka&&(d.stencilMask(Ca),k.stencil_mask=Ca);if(U[0]!==F[0]||U[1]!==F[1]||U[2]!==F[2]||U[3]!==F[3])d.stencilOpSeparate(U[0],
U[1],U[2],U[3]),F[0]=U[0],F[1]=U[1],F[2]=U[2],F[3]=U[3];if(la[0]!==N[0]||la[1]!==N[1]||la[2]!==N[2]||la[3]!==N[3])d.stencilOpSeparate(la[0],la[1],la[2],la[3]),N[0]=la[0],N[1]=la[1],N[2]=la[2],N[3]=la[3];if(ea[0]!==y[0]||ea[1]!==y[1]||ea[2]!==y[2]||ea[3]!==y[3])d.viewport(ea[0],ea[1],ea[2],ea[3]),y[0]=ea[0],y[1]=ea[1],y[2]=ea[2],y[3]=ea[3]},refresh:function(){var a,f,q,ca,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa;k.dirty=!1;f=p.blend_enable;q=p.cull_enable;ca=p.depth_enable;Wa=p.dither;kc=p.polygonOffset_enable;
pa=p.sample_alpha;Na=p.sample_enable;ia=p.scissor_enable;Q=p.stencil_enable;O=p.cull_face;W=p.depth_func;ta=p.depth_mask;R=p.frontFace;Vb=p.lineWidth;Xa=p.stencil_mask;(a=l.next)?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null);l.cur=a;a=c[0];a.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(0,
a.divisor);a=c[1];a.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(1,a.divisor);a=c[2];a.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,a.x,a.y,a.z,
a.w),a.buffer=null);b.vertexAttribDivisorANGLE(2,a.divisor);a=c[3];a.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(3,a.divisor);a=c[4];a.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(4),
d.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(4,a.divisor);a=c[5];a.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(5,a.divisor);a=c[6];a.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,
a.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(6,a.divisor);a=c[7];a.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(7,a.divisor);a=c[8];a.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(8,
a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(8,a.divisor);a=c[9];a.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(9,a.divisor);a=c[10];a.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,
a.buffer.buffer),d.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(10,a.divisor);a=c[11];a.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(11,a.divisor);a=c[12];
a.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(12,a.divisor);a=c[13];a.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=
null);b.vertexAttribDivisorANGLE(13,a.divisor);a=c[14];a.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(14,a.divisor);a=c[15];a.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(15),
d.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(15,a.divisor);g.currentVAO=null;g.setVAO(g.targetVAO);f?d.enable(3042):d.disable(3042);k.blend_enable=f;q?d.enable(2884):d.disable(2884);k.cull_enable=q;ca?d.enable(2929):d.disable(2929);k.depth_enable=ca;Wa?d.enable(3024):d.disable(3024);k.dither=Wa;kc?d.enable(32823):d.disable(32823);k.polygonOffset_enable=kc;pa?d.enable(32926):d.disable(32926);k.sample_alpha=pa;Na?d.enable(32928):d.disable(32928);k.sample_enable=Na;
ia?d.enable(3089):d.disable(3089);k.scissor_enable=ia;Q?d.enable(2960):d.disable(2960);k.stencil_enable=Q;d.blendColor(u[0],u[1],u[2],u[3]);n[0]=u[0];n[1]=u[1];n[2]=u[2];n[3]=u[3];d.blendEquationSeparate(w[0],w[1]);r[0]=w[0];r[1]=w[1];d.blendFuncSeparate(x[0],x[1],x[2],x[3]);v[0]=x[0];v[1]=x[1];v[2]=x[2];v[3]=x[3];d.colorMask(t[0],t[1],t[2],t[3]);m[0]=t[0];m[1]=t[1];m[2]=t[2];m[3]=t[3];d.cullFace(O);k.cull_face=O;d.depthFunc(W);k.depth_func=W;d.depthMask(ta);k.depth_mask=ta;d.depthRange(z[0],z[1]);
B[0]=z[0];B[1]=z[1];d.frontFace(R);k.frontFace=R;d.lineWidth(Vb);k.lineWidth=Vb;d.polygonOffset(S[0],S[1]);J[0]=S[0];J[1]=S[1];d.sampleCoverage(fa[0],fa[1]);H[0]=fa[0];H[1]=fa[1];d.scissor(C[0],C[1],C[2],C[3]);I[0]=C[0];I[1]=C[1];I[2]=C[2];I[3]=C[3];d.stencilFunc(aa[0],aa[1],aa[2]);L[0]=aa[0];L[1]=aa[1];L[2]=aa[2];d.stencilMask(Xa);k.stencil_mask=Xa;d.stencilOpSeparate(U[0],U[1],U[2],U[3]);F[0]=U[0];F[1]=U[1];F[2]=U[2];F[3]=U[3];d.stencilOpSeparate(la[0],la[1],la[2],la[3]);N[0]=la[0];N[1]=la[1];N[2]=
la[2];N[3]=la[3];d.viewport(ea[0],ea[1],ea[2],ea[3]);y[0]=ea[0];y[1]=ea[1];y[2]=ea[2];y[3]=ea[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa){var V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra,Tb,rc,mc,td,Bc,Z,P,ja,Fa,Ab,$c,Zb,M,G,ka,va,Y,ha,ma,K,E,da,ua,sa,Ia,A,pc,Cb,oa,Db,ub;V=a.attributes;
D=a.buffer;na=a.context;ba=a.current;Ca=a.draw;Ka=a.elements;Wb=a.extensions;$a=a.framebuffer;X=a.gl;qb=a.isBufferArgs;ga=a.next;ra=a.shader;Tb=a.uniforms;rc=a.vao;mc=ga.blend_color;td=ba.blend_color;Bc=ga.blend_equation;Z=ba.blend_equation;P=ga.blend_func;ja=ba.blend_func;Fa=ga.colorMask;Ab=ba.colorMask;$c=ga.depth_range;Zb=ba.depth_range;M=ga.polygonOffset_offset;G=ba.polygonOffset_offset;ka=ga.sample_coverage;va=ba.sample_coverage;Y=ga.scissor_box;ha=ba.scissor_box;ma=ga.stencil_func;K=ba.stencil_func;
E=ga.stencil_opBack;da=ba.stencil_opBack;ua=ga.stencil_opFront;sa=ba.stencil_opFront;Ia=ga.viewport;A=ba.viewport;pc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Cb={};Cb.buffer=c;Cb.divisor=1;oa={};oa.buffer=k;oa.divisor=1;Db={};Db.buffer=l;Db.divisor=1;ub={};ub.buffer=d;ub.divisor=1;return{batch:function(a,d){var c,e,g,k,l,p;c=$a.next;c!==$a.cur&&(c?X.bindFramebuffer(36160,c.framebuffer):X.bindFramebuffer(36160,null),$a.cur=c);if(ba.dirty){var u,
w,t,n,m,T,L,C,z,H,B,I,P,S,qa,J,U,aa,fa,Y,Ia,Pc,Wc,wc,eb,ra,Eb,qc,Ra,Ic,ic,sc,Bc;u=ga.dither;u!==ba.dither&&(u?X.enable(3024):X.disable(3024),ba.dither=u);w=ga.depth_func;w!==ba.depth_func&&(X.depthFunc(w),ba.depth_func=w);t=$c[0];n=$c[1];if(t!==Zb[0]||n!==Zb[1])X.depthRange(t,n),Zb[0]=t,Zb[1]=n;m=ga.depth_mask;m!==ba.depth_mask&&(X.depthMask(m),ba.depth_mask=m);T=Fa[0];L=Fa[1];C=Fa[2];z=Fa[3];if(T!==Ab[0]||L!==Ab[1]||C!==Ab[2]||z!==Ab[3])X.colorMask(T,L,C,z),Ab[0]=T,Ab[1]=L,Ab[2]=C,Ab[3]=z;H=ga.cull_enable;
H!==ba.cull_enable&&(H?X.enable(2884):X.disable(2884),ba.cull_enable=H);B=ga.cull_face;B!==ba.cull_face&&(X.cullFace(B),ba.cull_face=B);I=ga.frontFace;I!==ba.frontFace&&(X.frontFace(I),ba.frontFace=I);P=ga.lineWidth;P!==ba.lineWidth&&(X.lineWidth(P),ba.lineWidth=P);S=ga.polygonOffset_enable;S!==ba.polygonOffset_enable&&(S?X.enable(32823):X.disable(32823),ba.polygonOffset_enable=S);qa=M[0];J=M[1];if(qa!==G[0]||J!==G[1])X.polygonOffset(qa,J),G[0]=qa,G[1]=J;U=ga.sample_alpha;U!==ba.sample_alpha&&(U?
X.enable(32926):X.disable(32926),ba.sample_alpha=U);aa=ga.sample_enable;aa!==ba.sample_enable&&(aa?X.enable(32928):X.disable(32928),ba.sample_enable=aa);fa=ka[0];Y=ka[1];if(fa!==va[0]||Y!==va[1])X.sampleCoverage(fa,Y),va[0]=fa,va[1]=Y;Ia=ga.stencil_enable;Ia!==ba.stencil_enable&&(Ia?X.enable(2960):X.disable(2960),ba.stencil_enable=Ia);Pc=ga.stencil_mask;Pc!==ba.stencil_mask&&(X.stencilMask(Pc),ba.stencil_mask=Pc);Wc=ma[0];wc=ma[1];eb=ma[2];if(Wc!==K[0]||wc!==K[1]||eb!==K[2])X.stencilFunc(Wc,wc,eb),
K[0]=Wc,K[1]=wc,K[2]=eb;ra=ua[0];Eb=ua[1];qc=ua[2];Ra=ua[3];if(ra!==sa[0]||Eb!==sa[1]||qc!==sa[2]||Ra!==sa[3])X.stencilOpSeparate(ra,Eb,qc,Ra),sa[0]=ra,sa[1]=Eb,sa[2]=qc,sa[3]=Ra;Ic=E[0];ic=E[1];sc=E[2];Bc=E[3];if(Ic!==da[0]||ic!==da[1]||sc!==da[2]||Bc!==da[3])X.stencilOpSeparate(Ic,ic,sc,Bc),da[0]=Ic,da[1]=ic,da[2]=sc,da[3]=Bc}X.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;X.enable(3042);ba.blend_enable=!0;X.blendEquationSeparate(32774,32774);Z[0]=32774;Z[1]=32774;X.blendFuncSeparate(770,
771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;X.disable(2929);ba.depth_enable=!1;X.enable(3089);ba.scissor_enable=!0;if(e=ba.profile)g=performance.now(),b.count+=d;X.useProgram(F.program);k=Wb.angle_instanced_arrays;var nd,Jc,dc,Qc,ad,bc,Rc,Hb;rc.setVAO(null);nd=Wa.location;Jc=V[nd];Jc.buffer||X.enableVertexAttribArray(nd);if(5126!==Jc.type||2!==Jc.size||Jc.buffer!==r||!1!==Jc.normalized||0!==Jc.offset||24!==Jc.stride)X.bindBuffer(34962,r.buffer),X.vertexAttribPointer(nd,2,5126,!1,24,0),Jc.type=
5126,Jc.size=2,Jc.buffer=r,Jc.normalized=!1,Jc.offset=0,Jc.stride=24;0!==Jc.divisor&&(k.vertexAttribDivisorANGLE(nd,0),Jc.divisor=0);dc=pa.location;Qc=V[dc];Qc.buffer||X.enableVertexAttribArray(dc);if(5126!==Qc.type||2!==Qc.size||Qc.buffer!==x||!1!==Qc.normalized||8!==Qc.offset||24!==Qc.stride)X.bindBuffer(34962,x.buffer),X.vertexAttribPointer(dc,2,5126,!1,24,8),Qc.type=5126,Qc.size=2,Qc.buffer=x,Qc.normalized=!1,Qc.offset=8,Qc.stride=24;0!==Qc.divisor&&(k.vertexAttribDivisorANGLE(dc,0),Qc.divisor=
0);ad=f.location;bc=V[ad];bc.buffer||X.enableVertexAttribArray(ad);if(5126!==bc.type||2!==bc.size||bc.buffer!==v||!1!==bc.normalized||16!==bc.offset||24!==bc.stride)X.bindBuffer(34962,v.buffer),X.vertexAttribPointer(ad,2,5126,!1,24,16),bc.type=5126,bc.size=2,bc.buffer=v,bc.normalized=!1,bc.offset=16,bc.stride=24;0!==bc.divisor&&(k.vertexAttribDivisorANGLE(ad,0),bc.divisor=0);(Rc=Ca.elements)?X.bindBuffer(34963,Rc.buffer.buffer):rc.currentVAO&&(Rc=Ka.getElements(rc.currentVAO.elements))&&X.bindBuffer(34963,
Rc.buffer.buffer);Hb=Ca.offset;for(l=0;l<d;++l){p=a[l];var Da,ud,$b,Ya,Bb,ab,ec,Ob,Tb,Yb,Pb,mc,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Hf,wd,je,Xe,le,Jd,Hd,kd,Fc;Da=p.viewport;ud=Da.x|0;$b=Da.y|0;Ya="width"in Da?Da.width|0:na.framebufferWidth-ud;Bb="height"in
Da?Da.height|0:na.framebufferHeight-$b;ab=na.viewportWidth;na.viewportWidth=Ya;ec=na.viewportHeight;na.viewportHeight=Bb;X.viewport(ud,$b,Ya,Bb);A[0]=ud;A[1]=$b;A[2]=Ya;A[3]=Bb;Ob=p.viewport;Tb=Ob.x|0;Yb=Ob.y|0;Pb="width"in Ob?Ob.width|0:na.framebufferWidth-Tb;mc="height"in Ob?Ob.height|0:na.framebufferHeight-Yb;X.scissor(Tb,Yb,Pb,mc);ha[0]=Tb;ha[1]=Yb;ha[2]=Pb;ha[3]=mc;Qb=la.call(this,na,p,l);Db.offset=Qb;Ma=!1;lb=null;rb=0;fb=!1;lc=Oa=0;Ub=1;Cc=0;bb=5126;hb=cc=Gc=nc=0;qb(Db)?(Ma=!0,lb=D.createStream(34962,
Db),bb=lb.dtype):(lb=D.getBuffer(Db))?bb=lb.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(Gc=Db.constant,cc=hb=nc=0):(Gc=0<Db.constant.length?Db.constant[0]:0,cc=1<Db.constant.length?Db.constant[1]:0,hb=2<Db.constant.length?Db.constant[2]:0,nc=3<Db.constant.length?Db.constant[3]:0)):(lb=qb(Db.buffer)?D.createStream(34962,Db.buffer):D.getBuffer(Db.buffer),bb="type"in Db?pc[Db.type]:lb.dtype,fb=!!Db.normalized,lc=Db.size|0,Oa=Db.offset|0,Cc=Db.stride|0,rb=Db.divisor|0);ib=Q.location;wa=
V[ib];if(1===Ub){wa.buffer||X.enableVertexAttribArray(ib);mb=lc||2;if(wa.type!==bb||wa.size!==mb||wa.buffer!==lb||wa.normalized!==fb||wa.offset!==Oa||wa.stride!==Cc)X.bindBuffer(34962,lb.buffer),X.vertexAttribPointer(ib,mb,bb,fb,Cc,Oa),wa.type=bb,wa.size=mb,wa.buffer=lb,wa.normalized=fb,wa.offset=Oa,wa.stride=Cc;wa.divisor!==rb&&(k.vertexAttribDivisorANGLE(ib,rb),wa.divisor=rb)}else if(wa.buffer&&(X.disableVertexAttribArray(ib),wa.buffer=null),wa.x!==Gc||wa.y!==cc||wa.z!==hb||wa.w!==nc)X.vertexAttrib4f(ib,
Gc,cc,hb,nc),wa.x=Gc,wa.y=cc,wa.z=hb,wa.w=nc;za=N.call(this,na,p,l);ub.offset=za;Sa=!1;Za=null;Aa=0;cb=!1;wb=La=0;vb=1;Qa=0;Kc=5126;xa=Rb=Ib=Fb=0;qb(ub)?(Sa=!0,Za=D.createStream(34962,ub),Kc=Za.dtype):(Za=D.getBuffer(ub))?Kc=Za.dtype:"constant"in ub?(vb=2,"number"===typeof ub.constant?(Ib=ub.constant,Rb=xa=Fb=0):(Ib=0<ub.constant.length?ub.constant[0]:0,Rb=1<ub.constant.length?ub.constant[1]:0,xa=2<ub.constant.length?ub.constant[2]:0,Fb=3<ub.constant.length?ub.constant[3]:0)):(Za=qb(ub.buffer)?D.createStream(34962,
ub.buffer):D.getBuffer(ub.buffer),Kc="type"in ub?pc[ub.type]:Za.dtype,cb=!!ub.normalized,wb=ub.size|0,La=ub.offset|0,Qa=ub.stride|0,Aa=ub.divisor|0);vd=O.location;Ja=V[vd];if(1===vb){Ja.buffer||X.enableVertexAttribArray(vd);Lb=wb||2;if(Ja.type!==Kc||Ja.size!==Lb||Ja.buffer!==Za||Ja.normalized!==cb||Ja.offset!==La||Ja.stride!==Qa)X.bindBuffer(34962,Za.buffer),X.vertexAttribPointer(vd,Lb,Kc,cb,Qa,La),Ja.type=Kc,Ja.size=Lb,Ja.buffer=Za,Ja.normalized=cb,Ja.offset=La,Ja.stride=Qa;Ja.divisor!==Aa&&(k.vertexAttribDivisorANGLE(vd,
Aa),Ja.divisor=Aa)}else if(Ja.buffer&&(X.disableVertexAttribArray(vd),Ja.buffer=null),Ja.x!==Ib||Ja.y!==Rb||Ja.z!==xa||Ja.w!==Fb)X.vertexAttrib4f(vd,Ib,Rb,xa,Fb),Ja.x=Ib,Ja.y=Rb,Ja.z=xa,Ja.w=Fb;db=ea.call(this,na,p,l);oa.offset=db;gb=!1;ya=null;fc=0;Ea=!1;ob=nb=0;Ua=1;Va=0;oc=5126;Jb=Ta=uc=gd=0;qb(oa)?(gb=!0,ya=D.createStream(34962,oa),oc=ya.dtype):(ya=D.getBuffer(oa))?oc=ya.dtype:"constant"in oa?(Ua=2,"number"===typeof oa.constant?(uc=oa.constant,Ta=Jb=gd=0):(uc=0<oa.constant.length?oa.constant[0]:
0,Ta=1<oa.constant.length?oa.constant[1]:0,Jb=2<oa.constant.length?oa.constant[2]:0,gd=3<oa.constant.length?oa.constant[3]:0)):(ya=qb(oa.buffer)?D.createStream(34962,oa.buffer):D.getBuffer(oa.buffer),oc="type"in oa?pc[oa.type]:ya.dtype,Ea=!!oa.normalized,ob=oa.size|0,nb=oa.offset|0,Va=oa.stride|0,fc=oa.divisor|0);Dc=kc.location;Ga=V[Dc];if(1===Ua){Ga.buffer||X.enableVertexAttribArray(Dc);xc=ob||4;if(Ga.type!==oc||Ga.size!==xc||Ga.buffer!==ya||Ga.normalized!==Ea||Ga.offset!==nb||Ga.stride!==Va)X.bindBuffer(34962,
ya.buffer),X.vertexAttribPointer(Dc,xc,oc,Ea,Va,nb),Ga.type=oc,Ga.size=xc,Ga.buffer=ya,Ga.normalized=Ea,Ga.offset=nb,Ga.stride=Va;Ga.divisor!==fc&&(k.vertexAttribDivisorANGLE(Dc,fc),Ga.divisor=fc)}else if(Ga.buffer&&(X.disableVertexAttribArray(Dc),Ga.buffer=null),Ga.x!==uc||Ga.y!==Ta||Ga.z!==Jb||Ga.w!==gd)X.vertexAttrib4f(Dc,uc,Ta,Jb,gd),Ga.x=uc,Ga.y=Ta,Ga.z=Jb,Ga.w=gd;Pa=y.call(this,na,p,l);Cb.offset=Pa;Ba=!1;jb=null;sb=0;xb=!1;vc=pb=0;tb=1;sd=0;tc=5126;bd=hd=Lc=Od=0;qb(Cb)?(Ba=!0,jb=D.createStream(34962,
Cb),tc=jb.dtype):(jb=D.getBuffer(Cb))?tc=jb.dtype:"constant"in Cb?(tb=2,"number"===typeof Cb.constant?(Lc=Cb.constant,hd=bd=Od=0):(Lc=0<Cb.constant.length?Cb.constant[0]:0,hd=1<Cb.constant.length?Cb.constant[1]:0,bd=2<Cb.constant.length?Cb.constant[2]:0,Od=3<Cb.constant.length?Cb.constant[3]:0)):(jb=qb(Cb.buffer)?D.createStream(34962,Cb.buffer):D.getBuffer(Cb.buffer),tc="type"in Cb?pc[Cb.type]:jb.dtype,xb=!!Cb.normalized,vc=Cb.size|0,pb=Cb.offset|0,sd=Cb.stride|0,sb=Cb.divisor|0);Sb=ca.location;ac=
V[Sb];if(1===tb){ac.buffer||X.enableVertexAttribArray(Sb);Mb=vc||4;if(ac.type!==tc||ac.size!==Mb||ac.buffer!==jb||ac.normalized!==xb||ac.offset!==pb||ac.stride!==sd)X.bindBuffer(34962,jb.buffer),X.vertexAttribPointer(Sb,Mb,tc,xb,sd,pb),ac.type=tc,ac.size=Mb,ac.buffer=jb,ac.normalized=xb,ac.offset=pb,ac.stride=sd;ac.divisor!==sb&&(k.vertexAttribDivisorANGLE(Sb,sb),ac.divisor=sb)}else if(ac.buffer&&(X.disableVertexAttribArray(Sb),ac.buffer=null),ac.x!==Lc||ac.y!==hd||ac.z!==bd||ac.w!==Od)X.vertexAttrib4f(Sb,
Lc,hd,bd,Od),ac.x=Lc,ac.y=hd,ac.z=bd,ac.w=Od;Ha=h.call(this,na,p,l);Xb=Ha[0];yb=Ha[1];Nb=Ha[2];jc=Ha[3];l&&kb===Xb&&Kb===yb&&gc===Nb&&Sc===jc||(kb=Xb,Kb=yb,gc=Nb,Sc=jc,X.uniform4f(Xa.location,Xb,yb,Nb,jc));zc=p.lineWidth;l&&Ac===zc||(Ac=zc,X.uniform1f(Na.location,zc));Ec=p.capSize;l&&Mc===Ec||(Mc=Ec,X.uniform1f(q.location,Ec));cd=p.scale;Tc=cd[0];Gb=cd[1];l&&Nc===Tc&&zb===Gb||(Nc=Tc,zb=Gb,X.uniform2f(W.location,Tc,Gb));Oc=p.scaleFract;Hc=Oc[0];hc=Oc[1];l&&Uc===Hc&&Yc===hc||(Uc=Hc,Yc=hc,X.uniform2f(ta.location,
Hc,hc));id=p.translate;od=id[0];Zc=id[1];l&&qe===od&&Hf===Zc||(qe=od,Hf=Zc,X.uniform2f(R.location,od,Zc));wd=p.translateFract;je=wd[0];le=wd[1];l&&Xe===je&&Jd===le||(Xe=je,Jd=le,X.uniform2f(Vb.location,je,le));Hd=p.opacity;l&&kd===Hd||(kd=Hd,X.uniform1f(ia.location,Hd));Fc=p.count;0<Fc?Rc?k.drawElementsInstancedANGLE(4,36,Rc.type,Hb<<(Rc.type-5121>>1),Fc):k.drawArraysInstancedANGLE(4,Hb,36,Fc):0>Fc&&(Rc?X.drawElements(4,36,Rc.type,Hb<<(Rc.type-5121>>1)):X.drawArrays(4,Hb,36));na.viewportWidth=ab;
na.viewportHeight=ec;Ma&&D.destroyStream(lb);Sa&&D.destroyStream(Za);gb&&D.destroyStream(ya);Ba&&D.destroyStream(jb)}ba.dirty=!0;rc.setVAO(null);e&&(b.cpuTime+=performance.now()-g)},draw:function(a){var h,d,c,e,k,l,y,m,L,C,z,H,B,F,I,P,S,N,qa,J,U,aa,fa,Y,la,Ia,ea,ra,Pc,Wc,wc,eb,Bc,Eb,qc,Ra,Ic,ic,sc,Tb,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,mc,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc;h=$a.next;h!==$a.cur&&(h?
X.bindFramebuffer(36160,h.framebuffer):X.bindFramebuffer(36160,null),$a.cur=h);if(ba.dirty){var Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb;Ea=ga.dither;Ea!==ba.dither&&(Ea?X.enable(3024):X.disable(3024),ba.dither=Ea);nb=ga.depth_func;nb!==ba.depth_func&&(X.depthFunc(nb),ba.depth_func=nb);ob=$c[0];Ua=$c[1];if(ob!==Zb[0]||Ua!==Zb[1])X.depthRange(ob,Ua),Zb[0]=ob,Zb[1]=Ua;Va=ga.depth_mask;Va!==ba.depth_mask&&(X.depthMask(Va),ba.depth_mask=Va);oc=
Fa[0];gd=Fa[1];uc=Fa[2];Ta=Fa[3];if(oc!==Ab[0]||gd!==Ab[1]||uc!==Ab[2]||Ta!==Ab[3])X.colorMask(oc,gd,uc,Ta),Ab[0]=oc,Ab[1]=gd,Ab[2]=uc,Ab[3]=Ta;Jb=ga.cull_enable;Jb!==ba.cull_enable&&(Jb?X.enable(2884):X.disable(2884),ba.cull_enable=Jb);Dc=ga.cull_face;Dc!==ba.cull_face&&(X.cullFace(Dc),ba.cull_face=Dc);Ga=ga.frontFace;Ga!==ba.frontFace&&(X.frontFace(Ga),ba.frontFace=Ga);xc=ga.lineWidth;xc!==ba.lineWidth&&(X.lineWidth(xc),ba.lineWidth=xc);Pa=ga.polygonOffset_enable;Pa!==ba.polygonOffset_enable&&(Pa?
X.enable(32823):X.disable(32823),ba.polygonOffset_enable=Pa);Ba=M[0];jb=M[1];if(Ba!==G[0]||jb!==G[1])X.polygonOffset(Ba,jb),G[0]=Ba,G[1]=jb;sb=ga.sample_alpha;sb!==ba.sample_alpha&&(sb?X.enable(32926):X.disable(32926),ba.sample_alpha=sb);xb=ga.sample_enable;xb!==ba.sample_enable&&(xb?X.enable(32928):X.disable(32928),ba.sample_enable=xb);pb=ka[0];vc=ka[1];if(pb!==va[0]||vc!==va[1])X.sampleCoverage(pb,vc),va[0]=pb,va[1]=vc;tb=ga.stencil_enable;tb!==ba.stencil_enable&&(tb?X.enable(2960):X.disable(2960),
ba.stencil_enable=tb);sd=ga.stencil_mask;sd!==ba.stencil_mask&&(X.stencilMask(sd),ba.stencil_mask=sd);tc=ma[0];Od=ma[1];Lc=ma[2];if(tc!==K[0]||Od!==K[1]||Lc!==K[2])X.stencilFunc(tc,Od,Lc),K[0]=tc,K[1]=Od,K[2]=Lc;hd=ua[0];bd=ua[1];Sb=ua[2];ac=ua[3];if(hd!==sa[0]||bd!==sa[1]||Sb!==sa[2]||ac!==sa[3])X.stencilOpSeparate(hd,bd,Sb,ac),sa[0]=hd,sa[1]=bd,sa[2]=Sb,sa[3]=ac;Mb=E[0];Ha=E[1];Xb=E[2];kb=E[3];if(Mb!==da[0]||Ha!==da[1]||Xb!==da[2]||kb!==da[3])X.stencilOpSeparate(Mb,Ha,Xb,kb),da[0]=Mb,da[1]=Ha,da[2]=
Xb,da[3]=kb}d=a.viewport;c=d.x|0;e=d.y|0;k="width"in d?d.width|0:na.framebufferWidth-c;l="height"in d?d.height|0:na.framebufferHeight-e;y=na.viewportWidth;na.viewportWidth=k;m=na.viewportHeight;na.viewportHeight=l;X.viewport(c,e,k,l);A[0]=c;A[1]=e;A[2]=k;A[3]=l;X.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;X.enable(3042);ba.blend_enable=!0;X.blendEquationSeparate(32774,32774);Z[0]=32774;Z[1]=32774;X.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;X.disable(2929);ba.depth_enable=
!1;L=a.viewport;C=L.x|0;z=L.y|0;H="width"in L?L.width|0:na.framebufferWidth-C;B="height"in L?L.height|0:na.framebufferHeight-z;X.scissor(C,z,H,B);ha[0]=C;ha[1]=z;ha[2]=H;ha[3]=B;X.enable(3089);ba.scissor_enable=!0;if(F=ba.profile)I=performance.now(),b.count++;X.useProgram(p.program);P=Wb.angle_instanced_arrays;rc.setVAO(null);S=g.call(this,na,a,0);Db.offset=S;N=!1;qa=null;J=0;U=!1;fa=aa=0;Y=1;la=0;Ia=5126;Wc=Pc=ra=ea=0;qb(Db)?(N=!0,qa=D.createStream(34962,Db),Ia=qa.dtype):(qa=D.getBuffer(Db))?Ia=
qa.dtype:"constant"in Db?(Y=2,"number"===typeof Db.constant?(ra=Db.constant,Pc=Wc=ea=0):(ra=0<Db.constant.length?Db.constant[0]:0,Pc=1<Db.constant.length?Db.constant[1]:0,Wc=2<Db.constant.length?Db.constant[2]:0,ea=3<Db.constant.length?Db.constant[3]:0)):(qa=qb(Db.buffer)?D.createStream(34962,Db.buffer):D.getBuffer(Db.buffer),Ia="type"in Db?pc[Db.type]:qa.dtype,U=!!Db.normalized,fa=Db.size|0,aa=Db.offset|0,la=Db.stride|0,J=Db.divisor|0);wc=Q.location;eb=V[wc];if(1===Y){eb.buffer||X.enableVertexAttribArray(wc);
Bc=fa||2;if(eb.type!==Ia||eb.size!==Bc||eb.buffer!==qa||eb.normalized!==U||eb.offset!==aa||eb.stride!==la)X.bindBuffer(34962,qa.buffer),X.vertexAttribPointer(wc,Bc,Ia,U,la,aa),eb.type=Ia,eb.size=Bc,eb.buffer=qa,eb.normalized=U,eb.offset=aa,eb.stride=la;eb.divisor!==J&&(P.vertexAttribDivisorANGLE(wc,J),eb.divisor=J)}else if(eb.buffer&&(X.disableVertexAttribArray(wc),eb.buffer=null),eb.x!==ra||eb.y!==Pc||eb.z!==Wc||eb.w!==ea)X.vertexAttrib4f(wc,ra,Pc,Wc,ea),eb.x=ra,eb.y=Pc,eb.z=Wc,eb.w=ea;Eb=u.call(this,
na,a,0);ub.offset=Eb;qc=!1;Ra=null;Ic=0;ic=!1;Tb=sc=0;nd=1;Jc=0;dc=5126;Rc=bc=ad=Qc=0;qb(ub)?(qc=!0,Ra=D.createStream(34962,ub),dc=Ra.dtype):(Ra=D.getBuffer(ub))?dc=Ra.dtype:"constant"in ub?(nd=2,"number"===typeof ub.constant?(ad=ub.constant,bc=Rc=Qc=0):(ad=0<ub.constant.length?ub.constant[0]:0,bc=1<ub.constant.length?ub.constant[1]:0,Rc=2<ub.constant.length?ub.constant[2]:0,Qc=3<ub.constant.length?ub.constant[3]:0)):(Ra=qb(ub.buffer)?D.createStream(34962,ub.buffer):D.getBuffer(ub.buffer),dc="type"in
ub?pc[ub.type]:Ra.dtype,ic=!!ub.normalized,Tb=ub.size|0,sc=ub.offset|0,Jc=ub.stride|0,Ic=ub.divisor|0);Hb=O.location;Da=V[Hb];if(1===nd){Da.buffer||X.enableVertexAttribArray(Hb);ud=Tb||2;if(Da.type!==dc||Da.size!==ud||Da.buffer!==Ra||Da.normalized!==ic||Da.offset!==sc||Da.stride!==Jc)X.bindBuffer(34962,Ra.buffer),X.vertexAttribPointer(Hb,ud,dc,ic,Jc,sc),Da.type=dc,Da.size=ud,Da.buffer=Ra,Da.normalized=ic,Da.offset=sc,Da.stride=Jc;Da.divisor!==Ic&&(P.vertexAttribDivisorANGLE(Hb,Ic),Da.divisor=Ic)}else if(Da.buffer&&
(X.disableVertexAttribArray(Hb),Da.buffer=null),Da.x!==ad||Da.y!==bc||Da.z!==Rc||Da.w!==Qc)X.vertexAttrib4f(Hb,ad,bc,Rc,Qc),Da.x=ad,Da.y=bc,Da.z=Rc,Da.w=Qc;$b=n.call(this,na,a,0);oa.offset=$b;Ya=!1;Bb=null;ab=0;ec=!1;mc=Ob=0;Yb=1;Pb=0;ed=5126;rb=lb=Ma=Qb=0;qb(oa)?(Ya=!0,Bb=D.createStream(34962,oa),ed=Bb.dtype):(Bb=D.getBuffer(oa))?ed=Bb.dtype:"constant"in oa?(Yb=2,"number"===typeof oa.constant?(Ma=oa.constant,lb=rb=Qb=0):(Ma=0<oa.constant.length?oa.constant[0]:0,lb=1<oa.constant.length?oa.constant[1]:
0,rb=2<oa.constant.length?oa.constant[2]:0,Qb=3<oa.constant.length?oa.constant[3]:0)):(Bb=qb(oa.buffer)?D.createStream(34962,oa.buffer):D.getBuffer(oa.buffer),ed="type"in oa?pc[oa.type]:Bb.dtype,ec=!!oa.normalized,mc=oa.size|0,Ob=oa.offset|0,Pb=oa.stride|0,ab=oa.divisor|0);fb=kc.location;Oa=V[fb];if(1===Yb){Oa.buffer||X.enableVertexAttribArray(fb);lc=mc||4;if(Oa.type!==ed||Oa.size!==lc||Oa.buffer!==Bb||Oa.normalized!==ec||Oa.offset!==Ob||Oa.stride!==Pb)X.bindBuffer(34962,Bb.buffer),X.vertexAttribPointer(fb,
lc,ed,ec,Pb,Ob),Oa.type=ed,Oa.size=lc,Oa.buffer=Bb,Oa.normalized=ec,Oa.offset=Ob,Oa.stride=Pb;Oa.divisor!==ab&&(P.vertexAttribDivisorANGLE(fb,ab),Oa.divisor=ab)}else if(Oa.buffer&&(X.disableVertexAttribArray(fb),Oa.buffer=null),Oa.x!==Ma||Oa.y!==lb||Oa.z!==rb||Oa.w!==Qb)X.vertexAttrib4f(fb,Ma,lb,rb,Qb),Oa.x=Ma,Oa.y=lb,Oa.z=rb,Oa.w=Qb;Ub=w.call(this,na,a,0);Cb.offset=Ub;Cc=!1;bb=null;nc=0;Gc=!1;hb=cc=0;ib=1;wa=0;mb=5126;Aa=Za=Sa=za=0;qb(Cb)?(Cc=!0,bb=D.createStream(34962,Cb),mb=bb.dtype):(bb=D.getBuffer(Cb))?
mb=bb.dtype:"constant"in Cb?(ib=2,"number"===typeof Cb.constant?(Sa=Cb.constant,Za=Aa=za=0):(Sa=0<Cb.constant.length?Cb.constant[0]:0,Za=1<Cb.constant.length?Cb.constant[1]:0,Aa=2<Cb.constant.length?Cb.constant[2]:0,za=3<Cb.constant.length?Cb.constant[3]:0)):(bb=qb(Cb.buffer)?D.createStream(34962,Cb.buffer):D.getBuffer(Cb.buffer),mb="type"in Cb?pc[Cb.type]:bb.dtype,Gc=!!Cb.normalized,hb=Cb.size|0,cc=Cb.offset|0,wa=Cb.stride|0,nc=Cb.divisor|0);cb=ca.location;La=V[cb];if(1===ib){La.buffer||X.enableVertexAttribArray(cb);
wb=hb||4;if(La.type!==mb||La.size!==wb||La.buffer!==bb||La.normalized!==Gc||La.offset!==cc||La.stride!==wa)X.bindBuffer(34962,bb.buffer),X.vertexAttribPointer(cb,wb,mb,Gc,wa,cc),La.type=mb,La.size=wb,La.buffer=bb,La.normalized=Gc,La.offset=cc,La.stride=wa;La.divisor!==nc&&(P.vertexAttribDivisorANGLE(cb,nc),La.divisor=nc)}else if(La.buffer&&(X.disableVertexAttribArray(cb),La.buffer=null),La.x!==Sa||La.y!==Za||La.z!==Aa||La.w!==za)X.vertexAttrib4f(cb,Sa,Za,Aa,za),La.x=Sa,La.y=Za,La.z=Aa,La.w=za;vb=
Wa.location;Qa=V[vb];Qa.buffer||X.enableVertexAttribArray(vb);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==r||!1!==Qa.normalized||0!==Qa.offset||24!==Qa.stride)X.bindBuffer(34962,r.buffer),X.vertexAttribPointer(vb,2,5126,!1,24,0),Qa.type=5126,Qa.size=2,Qa.buffer=r,Qa.normalized=!1,Qa.offset=0,Qa.stride=24;0!==Qa.divisor&&(P.vertexAttribDivisorANGLE(vb,0),Qa.divisor=0);Kc=pa.location;Fb=V[Kc];Fb.buffer||X.enableVertexAttribArray(Kc);if(5126!==Fb.type||2!==Fb.size||Fb.buffer!==x||!1!==Fb.normalized||
8!==Fb.offset||24!==Fb.stride)X.bindBuffer(34962,x.buffer),X.vertexAttribPointer(Kc,2,5126,!1,24,8),Fb.type=5126,Fb.size=2,Fb.buffer=x,Fb.normalized=!1,Fb.offset=8,Fb.stride=24;0!==Fb.divisor&&(P.vertexAttribDivisorANGLE(Kc,0),Fb.divisor=0);Ib=f.location;Rb=V[Ib];Rb.buffer||X.enableVertexAttribArray(Ib);if(5126!==Rb.type||2!==Rb.size||Rb.buffer!==v||!1!==Rb.normalized||16!==Rb.offset||24!==Rb.stride)X.bindBuffer(34962,v.buffer),X.vertexAttribPointer(Ib,2,5126,!1,24,16),Rb.type=5126,Rb.size=2,Rb.buffer=
v,Rb.normalized=!1,Rb.offset=16,Rb.stride=24;0!==Rb.divisor&&(P.vertexAttribDivisorANGLE(Ib,0),Rb.divisor=0);xa=t.call(this,na,a,0);X.uniform4f(Xa.location,xa[0],xa[1],xa[2],xa[3]);X.uniform1f(Na.location,a.lineWidth);X.uniform1f(q.location,a.capSize);vd=a.scale;X.uniform2f(W.location,vd[0],vd[1]);Ja=a.scaleFract;X.uniform2f(ta.location,Ja[0],Ja[1]);Lb=a.translate;X.uniform2f(R.location,Lb[0],Lb[1]);db=a.translateFract;X.uniform2f(Vb.location,db[0],db[1]);X.uniform1f(ia.location,a.opacity);(gb=Ca.elements)?
X.bindBuffer(34963,gb.buffer.buffer):rc.currentVAO&&(gb=Ka.getElements(rc.currentVAO.elements))&&X.bindBuffer(34963,gb.buffer.buffer);ya=Ca.offset;fc=a.count;0<fc?gb?P.drawElementsInstancedANGLE(4,36,gb.type,ya<<(gb.type-5121>>1),fc):P.drawArraysInstancedANGLE(4,ya,36,fc):0>fc&&(gb?X.drawElements(4,36,gb.type,ya<<(gb.type-5121>>1)):X.drawArrays(4,ya,36));ba.dirty=!0;rc.setVAO(null);na.viewportWidth=y;na.viewportHeight=m;F&&(b.cpuTime+=performance.now()-I);N&&D.destroyStream(qa);qc&&D.destroyStream(Ra);
Ya&&D.destroyStream(Bb);Cc&&D.destroyStream(bb)},scope:function(a,f,h){var d,c,e,q,g,k,l,p,u,w,t,n,y,A,ca,T,E,G,F,N,K,M,da,Z,O,Q,R,Wa,W,V,X,ha,ja,ka,la,sa,ea,ua,va,rc,ma,ia,Fa,pa,kc,Hb,Da,ta,td,Ya,Na,ab,Ab,$c,Xa,Yb,Pb,Ka,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,Vb,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,$a,tc,Zb,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,
Zc,Wb,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd;d=a.viewport;c=d.x|0;e=d.y|0;q="width"in d?d.width|0:na.framebufferWidth-c;g="height"in d?d.height|0:na.framebufferHeight-e;k=na.viewportWidth;na.viewportWidth=q;l=na.viewportHeight;na.viewportHeight=g;p=Ia[0];Ia[0]=c;u=Ia[1];Ia[1]=e;w=Ia[2];Ia[2]=q;t=Ia[3];Ia[3]=g;n=mc[0];mc[0]=0;y=mc[1];mc[1]=0;A=mc[2];mc[2]=0;ca=mc[3];mc[3]=0;T=ga.blend_enable;ga.blend_enable=
!0;E=Bc[0];Bc[0]=32774;G=Bc[1];Bc[1]=32774;F=P[0];P[0]=770;N=P[1];P[1]=771;K=P[2];P[2]=773;M=P[3];P[3]=1;da=ga.depth_enable;ga.depth_enable=!1;Z=a.viewport;O=Z.x|0;Q=Z.y|0;R="width"in Z?Z.width|0:na.framebufferWidth-O;Wa="height"in Z?Z.height|0:na.framebufferHeight-Q;W=Y[0];Y[0]=O;V=Y[1];Y[1]=Q;X=Y[2];Y[2]=R;ha=Y[3];Y[3]=Wa;ja=ga.scissor_enable;ga.scissor_enable=!0;if(ka=ba.profile)la=performance.now(),b.count++;sa=Ca.count;Ca.count=36;ea=a.count;ua=Ca.instances;Ca.instances=ea;va=Ca.primitive;Ca.primitive=
4;rc=a.capSize;ma=Tb[5];Tb[5]=rc;ia=a.lineWidth;Fa=Tb[4];Tb[4]=ia;pa=a.opacity;kc=Tb[10];Tb[10]=pa;Hb=a.range;Da=Tb[18];Tb[18]=Hb;ta=a.scale;td=Tb[6];Tb[6]=ta;Ya=a.scaleFract;Na=Tb[7];Tb[7]=Ya;ab=a.translate;Ab=Tb[8];Tb[8]=ab;$c=a.translateFract;Xa=Tb[9];Tb[9]=$c;Yb=m.call(this,na,a,h);Pb=Tb[3];Tb[3]=Yb;Ka=z.buffer;z.buffer=v;Qb=z.divisor;z.divisor=0;Ma=z.normalized;z.normalized=!1;lb=z.offset;z.offset=16;rb=z.size;z.size=0;fb=z.state;z.state=1;Oa=z.stride;z.stride=24;lc=z.type;z.type=5126;Ub=z.w;
z.w=0;Cc=z.x;z.x=0;bb=z.y;z.y=0;nc=z.z;z.z=0;Gc=B.call(this,na,a,h);Cb.offset=Gc;cc=!1;hb=null;ib=0;wa=!1;za=mb=0;Sa=1;Za=0;Aa=5126;vb=wb=La=cb=0;qb(Cb)?(cc=!0,hb=D.createStream(34962,Cb),Aa=hb.dtype):(hb=D.getBuffer(Cb))?Aa=hb.dtype:"constant"in Cb?(Sa=2,"number"===typeof Cb.constant?(La=Cb.constant,wb=vb=cb=0):(La=0<Cb.constant.length?Cb.constant[0]:0,wb=1<Cb.constant.length?Cb.constant[1]:0,vb=2<Cb.constant.length?Cb.constant[2]:0,cb=3<Cb.constant.length?Cb.constant[3]:0)):(hb=qb(Cb.buffer)?D.createStream(34962,
Cb.buffer):D.getBuffer(Cb.buffer),Aa="type"in Cb?pc[Cb.type]:hb.dtype,wa=!!Cb.normalized,za=Cb.size|0,mb=Cb.offset|0,Za=Cb.stride|0,ib=Cb.divisor|0);Qa=S.buffer;S.buffer=hb;Kc=S.divisor;S.divisor=ib;Fb=S.normalized;S.normalized=wa;Ib=S.offset;S.offset=mb;Rb=S.size;S.size=za;xa=S.state;S.state=Sa;Vb=S.stride;S.stride=Za;Ja=S.type;S.type=Aa;Lb=S.w;S.w=cb;db=S.x;S.x=La;gb=S.y;S.y=wb;ya=S.z;S.z=vb;fc=J.buffer;J.buffer=r;Ea=J.divisor;J.divisor=0;nb=J.normalized;J.normalized=!1;ob=J.offset;J.offset=0;Ua=
J.size;J.size=0;Va=J.state;J.state=1;oc=J.stride;J.stride=24;gd=J.type;J.type=5126;uc=J.w;J.w=0;Ta=J.x;J.x=0;Jb=J.y;J.y=0;Dc=J.z;J.z=0;Ga=fa.call(this,na,a,h);oa.offset=Ga;xc=!1;Pa=null;Ba=0;jb=!1;xb=sb=0;pb=1;vc=0;tb=5126;Lc=Zb=tc=$a=0;qb(oa)?(xc=!0,Pa=D.createStream(34962,oa),tb=Pa.dtype):(Pa=D.getBuffer(oa))?tb=Pa.dtype:"constant"in oa?(pb=2,"number"===typeof oa.constant?(tc=oa.constant,Zb=Lc=$a=0):(tc=0<oa.constant.length?oa.constant[0]:0,Zb=1<oa.constant.length?oa.constant[1]:0,Lc=2<oa.constant.length?
oa.constant[2]:0,$a=3<oa.constant.length?oa.constant[3]:0)):(Pa=qb(oa.buffer)?D.createStream(34962,oa.buffer):D.getBuffer(oa.buffer),tb="type"in oa?pc[oa.type]:Pa.dtype,jb=!!oa.normalized,xb=oa.size|0,sb=oa.offset|0,vc=oa.stride|0,Ba=oa.divisor|0);hd=H.buffer;H.buffer=Pa;bd=H.divisor;H.divisor=Ba;Sb=H.normalized;H.normalized=jb;ac=H.offset;H.offset=sb;Mb=H.size;H.size=xb;Ha=H.state;H.state=pb;Xb=H.stride;H.stride=vc;kb=H.type;H.type=tb;yb=H.w;H.w=$a;Kb=H.x;H.x=tc;Nb=H.y;H.y=Zb;gc=H.z;H.z=Lc;jc=C.buffer;
C.buffer=x;Sc=C.divisor;C.divisor=0;zc=C.normalized;C.normalized=!1;Ac=C.offset;C.offset=8;Ec=C.size;C.size=0;Mc=C.state;C.state=1;cd=C.stride;C.stride=24;Tc=C.type;C.type=5126;Nc=C.w;C.w=0;Gb=C.x;C.x=0;zb=C.y;C.y=0;Oc=C.z;C.z=0;Hc=I.call(this,na,a,h);Db.offset=Hc;Uc=!1;hc=null;Yc=0;id=!1;qe=od=0;Zc=1;Wb=0;wd=5126;Jd=le=Xe=je=0;qb(Db)?(Uc=!0,hc=D.createStream(34962,Db),wd=hc.dtype):(hc=D.getBuffer(Db))?wd=hc.dtype:"constant"in Db?(Zc=2,"number"===typeof Db.constant?(Xe=Db.constant,le=Jd=je=0):(Xe=
0<Db.constant.length?Db.constant[0]:0,le=1<Db.constant.length?Db.constant[1]:0,Jd=2<Db.constant.length?Db.constant[2]:0,je=3<Db.constant.length?Db.constant[3]:0)):(hc=qb(Db.buffer)?D.createStream(34962,Db.buffer):D.getBuffer(Db.buffer),wd="type"in Db?pc[Db.type]:hc.dtype,id=!!Db.normalized,qe=Db.size|0,od=Db.offset|0,Wb=Db.stride|0,Yc=Db.divisor|0);Hd=aa.buffer;aa.buffer=hc;kd=aa.divisor;aa.divisor=Yc;Fc=aa.normalized;aa.normalized=id;pd=aa.offset;aa.offset=od;ld=aa.size;aa.size=qe;fd=aa.state;aa.state=
Zc;qd=aa.stride;aa.stride=Wb;Fd=aa.type;aa.type=wd;yd=aa.w;aa.w=je;te=aa.x;aa.x=Xe;xe=aa.y;aa.y=le;Ye=aa.z;aa.z=Jd;me=L.call(this,na,a,h);ub.offset=me;ee=!1;ce=null;ye=0;$d=!1;yc=fe=0;Xc=1;re=0;ke=5126;Qd=Pd=Md=Id=0;qb(ub)?(ee=!0,ce=D.createStream(34962,ub),ke=ce.dtype):(ce=D.getBuffer(ub))?ke=ce.dtype:"constant"in ub?(Xc=2,"number"===typeof ub.constant?(Md=ub.constant,Pd=Qd=Id=0):(Md=0<ub.constant.length?ub.constant[0]:0,Pd=1<ub.constant.length?ub.constant[1]:0,Qd=2<ub.constant.length?ub.constant[2]:
0,Id=3<ub.constant.length?ub.constant[3]:0)):(ce=qb(ub.buffer)?D.createStream(34962,ub.buffer):D.getBuffer(ub.buffer),ke="type"in ub?pc[ub.type]:ce.dtype,$d=!!ub.normalized,yc=ub.size|0,fe=ub.offset|0,re=ub.stride|0,ye=ub.divisor|0);ge=U.buffer;U.buffer=ce;ze=U.divisor;U.divisor=ye;Be=U.normalized;U.normalized=$d;ne=U.offset;U.offset=fe;af=U.size;U.size=yc;Qe=U.state;U.state=Xc;Me=U.stride;U.stride=re;se=U.type;U.type=ke;Ee=U.w;U.w=Id;He=U.x;U.x=Md;Ie=U.y;U.y=Pd;Je=U.z;U.z=Qd;Fe=ra.vert;ra.vert=2;
Kd=ra.frag;ra.frag=1;ba.dirty=!0;f(na,a,h);na.viewportWidth=k;na.viewportHeight=l;Ia[0]=p;Ia[1]=u;Ia[2]=w;Ia[3]=t;mc[0]=n;mc[1]=y;mc[2]=A;mc[3]=ca;ga.blend_enable=T;Bc[0]=E;Bc[1]=G;P[0]=F;P[1]=N;P[2]=K;P[3]=M;ga.depth_enable=da;Y[0]=W;Y[1]=V;Y[2]=X;Y[3]=ha;ga.scissor_enable=ja;ka&&(b.cpuTime+=performance.now()-la);Ca.count=sa;Ca.instances=ua;Ca.primitive=va;Tb[5]=ma;Tb[4]=Fa;Tb[10]=kc;Tb[18]=Da;Tb[6]=td;Tb[7]=Na;Tb[8]=Ab;Tb[9]=Xa;Tb[3]=Pb;z.buffer=Ka;z.divisor=Qb;z.normalized=Ma;z.offset=lb;z.size=
rb;z.state=fb;z.stride=Oa;z.type=lc;z.w=Ub;z.x=Cc;z.y=bb;z.z=nc;cc&&D.destroyStream(hb);S.buffer=Qa;S.divisor=Kc;S.normalized=Fb;S.offset=Ib;S.size=Rb;S.state=xa;S.stride=Vb;S.type=Ja;S.w=Lb;S.x=db;S.y=gb;S.z=ya;J.buffer=fc;J.divisor=Ea;J.normalized=nb;J.offset=ob;J.size=Ua;J.state=Va;J.stride=oc;J.type=gd;J.w=uc;J.x=Ta;J.y=Jb;J.z=Dc;xc&&D.destroyStream(Pa);H.buffer=hd;H.divisor=bd;H.normalized=Sb;H.offset=ac;H.size=Mb;H.state=Ha;H.stride=Xb;H.type=kb;H.w=yb;H.x=Kb;H.y=Nb;H.z=gc;C.buffer=jc;C.divisor=
Sc;C.normalized=zc;C.offset=Ac;C.size=Ec;C.state=Mc;C.stride=cd;C.type=Tc;C.w=Nc;C.x=Gb;C.y=zb;C.z=Oc;Uc&&D.destroyStream(hc);aa.buffer=Hd;aa.divisor=kd;aa.normalized=Fc;aa.offset=pd;aa.size=ld;aa.state=fd;aa.stride=qd;aa.type=Fd;aa.w=yd;aa.x=te;aa.y=xe;aa.z=Ye;ee&&D.destroyStream(ce);U.buffer=ge;U.divisor=ze;U.normalized=Be;U.offset=ne;U.size=af;U.state=Qe;U.stride=Me;U.type=se;U.w=Ee;U.x=He;U.y=Ie;U.z=Je;ra.vert=Fe;ra.frag=Kd;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa){var kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra,Tb,rc,mc,td,Bc,Z,P,ja,Fa,Ab,$c,Zb,M,G,ka,va,Y,ha,ma,K,E;kc=a.attributes;pa=a.buffer;Na=a.context;ia=a.current;Q=a.draw;O=a.elements;W=a.extensions;ta=a.framebuffer;R=a.gl;Vb=a.isBufferArgs;Xa=a.next;V=a.shader;D=a.uniforms;na=a.vao;ba=Xa.blend_color;Ca=ia.blend_color;Ka=Xa.blend_equation;Wb=ia.blend_equation;$a=Xa.blend_func;X=ia.blend_func;qb=Xa.colorMask;
ga=ia.colorMask;ra=Xa.depth_range;Tb=ia.depth_range;rc=Xa.polygonOffset_offset;mc=ia.polygonOffset_offset;td=Xa.sample_coverage;Bc=ia.sample_coverage;Z=Xa.scissor_box;P=ia.scissor_box;ja=Xa.stencil_func;Fa=ia.stencil_func;Ab=Xa.stencil_opBack;$c=ia.stencil_opBack;Zb=Xa.stencil_opFront;M=ia.stencil_opFront;G=Xa.viewport;ka=ia.viewport;va={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:8,stride:8};ha={divisor:1,offset:8,stride:8};ma=
{divisor:1,offset:16,stride:8};K={divisor:1,offset:16,stride:8};E={divisor:1,offset:0,stride:4};return{batch:function(a,c){var e,g,k,p,u,r;e=ta.next;e!==ta.cur&&(e?R.bindFramebuffer(36160,e.framebuffer):R.bindFramebuffer(36160,null),ta.cur=e);if(ia.dirty){var w,v,t,x,n,m,T,z,D,G,Z,qa,V,ba,Nd,Ge,Ka,Pe,Ad,Ae,pe,Vd,be,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc;w=Xa.dither;w!==ia.dither&&(w?R.enable(3024):R.disable(3024),ia.dither=w);v=Xa.depth_func;v!==ia.depth_func&&(R.depthFunc(v),ia.depth_func=v);t=ra[0];x=ra[1];
if(t!==Tb[0]||x!==Tb[1])R.depthRange(t,x),Tb[0]=t,Tb[1]=x;n=Xa.depth_mask;n!==ia.depth_mask&&(R.depthMask(n),ia.depth_mask=n);m=qb[0];T=qb[1];z=qb[2];D=qb[3];if(m!==ga[0]||T!==ga[1]||z!==ga[2]||D!==ga[3])R.colorMask(m,T,z,D),ga[0]=m,ga[1]=T,ga[2]=z,ga[3]=D;G=Xa.cull_enable;G!==ia.cull_enable&&(G?R.enable(2884):R.disable(2884),ia.cull_enable=G);Z=Xa.cull_face;Z!==ia.cull_face&&(R.cullFace(Z),ia.cull_face=Z);qa=Xa.frontFace;qa!==ia.frontFace&&(R.frontFace(qa),ia.frontFace=qa);V=Xa.lineWidth;V!==ia.lineWidth&&
(R.lineWidth(V),ia.lineWidth=V);ba=Xa.polygonOffset_enable;ba!==ia.polygonOffset_enable&&(ba?R.enable(32823):R.disable(32823),ia.polygonOffset_enable=ba);Nd=rc[0];Ge=rc[1];if(Nd!==mc[0]||Ge!==mc[1])R.polygonOffset(Nd,Ge),mc[0]=Nd,mc[1]=Ge;Ka=Xa.sample_alpha;Ka!==ia.sample_alpha&&(Ka?R.enable(32926):R.disable(32926),ia.sample_alpha=Ka);Pe=Xa.sample_enable;Pe!==ia.sample_enable&&(Pe?R.enable(32928):R.disable(32928),ia.sample_enable=Pe);Ad=td[0];Ae=td[1];if(Ad!==Bc[0]||Ae!==Bc[1])R.sampleCoverage(Ad,
Ae),Bc[0]=Ad,Bc[1]=Ae;pe=Xa.stencil_mask;pe!==ia.stencil_mask&&(R.stencilMask(pe),ia.stencil_mask=pe);Vd=ja[0];be=ja[1];Xd=ja[2];if(Vd!==Fa[0]||be!==Fa[1]||Xd!==Fa[2])R.stencilFunc(Vd,be,Xd),Fa[0]=Vd,Fa[1]=be,Fa[2]=Xd;rd=Zb[0];md=Zb[1];xd=Zb[2];dd=Zb[3];if(rd!==M[0]||md!==M[1]||xd!==M[2]||dd!==M[3])R.stencilOpSeparate(rd,md,xd,dd),M[0]=rd,M[1]=md,M[2]=xd,M[3]=dd;Bd=Ab[0];Vc=Ab[1];Dd=Ab[2];Pc=Ab[3];if(Bd!==$c[0]||Vc!==$c[1]||Dd!==$c[2]||Pc!==$c[3])R.stencilOpSeparate(Bd,Vc,Dd,Pc),$c[0]=Bd,$c[1]=Vc,
$c[2]=Dd,$c[3]=Pc}R.blendColor(0,0,0,0);Ca[0]=0;Ca[1]=0;Ca[2]=0;Ca[3]=0;R.enable(3042);ia.blend_enable=!0;R.blendEquationSeparate(32774,32774);Wb[0]=32774;Wb[1]=32774;R.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;R.enable(3089);ia.scissor_enable=!0;R.disable(2960);ia.stencil_enable=!1;if(g=ia.profile)k=performance.now(),b.count+=c;R.useProgram(B.program);p=W.angle_instanced_arrays;var Wc,wc,eb,jd,Eb;na.setVAO(null);Wc=la.location;wc=kc[Wc];wc.buffer||R.enableVertexAttribArray(Wc);
if(5126!==wc.type||1!==wc.size||wc.buffer!==l||!1!==wc.normalized||0!==wc.offset||8!==wc.stride)R.bindBuffer(34962,l.buffer),R.vertexAttribPointer(Wc,1,5126,!1,8,0),wc.type=5126,wc.size=1,wc.buffer=l,wc.normalized=!1,wc.offset=0,wc.stride=8;0!==wc.divisor&&(p.vertexAttribDivisorANGLE(Wc,0),wc.divisor=0);eb=N.location;jd=kc[eb];jd.buffer||R.enableVertexAttribArray(eb);if(5126!==jd.type||1!==jd.size||jd.buffer!==d||!1!==jd.normalized||4!==jd.offset||8!==jd.stride)R.bindBuffer(34962,d.buffer),R.vertexAttribPointer(eb,
1,5126,!1,8,4),jd.type=5126,jd.size=1,jd.buffer=d,jd.normalized=!1,jd.offset=4,jd.stride=8;0!==jd.divisor&&(p.vertexAttribDivisorANGLE(eb,0),jd.divisor=0);(Eb=Q.elements)?R.bindBuffer(34963,Eb.buffer.buffer):na.currentVAO&&(Eb=O.getElements(na.currentVAO.elements))&&R.bindBuffer(34963,Eb.buffer.buffer);for(u=0;u<c;++u){r=a[u];var qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,$a,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,
vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Hf,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd;qc=r.viewport;Ra=qc.x|0;Ic=qc.y|0;ic="width"in qc?qc.width|0:Na.framebufferWidth-Ra;sc="height"in qc?qc.height|0:Na.framebufferHeight-Ic;Gd=Na.viewportWidth;Na.viewportWidth=ic;nd=Na.viewportHeight;Na.viewportHeight=sc;R.viewport(Ra,Ic,ic,sc);ka[0]=Ra;ka[1]=Ic;ka[2]=ic;ka[3]=
sc;(Jc=S.call(this,Na,r,u))?R.enable(2929):R.disable(2929);ia.depth_enable=Jc;dc=r.viewport;Qc=dc.x|0;ad=dc.y|0;bc="width"in dc?dc.width|0:Na.framebufferWidth-Qc;Rc="height"in dc?dc.height|0:Na.framebufferHeight-ad;R.scissor(Qc,ad,bc,Rc);P[0]=Qc;P[1]=ad;P[2]=bc;P[3]=Rc;Y.buffer=r.positionBuffer;Hb=!1;Da=null;ud=0;$b=!1;Bb=Ya=0;ab=1;ec=0;Ob=5126;ed=Pb=Yb=$a=0;Vb(Y)?(Hb=!0,Da=pa.createStream(34962,Y),Ob=Da.dtype):(Da=pa.getBuffer(Y))?Ob=Da.dtype:"constant"in Y?(ab=2,"number"===typeof Y.constant?(Yb=
Y.constant,Pb=ed=$a=0):(Yb=0<Y.constant.length?Y.constant[0]:0,Pb=1<Y.constant.length?Y.constant[1]:0,ed=2<Y.constant.length?Y.constant[2]:0,$a=3<Y.constant.length?Y.constant[3]:0)):(Da=Vb(Y.buffer)?pa.createStream(34962,Y.buffer):pa.getBuffer(Y.buffer),Ob="type"in Y?va[Y.type]:Da.dtype,$b=!!Y.normalized,Bb=Y.size|0,Ya=Y.offset|0,ec=Y.stride|0,ud=Y.divisor|0);Qb=fa.location;Ma=kc[Qb];if(1===ab){Ma.buffer||R.enableVertexAttribArray(Qb);lb=Bb||2;if(Ma.type!==Ob||Ma.size!==lb||Ma.buffer!==Da||Ma.normalized!==
$b||Ma.offset!==Ya||Ma.stride!==ec)R.bindBuffer(34962,Da.buffer),R.vertexAttribPointer(Qb,lb,Ob,$b,ec,Ya),Ma.type=Ob,Ma.size=lb,Ma.buffer=Da,Ma.normalized=$b,Ma.offset=Ya,Ma.stride=ec;Ma.divisor!==ud&&(p.vertexAttribDivisorANGLE(Qb,ud),Ma.divisor=ud)}else if(Ma.buffer&&(R.disableVertexAttribArray(Qb),Ma.buffer=null),Ma.x!==Yb||Ma.y!==Pb||Ma.z!==ed||Ma.w!==$a)R.vertexAttrib4f(Qb,Yb,Pb,ed,$a),Ma.x=Yb,Ma.y=Pb,Ma.z=ed,Ma.w=$a;ma.buffer=r.positionBuffer;rb=!1;fb=null;Oa=0;lc=!1;Cc=Ub=0;bb=1;nc=0;Gc=5126;
wa=ib=hb=cc=0;Vb(ma)?(rb=!0,fb=pa.createStream(34962,ma),Gc=fb.dtype):(fb=pa.getBuffer(ma))?Gc=fb.dtype:"constant"in ma?(bb=2,"number"===typeof ma.constant?(hb=ma.constant,ib=wa=cc=0):(hb=0<ma.constant.length?ma.constant[0]:0,ib=1<ma.constant.length?ma.constant[1]:0,wa=2<ma.constant.length?ma.constant[2]:0,cc=3<ma.constant.length?ma.constant[3]:0)):(fb=Vb(ma.buffer)?pa.createStream(34962,ma.buffer):pa.getBuffer(ma.buffer),Gc="type"in ma?va[ma.type]:fb.dtype,lc=!!ma.normalized,Cc=ma.size|0,Ub=ma.offset|
0,nc=ma.stride|0,Oa=ma.divisor|0);mb=C.location;za=kc[mb];if(1===bb){za.buffer||R.enableVertexAttribArray(mb);Sa=Cc||2;if(za.type!==Gc||za.size!==Sa||za.buffer!==fb||za.normalized!==lc||za.offset!==Ub||za.stride!==nc)R.bindBuffer(34962,fb.buffer),R.vertexAttribPointer(mb,Sa,Gc,lc,nc,Ub),za.type=Gc,za.size=Sa,za.buffer=fb,za.normalized=lc,za.offset=Ub,za.stride=nc;za.divisor!==Oa&&(p.vertexAttribDivisorANGLE(mb,Oa),za.divisor=Oa)}else if(za.buffer&&(R.disableVertexAttribArray(mb),za.buffer=null),za.x!==
hb||za.y!==ib||za.z!==wa||za.w!==cc)R.vertexAttrib4f(mb,hb,ib,wa,cc),za.x=hb,za.y=ib,za.z=wa,za.w=cc;ha.buffer=r.positionFractBuffer;Za=!1;Aa=null;cb=0;La=!1;vb=wb=0;Qa=1;Kc=0;Fb=5126;vd=xa=Rb=Ib=0;Vb(ha)?(Za=!0,Aa=pa.createStream(34962,ha),Fb=Aa.dtype):(Aa=pa.getBuffer(ha))?Fb=Aa.dtype:"constant"in ha?(Qa=2,"number"===typeof ha.constant?(Rb=ha.constant,xa=vd=Ib=0):(Rb=0<ha.constant.length?ha.constant[0]:0,xa=1<ha.constant.length?ha.constant[1]:0,vd=2<ha.constant.length?ha.constant[2]:0,Ib=3<ha.constant.length?
ha.constant[3]:0)):(Aa=Vb(ha.buffer)?pa.createStream(34962,ha.buffer):pa.getBuffer(ha.buffer),Fb="type"in ha?va[ha.type]:Aa.dtype,La=!!ha.normalized,vb=ha.size|0,wb=ha.offset|0,Kc=ha.stride|0,cb=ha.divisor|0);Ja=H.location;Lb=kc[Ja];if(1===Qa){Lb.buffer||R.enableVertexAttribArray(Ja);db=vb||2;if(Lb.type!==Fb||Lb.size!==db||Lb.buffer!==Aa||Lb.normalized!==La||Lb.offset!==wb||Lb.stride!==Kc)R.bindBuffer(34962,Aa.buffer),R.vertexAttribPointer(Ja,db,Fb,La,Kc,wb),Lb.type=Fb,Lb.size=db,Lb.buffer=Aa,Lb.normalized=
La,Lb.offset=wb,Lb.stride=Kc;Lb.divisor!==cb&&(p.vertexAttribDivisorANGLE(Ja,cb),Lb.divisor=cb)}else if(Lb.buffer&&(R.disableVertexAttribArray(Ja),Lb.buffer=null),Lb.x!==Rb||Lb.y!==xa||Lb.z!==vd||Lb.w!==Ib)R.vertexAttrib4f(Ja,Rb,xa,vd,Ib),Lb.x=Rb,Lb.y=xa,Lb.z=vd,Lb.w=Ib;K.buffer=r.positionFractBuffer;gb=!1;ya=null;fc=0;Ea=!1;ob=nb=0;Ua=1;Va=0;oc=5126;Jb=Ta=uc=gd=0;Vb(K)?(gb=!0,ya=pa.createStream(34962,K),oc=ya.dtype):(ya=pa.getBuffer(K))?oc=ya.dtype:"constant"in K?(Ua=2,"number"===typeof K.constant?
(uc=K.constant,Ta=Jb=gd=0):(uc=0<K.constant.length?K.constant[0]:0,Ta=1<K.constant.length?K.constant[1]:0,Jb=2<K.constant.length?K.constant[2]:0,gd=3<K.constant.length?K.constant[3]:0)):(ya=Vb(K.buffer)?pa.createStream(34962,K.buffer):pa.getBuffer(K.buffer),oc="type"in K?va[K.type]:ya.dtype,Ea=!!K.normalized,ob=K.size|0,nb=K.offset|0,Va=K.stride|0,fc=K.divisor|0);Dc=I.location;Ga=kc[Dc];if(1===Ua){Ga.buffer||R.enableVertexAttribArray(Dc);xc=ob||2;if(Ga.type!==oc||Ga.size!==xc||Ga.buffer!==ya||Ga.normalized!==
Ea||Ga.offset!==nb||Ga.stride!==Va)R.bindBuffer(34962,ya.buffer),R.vertexAttribPointer(Dc,xc,oc,Ea,Va,nb),Ga.type=oc,Ga.size=xc,Ga.buffer=ya,Ga.normalized=Ea,Ga.offset=nb,Ga.stride=Va;Ga.divisor!==fc&&(p.vertexAttribDivisorANGLE(Dc,fc),Ga.divisor=fc)}else if(Ga.buffer&&(R.disableVertexAttribArray(Dc),Ga.buffer=null),Ga.x!==uc||Ga.y!==Ta||Ga.z!==Jb||Ga.w!==gd)R.vertexAttrib4f(Dc,uc,Ta,Jb,gd),Ga.x=uc,Ga.y=Ta,Ga.z=Jb,Ga.w=gd;E.buffer=r.colorBuffer;Pa=!1;Ba=null;jb=0;sb=!1;pb=xb=0;vc=1;tb=0;sd=5126;hd=
Lc=Od=tc=0;Vb(E)?(Pa=!0,Ba=pa.createStream(34962,E),sd=Ba.dtype):(Ba=pa.getBuffer(E))?sd=Ba.dtype:"constant"in E?(vc=2,"number"===typeof E.constant?(Od=E.constant,Lc=hd=tc=0):(Od=0<E.constant.length?E.constant[0]:0,Lc=1<E.constant.length?E.constant[1]:0,hd=2<E.constant.length?E.constant[2]:0,tc=3<E.constant.length?E.constant[3]:0)):(Ba=Vb(E.buffer)?pa.createStream(34962,E.buffer):pa.getBuffer(E.buffer),sd="type"in E?va[E.type]:Ba.dtype,sb=!!E.normalized,pb=E.size|0,xb=E.offset|0,tb=E.stride|0,jb=
E.divisor|0);bd=aa.location;Sb=kc[bd];if(1===vc){Sb.buffer||R.enableVertexAttribArray(bd);ac=pb||4;if(Sb.type!==sd||Sb.size!==ac||Sb.buffer!==Ba||Sb.normalized!==sb||Sb.offset!==xb||Sb.stride!==tb)R.bindBuffer(34962,Ba.buffer),R.vertexAttribPointer(bd,ac,sd,sb,tb,xb),Sb.type=sd,Sb.size=ac,Sb.buffer=Ba,Sb.normalized=sb,Sb.offset=xb,Sb.stride=tb;Sb.divisor!==jb&&(p.vertexAttribDivisorANGLE(bd,jb),Sb.divisor=jb)}else if(Sb.buffer&&(R.disableVertexAttribArray(bd),Sb.buffer=null),Sb.x!==Od||Sb.y!==Lc||
Sb.z!==hd||Sb.w!==tc)R.vertexAttrib4f(bd,Od,Lc,hd,tc),Sb.x=Od,Sb.y=Lc,Sb.z=hd,Sb.w=tc;Mb=r.scale;Ha=Mb[0];kb=Mb[1];u&&Xb===Ha&&yb===kb||(Xb=Ha,yb=kb,R.uniform2f(y.location,Ha,kb));Kb=r.scaleFract;Nb=Kb[0];jc=Kb[1];u&&gc===Nb&&Sc===jc||(gc=Nb,Sc=jc,R.uniform2f(h.location,Nb,jc));zc=r.translate;Ac=zc[0];Mc=zc[1];u&&Ec===Ac&&cd===Mc||(Ec=Ac,cd=Mc,R.uniform2f(q.location,Ac,Mc));Tc=r.translateFract;Nc=Tc[0];zb=Tc[1];u&&Gb===Nc&&Oc===zb||(Gb=Nc,Oc=zb,R.uniform2f(ca.location,Nc,zb));Hc=r.thickness;u&&Uc===
Hc||(Uc=Hc,R.uniform1f(f.location,Hc));hc=r.depth;u&&Yc===hc||(Yc=hc,R.uniform1f(F.location,hc));id=J.call(this,Na,r,u);od=id[0];Zc=id[1];wd=id[2];Xe=id[3];u&&qe===od&&Hf===Zc&&je===wd&&le===Xe||(qe=od,Hf=Zc,je=wd,le=Xe,R.uniform4f(Wa.location,od,Zc,wd,Xe));Jd=r.dashLength;u&&Hd===Jd||(Hd=Jd,R.uniform1f(L.location,Jd));kd=r.opacity;u&&Fc===kd||(Fc=kd,R.uniform1f(ea.location,kd));(pd=r.dashTexture)&&"framebuffer"===pd._reglType&&(pd=pd.color[0]);ld=pd._texture;R.uniform1i(U.location,ld.bind());fd=
r.count;0<fd?Eb?p.drawElementsInstancedANGLE(5,4,Eb.type,0<<(Eb.type-5121>>1),fd):p.drawArraysInstancedANGLE(5,0,4,fd):0>fd&&(Eb?R.drawElements(5,4,Eb.type,0<<(Eb.type-5121>>1)):R.drawArrays(5,0,4));Na.viewportWidth=Gd;Na.viewportHeight=nd;Hb&&pa.destroyStream(Da);rb&&pa.destroyStream(fb);Za&&pa.destroyStream(Aa);gb&&pa.destroyStream(ya);Pa&&pa.destroyStream(Ba);ld.unbind()}ia.dirty=!0;na.setVAO(null);g&&(b.cpuTime+=performance.now()-k)},draw:function(a){var g,u,r,w,v,t,x,n,m,T,z,D,G,B,S,Z,J,qa,V,
ba,Ka,Nd,Ge,$a,Pe,Ad,Ae,pe,Vd,be,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc,Wc,wc,eb,jd,Eb,qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb;g=ta.next;g!==ta.cur&&(g?R.bindFramebuffer(36160,g.framebuffer):R.bindFramebuffer(36160,null),ta.cur=g);if(ia.dirty){var ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb;ob=Xa.dither;
ob!==ia.dither&&(ob?R.enable(3024):R.disable(3024),ia.dither=ob);Ua=Xa.depth_func;Ua!==ia.depth_func&&(R.depthFunc(Ua),ia.depth_func=Ua);Va=ra[0];oc=ra[1];if(Va!==Tb[0]||oc!==Tb[1])R.depthRange(Va,oc),Tb[0]=Va,Tb[1]=oc;gd=Xa.depth_mask;gd!==ia.depth_mask&&(R.depthMask(gd),ia.depth_mask=gd);uc=qb[0];Ta=qb[1];Jb=qb[2];Dc=qb[3];if(uc!==ga[0]||Ta!==ga[1]||Jb!==ga[2]||Dc!==ga[3])R.colorMask(uc,Ta,Jb,Dc),ga[0]=uc,ga[1]=Ta,ga[2]=Jb,ga[3]=Dc;Ga=Xa.cull_enable;Ga!==ia.cull_enable&&(Ga?R.enable(2884):R.disable(2884),
ia.cull_enable=Ga);xc=Xa.cull_face;xc!==ia.cull_face&&(R.cullFace(xc),ia.cull_face=xc);Pa=Xa.frontFace;Pa!==ia.frontFace&&(R.frontFace(Pa),ia.frontFace=Pa);Ba=Xa.lineWidth;Ba!==ia.lineWidth&&(R.lineWidth(Ba),ia.lineWidth=Ba);jb=Xa.polygonOffset_enable;jb!==ia.polygonOffset_enable&&(jb?R.enable(32823):R.disable(32823),ia.polygonOffset_enable=jb);sb=rc[0];xb=rc[1];if(sb!==mc[0]||xb!==mc[1])R.polygonOffset(sb,xb),mc[0]=sb,mc[1]=xb;pb=Xa.sample_alpha;pb!==ia.sample_alpha&&(pb?R.enable(32926):R.disable(32926),
ia.sample_alpha=pb);vc=Xa.sample_enable;vc!==ia.sample_enable&&(vc?R.enable(32928):R.disable(32928),ia.sample_enable=vc);tb=td[0];sd=td[1];if(tb!==Bc[0]||sd!==Bc[1])R.sampleCoverage(tb,sd),Bc[0]=tb,Bc[1]=sd;tc=Xa.stencil_mask;tc!==ia.stencil_mask&&(R.stencilMask(tc),ia.stencil_mask=tc);Od=ja[0];Lc=ja[1];hd=ja[2];if(Od!==Fa[0]||Lc!==Fa[1]||hd!==Fa[2])R.stencilFunc(Od,Lc,hd),Fa[0]=Od,Fa[1]=Lc,Fa[2]=hd;bd=Zb[0];Sb=Zb[1];ac=Zb[2];Mb=Zb[3];if(bd!==M[0]||Sb!==M[1]||ac!==M[2]||Mb!==M[3])R.stencilOpSeparate(bd,
Sb,ac,Mb),M[0]=bd,M[1]=Sb,M[2]=ac,M[3]=Mb;Ha=Ab[0];Xb=Ab[1];kb=Ab[2];yb=Ab[3];if(Ha!==$c[0]||Xb!==$c[1]||kb!==$c[2]||yb!==$c[3])R.stencilOpSeparate(Ha,Xb,kb,yb),$c[0]=Ha,$c[1]=Xb,$c[2]=kb,$c[3]=yb}u=a.viewport;r=u.x|0;w=u.y|0;v="width"in u?u.width|0:Na.framebufferWidth-r;t="height"in u?u.height|0:Na.framebufferHeight-w;x=Na.viewportWidth;Na.viewportWidth=v;n=Na.viewportHeight;Na.viewportHeight=t;R.viewport(r,w,v,t);ka[0]=r;ka[1]=w;ka[2]=v;ka[3]=t;R.blendColor(0,0,0,0);Ca[0]=0;Ca[1]=0;Ca[2]=0;Ca[3]=
0;R.enable(3042);ia.blend_enable=!0;R.blendEquationSeparate(32774,32774);Wb[0]=32774;Wb[1]=32774;R.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;(m=c.call(this,Na,a,0))?R.enable(2929):R.disable(2929);ia.depth_enable=m;T=a.viewport;z=T.x|0;D=T.y|0;G="width"in T?T.width|0:Na.framebufferWidth-z;B="height"in T?T.height|0:Na.framebufferHeight-D;R.scissor(z,D,G,B);P[0]=z;P[1]=D;P[2]=G;P[3]=B;R.enable(3089);ia.scissor_enable=!0;R.disable(2960);ia.stencil_enable=!1;if(S=ia.profile)Z=
performance.now(),b.count++;R.useProgram(k.program);J=W.angle_instanced_arrays;na.setVAO(null);Y.buffer=a.positionBuffer;qa=!1;V=null;ba=0;Ka=!1;Ge=Nd=0;$a=1;Pe=0;Ad=5126;be=Vd=pe=Ae=0;Vb(Y)?(qa=!0,V=pa.createStream(34962,Y),Ad=V.dtype):(V=pa.getBuffer(Y))?Ad=V.dtype:"constant"in Y?($a=2,"number"===typeof Y.constant?(pe=Y.constant,Vd=be=Ae=0):(pe=0<Y.constant.length?Y.constant[0]:0,Vd=1<Y.constant.length?Y.constant[1]:0,be=2<Y.constant.length?Y.constant[2]:0,Ae=3<Y.constant.length?Y.constant[3]:0)):
(V=Vb(Y.buffer)?pa.createStream(34962,Y.buffer):pa.getBuffer(Y.buffer),Ad="type"in Y?va[Y.type]:V.dtype,Ka=!!Y.normalized,Ge=Y.size|0,Nd=Y.offset|0,Pe=Y.stride|0,ba=Y.divisor|0);Xd=fa.location;rd=kc[Xd];if(1===$a){rd.buffer||R.enableVertexAttribArray(Xd);md=Ge||2;if(rd.type!==Ad||rd.size!==md||rd.buffer!==V||rd.normalized!==Ka||rd.offset!==Nd||rd.stride!==Pe)R.bindBuffer(34962,V.buffer),R.vertexAttribPointer(Xd,md,Ad,Ka,Pe,Nd),rd.type=Ad,rd.size=md,rd.buffer=V,rd.normalized=Ka,rd.offset=Nd,rd.stride=
Pe;rd.divisor!==ba&&(J.vertexAttribDivisorANGLE(Xd,ba),rd.divisor=ba)}else if(rd.buffer&&(R.disableVertexAttribArray(Xd),rd.buffer=null),rd.x!==pe||rd.y!==Vd||rd.z!==be||rd.w!==Ae)R.vertexAttrib4f(Xd,pe,Vd,be,Ae),rd.x=pe,rd.y=Vd,rd.z=be,rd.w=Ae;ma.buffer=a.positionBuffer;xd=!1;dd=null;Bd=0;Vc=!1;Pc=Dd=0;Wc=1;wc=0;eb=5126;Ra=qc=Eb=jd=0;Vb(ma)?(xd=!0,dd=pa.createStream(34962,ma),eb=dd.dtype):(dd=pa.getBuffer(ma))?eb=dd.dtype:"constant"in ma?(Wc=2,"number"===typeof ma.constant?(Eb=ma.constant,qc=Ra=
jd=0):(Eb=0<ma.constant.length?ma.constant[0]:0,qc=1<ma.constant.length?ma.constant[1]:0,Ra=2<ma.constant.length?ma.constant[2]:0,jd=3<ma.constant.length?ma.constant[3]:0)):(dd=Vb(ma.buffer)?pa.createStream(34962,ma.buffer):pa.getBuffer(ma.buffer),eb="type"in ma?va[ma.type]:dd.dtype,Vc=!!ma.normalized,Pc=ma.size|0,Dd=ma.offset|0,wc=ma.stride|0,Bd=ma.divisor|0);Ic=C.location;ic=kc[Ic];if(1===Wc){ic.buffer||R.enableVertexAttribArray(Ic);sc=Pc||2;if(ic.type!==eb||ic.size!==sc||ic.buffer!==dd||ic.normalized!==
Vc||ic.offset!==Dd||ic.stride!==wc)R.bindBuffer(34962,dd.buffer),R.vertexAttribPointer(Ic,sc,eb,Vc,wc,Dd),ic.type=eb,ic.size=sc,ic.buffer=dd,ic.normalized=Vc,ic.offset=Dd,ic.stride=wc;ic.divisor!==Bd&&(J.vertexAttribDivisorANGLE(Ic,Bd),ic.divisor=Bd)}else if(ic.buffer&&(R.disableVertexAttribArray(Ic),ic.buffer=null),ic.x!==Eb||ic.y!==qc||ic.z!==Ra||ic.w!==jd)R.vertexAttrib4f(Ic,Eb,qc,Ra,jd),ic.x=Eb,ic.y=qc,ic.z=Ra,ic.w=jd;ha.buffer=a.positionFractBuffer;Gd=!1;nd=null;Jc=0;dc=!1;ad=Qc=0;bc=1;Rc=0;
Hb=5126;Ya=$b=ud=Da=0;Vb(ha)?(Gd=!0,nd=pa.createStream(34962,ha),Hb=nd.dtype):(nd=pa.getBuffer(ha))?Hb=nd.dtype:"constant"in ha?(bc=2,"number"===typeof ha.constant?(ud=ha.constant,$b=Ya=Da=0):(ud=0<ha.constant.length?ha.constant[0]:0,$b=1<ha.constant.length?ha.constant[1]:0,Ya=2<ha.constant.length?ha.constant[2]:0,Da=3<ha.constant.length?ha.constant[3]:0)):(nd=Vb(ha.buffer)?pa.createStream(34962,ha.buffer):pa.getBuffer(ha.buffer),Hb="type"in ha?va[ha.type]:nd.dtype,dc=!!ha.normalized,ad=ha.size|0,
Qc=ha.offset|0,Rc=ha.stride|0,Jc=ha.divisor|0);Bb=H.location;ab=kc[Bb];if(1===bc){ab.buffer||R.enableVertexAttribArray(Bb);ec=ad||2;if(ab.type!==Hb||ab.size!==ec||ab.buffer!==nd||ab.normalized!==dc||ab.offset!==Qc||ab.stride!==Rc)R.bindBuffer(34962,nd.buffer),R.vertexAttribPointer(Bb,ec,Hb,dc,Rc,Qc),ab.type=Hb,ab.size=ec,ab.buffer=nd,ab.normalized=dc,ab.offset=Qc,ab.stride=Rc;ab.divisor!==Jc&&(J.vertexAttribDivisorANGLE(Bb,Jc),ab.divisor=Jc)}else if(ab.buffer&&(R.disableVertexAttribArray(Bb),ab.buffer=
null),ab.x!==ud||ab.y!==$b||ab.z!==Ya||ab.w!==Da)R.vertexAttrib4f(Bb,ud,$b,Ya,Da),ab.x=ud,ab.y=$b,ab.z=Ya,ab.w=Da;K.buffer=a.positionFractBuffer;Ob=!1;Ed=null;Yb=0;Pb=!1;Qb=ed=0;Ma=1;lb=0;rb=5126;Ub=lc=Oa=fb=0;Vb(K)?(Ob=!0,Ed=pa.createStream(34962,K),rb=Ed.dtype):(Ed=pa.getBuffer(K))?rb=Ed.dtype:"constant"in K?(Ma=2,"number"===typeof K.constant?(Oa=K.constant,lc=Ub=fb=0):(Oa=0<K.constant.length?K.constant[0]:0,lc=1<K.constant.length?K.constant[1]:0,Ub=2<K.constant.length?K.constant[2]:0,fb=3<K.constant.length?
K.constant[3]:0)):(Ed=Vb(K.buffer)?pa.createStream(34962,K.buffer):pa.getBuffer(K.buffer),rb="type"in K?va[K.type]:Ed.dtype,Pb=!!K.normalized,Qb=K.size|0,ed=K.offset|0,lb=K.stride|0,Yb=K.divisor|0);Cc=I.location;bb=kc[Cc];if(1===Ma){bb.buffer||R.enableVertexAttribArray(Cc);nc=Qb||2;if(bb.type!==rb||bb.size!==nc||bb.buffer!==Ed||bb.normalized!==Pb||bb.offset!==ed||bb.stride!==lb)R.bindBuffer(34962,Ed.buffer),R.vertexAttribPointer(Cc,nc,rb,Pb,lb,ed),bb.type=rb,bb.size=nc,bb.buffer=Ed,bb.normalized=
Pb,bb.offset=ed,bb.stride=lb;bb.divisor!==Yb&&(J.vertexAttribDivisorANGLE(Cc,Yb),bb.divisor=Yb)}else if(bb.buffer&&(R.disableVertexAttribArray(Cc),bb.buffer=null),bb.x!==Oa||bb.y!==lc||bb.z!==Ub||bb.w!==fb)R.vertexAttrib4f(Cc,Oa,lc,Ub,fb),bb.x=Oa,bb.y=lc,bb.z=Ub,bb.w=fb;E.buffer=a.colorBuffer;Gc=!1;cc=null;hb=0;ib=!1;mb=wa=0;za=1;Sa=0;Za=5126;wb=La=cb=Aa=0;Vb(E)?(Gc=!0,cc=pa.createStream(34962,E),Za=cc.dtype):(cc=pa.getBuffer(E))?Za=cc.dtype:"constant"in E?(za=2,"number"===typeof E.constant?(cb=E.constant,
La=wb=Aa=0):(cb=0<E.constant.length?E.constant[0]:0,La=1<E.constant.length?E.constant[1]:0,wb=2<E.constant.length?E.constant[2]:0,Aa=3<E.constant.length?E.constant[3]:0)):(cc=Vb(E.buffer)?pa.createStream(34962,E.buffer):pa.getBuffer(E.buffer),Za="type"in E?va[E.type]:cc.dtype,ib=!!E.normalized,mb=E.size|0,wa=E.offset|0,Sa=E.stride|0,hb=E.divisor|0);vb=aa.location;Qa=kc[vb];if(1===za){Qa.buffer||R.enableVertexAttribArray(vb);Kc=mb||4;if(Qa.type!==Za||Qa.size!==Kc||Qa.buffer!==cc||Qa.normalized!==ib||
Qa.offset!==wa||Qa.stride!==Sa)R.bindBuffer(34962,cc.buffer),R.vertexAttribPointer(vb,Kc,Za,ib,Sa,wa),Qa.type=Za,Qa.size=Kc,Qa.buffer=cc,Qa.normalized=ib,Qa.offset=wa,Qa.stride=Sa;Qa.divisor!==hb&&(J.vertexAttribDivisorANGLE(vb,hb),Qa.divisor=hb)}else if(Qa.buffer&&(R.disableVertexAttribArray(vb),Qa.buffer=null),Qa.x!==cb||Qa.y!==La||Qa.z!==wb||Qa.w!==Aa)R.vertexAttrib4f(vb,cb,La,wb,Aa),Qa.x=cb,Qa.y=La,Qa.z=wb,Qa.w=Aa;Fb=la.location;Ib=kc[Fb];Ib.buffer||R.enableVertexAttribArray(Fb);if(5126!==Ib.type||
1!==Ib.size||Ib.buffer!==l||!1!==Ib.normalized||0!==Ib.offset||8!==Ib.stride)R.bindBuffer(34962,l.buffer),R.vertexAttribPointer(Fb,1,5126,!1,8,0),Ib.type=5126,Ib.size=1,Ib.buffer=l,Ib.normalized=!1,Ib.offset=0,Ib.stride=8;0!==Ib.divisor&&(J.vertexAttribDivisorANGLE(Fb,0),Ib.divisor=0);Rb=N.location;xa=kc[Rb];xa.buffer||R.enableVertexAttribArray(Rb);if(5126!==xa.type||1!==xa.size||xa.buffer!==d||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)R.bindBuffer(34962,d.buffer),R.vertexAttribPointer(Rb,
1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=d,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&(J.vertexAttribDivisorANGLE(Rb,0),xa.divisor=0);vd=a.scale;R.uniform2f(y.location,vd[0],vd[1]);Ja=a.scaleFract;R.uniform2f(h.location,Ja[0],Ja[1]);Lb=a.translate;R.uniform2f(q.location,Lb[0],Lb[1]);db=a.translateFract;R.uniform2f(ca.location,db[0],db[1]);R.uniform1f(f.location,a.thickness);R.uniform1f(F.location,a.depth);gb=p.call(this,Na,a,0);R.uniform4f(Wa.location,gb[0],gb[1],gb[2],gb[3]);
R.uniform1f(L.location,a.dashLength);R.uniform1f(ea.location,a.opacity);(ya=a.dashTexture)&&"framebuffer"===ya._reglType&&(ya=ya.color[0]);fc=ya._texture;R.uniform1i(U.location,fc.bind());(Ea=Q.elements)?R.bindBuffer(34963,Ea.buffer.buffer):na.currentVAO&&(Ea=O.getElements(na.currentVAO.elements))&&R.bindBuffer(34963,Ea.buffer.buffer);nb=a.count;0<nb?Ea?J.drawElementsInstancedANGLE(5,4,Ea.type,0<<(Ea.type-5121>>1),nb):J.drawArraysInstancedANGLE(5,0,4,nb):0>nb&&(Ea?R.drawElements(5,4,Ea.type,0<<(Ea.type-
5121>>1)):R.drawArrays(5,0,4));ia.dirty=!0;na.setVAO(null);Na.viewportWidth=x;Na.viewportHeight=n;S&&(b.cpuTime+=performance.now()-Z);qa&&pa.destroyStream(V);xd&&pa.destroyStream(dd);Gd&&pa.destroyStream(nd);Ob&&pa.destroyStream(Ed);Gc&&pa.destroyStream(cc);fc.unbind()},scope:function(a,f,h){var c,e,q,k,p,y,ca,L,C,H,B,F,P,I,S,N,M,J,U,O,R,Wa,aa,W,fa,X,ja,ka,la,ga,na,ea,rc,Fa,kc,ra,Pc,ta,td,eb,Bc,Eb,qc,Ra,Ic,ic,sc,Ab,$c,Jc,dc,Qc,ad,bc,Rc,Hb,Da,Tb,$b,Ya,Bb,ab,Ca,Ob,mc,Yb,Pb,qb,Qb,Ma,lb,rb,fb,Oa,lc,Ub,
Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,Zb,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Wb,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Hf,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,hf,$e,Re,Ne;c=a.viewport;e=c.x|0;q=c.y|0;k="width"in c?c.width|0:Na.framebufferWidth-
e;p="height"in c?c.height|0:Na.framebufferHeight-q;y=Na.viewportWidth;Na.viewportWidth=k;ca=Na.viewportHeight;Na.viewportHeight=p;L=G[0];G[0]=e;C=G[1];G[1]=q;H=G[2];G[2]=k;B=G[3];G[3]=p;F=ba[0];ba[0]=0;P=ba[1];ba[1]=0;I=ba[2];ba[2]=0;S=ba[3];ba[3]=0;N=Xa.blend_enable;Xa.blend_enable=!0;M=Ka[0];Ka[0]=32774;J=Ka[1];Ka[1]=32774;U=$a[0];$a[0]=770;O=$a[1];$a[1]=771;R=$a[2];$a[2]=773;Wa=$a[3];$a[3]=1;aa=g.call(this,Na,a,h);W=Xa.depth_enable;Xa.depth_enable=aa;fa=a.viewport;X=fa.x|0;ja=fa.y|0;ka="width"in
fa?fa.width|0:Na.framebufferWidth-X;la="height"in fa?fa.height|0:Na.framebufferHeight-ja;ga=Z[0];Z[0]=X;na=Z[1];Z[1]=ja;ea=Z[2];Z[2]=ka;rc=Z[3];Z[3]=la;Fa=Xa.scissor_enable;Xa.scissor_enable=!0;kc=Xa.stencil_enable;Xa.stencil_enable=!1;if(ra=ia.profile)Pc=performance.now(),b.count++;ta=Q.offset;Q.offset=0;td=Q.count;Q.count=4;eb=a.count;Bc=Q.instances;Q.instances=eb;Eb=Q.primitive;Q.primitive=5;qc=a.dashLength;Ra=D[23];D[23]=qc;Ic=a.dashTexture;ic=D[24];D[24]=Ic;sc=a.depth;Ab=D[22];D[22]=sc;$c=a.id;
Jc=D[31];D[31]=$c;dc=a.miterLimit;Qc=D[32];D[32]=dc;ad=u.call(this,Na,a,h);bc=D[33];D[33]=ad;Rc=a.opacity;Hb=D[10];D[10]=Rc;Da=Na.pixelRatio;Tb=D[34];D[34]=Da;$b=a.scale;Ya=D[6];D[6]=$b;Bb=a.scaleFract;ab=D[7];D[7]=Bb;Ca=a.thickness;Ob=D[21];D[21]=Ca;mc=a.translate;Yb=D[8];D[8]=mc;Pb=a.translateFract;qb=D[9];D[9]=Pb;Qb=n.call(this,Na,a,h);Ma=D[3];D[3]=Qb;Y.buffer=a.positionBuffer;lb=!1;rb=null;fb=0;Oa=!1;Ub=lc=0;Cc=1;bb=0;nc=5126;ib=hb=cc=Gc=0;Vb(Y)?(lb=!0,rb=pa.createStream(34962,Y),nc=rb.dtype):
(rb=pa.getBuffer(Y))?nc=rb.dtype:"constant"in Y?(Cc=2,"number"===typeof Y.constant?(cc=Y.constant,hb=ib=Gc=0):(cc=0<Y.constant.length?Y.constant[0]:0,hb=1<Y.constant.length?Y.constant[1]:0,ib=2<Y.constant.length?Y.constant[2]:0,Gc=3<Y.constant.length?Y.constant[3]:0)):(rb=Vb(Y.buffer)?pa.createStream(34962,Y.buffer):pa.getBuffer(Y.buffer),nc="type"in Y?va[Y.type]:rb.dtype,Oa=!!Y.normalized,Ub=Y.size|0,lc=Y.offset|0,bb=Y.stride|0,fb=Y.divisor|0);wa=w.buffer;w.buffer=rb;mb=w.divisor;w.divisor=fb;za=
w.normalized;w.normalized=Oa;Sa=w.offset;w.offset=lc;Za=w.size;w.size=Ub;Aa=w.state;w.state=Cc;cb=w.stride;w.stride=bb;La=w.type;w.type=nc;wb=w.w;w.w=Gc;vb=w.x;w.x=cc;Qa=w.y;w.y=hb;Kc=w.z;w.z=ib;ha.buffer=a.positionFractBuffer;Fb=!1;Ib=null;Rb=0;xa=!1;Ja=Zb=0;Lb=1;db=0;gb=5126;nb=Ea=fc=ya=0;Vb(ha)?(Fb=!0,Ib=pa.createStream(34962,ha),gb=Ib.dtype):(Ib=pa.getBuffer(ha))?gb=Ib.dtype:"constant"in ha?(Lb=2,"number"===typeof ha.constant?(fc=ha.constant,Ea=nb=ya=0):(fc=0<ha.constant.length?ha.constant[0]:
0,Ea=1<ha.constant.length?ha.constant[1]:0,nb=2<ha.constant.length?ha.constant[2]:0,ya=3<ha.constant.length?ha.constant[3]:0)):(Ib=Vb(ha.buffer)?pa.createStream(34962,ha.buffer):pa.getBuffer(ha.buffer),gb="type"in ha?va[ha.type]:Ib.dtype,xa=!!ha.normalized,Ja=ha.size|0,Zb=ha.offset|0,db=ha.stride|0,Rb=ha.divisor|0);ob=r.buffer;r.buffer=Ib;Ua=r.divisor;r.divisor=Rb;Va=r.normalized;r.normalized=xa;oc=r.offset;r.offset=Zb;gd=r.size;r.size=Ja;uc=r.state;r.state=Lb;Ta=r.stride;r.stride=db;Jb=r.type;r.type=
gb;Dc=r.w;r.w=ya;Ga=r.x;r.x=fc;xc=r.y;r.y=Ea;Pa=r.z;r.z=nb;ma.buffer=a.positionBuffer;Ba=!1;jb=null;sb=0;xb=!1;vc=pb=0;tb=1;sd=0;tc=5126;bd=hd=Lc=Wb=0;Vb(ma)?(Ba=!0,jb=pa.createStream(34962,ma),tc=jb.dtype):(jb=pa.getBuffer(ma))?tc=jb.dtype:"constant"in ma?(tb=2,"number"===typeof ma.constant?(Lc=ma.constant,hd=bd=Wb=0):(Lc=0<ma.constant.length?ma.constant[0]:0,hd=1<ma.constant.length?ma.constant[1]:0,bd=2<ma.constant.length?ma.constant[2]:0,Wb=3<ma.constant.length?ma.constant[3]:0)):(jb=Vb(ma.buffer)?
pa.createStream(34962,ma.buffer):pa.getBuffer(ma.buffer),tc="type"in ma?va[ma.type]:jb.dtype,xb=!!ma.normalized,vc=ma.size|0,pb=ma.offset|0,sd=ma.stride|0,sb=ma.divisor|0);Sb=x.buffer;x.buffer=jb;ac=x.divisor;x.divisor=sb;Mb=x.normalized;x.normalized=xb;Ha=x.offset;x.offset=pb;Xb=x.size;x.size=vc;kb=x.state;x.state=tb;yb=x.stride;x.stride=sd;Kb=x.type;x.type=tc;Nb=x.w;x.w=Wb;gc=x.x;x.x=Lc;jc=x.y;x.y=hd;Sc=x.z;x.z=bd;K.buffer=a.positionFractBuffer;zc=!1;Ac=null;Ec=0;Mc=!1;Tc=cd=0;Nc=1;Gb=0;zb=5126;
hc=Uc=Hc=Oc=0;Vb(K)?(zc=!0,Ac=pa.createStream(34962,K),zb=Ac.dtype):(Ac=pa.getBuffer(K))?zb=Ac.dtype:"constant"in K?(Nc=2,"number"===typeof K.constant?(Hc=K.constant,Uc=hc=Oc=0):(Hc=0<K.constant.length?K.constant[0]:0,Uc=1<K.constant.length?K.constant[1]:0,hc=2<K.constant.length?K.constant[2]:0,Oc=3<K.constant.length?K.constant[3]:0)):(Ac=Vb(K.buffer)?pa.createStream(34962,K.buffer):pa.getBuffer(K.buffer),zb="type"in K?va[K.type]:Ac.dtype,Mc=!!K.normalized,Tc=K.size|0,cd=K.offset|0,Gb=K.stride|0,
Ec=K.divisor|0);Yc=v.buffer;v.buffer=Ac;id=v.divisor;v.divisor=Ec;od=v.normalized;v.normalized=Mc;qe=v.offset;v.offset=cd;Zc=v.size;v.size=Tc;Hf=v.state;v.state=Nc;wd=v.stride;v.stride=Gb;je=v.type;v.type=zb;Xe=v.w;v.w=Oc;le=v.x;v.x=Hc;Jd=v.y;v.y=Uc;Hd=v.z;v.z=hc;E.buffer=a.colorBuffer;kd=!1;Fc=null;pd=0;ld=!1;qd=fd=0;Fd=1;yd=0;te=5126;ee=me=Ye=xe=0;Vb(E)?(kd=!0,Fc=pa.createStream(34962,E),te=Fc.dtype):(Fc=pa.getBuffer(E))?te=Fc.dtype:"constant"in E?(Fd=2,"number"===typeof E.constant?(Ye=E.constant,
me=ee=xe=0):(Ye=0<E.constant.length?E.constant[0]:0,me=1<E.constant.length?E.constant[1]:0,ee=2<E.constant.length?E.constant[2]:0,xe=3<E.constant.length?E.constant[3]:0)):(Fc=Vb(E.buffer)?pa.createStream(34962,E.buffer):pa.getBuffer(E.buffer),te="type"in E?va[E.type]:Fc.dtype,ld=!!E.normalized,qd=E.size|0,fd=E.offset|0,yd=E.stride|0,pd=E.divisor|0);ce=t.buffer;t.buffer=Fc;ye=t.divisor;t.divisor=pd;$d=t.normalized;t.normalized=ld;fe=t.offset;t.offset=fd;yc=t.size;t.size=qd;Xc=t.state;t.state=Fd;re=
t.stride;t.stride=yd;ke=t.type;t.type=te;Id=t.w;t.w=xe;Md=t.x;t.x=Ye;Pd=t.y;t.y=me;Qd=t.z;t.z=ee;ge=m.buffer;m.buffer=l;ze=m.divisor;m.divisor=0;Be=m.normalized;m.normalized=!1;ne=m.offset;m.offset=0;af=m.size;m.size=0;Qe=m.state;m.state=1;Me=m.stride;m.stride=8;se=m.type;m.type=5126;Ee=m.w;m.w=0;He=m.x;m.x=0;Ie=m.y;m.y=0;Je=m.z;m.z=0;Fe=z.buffer;z.buffer=d;Kd=z.divisor;z.divisor=0;Td=z.normalized;z.normalized=!1;Yd=z.offset;z.offset=4;ae=z.size;z.size=0;Ke=z.state;z.state=1;Cd=z.stride;z.stride=
8;Rd=z.type;z.type=5126;Ce=z.w;z.w=0;Le=z.x;z.x=0;hf=z.y;z.y=0;$e=z.z;z.z=0;Re=V.vert;V.vert=20;Ne=V.frag;V.frag=19;ia.dirty=!0;f(Na,a,h);Na.viewportWidth=y;Na.viewportHeight=ca;G[0]=L;G[1]=C;G[2]=H;G[3]=B;ba[0]=F;ba[1]=P;ba[2]=I;ba[3]=S;Xa.blend_enable=N;Ka[0]=M;Ka[1]=J;$a[0]=U;$a[1]=O;$a[2]=R;$a[3]=Wa;Xa.depth_enable=W;Z[0]=ga;Z[1]=na;Z[2]=ea;Z[3]=rc;Xa.scissor_enable=Fa;Xa.stencil_enable=kc;ra&&(b.cpuTime+=performance.now()-Pc);Q.offset=ta;Q.count=td;Q.instances=Bc;Q.primitive=Eb;D[23]=Ra;D[24]=
ic;D[22]=Ab;D[31]=Jc;D[32]=Qc;D[33]=bc;D[10]=Hb;D[34]=Tb;D[6]=Ya;D[7]=ab;D[21]=Ob;D[8]=Yb;D[9]=qb;D[3]=Ma;lb&&pa.destroyStream(rb);w.buffer=wa;w.divisor=mb;w.normalized=za;w.offset=Sa;w.size=Za;w.state=Aa;w.stride=cb;w.type=La;w.w=wb;w.x=vb;w.y=Qa;w.z=Kc;Fb&&pa.destroyStream(Ib);r.buffer=ob;r.divisor=Ua;r.normalized=Va;r.offset=oc;r.size=gd;r.state=uc;r.stride=Ta;r.type=Jb;r.w=Dc;r.x=Ga;r.y=xc;r.z=Pa;Ba&&pa.destroyStream(jb);x.buffer=Sb;x.divisor=ac;x.normalized=Mb;x.offset=Ha;x.size=Xb;x.state=kb;
x.stride=yb;x.type=Kb;x.w=Nb;x.x=gc;x.y=jc;x.z=Sc;zc&&pa.destroyStream(Ac);v.buffer=Yc;v.divisor=id;v.normalized=od;v.offset=qe;v.size=Zc;v.state=Hf;v.stride=wd;v.type=je;v.w=Xe;v.x=le;v.y=Jd;v.z=Hd;kd&&pa.destroyStream(Fc);t.buffer=ce;t.divisor=ye;t.normalized=$d;t.offset=fe;t.size=yc;t.state=Xc;t.stride=re;t.type=ke;t.w=Id;t.x=Md;t.y=Pd;t.z=Qd;m.buffer=ge;m.divisor=ze;m.normalized=Be;m.offset=ne;m.size=af;m.state=Qe;m.stride=Me;m.type=se;m.w=Ee;m.x=He;m.y=Ie;m.z=Je;z.buffer=Fe;z.divisor=Kd;z.normalized=
Td;z.offset=Yd;z.size=ae;z.state=Ke;z.stride=Cd;z.type=Rd;z.w=Ce;z.x=Le;z.y=hf;z.z=$e;V.vert=Re;V.frag=Ne;ia.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa,kc,pa,Na,ia){var Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra,Tb,rc,mc,td,Bc,Z,P,ja,Fa,Ab,$c,Zb,M,G,ka,va,Y,ha,ma,K,E,da,ua,
sa,Ia,A;Q=a.attributes;O=a.buffer;W=a.context;ta=a.current;R=a.draw;Vb=a.elements;Xa=a.extensions;V=a.framebuffer;D=a.gl;na=a.isBufferArgs;ba=a.next;Ca=a.shader;Ka=a.uniforms;Wb=a.vao;$a=ba.blend_color;X=ta.blend_color;qb=ba.blend_equation;ga=ta.blend_equation;ra=ba.blend_func;Tb=ta.blend_func;rc=ba.colorMask;mc=ta.colorMask;td=ba.depth_range;Bc=ta.depth_range;Z=ba.polygonOffset_offset;P=ta.polygonOffset_offset;ja=ba.sample_coverage;Fa=ta.sample_coverage;Ab=ba.scissor_box;$c=ta.scissor_box;Zb=ba.stencil_func;
M=ta.stencil_func;G=ba.stencil_opBack;ka=ta.stencil_opBack;va=ba.stencil_opFront;Y=ta.stencil_opFront;ha=ba.viewport;ma=ta.viewport;K={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};E={divisor:1,offset:0,stride:4};da={divisor:1,offset:8,stride:8};ua={divisor:1,offset:4,stride:4};sa={divisor:1,offset:16,stride:8};Ia={divisor:1,offset:24,stride:8};A={divisor:1,offset:0,stride:8};return{batch:function(a,c){var e,g,k,p,u,r;e=V.next;e!==V.cur&&(e?D.bindFramebuffer(36160,
e.framebuffer):D.bindFramebuffer(36160,null),V.cur=e);if(ta.dirty){var w,v,t,x,n,m,T,z,B,S,qa,ha,ra,Ab,Ca,Ka,Vd,be,$a,rd,md,xd,dd,qb,Vc,Dd,Pc,Wc,wc,eb;w=ba.dither;w!==ta.dither&&(w?D.enable(3024):D.disable(3024),ta.dither=w);v=ba.depth_func;v!==ta.depth_func&&(D.depthFunc(v),ta.depth_func=v);t=td[0];x=td[1];if(t!==Bc[0]||x!==Bc[1])D.depthRange(t,x),Bc[0]=t,Bc[1]=x;n=ba.depth_mask;n!==ta.depth_mask&&(D.depthMask(n),ta.depth_mask=n);m=rc[0];T=rc[1];z=rc[2];B=rc[3];if(m!==mc[0]||T!==mc[1]||z!==mc[2]||
B!==mc[3])D.colorMask(m,T,z,B),mc[0]=m,mc[1]=T,mc[2]=z,mc[3]=B;S=ba.frontFace;S!==ta.frontFace&&(D.frontFace(S),ta.frontFace=S);qa=ba.lineWidth;qa!==ta.lineWidth&&(D.lineWidth(qa),ta.lineWidth=qa);ha=ba.polygonOffset_enable;ha!==ta.polygonOffset_enable&&(ha?D.enable(32823):D.disable(32823),ta.polygonOffset_enable=ha);ra=Z[0];Ab=Z[1];if(ra!==P[0]||Ab!==P[1])D.polygonOffset(ra,Ab),P[0]=ra,P[1]=Ab;Ca=ba.sample_alpha;Ca!==ta.sample_alpha&&(Ca?D.enable(32926):D.disable(32926),ta.sample_alpha=Ca);Ka=ba.sample_enable;
Ka!==ta.sample_enable&&(Ka?D.enable(32928):D.disable(32928),ta.sample_enable=Ka);Vd=ja[0];be=ja[1];if(Vd!==Fa[0]||be!==Fa[1])D.sampleCoverage(Vd,be),Fa[0]=Vd,Fa[1]=be;$a=ba.stencil_mask;$a!==ta.stencil_mask&&(D.stencilMask($a),ta.stencil_mask=$a);rd=Zb[0];md=Zb[1];xd=Zb[2];if(rd!==M[0]||md!==M[1]||xd!==M[2])D.stencilFunc(rd,md,xd),M[0]=rd,M[1]=md,M[2]=xd;dd=va[0];qb=va[1];Vc=va[2];Dd=va[3];if(dd!==Y[0]||qb!==Y[1]||Vc!==Y[2]||Dd!==Y[3])D.stencilOpSeparate(dd,qb,Vc,Dd),Y[0]=dd,Y[1]=qb,Y[2]=Vc,Y[3]=
Dd;Pc=G[0];Wc=G[1];wc=G[2];eb=G[3];if(Pc!==ka[0]||Wc!==ka[1]||wc!==ka[2]||eb!==ka[3])D.stencilOpSeparate(Pc,Wc,wc,eb),ka[0]=Pc,ka[1]=Wc,ka[2]=wc,ka[3]=eb}D.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;D.enable(3042);ta.blend_enable=!0;D.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;D.blendFuncSeparate(770,771,773,1);Tb[0]=770;Tb[1]=771;Tb[2]=773;Tb[3]=1;D.enable(2884);ta.cull_enable=!0;D.cullFace(1029);ta.cull_face=1029;D.enable(3089);ta.scissor_enable=!0;D.disable(2960);ta.stencil_enable=
!1;if(g=ta.profile)k=performance.now(),b.count+=c;D.useProgram(J.program);p=Xa.angle_instanced_arrays;var jd,Eb,qc,Ra,Ic;Wb.setVAO(null);jd=ea.location;Eb=Q[jd];Eb.buffer||D.enableVertexAttribArray(jd);if(5126!==Eb.type||1!==Eb.size||Eb.buffer!==l||!1!==Eb.normalized||0!==Eb.offset||8!==Eb.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(jd,1,5126,!1,8,0),Eb.type=5126,Eb.size=1,Eb.buffer=l,Eb.normalized=!1,Eb.offset=0,Eb.stride=8;0!==Eb.divisor&&(p.vertexAttribDivisorANGLE(jd,0),Eb.divisor=
0);qc=y.location;Ra=Q[qc];Ra.buffer||D.enableVertexAttribArray(qc);if(5126!==Ra.type||1!==Ra.size||Ra.buffer!==d||!1!==Ra.normalized||4!==Ra.offset||8!==Ra.stride)D.bindBuffer(34962,d.buffer),D.vertexAttribPointer(qc,1,5126,!1,8,4),Ra.type=5126,Ra.size=1,Ra.buffer=d,Ra.normalized=!1,Ra.offset=4,Ra.stride=8;0!==Ra.divisor&&(p.vertexAttribDivisorANGLE(qc,0),Ra.divisor=0);(Ic=R.elements)?D.bindBuffer(34963,Ic.buffer.buffer):Wb.currentVAO&&(Ic=Vb.getElements(Wb.currentVAO.elements))&&D.bindBuffer(34963,
Ic.buffer.buffer);for(u=0;u<c;++u){r=a[u];var ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Hf,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc;ic=r.viewport;sc=ic.x|0;Gd=
ic.y|0;nd="width"in ic?ic.width|0:W.framebufferWidth-sc;Jc="height"in ic?ic.height|0:W.framebufferHeight-Gd;dc=W.viewportWidth;W.viewportWidth=nd;Qc=W.viewportHeight;W.viewportHeight=Jc;D.viewport(sc,Gd,nd,Jc);ma[0]=sc;ma[1]=Gd;ma[2]=nd;ma[3]=Jc;(ad=fa.call(this,W,r,u))?D.enable(2929):D.disable(2929);ta.depth_enable=ad;bc=r.viewport;Rc=bc.x|0;Hb=bc.y|0;Da="width"in bc?bc.width|0:W.framebufferWidth-Rc;ud="height"in bc?bc.height|0:W.framebufferHeight-Hb;D.scissor(Rc,Hb,Da,ud);$c[0]=Rc;$c[1]=Hb;$c[2]=
Da;$c[3]=ud;da.buffer=r.positionBuffer;$b=!1;Ya=null;Bb=0;ab=!1;Ob=ec=0;Ed=1;Yb=0;Pb=5126;lb=Ma=Qb=ed=0;na(da)?($b=!0,Ya=O.createStream(34962,da),Pb=Ya.dtype):(Ya=O.getBuffer(da))?Pb=Ya.dtype:"constant"in da?(Ed=2,"number"===typeof da.constant?(Qb=da.constant,Ma=lb=ed=0):(Qb=0<da.constant.length?da.constant[0]:0,Ma=1<da.constant.length?da.constant[1]:0,lb=2<da.constant.length?da.constant[2]:0,ed=3<da.constant.length?da.constant[3]:0)):(Ya=na(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),
Pb="type"in da?K[da.type]:Ya.dtype,ab=!!da.normalized,Ob=da.size|0,ec=da.offset|0,Yb=da.stride|0,Bb=da.divisor|0);rb=aa.location;fb=Q[rb];if(1===Ed){fb.buffer||D.enableVertexAttribArray(rb);Oa=Ob||2;if(fb.type!==Pb||fb.size!==Oa||fb.buffer!==Ya||fb.normalized!==ab||fb.offset!==ec||fb.stride!==Yb)D.bindBuffer(34962,Ya.buffer),D.vertexAttribPointer(rb,Oa,Pb,ab,Yb,ec),fb.type=Pb,fb.size=Oa,fb.buffer=Ya,fb.normalized=ab,fb.offset=ec,fb.stride=Yb;fb.divisor!==Bb&&(p.vertexAttribDivisorANGLE(rb,Bb),fb.divisor=
Bb)}else if(fb.buffer&&(D.disableVertexAttribArray(rb),fb.buffer=null),fb.x!==Qb||fb.y!==Ma||fb.z!==lb||fb.w!==ed)D.vertexAttrib4f(rb,Qb,Ma,lb,ed),fb.x=Qb,fb.y=Ma,fb.z=lb,fb.w=ed;sa.buffer=r.positionBuffer;lc=!1;Ub=null;Cc=0;bb=!1;Gc=nc=0;cc=1;hb=0;ib=5126;Sa=za=mb=wa=0;na(sa)?(lc=!0,Ub=O.createStream(34962,sa),ib=Ub.dtype):(Ub=O.getBuffer(sa))?ib=Ub.dtype:"constant"in sa?(cc=2,"number"===typeof sa.constant?(mb=sa.constant,za=Sa=wa=0):(mb=0<sa.constant.length?sa.constant[0]:0,za=1<sa.constant.length?
sa.constant[1]:0,Sa=2<sa.constant.length?sa.constant[2]:0,wa=3<sa.constant.length?sa.constant[3]:0)):(Ub=na(sa.buffer)?O.createStream(34962,sa.buffer):O.getBuffer(sa.buffer),ib="type"in sa?K[sa.type]:Ub.dtype,bb=!!sa.normalized,Gc=sa.size|0,nc=sa.offset|0,hb=sa.stride|0,Cc=sa.divisor|0);Za=U.location;Aa=Q[Za];if(1===cc){Aa.buffer||D.enableVertexAttribArray(Za);cb=Gc||2;if(Aa.type!==ib||Aa.size!==cb||Aa.buffer!==Ub||Aa.normalized!==bb||Aa.offset!==nc||Aa.stride!==hb)D.bindBuffer(34962,Ub.buffer),D.vertexAttribPointer(Za,
cb,ib,bb,hb,nc),Aa.type=ib,Aa.size=cb,Aa.buffer=Ub,Aa.normalized=bb,Aa.offset=nc,Aa.stride=hb;Aa.divisor!==Cc&&(p.vertexAttribDivisorANGLE(Za,Cc),Aa.divisor=Cc)}else if(Aa.buffer&&(D.disableVertexAttribArray(Za),Aa.buffer=null),Aa.x!==mb||Aa.y!==za||Aa.z!==Sa||Aa.w!==wa)D.vertexAttrib4f(Za,mb,za,Sa,wa),Aa.x=mb,Aa.y=za,Aa.z=Sa,Aa.w=wa;Ia.buffer=r.positionBuffer;La=!1;wb=null;vb=0;Qa=!1;Fb=Kc=0;Ib=1;Rb=0;xa=5126;db=Lb=Ja=vd=0;na(Ia)?(La=!0,wb=O.createStream(34962,Ia),xa=wb.dtype):(wb=O.getBuffer(Ia))?
xa=wb.dtype:"constant"in Ia?(Ib=2,"number"===typeof Ia.constant?(Ja=Ia.constant,Lb=db=vd=0):(Ja=0<Ia.constant.length?Ia.constant[0]:0,Lb=1<Ia.constant.length?Ia.constant[1]:0,db=2<Ia.constant.length?Ia.constant[2]:0,vd=3<Ia.constant.length?Ia.constant[3]:0)):(wb=na(Ia.buffer)?O.createStream(34962,Ia.buffer):O.getBuffer(Ia.buffer),xa="type"in Ia?K[Ia.type]:wb.dtype,Qa=!!Ia.normalized,Fb=Ia.size|0,Kc=Ia.offset|0,Rb=Ia.stride|0,vb=Ia.divisor|0);gb=q.location;ya=Q[gb];if(1===Ib){ya.buffer||D.enableVertexAttribArray(gb);
fc=Fb||2;if(ya.type!==xa||ya.size!==fc||ya.buffer!==wb||ya.normalized!==Qa||ya.offset!==Kc||ya.stride!==Rb)D.bindBuffer(34962,wb.buffer),D.vertexAttribPointer(gb,fc,xa,Qa,Rb,Kc),ya.type=xa,ya.size=fc,ya.buffer=wb,ya.normalized=Qa,ya.offset=Kc,ya.stride=Rb;ya.divisor!==vb&&(p.vertexAttribDivisorANGLE(gb,vb),ya.divisor=vb)}else if(ya.buffer&&(D.disableVertexAttribArray(gb),ya.buffer=null),ya.x!==Ja||ya.y!==Lb||ya.z!==db||ya.w!==vd)D.vertexAttrib4f(gb,Ja,Lb,db,vd),ya.x=Ja,ya.y=Lb,ya.z=db,ya.w=vd;A.buffer=
r.positionBuffer;Ea=!1;nb=null;ob=0;Ua=!1;oc=Va=0;gd=1;uc=0;Ta=5126;xc=Ga=Dc=Jb=0;na(A)?(Ea=!0,nb=O.createStream(34962,A),Ta=nb.dtype):(nb=O.getBuffer(A))?Ta=nb.dtype:"constant"in A?(gd=2,"number"===typeof A.constant?(Dc=A.constant,Ga=xc=Jb=0):(Dc=0<A.constant.length?A.constant[0]:0,Ga=1<A.constant.length?A.constant[1]:0,xc=2<A.constant.length?A.constant[2]:0,Jb=3<A.constant.length?A.constant[3]:0)):(nb=na(A.buffer)?O.createStream(34962,A.buffer):O.getBuffer(A.buffer),Ta="type"in A?K[A.type]:nb.dtype,
Ua=!!A.normalized,oc=A.size|0,Va=A.offset|0,uc=A.stride|0,ob=A.divisor|0);Pa=Wa.location;Ba=Q[Pa];if(1===gd){Ba.buffer||D.enableVertexAttribArray(Pa);jb=oc||2;if(Ba.type!==Ta||Ba.size!==jb||Ba.buffer!==nb||Ba.normalized!==Ua||Ba.offset!==Va||Ba.stride!==uc)D.bindBuffer(34962,nb.buffer),D.vertexAttribPointer(Pa,jb,Ta,Ua,uc,Va),Ba.type=Ta,Ba.size=jb,Ba.buffer=nb,Ba.normalized=Ua,Ba.offset=Va,Ba.stride=uc;Ba.divisor!==ob&&(p.vertexAttribDivisorANGLE(Pa,ob),Ba.divisor=ob)}else if(Ba.buffer&&(D.disableVertexAttribArray(Pa),
Ba.buffer=null),Ba.x!==Dc||Ba.y!==Ga||Ba.z!==xc||Ba.w!==Jb)D.vertexAttrib4f(Pa,Dc,Ga,xc,Jb),Ba.x=Dc,Ba.y=Ga,Ba.z=xc,Ba.w=Jb;E.buffer=r.colorBuffer;sb=!1;xb=null;pb=0;vc=!1;sd=tb=0;tc=1;Od=0;Lc=5126;ac=Sb=bd=hd=0;na(E)?(sb=!0,xb=O.createStream(34962,E),Lc=xb.dtype):(xb=O.getBuffer(E))?Lc=xb.dtype:"constant"in E?(tc=2,"number"===typeof E.constant?(bd=E.constant,Sb=ac=hd=0):(bd=0<E.constant.length?E.constant[0]:0,Sb=1<E.constant.length?E.constant[1]:0,ac=2<E.constant.length?E.constant[2]:0,hd=3<E.constant.length?
E.constant[3]:0)):(xb=na(E.buffer)?O.createStream(34962,E.buffer):O.getBuffer(E.buffer),Lc="type"in E?K[E.type]:xb.dtype,vc=!!E.normalized,sd=E.size|0,tb=E.offset|0,Od=E.stride|0,pb=E.divisor|0);Mb=I.location;Ha=Q[Mb];if(1===tc){Ha.buffer||D.enableVertexAttribArray(Mb);Xb=sd||4;if(Ha.type!==Lc||Ha.size!==Xb||Ha.buffer!==xb||Ha.normalized!==vc||Ha.offset!==tb||Ha.stride!==Od)D.bindBuffer(34962,xb.buffer),D.vertexAttribPointer(Mb,Xb,Lc,vc,Od,tb),Ha.type=Lc,Ha.size=Xb,Ha.buffer=xb,Ha.normalized=vc,Ha.offset=
tb,Ha.stride=Od;Ha.divisor!==pb&&(p.vertexAttribDivisorANGLE(Mb,pb),Ha.divisor=pb)}else if(Ha.buffer&&(D.disableVertexAttribArray(Mb),Ha.buffer=null),Ha.x!==bd||Ha.y!==Sb||Ha.z!==ac||Ha.w!==hd)D.vertexAttrib4f(Mb,bd,Sb,ac,hd),Ha.x=bd,Ha.y=Sb,Ha.z=ac,Ha.w=hd;ua.buffer=r.colorBuffer;kb=!1;yb=null;Kb=0;Nb=!1;jc=gc=0;Sc=1;zc=0;Ac=5126;Tc=cd=Mc=Ec=0;na(ua)?(kb=!0,yb=O.createStream(34962,ua),Ac=yb.dtype):(yb=O.getBuffer(ua))?Ac=yb.dtype:"constant"in ua?(Sc=2,"number"===typeof ua.constant?(Mc=ua.constant,
cd=Tc=Ec=0):(Mc=0<ua.constant.length?ua.constant[0]:0,cd=1<ua.constant.length?ua.constant[1]:0,Tc=2<ua.constant.length?ua.constant[2]:0,Ec=3<ua.constant.length?ua.constant[3]:0)):(yb=na(ua.buffer)?O.createStream(34962,ua.buffer):O.getBuffer(ua.buffer),Ac="type"in ua?K[ua.type]:yb.dtype,Nb=!!ua.normalized,jc=ua.size|0,gc=ua.offset|0,zc=ua.stride|0,Kb=ua.divisor|0);Nc=L.location;Gb=Q[Nc];if(1===Sc){Gb.buffer||D.enableVertexAttribArray(Nc);zb=jc||4;if(Gb.type!==Ac||Gb.size!==zb||Gb.buffer!==yb||Gb.normalized!==
Nb||Gb.offset!==gc||Gb.stride!==zc)D.bindBuffer(34962,yb.buffer),D.vertexAttribPointer(Nc,zb,Ac,Nb,zc,gc),Gb.type=Ac,Gb.size=zb,Gb.buffer=yb,Gb.normalized=Nb,Gb.offset=gc,Gb.stride=zc;Gb.divisor!==Kb&&(p.vertexAttribDivisorANGLE(Nc,Kb),Gb.divisor=Kb)}else if(Gb.buffer&&(D.disableVertexAttribArray(Nc),Gb.buffer=null),Gb.x!==Mc||Gb.y!==cd||Gb.z!==Tc||Gb.w!==Ec)D.vertexAttrib4f(Nc,Mc,cd,Tc,Ec),Gb.x=Mc,Gb.y=cd,Gb.z=Tc,Gb.w=Ec;Oc=r.scale;Hc=Oc[0];hc=Oc[1];u&&Uc===Hc&&Yc===hc||(Uc=Hc,Yc=hc,D.uniform2f(kc.location,
Hc,hc));id=r.translate;od=id[0];Zc=id[1];u&&qe===od&&Hf===Zc||(qe=od,Hf=Zc,D.uniform2f(Na.location,od,Zc));wd=r.thickness;u&&je===wd||(je=wd,D.uniform1f(pa.location,wd));Xe=r.depth;u&&le===Xe||(le=Xe,D.uniform1f(N.location,Xe));Jd=H.call(this,W,r,u);Hd=Jd[0];Fc=Jd[1];ld=Jd[2];qd=Jd[3];u&&kd===Hd&&pd===Fc&&fd===ld&&Fd===qd||(kd=Hd,pd=Fc,fd=ld,Fd=qd,D.uniform4f(ia.location,Hd,Fc,ld,qd));yd=r.miterLimit;u&&te===yd||(te=yd,D.uniform1f(h.location,yd));xe=C.call(this,W,r,u);u&&Ye===xe||(Ye=xe,D.uniform1f(f.location,
xe));me=r.dashLength;u&&ee===me||(ee=me,D.uniform1f(F.location,me));ce=r.opacity;u&&ye===ce||(ye=ce,D.uniform1f(ca.location,ce));($d=r.dashTexture)&&"framebuffer"===$d._reglType&&($d=$d.color[0]);fe=$d._texture;D.uniform1i(la.location,fe.bind());yc=r.count;0<yc?Ic?p.drawElementsInstancedANGLE(5,4,Ic.type,0<<(Ic.type-5121>>1),yc):p.drawArraysInstancedANGLE(5,0,4,yc):0>yc&&(Ic?D.drawElements(5,4,Ic.type,0<<(Ic.type-5121>>1)):D.drawArrays(5,0,4));W.viewportWidth=dc;W.viewportHeight=Qc;$b&&O.destroyStream(Ya);
lc&&O.destroyStream(Ub);La&&O.destroyStream(wb);Ea&&O.destroyStream(nb);sb&&O.destroyStream(xb);kb&&O.destroyStream(yb);fe.unbind()}ta.dirty=!0;Wb.setVAO(null);g&&(b.cpuTime+=performance.now()-k)},draw:function(a){var u,r,w,v,t,x,n,m,T,z,C,H,B,S,J,fa,qa,ha,ra,Ab,Ca,Ka,$a,Vd,qb,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc,Wc,wc,eb,jd,Eb,qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,
gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd;u=V.next;u!==V.cur&&(u?D.bindFramebuffer(36160,u.framebuffer):D.bindFramebuffer(36160,null),V.cur=u);if(ta.dirty){var tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc;tc=ba.dither;tc!==ta.dither&&(tc?D.enable(3024):D.disable(3024),ta.dither=tc);Od=ba.depth_func;Od!==ta.depth_func&&(D.depthFunc(Od),ta.depth_func=Od);Lc=td[0];hd=td[1];if(Lc!==Bc[0]||hd!==Bc[1])D.depthRange(Lc,hd),Bc[0]=
Lc,Bc[1]=hd;bd=ba.depth_mask;bd!==ta.depth_mask&&(D.depthMask(bd),ta.depth_mask=bd);Sb=rc[0];ac=rc[1];Mb=rc[2];Ha=rc[3];if(Sb!==mc[0]||ac!==mc[1]||Mb!==mc[2]||Ha!==mc[3])D.colorMask(Sb,ac,Mb,Ha),mc[0]=Sb,mc[1]=ac,mc[2]=Mb,mc[3]=Ha;Xb=ba.frontFace;Xb!==ta.frontFace&&(D.frontFace(Xb),ta.frontFace=Xb);kb=ba.lineWidth;kb!==ta.lineWidth&&(D.lineWidth(kb),ta.lineWidth=kb);yb=ba.polygonOffset_enable;yb!==ta.polygonOffset_enable&&(yb?D.enable(32823):D.disable(32823),ta.polygonOffset_enable=yb);Kb=Z[0];Nb=
Z[1];if(Kb!==P[0]||Nb!==P[1])D.polygonOffset(Kb,Nb),P[0]=Kb,P[1]=Nb;gc=ba.sample_alpha;gc!==ta.sample_alpha&&(gc?D.enable(32926):D.disable(32926),ta.sample_alpha=gc);jc=ba.sample_enable;jc!==ta.sample_enable&&(jc?D.enable(32928):D.disable(32928),ta.sample_enable=jc);Sc=ja[0];zc=ja[1];if(Sc!==Fa[0]||zc!==Fa[1])D.sampleCoverage(Sc,zc),Fa[0]=Sc,Fa[1]=zc;Ac=ba.stencil_mask;Ac!==ta.stencil_mask&&(D.stencilMask(Ac),ta.stencil_mask=Ac);Ec=Zb[0];Mc=Zb[1];cd=Zb[2];if(Ec!==M[0]||Mc!==M[1]||cd!==M[2])D.stencilFunc(Ec,
Mc,cd),M[0]=Ec,M[1]=Mc,M[2]=cd;Tc=va[0];Nc=va[1];Gb=va[2];zb=va[3];if(Tc!==Y[0]||Nc!==Y[1]||Gb!==Y[2]||zb!==Y[3])D.stencilOpSeparate(Tc,Nc,Gb,zb),Y[0]=Tc,Y[1]=Nc,Y[2]=Gb,Y[3]=zb;Oc=G[0];Hc=G[1];Uc=G[2];hc=G[3];if(Oc!==ka[0]||Hc!==ka[1]||Uc!==ka[2]||hc!==ka[3])D.stencilOpSeparate(Oc,Hc,Uc,hc),ka[0]=Oc,ka[1]=Hc,ka[2]=Uc,ka[3]=hc}r=a.viewport;w=r.x|0;v=r.y|0;t="width"in r?r.width|0:W.framebufferWidth-w;x="height"in r?r.height|0:W.framebufferHeight-v;n=W.viewportWidth;W.viewportWidth=t;m=W.viewportHeight;
W.viewportHeight=x;D.viewport(w,v,t,x);ma[0]=w;ma[1]=v;ma[2]=t;ma[3]=x;D.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;D.enable(3042);ta.blend_enable=!0;D.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;D.blendFuncSeparate(770,771,773,1);Tb[0]=770;Tb[1]=771;Tb[2]=773;Tb[3]=1;D.enable(2884);ta.cull_enable=!0;D.cullFace(1029);ta.cull_face=1029;(T=c.call(this,W,a,0))?D.enable(2929):D.disable(2929);ta.depth_enable=T;z=a.viewport;C=z.x|0;H=z.y|0;B="width"in z?z.width|0:W.framebufferWidth-
C;S="height"in z?z.height|0:W.framebufferHeight-H;D.scissor(C,H,B,S);$c[0]=C;$c[1]=H;$c[2]=B;$c[3]=S;D.enable(3089);ta.scissor_enable=!0;D.disable(2960);ta.stencil_enable=!1;if(J=ta.profile)fa=performance.now(),b.count++;D.useProgram(k.program);qa=Xa.angle_instanced_arrays;Wb.setVAO(null);da.buffer=a.positionBuffer;ha=!1;ra=null;Ab=0;Ca=!1;$a=Ka=0;Vd=1;qb=0;Xd=5126;dd=xd=md=rd=0;na(da)?(ha=!0,ra=O.createStream(34962,da),Xd=ra.dtype):(ra=O.getBuffer(da))?Xd=ra.dtype:"constant"in da?(Vd=2,"number"===
typeof da.constant?(md=da.constant,xd=dd=rd=0):(md=0<da.constant.length?da.constant[0]:0,xd=1<da.constant.length?da.constant[1]:0,dd=2<da.constant.length?da.constant[2]:0,rd=3<da.constant.length?da.constant[3]:0)):(ra=na(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),Xd="type"in da?K[da.type]:ra.dtype,Ca=!!da.normalized,$a=da.size|0,Ka=da.offset|0,qb=da.stride|0,Ab=da.divisor|0);Bd=aa.location;Vc=Q[Bd];if(1===Vd){Vc.buffer||D.enableVertexAttribArray(Bd);Dd=$a||2;if(Vc.type!==Xd||
Vc.size!==Dd||Vc.buffer!==ra||Vc.normalized!==Ca||Vc.offset!==Ka||Vc.stride!==qb)D.bindBuffer(34962,ra.buffer),D.vertexAttribPointer(Bd,Dd,Xd,Ca,qb,Ka),Vc.type=Xd,Vc.size=Dd,Vc.buffer=ra,Vc.normalized=Ca,Vc.offset=Ka,Vc.stride=qb;Vc.divisor!==Ab&&(qa.vertexAttribDivisorANGLE(Bd,Ab),Vc.divisor=Ab)}else if(Vc.buffer&&(D.disableVertexAttribArray(Bd),Vc.buffer=null),Vc.x!==md||Vc.y!==xd||Vc.z!==dd||Vc.w!==rd)D.vertexAttrib4f(Bd,md,xd,dd,rd),Vc.x=md,Vc.y=xd,Vc.z=dd,Vc.w=rd;sa.buffer=a.positionBuffer;Pc=
!1;Wc=null;wc=0;eb=!1;Eb=jd=0;qc=1;Ra=0;Ic=5126;nd=Gd=sc=ic=0;na(sa)?(Pc=!0,Wc=O.createStream(34962,sa),Ic=Wc.dtype):(Wc=O.getBuffer(sa))?Ic=Wc.dtype:"constant"in sa?(qc=2,"number"===typeof sa.constant?(sc=sa.constant,Gd=nd=ic=0):(sc=0<sa.constant.length?sa.constant[0]:0,Gd=1<sa.constant.length?sa.constant[1]:0,nd=2<sa.constant.length?sa.constant[2]:0,ic=3<sa.constant.length?sa.constant[3]:0)):(Wc=na(sa.buffer)?O.createStream(34962,sa.buffer):O.getBuffer(sa.buffer),Ic="type"in sa?K[sa.type]:Wc.dtype,
eb=!!sa.normalized,Eb=sa.size|0,jd=sa.offset|0,Ra=sa.stride|0,wc=sa.divisor|0);Jc=U.location;dc=Q[Jc];if(1===qc){dc.buffer||D.enableVertexAttribArray(Jc);Qc=Eb||2;if(dc.type!==Ic||dc.size!==Qc||dc.buffer!==Wc||dc.normalized!==eb||dc.offset!==jd||dc.stride!==Ra)D.bindBuffer(34962,Wc.buffer),D.vertexAttribPointer(Jc,Qc,Ic,eb,Ra,jd),dc.type=Ic,dc.size=Qc,dc.buffer=Wc,dc.normalized=eb,dc.offset=jd,dc.stride=Ra;dc.divisor!==wc&&(qa.vertexAttribDivisorANGLE(Jc,wc),dc.divisor=wc)}else if(dc.buffer&&(D.disableVertexAttribArray(Jc),
dc.buffer=null),dc.x!==sc||dc.y!==Gd||dc.z!==nd||dc.w!==ic)D.vertexAttrib4f(Jc,sc,Gd,nd,ic),dc.x=sc,dc.y=Gd,dc.z=nd,dc.w=ic;Ia.buffer=a.positionBuffer;ad=!1;bc=null;Rc=0;Hb=!1;ud=Da=0;$b=1;Ya=0;Bb=5126;Ed=Ob=ec=ab=0;na(Ia)?(ad=!0,bc=O.createStream(34962,Ia),Bb=bc.dtype):(bc=O.getBuffer(Ia))?Bb=bc.dtype:"constant"in Ia?($b=2,"number"===typeof Ia.constant?(ec=Ia.constant,Ob=Ed=ab=0):(ec=0<Ia.constant.length?Ia.constant[0]:0,Ob=1<Ia.constant.length?Ia.constant[1]:0,Ed=2<Ia.constant.length?Ia.constant[2]:
0,ab=3<Ia.constant.length?Ia.constant[3]:0)):(bc=na(Ia.buffer)?O.createStream(34962,Ia.buffer):O.getBuffer(Ia.buffer),Bb="type"in Ia?K[Ia.type]:bc.dtype,Hb=!!Ia.normalized,ud=Ia.size|0,Da=Ia.offset|0,Ya=Ia.stride|0,Rc=Ia.divisor|0);Yb=q.location;Pb=Q[Yb];if(1===$b){Pb.buffer||D.enableVertexAttribArray(Yb);ed=ud||2;if(Pb.type!==Bb||Pb.size!==ed||Pb.buffer!==bc||Pb.normalized!==Hb||Pb.offset!==Da||Pb.stride!==Ya)D.bindBuffer(34962,bc.buffer),D.vertexAttribPointer(Yb,ed,Bb,Hb,Ya,Da),Pb.type=Bb,Pb.size=
ed,Pb.buffer=bc,Pb.normalized=Hb,Pb.offset=Da,Pb.stride=Ya;Pb.divisor!==Rc&&(qa.vertexAttribDivisorANGLE(Yb,Rc),Pb.divisor=Rc)}else if(Pb.buffer&&(D.disableVertexAttribArray(Yb),Pb.buffer=null),Pb.x!==ec||Pb.y!==Ob||Pb.z!==Ed||Pb.w!==ab)D.vertexAttrib4f(Yb,ec,Ob,Ed,ab),Pb.x=ec,Pb.y=Ob,Pb.z=Ed,Pb.w=ab;A.buffer=a.positionBuffer;Qb=!1;Ma=null;lb=0;rb=!1;Oa=fb=0;lc=1;Ub=0;Cc=5126;cc=Gc=nc=bb=0;na(A)?(Qb=!0,Ma=O.createStream(34962,A),Cc=Ma.dtype):(Ma=O.getBuffer(A))?Cc=Ma.dtype:"constant"in A?(lc=2,"number"===
typeof A.constant?(nc=A.constant,Gc=cc=bb=0):(nc=0<A.constant.length?A.constant[0]:0,Gc=1<A.constant.length?A.constant[1]:0,cc=2<A.constant.length?A.constant[2]:0,bb=3<A.constant.length?A.constant[3]:0)):(Ma=na(A.buffer)?O.createStream(34962,A.buffer):O.getBuffer(A.buffer),Cc="type"in A?K[A.type]:Ma.dtype,rb=!!A.normalized,Oa=A.size|0,fb=A.offset|0,Ub=A.stride|0,lb=A.divisor|0);hb=Wa.location;ib=Q[hb];if(1===lc){ib.buffer||D.enableVertexAttribArray(hb);wa=Oa||2;if(ib.type!==Cc||ib.size!==wa||ib.buffer!==
Ma||ib.normalized!==rb||ib.offset!==fb||ib.stride!==Ub)D.bindBuffer(34962,Ma.buffer),D.vertexAttribPointer(hb,wa,Cc,rb,Ub,fb),ib.type=Cc,ib.size=wa,ib.buffer=Ma,ib.normalized=rb,ib.offset=fb,ib.stride=Ub;ib.divisor!==lb&&(qa.vertexAttribDivisorANGLE(hb,lb),ib.divisor=lb)}else if(ib.buffer&&(D.disableVertexAttribArray(hb),ib.buffer=null),ib.x!==nc||ib.y!==Gc||ib.z!==cc||ib.w!==bb)D.vertexAttrib4f(hb,nc,Gc,cc,bb),ib.x=nc,ib.y=Gc,ib.z=cc,ib.w=bb;E.buffer=a.colorBuffer;mb=!1;za=null;Sa=0;Za=!1;cb=Aa=
0;La=1;wb=0;vb=5126;Ib=Fb=Kc=Qa=0;na(E)?(mb=!0,za=O.createStream(34962,E),vb=za.dtype):(za=O.getBuffer(E))?vb=za.dtype:"constant"in E?(La=2,"number"===typeof E.constant?(Kc=E.constant,Fb=Ib=Qa=0):(Kc=0<E.constant.length?E.constant[0]:0,Fb=1<E.constant.length?E.constant[1]:0,Ib=2<E.constant.length?E.constant[2]:0,Qa=3<E.constant.length?E.constant[3]:0)):(za=na(E.buffer)?O.createStream(34962,E.buffer):O.getBuffer(E.buffer),vb="type"in E?K[E.type]:za.dtype,Za=!!E.normalized,cb=E.size|0,Aa=E.offset|0,
wb=E.stride|0,Sa=E.divisor|0);Rb=I.location;xa=Q[Rb];if(1===La){xa.buffer||D.enableVertexAttribArray(Rb);vd=cb||4;if(xa.type!==vb||xa.size!==vd||xa.buffer!==za||xa.normalized!==Za||xa.offset!==Aa||xa.stride!==wb)D.bindBuffer(34962,za.buffer),D.vertexAttribPointer(Rb,vd,vb,Za,wb,Aa),xa.type=vb,xa.size=vd,xa.buffer=za,xa.normalized=Za,xa.offset=Aa,xa.stride=wb;xa.divisor!==Sa&&(qa.vertexAttribDivisorANGLE(Rb,Sa),xa.divisor=Sa)}else if(xa.buffer&&(D.disableVertexAttribArray(Rb),xa.buffer=null),xa.x!==
Kc||xa.y!==Fb||xa.z!==Ib||xa.w!==Qa)D.vertexAttrib4f(Rb,Kc,Fb,Ib,Qa),xa.x=Kc,xa.y=Fb,xa.z=Ib,xa.w=Qa;ua.buffer=a.colorBuffer;Ja=!1;Lb=null;db=0;gb=!1;fc=ya=0;Ea=1;nb=0;ob=5126;gd=oc=Va=Ua=0;na(ua)?(Ja=!0,Lb=O.createStream(34962,ua),ob=Lb.dtype):(Lb=O.getBuffer(ua))?ob=Lb.dtype:"constant"in ua?(Ea=2,"number"===typeof ua.constant?(Va=ua.constant,oc=gd=Ua=0):(Va=0<ua.constant.length?ua.constant[0]:0,oc=1<ua.constant.length?ua.constant[1]:0,gd=2<ua.constant.length?ua.constant[2]:0,Ua=3<ua.constant.length?
ua.constant[3]:0)):(Lb=na(ua.buffer)?O.createStream(34962,ua.buffer):O.getBuffer(ua.buffer),ob="type"in ua?K[ua.type]:Lb.dtype,gb=!!ua.normalized,fc=ua.size|0,ya=ua.offset|0,nb=ua.stride|0,db=ua.divisor|0);uc=L.location;Ta=Q[uc];if(1===Ea){Ta.buffer||D.enableVertexAttribArray(uc);Jb=fc||4;if(Ta.type!==ob||Ta.size!==Jb||Ta.buffer!==Lb||Ta.normalized!==gb||Ta.offset!==ya||Ta.stride!==nb)D.bindBuffer(34962,Lb.buffer),D.vertexAttribPointer(uc,Jb,ob,gb,nb,ya),Ta.type=ob,Ta.size=Jb,Ta.buffer=Lb,Ta.normalized=
gb,Ta.offset=ya,Ta.stride=nb;Ta.divisor!==db&&(qa.vertexAttribDivisorANGLE(uc,db),Ta.divisor=db)}else if(Ta.buffer&&(D.disableVertexAttribArray(uc),Ta.buffer=null),Ta.x!==Va||Ta.y!==oc||Ta.z!==gd||Ta.w!==Ua)D.vertexAttrib4f(uc,Va,oc,gd,Ua),Ta.x=Va,Ta.y=oc,Ta.z=gd,Ta.w=Ua;Dc=ea.location;Ga=Q[Dc];Ga.buffer||D.enableVertexAttribArray(Dc);if(5126!==Ga.type||1!==Ga.size||Ga.buffer!==l||!1!==Ga.normalized||0!==Ga.offset||8!==Ga.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(Dc,1,5126,!1,8,0),
Ga.type=5126,Ga.size=1,Ga.buffer=l,Ga.normalized=!1,Ga.offset=0,Ga.stride=8;0!==Ga.divisor&&(qa.vertexAttribDivisorANGLE(Dc,0),Ga.divisor=0);xc=y.location;Pa=Q[xc];Pa.buffer||D.enableVertexAttribArray(xc);if(5126!==Pa.type||1!==Pa.size||Pa.buffer!==d||!1!==Pa.normalized||4!==Pa.offset||8!==Pa.stride)D.bindBuffer(34962,d.buffer),D.vertexAttribPointer(xc,1,5126,!1,8,4),Pa.type=5126,Pa.size=1,Pa.buffer=d,Pa.normalized=!1,Pa.offset=4,Pa.stride=8;0!==Pa.divisor&&(qa.vertexAttribDivisorANGLE(xc,0),Pa.divisor=
0);Ba=a.scale;D.uniform2f(kc.location,Ba[0],Ba[1]);jb=a.translate;D.uniform2f(Na.location,jb[0],jb[1]);D.uniform1f(pa.location,a.thickness);D.uniform1f(N.location,a.depth);sb=p.call(this,W,a,0);D.uniform4f(ia.location,sb[0],sb[1],sb[2],sb[3]);D.uniform1f(h.location,a.miterLimit);xb=g.call(this,W,a,0);D.uniform1f(f.location,xb);D.uniform1f(F.location,a.dashLength);D.uniform1f(ca.location,a.opacity);(pb=a.dashTexture)&&"framebuffer"===pb._reglType&&(pb=pb.color[0]);vc=pb._texture;D.uniform1i(la.location,
vc.bind());(tb=R.elements)?D.bindBuffer(34963,tb.buffer.buffer):Wb.currentVAO&&(tb=Vb.getElements(Wb.currentVAO.elements))&&D.bindBuffer(34963,tb.buffer.buffer);sd=a.count;0<sd?tb?qa.drawElementsInstancedANGLE(5,4,tb.type,0<<(tb.type-5121>>1),sd):qa.drawArraysInstancedANGLE(5,0,4,sd):0>sd&&(tb?D.drawElements(5,4,tb.type,0<<(tb.type-5121>>1)):D.drawArrays(5,0,4));ta.dirty=!0;Wb.setVAO(null);W.viewportWidth=n;W.viewportHeight=m;J&&(b.cpuTime+=performance.now()-fa);ha&&O.destroyStream(ra);Pc&&O.destroyStream(Wc);
ad&&O.destroyStream(bc);Qb&&O.destroyStream(Ma);mb&&O.destroyStream(za);Ja&&O.destroyStream(Lb);vc.unbind()},scope:function(a,f,h){var c,e,q,g,k,p,y,ca,L,C,H,D,G,F,P,I,N,M,Z,J,U,Q,Wa,V,aa,fa,X,Y,ja,ka,la,ga,ea,va,rc,ma,ia,Fa,Ra,pa,kc,td,Na,Bc,$c,dc,Qc,ad,bc,Rc,Hb,Da,Tb,$b,Ya,Bb,ab,mc,Ob,Xa,Yb,Pb,Zb,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,Vb,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,Wb,tc,Od,Lc,hd,bd,Sb,ac,
Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Hf,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,hf,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;c=a.viewport;e=c.x|0;q=c.y|0;g="width"in c?c.width|0:W.framebufferWidth-e;k="height"in c?c.height|0:W.framebufferHeight-q;p=W.viewportWidth;W.viewportWidth=
g;y=W.viewportHeight;W.viewportHeight=k;ca=ha[0];ha[0]=e;L=ha[1];ha[1]=q;C=ha[2];ha[2]=g;H=ha[3];ha[3]=k;D=$a[0];$a[0]=0;G=$a[1];$a[1]=0;F=$a[2];$a[2]=0;P=$a[3];$a[3]=0;I=ba.blend_enable;ba.blend_enable=!0;N=qb[0];qb[0]=32774;M=qb[1];qb[1]=32774;Z=ra[0];ra[0]=770;J=ra[1];ra[1]=771;U=ra[2];ra[2]=773;Q=ra[3];ra[3]=1;Wa=ba.cull_enable;ba.cull_enable=!0;V=ba.cull_face;ba.cull_face=1029;aa=u.call(this,W,a,h);fa=ba.depth_enable;ba.depth_enable=aa;X=a.viewport;Y=X.x|0;ja=X.y|0;ka="width"in X?X.width|0:W.framebufferWidth-
Y;la="height"in X?X.height|0:W.framebufferHeight-ja;ga=Ab[0];Ab[0]=Y;ea=Ab[1];Ab[1]=ja;va=Ab[2];Ab[2]=ka;rc=Ab[3];Ab[3]=la;ma=ba.scissor_enable;ba.scissor_enable=!0;ia=ba.stencil_enable;ba.stencil_enable=!1;if(Fa=ta.profile)Ra=performance.now(),b.count++;pa=R.offset;R.offset=0;kc=R.count;R.count=4;td=a.count;Na=R.instances;R.instances=td;Bc=R.primitive;R.primitive=5;$c=a.dashLength;dc=Ka[23];Ka[23]=$c;Qc=a.dashTexture;ad=Ka[24];Ka[24]=Qc;bc=a.depth;Rc=Ka[22];Ka[22]=bc;Hb=a.id;Da=Ka[31];Ka[31]=Hb;
Tb=a.miterLimit;$b=Ka[32];Ka[32]=Tb;Ya=n.call(this,W,a,h);Bb=Ka[33];Ka[33]=Ya;ab=a.opacity;mc=Ka[10];Ka[10]=ab;Ob=W.pixelRatio;Xa=Ka[34];Ka[34]=Ob;Yb=a.scale;Pb=Ka[6];Ka[6]=Yb;Zb=a.scaleFract;Qb=Ka[7];Ka[7]=Zb;Ma=a.thickness;lb=Ka[21];Ka[21]=Ma;rb=a.translate;fb=Ka[8];Ka[8]=rb;Oa=a.translateFract;lc=Ka[9];Ka[9]=Oa;Ub=w.call(this,W,a,h);Cc=Ka[3];Ka[3]=Ub;E.buffer=a.colorBuffer;bb=!1;nc=null;Gc=0;cc=!1;ib=hb=0;wa=1;mb=0;za=5126;cb=Aa=Za=Sa=0;na(E)?(bb=!0,nc=O.createStream(34962,E),za=nc.dtype):(nc=
O.getBuffer(E))?za=nc.dtype:"constant"in E?(wa=2,"number"===typeof E.constant?(Za=E.constant,Aa=cb=Sa=0):(Za=0<E.constant.length?E.constant[0]:0,Aa=1<E.constant.length?E.constant[1]:0,cb=2<E.constant.length?E.constant[2]:0,Sa=3<E.constant.length?E.constant[3]:0)):(nc=na(E.buffer)?O.createStream(34962,E.buffer):O.getBuffer(E.buffer),za="type"in E?K[E.type]:nc.dtype,cc=!!E.normalized,ib=E.size|0,hb=E.offset|0,mb=E.stride|0,Gc=E.divisor|0);La=r.buffer;r.buffer=nc;wb=r.divisor;r.divisor=Gc;vb=r.normalized;
r.normalized=cc;Qa=r.offset;r.offset=hb;Kc=r.size;r.size=ib;Fb=r.state;r.state=wa;Ib=r.stride;r.stride=mb;Rb=r.type;r.type=za;xa=r.w;r.w=Sa;Vb=r.x;r.x=Za;Ja=r.y;r.y=Aa;Lb=r.z;r.z=cb;da.buffer=a.positionBuffer;db=!1;gb=null;ya=0;fc=!1;nb=Ea=0;ob=1;Ua=0;Va=5126;Ta=uc=gd=oc=0;na(da)?(db=!0,gb=O.createStream(34962,da),Va=gb.dtype):(gb=O.getBuffer(da))?Va=gb.dtype:"constant"in da?(ob=2,"number"===typeof da.constant?(gd=da.constant,uc=Ta=oc=0):(gd=0<da.constant.length?da.constant[0]:0,uc=1<da.constant.length?
da.constant[1]:0,Ta=2<da.constant.length?da.constant[2]:0,oc=3<da.constant.length?da.constant[3]:0)):(gb=na(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),Va="type"in da?K[da.type]:gb.dtype,fc=!!da.normalized,nb=da.size|0,Ea=da.offset|0,Ua=da.stride|0,ya=da.divisor|0);Jb=x.buffer;x.buffer=gb;Dc=x.divisor;x.divisor=ya;Ga=x.normalized;x.normalized=fc;xc=x.offset;x.offset=Ea;Pa=x.size;x.size=nb;Ba=x.state;x.state=ob;jb=x.stride;x.stride=Ua;sb=x.type;x.type=Va;xb=x.w;x.w=oc;pb=x.x;
x.x=gd;vc=x.y;x.y=uc;tb=x.z;x.z=Ta;ua.buffer=a.colorBuffer;Wb=!1;tc=null;Od=0;Lc=!1;bd=hd=0;Sb=1;ac=0;Mb=5126;yb=kb=Xb=Ha=0;na(ua)?(Wb=!0,tc=O.createStream(34962,ua),Mb=tc.dtype):(tc=O.getBuffer(ua))?Mb=tc.dtype:"constant"in ua?(Sb=2,"number"===typeof ua.constant?(Xb=ua.constant,kb=yb=Ha=0):(Xb=0<ua.constant.length?ua.constant[0]:0,kb=1<ua.constant.length?ua.constant[1]:0,yb=2<ua.constant.length?ua.constant[2]:0,Ha=3<ua.constant.length?ua.constant[3]:0)):(tc=na(ua.buffer)?O.createStream(34962,ua.buffer):
O.getBuffer(ua.buffer),Mb="type"in ua?K[ua.type]:tc.dtype,Lc=!!ua.normalized,bd=ua.size|0,hd=ua.offset|0,ac=ua.stride|0,Od=ua.divisor|0);Kb=v.buffer;v.buffer=tc;Nb=v.divisor;v.divisor=Od;gc=v.normalized;v.normalized=Lc;jc=v.offset;v.offset=hd;Sc=v.size;v.size=bd;zc=v.state;v.state=Sb;Ac=v.stride;v.stride=ac;Ec=v.type;v.type=Mb;Mc=v.w;v.w=Ha;cd=v.x;v.x=Xb;Tc=v.y;v.y=kb;Nc=v.z;v.z=yb;sa.buffer=a.positionBuffer;Gb=!1;zb=null;Oc=0;Hc=!1;hc=Uc=0;Yc=1;id=0;od=5126;wd=Hf=Zc=qe=0;na(sa)?(Gb=!0,zb=O.createStream(34962,
sa),od=zb.dtype):(zb=O.getBuffer(sa))?od=zb.dtype:"constant"in sa?(Yc=2,"number"===typeof sa.constant?(Zc=sa.constant,Hf=wd=qe=0):(Zc=0<sa.constant.length?sa.constant[0]:0,Hf=1<sa.constant.length?sa.constant[1]:0,wd=2<sa.constant.length?sa.constant[2]:0,qe=3<sa.constant.length?sa.constant[3]:0)):(zb=na(sa.buffer)?O.createStream(34962,sa.buffer):O.getBuffer(sa.buffer),od="type"in sa?K[sa.type]:zb.dtype,Hc=!!sa.normalized,hc=sa.size|0,Uc=sa.offset|0,id=sa.stride|0,Oc=sa.divisor|0);je=t.buffer;t.buffer=
zb;Xe=t.divisor;t.divisor=Oc;le=t.normalized;t.normalized=Hc;Jd=t.offset;t.offset=Uc;Hd=t.size;t.size=hc;kd=t.state;t.state=Yc;Fc=t.stride;t.stride=id;pd=t.type;t.type=od;ld=t.w;t.w=qe;fd=t.x;t.x=Zc;qd=t.y;t.y=Hf;Fd=t.z;t.z=wd;yd=m.buffer;m.buffer=l;te=m.divisor;m.divisor=0;xe=m.normalized;m.normalized=!1;Ye=m.offset;m.offset=0;me=m.size;m.size=0;ee=m.state;m.state=1;ce=m.stride;m.stride=8;ye=m.type;m.type=5126;$d=m.w;m.w=0;fe=m.x;m.x=0;yc=m.y;m.y=0;Xc=m.z;m.z=0;re=z.buffer;z.buffer=d;ke=z.divisor;
z.divisor=0;Id=z.normalized;z.normalized=!1;Md=z.offset;z.offset=4;Pd=z.size;z.size=0;Qd=z.state;z.state=1;ge=z.stride;z.stride=8;ze=z.type;z.type=5126;Be=z.w;z.w=0;ne=z.x;z.x=0;af=z.y;z.y=0;Qe=z.z;z.z=0;Ia.buffer=a.positionBuffer;Me=!1;se=null;Ee=0;He=!1;Je=Ie=0;Fe=1;Kd=0;Td=5126;Cd=Ke=ae=Yd=0;na(Ia)?(Me=!0,se=O.createStream(34962,Ia),Td=se.dtype):(se=O.getBuffer(Ia))?Td=se.dtype:"constant"in Ia?(Fe=2,"number"===typeof Ia.constant?(ae=Ia.constant,Ke=Cd=Yd=0):(ae=0<Ia.constant.length?Ia.constant[0]:
0,Ke=1<Ia.constant.length?Ia.constant[1]:0,Cd=2<Ia.constant.length?Ia.constant[2]:0,Yd=3<Ia.constant.length?Ia.constant[3]:0)):(se=na(Ia.buffer)?O.createStream(34962,Ia.buffer):O.getBuffer(Ia.buffer),Td="type"in Ia?K[Ia.type]:se.dtype,He=!!Ia.normalized,Je=Ia.size|0,Ie=Ia.offset|0,Kd=Ia.stride|0,Ee=Ia.divisor|0);Rd=B.buffer;B.buffer=se;Ce=B.divisor;B.divisor=Ee;Le=B.normalized;B.normalized=He;hf=B.offset;B.offset=Ie;$e=B.size;B.size=Je;Re=B.state;B.state=Fe;Ne=B.stride;B.stride=Kd;Ze=B.type;B.type=
Td;Ve=B.w;B.w=Yd;Se=B.x;B.x=ae;Te=B.y;B.y=Ke;Sd=B.z;B.z=Cd;A.buffer=a.positionBuffer;Wd=!1;Ue=null;jf=0;nf=!1;kf=ef=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;na(A)?(Wd=!0,Ue=O.createStream(34962,A),rf=Ue.dtype):(Ue=O.getBuffer(A))?rf=Ue.dtype:"constant"in A?(lf=2,"number"===typeof A.constant?(sf=A.constant,Bf=Cf=of=0):(sf=0<A.constant.length?A.constant[0]:0,Bf=1<A.constant.length?A.constant[1]:0,Cf=2<A.constant.length?A.constant[2]:0,of=3<A.constant.length?A.constant[3]:0)):(Ue=na(A.buffer)?O.createStream(34962,
A.buffer):O.getBuffer(A.buffer),rf="type"in A?K[A.type]:Ue.dtype,nf=!!A.normalized,kf=A.size|0,ef=A.offset|0,mf=A.stride|0,jf=A.divisor|0);Oe=S.buffer;S.buffer=Ue;De=S.divisor;S.divisor=jf;pf=S.normalized;S.normalized=nf;qf=S.offset;S.offset=ef;Df=S.size;S.size=kf;Gf=S.state;S.state=lf;Af=S.stride;S.stride=mf;Ef=S.type;S.type=rf;Ff=S.w;S.w=of;wf=S.x;S.x=sf;xf=S.y;S.y=Bf;vf=S.z;S.z=Cf;yf=Ca.vert;Ca.vert=36;zf=Ca.frag;Ca.frag=35;ta.dirty=!0;f(W,a,h);W.viewportWidth=p;W.viewportHeight=y;ha[0]=ca;ha[1]=
L;ha[2]=C;ha[3]=H;$a[0]=D;$a[1]=G;$a[2]=F;$a[3]=P;ba.blend_enable=I;qb[0]=N;qb[1]=M;ra[0]=Z;ra[1]=J;ra[2]=U;ra[3]=Q;ba.cull_enable=Wa;ba.cull_face=V;ba.depth_enable=fa;Ab[0]=ga;Ab[1]=ea;Ab[2]=va;Ab[3]=rc;ba.scissor_enable=ma;ba.stencil_enable=ia;Fa&&(b.cpuTime+=performance.now()-Ra);R.offset=pa;R.count=kc;R.instances=Na;R.primitive=Bc;Ka[23]=dc;Ka[24]=ad;Ka[22]=Rc;Ka[31]=Da;Ka[32]=$b;Ka[33]=Bb;Ka[10]=mc;Ka[34]=Xa;Ka[6]=Pb;Ka[7]=Qb;Ka[21]=lb;Ka[8]=fb;Ka[9]=lc;Ka[3]=Cc;bb&&O.destroyStream(nc);r.buffer=
La;r.divisor=wb;r.normalized=vb;r.offset=Qa;r.size=Kc;r.state=Fb;r.stride=Ib;r.type=Rb;r.w=xa;r.x=Vb;r.y=Ja;r.z=Lb;db&&O.destroyStream(gb);x.buffer=Jb;x.divisor=Dc;x.normalized=Ga;x.offset=xc;x.size=Pa;x.state=Ba;x.stride=jb;x.type=sb;x.w=xb;x.x=pb;x.y=vc;x.z=tb;Wb&&O.destroyStream(tc);v.buffer=Kb;v.divisor=Nb;v.normalized=gc;v.offset=jc;v.size=Sc;v.state=zc;v.stride=Ac;v.type=Ec;v.w=Mc;v.x=cd;v.y=Tc;v.z=Nc;Gb&&O.destroyStream(zb);t.buffer=je;t.divisor=Xe;t.normalized=le;t.offset=Jd;t.size=Hd;t.state=
kd;t.stride=Fc;t.type=pd;t.w=ld;t.x=fd;t.y=qd;t.z=Fd;m.buffer=yd;m.divisor=te;m.normalized=xe;m.offset=Ye;m.size=me;m.state=ee;m.stride=ce;m.type=ye;m.w=$d;m.x=fe;m.y=yc;m.z=Xc;z.buffer=re;z.divisor=ke;z.normalized=Id;z.offset=Md;z.size=Pd;z.state=Qd;z.stride=ge;z.type=ze;z.w=Be;z.x=ne;z.y=af;z.z=Qe;Me&&O.destroyStream(se);B.buffer=Rd;B.divisor=Ce;B.normalized=Le;B.offset=hf;B.size=$e;B.state=Re;B.stride=Ne;B.type=Ze;B.w=Ve;B.x=Se;B.y=Te;B.z=Sd;Wd&&O.destroyStream(Ue);S.buffer=Oe;S.divisor=De;S.normalized=
pf;S.offset=qf;S.size=Df;S.state=Gf;S.stride=Af;S.type=Ef;S.w=Ff;S.x=wf;S.y=xf;S.z=vf;Ca.vert=yf;Ca.frag=zf;ta.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S){var J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra;J=a.attributes;fa=a.buffer;H=a.context;C=a.current;I=a.draw;aa=a.elements;L=a.extensions;U=a.framebuffer;F=a.gl;la=a.isBufferArgs;N=a.next;
ea=a.shader;y=a.uniforms;h=a.vao;f=N.blend_color;q=C.blend_color;ca=N.blend_equation;Wa=C.blend_equation;kc=N.blend_func;pa=C.blend_func;Na=N.colorMask;ia=C.colorMask;Q=N.depth_range;O=C.depth_range;W=N.polygonOffset_offset;ta=C.polygonOffset_offset;R=N.sample_coverage;Vb=C.sample_coverage;Xa=N.scissor_box;V=C.scissor_box;D=N.stencil_func;na=C.stencil_func;ba=N.stencil_opBack;Ca=C.stencil_opBack;Ka=N.stencil_opFront;Wb=C.stencil_opFront;$a=N.viewport;X=C.viewport;qb={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};ra={offset:8,stride:8};return{batch:function(a,f){var d,c,e,g,k,l;d=U.next;d!==U.cur&&(d?F.bindFramebuffer(36160,d.framebuffer):F.bindFramebuffer(36160,null),U.cur=d);if(C.dirty){var p,y,ca,ea,M,G,ka,va,Y,ha,ma,K,E,da,ua,sa,Ia,A,kc,Cb,oa,Db,ub,Xa,$a,de,ie,we,ue,zd,he,ve;p=N.dither;p!==C.dither&&(p?F.enable(3024):F.disable(3024),C.dither=p);y=N.depth_func;y!==C.depth_func&&(F.depthFunc(y),C.depth_func=y);ca=Q[0];ea=
Q[1];if(ca!==O[0]||ea!==O[1])F.depthRange(ca,ea),O[0]=ca,O[1]=ea;M=N.depth_mask;M!==C.depth_mask&&(F.depthMask(M),C.depth_mask=M);G=Na[0];ka=Na[1];va=Na[2];Y=Na[3];if(G!==ia[0]||ka!==ia[1]||va!==ia[2]||Y!==ia[3])F.colorMask(G,ka,va,Y),ia[0]=G,ia[1]=ka,ia[2]=va,ia[3]=Y;ha=N.cull_enable;ha!==C.cull_enable&&(ha?F.enable(2884):F.disable(2884),C.cull_enable=ha);ma=N.cull_face;ma!==C.cull_face&&(F.cullFace(ma),C.cull_face=ma);K=N.frontFace;K!==C.frontFace&&(F.frontFace(K),C.frontFace=K);E=N.lineWidth;E!==
C.lineWidth&&(F.lineWidth(E),C.lineWidth=E);da=N.polygonOffset_enable;da!==C.polygonOffset_enable&&(da?F.enable(32823):F.disable(32823),C.polygonOffset_enable=da);ua=W[0];sa=W[1];if(ua!==ta[0]||sa!==ta[1])F.polygonOffset(ua,sa),ta[0]=ua,ta[1]=sa;Ia=N.sample_alpha;Ia!==C.sample_alpha&&(Ia?F.enable(32926):F.disable(32926),C.sample_alpha=Ia);A=N.sample_enable;A!==C.sample_enable&&(A?F.enable(32928):F.disable(32928),C.sample_enable=A);kc=R[0];Cb=R[1];if(kc!==Vb[0]||Cb!==Vb[1])F.sampleCoverage(kc,Cb),
Vb[0]=kc,Vb[1]=Cb;oa=N.stencil_mask;oa!==C.stencil_mask&&(F.stencilMask(oa),C.stencil_mask=oa);Db=D[0];ub=D[1];Xa=D[2];if(Db!==na[0]||ub!==na[1]||Xa!==na[2])F.stencilFunc(Db,ub,Xa),na[0]=Db,na[1]=ub,na[2]=Xa;$a=Ka[0];de=Ka[1];ie=Ka[2];we=Ka[3];if($a!==Wb[0]||de!==Wb[1]||ie!==Wb[2]||we!==Wb[3])F.stencilOpSeparate($a,de,ie,we),Wb[0]=$a,Wb[1]=de,Wb[2]=ie,Wb[3]=we;ue=ba[0];zd=ba[1];he=ba[2];ve=ba[3];if(ue!==Ca[0]||zd!==Ca[1]||he!==Ca[2]||ve!==Ca[3])F.stencilOpSeparate(ue,zd,he,ve),Ca[0]=ue,Ca[1]=zd,Ca[2]=
he,Ca[3]=ve}F.blendColor(0,0,0,0);q[0]=0;q[1]=0;q[2]=0;q[3]=0;F.enable(3042);C.blend_enable=!0;F.blendEquationSeparate(32774,32774);Wa[0]=32774;Wa[1]=32774;F.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;F.disable(2929);C.depth_enable=!1;F.enable(3089);C.scissor_enable=!0;F.disable(2960);C.stencil_enable=!1;if(c=C.profile)e=performance.now(),b.count+=f;F.useProgram(u.program);g=L.angle_instanced_arrays;var Ld;h.setVAO(null);Ld=I.instances;for(k=0;k<f;++k){l=a[k];var Ud,Zd,
Nd,Ge,bf,Pe,Ad,Ae,pe,Vd,be,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc,Wc,wc,eb,jd,Eb,qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb;Ud=l.viewport;Zd=Ud.x|0;Nd=Ud.y|0;Ge="width"in Ud?Ud.width|0:H.framebufferWidth-Zd;bf="height"in Ud?Ud.height|0:H.framebufferHeight-Nd;Pe=H.viewportWidth;H.viewportWidth=Ge;Ad=H.viewportHeight;H.viewportHeight=bf;F.viewport(Zd,Nd,Ge,bf);X[0]=Zd;X[1]=Nd;X[2]=Ge;X[3]=
bf;Ae=l.viewport;pe=Ae.x|0;Vd=Ae.y|0;be="width"in Ae?Ae.width|0:H.framebufferWidth-pe;Xd="height"in Ae?Ae.height|0:H.framebufferHeight-Vd;F.scissor(pe,Vd,be,Xd);V[0]=pe;V[1]=Vd;V[2]=be;V[3]=Xd;ga.buffer=l.positionBuffer;rd=!1;md=null;xd=0;dd=!1;Vc=Bd=0;Dd=1;Pc=0;Wc=5126;Eb=jd=eb=wc=0;la(ga)?(rd=!0,md=fa.createStream(34962,ga),Wc=md.dtype):(md=fa.getBuffer(ga))?Wc=md.dtype:"constant"in ga?(Dd=2,"number"===typeof ga.constant?(eb=ga.constant,jd=Eb=wc=0):(eb=0<ga.constant.length?ga.constant[0]:0,jd=1<
ga.constant.length?ga.constant[1]:0,Eb=2<ga.constant.length?ga.constant[2]:0,wc=3<ga.constant.length?ga.constant[3]:0)):(md=la(ga.buffer)?fa.createStream(34962,ga.buffer):fa.getBuffer(ga.buffer),Wc="type"in ga?qb[ga.type]:md.dtype,dd=!!ga.normalized,Vc=ga.size|0,Bd=ga.offset|0,Pc=ga.stride|0,xd=ga.divisor|0);qc=v.location;Ra=J[qc];if(1===Dd){Ra.buffer||F.enableVertexAttribArray(qc);Ic=Vc||2;if(Ra.type!==Wc||Ra.size!==Ic||Ra.buffer!==md||Ra.normalized!==dd||Ra.offset!==Bd||Ra.stride!==Pc)F.bindBuffer(34962,
md.buffer),F.vertexAttribPointer(qc,Ic,Wc,dd,Pc,Bd),Ra.type=Wc,Ra.size=Ic,Ra.buffer=md,Ra.normalized=dd,Ra.offset=Bd,Ra.stride=Pc;Ra.divisor!==xd&&(g.vertexAttribDivisorANGLE(qc,xd),Ra.divisor=xd)}else if(Ra.buffer&&(F.disableVertexAttribArray(qc),Ra.buffer=null),Ra.x!==eb||Ra.y!==jd||Ra.z!==Eb||Ra.w!==wc)F.vertexAttrib4f(qc,eb,jd,Eb,wc),Ra.x=eb,Ra.y=jd,Ra.z=Eb,Ra.w=wc;ra.buffer=l.positionFractBuffer;ic=!1;sc=null;Gd=0;nd=!1;dc=Jc=0;Qc=1;ad=0;bc=5126;ud=Da=Hb=Rc=0;la(ra)?(ic=!0,sc=fa.createStream(34962,
ra),bc=sc.dtype):(sc=fa.getBuffer(ra))?bc=sc.dtype:"constant"in ra?(Qc=2,"number"===typeof ra.constant?(Hb=ra.constant,Da=ud=Rc=0):(Hb=0<ra.constant.length?ra.constant[0]:0,Da=1<ra.constant.length?ra.constant[1]:0,ud=2<ra.constant.length?ra.constant[2]:0,Rc=3<ra.constant.length?ra.constant[3]:0)):(sc=la(ra.buffer)?fa.createStream(34962,ra.buffer):fa.getBuffer(ra.buffer),bc="type"in ra?qb[ra.type]:sc.dtype,nd=!!ra.normalized,dc=ra.size|0,Jc=ra.offset|0,ad=ra.stride|0,Gd=ra.divisor|0);$b=t.location;
Ya=J[$b];if(1===Qc){Ya.buffer||F.enableVertexAttribArray($b);Bb=dc||2;if(Ya.type!==bc||Ya.size!==Bb||Ya.buffer!==sc||Ya.normalized!==nd||Ya.offset!==Jc||Ya.stride!==ad)F.bindBuffer(34962,sc.buffer),F.vertexAttribPointer($b,Bb,bc,nd,ad,Jc),Ya.type=bc,Ya.size=Bb,Ya.buffer=sc,Ya.normalized=nd,Ya.offset=Jc,Ya.stride=ad;Ya.divisor!==Gd&&(g.vertexAttribDivisorANGLE($b,Gd),Ya.divisor=Gd)}else if(Ya.buffer&&(F.disableVertexAttribArray($b),Ya.buffer=null),Ya.x!==Hb||Ya.y!==Da||Ya.z!==ud||Ya.w!==Rc)F.vertexAttrib4f($b,
Hb,Da,ud,Rc),Ya.x=Hb,Ya.y=Da,Ya.z=ud,Ya.w=Rc;ab=l.fill;ec=ab[0];Ed=ab[1];Pb=ab[2];Qb=ab[3];k&&Ob===ec&&Yb===Ed&&ed===Pb&&Ma===Qb||(Ob=ec,Yb=Ed,ed=Pb,Ma=Qb,F.uniform4f(w.location,ec,Ed,Pb,Qb));lb=l.scale;rb=lb[0];Oa=lb[1];k&&fb===rb&&lc===Oa||(fb=rb,lc=Oa,F.uniform2f(m.location,rb,Oa));Ub=l.scaleFract;Cc=Ub[0];nc=Ub[1];k&&bb===Cc&&Gc===nc||(bb=Cc,Gc=nc,F.uniform2f(z.location,Cc,nc));cc=l.translate;hb=cc[0];wa=cc[1];k&&ib===hb&&mb===wa||(ib=hb,mb=wa,F.uniform2f(B.location,hb,wa));za=l.translateFract;
Sa=za[0];Aa=za[1];k&&Za===Sa&&cb===Aa||(Za=Sa,cb=Aa,F.uniform2f(S.location,Sa,Aa));La=l.id;k&&wb===La||(wb=La,F.uniform1f(r.location,La));vb=l.opacity;k&&Qa===vb||(Qa=vb,F.uniform1f(x.location,vb));Kc=n.call(this,H,l,k);Fb=null;(Fb=(Ib=la(Kc))?aa.createStream(Kc):aa.getElements(Kc))&&F.bindBuffer(34963,Fb.buffer.buffer);if(Rb=Fb?Fb.vertCount:-1)0<Ld?Fb?g.drawElementsInstancedANGLE(4,Rb,Fb.type,0<<(Fb.type-5121>>1),Ld):g.drawArraysInstancedANGLE(4,0,Rb,Ld):0>Ld&&(Fb?F.drawElements(4,Rb,Fb.type,0<<
(Fb.type-5121>>1)):F.drawArrays(4,0,Rb)),H.viewportWidth=Pe,H.viewportHeight=Ad,rd&&fa.destroyStream(md),ic&&fa.destroyStream(sc),Ib&&aa.destroyStream(Fb)}C.dirty=!0;h.setVAO(null);c&&(b.cpuTime+=performance.now()-e)},draw:function(a){var f,d,g,l,p,u,n,y,ca,T,ea,M,G,ka,va,Y,ha,ma,K,E,da,ua;f=U.next;f!==U.cur&&(f?F.bindFramebuffer(36160,f.framebuffer):F.bindFramebuffer(36160,null),U.cur=f);if(C.dirty){f=N.dither;f!==C.dither&&(f?F.enable(3024):F.disable(3024),C.dither=f);f=N.depth_func;f!==C.depth_func&&
(F.depthFunc(f),C.depth_func=f);f=Q[0];u=Q[1];if(f!==O[0]||u!==O[1])F.depthRange(f,u),O[0]=f,O[1]=u;f=N.depth_mask;f!==C.depth_mask&&(F.depthMask(f),C.depth_mask=f);f=Na[0];u=Na[1];d=Na[2];g=Na[3];if(f!==ia[0]||u!==ia[1]||d!==ia[2]||g!==ia[3])F.colorMask(f,u,d,g),ia[0]=f,ia[1]=u,ia[2]=d,ia[3]=g;f=N.cull_enable;f!==C.cull_enable&&(f?F.enable(2884):F.disable(2884),C.cull_enable=f);f=N.cull_face;f!==C.cull_face&&(F.cullFace(f),C.cull_face=f);f=N.frontFace;f!==C.frontFace&&(F.frontFace(f),C.frontFace=
f);f=N.lineWidth;f!==C.lineWidth&&(F.lineWidth(f),C.lineWidth=f);f=N.polygonOffset_enable;f!==C.polygonOffset_enable&&(f?F.enable(32823):F.disable(32823),C.polygonOffset_enable=f);f=W[0];u=W[1];if(f!==ta[0]||u!==ta[1])F.polygonOffset(f,u),ta[0]=f,ta[1]=u;f=N.sample_alpha;f!==C.sample_alpha&&(f?F.enable(32926):F.disable(32926),C.sample_alpha=f);f=N.sample_enable;f!==C.sample_enable&&(f?F.enable(32928):F.disable(32928),C.sample_enable=f);f=R[0];u=R[1];if(f!==Vb[0]||u!==Vb[1])F.sampleCoverage(f,u),Vb[0]=
f,Vb[1]=u;f=N.stencil_mask;f!==C.stencil_mask&&(F.stencilMask(f),C.stencil_mask=f);f=D[0];u=D[1];d=D[2];if(f!==na[0]||u!==na[1]||d!==na[2])F.stencilFunc(f,u,d),na[0]=f,na[1]=u,na[2]=d;f=Ka[0];u=Ka[1];d=Ka[2];g=Ka[3];if(f!==Wb[0]||u!==Wb[1]||d!==Wb[2]||g!==Wb[3])F.stencilOpSeparate(f,u,d,g),Wb[0]=f,Wb[1]=u,Wb[2]=d,Wb[3]=g;f=ba[0];u=ba[1];d=ba[2];g=ba[3];if(f!==Ca[0]||u!==Ca[1]||d!==Ca[2]||g!==Ca[3])F.stencilOpSeparate(f,u,d,g),Ca[0]=f,Ca[1]=u,Ca[2]=d,Ca[3]=g}f=a.viewport;d=f.x|0;g=f.y|0;l="width"in
f?f.width|0:H.framebufferWidth-d;p="height"in f?f.height|0:H.framebufferHeight-g;f=H.viewportWidth;H.viewportWidth=l;u=H.viewportHeight;H.viewportHeight=p;F.viewport(d,g,l,p);X[0]=d;X[1]=g;X[2]=l;X[3]=p;F.blendColor(0,0,0,0);q[0]=0;q[1]=0;q[2]=0;q[3]=0;F.enable(3042);C.blend_enable=!0;F.blendEquationSeparate(32774,32774);Wa[0]=32774;Wa[1]=32774;F.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;F.disable(2929);C.depth_enable=!1;p=a.viewport;d=p.x|0;g=p.y|0;l="width"in p?p.width|
0:H.framebufferWidth-d;p="height"in p?p.height|0:H.framebufferHeight-g;F.scissor(d,g,l,p);V[0]=d;V[1]=g;V[2]=l;V[3]=p;F.enable(3089);C.scissor_enable=!0;F.disable(2960);C.stencil_enable=!1;if(d=C.profile)n=performance.now(),b.count++;F.useProgram(c.program);g=L.angle_instanced_arrays;h.setVAO(null);ga.buffer=a.positionBuffer;l=!1;y=0;ca=!1;ea=T=0;M=1;G=0;ka=5126;ma=ha=Y=va=0;la(ga)?(l=!0,p=fa.createStream(34962,ga),ka=p.dtype):(p=fa.getBuffer(ga))?ka=p.dtype:"constant"in ga?(M=2,"number"===typeof ga.constant?
(Y=ga.constant,ha=ma=va=0):(Y=0<ga.constant.length?ga.constant[0]:0,ha=1<ga.constant.length?ga.constant[1]:0,ma=2<ga.constant.length?ga.constant[2]:0,va=3<ga.constant.length?ga.constant[3]:0)):(p=la(ga.buffer)?fa.createStream(34962,ga.buffer):fa.getBuffer(ga.buffer),ka="type"in ga?qb[ga.type]:p.dtype,ca=!!ga.normalized,ea=ga.size|0,T=ga.offset|0,G=ga.stride|0,y=ga.divisor|0);K=v.location;E=J[K];if(1===M){E.buffer||F.enableVertexAttribArray(K);ea=ea||2;if(E.type!==ka||E.size!==ea||E.buffer!==p||E.normalized!==
ca||E.offset!==T||E.stride!==G)F.bindBuffer(34962,p.buffer),F.vertexAttribPointer(K,ea,ka,ca,G,T),E.type=ka,E.size=ea,E.buffer=p,E.normalized=ca,E.offset=T,E.stride=G;E.divisor!==y&&(g.vertexAttribDivisorANGLE(K,y),E.divisor=y)}else if(E.buffer&&(F.disableVertexAttribArray(K),E.buffer=null),E.x!==Y||E.y!==ha||E.z!==ma||E.w!==va)F.vertexAttrib4f(K,Y,ha,ma,va),E.x=Y,E.y=ha,E.z=ma,E.w=va;ra.buffer=a.positionFractBuffer;y=!1;T=0;G=!1;va=ka=0;Y=1;K=0;E=5126;ua=da=ma=ha=0;la(ra)?(y=!0,ca=fa.createStream(34962,
ra),E=ca.dtype):(ca=fa.getBuffer(ra))?E=ca.dtype:"constant"in ra?(Y=2,"number"===typeof ra.constant?(ma=ra.constant,da=ua=ha=0):(ma=0<ra.constant.length?ra.constant[0]:0,da=1<ra.constant.length?ra.constant[1]:0,ua=2<ra.constant.length?ra.constant[2]:0,ha=3<ra.constant.length?ra.constant[3]:0)):(ca=la(ra.buffer)?fa.createStream(34962,ra.buffer):fa.getBuffer(ra.buffer),E="type"in ra?qb[ra.type]:ca.dtype,G=!!ra.normalized,va=ra.size|0,ka=ra.offset|0,K=ra.stride|0,T=ra.divisor|0);ea=t.location;M=J[ea];
if(1===Y){M.buffer||F.enableVertexAttribArray(ea);va=va||2;if(M.type!==E||M.size!==va||M.buffer!==ca||M.normalized!==G||M.offset!==ka||M.stride!==K)F.bindBuffer(34962,ca.buffer),F.vertexAttribPointer(ea,va,E,G,K,ka),M.type=E,M.size=va,M.buffer=ca,M.normalized=G,M.offset=ka,M.stride=K;M.divisor!==T&&(g.vertexAttribDivisorANGLE(ea,T),M.divisor=T)}else if(M.buffer&&(F.disableVertexAttribArray(ea),M.buffer=null),M.x!==ma||M.y!==da||M.z!==ua||M.w!==ha)F.vertexAttrib4f(ea,ma,da,ua,ha),M.x=ma,M.y=da,M.z=
ua,M.w=ha;T=a.fill;F.uniform4f(w.location,T[0],T[1],T[2],T[3]);T=a.scale;F.uniform2f(m.location,T[0],T[1]);T=a.scaleFract;F.uniform2f(z.location,T[0],T[1]);T=a.translate;F.uniform2f(B.location,T[0],T[1]);T=a.translateFract;F.uniform2f(S.location,T[0],T[1]);F.uniform1f(r.location,a.id);F.uniform1f(x.location,a.opacity);T=k.call(this,H,a,0);(T=(a=la(T))?aa.createStream(T):aa.getElements(T))&&F.bindBuffer(34963,T.buffer.buffer);if(G=T?T.vertCount:-1)ka=I.instances,0<ka?T?g.drawElementsInstancedANGLE(4,
G,T.type,0<<(T.type-5121>>1),ka):g.drawArraysInstancedANGLE(4,0,G,ka):0>ka&&(T?F.drawElements(4,G,T.type,0<<(T.type-5121>>1)):F.drawArrays(4,0,G)),C.dirty=!0,h.setVAO(null),H.viewportWidth=f,H.viewportHeight=u,d&&(b.cpuTime+=performance.now()-n),l&&fa.destroyStream(p),y&&fa.destroyStream(ca),a&&aa.destroyStream(T)},scope:function(a,h,c){var e,q,k,u,r,w,v,t,x,n,m,T,z,L,D,B,F,E,S,J,U,O,A,Q,Wa,R,V,qa,X,W,ba,na,ia,pa,ta,Na,Ca,Ka,Vb,Wb,Nd,Ge,bf,Pe,Ad,Ae,pe,Vd,be,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc,Wc,wc,eb,jd,
Eb,qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb;e=a.viewport;q=e.x|0;k=e.y|0;u="width"in e?e.width|0:H.framebufferWidth-q;r="height"in e?e.height|0:H.framebufferHeight-k;w=H.viewportWidth;H.viewportWidth=u;v=H.viewportHeight;H.viewportHeight=r;t=$a[0];$a[0]=q;x=$a[1];$a[1]=k;n=$a[2];$a[2]=u;m=$a[3];$a[3]=r;T=f[0];f[0]=0;z=f[1];f[1]=0;L=f[2];f[2]=0;D=f[3];f[3]=0;B=N.blend_enable;N.blend_enable=
!0;F=ca[0];ca[0]=32774;E=ca[1];ca[1]=32774;S=kc[0];kc[0]=770;J=kc[1];kc[1]=771;U=kc[2];kc[2]=773;O=kc[3];kc[3]=1;A=N.depth_enable;N.depth_enable=!1;Q=a.viewport;Wa=Q.x|0;R=Q.y|0;V="width"in Q?Q.width|0:H.framebufferWidth-Wa;qa="height"in Q?Q.height|0:H.framebufferHeight-R;X=Xa[0];Xa[0]=Wa;W=Xa[1];Xa[1]=R;ba=Xa[2];Xa[2]=V;na=Xa[3];Xa[3]=qa;ia=N.scissor_enable;N.scissor_enable=!0;pa=N.stencil_enable;N.stencil_enable=!1;if(ta=C.profile)Na=performance.now(),b.count++;Ca=l.call(this,H,a,c);Ka=null;Ka=
(Vb=la(Ca))?aa.createStream(Ca):aa.getElements(Ca);Wb=I.elements;I.elements=Ka;Nd=I.offset;I.offset=0;Ge=Ka?Ka.vertCount:-1;bf=I.count;I.count=Ge;Pe=I.primitive;I.primitive=4;Ad=a.fill;Ae=y[14];y[14]=Ad;pe=a.id;Vd=y[31];y[31]=pe;be=a.opacity;Xd=y[10];y[10]=be;rd=H.pixelRatio;md=y[34];y[34]=rd;xd=a.scale;dd=y[6];y[6]=xd;Bd=a.scaleFract;Vc=y[7];y[7]=Bd;Dd=a.translate;Pc=y[8];y[8]=Dd;Wc=a.translateFract;wc=y[9];y[9]=Wc;eb=d.call(this,H,a,c);jd=y[3];y[3]=eb;ga.buffer=a.positionBuffer;Eb=!1;qc=null;Ra=
0;Ic=!1;sc=ic=0;Gd=1;nd=0;Jc=5126;bc=ad=Qc=dc=0;la(ga)?(Eb=!0,qc=fa.createStream(34962,ga),Jc=qc.dtype):(qc=fa.getBuffer(ga))?Jc=qc.dtype:"constant"in ga?(Gd=2,"number"===typeof ga.constant?(Qc=ga.constant,ad=bc=dc=0):(Qc=0<ga.constant.length?ga.constant[0]:0,ad=1<ga.constant.length?ga.constant[1]:0,bc=2<ga.constant.length?ga.constant[2]:0,dc=3<ga.constant.length?ga.constant[3]:0)):(qc=la(ga.buffer)?fa.createStream(34962,ga.buffer):fa.getBuffer(ga.buffer),Jc="type"in ga?qb[ga.type]:qc.dtype,Ic=!!ga.normalized,
sc=ga.size|0,ic=ga.offset|0,nd=ga.stride|0,Ra=ga.divisor|0);Rc=p.buffer;p.buffer=qc;Hb=p.divisor;p.divisor=Ra;Da=p.normalized;p.normalized=Ic;ud=p.offset;p.offset=ic;$b=p.size;p.size=sc;Ya=p.state;p.state=Gd;Bb=p.stride;p.stride=nd;ab=p.type;p.type=Jc;ec=p.w;p.w=dc;Ob=p.x;p.x=Qc;Ed=p.y;p.y=ad;Yb=p.z;p.z=bc;ra.buffer=a.positionFractBuffer;Pb=!1;ed=null;Qb=0;Ma=!1;rb=lb=0;fb=1;Oa=0;lc=5126;nc=bb=Cc=Ub=0;la(ra)?(Pb=!0,ed=fa.createStream(34962,ra),lc=ed.dtype):(ed=fa.getBuffer(ra))?lc=ed.dtype:"constant"in
ra?(fb=2,"number"===typeof ra.constant?(Cc=ra.constant,bb=nc=Ub=0):(Cc=0<ra.constant.length?ra.constant[0]:0,bb=1<ra.constant.length?ra.constant[1]:0,nc=2<ra.constant.length?ra.constant[2]:0,Ub=3<ra.constant.length?ra.constant[3]:0)):(ed=la(ra.buffer)?fa.createStream(34962,ra.buffer):fa.getBuffer(ra.buffer),lc="type"in ra?qb[ra.type]:ed.dtype,Ma=!!ra.normalized,rb=ra.size|0,lb=ra.offset|0,Oa=ra.stride|0,Qb=ra.divisor|0);Gc=g.buffer;g.buffer=ed;cc=g.divisor;g.divisor=Qb;hb=g.normalized;g.normalized=
Ma;ib=g.offset;g.offset=lb;wa=g.size;g.size=rb;mb=g.state;g.state=fb;za=g.stride;g.stride=Oa;Sa=g.type;g.type=lc;Za=g.w;g.w=Ub;Aa=g.x;g.x=Cc;cb=g.y;g.y=bb;La=g.z;g.z=nc;wb=ea.vert;ea.vert=42;vb=ea.frag;ea.frag=41;C.dirty=!0;h(H,a,c);H.viewportWidth=w;H.viewportHeight=v;$a[0]=t;$a[1]=x;$a[2]=n;$a[3]=m;f[0]=T;f[1]=z;f[2]=L;f[3]=D;N.blend_enable=B;ca[0]=F;ca[1]=E;kc[0]=S;kc[1]=J;kc[2]=U;kc[3]=O;N.depth_enable=A;Xa[0]=X;Xa[1]=W;Xa[2]=ba;Xa[3]=na;N.scissor_enable=ia;N.stencil_enable=pa;ta&&(b.cpuTime+=
performance.now()-Na);Vb&&aa.destroyStream(Ka);I.elements=Wb;I.offset=Nd;I.count=bf;I.primitive=Pe;y[14]=Ae;y[31]=Vd;y[10]=Xd;y[34]=md;y[6]=dd;y[7]=Vc;y[8]=Pc;y[9]=wc;y[3]=jd;Eb&&fa.destroyStream(qc);p.buffer=Rc;p.divisor=Hb;p.normalized=Da;p.offset=ud;p.size=$b;p.state=Ya;p.stride=Bb;p.type=ab;p.w=ec;p.x=Ob;p.y=Ed;p.z=Yb;Pb&&fa.destroyStream(ed);g.buffer=Gc;g.divisor=cc;g.normalized=hb;g.offset=ib;g.size=wa;g.state=mb;g.stride=za;g.type=Sa;g.w=Za;g.x=Aa;g.y=cb;g.z=La;ea.vert=wb;ea.frag=vb;C.dirty=
!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra,Tb,rc,mc,td,Bc){var Z,P,ja,Fa,Ab,$c,Zb,M,G,ka,va,Y,ha,ma,K,E,da,ua,sa,Ia,A,pc,Cb,oa,Db,ub,We,oe,de,ie,we,ue,zd,he,ve,Ld,Ud,Zd,Nd;Z=a.attributes;P=a.buffer;ja=
a.context;Fa=a.current;Ab=a.draw;$c=a.elements;Zb=a.extensions;M=a.framebuffer;G=a.gl;ka=a.isBufferArgs;va=a.next;Y=a.shader;ha=a.uniforms;ma=a.vao;K=va.blend_color;E=Fa.blend_color;da=va.blend_equation;ua=Fa.blend_equation;sa=va.blend_func;Ia=Fa.blend_func;A=va.colorMask;pc=Fa.colorMask;Cb=va.depth_range;oa=Fa.depth_range;Db=va.polygonOffset_offset;ub=Fa.polygonOffset_offset;We=va.sample_coverage;oe=Fa.sample_coverage;de=va.scissor_box;ie=Fa.scissor_box;we=va.stencil_func;ue=Fa.stencil_func;zd=va.stencil_opBack;
he=Fa.stencil_opBack;ve=va.stencil_opFront;Ld=Fa.stencil_opFront;Ud=va.viewport;Zd=Fa.viewport;Nd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,f){var h,d,c,e,g,k;h=M.next;h!==M.cur&&(h?G.bindFramebuffer(36160,h.framebuffer):G.bindFramebuffer(36160,null),M.cur=h);if(Fa.dirty){var l,p,u,r,w,v,t,x,n,m,y,T,z,L,C,H,B,F,I,S,N,K,J,U,aa,qa,fa,Y,ha,ea,la,sa,Bb,ab;l=va.dither;l!==Fa.dither&&(l?G.enable(3024):G.disable(3024),Fa.dither=
l);p=da[0];u=da[1];if(p!==ua[0]||u!==ua[1])G.blendEquationSeparate(p,u),ua[0]=p,ua[1]=u;r=va.depth_func;r!==Fa.depth_func&&(G.depthFunc(r),Fa.depth_func=r);w=Cb[0];v=Cb[1];if(w!==oa[0]||v!==oa[1])G.depthRange(w,v),oa[0]=w,oa[1]=v;t=va.depth_mask;t!==Fa.depth_mask&&(G.depthMask(t),Fa.depth_mask=t);x=A[0];n=A[1];m=A[2];y=A[3];if(x!==pc[0]||n!==pc[1]||m!==pc[2]||y!==pc[3])G.colorMask(x,n,m,y),pc[0]=x,pc[1]=n,pc[2]=m,pc[3]=y;T=va.cull_enable;T!==Fa.cull_enable&&(T?G.enable(2884):G.disable(2884),Fa.cull_enable=
T);z=va.cull_face;z!==Fa.cull_face&&(G.cullFace(z),Fa.cull_face=z);L=va.frontFace;L!==Fa.frontFace&&(G.frontFace(L),Fa.frontFace=L);C=va.lineWidth;C!==Fa.lineWidth&&(G.lineWidth(C),Fa.lineWidth=C);H=va.polygonOffset_enable;H!==Fa.polygonOffset_enable&&(H?G.enable(32823):G.disable(32823),Fa.polygonOffset_enable=H);B=Db[0];F=Db[1];if(B!==ub[0]||F!==ub[1])G.polygonOffset(B,F),ub[0]=B,ub[1]=F;I=va.sample_alpha;I!==Fa.sample_alpha&&(I?G.enable(32926):G.disable(32926),Fa.sample_alpha=I);S=va.sample_enable;
S!==Fa.sample_enable&&(S?G.enable(32928):G.disable(32928),Fa.sample_enable=S);N=We[0];K=We[1];if(N!==oe[0]||K!==oe[1])G.sampleCoverage(N,K),oe[0]=N,oe[1]=K;J=va.stencil_mask;J!==Fa.stencil_mask&&(G.stencilMask(J),Fa.stencil_mask=J);U=we[0];aa=we[1];qa=we[2];if(U!==ue[0]||aa!==ue[1]||qa!==ue[2])G.stencilFunc(U,aa,qa),ue[0]=U,ue[1]=aa,ue[2]=qa;fa=ve[0];Y=ve[1];ha=ve[2];ea=ve[3];if(fa!==Ld[0]||Y!==Ld[1]||ha!==Ld[2]||ea!==Ld[3])G.stencilOpSeparate(fa,Y,ha,ea),Ld[0]=fa,Ld[1]=Y,Ld[2]=ha,Ld[3]=ea;la=zd[0];
sa=zd[1];Bb=zd[2];ab=zd[3];if(la!==he[0]||sa!==he[1]||Bb!==he[2]||ab!==he[3])G.stencilOpSeparate(la,sa,Bb,ab),he[0]=la,he[1]=sa,he[2]=Bb,he[3]=ab}G.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;G.enable(3042);Fa.blend_enable=!0;G.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;G.disable(2929);Fa.depth_enable=!1;G.enable(3089);Fa.scissor_enable=!0;G.disable(2960);Fa.stencil_enable=!1;if(d=Fa.profile)c=performance.now(),b.count+=f;G.useProgram(q.program);e=Zb.angle_instanced_arrays;
var ec;ma.setVAO(null);G.uniform1i(D.location,!1);G.uniform1i(Wb.location,ta.bind());ec=Ab.instances;for(g=0;g<f;++g){k=a[g];var Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Ud,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,de,me,ee,ce,ye,$d,fe,
yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,hf,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf;Ob=k.viewport;Ed=Ob.x|0;Yb=Ob.y|0;Pb="width"in Ob?Ob.width|0:ja.framebufferWidth-Ed;ed="height"in Ob?Ob.height|0:ja.framebufferHeight-Yb;Qb=ja.viewportWidth;ja.viewportWidth=Pb;Ma=ja.viewportHeight;ja.viewportHeight=ed;G.viewport(Ed,Yb,Pb,ed);Zd[0]=Ed;Zd[1]=Yb;Zd[2]=Pb;
Zd[3]=ed;lb=k.viewport;rb=lb.x|0;fb=lb.y|0;Oa="width"in lb?lb.width|0:ja.framebufferWidth-rb;lc="height"in lb?lb.height|0:ja.framebufferHeight-fb;G.scissor(rb,fb,Oa,lc);ie[0]=rb;ie[1]=fb;ie[2]=Oa;ie[3]=lc;Ub=ca.call(this,ja,k,g);Cc=!1;bb=null;nc=0;Gc=!1;hb=cc=0;ib=1;wa=0;mb=5126;Aa=Za=Sa=za=0;ka(Ub)?(Cc=!0,bb=P.createStream(34962,Ub),mb=bb.dtype):(bb=P.getBuffer(Ub))?mb=bb.dtype:"constant"in Ub?(ib=2,"number"===typeof Ub.constant?(Sa=Ub.constant,Za=Aa=za=0):(Sa=0<Ub.constant.length?Ub.constant[0]:
0,Za=1<Ub.constant.length?Ub.constant[1]:0,Aa=2<Ub.constant.length?Ub.constant[2]:0,za=3<Ub.constant.length?Ub.constant[3]:0)):(bb=ka(Ub.buffer)?P.createStream(34962,Ub.buffer):P.getBuffer(Ub.buffer),mb="type"in Ub?Nd[Ub.type]:bb.dtype,Gc=!!Ub.normalized,hb=Ub.size|0,cc=Ub.offset|0,wa=Ub.stride|0,nc=Ub.divisor|0);cb=rc.location;La=Z[cb];if(1===ib){La.buffer||G.enableVertexAttribArray(cb);wb=hb||1;if(La.type!==mb||La.size!==wb||La.buffer!==bb||La.normalized!==Gc||La.offset!==cc||La.stride!==wa)G.bindBuffer(34962,
bb.buffer),G.vertexAttribPointer(cb,wb,mb,Gc,wa,cc),La.type=mb,La.size=wb,La.buffer=bb,La.normalized=Gc,La.offset=cc,La.stride=wa;La.divisor!==nc&&(e.vertexAttribDivisorANGLE(cb,nc),La.divisor=nc)}else if(La.buffer&&(G.disableVertexAttribArray(cb),La.buffer=null),La.x!==Sa||La.y!==Za||La.z!==Aa||La.w!==za)G.vertexAttrib4f(cb,Sa,Za,Aa,za),La.x=Sa,La.y=Za,La.z=Aa,La.w=za;vb=Wa.call(this,ja,k,g);Qa=!1;Kc=null;Fb=0;Ib=!1;xa=Rb=0;vd=1;Ja=0;Lb=5126;fc=ya=gb=db=0;ka(vb)?(Qa=!0,Kc=P.createStream(34962,vb),
Lb=Kc.dtype):(Kc=P.getBuffer(vb))?Lb=Kc.dtype:"constant"in vb?(vd=2,"number"===typeof vb.constant?(gb=vb.constant,ya=fc=db=0):(gb=0<vb.constant.length?vb.constant[0]:0,ya=1<vb.constant.length?vb.constant[1]:0,fc=2<vb.constant.length?vb.constant[2]:0,db=3<vb.constant.length?vb.constant[3]:0)):(Kc=ka(vb.buffer)?P.createStream(34962,vb.buffer):P.getBuffer(vb.buffer),Lb="type"in vb?Nd[vb.type]:Kc.dtype,Ib=!!vb.normalized,xa=vb.size|0,Rb=vb.offset|0,Ja=vb.stride|0,Fb=vb.divisor|0);Ea=td.location;nb=Z[Ea];
if(1===vd){nb.buffer||G.enableVertexAttribArray(Ea);ob=xa||1;if(nb.type!==Lb||nb.size!==ob||nb.buffer!==Kc||nb.normalized!==Ib||nb.offset!==Rb||nb.stride!==Ja)G.bindBuffer(34962,Kc.buffer),G.vertexAttribPointer(Ea,ob,Lb,Ib,Ja,Rb),nb.type=Lb,nb.size=ob,nb.buffer=Kc,nb.normalized=Ib,nb.offset=Rb,nb.stride=Ja;nb.divisor!==Fb&&(e.vertexAttribDivisorANGLE(Ea,Fb),nb.divisor=Fb)}else if(nb.buffer&&(G.disableVertexAttribArray(Ea),nb.buffer=null),nb.x!==gb||nb.y!==ya||nb.z!==fc||nb.w!==db)G.vertexAttrib4f(Ea,
gb,ya,fc,db),nb.x=gb,nb.y=ya,nb.z=fc,nb.w=db;Ua=kc.call(this,ja,k,g);Va=!1;oc=null;gd=0;uc=!1;Jb=Ta=0;Dc=1;Ga=0;xc=5126;sb=jb=Ba=Pa=0;ka(Ua)?(Va=!0,oc=P.createStream(34962,Ua),xc=oc.dtype):(oc=P.getBuffer(Ua))?xc=oc.dtype:"constant"in Ua?(Dc=2,"number"===typeof Ua.constant?(Ba=Ua.constant,jb=sb=Pa=0):(Ba=0<Ua.constant.length?Ua.constant[0]:0,jb=1<Ua.constant.length?Ua.constant[1]:0,sb=2<Ua.constant.length?Ua.constant[2]:0,Pa=3<Ua.constant.length?Ua.constant[3]:0)):(oc=ka(Ua.buffer)?P.createStream(34962,
Ua.buffer):P.getBuffer(Ua.buffer),xc="type"in Ua?Nd[Ua.type]:oc.dtype,uc=!!Ua.normalized,Jb=Ua.size|0,Ta=Ua.offset|0,Ga=Ua.stride|0,gd=Ua.divisor|0);xb=mc.location;pb=Z[xb];if(1===Dc){pb.buffer||G.enableVertexAttribArray(xb);vc=Jb||1;if(pb.type!==xc||pb.size!==vc||pb.buffer!==oc||pb.normalized!==uc||pb.offset!==Ta||pb.stride!==Ga)G.bindBuffer(34962,oc.buffer),G.vertexAttribPointer(xb,vc,xc,uc,Ga,Ta),pb.type=xc,pb.size=vc,pb.buffer=oc,pb.normalized=uc,pb.offset=Ta,pb.stride=Ga;pb.divisor!==gd&&(e.vertexAttribDivisorANGLE(xb,
gd),pb.divisor=gd)}else if(pb.buffer&&(G.disableVertexAttribArray(xb),pb.buffer=null),pb.x!==Ba||pb.y!==jb||pb.z!==sb||pb.w!==Pa)G.vertexAttrib4f(xb,Ba,jb,sb,Pa),pb.x=Ba,pb.y=jb,pb.z=sb,pb.w=Pa;tb=pa.call(this,ja,k,g);sd=!1;tc=null;Od=0;Lc=!1;bd=hd=0;Sb=1;ac=0;Mb=5126;yb=kb=Xb=Ha=0;ka(tb)?(sd=!0,tc=P.createStream(34962,tb),Mb=tc.dtype):(tc=P.getBuffer(tb))?Mb=tc.dtype:"constant"in tb?(Sb=2,"number"===typeof tb.constant?(Xb=tb.constant,kb=yb=Ha=0):(Xb=0<tb.constant.length?tb.constant[0]:0,kb=1<tb.constant.length?
tb.constant[1]:0,yb=2<tb.constant.length?tb.constant[2]:0,Ha=3<tb.constant.length?tb.constant[3]:0)):(tc=ka(tb.buffer)?P.createStream(34962,tb.buffer):P.getBuffer(tb.buffer),Mb="type"in tb?Nd[tb.type]:tc.dtype,Lc=!!tb.normalized,bd=tb.size|0,hd=tb.offset|0,ac=tb.stride|0,Od=tb.divisor|0);Kb=Bc.location;Nb=Z[Kb];if(1===Sb){Nb.buffer||G.enableVertexAttribArray(Kb);gc=bd||1;if(Nb.type!==Mb||Nb.size!==gc||Nb.buffer!==tc||Nb.normalized!==Lc||Nb.offset!==hd||Nb.stride!==ac)G.bindBuffer(34962,tc.buffer),
G.vertexAttribPointer(Kb,gc,Mb,Lc,ac,hd),Nb.type=Mb,Nb.size=gc,Nb.buffer=tc,Nb.normalized=Lc,Nb.offset=hd,Nb.stride=ac;Nb.divisor!==Od&&(e.vertexAttribDivisorANGLE(Kb,Od),Nb.divisor=Od)}else if(Nb.buffer&&(G.disableVertexAttribArray(Kb),Nb.buffer=null),Nb.x!==Xb||Nb.y!==kb||Nb.z!==yb||Nb.w!==Ha)G.vertexAttrib4f(Kb,Xb,kb,yb,Ha),Nb.x=Xb,Nb.y=kb,Nb.z=yb,Nb.w=Ha;jc=Na.call(this,ja,k,g);Sc=!1;zc=null;Ac=0;Ec=!1;cd=Mc=0;Tc=1;Nc=0;Gb=5126;Uc=Hc=Oc=zb=0;ka(jc)?(Sc=!0,zc=P.createStream(34962,jc),Gb=zc.dtype):
(zc=P.getBuffer(jc))?Gb=zc.dtype:"constant"in jc?(Tc=2,"number"===typeof jc.constant?(Oc=jc.constant,Hc=Uc=zb=0):(Oc=0<jc.constant.length?jc.constant[0]:0,Hc=1<jc.constant.length?jc.constant[1]:0,Uc=2<jc.constant.length?jc.constant[2]:0,zb=3<jc.constant.length?jc.constant[3]:0)):(zc=ka(jc.buffer)?P.createStream(34962,jc.buffer):P.getBuffer(jc.buffer),Gb="type"in jc?Nd[jc.type]:zc.dtype,Ec=!!jc.normalized,cd=jc.size|0,Mc=jc.offset|0,Nc=jc.stride|0,Ac=jc.divisor|0);hc=ga.location;Yc=Z[hc];if(1===Tc){Yc.buffer||
G.enableVertexAttribArray(hc);id=cd||1;if(Yc.type!==Gb||Yc.size!==id||Yc.buffer!==zc||Yc.normalized!==Ec||Yc.offset!==Mc||Yc.stride!==Nc)G.bindBuffer(34962,zc.buffer),G.vertexAttribPointer(hc,id,Gb,Ec,Nc,Mc),Yc.type=Gb,Yc.size=id,Yc.buffer=zc,Yc.normalized=Ec,Yc.offset=Mc,Yc.stride=Nc;Yc.divisor!==Ac&&(e.vertexAttribDivisorANGLE(hc,Ac),Yc.divisor=Ac)}else if(Yc.buffer&&(G.disableVertexAttribArray(hc),Yc.buffer=null),Yc.x!==Oc||Yc.y!==Hc||Yc.z!==Uc||Yc.w!==zb)G.vertexAttrib4f(hc,Oc,Hc,Uc,zb),Yc.x=
Oc,Yc.y=Hc,Yc.z=Uc,Yc.w=zb;od=ia.call(this,ja,k,g);qe=!1;Zc=null;Ud=0;wd=!1;Xe=je=0;le=1;Jd=0;Hd=5126;ld=pd=Fc=kd=0;ka(od)?(qe=!0,Zc=P.createStream(34962,od),Hd=Zc.dtype):(Zc=P.getBuffer(od))?Hd=Zc.dtype:"constant"in od?(le=2,"number"===typeof od.constant?(Fc=od.constant,pd=ld=kd=0):(Fc=0<od.constant.length?od.constant[0]:0,pd=1<od.constant.length?od.constant[1]:0,ld=2<od.constant.length?od.constant[2]:0,kd=3<od.constant.length?od.constant[3]:0)):(Zc=ka(od.buffer)?P.createStream(34962,od.buffer):
P.getBuffer(od.buffer),Hd="type"in od?Nd[od.type]:Zc.dtype,wd=!!od.normalized,Xe=od.size|0,je=od.offset|0,Jd=od.stride|0,Ud=od.divisor|0);fd=Xa.location;qd=Z[fd];if(1===le){qd.buffer||G.enableVertexAttribArray(fd);Fd=Xe||1;if(qd.type!==Hd||qd.size!==Fd||qd.buffer!==Zc||qd.normalized!==wd||qd.offset!==je||qd.stride!==Jd)G.bindBuffer(34962,Zc.buffer),G.vertexAttribPointer(fd,Fd,Hd,wd,Jd,je),qd.type=Hd,qd.size=Fd,qd.buffer=Zc,qd.normalized=wd,qd.offset=je,qd.stride=Jd;qd.divisor!==Ud&&(e.vertexAttribDivisorANGLE(fd,
Ud),qd.divisor=Ud)}else if(qd.buffer&&(G.disableVertexAttribArray(fd),qd.buffer=null),qd.x!==Fc||qd.y!==pd||qd.z!==ld||qd.w!==kd)G.vertexAttrib4f(fd,Fc,pd,ld,kd),qd.x=Fc,qd.y=pd,qd.z=ld,qd.w=kd;yd=Q.call(this,ja,k,g);te=!1;xe=null;de=0;me=!1;ce=ee=0;ye=1;$d=0;fe=5126;ke=re=Xc=yc=0;ka(yd)?(te=!0,xe=P.createStream(34962,yd),fe=xe.dtype):(xe=P.getBuffer(yd))?fe=xe.dtype:"constant"in yd?(ye=2,"number"===typeof yd.constant?(Xc=yd.constant,re=ke=yc=0):(Xc=0<yd.constant.length?yd.constant[0]:0,re=1<yd.constant.length?
yd.constant[1]:0,ke=2<yd.constant.length?yd.constant[2]:0,yc=3<yd.constant.length?yd.constant[3]:0)):(xe=ka(yd.buffer)?P.createStream(34962,yd.buffer):P.getBuffer(yd.buffer),fe="type"in yd?Nd[yd.type]:xe.dtype,me=!!yd.normalized,ce=yd.size|0,ee=yd.offset|0,$d=yd.stride|0,de=yd.divisor|0);Id=V.location;Md=Z[Id];if(1===ye){Md.buffer||G.enableVertexAttribArray(Id);Pd=ce||4;if(Md.type!==fe||Md.size!==Pd||Md.buffer!==xe||Md.normalized!==me||Md.offset!==ee||Md.stride!==$d)G.bindBuffer(34962,xe.buffer),
G.vertexAttribPointer(Id,Pd,fe,me,$d,ee),Md.type=fe,Md.size=Pd,Md.buffer=xe,Md.normalized=me,Md.offset=ee,Md.stride=$d;Md.divisor!==de&&(e.vertexAttribDivisorANGLE(Id,de),Md.divisor=de)}else if(Md.buffer&&(G.disableVertexAttribArray(Id),Md.buffer=null),Md.x!==Xc||Md.y!==re||Md.z!==ke||Md.w!==yc)G.vertexAttrib4f(Id,Xc,re,ke,yc),Md.x=Xc,Md.y=re,Md.z=ke,Md.w=yc;Qd=O.call(this,ja,k,g);ge=!1;ze=null;Be=0;ne=!1;Qe=af=0;Me=1;se=0;Ee=5126;Fe=Je=Ie=He=0;ka(Qd)?(ge=!0,ze=P.createStream(34962,Qd),Ee=ze.dtype):
(ze=P.getBuffer(Qd))?Ee=ze.dtype:"constant"in Qd?(Me=2,"number"===typeof Qd.constant?(Ie=Qd.constant,Je=Fe=He=0):(Ie=0<Qd.constant.length?Qd.constant[0]:0,Je=1<Qd.constant.length?Qd.constant[1]:0,Fe=2<Qd.constant.length?Qd.constant[2]:0,He=3<Qd.constant.length?Qd.constant[3]:0)):(ze=ka(Qd.buffer)?P.createStream(34962,Qd.buffer):P.getBuffer(Qd.buffer),Ee="type"in Qd?Nd[Qd.type]:ze.dtype,ne=!!Qd.normalized,Qe=Qd.size|0,af=Qd.offset|0,se=Qd.stride|0,Be=Qd.divisor|0);Kd=Vb.location;Td=Z[Kd];if(1===Me){Td.buffer||
G.enableVertexAttribArray(Kd);Yd=Qe||4;if(Td.type!==Ee||Td.size!==Yd||Td.buffer!==ze||Td.normalized!==ne||Td.offset!==af||Td.stride!==se)G.bindBuffer(34962,ze.buffer),G.vertexAttribPointer(Kd,Yd,Ee,ne,se,af),Td.type=Ee,Td.size=Yd,Td.buffer=ze,Td.normalized=ne,Td.offset=af,Td.stride=se;Td.divisor!==Be&&(e.vertexAttribDivisorANGLE(Kd,Be),Td.divisor=Be)}else if(Td.buffer&&(G.disableVertexAttribArray(Kd),Td.buffer=null),Td.x!==Ie||Td.y!==Je||Td.z!==Fe||Td.w!==He)G.vertexAttrib4f(Kd,Ie,Je,Fe,He),Td.x=
Ie,Td.y=Je,Td.z=Fe,Td.w=He;ae=W.call(this,ja,k,g);Ke=!1;Cd=null;Rd=0;Ce=!1;hf=Le=0;$e=1;Re=0;Ne=5126;Te=Se=Ve=Ze=0;ka(ae)?(Ke=!0,Cd=P.createStream(34962,ae),Ne=Cd.dtype):(Cd=P.getBuffer(ae))?Ne=Cd.dtype:"constant"in ae?($e=2,"number"===typeof ae.constant?(Ve=ae.constant,Se=Te=Ze=0):(Ve=0<ae.constant.length?ae.constant[0]:0,Se=1<ae.constant.length?ae.constant[1]:0,Te=2<ae.constant.length?ae.constant[2]:0,Ze=3<ae.constant.length?ae.constant[3]:0)):(Cd=ka(ae.buffer)?P.createStream(34962,ae.buffer):P.getBuffer(ae.buffer),
Ne="type"in ae?Nd[ae.type]:Cd.dtype,Ce=!!ae.normalized,hf=ae.size|0,Le=ae.offset|0,Re=ae.stride|0,Rd=ae.divisor|0);Sd=na.location;Wd=Z[Sd];if(1===$e){Wd.buffer||G.enableVertexAttribArray(Sd);Ue=hf||1;if(Wd.type!==Ne||Wd.size!==Ue||Wd.buffer!==Cd||Wd.normalized!==Ce||Wd.offset!==Le||Wd.stride!==Re)G.bindBuffer(34962,Cd.buffer),G.vertexAttribPointer(Sd,Ue,Ne,Ce,Re,Le),Wd.type=Ne,Wd.size=Ue,Wd.buffer=Cd,Wd.normalized=Ce,Wd.offset=Le,Wd.stride=Re;Wd.divisor!==Rd&&(e.vertexAttribDivisorANGLE(Sd,Rd),Wd.divisor=
Rd)}else if(Wd.buffer&&(G.disableVertexAttribArray(Sd),Wd.buffer=null),Wd.x!==Ve||Wd.y!==Se||Wd.z!==Te||Wd.w!==Ze)G.vertexAttrib4f(Sd,Ve,Se,Te,Ze),Wd.x=Ve,Wd.y=Se,Wd.z=Te,Wd.w=Ze;jf=ja.pixelRatio;g&&nf===jf||(nf=jf,G.uniform1f($a.location,jf));ef=k.scale;kf=ef[0];mf=ef[1];g&&lf===kf&&rf===mf||(lf=kf,rf=mf,G.uniform2f(X.location,kf,mf));of=k.scaleFract;sf=of[0];Cf=of[1];g&&Bf===sf&&Oe===Cf||(Bf=sf,Oe=Cf,G.uniform2f(qb.location,sf,Cf));De=k.translate;pf=De[0];Df=De[1];g&&qf===pf&&Gf===Df||(qf=pf,Gf=
Df,G.uniform2f(ra.location,pf,Df));Af=k.translateFract;Ef=Af[0];wf=Af[1];g&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,G.uniform2f(Tb.location,Ef,wf));vf=R.call(this,ja,k,g);yf=vf[0];Jf=vf[1];g&&zf===yf&&Kf===Jf||(zf=yf,Kf=Jf,G.uniform2f(Ka.location,yf,Jf));Lf=k.opacity;g&&Mf===Lf||(Mf=Lf,G.uniform1f(Ca.location,Lf));(tf=k.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;G.uniform1i(ba.location,Rf.bind());If=k.elements;uf=null;(uf=(dg=ka(If))?$c.createStream(If):$c.getElements(If))&&
G.bindBuffer(34963,uf.buffer.buffer);Sf=k.offset;if(Tf=k.count)0<ec?uf?e.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),ec):e.drawArraysInstancedANGLE(0,Sf,Tf,ec):0>ec&&(uf?G.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):G.drawArrays(0,Sf,Tf)),ja.viewportWidth=Qb,ja.viewportHeight=Ma,Cc&&P.destroyStream(bb),Qa&&P.destroyStream(Kc),Va&&P.destroyStream(oc),sd&&P.destroyStream(tc),Sc&&P.destroyStream(zc),qe&&P.destroyStream(Zc),te&&P.destroyStream(xe),ge&&P.destroyStream(ze),Ke&&P.destroyStream(Cd),
Rf.unbind(),dg&&$c.destroyStream(uf)}ta.unbind();Fa.dirty=!0;ma.setVAO(null);d&&(b.cpuTime+=performance.now()-c)},draw:function(a){var f,h,q,t,m,y,ca,z,L,C,H,B,F,I,S,N,K,J,U,O,Q,Wa,R,aa,qa,fa,W,Y,ha,ea,la,ia,pa,sa,kc,Da,ta,Na,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,
Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Ud,wd,je,de,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se;f=M.next;f!==M.cur&&(f?G.bindFramebuffer(36160,f.framebuffer):G.bindFramebuffer(36160,null),M.cur=f);if(Fa.dirty){var Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,hf,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf,rf,of,sf;Ee=va.dither;Ee!==Fa.dither&&(Ee?G.enable(3024):G.disable(3024),Fa.dither=Ee);He=da[0];Ie=da[1];if(He!==ua[0]||Ie!==ua[1])G.blendEquationSeparate(He,
Ie),ua[0]=He,ua[1]=Ie;Je=va.depth_func;Je!==Fa.depth_func&&(G.depthFunc(Je),Fa.depth_func=Je);Fe=Cb[0];Kd=Cb[1];if(Fe!==oa[0]||Kd!==oa[1])G.depthRange(Fe,Kd),oa[0]=Fe,oa[1]=Kd;Td=va.depth_mask;Td!==Fa.depth_mask&&(G.depthMask(Td),Fa.depth_mask=Td);Yd=A[0];ae=A[1];Ke=A[2];Cd=A[3];if(Yd!==pc[0]||ae!==pc[1]||Ke!==pc[2]||Cd!==pc[3])G.colorMask(Yd,ae,Ke,Cd),pc[0]=Yd,pc[1]=ae,pc[2]=Ke,pc[3]=Cd;Rd=va.cull_enable;Rd!==Fa.cull_enable&&(Rd?G.enable(2884):G.disable(2884),Fa.cull_enable=Rd);Ce=va.cull_face;Ce!==
Fa.cull_face&&(G.cullFace(Ce),Fa.cull_face=Ce);Le=va.frontFace;Le!==Fa.frontFace&&(G.frontFace(Le),Fa.frontFace=Le);hf=va.lineWidth;hf!==Fa.lineWidth&&(G.lineWidth(hf),Fa.lineWidth=hf);$e=va.polygonOffset_enable;$e!==Fa.polygonOffset_enable&&($e?G.enable(32823):G.disable(32823),Fa.polygonOffset_enable=$e);Re=Db[0];Ne=Db[1];if(Re!==ub[0]||Ne!==ub[1])G.polygonOffset(Re,Ne),ub[0]=Re,ub[1]=Ne;Ze=va.sample_alpha;Ze!==Fa.sample_alpha&&(Ze?G.enable(32926):G.disable(32926),Fa.sample_alpha=Ze);Ve=va.sample_enable;
Ve!==Fa.sample_enable&&(Ve?G.enable(32928):G.disable(32928),Fa.sample_enable=Ve);Se=We[0];Te=We[1];if(Se!==oe[0]||Te!==oe[1])G.sampleCoverage(Se,Te),oe[0]=Se,oe[1]=Te;Sd=va.stencil_mask;Sd!==Fa.stencil_mask&&(G.stencilMask(Sd),Fa.stencil_mask=Sd);Wd=we[0];Ue=we[1];jf=we[2];if(Wd!==ue[0]||Ue!==ue[1]||jf!==ue[2])G.stencilFunc(Wd,Ue,jf),ue[0]=Wd,ue[1]=Ue,ue[2]=jf;nf=ve[0];ef=ve[1];kf=ve[2];lf=ve[3];if(nf!==Ld[0]||ef!==Ld[1]||kf!==Ld[2]||lf!==Ld[3])G.stencilOpSeparate(nf,ef,kf,lf),Ld[0]=nf,Ld[1]=ef,Ld[2]=
kf,Ld[3]=lf;mf=zd[0];rf=zd[1];of=zd[2];sf=zd[3];if(mf!==he[0]||rf!==he[1]||of!==he[2]||sf!==he[3])G.stencilOpSeparate(mf,rf,of,sf),he[0]=mf,he[1]=rf,he[2]=of,he[3]=sf}h=a.viewport;q=h.x|0;t=h.y|0;m="width"in h?h.width|0:ja.framebufferWidth-q;y="height"in h?h.height|0:ja.framebufferHeight-t;ca=ja.viewportWidth;ja.viewportWidth=m;z=ja.viewportHeight;ja.viewportHeight=y;G.viewport(q,t,m,y);Zd[0]=q;Zd[1]=t;Zd[2]=m;Zd[3]=y;G.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;G.enable(3042);Fa.blend_enable=
!0;G.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;G.disable(2929);Fa.depth_enable=!1;L=a.viewport;C=L.x|0;H=L.y|0;B="width"in L?L.width|0:ja.framebufferWidth-C;F="height"in L?L.height|0:ja.framebufferHeight-H;G.scissor(C,H,B,F);ie[0]=C;ie[1]=H;ie[2]=B;ie[3]=F;G.enable(3089);Fa.scissor_enable=!0;G.disable(2960);Fa.stencil_enable=!1;if(I=Fa.profile)S=performance.now(),b.count++;G.useProgram(c.program);N=Zb.angle_instanced_arrays;ma.setVAO(null);K=k.call(this,ja,a,0);J=!1;U=
null;O=0;Q=!1;R=Wa=0;aa=1;qa=0;fa=5126;ea=ha=Y=W=0;ka(K)?(J=!0,U=P.createStream(34962,K),fa=U.dtype):(U=P.getBuffer(K))?fa=U.dtype:"constant"in K?(aa=2,"number"===typeof K.constant?(Y=K.constant,ha=ea=W=0):(Y=0<K.constant.length?K.constant[0]:0,ha=1<K.constant.length?K.constant[1]:0,ea=2<K.constant.length?K.constant[2]:0,W=3<K.constant.length?K.constant[3]:0)):(U=ka(K.buffer)?P.createStream(34962,K.buffer):P.getBuffer(K.buffer),fa="type"in K?Nd[K.type]:U.dtype,Q=!!K.normalized,R=K.size|0,Wa=K.offset|
0,qa=K.stride|0,O=K.divisor|0);la=rc.location;ia=Z[la];if(1===aa){ia.buffer||G.enableVertexAttribArray(la);pa=R||1;if(ia.type!==fa||ia.size!==pa||ia.buffer!==U||ia.normalized!==Q||ia.offset!==Wa||ia.stride!==qa)G.bindBuffer(34962,U.buffer),G.vertexAttribPointer(la,pa,fa,Q,qa,Wa),ia.type=fa,ia.size=pa,ia.buffer=U,ia.normalized=Q,ia.offset=Wa,ia.stride=qa;ia.divisor!==O&&(N.vertexAttribDivisorANGLE(la,O),ia.divisor=O)}else if(ia.buffer&&(G.disableVertexAttribArray(la),ia.buffer=null),ia.x!==Y||ia.y!==
ha||ia.z!==ea||ia.w!==W)G.vertexAttrib4f(la,Y,ha,ea,W),ia.x=Y,ia.y=ha,ia.z=ea,ia.w=W;sa=l.call(this,ja,a,0);kc=!1;Da=null;ta=0;Na=!1;Bb=Ya=0;ab=1;ec=0;Ob=5126;ed=Pb=Yb=Ed=0;ka(sa)?(kc=!0,Da=P.createStream(34962,sa),Ob=Da.dtype):(Da=P.getBuffer(sa))?Ob=Da.dtype:"constant"in sa?(ab=2,"number"===typeof sa.constant?(Yb=sa.constant,Pb=ed=Ed=0):(Yb=0<sa.constant.length?sa.constant[0]:0,Pb=1<sa.constant.length?sa.constant[1]:0,ed=2<sa.constant.length?sa.constant[2]:0,Ed=3<sa.constant.length?sa.constant[3]:
0)):(Da=ka(sa.buffer)?P.createStream(34962,sa.buffer):P.getBuffer(sa.buffer),Ob="type"in sa?Nd[sa.type]:Da.dtype,Na=!!sa.normalized,Bb=sa.size|0,Ya=sa.offset|0,ec=sa.stride|0,ta=sa.divisor|0);Qb=td.location;Ma=Z[Qb];if(1===ab){Ma.buffer||G.enableVertexAttribArray(Qb);lb=Bb||1;if(Ma.type!==Ob||Ma.size!==lb||Ma.buffer!==Da||Ma.normalized!==Na||Ma.offset!==Ya||Ma.stride!==ec)G.bindBuffer(34962,Da.buffer),G.vertexAttribPointer(Qb,lb,Ob,Na,ec,Ya),Ma.type=Ob,Ma.size=lb,Ma.buffer=Da,Ma.normalized=Na,Ma.offset=
Ya,Ma.stride=ec;Ma.divisor!==ta&&(N.vertexAttribDivisorANGLE(Qb,ta),Ma.divisor=ta)}else if(Ma.buffer&&(G.disableVertexAttribArray(Qb),Ma.buffer=null),Ma.x!==Yb||Ma.y!==Pb||Ma.z!==ed||Ma.w!==Ed)G.vertexAttrib4f(Qb,Yb,Pb,ed,Ed),Ma.x=Yb,Ma.y=Pb,Ma.z=ed,Ma.w=Ed;rb=d.call(this,ja,a,0);fb=!1;Oa=null;lc=0;Ub=!1;bb=Cc=0;nc=1;Gc=0;cc=5126;mb=wa=ib=hb=0;ka(rb)?(fb=!0,Oa=P.createStream(34962,rb),cc=Oa.dtype):(Oa=P.getBuffer(rb))?cc=Oa.dtype:"constant"in rb?(nc=2,"number"===typeof rb.constant?(ib=rb.constant,
wa=mb=hb=0):(ib=0<rb.constant.length?rb.constant[0]:0,wa=1<rb.constant.length?rb.constant[1]:0,mb=2<rb.constant.length?rb.constant[2]:0,hb=3<rb.constant.length?rb.constant[3]:0)):(Oa=ka(rb.buffer)?P.createStream(34962,rb.buffer):P.getBuffer(rb.buffer),cc="type"in rb?Nd[rb.type]:Oa.dtype,Ub=!!rb.normalized,bb=rb.size|0,Cc=rb.offset|0,Gc=rb.stride|0,lc=rb.divisor|0);za=mc.location;Sa=Z[za];if(1===nc){Sa.buffer||G.enableVertexAttribArray(za);Za=bb||1;if(Sa.type!==cc||Sa.size!==Za||Sa.buffer!==Oa||Sa.normalized!==
Ub||Sa.offset!==Cc||Sa.stride!==Gc)G.bindBuffer(34962,Oa.buffer),G.vertexAttribPointer(za,Za,cc,Ub,Gc,Cc),Sa.type=cc,Sa.size=Za,Sa.buffer=Oa,Sa.normalized=Ub,Sa.offset=Cc,Sa.stride=Gc;Sa.divisor!==lc&&(N.vertexAttribDivisorANGLE(za,lc),Sa.divisor=lc)}else if(Sa.buffer&&(G.disableVertexAttribArray(za),Sa.buffer=null),Sa.x!==ib||Sa.y!==wa||Sa.z!==mb||Sa.w!==hb)G.vertexAttrib4f(za,ib,wa,mb,hb),Sa.x=ib,Sa.y=wa,Sa.z=mb,Sa.w=hb;Aa=p.call(this,ja,a,0);cb=!1;La=null;wb=0;vb=!1;Kc=Qa=0;Fb=1;Ib=0;Rb=5126;Lb=
Ja=vd=xa=0;ka(Aa)?(cb=!0,La=P.createStream(34962,Aa),Rb=La.dtype):(La=P.getBuffer(Aa))?Rb=La.dtype:"constant"in Aa?(Fb=2,"number"===typeof Aa.constant?(vd=Aa.constant,Ja=Lb=xa=0):(vd=0<Aa.constant.length?Aa.constant[0]:0,Ja=1<Aa.constant.length?Aa.constant[1]:0,Lb=2<Aa.constant.length?Aa.constant[2]:0,xa=3<Aa.constant.length?Aa.constant[3]:0)):(La=ka(Aa.buffer)?P.createStream(34962,Aa.buffer):P.getBuffer(Aa.buffer),Rb="type"in Aa?Nd[Aa.type]:La.dtype,vb=!!Aa.normalized,Kc=Aa.size|0,Qa=Aa.offset|0,
Ib=Aa.stride|0,wb=Aa.divisor|0);db=Bc.location;gb=Z[db];if(1===Fb){gb.buffer||G.enableVertexAttribArray(db);ya=Kc||1;if(gb.type!==Rb||gb.size!==ya||gb.buffer!==La||gb.normalized!==vb||gb.offset!==Qa||gb.stride!==Ib)G.bindBuffer(34962,La.buffer),G.vertexAttribPointer(db,ya,Rb,vb,Ib,Qa),gb.type=Rb,gb.size=ya,gb.buffer=La,gb.normalized=vb,gb.offset=Qa,gb.stride=Ib;gb.divisor!==wb&&(N.vertexAttribDivisorANGLE(db,wb),gb.divisor=wb)}else if(gb.buffer&&(G.disableVertexAttribArray(db),gb.buffer=null),gb.x!==
vd||gb.y!==Ja||gb.z!==Lb||gb.w!==xa)G.vertexAttrib4f(db,vd,Ja,Lb,xa),gb.x=vd,gb.y=Ja,gb.z=Lb,gb.w=xa;fc=g.call(this,ja,a,0);Ea=!1;nb=null;ob=0;Ua=!1;oc=Va=0;gd=1;uc=0;Ta=5126;xc=Ga=Dc=Jb=0;ka(fc)?(Ea=!0,nb=P.createStream(34962,fc),Ta=nb.dtype):(nb=P.getBuffer(fc))?Ta=nb.dtype:"constant"in fc?(gd=2,"number"===typeof fc.constant?(Dc=fc.constant,Ga=xc=Jb=0):(Dc=0<fc.constant.length?fc.constant[0]:0,Ga=1<fc.constant.length?fc.constant[1]:0,xc=2<fc.constant.length?fc.constant[2]:0,Jb=3<fc.constant.length?
fc.constant[3]:0)):(nb=ka(fc.buffer)?P.createStream(34962,fc.buffer):P.getBuffer(fc.buffer),Ta="type"in fc?Nd[fc.type]:nb.dtype,Ua=!!fc.normalized,oc=fc.size|0,Va=fc.offset|0,uc=fc.stride|0,ob=fc.divisor|0);Pa=ga.location;Ba=Z[Pa];if(1===gd){Ba.buffer||G.enableVertexAttribArray(Pa);jb=oc||1;if(Ba.type!==Ta||Ba.size!==jb||Ba.buffer!==nb||Ba.normalized!==Ua||Ba.offset!==Va||Ba.stride!==uc)G.bindBuffer(34962,nb.buffer),G.vertexAttribPointer(Pa,jb,Ta,Ua,uc,Va),Ba.type=Ta,Ba.size=jb,Ba.buffer=nb,Ba.normalized=
Ua,Ba.offset=Va,Ba.stride=uc;Ba.divisor!==ob&&(N.vertexAttribDivisorANGLE(Pa,ob),Ba.divisor=ob)}else if(Ba.buffer&&(G.disableVertexAttribArray(Pa),Ba.buffer=null),Ba.x!==Dc||Ba.y!==Ga||Ba.z!==xc||Ba.w!==Jb)G.vertexAttrib4f(Pa,Dc,Ga,xc,Jb),Ba.x=Dc,Ba.y=Ga,Ba.z=xc,Ba.w=Jb;sb=u.call(this,ja,a,0);xb=!1;pb=null;vc=0;tb=!1;tc=sd=0;Od=1;Lc=0;hd=5126;Mb=ac=Sb=bd=0;ka(sb)?(xb=!0,pb=P.createStream(34962,sb),hd=pb.dtype):(pb=P.getBuffer(sb))?hd=pb.dtype:"constant"in sb?(Od=2,"number"===typeof sb.constant?(Sb=
sb.constant,ac=Mb=bd=0):(Sb=0<sb.constant.length?sb.constant[0]:0,ac=1<sb.constant.length?sb.constant[1]:0,Mb=2<sb.constant.length?sb.constant[2]:0,bd=3<sb.constant.length?sb.constant[3]:0)):(pb=ka(sb.buffer)?P.createStream(34962,sb.buffer):P.getBuffer(sb.buffer),hd="type"in sb?Nd[sb.type]:pb.dtype,tb=!!sb.normalized,tc=sb.size|0,sd=sb.offset|0,Lc=sb.stride|0,vc=sb.divisor|0);Ha=Xa.location;Xb=Z[Ha];if(1===Od){Xb.buffer||G.enableVertexAttribArray(Ha);kb=tc||1;if(Xb.type!==hd||Xb.size!==kb||Xb.buffer!==
pb||Xb.normalized!==tb||Xb.offset!==sd||Xb.stride!==Lc)G.bindBuffer(34962,pb.buffer),G.vertexAttribPointer(Ha,kb,hd,tb,Lc,sd),Xb.type=hd,Xb.size=kb,Xb.buffer=pb,Xb.normalized=tb,Xb.offset=sd,Xb.stride=Lc;Xb.divisor!==vc&&(N.vertexAttribDivisorANGLE(Ha,vc),Xb.divisor=vc)}else if(Xb.buffer&&(G.disableVertexAttribArray(Ha),Xb.buffer=null),Xb.x!==Sb||Xb.y!==ac||Xb.z!==Mb||Xb.w!==bd)G.vertexAttrib4f(Ha,Sb,ac,Mb,bd),Xb.x=Sb,Xb.y=ac,Xb.z=Mb,Xb.w=bd;yb=n.call(this,ja,a,0);Kb=!1;Nb=null;gc=0;jc=!1;zc=Sc=0;
Ac=1;Ec=0;Mc=5126;Gb=Nc=Tc=cd=0;ka(yb)?(Kb=!0,Nb=P.createStream(34962,yb),Mc=Nb.dtype):(Nb=P.getBuffer(yb))?Mc=Nb.dtype:"constant"in yb?(Ac=2,"number"===typeof yb.constant?(Tc=yb.constant,Nc=Gb=cd=0):(Tc=0<yb.constant.length?yb.constant[0]:0,Nc=1<yb.constant.length?yb.constant[1]:0,Gb=2<yb.constant.length?yb.constant[2]:0,cd=3<yb.constant.length?yb.constant[3]:0)):(Nb=ka(yb.buffer)?P.createStream(34962,yb.buffer):P.getBuffer(yb.buffer),Mc="type"in yb?Nd[yb.type]:Nb.dtype,jc=!!yb.normalized,zc=yb.size|
0,Sc=yb.offset|0,Ec=yb.stride|0,gc=yb.divisor|0);zb=V.location;Oc=Z[zb];if(1===Ac){Oc.buffer||G.enableVertexAttribArray(zb);Hc=zc||4;if(Oc.type!==Mc||Oc.size!==Hc||Oc.buffer!==Nb||Oc.normalized!==jc||Oc.offset!==Sc||Oc.stride!==Ec)G.bindBuffer(34962,Nb.buffer),G.vertexAttribPointer(zb,Hc,Mc,jc,Ec,Sc),Oc.type=Mc,Oc.size=Hc,Oc.buffer=Nb,Oc.normalized=jc,Oc.offset=Sc,Oc.stride=Ec;Oc.divisor!==gc&&(N.vertexAttribDivisorANGLE(zb,gc),Oc.divisor=gc)}else if(Oc.buffer&&(G.disableVertexAttribArray(zb),Oc.buffer=
null),Oc.x!==Tc||Oc.y!==Nc||Oc.z!==Gb||Oc.w!==cd)G.vertexAttrib4f(zb,Tc,Nc,Gb,cd),Oc.x=Tc,Oc.y=Nc,Oc.z=Gb,Oc.w=cd;Uc=w.call(this,ja,a,0);hc=!1;Yc=null;id=0;od=!1;Zc=qe=0;Ud=1;wd=0;je=5126;Hd=Jd=le=de=0;ka(Uc)?(hc=!0,Yc=P.createStream(34962,Uc),je=Yc.dtype):(Yc=P.getBuffer(Uc))?je=Yc.dtype:"constant"in Uc?(Ud=2,"number"===typeof Uc.constant?(le=Uc.constant,Jd=Hd=de=0):(le=0<Uc.constant.length?Uc.constant[0]:0,Jd=1<Uc.constant.length?Uc.constant[1]:0,Hd=2<Uc.constant.length?Uc.constant[2]:0,de=3<Uc.constant.length?
Uc.constant[3]:0)):(Yc=ka(Uc.buffer)?P.createStream(34962,Uc.buffer):P.getBuffer(Uc.buffer),je="type"in Uc?Nd[Uc.type]:Yc.dtype,od=!!Uc.normalized,Zc=Uc.size|0,qe=Uc.offset|0,wd=Uc.stride|0,id=Uc.divisor|0);kd=Vb.location;Fc=Z[kd];if(1===Ud){Fc.buffer||G.enableVertexAttribArray(kd);pd=Zc||4;if(Fc.type!==je||Fc.size!==pd||Fc.buffer!==Yc||Fc.normalized!==od||Fc.offset!==qe||Fc.stride!==wd)G.bindBuffer(34962,Yc.buffer),G.vertexAttribPointer(kd,pd,je,od,wd,qe),Fc.type=je,Fc.size=pd,Fc.buffer=Yc,Fc.normalized=
od,Fc.offset=qe,Fc.stride=wd;Fc.divisor!==id&&(N.vertexAttribDivisorANGLE(kd,id),Fc.divisor=id)}else if(Fc.buffer&&(G.disableVertexAttribArray(kd),Fc.buffer=null),Fc.x!==le||Fc.y!==Jd||Fc.z!==Hd||Fc.w!==de)G.vertexAttrib4f(kd,le,Jd,Hd,de),Fc.x=le,Fc.y=Jd,Fc.z=Hd,Fc.w=de;ld=r.call(this,ja,a,0);fd=!1;qd=null;Fd=0;yd=!1;xe=te=0;Ye=1;me=0;ee=5126;fe=$d=ye=ce=0;ka(ld)?(fd=!0,qd=P.createStream(34962,ld),ee=qd.dtype):(qd=P.getBuffer(ld))?ee=qd.dtype:"constant"in ld?(Ye=2,"number"===typeof ld.constant?(ye=
ld.constant,$d=fe=ce=0):(ye=0<ld.constant.length?ld.constant[0]:0,$d=1<ld.constant.length?ld.constant[1]:0,fe=2<ld.constant.length?ld.constant[2]:0,ce=3<ld.constant.length?ld.constant[3]:0)):(qd=ka(ld.buffer)?P.createStream(34962,ld.buffer):P.getBuffer(ld.buffer),ee="type"in ld?Nd[ld.type]:qd.dtype,yd=!!ld.normalized,xe=ld.size|0,te=ld.offset|0,me=ld.stride|0,Fd=ld.divisor|0);yc=na.location;Xc=Z[yc];if(1===Ye){Xc.buffer||G.enableVertexAttribArray(yc);re=xe||1;if(Xc.type!==ee||Xc.size!==re||Xc.buffer!==
qd||Xc.normalized!==yd||Xc.offset!==te||Xc.stride!==me)G.bindBuffer(34962,qd.buffer),G.vertexAttribPointer(yc,re,ee,yd,me,te),Xc.type=ee,Xc.size=re,Xc.buffer=qd,Xc.normalized=yd,Xc.offset=te,Xc.stride=me;Xc.divisor!==Fd&&(N.vertexAttribDivisorANGLE(yc,Fd),Xc.divisor=Fd)}else if(Xc.buffer&&(G.disableVertexAttribArray(yc),Xc.buffer=null),Xc.x!==ye||Xc.y!==$d||Xc.z!==fe||Xc.w!==ce)G.vertexAttrib4f(yc,ye,$d,fe,ce),Xc.x=ye,Xc.y=$d,Xc.z=fe,Xc.w=ce;G.uniform1i(D.location,!1);G.uniform1f($a.location,ja.pixelRatio);
ke=a.scale;G.uniform2f(X.location,ke[0],ke[1]);Id=a.scaleFract;G.uniform2f(qb.location,Id[0],Id[1]);Md=a.translate;G.uniform2f(ra.location,Md[0],Md[1]);Pd=a.translateFract;G.uniform2f(Tb.location,Pd[0],Pd[1]);Qd=x.call(this,ja,a,0);G.uniform2f(Ka.location,Qd[0],Qd[1]);G.uniform1f(Ca.location,a.opacity);G.uniform1i(Wb.location,v.bind());(ge=a.markerTexture)&&"framebuffer"===ge._reglType&&(ge=ge.color[0]);ze=ge._texture;G.uniform1i(ba.location,ze.bind());Be=a.elements;ne=null;(ne=(af=ka(Be))?$c.createStream(Be):
$c.getElements(Be))&&G.bindBuffer(34963,ne.buffer.buffer);Qe=a.offset;if(Me=a.count)se=Ab.instances,0<se?ne?N.drawElementsInstancedANGLE(0,Me,ne.type,Qe<<(ne.type-5121>>1),se):N.drawArraysInstancedANGLE(0,Qe,Me,se):0>se&&(ne?G.drawElements(0,Me,ne.type,Qe<<(ne.type-5121>>1)):G.drawArrays(0,Qe,Me)),Fa.dirty=!0,ma.setVAO(null),ja.viewportWidth=ca,ja.viewportHeight=z,I&&(b.cpuTime+=performance.now()-S),J&&P.destroyStream(U),kc&&P.destroyStream(Da),fb&&P.destroyStream(Oa),cb&&P.destroyStream(La),Ea&&
P.destroyStream(nb),xb&&P.destroyStream(pb),Kb&&P.destroyStream(Nb),hc&&P.destroyStream(Yc),fd&&P.destroyStream(qd),v.unbind(),ze.unbind(),af&&$c.destroyStream(ne)},scope:function(a,d,c){var e,g,q,k,l,p,u,r,w,v,x,n,T,ca,A,E,D,G,M,O,Q,Wa,Z,R,V,da,W,X,ba,ia,ga,na,oa,pa,ma,ua,ra,kc,Ia,ta,Na,Ca,Ka,ub,Cb,Xa,Ma,lb,rb,fb,Oa,Db,$a,Bc,bb,qb,td,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,pc,Fb,Ib,Rb,xa,Vb,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,Tb,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,Wb,tc,rc,Lc,mc,bd,Sb,ac,
Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,Zb,Zc,ie,wd,zd,Zd,we,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,Ld,he,ue,ve,ee,ce,oe,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,We,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,
ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;e=a.viewport;g=e.x|0;q=e.y|0;k="width"in e?e.width|0:ja.framebufferWidth-g;l="height"in e?e.height|0:ja.framebufferHeight-q;p=ja.viewportWidth;ja.viewportWidth=k;u=ja.viewportHeight;ja.viewportHeight=l;r=Ud[0];Ud[0]=g;w=Ud[1];Ud[1]=q;v=Ud[2];Ud[2]=k;x=Ud[3];Ud[3]=l;n=K[0];K[0]=0;T=K[1];K[1]=0;ca=K[2];K[2]=0;A=K[3];K[3]=1;E=va.blend_enable;va.blend_enable=!0;D=sa[0];sa[0]=770;G=sa[1];sa[1]=771;M=sa[2];sa[2]=773;O=sa[3];sa[3]=1;Q=va.depth_enable;
va.depth_enable=!1;Wa=a.viewport;Z=Wa.x|0;R=Wa.y|0;V="width"in Wa?Wa.width|0:ja.framebufferWidth-Z;da="height"in Wa?Wa.height|0:ja.framebufferHeight-R;W=de[0];de[0]=Z;X=de[1];de[1]=R;ba=de[2];de[2]=V;ia=de[3];de[3]=da;ga=va.scissor_enable;va.scissor_enable=!0;na=va.stencil_enable;va.stencil_enable=!1;if(oa=Fa.profile)pa=performance.now(),b.count++;ma=a.elements;ua=null;ua=(ra=ka(ma))?$c.createStream(ma):$c.getElements(ma);kc=Ab.elements;Ab.elements=ua;Ia=a.offset;ta=Ab.offset;Ab.offset=Ia;Na=a.count;
Ca=Ab.count;Ab.count=Na;Ka=Ab.primitive;Ab.primitive=0;ub=ha[45];ha[45]=!1;Cb=a.markerTexture;Xa=ha[48];ha[48]=Cb;Ma=a.opacity;lb=ha[10];ha[10]=Ma;rb=t.call(this,ja,a,c);fb=ha[46];ha[46]=rb;Oa=ha[47];ha[47]=m;Db=ja.pixelRatio;$a=ha[34];ha[34]=Db;Bc=a.scale;bb=ha[6];ha[6]=Bc;qb=a.scaleFract;td=ha[7];ha[7]=qb;cc=a.translate;hb=ha[8];ha[8]=cc;ib=a.translateFract;wa=ha[9];ha[9]=ib;mb=z.call(this,ja,a,c);za=!1;Sa=null;Za=0;Aa=!1;La=cb=0;wb=1;vb=0;Qa=5126;Rb=Ib=Fb=pc=0;ka(mb)?(za=!0,Sa=P.createStream(34962,
mb),Qa=Sa.dtype):(Sa=P.getBuffer(mb))?Qa=Sa.dtype:"constant"in mb?(wb=2,"number"===typeof mb.constant?(Fb=mb.constant,Ib=Rb=pc=0):(Fb=0<mb.constant.length?mb.constant[0]:0,Ib=1<mb.constant.length?mb.constant[1]:0,Rb=2<mb.constant.length?mb.constant[2]:0,pc=3<mb.constant.length?mb.constant[3]:0)):(Sa=ka(mb.buffer)?P.createStream(34962,mb.buffer):P.getBuffer(mb.buffer),Qa="type"in mb?Nd[mb.type]:Sa.dtype,Aa=!!mb.normalized,La=mb.size|0,cb=mb.offset|0,vb=mb.stride|0,Za=mb.divisor|0);xa=B.buffer;B.buffer=
Sa;Vb=B.divisor;B.divisor=Za;Ja=B.normalized;B.normalized=Aa;Lb=B.offset;B.offset=cb;db=B.size;B.size=La;gb=B.state;B.state=wb;ya=B.stride;B.stride=vb;fc=B.type;B.type=Qa;Ea=B.w;B.w=pc;nb=B.x;B.x=Fb;ob=B.y;B.y=Ib;Ua=B.z;B.z=Rb;Va=S.call(this,ja,a,c);oc=!1;Tb=null;uc=0;Ta=!1;Dc=Jb=0;Ga=1;xc=0;Pa=5126;xb=sb=jb=Ba=0;ka(Va)?(oc=!0,Tb=P.createStream(34962,Va),Pa=Tb.dtype):(Tb=P.getBuffer(Va))?Pa=Tb.dtype:"constant"in Va?(Ga=2,"number"===typeof Va.constant?(jb=Va.constant,sb=xb=Ba=0):(jb=0<Va.constant.length?
Va.constant[0]:0,sb=1<Va.constant.length?Va.constant[1]:0,xb=2<Va.constant.length?Va.constant[2]:0,Ba=3<Va.constant.length?Va.constant[3]:0)):(Tb=ka(Va.buffer)?P.createStream(34962,Va.buffer):P.getBuffer(Va.buffer),Pa="type"in Va?Nd[Va.type]:Tb.dtype,Ta=!!Va.normalized,Dc=Va.size|0,Jb=Va.offset|0,xc=Va.stride|0,uc=Va.divisor|0);pb=J.buffer;J.buffer=Tb;vc=J.divisor;J.divisor=uc;tb=J.normalized;J.normalized=Ta;Wb=J.offset;J.offset=Jb;tc=J.size;J.size=Dc;rc=J.state;J.state=Ga;Lc=J.stride;J.stride=xc;
mc=J.type;J.type=Pa;bd=J.w;J.w=Ba;Sb=J.x;J.x=jb;ac=J.y;J.y=sb;Mb=J.z;J.z=xb;Ha=fa.call(this,ja,a,c);Xb=!1;kb=null;yb=0;Kb=!1;gc=Nb=0;jc=1;Sc=0;zc=5126;cd=Mc=Ec=Ac=0;ka(Ha)?(Xb=!0,kb=P.createStream(34962,Ha),zc=kb.dtype):(kb=P.getBuffer(Ha))?zc=kb.dtype:"constant"in Ha?(jc=2,"number"===typeof Ha.constant?(Ec=Ha.constant,Mc=cd=Ac=0):(Ec=0<Ha.constant.length?Ha.constant[0]:0,Mc=1<Ha.constant.length?Ha.constant[1]:0,cd=2<Ha.constant.length?Ha.constant[2]:0,Ac=3<Ha.constant.length?Ha.constant[3]:0)):(kb=
ka(Ha.buffer)?P.createStream(34962,Ha.buffer):P.getBuffer(Ha.buffer),zc="type"in Ha?Nd[Ha.type]:kb.dtype,Kb=!!Ha.normalized,gc=Ha.size|0,Nb=Ha.offset|0,Sc=Ha.stride|0,yb=Ha.divisor|0);Tc=H.buffer;H.buffer=kb;Nc=H.divisor;H.divisor=yb;Gb=H.normalized;H.normalized=Kb;zb=H.offset;H.offset=Nb;Oc=H.size;H.size=gc;Hc=H.state;H.state=jc;Uc=H.stride;H.stride=Sc;hc=H.type;H.type=zc;Yc=H.w;H.w=Ac;id=H.x;H.x=Ec;od=H.y;H.y=Mc;Zb=H.z;H.z=cd;Zc=C.call(this,ja,a,c);ie=!1;wd=null;zd=0;Zd=!1;Jd=we=0;Hd=1;kd=0;Fc=
5126;qd=fd=ld=pd=0;ka(Zc)?(ie=!0,wd=P.createStream(34962,Zc),Fc=wd.dtype):(wd=P.getBuffer(Zc))?Fc=wd.dtype:"constant"in Zc?(Hd=2,"number"===typeof Zc.constant?(ld=Zc.constant,fd=qd=pd=0):(ld=0<Zc.constant.length?Zc.constant[0]:0,fd=1<Zc.constant.length?Zc.constant[1]:0,qd=2<Zc.constant.length?Zc.constant[2]:0,pd=3<Zc.constant.length?Zc.constant[3]:0)):(wd=ka(Zc.buffer)?P.createStream(34962,Zc.buffer):P.getBuffer(Zc.buffer),Fc="type"in Zc?Nd[Zc.type]:wd.dtype,Zd=!!Zc.normalized,Jd=Zc.size|0,we=Zc.offset|
0,kd=Zc.stride|0,zd=Zc.divisor|0);Fd=I.buffer;I.buffer=wd;yd=I.divisor;I.divisor=zd;Ld=I.normalized;I.normalized=Zd;he=I.offset;I.offset=we;ue=I.size;I.size=Jd;ve=I.state;I.state=Hd;ee=I.stride;I.stride=kd;ce=I.type;I.type=Fc;oe=I.w;I.w=pd;$d=I.x;I.x=ld;fe=I.y;I.y=fd;yc=I.z;I.z=qd;Xc=aa.call(this,ja,a,c);re=!1;ke=null;Id=0;Md=!1;Qd=Pd=0;ge=1;ze=0;Be=5126;Me=Qe=af=ne=0;ka(Xc)?(re=!0,ke=P.createStream(34962,Xc),Be=ke.dtype):(ke=P.getBuffer(Xc))?Be=ke.dtype:"constant"in Xc?(ge=2,"number"===typeof Xc.constant?
(af=Xc.constant,Qe=Me=ne=0):(af=0<Xc.constant.length?Xc.constant[0]:0,Qe=1<Xc.constant.length?Xc.constant[1]:0,Me=2<Xc.constant.length?Xc.constant[2]:0,ne=3<Xc.constant.length?Xc.constant[3]:0)):(ke=ka(Xc.buffer)?P.createStream(34962,Xc.buffer):P.getBuffer(Xc.buffer),Be="type"in Xc?Nd[Xc.type]:ke.dtype,Md=!!Xc.normalized,Qd=Xc.size|0,Pd=Xc.offset|0,ze=Xc.stride|0,Id=Xc.divisor|0);se=L.buffer;L.buffer=ke;Ee=L.divisor;L.divisor=Id;He=L.normalized;L.normalized=Md;Ie=L.offset;L.offset=Pd;Je=L.size;L.size=
Qd;Fe=L.state;L.state=ge;Kd=L.stride;L.stride=ze;Td=L.type;L.type=Be;Yd=L.w;L.w=ne;ae=L.x;L.x=af;Ke=L.y;L.y=Qe;Cd=L.z;L.z=Me;Rd=U.call(this,ja,a,c);Ce=!1;Le=null;We=0;$e=!1;Ne=Re=0;Ze=1;Ve=0;Se=5126;Ue=Wd=Sd=Te=0;ka(Rd)?(Ce=!0,Le=P.createStream(34962,Rd),Se=Le.dtype):(Le=P.getBuffer(Rd))?Se=Le.dtype:"constant"in Rd?(Ze=2,"number"===typeof Rd.constant?(Sd=Rd.constant,Wd=Ue=Te=0):(Sd=0<Rd.constant.length?Rd.constant[0]:0,Wd=1<Rd.constant.length?Rd.constant[1]:0,Ue=2<Rd.constant.length?Rd.constant[2]:
0,Te=3<Rd.constant.length?Rd.constant[3]:0)):(Le=ka(Rd.buffer)?P.createStream(34962,Rd.buffer):P.getBuffer(Rd.buffer),Se="type"in Rd?Nd[Rd.type]:Le.dtype,$e=!!Rd.normalized,Ne=Rd.size|0,Re=Rd.offset|0,Ve=Rd.stride|0,We=Rd.divisor|0);jf=F.buffer;F.buffer=Le;nf=F.divisor;F.divisor=We;ef=F.normalized;F.normalized=$e;kf=F.offset;F.offset=Re;lf=F.size;F.size=Ne;mf=F.state;F.state=Ze;rf=F.stride;F.stride=Ve;of=F.type;F.type=Se;sf=F.w;F.w=Te;Bf=F.x;F.x=Sd;Cf=F.y;F.y=Wd;Oe=F.z;F.z=Ue;De=la.call(this,ja,a,
c);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;Jf=zf=yf=vf=0;ka(De)?(pf=!0,qf=P.createStream(34962,De),xf=qf.dtype):(qf=P.getBuffer(De))?xf=qf.dtype:"constant"in De?(Ff=2,"number"===typeof De.constant?(yf=De.constant,zf=Jf=vf=0):(yf=0<De.constant.length?De.constant[0]:0,zf=1<De.constant.length?De.constant[1]:0,Jf=2<De.constant.length?De.constant[2]:0,vf=3<De.constant.length?De.constant[3]:0)):(qf=ka(De.buffer)?P.createStream(34962,De.buffer):P.getBuffer(De.buffer),xf="type"in De?Nd[De.type]:
qf.dtype,Gf=!!De.normalized,Ef=De.size|0,Af=De.offset|0,wf=De.stride|0,Df=De.divisor|0);Kf=N.buffer;N.buffer=qf;Lf=N.divisor;N.divisor=Df;Mf=N.normalized;N.normalized=Gf;tf=N.offset;N.offset=Af;Rf=N.size;N.size=Ef;If=N.state;N.state=Ff;uf=N.stride;N.stride=wf;dg=N.type;N.type=xf;Sf=N.w;N.w=vf;Tf=N.x;N.x=yf;qg=N.y;N.y=zf;ff=N.z;N.z=Jf;cf=ea.call(this,ja,a,c);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ka(cf)?(Nf=!0,Of=P.createStream(34962,cf),Uf=Of.dtype):(Of=P.getBuffer(cf))?
Uf=Of.dtype:"constant"in cf?(ig=2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Of=ka(cf.buffer)?P.createStream(34962,cf.buffer):P.getBuffer(cf.buffer),Uf="type"in cf?Nd[cf.type]:Of.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=y.buffer;y.buffer=Of;sg=y.divisor;y.divisor=eg;tg=y.normalized;
y.normalized=fg;ug=y.offset;y.offset=gg;vg=y.size;y.size=hg;wg=y.state;y.state=ig;xg=y.stride;y.stride=Wf;yg=y.type;y.type=Uf;zg=y.w;y.w=Xf;Ag=y.x;y.x=Yf;Bg=y.y;y.y=Zf;gf=y.z;y.z=jg;df=h.call(this,ja,a,c);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ka(df)?(Pf=!0,Qf=P.createStream(34962,df),Vf=Qf.dtype):(Qf=P.getBuffer(df))?Vf=Qf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?df.constant[0]:0,cg=1<df.constant.length?
df.constant[1]:0,pg=2<df.constant.length?df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Qf=ka(df.buffer)?P.createStream(34962,df.buffer):P.getBuffer(df.buffer),Vf="type"in df?Nd[df.type]:Qf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=f.buffer;f.buffer=Qf;Dg=f.divisor;f.divisor=kg;Eg=f.normalized;f.normalized=lg;Fg=f.offset;f.offset=mg;Gg=f.size;f.size=ng;Hg=f.state;f.state=og;Ig=f.stride;f.stride=$f;Jg=f.type;f.type=Vf;Kg=f.w;f.w=ag;Lg=f.x;
f.x=bg;Mg=f.y;f.y=cg;Ng=f.z;f.z=pg;Og=Y.vert;Y.vert=44;Pg=Y.frag;Y.frag=43;Fa.dirty=!0;d(ja,a,c);ja.viewportWidth=p;ja.viewportHeight=u;Ud[0]=r;Ud[1]=w;Ud[2]=v;Ud[3]=x;K[0]=n;K[1]=T;K[2]=ca;K[3]=A;va.blend_enable=E;sa[0]=D;sa[1]=G;sa[2]=M;sa[3]=O;va.depth_enable=Q;de[0]=W;de[1]=X;de[2]=ba;de[3]=ia;va.scissor_enable=ga;va.stencil_enable=na;oa&&(b.cpuTime+=performance.now()-pa);ra&&$c.destroyStream(ua);Ab.elements=kc;Ab.offset=ta;Ab.count=Ca;Ab.primitive=Ka;ha[45]=ub;ha[48]=Xa;ha[10]=lb;ha[46]=fb;ha[47]=
Oa;ha[34]=$a;ha[6]=bb;ha[7]=td;ha[8]=hb;ha[9]=wa;za&&P.destroyStream(Sa);B.buffer=xa;B.divisor=Vb;B.normalized=Ja;B.offset=Lb;B.size=db;B.state=gb;B.stride=ya;B.type=fc;B.w=Ea;B.x=nb;B.y=ob;B.z=Ua;oc&&P.destroyStream(Tb);J.buffer=pb;J.divisor=vc;J.normalized=tb;J.offset=Wb;J.size=tc;J.state=rc;J.stride=Lc;J.type=mc;J.w=bd;J.x=Sb;J.y=ac;J.z=Mb;Xb&&P.destroyStream(kb);H.buffer=Tc;H.divisor=Nc;H.normalized=Gb;H.offset=zb;H.size=Oc;H.state=Hc;H.stride=Uc;H.type=hc;H.w=Yc;H.x=id;H.y=od;H.z=Zb;ie&&P.destroyStream(wd);
I.buffer=Fd;I.divisor=yd;I.normalized=Ld;I.offset=he;I.size=ue;I.state=ve;I.stride=ee;I.type=ce;I.w=oe;I.x=$d;I.y=fe;I.z=yc;re&&P.destroyStream(ke);L.buffer=se;L.divisor=Ee;L.normalized=He;L.offset=Ie;L.size=Je;L.state=Fe;L.stride=Kd;L.type=Td;L.w=Yd;L.x=ae;L.y=Ke;L.z=Cd;Ce&&P.destroyStream(Le);F.buffer=jf;F.divisor=nf;F.normalized=ef;F.offset=kf;F.size=lf;F.state=mf;F.stride=rf;F.type=of;F.w=sf;F.x=Bf;F.y=Cf;F.z=Oe;pf&&P.destroyStream(qf);N.buffer=Kf;N.divisor=Lf;N.normalized=Mf;N.offset=tf;N.size=
Rf;N.state=If;N.stride=uf;N.type=dg;N.w=Sf;N.x=Tf;N.y=qg;N.z=ff;Nf&&P.destroyStream(Of);y.buffer=rg;y.divisor=sg;y.normalized=tg;y.offset=ug;y.size=vg;y.state=wg;y.stride=xg;y.type=yg;y.w=zg;y.x=Ag;y.y=Bg;y.z=gf;Pf&&P.destroyStream(Qf);f.buffer=Cg;f.divisor=Dg;f.normalized=Eg;f.offset=Fg;f.size=Gg;f.state=Hg;f.stride=Ig;f.type=Jg;f.w=Kg;f.x=Lg;f.y=Mg;f.z=Ng;Y.vert=Og;Y.frag=Pg;Fa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa,kc,pa,Na,ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra,Tb,rc,mc,td){var Bc,Z,P,ja,Fa,Ab,$c,Zb,M,G,ka,va,Y,ha,ma,K,E,da,ua,sa,Ia,A,pc,Cb,oa,Db,ub,We,oe,de,ie,we,ue,zd,he,ve,Ld,Ud,Zd;Bc=a.attributes;Z=a.buffer;P=a.context;ja=a.current;Fa=a.draw;Ab=a.elements;$c=a.extensions;Zb=a.framebuffer;M=a.gl;G=a.isBufferArgs;ka=a.next;va=a.shader;Y=a.uniforms;ha=a.vao;ma=ka.blend_color;K=ja.blend_color;E=ka.blend_equation;da=
ja.blend_equation;ua=ka.blend_func;sa=ja.blend_func;Ia=ka.colorMask;A=ja.colorMask;pc=ka.depth_range;Cb=ja.depth_range;oa=ka.polygonOffset_offset;Db=ja.polygonOffset_offset;ub=ka.sample_coverage;We=ja.sample_coverage;oe=ka.scissor_box;de=ja.scissor_box;ie=ka.stencil_func;we=ja.stencil_func;ue=ka.stencil_opBack;zd=ja.stencil_opBack;he=ka.stencil_opFront;ve=ja.stencil_opFront;Ld=ka.viewport;Ud=ja.viewport;Zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,f){var h,d,c,e,g,k;h=Zb.next;h!==Zb.cur&&(h?M.bindFramebuffer(36160,h.framebuffer):M.bindFramebuffer(36160,null),Zb.cur=h);if(ja.dirty){var l,p,u,r,w,v,t,x,n,m,y,T,L,z,C,H,B,F,I,S,N,J,U,fa,aa,qa,Y,ea,la,va,ma,ua,Ya,Bb;l=ka.dither;l!==ja.dither&&(l?M.enable(3024):M.disable(3024),ja.dither=l);p=E[0];u=E[1];if(p!==da[0]||u!==da[1])M.blendEquationSeparate(p,u),da[0]=p,da[1]=u;r=ka.depth_func;r!==ja.depth_func&&(M.depthFunc(r),ja.depth_func=r);w=pc[0];v=pc[1];if(w!==Cb[0]||v!==
Cb[1])M.depthRange(w,v),Cb[0]=w,Cb[1]=v;t=ka.depth_mask;t!==ja.depth_mask&&(M.depthMask(t),ja.depth_mask=t);x=Ia[0];n=Ia[1];m=Ia[2];y=Ia[3];if(x!==A[0]||n!==A[1]||m!==A[2]||y!==A[3])M.colorMask(x,n,m,y),A[0]=x,A[1]=n,A[2]=m,A[3]=y;T=ka.cull_enable;T!==ja.cull_enable&&(T?M.enable(2884):M.disable(2884),ja.cull_enable=T);L=ka.cull_face;L!==ja.cull_face&&(M.cullFace(L),ja.cull_face=L);z=ka.frontFace;z!==ja.frontFace&&(M.frontFace(z),ja.frontFace=z);C=ka.lineWidth;C!==ja.lineWidth&&(M.lineWidth(C),ja.lineWidth=
C);H=ka.polygonOffset_enable;H!==ja.polygonOffset_enable&&(H?M.enable(32823):M.disable(32823),ja.polygonOffset_enable=H);B=oa[0];F=oa[1];if(B!==Db[0]||F!==Db[1])M.polygonOffset(B,F),Db[0]=B,Db[1]=F;I=ka.sample_alpha;I!==ja.sample_alpha&&(I?M.enable(32926):M.disable(32926),ja.sample_alpha=I);S=ka.sample_enable;S!==ja.sample_enable&&(S?M.enable(32928):M.disable(32928),ja.sample_enable=S);N=ub[0];J=ub[1];if(N!==We[0]||J!==We[1])M.sampleCoverage(N,J),We[0]=N,We[1]=J;U=ka.stencil_mask;U!==ja.stencil_mask&&
(M.stencilMask(U),ja.stencil_mask=U);fa=ie[0];aa=ie[1];qa=ie[2];if(fa!==we[0]||aa!==we[1]||qa!==we[2])M.stencilFunc(fa,aa,qa),we[0]=fa,we[1]=aa,we[2]=qa;Y=he[0];ea=he[1];la=he[2];va=he[3];if(Y!==ve[0]||ea!==ve[1]||la!==ve[2]||va!==ve[3])M.stencilOpSeparate(Y,ea,la,va),ve[0]=Y,ve[1]=ea,ve[2]=la,ve[3]=va;ma=ue[0];ua=ue[1];Ya=ue[2];Bb=ue[3];if(ma!==zd[0]||ua!==zd[1]||Ya!==zd[2]||Bb!==zd[3])M.stencilOpSeparate(ma,ua,Ya,Bb),zd[0]=ma,zd[1]=ua,zd[2]=Ya,zd[3]=Bb}M.blendColor(0,0,0,1);K[0]=0;K[1]=0;K[2]=0;
K[3]=1;M.enable(3042);ja.blend_enable=!0;M.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;M.disable(2929);ja.depth_enable=!1;M.enable(3089);ja.scissor_enable=!0;M.disable(2960);ja.stencil_enable=!1;if(d=ja.profile)c=performance.now(),b.count+=f;M.useProgram(q.program);e=$c.angle_instanced_arrays;var ab;ha.setVAO(null);M.uniform1i(D.location,!1);M.uniform1i(Ka.location,ta.bind());ab=Fa.instances;for(g=0;g<f;++g){k=a[g];var ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,
Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,Ld,wd,je,oe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,hf,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Gf,Af,
Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf;ec=k.viewport;Ob=ec.x|0;Ed=ec.y|0;Yb="width"in ec?ec.width|0:P.framebufferWidth-Ob;Pb="height"in ec?ec.height|0:P.framebufferHeight-Ed;ed=P.viewportWidth;P.viewportWidth=Yb;Qb=P.viewportHeight;P.viewportHeight=Pb;M.viewport(Ob,Ed,Yb,Pb);Ud[0]=Ob;Ud[1]=Ed;Ud[2]=Yb;Ud[3]=Pb;Ma=k.viewport;lb=Ma.x|0;rb=Ma.y|0;fb="width"in Ma?Ma.width|0:P.framebufferWidth-lb;Oa="height"in Ma?Ma.height|0:P.framebufferHeight-rb;M.scissor(lb,rb,fb,Oa);de[0]=lb;de[1]=rb;de[2]=fb;
de[3]=Oa;lc=ca.call(this,P,k,g);Ub=!1;Cc=null;bb=0;nc=!1;cc=Gc=0;hb=1;ib=0;wa=5126;Za=Sa=za=mb=0;G(lc)?(Ub=!0,Cc=Z.createStream(34962,lc),wa=Cc.dtype):(Cc=Z.getBuffer(lc))?wa=Cc.dtype:"constant"in lc?(hb=2,"number"===typeof lc.constant?(za=lc.constant,Sa=Za=mb=0):(za=0<lc.constant.length?lc.constant[0]:0,Sa=1<lc.constant.length?lc.constant[1]:0,Za=2<lc.constant.length?lc.constant[2]:0,mb=3<lc.constant.length?lc.constant[3]:0)):(Cc=G(lc.buffer)?Z.createStream(34962,lc.buffer):Z.getBuffer(lc.buffer),
wa="type"in lc?Zd[lc.type]:Cc.dtype,nc=!!lc.normalized,cc=lc.size|0,Gc=lc.offset|0,ib=lc.stride|0,bb=lc.divisor|0);Aa=Tb.location;cb=Bc[Aa];if(1===hb){cb.buffer||M.enableVertexAttribArray(Aa);La=cc||1;if(cb.type!==wa||cb.size!==La||cb.buffer!==Cc||cb.normalized!==nc||cb.offset!==Gc||cb.stride!==ib)M.bindBuffer(34962,Cc.buffer),M.vertexAttribPointer(Aa,La,wa,nc,ib,Gc),cb.type=wa,cb.size=La,cb.buffer=Cc,cb.normalized=nc,cb.offset=Gc,cb.stride=ib;cb.divisor!==bb&&(e.vertexAttribDivisorANGLE(Aa,bb),cb.divisor=
bb)}else if(cb.buffer&&(M.disableVertexAttribArray(Aa),cb.buffer=null),cb.x!==za||cb.y!==Sa||cb.z!==Za||cb.w!==mb)M.vertexAttrib4f(Aa,za,Sa,Za,mb),cb.x=za,cb.y=Sa,cb.z=Za,cb.w=mb;wb=Wa.call(this,P,k,g);vb=!1;Qa=null;Kc=0;Fb=!1;Rb=Ib=0;xa=1;vd=0;Ja=5126;ya=gb=db=Lb=0;G(wb)?(vb=!0,Qa=Z.createStream(34962,wb),Ja=Qa.dtype):(Qa=Z.getBuffer(wb))?Ja=Qa.dtype:"constant"in wb?(xa=2,"number"===typeof wb.constant?(db=wb.constant,gb=ya=Lb=0):(db=0<wb.constant.length?wb.constant[0]:0,gb=1<wb.constant.length?wb.constant[1]:
0,ya=2<wb.constant.length?wb.constant[2]:0,Lb=3<wb.constant.length?wb.constant[3]:0)):(Qa=G(wb.buffer)?Z.createStream(34962,wb.buffer):Z.getBuffer(wb.buffer),Ja="type"in wb?Zd[wb.type]:Qa.dtype,Fb=!!wb.normalized,Rb=wb.size|0,Ib=wb.offset|0,vd=wb.stride|0,Kc=wb.divisor|0);fc=mc.location;Ea=Bc[fc];if(1===xa){Ea.buffer||M.enableVertexAttribArray(fc);nb=Rb||1;if(Ea.type!==Ja||Ea.size!==nb||Ea.buffer!==Qa||Ea.normalized!==Fb||Ea.offset!==Ib||Ea.stride!==vd)M.bindBuffer(34962,Qa.buffer),M.vertexAttribPointer(fc,
nb,Ja,Fb,vd,Ib),Ea.type=Ja,Ea.size=nb,Ea.buffer=Qa,Ea.normalized=Fb,Ea.offset=Ib,Ea.stride=vd;Ea.divisor!==Kc&&(e.vertexAttribDivisorANGLE(fc,Kc),Ea.divisor=Kc)}else if(Ea.buffer&&(M.disableVertexAttribArray(fc),Ea.buffer=null),Ea.x!==db||Ea.y!==gb||Ea.z!==ya||Ea.w!==Lb)M.vertexAttrib4f(fc,db,gb,ya,Lb),Ea.x=db,Ea.y=gb,Ea.z=ya,Ea.w=Lb;ob=kc.call(this,P,k,g);Ua=!1;Va=null;oc=0;gd=!1;Ta=uc=0;Jb=1;Dc=0;Ga=5126;jb=Ba=Pa=xc=0;G(ob)?(Ua=!0,Va=Z.createStream(34962,ob),Ga=Va.dtype):(Va=Z.getBuffer(ob))?Ga=
Va.dtype:"constant"in ob?(Jb=2,"number"===typeof ob.constant?(Pa=ob.constant,Ba=jb=xc=0):(Pa=0<ob.constant.length?ob.constant[0]:0,Ba=1<ob.constant.length?ob.constant[1]:0,jb=2<ob.constant.length?ob.constant[2]:0,xc=3<ob.constant.length?ob.constant[3]:0)):(Va=G(ob.buffer)?Z.createStream(34962,ob.buffer):Z.getBuffer(ob.buffer),Ga="type"in ob?Zd[ob.type]:Va.dtype,gd=!!ob.normalized,Ta=ob.size|0,uc=ob.offset|0,Dc=ob.stride|0,oc=ob.divisor|0);sb=rc.location;xb=Bc[sb];if(1===Jb){xb.buffer||M.enableVertexAttribArray(sb);
pb=Ta||1;if(xb.type!==Ga||xb.size!==pb||xb.buffer!==Va||xb.normalized!==gd||xb.offset!==uc||xb.stride!==Dc)M.bindBuffer(34962,Va.buffer),M.vertexAttribPointer(sb,pb,Ga,gd,Dc,uc),xb.type=Ga,xb.size=pb,xb.buffer=Va,xb.normalized=gd,xb.offset=uc,xb.stride=Dc;xb.divisor!==oc&&(e.vertexAttribDivisorANGLE(sb,oc),xb.divisor=oc)}else if(xb.buffer&&(M.disableVertexAttribArray(sb),xb.buffer=null),xb.x!==Pa||xb.y!==Ba||xb.z!==jb||xb.w!==xc)M.vertexAttrib4f(sb,Pa,Ba,jb,xc),xb.x=Pa,xb.y=Ba,xb.z=jb,xb.w=xc;vc=
pa.call(this,P,k,g);tb=!1;sd=null;tc=0;Od=!1;hd=Lc=0;bd=1;Sb=0;ac=5126;kb=Xb=Ha=Mb=0;G(vc)?(tb=!0,sd=Z.createStream(34962,vc),ac=sd.dtype):(sd=Z.getBuffer(vc))?ac=sd.dtype:"constant"in vc?(bd=2,"number"===typeof vc.constant?(Ha=vc.constant,Xb=kb=Mb=0):(Ha=0<vc.constant.length?vc.constant[0]:0,Xb=1<vc.constant.length?vc.constant[1]:0,kb=2<vc.constant.length?vc.constant[2]:0,Mb=3<vc.constant.length?vc.constant[3]:0)):(sd=G(vc.buffer)?Z.createStream(34962,vc.buffer):Z.getBuffer(vc.buffer),ac="type"in
vc?Zd[vc.type]:sd.dtype,Od=!!vc.normalized,hd=vc.size|0,Lc=vc.offset|0,Sb=vc.stride|0,tc=vc.divisor|0);yb=td.location;Kb=Bc[yb];if(1===bd){Kb.buffer||M.enableVertexAttribArray(yb);Nb=hd||1;if(Kb.type!==ac||Kb.size!==Nb||Kb.buffer!==sd||Kb.normalized!==Od||Kb.offset!==Lc||Kb.stride!==Sb)M.bindBuffer(34962,sd.buffer),M.vertexAttribPointer(yb,Nb,ac,Od,Sb,Lc),Kb.type=ac,Kb.size=Nb,Kb.buffer=sd,Kb.normalized=Od,Kb.offset=Lc,Kb.stride=Sb;Kb.divisor!==tc&&(e.vertexAttribDivisorANGLE(yb,tc),Kb.divisor=tc)}else if(Kb.buffer&&
(M.disableVertexAttribArray(yb),Kb.buffer=null),Kb.x!==Ha||Kb.y!==Xb||Kb.z!==kb||Kb.w!==Mb)M.vertexAttrib4f(yb,Ha,Xb,kb,Mb),Kb.x=Ha,Kb.y=Xb,Kb.z=kb,Kb.w=Mb;gc=Na.call(this,P,k,g);jc=!1;Sc=null;zc=0;Ac=!1;Mc=Ec=0;cd=1;Tc=0;Nc=5126;Hc=Oc=zb=Gb=0;G(gc)?(jc=!0,Sc=Z.createStream(34962,gc),Nc=Sc.dtype):(Sc=Z.getBuffer(gc))?Nc=Sc.dtype:"constant"in gc?(cd=2,"number"===typeof gc.constant?(zb=gc.constant,Oc=Hc=Gb=0):(zb=0<gc.constant.length?gc.constant[0]:0,Oc=1<gc.constant.length?gc.constant[1]:0,Hc=2<gc.constant.length?
gc.constant[2]:0,Gb=3<gc.constant.length?gc.constant[3]:0)):(Sc=G(gc.buffer)?Z.createStream(34962,gc.buffer):Z.getBuffer(gc.buffer),Nc="type"in gc?Zd[gc.type]:Sc.dtype,Ac=!!gc.normalized,Mc=gc.size|0,Ec=gc.offset|0,Tc=gc.stride|0,zc=gc.divisor|0);Uc=qb.location;hc=Bc[Uc];if(1===cd){hc.buffer||M.enableVertexAttribArray(Uc);Yc=Mc||1;if(hc.type!==Nc||hc.size!==Yc||hc.buffer!==Sc||hc.normalized!==Ac||hc.offset!==Ec||hc.stride!==Tc)M.bindBuffer(34962,Sc.buffer),M.vertexAttribPointer(Uc,Yc,Nc,Ac,Tc,Ec),
hc.type=Nc,hc.size=Yc,hc.buffer=Sc,hc.normalized=Ac,hc.offset=Ec,hc.stride=Tc;hc.divisor!==zc&&(e.vertexAttribDivisorANGLE(Uc,zc),hc.divisor=zc)}else if(hc.buffer&&(M.disableVertexAttribArray(Uc),hc.buffer=null),hc.x!==zb||hc.y!==Oc||hc.z!==Hc||hc.w!==Gb)M.vertexAttrib4f(Uc,zb,Oc,Hc,Gb),hc.x=zb,hc.y=Oc,hc.z=Hc,hc.w=Gb;id=ia.call(this,P,k,g);od=!1;qe=null;Zc=0;Ld=!1;je=wd=0;oe=1;le=0;Jd=5126;pd=Fc=kd=Hd=0;G(id)?(od=!0,qe=Z.createStream(34962,id),Jd=qe.dtype):(qe=Z.getBuffer(id))?Jd=qe.dtype:"constant"in
id?(oe=2,"number"===typeof id.constant?(kd=id.constant,Fc=pd=Hd=0):(kd=0<id.constant.length?id.constant[0]:0,Fc=1<id.constant.length?id.constant[1]:0,pd=2<id.constant.length?id.constant[2]:0,Hd=3<id.constant.length?id.constant[3]:0)):(qe=G(id.buffer)?Z.createStream(34962,id.buffer):Z.getBuffer(id.buffer),Jd="type"in id?Zd[id.type]:qe.dtype,Ld=!!id.normalized,je=id.size|0,wd=id.offset|0,le=id.stride|0,Zc=id.divisor|0);ld=Xa.location;fd=Bc[ld];if(1===oe){fd.buffer||M.enableVertexAttribArray(ld);qd=
je||1;if(fd.type!==Jd||fd.size!==qd||fd.buffer!==qe||fd.normalized!==Ld||fd.offset!==wd||fd.stride!==le)M.bindBuffer(34962,qe.buffer),M.vertexAttribPointer(ld,qd,Jd,Ld,le,wd),fd.type=Jd,fd.size=qd,fd.buffer=qe,fd.normalized=Ld,fd.offset=wd,fd.stride=le;fd.divisor!==Zc&&(e.vertexAttribDivisorANGLE(ld,Zc),fd.divisor=Zc)}else if(fd.buffer&&(M.disableVertexAttribArray(ld),fd.buffer=null),fd.x!==kd||fd.y!==Fc||fd.z!==pd||fd.w!==Hd)M.vertexAttrib4f(ld,kd,Fc,pd,Hd),fd.x=kd,fd.y=Fc,fd.z=pd,fd.w=Hd;Fd=Q.call(this,
P,k,g);yd=!1;te=null;xe=0;Ye=!1;ee=me=0;ce=1;ye=0;$d=5126;re=Xc=yc=fe=0;G(Fd)?(yd=!0,te=Z.createStream(34962,Fd),$d=te.dtype):(te=Z.getBuffer(Fd))?$d=te.dtype:"constant"in Fd?(ce=2,"number"===typeof Fd.constant?(yc=Fd.constant,Xc=re=fe=0):(yc=0<Fd.constant.length?Fd.constant[0]:0,Xc=1<Fd.constant.length?Fd.constant[1]:0,re=2<Fd.constant.length?Fd.constant[2]:0,fe=3<Fd.constant.length?Fd.constant[3]:0)):(te=G(Fd.buffer)?Z.createStream(34962,Fd.buffer):Z.getBuffer(Fd.buffer),$d="type"in Fd?Zd[Fd.type]:
te.dtype,Ye=!!Fd.normalized,ee=Fd.size|0,me=Fd.offset|0,ye=Fd.stride|0,xe=Fd.divisor|0);ke=V.location;Id=Bc[ke];if(1===ce){Id.buffer||M.enableVertexAttribArray(ke);Md=ee||4;if(Id.type!==$d||Id.size!==Md||Id.buffer!==te||Id.normalized!==Ye||Id.offset!==me||Id.stride!==ye)M.bindBuffer(34962,te.buffer),M.vertexAttribPointer(ke,Md,$d,Ye,ye,me),Id.type=$d,Id.size=Md,Id.buffer=te,Id.normalized=Ye,Id.offset=me,Id.stride=ye;Id.divisor!==xe&&(e.vertexAttribDivisorANGLE(ke,xe),Id.divisor=xe)}else if(Id.buffer&&
(M.disableVertexAttribArray(ke),Id.buffer=null),Id.x!==yc||Id.y!==Xc||Id.z!==re||Id.w!==fe)M.vertexAttrib4f(ke,yc,Xc,re,fe),Id.x=yc,Id.y=Xc,Id.z=re,Id.w=fe;Pd=O.call(this,P,k,g);Qd=!1;ge=null;ze=0;Be=!1;af=ne=0;Qe=1;Me=0;se=5126;Je=Ie=He=Ee=0;G(Pd)?(Qd=!0,ge=Z.createStream(34962,Pd),se=ge.dtype):(ge=Z.getBuffer(Pd))?se=ge.dtype:"constant"in Pd?(Qe=2,"number"===typeof Pd.constant?(He=Pd.constant,Ie=Je=Ee=0):(He=0<Pd.constant.length?Pd.constant[0]:0,Ie=1<Pd.constant.length?Pd.constant[1]:0,Je=2<Pd.constant.length?
Pd.constant[2]:0,Ee=3<Pd.constant.length?Pd.constant[3]:0)):(ge=G(Pd.buffer)?Z.createStream(34962,Pd.buffer):Z.getBuffer(Pd.buffer),se="type"in Pd?Zd[Pd.type]:ge.dtype,Be=!!Pd.normalized,af=Pd.size|0,ne=Pd.offset|0,Me=Pd.stride|0,ze=Pd.divisor|0);Fe=Vb.location;Kd=Bc[Fe];if(1===Qe){Kd.buffer||M.enableVertexAttribArray(Fe);Td=af||4;if(Kd.type!==se||Kd.size!==Td||Kd.buffer!==ge||Kd.normalized!==Be||Kd.offset!==ne||Kd.stride!==Me)M.bindBuffer(34962,ge.buffer),M.vertexAttribPointer(Fe,Td,se,Be,Me,ne),
Kd.type=se,Kd.size=Td,Kd.buffer=ge,Kd.normalized=Be,Kd.offset=ne,Kd.stride=Me;Kd.divisor!==ze&&(e.vertexAttribDivisorANGLE(Fe,ze),Kd.divisor=ze)}else if(Kd.buffer&&(M.disableVertexAttribArray(Fe),Kd.buffer=null),Kd.x!==He||Kd.y!==Ie||Kd.z!==Je||Kd.w!==Ee)M.vertexAttrib4f(Fe,He,Ie,Je,Ee),Kd.x=He,Kd.y=Ie,Kd.z=Je,Kd.w=Ee;Yd=W.call(this,P,k,g);ae=!1;Ke=null;Cd=0;Rd=!1;Le=Ce=0;hf=1;$e=0;Re=5126;Se=Ve=Ze=Ne=0;G(Yd)?(ae=!0,Ke=Z.createStream(34962,Yd),Re=Ke.dtype):(Ke=Z.getBuffer(Yd))?Re=Ke.dtype:"constant"in
Yd?(hf=2,"number"===typeof Yd.constant?(Ze=Yd.constant,Ve=Se=Ne=0):(Ze=0<Yd.constant.length?Yd.constant[0]:0,Ve=1<Yd.constant.length?Yd.constant[1]:0,Se=2<Yd.constant.length?Yd.constant[2]:0,Ne=3<Yd.constant.length?Yd.constant[3]:0)):(Ke=G(Yd.buffer)?Z.createStream(34962,Yd.buffer):Z.getBuffer(Yd.buffer),Re="type"in Yd?Zd[Yd.type]:Ke.dtype,Rd=!!Yd.normalized,Le=Yd.size|0,Ce=Yd.offset|0,$e=Yd.stride|0,Cd=Yd.divisor|0);Te=na.location;Sd=Bc[Te];if(1===hf){Sd.buffer||M.enableVertexAttribArray(Te);Wd=
Le||1;if(Sd.type!==Re||Sd.size!==Wd||Sd.buffer!==Ke||Sd.normalized!==Rd||Sd.offset!==Ce||Sd.stride!==$e)M.bindBuffer(34962,Ke.buffer),M.vertexAttribPointer(Te,Wd,Re,Rd,$e,Ce),Sd.type=Re,Sd.size=Wd,Sd.buffer=Ke,Sd.normalized=Rd,Sd.offset=Ce,Sd.stride=$e;Sd.divisor!==Cd&&(e.vertexAttribDivisorANGLE(Te,Cd),Sd.divisor=Cd)}else if(Sd.buffer&&(M.disableVertexAttribArray(Te),Sd.buffer=null),Sd.x!==Ze||Sd.y!==Ve||Sd.z!==Se||Sd.w!==Ne)M.vertexAttrib4f(Te,Ze,Ve,Se,Ne),Sd.x=Ze,Sd.y=Ve,Sd.z=Se,Sd.w=Ne;Ue=P.pixelRatio;
g&&jf===Ue||(jf=Ue,M.uniform1f(Wb.location,Ue));nf=R.call(this,P,k,g);ef=nf[0];lf=nf[1];g&&kf===ef&&mf===lf||(kf=ef,mf=lf,M.uniform2f(Ca.location,ef,lf));rf=k.scale;of=rf[0];Bf=rf[1];g&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,M.uniform2f($a.location,of,Bf));Oe=k.scaleFract;De=Oe[0];qf=Oe[1];g&&pf===De&&Df===qf||(pf=De,Df=qf,M.uniform2f(X.location,De,qf));Gf=k.translate;Af=Gf[0];Ff=Gf[1];g&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,M.uniform2f(ga.location,Af,Ff));xf=k.translateFract;vf=xf[0];zf=xf[1];g&&yf===vf&&Jf===
zf||(yf=vf,Jf=zf,M.uniform2f(ra.location,vf,zf));Kf=k.opacity;g&&Lf===Kf||(Lf=Kf,M.uniform1f(ba.location,Kf));Mf=k.elements;tf=null;(tf=(Rf=G(Mf))?Ab.createStream(Mf):Ab.getElements(Mf))&&M.bindBuffer(34963,tf.buffer.buffer);If=k.offset;if(uf=k.count)0<ab?tf?e.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),ab):e.drawArraysInstancedANGLE(0,If,uf,ab):0>ab&&(tf?M.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):M.drawArrays(0,If,uf)),P.viewportWidth=ed,P.viewportHeight=Qb,Ub&&Z.destroyStream(Cc),
vb&&Z.destroyStream(Qa),Ua&&Z.destroyStream(Va),tb&&Z.destroyStream(sd),jc&&Z.destroyStream(Sc),od&&Z.destroyStream(qe),yd&&Z.destroyStream(te),Qd&&Z.destroyStream(ge),ae&&Z.destroyStream(Ke),Rf&&Ab.destroyStream(tf)}ta.unbind();ja.dirty=!0;ha.setVAO(null);d&&(b.cpuTime+=performance.now()-c)},draw:function(a){var f,h,q,t,m,y,ca,L,z,C,H,B,F,I,S,N,J,U,O,Q,Wa,R,fa,aa,qa,W,Y,ea,la,ia,va,ma,ua,pa,kc,ta,Da,Na,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,
La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Ld,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,od,qe,Zc,oe,wd,je,Xe,le,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,te,xe,Ye,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,af;f=Zb.next;f!==Zb.cur&&(f?M.bindFramebuffer(36160,f.framebuffer):M.bindFramebuffer(36160,null),Zb.cur=f);if(ja.dirty){var Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,
hf,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf;Qe=ka.dither;Qe!==ja.dither&&(Qe?M.enable(3024):M.disable(3024),ja.dither=Qe);Me=E[0];se=E[1];if(Me!==da[0]||se!==da[1])M.blendEquationSeparate(Me,se),da[0]=Me,da[1]=se;Ee=ka.depth_func;Ee!==ja.depth_func&&(M.depthFunc(Ee),ja.depth_func=Ee);He=pc[0];Ie=pc[1];if(He!==Cb[0]||Ie!==Cb[1])M.depthRange(He,Ie),Cb[0]=He,Cb[1]=Ie;Je=ka.depth_mask;Je!==ja.depth_mask&&(M.depthMask(Je),ja.depth_mask=Je);Fe=Ia[0];Kd=Ia[1];Td=Ia[2];Yd=Ia[3];if(Fe!==A[0]||Kd!==
A[1]||Td!==A[2]||Yd!==A[3])M.colorMask(Fe,Kd,Td,Yd),A[0]=Fe,A[1]=Kd,A[2]=Td,A[3]=Yd;ae=ka.cull_enable;ae!==ja.cull_enable&&(ae?M.enable(2884):M.disable(2884),ja.cull_enable=ae);Ke=ka.cull_face;Ke!==ja.cull_face&&(M.cullFace(Ke),ja.cull_face=Ke);Cd=ka.frontFace;Cd!==ja.frontFace&&(M.frontFace(Cd),ja.frontFace=Cd);Rd=ka.lineWidth;Rd!==ja.lineWidth&&(M.lineWidth(Rd),ja.lineWidth=Rd);Ce=ka.polygonOffset_enable;Ce!==ja.polygonOffset_enable&&(Ce?M.enable(32823):M.disable(32823),ja.polygonOffset_enable=
Ce);Le=oa[0];hf=oa[1];if(Le!==Db[0]||hf!==Db[1])M.polygonOffset(Le,hf),Db[0]=Le,Db[1]=hf;$e=ka.sample_alpha;$e!==ja.sample_alpha&&($e?M.enable(32926):M.disable(32926),ja.sample_alpha=$e);Re=ka.sample_enable;Re!==ja.sample_enable&&(Re?M.enable(32928):M.disable(32928),ja.sample_enable=Re);Ne=ub[0];Ze=ub[1];if(Ne!==We[0]||Ze!==We[1])M.sampleCoverage(Ne,Ze),We[0]=Ne,We[1]=Ze;Ve=ka.stencil_mask;Ve!==ja.stencil_mask&&(M.stencilMask(Ve),ja.stencil_mask=Ve);Se=ie[0];Te=ie[1];Sd=ie[2];if(Se!==we[0]||Te!==
we[1]||Sd!==we[2])M.stencilFunc(Se,Te,Sd),we[0]=Se,we[1]=Te,we[2]=Sd;Wd=he[0];Ue=he[1];jf=he[2];nf=he[3];if(Wd!==ve[0]||Ue!==ve[1]||jf!==ve[2]||nf!==ve[3])M.stencilOpSeparate(Wd,Ue,jf,nf),ve[0]=Wd,ve[1]=Ue,ve[2]=jf,ve[3]=nf;ef=ue[0];kf=ue[1];lf=ue[2];mf=ue[3];if(ef!==zd[0]||kf!==zd[1]||lf!==zd[2]||mf!==zd[3])M.stencilOpSeparate(ef,kf,lf,mf),zd[0]=ef,zd[1]=kf,zd[2]=lf,zd[3]=mf}h=a.viewport;q=h.x|0;t=h.y|0;m="width"in h?h.width|0:P.framebufferWidth-q;y="height"in h?h.height|0:P.framebufferHeight-t;
ca=P.viewportWidth;P.viewportWidth=m;L=P.viewportHeight;P.viewportHeight=y;M.viewport(q,t,m,y);Ud[0]=q;Ud[1]=t;Ud[2]=m;Ud[3]=y;M.blendColor(0,0,0,1);K[0]=0;K[1]=0;K[2]=0;K[3]=1;M.enable(3042);ja.blend_enable=!0;M.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;M.disable(2929);ja.depth_enable=!1;z=a.viewport;C=z.x|0;H=z.y|0;B="width"in z?z.width|0:P.framebufferWidth-C;F="height"in z?z.height|0:P.framebufferHeight-H;M.scissor(C,H,B,F);de[0]=C;de[1]=H;de[2]=B;de[3]=F;M.enable(3089);
ja.scissor_enable=!0;M.disable(2960);ja.stencil_enable=!1;if(I=ja.profile)S=performance.now(),b.count++;M.useProgram(c.program);N=$c.angle_instanced_arrays;ha.setVAO(null);J=k.call(this,P,a,0);U=!1;O=null;Q=0;Wa=!1;fa=R=0;aa=1;qa=0;W=5126;ia=la=ea=Y=0;G(J)?(U=!0,O=Z.createStream(34962,J),W=O.dtype):(O=Z.getBuffer(J))?W=O.dtype:"constant"in J?(aa=2,"number"===typeof J.constant?(ea=J.constant,la=ia=Y=0):(ea=0<J.constant.length?J.constant[0]:0,la=1<J.constant.length?J.constant[1]:0,ia=2<J.constant.length?
J.constant[2]:0,Y=3<J.constant.length?J.constant[3]:0)):(O=G(J.buffer)?Z.createStream(34962,J.buffer):Z.getBuffer(J.buffer),W="type"in J?Zd[J.type]:O.dtype,Wa=!!J.normalized,fa=J.size|0,R=J.offset|0,qa=J.stride|0,Q=J.divisor|0);va=Tb.location;ma=Bc[va];if(1===aa){ma.buffer||M.enableVertexAttribArray(va);ua=fa||1;if(ma.type!==W||ma.size!==ua||ma.buffer!==O||ma.normalized!==Wa||ma.offset!==R||ma.stride!==qa)M.bindBuffer(34962,O.buffer),M.vertexAttribPointer(va,ua,W,Wa,qa,R),ma.type=W,ma.size=ua,ma.buffer=
O,ma.normalized=Wa,ma.offset=R,ma.stride=qa;ma.divisor!==Q&&(N.vertexAttribDivisorANGLE(va,Q),ma.divisor=Q)}else if(ma.buffer&&(M.disableVertexAttribArray(va),ma.buffer=null),ma.x!==ea||ma.y!==la||ma.z!==ia||ma.w!==Y)M.vertexAttrib4f(va,ea,la,ia,Y),ma.x=ea,ma.y=la,ma.z=ia,ma.w=Y;pa=l.call(this,P,a,0);kc=!1;ta=null;Da=0;Na=!1;Ya=$b=0;Bb=1;ab=0;ec=5126;Pb=Yb=Ed=Ob=0;G(pa)?(kc=!0,ta=Z.createStream(34962,pa),ec=ta.dtype):(ta=Z.getBuffer(pa))?ec=ta.dtype:"constant"in pa?(Bb=2,"number"===typeof pa.constant?
(Ed=pa.constant,Yb=Pb=Ob=0):(Ed=0<pa.constant.length?pa.constant[0]:0,Yb=1<pa.constant.length?pa.constant[1]:0,Pb=2<pa.constant.length?pa.constant[2]:0,Ob=3<pa.constant.length?pa.constant[3]:0)):(ta=G(pa.buffer)?Z.createStream(34962,pa.buffer):Z.getBuffer(pa.buffer),ec="type"in pa?Zd[pa.type]:ta.dtype,Na=!!pa.normalized,Ya=pa.size|0,$b=pa.offset|0,ab=pa.stride|0,Da=pa.divisor|0);ed=mc.location;Qb=Bc[ed];if(1===Bb){Qb.buffer||M.enableVertexAttribArray(ed);Ma=Ya||1;if(Qb.type!==ec||Qb.size!==Ma||Qb.buffer!==
ta||Qb.normalized!==Na||Qb.offset!==$b||Qb.stride!==ab)M.bindBuffer(34962,ta.buffer),M.vertexAttribPointer(ed,Ma,ec,Na,ab,$b),Qb.type=ec,Qb.size=Ma,Qb.buffer=ta,Qb.normalized=Na,Qb.offset=$b,Qb.stride=ab;Qb.divisor!==Da&&(N.vertexAttribDivisorANGLE(ed,Da),Qb.divisor=Da)}else if(Qb.buffer&&(M.disableVertexAttribArray(ed),Qb.buffer=null),Qb.x!==Ed||Qb.y!==Yb||Qb.z!==Pb||Qb.w!==Ob)M.vertexAttrib4f(ed,Ed,Yb,Pb,Ob),Qb.x=Ed,Qb.y=Yb,Qb.z=Pb,Qb.w=Ob;lb=d.call(this,P,a,0);rb=!1;fb=null;Oa=0;lc=!1;Cc=Ub=0;
bb=1;nc=0;Gc=5126;wa=ib=hb=cc=0;G(lb)?(rb=!0,fb=Z.createStream(34962,lb),Gc=fb.dtype):(fb=Z.getBuffer(lb))?Gc=fb.dtype:"constant"in lb?(bb=2,"number"===typeof lb.constant?(hb=lb.constant,ib=wa=cc=0):(hb=0<lb.constant.length?lb.constant[0]:0,ib=1<lb.constant.length?lb.constant[1]:0,wa=2<lb.constant.length?lb.constant[2]:0,cc=3<lb.constant.length?lb.constant[3]:0)):(fb=G(lb.buffer)?Z.createStream(34962,lb.buffer):Z.getBuffer(lb.buffer),Gc="type"in lb?Zd[lb.type]:fb.dtype,lc=!!lb.normalized,Cc=lb.size|
0,Ub=lb.offset|0,nc=lb.stride|0,Oa=lb.divisor|0);mb=rc.location;za=Bc[mb];if(1===bb){za.buffer||M.enableVertexAttribArray(mb);Sa=Cc||1;if(za.type!==Gc||za.size!==Sa||za.buffer!==fb||za.normalized!==lc||za.offset!==Ub||za.stride!==nc)M.bindBuffer(34962,fb.buffer),M.vertexAttribPointer(mb,Sa,Gc,lc,nc,Ub),za.type=Gc,za.size=Sa,za.buffer=fb,za.normalized=lc,za.offset=Ub,za.stride=nc;za.divisor!==Oa&&(N.vertexAttribDivisorANGLE(mb,Oa),za.divisor=Oa)}else if(za.buffer&&(M.disableVertexAttribArray(mb),za.buffer=
null),za.x!==hb||za.y!==ib||za.z!==wa||za.w!==cc)M.vertexAttrib4f(mb,hb,ib,wa,cc),za.x=hb,za.y=ib,za.z=wa,za.w=cc;Za=p.call(this,P,a,0);Aa=!1;cb=null;La=0;wb=!1;Qa=vb=0;Kc=1;Fb=0;Ib=5126;Ja=vd=xa=Rb=0;G(Za)?(Aa=!0,cb=Z.createStream(34962,Za),Ib=cb.dtype):(cb=Z.getBuffer(Za))?Ib=cb.dtype:"constant"in Za?(Kc=2,"number"===typeof Za.constant?(xa=Za.constant,vd=Ja=Rb=0):(xa=0<Za.constant.length?Za.constant[0]:0,vd=1<Za.constant.length?Za.constant[1]:0,Ja=2<Za.constant.length?Za.constant[2]:0,Rb=3<Za.constant.length?
Za.constant[3]:0)):(cb=G(Za.buffer)?Z.createStream(34962,Za.buffer):Z.getBuffer(Za.buffer),Ib="type"in Za?Zd[Za.type]:cb.dtype,wb=!!Za.normalized,Qa=Za.size|0,vb=Za.offset|0,Fb=Za.stride|0,La=Za.divisor|0);Lb=td.location;db=Bc[Lb];if(1===Kc){db.buffer||M.enableVertexAttribArray(Lb);gb=Qa||1;if(db.type!==Ib||db.size!==gb||db.buffer!==cb||db.normalized!==wb||db.offset!==vb||db.stride!==Fb)M.bindBuffer(34962,cb.buffer),M.vertexAttribPointer(Lb,gb,Ib,wb,Fb,vb),db.type=Ib,db.size=gb,db.buffer=cb,db.normalized=
wb,db.offset=vb,db.stride=Fb;db.divisor!==La&&(N.vertexAttribDivisorANGLE(Lb,La),db.divisor=La)}else if(db.buffer&&(M.disableVertexAttribArray(Lb),db.buffer=null),db.x!==xa||db.y!==vd||db.z!==Ja||db.w!==Rb)M.vertexAttrib4f(Lb,xa,vd,Ja,Rb),db.x=xa,db.y=vd,db.z=Ja,db.w=Rb;ya=g.call(this,P,a,0);fc=!1;Ea=null;nb=0;ob=!1;Va=Ua=0;oc=1;gd=0;uc=5126;Ga=Dc=Jb=Ta=0;G(ya)?(fc=!0,Ea=Z.createStream(34962,ya),uc=Ea.dtype):(Ea=Z.getBuffer(ya))?uc=Ea.dtype:"constant"in ya?(oc=2,"number"===typeof ya.constant?(Jb=
ya.constant,Dc=Ga=Ta=0):(Jb=0<ya.constant.length?ya.constant[0]:0,Dc=1<ya.constant.length?ya.constant[1]:0,Ga=2<ya.constant.length?ya.constant[2]:0,Ta=3<ya.constant.length?ya.constant[3]:0)):(Ea=G(ya.buffer)?Z.createStream(34962,ya.buffer):Z.getBuffer(ya.buffer),uc="type"in ya?Zd[ya.type]:Ea.dtype,ob=!!ya.normalized,Va=ya.size|0,Ua=ya.offset|0,gd=ya.stride|0,nb=ya.divisor|0);xc=qb.location;Pa=Bc[xc];if(1===oc){Pa.buffer||M.enableVertexAttribArray(xc);Ba=Va||1;if(Pa.type!==uc||Pa.size!==Ba||Pa.buffer!==
Ea||Pa.normalized!==ob||Pa.offset!==Ua||Pa.stride!==gd)M.bindBuffer(34962,Ea.buffer),M.vertexAttribPointer(xc,Ba,uc,ob,gd,Ua),Pa.type=uc,Pa.size=Ba,Pa.buffer=Ea,Pa.normalized=ob,Pa.offset=Ua,Pa.stride=gd;Pa.divisor!==nb&&(N.vertexAttribDivisorANGLE(xc,nb),Pa.divisor=nb)}else if(Pa.buffer&&(M.disableVertexAttribArray(xc),Pa.buffer=null),Pa.x!==Jb||Pa.y!==Dc||Pa.z!==Ga||Pa.w!==Ta)M.vertexAttrib4f(xc,Jb,Dc,Ga,Ta),Pa.x=Jb,Pa.y=Dc,Pa.z=Ga,Pa.w=Ta;jb=u.call(this,P,a,0);sb=!1;xb=null;pb=0;vc=!1;sd=tb=0;
tc=1;Ld=0;Lc=5126;ac=Sb=bd=hd=0;G(jb)?(sb=!0,xb=Z.createStream(34962,jb),Lc=xb.dtype):(xb=Z.getBuffer(jb))?Lc=xb.dtype:"constant"in jb?(tc=2,"number"===typeof jb.constant?(bd=jb.constant,Sb=ac=hd=0):(bd=0<jb.constant.length?jb.constant[0]:0,Sb=1<jb.constant.length?jb.constant[1]:0,ac=2<jb.constant.length?jb.constant[2]:0,hd=3<jb.constant.length?jb.constant[3]:0)):(xb=G(jb.buffer)?Z.createStream(34962,jb.buffer):Z.getBuffer(jb.buffer),Lc="type"in jb?Zd[jb.type]:xb.dtype,vc=!!jb.normalized,sd=jb.size|
0,tb=jb.offset|0,Ld=jb.stride|0,pb=jb.divisor|0);Mb=Xa.location;Ha=Bc[Mb];if(1===tc){Ha.buffer||M.enableVertexAttribArray(Mb);Xb=sd||1;if(Ha.type!==Lc||Ha.size!==Xb||Ha.buffer!==xb||Ha.normalized!==vc||Ha.offset!==tb||Ha.stride!==Ld)M.bindBuffer(34962,xb.buffer),M.vertexAttribPointer(Mb,Xb,Lc,vc,Ld,tb),Ha.type=Lc,Ha.size=Xb,Ha.buffer=xb,Ha.normalized=vc,Ha.offset=tb,Ha.stride=Ld;Ha.divisor!==pb&&(N.vertexAttribDivisorANGLE(Mb,pb),Ha.divisor=pb)}else if(Ha.buffer&&(M.disableVertexAttribArray(Mb),Ha.buffer=
null),Ha.x!==bd||Ha.y!==Sb||Ha.z!==ac||Ha.w!==hd)M.vertexAttrib4f(Mb,bd,Sb,ac,hd),Ha.x=bd,Ha.y=Sb,Ha.z=ac,Ha.w=hd;kb=n.call(this,P,a,0);yb=!1;Kb=null;Nb=0;gc=!1;Sc=jc=0;zc=1;Ac=0;Ec=5126;Nc=Tc=cd=Mc=0;G(kb)?(yb=!0,Kb=Z.createStream(34962,kb),Ec=Kb.dtype):(Kb=Z.getBuffer(kb))?Ec=Kb.dtype:"constant"in kb?(zc=2,"number"===typeof kb.constant?(cd=kb.constant,Tc=Nc=Mc=0):(cd=0<kb.constant.length?kb.constant[0]:0,Tc=1<kb.constant.length?kb.constant[1]:0,Nc=2<kb.constant.length?kb.constant[2]:0,Mc=3<kb.constant.length?
kb.constant[3]:0)):(Kb=G(kb.buffer)?Z.createStream(34962,kb.buffer):Z.getBuffer(kb.buffer),Ec="type"in kb?Zd[kb.type]:Kb.dtype,gc=!!kb.normalized,Sc=kb.size|0,jc=kb.offset|0,Ac=kb.stride|0,Nb=kb.divisor|0);Gb=V.location;zb=Bc[Gb];if(1===zc){zb.buffer||M.enableVertexAttribArray(Gb);Oc=Sc||4;if(zb.type!==Ec||zb.size!==Oc||zb.buffer!==Kb||zb.normalized!==gc||zb.offset!==jc||zb.stride!==Ac)M.bindBuffer(34962,Kb.buffer),M.vertexAttribPointer(Gb,Oc,Ec,gc,Ac,jc),zb.type=Ec,zb.size=Oc,zb.buffer=Kb,zb.normalized=
gc,zb.offset=jc,zb.stride=Ac;zb.divisor!==Nb&&(N.vertexAttribDivisorANGLE(Gb,Nb),zb.divisor=Nb)}else if(zb.buffer&&(M.disableVertexAttribArray(Gb),zb.buffer=null),zb.x!==cd||zb.y!==Tc||zb.z!==Nc||zb.w!==Mc)M.vertexAttrib4f(Gb,cd,Tc,Nc,Mc),zb.x=cd,zb.y=Tc,zb.z=Nc,zb.w=Mc;Hc=w.call(this,P,a,0);Uc=!1;hc=null;Yc=0;id=!1;qe=od=0;Zc=1;oe=0;wd=5126;Jd=le=Xe=je=0;G(Hc)?(Uc=!0,hc=Z.createStream(34962,Hc),wd=hc.dtype):(hc=Z.getBuffer(Hc))?wd=hc.dtype:"constant"in Hc?(Zc=2,"number"===typeof Hc.constant?(Xe=
Hc.constant,le=Jd=je=0):(Xe=0<Hc.constant.length?Hc.constant[0]:0,le=1<Hc.constant.length?Hc.constant[1]:0,Jd=2<Hc.constant.length?Hc.constant[2]:0,je=3<Hc.constant.length?Hc.constant[3]:0)):(hc=G(Hc.buffer)?Z.createStream(34962,Hc.buffer):Z.getBuffer(Hc.buffer),wd="type"in Hc?Zd[Hc.type]:hc.dtype,id=!!Hc.normalized,qe=Hc.size|0,od=Hc.offset|0,oe=Hc.stride|0,Yc=Hc.divisor|0);Hd=Vb.location;kd=Bc[Hd];if(1===Zc){kd.buffer||M.enableVertexAttribArray(Hd);Fc=qe||4;if(kd.type!==wd||kd.size!==Fc||kd.buffer!==
hc||kd.normalized!==id||kd.offset!==od||kd.stride!==oe)M.bindBuffer(34962,hc.buffer),M.vertexAttribPointer(Hd,Fc,wd,id,oe,od),kd.type=wd,kd.size=Fc,kd.buffer=hc,kd.normalized=id,kd.offset=od,kd.stride=oe;kd.divisor!==Yc&&(N.vertexAttribDivisorANGLE(Hd,Yc),kd.divisor=Yc)}else if(kd.buffer&&(M.disableVertexAttribArray(Hd),kd.buffer=null),kd.x!==Xe||kd.y!==le||kd.z!==Jd||kd.w!==je)M.vertexAttrib4f(Hd,Xe,le,Jd,je),kd.x=Xe,kd.y=le,kd.z=Jd,kd.w=je;pd=r.call(this,P,a,0);ld=!1;fd=null;qd=0;Fd=!1;te=yd=0;
xe=1;Ye=0;me=5126;$d=ye=ce=ee=0;G(pd)?(ld=!0,fd=Z.createStream(34962,pd),me=fd.dtype):(fd=Z.getBuffer(pd))?me=fd.dtype:"constant"in pd?(xe=2,"number"===typeof pd.constant?(ce=pd.constant,ye=$d=ee=0):(ce=0<pd.constant.length?pd.constant[0]:0,ye=1<pd.constant.length?pd.constant[1]:0,$d=2<pd.constant.length?pd.constant[2]:0,ee=3<pd.constant.length?pd.constant[3]:0)):(fd=G(pd.buffer)?Z.createStream(34962,pd.buffer):Z.getBuffer(pd.buffer),me="type"in pd?Zd[pd.type]:fd.dtype,Fd=!!pd.normalized,te=pd.size|
0,yd=pd.offset|0,Ye=pd.stride|0,qd=pd.divisor|0);fe=na.location;yc=Bc[fe];if(1===xe){yc.buffer||M.enableVertexAttribArray(fe);Xc=te||1;if(yc.type!==me||yc.size!==Xc||yc.buffer!==fd||yc.normalized!==Fd||yc.offset!==yd||yc.stride!==Ye)M.bindBuffer(34962,fd.buffer),M.vertexAttribPointer(fe,Xc,me,Fd,Ye,yd),yc.type=me,yc.size=Xc,yc.buffer=fd,yc.normalized=Fd,yc.offset=yd,yc.stride=Ye;yc.divisor!==qd&&(N.vertexAttribDivisorANGLE(fe,qd),yc.divisor=qd)}else if(yc.buffer&&(M.disableVertexAttribArray(fe),yc.buffer=
null),yc.x!==ce||yc.y!==ye||yc.z!==$d||yc.w!==ee)M.vertexAttrib4f(fe,ce,ye,$d,ee),yc.x=ce,yc.y=ye,yc.z=$d,yc.w=ee;M.uniform1i(D.location,!1);M.uniform1f(Wb.location,P.pixelRatio);re=x.call(this,P,a,0);M.uniform2f(Ca.location,re[0],re[1]);ke=a.scale;M.uniform2f($a.location,ke[0],ke[1]);Id=a.scaleFract;M.uniform2f(X.location,Id[0],Id[1]);Md=a.translate;M.uniform2f(ga.location,Md[0],Md[1]);Pd=a.translateFract;M.uniform2f(ra.location,Pd[0],Pd[1]);M.uniform1f(ba.location,a.opacity);M.uniform1i(Ka.location,
v.bind());Qd=a.elements;ge=null;(ge=(ze=G(Qd))?Ab.createStream(Qd):Ab.getElements(Qd))&&M.bindBuffer(34963,ge.buffer.buffer);Be=a.offset;if(ne=a.count)af=Fa.instances,0<af?ge?N.drawElementsInstancedANGLE(0,ne,ge.type,Be<<(ge.type-5121>>1),af):N.drawArraysInstancedANGLE(0,Be,ne,af):0>af&&(ge?M.drawElements(0,ne,ge.type,Be<<(ge.type-5121>>1)):M.drawArrays(0,Be,ne)),ja.dirty=!0,ha.setVAO(null),P.viewportWidth=ca,P.viewportHeight=L,I&&(b.cpuTime+=performance.now()-S),U&&Z.destroyStream(O),kc&&Z.destroyStream(ta),
rb&&Z.destroyStream(fb),Aa&&Z.destroyStream(cb),fc&&Z.destroyStream(Ea),sb&&Z.destroyStream(xb),yb&&Z.destroyStream(Kb),Uc&&Z.destroyStream(hc),ld&&Z.destroyStream(fd),v.unbind(),ze&&Ab.destroyStream(ge)},scope:function(a,d,c){var e,g,q,k,l,p,u,r,w,v,x,n,T,ca,A,E,D,K,M,O,Q,Wa,R,V,W,da,X,ha,ia,ba,pa,ga,sa,na,oa,kc,ta,ra,Ia,Na,Ca,Ka,ub,Cb,Xa,Db,$a,Ma,lb,rb,fb,Oa,Bc,qb,td,bb,pc,Tb,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Vb,Fb,Ib,Rb,xa,Wb,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,rc,uc,Ta,Jb,Dc,Ga,xc,Pa,
Ba,jb,sb,xb,pb,vc,tb,mc,tc,ie,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id,$c,Zb,Zc,zd,wd,Ud,we,de,Jd,Hd,kd,Fc,pd,ld,fd,qd,Fd,yd,he,ue,ve,me,ee,ce,ye,$d,fe,yc,Xc,re,ke,Id,Md,Pd,Qd,ge,ze,Be,ne,We,Qe,Me,se,Ee,He,Ie,Je,Fe,Kd,Td,Yd,ae,Ke,Cd,Rd,Ce,Le,hf,$e,Re,Ne,Ze,Ve,Se,Te,Sd,Wd,Ue,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,
yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;e=a.viewport;g=e.x|0;q=e.y|0;k="width"in e?e.width|0:P.framebufferWidth-g;l="height"in e?e.height|0:P.framebufferHeight-q;p=P.viewportWidth;P.viewportWidth=k;u=P.viewportHeight;P.viewportHeight=l;r=Ld[0];Ld[0]=g;w=Ld[1];Ld[1]=q;v=Ld[2];Ld[2]=k;x=Ld[3];Ld[3]=l;n=ma[0];ma[0]=0;T=ma[1];ma[1]=0;ca=ma[2];ma[2]=0;A=ma[3];ma[3]=1;E=ka.blend_enable;ka.blend_enable=!0;D=ua[0];ua[0]=770;K=ua[1];ua[1]=771;M=ua[2];
ua[2]=773;O=ua[3];ua[3]=1;Q=ka.depth_enable;ka.depth_enable=!1;Wa=a.viewport;R=Wa.x|0;V=Wa.y|0;W="width"in Wa?Wa.width|0:P.framebufferWidth-R;da="height"in Wa?Wa.height|0:P.framebufferHeight-V;X=oe[0];oe[0]=R;ha=oe[1];oe[1]=V;ia=oe[2];oe[2]=W;ba=oe[3];oe[3]=da;pa=ka.scissor_enable;ka.scissor_enable=!0;ga=ka.stencil_enable;ka.stencil_enable=!1;if(sa=ja.profile)na=performance.now(),b.count++;oa=a.elements;kc=null;kc=(ta=G(oa))?Ab.createStream(oa):Ab.getElements(oa);ra=Fa.elements;Fa.elements=kc;Ia=
a.offset;Na=Fa.offset;Fa.offset=Ia;Ca=a.count;Ka=Fa.count;Fa.count=Ca;ub=Fa.primitive;Fa.primitive=0;Cb=Y[45];Y[45]=!1;Xa=a.markerTexture;Db=Y[48];Y[48]=Xa;$a=a.opacity;Ma=Y[10];Y[10]=$a;lb=t.call(this,P,a,c);rb=Y[46];Y[46]=lb;fb=Y[47];Y[47]=m;Oa=P.pixelRatio;Bc=Y[34];Y[34]=Oa;qb=a.scale;td=Y[6];Y[6]=qb;bb=a.scaleFract;pc=Y[7];Y[7]=bb;Tb=a.translate;cc=Y[8];Y[8]=Tb;hb=a.translateFract;ib=Y[9];Y[9]=hb;wa=z.call(this,P,a,c);mb=!1;za=null;Sa=0;Za=!1;cb=Aa=0;La=1;wb=0;vb=5126;Ib=Fb=Vb=Qa=0;G(wa)?(mb=
!0,za=Z.createStream(34962,wa),vb=za.dtype):(za=Z.getBuffer(wa))?vb=za.dtype:"constant"in wa?(La=2,"number"===typeof wa.constant?(Vb=wa.constant,Fb=Ib=Qa=0):(Vb=0<wa.constant.length?wa.constant[0]:0,Fb=1<wa.constant.length?wa.constant[1]:0,Ib=2<wa.constant.length?wa.constant[2]:0,Qa=3<wa.constant.length?wa.constant[3]:0)):(za=G(wa.buffer)?Z.createStream(34962,wa.buffer):Z.getBuffer(wa.buffer),vb="type"in wa?Zd[wa.type]:za.dtype,Za=!!wa.normalized,cb=wa.size|0,Aa=wa.offset|0,wb=wa.stride|0,Sa=wa.divisor|
0);Rb=B.buffer;B.buffer=za;xa=B.divisor;B.divisor=Sa;Wb=B.normalized;B.normalized=Za;Ja=B.offset;B.offset=Aa;Lb=B.size;B.size=cb;db=B.state;B.state=La;gb=B.stride;B.stride=wb;ya=B.type;B.type=vb;fc=B.w;B.w=Qa;Ea=B.x;B.x=Vb;nb=B.y;B.y=Fb;ob=B.z;B.z=Ib;Ua=S.call(this,P,a,c);Va=!1;oc=null;rc=0;uc=!1;Jb=Ta=0;Dc=1;Ga=0;xc=5126;sb=jb=Ba=Pa=0;G(Ua)?(Va=!0,oc=Z.createStream(34962,Ua),xc=oc.dtype):(oc=Z.getBuffer(Ua))?xc=oc.dtype:"constant"in Ua?(Dc=2,"number"===typeof Ua.constant?(Ba=Ua.constant,jb=sb=Pa=
0):(Ba=0<Ua.constant.length?Ua.constant[0]:0,jb=1<Ua.constant.length?Ua.constant[1]:0,sb=2<Ua.constant.length?Ua.constant[2]:0,Pa=3<Ua.constant.length?Ua.constant[3]:0)):(oc=G(Ua.buffer)?Z.createStream(34962,Ua.buffer):Z.getBuffer(Ua.buffer),xc="type"in Ua?Zd[Ua.type]:oc.dtype,uc=!!Ua.normalized,Jb=Ua.size|0,Ta=Ua.offset|0,Ga=Ua.stride|0,rc=Ua.divisor|0);xb=J.buffer;J.buffer=oc;pb=J.divisor;J.divisor=rc;vc=J.normalized;J.normalized=uc;tb=J.offset;J.offset=Ta;mc=J.size;J.size=Jb;tc=J.state;J.state=
Dc;ie=J.stride;J.stride=Ga;Lc=J.type;J.type=xc;hd=J.w;J.w=Pa;bd=J.x;J.x=Ba;Sb=J.y;J.y=jb;ac=J.z;J.z=sb;Mb=fa.call(this,P,a,c);Ha=!1;Xb=null;kb=0;yb=!1;Nb=Kb=0;gc=1;jc=0;Sc=5126;Mc=Ec=Ac=zc=0;G(Mb)?(Ha=!0,Xb=Z.createStream(34962,Mb),Sc=Xb.dtype):(Xb=Z.getBuffer(Mb))?Sc=Xb.dtype:"constant"in Mb?(gc=2,"number"===typeof Mb.constant?(Ac=Mb.constant,Ec=Mc=zc=0):(Ac=0<Mb.constant.length?Mb.constant[0]:0,Ec=1<Mb.constant.length?Mb.constant[1]:0,Mc=2<Mb.constant.length?Mb.constant[2]:0,zc=3<Mb.constant.length?
Mb.constant[3]:0)):(Xb=G(Mb.buffer)?Z.createStream(34962,Mb.buffer):Z.getBuffer(Mb.buffer),Sc="type"in Mb?Zd[Mb.type]:Xb.dtype,yb=!!Mb.normalized,Nb=Mb.size|0,Kb=Mb.offset|0,jc=Mb.stride|0,kb=Mb.divisor|0);cd=H.buffer;H.buffer=Xb;Tc=H.divisor;H.divisor=kb;Nc=H.normalized;H.normalized=yb;Gb=H.offset;H.offset=Kb;zb=H.size;H.size=Nb;Oc=H.state;H.state=gc;Hc=H.stride;H.stride=jc;Uc=H.type;H.type=Sc;hc=H.w;H.w=zc;Yc=H.x;H.x=Ac;id=H.y;H.y=Ec;$c=H.z;H.z=Mc;Zb=C.call(this,P,a,c);Zc=!1;zd=null;wd=0;Ud=!1;
de=we=0;Jd=1;Hd=0;kd=5126;fd=ld=pd=Fc=0;G(Zb)?(Zc=!0,zd=Z.createStream(34962,Zb),kd=zd.dtype):(zd=Z.getBuffer(Zb))?kd=zd.dtype:"constant"in Zb?(Jd=2,"number"===typeof Zb.constant?(pd=Zb.constant,ld=fd=Fc=0):(pd=0<Zb.constant.length?Zb.constant[0]:0,ld=1<Zb.constant.length?Zb.constant[1]:0,fd=2<Zb.constant.length?Zb.constant[2]:0,Fc=3<Zb.constant.length?Zb.constant[3]:0)):(zd=G(Zb.buffer)?Z.createStream(34962,Zb.buffer):Z.getBuffer(Zb.buffer),kd="type"in Zb?Zd[Zb.type]:zd.dtype,Ud=!!Zb.normalized,
de=Zb.size|0,we=Zb.offset|0,Hd=Zb.stride|0,wd=Zb.divisor|0);qd=I.buffer;I.buffer=zd;Fd=I.divisor;I.divisor=wd;yd=I.normalized;I.normalized=Ud;he=I.offset;I.offset=we;ue=I.size;I.size=de;ve=I.state;I.state=Jd;me=I.stride;I.stride=Hd;ee=I.type;I.type=kd;ce=I.w;I.w=Fc;ye=I.x;I.x=pd;$d=I.y;I.y=ld;fe=I.z;I.z=fd;yc=aa.call(this,P,a,c);Xc=!1;re=null;ke=0;Id=!1;Pd=Md=0;Qd=1;ge=0;ze=5126;Qe=We=ne=Be=0;G(yc)?(Xc=!0,re=Z.createStream(34962,yc),ze=re.dtype):(re=Z.getBuffer(yc))?ze=re.dtype:"constant"in yc?(Qd=
2,"number"===typeof yc.constant?(ne=yc.constant,We=Qe=Be=0):(ne=0<yc.constant.length?yc.constant[0]:0,We=1<yc.constant.length?yc.constant[1]:0,Qe=2<yc.constant.length?yc.constant[2]:0,Be=3<yc.constant.length?yc.constant[3]:0)):(re=G(yc.buffer)?Z.createStream(34962,yc.buffer):Z.getBuffer(yc.buffer),ze="type"in yc?Zd[yc.type]:re.dtype,Id=!!yc.normalized,Pd=yc.size|0,Md=yc.offset|0,ge=yc.stride|0,ke=yc.divisor|0);Me=L.buffer;L.buffer=re;se=L.divisor;L.divisor=ke;Ee=L.normalized;L.normalized=Id;He=L.offset;
L.offset=Md;Ie=L.size;L.size=Pd;Je=L.state;L.state=Qd;Fe=L.stride;L.stride=ge;Kd=L.type;L.type=ze;Td=L.w;L.w=Be;Yd=L.x;L.x=ne;ae=L.y;L.y=We;Ke=L.z;L.z=Qe;Cd=U.call(this,P,a,c);Rd=!1;Ce=null;Le=0;hf=!1;Re=$e=0;Ne=1;Ze=0;Ve=5126;Wd=Sd=Te=Se=0;G(Cd)?(Rd=!0,Ce=Z.createStream(34962,Cd),Ve=Ce.dtype):(Ce=Z.getBuffer(Cd))?Ve=Ce.dtype:"constant"in Cd?(Ne=2,"number"===typeof Cd.constant?(Te=Cd.constant,Sd=Wd=Se=0):(Te=0<Cd.constant.length?Cd.constant[0]:0,Sd=1<Cd.constant.length?Cd.constant[1]:0,Wd=2<Cd.constant.length?
Cd.constant[2]:0,Se=3<Cd.constant.length?Cd.constant[3]:0)):(Ce=G(Cd.buffer)?Z.createStream(34962,Cd.buffer):Z.getBuffer(Cd.buffer),Ve="type"in Cd?Zd[Cd.type]:Ce.dtype,hf=!!Cd.normalized,Re=Cd.size|0,$e=Cd.offset|0,Ze=Cd.stride|0,Le=Cd.divisor|0);Ue=F.buffer;F.buffer=Ce;jf=F.divisor;F.divisor=Le;nf=F.normalized;F.normalized=hf;ef=F.offset;F.offset=$e;kf=F.size;F.size=Re;lf=F.state;F.state=Ne;mf=F.stride;F.stride=Ze;rf=F.type;F.type=Ve;of=F.w;F.w=Se;sf=F.x;F.x=Te;Bf=F.y;F.y=Sd;Cf=F.z;F.z=Wd;Oe=la.call(this,
P,a,c);De=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;G(Oe)?(De=!0,pf=Z.createStream(34962,Oe),wf=pf.dtype):(pf=Z.getBuffer(Oe))?wf=pf.dtype:"constant"in Oe?(Ef=2,"number"===typeof Oe.constant?(vf=Oe.constant,yf=zf=xf=0):(vf=0<Oe.constant.length?Oe.constant[0]:0,yf=1<Oe.constant.length?Oe.constant[1]:0,zf=2<Oe.constant.length?Oe.constant[2]:0,xf=3<Oe.constant.length?Oe.constant[3]:0)):(pf=G(Oe.buffer)?Z.createStream(34962,Oe.buffer):Z.getBuffer(Oe.buffer),wf="type"in Oe?Zd[Oe.type]:
pf.dtype,Df=!!Oe.normalized,Af=Oe.size|0,Gf=Oe.offset|0,Ff=Oe.stride|0,qf=Oe.divisor|0);Jf=N.buffer;N.buffer=pf;Kf=N.divisor;N.divisor=qf;Lf=N.normalized;N.normalized=Df;Mf=N.offset;N.offset=Gf;tf=N.size;N.size=Af;Rf=N.state;N.state=Ef;If=N.stride;N.stride=Ff;uf=N.type;N.type=wf;dg=N.w;N.w=xf;Sf=N.x;N.x=vf;Tf=N.y;N.y=yf;qg=N.z;N.z=zf;ff=ea.call(this,P,a,c);cf=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;G(ff)?(cf=!0,Nf=Z.createStream(34962,ff),Wf=Nf.dtype):(Nf=Z.getBuffer(ff))?Wf=
Nf.dtype:"constant"in ff?(hg=2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Nf=G(ff.buffer)?Z.createStream(34962,ff.buffer):Z.getBuffer(ff.buffer),Wf="type"in ff?Zd[ff.type]:Nf.dtype,eg=!!ff.normalized,gg=ff.size|0,fg=ff.offset|0,ig=ff.stride|0,Of=ff.divisor|0);jg=y.buffer;y.buffer=Nf;rg=y.divisor;y.divisor=Of;sg=y.normalized;
y.normalized=eg;tg=y.offset;y.offset=fg;ug=y.size;y.size=gg;vg=y.state;y.state=hg;wg=y.stride;y.stride=ig;xg=y.type;y.type=Wf;yg=y.w;y.w=Uf;zg=y.x;y.x=Xf;Ag=y.y;y.y=Yf;Bg=y.z;y.z=Zf;gf=h.call(this,P,a,c);df=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;G(gf)?(df=!0,Pf=Z.createStream(34962,gf),$f=Pf.dtype):(Pf=Z.getBuffer(gf))?$f=Pf.dtype:"constant"in gf?(ng=2,"number"===typeof gf.constant?(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?
gf.constant[1]:0,cg=2<gf.constant.length?gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Pf=G(gf.buffer)?Z.createStream(34962,gf.buffer):Z.getBuffer(gf.buffer),$f="type"in gf?Zd[gf.type]:Pf.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Qf=gf.divisor|0);pg=f.buffer;f.buffer=Pf;Cg=f.divisor;f.divisor=Qf;Dg=f.normalized;f.normalized=kg;Eg=f.offset;f.offset=lg;Fg=f.size;f.size=mg;Gg=f.state;f.state=ng;Hg=f.stride;f.stride=og;Ig=f.type;f.type=$f;Jg=f.w;f.w=Vf;Kg=f.x;
f.x=ag;Lg=f.y;f.y=bg;Mg=f.z;f.z=cg;Ng=va.vert;va.vert=59;Og=va.frag;va.frag=58;ja.dirty=!0;d(P,a,c);P.viewportWidth=p;P.viewportHeight=u;Ld[0]=r;Ld[1]=w;Ld[2]=v;Ld[3]=x;ma[0]=n;ma[1]=T;ma[2]=ca;ma[3]=A;ka.blend_enable=E;ua[0]=D;ua[1]=K;ua[2]=M;ua[3]=O;ka.depth_enable=Q;oe[0]=X;oe[1]=ha;oe[2]=ia;oe[3]=ba;ka.scissor_enable=pa;ka.stencil_enable=ga;sa&&(b.cpuTime+=performance.now()-na);ta&&Ab.destroyStream(kc);Fa.elements=ra;Fa.offset=Na;Fa.count=Ka;Fa.primitive=ub;Y[45]=Cb;Y[48]=Db;Y[10]=Ma;Y[46]=rb;
Y[47]=fb;Y[34]=Bc;Y[6]=td;Y[7]=pc;Y[8]=cc;Y[9]=ib;mb&&Z.destroyStream(za);B.buffer=Rb;B.divisor=xa;B.normalized=Wb;B.offset=Ja;B.size=Lb;B.state=db;B.stride=gb;B.type=ya;B.w=fc;B.x=Ea;B.y=nb;B.z=ob;Va&&Z.destroyStream(oc);J.buffer=xb;J.divisor=pb;J.normalized=vc;J.offset=tb;J.size=mc;J.state=tc;J.stride=ie;J.type=Lc;J.w=hd;J.x=bd;J.y=Sb;J.z=ac;Ha&&Z.destroyStream(Xb);H.buffer=cd;H.divisor=Tc;H.normalized=Nc;H.offset=Gb;H.size=zb;H.state=Oc;H.stride=Hc;H.type=Uc;H.w=hc;H.x=Yc;H.y=id;H.z=$c;Zc&&Z.destroyStream(zd);
I.buffer=qd;I.divisor=Fd;I.normalized=yd;I.offset=he;I.size=ue;I.state=ve;I.stride=me;I.type=ee;I.w=ce;I.x=ye;I.y=$d;I.z=fe;Xc&&Z.destroyStream(re);L.buffer=Me;L.divisor=se;L.normalized=Ee;L.offset=He;L.size=Ie;L.state=Je;L.stride=Fe;L.type=Kd;L.w=Td;L.x=Yd;L.y=ae;L.z=Ke;Rd&&Z.destroyStream(Ce);F.buffer=Ue;F.divisor=jf;F.normalized=nf;F.offset=ef;F.size=kf;F.state=lf;F.stride=mf;F.type=rf;F.w=of;F.x=sf;F.y=Bf;F.z=Cf;De&&Z.destroyStream(pf);N.buffer=Jf;N.divisor=Kf;N.normalized=Lf;N.offset=Mf;N.size=
tf;N.state=Rf;N.stride=If;N.type=uf;N.w=dg;N.x=Sf;N.y=Tf;N.z=qg;cf&&Z.destroyStream(Nf);y.buffer=jg;y.divisor=rg;y.normalized=sg;y.offset=tg;y.size=ug;y.state=vg;y.stride=wg;y.type=xg;y.w=yg;y.x=zg;y.y=Ag;y.z=Bg;df&&Z.destroyStream(Pf);f.buffer=pg;f.divisor=Cg;f.normalized=Dg;f.offset=Eg;f.size=Fg;f.state=Gg;f.stride=Hg;f.type=Ig;f.w=Jg;f.x=Kg;f.y=Lg;f.z=Mg;va.vert=Ng;va.frag=Og;ja.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,
b,c,k,l,d,p,g,u,n,w,r,x,v,t,m,z,B,S,J,fa,H,C,I,aa,L,U,F,la,N,ea,y,h,f,q,ca,Wa,kc,pa,Na){var ia,Q,O,W,ta,R,Vb,Xa,V,D,na,ba,Ca,Ka,Wb,$a,X,qb,ga,ra,Tb,rc,mc,td,Bc,Z,P,ja,Fa,Ab,$c,Zb,M,G,ka,va,Y,ha,ma,K,E;ia=a.attributes;Q=a.buffer;O=a.context;W=a.current;ta=a.draw;R=a.elements;Vb=a.extensions;Xa=a.framebuffer;V=a.gl;D=a.isBufferArgs;na=a.next;ba=a.shader;Ca=a.uniforms;Ka=a.vao;Wb=na.blend_color;$a=W.blend_color;X=na.blend_equation;qb=W.blend_equation;ga=na.blend_func;ra=W.blend_func;Tb=na.colorMask;
rc=W.colorMask;mc=na.depth_range;td=W.depth_range;Bc=na.polygonOffset_offset;Z=W.polygonOffset_offset;P=na.sample_coverage;ja=W.sample_coverage;Fa=na.scissor_box;Ab=W.scissor_box;$c=na.stencil_func;Zb=W.stencil_func;M=na.stencil_opBack;G=W.stencil_opBack;ka=na.stencil_opFront;va=W.stencil_opFront;Y=na.viewport;ha=W.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};K={offset:4,stride:8};E={offset:0,stride:8};return{batch:function(a,d){var c,
e,g,k,l,p,u,r,w,v,t,m,x;c=Xa.next;c!==Xa.cur&&(c?V.bindFramebuffer(36160,c.framebuffer):V.bindFramebuffer(36160,null),Xa.cur=c);if(W.dirty){var n,T,z,Y,qa,ba,ga,Ca,Wb,bf,Pe,Ad,Ae,pe,Vd,be,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc,Wc,wc,eb,jd,Eb,qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc;n=na.dither;n!==W.dither&&(n?V.enable(3024):V.disable(3024),W.dither=n);T=X[0];z=X[1];if(T!==qb[0]||z!==qb[1])V.blendEquationSeparate(T,z),qb[0]=T,qb[1]=z;Y=na.depth_func;Y!==W.depth_func&&(V.depthFunc(Y),W.depth_func=Y);qa=mc[0];ba=mc[1];if(qa!==
td[0]||ba!==td[1])V.depthRange(qa,ba),td[0]=qa,td[1]=ba;ga=na.depth_mask;ga!==W.depth_mask&&(V.depthMask(ga),W.depth_mask=ga);Ca=Tb[0];Wb=Tb[1];bf=Tb[2];Pe=Tb[3];if(Ca!==rc[0]||Wb!==rc[1]||bf!==rc[2]||Pe!==rc[3])V.colorMask(Ca,Wb,bf,Pe),rc[0]=Ca,rc[1]=Wb,rc[2]=bf,rc[3]=Pe;Ad=na.cull_enable;Ad!==W.cull_enable&&(Ad?V.enable(2884):V.disable(2884),W.cull_enable=Ad);Ae=na.cull_face;Ae!==W.cull_face&&(V.cullFace(Ae),W.cull_face=Ae);pe=na.frontFace;pe!==W.frontFace&&(V.frontFace(pe),W.frontFace=pe);Vd=na.lineWidth;
Vd!==W.lineWidth&&(V.lineWidth(Vd),W.lineWidth=Vd);be=na.polygonOffset_enable;be!==W.polygonOffset_enable&&(be?V.enable(32823):V.disable(32823),W.polygonOffset_enable=be);Xd=Bc[0];rd=Bc[1];if(Xd!==Z[0]||rd!==Z[1])V.polygonOffset(Xd,rd),Z[0]=Xd,Z[1]=rd;md=na.sample_alpha;md!==W.sample_alpha&&(md?V.enable(32926):V.disable(32926),W.sample_alpha=md);xd=na.sample_enable;xd!==W.sample_enable&&(xd?V.enable(32928):V.disable(32928),W.sample_enable=xd);dd=P[0];Bd=P[1];if(dd!==ja[0]||Bd!==ja[1])V.sampleCoverage(dd,
Bd),ja[0]=dd,ja[1]=Bd;Vc=na.stencil_mask;Vc!==W.stencil_mask&&(V.stencilMask(Vc),W.stencil_mask=Vc);Dd=$c[0];Pc=$c[1];Wc=$c[2];if(Dd!==Zb[0]||Pc!==Zb[1]||Wc!==Zb[2])V.stencilFunc(Dd,Pc,Wc),Zb[0]=Dd,Zb[1]=Pc,Zb[2]=Wc;wc=ka[0];eb=ka[1];jd=ka[2];Eb=ka[3];if(wc!==va[0]||eb!==va[1]||jd!==va[2]||Eb!==va[3])V.stencilOpSeparate(wc,eb,jd,Eb),va[0]=wc,va[1]=eb,va[2]=jd,va[3]=Eb;qc=M[0];Ra=M[1];Ic=M[2];ic=M[3];if(qc!==G[0]||Ra!==G[1]||Ic!==G[2]||ic!==G[3])V.stencilOpSeparate(qc,Ra,Ic,ic),G[0]=qc,G[1]=Ra,G[2]=
Ic,G[3]=ic;sc=na.scissor_enable;sc!==W.scissor_enable&&(sc?V.enable(3089):V.disable(3089),W.scissor_enable=sc);Gd=Fa[0];nd=Fa[1];Jc=Fa[2];dc=Fa[3];if(Gd!==Ab[0]||nd!==Ab[1]||Jc!==Ab[2]||dc!==Ab[3])V.scissor(Gd,nd,Jc,dc),Ab[0]=Gd,Ab[1]=nd,Ab[2]=Jc,Ab[3]=dc}e=this.viewport;g=e.x|0;k=e.y|0;l="width"in e?e.width|0:O.framebufferWidth-g;p="height"in e?e.height|0:O.framebufferHeight-k;u=O.viewportWidth;O.viewportWidth=l;r=O.viewportHeight;O.viewportHeight=p;V.viewport(g,k,l,p);ha[0]=g;ha[1]=k;ha[2]=l;ha[3]=
p;V.blendColor(0,0,0,1);$a[0]=0;$a[1]=0;$a[2]=0;$a[3]=1;V.enable(3042);W.blend_enable=!0;V.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;V.disable(2929);W.depth_enable=!1;V.disable(2960);W.stencil_enable=!1;if(w=W.profile)v=performance.now(),b.count+=d;V.useProgram(B.program);t=Vb.angle_instanced_arrays;var Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,
nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb;Ka.setVAO(null);E.buffer=this.sizeBuffer;Qc=!1;ad=null;bc=0;Rc=!1;Da=Hb=0;ud=1;$b=0;Ya=5126;Ob=ec=ab=Bb=0;D(E)?(Qc=!0,ad=Q.createStream(34962,E),Ya=ad.dtype):(ad=Q.getBuffer(E))?Ya=ad.dtype:"constant"in E?(ud=2,"number"===typeof E.constant?(ab=E.constant,ec=Ob=Bb=0):(ab=0<E.constant.length?E.constant[0]:0,ec=1<E.constant.length?E.constant[1]:0,Ob=2<E.constant.length?E.constant[2]:0,Bb=3<E.constant.length?E.constant[3]:0)):(ad=D(E.buffer)?Q.createStream(34962,
E.buffer):Q.getBuffer(E.buffer),Ya="type"in E?ma[E.type]:ad.dtype,Rc=!!E.normalized,Da=E.size|0,Hb=E.offset|0,$b=E.stride|0,bc=E.divisor|0);Ed=Na.location;Yb=ia[Ed];if(1===ud){Yb.buffer||V.enableVertexAttribArray(Ed);Pb=Da||1;if(Yb.type!==Ya||Yb.size!==Pb||Yb.buffer!==ad||Yb.normalized!==Rc||Yb.offset!==Hb||Yb.stride!==$b)V.bindBuffer(34962,ad.buffer),V.vertexAttribPointer(Ed,Pb,Ya,Rc,$b,Hb),Yb.type=Ya,Yb.size=Pb,Yb.buffer=ad,Yb.normalized=Rc,Yb.offset=Hb,Yb.stride=$b;Yb.divisor!==bc&&(t.vertexAttribDivisorANGLE(Ed,
bc),Yb.divisor=bc)}else if(Yb.buffer&&(V.disableVertexAttribArray(Ed),Yb.buffer=null),Yb.x!==ab||Yb.y!==ec||Yb.z!==Ob||Yb.w!==Bb)V.vertexAttrib4f(Ed,ab,ec,Ob,Bb),Yb.x=ab,Yb.y=ec,Yb.z=Ob,Yb.w=Bb;K.buffer=this.sizeBuffer;ed=!1;Qb=null;Ma=0;lb=!1;fb=rb=0;Oa=1;lc=0;Ub=5126;Gc=nc=bb=Cc=0;D(K)?(ed=!0,Qb=Q.createStream(34962,K),Ub=Qb.dtype):(Qb=Q.getBuffer(K))?Ub=Qb.dtype:"constant"in K?(Oa=2,"number"===typeof K.constant?(bb=K.constant,nc=Gc=Cc=0):(bb=0<K.constant.length?K.constant[0]:0,nc=1<K.constant.length?
K.constant[1]:0,Gc=2<K.constant.length?K.constant[2]:0,Cc=3<K.constant.length?K.constant[3]:0)):(Qb=D(K.buffer)?Q.createStream(34962,K.buffer):Q.getBuffer(K.buffer),Ub="type"in K?ma[K.type]:Qb.dtype,lb=!!K.normalized,fb=K.size|0,rb=K.offset|0,lc=K.stride|0,Ma=K.divisor|0);cc=N.location;hb=ia[cc];if(1===Oa){hb.buffer||V.enableVertexAttribArray(cc);ib=fb||1;if(hb.type!==Ub||hb.size!==ib||hb.buffer!==Qb||hb.normalized!==lb||hb.offset!==rb||hb.stride!==lc)V.bindBuffer(34962,Qb.buffer),V.vertexAttribPointer(cc,
ib,Ub,lb,lc,rb),hb.type=Ub,hb.size=ib,hb.buffer=Qb,hb.normalized=lb,hb.offset=rb,hb.stride=lc;hb.divisor!==Ma&&(t.vertexAttribDivisorANGLE(cc,Ma),hb.divisor=Ma)}else if(hb.buffer&&(V.disableVertexAttribArray(cc),hb.buffer=null),hb.x!==bb||hb.y!==nc||hb.z!==Gc||hb.w!==Cc)V.vertexAttrib4f(cc,bb,nc,Gc,Cc),hb.x=bb,hb.y=nc,hb.z=Gc,hb.w=Cc;wa=this.charBuffer;mb=!1;za=null;Sa=0;Za=!1;cb=Aa=0;La=1;wb=0;vb=5126;Ib=Fb=Kc=Qa=0;D(wa)?(mb=!0,za=Q.createStream(34962,wa),vb=za.dtype):(za=Q.getBuffer(wa))?vb=za.dtype:
"constant"in wa?(La=2,"number"===typeof wa.constant?(Kc=wa.constant,Fb=Ib=Qa=0):(Kc=0<wa.constant.length?wa.constant[0]:0,Fb=1<wa.constant.length?wa.constant[1]:0,Ib=2<wa.constant.length?wa.constant[2]:0,Qa=3<wa.constant.length?wa.constant[3]:0)):(za=D(wa.buffer)?Q.createStream(34962,wa.buffer):Q.getBuffer(wa.buffer),vb="type"in wa?ma[wa.type]:za.dtype,Za=!!wa.normalized,cb=wa.size|0,Aa=wa.offset|0,wb=wa.stride|0,Sa=wa.divisor|0);Rb=la.location;xa=ia[Rb];if(1===La){xa.buffer||V.enableVertexAttribArray(Rb);
vd=cb||1;if(xa.type!==vb||xa.size!==vd||xa.buffer!==za||xa.normalized!==Za||xa.offset!==Aa||xa.stride!==wb)V.bindBuffer(34962,za.buffer),V.vertexAttribPointer(Rb,vd,vb,Za,wb,Aa),xa.type=vb,xa.size=vd,xa.buffer=za,xa.normalized=Za,xa.offset=Aa,xa.stride=wb;xa.divisor!==Sa&&(t.vertexAttribDivisorANGLE(Rb,Sa),xa.divisor=Sa)}else if(xa.buffer&&(V.disableVertexAttribArray(Rb),xa.buffer=null),xa.x!==Kc||xa.y!==Fb||xa.z!==Ib||xa.w!==Qa)V.vertexAttrib4f(Rb,Kc,Fb,Ib,Qa),xa.x=Kc,xa.y=Fb,xa.z=Ib,xa.w=Qa;Ja=
this.position;Lb=!1;db=null;gb=0;ya=!1;Ea=fc=0;nb=1;ob=0;Ua=5126;uc=gd=oc=Va=0;D(Ja)?(Lb=!0,db=Q.createStream(34962,Ja),Ua=db.dtype):(db=Q.getBuffer(Ja))?Ua=db.dtype:"constant"in Ja?(nb=2,"number"===typeof Ja.constant?(oc=Ja.constant,gd=uc=Va=0):(oc=0<Ja.constant.length?Ja.constant[0]:0,gd=1<Ja.constant.length?Ja.constant[1]:0,uc=2<Ja.constant.length?Ja.constant[2]:0,Va=3<Ja.constant.length?Ja.constant[3]:0)):(db=D(Ja.buffer)?Q.createStream(34962,Ja.buffer):Q.getBuffer(Ja.buffer),Ua="type"in Ja?ma[Ja.type]:
db.dtype,ya=!!Ja.normalized,Ea=Ja.size|0,fc=Ja.offset|0,ob=Ja.stride|0,gb=Ja.divisor|0);Ta=q.location;Jb=ia[Ta];if(1===nb){Jb.buffer||V.enableVertexAttribArray(Ta);Dc=Ea||2;if(Jb.type!==Ua||Jb.size!==Dc||Jb.buffer!==db||Jb.normalized!==ya||Jb.offset!==fc||Jb.stride!==ob)V.bindBuffer(34962,db.buffer),V.vertexAttribPointer(Ta,Dc,Ua,ya,ob,fc),Jb.type=Ua,Jb.size=Dc,Jb.buffer=db,Jb.normalized=ya,Jb.offset=fc,Jb.stride=ob;Jb.divisor!==gb&&(t.vertexAttribDivisorANGLE(Ta,gb),Jb.divisor=gb)}else if(Jb.buffer&&
(V.disableVertexAttribArray(Ta),Jb.buffer=null),Jb.x!==oc||Jb.y!==gd||Jb.z!==uc||Jb.w!==Va)V.vertexAttrib4f(Ta,oc,gd,uc,Va),Jb.x=oc,Jb.y=gd,Jb.z=uc,Jb.w=Va;Ga=this.viewportArray;V.uniform4f(pa.location,Ga[0],Ga[1],Ga[2],Ga[3]);xc=this.scale;V.uniform2f(Wa.location,xc[0],xc[1]);Pa=this.translate;V.uniform2f(kc.location,Pa[0],Pa[1]);(Ba=ta.elements)?V.bindBuffer(34963,Ba.buffer.buffer):Ka.currentVAO&&(Ba=R.getElements(Ka.currentVAO.elements))&&V.bindBuffer(34963,Ba.buffer.buffer);jb=ta.instances;for(m=
0;m<d;++m){x=a[m];var sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc,id;sb=S.call(this,O,x,m);m&&xb===sb||(xb=sb,V.uniform1f(ea.location,sb));pb=J.call(this,O,x,m);m&&vc===pb||(vc=pb,V.uniform1f(h.location,pb));tb=x.align;m&&sd===tb||(sd=tb,V.uniform1f(I.location,tb));tc=x.baseline;m&&Od===tc||(Od=tc,V.uniform1f(F.location,tc));Lc=x.color;hd=Lc[0];Sb=Lc[1];Mb=Lc[2];Xb=Lc[3];m&&bd===hd&&ac===Sb&&Ha===Mb&&kb===Xb||(bd=hd,ac=Sb,Ha=Mb,kb=
Xb,V.uniform4f(y.location,hd,Sb,Mb,Xb));yb=fa.call(this,O,x,m);Kb=yb[0];gc=yb[1];m&&Nb===Kb&&jc===gc||(Nb=Kb,jc=gc,V.uniform2f(U.location,Kb,gc));Sc=H.call(this,O,x,m);zc=Sc[0];Ec=Sc[1];m&&Ac===zc&&Mc===Ec||(Ac=zc,Mc=Ec,V.uniform2f(L.location,zc,Ec));cd=x.positionOffset;Tc=cd[0];Gb=cd[1];m&&Nc===Tc&&zb===Gb||(Nc=Tc,zb=Gb,V.uniform2f(ca.location,Tc,Gb));Oc=x.opacity;m&&Hc===Oc||(Hc=Oc,V.uniform1f(f.location,Oc));(Uc=C.call(this,O,x,m))&&"framebuffer"===Uc._reglType&&(Uc=Uc.color[0]);hc=Uc._texture;
V.uniform1i(aa.location,hc.bind());Yc=x.offset;if(id=x.count)0<jb?Ba?t.drawElementsInstancedANGLE(0,id,Ba.type,Yc<<(Ba.type-5121>>1),jb):t.drawArraysInstancedANGLE(0,Yc,id,jb):0>jb&&(Ba?V.drawElements(0,id,Ba.type,Yc<<(Ba.type-5121>>1)):V.drawArrays(0,Yc,id)),hc.unbind()}Qc&&Q.destroyStream(ad);ed&&Q.destroyStream(Qb);mb&&Q.destroyStream(za);Lb&&Q.destroyStream(db);W.dirty=!0;Ka.setVAO(null);O.viewportWidth=u;O.viewportHeight=r;w&&(b.cpuTime+=performance.now()-v)},draw:function(a){var u,r,w,v,t,m,
x,n,T,z,C,H,B,S,J,fa,Y,qa,ba,ga,Ca,Wb,Ge,bf,Pe,Ad,Ae,pe,Vd,be,Xd,rd,md,xd,dd,Bd,Vc,Dd,Pc,Wc,wc,eb,jd,Eb,qc,Ra,Ic,ic,sc,Gd,nd,Jc,dc,Qc,ad,bc,Rc,Hb,Da,ud,$b,Ya,Bb,ab,ec,Ob,Ed,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb;u=Xa.next;u!==Xa.cur&&(u?V.bindFramebuffer(36160,u.framebuffer):V.bindFramebuffer(36160,null),Xa.cur=u);if(W.dirty){var La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc;La=na.dither;La!==
W.dither&&(La?V.enable(3024):V.disable(3024),W.dither=La);wb=X[0];vb=X[1];if(wb!==qb[0]||vb!==qb[1])V.blendEquationSeparate(wb,vb),qb[0]=wb,qb[1]=vb;Qa=na.depth_func;Qa!==W.depth_func&&(V.depthFunc(Qa),W.depth_func=Qa);Kc=mc[0];Fb=mc[1];if(Kc!==td[0]||Fb!==td[1])V.depthRange(Kc,Fb),td[0]=Kc,td[1]=Fb;Ib=na.depth_mask;Ib!==W.depth_mask&&(V.depthMask(Ib),W.depth_mask=Ib);Rb=Tb[0];xa=Tb[1];vd=Tb[2];Ja=Tb[3];if(Rb!==rc[0]||xa!==rc[1]||vd!==rc[2]||Ja!==rc[3])V.colorMask(Rb,xa,vd,Ja),rc[0]=Rb,rc[1]=xa,rc[2]=
vd,rc[3]=Ja;Lb=na.cull_enable;Lb!==W.cull_enable&&(Lb?V.enable(2884):V.disable(2884),W.cull_enable=Lb);db=na.cull_face;db!==W.cull_face&&(V.cullFace(db),W.cull_face=db);gb=na.frontFace;gb!==W.frontFace&&(V.frontFace(gb),W.frontFace=gb);ya=na.lineWidth;ya!==W.lineWidth&&(V.lineWidth(ya),W.lineWidth=ya);fc=na.polygonOffset_enable;fc!==W.polygonOffset_enable&&(fc?V.enable(32823):V.disable(32823),W.polygonOffset_enable=fc);Ea=Bc[0];nb=Bc[1];if(Ea!==Z[0]||nb!==Z[1])V.polygonOffset(Ea,nb),Z[0]=Ea,Z[1]=
nb;ob=na.sample_alpha;ob!==W.sample_alpha&&(ob?V.enable(32926):V.disable(32926),W.sample_alpha=ob);Ua=na.sample_enable;Ua!==W.sample_enable&&(Ua?V.enable(32928):V.disable(32928),W.sample_enable=Ua);Va=P[0];oc=P[1];if(Va!==ja[0]||oc!==ja[1])V.sampleCoverage(Va,oc),ja[0]=Va,ja[1]=oc;gd=na.stencil_mask;gd!==W.stencil_mask&&(V.stencilMask(gd),W.stencil_mask=gd);uc=$c[0];Ta=$c[1];Jb=$c[2];if(uc!==Zb[0]||Ta!==Zb[1]||Jb!==Zb[2])V.stencilFunc(uc,Ta,Jb),Zb[0]=uc,Zb[1]=Ta,Zb[2]=Jb;Dc=ka[0];Ga=ka[1];xc=ka[2];
Pa=ka[3];if(Dc!==va[0]||Ga!==va[1]||xc!==va[2]||Pa!==va[3])V.stencilOpSeparate(Dc,Ga,xc,Pa),va[0]=Dc,va[1]=Ga,va[2]=xc,va[3]=Pa;Ba=M[0];jb=M[1];sb=M[2];xb=M[3];if(Ba!==G[0]||jb!==G[1]||sb!==G[2]||xb!==G[3])V.stencilOpSeparate(Ba,jb,sb,xb),G[0]=Ba,G[1]=jb,G[2]=sb,G[3]=xb;pb=na.scissor_enable;pb!==W.scissor_enable&&(pb?V.enable(3089):V.disable(3089),W.scissor_enable=pb);vc=Fa[0];tb=Fa[1];sd=Fa[2];tc=Fa[3];if(vc!==Ab[0]||tb!==Ab[1]||sd!==Ab[2]||tc!==Ab[3])V.scissor(vc,tb,sd,tc),Ab[0]=vc,Ab[1]=tb,Ab[2]=
sd,Ab[3]=tc}r=this.viewport;w=r.x|0;v=r.y|0;t="width"in r?r.width|0:O.framebufferWidth-w;m="height"in r?r.height|0:O.framebufferHeight-v;x=O.viewportWidth;O.viewportWidth=t;n=O.viewportHeight;O.viewportHeight=m;V.viewport(w,v,t,m);ha[0]=w;ha[1]=v;ha[2]=t;ha[3]=m;V.blendColor(0,0,0,1);$a[0]=0;$a[1]=0;$a[2]=0;$a[3]=1;V.enable(3042);W.blend_enable=!0;V.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;V.disable(2929);W.depth_enable=!1;V.disable(2960);W.stencil_enable=!1;if(T=W.profile)z=
performance.now(),b.count++;V.useProgram(c.program);C=Vb.angle_instanced_arrays;Ka.setVAO(null);E.buffer=this.sizeBuffer;H=!1;B=null;S=0;J=!1;Y=fa=0;qa=1;ba=0;ga=5126;bf=Ge=Wb=Ca=0;D(E)?(H=!0,B=Q.createStream(34962,E),ga=B.dtype):(B=Q.getBuffer(E))?ga=B.dtype:"constant"in E?(qa=2,"number"===typeof E.constant?(Wb=E.constant,Ge=bf=Ca=0):(Wb=0<E.constant.length?E.constant[0]:0,Ge=1<E.constant.length?E.constant[1]:0,bf=2<E.constant.length?E.constant[2]:0,Ca=3<E.constant.length?E.constant[3]:0)):(B=D(E.buffer)?
Q.createStream(34962,E.buffer):Q.getBuffer(E.buffer),ga="type"in E?ma[E.type]:B.dtype,J=!!E.normalized,Y=E.size|0,fa=E.offset|0,ba=E.stride|0,S=E.divisor|0);Pe=Na.location;Ad=ia[Pe];if(1===qa){Ad.buffer||V.enableVertexAttribArray(Pe);Ae=Y||1;if(Ad.type!==ga||Ad.size!==Ae||Ad.buffer!==B||Ad.normalized!==J||Ad.offset!==fa||Ad.stride!==ba)V.bindBuffer(34962,B.buffer),V.vertexAttribPointer(Pe,Ae,ga,J,ba,fa),Ad.type=ga,Ad.size=Ae,Ad.buffer=B,Ad.normalized=J,Ad.offset=fa,Ad.stride=ba;Ad.divisor!==S&&(C.vertexAttribDivisorANGLE(Pe,
S),Ad.divisor=S)}else if(Ad.buffer&&(V.disableVertexAttribArray(Pe),Ad.buffer=null),Ad.x!==Wb||Ad.y!==Ge||Ad.z!==bf||Ad.w!==Ca)V.vertexAttrib4f(Pe,Wb,Ge,bf,Ca),Ad.x=Wb,Ad.y=Ge,Ad.z=bf,Ad.w=Ca;K.buffer=this.sizeBuffer;pe=!1;Vd=null;be=0;Xd=!1;md=rd=0;xd=1;dd=0;Bd=5126;Wc=Pc=Dd=Vc=0;D(K)?(pe=!0,Vd=Q.createStream(34962,K),Bd=Vd.dtype):(Vd=Q.getBuffer(K))?Bd=Vd.dtype:"constant"in K?(xd=2,"number"===typeof K.constant?(Dd=K.constant,Pc=Wc=Vc=0):(Dd=0<K.constant.length?K.constant[0]:0,Pc=1<K.constant.length?
K.constant[1]:0,Wc=2<K.constant.length?K.constant[2]:0,Vc=3<K.constant.length?K.constant[3]:0)):(Vd=D(K.buffer)?Q.createStream(34962,K.buffer):Q.getBuffer(K.buffer),Bd="type"in K?ma[K.type]:Vd.dtype,Xd=!!K.normalized,md=K.size|0,rd=K.offset|0,dd=K.stride|0,be=K.divisor|0);wc=N.location;eb=ia[wc];if(1===xd){eb.buffer||V.enableVertexAttribArray(wc);jd=md||1;if(eb.type!==Bd||eb.size!==jd||eb.buffer!==Vd||eb.normalized!==Xd||eb.offset!==rd||eb.stride!==dd)V.bindBuffer(34962,Vd.buffer),V.vertexAttribPointer(wc,
jd,Bd,Xd,dd,rd),eb.type=Bd,eb.size=jd,eb.buffer=Vd,eb.normalized=Xd,eb.offset=rd,eb.stride=dd;eb.divisor!==be&&(C.vertexAttribDivisorANGLE(wc,be),eb.divisor=be)}else if(eb.buffer&&(V.disableVertexAttribArray(wc),eb.buffer=null),eb.x!==Dd||eb.y!==Pc||eb.z!==Wc||eb.w!==Vc)V.vertexAttrib4f(wc,Dd,Pc,Wc,Vc),eb.x=Dd,eb.y=Pc,eb.z=Wc,eb.w=Vc;Eb=this.charBuffer;qc=!1;Ra=null;Ic=0;ic=!1;Gd=sc=0;nd=1;Jc=0;dc=5126;Rc=bc=ad=Qc=0;D(Eb)?(qc=!0,Ra=Q.createStream(34962,Eb),dc=Ra.dtype):(Ra=Q.getBuffer(Eb))?dc=Ra.dtype:
"constant"in Eb?(nd=2,"number"===typeof Eb.constant?(ad=Eb.constant,bc=Rc=Qc=0):(ad=0<Eb.constant.length?Eb.constant[0]:0,bc=1<Eb.constant.length?Eb.constant[1]:0,Rc=2<Eb.constant.length?Eb.constant[2]:0,Qc=3<Eb.constant.length?Eb.constant[3]:0)):(Ra=D(Eb.buffer)?Q.createStream(34962,Eb.buffer):Q.getBuffer(Eb.buffer),dc="type"in Eb?ma[Eb.type]:Ra.dtype,ic=!!Eb.normalized,Gd=Eb.size|0,sc=Eb.offset|0,Jc=Eb.stride|0,Ic=Eb.divisor|0);Hb=la.location;Da=ia[Hb];if(1===nd){Da.buffer||V.enableVertexAttribArray(Hb);
ud=Gd||1;if(Da.type!==dc||Da.size!==ud||Da.buffer!==Ra||Da.normalized!==ic||Da.offset!==sc||Da.stride!==Jc)V.bindBuffer(34962,Ra.buffer),V.vertexAttribPointer(Hb,ud,dc,ic,Jc,sc),Da.type=dc,Da.size=ud,Da.buffer=Ra,Da.normalized=ic,Da.offset=sc,Da.stride=Jc;Da.divisor!==Ic&&(C.vertexAttribDivisorANGLE(Hb,Ic),Da.divisor=Ic)}else if(Da.buffer&&(V.disableVertexAttribArray(Hb),Da.buffer=null),Da.x!==ad||Da.y!==bc||Da.z!==Rc||Da.w!==Qc)V.vertexAttrib4f(Hb,ad,bc,Rc,Qc),Da.x=ad,Da.y=bc,Da.z=Rc,Da.w=Qc;$b=
this.position;Ya=!1;Bb=null;ab=0;ec=!1;Ed=Ob=0;Yb=1;Pb=0;ed=5126;rb=lb=Ma=Qb=0;D($b)?(Ya=!0,Bb=Q.createStream(34962,$b),ed=Bb.dtype):(Bb=Q.getBuffer($b))?ed=Bb.dtype:"constant"in $b?(Yb=2,"number"===typeof $b.constant?(Ma=$b.constant,lb=rb=Qb=0):(Ma=0<$b.constant.length?$b.constant[0]:0,lb=1<$b.constant.length?$b.constant[1]:0,rb=2<$b.constant.length?$b.constant[2]:0,Qb=3<$b.constant.length?$b.constant[3]:0)):(Bb=D($b.buffer)?Q.createStream(34962,$b.buffer):Q.getBuffer($b.buffer),ed="type"in $b?ma[$b.type]:
Bb.dtype,ec=!!$b.normalized,Ed=$b.size|0,Ob=$b.offset|0,Pb=$b.stride|0,ab=$b.divisor|0);fb=q.location;Oa=ia[fb];if(1===Yb){Oa.buffer||V.enableVertexAttribArray(fb);lc=Ed||2;if(Oa.type!==ed||Oa.size!==lc||Oa.buffer!==Bb||Oa.normalized!==ec||Oa.offset!==Ob||Oa.stride!==Pb)V.bindBuffer(34962,Bb.buffer),V.vertexAttribPointer(fb,lc,ed,ec,Pb,Ob),Oa.type=ed,Oa.size=lc,Oa.buffer=Bb,Oa.normalized=ec,Oa.offset=Ob,Oa.stride=Pb;Oa.divisor!==ab&&(C.vertexAttribDivisorANGLE(fb,ab),Oa.divisor=ab)}else if(Oa.buffer&&
(V.disableVertexAttribArray(fb),Oa.buffer=null),Oa.x!==Ma||Oa.y!==lb||Oa.z!==rb||Oa.w!==Qb)V.vertexAttrib4f(fb,Ma,lb,rb,Qb),Oa.x=Ma,Oa.y=lb,Oa.z=rb,Oa.w=Qb;Ub=k.call(this,O,a,0);V.uniform1f(ea.location,Ub);Cc=l.call(this,O,a,0);V.uniform1f(h.location,Cc);V.uniform1f(I.location,a.align);V.uniform1f(F.location,a.baseline);bb=this.viewportArray;V.uniform4f(pa.location,bb[0],bb[1],bb[2],bb[3]);nc=a.color;V.uniform4f(y.location,nc[0],nc[1],nc[2],nc[3]);Gc=d.call(this,O,a,0);V.uniform2f(U.location,Gc[0],
Gc[1]);cc=p.call(this,O,a,0);V.uniform2f(L.location,cc[0],cc[1]);hb=this.scale;V.uniform2f(Wa.location,hb[0],hb[1]);ib=this.translate;V.uniform2f(kc.location,ib[0],ib[1]);wa=a.positionOffset;V.uniform2f(ca.location,wa[0],wa[1]);V.uniform1f(f.location,a.opacity);(mb=g.call(this,O,a,0))&&"framebuffer"===mb._reglType&&(mb=mb.color[0]);za=mb._texture;V.uniform1i(aa.location,za.bind());(Sa=ta.elements)?V.bindBuffer(34963,Sa.buffer.buffer):Ka.currentVAO&&(Sa=R.getElements(Ka.currentVAO.elements))&&V.bindBuffer(34963,
Sa.buffer.buffer);Za=a.offset;if(Aa=a.count)cb=ta.instances,0<cb?Sa?C.drawElementsInstancedANGLE(0,Aa,Sa.type,Za<<(Sa.type-5121>>1),cb):C.drawArraysInstancedANGLE(0,Za,Aa,cb):0>cb&&(Sa?V.drawElements(0,Aa,Sa.type,Za<<(Sa.type-5121>>1)):V.drawArrays(0,Za,Aa)),W.dirty=!0,Ka.setVAO(null),O.viewportWidth=x,O.viewportHeight=n,T&&(b.cpuTime+=performance.now()-z),H&&Q.destroyStream(B),pe&&Q.destroyStream(Vd),qc&&Q.destroyStream(Ra),Ya&&Q.destroyStream(Bb),za.unbind()},scope:function(a,f,h){var d,c,e,g,q,
k,l,p,y,ca,L,C,H,B,F,G,I,N,S,J,M,U,P,Wa,R,fa,Z,aa,V,X,ha,ea,la,ia,pa,ka,ja,va,kc,ra,Na,Fa,Ka,Ra,Xa,$a,Bc,qb,Ab,td,Tb,Vb,Zb,bc,rc,Hb,Da,mc,$b,Ya,Bb,ab,ec,Ob,$c,Yb,Pb,ed,Qb,Ma,lb,rb,fb,Oa,lc,Ub,Cc,bb,nc,Gc,cc,hb,ib,wa,mb,za,Sa,Za,Aa,cb,La,wb,vb,Qa,Kc,Fb,Ib,Rb,xa,vd,Ja,Lb,db,gb,ya,fc,Ea,nb,ob,Ua,Va,oc,gd,uc,Ta,Jb,Dc,Ga,xc,Pa,Ba,jb,sb,xb,pb,vc,tb,sd,tc,Od,Lc,hd,bd,Sb,ac,Mb,Ha,Xb,kb,yb,Kb,Nb,gc,jc,Sc,zc,Ac,Ec,Mc,cd,Tc,Nc,Gb,zb,Oc,Hc,Uc,hc,Yc;d=this.viewport;c=d.x|0;e=d.y|0;g="width"in d?d.width|0:O.framebufferWidth-
c;q="height"in d?d.height|0:O.framebufferHeight-e;k=O.viewportWidth;O.viewportWidth=g;l=O.viewportHeight;O.viewportHeight=q;p=Y[0];Y[0]=c;y=Y[1];Y[1]=e;ca=Y[2];Y[2]=g;L=Y[3];Y[3]=q;C=Wb[0];Wb[0]=0;H=Wb[1];Wb[1]=0;B=Wb[2];Wb[2]=0;F=Wb[3];Wb[3]=1;G=na.blend_enable;na.blend_enable=!0;I=ga[0];ga[0]=770;N=ga[1];ga[1]=771;S=ga[2];ga[2]=773;J=ga[3];ga[3]=1;M=na.depth_enable;na.depth_enable=!1;U=na.stencil_enable;na.stencil_enable=!1;if(P=W.profile)Wa=performance.now(),b.count++;R=a.offset;fa=ta.offset;ta.offset=
R;Z=a.count;aa=ta.count;ta.count=Z;V=ta.primitive;ta.primitive=0;X=a.align;ha=Ca[64];Ca[64]=X;ea=u.call(this,O,a,h);la=Ca[69];Ca[69]=ea;ia=n.call(this,O,a,h);pa=Ca[67];Ca[67]=ia;ka=w.call(this,O,a,h);ja=Ca[66];Ca[66]=ka;va=a.baseline;kc=Ca[65];Ca[65]=va;ra=r.call(this,O,a,h);Na=Ca[62];Ca[62]=ra;Fa=a.color;Ka=Ca[14];Ca[14]=Fa;Ra=x.call(this,O,a,h);Xa=Ca[63];Ca[63]=Ra;$a=a.opacity;Bc=Ca[10];Ca[10]=$a;qb=a.positionOffset;Ab=Ca[68];Ca[68]=qb;td=this.scale;Tb=Ca[6];Ca[6]=td;Vb=this.translate;Zb=Ca[8];
Ca[8]=Vb;bc=this.viewportArray;rc=Ca[3];Ca[3]=bc;Hb=this.charBuffer;Da=!1;mc=null;$b=0;Ya=!1;ab=Bb=0;ec=1;Ob=0;$c=5126;Qb=ed=Pb=Yb=0;D(Hb)?(Da=!0,mc=Q.createStream(34962,Hb),$c=mc.dtype):(mc=Q.getBuffer(Hb))?$c=mc.dtype:"constant"in Hb?(ec=2,"number"===typeof Hb.constant?(Pb=Hb.constant,ed=Qb=Yb=0):(Pb=0<Hb.constant.length?Hb.constant[0]:0,ed=1<Hb.constant.length?Hb.constant[1]:0,Qb=2<Hb.constant.length?Hb.constant[2]:0,Yb=3<Hb.constant.length?Hb.constant[3]:0)):(mc=D(Hb.buffer)?Q.createStream(34962,
Hb.buffer):Q.getBuffer(Hb.buffer),$c="type"in Hb?ma[Hb.type]:mc.dtype,Ya=!!Hb.normalized,ab=Hb.size|0,Bb=Hb.offset|0,Ob=Hb.stride|0,$b=Hb.divisor|0);Ma=v.buffer;v.buffer=mc;lb=v.divisor;v.divisor=$b;rb=v.normalized;v.normalized=Ya;fb=v.offset;v.offset=Bb;Oa=v.size;v.size=ab;lc=v.state;v.state=ec;Ub=v.stride;v.stride=Ob;Cc=v.type;v.type=$c;bb=v.w;v.w=Yb;nc=v.x;v.x=Pb;Gc=v.y;v.y=ed;cc=v.z;v.z=Qb;K.buffer=this.sizeBuffer;hb=!1;ib=null;wa=0;mb=!1;Sa=za=0;Za=1;Aa=0;cb=5126;Qa=vb=wb=La=0;D(K)?(hb=!0,ib=
Q.createStream(34962,K),cb=ib.dtype):(ib=Q.getBuffer(K))?cb=ib.dtype:"constant"in K?(Za=2,"number"===typeof K.constant?(wb=K.constant,vb=Qa=La=0):(wb=0<K.constant.length?K.constant[0]:0,vb=1<K.constant.length?K.constant[1]:0,Qa=2<K.constant.length?K.constant[2]:0,La=3<K.constant.length?K.constant[3]:0)):(ib=D(K.buffer)?Q.createStream(34962,K.buffer):Q.getBuffer(K.buffer),cb="type"in K?ma[K.type]:ib.dtype,mb=!!K.normalized,Sa=K.size|0,za=K.offset|0,Aa=K.stride|0,wa=K.divisor|0);Kc=t.buffer;t.buffer=
ib;Fb=t.divisor;t.divisor=wa;Ib=t.normalized;t.normalized=mb;Rb=t.offset;t.offset=za;xa=t.size;t.size=Sa;vd=t.state;t.state=Za;Ja=t.stride;t.stride=Aa;Lb=t.type;t.type=cb;db=t.w;t.w=La;gb=t.x;t.x=wb;ya=t.y;t.y=vb;fc=t.z;t.z=Qa;Ea=this.position;nb=!1;ob=null;Ua=0;Va=!1;gd=oc=0;uc=1;Ta=0;Jb=5126;Pa=xc=Ga=Dc=0;D(Ea)?(nb=!0,ob=Q.createStream(34962,Ea),Jb=ob.dtype):(ob=Q.getBuffer(Ea))?Jb=ob.dtype:"constant"in Ea?(uc=2,"number"===typeof Ea.constant?(Ga=Ea.constant,xc=Pa=Dc=0):(Ga=0<Ea.constant.length?
Ea.constant[0]:0,xc=1<Ea.constant.length?Ea.constant[1]:0,Pa=2<Ea.constant.length?Ea.constant[2]:0,Dc=3<Ea.constant.length?Ea.constant[3]:0)):(ob=D(Ea.buffer)?Q.createStream(34962,Ea.buffer):Q.getBuffer(Ea.buffer),Jb="type"in Ea?ma[Ea.type]:ob.dtype,Va=!!Ea.normalized,gd=Ea.size|0,oc=Ea.offset|0,Ta=Ea.stride|0,Ua=Ea.divisor|0);Ba=m.buffer;m.buffer=ob;jb=m.divisor;m.divisor=Ua;sb=m.normalized;m.normalized=Va;xb=m.offset;m.offset=oc;pb=m.size;m.size=gd;vc=m.state;m.state=uc;tb=m.stride;m.stride=Ta;
sd=m.type;m.type=Jb;tc=m.w;m.w=Dc;Od=m.x;m.x=Ga;Lc=m.y;m.y=xc;hd=m.z;m.z=Pa;E.buffer=this.sizeBuffer;bd=!1;Sb=null;ac=0;Mb=!1;Xb=Ha=0;kb=1;yb=0;Kb=5126;Sc=jc=gc=Nb=0;D(E)?(bd=!0,Sb=Q.createStream(34962,E),Kb=Sb.dtype):(Sb=Q.getBuffer(E))?Kb=Sb.dtype:"constant"in E?(kb=2,"number"===typeof E.constant?(gc=E.constant,jc=Sc=Nb=0):(gc=0<E.constant.length?E.constant[0]:0,jc=1<E.constant.length?E.constant[1]:0,Sc=2<E.constant.length?E.constant[2]:0,Nb=3<E.constant.length?E.constant[3]:0)):(Sb=D(E.buffer)?
Q.createStream(34962,E.buffer):Q.getBuffer(E.buffer),Kb="type"in E?ma[E.type]:Sb.dtype,Mb=!!E.normalized,Xb=E.size|0,Ha=E.offset|0,yb=E.stride|0,ac=E.divisor|0);zc=z.buffer;z.buffer=Sb;Ac=z.divisor;z.divisor=ac;Ec=z.normalized;z.normalized=Mb;Mc=z.offset;z.offset=Ha;cd=z.size;z.size=Xb;Tc=z.state;z.state=kb;Nc=z.stride;z.stride=yb;Gb=z.type;z.type=Kb;zb=z.w;z.w=Nb;Oc=z.x;z.x=gc;Hc=z.y;z.y=jc;Uc=z.z;z.z=Sc;hc=ba.vert;ba.vert=61;Yc=ba.frag;ba.frag=60;W.dirty=!0;f(O,a,h);O.viewportWidth=k;O.viewportHeight=
l;Y[0]=p;Y[1]=y;Y[2]=ca;Y[3]=L;Wb[0]=C;Wb[1]=H;Wb[2]=B;Wb[3]=F;na.blend_enable=G;ga[0]=I;ga[1]=N;ga[2]=S;ga[3]=J;na.depth_enable=M;na.stencil_enable=U;P&&(b.cpuTime+=performance.now()-Wa);ta.offset=fa;ta.count=aa;ta.primitive=V;Ca[64]=ha;Ca[69]=la;Ca[67]=pa;Ca[66]=ja;Ca[65]=kc;Ca[62]=Na;Ca[14]=Ka;Ca[63]=Xa;Ca[10]=Bc;Ca[68]=Ab;Ca[6]=Tb;Ca[8]=Zb;Ca[3]=rc;Da&&Q.destroyStream(mc);v.buffer=Ma;v.divisor=lb;v.normalized=rb;v.offset=fb;v.size=Oa;v.state=lc;v.stride=Ub;v.type=Cc;v.w=bb;v.x=nc;v.y=Gc;v.z=cc;
hb&&Q.destroyStream(ib);t.buffer=Kc;t.divisor=Fb;t.normalized=Ib;t.offset=Rb;t.size=xa;t.state=vd;t.stride=Ja;t.type=Lb;t.w=db;t.x=gb;t.y=ya;t.z=fc;nb&&Q.destroyStream(ob);m.buffer=Ba;m.divisor=jb;m.normalized=sb;m.offset=xb;m.size=pb;m.state=vc;m.stride=tb;m.type=sd;m.w=tc;m.x=Od;m.y=Lc;m.z=hd;bd&&Q.destroyStream(Sb);z.buffer=zc;z.divisor=Ac;z.normalized=Ec;z.offset=Mc;z.size=cd;z.state=Tc;z.stride=Nc;z.type=Gb;z.w=zb;z.x=Oc;z.y=Hc;z.z=Uc;ba.vert=hc;ba.frag=Yc;W.dirty=!0}}}}},{}],26:[function(c,
n,m){var a=c("./sorted-object-keys");n.exports=function(b,c){for(var k=a(c),l=0;l<k.length;++l)b[k[l]]=c[k[l]];return b}},{"./sorted-object-keys":35}],27:[function(c,n,m){function a(a,b,d,c,e,u){for(var m=0;m<b;++m)for(var w=a[m],r=0;r<d;++r)for(var x=w[r],v=0;v<c;++v)e[u++]=x[v]}function b(c,e,d,p,g){for(var u=1,m=d+1;m<e.length;++m)u*=e[m];var w=e[d];if(4===e.length-d){var r=e[d+1],x=e[d+2];e=e[d+3];for(m=0;m<w;++m)a(c[m],r,x,e,p,g),g+=u}else for(m=0;m<w;++m)b(c[m],e,d+1,p,g),g+=u}var e=c("./pool");
n.exports={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);return b},flatten:function(c,l,d,p){var g=1;if(l.length)for(var u=0;u<l.length;++u)g*=l[u];else g=0;d=p||e.allocType(d,g);switch(l.length){case 0:break;case 1:p=l[0];for(l=0;l<p;++l)d[l]=c[l];break;case 2:p=l[0];l=l[1];for(u=g=0;u<p;++u)for(var m=c[u],w=0;w<l;++w)d[g++]=m[w];break;case 3:a(c,l[0],l[1],l[2],d,0);break;default:b(c,l,0,d,0)}return d}}},{"./pool":33}],28:[function(c,n,m){var a=c("./is-typed-array");n.exports=function(b){return Array.isArray(b)||
a(b)}},{"./is-typed-array":31}],29:[function(c,n,m){var a=c("./is-typed-array");n.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||a(b.data))}},{"./is-typed-array":31}],30:[function(c,n,m){n.exports=function(a){return!(a&a-1)&&!!a}},{}],31:[function(c,n,m){n.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||
a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],32:[function(c,n,m){n.exports=function(a,b){for(var c=Array(a),k=0;k<a;++k)c[k]=b(k);return c}},{}],33:[function(c,n,m){function a(a){var b,d;b=(65535<a)<<4;a>>>=b;d=(255<a)<<3;a>>>=d;b|=d;d=(15<a)<<2;a>>>=d;b|=d;d=(3<a)<<1;return b|d|a>>>d>>1}function b(){function b(c){a:{for(var e=16;268435456>=e;e*=16)if(c<=e){c=e;break a}c=0}e=d[a(c)>>
2];return 0<e.length?e.pop():new ArrayBuffer(c)}function c(b){d[a(b.byteLength)>>2].push(b)}var d=e(8,function(){return[]});return{alloc:b,free:c,allocType:function(a,d){var c=null;switch(a){case 5120:c=new Int8Array(b(d),0,d);break;case 5121:c=new Uint8Array(b(d),0,d);break;case 5122:c=new Int16Array(b(2*d),0,d);break;case 5123:c=new Uint16Array(b(2*d),0,d);break;case 5124:c=new Int32Array(b(4*d),0,d);break;case 5125:c=new Uint32Array(b(4*d),0,d);break;case 5126:c=new Float32Array(b(4*d),0,d);break;
default:return null}return c.length!==d?c.subarray(0,d):c},freeType:function(a){c(a.buffer)}}}var e=c("./loop");c=b();c.zero=b();n.exports=c},{"./loop":32}],34:[function(c,n,m){n.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],35:[function(c,n,m){n.exports=function(a){return Object.keys(a).sort()}},
{}],36:[function(c,n,m){var a=c("./pool"),b=new Float32Array(1),e=new Uint32Array(b.buffer);n.exports=function(c){for(var l=a.allocType(5123,c.length),d=0;d<c.length;++d)if(isNaN(c[d]))l[d]=65535;else if(Infinity===c[d])l[d]=31744;else if(-Infinity===c[d])l[d]=64512;else{b[0]=c[d];var p=e[0],g=p>>>31<<15,u=(p<<1>>>24)-127,p=p>>13&1023;l[d]=-24>u?g:-14>u?g+(p+1024>>-14-u):15<u?g+31744:g+(u+15<<10)+p}return l}},{"./pool":33}],37:[function(c,n,m){var a=c("./sorted-object-keys");n.exports=function(b){return a(b).map(function(a){return b[a]})}},
{"./sorted-object-keys":35}],38:[function(c,n,m){function a(a,b,c){function e(){var b=window.innerWidth,d=window.innerHeight;a!==document.body&&(d=k.getBoundingClientRect(),b=d.right-d.left,d=d.bottom-d.top);k.width=c*b;k.height=c*d}var k=document.createElement("canvas");d(k.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(k);a===document.body&&(k.style.position="absolute",d(a.style,{margin:0,padding:0}));var l;a!==document.body&&"function"===typeof ResizeObserver?
(l=new ResizeObserver(function(){setTimeout(e)}),l.observe(a)):window.addEventListener("resize",e,!1);e();return{canvas:k,onDestroy:function(){l?l.disconnect():window.removeEventListener("resize",e);a.removeChild(k)}}}function b(a,b){function d(c){try{return a.getContext(c,b)}catch(e){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function e(a){if("string"===typeof a)return a.split();l(Array.isArray(a),"invalid extension array");return a}function k(a){return"string"===
typeof a?(l("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var l=c("./util/check"),d=c("./util/extend");n.exports=function(d){var c=d||{},u,m,w,r;d={};var x=[],v=[],t="undefined"===typeof window?1:window.devicePixelRatio,n=!1,z=function(a){a&&l.raise(a)},B=function(){};"string"===typeof c?(l("undefined"!==typeof document,"selector queries only supported in DOM environments"),u=document.querySelector(c),l(u,"invalid query string for element")):"object"===
typeof c?"string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?u=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(r=c,w=r.canvas):(l.constructor(c),"gl"in c?r=c.gl:"canvas"in c?w=k(c.canvas):"container"in c&&(m=k(c.container)),"attributes"in c&&(d=c.attributes,l.type(d,"object","invalid context attributes")),"extensions"in c&&(x=e(c.extensions)),"optionalExtensions"in c&&(v=e(c.optionalExtensions)),"onDone"in c&&(l.type(c.onDone,
"function","invalid or missing onDone callback"),z=c.onDone),"profile"in c&&(n=!!c.profile),"pixelRatio"in c&&(t=+c.pixelRatio,l(0<t,"invalid pixel ratio"))):l.raise("invalid arguments to regl");u&&("canvas"===u.nodeName.toLowerCase()?w=u:m=u);if(!r){if(!w){l("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");u=a(m||document.body,z,t);if(!u)return null;w=u.canvas;B=u.onDestroy}void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!0);r=b(w,d)}return r?
{gl:r,canvas:w,container:m,extensions:x,optionalExtensions:v,pixelRatio:t,profile:n,onDone:z,onDestroy:B}:(B(),z("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":22,"./util/extend":26}],39:[function(c,n,m){function a(a,c,k){return Math.sqrt(Math.pow(a,2)+Math.pow(c,2)+Math.pow(k,2))}n.exports=function(b,c){for(var k=c.length,l=b.length,d=Array(k),p=0;p<k;++p)d[p]=[0,0,0];for(p=0;p<l;++p){var g=b[p],u=c[g[0]],m=c[g[1]],w=c[g[2]],r=
u[0]-m[0],x=u[1]-m[1],v=u[2]-m[2],t=a(r,x,v),n=m[0]-w[0],z=m[1]-w[1],B=m[2]-w[2],S=a(n,z,B),J=a(w[0]-u[0],w[1]-u[1],w[2]-u[2]);1E-6>Math.min(t,S,J)||(w=.5*(t+S+J),m=Math.sqrt((w-t)*(w-S)*(w-J)/w),u=x*B-v*z,v=v*n-r*B,r=r*z-x*n,x=a(u,v,r),u/=x,v/=x,r/=x,x=d[g[0]],S=Math.atan2(m,w-S),n=v,z=r,x[0]+=S*u,x[1]+=S*n,x[2]+=S*z,S=d[g[1]],J=Math.atan2(m,w-J),x=v,n=r,S[0]+=J*u,S[1]+=J*x,S[2]+=J*n,g=d[g[2]],t=Math.atan2(m,w-t),w=v,m=r,g[0]+=t*u,g[1]+=t*w,g[2]+=t*m)}for(p=0;p<k;++p)l=d[p],t=Math.sqrt(Math.pow(l[0],
2)+Math.pow(l[1],2)+Math.pow(l[2],2)),1E-8>t?(l[0]=1,l[1]=0,l[2]=0):(l[0]/=t,l[1]/=t,l[2]/=t);return d}},{}],40:[function(c,n,m){function a(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=b);return[a,a===b?0:4-a%4]}function b(a,b,c){for(var k=[],l=b;l<c;l+=3)b=(a[l]<<16&16711680)+(a[l+1]<<8&65280)+(a[l+2]&255),k.push(e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]);return k.join("")}m.byteLength=function(b){b=a(b);var c=b[1];return 3*
(b[0]+c)/4-c};m.toByteArray=function(b){var c,e=a(b);c=e[0];var e=e[1],u=new l(3*(c+e)/4-e),m=0,w=0<e?c-4:c,r;for(r=0;r<w;r+=4)c=k[b.charCodeAt(r)]<<18|k[b.charCodeAt(r+1)]<<12|k[b.charCodeAt(r+2)]<<6|k[b.charCodeAt(r+3)],u[m++]=c>>16&255,u[m++]=c>>8&255,u[m++]=c&255;2===e&&(c=k[b.charCodeAt(r)]<<2|k[b.charCodeAt(r+1)]>>4,u[m++]=c&255);1===e&&(c=k[b.charCodeAt(r)]<<10|k[b.charCodeAt(r+1)]<<4|k[b.charCodeAt(r+2)]>>2,u[m++]=c>>8&255,u[m++]=c&255);return u};m.fromByteArray=function(a){for(var c=a.length,
g=c%3,k=[],l=0,m=c-g;l<m;l+=16383)k.push(b(a,l,l+16383>m?m:l+16383));1===g?(a=a[c-1],k.push(e[a>>2]+e[a<<4&63]+"==")):2===g&&(a=(a[c-2]<<8)+a[c-1],k.push(e[a>>10]+e[a>>4&63]+e[a<<2&63]+"="));return k.join("")};var e=[],k=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)e[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],k["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=c;k[45]=62;k[95]=63},{}],41:[function(c,n,m){function a(a){var b=
32;(a&=-a)&&b--;a&65535&&(b-=16);a&16711935&&(b-=8);a&252645135&&(b-=4);a&858993459&&(b-=2);a&1431655765&&--b;return b}"use restrict";m.INT_BITS=32;m.INT_MAX=2147483647;m.INT_MIN=-2147483648;m.sign=function(a){return(0<a)-(0>a)};m.abs=function(a){var b=a>>31;return(a^b)-b};m.min=function(a,b){return b^(a^b)&-(a<b)};m.max=function(a,b){return a^(a^b)&-(a<b)};m.isPow2=function(a){return!(a&a-1)&&!!a};m.log2=function(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=
(3<a)<<1;return b|c|a>>>c>>1};m.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};m.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};m.countTrailingZeros=a;m.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};m.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};m.parity=function(a){a^=a>>>16;a^=a>>>
8;a=(a^a>>>4)&15;return 27030>>>a&1};var b=Array(256);(function(a){for(var b=0;256>b;++b){for(var c=b,d=b,p=7,c=c>>>1;c;c>>>=1)d<<=1,d|=c&1,--p;a[b]=d<<p&255}})(b);m.reverse=function(a){return b[a&255]<<24|b[a>>>8&255]<<16|b[a>>>16&255]<<8|b[a>>>24&255]};m.interleave2=function(a,b){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1};m.deinterleave2=function(a,
b){a=a>>>b&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};m.interleave3=function(a,b,c){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a=(a|a<<2)&1227133513|((b|b<<2)&1227133513)<<1;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;return a|((c|c<<2)&1227133513)<<2};m.deinterleave3=function(a,b){a=a>>>b&1227133513;
a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};m.nextCombination=function(b){var c=b|b-1;return c+1|(~c&-~c)-1>>>a(b)+1}},{}],42:[function(c,n,m){(function(a,b){function e(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(b){return!1}}function k(a,f){if((b.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<f)throw new RangeError("Invalid typed array length");
b.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(f),a.__proto__=b.prototype):(null===a&&(a=new b(f)),a.length=f);return a}function b(a,f,c){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(a,f,c);if("number"===typeof a){if("string"===typeof f)throw Error("If encoding is specified then the first argument must be a string");return p(this,a)}return l(this,a,f,c)}function l(a,f,c,d){if("number"===typeof f)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&
f instanceof ArrayBuffer){f.byteLength;if(0>c||f.byteLength<c)throw new RangeError("'offset' is out of bounds");if(f.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");f=void 0===c&&void 0===d?new Uint8Array(f):void 0===d?new Uint8Array(f,c):new Uint8Array(f,c,d);b.TYPED_ARRAY_SUPPORT?(a=f,a.__proto__=b.prototype):a=g(a,f);return a}if("string"===typeof f){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!b.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');
c=w(f,a)|0;d=k(d,c);f=d.write(f,a);f!==c&&(d=d.slice(0,f));return d}return u(a,f)}function d(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function p(a,f){d(f);a=k(a,0>f?0:n(f)|0);if(!b.TYPED_ARRAY_SUPPORT)for(var c=0;c<f;++c)a[c]=0;return a}function g(a,b){var c=0>b.length?0:n(b.length)|0;a=k(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function u(a,f){if(b.isBuffer(f)){var c=n(f.length)|
0;a=k(a,c);if(0===a.length)return a;f.copy(a,0,0,c);return a}if(f){if("undefined"!==typeof ArrayBuffer&&f.buffer instanceof ArrayBuffer||"length"in f)return(c="number"!==typeof f.length)||(c=f.length,c=c!==c),c?k(a,0):g(a,f);if("Buffer"===f.type&&N(f.data))return g(a,f.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function n(a){if(a>=(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function w(a,f){if(b.isBuffer(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(f){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return aa(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
c;case "hex":return c>>>1;case "base64":return F.toByteArray(I(a)).length;default:if(d)return aa(a).length;f=(""+f).toLowerCase();d=!0}}function r(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return qa(this,
b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+
a);a=(a+"").toLowerCase();d=!0}}function x(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function v(a,f,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof f&&(f=b.from(f,d));if(b.isBuffer(f))return 0===f.length?-1:t(a,f,c,d,e);if("number"===typeof f)return f&=255,b.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,f,c):Uint8Array.prototype.lastIndexOf.call(a,f,c):t(a,[f],c,d,e);throw new TypeError("val must be string, number or Buffer");}function t(a,b,c,d,e){function g(a,b){return 1===k?a[b]:a.readUInt16BE(b*k)}var k=1,l=a.length,p=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;k=2;l/=2;p/=2;c/=2}if(e)for(d=-1;c<l;c++)if(g(a,c)===g(b,-1===
d?0:c-d)){if(-1===d&&(d=c),c-d+1===p)return d*k}else-1!==d&&(c-=c-d),d=-1;else for(c+p>l&&(c=l-p);0<=c;c--){l=!0;for(d=0;d<p;d++)if(g(a,c+d)!==g(b,d)){l=!1;break}if(l)return c}return-1}function qa(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],g=null,l=239<e?4:223<e?3:191<e?2:1;if(b+l<=c){var k,p,u;switch(l){case 1:128>e&&(g=e);break;case 2:k=a[b+1];128===(k&192)&&(e=(e&31)<<6|k&63,127<e&&(g=e));break;case 3:k=a[b+1];p=a[b+2];128===(k&192)&&128===(p&192)&&(e=(e&15)<<12|(k&63)<<6|p&63,
2047<e&&(55296>e||57343<e)&&(g=e));break;case 4:k=a[b+1],p=a[b+2],u=a[b+3],128===(k&192)&&128===(p&192)&&128===(u&192)&&(e=(e&15)<<18|(k&63)<<12|(p&63)<<6|u&63,65535<e&&1114112>e&&(g=e))}}null===g?(g=65533,l=1):65535<g&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|g&1023);d.push(g);b+=l}a=d.length;if(a<=ea)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=ea));d=c}return d}function z(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");
if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function B(a,c,d,e,g,k){if(!b.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>g||c<k)throw new RangeError('"value" argument is out of bounds');if(d+e>a.length)throw new RangeError("Index out of range");}function S(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,g=Math.min(a.length-c,2);e<g;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function J(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,g=Math.min(a.length-
c,4);e<g;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function fa(a,b,c,d,e,g){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function H(a,b,c,d,e){e||fa(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);la.write(a,b,c,d,23,4);return c+4}function C(a,b,c,d,e){e||fa(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);la.write(a,b,c,d,52,8);return c+8}function I(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(y,"");if(2>a.length)return"";
for(;0!==a.length%4;)a+="=";return a}function aa(a,b){b=b||Infinity;for(var c,d=a.length,e=null,g=[],k=0;k<d;++k){c=a.charCodeAt(k);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&g.push(239,191,189);continue}else if(k+1===d){-1<(b-=3)&&g.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&g.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&g.push(239,191,189);e=null;if(128>c){if(0>--b)break;g.push(c)}else if(2048>c){if(0>(b-=2))break;g.push(c>>6|192,c&
63|128)}else if(65536>c){if(0>(b-=3))break;g.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;g.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return g}function L(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function U(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}var F=c("base64-js"),la=c("ieee754"),N=c("isarray");m.Buffer=b;m.SlowBuffer=function(a){+a!=a&&(a=0);return b.alloc(+a)};
m.INSPECT_MAX_BYTES=50;b.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:e();m.kMaxLength=b.TYPED_ARRAY_SUPPORT?2147483647:1073741823;b.poolSize=8192;b._augment=function(a){a.__proto__=b.prototype;return a};b.from=function(a,b,c){return l(null,a,b,c)};b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&($jscomp.initSymbol(),
Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})));b.alloc=function(a,b,c){d(a);a=0>=a?k(null,a):void 0!==b?"string"===typeof c?k(null,a).fill(b,c):k(null,a).fill(b):k(null,a);return a};b.allocUnsafe=function(a){return p(null,a)};b.allocUnsafeSlow=function(a){return p(null,a)};b.isBuffer=function(a){return!(null==a||!a._isBuffer)};b.compare=function(a,c){if(!b.isBuffer(a)||!b.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(a===c)return 0;for(var d=a.length,e=c.length,
g=0,k=Math.min(d,e);g<k;++g)if(a[g]!==c[g]){d=a[g];e=c[g];break}return d<e?-1:e<d?1:0};b.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(a,c){if(!N(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return b.alloc(0);var d;if(void 0===c)for(d=c=0;d<a.length;++d)c+=a[d].length;
var e=b.allocUnsafe(c),g=0;for(d=0;d<a.length;++d){var k=a[d];if(!b.isBuffer(k))throw new TypeError('"list" argument must be an Array of Buffers');k.copy(e,g);g+=k.length}return e};b.byteLength=w;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)x(this,b,b+1);return this};b.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var b=0;b<a;b+=4)x(this,b,b+3),x(this,b+1,b+2);return this};b.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)x(this,b,b+7),x(this,b+1,b+6),x(this,b+2,b+5),x(this,b+3,b+4);return this};b.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?qa(this,0,a):r.apply(this,arguments)};b.prototype.equals=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");
return this===a?!0:0===b.compare(this,a)};b.prototype.inspect=function(){var a="",b=m.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... "));return"<Buffer "+a+">"};b.prototype.compare=function(a,c,d,e,g){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===d&&(d=a?a.length:0);void 0===e&&(e=0);void 0===g&&(g=this.length);if(0>c||d>a.length||0>e||g>this.length)throw new RangeError("out of range index");
if(e>=g&&c>=d)return 0;if(e>=g)return-1;if(c>=d)return 1;c>>>=0;d>>>=0;e>>>=0;g>>>=0;if(this===a)return 0;var k=g-e,l=d-c,p=Math.min(k,l);e=this.slice(e,g);a=a.slice(c,d);for(c=0;c<p;++c)if(e[c]!==a[c]){k=e[c];l=a[c];break}return k<l?-1:l<k?1:0};b.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};b.prototype.indexOf=function(a,b,c){return v(this,a,b,c,!0)};b.prototype.lastIndexOf=function(a,b,c){return v(this,a,b,c,!1)};b.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=
this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=
d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return U(aa(a,this.length-b),this,b,c);case "ascii":return U(L(a),this,b,c);case "latin1":case "binary":return U(L(a),this,b,c);case "base64":return U(F.toByteArray(I(a)),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-b;for(var g=void 0,g=e=void 0,k=[],l=0;l<
a.length&&!(0>(d-=2));++l)g=a.charCodeAt(l),e=g>>8,g%=256,k.push(g),k.push(e);return U(k,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ea=4096;b.prototype.slice=function(a,c){var d=this.length;a=~~a;c=void 0===c?d:~~c;0>a?(a+=d,0>a&&(a=0)):a>d&&(a=d);0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);c<a&&(c=a);if(b.TYPED_ARRAY_SUPPORT)d=this.subarray(a,c),d.__proto__=
b.prototype;else for(var e=c-a,d=new b(e,void 0),g=0;g<e;++g)d[g]=this[g+a];return d};b.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||z(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};b.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||z(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};b.prototype.readUInt8=function(a,b){b||z(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,b){b||z(a,2,this.length);return this[a]|
this[a+1]<<8};b.prototype.readUInt16BE=function(a,b){b||z(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,b){b||z(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,b){b||z(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||z(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,
8*b));return c};b.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||z(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};b.prototype.readInt8=function(a,b){b||z(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,b){b||z(a,2,this.length);var c=this[a]|this[a+1]<<8;return c&32768?c|4294901760:c};b.prototype.readInt16BE=function(a,b){b||z(a,2,this.length);var c=this[a+1]|this[a]<<8;return c&
32768?c|4294901760:c};b.prototype.readInt32LE=function(a,b){b||z(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,b){b||z(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,b){b||z(a,4,this.length);return la.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,b){b||z(a,4,this.length);return la.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,b){b||z(a,8,this.length);
return la.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,b){b||z(a,8,this.length);return la.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||B(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};b.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||B(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};b.prototype.writeUInt8=function(a,
c,d){a=+a;c|=0;d||B(this,a,c,1,255,0);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[c]=a&255;return c+1};b.prototype.writeUInt16LE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8):S(this,a,c,!0);return c+2};b.prototype.writeUInt16BE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):S(this,a,c,!1);return c+2};b.prototype.writeUInt32LE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,4,4294967295,0);
b.TYPED_ARRAY_SUPPORT?(this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255):J(this,a,c,!0);return c+4};b.prototype.writeUInt32BE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):J(this,a,c,!1);return c+4};b.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),B(this,a,b,c,d-1,-d));d=0;var e=1,g=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===g&&0!==this[b+d-1]&&(g=1),this[b+
d]=(a/e>>0)-g&255;return b+c};b.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),B(this,a,b,c,d-1,-d));d=c-1;var e=1,g=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===g&&0!==this[b+d+1]&&(g=1),this[b+d]=(a/e>>0)-g&255;return b+c};b.prototype.writeInt8=function(a,c,d){a=+a;c|=0;d||B(this,a,c,1,127,-128);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[c]=a&255;return c+1};b.prototype.writeInt16LE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?
(this[c]=a&255,this[c+1]=a>>>8):S(this,a,c,!0);return c+2};b.prototype.writeInt16BE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):S(this,a,c,!1);return c+2};b.prototype.writeInt32LE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24):J(this,a,c,!0);return c+4};b.prototype.writeInt32BE=function(a,c,d){a=+a;c|=0;d||B(this,a,c,4,2147483647,
-2147483648);0>a&&(a=4294967295+a+1);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):J(this,a,c,!1);return c+4};b.prototype.writeFloatLE=function(a,b,c){return H(this,a,b,!0,c)};b.prototype.writeFloatBE=function(a,b,c){return H(this,a,b,!1,c)};b.prototype.writeDoubleLE=function(a,b,c){return C(this,a,b,!0,c)};b.prototype.writeDoubleBE=function(a,b,c){return C(this,a,b,!1,c)};b.prototype.copy=function(a,c,d,e){d||(d=0);e||0===e||(e=this.length);c>=a.length&&
(c=a.length);c||(c=0);0<e&&e<d&&(e=d);if(e===d||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);a.length-c<e-d&&(e=a.length-c+d);var g=e-d;if(this===a&&d<c&&c<e)for(e=g-1;0<=e;--e)a[e+c]=this[e+d];else if(1E3>g||!b.TYPED_ARRAY_SUPPORT)for(e=0;e<g;++e)a[e+c]=this[e+d];else Uint8Array.prototype.set.call(a,
this.subarray(d,d+g),c);return g};b.prototype.fill=function(a,c,d,e){if("string"===typeof a){"string"===typeof c?(e=c,c=0,d=this.length):"string"===typeof d&&(e=d,d=this.length);if(1===a.length){var g=a.charCodeAt(0);256>g&&(a=g)}if(void 0!==e&&"string"!==typeof e)throw new TypeError("encoding must be a string");if("string"===typeof e&&!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);}else"number"===typeof a&&(a&=255);if(0>c||this.length<c||this.length<d)throw new RangeError("Out of range index");
if(d<=c)return this;c>>>=0;d=void 0===d?this.length:d>>>0;a||(a=0);if("number"===typeof a)for(e=c;e<d;++e)this[e]=a;else for(a=b.isBuffer(a)?a:aa((new b(a,e)).toString()),g=a.length,e=0;e<d-c;++e)this[e+c]=a[e%g];return this};var y=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},c("buffer").Buffer)},{"base64-js":40,buffer:42,ieee754:70,isarray:74}],43:[function(c,n,m){function a(){this.argTypes=[];this.shimArgs=
[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var b=c("./lib/thunk.js");n.exports=function(c){var k=new a;k.pre=c.pre;k.body=c.body;k.post=c.post;var l=c.args.slice(0);k.argTypes=l;for(var d=0;d<l.length;++d){var p=l[d];if("array"===p||"object"===typeof p&&p.blockIndices){k.argTypes[d]="array";k.arrayArgs.push(d);k.arrayBlockIndices.push(p.blockIndices?
p.blockIndices:0);k.shimArgs.push("array"+d);if(d<k.pre.args.length&&0<k.pre.args[d].count)throw Error("cwise: pre() block may not reference array args");if(d<k.post.args.length&&0<k.post.args[d].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===p)k.scalarArgs.push(d),k.shimArgs.push("scalar"+d);else if("index"===p){k.indexArgs.push(d);if(d<k.pre.args.length&&0<k.pre.args[d].count)throw Error("cwise: pre() block may not reference array index");if(d<k.body.args.length&&
k.body.args[d].lvalue)throw Error("cwise: body() block may not write to array index");if(d<k.post.args.length&&0<k.post.args[d].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===p){k.shapeArgs.push(d);if(d<k.pre.args.length&&k.pre.args[d].lvalue)throw Error("cwise: pre() block may not write to array shape");if(d<k.body.args.length&&k.body.args[d].lvalue)throw Error("cwise: body() block may not write to array shape");if(d<k.post.args.length&&k.post.args[d].lvalue)throw Error("cwise: post() block may not write to array shape");
}else if("object"===typeof p&&p.offset)k.argTypes[d]="offset",k.offsetArgs.push({array:p.array,offset:p.offset}),k.offsetArgIndex.push(d);else throw Error("cwise: Unknown argument type "+l[d]);}if(0>=k.arrayArgs.length)throw Error("cwise: No array arguments specified");if(k.pre.args.length>l.length)throw Error("cwise: Too many arguments in pre() block");if(k.body.args.length>l.length)throw Error("cwise: Too many arguments in body() block");if(k.post.args.length>l.length)throw Error("cwise: Too many arguments in post() block");
k.debug=!!c.printCode||!!c.debug;k.funcName=c.funcName||"cwise";k.blockSize=c.blockSize||64;return b(k)}},{"./lib/thunk.js":45}],44:[function(c,n,m){function a(a,b,c){var e=a.length,k=b.arrayArgs.length;b=0<b.indexArgs.length;var l=[],r=[],m=0,v=0,t,n;for(t=0;t<e;++t)r.push(["i",t,"=0"].join(""));for(n=0;n<k;++n)for(t=0;t<e;++t)v=m,m=a[t],0===t?r.push(["d",n,"s",t,"=t",n,"p",m].join("")):r.push(["d",n,"s",t,"=(t",n,"p",m,"-s",v,"*t",n,"p",v,")"].join(""));0<r.length&&l.push("var "+r.join(","));for(t=
e-1;0<=t;--t)m=a[t],l.push(["for(i",t,"=0;i",t,"<s",m,";++i",t,"){"].join(""));l.push(c);for(t=0;t<e;++t){v=m;m=a[t];for(n=0;n<k;++n)l.push(["p",n,"+=d",n,"s",t].join(""));b&&(0<t&&l.push(["index[",v,"]-=s",v].join("")),l.push(["++index[",m,"]"].join("")));l.push("}")}return l.join("\n")}function b(b,c,e,k){for(var l=c.length,m=e.arrayArgs.length,r=e.blockSize,n=0<e.indexArgs.length,v=[],t=0;t<m;++t)v.push(["var offset",t,"=p",t].join(""));for(t=b;t<l;++t)v.push(["for(var j"+t+"=SS[",c[t],"]|0;j",
t,">0;){"].join("")),v.push(["if(j",t,"<",r,"){"].join("")),v.push(["s",c[t],"=j",t].join("")),v.push(["j",t,"=0"].join("")),v.push(["}else{s",c[t],"=",r].join("")),v.push(["j",t,"-=",r,"}"].join("")),n&&v.push(["index[",c[t],"]=j",t].join(""));for(t=0;t<m;++t){r=["offset"+t];for(n=b;n<l;++n)r.push(["j",n,"*t",t,"p",c[n]].join(""));v.push(["p",t,"=(",r.join("+"),")"].join(""))}v.push(a(c,e,k));for(t=b;t<l;++t)v.push("}");return v.join("\n")}function e(a,b,c){for(var e=a.body,k=[],l=[],r=0;r<a.args.length;++r){var m=
a.args[r];if(!(0>=m.count)){var v=new RegExp(m.name,"g"),t="",n=b.arrayArgs.indexOf(r);switch(b.argTypes[r]){case "offset":var z=b.offsetArgIndex.indexOf(r),n=b.offsetArgs[z].array,t="+q"+z;case "array":var t="p"+n+t,B="l"+r,z="a"+n;if(0===b.arrayBlockIndices[n])1===m.count?"generic"===c[n]?m.lvalue?(k.push(["var ",B,"=",z,".get(",t,")"].join("")),e=e.replace(v,B),l.push([z,".set(",t,",",B,")"].join(""))):e=e.replace(v,[z,".get(",t,")"].join("")):e=e.replace(v,[z,"[",t,"]"].join("")):"generic"===
c[n]?(k.push(["var ",B,"=",z,".get(",t,")"].join("")),e=e.replace(v,B),m.lvalue&&l.push([z,".set(",t,",",B,")"].join(""))):(k.push(["var ",B,"=",z,"[",t,"]"].join("")),e=e.replace(v,B),m.lvalue&&l.push([z,"[",t,"]=",B].join("")));else{v=[m.name];m=[t];for(t=0;t<Math.abs(b.arrayBlockIndices[n]);t++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(t+1)+"*t"+n+"b"+t);v=new RegExp(v.join(""),"g");t=m.join("+");if("generic"===c[n])throw Error("cwise: Generic arrays not supported in combination with blocks!");
e=e.replace(v,[z,"[",t,"]"].join(""))}break;case "scalar":e=e.replace(v,"Y"+b.scalarArgs.indexOf(r));break;case "index":e=e.replace(v,"index");break;case "shape":e=e.replace(v,"shape")}}}return[k.join("\n"),e,l.join("\n")].join("\n").trim()}function k(a){for(var b=Array(a.length),c=!0,e=0;e<a.length;++e){var k=a[e],l=k.match(/\d+/),l=l?l[0]:"";0===k.charAt(0)?b[e]="u"+k.charAt(1)+l:b[e]=k.charAt(0)+l;0<e&&(c=c&&b[e]===b[e-1])}return c?b[0]:b.join("")}var l=c("uniq");n.exports=function(c,p){for(var g=
p[1].length-Math.abs(c.arrayBlockIndices[0])|0,u=Array(c.arrayArgs.length),m=Array(c.arrayArgs.length),w=0;w<c.arrayArgs.length;++w)m[w]=p[2*w],u[w]=p[2*w+1];for(var r=[],n=[],v=[],t=[],qa=[],w=0;w<c.arrayArgs.length;++w){0>c.arrayBlockIndices[w]?(v.push(0),t.push(g),r.push(g),n.push(g+c.arrayBlockIndices[w])):(v.push(c.arrayBlockIndices[w]),t.push(c.arrayBlockIndices[w]+g),r.push(0),n.push(c.arrayBlockIndices[w]));for(var z=[],B=0;B<u[w].length;B++)v[w]<=u[w][B]&&u[w][B]<t[w]&&z.push(u[w][B]-v[w]);
qa.push(z)}n=["SS"];t=["'use strict'"];z=[];for(B=0;B<g;++B)z.push(["s",B,"=SS[",B,"]"].join(""));for(w=0;w<c.arrayArgs.length;++w){n.push("a"+w);n.push("t"+w);n.push("p"+w);for(B=0;B<g;++B)z.push(["t",w,"p",B,"=t",w,"[",v[w]+B,"]"].join(""));for(B=0;B<Math.abs(c.arrayBlockIndices[w]);++B)z.push(["t",w,"b",B,"=t",w,"[",r[w]+B,"]"].join(""))}for(w=0;w<c.scalarArgs.length;++w)n.push("Y"+w);0<c.shapeArgs.length&&z.push("shape=SS.slice(0)");if(0<c.indexArgs.length){B=Array(g);for(w=0;w<g;++w)B[w]="0";
z.push(["index=[",B.join(","),"]"].join(""))}for(w=0;w<c.offsetArgs.length;++w){r=c.offsetArgs[w];v=[];for(B=0;B<r.offset.length;++B)0!==r.offset[B]&&(1===r.offset[B]?v.push(["t",r.array,"p",B].join("")):v.push([r.offset[B],"*t",r.array,"p",B].join("")));0===v.length?z.push("q"+w+"=0"):z.push(["q",w,"=",v.join("+")].join(""))}w=l([].concat(c.pre.thisVars).concat(c.body.thisVars).concat(c.post.thisVars));z=z.concat(w);0<z.length&&t.push("var "+z.join(","));for(w=0;w<c.arrayArgs.length;++w)t.push("p"+
w+"|=0");3<c.pre.body.length&&t.push(e(c.pre,c,m));w=e(c.body,c,m);a:for(B=0,z=qa[0].length;B<z;){for(r=1;r<qa.length;++r)if(qa[r][B]!==qa[0][B])break a;++B}B<g?t.push(b(B,qa[0],c,w)):t.push(a(qa[0],c,w));3<c.post.body.length&&t.push(e(c.post,c,m));c.debug&&console.log("-----Generated cwise routine for ",p,":\n"+t.join("\n")+"\n----------");g=[c.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",B,k(m)].join("");return(new Function(["function ",g,"(",n.join(","),"){",t.join("\n"),"} return ",g].join("")))()}},
{uniq:88}],45:[function(c,n,m){var a=c("./compile.js");n.exports=function(b){var c=["'use strict'","var CACHED={}"],k=[];c.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var l=[],d=[],p=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],g=[],u=[],m=0;m<b.arrayArgs.length;++m){var n=b.arrayArgs[m];k.push(["t",n,"=array",n,".dtype,r",n,"=array",n,".order"].join(""));
l.push("t"+n);l.push("r"+n);d.push("t"+n);d.push("r"+n+".join()");p.push("array"+n+".data");p.push("array"+n+".stride");p.push("array"+n+".offset|0");0<m&&(g.push("array"+b.arrayArgs[0]+".shape.length===array"+n+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[m]))),u.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+n+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[m])+"]"))}1<b.arrayArgs.length&&(c.push("if (!("+g.join(" && ")+
")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),c.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),c.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(m=0;m<b.scalarArgs.length;++m)p.push("scalar"+b.scalarArgs[m]);k.push(["type=[",d.join(","),"].join()"].join(""));k.push("proc=CACHED[type]");c.push("var "+k.join(","));c.push(["if(!proc){CACHED[type]=proc=compile([",
l.join(","),"])}return proc(",p.join(","),")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+c.join("\n")+"\n----------");return(new Function("compile",c.join("\n")))(a.bind(void 0,b))}},{"./compile.js":44}],46:[function(c,n,m){function a(b,c,k){var l=b[k]|0;if(0>=l)return[];var d=Array(l),p;if(k===b.length-1)for(p=0;p<l;++p)d[p]=c;else for(p=0;p<l;++p)d[p]=a(b,c,k+1);return d}n.exports=function(b,c){"undefined"===typeof c&&(c=0);switch(typeof b){case "number":if(0<b){var k=b|0,l=c,d,
p;d=Array(k);for(p=0;p<k;++p)d[p]=l;return d}break;case "object":if("number"===typeof b.length)return a(b,c,0)}return[]}},{}],47:[function(c,n,m){function a(a){if(0>a)return Number("0/0");for(var b=e[0],c=e.length-1;0<c;--c)b+=e[c]/(a+c);c=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(c)-c+Math.log(b)-Math.log(a)}var b=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],
e=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];n.exports=function l(c){if(.5>c)return Math.PI/(Math.sin(Math.PI*c)*l(1-c));if(100<c)return Math.exp(a(c));--c;for(var e=b[0],g=1;9>g;g++)e+=b[g]/(c+g);g=c+7+.5;return Math.sqrt(2*Math.PI)*
Math.pow(g,c+.5)*Math.exp(-g)*e};n.exports.log=a},{}],48:[function(c,n,m){n.exports=function(a,b){var c=b[0],k=b[1],l=b[2],d=b[3],p=b[4],g=b[5],m=b[6],n=b[7],w=b[8];a[0]=p*w-g*n;a[1]=l*n-k*w;a[2]=k*g-l*p;a[3]=g*m-d*w;a[4]=c*w-l*m;a[5]=l*d-c*g;a[6]=d*n-p*m;a[7]=k*m-c*n;a[8]=c*p-k*d;return a}},{}],49:[function(c,n,m){n.exports=function(a){var b=new Float32Array(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b}},{}],50:[function(c,n,m){n.exports=function(a,
b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}},{}],51:[function(c,n,m){n.exports=function(){var a=new Float32Array(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],52:[function(c,n,m){n.exports=function(a){var b=a[3],c=a[4],k=a[5],l=a[6],d=a[7],p=a[8];return a[0]*(p*c-k*d)+a[1]*(k*l-p*b)+a[2]*(d*b-c*l)}},{}],53:[function(c,n,m){n.exports=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]+a[4]*
a[4]+a[5]*a[5]+a[6]*a[6]+a[7]*a[7]+a[8]*a[8])}},{}],54:[function(c,n,m){n.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a}},{}],55:[function(c,n,m){n.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}},{}],56:[function(c,n,m){n.exports=function(a,b){var c=b[0],k=b[1],l=b[2],d=b[3],p=c+c,g=k+k,m=l+l,c=c*p,n=k*p,k=k*g,w=l*p,r=l*g,l=l*m,p=d*p,g=d*g,d=d*m;a[0]=1-k-l;
a[3]=n-d;a[6]=w+g;a[1]=n+d;a[4]=1-c-l;a[7]=r-p;a[2]=w-g;a[5]=r+p;a[8]=1-c-k;return a}},{}],57:[function(c,n,m){n.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],58:[function(c,n,m){n.exports={adjoint:c("./adjoint"),clone:c("./clone"),copy:c("./copy"),create:c("./create"),determinant:c("./determinant"),frob:c("./frob"),fromMat2:c("./from-mat2"),fromMat4:c("./from-mat4"),fromQuat:c("./from-quat"),identity:c("./identity"),invert:c("./invert"),multiply:c("./multiply"),
normalFromMat4:c("./normal-from-mat4"),rotate:c("./rotate"),scale:c("./scale"),str:c("./str"),translate:c("./translate"),transpose:c("./transpose")}},{"./adjoint":48,"./clone":49,"./copy":50,"./create":51,"./determinant":52,"./frob":53,"./from-mat2":54,"./from-mat4":55,"./from-quat":56,"./identity":57,"./invert":59,"./multiply":60,"./normal-from-mat4":61,"./rotate":62,"./scale":63,"./str":64,"./translate":65,"./transpose":66}],59:[function(c,n,m){n.exports=function(a,b){var c=b[0],k=b[1],l=b[2],d=
b[3],p=b[4],g=b[5],m=b[6],n=b[7],w=b[8],r=w*p-g*n,x=-w*d+g*m,v=n*d-p*m,t=c*r+k*x+l*v;if(!t)return null;t=1/t;a[0]=r*t;a[1]=(-w*k+l*n)*t;a[2]=(g*k-l*p)*t;a[3]=x*t;a[4]=(w*c-l*m)*t;a[5]=(-g*c+l*d)*t;a[6]=v*t;a[7]=(-n*c+k*m)*t;a[8]=(p*c-k*d)*t;return a}},{}],60:[function(c,n,m){n.exports=function(a,b,c){var k=b[0],l=b[1],d=b[2],p=b[3],g=b[4],m=b[5],n=b[6],w=b[7];b=b[8];var r=c[0],x=c[1],v=c[2],t=c[3],qa=c[4],z=c[5],B=c[6],S=c[7];c=c[8];a[0]=r*k+x*p+v*n;a[1]=r*l+x*g+v*w;a[2]=r*d+x*m+v*b;a[3]=t*k+qa*p+
z*n;a[4]=t*l+qa*g+z*w;a[5]=t*d+qa*m+z*b;a[6]=B*k+S*p+c*n;a[7]=B*l+S*g+c*w;a[8]=B*d+S*m+c*b;return a}},{}],61:[function(c,n,m){n.exports=function(a,b){var c=b[0],k=b[1],l=b[2],d=b[3],p=b[4],g=b[5],m=b[6],n=b[7],w=b[8],r=b[9],x=b[10],v=b[11],t=b[12],qa=b[13],z=b[14],B=b[15],S=c*g-k*p,J=c*m-l*p,fa=c*n-d*p,H=k*m-l*g,C=k*n-d*g,I=l*n-d*m,aa=w*qa-r*t,L=w*z-x*t,w=w*B-v*t,U=r*z-x*qa,r=r*B-v*qa,x=x*B-v*z,v=S*x-J*r+fa*U+H*w-C*L+I*aa;if(!v)return null;v=1/v;a[0]=(g*x-m*r+n*U)*v;a[1]=(m*w-p*x-n*L)*v;a[2]=(p*r-
g*w+n*aa)*v;a[3]=(l*r-k*x-d*U)*v;a[4]=(c*x-l*w+d*L)*v;a[5]=(k*w-c*r-d*aa)*v;a[6]=(qa*I-z*C+B*H)*v;a[7]=(z*fa-t*I-B*J)*v;a[8]=(t*C-qa*fa+B*S)*v;return a}},{}],62:[function(c,n,m){n.exports=function(a,b,c){var k=b[0],l=b[1],d=b[2],p=b[3],g=b[4],m=b[5],n=b[6],w=b[7];b=b[8];var r=Math.sin(c);c=Math.cos(c);a[0]=c*k+r*p;a[1]=c*l+r*g;a[2]=c*d+r*m;a[3]=c*p-r*k;a[4]=c*g-r*l;a[5]=c*m-r*d;a[6]=n;a[7]=w;a[8]=b;return a}},{}],63:[function(c,n,m){n.exports=function(a,b,c){var k=c[0];c=c[1];a[0]=k*b[0];a[1]=k*b[1];
a[2]=k*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}},{}],64:[function(c,n,m){n.exports=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}},{}],65:[function(c,n,m){n.exports=function(a,b,c){var k=b[0],l=b[1],d=b[2],p=b[3],g=b[4],m=b[5],n=b[6],w=b[7];b=b[8];var r=c[0];c=c[1];a[0]=k;a[1]=l;a[2]=d;a[3]=p;a[4]=g;a[5]=m;a[6]=r*k+c*p+n;a[7]=r*l+c*g+w;a[8]=r*d+c*m+b;return a}},{}],66:[function(c,n,m){n.exports=
function(a,b){if(a===b){var c=b[1],k=b[2],l=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=k;a[7]=l}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}},{}],67:[function(c,n,m){n.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],68:[function(c,n,m){var a=c("./identity");n.exports=function(b,c,k,l){var d,p,g,m,n,w,r,x,v=c[0],t=c[1];c=c[2];g=l[0];
m=l[1];p=l[2];r=k[0];l=k[1];d=k[2];if(1E-6>Math.abs(v-r)&&1E-6>Math.abs(t-l)&&1E-6>Math.abs(c-d))return a(b);k=v-r;l=t-l;r=c-d;x=1/Math.sqrt(k*k+l*l+r*r);k*=x;l*=x;r*=x;d=m*r-p*l;p=p*k-g*r;g=g*l-m*k;(x=Math.sqrt(d*d+p*p+g*g))?(x=1/x,d*=x,p*=x,g*=x):g=p=d=0;m=l*g-r*p;n=r*d-k*g;w=k*p-l*d;(x=Math.sqrt(m*m+n*n+w*w))?(x=1/x,m*=x,n*=x,w*=x):w=n=m=0;b[0]=d;b[1]=m;b[2]=k;b[3]=0;b[4]=p;b[5]=n;b[6]=l;b[7]=0;b[8]=g;b[9]=w;b[10]=r;b[11]=0;b[12]=-(d*v+p*t+g*c);b[13]=-(m*v+n*t+w*c);b[14]=-(k*v+l*t+r*c);b[15]=1;
return b}},{"./identity":67}],69:[function(c,n,m){n.exports=function(a,b,c,k,l){b=1/Math.tan(b/2);var d=1/(k-l);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(l+k)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*l*k*d;a[15]=0;return a}},{}],70:[function(c,n,m){m.read=function(a,b,c,k,l){var d;d=8*l-k-1;var p=(1<<d)-1,g=p>>1,m=-7;l=c?l-1:0;var n=c?-1:1,w=a[b+l];l+=n;c=w&(1<<-m)-1;w>>=-m;for(m+=d;0<m;c=256*c+a[b+l],l+=n,m-=8);d=c&(1<<-m)-1;c>>=-m;for(m+=k;0<m;d=256*d+a[b+l],l+=n,
m-=8);if(0===c)c=1-g;else{if(c===p)return d?NaN:Infinity*(w?-1:1);d+=Math.pow(2,k);c-=g}return(w?-1:1)*d*Math.pow(2,c-k)};m.write=function(a,b,c,k,l,d){var p,g=8*d-l-1,m=(1<<g)-1,n=m>>1,w=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;d=k?0:d-1;var r=k?1:-1,x=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,k=m):(k=Math.floor(Math.log(b)/Math.LN2),1>b*(p=Math.pow(2,-k))&&(k--,p*=2),b=1<=k+n?b+w/p:b+w*Math.pow(2,1-n),2<=b*p&&(k++,p/=2),k+n>=m?(b=0,k=m):1<=k+n?(b=(b*p-1)*Math.pow(2,
l),k+=n):(b=b*Math.pow(2,n-1)*Math.pow(2,l),k=0));for(;8<=l;a[c+d]=b&255,d+=r,b/=256,l-=8);k=k<<l|b;for(g+=l;0<g;a[c+d]=k&255,d+=r,k/=256,g-=8);a[c+d-r]|=128*x}},{}],71:[function(c,n,m){n.exports=function(a,b){b=b||Array(a.length);for(var c=0;c<a.length;++c)b[a[c]]=c;return b}},{}],72:[function(c,n,m){n.exports=function(a){for(var b=Array(a),c=0;c<a;++c)b[c]=c;return b}},{}],73:[function(c,n,m){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}
n.exports=function(b){return null!=b&&(a(b)||"function"===typeof b.readFloatLE&&"function"===typeof b.slice&&a(b.slice(0,0))||!!b._isBuffer)}},{}],74:[function(c,n,m){var a={}.toString;n.exports=Array.isArray||function(b){return"[object Array]"==a.call(b)}},{}],75:[function(c,n,m){n.exports=function(b,c){function k(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==qa.alt,qa.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==qa.shift,qa.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==qa.control,qa.control=
!!a.ctrlKey);"metaKey"in a&&(b=b||a.metaKey!==qa.meta,qa.meta=!!a.metaKey);return b}function l(b,d){var g=a.x(d),l=a.y(d);"buttons"in d&&(b=d.buttons|0);if(b!==x||g!==v||l!==t||k(d))x=b|0,v=g||0,t=l||0,c&&c(x,v,t,qa)}function d(a){l(0,a)}function p(){if(x||v||t||qa.shift||qa.alt||qa.meta||qa.control)x=v=t=0,qa.shift=qa.alt=qa.control=qa.meta=!1,c&&c(0,0,0,qa)}function g(a){k(a)&&c&&c(x,v,t,qa)}function m(b){0===a.buttons(b)?l(0,b):l(x,b)}function n(b){l(x|a.buttons(b),b)}function w(b){l(x&~a.buttons(b),
b)}function r(){z||(z=!0,b.addEventListener("mousemove",m),b.addEventListener("mousedown",n),b.addEventListener("mouseup",w),b.addEventListener("mouseleave",d),b.addEventListener("mouseenter",d),b.addEventListener("mouseout",d),b.addEventListener("mouseover",d),b.addEventListener("blur",p),b.addEventListener("keyup",g),b.addEventListener("keydown",g),b.addEventListener("keypress",g),b!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",g),window.addEventListener("keydown",
g),window.addEventListener("keypress",g)))}c||(c=b,b=window);var x=0,v=0,t=0,qa={shift:!1,alt:!1,control:!1,meta:!1},z=!1;r();var B={element:b};Object.defineProperties(B,{enabled:{get:function(){return z},set:function(a){a?r():z&&(z=!1,b.removeEventListener("mousemove",m),b.removeEventListener("mousedown",n),b.removeEventListener("mouseup",w),b.removeEventListener("mouseleave",d),b.removeEventListener("mouseenter",d),b.removeEventListener("mouseout",d),b.removeEventListener("mouseover",d),b.removeEventListener("blur",
p),b.removeEventListener("keyup",g),b.removeEventListener("keydown",g),b.removeEventListener("keypress",g),b!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))},enumerable:!0},buttons:{get:function(){return x},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return t},enumerable:!0},mods:{get:function(){return qa},enumerable:!0}});return B};var a=c("mouse-event")},
{"mouse-event":76}],76:[function(c,n,m){function a(a){return a.target||a.srcElement||window}m.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};m.element=a;m.x=function(b){if("object"===typeof b){if("offsetX"in b)return b.offsetX;var c=a(b).getBoundingClientRect();return b.clientX-c.left}return 0};
m.y=function(b){if("object"===typeof b){if("offsetY"in b)return b.offsetY;var c=a(b).getBoundingClientRect();return b.clientY-c.top}return 0}},{}],77:[function(c,n,m){var a=c("to-px");n.exports=function(b,c,k){"function"===typeof b&&(k=!!c,c=b,b=window);var l=a("ex",b),d=function(a){k&&a.preventDefault();var b=a.deltaX||0,d=a.deltaY||0,m=a.deltaZ||0,n=1;switch(a.deltaMode){case 1:n=l;break;case 2:n=window.innerHeight}b*=n;d*=n;m*=n;if(b||d||m)return c(b,d,m,a)};b.addEventListener("wheel",d);return d}},
{"to-px":85}],78:[function(c,n,m){function a(a,b,c){for(var d=0,e=0;e<a;++e)b&1<<e&&(d|=1<<c[e]);return d}function b(b,c,m,n,v,t){function qa(a,b){C.push("for(","i"+v[a],"=",b,";","i"+v[a],"<","s"+v[a],";","++","i"+v[a],"){")}function z(a){for(var b=0;b<J;++b)C.push("p"+b,"+=","u"+b+"_"+v[a],";");C.push("}")}function B(){for(var a=1;a<1<<fa;++a)C.push(u,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",u,";")}function S(a,b){if(0>a){for(var c=0;c<J;++c)t[c]?C.push("c"+c+"_0","=","d"+c,".get(","p"+c,");"):
C.push("c"+c+"_0","=","d"+c,"[","p"+c,"];");for(var e=[],c=0;c<J;++c)e.push("c"+c+"_0");for(c=0;c<n;++c)e.push("x"+c);C.push("b0","=",l,"[",g,"]=phase(",e.join(),");");for(e=1;e<1<<fa;++e)C.push("b"+e,"=",l,"[",g,"+","e"+e,"];");c=[];for(e=1;e<1<<fa;++e)c.push("(b0!==b"+e+")");C.push("if(",c.join("||"),"){");for(var f=[],c=0;c<fa;++c)f.push("i"+c);for(c=0;c<J;++c)for(f.push("c"+c+"_0"),e=1;e<1<<fa;++e)t[c]?C.push("c"+c+"_"+e,"=","d"+c,".get(","p"+c,"+","d"+c+"_"+e,");"):C.push("c"+c+"_"+e,"=","d"+
c,"[","p"+c,"+","d"+c+"_"+e,"];"),f.push("c"+c+"_"+e);for(c=0;c<1<<fa;++c)f.push("b"+c);for(c=0;c<n;++c)f.push("x"+c);C.push("vertex(",f.join(),");","v0","=",k,"[",g,"]=",d,"++;");c=(1<<fa)-1;f="b"+c;for(e=0;e<fa;++e)if(0===(b&~(1<<e))){for(var m=c^1<<e,p="b"+m,r=[],u=m;0<u;u=u-1&m)r.push(k+"["+g+"+"+("e"+u)+"]");r.push("v0");for(u=0;u<J;++u)e&1?r.push("c"+u+"_"+c,"c"+u+"_"+m):r.push("c"+u+"_"+m,"c"+u+"_"+c);e&1?r.push(f,p):r.push(p,f);for(u=0;u<n;++u)r.push("x"+u);C.push("if(",f,"!==",p,"){","face(",
r.join(),")}")}C.push("}",g,"+=1;")}else{for(e=a-1;0<=e;--e)qa(e,0);c=[];for(e=0;e<J;++e)t[e]?c.push("d"+e+".get("+("p"+e)+")"):c.push("d"+e+"["+("p"+e)+"]");for(e=0;e<n;++e)c.push("x"+e);C.push(l,"[",g,"++]=phase(",c.join(),");");for(e=0;e<a;++e)z(e);for(e=0;e<J;++e)C.push("p"+e,"+=","u"+e+"_"+v[a],";");C.push("if(","s"+v[a],">0){","i"+v[a],"=1;");S(a-1,b|1<<v[a]);for(e=0;e<J;++e)C.push("p"+e,"+=","u"+e+"_"+v[a],";");a===fa-1&&(C.push(g,"=0;"),B());qa(a,2);S(a-1,b);a===fa-1&&(C.push("if(","i"+v[fa-
1],"&1){",g,"=0;}"),B());z(a);C.push("}")}}var J=t.length,fa=v.length;if(2>fa)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var H="extractContour"+v.join("_"),C=[],I=[],aa=[],L=0;L<J;++L)aa.push("a"+L);for(L=0;L<n;++L)aa.push("x"+L);for(L=0;L<fa;++L)I.push("s"+L+"=a0.shape["+L+"]|0");for(L=0;L<J;++L){I.push("d"+L+"="+("a"+L)+".data","o"+L+"="+("a"+L)+".offset|0");for(var U=0;U<fa;++U)I.push("t"+L+"_"+U+"="+("a"+L)+".stride["+U+"]|0")}for(L=0;L<J;++L)for(I.push("p"+L+"="+
("o"+L)),I.push("c"+L+"_0"),U=1;U<1<<fa;++U){for(var F=[],la=0;la<fa;++la)U&1<<la&&F.push("-"+("t"+L+"_"+la));I.push("d"+L+"_"+U+"=("+F.join("")+")|0");I.push("c"+L+"_"+U+"=0")}for(L=0;L<J;++L)for(U=0;U<fa;++U)la=["t"+L+"_"+v[U]],0<U&&la.push("t"+L+"_"+v[U-1]+"*"+("s"+v[U-1])),I.push("u"+L+"_"+v[U]+"=("+la.join("-")+")|0");for(L=0;L<fa;++L)I.push("i"+L+"=0");I.push(d+"=0");U=["2"];for(L=fa-2;0<=L;--L)U.push("s"+v[L]);I.push(p+"=("+U.join("*")+")|0",l+"=mallocUint32("+p+")",k+"=mallocUint32("+p+")",
g+"=0");I.push("b0=0");for(U=1;U<1<<fa;++U){L=[];F=[];for(la=0;la<fa;++la)U&1<<la&&(0===F.length?L.push("1"):L.unshift(F.join("*"))),F.push("s"+v[la]);la="";0>L[0].indexOf("s"+v[fa-2])&&(la="-");F=a(fa,U,v);I.push("e"+F+"=(-"+L.join("-")+")|0","y"+F+"=("+la+L.join("-")+")|0","b"+F+"=0")}I.push("v0=0",u+"=0");S(fa-1,0);C.push("freeUint32(",k,");freeUint32(",l,");");H=["'use strict';function ",H,"(",aa.join(),"){var ",I.join(),";",C.join(""),"}return ",H].join("");return(new Function("vertex","face",
"phase","mallocUint32","freeUint32",H))(b,c,m,e.mallocUint32,e.freeUint32)}var e=c("typedarray-pool");n.exports=function(a){function c(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&c("Must specify arguments");var d=a.order;Array.isArray(d)||c("Must specify order");var e=a.arrayArguments||1;1>e&&c("Must have at least one array argument");var g=a.scalarArguments||0;0>g&&c("Scalar arg count must be > 0");"function"!==typeof a.vertex&&c("Must specify vertex creation function");"function"!==
typeof a.cell&&c("Must specify cell creation function");"function"!==typeof a.phase&&c("Must specify phase function");for(var k=a.getters||[],l=Array(e),m=0;m<e;++m)0<=k.indexOf(m)?l[m]=!0:l[m]=!1;return b(a.vertex,a.cell,a.phase,g,d,l)};var k="V",l="P",d="N",p="Q",g="X",u="T"},{"typedarray-pool":87}],79:[function(c,n,m){function a(a,b){return a[0]-b[0]}function b(){var b=this.stride,c=Array(b.length),d;for(d=0;d<c.length;++d)c[d]=[Math.abs(b[d]),d];c.sort(a);b=Array(c.length);for(d=0;d<b.length;++d)b[d]=
c[d][1];return b}function e(a,c){var d=["View",c,"d",a].join("");0>c&&(d="View_Nil"+a);var e="generic"===a;if(-1===c){var k,d=new Function("function "+d+"(a){this.data=a;};var proto="+d+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+d+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
d+"(a){return new "+d+"(a);}");return d()}if(0===c)return d=new Function("TrivialArray","function "+d+"(a,d) {this.data = a;this.offset = d};var proto="+d+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick=function "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
d+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+d+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),d(g[a][0]);k=["'use strict'"];var m=l(c),p=m.map(function(a){return"i"+a}),n="this.offset+"+m.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),z=m.map(function(a){return"b"+a}).join(","),B=m.map(function(a){return"c"+a}).join(",");k.push("function "+
d+"(a,"+z+","+B+",d){this.data=a","this.shape=["+z+"]","this.stride=["+B+"]","this.offset=d|0}","var proto="+d+".prototype","proto.dtype='"+a+"'","proto.dimension="+c);k.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+m.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===c?k.push("proto.order=[0]"):(k.push("Object.defineProperty(proto,'order',{get:"),4>c?(k.push("function "+d+"_order(){"),2===c?k.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===c&&k.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):k.push("ORDER})"));k.push("proto.set=function "+d+"_set("+p.join(",")+",v){");e?k.push("return this.data.set("+n+",v)}"):k.push("return this.data["+n+"]=v}");k.push("proto.get=function "+d+"_get("+p.join(",")+"){");e?k.push("return this.data.get("+
n+")}"):k.push("return this.data["+n+"]}");k.push("proto.index=function "+d+"_index(",p.join(),"){return "+n+"}");k.push("proto.hi=function "+d+"_hi("+p.join(",")+"){return new "+d+"(this.data,"+m.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+m.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");e=m.map(function(a){return"a"+a+"=this.shape["+a+"]"});n=m.map(function(a){return"c"+a+"=this.stride["+a+"]"});k.push("proto.lo=function "+
d+"_lo("+p.join(",")+"){var b=this.offset,d=0,"+e.join(",")+","+n.join(","));for(e=0;e<c;++e)k.push("if(typeof i"+e+"==='number'&&i"+e+">=0){d=i"+e+"|0;b+=c"+e+"*d;a"+e+"-=d}");k.push("return new "+d+"(this.data,"+m.map(function(a){return"a"+a}).join(",")+","+m.map(function(a){return"c"+a}).join(",")+",b)}");k.push("proto.step=function "+d+"_step("+p.join(",")+"){var "+m.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+m.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(e=0;e<c;++e)k.push("if(typeof i"+e+"==='number'){d=i"+e+"|0;if(d<0){c+=b"+e+"*(a"+e+"-1);a"+e+"=ceil(-a"+e+"/d)}else{a"+e+"=ceil(a"+e+"/d)}b"+e+"*=d}");k.push("return new "+d+"(this.data,"+m.map(function(a){return"a"+a}).join(",")+","+m.map(function(a){return"b"+a}).join(",")+",c)}");n=Array(c);z=Array(c);for(e=0;e<c;++e)n[e]="a[i"+e+"]",z[e]="b[i"+e+"]";k.push("proto.transpose=function "+d+"_transpose("+p+"){"+p.map(function(a,b){return a+"=("+a+"===undefined?"+
b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+d+"(this.data,"+n.join(",")+","+z.join(",")+",this.offset)}");k.push("proto.pick=function "+d+"_pick("+p+"){var a=[],b=[],c=this.offset");for(e=0;e<c;++e)k.push("if(typeof i"+e+"==='number'&&i"+e+">=0){c=(c+this.stride["+e+"]*i"+e+")|0}else{a.push(this.shape["+e+"]);b.push(this.stride["+e+"])}");k.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");k.push("return function construct_"+d+"(data,shape,stride,offset){return new "+
d+"(data,"+m.map(function(a){return"shape["+a+"]"}).join(",")+","+m.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");d=new Function("CTOR_LIST","ORDER",k.join("\n"));return d(g[a],b)}function k(a){if(d(a))return"buffer";if(p)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(a)?"array":"generic"}var l=c("iota-array"),d=c("is-buffer"),p="undefined"!==typeof Float64Array,g={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};
(function(){for(var a in g)g[a].push(e(a,-1))});n.exports=function(a,b,c,d){if(void 0===a){var l=g.array[0];return l([])}"number"===typeof a&&(a=[a]);void 0===b&&(b=[a.length]);l=b.length;if(void 0===c){c=Array(l);for(var m=l-1,p=1;0<=m;--m)c[m]=p,p*=b[m]}if(void 0===d)for(m=d=0;m<l;++m)0>c[m]&&(d-=(b[m]-1)*c[m]);m=k(a);for(p=g[m];p.length<=l+1;)p.push(e(m,p.length-1));l=p[l+1];return l(a,b,c,d)}},{"iota-array":72,"is-buffer":73}],80:[function(c,n,m){n.exports=function(a,b){b||(b=[0,""]);a=String(a);
var c=parseFloat(a,10);b[0]=c;b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return b}},{}],81:[function(c,n,m){n.exports=function(c){var k=c.length;if(k<a)for(var l=1,d=0;d<k;++d)for(var m=0;m<d;++m)if(c[d]<c[m])l=-l;else{if(c[d]===c[m])return 0}else{for(var g=b.mallocUint8(k),d=0;d<k;++d)g[d]=0;l=1;for(d=0;d<k;++d)if(!g[d]){var n=1;g[d]=1;for(m=c[d];m!==d;m=c[m]){if(g[m])return b.freeUint8(g),0;n+=1;g[m]=1}n&1||(l=-l)}b.freeUint8(g)}return l};var a=32,b=c("typedarray-pool")},{"typedarray-pool":87}],82:[function(c,
n,m){var a=c("typedarray-pool"),b=c("invert-permutation");m.rank=function(c){var k=c.length;switch(k){case 0:case 1:return 0;case 2:return c[1]}var l=a.mallocUint32(k),d=a.mallocUint32(k),m=0,g;b(c,d);for(g=0;g<k;++g)l[g]=c[g];for(g=k-1;0<g;--g)k=d[g],c=l[g],l[g]=l[k],l[k]=c,d[g]=d[c],d[c]=k,m=(m+c)*g;a.freeUint32(d);a.freeUint32(l);return m};m.unrank=function(a,b,c){switch(a){case 0:return c?c:[];case 1:return c?(c[0]=0,c):[0];case 2:return c?(b?(c[0]=0,c[1]=1):(c[0]=1,c[1]=0),c):b?[0,1]:[1,0]}c=
c||Array(a);var d,m,g=1;c[0]=0;for(m=1;m<a;++m)c[m]=m,g=g*m|0;for(m=a-1;0<m;--m)a=b/g|0,b=b-a*g|0,g=g/m|0,d=c[m]|0,c[m]=c[a]|0,c[a]=d|0;return c}},{"invert-permutation":71,"typedarray-pool":87}],83:[function(c,n,m){function a(a){throw Error("resl: "+a);}function b(b,c,d){Object.keys(b).forEach(function(b){0>c.indexOf(b)&&a('invalid parameter "'+b+'" in '+d)})}function e(a,b){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=b}var k=["manifest","onDone","onProgress","onError"],l=["type",
"src","stream","credentials","parser"],d=["onData","onDone"];n.exports=function(c){function g(b,d){if(b in c){var e=c[b];"function"!==typeof e&&a('invalid callback "'+b+'"');return e}return null}function m(a){function b(){if(!(2>l.readyState||1===n.state||-1===n.state)){if(200!==l.status)return w('error loading resource "'+a.name+'"');if(2<l.readyState&&0===n.state){var d;d="binary"===a.type?l.response:l.responseText;if(k.data)try{p=k.data(d)}catch(e){return w(e)}else p=d}if(3<l.readyState&&0===n.state){if(k.done)try{p=
k.done()}catch(e){return w(e)}n.state=1}z[c]=p;n.progress=.75*n.progress+.25;n.ready=a.stream&&!!p||1===n.state;r()}}var c=a.name,d=a.stream,g="binary"===a.type,k=a.parser,l=new XMLHttpRequest,p=null,n=new e(c,function(){1!==n.state&&-1!==n.state&&(l.onreadystatechange=null,l.abort(),n.state=-1)});l.onreadystatechange=d?b:function(){4===l.readyState&&b()};g&&(l.responseType="arraybuffer");a.credentials&&(l.withCredentials=!0);l.open("GET",a.src,!0);l.send();return n}function n(a,b){function c(){if(0===
u.state)if(p.data)try{t=p.data(b)}catch(a){return w(a)}else t=b}function d(a){c();z[m]=t;u.progress=a.lengthComputable?Math.max(u.progress,a.loaded/a.total):.75*u.progress+.25;r(m)}function g(){c();if(0===u.state){if(p.done)try{t=p.done()}catch(a){return w(a)}u.state=1}u.progress=1;u.ready=!0;z[m]=t;l();r("finish "+m)}function k(){w('error loading asset "'+m+'"')}function l(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",g):b.addEventListener("canplay",g);
b.removeEventListener("error",k)}var m=a.name,p=a.parser,u=new e(m,function(){1!==u.state&&-1!==u.state&&(u.state=-1,l(),b.src="")}),t=b;a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",g);else{var v=!1,h=!1;b.addEventListener("loadedmetadata",function(){h=!0;v&&g()});b.addEventListener("canplay",function(){v=!0;h&&g()})}b.addEventListener("error",k);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return u}function w(a){-1!==B&&1!==B&&
(B=-1,J.forEach(function(a){a.cancel()}),qa?"string"===typeof a?qa(Error("resl: "+a)):qa(a):console.error("resl error:",a))}function r(a){if(-1!==B&&1!==B){var b=0,c=0;J.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===J.length?(B=1,v(z)):t&&t(b/J.length,a)}}"object"===typeof c&&c||a("invalid or missing configuration");b(c,k,"config");var x=c.manifest;"object"===typeof x&&x||a("missing manifest");var v=g("onDone");v||a("missing onDone() callback");var t=g("onProgress"),qa=g("onError"),z={},
B=0,S={text:m,binary:function(a){return m(a)},image:function(a){return n(a,document.createElement("img"))},video:function(a){return n(a,document.createElement("video"))},audio:function(a){return n(a,document.createElement("audio"))}},J=Object.keys(x).map(function(c){function e(b,c){if(b in g.parser){var d=g.parser[b];"function"!==typeof d&&a("invalid parser callback "+b+' for asset "'+b+'"');return d}return c}var g=x[c];"string"===typeof g?g={src:g}:"object"===typeof g&&g||a('invalid asset definition "'+
c+'"');b(g,l,'asset "'+c+'"');var k={};"parser"in g&&("function"===typeof g.parser?k={data:g.parser}:"object"===typeof g.parser&&g.parser?(b(k,d,'parser for asset "'+c+'"'),"onData"in k||a('missing onData callback for parser in asset "'+c+'"'),k={data:e("onData"),done:e("onDone")}):a('invalid parser for asset "'+c+'"'));return{name:c,type:function(b,d,e){b in g&&(e=g[b]);0>d.indexOf(e)&&a("invalid "+b+' "'+e+'" for asset "'+c+'", possible values: '+d);return e}("type",Object.keys(S),"text"),stream:!!g.stream,
credentials:!!g.credentials,src:function(b,d,e){b in g?e=g[b]:d&&a("missing "+b+' for asset "'+c+'"');"string"!==typeof e&&a("invalid "+b+' for asset "'+c+'", must be a string');return e}("src",!0,""),parser:k}}).map(function(a){return S[a.type](a)});0===J.length&&setTimeout(function(){r("done")},1)}},{}],84:[function(c,n,m){function a(a,c){var g=a.length,k=["'use strict';"],l="surfaceNets"+a.join("_")+"d"+c;k.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");
"generic"===c&&k.push("getters:[0],");for(var m=[],n=[],x=0;x<g;++x)m.push("d"+x),n.push("d"+x);for(x=0;x<1<<g;++x)m.push("v"+x),n.push("v"+x);for(x=0;x<1<<g;++x)m.push("p"+x),n.push("p"+x);m.push("a","b","c");n.push("a","c");k.push("vertex:function vertexFunc(",m.join(),"){");m=[];for(x=0;x<1<<g;++x)m.push("(p"+x+"<<"+x+")");k.push("var m=(",m.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var m=[],v=[];128>=1<<(1<<g)?(k.push("switch(m){"),v=k):k.push("switch(m>>>7){");for(x=0;x<1<<(1<<
g);++x){128<1<<(1<<g)&&0===x%128&&(0<m.length&&v.push("}}"),v="vExtra"+m.length,k.push("case ",x>>>7,":",v,"(m&0x7f,",n.join(),");break;"),v=["function ",v,"(m,",n.join(),"){switch(m){"],m.push(v));v.push("case ",x&127,":");for(var t=Array(g),qa=Array(g),z=Array(g),B=Array(g),S=0,J=0;J<g;++J)t[J]=[],qa[J]=[],z[J]=0,B[J]=0;for(J=0;J<1<<g;++J)for(var fa=0;fa<g;++fa){var H=J^1<<fa;if(!(H>J)&&!(x&1<<H)!==!(x&1<<J)){var C=1;x&1<<H?qa[fa].push("v"+H+"-v"+J):(qa[fa].push("v"+J+"-v"+H),C=-C);0>C?(t[fa].push("-v"+
J+"-v"+H),z[fa]+=2):(t[fa].push("v"+J+"+v"+H),z[fa]-=2);S+=1;for(C=0;C<g;++C)C!==fa&&(H&1<<C?B[C]+=1:--B[C])}}J=[];for(fa=0;fa<g;++fa)0===t[fa].length?J.push("d"+fa+"-0.5"):(H="",0>z[fa]?H=z[fa]+"*c":0<z[fa]&&(H="+"+z[fa]+"*c"),J.push("d"+fa+"-"+(.5+B[fa]/S*.5)+"-"+t[fa].length/S*.5+"*("+t[fa].join("+")+H+")/("+qa[fa].join("+")+")"));v.push("a.push([",J.join(),"]);","break;")}k.push("}},");0<m.length&&v.push("}}");n=[];for(x=0;x<1<<g-1;++x)n.push("v"+x);n.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",
n.join(),"){");g=e(g-1);k.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",l,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",l,";");for(x=0;x<m.length;++x)k.push(m[x].join(""));return(new Function("genContour",k.join("")))(b)}n.exports=function(b,c){if(0>=
b.dimension)return{positions:[],cells:[]};if(1===b.dimension){for(var e=k(b,c),m=e.length,n=Array(m),w=Array(m),r=0;r<m;++r)n[r]=[e[r]],w[r]=[r];return{positions:n,cells:w}}e=b.order.join()+"-"+b.dtype;m=l[e];c=+c||0;m||(m=l[e]=a(b.order,b.dtype));return m(b,c)};var b=c("ndarray-extract-contour"),e=c("triangulate-hypercube"),k=c("zero-crossings"),l={}},{"ndarray-extract-contour":78,"triangulate-hypercube":86,"zero-crossings":90}],85:[function(c,n,m){function a(a,b){var c=k(getComputedStyle(a).getPropertyValue(b));
return c[0]*e(c[1],a)}function b(b,c){var e=document.createElement("div");e.style.height="128"+b;c.appendChild(e);var k=a(e,"height")/128;c.removeChild(e);return k}function e(c,m){if(!c)return null;m=m||document.body;c=(c+""||"px").trim().toLowerCase();if(m===window||m===document)m=document.body;switch(c){case "%":return m.clientHeight/100;case "ch":case "ex":return b(c,m);case "em":return a(m,"font-size");case "rem":return a(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/
100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return l;case "cm":return l/2.54;case "mm":return l/25.4;case "pt":return l/72;case "pc":return l/6;case "px":return 1}var g=k(c);if(!isNaN(g[0])&&g[1]){var n=e(g[1],m);return"number"===typeof n?g[0]*n:null}return null}var k=c("parse-unit");n.exports=e;var l=b("in",document.body)},{"parse-unit":80}],86:[function(c,n,m){n.exports=function(c){if(0>
c)return[];if(0===c)return[[0]];for(var l=Math.round(e(c+1))|0,d=[],m=0;m<l;++m){for(var g=a.unrank(c,m),n=[0],T=0,w=0;w<g.length;++w)T+=1<<g[w],n.push(T);1>b(g)&&(n[0]=T,n[c]=0);d.push(n)}return d};var a=c("permutation-rank"),b=c("permutation-parity"),e=c("gamma")},{gamma:47,"permutation-parity":81,"permutation-rank":82}],87:[function(c,n,m){(function(a){function b(a){if(a){var b=z.log2(a.length||a.byteLength);I[b].push(a)}}function e(a){a=z.nextPow2(a);var b=z.log2(a),b=I[b];return 0<b.length?b.pop():
new ArrayBuffer(a)}function k(a){return new Uint8Array(e(a),0,a)}function l(a){return new Uint16Array(e(2*a),0,a)}function d(a){return new Uint32Array(e(4*a),0,a)}function n(a){return new Int8Array(e(a),0,a)}function g(a){return new Int16Array(e(2*a),0,a)}function u(a){return new Int32Array(e(4*a),0,a)}function T(a){return new Float32Array(e(4*a),0,a)}function w(a){return new Float64Array(e(8*a),0,a)}function r(a){return J?new Uint8ClampedArray(e(a),0,a):k(a)}function x(a){return fa?new BigUint64Array(e(8*
a),0,a):null}function v(a){return H?new BigInt64Array(e(8*a),0,a):null}function t(a){return new DataView(e(a),0,a)}function qa(a){a=z.nextPow2(a);var b=z.log2(a),b=aa[b];return 0<b.length?b.pop():new S(a)}var z=c("bit-twiddle"),B=c("dup"),S=c("buffer").Buffer;a.__TYPEDARRAY_POOL||(a.__TYPEDARRAY_POOL={UINT8:B([32,0]),UINT16:B([32,0]),UINT32:B([32,0]),BIGUINT64:B([32,0]),INT8:B([32,0]),INT16:B([32,0]),INT32:B([32,0]),BIGINT64:B([32,0]),FLOAT:B([32,0]),DOUBLE:B([32,0]),DATA:B([32,0]),UINT8C:B([32,0]),
BUFFER:B([32,0])});var J="undefined"!==typeof Uint8ClampedArray,fa="undefined"!==typeof BigUint64Array,H="undefined"!==typeof BigInt64Array,C=a.__TYPEDARRAY_POOL;C.UINT8C||(C.UINT8C=B([32,0]));C.BIGUINT64||(C.BIGUINT64=B([32,0]));C.BIGINT64||(C.BIGINT64=B([32,0]));C.BUFFER||(C.BUFFER=B([32,0]));var I=C.DATA,aa=C.BUFFER;m.free=function(a){if(S.isBuffer(a))aa[z.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=z.log2(a.length||a.byteLength)|
0;I[b].push(a)}};m.freeUint8=m.freeUint16=m.freeUint32=m.freeBigUint64=m.freeInt8=m.freeInt16=m.freeInt32=m.freeBigInt64=m.freeFloat32=m.freeFloat=m.freeFloat64=m.freeDouble=m.freeUint8Clamped=m.freeDataView=function(a){b(a.buffer)};m.freeArrayBuffer=b;m.freeBuffer=function(a){aa[z.log2(a.length)].push(a)};m.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return e(a);switch(b){case "uint8":return k(a);case "uint16":return l(a);case "uint32":return d(a);case "int8":return n(a);case "int16":return g(a);
case "int32":return u(a);case "float":case "float32":return T(a);case "double":case "float64":return w(a);case "uint8_clamped":return r(a);case "bigint64":return v(a);case "biguint64":return x(a);case "buffer":return qa(a);case "data":case "dataview":return t(a);default:return null}};m.mallocArrayBuffer=e;m.mallocUint8=k;m.mallocUint16=l;m.mallocUint32=d;m.mallocInt8=n;m.mallocInt16=g;m.mallocInt32=u;m.mallocFloat32=m.mallocFloat=T;m.mallocFloat64=m.mallocDouble=w;m.mallocUint8Clamped=r;m.mallocBigUint64=
x;m.mallocBigInt64=v;m.mallocDataView=t;m.mallocBuffer=qa;m.clearCache=function(){for(var a=0;32>a;++a)C.UINT8[a].length=0,C.UINT16[a].length=0,C.UINT32[a].length=0,C.INT8[a].length=0,C.INT16[a].length=0,C.INT32[a].length=0,C.FLOAT[a].length=0,C.DOUBLE[a].length=0,C.BIGUINT64[a].length=0,C.BIGINT64[a].length=0,C.UINT8C[a].length=0,I[a].length=0,aa[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":41,buffer:42,
dup:46}],88:[function(c,n,m){n.exports=function(a,b,c){if(0===a.length)return a;if(b){c||a.sort(b);c=1;for(var k=a.length,l=a[0],d=a[0],m=1;m<k;++m)d=l,l=a[m],b(l,d)&&(m===c?c++:a[c++]=l);a.length=c;return a}c||a.sort();b=1;c=a.length;k=a[0];l=a[0];for(d=1;d<c;++d)l=k,k=a[d],k!==l&&(d===b?b++:a[b++]=k);a.length=b;return a}},{}],89:[function(c,n,m){n.exports=c("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":43}],90:[function(c,n,m){n.exports=function(b,c){var k=[];c=+c||0;a(b.hi(b.shape[0]-1),k,c);return k};var a=c("./lib/zc-core")},{"./lib/zc-core":89}],91:[function(c,n,m){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var b=c("./lib/util/check"),
e=c("./lib/util/extend"),k=c("./lib/dynamic"),l=c("./lib/util/raf"),d=c("./lib/util/clock"),p=c("./lib/strings"),g=c("./lib/webgl"),u=c("./lib/extension"),T=c("./lib/limits"),w=c("./lib/buffer"),r=c("./lib/elements"),x=c("./lib/texture"),v=c("./lib/renderbuffer"),t=c("./lib/framebuffer"),qa=c("./lib/attribute"),z=c("./lib/shader"),B=c("./lib/read"),S=c("./lib/core"),J=c("./lib/stats"),fa=c("./lib/timer");n.exports=function(c){function m(){if(0===qb.length)Q&&Q.update(),rc=null;else{rc=l.next(m);y();
for(var a=qb.length-1;0<=a;--a){var b=qb[a];b&&b(R,null,0)}q.flush();Q&&Q.update()}}function n(){!rc&&0<qb.length&&(rc=l.next(m))}function aa(){rc&&(l.cancel(m),rc=null)}function L(a){a.preventDefault();Wa=!0;aa();ga.forEach(function(a){a()})}function U(a){q.getError();Wa=!1;kc.restore();na.restore();Xa.restore();ba.restore();Ca.restore();Ka.restore();D.restore();Q&&Q.restore();Wb.procs.refresh();n();ra.forEach(function(a){a()})}function F(a){function c(a,b){var d={},e={};Object.keys(a).forEach(function(c){var f=
a[c];if(k.isDynamic(f))e[c]=k.unbox(f,c);else{if(b&&Array.isArray(f))for(var g=0;g<f.length;++g)if(k.isDynamic(f[g])){e[c]=k.unbox(f,c);return}d[c]=f}});return{dynamic:e,"static":d}}function d(a){for(;r.length<a;)r.push(null);return r}b(!!a,"invalid args to regl({...})");b.type(a,"object","invalid args to regl({...})");var f=c(a.context||{},!0),g=c(a.uniforms||{},!0),h=c(a.attributes||{},!1);a=c(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+
b]=d[b]})}}var c=e({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var l={gpuTime:0,cpuTime:0,count:0},m=Wb.compile(a,h,g,f,l),n=m.draw,p=m.batch,q=m.scope,r=[];return e(function(a,c){var e;Wa&&b.raise("context lost");if("function"===typeof a)return q.call(this,
null,a,0);if("function"===typeof c)if("number"===typeof a)for(e=0;e<a;++e)q.call(this,null,c,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)q.call(this,a[e],c,e);else return q.call(this,a,c,0);else if("number"===typeof a){if(0<a)return p.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return p.call(this,a,a.length)}else return n.call(this,a)},{stats:l,destroy:function(){m.destroy()}})}function la(a,c){var d=0;Wb.procs.poll();var e=c.color;e&&(q.clearColor(+e[0]||0,+e[1]||0,+e[2]||
0,+e[3]||0),d|=16384);"depth"in c&&(q.clearDepth(+c.depth),d|=256);"stencil"in c&&(q.clearStencil(c.stencil|0),d|=1024);b(!!d,"called regl.clear with no buffer specified");q.clear(d)}function N(c){b.type(c,"function","regl.frame() callback must be a function");qb.push(c);n();return{cancel:function(){function d(){var b=a(qb,d);qb[b]=qb[qb.length-1];--qb.length;0>=qb.length&&aa()}var e=a(qb,c);b(0<=e,"cannot cancel a frame twice");qb[e]=d}}}function ea(){var a=$a.viewport,b=$a.scissor_box;a[0]=a[1]=
b[0]=b[1]=0;R.viewportWidth=R.framebufferWidth=R.drawingBufferWidth=a[2]=b[2]=q.drawingBufferWidth;R.viewportHeight=R.framebufferHeight=R.drawingBufferHeight=a[3]=b[3]=q.drawingBufferHeight}function y(){R.tick+=1;R.time=f();ea();Wb.procs.poll()}function h(){ba.refresh();ea();Wb.procs.refresh();Q&&Q.update()}function f(){return(d()-O)/1E3}console.log("REGL args are:",c);c=g(c);if(!c)return null;var q=c.gl,ca=q.getContextAttributes(),Wa=q.isContextLost(),kc=u(q,c);if(!kc)return null;var pa=p(),Na=J(),
ia=kc.extensions,Q=fa(q,ia),O=d(),W=q.drawingBufferWidth,ta=q.drawingBufferHeight,R={tick:0,time:0,viewportWidth:W,viewportHeight:ta,framebufferWidth:W,framebufferHeight:ta,drawingBufferWidth:W,drawingBufferHeight:ta,pixelRatio:c.pixelRatio},W={elements:null,primitive:4,count:-1,offset:0,instances:-1},Vb=T(q,ia),Xa=w(q,Na,c,function(a){return D.destroyBuffer(a)}),V=r(q,ia,Xa,Na),D=qa(q,ia,Vb,Na,Xa,V,W),na=z(q,pa,Na,c),ba=x(q,ia,Vb,function(){Wb.procs.poll()},R,Na,c),Ca=v(q,ia,Vb,Na,c),Ka=t(q,ia,Vb,
ba,Ca,Na),Wb=S(q,pa,ia,Vb,Xa,V,ba,Ka,{},D,na,W,R,Q,c),pa=B(q,Ka,Wb.procs.poll,R,ca,ia,Vb),$a=Wb.next,X=q.canvas,qb=[],ga=[],ra=[],Tb=[c.onDestroy],rc=null;X&&(X.addEventListener("webglcontextlost",L,!1),X.addEventListener("webglcontextrestored",U,!1));var mc=Ka.setFBO=F({framebuffer:k.define.call(null,1,"framebuffer")});h();ca=e(F,{clear:function(a){b("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var c=
0;6>c;++c)mc(e({framebuffer:a.framebuffer.faces[c]},a),la);else mc(a,la);else la(null,a)},prop:k.define.bind(null,1),context:k.define.bind(null,2),"this":k.define.bind(null,3),draw:F({}),buffer:function(a){return Xa.create(a,34962,!1,!1)},elements:function(a){return V.create(a,!1)},texture:ba.create2D,cube:ba.createCube,renderbuffer:Ca.create,framebuffer:Ka.create,framebufferCube:Ka.createCube,vao:D.createVAO,attributes:ca,frame:N,on:function(a,c){b.type(c,"function","listener callback must be a function");
var d;switch(a){case "frame":return N(c);case "lost":d=ga;break;case "restore":d=ra;break;case "destroy":d=Tb;break;default:b.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(c);return{cancel:function(){for(var a=0;a<d.length;++a)if(d[a]===c){d[a]=d[d.length-1];d.pop();break}}}},limits:Vb,hasExtension:function(a){return 0<=Vb.extensions.indexOf(a.toLowerCase())},read:pa,destroy:function(){qb.length=0;aa();X&&(X.removeEventListener("webglcontextlost",L),X.removeEventListener("webglcontextrestored",
U));na.clear();Ka.clear();Ca.clear();D.clear();ba.clear();V.clear();Xa.clear();Q&&Q.clear();Tb.forEach(function(a){a()})},_gl:q,_refresh:h,poll:function(){y();Q&&Q.update()},now:f,stats:Na});c.onDone(null,ca);return ca}},{"./lib/attribute":3,"./lib/buffer":4,"./lib/core":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/stats":18,"./lib/strings":19,"./lib/texture":20,"./lib/timer":21,
"./lib/util/check":22,"./lib/util/clock":23,"./lib/util/extend":26,"./lib/util/raf":34,"./lib/webgl":38}]},{},[1]);

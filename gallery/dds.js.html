<!DOCTYPE html>
      <html>
        <head>
          <title>example/dds.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function Z(fa,Oa,b){function ba(g,k){if(!Oa[g]){if(!fa[g]){var n="function"==typeof require&&require;if(!k&&n)return n(g,!0);if(H)return H(g,!0);n=Error("Cannot find module '"+g+"'");throw n.code="MODULE_NOT_FOUND",n;}n=Oa[g]={exports:{}};fa[g][0].call(n.exports,function(f){return ba(fa[g][1][f]||f)},n,n.exports,Z,fa,Oa,b)}return Oa[g].exports}for(var H="function"==typeof require&&require,I=0;I<b.length;I++)ba(b[I]);return ba}return Z})()({1:[function(Z,fa,Oa){var b=Z("../regl")({extensions:"WEBGL_compressed_texture_s3tc"}),
ba=Z("parse-dds");Z("resl")({manifest:{diffuse:{type:"binary",src:"assets/alpine_cliff_a.dds",parser:function(H){var I=ba(H),g=I.images[0];return b.texture({format:"rgba s3tc "+I.format,shape:I.shape,mag:"linear",data:new Uint8Array(H,g.offset,g.length)})}},specular:{type:"image",src:"assets/alpine_cliff_a_spec.png",parser:function(H){return b.texture({mag:"linear",data:H})}},normals:{type:"image",src:"assets/alpine_cliff_a_norm.png",parser:function(H){return b.texture({mag:"linear",data:H})}}},onDone:function(H){var I=
b({frag:"\n      precision mediump float;\n      uniform sampler2D specular, normals, diffuse;\n      varying vec3 lightDir, eyeDir;\n      varying vec2 uv;\n      void main () {\n        float d = length(lightDir);\n        vec3 L = normalize(lightDir);\n        vec3 E = normalize(eyeDir);\n        vec3 N = normalize(2.0 * texture2D(normals, uv).rgb - 1.0);\n        N = vec3(-N.x, N.yz);\n        vec3 D = texture2D(diffuse, uv).rgb;\n        vec3 kD = D * (0.01 +\n          max(0.0, dot(L, N) * (0.6 + 0.8 / d) ));\n        vec3 S = texture2D(specular, uv).rgb;\n        vec3 kS = 2.0 * pow(max(0.0, dot(normalize(N + L), -E)), 10.0) * S;\n        gl_FragColor = vec4(kD + kS, 1);\n      }",
vert:"\n      precision mediump float;\n      attribute vec2 position;\n      uniform vec2 lightPosition;\n      varying vec3 lightDir, eyeDir;\n      varying vec2 uv;\n      void main () {\n        vec2 P = 1.0 - 2.0 * position;\n        uv = vec2(position.x, 1.0 - position.y);\n        eyeDir = -vec3(P, 1);\n        lightDir = vec3(lightPosition - P, 1);\n        gl_Position = vec4(P, 0, 1);\n      }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{specular:H.specular,normals:H.normals,diffuse:H.diffuse,
lightPosition:function(g){g=.025*g.tick;return[2*Math.cos(g),2*Math.sin(g)]}},count:3});b.frame(function(){I()})}})},{"../regl":40,"parse-dds":38,resl:39}],2:[function(Z,fa,Oa){function b(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var ba=Z("./util/sorted-object-keys"),H=Z("./util/check"),I=Z("./util/values"),g=Z("./constants/dtypes.json"),k=Z("./util/is-typed-array"),n=Z("./util/is-ndarray"),f=Z("./constants/primitives.json"),
B="attributes elements offset count primitive instances".split(" ");fa.exports=function(C,G,U,y,t,m,aa){function x(h){if(h!==Y.currentVAO){var w=G.oes_vertex_array_object;h?w.bindVertexArrayOES(h.vao):w.bindVertexArrayOES(null);Y.currentVAO=h}}function M(h){if(h!==Y.currentVAO){if(h)h.bindAttrs();else{for(var w=G.angle_instanced_arrays,d=0;d<c.length;++d){var f=c[d];f.buffer?(C.enableVertexAttribArray(d),f.buffer.bind(),C.vertexAttribPointer(d,f.size,f.type,f.normalized,f.stride,f.offfset),w&&f.divisor&&
w.vertexAttribDivisorANGLE(d,f.divisor)):(C.disableVertexAttribArray(d),C.vertexAttrib4f(d,f.x,f.y,f.z,f.w))}aa.elements?C.bindBuffer(34963,aa.elements.buffer.buffer):C.bindBuffer(34963,null)}Y.currentVAO=h}}function u(){I(q).forEach(function(h){h.destroy()})}function O(){this.id=++T;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var h=G.oes_vertex_array_object;this.vao=h?h.createVertexArrayOES():null;q[this.id]=this;this.buffers=
[]}function ha(){G.oes_vertex_array_object&&I(q).forEach(function(h){h.refresh()})}var d=U.maxAttributes,c=Array(d);for(U=0;U<d;++U)c[U]=new b;var T=0,q={},Y={Record:b,scope:{},state:c,currentVAO:null,targetVAO:null,restore:G.oes_vertex_array_object?ha:function(){},createVAO:function(h){function w(h){var q;if(Array.isArray(h))q=h,c.elements&&c.ownsElements&&c.elements.destroy(),c.elements=null,c.ownsElements=!1,c.offset=0,c.count=0,c.instances=-1,c.primitive=4;else{H("object"===typeof h,"invalid arguments for create vao");
H("attributes"in h,"must specify attributes for vao");if(h.elements){var e=h.elements;c.ownsElements?("function"===typeof e&&"elements"===e._reglType?c.elements.destroy():c.elements(e),c.ownsElements=!1):m.getElements(h.elements)?(c.elements=h.elements,c.ownsElements=!1):(c.elements=m.create(h.elements),c.ownsElements=!0)}else c.elements=null,c.ownsElements=!1;q=h.attributes;c.offset=0;c.count=-1;c.instances=-1;c.primitive=4;c.elements&&(c.count=c.elements._elements.vertCount,c.primitive=c.elements._elements.primType);
"offset"in h&&(c.offset=h.offset|0);"count"in h&&(c.count=h.count|0);"instances"in h&&(c.instances=h.instances|0);"primitive"in h&&(H(h.primitive in f,"bad primitive type: "+h.primitive),c.primitive=f[h.primitive]);H.optional(function(){for(var a=ba(h),e=0;e<a.length;++e)H(0<=B.indexOf(a[e]),'invalid option for vao: "'+a[e]+'" valid options are '+B)});H(Array.isArray(q),"attributes must be an array")}H(q.length<d,"too many attributes");H(0<q.length,"must specify at least one attribute");var e={},
N=c.attributes;N.length=q.length;for(var a=0;a<q.length;++a){var T=q[a],A=N[a]=new b,u=T.data||T;if(Array.isArray(u)||k(u)||n(u)){var x;c.buffers[a]&&(x=c.buffers[a],k(u)&&x._buffer.byteLength>=u.byteLength?x.subdata(u):(x.destroy(),c.buffers[a]=null));c.buffers[a]||(x=c.buffers[a]=t.create(T,34962,!1,!0));A.buffer=t.getBuffer(x);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;e[a]=1}else t.getBuffer(T)?(A.buffer=t.getBuffer(T),A.size=
A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=0,A.stride=0,A.divisor=0,A.state=1):t.getBuffer(T.buffer)?(A.buffer=t.getBuffer(T.buffer),A.size=(+T.size||A.buffer.dimension)|0,A.normalized=!!T.normalized||!1,"type"in T?(H.parameter(T.type,g,"invalid buffer type"),A.type=g[T.type]):A.type=A.buffer.dtype,A.offset=(T.offset||0)|0,A.stride=(T.stride||0)|0,A.divisor=(T.divisor||0)|0,A.state=1,H(1<=A.size&&4>=A.size,"size must be between 1 and 4"),H(0<=A.offset,"invalid offset"),H(0<=
A.stride&&255>=A.stride,"stride must be between 0 and 255"),H(0<=A.divisor,"divisor must be positive"),H(!A.divisor||!!G.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in T?(H(0<a,"first attribute must not be a constant"),A.x=+T.x||0,A.y=+T.y||0,A.z=+T.z||0,A.w=+T.w||0,A.state=2):H(!1,"invalid attribute spec for location "+a)}for(x=0;x<c.buffers.length;++x)!e[x]&&c.buffers[x]&&(c.buffers[x].destroy(),c.buffers[x]=null);c.refresh();return w}var c=new O;y.vaoCount+=
1;w.destroy=function(){for(var h=0;h<c.buffers.length;++h)c.buffers[h]&&c.buffers[h].destroy();c.buffers.length=0;c.ownsElements&&(c.elements.destroy(),c.elements=null,c.ownsElements=!1);c.destroy()};w._vao=c;w._reglType="vao";return w(h)},getVAO:function(h){return"function"===typeof h&&h._vao?h._vao:null},destroyBuffer:function(h){for(var d=0;d<c.length;++d){var f=c[d];f.buffer===h&&(C.disableVertexAttribArray(d),f.buffer=null)}},setVAO:G.oes_vertex_array_object?x:M,clear:G.oes_vertex_array_object?
u:function(){}};O.prototype.bindAttrs=function(){for(var h=G.angle_instanced_arrays,w=this.attributes,f=0;f<w.length;++f){var k=w[f];k.buffer?(C.enableVertexAttribArray(f),C.bindBuffer(34962,k.buffer.buffer),C.vertexAttribPointer(f,k.size,k.type,k.normalized,k.stride,k.offset),h&&k.divisor&&h.vertexAttribDivisorANGLE(f,k.divisor)):(C.disableVertexAttribArray(f),C.vertexAttrib4f(f,k.x,k.y,k.z,k.w))}for(h=w.length;h<d;++h)C.disableVertexAttribArray(h);(h=m.getElements(this.elements))?C.bindBuffer(34963,
h.buffer.buffer):C.bindBuffer(34963,null)};O.prototype.refresh=function(){var h=G.oes_vertex_array_object;h&&(h.bindVertexArrayOES(this.vao),this.bindAttrs(),Y.currentVAO=null,h.bindVertexArrayOES(null))};O.prototype.destroy=function(){if(this.vao){var h=G.oes_vertex_array_object;this===Y.currentVAO&&(Y.currentVAO=null,h.bindVertexArrayOES(null));h.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);q[this.id]&&(delete q[this.id],
--y.vaoCount)};return Y}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(Z,fa,Oa){function b(f){return U[Object.prototype.toString.call(f)]|0}function ba(f,k){for(var n=0;n<k.length;++n)f[n]=k[n]}function H(f,k,n,g,b,t,d){for(var c=0,T=0;T<n;++T)for(var q=0;q<g;++q)f[c++]=k[b*T+t*q+d]}var I=Z("./util/sorted-object-keys"),g=Z("./util/check"),k=Z("./util/is-typed-array"),
n=Z("./util/is-ndarray"),f=Z("./util/values"),B=Z("./util/pool");Oa=Z("./util/flatten");var C=Oa.flatten,G=Oa.shape,U=Z("./constants/arraytypes.json"),y=Z("./constants/dtypes.json"),t=Z("./constants/usage.json"),m=[];m[5120]=1;m[5122]=2;m[5124]=4;m[5121]=1;m[5123]=2;m[5125]=4;m[5126]=4;fa.exports=function(U,x,M,u){function O(h){this.id=T++;this.buffer=U.createBuffer();this.type=h;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;M.profile&&(this.stats={size:0})}
function ha(h,f,d){h.byteLength=f.byteLength;U.bufferData(h.type,f,d)}function d(h,f,d,c,q,e){h.usage=d;if(Array.isArray(f)){if(h.dtype=c||5126,0<f.length)if(Array.isArray(f[0])){q=G(f);for(var N=c=1;N<q.length;++N)c*=q[N];h.dimension=c;f=C(f,q,h.dtype);ha(h,f,d);e?h.persistentData=f:B.freeType(f)}else"number"===typeof f[0]?(h.dimension=q,q=B.allocType(h.dtype,f.length),ba(q,f),ha(h,q,d),e?h.persistentData=q:B.freeType(q)):k(f[0])?(h.dimension=f[0].length,h.dtype=c||b(f[0])||5126,f=C(f,[f.length,
f[0].length],h.dtype),ha(h,f,d),e?h.persistentData=f:B.freeType(f)):g.raise("invalid buffer data")}else if(k(f))h.dtype=c||b(f),h.dimension=q,ha(h,f,d),e&&(h.persistentData=new Uint8Array(new Uint8Array(f.buffer)));else if(n(f)){q=f.shape;var a=f.stride,N=f.offset,T=0,A=0,u=0,x=0;1===q.length?(T=q[0],A=1,u=a[0],x=0):2===q.length?(T=q[0],A=q[1],u=a[0],x=a[1]):g.raise("invalid shape");h.dtype=c||b(f.data)||5126;h.dimension=A;q=B.allocType(h.dtype,T*A);H(q,f.data,T,A,u,x,N);ha(h,q,d);e?h.persistentData=
q:B.freeType(q)}else f instanceof ArrayBuffer?(h.dtype=5121,h.dimension=q,ha(h,f,d),e&&(h.persistentData=new Uint8Array(new Uint8Array(f)))):g.raise("invalid buffer data")}function c(f){x.bufferCount--;u(f);var d=f.buffer;g(d,"buffer must not be deleted already");U.deleteBuffer(d);f.buffer=null;delete q[f.id]}var T=0,q={};O.prototype.bind=function(){U.bindBuffer(this.type,this.buffer)};O.prototype.destroy=function(){c(this)};var Y=[];M.profile&&(x.getTotalBufferSize=function(){var f=0;I(q).forEach(function(d){f+=
q[d].stats.size});return f});return{create:function(f,w,T,u){function D(a){var e=35044,f=null,h=0,c=0,w=1;Array.isArray(a)||k(a)||n(a)||a instanceof ArrayBuffer?f=a:"number"===typeof a?h=a|0:a&&(g.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(g(null===f||Array.isArray(f)||k(f)||n(f),"invalid data for buffer"),f=a.data),"usage"in a&&(g.parameter(a.usage,t,"invalid buffer usage"),e=t[a.usage]),"type"in a&&(g.parameter(a.type,y,"invalid buffer type"),c=y[a.type]),
"dimension"in a&&(g.type(a.dimension,"number","invalid dimension"),w=a.dimension|0),"length"in a&&(g.nni(h,"buffer length must be a nonnegative integer"),h=a.length|0));N.bind();f?d(N,f,e,c,w,u):(h&&U.bufferData(N.type,h,e),N.dtype=c||5121,N.usage=e,N.dimension=w,N.byteLength=h);M.profile&&(N.stats.size=N.byteLength*m[N.dtype]);return D}function e(a,e){g(e+a.byteLength<=N.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+
e+" to a buffer of size "+N.byteLength);U.bufferSubData(N.type,e,a)}x.bufferCount++;var N=new O(w);q[N.id]=N;T||D(f);D._reglType="buffer";D._buffer=N;D.subdata=function(a,f){var h=(f||0)|0,d;N.bind();if(k(a)||a instanceof ArrayBuffer)e(a,h);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var c=B.allocType(N.dtype,a.length);ba(c,a);e(c,h);B.freeType(c)}else Array.isArray(a[0])||k(a[0])?(d=G(a),c=C(a,d,N.dtype),e(c,h),B.freeType(c)):g.raise("invalid buffer data")}else if(n(a)){d=
a.shape;var w=a.stride,q=c=0,T=0,P=0;1===d.length?(c=d[0],q=1,T=w[0],P=0):2===d.length?(c=d[0],q=d[1],T=w[0],P=w[1]):g.raise("invalid shape");d=Array.isArray(a.data)?N.dtype:b(a.data);d=B.allocType(d,c*q);H(d,a.data,c,q,T,P,a.offset);e(d,h);B.freeType(d)}else g.raise("invalid data for buffer subdata");return D};M.profile&&(D.stats=N.stats);D.destroy=function(){c(N)};return D},createStream:function(f,c){var k=Y.pop();k||(k=new O(f));k.bind();d(k,c,35040,0,1,!1);return k},destroyStream:function(f){Y.push(f)},
clear:function(){f(q).forEach(c);Y.forEach(c)},getBuffer:function(f){return f&&f._buffer instanceof O?f._buffer:null},restore:function(){f(q).forEach(function(f){f.buffer=U.createBuffer();U.bindBuffer(f.type,f.buffer);U.bufferData(f.type,f.persistentData||f.byteLength,f.usage)})},_initBuffer:d}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,
"./util/values":36}],4:[function(Z,fa,Oa){fa.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(Z,fa,Oa){fa.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(Z,fa,Oa){fa.exports=
{points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(Z,fa,Oa){fa.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(Z,fa,Oa){function b(f){return Array.isArray(f)||U(f)||y(f)}function ba(f){return f.sort(function(f,d){return"viewport"===f?-1:"viewport"===d?1:f<d?-1:1})}function H(f,d,c,k){this.thisDep=f;this.contextDep=d;this.propDep=c;this.append=k}function I(f){return f&&!(f.thisDep||f.contextDep||
f.propDep)}function g(f){return new H(!1,!1,!1,f)}function k(f,d){var c=f.type;if(0===c)return c=f.data.length,new H(!0,1<=c,2<=c,d);if(4===c)return c=f.data,new H(c.thisDep,c.contextDep,c.propDep,d);if(5===c)return new H(!1,!1,!1,d);if(6===c){for(var k=c=!1,n=!1,e=0;e<f.data.length;++e){var q=f.data[e];1===q.type?n=!0:2===q.type?k=!0:3===q.type?c=!0:0===q.type?(c=!0,q=q.data,1<=q&&(k=!0),2<=q&&(n=!0)):4===q.type&&(c=c||q.data.thisDep,k=k||q.data.contextDep,n=n||q.data.propDep)}return new H(c,k,n,
d)}return new H(3===c,2===c,1===c,d)}var n=Z("./util/sorted-object-keys"),f=Z("./util/check"),B=Z("./util/extend"),C=Z("./util/codegen"),G=Z("./util/loop"),U=Z("./util/is-typed-array"),y=Z("./util/is-ndarray"),t=Z("./util/is-array-like"),m=Z("./dynamic"),aa=Z("./constants/primitives.json"),x=Z("./constants/dtypes.json"),M=["x","y","z","w"],u="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),O={0:0,1:1,zero:0,
one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ha="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
d={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},c={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},T={frag:35632,vert:35633},q={cw:2304,ccw:2305},Y=new H(!1,!1,!1,function(){});fa.exports=function(h,w,y,E,D,e,N,a,U,A,ka,Cc,W,da,R){function P(a){return a.replace(".","_")}function z(a,e,f){var d=P(a);ua.push(a);
X[d]=ma[d]=!!f;Ja[d]=e}function l(a,e,f){var d=P(a);ua.push(a);Array.isArray(f)?(ma[d]=f.slice(),X[d]=f.slice()):ma[d]=X[d]=f;Ba[d]=e}function K(){var a=C(),e=a.link,d=a.global;a.id=zd++;a.batchId="0";var l=e(lb),c=a.shared={props:"a0"};n(lb).forEach(function(a){c[a]=d.def(l,".",a)});f.optional(function(){a.CHECK=e(f);a.commandStr=f.guessCommand();a.command=e(a.commandStr);a.assert=function(a,f,d){a("if(!(",f,"))",this.CHECK,".commandRaise(",e(d),",",this.command,");")};ea.invalidBlendCombinations=
ha});var p=a.next={},v=a.current={};n(Ba).forEach(function(a){Array.isArray(ma[a])&&(p[a]=d.def(c.next,".",a),v[a]=d.def(c.current,".",a))});var r=a.constants={};n(ea).forEach(function(a){r[a]=d.def(JSON.stringify(ea[a]))});a.invoke=function(f,d){switch(d.type){case 0:var l=["this",c.context,c.props,a.batchId];return f.def(e(d.data),".call(",l.slice(0,Math.max(d.data.length+1,4)),")");case 1:return f.def(c.props,d.data);case 2:return f.def(c.context,d.data);case 3:return f.def("this",d.data);case 4:return d.data.append(a,
f),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(e){return a.invoke(f,e)})}};a.attribCache={};var k={};a.scopeAttrib=function(a){a=w.id(a);if(a in k)return k[a];var f=A.scope[a];f||(f=A.scope[a]=new sa);return k[a]=e(f)};return a}function J(a){var e=a["static"];a=a.dynamic;var f;if("profile"in e){var d=!!e.profile;f=g(function(a,e){return d});f.enable=d}else if("profile"in a){var c=a.profile;f=k(c,function(a,e){return a.invoke(e,c)})}return f}function Ea(e,d){var c=
e["static"],l=e.dynamic;if("framebuffer"in c){var p=c.framebuffer;return p?(p=a.getFramebuffer(p),f.command(p,"invalid framebuffer object"),g(function(a,e){var f=a.link(p),d=a.shared;e.set(d.framebuffer,".next",f);d=d.context;e.set(d,".framebufferWidth",f+".width");e.set(d,".framebufferHeight",f+".height");return f})):g(function(a,e){var f=a.shared;e.set(f.framebuffer,".next","null");f=f.context;e.set(f,".framebufferWidth",f+".drawingBufferWidth");e.set(f,".framebufferHeight",f+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var v=l.framebuffer;return k(v,function(a,e){var d=a.invoke(e,v),c=a.shared,l=c.framebuffer,p=e.def(l,".getFramebuffer(",d,")");f.optional(function(){a.assert(e,"!"+d+"||"+p,"invalid framebuffer object")});e.set(l,".next",p);c=c.context;e.set(c,".framebufferWidth",p+"?"+p+".width:"+c+".drawingBufferWidth");e.set(c,".framebufferHeight",p+"?"+p+".height:"+c+".drawingBufferHeight");return p})}return null}function oa(a,e,d){function c(a){if(a in p){var v=p[a];f.commandType(v,
"object","invalid "+a,d.commandStr);var r=!0,h=v.x|0,L=v.y|0,n,q;"width"in v?(n=v.width|0,f.command(0<=n,"invalid "+a,d.commandStr)):r=!1;"height"in v?(q=v.height|0,f.command(0<=q,"invalid "+a,d.commandStr)):r=!1;return new H(!r&&e&&e.thisDep,!r&&e&&e.contextDep,!r&&e&&e.propDep,function(a,e){var f=a.shared.context,d=n;"width"in v||(d=e.def(f,".","framebufferWidth","-",h));var c=q;"height"in v||(c=e.def(f,".","framebufferHeight","-",L));return[h,L,d,c]})}if(a in l){var w=l[a],r=k(w,function(e,d){var c=
e.invoke(d,w);f.optional(function(){e.assert(d,c+"&&typeof "+c+'==="object"',"invalid "+a)});var p=e.shared.context,l=d.def(c,".x|0"),v=d.def(c,".y|0"),r=d.def('"width" in ',c,"?",c,".width|0:","(",p,".","framebufferWidth","-",l,")"),k=d.def('"height" in ',c,"?",c,".height|0:","(",p,".","framebufferHeight","-",v,")");f.optional(function(){e.assert(d,r+">=0&&"+k+">=0","invalid "+a)});return[l,v,r,k]});e&&(r.thisDep=r.thisDep||e.thisDep,r.contextDep=r.contextDep||e.contextDep,r.propDep=r.propDep||e.propDep);
return r}return e?new H(e.thisDep,e.contextDep,e.propDep,function(a,e){var f=a.shared.context;return[0,0,e.def(f,".","framebufferWidth"),e.def(f,".","framebufferHeight")]}):null}var p=a["static"],l=a.dynamic;if(a=c("viewport")){var v=a;a=new H(a.thisDep,a.contextDep,a.propDep,function(a,e){var f=v.append(a,e),d=a.shared.context;e.set(d,".viewportWidth",f[2]);e.set(d,".viewportHeight",f[3]);return f})}return{viewport:a,scissor_box:c("scissor.box")}}function p(a,e){var d=a["static"];if("string"===typeof d.frag&&
"string"===typeof d.vert){if(0<n(e.dynamic).length)return null;var d=e["static"],c=n(d);if(0<c.length&&"number"===typeof d[c[0]]){for(var p=[],l=0;l<c.length;++l)f("number"===typeof d[c[l]],"must specify all vertex attribute locations when using vaos"),p.push([d[c[l]]|0,c[l]]);return p}}return null}function F(a,e,d){function c(a){if(a in l){var e=w.id(l[a]);f.optional(function(){ka.shader(T[a],e,f.guessCommand())});var d=g(function(){return e});d.id=e;return d}if(a in p){var v=p[a];return k(v,function(e,
d){var c=e.invoke(d,v),l=d.def(e.shared.strings,".id(",c,")");f.optional(function(){d(e.shared.shader,".shader(",T[a],",",l,",",e.command,");")});return l})}return null}var l=a["static"],p=a.dynamic,v=c("frag"),r=c("vert"),h=null;I(v)&&I(r)?(h=ka.program(r.id,v.id,null,d),a=g(function(a,e){return a.link(h)})):a=new H(v&&v.thisDep||r&&r.thisDep,v&&v.contextDep||r&&r.contextDep,v&&v.propDep||r&&r.propDep,function(a,e){var d=a.shared.shader,c;c=v?v.append(a,e):e.def(d,".","frag");var l;l=r?r.append(a,
e):e.def(d,".","vert");var p=d+".program("+l+","+c;f.optional(function(){p+=","+a.command});return e.def(p+")")});return{frag:v,vert:r,progVar:a,program:h}}function ca(a,d){function c(a,e){if(a in l){var q=l[a]|0;e?p.offset=q:p.instances=q;f.command(!e||0<=q,"invalid "+a,d.commandStr);return g(function(a,f){e&&(a.OFFSET=q);return q})}if(a in v){var n=v[a];return k(n,function(d,c){var l=d.invoke(c,n);e&&(d.OFFSET=l,f.optional(function(){d.assert(c,l+">=0","invalid "+a)}));return l})}if(e){if(L)return g(function(a,
e){return a.OFFSET=0});if(r)return new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(r)return new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var l=a["static"],v=a.dynamic,p={},r=!1,h=function(){if("vao"in l){var a=l.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));r=!0;p.vao=a;return g(function(e){var f=
A.getVAO(a);return f?e.link(f):"null"})}if("vao"in v){r=!0;var e=v.vao;return k(e,function(a,f){var d=a.invoke(f,e);return f.def(a.shared.vao+".getVAO("+d+")")})}return null}(),L=!1,q=function(){if("elements"in l){var a=l.elements;p.elements=a;if(b(a)){var c=p.elements=e.create(a,!0),a=e.getElements(c);L=!0}else a&&(a=e.getElements(a),L=!0,f.command(a,"invalid elements",d.commandStr));c=g(function(e,f){if(a){var d=e.link(a);return e.ELEMENTS=d}return e.ELEMENTS=null});c.value=a;return c}if("elements"in
v){L=!0;var q=v.elements;return k(q,function(a,e){var d=a.shared,c=d.isBufferArgs,d=d.elements,l=a.invoke(e,q),v=e.def("null"),c=e.def(c,"(",l,")"),p=a.cond(c).then(v,"=",d,".createStream(",l,");")["else"](v,"=",d,".getElements(",l,");");f.optional(function(){a.assert(p["else"],"!"+l+"||"+v,"invalid elements")});e.entry(p);e.exit(a.cond(c).then(d,".destroyStream(",v,");"));return a.ELEMENTS=v})}return r?new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),w=c("offset",!0),S=function(){if("primitive"in l){var a=l.primitive;p.primitive=a;f.commandParameter(a,aa,"invalid primitve",d.commandStr);return g(function(e,f){return aa[a]})}if("primitive"in v){var e=v.primitive;return k(e,function(a,d){var c=a.constants.primTypes,l=a.invoke(d,e);f.optional(function(){a.assert(d,l+" in "+c,"invalid primitive, must be one of "+n(aa))});return d.def(c,"[",l,"]")})}return L?I(q)?
q.value?g(function(a,e){return e.def(a.ELEMENTS,".primType")}):g(function(){return 4}):new H(q.thisDep,q.contextDep,q.propDep,function(a,e){var f=a.ELEMENTS;return e.def(f,"?",f,".primType:",4)}):r?new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),ja=function(){if("count"in l){var a=l.count|0;p.count=a;f.command("number"===typeof a&&0<=a,"invalid vertex count",d.commandStr);return g(function(){return a})}if("count"in
v){var e=v.count;return k(e,function(a,d){var c=a.invoke(d,e);f.optional(function(){a.assert(d,"typeof "+c+'==="number"&&'+c+">=0&&"+c+"===("+c+"|0)","invalid vertex count")});return c})}if(L){if(I(q)){if(q)return w?new H(w.thisDep,w.contextDep,w.propDep,function(a,e){var d=e.def(a.ELEMENTS,".vertCount-",a.OFFSET);f.optional(function(){a.assert(e,d+">=0","invalid vertex offset/element buffer too small")});return d}):g(function(a,e){return e.def(a.ELEMENTS,".vertCount")});var c=g(function(){return-1});
f.optional(function(){c.MISSING=!0});return c}var n=new H(q.thisDep||w.thisDep,q.contextDep||w.contextDep,q.propDep||w.propDep,function(a,e){var f=a.ELEMENTS;return a.OFFSET?e.def(f,"?",f,".vertCount-",a.OFFSET,":-1"):e.def(f,"?",f,".vertCount:-1")});f.optional(function(){n.DYNAMIC=!0});return n}return r?new H(h.thisDep,h.contextDep,h.propDep,function(a,e){return e.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),N=c("instances",!1);return{elements:q,primitive:S,count:ja,
instances:N,offset:w,vao:h,vaoActive:r,elementsActive:L,"static":p}}function Q(a,e){var l=a["static"],v=a.dynamic,p={};ua.forEach(function(a){function r(e,f){if(a in l){var d=e(l[a]);p[h]=g(function(){return d})}else if(a in v){var c=v[a];p[h]=k(c,function(a,e){return f(a,e,a.invoke(e,c))})}}var h=P(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return r(function(d){f.commandType(d,
"boolean",a,e.commandStr);return d},function(e,d,c){f.optional(function(){e.assert(d,"typeof "+c+'==="boolean"',"invalid flag "+a,e.commandStr)});return c});case "depth.func":return r(function(c){f.commandParameter(c,d,"invalid "+a,e.commandStr);return d[c]},function(e,c,l){var v=e.constants.compareFuncs;f.optional(function(){e.assert(c,l+" in "+v,"invalid "+a+", must be one of "+n(d))});return c.def(v,"[",l,"]")});case "depth.range":return r(function(a){f.command(t(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",e.commandStr);return a},function(a,e,d){f.optional(function(){a.assert(e,a.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var c=e.def("+",d,"[0]"),l=e.def("+",d,"[1]");return[c,l]});case "blend.func":return r(function(a){f.commandType(a,"object","blend.func",e.commandStr);var d="srcRGB"in a?a.srcRGB:a.src,c="srcAlpha"in a?a.srcAlpha:
a.src,l="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;f.commandParameter(d,O,h+".srcRGB",e.commandStr);f.commandParameter(c,O,h+".srcAlpha",e.commandStr);f.commandParameter(l,O,h+".dstRGB",e.commandStr);f.commandParameter(a,O,h+".dstAlpha",e.commandStr);f.command(-1===ha.indexOf(d+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+l+")",e.commandStr);return[O[d],O[l],O[c],O[a]]},function(e,d,c){function l(r,p){var h=d.def('"',r,p,'" in ',c,"?",c,".",r,p,":",c,".",
r);f.optional(function(){e.assert(d,h+" in "+v,"invalid "+a+"."+r+p+", must be one of "+n(O))});return h}var v=e.constants.blendFuncs;f.optional(function(){e.assert(d,c+"&&typeof "+c+'==="object"',"invalid blend func, must be an object")});var r=l("src","RGB"),p=l("dst","RGB");f.optional(function(){e.assert(d,e.constants.invalidBlendCombinations+".indexOf("+r+'+", "+'+p+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var h=d.def(v,"[",r,"]"),k=d.def(v,"[",l("src","Alpha"),"]"),
q=d.def(v,"[",p,"]"),L=d.def(v,"[",l("dst","Alpha"),"]");return[h,q,k,L]});case "blend.equation":return r(function(d){if("string"===typeof d)return f.commandParameter(d,Da,"invalid "+a,e.commandStr),[Da[d],Da[d]];if("object"===typeof d)return f.commandParameter(d.rgb,Da,a+".rgb",e.commandStr),f.commandParameter(d.alpha,Da,a+".alpha",e.commandStr),[Da[d.rgb],Da[d.alpha]];f.commandRaise("invalid blend.equation",e.commandStr)},function(e,d,c){var l=e.constants.blendEquations,v=d.def(),r=d.def(),p=e.cond("typeof ",
c,'==="string"');f.optional(function(){function d(a,f,c){e.assert(a,c+" in "+l,"invalid "+f+", must be one of "+n(Da))}d(p.then,a,c);e.assert(p["else"],c+"&&typeof "+c+'==="object"',"invalid "+a);d(p["else"],a+".rgb",c+".rgb");d(p["else"],a+".alpha",c+".alpha")});p.then(v,"=",r,"=",l,"[",c,"];");p["else"](v,"=",l,"[",c,".rgb];",r,"=",l,"[",c,".alpha];");d(p);return[v,r]});case "blend.color":return r(function(a){f.command(t(a)&&4===a.length,"blend.color must be a 4d array",e.commandStr);return G(4,
function(e){return+a[e]})},function(a,e,d){f.optional(function(){a.assert(e,a.shared.isArrayLike+"("+d+")&&"+d+".length===4","blend.color must be a 4d array")});return G(4,function(a){return e.def("+",d,"[",a,"]")})});case "stencil.mask":return r(function(a){f.commandType(a,"number",h,e.commandStr);return a|0},function(a,e,d){f.optional(function(){a.assert(e,"typeof "+d+'==="number"',"invalid stencil.mask")});return e.def(d,"|0")});case "stencil.func":return r(function(c){f.commandType(c,"object",
h,e.commandStr);var l=c.cmp||"keep",v=c.ref||0;c="mask"in c?c.mask:-1;f.commandParameter(l,d,a+".cmp",e.commandStr);f.commandType(v,"number",a+".ref",e.commandStr);f.commandType(c,"number",a+".mask",e.commandStr);return[d[l],v,c]},function(a,e,d){var c=a.constants.compareFuncs;f.optional(function(){function f(){a.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}f(d+"&&typeof ",d,'==="object"');f('!("cmp" in ',d,")||(",d,".cmp in ",c,")")});var l=e.def('"cmp" in ',d,"?",c,"[",
d,".cmp]",":",7680),v=e.def(d,".ref|0"),p=e.def('"mask" in ',d,"?",d,".mask|0:-1");return[l,v,p]});case "stencil.opFront":case "stencil.opBack":return r(function(d){f.commandType(d,"object",h,e.commandStr);var l=d.fail||"keep",v=d.zfail||"keep";d=d.zpass||"keep";f.commandParameter(l,c,a+".fail",e.commandStr);f.commandParameter(v,c,a+".zfail",e.commandStr);f.commandParameter(d,c,a+".zpass",e.commandStr);return["stencil.opBack"===a?1029:1028,c[l],c[v],c[d]]},function(e,d,l){function v(r){f.optional(function(){e.assert(d,
'!("'+r+'" in '+l+")||("+l+"."+r+" in "+p+")","invalid "+a+"."+r+", must be one of "+n(c))});return d.def('"',r,'" in ',l,"?",p,"[",l,".",r,"]:",7680)}var p=e.constants.stencilOps;f.optional(function(){e.assert(d,l+"&&typeof "+l+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,v("fail"),v("zfail"),v("zpass")]});case "polygonOffset.offset":return r(function(a){f.commandType(a,"object",h,e.commandStr);var d=a.factor|0;a=a.units|0;f.commandType(d,"number",h+".factor",e.commandStr);
f.commandType(a,"number",h+".units",e.commandStr);return[d,a]},function(e,d,c){f.optional(function(){e.assert(d,c+"&&typeof "+c+'==="object"',"invalid "+a)});var l=d.def(c,".factor|0"),v=d.def(c,".units|0");return[l,v]});case "cull.face":return r(function(a){var d=0;"front"===a?d=1028:"back"===a&&(d=1029);f.command(!!d,h,e.commandStr);return d},function(a,e,d){f.optional(function(){a.assert(e,d+'==="front"||'+d+'==="back"',"invalid cull.face")});return e.def(d,'==="front"?',1028,":",1029)});case "lineWidth":return r(function(a){f.command("number"===
typeof a&&a>=E.lineWidthDims[0]&&a<=E.lineWidthDims[1],"invalid line width, must be a positive number between "+E.lineWidthDims[0]+" and "+E.lineWidthDims[1],e.commandStr);return a},function(a,e,d){f.optional(function(){a.assert(e,"typeof "+d+'==="number"&&'+d+">="+E.lineWidthDims[0]+"&&"+d+"<="+E.lineWidthDims[1],"invalid line width")});return d});case "frontFace":return r(function(a){f.commandParameter(a,q,h,e.commandStr);return q[a]},function(a,e,d){f.optional(function(){a.assert(e,d+'==="cw"||'+
d+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(d+'==="cw"?2304:2305')});case "colorMask":return r(function(a){f.command(t(a)&&4===a.length,"color.mask must be length 4 array",e.commandStr);return a.map(function(a){return!!a})},function(a,e,d){f.optional(function(){a.assert(e,a.shared.isArrayLike+"("+d+")&&"+d+".length===4","invalid color.mask")});return G(4,function(a){return"!!"+d+"["+a+"]"})});case "sample.coverage":return r(function(a){f.command("object"===typeof a&&a,
h,e.commandStr);var d="value"in a?a.value:1;a=!!a.invert;f.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",e.commandStr);return[d,a]},function(a,e,d){f.optional(function(){a.assert(e,d+"&&typeof "+d+'==="object"',"invalid sample.coverage")});var c=e.def('"value" in ',d,"?+",d,".value:1"),l=e.def("!!",d,".invert");return[c,l]})}});return p}function na(a,e){var d=a["static"],c=a.dynamic,l={};n(d).forEach(function(a){var c=d[a],v;if("number"===typeof c||
"boolean"===typeof c)v=g(function(){return c});else if("function"===typeof c){var p=c._reglType;"texture2d"===p||"textureCube"===p?v=g(function(a){return a.link(c)}):"framebuffer"===p||"framebufferCube"===p?(f.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',e.commandStr),v=g(function(a){return a.link(c.color[0])})):f.commandRaise('invalid data for uniform "'+a+'"',e.commandStr)}else t(c)?v=g(function(e){return e.global.def("[",G(c.length,function(d){f.command("number"===
typeof c[d]||"boolean"===typeof c[d],"invalid uniform "+a,e.commandStr);return c[d]}),"]")}):f.commandRaise('invalid or missing data for uniform "'+a+'"',e.commandStr);v.value=c;l[a]=v});n(c).forEach(function(a){var e=c[a];l[a]=k(e,function(a,d){return a.invoke(d,e)})});return l}function ra(a,e){var d=a["static"],c=a.dynamic,l={};n(d).forEach(function(a){var c=d[a],v=w.id(a),p=new sa;if(b(c))p.state=1,p.buffer=D.getBuffer(D.create(c,34962,!1,!0)),p.type=0;else{var r=D.getBuffer(c);if(r)p.state=1,
p.buffer=r,p.type=0;else if(f.command("object"===typeof c&&c,"invalid data for attribute "+a,e.commandStr),"constant"in c){var h=c.constant;p.buffer="null";p.state=2;"number"===typeof h?p.x=h:(f.command(t(h)&&0<h.length&&4>=h.length,"invalid constant for attribute "+a,e.commandStr),M.forEach(function(a,e){e<h.length&&(p[a]=h[e])}))}else{r=b(c.buffer)?D.getBuffer(D.create(c.buffer,34962,!1,!0)):D.getBuffer(c.buffer);f.command(!!r,'missing buffer for attribute "'+a+'"',e.commandStr);var k=c.offset|
0;f.command(0<=k,'invalid offset for attribute "'+a+'"',e.commandStr);var q=c.stride|0;f.command(0<=q&&256>q,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',e.commandStr);var L=c.size|0;f.command(!("size"in c)||0<L&&4>=L,'invalid size for attribute "'+a+'", must be 1,2,3,4',e.commandStr);var S=!!c.normalized,ja=0;"type"in c&&(f.commandParameter(c.type,x,"invalid type for attribute "+a,e.commandStr),ja=x[c.type]);var N=c.divisor|0;f.optional(function(){"divisor"in c&&(f.command(0===
N||pa,'cannot specify divisor for attribute "'+a+'", instancing not supported',e.commandStr),f.command(0<=N,'invalid divisor for attribute "'+a+'"',e.commandStr));var d=e.commandStr,l="buffer offset divisor normalized type size stride".split(" ");n(c).forEach(function(e){f.command(0<=l.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+a+'" (valid parameters are '+l+")",d)})});p.buffer=r;p.state=1;p.size=L;p.normalized=S;p.type=ja||r.dtype;p.offset=k;p.stride=q;p.divisor=N}}l[a]=g(function(a,
e){var d=a.attribCache;if(v in d)return d[v];var c={isStream:!1};n(p).forEach(function(a){c[a]=p[a]});p.buffer&&(c.buffer=a.link(p.buffer),c.type=c.type||c.buffer+".dtype");return d[v]=c})});n(c).forEach(function(a){var e=c[a];l[a]=k(e,function(d,c){function l(a){c(q[a],"=",p,".",a,"|0;")}var p=d.invoke(c,e),v=d.shared,r=d.constants,h=v.isBufferArgs,k=v.buffer;f.optional(function(){d.assert(c,p+"&&(typeof "+p+'==="object"||typeof '+p+'==="function")&&('+h+"("+p+")||"+k+".getBuffer("+p+")||"+k+".getBuffer("+
p+".buffer)||"+h+"("+p+'.buffer)||("constant" in '+p+"&&(typeof "+p+'.constant==="number"||'+v.isArrayLike+"("+p+".constant))))",'invalid dynamic attribute "'+a+'"')});var q={isStream:c.def(!1)},L=new sa;L.state=1;n(L).forEach(function(a){q[a]=c.def(""+L[a])});var w=q.buffer,S=q.type;c("if(",h,"(",p,")){",q.isStream,"=true;",w,"=",k,".createStream(",34962,",",p,");",S,"=",w,".dtype;","}else{",w,"=",k,".getBuffer(",p,");","if(",w,"){",S,"=",w,".dtype;",'}else if("constant" in ',p,"){",q.state,"=",
2,";","if(typeof "+p+'.constant === "number"){',q[M[0]],"=",p,".constant;",M.slice(1).map(function(a){return q[a]}).join("="),"=0;","}else{",M.map(function(a,e){return q[a]+"="+p+".constant.length>"+e+"?"+p+".constant["+e+"]:0;"}).join(""),"}}else{","if(",h,"(",p,".buffer)){",w,"=",k,".createStream(",34962,",",p,".buffer);","}else{",w,"=",k,".getBuffer(",p,".buffer);","}",S,'="type" in ',p,"?",r.glTypes,"[",p,".type]:",w,".dtype;",q.normalized,"=!!",p,".normalized;");l("size");l("offset");l("stride");
l("divisor");c("}}");c.exit("if(",q.isStream,"){",k,".destroyStream(",w,");","}");return q})});return l}function Aa(a){var e=a["static"],d=a.dynamic,c={};n(e).forEach(function(a){var d=e[a];c[a]=g(function(a,e){return"number"===typeof d||"boolean"===typeof d?""+d:a.link(d)})});n(d).forEach(function(a){var e=d[a];c[a]=k(e,function(a,d){return a.invoke(d,e)})});return c}function za(a,e,d,c,l){function v(a){var e=L[a];e&&(S[a]=e)}var r=a["static"],h=a.dynamic;f.optional(function(){function a(d){n(d).forEach(function(a){f.command(0<=
e.indexOf(a),'unknown parameter "'+a+'"',l.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);a(r);a(h)});var k=p(a,e),q=Ea(a,l),L=oa(a,q,l),w=ca(a,l),S=Q(a,l),ja=F(a,l,k);v("viewport");v(P("scissor.box"));var N=0<n(S).length,q={framebuffer:q,draw:w,shader:ja,state:S,dirty:N,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};q.profile=J(a,l);q.uniforms=na(d,l);q.drawVAO=q.scopeVAO=w.vao;if(!q.drawVAO&&ja.program&&!k&&y.angle_instanced_arrays&&
w["static"].elements){var sa=!0;a=ja.program.attributes.map(function(a){a=e["static"][a];sa=sa&&!!a;return a});if(sa&&0<a.length){var ya=A.getVAO(A.createVAO({attributes:a,elements:w["static"].elements}));q.drawVAO=new H(null,null,null,function(a,e){return a.link(ya)});q.useVAO=!0}}k?q.useVAO=!0:q.attributes=ra(e,l);q.context=Aa(c,l);return q}function ga(a,e,d){var c=a.shared.context,f=a.scope();n(d).forEach(function(l){e.save(c,"."+l);var p=d[l].append(a,e);Array.isArray(p)?f(c,".",l,"=[",p.join(),
"];"):f(c,".",l,"=",p,";")});e(f)}function Ca(a,e,d,c){var f=a.shared,l=f.gl,p=f.framebuffer,v;wa&&(v=e.def(f.extensions,".webgl_draw_buffers"));var r=a.constants,f=r.drawBuffer,r=r.backBuffer;a=d?d.append(a,e):e.def(p,".next");c||e("if(",a,"!==",p,".cur){");e("if(",a,"){",l,".bindFramebuffer(",36160,",",a,".framebuffer);");wa&&e(v,".drawBuffersWEBGL(",f,"[",a,".colorAttachments.length]);");e("}else{",l,".bindFramebuffer(",36160,",null);");wa&&e(v,".drawBuffersWEBGL(",r,");");e("}",p,".cur=",a,";");
c||e("}")}function la(a,e,d){var c=a.shared,f=c.gl,l=a.current,p=a.next,v=c.current,r=c.next,h=a.cond(v,".dirty");ua.forEach(function(e){e=P(e);if(!(e in d.state)){var c,k;if(e in p){c=p[e];k=l[e];var q=G(ma[e].length,function(a){return h.def(c,"[",a,"]")});h(a.cond(q.map(function(a,e){return a+"!=="+k+"["+e+"]"}).join("||")).then(f,".",Ba[e],"(",q,");",q.map(function(a,e){return k+"["+e+"]="+a}).join(";"),";"))}else c=h.def(r,".",e),q=a.cond(c,"!==",v,".",e),h(q),e in Ja?q(a.cond(c).then(f,".enable(",
Ja[e],");")["else"](f,".disable(",Ja[e],");"),v,".",e,"=",c,";"):q(f,".",Ba[e],"(",c,");",v,".",e,"=",c,";")}});0===n(d.state).length&&h(v,".dirty=false;");e(h)}function qa(a,e,d,c){var f=a.shared,l=a.current,p=f.current,v=f.gl;ba(n(d)).forEach(function(f){var r=d[f];if(!c||c(r)){var h=r.append(a,e);if(Ja[f]){var k=Ja[f];I(r)?h?e(v,".enable(",k,");"):e(v,".disable(",k,");"):e(a.cond(h).then(v,".enable(",k,");")["else"](v,".disable(",k,");"));e(p,".",f,"=",h,";")}else if(t(h)){var q=l[f];e(v,".",Ba[f],
"(",h,");",h.map(function(a,e){return q+"["+e+"]="+a}).join(";"),";")}else e(v,".",Ba[f],"(",h,");",p,".",f,"=",h,";")}})}function xa(a,e){pa&&(a.instancing=e.def(a.shared.extensions,".angle_instanced_arrays"))}function ya(a,e,d,c,f){function l(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function p(a){w=e.def();a(w,"=",l(),";");"string"===typeof f?a(k,".count+=",f,";"):a(k,".count++;");da&&(c?(n=e.def(),a(n,"=",L,".getNumPendingQueries();")):a(L,".beginQuery(",k,");"))}
function v(a){a(k,".cpuTime+=",l(),"-",w,";");da&&(c?a(L,".pushScopeStats(",n,",",L,".getNumPendingQueries(),",k,");"):a(L,".endQuery();"))}function r(a){var d=e.def(q,".profile");e(q,".profile=",a,";");e.exit(q,".profile=",d,";")}var h=a.shared,k=a.stats,q=h.current,L=h.timer;d=d.profile;var w,n;if(d){if(I(d)){d.enable?(p(e),v(e.exit),r("true")):r("false");return}d=d.append(a,e);r(d)}else d=e.def(q,".profile");h=a.block();p(h);e("if(",d,"){",h,"}");a=a.block();v(a);e.exit("if(",d,"){",a,"}")}function ja(a,
e,d,c,l){function p(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function v(d,c,f){function l(){e("if(!",q,".buffer){",h,".enableVertexAttribArray(",k,");}");var d=f.type,p;p=f.size?e.def(f.size,"||",c):c;e("if(",q,".type!==",d,"||",q,".size!==",p,"||",n.map(function(a){return q+"."+a+"!=="+f[a]}).join("||"),"){",h,".bindBuffer(",34962,",",L,".buffer);",h,".vertexAttribPointer(",[k,p,d,
f.normalized,f.stride,f.offset],");",q,".type=",d,";",q,".size=",p,";",n.map(function(a){return q+"."+a+"="+f[a]+";"}).join(""),"}");pa&&(d=f.divisor,e("if(",q,".divisor!==",d,"){",a.instancing,".vertexAttribDivisorANGLE(",[k,d],");",q,".divisor=",d,";}"))}function p(){e("if(",q,".buffer){",h,".disableVertexAttribArray(",k,");",q,".buffer=null;","}if(",M.map(function(a,e){return q+"."+a+"!=="+w[e]}).join("||"),"){",h,".vertexAttrib4f(",k,",",w,");",M.map(function(a,e){return q+"."+a+"="+w[e]+";"}).join(""),
"}")}var h=r.gl,k=e.def(d,".location"),q=e.def(r.attributes,"[",k,"]");d=f.state;var L=f.buffer,w=[f.x,f.y,f.z,f.w],n=["buffer","normalized","offset","stride"];1===d?l():2===d?p():(e("if(",d,"===",1,"){"),l(),e("}else{"),p(),e("}"))}var r=a.shared;c.forEach(function(c){var r=c.name,h=d.attributes[r],k;if(h){if(!l(h))return;k=h.append(a,e)}else{if(!l(Y))return;var q=a.scopeAttrib(r);f.optional(function(){a.assert(e,q+".state","missing attribute "+r)});k={};n(new sa).forEach(function(a){k[a]=e.def(q,
".",a)})}v(a.link(c),p(c.info.type),k)})}function Xb(a,e,d,c,p,l){for(var v=a.shared,r=v.gl,h,k=0;k<c.length;++k){var q=c[k],L=q.name,n=q.info.type,S=d.uniforms[L],q=a.link(q)+".location",ja;if(S){if(!p(S))continue;if(I(S)){var N=S.value;f.command(null!==N&&"undefined"!==typeof N,'missing uniform "'+L+'"',a.commandStr);if(35678===n||35680===n)f.command("function"===typeof N&&(35678===n&&("texture2d"===N._reglType||"framebuffer"===N._reglType)||35680===n&&("textureCube"===N._reglType||"framebufferCube"===
N._reglType)),"invalid texture for uniform "+L,a.commandStr),S=a.link(N._texture||N.color[0]._texture),e(r,".uniform1i(",q,",",S+".bind());"),e.exit(S,".unbind();");else if(35674===n||35675===n||35676===n){f.optional(function(){f.command(t(N),"invalid matrix for uniform "+L,a.commandStr);f.command(35674===n&&4===N.length||35675===n&&9===N.length||35676===n&&16===N.length,"invalid length for matrix uniform "+L,a.commandStr)});var S=a.global.def("new Float32Array(["+Array.prototype.slice.call(N)+"])"),
P=2;35675===n?P=3:35676===n&&(P=4);e(r,".uniformMatrix",P,"fv(",q,",false,",S,");")}else{switch(n){case 5126:f.commandType(N,"number","uniform "+L,a.commandStr);h="1f";break;case 35664:f.command(t(N)&&2===N.length,"uniform "+L,a.commandStr);h="2f";break;case 35665:f.command(t(N)&&3===N.length,"uniform "+L,a.commandStr);h="3f";break;case 35666:f.command(t(N)&&4===N.length,"uniform "+L,a.commandStr);h="4f";break;case 35670:f.commandType(N,"boolean","uniform "+L,a.commandStr);h="1i";break;case 5124:f.commandType(N,
"number","uniform "+L,a.commandStr);h="1i";break;case 35671:f.command(t(N)&&2===N.length,"uniform "+L,a.commandStr);h="2i";break;case 35667:f.command(t(N)&&2===N.length,"uniform "+L,a.commandStr);h="2i";break;case 35672:f.command(t(N)&&3===N.length,"uniform "+L,a.commandStr);h="3i";break;case 35668:f.command(t(N)&&3===N.length,"uniform "+L,a.commandStr);h="3i";break;case 35673:f.command(t(N)&&4===N.length,"uniform "+L,a.commandStr);h="4i";break;case 35669:f.command(t(N)&&4===N.length,"uniform "+L,
a.commandStr),h="4i"}e(r,".uniform",h,"(",q,",",t(N)?Array.prototype.slice.call(N):N,");")}continue}else ja=S.append(a,e)}else{if(!p(Y))continue;ja=e.def(v.uniforms,"[",w.id(L),"]")}35678===n?(f(!Array.isArray(ja),"must specify a scalar prop for textures"),e("if(",ja,"&&",ja,'._reglType==="framebuffer"){',ja,"=",ja,".color[0];","}")):35680===n&&(f(!Array.isArray(ja),"must specify a scalar prop for cube maps"),e("if(",ja,"&&",ja,'._reglType==="framebufferCube"){',ja,"=",ja,".color[0];","}"));f.optional(function(){function d(c,
f){a.assert(e,c,'bad data or missing for uniform "'+L+'".  '+f)}function c(a){f(!Array.isArray(ja),"must not specify an array type for uniform");d("typeof "+ja+'==="'+a+'"',"invalid type, expected "+a)}function l(e,c){Array.isArray(ja)?f(ja.length===e,"must have length "+e):d(v.isArrayLike+"("+ja+")&&"+ja+".length==="+e,"invalid vector, should have length "+e,a.commandStr)}function p(e){f(!Array.isArray(ja),"must not specify a value type");d("typeof "+ja+'==="function"&&'+ja+'._reglType==="texture'+
(3553===e?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(n){case 5124:c("number");break;case 35667:l(2,"number");break;case 35668:l(3,"number");break;case 35669:l(4,"number");break;case 5126:c("number");break;case 35664:l(2,"number");break;case 35665:l(3,"number");break;case 35666:l(4,"number");break;case 35670:c("boolean");break;case 35671:l(2,"boolean");break;case 35672:l(3,"boolean");break;case 35673:l(4,"boolean");break;case 35674:l(4,"number");break;case 35675:l(9,"number");break;
case 35676:l(16,"number");break;case 35678:p(3553);break;case 35680:p(34067)}});S=1;switch(n){case 35678:case 35680:S=e.def(ja,"._texture");e(r,".uniform1i(",q,",",S,".bind());");e.exit(S,".unbind();");continue;case 5124:case 35670:h="1i";break;case 35667:case 35671:h="2i";S=2;break;case 35668:case 35672:h="3i";S=3;break;case 35669:case 35673:h="4i";S=4;break;case 5126:h="1f";break;case 35664:h="2f";S=2;break;case 35665:h="3f";S=3;break;case 35666:h="4f";S=4;break;case 35674:h="Matrix2fv";break;case 35675:h=
"Matrix3fv";break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){e(r,".uniform",h,"(",q,",");var q=Math.pow(n-35674+2,2),sa=a.global.def("new Float32Array(",q,")");Array.isArray(ja)?e("false,(",G(q,function(a){return sa+"["+a+"]="+ja[a]}),",",sa,")"):e("false,(Array.isArray(",ja,")||",ja," instanceof Float32Array)?",ja,":(",G(q,function(a){return sa+"["+a+"]="+ja+"["+a+"]"}),",",sa,")");e(");")}else{if(1<S){for(var P=[],ya=[],Da=0;Da<S;++Da)Array.isArray(ja)?ya.push(ja[Da]):ya.push(e.def(ja+"["+Da+
"]")),l&&P.push(e.def());l&&e("if(!",a.batchId,"||",P.map(function(a,e){return a+"!=="+ya[e]}).join("||"),"){",P.map(function(a,e){return a+"="+ya[e]+";"}).join(""));e(r,".uniform",h,"(",q,",",ya.join(","),");")}else f(!Array.isArray(ja),"uniform value must not be an array"),l&&(S=e.def(),e("if(!",a.batchId,"||",S,"!==",ja,"){",S,"=",ja,";")),e(r,".uniform",h,"(",q,",",ja,");");l&&e("}")}}}function Ta(a,e,d,c){function l(f){var p=k[f];return p?p.contextDep&&c.contextDynamic||p.propDep?p.append(a,
d):p.append(a,e):e.def(q,".",f)}function p(){function a(){d(N,".drawElementsInstancedANGLE(",[n,ja,P,w+"<<(("+P+"-5121)>>1)",S],");")}function e(){d(N,".drawArraysInstancedANGLE(",[n,w,ja,S],");")}L&&"null"!==L?sa?a():(d("if(",L,"){"),a(),d("}else{"),e(),d("}")):e()}function v(){function a(){d(h+".drawElements("+[n,ja,P,w+"<<(("+P+"-5121)>>1)"]+");")}function e(){d(h+".drawArrays("+[n,w,ja]+");")}L&&"null"!==L?sa?a():(d("if(",L,"){"),a(),d("}else{"),e(),d("}")):e()}var r=a.shared,h=r.gl,q=r.draw,
k=c.draw,L=function(){var f=k.elements,l=e;if(f){if(f.contextDep&&c.contextDynamic||f.propDep)l=d;f=f.append(a,l);k.elementsActive&&l("if("+f+")"+h+".bindBuffer(34963,"+f+".buffer.buffer);")}else f=l.def(),l(f,"=",q,".","elements",";","if(",f,"){",h,".bindBuffer(",34963,",",f,".buffer.buffer);}","else if(",r.vao,".currentVAO){",f,"=",a.shared.elements+".getElements("+r.vao,".currentVAO.elements);",Ga?"":"if("+f+")"+h+".bindBuffer(34963,"+f+".buffer.buffer);","}");return f}(),n=l("primitive"),w=l("offset"),
ja=function(){var l=k.count,p,v=e;if(l){if(l.contextDep&&c.contextDynamic||l.propDep)v=d;p=l.append(a,v);f.optional(function(){l.MISSING&&a.assert(e,"false","missing vertex count");l.DYNAMIC&&a.assert(v,p+">=0","missing vertex count")})}else p=v.def(q,".","count"),f.optional(function(){a.assert(v,p+">=0","missing vertex count")});return p}();if("number"===typeof ja){if(0===ja)return}else d("if(",ja,"){"),d.exit("}");var S,N;pa&&(S=l("instances"),N=a.instancing);var P=L+".type",sa=k.elements&&I(k.elements)&&
!k.vaoActive;pa&&("number"!==typeof S||0<=S)?"string"===typeof S?(d("if(",S,">0){"),p(),d("}else if(",S,"<0){"),v(),d("}")):p():v()}function v(a,e,d,c,l){var p=K();l=p.proc("body",l);f.optional(function(){p.commandStr=e.commandStr;p.command=p.link(e.commandStr)});pa&&(p.instancing=l.def(p.shared.extensions,".angle_instanced_arrays"));a(p,l,d,c);return p.compile().body}function r(a,e,d,c){xa(a,e);d.useVAO?d.drawVAO?e(a.shared.vao,".setVAO(",d.drawVAO.append(a,e),");"):e(a.shared.vao,".setVAO(",a.shared.vao,
".targetVAO);"):(e(a.shared.vao,".setVAO(null);"),ja(a,e,d,c.attributes,function(){return!0}));Xb(a,e,d,c.uniforms,function(){return!0},!1);Ta(a,e,e,d)}function S(a,e){var d=a.proc("draw",1);xa(a,d);ga(a,d,e.context);Ca(a,d,e.framebuffer);la(a,d,e);qa(a,d,e.state);ya(a,d,e,!1,!0);var c=e.shader.progVar.append(a,d);d(a.shared.gl,".useProgram(",c,".program);");if(e.shader.program)r(a,d,e,e.shader.program);else{d(a.shared.vao,".setVAO(null);");var f=a.global.def("{}"),l=d.def(c,".id"),p=d.def(f,"[",
l,"]");d(a.cond(p).then(p,".call(this,a0);")["else"](p,"=",f,"[",l,"]=",a.link(function(d){return v(r,a,e,d,1)}),"(",c,");",p,".call(this,a0);"))}0<n(e.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function va(a,e,d,c){function f(){return!0}a.batchId="a1";xa(a,e);ja(a,e,d,c.attributes,f);Xb(a,e,d,c.uniforms,f,!1);Ta(a,e,e,d)}function Fa(a,e,d,c){function f(a){return a.contextDep&&p||a.propDep}function l(a){return!f(a)}xa(a,e);var p=d.contextDep,r=
e.def(),h=e.def();a.shared.props=h;a.batchId=r;var q=a.scope(),k=a.scope();e(q.entry,"for(",r,"=0;",r,"<","a1",";++",r,"){",h,"=","a0","[",r,"];",k,"}",q.exit);d.needsContext&&ga(a,k,d.context);d.needsFramebuffer&&Ca(a,k,d.framebuffer);qa(a,k,d.state,f);d.profile&&f(d.profile)&&ya(a,k,d,!1,!0);c?(d.useVAO?d.drawVAO?f(d.drawVAO)?k(a.shared.vao,".setVAO(",d.drawVAO.append(a,k),");"):q(a.shared.vao,".setVAO(",d.drawVAO.append(a,q),");"):q(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(q(a.shared.vao,
".setVAO(null);"),ja(a,q,d,c.attributes,l),ja(a,k,d,c.attributes,f)),Xb(a,q,d,c.uniforms,l,!1),Xb(a,k,d,c.uniforms,f,!0),Ta(a,q,k,d)):(e=a.global.def("{}"),c=d.shader.progVar.append(a,k),h=k.def(c,".id"),q=k.def(e,"[",h,"]"),k(a.shared.gl,".useProgram(",c,".program);","if(!",q,"){",q,"=",e,"[",h,"]=",a.link(function(e){return v(va,a,d,e,2)}),"(",c,");}",q,".call(this,a0[",r,"],",r,");"))}function sd(a,e){function d(a){return a.contextDep&&f||a.propDep}var c=a.proc("batch",2);a.batchId="0";xa(a,c);
var f=!1,l=!0;n(e.context).forEach(function(a){f=f||e.context[a].propDep});f||(ga(a,c,e.context),l=!1);var p=e.framebuffer,r=!1;p?(p.propDep?f=r=!0:p.contextDep&&f&&(r=!0),r||Ca(a,c,p)):Ca(a,c,null);e.state.viewport&&e.state.viewport.propDep&&(f=!0);la(a,c,e);qa(a,c,e.state,function(a){return!d(a)});e.profile&&d(e.profile)||ya(a,c,e,!1,"a1");e.contextDep=f;e.needsContext=l;e.needsFramebuffer=r;l=e.shader.progVar;if(l.contextDep&&f||l.propDep)Fa(a,c,e,null);else if(l=l.append(a,c),c(a.shared.gl,".useProgram(",
l,".program);"),e.shader.program)Fa(a,c,e,e.shader.program);else{c(a.shared.vao,".setVAO(null);");var p=a.global.def("{}"),r=c.def(l,".id"),h=c.def(p,"[",r,"]");c(a.cond(h).then(h,".call(this,a0,a1);")["else"](h,"=",p,"[",r,"]=",a.link(function(d){return v(Fa,a,e,d,2)}),"(",l,");",h,".call(this,a0,a1);"))}0<n(e.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Gb(a,e){function d(l){var p=e.shader[l];p&&c.set(f.shader,"."+l,p.append(a,c))}var c=
a.proc("scope",3);a.batchId="a2";var f=a.shared,l=f.current;ga(a,c,e.context);e.framebuffer&&e.framebuffer.append(a,c);ba(n(e.state)).forEach(function(d){var l=e.state[d].append(a,c);t(l)?l.forEach(function(e,f){c.set(a.next[d],"["+f+"]",e)}):c.set(f.next,"."+d,l)});ya(a,c,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var l=e.draw[d];l&&c.set(f.draw,"."+d,""+l.append(a,c))});n(e.uniforms).forEach(function(d){var l=e.uniforms[d].append(a,c);Array.isArray(l)&&(l=
"["+l.join()+"]");c.set(f.uniforms,"["+w.id(d)+"]",l)});n(e.attributes).forEach(function(d){var f=e.attributes[d].append(a,c),l=a.scopeAttrib(d);n(new sa).forEach(function(a){c.set(l,"."+a,f[a])})});e.scopeVAO&&c.set(f.vao,".targetVAO",e.scopeVAO.append(a,c));d("vert");d("frag");0<n(e.state).length&&(c(l,".dirty=true;"),c.exit(l,".dirty=true;"));c("a1(",a.shared.context,",a0,",a.batchId,");")}function ia(a){if("object"===typeof a&&!t(a)){for(var e=n(a),d=0;d<e.length;++d)if(m.isDynamic(a[e[d]]))return!0;
return!1}}function L(a,e,d){function c(a,e){p.forEach(function(d){var c=f[d];m.isDynamic(c)&&(c=a.invoke(e,c),e(q,".",d,"=",c,";"))})}var f=e["static"][d];if(f&&ia(f)){var l=a.global,p=n(f),v=!1,r=!1,h=!1,q=a.global.def("{}");p.forEach(function(e){var d=f[e];if(m.isDynamic(d))"function"===typeof d&&(d=f[e]=m.unbox(d)),e=k(d,null),v=v||e.thisDep,h=h||e.propDep,r=r||e.contextDep;else{l(q,".",e,"=");switch(typeof d){case "number":l(d);break;case "string":l('"',d,'"');break;case "object":Array.isArray(d)&&
l("[",d.join(),"]");break;default:l(a.link(d))}l(";")}});e.dynamic[d]=new m.DynamicVariable(4,{thisDep:v,contextDep:r,propDep:h,ref:q,append:c});delete e["static"][d]}}var sa=A.Record,Da={add:32774,subtract:32778,"reverse subtract":32779};y.ext_blend_minmax&&(Da.min=32775,Da.max=32776);var pa=y.angle_instanced_arrays,wa=y.webgl_draw_buffers,Ga=y.oes_vertex_array_object,ma={dirty:!0,profile:R.profile},X={},ua=[],Ja={},Ba={};z("dither",3024);z("blend.enable",3042);l("blend.color","blendColor",[0,0,
0,0]);l("blend.equation","blendEquationSeparate",[32774,32774]);l("blend.func","blendFuncSeparate",[1,0,1,0]);z("depth.enable",2929,!0);l("depth.func","depthFunc",513);l("depth.range","depthRange",[0,1]);l("depth.mask","depthMask",!0);l("colorMask","colorMask",[!0,!0,!0,!0]);z("cull.enable",2884);l("cull.face","cullFace",1029);l("frontFace","frontFace",2305);l("lineWidth","lineWidth",1);z("polygonOffset.enable",32823);l("polygonOffset.offset","polygonOffset",[0,0]);z("sample.alpha",32926);z("sample.enable",
32928);l("sample.coverage","sampleCoverage",[1,!1]);z("stencil.enable",2960);l("stencil.mask","stencilMask",-1);l("stencil.func","stencilFunc",[519,0,-1]);l("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);l("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);z("scissor.enable",3089);l("scissor.box","scissor",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);l("viewport","viewport",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);var lb={gl:h,context:W,strings:w,next:X,current:ma,
draw:Cc,elements:e,buffer:D,shader:ka,attributes:A.state,vao:A,uniforms:U,framebuffer:a,extensions:y,timer:da,isBufferArgs:b},ea={primTypes:aa,compareFuncs:d,blendFuncs:O,blendEquations:Da,stencilOps:c,glTypes:x,orientationType:q};f.optional(function(){lb.isArrayLike=t});wa&&(ea.backBuffer=[1029],ea.drawBuffer=G(E.maxDrawbuffers,function(a){return 0===a?[0]:G(a,function(a){return 36064+a})}));var zd=0;return{next:X,current:ma,procs:function(){var a=K(),e=a.proc("poll"),d=a.proc("refresh"),c=a.block();
e(c);d(c);var f=a.shared,l=f.gl,p=f.next,v=f.current;c(v,".dirty=false;");Ca(a,e);Ca(a,d,null,!0);var r;pa&&(r=a.link(pa));y.oes_vertex_array_object&&d(a.link(y.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<E.maxAttributes;++h){var q=d.def(f.attributes,"[",h,"]"),k=a.cond(q,".buffer");k.then(l,".enableVertexAttribArray(",h,");",l,".bindBuffer(",34962,",",q,".buffer.buffer);",l,".vertexAttribPointer(",h,",",q,".size,",q,".type,",q,".normalized,",q,".stride,",q,".offset);")["else"](l,
".disableVertexAttribArray(",h,");",l,".vertexAttrib4f(",h,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer=null;");d(k);pa&&d(r,".vertexAttribDivisorANGLE(",h,",",q,".divisor);")}d(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");n(Ja).forEach(function(f){var r=Ja[f],h=c.def(p,".",f),q=a.block();q("if(",h,"){",l,".enable(",r,")}else{",l,".disable(",r,")}",v,".",f,"=",h,";");d(q);e("if(",h,"!==",v,".",f,"){",q,"}")});n(Ba).forEach(function(f){var r=Ba[f],h=ma[f],
q,k,L=a.block();L(l,".",r,"(");t(h)?(r=h.length,q=a.global.def(p,".",f),k=a.global.def(v,".",f),L(G(r,function(a){return q+"["+a+"]"}),");",G(r,function(a){return k+"["+a+"]="+q+"["+a+"];"}).join("")),e("if(",G(r,function(a){return q+"["+a+"]!=="+k+"["+a+"]"}).join("||"),"){",L,"}")):(q=c.def(p,".",f),k=c.def(v,".",f),L(q,");",v,".",f,"=",q,";"),e("if(",q,"!==",k,"){",L,"}"));d(L)});return a.compile()}(),compile:function(a,e,d,c,f){var l=K();l.stats=l.link(f);n(e["static"]).forEach(function(a){L(l,
e,a)});u.forEach(function(e){L(l,a,e)});var p=za(a,e,d,c,l);S(l,p);Gb(l,p);sd(l,p);return B(l.compile(),{destroy:function(){p.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(Z,fa,Oa){function b(n,f){this.id=k++;this.type=n;this.data=f}function ba(k){if(0===
k.length)return[];var f=k.charAt(0),g=k.charAt(k.length-1);if(1<k.length&&f===g&&('"'===f||"'"===f))return['"'+k.substr(1,k.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(k))return ba(k.substr(0,f.index)).concat(ba(f[1])).concat(ba(k.substr(f.index+f[0].length)));f=k.split(".");if(1===f.length)return['"'+k.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];k=[];for(g=0;g<f.length;++g)k=k.concat(ba(f[g]));return k}function H(k){return"["+
ba(k).join("][")+"]"}function I(k,f){if("function"===typeof k)return new b(0,k);if("number"===typeof k||"boolean"===typeof k)return new b(5,k);if(Array.isArray(k))return new b(6,k.map(function(k,n){return I(k,f+"["+n+"]")}));if(k instanceof b)return k;g(!1,"invalid option type in uniform "+f)}var g=Z("./util/check"),k=0;fa.exports={DynamicVariable:b,define:function(k,f){return new b(k,H(f+""))},isDynamic:function(k){return"function"===typeof k&&!k._reglType||k instanceof b},unbox:I,accessor:H}},{"./util/check":21}],
10:[function(Z,fa,Oa){var b=Z("./util/check"),ba=Z("./util/is-typed-array"),H=Z("./util/is-ndarray"),I=Z("./util/values"),g=Z("./constants/primitives.json"),k=Z("./constants/usage.json");fa.exports=function(n,f,B,C){function G(f){this.id=m++;t[this.id]=this;this.buffer=f;this.primType=4;this.type=this.vertCount=0}function U(k,g,x,t,d,c,T){k.buffer.bind();var q;g?((q=T)||ba(g)&&(!H(g)||ba(g.data))||(q=f.oes_element_index_uint?5125:5123),B._initBuffer(k.buffer,g,x,q,3)):(n.bufferData(34963,c,x),k.buffer.dtype=
q||5121,k.buffer.usage=x,k.buffer.dimension=3,k.buffer.byteLength=c);q=T;if(!T){switch(k.buffer.dtype){case 5121:case 5120:q=5121;break;case 5123:case 5122:q=5123;break;case 5125:case 5124:q=5125;break;default:b.raise("unsupported type for element array")}k.buffer.dtype=q}k.type=q;b(5125!==q||!!f.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=d;0>g&&(g=k.buffer.byteLength,5123===q?g>>=1:5125===q&&(g>>=2));k.vertCount=g;g=t;0>t&&(g=4,t=k.buffer.dimension,
1===t&&(g=0),2===t&&(g=1),3===t&&(g=4));k.primType=g}function y(f){C.elementsCount--;b(null!==f.buffer,"must not double destroy elements");delete t[f.id];f.buffer.destroy();f.buffer=null}var t={},m=0,aa={uint8:5121,uint16:5123};f.oes_element_index_uint&&(aa.uint32=5125);G.prototype.bind=function(){this.buffer.bind()};var x=[];return{create:function(f,n){function x(c){if(c)if("number"===typeof c)t(c),d.primType=4,d.vertCount=c|0,d.type=5121;else{var f=null,q=35044,n=-1,h=-1,w=0,u=0;if(Array.isArray(c)||
ba(c)||H(c))f=c;else if(b.type(c,"object","invalid arguments for elements"),"data"in c&&(f=c.data,b(Array.isArray(f)||ba(f)||H(f),"invalid data for element buffer")),"usage"in c&&(b.parameter(c.usage,k,"invalid element buffer usage"),q=k[c.usage]),"primitive"in c&&(b.parameter(c.primitive,g,"invalid element buffer primitive"),n=g[c.primitive]),"count"in c&&(b("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),h=c.count|0),"type"in c&&(b.parameter(c.type,aa,"invalid buffer type"),
u=aa[c.type]),"length"in c)w=c.length|0;else if(w=h,5123===u||5122===u)w*=2;else if(5125===u||5124===u)w*=4;U(d,f,q,n,h,w,u)}else t(),d.primType=4,d.vertCount=0,d.type=5121;return x}var t=B.create(null,34963,!0),d=new G(t._buffer);C.elementsCount++;x(f);x._reglType="elements";x._elements=d;x.subdata=function(d,f){t.subdata(d,f);return x};x.destroy=function(){y(d)};return x},createStream:function(f){var k=x.pop();k||(k=new G(B.create(null,34963,!0,!1)._buffer));U(k,f,35040,-1,-1,0,0);return k},destroyStream:function(f){x.push(f)},
getElements:function(f){return"function"===typeof f&&f._elements instanceof G?f._elements:null},clear:function(){I(t).forEach(y)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(Z,fa,Oa){var b=Z("./util/sorted-object-keys"),ba=Z("./util/check");fa.exports=function(H,I){function g(f){ba.type(f,"string","extension name must be string");f=f.toLowerCase();var n;try{n=k[f]=H.getExtension(f)}catch(g){}return!!n}
for(var k={},n=0;n<I.extensions.length;++n){var f=I.extensions[n];if(!g(f))return I.onDestroy(),I.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}I.optionalExtensions.forEach(g);return{extensions:k,restore:function(){b(k).forEach(function(f){if(k[f]&&!g(f))throw Error("(regl): error restoring extension "+f);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(Z,fa,Oa){var b=Z("./util/check"),ba=Z("./util/values"),
H=Z("./util/extend"),I=[6407,6408],g=[];g[6408]=4;g[6407]=3;var k=[];k[5121]=1;k[5126]=4;k[36193]=2;var n=[32854,32855,36194,35907,34842,34843,34836],f={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};fa.exports=function(B,C,G,U,y,t){function m(a,e,d){this.target=a;this.texture=e;this.renderbuffer=d;var f=a=0;e?(a=e.width,f=e.height):d&&(a=d.width,f=d.height);this.width=a;this.height=f}function aa(a){a&&(a.texture&&
a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function x(a,e,d){if(a){if(a.texture){a=a.texture._texture;var f=Math.max(1,a.height);b(Math.max(1,a.width)===e&&f===d,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,b(a.width===e&&a.height===d,"inconsistent width/height for renderbuffer");a.refCount+=1}}function M(a,e){e&&(e.texture?B.framebufferTexture2D(36160,a,e.target,e.texture._texture.texture,0):B.framebufferRenderbuffer(36160,
a,36161,e.renderbuffer._renderbuffer.renderbuffer))}function u(a){var e=3553,d=null,f=null,c=a;"object"===typeof a&&(c=a.data,"target"in a&&(e=a.target|0));b.type(c,"function","invalid attachment data");a=c._reglType;"texture2d"===a?(d=c,b(3553===e)):"textureCube"===a?(d=c,b(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===a?(f=c,e=36161):b.raise("invalid regl object for attachment");return new m(e,d,f)}function O(a,e,d,f,c){if(d)return a=U.create2D({width:a,height:e,format:f,type:c}),
a._texture.refCount=0,new m(3553,a,null);a=y.create({width:a,height:e,format:f});a._renderbuffer.refCount=0;return new m(36161,null,a)}function ha(a){return a&&(a.texture||a.renderbuffer)}function d(a,e,d){a&&(a.texture?a.texture.resize(e,d):a.renderbuffer&&a.renderbuffer.resize(e,d),a.width=e,a.height=d)}function c(){this.id=e++;N[this.id]=this;this.framebuffer=B.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function T(a){a.colorAttachments.forEach(aa);aa(a.depthAttachment);aa(a.stencilAttachment);aa(a.depthStencilAttachment)}function q(a){var e=a.framebuffer;b(e,"must not double destroy framebuffer");B.deleteFramebuffer(e);a.framebuffer=null;t.framebufferCount--;delete N[a.id]}function Y(a){var e;B.bindFramebuffer(36160,a.framebuffer);var d=a.colorAttachments;for(e=0;e<d.length;++e)M(36064+e,d[e]);for(e=d.length;e<G.maxColorAttachments;++e)B.framebufferTexture2D(36160,36064+e,3553,null,0);B.framebufferTexture2D(36160,
33306,3553,null,0);B.framebufferTexture2D(36160,36096,3553,null,0);B.framebufferTexture2D(36160,36128,3553,null,0);M(36096,a.depthAttachment);M(36128,a.stencilAttachment);M(33306,a.depthStencilAttachment);a=B.checkFramebufferStatus(36160);B.isContextLost()||36053===a||b.raise("framebuffer configuration not supported, status = "+f[a]);B.bindFramebuffer(36160,w.next?w.next.framebuffer:null);w.cur=w.next;B.getError()}function h(a,e){function f(a,e){var d;b(w.next!==h,"can not update framebuffer which is currently in use");
var c=0,q=0,N=!0,l=!0;d=null;var t=!0,J="rgba",y="uint8",U=1,p=null,F=null,ca=null,Q=!1;if("number"===typeof a)c=a|0,q=e|0||c;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(q=a.shape,b(Array.isArray(q)&&2<=q.length,"invalid shape for framebuffer"),c=q[0],q=q[1]):("radius"in a&&(c=q=a.radius),"width"in a&&(c=a.width),"height"in a&&(q=a.height));if("color"in a||"colors"in a)d=a.color||a.colors,Array.isArray(d)&&b(1===d.length||C.webgl_draw_buffers,"multiple render targets not supported");
if(!d){"colorCount"in a&&(U=a.colorCount|0,b(0<U,"invalid color buffer count"));"colorTexture"in a&&(t=!!a.colorTexture,J="rgba4");if("colorType"in a){y=a.colorType;if(t)b(C.oes_texture_float||!("float"===y||"float32"===y),"you must enable OES_texture_float in order to use floating point framebuffer objects"),b(C.oes_texture_half_float||!("half float"===y||"float16"===y),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===y||"float16"===
y)b(C.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),J="rgba16f";else if("float"===y||"float32"===y)b(C.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),J="rgba32f";b.oneOf(y,D,"invalid color type")}"colorFormat"in a&&(J=a.colorFormat,0<=V.indexOf(J)?t=!0:0<=E.indexOf(J)?t=!1:b.optional(function(){if(t)b.oneOf(a.colorFormat,V,"invalid color format for texture");else b.oneOf(a.colorFormat,
E,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)Q=!(!a.depthTexture&&!a.depthStencilTexture),b(!Q||C.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?N=a.depth:(p=a.depth,l=!1));"stencil"in a&&("boolean"===typeof a.stencil?l=a.stencil:(F=a.stencil,N=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?N=l=a.depthStencil:(ca=a.depthStencil,l=N=!1))}else c=q=1;var m=null,ra=null,B=null,M=
null;if(Array.isArray(d))m=d.map(u);else if(d)m=[u(d)];else for(m=Array(U),d=0;d<U;++d)m[d]=O(c,q,t,J,y);b(C.webgl_draw_buffers||1>=m.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");b(m.length<=G.maxColorAttachments,"too many color attachments, not supported");c=c||m[0].width;q=q||m[0].height;p?ra=u(p):N&&!l&&(ra=O(c,q,Q,"depth","uint32"));F?B=u(F):l&&!N&&(B=O(c,q,!1,"stencil","uint8"));ca?M=u(ca):!p&&!F&&l&&N&&(M=O(c,q,Q,"depth stencil","depth stencil"));
b(1>=!!p+!!F+!!ca,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");N=null;for(d=0;d<m.length;++d)x(m[d],c,q),b(!m[d]||m[d].texture&&0<=I.indexOf(m[d].texture._texture.format)||m[d].renderbuffer&&0<=n.indexOf(m[d].renderbuffer._renderbuffer.format),"framebuffer color attachment "+d+" is invalid"),m[d]&&m[d].texture&&(l=g[m[d].texture._texture.format]*k[m[d].texture._texture.type],null===N?N=l:b(N===l,"all color attachments much have the same number of bits per pixel."));
x(ra,c,q);b(!ra||ra.texture&&6402===ra.texture._texture.format||ra.renderbuffer&&33189===ra.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");x(B,c,q);b(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");x(M,c,q);b(!M||M.texture&&34041===M.texture._texture.format||M.renderbuffer&&34041===M.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");T(h);h.width=c;h.height=
q;h.colorAttachments=m;h.depthAttachment=ra;h.stencilAttachment=B;h.depthStencilAttachment=M;f.color=m.map(ha);f.depth=ha(ra);f.stencil=ha(B);f.depthStencil=ha(M);f.width=h.width;f.height=h.height;Y(h);return f}var h=new c;t.framebufferCount++;f(a,e);return H(f,{resize:function(a,e){b(w.next!==h,"can not resize a framebuffer which is currently in use");var c=Math.max(a|0,1),k=Math.max(e|0||c,1);if(c===h.width&&k===h.height)return f;for(var q=h.colorAttachments,n=0;n<q.length;++n)d(q[n],c,k);d(h.depthAttachment,
c,k);d(h.stencilAttachment,c,k);d(h.depthStencilAttachment,c,k);h.width=f.width=c;h.height=f.height=k;Y(h);return f},_reglType:"framebuffer",_framebuffer:h,destroy:function(){q(h);T(h)},use:function(a){w.setFBO({framebuffer:f},a)}})}var w={cur:null,next:null,dirty:!1,setFBO:null},V=["rgba"],E=["rgba4","rgb565","rgb5 a1"];C.ext_srgb&&E.push("srgba");C.ext_color_buffer_half_float&&E.push("rgba16f","rgb16f");C.webgl_color_buffer_float&&E.push("rgba32f");var D=["uint8"];C.oes_texture_half_float&&D.push("half float",
"float16");C.oes_texture_float&&D.push("float","float32");var e=0,N={};return H(w,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof c)?a:null},create:h,createCube:function(a){function e(a){var c;b(0>d.indexOf(w.next),"can not update framebuffer which is currently in use");var f={color:null},k=0,q=null;c="rgba";var n="uint8",N=1;if("number"===typeof a)k=a|0;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in
a?(k=a.shape,b(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),b(k[0]===k[1],"cube framebuffer must be square"),k=k[0]):("radius"in a&&(k=a.radius|0),"width"in a?(k=a.width|0,"height"in a&&b(a.height===k,"must be square")):"height"in a&&(k=a.height|0));if("color"in a||"colors"in a)q=a.color||a.colors,Array.isArray(q)&&b(1===q.length||C.webgl_draw_buffers,"multiple render targets not supported");q||("colorCount"in a&&(N=a.colorCount|0,b(0<N,"invalid color buffer count")),"colorType"in
a&&(b.oneOf(a.colorType,D,"invalid color type"),n=a.colorType),"colorFormat"in a&&(c=a.colorFormat,b.oneOf(a.colorFormat,V,"invalid color format for texture")));"depth"in a&&(f.depth=a.depth);"stencil"in a&&(f.stencil=a.stencil);"depthStencil"in a&&(f.depthStencil=a.depthStencil)}else k=1;if(q)if(Array.isArray(q))for(a=[],c=0;c<q.length;++c)a[c]=q[c];else a=[q];else for(a=Array(N),q={radius:k,format:c,type:n},c=0;c<N;++c)a[c]=U.createCube(q);f.color=Array(a.length);for(c=0;c<a.length;++c)N=a[c],b("function"===
typeof N&&"textureCube"===N._reglType,"invalid cube map"),k=k||N.width,b(N.width===k&&N.height===k,"invalid cube map shape"),f.color[c]={target:34069,data:a[c]};for(c=0;6>c;++c){for(N=0;N<a.length;++N)f.color[N].target=34069+c;0<c&&(f.depth=d[0].depth,f.stencil=d[0].stencil,f.depthStencil=d[0].depthStencil);if(d[c])d[c](f);else d[c]=h(f)}return H(e,{width:k,height:k,color:a})}var d=Array(6);e(a);return H(e,{faces:d,resize:function(a){var c=a|0;b(0<c&&c<=G.maxCubeMapSize,"invalid radius for cube fbo");
if(c===e.width)return e;var f=e.color;for(a=0;a<f.length;++a)f[a].resize(c);for(a=0;6>a;++a)d[a].resize(c);e.width=e.height=c;return e},_reglType:"framebufferCube",destroy:function(){d.forEach(function(a){a.destroy()})}})},clear:function(){ba(N).forEach(q)},restore:function(){w.cur=null;w.next=null;w.dirty=!0;ba(N).forEach(function(a){a.framebuffer=B.createFramebuffer();Y(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(Z,fa,Oa){var b=Z("./util/sorted-object-keys"),
ba=Z("./util/pool");fa.exports=function(H,I){var g=1;I.ext_texture_filter_anisotropic&&(g=H.getParameter(34047));var k=1,n=1;I.webgl_draw_buffers&&(k=H.getParameter(34852),n=H.getParameter(36063));var f=!!I.oes_texture_float;if(f){f=H.createTexture();H.bindTexture(3553,f);H.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var B=H.createFramebuffer();H.bindFramebuffer(36160,B);H.framebufferTexture2D(36160,36064,3553,f,0);H.bindTexture(3553,null);if(36053!==H.checkFramebufferStatus(36160))f=!1;else{H.viewport(0,
0,1,1);H.clearColor(1,0,0,1);H.clear(16384);var C=ba.allocType(5126,4);H.readPixels(0,0,1,1,6408,5126,C);H.getError()?f=!1:(H.deleteFramebuffer(B),H.deleteTexture(f),f=1===C[0]);ba.freeType(C)}}C=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(C=H.createTexture(),B=ba.allocType(5121,36),H.activeTexture(33984),H.bindTexture(34067,C),H.texImage2D(34069,0,6408,3,3,0,6408,5121,B),ba.freeType(B),H.bindTexture(34067,
null),H.deleteTexture(C),C=!H.getError());return{colorBits:[H.getParameter(3410),H.getParameter(3411),H.getParameter(3412),H.getParameter(3413)],depthBits:H.getParameter(3414),stencilBits:H.getParameter(3415),subpixelBits:H.getParameter(3408),extensions:b(I).filter(function(f){return!!I[f]}),maxAnisotropic:g,maxDrawbuffers:k,maxColorAttachments:n,pointSizeDims:H.getParameter(33901),lineWidthDims:H.getParameter(33902),maxViewportDims:H.getParameter(3386),maxCombinedTextureUnits:H.getParameter(35661),
maxCubeMapSize:H.getParameter(34076),maxRenderbufferSize:H.getParameter(34024),maxTextureUnits:H.getParameter(34930),maxTextureSize:H.getParameter(3379),maxAttributes:H.getParameter(34921),maxVertexUniforms:H.getParameter(36347),maxVertexTextureUnits:H.getParameter(35660),maxVaryingVectors:H.getParameter(36348),maxFragmentUniforms:H.getParameter(36349),glsl:H.getParameter(35724),renderer:H.getParameter(7937),vendor:H.getParameter(7936),version:H.getParameter(7938),readFloat:f,npotTextureCube:C}}},
{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(Z,fa,Oa){var b=Z("./util/check"),ba=Z("./util/is-typed-array");fa.exports=function(H,I,g,k,n,f,B){function C(U){var y;null===I.next?(b(n.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),y=5121):(b(null!==I.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),y=I.next.colorAttachments[0].texture._texture.type,b.optional(function(){f.oes_texture_float?
(b(5121===y||5126===y,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===y&&b(B.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):b(5121===y,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var t=0,m=0,C=k.framebufferWidth,x=k.framebufferHeight,M=null;ba(U)?M=U:U&&(b.type(U,"object","invalid arguments to regl.read()"),t=U.x|0,m=U.y|0,b(0<=t&&t<k.framebufferWidth,
"invalid x offset for regl.read"),b(0<=m&&m<k.framebufferHeight,"invalid y offset for regl.read"),C=(U.width||k.framebufferWidth-t)|0,x=(U.height||k.framebufferHeight-m)|0,M=U.data||null);M&&(5121===y?b(M instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===y&&b(M instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));b(0<C&&C+t<=k.framebufferWidth,"invalid width for read pixels");b(0<x&&x+m<=
k.framebufferHeight,"invalid height for read pixels");g();U=C*x*4;M||(5121===y?M=new Uint8Array(U):5126===y&&(M=M||new Float32Array(U)));b.isTypedArray(M,"data buffer for regl.read() must be a typedarray");b(M.byteLength>=U,"data buffer for regl.read() too small");H.pixelStorei(3333,4);H.readPixels(t,m,C,x,6408,y,M);return M}function G(f){var k;I.setFBO({framebuffer:f.framebuffer},function(){k=C(f)});return k}return function(f){return f&&"framebuffer"in f?G(f):C(f)}}},{"./util/check":21,"./util/is-typed-array":30}],
15:[function(Z,fa,Oa){var b=Z("./util/sorted-object-keys"),ba=Z("./util/check"),H=Z("./util/values"),I=[];I[32854]=2;I[32855]=2;I[36194]=2;I[33189]=2;I[36168]=1;I[34041]=4;I[35907]=4;I[34836]=16;I[34842]=8;I[34843]=6;fa.exports=function(g,k,n,f,B){function C(f){this.id=t++;this.refCount=1;this.renderbuffer=f;this.format=32854;this.height=this.width=0;B.profile&&(this.stats={size:0})}function G(k){var n=k.renderbuffer;ba(n,"must not double destroy renderbuffer");g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(n);
k.renderbuffer=null;k.refCount=0;delete m[k.id];f.renderbufferCount--}var U={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};k.ext_srgb&&(U.srgba=35907);k.ext_color_buffer_half_float&&(U.rgba16f=34842,U.rgb16f=34843);k.webgl_color_buffer_float&&(U.rgba32f=34836);var y=[];b(U).forEach(function(f){y[U[f]]=f});var t=0,m={};C.prototype.decRef=function(){0>=--this.refCount&&G(this)};B.profile&&(f.getTotalRenderbufferSize=function(){var f=0;b(m).forEach(function(k){f+=
m[k].stats.size});return f});return{create:function(k,x){function b(f,k){var d=0,c=0,T=32854;"object"===typeof f&&f?("shape"in f?(c=f.shape,ba(Array.isArray(c)&&2<=c.length,"invalid renderbuffer shape"),d=c[0]|0,c=c[1]|0):("radius"in f&&(d=c=f.radius|0),"width"in f&&(d=f.width|0),"height"in f&&(c=f.height|0)),"format"in f&&(ba.parameter(f.format,U,"invalid renderbuffer format"),T=U[f.format])):"number"===typeof f?(d=f|0,c="number"===typeof k?k|0:d):f?ba.raise("invalid arguments to renderbuffer constructor"):
d=c=1;ba(0<d&&0<c&&d<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size");if(d!==u.width||c!==u.height||T!==u.format)return b.width=u.width=d,b.height=u.height=c,u.format=T,g.bindRenderbuffer(36161,u.renderbuffer),g.renderbufferStorage(36161,T,d,c),ba(0===g.getError(),"invalid render buffer format"),B.profile&&(u.stats.size=I[u.format]*u.width*u.height),b.format=y[u.format],b}var u=new C(g.createRenderbuffer());m[u.id]=u;f.renderbufferCount++;b(k,x);b.resize=function(f,k){var d=
f|0,c=k|0||d;if(d===u.width&&c===u.height)return b;ba(0<d&&0<c&&d<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size");b.width=u.width=d;b.height=u.height=c;g.bindRenderbuffer(36161,u.renderbuffer);g.renderbufferStorage(36161,u.format,d,c);ba(0===g.getError(),"invalid render buffer format");B.profile&&(u.stats.size=I[u.format]*u.width*u.height);return b};b._reglType="renderbuffer";b._renderbuffer=u;B.profile&&(b.stats=u.stats);b.destroy=function(){u.decRef()};return b},clear:function(){H(m).forEach(G)},
restore:function(){H(m).forEach(function(f){f.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,f.renderbuffer);g.renderbufferStorage(36161,f.format,f.width,f.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(Z,fa,Oa){var b=Z("./util/sorted-object-keys"),ba=Z("./util/check"),H=Z("./util/extend"),I=Z("./util/values");fa.exports=function(g,k,n,f){function B(f,k,n,d){this.name=f;this.id=k;this.location=n;this.info=
d}function C(f,k){for(var n=0;n<f.length;++n)if(f[n].id===k.id){f[n].location=k.location;return}f.push(k)}function G(f,n,x){var d=35632===f?t:m,c=d[n];if(!c){var T=k.str(n),c=g.createShader(f);g.shaderSource(c,T);g.compileShader(c);ba.shaderError(g,c,T,f,x);d[n]=c}return c}function U(k,n){this.id=M++;this.fragId=k;this.vertId=n;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;f.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function y(n,x,b){var d;d=G(35632,n.fragId);
var c=G(35633,n.vertId),T=n.program=g.createProgram();g.attachShader(T,d);g.attachShader(T,c);if(b)for(d=0;d<b.length;++d)c=b[d],g.bindAttribLocation(T,c[0],c[1]);g.linkProgram(T);ba.linkError(g,T,k.str(n.fragId),k.str(n.vertId),x);b=g.getProgramParameter(T,35718);f.profile&&(n.stats.uniformsCount=b);c=n.uniforms;for(d=0;d<b;++d)if(x=g.getActiveUniform(T,d))if(1<x.size)for(var q=0;q<x.size;++q){var t=x.name.replace("[0]","["+q+"]");C(c,new B(t,k.id(t),g.getUniformLocation(T,t),x))}else C(c,new B(x.name,
k.id(x.name),g.getUniformLocation(T,x.name),x));b=g.getProgramParameter(T,35721);f.profile&&(n.stats.attributesCount=b);n=n.attributes;for(d=0;d<b;++d)(x=g.getActiveAttrib(T,d))&&C(n,new B(x.name,k.id(x.name),g.getAttribLocation(T,x.name),x))}var t={},m={},aa={},x=[],M=0;f.profile&&(n.getMaxUniformsCount=function(){var f=0;x.forEach(function(k){k.stats.uniformsCount>f&&(f=k.stats.uniformsCount)});return f},n.getMaxAttributesCount=function(){var f=0;x.forEach(function(k){k.stats.attributesCount>f&&
(f=k.stats.attributesCount)});return f});return{clear:function(){var f=g.deleteShader.bind(g);I(t).forEach(f);t={};I(m).forEach(f);m={};x.forEach(function(f){g.deleteProgram(f.program)});x.length=0;aa={};n.shaderCount=0},program:function(f,k,I,d){ba.command(0<=f,"missing vertex shader",I);ba.command(0<=k,"missing fragment shader",I);var c=aa[k];c||(c=aa[k]={});var T=c[f];if(T&&(T.refCount++,!d))return T;var q=new U(k,f);n.shaderCount++;y(q,I,d);T||(c[f]=q);x.push(q);return H(q,{destroy:function(){q.refCount--;
if(0>=q.refCount){g.deleteProgram(q.program);var d=x.indexOf(q);x.splice(d,1);n.shaderCount--}0>=c[q.vertId].refCount&&(g.deleteShader(m[q.vertId]),delete m[q.vertId],delete aa[q.fragId][q.vertId]);b(aa[q.fragId]).length||(g.deleteShader(t[q.fragId]),delete t[q.fragId],delete aa[q.fragId])}})},restore:function(){t={};m={};for(var f=0;f<x.length;++f)y(x[f],null,x[f].attributes.map(function(f){return[f.location,f.name]}))},shader:G,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,
"./util/values":36}],17:[function(Z,fa,Oa){fa.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(Z,fa,Oa){fa.exports=function(){var b={"":0},ba=[""];return{id:function(H){var I=b[H];if(I)return I;I=b[H]=ba.length;ba.push(H);return I},str:function(b){return ba[b]}}}},{}],19:[function(Z,fa,Oa){function b(e){return"[object "+e+"]"}function ba(e){return Array.isArray(e)&&
(0===e.length||"number"===typeof e[0])}function H(e){return Array.isArray(e)&&0!==e.length&&aa(e[0])?!0:!1}function I(e){return Object.prototype.toString.call(e)}function g(e){if(!e)return!1;var d=I(e);return 0<=V.indexOf(d)?!0:ba(e)||H(e)||y(e)}function k(e,d){36193===e.type?(e.data=m(d),t.freeType(d)):e.data=d}function n(e,f,a,c,k,h){e="undefined"!==typeof D[e]?D[e]:d[e]*E[f];h&&(e*=6);if(k){for(c=0;1<=a;)c+=e*a*a,a/=2;return c}return e*a*c}var f=Z("./util/sorted-object-keys"),B=Z("./util/check"),
C=Z("./util/extend"),G=Z("./util/values"),U=Z("./util/is-typed-array"),y=Z("./util/is-ndarray"),t=Z("./util/pool"),m=Z("./util/to-half-float"),aa=Z("./util/is-array-like"),x=Z("./util/flatten"),M=Z("./util/is-pow2");Oa=Z("./constants/arraytypes.json");var u=Z("./constants/arraytypes.json"),O=[9984,9986,9985,9987],ha=[0,6409,6410,6407,6408],d={};d[6409]=d[6406]=d[6402]=1;d[34041]=d[6410]=2;d[6407]=d[35904]=3;d[6408]=d[35906]=4;var c=b("HTMLCanvasElement"),T=b("OffscreenCanvas"),q=b("CanvasRenderingContext2D"),
Y=b("ImageBitmap"),h=b("HTMLImageElement"),w=b("HTMLVideoElement"),V=f(Oa).concat([c,T,q,Y,h,w]),E=[];E[5121]=1;E[5126]=4;E[36193]=2;E[5123]=2;E[5125]=4;var D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[34041]=4;D[33776]=.5;D[33777]=.5;D[33778]=1;D[33779]=1;D[35986]=.5;D[35987]=1;D[34798]=1;D[35840]=.5;D[35841]=.25;D[35842]=.5;D[35843]=.25;D[36196]=.5;fa.exports=function(e,N,a,b,D,E,V){function W(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=
1;this.colorSpace=37444;this.channels=this.height=this.width=0}function da(a,e){a.internalformat=e.internalformat;a.format=e.format;a.type=e.type;a.compressed=e.compressed;a.premultiplyAlpha=e.premultiplyAlpha;a.flipY=e.flipY;a.unpackAlignment=e.unpackAlignment;a.colorSpace=e.colorSpace;a.width=e.width;a.height=e.height;a.channels=e.channels}function R(e,f){if("object"===typeof f&&f){"premultiplyAlpha"in f&&(B.type(f.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=f.premultiplyAlpha);
"flipY"in f&&(B.type(f.flipY,"boolean","invalid texture flip"),e.flipY=f.flipY);"alignment"in f&&(B.oneOf(f.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=f.alignment);"colorSpace"in f&&(B.parameter(f.colorSpace,Ta,"invalid colorSpace"),e.colorSpace=Ta[f.colorSpace]);if("type"in f){var c=f.type;B(N.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");B(N.oes_texture_half_float||!("half float"===
c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");B(N.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");B.parameter(c,v,"invalid texture type");e.type=v[c]}var l=e.width,p=e.height,k=e.channels,c=!1;"shape"in f?(B(Array.isArray(f.shape)&&2<=f.shape.length,"shape must be an array"),l=f.shape[0],p=f.shape[1],3===f.shape.length&&
(k=f.shape[2],B(0<k&&4>=k,"invalid number of channels"),c=!0),B(0<=l&&l<=a.maxTextureSize,"invalid width"),B(0<=p&&p<=a.maxTextureSize,"invalid height")):("radius"in f&&(l=p=f.radius,B(0<=l&&l<=a.maxTextureSize,"invalid radius")),"width"in f&&(l=f.width,B(0<=l&&l<=a.maxTextureSize,"invalid width")),"height"in f&&(p=f.height,B(0<=p&&p<=a.maxTextureSize,"invalid height")),"channels"in f&&(k=f.channels,B(0<k&&4>=k,"invalid number of channels"),c=!0));e.width=l|0;e.height=p|0;e.channels=k|0;l=!1;"format"in
f&&(l=f.format,B(N.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),B.parameter(l,r,"invalid texture format"),p=e.internalformat=r[l],e.format=Da[p],l in v&&!("type"in f)&&(e.type=v[l]),l in S&&(e.compressed=!0),l=!0);!c&&l?e.channels=d[e.format]:c&&!l?e.channels!==ha[e.format]&&(e.format=e.internalformat=ha[e.channels]):l&&c&&B(e.channels===d[e.format],"number of channels inconsistent with specified format")}}
function P(a){e.pixelStorei(37440,a.flipY);e.pixelStorei(37441,a.premultiplyAlpha);e.pixelStorei(37443,a.colorSpace);e.pixelStorei(3317,a.unpackAlignment)}function z(){W.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function l(e,d){var f=null;g(d)?f=d:d&&(B.type(d,"object","invalid pixel data type"),R(e,d),"x"in d&&(e.xOffset=d.x|0),"y"in d&&(e.yOffset=d.y|0),g(d.data)&&(f=d.data));B(!e.compressed||f instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(d.copy){B(!f,"can not specify copy and data field for the same texture");var l=D.viewportWidth,p=D.viewportHeight;e.width=e.width||l-e.xOffset;e.height=e.height||p-e.yOffset;e.needsCopy=!0;B(0<=e.xOffset&&e.xOffset<l&&0<=e.yOffset&&e.yOffset<p&&0<e.width&&e.width<=l&&0<e.height&&e.height<=p,"copy texture read out of bounds")}else if(!f)e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;else if(U(f))e.channels=e.channels||4,e.data=f,"type"in d||5121!==e.type||(e.type=u[Object.prototype.toString.call(f)]|
0);else if(ba(f)){e.channels=e.channels||4;l=f;p=l.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:p=t.allocType(e.type,p);p.set(l);e.data=p;break;case 36193:e.data=m(l);break;default:B.raise("unsupported texture type, must specify a typed array")}e.alignment=1;e.needsFree=!0}else if(y(f)){l=f.data;Array.isArray(l)||5121!==e.type||(e.type=u[Object.prototype.toString.call(l)]|0);var p=f.shape,v=f.stride,r,L,n,ja;3===p.length?(n=p[2],ja=v[2]):(B(2===p.length,"invalid ndarray pixel data, must be 2 or 3D"),
ja=n=1);r=p[0];L=p[1];p=v[0];v=v[1];e.alignment=1;e.width=r;e.height=L;e.channels=n;e.format=e.internalformat=ha[n];e.needsFree=!0;r=ja;f=f.offset;n=e.width;ja=e.height;L=e.channels;for(var S=t.allocType(36193===e.type?5126:e.type,n*ja*L),N=0,sa=0;sa<ja;++sa)for(var ya=0;ya<n;++ya)for(var Da=0;Da<L;++Da)S[N++]=l[p*ya+v*sa+r*Da+f];k(e,S)}else if(I(f)===c||I(f)===T||I(f)===q)I(f)===c||I(f)===T?e.element=f:e.element=f.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(I(f)===
Y)e.element=f,e.width=f.width,e.height=f.height,e.channels=4;else if(I(f)===h)e.element=f,e.width=f.naturalWidth,e.height=f.naturalHeight,e.channels=4;else if(I(f)===w)e.element=f,e.width=f.videoWidth,e.height=f.videoHeight,e.channels=4;else if(H(f)){l=e.width||f[0].length;p=e.height||f.length;v=e.channels;v=aa(f[0][0])?v||f[0][0].length:v||1;r=x.shape(f);n=1;for(ja=0;ja<r.length;++ja)n*=r[ja];n=t.allocType(36193===e.type?5126:e.type,n);x.flatten(f,r,"",n);k(e,n);e.alignment=1;e.width=l;e.height=
p;e.channels=v;e.format=e.internalformat=ha[v];e.needsFree=!0}5126===e.type?B(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===e.type&&B(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function K(a,d,f,c,l){var p=a.element,k=a.data,h=a.internalformat,v=a.format,r=a.type,q=a.width,L=a.height;P(a);p?e.texSubImage2D(d,l,f,c,v,r,p):a.compressed?e.compressedTexSubImage2D(d,l,f,c,h,q,L,k):a.needsCopy?(b(),e.copyTexSubImage2D(d,
l,f,c,a.xOffset,a.yOffset,q,L)):e.texSubImage2D(d,l,f,c,q,L,v,r,k)}function J(){return pa.pop()||new z}function Ea(a){a.needsFree&&t.freeType(a.data);z.call(a);pa.push(a)}function oa(){W.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function p(a,e,d){var f=a.images[0]=J();a.mipmask=1;f.width=a.width=e;f.height=a.height=d;f.channels=a.channels=4}function F(a,e){var d=null;if(g(e))d=a.images[0]=J(),da(d,a),l(d,e),a.mipmask=1;else if(R(a,e),Array.isArray(e.mipmap))for(var f=
e.mipmap,c=0;c<f.length;++c)d=a.images[c]=J(),da(d,a),d.width>>=c,d.height>>=c,l(d,f[c]),a.mipmask|=1<<c;else d=a.images[0]=J(),da(d,a),l(d,e),a.mipmask=1;da(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||B(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ca(a,d){for(var f=a.images,c=0;c<f.length&&f[c];++c){var l=f[c],p=
d,k=c,h=l.element,v=l.data,r=l.internalformat,q=l.format,L=l.type,n=l.width,ja=l.height;P(l);h?e.texImage2D(p,k,q,q,L,h):l.compressed?e.compressedTexImage2D(p,k,r,n,ja,0,v):l.needsCopy?(b(),e.copyTexImage2D(p,k,q,l.xOffset,l.yOffset,n,ja,0)):e.texImage2D(p,k,q,n,ja,0,q,L,v||null)}}function Q(){var a=wa.pop()||new oa;W.call(a);for(var e=a.mipmask=0;16>e;++e)a.images[e]=null;return a}function na(a){for(var e=a.images,d=0;d<e.length;++d)e[d]&&Ea(e[d]),e[d]=null;wa.push(a)}function ra(){this.magFilter=
this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Aa(e,d){if("min"in d){var f=d.min;B.parameter(f,Xb);e.minFilter=Xb[f];0<=O.indexOf(e.minFilter)&&!("faces"in d)&&(e.genMipmaps=!0)}"mag"in d&&(f=d.mag,B.parameter(f,ja),e.magFilter=ja[f]);var f=e.wrapS,c=e.wrapT;if("wrap"in d){var l=d.wrap;"string"===typeof l?(B.parameter(l,ya),f=c=ya[l]):Array.isArray(l)&&(B.parameter(l[0],ya),B.parameter(l[1],ya),f=ya[l[0]],c=ya[l[1]])}else"wrapS"in
d&&(f=d.wrapS,B.parameter(f,ya),f=ya[f]),"wrapT"in d&&(c=d.wrapT,B.parameter(c,ya),c=ya[c]);e.wrapS=f;e.wrapT=c;"anisotropic"in d&&(f=d.anisotropic,B("number"===typeof f&&1<=f&&f<=a.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=d.anisotropic);if("mipmap"in d){f=!1;switch(typeof d.mipmap){case "string":B.parameter(d.mipmap,xa,"invalid mipmap hint");e.mipmapHint=xa[d.mipmap];f=e.genMipmaps=!0;break;case "boolean":f=e.genMipmaps=d.mipmap;break;case "object":B(Array.isArray(d.mipmap),
"invalid mipmap type");e.genMipmaps=!1;f=!0;break;default:B.raise("invalid mipmap type")}!f||"min"in d||(e.minFilter=9984)}}function za(a,d){e.texParameteri(d,10241,a.minFilter);e.texParameteri(d,10240,a.magFilter);e.texParameteri(d,10242,a.wrapS);e.texParameteri(d,10243,a.wrapT);N.ext_texture_filter_anisotropic&&e.texParameteri(d,34046,a.anisotropic);a.genMipmaps&&(e.hint(33170,a.mipmapHint),e.generateMipmap(d))}function ga(a){W.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ga++;this.refCount=
1;this.target=a;this.texture=e.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ra;V.profile&&(this.stats={size:0})}function Ca(a){e.activeTexture(33984);e.bindTexture(a.target,a.texture)}function la(){var a=ua[0];a?e.bindTexture(a.target,a.texture):e.bindTexture(3553,null)}function qa(a){var d=a.texture;B(d,"must not double destroy texture");var f=a.unit,c=a.target;0<=f&&(e.activeTexture(33984+f),e.bindTexture(c,null),ua[f]=null);e.deleteTexture(d);a.texture=null;a.params=null;a.pixels=
null;a.refCount=0;delete ma[a.id];E.textureCount--}var xa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ya={repeat:10497,clamp:33071,mirror:33648},ja={nearest:9728,linear:9729},Xb=C({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},ja),Ta={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},r={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,
rgb565:36194},S={};N.ext_srgb&&(r.srgb=35904,r.srgba=35906);N.oes_texture_float&&(v.float32=v["float"]=5126);N.oes_texture_half_float&&(v.float16=v["half float"]=36193);N.webgl_depth_texture&&(C(r,{depth:6402,"depth stencil":34041}),C(v,{uint16:5123,uint32:5125,"depth stencil":34042}));N.webgl_compressed_texture_s3tc&&C(S,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});N.webgl_compressed_texture_atc&&C(S,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});N.webgl_compressed_texture_pvrtc&&C(S,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});N.webgl_compressed_texture_etc1&&(S["rgb etc1"]=36196);var va=Array.prototype.slice.call(e.getParameter(34467));f(S).forEach(function(a){var e=S[a];0<=va.indexOf(e)&&(r[a]=e)});var Fa=f(r);a.textureFormats=Fa;var sd=[];f(r).forEach(function(a){sd[r[a]]=a});var Gb=[];f(v).forEach(function(a){Gb[v[a]]=a});var ia=[];f(ja).forEach(function(a){ia[ja[a]]=
a});var L=[];f(Xb).forEach(function(a){L[Xb[a]]=a});var sa=[];f(ya).forEach(function(a){sa[ya[a]]=a});var Da=Fa.reduce(function(a,e){var d=r[e];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||N.ext_srgb&&(35904===d||35906===d)?a[d]=d:32855===d||0<=e.indexOf("rgba")?a[d]=6408:a[d]=6407;return a},{}),pa=[],wa=[],Ga=0,ma={},X=a.maxTextureUnits,ua=Array(X).map(function(){return null});C(ga.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var d=0;d<X;++d){var f=ua[d];
if(f){if(0<f.bindCount)continue;f.unit=-1}ua[d]=this;a=d;break}a>=X&&B.raise("insufficient number of texture units");V.profile&&E.maxTextureUnits<a+1&&(E.maxTextureUnits=a+1);this.unit=a;e.activeTexture(33984+a);e.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&qa(this)}});V.profile&&(E.getTotalTextureSize=function(){var a=0;f(ma).forEach(function(e){a+=ma[e].stats.size});return a});return{create2D:function(d,f){function c(e,
d){var f=k.texInfo;ra.call(f);var l=Q();"number"===typeof e?"number"===typeof d?p(l,e|0,d|0):p(l,e|0,e|0):e?(B.type(e,"object","invalid arguments to regl.texture"),Aa(f,e),F(l,e)):p(l,1,1);f.genMipmaps&&(l.mipmask=(l.width<<1)-1);k.mipmask=l.mipmask;da(k,l);B.texture2D(f,l,a);k.internalformat=l.internalformat;c.width=l.width;c.height=l.height;Ca(k);ca(l,3553);za(f,3553);la();na(l);V.profile&&(k.stats.size=n(k.internalformat,k.type,l.width,l.height,f.genMipmaps,!1));c.format=sd[k.internalformat];c.type=
Gb[k.type];c.mag=ia[f.magFilter];c.min=L[f.minFilter];c.wrapS=sa[f.wrapS];c.wrapT=sa[f.wrapT];return c}var k=new ga(3553);ma[k.id]=k;E.textureCount++;c(d,f);c.subimage=function(a,e,d,f){B(!!a,"must specify image data");e|=0;d|=0;f|=0;var p=J();da(p,k);p.width=0;p.height=0;l(p,a);p.width=p.width||(k.width>>f)-e;p.height=p.height||(k.height>>f)-d;B(k.type===p.type&&k.format===p.format&&k.internalformat===p.internalformat,"incompatible format for texture.subimage");B(0<=e&&0<=d&&e+p.width<=k.width&&
d+p.height<=k.height,"texture.subimage write out of bounds");B(k.mipmask&1<<f,"missing mipmap data");B(p.data||p.element||p.needsCopy,"missing image data");Ca(k);K(p,3553,e,d,f);la();Ea(p);return c};c.resize=function(a,d){var f=a|0,l=d|0||f;if(f===k.width&&l===k.height)return c;c.width=k.width=f;c.height=k.height=l;Ca(k);for(var p=0;k.mipmask>>p;++p){var h=f>>p,v=l>>p;if(!h||!v)break;e.texImage2D(3553,p,k.format,h,v,0,k.format,k.type,null)}la();V.profile&&(k.stats.size=n(k.internalformat,k.type,f,
l,!1,!1));return c};c._reglType="texture2d";c._texture=k;V.profile&&(c.stats=k.stats);c.destroy=function(){k.decRef()};return c},createCube:function(d,f,c,k,h,v){function r(e,d,f,c,l,k){var h,v=q.texInfo;ra.call(v);for(h=0;6>h;++h)ja[h]=Q();if("number"!==typeof e&&e)if("object"===typeof e)if(d)F(ja[0],e),F(ja[1],d),F(ja[2],f),F(ja[3],c),F(ja[4],l),F(ja[5],k);else if(Aa(v,e),R(q,e),"faces"in e)for(e=e.faces,B(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),h=0;6>h;++h)B("object"===
typeof e[h]&&!!e[h],"invalid input for cube map face"),da(ja[h],q),F(ja[h],e[h]);else for(h=0;6>h;++h)F(ja[h],e);else B.raise("invalid arguments to cube map");else for(e=e|0||1,h=0;6>h;++h)p(ja[h],e,e);da(q,ja[0]);B.optional(function(){a.npotTextureCube||B(M(q.width)&&M(q.height),"your browser does not support non power or two texture dimensions")});q.mipmask=v.genMipmaps?(ja[0].width<<1)-1:ja[0].mipmask;B.textureCube(q,v,ja,a);q.internalformat=ja[0].internalformat;r.width=ja[0].width;r.height=ja[0].height;
Ca(q);for(h=0;6>h;++h)ca(ja[h],34069+h);za(v,34067);la();V.profile&&(q.stats.size=n(q.internalformat,q.type,r.width,r.height,v.genMipmaps,!0));r.format=sd[q.internalformat];r.type=Gb[q.type];r.mag=ia[v.magFilter];r.min=L[v.minFilter];r.wrapS=sa[v.wrapS];r.wrapT=sa[v.wrapT];for(h=0;6>h;++h)na(ja[h]);return r}var q=new ga(34067);ma[q.id]=q;E.cubeCount++;var ja=Array(6);r(d,f,c,k,h,v);r.subimage=function(a,e,d,f,c){B(!!e,"must specify image data");B("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");
d|=0;f|=0;c|=0;var p=J();da(p,q);p.width=0;p.height=0;l(p,e);p.width=p.width||(q.width>>c)-d;p.height=p.height||(q.height>>c)-f;B(q.type===p.type&&q.format===p.format&&q.internalformat===p.internalformat,"incompatible format for texture.subimage");B(0<=d&&0<=f&&d+p.width<=q.width&&f+p.height<=q.height,"texture.subimage write out of bounds");B(q.mipmask&1<<c,"missing mipmap data");B(p.data||p.element||p.needsCopy,"missing image data");Ca(q);K(p,34069+a,d,f,c);la();Ea(p);return r};r.resize=function(a){a|=
0;if(a!==q.width){r.width=q.width=a;r.height=q.height=a;Ca(q);for(var d=0;6>d;++d)for(var f=0;q.mipmask>>f;++f)e.texImage2D(34069+d,f,q.format,a>>f,a>>f,0,q.format,q.type,null);la();V.profile&&(q.stats.size=n(q.internalformat,q.type,r.width,r.height,!1,!0));return r}};r._reglType="textureCube";r._texture=q;V.profile&&(r.stats=q.stats);r.destroy=function(){q.decRef()};return r},clear:function(){for(var a=0;a<X;++a)e.activeTexture(33984+a),e.bindTexture(3553,null),ua[a]=null;G(ma).forEach(qa);E.cubeCount=
0;E.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<X;++a){var d=ua[a];d&&(d.bindCount=0,d.unit=-1,ua[a]=null)}G(ma).forEach(function(a){a.texture=e.createTexture();e.bindTexture(a.target,a.texture);for(var d=0;32>d;++d)if(0!==(a.mipmask&1<<d))if(3553===a.target)e.texImage2D(3553,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);else for(var f=0;6>f;++f)e.texImage2D(34069+f,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,
null);za(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<X;++a){var d=ua[a];d&&(d.bindCount=0,d.unit=-1,ua[a]=null);e.activeTexture(33984+a);e.bindTexture(3553,null);e.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(Z,
fa,Oa){fa.exports=function(b,ba){function H(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function I(k,g,b){var t=n.pop()||new H;t.startQueryIndex=k;t.endQueryIndex=g;t.sum=0;t.stats=b;f.push(t)}if(!ba.ext_disjoint_timer_query)return null;var g=[],k=[],n=[],f=[],B=[],C=[];return{beginQuery:function(f){var n=g.pop()||ba.ext_disjoint_timer_query.createQueryEXT();ba.ext_disjoint_timer_query.beginQueryEXT(35007,n);k.push(n);I(k.length-1,k.length,f)},endQuery:function(){ba.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:I,update:function(){var b,I;b=k.length;if(0!==b){C.length=Math.max(C.length,b+1);B.length=Math.max(B.length,b+1);B[0]=0;var y=C[0]=0;for(I=b=0;I<k.length;++I){var t=k[I];ba.ext_disjoint_timer_query.getQueryObjectEXT(t,34919)?(y+=ba.ext_disjoint_timer_query.getQueryObjectEXT(t,34918),g.push(t)):k[b++]=t;B[I+1]=y;C[I+1]=b}k.length=b;for(I=b=0;I<f.length;++I){var y=f[I],m=y.startQueryIndex,t=y.endQueryIndex;y.sum+=B[t]-B[m];m=C[m];t=C[t];t===m?(y.stats.gpuTime+=y.sum/1E6,n.push(y)):(y.startQueryIndex=
m,y.endQueryIndex=t,f[b++]=y)}f.length=b}},getNumPendingQueries:function(){return k.length},clear:function(){g.push.apply(g,k);for(var f=0;f<g.length;f++)ba.ext_disjoint_timer_query.deleteQueryEXT(g[f]);k.length=0;g.length=0},restore:function(){k.length=0;g.length=0}}}},{}],21:[function(Z,fa,Oa){function b(d){return"undefined"!==typeof atob?atob(d):"base64:"+d}function ba(d){d=Error("(regl) "+d);console.error(d);throw d;}function H(d,f){d||ba(f)}function I(d){return d?": "+d:""}function g(d,f){switch(f){case "number":return"number"===
typeof d;case "object":return"object"===typeof d;case "string":return"string"===typeof d;case "boolean":return"boolean"===typeof d;case "function":return"function"===typeof d;case "undefined":return"undefined"===typeof d;case "symbol":return"symbol"===typeof d}}function k(d,f,c){0>f.indexOf(d)&&ba("invalid value"+I(c)+". must be one of: "+f)}function n(d,f){for(d+="";d.length<f;)d=" "+d;return d}function f(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function B(d,f){this.number=
d;this.line=f;this.errors=[]}function C(d,f,c){this.file=d;this.line=f;this.message=c}function G(){var d=Error(),d=(d.stack||d).toString(),f=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(d);return f?f[1]:(d=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(d))?d[1]:"unknown"}function U(){var d=Error(),d=(d.stack||d).toString(),f=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(d);return f?f[1]:(d=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(d))?d[1]:"unknown"}function y(d,c){var k=d.split("\n"),h=1,n=0,g={unknown:new f,
0:new f};g.unknown.name=g[0].name=c||G();g.unknown.lines.push(new B(0,""));for(var x=0;x<k.length;++x){var t=k[x],e=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(t);if(e)switch(e[1]){case "line":if(e=/(\d+)(\s+\d+)?/.exec(e[2]))h=e[1]|0,e[2]&&(n=e[2]|0,n in g||(g[n]=new f));break;case "define":if(e=/SHADER_NAME(_B64)?\s+(.*)$/.exec(e[2]))g[n].name=e[1]?b(e[2]):e[2]}g[n].lines.push(new B(h++,t))}O(g).forEach(function(e){var a=g[e];a.lines.forEach(function(e){a.index[e.number]=e})});return g}function t(d){var f=
[];d.split("\n").forEach(function(d){if(!(5>d.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(d);c?f.push(new C(c[1]|0,c[2]|0,c[3].trim())):0<d.length&&f.push(new C("unknown",0,d))}});return f}function m(d,f){f.forEach(function(f){var c=d[f.file];if(c){var k=c.index[f.line];if(k){k.errors.push(f);c.hasErrors=!0;return}}d.unknown.hasErrors=!0;d.unknown.lines[0].errors.push(f)})}function aa(d){d._commandRef=G()}function x(d,f){var c=U();ba(d+" in command "+(f||G())+("unknown"===c?"":" called from "+
c))}function M(d,f,c,k){g(d,f)||x("invalid parameter type"+I(c)+". expected "+f+", got "+typeof d,k||G())}function u(d,f){return 32820===d||32819===d||33635===d?2:34042===d?4:c[d]*f}var O=Z("./sorted-object-keys"),ha=Z("./is-typed-array");Z=Z("./extend");var d="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),c={};c[5120]=c[5121]=1;c[5122]=c[5123]=c[36193]=c[33635]=c[32819]=c[32820]=2;c[5124]=c[5125]=c[5126]=c[34042]=4;fa.exports=Z(H,{optional:function(d){d()},
raise:ba,commandRaise:x,command:function(d,f,c){d||x(f,c||G())},parameter:function(d,f,c){d in f||ba("unknown parameter ("+d+")"+I(c)+". possible values: "+O(f).join())},commandParameter:function(d,f,c,k){d in f||x("unknown parameter ("+d+")"+I(c)+". possible values: "+O(f).join(),k||G())},constructor:function(f){O(f).forEach(function(f){0>d.indexOf(f)&&ba('invalid regl constructor argument "'+f+'". must be one of '+d)})},type:function(d,f,c){g(d,f)||ba("invalid parameter type"+I(c)+". expected "+
f+", got "+typeof d)},commandType:M,isTypedArray:function(d,f){ha(d)||ba("invalid parameter type"+I(f)+". must be a typed array")},nni:function(d,f){0<=d&&(d|0)===d||ba("invalid parameter type, ("+d+")"+I(f)+". must be a nonnegative integer")},oneOf:k,shaderError:function(d,f,c,k,w){if(!d.getShaderParameter(f,d.COMPILE_STATUS)){f=d.getShaderInfoLog(f);d=k===d.FRAGMENT_SHADER?"fragment":"vertex";M(c,"string",d+" shader source must be a string",w);var g=y(c,w);c=t(f);m(g,c);O(g).forEach(function(d){function f(e,
d){c.push(e);a.push(d||"")}var e=g[d];if(e.hasErrors){var c=[""],a=[""];f("file number "+d+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold");e.lines.forEach(function(a){if(0<a.errors.length){f(n(a.number,4)+"|  ","background-color:yellow; font-weight:bold");f(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var e=0;a.errors.forEach(function(d){d=d.message;var c=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(c){var k=c[1];d=c[2];switch(k){case "assign":k="="}e=Math.max(a.line.indexOf(k,
e),0)}else e=0;f(n("| ",6));f(n("^^^",e+3)+"\n","font-weight:bold");f(n("| ",6));f(d+"\n","font-weight:bold")});f(n("| ",6)+"\n")}else f(n(a.number,4)+"|  "),f(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(c.join("")):(a[0]=c.join("%c"),console.log.apply(console,a))}});H.raise("Error compiling "+d+" shader, "+g[0].name)}},linkError:function(d,f,c,k,n){d.getProgramParameter(f,d.LINK_STATUS)||(d=d.getProgramInfoLog(f),c=y(c,n),k='Error linking program with vertex shader, "'+
y(k,n)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+k+"\n%c"+d,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(k+"\n"+d),H.raise(k))},callSite:U,saveCommandRef:aa,saveDrawInfo:function(d,f,c,k){function n(d){return d?k.id(d):0}function g(d,e){O(e).forEach(function(e){d[k.id(e)]=!0})}aa(d);d._fragId=n(d["static"].frag);d._vertId=n(d["static"].vert);var b=d._uniformSet={};g(b,f["static"]);g(b,f.dynamic);f=d._attributeSet=
{};g(f,c["static"]);g(f,c.dynamic);d._hasCount="count"in d["static"]||"count"in d.dynamic||"elements"in d["static"]||"elements"in d.dynamic},framebufferFormat:function(d,f,c){d.texture?k(d.texture._texture.internalformat,f,"unsupported texture format for attachment"):k(d.renderbuffer._renderbuffer.format,c,"unsupported renderbuffer format for attachment")},guessCommand:G,texture2D:function(d,f,c){var k=f.width,n=f.height,g=f.channels;H(0<k&&k<=c.maxTextureSize&&0<n&&n<=c.maxTextureSize,"invalid texture shape");
33071===d.wrapS&&33071===d.wrapT||H(!(k&k-1)&&!!k&&!(n&n-1)&&!!n,"incompatible wrap mode for texture, both width and height must be power of 2");1===f.mipmask?1!==k&&1!==n&&H(9984!==d.minFilter&&9986!==d.minFilter&&9985!==d.minFilter&&9987!==d.minFilter,"min filter requires mipmap"):(H(!(k&k-1)&&!!k&&!(n&n-1)&&!!n,"texture must be a square power of 2 to support mipmapping"),H(f.mipmask===(k<<1)-1,"missing or incomplete mipmap data"));5126===f.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&
H(9728===d.minFilter&&9728===d.magFilter,"filter not supported, must enable oes_texture_float_linear"),H(!d.genMipmaps,"mipmap generation not supported with float textures"));var b=f.images;for(c=0;16>c;++c)if(b[c]){var x=k>>c,e=n>>c;H(f.mipmask&1<<c,"missing mipmap data");var N=b[c];H(N.width===x&&N.height===e,"invalid shape for mip images");H(N.format===f.format&&N.internalformat===f.internalformat&&N.type===f.type,"incompatible type for mip image");!N.compressed&&N.data&&(x=Math.ceil(u(N.type,
g)*x/N.unpackAlignment)*N.unpackAlignment,H(N.data.byteLength===x*e,"invalid data for image, buffer size is inconsistent with image format"))}else d.genMipmaps||H(0===(f.mipmask&1<<c),"extra mipmap data");f.compressed&&H(!d.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(d,f,c,k){var n=d.width,g=d.height,b=d.channels;H(0<n&&n<=k.maxTextureSize&&0<g&&g<=k.maxTextureSize,"invalid texture shape");H(n===g,"cube map must be square");H(33071===f.wrapS&&33071===
f.wrapT,"wrap mode not supported by cube map");for(k=0;k<c.length;++k){var x=c[k];H(x.width===n&&x.height===g,"inconsistent cube map face shape");f.genMipmaps&&(H(!x.compressed,"can not generate mipmap for compressed textures"),H(1===x.mipmask,"can not specify mipmaps and generate mipmaps"));for(var e=x.images,N=0;16>N;++N){var a=e[N];if(a){var t=n>>N,A=g>>N;H(x.mipmask&1<<N,"missing mipmap data");H(a.width===t&&a.height===A,"invalid shape for mip images");H(a.format===d.format&&a.internalformat===
d.internalformat&&a.type===d.type,"incompatible type for mip image");a.compressed||a.data&&H(a.data.byteLength===t*A*Math.max(u(a.type,b),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(Z,fa,Oa){fa.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(Z,fa,Oa){function b(g){return Array.prototype.slice.call(g)}
function ba(g){return b(g).join("")}var H=Z("./extend"),I=Z("./compiled-fns");fa.exports=function(){function g(){var k=[],n=[];return H(function(){k.push.apply(k,b(arguments))},{def:function(){var g="v"+f;f++;n.push(g);0<arguments.length&&(k.push(g,"="),k.push.apply(k,b(arguments)),k.push(";"));return g},toString:function(){return ba([0<n.length?"var "+n.join(",")+";":"",ba(k)])}})}function k(){function f(g,b){n(g,b,"=",k.def(g,b),";")}var k=g(),n=g(),I=k.toString,C=n.toString;return H(function(){k.apply(k,
b(arguments))},{def:k.def,entry:k,exit:n,save:f,set:function(n,g,b){f(n,g);k(n,g,"=",b,";")},toString:function(){return I()+C()}})}var n=0,f=0,B={},C=g(),G={};return{global:C,link:function(f){var k="$"+n,g=!1;"object"===typeof f&&f.name&&(k=f.name.replace(/ /g,"_"),g=!0);if(k in B)return k;B[k]=f;g||n++;return k},block:g,proc:function(f,n){function g(){var f="a"+b.length;b.push(f);return f}var b=[];n=n||0;for(var I=0;I<n;++I)g();var I=k(),x=I.toString;return G[f]=H(I,{arg:g,toString:function(){return ba(["function(",
b.join(),"){",x(),"}"])}})},scope:k,cond:function(){var f=ba(arguments),n=k(),g=k(),I=n.toString,C=g.toString;return H(n,{then:function(){n.apply(n,b(arguments));return this},"else":function(){g.apply(g,b(arguments));return this},toString:function(){var k=C();k&&(k="else{"+k+"}");return ba(["if(",f,"){",I(),"}",k])}})},compile:function(){var f=[],k=[];Object.keys(B).sort(function(f,k){var n="$"===f.charAt(0),g="$"===k.charAt(0);return n||g?n&&g?+f.slice(1)<+k.slice(1)?-1:1:n&&!g?-1:1:f.localeCompare(k)}).forEach(function(n){var g=
B[n];f.push(n);k.push(g)});for(var n=0,g=f.length-1;-1<g;g--)if("$"===f[g].charAt(0)){n=g;break}var b=['"use strict";',C,"return {"];Object.keys(G).forEach(function(f){b.push('"',f,'":',G[f].toString(),",")});b.push("}");var g=ba(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),n=f.slice(n).join(),x=I[n];if(!x)throw console.log("src code is:"),console.log(g),console.log("compiled values:",k),console.log("linked names:",f),console.log("Keys available:",Object.keys(I)),console.log("Key:",
n),console.log('"'+n+'": function('+f.join(", ")+") \n{\n"+g+"\n},"),Error("missing precompiled function with key: "+n);return x.apply(null,k)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(Z,fa,Oa){fa.exports={$0:function(b){var ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D;ba=b.attributes;H=b.current;I=b.framebuffer;g=b.gl;k=b.next;n=b.vao;f=k.blend_color;B=H.blend_color;C=k.blend_equation;G=H.blend_equation;U=k.blend_func;y=H.blend_func;t=k.colorMask;m=H.colorMask;aa=k.depth_range;
x=H.depth_range;M=k.polygonOffset_offset;u=H.polygonOffset_offset;O=k.sample_coverage;ha=H.sample_coverage;d=k.scissor_box;c=H.scissor_box;T=k.stencil_func;q=H.stencil_func;Y=k.stencil_opBack;h=H.stencil_opBack;w=k.stencil_opFront;V=H.stencil_opFront;E=k.viewport;D=H.viewport;return{poll:function(){var e,n,a,b,A,ba,Cc,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na;H.dirty=!1;n=k.blend_enable;a=k.cull_enable;b=k.depth_enable;A=k.dither;ba=k.polygonOffset_enable;Cc=k.sample_alpha;W=k.sample_enable;da=k.scissor_enable;
R=k.stencil_enable;P=k.cull_face;z=H.cull_face;l=k.depth_func;K=H.depth_func;J=k.depth_mask;Ea=H.depth_mask;oa=k.frontFace;p=H.frontFace;F=k.lineWidth;ca=H.lineWidth;Q=k.stencil_mask;na=H.stencil_mask;e=I.next;e!==I.cur&&(e?g.bindFramebuffer(36160,e.framebuffer):g.bindFramebuffer(36160,null),I.cur=e);n!==H.blend_enable&&(n?g.enable(3042):g.disable(3042),H.blend_enable=n);a!==H.cull_enable&&(a?g.enable(2884):g.disable(2884),H.cull_enable=a);b!==H.depth_enable&&(b?g.enable(2929):g.disable(2929),H.depth_enable=
b);A!==H.dither&&(A?g.enable(3024):g.disable(3024),H.dither=A);ba!==H.polygonOffset_enable&&(ba?g.enable(32823):g.disable(32823),H.polygonOffset_enable=ba);Cc!==H.sample_alpha&&(Cc?g.enable(32926):g.disable(32926),H.sample_alpha=Cc);W!==H.sample_enable&&(W?g.enable(32928):g.disable(32928),H.sample_enable=W);da!==H.scissor_enable&&(da?g.enable(3089):g.disable(3089),H.scissor_enable=da);R!==H.stencil_enable&&(R?g.enable(2960):g.disable(2960),H.stencil_enable=R);if(f[0]!==B[0]||f[1]!==B[1]||f[2]!==B[2]||
f[3]!==B[3])g.blendColor(f[0],f[1],f[2],f[3]),B[0]=f[0],B[1]=f[1],B[2]=f[2],B[3]=f[3];if(C[0]!==G[0]||C[1]!==G[1])g.blendEquationSeparate(C[0],C[1]),G[0]=C[0],G[1]=C[1];if(U[0]!==y[0]||U[1]!==y[1]||U[2]!==y[2]||U[3]!==y[3])g.blendFuncSeparate(U[0],U[1],U[2],U[3]),y[0]=U[0],y[1]=U[1],y[2]=U[2],y[3]=U[3];if(t[0]!==m[0]||t[1]!==m[1]||t[2]!==m[2]||t[3]!==m[3])g.colorMask(t[0],t[1],t[2],t[3]),m[0]=t[0],m[1]=t[1],m[2]=t[2],m[3]=t[3];P!==z&&(g.cullFace(P),H.cull_face=P);l!==K&&(g.depthFunc(l),H.depth_func=
l);J!==Ea&&(g.depthMask(J),H.depth_mask=J);if(aa[0]!==x[0]||aa[1]!==x[1])g.depthRange(aa[0],aa[1]),x[0]=aa[0],x[1]=aa[1];oa!==p&&(g.frontFace(oa),H.frontFace=oa);F!==ca&&(g.lineWidth(F),H.lineWidth=F);if(M[0]!==u[0]||M[1]!==u[1])g.polygonOffset(M[0],M[1]),u[0]=M[0],u[1]=M[1];if(O[0]!==ha[0]||O[1]!==ha[1])g.sampleCoverage(O[0],O[1]),ha[0]=O[0],ha[1]=O[1];if(d[0]!==c[0]||d[1]!==c[1]||d[2]!==c[2]||d[3]!==c[3])g.scissor(d[0],d[1],d[2],d[3]),c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3];if(T[0]!==q[0]||T[1]!==
q[1]||T[2]!==q[2])g.stencilFunc(T[0],T[1],T[2]),q[0]=T[0],q[1]=T[1],q[2]=T[2];Q!==na&&(g.stencilMask(Q),H.stencil_mask=Q);if(Y[0]!==h[0]||Y[1]!==h[1]||Y[2]!==h[2]||Y[3]!==h[3])g.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]),h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3];if(w[0]!==V[0]||w[1]!==V[1]||w[2]!==V[2]||w[3]!==V[3])g.stencilOpSeparate(w[0],w[1],w[2],w[3]),V[0]=w[0],V[1]=w[1],V[2]=w[2],V[3]=w[3];if(E[0]!==D[0]||E[1]!==D[1]||E[2]!==D[2]||E[3]!==D[3])g.viewport(E[0],E[1],E[2],E[3]),D[0]=E[0],D[1]=E[1],D[2]=
E[2],D[3]=E[3]},refresh:function(){var e,N,a,b,A,ka,Cc,W,da,R,P,z,l,K,J,Ea;H.dirty=!1;N=k.blend_enable;a=k.cull_enable;b=k.depth_enable;A=k.dither;ka=k.polygonOffset_enable;Cc=k.sample_alpha;W=k.sample_enable;da=k.scissor_enable;R=k.stencil_enable;P=k.cull_face;z=k.depth_func;l=k.depth_mask;K=k.frontFace;J=k.lineWidth;Ea=k.stencil_mask;(e=I.next)?g.bindFramebuffer(36160,e.framebuffer):g.bindFramebuffer(36160,null);I.cur=e;e=ba[0];e.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,e.buffer.buffer),
g.vertexAttribPointer(0,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[1];e.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(1,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[2];e.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(2,e.size,
e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[3];e.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(3,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[4];e.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(4,e.size,e.type,e.normalized,e.stride,
e.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[5];e.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(5,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[6];e.buffer?(g.enableVertexAttribArray(6),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(6,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(6),
g.vertexAttrib4f(6,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[7];e.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(7,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[8];e.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(8,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,e.x,e.y,e.z,
e.w),e.buffer=null);e=ba[9];e.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(9,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[10];e.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(10,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[11];
e.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(11,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[12];e.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(12,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[13];e.buffer?(g.enableVertexAttribArray(13),
g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(13,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[14];e.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,e.buffer.buffer),g.vertexAttribPointer(14,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,e.x,e.y,e.z,e.w),e.buffer=null);e=ba[15];e.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,
e.buffer.buffer),g.vertexAttribPointer(15,e.size,e.type,e.normalized,e.stride,e.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,e.x,e.y,e.z,e.w),e.buffer=null);n.currentVAO=null;n.setVAO(n.targetVAO);N?g.enable(3042):g.disable(3042);H.blend_enable=N;a?g.enable(2884):g.disable(2884);H.cull_enable=a;b?g.enable(2929):g.disable(2929);H.depth_enable=b;A?g.enable(3024):g.disable(3024);H.dither=A;ka?g.enable(32823):g.disable(32823);H.polygonOffset_enable=ka;Cc?g.enable(32926):g.disable(32926);
H.sample_alpha=Cc;W?g.enable(32928):g.disable(32928);H.sample_enable=W;da?g.enable(3089):g.disable(3089);H.scissor_enable=da;R?g.enable(2960):g.disable(2960);H.stencil_enable=R;g.blendColor(f[0],f[1],f[2],f[3]);B[0]=f[0];B[1]=f[1];B[2]=f[2];B[3]=f[3];g.blendEquationSeparate(C[0],C[1]);G[0]=C[0];G[1]=C[1];g.blendFuncSeparate(U[0],U[1],U[2],U[3]);y[0]=U[0];y[1]=U[1];y[2]=U[2];y[3]=U[3];g.colorMask(t[0],t[1],t[2],t[3]);m[0]=t[0];m[1]=t[1];m[2]=t[2];m[3]=t[3];g.cullFace(P);H.cull_face=P;g.depthFunc(z);
H.depth_func=z;g.depthMask(l);H.depth_mask=l;g.depthRange(aa[0],aa[1]);x[0]=aa[0];x[1]=aa[1];g.frontFace(K);H.frontFace=K;g.lineWidth(J);H.lineWidth=J;g.polygonOffset(M[0],M[1]);u[0]=M[0];u[1]=M[1];g.sampleCoverage(O[0],O[1]);ha[0]=O[0];ha[1]=O[1];g.scissor(d[0],d[1],d[2],d[3]);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];g.stencilFunc(T[0],T[1],T[2]);q[0]=T[0];q[1]=T[1];q[2]=T[2];g.stencilMask(Ea);H.stencil_mask=Ea;g.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]);h[0]=Y[0];h[1]=Y[1];h[2]=Y[2];h[3]=Y[3];g.stencilOpSeparate(w[0],
w[1],w[2],w[3]);V[0]=w[0];V[1]=w[1];V[2]=w[2];V[3]=w[3];g.viewport(E[0],E[1],E[2],E[3]);D[0]=E[0];D[1]=E[1];D[2]=E[2];D[3]=E[3]}}},$3:function(b,ba,H,I){var g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka;g=b.context;k=b.current;n=b.framebuffer;f=b.gl;B=b.next;C=b.shader;G=b.vao;U=B.blend_color;y=k.blend_color;t=B.blend_equation;m=k.blend_equation;aa=B.blend_func;x=k.blend_func;M=B.colorMask;u=k.colorMask;O=B.depth_range;ha=k.depth_range;d=B.polygonOffset_offset;c=k.polygonOffset_offset;
T=B.sample_coverage;q=k.sample_coverage;Y=B.scissor_box;h=k.scissor_box;w=B.stencil_func;V=k.stencil_func;E=B.stencil_opBack;D=k.stencil_opBack;e=B.stencil_opFront;N=k.stencil_opFront;a=B.viewport;ta=k.viewport;A={};ka={};return{batch:function(g,b){var A,R,P,z,l;A=n.next;A!==n.cur&&(A?f.bindFramebuffer(36160,A.framebuffer):f.bindFramebuffer(36160,null),n.cur=A);if(k.dirty){A=B.dither;A!==k.dither&&(A?f.enable(3024):f.disable(3024),k.dither=A);A=B.blend_enable;A!==k.blend_enable&&(A?f.enable(3042):
f.disable(3042),k.blend_enable=A);A=U[0];P=U[1];z=U[2];l=U[3];if(A!==y[0]||P!==y[1]||z!==y[2]||l!==y[3])f.blendColor(A,P,z,l),y[0]=A,y[1]=P,y[2]=z,y[3]=l;A=t[0];P=t[1];if(A!==m[0]||P!==m[1])f.blendEquationSeparate(A,P),m[0]=A,m[1]=P;A=aa[0];P=aa[1];z=aa[2];l=aa[3];if(A!==x[0]||P!==x[1]||z!==x[2]||l!==x[3])f.blendFuncSeparate(A,P,z,l),x[0]=A,x[1]=P,x[2]=z,x[3]=l;A=B.depth_enable;A!==k.depth_enable&&(A?f.enable(2929):f.disable(2929),k.depth_enable=A);A=B.depth_func;A!==k.depth_func&&(f.depthFunc(A),
k.depth_func=A);A=O[0];P=O[1];if(A!==ha[0]||P!==ha[1])f.depthRange(A,P),ha[0]=A,ha[1]=P;A=B.depth_mask;A!==k.depth_mask&&(f.depthMask(A),k.depth_mask=A);A=M[0];P=M[1];z=M[2];l=M[3];if(A!==u[0]||P!==u[1]||z!==u[2]||l!==u[3])f.colorMask(A,P,z,l),u[0]=A,u[1]=P,u[2]=z,u[3]=l;A=B.cull_enable;A!==k.cull_enable&&(A?f.enable(2884):f.disable(2884),k.cull_enable=A);A=B.cull_face;A!==k.cull_face&&(f.cullFace(A),k.cull_face=A);A=B.frontFace;A!==k.frontFace&&(f.frontFace(A),k.frontFace=A);A=B.lineWidth;A!==k.lineWidth&&
(f.lineWidth(A),k.lineWidth=A);A=B.polygonOffset_enable;A!==k.polygonOffset_enable&&(A?f.enable(32823):f.disable(32823),k.polygonOffset_enable=A);A=d[0];P=d[1];if(A!==c[0]||P!==c[1])f.polygonOffset(A,P),c[0]=A,c[1]=P;A=B.sample_alpha;A!==k.sample_alpha&&(A?f.enable(32926):f.disable(32926),k.sample_alpha=A);A=B.sample_enable;A!==k.sample_enable&&(A?f.enable(32928):f.disable(32928),k.sample_enable=A);A=T[0];P=T[1];if(A!==q[0]||P!==q[1])f.sampleCoverage(A,P),q[0]=A,q[1]=P;A=B.stencil_enable;A!==k.stencil_enable&&
(A?f.enable(2960):f.disable(2960),k.stencil_enable=A);A=B.stencil_mask;A!==k.stencil_mask&&(f.stencilMask(A),k.stencil_mask=A);A=w[0];P=w[1];z=w[2];if(A!==V[0]||P!==V[1]||z!==V[2])f.stencilFunc(A,P,z),V[0]=A,V[1]=P,V[2]=z;A=e[0];P=e[1];z=e[2];l=e[3];if(A!==N[0]||P!==N[1]||z!==N[2]||l!==N[3])f.stencilOpSeparate(A,P,z,l),N[0]=A,N[1]=P,N[2]=z,N[3]=l;A=E[0];P=E[1];z=E[2];l=E[3];if(A!==D[0]||P!==D[1]||z!==D[2]||l!==D[3])f.stencilOpSeparate(A,P,z,l),D[0]=A,D[1]=P,D[2]=z,D[3]=l;A=B.scissor_enable;A!==k.scissor_enable&&
(A?f.enable(3089):f.disable(3089),k.scissor_enable=A);A=Y[0];P=Y[1];z=Y[2];l=Y[3];if(A!==h[0]||P!==h[1]||z!==h[2]||l!==h[3])f.scissor(A,P,z,l),h[0]=A,h[1]=P,h[2]=z,h[3]=l;A=a[0];P=a[1];z=a[2];l=a[3];if(A!==ta[0]||P!==ta[1]||z!==ta[2]||l!==ta[3])f.viewport(A,P,z,l),ta[0]=A,ta[1]=P,ta[2]=z,ta[3]=l;k.dirty=!1}if(A=k.profile)R=performance.now(),ba.count+=b;P=C.program(C.vert,C.frag);f.useProgram(P.program);G.setVAO(null);z=P.id;(l=ka[z])||(l=ka[z]=I(P));l.call(this,g,b);G.setVAO(null);A&&(ba.cpuTime+=
performance.now()-R)},draw:function(g){var b,I,R,P,z;b=n.next;b!==n.cur&&(b?f.bindFramebuffer(36160,b.framebuffer):f.bindFramebuffer(36160,null),n.cur=b);if(k.dirty){b=B.dither;b!==k.dither&&(b?f.enable(3024):f.disable(3024),k.dither=b);b=B.blend_enable;b!==k.blend_enable&&(b?f.enable(3042):f.disable(3042),k.blend_enable=b);b=U[0];R=U[1];P=U[2];z=U[3];if(b!==y[0]||R!==y[1]||P!==y[2]||z!==y[3])f.blendColor(b,R,P,z),y[0]=b,y[1]=R,y[2]=P,y[3]=z;b=t[0];R=t[1];if(b!==m[0]||R!==m[1])f.blendEquationSeparate(b,
R),m[0]=b,m[1]=R;b=aa[0];R=aa[1];P=aa[2];z=aa[3];if(b!==x[0]||R!==x[1]||P!==x[2]||z!==x[3])f.blendFuncSeparate(b,R,P,z),x[0]=b,x[1]=R,x[2]=P,x[3]=z;b=B.depth_enable;b!==k.depth_enable&&(b?f.enable(2929):f.disable(2929),k.depth_enable=b);b=B.depth_func;b!==k.depth_func&&(f.depthFunc(b),k.depth_func=b);b=O[0];R=O[1];if(b!==ha[0]||R!==ha[1])f.depthRange(b,R),ha[0]=b,ha[1]=R;b=B.depth_mask;b!==k.depth_mask&&(f.depthMask(b),k.depth_mask=b);b=M[0];R=M[1];P=M[2];z=M[3];if(b!==u[0]||R!==u[1]||P!==u[2]||z!==
u[3])f.colorMask(b,R,P,z),u[0]=b,u[1]=R,u[2]=P,u[3]=z;b=B.cull_enable;b!==k.cull_enable&&(b?f.enable(2884):f.disable(2884),k.cull_enable=b);b=B.cull_face;b!==k.cull_face&&(f.cullFace(b),k.cull_face=b);b=B.frontFace;b!==k.frontFace&&(f.frontFace(b),k.frontFace=b);b=B.lineWidth;b!==k.lineWidth&&(f.lineWidth(b),k.lineWidth=b);b=B.polygonOffset_enable;b!==k.polygonOffset_enable&&(b?f.enable(32823):f.disable(32823),k.polygonOffset_enable=b);b=d[0];R=d[1];if(b!==c[0]||R!==c[1])f.polygonOffset(b,R),c[0]=
b,c[1]=R;b=B.sample_alpha;b!==k.sample_alpha&&(b?f.enable(32926):f.disable(32926),k.sample_alpha=b);b=B.sample_enable;b!==k.sample_enable&&(b?f.enable(32928):f.disable(32928),k.sample_enable=b);b=T[0];R=T[1];if(b!==q[0]||R!==q[1])f.sampleCoverage(b,R),q[0]=b,q[1]=R;b=B.stencil_enable;b!==k.stencil_enable&&(b?f.enable(2960):f.disable(2960),k.stencil_enable=b);b=B.stencil_mask;b!==k.stencil_mask&&(f.stencilMask(b),k.stencil_mask=b);b=w[0];R=w[1];P=w[2];if(b!==V[0]||R!==V[1]||P!==V[2])f.stencilFunc(b,
R,P),V[0]=b,V[1]=R,V[2]=P;b=e[0];R=e[1];P=e[2];z=e[3];if(b!==N[0]||R!==N[1]||P!==N[2]||z!==N[3])f.stencilOpSeparate(b,R,P,z),N[0]=b,N[1]=R,N[2]=P,N[3]=z;b=E[0];R=E[1];P=E[2];z=E[3];if(b!==D[0]||R!==D[1]||P!==D[2]||z!==D[3])f.stencilOpSeparate(b,R,P,z),D[0]=b,D[1]=R,D[2]=P,D[3]=z;b=B.scissor_enable;b!==k.scissor_enable&&(b?f.enable(3089):f.disable(3089),k.scissor_enable=b);b=Y[0];R=Y[1];P=Y[2];z=Y[3];if(b!==h[0]||R!==h[1]||P!==h[2]||z!==h[3])f.scissor(b,R,P,z),h[0]=b,h[1]=R,h[2]=P,h[3]=z;b=a[0];R=
a[1];P=a[2];z=a[3];if(b!==ta[0]||R!==ta[1]||P!==ta[2]||z!==ta[3])f.viewport(b,R,P,z),ta[0]=b,ta[1]=R,ta[2]=P,ta[3]=z;k.dirty=!1}if(b=k.profile)I=performance.now(),ba.count++;R=C.program(C.vert,C.frag);f.useProgram(R.program);G.setVAO(null);P=R.id;(z=A[P])||(z=A[P]=H(R));z.call(this,g);G.setVAO(null);b&&(ba.cpuTime+=performance.now()-I)},scope:function(a,e,d){var f,c;if(f=k.profile)c=performance.now(),ba.count++;e(g,a,d);f&&(ba.cpuTime+=performance.now()-c)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(b,
ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Cc,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,sd,Gb,ia,L,sa,Da,pa,wa,Ga){var ma,X,ua,Ja,Ba,lb,ea,zd,$b,Ha,ac,Rb,Z,Gd,yd,Vd,ze,xe,Nd,pe,ie,Ed,ce,ge,be,Ce,Ye,Ze,Hd,Ae,te,$d,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va;ma=b.attributes;X=b.context;ua=b.current;Ja=b.draw;Ba=b.elements;lb=b.framebuffer;ea=b.gl;zd=b.next;$b=
b.shader;Ha=b.uniforms;ac=b.vao;Rb=zd.blend_color;Z=ua.blend_color;Gd=zd.blend_equation;yd=ua.blend_equation;Vd=zd.blend_func;ze=ua.blend_func;xe=zd.colorMask;Nd=ua.colorMask;pe=zd.depth_range;ie=ua.depth_range;Ed=zd.polygonOffset_offset;ce=ua.polygonOffset_offset;ge=zd.sample_coverage;be=ua.sample_coverage;Ce=zd.scissor_box;Ye=ua.scissor_box;Ze=zd.stencil_func;Hd=ua.stencil_func;Ae=zd.stencil_opBack;te=ua.stencil_opBack;$d=zd.stencil_opFront;Wd=ua.stencil_opFront;Ad=zd.viewport;ld=ua.viewport;$c=
{};pd={};Lc=new Float32Array(16);od=new Float32Array(16);Fc=new Float32Array(16);ed=new Float32Array(16);Oc=new Float32Array(16);jd=new Float32Array(16);Ab=new Float32Array(16);Eb=new Float32Array(16);tc=new Float32Array(16);wb=new Float32Array(16);wc=new Float32Array(16);Bb=new Float32Array(16);Jc=new Float32Array(16);lc=new Float32Array(16);Gc=new Float32Array(16);Vc=new Float32Array(16);Uc=new Float32Array(16);Dc=new Float32Array(16);ec=new Float32Array(16);Hc=new Float32Array(16);oc=new Float32Array(16);
pc=new Float32Array(16);mc=new Float32Array(16);fc=new Float32Array(16);$a=new Float32Array(16);Ic=new Float32Array(16);xb=new Float32Array(16);cb=new Float32Array(16);Mb=new Float32Array(16);ab=new Float32Array(16);nb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,e){var d,c,h,q;d=lb.next;d!==lb.cur&&(d?ea.bindFramebuffer(36160,d.framebuffer):ea.bindFramebuffer(36160,null),lb.cur=d);if(ua.dirty){var b,N,w,A,E,D,T,H,O,ba,Y,ha,V,Ha,ta,ka,Rb,$b,La,Eb,Oc,Ab,Bb,Pa,Ce;b=xe[0];N=xe[1];
w=xe[2];A=xe[3];if(b!==Nd[0]||N!==Nd[1]||w!==Nd[2]||A!==Nd[3])ea.colorMask(b,N,w,A),Nd[0]=b,Nd[1]=N,Nd[2]=w,Nd[3]=A;E=zd.frontFace;E!==ua.frontFace&&(ea.frontFace(E),ua.frontFace=E);D=zd.polygonOffset_enable;D!==ua.polygonOffset_enable&&(D?ea.enable(32823):ea.disable(32823),ua.polygonOffset_enable=D);T=Ed[0];H=Ed[1];if(T!==ce[0]||H!==ce[1])ea.polygonOffset(T,H),ce[0]=T,ce[1]=H;O=zd.sample_alpha;O!==ua.sample_alpha&&(O?ea.enable(32926):ea.disable(32926),ua.sample_alpha=O);ba=zd.sample_enable;ba!==
ua.sample_enable&&(ba?ea.enable(32928):ea.disable(32928),ua.sample_enable=ba);Y=ge[0];ha=ge[1];if(Y!==be[0]||ha!==be[1])ea.sampleCoverage(Y,ha),be[0]=Y,be[1]=ha;V=zd.stencil_enable;V!==ua.stencil_enable&&(V?ea.enable(2960):ea.disable(2960),ua.stencil_enable=V);Ha=zd.stencil_mask;Ha!==ua.stencil_mask&&(ea.stencilMask(Ha),ua.stencil_mask=Ha);ta=Ze[0];ka=Ze[1];Rb=Ze[2];if(ta!==Hd[0]||ka!==Hd[1]||Rb!==Hd[2])ea.stencilFunc(ta,ka,Rb),Hd[0]=ta,Hd[1]=ka,Hd[2]=Rb;$b=$d[0];La=$d[1];Eb=$d[2];Oc=$d[3];if($b!==
Wd[0]||La!==Wd[1]||Eb!==Wd[2]||Oc!==Wd[3])ea.stencilOpSeparate($b,La,Eb,Oc),Wd[0]=$b,Wd[1]=La,Wd[2]=Eb,Wd[3]=Oc;Ab=Ae[0];Bb=Ae[1];Pa=Ae[2];Ce=Ae[3];if(Ab!==te[0]||Bb!==te[1]||Pa!==te[2]||Ce!==te[3])ea.stencilOpSeparate(Ab,Bb,Pa,Ce),te[0]=Ab,te[1]=Bb,te[2]=Pa,te[3]=Ce}ea.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;ea.disable(3042);ua.blend_enable=!1;ea.blendEquationSeparate(32774,32774);yd[0]=32774;yd[1]=32774;ea.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);
ua.cull_enable=!0;ea.cullFace(1029);ua.cull_face=1029;ea.enable(2929);ua.depth_enable=!0;ea.depthFunc(513);ua.depth_func=513;ea.depthMask(!0);ua.depth_mask=!0;ea.depthRange(0,1);ie[0]=0;ie[1]=1;ea.disable(3024);ua.dither=!1;ea.lineWidth(2);ua.lineWidth=2;ea.enable(3089);ua.scissor_enable=!0;c=ua.profile;ua.profile=!1;ea.useProgram(Cc.program);var Ra,wb,jd,Ma,lc,Ya,Fc,Vd,kb,Na,tc,Qa,tb,ub,Sa,mb,od,Gd,Gc,bb,Jc,ed,Xa,Lc,zb,Za,pe,wc,Vb,Pb,Ad,Qb,Vc;ac.setVAO(null);Ra=xa.location;wb=ma[Ra];wb.buffer||ea.enableVertexAttribArray(Ra);
if(wb.type!==I.dtype||4!==wb.size||wb.buffer!==I||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)ea.bindBuffer(34962,I.buffer),ea.vertexAttribPointer(Ra,4,I.dtype,!1,0,0),wb.type=I.dtype,wb.size=4,wb.buffer=I,wb.normalized=!1,wb.offset=0,wb.stride=0;jd=ya.location;Ma=ma[jd];Ma.buffer||ea.enableVertexAttribArray(jd);if(Ma.type!==g.dtype||4!==Ma.size||Ma.buffer!==g||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(jd,4,g.dtype,!1,0,0),Ma.type=g.dtype,
Ma.size=4,Ma.buffer=g,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;lc=ja.location;Ya=ma[lc];Ya.buffer||ea.enableVertexAttribArray(lc);if(Ya.type!==k.dtype||4!==Ya.size||Ya.buffer!==k||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(lc,4,k.dtype,!1,0,0),Ya.type=k.dtype,Ya.size=4,Ya.buffer=k,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Fc=Xb.location;Vd=ma[Fc];Vd.buffer||ea.enableVertexAttribArray(Fc);if(Vd.type!==n.dtype||4!==Vd.size||Vd.buffer!==n||!1!==
Vd.normalized||0!==Vd.offset||0!==Vd.stride)ea.bindBuffer(34962,n.buffer),ea.vertexAttribPointer(Fc,4,n.dtype,!1,0,0),Vd.type=n.dtype,Vd.size=4,Vd.buffer=n,Vd.normalized=!1,Vd.offset=0,Vd.stride=0;kb=Ta.location;Na=ma[kb];Na.buffer||ea.enableVertexAttribArray(kb);if(Na.type!==f.dtype||4!==Na.size||Na.buffer!==f||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ea.bindBuffer(34962,f.buffer),ea.vertexAttribPointer(kb,4,f.dtype,!1,0,0),Na.type=f.dtype,Na.size=4,Na.buffer=f,Na.normalized=!1,Na.offset=
0,Na.stride=0;tc=v.location;Qa=ma[tc];Qa.buffer||ea.enableVertexAttribArray(tc);if(Qa.type!==B.dtype||4!==Qa.size||Qa.buffer!==B||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)ea.bindBuffer(34962,B.buffer),ea.vertexAttribPointer(tc,4,B.dtype,!1,0,0),Qa.type=B.dtype,Qa.size=4,Qa.buffer=B,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;tb=r.location;ub=ma[tb];ub.buffer||ea.enableVertexAttribArray(tb);if(ub.type!==C.dtype||4!==ub.size||ub.buffer!==C||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)ea.bindBuffer(34962,
C.buffer),ea.vertexAttribPointer(tb,4,C.dtype,!1,0,0),ub.type=C.dtype,ub.size=4,ub.buffer=C,ub.normalized=!1,ub.offset=0,ub.stride=0;Sa=S.location;mb=ma[Sa];mb.buffer||ea.enableVertexAttribArray(Sa);if(mb.type!==G.dtype||4!==mb.size||mb.buffer!==G||!1!==mb.normalized||0!==mb.offset||0!==mb.stride)ea.bindBuffer(34962,G.buffer),ea.vertexAttribPointer(Sa,4,G.dtype,!1,0,0),mb.type=G.dtype,mb.size=4,mb.buffer=G,mb.normalized=!1,mb.offset=0,mb.stride=0;od=va.location;Gd=ma[od];Gd.buffer||ea.enableVertexAttribArray(od);
if(Gd.type!==U.dtype||4!==Gd.size||Gd.buffer!==U||!1!==Gd.normalized||0!==Gd.offset||0!==Gd.stride)ea.bindBuffer(34962,U.buffer),ea.vertexAttribPointer(od,4,U.dtype,!1,0,0),Gd.type=U.dtype,Gd.size=4,Gd.buffer=U,Gd.normalized=!1,Gd.offset=0,Gd.stride=0;Gc=Fa.location;bb=ma[Gc];bb.buffer||ea.enableVertexAttribArray(Gc);if(bb.type!==y.dtype||4!==bb.size||bb.buffer!==y||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ea.bindBuffer(34962,y.buffer),ea.vertexAttribPointer(Gc,4,y.dtype,!1,0,0),bb.type=y.dtype,
bb.size=4,bb.buffer=y,bb.normalized=!1,bb.offset=0,bb.stride=0;Jc=sd.location;ed=ma[Jc];ed.buffer||ea.enableVertexAttribArray(Jc);if(ed.type!==t.dtype||4!==ed.size||ed.buffer!==t||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)ea.bindBuffer(34962,t.buffer),ea.vertexAttribPointer(Jc,4,t.dtype,!1,0,0),ed.type=t.dtype,ed.size=4,ed.buffer=t,ed.normalized=!1,ed.offset=0,ed.stride=0;Xa=Gb.location;Lc=ma[Xa];Lc.buffer||ea.enableVertexAttribArray(Xa);if(Lc.type!==m.dtype||4!==Lc.size||Lc.buffer!==m||!1!==
Lc.normalized||0!==Lc.offset||0!==Lc.stride)ea.bindBuffer(34962,m.buffer),ea.vertexAttribPointer(Xa,4,m.dtype,!1,0,0),Lc.type=m.dtype,Lc.size=4,Lc.buffer=m,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;zb=ia.location;Za=ma[zb];Za.buffer||ea.enableVertexAttribArray(zb);if(Za.type!==aa.dtype||4!==Za.size||Za.buffer!==aa||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ea.bindBuffer(34962,aa.buffer),ea.vertexAttribPointer(zb,4,aa.dtype,!1,0,0),Za.type=aa.dtype,Za.size=4,Za.buffer=aa,Za.normalized=!1,Za.offset=
0,Za.stride=0;pe=L.location;wc=ma[pe];wc.buffer||ea.enableVertexAttribArray(pe);if(wc.type!==x.dtype||4!==wc.size||wc.buffer!==x||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)ea.bindBuffer(34962,x.buffer),ea.vertexAttribPointer(pe,4,x.dtype,!1,0,0),wc.type=x.dtype,wc.size=4,wc.buffer=x,wc.normalized=!1,wc.offset=0,wc.stride=0;Vb=sa.location;Pb=ma[Vb];Pb.buffer||ea.enableVertexAttribArray(Vb);if(Pb.type!==M.dtype||4!==Pb.size||Pb.buffer!==M||!1!==Pb.normalized||0!==Pb.offset||0!==Pb.stride)ea.bindBuffer(34962,
M.buffer),ea.vertexAttribPointer(Vb,4,M.dtype,!1,0,0),Pb.type=M.dtype,Pb.size=4,Pb.buffer=M,Pb.normalized=!1,Pb.offset=0,Pb.stride=0;Ad=da.location;Qb=ma[Ad];Qb.buffer||ea.enableVertexAttribArray(Ad);if(Qb.type!==u.dtype||4!==Qb.size||Qb.buffer!==u||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ea.bindBuffer(34962,u.buffer),ea.vertexAttribPointer(Ad,4,u.dtype,!1,0,0),Qb.type=u.dtype,Qb.size=4,Qb.buffer=u,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;ea.uniform1i(Da.location,W.bind());(Vc=Ja.elements)?
ea.bindBuffer(34963,Vc.buffer.buffer):ac.currentVAO&&(Vc=Ba.getElements(ac.currentVAO.elements))&&ea.bindBuffer(34963,Vc.buffer.buffer);for(h=0;h<e;++h){q=a[h];var Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,fa,Bd,hd,nf,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Oa,me,je,he,ue,ee;$c.height=q.viewportHeight;$c.width=q.viewportWidth;$c.x=q.viewportX;$c.y=q.viewportY;Ec=$c.x|0;rd=$c.y|0;Mc="width"in $c?$c.width|0:X.framebufferWidth-Ec;Wc="height"in
$c?$c.height|0:X.framebufferHeight-rd;td=X.viewportWidth;X.viewportWidth=Mc;nc=X.viewportHeight;X.viewportHeight=Wc;ea.viewport(Ec,rd,Mc,Wc);ld[0]=Ec;ld[1]=rd;ld[2]=Mc;ld[3]=Wc;pd.height=q.scissorHeight;pd.width=q.scissorWidth;pd.x=q.scissorX;pd.y=q.scissorY;vc=pd.x|0;hc=pd.y|0;db="width"in pd?pd.width|0:X.framebufferWidth-vc;rc="height"in pd?pd.height|0:X.framebufferHeight-hc;ea.scissor(vc,hc,db,rc);Ye[0]=vc;Ye[1]=hc;Ye[2]=db;Ye[3]=rc;Sb=q.dim0A;ea.uniformMatrix4fv(P.location,!1,Array.isArray(Sb)||
Sb instanceof Float32Array?Sb:(Uc[0]=Sb[0],Uc[1]=Sb[1],Uc[2]=Sb[2],Uc[3]=Sb[3],Uc[4]=Sb[4],Uc[5]=Sb[5],Uc[6]=Sb[6],Uc[7]=Sb[7],Uc[8]=Sb[8],Uc[9]=Sb[9],Uc[10]=Sb[10],Uc[11]=Sb[11],Uc[12]=Sb[12],Uc[13]=Sb[13],Uc[14]=Sb[14],Uc[15]=Sb[15],Uc));Wb=q.dim1A;ea.uniformMatrix4fv(J.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:(Dc[0]=Wb[0],Dc[1]=Wb[1],Dc[2]=Wb[2],Dc[3]=Wb[3],Dc[4]=Wb[4],Dc[5]=Wb[5],Dc[6]=Wb[6],Dc[7]=Wb[7],Dc[8]=Wb[8],Dc[9]=Wb[9],Dc[10]=Wb[10],Dc[11]=Wb[11],Dc[12]=Wb[12],Dc[13]=
Wb[13],Dc[14]=Wb[14],Dc[15]=Wb[15],Dc));dc=q.dim0B;ea.uniformMatrix4fv(z.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));ic=q.dim1B;ea.uniformMatrix4fv(Ea.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Hc[0]=ic[0],Hc[1]=ic[1],Hc[2]=ic[2],Hc[3]=ic[3],Hc[4]=ic[4],Hc[5]=
ic[5],Hc[6]=ic[6],Hc[7]=ic[7],Hc[8]=ic[8],Hc[9]=ic[9],Hc[10]=ic[10],Hc[11]=ic[11],Hc[12]=ic[12],Hc[13]=ic[13],Hc[14]=ic[14],Hc[15]=ic[15],Hc));xc=q.dim0C;ea.uniformMatrix4fv(l.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));Ac=q.dim1C;ea.uniformMatrix4fv(oa.location,!1,Array.isArray(Ac)||
Ac instanceof Float32Array?Ac:(pc[0]=Ac[0],pc[1]=Ac[1],pc[2]=Ac[2],pc[3]=Ac[3],pc[4]=Ac[4],pc[5]=Ac[5],pc[6]=Ac[6],pc[7]=Ac[7],pc[8]=Ac[8],pc[9]=Ac[9],pc[10]=Ac[10],pc[11]=Ac[11],pc[12]=Ac[12],pc[13]=Ac[13],pc[14]=Ac[14],pc[15]=Ac[15],pc));bd=q.dim0D;ea.uniformMatrix4fv(K.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:(mc[0]=bd[0],mc[1]=bd[1],mc[2]=bd[2],mc[3]=bd[3],mc[4]=bd[4],mc[5]=bd[5],mc[6]=bd[6],mc[7]=bd[7],mc[8]=bd[8],mc[9]=bd[9],mc[10]=bd[10],mc[11]=bd[11],mc[12]=bd[12],mc[13]=
bd[13],mc[14]=bd[14],mc[15]=bd[15],mc));Pc=q.dim1D;ea.uniformMatrix4fv(p.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(fc[0]=Pc[0],fc[1]=Pc[1],fc[2]=Pc[2],fc[3]=Pc[3],fc[4]=Pc[4],fc[5]=Pc[5],fc[6]=Pc[6],fc[7]=Pc[7],fc[8]=Pc[8],fc[9]=Pc[9],fc[10]=Pc[10],fc[11]=Pc[11],fc[12]=Pc[12],fc[13]=Pc[13],fc[14]=Pc[14],fc[15]=Pc[15],fc));Qc=q.loA;ea.uniformMatrix4fv(Aa.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:($a[0]=Qc[0],$a[1]=Qc[1],$a[2]=Qc[2],$a[3]=Qc[3],$a[4]=Qc[4],$a[5]=
Qc[5],$a[6]=Qc[6],$a[7]=Qc[7],$a[8]=Qc[8],$a[9]=Qc[9],$a[10]=Qc[10],$a[11]=Qc[11],$a[12]=Qc[12],$a[13]=Qc[13],$a[14]=Qc[14],$a[15]=Qc[15],$a));Rc=q.hiA;ea.uniformMatrix4fv(ca.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(Ic[0]=Rc[0],Ic[1]=Rc[1],Ic[2]=Rc[2],Ic[3]=Rc[3],Ic[4]=Rc[4],Ic[5]=Rc[5],Ic[6]=Rc[6],Ic[7]=Rc[7],Ic[8]=Rc[8],Ic[9]=Rc[9],Ic[10]=Rc[10],Ic[11]=Rc[11],Ic[12]=Rc[12],Ic[13]=Rc[13],Ic[14]=Rc[14],Ic[15]=Rc[15],Ic));Xc=q.loB;ea.uniformMatrix4fv(za.location,!1,Array.isArray(Xc)||
Xc instanceof Float32Array?Xc:(xb[0]=Xc[0],xb[1]=Xc[1],xb[2]=Xc[2],xb[3]=Xc[3],xb[4]=Xc[4],xb[5]=Xc[5],xb[6]=Xc[6],xb[7]=Xc[7],xb[8]=Xc[8],xb[9]=Xc[9],xb[10]=Xc[10],xb[11]=Xc[11],xb[12]=Xc[12],xb[13]=Xc[13],xb[14]=Xc[14],xb[15]=Xc[15],xb));kd=q.hiB;ea.uniformMatrix4fv(Q.location,!1,Array.isArray(kd)||kd instanceof Float32Array?kd:(cb[0]=kd[0],cb[1]=kd[1],cb[2]=kd[2],cb[3]=kd[3],cb[4]=kd[4],cb[5]=kd[5],cb[6]=kd[6],cb[7]=kd[7],cb[8]=kd[8],cb[9]=kd[9],cb[10]=kd[10],cb[11]=kd[11],cb[12]=kd[12],cb[13]=
kd[13],cb[14]=kd[14],cb[15]=kd[15],cb));cd=q.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(Mb[0]=cd[0],Mb[1]=cd[1],Mb[2]=cd[2],Mb[3]=cd[3],Mb[4]=cd[4],Mb[5]=cd[5],Mb[6]=cd[6],Mb[7]=cd[7],Mb[8]=cd[8],Mb[9]=cd[9],Mb[10]=cd[10],Mb[11]=cd[11],Mb[12]=cd[12],Mb[13]=cd[13],Mb[14]=cd[14],Mb[15]=cd[15],Mb));Yc=q.hiC;ea.uniformMatrix4fv(na.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(ab[0]=Yc[0],ab[1]=Yc[1],ab[2]=Yc[2],ab[3]=Yc[3],ab[4]=Yc[4],ab[5]=
Yc[5],ab[6]=Yc[6],ab[7]=Yc[7],ab[8]=Yc[8],ab[9]=Yc[9],ab[10]=Yc[10],ab[11]=Yc[11],ab[12]=Yc[12],ab[13]=Yc[13],ab[14]=Yc[14],ab[15]=Yc[15],ab));kc=q.loD;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(nb[0]=kc[0],nb[1]=kc[1],nb[2]=kc[2],nb[3]=kc[3],nb[4]=kc[4],nb[5]=kc[5],nb[6]=kc[6],nb[7]=kc[7],nb[8]=kc[8],nb[9]=kc[9],nb[10]=kc[10],nb[11]=kc[11],nb[12]=kc[12],nb[13]=kc[13],nb[14]=kc[14],nb[15]=kc[15],nb));cc=q.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(cc)||
cc instanceof Float32Array?cc:(Va[0]=cc[0],Va[1]=cc[1],Va[2]=cc[2],Va[3]=cc[3],Va[4]=cc[4],Va[5]=cc[5],Va[6]=cc[6],Va[7]=cc[7],Va[8]=cc[8],Va[9]=cc[9],Va[10]=cc[10],Va[11]=cc[11],Va[12]=cc[12],Va[13]=cc[13],Va[14]=cc[14],Va[15]=cc[15],Va));Zc=q.resolution;Tc=Zc[0];yc=Zc[1];h&&dd===Tc&&gd===yc||(dd=Tc,gd=yc,ea.uniform2f(pa.location,Tc,yc));xd=q.viewBoxPos;fa=xd[0];hd=xd[1];h&&Bd===fa&&nf===hd||(Bd=fa,nf=hd,ea.uniform2f(wa.location,fa,hd));Od=q.viewBoxSize;Yd=Od[0];Pd=Od[1];h&&ke===Yd&&Kd===Pd||(ke=
Yd,Kd=Pd,ea.uniform2f(Ga.location,Yd,Pd));Id=q.maskHeight;h&&nd===Id||(nd=Id,ea.uniform1f(la.location,Id));Sc=q.drwLayer;h&&ud===Sc||(ud=Sc,ea.uniform1f(F.location,Sc));qd=q.contextColor;id=qd[0];Dd=qd[1];qe=qd[2];Oa=qd[3];h&&wd===id&&Fd===Dd&&le===qe&&me===Oa||(wd=id,Fd=Dd,le=qe,me=Oa,ea.uniform4f(R.location,id,Dd,qe,Oa));(je=q.maskTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);he=je._texture;ea.uniform1i(qa.location,he.bind());ue=q.offset;if(ee=q.count)Vc?ea.drawElements(1,ee,Vc.type,
ue<<(Vc.type-5121>>1)):ea.drawArrays(1,ue,ee),X.viewportWidth=td,X.viewportHeight=nc,he.unbind()}W.unbind();ua.dirty=!0;ac.setVAO(null);ua.profile=c},draw:function(a){var e,d,c,h,q,b;e=lb.next;e!==lb.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),lb.cur=e);if(ua.dirty){e=xe[0];b=xe[1];d=xe[2];c=xe[3];if(e!==Nd[0]||b!==Nd[1]||d!==Nd[2]||c!==Nd[3])ea.colorMask(e,b,d,c),Nd[0]=e,Nd[1]=b,Nd[2]=d,Nd[3]=c;e=zd.frontFace;e!==ua.frontFace&&(ea.frontFace(e),ua.frontFace=e);e=
zd.polygonOffset_enable;e!==ua.polygonOffset_enable&&(e?ea.enable(32823):ea.disable(32823),ua.polygonOffset_enable=e);e=Ed[0];b=Ed[1];if(e!==ce[0]||b!==ce[1])ea.polygonOffset(e,b),ce[0]=e,ce[1]=b;e=zd.sample_alpha;e!==ua.sample_alpha&&(e?ea.enable(32926):ea.disable(32926),ua.sample_alpha=e);e=zd.sample_enable;e!==ua.sample_enable&&(e?ea.enable(32928):ea.disable(32928),ua.sample_enable=e);e=ge[0];b=ge[1];if(e!==be[0]||b!==be[1])ea.sampleCoverage(e,b),be[0]=e,be[1]=b;e=zd.stencil_enable;e!==ua.stencil_enable&&
(e?ea.enable(2960):ea.disable(2960),ua.stencil_enable=e);e=zd.stencil_mask;e!==ua.stencil_mask&&(ea.stencilMask(e),ua.stencil_mask=e);e=Ze[0];b=Ze[1];d=Ze[2];if(e!==Hd[0]||b!==Hd[1]||d!==Hd[2])ea.stencilFunc(e,b,d),Hd[0]=e,Hd[1]=b,Hd[2]=d;e=$d[0];b=$d[1];d=$d[2];c=$d[3];if(e!==Wd[0]||b!==Wd[1]||d!==Wd[2]||c!==Wd[3])ea.stencilOpSeparate(e,b,d,c),Wd[0]=e,Wd[1]=b,Wd[2]=d,Wd[3]=c;e=Ae[0];b=Ae[1];d=Ae[2];c=Ae[3];if(e!==te[0]||b!==te[1]||d!==te[2]||c!==te[3])ea.stencilOpSeparate(e,b,d,c),te[0]=e,te[1]=
b,te[2]=d,te[3]=c}$c.height=a.viewportHeight;$c.width=a.viewportWidth;$c.x=a.viewportX;$c.y=a.viewportY;d=$c.x|0;c=$c.y|0;h="width"in $c?$c.width|0:X.framebufferWidth-d;q="height"in $c?$c.height|0:X.framebufferHeight-c;e=X.viewportWidth;X.viewportWidth=h;b=X.viewportHeight;X.viewportHeight=q;ea.viewport(d,c,h,q);ld[0]=d;ld[1]=c;ld[2]=h;ld[3]=q;ea.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;ea.disable(3042);ua.blend_enable=!1;ea.blendEquationSeparate(32774,32774);yd[0]=32774;yd[1]=32774;ea.blendFuncSeparate(770,
771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);ua.cull_enable=!0;ea.cullFace(1029);ua.cull_face=1029;ea.enable(2929);ua.depth_enable=!0;ea.depthFunc(513);ua.depth_func=513;ea.depthMask(!0);ua.depth_mask=!0;ea.depthRange(0,1);ie[0]=0;ie[1]=1;ea.disable(3024);ua.dither=!1;ea.lineWidth(2);ua.lineWidth=2;pd.height=a.scissorHeight;pd.width=a.scissorWidth;pd.x=a.scissorX;pd.y=a.scissorY;d=pd.x|0;c=pd.y|0;h="width"in pd?pd.width|0:X.framebufferWidth-d;q="height"in pd?pd.height|0:X.framebufferHeight-
c;ea.scissor(d,c,h,q);Ye[0]=d;Ye[1]=c;Ye[2]=h;Ye[3]=q;ea.enable(3089);ua.scissor_enable=!0;d=ua.profile;ua.profile=!1;ea.useProgram(H.program);ac.setVAO(null);c=xa.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==I.dtype||4!==h.size||h.buffer!==I||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,I.buffer),ea.vertexAttribPointer(c,4,I.dtype,!1,0,0),h.type=I.dtype,h.size=4,h.buffer=I,h.normalized=!1,h.offset=0,h.stride=0;c=ya.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);
if(h.type!==g.dtype||4!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(c,4,g.dtype,!1,0,0),h.type=g.dtype,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;c=ja.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==k.dtype||4!==h.size||h.buffer!==k||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(c,4,k.dtype,!1,0,0),h.type=k.dtype,h.size=4,h.buffer=k,
h.normalized=!1,h.offset=0,h.stride=0;c=Xb.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,n.buffer),ea.vertexAttribPointer(c,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,h.normalized=!1,h.offset=0,h.stride=0;c=Ta.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==f.dtype||4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,
f.buffer),ea.vertexAttribPointer(c,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;c=v.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==B.dtype||4!==h.size||h.buffer!==B||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,B.buffer),ea.vertexAttribPointer(c,4,B.dtype,!1,0,0),h.type=B.dtype,h.size=4,h.buffer=B,h.normalized=!1,h.offset=0,h.stride=0;c=r.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==C.dtype||
4!==h.size||h.buffer!==C||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,C.buffer),ea.vertexAttribPointer(c,4,C.dtype,!1,0,0),h.type=C.dtype,h.size=4,h.buffer=C,h.normalized=!1,h.offset=0,h.stride=0;c=S.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==G.dtype||4!==h.size||h.buffer!==G||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,G.buffer),ea.vertexAttribPointer(c,4,G.dtype,!1,0,0),h.type=G.dtype,h.size=4,h.buffer=G,h.normalized=!1,h.offset=
0,h.stride=0;c=va.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==U.dtype||4!==h.size||h.buffer!==U||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,U.buffer),ea.vertexAttribPointer(c,4,U.dtype,!1,0,0),h.type=U.dtype,h.size=4,h.buffer=U,h.normalized=!1,h.offset=0,h.stride=0;c=Fa.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==y.dtype||4!==h.size||h.buffer!==y||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,y.buffer),ea.vertexAttribPointer(c,
4,y.dtype,!1,0,0),h.type=y.dtype,h.size=4,h.buffer=y,h.normalized=!1,h.offset=0,h.stride=0;c=sd.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==t.dtype||4!==h.size||h.buffer!==t||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,t.buffer),ea.vertexAttribPointer(c,4,t.dtype,!1,0,0),h.type=t.dtype,h.size=4,h.buffer=t,h.normalized=!1,h.offset=0,h.stride=0;c=Gb.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==m.dtype||4!==h.size||h.buffer!==m||
!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,m.buffer),ea.vertexAttribPointer(c,4,m.dtype,!1,0,0),h.type=m.dtype,h.size=4,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;c=ia.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==aa.dtype||4!==h.size||h.buffer!==aa||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,aa.buffer),ea.vertexAttribPointer(c,4,aa.dtype,!1,0,0),h.type=aa.dtype,h.size=4,h.buffer=aa,h.normalized=!1,h.offset=0,h.stride=0;c=
L.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==x.dtype||4!==h.size||h.buffer!==x||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,x.buffer),ea.vertexAttribPointer(c,4,x.dtype,!1,0,0),h.type=x.dtype,h.size=4,h.buffer=x,h.normalized=!1,h.offset=0,h.stride=0;c=sa.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==M.dtype||4!==h.size||h.buffer!==M||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,M.buffer),ea.vertexAttribPointer(c,
4,M.dtype,!1,0,0),h.type=M.dtype,h.size=4,h.buffer=M,h.normalized=!1,h.offset=0,h.stride=0;c=da.location;h=ma[c];h.buffer||ea.enableVertexAttribArray(c);if(h.type!==u.dtype||4!==h.size||h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)ea.bindBuffer(34962,u.buffer),ea.vertexAttribPointer(c,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;c=a.dim0A;ea.uniformMatrix4fv(P.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Lc[0]=c[0],Lc[1]=c[1],
Lc[2]=c[2],Lc[3]=c[3],Lc[4]=c[4],Lc[5]=c[5],Lc[6]=c[6],Lc[7]=c[7],Lc[8]=c[8],Lc[9]=c[9],Lc[10]=c[10],Lc[11]=c[11],Lc[12]=c[12],Lc[13]=c[13],Lc[14]=c[14],Lc[15]=c[15],Lc));c=a.dim1A;ea.uniformMatrix4fv(J.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(od[0]=c[0],od[1]=c[1],od[2]=c[2],od[3]=c[3],od[4]=c[4],od[5]=c[5],od[6]=c[6],od[7]=c[7],od[8]=c[8],od[9]=c[9],od[10]=c[10],od[11]=c[11],od[12]=c[12],od[13]=c[13],od[14]=c[14],od[15]=c[15],od));c=a.dim0B;ea.uniformMatrix4fv(z.location,!1,Array.isArray(c)||
c instanceof Float32Array?c:(Fc[0]=c[0],Fc[1]=c[1],Fc[2]=c[2],Fc[3]=c[3],Fc[4]=c[4],Fc[5]=c[5],Fc[6]=c[6],Fc[7]=c[7],Fc[8]=c[8],Fc[9]=c[9],Fc[10]=c[10],Fc[11]=c[11],Fc[12]=c[12],Fc[13]=c[13],Fc[14]=c[14],Fc[15]=c[15],Fc));c=a.dim1B;ea.uniformMatrix4fv(Ea.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(ed[0]=c[0],ed[1]=c[1],ed[2]=c[2],ed[3]=c[3],ed[4]=c[4],ed[5]=c[5],ed[6]=c[6],ed[7]=c[7],ed[8]=c[8],ed[9]=c[9],ed[10]=c[10],ed[11]=c[11],ed[12]=c[12],ed[13]=c[13],ed[14]=c[14],ed[15]=c[15],
ed));c=a.dim0C;ea.uniformMatrix4fv(l.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Oc[0]=c[0],Oc[1]=c[1],Oc[2]=c[2],Oc[3]=c[3],Oc[4]=c[4],Oc[5]=c[5],Oc[6]=c[6],Oc[7]=c[7],Oc[8]=c[8],Oc[9]=c[9],Oc[10]=c[10],Oc[11]=c[11],Oc[12]=c[12],Oc[13]=c[13],Oc[14]=c[14],Oc[15]=c[15],Oc));c=a.dim1C;ea.uniformMatrix4fv(oa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(jd[0]=c[0],jd[1]=c[1],jd[2]=c[2],jd[3]=c[3],jd[4]=c[4],jd[5]=c[5],jd[6]=c[6],jd[7]=c[7],jd[8]=c[8],jd[9]=c[9],jd[10]=c[10],
jd[11]=c[11],jd[12]=c[12],jd[13]=c[13],jd[14]=c[14],jd[15]=c[15],jd));c=a.dim0D;ea.uniformMatrix4fv(K.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Ab[0]=c[0],Ab[1]=c[1],Ab[2]=c[2],Ab[3]=c[3],Ab[4]=c[4],Ab[5]=c[5],Ab[6]=c[6],Ab[7]=c[7],Ab[8]=c[8],Ab[9]=c[9],Ab[10]=c[10],Ab[11]=c[11],Ab[12]=c[12],Ab[13]=c[13],Ab[14]=c[14],Ab[15]=c[15],Ab));c=a.dim1D;ea.uniformMatrix4fv(p.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Eb[0]=c[0],Eb[1]=c[1],Eb[2]=c[2],Eb[3]=c[3],Eb[4]=c[4],Eb[5]=
c[5],Eb[6]=c[6],Eb[7]=c[7],Eb[8]=c[8],Eb[9]=c[9],Eb[10]=c[10],Eb[11]=c[11],Eb[12]=c[12],Eb[13]=c[13],Eb[14]=c[14],Eb[15]=c[15],Eb));c=a.loA;ea.uniformMatrix4fv(Aa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(tc[0]=c[0],tc[1]=c[1],tc[2]=c[2],tc[3]=c[3],tc[4]=c[4],tc[5]=c[5],tc[6]=c[6],tc[7]=c[7],tc[8]=c[8],tc[9]=c[9],tc[10]=c[10],tc[11]=c[11],tc[12]=c[12],tc[13]=c[13],tc[14]=c[14],tc[15]=c[15],tc));c=a.hiA;ea.uniformMatrix4fv(ca.location,!1,Array.isArray(c)||c instanceof Float32Array?
c:(wb[0]=c[0],wb[1]=c[1],wb[2]=c[2],wb[3]=c[3],wb[4]=c[4],wb[5]=c[5],wb[6]=c[6],wb[7]=c[7],wb[8]=c[8],wb[9]=c[9],wb[10]=c[10],wb[11]=c[11],wb[12]=c[12],wb[13]=c[13],wb[14]=c[14],wb[15]=c[15],wb));c=a.loB;ea.uniformMatrix4fv(za.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(wc[0]=c[0],wc[1]=c[1],wc[2]=c[2],wc[3]=c[3],wc[4]=c[4],wc[5]=c[5],wc[6]=c[6],wc[7]=c[7],wc[8]=c[8],wc[9]=c[9],wc[10]=c[10],wc[11]=c[11],wc[12]=c[12],wc[13]=c[13],wc[14]=c[14],wc[15]=c[15],wc));c=a.hiB;ea.uniformMatrix4fv(Q.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(Bb[0]=c[0],Bb[1]=c[1],Bb[2]=c[2],Bb[3]=c[3],Bb[4]=c[4],Bb[5]=c[5],Bb[6]=c[6],Bb[7]=c[7],Bb[8]=c[8],Bb[9]=c[9],Bb[10]=c[10],Bb[11]=c[11],Bb[12]=c[12],Bb[13]=c[13],Bb[14]=c[14],Bb[15]=c[15],Bb));c=a.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Jc[0]=c[0],Jc[1]=c[1],Jc[2]=c[2],Jc[3]=c[3],Jc[4]=c[4],Jc[5]=c[5],Jc[6]=c[6],Jc[7]=c[7],Jc[8]=c[8],Jc[9]=c[9],Jc[10]=c[10],Jc[11]=c[11],Jc[12]=c[12],Jc[13]=c[13],Jc[14]=
c[14],Jc[15]=c[15],Jc));c=a.hiC;ea.uniformMatrix4fv(na.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(lc[0]=c[0],lc[1]=c[1],lc[2]=c[2],lc[3]=c[3],lc[4]=c[4],lc[5]=c[5],lc[6]=c[6],lc[7]=c[7],lc[8]=c[8],lc[9]=c[9],lc[10]=c[10],lc[11]=c[11],lc[12]=c[12],lc[13]=c[13],lc[14]=c[14],lc[15]=c[15],lc));c=a.loD;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Gc[0]=c[0],Gc[1]=c[1],Gc[2]=c[2],Gc[3]=c[3],Gc[4]=c[4],Gc[5]=c[5],Gc[6]=c[6],Gc[7]=c[7],Gc[8]=c[8],Gc[9]=
c[9],Gc[10]=c[10],Gc[11]=c[11],Gc[12]=c[12],Gc[13]=c[13],Gc[14]=c[14],Gc[15]=c[15],Gc));c=a.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Vc[0]=c[0],Vc[1]=c[1],Vc[2]=c[2],Vc[3]=c[3],Vc[4]=c[4],Vc[5]=c[5],Vc[6]=c[6],Vc[7]=c[7],Vc[8]=c[8],Vc[9]=c[9],Vc[10]=c[10],Vc[11]=c[11],Vc[12]=c[12],Vc[13]=c[13],Vc[14]=c[14],Vc[15]=c[15],Vc));c=a.resolution;ea.uniform2f(pa.location,c[0],c[1]);c=a.viewBoxPos;ea.uniform2f(wa.location,c[0],c[1]);c=a.viewBoxSize;ea.uniform2f(Ga.location,
c[0],c[1]);ea.uniform1f(la.location,a.maskHeight);ea.uniform1f(F.location,a.drwLayer);c=a.contextColor;ea.uniform4f(R.location,c[0],c[1],c[2],c[3]);(c=a.maskTexture)&&"framebuffer"===c._reglType&&(c=c.color[0]);c=c._texture;ea.uniform1i(qa.location,c.bind());ea.uniform1i(Da.location,O.bind());(h=Ja.elements)?ea.bindBuffer(34963,h.buffer.buffer):ac.currentVAO&&(h=Ba.getElements(ac.currentVAO.elements))&&ea.bindBuffer(34963,h.buffer.buffer);q=a.offset;if(a=a.count)h?ea.drawElements(1,a,h.type,q<<(h.type-
5121>>1)):ea.drawArrays(1,q,a),ua.dirty=!0,ac.setVAO(null),X.viewportWidth=e,X.viewportHeight=b,ua.profile=d,c.unbind(),O.unbind()},scope:function(l,p,r){var v,b,L,ja,S,sa,ya,Da,P,F,Q,Xb,z,ga,pa,ia,R,ma,J,va,K,ca,wa,Ga,ea,Ea,ra,H,O,za,la,ba,W,Ta,da,xa,Fa,qa,Ca,oa,na,Gb,Aa,sd,Ba,lb,Cc,$a,ec,Eb,Oc,Ab,fc,oc,wb,Bb,be,Ae,mc,ac,$d,pc,cb,ab,Va,Hc,Z,Ze,jd,lc,nb,Fc,te,ed,Hd,Lc,tc,xb,wc,yd,od,Gc,Dc,Jc,Nd,ld,Wd,Mb,Ed,Ic,Ye,Uc,Qf,Vc,ge,xe,ze,ce,ie,fa,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,Oa,le,Ne,me,je,he,ue,ee,ne,
Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,Ve,Ud,ae,We,hf,mf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=
l.viewportHeight;$c.width=l.viewportWidth;$c.x=l.viewportX;$c.y=l.viewportY;v=$c.x|0;b=$c.y|0;L="width"in $c?$c.width|0:X.framebufferWidth-v;ja="height"in $c?$c.height|0:X.framebufferHeight-b;S=X.viewportWidth;X.viewportWidth=L;sa=X.viewportHeight;X.viewportHeight=ja;ya=Ad[0];Ad[0]=v;Da=Ad[1];Ad[1]=b;P=Ad[2];Ad[2]=L;F=Ad[3];Ad[3]=ja;Q=Rb[0];Rb[0]=0;Xb=Rb[1];Rb[1]=0;z=Rb[2];Rb[2]=0;ga=Rb[3];Rb[3]=0;pa=zd.blend_enable;zd.blend_enable=!1;ia=Gd[0];Gd[0]=32774;R=Gd[1];Gd[1]=32774;ma=Vd[0];Vd[0]=770;J=
Vd[1];Vd[1]=771;va=Vd[2];Vd[2]=1;K=Vd[3];Vd[3]=1;ca=zd.cull_enable;zd.cull_enable=!0;wa=zd.cull_face;zd.cull_face=1029;Ga=zd.depth_enable;zd.depth_enable=!0;ea=zd.depth_func;zd.depth_func=513;Ea=zd.depth_mask;zd.depth_mask=!0;ra=pe[0];pe[0]=0;H=pe[1];pe[1]=1;O=zd.dither;zd.dither=!1;za=zd.lineWidth;zd.lineWidth=2;pd.height=l.scissorHeight;pd.width=l.scissorWidth;pd.x=l.scissorX;pd.y=l.scissorY;la=pd.x|0;ba=pd.y|0;W="width"in pd?pd.width|0:X.framebufferWidth-la;Ta="height"in pd?pd.height|0:X.framebufferHeight-
ba;da=Ce[0];Ce[0]=la;xa=Ce[1];Ce[1]=ba;Fa=Ce[2];Ce[2]=W;qa=Ce[3];Ce[3]=Ta;Ca=zd.scissor_enable;zd.scissor_enable=!0;oa=ua.profile;ua.profile=!1;na=l.offset;Gb=Ja.offset;Ja.offset=na;Aa=l.count;sd=Ja.count;Ja.count=Aa;Ba=Ja.primitive;Ja.primitive=1;lb=l.contextColor;Cc=Ha[24];Ha[24]=lb;$a=l.dim0A;ec=Ha[3];Ha[3]=$a;Eb=l.dim0B;Oc=Ha[5];Ha[5]=Eb;Ab=l.dim0C;fc=Ha[7];Ha[7]=Ab;oc=l.dim0D;wb=Ha[9];Ha[9]=oc;Bb=l.dim1A;be=Ha[4];Ha[4]=Bb;Ae=l.dim1B;mc=Ha[6];Ha[6]=Ae;ac=l.dim1C;$d=Ha[8];Ha[8]=ac;pc=l.dim1D;cb=
Ha[10];Ha[10]=pc;ab=l.drwLayer;Va=Ha[23];Ha[23]=ab;Hc=l.hiA;Z=Ha[12];Ha[12]=Hc;Ze=l.hiB;jd=Ha[14];Ha[14]=Ze;lc=l.hiC;nb=Ha[16];Ha[16]=lc;Fc=l.hiD;te=Ha[18];Ha[18]=Fc;ed=l.loA;Hd=Ha[11];Ha[11]=ed;Lc=l.loB;tc=Ha[13];Ha[13]=Lc;xb=l.loC;wc=Ha[15];Ha[15]=xb;yd=l.loD;od=Ha[17];Ha[17]=yd;Gc=l.maskHeight;Dc=Ha[22];Ha[22]=Gc;Jc=l.maskTexture;Nd=Ha[25];Ha[25]=Jc;ld=Ha[26];Ha[26]=ha;Wd=l.resolution;Mb=Ha[19];Ha[19]=Wd;Ed=l.viewBoxPos;Ic=Ha[20];Ha[20]=Ed;Ye=l.viewBoxSize;Uc=Ha[21];Ha[21]=Ye;Qf=d.buffer;d.buffer=
u;Vc=d.divisor;d.divisor=0;ge=d.normalized;d.normalized=!1;xe=d.offset;d.offset=0;ze=d.size;d.size=0;ce=d.state;d.state=1;ie=d.stride;d.stride=0;fa=d.type;d.type=u.dtype;Pd=d.w;d.w=0;Kd=d.x;d.x=0;Id=d.y;d.y=0;nd=d.z;d.z=0;Sc=c.buffer;c.buffer=I;ud=c.divisor;c.divisor=0;qd=c.normalized;c.normalized=!1;id=c.offset;c.offset=0;wd=c.size;c.size=0;Dd=c.state;c.state=1;Fd=c.stride;c.stride=0;Oa=c.type;c.type=I.dtype;le=c.w;c.w=0;Ne=c.x;c.x=0;me=c.y;c.y=0;je=c.z;c.z=0;he=T.buffer;T.buffer=g;ue=T.divisor;
T.divisor=0;ee=T.normalized;T.normalized=!1;ne=T.offset;T.offset=0;Nc=T.size;T.size=0;fd=T.state;T.state=1;ve=T.stride;T.stride=0;re=T.type;T.type=g.dtype;Ld=T.w;T.w=0;Qd=T.x;T.x=0;Rd=T.y;T.y=0;Sd=T.z;T.z=0;oe=q.buffer;q.buffer=k;ye=q.divisor;q.divisor=0;Be=q.normalized;q.normalized=!1;se=q.offset;q.offset=0;Re=q.size;q.size=0;Se=q.state;q.state=1;Oe=q.stride;q.stride=0;we=q.type;q.type=k.dtype;Ge=q.w;q.w=0;Ie=q.x;q.x=0;Je=q.y;q.y=0;Ke=q.z;q.z=0;He=Y.buffer;Y.buffer=n;Md=Y.divisor;Y.divisor=0;Zd=
Y.normalized;Y.normalized=!1;de=Y.offset;Y.offset=0;fe=Y.size;Y.size=0;Le=Y.state;Y.state=1;Jd=Y.stride;Y.stride=0;Td=Y.type;Y.type=n.dtype;De=Y.w;Y.w=0;Me=Y.x;Y.x=0;bf=Y.y;Y.y=0;af=Y.z;Y.z=0;Te=h.buffer;h.buffer=f;Pe=h.divisor;h.divisor=0;$e=h.normalized;h.normalized=!1;Xe=h.offset;h.offset=0;Ue=h.size;h.size=0;Ve=h.state;h.state=1;Ud=h.stride;h.stride=0;ae=h.type;h.type=f.dtype;We=h.w;h.w=0;hf=h.x;h.x=0;mf=h.y;h.y=0;ef=h.z;h.z=0;jf=w.buffer;w.buffer=B;kf=w.divisor;w.divisor=0;lf=w.normalized;w.normalized=
!1;rf=w.offset;w.offset=0;of=w.size;w.size=0;sf=w.state;w.state=1;Bf=w.stride;w.stride=0;Cf=w.type;w.type=B.dtype;Qe=w.w;w.w=0;Ee=w.x;w.x=0;pf=w.y;w.y=0;qf=w.z;w.z=0;Df=V.buffer;V.buffer=C;Gf=V.divisor;V.divisor=0;Af=V.normalized;V.normalized=!1;Ef=V.offset;V.offset=0;Ff=V.size;V.size=0;wf=V.state;V.state=1;xf=V.stride;V.stride=0;vf=V.type;V.type=C.dtype;yf=V.w;V.w=0;zf=V.x;V.x=0;If=V.y;V.y=0;Jf=V.z;V.z=0;Kf=E.buffer;E.buffer=G;Lf=E.divisor;E.divisor=0;tf=E.normalized;E.normalized=!1;Rf=E.offset;
E.offset=0;Hf=E.size;E.size=0;uf=E.state;E.state=1;dg=E.stride;E.stride=0;Sf=E.type;E.type=G.dtype;Tf=E.w;E.w=0;qg=E.x;E.x=0;ff=E.y;E.y=0;cf=E.z;E.z=0;Mf=D.buffer;D.buffer=U;Nf=D.divisor;D.divisor=0;eg=D.normalized;D.normalized=!1;fg=D.offset;D.offset=0;gg=D.size;D.size=0;hg=D.state;D.state=1;ig=D.stride;D.stride=0;Wf=D.type;D.type=U.dtype;Uf=D.w;D.w=0;Xf=D.x;D.x=0;Yf=D.y;D.y=0;Zf=D.z;D.z=0;jg=e.buffer;e.buffer=y;rg=e.divisor;e.divisor=0;sg=e.normalized;e.normalized=!1;tg=e.offset;e.offset=0;ug=e.size;
e.size=0;vg=e.state;e.state=1;wg=e.stride;e.stride=0;xg=e.type;e.type=y.dtype;yg=e.w;e.w=0;zg=e.x;e.x=0;Ag=e.y;e.y=0;Bg=e.z;e.z=0;gf=N.buffer;N.buffer=t;df=N.divisor;N.divisor=0;Of=N.normalized;N.normalized=!1;Pf=N.offset;N.offset=0;kg=N.size;N.size=0;lg=N.state;N.state=1;mg=N.stride;N.stride=0;ng=N.type;N.type=t.dtype;og=N.w;N.w=0;$f=N.x;N.x=0;Vf=N.y;N.y=0;ag=N.z;N.z=0;bg=a.buffer;a.buffer=m;cg=a.divisor;a.divisor=0;pg=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;
a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=m.dtype;Hg=a.w;a.w=0;Ig=a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=ta.buffer;ta.buffer=aa;Mg=ta.divisor;ta.divisor=0;Ng=ta.normalized;ta.normalized=!1;Og=ta.offset;ta.offset=0;Pg=ta.size;ta.size=0;Qg=ta.state;ta.state=1;Rg=ta.stride;ta.stride=0;Sg=ta.type;ta.type=aa.dtype;Tg=ta.w;ta.w=0;Ug=ta.x;ta.x=0;Vg=ta.y;ta.y=0;Wg=ta.z;ta.z=0;Xg=A.buffer;A.buffer=x;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;
bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=x.dtype;eh=A.w;A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ka.buffer;ka.buffer=M;jh=ka.divisor;ka.divisor=0;kh=ka.normalized;ka.normalized=!1;lh=ka.offset;ka.offset=0;mh=ka.size;ka.size=0;nh=ka.state;ka.state=1;oh=ka.stride;ka.stride=0;ph=ka.type;ka.type=M.dtype;qh=ka.w;ka.w=0;rh=ka.x;ka.x=0;sh=ka.y;ka.y=0;th=ka.z;ka.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ua.dirty=!0;p(X,l,r);X.viewportWidth=S;X.viewportHeight=sa;Ad[0]=ya;Ad[1]=
Da;Ad[2]=P;Ad[3]=F;Rb[0]=Q;Rb[1]=Xb;Rb[2]=z;Rb[3]=ga;zd.blend_enable=pa;Gd[0]=ia;Gd[1]=R;Vd[0]=ma;Vd[1]=J;Vd[2]=va;Vd[3]=K;zd.cull_enable=ca;zd.cull_face=wa;zd.depth_enable=Ga;zd.depth_func=ea;zd.depth_mask=Ea;pe[0]=ra;pe[1]=H;zd.dither=O;zd.lineWidth=za;Ce[0]=da;Ce[1]=xa;Ce[2]=Fa;Ce[3]=qa;zd.scissor_enable=Ca;ua.profile=oa;Ja.offset=Gb;Ja.count=sd;Ja.primitive=Ba;Ha[24]=Cc;Ha[3]=ec;Ha[5]=Oc;Ha[7]=fc;Ha[9]=wb;Ha[4]=be;Ha[6]=mc;Ha[8]=$d;Ha[10]=cb;Ha[23]=Va;Ha[12]=Z;Ha[14]=jd;Ha[16]=nb;Ha[18]=te;Ha[11]=
Hd;Ha[13]=tc;Ha[15]=wc;Ha[17]=od;Ha[22]=Dc;Ha[25]=Nd;Ha[26]=ld;Ha[19]=Mb;Ha[20]=Ic;Ha[21]=Uc;d.buffer=Qf;d.divisor=Vc;d.normalized=ge;d.offset=xe;d.size=ze;d.state=ce;d.stride=ie;d.type=fa;d.w=Pd;d.x=Kd;d.y=Id;d.z=nd;c.buffer=Sc;c.divisor=ud;c.normalized=qd;c.offset=id;c.size=wd;c.state=Dd;c.stride=Fd;c.type=Oa;c.w=le;c.x=Ne;c.y=me;c.z=je;T.buffer=he;T.divisor=ue;T.normalized=ee;T.offset=ne;T.size=Nc;T.state=fd;T.stride=ve;T.type=re;T.w=Ld;T.x=Qd;T.y=Rd;T.z=Sd;q.buffer=oe;q.divisor=ye;q.normalized=
Be;q.offset=se;q.size=Re;q.state=Se;q.stride=Oe;q.type=we;q.w=Ge;q.x=Ie;q.y=Je;q.z=Ke;Y.buffer=He;Y.divisor=Md;Y.normalized=Zd;Y.offset=de;Y.size=fe;Y.state=Le;Y.stride=Jd;Y.type=Td;Y.w=De;Y.x=Me;Y.y=bf;Y.z=af;h.buffer=Te;h.divisor=Pe;h.normalized=$e;h.offset=Xe;h.size=Ue;h.state=Ve;h.stride=Ud;h.type=ae;h.w=We;h.x=hf;h.y=mf;h.z=ef;w.buffer=jf;w.divisor=kf;w.normalized=lf;w.offset=rf;w.size=of;w.state=sf;w.stride=Bf;w.type=Cf;w.w=Qe;w.x=Ee;w.y=pf;w.z=qf;V.buffer=Df;V.divisor=Gf;V.normalized=Af;V.offset=
Ef;V.size=Ff;V.state=wf;V.stride=xf;V.type=vf;V.w=yf;V.x=zf;V.y=If;V.z=Jf;E.buffer=Kf;E.divisor=Lf;E.normalized=tf;E.offset=Rf;E.size=Hf;E.state=uf;E.stride=dg;E.type=Sf;E.w=Tf;E.x=qg;E.y=ff;E.z=cf;D.buffer=Mf;D.divisor=Nf;D.normalized=eg;D.offset=fg;D.size=gg;D.state=hg;D.stride=ig;D.type=Wf;D.w=Uf;D.x=Xf;D.y=Yf;D.z=Zf;e.buffer=jg;e.divisor=rg;e.normalized=sg;e.offset=tg;e.size=ug;e.state=vg;e.stride=wg;e.type=xg;e.w=yg;e.x=zg;e.y=Ag;e.z=Bg;N.buffer=gf;N.divisor=df;N.normalized=Of;N.offset=Pf;N.size=
kg;N.state=lg;N.stride=mg;N.type=ng;N.w=og;N.x=$f;N.y=Vf;N.z=ag;a.buffer=bg;a.divisor=cg;a.normalized=pg;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;ta.buffer=Lg;ta.divisor=Mg;ta.normalized=Ng;ta.offset=Og;ta.size=Pg;ta.state=Qg;ta.stride=Rg;ta.type=Sg;ta.w=Tg;ta.x=Ug;ta.y=Vg;ta.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ka.buffer=ih;ka.divisor=jh;ka.normalized=kh;ka.offset=
lh;ka.size=mh;ka.state=nh;ka.stride=oh;ka.type=ph;ka.w=qh;ka.x=rh;ka.y=sh;ka.z=th;$b.vert=uh;$b.frag=vh;ua.dirty=!0}}},$1:function(b,ba){var H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e;H=b.attributes;I=b.current;g=b.framebuffer;k=b.gl;n=b.next;f=b.vao;B=n.blend_color;C=I.blend_color;G=n.blend_equation;U=I.blend_equation;y=n.blend_func;t=I.blend_func;m=n.colorMask;aa=I.colorMask;x=n.depth_range;M=I.depth_range;u=n.polygonOffset_offset;O=I.polygonOffset_offset;ha=n.sample_coverage;
d=I.sample_coverage;c=n.scissor_box;T=I.scissor_box;q=n.stencil_func;Y=I.stencil_func;h=n.stencil_opBack;w=I.stencil_opBack;V=n.stencil_opFront;E=I.stencil_opFront;D=n.viewport;e=I.viewport;return{poll:function(){var f,a,b,A,H,ba,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra;I.dirty=!1;a=n.blend_enable;b=n.cull_enable;A=n.depth_enable;H=n.dither;ba=n.polygonOffset_enable;W=n.sample_alpha;da=n.sample_enable;R=n.scissor_enable;P=n.stencil_enable;z=n.cull_face;l=I.cull_face;K=n.depth_func;J=I.depth_func;Ea=
n.depth_mask;oa=I.depth_mask;p=n.frontFace;F=I.frontFace;ca=n.lineWidth;Q=I.lineWidth;na=n.stencil_mask;ra=I.stencil_mask;f=g.next;f!==g.cur&&(f?k.bindFramebuffer(36160,f.framebuffer):k.bindFramebuffer(36160,null),g.cur=f);a!==I.blend_enable&&(a?k.enable(3042):k.disable(3042),I.blend_enable=a);b!==I.cull_enable&&(b?k.enable(2884):k.disable(2884),I.cull_enable=b);A!==I.depth_enable&&(A?k.enable(2929):k.disable(2929),I.depth_enable=A);H!==I.dither&&(H?k.enable(3024):k.disable(3024),I.dither=H);ba!==
I.polygonOffset_enable&&(ba?k.enable(32823):k.disable(32823),I.polygonOffset_enable=ba);W!==I.sample_alpha&&(W?k.enable(32926):k.disable(32926),I.sample_alpha=W);da!==I.sample_enable&&(da?k.enable(32928):k.disable(32928),I.sample_enable=da);R!==I.scissor_enable&&(R?k.enable(3089):k.disable(3089),I.scissor_enable=R);P!==I.stencil_enable&&(P?k.enable(2960):k.disable(2960),I.stencil_enable=P);if(B[0]!==C[0]||B[1]!==C[1]||B[2]!==C[2]||B[3]!==C[3])k.blendColor(B[0],B[1],B[2],B[3]),C[0]=B[0],C[1]=B[1],
C[2]=B[2],C[3]=B[3];if(G[0]!==U[0]||G[1]!==U[1])k.blendEquationSeparate(G[0],G[1]),U[0]=G[0],U[1]=G[1];if(y[0]!==t[0]||y[1]!==t[1]||y[2]!==t[2]||y[3]!==t[3])k.blendFuncSeparate(y[0],y[1],y[2],y[3]),t[0]=y[0],t[1]=y[1],t[2]=y[2],t[3]=y[3];if(m[0]!==aa[0]||m[1]!==aa[1]||m[2]!==aa[2]||m[3]!==aa[3])k.colorMask(m[0],m[1],m[2],m[3]),aa[0]=m[0],aa[1]=m[1],aa[2]=m[2],aa[3]=m[3];z!==l&&(k.cullFace(z),I.cull_face=z);K!==J&&(k.depthFunc(K),I.depth_func=K);Ea!==oa&&(k.depthMask(Ea),I.depth_mask=Ea);if(x[0]!==
M[0]||x[1]!==M[1])k.depthRange(x[0],x[1]),M[0]=x[0],M[1]=x[1];p!==F&&(k.frontFace(p),I.frontFace=p);ca!==Q&&(k.lineWidth(ca),I.lineWidth=ca);if(u[0]!==O[0]||u[1]!==O[1])k.polygonOffset(u[0],u[1]),O[0]=u[0],O[1]=u[1];if(ha[0]!==d[0]||ha[1]!==d[1])k.sampleCoverage(ha[0],ha[1]),d[0]=ha[0],d[1]=ha[1];if(c[0]!==T[0]||c[1]!==T[1]||c[2]!==T[2]||c[3]!==T[3])k.scissor(c[0],c[1],c[2],c[3]),T[0]=c[0],T[1]=c[1],T[2]=c[2],T[3]=c[3];if(q[0]!==Y[0]||q[1]!==Y[1]||q[2]!==Y[2])k.stencilFunc(q[0],q[1],q[2]),Y[0]=q[0],
Y[1]=q[1],Y[2]=q[2];na!==ra&&(k.stencilMask(na),I.stencil_mask=na);if(h[0]!==w[0]||h[1]!==w[1]||h[2]!==w[2]||h[3]!==w[3])k.stencilOpSeparate(h[0],h[1],h[2],h[3]),w[0]=h[0],w[1]=h[1],w[2]=h[2],w[3]=h[3];if(V[0]!==E[0]||V[1]!==E[1]||V[2]!==E[2]||V[3]!==E[3])k.stencilOpSeparate(V[0],V[1],V[2],V[3]),E[0]=V[0],E[1]=V[1],E[2]=V[2],E[3]=V[3];if(D[0]!==e[0]||D[1]!==e[1]||D[2]!==e[2]||D[3]!==e[3])k.viewport(D[0],D[1],D[2],D[3]),e[0]=D[0],e[1]=D[1],e[2]=D[2],e[3]=D[3]},refresh:function(){var b,a,ta,A,ka,Cc,
W,da,R,P,z,l,K,J,Ea,oa;I.dirty=!1;a=n.blend_enable;ta=n.cull_enable;A=n.depth_enable;ka=n.dither;Cc=n.polygonOffset_enable;W=n.sample_alpha;da=n.sample_enable;R=n.scissor_enable;P=n.stencil_enable;z=n.cull_face;l=n.depth_func;K=n.depth_mask;J=n.frontFace;Ea=n.lineWidth;oa=n.stencil_mask;(b=g.next)?k.bindFramebuffer(36160,b.framebuffer):k.bindFramebuffer(36160,null);g.cur=b;b=H[0];b.buffer?(k.enableVertexAttribArray(0),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(0,b.size,b.type,b.normalized,
b.stride,b.offset)):(k.disableVertexAttribArray(0),k.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(0,b.divisor);b=H[1];b.buffer?(k.enableVertexAttribArray(1),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(1),k.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(1,b.divisor);b=H[2];b.buffer?(k.enableVertexAttribArray(2),k.bindBuffer(34962,b.buffer.buffer),
k.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(2),k.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(2,b.divisor);b=H[3];b.buffer?(k.enableVertexAttribArray(3),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(3),k.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(3,b.divisor);b=H[4];b.buffer?(k.enableVertexAttribArray(4),
k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(4,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(4),k.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(4,b.divisor);b=H[5];b.buffer?(k.enableVertexAttribArray(5),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(5),k.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(5,b.divisor);
b=H[6];b.buffer?(k.enableVertexAttribArray(6),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(6),k.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(6,b.divisor);b=H[7];b.buffer?(k.enableVertexAttribArray(7),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(7),k.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=
null);ba.vertexAttribDivisorANGLE(7,b.divisor);b=H[8];b.buffer?(k.enableVertexAttribArray(8),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(8),k.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(8,b.divisor);b=H[9];b.buffer?(k.enableVertexAttribArray(9),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(9),
k.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(9,b.divisor);b=H[10];b.buffer?(k.enableVertexAttribArray(10),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(10),k.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(10,b.divisor);b=H[11];b.buffer?(k.enableVertexAttribArray(11),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(11,b.size,b.type,b.normalized,
b.stride,b.offset)):(k.disableVertexAttribArray(11),k.vertexAttrib4f(11,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(11,b.divisor);b=H[12];b.buffer?(k.enableVertexAttribArray(12),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(12),k.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(12,b.divisor);b=H[13];b.buffer?(k.enableVertexAttribArray(13),k.bindBuffer(34962,b.buffer.buffer),
k.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(13),k.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(13,b.divisor);b=H[14];b.buffer?(k.enableVertexAttribArray(14),k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(14),k.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(14,b.divisor);b=H[15];b.buffer?(k.enableVertexAttribArray(15),
k.bindBuffer(34962,b.buffer.buffer),k.vertexAttribPointer(15,b.size,b.type,b.normalized,b.stride,b.offset)):(k.disableVertexAttribArray(15),k.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);ba.vertexAttribDivisorANGLE(15,b.divisor);f.currentVAO=null;f.setVAO(f.targetVAO);a?k.enable(3042):k.disable(3042);I.blend_enable=a;ta?k.enable(2884):k.disable(2884);I.cull_enable=ta;A?k.enable(2929):k.disable(2929);I.depth_enable=A;ka?k.enable(3024):k.disable(3024);I.dither=ka;Cc?k.enable(32823):k.disable(32823);
I.polygonOffset_enable=Cc;W?k.enable(32926):k.disable(32926);I.sample_alpha=W;da?k.enable(32928):k.disable(32928);I.sample_enable=da;R?k.enable(3089):k.disable(3089);I.scissor_enable=R;P?k.enable(2960):k.disable(2960);I.stencil_enable=P;k.blendColor(B[0],B[1],B[2],B[3]);C[0]=B[0];C[1]=B[1];C[2]=B[2];C[3]=B[3];k.blendEquationSeparate(G[0],G[1]);U[0]=G[0];U[1]=G[1];k.blendFuncSeparate(y[0],y[1],y[2],y[3]);t[0]=y[0];t[1]=y[1];t[2]=y[2];t[3]=y[3];k.colorMask(m[0],m[1],m[2],m[3]);aa[0]=m[0];aa[1]=m[1];
aa[2]=m[2];aa[3]=m[3];k.cullFace(z);I.cull_face=z;k.depthFunc(l);I.depth_func=l;k.depthMask(K);I.depth_mask=K;k.depthRange(x[0],x[1]);M[0]=x[0];M[1]=x[1];k.frontFace(J);I.frontFace=J;k.lineWidth(Ea);I.lineWidth=Ea;k.polygonOffset(u[0],u[1]);O[0]=u[0];O[1]=u[1];k.sampleCoverage(ha[0],ha[1]);d[0]=ha[0];d[1]=ha[1];k.scissor(c[0],c[1],c[2],c[3]);T[0]=c[0];T[1]=c[1];T[2]=c[2];T[3]=c[3];k.stencilFunc(q[0],q[1],q[2]);Y[0]=q[0];Y[1]=q[1];Y[2]=q[2];k.stencilMask(oa);I.stencil_mask=oa;k.stencilOpSeparate(h[0],
h[1],h[2],h[3]);w[0]=h[0];w[1]=h[1];w[2]=h[2];w[3]=h[3];k.stencilOpSeparate(V[0],V[1],V[2],V[3]);E[0]=V[0];E[1]=V[1];E[2]=V[2];E[3]=V[3];k.viewport(D[0],D[1],D[2],D[3]);e[0]=D[0];e[1]=D[1];e[2]=D[2];e[3]=D[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Cc,W,da,R,P,z,l,K,J,Ea,oa){var p,F,ca,Q,na,ra,Aa,za,
ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,sd,Gb,ia,L,sa,Da,pa,wa,Ga,ma,X,ua,Ja,Ba,lb,ea,zd,$b,Ha,ac,Rb;p=b.attributes;F=b.buffer;ca=b.context;Q=b.current;na=b.draw;ra=b.elements;Aa=b.extensions;za=b.framebuffer;ga=b.gl;Ca=b.isBufferArgs;la=b.next;qa=b.shader;xa=b.uniforms;ya=b.vao;ja=la.blend_color;Xb=Q.blend_color;Ta=la.blend_equation;v=Q.blend_equation;r=la.blend_func;S=Q.blend_func;va=la.colorMask;Fa=Q.colorMask;sd=la.depth_range;Gb=Q.depth_range;ia=la.polygonOffset_offset;L=Q.polygonOffset_offset;
sa=la.sample_coverage;Da=Q.sample_coverage;pa=la.scissor_box;wa=Q.scissor_box;Ga=la.stencil_func;ma=Q.stencil_func;X=la.stencil_opBack;ua=Q.stencil_opBack;Ja=la.stencil_opFront;Ba=Q.stencil_opFront;lb=la.viewport;ea=Q.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=H;$b.divisor=1;Ha={};Ha.buffer=I;Ha.divisor=1;ac={};ac.buffer=g;ac.divisor=1;Rb={};Rb.buffer=k;Rb.divisor=1;return{batch:function(c,d){var f,h,k,b,r,q;f=za.next;
f!==za.cur&&(f?ga.bindFramebuffer(36160,f.framebuffer):ga.bindFramebuffer(36160,null),za.cur=f);if(Q.dirty){var n,ja,g,x,pa,I,u,C,m,T,B,H,O,G,M,Ta,Y,ha,xa,qa,aa,lb,Z,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc;n=la.dither;n!==Q.dither&&(n?ga.enable(3024):ga.disable(3024),Q.dither=n);ja=la.depth_func;ja!==Q.depth_func&&(ga.depthFunc(ja),Q.depth_func=ja);g=sd[0];x=sd[1];if(g!==Gb[0]||x!==Gb[1])ga.depthRange(g,x),Gb[0]=g,Gb[1]=x;pa=la.depth_mask;pa!==Q.depth_mask&&(ga.depthMask(pa),Q.depth_mask=pa);I=va[0];u=va[1];
C=va[2];m=va[3];if(I!==Fa[0]||u!==Fa[1]||C!==Fa[2]||m!==Fa[3])ga.colorMask(I,u,C,m),Fa[0]=I,Fa[1]=u,Fa[2]=C,Fa[3]=m;T=la.cull_enable;T!==Q.cull_enable&&(T?ga.enable(2884):ga.disable(2884),Q.cull_enable=T);B=la.cull_face;B!==Q.cull_face&&(ga.cullFace(B),Q.cull_face=B);H=la.frontFace;H!==Q.frontFace&&(ga.frontFace(H),Q.frontFace=H);O=la.lineWidth;O!==Q.lineWidth&&(ga.lineWidth(O),Q.lineWidth=O);G=la.polygonOffset_enable;G!==Q.polygonOffset_enable&&(G?ga.enable(32823):ga.disable(32823),Q.polygonOffset_enable=
G);M=ia[0];Ta=ia[1];if(M!==L[0]||Ta!==L[1])ga.polygonOffset(M,Ta),L[0]=M,L[1]=Ta;Y=la.sample_alpha;Y!==Q.sample_alpha&&(Y?ga.enable(32926):ga.disable(32926),Q.sample_alpha=Y);ha=la.sample_enable;ha!==Q.sample_enable&&(ha?ga.enable(32928):ga.disable(32928),Q.sample_enable=ha);xa=sa[0];qa=sa[1];if(xa!==Da[0]||qa!==Da[1])ga.sampleCoverage(xa,qa),Da[0]=xa,Da[1]=qa;aa=la.stencil_enable;aa!==Q.stencil_enable&&(aa?ga.enable(2960):ga.disable(2960),Q.stencil_enable=aa);lb=la.stencil_mask;lb!==Q.stencil_mask&&
(ga.stencilMask(lb),Q.stencil_mask=lb);Z=Ga[0];Ab=Ga[1];Eb=Ga[2];if(Z!==ma[0]||Ab!==ma[1]||Eb!==ma[2])ga.stencilFunc(Z,Ab,Eb),ma[0]=Z,ma[1]=Ab,ma[2]=Eb;tc=Ja[0];wb=Ja[1];wc=Ja[2];Bb=Ja[3];if(tc!==Ba[0]||wb!==Ba[1]||wc!==Ba[2]||Bb!==Ba[3])ga.stencilOpSeparate(tc,wb,wc,Bb),Ba[0]=tc,Ba[1]=wb,Ba[2]=wc,Ba[3]=Bb;Jc=X[0];lc=X[1];Gc=X[2];Vc=X[3];if(Jc!==ua[0]||lc!==ua[1]||Gc!==ua[2]||Vc!==ua[3])ga.stencilOpSeparate(Jc,lc,Gc,Vc),ua[0]=Jc,ua[1]=lc,ua[2]=Gc,ua[3]=Vc}ga.blendColor(0,0,0,0);Xb[0]=0;Xb[1]=0;Xb[2]=
0;Xb[3]=0;ga.enable(3042);Q.blend_enable=!0;ga.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ga.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;ga.disable(2929);Q.depth_enable=!1;ga.enable(3089);Q.scissor_enable=!0;if(h=Q.profile)k=performance.now(),ba.count+=d;ga.useProgram(w.program);b=Aa.angle_instanced_arrays;var Uc,Dc,ec,Hc,oc,pc,mc,fc;ya.setVAO(null);Uc=ka.location;Dc=p[Uc];Dc.buffer||ga.enableVertexAttribArray(Uc);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==U||
!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)ga.bindBuffer(34962,U.buffer),ga.vertexAttribPointer(Uc,2,5126,!1,24,0),Dc.type=5126,Dc.size=2,Dc.buffer=U,Dc.normalized=!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(b.vertexAttribDivisorANGLE(Uc,0),Dc.divisor=0);ec=W.location;Hc=p[ec];Hc.buffer||ga.enableVertexAttribArray(ec);if(5126!==Hc.type||2!==Hc.size||Hc.buffer!==y||!1!==Hc.normalized||8!==Hc.offset||24!==Hc.stride)ga.bindBuffer(34962,y.buffer),ga.vertexAttribPointer(ec,2,5126,!1,24,8),Hc.type=
5126,Hc.size=2,Hc.buffer=y,Hc.normalized=!1,Hc.offset=8,Hc.stride=24;0!==Hc.divisor&&(b.vertexAttribDivisorANGLE(ec,0),Hc.divisor=0);oc=a.location;pc=p[oc];pc.buffer||ga.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==t||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)ga.bindBuffer(34962,t.buffer),ga.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=t,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(b.vertexAttribDivisorANGLE(oc,0),pc.divisor=
0);(mc=na.elements)?ga.bindBuffer(34963,mc.buffer.buffer):ya.currentVAO&&(mc=ra.getElements(ya.currentVAO.elements))&&ga.bindBuffer(34963,mc.buffer.buffer);fc=na.offset;for(r=0;r<d;++r){q=c[r];var $a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,fa,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,
gd,xd,Fe,Bd,hd,nf,Od,Yd,Oa,Pd,Kd,Id,nd,Sc;$a=q.viewport;Ic=$a.x|0;xb=$a.y|0;cb="width"in $a?$a.width|0:ca.framebufferWidth-Ic;Mb="height"in $a?$a.height|0:ca.framebufferHeight-xb;ab=ca.viewportWidth;ca.viewportWidth=cb;nb=ca.viewportHeight;ca.viewportHeight=Mb;ga.viewport(Ic,xb,cb,Mb);ea[0]=Ic;ea[1]=xb;ea[2]=cb;ea[3]=Mb;Va=q.viewport;Cd=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:ca.framebufferWidth-Cd;qc="height"in Va?Va.height|0:ca.framebufferHeight-Hb;ga.scissor(Cd,Hb,Ib,qc);wa[0]=Cd;wa[1]=Hb;
wa[2]=Ib;wa[3]=qc;Nb=V.call(this,ca,q,r);ac.offset=Nb;ib=!1;Fb=null;Cb=0;vb=!1;Yb=gb=0;Ob=1;pb=0;Ua=5126;hb=bc=yb=Tb=0;Ca(ac)?(ib=!0,Fb=F.createStream(34962,ac),Ua=Fb.dtype):(Fb=F.getBuffer(ac))?Ua=Fb.dtype:"constant"in ac?(Ob=2,"number"===typeof ac.constant?(yb=ac.constant,bc=hb=Tb=0):(yb=0<ac.constant.length?ac.constant[0]:0,bc=1<ac.constant.length?ac.constant[1]:0,hb=2<ac.constant.length?ac.constant[2]:0,Tb=3<ac.constant.length?ac.constant[3]:0)):(Fb=Ca(ac.buffer)?F.createStream(34962,ac.buffer):
F.getBuffer(ac.buffer),Ua="type"in ac?zd[ac.type]:Fb.dtype,vb=!!ac.normalized,Yb=ac.size|0,gb=ac.offset|0,pb=ac.stride|0,Cb=ac.divisor|0);ob=P.location;Ia=p[ob];if(1===Ob){Ia.buffer||ga.enableVertexAttribArray(ob);qb=Yb||2;if(Ia.type!==Ua||Ia.size!==qb||Ia.buffer!==Fb||Ia.normalized!==vb||Ia.offset!==gb||Ia.stride!==pb)ga.bindBuffer(34962,Fb.buffer),ga.vertexAttribPointer(ob,qb,Ua,vb,pb,gb),Ia.type=Ua,Ia.size=qb,Ia.buffer=Fb,Ia.normalized=vb,Ia.offset=gb,Ia.stride=pb;Ia.divisor!==Cb&&(b.vertexAttribDivisorANGLE(ob,
Cb),Ia.divisor=Cb)}else if(Ia.buffer&&(ga.disableVertexAttribArray(ob),Ia.buffer=null),Ia.x!==yb||Ia.y!==bc||Ia.z!==hb||Ia.w!==Tb)ga.vertexAttrib4f(ob,yb,bc,hb,Tb),Ia.x=yb,Ia.y=bc,Ia.z=hb,Ia.w=Tb;Ka=E.call(this,ca,q,r);Rb.offset=Ka;eb=!1;fb=null;La=0;jb=!1;sb=Wa=0;rb=1;Pa=0;Bc=5126;Ma=Db=Jb=Ra=0;Ca(Rb)?(eb=!0,fb=F.createStream(34962,Rb),Bc=fb.dtype):(fb=F.getBuffer(Rb))?Bc=fb.dtype:"constant"in Rb?(rb=2,"number"===typeof Rb.constant?(Jb=Rb.constant,Db=Ma=Ra=0):(Jb=0<Rb.constant.length?Rb.constant[0]:
0,Db=1<Rb.constant.length?Rb.constant[1]:0,Ma=2<Rb.constant.length?Rb.constant[2]:0,Ra=3<Rb.constant.length?Rb.constant[3]:0)):(fb=Ca(Rb.buffer)?F.createStream(34962,Rb.buffer):F.getBuffer(Rb.buffer),Bc="type"in Rb?zd[Rb.type]:fb.dtype,jb=!!Rb.normalized,sb=Rb.size|0,Wa=Rb.offset|0,Pa=Rb.stride|0,La=Rb.divisor|0);vd=z.location;Ya=p[vd];if(1===rb){Ya.buffer||ga.enableVertexAttribArray(vd);Kb=sb||2;if(Ya.type!==Bc||Ya.size!==Kb||Ya.buffer!==fb||Ya.normalized!==jb||Ya.offset!==Wa||Ya.stride!==Pa)ga.bindBuffer(34962,
fb.buffer),ga.vertexAttribPointer(vd,Kb,Bc,jb,Pa,Wa),Ya.type=Bc,Ya.size=Kb,Ya.buffer=fb,Ya.normalized=jb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==La&&(b.vertexAttribDivisorANGLE(vd,La),Ya.divisor=La)}else if(Ya.buffer&&(ga.disableVertexAttribArray(vd),Ya.buffer=null),Ya.x!==Jb||Ya.y!==Db||Ya.z!==Ma||Ya.w!==Ra)ga.vertexAttrib4f(vd,Jb,Db,Ma,Ra),Ya.x=Jb,Ya.y=Db,Ya.z=Ma,Ya.w=Ra;Lb=D.call(this,ca,q,r);Ha.offset=Lb;kb=!1;Na=null;Zb=0;Qa=!1;ub=tb=0;Sa=1;mb=0;gc=5126;jc=bb=uc=zc=0;Ca(Ha)?(kb=!0,Na=F.createStream(34962,
Ha),gc=Na.dtype):(Na=F.getBuffer(Ha))?gc=Na.dtype:"constant"in Ha?(Sa=2,"number"===typeof Ha.constant?(uc=Ha.constant,bb=jc=zc=0):(uc=0<Ha.constant.length?Ha.constant[0]:0,bb=1<Ha.constant.length?Ha.constant[1]:0,jc=2<Ha.constant.length?Ha.constant[2]:0,zc=3<Ha.constant.length?Ha.constant[3]:0)):(Na=Ca(Ha.buffer)?F.createStream(34962,Ha.buffer):F.getBuffer(Ha.buffer),gc="type"in Ha?zd[Ha.type]:Na.dtype,Qa=!!Ha.normalized,ub=Ha.size|0,tb=Ha.offset|0,mb=Ha.stride|0,Zb=Ha.divisor|0);ad=Cc.location;Xa=
p[ad];if(1===Sa){Xa.buffer||ga.enableVertexAttribArray(ad);md=ub||4;if(Xa.type!==gc||Xa.size!==md||Xa.buffer!==Na||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)ga.bindBuffer(34962,Na.buffer),ga.vertexAttribPointer(ad,md,gc,Qa,mb,tb),Xa.type=gc,Xa.size=md,Xa.buffer=Na,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Zb&&(b.vertexAttribDivisorANGLE(ad,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(ga.disableVertexAttribArray(ad),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)ga.vertexAttrib4f(ad,
uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;zb=e.call(this,ca,q,r);$b.offset=zb;Za=!1;Ub=null;sc=0;Vb=!1;Kc=Pb=0;Qb=1;fa=0;Ec=5126;td=Wc=Mc=rd=0;Ca($b)?(Za=!0,Ub=F.createStream(34962,$b),Ec=Ub.dtype):(Ub=F.getBuffer($b))?Ec=Ub.dtype:"constant"in $b?(Qb=2,"number"===typeof $b.constant?(Mc=$b.constant,Wc=td=rd=0):(Mc=0<$b.constant.length?$b.constant[0]:0,Wc=1<$b.constant.length?$b.constant[1]:0,td=2<$b.constant.length?$b.constant[2]:0,rd=3<$b.constant.length?$b.constant[3]:0)):(Ub=Ca($b.buffer)?F.createStream(34962,
$b.buffer):F.getBuffer($b.buffer),Ec="type"in $b?zd[$b.type]:Ub.dtype,Vb=!!$b.normalized,Kc=$b.size|0,Pb=$b.offset|0,fa=$b.stride|0,sc=$b.divisor|0);nc=A.location;vc=p[nc];if(1===Qb){vc.buffer||ga.enableVertexAttribArray(nc);hc=Kc||4;if(vc.type!==Ec||vc.size!==hc||vc.buffer!==Ub||vc.normalized!==Vb||vc.offset!==Pb||vc.stride!==fa)ga.bindBuffer(34962,Ub.buffer),ga.vertexAttribPointer(nc,hc,Ec,Vb,fa,Pb),vc.type=Ec,vc.size=hc,vc.buffer=Ub,vc.normalized=Vb,vc.offset=Pb,vc.stride=fa;vc.divisor!==sc&&(b.vertexAttribDivisorANGLE(nc,
sc),vc.divisor=sc)}else if(vc.buffer&&(ga.disableVertexAttribArray(nc),vc.buffer=null),vc.x!==Mc||vc.y!==Wc||vc.z!==td||vc.w!==rd)ga.vertexAttrib4f(nc,Mc,Wc,td,rd),vc.x=Mc,vc.y=Wc,vc.z=td,vc.w=rd;db=N.call(this,ca,q,r);rc=db[0];Wb=db[1];ic=db[2];Ac=db[3];r&&Sb===rc&&dc===Wb&&xc===ic&&bd===Ac||(Sb=rc,dc=Wb,xc=ic,bd=Ac,ga.uniform4f(oa.location,rc,Wb,ic,Ac));Pc=q.lineWidth;r&&Qc===Pc||(Qc=Pc,ga.uniform1f(da.location,Pc));Rc=q.capSize;r&&Xc===Rc||(Xc=Rc,ga.uniform1f(ta.location,Rc));kd=q.scale;cd=kd[0];
kc=kd[1];r&&Yc===cd&&cc===kc||(Yc=cd,cc=kc,ga.uniform2f(l.location,cd,kc));Zc=q.scaleFract;Tc=Zc[0];yc=Zc[1];r&&dd===Tc&&gd===yc||(dd=Tc,gd=yc,ga.uniform2f(K.location,Tc,yc));xd=q.translate;Fe=xd[0];hd=xd[1];r&&Bd===Fe&&nf===hd||(Bd=Fe,nf=hd,ga.uniform2f(J.location,Fe,hd));Od=q.translateFract;Yd=Od[0];Pd=Od[1];r&&Oa===Yd&&Kd===Pd||(Oa=Yd,Kd=Pd,ga.uniform2f(Ea.location,Yd,Pd));Id=q.opacity;r&&nd===Id||(nd=Id,ga.uniform1f(R.location,Id));Sc=q.count;0<Sc?mc?b.drawElementsInstancedANGLE(4,36,mc.type,
fc<<(mc.type-5121>>1),Sc):b.drawArraysInstancedANGLE(4,fc,36,Sc):0>Sc&&(mc?ga.drawElements(4,36,mc.type,fc<<(mc.type-5121>>1)):ga.drawArrays(4,fc,36));ca.viewportWidth=ab;ca.viewportHeight=nb;ib&&F.destroyStream(Fb);eb&&F.destroyStream(fb);kb&&F.destroyStream(Na);Za&&F.destroyStream(Ub)}Q.dirty=!0;ya.setVAO(null);h&&(ba.cpuTime+=performance.now()-k)},draw:function(e){var c,d,h,k,b,r,q,ja,g,w,x,pa,E,D,I,u,T,H,N,O,M,Ta,Y,ha,xa,qa,aa,V,lb,Z,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,
xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb;c=za.next;c!==za.cur&&(c?ga.bindFramebuffer(36160,c.framebuffer):ga.bindFramebuffer(36160,null),za.cur=c);if(Q.dirty){var Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,fa,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb;Qa=la.dither;Qa!==Q.dither&&(Qa?ga.enable(3024):ga.disable(3024),Q.dither=Qa);tb=la.depth_func;tb!==Q.depth_func&&(ga.depthFunc(tb),Q.depth_func=
tb);ub=sd[0];Sa=sd[1];if(ub!==Gb[0]||Sa!==Gb[1])ga.depthRange(ub,Sa),Gb[0]=ub,Gb[1]=Sa;mb=la.depth_mask;mb!==Q.depth_mask&&(ga.depthMask(mb),Q.depth_mask=mb);gc=va[0];zc=va[1];uc=va[2];bb=va[3];if(gc!==Fa[0]||zc!==Fa[1]||uc!==Fa[2]||bb!==Fa[3])ga.colorMask(gc,zc,uc,bb),Fa[0]=gc,Fa[1]=zc,Fa[2]=uc,Fa[3]=bb;jc=la.cull_enable;jc!==Q.cull_enable&&(jc?ga.enable(2884):ga.disable(2884),Q.cull_enable=jc);ad=la.cull_face;ad!==Q.cull_face&&(ga.cullFace(ad),Q.cull_face=ad);Xa=la.frontFace;Xa!==Q.frontFace&&(ga.frontFace(Xa),
Q.frontFace=Xa);fa=la.lineWidth;fa!==Q.lineWidth&&(ga.lineWidth(fa),Q.lineWidth=fa);zb=la.polygonOffset_enable;zb!==Q.polygonOffset_enable&&(zb?ga.enable(32823):ga.disable(32823),Q.polygonOffset_enable=zb);Za=ia[0];Ub=ia[1];if(Za!==L[0]||Ub!==L[1])ga.polygonOffset(Za,Ub),L[0]=Za,L[1]=Ub;sc=la.sample_alpha;sc!==Q.sample_alpha&&(sc?ga.enable(32926):ga.disable(32926),Q.sample_alpha=sc);Vb=la.sample_enable;Vb!==Q.sample_enable&&(Vb?ga.enable(32928):ga.disable(32928),Q.sample_enable=Vb);Pb=sa[0];Kc=sa[1];
if(Pb!==Da[0]||Kc!==Da[1])ga.sampleCoverage(Pb,Kc),Da[0]=Pb,Da[1]=Kc;Qb=la.stencil_enable;Qb!==Q.stencil_enable&&(Qb?ga.enable(2960):ga.disable(2960),Q.stencil_enable=Qb);Xd=la.stencil_mask;Xd!==Q.stencil_mask&&(ga.stencilMask(Xd),Q.stencil_mask=Xd);Ec=Ga[0];rd=Ga[1];Mc=Ga[2];if(Ec!==ma[0]||rd!==ma[1]||Mc!==ma[2])ga.stencilFunc(Ec,rd,Mc),ma[0]=Ec,ma[1]=rd,ma[2]=Mc;Wc=Ja[0];td=Ja[1];nc=Ja[2];vc=Ja[3];if(Wc!==Ba[0]||td!==Ba[1]||nc!==Ba[2]||vc!==Ba[3])ga.stencilOpSeparate(Wc,td,nc,vc),Ba[0]=Wc,Ba[1]=
td,Ba[2]=nc,Ba[3]=vc;hc=X[0];db=X[1];rc=X[2];Sb=X[3];if(hc!==ua[0]||db!==ua[1]||rc!==ua[2]||Sb!==ua[3])ga.stencilOpSeparate(hc,db,rc,Sb),ua[0]=hc,ua[1]=db,ua[2]=rc,ua[3]=Sb}d=e.viewport;h=d.x|0;k=d.y|0;b="width"in d?d.width|0:ca.framebufferWidth-h;r="height"in d?d.height|0:ca.framebufferHeight-k;q=ca.viewportWidth;ca.viewportWidth=b;ja=ca.viewportHeight;ca.viewportHeight=r;ga.viewport(h,k,b,r);ea[0]=h;ea[1]=k;ea[2]=b;ea[3]=r;ga.blendColor(0,0,0,0);Xb[0]=0;Xb[1]=0;Xb[2]=0;Xb[3]=0;ga.enable(3042);Q.blend_enable=
!0;ga.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ga.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;ga.disable(2929);Q.depth_enable=!1;g=e.viewport;w=g.x|0;x=g.y|0;pa="width"in g?g.width|0:ca.framebufferWidth-w;E="height"in g?g.height|0:ca.framebufferHeight-x;ga.scissor(w,x,pa,E);wa[0]=w;wa[1]=x;wa[2]=pa;wa[3]=E;ga.enable(3089);Q.scissor_enable=!0;if(D=Q.profile)I=performance.now(),ba.count++;ga.useProgram(n.program);u=Aa.angle_instanced_arrays;ya.setVAO(null);T=f.call(this,
ca,e,0);ac.offset=T;H=!1;N=null;O=0;M=!1;Y=Ta=0;ha=1;xa=0;qa=5126;Z=lb=V=aa=0;Ca(ac)?(H=!0,N=F.createStream(34962,ac),qa=N.dtype):(N=F.getBuffer(ac))?qa=N.dtype:"constant"in ac?(ha=2,"number"===typeof ac.constant?(V=ac.constant,lb=Z=aa=0):(V=0<ac.constant.length?ac.constant[0]:0,lb=1<ac.constant.length?ac.constant[1]:0,Z=2<ac.constant.length?ac.constant[2]:0,aa=3<ac.constant.length?ac.constant[3]:0)):(N=Ca(ac.buffer)?F.createStream(34962,ac.buffer):F.getBuffer(ac.buffer),qa="type"in ac?zd[ac.type]:
N.dtype,M=!!ac.normalized,Y=ac.size|0,Ta=ac.offset|0,xa=ac.stride|0,O=ac.divisor|0);Ab=P.location;Eb=p[Ab];if(1===ha){Eb.buffer||ga.enableVertexAttribArray(Ab);tc=Y||2;if(Eb.type!==qa||Eb.size!==tc||Eb.buffer!==N||Eb.normalized!==M||Eb.offset!==Ta||Eb.stride!==xa)ga.bindBuffer(34962,N.buffer),ga.vertexAttribPointer(Ab,tc,qa,M,xa,Ta),Eb.type=qa,Eb.size=tc,Eb.buffer=N,Eb.normalized=M,Eb.offset=Ta,Eb.stride=xa;Eb.divisor!==O&&(u.vertexAttribDivisorANGLE(Ab,O),Eb.divisor=O)}else if(Eb.buffer&&(ga.disableVertexAttribArray(Ab),
Eb.buffer=null),Eb.x!==V||Eb.y!==lb||Eb.z!==Z||Eb.w!==aa)ga.vertexAttrib4f(Ab,V,lb,Z,aa),Eb.x=V,Eb.y=lb,Eb.z=Z,Eb.w=aa;wb=B.call(this,ca,e,0);Rb.offset=wb;wc=!1;Bb=null;Jc=0;lc=!1;Vc=Gc=0;Uc=1;Dc=0;ec=5126;mc=pc=oc=Hc=0;Ca(Rb)?(wc=!0,Bb=F.createStream(34962,Rb),ec=Bb.dtype):(Bb=F.getBuffer(Rb))?ec=Bb.dtype:"constant"in Rb?(Uc=2,"number"===typeof Rb.constant?(oc=Rb.constant,pc=mc=Hc=0):(oc=0<Rb.constant.length?Rb.constant[0]:0,pc=1<Rb.constant.length?Rb.constant[1]:0,mc=2<Rb.constant.length?Rb.constant[2]:
0,Hc=3<Rb.constant.length?Rb.constant[3]:0)):(Bb=Ca(Rb.buffer)?F.createStream(34962,Rb.buffer):F.getBuffer(Rb.buffer),ec="type"in Rb?zd[Rb.type]:Bb.dtype,lc=!!Rb.normalized,Vc=Rb.size|0,Gc=Rb.offset|0,Dc=Rb.stride|0,Jc=Rb.divisor|0);fc=z.location;$a=p[fc];if(1===Uc){$a.buffer||ga.enableVertexAttribArray(fc);Ic=Vc||2;if($a.type!==ec||$a.size!==Ic||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Gc||$a.stride!==Dc)ga.bindBuffer(34962,Bb.buffer),ga.vertexAttribPointer(fc,Ic,ec,lc,Dc,Gc),$a.type=ec,$a.size=
Ic,$a.buffer=Bb,$a.normalized=lc,$a.offset=Gc,$a.stride=Dc;$a.divisor!==Jc&&(u.vertexAttribDivisorANGLE(fc,Jc),$a.divisor=Jc)}else if($a.buffer&&(ga.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Hc)ga.vertexAttrib4f(fc,oc,pc,mc,Hc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Hc;xb=C.call(this,ca,e,0);Ha.offset=xb;cb=!1;Mb=null;ab=0;nb=!1;Cd=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=ib=Nb=0;Ca(Ha)?(cb=!0,Mb=F.createStream(34962,Ha),qc=Mb.dtype):(Mb=F.getBuffer(Ha))?qc=Mb.dtype:"constant"in
Ha?(Hb=2,"number"===typeof Ha.constant?(ib=Ha.constant,Fb=Cb=Nb=0):(ib=0<Ha.constant.length?Ha.constant[0]:0,Fb=1<Ha.constant.length?Ha.constant[1]:0,Cb=2<Ha.constant.length?Ha.constant[2]:0,Nb=3<Ha.constant.length?Ha.constant[3]:0)):(Mb=Ca(Ha.buffer)?F.createStream(34962,Ha.buffer):F.getBuffer(Ha.buffer),qc="type"in Ha?zd[Ha.type]:Mb.dtype,nb=!!Ha.normalized,Cd=Ha.size|0,Va=Ha.offset|0,Ib=Ha.stride|0,ab=Ha.divisor|0);vb=Cc.location;gb=p[vb];if(1===Hb){gb.buffer||ga.enableVertexAttribArray(vb);Yb=
Cd||4;if(gb.type!==qc||gb.size!==Yb||gb.buffer!==Mb||gb.normalized!==nb||gb.offset!==Va||gb.stride!==Ib)ga.bindBuffer(34962,Mb.buffer),ga.vertexAttribPointer(vb,Yb,qc,nb,Ib,Va),gb.type=qc,gb.size=Yb,gb.buffer=Mb,gb.normalized=nb,gb.offset=Va,gb.stride=Ib;gb.divisor!==ab&&(u.vertexAttribDivisorANGLE(vb,ab),gb.divisor=ab)}else if(gb.buffer&&(ga.disableVertexAttribArray(vb),gb.buffer=null),gb.x!==ib||gb.y!==Fb||gb.z!==Cb||gb.w!==Nb)ga.vertexAttrib4f(vb,ib,Fb,Cb,Nb),gb.x=ib,gb.y=Fb,gb.z=Cb,gb.w=Nb;Ob=
G.call(this,ca,e,0);$b.offset=Ob;pb=!1;Ua=null;Tb=0;yb=!1;hb=bc=0;ob=1;Ia=0;qb=5126;La=fb=eb=Ka=0;Ca($b)?(pb=!0,Ua=F.createStream(34962,$b),qb=Ua.dtype):(Ua=F.getBuffer($b))?qb=Ua.dtype:"constant"in $b?(ob=2,"number"===typeof $b.constant?(eb=$b.constant,fb=La=Ka=0):(eb=0<$b.constant.length?$b.constant[0]:0,fb=1<$b.constant.length?$b.constant[1]:0,La=2<$b.constant.length?$b.constant[2]:0,Ka=3<$b.constant.length?$b.constant[3]:0)):(Ua=Ca($b.buffer)?F.createStream(34962,$b.buffer):F.getBuffer($b.buffer),
qb="type"in $b?zd[$b.type]:Ua.dtype,yb=!!$b.normalized,hb=$b.size|0,bc=$b.offset|0,Ia=$b.stride|0,Tb=$b.divisor|0);jb=A.location;Wa=p[jb];if(1===ob){Wa.buffer||ga.enableVertexAttribArray(jb);sb=hb||4;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Ua||Wa.normalized!==yb||Wa.offset!==bc||Wa.stride!==Ia)ga.bindBuffer(34962,Ua.buffer),ga.vertexAttribPointer(jb,sb,qb,yb,Ia,bc),Wa.type=qb,Wa.size=sb,Wa.buffer=Ua,Wa.normalized=yb,Wa.offset=bc,Wa.stride=Ia;Wa.divisor!==Tb&&(u.vertexAttribDivisorANGLE(jb,Tb),
Wa.divisor=Tb)}else if(Wa.buffer&&(ga.disableVertexAttribArray(jb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)ga.vertexAttrib4f(jb,eb,fb,La,Ka),Wa.x=eb,Wa.y=fb,Wa.z=La,Wa.w=Ka;rb=ka.location;Pa=p[rb];Pa.buffer||ga.enableVertexAttribArray(rb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==U||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ga.bindBuffer(34962,U.buffer),ga.vertexAttribPointer(rb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=U,Pa.normalized=!1,Pa.offset=0,Pa.stride=
24;0!==Pa.divisor&&(u.vertexAttribDivisorANGLE(rb,0),Pa.divisor=0);Bc=W.location;Ra=p[Bc];Ra.buffer||ga.enableVertexAttribArray(Bc);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==y||!1!==Ra.normalized||8!==Ra.offset||24!==Ra.stride)ga.bindBuffer(34962,y.buffer),ga.vertexAttribPointer(Bc,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=y,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(u.vertexAttribDivisorANGLE(Bc,0),Ra.divisor=0);Jb=a.location;Db=p[Jb];Db.buffer||ga.enableVertexAttribArray(Jb);
if(5126!==Db.type||2!==Db.size||Db.buffer!==t||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)ga.bindBuffer(34962,t.buffer),ga.vertexAttribPointer(Jb,2,5126,!1,24,16),Db.type=5126,Db.size=2,Db.buffer=t,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(u.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Ma=m.call(this,ca,e,0);ga.uniform4f(oa.location,Ma[0],Ma[1],Ma[2],Ma[3]);ga.uniform1f(da.location,e.lineWidth);ga.uniform1f(ta.location,e.capSize);vd=e.scale;ga.uniform2f(l.location,vd[0],
vd[1]);Ya=e.scaleFract;ga.uniform2f(K.location,Ya[0],Ya[1]);Kb=e.translate;ga.uniform2f(J.location,Kb[0],Kb[1]);Lb=e.translateFract;ga.uniform2f(Ea.location,Lb[0],Lb[1]);ga.uniform1f(R.location,e.opacity);(kb=na.elements)?ga.bindBuffer(34963,kb.buffer.buffer):ya.currentVAO&&(kb=ra.getElements(ya.currentVAO.elements))&&ga.bindBuffer(34963,kb.buffer.buffer);Na=na.offset;Zb=e.count;0<Zb?kb?u.drawElementsInstancedANGLE(4,36,kb.type,Na<<(kb.type-5121>>1),Zb):u.drawArraysInstancedANGLE(4,Na,36,Zb):0>Zb&&
(kb?ga.drawElements(4,36,kb.type,Na<<(kb.type-5121>>1)):ga.drawArrays(4,Na,36));Q.dirty=!0;ya.setVAO(null);ca.viewportWidth=q;ca.viewportHeight=ja;D&&(ba.cpuTime+=performance.now()-I);H&&F.destroyStream(N);wc&&F.destroyStream(Bb);cb&&F.destroyStream(Mb);pb&&F.destroyStream(Ua)},scope:function(a,e,f){var l,k,b,p,v,n,L,S,g,w,A,sa,ya,Da,P,Xb,z,ga,ia,R,E,ma,J,D,I,X,va,K,wa,C,m,N,Ga,H,B,ea,Ea,ra,za,G,W,ua,da,Fa,V,oa,Gb,ta,ka,Aa,sd,Ba,Ja,Cc,Z,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,
Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,fa,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,Oa,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md;l=a.viewport;k=l.x|0;b=l.y|0;p="width"in l?l.width|0:ca.framebufferWidth-k;v="height"in l?l.height|0:ca.framebufferHeight-b;n=ca.viewportWidth;
ca.viewportWidth=p;L=ca.viewportHeight;ca.viewportHeight=v;S=lb[0];lb[0]=k;g=lb[1];lb[1]=b;w=lb[2];lb[2]=p;A=lb[3];lb[3]=v;sa=ja[0];ja[0]=0;ya=ja[1];ja[1]=0;Da=ja[2];ja[2]=0;P=ja[3];ja[3]=0;Xb=la.blend_enable;la.blend_enable=!0;z=Ta[0];Ta[0]=32774;ga=Ta[1];Ta[1]=32774;ia=r[0];r[0]=770;R=r[1];r[1]=771;E=r[2];r[2]=773;ma=r[3];r[3]=1;J=la.depth_enable;la.depth_enable=!1;D=a.viewport;I=D.x|0;X=D.y|0;va="width"in D?D.width|0:ca.framebufferWidth-I;K="height"in D?D.height|0:ca.framebufferHeight-X;wa=pa[0];
pa[0]=I;C=pa[1];pa[1]=X;m=pa[2];pa[2]=va;N=pa[3];pa[3]=K;Ga=la.scissor_enable;la.scissor_enable=!0;if(H=Q.profile)B=performance.now(),ba.count++;ea=na.count;na.count=36;Ea=a.count;ra=na.instances;na.instances=Ea;za=na.primitive;na.primitive=4;G=a.capSize;W=xa[5];xa[5]=G;ua=a.lineWidth;da=xa[4];xa[4]=ua;Fa=a.opacity;V=xa[10];xa[10]=Fa;oa=a.range;Gb=xa[18];xa[18]=oa;ta=a.scale;ka=xa[6];xa[6]=ta;Aa=a.scaleFract;sd=xa[7];xa[7]=Aa;Ba=a.translate;Ja=xa[8];xa[8]=Ba;Cc=a.translateFract;Z=xa[9];xa[9]=Cc;Hb=
aa.call(this,ca,a,f);Ib=xa[3];xa[3]=Hb;qc=x.buffer;x.buffer=t;Nb=x.divisor;x.divisor=0;ib=x.normalized;x.normalized=!1;Fb=x.offset;x.offset=16;Cb=x.size;x.size=0;vb=x.state;x.state=1;gb=x.stride;x.stride=24;Yb=x.type;x.type=5126;Ob=x.w;x.w=0;pb=x.x;x.x=0;Ua=x.y;x.y=0;Tb=x.z;x.z=0;yb=M.call(this,ca,a,f);$b.offset=yb;bc=!1;hb=null;ob=0;Ia=!1;Ka=qb=0;eb=1;fb=0;La=5126;rb=sb=Wa=jb=0;Ca($b)?(bc=!0,hb=F.createStream(34962,$b),La=hb.dtype):(hb=F.getBuffer($b))?La=hb.dtype:"constant"in $b?(eb=2,"number"===
typeof $b.constant?(Wa=$b.constant,sb=rb=jb=0):(Wa=0<$b.constant.length?$b.constant[0]:0,sb=1<$b.constant.length?$b.constant[1]:0,rb=2<$b.constant.length?$b.constant[2]:0,jb=3<$b.constant.length?$b.constant[3]:0)):(hb=Ca($b.buffer)?F.createStream(34962,$b.buffer):F.getBuffer($b.buffer),La="type"in $b?zd[$b.type]:hb.dtype,Ia=!!$b.normalized,Ka=$b.size|0,qb=$b.offset|0,fb=$b.stride|0,ob=$b.divisor|0);Pa=u.buffer;u.buffer=hb;Bc=u.divisor;u.divisor=ob;Ra=u.normalized;u.normalized=Ia;Jb=u.offset;u.offset=
qb;Db=u.size;u.size=Ka;Ma=u.state;u.state=eb;fa=u.stride;u.stride=fb;Ya=u.type;u.type=La;Kb=u.w;u.w=jb;Lb=u.x;u.x=Wa;kb=u.y;u.y=sb;Na=u.z;u.z=rb;Zb=O.buffer;O.buffer=U;Qa=O.divisor;O.divisor=0;tb=O.normalized;O.normalized=!1;ub=O.offset;O.offset=0;Sa=O.size;O.size=0;mb=O.state;O.state=1;gc=O.stride;O.stride=24;zc=O.type;O.type=5126;uc=O.w;O.w=0;bb=O.x;O.x=0;jc=O.y;O.y=0;ad=O.z;O.z=0;Xa=ha.call(this,ca,a,f);Ha.offset=Xa;md=!1;zb=null;Za=0;Ub=!1;Vb=sc=0;Pb=1;Kc=0;Qb=5126;Mc=rd=Ec=Xd=0;Ca(Ha)?(md=!0,
zb=F.createStream(34962,Ha),Qb=zb.dtype):(zb=F.getBuffer(Ha))?Qb=zb.dtype:"constant"in Ha?(Pb=2,"number"===typeof Ha.constant?(Ec=Ha.constant,rd=Mc=Xd=0):(Ec=0<Ha.constant.length?Ha.constant[0]:0,rd=1<Ha.constant.length?Ha.constant[1]:0,Mc=2<Ha.constant.length?Ha.constant[2]:0,Xd=3<Ha.constant.length?Ha.constant[3]:0)):(zb=Ca(Ha.buffer)?F.createStream(34962,Ha.buffer):F.getBuffer(Ha.buffer),Qb="type"in Ha?zd[Ha.type]:zb.dtype,Ub=!!Ha.normalized,Vb=Ha.size|0,sc=Ha.offset|0,Kc=Ha.stride|0,Za=Ha.divisor|
0);Wc=d.buffer;d.buffer=zb;td=d.divisor;d.divisor=Za;nc=d.normalized;d.normalized=Ub;vc=d.offset;d.offset=sc;hc=d.size;d.size=Vb;db=d.state;d.state=Pb;rc=d.stride;d.stride=Kc;Sb=d.type;d.type=Qb;Wb=d.w;d.w=Xd;dc=d.x;d.x=Ec;ic=d.y;d.y=rd;xc=d.z;d.z=Mc;Ac=c.buffer;c.buffer=y;bd=c.divisor;c.divisor=0;Pc=c.normalized;c.normalized=!1;Qc=c.offset;c.offset=8;Rc=c.size;c.size=0;Xc=c.state;c.state=1;kd=c.stride;c.stride=24;cd=c.type;c.type=5126;Yc=c.w;c.w=0;kc=c.x;c.x=0;cc=c.y;c.y=0;Zc=c.z;c.z=0;Tc=T.call(this,
ca,a,f);ac.offset=Tc;dd=!1;yc=null;gd=0;xd=!1;Bd=Fe=0;hd=1;Oa=0;Od=5126;Kd=Pd=ke=Yd=0;Ca(ac)?(dd=!0,yc=F.createStream(34962,ac),Od=yc.dtype):(yc=F.getBuffer(ac))?Od=yc.dtype:"constant"in ac?(hd=2,"number"===typeof ac.constant?(ke=ac.constant,Pd=Kd=Yd=0):(ke=0<ac.constant.length?ac.constant[0]:0,Pd=1<ac.constant.length?ac.constant[1]:0,Kd=2<ac.constant.length?ac.constant[2]:0,Yd=3<ac.constant.length?ac.constant[3]:0)):(yc=Ca(ac.buffer)?F.createStream(34962,ac.buffer):F.getBuffer(ac.buffer),Od="type"in
ac?zd[ac.type]:yc.dtype,xd=!!ac.normalized,Bd=ac.size|0,Fe=ac.offset|0,Oa=ac.stride|0,gd=ac.divisor|0);Id=q.buffer;q.buffer=yc;nd=q.divisor;q.divisor=gd;Sc=q.normalized;q.normalized=xd;ud=q.offset;q.offset=Fe;qd=q.size;q.size=Bd;id=q.state;q.state=hd;wd=q.stride;q.stride=Oa;Dd=q.type;q.type=Od;Fd=q.w;q.w=Yd;qe=q.x;q.x=ke;le=q.y;q.y=Pd;Ne=q.z;q.z=Kd;me=Y.call(this,ca,a,f);Rb.offset=me;je=!1;he=null;ue=0;ee=!1;Nc=ne=0;fd=1;ve=0;re=5126;Sd=Rd=Qd=Ld=0;Ca(Rb)?(je=!0,he=F.createStream(34962,Rb),re=he.dtype):
(he=F.getBuffer(Rb))?re=he.dtype:"constant"in Rb?(fd=2,"number"===typeof Rb.constant?(Qd=Rb.constant,Rd=Sd=Ld=0):(Qd=0<Rb.constant.length?Rb.constant[0]:0,Rd=1<Rb.constant.length?Rb.constant[1]:0,Sd=2<Rb.constant.length?Rb.constant[2]:0,Ld=3<Rb.constant.length?Rb.constant[3]:0)):(he=Ca(Rb.buffer)?F.createStream(34962,Rb.buffer):F.getBuffer(Rb.buffer),re="type"in Rb?zd[Rb.type]:he.dtype,ee=!!Rb.normalized,Nc=Rb.size|0,ne=Rb.offset|0,ve=Rb.stride|0,ue=Rb.divisor|0);oe=h.buffer;h.buffer=he;ye=h.divisor;
h.divisor=ue;Be=h.normalized;h.normalized=ee;se=h.offset;h.offset=ne;Re=h.size;h.size=Nc;Se=h.state;h.state=fd;Oe=h.stride;h.stride=ve;we=h.type;h.type=re;Ge=h.w;h.w=Ld;Ie=h.x;h.x=Qd;Je=h.y;h.y=Rd;Ke=h.z;h.z=Sd;He=qa.vert;qa.vert=2;Md=qa.frag;qa.frag=1;Q.dirty=!0;e(ca,a,f);ca.viewportWidth=n;ca.viewportHeight=L;lb[0]=S;lb[1]=g;lb[2]=w;lb[3]=A;ja[0]=sa;ja[1]=ya;ja[2]=Da;ja[3]=P;la.blend_enable=Xb;Ta[0]=z;Ta[1]=ga;r[0]=ia;r[1]=R;r[2]=E;r[3]=ma;la.depth_enable=J;pa[0]=wa;pa[1]=C;pa[2]=m;pa[3]=N;la.scissor_enable=
Ga;H&&(ba.cpuTime+=performance.now()-B);na.count=ea;na.instances=ra;na.primitive=za;xa[5]=W;xa[4]=da;xa[10]=V;xa[18]=Gb;xa[6]=ka;xa[7]=sd;xa[8]=Ja;xa[9]=Z;xa[3]=Ib;x.buffer=qc;x.divisor=Nb;x.normalized=ib;x.offset=Fb;x.size=Cb;x.state=vb;x.stride=gb;x.type=Yb;x.w=Ob;x.x=pb;x.y=Ua;x.z=Tb;bc&&F.destroyStream(hb);u.buffer=Pa;u.divisor=Bc;u.normalized=Ra;u.offset=Jb;u.size=Db;u.state=Ma;u.stride=fa;u.type=Ya;u.w=Kb;u.x=Lb;u.y=kb;u.z=Na;O.buffer=Zb;O.divisor=Qa;O.normalized=tb;O.offset=ub;O.size=Sa;O.state=
mb;O.stride=gc;O.type=zc;O.w=uc;O.x=bb;O.y=jc;O.z=ad;md&&F.destroyStream(zb);d.buffer=Wc;d.divisor=td;d.normalized=nc;d.offset=vc;d.size=hc;d.state=db;d.stride=rc;d.type=Sb;d.w=Wb;d.x=dc;d.y=ic;d.z=xc;c.buffer=Ac;c.divisor=bd;c.normalized=Pc;c.offset=Qc;c.size=Rc;c.state=Xc;c.stride=kd;c.type=cd;c.w=Yc;c.x=kc;c.y=cc;c.z=Zc;dd&&F.destroyStream(yc);q.buffer=Id;q.divisor=nd;q.normalized=Sc;q.offset=ud;q.size=qd;q.state=id;q.stride=wd;q.type=Dd;q.w=Fd;q.x=qe;q.y=le;q.z=Ne;je&&F.destroyStream(he);h.buffer=
oe;h.divisor=ye;h.normalized=Be;h.offset=se;h.size=Re;h.state=Se;h.stride=Oe;h.type=we;h.w=Ge;h.x=Ie;h.y=Je;h.z=Ke;qa.vert=He;qa.frag=Md;Q.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka){var Cc,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,sd,Gb,ia,
L,sa,Da,pa,wa,Ga,ma,X;Cc=b.attributes;W=b.buffer;da=b.context;R=b.current;P=b.draw;z=b.elements;l=b.extensions;K=b.framebuffer;J=b.gl;Ea=b.isBufferArgs;oa=b.next;p=b.shader;F=b.uniforms;ca=b.vao;Q=oa.blend_color;na=R.blend_color;ra=oa.blend_equation;Aa=R.blend_equation;za=oa.blend_func;ga=R.blend_func;Ca=oa.colorMask;la=R.colorMask;qa=oa.depth_range;xa=R.depth_range;ya=oa.polygonOffset_offset;ja=R.polygonOffset_offset;Xb=oa.sample_coverage;Ta=R.sample_coverage;v=oa.scissor_box;r=R.scissor_box;S=oa.stencil_func;
va=R.stencil_func;Fa=oa.stencil_opBack;sd=R.stencil_opBack;Gb=oa.stencil_opFront;ia=R.stencil_opFront;L=oa.viewport;sa=R.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};pa={divisor:1,offset:8,stride:8};wa={divisor:1,offset:8,stride:8};Ga={divisor:1,offset:16,stride:8};ma={divisor:1,offset:16,stride:8};X={divisor:1,offset:0,stride:4};return{batch:function(f,b){var p,v,n,L,F,x;p=K.next;p!==K.cur&&(p?J.bindFramebuffer(36160,p.framebuffer):J.bindFramebuffer(36160,
null),K.cur=p);if(R.dirty){var Q,t,I,y,C,m,H,B,ra,za,G,U,aa,Z,be,Ce,Ye,Ze,Hd,Ae,te,$d,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc;Q=oa.dither;Q!==R.dither&&(Q?J.enable(3024):J.disable(3024),R.dither=Q);t=oa.depth_func;t!==R.depth_func&&(J.depthFunc(t),R.depth_func=t);I=qa[0];y=qa[1];if(I!==xa[0]||y!==xa[1])J.depthRange(I,y),xa[0]=I,xa[1]=y;C=oa.depth_mask;C!==R.depth_mask&&(J.depthMask(C),R.depth_mask=C);m=Ca[0];H=Ca[1];B=Ca[2];ra=Ca[3];if(m!==la[0]||H!==la[1]||B!==la[2]||ra!==la[3])J.colorMask(m,H,B,ra),la[0]=
m,la[1]=H,la[2]=B,la[3]=ra;za=oa.cull_enable;za!==R.cull_enable&&(za?J.enable(2884):J.disable(2884),R.cull_enable=za);G=oa.cull_face;G!==R.cull_face&&(J.cullFace(G),R.cull_face=G);U=oa.frontFace;U!==R.frontFace&&(J.frontFace(U),R.frontFace=U);aa=oa.lineWidth;aa!==R.lineWidth&&(J.lineWidth(aa),R.lineWidth=aa);Z=oa.polygonOffset_enable;Z!==R.polygonOffset_enable&&(Z?J.enable(32823):J.disable(32823),R.polygonOffset_enable=Z);be=ya[0];Ce=ya[1];if(be!==ja[0]||Ce!==ja[1])J.polygonOffset(be,Ce),ja[0]=be,
ja[1]=Ce;Ye=oa.sample_alpha;Ye!==R.sample_alpha&&(Ye?J.enable(32926):J.disable(32926),R.sample_alpha=Ye);Ze=oa.sample_enable;Ze!==R.sample_enable&&(Ze?J.enable(32928):J.disable(32928),R.sample_enable=Ze);Hd=Xb[0];Ae=Xb[1];if(Hd!==Ta[0]||Ae!==Ta[1])J.sampleCoverage(Hd,Ae),Ta[0]=Hd,Ta[1]=Ae;te=oa.stencil_mask;te!==R.stencil_mask&&(J.stencilMask(te),R.stencil_mask=te);$d=S[0];Wd=S[1];Ad=S[2];if($d!==va[0]||Wd!==va[1]||Ad!==va[2])J.stencilFunc($d,Wd,Ad),va[0]=$d,va[1]=Wd,va[2]=Ad;ld=Gb[0];$c=Gb[1];pd=
Gb[2];Lc=Gb[3];if(ld!==ia[0]||$c!==ia[1]||pd!==ia[2]||Lc!==ia[3])J.stencilOpSeparate(ld,$c,pd,Lc),ia[0]=ld,ia[1]=$c,ia[2]=pd,ia[3]=Lc;od=Fa[0];Fc=Fa[1];ed=Fa[2];Oc=Fa[3];if(od!==sd[0]||Fc!==sd[1]||ed!==sd[2]||Oc!==sd[3])J.stencilOpSeparate(od,Fc,ed,Oc),sd[0]=od,sd[1]=Fc,sd[2]=ed,sd[3]=Oc}J.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;J.enable(3042);R.blend_enable=!0;J.blendEquationSeparate(32774,32774);Aa[0]=32774;Aa[1]=32774;J.blendFuncSeparate(770,771,773,1);ga[0]=770;ga[1]=771;ga[2]=773;
ga[3]=1;J.enable(3089);R.scissor_enable=!0;J.disable(2960);R.stencil_enable=!1;if(v=R.profile)n=performance.now(),ba.count+=b;J.useProgram(M.program);L=l.angle_instanced_arrays;var jd,Ab,Eb,tc,wb;ca.setVAO(null);jd=V.location;Ab=Cc[jd];Ab.buffer||J.enableVertexAttribArray(jd);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==g||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)J.bindBuffer(34962,g.buffer),J.vertexAttribPointer(jd,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=g,Ab.normalized=!1,Ab.offset=
0,Ab.stride=8;0!==Ab.divisor&&(L.vertexAttribDivisorANGLE(jd,0),Ab.divisor=0);Eb=E.location;tc=Cc[Eb];tc.buffer||J.enableVertexAttribArray(Eb);if(5126!==tc.type||1!==tc.size||tc.buffer!==k||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)J.bindBuffer(34962,k.buffer),J.vertexAttribPointer(Eb,1,5126,!1,8,4),tc.type=5126,tc.size=1,tc.buffer=k,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(L.vertexAttribDivisorANGLE(Eb,0),tc.divisor=0);(wb=P.elements)?J.bindBuffer(34963,wb.buffer.buffer):
ca.currentVAO&&(wb=z.getElements(ca.currentVAO.elements))&&J.bindBuffer(34963,wb.buffer.buffer);for(F=0;F<b;++F){x=f[F];var wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,fa,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,Oa,Od,Yd,ke,Pd,
Kd,Id,nd,Sc,ud,qd,id;wc=x.viewport;Bb=wc.x|0;Jc=wc.y|0;lc="width"in wc?wc.width|0:da.framebufferWidth-Bb;Gc="height"in wc?wc.height|0:da.framebufferHeight-Jc;Vc=da.viewportWidth;da.viewportWidth=lc;Uc=da.viewportHeight;da.viewportHeight=Gc;J.viewport(Bb,Jc,lc,Gc);sa[0]=Bb;sa[1]=Jc;sa[2]=lc;sa[3]=Gc;(Dc=u.call(this,da,x,F))?J.enable(2929):J.disable(2929);R.depth_enable=Dc;ec=x.viewport;Hc=ec.x|0;oc=ec.y|0;pc="width"in ec?ec.width|0:da.framebufferWidth-Hc;mc="height"in ec?ec.height|0:da.framebufferHeight-
oc;J.scissor(Hc,oc,pc,mc);r[0]=Hc;r[1]=oc;r[2]=pc;r[3]=mc;pa.buffer=x.positionBuffer;fc=!1;$a=null;Ic=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=Cd=0;Ea(pa)?(fc=!0,$a=W.createStream(34962,pa),Va=$a.dtype):($a=W.getBuffer(pa))?Va=$a.dtype:"constant"in pa?(ab=2,"number"===typeof pa.constant?(Hb=pa.constant,Ib=qc=Cd=0):(Hb=0<pa.constant.length?pa.constant[0]:0,Ib=1<pa.constant.length?pa.constant[1]:0,qc=2<pa.constant.length?pa.constant[2]:0,Cd=3<pa.constant.length?pa.constant[3]:0)):($a=Ea(pa.buffer)?
W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Va="type"in pa?Da[pa.type]:$a.dtype,xb=!!pa.normalized,Mb=pa.size|0,cb=pa.offset|0,nb=pa.stride|0,Ic=pa.divisor|0);Nb=ha.location;ib=Cc[Nb];if(1===ab){ib.buffer||J.enableVertexAttribArray(Nb);Fb=Mb||2;if(ib.type!==Va||ib.size!==Fb||ib.buffer!==$a||ib.normalized!==xb||ib.offset!==cb||ib.stride!==nb)J.bindBuffer(34962,$a.buffer),J.vertexAttribPointer(Nb,Fb,Va,xb,nb,cb),ib.type=Va,ib.size=Fb,ib.buffer=$a,ib.normalized=xb,ib.offset=cb,ib.stride=nb;
ib.divisor!==Ic&&(L.vertexAttribDivisorANGLE(Nb,Ic),ib.divisor=Ic)}else if(ib.buffer&&(J.disableVertexAttribArray(Nb),ib.buffer=null),ib.x!==Hb||ib.y!==Ib||ib.z!==qc||ib.w!==Cd)J.vertexAttrib4f(Nb,Hb,Ib,qc,Cd),ib.x=Hb,ib.y=Ib,ib.z=qc,ib.w=Cd;Ga.buffer=x.positionBuffer;Cb=!1;vb=null;gb=0;Yb=!1;pb=Ob=0;Ua=1;Tb=0;yb=5126;Ia=ob=hb=bc=0;Ea(Ga)?(Cb=!0,vb=W.createStream(34962,Ga),yb=vb.dtype):(vb=W.getBuffer(Ga))?yb=vb.dtype:"constant"in Ga?(Ua=2,"number"===typeof Ga.constant?(hb=Ga.constant,ob=Ia=bc=0):
(hb=0<Ga.constant.length?Ga.constant[0]:0,ob=1<Ga.constant.length?Ga.constant[1]:0,Ia=2<Ga.constant.length?Ga.constant[2]:0,bc=3<Ga.constant.length?Ga.constant[3]:0)):(vb=Ea(Ga.buffer)?W.createStream(34962,Ga.buffer):W.getBuffer(Ga.buffer),yb="type"in Ga?Da[Ga.type]:vb.dtype,Yb=!!Ga.normalized,pb=Ga.size|0,Ob=Ga.offset|0,Tb=Ga.stride|0,gb=Ga.divisor|0);qb=c.location;Ka=Cc[qb];if(1===Ua){Ka.buffer||J.enableVertexAttribArray(qb);eb=pb||2;if(Ka.type!==yb||Ka.size!==eb||Ka.buffer!==vb||Ka.normalized!==
Yb||Ka.offset!==Ob||Ka.stride!==Tb)J.bindBuffer(34962,vb.buffer),J.vertexAttribPointer(qb,eb,yb,Yb,Tb,Ob),Ka.type=yb,Ka.size=eb,Ka.buffer=vb,Ka.normalized=Yb,Ka.offset=Ob,Ka.stride=Tb;Ka.divisor!==gb&&(L.vertexAttribDivisorANGLE(qb,gb),Ka.divisor=gb)}else if(Ka.buffer&&(J.disableVertexAttribArray(qb),Ka.buffer=null),Ka.x!==hb||Ka.y!==ob||Ka.z!==Ia||Ka.w!==bc)J.vertexAttrib4f(qb,hb,ob,Ia,bc),Ka.x=hb,Ka.y=ob,Ka.z=Ia,Ka.w=bc;wa.buffer=x.positionFractBuffer;fb=!1;La=null;jb=0;Wa=!1;rb=sb=0;Pa=1;Bc=0;
Ra=5126;fa=Ma=Db=Jb=0;Ea(wa)?(fb=!0,La=W.createStream(34962,wa),Ra=La.dtype):(La=W.getBuffer(wa))?Ra=La.dtype:"constant"in wa?(Pa=2,"number"===typeof wa.constant?(Db=wa.constant,Ma=fa=Jb=0):(Db=0<wa.constant.length?wa.constant[0]:0,Ma=1<wa.constant.length?wa.constant[1]:0,fa=2<wa.constant.length?wa.constant[2]:0,Jb=3<wa.constant.length?wa.constant[3]:0)):(La=Ea(wa.buffer)?W.createStream(34962,wa.buffer):W.getBuffer(wa.buffer),Ra="type"in wa?Da[wa.type]:La.dtype,Wa=!!wa.normalized,rb=wa.size|0,sb=
wa.offset|0,Bc=wa.stride|0,jb=wa.divisor|0);Ya=d.location;Kb=Cc[Ya];if(1===Pa){Kb.buffer||J.enableVertexAttribArray(Ya);Lb=rb||2;if(Kb.type!==Ra||Kb.size!==Lb||Kb.buffer!==La||Kb.normalized!==Wa||Kb.offset!==sb||Kb.stride!==Bc)J.bindBuffer(34962,La.buffer),J.vertexAttribPointer(Ya,Lb,Ra,Wa,Bc,sb),Kb.type=Ra,Kb.size=Lb,Kb.buffer=La,Kb.normalized=Wa,Kb.offset=sb,Kb.stride=Bc;Kb.divisor!==jb&&(L.vertexAttribDivisorANGLE(Ya,jb),Kb.divisor=jb)}else if(Kb.buffer&&(J.disableVertexAttribArray(Ya),Kb.buffer=
null),Kb.x!==Db||Kb.y!==Ma||Kb.z!==fa||Kb.w!==Jb)J.vertexAttrib4f(Ya,Db,Ma,fa,Jb),Kb.x=Db,Kb.y=Ma,Kb.z=fa,Kb.w=Jb;ma.buffer=x.positionFractBuffer;kb=!1;Na=null;Zb=0;Qa=!1;ub=tb=0;Sa=1;mb=0;gc=5126;jc=bb=uc=zc=0;Ea(ma)?(kb=!0,Na=W.createStream(34962,ma),gc=Na.dtype):(Na=W.getBuffer(ma))?gc=Na.dtype:"constant"in ma?(Sa=2,"number"===typeof ma.constant?(uc=ma.constant,bb=jc=zc=0):(uc=0<ma.constant.length?ma.constant[0]:0,bb=1<ma.constant.length?ma.constant[1]:0,jc=2<ma.constant.length?ma.constant[2]:
0,zc=3<ma.constant.length?ma.constant[3]:0)):(Na=Ea(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),gc="type"in ma?Da[ma.type]:Na.dtype,Qa=!!ma.normalized,ub=ma.size|0,tb=ma.offset|0,mb=ma.stride|0,Zb=ma.divisor|0);ad=T.location;Xa=Cc[ad];if(1===Sa){Xa.buffer||J.enableVertexAttribArray(ad);md=ub||2;if(Xa.type!==gc||Xa.size!==md||Xa.buffer!==Na||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)J.bindBuffer(34962,Na.buffer),J.vertexAttribPointer(ad,md,gc,Qa,mb,tb),Xa.type=gc,Xa.size=
md,Xa.buffer=Na,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Zb&&(L.vertexAttribDivisorANGLE(ad,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(J.disableVertexAttribArray(ad),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)J.vertexAttrib4f(ad,uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;X.buffer=x.colorBuffer;zb=!1;Za=null;Ub=0;sc=!1;Pb=Vb=0;Kc=1;Qb=0;Xd=5126;Wc=Mc=rd=Ec=0;Ea(X)?(zb=!0,Za=W.createStream(34962,X),Xd=Za.dtype):(Za=W.getBuffer(X))?Xd=Za.dtype:"constant"in X?(Kc=2,"number"===
typeof X.constant?(rd=X.constant,Mc=Wc=Ec=0):(rd=0<X.constant.length?X.constant[0]:0,Mc=1<X.constant.length?X.constant[1]:0,Wc=2<X.constant.length?X.constant[2]:0,Ec=3<X.constant.length?X.constant[3]:0)):(Za=Ea(X.buffer)?W.createStream(34962,X.buffer):W.getBuffer(X.buffer),Xd="type"in X?Da[X.type]:Za.dtype,sc=!!X.normalized,Pb=X.size|0,Vb=X.offset|0,Qb=X.stride|0,Ub=X.divisor|0);td=q.location;nc=Cc[td];if(1===Kc){nc.buffer||J.enableVertexAttribArray(td);vc=Pb||4;if(nc.type!==Xd||nc.size!==vc||nc.buffer!==
Za||nc.normalized!==sc||nc.offset!==Vb||nc.stride!==Qb)J.bindBuffer(34962,Za.buffer),J.vertexAttribPointer(td,vc,Xd,sc,Qb,Vb),nc.type=Xd,nc.size=vc,nc.buffer=Za,nc.normalized=sc,nc.offset=Vb,nc.stride=Qb;nc.divisor!==Ub&&(L.vertexAttribDivisorANGLE(td,Ub),nc.divisor=Ub)}else if(nc.buffer&&(J.disableVertexAttribArray(td),nc.buffer=null),nc.x!==rd||nc.y!==Mc||nc.z!==Wc||nc.w!==Ec)J.vertexAttrib4f(td,rd,Mc,Wc,Ec),nc.x=rd,nc.y=Mc,nc.z=Wc,nc.w=Ec;hc=x.scale;db=hc[0];Sb=hc[1];F&&rc===db&&Wb===Sb||(rc=db,
Wb=Sb,J.uniform2f(e.location,db,Sb));dc=x.scaleFract;ic=dc[0];Ac=dc[1];F&&xc===ic&&bd===Ac||(xc=ic,bd=Ac,J.uniform2f(N.location,ic,Ac));Pc=x.translate;Qc=Pc[0];Xc=Pc[1];F&&Rc===Qc&&kd===Xc||(Rc=Qc,kd=Xc,J.uniform2f(ta.location,Qc,Xc));cd=x.translateFract;Yc=cd[0];cc=cd[1];F&&kc===Yc&&Zc===cc||(kc=Yc,Zc=cc,J.uniform2f(A.location,Yc,cc));Tc=x.thickness;F&&dd===Tc||(dd=Tc,J.uniform1f(a.location,Tc));yc=x.depth;F&&gd===yc||(gd=yc,J.uniform1f(w.location,yc));xd=O.call(this,da,x,F);Fe=xd[0];hd=xd[1];Od=
xd[2];ke=xd[3];F&&Bd===Fe&&Oa===hd&&Yd===Od&&Pd===ke||(Bd=Fe,Oa=hd,Yd=Od,Pd=ke,J.uniform4f(ka.location,Fe,hd,Od,ke));Kd=x.dashLength;F&&Id===Kd||(Id=Kd,J.uniform1f(Y.location,Kd));nd=x.opacity;F&&Sc===nd||(Sc=nd,J.uniform1f(D.location,nd));(ud=x.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);qd=ud._texture;J.uniform1i(h.location,qd.bind());id=x.count;0<id?wb?L.drawElementsInstancedANGLE(5,4,wb.type,0<<(wb.type-5121>>1),id):L.drawArraysInstancedANGLE(5,0,4,id):0>id&&(wb?J.drawElements(5,
4,wb.type,0<<(wb.type-5121>>1)):J.drawArrays(5,0,4));da.viewportWidth=Vc;da.viewportHeight=Uc;fc&&W.destroyStream($a);Cb&&W.destroyStream(vb);fb&&W.destroyStream(La);kb&&W.destroyStream(Na);zb&&W.destroyStream(Za);qd.unbind()}R.dirty=!0;ca.setVAO(null);v&&(ba.cpuTime+=performance.now()-n)},draw:function(f){var b,p,v,L,x,F,Q,t,u,y,C,m,B,ra,O,za,G,M,U,aa,Z,be,Ce,Ye,Ze,Hd,Ae,te,$d,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,fa,Hb,Ib,
qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb;b=K.next;b!==K.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):J.bindFramebuffer(36160,null),K.cur=b);if(R.dirty){var ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb;ub=oa.dither;ub!==R.dither&&(ub?J.enable(3024):J.disable(3024),R.dither=ub);Sa=oa.depth_func;Sa!==R.depth_func&&(J.depthFunc(Sa),R.depth_func=Sa);mb=qa[0];gc=qa[1];if(mb!==
xa[0]||gc!==xa[1])J.depthRange(mb,gc),xa[0]=mb,xa[1]=gc;zc=oa.depth_mask;zc!==R.depth_mask&&(J.depthMask(zc),R.depth_mask=zc);uc=Ca[0];bb=Ca[1];jc=Ca[2];ad=Ca[3];if(uc!==la[0]||bb!==la[1]||jc!==la[2]||ad!==la[3])J.colorMask(uc,bb,jc,ad),la[0]=uc,la[1]=bb,la[2]=jc,la[3]=ad;Xa=oa.cull_enable;Xa!==R.cull_enable&&(Xa?J.enable(2884):J.disable(2884),R.cull_enable=Xa);md=oa.cull_face;md!==R.cull_face&&(J.cullFace(md),R.cull_face=md);zb=oa.frontFace;zb!==R.frontFace&&(J.frontFace(zb),R.frontFace=zb);Za=oa.lineWidth;
Za!==R.lineWidth&&(J.lineWidth(Za),R.lineWidth=Za);Ub=oa.polygonOffset_enable;Ub!==R.polygonOffset_enable&&(Ub?J.enable(32823):J.disable(32823),R.polygonOffset_enable=Ub);sc=ya[0];Vb=ya[1];if(sc!==ja[0]||Vb!==ja[1])J.polygonOffset(sc,Vb),ja[0]=sc,ja[1]=Vb;Pb=oa.sample_alpha;Pb!==R.sample_alpha&&(Pb?J.enable(32926):J.disable(32926),R.sample_alpha=Pb);Kc=oa.sample_enable;Kc!==R.sample_enable&&(Kc?J.enable(32928):J.disable(32928),R.sample_enable=Kc);Qb=Xb[0];Xd=Xb[1];if(Qb!==Ta[0]||Xd!==Ta[1])J.sampleCoverage(Qb,
Xd),Ta[0]=Qb,Ta[1]=Xd;Ec=oa.stencil_mask;Ec!==R.stencil_mask&&(J.stencilMask(Ec),R.stencil_mask=Ec);rd=S[0];Mc=S[1];Wc=S[2];if(rd!==va[0]||Mc!==va[1]||Wc!==va[2])J.stencilFunc(rd,Mc,Wc),va[0]=rd,va[1]=Mc,va[2]=Wc;td=Gb[0];nc=Gb[1];vc=Gb[2];hc=Gb[3];if(td!==ia[0]||nc!==ia[1]||vc!==ia[2]||hc!==ia[3])J.stencilOpSeparate(td,nc,vc,hc),ia[0]=td,ia[1]=nc,ia[2]=vc,ia[3]=hc;db=Fa[0];rc=Fa[1];Sb=Fa[2];Wb=Fa[3];if(db!==sd[0]||rc!==sd[1]||Sb!==sd[2]||Wb!==sd[3])J.stencilOpSeparate(db,rc,Sb,Wb),sd[0]=db,sd[1]=
rc,sd[2]=Sb,sd[3]=Wb}p=f.viewport;v=p.x|0;L=p.y|0;x="width"in p?p.width|0:da.framebufferWidth-v;F="height"in p?p.height|0:da.framebufferHeight-L;Q=da.viewportWidth;da.viewportWidth=x;t=da.viewportHeight;da.viewportHeight=F;J.viewport(v,L,x,F);sa[0]=v;sa[1]=L;sa[2]=x;sa[3]=F;J.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;J.enable(3042);R.blend_enable=!0;J.blendEquationSeparate(32774,32774);Aa[0]=32774;Aa[1]=32774;J.blendFuncSeparate(770,771,773,1);ga[0]=770;ga[1]=771;ga[2]=773;ga[3]=1;(u=H.call(this,
da,f,0))?J.enable(2929):J.disable(2929);R.depth_enable=u;y=f.viewport;C=y.x|0;m=y.y|0;B="width"in y?y.width|0:da.framebufferWidth-C;ra="height"in y?y.height|0:da.framebufferHeight-m;J.scissor(C,m,B,ra);r[0]=C;r[1]=m;r[2]=B;r[3]=ra;J.enable(3089);R.scissor_enable=!0;J.disable(2960);R.stencil_enable=!1;if(O=R.profile)za=performance.now(),ba.count++;J.useProgram(I.program);G=l.angle_instanced_arrays;ca.setVAO(null);pa.buffer=f.positionBuffer;M=!1;U=null;aa=0;Z=!1;Ce=be=0;Ye=1;Ze=0;Hd=5126;Wd=$d=te=Ae=
0;Ea(pa)?(M=!0,U=W.createStream(34962,pa),Hd=U.dtype):(U=W.getBuffer(pa))?Hd=U.dtype:"constant"in pa?(Ye=2,"number"===typeof pa.constant?(te=pa.constant,$d=Wd=Ae=0):(te=0<pa.constant.length?pa.constant[0]:0,$d=1<pa.constant.length?pa.constant[1]:0,Wd=2<pa.constant.length?pa.constant[2]:0,Ae=3<pa.constant.length?pa.constant[3]:0)):(U=Ea(pa.buffer)?W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Hd="type"in pa?Da[pa.type]:U.dtype,Z=!!pa.normalized,Ce=pa.size|0,be=pa.offset|0,Ze=pa.stride|0,aa=
pa.divisor|0);Ad=ha.location;ld=Cc[Ad];if(1===Ye){ld.buffer||J.enableVertexAttribArray(Ad);$c=Ce||2;if(ld.type!==Hd||ld.size!==$c||ld.buffer!==U||ld.normalized!==Z||ld.offset!==be||ld.stride!==Ze)J.bindBuffer(34962,U.buffer),J.vertexAttribPointer(Ad,$c,Hd,Z,Ze,be),ld.type=Hd,ld.size=$c,ld.buffer=U,ld.normalized=Z,ld.offset=be,ld.stride=Ze;ld.divisor!==aa&&(G.vertexAttribDivisorANGLE(Ad,aa),ld.divisor=aa)}else if(ld.buffer&&(J.disableVertexAttribArray(Ad),ld.buffer=null),ld.x!==te||ld.y!==$d||ld.z!==
Wd||ld.w!==Ae)J.vertexAttrib4f(Ad,te,$d,Wd,Ae),ld.x=te,ld.y=$d,ld.z=Wd,ld.w=Ae;Ga.buffer=f.positionBuffer;pd=!1;Lc=null;od=0;Fc=!1;Oc=ed=0;jd=1;Ab=0;Eb=5126;Bb=wc=wb=tc=0;Ea(Ga)?(pd=!0,Lc=W.createStream(34962,Ga),Eb=Lc.dtype):(Lc=W.getBuffer(Ga))?Eb=Lc.dtype:"constant"in Ga?(jd=2,"number"===typeof Ga.constant?(wb=Ga.constant,wc=Bb=tc=0):(wb=0<Ga.constant.length?Ga.constant[0]:0,wc=1<Ga.constant.length?Ga.constant[1]:0,Bb=2<Ga.constant.length?Ga.constant[2]:0,tc=3<Ga.constant.length?Ga.constant[3]:
0)):(Lc=Ea(Ga.buffer)?W.createStream(34962,Ga.buffer):W.getBuffer(Ga.buffer),Eb="type"in Ga?Da[Ga.type]:Lc.dtype,Fc=!!Ga.normalized,Oc=Ga.size|0,ed=Ga.offset|0,Ab=Ga.stride|0,od=Ga.divisor|0);Jc=c.location;lc=Cc[Jc];if(1===jd){lc.buffer||J.enableVertexAttribArray(Jc);Gc=Oc||2;if(lc.type!==Eb||lc.size!==Gc||lc.buffer!==Lc||lc.normalized!==Fc||lc.offset!==ed||lc.stride!==Ab)J.bindBuffer(34962,Lc.buffer),J.vertexAttribPointer(Jc,Gc,Eb,Fc,Ab,ed),lc.type=Eb,lc.size=Gc,lc.buffer=Lc,lc.normalized=Fc,lc.offset=
ed,lc.stride=Ab;lc.divisor!==od&&(G.vertexAttribDivisorANGLE(Jc,od),lc.divisor=od)}else if(lc.buffer&&(J.disableVertexAttribArray(Jc),lc.buffer=null),lc.x!==wb||lc.y!==wc||lc.z!==Bb||lc.w!==tc)J.vertexAttrib4f(Jc,wb,wc,Bb,tc),lc.x=wb,lc.y=wc,lc.z=Bb,lc.w=tc;wa.buffer=f.positionFractBuffer;Vc=!1;Uc=null;Dc=0;ec=!1;oc=Hc=0;pc=1;mc=0;fc=5126;cb=xb=Ic=$a=0;Ea(wa)?(Vc=!0,Uc=W.createStream(34962,wa),fc=Uc.dtype):(Uc=W.getBuffer(wa))?fc=Uc.dtype:"constant"in wa?(pc=2,"number"===typeof wa.constant?(Ic=wa.constant,
xb=cb=$a=0):(Ic=0<wa.constant.length?wa.constant[0]:0,xb=1<wa.constant.length?wa.constant[1]:0,cb=2<wa.constant.length?wa.constant[2]:0,$a=3<wa.constant.length?wa.constant[3]:0)):(Uc=Ea(wa.buffer)?W.createStream(34962,wa.buffer):W.getBuffer(wa.buffer),fc="type"in wa?Da[wa.type]:Uc.dtype,ec=!!wa.normalized,oc=wa.size|0,Hc=wa.offset|0,mc=wa.stride|0,Dc=wa.divisor|0);Mb=d.location;ab=Cc[Mb];if(1===pc){ab.buffer||J.enableVertexAttribArray(Mb);nb=oc||2;if(ab.type!==fc||ab.size!==nb||ab.buffer!==Uc||ab.normalized!==
ec||ab.offset!==Hc||ab.stride!==mc)J.bindBuffer(34962,Uc.buffer),J.vertexAttribPointer(Mb,nb,fc,ec,mc,Hc),ab.type=fc,ab.size=nb,ab.buffer=Uc,ab.normalized=ec,ab.offset=Hc,ab.stride=mc;ab.divisor!==Dc&&(G.vertexAttribDivisorANGLE(Mb,Dc),ab.divisor=Dc)}else if(ab.buffer&&(J.disableVertexAttribArray(Mb),ab.buffer=null),ab.x!==Ic||ab.y!==xb||ab.z!==cb||ab.w!==$a)J.vertexAttrib4f(Mb,Ic,xb,cb,$a),ab.x=Ic,ab.y=xb,ab.z=cb,ab.w=$a;ma.buffer=f.positionFractBuffer;Va=!1;fa=null;Hb=0;Ib=!1;Nb=qc=0;ib=1;Fb=0;
Cb=5126;Ob=Yb=gb=vb=0;Ea(ma)?(Va=!0,fa=W.createStream(34962,ma),Cb=fa.dtype):(fa=W.getBuffer(ma))?Cb=fa.dtype:"constant"in ma?(ib=2,"number"===typeof ma.constant?(gb=ma.constant,Yb=Ob=vb=0):(gb=0<ma.constant.length?ma.constant[0]:0,Yb=1<ma.constant.length?ma.constant[1]:0,Ob=2<ma.constant.length?ma.constant[2]:0,vb=3<ma.constant.length?ma.constant[3]:0)):(fa=Ea(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),Cb="type"in ma?Da[ma.type]:fa.dtype,Ib=!!ma.normalized,Nb=ma.size|0,qc=
ma.offset|0,Fb=ma.stride|0,Hb=ma.divisor|0);pb=T.location;Ua=Cc[pb];if(1===ib){Ua.buffer||J.enableVertexAttribArray(pb);Tb=Nb||2;if(Ua.type!==Cb||Ua.size!==Tb||Ua.buffer!==fa||Ua.normalized!==Ib||Ua.offset!==qc||Ua.stride!==Fb)J.bindBuffer(34962,fa.buffer),J.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=Tb,Ua.buffer=fa,Ua.normalized=Ib,Ua.offset=qc,Ua.stride=Fb;Ua.divisor!==Hb&&(G.vertexAttribDivisorANGLE(pb,Hb),Ua.divisor=Hb)}else if(Ua.buffer&&(J.disableVertexAttribArray(pb),Ua.buffer=
null),Ua.x!==gb||Ua.y!==Yb||Ua.z!==Ob||Ua.w!==vb)J.vertexAttrib4f(pb,gb,Yb,Ob,vb),Ua.x=gb,Ua.y=Yb,Ua.z=Ob,Ua.w=vb;X.buffer=f.colorBuffer;yb=!1;bc=null;hb=0;ob=!1;qb=Ia=0;Ka=1;eb=0;fb=5126;sb=Wa=jb=La=0;Ea(X)?(yb=!0,bc=W.createStream(34962,X),fb=bc.dtype):(bc=W.getBuffer(X))?fb=bc.dtype:"constant"in X?(Ka=2,"number"===typeof X.constant?(jb=X.constant,Wa=sb=La=0):(jb=0<X.constant.length?X.constant[0]:0,Wa=1<X.constant.length?X.constant[1]:0,sb=2<X.constant.length?X.constant[2]:0,La=3<X.constant.length?
X.constant[3]:0)):(bc=Ea(X.buffer)?W.createStream(34962,X.buffer):W.getBuffer(X.buffer),fb="type"in X?Da[X.type]:bc.dtype,ob=!!X.normalized,qb=X.size|0,Ia=X.offset|0,eb=X.stride|0,hb=X.divisor|0);rb=q.location;Pa=Cc[rb];if(1===Ka){Pa.buffer||J.enableVertexAttribArray(rb);Bc=qb||4;if(Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==bc||Pa.normalized!==ob||Pa.offset!==Ia||Pa.stride!==eb)J.bindBuffer(34962,bc.buffer),J.vertexAttribPointer(rb,Bc,fb,ob,eb,Ia),Pa.type=fb,Pa.size=Bc,Pa.buffer=bc,Pa.normalized=ob,
Pa.offset=Ia,Pa.stride=eb;Pa.divisor!==hb&&(G.vertexAttribDivisorANGLE(rb,hb),Pa.divisor=hb)}else if(Pa.buffer&&(J.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==jb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==La)J.vertexAttrib4f(rb,jb,Wa,sb,La),Pa.x=jb,Pa.y=Wa,Pa.z=sb,Pa.w=La;Ra=V.location;Jb=Cc[Ra];Jb.buffer||J.enableVertexAttribArray(Ra);if(5126!==Jb.type||1!==Jb.size||Jb.buffer!==g||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)J.bindBuffer(34962,g.buffer),J.vertexAttribPointer(Ra,1,5126,!1,8,0),Jb.type=
5126,Jb.size=1,Jb.buffer=g,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(G.vertexAttribDivisorANGLE(Ra,0),Jb.divisor=0);Db=E.location;Ma=Cc[Db];Ma.buffer||J.enableVertexAttribArray(Db);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==k||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)J.bindBuffer(34962,k.buffer),J.vertexAttribPointer(Db,1,5126,!1,8,4),Ma.type=5126,Ma.size=1,Ma.buffer=k,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(G.vertexAttribDivisorANGLE(Db,0),Ma.divisor=0);
vd=f.scale;J.uniform2f(e.location,vd[0],vd[1]);Ya=f.scaleFract;J.uniform2f(N.location,Ya[0],Ya[1]);Kb=f.translate;J.uniform2f(ta.location,Kb[0],Kb[1]);Lb=f.translateFract;J.uniform2f(A.location,Lb[0],Lb[1]);J.uniform1f(a.location,f.thickness);J.uniform1f(w.location,f.depth);kb=n.call(this,da,f,0);J.uniform4f(ka.location,kb[0],kb[1],kb[2],kb[3]);J.uniform1f(Y.location,f.dashLength);J.uniform1f(D.location,f.opacity);(Na=f.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);Zb=Na._texture;J.uniform1i(h.location,
Zb.bind());(Qa=P.elements)?J.bindBuffer(34963,Qa.buffer.buffer):ca.currentVAO&&(Qa=z.getElements(ca.currentVAO.elements))&&J.bindBuffer(34963,Qa.buffer.buffer);tb=f.count;0<tb?Qa?G.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),tb):G.drawArraysInstancedANGLE(5,0,4,tb):0>tb&&(Qa?J.drawElements(5,4,Qa.type,0<<(Qa.type-5121>>1)):J.drawArrays(5,0,4));R.dirty=!0;ca.setVAO(null);da.viewportWidth=Q;da.viewportHeight=t;O&&(ba.cpuTime+=performance.now()-za);M&&W.destroyStream(U);pd&&W.destroyStream(Lc);
Vc&&W.destroyStream(Uc);Va&&W.destroyStream(fa);yb&&W.destroyStream(bc);Zb.unbind()},scope:function(a,e,c){var d,h,l,b,r,q,n,ja,S,w,A,sa,ya,Xb,z,ga,ia,E,J,D,I,u,va,K,ca,N,H,T,O,M,la,Ta,Y,ha,xa,qa,Fa,Ca,V,Gb,na,ta,ka,Aa,sd,Cc,Z,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,fa,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,
Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,Oa,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe;d=a.viewport;h=d.x|0;l=d.y|0;b="width"in d?d.width|0:da.framebufferWidth-h;r="height"in d?d.height|0:da.framebufferHeight-l;q=da.viewportWidth;da.viewportWidth=b;n=da.viewportHeight;da.viewportHeight=r;ja=L[0];L[0]=h;S=L[1];L[1]=l;w=L[2];L[2]=b;A=L[3];L[3]=
r;sa=Q[0];Q[0]=0;ya=Q[1];Q[1]=0;Xb=Q[2];Q[2]=0;z=Q[3];Q[3]=0;ga=oa.blend_enable;oa.blend_enable=!0;ia=ra[0];ra[0]=32774;E=ra[1];ra[1]=32774;J=za[0];za[0]=770;D=za[1];za[1]=771;I=za[2];za[2]=773;u=za[3];za[3]=1;va=f.call(this,da,a,c);K=oa.depth_enable;oa.depth_enable=va;ca=a.viewport;N=ca.x|0;H=ca.y|0;T="width"in ca?ca.width|0:da.framebufferWidth-N;O="height"in ca?ca.height|0:da.framebufferHeight-H;M=v[0];v[0]=N;la=v[1];v[1]=H;Ta=v[2];v[2]=T;Y=v[3];v[3]=O;ha=oa.scissor_enable;oa.scissor_enable=!0;
xa=oa.stencil_enable;oa.stencil_enable=!1;if(qa=R.profile)Fa=performance.now(),ba.count++;Ca=P.offset;P.offset=0;V=P.count;P.count=4;Gb=a.count;na=P.instances;P.instances=Gb;ta=P.primitive;P.primitive=5;ka=a.dashLength;Aa=F[23];F[23]=ka;sd=a.dashTexture;Cc=F[24];F[24]=sd;Z=a.depth;Vc=F[22];F[22]=Z;Uc=a.id;Dc=F[31];F[31]=Uc;ec=a.miterLimit;Hc=F[32];F[32]=ec;oc=B.call(this,da,a,c);pc=F[33];F[33]=oc;mc=a.opacity;fc=F[10];F[10]=mc;$a=da.pixelRatio;Ic=F[34];F[34]=$a;xb=a.scale;cb=F[6];F[6]=xb;Mb=a.scaleFract;
ab=F[7];F[7]=Mb;nb=a.thickness;Va=F[21];F[21]=nb;fa=a.translate;Hb=F[8];F[8]=fa;Ib=a.translateFract;qc=F[9];F[9]=Ib;Nb=C.call(this,da,a,c);ib=F[3];F[3]=Nb;pa.buffer=a.positionBuffer;Fb=!1;Cb=null;vb=0;gb=!1;Ob=Yb=0;pb=1;Ua=0;Tb=5126;ob=hb=bc=yb=0;Ea(pa)?(Fb=!0,Cb=W.createStream(34962,pa),Tb=Cb.dtype):(Cb=W.getBuffer(pa))?Tb=Cb.dtype:"constant"in pa?(pb=2,"number"===typeof pa.constant?(bc=pa.constant,hb=ob=yb=0):(bc=0<pa.constant.length?pa.constant[0]:0,hb=1<pa.constant.length?pa.constant[1]:0,ob=
2<pa.constant.length?pa.constant[2]:0,yb=3<pa.constant.length?pa.constant[3]:0)):(Cb=Ea(pa.buffer)?W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Tb="type"in pa?Da[pa.type]:Cb.dtype,gb=!!pa.normalized,Ob=pa.size|0,Yb=pa.offset|0,Ua=pa.stride|0,vb=pa.divisor|0);Ia=G.buffer;G.buffer=Cb;qb=G.divisor;G.divisor=vb;Ka=G.normalized;G.normalized=gb;eb=G.offset;G.offset=Yb;fb=G.size;G.size=Ob;La=G.state;G.state=pb;jb=G.stride;G.stride=Ua;Wa=G.type;G.type=Tb;sb=G.w;G.w=yb;rb=G.x;G.x=bc;Pa=G.y;G.y=hb;
Bc=G.z;G.z=ob;wa.buffer=a.positionFractBuffer;Ra=!1;Jb=null;Db=0;Ma=!1;Ya=vd=0;Kb=1;Lb=0;kb=5126;tb=Qa=Zb=Na=0;Ea(wa)?(Ra=!0,Jb=W.createStream(34962,wa),kb=Jb.dtype):(Jb=W.getBuffer(wa))?kb=Jb.dtype:"constant"in wa?(Kb=2,"number"===typeof wa.constant?(Zb=wa.constant,Qa=tb=Na=0):(Zb=0<wa.constant.length?wa.constant[0]:0,Qa=1<wa.constant.length?wa.constant[1]:0,tb=2<wa.constant.length?wa.constant[2]:0,Na=3<wa.constant.length?wa.constant[3]:0)):(Jb=Ea(wa.buffer)?W.createStream(34962,wa.buffer):W.getBuffer(wa.buffer),
kb="type"in wa?Da[wa.type]:Jb.dtype,Ma=!!wa.normalized,Ya=wa.size|0,vd=wa.offset|0,Lb=wa.stride|0,Db=wa.divisor|0);ub=U.buffer;U.buffer=Jb;Sa=U.divisor;U.divisor=Db;mb=U.normalized;U.normalized=Ma;gc=U.offset;U.offset=vd;zc=U.size;U.size=Ya;uc=U.state;U.state=Kb;bb=U.stride;U.stride=Lb;jc=U.type;U.type=kb;ad=U.w;U.w=Na;Xa=U.x;U.x=Zb;md=U.y;U.y=Qa;zb=U.z;U.z=tb;Ga.buffer=a.positionBuffer;Za=!1;Ub=null;sc=0;Vb=!1;Kc=Pb=0;Qb=1;Xd=0;Ec=5126;td=Wc=Mc=rd=0;Ea(Ga)?(Za=!0,Ub=W.createStream(34962,Ga),Ec=Ub.dtype):
(Ub=W.getBuffer(Ga))?Ec=Ub.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Mc=Ga.constant,Wc=td=rd=0):(Mc=0<Ga.constant.length?Ga.constant[0]:0,Wc=1<Ga.constant.length?Ga.constant[1]:0,td=2<Ga.constant.length?Ga.constant[2]:0,rd=3<Ga.constant.length?Ga.constant[3]:0)):(Ub=Ea(Ga.buffer)?W.createStream(34962,Ga.buffer):W.getBuffer(Ga.buffer),Ec="type"in Ga?Da[Ga.type]:Ub.dtype,Vb=!!Ga.normalized,Kc=Ga.size|0,Pb=Ga.offset|0,Xd=Ga.stride|0,sc=Ga.divisor|0);nc=y.buffer;y.buffer=Ub;vc=y.divisor;
y.divisor=sc;hc=y.normalized;y.normalized=Vb;db=y.offset;y.offset=Pb;rc=y.size;y.size=Kc;Sb=y.state;y.state=Qb;Wb=y.stride;y.stride=Xd;dc=y.type;y.type=Ec;ic=y.w;y.w=rd;xc=y.x;y.x=Mc;Ac=y.y;y.y=Wc;bd=y.z;y.z=td;ma.buffer=a.positionFractBuffer;Pc=!1;Qc=null;Rc=0;Xc=!1;cd=kd=0;Yc=1;kc=0;cc=5126;yc=dd=Tc=Zc=0;Ea(ma)?(Pc=!0,Qc=W.createStream(34962,ma),cc=Qc.dtype):(Qc=W.getBuffer(ma))?cc=Qc.dtype:"constant"in ma?(Yc=2,"number"===typeof ma.constant?(Tc=ma.constant,dd=yc=Zc=0):(Tc=0<ma.constant.length?
ma.constant[0]:0,dd=1<ma.constant.length?ma.constant[1]:0,yc=2<ma.constant.length?ma.constant[2]:0,Zc=3<ma.constant.length?ma.constant[3]:0)):(Qc=Ea(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),cc="type"in ma?Da[ma.type]:Qc.dtype,Xc=!!ma.normalized,cd=ma.size|0,kd=ma.offset|0,kc=ma.stride|0,Rc=ma.divisor|0);gd=t.buffer;t.buffer=Qc;xd=t.divisor;t.divisor=Rc;Fe=t.normalized;t.normalized=Xc;Bd=t.offset;t.offset=kd;hd=t.size;t.size=cd;Oa=t.state;t.state=Yc;Od=t.stride;t.stride=kc;
Yd=t.type;t.type=cc;ke=t.w;t.w=Zc;Pd=t.x;t.x=Tc;Kd=t.y;t.y=dd;Id=t.z;t.z=yc;X.buffer=a.colorBuffer;nd=!1;Sc=null;ud=0;qd=!1;wd=id=0;Dd=1;Fd=0;qe=5126;je=me=Ne=le=0;Ea(X)?(nd=!0,Sc=W.createStream(34962,X),qe=Sc.dtype):(Sc=W.getBuffer(X))?qe=Sc.dtype:"constant"in X?(Dd=2,"number"===typeof X.constant?(Ne=X.constant,me=je=le=0):(Ne=0<X.constant.length?X.constant[0]:0,me=1<X.constant.length?X.constant[1]:0,je=2<X.constant.length?X.constant[2]:0,le=3<X.constant.length?X.constant[3]:0)):(Sc=Ea(X.buffer)?
W.createStream(34962,X.buffer):W.getBuffer(X.buffer),qe="type"in X?Da[X.type]:Sc.dtype,qd=!!X.normalized,wd=X.size|0,id=X.offset|0,Fd=X.stride|0,ud=X.divisor|0);he=m.buffer;m.buffer=Sc;ue=m.divisor;m.divisor=ud;ee=m.normalized;m.normalized=qd;ne=m.offset;m.offset=id;Nc=m.size;m.size=wd;fd=m.state;m.state=Dd;ve=m.stride;m.stride=Fd;re=m.type;m.type=qe;Ld=m.w;m.w=le;Qd=m.x;m.x=Ne;Rd=m.y;m.y=me;Sd=m.z;m.z=je;oe=aa.buffer;aa.buffer=g;ye=aa.divisor;aa.divisor=0;Be=aa.normalized;aa.normalized=!1;se=aa.offset;
aa.offset=0;Re=aa.size;aa.size=0;Se=aa.state;aa.state=1;Oe=aa.stride;aa.stride=8;we=aa.type;aa.type=5126;Ge=aa.w;aa.w=0;Ie=aa.x;aa.x=0;Je=aa.y;aa.y=0;Ke=aa.z;aa.z=0;He=x.buffer;x.buffer=k;Md=x.divisor;x.divisor=0;Zd=x.normalized;x.normalized=!1;de=x.offset;x.offset=4;fe=x.size;x.size=0;Le=x.state;x.state=1;Jd=x.stride;x.stride=8;Td=x.type;x.type=5126;De=x.w;x.w=0;Me=x.x;x.x=0;bf=x.y;x.y=0;af=x.z;x.z=0;Te=p.vert;p.vert=20;Pe=p.frag;p.frag=19;R.dirty=!0;e(da,a,c);da.viewportWidth=q;da.viewportHeight=
n;L[0]=ja;L[1]=S;L[2]=w;L[3]=A;Q[0]=sa;Q[1]=ya;Q[2]=Xb;Q[3]=z;oa.blend_enable=ga;ra[0]=ia;ra[1]=E;za[0]=J;za[1]=D;za[2]=I;za[3]=u;oa.depth_enable=K;v[0]=M;v[1]=la;v[2]=Ta;v[3]=Y;oa.scissor_enable=ha;oa.stencil_enable=xa;qa&&(ba.cpuTime+=performance.now()-Fa);P.offset=Ca;P.count=V;P.instances=na;P.primitive=ta;F[23]=Aa;F[24]=Cc;F[22]=Vc;F[31]=Dc;F[32]=Hc;F[33]=pc;F[10]=fc;F[34]=Ic;F[6]=cb;F[7]=ab;F[21]=Va;F[8]=Hb;F[9]=qc;F[3]=ib;Fb&&W.destroyStream(Cb);G.buffer=Ia;G.divisor=qb;G.normalized=Ka;G.offset=
eb;G.size=fb;G.state=La;G.stride=jb;G.type=Wa;G.w=sb;G.x=rb;G.y=Pa;G.z=Bc;Ra&&W.destroyStream(Jb);U.buffer=ub;U.divisor=Sa;U.normalized=mb;U.offset=gc;U.size=zc;U.state=uc;U.stride=bb;U.type=jc;U.w=ad;U.x=Xa;U.y=md;U.z=zb;Za&&W.destroyStream(Ub);y.buffer=nc;y.divisor=vc;y.normalized=hc;y.offset=db;y.size=rc;y.state=Sb;y.stride=Wb;y.type=dc;y.w=ic;y.x=xc;y.y=Ac;y.z=bd;Pc&&W.destroyStream(Qc);t.buffer=gd;t.divisor=xd;t.normalized=Fe;t.offset=Bd;t.size=hd;t.state=Oa;t.stride=Od;t.type=Yd;t.w=ke;t.x=
Pd;t.y=Kd;t.z=Id;nd&&W.destroyStream(Sc);m.buffer=he;m.divisor=ue;m.normalized=ee;m.offset=ne;m.size=Nc;m.state=fd;m.stride=ve;m.type=re;m.w=Ld;m.x=Qd;m.y=Rd;m.z=Sd;aa.buffer=oe;aa.divisor=ye;aa.normalized=Be;aa.offset=se;aa.size=Re;aa.state=Se;aa.stride=Oe;aa.type=we;aa.w=Ge;aa.x=Ie;aa.y=Je;aa.z=Ke;x.buffer=He;x.divisor=Md;x.normalized=Zd;x.offset=de;x.size=fe;x.state=Le;x.stride=Jd;x.type=Td;x.w=De;x.x=Me;x.y=bf;x.z=af;p.vert=Te;p.frag=Pe;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(b,
ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Cc,W,da,R){var P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,sd,Gb,ia,L,sa,Da,pa,wa,Ga,ma,X,ua,Ja,Ba,lb,ea;P=b.attributes;z=b.buffer;l=b.context;K=b.current;J=b.draw;Ea=b.elements;oa=b.extensions;p=b.framebuffer;F=b.gl;ca=b.isBufferArgs;Q=b.next;na=b.shader;ra=b.uniforms;Aa=b.vao;za=Q.blend_color;ga=K.blend_color;Ca=Q.blend_equation;la=K.blend_equation;qa=Q.blend_func;xa=K.blend_func;ya=Q.colorMask;
ja=K.colorMask;Xb=Q.depth_range;Ta=K.depth_range;v=Q.polygonOffset_offset;r=K.polygonOffset_offset;S=Q.sample_coverage;va=K.sample_coverage;Fa=Q.scissor_box;sd=K.scissor_box;Gb=Q.stencil_func;ia=K.stencil_func;L=Q.stencil_opBack;sa=K.stencil_opBack;Da=Q.stencil_opFront;pa=K.stencil_opFront;wa=Q.viewport;Ga=K.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ja={divisor:1,offset:4,
stride:4};Ba={divisor:1,offset:16,stride:8};lb={divisor:1,offset:24,stride:8};ea={divisor:1,offset:0,stride:8};return{batch:function(f,b){var n,x,t,I,u,y;n=p.next;n!==p.cur&&(n?F.bindFramebuffer(36160,n.framebuffer):F.bindFramebuffer(36160,null),p.cur=n);if(K.dirty){var C,wa,m,H,B,ra,G,za,M,U,qa,aa,Fa,Ca,na,Z,$d,fa,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb;C=Q.dither;C!==K.dither&&(C?F.enable(3024):F.disable(3024),K.dither=C);wa=Q.depth_func;wa!==K.depth_func&&(F.depthFunc(wa),K.depth_func=wa);m=Xb[0];
H=Xb[1];if(m!==Ta[0]||H!==Ta[1])F.depthRange(m,H),Ta[0]=m,Ta[1]=H;B=Q.depth_mask;B!==K.depth_mask&&(F.depthMask(B),K.depth_mask=B);ra=ya[0];G=ya[1];za=ya[2];M=ya[3];if(ra!==ja[0]||G!==ja[1]||za!==ja[2]||M!==ja[3])F.colorMask(ra,G,za,M),ja[0]=ra,ja[1]=G,ja[2]=za,ja[3]=M;U=Q.frontFace;U!==K.frontFace&&(F.frontFace(U),K.frontFace=U);qa=Q.lineWidth;qa!==K.lineWidth&&(F.lineWidth(qa),K.lineWidth=qa);aa=Q.polygonOffset_enable;aa!==K.polygonOffset_enable&&(aa?F.enable(32823):F.disable(32823),K.polygonOffset_enable=
aa);Fa=v[0];Ca=v[1];if(Fa!==r[0]||Ca!==r[1])F.polygonOffset(Fa,Ca),r[0]=Fa,r[1]=Ca;na=Q.sample_alpha;na!==K.sample_alpha&&(na?F.enable(32926):F.disable(32926),K.sample_alpha=na);Z=Q.sample_enable;Z!==K.sample_enable&&(Z?F.enable(32928):F.disable(32928),K.sample_enable=Z);$d=S[0];fa=S[1];if($d!==va[0]||fa!==va[1])F.sampleCoverage($d,fa),va[0]=$d,va[1]=fa;Ad=Q.stencil_mask;Ad!==K.stencil_mask&&(F.stencilMask(Ad),K.stencil_mask=Ad);ld=Gb[0];$c=Gb[1];pd=Gb[2];if(ld!==ia[0]||$c!==ia[1]||pd!==ia[2])F.stencilFunc(ld,
$c,pd),ia[0]=ld,ia[1]=$c,ia[2]=pd;Lc=Da[0];od=Da[1];Fc=Da[2];ed=Da[3];if(Lc!==pa[0]||od!==pa[1]||Fc!==pa[2]||ed!==pa[3])F.stencilOpSeparate(Lc,od,Fc,ed),pa[0]=Lc,pa[1]=od,pa[2]=Fc,pa[3]=ed;Oc=L[0];jd=L[1];Ab=L[2];Eb=L[3];if(Oc!==sa[0]||jd!==sa[1]||Ab!==sa[2]||Eb!==sa[3])F.stencilOpSeparate(Oc,jd,Ab,Eb),sa[0]=Oc,sa[1]=jd,sa[2]=Ab,sa[3]=Eb}F.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;F.enable(3042);K.blend_enable=!0;F.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;F.blendFuncSeparate(770,
771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;F.enable(2884);K.cull_enable=!0;F.cullFace(1029);K.cull_face=1029;F.enable(3089);K.scissor_enable=!0;F.disable(2960);K.stencil_enable=!1;if(x=K.profile)t=performance.now(),ba.count+=b;F.useProgram(O.program);I=oa.angle_instanced_arrays;var tc,wb,wc,Bb,Jc;Aa.setVAO(null);tc=D.location;wb=P[tc];wb.buffer||F.enableVertexAttribArray(tc);if(5126!==wb.type||1!==wb.size||wb.buffer!==g||!1!==wb.normalized||0!==wb.offset||8!==wb.stride)F.bindBuffer(34962,g.buffer),
F.vertexAttribPointer(tc,1,5126,!1,8,0),wb.type=5126,wb.size=1,wb.buffer=g,wb.normalized=!1,wb.offset=0,wb.stride=8;0!==wb.divisor&&(I.vertexAttribDivisorANGLE(tc,0),wb.divisor=0);wc=e.location;Bb=P[wc];Bb.buffer||F.enableVertexAttribArray(wc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==k||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)F.bindBuffer(34962,k.buffer),F.vertexAttribPointer(wc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=k,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&
(I.vertexAttribDivisorANGLE(wc,0),Bb.divisor=0);(Jc=J.elements)?F.bindBuffer(34963,Jc.buffer.buffer):Aa.currentVAO&&(Jc=Ea.getElements(Aa.currentVAO.elements))&&F.bindBuffer(34963,Jc.buffer.buffer);for(u=0;u<b;++u){y=f[u];var lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,
rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,Oa,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc;lc=y.viewport;Gc=lc.x|0;Vc=lc.y|0;Uc="width"in lc?lc.width|0:l.framebufferWidth-Gc;Dc="height"in lc?lc.height|0:l.framebufferHeight-Vc;ec=l.viewportWidth;l.viewportWidth=Uc;Hc=l.viewportHeight;l.viewportHeight=Dc;F.viewport(Gc,Vc,Uc,Dc);Ga[0]=Gc;Ga[1]=Vc;Ga[2]=Uc;Ga[3]=Dc;(oc=ha.call(this,l,y,u))?F.enable(2929):F.disable(2929);K.depth_enable=oc;pc=
y.viewport;mc=pc.x|0;fc=pc.y|0;$a="width"in pc?pc.width|0:l.framebufferWidth-mc;Ic="height"in pc?pc.height|0:l.framebufferHeight-fc;F.scissor(mc,fc,$a,Ic);sd[0]=mc;sd[1]=fc;sd[2]=$a;sd[3]=Ic;ua.buffer=y.positionBuffer;xb=!1;cb=null;Mb=0;ab=!1;Va=nb=0;Cd=1;Hb=0;Ib=5126;Fb=ib=Nb=qc=0;ca(ua)?(xb=!0,cb=z.createStream(34962,ua),Ib=cb.dtype):(cb=z.getBuffer(ua))?Ib=cb.dtype:"constant"in ua?(Cd=2,"number"===typeof ua.constant?(Nb=ua.constant,ib=Fb=qc=0):(Nb=0<ua.constant.length?ua.constant[0]:0,ib=1<ua.constant.length?
ua.constant[1]:0,Fb=2<ua.constant.length?ua.constant[2]:0,qc=3<ua.constant.length?ua.constant[3]:0)):(cb=ca(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),Ib="type"in ua?ma[ua.type]:cb.dtype,ab=!!ua.normalized,Va=ua.size|0,nb=ua.offset|0,Hb=ua.stride|0,Mb=ua.divisor|0);Cb=q.location;vb=P[Cb];if(1===Cd){vb.buffer||F.enableVertexAttribArray(Cb);gb=Va||2;if(vb.type!==Ib||vb.size!==gb||vb.buffer!==cb||vb.normalized!==ab||vb.offset!==nb||vb.stride!==Hb)F.bindBuffer(34962,cb.buffer),
F.vertexAttribPointer(Cb,gb,Ib,ab,Hb,nb),vb.type=Ib,vb.size=gb,vb.buffer=cb,vb.normalized=ab,vb.offset=nb,vb.stride=Hb;vb.divisor!==Mb&&(I.vertexAttribDivisorANGLE(Cb,Mb),vb.divisor=Mb)}else if(vb.buffer&&(F.disableVertexAttribArray(Cb),vb.buffer=null),vb.x!==Nb||vb.y!==ib||vb.z!==Fb||vb.w!==qc)F.vertexAttrib4f(Cb,Nb,ib,Fb,qc),vb.x=Nb,vb.y=ib,vb.z=Fb,vb.w=qc;Ba.buffer=y.positionBuffer;Yb=!1;Ob=null;pb=0;Ua=!1;yb=Tb=0;bc=1;hb=0;ob=5126;eb=Ka=qb=Ia=0;ca(Ba)?(Yb=!0,Ob=z.createStream(34962,Ba),ob=Ob.dtype):
(Ob=z.getBuffer(Ba))?ob=Ob.dtype:"constant"in Ba?(bc=2,"number"===typeof Ba.constant?(qb=Ba.constant,Ka=eb=Ia=0):(qb=0<Ba.constant.length?Ba.constant[0]:0,Ka=1<Ba.constant.length?Ba.constant[1]:0,eb=2<Ba.constant.length?Ba.constant[2]:0,Ia=3<Ba.constant.length?Ba.constant[3]:0)):(Ob=ca(Ba.buffer)?z.createStream(34962,Ba.buffer):z.getBuffer(Ba.buffer),ob="type"in Ba?ma[Ba.type]:Ob.dtype,Ua=!!Ba.normalized,yb=Ba.size|0,Tb=Ba.offset|0,hb=Ba.stride|0,pb=Ba.divisor|0);fb=h.location;La=P[fb];if(1===bc){La.buffer||
F.enableVertexAttribArray(fb);jb=yb||2;if(La.type!==ob||La.size!==jb||La.buffer!==Ob||La.normalized!==Ua||La.offset!==Tb||La.stride!==hb)F.bindBuffer(34962,Ob.buffer),F.vertexAttribPointer(fb,jb,ob,Ua,hb,Tb),La.type=ob,La.size=jb,La.buffer=Ob,La.normalized=Ua,La.offset=Tb,La.stride=hb;La.divisor!==pb&&(I.vertexAttribDivisorANGLE(fb,pb),La.divisor=pb)}else if(La.buffer&&(F.disableVertexAttribArray(fb),La.buffer=null),La.x!==qb||La.y!==Ka||La.z!==eb||La.w!==Ia)F.vertexAttrib4f(fb,qb,Ka,eb,Ia),La.x=
qb,La.y=Ka,La.z=eb,La.w=Ia;lb.buffer=y.positionBuffer;Wa=!1;sb=null;rb=0;Pa=!1;Ra=Bc=0;Jb=1;Db=0;Ma=5126;Lb=Kb=Ya=vd=0;ca(lb)?(Wa=!0,sb=z.createStream(34962,lb),Ma=sb.dtype):(sb=z.getBuffer(lb))?Ma=sb.dtype:"constant"in lb?(Jb=2,"number"===typeof lb.constant?(Ya=lb.constant,Kb=Lb=vd=0):(Ya=0<lb.constant.length?lb.constant[0]:0,Kb=1<lb.constant.length?lb.constant[1]:0,Lb=2<lb.constant.length?lb.constant[2]:0,vd=3<lb.constant.length?lb.constant[3]:0)):(sb=ca(lb.buffer)?z.createStream(34962,lb.buffer):
z.getBuffer(lb.buffer),Ma="type"in lb?ma[lb.type]:sb.dtype,Pa=!!lb.normalized,Ra=lb.size|0,Bc=lb.offset|0,Db=lb.stride|0,rb=lb.divisor|0);kb=ta.location;Na=P[kb];if(1===Jb){Na.buffer||F.enableVertexAttribArray(kb);Zb=Ra||2;if(Na.type!==Ma||Na.size!==Zb||Na.buffer!==sb||Na.normalized!==Pa||Na.offset!==Bc||Na.stride!==Db)F.bindBuffer(34962,sb.buffer),F.vertexAttribPointer(kb,Zb,Ma,Pa,Db,Bc),Na.type=Ma,Na.size=Zb,Na.buffer=sb,Na.normalized=Pa,Na.offset=Bc,Na.stride=Db;Na.divisor!==rb&&(I.vertexAttribDivisorANGLE(kb,
rb),Na.divisor=rb)}else if(Na.buffer&&(F.disableVertexAttribArray(kb),Na.buffer=null),Na.x!==Ya||Na.y!==Kb||Na.z!==Lb||Na.w!==vd)F.vertexAttrib4f(kb,Ya,Kb,Lb,vd),Na.x=Ya,Na.y=Kb,Na.z=Lb,Na.w=vd;ea.buffer=y.positionBuffer;Qa=!1;tb=null;ub=0;Sa=!1;gc=mb=0;zc=1;uc=0;bb=5126;md=Xa=ad=jc=0;ca(ea)?(Qa=!0,tb=z.createStream(34962,ea),bb=tb.dtype):(tb=z.getBuffer(ea))?bb=tb.dtype:"constant"in ea?(zc=2,"number"===typeof ea.constant?(ad=ea.constant,Xa=md=jc=0):(ad=0<ea.constant.length?ea.constant[0]:0,Xa=1<
ea.constant.length?ea.constant[1]:0,md=2<ea.constant.length?ea.constant[2]:0,jc=3<ea.constant.length?ea.constant[3]:0)):(tb=ca(ea.buffer)?z.createStream(34962,ea.buffer):z.getBuffer(ea.buffer),bb="type"in ea?ma[ea.type]:tb.dtype,Sa=!!ea.normalized,gc=ea.size|0,mb=ea.offset|0,uc=ea.stride|0,ub=ea.divisor|0);zb=ka.location;Za=P[zb];if(1===zc){Za.buffer||F.enableVertexAttribArray(zb);Ub=gc||2;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)F.bindBuffer(34962,
tb.buffer),F.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(I.vertexAttribDivisorANGLE(zb,ub),Za.divisor=ub)}else if(Za.buffer&&(F.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==ad||Za.y!==Xa||Za.z!==md||Za.w!==jc)F.vertexAttrib4f(zb,ad,Xa,md,jc),Za.x=ad,Za.y=Xa,Za.z=md,Za.w=jc;X.buffer=y.colorBuffer;sc=!1;Vb=null;Pb=0;Kc=!1;Xd=Qb=0;Ec=1;rd=0;Mc=5126;vc=nc=td=Wc=0;ca(X)?(sc=!0,Vb=z.createStream(34962,X),Mc=
Vb.dtype):(Vb=z.getBuffer(X))?Mc=Vb.dtype:"constant"in X?(Ec=2,"number"===typeof X.constant?(td=X.constant,nc=vc=Wc=0):(td=0<X.constant.length?X.constant[0]:0,nc=1<X.constant.length?X.constant[1]:0,vc=2<X.constant.length?X.constant[2]:0,Wc=3<X.constant.length?X.constant[3]:0)):(Vb=ca(X.buffer)?z.createStream(34962,X.buffer):z.getBuffer(X.buffer),Mc="type"in X?ma[X.type]:Vb.dtype,Kc=!!X.normalized,Xd=X.size|0,Qb=X.offset|0,rd=X.stride|0,Pb=X.divisor|0);hc=T.location;db=P[hc];if(1===Ec){db.buffer||
F.enableVertexAttribArray(hc);rc=Xd||4;if(db.type!==Mc||db.size!==rc||db.buffer!==Vb||db.normalized!==Kc||db.offset!==Qb||db.stride!==rd)F.bindBuffer(34962,Vb.buffer),F.vertexAttribPointer(hc,rc,Mc,Kc,rd,Qb),db.type=Mc,db.size=rc,db.buffer=Vb,db.normalized=Kc,db.offset=Qb,db.stride=rd;db.divisor!==Pb&&(I.vertexAttribDivisorANGLE(hc,Pb),db.divisor=Pb)}else if(db.buffer&&(F.disableVertexAttribArray(hc),db.buffer=null),db.x!==td||db.y!==nc||db.z!==vc||db.w!==Wc)F.vertexAttrib4f(hc,td,nc,vc,Wc),db.x=
td,db.y=nc,db.z=vc,db.w=Wc;Ja.buffer=y.colorBuffer;Sb=!1;Wb=null;dc=0;ic=!1;Ac=xc=0;bd=1;Pc=0;Qc=5126;cd=kd=Xc=Rc=0;ca(Ja)?(Sb=!0,Wb=z.createStream(34962,Ja),Qc=Wb.dtype):(Wb=z.getBuffer(Ja))?Qc=Wb.dtype:"constant"in Ja?(bd=2,"number"===typeof Ja.constant?(Xc=Ja.constant,kd=cd=Rc=0):(Xc=0<Ja.constant.length?Ja.constant[0]:0,kd=1<Ja.constant.length?Ja.constant[1]:0,cd=2<Ja.constant.length?Ja.constant[2]:0,Rc=3<Ja.constant.length?Ja.constant[3]:0)):(Wb=ca(Ja.buffer)?z.createStream(34962,Ja.buffer):
z.getBuffer(Ja.buffer),Qc="type"in Ja?ma[Ja.type]:Wb.dtype,ic=!!Ja.normalized,Ac=Ja.size|0,xc=Ja.offset|0,Pc=Ja.stride|0,dc=Ja.divisor|0);Yc=Y.location;kc=P[Yc];if(1===bd){kc.buffer||F.enableVertexAttribArray(Yc);cc=Ac||4;if(kc.type!==Qc||kc.size!==cc||kc.buffer!==Wb||kc.normalized!==ic||kc.offset!==xc||kc.stride!==Pc)F.bindBuffer(34962,Wb.buffer),F.vertexAttribPointer(Yc,cc,Qc,ic,Pc,xc),kc.type=Qc,kc.size=cc,kc.buffer=Wb,kc.normalized=ic,kc.offset=xc,kc.stride=Pc;kc.divisor!==dc&&(I.vertexAttribDivisorANGLE(Yc,
dc),kc.divisor=dc)}else if(kc.buffer&&(F.disableVertexAttribArray(Yc),kc.buffer=null),kc.x!==Xc||kc.y!==kd||kc.z!==cd||kc.w!==Rc)F.vertexAttrib4f(Yc,Xc,kd,cd,Rc),kc.x=Xc,kc.y=kd,kc.z=cd,kc.w=Rc;Zc=y.scale;Tc=Zc[0];yc=Zc[1];u&&dd===Tc&&gd===yc||(dd=Tc,gd=yc,F.uniform2f(Cc.location,Tc,yc));xd=y.translate;Fe=xd[0];hd=xd[1];u&&Bd===Fe&&Oa===hd||(Bd=Fe,Oa=hd,F.uniform2f(da.location,Fe,hd));Od=y.thickness;u&&Yd===Od||(Yd=Od,F.uniform1f(W.location,Od));ke=y.depth;u&&Pd===ke||(Pd=ke,F.uniform1f(E.location,
ke));Kd=d.call(this,l,y,u);Id=Kd[0];Sc=Kd[1];qd=Kd[2];wd=Kd[3];u&&nd===Id&&ud===Sc&&id===qd&&Dd===wd||(nd=Id,ud=Sc,id=qd,Dd=wd,F.uniform4f(R.location,Id,Sc,qd,wd));Fd=y.miterLimit;u&&qe===Fd||(qe=Fd,F.uniform1f(N.location,Fd));le=c.call(this,l,y,u);u&&Ne===le||(Ne=le,F.uniform1f(a.location,le));me=y.dashLength;u&&je===me||(je=me,F.uniform1f(w.location,me));he=y.opacity;u&&ue===he||(ue=he,F.uniform1f(A.location,he));(ee=y.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);ne=ee._texture;
F.uniform1i(V.location,ne.bind());Nc=y.count;0<Nc?Jc?I.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Nc):I.drawArraysInstancedANGLE(5,0,4,Nc):0>Nc&&(Jc?F.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):F.drawArrays(5,0,4));l.viewportWidth=ec;l.viewportHeight=Hc;xb&&z.destroyStream(cb);Yb&&z.destroyStream(Ob);Wa&&z.destroyStream(sb);Qa&&z.destroyStream(tb);sc&&z.destroyStream(Vb);Sb&&z.destroyStream(Wb);ne.unbind()}K.dirty=!0;Aa.setVAO(null);x&&(ba.cpuTime+=performance.now()-t)},draw:function(c){var d,
b,x,t,u,y,C,wa,m,B,ra,O,G,za,M,U,ha,qa,aa,Fa,Ca,na,Z,$d,fa,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd;d=p.next;d!==p.cur&&(d?F.bindFramebuffer(36160,d.framebuffer):F.bindFramebuffer(36160,null),p.cur=d);if(K.dirty){var Ec,rd,Mc,Wc,td,nc,vc,hc,db,
rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc;Ec=Q.dither;Ec!==K.dither&&(Ec?F.enable(3024):F.disable(3024),K.dither=Ec);rd=Q.depth_func;rd!==K.depth_func&&(F.depthFunc(rd),K.depth_func=rd);Mc=Xb[0];Wc=Xb[1];if(Mc!==Ta[0]||Wc!==Ta[1])F.depthRange(Mc,Wc),Ta[0]=Mc,Ta[1]=Wc;td=Q.depth_mask;td!==K.depth_mask&&(F.depthMask(td),K.depth_mask=td);nc=ya[0];vc=ya[1];hc=ya[2];db=ya[3];if(nc!==ja[0]||vc!==ja[1]||hc!==ja[2]||db!==ja[3])F.colorMask(nc,vc,hc,db),ja[0]=nc,ja[1]=vc,ja[2]=hc,ja[3]=
db;rc=Q.frontFace;rc!==K.frontFace&&(F.frontFace(rc),K.frontFace=rc);Sb=Q.lineWidth;Sb!==K.lineWidth&&(F.lineWidth(Sb),K.lineWidth=Sb);Wb=Q.polygonOffset_enable;Wb!==K.polygonOffset_enable&&(Wb?F.enable(32823):F.disable(32823),K.polygonOffset_enable=Wb);dc=v[0];ic=v[1];if(dc!==r[0]||ic!==r[1])F.polygonOffset(dc,ic),r[0]=dc,r[1]=ic;xc=Q.sample_alpha;xc!==K.sample_alpha&&(xc?F.enable(32926):F.disable(32926),K.sample_alpha=xc);Ac=Q.sample_enable;Ac!==K.sample_enable&&(Ac?F.enable(32928):F.disable(32928),
K.sample_enable=Ac);bd=S[0];Pc=S[1];if(bd!==va[0]||Pc!==va[1])F.sampleCoverage(bd,Pc),va[0]=bd,va[1]=Pc;Qc=Q.stencil_mask;Qc!==K.stencil_mask&&(F.stencilMask(Qc),K.stencil_mask=Qc);Rc=Gb[0];Xc=Gb[1];kd=Gb[2];if(Rc!==ia[0]||Xc!==ia[1]||kd!==ia[2])F.stencilFunc(Rc,Xc,kd),ia[0]=Rc,ia[1]=Xc,ia[2]=kd;cd=Da[0];Yc=Da[1];kc=Da[2];cc=Da[3];if(cd!==pa[0]||Yc!==pa[1]||kc!==pa[2]||cc!==pa[3])F.stencilOpSeparate(cd,Yc,kc,cc),pa[0]=cd,pa[1]=Yc,pa[2]=kc,pa[3]=cc;Zc=L[0];Tc=L[1];dd=L[2];yc=L[3];if(Zc!==sa[0]||Tc!==
sa[1]||dd!==sa[2]||yc!==sa[3])F.stencilOpSeparate(Zc,Tc,dd,yc),sa[0]=Zc,sa[1]=Tc,sa[2]=dd,sa[3]=yc}b=c.viewport;x=b.x|0;t=b.y|0;u="width"in b?b.width|0:l.framebufferWidth-x;y="height"in b?b.height|0:l.framebufferHeight-t;C=l.viewportWidth;l.viewportWidth=u;wa=l.viewportHeight;l.viewportHeight=y;F.viewport(x,t,u,y);Ga[0]=x;Ga[1]=t;Ga[2]=u;Ga[3]=y;F.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;F.enable(3042);K.blend_enable=!0;F.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;F.blendFuncSeparate(770,
771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;F.enable(2884);K.cull_enable=!0;F.cullFace(1029);K.cull_face=1029;(m=H.call(this,l,c,0))?F.enable(2929):F.disable(2929);K.depth_enable=m;B=c.viewport;ra=B.x|0;O=B.y|0;G="width"in B?B.width|0:l.framebufferWidth-ra;za="height"in B?B.height|0:l.framebufferHeight-O;F.scissor(ra,O,G,za);sd[0]=ra;sd[1]=O;sd[2]=G;sd[3]=za;F.enable(3089);K.scissor_enable=!0;F.disable(2960);K.stencil_enable=!1;if(M=K.profile)U=performance.now(),ba.count++;F.useProgram(I.program);
ha=oa.angle_instanced_arrays;Aa.setVAO(null);ua.buffer=c.positionBuffer;qa=!1;aa=null;Fa=0;Ca=!1;Z=na=0;$d=1;fa=0;Ad=5126;Lc=pd=$c=ld=0;ca(ua)?(qa=!0,aa=z.createStream(34962,ua),Ad=aa.dtype):(aa=z.getBuffer(ua))?Ad=aa.dtype:"constant"in ua?($d=2,"number"===typeof ua.constant?($c=ua.constant,pd=Lc=ld=0):($c=0<ua.constant.length?ua.constant[0]:0,pd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,ld=3<ua.constant.length?ua.constant[3]:0)):(aa=ca(ua.buffer)?z.createStream(34962,
ua.buffer):z.getBuffer(ua.buffer),Ad="type"in ua?ma[ua.type]:aa.dtype,Ca=!!ua.normalized,Z=ua.size|0,na=ua.offset|0,fa=ua.stride|0,Fa=ua.divisor|0);od=q.location;Fc=P[od];if(1===$d){Fc.buffer||F.enableVertexAttribArray(od);ed=Z||2;if(Fc.type!==Ad||Fc.size!==ed||Fc.buffer!==aa||Fc.normalized!==Ca||Fc.offset!==na||Fc.stride!==fa)F.bindBuffer(34962,aa.buffer),F.vertexAttribPointer(od,ed,Ad,Ca,fa,na),Fc.type=Ad,Fc.size=ed,Fc.buffer=aa,Fc.normalized=Ca,Fc.offset=na,Fc.stride=fa;Fc.divisor!==Fa&&(ha.vertexAttribDivisorANGLE(od,
Fa),Fc.divisor=Fa)}else if(Fc.buffer&&(F.disableVertexAttribArray(od),Fc.buffer=null),Fc.x!==$c||Fc.y!==pd||Fc.z!==Lc||Fc.w!==ld)F.vertexAttrib4f(od,$c,pd,Lc,ld),Fc.x=$c,Fc.y=pd,Fc.z=Lc,Fc.w=ld;Ba.buffer=c.positionBuffer;Oc=!1;jd=null;Ab=0;Eb=!1;wb=tc=0;wc=1;Bb=0;Jc=5126;Uc=Vc=Gc=lc=0;ca(Ba)?(Oc=!0,jd=z.createStream(34962,Ba),Jc=jd.dtype):(jd=z.getBuffer(Ba))?Jc=jd.dtype:"constant"in Ba?(wc=2,"number"===typeof Ba.constant?(Gc=Ba.constant,Vc=Uc=lc=0):(Gc=0<Ba.constant.length?Ba.constant[0]:0,Vc=1<
Ba.constant.length?Ba.constant[1]:0,Uc=2<Ba.constant.length?Ba.constant[2]:0,lc=3<Ba.constant.length?Ba.constant[3]:0)):(jd=ca(Ba.buffer)?z.createStream(34962,Ba.buffer):z.getBuffer(Ba.buffer),Jc="type"in Ba?ma[Ba.type]:jd.dtype,Eb=!!Ba.normalized,wb=Ba.size|0,tc=Ba.offset|0,Bb=Ba.stride|0,Ab=Ba.divisor|0);Dc=h.location;ec=P[Dc];if(1===wc){ec.buffer||F.enableVertexAttribArray(Dc);Hc=wb||2;if(ec.type!==Jc||ec.size!==Hc||ec.buffer!==jd||ec.normalized!==Eb||ec.offset!==tc||ec.stride!==Bb)F.bindBuffer(34962,
jd.buffer),F.vertexAttribPointer(Dc,Hc,Jc,Eb,Bb,tc),ec.type=Jc,ec.size=Hc,ec.buffer=jd,ec.normalized=Eb,ec.offset=tc,ec.stride=Bb;ec.divisor!==Ab&&(ha.vertexAttribDivisorANGLE(Dc,Ab),ec.divisor=Ab)}else if(ec.buffer&&(F.disableVertexAttribArray(Dc),ec.buffer=null),ec.x!==Gc||ec.y!==Vc||ec.z!==Uc||ec.w!==lc)F.vertexAttrib4f(Dc,Gc,Vc,Uc,lc),ec.x=Gc,ec.y=Vc,ec.z=Uc,ec.w=lc;lb.buffer=c.positionBuffer;oc=!1;pc=null;mc=0;fc=!1;Ic=$a=0;xb=1;cb=0;Mb=5126;Cd=Va=nb=ab=0;ca(lb)?(oc=!0,pc=z.createStream(34962,
lb),Mb=pc.dtype):(pc=z.getBuffer(lb))?Mb=pc.dtype:"constant"in lb?(xb=2,"number"===typeof lb.constant?(nb=lb.constant,Va=Cd=ab=0):(nb=0<lb.constant.length?lb.constant[0]:0,Va=1<lb.constant.length?lb.constant[1]:0,Cd=2<lb.constant.length?lb.constant[2]:0,ab=3<lb.constant.length?lb.constant[3]:0)):(pc=ca(lb.buffer)?z.createStream(34962,lb.buffer):z.getBuffer(lb.buffer),Mb="type"in lb?ma[lb.type]:pc.dtype,fc=!!lb.normalized,Ic=lb.size|0,$a=lb.offset|0,cb=lb.stride|0,mc=lb.divisor|0);Hb=ta.location;Ib=
P[Hb];if(1===xb){Ib.buffer||F.enableVertexAttribArray(Hb);qc=Ic||2;if(Ib.type!==Mb||Ib.size!==qc||Ib.buffer!==pc||Ib.normalized!==fc||Ib.offset!==$a||Ib.stride!==cb)F.bindBuffer(34962,pc.buffer),F.vertexAttribPointer(Hb,qc,Mb,fc,cb,$a),Ib.type=Mb,Ib.size=qc,Ib.buffer=pc,Ib.normalized=fc,Ib.offset=$a,Ib.stride=cb;Ib.divisor!==mc&&(ha.vertexAttribDivisorANGLE(Hb,mc),Ib.divisor=mc)}else if(Ib.buffer&&(F.disableVertexAttribArray(Hb),Ib.buffer=null),Ib.x!==nb||Ib.y!==Va||Ib.z!==Cd||Ib.w!==ab)F.vertexAttrib4f(Hb,
nb,Va,Cd,ab),Ib.x=nb,Ib.y=Va,Ib.z=Cd,Ib.w=ab;ea.buffer=c.positionBuffer;Nb=!1;ib=null;Fb=0;Cb=!1;gb=vb=0;Yb=1;Ob=0;pb=5126;bc=yb=Tb=Ua=0;ca(ea)?(Nb=!0,ib=z.createStream(34962,ea),pb=ib.dtype):(ib=z.getBuffer(ea))?pb=ib.dtype:"constant"in ea?(Yb=2,"number"===typeof ea.constant?(Tb=ea.constant,yb=bc=Ua=0):(Tb=0<ea.constant.length?ea.constant[0]:0,yb=1<ea.constant.length?ea.constant[1]:0,bc=2<ea.constant.length?ea.constant[2]:0,Ua=3<ea.constant.length?ea.constant[3]:0)):(ib=ca(ea.buffer)?z.createStream(34962,
ea.buffer):z.getBuffer(ea.buffer),pb="type"in ea?ma[ea.type]:ib.dtype,Cb=!!ea.normalized,gb=ea.size|0,vb=ea.offset|0,Ob=ea.stride|0,Fb=ea.divisor|0);hb=ka.location;ob=P[hb];if(1===Yb){ob.buffer||F.enableVertexAttribArray(hb);Ia=gb||2;if(ob.type!==pb||ob.size!==Ia||ob.buffer!==ib||ob.normalized!==Cb||ob.offset!==vb||ob.stride!==Ob)F.bindBuffer(34962,ib.buffer),F.vertexAttribPointer(hb,Ia,pb,Cb,Ob,vb),ob.type=pb,ob.size=Ia,ob.buffer=ib,ob.normalized=Cb,ob.offset=vb,ob.stride=Ob;ob.divisor!==Fb&&(ha.vertexAttribDivisorANGLE(hb,
Fb),ob.divisor=Fb)}else if(ob.buffer&&(F.disableVertexAttribArray(hb),ob.buffer=null),ob.x!==Tb||ob.y!==yb||ob.z!==bc||ob.w!==Ua)F.vertexAttrib4f(hb,Tb,yb,bc,Ua),ob.x=Tb,ob.y=yb,ob.z=bc,ob.w=Ua;X.buffer=c.colorBuffer;qb=!1;Ka=null;eb=0;fb=!1;jb=La=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=Pa=0;ca(X)?(qb=!0,Ka=z.createStream(34962,X),rb=Ka.dtype):(Ka=z.getBuffer(X))?rb=Ka.dtype:"constant"in X?(Wa=2,"number"===typeof X.constant?(Bc=X.constant,Ra=Jb=Pa=0):(Bc=0<X.constant.length?X.constant[0]:0,Ra=1<X.constant.length?
X.constant[1]:0,Jb=2<X.constant.length?X.constant[2]:0,Pa=3<X.constant.length?X.constant[3]:0)):(Ka=ca(X.buffer)?z.createStream(34962,X.buffer):z.getBuffer(X.buffer),rb="type"in X?ma[X.type]:Ka.dtype,fb=!!X.normalized,jb=X.size|0,La=X.offset|0,sb=X.stride|0,eb=X.divisor|0);Db=T.location;Ma=P[Db];if(1===Wa){Ma.buffer||F.enableVertexAttribArray(Db);vd=jb||4;if(Ma.type!==rb||Ma.size!==vd||Ma.buffer!==Ka||Ma.normalized!==fb||Ma.offset!==La||Ma.stride!==sb)F.bindBuffer(34962,Ka.buffer),F.vertexAttribPointer(Db,
vd,rb,fb,sb,La),Ma.type=rb,Ma.size=vd,Ma.buffer=Ka,Ma.normalized=fb,Ma.offset=La,Ma.stride=sb;Ma.divisor!==eb&&(ha.vertexAttribDivisorANGLE(Db,eb),Ma.divisor=eb)}else if(Ma.buffer&&(F.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Bc||Ma.y!==Ra||Ma.z!==Jb||Ma.w!==Pa)F.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Ma.x=Bc,Ma.y=Ra,Ma.z=Jb,Ma.w=Pa;Ja.buffer=c.colorBuffer;Ya=!1;Kb=null;Lb=0;kb=!1;Zb=Na=0;Qa=1;tb=0;ub=5126;zc=gc=mb=Sa=0;ca(Ja)?(Ya=!0,Kb=z.createStream(34962,Ja),ub=Kb.dtype):(Kb=z.getBuffer(Ja))?
ub=Kb.dtype:"constant"in Ja?(Qa=2,"number"===typeof Ja.constant?(mb=Ja.constant,gc=zc=Sa=0):(mb=0<Ja.constant.length?Ja.constant[0]:0,gc=1<Ja.constant.length?Ja.constant[1]:0,zc=2<Ja.constant.length?Ja.constant[2]:0,Sa=3<Ja.constant.length?Ja.constant[3]:0)):(Kb=ca(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),ub="type"in Ja?ma[Ja.type]:Kb.dtype,kb=!!Ja.normalized,Zb=Ja.size|0,Na=Ja.offset|0,tb=Ja.stride|0,Lb=Ja.divisor|0);uc=Y.location;bb=P[uc];if(1===Qa){bb.buffer||F.enableVertexAttribArray(uc);
jc=Zb||4;if(bb.type!==ub||bb.size!==jc||bb.buffer!==Kb||bb.normalized!==kb||bb.offset!==Na||bb.stride!==tb)F.bindBuffer(34962,Kb.buffer),F.vertexAttribPointer(uc,jc,ub,kb,tb,Na),bb.type=ub,bb.size=jc,bb.buffer=Kb,bb.normalized=kb,bb.offset=Na,bb.stride=tb;bb.divisor!==Lb&&(ha.vertexAttribDivisorANGLE(uc,Lb),bb.divisor=Lb)}else if(bb.buffer&&(F.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==mb||bb.y!==gc||bb.z!==zc||bb.w!==Sa)F.vertexAttrib4f(uc,mb,gc,zc,Sa),bb.x=mb,bb.y=gc,bb.z=zc,bb.w=Sa;ad=
D.location;Xa=P[ad];Xa.buffer||F.enableVertexAttribArray(ad);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==g||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)F.bindBuffer(34962,g.buffer),F.vertexAttribPointer(ad,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=g,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(ha.vertexAttribDivisorANGLE(ad,0),Xa.divisor=0);md=e.location;zb=P[md];zb.buffer||F.enableVertexAttribArray(md);if(5126!==zb.type||1!==zb.size||zb.buffer!==k||!1!==zb.normalized||4!==
zb.offset||8!==zb.stride)F.bindBuffer(34962,k.buffer),F.vertexAttribPointer(md,1,5126,!1,8,4),zb.type=5126,zb.size=1,zb.buffer=k,zb.normalized=!1,zb.offset=4,zb.stride=8;0!==zb.divisor&&(ha.vertexAttribDivisorANGLE(md,0),zb.divisor=0);Za=c.scale;F.uniform2f(Cc.location,Za[0],Za[1]);Ub=c.translate;F.uniform2f(da.location,Ub[0],Ub[1]);F.uniform1f(W.location,c.thickness);F.uniform1f(E.location,c.depth);sc=n.call(this,l,c,0);F.uniform4f(R.location,sc[0],sc[1],sc[2],sc[3]);F.uniform1f(N.location,c.miterLimit);
Vb=f.call(this,l,c,0);F.uniform1f(a.location,Vb);F.uniform1f(w.location,c.dashLength);F.uniform1f(A.location,c.opacity);(Pb=c.dashTexture)&&"framebuffer"===Pb._reglType&&(Pb=Pb.color[0]);Kc=Pb._texture;F.uniform1i(V.location,Kc.bind());(Qb=J.elements)?F.bindBuffer(34963,Qb.buffer.buffer):Aa.currentVAO&&(Qb=Ea.getElements(Aa.currentVAO.elements))&&F.bindBuffer(34963,Qb.buffer.buffer);Xd=c.count;0<Xd?Qb?ha.drawElementsInstancedANGLE(5,4,Qb.type,0<<(Qb.type-5121>>1),Xd):ha.drawArraysInstancedANGLE(5,
0,4,Xd):0>Xd&&(Qb?F.drawElements(5,4,Qb.type,0<<(Qb.type-5121>>1)):F.drawArrays(5,0,4));K.dirty=!0;Aa.setVAO(null);l.viewportWidth=C;l.viewportHeight=wa;M&&(ba.cpuTime+=performance.now()-U);qa&&z.destroyStream(aa);Oc&&z.destroyStream(jd);oc&&z.destroyStream(pc);Nb&&z.destroyStream(ib);qb&&z.destroyStream(Ka);Ya&&z.destroyStream(Kb);Kc.unbind()},scope:function(a,c,e){var d,f,h,b,p,r,v,q,n,L,ja,S,w,A,sa,ya,F,Da,P,Xb,pa,ga,ia,R,E,I,D,va,H,N,Ga,T,O,Ea,la,Ta,W,ha,Y,xa,da,V,Gb,oa,ta,ka,Aa,sd,Cc,Z,fc,$a,
fa,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,Oa,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,
Ve,Ud,ae,We,hf,mf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;d=a.viewport;f=d.x|0;h=d.y|0;b="width"in d?d.width|0:l.framebufferWidth-f;p="height"in d?d.height|0:l.framebufferHeight-h;r=l.viewportWidth;l.viewportWidth=b;v=l.viewportHeight;l.viewportHeight=p;q=wa[0];wa[0]=f;n=wa[1];wa[1]=h;L=wa[2];wa[2]=b;ja=wa[3];wa[3]=p;S=za[0];za[0]=0;w=za[1];za[1]=0;A=za[2];za[2]=0;sa=za[3];za[3]=0;ya=Q.blend_enable;Q.blend_enable=!0;F=Ca[0];Ca[0]=32774;Da=Ca[1];Ca[1]=32774;P=qa[0];qa[0]=
770;Xb=qa[1];qa[1]=771;pa=qa[2];qa[2]=773;ga=qa[3];qa[3]=1;ia=Q.cull_enable;Q.cull_enable=!0;R=Q.cull_face;Q.cull_face=1029;E=B.call(this,l,a,e);I=Q.depth_enable;Q.depth_enable=E;D=a.viewport;va=D.x|0;H=D.y|0;N="width"in D?D.width|0:l.framebufferWidth-va;Ga="height"in D?D.height|0:l.framebufferHeight-H;T=Fa[0];Fa[0]=va;O=Fa[1];Fa[1]=H;Ea=Fa[2];Fa[2]=N;la=Fa[3];Fa[3]=Ga;Ta=Q.scissor_enable;Q.scissor_enable=!0;W=Q.stencil_enable;Q.stencil_enable=!1;if(ha=K.profile)Y=performance.now(),ba.count++;xa=
J.offset;J.offset=0;da=J.count;J.count=4;V=a.count;Gb=J.instances;J.instances=V;oa=J.primitive;J.primitive=5;ta=a.dashLength;ka=ra[23];ra[23]=ta;Aa=a.dashTexture;sd=ra[24];ra[24]=Aa;Cc=a.depth;Z=ra[22];ra[22]=Cc;fc=a.id;$a=ra[31];ra[31]=fc;fa=a.miterLimit;xb=ra[32];ra[32]=fa;cb=C.call(this,l,a,e);Mb=ra[33];ra[33]=cb;ab=a.opacity;nb=ra[10];ra[10]=ab;Va=l.pixelRatio;Cd=ra[34];ra[34]=Va;Hb=a.scale;Ib=ra[6];ra[6]=Hb;qc=a.scaleFract;Nb=ra[7];ra[7]=qc;ib=a.thickness;Fb=ra[21];ra[21]=ib;Cb=a.translate;vb=
ra[8];ra[8]=Cb;gb=a.translateFract;Yb=ra[9];ra[9]=gb;Ob=G.call(this,l,a,e);pb=ra[3];ra[3]=Ob;X.buffer=a.colorBuffer;Ua=!1;Tb=null;yb=0;bc=!1;ob=hb=0;Ia=1;qb=0;Ka=5126;jb=La=fb=eb=0;ca(X)?(Ua=!0,Tb=z.createStream(34962,X),Ka=Tb.dtype):(Tb=z.getBuffer(X))?Ka=Tb.dtype:"constant"in X?(Ia=2,"number"===typeof X.constant?(fb=X.constant,La=jb=eb=0):(fb=0<X.constant.length?X.constant[0]:0,La=1<X.constant.length?X.constant[1]:0,jb=2<X.constant.length?X.constant[2]:0,eb=3<X.constant.length?X.constant[3]:0)):
(Tb=ca(X.buffer)?z.createStream(34962,X.buffer):z.getBuffer(X.buffer),Ka="type"in X?ma[X.type]:Tb.dtype,bc=!!X.normalized,ob=X.size|0,hb=X.offset|0,qb=X.stride|0,yb=X.divisor|0);Wa=U.buffer;U.buffer=Tb;sb=U.divisor;U.divisor=yb;rb=U.normalized;U.normalized=bc;Pa=U.offset;U.offset=hb;Bc=U.size;U.size=ob;Ra=U.state;U.state=Ia;Jb=U.stride;U.stride=qb;Db=U.type;U.type=Ka;Ma=U.w;U.w=eb;vd=U.x;U.x=fb;Ya=U.y;U.y=La;Kb=U.z;U.z=jb;ua.buffer=a.positionBuffer;Lb=!1;kb=null;Na=0;Zb=!1;tb=Qa=0;ub=1;Sa=0;mb=5126;
bb=uc=zc=gc=0;ca(ua)?(Lb=!0,kb=z.createStream(34962,ua),mb=kb.dtype):(kb=z.getBuffer(ua))?mb=kb.dtype:"constant"in ua?(ub=2,"number"===typeof ua.constant?(zc=ua.constant,uc=bb=gc=0):(zc=0<ua.constant.length?ua.constant[0]:0,uc=1<ua.constant.length?ua.constant[1]:0,bb=2<ua.constant.length?ua.constant[2]:0,gc=3<ua.constant.length?ua.constant[3]:0)):(kb=ca(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),mb="type"in ua?ma[ua.type]:kb.dtype,Zb=!!ua.normalized,tb=ua.size|0,Qa=ua.offset|
0,Sa=ua.stride|0,Na=ua.divisor|0);jc=y.buffer;y.buffer=kb;ad=y.divisor;y.divisor=Na;Xa=y.normalized;y.normalized=Zb;md=y.offset;y.offset=Qa;zb=y.size;y.size=tb;Za=y.state;y.state=ub;Ub=y.stride;y.stride=Sa;sc=y.type;y.type=mb;Vb=y.w;y.w=gc;Pb=y.x;y.x=zc;Kc=y.y;y.y=uc;Qb=y.z;y.z=bb;Ja.buffer=a.colorBuffer;Xd=!1;Ec=null;rd=0;Mc=!1;td=Wc=0;nc=1;vc=0;hc=5126;Wb=Sb=rc=db=0;ca(Ja)?(Xd=!0,Ec=z.createStream(34962,Ja),hc=Ec.dtype):(Ec=z.getBuffer(Ja))?hc=Ec.dtype:"constant"in Ja?(nc=2,"number"===typeof Ja.constant?
(rc=Ja.constant,Sb=Wb=db=0):(rc=0<Ja.constant.length?Ja.constant[0]:0,Sb=1<Ja.constant.length?Ja.constant[1]:0,Wb=2<Ja.constant.length?Ja.constant[2]:0,db=3<Ja.constant.length?Ja.constant[3]:0)):(Ec=ca(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),hc="type"in Ja?ma[Ja.type]:Ec.dtype,Mc=!!Ja.normalized,td=Ja.size|0,Wc=Ja.offset|0,vc=Ja.stride|0,rd=Ja.divisor|0);dc=t.buffer;t.buffer=Ec;ic=t.divisor;t.divisor=rd;xc=t.normalized;t.normalized=Mc;Ac=t.offset;t.offset=Wc;bd=t.size;t.size=
td;Pc=t.state;t.state=nc;Qc=t.stride;t.stride=vc;Rc=t.type;t.type=hc;Xc=t.w;t.w=db;kd=t.x;t.x=rc;cd=t.y;t.y=Sb;Yc=t.z;t.z=Wb;Ba.buffer=a.positionBuffer;kc=!1;cc=null;Zc=0;Tc=!1;yc=dd=0;gd=1;xd=0;Fe=5126;Od=Oa=hd=Bd=0;ca(Ba)?(kc=!0,cc=z.createStream(34962,Ba),Fe=cc.dtype):(cc=z.getBuffer(Ba))?Fe=cc.dtype:"constant"in Ba?(gd=2,"number"===typeof Ba.constant?(hd=Ba.constant,Oa=Od=Bd=0):(hd=0<Ba.constant.length?Ba.constant[0]:0,Oa=1<Ba.constant.length?Ba.constant[1]:0,Od=2<Ba.constant.length?Ba.constant[2]:
0,Bd=3<Ba.constant.length?Ba.constant[3]:0)):(cc=ca(Ba.buffer)?z.createStream(34962,Ba.buffer):z.getBuffer(Ba.buffer),Fe="type"in Ba?ma[Ba.type]:cc.dtype,Tc=!!Ba.normalized,yc=Ba.size|0,dd=Ba.offset|0,xd=Ba.stride|0,Zc=Ba.divisor|0);Yd=m.buffer;m.buffer=cc;ke=m.divisor;m.divisor=Zc;Pd=m.normalized;m.normalized=Tc;Kd=m.offset;m.offset=dd;Id=m.size;m.size=yc;nd=m.state;m.state=gd;Sc=m.stride;m.stride=xd;ud=m.type;m.type=Fe;qd=m.w;m.w=Bd;id=m.x;m.x=hd;wd=m.y;m.y=Oa;Dd=m.z;m.z=Od;Fd=aa.buffer;aa.buffer=
g;qe=aa.divisor;aa.divisor=0;le=aa.normalized;aa.normalized=!1;Ne=aa.offset;aa.offset=0;me=aa.size;aa.size=0;je=aa.state;aa.state=1;he=aa.stride;aa.stride=8;ue=aa.type;aa.type=5126;ee=aa.w;aa.w=0;ne=aa.x;aa.x=0;Nc=aa.y;aa.y=0;fd=aa.z;aa.z=0;ve=x.buffer;x.buffer=k;re=x.divisor;x.divisor=0;Ld=x.normalized;x.normalized=!1;Qd=x.offset;x.offset=4;Rd=x.size;x.size=0;Sd=x.state;x.state=1;oe=x.stride;x.stride=8;ye=x.type;x.type=5126;Be=x.w;x.w=0;se=x.x;x.x=0;Re=x.y;x.y=0;Se=x.z;x.z=0;lb.buffer=a.positionBuffer;
Oe=!1;we=null;Ge=0;Ie=!1;Ke=Je=0;He=1;Md=0;Zd=5126;Jd=Le=fe=de=0;ca(lb)?(Oe=!0,we=z.createStream(34962,lb),Zd=we.dtype):(we=z.getBuffer(lb))?Zd=we.dtype:"constant"in lb?(He=2,"number"===typeof lb.constant?(fe=lb.constant,Le=Jd=de=0):(fe=0<lb.constant.length?lb.constant[0]:0,Le=1<lb.constant.length?lb.constant[1]:0,Jd=2<lb.constant.length?lb.constant[2]:0,de=3<lb.constant.length?lb.constant[3]:0)):(we=ca(lb.buffer)?z.createStream(34962,lb.buffer):z.getBuffer(lb.buffer),Zd="type"in lb?ma[lb.type]:we.dtype,
Ie=!!lb.normalized,Ke=lb.size|0,Je=lb.offset|0,Md=lb.stride|0,Ge=lb.divisor|0);Td=M.buffer;M.buffer=we;De=M.divisor;M.divisor=Ge;Me=M.normalized;M.normalized=Ie;bf=M.offset;M.offset=Je;af=M.size;M.size=Ke;Te=M.state;M.state=He;Pe=M.stride;M.stride=Md;$e=M.type;M.type=Zd;Xe=M.w;M.w=de;Ue=M.x;M.x=fe;Ve=M.y;M.y=Le;Ud=M.z;M.z=Jd;ea.buffer=a.positionBuffer;ae=!1;We=null;hf=0;mf=!1;jf=ef=0;kf=1;lf=0;rf=5126;Cf=Bf=sf=of=0;ca(ea)?(ae=!0,We=z.createStream(34962,ea),rf=We.dtype):(We=z.getBuffer(ea))?rf=We.dtype:
"constant"in ea?(kf=2,"number"===typeof ea.constant?(sf=ea.constant,Bf=Cf=of=0):(sf=0<ea.constant.length?ea.constant[0]:0,Bf=1<ea.constant.length?ea.constant[1]:0,Cf=2<ea.constant.length?ea.constant[2]:0,of=3<ea.constant.length?ea.constant[3]:0)):(We=ca(ea.buffer)?z.createStream(34962,ea.buffer):z.getBuffer(ea.buffer),rf="type"in ea?ma[ea.type]:We.dtype,mf=!!ea.normalized,jf=ea.size|0,ef=ea.offset|0,lf=ea.stride|0,hf=ea.divisor|0);Qe=u.buffer;u.buffer=We;Ee=u.divisor;u.divisor=hf;pf=u.normalized;
u.normalized=mf;qf=u.offset;u.offset=ef;Df=u.size;u.size=jf;Gf=u.state;u.state=kf;Af=u.stride;u.stride=lf;Ef=u.type;u.type=rf;Ff=u.w;u.w=of;wf=u.x;u.x=sf;xf=u.y;u.y=Bf;vf=u.z;u.z=Cf;yf=na.vert;na.vert=36;zf=na.frag;na.frag=35;K.dirty=!0;c(l,a,e);l.viewportWidth=r;l.viewportHeight=v;wa[0]=q;wa[1]=n;wa[2]=L;wa[3]=ja;za[0]=S;za[1]=w;za[2]=A;za[3]=sa;Q.blend_enable=ya;Ca[0]=F;Ca[1]=Da;qa[0]=P;qa[1]=Xb;qa[2]=pa;qa[3]=ga;Q.cull_enable=ia;Q.cull_face=R;Q.depth_enable=I;Fa[0]=T;Fa[1]=O;Fa[2]=Ea;Fa[3]=la;
Q.scissor_enable=Ta;Q.stencil_enable=W;ha&&(ba.cpuTime+=performance.now()-Y);J.offset=xa;J.count=da;J.instances=Gb;J.primitive=oa;ra[23]=ka;ra[24]=sd;ra[22]=Z;ra[31]=$a;ra[32]=xb;ra[33]=Mb;ra[10]=nb;ra[34]=Cd;ra[6]=Ib;ra[7]=Nb;ra[21]=Fb;ra[8]=vb;ra[9]=Yb;ra[3]=pb;Ua&&z.destroyStream(Tb);U.buffer=Wa;U.divisor=sb;U.normalized=rb;U.offset=Pa;U.size=Bc;U.state=Ra;U.stride=Jb;U.type=Db;U.w=Ma;U.x=vd;U.y=Ya;U.z=Kb;Lb&&z.destroyStream(kb);y.buffer=jc;y.divisor=ad;y.normalized=Xa;y.offset=md;y.size=zb;y.state=
Za;y.stride=Ub;y.type=sc;y.w=Vb;y.x=Pb;y.y=Kc;y.z=Qb;Xd&&z.destroyStream(Ec);t.buffer=dc;t.divisor=ic;t.normalized=xc;t.offset=Ac;t.size=bd;t.state=Pc;t.stride=Qc;t.type=Rc;t.w=Xc;t.x=kd;t.y=cd;t.z=Yc;kc&&z.destroyStream(cc);m.buffer=Yd;m.divisor=ke;m.normalized=Pd;m.offset=Kd;m.size=Id;m.state=nd;m.stride=Sc;m.type=ud;m.w=qd;m.x=id;m.y=wd;m.z=Dd;aa.buffer=Fd;aa.divisor=qe;aa.normalized=le;aa.offset=Ne;aa.size=me;aa.state=je;aa.stride=he;aa.type=ue;aa.w=ee;aa.x=ne;aa.y=Nc;aa.z=fd;x.buffer=ve;x.divisor=
re;x.normalized=Ld;x.offset=Qd;x.size=Rd;x.state=Sd;x.stride=oe;x.type=ye;x.w=Be;x.x=se;x.y=Re;x.z=Se;Oe&&z.destroyStream(we);M.buffer=Td;M.divisor=De;M.normalized=Me;M.offset=bf;M.size=af;M.state=Te;M.stride=Pe;M.type=$e;M.w=Xe;M.x=Ue;M.y=Ve;M.z=Ud;ae&&z.destroyStream(We);u.buffer=Qe;u.divisor=Ee;u.normalized=pf;u.offset=qf;u.size=Df;u.state=Gf;u.stride=Af;u.type=Ef;u.w=Ff;u.x=wf;u.y=xf;u.z=vf;na.vert=yf;na.frag=zf;K.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(b,
ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u){var O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Cc,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa;O=b.attributes;ha=b.buffer;d=b.context;c=b.current;T=b.draw;q=b.elements;Y=b.extensions;h=b.framebuffer;w=b.gl;V=b.isBufferArgs;E=b.next;D=b.shader;e=b.uniforms;N=b.vao;a=E.blend_color;ta=c.blend_color;A=E.blend_equation;ka=c.blend_equation;Cc=E.blend_func;W=c.blend_func;da=E.colorMask;R=c.colorMask;P=E.depth_range;z=c.depth_range;l=E.polygonOffset_offset;K=
c.polygonOffset_offset;J=E.sample_coverage;Ea=c.sample_coverage;oa=E.scissor_box;p=c.scissor_box;F=E.stencil_func;ca=c.stencil_func;Q=E.stencil_opBack;na=c.stencil_opBack;ra=E.stencil_opFront;Aa=c.stencil_opFront;za=E.viewport;ga=c.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:8,stride:8};qa={offset:8,stride:8};return{batch:function(a,e){var f,k,b,v,r,n;f=h.next;f!==h.cur&&(f?w.bindFramebuffer(36160,f.framebuffer):w.bindFramebuffer(36160,
null),h.cur=f);if(c.dirty){var g,A,I,D,ia,L,sa,Da,pa,wa,H,ma,X,za,oa,Ba,Cc,ea,Z,$b,Ha,ac,Rb,fa,Gd,yd,Vd,ze,xe,Nd,pe,ie;g=E.dither;g!==c.dither&&(g?w.enable(3024):w.disable(3024),c.dither=g);A=E.depth_func;A!==c.depth_func&&(w.depthFunc(A),c.depth_func=A);I=P[0];D=P[1];if(I!==z[0]||D!==z[1])w.depthRange(I,D),z[0]=I,z[1]=D;ia=E.depth_mask;ia!==c.depth_mask&&(w.depthMask(ia),c.depth_mask=ia);L=da[0];sa=da[1];Da=da[2];pa=da[3];if(L!==R[0]||sa!==R[1]||Da!==R[2]||pa!==R[3])w.colorMask(L,sa,Da,pa),R[0]=
L,R[1]=sa,R[2]=Da,R[3]=pa;wa=E.cull_enable;wa!==c.cull_enable&&(wa?w.enable(2884):w.disable(2884),c.cull_enable=wa);H=E.cull_face;H!==c.cull_face&&(w.cullFace(H),c.cull_face=H);ma=E.frontFace;ma!==c.frontFace&&(w.frontFace(ma),c.frontFace=ma);X=E.lineWidth;X!==c.lineWidth&&(w.lineWidth(X),c.lineWidth=X);za=E.polygonOffset_enable;za!==c.polygonOffset_enable&&(za?w.enable(32823):w.disable(32823),c.polygonOffset_enable=za);oa=l[0];Ba=l[1];if(oa!==K[0]||Ba!==K[1])w.polygonOffset(oa,Ba),K[0]=oa,K[1]=Ba;
Cc=E.sample_alpha;Cc!==c.sample_alpha&&(Cc?w.enable(32926):w.disable(32926),c.sample_alpha=Cc);ea=E.sample_enable;ea!==c.sample_enable&&(ea?w.enable(32928):w.disable(32928),c.sample_enable=ea);Z=J[0];$b=J[1];if(Z!==Ea[0]||$b!==Ea[1])w.sampleCoverage(Z,$b),Ea[0]=Z,Ea[1]=$b;Ha=E.stencil_mask;Ha!==c.stencil_mask&&(w.stencilMask(Ha),c.stencil_mask=Ha);ac=F[0];Rb=F[1];fa=F[2];if(ac!==ca[0]||Rb!==ca[1]||fa!==ca[2])w.stencilFunc(ac,Rb,fa),ca[0]=ac,ca[1]=Rb,ca[2]=fa;Gd=ra[0];yd=ra[1];Vd=ra[2];ze=ra[3];if(Gd!==
Aa[0]||yd!==Aa[1]||Vd!==Aa[2]||ze!==Aa[3])w.stencilOpSeparate(Gd,yd,Vd,ze),Aa[0]=Gd,Aa[1]=yd,Aa[2]=Vd,Aa[3]=ze;xe=Q[0];Nd=Q[1];pe=Q[2];ie=Q[3];if(xe!==na[0]||Nd!==na[1]||pe!==na[2]||ie!==na[3])w.stencilOpSeparate(xe,Nd,pe,ie),na[0]=xe,na[1]=Nd,na[2]=pe,na[3]=ie}w.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;w.enable(3042);c.blend_enable=!0;w.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;w.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;w.disable(2929);c.depth_enable=
!1;w.enable(3089);c.scissor_enable=!0;w.disable(2960);c.stencil_enable=!1;if(k=c.profile)b=performance.now(),ba.count+=e;w.useProgram(B.program);v=Y.angle_instanced_arrays;var Ed;N.setVAO(null);Ed=T.instances;for(r=0;r<e;++r){n=a[r];var ce,ge,be,Ce,Ye,Ze,Hd,Ae,te,$d,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db;ce=n.viewport;ge=ce.x|
0;be=ce.y|0;Ce="width"in ce?ce.width|0:d.framebufferWidth-ge;Ye="height"in ce?ce.height|0:d.framebufferHeight-be;Ze=d.viewportWidth;d.viewportWidth=Ce;Hd=d.viewportHeight;d.viewportHeight=Ye;w.viewport(ge,be,Ce,Ye);ga[0]=ge;ga[1]=be;ga[2]=Ce;ga[3]=Ye;Ae=n.viewport;te=Ae.x|0;$d=Ae.y|0;Wd="width"in Ae?Ae.width|0:d.framebufferWidth-te;Ad="height"in Ae?Ae.height|0:d.framebufferHeight-$d;w.scissor(te,$d,Wd,Ad);p[0]=te;p[1]=$d;p[2]=Wd;p[3]=Ad;la.buffer=n.positionBuffer;ld=!1;$c=null;pd=0;Lc=!1;Fc=od=0;
ed=1;Oc=0;jd=5126;wb=tc=Eb=Ab=0;V(la)?(ld=!0,$c=ha.createStream(34962,la),jd=$c.dtype):($c=ha.getBuffer(la))?jd=$c.dtype:"constant"in la?(ed=2,"number"===typeof la.constant?(Eb=la.constant,tc=wb=Ab=0):(Eb=0<la.constant.length?la.constant[0]:0,tc=1<la.constant.length?la.constant[1]:0,wb=2<la.constant.length?la.constant[2]:0,Ab=3<la.constant.length?la.constant[3]:0)):($c=V(la.buffer)?ha.createStream(34962,la.buffer):ha.getBuffer(la.buffer),jd="type"in la?Ca[la.type]:$c.dtype,Lc=!!la.normalized,Fc=la.size|
0,od=la.offset|0,Oc=la.stride|0,pd=la.divisor|0);wc=t.location;Bb=O[wc];if(1===ed){Bb.buffer||w.enableVertexAttribArray(wc);Jc=Fc||2;if(Bb.type!==jd||Bb.size!==Jc||Bb.buffer!==$c||Bb.normalized!==Lc||Bb.offset!==od||Bb.stride!==Oc)w.bindBuffer(34962,$c.buffer),w.vertexAttribPointer(wc,Jc,jd,Lc,Oc,od),Bb.type=jd,Bb.size=Jc,Bb.buffer=$c,Bb.normalized=Lc,Bb.offset=od,Bb.stride=Oc;Bb.divisor!==pd&&(v.vertexAttribDivisorANGLE(wc,pd),Bb.divisor=pd)}else if(Bb.buffer&&(w.disableVertexAttribArray(wc),Bb.buffer=
null),Bb.x!==Eb||Bb.y!==tc||Bb.z!==wb||Bb.w!==Ab)w.vertexAttrib4f(wc,Eb,tc,wb,Ab),Bb.x=Eb,Bb.y=tc,Bb.z=wb,Bb.w=Ab;qa.buffer=n.positionFractBuffer;lc=!1;Gc=null;Vc=0;Uc=!1;ec=Dc=0;Hc=1;oc=0;pc=5126;Ic=$a=fc=mc=0;V(qa)?(lc=!0,Gc=ha.createStream(34962,qa),pc=Gc.dtype):(Gc=ha.getBuffer(qa))?pc=Gc.dtype:"constant"in qa?(Hc=2,"number"===typeof qa.constant?(fc=qa.constant,$a=Ic=mc=0):(fc=0<qa.constant.length?qa.constant[0]:0,$a=1<qa.constant.length?qa.constant[1]:0,Ic=2<qa.constant.length?qa.constant[2]:
0,mc=3<qa.constant.length?qa.constant[3]:0)):(Gc=V(qa.buffer)?ha.createStream(34962,qa.buffer):ha.getBuffer(qa.buffer),pc="type"in qa?Ca[qa.type]:Gc.dtype,Uc=!!qa.normalized,ec=qa.size|0,Dc=qa.offset|0,oc=qa.stride|0,Vc=qa.divisor|0);xb=m.location;cb=O[xb];if(1===Hc){cb.buffer||w.enableVertexAttribArray(xb);Mb=ec||2;if(cb.type!==pc||cb.size!==Mb||cb.buffer!==Gc||cb.normalized!==Uc||cb.offset!==Dc||cb.stride!==oc)w.bindBuffer(34962,Gc.buffer),w.vertexAttribPointer(xb,Mb,pc,Uc,oc,Dc),cb.type=pc,cb.size=
Mb,cb.buffer=Gc,cb.normalized=Uc,cb.offset=Dc,cb.stride=oc;cb.divisor!==Vc&&(v.vertexAttribDivisorANGLE(xb,Vc),cb.divisor=Vc)}else if(cb.buffer&&(w.disableVertexAttribArray(xb),cb.buffer=null),cb.x!==fc||cb.y!==$a||cb.z!==Ic||cb.w!==mc)w.vertexAttrib4f(xb,fc,$a,Ic,mc),cb.x=fc,cb.y=$a,cb.z=Ic,cb.w=mc;ab=n.fill;nb=ab[0];Cd=ab[1];Ib=ab[2];Nb=ab[3];r&&Va===nb&&Hb===Cd&&qc===Ib&&ib===Nb||(Va=nb,Hb=Cd,qc=Ib,ib=Nb,w.uniform4f(G.location,nb,Cd,Ib,Nb));Fb=n.scale;Cb=Fb[0];gb=Fb[1];r&&vb===Cb&&Yb===gb||(vb=
Cb,Yb=gb,w.uniform2f(aa.location,Cb,gb));Ob=n.scaleFract;pb=Ob[0];Tb=Ob[1];r&&Ua===pb&&yb===Tb||(Ua=pb,yb=Tb,w.uniform2f(x.location,pb,Tb));bc=n.translate;hb=bc[0];Ia=bc[1];r&&ob===hb&&qb===Ia||(ob=hb,qb=Ia,w.uniform2f(M.location,hb,Ia));Ka=n.translateFract;eb=Ka[0];La=Ka[1];r&&fb===eb&&jb===La||(fb=eb,jb=La,w.uniform2f(u.location,eb,La));Wa=n.id;r&&sb===Wa||(sb=Wa,w.uniform1f(U.location,Wa));rb=n.opacity;r&&Pa===rb||(Pa=rb,w.uniform1f(y.location,rb));Bc=C.call(this,d,n,r);Ra=null;(Ra=(Jb=V(Bc))?
q.createStream(Bc):q.getElements(Bc))&&w.bindBuffer(34963,Ra.buffer.buffer);if(Db=Ra?Ra.vertCount:-1)0<Ed?Ra?v.drawElementsInstancedANGLE(4,Db,Ra.type,0<<(Ra.type-5121>>1),Ed):v.drawArraysInstancedANGLE(4,0,Db,Ed):0>Ed&&(Ra?w.drawElements(4,Db,Ra.type,0<<(Ra.type-5121>>1)):w.drawArrays(4,0,Db)),d.viewportWidth=Ze,d.viewportHeight=Hd,ld&&ha.destroyStream($c),lc&&ha.destroyStream(Gc),Jb&&q.destroyStream(Ra)}c.dirty=!0;N.setVAO(null);k&&(ba.cpuTime+=performance.now()-b)},draw:function(a){var e,f,k,b,
v,r,n,g,A,D,C,ia,L,sa,Da,pa,wa,B,ma,X,za,oa;e=h.next;e!==h.cur&&(e?w.bindFramebuffer(36160,e.framebuffer):w.bindFramebuffer(36160,null),h.cur=e);if(c.dirty){e=E.dither;e!==c.dither&&(e?w.enable(3024):w.disable(3024),c.dither=e);e=E.depth_func;e!==c.depth_func&&(w.depthFunc(e),c.depth_func=e);e=P[0];r=P[1];if(e!==z[0]||r!==z[1])w.depthRange(e,r),z[0]=e,z[1]=r;e=E.depth_mask;e!==c.depth_mask&&(w.depthMask(e),c.depth_mask=e);e=da[0];r=da[1];f=da[2];k=da[3];if(e!==R[0]||r!==R[1]||f!==R[2]||k!==R[3])w.colorMask(e,
r,f,k),R[0]=e,R[1]=r,R[2]=f,R[3]=k;e=E.cull_enable;e!==c.cull_enable&&(e?w.enable(2884):w.disable(2884),c.cull_enable=e);e=E.cull_face;e!==c.cull_face&&(w.cullFace(e),c.cull_face=e);e=E.frontFace;e!==c.frontFace&&(w.frontFace(e),c.frontFace=e);e=E.lineWidth;e!==c.lineWidth&&(w.lineWidth(e),c.lineWidth=e);e=E.polygonOffset_enable;e!==c.polygonOffset_enable&&(e?w.enable(32823):w.disable(32823),c.polygonOffset_enable=e);e=l[0];r=l[1];if(e!==K[0]||r!==K[1])w.polygonOffset(e,r),K[0]=e,K[1]=r;e=E.sample_alpha;
e!==c.sample_alpha&&(e?w.enable(32926):w.disable(32926),c.sample_alpha=e);e=E.sample_enable;e!==c.sample_enable&&(e?w.enable(32928):w.disable(32928),c.sample_enable=e);e=J[0];r=J[1];if(e!==Ea[0]||r!==Ea[1])w.sampleCoverage(e,r),Ea[0]=e,Ea[1]=r;e=E.stencil_mask;e!==c.stencil_mask&&(w.stencilMask(e),c.stencil_mask=e);e=F[0];r=F[1];f=F[2];if(e!==ca[0]||r!==ca[1]||f!==ca[2])w.stencilFunc(e,r,f),ca[0]=e,ca[1]=r,ca[2]=f;e=ra[0];r=ra[1];f=ra[2];k=ra[3];if(e!==Aa[0]||r!==Aa[1]||f!==Aa[2]||k!==Aa[3])w.stencilOpSeparate(e,
r,f,k),Aa[0]=e,Aa[1]=r,Aa[2]=f,Aa[3]=k;e=Q[0];r=Q[1];f=Q[2];k=Q[3];if(e!==na[0]||r!==na[1]||f!==na[2]||k!==na[3])w.stencilOpSeparate(e,r,f,k),na[0]=e,na[1]=r,na[2]=f,na[3]=k}e=a.viewport;f=e.x|0;k=e.y|0;b="width"in e?e.width|0:d.framebufferWidth-f;v="height"in e?e.height|0:d.framebufferHeight-k;e=d.viewportWidth;d.viewportWidth=b;r=d.viewportHeight;d.viewportHeight=v;w.viewport(f,k,b,v);ga[0]=f;ga[1]=k;ga[2]=b;ga[3]=v;w.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;w.enable(3042);c.blend_enable=
!0;w.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;w.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;w.disable(2929);c.depth_enable=!1;v=a.viewport;f=v.x|0;k=v.y|0;b="width"in v?v.width|0:d.framebufferWidth-f;v="height"in v?v.height|0:d.framebufferHeight-k;w.scissor(f,k,b,v);p[0]=f;p[1]=k;p[2]=b;p[3]=v;w.enable(3089);c.scissor_enable=!0;w.disable(2960);c.stencil_enable=!1;if(f=c.profile)n=performance.now(),ba.count++;w.useProgram(H.program);k=Y.angle_instanced_arrays;
N.setVAO(null);la.buffer=a.positionBuffer;b=!1;g=0;A=!1;C=D=0;ia=1;L=0;sa=5126;B=wa=pa=Da=0;V(la)?(b=!0,v=ha.createStream(34962,la),sa=v.dtype):(v=ha.getBuffer(la))?sa=v.dtype:"constant"in la?(ia=2,"number"===typeof la.constant?(pa=la.constant,wa=B=Da=0):(pa=0<la.constant.length?la.constant[0]:0,wa=1<la.constant.length?la.constant[1]:0,B=2<la.constant.length?la.constant[2]:0,Da=3<la.constant.length?la.constant[3]:0)):(v=V(la.buffer)?ha.createStream(34962,la.buffer):ha.getBuffer(la.buffer),sa="type"in
la?Ca[la.type]:v.dtype,A=!!la.normalized,C=la.size|0,D=la.offset|0,L=la.stride|0,g=la.divisor|0);ma=t.location;X=O[ma];if(1===ia){X.buffer||w.enableVertexAttribArray(ma);C=C||2;if(X.type!==sa||X.size!==C||X.buffer!==v||X.normalized!==A||X.offset!==D||X.stride!==L)w.bindBuffer(34962,v.buffer),w.vertexAttribPointer(ma,C,sa,A,L,D),X.type=sa,X.size=C,X.buffer=v,X.normalized=A,X.offset=D,X.stride=L;X.divisor!==g&&(k.vertexAttribDivisorANGLE(ma,g),X.divisor=g)}else if(X.buffer&&(w.disableVertexAttribArray(ma),
X.buffer=null),X.x!==pa||X.y!==wa||X.z!==B||X.w!==Da)w.vertexAttrib4f(ma,pa,wa,B,Da),X.x=pa,X.y=wa,X.z=B,X.w=Da;qa.buffer=a.positionFractBuffer;g=!1;D=0;L=!1;Da=sa=0;pa=1;ma=0;X=5126;oa=za=B=wa=0;V(qa)?(g=!0,A=ha.createStream(34962,qa),X=A.dtype):(A=ha.getBuffer(qa))?X=A.dtype:"constant"in qa?(pa=2,"number"===typeof qa.constant?(B=qa.constant,za=oa=wa=0):(B=0<qa.constant.length?qa.constant[0]:0,za=1<qa.constant.length?qa.constant[1]:0,oa=2<qa.constant.length?qa.constant[2]:0,wa=3<qa.constant.length?
qa.constant[3]:0)):(A=V(qa.buffer)?ha.createStream(34962,qa.buffer):ha.getBuffer(qa.buffer),X="type"in qa?Ca[qa.type]:A.dtype,L=!!qa.normalized,Da=qa.size|0,sa=qa.offset|0,ma=qa.stride|0,D=qa.divisor|0);C=m.location;ia=O[C];if(1===pa){ia.buffer||w.enableVertexAttribArray(C);Da=Da||2;if(ia.type!==X||ia.size!==Da||ia.buffer!==A||ia.normalized!==L||ia.offset!==sa||ia.stride!==ma)w.bindBuffer(34962,A.buffer),w.vertexAttribPointer(C,Da,X,L,ma,sa),ia.type=X,ia.size=Da,ia.buffer=A,ia.normalized=L,ia.offset=
sa,ia.stride=ma;ia.divisor!==D&&(k.vertexAttribDivisorANGLE(C,D),ia.divisor=D)}else if(ia.buffer&&(w.disableVertexAttribArray(C),ia.buffer=null),ia.x!==B||ia.y!==za||ia.z!==oa||ia.w!==wa)w.vertexAttrib4f(C,B,za,oa,wa),ia.x=B,ia.y=za,ia.z=oa,ia.w=wa;D=a.fill;w.uniform4f(G.location,D[0],D[1],D[2],D[3]);D=a.scale;w.uniform2f(aa.location,D[0],D[1]);D=a.scaleFract;w.uniform2f(x.location,D[0],D[1]);D=a.translate;w.uniform2f(M.location,D[0],D[1]);D=a.translateFract;w.uniform2f(u.location,D[0],D[1]);w.uniform1f(U.location,
a.id);w.uniform1f(y.location,a.opacity);D=I.call(this,d,a,0);(D=(a=V(D))?q.createStream(D):q.getElements(D))&&w.bindBuffer(34963,D.buffer.buffer);if(L=D?D.vertCount:-1)sa=T.instances,0<sa?D?k.drawElementsInstancedANGLE(4,L,D.type,0<<(D.type-5121>>1),sa):k.drawArraysInstancedANGLE(4,0,L,sa):0>sa&&(D?w.drawElements(4,L,D.type,0<<(D.type-5121>>1)):w.drawArrays(4,0,L)),c.dirty=!0,N.setVAO(null),d.viewportWidth=e,d.viewportHeight=r,f&&(ba.cpuTime+=performance.now()-n),b&&ha.destroyStream(v),g&&ha.destroyStream(A),
a&&q.destroyStream(D)},scope:function(h,l,b){var p,w,v,r,S,x,F,P,Q,z,L,sa,Da,pa,ga,R,I,t,u,y,J,C,ca,K,B,m,H,N,ra,O,Ea,G,M,U,W,Y,da,aa,na,ta,ka,Aa,Z,fa,Hd,Ae,te,$d,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb;p=h.viewport;w=p.x|0;v=p.y|0;r="width"in p?p.width|0:d.framebufferWidth-w;S="height"in p?p.height|0:d.framebufferHeight-v;x=d.viewportWidth;
d.viewportWidth=r;F=d.viewportHeight;d.viewportHeight=S;P=za[0];za[0]=w;Q=za[1];za[1]=v;z=za[2];za[2]=r;L=za[3];za[3]=S;sa=a[0];a[0]=0;Da=a[1];a[1]=0;pa=a[2];a[2]=0;ga=a[3];a[3]=0;R=E.blend_enable;E.blend_enable=!0;I=A[0];A[0]=32774;t=A[1];A[1]=32774;u=Cc[0];Cc[0]=770;y=Cc[1];Cc[1]=771;J=Cc[2];Cc[2]=773;C=Cc[3];Cc[3]=1;ca=E.depth_enable;E.depth_enable=!1;K=h.viewport;B=K.x|0;m=K.y|0;H="width"in K?K.width|0:d.framebufferWidth-B;N="height"in K?K.height|0:d.framebufferHeight-m;ra=oa[0];oa[0]=B;O=oa[1];
oa[1]=m;Ea=oa[2];oa[2]=H;G=oa[3];oa[3]=N;M=E.scissor_enable;E.scissor_enable=!0;U=E.stencil_enable;E.stencil_enable=!1;if(W=c.profile)Y=performance.now(),ba.count++;da=g.call(this,d,h,b);aa=null;aa=(na=V(da))?q.createStream(da):q.getElements(da);ta=T.elements;T.elements=aa;ka=T.offset;T.offset=0;Aa=aa?aa.vertCount:-1;Z=T.count;T.count=Aa;fa=T.primitive;T.primitive=4;Hd=h.fill;Ae=e[14];e[14]=Hd;te=h.id;$d=e[31];e[31]=te;Wd=h.opacity;Ad=e[10];e[10]=Wd;ld=d.pixelRatio;$c=e[34];e[34]=ld;pd=h.scale;Lc=
e[6];e[6]=pd;od=h.scaleFract;Fc=e[7];e[7]=od;ed=h.translate;Oc=e[8];e[8]=ed;jd=h.translateFract;Ab=e[9];e[9]=jd;Eb=k.call(this,d,h,b);tc=e[3];e[3]=Eb;la.buffer=h.positionBuffer;wb=!1;wc=null;Bb=0;Jc=!1;Gc=lc=0;Vc=1;Uc=0;Dc=5126;pc=oc=Hc=ec=0;V(la)?(wb=!0,wc=ha.createStream(34962,la),Dc=wc.dtype):(wc=ha.getBuffer(la))?Dc=wc.dtype:"constant"in la?(Vc=2,"number"===typeof la.constant?(Hc=la.constant,oc=pc=ec=0):(Hc=0<la.constant.length?la.constant[0]:0,oc=1<la.constant.length?la.constant[1]:0,pc=2<la.constant.length?
la.constant[2]:0,ec=3<la.constant.length?la.constant[3]:0)):(wc=V(la.buffer)?ha.createStream(34962,la.buffer):ha.getBuffer(la.buffer),Dc="type"in la?Ca[la.type]:wc.dtype,Jc=!!la.normalized,Gc=la.size|0,lc=la.offset|0,Uc=la.stride|0,Bb=la.divisor|0);mc=n.buffer;n.buffer=wc;fc=n.divisor;n.divisor=Bb;$a=n.normalized;n.normalized=Jc;Ic=n.offset;n.offset=lc;xb=n.size;n.size=Gc;cb=n.state;n.state=Vc;Mb=n.stride;n.stride=Uc;ab=n.type;n.type=Dc;nb=n.w;n.w=ec;Va=n.x;n.x=Hc;Cd=n.y;n.y=oc;Hb=n.z;n.z=pc;qa.buffer=
h.positionFractBuffer;Ib=!1;qc=null;Nb=0;ib=!1;Cb=Fb=0;vb=1;gb=0;Yb=5126;Tb=Ua=pb=Ob=0;V(qa)?(Ib=!0,qc=ha.createStream(34962,qa),Yb=qc.dtype):(qc=ha.getBuffer(qa))?Yb=qc.dtype:"constant"in qa?(vb=2,"number"===typeof qa.constant?(pb=qa.constant,Ua=Tb=Ob=0):(pb=0<qa.constant.length?qa.constant[0]:0,Ua=1<qa.constant.length?qa.constant[1]:0,Tb=2<qa.constant.length?qa.constant[2]:0,Ob=3<qa.constant.length?qa.constant[3]:0)):(qc=V(qa.buffer)?ha.createStream(34962,qa.buffer):ha.getBuffer(qa.buffer),Yb="type"in
qa?Ca[qa.type]:qc.dtype,ib=!!qa.normalized,Cb=qa.size|0,Fb=qa.offset|0,gb=qa.stride|0,Nb=qa.divisor|0);yb=f.buffer;f.buffer=qc;bc=f.divisor;f.divisor=Nb;hb=f.normalized;f.normalized=ib;ob=f.offset;f.offset=Fb;Ia=f.size;f.size=Cb;qb=f.state;f.state=vb;Ka=f.stride;f.stride=gb;eb=f.type;f.type=Yb;fb=f.w;f.w=Ob;La=f.x;f.x=pb;jb=f.y;f.y=Ua;Wa=f.z;f.z=Tb;sb=D.vert;D.vert=42;rb=D.frag;D.frag=41;c.dirty=!0;l(d,h,b);d.viewportWidth=x;d.viewportHeight=F;za[0]=P;za[1]=Q;za[2]=z;za[3]=L;a[0]=sa;a[1]=Da;a[2]=
pa;a[3]=ga;E.blend_enable=R;A[0]=I;A[1]=t;Cc[0]=u;Cc[1]=y;Cc[2]=J;Cc[3]=C;E.depth_enable=ca;oa[0]=ra;oa[1]=O;oa[2]=Ea;oa[3]=G;E.scissor_enable=M;E.stencil_enable=U;W&&(ba.cpuTime+=performance.now()-Y);na&&q.destroyStream(aa);T.elements=ta;T.offset=ka;T.count=Z;T.primitive=fa;e[14]=Ae;e[31]=$d;e[10]=Ad;e[34]=$c;e[6]=Lc;e[7]=Fc;e[8]=Oc;e[9]=Ab;e[3]=tc;wb&&ha.destroyStream(wc);n.buffer=mc;n.divisor=fc;n.normalized=$a;n.offset=Ic;n.size=xb;n.state=cb;n.stride=Mb;n.type=ab;n.w=nb;n.x=Va;n.y=Cd;n.z=Hb;
Ib&&ha.destroyStream(qc);f.buffer=yb;f.divisor=bc;f.normalized=hb;f.offset=ob;f.size=Ia;f.state=qb;f.stride=Ka;f.type=eb;f.w=fb;f.x=La;f.y=jb;f.z=Wa;D.vert=sb;D.frag=rb;c.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,
za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta){var v,r,S,va,Fa,sd,Gb,ia,L,sa,Da,pa,wa,Ga,ma,X,ua,Ja,Ba,lb,ea,fa,$b,Ha,ac,Rb,Oa,Gd,yd,Vd,ze,xe,Nd,pe,ie,Ed,ce,ge,be;v=b.attributes;r=b.buffer;S=b.context;va=b.current;Fa=b.draw;sd=b.elements;Gb=b.extensions;ia=b.framebuffer;L=b.gl;sa=b.isBufferArgs;Da=b.next;pa=b.shader;wa=b.uniforms;Ga=b.vao;ma=Da.blend_color;X=va.blend_color;ua=Da.blend_equation;Ja=va.blend_equation;Ba=Da.blend_func;lb=va.blend_func;ea=Da.colorMask;fa=va.colorMask;$b=Da.depth_range;Ha=va.depth_range;
ac=Da.polygonOffset_offset;Rb=va.polygonOffset_offset;Oa=Da.sample_coverage;Gd=va.sample_coverage;yd=Da.scissor_box;Vd=va.scissor_box;ze=Da.stencil_func;xe=va.stencil_func;Nd=Da.stencil_opBack;pe=va.stencil_opBack;ie=Da.stencil_opFront;Ed=va.stencil_opFront;ce=Da.viewport;ge=va.viewport;be={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,e){var c,d,f,h,k,b;c=ia.next;c!==ia.cur&&(c?L.bindFramebuffer(36160,c.framebuffer):L.bindFramebuffer(36160,
null),ia.cur=c);if(va.dirty){var q,n,g,w,x,D,pa,E,I,t,u,y,ma,C,B,m,wa,H,N,T,O,G,M,U,Y,ha,aa,V,Ba,Ic,xb,cb,Mb,ab;q=Da.dither;q!==va.dither&&(q?L.enable(3024):L.disable(3024),va.dither=q);n=ua[0];g=ua[1];if(n!==Ja[0]||g!==Ja[1])L.blendEquationSeparate(n,g),Ja[0]=n,Ja[1]=g;w=Da.depth_func;w!==va.depth_func&&(L.depthFunc(w),va.depth_func=w);x=$b[0];D=$b[1];if(x!==Ha[0]||D!==Ha[1])L.depthRange(x,D),Ha[0]=x,Ha[1]=D;pa=Da.depth_mask;pa!==va.depth_mask&&(L.depthMask(pa),va.depth_mask=pa);E=ea[0];I=ea[1];
t=ea[2];u=ea[3];if(E!==fa[0]||I!==fa[1]||t!==fa[2]||u!==fa[3])L.colorMask(E,I,t,u),fa[0]=E,fa[1]=I,fa[2]=t,fa[3]=u;y=Da.cull_enable;y!==va.cull_enable&&(y?L.enable(2884):L.disable(2884),va.cull_enable=y);ma=Da.cull_face;ma!==va.cull_face&&(L.cullFace(ma),va.cull_face=ma);C=Da.frontFace;C!==va.frontFace&&(L.frontFace(C),va.frontFace=C);B=Da.lineWidth;B!==va.lineWidth&&(L.lineWidth(B),va.lineWidth=B);m=Da.polygonOffset_enable;m!==va.polygonOffset_enable&&(m?L.enable(32823):L.disable(32823),va.polygonOffset_enable=
m);wa=ac[0];H=ac[1];if(wa!==Rb[0]||H!==Rb[1])L.polygonOffset(wa,H),Rb[0]=wa,Rb[1]=H;N=Da.sample_alpha;N!==va.sample_alpha&&(N?L.enable(32926):L.disable(32926),va.sample_alpha=N);T=Da.sample_enable;T!==va.sample_enable&&(T?L.enable(32928):L.disable(32928),va.sample_enable=T);O=Oa[0];G=Oa[1];if(O!==Gd[0]||G!==Gd[1])L.sampleCoverage(O,G),Gd[0]=O,Gd[1]=G;M=Da.stencil_mask;M!==va.stencil_mask&&(L.stencilMask(M),va.stencil_mask=M);U=ze[0];Y=ze[1];ha=ze[2];if(U!==xe[0]||Y!==xe[1]||ha!==xe[2])L.stencilFunc(U,
Y,ha),xe[0]=U,xe[1]=Y,xe[2]=ha;aa=ie[0];V=ie[1];Ba=ie[2];Ic=ie[3];if(aa!==Ed[0]||V!==Ed[1]||Ba!==Ed[2]||Ic!==Ed[3])L.stencilOpSeparate(aa,V,Ba,Ic),Ed[0]=aa,Ed[1]=V,Ed[2]=Ba,Ed[3]=Ic;xb=Nd[0];cb=Nd[1];Mb=Nd[2];ab=Nd[3];if(xb!==pe[0]||cb!==pe[1]||Mb!==pe[2]||ab!==pe[3])L.stencilOpSeparate(xb,cb,Mb,ab),pe[0]=xb,pe[1]=cb,pe[2]=Mb,pe[3]=ab}L.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;L.enable(3042);va.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);lb[0]=770;lb[1]=771;lb[2]=773;lb[3]=1;L.disable(2929);
va.depth_enable=!1;L.enable(3089);va.scissor_enable=!0;L.disable(2960);va.stencil_enable=!1;if(d=va.profile)f=performance.now(),ba.count+=e;L.useProgram(ta.program);h=Gb.angle_instanced_arrays;var nb;Ga.setVAO(null);L.uniform1i(F.location,!1);L.uniform1i(Aa.location,K.bind());nb=Fa.instances;for(k=0;k<e;++k){b=a[k];var Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,
Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,yd,ce,hd,nf,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,Ve,Ud,ae,We,hf,mf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf,dg,Sf,Tf;Va=b.viewport;Cd=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:S.framebufferWidth-
Cd;qc="height"in Va?Va.height|0:S.framebufferHeight-Hb;Nb=S.viewportWidth;S.viewportWidth=Ib;ib=S.viewportHeight;S.viewportHeight=qc;L.viewport(Cd,Hb,Ib,qc);ge[0]=Cd;ge[1]=Hb;ge[2]=Ib;ge[3]=qc;Fb=b.viewport;Cb=Fb.x|0;vb=Fb.y|0;gb="width"in Fb?Fb.width|0:S.framebufferWidth-Cb;Yb="height"in Fb?Fb.height|0:S.framebufferHeight-vb;L.scissor(Cb,vb,gb,Yb);Vd[0]=Cb;Vd[1]=vb;Vd[2]=gb;Vd[3]=Yb;Ob=A.call(this,S,b,k);pb=!1;Ua=null;Tb=0;yb=!1;hb=bc=0;ob=1;Ia=0;qb=5126;La=fb=eb=Ka=0;sa(Ob)?(pb=!0,Ua=r.createStream(34962,
Ob),qb=Ua.dtype):(Ua=r.getBuffer(Ob))?qb=Ua.dtype:"constant"in Ob?(ob=2,"number"===typeof Ob.constant?(eb=Ob.constant,fb=La=Ka=0):(eb=0<Ob.constant.length?Ob.constant[0]:0,fb=1<Ob.constant.length?Ob.constant[1]:0,La=2<Ob.constant.length?Ob.constant[2]:0,Ka=3<Ob.constant.length?Ob.constant[3]:0)):(Ua=sa(Ob.buffer)?r.createStream(34962,Ob.buffer):r.getBuffer(Ob.buffer),qb="type"in Ob?be[Ob.type]:Ua.dtype,yb=!!Ob.normalized,hb=Ob.size|0,bc=Ob.offset|0,Ia=Ob.stride|0,Tb=Ob.divisor|0);jb=ya.location;Wa=
v[jb];if(1===ob){Wa.buffer||L.enableVertexAttribArray(jb);sb=hb||1;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Ua||Wa.normalized!==yb||Wa.offset!==bc||Wa.stride!==Ia)L.bindBuffer(34962,Ua.buffer),L.vertexAttribPointer(jb,sb,qb,yb,Ia,bc),Wa.type=qb,Wa.size=sb,Wa.buffer=Ua,Wa.normalized=yb,Wa.offset=bc,Wa.stride=Ia;Wa.divisor!==Tb&&(h.vertexAttribDivisorANGLE(jb,Tb),Wa.divisor=Tb)}else if(Wa.buffer&&(L.disableVertexAttribArray(jb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)L.vertexAttrib4f(jb,
eb,fb,La,Ka),Wa.x=eb,Wa.y=fb,Wa.z=La,Wa.w=Ka;rb=ka.call(this,S,b,k);Pa=!1;Bc=null;Ra=0;Jb=!1;Ma=Db=0;vd=1;Ya=0;Kb=5126;Zb=Na=kb=Lb=0;sa(rb)?(Pa=!0,Bc=r.createStream(34962,rb),Kb=Bc.dtype):(Bc=r.getBuffer(rb))?Kb=Bc.dtype:"constant"in rb?(vd=2,"number"===typeof rb.constant?(kb=rb.constant,Na=Zb=Lb=0):(kb=0<rb.constant.length?rb.constant[0]:0,Na=1<rb.constant.length?rb.constant[1]:0,Zb=2<rb.constant.length?rb.constant[2]:0,Lb=3<rb.constant.length?rb.constant[3]:0)):(Bc=sa(rb.buffer)?r.createStream(34962,
rb.buffer):r.getBuffer(rb.buffer),Kb="type"in rb?be[rb.type]:Bc.dtype,Jb=!!rb.normalized,Ma=rb.size|0,Db=rb.offset|0,Ya=rb.stride|0,Ra=rb.divisor|0);Qa=Xb.location;tb=v[Qa];if(1===vd){tb.buffer||L.enableVertexAttribArray(Qa);ub=Ma||1;if(tb.type!==Kb||tb.size!==ub||tb.buffer!==Bc||tb.normalized!==Jb||tb.offset!==Db||tb.stride!==Ya)L.bindBuffer(34962,Bc.buffer),L.vertexAttribPointer(Qa,ub,Kb,Jb,Ya,Db),tb.type=Kb,tb.size=ub,tb.buffer=Bc,tb.normalized=Jb,tb.offset=Db,tb.stride=Ya;tb.divisor!==Ra&&(h.vertexAttribDivisorANGLE(Qa,
Ra),tb.divisor=Ra)}else if(tb.buffer&&(L.disableVertexAttribArray(Qa),tb.buffer=null),tb.x!==kb||tb.y!==Na||tb.z!==Zb||tb.w!==Lb)L.vertexAttrib4f(Qa,kb,Na,Zb,Lb),tb.x=kb,tb.y=Na,tb.z=Zb,tb.w=Lb;Sa=Z.call(this,S,b,k);mb=!1;gc=null;zc=0;uc=!1;jc=bb=0;ad=1;Xa=0;md=5126;sc=Ub=Za=zb=0;sa(Sa)?(mb=!0,gc=r.createStream(34962,Sa),md=gc.dtype):(gc=r.getBuffer(Sa))?md=gc.dtype:"constant"in Sa?(ad=2,"number"===typeof Sa.constant?(Za=Sa.constant,Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?
Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?Sa.constant[3]:0)):(gc=sa(Sa.buffer)?r.createStream(34962,Sa.buffer):r.getBuffer(Sa.buffer),md="type"in Sa?be[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,zc=Sa.divisor|0);Vb=ja.location;Pb=v[Vb];if(1===ad){Pb.buffer||L.enableVertexAttribArray(Vb);Kc=jc||1;if(Pb.type!==md||Pb.size!==Kc||Pb.buffer!==gc||Pb.normalized!==uc||Pb.offset!==bb||Pb.stride!==Xa)L.bindBuffer(34962,gc.buffer),
L.vertexAttribPointer(Vb,Kc,md,uc,Xa,bb),Pb.type=md,Pb.size=Kc,Pb.buffer=gc,Pb.normalized=uc,Pb.offset=bb,Pb.stride=Xa;Pb.divisor!==zc&&(h.vertexAttribDivisorANGLE(Vb,zc),Pb.divisor=zc)}else if(Pb.buffer&&(L.disableVertexAttribArray(Vb),Pb.buffer=null),Pb.x!==Za||Pb.y!==Ub||Pb.z!==sc||Pb.w!==zb)L.vertexAttrib4f(Vb,Za,Ub,sc,zb),Pb.x=Za,Pb.y=Ub,Pb.z=sc,Pb.w=zb;Qb=W.call(this,S,b,k);Xd=!1;Ec=null;rd=0;Mc=!1;td=Wc=0;nc=1;vc=0;hc=5126;Wb=Sb=rc=db=0;sa(Qb)?(Xd=!0,Ec=r.createStream(34962,Qb),hc=Ec.dtype):
(Ec=r.getBuffer(Qb))?hc=Ec.dtype:"constant"in Qb?(nc=2,"number"===typeof Qb.constant?(rc=Qb.constant,Sb=Wb=db=0):(rc=0<Qb.constant.length?Qb.constant[0]:0,Sb=1<Qb.constant.length?Qb.constant[1]:0,Wb=2<Qb.constant.length?Qb.constant[2]:0,db=3<Qb.constant.length?Qb.constant[3]:0)):(Ec=sa(Qb.buffer)?r.createStream(34962,Qb.buffer):r.getBuffer(Qb.buffer),hc="type"in Qb?be[Qb.type]:Ec.dtype,Mc=!!Qb.normalized,td=Qb.size|0,Wc=Qb.offset|0,vc=Qb.stride|0,rd=Qb.divisor|0);dc=Ta.location;ic=v[dc];if(1===nc){ic.buffer||
L.enableVertexAttribArray(dc);xc=td||1;if(ic.type!==hc||ic.size!==xc||ic.buffer!==Ec||ic.normalized!==Mc||ic.offset!==Wc||ic.stride!==vc)L.bindBuffer(34962,Ec.buffer),L.vertexAttribPointer(dc,xc,hc,Mc,vc,Wc),ic.type=hc,ic.size=xc,ic.buffer=Ec,ic.normalized=Mc,ic.offset=Wc,ic.stride=vc;ic.divisor!==rd&&(h.vertexAttribDivisorANGLE(dc,rd),ic.divisor=rd)}else if(ic.buffer&&(L.disableVertexAttribArray(dc),ic.buffer=null),ic.x!==rc||ic.y!==Sb||ic.z!==Wb||ic.w!==db)L.vertexAttrib4f(dc,rc,Sb,Wb,db),ic.x=
rc,ic.y=Sb,ic.z=Wb,ic.w=db;Ac=da.call(this,S,b,k);bd=!1;Pc=null;Qc=0;Rc=!1;kd=Xc=0;cd=1;Yc=0;kc=5126;dd=Tc=Zc=cc=0;sa(Ac)?(bd=!0,Pc=r.createStream(34962,Ac),kc=Pc.dtype):(Pc=r.getBuffer(Ac))?kc=Pc.dtype:"constant"in Ac?(cd=2,"number"===typeof Ac.constant?(Zc=Ac.constant,Tc=dd=cc=0):(Zc=0<Ac.constant.length?Ac.constant[0]:0,Tc=1<Ac.constant.length?Ac.constant[1]:0,dd=2<Ac.constant.length?Ac.constant[2]:0,cc=3<Ac.constant.length?Ac.constant[3]:0)):(Pc=sa(Ac.buffer)?r.createStream(34962,Ac.buffer):r.getBuffer(Ac.buffer),
kc="type"in Ac?be[Ac.type]:Pc.dtype,Rc=!!Ac.normalized,kd=Ac.size|0,Xc=Ac.offset|0,Yc=Ac.stride|0,Qc=Ac.divisor|0);yc=la.location;gd=v[yc];if(1===cd){gd.buffer||L.enableVertexAttribArray(yc);xd=kd||1;if(gd.type!==kc||gd.size!==xd||gd.buffer!==Pc||gd.normalized!==Rc||gd.offset!==Xc||gd.stride!==Yc)L.bindBuffer(34962,Pc.buffer),L.vertexAttribPointer(yc,xd,kc,Rc,Yc,Xc),gd.type=kc,gd.size=xd,gd.buffer=Pc,gd.normalized=Rc,gd.offset=Xc,gd.stride=Yc;gd.divisor!==Qc&&(h.vertexAttribDivisorANGLE(yc,Qc),gd.divisor=
Qc)}else if(gd.buffer&&(L.disableVertexAttribArray(yc),gd.buffer=null),gd.x!==Zc||gd.y!==Tc||gd.z!==dd||gd.w!==cc)L.vertexAttrib4f(yc,Zc,Tc,dd,cc),gd.x=Zc,gd.y=Tc,gd.z=dd,gd.w=cc;yd=R.call(this,S,b,k);ce=!1;hd=null;nf=0;Od=!1;ke=Yd=0;Pd=1;Kd=0;Id=5126;qd=ud=Sc=nd=0;sa(yd)?(ce=!0,hd=r.createStream(34962,yd),Id=hd.dtype):(hd=r.getBuffer(yd))?Id=hd.dtype:"constant"in yd?(Pd=2,"number"===typeof yd.constant?(Sc=yd.constant,ud=qd=nd=0):(Sc=0<yd.constant.length?yd.constant[0]:0,ud=1<yd.constant.length?yd.constant[1]:
0,qd=2<yd.constant.length?yd.constant[2]:0,nd=3<yd.constant.length?yd.constant[3]:0)):(hd=sa(yd.buffer)?r.createStream(34962,yd.buffer):r.getBuffer(yd.buffer),Id="type"in yd?be[yd.type]:hd.dtype,Od=!!yd.normalized,ke=yd.size|0,Yd=yd.offset|0,Kd=yd.stride|0,nf=yd.divisor|0);id=oa.location;wd=v[id];if(1===Pd){wd.buffer||L.enableVertexAttribArray(id);Dd=ke||1;if(wd.type!==Id||wd.size!==Dd||wd.buffer!==hd||wd.normalized!==Od||wd.offset!==Yd||wd.stride!==Kd)L.bindBuffer(34962,hd.buffer),L.vertexAttribPointer(id,
Dd,Id,Od,Kd,Yd),wd.type=Id,wd.size=Dd,wd.buffer=hd,wd.normalized=Od,wd.offset=Yd,wd.stride=Kd;wd.divisor!==nf&&(h.vertexAttribDivisorANGLE(id,nf),wd.divisor=nf)}else if(wd.buffer&&(L.disableVertexAttribArray(id),wd.buffer=null),wd.x!==Sc||wd.y!==ud||wd.z!==qd||wd.w!==nd)L.vertexAttrib4f(id,Sc,ud,qd,nd),wd.x=Sc,wd.y=ud,wd.z=qd,wd.w=nd;Fd=P.call(this,S,b,k);qe=!1;le=null;Ne=0;me=!1;he=je=0;ue=1;ee=0;ne=5126;re=ve=fd=Nc=0;sa(Fd)?(qe=!0,le=r.createStream(34962,Fd),ne=le.dtype):(le=r.getBuffer(Fd))?ne=
le.dtype:"constant"in Fd?(ue=2,"number"===typeof Fd.constant?(fd=Fd.constant,ve=re=Nc=0):(fd=0<Fd.constant.length?Fd.constant[0]:0,ve=1<Fd.constant.length?Fd.constant[1]:0,re=2<Fd.constant.length?Fd.constant[2]:0,Nc=3<Fd.constant.length?Fd.constant[3]:0)):(le=sa(Fd.buffer)?r.createStream(34962,Fd.buffer):r.getBuffer(Fd.buffer),ne="type"in Fd?be[Fd.type]:le.dtype,me=!!Fd.normalized,he=Fd.size|0,je=Fd.offset|0,ee=Fd.stride|0,Ne=Fd.divisor|0);Ld=p.location;Qd=v[Ld];if(1===ue){Qd.buffer||L.enableVertexAttribArray(Ld);
Rd=he||4;if(Qd.type!==ne||Qd.size!==Rd||Qd.buffer!==le||Qd.normalized!==me||Qd.offset!==je||Qd.stride!==ee)L.bindBuffer(34962,le.buffer),L.vertexAttribPointer(Ld,Rd,ne,me,ee,je),Qd.type=ne,Qd.size=Rd,Qd.buffer=le,Qd.normalized=me,Qd.offset=je,Qd.stride=ee;Qd.divisor!==Ne&&(h.vertexAttribDivisorANGLE(Ld,Ne),Qd.divisor=Ne)}else if(Qd.buffer&&(L.disableVertexAttribArray(Ld),Qd.buffer=null),Qd.x!==fd||Qd.y!==ve||Qd.z!==re||Qd.w!==Nc)L.vertexAttrib4f(Ld,fd,ve,re,Nc),Qd.x=fd,Qd.y=ve,Qd.z=re,Qd.w=Nc;Sd=
z.call(this,S,b,k);oe=!1;ye=null;Be=0;se=!1;Se=Re=0;Oe=1;we=0;Ge=5126;He=Ke=Je=Ie=0;sa(Sd)?(oe=!0,ye=r.createStream(34962,Sd),Ge=ye.dtype):(ye=r.getBuffer(Sd))?Ge=ye.dtype:"constant"in Sd?(Oe=2,"number"===typeof Sd.constant?(Je=Sd.constant,Ke=He=Ie=0):(Je=0<Sd.constant.length?Sd.constant[0]:0,Ke=1<Sd.constant.length?Sd.constant[1]:0,He=2<Sd.constant.length?Sd.constant[2]:0,Ie=3<Sd.constant.length?Sd.constant[3]:0)):(ye=sa(Sd.buffer)?r.createStream(34962,Sd.buffer):r.getBuffer(Sd.buffer),Ge="type"in
Sd?be[Sd.type]:ye.dtype,se=!!Sd.normalized,Se=Sd.size|0,Re=Sd.offset|0,we=Sd.stride|0,Be=Sd.divisor|0);Md=Ea.location;Zd=v[Md];if(1===Oe){Zd.buffer||L.enableVertexAttribArray(Md);de=Se||4;if(Zd.type!==Ge||Zd.size!==de||Zd.buffer!==ye||Zd.normalized!==se||Zd.offset!==Re||Zd.stride!==we)L.bindBuffer(34962,ye.buffer),L.vertexAttribPointer(Md,de,Ge,se,we,Re),Zd.type=Ge,Zd.size=de,Zd.buffer=ye,Zd.normalized=se,Zd.offset=Re,Zd.stride=we;Zd.divisor!==Be&&(h.vertexAttribDivisorANGLE(Md,Be),Zd.divisor=Be)}else if(Zd.buffer&&
(L.disableVertexAttribArray(Md),Zd.buffer=null),Zd.x!==Je||Zd.y!==Ke||Zd.z!==He||Zd.w!==Ie)L.vertexAttrib4f(Md,Je,Ke,He,Ie),Zd.x=Je,Zd.y=Ke,Zd.z=He,Zd.w=Ie;fe=l.call(this,S,b,k);Le=!1;Jd=null;Td=0;De=!1;bf=Me=0;af=1;Te=0;Pe=5126;Ve=Ue=Xe=$e=0;sa(fe)?(Le=!0,Jd=r.createStream(34962,fe),Pe=Jd.dtype):(Jd=r.getBuffer(fe))?Pe=Jd.dtype:"constant"in fe?(af=2,"number"===typeof fe.constant?(Xe=fe.constant,Ue=Ve=$e=0):(Xe=0<fe.constant.length?fe.constant[0]:0,Ue=1<fe.constant.length?fe.constant[1]:0,Ve=2<fe.constant.length?
fe.constant[2]:0,$e=3<fe.constant.length?fe.constant[3]:0)):(Jd=sa(fe.buffer)?r.createStream(34962,fe.buffer):r.getBuffer(fe.buffer),Pe="type"in fe?be[fe.type]:Jd.dtype,De=!!fe.normalized,bf=fe.size|0,Me=fe.offset|0,Te=fe.stride|0,Td=fe.divisor|0);Ud=ca.location;ae=v[Ud];if(1===af){ae.buffer||L.enableVertexAttribArray(Ud);We=bf||1;if(ae.type!==Pe||ae.size!==We||ae.buffer!==Jd||ae.normalized!==De||ae.offset!==Me||ae.stride!==Te)L.bindBuffer(34962,Jd.buffer),L.vertexAttribPointer(Ud,We,Pe,De,Te,Me),
ae.type=Pe,ae.size=We,ae.buffer=Jd,ae.normalized=De,ae.offset=Me,ae.stride=Te;ae.divisor!==Td&&(h.vertexAttribDivisorANGLE(Ud,Td),ae.divisor=Td)}else if(ae.buffer&&(L.disableVertexAttribArray(Ud),ae.buffer=null),ae.x!==Xe||ae.y!==Ue||ae.z!==Ve||ae.w!==$e)L.vertexAttrib4f(Ud,Xe,Ue,Ve,$e),ae.x=Xe,ae.y=Ue,ae.z=Ve,ae.w=$e;hf=S.pixelRatio;k&&mf===hf||(mf=hf,L.uniform1f(za.location,hf));ef=b.scale;jf=ef[0];lf=ef[1];k&&kf===jf&&rf===lf||(kf=jf,rf=lf,L.uniform2f(ga.location,jf,lf));of=b.scaleFract;sf=of[0];
Cf=of[1];k&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,L.uniform2f(Ca.location,sf,Cf));Ee=b.translate;pf=Ee[0];Df=Ee[1];k&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,L.uniform2f(qa.location,pf,Df));Af=b.translateFract;Ef=Af[0];wf=Af[1];k&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,L.uniform2f(xa.location,Ef,wf));vf=J.call(this,S,b,k);yf=vf[0];If=vf[1];k&&zf===yf&&Jf===If||(zf=yf,Jf=If,L.uniform2f(ra.location,yf,If));Kf=b.opacity;k&&Lf===Kf||(Lf=Kf,L.uniform1f(na.location,Kf));(tf=b.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Rf=tf._texture;L.uniform1i(Q.location,Rf.bind());Hf=b.elements;uf=null;(uf=(dg=sa(Hf))?sd.createStream(Hf):sd.getElements(Hf))&&L.bindBuffer(34963,uf.buffer.buffer);Sf=b.offset;if(Tf=b.count)0<nb?uf?h.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),nb):h.drawArraysInstancedANGLE(0,Sf,Tf,nb):0>nb&&(uf?L.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):L.drawArrays(0,Sf,Tf)),S.viewportWidth=Nb,S.viewportHeight=ib,pb&&r.destroyStream(Ua),Pa&&r.destroyStream(Bc),mb&&r.destroyStream(gc),
Xd&&r.destroyStream(Ec),bd&&r.destroyStream(Pc),ce&&r.destroyStream(hd),qe&&r.destroyStream(le),oe&&r.destroyStream(ye),Le&&r.destroyStream(Jd),Rf.unbind(),dg&&sd.destroyStream(uf)}K.unbind();va.dirty=!0;Ga.setVAO(null);d&&(ba.cpuTime+=performance.now()-f)},draw:function(a){var e,c,d,h,l,b,q,w,A,x,P,D,z,pa,R,E,u,ma,J,K,m,wa,N,T,O,M,Y,ha,W,da,aa,V,ta,ka,Z,Ba,Cc,xb,cb,Mb,ab,nb,Va,yd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,
Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,ce,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,nf,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we;e=ia.next;e!==ia.cur&&(e?L.bindFramebuffer(36160,e.framebuffer):L.bindFramebuffer(36160,null),ia.cur=e);if(va.dirty){var Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,Ve,Ud,ae,We,hf,mf,ef,
jf,kf,lf,rf,of,sf;Ge=Da.dither;Ge!==va.dither&&(Ge?L.enable(3024):L.disable(3024),va.dither=Ge);Ie=ua[0];Je=ua[1];if(Ie!==Ja[0]||Je!==Ja[1])L.blendEquationSeparate(Ie,Je),Ja[0]=Ie,Ja[1]=Je;Ke=Da.depth_func;Ke!==va.depth_func&&(L.depthFunc(Ke),va.depth_func=Ke);He=$b[0];Md=$b[1];if(He!==Ha[0]||Md!==Ha[1])L.depthRange(He,Md),Ha[0]=He,Ha[1]=Md;Zd=Da.depth_mask;Zd!==va.depth_mask&&(L.depthMask(Zd),va.depth_mask=Zd);de=ea[0];fe=ea[1];Le=ea[2];Jd=ea[3];if(de!==fa[0]||fe!==fa[1]||Le!==fa[2]||Jd!==fa[3])L.colorMask(de,
fe,Le,Jd),fa[0]=de,fa[1]=fe,fa[2]=Le,fa[3]=Jd;Td=Da.cull_enable;Td!==va.cull_enable&&(Td?L.enable(2884):L.disable(2884),va.cull_enable=Td);De=Da.cull_face;De!==va.cull_face&&(L.cullFace(De),va.cull_face=De);Me=Da.frontFace;Me!==va.frontFace&&(L.frontFace(Me),va.frontFace=Me);bf=Da.lineWidth;bf!==va.lineWidth&&(L.lineWidth(bf),va.lineWidth=bf);af=Da.polygonOffset_enable;af!==va.polygonOffset_enable&&(af?L.enable(32823):L.disable(32823),va.polygonOffset_enable=af);Te=ac[0];Pe=ac[1];if(Te!==Rb[0]||Pe!==
Rb[1])L.polygonOffset(Te,Pe),Rb[0]=Te,Rb[1]=Pe;$e=Da.sample_alpha;$e!==va.sample_alpha&&($e?L.enable(32926):L.disable(32926),va.sample_alpha=$e);Xe=Da.sample_enable;Xe!==va.sample_enable&&(Xe?L.enable(32928):L.disable(32928),va.sample_enable=Xe);Ue=Oa[0];Ve=Oa[1];if(Ue!==Gd[0]||Ve!==Gd[1])L.sampleCoverage(Ue,Ve),Gd[0]=Ue,Gd[1]=Ve;Ud=Da.stencil_mask;Ud!==va.stencil_mask&&(L.stencilMask(Ud),va.stencil_mask=Ud);ae=ze[0];We=ze[1];hf=ze[2];if(ae!==xe[0]||We!==xe[1]||hf!==xe[2])L.stencilFunc(ae,We,hf),
xe[0]=ae,xe[1]=We,xe[2]=hf;mf=ie[0];ef=ie[1];jf=ie[2];kf=ie[3];if(mf!==Ed[0]||ef!==Ed[1]||jf!==Ed[2]||kf!==Ed[3])L.stencilOpSeparate(mf,ef,jf,kf),Ed[0]=mf,Ed[1]=ef,Ed[2]=jf,Ed[3]=kf;lf=Nd[0];rf=Nd[1];of=Nd[2];sf=Nd[3];if(lf!==pe[0]||rf!==pe[1]||of!==pe[2]||sf!==pe[3])L.stencilOpSeparate(lf,rf,of,sf),pe[0]=lf,pe[1]=rf,pe[2]=of,pe[3]=sf}c=a.viewport;d=c.x|0;h=c.y|0;l="width"in c?c.width|0:S.framebufferWidth-d;b="height"in c?c.height|0:S.framebufferHeight-h;q=S.viewportWidth;S.viewportWidth=l;w=S.viewportHeight;
S.viewportHeight=b;L.viewport(d,h,l,b);ge[0]=d;ge[1]=h;ge[2]=l;ge[3]=b;L.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;L.enable(3042);va.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);lb[0]=770;lb[1]=771;lb[2]=773;lb[3]=1;L.disable(2929);va.depth_enable=!1;A=a.viewport;x=A.x|0;P=A.y|0;D="width"in A?A.width|0:S.framebufferWidth-x;z="height"in A?A.height|0:S.framebufferHeight-P;L.scissor(x,P,D,z);Vd[0]=x;Vd[1]=P;Vd[2]=D;Vd[3]=z;L.enable(3089);va.scissor_enable=!0;L.disable(2960);va.stencil_enable=
!1;if(pa=va.profile)R=performance.now(),ba.count++;L.useProgram(H.program);E=Gb.angle_instanced_arrays;Ga.setVAO(null);u=I.call(this,S,a,0);ma=!1;J=null;K=0;m=!1;N=wa=0;T=1;O=0;M=5126;da=W=ha=Y=0;sa(u)?(ma=!0,J=r.createStream(34962,u),M=J.dtype):(J=r.getBuffer(u))?M=J.dtype:"constant"in u?(T=2,"number"===typeof u.constant?(ha=u.constant,W=da=Y=0):(ha=0<u.constant.length?u.constant[0]:0,W=1<u.constant.length?u.constant[1]:0,da=2<u.constant.length?u.constant[2]:0,Y=3<u.constant.length?u.constant[3]:
0)):(J=sa(u.buffer)?r.createStream(34962,u.buffer):r.getBuffer(u.buffer),M="type"in u?be[u.type]:J.dtype,m=!!u.normalized,N=u.size|0,wa=u.offset|0,O=u.stride|0,K=u.divisor|0);aa=ya.location;V=v[aa];if(1===T){V.buffer||L.enableVertexAttribArray(aa);ta=N||1;if(V.type!==M||V.size!==ta||V.buffer!==J||V.normalized!==m||V.offset!==wa||V.stride!==O)L.bindBuffer(34962,J.buffer),L.vertexAttribPointer(aa,ta,M,m,O,wa),V.type=M,V.size=ta,V.buffer=J,V.normalized=m,V.offset=wa,V.stride=O;V.divisor!==K&&(E.vertexAttribDivisorANGLE(aa,
K),V.divisor=K)}else if(V.buffer&&(L.disableVertexAttribArray(aa),V.buffer=null),V.x!==ha||V.y!==W||V.z!==da||V.w!==Y)L.vertexAttrib4f(aa,ha,W,da,Y),V.x=ha,V.y=W,V.z=da,V.w=Y;ka=g.call(this,S,a,0);Z=!1;Ba=null;Cc=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=yd=0;sa(ka)?(Z=!0,Ba=r.createStream(34962,ka),Va=Ba.dtype):(Ba=r.getBuffer(ka))?Va=Ba.dtype:"constant"in ka?(ab=2,"number"===typeof ka.constant?(Hb=ka.constant,Ib=qc=yd=0):(Hb=0<ka.constant.length?ka.constant[0]:0,Ib=1<ka.constant.length?ka.constant[1]:
0,qc=2<ka.constant.length?ka.constant[2]:0,yd=3<ka.constant.length?ka.constant[3]:0)):(Ba=sa(ka.buffer)?r.createStream(34962,ka.buffer):r.getBuffer(ka.buffer),Va="type"in ka?be[ka.type]:Ba.dtype,xb=!!ka.normalized,Mb=ka.size|0,cb=ka.offset|0,nb=ka.stride|0,Cc=ka.divisor|0);Nb=Xb.location;ib=v[Nb];if(1===ab){ib.buffer||L.enableVertexAttribArray(Nb);Fb=Mb||1;if(ib.type!==Va||ib.size!==Fb||ib.buffer!==Ba||ib.normalized!==xb||ib.offset!==cb||ib.stride!==nb)L.bindBuffer(34962,Ba.buffer),L.vertexAttribPointer(Nb,
Fb,Va,xb,nb,cb),ib.type=Va,ib.size=Fb,ib.buffer=Ba,ib.normalized=xb,ib.offset=cb,ib.stride=nb;ib.divisor!==Cc&&(E.vertexAttribDivisorANGLE(Nb,Cc),ib.divisor=Cc)}else if(ib.buffer&&(L.disableVertexAttribArray(Nb),ib.buffer=null),ib.x!==Hb||ib.y!==Ib||ib.z!==qc||ib.w!==yd)L.vertexAttrib4f(Nb,Hb,Ib,qc,yd),ib.x=Hb,ib.y=Ib,ib.z=qc,ib.w=yd;Cb=k.call(this,S,a,0);vb=!1;gb=null;Yb=0;Ob=!1;Ua=pb=0;Tb=1;yb=0;bc=5126;qb=Ia=ob=hb=0;sa(Cb)?(vb=!0,gb=r.createStream(34962,Cb),bc=gb.dtype):(gb=r.getBuffer(Cb))?bc=
gb.dtype:"constant"in Cb?(Tb=2,"number"===typeof Cb.constant?(ob=Cb.constant,Ia=qb=hb=0):(ob=0<Cb.constant.length?Cb.constant[0]:0,Ia=1<Cb.constant.length?Cb.constant[1]:0,qb=2<Cb.constant.length?Cb.constant[2]:0,hb=3<Cb.constant.length?Cb.constant[3]:0)):(gb=sa(Cb.buffer)?r.createStream(34962,Cb.buffer):r.getBuffer(Cb.buffer),bc="type"in Cb?be[Cb.type]:gb.dtype,Ob=!!Cb.normalized,Ua=Cb.size|0,pb=Cb.offset|0,yb=Cb.stride|0,Yb=Cb.divisor|0);Ka=ja.location;eb=v[Ka];if(1===Tb){eb.buffer||L.enableVertexAttribArray(Ka);
fb=Ua||1;if(eb.type!==bc||eb.size!==fb||eb.buffer!==gb||eb.normalized!==Ob||eb.offset!==pb||eb.stride!==yb)L.bindBuffer(34962,gb.buffer),L.vertexAttribPointer(Ka,fb,bc,Ob,yb,pb),eb.type=bc,eb.size=fb,eb.buffer=gb,eb.normalized=Ob,eb.offset=pb,eb.stride=yb;eb.divisor!==Yb&&(E.vertexAttribDivisorANGLE(Ka,Yb),eb.divisor=Yb)}else if(eb.buffer&&(L.disableVertexAttribArray(Ka),eb.buffer=null),eb.x!==ob||eb.y!==Ia||eb.z!==qb||eb.w!==hb)L.vertexAttrib4f(Ka,ob,Ia,qb,hb),eb.x=ob,eb.y=Ia,eb.z=qb,eb.w=hb;La=
n.call(this,S,a,0);jb=!1;Wa=null;sb=0;rb=!1;Bc=Pa=0;Ra=1;Jb=0;Db=5126;Kb=Ya=vd=Ma=0;sa(La)?(jb=!0,Wa=r.createStream(34962,La),Db=Wa.dtype):(Wa=r.getBuffer(La))?Db=Wa.dtype:"constant"in La?(Ra=2,"number"===typeof La.constant?(vd=La.constant,Ya=Kb=Ma=0):(vd=0<La.constant.length?La.constant[0]:0,Ya=1<La.constant.length?La.constant[1]:0,Kb=2<La.constant.length?La.constant[2]:0,Ma=3<La.constant.length?La.constant[3]:0)):(Wa=sa(La.buffer)?r.createStream(34962,La.buffer):r.getBuffer(La.buffer),Db="type"in
La?be[La.type]:Wa.dtype,rb=!!La.normalized,Bc=La.size|0,Pa=La.offset|0,Jb=La.stride|0,sb=La.divisor|0);Lb=Ta.location;kb=v[Lb];if(1===Ra){kb.buffer||L.enableVertexAttribArray(Lb);Na=Bc||1;if(kb.type!==Db||kb.size!==Na||kb.buffer!==Wa||kb.normalized!==rb||kb.offset!==Pa||kb.stride!==Jb)L.bindBuffer(34962,Wa.buffer),L.vertexAttribPointer(Lb,Na,Db,rb,Jb,Pa),kb.type=Db,kb.size=Na,kb.buffer=Wa,kb.normalized=rb,kb.offset=Pa,kb.stride=Jb;kb.divisor!==sb&&(E.vertexAttribDivisorANGLE(Lb,sb),kb.divisor=sb)}else if(kb.buffer&&
(L.disableVertexAttribArray(Lb),kb.buffer=null),kb.x!==vd||kb.y!==Ya||kb.z!==Kb||kb.w!==Ma)L.vertexAttrib4f(Lb,vd,Ya,Kb,Ma),kb.x=vd,kb.y=Ya,kb.z=Kb,kb.w=Ma;Zb=f.call(this,S,a,0);Qa=!1;tb=null;ub=0;Sa=!1;gc=mb=0;zc=1;uc=0;bb=5126;md=Xa=ad=jc=0;sa(Zb)?(Qa=!0,tb=r.createStream(34962,Zb),bb=tb.dtype):(tb=r.getBuffer(Zb))?bb=tb.dtype:"constant"in Zb?(zc=2,"number"===typeof Zb.constant?(ad=Zb.constant,Xa=md=jc=0):(ad=0<Zb.constant.length?Zb.constant[0]:0,Xa=1<Zb.constant.length?Zb.constant[1]:0,md=2<Zb.constant.length?
Zb.constant[2]:0,jc=3<Zb.constant.length?Zb.constant[3]:0)):(tb=sa(Zb.buffer)?r.createStream(34962,Zb.buffer):r.getBuffer(Zb.buffer),bb="type"in Zb?be[Zb.type]:tb.dtype,Sa=!!Zb.normalized,gc=Zb.size|0,mb=Zb.offset|0,uc=Zb.stride|0,ub=Zb.divisor|0);zb=la.location;Za=v[zb];if(1===zc){Za.buffer||L.enableVertexAttribArray(zb);Ub=gc||1;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)L.bindBuffer(34962,tb.buffer),L.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),
Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(E.vertexAttribDivisorANGLE(zb,ub),Za.divisor=ub)}else if(Za.buffer&&(L.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==ad||Za.y!==Xa||Za.z!==md||Za.w!==jc)L.vertexAttrib4f(zb,ad,Xa,md,jc),Za.x=ad,Za.y=Xa,Za.z=md,Za.w=jc;sc=B.call(this,S,a,0);Vb=!1;Pb=null;Kc=0;Qb=!1;Ec=ce=0;rd=1;Mc=0;Wc=5126;hc=vc=nc=td=0;sa(sc)?(Vb=!0,Pb=r.createStream(34962,sc),Wc=Pb.dtype):(Pb=r.getBuffer(sc))?Wc=Pb.dtype:"constant"in
sc?(rd=2,"number"===typeof sc.constant?(nc=sc.constant,vc=hc=td=0):(nc=0<sc.constant.length?sc.constant[0]:0,vc=1<sc.constant.length?sc.constant[1]:0,hc=2<sc.constant.length?sc.constant[2]:0,td=3<sc.constant.length?sc.constant[3]:0)):(Pb=sa(sc.buffer)?r.createStream(34962,sc.buffer):r.getBuffer(sc.buffer),Wc="type"in sc?be[sc.type]:Pb.dtype,Qb=!!sc.normalized,Ec=sc.size|0,ce=sc.offset|0,Mc=sc.stride|0,Kc=sc.divisor|0);db=oa.location;rc=v[db];if(1===rd){rc.buffer||L.enableVertexAttribArray(db);Sb=
Ec||1;if(rc.type!==Wc||rc.size!==Sb||rc.buffer!==Pb||rc.normalized!==Qb||rc.offset!==ce||rc.stride!==Mc)L.bindBuffer(34962,Pb.buffer),L.vertexAttribPointer(db,Sb,Wc,Qb,Mc,ce),rc.type=Wc,rc.size=Sb,rc.buffer=Pb,rc.normalized=Qb,rc.offset=ce,rc.stride=Mc;rc.divisor!==Kc&&(E.vertexAttribDivisorANGLE(db,Kc),rc.divisor=Kc)}else if(rc.buffer&&(L.disableVertexAttribArray(db),rc.buffer=null),rc.x!==nc||rc.y!==vc||rc.z!==hc||rc.w!==td)L.vertexAttrib4f(db,nc,vc,hc,td),rc.x=nc,rc.y=vc,rc.z=hc,rc.w=td;Wb=C.call(this,
S,a,0);dc=!1;ic=null;xc=0;Ac=!1;Pc=bd=0;Qc=1;Rc=0;Xc=5126;kc=Yc=cd=kd=0;sa(Wb)?(dc=!0,ic=r.createStream(34962,Wb),Xc=ic.dtype):(ic=r.getBuffer(Wb))?Xc=ic.dtype:"constant"in Wb?(Qc=2,"number"===typeof Wb.constant?(cd=Wb.constant,Yc=kc=kd=0):(cd=0<Wb.constant.length?Wb.constant[0]:0,Yc=1<Wb.constant.length?Wb.constant[1]:0,kc=2<Wb.constant.length?Wb.constant[2]:0,kd=3<Wb.constant.length?Wb.constant[3]:0)):(ic=sa(Wb.buffer)?r.createStream(34962,Wb.buffer):r.getBuffer(Wb.buffer),Xc="type"in Wb?be[Wb.type]:
ic.dtype,Ac=!!Wb.normalized,Pc=Wb.size|0,bd=Wb.offset|0,Rc=Wb.stride|0,xc=Wb.divisor|0);cc=p.location;Zc=v[cc];if(1===Qc){Zc.buffer||L.enableVertexAttribArray(cc);Tc=Pc||4;if(Zc.type!==Xc||Zc.size!==Tc||Zc.buffer!==ic||Zc.normalized!==Ac||Zc.offset!==bd||Zc.stride!==Rc)L.bindBuffer(34962,ic.buffer),L.vertexAttribPointer(cc,Tc,Xc,Ac,Rc,bd),Zc.type=Xc,Zc.size=Tc,Zc.buffer=ic,Zc.normalized=Ac,Zc.offset=bd,Zc.stride=Rc;Zc.divisor!==xc&&(E.vertexAttribDivisorANGLE(cc,xc),Zc.divisor=xc)}else if(Zc.buffer&&
(L.disableVertexAttribArray(cc),Zc.buffer=null),Zc.x!==cd||Zc.y!==Yc||Zc.z!==kc||Zc.w!==kd)L.vertexAttrib4f(cc,cd,Yc,kc,kd),Zc.x=cd,Zc.y=Yc,Zc.z=kc,Zc.w=kd;dd=G.call(this,S,a,0);yc=!1;gd=null;xd=0;Fe=!1;hd=Bd=0;nf=1;Od=0;Yd=5126;Id=Kd=Pd=ke=0;sa(dd)?(yc=!0,gd=r.createStream(34962,dd),Yd=gd.dtype):(gd=r.getBuffer(dd))?Yd=gd.dtype:"constant"in dd?(nf=2,"number"===typeof dd.constant?(Pd=dd.constant,Kd=Id=ke=0):(Pd=0<dd.constant.length?dd.constant[0]:0,Kd=1<dd.constant.length?dd.constant[1]:0,Id=2<dd.constant.length?
dd.constant[2]:0,ke=3<dd.constant.length?dd.constant[3]:0)):(gd=sa(dd.buffer)?r.createStream(34962,dd.buffer):r.getBuffer(dd.buffer),Yd="type"in dd?be[dd.type]:gd.dtype,Fe=!!dd.normalized,hd=dd.size|0,Bd=dd.offset|0,Od=dd.stride|0,xd=dd.divisor|0);nd=Ea.location;Sc=v[nd];if(1===nf){Sc.buffer||L.enableVertexAttribArray(nd);ud=hd||4;if(Sc.type!==Yd||Sc.size!==ud||Sc.buffer!==gd||Sc.normalized!==Fe||Sc.offset!==Bd||Sc.stride!==Od)L.bindBuffer(34962,gd.buffer),L.vertexAttribPointer(nd,ud,Yd,Fe,Od,Bd),
Sc.type=Yd,Sc.size=ud,Sc.buffer=gd,Sc.normalized=Fe,Sc.offset=Bd,Sc.stride=Od;Sc.divisor!==xd&&(E.vertexAttribDivisorANGLE(nd,xd),Sc.divisor=xd)}else if(Sc.buffer&&(L.disableVertexAttribArray(nd),Sc.buffer=null),Sc.x!==Pd||Sc.y!==Kd||Sc.z!==Id||Sc.w!==ke)L.vertexAttrib4f(nd,Pd,Kd,Id,ke),Sc.x=Pd,Sc.y=Kd,Sc.z=Id,Sc.w=ke;qd=U.call(this,S,a,0);id=!1;wd=null;Dd=0;Fd=!1;le=qe=0;Ne=1;me=0;je=5126;ne=ee=ue=he=0;sa(qd)?(id=!0,wd=r.createStream(34962,qd),je=wd.dtype):(wd=r.getBuffer(qd))?je=wd.dtype:"constant"in
qd?(Ne=2,"number"===typeof qd.constant?(ue=qd.constant,ee=ne=he=0):(ue=0<qd.constant.length?qd.constant[0]:0,ee=1<qd.constant.length?qd.constant[1]:0,ne=2<qd.constant.length?qd.constant[2]:0,he=3<qd.constant.length?qd.constant[3]:0)):(wd=sa(qd.buffer)?r.createStream(34962,qd.buffer):r.getBuffer(qd.buffer),je="type"in qd?be[qd.type]:wd.dtype,Fd=!!qd.normalized,le=qd.size|0,qe=qd.offset|0,me=qd.stride|0,Dd=qd.divisor|0);Nc=ca.location;fd=v[Nc];if(1===Ne){fd.buffer||L.enableVertexAttribArray(Nc);ve=
le||1;if(fd.type!==je||fd.size!==ve||fd.buffer!==wd||fd.normalized!==Fd||fd.offset!==qe||fd.stride!==me)L.bindBuffer(34962,wd.buffer),L.vertexAttribPointer(Nc,ve,je,Fd,me,qe),fd.type=je,fd.size=ve,fd.buffer=wd,fd.normalized=Fd,fd.offset=qe,fd.stride=me;fd.divisor!==Dd&&(E.vertexAttribDivisorANGLE(Nc,Dd),fd.divisor=Dd)}else if(fd.buffer&&(L.disableVertexAttribArray(Nc),fd.buffer=null),fd.x!==ue||fd.y!==ee||fd.z!==ne||fd.w!==he)L.vertexAttrib4f(Nc,ue,ee,ne,he),fd.x=ue,fd.y=ee,fd.z=ne,fd.w=he;L.uniform1i(F.location,
!1);L.uniform1f(za.location,S.pixelRatio);re=a.scale;L.uniform2f(ga.location,re[0],re[1]);Ld=a.scaleFract;L.uniform2f(Ca.location,Ld[0],Ld[1]);Qd=a.translate;L.uniform2f(qa.location,Qd[0],Qd[1]);Rd=a.translateFract;L.uniform2f(xa.location,Rd[0],Rd[1]);Sd=y.call(this,S,a,0);L.uniform2f(ra.location,Sd[0],Sd[1]);L.uniform1f(na.location,a.opacity);L.uniform1i(Aa.location,t.bind());(oe=a.markerTexture)&&"framebuffer"===oe._reglType&&(oe=oe.color[0]);ye=oe._texture;L.uniform1i(Q.location,ye.bind());Be=
a.elements;se=null;(se=(Re=sa(Be))?sd.createStream(Be):sd.getElements(Be))&&L.bindBuffer(34963,se.buffer.buffer);Se=a.offset;if(Oe=a.count)we=Fa.instances,0<we?se?E.drawElementsInstancedANGLE(0,Oe,se.type,Se<<(se.type-5121>>1),we):E.drawArraysInstancedANGLE(0,Se,Oe,we):0>we&&(se?L.drawElements(0,Oe,se.type,Se<<(se.type-5121>>1)):L.drawArrays(0,Se,Oe)),va.dirty=!0,Ga.setVAO(null),S.viewportWidth=q,S.viewportHeight=w,pa&&(ba.cpuTime+=performance.now()-R),ma&&r.destroyStream(J),Z&&r.destroyStream(Ba),
vb&&r.destroyStream(gb),jb&&r.destroyStream(Wa),Qa&&r.destroyStream(tb),Vb&&r.destroyStream(Pb),dc&&r.destroyStream(ic),yc&&r.destroyStream(gd),id&&r.destroyStream(wd),t.unbind(),ye.unbind(),Re&&sd.destroyStream(se)},scope:function(f,k,l){var b,p,v,n,L,ja,g,A,F,P,Q,z,ga,R,ia,I,Xb,t,J,ya,y,C,K,X,ca,B,H,ra,Ea,za,G,U,Ga,ea,la,W,da,Ta,qa,Ca,xa,oa,na,ka,ta,ua,Aa,Gb,Z,Ha,Cc,lb,Ja,Rb,fa,$b,ac,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Vd,Ra,Jb,Db,Ma,zd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,Gd,Xa,
md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Nd,Ec,ge,Mc,Wc,ze,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,Oa,Ed,pe,hd,xe,ie,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Qf,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,Ve,Ud,ae,We,hf,mf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;b=f.viewport;p=b.x|0;v=b.y|0;n="width"in b?b.width|0:S.framebufferWidth-p;L="height"in b?b.height|0:S.framebufferHeight-v;ja=S.viewportWidth;S.viewportWidth=n;g=S.viewportHeight;S.viewportHeight=L;A=ce[0];ce[0]=p;F=ce[1];ce[1]=v;P=ce[2];ce[2]=n;Q=ce[3];ce[3]=L;z=ma[0];ma[0]=0;ga=ma[1];ma[1]=0;R=ma[2];ma[2]=0;ia=ma[3];ma[3]=1;I=Da.blend_enable;Da.blend_enable=!0;Xb=Ba[0];Ba[0]=770;t=Ba[1];Ba[1]=
771;J=Ba[2];Ba[2]=773;ya=Ba[3];Ba[3]=1;y=Da.depth_enable;Da.depth_enable=!1;C=f.viewport;K=C.x|0;X=C.y|0;ca="width"in C?C.width|0:S.framebufferWidth-K;B="height"in C?C.height|0:S.framebufferHeight-X;H=yd[0];yd[0]=K;ra=yd[1];yd[1]=X;Ea=yd[2];yd[2]=ca;za=yd[3];yd[3]=B;G=Da.scissor_enable;Da.scissor_enable=!0;U=Da.stencil_enable;Da.stencil_enable=!1;if(Ga=va.profile)ea=performance.now(),ba.count++;la=f.elements;W=null;W=(da=sa(la))?sd.createStream(la):sd.getElements(la);Ta=Fa.elements;Fa.elements=W;
qa=f.offset;Ca=Fa.offset;Fa.offset=qa;xa=f.count;oa=Fa.count;Fa.count=xa;na=Fa.primitive;Fa.primitive=0;ka=wa[45];wa[45]=!1;ta=f.markerTexture;ua=wa[48];wa[48]=ta;Aa=f.opacity;Gb=wa[10];wa[10]=Aa;Z=m.call(this,S,f,l);Ha=wa[46];wa[46]=Z;Cc=wa[47];wa[47]=aa;lb=S.pixelRatio;Ja=wa[34];wa[34]=lb;Rb=f.scale;fa=wa[6];wa[6]=Rb;$b=f.scaleFract;ac=wa[7];wa[7]=$b;bc=f.translate;hb=wa[8];wa[8]=bc;ob=f.translateFract;Ia=wa[9];wa[9]=ob;qb=x.call(this,S,f,l);Ka=!1;eb=null;fb=0;La=!1;Wa=jb=0;sb=1;rb=0;Pa=5126;Db=
Jb=Ra=Vd=0;sa(qb)?(Ka=!0,eb=r.createStream(34962,qb),Pa=eb.dtype):(eb=r.getBuffer(qb))?Pa=eb.dtype:"constant"in qb?(sb=2,"number"===typeof qb.constant?(Ra=qb.constant,Jb=Db=Vd=0):(Ra=0<qb.constant.length?qb.constant[0]:0,Jb=1<qb.constant.length?qb.constant[1]:0,Db=2<qb.constant.length?qb.constant[2]:0,Vd=3<qb.constant.length?qb.constant[3]:0)):(eb=sa(qb.buffer)?r.createStream(34962,qb.buffer):r.getBuffer(qb.buffer),Pa="type"in qb?be[qb.type]:eb.dtype,La=!!qb.normalized,Wa=qb.size|0,jb=qb.offset|0,
rb=qb.stride|0,fb=qb.divisor|0);Ma=M.buffer;M.buffer=eb;zd=M.divisor;M.divisor=fb;Ya=M.normalized;M.normalized=La;Kb=M.offset;M.offset=jb;Lb=M.size;M.size=Wa;kb=M.state;M.state=sb;Na=M.stride;M.stride=rb;Zb=M.type;M.type=Pa;Qa=M.w;M.w=Vd;tb=M.x;M.x=Ra;ub=M.y;M.y=Jb;Sa=M.z;M.z=Db;mb=u.call(this,S,f,l);gc=!1;zc=null;uc=0;bb=!1;Gd=jc=0;Xa=1;md=0;zb=5126;Vb=sc=Ub=Za=0;sa(mb)?(gc=!0,zc=r.createStream(34962,mb),zb=zc.dtype):(zc=r.getBuffer(mb))?zb=zc.dtype:"constant"in mb?(Xa=2,"number"===typeof mb.constant?
(Ub=mb.constant,sc=Vb=Za=0):(Ub=0<mb.constant.length?mb.constant[0]:0,sc=1<mb.constant.length?mb.constant[1]:0,Vb=2<mb.constant.length?mb.constant[2]:0,Za=3<mb.constant.length?mb.constant[3]:0)):(zc=sa(mb.buffer)?r.createStream(34962,mb.buffer):r.getBuffer(mb.buffer),zb="type"in mb?be[mb.type]:zc.dtype,bb=!!mb.normalized,Gd=mb.size|0,jc=mb.offset|0,md=mb.stride|0,uc=mb.divisor|0);Pb=O.buffer;O.buffer=zc;Kc=O.divisor;O.divisor=uc;Qb=O.normalized;O.normalized=bb;Nd=O.offset;O.offset=jc;Ec=O.size;O.size=
Gd;ge=O.state;O.state=Xa;Mc=O.stride;O.stride=md;Wc=O.type;O.type=zb;ze=O.w;O.w=Za;nc=O.x;O.x=Ub;vc=O.y;O.y=sc;hc=O.z;O.z=Vb;db=ha.call(this,S,f,l);rc=!1;Sb=null;Wb=0;dc=!1;xc=ic=0;Ac=1;bd=0;Pc=5126;kd=Xc=Rc=Qc=0;sa(db)?(rc=!0,Sb=r.createStream(34962,db),Pc=Sb.dtype):(Sb=r.getBuffer(db))?Pc=Sb.dtype:"constant"in db?(Ac=2,"number"===typeof db.constant?(Rc=db.constant,Xc=kd=Qc=0):(Rc=0<db.constant.length?db.constant[0]:0,Xc=1<db.constant.length?db.constant[1]:0,kd=2<db.constant.length?db.constant[2]:
0,Qc=3<db.constant.length?db.constant[3]:0)):(Sb=sa(db.buffer)?r.createStream(34962,db.buffer):r.getBuffer(db.buffer),Pc="type"in db?be[db.type]:Sb.dtype,dc=!!db.normalized,xc=db.size|0,ic=db.offset|0,bd=db.stride|0,Wb=db.divisor|0);cd=d.buffer;d.buffer=Sb;Yc=d.divisor;d.divisor=Wb;kc=d.normalized;d.normalized=dc;cc=d.offset;d.offset=ic;Zc=d.size;d.size=xc;Tc=d.state;d.state=Ac;dd=d.stride;d.stride=bd;yc=d.type;d.type=Pc;gd=d.w;d.w=Qc;Oa=d.x;d.x=Rc;Ed=d.y;d.y=Xc;pe=d.z;d.z=kd;hd=c.call(this,S,f,l);
xe=!1;ie=null;Yd=0;ke=!1;Kd=Pd=0;Id=1;nd=0;Sc=5126;wd=id=qd=ud=0;sa(hd)?(xe=!0,ie=r.createStream(34962,hd),Sc=ie.dtype):(ie=r.getBuffer(hd))?Sc=ie.dtype:"constant"in hd?(Id=2,"number"===typeof hd.constant?(qd=hd.constant,id=wd=ud=0):(qd=0<hd.constant.length?hd.constant[0]:0,id=1<hd.constant.length?hd.constant[1]:0,wd=2<hd.constant.length?hd.constant[2]:0,ud=3<hd.constant.length?hd.constant[3]:0)):(ie=sa(hd.buffer)?r.createStream(34962,hd.buffer):r.getBuffer(hd.buffer),Sc="type"in hd?be[hd.type]:ie.dtype,
ke=!!hd.normalized,Kd=hd.size|0,Pd=hd.offset|0,nd=hd.stride|0,Yd=hd.divisor|0);Dd=T.buffer;T.buffer=ie;Fd=T.divisor;T.divisor=Yd;qe=T.normalized;T.normalized=ke;le=T.offset;T.offset=Pd;Qf=T.size;T.size=Kd;me=T.state;T.state=Id;je=T.stride;T.stride=nd;he=T.type;T.type=Sc;ue=T.w;T.w=ud;ee=T.x;T.x=qd;ne=T.y;T.y=id;Nc=T.z;T.z=wd;fd=q.call(this,S,f,l);ve=!1;re=null;Ld=0;Qd=!1;Sd=Rd=0;oe=1;ye=0;Be=5126;Oe=Se=Re=se=0;sa(fd)?(ve=!0,re=r.createStream(34962,fd),Be=re.dtype):(re=r.getBuffer(fd))?Be=re.dtype:
"constant"in fd?(oe=2,"number"===typeof fd.constant?(Re=fd.constant,Se=Oe=se=0):(Re=0<fd.constant.length?fd.constant[0]:0,Se=1<fd.constant.length?fd.constant[1]:0,Oe=2<fd.constant.length?fd.constant[2]:0,se=3<fd.constant.length?fd.constant[3]:0)):(re=sa(fd.buffer)?r.createStream(34962,fd.buffer):r.getBuffer(fd.buffer),Be="type"in fd?be[fd.type]:re.dtype,Qd=!!fd.normalized,Sd=fd.size|0,Rd=fd.offset|0,ye=fd.stride|0,Ld=fd.divisor|0);we=Y.buffer;Y.buffer=re;Ge=Y.divisor;Y.divisor=Ld;Ie=Y.normalized;
Y.normalized=Qd;Je=Y.offset;Y.offset=Rd;Ke=Y.size;Y.size=Sd;He=Y.state;Y.state=oe;Md=Y.stride;Y.stride=ye;Zd=Y.type;Y.type=Be;de=Y.w;Y.w=se;fe=Y.x;Y.x=Re;Le=Y.y;Y.y=Se;Jd=Y.z;Y.z=Oe;Td=h.call(this,S,f,l);De=!1;Me=null;bf=0;af=!1;Pe=Te=0;$e=1;Xe=0;Ue=5126;We=ae=Ud=Ve=0;sa(Td)?(De=!0,Me=r.createStream(34962,Td),Ue=Me.dtype):(Me=r.getBuffer(Td))?Ue=Me.dtype:"constant"in Td?($e=2,"number"===typeof Td.constant?(Ud=Td.constant,ae=We=Ve=0):(Ud=0<Td.constant.length?Td.constant[0]:0,ae=1<Td.constant.length?
Td.constant[1]:0,We=2<Td.constant.length?Td.constant[2]:0,Ve=3<Td.constant.length?Td.constant[3]:0)):(Me=sa(Td.buffer)?r.createStream(34962,Td.buffer):r.getBuffer(Td.buffer),Ue="type"in Td?be[Td.type]:Me.dtype,af=!!Td.normalized,Pe=Td.size|0,Te=Td.offset|0,Xe=Td.stride|0,bf=Td.divisor|0);hf=w.buffer;w.buffer=Me;mf=w.divisor;w.divisor=bf;ef=w.normalized;w.normalized=af;jf=w.offset;w.offset=Te;kf=w.size;w.size=Pe;lf=w.state;w.state=$e;rf=w.stride;w.stride=Xe;of=w.type;w.type=Ue;sf=w.w;w.w=Ve;Bf=w.x;
w.x=Ud;Cf=w.y;w.y=ae;Qe=w.z;w.z=We;Ee=V.call(this,S,f,l);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Ee)?(pf=!0,qf=r.createStream(34962,Ee),xf=qf.dtype):(qf=r.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=sa(Ee.buffer)?r.createStream(34962,Ee.buffer):
r.getBuffer(Ee.buffer),xf="type"in Ee?be[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Jf=E.buffer;E.buffer=qf;Kf=E.divisor;E.divisor=Df;Lf=E.normalized;E.normalized=Gf;tf=E.offset;E.offset=Af;Rf=E.size;E.size=Ef;Hf=E.state;E.state=Ff;uf=E.stride;E.stride=wf;dg=E.type;E.type=xf;Sf=E.w;E.w=vf;Tf=E.x;E.x=yf;qg=E.y;E.y=zf;ff=E.z;E.z=If;cf=D.call(this,S,f,l);Mf=!1;Nf=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;sa(cf)?(Mf=!0,Nf=r.createStream(34962,
cf),Uf=Nf.dtype):(Nf=r.getBuffer(cf))?Uf=Nf.dtype:"constant"in cf?(ig=2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Nf=sa(cf.buffer)?r.createStream(34962,cf.buffer):r.getBuffer(cf.buffer),Uf="type"in cf?be[cf.type]:Nf.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=e.buffer;e.buffer=
Nf;sg=e.divisor;e.divisor=eg;tg=e.normalized;e.normalized=fg;ug=e.offset;e.offset=gg;vg=e.size;e.size=hg;wg=e.state;e.state=ig;xg=e.stride;e.stride=Wf;yg=e.type;e.type=Uf;zg=e.w;e.w=Xf;Ag=e.x;e.x=Yf;Bg=e.y;e.y=Zf;gf=e.z;e.z=jg;df=N.call(this,S,f,l);Of=!1;Pf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;sa(df)?(Of=!0,Pf=r.createStream(34962,df),Vf=Pf.dtype):(Pf=r.getBuffer(df))?Vf=Pf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?
df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Pf=sa(df.buffer)?r.createStream(34962,df.buffer):r.getBuffer(df.buffer),Vf="type"in df?be[df.type]:Pf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=a.buffer;a.buffer=Pf;Dg=a.divisor;a.divisor=kg;Eg=a.normalized;a.normalized=lg;Fg=a.offset;a.offset=mg;Gg=a.size;a.size=ng;Hg=a.state;a.state=og;Ig=a.stride;a.stride=$f;
Jg=a.type;a.type=Vf;Kg=a.w;a.w=ag;Lg=a.x;a.x=bg;Mg=a.y;a.y=cg;Ng=a.z;a.z=pg;Og=pa.vert;pa.vert=44;Pg=pa.frag;pa.frag=43;va.dirty=!0;k(S,f,l);S.viewportWidth=ja;S.viewportHeight=g;ce[0]=A;ce[1]=F;ce[2]=P;ce[3]=Q;ma[0]=z;ma[1]=ga;ma[2]=R;ma[3]=ia;Da.blend_enable=I;Ba[0]=Xb;Ba[1]=t;Ba[2]=J;Ba[3]=ya;Da.depth_enable=y;yd[0]=H;yd[1]=ra;yd[2]=Ea;yd[3]=za;Da.scissor_enable=G;Da.stencil_enable=U;Ga&&(ba.cpuTime+=performance.now()-ea);da&&sd.destroyStream(W);Fa.elements=Ta;Fa.offset=Ca;Fa.count=oa;Fa.primitive=
na;wa[45]=ka;wa[48]=ua;wa[10]=Gb;wa[46]=Ha;wa[47]=Cc;wa[34]=Ja;wa[6]=fa;wa[7]=ac;wa[8]=hb;wa[9]=Ia;Ka&&r.destroyStream(eb);M.buffer=Ma;M.divisor=zd;M.normalized=Ya;M.offset=Kb;M.size=Lb;M.state=kb;M.stride=Na;M.type=Zb;M.w=Qa;M.x=tb;M.y=ub;M.z=Sa;gc&&r.destroyStream(zc);O.buffer=Pb;O.divisor=Kc;O.normalized=Qb;O.offset=Nd;O.size=Ec;O.state=ge;O.stride=Mc;O.type=Wc;O.w=ze;O.x=nc;O.y=vc;O.z=hc;rc&&r.destroyStream(Sb);d.buffer=cd;d.divisor=Yc;d.normalized=kc;d.offset=cc;d.size=Zc;d.state=Tc;d.stride=
dd;d.type=yc;d.w=gd;d.x=Oa;d.y=Ed;d.z=pe;xe&&r.destroyStream(ie);T.buffer=Dd;T.divisor=Fd;T.normalized=qe;T.offset=le;T.size=Qf;T.state=me;T.stride=je;T.type=he;T.w=ue;T.x=ee;T.y=ne;T.z=Nc;ve&&r.destroyStream(re);Y.buffer=we;Y.divisor=Ge;Y.normalized=Ie;Y.offset=Je;Y.size=Ke;Y.state=He;Y.stride=Md;Y.type=Zd;Y.w=de;Y.x=fe;Y.y=Le;Y.z=Jd;De&&r.destroyStream(Me);w.buffer=hf;w.divisor=mf;w.normalized=ef;w.offset=jf;w.size=kf;w.state=lf;w.stride=rf;w.type=of;w.w=sf;w.x=Bf;w.y=Cf;w.z=Qe;pf&&r.destroyStream(qf);
E.buffer=Jf;E.divisor=Kf;E.normalized=Lf;E.offset=tf;E.size=Rf;E.state=Hf;E.stride=uf;E.type=dg;E.w=Sf;E.x=Tf;E.y=qg;E.z=ff;Mf&&r.destroyStream(Nf);e.buffer=rg;e.divisor=sg;e.normalized=tg;e.offset=ug;e.size=vg;e.state=wg;e.stride=xg;e.type=yg;e.w=zg;e.x=Ag;e.y=Bg;e.z=gf;Of&&r.destroyStream(Pf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;pa.vert=Og;pa.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,
ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb){var Ta,v,r,S,va,Fa,sd,Gb,ia,L,sa,Da,pa,wa,Ga,ma,X,ua,Ja,Ba,lb,ea,fa,$b,Ha,ac,Rb,Oa,Gd,yd,Vd,ze,xe,Nd,pe,ie,Ed,ce,ge;Ta=b.attributes;v=b.buffer;r=b.context;S=b.current;va=b.draw;Fa=b.elements;sd=b.extensions;Gb=b.framebuffer;ia=b.gl;L=b.isBufferArgs;sa=b.next;Da=b.shader;pa=b.uniforms;wa=b.vao;Ga=sa.blend_color;ma=S.blend_color;X=sa.blend_equation;ua=S.blend_equation;
Ja=sa.blend_func;Ba=S.blend_func;lb=sa.colorMask;ea=S.colorMask;fa=sa.depth_range;$b=S.depth_range;Ha=sa.polygonOffset_offset;ac=S.polygonOffset_offset;Rb=sa.sample_coverage;Oa=S.sample_coverage;Gd=sa.scissor_box;yd=S.scissor_box;Vd=sa.stencil_func;ze=S.stencil_func;xe=sa.stencil_opBack;Nd=S.stencil_opBack;pe=sa.stencil_opFront;ie=S.stencil_opFront;Ed=sa.viewport;ce=S.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
e){var c,d,f,h,k,b;c=Gb.next;c!==Gb.cur&&(c?ia.bindFramebuffer(36160,c.framebuffer):ia.bindFramebuffer(36160,null),Gb.cur=c);if(S.dirty){var q,n,g,w,x,Da,D,u,pa,E,I,t,y,C,B,m,H,N,O,T,G,M,U,Ga,Y,ha,aa,V,Ja,$a,Ic,xb,cb,Mb;q=sa.dither;q!==S.dither&&(q?ia.enable(3024):ia.disable(3024),S.dither=q);n=X[0];g=X[1];if(n!==ua[0]||g!==ua[1])ia.blendEquationSeparate(n,g),ua[0]=n,ua[1]=g;w=sa.depth_func;w!==S.depth_func&&(ia.depthFunc(w),S.depth_func=w);x=fa[0];Da=fa[1];if(x!==$b[0]||Da!==$b[1])ia.depthRange(x,
Da),$b[0]=x,$b[1]=Da;D=sa.depth_mask;D!==S.depth_mask&&(ia.depthMask(D),S.depth_mask=D);u=lb[0];pa=lb[1];E=lb[2];I=lb[3];if(u!==ea[0]||pa!==ea[1]||E!==ea[2]||I!==ea[3])ia.colorMask(u,pa,E,I),ea[0]=u,ea[1]=pa,ea[2]=E,ea[3]=I;t=sa.cull_enable;t!==S.cull_enable&&(t?ia.enable(2884):ia.disable(2884),S.cull_enable=t);y=sa.cull_face;y!==S.cull_face&&(ia.cullFace(y),S.cull_face=y);C=sa.frontFace;C!==S.frontFace&&(ia.frontFace(C),S.frontFace=C);B=sa.lineWidth;B!==S.lineWidth&&(ia.lineWidth(B),S.lineWidth=
B);m=sa.polygonOffset_enable;m!==S.polygonOffset_enable&&(m?ia.enable(32823):ia.disable(32823),S.polygonOffset_enable=m);H=Ha[0];N=Ha[1];if(H!==ac[0]||N!==ac[1])ia.polygonOffset(H,N),ac[0]=H,ac[1]=N;O=sa.sample_alpha;O!==S.sample_alpha&&(O?ia.enable(32926):ia.disable(32926),S.sample_alpha=O);T=sa.sample_enable;T!==S.sample_enable&&(T?ia.enable(32928):ia.disable(32928),S.sample_enable=T);G=Rb[0];M=Rb[1];if(G!==Oa[0]||M!==Oa[1])ia.sampleCoverage(G,M),Oa[0]=G,Oa[1]=M;U=sa.stencil_mask;U!==S.stencil_mask&&
(ia.stencilMask(U),S.stencil_mask=U);Ga=Vd[0];Y=Vd[1];ha=Vd[2];if(Ga!==ze[0]||Y!==ze[1]||ha!==ze[2])ia.stencilFunc(Ga,Y,ha),ze[0]=Ga,ze[1]=Y,ze[2]=ha;aa=pe[0];V=pe[1];Ja=pe[2];$a=pe[3];if(aa!==ie[0]||V!==ie[1]||Ja!==ie[2]||$a!==ie[3])ia.stencilOpSeparate(aa,V,Ja,$a),ie[0]=aa,ie[1]=V,ie[2]=Ja,ie[3]=$a;Ic=xe[0];xb=xe[1];cb=xe[2];Mb=xe[3];if(Ic!==Nd[0]||xb!==Nd[1]||cb!==Nd[2]||Mb!==Nd[3])ia.stencilOpSeparate(Ic,xb,cb,Mb),Nd[0]=Ic,Nd[1]=xb,Nd[2]=cb,Nd[3]=Mb}ia.blendColor(0,0,0,1);ma[0]=0;ma[1]=0;ma[2]=
0;ma[3]=1;ia.enable(3042);S.blend_enable=!0;ia.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;ia.disable(2929);S.depth_enable=!1;ia.enable(3089);S.scissor_enable=!0;ia.disable(2960);S.stencil_enable=!1;if(d=S.profile)f=performance.now(),ba.count+=e;ia.useProgram(ta.program);h=sd.angle_instanced_arrays;var ab;wa.setVAO(null);ia.uniform1i(F.location,!1);ia.uniform1i(ra.location,K.bind());ab=va.instances;for(k=0;k<e;++k){b=a[k];var nb,Va,Gd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,
Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Ed,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,nf,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,Ve,Ud,ae,We,hf,mf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,
Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,Hf,uf;nb=b.viewport;Va=nb.x|0;Gd=nb.y|0;Hb="width"in nb?nb.width|0:r.framebufferWidth-Va;Ib="height"in nb?nb.height|0:r.framebufferHeight-Gd;qc=r.viewportWidth;r.viewportWidth=Hb;Nb=r.viewportHeight;r.viewportHeight=Ib;ia.viewport(Va,Gd,Hb,Ib);ce[0]=Va;ce[1]=Gd;ce[2]=Hb;ce[3]=Ib;ib=b.viewport;Fb=ib.x|0;Cb=ib.y|0;vb="width"in ib?ib.width|0:r.framebufferWidth-Fb;gb="height"in ib?ib.height|0:r.framebufferHeight-Cb;ia.scissor(Fb,Cb,vb,gb);yd[0]=Fb;yd[1]=Cb;
yd[2]=vb;yd[3]=gb;Yb=A.call(this,r,b,k);Ob=!1;pb=null;Ua=0;Tb=!1;bc=yb=0;hb=1;ob=0;Ia=5126;fb=eb=Ka=qb=0;L(Yb)?(Ob=!0,pb=v.createStream(34962,Yb),Ia=pb.dtype):(pb=v.getBuffer(Yb))?Ia=pb.dtype:"constant"in Yb?(hb=2,"number"===typeof Yb.constant?(Ka=Yb.constant,eb=fb=qb=0):(Ka=0<Yb.constant.length?Yb.constant[0]:0,eb=1<Yb.constant.length?Yb.constant[1]:0,fb=2<Yb.constant.length?Yb.constant[2]:0,qb=3<Yb.constant.length?Yb.constant[3]:0)):(pb=L(Yb.buffer)?v.createStream(34962,Yb.buffer):v.getBuffer(Yb.buffer),
Ia="type"in Yb?ge[Yb.type]:pb.dtype,Tb=!!Yb.normalized,bc=Yb.size|0,yb=Yb.offset|0,ob=Yb.stride|0,Ua=Yb.divisor|0);La=xa.location;jb=Ta[La];if(1===hb){jb.buffer||ia.enableVertexAttribArray(La);Wa=bc||1;if(jb.type!==Ia||jb.size!==Wa||jb.buffer!==pb||jb.normalized!==Tb||jb.offset!==yb||jb.stride!==ob)ia.bindBuffer(34962,pb.buffer),ia.vertexAttribPointer(La,Wa,Ia,Tb,ob,yb),jb.type=Ia,jb.size=Wa,jb.buffer=pb,jb.normalized=Tb,jb.offset=yb,jb.stride=ob;jb.divisor!==Ua&&(h.vertexAttribDivisorANGLE(La,Ua),
jb.divisor=Ua)}else if(jb.buffer&&(ia.disableVertexAttribArray(La),jb.buffer=null),jb.x!==Ka||jb.y!==eb||jb.z!==fb||jb.w!==qb)ia.vertexAttrib4f(La,Ka,eb,fb,qb),jb.x=Ka,jb.y=eb,jb.z=fb,jb.w=qb;sb=ka.call(this,r,b,k);rb=!1;Pa=null;Bc=0;Ra=!1;Db=Jb=0;Ma=1;vd=0;Ya=5126;Na=kb=Lb=Kb=0;L(sb)?(rb=!0,Pa=v.createStream(34962,sb),Ya=Pa.dtype):(Pa=v.getBuffer(sb))?Ya=Pa.dtype:"constant"in sb?(Ma=2,"number"===typeof sb.constant?(Lb=sb.constant,kb=Na=Kb=0):(Lb=0<sb.constant.length?sb.constant[0]:0,kb=1<sb.constant.length?
sb.constant[1]:0,Na=2<sb.constant.length?sb.constant[2]:0,Kb=3<sb.constant.length?sb.constant[3]:0)):(Pa=L(sb.buffer)?v.createStream(34962,sb.buffer):v.getBuffer(sb.buffer),Ya="type"in sb?ge[sb.type]:Pa.dtype,Ra=!!sb.normalized,Db=sb.size|0,Jb=sb.offset|0,vd=sb.stride|0,Bc=sb.divisor|0);Zb=ja.location;Qa=Ta[Zb];if(1===Ma){Qa.buffer||ia.enableVertexAttribArray(Zb);tb=Db||1;if(Qa.type!==Ya||Qa.size!==tb||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Jb||Qa.stride!==vd)ia.bindBuffer(34962,Pa.buffer),
ia.vertexAttribPointer(Zb,tb,Ya,Ra,vd,Jb),Qa.type=Ya,Qa.size=tb,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Jb,Qa.stride=vd;Qa.divisor!==Bc&&(h.vertexAttribDivisorANGLE(Zb,Bc),Qa.divisor=Bc)}else if(Qa.buffer&&(ia.disableVertexAttribArray(Zb),Qa.buffer=null),Qa.x!==Lb||Qa.y!==kb||Qa.z!==Na||Qa.w!==Kb)ia.vertexAttrib4f(Zb,Lb,kb,Na,Kb),Qa.x=Lb,Qa.y=kb,Qa.z=Na,Qa.w=Kb;ub=Z.call(this,r,b,k);Sa=!1;mb=null;gc=0;zc=!1;bb=uc=0;jc=1;ad=0;Xa=5126;Ub=Za=zb=md=0;L(ub)?(Sa=!0,mb=v.createStream(34962,ub),Xa=mb.dtype):
(mb=v.getBuffer(ub))?Xa=mb.dtype:"constant"in ub?(jc=2,"number"===typeof ub.constant?(zb=ub.constant,Za=Ub=md=0):(zb=0<ub.constant.length?ub.constant[0]:0,Za=1<ub.constant.length?ub.constant[1]:0,Ub=2<ub.constant.length?ub.constant[2]:0,md=3<ub.constant.length?ub.constant[3]:0)):(mb=L(ub.buffer)?v.createStream(34962,ub.buffer):v.getBuffer(ub.buffer),Xa="type"in ub?ge[ub.type]:mb.dtype,zc=!!ub.normalized,bb=ub.size|0,uc=ub.offset|0,ad=ub.stride|0,gc=ub.divisor|0);sc=ya.location;Vb=Ta[sc];if(1===jc){Vb.buffer||
ia.enableVertexAttribArray(sc);Pb=bb||1;if(Vb.type!==Xa||Vb.size!==Pb||Vb.buffer!==mb||Vb.normalized!==zc||Vb.offset!==uc||Vb.stride!==ad)ia.bindBuffer(34962,mb.buffer),ia.vertexAttribPointer(sc,Pb,Xa,zc,ad,uc),Vb.type=Xa,Vb.size=Pb,Vb.buffer=mb,Vb.normalized=zc,Vb.offset=uc,Vb.stride=ad;Vb.divisor!==gc&&(h.vertexAttribDivisorANGLE(sc,gc),Vb.divisor=gc)}else if(Vb.buffer&&(ia.disableVertexAttribArray(sc),Vb.buffer=null),Vb.x!==zb||Vb.y!==Za||Vb.z!==Ub||Vb.w!==md)ia.vertexAttrib4f(sc,zb,Za,Ub,md),
Vb.x=zb,Vb.y=Za,Vb.z=Ub,Vb.w=md;Kc=W.call(this,r,b,k);Qb=!1;Ed=null;Ec=0;rd=!1;Wc=Mc=0;td=1;nc=0;vc=5126;Sb=rc=db=hc=0;L(Kc)?(Qb=!0,Ed=v.createStream(34962,Kc),vc=Ed.dtype):(Ed=v.getBuffer(Kc))?vc=Ed.dtype:"constant"in Kc?(td=2,"number"===typeof Kc.constant?(db=Kc.constant,rc=Sb=hc=0):(db=0<Kc.constant.length?Kc.constant[0]:0,rc=1<Kc.constant.length?Kc.constant[1]:0,Sb=2<Kc.constant.length?Kc.constant[2]:0,hc=3<Kc.constant.length?Kc.constant[3]:0)):(Ed=L(Kc.buffer)?v.createStream(34962,Kc.buffer):
v.getBuffer(Kc.buffer),vc="type"in Kc?ge[Kc.type]:Ed.dtype,rd=!!Kc.normalized,Wc=Kc.size|0,Mc=Kc.offset|0,nc=Kc.stride|0,Ec=Kc.divisor|0);Wb=Xb.location;dc=Ta[Wb];if(1===td){dc.buffer||ia.enableVertexAttribArray(Wb);ic=Wc||1;if(dc.type!==vc||dc.size!==ic||dc.buffer!==Ed||dc.normalized!==rd||dc.offset!==Mc||dc.stride!==nc)ia.bindBuffer(34962,Ed.buffer),ia.vertexAttribPointer(Wb,ic,vc,rd,nc,Mc),dc.type=vc,dc.size=ic,dc.buffer=Ed,dc.normalized=rd,dc.offset=Mc,dc.stride=nc;dc.divisor!==Ec&&(h.vertexAttribDivisorANGLE(Wb,
Ec),dc.divisor=Ec)}else if(dc.buffer&&(ia.disableVertexAttribArray(Wb),dc.buffer=null),dc.x!==db||dc.y!==rc||dc.z!==Sb||dc.w!==hc)ia.vertexAttrib4f(Wb,db,rc,Sb,hc),dc.x=db,dc.y=rc,dc.z=Sb,dc.w=hc;xc=da.call(this,r,b,k);Ac=!1;bd=null;Pc=0;Qc=!1;Xc=Rc=0;kd=1;cd=0;Yc=5126;Tc=Zc=cc=kc=0;L(xc)?(Ac=!0,bd=v.createStream(34962,xc),Yc=bd.dtype):(bd=v.getBuffer(xc))?Yc=bd.dtype:"constant"in xc?(kd=2,"number"===typeof xc.constant?(cc=xc.constant,Zc=Tc=kc=0):(cc=0<xc.constant.length?xc.constant[0]:0,Zc=1<xc.constant.length?
xc.constant[1]:0,Tc=2<xc.constant.length?xc.constant[2]:0,kc=3<xc.constant.length?xc.constant[3]:0)):(bd=L(xc.buffer)?v.createStream(34962,xc.buffer):v.getBuffer(xc.buffer),Yc="type"in xc?ge[xc.type]:bd.dtype,Qc=!!xc.normalized,Xc=xc.size|0,Rc=xc.offset|0,cd=xc.stride|0,Pc=xc.divisor|0);dd=Ca.location;yc=Ta[dd];if(1===kd){yc.buffer||ia.enableVertexAttribArray(dd);gd=Xc||1;if(yc.type!==Yc||yc.size!==gd||yc.buffer!==bd||yc.normalized!==Qc||yc.offset!==Rc||yc.stride!==cd)ia.bindBuffer(34962,bd.buffer),
ia.vertexAttribPointer(dd,gd,Yc,Qc,cd,Rc),yc.type=Yc,yc.size=gd,yc.buffer=bd,yc.normalized=Qc,yc.offset=Rc,yc.stride=cd;yc.divisor!==Pc&&(h.vertexAttribDivisorANGLE(dd,Pc),yc.divisor=Pc)}else if(yc.buffer&&(ia.disableVertexAttribArray(dd),yc.buffer=null),yc.x!==cc||yc.y!==Zc||yc.z!==Tc||yc.w!==kc)ia.vertexAttrib4f(dd,cc,Zc,Tc,kc),yc.x=cc,yc.y=Zc,yc.z=Tc,yc.w=kc;xd=R.call(this,r,b,k);Fe=!1;Bd=null;hd=0;nf=!1;Yd=Od=0;ke=1;Pd=0;Kd=5126;ud=Sc=nd=Id=0;L(xd)?(Fe=!0,Bd=v.createStream(34962,xd),Kd=Bd.dtype):
(Bd=v.getBuffer(xd))?Kd=Bd.dtype:"constant"in xd?(ke=2,"number"===typeof xd.constant?(nd=xd.constant,Sc=ud=Id=0):(nd=0<xd.constant.length?xd.constant[0]:0,Sc=1<xd.constant.length?xd.constant[1]:0,ud=2<xd.constant.length?xd.constant[2]:0,Id=3<xd.constant.length?xd.constant[3]:0)):(Bd=L(xd.buffer)?v.createStream(34962,xd.buffer):v.getBuffer(xd.buffer),Kd="type"in xd?ge[xd.type]:Bd.dtype,nf=!!xd.normalized,Yd=xd.size|0,Od=xd.offset|0,Pd=xd.stride|0,hd=xd.divisor|0);qd=oa.location;id=Ta[qd];if(1===ke){id.buffer||
ia.enableVertexAttribArray(qd);wd=Yd||1;if(id.type!==Kd||id.size!==wd||id.buffer!==Bd||id.normalized!==nf||id.offset!==Od||id.stride!==Pd)ia.bindBuffer(34962,Bd.buffer),ia.vertexAttribPointer(qd,wd,Kd,nf,Pd,Od),id.type=Kd,id.size=wd,id.buffer=Bd,id.normalized=nf,id.offset=Od,id.stride=Pd;id.divisor!==hd&&(h.vertexAttribDivisorANGLE(qd,hd),id.divisor=hd)}else if(id.buffer&&(ia.disableVertexAttribArray(qd),id.buffer=null),id.x!==nd||id.y!==Sc||id.z!==ud||id.w!==Id)ia.vertexAttrib4f(qd,nd,Sc,ud,Id),
id.x=nd,id.y=Sc,id.z=ud,id.w=Id;Dd=P.call(this,r,b,k);Fd=!1;qe=null;le=0;Ne=!1;je=me=0;he=1;ue=0;ee=5126;ve=fd=Nc=ne=0;L(Dd)?(Fd=!0,qe=v.createStream(34962,Dd),ee=qe.dtype):(qe=v.getBuffer(Dd))?ee=qe.dtype:"constant"in Dd?(he=2,"number"===typeof Dd.constant?(Nc=Dd.constant,fd=ve=ne=0):(Nc=0<Dd.constant.length?Dd.constant[0]:0,fd=1<Dd.constant.length?Dd.constant[1]:0,ve=2<Dd.constant.length?Dd.constant[2]:0,ne=3<Dd.constant.length?Dd.constant[3]:0)):(qe=L(Dd.buffer)?v.createStream(34962,Dd.buffer):
v.getBuffer(Dd.buffer),ee="type"in Dd?ge[Dd.type]:qe.dtype,Ne=!!Dd.normalized,je=Dd.size|0,me=Dd.offset|0,ue=Dd.stride|0,le=Dd.divisor|0);re=p.location;Ld=Ta[re];if(1===he){Ld.buffer||ia.enableVertexAttribArray(re);Qd=je||4;if(Ld.type!==ee||Ld.size!==Qd||Ld.buffer!==qe||Ld.normalized!==Ne||Ld.offset!==me||Ld.stride!==ue)ia.bindBuffer(34962,qe.buffer),ia.vertexAttribPointer(re,Qd,ee,Ne,ue,me),Ld.type=ee,Ld.size=Qd,Ld.buffer=qe,Ld.normalized=Ne,Ld.offset=me,Ld.stride=ue;Ld.divisor!==le&&(h.vertexAttribDivisorANGLE(re,
le),Ld.divisor=le)}else if(Ld.buffer&&(ia.disableVertexAttribArray(re),Ld.buffer=null),Ld.x!==Nc||Ld.y!==fd||Ld.z!==ve||Ld.w!==ne)ia.vertexAttrib4f(re,Nc,fd,ve,ne),Ld.x=Nc,Ld.y=fd,Ld.z=ve,Ld.w=ne;Rd=z.call(this,r,b,k);Sd=!1;oe=null;ye=0;Be=!1;Re=se=0;Se=1;Oe=0;we=5126;Ke=Je=Ie=Ge=0;L(Rd)?(Sd=!0,oe=v.createStream(34962,Rd),we=oe.dtype):(oe=v.getBuffer(Rd))?we=oe.dtype:"constant"in Rd?(Se=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ke=Ge=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?
Rd.constant[1]:0,Ke=2<Rd.constant.length?Rd.constant[2]:0,Ge=3<Rd.constant.length?Rd.constant[3]:0)):(oe=L(Rd.buffer)?v.createStream(34962,Rd.buffer):v.getBuffer(Rd.buffer),we="type"in Rd?ge[Rd.type]:oe.dtype,Be=!!Rd.normalized,Re=Rd.size|0,se=Rd.offset|0,Oe=Rd.stride|0,ye=Rd.divisor|0);He=Ea.location;Md=Ta[He];if(1===Se){Md.buffer||ia.enableVertexAttribArray(He);Zd=Re||4;if(Md.type!==we||Md.size!==Zd||Md.buffer!==oe||Md.normalized!==Be||Md.offset!==se||Md.stride!==Oe)ia.bindBuffer(34962,oe.buffer),
ia.vertexAttribPointer(He,Zd,we,Be,Oe,se),Md.type=we,Md.size=Zd,Md.buffer=oe,Md.normalized=Be,Md.offset=se,Md.stride=Oe;Md.divisor!==ye&&(h.vertexAttribDivisorANGLE(He,ye),Md.divisor=ye)}else if(Md.buffer&&(ia.disableVertexAttribArray(He),Md.buffer=null),Md.x!==Ie||Md.y!==Je||Md.z!==Ke||Md.w!==Ge)ia.vertexAttrib4f(He,Ie,Je,Ke,Ge),Md.x=Ie,Md.y=Je,Md.z=Ke,Md.w=Ge;de=l.call(this,r,b,k);fe=!1;Le=null;Jd=0;Td=!1;Me=De=0;bf=1;af=0;Te=5126;Ue=Xe=$e=Pe=0;L(de)?(fe=!0,Le=v.createStream(34962,de),Te=Le.dtype):
(Le=v.getBuffer(de))?Te=Le.dtype:"constant"in de?(bf=2,"number"===typeof de.constant?($e=de.constant,Xe=Ue=Pe=0):($e=0<de.constant.length?de.constant[0]:0,Xe=1<de.constant.length?de.constant[1]:0,Ue=2<de.constant.length?de.constant[2]:0,Pe=3<de.constant.length?de.constant[3]:0)):(Le=L(de.buffer)?v.createStream(34962,de.buffer):v.getBuffer(de.buffer),Te="type"in de?ge[de.type]:Le.dtype,Td=!!de.normalized,Me=de.size|0,De=de.offset|0,af=de.stride|0,Jd=de.divisor|0);Ve=ca.location;Ud=Ta[Ve];if(1===bf){Ud.buffer||
ia.enableVertexAttribArray(Ve);ae=Me||1;if(Ud.type!==Te||Ud.size!==ae||Ud.buffer!==Le||Ud.normalized!==Td||Ud.offset!==De||Ud.stride!==af)ia.bindBuffer(34962,Le.buffer),ia.vertexAttribPointer(Ve,ae,Te,Td,af,De),Ud.type=Te,Ud.size=ae,Ud.buffer=Le,Ud.normalized=Td,Ud.offset=De,Ud.stride=af;Ud.divisor!==Jd&&(h.vertexAttribDivisorANGLE(Ve,Jd),Ud.divisor=Jd)}else if(Ud.buffer&&(ia.disableVertexAttribArray(Ve),Ud.buffer=null),Ud.x!==$e||Ud.y!==Xe||Ud.z!==Ue||Ud.w!==Pe)ia.vertexAttrib4f(Ve,$e,Xe,Ue,Pe),
Ud.x=$e,Ud.y=Xe,Ud.z=Ue,Ud.w=Pe;We=r.pixelRatio;k&&hf===We||(hf=We,ia.uniform1f(Aa.location,We));mf=J.call(this,r,b,k);ef=mf[0];kf=mf[1];k&&jf===ef&&lf===kf||(jf=ef,lf=kf,ia.uniform2f(na.location,ef,kf));rf=b.scale;of=rf[0];Bf=rf[1];k&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ia.uniform2f(za.location,of,Bf));Qe=b.scaleFract;Ee=Qe[0];qf=Qe[1];k&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ia.uniform2f(ga.location,Ee,qf));Gf=b.translate;Af=Gf[0];Ff=Gf[1];k&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ia.uniform2f(la.location,Af,Ff));
xf=b.translateFract;vf=xf[0];zf=xf[1];k&&yf===vf&&If===zf||(yf=vf,If=zf,ia.uniform2f(qa.location,vf,zf));Jf=b.opacity;k&&Kf===Jf||(Kf=Jf,ia.uniform1f(Q.location,Jf));Lf=b.elements;tf=null;(tf=(Rf=L(Lf))?Fa.createStream(Lf):Fa.getElements(Lf))&&ia.bindBuffer(34963,tf.buffer.buffer);Hf=b.offset;if(uf=b.count)0<ab?tf?h.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),ab):h.drawArraysInstancedANGLE(0,Hf,uf,ab):0>ab&&(tf?ia.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ia.drawArrays(0,
Hf,uf)),r.viewportWidth=qc,r.viewportHeight=Nb,Ob&&v.destroyStream(pb),rb&&v.destroyStream(Pa),Sa&&v.destroyStream(mb),Qb&&v.destroyStream(Ed),Ac&&v.destroyStream(bd),Fe&&v.destroyStream(Bd),Fd&&v.destroyStream(qe),Sd&&v.destroyStream(oe),fe&&v.destroyStream(Le),Rf&&Fa.destroyStream(tf)}K.unbind();S.dirty=!0;wa.setVAO(null);d&&(ba.cpuTime+=performance.now()-f)},draw:function(a){var e,c,d,h,b,l,q,w,A,x,Da,P,D,z,u,pa,E,R,J,K,m,N,O,T,M,Ga,Y,ha,W,aa,da,V,ka,ta,Z,Cc,Ja,Ic,xb,cb,Mb,ab,nb,Va,Gd,Hb,Ib,qc,
Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,Ed,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd,Fe,Bd,hd,nf,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re;e=Gb.next;e!==Gb.cur&&(e?ia.bindFramebuffer(36160,e.framebuffer):ia.bindFramebuffer(36160,null),Gb.cur=e);
if(S.dirty){var Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,Ve,Ud,ae,We,hf,mf,ef,jf,kf,lf;Se=sa.dither;Se!==S.dither&&(Se?ia.enable(3024):ia.disable(3024),S.dither=Se);Oe=X[0];we=X[1];if(Oe!==ua[0]||we!==ua[1])ia.blendEquationSeparate(Oe,we),ua[0]=Oe,ua[1]=we;Ge=sa.depth_func;Ge!==S.depth_func&&(ia.depthFunc(Ge),S.depth_func=Ge);Ie=fa[0];Je=fa[1];if(Ie!==$b[0]||Je!==$b[1])ia.depthRange(Ie,Je),$b[0]=Ie,$b[1]=Je;Ke=sa.depth_mask;Ke!==S.depth_mask&&(ia.depthMask(Ke),S.depth_mask=
Ke);He=lb[0];Md=lb[1];Zd=lb[2];de=lb[3];if(He!==ea[0]||Md!==ea[1]||Zd!==ea[2]||de!==ea[3])ia.colorMask(He,Md,Zd,de),ea[0]=He,ea[1]=Md,ea[2]=Zd,ea[3]=de;fe=sa.cull_enable;fe!==S.cull_enable&&(fe?ia.enable(2884):ia.disable(2884),S.cull_enable=fe);Le=sa.cull_face;Le!==S.cull_face&&(ia.cullFace(Le),S.cull_face=Le);Jd=sa.frontFace;Jd!==S.frontFace&&(ia.frontFace(Jd),S.frontFace=Jd);Td=sa.lineWidth;Td!==S.lineWidth&&(ia.lineWidth(Td),S.lineWidth=Td);De=sa.polygonOffset_enable;De!==S.polygonOffset_enable&&
(De?ia.enable(32823):ia.disable(32823),S.polygonOffset_enable=De);Me=Ha[0];bf=Ha[1];if(Me!==ac[0]||bf!==ac[1])ia.polygonOffset(Me,bf),ac[0]=Me,ac[1]=bf;af=sa.sample_alpha;af!==S.sample_alpha&&(af?ia.enable(32926):ia.disable(32926),S.sample_alpha=af);Te=sa.sample_enable;Te!==S.sample_enable&&(Te?ia.enable(32928):ia.disable(32928),S.sample_enable=Te);Pe=Rb[0];$e=Rb[1];if(Pe!==Oa[0]||$e!==Oa[1])ia.sampleCoverage(Pe,$e),Oa[0]=Pe,Oa[1]=$e;Xe=sa.stencil_mask;Xe!==S.stencil_mask&&(ia.stencilMask(Xe),S.stencil_mask=
Xe);Ue=Vd[0];Ve=Vd[1];Ud=Vd[2];if(Ue!==ze[0]||Ve!==ze[1]||Ud!==ze[2])ia.stencilFunc(Ue,Ve,Ud),ze[0]=Ue,ze[1]=Ve,ze[2]=Ud;ae=pe[0];We=pe[1];hf=pe[2];mf=pe[3];if(ae!==ie[0]||We!==ie[1]||hf!==ie[2]||mf!==ie[3])ia.stencilOpSeparate(ae,We,hf,mf),ie[0]=ae,ie[1]=We,ie[2]=hf,ie[3]=mf;ef=xe[0];jf=xe[1];kf=xe[2];lf=xe[3];if(ef!==Nd[0]||jf!==Nd[1]||kf!==Nd[2]||lf!==Nd[3])ia.stencilOpSeparate(ef,jf,kf,lf),Nd[0]=ef,Nd[1]=jf,Nd[2]=kf,Nd[3]=lf}c=a.viewport;d=c.x|0;h=c.y|0;b="width"in c?c.width|0:r.framebufferWidth-
d;l="height"in c?c.height|0:r.framebufferHeight-h;q=r.viewportWidth;r.viewportWidth=b;w=r.viewportHeight;r.viewportHeight=l;ia.viewport(d,h,b,l);ce[0]=d;ce[1]=h;ce[2]=b;ce[3]=l;ia.blendColor(0,0,0,1);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=1;ia.enable(3042);S.blend_enable=!0;ia.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;ia.disable(2929);S.depth_enable=!1;A=a.viewport;x=A.x|0;Da=A.y|0;P="width"in A?A.width|0:r.framebufferWidth-x;D="height"in A?A.height|0:r.framebufferHeight-Da;ia.scissor(x,
Da,P,D);yd[0]=x;yd[1]=Da;yd[2]=P;yd[3]=D;ia.enable(3089);S.scissor_enable=!0;ia.disable(2960);S.stencil_enable=!1;if(z=S.profile)u=performance.now(),ba.count++;ia.useProgram(H.program);pa=sd.angle_instanced_arrays;wa.setVAO(null);E=I.call(this,r,a,0);R=!1;J=null;K=0;m=!1;O=N=0;T=1;M=0;Ga=5126;aa=W=ha=Y=0;L(E)?(R=!0,J=v.createStream(34962,E),Ga=J.dtype):(J=v.getBuffer(E))?Ga=J.dtype:"constant"in E?(T=2,"number"===typeof E.constant?(ha=E.constant,W=aa=Y=0):(ha=0<E.constant.length?E.constant[0]:0,W=
1<E.constant.length?E.constant[1]:0,aa=2<E.constant.length?E.constant[2]:0,Y=3<E.constant.length?E.constant[3]:0)):(J=L(E.buffer)?v.createStream(34962,E.buffer):v.getBuffer(E.buffer),Ga="type"in E?ge[E.type]:J.dtype,m=!!E.normalized,O=E.size|0,N=E.offset|0,M=E.stride|0,K=E.divisor|0);da=xa.location;V=Ta[da];if(1===T){V.buffer||ia.enableVertexAttribArray(da);ka=O||1;if(V.type!==Ga||V.size!==ka||V.buffer!==J||V.normalized!==m||V.offset!==N||V.stride!==M)ia.bindBuffer(34962,J.buffer),ia.vertexAttribPointer(da,
ka,Ga,m,M,N),V.type=Ga,V.size=ka,V.buffer=J,V.normalized=m,V.offset=N,V.stride=M;V.divisor!==K&&(pa.vertexAttribDivisorANGLE(da,K),V.divisor=K)}else if(V.buffer&&(ia.disableVertexAttribArray(da),V.buffer=null),V.x!==ha||V.y!==W||V.z!==aa||V.w!==Y)ia.vertexAttrib4f(da,ha,W,aa,Y),V.x=ha,V.y=W,V.z=aa,V.w=Y;ta=g.call(this,r,a,0);Z=!1;Cc=null;Ja=0;Ic=!1;cb=xb=0;Mb=1;ab=0;nb=5126;Ib=Hb=Gd=Va=0;L(ta)?(Z=!0,Cc=v.createStream(34962,ta),nb=Cc.dtype):(Cc=v.getBuffer(ta))?nb=Cc.dtype:"constant"in ta?(Mb=2,"number"===
typeof ta.constant?(Gd=ta.constant,Hb=Ib=Va=0):(Gd=0<ta.constant.length?ta.constant[0]:0,Hb=1<ta.constant.length?ta.constant[1]:0,Ib=2<ta.constant.length?ta.constant[2]:0,Va=3<ta.constant.length?ta.constant[3]:0)):(Cc=L(ta.buffer)?v.createStream(34962,ta.buffer):v.getBuffer(ta.buffer),nb="type"in ta?ge[ta.type]:Cc.dtype,Ic=!!ta.normalized,cb=ta.size|0,xb=ta.offset|0,ab=ta.stride|0,Ja=ta.divisor|0);qc=ja.location;Nb=Ta[qc];if(1===Mb){Nb.buffer||ia.enableVertexAttribArray(qc);ib=cb||1;if(Nb.type!==
nb||Nb.size!==ib||Nb.buffer!==Cc||Nb.normalized!==Ic||Nb.offset!==xb||Nb.stride!==ab)ia.bindBuffer(34962,Cc.buffer),ia.vertexAttribPointer(qc,ib,nb,Ic,ab,xb),Nb.type=nb,Nb.size=ib,Nb.buffer=Cc,Nb.normalized=Ic,Nb.offset=xb,Nb.stride=ab;Nb.divisor!==Ja&&(pa.vertexAttribDivisorANGLE(qc,Ja),Nb.divisor=Ja)}else if(Nb.buffer&&(ia.disableVertexAttribArray(qc),Nb.buffer=null),Nb.x!==Gd||Nb.y!==Hb||Nb.z!==Ib||Nb.w!==Va)ia.vertexAttrib4f(qc,Gd,Hb,Ib,Va),Nb.x=Gd,Nb.y=Hb,Nb.z=Ib,Nb.w=Va;Fb=k.call(this,r,a,0);
Cb=!1;vb=null;gb=0;Yb=!1;pb=Ob=0;Ua=1;Tb=0;yb=5126;Ia=ob=hb=bc=0;L(Fb)?(Cb=!0,vb=v.createStream(34962,Fb),yb=vb.dtype):(vb=v.getBuffer(Fb))?yb=vb.dtype:"constant"in Fb?(Ua=2,"number"===typeof Fb.constant?(hb=Fb.constant,ob=Ia=bc=0):(hb=0<Fb.constant.length?Fb.constant[0]:0,ob=1<Fb.constant.length?Fb.constant[1]:0,Ia=2<Fb.constant.length?Fb.constant[2]:0,bc=3<Fb.constant.length?Fb.constant[3]:0)):(vb=L(Fb.buffer)?v.createStream(34962,Fb.buffer):v.getBuffer(Fb.buffer),yb="type"in Fb?ge[Fb.type]:vb.dtype,
Yb=!!Fb.normalized,pb=Fb.size|0,Ob=Fb.offset|0,Tb=Fb.stride|0,gb=Fb.divisor|0);qb=ya.location;Ka=Ta[qb];if(1===Ua){Ka.buffer||ia.enableVertexAttribArray(qb);eb=pb||1;if(Ka.type!==yb||Ka.size!==eb||Ka.buffer!==vb||Ka.normalized!==Yb||Ka.offset!==Ob||Ka.stride!==Tb)ia.bindBuffer(34962,vb.buffer),ia.vertexAttribPointer(qb,eb,yb,Yb,Tb,Ob),Ka.type=yb,Ka.size=eb,Ka.buffer=vb,Ka.normalized=Yb,Ka.offset=Ob,Ka.stride=Tb;Ka.divisor!==gb&&(pa.vertexAttribDivisorANGLE(qb,gb),Ka.divisor=gb)}else if(Ka.buffer&&
(ia.disableVertexAttribArray(qb),Ka.buffer=null),Ka.x!==hb||Ka.y!==ob||Ka.z!==Ia||Ka.w!==bc)ia.vertexAttrib4f(qb,hb,ob,Ia,bc),Ka.x=hb,Ka.y=ob,Ka.z=Ia,Ka.w=bc;fb=n.call(this,r,a,0);La=!1;jb=null;Wa=0;sb=!1;Pa=rb=0;Bc=1;Ra=0;Jb=5126;Ya=Ed=Ma=Db=0;L(fb)?(La=!0,jb=v.createStream(34962,fb),Jb=jb.dtype):(jb=v.getBuffer(fb))?Jb=jb.dtype:"constant"in fb?(Bc=2,"number"===typeof fb.constant?(Ma=fb.constant,Ed=Ya=Db=0):(Ma=0<fb.constant.length?fb.constant[0]:0,Ed=1<fb.constant.length?fb.constant[1]:0,Ya=2<fb.constant.length?
fb.constant[2]:0,Db=3<fb.constant.length?fb.constant[3]:0)):(jb=L(fb.buffer)?v.createStream(34962,fb.buffer):v.getBuffer(fb.buffer),Jb="type"in fb?ge[fb.type]:jb.dtype,sb=!!fb.normalized,Pa=fb.size|0,rb=fb.offset|0,Ra=fb.stride|0,Wa=fb.divisor|0);Kb=Xb.location;Lb=Ta[Kb];if(1===Bc){Lb.buffer||ia.enableVertexAttribArray(Kb);kb=Pa||1;if(Lb.type!==Jb||Lb.size!==kb||Lb.buffer!==jb||Lb.normalized!==sb||Lb.offset!==rb||Lb.stride!==Ra)ia.bindBuffer(34962,jb.buffer),ia.vertexAttribPointer(Kb,kb,Jb,sb,Ra,
rb),Lb.type=Jb,Lb.size=kb,Lb.buffer=jb,Lb.normalized=sb,Lb.offset=rb,Lb.stride=Ra;Lb.divisor!==Wa&&(pa.vertexAttribDivisorANGLE(Kb,Wa),Lb.divisor=Wa)}else if(Lb.buffer&&(ia.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Ma||Lb.y!==Ed||Lb.z!==Ya||Lb.w!==Db)ia.vertexAttrib4f(Kb,Ma,Ed,Ya,Db),Lb.x=Ma,Lb.y=Ed,Lb.z=Ya,Lb.w=Db;Na=f.call(this,r,a,0);Zb=!1;Qa=null;tb=0;ub=!1;mb=Sa=0;gc=1;zc=0;uc=5126;Xa=ad=jc=bb=0;L(Na)?(Zb=!0,Qa=v.createStream(34962,Na),uc=Qa.dtype):(Qa=v.getBuffer(Na))?uc=Qa.dtype:
"constant"in Na?(gc=2,"number"===typeof Na.constant?(jc=Na.constant,ad=Xa=bb=0):(jc=0<Na.constant.length?Na.constant[0]:0,ad=1<Na.constant.length?Na.constant[1]:0,Xa=2<Na.constant.length?Na.constant[2]:0,bb=3<Na.constant.length?Na.constant[3]:0)):(Qa=L(Na.buffer)?v.createStream(34962,Na.buffer):v.getBuffer(Na.buffer),uc="type"in Na?ge[Na.type]:Qa.dtype,ub=!!Na.normalized,mb=Na.size|0,Sa=Na.offset|0,zc=Na.stride|0,tb=Na.divisor|0);md=Ca.location;zb=Ta[md];if(1===gc){zb.buffer||ia.enableVertexAttribArray(md);
Za=mb||1;if(zb.type!==uc||zb.size!==Za||zb.buffer!==Qa||zb.normalized!==ub||zb.offset!==Sa||zb.stride!==zc)ia.bindBuffer(34962,Qa.buffer),ia.vertexAttribPointer(md,Za,uc,ub,zc,Sa),zb.type=uc,zb.size=Za,zb.buffer=Qa,zb.normalized=ub,zb.offset=Sa,zb.stride=zc;zb.divisor!==tb&&(pa.vertexAttribDivisorANGLE(md,tb),zb.divisor=tb)}else if(zb.buffer&&(ia.disableVertexAttribArray(md),zb.buffer=null),zb.x!==jc||zb.y!==ad||zb.z!==Xa||zb.w!==bb)ia.vertexAttrib4f(md,jc,ad,Xa,bb),zb.x=jc,zb.y=ad,zb.z=Xa,zb.w=bb;
Ub=B.call(this,r,a,0);sc=!1;Vb=null;Pb=0;Kc=!1;Xd=Qb=0;Ec=1;rd=0;Mc=5126;vc=nc=td=Wc=0;L(Ub)?(sc=!0,Vb=v.createStream(34962,Ub),Mc=Vb.dtype):(Vb=v.getBuffer(Ub))?Mc=Vb.dtype:"constant"in Ub?(Ec=2,"number"===typeof Ub.constant?(td=Ub.constant,nc=vc=Wc=0):(td=0<Ub.constant.length?Ub.constant[0]:0,nc=1<Ub.constant.length?Ub.constant[1]:0,vc=2<Ub.constant.length?Ub.constant[2]:0,Wc=3<Ub.constant.length?Ub.constant[3]:0)):(Vb=L(Ub.buffer)?v.createStream(34962,Ub.buffer):v.getBuffer(Ub.buffer),Mc="type"in
Ub?ge[Ub.type]:Vb.dtype,Kc=!!Ub.normalized,Xd=Ub.size|0,Qb=Ub.offset|0,rd=Ub.stride|0,Pb=Ub.divisor|0);hc=oa.location;db=Ta[hc];if(1===Ec){db.buffer||ia.enableVertexAttribArray(hc);rc=Xd||1;if(db.type!==Mc||db.size!==rc||db.buffer!==Vb||db.normalized!==Kc||db.offset!==Qb||db.stride!==rd)ia.bindBuffer(34962,Vb.buffer),ia.vertexAttribPointer(hc,rc,Mc,Kc,rd,Qb),db.type=Mc,db.size=rc,db.buffer=Vb,db.normalized=Kc,db.offset=Qb,db.stride=rd;db.divisor!==Pb&&(pa.vertexAttribDivisorANGLE(hc,Pb),db.divisor=
Pb)}else if(db.buffer&&(ia.disableVertexAttribArray(hc),db.buffer=null),db.x!==td||db.y!==nc||db.z!==vc||db.w!==Wc)ia.vertexAttrib4f(hc,td,nc,vc,Wc),db.x=td,db.y=nc,db.z=vc,db.w=Wc;Sb=C.call(this,r,a,0);Wb=!1;dc=null;ic=0;xc=!1;bd=Ac=0;Pc=1;Qc=0;Rc=5126;Yc=cd=kd=Xc=0;L(Sb)?(Wb=!0,dc=v.createStream(34962,Sb),Rc=dc.dtype):(dc=v.getBuffer(Sb))?Rc=dc.dtype:"constant"in Sb?(Pc=2,"number"===typeof Sb.constant?(kd=Sb.constant,cd=Yc=Xc=0):(kd=0<Sb.constant.length?Sb.constant[0]:0,cd=1<Sb.constant.length?
Sb.constant[1]:0,Yc=2<Sb.constant.length?Sb.constant[2]:0,Xc=3<Sb.constant.length?Sb.constant[3]:0)):(dc=L(Sb.buffer)?v.createStream(34962,Sb.buffer):v.getBuffer(Sb.buffer),Rc="type"in Sb?ge[Sb.type]:dc.dtype,xc=!!Sb.normalized,bd=Sb.size|0,Ac=Sb.offset|0,Qc=Sb.stride|0,ic=Sb.divisor|0);kc=p.location;cc=Ta[kc];if(1===Pc){cc.buffer||ia.enableVertexAttribArray(kc);Zc=bd||4;if(cc.type!==Rc||cc.size!==Zc||cc.buffer!==dc||cc.normalized!==xc||cc.offset!==Ac||cc.stride!==Qc)ia.bindBuffer(34962,dc.buffer),
ia.vertexAttribPointer(kc,Zc,Rc,xc,Qc,Ac),cc.type=Rc,cc.size=Zc,cc.buffer=dc,cc.normalized=xc,cc.offset=Ac,cc.stride=Qc;cc.divisor!==ic&&(pa.vertexAttribDivisorANGLE(kc,ic),cc.divisor=ic)}else if(cc.buffer&&(ia.disableVertexAttribArray(kc),cc.buffer=null),cc.x!==kd||cc.y!==cd||cc.z!==Yc||cc.w!==Xc)ia.vertexAttrib4f(kc,kd,cd,Yc,Xc),cc.x=kd,cc.y=cd,cc.z=Yc,cc.w=Xc;Tc=G.call(this,r,a,0);dd=!1;yc=null;gd=0;xd=!1;Bd=Fe=0;hd=1;nf=0;Od=5126;Kd=Pd=ke=Yd=0;L(Tc)?(dd=!0,yc=v.createStream(34962,Tc),Od=yc.dtype):
(yc=v.getBuffer(Tc))?Od=yc.dtype:"constant"in Tc?(hd=2,"number"===typeof Tc.constant?(ke=Tc.constant,Pd=Kd=Yd=0):(ke=0<Tc.constant.length?Tc.constant[0]:0,Pd=1<Tc.constant.length?Tc.constant[1]:0,Kd=2<Tc.constant.length?Tc.constant[2]:0,Yd=3<Tc.constant.length?Tc.constant[3]:0)):(yc=L(Tc.buffer)?v.createStream(34962,Tc.buffer):v.getBuffer(Tc.buffer),Od="type"in Tc?ge[Tc.type]:yc.dtype,xd=!!Tc.normalized,Bd=Tc.size|0,Fe=Tc.offset|0,nf=Tc.stride|0,gd=Tc.divisor|0);Id=Ea.location;nd=Ta[Id];if(1===hd){nd.buffer||
ia.enableVertexAttribArray(Id);Sc=Bd||4;if(nd.type!==Od||nd.size!==Sc||nd.buffer!==yc||nd.normalized!==xd||nd.offset!==Fe||nd.stride!==nf)ia.bindBuffer(34962,yc.buffer),ia.vertexAttribPointer(Id,Sc,Od,xd,nf,Fe),nd.type=Od,nd.size=Sc,nd.buffer=yc,nd.normalized=xd,nd.offset=Fe,nd.stride=nf;nd.divisor!==gd&&(pa.vertexAttribDivisorANGLE(Id,gd),nd.divisor=gd)}else if(nd.buffer&&(ia.disableVertexAttribArray(Id),nd.buffer=null),nd.x!==ke||nd.y!==Pd||nd.z!==Kd||nd.w!==Yd)ia.vertexAttrib4f(Id,ke,Pd,Kd,Yd),
nd.x=ke,nd.y=Pd,nd.z=Kd,nd.w=Yd;ud=U.call(this,r,a,0);qd=!1;id=null;wd=0;Dd=!1;qe=Fd=0;le=1;Ne=0;me=5126;ee=ue=he=je=0;L(ud)?(qd=!0,id=v.createStream(34962,ud),me=id.dtype):(id=v.getBuffer(ud))?me=id.dtype:"constant"in ud?(le=2,"number"===typeof ud.constant?(he=ud.constant,ue=ee=je=0):(he=0<ud.constant.length?ud.constant[0]:0,ue=1<ud.constant.length?ud.constant[1]:0,ee=2<ud.constant.length?ud.constant[2]:0,je=3<ud.constant.length?ud.constant[3]:0)):(id=L(ud.buffer)?v.createStream(34962,ud.buffer):
v.getBuffer(ud.buffer),me="type"in ud?ge[ud.type]:id.dtype,Dd=!!ud.normalized,qe=ud.size|0,Fd=ud.offset|0,Ne=ud.stride|0,wd=ud.divisor|0);ne=ca.location;Nc=Ta[ne];if(1===le){Nc.buffer||ia.enableVertexAttribArray(ne);fd=qe||1;if(Nc.type!==me||Nc.size!==fd||Nc.buffer!==id||Nc.normalized!==Dd||Nc.offset!==Fd||Nc.stride!==Ne)ia.bindBuffer(34962,id.buffer),ia.vertexAttribPointer(ne,fd,me,Dd,Ne,Fd),Nc.type=me,Nc.size=fd,Nc.buffer=id,Nc.normalized=Dd,Nc.offset=Fd,Nc.stride=Ne;Nc.divisor!==wd&&(pa.vertexAttribDivisorANGLE(ne,
wd),Nc.divisor=wd)}else if(Nc.buffer&&(ia.disableVertexAttribArray(ne),Nc.buffer=null),Nc.x!==he||Nc.y!==ue||Nc.z!==ee||Nc.w!==je)ia.vertexAttrib4f(ne,he,ue,ee,je),Nc.x=he,Nc.y=ue,Nc.z=ee,Nc.w=je;ia.uniform1i(F.location,!1);ia.uniform1f(Aa.location,r.pixelRatio);ve=y.call(this,r,a,0);ia.uniform2f(na.location,ve[0],ve[1]);re=a.scale;ia.uniform2f(za.location,re[0],re[1]);Ld=a.scaleFract;ia.uniform2f(ga.location,Ld[0],Ld[1]);Qd=a.translate;ia.uniform2f(la.location,Qd[0],Qd[1]);Rd=a.translateFract;ia.uniform2f(qa.location,
Rd[0],Rd[1]);ia.uniform1f(Q.location,a.opacity);ia.uniform1i(ra.location,t.bind());Sd=a.elements;oe=null;(oe=(ye=L(Sd))?Fa.createStream(Sd):Fa.getElements(Sd))&&ia.bindBuffer(34963,oe.buffer.buffer);Be=a.offset;if(se=a.count)Re=va.instances,0<Re?oe?pa.drawElementsInstancedANGLE(0,se,oe.type,Be<<(oe.type-5121>>1),Re):pa.drawArraysInstancedANGLE(0,Be,se,Re):0>Re&&(oe?ia.drawElements(0,se,oe.type,Be<<(oe.type-5121>>1)):ia.drawArrays(0,Be,se)),S.dirty=!0,wa.setVAO(null),r.viewportWidth=q,r.viewportHeight=
w,z&&(ba.cpuTime+=performance.now()-u),R&&v.destroyStream(J),Z&&v.destroyStream(Cc),Cb&&v.destroyStream(vb),La&&v.destroyStream(jb),Zb&&v.destroyStream(Qa),sc&&v.destroyStream(Vb),Wb&&v.destroyStream(dc),dd&&v.destroyStream(yc),qd&&v.destroyStream(id),t.unbind(),ye&&Fa.destroyStream(oe)},scope:function(f,k,b){var l,p,n,ja,g,A,F,P,z,Q,R,ga,J,ia,I,t,Xb,y,ya,ma,C,K,X,B,ca,H,wa,ra,G,Ea,za,U,ea,la,W,da,Ta,qa,ta,Ca,xa,oa,ka,na,ua,Aa,Gb,Cc,Z,Ba,Ha,sd,lb,Rb,fa,Ua,$b,ac,Vd,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,
rb,Pa,yd,Ra,Jb,Db,Ma,zd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,Oa,Xa,Nd,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,ce,Ec,ze,Mc,Wc,ie,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,pe,xe,Bd,hd,Qf,Od,Yd,ke,Pd,Kd,Id,nd,Sc,ud,qd,id,wd,Dd,Fd,qe,le,Ne,me,je,he,ue,ee,ne,Nc,fd,ve,re,Ld,Qd,Rd,Sd,oe,ye,Be,se,Re,Se,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,de,fe,Le,Jd,Td,De,Me,bf,af,Te,Pe,$e,Xe,Ue,Ve,Ud,ae,We,hf,mf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Rf,
Hf,uf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;l=f.viewport;p=l.x|0;n=l.y|0;ja="width"in l?l.width|0:r.framebufferWidth-p;g="height"in l?l.height|0:r.framebufferHeight-n;A=r.viewportWidth;r.viewportWidth=ja;F=r.viewportHeight;r.viewportHeight=g;P=Ed[0];Ed[0]=p;z=Ed[1];Ed[1]=n;Q=Ed[2];Ed[2]=ja;R=Ed[3];Ed[3]=g;ga=Ga[0];Ga[0]=0;J=Ga[1];Ga[1]=0;ia=Ga[2];Ga[2]=0;I=Ga[3];
Ga[3]=1;t=sa.blend_enable;sa.blend_enable=!0;Xb=Ja[0];Ja[0]=770;y=Ja[1];Ja[1]=771;ya=Ja[2];Ja[2]=773;ma=Ja[3];Ja[3]=1;C=sa.depth_enable;sa.depth_enable=!1;K=f.viewport;X=K.x|0;B=K.y|0;ca="width"in K?K.width|0:r.framebufferWidth-X;H="height"in K?K.height|0:r.framebufferHeight-B;wa=Gd[0];Gd[0]=X;ra=Gd[1];Gd[1]=B;G=Gd[2];Gd[2]=ca;Ea=Gd[3];Gd[3]=H;za=sa.scissor_enable;sa.scissor_enable=!0;U=sa.stencil_enable;sa.stencil_enable=!1;if(ea=S.profile)la=performance.now(),ba.count++;W=f.elements;da=null;da=
(Ta=L(W))?Fa.createStream(W):Fa.getElements(W);qa=va.elements;va.elements=da;ta=f.offset;Ca=va.offset;va.offset=ta;xa=f.count;oa=va.count;va.count=xa;ka=va.primitive;va.primitive=0;na=pa[45];pa[45]=!1;ua=f.markerTexture;Aa=pa[48];pa[48]=ua;Gb=f.opacity;Cc=pa[10];pa[10]=Gb;Z=m.call(this,r,f,b);Ba=pa[46];pa[46]=Z;Ha=pa[47];pa[47]=aa;sd=r.pixelRatio;lb=pa[34];pa[34]=sd;Rb=f.scale;fa=pa[6];pa[6]=Rb;Ua=f.scaleFract;$b=pa[7];pa[7]=Ua;ac=f.translate;Vd=pa[8];pa[8]=ac;hb=f.translateFract;ob=pa[9];pa[9]=hb;
Ia=x.call(this,r,f,b);qb=!1;Ka=null;eb=0;fb=!1;jb=La=0;Wa=1;sb=0;rb=5126;Jb=Ra=yd=Pa=0;L(Ia)?(qb=!0,Ka=v.createStream(34962,Ia),rb=Ka.dtype):(Ka=v.getBuffer(Ia))?rb=Ka.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(yd=Ia.constant,Ra=Jb=Pa=0):(yd=0<Ia.constant.length?Ia.constant[0]:0,Ra=1<Ia.constant.length?Ia.constant[1]:0,Jb=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=L(Ia.buffer)?v.createStream(34962,Ia.buffer):v.getBuffer(Ia.buffer),rb="type"in
Ia?ge[Ia.type]:Ka.dtype,fb=!!Ia.normalized,jb=Ia.size|0,La=Ia.offset|0,sb=Ia.stride|0,eb=Ia.divisor|0);Db=M.buffer;M.buffer=Ka;Ma=M.divisor;M.divisor=eb;zd=M.normalized;M.normalized=fb;Ya=M.offset;M.offset=La;Kb=M.size;M.size=jb;Lb=M.state;M.state=Wa;kb=M.stride;M.stride=sb;Na=M.type;M.type=rb;Zb=M.w;M.w=Pa;Qa=M.x;M.x=yd;tb=M.y;M.y=Ra;ub=M.z;M.z=Jb;Sa=u.call(this,r,f,b);mb=!1;gc=null;zc=0;uc=!1;jc=bb=0;Oa=1;Xa=0;Nd=5126;sc=Ub=Za=zb=0;L(Sa)?(mb=!0,gc=v.createStream(34962,Sa),Nd=gc.dtype):(gc=v.getBuffer(Sa))?
Nd=gc.dtype:"constant"in Sa?(Oa=2,"number"===typeof Sa.constant?(Za=Sa.constant,Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?Sa.constant[3]:0)):(gc=L(Sa.buffer)?v.createStream(34962,Sa.buffer):v.getBuffer(Sa.buffer),Nd="type"in Sa?ge[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,zc=Sa.divisor|0);Vb=O.buffer;O.buffer=gc;Pb=O.divisor;O.divisor=zc;Kc=O.normalized;
O.normalized=uc;Qb=O.offset;O.offset=bb;ce=O.size;O.size=jc;Ec=O.state;O.state=Oa;ze=O.stride;O.stride=Xa;Mc=O.type;O.type=Nd;Wc=O.w;O.w=zb;ie=O.x;O.x=Za;nc=O.y;O.y=Ub;vc=O.z;O.z=sc;hc=ha.call(this,r,f,b);db=!1;rc=null;Sb=0;Wb=!1;ic=dc=0;xc=1;Ac=0;bd=5126;Xc=Rc=Qc=Pc=0;L(hc)?(db=!0,rc=v.createStream(34962,hc),bd=rc.dtype):(rc=v.getBuffer(hc))?bd=rc.dtype:"constant"in hc?(xc=2,"number"===typeof hc.constant?(Qc=hc.constant,Rc=Xc=Pc=0):(Qc=0<hc.constant.length?hc.constant[0]:0,Rc=1<hc.constant.length?
hc.constant[1]:0,Xc=2<hc.constant.length?hc.constant[2]:0,Pc=3<hc.constant.length?hc.constant[3]:0)):(rc=L(hc.buffer)?v.createStream(34962,hc.buffer):v.getBuffer(hc.buffer),bd="type"in hc?ge[hc.type]:rc.dtype,Wb=!!hc.normalized,ic=hc.size|0,dc=hc.offset|0,Ac=hc.stride|0,Sb=hc.divisor|0);kd=d.buffer;d.buffer=rc;cd=d.divisor;d.divisor=Sb;Yc=d.normalized;d.normalized=Wb;kc=d.offset;d.offset=dc;cc=d.size;d.size=ic;Zc=d.state;d.state=xc;Tc=d.stride;d.stride=Ac;dd=d.type;d.type=bd;yc=d.w;d.w=Pc;gd=d.x;
d.x=Qc;pe=d.y;d.y=Rc;xe=d.z;d.z=Xc;Bd=c.call(this,r,f,b);hd=!1;Qf=null;Od=0;Yd=!1;Pd=ke=0;Kd=1;Id=0;nd=5126;id=qd=ud=Sc=0;L(Bd)?(hd=!0,Qf=v.createStream(34962,Bd),nd=Qf.dtype):(Qf=v.getBuffer(Bd))?nd=Qf.dtype:"constant"in Bd?(Kd=2,"number"===typeof Bd.constant?(ud=Bd.constant,qd=id=Sc=0):(ud=0<Bd.constant.length?Bd.constant[0]:0,qd=1<Bd.constant.length?Bd.constant[1]:0,id=2<Bd.constant.length?Bd.constant[2]:0,Sc=3<Bd.constant.length?Bd.constant[3]:0)):(Qf=L(Bd.buffer)?v.createStream(34962,Bd.buffer):
v.getBuffer(Bd.buffer),nd="type"in Bd?ge[Bd.type]:Qf.dtype,Yd=!!Bd.normalized,Pd=Bd.size|0,ke=Bd.offset|0,Id=Bd.stride|0,Od=Bd.divisor|0);wd=T.buffer;T.buffer=Qf;Dd=T.divisor;T.divisor=Od;Fd=T.normalized;T.normalized=Yd;qe=T.offset;T.offset=ke;le=T.size;T.size=Pd;Ne=T.state;T.state=Kd;me=T.stride;T.stride=Id;je=T.type;T.type=nd;he=T.w;T.w=Sc;ue=T.x;T.x=ud;ee=T.y;T.y=qd;ne=T.z;T.z=id;Nc=q.call(this,r,f,b);fd=!1;ve=null;re=0;Ld=!1;Rd=Qd=0;Sd=1;oe=0;ye=5126;Se=Re=se=Be=0;L(Nc)?(fd=!0,ve=v.createStream(34962,
Nc),ye=ve.dtype):(ve=v.getBuffer(Nc))?ye=ve.dtype:"constant"in Nc?(Sd=2,"number"===typeof Nc.constant?(se=Nc.constant,Re=Se=Be=0):(se=0<Nc.constant.length?Nc.constant[0]:0,Re=1<Nc.constant.length?Nc.constant[1]:0,Se=2<Nc.constant.length?Nc.constant[2]:0,Be=3<Nc.constant.length?Nc.constant[3]:0)):(ve=L(Nc.buffer)?v.createStream(34962,Nc.buffer):v.getBuffer(Nc.buffer),ye="type"in Nc?ge[Nc.type]:ve.dtype,Ld=!!Nc.normalized,Rd=Nc.size|0,Qd=Nc.offset|0,oe=Nc.stride|0,re=Nc.divisor|0);Oe=Y.buffer;Y.buffer=
ve;we=Y.divisor;Y.divisor=re;Ge=Y.normalized;Y.normalized=Ld;Ie=Y.offset;Y.offset=Qd;Je=Y.size;Y.size=Rd;Ke=Y.state;Y.state=Sd;He=Y.stride;Y.stride=oe;Md=Y.type;Y.type=ye;Zd=Y.w;Y.w=Be;de=Y.x;Y.x=se;fe=Y.y;Y.y=Re;Le=Y.z;Y.z=Se;Jd=h.call(this,r,f,b);Td=!1;De=null;Me=0;bf=!1;Te=af=0;Pe=1;$e=0;Xe=5126;ae=Ud=Ve=Ue=0;L(Jd)?(Td=!0,De=v.createStream(34962,Jd),Xe=De.dtype):(De=v.getBuffer(Jd))?Xe=De.dtype:"constant"in Jd?(Pe=2,"number"===typeof Jd.constant?(Ve=Jd.constant,Ud=ae=Ue=0):(Ve=0<Jd.constant.length?
Jd.constant[0]:0,Ud=1<Jd.constant.length?Jd.constant[1]:0,ae=2<Jd.constant.length?Jd.constant[2]:0,Ue=3<Jd.constant.length?Jd.constant[3]:0)):(De=L(Jd.buffer)?v.createStream(34962,Jd.buffer):v.getBuffer(Jd.buffer),Xe="type"in Jd?ge[Jd.type]:De.dtype,bf=!!Jd.normalized,Te=Jd.size|0,af=Jd.offset|0,$e=Jd.stride|0,Me=Jd.divisor|0);We=w.buffer;w.buffer=De;hf=w.divisor;w.divisor=Me;mf=w.normalized;w.normalized=bf;ef=w.offset;w.offset=af;jf=w.size;w.size=Te;kf=w.state;w.state=Pe;lf=w.stride;w.stride=$e;
rf=w.type;w.type=Xe;of=w.w;w.w=Ue;sf=w.x;w.x=Ve;Bf=w.y;w.y=Ud;Cf=w.z;w.z=ae;Qe=V.call(this,r,f,b);Ee=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;L(Qe)?(Ee=!0,pf=v.createStream(34962,Qe),wf=pf.dtype):(pf=v.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(pf=
L(Qe.buffer)?v.createStream(34962,Qe.buffer):v.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:pf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=E.buffer;E.buffer=pf;Jf=E.divisor;E.divisor=qf;Kf=E.normalized;E.normalized=Df;Lf=E.offset;E.offset=Gf;tf=E.size;E.size=Af;Rf=E.state;E.state=Ef;Hf=E.stride;E.stride=Ff;uf=E.type;E.type=wf;dg=E.w;E.w=xf;Sf=E.x;E.x=vf;Tf=E.y;E.y=yf;qg=E.z;E.z=zf;ff=D.call(this,r,f,b);cf=!1;Mf=null;Nf=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;
Zf=Yf=Xf=Uf=0;L(ff)?(cf=!0,Mf=v.createStream(34962,ff),Wf=Mf.dtype):(Mf=v.getBuffer(ff))?Wf=Mf.dtype:"constant"in ff?(hg=2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Mf=L(ff.buffer)?v.createStream(34962,ff.buffer):v.getBuffer(ff.buffer),Wf="type"in ff?ge[ff.type]:Mf.dtype,eg=!!ff.normalized,gg=ff.size|0,fg=ff.offset|
0,ig=ff.stride|0,Nf=ff.divisor|0);jg=e.buffer;e.buffer=Mf;rg=e.divisor;e.divisor=Nf;sg=e.normalized;e.normalized=eg;tg=e.offset;e.offset=fg;ug=e.size;e.size=gg;vg=e.state;e.state=hg;wg=e.stride;e.stride=ig;xg=e.type;e.type=Wf;yg=e.w;e.w=Uf;zg=e.x;e.x=Xf;Ag=e.y;e.y=Yf;Bg=e.z;e.z=Zf;gf=N.call(this,r,f,b);df=!1;Of=null;Pf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;L(gf)?(df=!0,Of=v.createStream(34962,gf),$f=Of.dtype):(Of=v.getBuffer(gf))?$f=Of.dtype:"constant"in gf?(ng=2,"number"===typeof gf.constant?
(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Of=L(gf.buffer)?v.createStream(34962,gf.buffer):v.getBuffer(gf.buffer),$f="type"in gf?ge[gf.type]:Of.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Pf=gf.divisor|0);pg=a.buffer;a.buffer=Of;Cg=a.divisor;a.divisor=Pf;Dg=a.normalized;a.normalized=kg;Eg=a.offset;a.offset=lg;Fg=a.size;a.size=
mg;Gg=a.state;a.state=ng;Hg=a.stride;a.stride=og;Ig=a.type;a.type=$f;Jg=a.w;a.w=Vf;Kg=a.x;a.x=ag;Lg=a.y;a.y=bg;Mg=a.z;a.z=cg;Ng=Da.vert;Da.vert=59;Og=Da.frag;Da.frag=58;S.dirty=!0;k(r,f,b);r.viewportWidth=A;r.viewportHeight=F;Ed[0]=P;Ed[1]=z;Ed[2]=Q;Ed[3]=R;Ga[0]=ga;Ga[1]=J;Ga[2]=ia;Ga[3]=I;sa.blend_enable=t;Ja[0]=Xb;Ja[1]=y;Ja[2]=ya;Ja[3]=ma;sa.depth_enable=C;Gd[0]=wa;Gd[1]=ra;Gd[2]=G;Gd[3]=Ea;sa.scissor_enable=za;sa.stencil_enable=U;ea&&(ba.cpuTime+=performance.now()-la);Ta&&Fa.destroyStream(da);
va.elements=qa;va.offset=Ca;va.count=oa;va.primitive=ka;pa[45]=na;pa[48]=Aa;pa[10]=Cc;pa[46]=Ba;pa[47]=Ha;pa[34]=lb;pa[6]=fa;pa[7]=$b;pa[8]=Vd;pa[9]=ob;qb&&v.destroyStream(Ka);M.buffer=Db;M.divisor=Ma;M.normalized=zd;M.offset=Ya;M.size=Kb;M.state=Lb;M.stride=kb;M.type=Na;M.w=Zb;M.x=Qa;M.y=tb;M.z=ub;mb&&v.destroyStream(gc);O.buffer=Vb;O.divisor=Pb;O.normalized=Kc;O.offset=Qb;O.size=ce;O.state=Ec;O.stride=ze;O.type=Mc;O.w=Wc;O.x=ie;O.y=nc;O.z=vc;db&&v.destroyStream(rc);d.buffer=kd;d.divisor=cd;d.normalized=
Yc;d.offset=kc;d.size=cc;d.state=Zc;d.stride=Tc;d.type=dd;d.w=yc;d.x=gd;d.y=pe;d.z=xe;hd&&v.destroyStream(Qf);T.buffer=wd;T.divisor=Dd;T.normalized=Fd;T.offset=qe;T.size=le;T.state=Ne;T.stride=me;T.type=je;T.w=he;T.x=ue;T.y=ee;T.z=ne;fd&&v.destroyStream(ve);Y.buffer=Oe;Y.divisor=we;Y.normalized=Ge;Y.offset=Ie;Y.size=Je;Y.state=Ke;Y.stride=He;Y.type=Md;Y.w=Zd;Y.x=de;Y.y=fe;Y.z=Le;Td&&v.destroyStream(De);w.buffer=We;w.divisor=hf;w.normalized=mf;w.offset=ef;w.size=jf;w.state=kf;w.stride=lf;w.type=rf;
w.w=of;w.x=sf;w.y=Bf;w.z=Cf;Ee&&v.destroyStream(pf);E.buffer=If;E.divisor=Jf;E.normalized=Kf;E.offset=Lf;E.size=tf;E.state=Rf;E.stride=Hf;E.type=uf;E.w=dg;E.x=Sf;E.y=Tf;E.z=qg;cf&&v.destroyStream(Mf);e.buffer=jg;e.divisor=rg;e.normalized=sg;e.offset=tg;e.size=ug;e.state=vg;e.stride=wg;e.type=xg;e.w=yg;e.x=zg;e.y=Ag;e.z=Bg;df&&v.destroyStream(Of);a.buffer=pg;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Da.vert=Ng;Da.frag=Og;S.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Cc,W,da){var R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,Z,Gb,ia,L,sa,Da,pa,wa,Ga,ma,X;R=b.attributes;P=b.buffer;z=b.context;l=b.current;K=b.draw;J=b.elements;Ea=b.extensions;oa=b.framebuffer;p=b.gl;F=b.isBufferArgs;ca=b.next;Q=b.shader;
na=b.uniforms;ra=b.vao;Aa=ca.blend_color;za=l.blend_color;ga=ca.blend_equation;Ca=l.blend_equation;la=ca.blend_func;qa=l.blend_func;xa=ca.colorMask;ya=l.colorMask;ja=ca.depth_range;Xb=l.depth_range;Ta=ca.polygonOffset_offset;v=l.polygonOffset_offset;r=ca.sample_coverage;S=l.sample_coverage;va=ca.scissor_box;Fa=l.scissor_box;Z=ca.stencil_func;Gb=l.stencil_func;ia=ca.stencil_opBack;L=l.stencil_opBack;sa=ca.stencil_opFront;Da=l.stencil_opFront;pa=ca.viewport;wa=l.viewport;Ga={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ma={offset:4,stride:8};X={offset:0,stride:8};return{batch:function(f,b){var k,n,g,x,Q,pa,I,t,y,C,B,m,H;k=oa.next;k!==oa.cur&&(k?p.bindFramebuffer(36160,k.framebuffer):p.bindFramebuffer(36160,null),oa.cur=k);if(l.dirty){var G,U,la,aa,na,Aa,fa,Oa,Ce,Ye,Ze,Hd,Ae,te,$d,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec;G=ca.dither;G!==l.dither&&(G?p.enable(3024):p.disable(3024),l.dither=G);U=ga[0];la=ga[1];if(U!==Ca[0]||
la!==Ca[1])p.blendEquationSeparate(U,la),Ca[0]=U,Ca[1]=la;aa=ca.depth_func;aa!==l.depth_func&&(p.depthFunc(aa),l.depth_func=aa);na=ja[0];Aa=ja[1];if(na!==Xb[0]||Aa!==Xb[1])p.depthRange(na,Aa),Xb[0]=na,Xb[1]=Aa;fa=ca.depth_mask;fa!==l.depth_mask&&(p.depthMask(fa),l.depth_mask=fa);Oa=xa[0];Ce=xa[1];Ye=xa[2];Ze=xa[3];if(Oa!==ya[0]||Ce!==ya[1]||Ye!==ya[2]||Ze!==ya[3])p.colorMask(Oa,Ce,Ye,Ze),ya[0]=Oa,ya[1]=Ce,ya[2]=Ye,ya[3]=Ze;Hd=ca.cull_enable;Hd!==l.cull_enable&&(Hd?p.enable(2884):p.disable(2884),l.cull_enable=
Hd);Ae=ca.cull_face;Ae!==l.cull_face&&(p.cullFace(Ae),l.cull_face=Ae);te=ca.frontFace;te!==l.frontFace&&(p.frontFace(te),l.frontFace=te);$d=ca.lineWidth;$d!==l.lineWidth&&(p.lineWidth($d),l.lineWidth=$d);Wd=ca.polygonOffset_enable;Wd!==l.polygonOffset_enable&&(Wd?p.enable(32823):p.disable(32823),l.polygonOffset_enable=Wd);Ad=Ta[0];ld=Ta[1];if(Ad!==v[0]||ld!==v[1])p.polygonOffset(Ad,ld),v[0]=Ad,v[1]=ld;$c=ca.sample_alpha;$c!==l.sample_alpha&&($c?p.enable(32926):p.disable(32926),l.sample_alpha=$c);
pd=ca.sample_enable;pd!==l.sample_enable&&(pd?p.enable(32928):p.disable(32928),l.sample_enable=pd);Lc=r[0];od=r[1];if(Lc!==S[0]||od!==S[1])p.sampleCoverage(Lc,od),S[0]=Lc,S[1]=od;Fc=ca.stencil_mask;Fc!==l.stencil_mask&&(p.stencilMask(Fc),l.stencil_mask=Fc);ed=Z[0];Oc=Z[1];jd=Z[2];if(ed!==Gb[0]||Oc!==Gb[1]||jd!==Gb[2])p.stencilFunc(ed,Oc,jd),Gb[0]=ed,Gb[1]=Oc,Gb[2]=jd;Ab=sa[0];Eb=sa[1];tc=sa[2];wb=sa[3];if(Ab!==Da[0]||Eb!==Da[1]||tc!==Da[2]||wb!==Da[3])p.stencilOpSeparate(Ab,Eb,tc,wb),Da[0]=Ab,Da[1]=
Eb,Da[2]=tc,Da[3]=wb;wc=ia[0];Bb=ia[1];Jc=ia[2];lc=ia[3];if(wc!==L[0]||Bb!==L[1]||Jc!==L[2]||lc!==L[3])p.stencilOpSeparate(wc,Bb,Jc,lc),L[0]=wc,L[1]=Bb,L[2]=Jc,L[3]=lc;Gc=ca.scissor_enable;Gc!==l.scissor_enable&&(Gc?p.enable(3089):p.disable(3089),l.scissor_enable=Gc);Vc=va[0];Uc=va[1];Dc=va[2];ec=va[3];if(Vc!==Fa[0]||Uc!==Fa[1]||Dc!==Fa[2]||ec!==Fa[3])p.scissor(Vc,Uc,Dc,ec),Fa[0]=Vc,Fa[1]=Uc,Fa[2]=Dc,Fa[3]=ec}n=this.viewport;g=n.x|0;x=n.y|0;Q="width"in n?n.width|0:z.framebufferWidth-g;pa="height"in
n?n.height|0:z.framebufferHeight-x;I=z.viewportWidth;z.viewportWidth=Q;t=z.viewportHeight;z.viewportHeight=pa;p.viewport(g,x,Q,pa);wa[0]=g;wa[1]=x;wa[2]=Q;wa[3]=pa;p.blendColor(0,0,0,1);za[0]=0;za[1]=0;za[2]=0;za[3]=1;p.enable(3042);l.blend_enable=!0;p.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;p.disable(2929);l.depth_enable=!1;p.disable(2960);l.stencil_enable=!1;if(y=l.profile)C=performance.now(),ba.count+=b;p.useProgram(M.program);B=Ea.angle_instanced_arrays;var Hc,oc,
pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub;ra.setVAO(null);X.buffer=this.sizeBuffer;Hc=!1;oc=null;pc=0;mc=!1;$a=fc=0;Ic=1;xb=0;cb=5126;Va=nb=ab=Mb=0;F(X)?(Hc=!0,oc=P.createStream(34962,X),cb=oc.dtype):(oc=P.getBuffer(X))?cb=oc.dtype:"constant"in X?(Ic=2,"number"===typeof X.constant?(ab=X.constant,nb=Va=Mb=0):(ab=0<X.constant.length?X.constant[0]:
0,nb=1<X.constant.length?X.constant[1]:0,Va=2<X.constant.length?X.constant[2]:0,Mb=3<X.constant.length?X.constant[3]:0)):(oc=F(X.buffer)?P.createStream(34962,X.buffer):P.getBuffer(X.buffer),cb="type"in X?Ga[X.type]:oc.dtype,mc=!!X.normalized,$a=X.size|0,fc=X.offset|0,xb=X.stride|0,pc=X.divisor|0);Cd=da.location;Hb=R[Cd];if(1===Ic){Hb.buffer||p.enableVertexAttribArray(Cd);Ib=$a||1;if(Hb.type!==cb||Hb.size!==Ib||Hb.buffer!==oc||Hb.normalized!==mc||Hb.offset!==fc||Hb.stride!==xb)p.bindBuffer(34962,oc.buffer),
p.vertexAttribPointer(Cd,Ib,cb,mc,xb,fc),Hb.type=cb,Hb.size=Ib,Hb.buffer=oc,Hb.normalized=mc,Hb.offset=fc,Hb.stride=xb;Hb.divisor!==pc&&(B.vertexAttribDivisorANGLE(Cd,pc),Hb.divisor=pc)}else if(Hb.buffer&&(p.disableVertexAttribArray(Cd),Hb.buffer=null),Hb.x!==ab||Hb.y!==nb||Hb.z!==Va||Hb.w!==Mb)p.vertexAttrib4f(Cd,ab,nb,Va,Mb),Hb.x=ab,Hb.y=nb,Hb.z=Va,Hb.w=Mb;ma.buffer=this.sizeBuffer;qc=!1;Nb=null;ib=0;Fb=!1;vb=Cb=0;gb=1;Yb=0;Ob=5126;yb=Tb=Ua=pb=0;F(ma)?(qc=!0,Nb=P.createStream(34962,ma),Ob=Nb.dtype):
(Nb=P.getBuffer(ma))?Ob=Nb.dtype:"constant"in ma?(gb=2,"number"===typeof ma.constant?(Ua=ma.constant,Tb=yb=pb=0):(Ua=0<ma.constant.length?ma.constant[0]:0,Tb=1<ma.constant.length?ma.constant[1]:0,yb=2<ma.constant.length?ma.constant[2]:0,pb=3<ma.constant.length?ma.constant[3]:0)):(Nb=F(ma.buffer)?P.createStream(34962,ma.buffer):P.getBuffer(ma.buffer),Ob="type"in ma?Ga[ma.type]:Nb.dtype,Fb=!!ma.normalized,vb=ma.size|0,Cb=ma.offset|0,Yb=ma.stride|0,ib=ma.divisor|0);bc=E.location;hb=R[bc];if(1===gb){hb.buffer||
p.enableVertexAttribArray(bc);ob=vb||1;if(hb.type!==Ob||hb.size!==ob||hb.buffer!==Nb||hb.normalized!==Fb||hb.offset!==Cb||hb.stride!==Yb)p.bindBuffer(34962,Nb.buffer),p.vertexAttribPointer(bc,ob,Ob,Fb,Yb,Cb),hb.type=Ob,hb.size=ob,hb.buffer=Nb,hb.normalized=Fb,hb.offset=Cb,hb.stride=Yb;hb.divisor!==ib&&(B.vertexAttribDivisorANGLE(bc,ib),hb.divisor=ib)}else if(hb.buffer&&(p.disableVertexAttribArray(bc),hb.buffer=null),hb.x!==Ua||hb.y!==Tb||hb.z!==yb||hb.w!==pb)p.vertexAttrib4f(bc,Ua,Tb,yb,pb),hb.x=
Ua,hb.y=Tb,hb.z=yb,hb.w=pb;Ia=this.charBuffer;qb=!1;Ka=null;eb=0;fb=!1;jb=La=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=Pa=0;F(Ia)?(qb=!0,Ka=P.createStream(34962,Ia),rb=Ka.dtype):(Ka=P.getBuffer(Ia))?rb=Ka.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(Bc=Ia.constant,Ra=Jb=Pa=0):(Bc=0<Ia.constant.length?Ia.constant[0]:0,Ra=1<Ia.constant.length?Ia.constant[1]:0,Jb=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=F(Ia.buffer)?P.createStream(34962,Ia.buffer):P.getBuffer(Ia.buffer),
rb="type"in Ia?Ga[Ia.type]:Ka.dtype,fb=!!Ia.normalized,jb=Ia.size|0,La=Ia.offset|0,sb=Ia.stride|0,eb=Ia.divisor|0);Db=V.location;Ma=R[Db];if(1===Wa){Ma.buffer||p.enableVertexAttribArray(Db);vd=jb||1;if(Ma.type!==rb||Ma.size!==vd||Ma.buffer!==Ka||Ma.normalized!==fb||Ma.offset!==La||Ma.stride!==sb)p.bindBuffer(34962,Ka.buffer),p.vertexAttribPointer(Db,vd,rb,fb,sb,La),Ma.type=rb,Ma.size=vd,Ma.buffer=Ka,Ma.normalized=fb,Ma.offset=La,Ma.stride=sb;Ma.divisor!==eb&&(B.vertexAttribDivisorANGLE(Db,eb),Ma.divisor=
eb)}else if(Ma.buffer&&(p.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Bc||Ma.y!==Ra||Ma.z!==Jb||Ma.w!==Pa)p.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Ma.x=Bc,Ma.y=Ra,Ma.z=Jb,Ma.w=Pa;Ya=this.position;Kb=!1;Lb=null;kb=0;Na=!1;Qa=Zb=0;tb=1;ub=0;Sa=5126;uc=zc=gc=mb=0;F(Ya)?(Kb=!0,Lb=P.createStream(34962,Ya),Sa=Lb.dtype):(Lb=P.getBuffer(Ya))?Sa=Lb.dtype:"constant"in Ya?(tb=2,"number"===typeof Ya.constant?(gc=Ya.constant,zc=uc=mb=0):(gc=0<Ya.constant.length?Ya.constant[0]:0,zc=1<Ya.constant.length?Ya.constant[1]:
0,uc=2<Ya.constant.length?Ya.constant[2]:0,mb=3<Ya.constant.length?Ya.constant[3]:0)):(Lb=F(Ya.buffer)?P.createStream(34962,Ya.buffer):P.getBuffer(Ya.buffer),Sa="type"in Ya?Ga[Ya.type]:Lb.dtype,Na=!!Ya.normalized,Qa=Ya.size|0,Zb=Ya.offset|0,ub=Ya.stride|0,kb=Ya.divisor|0);bb=ta.location;jc=R[bb];if(1===tb){jc.buffer||p.enableVertexAttribArray(bb);ad=Qa||2;if(jc.type!==Sa||jc.size!==ad||jc.buffer!==Lb||jc.normalized!==Na||jc.offset!==Zb||jc.stride!==ub)p.bindBuffer(34962,Lb.buffer),p.vertexAttribPointer(bb,
ad,Sa,Na,ub,Zb),jc.type=Sa,jc.size=ad,jc.buffer=Lb,jc.normalized=Na,jc.offset=Zb,jc.stride=ub;jc.divisor!==kb&&(B.vertexAttribDivisorANGLE(bb,kb),jc.divisor=kb)}else if(jc.buffer&&(p.disableVertexAttribArray(bb),jc.buffer=null),jc.x!==gc||jc.y!==zc||jc.z!==uc||jc.w!==mb)p.vertexAttrib4f(bb,gc,zc,uc,mb),jc.x=gc,jc.y=zc,jc.z=uc,jc.w=mb;Xa=this.viewportArray;p.uniform4f(W.location,Xa[0],Xa[1],Xa[2],Xa[3]);md=this.scale;p.uniform2f(ka.location,md[0],md[1]);zb=this.translate;p.uniform2f(Cc.location,zb[0],
zb[1]);(Za=K.elements)?p.bindBuffer(34963,Za.buffer.buffer):ra.currentVAO&&(Za=J.getElements(ra.currentVAO.elements))&&p.bindBuffer(34963,Za.buffer.buffer);Ub=K.instances;for(m=0;m<b;++m){H=f[m];var sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd,xd;sc=u.call(this,z,H,m);m&&Vb===sc||(Vb=sc,p.uniform1f(D.location,sc));Pb=O.call(this,z,H,m);m&&Kc===Pb||(Kc=Pb,p.uniform1f(N.location,Pb));Qb=H.align;m&&Xd===Qb||(Xd=Qb,p.uniform1f(T.location,
Qb));Ec=H.baseline;m&&rd===Ec||(rd=Ec,p.uniform1f(w.location,Ec));Mc=H.color;Wc=Mc[0];nc=Mc[1];hc=Mc[2];rc=Mc[3];m&&td===Wc&&vc===nc&&db===hc&&Sb===rc||(td=Wc,vc=nc,db=hc,Sb=rc,p.uniform4f(e.location,Wc,nc,hc,rc));Wb=ha.call(this,z,H,m);dc=Wb[0];xc=Wb[1];m&&ic===dc&&Ac===xc||(ic=dc,Ac=xc,p.uniform2f(h.location,dc,xc));bd=d.call(this,z,H,m);Pc=bd[0];Rc=bd[1];m&&Qc===Pc&&Xc===Rc||(Qc=Pc,Xc=Rc,p.uniform2f(Y.location,Pc,Rc));kd=H.positionOffset;cd=kd[0];kc=kd[1];m&&Yc===cd&&cc===kc||(Yc=cd,cc=kc,p.uniform2f(A.location,
cd,kc));Zc=H.opacity;m&&Tc===Zc||(Tc=Zc,p.uniform1f(a.location,Zc));(dd=c.call(this,z,H,m))&&"framebuffer"===dd._reglType&&(dd=dd.color[0]);yc=dd._texture;p.uniform1i(q.location,yc.bind());gd=H.offset;if(xd=H.count)0<Ub?Za?B.drawElementsInstancedANGLE(0,xd,Za.type,gd<<(Za.type-5121>>1),Ub):B.drawArraysInstancedANGLE(0,gd,xd,Ub):0>Ub&&(Za?p.drawElements(0,xd,Za.type,gd<<(Za.type-5121>>1)):p.drawArrays(0,gd,xd)),yc.unbind()}Hc&&P.destroyStream(oc);qc&&P.destroyStream(Nb);qb&&P.destroyStream(Ka);Kb&&
P.destroyStream(Lb);l.dirty=!0;ra.setVAO(null);z.viewportWidth=I;z.viewportHeight=t;y&&(ba.cpuTime+=performance.now()-C)},draw:function(c){var d,b,x,Q,pa,u,t,y,C,m,B,O,G,M,U,la,ha,aa,na,Aa,fa,Oa,Ce,Ye,Ze,Hd,Ae,te,$d,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb;d=oa.next;d!==oa.cur&&(d?p.bindFramebuffer(36160,d.framebuffer):p.bindFramebuffer(36160,null),oa.cur=
d);if(l.dirty){var Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec;Wa=ca.dither;Wa!==l.dither&&(Wa?p.enable(3024):p.disable(3024),l.dither=Wa);sb=ga[0];rb=ga[1];if(sb!==Ca[0]||rb!==Ca[1])p.blendEquationSeparate(sb,rb),Ca[0]=sb,Ca[1]=rb;Pa=ca.depth_func;Pa!==l.depth_func&&(p.depthFunc(Pa),l.depth_func=Pa);Bc=ja[0];Ra=ja[1];if(Bc!==Xb[0]||Ra!==Xb[1])p.depthRange(Bc,Ra),Xb[0]=Bc,Xb[1]=Ra;Jb=ca.depth_mask;Jb!==l.depth_mask&&(p.depthMask(Jb),
l.depth_mask=Jb);Db=xa[0];Ma=xa[1];vd=xa[2];Ya=xa[3];if(Db!==ya[0]||Ma!==ya[1]||vd!==ya[2]||Ya!==ya[3])p.colorMask(Db,Ma,vd,Ya),ya[0]=Db,ya[1]=Ma,ya[2]=vd,ya[3]=Ya;Kb=ca.cull_enable;Kb!==l.cull_enable&&(Kb?p.enable(2884):p.disable(2884),l.cull_enable=Kb);Lb=ca.cull_face;Lb!==l.cull_face&&(p.cullFace(Lb),l.cull_face=Lb);kb=ca.frontFace;kb!==l.frontFace&&(p.frontFace(kb),l.frontFace=kb);Na=ca.lineWidth;Na!==l.lineWidth&&(p.lineWidth(Na),l.lineWidth=Na);Zb=ca.polygonOffset_enable;Zb!==l.polygonOffset_enable&&
(Zb?p.enable(32823):p.disable(32823),l.polygonOffset_enable=Zb);Qa=Ta[0];tb=Ta[1];if(Qa!==v[0]||tb!==v[1])p.polygonOffset(Qa,tb),v[0]=Qa,v[1]=tb;ub=ca.sample_alpha;ub!==l.sample_alpha&&(ub?p.enable(32926):p.disable(32926),l.sample_alpha=ub);Sa=ca.sample_enable;Sa!==l.sample_enable&&(Sa?p.enable(32928):p.disable(32928),l.sample_enable=Sa);mb=r[0];gc=r[1];if(mb!==S[0]||gc!==S[1])p.sampleCoverage(mb,gc),S[0]=mb,S[1]=gc;zc=ca.stencil_mask;zc!==l.stencil_mask&&(p.stencilMask(zc),l.stencil_mask=zc);uc=
Z[0];bb=Z[1];jc=Z[2];if(uc!==Gb[0]||bb!==Gb[1]||jc!==Gb[2])p.stencilFunc(uc,bb,jc),Gb[0]=uc,Gb[1]=bb,Gb[2]=jc;ad=sa[0];Xa=sa[1];md=sa[2];zb=sa[3];if(ad!==Da[0]||Xa!==Da[1]||md!==Da[2]||zb!==Da[3])p.stencilOpSeparate(ad,Xa,md,zb),Da[0]=ad,Da[1]=Xa,Da[2]=md,Da[3]=zb;Za=ia[0];Ub=ia[1];sc=ia[2];Vb=ia[3];if(Za!==L[0]||Ub!==L[1]||sc!==L[2]||Vb!==L[3])p.stencilOpSeparate(Za,Ub,sc,Vb),L[0]=Za,L[1]=Ub,L[2]=sc,L[3]=Vb;Pb=ca.scissor_enable;Pb!==l.scissor_enable&&(Pb?p.enable(3089):p.disable(3089),l.scissor_enable=
Pb);Kc=va[0];Qb=va[1];Xd=va[2];Ec=va[3];if(Kc!==Fa[0]||Qb!==Fa[1]||Xd!==Fa[2]||Ec!==Fa[3])p.scissor(Kc,Qb,Xd,Ec),Fa[0]=Kc,Fa[1]=Qb,Fa[2]=Xd,Fa[3]=Ec}b=this.viewport;x=b.x|0;Q=b.y|0;pa="width"in b?b.width|0:z.framebufferWidth-x;u="height"in b?b.height|0:z.framebufferHeight-Q;t=z.viewportWidth;z.viewportWidth=pa;y=z.viewportHeight;z.viewportHeight=u;p.viewport(x,Q,pa,u);wa[0]=x;wa[1]=Q;wa[2]=pa;wa[3]=u;p.blendColor(0,0,0,1);za[0]=0;za[1]=0;za[2]=0;za[3]=1;p.enable(3042);l.blend_enable=!0;p.blendFuncSeparate(770,
771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;p.disable(2929);l.depth_enable=!1;p.disable(2960);l.stencil_enable=!1;if(C=l.profile)m=performance.now(),ba.count++;p.useProgram(H.program);B=Ea.angle_instanced_arrays;ra.setVAO(null);X.buffer=this.sizeBuffer;O=!1;G=null;M=0;U=!1;ha=la=0;aa=1;na=0;Aa=5126;Ye=Ce=Oa=fa=0;F(X)?(O=!0,G=P.createStream(34962,X),Aa=G.dtype):(G=P.getBuffer(X))?Aa=G.dtype:"constant"in X?(aa=2,"number"===typeof X.constant?(Oa=X.constant,Ce=Ye=fa=0):(Oa=0<X.constant.length?X.constant[0]:
0,Ce=1<X.constant.length?X.constant[1]:0,Ye=2<X.constant.length?X.constant[2]:0,fa=3<X.constant.length?X.constant[3]:0)):(G=F(X.buffer)?P.createStream(34962,X.buffer):P.getBuffer(X.buffer),Aa="type"in X?Ga[X.type]:G.dtype,U=!!X.normalized,ha=X.size|0,la=X.offset|0,na=X.stride|0,M=X.divisor|0);Ze=da.location;Hd=R[Ze];if(1===aa){Hd.buffer||p.enableVertexAttribArray(Ze);Ae=ha||1;if(Hd.type!==Aa||Hd.size!==Ae||Hd.buffer!==G||Hd.normalized!==U||Hd.offset!==la||Hd.stride!==na)p.bindBuffer(34962,G.buffer),
p.vertexAttribPointer(Ze,Ae,Aa,U,na,la),Hd.type=Aa,Hd.size=Ae,Hd.buffer=G,Hd.normalized=U,Hd.offset=la,Hd.stride=na;Hd.divisor!==M&&(B.vertexAttribDivisorANGLE(Ze,M),Hd.divisor=M)}else if(Hd.buffer&&(p.disableVertexAttribArray(Ze),Hd.buffer=null),Hd.x!==Oa||Hd.y!==Ce||Hd.z!==Ye||Hd.w!==fa)p.vertexAttrib4f(Ze,Oa,Ce,Ye,fa),Hd.x=Oa,Hd.y=Ce,Hd.z=Ye,Hd.w=fa;ma.buffer=this.sizeBuffer;te=!1;$d=null;Wd=0;Ad=!1;$c=ld=0;pd=1;Lc=0;od=5126;jd=Oc=ed=Fc=0;F(ma)?(te=!0,$d=P.createStream(34962,ma),od=$d.dtype):($d=
P.getBuffer(ma))?od=$d.dtype:"constant"in ma?(pd=2,"number"===typeof ma.constant?(ed=ma.constant,Oc=jd=Fc=0):(ed=0<ma.constant.length?ma.constant[0]:0,Oc=1<ma.constant.length?ma.constant[1]:0,jd=2<ma.constant.length?ma.constant[2]:0,Fc=3<ma.constant.length?ma.constant[3]:0)):($d=F(ma.buffer)?P.createStream(34962,ma.buffer):P.getBuffer(ma.buffer),od="type"in ma?Ga[ma.type]:$d.dtype,Ad=!!ma.normalized,$c=ma.size|0,ld=ma.offset|0,Lc=ma.stride|0,Wd=ma.divisor|0);Ab=E.location;Eb=R[Ab];if(1===pd){Eb.buffer||
p.enableVertexAttribArray(Ab);tc=$c||1;if(Eb.type!==od||Eb.size!==tc||Eb.buffer!==$d||Eb.normalized!==Ad||Eb.offset!==ld||Eb.stride!==Lc)p.bindBuffer(34962,$d.buffer),p.vertexAttribPointer(Ab,tc,od,Ad,Lc,ld),Eb.type=od,Eb.size=tc,Eb.buffer=$d,Eb.normalized=Ad,Eb.offset=ld,Eb.stride=Lc;Eb.divisor!==Wd&&(B.vertexAttribDivisorANGLE(Ab,Wd),Eb.divisor=Wd)}else if(Eb.buffer&&(p.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==ed||Eb.y!==Oc||Eb.z!==jd||Eb.w!==Fc)p.vertexAttrib4f(Ab,ed,Oc,jd,Fc),Eb.x=
ed,Eb.y=Oc,Eb.z=jd,Eb.w=Fc;wb=this.charBuffer;wc=!1;Bb=null;Jc=0;lc=!1;Vc=Gc=0;Uc=1;Dc=0;ec=5126;mc=pc=oc=Hc=0;F(wb)?(wc=!0,Bb=P.createStream(34962,wb),ec=Bb.dtype):(Bb=P.getBuffer(wb))?ec=Bb.dtype:"constant"in wb?(Uc=2,"number"===typeof wb.constant?(oc=wb.constant,pc=mc=Hc=0):(oc=0<wb.constant.length?wb.constant[0]:0,pc=1<wb.constant.length?wb.constant[1]:0,mc=2<wb.constant.length?wb.constant[2]:0,Hc=3<wb.constant.length?wb.constant[3]:0)):(Bb=F(wb.buffer)?P.createStream(34962,wb.buffer):P.getBuffer(wb.buffer),
ec="type"in wb?Ga[wb.type]:Bb.dtype,lc=!!wb.normalized,Vc=wb.size|0,Gc=wb.offset|0,Dc=wb.stride|0,Jc=wb.divisor|0);fc=V.location;$a=R[fc];if(1===Uc){$a.buffer||p.enableVertexAttribArray(fc);Ic=Vc||1;if($a.type!==ec||$a.size!==Ic||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Gc||$a.stride!==Dc)p.bindBuffer(34962,Bb.buffer),p.vertexAttribPointer(fc,Ic,ec,lc,Dc,Gc),$a.type=ec,$a.size=Ic,$a.buffer=Bb,$a.normalized=lc,$a.offset=Gc,$a.stride=Dc;$a.divisor!==Jc&&(B.vertexAttribDivisorANGLE(fc,Jc),$a.divisor=
Jc)}else if($a.buffer&&(p.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Hc)p.vertexAttrib4f(fc,oc,pc,mc,Hc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Hc;xb=this.position;cb=!1;Mb=null;ab=0;nb=!1;Cd=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=ib=Nb=0;F(xb)?(cb=!0,Mb=P.createStream(34962,xb),qc=Mb.dtype):(Mb=P.getBuffer(xb))?qc=Mb.dtype:"constant"in xb?(Hb=2,"number"===typeof xb.constant?(ib=xb.constant,Fb=Cb=Nb=0):(ib=0<xb.constant.length?xb.constant[0]:0,Fb=1<xb.constant.length?xb.constant[1]:
0,Cb=2<xb.constant.length?xb.constant[2]:0,Nb=3<xb.constant.length?xb.constant[3]:0)):(Mb=F(xb.buffer)?P.createStream(34962,xb.buffer):P.getBuffer(xb.buffer),qc="type"in xb?Ga[xb.type]:Mb.dtype,nb=!!xb.normalized,Cd=xb.size|0,Va=xb.offset|0,Ib=xb.stride|0,ab=xb.divisor|0);vb=ta.location;gb=R[vb];if(1===Hb){gb.buffer||p.enableVertexAttribArray(vb);Yb=Cd||2;if(gb.type!==qc||gb.size!==Yb||gb.buffer!==Mb||gb.normalized!==nb||gb.offset!==Va||gb.stride!==Ib)p.bindBuffer(34962,Mb.buffer),p.vertexAttribPointer(vb,
Yb,qc,nb,Ib,Va),gb.type=qc,gb.size=Yb,gb.buffer=Mb,gb.normalized=nb,gb.offset=Va,gb.stride=Ib;gb.divisor!==ab&&(B.vertexAttribDivisorANGLE(vb,ab),gb.divisor=ab)}else if(gb.buffer&&(p.disableVertexAttribArray(vb),gb.buffer=null),gb.x!==ib||gb.y!==Fb||gb.z!==Cb||gb.w!==Nb)p.vertexAttrib4f(vb,ib,Fb,Cb,Nb),gb.x=ib,gb.y=Fb,gb.z=Cb,gb.w=Nb;Ob=I.call(this,z,c,0);p.uniform1f(D.location,Ob);pb=g.call(this,z,c,0);p.uniform1f(N.location,pb);p.uniform1f(T.location,c.align);p.uniform1f(w.location,c.baseline);
Ua=this.viewportArray;p.uniform4f(W.location,Ua[0],Ua[1],Ua[2],Ua[3]);Tb=c.color;p.uniform4f(e.location,Tb[0],Tb[1],Tb[2],Tb[3]);yb=k.call(this,z,c,0);p.uniform2f(h.location,yb[0],yb[1]);bc=n.call(this,z,c,0);p.uniform2f(Y.location,bc[0],bc[1]);hb=this.scale;p.uniform2f(ka.location,hb[0],hb[1]);ob=this.translate;p.uniform2f(Cc.location,ob[0],ob[1]);Ia=c.positionOffset;p.uniform2f(A.location,Ia[0],Ia[1]);p.uniform1f(a.location,c.opacity);(qb=f.call(this,z,c,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);
Ka=qb._texture;p.uniform1i(q.location,Ka.bind());(eb=K.elements)?p.bindBuffer(34963,eb.buffer.buffer):ra.currentVAO&&(eb=J.getElements(ra.currentVAO.elements))&&p.bindBuffer(34963,eb.buffer.buffer);fb=c.offset;if(La=c.count)jb=K.instances,0<jb?eb?B.drawElementsInstancedANGLE(0,La,eb.type,fb<<(eb.type-5121>>1),jb):B.drawArraysInstancedANGLE(0,fb,La,jb):0>jb&&(eb?p.drawElements(0,La,eb.type,fb<<(eb.type-5121>>1)):p.drawArrays(0,fb,La)),l.dirty=!0,ra.setVAO(null),z.viewportWidth=t,z.viewportHeight=y,
C&&(ba.cpuTime+=performance.now()-m),O&&P.destroyStream(G),te&&P.destroyStream($d),wc&&P.destroyStream(Bb),cb&&P.destroyStream(Mb),Ka.unbind()},scope:function(a,e,c){var d,f,h,b,k,p,r,v,q,n,L,ja,g,w,A,S,sa,Da,D,E,u,R,ga,I,J,ia,Xb,ya,H,wa,N,va,O,T,ra,M,Ea,za,ha,W,Y,V,da,Ta,qa,ta,Ca,xa,oa,ka,Fa,Gb,Z,Cc,sd,fa,$a,Oa,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa,md,zb,Za,
Ub,sc,Vb,Pb,Kc,Qb,Xd,Ec,rd,Mc,Wc,td,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,yc,gd;d=this.viewport;f=d.x|0;h=d.y|0;b="width"in d?d.width|0:z.framebufferWidth-f;k="height"in d?d.height|0:z.framebufferHeight-h;p=z.viewportWidth;z.viewportWidth=b;r=z.viewportHeight;z.viewportHeight=k;v=pa[0];pa[0]=f;q=pa[1];pa[1]=h;n=pa[2];pa[2]=b;L=pa[3];pa[3]=k;ja=Aa[0];Aa[0]=0;g=Aa[1];Aa[1]=0;w=Aa[2];Aa[2]=0;A=Aa[3];Aa[3]=1;S=ca.blend_enable;ca.blend_enable=!0;sa=la[0];la[0]=770;Da=
la[1];la[1]=771;D=la[2];la[2]=773;E=la[3];la[3]=1;u=ca.depth_enable;ca.depth_enable=!1;R=ca.stencil_enable;ca.stencil_enable=!1;if(ga=l.profile)I=performance.now(),ba.count++;J=a.offset;ia=K.offset;K.offset=J;Xb=a.count;ya=K.count;K.count=Xb;H=K.primitive;K.primitive=0;wa=a.align;N=na[64];na[64]=wa;va=B.call(this,z,a,c);O=na[69];na[69]=va;T=C.call(this,z,a,c);ra=na[67];na[67]=T;M=G.call(this,z,a,c);Ea=na[66];na[66]=M;za=a.baseline;ha=na[65];na[65]=za;W=U.call(this,z,a,c);Y=na[62];na[62]=W;V=a.color;
da=na[14];na[14]=V;Ta=y.call(this,z,a,c);qa=na[63];na[63]=Ta;ta=a.opacity;Ca=na[10];na[10]=ta;xa=a.positionOffset;oa=na[68];na[68]=xa;ka=this.scale;Fa=na[6];na[6]=ka;Gb=this.translate;Z=na[8];na[8]=Gb;Cc=this.viewportArray;sd=na[3];na[3]=Cc;fa=this.charBuffer;$a=!1;Oa=null;xb=0;cb=!1;ab=Mb=0;nb=1;Va=0;Cd=5126;Nb=qc=Ib=Hb=0;F(fa)?($a=!0,Oa=P.createStream(34962,fa),Cd=Oa.dtype):(Oa=P.getBuffer(fa))?Cd=Oa.dtype:"constant"in fa?(nb=2,"number"===typeof fa.constant?(Ib=fa.constant,qc=Nb=Hb=0):(Ib=0<fa.constant.length?
fa.constant[0]:0,qc=1<fa.constant.length?fa.constant[1]:0,Nb=2<fa.constant.length?fa.constant[2]:0,Hb=3<fa.constant.length?fa.constant[3]:0)):(Oa=F(fa.buffer)?P.createStream(34962,fa.buffer):P.getBuffer(fa.buffer),Cd="type"in fa?Ga[fa.type]:Oa.dtype,cb=!!fa.normalized,ab=fa.size|0,Mb=fa.offset|0,Va=fa.stride|0,xb=fa.divisor|0);ib=t.buffer;t.buffer=Oa;Fb=t.divisor;t.divisor=xb;Cb=t.normalized;t.normalized=cb;vb=t.offset;t.offset=Mb;gb=t.size;t.size=ab;Yb=t.state;t.state=nb;Ob=t.stride;t.stride=Va;
pb=t.type;t.type=Cd;Ua=t.w;t.w=Hb;Tb=t.x;t.x=Ib;yb=t.y;t.y=qc;bc=t.z;t.z=Nb;ma.buffer=this.sizeBuffer;hb=!1;ob=null;Ia=0;qb=!1;eb=Ka=0;fb=1;La=0;jb=5126;Pa=rb=sb=Wa=0;F(ma)?(hb=!0,ob=P.createStream(34962,ma),jb=ob.dtype):(ob=P.getBuffer(ma))?jb=ob.dtype:"constant"in ma?(fb=2,"number"===typeof ma.constant?(sb=ma.constant,rb=Pa=Wa=0):(sb=0<ma.constant.length?ma.constant[0]:0,rb=1<ma.constant.length?ma.constant[1]:0,Pa=2<ma.constant.length?ma.constant[2]:0,Wa=3<ma.constant.length?ma.constant[3]:0)):
(ob=F(ma.buffer)?P.createStream(34962,ma.buffer):P.getBuffer(ma.buffer),jb="type"in ma?Ga[ma.type]:ob.dtype,qb=!!ma.normalized,eb=ma.size|0,Ka=ma.offset|0,La=ma.stride|0,Ia=ma.divisor|0);Bc=m.buffer;m.buffer=ob;Ra=m.divisor;m.divisor=Ia;Jb=m.normalized;m.normalized=qb;Db=m.offset;m.offset=Ka;Ma=m.size;m.size=eb;vd=m.state;m.state=fb;Ya=m.stride;m.stride=La;Kb=m.type;m.type=jb;Lb=m.w;m.w=Wa;kb=m.x;m.x=sb;Na=m.y;m.y=rb;Zb=m.z;m.z=Pa;Qa=this.position;tb=!1;ub=null;Sa=0;mb=!1;zc=gc=0;uc=1;bb=0;jc=5126;
zb=md=Xa=ad=0;F(Qa)?(tb=!0,ub=P.createStream(34962,Qa),jc=ub.dtype):(ub=P.getBuffer(Qa))?jc=ub.dtype:"constant"in Qa?(uc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,md=zb=ad=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,md=1<Qa.constant.length?Qa.constant[1]:0,zb=2<Qa.constant.length?Qa.constant[2]:0,ad=3<Qa.constant.length?Qa.constant[3]:0)):(ub=F(Qa.buffer)?P.createStream(34962,Qa.buffer):P.getBuffer(Qa.buffer),jc="type"in Qa?Ga[Qa.type]:ub.dtype,mb=!!Qa.normalized,zc=Qa.size|0,gc=Qa.offset|
0,bb=Qa.stride|0,Sa=Qa.divisor|0);Za=aa.buffer;aa.buffer=ub;Ub=aa.divisor;aa.divisor=Sa;sc=aa.normalized;aa.normalized=mb;Vb=aa.offset;aa.offset=gc;Pb=aa.size;aa.size=zc;Kc=aa.state;aa.state=uc;Qb=aa.stride;aa.stride=bb;Xd=aa.type;aa.type=jc;Ec=aa.w;aa.w=ad;rd=aa.x;aa.x=Xa;Mc=aa.y;aa.y=md;Wc=aa.z;aa.z=zb;X.buffer=this.sizeBuffer;td=!1;nc=null;vc=0;hc=!1;rc=db=0;Sb=1;Wb=0;dc=5126;bd=Ac=xc=ic=0;F(X)?(td=!0,nc=P.createStream(34962,X),dc=nc.dtype):(nc=P.getBuffer(X))?dc=nc.dtype:"constant"in X?(Sb=2,
"number"===typeof X.constant?(xc=X.constant,Ac=bd=ic=0):(xc=0<X.constant.length?X.constant[0]:0,Ac=1<X.constant.length?X.constant[1]:0,bd=2<X.constant.length?X.constant[2]:0,ic=3<X.constant.length?X.constant[3]:0)):(nc=F(X.buffer)?P.createStream(34962,X.buffer):P.getBuffer(X.buffer),dc="type"in X?Ga[X.type]:nc.dtype,hc=!!X.normalized,rc=X.size|0,db=X.offset|0,Wb=X.stride|0,vc=X.divisor|0);Pc=x.buffer;x.buffer=nc;Qc=x.divisor;x.divisor=vc;Rc=x.normalized;x.normalized=hc;Xc=x.offset;x.offset=db;kd=
x.size;x.size=rc;cd=x.state;x.state=Sb;Yc=x.stride;x.stride=Wb;kc=x.type;x.type=dc;cc=x.w;x.w=ic;Zc=x.x;x.x=xc;Tc=x.y;x.y=Ac;dd=x.z;x.z=bd;yc=Q.vert;Q.vert=61;gd=Q.frag;Q.frag=60;l.dirty=!0;e(z,a,c);z.viewportWidth=p;z.viewportHeight=r;pa[0]=v;pa[1]=q;pa[2]=n;pa[3]=L;Aa[0]=ja;Aa[1]=g;Aa[2]=w;Aa[3]=A;ca.blend_enable=S;la[0]=sa;la[1]=Da;la[2]=D;la[3]=E;ca.depth_enable=u;ca.stencil_enable=R;ga&&(ba.cpuTime+=performance.now()-I);K.offset=ia;K.count=ya;K.primitive=H;na[64]=N;na[69]=O;na[67]=ra;na[66]=
Ea;na[65]=ha;na[62]=Y;na[14]=da;na[63]=qa;na[10]=Ca;na[68]=oa;na[6]=Fa;na[8]=Z;na[3]=sd;$a&&P.destroyStream(Oa);t.buffer=ib;t.divisor=Fb;t.normalized=Cb;t.offset=vb;t.size=gb;t.state=Yb;t.stride=Ob;t.type=pb;t.w=Ua;t.x=Tb;t.y=yb;t.z=bc;hb&&P.destroyStream(ob);m.buffer=Bc;m.divisor=Ra;m.normalized=Jb;m.offset=Db;m.size=Ma;m.state=vd;m.stride=Ya;m.type=Kb;m.w=Lb;m.x=kb;m.y=Na;m.z=Zb;tb&&P.destroyStream(ub);aa.buffer=Za;aa.divisor=Ub;aa.normalized=sc;aa.offset=Vb;aa.size=Pb;aa.state=Kc;aa.stride=Qb;
aa.type=Xd;aa.w=Ec;aa.x=rd;aa.y=Mc;aa.z=Wc;td&&P.destroyStream(nc);x.buffer=Pc;x.divisor=Qc;x.normalized=Rc;x.offset=Xc;x.size=kd;x.state=cd;x.stride=Yc;x.type=kc;x.w=cc;x.x=Zc;x.y=Tc;x.z=dd;Q.vert=yc;Q.frag=gd;l.dirty=!0}}},$2:function(b,ba,H){var I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N;I=b.attributes;g=b.current;k=b.framebuffer;n=b.gl;f=b.next;B=b.vao;C=f.blend_color;G=g.blend_color;U=f.blend_equation;y=g.blend_equation;t=f.blend_func;m=g.blend_func;aa=f.colorMask;x=g.colorMask;
M=f.depth_range;u=g.depth_range;O=f.polygonOffset_offset;ha=g.polygonOffset_offset;d=f.sample_coverage;c=g.sample_coverage;T=f.scissor_box;q=g.scissor_box;Y=f.stencil_func;h=g.stencil_func;w=f.stencil_opBack;V=g.stencil_opBack;E=f.stencil_opFront;D=g.stencil_opFront;e=f.viewport;N=g.viewport;return{poll:function(){var a,b,A,I,B,H,da,R,P,z,l,K,J,Ea,ba,p,F,ca,Q,na,ra,Aa;g.dirty=!1;b=f.blend_enable;A=f.cull_enable;I=f.depth_enable;B=f.dither;H=f.polygonOffset_enable;da=f.sample_alpha;R=f.sample_enable;
P=f.scissor_enable;z=f.stencil_enable;l=f.cull_face;K=g.cull_face;J=f.depth_func;Ea=g.depth_func;ba=f.depth_mask;p=g.depth_mask;F=f.frontFace;ca=g.frontFace;Q=f.lineWidth;na=g.lineWidth;ra=f.stencil_mask;Aa=g.stencil_mask;a=k.next;a!==k.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),k.cur=a);b!==g.blend_enable&&(b?n.enable(3042):n.disable(3042),g.blend_enable=b);A!==g.cull_enable&&(A?n.enable(2884):n.disable(2884),g.cull_enable=A);I!==g.depth_enable&&(I?n.enable(2929):
n.disable(2929),g.depth_enable=I);B!==g.dither&&(B?n.enable(3024):n.disable(3024),g.dither=B);H!==g.polygonOffset_enable&&(H?n.enable(32823):n.disable(32823),g.polygonOffset_enable=H);da!==g.sample_alpha&&(da?n.enable(32926):n.disable(32926),g.sample_alpha=da);R!==g.sample_enable&&(R?n.enable(32928):n.disable(32928),g.sample_enable=R);P!==g.scissor_enable&&(P?n.enable(3089):n.disable(3089),g.scissor_enable=P);z!==g.stencil_enable&&(z?n.enable(2960):n.disable(2960),g.stencil_enable=z);if(C[0]!==G[0]||
C[1]!==G[1]||C[2]!==G[2]||C[3]!==G[3])n.blendColor(C[0],C[1],C[2],C[3]),G[0]=C[0],G[1]=C[1],G[2]=C[2],G[3]=C[3];if(U[0]!==y[0]||U[1]!==y[1])n.blendEquationSeparate(U[0],U[1]),y[0]=U[0],y[1]=U[1];if(t[0]!==m[0]||t[1]!==m[1]||t[2]!==m[2]||t[3]!==m[3])n.blendFuncSeparate(t[0],t[1],t[2],t[3]),m[0]=t[0],m[1]=t[1],m[2]=t[2],m[3]=t[3];if(aa[0]!==x[0]||aa[1]!==x[1]||aa[2]!==x[2]||aa[3]!==x[3])n.colorMask(aa[0],aa[1],aa[2],aa[3]),x[0]=aa[0],x[1]=aa[1],x[2]=aa[2],x[3]=aa[3];l!==K&&(n.cullFace(l),g.cull_face=
l);J!==Ea&&(n.depthFunc(J),g.depth_func=J);ba!==p&&(n.depthMask(ba),g.depth_mask=ba);if(M[0]!==u[0]||M[1]!==u[1])n.depthRange(M[0],M[1]),u[0]=M[0],u[1]=M[1];F!==ca&&(n.frontFace(F),g.frontFace=F);Q!==na&&(n.lineWidth(Q),g.lineWidth=Q);if(O[0]!==ha[0]||O[1]!==ha[1])n.polygonOffset(O[0],O[1]),ha[0]=O[0],ha[1]=O[1];if(d[0]!==c[0]||d[1]!==c[1])n.sampleCoverage(d[0],d[1]),c[0]=d[0],c[1]=d[1];if(T[0]!==q[0]||T[1]!==q[1]||T[2]!==q[2]||T[3]!==q[3])n.scissor(T[0],T[1],T[2],T[3]),q[0]=T[0],q[1]=T[1],q[2]=T[2],
q[3]=T[3];if(Y[0]!==h[0]||Y[1]!==h[1]||Y[2]!==h[2])n.stencilFunc(Y[0],Y[1],Y[2]),h[0]=Y[0],h[1]=Y[1],h[2]=Y[2];ra!==Aa&&(n.stencilMask(ra),g.stencil_mask=ra);if(w[0]!==V[0]||w[1]!==V[1]||w[2]!==V[2]||w[3]!==V[3])n.stencilOpSeparate(w[0],w[1],w[2],w[3]),V[0]=w[0],V[1]=w[1],V[2]=w[2],V[3]=w[3];if(E[0]!==D[0]||E[1]!==D[1]||E[2]!==D[2]||E[3]!==D[3])n.stencilOpSeparate(E[0],E[1],E[2],E[3]),D[0]=E[0],D[1]=E[1],D[2]=E[2],D[3]=E[3];if(e[0]!==N[0]||e[1]!==N[1]||e[2]!==N[2]||e[3]!==N[3])n.viewport(e[0],e[1],
e[2],e[3]),N[0]=e[0],N[1]=e[1],N[2]=e[2],N[3]=e[3]},refresh:function(){var a,b,A,H,ba,W,da,R,P,z,l,K,J,Ea,oa,p;g.dirty=!1;b=f.blend_enable;A=f.cull_enable;H=f.depth_enable;ba=f.dither;W=f.polygonOffset_enable;da=f.sample_alpha;R=f.sample_enable;P=f.scissor_enable;z=f.stencil_enable;l=f.cull_face;K=f.depth_func;J=f.depth_mask;Ea=f.frontFace;oa=f.lineWidth;p=f.stencil_mask;(a=k.next)?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null);k.cur=a;a=I[0];a.buffer?(n.enableVertexAttribArray(0),
n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(0),n.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=I[1];a.buffer?(n.enableVertexAttribArray(1),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(1),n.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=I[2];a.buffer?(n.enableVertexAttribArray(2),n.bindBuffer(34962,a.buffer.buffer),
n.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(2),n.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=I[3];a.buffer?(n.enableVertexAttribArray(3),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(3),n.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=I[4];a.buffer?(n.enableVertexAttribArray(4),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(4,a.size,
a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(4),n.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=I[5];a.buffer?(n.enableVertexAttribArray(5),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(5),n.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=I[6];a.buffer?(n.enableVertexAttribArray(6),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):
(n.disableVertexAttribArray(6),n.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=I[7];a.buffer?(n.enableVertexAttribArray(7),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(7),n.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=I[8];a.buffer?(n.enableVertexAttribArray(8),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(8),
n.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=I[9];a.buffer?(n.enableVertexAttribArray(9),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(9),n.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=I[10];a.buffer?(n.enableVertexAttribArray(10),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(10),n.vertexAttrib4f(10,a.x,a.y,
a.z,a.w),a.buffer=null);a=I[11];a.buffer?(n.enableVertexAttribArray(11),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(11),n.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=I[12];a.buffer?(n.enableVertexAttribArray(12),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(12),n.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);
a=I[13];a.buffer?(n.enableVertexAttribArray(13),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(13),n.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=I[14];a.buffer?(n.enableVertexAttribArray(14),n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(14),n.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=I[15];a.buffer?(n.enableVertexAttribArray(15),
n.bindBuffer(34962,a.buffer.buffer),n.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(n.disableVertexAttribArray(15),n.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);B.currentVAO=null;B.setVAO(B.targetVAO);b?n.enable(3042):n.disable(3042);g.blend_enable=b;A?n.enable(2884):n.disable(2884);g.cull_enable=A;H?n.enable(2929):n.disable(2929);g.depth_enable=H;ba?n.enable(3024):n.disable(3024);g.dither=ba;W?n.enable(32823):n.disable(32823);g.polygonOffset_enable=W;da?n.enable(32926):
n.disable(32926);g.sample_alpha=da;R?n.enable(32928):n.disable(32928);g.sample_enable=R;P?n.enable(3089):n.disable(3089);g.scissor_enable=P;z?n.enable(2960):n.disable(2960);g.stencil_enable=z;n.blendColor(C[0],C[1],C[2],C[3]);G[0]=C[0];G[1]=C[1];G[2]=C[2];G[3]=C[3];n.blendEquationSeparate(U[0],U[1]);y[0]=U[0];y[1]=U[1];n.blendFuncSeparate(t[0],t[1],t[2],t[3]);m[0]=t[0];m[1]=t[1];m[2]=t[2];m[3]=t[3];n.colorMask(aa[0],aa[1],aa[2],aa[3]);x[0]=aa[0];x[1]=aa[1];x[2]=aa[2];x[3]=aa[3];n.cullFace(l);g.cull_face=
l;n.depthFunc(K);g.depth_func=K;n.depthMask(J);g.depth_mask=J;n.depthRange(M[0],M[1]);u[0]=M[0];u[1]=M[1];n.frontFace(Ea);g.frontFace=Ea;n.lineWidth(oa);g.lineWidth=oa;n.polygonOffset(O[0],O[1]);ha[0]=O[0];ha[1]=O[1];n.sampleCoverage(d[0],d[1]);c[0]=d[0];c[1]=d[1];n.scissor(T[0],T[1],T[2],T[3]);q[0]=T[0];q[1]=T[1];q[2]=T[2];q[3]=T[3];n.stencilFunc(Y[0],Y[1],Y[2]);h[0]=Y[0];h[1]=Y[1];h[2]=Y[2];n.stencilMask(p);g.stencil_mask=p;n.stencilOpSeparate(w[0],w[1],w[2],w[3]);V[0]=w[0];V[1]=w[1];V[2]=w[2];
V[3]=w[3];n.stencilOpSeparate(E[0],E[1],E[2],E[3]);D[0]=E[0];D[1]=E[1];D[2]=E[2];D[3]=E[3];n.viewport(e[0],e[1],e[2],e[3]);N[0]=e[0];N[1]=e[1];N[2]=e[2];N[3]=e[3]}}},$7:function(b,ba,H,I,g,k,n,f){var B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W,da,R;B=b.context;C=b.current;G=b.framebuffer;U=b.gl;y=b.next;t=b.shader;m=b.vao;aa=y.blend_color;x=C.blend_color;M=y.blend_equation;u=C.blend_equation;O=y.blend_func;ha=C.blend_func;d=y.colorMask;c=C.colorMask;T=y.depth_range;q=C.depth_range;
Y=y.polygonOffset_offset;h=C.polygonOffset_offset;w=y.sample_coverage;V=C.sample_coverage;E=y.scissor_box;D=C.scissor_box;e=y.stencil_func;N=C.stencil_func;a=y.stencil_opBack;ta=C.stencil_opBack;A=y.stencil_opFront;ka=C.stencil_opFront;Z=y.viewport;W=C.viewport;da={};R={};return{draw:function(f){var b,l,n,E,R,oa,p,F,ca,Q;b=f.framebuffer;l=G.getFramebuffer(b);b&&!l&&ba.commandRaise(g,H);b=G.next;G.next=l;n=B.framebufferWidth;B.framebufferWidth=l?l.width:B.drawingBufferWidth;E=B.framebufferHeight;B.framebufferHeight=
l?l.height:B.drawingBufferHeight;l!==G.cur&&(l?U.bindFramebuffer(36160,l.framebuffer):U.bindFramebuffer(36160,null),G.cur=l);if(C.dirty){l=y.dither;l!==C.dither&&(l?U.enable(3024):U.disable(3024),C.dither=l);l=y.blend_enable;l!==C.blend_enable&&(l?U.enable(3042):U.disable(3042),C.blend_enable=l);l=aa[0];p=aa[1];R=aa[2];oa=aa[3];if(l!==x[0]||p!==x[1]||R!==x[2]||oa!==x[3])U.blendColor(l,p,R,oa),x[0]=l,x[1]=p,x[2]=R,x[3]=oa;l=M[0];p=M[1];if(l!==u[0]||p!==u[1])U.blendEquationSeparate(l,p),u[0]=l,u[1]=
p;l=O[0];p=O[1];R=O[2];oa=O[3];if(l!==ha[0]||p!==ha[1]||R!==ha[2]||oa!==ha[3])U.blendFuncSeparate(l,p,R,oa),ha[0]=l,ha[1]=p,ha[2]=R,ha[3]=oa;l=y.depth_enable;l!==C.depth_enable&&(l?U.enable(2929):U.disable(2929),C.depth_enable=l);l=y.depth_func;l!==C.depth_func&&(U.depthFunc(l),C.depth_func=l);l=T[0];p=T[1];if(l!==q[0]||p!==q[1])U.depthRange(l,p),q[0]=l,q[1]=p;l=y.depth_mask;l!==C.depth_mask&&(U.depthMask(l),C.depth_mask=l);l=d[0];p=d[1];R=d[2];oa=d[3];if(l!==c[0]||p!==c[1]||R!==c[2]||oa!==c[3])U.colorMask(l,
p,R,oa),c[0]=l,c[1]=p,c[2]=R,c[3]=oa;l=y.cull_enable;l!==C.cull_enable&&(l?U.enable(2884):U.disable(2884),C.cull_enable=l);l=y.cull_face;l!==C.cull_face&&(U.cullFace(l),C.cull_face=l);l=y.frontFace;l!==C.frontFace&&(U.frontFace(l),C.frontFace=l);l=y.lineWidth;l!==C.lineWidth&&(U.lineWidth(l),C.lineWidth=l);l=y.polygonOffset_enable;l!==C.polygonOffset_enable&&(l?U.enable(32823):U.disable(32823),C.polygonOffset_enable=l);l=Y[0];p=Y[1];if(l!==h[0]||p!==h[1])U.polygonOffset(l,p),h[0]=l,h[1]=p;l=y.sample_alpha;
l!==C.sample_alpha&&(l?U.enable(32926):U.disable(32926),C.sample_alpha=l);l=y.sample_enable;l!==C.sample_enable&&(l?U.enable(32928):U.disable(32928),C.sample_enable=l);l=w[0];p=w[1];if(l!==V[0]||p!==V[1])U.sampleCoverage(l,p),V[0]=l,V[1]=p;l=y.stencil_enable;l!==C.stencil_enable&&(l?U.enable(2960):U.disable(2960),C.stencil_enable=l);l=y.stencil_mask;l!==C.stencil_mask&&(U.stencilMask(l),C.stencil_mask=l);l=e[0];p=e[1];R=e[2];if(l!==N[0]||p!==N[1]||R!==N[2])U.stencilFunc(l,p,R),N[0]=l,N[1]=p,N[2]=
R;l=A[0];p=A[1];R=A[2];oa=A[3];if(l!==ka[0]||p!==ka[1]||R!==ka[2]||oa!==ka[3])U.stencilOpSeparate(l,p,R,oa),ka[0]=l,ka[1]=p,ka[2]=R,ka[3]=oa;l=a[0];p=a[1];R=a[2];oa=a[3];if(l!==ta[0]||p!==ta[1]||R!==ta[2]||oa!==ta[3])U.stencilOpSeparate(l,p,R,oa),ta[0]=l,ta[1]=p,ta[2]=R,ta[3]=oa;l=y.scissor_enable;l!==C.scissor_enable&&(l?U.enable(3089):U.disable(3089),C.scissor_enable=l)}R=B.framebufferWidth;oa=B.framebufferHeight;l=B.viewportWidth;B.viewportWidth=R;p=B.viewportHeight;B.viewportHeight=oa;U.viewport(0,
0,R,oa);W[0]=0;W[1]=0;W[2]=R;W[3]=oa;R=B.framebufferWidth;oa=B.framebufferHeight;U.scissor(0,0,R,oa);D[0]=0;D[1]=0;D[2]=R;D[3]=oa;if(R=C.profile)F=performance.now(),I.count++;oa=t.program(t.vert,t.frag,H);U.useProgram(oa.program);m.setVAO(null);ca=oa.id;(Q=da[ca])||(Q=da[ca]=k(oa));Q.call(this,f);C.dirty=!0;m.setVAO(null);G.next=b;B.framebufferWidth=n;B.framebufferHeight=E;B.viewportWidth=l;B.viewportHeight=p;R&&(I.cpuTime+=performance.now()-F)},scope:function(a,e,c){var d,f,h,b,k,q,g,w,A,x,R,D,u,
t,y;d=a.framebuffer;f=G.getFramebuffer(d);d&&!f&&ba.commandRaise(n,H);d=G.next;G.next=f;h=B.framebufferWidth;B.framebufferWidth=f?f.width:B.drawingBufferWidth;b=B.framebufferHeight;B.framebufferHeight=f?f.height:B.drawingBufferHeight;k=B.framebufferWidth;q=B.framebufferHeight;f=B.viewportWidth;B.viewportWidth=k;g=B.viewportHeight;B.viewportHeight=q;w=Z[0];Z[0]=0;A=Z[1];Z[1]=0;x=Z[2];Z[2]=k;k=Z[3];Z[3]=q;R=B.framebufferWidth;D=B.framebufferHeight;q=E[0];E[0]=0;u=E[1];E[1]=0;t=E[2];E[2]=R;R=E[3];E[3]=
D;if(D=C.profile)y=performance.now(),I.count++;C.dirty=!0;e(B,a,c);G.next=d;B.framebufferWidth=h;B.framebufferHeight=b;B.viewportWidth=f;B.viewportHeight=g;Z[0]=w;Z[1]=A;Z[2]=x;Z[3]=k;E[0]=q;E[1]=u;E[2]=t;E[3]=R;D&&(I.cpuTime+=performance.now()-y);C.dirty=!0},batch:function(b,k){var l,n,g,D,E;if(C.dirty){l=y.dither;l!==C.dither&&(l?U.enable(3024):U.disable(3024),C.dither=l);l=y.blend_enable;l!==C.blend_enable&&(l?U.enable(3042):U.disable(3042),C.blend_enable=l);l=aa[0];g=aa[1];D=aa[2];E=aa[3];if(l!==
x[0]||g!==x[1]||D!==x[2]||E!==x[3])U.blendColor(l,g,D,E),x[0]=l,x[1]=g,x[2]=D,x[3]=E;l=M[0];g=M[1];if(l!==u[0]||g!==u[1])U.blendEquationSeparate(l,g),u[0]=l,u[1]=g;l=O[0];g=O[1];D=O[2];E=O[3];if(l!==ha[0]||g!==ha[1]||D!==ha[2]||E!==ha[3])U.blendFuncSeparate(l,g,D,E),ha[0]=l,ha[1]=g,ha[2]=D,ha[3]=E;l=y.depth_enable;l!==C.depth_enable&&(l?U.enable(2929):U.disable(2929),C.depth_enable=l);l=y.depth_func;l!==C.depth_func&&(U.depthFunc(l),C.depth_func=l);l=T[0];g=T[1];if(l!==q[0]||g!==q[1])U.depthRange(l,
g),q[0]=l,q[1]=g;l=y.depth_mask;l!==C.depth_mask&&(U.depthMask(l),C.depth_mask=l);l=d[0];g=d[1];D=d[2];E=d[3];if(l!==c[0]||g!==c[1]||D!==c[2]||E!==c[3])U.colorMask(l,g,D,E),c[0]=l,c[1]=g,c[2]=D,c[3]=E;l=y.cull_enable;l!==C.cull_enable&&(l?U.enable(2884):U.disable(2884),C.cull_enable=l);l=y.cull_face;l!==C.cull_face&&(U.cullFace(l),C.cull_face=l);l=y.frontFace;l!==C.frontFace&&(U.frontFace(l),C.frontFace=l);l=y.lineWidth;l!==C.lineWidth&&(U.lineWidth(l),C.lineWidth=l);l=y.polygonOffset_enable;l!==
C.polygonOffset_enable&&(l?U.enable(32823):U.disable(32823),C.polygonOffset_enable=l);l=Y[0];g=Y[1];if(l!==h[0]||g!==h[1])U.polygonOffset(l,g),h[0]=l,h[1]=g;l=y.sample_alpha;l!==C.sample_alpha&&(l?U.enable(32926):U.disable(32926),C.sample_alpha=l);l=y.sample_enable;l!==C.sample_enable&&(l?U.enable(32928):U.disable(32928),C.sample_enable=l);l=w[0];g=w[1];if(l!==V[0]||g!==V[1])U.sampleCoverage(l,g),V[0]=l,V[1]=g;l=y.stencil_enable;l!==C.stencil_enable&&(l?U.enable(2960):U.disable(2960),C.stencil_enable=
l);l=y.stencil_mask;l!==C.stencil_mask&&(U.stencilMask(l),C.stencil_mask=l);l=e[0];g=e[1];D=e[2];if(l!==N[0]||g!==N[1]||D!==N[2])U.stencilFunc(l,g,D),N[0]=l,N[1]=g,N[2]=D;l=A[0];g=A[1];D=A[2];E=A[3];if(l!==ka[0]||g!==ka[1]||D!==ka[2]||E!==ka[3])U.stencilOpSeparate(l,g,D,E),ka[0]=l,ka[1]=g,ka[2]=D,ka[3]=E;l=a[0];g=a[1];D=a[2];E=a[3];if(l!==ta[0]||g!==ta[1]||D!==ta[2]||E!==ta[3])U.stencilOpSeparate(l,g,D,E),ta[0]=l,ta[1]=g,ta[2]=D,ta[3]=E;l=y.scissor_enable;l!==C.scissor_enable&&(l?U.enable(3089):U.disable(3089),
C.scissor_enable=l)}if(l=C.profile)n=performance.now(),I.count+=k;g=t.program(t.vert,t.frag,H);U.useProgram(g.program);m.setVAO(null);D=g.id;(E=R[D])||(E=R[D]=f(g));E.call(this,b,k);C.dirty=!0;m.setVAO(null);l&&(I.cpuTime+=performance.now()-n)}}},$5:function(b,ba,H,I,g,k){var n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W;n=b.context;f=b.current;B=b.framebuffer;C=b.gl;G=b.next;U=b.shader;y=b.vao;t=G.blend_color;m=f.blend_color;aa=G.blend_equation;x=f.blend_equation;M=G.blend_func;
u=f.blend_func;O=G.colorMask;ha=f.colorMask;d=G.depth_range;c=f.depth_range;T=G.polygonOffset_offset;q=f.polygonOffset_offset;Y=G.sample_coverage;h=f.sample_coverage;w=G.scissor_box;V=f.scissor_box;E=G.stencil_func;D=f.stencil_func;e=G.stencil_opBack;N=f.stencil_opBack;a=G.stencil_opFront;ta=f.stencil_opFront;A=G.viewport;ka=f.viewport;Z={};W={};return{draw:function(b){var k,n,z,l,K;k=B.next;k!==B.cur&&(k?C.bindFramebuffer(36160,k.framebuffer):C.bindFramebuffer(36160,null),B.cur=k);if(f.dirty){k=
G.dither;k!==f.dither&&(k?C.enable(3024):C.disable(3024),f.dither=k);k=G.blend_enable;k!==f.blend_enable&&(k?C.enable(3042):C.disable(3042),f.blend_enable=k);k=t[0];z=t[1];l=t[2];K=t[3];if(k!==m[0]||z!==m[1]||l!==m[2]||K!==m[3])C.blendColor(k,z,l,K),m[0]=k,m[1]=z,m[2]=l,m[3]=K;k=aa[0];z=aa[1];if(k!==x[0]||z!==x[1])C.blendEquationSeparate(k,z),x[0]=k,x[1]=z;k=M[0];z=M[1];l=M[2];K=M[3];if(k!==u[0]||z!==u[1]||l!==u[2]||K!==u[3])C.blendFuncSeparate(k,z,l,K),u[0]=k,u[1]=z,u[2]=l,u[3]=K;k=G.depth_enable;
k!==f.depth_enable&&(k?C.enable(2929):C.disable(2929),f.depth_enable=k);k=G.depth_func;k!==f.depth_func&&(C.depthFunc(k),f.depth_func=k);k=d[0];z=d[1];if(k!==c[0]||z!==c[1])C.depthRange(k,z),c[0]=k,c[1]=z;k=G.depth_mask;k!==f.depth_mask&&(C.depthMask(k),f.depth_mask=k);k=O[0];z=O[1];l=O[2];K=O[3];if(k!==ha[0]||z!==ha[1]||l!==ha[2]||K!==ha[3])C.colorMask(k,z,l,K),ha[0]=k,ha[1]=z,ha[2]=l,ha[3]=K;k=G.cull_enable;k!==f.cull_enable&&(k?C.enable(2884):C.disable(2884),f.cull_enable=k);k=G.cull_face;k!==
f.cull_face&&(C.cullFace(k),f.cull_face=k);k=G.frontFace;k!==f.frontFace&&(C.frontFace(k),f.frontFace=k);k=G.lineWidth;k!==f.lineWidth&&(C.lineWidth(k),f.lineWidth=k);k=G.polygonOffset_enable;k!==f.polygonOffset_enable&&(k?C.enable(32823):C.disable(32823),f.polygonOffset_enable=k);k=T[0];z=T[1];if(k!==q[0]||z!==q[1])C.polygonOffset(k,z),q[0]=k,q[1]=z;k=G.sample_alpha;k!==f.sample_alpha&&(k?C.enable(32926):C.disable(32926),f.sample_alpha=k);k=G.sample_enable;k!==f.sample_enable&&(k?C.enable(32928):
C.disable(32928),f.sample_enable=k);k=Y[0];z=Y[1];if(k!==h[0]||z!==h[1])C.sampleCoverage(k,z),h[0]=k,h[1]=z;k=G.stencil_enable;k!==f.stencil_enable&&(k?C.enable(2960):C.disable(2960),f.stencil_enable=k);k=G.stencil_mask;k!==f.stencil_mask&&(C.stencilMask(k),f.stencil_mask=k);k=E[0];z=E[1];l=E[2];if(k!==D[0]||z!==D[1]||l!==D[2])C.stencilFunc(k,z,l),D[0]=k,D[1]=z,D[2]=l;k=a[0];z=a[1];l=a[2];K=a[3];if(k!==ta[0]||z!==ta[1]||l!==ta[2]||K!==ta[3])C.stencilOpSeparate(k,z,l,K),ta[0]=k,ta[1]=z,ta[2]=l,ta[3]=
K;k=e[0];z=e[1];l=e[2];K=e[3];if(k!==N[0]||z!==N[1]||l!==N[2]||K!==N[3])C.stencilOpSeparate(k,z,l,K),N[0]=k,N[1]=z,N[2]=l,N[3]=K;k=G.scissor_enable;k!==f.scissor_enable&&(k?C.enable(3089):C.disable(3089),f.scissor_enable=k);k=w[0];z=w[1];l=w[2];K=w[3];if(k!==V[0]||z!==V[1]||l!==V[2]||K!==V[3])C.scissor(k,z,l,K),V[0]=k,V[1]=z,V[2]=l,V[3]=K;k=A[0];z=A[1];l=A[2];K=A[3];if(k!==ka[0]||z!==ka[1]||l!==ka[2]||K!==ka[3])C.viewport(k,z,l,K),ka[0]=k,ka[1]=z,ka[2]=l,ka[3]=K;f.dirty=!1}if(k=f.profile)n=performance.now(),
I.count++;z=U.program(U.vert,U.frag,H);C.useProgram(z.program);y.setVAO(null);l=z.id;(K=Z[l])||(K=Z[l]=g(z));K.call(this,b);y.setVAO(null);k&&(I.cpuTime+=performance.now()-n)},scope:function(a,e,c){var d,k;if(d=f.profile)k=performance.now(),I.count++;e(n,a,c);d&&(I.cpuTime+=performance.now()-k)},batch:function(b,n){var g,z,l,K,J;g=B.next;g!==B.cur&&(g?C.bindFramebuffer(36160,g.framebuffer):C.bindFramebuffer(36160,null),B.cur=g);if(f.dirty){g=G.dither;g!==f.dither&&(g?C.enable(3024):C.disable(3024),
f.dither=g);g=G.blend_enable;g!==f.blend_enable&&(g?C.enable(3042):C.disable(3042),f.blend_enable=g);g=t[0];l=t[1];K=t[2];J=t[3];if(g!==m[0]||l!==m[1]||K!==m[2]||J!==m[3])C.blendColor(g,l,K,J),m[0]=g,m[1]=l,m[2]=K,m[3]=J;g=aa[0];l=aa[1];if(g!==x[0]||l!==x[1])C.blendEquationSeparate(g,l),x[0]=g,x[1]=l;g=M[0];l=M[1];K=M[2];J=M[3];if(g!==u[0]||l!==u[1]||K!==u[2]||J!==u[3])C.blendFuncSeparate(g,l,K,J),u[0]=g,u[1]=l,u[2]=K,u[3]=J;g=G.depth_enable;g!==f.depth_enable&&(g?C.enable(2929):C.disable(2929),f.depth_enable=
g);g=G.depth_func;g!==f.depth_func&&(C.depthFunc(g),f.depth_func=g);g=d[0];l=d[1];if(g!==c[0]||l!==c[1])C.depthRange(g,l),c[0]=g,c[1]=l;g=G.depth_mask;g!==f.depth_mask&&(C.depthMask(g),f.depth_mask=g);g=O[0];l=O[1];K=O[2];J=O[3];if(g!==ha[0]||l!==ha[1]||K!==ha[2]||J!==ha[3])C.colorMask(g,l,K,J),ha[0]=g,ha[1]=l,ha[2]=K,ha[3]=J;g=G.cull_enable;g!==f.cull_enable&&(g?C.enable(2884):C.disable(2884),f.cull_enable=g);g=G.cull_face;g!==f.cull_face&&(C.cullFace(g),f.cull_face=g);g=G.frontFace;g!==f.frontFace&&
(C.frontFace(g),f.frontFace=g);g=G.lineWidth;g!==f.lineWidth&&(C.lineWidth(g),f.lineWidth=g);g=G.polygonOffset_enable;g!==f.polygonOffset_enable&&(g?C.enable(32823):C.disable(32823),f.polygonOffset_enable=g);g=T[0];l=T[1];if(g!==q[0]||l!==q[1])C.polygonOffset(g,l),q[0]=g,q[1]=l;g=G.sample_alpha;g!==f.sample_alpha&&(g?C.enable(32926):C.disable(32926),f.sample_alpha=g);g=G.sample_enable;g!==f.sample_enable&&(g?C.enable(32928):C.disable(32928),f.sample_enable=g);g=Y[0];l=Y[1];if(g!==h[0]||l!==h[1])C.sampleCoverage(g,
l),h[0]=g,h[1]=l;g=G.stencil_enable;g!==f.stencil_enable&&(g?C.enable(2960):C.disable(2960),f.stencil_enable=g);g=G.stencil_mask;g!==f.stencil_mask&&(C.stencilMask(g),f.stencil_mask=g);g=E[0];l=E[1];K=E[2];if(g!==D[0]||l!==D[1]||K!==D[2])C.stencilFunc(g,l,K),D[0]=g,D[1]=l,D[2]=K;g=a[0];l=a[1];K=a[2];J=a[3];if(g!==ta[0]||l!==ta[1]||K!==ta[2]||J!==ta[3])C.stencilOpSeparate(g,l,K,J),ta[0]=g,ta[1]=l,ta[2]=K,ta[3]=J;g=e[0];l=e[1];K=e[2];J=e[3];if(g!==N[0]||l!==N[1]||K!==N[2]||J!==N[3])C.stencilOpSeparate(g,
l,K,J),N[0]=g,N[1]=l,N[2]=K,N[3]=J;g=G.scissor_enable;g!==f.scissor_enable&&(g?C.enable(3089):C.disable(3089),f.scissor_enable=g);g=w[0];l=w[1];K=w[2];J=w[3];if(g!==V[0]||l!==V[1]||K!==V[2]||J!==V[3])C.scissor(g,l,K,J),V[0]=g,V[1]=l,V[2]=K,V[3]=J;g=A[0];l=A[1];K=A[2];J=A[3];if(g!==ka[0]||l!==ka[1]||K!==ka[2]||J!==ka[3])C.viewport(g,l,K,J),ka[0]=g,ka[1]=l,ka[2]=K,ka[3]=J;f.dirty=!1}if(g=f.profile)z=performance.now(),I.count+=n;l=U.program(U.vert,U.frag,H);C.useProgram(l.program);y.setVAO(null);K=l.id;
(J=W[K])||(J=W[K]=k(l));J.call(this,b,n);y.setVAO(null);g&&(I.cpuTime+=performance.now()-z)}}},"$26,color,freq,phase,projection,time,view":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N){var a,ta,A,ka,Z,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,fa,Gb,ia;a=b.attributes;ta=b.context;A=b.current;ka=b.draw;Z=b.elements;W=b.framebuffer;da=b.gl;R=b.isArrayLike;P=b.next;z=b.shader;l=b.uniforms;K=b.vao;J=P.blend_color;Ea=A.blend_color;
oa=P.blend_equation;p=A.blend_equation;F=P.blend_func;ca=A.blend_func;Q=P.colorMask;na=A.colorMask;ra=P.depth_range;Aa=A.depth_range;za=P.polygonOffset_offset;ga=A.polygonOffset_offset;Ca=P.sample_coverage;la=A.sample_coverage;qa=P.scissor_box;xa=A.scissor_box;ya=P.stencil_func;ja=A.stencil_func;Xb=P.stencil_opBack;Ta=A.stencil_opBack;v=P.stencil_opFront;r=A.stencil_opFront;S=P.viewport;va=A.viewport;Fa=new Float32Array(16);fa=new Float32Array(16);Gb=new Float32Array(16);ia=new Float32Array(16);return{draw:function(c){var d,
h,b,l;d=W.next;d!==W.cur&&(d?da.bindFramebuffer(36160,d.framebuffer):da.bindFramebuffer(36160,null),W.cur=d);if(A.dirty){var q;d=P.dither;d!==A.dither&&(d?da.enable(3024):da.disable(3024),A.dither=d);d=P.blend_enable;d!==A.blend_enable&&(d?da.enable(3042):da.disable(3042),A.blend_enable=d);d=J[0];b=J[1];l=J[2];q=J[3];if(d!==Ea[0]||b!==Ea[1]||l!==Ea[2]||q!==Ea[3])da.blendColor(d,b,l,q),Ea[0]=d,Ea[1]=b,Ea[2]=l,Ea[3]=q;d=oa[0];b=oa[1];if(d!==p[0]||b!==p[1])da.blendEquationSeparate(d,b),p[0]=d,p[1]=b;
d=F[0];b=F[1];l=F[2];q=F[3];if(d!==ca[0]||b!==ca[1]||l!==ca[2]||q!==ca[3])da.blendFuncSeparate(d,b,l,q),ca[0]=d,ca[1]=b,ca[2]=l,ca[3]=q;d=P.depth_enable;d!==A.depth_enable&&(d?da.enable(2929):da.disable(2929),A.depth_enable=d);d=P.depth_func;d!==A.depth_func&&(da.depthFunc(d),A.depth_func=d);d=ra[0];b=ra[1];if(d!==Aa[0]||b!==Aa[1])da.depthRange(d,b),Aa[0]=d,Aa[1]=b;d=P.depth_mask;d!==A.depth_mask&&(da.depthMask(d),A.depth_mask=d);d=Q[0];b=Q[1];l=Q[2];q=Q[3];if(d!==na[0]||b!==na[1]||l!==na[2]||q!==
na[3])da.colorMask(d,b,l,q),na[0]=d,na[1]=b,na[2]=l,na[3]=q;d=P.cull_enable;d!==A.cull_enable&&(d?da.enable(2884):da.disable(2884),A.cull_enable=d);d=P.cull_face;d!==A.cull_face&&(da.cullFace(d),A.cull_face=d);d=P.frontFace;d!==A.frontFace&&(da.frontFace(d),A.frontFace=d);d=P.lineWidth;d!==A.lineWidth&&(da.lineWidth(d),A.lineWidth=d);d=P.polygonOffset_enable;d!==A.polygonOffset_enable&&(d?da.enable(32823):da.disable(32823),A.polygonOffset_enable=d);d=za[0];b=za[1];if(d!==ga[0]||b!==ga[1])da.polygonOffset(d,
b),ga[0]=d,ga[1]=b;d=P.sample_alpha;d!==A.sample_alpha&&(d?da.enable(32926):da.disable(32926),A.sample_alpha=d);d=P.sample_enable;d!==A.sample_enable&&(d?da.enable(32928):da.disable(32928),A.sample_enable=d);d=Ca[0];b=Ca[1];if(d!==la[0]||b!==la[1])da.sampleCoverage(d,b),la[0]=d,la[1]=b;d=P.stencil_enable;d!==A.stencil_enable&&(d?da.enable(2960):da.disable(2960),A.stencil_enable=d);d=P.stencil_mask;d!==A.stencil_mask&&(da.stencilMask(d),A.stencil_mask=d);d=ya[0];b=ya[1];l=ya[2];if(d!==ja[0]||b!==ja[1]||
l!==ja[2])da.stencilFunc(d,b,l),ja[0]=d,ja[1]=b,ja[2]=l;d=v[0];b=v[1];l=v[2];q=v[3];if(d!==r[0]||b!==r[1]||l!==r[2]||q!==r[3])da.stencilOpSeparate(d,b,l,q),r[0]=d,r[1]=b,r[2]=l,r[3]=q;d=Xb[0];b=Xb[1];l=Xb[2];q=Xb[3];if(d!==Ta[0]||b!==Ta[1]||l!==Ta[2]||q!==Ta[3])da.stencilOpSeparate(d,b,l,q),Ta[0]=d,Ta[1]=b,Ta[2]=l,Ta[3]=q;d=P.scissor_enable;d!==A.scissor_enable&&(d?da.enable(3089):da.disable(3089),A.scissor_enable=d);d=qa[0];b=qa[1];l=qa[2];q=qa[3];if(d!==xa[0]||b!==xa[1]||l!==xa[2]||q!==xa[3])da.scissor(d,
b,l,q),xa[0]=d,xa[1]=b,xa[2]=l,xa[3]=q;d=S[0];b=S[1];l=S[2];q=S[3];if(d!==va[0]||b!==va[1]||l!==va[2]||q!==va[3])da.viewport(d,b,l,q),va[0]=d,va[1]=b,va[2]=l,va[3]=q;A.dirty=!1}if(d=A.profile)h=performance.now(),I.count++;da.useProgram(g.program);K.setVAO(null);b=V.location;l=a[b];l.buffer||da.enableVertexAttribArray(b);if(5126!==l.type||4!==l.size||l.buffer!==k||!1!==l.normalized||0!==l.offset||44!==l.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(b,4,5126,!1,44,0),l.type=5126,l.size=
4,l.buffer=k,l.normalized=!1,l.offset=0,l.stride=44;b=E.location;l=a[b];l.buffer||da.enableVertexAttribArray(b);if(5126!==l.type||4!==l.size||l.buffer!==n||!1!==l.normalized||16!==l.offset||44!==l.stride)da.bindBuffer(34962,n.buffer),da.vertexAttribPointer(b,4,5126,!1,44,16),l.type=5126,l.size=4,l.buffer=n,l.normalized=!1,l.offset=16,l.stride=44;b=w.location;l=a[b];l.buffer||da.enableVertexAttribArray(b);if(5126!==l.type||3!==l.size||l.buffer!==f||!1!==l.normalized||32!==l.offset||44!==l.stride)da.bindBuffer(34962,
f.buffer),da.vertexAttribPointer(b,3,5126,!1,44,32),l.type=5126,l.size=3,l.buffer=f,l.normalized=!1,l.offset=32,l.stride=44;b=B.call(this,ta,c,0);"number"!==typeof b&&ba.commandRaise(C,H);da.uniform1f(e.location,b);b=G.call(this,ta,c,0);R(b)&&16===b.length||ba.commandRaise(U,H);da.uniformMatrix4fv(N.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Fa[0]=b[0],Fa[1]=b[1],Fa[2]=b[2],Fa[3]=b[3],Fa[4]=b[4],Fa[5]=b[5],Fa[6]=b[6],Fa[7]=b[7],Fa[8]=b[8],Fa[9]=b[9],Fa[10]=b[10],Fa[11]=b[11],Fa[12]=
b[12],Fa[13]=b[13],Fa[14]=b[14],Fa[15]=b[15],Fa));c=y.call(this,ta,c,0);R(c)&&16===c.length||ba.commandRaise(t,H);da.uniformMatrix4fv(D.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(fa[0]=c[0],fa[1]=c[1],fa[2]=c[2],fa[3]=c[3],fa[4]=c[4],fa[5]=c[5],fa[6]=c[6],fa[7]=c[7],fa[8]=c[8],fa[9]=c[9],fa[10]=c[10],fa[11]=c[11],fa[12]=c[12],fa[13]=c[13],fa[14]=c[14],fa[15]=c[15],fa));(c=ka.elements)?da.bindBuffer(34963,c.buffer.buffer):K.currentVAO&&(c=Z.getElements(K.currentVAO.elements))&&da.bindBuffer(34963,
c.buffer.buffer);b=ka.offset;c?da.drawElements(0,1E4,c.type,b<<(c.type-5121>>1)):da.drawArrays(0,b,1E4);K.setVAO(null);d&&(I.cpuTime+=performance.now()-h)},scope:function(a,e,c){var d,b,h,p,q,r,v,g,ja,w,S,D,F,E,Q,ga,t,ia,y,Xb,ya,C,B,H,K,J,ca,N,va,P,R,T,G,ra,U,za,la,ha,Y,W,ba,V,da,Ea,Ta;if(d=A.profile)b=performance.now(),I.count++;h=ka.count;ka.count=1E4;p=ka.primitive;ka.primitive=0;q=m.call(this,ta,a,c);r=l[5];l[5]=q;v=aa.call(this,ta,a,c);q=l[3];l[3]=v;g=x.call(this,ta,a,c);v=l[4];l[4]=g;g=M.buffer;
M.buffer=f;ja=M.divisor;M.divisor=0;w=M.normalized;M.normalized=!1;S=M.offset;M.offset=32;D=M.size;M.size=0;F=M.state;M.state=1;E=M.stride;M.stride=44;Q=M.type;M.type=5126;ga=M.w;M.w=0;t=M.x;M.x=0;ia=M.y;M.y=0;y=M.z;M.z=0;Xb=u.buffer;u.buffer=k;ya=u.divisor;u.divisor=0;C=u.normalized;u.normalized=!1;B=u.offset;u.offset=0;H=u.size;u.size=0;K=u.state;u.state=1;J=u.stride;u.stride=44;ca=u.type;u.type=5126;N=u.w;u.w=0;va=u.x;u.x=0;P=u.y;u.y=0;R=u.z;u.z=0;T=O.buffer;O.buffer=n;G=O.divisor;O.divisor=0;
ra=O.normalized;O.normalized=!1;U=O.offset;O.offset=16;za=O.size;O.size=0;la=O.state;O.state=1;ha=O.stride;O.stride=44;Y=O.type;O.type=5126;W=O.w;O.w=0;ba=O.x;O.x=0;V=O.y;O.y=0;da=O.z;O.z=0;Ea=z.vert;z.vert=2;Ta=z.frag;z.frag=1;e(ta,a,c);d&&(I.cpuTime+=performance.now()-b);ka.count=h;ka.primitive=p;l[5]=r;l[3]=q;l[4]=v;M.buffer=g;M.divisor=ja;M.normalized=w;M.offset=S;M.size=D;M.state=F;M.stride=E;M.type=Q;M.w=ga;M.x=t;M.y=ia;M.z=y;u.buffer=Xb;u.divisor=ya;u.normalized=C;u.offset=B;u.size=H;u.state=
K;u.stride=J;u.type=ca;u.w=N;u.x=va;u.y=P;u.z=R;O.buffer=T;O.divisor=G;O.normalized=ra;O.offset=U;O.size=za;O.state=la;O.stride=ha;O.type=Y;O.w=W;O.x=ba;O.y=V;O.z=da;z.vert=Ea;z.frag=Ta},batch:function(b,l){var g,x,u;g=W.next;g!==W.cur&&(g?da.bindFramebuffer(36160,g.framebuffer):da.bindFramebuffer(36160,null),W.cur=g);if(A.dirty){var z,t,y;g=P.dither;g!==A.dither&&(g?da.enable(3024):da.disable(3024),A.dither=g);g=P.blend_enable;g!==A.blend_enable&&(g?da.enable(3042):da.disable(3042),A.blend_enable=
g);g=J[0];z=J[1];t=J[2];y=J[3];if(g!==Ea[0]||z!==Ea[1]||t!==Ea[2]||y!==Ea[3])da.blendColor(g,z,t,y),Ea[0]=g,Ea[1]=z,Ea[2]=t,Ea[3]=y;g=oa[0];z=oa[1];if(g!==p[0]||z!==p[1])da.blendEquationSeparate(g,z),p[0]=g,p[1]=z;g=F[0];z=F[1];t=F[2];y=F[3];if(g!==ca[0]||z!==ca[1]||t!==ca[2]||y!==ca[3])da.blendFuncSeparate(g,z,t,y),ca[0]=g,ca[1]=z,ca[2]=t,ca[3]=y;g=P.depth_enable;g!==A.depth_enable&&(g?da.enable(2929):da.disable(2929),A.depth_enable=g);g=P.depth_func;g!==A.depth_func&&(da.depthFunc(g),A.depth_func=
g);g=ra[0];z=ra[1];if(g!==Aa[0]||z!==Aa[1])da.depthRange(g,z),Aa[0]=g,Aa[1]=z;g=P.depth_mask;g!==A.depth_mask&&(da.depthMask(g),A.depth_mask=g);g=Q[0];z=Q[1];t=Q[2];y=Q[3];if(g!==na[0]||z!==na[1]||t!==na[2]||y!==na[3])da.colorMask(g,z,t,y),na[0]=g,na[1]=z,na[2]=t,na[3]=y;g=P.cull_enable;g!==A.cull_enable&&(g?da.enable(2884):da.disable(2884),A.cull_enable=g);g=P.cull_face;g!==A.cull_face&&(da.cullFace(g),A.cull_face=g);g=P.frontFace;g!==A.frontFace&&(da.frontFace(g),A.frontFace=g);g=P.lineWidth;g!==
A.lineWidth&&(da.lineWidth(g),A.lineWidth=g);g=P.polygonOffset_enable;g!==A.polygonOffset_enable&&(g?da.enable(32823):da.disable(32823),A.polygonOffset_enable=g);g=za[0];z=za[1];if(g!==ga[0]||z!==ga[1])da.polygonOffset(g,z),ga[0]=g,ga[1]=z;g=P.sample_alpha;g!==A.sample_alpha&&(g?da.enable(32926):da.disable(32926),A.sample_alpha=g);g=P.sample_enable;g!==A.sample_enable&&(g?da.enable(32928):da.disable(32928),A.sample_enable=g);g=Ca[0];z=Ca[1];if(g!==la[0]||z!==la[1])da.sampleCoverage(g,z),la[0]=g,la[1]=
z;g=P.stencil_enable;g!==A.stencil_enable&&(g?da.enable(2960):da.disable(2960),A.stencil_enable=g);g=P.stencil_mask;g!==A.stencil_mask&&(da.stencilMask(g),A.stencil_mask=g);g=ya[0];z=ya[1];t=ya[2];if(g!==ja[0]||z!==ja[1]||t!==ja[2])da.stencilFunc(g,z,t),ja[0]=g,ja[1]=z,ja[2]=t;g=v[0];z=v[1];t=v[2];y=v[3];if(g!==r[0]||z!==r[1]||t!==r[2]||y!==r[3])da.stencilOpSeparate(g,z,t,y),r[0]=g,r[1]=z,r[2]=t,r[3]=y;g=Xb[0];z=Xb[1];t=Xb[2];y=Xb[3];if(g!==Ta[0]||z!==Ta[1]||t!==Ta[2]||y!==Ta[3])da.stencilOpSeparate(g,
z,t,y),Ta[0]=g,Ta[1]=z,Ta[2]=t,Ta[3]=y;g=P.scissor_enable;g!==A.scissor_enable&&(g?da.enable(3089):da.disable(3089),A.scissor_enable=g);g=qa[0];z=qa[1];t=qa[2];y=qa[3];if(g!==xa[0]||z!==xa[1]||t!==xa[2]||y!==xa[3])da.scissor(g,z,t,y),xa[0]=g,xa[1]=z,xa[2]=t,xa[3]=y;g=S[0];z=S[1];t=S[2];y=S[3];if(g!==va[0]||z!==va[1]||t!==va[2]||y!==va[3])da.viewport(g,z,t,y),va[0]=g,va[1]=z,va[2]=t,va[3]=y;A.dirty=!1}if(g=A.profile)x=performance.now(),I.count+=l;da.useProgram(ha.program);K.setVAO(null);z=V.location;
t=a[z];t.buffer||da.enableVertexAttribArray(z);if(5126!==t.type||4!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||44!==t.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(z,4,5126,!1,44,0),t.type=5126,t.size=4,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=44;z=E.location;t=a[z];t.buffer||da.enableVertexAttribArray(z);if(5126!==t.type||4!==t.size||t.buffer!==n||!1!==t.normalized||16!==t.offset||44!==t.stride)da.bindBuffer(34962,n.buffer),da.vertexAttribPointer(z,4,5126,!1,44,16),
t.type=5126,t.size=4,t.buffer=n,t.normalized=!1,t.offset=16,t.stride=44;z=w.location;t=a[z];t.buffer||da.enableVertexAttribArray(z);if(5126!==t.type||3!==t.size||t.buffer!==f||!1!==t.normalized||32!==t.offset||44!==t.stride)da.bindBuffer(34962,f.buffer),da.vertexAttribPointer(z,3,5126,!1,44,32),t.type=5126,t.size=3,t.buffer=f,t.normalized=!1,t.offset=32,t.stride=44;z=d.call(this,ta,void 0,u);"number"!==typeof z&&ba.commandRaise(c,H);da.uniform1f(e.location,z);z=T.call(this,ta,void 0,u);R(z)&&16===
z.length||ba.commandRaise(q,H);da.uniformMatrix4fv(N.location,!1,Array.isArray(z)||z instanceof Float32Array?z:(Gb[0]=z[0],Gb[1]=z[1],Gb[2]=z[2],Gb[3]=z[3],Gb[4]=z[4],Gb[5]=z[5],Gb[6]=z[6],Gb[7]=z[7],Gb[8]=z[8],Gb[9]=z[9],Gb[10]=z[10],Gb[11]=z[11],Gb[12]=z[12],Gb[13]=z[13],Gb[14]=z[14],Gb[15]=z[15],Gb));u=Y.call(this,ta,void 0,u);R(u)&&16===u.length||ba.commandRaise(h,H);da.uniformMatrix4fv(D.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(ia[0]=u[0],ia[1]=u[1],ia[2]=u[2],ia[3]=u[3],ia[4]=
u[4],ia[5]=u[5],ia[6]=u[6],ia[7]=u[7],ia[8]=u[8],ia[9]=u[9],ia[10]=u[10],ia[11]=u[11],ia[12]=u[12],ia[13]=u[13],ia[14]=u[14],ia[15]=u[15],ia));(z=ka.elements)?da.bindBuffer(34963,z.buffer.buffer):K.currentVAO&&(z=Z.getElements(K.currentVAO.elements))&&da.bindBuffer(34963,z.buffer.buffer);t=ka.offset;for(u=0;u<l;++u)z?da.drawElements(0,1E4,z.type,t<<(z.type-5121>>1)):da.drawArrays(0,t,1E4);K.setVAO(null);g&&(I.cpuTime+=performance.now()-x)}}},"$34,atlas,normal,position,projection,uv,view":function(b,
ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W,da,R){var P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,fa,Gb,ia,L,sa,Da,pa,wa,Ga,ma,X,ua,Ja,Ba;P=b.attributes;z=b.buffer;l=b.context;K=b.current;J=b.draw;Ea=b.elements;oa=b.framebuffer;p=b.gl;F=b.isArrayLike;ca=b.isBufferArgs;Q=b.next;na=b.shader;ra=b.uniforms;Aa=b.vao;za=Q.blend_color;ga=K.blend_color;Ca=Q.blend_equation;la=K.blend_equation;qa=Q.blend_func;xa=K.blend_func;ya=Q.colorMask;
ja=K.colorMask;Xb=Q.depth_range;Ta=K.depth_range;v=Q.polygonOffset_offset;r=K.polygonOffset_offset;S=Q.sample_coverage;va=K.sample_coverage;Fa=Q.scissor_box;fa=K.scissor_box;Gb=Q.stencil_func;ia=K.stencil_func;L=Q.stencil_opBack;sa=K.stencil_opBack;Da=Q.stencil_opFront;pa=K.stencil_opFront;wa=Q.viewport;Ga=K.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X=new Float32Array(16);ua=new Float32Array(16);Ja=new Float32Array(16);Ba=new Float32Array(16);
return{draw:function(a){var e,c,d,b,h,q,w,x,D,E,u,J,N,O,T,ra,M,ha,Y,V,aa,na,ta,Ba,Ja,Oa,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb,ab,nb;e=l.view;c=g.call(this,l,a,0);l.view=c;d=oa.next;d!==oa.cur&&(d?p.bindFramebuffer(36160,d.framebuffer):p.bindFramebuffer(36160,null),oa.cur=d);if(K.dirty){var Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,
zc,uc,bb;Va=Q.dither;Va!==K.dither&&(Va?p.enable(3024):p.disable(3024),K.dither=Va);Cd=Q.blend_enable;Cd!==K.blend_enable&&(Cd?p.enable(3042):p.disable(3042),K.blend_enable=Cd);Hb=za[0];Ib=za[1];qc=za[2];Nb=za[3];if(Hb!==ga[0]||Ib!==ga[1]||qc!==ga[2]||Nb!==ga[3])p.blendColor(Hb,Ib,qc,Nb),ga[0]=Hb,ga[1]=Ib,ga[2]=qc,ga[3]=Nb;ib=Ca[0];Fb=Ca[1];if(ib!==la[0]||Fb!==la[1])p.blendEquationSeparate(ib,Fb),la[0]=ib,la[1]=Fb;Cb=qa[0];vb=qa[1];gb=qa[2];Yb=qa[3];if(Cb!==xa[0]||vb!==xa[1]||gb!==xa[2]||Yb!==xa[3])p.blendFuncSeparate(Cb,
vb,gb,Yb),xa[0]=Cb,xa[1]=vb,xa[2]=gb,xa[3]=Yb;Ob=Q.depth_enable;Ob!==K.depth_enable&&(Ob?p.enable(2929):p.disable(2929),K.depth_enable=Ob);pb=Q.depth_func;pb!==K.depth_func&&(p.depthFunc(pb),K.depth_func=pb);Ua=Xb[0];Tb=Xb[1];if(Ua!==Ta[0]||Tb!==Ta[1])p.depthRange(Ua,Tb),Ta[0]=Ua,Ta[1]=Tb;yb=Q.depth_mask;yb!==K.depth_mask&&(p.depthMask(yb),K.depth_mask=yb);bc=ya[0];hb=ya[1];ob=ya[2];Ia=ya[3];if(bc!==ja[0]||hb!==ja[1]||ob!==ja[2]||Ia!==ja[3])p.colorMask(bc,hb,ob,Ia),ja[0]=bc,ja[1]=hb,ja[2]=ob,ja[3]=
Ia;qb=Q.frontFace;qb!==K.frontFace&&(p.frontFace(qb),K.frontFace=qb);Ka=Q.lineWidth;Ka!==K.lineWidth&&(p.lineWidth(Ka),K.lineWidth=Ka);eb=Q.polygonOffset_enable;eb!==K.polygonOffset_enable&&(eb?p.enable(32823):p.disable(32823),K.polygonOffset_enable=eb);fb=v[0];La=v[1];if(fb!==r[0]||La!==r[1])p.polygonOffset(fb,La),r[0]=fb,r[1]=La;jb=Q.sample_alpha;jb!==K.sample_alpha&&(jb?p.enable(32926):p.disable(32926),K.sample_alpha=jb);Wa=Q.sample_enable;Wa!==K.sample_enable&&(Wa?p.enable(32928):p.disable(32928),
K.sample_enable=Wa);sb=S[0];rb=S[1];if(sb!==va[0]||rb!==va[1])p.sampleCoverage(sb,rb),va[0]=sb,va[1]=rb;Pa=Q.stencil_enable;Pa!==K.stencil_enable&&(Pa?p.enable(2960):p.disable(2960),K.stencil_enable=Pa);Bc=Q.stencil_mask;Bc!==K.stencil_mask&&(p.stencilMask(Bc),K.stencil_mask=Bc);Ra=Gb[0];Jb=Gb[1];Db=Gb[2];if(Ra!==ia[0]||Jb!==ia[1]||Db!==ia[2])p.stencilFunc(Ra,Jb,Db),ia[0]=Ra,ia[1]=Jb,ia[2]=Db;Ma=Da[0];vd=Da[1];Ya=Da[2];Kb=Da[3];if(Ma!==pa[0]||vd!==pa[1]||Ya!==pa[2]||Kb!==pa[3])p.stencilOpSeparate(Ma,
vd,Ya,Kb),pa[0]=Ma,pa[1]=vd,pa[2]=Ya,pa[3]=Kb;Lb=L[0];kb=L[1];Na=L[2];Zb=L[3];if(Lb!==sa[0]||kb!==sa[1]||Na!==sa[2]||Zb!==sa[3])p.stencilOpSeparate(Lb,kb,Na,Zb),sa[0]=Lb,sa[1]=kb,sa[2]=Na,sa[3]=Zb;Qa=Q.scissor_enable;Qa!==K.scissor_enable&&(Qa?p.enable(3089):p.disable(3089),K.scissor_enable=Qa);tb=Fa[0];ub=Fa[1];Sa=Fa[2];mb=Fa[3];if(tb!==fa[0]||ub!==fa[1]||Sa!==fa[2]||mb!==fa[3])p.scissor(tb,ub,Sa,mb),fa[0]=tb,fa[1]=ub,fa[2]=Sa,fa[3]=mb;gc=wa[0];zc=wa[1];uc=wa[2];bb=wa[3];if(gc!==Ga[0]||zc!==Ga[1]||
uc!==Ga[2]||bb!==Ga[3])p.viewport(gc,zc,uc,bb),Ga[0]=gc,Ga[1]=zc,Ga[2]=uc,Ga[3]=bb}p.enable(2884);K.cull_enable=!0;p.cullFace(1029);K.cull_face=1029;if(b=K.profile)h=performance.now(),I.count++;p.useProgram(k.program);Aa.setVAO(null);(q=a.position)&&("object"===typeof q||"function"===typeof q)&&(ca(q)||z.getBuffer(q)||z.getBuffer(q.buffer)||ca(q.buffer)||"constant"in q&&("number"===typeof q.constant||F(q.constant)))||ba.commandRaise(n,H);w=!1;x=null;D=!1;u=E=0;J=1;N=0;O=5126;ha=M=ra=T=0;ca(q)?(w=
!0,x=z.createStream(34962,q),O=x.dtype):(x=z.getBuffer(q))?O=x.dtype:"constant"in q?(J=2,"number"===typeof q.constant?(ra=q.constant,M=ha=T=0):(ra=0<q.constant.length?q.constant[0]:0,M=1<q.constant.length?q.constant[1]:0,ha=2<q.constant.length?q.constant[2]:0,T=3<q.constant.length?q.constant[3]:0)):(x=ca(q.buffer)?z.createStream(34962,q.buffer):z.getBuffer(q.buffer),O="type"in q?ma[q.type]:x.dtype,D=!!q.normalized,u=q.size|0,E=q.offset|0,N=q.stride|0);Y=Z.location;V=P[Y];if(1===J){if(V.buffer||p.enableVertexAttribArray(Y),
aa=u||3,V.type!==O||V.size!==aa||V.buffer!==x||V.normalized!==D||V.offset!==E||V.stride!==N)p.bindBuffer(34962,x.buffer),p.vertexAttribPointer(Y,aa,O,D,N,E),V.type=O,V.size=aa,V.buffer=x,V.normalized=D,V.offset=E,V.stride=N}else if(V.buffer&&(p.disableVertexAttribArray(Y),V.buffer=null),V.x!==ra||V.y!==M||V.z!==ha||V.w!==T)p.vertexAttrib4f(Y,ra,M,ha,T),V.x=ra,V.y=M,V.z=ha,V.w=T;(na=a.normal)&&("object"===typeof na||"function"===typeof na)&&(ca(na)||z.getBuffer(na)||z.getBuffer(na.buffer)||ca(na.buffer)||
"constant"in na&&("number"===typeof na.constant||F(na.constant)))||ba.commandRaise(f,H);ta=!1;Ba=null;Ja=!1;Wd=Oa=0;Ad=1;ld=0;$c=5126;Fc=od=Lc=pd=0;ca(na)?(ta=!0,Ba=z.createStream(34962,na),$c=Ba.dtype):(Ba=z.getBuffer(na))?$c=Ba.dtype:"constant"in na?(Ad=2,"number"===typeof na.constant?(Lc=na.constant,od=Fc=pd=0):(Lc=0<na.constant.length?na.constant[0]:0,od=1<na.constant.length?na.constant[1]:0,Fc=2<na.constant.length?na.constant[2]:0,pd=3<na.constant.length?na.constant[3]:0)):(Ba=ca(na.buffer)?
z.createStream(34962,na.buffer):z.getBuffer(na.buffer),$c="type"in na?ma[na.type]:Ba.dtype,Ja=!!na.normalized,Wd=na.size|0,Oa=na.offset|0,ld=na.stride|0);ed=ka.location;Oc=P[ed];if(1===Ad){if(Oc.buffer||p.enableVertexAttribArray(ed),jd=Wd||3,Oc.type!==$c||Oc.size!==jd||Oc.buffer!==Ba||Oc.normalized!==Ja||Oc.offset!==Oa||Oc.stride!==ld)p.bindBuffer(34962,Ba.buffer),p.vertexAttribPointer(ed,jd,$c,Ja,ld,Oa),Oc.type=$c,Oc.size=jd,Oc.buffer=Ba,Oc.normalized=Ja,Oc.offset=Oa,Oc.stride=ld}else if(Oc.buffer&&
(p.disableVertexAttribArray(ed),Oc.buffer=null),Oc.x!==Lc||Oc.y!==od||Oc.z!==Fc||Oc.w!==pd)p.vertexAttrib4f(ed,Lc,od,Fc,pd),Oc.x=Lc,Oc.y=od,Oc.z=Fc,Oc.w=pd;(Ab=a.uv)&&("object"===typeof Ab||"function"===typeof Ab)&&(ca(Ab)||z.getBuffer(Ab)||z.getBuffer(Ab.buffer)||ca(Ab.buffer)||"constant"in Ab&&("number"===typeof Ab.constant||F(Ab.constant)))||ba.commandRaise(B,H);Eb=!1;tc=null;wb=!1;Bb=wc=0;Jc=1;lc=0;Gc=5126;ec=Dc=Uc=Vc=0;ca(Ab)?(Eb=!0,tc=z.createStream(34962,Ab),Gc=tc.dtype):(tc=z.getBuffer(Ab))?
Gc=tc.dtype:"constant"in Ab?(Jc=2,"number"===typeof Ab.constant?(Uc=Ab.constant,Dc=ec=Vc=0):(Uc=0<Ab.constant.length?Ab.constant[0]:0,Dc=1<Ab.constant.length?Ab.constant[1]:0,ec=2<Ab.constant.length?Ab.constant[2]:0,Vc=3<Ab.constant.length?Ab.constant[3]:0)):(tc=ca(Ab.buffer)?z.createStream(34962,Ab.buffer):z.getBuffer(Ab.buffer),Gc="type"in Ab?ma[Ab.type]:tc.dtype,wb=!!Ab.normalized,Bb=Ab.size|0,wc=Ab.offset|0,lc=Ab.stride|0);Hc=da.location;oc=P[Hc];if(1===Jc){if(oc.buffer||p.enableVertexAttribArray(Hc),
pc=Bb||2,oc.type!==Gc||oc.size!==pc||oc.buffer!==tc||oc.normalized!==wb||oc.offset!==wc||oc.stride!==lc)p.bindBuffer(34962,tc.buffer),p.vertexAttribPointer(Hc,pc,Gc,wb,lc,wc),oc.type=Gc,oc.size=pc,oc.buffer=tc,oc.normalized=wb,oc.offset=wc,oc.stride=lc}else if(oc.buffer&&(p.disableVertexAttribArray(Hc),oc.buffer=null),oc.x!==Uc||oc.y!==Dc||oc.z!==ec||oc.w!==Vc)p.vertexAttrib4f(Hc,Uc,Dc,ec,Vc),oc.x=Uc,oc.y=Dc,oc.z=ec,oc.w=Vc;mc=C.call(this,l,a,0);F(mc)&&16===mc.length||ba.commandRaise(G,H);p.uniformMatrix4fv(W.location,
!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(X[0]=mc[0],X[1]=mc[1],X[2]=mc[2],X[3]=mc[3],X[4]=mc[4],X[5]=mc[5],X[6]=mc[6],X[7]=mc[7],X[8]=mc[8],X[9]=mc[9],X[10]=mc[10],X[11]=mc[11],X[12]=mc[12],X[13]=mc[13],X[14]=mc[14],X[15]=mc[15],X));fc=l.view;F(fc)&&16===fc.length||ba.commandRaise(U,H);p.uniformMatrix4fv(R.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(ua[0]=fc[0],ua[1]=fc[1],ua[2]=fc[2],ua[3]=fc[3],ua[4]=fc[4],ua[5]=fc[5],ua[6]=fc[6],ua[7]=fc[7],ua[8]=fc[8],ua[9]=fc[9],
ua[10]=fc[10],ua[11]=fc[11],ua[12]=fc[12],ua[13]=fc[13],ua[14]=fc[14],ua[15]=fc[15],ua));($a=a.atlas)&&"framebuffer"===$a._reglType&&($a=$a.color[0]);"function"===typeof $a&&"texture2d"===$a._reglType||ba.commandRaise(y,H);Ic=$a._texture;p.uniform1i(A.location,Ic.bind());xb=a.elements;cb=null;(Mb=ca(xb))?cb=Ea.createStream(xb):(cb=Ea.getElements(xb),xb&&!cb&&ba.commandRaise(t,H));cb&&p.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;nb=cb?cb.vertCount:-1;0<=nb||ba.commandRaise(m,H);nb&&(cb?
p.drawElements(ab,nb,cb.type,0<<(cb.type-5121>>1)):p.drawArrays(ab,0,nb),K.dirty=!0,Aa.setVAO(null),l.view=e,b&&(I.cpuTime+=performance.now()-h),w&&z.destroyStream(x),ta&&z.destroyStream(Ba),Eb&&z.destroyStream(tc),Ic.unbind(),Mb&&Ea.destroyStream(cb))},scope:function(a,e,f){var b,k,h,p,g,q,r,v,n,L,ja,w,A,S,t,D,E,y,ga,ia,Xb,ya,C,B,m,sa,Da,N,pa,va,P,R,G,X,U,za,V,Y,la,W,da,Ta,wa,qa,xa,Ca,ta,ka,Fa,Ga,Aa,oa,Gb,Z,fa,ua,Ba,Cc,Ja,sd,Va,Oa,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,
fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb;b=l.view;k=aa.call(this,l,a,f);l.view=k;h=Q.cull_enable;Q.cull_enable=!0;p=Q.cull_face;Q.cull_face=1029;if(g=K.profile)q=performance.now(),I.count++;r=a.elements;v=null;(n=ca(r))?v=Ea.createStream(r):(v=Ea.getElements(r),r&&!v&&ba.commandRaise(x,H));L=J.elements;J.elements=v;ja=J.offset;J.offset=0;w=v?v.vertCount:-1;A=J.count;J.count=w;S=v?v.primType:4;t=J.primitive;J.primitive=S;D=a.atlas;E=ra[5];ra[5]=D;y=M.call(this,l,a,f);ga=ra[3];ra[3]=y;ia=
l.view;Xb=ra[4];ra[4]=ia;(ya=a.normal)&&("object"===typeof ya||"function"===typeof ya)&&(ca(ya)||z.getBuffer(ya)||z.getBuffer(ya.buffer)||ca(ya.buffer)||"constant"in ya&&("number"===typeof ya.constant||F(ya.constant)))||ba.commandRaise(u,H);C=!1;B=null;m=0;sa=!1;N=Da=0;pa=1;va=0;P=5126;U=X=G=R=0;ca(ya)?(C=!0,B=z.createStream(34962,ya),P=B.dtype):(B=z.getBuffer(ya))?P=B.dtype:"constant"in ya?(pa=2,"number"===typeof ya.constant?(G=ya.constant,X=U=R=0):(G=0<ya.constant.length?ya.constant[0]:0,X=1<ya.constant.length?
ya.constant[1]:0,U=2<ya.constant.length?ya.constant[2]:0,R=3<ya.constant.length?ya.constant[3]:0)):(B=ca(ya.buffer)?z.createStream(34962,ya.buffer):z.getBuffer(ya.buffer),P="type"in ya?ma[ya.type]:B.dtype,sa=!!ya.normalized,N=ya.size|0,Da=ya.offset|0,va=ya.stride|0,m=ya.divisor|0);za=O.buffer;O.buffer=B;V=O.divisor;O.divisor=m;Y=O.normalized;O.normalized=sa;la=O.offset;O.offset=Da;W=O.size;O.size=N;da=O.state;O.state=pa;Ta=O.stride;O.stride=va;wa=O.type;O.type=P;qa=O.w;O.w=R;xa=O.x;O.x=G;Ca=O.y;O.y=
X;ta=O.z;O.z=U;(ka=a.position)&&("object"===typeof ka||"function"===typeof ka)&&(ca(ka)||z.getBuffer(ka)||z.getBuffer(ka.buffer)||ca(ka.buffer)||"constant"in ka&&("number"===typeof ka.constant||F(ka.constant)))||ba.commandRaise(ha,H);Fa=!1;Ga=null;Aa=0;oa=!1;Z=Gb=0;fa=1;ua=0;Ba=5126;Va=sd=Ja=Cc=0;ca(ka)?(Fa=!0,Ga=z.createStream(34962,ka),Ba=Ga.dtype):(Ga=z.getBuffer(ka))?Ba=Ga.dtype:"constant"in ka?(fa=2,"number"===typeof ka.constant?(Ja=ka.constant,sd=Va=Cc=0):(Ja=0<ka.constant.length?ka.constant[0]:
0,sd=1<ka.constant.length?ka.constant[1]:0,Va=2<ka.constant.length?ka.constant[2]:0,Cc=3<ka.constant.length?ka.constant[3]:0)):(Ga=ca(ka.buffer)?z.createStream(34962,ka.buffer):z.getBuffer(ka.buffer),Ba="type"in ka?ma[ka.type]:Ga.dtype,oa=!!ka.normalized,Z=ka.size|0,Gb=ka.offset|0,ua=ka.stride|0,Aa=ka.divisor|0);Oa=d.buffer;d.buffer=Ga;Hb=d.divisor;d.divisor=Aa;Ib=d.normalized;d.normalized=oa;qc=d.offset;d.offset=Gb;Nb=d.size;d.size=Z;ib=d.state;d.state=fa;Fb=d.stride;d.stride=ua;Cb=d.type;d.type=
Ba;vb=d.w;d.w=Cc;gb=d.x;d.x=Ja;Yb=d.y;d.y=sd;Ob=d.z;d.z=Va;(pb=a.uv)&&("object"===typeof pb||"function"===typeof pb)&&(ca(pb)||z.getBuffer(pb)||z.getBuffer(pb.buffer)||ca(pb.buffer)||"constant"in pb&&("number"===typeof pb.constant||F(pb.constant)))||ba.commandRaise(c,H);Ua=!1;Tb=null;yb=0;bc=!1;ob=hb=0;Ia=1;qb=0;Ka=5126;jb=La=fb=eb=0;ca(pb)?(Ua=!0,Tb=z.createStream(34962,pb),Ka=Tb.dtype):(Tb=z.getBuffer(pb))?Ka=Tb.dtype:"constant"in pb?(Ia=2,"number"===typeof pb.constant?(fb=pb.constant,La=jb=eb=
0):(fb=0<pb.constant.length?pb.constant[0]:0,La=1<pb.constant.length?pb.constant[1]:0,jb=2<pb.constant.length?pb.constant[2]:0,eb=3<pb.constant.length?pb.constant[3]:0)):(Tb=ca(pb.buffer)?z.createStream(34962,pb.buffer):z.getBuffer(pb.buffer),Ka="type"in pb?ma[pb.type]:Tb.dtype,bc=!!pb.normalized,ob=pb.size|0,hb=pb.offset|0,qb=pb.stride|0,yb=pb.divisor|0);Wa=T.buffer;T.buffer=Tb;sb=T.divisor;T.divisor=yb;rb=T.normalized;T.normalized=bc;Pa=T.offset;T.offset=hb;Bc=T.size;T.size=ob;Ra=T.state;T.state=
Ia;Jb=T.stride;T.stride=qb;Db=T.type;T.type=Ka;Ma=T.w;T.w=eb;vd=T.x;T.x=fb;Ya=T.y;T.y=La;Kb=T.z;T.z=jb;Lb=na.vert;na.vert=2;kb=na.frag;na.frag=1;K.dirty=!0;e(l,a,f);l.view=b;Q.cull_enable=h;Q.cull_face=p;g&&(I.cpuTime+=performance.now()-q);n&&Ea.destroyStream(v);J.elements=L;J.offset=ja;J.count=A;J.primitive=t;ra[5]=E;ra[3]=ga;ra[4]=Xb;C&&z.destroyStream(B);O.buffer=za;O.divisor=V;O.normalized=Y;O.offset=la;O.size=W;O.state=da;O.stride=Ta;O.type=wa;O.w=qa;O.x=xa;O.y=Ca;O.z=ta;Fa&&z.destroyStream(Ga);
d.buffer=Oa;d.divisor=Hb;d.normalized=Ib;d.offset=qc;d.size=Nb;d.state=ib;d.stride=Fb;d.type=Cb;d.w=vb;d.x=gb;d.y=Yb;d.z=Ob;Ua&&z.destroyStream(Tb);T.buffer=Wa;T.divisor=sb;T.normalized=rb;T.offset=Pa;T.size=Bc;T.state=Ra;T.stride=Jb;T.type=Db;T.w=Ma;T.x=vd;T.y=Ya;T.z=Kb;na.vert=Lb;na.frag=kb;K.dirty=!0},batch:function(c,d){var f,b,k,g,n,x,t;f=l.view;b=q.call(this,l,c,0);l.view=b;k=oa.next;k!==oa.cur&&(k?p.bindFramebuffer(36160,k.framebuffer):p.bindFramebuffer(36160,null),oa.cur=k);if(K.dirty){var u,
y,B,C,m,J,O,T,G,X,ra,M,U,ha,aa,na,ua,Oa,Wd,Ad,ld,$c,pd,Lc,od,Fc,ed,Oc,jd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Gc,Vc,Uc,Dc,ec,Hc,oc,pc,mc,fc,$a,Ic,xb,cb,Mb;u=Q.dither;u!==K.dither&&(u?p.enable(3024):p.disable(3024),K.dither=u);y=Q.blend_enable;y!==K.blend_enable&&(y?p.enable(3042):p.disable(3042),K.blend_enable=y);B=za[0];C=za[1];m=za[2];J=za[3];if(B!==ga[0]||C!==ga[1]||m!==ga[2]||J!==ga[3])p.blendColor(B,C,m,J),ga[0]=B,ga[1]=C,ga[2]=m,ga[3]=J;O=Ca[0];T=Ca[1];if(O!==la[0]||T!==la[1])p.blendEquationSeparate(O,T),
la[0]=O,la[1]=T;G=qa[0];X=qa[1];ra=qa[2];M=qa[3];if(G!==xa[0]||X!==xa[1]||ra!==xa[2]||M!==xa[3])p.blendFuncSeparate(G,X,ra,M),xa[0]=G,xa[1]=X,xa[2]=ra,xa[3]=M;U=Q.depth_enable;U!==K.depth_enable&&(U?p.enable(2929):p.disable(2929),K.depth_enable=U);ha=Q.depth_func;ha!==K.depth_func&&(p.depthFunc(ha),K.depth_func=ha);aa=Xb[0];na=Xb[1];if(aa!==Ta[0]||na!==Ta[1])p.depthRange(aa,na),Ta[0]=aa,Ta[1]=na;ua=Q.depth_mask;ua!==K.depth_mask&&(p.depthMask(ua),K.depth_mask=ua);Oa=ya[0];Wd=ya[1];Ad=ya[2];ld=ya[3];
if(Oa!==ja[0]||Wd!==ja[1]||Ad!==ja[2]||ld!==ja[3])p.colorMask(Oa,Wd,Ad,ld),ja[0]=Oa,ja[1]=Wd,ja[2]=Ad,ja[3]=ld;$c=Q.frontFace;$c!==K.frontFace&&(p.frontFace($c),K.frontFace=$c);pd=Q.lineWidth;pd!==K.lineWidth&&(p.lineWidth(pd),K.lineWidth=pd);Lc=Q.polygonOffset_enable;Lc!==K.polygonOffset_enable&&(Lc?p.enable(32823):p.disable(32823),K.polygonOffset_enable=Lc);od=v[0];Fc=v[1];if(od!==r[0]||Fc!==r[1])p.polygonOffset(od,Fc),r[0]=od,r[1]=Fc;ed=Q.sample_alpha;ed!==K.sample_alpha&&(ed?p.enable(32926):p.disable(32926),
K.sample_alpha=ed);Oc=Q.sample_enable;Oc!==K.sample_enable&&(Oc?p.enable(32928):p.disable(32928),K.sample_enable=Oc);jd=S[0];Ab=S[1];if(jd!==va[0]||Ab!==va[1])p.sampleCoverage(jd,Ab),va[0]=jd,va[1]=Ab;Eb=Q.stencil_enable;Eb!==K.stencil_enable&&(Eb?p.enable(2960):p.disable(2960),K.stencil_enable=Eb);tc=Q.stencil_mask;tc!==K.stencil_mask&&(p.stencilMask(tc),K.stencil_mask=tc);wb=Gb[0];wc=Gb[1];Bb=Gb[2];if(wb!==ia[0]||wc!==ia[1]||Bb!==ia[2])p.stencilFunc(wb,wc,Bb),ia[0]=wb,ia[1]=wc,ia[2]=Bb;Jc=Da[0];
lc=Da[1];Gc=Da[2];Vc=Da[3];if(Jc!==pa[0]||lc!==pa[1]||Gc!==pa[2]||Vc!==pa[3])p.stencilOpSeparate(Jc,lc,Gc,Vc),pa[0]=Jc,pa[1]=lc,pa[2]=Gc,pa[3]=Vc;Uc=L[0];Dc=L[1];ec=L[2];Hc=L[3];if(Uc!==sa[0]||Dc!==sa[1]||ec!==sa[2]||Hc!==sa[3])p.stencilOpSeparate(Uc,Dc,ec,Hc),sa[0]=Uc,sa[1]=Dc,sa[2]=ec,sa[3]=Hc;oc=Q.scissor_enable;oc!==K.scissor_enable&&(oc?p.enable(3089):p.disable(3089),K.scissor_enable=oc);pc=Fa[0];mc=Fa[1];fc=Fa[2];$a=Fa[3];if(pc!==fa[0]||mc!==fa[1]||fc!==fa[2]||$a!==fa[3])p.scissor(pc,mc,fc,
$a),fa[0]=pc,fa[1]=mc,fa[2]=fc,fa[3]=$a;Ic=wa[0];xb=wa[1];cb=wa[2];Mb=wa[3];if(Ic!==Ga[0]||xb!==Ga[1]||cb!==Ga[2]||Mb!==Ga[3])p.viewport(Ic,xb,cb,Mb),Ga[0]=Ic,Ga[1]=xb,Ga[2]=cb,Ga[3]=Mb}p.enable(2884);K.cull_enable=!0;p.cullFace(1029);K.cull_face=1029;if(g=K.profile)n=performance.now(),I.count+=d;p.useProgram(Y.program);var ab,nb;Aa.setVAO(null);ab=E.call(this,l,t,x);F(ab)&&16===ab.length||ba.commandRaise(D,H);p.uniformMatrix4fv(W.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ja[0]=
ab[0],Ja[1]=ab[1],Ja[2]=ab[2],Ja[3]=ab[3],Ja[4]=ab[4],Ja[5]=ab[5],Ja[6]=ab[6],Ja[7]=ab[7],Ja[8]=ab[8],Ja[9]=ab[9],Ja[10]=ab[10],Ja[11]=ab[11],Ja[12]=ab[12],Ja[13]=ab[13],Ja[14]=ab[14],Ja[15]=ab[15],Ja));nb=l.view;F(nb)&&16===nb.length||ba.commandRaise(e,H);p.uniformMatrix4fv(R.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(Ba[0]=nb[0],Ba[1]=nb[1],Ba[2]=nb[2],Ba[3]=nb[3],Ba[4]=nb[4],Ba[5]=nb[5],Ba[6]=nb[6],Ba[7]=nb[7],Ba[8]=nb[8],Ba[9]=nb[9],Ba[10]=nb[10],Ba[11]=nb[11],Ba[12]=nb[12],
Ba[13]=nb[13],Ba[14]=nb[14],Ba[15]=nb[15],Ba));for(x=0;x<d;++x){t=c[x];var Va,Cd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Yb,Ob,pb,Ua,Tb,yb,bc,hb,ob,Ia,qb,Ka,eb,fb,La,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Ma,vd,Ya,Kb,Lb,kb,Na,Zb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ad,Xa;(Va=t.position)&&("object"===typeof Va||"function"===typeof Va)&&(ca(Va)||z.getBuffer(Va)||z.getBuffer(Va.buffer)||ca(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||F(Va.constant)))||ba.commandRaise(h,H);Cd=!1;Hb=null;Ib=!1;Nb=qc=0;ib=1;Fb=0;Cb=5126;
Ob=Yb=gb=vb=0;ca(Va)?(Cd=!0,Hb=z.createStream(34962,Va),Cb=Hb.dtype):(Hb=z.getBuffer(Va))?Cb=Hb.dtype:"constant"in Va?(ib=2,"number"===typeof Va.constant?(gb=Va.constant,Yb=Ob=vb=0):(gb=0<Va.constant.length?Va.constant[0]:0,Yb=1<Va.constant.length?Va.constant[1]:0,Ob=2<Va.constant.length?Va.constant[2]:0,vb=3<Va.constant.length?Va.constant[3]:0)):(Hb=ca(Va.buffer)?z.createStream(34962,Va.buffer):z.getBuffer(Va.buffer),Cb="type"in Va?ma[Va.type]:Hb.dtype,Ib=!!Va.normalized,Nb=Va.size|0,qc=Va.offset|
0,Fb=Va.stride|0);pb=Z.location;Ua=P[pb];if(1===ib){if(Ua.buffer||p.enableVertexAttribArray(pb),Tb=Nb||3,Ua.type!==Cb||Ua.size!==Tb||Ua.buffer!==Hb||Ua.normalized!==Ib||Ua.offset!==qc||Ua.stride!==Fb)p.bindBuffer(34962,Hb.buffer),p.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=Tb,Ua.buffer=Hb,Ua.normalized=Ib,Ua.offset=qc,Ua.stride=Fb}else if(Ua.buffer&&(p.disableVertexAttribArray(pb),Ua.buffer=null),Ua.x!==gb||Ua.y!==Yb||Ua.z!==Ob||Ua.w!==vb)p.vertexAttrib4f(pb,gb,Yb,Ob,vb),Ua.x=gb,Ua.y=
Yb,Ua.z=Ob,Ua.w=vb;(yb=t.normal)&&("object"===typeof yb||"function"===typeof yb)&&(ca(yb)||z.getBuffer(yb)||z.getBuffer(yb.buffer)||ca(yb.buffer)||"constant"in yb&&("number"===typeof yb.constant||F(yb.constant)))||ba.commandRaise(w,H);bc=!1;hb=null;ob=!1;qb=Ia=0;Ka=1;eb=0;fb=5126;sb=Wa=jb=La=0;ca(yb)?(bc=!0,hb=z.createStream(34962,yb),fb=hb.dtype):(hb=z.getBuffer(yb))?fb=hb.dtype:"constant"in yb?(Ka=2,"number"===typeof yb.constant?(jb=yb.constant,Wa=sb=La=0):(jb=0<yb.constant.length?yb.constant[0]:
0,Wa=1<yb.constant.length?yb.constant[1]:0,sb=2<yb.constant.length?yb.constant[2]:0,La=3<yb.constant.length?yb.constant[3]:0)):(hb=ca(yb.buffer)?z.createStream(34962,yb.buffer):z.getBuffer(yb.buffer),fb="type"in yb?ma[yb.type]:hb.dtype,ob=!!yb.normalized,qb=yb.size|0,Ia=yb.offset|0,eb=yb.stride|0);rb=ka.location;Pa=P[rb];if(1===Ka){if(Pa.buffer||p.enableVertexAttribArray(rb),Bc=qb||3,Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==hb||Pa.normalized!==ob||Pa.offset!==Ia||Pa.stride!==eb)p.bindBuffer(34962,
hb.buffer),p.vertexAttribPointer(rb,Bc,fb,ob,eb,Ia),Pa.type=fb,Pa.size=Bc,Pa.buffer=hb,Pa.normalized=ob,Pa.offset=Ia,Pa.stride=eb}else if(Pa.buffer&&(p.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==jb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==La)p.vertexAttrib4f(rb,jb,Wa,sb,La),Pa.x=jb,Pa.y=Wa,Pa.z=sb,Pa.w=La;(Ra=t.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(ca(Ra)||z.getBuffer(Ra)||z.getBuffer(Ra.buffer)||ca(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||F(Ra.constant)))||ba.commandRaise(V,
H);Jb=!1;Db=null;Ma=!1;Ya=vd=0;Kb=1;Lb=0;kb=5126;tb=Qa=Zb=Na=0;ca(Ra)?(Jb=!0,Db=z.createStream(34962,Ra),kb=Db.dtype):(Db=z.getBuffer(Ra))?kb=Db.dtype:"constant"in Ra?(Kb=2,"number"===typeof Ra.constant?(Zb=Ra.constant,Qa=tb=Na=0):(Zb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,tb=2<Ra.constant.length?Ra.constant[2]:0,Na=3<Ra.constant.length?Ra.constant[3]:0)):(Db=ca(Ra.buffer)?z.createStream(34962,Ra.buffer):z.getBuffer(Ra.buffer),kb="type"in Ra?ma[Ra.type]:Db.dtype,
Ma=!!Ra.normalized,Ya=Ra.size|0,vd=Ra.offset|0,Lb=Ra.stride|0);ub=da.location;Sa=P[ub];if(1===Kb){if(Sa.buffer||p.enableVertexAttribArray(ub),mb=Ya||2,Sa.type!==kb||Sa.size!==mb||Sa.buffer!==Db||Sa.normalized!==Ma||Sa.offset!==vd||Sa.stride!==Lb)p.bindBuffer(34962,Db.buffer),p.vertexAttribPointer(ub,mb,kb,Ma,Lb,vd),Sa.type=kb,Sa.size=mb,Sa.buffer=Db,Sa.normalized=Ma,Sa.offset=vd,Sa.stride=Lb}else if(Sa.buffer&&(p.disableVertexAttribArray(ub),Sa.buffer=null),Sa.x!==Zb||Sa.y!==Qa||Sa.z!==tb||Sa.w!==
Na)p.vertexAttrib4f(ub,Zb,Qa,tb,Na),Sa.x=Zb,Sa.y=Qa,Sa.z=tb,Sa.w=Na;(gc=t.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||ba.commandRaise(N,H);zc=gc._texture;p.uniform1i(A.location,zc.bind());uc=t.elements;bb=null;(jc=ca(uc))?bb=Ea.createStream(uc):(bb=Ea.getElements(uc),uc&&!bb&&ba.commandRaise(a,H));bb&&p.bindBuffer(34963,bb.buffer.buffer);ad=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||ba.commandRaise(ta,H);Xa&&(bb?p.drawElements(ad,Xa,
bb.type,0<<(bb.type-5121>>1)):p.drawArrays(ad,0,Xa),Cd&&z.destroyStream(Hb),bc&&z.destroyStream(hb),Jb&&z.destroyStream(Db),zc.unbind(),jc&&Ea.destroyStream(bb))}K.dirty=!0;Aa.setVAO(null);l.view=f;g&&(I.cpuTime+=performance.now()-n)}}},"$7,color,position":function(b,ba,H,I,g,k,n,f,B,C){var G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W,da,R,P,z,l,K,J;G=b.attributes;U=b.context;y=b.current;t=b.draw;m=b.elements;aa=b.framebuffer;x=b.gl;M=b.next;u=b.shader;O=b.uniforms;ha=b.vao;d=M.blend_color;
c=y.blend_color;T=M.blend_equation;q=y.blend_equation;Y=M.blend_func;h=y.blend_func;w=M.colorMask;V=y.colorMask;E=M.depth_range;D=y.depth_range;e=M.polygonOffset_offset;N=y.polygonOffset_offset;a=M.sample_coverage;ta=y.sample_coverage;A=M.scissor_box;ka=y.scissor_box;Z=M.stencil_func;W=y.stencil_func;da=M.stencil_opBack;R=y.stencil_opBack;P=M.stencil_opFront;z=y.stencil_opFront;l=M.viewport;K=y.viewport;J=[1,0,0,1];return{draw:function(f){var b,p,n,u;f=aa.next;f!==aa.cur&&(f?x.bindFramebuffer(36160,
f.framebuffer):x.bindFramebuffer(36160,null),aa.cur=f);if(y.dirty){f=M.dither;f!==y.dither&&(f?x.enable(3024):x.disable(3024),y.dither=f);f=M.blend_enable;f!==y.blend_enable&&(f?x.enable(3042):x.disable(3042),y.blend_enable=f);f=d[0];p=d[1];n=d[2];u=d[3];if(f!==c[0]||p!==c[1]||n!==c[2]||u!==c[3])x.blendColor(f,p,n,u),c[0]=f,c[1]=p,c[2]=n,c[3]=u;f=T[0];p=T[1];if(f!==q[0]||p!==q[1])x.blendEquationSeparate(f,p),q[0]=f,q[1]=p;f=Y[0];p=Y[1];n=Y[2];u=Y[3];if(f!==h[0]||p!==h[1]||n!==h[2]||u!==h[3])x.blendFuncSeparate(f,
p,n,u),h[0]=f,h[1]=p,h[2]=n,h[3]=u;f=M.depth_enable;f!==y.depth_enable&&(f?x.enable(2929):x.disable(2929),y.depth_enable=f);f=M.depth_func;f!==y.depth_func&&(x.depthFunc(f),y.depth_func=f);f=E[0];p=E[1];if(f!==D[0]||p!==D[1])x.depthRange(f,p),D[0]=f,D[1]=p;f=M.depth_mask;f!==y.depth_mask&&(x.depthMask(f),y.depth_mask=f);f=w[0];p=w[1];n=w[2];u=w[3];if(f!==V[0]||p!==V[1]||n!==V[2]||u!==V[3])x.colorMask(f,p,n,u),V[0]=f,V[1]=p,V[2]=n,V[3]=u;f=M.cull_enable;f!==y.cull_enable&&(f?x.enable(2884):x.disable(2884),
y.cull_enable=f);f=M.cull_face;f!==y.cull_face&&(x.cullFace(f),y.cull_face=f);f=M.frontFace;f!==y.frontFace&&(x.frontFace(f),y.frontFace=f);f=M.lineWidth;f!==y.lineWidth&&(x.lineWidth(f),y.lineWidth=f);f=M.polygonOffset_enable;f!==y.polygonOffset_enable&&(f?x.enable(32823):x.disable(32823),y.polygonOffset_enable=f);f=e[0];p=e[1];if(f!==N[0]||p!==N[1])x.polygonOffset(f,p),N[0]=f,N[1]=p;f=M.sample_alpha;f!==y.sample_alpha&&(f?x.enable(32926):x.disable(32926),y.sample_alpha=f);f=M.sample_enable;f!==
y.sample_enable&&(f?x.enable(32928):x.disable(32928),y.sample_enable=f);f=a[0];p=a[1];if(f!==ta[0]||p!==ta[1])x.sampleCoverage(f,p),ta[0]=f,ta[1]=p;f=M.stencil_enable;f!==y.stencil_enable&&(f?x.enable(2960):x.disable(2960),y.stencil_enable=f);f=M.stencil_mask;f!==y.stencil_mask&&(x.stencilMask(f),y.stencil_mask=f);f=Z[0];p=Z[1];n=Z[2];if(f!==W[0]||p!==W[1]||n!==W[2])x.stencilFunc(f,p,n),W[0]=f,W[1]=p,W[2]=n;f=P[0];p=P[1];n=P[2];u=P[3];if(f!==z[0]||p!==z[1]||n!==z[2]||u!==z[3])x.stencilOpSeparate(f,
p,n,u),z[0]=f,z[1]=p,z[2]=n,z[3]=u;f=da[0];p=da[1];n=da[2];u=da[3];if(f!==R[0]||p!==R[1]||n!==R[2]||u!==R[3])x.stencilOpSeparate(f,p,n,u),R[0]=f,R[1]=p,R[2]=n,R[3]=u;f=M.scissor_enable;f!==y.scissor_enable&&(f?x.enable(3089):x.disable(3089),y.scissor_enable=f);f=A[0];p=A[1];n=A[2];u=A[3];if(f!==ka[0]||p!==ka[1]||n!==ka[2]||u!==ka[3])x.scissor(f,p,n,u),ka[0]=f,ka[1]=p,ka[2]=n,ka[3]=u;f=l[0];p=l[1];n=l[2];u=l[3];if(f!==K[0]||p!==K[1]||n!==K[2]||u!==K[3])x.viewport(f,p,n,u),K[0]=f,K[1]=p,K[2]=n,K[3]=
u;y.dirty=!1}if(f=y.profile)b=performance.now(),I.count++;x.useProgram(g.program);ha.setVAO(null);p=C.location;n=G[p];n.buffer||x.enableVertexAttribArray(p);if(n.type!==k.dtype||2!==n.size||n.buffer!==k||!1!==n.normalized||0!==n.offset||0!==n.stride)x.bindBuffer(34962,k.buffer),x.vertexAttribPointer(p,2,k.dtype,!1,0,0),n.type=k.dtype,n.size=2,n.buffer=k,n.normalized=!1,n.offset=0,n.stride=0;x.uniform4f(B.location,1,0,0,1);(p=t.elements)?x.bindBuffer(34963,p.buffer.buffer):ha.currentVAO&&(p=m.getElements(ha.currentVAO.elements))&&
x.bindBuffer(34963,p.buffer.buffer);n=t.primitive;u=t.offset;p?x.drawElements(n,3,p.type,u<<(p.type-5121>>1)):x.drawArrays(n,u,3);ha.setVAO(null);f&&(I.cpuTime+=performance.now()-b)},scope:function(a,e,c){var d,f,b,h,l,g,q,w,A,x,z,D,E,ja,Xb,B,v,r;if(d=y.profile)f=performance.now(),I.count++;b=t.count;t.count=3;h=O[3];O[3]=J;l=n.buffer;n.buffer=k;g=n.divisor;n.divisor=0;q=n.normalized;n.normalized=!1;w=n.offset;n.offset=0;A=n.size;n.size=0;x=n.state;n.state=1;z=n.stride;n.stride=0;D=n.type;n.type=
k.dtype;E=n.w;n.w=0;ja=n.x;n.x=0;Xb=n.y;n.y=0;B=n.z;n.z=0;v=u.vert;u.vert=2;r=u.frag;u.frag=1;e(U,a,c);d&&(I.cpuTime+=performance.now()-f);t.count=b;O[3]=h;n.buffer=l;n.divisor=g;n.normalized=q;n.offset=w;n.size=A;n.state=x;n.stride=z;n.type=D;n.w=E;n.x=ja;n.y=Xb;n.z=B;u.vert=v;u.frag=r},batch:function(b,g){var p,n,u;p=aa.next;p!==aa.cur&&(p?x.bindFramebuffer(36160,p.framebuffer):x.bindFramebuffer(36160,null),aa.cur=p);if(y.dirty){var Q,H;p=M.dither;p!==y.dither&&(p?x.enable(3024):x.disable(3024),
y.dither=p);p=M.blend_enable;p!==y.blend_enable&&(p?x.enable(3042):x.disable(3042),y.blend_enable=p);p=d[0];u=d[1];Q=d[2];H=d[3];if(p!==c[0]||u!==c[1]||Q!==c[2]||H!==c[3])x.blendColor(p,u,Q,H),c[0]=p,c[1]=u,c[2]=Q,c[3]=H;p=T[0];u=T[1];if(p!==q[0]||u!==q[1])x.blendEquationSeparate(p,u),q[0]=p,q[1]=u;p=Y[0];u=Y[1];Q=Y[2];H=Y[3];if(p!==h[0]||u!==h[1]||Q!==h[2]||H!==h[3])x.blendFuncSeparate(p,u,Q,H),h[0]=p,h[1]=u,h[2]=Q,h[3]=H;p=M.depth_enable;p!==y.depth_enable&&(p?x.enable(2929):x.disable(2929),y.depth_enable=
p);p=M.depth_func;p!==y.depth_func&&(x.depthFunc(p),y.depth_func=p);p=E[0];u=E[1];if(p!==D[0]||u!==D[1])x.depthRange(p,u),D[0]=p,D[1]=u;p=M.depth_mask;p!==y.depth_mask&&(x.depthMask(p),y.depth_mask=p);p=w[0];u=w[1];Q=w[2];H=w[3];if(p!==V[0]||u!==V[1]||Q!==V[2]||H!==V[3])x.colorMask(p,u,Q,H),V[0]=p,V[1]=u,V[2]=Q,V[3]=H;p=M.cull_enable;p!==y.cull_enable&&(p?x.enable(2884):x.disable(2884),y.cull_enable=p);p=M.cull_face;p!==y.cull_face&&(x.cullFace(p),y.cull_face=p);p=M.frontFace;p!==y.frontFace&&(x.frontFace(p),
y.frontFace=p);p=M.lineWidth;p!==y.lineWidth&&(x.lineWidth(p),y.lineWidth=p);p=M.polygonOffset_enable;p!==y.polygonOffset_enable&&(p?x.enable(32823):x.disable(32823),y.polygonOffset_enable=p);p=e[0];u=e[1];if(p!==N[0]||u!==N[1])x.polygonOffset(p,u),N[0]=p,N[1]=u;p=M.sample_alpha;p!==y.sample_alpha&&(p?x.enable(32926):x.disable(32926),y.sample_alpha=p);p=M.sample_enable;p!==y.sample_enable&&(p?x.enable(32928):x.disable(32928),y.sample_enable=p);p=a[0];u=a[1];if(p!==ta[0]||u!==ta[1])x.sampleCoverage(p,
u),ta[0]=p,ta[1]=u;p=M.stencil_enable;p!==y.stencil_enable&&(p?x.enable(2960):x.disable(2960),y.stencil_enable=p);p=M.stencil_mask;p!==y.stencil_mask&&(x.stencilMask(p),y.stencil_mask=p);p=Z[0];u=Z[1];Q=Z[2];if(p!==W[0]||u!==W[1]||Q!==W[2])x.stencilFunc(p,u,Q),W[0]=p,W[1]=u,W[2]=Q;p=P[0];u=P[1];Q=P[2];H=P[3];if(p!==z[0]||u!==z[1]||Q!==z[2]||H!==z[3])x.stencilOpSeparate(p,u,Q,H),z[0]=p,z[1]=u,z[2]=Q,z[3]=H;p=da[0];u=da[1];Q=da[2];H=da[3];if(p!==R[0]||u!==R[1]||Q!==R[2]||H!==R[3])x.stencilOpSeparate(p,
u,Q,H),R[0]=p,R[1]=u,R[2]=Q,R[3]=H;p=M.scissor_enable;p!==y.scissor_enable&&(p?x.enable(3089):x.disable(3089),y.scissor_enable=p);p=A[0];u=A[1];Q=A[2];H=A[3];if(p!==ka[0]||u!==ka[1]||Q!==ka[2]||H!==ka[3])x.scissor(p,u,Q,H),ka[0]=p,ka[1]=u,ka[2]=Q,ka[3]=H;p=l[0];u=l[1];Q=l[2];H=l[3];if(p!==K[0]||u!==K[1]||Q!==K[2]||H!==K[3])x.viewport(p,u,Q,H),K[0]=p,K[1]=u,K[2]=Q,K[3]=H;y.dirty=!1}if(p=y.profile)n=performance.now(),I.count+=g;x.useProgram(f.program);var J;ha.setVAO(null);u=C.location;Q=G[u];Q.buffer||
x.enableVertexAttribArray(u);if(Q.type!==k.dtype||2!==Q.size||Q.buffer!==k||!1!==Q.normalized||0!==Q.offset||0!==Q.stride)x.bindBuffer(34962,k.buffer),x.vertexAttribPointer(u,2,k.dtype,!1,0,0),Q.type=k.dtype,Q.size=2,Q.buffer=k,Q.normalized=!1,Q.offset=0,Q.stride=0;x.uniform4f(B.location,1,0,0,1);(Q=t.elements)?x.bindBuffer(34963,Q.buffer.buffer):ha.currentVAO&&(Q=m.getElements(ha.currentVAO.elements))&&x.bindBuffer(34963,Q.buffer.buffer);H=t.primitive;J=t.offset;for(u=0;u<g;++u)Q?x.drawElements(H,
3,Q.type,J<<(Q.type-5121>>1)):x.drawArrays(H,J,3);ha.setVAO(null);p&&(I.cpuTime+=performance.now()-n)}}},"$19,angle,color,offset,position":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T){var q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W,da,R,P,z,l,K,J,fa,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa;q=b.attributes;Y=b.context;h=b.current;w=b.draw;V=b.elements;E=b.framebuffer;D=b.gl;e=b.isArrayLike;N=b.next;a=b.shader;ta=b.uniforms;A=b.vao;ka=N.blend_color;Z=h.blend_color;W=N.blend_equation;da=h.blend_equation;
R=N.blend_func;P=h.blend_func;z=N.colorMask;l=h.colorMask;K=N.depth_range;J=h.depth_range;fa=N.polygonOffset_offset;oa=h.polygonOffset_offset;p=N.sample_coverage;F=h.sample_coverage;ca=N.scissor_box;Q=h.scissor_box;na=N.stencil_func;ra=h.stencil_func;Aa=N.stencil_opBack;za=h.stencil_opBack;ga=N.stencil_opFront;Ca=h.stencil_opFront;la=N.viewport;qa=h.viewport;return{draw:function(a){var b,ja,u,x;b=E.next;b!==E.cur&&(b?D.bindFramebuffer(36160,b.framebuffer):D.bindFramebuffer(36160,null),E.cur=b);if(h.dirty){var v;
b=N.dither;b!==h.dither&&(b?D.enable(3024):D.disable(3024),h.dither=b);b=N.blend_enable;b!==h.blend_enable&&(b?D.enable(3042):D.disable(3042),h.blend_enable=b);b=ka[0];u=ka[1];x=ka[2];v=ka[3];if(b!==Z[0]||u!==Z[1]||x!==Z[2]||v!==Z[3])D.blendColor(b,u,x,v),Z[0]=b,Z[1]=u,Z[2]=x,Z[3]=v;b=W[0];u=W[1];if(b!==da[0]||u!==da[1])D.blendEquationSeparate(b,u),da[0]=b,da[1]=u;b=R[0];u=R[1];x=R[2];v=R[3];if(b!==P[0]||u!==P[1]||x!==P[2]||v!==P[3])D.blendFuncSeparate(b,u,x,v),P[0]=b,P[1]=u,P[2]=x,P[3]=v;b=N.depth_func;
b!==h.depth_func&&(D.depthFunc(b),h.depth_func=b);b=K[0];u=K[1];if(b!==J[0]||u!==J[1])D.depthRange(b,u),J[0]=b,J[1]=u;b=N.depth_mask;b!==h.depth_mask&&(D.depthMask(b),h.depth_mask=b);b=z[0];u=z[1];x=z[2];v=z[3];if(b!==l[0]||u!==l[1]||x!==l[2]||v!==l[3])D.colorMask(b,u,x,v),l[0]=b,l[1]=u,l[2]=x,l[3]=v;b=N.cull_enable;b!==h.cull_enable&&(b?D.enable(2884):D.disable(2884),h.cull_enable=b);b=N.cull_face;b!==h.cull_face&&(D.cullFace(b),h.cull_face=b);b=N.frontFace;b!==h.frontFace&&(D.frontFace(b),h.frontFace=
b);b=N.lineWidth;b!==h.lineWidth&&(D.lineWidth(b),h.lineWidth=b);b=N.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?D.enable(32823):D.disable(32823),h.polygonOffset_enable=b);b=fa[0];u=fa[1];if(b!==oa[0]||u!==oa[1])D.polygonOffset(b,u),oa[0]=b,oa[1]=u;b=N.sample_alpha;b!==h.sample_alpha&&(b?D.enable(32926):D.disable(32926),h.sample_alpha=b);b=N.sample_enable;b!==h.sample_enable&&(b?D.enable(32928):D.disable(32928),h.sample_enable=b);b=p[0];u=p[1];if(b!==F[0]||u!==F[1])D.sampleCoverage(b,u),F[0]=
b,F[1]=u;b=N.stencil_enable;b!==h.stencil_enable&&(b?D.enable(2960):D.disable(2960),h.stencil_enable=b);b=N.stencil_mask;b!==h.stencil_mask&&(D.stencilMask(b),h.stencil_mask=b);b=na[0];u=na[1];x=na[2];if(b!==ra[0]||u!==ra[1]||x!==ra[2])D.stencilFunc(b,u,x),ra[0]=b,ra[1]=u,ra[2]=x;b=ga[0];u=ga[1];x=ga[2];v=ga[3];if(b!==Ca[0]||u!==Ca[1]||x!==Ca[2]||v!==Ca[3])D.stencilOpSeparate(b,u,x,v),Ca[0]=b,Ca[1]=u,Ca[2]=x,Ca[3]=v;b=Aa[0];u=Aa[1];x=Aa[2];v=Aa[3];if(b!==za[0]||u!==za[1]||x!==za[2]||v!==za[3])D.stencilOpSeparate(b,
u,x,v),za[0]=b,za[1]=u,za[2]=x,za[3]=v;b=N.scissor_enable;b!==h.scissor_enable&&(b?D.enable(3089):D.disable(3089),h.scissor_enable=b);b=ca[0];u=ca[1];x=ca[2];v=ca[3];if(b!==Q[0]||u!==Q[1]||x!==Q[2]||v!==Q[3])D.scissor(b,u,x,v),Q[0]=b,Q[1]=u,Q[2]=x,Q[3]=v;b=la[0];u=la[1];x=la[2];v=la[3];if(b!==qa[0]||u!==qa[1]||x!==qa[2]||v!==qa[3])D.viewport(b,u,x,v),qa[0]=b,qa[1]=u,qa[2]=x,qa[3]=v}D.disable(2929);h.depth_enable=!1;if(b=h.profile)ja=performance.now(),I.count++;D.useProgram(g.program);A.setVAO(null);
u=T.location;x=q[u];x.buffer||D.enableVertexAttribArray(u);if(x.type!==k.dtype||2!==x.size||x.buffer!==k||!1!==x.normalized||0!==x.offset||0!==x.stride)D.bindBuffer(34962,k.buffer),D.vertexAttribPointer(u,2,k.dtype,!1,0,0),x.type=k.dtype,x.size=2,x.buffer=k,x.normalized=!1,x.offset=0,x.stride=0;u=n.call(this,Y,a,0);"number"!==typeof u&&ba.commandRaise(f,H);D.uniform1f(ha.location,u);u=a.offset;e(u)&&2===u.length||ba.commandRaise(B,H);D.uniform2f(c.location,u[0],u[1]);a=C.call(this,Y,a,0);e(a)&&4===
a.length||ba.commandRaise(G,H);D.uniform4f(d.location,a[0],a[1],a[2],a[3]);(a=w.elements)?D.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=V.getElements(A.currentVAO.elements))&&D.bindBuffer(34963,a.buffer.buffer);u=w.primitive;x=w.offset;a?D.drawElements(u,3,a.type,x<<(a.type-5121>>1)):D.drawArrays(u,x,3);h.dirty=!0;A.setVAO(null);b&&(I.cpuTime+=performance.now()-ja)},scope:function(e,c,d){var f,b,l,p,g,q,n,u,x,A,L,z,D,E,Q,F,ga,H,B,C,m;f=N.depth_enable;N.depth_enable=!1;if(b=h.profile)l=performance.now(),
I.count++;p=w.count;w.count=3;g=U.call(this,Y,e,d);q=ta[3];ta[3]=g;n=y.call(this,Y,e,d);g=ta[5];ta[5]=n;u=e.offset;n=ta[4];ta[4]=u;u=t.buffer;t.buffer=k;x=t.divisor;t.divisor=0;A=t.normalized;t.normalized=!1;L=t.offset;t.offset=0;z=t.size;t.size=0;D=t.state;t.state=1;E=t.stride;t.stride=0;Q=t.type;t.type=k.dtype;F=t.w;t.w=0;ga=t.x;t.x=0;H=t.y;t.y=0;B=t.z;t.z=0;C=a.vert;a.vert=2;m=a.frag;a.frag=1;h.dirty=!0;c(Y,e,d);N.depth_enable=f;b&&(I.cpuTime+=performance.now()-l);w.count=p;ta[3]=q;ta[5]=g;ta[4]=
n;t.buffer=u;t.divisor=x;t.normalized=A;t.offset=L;t.size=z;t.state=D;t.stride=E;t.type=Q;t.w=F;t.x=ga;t.y=H;t.z=B;a.vert=C;a.frag=m;h.dirty=!0},batch:function(a,f){var b,g,n,v;b=E.next;b!==E.cur&&(b?D.bindFramebuffer(36160,b.framebuffer):D.bindFramebuffer(36160,null),E.cur=b);if(h.dirty){var r,S,t;b=N.dither;b!==h.dither&&(b?D.enable(3024):D.disable(3024),h.dither=b);b=N.blend_enable;b!==h.blend_enable&&(b?D.enable(3042):D.disable(3042),h.blend_enable=b);b=ka[0];r=ka[1];S=ka[2];t=ka[3];if(b!==Z[0]||
r!==Z[1]||S!==Z[2]||t!==Z[3])D.blendColor(b,r,S,t),Z[0]=b,Z[1]=r,Z[2]=S,Z[3]=t;b=W[0];r=W[1];if(b!==da[0]||r!==da[1])D.blendEquationSeparate(b,r),da[0]=b,da[1]=r;b=R[0];r=R[1];S=R[2];t=R[3];if(b!==P[0]||r!==P[1]||S!==P[2]||t!==P[3])D.blendFuncSeparate(b,r,S,t),P[0]=b,P[1]=r,P[2]=S,P[3]=t;b=N.depth_func;b!==h.depth_func&&(D.depthFunc(b),h.depth_func=b);b=K[0];r=K[1];if(b!==J[0]||r!==J[1])D.depthRange(b,r),J[0]=b,J[1]=r;b=N.depth_mask;b!==h.depth_mask&&(D.depthMask(b),h.depth_mask=b);b=z[0];r=z[1];
S=z[2];t=z[3];if(b!==l[0]||r!==l[1]||S!==l[2]||t!==l[3])D.colorMask(b,r,S,t),l[0]=b,l[1]=r,l[2]=S,l[3]=t;b=N.cull_enable;b!==h.cull_enable&&(b?D.enable(2884):D.disable(2884),h.cull_enable=b);b=N.cull_face;b!==h.cull_face&&(D.cullFace(b),h.cull_face=b);b=N.frontFace;b!==h.frontFace&&(D.frontFace(b),h.frontFace=b);b=N.lineWidth;b!==h.lineWidth&&(D.lineWidth(b),h.lineWidth=b);b=N.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?D.enable(32823):D.disable(32823),h.polygonOffset_enable=b);b=fa[0];r=
fa[1];if(b!==oa[0]||r!==oa[1])D.polygonOffset(b,r),oa[0]=b,oa[1]=r;b=N.sample_alpha;b!==h.sample_alpha&&(b?D.enable(32926):D.disable(32926),h.sample_alpha=b);b=N.sample_enable;b!==h.sample_enable&&(b?D.enable(32928):D.disable(32928),h.sample_enable=b);b=p[0];r=p[1];if(b!==F[0]||r!==F[1])D.sampleCoverage(b,r),F[0]=b,F[1]=r;b=N.stencil_enable;b!==h.stencil_enable&&(b?D.enable(2960):D.disable(2960),h.stencil_enable=b);b=N.stencil_mask;b!==h.stencil_mask&&(D.stencilMask(b),h.stencil_mask=b);b=na[0];r=
na[1];S=na[2];if(b!==ra[0]||r!==ra[1]||S!==ra[2])D.stencilFunc(b,r,S),ra[0]=b,ra[1]=r,ra[2]=S;b=ga[0];r=ga[1];S=ga[2];t=ga[3];if(b!==Ca[0]||r!==Ca[1]||S!==Ca[2]||t!==Ca[3])D.stencilOpSeparate(b,r,S,t),Ca[0]=b,Ca[1]=r,Ca[2]=S,Ca[3]=t;b=Aa[0];r=Aa[1];S=Aa[2];t=Aa[3];if(b!==za[0]||r!==za[1]||S!==za[2]||t!==za[3])D.stencilOpSeparate(b,r,S,t),za[0]=b,za[1]=r,za[2]=S,za[3]=t;b=N.scissor_enable;b!==h.scissor_enable&&(b?D.enable(3089):D.disable(3089),h.scissor_enable=b);b=ca[0];r=ca[1];S=ca[2];t=ca[3];if(b!==
Q[0]||r!==Q[1]||S!==Q[2]||t!==Q[3])D.scissor(b,r,S,t),Q[0]=b,Q[1]=r,Q[2]=S,Q[3]=t;b=la[0];r=la[1];S=la[2];t=la[3];if(b!==qa[0]||r!==qa[1]||S!==qa[2]||t!==qa[3])D.viewport(b,r,S,t),qa[0]=b,qa[1]=r,qa[2]=S,qa[3]=t}D.disable(2929);h.depth_enable=!1;if(b=h.profile)g=performance.now(),I.count+=f;D.useProgram(m.program);A.setVAO(null);r=T.location;S=q[r];S.buffer||D.enableVertexAttribArray(r);if(S.type!==k.dtype||2!==S.size||S.buffer!==k||!1!==S.normalized||0!==S.offset||0!==S.stride)D.bindBuffer(34962,
k.buffer),D.vertexAttribPointer(r,2,k.dtype,!1,0,0),S.type=k.dtype,S.size=2,S.buffer=k,S.normalized=!1,S.offset=0,S.stride=0;n=aa.call(this,Y,v,n);"number"!==typeof n&&ba.commandRaise(x,H);D.uniform1f(ha.location,n);(r=w.elements)?D.bindBuffer(34963,r.buffer.buffer):A.currentVAO&&(r=V.getElements(A.currentVAO.elements))&&D.bindBuffer(34963,r.buffer.buffer);S=w.primitive;t=w.offset;for(n=0;n<f;++n){v=a[n];var y,B,C,ia,L,sa,Da,pa,G;y=v.offset;e(y)&&2===y.length||ba.commandRaise(M,H);B=y[0];y=y[1];n&&
C===B&&ia===y||(C=B,ia=y,D.uniform2f(c.location,B,y));L=u.call(this,Y,v,n);e(L)&&4===L.length||ba.commandRaise(O,H);v=L[0];B=L[1];y=L[2];L=L[3];n&&sa===v&&Da===B&&pa===y&&G===L||(sa=v,Da=B,pa=y,G=L,D.uniform4f(d.location,v,B,y,L));r?D.drawElements(S,3,r.type,t<<(r.type-5121>>1)):D.drawArrays(S,t,3)}h.dirty=!0;A.setVAO(null);b&&(I.cpuTime+=performance.now()-g)}}},"$23,model,position,projection,view":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w){var V,E,D,e,N,a,ta,A,ka,Z,W,da,
R,P,z,l,K,J,fa,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa;V=b.attributes;E=b.context;D=b.current;e=b.draw;N=b.framebuffer;a=b.gl;ta=b.isArrayLike;A=b.next;ka=b.shader;Z=b.uniforms;W=b.vao;da=A.blend_color;R=D.blend_color;P=A.blend_equation;z=D.blend_equation;l=A.blend_func;K=D.blend_func;J=A.colorMask;fa=D.colorMask;oa=A.depth_range;p=D.depth_range;F=A.polygonOffset_offset;ca=D.polygonOffset_offset;Q=A.sample_coverage;na=D.sample_coverage;ra=A.scissor_box;Aa=D.scissor_box;za=A.stencil_func;
ga=D.stencil_func;Ca=A.stencil_opBack;la=D.stencil_opBack;qa=A.stencil_opFront;xa=D.stencil_opFront;ya=A.viewport;ja=D.viewport;Xb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);v=new Float32Array(16);r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];S=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(e){var c,d,b,r;c=N.next;c!==N.cur&&(c?a.bindFramebuffer(36160,c.framebuffer):a.bindFramebuffer(36160,null),N.cur=
c);if(D.dirty){var u;c=A.dither;c!==D.dither&&(c?a.enable(3024):a.disable(3024),D.dither=c);c=A.blend_enable;c!==D.blend_enable&&(c?a.enable(3042):a.disable(3042),D.blend_enable=c);c=da[0];b=da[1];r=da[2];u=da[3];if(c!==R[0]||b!==R[1]||r!==R[2]||u!==R[3])a.blendColor(c,b,r,u),R[0]=c,R[1]=b,R[2]=r,R[3]=u;c=P[0];b=P[1];if(c!==z[0]||b!==z[1])a.blendEquationSeparate(c,b),z[0]=c,z[1]=b;c=l[0];b=l[1];r=l[2];u=l[3];if(c!==K[0]||b!==K[1]||r!==K[2]||u!==K[3])a.blendFuncSeparate(c,b,r,u),K[0]=c,K[1]=b,K[2]=
r,K[3]=u;c=A.depth_enable;c!==D.depth_enable&&(c?a.enable(2929):a.disable(2929),D.depth_enable=c);c=A.depth_func;c!==D.depth_func&&(a.depthFunc(c),D.depth_func=c);c=oa[0];b=oa[1];if(c!==p[0]||b!==p[1])a.depthRange(c,b),p[0]=c,p[1]=b;c=A.depth_mask;c!==D.depth_mask&&(a.depthMask(c),D.depth_mask=c);c=J[0];b=J[1];r=J[2];u=J[3];if(c!==fa[0]||b!==fa[1]||r!==fa[2]||u!==fa[3])a.colorMask(c,b,r,u),fa[0]=c,fa[1]=b,fa[2]=r,fa[3]=u;c=A.cull_enable;c!==D.cull_enable&&(c?a.enable(2884):a.disable(2884),D.cull_enable=
c);c=A.cull_face;c!==D.cull_face&&(a.cullFace(c),D.cull_face=c);c=A.frontFace;c!==D.frontFace&&(a.frontFace(c),D.frontFace=c);c=A.lineWidth;c!==D.lineWidth&&(a.lineWidth(c),D.lineWidth=c);c=A.polygonOffset_enable;c!==D.polygonOffset_enable&&(c?a.enable(32823):a.disable(32823),D.polygonOffset_enable=c);c=F[0];b=F[1];if(c!==ca[0]||b!==ca[1])a.polygonOffset(c,b),ca[0]=c,ca[1]=b;c=A.sample_alpha;c!==D.sample_alpha&&(c?a.enable(32926):a.disable(32926),D.sample_alpha=c);c=A.sample_enable;c!==D.sample_enable&&
(c?a.enable(32928):a.disable(32928),D.sample_enable=c);c=Q[0];b=Q[1];if(c!==na[0]||b!==na[1])a.sampleCoverage(c,b),na[0]=c,na[1]=b;c=A.stencil_enable;c!==D.stencil_enable&&(c?a.enable(2960):a.disable(2960),D.stencil_enable=c);c=A.stencil_mask;c!==D.stencil_mask&&(a.stencilMask(c),D.stencil_mask=c);c=za[0];b=za[1];r=za[2];if(c!==ga[0]||b!==ga[1]||r!==ga[2])a.stencilFunc(c,b,r),ga[0]=c,ga[1]=b,ga[2]=r;c=qa[0];b=qa[1];r=qa[2];u=qa[3];if(c!==xa[0]||b!==xa[1]||r!==xa[2]||u!==xa[3])a.stencilOpSeparate(c,
b,r,u),xa[0]=c,xa[1]=b,xa[2]=r,xa[3]=u;c=Ca[0];b=Ca[1];r=Ca[2];u=Ca[3];if(c!==la[0]||b!==la[1]||r!==la[2]||u!==la[3])a.stencilOpSeparate(c,b,r,u),la[0]=c,la[1]=b,la[2]=r,la[3]=u;c=A.scissor_enable;c!==D.scissor_enable&&(c?a.enable(3089):a.disable(3089),D.scissor_enable=c);c=ra[0];b=ra[1];r=ra[2];u=ra[3];if(c!==Aa[0]||b!==Aa[1]||r!==Aa[2]||u!==Aa[3])a.scissor(c,b,r,u),Aa[0]=c,Aa[1]=b,Aa[2]=r,Aa[3]=u;c=ya[0];b=ya[1];r=ya[2];u=ya[3];if(c!==ja[0]||b!==ja[1]||r!==ja[2]||u!==ja[3])a.viewport(c,b,r,u),ja[0]=
c,ja[1]=b,ja[2]=r,ja[3]=u;D.dirty=!1}if(c=D.profile)d=performance.now(),I.count++;a.useProgram(g.program);W.setVAO(null);b=Y.location;r=V[b];r.buffer||a.enableVertexAttribArray(b);if(r.type!==k.dtype||3!==r.size||r.buffer!==k||!1!==r.normalized||0!==r.offset||0!==r.stride)a.bindBuffer(34962,k.buffer),a.vertexAttribPointer(b,3,k.dtype,!1,0,0),r.type=k.dtype,r.size=3,r.buffer=k,r.normalized=!1,r.offset=0,r.stride=0;a.uniformMatrix4fv(q.location,!1,Xb);b=n.call(this,E,e,0);ta(b)&&16===b.length||ba.commandRaise(f,
H);a.uniformMatrix4fv(w.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Ta[0]=b[0],Ta[1]=b[1],Ta[2]=b[2],Ta[3]=b[3],Ta[4]=b[4],Ta[5]=b[5],Ta[6]=b[6],Ta[7]=b[7],Ta[8]=b[8],Ta[9]=b[9],Ta[10]=b[10],Ta[11]=b[11],Ta[12]=b[12],Ta[13]=b[13],Ta[14]=b[14],Ta[15]=b[15],Ta));e=B.call(this,E,e,0);ta(e)&&16===e.length||ba.commandRaise(C,H);a.uniformMatrix4fv(h.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(v[0]=e[0],v[1]=e[1],v[2]=e[2],v[3]=e[3],v[4]=e[4],v[5]=e[5],v[6]=e[6],v[7]=e[7],v[8]=
e[8],v[9]=e[9],v[10]=e[10],v[11]=e[11],v[12]=e[12],v[13]=e[13],v[14]=e[14],v[15]=e[15],v));G&&a.bindBuffer(34963,G.buffer.buffer);e=G.primType;b=G.vertCount-0;0<=b||ba.commandRaise(U,H);b&&(a.drawElements(e,b,G.type,0<<(G.type-5121>>1)),W.setVAO(null),c&&(I.cpuTime+=performance.now()-d))},scope:function(a,c,d){var f,b,h,l,p,g,q,n,v,u,w,A,S,z,ja,Q,F,ga,B,C,J,K,N;if(f=D.profile)b=performance.now(),I.count++;h=e.elements;e.elements=y;l=e.offset;e.offset=0;p=y.vertCount-0;0<=p||ba.commandRaise(t,H);g=
e.count;e.count=p;q=y.primType;p=e.primitive;e.primitive=q;q=Z[3];Z[3]=r;n=m.call(this,E,a,d);v=Z[5];Z[5]=n;u=aa.call(this,E,a,d);n=Z[4];Z[4]=u;u=x.buffer;x.buffer=k;w=x.divisor;x.divisor=0;A=x.normalized;x.normalized=!1;S=x.offset;x.offset=0;z=x.size;x.size=0;ja=x.state;x.state=1;Q=x.stride;x.stride=0;F=x.type;x.type=k.dtype;ga=x.w;x.w=0;B=x.x;x.x=0;C=x.y;x.y=0;J=x.z;x.z=0;K=ka.vert;ka.vert=2;N=ka.frag;ka.frag=1;c(E,a,d);f&&(I.cpuTime+=performance.now()-b);e.elements=h;e.offset=l;e.count=g;e.primitive=
p;Z[3]=q;Z[5]=v;Z[4]=n;x.buffer=u;x.divisor=w;x.normalized=A;x.offset=S;x.size=z;x.state=ja;x.stride=Q;x.type=F;x.w=ga;x.x=B;x.y=C;x.z=J;ka.vert=K;ka.frag=N},batch:function(e,f){var b,g,r;b=N.next;b!==N.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),N.cur=b);if(D.dirty){var n,v,x;b=A.dither;b!==D.dither&&(b?a.enable(3024):a.disable(3024),D.dither=b);b=A.blend_enable;b!==D.blend_enable&&(b?a.enable(3042):a.disable(3042),D.blend_enable=b);b=da[0];n=da[1];v=da[2];x=da[3];
if(b!==R[0]||n!==R[1]||v!==R[2]||x!==R[3])a.blendColor(b,n,v,x),R[0]=b,R[1]=n,R[2]=v,R[3]=x;b=P[0];n=P[1];if(b!==z[0]||n!==z[1])a.blendEquationSeparate(b,n),z[0]=b,z[1]=n;b=l[0];n=l[1];v=l[2];x=l[3];if(b!==K[0]||n!==K[1]||v!==K[2]||x!==K[3])a.blendFuncSeparate(b,n,v,x),K[0]=b,K[1]=n,K[2]=v,K[3]=x;b=A.depth_enable;b!==D.depth_enable&&(b?a.enable(2929):a.disable(2929),D.depth_enable=b);b=A.depth_func;b!==D.depth_func&&(a.depthFunc(b),D.depth_func=b);b=oa[0];n=oa[1];if(b!==p[0]||n!==p[1])a.depthRange(b,
n),p[0]=b,p[1]=n;b=A.depth_mask;b!==D.depth_mask&&(a.depthMask(b),D.depth_mask=b);b=J[0];n=J[1];v=J[2];x=J[3];if(b!==fa[0]||n!==fa[1]||v!==fa[2]||x!==fa[3])a.colorMask(b,n,v,x),fa[0]=b,fa[1]=n,fa[2]=v,fa[3]=x;b=A.cull_enable;b!==D.cull_enable&&(b?a.enable(2884):a.disable(2884),D.cull_enable=b);b=A.cull_face;b!==D.cull_face&&(a.cullFace(b),D.cull_face=b);b=A.frontFace;b!==D.frontFace&&(a.frontFace(b),D.frontFace=b);b=A.lineWidth;b!==D.lineWidth&&(a.lineWidth(b),D.lineWidth=b);b=A.polygonOffset_enable;
b!==D.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),D.polygonOffset_enable=b);b=F[0];n=F[1];if(b!==ca[0]||n!==ca[1])a.polygonOffset(b,n),ca[0]=b,ca[1]=n;b=A.sample_alpha;b!==D.sample_alpha&&(b?a.enable(32926):a.disable(32926),D.sample_alpha=b);b=A.sample_enable;b!==D.sample_enable&&(b?a.enable(32928):a.disable(32928),D.sample_enable=b);b=Q[0];n=Q[1];if(b!==na[0]||n!==na[1])a.sampleCoverage(b,n),na[0]=b,na[1]=n;b=A.stencil_enable;b!==D.stencil_enable&&(b?a.enable(2960):a.disable(2960),
D.stencil_enable=b);b=A.stencil_mask;b!==D.stencil_mask&&(a.stencilMask(b),D.stencil_mask=b);b=za[0];n=za[1];v=za[2];if(b!==ga[0]||n!==ga[1]||v!==ga[2])a.stencilFunc(b,n,v),ga[0]=b,ga[1]=n,ga[2]=v;b=qa[0];n=qa[1];v=qa[2];x=qa[3];if(b!==xa[0]||n!==xa[1]||v!==xa[2]||x!==xa[3])a.stencilOpSeparate(b,n,v,x),xa[0]=b,xa[1]=n,xa[2]=v,xa[3]=x;b=Ca[0];n=Ca[1];v=Ca[2];x=Ca[3];if(b!==la[0]||n!==la[1]||v!==la[2]||x!==la[3])a.stencilOpSeparate(b,n,v,x),la[0]=b,la[1]=n,la[2]=v,la[3]=x;b=A.scissor_enable;b!==D.scissor_enable&&
(b?a.enable(3089):a.disable(3089),D.scissor_enable=b);b=ra[0];n=ra[1];v=ra[2];x=ra[3];if(b!==Aa[0]||n!==Aa[1]||v!==Aa[2]||x!==Aa[3])a.scissor(b,n,v,x),Aa[0]=b,Aa[1]=n,Aa[2]=v,Aa[3]=x;b=ya[0];n=ya[1];v=ya[2];x=ya[3];if(b!==ja[0]||n!==ja[1]||v!==ja[2]||x!==ja[3])a.viewport(b,n,v,x),ja[0]=b,ja[1]=n,ja[2]=v,ja[3]=x;D.dirty=!1}if(b=D.profile)g=performance.now(),I.count+=f;a.useProgram(M.program);W.setVAO(null);n=Y.location;v=V[n];v.buffer||a.enableVertexAttribArray(n);if(v.type!==k.dtype||3!==v.size||
v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)a.bindBuffer(34962,k.buffer),a.vertexAttribPointer(n,3,k.dtype,!1,0,0),v.type=k.dtype,v.size=3,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;a.uniformMatrix4fv(q.location,!1,S);n=u.call(this,E,void 0,r);ta(n)&&16===n.length||ba.commandRaise(O,H);a.uniformMatrix4fv(w.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(va[0]=n[0],va[1]=n[1],va[2]=n[2],va[3]=n[3],va[4]=n[4],va[5]=n[5],va[6]=n[6],va[7]=n[7],va[8]=n[8],va[9]=n[9],va[10]=
n[10],va[11]=n[11],va[12]=n[12],va[13]=n[13],va[14]=n[14],va[15]=n[15],va));r=ha.call(this,E,void 0,r);ta(r)&&16===r.length||ba.commandRaise(d,H);a.uniformMatrix4fv(h.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Fa[0]=r[0],Fa[1]=r[1],Fa[2]=r[2],Fa[3]=r[3],Fa[4]=r[4],Fa[5]=r[5],Fa[6]=r[6],Fa[7]=r[7],Fa[8]=r[8],Fa[9]=r[9],Fa[10]=r[10],Fa[11]=r[11],Fa[12]=r[12],Fa[13]=r[13],Fa[14]=r[14],Fa[15]=r[15],Fa));c&&a.bindBuffer(34963,c.buffer.buffer);n=c.primType;v=c.vertCount-0;0<=v||ba.commandRaise(T,
H);for(r=0;r<f;++r)v&&a.drawElements(n,v,c.type,0<<(c.type-5121>>1));W.setVAO(null);b&&(I.cpuTime+=performance.now()-g)}}},$20:function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha){var d,c,T,q,Y,h,w,V,E,D,e,N,a,ta,A,ka,Z,W,da,R,P,z,l,K,J,fa,oa,p,F,ca,Q,na,ra,Aa;d=b.context;c=b.current;T=b.framebuffer;q=b.gl;Y=b.next;h=b.shader;w=b.uniforms;V=b.vao;E=Y.blend_color;D=c.blend_color;e=Y.blend_equation;N=c.blend_equation;a=Y.blend_func;ta=c.blend_func;A=Y.colorMask;ka=c.colorMask;Z=Y.depth_range;W=c.depth_range;
da=Y.polygonOffset_offset;R=c.polygonOffset_offset;P=Y.sample_coverage;z=c.sample_coverage;l=Y.scissor_box;K=c.scissor_box;J=Y.stencil_func;fa=c.stencil_func;oa=Y.stencil_opBack;p=c.stencil_opBack;F=Y.stencil_opFront;ca=c.stencil_opFront;Q=Y.viewport;na=c.viewport;ra={};Aa={};return{draw:function(b){var u,x,w,t,y,m,ja,O,G,v,r,S,M;u=d.center;x=d.distance;w=d.eye;t=d.phi;y=d.projection;m=n.call(this,d,b,0);ja=d.theta;O=d.up;G=d.view;d.center=g;d.distance=2.302585092994046;d.eye=k;d.phi=0;d.projection=
m;d.theta=0;d.up=f;d.view=B;m=T.next;m!==T.cur&&(m?q.bindFramebuffer(36160,m.framebuffer):q.bindFramebuffer(36160,null),T.cur=m);if(c.dirty){m=Y.dither;m!==c.dither&&(m?q.enable(3024):q.disable(3024),c.dither=m);m=Y.blend_enable;m!==c.blend_enable&&(m?q.enable(3042):q.disable(3042),c.blend_enable=m);m=E[0];r=E[1];S=E[2];M=E[3];if(m!==D[0]||r!==D[1]||S!==D[2]||M!==D[3])q.blendColor(m,r,S,M),D[0]=m,D[1]=r,D[2]=S,D[3]=M;m=e[0];r=e[1];if(m!==N[0]||r!==N[1])q.blendEquationSeparate(m,r),N[0]=m,N[1]=r;m=
a[0];r=a[1];S=a[2];M=a[3];if(m!==ta[0]||r!==ta[1]||S!==ta[2]||M!==ta[3])q.blendFuncSeparate(m,r,S,M),ta[0]=m,ta[1]=r,ta[2]=S,ta[3]=M;m=Y.depth_enable;m!==c.depth_enable&&(m?q.enable(2929):q.disable(2929),c.depth_enable=m);m=Y.depth_func;m!==c.depth_func&&(q.depthFunc(m),c.depth_func=m);m=Z[0];r=Z[1];if(m!==W[0]||r!==W[1])q.depthRange(m,r),W[0]=m,W[1]=r;m=Y.depth_mask;m!==c.depth_mask&&(q.depthMask(m),c.depth_mask=m);m=A[0];r=A[1];S=A[2];M=A[3];if(m!==ka[0]||r!==ka[1]||S!==ka[2]||M!==ka[3])q.colorMask(m,
r,S,M),ka[0]=m,ka[1]=r,ka[2]=S,ka[3]=M;m=Y.cull_enable;m!==c.cull_enable&&(m?q.enable(2884):q.disable(2884),c.cull_enable=m);m=Y.cull_face;m!==c.cull_face&&(q.cullFace(m),c.cull_face=m);m=Y.frontFace;m!==c.frontFace&&(q.frontFace(m),c.frontFace=m);m=Y.lineWidth;m!==c.lineWidth&&(q.lineWidth(m),c.lineWidth=m);m=Y.polygonOffset_enable;m!==c.polygonOffset_enable&&(m?q.enable(32823):q.disable(32823),c.polygonOffset_enable=m);m=da[0];r=da[1];if(m!==R[0]||r!==R[1])q.polygonOffset(m,r),R[0]=m,R[1]=r;m=Y.sample_alpha;
m!==c.sample_alpha&&(m?q.enable(32926):q.disable(32926),c.sample_alpha=m);m=Y.sample_enable;m!==c.sample_enable&&(m?q.enable(32928):q.disable(32928),c.sample_enable=m);m=P[0];r=P[1];if(m!==z[0]||r!==z[1])q.sampleCoverage(m,r),z[0]=m,z[1]=r;m=Y.stencil_enable;m!==c.stencil_enable&&(m?q.enable(2960):q.disable(2960),c.stencil_enable=m);m=Y.stencil_mask;m!==c.stencil_mask&&(q.stencilMask(m),c.stencil_mask=m);m=J[0];r=J[1];S=J[2];if(m!==fa[0]||r!==fa[1]||S!==fa[2])q.stencilFunc(m,r,S),fa[0]=m,fa[1]=r,
fa[2]=S;m=F[0];r=F[1];S=F[2];M=F[3];if(m!==ca[0]||r!==ca[1]||S!==ca[2]||M!==ca[3])q.stencilOpSeparate(m,r,S,M),ca[0]=m,ca[1]=r,ca[2]=S,ca[3]=M;m=oa[0];r=oa[1];S=oa[2];M=oa[3];if(m!==p[0]||r!==p[1]||S!==p[2]||M!==p[3])q.stencilOpSeparate(m,r,S,M),p[0]=m,p[1]=r,p[2]=S,p[3]=M;m=Y.scissor_enable;m!==c.scissor_enable&&(m?q.enable(3089):q.disable(3089),c.scissor_enable=m);m=l[0];r=l[1];S=l[2];M=l[3];if(m!==K[0]||r!==K[1]||S!==K[2]||M!==K[3])q.scissor(m,r,S,M),K[0]=m,K[1]=r,K[2]=S,K[3]=M;m=Q[0];r=Q[1];S=
Q[2];M=Q[3];if(m!==na[0]||r!==na[1]||S!==na[2]||M!==na[3])q.viewport(m,r,S,M),na[0]=m,na[1]=r,na[2]=S,na[3]=M;c.dirty=!1}if(m=c.profile)v=performance.now(),I.count++;r=h.program(h.vert,h.frag,H);q.useProgram(r.program);V.setVAO(null);S=r.id;(M=ra[S])||(M=ra[S]=C(r));M.call(this,b);V.setVAO(null);d.center=u;d.distance=x;d.eye=w;d.phi=t;d.projection=y;d.theta=ja;d.up=O;d.view=G;m&&(I.cpuTime+=performance.now()-v)},scope:function(a,e,f){var b,k,h,l,p,n,g,q,r,u,x,A,z,D,E,L,Q,F,B;b=d.center;k=d.distance;
h=d.eye;l=d.phi;p=d.projection;n=y.call(this,d,a,f);g=d.theta;q=d.up;r=d.view;d.center=G;d.distance=2.302585092994046;d.eye=U;d.phi=0;d.projection=n;d.theta=0;d.up=t;d.view=m;if(n=c.profile)u=performance.now(),I.count++;x=d.center;A=w[1];w[1]=x;z=d.distance;x=w[2];w[2]=z;D=d.eye;z=w[3];w[3]=D;E=d.phi;D=w[4];w[4]=E;L=d.projection;E=w[5];w[5]=L;Q=d.theta;L=w[6];w[6]=Q;F=d.up;Q=w[7];w[7]=F;F=d.view;B=w[8];w[8]=F;e(d,a,f);d.center=b;d.distance=k;d.eye=h;d.phi=l;d.projection=p;d.theta=g;d.up=q;d.view=
r;n&&(I.cpuTime+=performance.now()-u);w[1]=A;w[2]=x;w[3]=z;w[4]=D;w[5]=E;w[6]=L;w[7]=Q;w[8]=B},batch:function(f,b){var k,n,g,w,t,m,y,B,v,r,S,C,G;k=d.center;n=d.distance;g=d.eye;w=d.phi;t=d.projection;m=M.call(this,d,f,0);y=d.theta;B=d.up;v=d.view;d.center=aa;d.distance=2.302585092994046;d.eye=x;d.phi=0;d.projection=m;d.theta=0;d.up=u;d.view=O;m=T.next;m!==T.cur&&(m?q.bindFramebuffer(36160,m.framebuffer):q.bindFramebuffer(36160,null),T.cur=m);if(c.dirty){m=Y.dither;m!==c.dither&&(m?q.enable(3024):
q.disable(3024),c.dither=m);m=Y.blend_enable;m!==c.blend_enable&&(m?q.enable(3042):q.disable(3042),c.blend_enable=m);m=E[0];S=E[1];C=E[2];G=E[3];if(m!==D[0]||S!==D[1]||C!==D[2]||G!==D[3])q.blendColor(m,S,C,G),D[0]=m,D[1]=S,D[2]=C,D[3]=G;m=e[0];S=e[1];if(m!==N[0]||S!==N[1])q.blendEquationSeparate(m,S),N[0]=m,N[1]=S;m=a[0];S=a[1];C=a[2];G=a[3];if(m!==ta[0]||S!==ta[1]||C!==ta[2]||G!==ta[3])q.blendFuncSeparate(m,S,C,G),ta[0]=m,ta[1]=S,ta[2]=C,ta[3]=G;m=Y.depth_enable;m!==c.depth_enable&&(m?q.enable(2929):
q.disable(2929),c.depth_enable=m);m=Y.depth_func;m!==c.depth_func&&(q.depthFunc(m),c.depth_func=m);m=Z[0];S=Z[1];if(m!==W[0]||S!==W[1])q.depthRange(m,S),W[0]=m,W[1]=S;m=Y.depth_mask;m!==c.depth_mask&&(q.depthMask(m),c.depth_mask=m);m=A[0];S=A[1];C=A[2];G=A[3];if(m!==ka[0]||S!==ka[1]||C!==ka[2]||G!==ka[3])q.colorMask(m,S,C,G),ka[0]=m,ka[1]=S,ka[2]=C,ka[3]=G;m=Y.cull_enable;m!==c.cull_enable&&(m?q.enable(2884):q.disable(2884),c.cull_enable=m);m=Y.cull_face;m!==c.cull_face&&(q.cullFace(m),c.cull_face=
m);m=Y.frontFace;m!==c.frontFace&&(q.frontFace(m),c.frontFace=m);m=Y.lineWidth;m!==c.lineWidth&&(q.lineWidth(m),c.lineWidth=m);m=Y.polygonOffset_enable;m!==c.polygonOffset_enable&&(m?q.enable(32823):q.disable(32823),c.polygonOffset_enable=m);m=da[0];S=da[1];if(m!==R[0]||S!==R[1])q.polygonOffset(m,S),R[0]=m,R[1]=S;m=Y.sample_alpha;m!==c.sample_alpha&&(m?q.enable(32926):q.disable(32926),c.sample_alpha=m);m=Y.sample_enable;m!==c.sample_enable&&(m?q.enable(32928):q.disable(32928),c.sample_enable=m);m=
P[0];S=P[1];if(m!==z[0]||S!==z[1])q.sampleCoverage(m,S),z[0]=m,z[1]=S;m=Y.stencil_enable;m!==c.stencil_enable&&(m?q.enable(2960):q.disable(2960),c.stencil_enable=m);m=Y.stencil_mask;m!==c.stencil_mask&&(q.stencilMask(m),c.stencil_mask=m);m=J[0];S=J[1];C=J[2];if(m!==fa[0]||S!==fa[1]||C!==fa[2])q.stencilFunc(m,S,C),fa[0]=m,fa[1]=S,fa[2]=C;m=F[0];S=F[1];C=F[2];G=F[3];if(m!==ca[0]||S!==ca[1]||C!==ca[2]||G!==ca[3])q.stencilOpSeparate(m,S,C,G),ca[0]=m,ca[1]=S,ca[2]=C,ca[3]=G;m=oa[0];S=oa[1];C=oa[2];G=oa[3];
if(m!==p[0]||S!==p[1]||C!==p[2]||G!==p[3])q.stencilOpSeparate(m,S,C,G),p[0]=m,p[1]=S,p[2]=C,p[3]=G;m=Y.scissor_enable;m!==c.scissor_enable&&(m?q.enable(3089):q.disable(3089),c.scissor_enable=m);m=l[0];S=l[1];C=l[2];G=l[3];if(m!==K[0]||S!==K[1]||C!==K[2]||G!==K[3])q.scissor(m,S,C,G),K[0]=m,K[1]=S,K[2]=C,K[3]=G;m=Q[0];S=Q[1];C=Q[2];G=Q[3];if(m!==na[0]||S!==na[1]||C!==na[2]||G!==na[3])q.viewport(m,S,C,G),na[0]=m,na[1]=S,na[2]=C,na[3]=G;c.dirty=!1}if(m=c.profile)r=performance.now(),I.count+=b;S=h.program(h.vert,
h.frag,H);q.useProgram(S.program);V.setVAO(null);C=S.id;(G=Aa[C])||(G=Aa[C]=ha(S));G.call(this,f,b);V.setVAO(null);d.center=k;d.distance=n;d.eye=g;d.phi=w;d.projection=t;d.theta=y;d.up=B;d.view=v;m&&(I.cpuTime+=performance.now()-r)}}},"$27,position,projection,tex,uv,view":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N){var a,Z,A,ka,fa,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja,Xb,Ta,v,r,S,va,Fa,Oa,Gb;a=b.attributes;Z=b.context;A=b.current;ka=b.draw;
fa=b.framebuffer;W=b.gl;da=b.isArrayLike;R=b.next;P=b.shader;z=b.uniforms;l=b.vao;K=R.blend_color;J=A.blend_color;Ea=R.blend_equation;oa=A.blend_equation;p=R.blend_func;F=A.blend_func;ca=R.colorMask;Q=A.colorMask;na=R.depth_range;ra=A.depth_range;Aa=R.polygonOffset_offset;za=A.polygonOffset_offset;ga=R.sample_coverage;Ca=A.sample_coverage;la=R.scissor_box;qa=A.scissor_box;xa=R.stencil_func;ya=A.stencil_func;ja=R.stencil_opBack;Xb=A.stencil_opBack;Ta=R.stencil_opFront;v=A.stencil_opFront;r=R.viewport;
S=A.viewport;va=new Float32Array(16);Fa=new Float32Array(16);Oa=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(c){var d,b,h,q;d=fa.next;d!==fa.cur&&(d?W.bindFramebuffer(36160,d.framebuffer):W.bindFramebuffer(36160,null),fa.cur=d);if(A.dirty){var u;d=R.dither;d!==A.dither&&(d?W.enable(3024):W.disable(3024),A.dither=d);d=R.blend_enable;d!==A.blend_enable&&(d?W.enable(3042):W.disable(3042),A.blend_enable=d);d=K[0];h=K[1];q=K[2];u=K[3];if(d!==J[0]||h!==J[1]||q!==J[2]||u!==J[3])W.blendColor(d,
h,q,u),J[0]=d,J[1]=h,J[2]=q,J[3]=u;d=Ea[0];h=Ea[1];if(d!==oa[0]||h!==oa[1])W.blendEquationSeparate(d,h),oa[0]=d,oa[1]=h;d=p[0];h=p[1];q=p[2];u=p[3];if(d!==F[0]||h!==F[1]||q!==F[2]||u!==F[3])W.blendFuncSeparate(d,h,q,u),F[0]=d,F[1]=h,F[2]=q,F[3]=u;d=R.depth_enable;d!==A.depth_enable&&(d?W.enable(2929):W.disable(2929),A.depth_enable=d);d=R.depth_func;d!==A.depth_func&&(W.depthFunc(d),A.depth_func=d);d=na[0];h=na[1];if(d!==ra[0]||h!==ra[1])W.depthRange(d,h),ra[0]=d,ra[1]=h;d=R.depth_mask;d!==A.depth_mask&&
(W.depthMask(d),A.depth_mask=d);d=ca[0];h=ca[1];q=ca[2];u=ca[3];if(d!==Q[0]||h!==Q[1]||q!==Q[2]||u!==Q[3])W.colorMask(d,h,q,u),Q[0]=d,Q[1]=h,Q[2]=q,Q[3]=u;d=R.cull_enable;d!==A.cull_enable&&(d?W.enable(2884):W.disable(2884),A.cull_enable=d);d=R.cull_face;d!==A.cull_face&&(W.cullFace(d),A.cull_face=d);d=R.frontFace;d!==A.frontFace&&(W.frontFace(d),A.frontFace=d);d=R.lineWidth;d!==A.lineWidth&&(W.lineWidth(d),A.lineWidth=d);d=R.polygonOffset_enable;d!==A.polygonOffset_enable&&(d?W.enable(32823):W.disable(32823),
A.polygonOffset_enable=d);d=Aa[0];h=Aa[1];if(d!==za[0]||h!==za[1])W.polygonOffset(d,h),za[0]=d,za[1]=h;d=R.sample_alpha;d!==A.sample_alpha&&(d?W.enable(32926):W.disable(32926),A.sample_alpha=d);d=R.sample_enable;d!==A.sample_enable&&(d?W.enable(32928):W.disable(32928),A.sample_enable=d);d=ga[0];h=ga[1];if(d!==Ca[0]||h!==Ca[1])W.sampleCoverage(d,h),Ca[0]=d,Ca[1]=h;d=R.stencil_enable;d!==A.stencil_enable&&(d?W.enable(2960):W.disable(2960),A.stencil_enable=d);d=R.stencil_mask;d!==A.stencil_mask&&(W.stencilMask(d),
A.stencil_mask=d);d=xa[0];h=xa[1];q=xa[2];if(d!==ya[0]||h!==ya[1]||q!==ya[2])W.stencilFunc(d,h,q),ya[0]=d,ya[1]=h,ya[2]=q;d=Ta[0];h=Ta[1];q=Ta[2];u=Ta[3];if(d!==v[0]||h!==v[1]||q!==v[2]||u!==v[3])W.stencilOpSeparate(d,h,q,u),v[0]=d,v[1]=h,v[2]=q,v[3]=u;d=ja[0];h=ja[1];q=ja[2];u=ja[3];if(d!==Xb[0]||h!==Xb[1]||q!==Xb[2]||u!==Xb[3])W.stencilOpSeparate(d,h,q,u),Xb[0]=d,Xb[1]=h,Xb[2]=q,Xb[3]=u;d=R.scissor_enable;d!==A.scissor_enable&&(d?W.enable(3089):W.disable(3089),A.scissor_enable=d);d=la[0];h=la[1];
q=la[2];u=la[3];if(d!==qa[0]||h!==qa[1]||q!==qa[2]||u!==qa[3])W.scissor(d,h,q,u),qa[0]=d,qa[1]=h,qa[2]=q,qa[3]=u;d=r[0];h=r[1];q=r[2];u=r[3];if(d!==S[0]||h!==S[1]||q!==S[2]||u!==S[3])W.viewport(d,h,q,u),S[0]=d,S[1]=h,S[2]=q,S[3]=u;A.dirty=!1}if(d=A.profile)b=performance.now(),I.count++;W.useProgram(g.program);l.setVAO(null);h=V.location;q=a[h];q.buffer||W.enableVertexAttribArray(h);if(q.type!==k.dtype||3!==q.size||q.buffer!==k||!1!==q.normalized||0!==q.offset||0!==q.stride)W.bindBuffer(34962,k.buffer),
W.vertexAttribPointer(h,3,k.dtype,!1,0,0),q.type=k.dtype,q.size=3,q.buffer=k,q.normalized=!1,q.offset=0,q.stride=0;h=e.location;q=a[h];q.buffer||W.enableVertexAttribArray(h);if(q.type!==n.dtype||2!==q.size||q.buffer!==n||!1!==q.normalized||0!==q.offset||0!==q.stride)W.bindBuffer(34962,n.buffer),W.vertexAttribPointer(h,2,n.dtype,!1,0,0),q.type=n.dtype,q.size=2,q.buffer=n,q.normalized=!1,q.offset=0,q.stride=0;h=f.call(this,Z,c,0);da(h)&&16===h.length||ba.commandRaise(B,H);W.uniformMatrix4fv(E.location,
!1,Array.isArray(h)||h instanceof Float32Array?h:(va[0]=h[0],va[1]=h[1],va[2]=h[2],va[3]=h[3],va[4]=h[4],va[5]=h[5],va[6]=h[6],va[7]=h[7],va[8]=h[8],va[9]=h[9],va[10]=h[10],va[11]=h[11],va[12]=h[12],va[13]=h[13],va[14]=h[14],va[15]=h[15],va));h=C.call(this,Z,c,0);da(h)&&16===h.length||ba.commandRaise(G,H);W.uniformMatrix4fv(N.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Fa[0]=h[0],Fa[1]=h[1],Fa[2]=h[2],Fa[3]=h[3],Fa[4]=h[4],Fa[5]=h[5],Fa[6]=h[6],Fa[7]=h[7],Fa[8]=h[8],Fa[9]=h[9],Fa[10]=
h[10],Fa[11]=h[11],Fa[12]=h[12],Fa[13]=h[13],Fa[14]=h[14],Fa[15]=h[15],Fa));(c=c.texture)&&"framebuffer"===c._reglType&&(c=c.color[0]);"function"===typeof c&&"texture2d"===c._reglType||ba.commandRaise(U,H);c=c._texture;W.uniform1i(D.location,c.bind());y&&W.bindBuffer(34963,y.buffer.buffer);h=y.primType;q=y.vertCount-0;0<=q||ba.commandRaise(t,H);q&&(W.drawElements(h,q,y.type,0<<(y.type-5121>>1)),l.setVAO(null),d&&(I.cpuTime+=performance.now()-b),c.unbind())},scope:function(a,c,d){var e,f,b,h,l,q,p,
g,r,v,w,S,t,D,E,y,Q,C,F,B,ga,G,J,K,N,T,R,ja,ra,U,Xb,za,ha,V,Y;if(e=A.profile)f=performance.now(),I.count++;b=ka.elements;ka.elements=m;h=ka.offset;ka.offset=0;l=m.vertCount-0;0<=l||ba.commandRaise(aa,H);q=ka.count;ka.count=l;p=m.primType;l=ka.primitive;ka.primitive=p;g=x.call(this,Z,a,d);p=z[3];z[3]=g;r=a.texture;g=z[5];z[5]=r;v=M.call(this,Z,a,d);r=z[4];z[4]=v;v=u.buffer;u.buffer=k;w=u.divisor;u.divisor=0;S=u.normalized;u.normalized=!1;t=u.offset;u.offset=0;D=u.size;u.size=0;E=u.state;u.state=1;
y=u.stride;u.stride=0;Q=u.type;u.type=k.dtype;C=u.w;u.w=0;F=u.x;u.x=0;B=u.y;u.y=0;ga=u.z;u.z=0;G=O.buffer;O.buffer=n;J=O.divisor;O.divisor=0;K=O.normalized;O.normalized=!1;N=O.offset;O.offset=0;T=O.size;O.size=0;R=O.state;O.state=1;ja=O.stride;O.stride=0;ra=O.type;O.type=n.dtype;U=O.w;O.w=0;Xb=O.x;O.x=0;za=O.y;O.y=0;ha=O.z;O.z=0;V=P.vert;P.vert=2;Y=P.frag;P.frag=1;c(Z,a,d);e&&(I.cpuTime+=performance.now()-f);ka.elements=b;ka.offset=h;ka.count=q;ka.primitive=l;z[3]=p;z[5]=g;z[4]=r;u.buffer=v;u.divisor=
w;u.normalized=S;u.offset=t;u.size=D;u.state=E;u.stride=y;u.type=Q;u.w=C;u.x=F;u.y=B;u.z=ga;O.buffer=G;O.divisor=J;O.normalized=K;O.offset=N;O.size=T;O.state=R;O.stride=ja;O.type=ra;O.w=U;O.x=Xb;O.y=za;O.z=ha;P.vert=V;P.frag=Y},batch:function(f,b){var g,u,m,x;g=fa.next;g!==fa.cur&&(g?W.bindFramebuffer(36160,g.framebuffer):W.bindFramebuffer(36160,null),fa.cur=g);if(A.dirty){var t,z,y;g=R.dither;g!==A.dither&&(g?W.enable(3024):W.disable(3024),A.dither=g);g=R.blend_enable;g!==A.blend_enable&&(g?W.enable(3042):
W.disable(3042),A.blend_enable=g);g=K[0];t=K[1];z=K[2];y=K[3];if(g!==J[0]||t!==J[1]||z!==J[2]||y!==J[3])W.blendColor(g,t,z,y),J[0]=g,J[1]=t,J[2]=z,J[3]=y;g=Ea[0];t=Ea[1];if(g!==oa[0]||t!==oa[1])W.blendEquationSeparate(g,t),oa[0]=g,oa[1]=t;g=p[0];t=p[1];z=p[2];y=p[3];if(g!==F[0]||t!==F[1]||z!==F[2]||y!==F[3])W.blendFuncSeparate(g,t,z,y),F[0]=g,F[1]=t,F[2]=z,F[3]=y;g=R.depth_enable;g!==A.depth_enable&&(g?W.enable(2929):W.disable(2929),A.depth_enable=g);g=R.depth_func;g!==A.depth_func&&(W.depthFunc(g),
A.depth_func=g);g=na[0];t=na[1];if(g!==ra[0]||t!==ra[1])W.depthRange(g,t),ra[0]=g,ra[1]=t;g=R.depth_mask;g!==A.depth_mask&&(W.depthMask(g),A.depth_mask=g);g=ca[0];t=ca[1];z=ca[2];y=ca[3];if(g!==Q[0]||t!==Q[1]||z!==Q[2]||y!==Q[3])W.colorMask(g,t,z,y),Q[0]=g,Q[1]=t,Q[2]=z,Q[3]=y;g=R.cull_enable;g!==A.cull_enable&&(g?W.enable(2884):W.disable(2884),A.cull_enable=g);g=R.cull_face;g!==A.cull_face&&(W.cullFace(g),A.cull_face=g);g=R.frontFace;g!==A.frontFace&&(W.frontFace(g),A.frontFace=g);g=R.lineWidth;
g!==A.lineWidth&&(W.lineWidth(g),A.lineWidth=g);g=R.polygonOffset_enable;g!==A.polygonOffset_enable&&(g?W.enable(32823):W.disable(32823),A.polygonOffset_enable=g);g=Aa[0];t=Aa[1];if(g!==za[0]||t!==za[1])W.polygonOffset(g,t),za[0]=g,za[1]=t;g=R.sample_alpha;g!==A.sample_alpha&&(g?W.enable(32926):W.disable(32926),A.sample_alpha=g);g=R.sample_enable;g!==A.sample_enable&&(g?W.enable(32928):W.disable(32928),A.sample_enable=g);g=ga[0];t=ga[1];if(g!==Ca[0]||t!==Ca[1])W.sampleCoverage(g,t),Ca[0]=g,Ca[1]=
t;g=R.stencil_enable;g!==A.stencil_enable&&(g?W.enable(2960):W.disable(2960),A.stencil_enable=g);g=R.stencil_mask;g!==A.stencil_mask&&(W.stencilMask(g),A.stencil_mask=g);g=xa[0];t=xa[1];z=xa[2];if(g!==ya[0]||t!==ya[1]||z!==ya[2])W.stencilFunc(g,t,z),ya[0]=g,ya[1]=t,ya[2]=z;g=Ta[0];t=Ta[1];z=Ta[2];y=Ta[3];if(g!==v[0]||t!==v[1]||z!==v[2]||y!==v[3])W.stencilOpSeparate(g,t,z,y),v[0]=g,v[1]=t,v[2]=z,v[3]=y;g=ja[0];t=ja[1];z=ja[2];y=ja[3];if(g!==Xb[0]||t!==Xb[1]||z!==Xb[2]||y!==Xb[3])W.stencilOpSeparate(g,
t,z,y),Xb[0]=g,Xb[1]=t,Xb[2]=z,Xb[3]=y;g=R.scissor_enable;g!==A.scissor_enable&&(g?W.enable(3089):W.disable(3089),A.scissor_enable=g);g=la[0];t=la[1];z=la[2];y=la[3];if(g!==qa[0]||t!==qa[1]||z!==qa[2]||y!==qa[3])W.scissor(g,t,z,y),qa[0]=g,qa[1]=t,qa[2]=z,qa[3]=y;g=r[0];t=r[1];z=r[2];y=r[3];if(g!==S[0]||t!==S[1]||z!==S[2]||y!==S[3])W.viewport(g,t,z,y),S[0]=g,S[1]=t,S[2]=z,S[3]=y;A.dirty=!1}if(g=A.profile)u=performance.now(),I.count+=b;W.useProgram(ha.program);l.setVAO(null);t=V.location;z=a[t];z.buffer||
W.enableVertexAttribArray(t);if(z.type!==k.dtype||3!==z.size||z.buffer!==k||!1!==z.normalized||0!==z.offset||0!==z.stride)W.bindBuffer(34962,k.buffer),W.vertexAttribPointer(t,3,k.dtype,!1,0,0),z.type=k.dtype,z.size=3,z.buffer=k,z.normalized=!1,z.offset=0,z.stride=0;t=e.location;z=a[t];z.buffer||W.enableVertexAttribArray(t);if(z.type!==n.dtype||2!==z.size||z.buffer!==n||!1!==z.normalized||0!==z.offset||0!==z.stride)W.bindBuffer(34962,n.buffer),W.vertexAttribPointer(t,2,n.dtype,!1,0,0),z.type=n.dtype,
z.size=2,z.buffer=n,z.normalized=!1,z.offset=0,z.stride=0;t=d.call(this,Z,x,m);da(t)&&16===t.length||ba.commandRaise(c,H);W.uniformMatrix4fv(E.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Oa[0]=t[0],Oa[1]=t[1],Oa[2]=t[2],Oa[3]=t[3],Oa[4]=t[4],Oa[5]=t[5],Oa[6]=t[6],Oa[7]=t[7],Oa[8]=t[8],Oa[9]=t[9],Oa[10]=t[10],Oa[11]=t[11],Oa[12]=t[12],Oa[13]=t[13],Oa[14]=t[14],Oa[15]=t[15],Oa));m=T.call(this,Z,x,m);da(m)&&16===m.length||ba.commandRaise(q,H);W.uniformMatrix4fv(N.location,!1,Array.isArray(m)||
m instanceof Float32Array?m:(Gb[0]=m[0],Gb[1]=m[1],Gb[2]=m[2],Gb[3]=m[3],Gb[4]=m[4],Gb[5]=m[5],Gb[6]=m[6],Gb[7]=m[7],Gb[8]=m[8],Gb[9]=m[9],Gb[10]=m[10],Gb[11]=m[11],Gb[12]=m[12],Gb[13]=m[13],Gb[14]=m[14],Gb[15]=m[15],Gb));h&&W.bindBuffer(34963,h.buffer.buffer);t=h.primType;z=h.vertCount-0;0<=z||ba.commandRaise(w,H);for(m=0;m<b;++m)x=f[m],(x=x.texture)&&"framebuffer"===x._reglType&&(x=x.color[0]),"function"===typeof x&&"texture2d"===x._reglType||ba.commandRaise(Y,H),x=x._texture,W.uniform1i(D.location,
x.bind()),z&&(W.drawElements(t,z,h.type,0<<(h.type-5121>>1)),x.unbind());l.setVAO(null);g&&(I.cpuTime+=performance.now()-u)}}},"$19,normal,position,projection,view":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T){var q,Y,h,w,V,E,D,e,N,a,Z,A,ka,fa,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa,ya,ja;q=b.attributes;Y=b.context;h=b.current;w=b.draw;V=b.framebuffer;E=b.gl;D=b.isArrayLike;e=b.next;N=b.shader;a=b.uniforms;Z=b.vao;A=e.blend_color;ka=h.blend_color;fa=e.blend_equation;
W=h.blend_equation;da=e.blend_func;R=h.blend_func;P=e.colorMask;z=h.colorMask;l=e.depth_range;K=h.depth_range;J=e.polygonOffset_offset;Ea=h.polygonOffset_offset;oa=e.sample_coverage;p=h.sample_coverage;F=e.scissor_box;ca=h.scissor_box;Q=e.stencil_func;na=h.stencil_func;ra=e.stencil_opBack;Aa=h.stencil_opBack;za=e.stencil_opFront;ga=h.stencil_opFront;Ca=e.viewport;la=h.viewport;qa=new Float32Array(16);xa=new Float32Array(16);ya=new Float32Array(16);ja=new Float32Array(16);return{draw:function(b){var u,
v,r;b=V.next;b!==V.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),V.cur=b);if(h.dirty){var m;b=e.dither;b!==h.dither&&(b?E.enable(3024):E.disable(3024),h.dither=b);b=e.blend_enable;b!==h.blend_enable&&(b?E.enable(3042):E.disable(3042),h.blend_enable=b);b=A[0];v=A[1];r=A[2];m=A[3];if(b!==ka[0]||v!==ka[1]||r!==ka[2]||m!==ka[3])E.blendColor(b,v,r,m),ka[0]=b,ka[1]=v,ka[2]=r,ka[3]=m;b=fa[0];v=fa[1];if(b!==W[0]||v!==W[1])E.blendEquationSeparate(b,v),W[0]=b,W[1]=v;b=da[0];v=
da[1];r=da[2];m=da[3];if(b!==R[0]||v!==R[1]||r!==R[2]||m!==R[3])E.blendFuncSeparate(b,v,r,m),R[0]=b,R[1]=v,R[2]=r,R[3]=m;b=e.depth_enable;b!==h.depth_enable&&(b?E.enable(2929):E.disable(2929),h.depth_enable=b);b=e.depth_func;b!==h.depth_func&&(E.depthFunc(b),h.depth_func=b);b=l[0];v=l[1];if(b!==K[0]||v!==K[1])E.depthRange(b,v),K[0]=b,K[1]=v;b=e.depth_mask;b!==h.depth_mask&&(E.depthMask(b),h.depth_mask=b);b=P[0];v=P[1];r=P[2];m=P[3];if(b!==z[0]||v!==z[1]||r!==z[2]||m!==z[3])E.colorMask(b,v,r,m),z[0]=
b,z[1]=v,z[2]=r,z[3]=m;b=e.cull_enable;b!==h.cull_enable&&(b?E.enable(2884):E.disable(2884),h.cull_enable=b);b=e.cull_face;b!==h.cull_face&&(E.cullFace(b),h.cull_face=b);b=e.frontFace;b!==h.frontFace&&(E.frontFace(b),h.frontFace=b);b=e.lineWidth;b!==h.lineWidth&&(E.lineWidth(b),h.lineWidth=b);b=e.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),h.polygonOffset_enable=b);b=J[0];v=J[1];if(b!==Ea[0]||v!==Ea[1])E.polygonOffset(b,v),Ea[0]=b,Ea[1]=v;b=e.sample_alpha;
b!==h.sample_alpha&&(b?E.enable(32926):E.disable(32926),h.sample_alpha=b);b=e.sample_enable;b!==h.sample_enable&&(b?E.enable(32928):E.disable(32928),h.sample_enable=b);b=oa[0];v=oa[1];if(b!==p[0]||v!==p[1])E.sampleCoverage(b,v),p[0]=b,p[1]=v;b=e.stencil_enable;b!==h.stencil_enable&&(b?E.enable(2960):E.disable(2960),h.stencil_enable=b);b=e.stencil_mask;b!==h.stencil_mask&&(E.stencilMask(b),h.stencil_mask=b);b=Q[0];v=Q[1];r=Q[2];if(b!==na[0]||v!==na[1]||r!==na[2])E.stencilFunc(b,v,r),na[0]=b,na[1]=
v,na[2]=r;b=za[0];v=za[1];r=za[2];m=za[3];if(b!==ga[0]||v!==ga[1]||r!==ga[2]||m!==ga[3])E.stencilOpSeparate(b,v,r,m),ga[0]=b,ga[1]=v,ga[2]=r,ga[3]=m;b=ra[0];v=ra[1];r=ra[2];m=ra[3];if(b!==Aa[0]||v!==Aa[1]||r!==Aa[2]||m!==Aa[3])E.stencilOpSeparate(b,v,r,m),Aa[0]=b,Aa[1]=v,Aa[2]=r,Aa[3]=m;b=e.scissor_enable;b!==h.scissor_enable&&(b?E.enable(3089):E.disable(3089),h.scissor_enable=b);b=F[0];v=F[1];r=F[2];m=F[3];if(b!==ca[0]||v!==ca[1]||r!==ca[2]||m!==ca[3])E.scissor(b,v,r,m),ca[0]=b,ca[1]=v,ca[2]=r,ca[3]=
m;b=Ca[0];v=Ca[1];r=Ca[2];m=Ca[3];if(b!==la[0]||v!==la[1]||r!==la[2]||m!==la[3])E.viewport(b,v,r,m),la[0]=b,la[1]=v,la[2]=r,la[3]=m;h.dirty=!1}if(b=h.profile)u=performance.now(),I.count++;E.useProgram(g.program);Z.setVAO(null);v=d.location;r=q[v];r.buffer||E.enableVertexAttribArray(v);if(r.type!==k.dtype||3!==r.size||r.buffer!==k||!1!==r.normalized||0!==r.offset||0!==r.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(v,3,k.dtype,!1,0,0),r.type=k.dtype,r.size=3,r.buffer=k,r.normalized=!1,
r.offset=0,r.stride=0;v=ha.location;r=q[v];r.buffer||E.enableVertexAttribArray(v);if(r.type!==n.dtype||3!==r.size||r.buffer!==n||!1!==r.normalized||0!==r.offset||0!==r.stride)E.bindBuffer(34962,n.buffer),E.vertexAttribPointer(v,3,n.dtype,!1,0,0),r.type=n.dtype,r.size=3,r.buffer=n,r.normalized=!1,r.offset=0,r.stride=0;v=a[5];D(v)&&16===v.length||ba.commandRaise(f,H);E.uniformMatrix4fv(c.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(qa[0]=v[0],qa[1]=v[1],qa[2]=v[2],qa[3]=v[3],qa[4]=v[4],
qa[5]=v[5],qa[6]=v[6],qa[7]=v[7],qa[8]=v[8],qa[9]=v[9],qa[10]=v[10],qa[11]=v[11],qa[12]=v[12],qa[13]=v[13],qa[14]=v[14],qa[15]=v[15],qa));v=a[8];D(v)&&16===v.length||ba.commandRaise(B,H);E.uniformMatrix4fv(T.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(xa[0]=v[0],xa[1]=v[1],xa[2]=v[2],xa[3]=v[3],xa[4]=v[4],xa[5]=v[5],xa[6]=v[6],xa[7]=v[7],xa[8]=v[8],xa[9]=v[9],xa[10]=v[10],xa[11]=v[11],xa[12]=v[12],xa[13]=v[13],xa[14]=v[14],xa[15]=v[15],xa));C&&E.bindBuffer(34963,C.buffer.buffer);v=
C.primType;r=C.vertCount-0;0<=r||ba.commandRaise(G,H);r&&(E.drawElements(v,r,C.type,0<<(C.type-5121>>1)),Z.setVAO(null),b&&(I.cpuTime+=performance.now()-u))},scope:function(a,c,d){var e,b,f,l,g,p,q,u,x,z,A,D,E,Q,C,F,B,ga,G,J,K,M,O,P,T,R,ja,ra,za,ha,V,W;if(e=h.profile)b=performance.now(),I.count++;f=w.elements;w.elements=U;l=w.offset;w.offset=0;g=U.vertCount-0;0<=g||ba.commandRaise(y,H);p=w.count;w.count=g;q=U.primType;g=w.primitive;w.primitive=q;q=t.buffer;t.buffer=n;u=t.divisor;t.divisor=0;x=t.normalized;
t.normalized=!1;z=t.offset;t.offset=0;A=t.size;t.size=0;D=t.state;t.state=1;E=t.stride;t.stride=0;Q=t.type;t.type=n.dtype;C=t.w;t.w=0;F=t.x;t.x=0;B=t.y;t.y=0;ga=t.z;t.z=0;G=m.buffer;m.buffer=k;J=m.divisor;m.divisor=0;K=m.normalized;m.normalized=!1;M=m.offset;m.offset=0;O=m.size;m.size=0;P=m.state;m.state=1;T=m.stride;m.stride=0;R=m.type;m.type=k.dtype;ja=m.w;m.w=0;ra=m.x;m.x=0;za=m.y;m.y=0;ha=m.z;m.z=0;V=N.vert;N.vert=10;W=N.frag;N.frag=9;c(Y,a,d);e&&(I.cpuTime+=performance.now()-b);w.elements=f;
w.offset=l;w.count=p;w.primitive=g;t.buffer=q;t.divisor=u;t.normalized=x;t.offset=z;t.size=A;t.state=D;t.stride=E;t.type=Q;t.w=C;t.x=F;t.y=B;t.z=ga;m.buffer=G;m.divisor=J;m.normalized=K;m.offset=M;m.size=O;m.state=P;m.stride=T;m.type=R;m.w=ja;m.x=ra;m.y=za;m.z=ha;N.vert=V;N.frag=W},batch:function(b,f){var g,r,m;g=V.next;g!==V.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),V.cur=g);if(h.dirty){var t,w;g=e.dither;g!==h.dither&&(g?E.enable(3024):E.disable(3024),h.dither=
g);g=e.blend_enable;g!==h.blend_enable&&(g?E.enable(3042):E.disable(3042),h.blend_enable=g);g=A[0];m=A[1];t=A[2];w=A[3];if(g!==ka[0]||m!==ka[1]||t!==ka[2]||w!==ka[3])E.blendColor(g,m,t,w),ka[0]=g,ka[1]=m,ka[2]=t,ka[3]=w;g=fa[0];m=fa[1];if(g!==W[0]||m!==W[1])E.blendEquationSeparate(g,m),W[0]=g,W[1]=m;g=da[0];m=da[1];t=da[2];w=da[3];if(g!==R[0]||m!==R[1]||t!==R[2]||w!==R[3])E.blendFuncSeparate(g,m,t,w),R[0]=g,R[1]=m,R[2]=t,R[3]=w;g=e.depth_enable;g!==h.depth_enable&&(g?E.enable(2929):E.disable(2929),
h.depth_enable=g);g=e.depth_func;g!==h.depth_func&&(E.depthFunc(g),h.depth_func=g);g=l[0];m=l[1];if(g!==K[0]||m!==K[1])E.depthRange(g,m),K[0]=g,K[1]=m;g=e.depth_mask;g!==h.depth_mask&&(E.depthMask(g),h.depth_mask=g);g=P[0];m=P[1];t=P[2];w=P[3];if(g!==z[0]||m!==z[1]||t!==z[2]||w!==z[3])E.colorMask(g,m,t,w),z[0]=g,z[1]=m,z[2]=t,z[3]=w;g=e.cull_enable;g!==h.cull_enable&&(g?E.enable(2884):E.disable(2884),h.cull_enable=g);g=e.cull_face;g!==h.cull_face&&(E.cullFace(g),h.cull_face=g);g=e.frontFace;g!==h.frontFace&&
(E.frontFace(g),h.frontFace=g);g=e.lineWidth;g!==h.lineWidth&&(E.lineWidth(g),h.lineWidth=g);g=e.polygonOffset_enable;g!==h.polygonOffset_enable&&(g?E.enable(32823):E.disable(32823),h.polygonOffset_enable=g);g=J[0];m=J[1];if(g!==Ea[0]||m!==Ea[1])E.polygonOffset(g,m),Ea[0]=g,Ea[1]=m;g=e.sample_alpha;g!==h.sample_alpha&&(g?E.enable(32926):E.disable(32926),h.sample_alpha=g);g=e.sample_enable;g!==h.sample_enable&&(g?E.enable(32928):E.disable(32928),h.sample_enable=g);g=oa[0];m=oa[1];if(g!==p[0]||m!==
p[1])E.sampleCoverage(g,m),p[0]=g,p[1]=m;g=e.stencil_enable;g!==h.stencil_enable&&(g?E.enable(2960):E.disable(2960),h.stencil_enable=g);g=e.stencil_mask;g!==h.stencil_mask&&(E.stencilMask(g),h.stencil_mask=g);g=Q[0];m=Q[1];t=Q[2];if(g!==na[0]||m!==na[1]||t!==na[2])E.stencilFunc(g,m,t),na[0]=g,na[1]=m,na[2]=t;g=za[0];m=za[1];t=za[2];w=za[3];if(g!==ga[0]||m!==ga[1]||t!==ga[2]||w!==ga[3])E.stencilOpSeparate(g,m,t,w),ga[0]=g,ga[1]=m,ga[2]=t,ga[3]=w;g=ra[0];m=ra[1];t=ra[2];w=ra[3];if(g!==Aa[0]||m!==Aa[1]||
t!==Aa[2]||w!==Aa[3])E.stencilOpSeparate(g,m,t,w),Aa[0]=g,Aa[1]=m,Aa[2]=t,Aa[3]=w;g=e.scissor_enable;g!==h.scissor_enable&&(g?E.enable(3089):E.disable(3089),h.scissor_enable=g);g=F[0];m=F[1];t=F[2];w=F[3];if(g!==ca[0]||m!==ca[1]||t!==ca[2]||w!==ca[3])E.scissor(g,m,t,w),ca[0]=g,ca[1]=m,ca[2]=t,ca[3]=w;g=Ca[0];m=Ca[1];t=Ca[2];w=Ca[3];if(g!==la[0]||m!==la[1]||t!==la[2]||w!==la[3])E.viewport(g,m,t,w),la[0]=g,la[1]=m,la[2]=t,la[3]=w;h.dirty=!1}if(g=h.profile)r=performance.now(),I.count+=f;E.useProgram(aa.program);
Z.setVAO(null);m=d.location;t=q[m];t.buffer||E.enableVertexAttribArray(m);if(t.type!==k.dtype||3!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||0!==t.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(m,3,k.dtype,!1,0,0),t.type=k.dtype,t.size=3,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=0;m=ha.location;t=q[m];t.buffer||E.enableVertexAttribArray(m);if(t.type!==n.dtype||3!==t.size||t.buffer!==n||!1!==t.normalized||0!==t.offset||0!==t.stride)E.bindBuffer(34962,n.buffer),E.vertexAttribPointer(m,
3,n.dtype,!1,0,0),t.type=n.dtype,t.size=3,t.buffer=n,t.normalized=!1,t.offset=0,t.stride=0;m=a[5];D(m)&&16===m.length||ba.commandRaise(x,H);E.uniformMatrix4fv(c.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(ya[0]=m[0],ya[1]=m[1],ya[2]=m[2],ya[3]=m[3],ya[4]=m[4],ya[5]=m[5],ya[6]=m[6],ya[7]=m[7],ya[8]=m[8],ya[9]=m[9],ya[10]=m[10],ya[11]=m[11],ya[12]=m[12],ya[13]=m[13],ya[14]=m[14],ya[15]=m[15],ya));m=a[8];D(m)&&16===m.length||ba.commandRaise(M,H);E.uniformMatrix4fv(T.location,!1,Array.isArray(m)||
m instanceof Float32Array?m:(ja[0]=m[0],ja[1]=m[1],ja[2]=m[2],ja[3]=m[3],ja[4]=m[4],ja[5]=m[5],ja[6]=m[6],ja[7]=m[7],ja[8]=m[8],ja[9]=m[9],ja[10]=m[10],ja[11]=m[11],ja[12]=m[12],ja[13]=m[13],ja[14]=m[14],ja[15]=m[15],ja));u&&E.bindBuffer(34963,u.buffer.buffer);t=u.primType;w=u.vertCount-0;0<=w||ba.commandRaise(O,H);for(m=0;m<f;++m)w&&E.drawElements(t,w,u.type,0<<(u.type-5121>>1));Z.setVAO(null);g&&(I.cpuTime+=performance.now()-r)}}},"$14,angle,color,position":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,
m,aa,x,M){var u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,Z,A,ka,fa,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca,Q,na,ra;u=b.attributes;O=b.context;ha=b.current;d=b.draw;c=b.elements;T=b.framebuffer;q=b.gl;Y=b.isArrayLike;h=b.next;w=b.shader;V=b.uniforms;E=b.vao;D=h.blend_color;e=ha.blend_color;N=h.blend_equation;a=ha.blend_equation;Z=h.blend_func;A=ha.blend_func;ka=h.colorMask;fa=ha.colorMask;W=h.depth_range;da=ha.depth_range;R=h.polygonOffset_offset;P=ha.polygonOffset_offset;z=h.sample_coverage;l=ha.sample_coverage;K=h.scissor_box;
J=ha.scissor_box;Ea=h.stencil_func;oa=ha.stencil_func;p=h.stencil_opBack;F=ha.stencil_opBack;ca=h.stencil_opFront;Q=ha.stencil_opFront;na=h.viewport;ra=ha.viewport;return{draw:function(b){var m,t,w,y;m=T.next;m!==T.cur&&(m?q.bindFramebuffer(36160,m.framebuffer):q.bindFramebuffer(36160,null),T.cur=m);if(ha.dirty){var C;m=h.dither;m!==ha.dither&&(m?q.enable(3024):q.disable(3024),ha.dither=m);m=h.blend_enable;m!==ha.blend_enable&&(m?q.enable(3042):q.disable(3042),ha.blend_enable=m);m=D[0];w=D[1];y=D[2];
C=D[3];if(m!==e[0]||w!==e[1]||y!==e[2]||C!==e[3])q.blendColor(m,w,y,C),e[0]=m,e[1]=w,e[2]=y,e[3]=C;m=N[0];w=N[1];if(m!==a[0]||w!==a[1])q.blendEquationSeparate(m,w),a[0]=m,a[1]=w;m=Z[0];w=Z[1];y=Z[2];C=Z[3];if(m!==A[0]||w!==A[1]||y!==A[2]||C!==A[3])q.blendFuncSeparate(m,w,y,C),A[0]=m,A[1]=w,A[2]=y,A[3]=C;m=h.depth_func;m!==ha.depth_func&&(q.depthFunc(m),ha.depth_func=m);m=W[0];w=W[1];if(m!==da[0]||w!==da[1])q.depthRange(m,w),da[0]=m,da[1]=w;m=h.depth_mask;m!==ha.depth_mask&&(q.depthMask(m),ha.depth_mask=
m);m=ka[0];w=ka[1];y=ka[2];C=ka[3];if(m!==fa[0]||w!==fa[1]||y!==fa[2]||C!==fa[3])q.colorMask(m,w,y,C),fa[0]=m,fa[1]=w,fa[2]=y,fa[3]=C;m=h.cull_enable;m!==ha.cull_enable&&(m?q.enable(2884):q.disable(2884),ha.cull_enable=m);m=h.cull_face;m!==ha.cull_face&&(q.cullFace(m),ha.cull_face=m);m=h.frontFace;m!==ha.frontFace&&(q.frontFace(m),ha.frontFace=m);m=h.lineWidth;m!==ha.lineWidth&&(q.lineWidth(m),ha.lineWidth=m);m=h.polygonOffset_enable;m!==ha.polygonOffset_enable&&(m?q.enable(32823):q.disable(32823),
ha.polygonOffset_enable=m);m=R[0];w=R[1];if(m!==P[0]||w!==P[1])q.polygonOffset(m,w),P[0]=m,P[1]=w;m=h.sample_alpha;m!==ha.sample_alpha&&(m?q.enable(32926):q.disable(32926),ha.sample_alpha=m);m=h.sample_enable;m!==ha.sample_enable&&(m?q.enable(32928):q.disable(32928),ha.sample_enable=m);m=z[0];w=z[1];if(m!==l[0]||w!==l[1])q.sampleCoverage(m,w),l[0]=m,l[1]=w;m=h.stencil_enable;m!==ha.stencil_enable&&(m?q.enable(2960):q.disable(2960),ha.stencil_enable=m);m=h.stencil_mask;m!==ha.stencil_mask&&(q.stencilMask(m),
ha.stencil_mask=m);m=Ea[0];w=Ea[1];y=Ea[2];if(m!==oa[0]||w!==oa[1]||y!==oa[2])q.stencilFunc(m,w,y),oa[0]=m,oa[1]=w,oa[2]=y;m=ca[0];w=ca[1];y=ca[2];C=ca[3];if(m!==Q[0]||w!==Q[1]||y!==Q[2]||C!==Q[3])q.stencilOpSeparate(m,w,y,C),Q[0]=m,Q[1]=w,Q[2]=y,Q[3]=C;m=p[0];w=p[1];y=p[2];C=p[3];if(m!==F[0]||w!==F[1]||y!==F[2]||C!==F[3])q.stencilOpSeparate(m,w,y,C),F[0]=m,F[1]=w,F[2]=y,F[3]=C;m=h.scissor_enable;m!==ha.scissor_enable&&(m?q.enable(3089):q.disable(3089),ha.scissor_enable=m);m=K[0];w=K[1];y=K[2];C=
K[3];if(m!==J[0]||w!==J[1]||y!==J[2]||C!==J[3])q.scissor(m,w,y,C),J[0]=m,J[1]=w,J[2]=y,J[3]=C;m=na[0];w=na[1];y=na[2];C=na[3];if(m!==ra[0]||w!==ra[1]||y!==ra[2]||C!==ra[3])q.viewport(m,w,y,C),ra[0]=m,ra[1]=w,ra[2]=y,ra[3]=C}q.disable(2929);ha.depth_enable=!1;if(m=ha.profile)t=performance.now(),I.count++;q.useProgram(g.program);E.setVAO(null);w=M.location;y=u[w];y.buffer||q.enableVertexAttribArray(w);if(y.type!==k.dtype||2!==y.size||y.buffer!==k||!1!==y.normalized||0!==y.offset||0!==y.stride)q.bindBuffer(34962,
k.buffer),q.vertexAttribPointer(w,2,k.dtype,!1,0,0),y.type=k.dtype,y.size=2,y.buffer=k,y.normalized=!1,y.offset=0,y.stride=0;w=n.call(this,O,b,0);"number"!==typeof w&&ba.commandRaise(f,H);q.uniform1f(aa.location,w);b=b.color;Y(b)&&4===b.length||ba.commandRaise(B,H);q.uniform4f(x.location,b[0],b[1],b[2],b[3]);(b=d.elements)?q.bindBuffer(34963,b.buffer.buffer):E.currentVAO&&(b=c.getElements(E.currentVAO.elements))&&q.bindBuffer(34963,b.buffer.buffer);w=d.primitive;y=d.offset;b?q.drawElements(w,3,b.type,
y<<(b.type-5121>>1)):q.drawArrays(w,y,3);ha.dirty=!0;E.setVAO(null);m&&(I.cpuTime+=performance.now()-t)},scope:function(a,c,e){var b,f,g,l,q,p,n,m,v,r,u,t,x,z,A,y,D,E,Q,F;b=h.depth_enable;h.depth_enable=!1;if(f=ha.profile)g=performance.now(),I.count++;l=d.count;d.count=3;q=C.call(this,O,a,e);p=V[3];V[3]=q;n=a.color;q=V[4];V[4]=n;n=G.buffer;G.buffer=k;m=G.divisor;G.divisor=0;v=G.normalized;G.normalized=!1;r=G.offset;G.offset=0;u=G.size;G.size=0;t=G.state;G.state=1;x=G.stride;G.stride=0;z=G.type;G.type=
k.dtype;A=G.w;G.w=0;y=G.x;G.x=0;D=G.y;G.y=0;E=G.z;G.z=0;Q=w.vert;w.vert=2;F=w.frag;w.frag=1;ha.dirty=!0;c(O,a,e);h.depth_enable=b;f&&(I.cpuTime+=performance.now()-g);d.count=l;V[3]=p;V[4]=q;G.buffer=n;G.divisor=m;G.normalized=v;G.offset=r;G.size=u;G.state=t;G.stride=x;G.type=z;G.w=A;G.x=y;G.y=D;G.z=E;w.vert=Q;w.frag=F;ha.dirty=!0},batch:function(b,f){var g,n,w,C;g=T.next;g!==T.cur&&(g?q.bindFramebuffer(36160,g.framebuffer):q.bindFramebuffer(36160,null),T.cur=g);if(ha.dirty){var B,G,ja;g=h.dither;
g!==ha.dither&&(g?q.enable(3024):q.disable(3024),ha.dither=g);g=h.blend_enable;g!==ha.blend_enable&&(g?q.enable(3042):q.disable(3042),ha.blend_enable=g);g=D[0];B=D[1];G=D[2];ja=D[3];if(g!==e[0]||B!==e[1]||G!==e[2]||ja!==e[3])q.blendColor(g,B,G,ja),e[0]=g,e[1]=B,e[2]=G,e[3]=ja;g=N[0];B=N[1];if(g!==a[0]||B!==a[1])q.blendEquationSeparate(g,B),a[0]=g,a[1]=B;g=Z[0];B=Z[1];G=Z[2];ja=Z[3];if(g!==A[0]||B!==A[1]||G!==A[2]||ja!==A[3])q.blendFuncSeparate(g,B,G,ja),A[0]=g,A[1]=B,A[2]=G,A[3]=ja;g=h.depth_func;
g!==ha.depth_func&&(q.depthFunc(g),ha.depth_func=g);g=W[0];B=W[1];if(g!==da[0]||B!==da[1])q.depthRange(g,B),da[0]=g,da[1]=B;g=h.depth_mask;g!==ha.depth_mask&&(q.depthMask(g),ha.depth_mask=g);g=ka[0];B=ka[1];G=ka[2];ja=ka[3];if(g!==fa[0]||B!==fa[1]||G!==fa[2]||ja!==fa[3])q.colorMask(g,B,G,ja),fa[0]=g,fa[1]=B,fa[2]=G,fa[3]=ja;g=h.cull_enable;g!==ha.cull_enable&&(g?q.enable(2884):q.disable(2884),ha.cull_enable=g);g=h.cull_face;g!==ha.cull_face&&(q.cullFace(g),ha.cull_face=g);g=h.frontFace;g!==ha.frontFace&&
(q.frontFace(g),ha.frontFace=g);g=h.lineWidth;g!==ha.lineWidth&&(q.lineWidth(g),ha.lineWidth=g);g=h.polygonOffset_enable;g!==ha.polygonOffset_enable&&(g?q.enable(32823):q.disable(32823),ha.polygonOffset_enable=g);g=R[0];B=R[1];if(g!==P[0]||B!==P[1])q.polygonOffset(g,B),P[0]=g,P[1]=B;g=h.sample_alpha;g!==ha.sample_alpha&&(g?q.enable(32926):q.disable(32926),ha.sample_alpha=g);g=h.sample_enable;g!==ha.sample_enable&&(g?q.enable(32928):q.disable(32928),ha.sample_enable=g);g=z[0];B=z[1];if(g!==l[0]||B!==
l[1])q.sampleCoverage(g,B),l[0]=g,l[1]=B;g=h.stencil_enable;g!==ha.stencil_enable&&(g?q.enable(2960):q.disable(2960),ha.stencil_enable=g);g=h.stencil_mask;g!==ha.stencil_mask&&(q.stencilMask(g),ha.stencil_mask=g);g=Ea[0];B=Ea[1];G=Ea[2];if(g!==oa[0]||B!==oa[1]||G!==oa[2])q.stencilFunc(g,B,G),oa[0]=g,oa[1]=B,oa[2]=G;g=ca[0];B=ca[1];G=ca[2];ja=ca[3];if(g!==Q[0]||B!==Q[1]||G!==Q[2]||ja!==Q[3])q.stencilOpSeparate(g,B,G,ja),Q[0]=g,Q[1]=B,Q[2]=G,Q[3]=ja;g=p[0];B=p[1];G=p[2];ja=p[3];if(g!==F[0]||B!==F[1]||
G!==F[2]||ja!==F[3])q.stencilOpSeparate(g,B,G,ja),F[0]=g,F[1]=B,F[2]=G,F[3]=ja;g=h.scissor_enable;g!==ha.scissor_enable&&(g?q.enable(3089):q.disable(3089),ha.scissor_enable=g);g=K[0];B=K[1];G=K[2];ja=K[3];if(g!==J[0]||B!==J[1]||G!==J[2]||ja!==J[3])q.scissor(g,B,G,ja),J[0]=g,J[1]=B,J[2]=G,J[3]=ja;g=na[0];B=na[1];G=na[2];ja=na[3];if(g!==ra[0]||B!==ra[1]||G!==ra[2]||ja!==ra[3])q.viewport(g,B,G,ja),ra[0]=g,ra[1]=B,ra[2]=G,ra[3]=ja}q.disable(2929);ha.depth_enable=!1;if(g=ha.profile)n=performance.now(),
I.count+=f;q.useProgram(U.program);E.setVAO(null);B=M.location;G=u[B];G.buffer||q.enableVertexAttribArray(B);if(G.type!==k.dtype||2!==G.size||G.buffer!==k||!1!==G.normalized||0!==G.offset||0!==G.stride)q.bindBuffer(34962,k.buffer),q.vertexAttribPointer(B,2,k.dtype,!1,0,0),G.type=k.dtype,G.size=2,G.buffer=k,G.normalized=!1,G.offset=0,G.stride=0;w=y.call(this,O,C,w);"number"!==typeof w&&ba.commandRaise(t,H);q.uniform1f(aa.location,w);(B=d.elements)?q.bindBuffer(34963,B.buffer.buffer):E.currentVAO&&
(B=c.getElements(E.currentVAO.elements))&&q.bindBuffer(34963,B.buffer.buffer);G=d.primitive;ja=d.offset;for(w=0;w<f;++w){C=b[w];var V,Ta,v,r,S,va,Fa;V=C.color;Y(V)&&4===V.length||ba.commandRaise(m,H);C=V[0];v=V[1];S=V[2];V=V[3];w&&Ta===C&&r===v&&va===S&&Fa===V||(Ta=C,r=v,va=S,Fa=V,q.uniform4f(x.location,C,v,S,V));B?q.drawElements(G,3,B.type,ja<<(B.type-5121>>1)):q.drawArrays(G,ja,3)}ha.dirty=!0;E.setVAO(null);g&&(I.cpuTime+=performance.now()-n)}}},"$13,color,position":function(b,ba,H,I,g,k,n,f,B,
C,G,U,y,t,m,aa){var x,M,u,O,ha,d,c,T,q,Y,h,w,V,E,D,e,N,a,Z,A,ka,fa,W,da,R,P,z,l,K,J,Ea,oa,p,F,ca;x=b.attributes;M=b.context;u=b.current;O=b.draw;ha=b.framebuffer;d=b.gl;c=b.next;T=b.shader;q=b.uniforms;Y=b.vao;h=c.blend_color;w=u.blend_color;V=c.blend_equation;E=u.blend_equation;D=c.blend_func;e=u.blend_func;N=c.colorMask;a=u.colorMask;Z=c.depth_range;A=u.depth_range;ka=c.polygonOffset_offset;fa=u.polygonOffset_offset;W=c.sample_coverage;da=u.sample_coverage;R=c.scissor_box;P=u.scissor_box;z=c.stencil_func;
l=u.stencil_func;K=c.stencil_opBack;J=u.stencil_opBack;Ea=c.stencil_opFront;oa=u.stencil_opFront;p=c.viewport;F=u.viewport;ca=[1,0,0,1];return{draw:function(b){var q,t,y;b=ha.next;b!==ha.cur&&(b?d.bindFramebuffer(36160,b.framebuffer):d.bindFramebuffer(36160,null),ha.cur=b);if(u.dirty){var B;b=c.dither;b!==u.dither&&(b?d.enable(3024):d.disable(3024),u.dither=b);b=c.blend_enable;b!==u.blend_enable&&(b?d.enable(3042):d.disable(3042),u.blend_enable=b);b=h[0];t=h[1];y=h[2];B=h[3];if(b!==w[0]||t!==w[1]||
y!==w[2]||B!==w[3])d.blendColor(b,t,y,B),w[0]=b,w[1]=t,w[2]=y,w[3]=B;b=V[0];t=V[1];if(b!==E[0]||t!==E[1])d.blendEquationSeparate(b,t),E[0]=b,E[1]=t;b=D[0];t=D[1];y=D[2];B=D[3];if(b!==e[0]||t!==e[1]||y!==e[2]||B!==e[3])d.blendFuncSeparate(b,t,y,B),e[0]=b,e[1]=t,e[2]=y,e[3]=B;b=c.depth_enable;b!==u.depth_enable&&(b?d.enable(2929):d.disable(2929),u.depth_enable=b);b=c.depth_func;b!==u.depth_func&&(d.depthFunc(b),u.depth_func=b);b=Z[0];t=Z[1];if(b!==A[0]||t!==A[1])d.depthRange(b,t),A[0]=b,A[1]=t;b=c.depth_mask;
b!==u.depth_mask&&(d.depthMask(b),u.depth_mask=b);b=N[0];t=N[1];y=N[2];B=N[3];if(b!==a[0]||t!==a[1]||y!==a[2]||B!==a[3])d.colorMask(b,t,y,B),a[0]=b,a[1]=t,a[2]=y,a[3]=B;b=c.cull_enable;b!==u.cull_enable&&(b?d.enable(2884):d.disable(2884),u.cull_enable=b);b=c.cull_face;b!==u.cull_face&&(d.cullFace(b),u.cull_face=b);b=c.frontFace;b!==u.frontFace&&(d.frontFace(b),u.frontFace=b);b=c.polygonOffset_enable;b!==u.polygonOffset_enable&&(b?d.enable(32823):d.disable(32823),u.polygonOffset_enable=b);b=ka[0];
t=ka[1];if(b!==fa[0]||t!==fa[1])d.polygonOffset(b,t),fa[0]=b,fa[1]=t;b=c.sample_alpha;b!==u.sample_alpha&&(b?d.enable(32926):d.disable(32926),u.sample_alpha=b);b=c.sample_enable;b!==u.sample_enable&&(b?d.enable(32928):d.disable(32928),u.sample_enable=b);b=W[0];t=W[1];if(b!==da[0]||t!==da[1])d.sampleCoverage(b,t),da[0]=b,da[1]=t;b=c.stencil_enable;b!==u.stencil_enable&&(b?d.enable(2960):d.disable(2960),u.stencil_enable=b);b=c.stencil_mask;b!==u.stencil_mask&&(d.stencilMask(b),u.stencil_mask=b);b=z[0];
t=z[1];y=z[2];if(b!==l[0]||t!==l[1]||y!==l[2])d.stencilFunc(b,t,y),l[0]=b,l[1]=t,l[2]=y;b=Ea[0];t=Ea[1];y=Ea[2];B=Ea[3];if(b!==oa[0]||t!==oa[1]||y!==oa[2]||B!==oa[3])d.stencilOpSeparate(b,t,y,B),oa[0]=b,oa[1]=t,oa[2]=y,oa[3]=B;b=K[0];t=K[1];y=K[2];B=K[3];if(b!==J[0]||t!==J[1]||y!==J[2]||B!==J[3])d.stencilOpSeparate(b,t,y,B),J[0]=b,J[1]=t,J[2]=y,J[3]=B;b=c.scissor_enable;b!==u.scissor_enable&&(b?d.enable(3089):d.disable(3089),u.scissor_enable=b);b=R[0];t=R[1];y=R[2];B=R[3];if(b!==P[0]||t!==P[1]||y!==
P[2]||B!==P[3])d.scissor(b,t,y,B),P[0]=b,P[1]=t,P[2]=y,P[3]=B;b=p[0];t=p[1];y=p[2];B=p[3];if(b!==F[0]||t!==F[1]||y!==F[2]||B!==F[3])d.viewport(b,t,y,B),F[0]=b,F[1]=t,F[2]=y,F[3]=B}d.lineWidth(1);u.lineWidth=1;if(b=u.profile)q=performance.now(),I.count++;d.useProgram(g.program);Y.setVAO(null);t=aa.location;y=x[t];y.buffer||d.enableVertexAttribArray(t);if(y.type!==k.dtype||2!==y.size||y.buffer!==k||!1!==y.normalized||0!==y.offset||0!==y.stride)d.bindBuffer(34962,k.buffer),d.vertexAttribPointer(t,2,
k.dtype,!1,0,0),y.type=k.dtype,y.size=2,y.buffer=k,y.normalized=!1,y.offset=0,y.stride=0;d.uniform4f(m.location,1,0,0,1);n&&d.bindBuffer(34963,n.buffer.buffer);t=n.primType;y=n.vertCount-0;0<=y||ba.commandRaise(f,H);y&&(d.drawElements(t,y,n.type,0<<(n.type-5121>>1)),u.dirty=!0,Y.setVAO(null),b&&(I.cpuTime+=performance.now()-q))},scope:function(a,b,d){var e,f,g,h,l,p,n,m,t,w,x,v,r,z,y,A,D,E,F,L,J,K;e=c.lineWidth;c.lineWidth=1;if(f=u.profile)g=performance.now(),I.count++;h=O.elements;O.elements=B;l=
O.offset;O.offset=0;p=B.vertCount-0;0<=p||ba.commandRaise(C,H);n=O.count;O.count=p;m=B.primType;p=O.primitive;O.primitive=m;m=q[3];q[3]=ca;t=G.buffer;G.buffer=k;w=G.divisor;G.divisor=0;x=G.normalized;G.normalized=!1;v=G.offset;G.offset=0;r=G.size;G.size=0;z=G.state;G.state=1;y=G.stride;G.stride=0;A=G.type;G.type=k.dtype;D=G.w;G.w=0;E=G.x;G.x=0;F=G.y;G.y=0;L=G.z;G.z=0;J=T.vert;T.vert=2;K=T.frag;T.frag=1;u.dirty=!0;b(M,a,d);c.lineWidth=e;f&&(I.cpuTime+=performance.now()-g);O.elements=h;O.offset=l;O.count=
n;O.primitive=p;q[3]=m;G.buffer=t;G.divisor=w;G.normalized=x;G.offset=v;G.size=r;G.state=z;G.stride=y;G.type=A;G.w=D;G.x=E;G.y=F;G.z=L;T.vert=J;T.frag=K;u.dirty=!0},batch:function(b,f){var g,q,n;g=ha.next;g!==ha.cur&&(g?d.bindFramebuffer(36160,g.framebuffer):d.bindFramebuffer(36160,null),ha.cur=g);if(u.dirty){var B,C;g=c.dither;g!==u.dither&&(g?d.enable(3024):d.disable(3024),u.dither=g);g=c.blend_enable;g!==u.blend_enable&&(g?d.enable(3042):d.disable(3042),u.blend_enable=g);g=h[0];n=h[1];B=h[2];C=
h[3];if(g!==w[0]||n!==w[1]||B!==w[2]||C!==w[3])d.blendColor(g,n,B,C),w[0]=g,w[1]=n,w[2]=B,w[3]=C;g=V[0];n=V[1];if(g!==E[0]||n!==E[1])d.blendEquationSeparate(g,n),E[0]=g,E[1]=n;g=D[0];n=D[1];B=D[2];C=D[3];if(g!==e[0]||n!==e[1]||B!==e[2]||C!==e[3])d.blendFuncSeparate(g,n,B,C),e[0]=g,e[1]=n,e[2]=B,e[3]=C;g=c.depth_enable;g!==u.depth_enable&&(g?d.enable(2929):d.disable(2929),u.depth_enable=g);g=c.depth_func;g!==u.depth_func&&(d.depthFunc(g),u.depth_func=g);g=Z[0];n=Z[1];if(g!==A[0]||n!==A[1])d.depthRange(g,
n),A[0]=g,A[1]=n;g=c.depth_mask;g!==u.depth_mask&&(d.depthMask(g),u.depth_mask=g);g=N[0];n=N[1];B=N[2];C=N[3];if(g!==a[0]||n!==a[1]||B!==a[2]||C!==a[3])d.colorMask(g,n,B,C),a[0]=g,a[1]=n,a[2]=B,a[3]=C;g=c.cull_enable;g!==u.cull_enable&&(g?d.enable(2884):d.disable(2884),u.cull_enable=g);g=c.cull_face;g!==u.cull_face&&(d.cullFace(g),u.cull_face=g);g=c.frontFace;g!==u.frontFace&&(d.frontFace(g),u.frontFace=g);g=c.polygonOffset_enable;g!==u.polygonOffset_enable&&(g?d.enable(32823):d.disable(32823),u.polygonOffset_enable=
g);g=ka[0];n=ka[1];if(g!==fa[0]||n!==fa[1])d.polygonOffset(g,n),fa[0]=g,fa[1]=n;g=c.sample_alpha;g!==u.sample_alpha&&(g?d.enable(32926):d.disable(32926),u.sample_alpha=g);g=c.sample_enable;g!==u.sample_enable&&(g?d.enable(32928):d.disable(32928),u.sample_enable=g);g=W[0];n=W[1];if(g!==da[0]||n!==da[1])d.sampleCoverage(g,n),da[0]=g,da[1]=n;g=c.stencil_enable;g!==u.stencil_enable&&(g?d.enable(2960):d.disable(2960),u.stencil_enable=g);g=c.stencil_mask;g!==u.stencil_mask&&(d.stencilMask(g),u.stencil_mask=
g);g=z[0];n=z[1];B=z[2];if(g!==l[0]||n!==l[1]||B!==l[2])d.stencilFunc(g,n,B),l[0]=g,l[1]=n,l[2]=B;g=Ea[0];n=Ea[1];B=Ea[2];C=Ea[3];if(g!==oa[0]||n!==oa[1]||B!==oa[2]||C!==oa[3])d.stencilOpSeparate(g,n,B,C),oa[0]=g,oa[1]=n,oa[2]=B,oa[3]=C;g=K[0];n=K[1];B=K[2];C=K[3];if(g!==J[0]||n!==J[1]||B!==J[2]||C!==J[3])d.stencilOpSeparate(g,n,B,C),J[0]=g,J[1]=n,J[2]=B,J[3]=C;g=c.scissor_enable;g!==u.scissor_enable&&(g?d.enable(3089):d.disable(3089),u.scissor_enable=g);g=R[0];n=R[1];B=R[2];C=R[3];if(g!==P[0]||n!==
P[1]||B!==P[2]||C!==P[3])d.scissor(g,n,B,C),P[0]=g,P[1]=n,P[2]=B,P[3]=C;g=p[0];n=p[1];B=p[2];C=p[3];if(g!==F[0]||n!==F[1]||B!==F[2]||C!==F[3])d.viewport(g,n,B,C),F[0]=g,F[1]=n,F[2]=B,F[3]=C}d.lineWidth(1);u.lineWidth=1;if(g=u.profile)q=performance.now(),I.count+=f;d.useProgram(U.program);Y.setVAO(null);n=aa.location;B=x[n];B.buffer||d.enableVertexAttribArray(n);if(B.type!==k.dtype||2!==B.size||B.buffer!==k||!1!==B.normalized||0!==B.offset||0!==B.stride)d.bindBuffer(34962,k.buffer),d.vertexAttribPointer(n,
2,k.dtype,!1,0,0),B.type=k.dtype,B.size=2,B.buffer=k,B.normalized=!1,B.offset=0,B.stride=0;d.uniform4f(m.location,1,0,0,1);y&&d.bindBuffer(34963,y.buffer.buffer);B=y.primType;C=y.vertCount-0;0<=C||ba.commandRaise(t,H);for(n=0;n<f;++n)C&&d.drawElements(B,C,y.type,0<<(y.type-5121>>1));u.dirty=!0;Y.setVAO(null);g&&(I.cpuTime+=performance.now()-q)}}},"$20,mouse,position,t,texture":function(b,ba,H,I,g,k,n,f,B,C,G,U,y,t,m,aa,x,M,u,O,ha,d,c,T,q){var Y,h,w,V,E,D,e,N,a,Z,A,fa,Oa,W,da,R,P,z,l,K,J,Ea,oa,p,F,
ca,Q,na,ra,Aa,za,ga,Ca,la,qa,xa;Y=b.attributes;h=b.context;w=b.current;V=b.draw;E=b.elements;D=b.framebuffer;e=b.gl;N=b.isArrayLike;a=b.next;Z=b.shader;A=b.uniforms;fa=b.vao;Oa=a.blend_color;W=w.blend_color;da=a.blend_equation;R=w.blend_equation;P=a.blend_func;z=w.blend_func;l=a.colorMask;K=w.colorMask;J=a.depth_range;Ea=w.depth_range;oa=a.polygonOffset_offset;p=w.polygonOffset_offset;F=a.sample_coverage;ca=w.sample_coverage;Q=a.scissor_box;na=w.scissor_box;ra=a.stencil_func;Aa=w.stencil_func;za=
a.stencil_opBack;ga=w.stencil_opBack;Ca=a.stencil_opFront;la=w.stencil_opFront;qa=a.viewport;xa=w.viewport;return{draw:function(b){var m,t,u,v;m=D.next;m!==D.cur&&(m?e.bindFramebuffer(36160,m.framebuffer):e.bindFramebuffer(36160,null),D.cur=m);if(w.dirty){var r;m=a.dither;m!==w.dither&&(m?e.enable(3024):e.disable(3024),w.dither=m);m=a.blend_enable;m!==w.blend_enable&&(m?e.enable(3042):e.disable(3042),w.blend_enable=m);m=Oa[0];u=Oa[1];v=Oa[2];r=Oa[3];if(m!==W[0]||u!==W[1]||v!==W[2]||r!==W[3])e.blendColor(m,
u,v,r),W[0]=m,W[1]=u,W[2]=v,W[3]=r;m=da[0];u=da[1];if(m!==R[0]||u!==R[1])e.blendEquationSeparate(m,u),R[0]=m,R[1]=u;m=P[0];u=P[1];v=P[2];r=P[3];if(m!==z[0]||u!==z[1]||v!==z[2]||r!==z[3])e.blendFuncSeparate(m,u,v,r),z[0]=m,z[1]=u,z[2]=v,z[3]=r;m=a.depth_enable;m!==w.depth_enable&&(m?e.enable(2929):e.disable(2929),w.depth_enable=m);m=a.depth_func;m!==w.depth_func&&(e.depthFunc(m),w.depth_func=m);m=J[0];u=J[1];if(m!==Ea[0]||u!==Ea[1])e.depthRange(m,u),Ea[0]=m,Ea[1]=u;m=a.depth_mask;m!==w.depth_mask&&
(e.depthMask(m),w.depth_mask=m);m=l[0];u=l[1];v=l[2];r=l[3];if(m!==K[0]||u!==K[1]||v!==K[2]||r!==K[3])e.colorMask(m,u,v,r),K[0]=m,K[1]=u,K[2]=v,K[3]=r;m=a.cull_enable;m!==w.cull_enable&&(m?e.enable(2884):e.disable(2884),w.cull_enable=m);m=a.cull_face;m!==w.cull_face&&(e.cullFace(m),w.cull_face=m);m=a.frontFace;m!==w.frontFace&&(e.frontFace(m),w.frontFace=m);m=a.lineWidth;m!==w.lineWidth&&(e.lineWidth(m),w.lineWidth=m);m=a.polygonOffset_enable;m!==w.polygonOffset_enable&&(m?e.enable(32823):e.disable(32823),
w.polygonOffset_enable=m);m=oa[0];u=oa[1];if(m!==p[0]||u!==p[1])e.polygonOffset(m,u),p[0]=m,p[1]=u;m=a.sample_alpha;m!==w.sample_alpha&&(m?e.enable(32926):e.disable(32926),w.sample_alpha=m);m=a.sample_enable;m!==w.sample_enable&&(m?e.enable(32928):e.disable(32928),w.sample_enable=m);m=F[0];u=F[1];if(m!==ca[0]||u!==ca[1])e.sampleCoverage(m,u),ca[0]=m,ca[1]=u;m=a.stencil_enable;m!==w.stencil_enable&&(m?e.enable(2960):e.disable(2960),w.stencil_enable=m);m=a.stencil_mask;m!==w.stencil_mask&&(e.stencilMask(m),
w.stencil_mask=m);m=ra[0];u=ra[1];v=ra[2];if(m!==Aa[0]||u!==Aa[1]||v!==Aa[2])e.stencilFunc(m,u,v),Aa[0]=m,Aa[1]=u,Aa[2]=v;m=Ca[0];u=Ca[1];v=Ca[2];r=Ca[3];if(m!==la[0]||u!==la[1]||v!==la[2]||r!==la[3])e.stencilOpSeparate(m,u,v,r),la[0]=m,la[1]=u,la[2]=v,la[3]=r;m=za[0];u=za[1];v=za[2];r=za[3];if(m!==ga[0]||u!==ga[1]||v!==ga[2]||r!==ga[3])e.stencilOpSeparate(m,u,v,r),ga[0]=m,ga[1]=u,ga[2]=v,ga[3]=r;m=a.scissor_enable;m!==w.scissor_enable&&(m?e.enable(3089):e.disable(3089),w.scissor_enable=m);m=Q[0];
u=Q[1];v=Q[2];r=Q[3];if(m!==na[0]||u!==na[1]||v!==na[2]||r!==na[3])e.scissor(m,u,v,r),na[0]=m,na[1]=u,na[2]=v,na[3]=r;m=qa[0];u=qa[1];v=qa[2];r=qa[3];if(m!==xa[0]||u!==xa[1]||v!==xa[2]||r!==xa[3])e.viewport(m,u,v,r),xa[0]=m,xa[1]=u,xa[2]=v,xa[3]=r;w.dirty=!1}if(m=w.profile)t=performance.now(),I.count++;e.useProgram(g.program);fa.setVAO(null);u=c.location;v=Y[u];v.buffer||e.enableVertexAttribArray(u);if(v.type!==k.dtype||2!==v.size||v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)e.bindBuffer(34962,
k.buffer),e.vertexAttribPointer(u,2,k.dtype,!1,0,0),v.type=k.dtype,v.size=2,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;u=n.call(this,h,b,0);N(u)&&2===u.length||ba.commandRaise(f,H);e.uniform2f(d.location,u[0],u[1]);b=B.call(this,h,b,0);"number"!==typeof b&&ba.commandRaise(C,H);e.uniform1f(T.location,b);e.uniform1i(q.location,G.bind());(b=V.elements)?e.bindBuffer(34963,b.buffer.buffer):fa.currentVAO&&(b=E.getElements(fa.currentVAO.elements))&&e.bindBuffer(34963,b.buffer.buffer);u=V.primitive;
v=V.offset;b?e.drawElements(u,3,b.type,v<<(b.type-5121>>1)):e.drawArrays(u,v,3);fa.setVAO(null);m&&(I.cpuTime+=performance.now()-t);G.unbind()},scope:function(a,b,c){var d,e,f,g,l,n,q,p,u,x,z,B,D,C,E,F,G,H,J,K;if(d=w.profile)e=performance.now(),I.count++;f=V.count;V.count=3;g=U.call(this,h,a,c);l=A[3];A[3]=g;n=y.call(this,h,a,c);g=A[4];A[4]=n;n=A[5];A[5]=t;q=m.buffer;m.buffer=k;p=m.divisor;m.divisor=0;u=m.normalized;m.normalized=!1;x=m.offset;m.offset=0;z=m.size;m.size=0;B=m.state;m.state=1;D=m.stride;
m.stride=0;C=m.type;m.type=k.dtype;E=m.w;m.w=0;F=m.x;m.x=0;G=m.y;m.y=0;H=m.z;m.z=0;J=Z.vert;Z.vert=2;K=Z.frag;Z.frag=1;b(h,a,c);d&&(I.cpuTime+=performance.now()-e);V.count=f;A[3]=l;A[4]=g;A[5]=n;m.buffer=q;m.divisor=p;m.normalized=u;m.offset=x;m.size=z;m.state=B;m.stride=D;m.type=C;m.w=E;m.x=F;m.y=G;m.z=H;Z.vert=J;Z.frag=K},batch:function(b,f){var g,m,n;g=D.next;g!==D.cur&&(g?e.bindFramebuffer(36160,g.framebuffer):e.bindFramebuffer(36160,null),D.cur=g);if(w.dirty){var r,t,y;g=a.dither;g!==w.dither&&
(g?e.enable(3024):e.disable(3024),w.dither=g);g=a.blend_enable;g!==w.blend_enable&&(g?e.enable(3042):e.disable(3042),w.blend_enable=g);g=Oa[0];r=Oa[1];t=Oa[2];y=Oa[3];if(g!==W[0]||r!==W[1]||t!==W[2]||y!==W[3])e.blendColor(g,r,t,y),W[0]=g,W[1]=r,W[2]=t,W[3]=y;g=da[0];r=da[1];if(g!==R[0]||r!==R[1])e.blendEquationSeparate(g,r),R[0]=g,R[1]=r;g=P[0];r=P[1];t=P[2];y=P[3];if(g!==z[0]||r!==z[1]||t!==z[2]||y!==z[3])e.blendFuncSeparate(g,r,t,y),z[0]=g,z[1]=r,z[2]=t,z[3]=y;g=a.depth_enable;g!==w.depth_enable&&
(g?e.enable(2929):e.disable(2929),w.depth_enable=g);g=a.depth_func;g!==w.depth_func&&(e.depthFunc(g),w.depth_func=g);g=J[0];r=J[1];if(g!==Ea[0]||r!==Ea[1])e.depthRange(g,r),Ea[0]=g,Ea[1]=r;g=a.depth_mask;g!==w.depth_mask&&(e.depthMask(g),w.depth_mask=g);g=l[0];r=l[1];t=l[2];y=l[3];if(g!==K[0]||r!==K[1]||t!==K[2]||y!==K[3])e.colorMask(g,r,t,y),K[0]=g,K[1]=r,K[2]=t,K[3]=y;g=a.cull_enable;g!==w.cull_enable&&(g?e.enable(2884):e.disable(2884),w.cull_enable=g);g=a.cull_face;g!==w.cull_face&&(e.cullFace(g),
w.cull_face=g);g=a.frontFace;g!==w.frontFace&&(e.frontFace(g),w.frontFace=g);g=a.lineWidth;g!==w.lineWidth&&(e.lineWidth(g),w.lineWidth=g);g=a.polygonOffset_enable;g!==w.polygonOffset_enable&&(g?e.enable(32823):e.disable(32823),w.polygonOffset_enable=g);g=oa[0];r=oa[1];if(g!==p[0]||r!==p[1])e.polygonOffset(g,r),p[0]=g,p[1]=r;g=a.sample_alpha;g!==w.sample_alpha&&(g?e.enable(32926):e.disable(32926),w.sample_alpha=g);g=a.sample_enable;g!==w.sample_enable&&(g?e.enable(32928):e.disable(32928),w.sample_enable=
g);g=F[0];r=F[1];if(g!==ca[0]||r!==ca[1])e.sampleCoverage(g,r),ca[0]=g,ca[1]=r;g=a.stencil_enable;g!==w.stencil_enable&&(g?e.enable(2960):e.disable(2960),w.stencil_enable=g);g=a.stencil_mask;g!==w.stencil_mask&&(e.stencilMask(g),w.stencil_mask=g);g=ra[0];r=ra[1];t=ra[2];if(g!==Aa[0]||r!==Aa[1]||t!==Aa[2])e.stencilFunc(g,r,t),Aa[0]=g,Aa[1]=r,Aa[2]=t;g=Ca[0];r=Ca[1];t=Ca[2];y=Ca[3];if(g!==la[0]||r!==la[1]||t!==la[2]||y!==la[3])e.stencilOpSeparate(g,r,t,y),la[0]=g,la[1]=r,la[2]=t,la[3]=y;g=za[0];r=za[1];
t=za[2];y=za[3];if(g!==ga[0]||r!==ga[1]||t!==ga[2]||y!==ga[3])e.stencilOpSeparate(g,r,t,y),ga[0]=g,ga[1]=r,ga[2]=t,ga[3]=y;g=a.scissor_enable;g!==w.scissor_enable&&(g?e.enable(3089):e.disable(3089),w.scissor_enable=g);g=Q[0];r=Q[1];t=Q[2];y=Q[3];if(g!==na[0]||r!==na[1]||t!==na[2]||y!==na[3])e.scissor(g,r,t,y),na[0]=g,na[1]=r,na[2]=t,na[3]=y;g=qa[0];r=qa[1];t=qa[2];y=qa[3];if(g!==xa[0]||r!==xa[1]||t!==xa[2]||y!==xa[3])e.viewport(g,r,t,y),xa[0]=g,xa[1]=r,xa[2]=t,xa[3]=y;w.dirty=!1}if(g=w.profile)m=
performance.now(),I.count+=f;e.useProgram(aa.program);fa.setVAO(null);r=c.location;t=Y[r];t.buffer||e.enableVertexAttribArray(r);if(t.type!==k.dtype||2!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||0!==t.stride)e.bindBuffer(34962,k.buffer),e.vertexAttribPointer(r,2,k.dtype,!1,0,0),t.type=k.dtype,t.size=2,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=0;r=x.call(this,h,void 0,n);N(r)&&2===r.length||ba.commandRaise(M,H);e.uniform2f(d.location,r[0],r[1]);n=u.call(this,h,void 0,n);"number"!==
typeof n&&ba.commandRaise(O,H);e.uniform1f(T.location,n);e.uniform1i(q.location,ha.bind());(r=V.elements)?e.bindBuffer(34963,r.buffer.buffer):fa.currentVAO&&(r=E.getElements(fa.currentVAO.elements))&&e.bindBuffer(34963,r.buffer.buffer);t=V.primitive;y=V.offset;for(n=0;n<f;++n)r?e.drawElements(t,3,r.type,y<<(r.type-5121>>1)):e.drawArrays(t,y,3);ha.unbind();fa.setVAO(null);g&&(I.cpuTime+=performance.now()-m)}}}}},{}],25:[function(Z,fa,Oa){var b=Z("./sorted-object-keys");fa.exports=function(ba,H){for(var I=
b(H),g=0;g<I.length;++g)ba[I[g]]=H[I[g]];return ba}},{"./sorted-object-keys":34}],26:[function(Z,fa,Oa){function b(b,g,k,n,f,B){for(var C=0;C<g;++C)for(var G=b[C],H=0;H<k;++H)for(var y=G[H],t=0;t<n;++t)f[B++]=y[t]}function ba(H,g,k,n,f){for(var B=1,C=k+1;C<g.length;++C)B*=g[C];var G=g[k];if(4===g.length-k){var U=g[k+1],y=g[k+2];g=g[k+3];for(C=0;C<G;++C)b(H[C],U,y,g,n,f),f+=B}else for(C=0;C<G;++C)ba(H[C],g,k+1,n,f),f+=B}var H=Z("./pool");fa.exports={shape:function(b){for(var g=[];b.length;b=b[0])g.push(b.length);
return g},flatten:function(I,g,k,n){var f=1;if(g.length)for(var B=0;B<g.length;++B)f*=g[B];else f=0;k=n||H.allocType(k,f);switch(g.length){case 0:break;case 1:n=g[0];for(g=0;g<n;++g)k[g]=I[g];break;case 2:n=g[0];g=g[1];for(B=f=0;B<n;++B)for(var C=I[B],G=0;G<g;++G)k[f++]=C[G];break;case 3:b(I,g[0],g[1],g[2],k,0);break;default:ba(I,g,0,k,0)}return k}}},{"./pool":32}],27:[function(Z,fa,Oa){var b=Z("./is-typed-array");fa.exports=function(ba){return Array.isArray(ba)||b(ba)}},{"./is-typed-array":30}],
28:[function(Z,fa,Oa){var b=Z("./is-typed-array");fa.exports=function(ba){return!!ba&&"object"===typeof ba&&Array.isArray(ba.shape)&&Array.isArray(ba.stride)&&"number"===typeof ba.offset&&ba.shape.length===ba.stride.length&&(Array.isArray(ba.data)||b(ba.data))}},{"./is-typed-array":30}],29:[function(Z,fa,Oa){fa.exports=function(b){return!(b&b-1)&&!!b}},{}],30:[function(Z,fa,Oa){fa.exports=function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||
b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Uint8ClampedArray}},{}],31:[function(Z,fa,Oa){fa.exports=function(b,ba){for(var H=Array(b),I=0;I<b;++I)H[I]=ba(I);return H}},{}],32:[function(Z,fa,Oa){function b(b){var g,k;g=(65535<b)<<4;b>>>=g;k=(255<b)<<3;b>>>=k;g|=k;k=(15<b)<<2;b>>>=k;g|=k;k=(3<b)<<1;return g|k|b>>>k>>1}function ba(){function I(g){a:{for(var f=16;268435456>=f;f*=16)if(g<=f){g=f;break a}g=0}f=k[b(g)>>2];return 0<
f.length?f.pop():new ArrayBuffer(g)}function g(g){k[b(g.byteLength)>>2].push(g)}var k=H(8,function(){return[]});return{alloc:I,free:g,allocType:function(b,f){var g=null;switch(b){case 5120:g=new Int8Array(I(f),0,f);break;case 5121:g=new Uint8Array(I(f),0,f);break;case 5122:g=new Int16Array(I(2*f),0,f);break;case 5123:g=new Uint16Array(I(2*f),0,f);break;case 5124:g=new Int32Array(I(4*f),0,f);break;case 5125:g=new Uint32Array(I(4*f),0,f);break;case 5126:g=new Float32Array(I(4*f),0,f);break;default:return null}return g.length!==
f?g.subarray(0,f):g},freeType:function(b){g(b.buffer)}}}var H=Z("./loop");Z=ba();Z.zero=ba();fa.exports=Z},{"./loop":31}],33:[function(Z,fa,Oa){fa.exports={next:"function"===typeof requestAnimationFrame?function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:clearTimeout}},{}],34:[function(Z,fa,Oa){fa.exports=function(b){return Object.keys(b).sort()}},{}],35:[function(Z,fa,Oa){var b=
Z("./pool"),ba=new Float32Array(1),H=new Uint32Array(ba.buffer);fa.exports=function(I){for(var g=b.allocType(5123,I.length),k=0;k<I.length;++k)if(isNaN(I[k]))g[k]=65535;else if(Infinity===I[k])g[k]=31744;else if(-Infinity===I[k])g[k]=64512;else{ba[0]=I[k];var n=H[0],f=n>>>31<<15,B=(n<<1>>>24)-127,n=n>>13&1023;g[k]=-24>B?f:-14>B?f+(n+1024>>-14-B):15<B?f+31744:f+(B+15<<10)+n}return g}},{"./pool":32}],36:[function(Z,fa,Oa){var b=Z("./sorted-object-keys");fa.exports=function(ba){return b(ba).map(function(b){return ba[b]})}},
{"./sorted-object-keys":34}],37:[function(Z,fa,Oa){function b(b,f,g){function C(){var f=window.innerWidth,k=window.innerHeight;b!==document.body&&(k=G.getBoundingClientRect(),f=k.right-k.left,k=k.bottom-k.top);G.width=g*f;G.height=g*k}var G=document.createElement("canvas");k(G.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(G);b===document.body&&(G.style.position="absolute",k(b.style,{margin:0,padding:0}));var H;b!==document.body&&"function"===typeof ResizeObserver?
(H=new ResizeObserver(function(){setTimeout(C)}),H.observe(b)):window.addEventListener("resize",C,!1);C();return{canvas:G,onDestroy:function(){H?H.disconnect():window.removeEventListener("resize",C);b.removeChild(G)}}}function ba(b,f){function g(k){try{return b.getContext(k,f)}catch(B){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}function H(b){if("string"===typeof b)return b.split();g(Array.isArray(b),"invalid extension array");return b}function I(b){return"string"===
typeof b?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(b)):b}var g=Z("./util/check"),k=Z("./util/extend");fa.exports=function(k){var f=k||{},B,C,G,U;k={};var y=[],t=[],m="undefined"===typeof window?1:window.devicePixelRatio,aa=!1,x=function(b){b&&g.raise(b)},M=function(){};"string"===typeof f?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),B=document.querySelector(f),g(B,"invalid query string for element")):"object"===
typeof f?"string"===typeof f.nodeName&&"function"===typeof f.appendChild&&"function"===typeof f.getBoundingClientRect?B=f:"function"===typeof f.drawArrays||"function"===typeof f.drawElements?(U=f,G=U.canvas):(g.constructor(f),"gl"in f?U=f.gl:"canvas"in f?G=I(f.canvas):"container"in f&&(C=I(f.container)),"attributes"in f&&(k=f.attributes,g.type(k,"object","invalid context attributes")),"extensions"in f&&(y=H(f.extensions)),"optionalExtensions"in f&&(t=H(f.optionalExtensions)),"onDone"in f&&(g.type(f.onDone,
"function","invalid or missing onDone callback"),x=f.onDone),"profile"in f&&(aa=!!f.profile),"pixelRatio"in f&&(m=+f.pixelRatio,g(0<m,"invalid pixel ratio"))):g.raise("invalid arguments to regl");B&&("canvas"===B.nodeName.toLowerCase()?G=B:C=B);if(!U){if(!G){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");B=b(C||document.body,x,m);if(!B)return null;G=B.canvas;M=B.onDestroy}void 0===k.premultipliedAlpha&&(k.premultipliedAlpha=!0);U=ba(G,k)}return U?
{gl:U,canvas:G,container:C,extensions:y,optionalExtensions:t,pixelRatio:m,profile:aa,onDone:x,onDestroy:M}:(M(),x("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(Z,fa,Oa){function b(b){return b.charCodeAt(0)+(b.charCodeAt(1)<<8)+(b.charCodeAt(2)<<16)+(b.charCodeAt(3)<<24)}var ba=b("DXT1"),H=b("DXT3"),I=b("DXT5"),g=b("DX10");fa.exports=function(b){var n=new Int32Array(b,0,31);if(542327876!==n[0])throw Error("Invalid magic number in DDS header");
if(!n[20]&4)throw Error("Unsupported format, must contain a FourCC code");var f,B=n[21];switch(B){case ba:f=8;b="dxt1";break;case H:f=16;b="dxt3";break;case I:f=16;b="dxt5";break;case 116:b="rgba32f";break;case g:var C=new Uint32Array(b.slice(128,148));b=C[0];if(3===C[1]&&2===b)b="rgba32f";else throw Error("Unsupported DX10 texture format "+b);break;default:throw Error("Unsupported FourCC code: "+String.fromCharCode(B&255,B>>8&255,B>>16&255,B>>24&255));}var C=n[2],G=1;C&131072&&(G=Math.max(1,n[7]));
var U=!1;n[28]&512&&(U=!0);var y=n[4],t=n[3],n=n[1]+4,m=y,aa=t,x=[];B===g&&(n+=20);if(U)for(f=0;6>f;f++){if("rgba32f"!==b)throw Error("Only RGBA32f cubemaps are supported");for(var y=m,t=aa,M=Math.log(y)/Math.log(2)+1,u=0;u<M;u++)B=y*t*16,x.push({offset:n,length:B,shape:[y,t]}),u<G&&(n+=B),y=Math.floor(y/2),t=Math.floor(t/2)}else for(u=0;u<G;u++)B=Math.max(4,y)/4*Math.max(4,t)/4*f,x.push({offset:n,length:B,shape:[y,t]}),n+=B,y=Math.floor(y/2),t=Math.floor(t/2);return{shape:[m,aa],images:x,format:b,
flags:C,cubemap:U}}},{}],39:[function(Z,fa,Oa){function b(b){throw Error("resl: "+b);}function ba(g,f,k){Object.keys(g).forEach(function(g){0>f.indexOf(g)&&b('invalid parameter "'+g+'" in '+k)})}function H(b,f){this.state=0;this.ready=!1;this.progress=0;this.name=b;this.cancel=f}var I=["manifest","onDone","onProgress","onError"],g=["type","src","stream","credentials","parser"],k=["onData","onDone"];fa.exports=function(n){function f(f,d){if(f in n){var c=n[f];"function"!==typeof c&&b('invalid callback "'+
f+'"');return c}return null}function B(b){function d(){if(!(2>h.readyState||1===n.state||-1===n.state)){if(200!==h.status)return G('error loading resource "'+b.name+'"');if(2<h.readyState&&0===n.state){var d;d="binary"===b.type?h.response:h.responseText;if(k.data)try{m=k.data(d)}catch(f){return G(f)}else m=d}if(3<h.readyState&&0===n.state){if(k.done)try{m=k.done()}catch(f){return G(f)}n.state=1}x[c]=m;n.progress=.75*n.progress+.25;n.ready=b.stream&&!!m||1===n.state;U()}}var c=b.name,f=b.stream,g=
"binary"===b.type,k=b.parser,h=new XMLHttpRequest,m=null,n=new H(c,function(){1!==n.state&&-1!==n.state&&(h.onreadystatechange=null,h.abort(),n.state=-1)});h.onreadystatechange=f?d:function(){4===h.readyState&&d()};g&&(h.responseType="arraybuffer");b.credentials&&(h.withCredentials=!0);h.open("GET",b.src,!0);h.send();return n}function C(b,d){function c(){if(0===t.state)if(n.data)try{u=n.data(d)}catch(a){return G(a)}else u=d}function f(a){c();x[m]=u;t.progress=a.lengthComputable?Math.max(t.progress,
a.loaded/a.total):.75*t.progress+.25;U(m)}function g(){c();if(0===t.state){if(n.done)try{u=n.done()}catch(a){return G(a)}t.state=1}t.progress=1;t.ready=!0;x[m]=u;h();U("finish "+m)}function k(){G('error loading asset "'+m+'"')}function h(){b.stream&&d.removeEventListener("progress",f);"image"===b.type?d.addEventListener("load",g):d.addEventListener("canplay",g);d.removeEventListener("error",k)}var m=b.name,n=b.parser,t=new H(m,function(){1!==t.state&&-1!==t.state&&(t.state=-1,h(),d.src="")}),u=d;
b.stream&&d.addEventListener("progress",f);if("image"===b.type)d.addEventListener("load",g);else{var e=!1,y=!1;d.addEventListener("loadedmetadata",function(){y=!0;e&&g()});d.addEventListener("canplay",function(){e=!0;y&&g()})}d.addEventListener("error",k);d.crossOrigin=b.credentials?"use-credentials":"anonymous";d.src=b.src;return t}function G(b){-1!==M&&1!==M&&(M=-1,O.forEach(function(b){b.cancel()}),aa?"string"===typeof b?aa(Error("resl: "+b)):aa(b):console.error("resl error:",b))}function U(b){if(-1!==
M&&1!==M){var d=0,c=0;O.forEach(function(b){b.ready&&(c+=1);d+=b.progress});c===O.length?(M=1,t(x)):m&&m(d/O.length,b)}}"object"===typeof n&&n||b("invalid or missing configuration");ba(n,I,"config");var y=n.manifest;"object"===typeof y&&y||b("missing manifest");var t=f("onDone");t||b("missing onDone() callback");var m=f("onProgress"),aa=f("onError"),x={},M=0,u={text:B,binary:function(b){return B(b)},image:function(b){return C(b,document.createElement("img"))},video:function(b){return C(b,document.createElement("video"))},
audio:function(b){return C(b,document.createElement("audio"))}},O=Object.keys(y).map(function(f){function d(d,f){if(d in c.parser){var g=c.parser[d];"function"!==typeof g&&b("invalid parser callback "+d+' for asset "'+d+'"');return g}return f}var c=y[f];"string"===typeof c?c={src:c}:"object"===typeof c&&c||b('invalid asset definition "'+f+'"');ba(c,g,'asset "'+f+'"');var m={};"parser"in c&&("function"===typeof c.parser?m={data:c.parser}:"object"===typeof c.parser&&c.parser?(ba(m,k,'parser for asset "'+
f+'"'),"onData"in m||b('missing onData callback for parser in asset "'+f+'"'),m={data:d("onData"),done:d("onDone")}):b('invalid parser for asset "'+f+'"'));return{name:f,type:function(d,g,h){d in c&&(h=c[d]);0>g.indexOf(h)&&b("invalid "+d+' "'+h+'" for asset "'+f+'", possible values: '+g);return h}("type",Object.keys(u),"text"),stream:!!c.stream,credentials:!!c.credentials,src:function(d,g,h){d in c?h=c[d]:g&&b("missing "+d+' for asset "'+f+'"');"string"!==typeof h&&b("invalid "+d+' for asset "'+
f+'", must be a string');return h}("src",!0,""),parser:m}}).map(function(b){return u[b.type](b)});0===O.length&&setTimeout(function(){U("done")},1)}},{}],40:[function(Z,fa,Oa){function b(b,c){for(var f=0;f<b.length;++f)if(b[f]===c)return f;return-1}var ba=Z("./lib/util/check"),H=Z("./lib/util/extend"),I=Z("./lib/dynamic"),g=Z("./lib/util/raf"),k=Z("./lib/util/clock"),n=Z("./lib/strings"),f=Z("./lib/webgl"),B=Z("./lib/extension"),C=Z("./lib/limits"),G=Z("./lib/buffer"),U=Z("./lib/elements"),y=Z("./lib/texture"),
t=Z("./lib/renderbuffer"),m=Z("./lib/framebuffer"),aa=Z("./lib/attribute"),x=Z("./lib/shader"),M=Z("./lib/read"),u=Z("./lib/core"),O=Z("./lib/stats"),ha=Z("./lib/timer");fa.exports=function(d){function c(){if(0===Ca.length)P&&P.update(),ya=null;else{ya=g.next(c);e();for(var a=Ca.length-1;0<=a;--a){var b=Ca[a];b&&b(J,null,0)}Z.flush();P&&P.update()}}function T(){!ya&&0<Ca.length&&(ya=g.next(c))}function q(){ya&&(g.cancel(c),ya=null)}function Y(a){a.preventDefault();fa=!0;q();la.forEach(function(a){a()})}
function h(a){Z.getError();fa=!1;Oa.restore();ca.restore();oa.restore();Q.restore();na.restore();ra.restore();F.restore();P&&P.restore();Aa.procs.refresh();T();qa.forEach(function(a){a()})}function w(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(I.isDynamic(f))e[b]=I.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(I.isDynamic(f[g])){e[b]=I.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<a;)n.push(null);return n}
ba(!!a,"invalid args to regl({...})");ba.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=H({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");
b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Aa.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return H(function(a,b){var d;fa&&ba.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function V(a,b){var c=0;Aa.procs.poll();var d=b.color;d&&(Z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Z.clearDepth(+b.depth),c|=256);"stencil"in b&&(Z.clearStencil(b.stencil|0),c|=1024);ba(!!c,"called regl.clear with no buffer specified");Z.clear(c)}function E(a){ba.type(a,"function","regl.frame() callback must be a function");
Ca.push(a);T();return{cancel:function(){function c(){var a=b(Ca,c);Ca[a]=Ca[Ca.length-1];--Ca.length;0>=Ca.length&&q()}var d=b(Ca,a);ba(0<=d,"cannot cancel a frame twice");Ca[d]=c}}}function D(){var a=za.viewport,b=za.scissor_box;a[0]=a[1]=b[0]=b[1]=0;J.viewportWidth=J.framebufferWidth=J.drawingBufferWidth=a[2]=b[2]=Z.drawingBufferWidth;J.viewportHeight=J.framebufferHeight=J.drawingBufferHeight=a[3]=b[3]=Z.drawingBufferHeight}function e(){J.tick+=1;J.time=a();D();Aa.procs.poll()}function N(){Q.refresh();
D();Aa.procs.refresh();P&&P.update()}function a(){return(k()-z)/1E3}console.log("REGL args are:",d);d=f(d);console.log("REGL configs are:",d);if(!d)return null;var Z=d.gl,A=Z.getContextAttributes(),fa=Z.isContextLost(),Oa=B(Z,d);if(!Oa)return null;var W=n(),da=O(),R=Oa.extensions,P=ha(Z,R),z=k(),l=Z.drawingBufferWidth,K=Z.drawingBufferHeight,J={tick:0,time:0,viewportWidth:l,viewportHeight:K,framebufferWidth:l,framebufferHeight:K,drawingBufferWidth:l,drawingBufferHeight:K,pixelRatio:d.pixelRatio},
l={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ea=C(Z,R),oa=G(Z,da,d,function(a){return F.destroyBuffer(a)}),p=U(Z,R,oa,da),F=aa(Z,R,Ea,da,oa,p,l),ca=x(Z,W,da,d),Q=y(Z,R,Ea,function(){Aa.procs.poll()},J,da,d),na=t(Z,R,Ea,da,d),ra=m(Z,R,Ea,Q,na,da),Aa=u(Z,W,R,Ea,oa,p,Q,ra,{},F,ca,l,J,P,d),W=M(Z,ra,Aa.procs.poll,J,A,R,Ea),za=Aa.next,ga=Z.canvas,Ca=[],la=[],qa=[],xa=[d.onDestroy],ya=null;ga&&(ga.addEventListener("webglcontextlost",Y,!1),ga.addEventListener("webglcontextrestored",h,!1));
var ja=ra.setFBO=w({framebuffer:I.define.call(null,1,"framebuffer")});N();A=H(w,{clear:function(a){ba("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ja(H({framebuffer:a.framebuffer.faces[b]},a),V);else ja(a,V);else V(null,a)},prop:I.define.bind(null,1),context:I.define.bind(null,2),"this":I.define.bind(null,3),draw:w({}),buffer:function(a){return oa.create(a,34962,!1,!1)},elements:function(a){return p.create(a,
!1)},texture:Q.create2D,cube:Q.createCube,renderbuffer:na.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:F.createVAO,attributes:A,frame:E,on:function(a,b){ba.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return E(b);case "lost":c=la;break;case "restore":c=qa;break;case "destroy":c=xa;break;default:ba.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=
c[c.length-1];c.pop();break}}}},limits:Ea,hasExtension:function(a){return 0<=Ea.extensions.indexOf(a.toLowerCase())},read:W,destroy:function(){Ca.length=0;q();ga&&(ga.removeEventListener("webglcontextlost",Y),ga.removeEventListener("webglcontextrestored",h));ca.clear();ra.clear();na.clear();F.clear();Q.clear();p.clear();oa.clear();P&&P.clear();xa.forEach(function(a){a()})},_gl:Z,_refresh:N,poll:function(){e();P&&P.update()},now:a,stats:da});d.onDone(null,A);return A}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>